# StackOverflow 问答 13450000-13450999

# php - Codeigniter 会话匹配 IP

> ID：13450004
> 
> 赞同：1
> 
> 时间：2012-11-19T08:24:43.203
> 
> 标签：php, database, codeigniter, session

我想知道与使用 session_matching 用户 IP 相关的主要问题是什么？

我是否理解这会使会话表更小，因为如果找到 ip 会话是从同一个 db 字段重新生成的，还是我弄错了？

我的问题是站点上有很多用户，这将产生很多会话表字段，而 ip 匹配参数没有设置为 TRUE，因为如果会话与用户 ip 不匹配，则新的 db 字段用于用户会话，这是真的吗？

这是一个示例，展示了我认为我对会话 db 表的了解：

```
$config['session_match_ip'] = false;

3000000 users on site = 3000000 session db records.
3000000 users returns on site = 6000000 session db records. (cause everytime user is a NEW USER)

$config['session_match_ip'] = true;

3000000 users on site = 3000000 session db records.
3000000 users returns on site = 4500000 session db records. (cause ,maybe, 1500 users uses static IP) 
```

这个逻辑对吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T09:51:13.513

当然，如果您选择使用`$config['session_match_ip']`set to ，您的数据库中将有更多记录`false`。但是，如果您查看[codeigniter 文档](http://codeigniter.com/user_guide/libraries/sessions.html)，您会看到 codeigniter 在过期会话上进行垃圾收集，这应该可以让您控制一切。

> “注意：Session 类具有内置的垃圾收集功能，可以清除过期的会话，因此您无需编写自己的例程来执行此操作。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T08:28:33.290

[我在这里看到另一个链接，可以帮助您了解会话匹配 = ip](https://stackoverflow.com/questions/6977284/safe-authentication-in-codeigniter)

这可能会有所不同，但比为会话创建一个数据库字段到您的数据库更有用

# perl - 无法将 CPAN 与代理身份验证一起使用。获取 keep_alive 错误

> ID：13450006
> 
> 赞同：4
> 
> 时间：2012-11-19T08:24:59.677
> 
> 标签：perl, cpan, keep-alive

我无法在 perl 中安装任何需要代理身份验证的模块。我使用 cpan[2]> o conf init /proxy/ 为 perl 配置了代理凭据

当我尝试安装任何软件包时出现以下错误。请帮忙。

```
cpan[4]> i 'XML::RAI'
←[32mGoing to read 'C:\Perl\cpan\Metadata'←[0m
←[32m  Database was generated on Wed, 26 Sep 2012 10:43:03 GMT←[0m
←[32mFetching with LWP:
http://ppm.activestate.com/CPAN/authors/01mailrc.txt.gz←[0m
The keep_alive option must be enabled for NTLM authentication to work.  NTLM authentication aborted.
Catching error: "Undefined subroutine &CPAN::HTTP::Credentials::_clear_non_proxy_credentials called at C:\\Perl\\lib/CPAN/HTTP/Cred
ne 391
        CPAN::shell() called at C:/Perl/lib/App/Cpan.pm line 295
        App::Cpan::_process_options('App::Cpan') called at C:/Perl/lib/App/Cpan.pm line 364
        App::Cpan::run('App::Cpan') called at C:\Perl\bin/cpan.bat line 24
←[32m←[0m 
```

乌玛·马赫什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T12:52:05.447

You have to set proxy settings from the cpan

```
perl -MCPAN -e shell
cpan[2]> o conf init /proxy/
Your ftp_proxy? [a.b.c.d] a.b.c.d:port
Your http_proxy? [a.b.c.d] a.b.c.d:port
Your no_proxy? [] a.b.c.d:port
cpan[3]> o conf commit 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-22T15:41:49.517

如果您存储的密码不正确，可能会触发此错误。

# wso2 - 在 WSO2 BPEL 中处理并发事件时出错

> ID：13450007
> 
> 赞同：1
> 
> 时间：2012-11-19T08:25:07.673
> 
> 标签：wso2, wso2carbon, bpel

我使用 WSO2 BPS 开发了一个 BPEL 工作流。该工作流有两个事件处理程序，用于两种不同类型的事件。

如果工作流按顺序接收（不同类型的）两个事件，则工作流可以正常工作。但是，如果有两个事件同时到达，似乎其中一个已被处理，另一个必须等​​待，然后我看到一个超时异常（等待事件）。

任何机构有这方面的经验？有什么解决方案可以同时处理这两个事件吗？

事件处理程序：

```
<bpel:onEvent messageType="ws-dpalert:pushIn" operation="pushAlert" partnerLink="alertCallbackEvent" portType="ws-dpalert:PushPortType" variable="alertMessage">
    <bpel:correlations>
        <bpel:correlation initiate="no" set="correlator"/>
    </bpel:correlations>
    <bpel:scope name="onlertMessages">
        <bpel:sequence name="alertProcessing">                                         
                            ...........                                
        </bpel:sequence>
    </bpel:scope>
</bpel:onEvent> 
```

谢谢，

明三。

* * *

我的事件处理程序是：

.....................

```
 </bpel:sequence>
    </bpel:scope>
</bpel:onEvent>
<bpel:onEvent messageType="ws-dpalert:pushIn" operation="pushAlert" partnerLink="alertCallbackEvent" portType="ws-dpalert:PushPortType" variable="alertMessage">
    <bpel:correlations>
        <bpel:correlation initiate="no" set="correlator"/>
    </bpel:correlations>
    <bpel:scope name="onlertMessages">
        <bpel:sequence name="alertProcessing">                                       

                            ...........                             

                    </bpel:sequence>
    </bpel:scope>
</bpel:onEvent> 
```

# javascript - 如何删除多个动态文本框

> ID：13450014
> 
> 赞同：0
> 
> 时间：2012-11-19T08:25:41.737
> 
> 标签：javascript

我在这里有动态添加文本框的 JS 代码。我想添加另一个删除这些文本框的按钮，以防意外单击添加按钮。谢谢！

```
<script language="javascript">
  row_no=0;
  function addRow(tbl,row){
    row_no++;
    if (row_no<=20){
      if (row_no<=20){
        if (row_no>=10){
           var textbox  = row_no+'.)&nbsp;<input type="text" size = "50"  maxlength= "50" name= "desk_user[]">';
        }
        if (row_no<10){
           var textbox  = row_no+'.  )&nbsp;<input type="text" size = "20"  maxlength= "50" name= "desk_user[]">';
        }
        var textbox2 = '<input type="text" size = "60" maxlength= "250" name= "desk_report[]">';
        var textbox3 = '<input type="text" size = "60" maxlength= "250" name= "desk_action[]">';

        var tbl = document.getElementById(tbl);
        var rowIndex = document.getElementById(row).value;
        var newRow = tbl.insertRow(row_no);
        var newCell = newRow.insertCell(0);
        newCell.innerHTML = textbox;
        var newCell = newRow.insertCell(1);
        newCell.innerHTML = textbox2;
        var newCell = newRow.insertCell(2);
        newCell.innerHTML = textbox3;
      }
      if (row_no>20){
        alert ("Too Many Items. Limit of 20."); 
      }
    }
  }
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T08:31:56.700

您要删除所有动态添加的输入元素吗？添加这些输入元素的元素中是否还有其他可用内容？如果没有，并且如果您想删除所有元素，请尝试以下代码..

```
for(i=0; i < row_no; i++){
   newRow.insertCell(i).innerHTML = '';
} 
```

如果这不是您想要的，那么只需修改您的问题以获得正确的答案。因为没有特别说明是否需要删除所有元素或特定元素，以及添加这些输入元素的元素中是否还有其他内容。

# matlab - 在多个图像上运行 M 文件并写入输出图像

> ID：13450021
> 
> 赞同：0
> 
> 时间：2012-11-19T08:26:31.403
> 
> 标签：matlab

我写了一个M文件。我想在多个图像上运行这个 M 文件，然后通过分别命名来编写输出 .tif 图像。有没有简单的方法可以做到这一点？

谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T10:42:32.577

最佳实践是编写一个函数：

```
function img( inputName, outputName )

    if ~iscell(inputName)
         img( {inputName}, {outputName} ); 
            return; 
    end   

    for ii = 1:numel(inputName)

        im = imread(inputName{ii});

        ...

        [do operations on im]

        ...

        imwrite(im, outputName{ii}, 'tiff');

    end

end 
```

您可以从脚本、类、函数或命令窗口调用它，如下所示：

```
img(...
    {'file1.bmp', 'file2.bmp', ...},...
    {'file1.tif', 'file2.tif', ...}...
); 
```

您可以像这样获取输入文件名：

```
[filename, pathname] = uigetfile( ...
   {'*.bmp','bitmap-files (*.bmp)'; ...
    '*.*',  'All Files (*.*)'}, ...
    'Pick a file', ...
    'MultiSelect', 'on'); 
```

所以你可以使用

```
if filename ~= 0
    img(...
        [char(pathname) char(filename)],
        {'file1.tif', 'file2.tif', ...}...
    );
else
    error('No file selected.');
end 
```

这已经表明您可以更好地回收输入文件名：

```
function img( fileNames )

    ... % function's mostly the same, except: 

    [pth,fname] = fileparts(fileNames{ii});

    imwrite(im, [pth filesep fname '.tif'], 'tiff');

end 
```

或者，为了在使用时增加便利`uigetfile`，

```
if filename ~= 0
    img(pathname, filename);

else
    error('No file selected.');
end 
```

和

```
function img( pathnames, filenames)

    if ~iscell(pathnames)
         img( {pathnames}, {filenames} ); 
            return; 
    end   

    for ii = 1:numel(pathnames)

        im = imread([pathnames{ii} filenames{ii}]);

        ...

        [do operations on im]

        ...

        [~,basename] = fileparts(filenames{ii});
        imwrite(im, [basename '.tif'], 'tiff');

    end

end 
```

# grails - 无法在tomcat上部署grails

> ID：13450024
> 
> 赞同：0
> 
> 时间：2012-11-19T08:26:51.880
> 
> 标签：grails, deployment, tomcat7, grails-2.1

将 grails 2.1.1 战争部署到 tomcat7 时，出现以下错误：

```
Configuring Spring Security Core ...
... finished configuring Spring Security Core

Nov 19, 2012 9:17:08 AM org.apache.catalina.core.StandardContext startInternal
SEVERE: Error listenerStart
Nov 19, 2012 9:17:08 AM org.apache.catalina.core.StandardContext startInternal
SEVERE: Context [/myapp] startup failed due to previous errors
Nov 19, 2012 9:18:28 AM org.apache.catalina.startup.HostConfig deleteRedeployResources
INFO: Undeploying context [/myapp] 
```

可能是什么问题？

# asp.net - 在线写入文本文件，网络路径是什么样的？

> ID：13450032
> 
> 赞同：0
> 
> 时间：2012-11-19T08:28:01.890
> 
> 标签：asp.net, path, web-config, log4net

我正在尝试为我的网站编写日志功能，并且难以将日志写入文本文件。我正在使用 log4net。

我认为我的问题在于路径。当文本文件存储在我的 PC 上时，记录器在我的本地主机上工作，但代码无法在线工作。

我尝试写入的文本文件名为`currentLog.txt`，如下图所示。

![在此处输入图像描述](../Images/a6bc7c725e6750cf7baa583f6a6e933b.png)

在我的 web.config 中，我可以选择在女巫中插入路径以查找文本文件。我似乎找不到插入路径的正确方法。

```
<file value="../../Logs/CurrentLog.txt"/>
<file value="..\\Logs\\CurrentLog.txt"/>
<file value="~/Logs/CurrentLog.txt"/>
<file value="/formvlgx/formvalue.co.za/wwwroot/Logs/CurrentLog.txt"/>
<file value="http://formvalue.co.za/wwwroot/Logs/CurrentLog.txt"/> 
```

有人可以告诉我为实时站点插入路径的正确方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T08:32:38.523

Web 路径为： http: [//formvalue.co.za/Logs/CurrentLog.txt](http://formvalue.co.za/Logs/CurrentLog.txt)

服务器上的绝对路径：/formvlgx/formvalue.co.za/wwwroot/Logs/CurrentLog.txt

注意：请小心让公众可以访问日志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T08:32:08.367

你的价值应该是这样的。value="../Logs/CurrentLog.txt"

请使用 Server.MapPath 获取文件位置。

# ruby-on-rails - Rails：为 OmniAuth 设置 Facebook 站点 URL 和应用程序域

> ID：13450034
> 
> 赞同：2
> 
> 时间：2012-11-19T08:28:19.030
> 
> 标签：ruby-on-rails, dns, omniauth

在 Facebook 上使用 Rails OmniAuth，我需要解决一个非常微妙的问题。我的应用在 Heroku 上，它的默认域是`myapp.herokuapp.com`（假设）。我有`hello.com`一个名为 的个人域，每当用户访问 hello.com 时，他都会被“转发”到 myapp.herokuapp.com。

在 Facebook 开发中心，有`App Domains`字段和`Site URL`字段。我以为我必须将 myapp.herokuapp.com 放入 Site URL，并将 hello.com 放入 App Domains，但它没有让我这样做。

`"hello.com" must be derived from one of: Site URL, Mobile Site URL, Canvas URL, Secure Canvas URL, Page Tab URL or Secure Page Tab URL.`

所以我只是将应用程序域留空。

一切似乎都很好，除了一件事。当我通过 myapp.herokuapp.com 访问我的网站时，OmniAuth 工作正常。但是当我浏览 hello.com 时，出现了一个小问题。**当我尚未登录 Facebook 时，它不会将我重定向到 Facebook 登录页面。**因此，当我单击登录按钮时，它会加载几秒钟但没有任何反应（因为它应该将我重定向到 facebook 网站以先登录但它没有）但是，当我已经登录时脸书，很好用。

我不确定问题是什么。我的猜测：

1.  我设置的应用程序域和站点 URL 错误。
2.  我还没有设置DNS。Heroku 告诉我我必须将 DNS 设置为指向我的域，但我不确定这意味着什么，因为我从未处理过这个问题。现在，我的个人域 hello.com 只是转发到 myapp.herokuapp.com。这是造成问题的原因吗？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T07:25:56.777

问题是我没有设置 DNS，只是将我的 herokuapp url 转发到我的自定义域。如果遇到类似问题，您应该设置 DNS，而不是“转发”。

# git - 如何撤消 git flow 功能完成？

> ID：13450039
> 
> 赞同：42
> 
> 时间：2012-11-19T08:28:47.373
> 
> 标签：git, git-branch, branching-and-merging, git-flow

我正在学习 git-flow，我刚刚做了`git flow feature finish <feature-name>`，它合并了我的功能分支来开发和删除它。

而不是这个，我想将功能分支推送到 github，这样我就可以在同行评审后合并它。

所以问题是，我如何“撤消”这个命令。或者换句话说，我怎样才能将我的最后两个提交从开发移动到我的功能分支？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-11-22T03:23:18.400

这些步骤应该可以解决问题：

获取所需的 sha：

```
git log 
```

`<sha1>`是在合并之前的
`<sha2>`提交是在您开始开发该功能之前的最后一次提交

```
git checkout develop
git checkout -b feature/<feature-name>
git reset <sha1> --hard
git checkout develop
git reset <sha2> --hard 
```

推送您的功能分支。

# java - 如何定义 和 在 servlet 3.0 的 web.xml-less 中？

> ID：13450044
> 
> 赞同：31
> 
> 时间：2012-11-19T08:29:27.873
> 
> 标签：java, tomcat7, java-ee-6, servlet-3.0

我有现有的网络应用程序，我想将其转换为 servlet 3.0 的 web.xml-less。我已经设法让它工作，但是 web.xml 中有 2 个标签，我仍然不知道 web.xml-less 环境中的等效代码。

```
<welcome-file-list>
    <welcome-file>/index.jsp</welcome-file>
</welcome-file-list>

<error-page>
    <error-code>404</error-code>
    <location>/pageNotFound</location>
</error-page> 
```

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-19T08:37:55.517

在 Servlets 3.0 中，很多情况下您不需要 web.xml，但是，有时它是必需的或只是有用的。您的案例只是其中之一 - 没有特殊的注释来定义欢迎文件列表或错误页面。

另一件事是——你真的想让它们硬编码吗？对于基于注释/编程的配置和 XML 中的声明性配置，有一些有效的用例。迁移到 Servlets 3.0 并不一定意味着不惜一切代价摆脱 web.xml。

我会发现您发布的条目是 XML 配置的更好示例。首先 - 它们可以从部署更改为部署，其次 - 它们影响整个应用程序而不是任何特定的 Servlet。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-12-05T07:26:49.333

对于模拟欢迎页面列表，将其放入

```
@EnableWebMvc
@Configuration
@ComponentScan("com.springapp.mvc")
public class MvcConfig extends WebMvcConfigurerAdapter {
...
    @Override
    public void addResourceHandlers(ResourceHandlerRegistry registry) {
        registry.addResourceHandler("/*.html").addResourceLocations("/WEB-INF/pages/");
    }

    @Override
    public void addViewControllers(ViewControllerRegistry registry) {
        registry.addViewController("/").setViewName("forward:/index.html");
    }
...
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-04-03T07:00:47.277

在 Spring Boot 或一般 Spring MVC 应用程序中用于以下场景：

可以从使用自定义 ResourceHandlerRegistry 注册的位置提供静态文件。我们有一个静态资源*index.html*，它可以在*localhost:8080/index.html*访问。我们只想将*localhost:8080/*请求重定向到*localhost:8080/index.html*，可以使用以下代码。

```
package in.geekmj.config;

import org.springframework.context.annotation.Configuration;

import org.springframework.web.servlet.config.annotation.EnableWebMvc;

import org.springframework.web.servlet.config.annotation.ResourceHandlerRegistry;

import org.springframework.web.servlet.config.annotation.ViewControllerRegistry;

import org.springframework.web.servlet.config.annotation.WebMvcConfigurerAdapter;

@Configuration
@EnableWebMvc
public class WebConfiguration extends WebMvcConfigurerAdapter {

private static final String[] CLASSPATH_RESOURCE_LOCATIONS = { "classpath:/META-INF/resources/",
        "classpath:/resources/", "classpath:/static/", "classpath:/public/" };

@Override
public void addResourceHandlers(ResourceHandlerRegistry registry) {
    registry.addResourceHandler("/**").addResourceLocations(CLASSPATH_RESOURCE_LOCATIONS);
}

@Override
public void addViewControllers(ViewControllerRegistry registry) {
    registry.addRedirectViewController("/", "/index.html");
}
} 
```

现在访问*localhost:8080/*将重定向到*localhost:8080/index.html*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-04-17T05:38:26.700

在 Spring Boot 2.0 中，您可以使用此代码

```
@Configuration
public class TomcatInitializer implements 
    WebServerFactoryCustomizer<TomcatServletWebServerFactory> , TomcatContextCustomizer {
    @Override
    public void customize(TomcatServletWebServerFactory factory) {
        factory.addContextCustomizers(this);
    }

    private ErrorPage createStatusErrorPage(int errorCode, String location) {
        ErrorPage errorPage = new ErrorPage();
        errorPage.setErrorCode(errorCode);
        errorPage.setLocation(location);
        return errorPage;
    }

    private ErrorPage createExceptionErrorPage(Class<?> klass, String location) {
        ErrorPage errorPage = new ErrorPage();
        errorPage.setExceptionType(klass);
        errorPage.setLocation(location);
        return errorPage;
    }

    @Override
    public void customize(Context context) {
        context.addWelcomeFile("/index.jsp");
        context.addErrorPage(createStatusErrorPage(404, "/404.jsp"));
        context.addErrorPage(createExeptionErrorPage(Exception.class, "exception.jsp"));
        context.setSessionTimeout(120);
    }
} 
```

# python - Flask 内容处置标头中的 Unicode

> ID：13450049
> 
> 赞同：3
> 
> 时间：2012-11-19T08:29:45.703
> 
> 标签：python, http, unicode, flask

我正在尝试将 Flask 响应对象中的 Content-Disposition 标头设置为可能包含瑞典语字符 (åäö) 的文件名。我的测试代码如下所示：

```
response =  flask.send_file(output_file_path)
response.headers[u"Content-Disposition"] = u'filename="åäö.pdf"' 
```

这会出现以下错误：

> 文件“C:\Python27\Lib\BaseHTTPServer.py”，第 401 行，在 send_header
> self.wfile.write("%s: %s\r\n" % (keyword, value))
> UnicodeDecodeError: 'ascii' codec can '不解码位置 10 中的字节 0xe5：序数
> 不在范围内（128）

我已经尝试过编码、解码和我能想到的任何事情，但我无法让 Flask 接受我想在我的标题中使用 Unicode（utf-8）！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T11:35:53.927

参见 RFC [6266](http://greenbytes.de/tech/webdav/rfc6266.html)了解 Content-Disposition 和[5987](http://greenbytes.de/tech/webdav/rfc5987.html)了解编码。测试用例[在这里](http://greenbytes.de/tech/tc2231/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T08:49:03.583

在 utf-8 中发送 http 标头值存在一些问题。看看这个问题[How to send non-English unicode string using HTTP header?](https://stackoverflow.com/questions/5423223/how-to-send-non-english-unicode-string-using-http-header) .

# android - ViewPager 解决 onClick 事件

> ID：13450050
> 
> 赞同：0
> 
> 时间：2012-11-19T08:29:49.393
> 
> 标签：android, events, android-viewpager

我有一个`ViewPager`作为`ListView`标题，现在一切都运行良好，我接下来要做的是让用户有资格在页面之间移动`ViewPager`，并且能够点击页面，这样我就可以触发一个新的`Activity`。我试过`setOnClickListener`了，`ViewPager`但是当我想在页面之间移动时它触发了。有什么解决办法吗？？？

编辑：我不想`setOnClickListener`在 ViewPager 的任何视图中。像一个`Button`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T08:32:15.483

您需要`onClickListener`在视图寻呼机中设置视图（可能是一个按钮）`adapter`并处理适配器中的单击。

**编辑**
您最好使用 ViewFlipper 来实现这种功能。

```
private static final int SWIPE_MIN_DISTANCE = 120;
    private static final int SWIPE_MAX_OFF_PATH = 250;
    private static final int SWIPE_THRESHOLD_VELOCITY = 200;

class MyGestureDetector extends SimpleOnGestureListener {
        @Override
        public boolean onSingleTapConfirmed(MotionEvent arg0) {
            //Single Tap
            return false;
        };

        public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
                float velocityY) {
            try {
                if (Math.abs(e1.getY() - e2.getY()) > REL_SWIPE_MAX_OFF_PATH)
                    return false;

                if (e1.getX() - e2.getX() > REL_SWIPE_MIN_DISTANCE
                        && Math.abs(velocityX) > REL_SWIPE_THRESHOLD_VELOCITY) {
                    ViewFlipper vf = (ViewFlipper) findViewById(R.id.flipper);
                    vf.setInAnimation(pushRightIn);
                    vf.setOutAnimation(pushLeftOut);
                    // right to left swipe
                }

                else if (e2.getX() - e1.getX() > REL_SWIPE_MIN_DISTANCE
                        && Math.abs(velocityX) > REL_SWIPE_THRESHOLD_VELOCITY) {
                    ViewFlipper vf = (ViewFlipper) findViewById(R.id.flipper);
                    vf.setInAnimation(pushLeftIn);
                    vf.setOutAnimation(pushRightOut);
                    // left to right swipe
                }
            } catch (Exception e) {
            }
            return false;
        }
    } 
```

# c# - 表单身份验证和 ASP.NET 成员资格中的超时期限连接池和会话未过期问题

> ID：13450051
> 
> 赞同：1
> 
> 时间：2012-11-19T08:29:57.780
> 
> 标签：c#, asp.net, asp.net-membership, forms-authentication

我有一个与 ASP.NET 成员资格和表单身份验证相关的问题。我一直在寻找这个解决方案很长时间（包括 StackOverflow.com），但无法找到与我的方案有关的解决方案。请帮我。

我在应用程序中使用 ASP.NET 成员身份和表单身份验证，问题是在测试应用程序大约 30 多分钟期间，出现以下错误：-
1) 在从池中获取连接之前超时时间已过. 这可能是因为所有池连接都在使用中并且达到了最大池大小。
2) 会话没有过期，也不会重定向到登录页面。
3) 会话值有时会变为空。

该应用程序也在生产中，但客户尚未报告上述任何此类问题。

请在 Web.config 设置下方找到：-

```
<sessionState timeout="30" mode="InProc">
</sessionState>

<membership defaultProvider="SqlProvider" userIsOnlineTimeWindow="20">
    <providers>
        <clear/>
        <add name="SqlProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="DBSQLServer" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" passwordFormat="Hashed" applicationName="/ApplicationPortal"/>
    </providers>
</membership>       

<add name="DBSQLServer" connectionString="Data Source=SERVER-NAME\SQLEXPRESS2008;Initial Catalog=DB-Name;Max Pool Size=100;Trusted_Connection=True;" providerName="System.Data.SqlClient"/> 
```

不要忘记这部分：-

```
<authentication mode="Forms">
  <forms loginUrl="~/Login.aspx" defaultUrl="~/Login.aspx" protection="All" timeout="30">
  </forms>
</authentication> 
```

虽然很少有连接没有被处理掉，但现在所有的连接都被正确处理掉了。我在某个地方发现，通过关闭 DataReaders，这将得到解决，但是由于我已经关闭了所有连接，所以如果 DataReaders 在我的场景中没有关闭/处理，这会产生影响吗？

我还想知道同时导致这两个错误的可能问题是什么，以及如何解决这两个问题。

许多页面也使用了内联查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T08:41:46.943

这一切听起来都是一个糟糕的设计。

1.  确保每个请求使用一个连接，并且在任何情况下都将其丢弃（最终阻止）
2.  当您说会话未过期时，您是否等待超时时间而没有确定提出任何请求？
3.  当您的会话值被清除时，实际上意味着会话已过期或被清除，因为 IIS 工作进程已被回收。调整工作人员回收策略或在数据库中设置会话状态。
4.  当您说会话未重定向到登录页面时-这是错误的。会话与登录页面无关。如果您尝试访问需要您登录的页面，您将被重定向到那里。

# mysql - 如何在mysql中用1替换字符串（1）？

> ID：13450052
> 
> 赞同：0
> 
> 时间：2012-11-19T08:30:06.690
> 
> 标签：mysql, replace

我的表中有 1000 个文件名。

我的文件名是`test%20(1).jpg, test%20(2).jpg....test%20(1000).jpg`.

我想将文件名替换为`test1.jpg, test2.jpg ... test1000.jpg`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T08:33:15.527

尝试**[REPLACE()](http://dev.mysql.com/doc/refman/5.0/en/replace.html)**函数

```
select replace(replace(col,'%20(',''),')','')
from t 
```

# [SQL小提琴演示](http://sqlfiddle.com/#!2/f1e00/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T08:35:24.037

尝试

```
update mytable t1, (SELECT @rank:=0) t2
set myname = concat('test',@rank:=@rank+1,'.jpg'); 
```

或者如果适用于保留订单（在 2 个查询中）：

```
SET @rank:= 0;
UPDATE mytable
SET myname = concat('test',@rank:=@rank+1,'.jpg')
ORDER By myname; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T08:33:47.710

你需要在`REPLACE`这里打两次电话

```
UPDATE tableName
SET name = REPLACE(REPLACE(name, '%20(', ''), ')','') 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/25e1c/1)
*   [代替](http://dev.mysql.com/doc/refman/5.6/en/string-functions.html#function_replace)

# file - 文件比较

> ID：13450055
> 
> 赞同：0
> 
> 时间：2012-11-19T08:30:27.297
> 
> 标签：file, matlab

我正在尝试比较 2 个 txt 文件以检查文件是否相等，否则获取输出并给出差异（假设有一个 diff 行 x）

我正在尝试如下：

```
fid1 = fopen(file_1, 'r');
fid2 = fopen(file_2, 'r');
lines1 = textscan(fid1,'%s','delimiter','\n');
lines2 = textscan(fid2,'%s','delimiter','\n');
lines1 = lines1{1};
lines2 = lines2{1};
fclose(fid1);
fclose(fid2);
tf = isequal(lines1,lines2); % this gives 0 or 1 
```

我想在值为 0（文件不同）时本地化差异并给出文件不同的行或打印差异的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T08:40:15.333

您本质上想要比较您拥有的两个单元格数组的每个元素，而不是整个单元格数组。您可以在大多数语言中使用循环来做到这一点，但当然 MATLAB 有很多方法可以避免循环。在这里，它是`cellfun`：

`cellfun(@isequal,lines1,lines2)`

（我省略了如果两个单元格数组的大小不相等，则必须缩短较长的那个部分。）然后，`find`对于在任何向量中查找某个值的第一次（或所有）出现很有用.

# c# - 为什么取消引用 DataRow 空值不会引发异常？

> ID：13450056
> 
> 赞同：1
> 
> 时间：2012-11-19T08:30:35.090
> 
> 标签：c#, ado.net

您能否查看下面的代码并说明为什么当列值为空时此代码不会引发异常？

```
DataTable table = new DataTable();
table.Columns.Add("PreviewHtml");

table.Rows.Add(new object[] { "aksdhaskldh" });
table.Rows.Add(new object[] { "129836 128o tagjk 1782 3" });
table.Rows.Add(new object[] { null });
table.Rows.Add(new object[] { "1278o36 " });

foreach (DataRow r in table.Rows)
{
     Console.WriteLine(r["PreviewHtml"].ToString());
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T08:32:36.933

这是因为[`DBNull.ToString`](http://msdn.microsoft.com/en-us/library/zkbzs85t%28v=vs.100%29.aspx)返回一个空字符串。

DataColumn 的[`AllowDBNull`](http://msdn.microsoft.com/en-us/library/system.data.datacolumn.allowdbnull.aspx)属性默认设置为 true，否则无法添加`null`值。

`Null`值转换为[`DBNull.Value`](http://msdn.microsoft.com/en-us/library/3e77ezy5), [AutoIncrement](http://msdn.microsoft.com/en-us/library/system.data.datacolumn.autoincrement.aspx)`null`列在传递时也会递增。

# msbuild - 修复 COM 引用：类型库导入器无法转换成员 DISPARAMS.rgvarg 的签名

> ID：13450058
> 
> 赞同：14
> 
> 时间：2012-11-19T08:30:43.693
> 
> 标签：msbuild, visual-studio-sdk

我有一个构建服务器，用于构建 Visual Studio 扩展。我最近迁移到另一台服务器，现在我收到以下警告：

> C:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets(1988,5)：警告 MSB3305：处理来自路径“C:\Windows\SysWOW64\stdole2.tlb”的 COM 引用“”。类型库导入器无法转换成员“DISPPARAMS.rgvarg”的签名。C:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets(1988,5)：警告 MSB3305：处理来自路径“C:\Windows\SysWOW64\stdole2.tlb”的 COM 引用“”。类型库导入器无法转换成员“DISPPARAMS.rgdispidNamedArgs”的签名。

这个新服务器和以前的服务器之间的主要区别在于，以前的服务器安装了一个独立的 Shell（Microsoft Visual Studio Management Studio）。我想我错过了服务器注册，但我不知道是哪个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-04T00:36:36.603

虽然不是对问题的解释，但[MSDN 上的此链接](https://social.msdn.microsoft.com/Forums/en-US/7a7c352b-20cb-4931-b3b5-27e899016f75/turning-off-msbuild-warnings-msb3305?forum=msbuild&prof=required)显示了如何通过将以下项目添加到 .csproj 文件顶部的 PropertyGroup 来抑制警告：

```
<ResolveComReferenceSilent>True</ResolveComReferenceSilent> 
```

# android - Surfaceview 中的 Android 相机预览比例不佳

> ID：13450059
> 
> 赞同：2
> 
> 时间：2012-11-19T08:30:54.270
> 
> 标签：android, camera

预览图在surfaceview中显示，比例不好。</p>

`"android:screenOrientation="landscape"`有豆组。

我的设备屏幕是 960x540。我应该设置什么比例？

# list - 在prolog中读取和存储文件的所有单词

> ID：13450060
> 
> 赞同：1
> 
> 时间：2012-11-19T08:30:53.020
> 
> 标签：list, file-io, prolog

我是 prolog 的新手，直到现在我能够读取文件的所有单词，一个一个地显示它们，现在我想将它们存储在一个列表中（一个一个地，当我显示它们时）。随处给出的所有追加逻辑，将两个列表的内容追加到一个空列表中。例如 append(new_word,word_list,word_List)，最初我的 word_list 是空的，所以一切都很好，但之后它说不，然后停止。需要帮助才能将元素一一存储在列表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T19:36:25.043

您可以使用差异列表：

```
file_to_list(W, L) :-
   read_word(Word),
   append_dl(W, [Word|U]-U, Ws),
   !, file_to_list(Ws, L).

file_to_list_1(Ws, Ws).

append_dl(X-Y, Y-Z, X-Z). 
```

您调用**file_to_list(UU, L-[])**来获取单词列表。没有减速，但比 CapelliC 的代码（每个单词一个）需要更多的推论。

# qt - QEgl::display()：无法初始化 EGL 显示：“成功 (0x3000)”错误 QML

> ID：13450062
> 
> 赞同：0
> 
> 时间：2012-11-19T08:31:14.300
> 
> 标签：qt, qml, egl

我正在使用 Qt/QML 构建一个应用程序。我可以成功编译它，但是在运行时出现此错误：

```
QEgl::display(): Cannot initialize EGL display: "Success (0x3000)" 
QEglContext::chooseConfig(): Could not find a suitable EGL configuration 
Requested: "type=es2 rgba=0,0,0,0 surface-type=window" 
Available: 
```

此外，它不显示任何可用的配置。我将一些控制台日志放在 QML 文件中，但它们从未显示在控制台中。但是，我可以看到来自 c++ 代码的日志。

# iphone - 如何在 uitableview 中使用 iphone 中的文本字段显示相机捕获的图像

> ID：13450063
> 
> 赞同：0
> 
> 时间：2012-11-19T08:31:15.140
> 
> 标签：iphone, uitableview

我已经捕获了一张图像并将其保存到文档目录中，现在我想`UiTableView`在运行时显示这些捕获的图像。每当我捕获图像时，它都必须显示在`UiTableView`. 每次我想用捕获的图像创建一个新行并在图像`TextView`旁边显示一个以记录捕获的图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T08:41:25.917

创建 UITableViewCell，它附近有一个 UIImageView 和 UITextField。注册 NSNotification。将捕获的图像保存在文档目录中后，发布通知并重新加载表。

# p6spy - 如何在特定的情况下使用 OracleConnectionPoolDataSource 配置 P6Spy

> ID：13450067
> 
> 赞同：3
> 
> 时间：2012-11-19T08:31:34.873
> 
> 标签：p6spy

我们在项目中使用 Oracle 连接池机制，因为我们的应用程序使用了一些 Oracle 特定的功能。

我们的数据源在jetty.xml中的配置如下：

```
<Call name="addService">
<Arg>
  <New class="org.mortbay.jetty.plus.DefaultDataSourceService">
    <Set name="Name">DataSourceService</Set>

    <Call name="addDataSource">
        <Arg>app_ds</Arg><!--java:comp/env-->
        <Arg>
         <New class="oracle.jdbc.pool.OracleConnectionPoolDataSource">
            <Set name="description">xxxx</Set>
            <Set name="user">xxx</Set>
            <Set name="password">xxxx</Set>
            <Set name="loginTimeout">xxx</Set>
            <Set name="URL">jdbc:oracle:thin:@localhost:1521:xxx</Set>
        </New>
      </Arg>
    </Call>
     <Call name="start"/>
 </New> 
```

现在我们如何将此数据源与 P6Spy 集成，以便 P6Spy 可以将所有 SQL 语句打印到控制台...？

我以前曾将 P6spy 与 Spring 的 DriverManagerDataSource 等其他数据源一起使用，其他数据源如

## （在 Tomcat 中）

```
Resource name="jdbc/test" auth="Container"
      type="javax.sql.DataSource" driverClassName="oracle.jdbc.driver.OracleDriver"
      url="jdbc:oracle:thin:@xxx"
      username="xxx" password="xxx" maxActive="65" maxIdle="10"
      maxWait="-1" removeAbandoned="true"/> 
```

..ETC。

所有这些数据源都以 driverClassName 作为参数，我们可以提供“com.p6spyengine.spy.P6SpyDriver”代替“oracle.jdbc.driver.OracleDriver”，并在 spy.properties 中提供真实的驱动程序名称。一切都很好。

但是对于 oracle.jdbc.pool.OracleConnectionPoolDataSource，没有这样的名为 driverClassName 的属性来提供代理驱动程序。

在这种情况下，我如何将 P6Spy 与其集成？

请帮忙...

在此先感谢，克里希纳五世

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-20T18:10:34.447

使用 Jetty，添加 P6Spy 实际上要容易一些。P6Spy 有一个 P6DataSource 通过构造函数参数接受另一个数据源。这是迄今为止设置 P6Spy 最简单的方法。

```
<Call name="addService">
<Arg>
  <New class="org.mortbay.jetty.plus.DefaultDataSourceService">
    <Set name="Name">DataSourceService</Set>

    <Call name="addDataSource">
        <Arg>app_ds</Arg><!--java:comp/env-->
        <Arg>
         <New class="com.p6spy.engine.spy.P6DataSource">
           <Arg>
              <New class="oracle.jdbc.pool.OracleConnectionPoolDataSource">
                 <Set name="description">xxxx</Set>
                 <Set name="user">xxx</Set>
                 <Set name="password">xxxx</Set>
                 <Set name="loginTimeout">xxx</Set>
                 <Set name="URL">jdbc:oracle:thin:@localhost:1521:xxx</Set>
              </New>
           </Arg>
         </New>
      </Arg>
    </Call>
     <Call name="start"/>
 </New> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-09T08:19:19.783

根据我对 Glassfish 的经验，我建议：

*   保留现有的 oracle（真实）数据源定义
*   创建一个新的（P6Spy 一个）用作真实的代理，

定义如下：

```
<Call name="addService">
    <Arg>
        <New class="org.mortbay.jetty.plus.DefaultDataSourceService">
            <Set name="Name">DataSourceService</Set>

            <Call name="addDataSource">
                <Arg>p6spy_ds</Arg><!--java:comp/env -->
                <Arg>
                    <New class="com.p6spy.engine.spy.P6DataSource">
                        <!-- properties would be irrelevant here -->
                        <Set name="description">xxxx</Set>
                        <Set name="user">xxx</Set>
                        <Set name="password">xxxx</Set>
                        <Set name="loginTimeout">xxx</Set>
                        <Set name="URL">jdbc:oracle:thin:@localhost:1521:xxx</Set>
                    </New>
                </Arg>
            </Call>
            <Call name="start" />
        </New> 
```

*   并确保从`spy.properties`文件中引用真实的，

使用：

```
realdatasource=jdbc/app_ds # assuming that app_ds is your real datasource 
```

*   最后一件事是`proxy_ds`在所有应用程序逻辑中引用以确保使用它（如果引用会花费您太多，您始终可以调用与原始数据源相同的代理数据源并重命名原始数据源 + 引用新名称在`spy.properties`配置文件中）

# android - 默认 JSON LIB 对于实时 Twitter 提要是否足够强大？

> ID：13450072
> 
> 赞同：0
> 
> 时间：2012-11-19T08:32:01.487
> 
> 标签：android

我将使用实时 twitter 提要并将其解析为用于列表视图显示的对象。我需要强大的解决方案是默认的 json lib 足以胜任这项任务，还是我需要使用 Gson / jackson lib？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T08:38:13.040

检查 Gson 和 JackSon：

[GSON](https://sites.google.com/site/gson/gson-user-guide)

[杰克逊](http://wiki.fasterxml.com/JacksonInFiveMinutes)

**编辑**：我没有看到你提到这个库。是的，你应该使用它们。这是强大的库，我用它们来使用 Json Web 服务，到目前为止没有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T08:46:33.823

GSON/Jackson 只是允许您将 json 响应解析为对象或反之的库。但是，android 框架中提供的 json 默认实现足以处理任何响应字符串。唯一的缺点或关闭是您需要编写额外的代码来完成简单的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T08:55:36.953

以下是一些带有 JSON 库基准标记的链接...

[http://blog.novoj.net/2012/02/05/json-java-parsers-generators-microbenchmark/](http://blog.novoj.net/2012/02/05/json-java-parsers-generators-microbenchmark/)

[http://danilywoo.blogspot.in/2011/04/json-java-libraries-benchmark-jsonlib.html](http://danielywoo.blogspot.in/2011/04/json-java-libraries-benchmark-jsonlib.html)

[杰克逊VS。格森](https://stackoverflow.com/questions/2378402/jackson-vs-gson)

从基准来看，Jackson 似乎是 JSON 解析最好和最快的库......

# c# - 奇怪的正则表达式行为 - 仅匹配第一个和最后一个捕获组

> ID：13450078
> 
> 赞同：7
> 
> 时间：2012-11-19T08:32:27.930
> 
> 标签：c#, regex, perl, capture

我正在尝试编写一个匹配逗号分隔的单词列表并捕获所有单词的正则表达式。此行应匹配`   apple , banana ,orange,peanut `，捕获应为`apple`, `banana`, `orange`, `peanut`。为此，我使用以下正则表达式：

```
^\s*([a-z_]\w*)(?:\s*,\s*([a-z_]\w*))*\s*$ 
```

它成功匹配了字符串，但突然`apple`之间`peanut`就被捕获了。在 C# 和 Perl 中都可以看到这种行为。因此，我假设我错过了一些关于正则表达式匹配如何工作的东西。有任何想法吗？:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T08:41:23.100

给出的值`match.Groups[2].Value`只是第二组捕获的*最后一个值。*

要查找*所有*值，请查看`match.Groups[2].Captures[i].Value`在这种情况下`i`范围从`0`到 的位置`2`。（以及`match.Groups[1].Value`第一组。）

（+1 提问，我今天学到了一些东西！）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T08:47:10.093

试试这个：

```
string text = "   apple , banana ,orange,peanut";

var matches = Regex.Matches(text, @"\s*(?<word>\w+)\s*,?")
        .Cast<Match>()
        .Select(x => x.Groups["word"].Value)
        .ToList(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-19T08:39:53.897

您正在[重复您的捕获组](http://www.regular-expressions.info/captureall.html)，在每次重复匹配时，先前的内容都会被覆盖。因此，最后只有第二个捕获组的最后一场比赛可用。

您可以将第二个捕获组更改为

```
^\s*([a-z_]\w*)((?:\s*,\s*(?:[a-z_]\w*))*)\s*$ 
```

然后结果将是第二组中的“，香蕉，橙子，花生”。我不确定，如果你想要这个。

如果要检查字符串是否具有该模式并提取每个单词。我会分两步做。

1.  使用您的正则表达式检查模式。

2.  如果模式正确，请删除前导和尾随空格并在`\s*,\s*`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-19T08:49:56.150

简单的正则表达式：

`(?:^| *)(.+?)(?:,|$)`

解释：

```
?:    # Non capturing group
^| *  # Match start of line or multiple spaces
.+    # Capture the word in the list, lazy
?:    # Non capture group
,|$   # Match comma or end of line 
```

*注意：[Rublular](http://rubular.com/r/Jye97F5FTx)是一个很好的测试这种东西的网站。*

# python - 我如何使用 Scrapy python 登录到 stackoverflow 站点

> ID：13450079
> 
> 赞同：0
> 
> 时间：2012-11-19T08:32:27.837
> 
> 标签：python, scrapy

我刚刚开始学习scrapy，我想尝试使用python和Scrapy进行一些赞美。我正在考虑从我发布的特定标签中获取问题列表，然后在 SO 上解析它们。

但我不确定如何使用 open id 和 Scrapy 登录。

有人可以指导我这个我必须提交数据的网址，因为当我输入openid然后网站被转移到openid url所以我怎么能在那里输入密码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T08:55:18.387

使用[您的 RSS 提要](https://stackoverflow.com/feeds/user/1819817)（基本上是 xml）。

我能想到的另一种方法是：

```
Login normally in browser
export cookies to file
use that file in script 
```

我可以想到`fanatic`徽章会变得不那么有价值的情况。因为，然后人们会简单地在他们的服务器上安排 cron 来每天访问 SO！所以，我建议不要做这种事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T09:02:21.697

[这](http://doc.scrapy.org/en/latest/topics/request-response.html#using-formrequest-from-response-to-simulate-a-user-login)是一个很好的例子，如何使用 scrapy 模拟用户登录请求。

# php - 如何使用正则表达式从 PHP 中的 UTF8 字符串中正确删除重复的空白字符？

> ID：13450082
> 
> 赞同：5
> 
> 时间：2012-11-19T08:32:34.933
> 
> 标签：php, regex, utf-8, whitespace

我正在尝试使用正则表达式从 PHP 中的 UTF8 字符串中删除重复的空白字符。这个正则表达式

```
 $txt = preg_replace( '/\s+/i' , ' ', $txt ); 
```

通常工作正常，但有些琴弦有西里尔字母“Р”，更换后拧紧。经过小型研究，我意识到该字母被编码为 \x{D0A0}，并且由于 \xA0 是 ASCII 中的不间断空格，因此正则表达式将其替换为 \x20 并且该字符不再有效。

任何想法如何使用正则表达式在 PHP 中正确执行此操作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T08:36:55.793

试试`u`修饰符：

```
$txt="UTF 字符串 with 空格符號";
var_dump(preg_replace("/\\s+/iu","",$txt)); 
```

输出：

```
string(28) "UTF字符串with空格符號" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-19T08:37:21.297

它被描述为@ [http://www.php.net/manual/en/function.preg-replace.php#106981](http://www.php.net/manual/en/function.preg-replace.php#106981)

如果你想捕捉字符，以及欧洲、俄罗斯、中国、日本、韩国等等，只需：

*   使用 mb_internal_encoding('UTF-8');
*   将 preg_replace(' `...`u', '...', $string) 与 u (unicode) 修饰符一起使用

欲了解更多信息，preg_* 修饰符的完整列表可以在以下位置找到： http: [//php.net/manual/en/reference.pcre.pattern.modifiers.php](http://php.net/manual/en/reference.pcre.pattern.modifiers.php)

# c# - 通过 dll 将 C# 类映射到 Lua 函数

> ID：13450086
> 
> 赞同：2
> 
> 时间：2012-11-19T08:32:46.570
> 
> 标签：c#, .net, lua, luainterface

在我的“LuaTest”命名空间中，我有一个名为“Planet”的类。C# 代码如下所示：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using LuaInterface;

namespace LuaTest
{
    public class Planet
    {
        public Planet(string name)
        {
            this.Name = name;
        }
        public Planet() : this("NoName") { }
        public string Name
        {
            get;
            private set;
        }

        public void printName()
        {
            Console.WriteLine("This planet's name is {0}", Name);
        }
    }
} 
```

然后我构建了 LuaTest.dll 并将这个文件复制到保存我的 Lua 脚本的同一个文件夹中。在 Lua 脚本中，我写道：

```
--define Path for required dlls
package.cpath = package.cpath .. ";" .. "/?.dll"
package.path = package.path .. ";" .. "/?.dll/"
require 'luanet'
luanet.load_assembly("LuaTest")
local Planet = luanet.import_type("LuaTest.Planet")
local planet = Planet("Earth")
planet.printName() 
```

但是，这段代码不起作用。Lua 解释器抛出这个错误：

```
lua: dllTest.lua:7: attempt to call local 'Planet' (a nil value) 
```

我怀疑我的 LuaTest 程序集根本没有加载。谁能指出我做错了什么？我将非常感激，因为我已经被这个问题困扰了好几天了。

另外，我的 LuaInterface.dll 是 .NET4.0 环境中的重建版本可能会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T02:51:00.360

所以我同样花了很多时间。真正让我发疯的是试图让 Enums 工作。最终，我放弃了我的项目，转而使用一个非常简单的控制台应用程序，非常相似（具有讽刺意味的是，它也被命名为“LuaTest”）。

编辑：我注意到最初的“luanet.load_assembly("LuaTest")”似乎是多余的。使用它，或者令人惊讶地没有它。

另一个编辑：正如我在下面编辑错误的评论中，当我删除时：

```
print(luanet.LuaTest.Pointless) 
```

这一切都停止了工作（LuaTest.Pointless 变为 nil）。但是添加 luanet.load_assembly("LuaTest") 然后使它工作。可能是打印中存在某种奇怪的隐含负载，或者只是表达它们的类型。非常奇怪（tm）。

无论如何，它似乎对我有用（注意：经过大量实验）。我不知道为什么你的失败，我没有注意到任何真正的区别，但这是我所有的代码，以防其他人发现关键区别：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

using LuaInterface;

namespace LuaTest
    {
    public class Program
        {
        static void Main(string[] args)
            {
            Lua lua = new Lua();
            lua.DoFile("test.lua");
            }

        public int some_member = 3;
        }

    public class Pointless
        {
        public enum AnEnum
            {
            One,
            Two,
            Three
            };

        public static string aStaticInt = "This is static.";
        public double i;
        public string n = "Nice";
        public AnEnum oneEnumVal = AnEnum.One;
        private AnEnum twoEnumVal = AnEnum.Two;
        private string very;

        public Pointless(string HowPointLess)
            {
            i = 3.13;
            very = HowPointLess;
            }

        public class MoreInnerClass
            {
            public string message = "More, please!";
            }

        public void Compare(AnEnum inputEnum)
            {
            if (inputEnum == AnEnum.Three)
                Console.WriteLine("Match.");
            else
                Console.WriteLine("Fail match.");
            }
        }

    } 
```

和 test.lua：

```
luanet.load_assembly("LuaTest")

--Pointless is a class in LuaTest assembly
local Pointless = luanet.import_type("LuaTest.Pointless")

print(Pointless)
--Gives 'ProxyType(LuaTest.Pointless): 46104728

print(Pointless.aStaticInt)
--'This is static.'
--Fails if not static, as we expect

--Instantiate a 'Pointless'.  
local p = Pointless("Very")

print(p)
--Gives 'LuaTest.Pointless: 12289376'

--Now we can get at the items inside the Pointless
--class (well, this instance, anyway).

local e = p.AnEnum;
print(e)
--ProxyType(LuaTest.Pointless+AnEnum): 23452342
--I guess the + must designate that it is a type?

print(p.i)
--3.14

print(p.oneEnumVal)
--Gives 'One: 0'

print(p.twoEnumVal)
--Gives 'twoEnumVal'... private
--behaves very differently.

print(e.Two:ToString())
--Gives 'Two'

local more = p.MoreInnerClass()
print(more.message)
--'More, Please!'

--create an enum value here in the script,
--pass it back for a comparison to 
--the enum.
local anotherEnumVal = p.AnEnum.Three

p:Compare(anotherEnumVal)
--outputs 'Match' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-09T08:01:26.450

我花了一些时间将 C# dll 绑定到 lua。您的帖子很有帮助，但缺少一些东西。**以下解决方案应该有效**：

（确保将编译器更改为 .NET Framework 3.5 或更低版本！）

**行星.dll：**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Planets
{
    public class Planet
    {
        private string name;
        public string Name
        {
            get { return name; }
            set { this.name = value; }
        }

        private float diameter;
        public float Diameter
        {
            get { return diameter; }
            set { this.diameter = value; }
        }
        private int cntContinents;
        public int CntContinents
        {
            get { return cntContinents; }
            set { this.cntContinents = value; }
        }

        public Planet()
        {
            Console.WriteLine("Constructor 1");
            this.name = "nameless";
            this.diameter = 0;
            this.cntContinents = 0;
        }

        public Planet(string n, float d, int k)
        {
            Console.WriteLine("Constructor 2");
            this.name = n;
            this.diameter = d;
            this.cntContinents = k;
        }

        public void testMethod()
        {
            Console.WriteLine("This is a Test!");
        }
    }
} 
```

使用上面的代码，将其粘贴到您的类库项目中，并使用小于或等于 3.5 的 .NET 进行编译。

生成的 DLL 的位置需要 lua 环境知道。将其粘贴到例如“clibs”文件夹或另一个众所周知的 lua 系统路径中。然后尝试使用下面的 lua 示例。它应该工作。

**Test1.lua：（**选项 1，从 CLRPackage 中“导入”）

```
require "luanet"
require "CLRPackage"
import "Planet"
local PlanetClass = luanet.import_type("Planets.Planet")
print(PlanetClass)
local PlanetObject1 = PlanetClass()
print(PlanetObject1)
local PlanetObject2 = PlanetClass("Earth",6371.00*2,7)
print(PlanetObject1.Name)
PlanetObject1.Name = 'Mars'
print(PlanetObject1.Name)
print(  "Planet " .. 
        PlanetObject2.Name .. 
        " is my home planet. Its diameter is round about " .. 
        PlanetObject2.Diameter .. "km." .. 
        " Our neighour is " .. 
        PlanetObject1.Name) 
```

**Test2.lua：（**带有“load_assembly”的选项2）

```
require "luanet"
require "CLRPackage"
luanet.load_assembly("Planet")
local PlanetClass = luanet.import_type("Planets.Planet")
print(PlanetClass)
local PlanetObject1 = PlanetClass()
print(PlanetObject1)
local PlanetObject2 = PlanetClass("Earth",6371.00*2,7)
print(PlanetObject1.Name)
PlanetObject1.Name = 'Mars'
print(PlanetObject1.Name)
print(  "Planet " .. 
        PlanetObject2.Name .. 
        " is my home planet. Its diameter is round about " .. 
        PlanetObject2.Diameter .. "km." .. 
        " Our neighour is " .. 
        PlanetObject1.Name) 
```

在这两种情况下，控制台输出都将如下所示：

*ProxyType(Planets.Planet): 18643596*
*构造函数 1*
*Planets.Planet: 33574638*
*构造函数 2*
*无名*
*火星*
*行星地球是我的家乡星球。它的直径约为12742公里。我们的邻居是火星*

我希望它对你们中的一些人有所帮助。

**编辑 1：** 顺便说一下，来自 lua 的方法调用如下所示：

```
PlanetObject1:testMethod()
PlanetObject2:testMethod() 
```

**编辑 2：** 我发现不同的 dll 需要以不同的方式处理。一个需要“import”功能，另一个需要“load_assembly”功能。请记住这一点！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T19:09:09.937

在过去的几天里，我在一个需要 LuaInterface 的确切功能的项目上工作，偶然发现了一段 Lua 代码，结果证明它是完美的解决方案（参见参考资料 1）。在寻找这个解决方案时，我注意到了这个问题，并认为我会投入两分钱。

要应用此解决方案，我只需在初始化 LuaInterface Lua 对象时运行 CLRPackage 代码。但是，require 语句也同样有效。

参考 1 中提供的代码允许使用 import 语句，类似于 C# using 语句。导入程序集后，可在全局命名空间中访问其成员。import 语句消除了使用 load_assembly 或 import_type 的需要（除了需要使用来自不同程序集的同名成员的情况。在这种情况下，import_type 的使用类似于 C# 使用 NewTypeName = Assembly.OldTypeName）。

```
import "LuaTest"
planet = Planet("Earth")
planet:printName() 
```

这个包也适用于枚举！

有关使用此包的更多信息，请参见参考资料 2。

希望这可以帮助！

参考1：[https](https://github.com/stevedonovan/MonoLuaInterface/blob/master/bin/lua/CLRPackage.lua) ://github.com/stevedonovan/MonoLuaInterface/blob/master/bin/lua/CLRPackage.lua 参考2： http: [//penlight.luaforge.net/project-pages/penlight/packages/LuaInterface/](http://penlight.luaforge.net/project-pages/penlight/packages/LuaInterface/)

# c++ - 全球环境照明？

> ID：13450088
> 
> 赞同：2
> 
> 时间：2012-11-19T08:32:52.000
> 
> 标签：c++, opengl

假设我的显示函数不使用 opengl 函数，而是使用 drawpixel 函数逐像素绘制多边形。
我打电话

```
 glLightModelfv(GL_LIGHT_MODEL_AMBIENT, global_ambient);
    glShadeModel(GL_SMOOTH);
    glEnable(GL_LIGHTING); 
```

其中 global_ambient 是 0.0, 0.0, 0.0, 1.0 并且我定义了材料参数，即永远不会调用 glmaterial。全局环境照明是否仍然有效，因为我将无法看到多边形？或者我需要定义材料参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:47:40.487

> 假设我的显示函数不使用 opengl 函数，而是使用 drawpixel 函数逐像素绘制多边形。

如果这是真的，那么照明状态就完全无关紧要了。固定功能的 OpenGL 光照是*per-vertex*。您没有发送顶点；您正在发送像素数据。

# javascript - 试图将分享社交按钮的价值用于操纵目的

> ID：13450091
> 
> 赞同：2
> 
> 时间：2012-11-19T08:33:08.283
> 
> 标签：javascript, jquery, html, iframe, facebook-like

我试图找到一种方法来获取共享社交按钮的价值，请参阅： [http](http://www.1stwebdesigner.com/wordpress/wordpress-plugins-social-sharing/) : //www.1stwebdesigner.com/wordpress/wordpress-plugins-social-sharing/ 按钮位于页面左侧。

现在我想也许可以在文档上使用 JavaScript 来获取特定 span//div 的值。但是它们在 iframe 中，并且似乎不起作用：

这就是我的目的：

```
<iframe id="something_iframe" 
    src="http://www.facebook.com/plugins/like.php?href=http://www.freelancer.com/projects/myskills.php&send=false&layout=button_count&width=100&show_faces=false&action=like&colorscheme=light" 
    scrolling="no" frameborder="0" 
    style="border:none; overflow:hidden; width:100px; height:21px;"
    allowTransparency="true">
</iframe>

<div id="something">
</div>

<script>
    var $j = jQuery.noConflict();
    $j(document).ready(function() {
        $j("#something").text($j(".pluginCountTextDisconnected").text());
    });
</script> 
```

然而，我认为即使这种 JavaScript 方式可以工作，它仍然很混乱，并且在 PHP API 或其他东西中可能有更好的方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T08:39:17.047

这是不可能的，[`same origin policy`](http://en.wikipedia.org/wiki/Same_origin_policy)因为这些跨度加载在 iFrame 中，而 iFrame 是从与您的页面不同的页面加载的。

当同源策略处于活动状态时，您无法操纵 iFrame 的内容或访问它。可能有一些黑客攻击，但我建议您查看 twitter 和 Facebook 的 API，因为它们可能会通过 API 公开点赞/转发计数。

这还有一个好处，即当 Twitter/Facebook 更改其共享按钮时不会中断。这些并不意味着是一个公共接口，因此他们可以随时自由地更改他们的代码。

*更新*：在站点标记上查看更多内容后，您似乎可以访问 Google+ 按钮，因为它位于侧面的 HTML 中，而不是 iFrame 内，但 Facebook 和 Twitter 在您没有的 iFrame 内运行它们的小部件按钮t 有权访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-12T08:26:06.520

我不知道这是否是您可能正在研究的问题，但我想添加这个答案，以防有人碰巧查找类似的问题。

* * *

如果我对问题的理解是正确的，那么您需要一种方法来从社交插件中获取分享/喜欢/任何内容的数量并使用该数字。

在处理类似问题时，我发现了以下插件：[Sharrre](http://sharrre.com)

![在此处输入图像描述](../Images/c3f7d8f201841e40630e3f95ba3bcb3c.png)

它通过使用 PHP 从 PHP 调用一些 API ，以及直接从 Javascript调用一些 API，从而避免了这个`same origin policy`问题。`CURL`它已经为几个最常用的社交网站设置好了，如果你愿意，可以很容易地添加其他网站。

它确实有缺点，您必须手动添加要搜索共享计数的链接，并且在服务器端它有时有点滞后（由于社交网站的响应时间）。此外，随着您使用的社交网站的每次 API 更改，您必须检查它是否仍在正常工作。

* * *

请知道我与插件/站点没有任何隶属关系，我只是使用了该插件，它确实对我有帮助，我希望它也能帮助其他人。

# java - 家谱祖先查找算法

> ID：13450092
> 
> 赞同：4
> 
> 时间：2012-11-19T08:33:10.380
> 
> 标签：java, algorithm

我的方法无法通过单元测试。我徒劳地盯着它看了5个小时。有人可以帮我看看它有什么问题吗？

PS：我下面代码中的 getAllRelations() 方法是将格式化的输入分隔为字符串 ArrayList 的数组列表，例如，如果我有这样的格式化输入（我在无法通过的测试用例中使用它）

```
String format = "John Doe , Mary Smith" + "\n" + "Brian William , John Doe" + "\n" + "Brian William ,Robert Andrew" + "\n" + "Mary Smith , Max Jackson"; 
```

在每一行中，第一个人是第二个人的父母。getAllRelations() 方法会将这些格式化的字符串拆分为数组列表，其中每个列表仅包含每行中的两个名称字符串（名称前后没有空格）作为其元素。例如 arraylist1 将是一个包含“John”和“Mary Smith”的列表。

这是我无法弄清楚出了什么问题的方法，我想用这种方法检查两个人是否共享同一个祖先。

```
private boolean hasSameAncestor(String person1, String person2){
    ArrayList<ArrayList<String>> allRelations = allRelations();
    int i = 0;
    int j = 0;
    String name1 = person1;
    String name2 = person2;
    String parent1;
    String parent2;
    for(i = 0, parent1 = ""; i < allRelations.size(); i++){
        if(name1.equals(allRelations.get(i).get(1))){
            parent1 = allRelations.get(i).get(0);
            for(j = 0, name2 = person2, parent2 = ""; j < allRelations.size(); j++){
                if(name2.equals(allRelations.get(j).get(1))){
                    parent2 = allRelations.get(j).get(0);
                    if(parent2.equals(parent1)){
                        return true;
                    }
                    else{
                        name2 = parent2;
                        j = 0;
                    }
                }
            }
            name1 = parent1;
            i = 0;
        }
    }
    return false;
} 
```

我不能通过的测试用例是这样的。

```
 @Test
    public void testHasSameAncestor()
    FamilyTree familyTree4 = new FamilyTree("John Doe , Mary Smith" + "\n" + "Brian William , John Doe" + "\n" + "Brian William ,Robert Andrew" + "\n" + "Mary Smith , Max Jackson");
    assertEquals(true, format.hasSameAncestor("Max Jackson", "Robert Andrew"));
} 
```

我无法弄清楚我的功能有什么问题，有人可以帮助我吗？非常感谢。

可以粘贴到 Eclipse 以获取调试帮助的代码

```
package test;

import java.util.ArrayList;
import java.util.Arrays;

public class Test1 {

    String test;

    public Test1(String test){
        this.test = test;
    }

    private ArrayList<String> lineRelations(){
        int i;
        ArrayList<String> lineRelations = new ArrayList<String>();
        String[] lines = test.split("\n");
        for(i = 0; i < lines.length; i++){
            lineRelations.add(lines[i]);
        }
        return lineRelations;
    }

    private ArrayList<ArrayList<String>> allRelations(){
        int i;
        ArrayList<ArrayList<String>> allRelations = new ArrayList<ArrayList<String>>();
        ArrayList<String> lineRelations = lineRelations();
        for(i = 0; i < lineRelations.size(); i++){
            ArrayList<String> eachLine = new ArrayList<String>(Arrays.asList(lineRelations.get(i).split("\\s*,\\s*")));
            allRelations.add(eachLine);
        }
        return allRelations;
    }

    public boolean hasSameAncestor(String person1, String person2){
        ArrayList<ArrayList<String>> allRelations = allRelations();
        int i = 0;
        int j = 0;
        String name1 = person1;
        String name2 = person2;
        String parent1;
        String parent2;
        for(i = 0, parent1 = ""; i < allRelations.size(); i++){
            if(name1.equals(allRelations.get(i).get(1))){
                parent1 = allRelations.get(i).get(0);
                for(j = 0, name2 = person2, parent2 = ""; j < allRelations.size(); j++){
                    if(name2.equals(allRelations.get(j).get(1))){
                        parent2 = allRelations.get(j).get(0);
                        if(parent2.equals(parent1)){
                            return true;
                        }
                        else{
                            name2 = parent2;
                            j = 0;
                        }
                    }
                }
                name1 = parent1;
                i = 0;
            }
        }
        return false;
    }
} 
```

测试用例

```
package test;
import static org.junit.Assert.*;
import test.Test1;

import org.junit.Test;

public class Test1Test {

    @Test
    public void testHasSameAncestor(){
        Test1 test1 = new Test1("John Doe , Mary Smith" + "\n" + "Brian William , John Doe" + "\n" + "Brian William ,Robert Andrew" + "\n" + "Mary Smith , Max Jackson");
        assertEquals(true, test1.hasSameAncestor("Max Jackson", "Robert Andrew"));
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T09:33:03.797

首先找到两个人的基本祖先，然后比较它们。

请检查一下 ：）

```
public boolean hasSameAncestor(String person1, String person2) {
        ArrayList<ArrayList<String>> allRelations = allRelations();
        int i = 0;
        String name1 = person1;
        String name2 = person2;
        String parent1;
        String parent2;

        //Find first person's ancestor
        for (i = 0, parent1 = ""; i < allRelations.size(); i++) {
            if (name1.equals(allRelations.get(i).get(1))) {
                parent1 = allRelations.get(i).get(0);
                name1 = parent1;
                i = -1; // because i will increase before start new loop
            }
        }

        //Find second person's ancestor
        for (i = 0, parent2 = ""; i < allRelations.size(); i++) {
            if (name2.equals(allRelations.get(i).get(1))) {
                parent2 = allRelations.get(i).get(0);
                name2 = parent2;
                i = -1;
            }
        }
        System.out.println(parent1);
        System.out.println(parent2);
        if (parent1.equals(parent2)) {
            return true;
        }
        return false;
    } 
```

最好的祝愿。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T09:21:15.627

你的内部循环总是从 1 开始。

在循环中使 i = -1, j = -1 而不是 0 将解决。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T09:23:20.083

“Max Jackson”和“Robert Andrew”有着不同的祖先。“John Doe”和“Robert Andrew”拥有相同的祖先。如下所示替换您的条件并检查

```
assertEquals(false, format.hasSameAncestor("Max Jackson", "Robert Andrew"));
assertEquals(true, format.hasSameAncestor("John Doe", "Robert Andrew")); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-19T08:42:55.440

首先，您使用的数据结构对于这种应用程序来说是可怕的。您应该为您的家谱构建一个实际的数据结构，而不是将所有内容打包成一个字符串，然后将字符串拆分并在双循环中处理它。

在信息学中，树是您要用于此任务的那种结构。一棵树有两种不同的对象：

```
1) A Node, which has two children, that are also Nodes.
2) A Leaf, which has no children. 
```

您可以使用此节点对您的家谱进行建模，然后应用已知的众多树算法之一。（与此类似的问题是[Intersection of 2 binary search trees](https://stackoverflow.com/questions/5728821/intersection-of-2-binary-search-trees)）

更具体地说：模型中的每个人都会有另外两个人被定义为他们的父母。叶子是没有（已知）父母的人。然后，您可以运行计算**两个二叉树交集**的算法。如果交叉点为空，则它们没有共同的祖先。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-19T12:55:42.413

你们的关系是从右到左的，对吧？

所以 Max 与 Mary 相关，而 Mary 与 John 相关。罗伯特只与布莱恩有关。他不在右手边。但是您也想检查另一个方向（？），所以 Brian 也与 John 相关，并且他们都有相同的祖先。但这是非常不寻常的。

使用哈希图和递归搜索检查此解决方案，从左（键）到右（值）的关系：

```
import java.util.ArrayList;
import java.util.Arrays;
import java.util.HashMap;

public class Test {

    private String test;
    private HashMap<String, String> allRelations;
    private ArrayList<String> ancestors;
    public Test(String test){
        this.test = test;
        allRelations = allRelations();
        ancestors= new ArrayList<String>();
    }

    private ArrayList<String> lineRelations(){
        int i;
        ArrayList<String> lineRelations = new ArrayList<String>();
        String[] lines = test.split("\n");
        for(i = 0; i < lines.length; i++){
            lineRelations.add(lines[i]);
        }
        return lineRelations;
    }

    private HashMap<String, String> allRelations(){
        int i;
        HashMap<String, String> allRelations = new HashMap<String, String>();
        ArrayList<String> lineRelations = lineRelations();
        for(i = 0; i < lineRelations.size(); i++){
            allRelations.put(Arrays.asList(lineRelations.get(i).split("\\s*,\\s*")).get(0), Arrays.asList(lineRelations.get(i).split("\\s*,\\s*")).get(1));                      
        }
        return allRelations;
    }

    public boolean hasSameAncestor(String person1, String person2){
        if (allRelations.containsKey(person1)){
            if (ancestors.contains(allRelations.get(person1))){                                             
                if (allRelations.containsKey(person2)){
                    if (ancestors.contains(allRelations.get(person2))){
                        return true;
                    } else if (allRelations.containsKey(allRelations.get(person2))){
                        return hasSameAncestor(person1, allRelations.get(person2));
                    } else {
                        return false;
                    }
                } else {
                    return false;
                }
            } else {
                ancestors.add(allRelations.get(person1));
                if (allRelations.containsKey(allRelations.get(person1))){
                    return hasSameAncestor(allRelations.get(person1), person2);
                } else if (allRelations.containsKey(person2)) {
                    return hasSameAncestor(person1,allRelations.get(person2));
                } else {
                    return false;
                }
            }
        } else {
            return false;
        }       
    }
} 
```

这返回 true

```
Test test1 = new Test("a1 , b1" + "\n" + "b1 , c1" + "\n" + "a2 , b2" + "\n" + "b2 , c1" + "\n" + "a3 , c3");
System.out.println(test1.hasSameAncestor("a1", "a2")); 
```

和错误的

```
System.out.println(test1.hasSameAncestor("a1", "a3")); 
```

问候

# ruby - 如何在 ruby on rails 中从另一个模型中获取一个模型值？

> ID：13450097
> 
> 赞同：0
> 
> 时间：2012-11-19T08:33:27.567
> 
> 标签：ruby, ruby-on-rails-3.2

我的任务是将多个模型集成到一个表单中。我有一个表单“注册”和两个模型`buyer`和`address`。但是通过这样做，我不能将两个表格附加在一起。
`_form.html.erb`是

```
<% @register.buyers.build %>
<%= form_for(@register) do |f| %>
  <% if @register.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@register.errors.count, "error") %> prohibited this register from being saved:</h2>

      <ul>
      <% @register.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :date %><br />
    <%= f.date_select :date %>
  </div>
  <div class="field">
    <h4>Buyer</h4>
    </div>
  <div class="field">
   <%# f.fields_for :buyers do |builder| %>
    <%= render :partial => "buyer_fields", :locals => {:f => f } %>
  <%# end %>
     </div>
 <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

`_buyer_fields.html.erb`是

```
<% f.fields_for :buyers do |buyers_form| %>
<div class="fields">
  <p>
    <%= buyers_form.label :name, "Name" %><br/>
    <%= buyers_form.text_field :name %>
  </p>
  <h4>Address</h4>

  <% f.fields_for :addresses do |builder| %>
     <%= render :partial => 'address_fields', :locals => { :f => builder} %>

  <% end %>

</div>
<% end%> 
```

而且`_address_fields.html.erb`是

```
<p class="fields">
<table>

     <tr>
        <td>
             <%= f.text_area :name, :rows => "2",:cols => "20" %>
        </td>

    </tr>
</table>
</p> 
```

`register`模型是

```
class Register < ActiveRecord::Base
  attr_accessible :date, :book_ids,:buyers_attributes
   has_many :authorships
  has_many :books, :through => :authorships
  has_many :buyers
  #accepts_nested_attributes_for :buyers, :reject_if => lambda { |a| a[:name].blank? }, :allow_destroy => true
  accepts_nested_attributes_for :buyers, :allow_destroy => :true,
    :reject_if => proc { |attrs| attrs.all? { |k, v| v.blank? } }
end 
```

`buyer`模型是

```
class Buyer < ActiveRecord::Base
  belongs_to :register
  attr_accessible :addresses_attributes, :name
  has_many :addresses, :dependent => :destroy
  accepts_nested_attributes_for :addresses, :reject_if => lambda { |a| a[:name].blank? }, :allow_destroy => true
end 
```

模型`address`是

```
 attr_accessible :name
   belongs_to :buyer 
```

但只显示注册表。如何在 ruby​​ on rails 3.2.9 中以单一形式集成两个模型？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T09:37:10.067

您的嵌套地址视图是错误的。进行一些更改`buyer_fields.html.erb`

```
<%= f.fields_for :buyers do |buyers_form| %>
<div class="fields">
  <p>
    <%= buyers_form.label :name, "Name" %><br/>
    <%= buyers_form.text_field :name %>

  </p>
  <h4>Address</h4>

  <%= buyers_form.fields_for :addresses do |builder| %>
     <%= render :partial => 'address_fields', :locals => { :f => builder} %>   
  <% end %>

</div>
<% end %> 
```

# ios - 捆绑标识符和配置文件之间有什么关系？

> ID：13450108
> 
> 赞同：2
> 
> 时间：2012-11-19T08:34:49.907
> 
> 标签：ios, xcode

我正在开发我的第一个 iOS 项目。我在 Xcode 中创建了我的应用程序，它在 iPad 模拟器中运行良好。然后我购买了一台 iPad 并注册并支付了 99 美元/年的开发计划。我认为在我的新 iPad 上试用该应用程序不会太难！错误的！

我现在已经完成了配置门户流程并生成/下载了所有证书和配置文件。XCode 已接受我的 iPad 的配置文件。但是当我为 iPad 目标构建项目时，构建失败，因为；“找不到与应用程序标识符‘com.triplehappy.publish’匹配的有效配置文件”。

在获得配置文件之前，我将 com.triplehappy.publish 分配为我的 Bundle Identifier。什么是捆绑标识符以及如何将其链接到我的配置文件？

编辑：原来我的包标识符和配置文件是兼容的；我有一个不同的问题（见 San 的回答和评论）。作为记录，像 com.triplehappy.publish 这样的简单捆绑标识符与 QWERTYABC4 形式的简单配置文件应用程序 ID 兼容。* 我还没有处理更复杂的多产品/多开发人员/应用商店就绪场景.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T08:45:02.110

您的配置文件也有捆绑标识符。因此，您的应用程序应该具有与您正在使用的配置相同的捆绑标识符。您可以使用开发人员配置文件直接在您的设备上运行任何应用程序。

有关更多详细信息，请查看苹果的文档。

[https://developer.apple.com/legacy/library/technotes/tn2250/_index.html#//apple_ref/doc/uid/DTS40009933](https://developer.apple.com/legacy/library/technotes/tn2250/_index.html#//apple_ref/doc/uid/DTS40009933)

# php - 处理语法错误，PHP 中的意外 T_IF

> ID：13450116
> 
> 赞同：-2
> 
> 时间：2012-11-19T08:35:23.663
> 
> 标签：php, xml

我需要在所有节点上的 XML 文件中创建字符串搜索。

---目录.xml---

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<Catalog>
<Category>
<Name>Biscuit</Name>
<Location>
   <Id>Butter</Id>
   <Description>The butter biscuit cost $10 per pack</Description>
  </Location>
  <Location>
   <Id>Chocolate</Id>
   <Description>The chocolate biscuit cost $20 per pack</Description>
  </Location>
 </Category>
 <Category>
  <Name>Cake</Name>
  <Location>
   <Id>Cup</Id>
   <Description>This is a cup cake</Description>
  </Location>
  <Location>
   <Id>Slice</Id>
   <Description>This is a slice cake</Description>
  </Location>
 </Category>
</Catalog> 
```

---search.php---

```
<?php
$catalog = simplexml_load_file("catalog.xml");
$category = $catalog->Category;
$location = $category->Location;

foreach($location->Description as $desc)
{
 $string = string($desc);
 $find = 'chocolate';

 $result = strpos($string, $find)

 if ($result !== false)
 {
  echo $result;
 }
 else
 {
  echo "No Result";
 }
}
?> 
```

* * *

我收到的错误是：

`Parse error: syntax error, unexpected T_IF on line 14`

由于节点和节点都有“巧克力”，我需要显示两个节点结果。

----新修订守则 / 2012 年 11 月 20 日---

```
<?php

$catalog = simplexml_load_file("catalog.xml");

$find = "chocolate";

$lcFind = strtolower($find);
$ll = implode('', range('a', 'z'));
$ul = strtoupper($ll);
$xpath_result = $catalog->xpath("//*[contains(translate(text(), '$ul','$ll'),'$lcFind')]");

if ($xpath_result) {
foreach ($xpath_result as $res)  {

$category = $catalog->Category;
$name = $category->Name;
$loc = $category->Location;
$id = $loc->Id;

echo "Category: ", $name, "<br />";
echo "ID: ", $id, "<br />";
echo "Description :", $res, "<br />";
}
}
else {
echo "No matching descriptions found for word '<i>$find</i>'<br />";
}
?> 
```

结果（错误）：

类别：饼干 ID：黄油 //这应该是“巧克力” 描述：巧克力 //这应该是“巧克力”的描述 类别：饼干 ID：黄油 描述：巧克力饼干每包 20 美元

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T08:38:07.890

它应该是...

```
$result = strpos($string, $find); 
```

你应该在 PHP 中用分号结束你的语句。使用带有 PHP 语法检查的 IDE（甚至是文本编辑器）可能是一个不错的主意。

...然而问题只是开始（我不是在谈论`string`这里不存在的功能）。看，使用此代码，您试图仅在第一个*类别的**第一个*位置的描述中搜索某些术语。如果这实际上是任务，好吧，但不知何故，我觉得你的初衷用这个更好地表达：

 *```
$found = false;
foreach ($catalog->Category as $category) {
  foreach($category->Location as $location) {
    $description = "{$location->Description}";
    $result = strpos($description, $find);
    if ($result !== FALSE) {
      echo "Word '<i>$find</i>' found in <b>$description</b> at position " . ($result + 1) . '.<br />';
      $found = true;
    }
  }
}
if (! $found) {
  echo "No matching descriptions found for word '<i>$find</i>'<br />";
} 
```

甚至可以使用 XPath 优化这一点 - 特别是如果您实际上不需要回显该位置：

```
$xpath_result = $catalog->xpath("//Description[contains(text(),'$find')]");
if ($xpath_result) {
  foreach ($xpath_result as $res)  {
    echo "Word '<i>$find</i>' found in <b>$res</b><br />";
  }
}
else {
  echo "No matching descriptions found for word '<i>$find</i>'<br />";
} 
```

...或者，对于不区分大小写的搜索：

```
$lcFind = strtolower($find);
$ll = implode('', range('a', 'z'));
$ul = strtoupper($ll);
$xpath_result = $catalog->xpath("//*[contains(translate(text(), '$ul', '$ll'),'$lcFind')]");
... // the rest of code is the same 
```*

# c# - XML（反）序列化无效字符串在c#中不一致？

> ID：13450117
> 
> 赞同：14
> 
> 时间：2012-11-19T08:35:26.927
> 
> 标签：c#, xml-serialization, xmlserializer, illegal-characters

在 C#（.net 4.0 和 4.5 / vs2010 和 vs12）中，当我使用 XMLSerializer 序列化包含具有非法字符的字符串的对象时，不会引发错误。但是，当我反序列化该结果时，会引发“无效字符”错误。

```
 // add to XML
        Items items = new Items();
        items.Item = "\v hello world"; // contains "illegal" character \v

        // variables
        System.Xml.Serialization.XmlSerializer serializer = new System.Xml.Serialization.XmlSerializer(typeof(Items));
        string tmpFile = Path.GetTempFileName();

        // serialize
        using (FileStream tmpFileStream = new FileStream(tmpFile, FileMode.Open, FileAccess.ReadWrite))
        {
            serializer.Serialize(tmpFileStream, items);
        }
        Console.WriteLine("Success! XML serialized in file " + tmpFile);

        // deserialize
        Items result = null;
        using (FileStream plainTextFile = new FileStream(tmpFile, FileMode.Open, FileAccess.Read))
        {
            result = (Items)serializer.Deserialize(plainTextFile); //FAILS here
        }

        Console.WriteLine(result.Item); 
```

“Items”只是一个由 xsd /c Items.xsd 自动生成的小类。Items.xsd 只不过是一个包含一个子元素（Item）的根元素（Items）：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified" attributeFormDefault="unqualified">
    <xs:element name="Items">
        <xs:complexType>
            <xs:sequence>
                <xs:element name="Item" type="xs:string" />
            </xs:sequence>
        </xs:complexType>
    </xs:element>
</xs:schema> 
```

反序列化过程中抛出的错误是

> 未处理的异常：System.InvalidOperationException：XML 文档中存在错误 (3, 12)。---> System.Xml.XmlException: '♂'，十六进制值 0x0B，是无效字符。第 3 行，位置 12。

序列化的 XML 文件在第 3 行包含以下内容：

```
<Item>&#xB; hello world</Item> 
```

我知道 \v -> & # xB; 是一个非法字符，但是为什么 XMLSerialize 允许它被序列化（没有错误）？我发现 .NET 不一致，它允许我毫无问题地序列化某些东西，只是发现我无法反序列化它。

是否有解决方案，以便 XMLSerializer 在序列化之前自动删除非法字符，或者我可以指示反序列化忽略非法字符吗？

目前我确实通过将文件内容作为字符串读取来解决它，“手动”替换非法字符然后反序列化它......但我发现这是一个丑陋的黑客/解决方法。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-19T09:29:23.123

## **1.**

您可以设置`XmlWriterSettings`'`CheckCharacters`属性以避免写入非法字符。（`Serialize`方法会抛出异常）

```
using (FileStream tmpFileStream = new FileStream(tmpFile, FileMode.OpenOrCreate, FileAccess.ReadWrite))
{
    var writer = XmlWriter.Create(tmpFileStream, new XmlWriterSettings() { CheckCharacters = true});
    serializer.Serialize(writer, items);
} 
```

## **2.**

您可以创建自己的 XmlTextWriter 以在序列化时过滤掉不需要的字符

```
using (FileStream tmpFileStream = new FileStream(tmpFile, FileMode.OpenOrCreate, FileAccess.ReadWrite))
{
    var writer = new MyXmlWriter(tmpFileStream);
    serializer.Serialize(writer, items);
}

public class MyXmlWriter : XmlTextWriter
{
    public MyXmlWriter(Stream s) : base(s, Encoding.UTF8)
    {
    }

    public override void WriteString(string text)
    {
        string newText = String.Join("", text.Where(c => !char.IsControl(c)));
        base.WriteString(newText);
    }
} 
```

## **3.**

通过创建自己的 XmlTextReader，您可以在反序列化时过滤掉不需要的字符

```
using (FileStream plainTextFile = new FileStream(tmpFile, FileMode.Open, FileAccess.Read))
{
    var reader = new MyXmlReader(plainTextFile);
    result = (SomeObject)serializer.Deserialize(reader); 
}

public class MyXmlReader : XmlTextReader
{
    public MyXmlReader(Stream s) : base(s)
    {
    }

    public override string ReadString()
    {
        string text =  base.ReadString();
        string newText = String.Join("", text.Where(c => !char.IsControl(c)));
        return newText;
    }
} 
```

## **4.**

您可以将`XmlReaderSettings`'`CheckCharacters`属性设置为 false。反序列化现在可以顺利进行。（你会`\v`回来的。）

```
using (FileStream plainTextFile = new FileStream(tmpFile, FileMode.Open, FileAccess.Read))
{
    var reader = XmlReader.Create(plainTextFile, new XmlReaderSettings() { CheckCharacters = false });
    result = (SomeObject)serializer.Deserialize(reader); 
} 
```

# php - cookie 在 php codeigniter 中没有正确设置？

> ID：13450118
> 
> 赞同：0
> 
> 时间：2012-11-19T08:35:29.983
> 
> 标签：php, codeigniter, cookies

我在 codeigniter 中仅基于 cookie 创建了基本登录设置。像这样

```
class Display extends CI_Controller {
public function Display() {
    parent::__construct();
}
public function index() {
    //var_dump($_COOKIE);
    if (isset($_COOKIE["user"])){
        redirect('home')
    }else{
        redirect('display/login');
    }

}
public function login() {
    //var_dump($_COOKIE);
    if (isset($_COOKIE["user"])){
        $this->load->view('home');
    }else{
        $username = $this->input->post('username');
                    //some validation
        setcookie("user",$username,time()+60*60*24*30);
        redirect('home');
    }
} 
```

}

在家庭控制器中，我检查 cookie 以访问页面

```
class Home extends CI_Controller {
public function Home() {
    parent::__construct();
    //var_dump(get_cookie("user"));exit;
     if (isset($_COOKIE["user"]) == false){
     redirect('display/login');
    }
} 
```

}

我在这里面临的问题是我无法在类的构造函数中获取 cookie。在访问类中的任何函数之前，我需要检查类中的 cookie。什么是正确的方法？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T08:41:20.707

您没有分配[`path`](http://php.net/manual/en/function.setcookie.php)cookie 的参数，因此它会获取它分配给它的页面的路径和结果是`/login`或类似的东西，它不会被发送到您的页面的其他部分，如`/home`，或只是根。`setcookie()`将like更改为如下所示：

```
setcookie("user",$username,time()+60*60*24*30, '/'); // notice the added path at the end 
```

此外，任何人都可以在他们的客户端中设置 cookie，只转发他们的存在，因为身份验证根本不安全，任何人都可以更改他们的`user`cookie 保存的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T08:36:58.150

你可能最好使用 CodeIgniter 自己的实现（Cookie_Helper）：[http ://ellislab.com/codeigniter/user_guide/helpers/cookie_helper.html](http://ellislab.com/codeigniter/user_guide/helpers/cookie_helper.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T08:41:22.597

查看[CodeIgniter 用户指南 2.2.0 版：输入类](http://ellislab.com/codeigniter/user_guide/libraries/input.html)。

用于`$this->input->set_cookie()`设置cookie和`$this->input->cookie()`获取cookie

# c++ - GetUserNameExA 函数无法在系统启动时（GINA）提供用户详细信息？

> ID：13450125
> 
> 赞同：1
> 
> 时间：2012-11-19T08:36:11.460
> 
> 标签：c++, windows, winapi, dns, active-directory

我正在使用 c++ win32 API。

我尝试使用 GetUserNameExA(); 获取用户详细信息；

我已将此功能用于系统登录对话框源（GINA）。在我的日志文件中，它给出了

`CN=ComputerName,CN=Computers,DC=JEGAN,DC=COM"`.

但它是在登录系统后使用的，当时它会像`"CN=sanju,CN=USERS,DC=JEGAN,DC=COM"`我的其他解决方案一样提供用户详细信息。

我只想要用户详细信息，但它在登录时提供系统详细信息，我如何在登录时获取用户详细信息？

**注意：**我已经尝试过**ADSI、LDAP**功能和**目录**服务无法使用。所以建议任何其他系统功能。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T19:27:09.960

David 是正确的 - GINA DLL 是由 WinLogon.exe 进程加载的。检查任务管理器，您会看到 WinLogon.exe 作为本地系统运行。`GetUserName`和`GetUserNameEx`函数提供有关*当前线程身份的*信息：

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms724435.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724435.aspx)

从 20,000 英尺的角度来看，在验证用户凭据后，GINA 会通知所有网络提供商登录成功。在此之后，它会加载用户的配置文件并创建用户的外壳 (Explorer.exe)，然后显示该外壳。

您可以尝试改用网络提供商。它们通过 Windows 8 得到完全支持，并且可以为系统定义多个 NP，因此您不会遇到 GINA 所具有的“链接”问题。

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa378775.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa378775.aspx)

该`NPLogonNotify`函数将接收用户的明文名称、域和密码（有时您会收到一个 UPN 作为用户名，在这种情况下域为空）。您可以按原样使用此信息，对 AD 执行基于 LDAP 的查找或在调用之前使用`LogonUser`& 。由于网络提供商在 WinLogon.exe 进程中作为本地系统运行，因此对最后一种方法要格外小心。 **始终**调用并撤消/清理以前的调用。`ImpersonateLoggedOnUser``GetUserNameEx`**`RevertToSelf``CloseHandle`**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T19:36:13.703

您尝试做的唯一（非常古怪的）解决方法是登录可以访问域的其他用户帐户，从而可以查询用户详细信息（虽然不记得详细所需的权限） . 否则，我建议您使用 Gregg 的答案。

[使用模拟](http://msdn.microsoft.com/en-us/library/windows/desktop/aa376391.aspx)为此类用户的线程，您应该能够通过和朋友查询您将要登录的用户的信息（到那时您怎么知道？）[`NetUserGetInfo()`](http://msdn.microsoft.com/en-us/library/bb706729.aspx)。选择`USER_INFO_*` `struct`最适合您需求的，只需向域服务器询问信息即可。这也应该适用于早期和后期的系统（功能，而不是 GINA 本身）。**

# android - 将 ListView 的高度限制为 3 个 ListItems，然后允许滚动

> ID：13450129
> 
> 赞同：2
> 
> 时间：2012-11-19T08:36:16.407
> 
> 标签：android, listview, android-listview

我想限制 ListView 的高度，当 ListView 有超过 3 个 ListItem 时，ListView 高度不会增加但允许滚动。

这意味着如果列表中包含超过 3 个项目，则 ListView 开始滚动。listview 的最大高度是 3 行的高度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T08:54:33.367

如果您知道每个 ListView 项目的高度（在此示例中，假设为 48dp），您可以轻松地将 ListView 定义为

```
<ListView
    android:layout_width="match_parent"
    android:layout_height="144dp" /> 
```

列表视图的默认行为是添加项目，并且只有在超出其范围时才启用滚动。

硬编码 ListView 的高度并不是很理想。ListViews 是占用布局中剩余屏幕空间的理想选择，因为它们通常用于显示大量信息。

# installation - 每当打开应用程序时，Windows Installer 就会不断弹出

> ID：13450130
> 
> 赞同：0
> 
> 时间：2012-11-19T08:36:21.520
> 
> 标签：installation, installshield

我们的软件正在 Windows 2008 机器上安装，但是当用户尝试运行该应用程序时，安装程​​序会再次弹出，然后再次安装。

**这是发生了什么：**

网络管理员授予用户管理员权限，然后在用户的机器上安装软件。然后网络管理员取消用户的管理员权限，但授予他对运行程序所需的所有文件夹的权限。

现在，当用户尝试运行应用程序时，安装程​​序会再次出现并安装，然后软件就会打开。

我们怀疑这是用户机器上的权限问题......但不知何故无法让它工作。

关于如何解决这个问题的任何想法......

# git - 如何在 codebasehq 上正确地将一个 git 存储库推送到另一个上？

> ID：13450131
> 
> 赞同：1
> 
> 时间：2012-11-19T08:36:32.960
> 
> 标签：git, git-rebase, git-push

我需要知道在 codebasehq.com 上将 git 历史从一个存储库移动到另一个存储库的正确方法。情况：

*   在 codebasehq.com 上有一个 repo，我在路径上将其称为“旧”`mycompany.codebasehq.com/projects/OLDNAME/repositories/PROJECTNAME`
*   在旧仓库进行一些开发后，团队意识到这个仓库实际上应该位于 codebasehq.com 上的不同位置，并且只使用“旧”仓库中的文件进行“新”仓库并将其推送到`mycompany.codebasehq.com/projects/NEWNAME/repositories/PROJECTNAME`. 因此，新的仓库现在只有一个（初始）提交，其中包含旧仓库中的所有文件，但根本没有旧历史记录。

我想将历史从旧仓库带回新仓库。我在这里阅读了关于变基和移植的内容：[如何将一个 Git 存储库变基到另一个 Git 存储库？](https://stackoverflow.com/questions/2428137/how-to-rebase-one-git-repository-onto-another-one)我能够成功地将两个存储库移植到一个存储库中。

我需要知道的是如何通过包含所有旧历史的 rebase/grafted repo 将这个新的 repo 替换为 1 个初始提交。我应该删除这个错误的新仓库并从头开始重新创建它，还是只是向它推送一些特殊的标志？

**UPD：**我尝试将具有完整历史记录（旧+新）的分支推送到`mycompany.codebasehq.com/projects/NEWNAME/repositories/PROJECTNAME`名为新分支`fullhistory`但出现错误：

```
bash-3.2$ git push codebasehq fullhistory
Counting objects: 104, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (74/74), done.
Writing objects: 100% (74/74), 1.74 MiB, done.
Total 74 (delta 36), reused 5 (delta 0)
fatal: unresolved deltas left after unpacking
error: unpack failed: unpack-objects abnormal exit
To git@codebasehq.com:mycompany/project/repo.git
 ! [remote rejected] fullhistory -> fullhistory (n/a (unpacker error))
error: failed to push some refs to 'git@codebasehq.com:mycompany/project/repo.git' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:14:02.230

您可以尝试以下方法：

*   `git clone OLDREPO`
*   `git remote add new NEWREPO`
*   `git fetch new`

你的旧历史现在应该在，`master`而你的新历史在`new/master`

*   `git checkout new/master`
*   `git rebase -i master`

这将启动一个交互式 rebase，将所有内容`new/master`从`master`. 由于您可能想从新代码中删除第一个提交（当时是工作的简单副本），您应该删除将显示给您的编辑器中的相应行。其余的应设置为`pick`.

# android - 如何从任何地方而不是从头开始搜索栏的进度

> ID：13450139
> 
> 赞同：1
> 
> 时间：2012-11-19T08:37:02.067
> 
> 标签：android, android-layout, android-widget

我正在尝试创建一个带有视频剪辑功能的 android 应用程序。为此，我需要创建一个搜索栏，当用户单击“开始切割”按钮时，该搜索栏的进度必须从该位置开始。当用户点击“停止切割”时，搜索栏必须在该点停止，并且开始到结束之间的持续时间必须以不同的颜色显示。请帮我..

我希望它看起来像下图：

![](../Images/84446d47a69df1cf09afb5f98110341e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T08:58:11.940

我认为使用双拇指搜索栏太好了。试试 [https://code.google.com/p/range-seek-bar/](https://code.google.com/p/range-seek-bar/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T08:40:48.907

由于`SeekBar`是 的子类，`ProgressBar`您可以尝试`setProgress()` [http://developer.android.com/reference/android/widget/ProgressBar.html#setProgress(int](http://developer.android.com/reference/android/widget/ProgressBar.html#setProgress(int) ) 方法来启动`SeekBar`.

还有一个可显示在进度条上的辅助进度，这对于显示中间进度很有用，例如流式播放进度条期间的缓冲区级别。

[http://developer.android.com/reference/android/widget/ProgressBar.html#setSecondaryProgress(int](http://developer.android.com/reference/android/widget/ProgressBar.html#setSecondaryProgress(int) )

请查看是否可以将其用于您的用例...

# ruby - Ruby Signal.trap 退出（-1）

> ID：13450142
> 
> 赞同：0
> 
> 时间：2012-11-19T08:37:12.947
> 
> 标签：ruby, unit-testing, command-line

我正在尝试对一个命令行工具进行单元测试，该工具使用`trollop`. 它发出的调用之一`trollop`是`Trollop::die "my message"`，它在下面调用`exit(-1)` Now，这使我的单元测试失败，因为这会杀死 rake - 我尝试使用`Signal.trap`它来捕获信号，但它似乎没有任何效果。有谁知道如何捕获这种退出代码？

# android - 使用ZXing摄像头解码混淆

> ID：13450146
> 
> 赞同：1
> 
> 时间：2012-11-19T08:37:25.823
> 
> 标签：android

我上网查了一下，看到用ZXing解二维码。但是代码我看不懂。

```
PlanarYUVLuminanceSource source = new PlanarYUVLuminanceSource( data, width, height, dstLeft, dstTop, dstWidth,dstHeight, false); 
```

参数的含义是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T10:14:52.620

I went to read the [ZXing source code](http://code.google.com/p/zxing/source/browse/trunk/android/src/com/google/zxing/client/android/PlanarYUVLuminanceSource.java?r=1121) and I found the following (There was no constructor with boolean parameter in the end)

```
PlanarYUVLuminanceSource(byte[] yuvData, int dataWidth, int dataHeight, int left, 
   int top, int width, int height) 
{
   super(width, height);

   if (left + width > dataWidth || top + height > dataHeight) 
   {
      throw new IllegalArgumentException("Crop rectangle does not fit within image data.");
   }

   this.yuvData = yuvData;
   this.dataWidth = dataWidth;
   this.dataHeight = dataHeight;
   this.left = left;
   this.top = top;
} 
```

When I read the code I understand the following (I have an assumption that the relevant data consider only as the area of the inner rectangle of where the QR code should be placed in the image).
**byte[] yuvData** - The byte array that contain the data of the image. All the data the one inside the rectangle and outside of it.
**int dataWidth** - The width of the data. The width of the data all the area outside and inside the rectangle.
**int dataHeight** - The Height of the data. The height of the data all the area outside and inside the rectangle.
**int left** - The left border of the rectangle. Or, how many pixels are outside of the rectangle from the left.
**int top** - The top border of the rectangle. Or, how many pixels are outside of the rectangle from the top.
**int width** - The width of the inner rectangle.
**int height** - The height of the inner rectangle.

# jquery - jQuery 为带有定义变量的 jQuery 数据中的 input[type ="text"] 取值

> ID：13450149
> 
> 赞同：1
> 
> 时间：2012-11-19T08:37:30.340
> 
> 标签：jquery, jquery-selectors

我有这样的标记。现在在这里您可以看到每个按钮都有相同的类名为按钮。

```
 <div class="cart">
    <input type="text" name="quantity" size="2" value="12" />
    <input type="hidden" name="product_id" size="2" value="42" />
    &nbsp;<input type="button" value="add to cart" class="button-cart" class="button" />
  </div>

  <div class="cart">
    <input type="text" name="quantity" size="2" value="132" />
    <input type="hidden" name="product_id" size="2" value="42" />
    &nbsp;<input type="button" value="add to cart" class="button-cart" class="button" />
  </div>

  <div class="cart">
    <input type="text" name="quantity" size="2" value="135" />
    <input type="hidden" name="product_id" size="2" value="42" />
    &nbsp;<input type="button" value="add to cart" class="button-cart" class="button" />
  </div> 
```

这是我的 jQuery 脚本

```
 jQuery('.button-cart').each(function() {
  jQuery(this).live('click',function() {
    console.log(jQuery(this));
    var s= jQuery(this).siblings('input[type="text"]');
    console.log(s);
    $.ajax({
        url: 'index.php?route=checkout/cart/add',
        type: 'post',
        data: $('.product-info input[type=\'text\'],.product-info input[type=\'hidden\'], .product-info input[type=\'radio\']:checked, .product-info input[type=\'checkbox\']:checked, .product-info select, .product-info textarea'),
        dataType: 'json',
        success: function(json) {
            $('.success, .warning, .attention, information, .error').remove();

            if (json['error']) {
                if (json['error']['option']) {
                    for (i in json['error']['option']) {
                        $('#option-' + i).after('<span class="error">' + json['error']['option'][i] + '</span>');
                    }
                }
            } 

            if (json['success']) {
                $('#notification').html('<div class="success" style="display: none;">' + json['success'] + '<img src="catalog/view/theme/default/image/close.png" alt="" class="close" /></div>');

                //$('.success').fadeIn('slow');

                $('#cart-total').html(json['total']);

                $('html, body').animate({ scrollTop: 0 }, 'slow'); 
                setTimeout(opencartpage(),1000);
            }   
        }
    });  
  });
}) 
```

现在在这里您可以看到`jQuery data .product-info input[type=\'text\']`已定义。在那个地方，它正在获取所有`input type text data`. 以同样的方式，我想定义 `jQuery(this).siblings('input[type="text"]')`哪个将获取当时仅选定按钮的输入值，为此我`this`在 ajax 数据中的类购物车中使用。所以有人可以告诉我该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-02T06:33:16.533

我认为您对“添加到购物车”按钮功能有疑问。该问题可以通过以下方式轻松解决。

[单击此处获取解决方案。](https://stackoverflow.com/questions/19156468/opencart-when-adding-to-cart-the-item-returns-error-even-though-options-are-sele)

# c++ - 特定示例的最大值（Collat z 函数）

> ID：13450151
> 
> 赞同：0
> 
> 时间：2012-11-19T08:37:42.883
> 
> 标签：c++, math

在这里的一些人的帮助下，我设法在 Collat​​z 函数中找到了初始值 1 到 1000 范围内的停止值。[Collat​​z 函数](https://stackoverflow.com/questions/13440381/collatz-function) （我的错误是通过在 for 循环中使用新变量 say s 而不是 c 然后让 c=s 来排序的）。

我现在正在尝试生成代码来跟踪这些初始值（1 到 1000）的最大停止值（计数），然后在最后输出。如果他们知道如何做到这一点，谁能给我一些指示？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T09:14:34.427

在第一次运行循环之前定义最大值为零。然后检查您的停止值是否大于当前最大值：如果是，则将当前最大值设置为当前停止。每次找到停止值时重复此操作。

```
#include <iostream>
using namespace std;

int main()
{
long max = 0;
for(long c=2, c<=1000; c++) // define stopping value as 0 for c=1 elsewhere
{
long count=0;

while (c!=1)
{
    if((c%2)==0)
    {
        c/=2;
    }
    else
    {
        c=3*c+1;

    }

    count ++;
}

if ( count > max ) max = count;
cout << "The stopping value for " << c << " is " << count << endl;

}

cout << "The max stopping value is " << max << endl;
return 0;
} 
```

# erlang - 如何在 Erlang/OTP 中实现临时工

> ID：13450152
> 
> 赞同：0
> 
> 时间：2012-11-19T08:37:46.123
> 
> 标签：erlang, erlang-otp, worker

什么是实现流程的最常规方式，它只应该完成它的工作并退出？

就我而言，这些工人由`simple_one_for_one`主管监督。我四处寻找，但没有找到比这更好的东西`spawn_link`：

```
work(Args) ->
{ok, spawn_link(fun() ->
    ... do_the_necessary_work ...
end)}. 
```

然而，这种方式似乎不是好的 OTP 设计。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T08:53:16.423

这实际上是一种不错的方式，只需确保您使用`proc_lib:spawn_link(...)`而不是`erlang:spawn_link(...)`（存储祖先以进行监督树遍历，以及更详细的错误日志）。

而且，当然，您可能希望将所有工作人员的重启策略设置为`temporary`或`transient`，这取决于您在工作人员失败时要做什么（重新启动工作人员并尝试再次执行该工作或丢弃该工作以防万一任何故障）。

# python - 装饰器是做什么用的？

> ID：13450155
> 
> 赞同：0
> 
> 时间：2012-11-19T08:38:02.120
> 
> 标签：python, decorator

> **可能的重复：**
> [理解 Python 装饰器](https://stackoverflow.com/questions/739654/understanding-python-decorators)

网上很多文档都关注装饰器的语法。但我想知道装饰器在哪里以及如何使用？装饰器只是用来在装饰函数之前和之后执行额外的代码吗？或者也许还有其他用途？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T08:54:11.823

装饰器语法很强大：

```
@decorator
def foo(...):
    ... 
```

相当于

```
def foo(...):
    ...
foo = decorator(foo) 
```

* * *

这意味着装饰器*基本上可以做任何事情*——它们不必与被装饰的函数有任何关系！示例包括：

*   记忆递归函数 ( `functools.lru_cache`)
*   记录对函数的所有调用
*   实现描述符功能 ( `property`)
*   将方法标记为静态 ( `staticmethod`)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T09:29:50.647

一个很好的实际示例来自 Python 自己的[unittest 框架](http://docs.python.org/2/library/unittest.html#skipping-tests-and-expected-failures)，它利用装饰器来跳过测试和预期的失败：

> 跳过测试只需使用 skip() 装饰器或其条件变体之一。
> 
> 基本跳过如下所示：

```
class MyTestCase(unittest.TestCase):

    @unittest.skip("demonstrating skipping")
    def test_nothing(self):
        self.fail("shouldn't happen")

    @unittest.skipIf(mylib.__version__ < (1, 3),
                     "not supported in this library version")
    def test_format(self):
        # Tests that work for only a certain version of the library.
        pass

    @unittest.skipUnless(sys.platform.startswith("win"), "requires Windows")
    def test_windows_support(self):
        # windows specific testing code
        pass 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T09:30:12.413

装饰器包装了一个方法甚至整个类，并提供了操作例如方法调用的能力。我经常使用@Singleton 装饰器来创建单例。

装饰器是非常强大且非常酷的概念。

看这本书来理解它们：[http ://amzn.com/B006ZHJSIM](http://amzn.com/B006ZHJSIM)

# asp.net - 无法将 NULL 值插入主键列错误

> ID：13450156
> 
> 赞同：0
> 
> 时间：2012-11-19T08:38:05.213
> 
> 标签：asp.net, sql, database, insert

我们开发了一个 ASP.NET 应用程序，并且笔测试报告了以下错误

> 在应用程序中观察到错误处理不当。应用程序在 SQL 查询执行期间泄露了数据库详细信息，例如表名和列名。当参数“txtCity”留空并提交表单时，就会发现此漏洞。

数据库详细信息在以下错误中披露：

> 无法将值 NULL 插入列“column_name”、表“table_name”；列不允许空值。插入失败。该语句已终止。”

sql 语句作为存储过程执行。我们无法在网页上复制错误，但我们尝试提交表单。请帮助我们解决问题。您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T08:53:33.443

渗透测试人员只会查看您的表单是如何提交的，然后手动重新提交，而忽略您在前端进行的任何验证。

这可以通过多种方式完成。例如，使用[Burp](http://portswigger.net/burp/) Proxy 之类的东西监控浏览器和您的站点之间的请求，甚至在浏览器的开发人员工具中进行简单检查，将显示您的表单提交端点在哪里、它采用的参数和使用的提交方法。然后攻击者可以使用他们拥有的任何工具将他们想要的任何数据发送到您的表单端点。

关键是可以很容易地绕过网页提供的*所有*前端安全性，以便将任何参数值发送到表单提交页面。所以你必须考虑你的后端安全。不要依赖网页前端代码中的“安全性”；前端验证代码只是为合法用户提供帮助。

您可以通过停止向前端显示 SQL 错误来解决您的一般情况，或者在这种特殊情况下，您可以在服务器代码中确保所有表单参数都有效，然后再尝试根据这些参数在数据库上执行 SQL 查询.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T08:50:37.667

Web 配置文件的用户自定义错误如下

```
 <system.web>
    <customErrors mode="Off">
        <error statusCode="404" redirect="Templates/PageNotFound.html" />
         ...
         ...
    </customErrors>
 <system.web> 
```

然后不会有任何自定义错误不会显示。您还可以使用 Gloabal 文件来跟踪您的应用程序中发生的错误。

```
void Application_Error(object sender, EventArgs e)
{
} 
```

在从 java-script 以及您的代码隐藏输入**txtCity**之前验证文本框。
原因可能是测试团队**禁用了 java-script 。**因此，您的 java 脚本验证不起作用。
因此，请验证您正在使用的 C# 或 vb 中的文本。

# jakarta-ee - 我在方法执行之前抛出了一个 AccessDeniedException，但是得到了一个 EJBException

> ID：13450159
> 
> 赞同：1
> 
> 时间：2012-11-19T08:38:16.660
> 
> 标签：jakarta-ee, ejb, aspectj

我使用 AspectJ 在 EJB 环境中执行方法之前进行访问检查，因此我在使用环绕建议的方法之前拦截控制流（我知道也有 EJB 拦截器）。如果访问检查失败，我将抛出 AccessDeniedException。不幸的是，我得到的是一个 EJBException，原因是“AccessDeniedException”。我该如何规避这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T09:25:17.100

这是由系统和应用程序异常之间的差异引起的。这些大致对应于非检查和检查异常。

他们每个人都有一定的属性。系统异常将被包装在 EJBException 中，发生异常的 bean 将被销毁，并且任何挂起的事务都将回滚。

人们通常想要的是一个未经检查的异常，它只会回滚。

您可以通过在您自己的一种异常类型（可以不检查）上使用 @ApplicationException 来创建这样一个，然后相应地设置注释的属性。

# c - c/c++ va_list 关于钩子

> ID：13450162
> 
> 赞同：2
> 
> 时间：2012-11-19T08:38:22.550
> 
> 标签：c, hook, variadic-functions

```
 void foo(int fmt, ...)
    {
    }

    //I hook foo

    static void (*original_foo)(int fmt, ...);
    void replaced_foo(int fmt, ...)
    {
      printf("Hooking");
      va_list args;
      va_start(args, fmt);
      //do something
      va_end(args); 
```

//但是我想调用original_foo函数，//不知道怎么调用...

```
 }
    //Hook Function not include ...

    Hook(foo, replaced_foo, (void **)&original_foo); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T09:30:04.587

如果你有一个对应`original_foo_v()`的需要 a `va_args`，那么你很幸运：你可以使用它。

如果您不这样做（例如，如果您使用LabVIEW`DbgPrintf()`或`LStrPrintf()`与 LabVIEW 交互），您将不得不自己制作一些东西。

本质上，你必须

*   检查`va_list`你得到的，
*   沿着栈走找到它的栈帧，
*   根据需要在堆栈上分配尽可能多的内存，假设您需要`va_list`指向的位置和下一个堆栈帧之间的整个区域，
*   调用非`va`感知函数。

当然，您必须为您打算支持的每个平台执行此操作...

祝好运并玩得开心点。

# c# - 流利的休眠，继承和使用派生列表类型

> ID：13450163
> 
> 赞同：2
> 
> 时间：2012-11-19T08:38:26.307
> 
> 标签：c#, fluent-nhibernate

我还在学习曲线上，我卡住了。我正在使用带有自动映射的流利的 nhibernate。我配置了一些有效的约定（其他人做了）。

我有以下结构：

```
LoyaltyProgram
UniversalProgram : LoyaltyProgram
OtherProgram : LoyaltyProgram 
```

他们使用每个层次结构的表，这是可行的，因此通常约定是可以的。我创建了一些存储客户积分的规则：

```
BasePointsRule
AmountPointsRule : BasePointsRule
TresholdPointsRule : BasePointsRule 
```

BasePoints 包含属性

```
public virtual UniversalProgram UniversalProgram { get; set; } 
```

我尝试在 UniversalProgram 类中执行以下操作：

```
public virtual ICollection<AmountPointsRule> AmountPointsRules { get; set; }
public virtual ICollection<TresholdPointsRule> TresholdPointsRules { get; set; } 
```

我希望能够同时获取和设置它们。

我设置了鉴别器。

```
class BasePointsRuleMap : IAutoMappingOverride<BasePointsRule>
{
    public void Override(AutoMapping<BasePointsRule> mapping)
    {
        mapping.DiscriminateSubClassesOnColumn("basepointstype");
    }
} 
```

但是查看数据库，我在表 BasePointsRule 上创建了以下外键：

```
alter table `BasePointsRule` 
    add index (UniversalProgramId), 
    add constraint FK_UniversalProgram_TresholdPointsRule_TresholdPointsRules 
    foreign key (UniversalProgramId) 
    references `LoyaltyProgram` (Id) 
```

它使用正确的鉴别器保存了这两个属性，但是在获取 AmountPointsRules 期间从 BasePointsRule 获取所有记录并为 TresholdPoinstRules 获取适当的包，但是它尖叫非法访问，这似乎是正确的，因为 AmountPoinstRules 得到了所有。

当我将抽象放在 BasePointsRule 上时，数据库上有两个表，外键正确引用 UniversalProgram，这就像一个魅力。

问题：是否有可能以某种方式覆盖自动映射以...我不知道...设置两个约束（用于 Amount 和 Treshold）或为其基类设置一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T14:38:16.243

考虑是否真的需要两个强类型集合而不是使用 LINQ 的`.OfType<>()`. 如果你这样做，那么添加一个过滤条件

```
class BasePointsRuleMap : IAutoMappingOverride<UniversalProgram>
{
    public void Override(AutoMapping<UniversalProgram> mapping)
    {
        mapping.HasMany(x => x.AmountPointsRules).Where("basepointstype='AmountPointsRule'");
        mapping.HasMany(x => x.TresholdPointsRules).Where("basepointstype='TresholdPointsRule'");
    }
} 
```

# mvvm - 模型的属性应该由视图模型公开吗？

> ID：13450167
> 
> 赞同：0
> 
> 时间：2012-11-19T08:38:48.737
> 
> 标签：mvvm, model, viewmodel

我已经阅读了几篇关于 MVVM 模式的文章和教程，但有一件事我找不到关于它的不同信息。让我们看下面的例子：

该模型包含两个字段和属性：

```
private string username;
public string Username {
  get; set;
}

private string password;
public string Password {
  get; set;
} 
```

现在，视图模型应该包含什么？它应该只包含模型的一个实例，还是应该“重新公开”模型的属性？

```
private Model _model;
public Model Model {
  get; set;
} 
```

或者...

```
private Model _model;
public Model Model {
  get; set;
}

public Username {
  get { return _model.Username; }
  set { _model.Username = value; }
} 
```

我在几篇文章中看到了这两种变体，现在不确定哪种方式是正确的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T08:47:43.580

这个问题没有普遍的正确或错误答案。这取决于上下文和个人喜好。

我个人倾向于不直接将模型暴露给视图。我喜欢有一个专门为视图量身定制的 ViewModel。我不想仅仅因为视图需要它而在模型中实现任何东西（当模型暴露给视图时，我可能很想这样做）。

在我的 ViewModel 中，我希望尽可能少地依赖模型。如果我能摆脱它，我希望有一个完全不直接依赖于模型的 ViewModel *（*并且有一些外部实体/服务填充来完成映射）。

# ruby-on-rails - RoR 中的字符串到日期

> ID：13450169
> 
> 赞同：0
> 
> 时间：2012-11-19T08:38:57.563
> 
> 标签：ruby-on-rails, string, date

嗨，我在 RoR 中有这段代码可以将字符串转换为日期：

```
r.valid_from = Date.strptime(row[5], @time_format) 
```

row[5] 是 7-11-12，time_format 是“%d-%m-%y”。我用这段代码得到的结果是：2012 年 11 月 7 日，但我想以这种方式得到它：2012 年 11 月 7 日。我该怎么做？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T08:52:48.100

您只需要格式化时间：

```
DateTime.strptime(row[5], @time_format).strftime("%d %B, %Y") 
```

有关所有格式化指令，请参阅[有关 strftime 的文档。](http://www.ruby-doc.org/core-1.9.3/Time.html#method-i-strftime)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T08:52:47.537

看来您已成功将字符串解析为`Date`. 所以你只需要以另一种格式打印你的新日期。

要达到`07 November, 2012`结果，您可以使用`strftime`：

```
your_date.strftime('%d %B %Y') 
```

# database - 在一个查询中从多个列中删除

> ID：13450171
> 
> 赞同：0
> 
> 时间：2012-11-19T08:39:03.837
> 
> 标签：database

你能帮我解决这个问题吗：

在 DB`vot`我有`blocked`表`comments`

我想要的是删除 where:
`blocked`。`friend` =$_SESSION['user_id']
`comments`。`user`=$_SESSION['user_id']

在一个单一的查询

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T08:51:56.783

这在一个查询中是不可能的。

对于正确的解决方案，您可以使用 Transaction 或创建 FK 级联密钥。

# python - 无法使用 BeautifulSoup 从标签中提取文本

> ID：13450181
> 
> 赞同：1
> 
> 时间：2012-11-19T08:40:04.020
> 
> 标签：python, class, beautifulsoup

这行得通...

```
 print soup.findAll('td',{ "class" : "green center" }) 
```

但我只需要文字，这不起作用......

```
 print soup.findAll('td',{ "class" : "green center" }).text 
```

这是我如何使用它。

```
#!python27
import fileinput
import sys
import BeautifulSoup
from BeautifulSoup import BeautifulSoup
import re, urllib
filename = "url.txt"
LineNumber=0
f=open(filename)
lines=f.readlines()
f.close()
for line in lines:
        filehandle = urllib.urlopen("http://kat.ph/usearch/"+lines[LineNumber]+"/")
        line = filehandle.read()
        soup = BeautifulSoup(line)
        print soup.findAll('td',{ "class" : "green center" }).text
        print soup.findAll('td',{ "class" : "red lasttd center" }).text
        print LineNumber
        LineNumber=LineNumber+1

        filehandle.close() 
```

Post script url.txt 只是要运行的搜索列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T14:50:26.683

`findAll`返回满足您的条件的所有元素的列表`"class":"green center"`等。如果您有兴趣返回该列表的单个元素，您可以通过偏移量调用它：

```
print soup.findAll('td',{'class':'green center'})[0].text
print soup.findAll('td',{'class':'green center'})[1].text 
```

或者，您可以遍历列表：

```
for td in soup.findAll('td',{'class':'green center'}):
    print td.text 
```

此外，如果您有兴趣组合列表中的所有文本，您可以将每个元素附加到列表并加入：

```
td_list = []
for td in soup.findAll('td',{'class':'green center'}):
    td_list.append(td.text)
print ' '.join(str(x) for x in td_list) 
```

我希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T08:47:49.140

`findAll`将获得一个元素列表，您需要遍历列表并调用`.text`每个元素。

```
for e in soup.findAll('td',{ "class" : "green center" }):
    print e.text 
```

# nfc - 访问 Google Nexus 4 安全元件 (SE)

> ID：13450182
> 
> 赞同：0
> 
> 时间：2012-11-19T08:40:12.927
> 
> 标签：nfc

我正在为大型银行开发一个项目的技术部分，并寻找有关使用嵌入到 Google Nexus 4 中的安全元素 (SE) 的信息。访问 SE 的流程是什么？我的意思是如何启动与 Google 的流程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:08:14.153

Depends what your ambition is, can you elaborate ? Loading an application of your own onto the secure element will require crypto keys that only Google can provide, and they probably never will, for many reasons. Alternatively, you should be able to do the same with a SIM. It only takes a few tools to load and configure an application on a test SIM (with test SIM), then you can fit it into a phone and access it through the Open Mobile API (see the [SEEK for Android](http://code.google.com/p/seek-for-android/) open source project) which is available on many devices.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T09:52:49.613

您可以尝试直接联系他们，但 Google 不会让您访问（嵌入式）SE：他们不希望竞争对手在他们的钱包应用程序上（特别是在 Android 系统上）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T06:19:49.930

您可以这样做，当前的 android 版本（4.0.4）已启用对 SE 的访问，而无需平台供应商的支持。请参考 [http://nelenkov.blogspot.sg/2012/08/accessing-embedded-secure-element-in.html](http://nelenkov.blogspot.sg/2012/08/accessing-embedded-secure-element-in.html)

# computer-vision - 计算机视觉与亮度空间恒定增加的互相关

> ID：13450189
> 
> 赞同：0
> 
> 时间：2012-11-19T08:41:03.960
> 
> 标签：computer-vision, cross-correlation

如果我按照附加公式中的描述获取两个图像之间的相关性：

* * *

![相关性](../Images/bd5c9eb386f57e9533590d7aa057a1a8.png)

* * *

摘自以下在线计算机视觉教科书：[Szelski](http://szeliski.org/Book/drafts/SzeliskiBook_20100903_draft.pdf)第 386 页。

此功能似乎永远不会可靠，因为如果您的一张图像比另一张更亮，则相关性将高于图像相同的情况。例如，看看印在白板上的这些例子：

![完美的一对](../Images/90a3533d0677830db02b51a63ff92b3b.png)

![在此处输入图像描述](../Images/395ddb13582eb60623695c92e6685652.png)

如您所见，较亮的图像与第一张图像的相关性比第一张图像的相同副本更好。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T08:50:53.430

我猜您正在寻找的是[归一化的互相关](http://en.wikipedia.org/wiki/Cross-correlation#Normalized_cross-correlation)，其中值减去平均强度，然后除以强度的标准偏差。

# jquery - zrssfeed JQUery 在 IE 9 上崩溃，强制关闭

> ID：13450190
> 
> 赞同：4
> 
> 时间：2012-11-19T08:41:08.900
> 
> 标签：jquery, iframe, tabs, rss, internet-explorer-9

如果 ZRSSFeed JQuery 独立运行，则可以正常工作，但是一旦我将其放入带有 JQuery 选项卡的 iFrame 中，它就会在 IE 9 中崩溃。（我认为 iFrame 不应该有 JQuery 冲突？）

你可以看看这里：http: [//jsfiddle.net/VMfXr/](http://jsfiddle.net/VMfXr/)

只需将 URL 复制并粘贴到 IE，它就会强制我的 IE 9 关闭。感谢您是否有任何帮助。

或以下代码：

```
<div class="widget_container"> <div class="widget_container_inner">
            <ul class='tabs'>
                <li><a href="#tab1">Tab1</a></li>
                <li><a href="#tab2">Tab2</a></li>
                <li><a href="#tab3">JQuery Blog</a></li>
            </ul>
            <div id='tab1'>
            <Script>window.console && console.log('tab1');</script></div>
            <div id='tab2'>
            <Script>window.console && console.log('tab2');</script>
            </div>
            <div id='tab3'> <Script>window.console && console.log('tab3');</script>
                <iFrame src="http://www.iframeURL.com" style="width:320px; height:330px; overflow:hidden" frameborder="0" scrolling="no"></iFrame>
            </div>
        </div> </div>

<script type="text/javascript">     
        jQuery.noConflict();
        (function($) {                                           
           jQuery(document).ready(function($) {         
               jQuery('ul.tabs').each(function(){           
                   var $active, $content, $links = $(this).find('a');
                   $active = $($links.filter('[href="'+location.hash+'"]')[0] || $links[0]);            
                   $active.addClass('active');          
                   $content = $($active.attr('href'));

               $links.not($active).each(function () {
                $($(this).attr('href')).hide();             });

            jQuery(this).on('click', 'a', function(e){
                $active.removeClass('active');
                $content.hide();
                $active = $(this);
                $content = $($(this).attr('href'));
                $active.addClass('active');
                $content.show();
                e.preventDefault();             
                     });        
                 });    
            }); 
       })(jQuery); </script> 
```

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T22:25:02.060

这是您的 jquery.vticker.js 文件在隐藏时在 iframe 中运行的结果。这似乎是最近更新的 IE9 中的一个错误。发生的事情是 IE 出现访问冲突，这可能是垃圾收集器无法在隐藏的 i-frame 上正常工作的结果。无论如何，要修复错误，您可以从 http://www.sp.edu.sg/schools/dmit/widgets/ticker/blog/blog_widget_dbit 引用的 jquery.vticker.js 中注释掉以下代码行[。 html](http://www.sp.edu.sg/schools/dmit/widgets/ticker/blog/blog_widget_dbit.html)

```
obj.children('ul').children('li').each(function() {
    $(this).height(maxHeight);
});

obj.height(maxHeight * options.showItems); 
```

这似乎与 Microsoft KB2761451 有关，这是 2012 年 11 月 13 日发布的安全更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T15:17:29.427

我的公司在我们的产品中遇到了这个问题，向微软开了一张支持票，他们解决了这个问题。最后一个补丁应该可以阻止 IE9 崩溃。

# facebook - 官方 Facebook 连接按钮为 PNG

> ID：13450192
> 
> 赞同：35
> 
> 时间：2012-11-19T08:41:15.117
> 
> 标签：facebook

是否有任何官方的 Facebook Connect 按钮，作为图像文件？

网络上有很多非常不同的图像，有不同的尺寸、不同的样式（甚至颜色）、不同的许可证、免费和付费。但我相信应该有一些官方的例子，比如 PNG 图像。

我知道通过使用[https://developers.facebook.com/docs/reference/plugins/login/](https://developers.facebook.com/docs/reference/plugins/login/)我可以生成 HTML 并制作屏幕截图，但似乎它太 hacky，我只是缺少正确的页面。是吗？

[品牌权限中心](https://www.facebook.com/brandpermissions/logos.php)没有“连接”按钮

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-11-01T04:47:55.700

![在此处输入图像描述](../Images/1ae85d87e3729d5a4ae77171a70a8fd9.png)

![在此处输入图像描述](../Images/c68d497d818280cf31241acaeb516a69.png)

![在此处输入图像描述](../Images/2d539435a7a6f63ccad2a434741c4ae7.png)

您可以在此处获得官方的“使用 Facebook 登录”按钮。ZIP 有不同大小的 PNG [https://developers.facebook.com/docs/facebook-login/checklist/#brandlogin](https://developers.facebook.com/docs/facebook-login/checklist/#brandedlogin)

编辑 26/07/2014：Facebook 似乎已经删除了这些图像资产。他们现在建议您使用带有按钮样式的 Javascript 登录按钮。[https://developers.facebook.com/docs/plugins/login-button](https://developers.facebook.com/docs/plugins/login-button)

![新的 Facebook 登录按钮](../Images/7aad685313bf83eead9d3a5684aeb75b.png)

编辑 21/02/2018：Facebook 已使用新的“在 Facebook 上继续”按钮图像资产更新了指南

[![继续使用 Facebook 按钮](../Images/1f2dd4c0298c7831b284589fdfc10812.png)](https://i.stack.imgur.com/oL5c2.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-08-26T17:08:33.977

将对现有答案发表评论，但代表... =\

您仍然可以在[此处](https://en.facebookbrand.com/assets/f-logo/)下载图标。我猜他们现在已经为它专门设置了一个单独的域。我相信他们将始终必须为您提供图标替代品，因为他们需要，就像谷歌一样：

> “f”标志可以单独使用，也可以与其他社交图标一起使用。它应该以与相邻图标相同的大小使用。确保保持其形状和比例，并在徽标之间提供足够的清晰空间。

如果没有适当的图标，您将无法真正始终如一地做到这一点。

# c# - 在 C# 2.0 中使用注册表（Windows 窗体）

> ID：13450201
> 
> 赞同：3
> 
> 时间：2012-11-19T08:41:38.147
> 
> 标签：c#, winforms, registry, .net-2.0

我是 Windows 窗体的新手。

我正在.Net Framework 2.0 中设计一个 Windows 应用程序，其中，我需要在系统中的某处存储用户名和密码，并在每次打开我的应用程序时访问它们，有时我需要在用户命令上更改这些凭据。

我听说注册表是这样做的最佳方式。我对在 C# .Net 中使用注册表一无所知。

所以你能帮我吗

如何获取注册表中的值，以及如何将值设置到注册表。??

我正在使用 .Net Framework 2.0

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T08:51:00.620

主题非常广泛。您应该开始在 MSDN 上阅读有关该课程的信息

[Microsoft.Win32.RegistryKey](http://msdn.microsoft.com/en-us/library/microsoft.win32.registrykey.aspx)

**但我真的建议完全避免使用注册表。**
允许注册表存储普通应用程序的配置信息从一开始就是微软的错误。

您可以编写一个简单的散列函数，将其应用于您的用户名和密码，并将结果存储在 ApplicationData 文件夹中的文件中。在下一次运行时检查文件是否存在，读取它并将其内容与用户名和密码的哈希值进行比较。

这里是一个粗略的例子，只是为了让你从你自己的代码开始。

```
private void button1_Click(object sender, EventArgs e)
{
    string user = "Steve";
    string pass = "MyPass";

    string hashedUser = GetHashedText(user);
    string hashedPass = GetHashedText(pass);

    string file = Path.Combine(Environment.GetFolderPath 
                       (Environment.SpecialFolder.ApplicationData), 
                       "MyKeys.txt");

    if (File.Exists(file))
    {
        using (StreamReader sr = new StreamReader(file))
        {
            string recordedUser = sr.ReadLine();
            string recordedPass = sr.ReadLine();
            if (recordedUser == user && recordedPass == pass)
                MessageBox.Show("User validated");
            else
                MessageBox.Show("Invalid user");
        }
    }
    else
    {
        using (StreamWriter sw = new StreamWriter(file, false))
        {
            sw.WriteLine(hashedUser);
            sw.WriteLine(hashedPass);
        }

    }
}

private string GetHashedText(string inputData)
{ 
    byte[] tmpSource;
    byte[] tmpData;
    tmpSource = ASCIIEncoding.ASCII.GetBytes(inputData);
    tmpData = new MD5CryptoServiceProvider().ComputeHash(tmpSource);
    return Convert.ToBase64String(tmpData);
} 
```

编辑：根据您的评论，您似乎需要一个加密和解密功能。下面的代码取自[扩展溢出](http://extensionoverflow.codeplex.com/)，您可以在其中找到其他有用的方法。现在，在写入磁盘之前，使用要加密的字符串和密钥调用 Encrypt 方法。阅读后，调用 Decrypt 方法传递加密文本和密钥。

```
string cryptedUser = Encrypt(user, "your_secret_key_ABCDEFG");
....

public string Encrypt(string stringToEncrypt, string key)
{
    if (string.IsNullOrEmpty(stringToEncrypt))
        throw new ArgumentException("An empty string value cannot be encrypted.");
    if (string.IsNullOrEmpty(key))
        throw new ArgumentException("Cannot encrypt using an empty key.");

    CspParameters cspp = new CspParameters();
    cspp.KeyContainerName = key;
    RSACryptoServiceProvider rsa = new RSACryptoServiceProvider(cspp);
    rsa.PersistKeyInCsp = true;
    byte[] bytes = rsa.Encrypt(UTF8Encoding.UTF8.GetBytes(stringToEncrypt), true);
    return BitConverter.ToString(bytes);
}

string clearText = Decrypt(cryptedText, "your_secret_key_ABCDEFG");
....

public string Decrypt(string stringToDecrypt, string key)
{
    string result = null;
    if (string.IsNullOrEmpty(stringToDecrypt))
        throw new ArgumentException("An empty string value cannot be encrypted.");
    if (string.IsNullOrEmpty(key))
        throw new ArgumentException("Cannot decrypt using an empty key");
    try
    {
        CspParameters cspp = new CspParameters();
        cspp.KeyContainerName = key;
        RSACryptoServiceProvider rsa = new RSACryptoServiceProvider(cspp);
        rsa.PersistKeyInCsp = true;
        string[] decryptArray = stringToDecrypt.Split(new string[] { "-" }, 
                                 StringSplitOptions.None);
        byte[] decryptByteArray = Array.ConvertAll<string, byte>
                                 (decryptArray, (s => Convert.ToByte(byte.Parse(s,
                                 System.Globalization.NumberStyles.HexNumber))));
        byte[] bytes = rsa.Decrypt(decryptByteArray, true);
        result = System.Text.UTF8Encoding.UTF8.GetString(bytes);
    }
    finally
    {
        // no need for further processing
    }
    return result;
} 
```

当然，我假设您的应用程序所需的安全级别允许将用户名和密码存储在本地系统中。（如您所知，存储在本地系统上的所有内容都不是很安全）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T08:45:53.570

使用注册表的读、写和删除功能检查本教程

[使用 C# 从注册表中读取、写入和删除](http://www.codeproject.com/Articles/3389/Read-write-and-delete-from-registry-with-C)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-19T08:52:38.560

这是一个很好的教程，将解释读/写注册表。

[http://www.switchonthecode.com/tutorials/csharp-snippet-tutorial-editing-the-windows-registry](http://www.switchonthecode.com/tutorials/csharp-snippet-tutorial-editing-the-windows-registry)

您还需要了解有关注册表的更多信息。

1.  注册表由五个部分组成，其中 HKEY_CURRENT_USER 存储当前登录用户的设置。建议您将设置存储在此键下。设置一般存储在 HKEY_CURRENT_USER/Software//

2.  您可以在 HKEY_LOCAL_MACHINE 键下存储机器范围的设置（适用于所有使用计算机的用户）。但是，对此的读/写操作需要管理权限。您的应用程序必须以管理员权限运行才能写入此密钥。

3.  如果在注册表中找不到，请确保您的注册表读取机制返回默认值，并将默认值写入注册表。这样，您将永远不会用完设置值。

4.  注册表可以编辑和读取。如果您打算将用户名/密码组合存储在注册表中，请确保在存储之前对其进行加密。此外，为了确保它也不会在任何其他计算机上使用，您应该使用一些特定于机器的信息对其进行加密。

希望这对您有所帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-19T08:58:29.300

您可以尝试使用独立存储。[MSDN Blurb](http://msdn.microsoft.com/en-us/library/3ak841sy%28v=vs.80%29.aspx)、[代码示例](http://www.codeproject.com/Articles/6535/Isolated-Storage-in-NET-to-store-application-data)和（假设您正在存储用户凭据）[加密示例](http://www.codeproject.com/Articles/6465/Using-CryptoStream-in-C)。我已经尽可能链接了 .net 2.0 示例。

在注册表中存储应用程序数据已变得不受欢迎，因为有更简单的替代方法，并且使用注册表会损害用户计算机的性能。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-19T08:45:18.600

我从来没有使用过注册表，但谷歌上出现的第一件事就是[这个](http://dotnet-snippets.de/dns/using-the-registry-SID216.aspx)。看起来很容易理解，所以玩得开心:)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-19T08:50:21.000

这样做注册表的方式是错误的方式，我相信做一个配置文件并阅读这个配置是更好的方式。但无论如何在这里你如何做注册表的事情

[http://www.codeproject.com/Articles/3389/Read-write-and-delete-from-registry-with-C](http://www.codeproject.com/Articles/3389/Read-write-and-delete-from-registry-with-C)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-19T08:59:09.743

你需要问自己几个问题：

1.  应该只有一个用户能够使用 uid/密码吗？

2.  密码的存储安全性如何？

在注册表中存储信息非常容易。 [http://msdn.microsoft.com/en-us/library/microsoft.win32.registry.aspx](http://msdn.microsoft.com/en-us/library/microsoft.win32.registry.aspx)

如果您只想为一个用户存储它，请将其存储在 HKEY_CURRENT_USER/software/your_company/your_product 下，否则将其存储在 HKEY_LOCAL_MACHINE/software/your_company/your_product 下。

如果要安全地存储您的密码，有比注册表更安全的解决方案。

# java - 在 IntelliJ 中，是否有可以跳转到最后查看的选项卡的操作？

> ID：13450205
> 
> 赞同：1
> 
> 时间：2012-11-19T08:41:56.867
> 
> 标签：java, intellij-idea, pycharm

我只找到“最后编辑的位置”，但通常我需要在两个未编辑的文件之间跳转，所以该选项对我没有用。

Navigate -> File 操作也没有用，因为我需要一次又一次地输入文件 A 和文件 B 的名称。

在 Emacs 中，`Ctrl+x`+`b`只是帮助我切换到最后一个缓冲区。IntelliJ 中有这样的动作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T08:50:46.067

Ctrl+Alt+Left - 上一个位置（“后退”操作）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T08:50:45.023

`View`| **最近的文件** `Ctrl`+ `E`，`Enter`或使用类似的功能：**切换器** `Ctrl`+ `Tab`。

# simulator - 当我尝试将示例 Android 应用程序移植到 Blackberry 10 Dev Alpha 模拟器时出现错误

> ID：13450207
> 
> 赞同：2
> 
> 时间：2012-11-19T08:42:14.623
> 
> 标签：simulator, blackberry-10, blackberry-android

连接 192.168.176.128 到 ADB 失败！
当您收到此错误时，请检查 Android 播放器是否已完全启动。如果没有，您可以在 BlackBerry->BlackBerry Android Development Tools 首选项页面上增加 Android 播放器启动超时，或者等到 Android 播放器完全启动后再试一次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T17:33:03.533

这意味着 Eclipse，或者更具体的 Eclipse 的 BlackBerry Android 工具插件，无法连接到 BlackBerry 设备上的 ADB（Android Debug Bridge）服务。

有许多的原因：

1.  Android 运行时和包括 ADB 在内的相关服务未及时加载。默认超时为 5 秒，如果您尚未在 BlackBerry 上运行任何 Android 应用程序，则第一次加载将需要 20 秒左右。
2.  Android 运行时已崩溃。在这种情况下，您需要重新启动设备。我首选的方法是“三指重置”，这意味着按住电源按钮、音量增大和音量减小按钮 10 秒钟以进行完全重置。

# matlab - 逐行平铺矩阵

> ID：13450209
> 
> 赞同：2
> 
> 时间：2012-11-19T08:42:23.557
> 
> 标签：matlab

我想将每一行重复 n 次，例如：

```
A= [123
    456
    789]; 
```

所以我想要：

```
b=[123
   123
   123
   456
   456
   456
   789
   789
   789]; 
```

我试过了`repmat`：

```
B = repmat(A,3,1) 
```

但这不会导致`b`上述情况......我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T09:15:38.480

罗迪为您提供了`repmat`解决方案（+1），但我认为还值得指出的是：

```
A = [123;456;789];
A = ones(N, 1) * A';
A = A(:); 
```

将快接近一个数量级，因为`repmat`这不是一个特别有效的功能。超过 10000 次迭代的快速速度测试产生：

```
Elapsed time is 0.206894 seconds %#repmat solution
Elapsed time is 0.024718 seconds %#My solution 
```

最后一点，我在@Maroun85 建议使用线性索引的评论中注意到。但是，如果不调用 ，我看不到构造所需索引的聪明方法`repmat`，这使我们回到了减速的原始根源。不过，其他人可能会想出一个聪明的方法来构造所需的索引向量。

**编辑：**罗迪更新了他的答案以提供上述“聪明的方式”。:-)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-19T09:07:23.947

对于向量，只需`repmat`在转置上使用，然后展开：

```
A = [123;456;789];
A = repmat(A.', 3, 1);
A = A(:); 
```

更一般地，对于任何矩阵/张量，`repmat`在索引上使用：

```
A = [ 1 2 3; 4 5 6; 7 8 9 ];
A = A(repmat(1:end, 3, 1), :); 
```

或者，根据下面 Colin T Bowers 的回答，一个更快的替代方案是

```
A = A( ones(3,1) * (1:end), :); 
```

这有点难读，所以包括一个注释行来描述你使用它时它的作用。

还可以看看 Kronecker 产品：

```
A = kron(A, [1;1;1]); 
```

这有时非常有用。

# ruby-on-rails - 如何在 Mongoid 3 中使用嵌套和或查询

> ID：13450219
> 
> 赞同：0
> 
> 时间：2012-11-19T08:43:38.333
> 
> 标签：ruby-on-rails, mongoid

在以前版本的 Mongoid 中，我会写：

```
Clothes.where("$or" => [{"$and" => [{_type: "Shoes"}, {is_secondhand: false}]}, 
                        {"$and"=> [{_type: "Shirts"}, {is_secondhand: true}]}]) 
```

我应该如何在 Mongoid 3.0.13 中编写它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T01:26:26.713

你可能不需要那些*ands*。

试试这个：

```
Clothes.or({_type: "Shoes", is_secondhand: false},
           {_type: "Shirts", is_secondhand: true}) 
```

Mongoid 3 发生了很多变化，大多数查询选择器都移到了 Origin。看看[Origin 文档](http://mongoid.org/en/origin/docs/selection.html)。

# windows-phone-7 - 无法查看应用程序属性页 - E_FAIL / 方法未实现

> ID：13450222
> 
> 赞同：0
> 
> 时间：2012-11-19T08:43:55.520
> 
> 标签：windows-phone-7, windows-phone, windows-phone-8

在 Visual Studio 2012 的解决方案资源管理器中，我右键单击我的 wp8 项目并转到属性，应用程序选项卡显示：

```
An error occurred trying to load the page.
Error HRESULT E_FAIL has been returned from a call to a COM component. 
```

或者

```
An error occurred trying to load the page.
The method or operation is not implemented. 
```

有人知道如何进行调试吗？

我无法用一个新项目重现这个问题，但无法确定它在我的项目中失败的地方......

也许与 AssemblyInfo.cs 有关？[找不到源文件“Properties\AssemblyInfo.cs”](https://stackoverflow.com/questions/6494691/source-file-properties-assemblyinfo-cs-could-not-be-found)

顺便说一句，它构建并部署到我的设备就好了......

![在此处输入图像描述](../Images/a406b96a63413cf6599035179f443d2e.png)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T02:01:17.227

因此，经过一轮详尽的蛮力消除后，我能够将其范围缩小到我对 .java 文件的使用。是的，这很奇怪，但它已经奏效了。我一直在我的项目中包含 .java 文件并将它们的属性设置为 Compile as c#。这样做是有合并的原因，我当然稍微修改了 java 代码以进行编译，但不知何故，当以这种方式包含 .java 文件时，Visual Studio 的属性页会显示出来，即使项目编译得很好。所以我写了一个小工具来复制所有的 .java 文件到 .java.cs 并以这种方式包含它们，现在一切都很好！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-20T21:12:48.180

我在所有项目中都发现了这个问题，并推断它可能与最近的 Windows 更新有关。我将 VS 2017 更新为 15.9.15 并为我解决了这个问题。

# ehcache - 当一个缓存节点死掉时，Ehcache 分布式缓存会发生什么？

> ID：13450223
> 
> 赞同：1
> 
> 时间：2012-11-19T08:43:59.640
> 
> 标签：ehcache, distributed-caching

我已经阅读了 ehcache 文档并且知道分布式缓存中的所有数据都分布在所有节点上。这意味着没有一个节点拥有所有缓存数据。那么当其中一个节点死亡时会发生什么？那个死节点上的缓存对象不见了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T18:11:34.757

除非您使用 Terracotta 作为集群机制，否则所有其他的都意味着：*仅存*在于失败节点上的所有数据都将丢失。

使用 Terracotta 集群，数据由 Terracotta Server 条带“拥有”，可以为 HA 备份被动备用。在这样的设置中，数据*永远不会*丢失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-06T09:23:31.540

分布式缓存在技术上应该要求所有数据都分布在所有缓存服务器上，这样内存就可以被池化，同时它应该是高可用的。这实际上意味着您需要一个点对点架构，以便所有服务器都充当对等点，如果一个服务器出现故障，则应该在缓存集群中的其他服务器上复制该服务器的数据，以便实现业务连续性。NCache 就是这样一种产品，它提供了真正的对等架构。

[http://www.alachisoft.com/ncache/](http://www.alachisoft.com/ncache/)

# xml - 使用 xpath 检索 xml 中最后一个匹配的文本

> ID：13450225
> 
> 赞同：0
> 
> 时间：2012-11-19T08:44:10.437
> 
> 标签：xml, xpath

我需要使用 xpath 检索 xml 中的最后一个匹配元素。例如

```
<step >
 <step1 name="a">
    <calculation value="123.5">
 </step1>
 <step1 name="b">
    <calculation value="129.5">
 </step1>
<step1 name="a">
    <calculation value="124">
</step1>
<step1 name="c">
    <calculation value="130">
 </step1>
</step> 
```

我想检索名称为“a”的最后一个匹配值，此处为 124。任何人都可以帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T11:08:37.020

在 Stefans 链接中，使用 last()：

```
 /step/step1[@name="a"][last()]/calculation/@value 
```

如果你有一个可以处理文件的 xml 解析器

# node.js - app.use 和 app.get（或 app.post）node.js 表达

> ID：13450228
> 
> 赞同：0
> 
> 时间：2012-11-19T08:44:22.440
> 
> 标签：node.js, express

我想使用一个 app.use：

```
app.use(function(req, res, next){
    console.log('%s %s', req.method, req.url);
    next();
}); 
```

但它只有在我的代码中没有 app.get 或 app.post 时才有效，如果我有一个 app.use 被忽略。

我想在每次调用 app.get 或 app.use 时执行一个脚本

我也尝试：

```
app.use(function(req, res, next){
    console.log('%s %s', req.method, req.url);
    app.get('/',function(req,res){console.log('aa')})
    next();
}); 
```

在这种情况下，我的 app.get 被忽略

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T09:46:39.713

你必须把你`app.use()`的路由器上面。路由器通常位于 express 配置中，因此只需将您`app.use()`的放在配置之上。像这样的东西：

```
app.use(function(req, res, next) {
  console.log('awesome');
  next();
})

app.configure(function(){
  // config
  app.use(app.router);
}); 
```

还可以查看[logger](http://www.senchalabs.org/connect/logger.html)中的构建。

# c# - PHP调用的C#程序中的文件访问

> ID：13450232
> 
> 赞同：3
> 
> 时间：2012-11-19T08:44:47.290
> 
> 标签：c#, php, file, permissions

这是上下文：我必须为一个允许用户将 csv 文件导入 MySQL 数据库的 Intranet 站点编写源代码。

这个导入非常庞大，这就是我编写 C# 程序的原因。

这个程序创建了一些线程来读取我的 csv 文件的一些行。

这些线程控制、更改类型并使用 SQL 将我的数据插入 MySQL 数据库，如下所示：

```
insert into table1 (fields) values (dataline 1 ), (data line 25),...,(data line n); 
```

此请求存在 9 个表。

每个人都可以使用这个程序，因为源代码是动态的：插入数据的示例 我编写了一个字典，其中包含我的 9 个表，其中包含所有字段、类型和导入文件的 CSV 标题（其中包含一些重音和符号，我ve 更改它，因为我无法将它们放入数据库中的字段名中）。

只能使用名为 MAP.csv 的文件创建此字典

例子：

```
table   /   field     /    type  /   header

table 1  /  field1_table1 /string  / hêàder

table 1   / field2_table1/ int    /  header1

table 2   / field1_table2/ date   /  hêàder2

table 1  /  field3_table1/ string  / hêàder3 
```

当我执行 program.exe 时，我的 C# 程序运行良好

但是当我用带有`exec("programpath.exe parameter1 parameter2",return,otherreturn)`函数的php调用它时，这个程序就不能工作了。

事实上，当我尝试使用我的 c# 程序访问 config.xml、MAP.csv、otherfile.txt/csv/.. 等 externfile 时。执行停止并出现一个 Windows 错误，显示“program.exe 停止其工作”（`program.exe à cessé de fonctionner`法语）。

因此，我尝试简单地编写我的问题：当我尝试使用 php 调用的 c# 程序访问文件时，出现了一个窗口问题，该问题停止了特征。

编辑：我找到了解决方案，我只需要做一个 cd c:/path_program/ 事实上，当我启动我的网站时，当前文件夹不是 c:/ 而是 Symfony 启动的文件夹......只是一个初学者错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T09:15:34.687

可能是权限问题。

Web 服务器在特定的安全上下文（用户）下运行。取决于使用的 Web 服务器（IIS、apache、...）及其配置。

当您从 PHP 中执行应用程序时，它将在与您的 WebServer 相同的“用户”下运行。

您说，一旦访问外部文件，您的应用程序似乎就会崩溃->执行网站的用户很可能有权运行 exe，但无权访问配置文件。

您使用相对路径来访问文件：要将应用程序路径的相对路径映射到绝对路径，您可以使用以下代码段：

```
string appPath = System.Windows.Application.ResourceAssembly.Location;
string relativeResourcePath = "RESSOURCES/file.csv";
string absolutePath = System.IO.Path.Combine(appPath, relativeResourcePath); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T14:28:32.273

检查编辑帖子以获取解决方案

# mongodb - Geonames 和 MongoDB：将 Access 2010 导出到 MongoDB 以使用地理空间索引

> ID：13450234
> 
> 赞同：0
> 
> 时间：2012-11-19T08:44:55.717
> 
> 标签：mongodb, csv, import, ms-access-2010

我有一个 Access 2010 数据库，其中包含来自 Geonames 的信息。表名是城市。为简单起见，这些列是“名称”、“纬度”、“经度”、“位置”。我创建了“loc”来将“经度”和“纬度”组合到一个字段中，这样我就可以使用 MongoDB 的地理空间索引。我必须以字符串格式保存“loc”列，因为我将两个十进制值与中间的逗号组合在一起。

当我将此表导出到 CSV 时，我会跳过“经度”和“纬度”，因为我有新的组合“loc”字段。

CSV 看起来像：

```
"geonameid", "name", "loc"
1, "Sweden", "18.068287,59.336341" 
```

在我将 MongoImport 运行到“城市”集合后，loc 字段被引号包围，例如：

```
{ "_id" : ObjectId("50a9ed157db1bcfe22cddd0a"), "geonameid" : 20, "name" : "Sweden", "loc" : "18.068287,59.336341", } 
```

从这里我运行一个命令将“loc”变成一个数组。感谢 Stackoverflow 上的另一个贡献者，我使用以下命令：

```
db.cities.find( { 'loc' : {$type : 2 } } ).forEach( function (x) { x.loc = new Array(x.loc); db.cities.save(x); }); 
```

结果是：

```
{ "_id" : ObjectId("50a9ed157db1bcfe22cddd0a"), "geonameid" : 20, "name" : "Sweden", "loc" : [ "18.068287,59.336341" ], } 
```

如何从“loc”字段中的 gps 坐标中删除引号？我不能用 java 编码，也不介意等待 MongoDB 来执行这个任务。如果可以导出带有“经度”和“纬度”字段的 CSV 并将它们组合到 MongoDB 中的新“loc”字段中，即使它不是一个漂亮的解决方案，我也不介意。我只需要让“loc”字段与地理空间索引一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T13:49:00.067

将 loc 转换为可用地理空间数组的命令是：

```
db.cities.find( { 'loc' : {$type : 2 } } ).forEach( function (x) { x.loc = x.loc.split(",").map(parseFloat); db.cities.save(x); }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T08:56:03.953

您将数字组合到“loc”字段中，所以现在它是一个字符串并且被引用。在导入 MongoDB 之前将其分离回数字。

但是您需要将“loc”字段作为一个数组才能将其与 GEOindex 一起使用 - 并且数组不适用于 CSV。`mongoimport --jsonArray`您需要找到一种方法将数据从 MS Access 导出到 JSON，然后使用“ ”命令将 JSON 导入 MongoDB

导出对 JSON 的访问 - [http://www.divconq.com/2010/export-a-microsoft-access-database-to-json/](http://www.divconq.com/2010/export-a-microsoft-access-database-to-json/)

# android - 布局不会自动旋转

> ID：13450236
> 
> 赞同：0
> 
> 时间：2012-11-19T08:45:10.283
> 
> 标签：android, layout, orientation

嗨，我已经制作了两个同名的 XML 布局文件，一个在`layout`文件夹中，另一个在`layout-land`.

我已经`configChanges`在 Manifest 中添加了标签，如下所示：

```
<activity
    android:name=".Main"
    android:label="@string/title_activity_main"
    android:configChanges="orientation|screenSize" >
    ...
</activity> 
```

旋转手机后布局不会自动更改。

但是当我以横向方向启动应用程序时，它会使用`layout-land`xml 并继续使用它，即使在我将手机旋转为纵向后也是如此。因此，横向代码中没有错误。

我正在使用 Android 4.1.2 进行测试。这是问题吗？

还是我需要在 Activity 类中添加一些代码？

谢谢

**[更新]**

我在新制作的项目中试过这个。但是问题还是一样

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T08:49:44.847

删除`android:configChanges="orientation"`.

使用此属性意味着您将自己处理旋转，但您希望操作系统为您处理它。

# c# - 使用文本编辑器时无法写入焦点文本框

> ID：13450239
> 
> 赞同：3
> 
> 时间：2012-11-19T08:45:20.247
> 
> 标签：c#, wpf

我在关注文本框时遇到了问题。

我的应用程序有一个全局快捷方式，可以将焦点设置在应用程序的文本框上。

如果我使用快捷方式，我会这样做：

```
this(Window).Activate()

wantedTextbox.Focus()

Keyboard.Focus(wantedTextbox) // just for testing 
```

所以它适用于例如互联网浏览器，但它不适用于任何文本编辑器。我专注于文本框+激活窗口，但如果我写，我会写到记事本/VS...

如果有人对我的问题有所了解，我会非常高兴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T09:00:58.980

曾经我在 WPF windows 应用程序中遇到过类似的问题。`wantedTextbox.Focus()`只需在加载窗口后尝试执行命令。就我而言，我刚刚将代码从构造函数转移到`Loaded`放置 TextBox 的窗口事件的事件处理程序。它对我有用。试一试，它也可能对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T08:13:00.773

好的，我解决了问题。**我使用SharpDevelop** + **C# VS2010Express**执行了该应用程序。SharpDevelop 编译的 .exe**不起作用**。VS2010 成功了**！**我不知道为什么，但这解决了我的问题。

# iphone - 为什么我的代码不起作用？（重复循环并返回）

> ID：13450242
> 
> 赞同：1
> 
> 时间：2012-11-19T08:45:31.507
> 
> 标签：iphone, objective-c, xcode

我不知道为什么这段代码不起作用。关于它的整个想法是使价值更大，直到它大于分数。

```
if(score > height && rocketlaunch == false)
{
    @try
    {
         height = [self makebigger:height];
    }
    @catch (NSException *exception)
    {
         height = height + 4000;
    }
    upgradeRocket.center = CGPointMake((rand()%200), -50);
    rocketlaunch = true;
}

-(int)makebigger:(int)heightnr {
  heightnr = heightnr + (1000 * rand() %5);
  if(score > heightnr) {
    [self makebigger:heightnr];
    return heightnr;
  } else {
    return heightnr;
  }
} 
```

有谁知道如何解决这一问题？还是有替代方法？

PS显示的错误是：

> ARC 不允许将 int 隐式转换为 id

和

> 从具有结果类型 id 的函数返回 int 的不兼容整数到指针转换

先感谢您。

编辑：

它以这种方式工作非常感谢你:)

编辑：

我遇到了一个难以解决的新问题：

这给出了错误>tread 1 exc bad accesses code = 2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T08:50:26.687

更改`-makebigger:(int)heightnr`为`- (int)makebigger:(int)heightnr`.

您必须指定返回类型。

如果条件为真，你也必须返回一些东西。

* * *

直到现在我什至不知道可以使用无返回类型。但显然它是。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T08:59:55.773

假设`score`是一个类型的实例变量，`int`那么您的代码中有两个错误：首先您必须指定方法的返回类型，否则`id`假定为；其次，每条路径都必须返回一个值，而您的递归调用不会这样做。纠正这些给出：

```
- (int)makebigger:(int)heightnr
{
   heightnr = heightnr + (1000 * rand() %5);
   if(score > heightnr)
      return [self makebigger:heightnr];
   else
      return heightnr;
} 
```

虽然这应该适用于像这样的简单的基于值的算法，但更常见的是使用迭代而不是递归，如下所示：

```
- (int)makebigger:(int)heightnr
{
   while (score > heightnr)
      heightnr = heightnr + (1000 * rand() %5);

   return heightnr;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T08:48:30.693

我将猜测您的“分数”变量是一个 NSNumber。编译器抱怨是因为您试图将 NSNumber（对象）与 int 进行比较。

试试这个：

```
 if([score intValue] > heightnr) 
```

# c++ - OpenCV：声明 GPU 矩阵

> ID：13450245
> 
> 赞同：1
> 
> 时间：2012-11-19T08:46:00.623
> 
> 标签：c++, opencv, matrix

在 OpenCV 2.4.3 中，我正在尝试以这种方式删除一个 GPU 矩阵：

```
cv::VideoCapture video;
video.open("sample.avi");
cv::Mat source;
for ( int n = 0; n < 500; n ++ )
{
    video >> source; 
    cv::gpu::GpuMat gpuMat ( source );
} 
```

然后我得到了 gpu 矩阵声明的以下错误：

```
Error: incomplete type is not allowed 
```

我在这里犯了什么错误？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T09:04:47.210

通常这与缺少包含语句有关。仔细检查所有必要的包含是否存在。

# asp.net - 在 Visual Studio 中添加项目引用

> ID：13450247
> 
> 赞同：0
> 
> 时间：2012-11-19T08:46:02.250
> 
> 标签：asp.net, .net, vb.net

我将我的业务逻辑项目的项目引用添加到我的控制台应用程序中。我可以在控制台应用程序的代码中引用该项目及其类。奇怪的是，当我构建项目时，构建失败并且引用的类说类型未定义。有人遇到过这样的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T09:01:26.920

您必须在尝试使用业务逻辑应用程序类的控制台应用程序类中导入名称空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T11:27:19.767

我选择了不正确的目标框架 .net 框架客户端配置文件 4.0，它应该是 .net 框架 4。问题已得到纠正，现在我可以构建项目了。

# objective-c - 更改 UIBarButtonItem 的字体

> ID：13450248
> 
> 赞同：4
> 
> 时间：2012-11-19T08:46:02.640
> 
> 标签：objective-c, rubymotion

我正在使用 Rubymotion 构建一个 iOS 应用程序，我需要将字体系列设置为导航栏中按钮 (UIBarButtonItem) 的自定义字体。我知道我在 Objective-C 中是这样做的，但是在 Ruby 中是如何做到的呢？

```
[buttonItem setTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys: [UIFont fontWithName:@"Helvetica-Bold" size:26.0], UITextAttributeFont,nil] forState:UIControlStateNormal]; 
```

感谢所有帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-27T03:22:16.883

在您的 AppDelegate 中使用类似这样的东西

```
NSDictionary *itemTextAttributes = [NSDictionary dictionaryWithObjectsAndKeys:
                                    [UIColor whiteColor],NSForegroundColorAttributeName,
                                    [UIColor whiteColor],NSBackgroundColorAttributeName,
                                    [UIFont fontWithName:@"Ubuntu-Regular" size:18],NSFontAttributeName,
                                    nil];

[[UIBarButtonItem appearance] setTitleTextAttributes:itemTextAttributes forState:UIControlStateNormal]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T15:05:15.447

我认为这会做到。我没有方便的 Mac 来测试它，所以试一试，让我们知道它是如何进行的。

```
buttonItem.setTitleTextAttributes({UITextAttributeFont => UIFont.fontWithName("Helvetica-Bold", size:26.0)}, forState:UIControlStateNormal) 
```

# ubuntu - 包含头文件，但仍然无法调用函数

> ID：13450249
> 
> 赞同：0
> 
> 时间：2012-11-19T05:23:13.357
> 
> 标签：ubuntu, c++

我正在尝试在ubuntu12.04下用c++编写一个绘图程序。OpenGL 应用在我的代码（cc.cpp）中。我已经包含了必要的头文件，但是仍然无法使用 openGL 功能。

这是包含代码。

```
#include <GL/freeglut.h>
#include <GL/gl.h>
#include <GL/glu.h>
#include <stdio.h>
#include <math.h>
#include <cstdlib> 
```

当我`g++ cc.cpp`在终端中运行时，终端显示：

```
/tmp/ccsiISvK.o: In function `initGL()':
cc.cpp:(.text+0xe): undefined reference to `glMatrixMode'
cc.cpp:(.text+0x13): undefined reference to `glLoadIdentity'
cc.cpp:(.text+0x49): undefined reference to `glOrtho'
cc.cpp:(.text+0x55): undefined reference to `glMatrixMode'
cc.cpp:(.text+0x5a): undefined reference to `glLoadIdentity'
cc.cpp:(.text+0x82): undefined reference to `glClearColor'
cc.cpp:(.text+0x87): undefined reference to `glGetError'
cc.cpp:(.text+0x9b): undefined reference to `gluErrorString'
/tmp/ccsiISvK.o: In function `render()':
cc.cpp:(.text+0x124): undefined reference to `glClear'
cc.cpp:(.text+0x130): undefined reference to `glBegin'
cc.cpp:(.text+0x14f): undefined reference to `glColor3f'
cc.cpp:(.text+0x18b): undefined reference to `glVertex2f'
cc.cpp:(.text+0x1b0): undefined reference to `glEnd'
cc.cpp:(.text+0x1b5): undefined reference to `glutSwapBuffers'
/tmp/ccsiISvK.o: In function `runMainLoop(int)':
cc.cpp:(.text+0x1f7): undefined reference to `glutTimerFunc'
/tmp/ccsiISvK.o: In function `main':
cc.cpp:(.text+0x214): undefined reference to `glutInit'
cc.cpp:(.text+0x228): undefined reference to `glutInitContextVersion'
cc.cpp:(.text+0x234): undefined reference to `glutInitDisplayMode'
cc.cpp:(.text+0x248): undefined reference to `glutInitWindowSize'
cc.cpp:(.text+0x254): undefined reference to `glutCreateWindow'
cc.cpp:(.text+0x27f): undefined reference to `glutDisplayFunc'
cc.cpp:(.text+0x29b): undefined reference to `glutTimerFunc'
cc.cpp:(.text+0x2a0): undefined reference to `glutMainLoop'
collect2: ld returned 1 exit status 
```

任何人都可以为此提供解决方案吗？我会很感激的！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T06:17:00.657

您需要添加标志以包含带有选项`g++`的必要库。`-l`它可能类似于[此处](https://stackoverflow.com/questions/2568067/using-gcc-mingw-to-compile-opengl-on-windows)或[此处的显示方式](http://www.opengl.org/discussion_boards/showthread.php/157014-Compiling-with-gcc)

尝试这个 -

`g++ cc.cpp -lGL -lglut`

# jquery - 通过多个 DIV 元素访问每个选定的选项值

> ID：13450251
> 
> 赞同：0
> 
> 时间：2012-11-19T08:46:14.387
> 
> 标签：jquery, html

让我们这么说

*   我有多个 DIV 元素。
    我不知道我有多少 DIV，
    因为它们是由其他应用程序生成的。

*   无论如何，由于它是纯 HTML 元素，
    我想使用 Jquery 遍历每个 DIV，
    因为我想访问每个 DIV 内部的每个下拉列表。

.

```
/// I want to iterate each and every Divs 
/// by using loop
for(int i=0; i<DIVs.Count; i++){       

/// I want to access each and every html dropdowns
/// I want to get each and every selected dropdown value
for(int j=0; j<DIVs[i].DropdownList.Count; j++){
    alert(DIVs[i].DropdownList[j].SelectedValue);
}

/// Then finally , I want to get hidden productID
alert(Divs[i].HiddenProductID);
} 
```

那么任何人都可以给我建议如何将我的上层算法更改为 jquery 代码。

我还将我的 html 上传到[jsfiddle 站点](http://jsfiddle.net/myatthu1986/5qbEM/9/)，以便每个人都可以看到。

每一个建议都将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T08:53:41.883

你可以试试这段代码：

```
$("div._Individual_Product_").each(function (index,elem) {    
    $("select",$(this)).each(function(){
        alert($(this).val());    
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T09:00:05.790

如果您需要获取两个分隔的值和 ID 数组，您可以简单地使用以下代码：

```
var values = [];
$(".dynamicDropDownList").each(function (index) {
    var selectValue = this.value;
    values.push(selectValue);
    console.log(index + " - " + selectValue);
});
var productIds = [];
$("._class_hidden_Product_ID_").each(function (index) {
    var productId = this.value;
    productIds.push(productId);
    console.log("Product " + index + "'s id is " + productId);
}); 
```

如果你需要他们配对，你可以使用这样的东西：

```
var products = [];
$("._Individual_Product_").each(function () {
    var $this = $(this);
    products.push({
        selectValue: $this.find(".dynamicDropDownList").val(),
        productId: $this.find("._class_hidden_Product_ID_").val()
    });
}); 
```

此外，您实际上可以知道那里有多少个 div。任何 jQuery 对象都有`length`属性，它告诉你匹配的 DOM 元素的确切数量。因此`$("._Individual_Product_").length`将返回所需的数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T09:28:32.580

这是您在 jQuery 中的代码

```
// 1\. Iterate through every DIVs
$("div._Individual_Product_").each(function() {

    // 2\. Iterate through every dropdownlists inside each DIVs
    $("select",$(this)).each(function(){

          // 3\. Get each and every selected dropdown value
          alert($(this).val()); 
    });
}); 
```

您还可以像这样获取 DIV 和下拉列表计数：

```
var div = [];
var dropdownList = [];

// 1\. Iterate through every DIVs
$("div._Individual_Product_").each(function() {

    div.push($(this));

    // 2\. Iterate through every dropdownlists inside each DIVs
    $("select",$(this)).each(function(){

          dropdownList.push($(this).val());
    });

    // 3\. Count dropdownlists inside each DIVs
    alert('DropdownList Count - ' + dropdownList.length);
    dropdownList = [];
});

alert('DIVs Count - ' + div.length); 
```

希望这可以帮助！

# perl - 无法通过 perl 中的套接字 /opt/lampp/var/mysql/mysql.sock 连接

> ID：13450254
> 
> 赞同：0
> 
> 时间：2012-11-19T08:46:33.373
> 
> 标签：perl, perl-module

我无法连接到数据库。下面是不起作用的 Perl 脚本：

```
use DBI;   

my $dbh = DBI->connect(
    'dbi:mysql:orders;mysql_socket:/opt/lampp/var/mysql/mysql.sock',
    $username,
    $password,
    { RaiseError => 0, AutoCommit => 0 },
)
  or die $DBI::errstr; 
```

通常当我尝试`mysql.sock`使用 open 函数打开文件时会出现错误但我无法打开它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T09:09:27.423

您应该使用 '=' 作为 dsn 中的额外参数，就这样吧：

```
'dbi:mysql:orders;mysql_socket=/opt/lampp/var/mysql/mysql.sock', 
```

# java - 在 Liferay EE 中部署 Orbeon 表单 PE 时的类路径引用问题

> ID：13450256
> 
> 赞同：2
> 
> 时间：2012-11-19T08:46:34.200
> 
> 标签：java, deployment, liferay, orbeon

我按照[安装手册](http://wiki.orbeon.com/forms/doc/developer-guide/admin/deployment-portlet)在 Liferay EE 6.1.2 (JBoss AS 7.1) 中部署 Orbeon PE 试用版。在部署文件夹中删除 orbeon.war 后，出现以下参考错误。

```
08:31:07,443 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-2) Class Path entry avalon-framework-4.1.5.jar in "/D:/liferay-portal-jboss-6.1.20-ee-ga2-20120731110418084/liferay-portal-6.1.20-ee-ga2/jboss-7.1.1/standalone/deployments/orbeon.war/WEB-INF/lib/barcode4j-1.0.jar"  does not point to a valid jar for a Class-Path reference. 
```

部署过程失败。有人遇到过这样的问题吗？

```
08:31:09,248 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS015870: Deploy of deployment "orbeon.war" was rolled back with failure message {"JBAS014771: Services with missing/unavailable dependencies" => ["jboss.naming.context.java.module.orbeon.orbeon.env.jdbc.dbjboss.naming.context.java.my-databaseMissing[jboss.naming.context.java.module.orbeon.orbeon.env.jdbc.dbjboss.naming.context.java.my-database]"]}
08:31:09,393 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-8) JBAS015877: Stopped deployment orbeon.war in 144ms
08:31:09,394 INFO  [org.jboss.as.controller] (DeploymentScanner-threads - 2) JBAS014774: Service status report
JBAS014775:    New missing/unsatisfied dependencies:
  service jboss.naming.context.java.my-database (missing) dependents: [service jboss.naming.context.java.module.orbeon.orbeon.env.jdbc.db]

08:31:09,399 ERROR [org.jboss.as.server.deployment.scanner] (DeploymentScanner-threads - 1) {"JBAS014653: Composite operation failed and was rolled back. Steps that failed:" => {"Operation step-2" => {"JBAS014771: Services with missing/unavailable dependencies" => ["jboss.naming.context.java.module.orbeon.orbeon.env.jdbc.dbjboss.naming.context.java.my-databaseMissing[jboss.naming.context.java.module.orbeon.orbeon.env.jdbc.dbjboss.naming.context.java.my-database]"]}}} 
```

# c# - 并行模式，设置 ThreadPool.SetMinThreads 和 MaxDegreeOfParallelism 的替代方法

> ID：13450258
> 
> 赞同：0
> 
> 时间：2012-11-19T08:46:37.530
> 
> 标签：c#, vb.net, asynchronous, parallel-processing

我经常发现自己在运行并行网络请求，并且发现网络连接可以处理的并行请求数量是最大的，所以设置 MaxDegreeOfParallelism 并运行一个 parallel.for 循环，例如：

```
Dim maxThreads As Integer = 20 'pre tested optimum amount that wont overload network
Parallel.For(0, items.Count, New ParallelOptions With {.MaxDegreeOfParallelism = maxThreads}, Sub(i)
    'network stuff
    'eg Dim source As String = New Net.WebClient.DownloadString(items(i)) etc
    End Sub 
```

由于网络任务完成缓慢，线程数总是上升到最大设置，因此通过将线程池最小线程设置为相同数量（maxThreads）来启动它是有意义的。

这很好用，很好读，但我想知道是否没有更好的实现，或者这种方法是否存在一些固有缺陷。

.Net 4.5 引入了一些很棒的异步支持，但不幸的是，我仅限于 .net 4。任何指针表示赞赏，是的，这是 vb.net，但 c# 的答案很好。

# ios - MKNetworkKit 和 AFNetworking 有什么区别？

> ID：13450259
> 
> 赞同：23
> 
> 时间：2012-11-19T08:46:39.117
> 
> 标签：ios, macos, networking, afnetworking, mknetworkkit

我正在对这两个网络框架进行一些测试：MKNetworkKit 和 AFNetworking。而且我看到这两个库之间的差异并不容易。两者之间的主要区别是什么？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-19T08:46:39.117

`MKNetworkKit`：

*   包括在磁盘上的缓存。
*   冻结操作（离线请求可以排队等待网络恢复时执行）。
*   更轻便。

`AFNetworking`：

*   更多的用户和贡献者。
*   更好的文档（更清晰、更易于访问）。
*   `UIImageView+AFNetworking`用于延迟图像加载（在 MKNK 中可能，但更痛苦）。
*   标准（类似 Apple）的编码风格。
*   更好地利用 SDK 对象（符合 NSCoding）。
*   种类繁多的额外功能和扩展（例如网络可达性、流式多部分表单请求、后台支持等）。
*   有一个漂亮的项目标志。;-)

还要别的吗？

# paypal - Paypal 定期付款 ipn

> ID：13450261
> 
> 赞同：21
> 
> 时间：2012-11-19T08:46:48.960
> 
> 标签：paypal, payment, paypal-ipn, recurring

我对贝宝的定期付款有一个小问题。

示例：我开始定期付款，在 1 年内每月支付 20 美元。

贝宝是否会为这种定期付款的每个月发送一个 IPN？

谢谢。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-19T18:05:15.400

是的。以下是用于定期付款的 IPN 的示例。

```
period_type = Regular
outstanding_balance = 0.00
next_payment_date = 02:00:00 Dec 19, 2012 PST
protection_eligibility = Ineligible
payment_cycle = Monthly
tax = 0.00
payer_id = E7BTGVXBFSUAU
payment_date = 05:38:59 Nov 19, 2012 PST
payment_status = Completed
product_name = ElderHelpers.org
charset = windows-1252
recurring_payment_id = I-PFSGNJYBXBH5
first_name = Drew
mc_fee = 0.65
notify_version = 3.7
amount_per_cycle = 12.00
payer_status = verified
currency_code = USD
business = sandbo_1215254764_biz@angelleye.com
verify_sign = AUivUYns031-2-dNgZdEkr51EzGcAF5d4-6xZ2neOdkff7tDdERk1R9k
payer_email = sandbo_1204199080_biz@angelleye.com
initial_payment_amount = 0.00
profile_status = Active
amount = 12.00
txn_id = 3GN39710BA809992V
payment_type = instant
payer_business_name = Drew Angell's Test Store
last_name = Angell
receiver_email = sandbo_1215254764_biz@angelleye.com
payment_fee = 0.65
receiver_id = ATSCG2QMC9KAU
txn_type = recurring_payment
mc_currency = USD
residence_country = US
test_ipn = 1
transaction_subject = ElderHelpers.org
payment_gross = 12.00
shipping = 0.00
product_type = 1
time_created = 21:19:38 Dec 19, 2011 PST
ipn_track_id = b6f7576ff1e68 
```

# mysql - 在数据库中输入阿拉伯字符

> ID：13450275
> 
> 赞同：1
> 
> 时间：2012-11-19T08:47:52.650
> 
> 标签：mysql, database, jsf-2, utf-8, arabic

在为我的网站创建数据库时，我使用了以下语法。

```
CREATE DATABASE myDatabase DEFAULT CHARACTER SET utf8 DEFAULT COLLATE utf8_general_ci; 
```

现在，当我的客户输入**阿拉伯语字符**时，他看到了一些奇怪的输出。我正在为网页使用 JSF 2.0。

我需要进行哪些更改才能在我的网站中输入阿拉伯语或任何字符并将其存储在数据库中。

## 编辑 1

当我打印数据时，我看到输出为`Ø´Ø³Ù?Ø¨Ø´Ø³Ù? Ø¨Ø´Ø³Ù?Ø¨ Ø´Ø³Ù?Ø¨`

## 笔记：

我正在使用使用 JSF 2.0 的 Web 应用程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T08:56:43.170

您应该在插入/读取数据之前为连接设置 UTF8 字符集 -

```
SET NAMES utf8;
INSERT INTO table VALUES(...);

SELECT * FROM table; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T09:09:06.360

插入数据值时使用 N''，这表示后面的字符串是 Unicode（N 实际上代表国家语言字符集）

```
INSERT INTO table VALUES(N'ArabicField'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-13T21:04:04.753

我认为你必须使用`cp1256_general_ci`而不是`utf8_general_ci`，并且不要忘记将数据库和所有可能包含阿拉伯语单词的字段的排序规则设置为`utf8_general_ci`。

# spring - Spring通过注释将值注入到实现的spring类中

> ID：13450278
> 
> 赞同：0
> 
> 时间：2012-11-19T08:48:05.013
> 
> 标签：spring, spring-mvc

我有一个问题如何将值注入到由spring类实现的我不想使用xml来定义像这篇文章中那样的值

```
<bean id="mailSender" class="org.springframework.mail.javamail.JavaMailSenderImpl">
<property name="host" value="your.smtphost.com"/>
<property name="port" value="25"/>
<property name="username" value="yourusername"/>
<property name="password" value="yourpassword"/>
<property name="javaMailProperties">
    <props>
        <!-- Use SMTP-AUTH to authenticate to SMTP server -->
        <prop key="mail.smtp.auth">true</prop>
        <!-- Use TLS to encrypt communication with SMTP server -->
        <prop key="mail.smtp.starttls.enable">true</prop>
    </props>
</property> 
```

我想通过注释来做到这一点。我知道有扩展该类的方法，但也许还有另一种方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T08:53:07.227

您可以为此使用注释驱动的弹簧配置，如下所示

```
@Configuration
class SpringConfiguration {
    @Bean
    public JavaMailSenderImpl mailSender(){
        JavaMailSenderImpl object = new JavaMailSenderImpl();
        object.setXXX(ABC);
        .....
        return object;
    } 
} 
```

# java - 将字符串变量分解为多行Android

> ID：13450279
> 
> 赞同：-1
> 
> 时间：2012-11-19T08:48:05.960
> 
> 标签：java, string, line-breaks

我有一个名为地址的变量。`String address=36c,Bandaranayaka Road,Colombo07` 实际上我想要的是，在多行中打印变量内容。

前任：

```
36c,
Bandaranayaka Road,
Colombo07 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T08:50:52.340

你可以使用`subString()`方法

这会帮助你。

# mongodb - 在 MongoDB 中收集丢弃后的 getLastError

> ID：13450284
> 
> 赞同：1
> 
> 时间：2012-11-19T08:48:47.017
> 
> 标签：mongodb, mongo-java

通过 mongo-java-driver，我调用`DBCollection``drop() 方法来删​​除集合。

如果我想确保该集合确实已被删除，我可以`getLastError(WriteConcern concern)`在之后使用`drop()`吗？

*Drop*是MongoDB中的一种*写法？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T19:31:57.470

`getLastError`当你调用它之后的输出是什么`drop()`？如果它不起作用，您可以随时检查`count()`调用集合返回`0`。

# php - 是否可以从飞镖访问 php 变量？

> ID：13450285
> 
> 赞同：1
> 
> 时间：2012-11-19T08:48:48.003
> 
> 标签：php, html, facebook, facebook-php-sdk, dart

编辑：PHP 和 Dart 脚本将在客户端运行。

我将在我的页面加载时运行一个 php 脚本。然后我想访问 dart 范围内的 php 函数。有可能还是我应该将所有东西都迁移到飞镖？

更加具体;

*   我正在尝试开发一个 facebook 应用程序（使用 facebook php sdk），
*   我已经写了几篇“Hello, World!”。网络应用程序，
*   这就是我现在获得的所有经验。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T09:07:04.623

**没有**。Dart 和 PHP 之间没有干净的通信方式。使用客户端 Dart，您会遇到客户端脚本与服务器端脚本的正常问题。使用服务器端 Dart，据我所知（用谷歌研究），两者之间没有互操作性。

# 客户端与服务器端脚本

在 Web 开发中，有两大类编程语言：服务器端和客户端。服务器端语言在 Web 服务器上运行，并确定 Web 服务器发送的响应以回复 HTTP 请求。客户端语言在客户端（读取、浏览器）上运行并在浏览器中操作 DOM 等。

从客户端代码调用服务器端代码就像从没有 ssh 的计算机上在您朋友的计算机上运行命令一样。从客户端语言 ( `function my_client_func() { my_server_func(); }`) 直接调用服务器端函数是不可能的。

## 解决方法

有多种方法可以实现此功能。两个是 AJAX 和 WebSockets。

[AJAX](https://en.wikipedia.org/wiki/Ajax_(programming))允许您异步发出 HTTP 请求并在数据到达时对其进行操作。您可以创建一种机制，通过特殊网页或类似的方式从服务器检索数据。您可以创建一个名为的页面并使用诸如等（）`facebook.com/apps/yourapp/function.php`之类的参数调用它。`name=myFuncitonName&var1=something&var2=else``function.php?name=myFunction...`

[WebSockets](http://en.wikipedia.org/wiki/WebSocket)允许您创建全双工 TCP 样式。您可以创建一个 PHP WebSocket 服务器，该服务器将根据收到的 WebSocket 消息调用函数，但这可能会造成安全漏洞。

# 服务器端语言互操作性

一些服务器端语言提供与其他此类语言互操作的机制。Dart 似乎没有提供调用 PHP 代码的机制。

## 解决方法

Dart 确实提供了一种以 Process 类的形式运行进程的机制。您可以使用 Process 类来调用 PHP 解释器。

Dart 确实提供了与 C 的互操作性。使用[Native Extensions](http://www.dartlang.org/articles/native-extensions-for-standalone-dart-vm/)，Dart 代码可以调用 C 函数。基于[这个](https://stackoverflow.com/questions/1902409/calling-php-from-c)问题，C代码可以调用PHP函数。

# c# - 如何在脚本组件中访问 ssis 包变量

> ID：13450289
> 
> 赞同：43
> 
> 时间：2012-11-19T08:49:04.290
> 
> 标签：c#, sql, database, ssis, bids

如何访问我在数据流 -> 脚本组件 -> 我的 C# 脚本和我的 SSIS 包中使用的 C# 代码中的变量？

我试过 which 也不起作用

```
IDTSVariables100 varCollection = null;
this.VariableDispenser.LockForRead("User::FilePath");
string XlsFile;

XlsFile = varCollection["User::FilePath"].Value.ToString(); 
```

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-11-19T17:51:29.810

访问（数据流任务的）脚本**组件中的包变量与访问脚本****任务**中的包变量不同。对于脚本组件，您首先需要打开[脚本转换编辑器](http://msdn.microsoft.com/en-us/library/ms181225%28v=sql.105%29.aspx)（右键单击组件并选择“编辑...”）。在“脚本”选项卡的“自定义属性”部分，您可以输入（或选择）您希望在只读或读写基础上提供给脚本的属性： ![脚本转换编辑器属性页面的屏幕截图](../Images/2ab9e7404234d2a62e46016eb6e44b3a.png) 然后，在脚本本身中，变量将可用作变量对象的强类型属性：

```
// Modify as necessary
public override void PreExecute()
{
    base.PreExecute();
    string thePath = Variables.FilePath;
    // Do something ...
}

public override void PostExecute()
{
    base.PostExecute();
    string theNewValue = "";
    // Do something to figure out the new value...
    Variables.FilePath = theNewValue;
}

public override void Input0_ProcessInputRow(Input0Buffer Row)
{
    string thePath = Variables.FilePath;
    // Do whatever needs doing here ...
} 
```

一个重要的警告：如果您需要**写入**包变量，您只能在 PostExecute() 方法中执行此操作。

关于代码片段：

```
IDTSVariables100 varCollection = null;
this.VariableDispenser.LockForRead("User::FilePath");
string XlsFile;

XlsFile = varCollection["User::FilePath"].Value.ToString(); 
```

`varCollection`初始化为 null 并且从不设置为有效值。因此，**任何**取消引用它的尝试都会失败。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2018-02-21T11:23:59.453

首先在脚本任务编辑器的 ReadOnlyVariables 中列出要在脚本任务中使用的变量，然后编辑脚本

在脚本代码中使用您的 ReadOnlyVariables

```
String codeVariable = Dts.Variables["User::VariableNameinSSIS"].Value.ToString(); 
```

这行代码会将 ssis 包变量视为字符串。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-02-20T22:43:03.017

除了我记得声明 ReadOnlyVariables 之外，我遇到了与 OP 相同的问题。

在玩了一些之后，我发现问题出在我的变量名上。SSIS 中的“File_Path”不知何故被转换为“FilePath”。C# 不能很好地处理变量名中的下划线。

所以要访问变量，我输入

```
string fp = Variables.FilePath; 
```

在脚本组件的 PreExecute() 方法中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-19T11:12:52.413

*   在变量脚本的前端属性页面，修改ReadOnlyVariables（或ReadWriteVariables）属性并选择您感兴趣的变量。这将启用脚本任务中的选定变量
*   在代码中，您现在可以将变量读取为

    字符串 myString = Variables.MyVariableName.ToString();

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-04T14:52:12.900

强类型的 var 似乎不可用，我必须执行以下操作才能访问它们：

`String MyVar = Dts.Variables["MyVarName"].Value.ToString();`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-29T10:42:59.870

这应该有效：

```
IDTSVariables100 vars = null;
VariableDispenser.LockForRead("System::TaskName");
VariableDispenser.GetVariables(vars);
string TaskName = vars["System::TaskName"].Value.ToString();
vars.Unlock(); 
```

您的初始代码缺少对 GetVariables() 方法的调用。

# objective-c - 如何复制 UIRefreshControl 的“口香糖”外观？

> ID：13450290
> 
> 赞同：4
> 
> 时间：2012-11-19T08:49:07.767
> 
> 标签：objective-c, macos, cocoa, ios6, core-graphics

在 iOS 6 的 Mail 应用程序中，有一个“释放刷新”动画，看起来就像一个口香糖或橡胶被拉然后释放。有人知道如何使用 Core Graphics 复制此控件的绘图吗？

背景是我想在 Mac 上复制这种行为，而`UIRefreshControl`Mountain Lion 中没有任何等价物。

注意：这是[iOS 6 的延续 - 如何获得“发布以刷新”动画？像在邮件中？](https://stackoverflow.com/questions/12515236/ios-6-how-can-i-get-the-release-to-refresh-animation-thing-like-in-mail)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T13:34:26.640

目前，我还没有为 Mountain Lion 找到任何 UIRefreshControl（或等效项）的实现。但是，iOS 4 和 iOS 5 有等效控件的实现（因为这些系统没有 UIRefreshControl）。因此，您可以尝试将这些代码移植到 OSX。

我在 github 上找到了 2 个项目：

[https://github.com/ishkawa/ISRefreshControl](https://github.com/ishkawa/ISRefreshControl)

[https://github.com/dbsGen/SlimeRefresh](https://github.com/dbsGen/SlimeRefresh)

# macros - container_of 宏的定义

> ID：13450292
> 
> 赞同：5
> 
> 时间：2012-11-19T08:49:16.550
> 
> 标签：macros, linux-kernel, c-preprocessor

而不是将 container_of 定义为：

```
#define container_of(ptr, type, member) ({ \
            const typeof( ((type *)0)->member ) *__mptr = (ptr);
            (type *)( (char *)__mptr - offsetof(type,member) );}) 
```

为什么这不能简单地工作：

```
#define container_of(ptr, type, member) ({ \
                    (type *)( (char *)(ptr) - offsetof(type,member) );}) 
```

定义中第一行的用途是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T18:03:59.223

它增加了一定程度的类型安全性。使用您的第二个版本，我可以为 ptr 传递任何内容，并且可以正常编译。在内核版本中，如果您传入一个`ptr`与`type.member`.

# java - 从网页中的 hashMap 检索数据

> ID：13450296
> 
> 赞同：1
> 
> 时间：2012-11-19T08:49:53.663
> 
> 标签：java, jsf, datatable

在我的托管 bean 中，我有一个 hashmap：`HashMap > reqLeafData;

因此，对于每个 ReqLeaf，我都会创建一个字符串列表来存储一些信息：

```
 ReqLeaf reqLeaf=new ReqLeaf(pReqWrapper,(ReqFamily) requirement.getData());
                System.out.println(ReqWrapper.getCatString(reqLeaf.getCat()));
                testReqsList.add(reqLeaf);
                reqInfolist.add(ReqWrapper.getCatString(reqLeaf.getCat()));
                reqInfolist.add(ReqWrapper.getStateString(reqLeaf.getStateFromModel())); 
                reqInfolist.add(ReqWrapper.getComplexString(reqLeaf.getComplexeFromModel()));
                reqLeafData.put(reqLeaf,reqInfolist); 
```

所以在我的 ReqLeaf 数据表中我想检索信息所以这里是代码：

```
<p:dataTable id="testReqDT" var="testReq" value="#{projectTestManagementMB.testReqsList}">  

                                   <p:column headerText="Id">  
                                      <h:outputText value="#{testReq.idBdd}" />  
                                   </p:column>  

                                   <p:column headerText="Name">  
                                      <h:outputText value="#{testReq.longName}"  />  
                                   </p:column>  

                                   <p:column headerText="Category">  
                                      <h:outputText value="#{projectTestManagementMB.reqLeafData(testReq)[0]}"  />  
                                   </p:column>  

` 
```

但我总是得到错误，因为这个值写得不正确：

```
<h:outputText value="#{projectTestManagementMB.reqLeafData(testReq)[0]}"  /> 
```

reqLeafData 被视为一种方法，而不是类似的属性：

```
Grave: javax.el.ELException: /manageProjectTestsReqPage.xhtml @1152,119 value="#{projectTestManagementMB.reqLeafData(testReq)[0]}": Unable to find method [reqLeafData] with [1] parameters 
```

那么如何使用 ReqLeaf 作为键从 reqLeafData 中检索值？

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T08:59:25.157

我认为出现这个问题是因为您没有为地图编写 getter 和 setter。您应该编写它们，然后使用以下方法从地图中检索数据：

```
#{projectTestManagementMB.reqLeafData[testReq]} 
```

要访问地图内的列表项，您可以使用以下命令：

```
#{(projectTestManagementMB.reqLeafData[testReq])[0]} 
```

最后一个表达式将从列表中获取第一项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T09:11:46.337

这是解决方案：

`#{projectTestManagementMB.reqLeafData[testReq][0]}`

# python - Python中的列表元素换行

> ID：13450300
> 
> 赞同：0
> 
> 时间：2012-11-19T08:50:04.653
> 
> 标签：python, django, list

如何在 Django 模板中显示带有换行符的列表中的所有元素？例如，对于一个列表， `ls = ['bin', 'boot', 'data', 'data2']`我想以格式显示元素

```
bin
boot
data
data2 
```

我努力了：

```
'\n'.join(ls) 
```

这将返回带有空格的每个单词：

```
b i n b o o t d a t a d a t a 2 
```

我的views.py中的相关代码：

```
 result1 = subprocess.Popen(['ls', '/home/zurelsoft/R'], stdout=subprocess.PIPE).communicate()[0]
        result = ''.join(result1)
        return render_to_response('thanks.html', {'res':result, 'res1':command}, context_instance=RequestContext(request)) 
```

模板的相应部分：

```
<td>{{ res }} </td> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T08:53:14.987

修改您的视图以使用该`splitlines()`函数将输出拆分为行列表：

```
def myview(request):
    result = subprocess.Popen(['ls', '/home/zurelsoft/R'], stdout=subprocess.PIPE).communicate()[0].splitlines()
    return render_to_response('thanks.html', {'res':result, 'res1':command}, context_instance=RequestContext(request)) 
```

然后使用模板中的[连接](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#join)过滤器将列表中的每个元素与 HTML 换行标记分开`<br />`：

```
<td>{{ res|join:"<br/>" }}</td> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T08:52:21.063

您可以使用 join `newline (\n)`： -

```
'\n'.join(ls);  // This will only work for list of strings. 
```

或者简单地使用 a`for loop`来遍历您的列表，并打印每个元素：-

```
for elem in ls: 
    print elem 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-19T09:22:25.280

如果 res 是一个列表，那么您可以遍历该列表并在其自己的标签中输出每个元素。

```
{% for r in res %}
  <td>{{ r }}</td>
{% endfor %} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-19T08:52:06.633

```
'\n'.join(ls) 
```

`"\n"`是一个特殊字符，意思是“换行符”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-19T08:55:53.800

```
>>> out=reduce(lambda x, y: x+y+'\n', ls, "" )
>>> print out
a
b
c
d
e 
```

`join`调用 reduce 来累积结果。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-19T08:57:18.637

尝试：

```
'\n'.join(ls) 
```

它给出了一个列表，其中的元素用“下一行”分隔。在您的第一个示例中，您尝试了 '' 这是一个空符号。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-19T08:59:04.183

```
for i in ls:
    print "%s"%i 
```

这将为您提供所需的输出。

# apache - 检查 URL 并使用 htaccess 停止处理

> ID：13450303
> 
> 赞同：0
> 
> 时间：2012-11-19T08:50:32.380
> 
> 标签：apache, mod-rewrite

我想使用 htaccess 检查 URL。开发人员可能想要运行特殊文件 - specialfile.php。我使用 htaccess：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} /specialfile\.php$
RewriteRule .* [L]   #don't change adress
RewriteRule ^$ public/index.html [NC,L]
RewriteRule (.*) public/$1 [NC,L] 
```

我的想法是：如果 rewriteCond %{REQUEST_URI} !/specialfile.php$ true 比 htaccess 应该使用 RewriteRule .* [L] - 这应该意味着 specialfile.php 将运行，这一切。但它不起作用，因为它运行下一条规则：RewriteRule (.*) public/$1 [NC,L]。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T10:15:08.837

我认为您使用`RewriteCond`不正确。这些条件只影响接下来的条件`RewriteRule`。

查看[Apache 主页上的示例](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewritecond)。由于您的第二个`RewriteRule`已评估，我认为您的条件不正确。要获得有关重写的更多信息，您应该提高日志级别。这[也记录在这里](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewritelog)。

你的第二条规则`^$`只匹配一个空请求顺便说一句。这就是为什么它可能无法按您期望的那样工作。

# xml - PHP SimpleXML xpath：包含和定位

> ID：13450304
> 
> 赞同：5
> 
> 时间：2012-11-19T08:50:33.067
> 
> 标签：xml, xpath, position, contains

这是我的PHP代码：

```
$xml = new SimpleXMLElement('data.xml', null, true);
$q = $xml->xpath('post/misc[contains(tags,"animal")][position() <= 2]'); 
```

这是 XML 文件：

```
<?xml version="1.0" encoding="UTF-8" ?>
<posts>
    <post>
        <id>1</id>
        <misc>
            <tags>animal,tiger</tags>
            <prio>0.5</prio>
        </misc>
    </post>
    <post>
        <id>2</id>
        <misc>
            <tags>plant,coconut</tags>
            <prio>0.5</prio>
        </misc>
    </post>
    <post>
        <id>3</id>
        <misc>
            <tags>animal,lion</tags>
            <prio>0.5</prio>
        </misc>
    </post>
    <post>
        <id>4</id>
        <misc>
            <tags>animal,monkey</tags>
            <prio>0.5</prio>
        </misc>
    </post>
</posts> 
```

如何获得标签包含 'animal' 的前 2 个元素？

xpath 结果应该是`post:id=1`and `post:id=3`，但可以看到它返回包含 的所有元素`animal`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T10:10:25.647

将主要的 XPath 部分放在`()`括号中，即：

```
(//post/misc[contains(tags,"animal")])[position() <= 2] 
```

# iphone - 如何在 iOS 中下载多个背景视频？

> ID：13450310
> 
> 赞同：2
> 
> 时间：2012-11-19T08:50:47.497
> 
> 标签：iphone, ios, download, background-process

我有一个 iOS 应用程序，我需要每周下载 60-70 多个视频，每个视频大小为 3-8MB。问题是，我如何下载这些视频？我将视频和网址列表存储在数据库中。

可能的解决方案：

使用,应用程序启动后立即`UIBackgroundTaskIdentifier`调用。`beginBackgroundTaskWithExpirationHandler`此任务将下载一个视频。
在`endBackgroundTask`我会将该特定视频标记为已下载。
这里的问题是，我可以开始多个`UIBackgroundTaskIdentifier`吗？我应该从哪里开始？在 AppDelegate 中？特定的控制器？如果我在特定控制器中启动它，`viewDidLoad()`如果应用程序退出会发生什么？

请指导我或提供替代解决方案。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T09:43:18.743

按`AFNetworking`原样使用`ASIHTTPRequest` 。`deprecated`

请参阅[AFNetworking 源](https://github.com/AFNetworking/AFNetworking)链接。

另请参阅[afnetworking-downloading-multiple-files](https://stackoverflow.com/questions/8409122/afnetworking-downloading-multiple-files)链接和[AFNetworking 是否有后台支持](https://stackoverflow.com/a/7881866/1106035)链接。

**编辑**：开始下载`AppDelegate`

检查[AFDownloadRequestOperation](https://github.com/steipete/AFDownloadRequestOperation)以获取可恢复下载。

[使用 AFDownloadRequestOperation](https://stackoverflow.com/questions/12173744/afnetworking-pause-resume-downloading-big-files)链接参考afnetworking-pause-resume-downloading-big-files。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T09:01:32.903

您可以在后台使用[ASIHTTPRequest](http://allseeing-i.com/ASIHTTPRequest/How-to-use)下载多个文件。[请参阅此处](http://allseeing-i.com/ASIHTTPRequest/How-to-use)的文档。

请注意，`ASIHTTPRequest`它不再起作用，因此您可以使用`AFNetworking`.

> `AFNetworking`是一个令人愉快的 iOS 和 Mac OS `. It's built on top of`NSURLConnection `,`NSOperation `, and other familiar`Foundation 技术的网络库。它具有模块化架构，具有精心设计、功能丰富的 API，使用起来很愉快。

[在这里](https://github.com/AFNetworking/AFNetworking)找到 SDK 。

# ios - 使用我自己的委托

> ID：13450313
> 
> 赞同：1
> 
> 时间：2012-11-19T08:50:54.987
> 
> 标签：ios, delegates

我在声明自己的代表时遇到问题。嗯......那不完全正确：我已经声明了它，当我构建项目时，编译器没有报告任何问题。我是这样声明的：

我制作了一个文件（enviarDatos.h）来声明协议：

```
@protocol enviarDatos <NSObject>
    - (void)addItemViewController:(NSMutableArray *)item;
@end 
```

在 Vista2.h (ViewController) 文件中，我导入了文件 enviarDatos.h 并声明了一个属性：

```
@property (nonatomic, weak) id <enviarDatos> delegare; 
```

在 Vista2.m (ViewController) 文件中，我使用协议方法：

```
@interface ViewController : UIViewController <enviarDatos> { 
```

最后，在 ViewController.m 文件中，我实现了 delegates 方法：

```
- (void)addItemViewController:(NSMutableArray *)ar {
   origen = ar; 
} 
```

有人看出什么不对了吗？最后一个函数的代码永远不会执行。

谢谢你的帮助。

编辑：

我需要的是从 Vista2 更改 ViewController 中的数组（另一个视图控制器）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T08:59:56.193

啊，看起来你在错误的地方声明了委托属性。

您应该在 enviarDatos.h 中声明属性委托。

```
@property (nonatomic, weak) id <enviarDatos> delegate; 
```

然后在 Vista2.m 中你会做这样的事情......

```
EnviarDatos *myObject = [[EnviarDatos alloc] init];
myObject.delegate = self; 
```

然后设置 EnviarDatos 对象并将 Vista2 对象分配为委托。

现在，在 EnviarDatos.m 中，您可以运行...

```
[self.delegate addItemViewController:someObjectArray]; 
```

然后这将在 Vista2 对象中运行该代码。

委托用于回调创建它们的对象（或其他一些对象）。如果您创建一个对象，然后想在其中运行一个方法，那么您将不需要委托。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T10:10:28.350

1.  你能说在什么条件下`addItemViewController`被调用？
2.  您似乎走在正确的轨道上，但是您确定将代表设置为

    ```
    [yourObject setDelegate: self]; 
    ```

3.  你试过调试它吗？`addItemViewController`如果您在那里设置断点，调试器会暂停吗？你能确认委托在方法中不为空吗？我可能会发布一些代码，但你似乎是对的，除了委托的分配，我认为你应该检查一下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T10:10:32.483

```
Then create delegate property in next view(child view) & set it to self in parent view while pushing or showing child view.

ParentView.m
1.Implement protocol methods
- (void)addItemViewController:(NSMutableArray *)ar
{
    origen = ar; 
}

2.While showing child view
ChildViewController *child = [[ChildViewController alloc] init];
child.delegate = self;
//present child view

ChildView.h
@property (nonatomic, weak) id <enviarDatos> delegare;

 ChildView.m
-(void) anyMethod
{
 if([self.delegate respondsToSelector:@selector(addItemViewController:)])
    {
        [self.delegate addItemViewController:mutableArray];
    }
} 
```

# backbone.js - 使用 file:// 触发和骨干路由器

> ID：13450314
> 
> 赞同：0
> 
> 时间：2012-11-19T08:50:57.010
> 
> 标签：backbone.js, trigger.io, backbone-routing

我正在使用触发器和主干，并尝试以编程方式导航到一个 url。这一切都是使用 file:// 协议发生的，因为一切都只在触发器 io 中运行。

虽然此手动导航不会触发与路线关联的功能。

我的路由器看起来像这样

```
var BARouter = Backbone.Router.extend({
    routes: {
        "users/sign_in": "userSignin",
        "users/sign_up": "userSignup",
        "": "catchAll"
    },

    userSignin: function(){

    },
    userSignup: function(){
        forge.logging.info("in user signup----");
    },
    catchAll: function(){

    }
});

var app_router = new BARouter();
BA.router = app_router;
Backbone.history.start({pushState: true}); 
```

我正在手动导航

```
BA.router.navigate(navigate_to("users/sign_up"), {trigger:true}); 
```

navigate_to 方法只是以“file://users/sign_up”的形式返回完整的 url。

但是控制台没有记录任何内容，并且执行正常进行。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T09:12:17.830

将 pushState 与文件 url 一起使用可能没有意义，我也不确定为什么需要 navigate_to 函数。

尝试将 pushState 设置为 false 并使用路线的字符串进行导航，即：

```
BA.router.navigate("users/sign_up", {trigger:true}); 
```

# batch-file - 用于将文件夹和文件按指定时间复制到多个目录的批处理文件

> ID：13450316
> 
> 赞同：2
> 
> 时间：2012-11-19T08:51:03.047
> 
> 标签：batch-file, command-prompt

一个批处理文件...

显示：输入站点名称：例如 web 或 test（路径应与它们相关联，即 c:/inetpub/test 或 c:/inetpub/website ）

输入您想要的份数.. 例如 20（最多 100 个）

功能：它将一个目录（作为指定测试或网站的名称）复制到另一个目录，其中包含子文件夹和文件（在多个文件夹中）按指定时间..文件夹名称为1..2..3..4..5。 .6......99..100（路径例如 c:/inetpub/wwwroot/test/1 和 /2 和 /3...c:/inetpub/wwwroot/test/100）

*并在指定时间将站点添加到 iis...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T22:12:22.727

关于主目录和命运目录的数据不足，如果需要，请进行一些更改：

```
@Echo OFF

:Name_menu
Set /P "Name=Enter the site name >>"
IF NOT DEFINED NAME (Set "Name=" & GOTO:Name_menu)

:Rounds_menu
Set /P "Rounds=Enter number of copies you want (Max 100)>>"
IF NOT DEFINED ROUNDS (Set "Rounds=Name" & GOTO:Rounds_menu)
If %ROUNDS% GTR 99    (Set "Rounds="     & GOTO:Rounds_menu)

:: I've assumed:
:: home dir is the script's dir
:: a folder with the name of the gived website name exists in home dir.
:: you want destiny dir to be "c:\inetpub\wwwroot\" 
FOR /L %%# in (0,1,%ROUNDS%) DO (
MKDIR "c:\inetpub\wwwroot\%NAME%\%%#" >NUL
XCOPY /E /Y ".\%NAME%\*" "c:\inetpub\wwwroot\%NAME%\%%#\"
)

:: About "And adding sites into iis as specified times ..."
:: I don't know IIS and what you want, sorry.

Pause&Exit 
```

# android - 如何将单选按钮文本更改为 int？

> ID：13450317
> 
> 赞同：0
> 
> 时间：2012-11-19T08:51:02.200
> 
> 标签：android, radio-button, radio-group

我有一个广播组，有 2 个选项，即男性和女性。我想将 RadioButton Male 作为 int number "1" 和 Female 作为 "2" 保存到我的数据库中。但我真的不知道如何实现它。如果有可能有人可以在这个问题上启发我吗？先感谢您。

```
 <RadioGroup
    android:id="@+id/radio_sex"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/email_address"
    android:layout_alignTop="@+id/textView5"
    android:orientation="vertical" >

    <RadioButton
        android:id="@+id/radio_male"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Male" />

    <RadioButton
        android:id="@+id/radio_female"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Female" />
</RadioGroup> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T08:57:07.073

```
RadioGroup rg = (RadioGroup) findViewById(R.id.radio_sex); 
int selected = rg.getCheckedRadioButtonId();
RadioButton rb = (RadioButton) findViewById(selected);
if(rb.getText().equals("Male"){
  //save to db number one
}else{
  //save number two
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T09:00:25.690

将 radioButton Male 的标签设置为 1，将 female 的标签设置为 2。

```
<RadioButton
    android:id="@+id/radio_male"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:tag="1"
    android:text="Male" />

 <RadioButton
    android:id="@+id/radio_female"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:tag="2"
    android:text="Female" /> 
```

然后在检查更改时，获取所选单选按钮的标签并将其转换为 int 然后保存到数据库。

```
 setOnCheckedChangeListener(new OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(RadioGroup group, int checkedId) {
            int value=Integer.parseInt(findViewById(checkedId).getTag().toString());
        }
    }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-19T09:09:19.357

```
<RadioGroup
    android:id="@+id/radio_sex"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/email_address"
    android:layout_alignTop="@+id/textView5"
    android:orientation="vertical" >

    <RadioButton
        android:id="@+id/radio_male"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Male" />

    <RadioButton
        android:id="@+id/radio_female"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Female" />
</RadioGroup> 
```

现在在您的 java 文件中检查任一单选按钮

```
int maleFemaleVar = ( radio_male.isChecked() ? 1 : 2 ); 
```

现在将这个新的 maleFemaleVar 保存到您的数据库

# java - 我的程序出现代码输出问题。更新了新的蒲式耳篮类

> ID：13450319
> 
> 赞同：0
> 
> 时间：2012-11-19T08:51:15.170
> 
> 标签：java, output

（现在使用更新的代码）在尝试从我的程序中获得正确的输出时遇到严重问题。我需要从这个程序中得到一个特定的输出，它应该是这个输出：

```
Rick...
This bushel basket has 0 apples in it.
This bushel basket has 33 apples in it.
This bushel basket has 29 apples in it.
This bushel basket has 0 apples in it.
Newt...
This bushel basket has 100 apples in it.
false
false
100
25
Michele...
true
false
false
false
false
true
Herman...
This bushel basket has 0 apples in it.
Jon...
This bushel basket has 125 apples in it.
Ron...
This bushel basket has 20 apples in it.
This bushel basket has 0 apples in it.
This bushel basket has 125 apples in it.
Gary...
This bushel basket has 0 apples in it. 
```

但是我收到了输出：

```
Rick...
This bushel basket has 0 apples in it.
This bushel basket has 33 apples in it.
This bushel basket has 29 apples in it.
This bushel basket has 0 apples in it.
Newt...
This bushel basket has 100 apples in it.
false
false
100(THIS IS WHERE THE BAD OUTPUT STARTS)
true
Michele...
true
false
false
false
false
true
Herman...
This bushel basket has -5 apples in it.
Jon...
This bushel basket has 300 apples in it.
Ron...
This bushel basket has 20 apples in it.
This bushel basket has -30 apples in it.
This bushel basket has 960 apples in it.
Gary...
This bushel basket has 0 apples in it. 
```

这是代码

```
 public class AppleOrchard
    {
        public static void main(String [] args)
        {
            System.out.println("Rick...");
            BushelBasket rick = new BushelBasket(0);
            rick.print();
            rick.pick(11);
            rick.pick(22);
            rick.print();
            rick.eat(4);
            rick.print();
            rick.spill();
            rick.print();

            System.out.println("Newt...");
            BushelBasket newt = new BushelBasket(100);
            newt.print();

            System.out.println( newt.isEmpty() );
            System.out.println( newt.isFull() );
            System.out.println( newt.getApples() );
            System.out.println( newt.roomLeftInBasket() );

            System.out.println("Michele...");
            BushelBasket michele = new BushelBasket(0);
            System.out.println( michele.isEmpty() );
            System.out.println( michele.isFull() );
            michele.pick(25);
            System.out.println( michele.isEmpty() );
            System.out.println( michele.isFull() );
            michele.pick(100);
            System.out.println( michele.isEmpty() );
            System.out.println( michele.isFull() );

            System.out.println("Herman...");
            BushelBasket herman = new BushelBasket(-5); // should default to 0
            herman.print();

            System.out.println("Jon...");
            BushelBasket jon = new BushelBasket(300); // should default to 125
            jon.print();

            System.out.println("Ron...");
            BushelBasket ron = new BushelBasket(20); // starts with 20
            ron.print();
            ron.eat(50); // can only eat down to zero apples
            ron.print(); // should see zero apples
            ron.eat(10); // back to 10
            ron.pick(1000); // basket can only hold 125 apples
            ron.print(); // should print 125

            System.out.println("Gary...");
            BushelBasket gary = new BushelBasket(0); // should default to 0
            gary.print();
        }
    }

    class BushelBasket
{
        int apples;

        BushelBasket(int apples) 
        {
    if (apples > 0 && apples < 125)
      this.apples = apples;
        }

        public void spill()
        {
            apples = 0;
        }

        public void pick(int x)
        {
            if (!isFull())
                apples = apples + x;
        }

        public void eat(int x)
        {
            if (!isEmpty())
                apples = apples - x;
        }

        public int getApples()
        {
            return apples;  
        }

        public void print()
        {
            int x = getApples();
            System.out.println("This bushel basket has " + x + " apples in it.");
        }

        public boolean isEmpty()
        {
            int emtpy = 0;

            if (apples <= emtpy)
            {   
                return true;
            }

            else 
            {
                return false;
            }
        }

        public boolean isFull()
        {
            int full = 125;

            if (apples >= full)
            {   
                return true;
            }

            else 
            {
                return false;
            }

        }

        public boolean roomLeftInBasket()
        {
            int full = 125;

            if (apples < full)
            {   
                return true;
            }

            else 
            {
                return false;
            }

        }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T08:55:38.443

*蝾螈*

你的代码有

```
System.out.println( newt.getApples() );                      // integer
System.out.println( newt.roomLeftInBasket() );               // boolean 
```

这不会`100 25`像您期望的那样返回，它会返回`100 true`

看起来您需要更改`roomLeftInBasket()`方法以返回篮子中剩余的金额，或更改代码使其看起来像：

```
if (newt.roomLeftInBasket())
{
  System.out.println( newt.fullBasket() - newt.getApples());
} 
```

但你必须创建`fullBasket()`方法

*赫尔曼*

在 Herman 的构造函数中，您给他的篮子 -5 个苹果。如果你不能有一个否定的篮子，你将不得不改变构造函数来检查这个。

*乔恩*

与 Herman 相同，但您需要检查创建的篮子的价值是否大于一个完整的篮子并相应地更改它。

*罗恩*

对于 Ron，您需要检查给 eat() 的值是否大于篮子中的值，并处理 Ron 尝试吃的苹果多于篮子中的苹果的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T09:02:32.160

改变构造函数

```
BushelBasket(int apples) 
{
   if (apples < 0 )
      this.apples = 0;
   else if(apples >125)
      this.apples = 125;
   else
      this.apples=apples;
} 
```

# javascript - 访问通用 javascript 对象属性

> ID：13450321
> 
> 赞同：0
> 
> 时间：2012-11-19T08:51:28.797
> 
> 标签：javascript, javascript-objects

我已经设置了这个 js 对象：

```
 var tableTypes = {
        "stockRcmnd":{
            "name":"stockRcmnd",
            "columns": ['1','2', '3']
        }, 
        "stockChange":{
            "name":"stockChange",
            "columns": ['4','5', '6']
        }
    }; 
```

现在，我想动态获取列：

```
property = "stockChange";

columns = tableTypes.{property}.columns;

property = "stockRcmnd";

columns = tableTypes.{property}.columns; 
```

**[这](http://jsfiddle.net/opmaster/6yS4q/1/)是一个jsfiddle；**

知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T08:53:23.910

在 JavaScript 中也可以像这样访问对象属性：

`tableTypes[property].columns`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T08:54:17.263

只是：

```
 tableTypes['stockRcmnd'].name 
```

# c# - 在 asp.net 中获取页面加载的坐标

> ID：13450323
> 
> 赞同：0
> 
> 时间：2012-11-19T08:51:49.210
> 
> 标签：c#, javascript, asp.net

我有一个情况。我正在使用 Windows（ASP.NET）的 Web 应用程序。当我的网页出现时，在页面加载时，它会动态生成 ImageButtons。我需要确定页面上每个 ImageButton 控件的 X、Y 或 TOP、LEFT 坐标，而无需单击任何 ImageButtons。我需要在单击一个 ImageButton 时在一些 ImageButtons 之间画一条线。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T09:30:21.637

尝试使用一些 Javascript 代码或 jQuery。请在下面找到 jQuery 代码

在这里，我使用了**[position()](http://api.jquery.com/position/)**方法，它为您提供元素的左侧和顶部位置。您可以根据需要更改**[选择器。](http://api.jquery.com/category/selectors/)**

**更新**：假设您有类似 HTML`<div id='images-container'> .. all images here </div>`并在下面使用[**each()**](http://api.jquery.com/each/)方法更新的选择器

您也可以使用**[offset()](http://api.jquery.com/offset/)**

```
 <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.2.js"></script>
 <script language="javascript" type="text/javascript">
    $(document).ready(function () {
         $('#images-container img').each(funcion(){
         var coordinates=$(this).position();
         coordinates.left;// gives you x
         coordinates.top;// gives you y
         //save these values in some hidden field and access it in code behind if needed
       });
    });
 </script> 
```

请参阅这篇文章以获取更多信息[DOM 对象的 jQuery xy 文档坐标](https://stackoverflow.com/questions/1002934/jquery-x-y-document-coordinates-of-dom-object)

# scala - 宏是否可以在 Scala 中进行自然链接比较？

> ID：13450324
> 
> 赞同：2
> 
> 时间：2012-11-19T08:51:49.187
> 
> 标签：scala, comparison, syntactic-sugar, scala-2.10, scala-macros

Scala 不像 Python 那样提供链式比较：

```
// Python:
0 < x <= 3
// Scala:
0 < x && x <= 3 
```

具有新宏功能的 Scala 2.10 是否会让程序员编写一个添加此功能的库？或者这超出了[Scala 宏](http://scalamacros.org/)的范围？

宏似乎是实现此类语法糖的正确选择，因为它们不会使解析器/编译器复杂化。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T09:35:22.177

你不需要宏：

```
class ChainedComparisons[T : Ordering](val res: Boolean, right: T) {
  def <^ (next: T) = new ChainedComparisons(res && Ordering[T].lt(right, next), next)
  def <=^ (next: T) = new ChainedComparisons(res && Ordering[T].lteq(right, next), next)
}
implicit def chainedComparisonsToBoolean(c: ChainedComparisons[_]) = c.res

class StartChainedComparisons[T : Ordering](left: T) {
  def <^(right: T) = new ChainedComparisons(Ordering[T].lt(left, right), right)
  def <=^(right: T) = new ChainedComparisons(Ordering[T].lteq(left, right), right)
}
implicit def toStartChainedComparisons[T : Ordering](left: T) = new StartChainedComparisons(left) 
```

用法：

```
scala> val x = 2
x: Int = 2

scala> 1 <^ x : Boolean
res0: Boolean = true

scala> 1 <^ x <^ 3 : Boolean
res1: Boolean = true

scala> 1 <^ x <^ 2 : Boolean
res2: Boolean = false

scala> 1 <^ x <=^ 2 : Boolean
res3: Boolean = true

scala> if (1 <^ x <^ 3) println("true") else println(false)
true

scala> 1 <=^ 1 <^ 2 <=^ 5 <^ 10 : Boolean
res5: Boolean = true 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T09:35:43.270

我不认为 Scala 宏在这里会有所帮助......（如果我错了，请纠正我，尤金肯定会检查这个）

**宏只能应用于经过类型检查的 AST**（并且还可以生成经过类型检查的 AST）。这里的问题是表达式：

```
0 < x <= 3 
```

将被评估为：（见[另一篇文章](https://stackoverflow.com/questions/2922347/operator-precedence-in-scala)）

```
((0 < x) <= 3) // type error 
```

中没有这样的功能`<=(i: Int)`。`Boolean`

我看不到让这个表达式编译的方法，因此宏是无能为力的。

当然你可以使用自定义类来实现你的目标，但是没有宏（如果需要我可以给你一个例子），一个可能的语法可以是`0 less x lesseq 3`或`x between (0, 3)`

# javascript - 检查对象是否存在

> ID：13450325
> 
> 赞同：0
> 
> 时间：2012-11-19T08:51:52.500
> 
> 标签：javascript, oop, object

我看到很多这样开始的代码

```
var a=a||{}; 
```

现在我知道它检查是否存在。

我的问题是，如果它在代码的第一个位置，为什么要检查它？

我的意思是程序员知道 a 不存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T08:57:36.260

程序员*应该*知道变量是否存在。

它用于将不同的脚本片段混合在一起，而不必跟踪脚本的哪个部分首先加载。多个脚本在开始时将具有相同的代码，因此它们共享相同的变量。

对于第一个脚本，声明了变量，并且它没有先前的值，因此`{}`使用该值。

对于使用它的以下脚本，`var`由于变量已声明，因此将被忽略，并使用先前设置的变量值。

当然，在多个地方声明同一个变量会产生代码异味。最好你应该跟踪你在做什么，这样你只声明一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T09:22:36.827

翻译成更清晰的代码

```
var a; // The variable declaration gets brought up because of hoisting 
```

更多关于吊装的信息在[这里](http://www.adequatelygood.com/2010/2/JavaScript-Scoping-and-Hoisting)

```
if( a ) {
    a = a; // if a is a truthy value then assign it to itself
} else {
    a = {}; // if a is a falsy value then set the default to an empty object
} 
```

希望有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T08:53:31.140

这是使用默认值的捷径 - 在这种情况下为 {}。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T09:02:37.427

基本上，javascript 可以编写在多个文件中，并且在每个文件中，您可以定义多个声明和函数。

即使程序员知道给定实例的变量是否存在，当从其他地方调用此代码时，也无法知道它是否已经存在。

这不应该发生在编写良好的代码中（全部来自一个开发人员/房子），但它确实发生在 js 代码从多个地方合并的项目中。

这个[SO question](https://stackoverflow.com/questions/500431/javascript-variable-scope)对 javascript 中的变量范围有一个非常好的答案，它应该可以澄清你的疑问。

# c# - 如何访问实时创建的 TabPages？

> ID：13450327
> 
> 赞同：1
> 
> 时间：2012-11-19T08:52:01.320
> 
> 标签：c#, winforms, tabcontrol, dynamically-generated

一些在代码前面完成的初始化......

```
private List<System.Windows.Forms.TabPage> tab_pages = new List<System.Windows.Forms.TabPage>();

int tab_increment = 0; 
```

在代码的某处，我实时创建了一堆标签页。

```
for (i=0; i<5; i++)
{

    tab_pages.Add(  new System.Windows.Forms.TabPage()  );

    tab_pages[tab_increment].Location = new System.Drawing.Point(4, 22);
    tab_pages[tab_increment].Name = 1 + tab_increment.ToString();
    tab_pages[tab_increment].Size = new System.Drawing.Size(501, 281);
    tab_pages[tab_increment].Text = tab_increment.ToString();

    this.tabControl.Controls.Add(tab_pages[tab_increment]);
    tab_increment += 1;
} 
```

现在我想访问这些标签页的元素。还假设我在每个页面上创建了不同的元素（例如，tabPage[0] 一个按钮，tabPage[1] 一个复选框等），知道所有内容都是动态添加的，我如何访问它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T09:05:38.200

为了添加页面，我认为使用

```
tabControl.TabPages.Add(new TabPage("Name")); 
```

或者在你的情况下

```
this.tabControl.TabPages.Add(tab_pages[tab_increment]); 
```

更合适。

为了访问它们，您可以使用

```
TabPage tp = tabControl.TabPages[i];  //where i is the index of your TabPage 
```

并且您可以使用`TabPage.Controls.Add`Controls 属性添加任何类似`Control`的内容`TabPage`：

```
Button btn = new Button();
btn.Name = "Button name";
tp.Controls.Add(btn); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T09:08:25.863

检查这种方法：

```
void Walk(Control control)
{
    foreach (Control c in control.Controls)
    {
        //just walking through controls...
        //...do something

        //but remember, it could contain containers itself (say, groupbox or panel, etc.)...so, do a recursion
        if (c.Controls.Count > 0)
            Walk(c);

    }
    //or
    foreach (Button btn in control.Controls.OfType<Button>())
    {
        //an example of how to walk through controls sub array of certain type
        //this loop won't have a single iteration if this page contains no Buttons

        //..so you can replace Button 
        //and have some certain code for different types of controls
    }
} 
```

并为 tabcontrol 启动它：

```
foreach (TabPage page in tabControl1.TabPages)
    Walk(page); 
```

* * *

我想没有特别需要为一个标签控件单独收集标签页，只要它具有`TabPages`属性。

在上面的代码中，我使用[Enumerable.OfType 方法](http://msdn.microsoft.com/en-us/library/bb360913.aspx)来获取特定类型控件的子集合。

* * *

至于你的代码，试试这个：

```
for (int i = 0; i < 5; i++)
{
    this.tabControl.Controls.Add(new System.Windows.Forms.TabPage());
    this.tabControl.TabPages[i].Text = i.ToString();
    //...do whatever you need
    //...
    //besdies, I think, ther's no need in tab_increment...loop index works well enough
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T08:54:34.973

您可以使用 TabPage 对象上的[Controls](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.controls.aspx)属性。集合中的每个控件都作为[Control](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.aspx)提供给您，您可以将它们转换为所需的类型。

# sql-server - 为每个索引分配适当的填充因子选项

> ID：13450332
> 
> 赞同：1
> 
> 时间：2012-11-19T08:52:21.203
> 
> 标签：sql-server, sql-server-2008, sql-server-2008-r2, sql-server-2012

我使用`SQL Server`并希望为每个索引分配适当的填充因子值。我知道每个索引的以下参数：

1.  每个表的行数
2.  每个索引发生的扫描量
3.  每个索引发生的搜索量
4.  每个索引发生的查找量。
5.  每个索引发生的更新量。

我知道扫描、查找和查找将填充因子值提高到 100 并将填充因子更新为 0。但是我根据每个表的上述参数寻找一个计算正确填充因子选项的公式。

**编辑**

我使用下面的脚本来获取上述参数：

```
select  SCHEMA_NAME(B.schema_id)+'.'+B.name+' \ '+C.name AS IndexName,
        A.user_scans,
        A.user_seeks,
        A.user_lookups, 
        A.user_updates, 
        D.rowcnt,
        C.fill_factor
from sys.dm_db_index_usage_stats A
INNER JOIN sys.objects B ON A.object_id = B.object_id
INNER JOIN sys.indexes C ON C.object_id = B.object_id AND C.index_id = A.index_id
INNER JOIN sys.sysindexes D ON D.id = B.object_id AND D.indid = A.index_id 
```

**编辑 2** 我使用以下参考来获得填充因子选项的最佳值：

[填充因子 1 的最佳值](http://www.sqlmag.com/blog/beginning-sql-server-one-step-at-a-time-blog-43/net-framework/what-is-the-best-value-for-the-fill-factor---index-fill-factor-and-performance--part-2-139448)

[填充因子 2 的最佳值](http://www.sqlservercentral.com/blogs/juggling_with_sql/2011/06/13/what-is-the-best-value-for-fill-factor-in-sql-server/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-11T13:30:38.840

# android - 在 Manifest 中使用不同的包进行的 Android 更改

> ID：13450333
> 
> 赞同：0
> 
> 时间：2012-11-19T08:52:22.443
> 
> 标签：android, android-manifest

我有两个包，其中包含多个活动。在看到 stackoverflow 中的回复后，我对清单文件进行了必要的更改，但 apk 仍然没有运行。这是我的示例清单

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.xyz.user.login"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".SplashActivity"
        android:label="@string/title_activity_splash" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity android:name=".SucessRetrieveCredActivity" >
    </activity>
    <activity android:name=".ResetPasswordMessageActivity" >
    </activity>
    <activity android:name=".ResetPasswordActivity" >
    </activity>
    <activity android:name="com.xyz.stylist.search.ServiceMap" >
    </activity>

    <uses-library
        android:name="com.google.android.maps"
        android:required="true" />
</application>

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" /> 
```

我必须导入 import com.hairologie.user.login.R; 在 ServiceMap 活动中，它仍然不起作用。早些时候，当 ServiceMap 和其他活动在同一个包中时，它工作得很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T09:40:10.803

将清单中的包名称更改为 com.xyz

声明所有活动，如 android:name=".stylist.search.ServiceMap"

android:name=".user.login.SplashActivity"

之后清理并构建您的项目并运行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T08:56:03.363

尝试这个：

```
manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.xyz"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".user.login.SplashActivity"
        android:label="@string/title_activity_splash" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity android:name=".user.login.SucessRetrieveCredActivity" >
    </activity>
    <activity android:name=".user.login.ResetPasswordMessageActivity" >
    </activity>
    <activity android:name=".user.login.ResetPasswordActivity" >
    </activity>
    <activity android:name=".stylist.search.ServiceMap" >
    </activity>

    <uses-library
        android:name="com.google.android.maps"
        android:required="true" />
</application>

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T09:01:35.423

写入 `android:name="com.yourpackage.activityName"`ManifestFile 而不是 `android:name = ".ActivityName"` 它会解决问题。

# firefox - 安装 vimperator 后如何使用 Ctrl+D 为页面添加书签

> ID：13450335
> 
> 赞同：4
> 
> 时间：2012-11-19T08:52:34.033
> 
> 标签：firefox, vimperator

我已经安装了 vimperator，但我发现快捷键**Ctrl+D**不能再为页面添加书签了。我已经搜索了很长时间，但仍然找不到解决方案。有人知道吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T08:00:30.173

对于书签，使用“a”，可选择在状态栏中编辑 url 和书签标题，然后返回。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T09:22:09.867

我找到了解决方案

```
noremap <C-d> :dialog addbookmark<CR> 
```

好吧，我需要阅读更多帮助文件。:)

# mysql - 此查询的 UNION 或 JOIN

> ID：13450337
> 
> 赞同：0
> 
> 时间：2012-11-19T08:52:44.800
> 
> 标签：mysql

我有一个`$member_id`，有 5 个表，此成员详细信息存储在这些表中的多行中。

为了从这些表中获取这些用户数据，我可以使用`JOIN`and `UNION`：

```
//Using JOIN:
SELECT * FROM table1 LEFT JOIN table2 ON table1.id=table2.id LEFT JOIN table3 ON table2.id=table3.id AND table1.member_id = '$member_id'

//USING UNION
(SELECT a FROM t1 WHERE member_id = '$member_id')
UNION
(SELECT a FROM t2 WHERE member_id = '$member_id')
ORDER BY a LIMIT 10; 
```

首选哪一个？哪个性能更好？当您想从许多**与外键相关的表中获取一些信息时，真正的方法是什么？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T08:57:27.047

如果您需要**同一行中的所有列，则应使用 join**。对于**逐列，您应该使用 union**。这是标准。他们不是秘密。

如果此列未出现在所有表中，请记住使用左连接：

```
SELECT table0.id as a0, table1.id as a1, table2.id as a2, ...
FROM 
   (select '$member_id' as id from dual ) table0
LEFT outer join table1 ON table1.id=table0.id
Left outer JOIN table2 ON table1.id=table2.id 
LEFT outer JOIN table3 ON table2.id=table3.id 
```

此外，在联合中，您可以标记每一行：

```
//USING UNION
(SELECT 't1' as t, a FROM t1 WHERE member_id = '$member_id')
UNION ALL
(SELECT 't2' as t, a FROM t2 WHERE member_id = '$member_id')
ORDER BY a LIMIT 10; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T08:57:38.220

如果您具有相同的结构并且想要删除重复的行，您可以使用 UNION 否则最好使用 JOIN 语句

# magento - 对于某些产品，在默认范围内，只能选择根类别吗？

> ID：13450338
> 
> 赞同：1
> 
> 时间：2012-11-19T08:52:47.320
> 
> 标签：magento

只是偶然发现了一个奇怪的 Magento 问题。

后端中的某些产品在类别选项卡中仅将“根”作为可选类别......但如果我选择店面作为独家商品，所有类别都会出现。

而其他一些产品在默认范围内可以选择整个树。

索引和缓存已重置。

有什么线索吗？请 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-16T11:29:09.953

你可以在这里找到解决方案：http: [//zaclee.net/magento/errors-magento/magento-product-edit-only-shows-default-category](http://zaclee.net/magento/errors-magento/magento-product-edit-only-shows-default-category)

问候！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-28T08:42:06.537

那里的评论中有另一个解决方案。我更改了它以查找具有不一致子项计数的类别，而没有首先修改它们：

```
select
  entity_id,
  children_count,
   (select (SELECT count(*) from catalog_category_entity u1 
            where u1.path REGEXP CONCAT('^',u2.path,'/[[:digit:]]+$')) 
    from catalog_category_entity u2 
    where u2.path = w1.path) 
  as actual_children_count
from catalog_category_entity w1
having children_count != actual_children_count 
```

检查违规记录后，运行 Tim Schmidt 的更新：

```
CREATE TABLE catalog_category_entity_test AS SELECT * FROM catalog_category_entity;

UPDATE catalog_category_entity w1 
SET children_count = (
  select (SELECT count(*) from catalog_category_entity_test u1 
          where u1.path REGEXP CONCAT('^',u2.path,'/[[:digit:]]+$')) 
  from catalog_category_entity_test u2 where u2.path = w1.path)

DROP TABLE catalog_category_entity_test; 
```

# php - 取消设置数组中的多个整数

> ID：13450341
> 
> 赞同：1
> 
> 时间：2012-11-19T08:52:52.700
> 
> 标签：php

是否有 PHP 内置函数可以按键取消设置多个数组项？

这将相当于：

```
foreach($badElements as $k) {
    unset($allElements[$k]);
} 
```

或者，甚至更好：

```
$keys = array_keys($badElements);
foreach($keys as $k) {
    unset($allElements[$k]);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T08:57:01.320

您可以创建一个要删除和循环的键数组，显式取消设置它们。例子：

```
$removeKeys = array('name', 'email');

foreach($removeKeys as $key) {
   unset($badElements[$key]);
} 
```

或者，您可以将变量指向已删除键的新数组。

```
$badElements = array_diff_key($badElements, array_flip($removeKeys)); 
```

或将所有数组成员传递给 unset()。

```
unset($badElements['name'],  $badElements['email']) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T09:28:51.117

以下内容不能完全满足您的要求，因为它**不是 in-situ**。但也许你可以复制数组：

```
$v = array("lol"=>"blub", "lal"=>"blab", "lulz"=>"gagh");
$k = array("lol", "lulz");

var_dump(array_diff_key($v, array_flip($k))); 
```

[[在键盘上运行它](http://codepad.org/ghtrRK52)]

# objective-c - XCode 显示函数参数热键

> ID：13450342
> 
> 赞同：31
> 
> 时间：2012-11-19T08:52:53.733
> 
> 标签：objective-c, xcode, hotkeys

在 XCode 中我可以在 Visual Studio 中做的少数几件事之一是列出函数的参数。我已经用谷歌搜索了几次，但仍然没有找到答案。

例如，如果我开始输入，`round(`我会得到一个参数列表及其返回类型。但是，如果我已经输入了代码

```
x = round(y); 
```

我将光标移到它上面，我不知道如何在不重新输入的情况下显示参数信息。有谁知道这个热键怎么用？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-19T09:10:48.343

刚刚通过浏览 XCode Preferences Hotkeys 部分发现了**Option + Escape 。**它实际上在工具提示中列出了参数信息（*到目前为止我还没有看到其他热键这样做！*），但不如 Visual Studio 的 Ctrl+Shift+Space 函数那么友好。例如，文本选择光标（插入符号）必须在函数名称上（而不是在该函数的参数上）。

在详尽地探索了 XCode 热键之后，我将假设这是 XCode 中最好的。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-29T00:31:18.950

`Control + Command + Shift + /`是其他答案中提到的 Option + click 的键盘等效项

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-19T08:53:46.327

**Command + 单击**函数将导航到函数定义，而**Option + 单击**会显示函数定义的工具提示。

# php - 如果未使用 Behat/Mink 启用 JavaScript，则测试警告

> ID：13450350
> 
> 赞同：0
> 
> 时间：2012-11-19T08:53:22.467
> 
> 标签：php, symfony, behat, mink

我有一个简单的场景：

```
Scenario: No javascript warning
    Given I am on homepage
    When I don't have javascript enabled
    Then I should see a warning 
```

我将如何用 mink 实现 when 部分？有没有比仅仅测试 noscript 元素更优雅的方法？

到目前为止我的解决方案：

```
/**
 * @When /^I don\'t have javascript enabled$/
 */
public function iDonTHaveJavascriptEnabled()
{
    $driver = $this->getSession()->getDriver();
    if ($driver instanceof BrowserKitDriver or $driver instanceof GoutteDriver) {
        return true;
    }

    throw new UnsupportedDriverActionException(
        'Scenario needs to be tested with a javascript disabled driver',
        $driver
    );
}

/**
 * @Then /^I should see a warning$/
 */
public function iShouldSeeAWarning()
{
    $this->assertElementOnPage('noscript');
} 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-19T08:54:42.777

```
<noscript>You're only spoiling things for yourself!</noscript> 
```

# vb.net - Visual Studio 2010 说我的类型变量没有定义

> ID：13450354
> 
> 赞同：-1
> 
> 时间：2012-11-19T08:53:29.650
> 
> 标签：vb.net, reflection

我正在尝试使用反射来访问我创建的自定义程序集。具体来说，我正在尝试访问我创建的结构的公共列表。（这是定义公共假期的假期结构列表。）我确定我缺少一些基本的东西，但我在 IDE 中不断收到这个奇怪的错误。

```
Dim f As New OpenFileDialog() With { ... }

Dim rgAsm as Reflection.Assembly
Dim rgType as Type
Dim rgDLL as Object

rgASM = Reflection.Assembly.LoadFile(f.Filename)
rgType = rgAsm.GetType("rgReporting.rgReporting")
rgDLL = Activator.CreateInstance(rgType)

Dim holType As Type = modConf.rgAsm.GetType("rgReporting.PublicHolidays+Holiday")

If holType Is Nothing Then MsgBox("no.") Else MsgBox("yes!") 
```

当我运行上面的代码时，我得到“是的！” msgbox 表示我的类型已由 GetType() 定义。但是，当我尝试编写以下代码时：

```
Dim blah as holType 
```

IDE 给了我这个错误：“类型 'holType' 没有定义。”

我希望最终使用 a 中的类型，但这样做会产生相同的错误。我意识到我在将类型定义为可以使用的东西时缺少一些基本步骤，但我似乎找不到它是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T09:00:50.440

你不能那样做。为了定义像 holType 类型的变量，它必须是静态定义的。holType 是运行时类型。

为了创建 holType 的实例，您可以编写：

```
Dim blah = Activator.CreateInstance(holType); 
```

# css - CSS 到 SASS（或 LESS）的转换

> ID：13450355
> 
> 赞同：27
> 
> 时间：2012-11-19T08:53:32.053
> 
> 标签：css, sass, less

任何人都可以推荐一些 CSS to less 或 CSS to sass 转换工具吗？我找到了一些 .eg [http://css2less.cc/](http://css2less.cc/)和[http://css2sass.herokuapp.com/](http://css2sass.herokuapp.com/)，但如果能深入了解它们的可靠性（或其他工具的建议），我们将不胜感激。我有一个用于白标解决方案的大型 CSS 代码库，这将极大地受益于 CSS 预处理器，但手动转换为 sass/less 将是一项艰巨的任务。

提前致谢

编辑：我应该强调我对使用工具（例如上面列出的工具（没有更好的工具））将大型 CSS 代码库转换为使用 CSS 预处理器（例如 SASS 或 LESS）的体验特别感兴趣。或者是否有任何其他方式（除了列出的工具）来实现这一壮举是务实的。你必须克服哪些障碍？它甚至值得尝试吗？或者这样的元语言是否只适合您可以从头开始的新项目？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-09-06T12:19:53.217

[我在http://css2sass.heroku.com/](http://css2sass.heroku.com/)上获得了很好的体验。你也可以在 github 上找到他们的代码库。您还可以通过原始 sass gem 安装的 sass-convert 工具直接转换文件。基本上这就是 css2sass 正在做的事情。

只需致电：

```
sass-convert -F css -T sass original_file.css converted_file.sass 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-19T12:17:58.777

SASS 的好处是您不需要将 CSS 转换为 SASS，因为 SASS 是 CSS 的扩展。

只需复制和粘贴，您就可以开始了。

但是，如果您希望将 CSS 重构为结构良好的 SASS 文件，那是我认为工具无法做到的。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-10-02T13:35:32.077

这篇文章需要为任何未来的观众列出以下 2 个在线工具。

首先，我总是通过这个在线工具运行 css 以将其转换为更简洁的 css [http://shrthnd.volume7.io/](http://shrthnd.volume7.io/) - 真的不需要解释，如果你不习惯的话，让它变得更干净更小已经那样写你的CSS了。

然后，通过这个在线工具[http://sebastianpontow.de/css2compass/](http://sebastianpontow.de/css2compass/) - 这是一个非常好的从你的 css 创建 scss 文件的工具。它将所有颜色转换为您喜欢的格式，设置颜色变量和字体变量，并且通过查看 sass 对您的 css 的作用，总体上让您对 sass 的基础知识有一个很好的了解。

我注意到第二个工具中唯一不太理想的地方是它命名了这样的字体系列`$font_0: Open Sans; $font_1: Roboto Condensed; $font_2: arial;`，依此类推。我总是发现以实际字体的简短形式命名它们更直观，或者设置与内容相关的 3-5 个名称，例如`$font_main, $font_sub, $font_callout, $font_titles`或您喜欢的任何名称。但是，当您将其全部粘贴回全新的 scss 文件时，这是一个 30 秒的修复：)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-09-12T12:44:15.100

有点晚了，最近发现了这个在线转换工具：

[http://css2sass.heroku.com/](http://css2sass.heroku.com/)

尽管它有时会拒绝有效的 CSS，但它帮助了我

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-19T10:43:02.920

我现在实际上发现了一些东西：[Leafo](http://leafo.net/lessphp/lessify/)

它进行基本的格式化，例如：

```
#header {
/* ... */
}

#header p {
/* ... */
}
to

#header {
/* ... */
p {
/* ... */
}
} 
```

希望能帮助到你！

如果你想验证或任何查看 sass 到 css 的东西，你可以尝试 sass 在线网站... [尝试 Sass 在线](http://sass-lang.com/try.html)

# path - 如何在 Fabric 中将 PATH 变量添加到 sudo

> ID：13450358
> 
> 赞同：3
> 
> 时间：2012-11-19T08:53:34.570
> 
> 标签：path, fabric

当我尝试使用 Fabric 使用 Fabric 远程部署 Apache 服务器时，我遇到了一个问题。我首先尝试使用 sudo() 向 PATH 变量添加新路径，然后我也尝试使用 sudo() 回显 $PATH。但是，我发现新路径似乎根本没有添加到 PATH 中。结果，我无法通过 sudo() 执行该路径中的 bin。

```
[name@IP:port] Executing task 'reboot'
[name@IP:port] sudo: export PATH=$PATH:/new/path/to/add/install/bin
[name@IP:port] out: sudo password: 

[name@IP:port] sudo: echo $PATH
[name@IP:port] out: sudo password:
[name@IP:port] out: /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin 
```

谁能告诉我如何在 Fabric 中向 sudo 命令添加路径变量？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T11:49:55.313

1.  在以 root 身份运行时，始终提供可执行文件的完整路径应该是一种习惯，以避免将特洛伊木马推入您的 PATH。

2.  设置环境变量 via`export`仅适用于*当前*shell 会话 - 这是由`sudo`. 一旦您的命令（`export`在本例中为 ）被执行，shell 就会退出，并带上您的环境变量。下次执行时`sudo`，会设置一个新的 shell（具有默认环境），它对您以前的`export`.

3.  配置文件`/etc/sudoers`通常包含一个类似 的条目`Defaults env_reset`，其作用是*调用*环境中设置的环境变量*不会*复制到调用的环境中`sudo`，因此`export`在当前环境中调用*然后*执行`sudo`也不起作用。这样做是出于安全原因（上面的参考 1））。

4.  可以设置`/etc/sudoers`为对 3) 进行例外处理，通过`env_keep`. 详情请参阅`man sudoers`。但是，请参阅 1) - 这*不是*一个好主意。

5.  有一个`-E`选项 to `sudo`，它允许保留调用者的环境（包括例如一个扩展的`PATH`），但这需要`SETENV`在`/etc/sudoers`. 再次，请参阅`man sudoers`详细信息，并注意 1)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-11-28T12:49:32.853

利用

```
sudo('PATH=$PATH:/new/path/to/add/install/bin commad') 
```

# r - 如何在 R 中验证日期

> ID：13450360
> 
> 赞同：5
> 
> 时间：2012-11-19T08:53:38.127
> 
> 标签：r

我有一个格式的日期`dd-mm-yyyy HH:mm:ss` 验证这个日期的最好和最简单的方法是什么？

我试过

```
d <- format.Date(date, format="%d-%m-%Y %H:%M:%S") 
```

但是，当非法日期过去时，我怎样才能捕捉到错误呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-19T09:05:17.443

简单的方法：

```
d <- try(as.Date(date, format="%d-%m-%Y %H:%M:%S"))
if("try-error" %in% class(d) || is.na(d)) {
  print("That wasn't correct!")
} 
```

**解释：** `format.Date`在内部使用`as.Date`来转换`date`为`Date`类的对象。但是，它不使用格式选项，因此`as.Date`使用默认格式，即`%Y-%m-%d`然后`%Y/%m/%d`.

`format`from 选项`format.Date`仅用于输出，不用于解析。从`as.Date`手册页引用：

> “as.Date”方法接受字符串、因子、逻辑“NA”以及类“”POSIXlt”和“POSIXct”的对象。（通过忽略指定时区时间表示中的午夜之后的时间，最后转换为天数，默认 UTC。）还有类“日期”（来自包“日期”）和“日期”的对象'（来自包'chron'）。根据指定格式尽可能处理字符串：忽略任何尾随字符。

但是，当您直接`as.Date`使用格式规范调用时，除了适合您的格式之外，不允许其他任何内容。

**另见**：`?as.Date`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T20:00:33.170

你可能想看看`gsubfn`包装。这具有（`gsubfn`特别是）与其他正则表达式函数一样工作以将片段与字符串匹配的函数，但随后它调用用户提供的函数并将匹配的片段传递给该函数。因此，您将编写自己的函数来查看年、月和日，并确保它们在正确的范围内（日的范围可能取决于经过的月份和年份。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-10-21T18:44:32.400

如果在日期时间条目中需要灵活性，这可能会有所帮助。

我有一个函数，我想允许仅日期条目或日期时间条目，然后设置一个标志 - 仅在函数内部使用。我叫这面旗子`data_type`。稍后将在更大的函数中使用该标志来选择单位以获取两个日期的差异`difftime`。（在大多数情况下，该功能仅使用日期就可以了，但在某些情况下，用户可能需要更短的时间范围。如果他们不需要，我不想用更短的时间范围给用户带来不便。）

我发布此内容有两个原因：1）帮助任何试图允许灵活使用日期参数的人；2）欢迎在方法出现问题时进行完整性检查，因为这将进入 R 包中的函数。

```
dat_time_check_fn <- function(dat_time) {
  if (!anyNA(as.Date(dat_time, format= "%Y-%m-%d %H:%M:%S"))) date_type <- 1
else if (!anyNA(as.Date(dat_time, format= "%Y-%m-%d"))) date_type <- 2
else stop("Error: dates must either be in format '1999-12-31' or '1999-12-31 23:59:59' ")
date_type
} 
```

日期时间案例

```
date5 <- "1999-12-31 23:59:59"

date_type <- dat_time_check_fn(date5)
date_type
[1] 1 
```

仅日期案例：

```
date6 <- "1999-12-31"

date_type <- dat_time_check_fn(date6)
date_type
[1] 2 
```

请注意，如果函数中的上述顺序颠倒，较长的日期时间可能会无意中强制转换为较短的版本，并且两种类型都会导致 date_type = 1。

我较大的函数有多个日期，但我需要它们兼容。下面，我正在检查上面检查的两个日期，其中一个是类型 1，一个是类型 2。组合类型会给出仅包含日期的结果（类型 2）：

```
date_type <- dat_time_check_fn(c(date5, date6))
date_type
[1] 2 
```

这是一个不合规的版本：

```
date7 <- "1/31/2011"

date_type <- dat_time_check_fn(date7)

Error in dat_time_check_fn(date7) : 
  Error: dates must either be in format '1999-12-31' or '1999-12-31 23:59:59' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-04T01:40:31.707

我相信您正在寻找的是**tryCatch**功能。以下是我编写的脚本的摘录，该脚本接受具有两个系列的任何 .csv 文件，这些系列具有共同的 x 轴。“数据”中的第一列是常见的 x 轴变量，第 2 列和第 3 列是 y 轴变量。我需要 tryCatch 语句来确保脚本会创建一个绘图，而不管 x 轴数据是时间序列还是其他类型的变量。

```
### READ DATA FROM A CSV FILE
data = read.csv("STLDvsNEM2.csv", header = TRUE)

#CONVERT FIRST ROW OF DATA (IN MY CASE, THE COLUMN INTENDED TO BE THE X AXIS)
#TO AN ACCEPTABLE DATE FORMAT
#IF FIRST ROW OF DATA IS NOT IN AN ACCEPTABLE DATE FORMAT
#USE THE VALUE WITHOUT ANY TRANSFORMATION
x <- tryCatch({
  as.Date(data[,1])},
  warning = function(w) {},
  error = function(e) {
    x <- data[,1]
  })
y1 <- data[,2]
y2 <- data[,3] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-27T07:19:10.260

这里的许多解决方案都容易发生 SQL 注入。他们返回`TRUE`。`date = "2020-08-11; DROP * FROM my_table"`这是一个矢量化的基本 R 函数，适用于`NA`：

```
is_date = function(x, format = NULL) {
  formatted = try(as.Date(x, format), silent = TRUE)
  is_date = as.character(formatted) == x & !is.na(formatted)  # valid and identical to input
  is_date[is.na(x)] = NA  # Insert NA for NA in x
  return(is_date)
} 
```

咱们试试吧：

```
> is_date(c("2020-08-11", "2020-13-32", "2020-08-11; DROP * FROM table", NA), format = "%Y-%m-%d")
## TRUE FALSE FALSE    NA 
```

# windows - 我应该对 pdb 行号有多少信任？

> ID：13450363
> 
> 赞同：2
> 
> 时间：2012-11-19T08:53:43.510
> 
> 标签：windows, windbg

我目前正在从转储中调试 Windbg 中的一个问题。我有正确的 pdb，我可以很高兴地查看当地人等。但是，我所拥有的源代码（我从该版本据称来自的 VCS 分支中提取）在我正在查看的堆栈的某些部分中似乎偏离了几行。我以前见过它关闭 1 的实例，但不是 3/4 行。

这是什么原因造成的？有什么明确的方法可以检查我是否有正确的源文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T09:19:17.177

您正在查看发布代码的调试版本还是非优化版本？代码优化可能会导致您看到的行移位，因此您应该重新编译[/Od](http://msdn.microsoft.com/en-gb/library/windows/hardware/ff540664%28v=vs.85%29.aspx) C++ 优化设置为“禁用”，看看这是否更正了您看到的内容。

WinDbg 使用与 Visual Studio 相同的方法来检查您正在查看/设置断点的源文件是否与 pdb 匹配，因此它应该警告您（我认为它这样做我无法验证）。

此外，如果不是源文件，您可以使用以下方法验证 pdb：

```
!itoldyouso myDLL 
```

此外，您可以在步进期间在另一个窗口中打开源文件，它应该在它认为当前调用所在的行处放置一条洋红色线，这应该是正确的并且与 Visual Studio 的行为相同。

# iphone - 需要将 UIDatePickerMode 设置为 DateFormat [yyyy-mm-dd hh:mm]

> ID：13450366
> 
> 赞同：3
> 
> 时间：2012-11-19T08:54:11.993
> 
> 标签：iphone, objective-c, ios, ipad, uidatepicker

据我在 iOS`UIDatePickerView`类参考中看到的，我们可以设置的只有 4 种模式`Datepickerview`。

```
UIDatePickerModeTime  [ 6 | 53 | PM ].

UIDatePickerModeDate  [ November | 15 | 2007 ].

UIDatePickerModeDateAndTime   [ Wed Nov 15 | 6 | 53 | PM ].

UIDatePickerModeCountDownTimer  [ 1 | 53 ]. 
```

但我需要一种格式`[ 2007 Nov 15 | 6 | 53 | PM ].`

我做不到。是通过其他任何可能的方式吗？

请帮忙。

即使不可能，请提出其他一些方法。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T10:17:05.480

您可以直接使用具有多个组件的[UIPickerView](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPickerView_Class/Reference/UIPickerView.html)而不是 UIDatePicker。

然后你按照你想要的顺序填充不同的组件！

希望能帮助到你。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-19T09:15:37.347

您可以尝试使用

```
NSDate *date = [[[NSDate alloc] init] retain];
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc]init];

[dateFormatter setDateFormat:@"yyyy-MM-dd HH:mm:ss "];  
date = [dateFormatter dateFromString:@"your date to be formatted"];
myPicker.date = date;
[date release];
[dateFormatter release]; 
```

请根据需要修改上述代码。

# android - bcm4329 在 android 中丢弃单播数据包

> ID：13450371
> 
> 赞同：1
> 
> 时间：2012-11-19T08:54:19.793
> 
> 标签：android, wifi, adhoc

我使用带有 bcm4329 的 nexus s 在 ad hoc 模式下与 pc 通信。bcm4329 向 pc 发送 arp 请求；pc 将 arp 回复发送回 bcm4329。但是，bcm4329 不会将 arp 回复传递给上层，而是将其丢弃。此外，bcm4329 还会丢弃单播 udp 数据包。

实际上，我在 bcm4329 的 makefile 中删除了 PKT_FILTER_SUPPORT 和 ARP_OFFLOAD_SUPPORT，甚至关闭了 bcm4329 中的电源管理。

有什么想法吗？欣赏它！

# objective-c - Cocoa - 视图处理的解释

> ID：13450374
> 
> 赞同：1
> 
> 时间：2012-11-19T08:54:26.200
> 
> 标签：objective-c, cocoa, model-view-controller

我目前正在学习 Cocoa，并遵循“通用”教程来获取带有按钮和标签的基本表单。

使用`.xib`，我添加了一个“对象”（`NSObject`子类的实例），并且还创建了一个`ViewController`类，我通过设置`Custom Class`为 ViewController 连接到我的视图。然后我对我的`ViewController.h`和`.m`文件进行编码，添加一个`pressedButton`方法和一个标签（myLabel）。这一切正常（即按下按钮时标签更新）。

我的问题是：在 C++ 术语（我更熟悉的一种语言）中，我实际上对这个过程做了什么？据我了解，我的“对象”（设置为 ViewController 类）代表 .xib 文件的一个实例（此处可能有误），并且将此设置为 ViewController 类，我可以在 ViewController 中创建出口和操作.h/.m，但我仍然不确定幕后到底发生了什么。

最后，`XCode`模板提供了一个`AppDelegate`“免费”类。鉴于我通过我的`ViewController`类管理我的控件，这个文件/对象将用于什么 - 它是用于与视图本身无关的应用程序特定的东西，还是它也用于管理表单上的控件（就像你在我认为的一些教程中看到的那样）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T09:29:33.690

我希望，我很好地理解了你问题的第一部分。.xib（nib 文件的 xml 版本）不代表类或对象。它更用于创建一个包含所有子视图（每个都是一个对象）的视图对象，并将其正确链接到您的视图控制器。

最常见且自动生成的方式是，您的 nib 文件中的底层视图对应于 self.view（从您的视图控制器的角度来看）。您可以通过浏览 self.view 的子视图层次结构来访问 nib 文件创建的每个视图。或者，您可以在 nib/IB（界面构建器）中定义标签，以更轻松地访问各个视图对象。

“只是为了您的方便”介绍了 IBOutlets。您可以在视图控制器的界面中定义一个 IBOutlet，并使用 IB 将其链接到使用 xib 文件创建的专用对象。我说“只是为了您的方便”，因为考虑到解决您的视图对象的其他方式，这并不是真正必要的。但它不仅方便，因此强烈推荐并成为标准的操作方式。

您甚至可以以编程方式将更多视图添加到使用 IB 创建的表单/视图中。您可以以编程方式更改这些视图的属性。

`initWithNibName:bundle:`视图和子视图是在使用该方法使用 nib 文件初始化视图控制器的那一刻创建的。然后打开 nib 文件（现在是 xib），解析和解释其内容，并创建所有视图并分别添加到它们的超级视图中，并相应地设置它们的属性和操作：选择器等。同样，整个过程是为您的方便而设计的。您甚至可以以编程方式创建所有视图等 - 根本不需要任何 nib 文件。您的自定义视图控制器的`loadView`方法将是 dong so 的适当位置。

第二个问题：AppDelegate 是为应用程序范围的操作等而设计的。如果您可以在视图控制器中很好地管理所有内容，那么您不需要更改 AppDelegate 上的任何内容。它通常用作全局字符的变量或函数的容器（然后是应用程序委托对象的属性和成员）。有时您可能会看到有必要重写一些 AppDelegates 方法，例如 application:didFinishLanuncing 或 applicationDidBecomeActive。严格来说， UIApplicationDelegate 不是您的子类。它是您实现的协议。（非常类似于 Java 中的接口——克服了 C++ 中缺乏多重继承的问题）。

# devexpress - DevExpress XtraCharts - 创建水平条形图

> ID：13450381
> 
> 赞同：1
> 
> 时间：2012-11-19T08:54:54.487
> 
> 标签：devexpress

我正在使用 Microsoft Visual Studio 2010 XtraReports 包 1.0 和 MVC DX11.2 Report Controls 我正在制作各种条形图。我需要生成一个水平条形图，可以看到 DevExpress.XtraCharts.v12.1 有一个解决方案，但它使用 XYDiagram.Rotated 属性。

（见[http://documentation.devexpress.com/#XtraCharts/DevExpressXtraChartsXYDiagram_Rotatedtopic](http://documentation.devexpress.com/#XtraCharts/DevExpressXtraChartsXYDiagram_Rotatedtopic)）

这在 DX11.2 中对我不可用

谁能建议如何使用图表设计器或在代码中创建水平条形图？

非常感谢杰夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T10:06:25.677

**DX 11.2 也具有相同的属性。**检查以下 DX 11.2 演示的代码片段

```
if (settings.Diagram is XYDiagram) {
        ((XYDiagram)settings.Diagram).Rotated = options.Rotated;
        Axis2D axisY = ((XYDiagram)settings.Diagram).AxisY;
        axisY.Interlaced = true;
        axisY.Title.Text = "Population, millions";
        axisY.Title.Visible = true;
    }
    else {
        XYDiagram3D diagram = (XYDiagram3D)settings.Diagram;
        diagram.AxisX.Label.MaxWidth = 60;
        diagram.AxisY.Interlaced = true;
        diagram.RotationType = RotationType.UseAngles;
        diagram.RotationOrder = RotationOrder.XYZ;
        diagram.ZoomPercent = 140;
        diagram.VerticalScrollPercent = 4;
    }

    Html.DevExpress().Chart(settings)
    .Bind(Model)
    .Render(); 
```

![在此处输入图像描述](../Images/ec02af49227c999e2f7d172a7e51b197.png)

> 检查您的 DevExpress Demos 文件夹中的 Chart Demo（C:\Users\Public\Documents\DevExpress 2011.2 Demos\Components\ASP.NET\MVC\CS\MVCDemos\Views\Chart），在那里您将获得局部视图文件名“BarViewsSideBySideStackedPartial “这有助于实现这一点。

希望这有帮助。

# jquery - jQuery 检查下一个 td 单选按钮组上的单选按钮

> ID：13450384
> 
> 赞同：0
> 
> 时间：2012-11-19T08:54:59.073
> 
> 标签：jquery, html, radio-button

我有一个带有单选按钮的表格，在第一列，选项是：

*   '---'
*   '没有存货'
*   '有库存'

在第二列，选项是：

*   '---'
*   '没有存货'
*   '低的'
*   '中等的'
*   '高的'

现在我要做的是，当用户在第一列上单击“无库存”时，应检查第二列上的“无库存”单选选项。

这就是我正在做的事情：

HTML：

```
<table border='1'>

    <tr>
        <td class="valign_top" style="text-align:left;">
            <div class="radio_field">
                <input type="radio" class="stock_avail" id="93_stock_avail_0" name="93_stock_avail" value="0" checked=""> ---
            </div>

            <div class="radio_field">
                <input type="radio" class="stock_avail" id="93_stock_avail_No" name="93_stock_avail" value="No"> No Stock
            </div>

            <div class="radio_field">
                <input type="radio" class="stock_avail" id="93_stock_avail_Yes" name="93_stock_avail" value="Yes"> With Stock
            </div>
        </td>

        <td class="sa_sw_td valign_top" style="text-align:left;">                    
            <div class="radio_field">
                <input type="radio" class="sa_sw" name="93_sa_sw" id="93_sa_sw_0" value="0" checked=""> ---
            </div>

            <div class="radio_field">
                <input type="radio" class="sa_sw" name="93_sa_sw" id="93_sa_sw_1" value="1"> No Stock
            </div>

            <div class="radio_field">
                <input type="radio" class="sa_sw" name="93_sa_sw" id="93_sa_sw_2" value="2"> Low
            </div>

            <div class="radio_field">
                <input type="radio" class="sa_sw" name="93_sa_sw" id="93_sa_sw_3" value="3"> Medium
            </div>

            <div class="radio_field">
                <input type="radio" class="sa_sw" name="93_sa_sw" id="93_sa_sw_4" value="4"> High
            </div>
        </td>
    </tr>

    <tr>
        <td class="valign_top" style="text-align:left;">
            <div class="radio_field">
                <input type="radio" class="stock_avail" id="94_stock_avail_0" name="94_stock_avail" value="0" checked=""> ---
            </div>

            <div class="radio_field">
                <input type="radio" class="stock_avail" id="94_stock_avail_No" name="94_stock_avail" value="No"> No Stock
            </div>

            <div class="radio_field">
                <input type="radio" class="stock_avail" id="94_stock_avail_Yes" name="94_stock_avail" value="Yes"> With Stock
            </div>
        </td>

        <td class="sa_sw_td valign_top" style="text-align:left;">                    
            <div class="radio_field">
                <input type="radio" class="sa_sw" name="94_sa_sw" id="94_sa_sw_0" value="0" checked=""> ---
            </div>

            <div class="radio_field">
                <input type="radio" class="sa_sw" name="94_sa_sw" id="94_sa_sw_1" value="1"> No Stock
            </div>

            <div class="radio_field">
                <input type="radio" class="sa_sw" name="94_sa_sw" id="94_sa_sw_2" value="2"> Low
            </div>

            <div class="radio_field">
                <input type="radio" class="sa_sw" name="94_sa_sw" id="94_sa_sw_3" value="3"> Medium
            </div>

            <div class="radio_field">
                <input type="radio" class="sa_sw" name="94_sa_sw" id="94_sa_sw_4" value="4"> High
            </div>
        </td>
    </tr>

</table>​ 
```

JavaScript：

```
$(document).ready(function(){
    $('.stock_avail').click(function(){

        var value = $(this).val();
        console.log("value: " + value);

        if(value=='No'){
            $(this).next('td').find('radio').val(2);
        }

    });
});​ 
```

这可能会有所帮助：http: [//jsfiddle.net/E6mhM/](http://jsfiddle.net/E6mhM/)。

任何想法如何做到这一点？蒂亚！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T08:59:35.220

```
$(document).ready(function(){
    $('.stock_avail').click(function(){

        var value = $(this).val();
        console.log("value: " + value);

        if(value=='No'){
            $(this).closest("td").next().find("input[value=1]").attr("checked",true);
        }

    });
});​ 
```

演示：http: [//jsfiddle.net/E6mhM/4/](http://jsfiddle.net/E6mhM/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T09:06:48.957

```
$(document).ready(function(){
    $('.stock_avail').click(function(){
        if($(this).val()=='No'){
            $(this).parent().parent().next().find(':radio:eq(1)').attr('checked','checked');
           //assuming No stock will be always a second radio option 
        }
    });
}); 
```

# php - 使用php动态创建页面滚动到锚标记

> ID：13450385
> 
> 赞同：3
> 
> 时间：2012-11-19T08:55:03.397
> 
> 标签：php, anchor

我有一个页面，其中从表中读取条目，然后 php 生成显示每一行的 div - div 的名称和 id 设置为基于记录 # 的唯一字符串。例如：

当页面加载时，它会传递要滚动到的记录的唯一锚字符串，格式为：href='showpost.php#g50'

当页面加载正确时，它会显示带有锚点的 url，但它不会滚动。

但是，如果我将光标放在浏览器的地址栏上并按`<Enter>`页面正确滚动到记录。奇怪的是，`<F5>`它`<Ctrl-R>`不起作用（Firefox 16）。

我猜想动态创建的页面与它有关。任何想法可能会发生什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T01:27:00.647

您总是可以只使用一个简单的 javascript 调用来滚动到一个锚点。您可以从页面中的任何位置调用 Javascript 代码，因此为了安全起见，您可以在 PHP 生成所有锚点后将其放在页面末尾。

```
<?php 
    // php generation code here
?>
<script type="text/javascript">
    var hashSplit = location.href.split('#');
    var curHash= hashSplit[1];
    window.location.hash = curHash;
</script> 
```

或者，如果您已经通过 php 知道页面的锚点是什么，那么您可以更轻松地完成它。

```
<?php
    $anchor = "home";
?>
<script type="text/javascript">
    window.location.hash = "<?= $anchor; ?>";
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-16T07:30:34.487

非常有用的例子，感谢 SISYN。但我有我的版本

```
let hashSplit = location.href.split('#');
let curHash = hashSplit[1];
if(typeof curHash !== 'undefined') {
    $('html, body').animate({
        scrollTop: $('#' + curHash).offset().top
    }, 1000);
} 
```

# visual-studio-2010 - 从 msi 中排除 msm 中的 dll

> ID：13450386
> 
> 赞同：3
> 
> 时间：2012-11-19T08:55:03.037
> 
> 标签：visual-studio-2010, windows-installer

我在 vs2010 中创建了一个 .MSI 安装程序项目。此 .MSI 包含许多 *.msm（合并模块文件）。有没有办法在安装过程中根据不同的windows平台（例如：xp、win7、vista..）选择特定的*.msm？

例如，如果安装此.MSI 的目标平台是winXP，我的.MSI 将知道选择哪个.msm，而不是在安装过程中选择所有.msm。

顺便说一句，.MSI 有没有办法访问驻留在 .msm 中的特定 *.dll ？同样，例如，如果 .MSI 项目包含一个 .msm 并且此 .msm 包含许多 *.dll，是否有办法在安装此 .MSI 时选择 .msm 中的特定 *.dll ？

我的主要目的是让我的 .MSI 在安装我的 .MSI 期间知道在不同的 Windows 平台下使用什么*.dll/* .msm。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T07:21:05.163

您基本上需要将每个合并模块分配给一个新功能并设置该功能的安装条件。但是，我认为 VS 2010 不可能做到这一点，但有一些[商业设置创作工具](http://en.wikipedia.org/wiki/Windows_Installer#Tools)可以做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T19:49:31.463

Merge modules (.msm) are similar in structure to a simplified Windows Installer file (.msi). A merge module cannot be installed alone, it must be merged into a .msi file. The best alternative is to obtain a freely distributed merge tool or purchase one of the merging tools available from independent software vendors. You can then use the functionality provided by [Mergemod.dll](http://msdn.microsoft.com/En-US/Library/Windows/Desktop/3eb087b1-0f44-40d8-a950-67d489f09408). The intended use of merge modules was to provide a standard method for developers to deliver shared Windows Installer components and setup logic to their applications. Merging is therefore something typically done by the author of the installation package prior to deployment. Trying to determine and perform the correct merge when the application is being installed does not seem like the best approach.

You could instead create a separate .msi for each target platform. Merge the appropriate .dll into each package. Then include logic in your setup application to check the user’s system and then install the correct package.

As was suggested by the previous answer, you could merge all the .dlls into a single installation package which you have authored such that the installation of certain features and components are conditional upon [Operating System Property Values](http://msdn.microsoft.com/En-US/Library/Windows/Desktop/4f516cf0-d5b3-4df6-b171-54bbafc0ef93) .

You can consider [Using Transitive Components](http://msdn.microsoft.com/En-US/Library/Windows/Desktop/73677573-945f-4646-89d8-93e28f7856fe) in your package. The typical use for transitive components is to prepare a product to reinstall during a system upgrade. The author of the installation package specifies those components that need to be swapped out during a system upgrade as having the transitive attribute. When the user later upgrades the system, the product must be reinstalled. Upon this reinstall, the installer removes the earlier components and installs the later components, without having to install the entire product. This might serve your scenario well if you expect your users to upgrade their systems.

# iphone - 从 iPhone 向服务器发送实时位置数据的最佳实践

> ID：13450388
> 
> 赞同：4
> 
> 时间：2012-11-19T08:55:28.567
> 
> 标签：iphone, database, web-services, sqlite, gps

我想为 iphone 开发一个应用程序，它“实时”跟踪用户的当前位置，并通过网络服务将此数据发送到网络服务器上的 sql 数据库，这样我就可以拥有一个一致的数据库，其中注册用户 a 当前定位。

这引发了一些关于如何以有效方式做到这一点的问题。

1）我真的要在服务器上实时更新GPS数据吗？关于iphone的能耗，这不是“沉重”吗？也许每分钟一次也可以？当我想尽可能准确时，这里的最佳做法是什么？

2）如果一次可能有 1000 个用户怎么办......用当前 GPS 数据同时更新数据库仍然有效吗？

提前谢谢你塞巴斯蒂安

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T03:01:29.967

定期发送 GPS 数据会给系统带来不必要的额外负载，而且不是最佳的。

跟踪用户的更好方法是仅当用户从最后报告的位置移出半径为 R 的圆时才发送数据。

这样一来，在高速公路上以 60 mph 的速度行驶的用户和在公园以 0.1 mph 的速度行走的用户都将被准确跟踪。

众所周知，用户在坐下吃饭、上厕所或睡觉时会停止移动。

# java - 为什么相等的java字符串采用相同的地址？

> ID：13450392
> 
> 赞同：8
> 
> 时间：2012-11-19T08:55:38.697
> 
> 标签：java, string, javac

> **可能重复：**
> [使用 new 方法创建字符串对象及其与 intern 方法的比较](https://stackoverflow.com/questions/10571158/string-object-creation-using-new-and-its-comparison-with-intern-method)

我正在玩 Strings 以更多地了解它们，我注意到一些我无法解释的东西：

```
String str1 = "whatever";
String str2 = str1;
String str3 = "whatever";
System.out.println(str1==str2); //prints true...that's normal, they point to the same object
System.out.println(str1==str3); //gives true..how's that possible ? 
```

最后一行如何给出 true ？这意味着 str1 和 str3 在内存中具有相同的地址。

这是一个足够聪明的编译器优化，可以检测到两个字符串文字是相同的（“whatever”），因此将 str1 和 str3 分配给同一个对象？还是我在字符串的底层机制中遗漏了一些东西？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T08:59:32.037

因为 Java 有一个唯一的[实习](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#intern%28%29)实例池，并且字符串字面量存储在这个池中。这意味着第一个“whatever”字符串文字与第三个“whatever”文字完全相同的 String 对象。

正如文件所说：

> **`public String intern()`**
> 
> **返回字符串对象的规范表示。一个字符串池，最初是空的，由 String 类私下维护。**
> 
> 当调用 intern 方法时，如果池中已经包含一个等于该 String 对象的字符串，由 equals(Object) 方法确定，则返回池中的字符串。否则，将此 String 对象添加到池中并返回对该 String 对象的引用。
> 
> 由此可见，对于任何两个字符串 s 和 t，当且仅当 s.equals(t) 为真时，s.intern() == t.intern() 才为真。
> 
> 所有文字字符串和字符串值的常量表达式都是实习的。字符串文字在 Java 语言规范的 §3.10.5 中定义
> 
> **返回： 与此字符串具有相同内容的字符串，但保证来自唯一字符串池。**
> 
> * * *

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-19T09:00:13.463

[http://www.xyzws.com/Javafaq/what-is-string-literal-pool/3](http://www.xyzws.com/Javafaq/what-is-string-literal-pool/3)

正如帖子所说：

> 与所有对象分配一样，字符串分配在时间和内存方面都被证明是昂贵的。JVM 在实例化字符串文字时会执行一些技巧以提高性能并减少内存开销。为了减少在 JVM 中创建的 String 对象的数量，String 类保留了一个字符串池。每次您的代码创建字符串文字时，JVM 首先检查字符串文字池。如果该字符串已存在于池中，则返回对池实例的引用。如果池中不存在字符串，则实例化一个新的 String 对象，然后将其放入池中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-19T09:03:40.093

如果你这样做：

```
String str1 = new String("BlaBla");  //In the heap!
String str2 = new String("BlaBla");  //In the heap! 
```

那么您将通过运算符（和构造函数）显式创建一个`String`对象。`new`在这种情况下，您将让每个对象指向**不同**的存储位置。

但如果你这样做：

```
String str1 = "BlaBla";        
String str2 = "BlaBla"; 
```

那么你就有了隐式构造。如果两个字符串字面量具有相同的值，则它们共享相同的存储空间，这是因为 Java 保留了相同字符串的存储空间！（具有相同值的字符串）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-19T09:03:08.703

`javac`编译器组合了给定类文件中相同的字符串文字。

但是在运行时，字符串文字使用与[String.intern()](http://en.wikipedia.org/wiki/String_interning)相同的方法组合，这意味着即使是不同应用程序中不同类中的字符串（在使用相同对象的同一 JVM 中）。

# xml - 在已创建的菜单上应用组

> ID：13450393
> 
> 赞同：6
> 
> 时间：2012-11-19T08:55:44.750
> 
> 标签：xml, openerp

我开发了一个新模块，并且在该模块中我在 .xml 文件中创建了一个组。
现在我想将该组应用到已经在其他菜单中创建的菜单中。
那么我可以将组应用于这些菜单吗？
我不想覆盖菜单，我只想在已经创建的菜单中应用组。

提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-19T12:22:39.963

向现有菜单添加组是通过正常的 OpenERP 记录更新机制完成的。您实际上不必完全重新定义模块中的现有菜单记录，只需声明`<record>`具有相同 ID 的 a，该字段只有一个值`groups_id`：

```
 <record id="original_module.menu_id" model="ir.ui.menu">
        <!-- Use the special many2many value syntax to add a child record,
             and the `ref()` method to resolve the group XML ID -->
        <field name="groups_id" eval="[(4,ref('my_new_group_id'))]"/>
    </record> 
```

您可以在官方 OpenERP 插件中找到类似的示例，例如使顶级*销售*菜单[对一些额外组可见的 CRM 模块 (l.48)](http://bazaar.launchpad.net/~openerp/openobject-addons/trunk/view/7793/crm/security/crm_security.xml#L48)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-16T12:07:09.337

您可以替换 menuitem 本身，而不是更新记录，

您所要做的就是找到要覆盖的菜单项，然后将代码添加到其中。例如，已经定义的菜单，

```
<menuitem id="menu_example" action="menu_action" name="Example Menu" parent="menu_example_parent" sequence="10"/> 
```

现在假设您要向此菜单添加组，

```
<menuitem id="existing_module.menu_example" action="existing_module.menu_action" name="Example Menu" parent="existing_module.menu_example_parent" sequence="10" groups="group_example"/> 
```

如果它不起作用，则首先删除该菜单，然后再次编写该菜单，包括您的代码。对于删除菜单，

```
<delete model="ir.ui.menu" id="module_name.menu_id" /> 
```

希望这会有所帮助。

# html - html 5 音频播放器中的带宽

> ID：13450395
> 
> 赞同：2
> 
> 时间：2012-11-19T08:55:50.320
> 
> 标签：html

我在网站上使用 html 5 音频播放器来播放 mp3 文件。mp3 文件不在我的服务器上，而是在另一个站点上。

播放这个 mp3 文件是否会涉及通过我的服务器的流量，或者流量会直接从 mp3 文件服务器流向用户 PC 上的 Web 浏览器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T10:36:38.847

我可以从 Azure 管理控制台看到，当音频位于单独的服务器上时，在 html 5 中播放音频时，流量现在通过我的 Web 服务器定向。

# javascript - JQuery Click 事件使程序崩溃，没有控制台错误

> ID：13450401
> 
> 赞同：0
> 
> 时间：2012-11-19T08:56:10.710
> 
> 标签：javascript, jquery

编辑**

在我正在创建的游戏中，如果用户对当前问题有疑问，我会使用下一个问题按钮移动到网格中的其他问题。目前我遇到了真正的问题，因为它不断使我的程序崩溃，并且没有给出任何控制台错误。我遇到的最后一个问题是它说“递归过多”。从那以后我以为我已经解决了这个问题，但我只是做了一些测试，每次都崩溃。

这是按钮的点击事件...

```
//Next question click event
$('.next-question').bind("click", function() {
    $('td').removeClass('highlight-problem');
    shuffleEqually(listOfWords);
    shuffleEqually(nextWordIndexes);
    var rndWord = nextWordIndexes[Math.floor(Math.random())];
    var rndWord = nextWordIndexes[2];
    //Adds and removes nesesary classes
    $('td[data-word="' + listOfWords[rndWord].name + '"]').addClass('highlight-problem');
    $('td[data-word=' + word + ']').removeClass('wrong-letter').removeClass('wrong-word').removeClass('right-letter');
    var spellSpace = $('td[data-word="' + listOfWords[rndWord].name + '"]').hasClass('right-word');
    if (spellSpace) {
        $('.next-question').trigger('click');
    } else {
        $("#hintSound").attr('src', listOfWords[rndWord].audio);
        hintSound.play();
        $("#hintPic").attr('src', listOfWords[rndWord].pic);
        $('#hintPicTitle').attr('title', listOfWords[rndWord].hint);
    }
}); 
```

我认为这可能与 if 语句有关，但已尝试将其更改为此..

```
if (spellSpace == false) {

    $("#hintSound").attr('src', listOfWords[rndWord].audio);
    hintSound.play();
    $("#hintPic").attr('src', listOfWords[rndWord].pic);
    $('#hintPicTitle').attr('title', listOfWords[rndWord].hint);
} 
```

它使情况变得更糟

ShuffleEqually：

```
//Shuffles words to randomize
shuffleEqually(nextWordIndexes);
var shuffledWords = [];
shuffledWords = chosenWords.sort(function () {
    return 0.5 - Math.random();
});

function shuffleEqually(a1, a2) {
    var arrays = [];
    if (typeof a1 === 'object' && a1.length > 0) {
        arrays.push(a1);
    }
    if (typeof a2 === 'object' && a2.length > 0) {
        arrays.push(a2);
    }
    var minLength = arrays[0].length;
    jQuery.each(arrays, function (i, a) {
        minLength = a.length < minLength ? a.length : minLength;
    });
    var randoms = [];
    for (i = 0; i < minLength; i++) {
        randoms.push(Math.random());
    }
    jQuery.each(arrays, function (i, a) {
        var i = minLength;
        while (i--) {
            var p = parseInt(randoms[i] * minLength);
            var t = a[i];
            a[i] = a[p];
            a[p] = t;
        }
    });
}; 
```

提示音：

```
var hintSound = $("#hintSound")[0]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T09:04:25.203

您的问题是一个无限循环，简单明了。

```
$('.next-question').bind("click", function() {
// binds click...
...

if (spellSpace) {
    $('.next-question').trigger('click');
    // triggers click ON THE SAME ELEMENT COLLECTION (same selector) 
```

你想细化这一点。我假设您希望触发器在下一个问题上起作用，因此我建议将第二个语句更改为：

```
 $(".next-question").eq(($(".next-question").index($(this)) + 1) % $(".next-question").length).trigger("click"); 
```

在 shuffleEqually 中有第二个无限循环：

```
 jQuery.each(arrays, function (i, a) {
    var i = minLength;
    while (i--) {
        var p = parseInt(randoms[i] * minLength);
        var t = a[i];
        a[i] = a[p];
        a[p] = t;
    } 
```

将 while 条件更改为具有限制值，否则它将无限循环（因为减量操作总是成功）。

# mongodb - 是否可以在同一服务器上拥有两个不同版本（1.2.5 和 2.0.4）的播放框架？

> ID：13450404
> 
> 赞同：2
> 
> 时间：2012-11-19T08:56:23.750
> 
> 标签：mongodb, playframework, version

我在这个问题上没有找到任何东西......我有两个播放框架应用程序。第一个是用play framework 1.2.5开发的，第二个是用2.0.4开发的。我想知道是否可以在同一台服务器上拥有这两个版本。

我有一个 mongoDb 服务器，我会保持这个服务器只在本地可用。

那么，你能给我什么建议？

非常感谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T09:13:23.083

您只需在不同的端口上运行这两个版本。在 Play 1.x 中，设置`application.conf`为

```
http.port=9001 
```

对于 Play 2.x，它有点复杂，请参阅[这个问题](https://stackoverflow.com/questions/8205067/how-do-i-change-the-default-port-9000-that-play-uses-when-i-execute-the-run)。但是您只需要更改一个安装的端口。

如果您想在端口 80 上为这两个实例提供服务，则需要在它们前面放置一个代理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T09:55:26.463

如果它是 unix 系统，您可以为两个版本创建一个符号链接，执行以下操作（一步一步，确保您没有破坏您的系统 :)）：

```
bash#: which play
/usr/bin/play

# use path returned with previous 'which'
bash#: cd /usr/bin
bash#: sudo cp play play1
bash#: sudo ln -s /full/path/to/your/play-2.0.x/play play20x 
```

因此，您将能够像这样启动您的应用程序：

```
cd /path/to/play2app
play20x run 
```

或者

```
cd /path/to/play1app
play1 run 
```

要在端口 80 上运行两者，请使用前端 HTTP 服务器。

# android - 如何使用android蓝牙接收串行数据

> ID：13450406
> 
> 赞同：52
> 
> 时间：2012-11-19T08:56:26.847
> 
> 标签：android, bluetooth

我是安卓新手。我正在设计一个通过蓝牙从硬件设备接收串行数据的 android 应用程序。我正在研究 Htc hope S。我使用示例蓝牙聊天代码来接收数据。但是收到的数据不正确。它错过了一些价值。谁能提供任何其他示例代码以通过蓝牙接收大量数据并将其保存在文件中。

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2012-12-17T22:33:11.690

试试这个代码：

活动：

```
package Android.Arduino.Bluetooth;
import android.app.Activity;
import android.bluetooth.BluetoothAdapter;
import android.bluetooth.BluetoothDevice;
import android.bluetooth.BluetoothSocket;
import android.content.Intent;
import android.os.Bundle;
import android.os.Handler;
import android.view.View;
import android.widget.TextView;
import android.widget.EditText;  
import android.widget.Button;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.util.Set;
import java.util.UUID;

public class MainActivity extends Activity
{
TextView myLabel;
EditText myTextbox;
BluetoothAdapter mBluetoothAdapter;
BluetoothSocket mmSocket;
BluetoothDevice mmDevice;
OutputStream mmOutputStream;
InputStream mmInputStream;
Thread workerThread;
byte[] readBuffer;
int readBufferPosition;
int counter;
volatile boolean stopWorker;

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Button openButton = (Button)findViewById(R.id.open);
    Button sendButton = (Button)findViewById(R.id.send);
    Button closeButton = (Button)findViewById(R.id.close);
    myLabel = (TextView)findViewById(R.id.label);
    myTextbox = (EditText)findViewById(R.id.entry);

    //Open Button
    openButton.setOnClickListener(new View.OnClickListener()
    {
        public void onClick(View v)
        {
            try 
            {
                findBT();
                openBT();
            }
            catch (IOException ex) { }
        }
    });

    //Send Button
    sendButton.setOnClickListener(new View.OnClickListener()
    {
        public void onClick(View v)
        {
            try 
            {
                sendData();
            }
            catch (IOException ex) { }
        }
    });

    //Close button
    closeButton.setOnClickListener(new View.OnClickListener()
    {
        public void onClick(View v)
        {
            try 
            {
                closeBT();
            }
            catch (IOException ex) { }
        }
    });
}

void findBT()
{
    mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
    if(mBluetoothAdapter == null)
    {
        myLabel.setText("No bluetooth adapter available");
    }

    if(!mBluetoothAdapter.isEnabled())
    {
        Intent enableBluetooth = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
        startActivityForResult(enableBluetooth, 0);
    }

    Set<BluetoothDevice> pairedDevices = mBluetoothAdapter.getBondedDevices();
    if(pairedDevices.size() > 0)
    {
        for(BluetoothDevice device : pairedDevices)
        {
            if(device.getName().equals("MattsBlueTooth")) 
            {
                mmDevice = device;
                break;
            }
        }
    }
    myLabel.setText("Bluetooth Device Found");
}

void openBT() throws IOException
{
    UUID uuid = UUID.fromString("00001101-0000-1000-8000-00805F9B34FB"); //Standard SerialPortService ID
    mmSocket = mmDevice.createRfcommSocketToServiceRecord(uuid);        
    mmSocket.connect();
    mmOutputStream = mmSocket.getOutputStream();
    mmInputStream = mmSocket.getInputStream();

    beginListenForData();

    myLabel.setText("Bluetooth Opened");
}

void beginListenForData()
{
    final Handler handler = new Handler(); 
    final byte delimiter = 10; //This is the ASCII code for a newline character

    stopWorker = false;
    readBufferPosition = 0;
    readBuffer = new byte[1024];
    workerThread = new Thread(new Runnable()
    {
        public void run()
        {                
           while(!Thread.currentThread().isInterrupted() && !stopWorker)
           {
                try 
                {
                    int bytesAvailable = mmInputStream.available();                        
                    if(bytesAvailable > 0)
                    {
                        byte[] packetBytes = new byte[bytesAvailable];
                        mmInputStream.read(packetBytes);
                        for(int i=0;i<bytesAvailable;i++)
                        {
                            byte b = packetBytes[i];
                            if(b == delimiter)
                            {
     byte[] encodedBytes = new byte[readBufferPosition];
     System.arraycopy(readBuffer, 0, encodedBytes, 0, encodedBytes.length);
     final String data = new String(encodedBytes, "US-ASCII");
     readBufferPosition = 0;

                                handler.post(new Runnable()
                                {
                                    public void run()
                                    {
                                        myLabel.setText(data);
                                    }
                                });
                            }
                            else
                            {
                                readBuffer[readBufferPosition++] = b;
                            }
                        }
                    }
                } 
                catch (IOException ex) 
                {
                    stopWorker = true;
                }
           }
        }
    });

    workerThread.start();
}

void sendData() throws IOException
{
    String msg = myTextbox.getText().toString();
    msg += "\n";
    mmOutputStream.write(msg.getBytes());
    myLabel.setText("Data Sent");
}

void closeBT() throws IOException
{
    stopWorker = true;
    mmOutputStream.close();
    mmInputStream.close();
    mmSocket.close();
    myLabel.setText("Bluetooth Closed");
}
} 
```

和这里的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
tools:ignore="TextFields,HardcodedText" >

<TextView
    android:id="@+id/label"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Type here:" />

<EditText
    android:id="@+id/entry"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/label"
    android:background="@android:drawable/editbox_background" />

<Button
    android:id="@+id/open"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_below="@id/entry"
    android:layout_marginLeft="10dip"
    android:text="Open" />

<Button
    android:id="@+id/send"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignTop="@id/open"
    android:layout_toLeftOf="@id/open"
    android:text="Send" />

<Button
    android:id="@+id/close"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignTop="@id/send"
    android:layout_toLeftOf="@id/send"
    android:text="Close" />

</RelativeLayout> 
```

这里是清单：添加到应用程序

```
// permission must be enabled complete
<manifest ....>

    <uses-permission android:name="android.permission.BLUETOOTH_ADMIN" />
    <uses-permission android:name="android.permission.BLUETOOTH" />
    <application>

    </application>
</manifest> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-20T09:16:41.183

我尝试将其从我的 PC（MATLAB）传输到我的手机的连续数据（转换为字符串的浮点值）。但是，我的应用程序仍然误读了分隔符 '\n' 并且仍然数据出现乱码。所以，我将字符 'N' 作为分隔符而不是 '\n' （它可以是任何不作为数据的一部分出现的字符）并且我已经实现了更好的传输速度 - 我只给出了 0.1 秒的延迟在传输连续样本之间——接收器的数据完整性超过 99%，即在我传输的 2000 个样本（浮点值）中，只有 10 个在我的应用程序中没有正确解码。

简而言之，我的回答是：选择除 '\r' 或 '\n' 以外的分隔符，因为与我使用的其他字符相比，这些分隔符会给实时数据传输带来更多问题。如果我们更多地工作，也许我们可以进一步提高传输率。我希望我的回答对某人有所帮助！

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-09-05T01:48:07.143

空连接的问题与 findBT() 函数有关。您必须将设备名称从“MattsBlueTooth”更改为您的设备名称，并确认您的服务/设备的 UUID。使用类似 BLEScanner 应用程序在 Android 上确认两者。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-06-12T03:37:17.050

看看令人难以置信的[蓝牙串行](https://github.com/jpetrocik/bluetoothserial)课程，它的`onResume()`能力对我帮助很大。我希望这有帮助 ;）

# jquery - ui日期选择器不显示

> ID：13450408
> 
> 赞同：0
> 
> 时间：2012-11-19T08:56:30.867
> 
> 标签：jquery, asp.net, css, datepicker, placeholder

![在此处输入图像描述](../Images/b4217c14ecdf0b97dbd134c6975acbec.png)当我在此之前尝试过它时它工作正常但现在我遵循相同的过程它不起作用

```
<script src="scripts/jquery-1.6.1.min.js" type="text/javascript"></script>
<script src="scripts/jquery.ui.datepicker.js" type="text/javascript"></script> 
```

```
$(document).ready(function() {
    $("#<%=txtDateOfBirth.ClientID %>").datepicker({
        changeMonth: true,
        changeYear: true,
        yearRange: "-50:+0"
    });
    $("#<%=txtDateOfBirth.ClientID %>").datepicker({ autoSize: true });
    //getter
    var autoSize = $("#<%=txtDateOfBirth.ClientID %>").datepicker("option", "autoSize");
    //setter
    $("#<%=txtDateOfBirth.ClientID %>").datepicker("option", "autoSize", true);
    $('#<%=imgDateOfBirth.ClientID %>').css({ 'cursor': 'pointer', "vertical-align": 'middle' });
    $("#<%=imgDateOfBirth.ClientID %>").click(function () {
        $('#<%=txtDateOfBirth.ClientID %>').datepicker('show');
    });
}); 
```

我也被应用了css

所有这些都在内容占位符中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:34:01.433

我首先要确保您的日期选择器正常工作。去掉所有的自定义配置、css和点击处理程序（当你点击时它不是已经自己显示了，没有添加点击处理程序吗？）。如果它不能仅与 $("#element").datepicker() 一起使用，那么您在其他地方就会遇到问题。确保您已加载适当的 jQuery 文件（js 和 CSS）。祝你好运！

# grails - Grails findAll带有排序，顺序，最大值和偏移量？

> ID：13450410
> 
> 赞同：12
> 
> 时间：2012-11-19T08:56:33.327
> 
> 标签：grails, groovy, grails-orm

我想在 findAll 查询中集成排序、顺序、最大值和偏移量。以下工作正常：

```
def books = Book.findAll("from Book as b where b.approved=true order by b.dateCreated  desc", [max: max, offset: offset]) 
```

但我想要的是：

```
def books = Book.findAll("from Book as b where b.approved=true", [sort: 'dateCreated', order: 'desc', max: max, offset: offset]) 
```

这不起作用。我该如何重写这个？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T09:24:06.087

HQL 不支持 sort 和 order 作为参数，因此您需要在 HQL 表达式中包含“order by”

```
def books = Book.findAll("from Book as b where b.approved=true"
  + " order by b.dateCreated desc", [max: max, offset: offset]) 
```

（或者在这种情况下只使用`Book.findAllByApproved(true, [...])`而不是 HQL）。

所以如果排序和顺序是变量，你需要一个技巧

```
def books = Book.findAll("from Book as b where b.approved=true"
  + (params.sort ? " order by b.${params.sort} ${params.order}" : ''), 
  [max: max, offset: offset]) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-07-22T15:43:18.207

使用 where 查询对我有用：

`def books = Book.where{approved == true}.list(sort: 'dateCreated', order: 'desc', max: max, offset: offset)`

或者直接从页面使用参数：

`def books = Book.where{approved == true}.list(params)`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-11-01T13:59:47.063

使用“findAllBy”，因为它支持排序和排序。

```
def results = Book.findAllByTitle("The Shining",
             [max: 10, sort: "title", order: "desc", offset: 100]) 
```

点击[这里](http://docs.grails.org/3.1.1/ref/Domain%20Classes/findAllBy.html)了解详情。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-11-01T21:47:49.610

我假设您正在调用获取控制器或服务类中的书籍列表。

如果您从控制器操作中调用它，那么您已经可以使用魔术变量“params”。例如，如果您请求页面如下

```
book/list?max=10&offset=2 
```

那么“params”将已经自动映射了这些值。

您可以向 params 映射添加更多项目，如下所示

```
params.sort = "dateCreated"
params.order = "desc" 
```

根据需要构建参数后，您可以使用 Grails 动态查询，如下所示

```
def books = Book.findAllByApproved(true, params)
// use "books" variable as you wish 
```

# javascript - 一个模板 - 许多页面：我可以使用动态站点地图吗？

> ID：13450416
> 
> 赞同：2
> 
> 时间：2012-11-19T08:56:55.627
> 
> 标签：javascript, ajax, seo

我有一个搜索不同机构推荐的应用程序。该应用程序本身是一个基于 AJAX 的单页应用程序，但为了模拟状态性，URL 正在通过 History.replaceState() 方法动态变化。

我注入的 URL 也作为单独的 HTML 页面存在，因此当复制 URL 时，他可以重用它来直接加载他寻求的推荐。该模板也由 JavaScript 填充。

URL 结构非常简单：

```
 http://mattat.org.il/ci/index.php/search/show_full/nsrecommendation/[idOfRec] 
```

建议本身显然是静态的，即它们不会更新。

如果我希望所有内容都被 Google 索引，我该如何进行 SEO。我是否必须手动上传包含所有 ID 的胖站点地图并在每次添加新推荐时更新它？还是有更优雅的方法，例如动态站点地图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T09:22:41.167

我看到了两种处理方法。

1.  依靠谷歌爬虫的能力来访问（和索引）你所有的页面（因为请记住，站点地图只是假设给谷歌爬虫小费，而不是控制它）。
2.  就像你说的 - 生成站点地图并在有要添加或删除的条目时定期更新它。

第一个解决方案假设您页面上的某个位置（如果没有，您应该）所有推荐的索引和/或从一个推荐到另一个推荐的链接，以便谷歌可以通过这些链接进行爬网。

请记住，提供站点地图并不一定意味着谷歌会简单地跳转到所有这些链接 - 索引整个内容可能需要一些时间，因为它依赖于谷歌的神秘算法（tm）。

来自 OP 的更新：

我最终使用了从[这里](http://www.xml-sitemaps.com/standalone-google-sitemap-generator.html)下载的站点地图生成器。它允许无限数量的页面，以及定期更新站点地图的 Cron Job 选项。

# c++ - 文件名被截断以仅显示第一个字符

> ID：13450429
> 
> 赞同：1
> 
> 时间：2012-11-19T08:58:16.013
> 
> 标签：c++, winapi, file-io

我正在遵循MSDN 中关于如何列出目录中文件的[指南（我正在使用当前目录）。](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365200%28v=vs.85%29.aspx)就我而言，我需要将信息放入数据包的消息部分（大小为 1016 的字符数组）以将其发送给客户端。当我在客户端和服务器上打印 packet.message 时，只显示文件名的第一个字符。怎么了？这是相关代码部分的片段：

```
WIN32_FIND_DATA f;
HANDLE h = FindFirstFile(TEXT("./*.*"), &f);
string file;
int size_needed;
do
{
    sprintf(packet.message,"%s", &f.cFileName);
    //Send packet
} while(FindNextFile(h, &f)); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T09:05:04.593

这通常是由于宽字符串被错误地视为 ASCII 字符串造成的。该构建针对 UNICODE 并`cFileName`包含一个宽字符串，但`sprintf()`假设它是一个 ASCII 字符串。

[`FindFirstFile()`](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa364418%28v=vs.85%29.aspx)将被映射到`FindFirstFileA()`或`FindFirstFileW()`取决于构建是否以 UNICODE 为目标。

一种解决方案是显式使用`FindFirstFileA()`ASCII 字符串。

请注意，在`&`中不需要`sprintf()`：

```
sprintf(packet.message, "%s", f.cFileName); 
```

由于应用程序正在使用超出其控制范围的字符串（即文件名），我建议使用更安全[`_snprintf()`](http://msdn.microsoft.com/en-us/library/2ts7cx93%28v=vs.71%29.aspx)的方法来避免缓冲区溢出：

```
/* From your comment on the question 'packet.message' is a 'char[1016]'
   so 'sizeof()' will function correctly. */
if (_snprintf(packet.message, sizeof(packet.message), "%s", f.cFileName) > 0)
{
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-19T09:04:00.170

您使用的是 Unicode 版本的 FindFirstFile，几乎可以保证，调用窄版本或更改打印的格式说明符。我个人会做前者：

```
WIN32_FIND_DATAA f;
HANDLE h = FindFirstFileA("./*.*", &f);
string file;
int size_needed;
do
{
    sprintf(packet.message,"%s", f.cFileName);
    //Send packet
} while(FindNextFileA(h, &f));
FindClose(h); 
```

或者，您可以使用 MBCS 或常规字符进行编译。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-19T19:44:11.280

正如其他人所提到的，您正在调用 Unicode 版本`FindFirstFile()`并将 Unicode 数据传递给 Ansi`sprintf()`函数。说明`%s`符需要 Ansi 输入。您有几种选择来解决代码中的问题：

1.  继续使用`sprintf()`，但将`%s`说明符更改为，`%ls`以便在写入消息缓冲区时接受 Unicode 输入并将其转换为 Ansi：

    ```
    sprintf(packet.message, "%ls", f.cFileName); 
    ```

    但是，这并不理想，因为它将使用本地机器的 Ansi 编码，这可能与接收机器使用的 Ansi 编码不同。

2.  将您的消息缓冲区更改为使用`TCHAR`而不是`char`，然后切换到其中一个`wsprintf()`或`_stprintf()`代替`sprintf()`。就像`FindFirstFile()`，它们将匹配`TCHAR`并`TEXT()`使用的任何字符格式：

    ```
    TCHAR message[1016];
    wsprintf(packet.message, TEXT("%s"), f.cFileName); 
    ```

    或者：

    ```
    #include <tchar.h>

    _TCHAR message[1016];
    _stprintf(packet.message, _T("%s"), f.cFileName); 
    ```

3.  如果您必须使用`char`缓冲区，那么您应该从 API 接受 Unicode 数据并将其转换为 UTF-8 进行传输，然后接收方可以将其转换回 Unicode 并根据需要使用它。

    ```
    WIN32_FIND_DATAW f;
    HANDLE h = FindFirstFileW(L"./*.*", &f);
    if (h)
    {
        do
        {
            WideCharToMultiByte(CP_UTF8, 0, f.cFileName, lstrlenW(f.cFileName), packet.message, sizeof(packet.message), NULL, NULL);
           //Send packet
        } while(FindNextFile(h, &f));
        FindClose(h);
    } 
    ```

# android - 将 simpleAdapter 与图像一起用于列表视图

> ID：13450432
> 
> 赞同：2
> 
> 时间：2012-11-19T08:58:30.893
> 
> 标签：android, listview, android-listview

我在使用简单的适配器将图像放入列表视图时遇到了一点问题。我正在从我的在线服务器（AMAZON）获取图像。根据用户 ID 下载图像后，我尝试在我的列表视图中设置它们，但没有显示任何内容，也没有发生错误。

**下面是我的代码：**

```
// looping through All applicants
                for (int i = 0; i < applicant.length(); i++) {
                    JSONObject c = applicant.getJSONObject(i);

                    // Storing each JSON item in variable
                    String uid = c.getString(TAG_UID);
                    String name = c.getString(TAG_NAME);
                    String overall = c.getString(TAG_OVERALL);
                    String apply_datetime = c.getString(TAG_APPLY_DATETIME);
                    String photo = c.getString(TAG_PHOTO);

                    // creating new HashMap
                    //HashMap<String, String> map = new HashMap<String, String>();

                    //IMAGE
                    HashMap<String, Object> map = new HashMap<String, Object>();

                    // adding each child node to HashMap key (value)
                    map.put(TAG_UID, uid);
                    map.put(TAG_NAME, name);
                    map.put(TAG_OVERALL, overall);
                    map.put(TAG_APPLY_DATETIME, apply_datetime);

                    // adding HashList to ArrayList
                    // applicantsList.add(map);

                    // LISTING IMAGE TO LISTVIEW
                    try {
                        imageURL = c.getString(TAG_PHOTO);

                        InputStream is = (InputStream) new URL(
                                "my url link/images/"
                                        + imageURL).getContent();
                        d = Drawable.createFromStream(is, "src name");
                    } catch (Exception e) {
                        e.printStackTrace();
                    }

                    map.put(TAG_PHOTO, d);

                    // adding HashList to ArrayList
                    applicantsList.add(map);
                } 
```

如您所见，在我下载图像后。我使用下面的 simpleAdapter 设置为 listview：

```
 SimpleAdapter adapter = new SimpleAdapter(
                            SignUpApplicantActivity.this, applicantsList,
                            R.layout.list_applicant, new String[] {
                                    TAG_UID, TAG_NAME, TAG_OVERALL,
                                    TAG_APPLY_DATETIME, TAG_PHOTO }, new int[] {
                                    R.id.applicantUid, R.id.applicantName,
                                    R.id.applicantOverall,
                                    R.id.apply_datetime, R.id.list_image });
                    // updating listView
                    setListAdapter(adapter); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T09:16:50.020

你打电话给 notifyDatasetChange() 了吗？如果您不调用它，您的适配器可能不会失效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T09:29:35.590

从[SimpleAdapter 文档](http://developer.android.com/reference/android/widget/SimpleAdapter.html)中，图像数据应为资源 ID 或字符串（图像 URI） - 请参阅[setViewImage(ImageView,String)](http://developer.android.com/reference/android/widget/SimpleAdapter.html#setViewImage%28android.widget.ImageView,%20java.lang.String%29)

我看到了 2 个解决方案：

1.  在数据映射中提供 URI，而不是可绘制对象。
2.  实现您自己的视图绑定器以将可绘制对象绑定到 ImageView：

    ```
    adapter.setViewBinder(new SimpleAdapter.ViewBinder() {

        @Override
        public boolean setViewValue(View view, Object data, String textRepresentation) {
            if(view.getId() == R.id.list_image) {
                ImageView imageView = (ImageView) view;
                Drawable drawable = (Drawable) data;
                imageView.setImageDrawable(drawable);
                return true;
            }
            return false;
        }
    }); 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-08T17:33:41.550

尝试

```
 try{
            for (int i = 0; i < applicant.length(); i++) {
                JSONObject c = applicant.getJSONObject(i);

                // Storing each JSON item in variable
                String uid = c.getString(TAG_UID);
                String name = c.getString(TAG_NAME);
                String overall = c.getString(TAG_OVERALL);
                String apply_datetime = c.getString(TAG_APPLY_DATETIME);
                String photo = c.getString(TAG_PHOTO);

                // creating new HashMap
                HashMap<String, String> map = new HashMap<String, String>();

                // adding each child node to HashMap key (value)
                map.put(TAG_UID, uid);
                map.put(TAG_NAME, name);
                map.put(TAG_OVERALL, overall);
                map.put(TAG_APPLY_DATETIME, apply_datetime);
                map.put(TAG_PHOTO, photo);

                // adding HashList to ArrayList
                applicantsList.add(map);
           } catch (Exception e) {
                    e.printStackTrace();
                }
          return null;
      }
           SimpleAdapter adapter = new SimpleAdapter(
                        SignUpApplicantActivity.this, applicantsList,
                        R.layout.list_applicant, new String[] {
                                TAG_UID, TAG_NAME, TAG_OVERALL,
                                TAG_APPLY_DATETIME, TAG_PHOTO }, new int[] {
                                R.id.applicantUid, R.id.applicantName,
                                R.id.applicantOverall,
                                R.id.apply_datetime, R.id.list_image });
                // updating listView
                setListAdapter(adapter); 
```

也许我的代码可以帮助你！？！我做了

> convertDrawable(int 整数)

和 String.valueOf(convertDrawable(iconId))

> ```
> HashF.put(TAG_ID, String.valueOf(convertDrawable(iconId))); 
> ```

```
private void getList(JSONObject json) {
        try {
            details = json.getJSONArray(TAG_LIST);

            for (int i = 0; i < details.length(); i++) {

                JSONObject main = details.getJSONObject(i);
                Integer date = main.getInt(TAG_DATE);
                JSONArray nArray = main.getJSONArray(TAG_NOW);

                JSONObject detail = nArray.getJSONObject(0);
                Integer iconId = detail.getInt(TAG_ID);

                HashMap<String, String> HashF = new HashMap<String, String>();

                HashF.put(TAG_DATE, convertDate(date));
                HashF.put(TAG_ID, String.valueOf(convertDrawable(iconId)));

                fList.add(HashF);
            }
        } catch (Exception e) {

        }
        ListAdapter adapter = 
                new SimpleAdapter(getActivity(), 
                        fList, R.layout.list_item,
                new String[]{
                        TAG_DATE,
                        TAG_ID
                },
                new int[]{
                        R.id.datum,
                        R.id.icon_fore
                });

        setListAdapter(adapter);
    }

    public static String convertDate(Integer Time) {
        SimpleDateFormat sdf = 
                new SimpleDateFormat(
                        "dd, MMMM", Locale.getDefault());

        Calendar kal = 
                Calendar.getInstance();

        kal.setTimeInMillis(Time * 1000L);
        sdf.setTimeZone(kal.getTimeZone());
        return sdf.format(kal.getTime());

    }

    public static int convertDrawable(int aId){
        int icon = 0;

        if(aId == 8300){
            icon = R.drawable.draw1;
        }
        if (aId >= 7010 && actualId < 7919){
            icon = R.drawable.draw2;
        }
        if (aId >= 2010 && actualId <3010) {
            icon = R.drawable.draw3;
        }
        if (aId >= 3010 && actualId < 4010) {
            icon = R.drawable.draw4;
        }
        if (aId >= 6010 && actualId < 7010) {
            icon = R.drawable.draw5;
        }
        if (aId >= 5010 && actualId < 6010) {
            icon = R.drawable.draw6;
        }
        if (aId == 3801){
            icon = R.drawable.draw7;
        }
        if (aId == 8032){
            icon = R.drawable.draw8;
        }
        if (aId == 8083){
            icon = R.drawable.draw9;
        }
        if (aId == 8704) {
            icon = R.drawable.draw10;
        }

        return icon;
    } 
```

无论如何看看[Bitmap is not a Drawable](https://stackoverflow.com/a/9490060/5281666)

# android - 备份处理方向变化的用户输入的最佳方法

> ID：13450436
> 
> 赞同：2
> 
> 时间：2012-11-19T08:58:55.257
> 
> 标签：android, backup, fragment, orientation-changes

我正在开发一个简单的应用程序，允许用户在网站上发布文章。

它只是一个简单的表单，带有标题和文本的输入和一个发送按钮。

为此，我使用了一个 FragmentActivity，里面有一个名为 ArticleFragment 的 Fragment。

我到处读到保存用户输入的最佳方法是覆盖片段中的 onPause()，并在 onCreateView() 中恢复它们。

```
@Override
public void onPause() {
    Log.i(TAG, "Pausing fragment");
    Log.i(TAG, "Saving edits");

    // Sauvegarde des saisies
    EditText titreEdit = (EditText) getActivity().findViewById(R.id.titre_saisie);
    EditText texteEdit = (EditText) getActivity().findViewById(R.id.texte_saisie);
    String titre = titreEdit.getText().toString();
    String texte = texteEdit.getText().toString();

    SharedPreferences settings = getActivity().getPreferences(0);
    Editor editor = settings.edit();
    editor.putString("titre", titre);
    editor.putString("texte", texte);
    editor.commit();

    Toast toast = Toast.makeText(getActivity(), R.string.article_enregistre, Toast.LENGTH_SHORT);
    toast.show();

    super.onPause();
} 
```

如您所见，每次暂停活动时，都会显示一个 Toast 以通知用户输入已保存。

这就是我想要的。但是每当用户改变屏幕的方向时，弹出窗口就会再次显示（因为 Activity 被暂停，然后被销毁），这可能会惹恼用户。

我尝试在 Manifest 中添加 android:configChanges="orientation"，但我认为这不是处理此问题的最佳方法。

我也尝试使用 onSaveInstance() 解决方案，但我不明白它是如何工作的：有时 onSavedInstance 为空，有时不是。

有了这一切，主要问题是保存用户输入的最佳方式是什么，方向更改和后退按钮，以及在哪里恢复保存的内容。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T09:02:40.790

检查 onBackPressed() 和 onClick 中的输入值是否为空，该按钮将用户带到主页并显示适当的 Toast 消息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T09:25:28.623

将 android:configChanges="orientation" 添加到清单文件。覆盖 onConfigurationChanged。在调用 super.onConfigurationChanged 之前保存数据。如果您有不同的纵向和横向布局文件，则必须删除所有视图并 setcontentview 并初始化它们（就像您在 create 上所做的一样），在所有这些之后您可以恢复数据

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T09:39:50.170

我不太符合你的逻辑。让我们看看...您有两个编辑文本字段和保存按钮，当用户在销毁时更改屏幕方向时，您可以将输入保存在共享首选项或 Bundle 中，当 onCreate() 启动时，您可以检查值是否不为空，然后显示 toast有一个草稿。如果用户点击后退按钮，您还可以保存输入并显示 toast，如果他/她点击发送，您只需发送输入，对吗？

# session - 使用 struts2 在会话中维护用户详细信息

> ID：13450442
> 
> 赞同：0
> 
> 时间：2012-11-19T08:59:10.060
> 
> 标签：session, struts2

我有一个struts2 应用程序。在我的应用程序中，我使用

```
Map session = ActionContext.getContext().getSession();
session.put("login","true");
session.put("username",getUname1());
session.put("balance",balance); 
```

这边走。

如果一个用户可以登录，那么获取用户名和余额是没有问题的。如果假设多个用户可以登录，我将如何获取相应登录用户的余额。

请任何人帮助我。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T15:41:09.080

你不必费心。会话对于每个用户都是唯一的。当您尝试为用户获取余额值时，您将获取他登录时设置的值。您将无法通过会话获取其他用户的余额值。

# c# - 在服务器上创建子目录？

> ID：13450444
> 
> 赞同：-2
> 
> 时间：2012-11-19T08:59:20.080
> 
> 标签：c#, hosting

我正在用 c# 开发一个应用程序，它会提示用户输入目录名称，然后在我计划托管网站的服务器上创建目录。如何才能做到这一点 ？我需要调查什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T09:02:11.090

我会说你需要调查：

1）如何在C#中创建目录

2) 如何最好地授予运行 Web 应用程序的用户帐户执行文件系统操作的权限。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T09:04:36.153

```
// Create the folder
System.IO.Directory.CreateDirectory(path); 
```

但是您需要确保您对服务器具有写入权限，因此您可能需要研究*impersonation*。

# visual-studio-2010 - 单元测试：并行执行不起作用

> ID：13450451
> 
> 赞同：0
> 
> 时间：2012-11-19T08:59:46.440
> 
> 标签：visual-studio-2010, unit-testing

我在 Visual Studio 2010 中使用单元测试。我将 Local.testSettings 文件中的 Execution 元素更改为 `<Execution hostProcessPlatform="MSIL" parallelTestCount="4">` 但所有测试都按顺序运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T08:00:23.833

解决问题的步骤：

*   第 1 步 - 打开 Local.testsettings => “数据和诊断”选项卡，禁用所有角色。
*   第 2 步 -**重新打开 Visual Studio**

# cross-platform - 在 Windows 开发环境中为 SALOME 创建一个 OpenCascade 模块

> ID：13450452
> 
> 赞同：0
> 
> 时间：2012-11-19T08:59:55.217
> 
> 标签：cross-platform, opencascade

我阅读了有关如何在 LINUX 中执行此操作的教程，但看起来这不能如此轻松地移植到 Windows。SALOME 为我们提供了一个 windows 开发环境，并声称它是跨平台的：

[http://www.salome-platform.org/downloads/current-version](http://www.salome-platform.org/downloads/current-version)

但是文档没有指定 windows 中的模块创建过程（文档只能下载，所以我无法链接它）。要遵循 LINUX 教程，必须找到并编辑 Windows 发行版中缺少的几个文件。主要是这些文件在 linux salome 模块创建的 make 过程中使用。

我希望有人在这个领域有一些经验。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:20:38.160

SALOME 目前不支持 Windows，作为第 3 方依赖项。 [http://www.salome-platform.org/forum/forum_9/975821878](http://www.salome-platform.org/forum/forum_9/975821878)

# javascript - CKEDITOR: "CKEDITOR.plugins.add('...,{ init:function(editor).." 在这什么是 "editor".?

> ID：13450459
> 
> 赞同：0
> 
> 时间：2012-11-19T09:00:26.643
> 
> 标签：javascript, ckeditor

我不知道这是一个有效的问题。我已经看到插件和对话框定义的大多数 CKEditor 示例都使用变量**"editor"**。我想知道它是什么以及它的价值来自哪里。

例如

```
CKEDITOR.plugins.add( 'sample',
 {
  init : function( editor )
   {
    alert( 'Editor "' + editor.name + '" is being initialized!' );
   }
 }); 
```

在此示例行`init : function( editor )`中，有一个“编辑器”。我想知道它是什么以及它具有上述示例的所有功能`editor.name`。这些变量如何分配所有这些值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T09:04:29.490

该变量`editor`是您正在处理的 JavaScript CKEditor 对象的实例。

当 CKEditor 调用该`init`函数时，它将自己的实例作为函数参数传递（`editor`在您的示例中调用）。

这是列出编辑器实例的所有可用成员的[API 文档。](http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.editor.html)

# java - 如何在 Java 中获取 GoogleAuthorizationCodeTokenRequest 的授权码？

> ID：13450460
> 
> 赞同：5
> 
> 时间：2012-11-19T09:00:32.157
> 
> 标签：java, token, google-plus-signin

```
 HttpTransport netTransport = new NetHttpTransport();
        JsonFactory jsonFactory = new JacksonFactory();
        GoogleTokenResponse token;
        try {
            token = new GoogleAuthorizationCodeTokenRequest(
                    netTransport,
                    jsonFactory,
                    CLIENT_ID,
                    CLIENT_SECRET,
                    CODE,
                    REDIRECT).execute();

            GoogleCredential cd = new GoogleCredential().setAccessToken(token
                    .getAccessToken());

            Plus plus = Plus
                    .builder(new NetHttpTransport(), new JacksonFactory())
                    .setApplicationName(APP_NAME)
                        .setHttpRequestInitializer(cd).build();

            Person profile = plus.people().get("me").execute();

        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

大家好，我正在尝试在我的 Google App Engine 应用程序中从 Google + 获取一些用户信息，但我不知道要放置什么/如何获取 GoogleAuthorizationCodeTokenRequest 的 CODE 参数。任何帮助是极大的赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T17:04:34.273

您可以从重定向 URL 获取 de CODE。

```
HttpTransport httpTransport = new NetHttpTransport();
                JsonFactory jsonFactory = new JacksonFactory();

GoogleAuthorizationCodeFlow flow = new GoogleAuthorizationCodeFlow.Builder(httpTransport, jsonFactory, CLIENT_ID, CLIENT_SECRET,
        Arrays.asList(DriveScopes.DRIVE)).setAccessType("offline").setApprovalPrompt("auto").build();
String url = flow.newAuthorizationUrl().setRedirectUri(REDIRECT_URI).build();
res.sendRedirect(url); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-02T09:07:23.260

这里是如果你想从谷歌 api 获取代码

```
List<String> responsetype = Arrays.asList("code");

// Step 1: Authorize -->
String authorizationUrl = new GoogleBrowserClientRequestUrl(clientId, redirectUrl, Arrays.asList(scope))
            .setResponseTypes(responsetype)
            .build();

// Point or redirect your user to the authorizationUrl.
System.out.println("Go to the following link in your browser:");
System.out.println(authorizationUrl); 
```

它会从浏览器返回一个 URL 命中 url，你会在响应中得到一个代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-05T00:24:38.137

我会尝试改进 Remy Ticona 的答案。基本的 oAuth 授权流程是：

1.  请求用户访问。您的应用应将用户重定向到授权网址。在该页面上，谷歌要求用户访问。
2.  在用户授予访问权限后，他将被重定向到 REDIRECT_URL。在那里您可以选择最适合您的选项：
    1.  您的应用程序具有内置的网络浏览器。用于`urn:ietf:wg:oauth:2.0:oob:auto`网址。当用户授予访问权限时，您的应用应从网页标题中读取访问代码。
    2.  您的应用程序作为网络服务器。使用您的网络应用程序的网址。访问代码将是一个查询参数，您可以处理它
    3.  您的应用没有上述功能。`urn:ietf:wg:oauth:2.0:oob`用作 REDIRECT_URL 。当用户授予访问权限时，他将被重定向到带有访问代码的页面，并请求将其复制并粘贴到您的应用程序中。

您可以在此处找到详细信息：[https ://developers.google.com/identity/protocols/OAuth2InstalledApp?hl=RU#choosingredirecturi](https://developers.google.com/identity/protocols/OAuth2InstalledApp?hl=RU#choosingredirecturi)

小例子：

```
GoogleAuthorizationCodeFlow authorizationCodeFlow = new GoogleAuthorizationCodeFlow
                    .Builder(httpTransport, jsonFactory, clientId, clientSecret, scopes)
                    .setCredentialDataStore(new MemoryDataStoreFactory().getDataStore("tokens"))
                    .build();
String userId = "user-id";
Credential credential = authorizationCodeFlow.loadCredential(userId);
if (credential == null) {
        GoogleAuthorizationCodeRequestUrl authorizationUrl = authorizationCodeFlow.newAuthorizationUrl();
        authorizationUrl.setRedirectUri(GoogleOAuthConstants.OOB_REDIRECT_URI);
        LOGGER.error("Please, authorize application. Visit {}", authorizationUrl);
        Scanner s = new Scanner(System.in);
        String code = s.nextLine();
        GoogleAuthorizationCodeTokenRequest tokenRequest = authorizationCodeFlow.newTokenRequest(code);
        tokenRequest.setRedirectUri(GoogleOAuthConstants.OOB_REDIRECT_URI);
        GoogleTokenResponse tokenResponse = tokenRequest.execute();
        credential = authorizationCodeFlow.createAndStoreCredential(tokenResponse, userId);
    } 
```

# c - U-Boot：只读环境变量

> ID：13450461
> 
> 赞同：3
> 
> 时间：2012-11-19T09:00:33.417
> 
> 标签：c, boot, bootloader, u-boot, setenv

在 U-Boot 中，我们应该如何在启动期间配置一个只读的环境变量。`setenv`不应该允许对这个变量（在 U-​​Boot 控制台中或实际）上的IOW 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T21:34:30.387

您可能需要修改 U-Boot 源代码。
`ethaddr`有相似的特点；一经设置，`ethaddr`不可修改。此特性是硬编码的。

# java - 使用 apache DBUtils 调用存储过程

> ID：13450465
> 
> 赞同：0
> 
> 时间：2012-11-19T09:01:02.347
> 
> 标签：java, callable-statement, apache-commons-dbutils

我找不到我们如何使用 DBUtils 来调用可调用语句

我们能否指定哪些字段是输入，哪些字段是重新输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T09:03:40.380

你只需要使用一个`CallableStatement`

```
Connection con = ...; // get the connection
CallableStatement callStatement = con.prepareCall("{CALL yourStoredProcedure()}");
ResultSet rs = callStatement.executeQuery();
// do what you need to do 
```

# asp.net-mvc - WIF - Safari Cookie 在与 Azure ACS 一起使用时被截断。在 .NET 4.5 中工作？

> ID：13450466
> 
> 赞同：0
> 
> 时间：2012-11-19T09:01:01.683
> 
> 标签：asp.net-mvc, azure, safari, wif, acs

我有一个在 Windows Azure 上运行的 ASP.NET MVC4 应用程序，它使用 Azure ACS 进行联合身份验证。

当我们第一次开始测试应用程序时，由于 cookie 的大小，它可以在除 Safari 和 Opera 之外的所有浏览器中运行。

我在网上阅读了几篇要求我使用 FederatedAuthentication.SessionAuthenticationModule.IsSessionMode = true; 的文章

上面的语句会将数据存储在服务器端的cookie中。这解决了这个问题，因为客户端（浏览器）上只存储了一个会话标识符。

但是，该属性似乎已从 WIF 4.5 api 中删除。

你知道是否有解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T09:54:09.613

你保存原始令牌吗？您的 web.config 中是否有类似的内容，或者您​​是否将`saveBootstrapTokens`配置设置设置为 true：

```
<securityTokenHandlers>
    <securityTokenHandlerConfiguration saveBootstrapTokens="true" />
</securityTokenHandlers> 
```

如果你这样做，或者如果你不这样做，请尝试`saveBootstrapTokens`将`false`! 这将为您节省大量“空间”。

仅当我`saveBootstraptokens`设置为`true`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T18:26:37.337

是的-@astaykov 是正确的-这是其中的一部分。

根据@Dominick，它在 .NET 4.5 中称为“IsReferenceMode”。

# android - android 检测应用程序何时安装，暂停安装并提示警告框

> ID：13450467
> 
> 赞同：0
> 
> 时间：2012-11-19T09:01:03.637
> 
> 标签：android

是否可以运行广播接收器来**检测、暂停安装并**在安装应用程序时发出警报。

**onRecive**

```
public class Receiver extends BroadcastReciver{
public void onReceive(Context context, Intent intent ){

    if(intent.getAction().equals("android.intent.action.PACKAGE_INSTALL")){

    //i want to pause the installing activity and prompt an alert box
}
    }
} 
```

目的是，当要安装应用程序时，它会询问您是否真的要安装此应用程序。

在做了很多研发之后，我真的很想解决这个问题，如果你能帮我解决这个问题，非常感谢。

根据[这篇研究](http://www.patrickmcdaniel.org/pubs/ccs09a.pdf)论文，这是可能的。请看第 2 页图 1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T09:13:37.310

你不能暂停它。没有用于此的 API。这是一个系统级功能，不应由 3rd 方应用程序处理。

这是一种安全措施。如果每个应用程序都可以控制所有其他应用程序的安装，请想象一下！这将是一个重大的安全失误！因此它不可用。

但是，您可以检测软件包的安装。看到这个线程：

[接收包安装和卸载事件](https://stackoverflow.com/q/7470314/1369222)

# android - 哪个推特 API 支持收藏推文？如何在 Android 应用中支持推文？

> ID：13450468
> 
> 赞同：0
> 
> 时间：2012-11-19T09:01:09.373
> 
> 标签：android, twitter, twitter4j

我认为需要登录推特才能支持推文。目前我正在使用 Twitter API ME，但我不确定它是否支持收藏推文？我已经在使用 Twitter API ME 登录，我可以保留这个 API 还是需要继续？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T09:07:50.247

您可以在 android 上使用[Twitter4j](http://twitter4j.org/en/index.html)，它还具有[收藏推](http://twitter4j.org/en/javadoc/twitter4j/api/FavoriteMethods.html)文的 API ..

# ipad - Bonjour 服务在 iPad 上来得太晚了

> ID：13450469
> 
> 赞同：1
> 
> 时间：2012-11-19T09:01:11.793
> 
> 标签：ipad, bonjour

我在 iPad 上开发 bonjour 时遇到了一个奇怪的问题。

要求是这样的：

```
 a).I write the bonjour server on Mac and it works fine. 
    And iPad will conntect with this service by Wi-Fi. 
    This Wi-Fi network is created by this Mac(Internet sharing). 
    Thus once iPad joined into this Wi-Fi network, the bonjour browser
    program(which run in iPad) will find the service. 
```

步骤：

```
 a).firstly I am sure that this client program works fine. 
    It could find the serivce.
 b).But I want to make this program are stable under any condition. So I take a detail 
    test.
 c).One of the testcase is:
          1). The client program already run on iPad, and could find the service.
          2). Then, I make "WLAN off" in setting item(I close the connect from iPad).
          3). Then, I make "WLAN on" and select the same Wi-Fi network. 
```

问题来了：

```
 a). I find, the cilent program find the bonjour service sometimes take
      so long time(max time even 7 minutes),sometimes several seconds.
  b). And this is only happened under the condition whhich WI-FI created 
      as "Internet sharing from Mac". If I create the Wi-Fi as 
      "None Internet share", I could always found the bonjoure service
      within about 20 seconds. 
```

那么，“Wi-Fi 没有互联网共享和互联网共享（我知道 iPad 可以通过 Mac 的互联网共享上网”）有什么区别？

如何爱它？

# c++ - 共享内存多线程和数据访问？

> ID：13450474
> 
> 赞同：2
> 
> 时间：2012-11-19T09:01:40.233
> 
> 标签：c++, multithreading, performance, caching

关于性能，假设我们得到一个数据块，每个线程都会频繁访问这些数据，并且这些数据是只读的，这意味着线程除了读取数据之外不会做任何事情。

那么为每个线程创建这些数据的一个副本（假设那里的数据是只读的）是否有益？

如果所有线程共享频繁访问的数据（而不是每个线程一个副本），这不会增加这些数据被正确缓存的机会吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T09:31:19.917

*每个线程*一个只读数据副本不会帮助您进行缓存；恰恰相反，当线程在同一个多核（也可能是超线程）CPU 上执行并因此共享其缓存时，它可能会受到伤害，因为在这种情况下，数据的每个线程副本可能会竞争有限的缓存空间。

然而，在多 CPU 系统的情况下，现在几乎所有这些系统都是 NUMA，通常每个 CPU 内存组的访问成本在“本地”和“远程”内存之间略有不同，因此拥有*一个*- 只读数据的*CPU副本，放置在其本地内存库中。*

内存映射由操作系统控制，所以如果你走这条路，研究你的操作系统的 NUMA 相关行为是有意义的。例如，Linux 使用 first-touch 内存分配策略，这意味着内存映射不是在程序第一次访问内存页面时发生，`malloc`而是在程序第一次访问内存页面时发生，操作系统会尝试从本地银行分配物理内存。

并且通常的性能座右铭适用：衡量，不要猜测。

# java - Linux 的硬件中断 API

> ID：13450476
> 
> 赞同：1
> 
> 时间：2012-11-19T09:01:48.863
> 
> 标签：java, linux, usb

当我要通过 USB 端口连接设备时，我想立即检测到它。我正在寻找 Java API，我的主要目标是 Linux 操作系统。

有谁知道这样的API？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T09:12:07.203

你可以这样做：

```
try {
    String command = "lsusb"; // you may add some param if you want
                              // or use adb for instance
    Process child = Runtime.getRuntime().exec(command);

    // Get output stream to write from it
    OutputStream out = child.getOutputStream();

    // TODO parsing lsusb output

    out.close();
} catch (IOException e) {
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T12:10:08.577

还会考虑通过 DBus 接口监控 USB 事件

[这里](http://dbus.freedesktop.org/doc/dbus-java/)有 DBus-Java 库 和类似的线程，但在 python[上](https://stackoverflow.com/questions/5109879/usb-devices-udev-and-d-bus)

# c# - 用于在大写字符上拆分字符串的自定义功能无法按预期工作

> ID：13450478
> 
> 赞同：2
> 
> 时间：2012-11-19T09:01:52.137
> 
> 标签：c#, algorithm

```
public static string UpperCaseStringSplitter(string stringToSplit)
{
    var stringBuilder = new StringBuilder();
    foreach (char c in stringToSplit)
    {
        if (Char.IsUpper(c) && stringToSplit.IndexOf(c) > 0)
            stringBuilder.Append(" " + c);
        else
            stringBuilder.Append(c);
    }
    return stringBuilder.ToString();
} 
```

如果我传递这样的字符串：

```
TestSrak 
```

输出是预期的：`"Test Srak"`。

但是当有两个相同的字母，一个是小写，另一个是大写，则不会发生拆分：

例如如果输入是：

```
TestTruck 
```

输出也是`TestTruck`。你能告诉我问题出在哪里，我该如何解决。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T09:05:39.403

问题是这个

```
stringToSplit.IndexOf(c) > 0) 
```

在`"TestTruck"`第一个字母（索引== 0）也是一个`T`，因此它不会进入`if`。

相反，我会使用 a`for-loop`并检查当前字符是否是第一个，然后您可以跳过拆分：

```
for(int i=0; i < stringToSplit.Length; i++)
{
    if (i > 0 && Char.IsUpper(stringToSplit[i]))
        stringBuilder.Append(" ").Append(stringToSplit[i]);
    else
        stringBuilder.Append(stringToSplit[i]);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T09:07:26.113

试试这个：

```
public static string UpperCaseStringSplitter(string stringToSplit)
{
    var stringBuilder = new StringBuilder();
    for(int i = 0; i <stringToSplit.Length; i++)
    {
        char c = stringToSplit[i];

        if (Char.IsUpper(c) && i > 0)
            stringBuilder.Append(" " + c);
        else
            stringBuilder.Append(c);
    }
    return stringBuilder.ToString();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T09:12:18.567

[Tim Schmelter 的回答](https://stackoverflow.com/a/13450527/961113)已经确定了您的代码问题，但是如果您尝试在字符串中的大写字符之前附加一个空格，那么您可以尝试以下*操作（使用 LINQ）*

```
string str = "TestTrak";
string newString = string.Join("",
                         str.Select(r=> char.IsUpper(r) ?" " + r: r.ToString()));
newString = newString.Trim(); //to remove space from the start 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T09:13:29.807

试试这个：

```
if (string.IsNullOrWhiteSpace(stringToSplit)) return stringToSplit;
var stringBuilder = new StringBuilder();
for (int i = 0; i < stringToSplit.Length; i++)
{
    if (Char.IsUpper(stringToSplit[i]))
    { 
        stringBuilder.Append(" ");
    }
    stringBuilder.Append(stringToSplit[i]);
}
return stringBuilder.ToString().Trim(); 
```

# web - 通过 Internet 访问 weblogic web-app

> ID：13450484
> 
> 赞同：1
> 
> 时间：2012-11-19T09:02:16.707
> 
> 标签：web, webserver, weblogic, java-ee-5

在我目前的工作中正在进行的一个项目中，我遇到了一个有害的问题。我们有一个内部网络应用程序运行在**1.1.1.1:123/webapp**。客户希望通过**www.webapp.com**访问网络应用程序。

Internet 服务器端口转发到本地服务器。所以当我调用**www.webapp.com:123/webapp**时，我可以访问该应用程序，但我如何仅通过 www.webapp.com 访问该应用程序？

我们正在使用 weblogic server 11g 和 java 1.5 应用程序

提前致谢

# jquery - 仅在特定区域刷新页面

> ID：13450487
> 
> 赞同：1
> 
> 时间：2012-11-19T09:02:21.413
> 
> 标签：jquery, mysql, reload

> **可能重复：**
> [Javascript 自动更新页面？](https://stackoverflow.com/questions/9999112/javascript-auto-update-page)

好的...所以我正在尝试使用 php 构建一个消息传递系统，当收到一条消息时，我需要这个小数字 >>>Messages (0)<<< 更改为新的数量，而无需重新加载整个页面。如果我可以用 jquery 或其他东西重新加载整个页面，然后只是改变的东西会改变，那就太好了......这就是我真正想要的。

该数字来自与登录用户相关的数据库中未读消息的数量。在图像中，您可以看到新消息进入时数字显示的位置，但直到页面加载...我需要它来检查至少 2 个不同位置的更改并每 30 秒运行一次查询。 ![在此处输入图像描述](../Images/57a2162fefa6162397b6c237c4b3633b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T12:02:29.233

您将需要**AJAX**，这是一个示例：

首先，当您加载页面时，您需要获取发送的消息的最后一个 ID。

```
$lastID = SELECT MAX(id) AS `id` FROM `messages` WHERE `to` = . getLoggedUserId() 
```

然后，您需要将其传递给 Ajax：

```
$(document).ready(function(){
    setInterval(function(){
        $.get("page.php?checkMessages&lastID=<?php echo $lastID; ?>", function(amount){
            if(amount > 0){
                $("span.newMessages").text(amount);
            }
        })
    },10*1000); // every 10 seconds
}) 
```

在*page.php 上*，您将拥有：

```
<?php
    if( isset($_GET["checkMessages"]) ){
        $lastID = (int)$_GET["lastID"]; // just for security
        $newMessages = 'SELECT COUNT(*) AS `amount` FROM `messages` WHERE `id` > ' . $lastID . ' AND `to` = ' . getLoggedUserId()
        echo $newMessages;
        exit;
    }
?> 
```

然后，每 10 秒，只会`span`加载新消息的数量。

# antlr - Antlr 词法分析器支持出现的范围？

> ID：13450489
> 
> 赞同：4
> 
> 时间：2012-11-19T09:02:27.307
> 
> 标签：antlr, lexer

Antlr 的词法分析器支持 Kleene 闭包 ( `*`) 和正 Kleene 闭包 ( `+`)，分别表示字符在非正数/正数时间的出现。Antlr 的词法分析器是否有一个结构来支持某个字符的一系列出现，就像正则表达式一样，比如`'a' {8,16}`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T09:33:58.733

不，那里没有。不在 ANTLR v3 中，也不在未来（现在处于测试阶段）ANTLR v4 中。

您可以使用谓词¹来（手动）计算规则匹配的字符数，并在预定义的数字后停止匹配。

* * *

¹ [ANTLR 中的“语义谓词”是什么？](https://stackoverflow.com/questions/3056441/what-is-a-semantic-predicate-in-antlr3)

# php - PHP, Yii 用户扩展

> ID：13450493
> 
> 赞同：4
> 
> 时间：2012-11-19T09:02:43.863
> 
> 标签：php, yii, xampp

我尝试安装 yii 扩展[http://www.yiiframework.com/extension/yii-user/](http://www.yiiframework.com/extension/yii-user/)并尝试插入命令 'yiic migrate --migrationPath=user.migrations'。如何正确地做到这一点，而不是：

```
C:\xampp\htdocs\eshops\protected>..\framework\yiic migrate --migrationPath=modules.user.migrations
Error: The migration directory does not exist: modules.user.migrations
C:\xampp\htdocs\eshops\protected>cd ..
C:\xampp\htdocs\eshops>framework\yiic migrate --migrationPath=protected.modules.user.migrations
Error: The migration directory does not exist: protected.modules.user.migrations
C:\xampp\htdocs\eshops>cd protected
C:\xampp\htdocs\eshops\protected>..\framework\yiic migrate --migrationPath=user.migrations
Error: The migration directory does not exist: user.migrations 
```

我有 XAMPP 和 Windows 7。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-01T15:28:58.103

答案是 ：

有 2 个文件名为`yiic.php`

1.  ../yii/framework/yiic.php

2.  .../protected/yiic.php

你应该使用第二个

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T10:31:09.653

利用`yiic migrate --migrationPath=application.modules.user.migrations`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-01T20:14:37.017

确保你有最新版本的 yii-user，它比你想象的要难！安装 yii-user 时有几个问题，本文将介绍这些问题以使迁移工作。

[http://www.bigsoft.co.uk/blog/index.php/2013/12/08/which-is-the-latest-version-of-yii-user](http://www.bigsoft.co.uk/blog/index.php/2013/12/08/which-is-the-latest-version-of-yii-user)

# c++ - 在 C Linux 中捕获系统事件

> ID：13450496
> 
> 赞同：3
> 
> 时间：2012-11-19T09:03:16.597
> 
> 标签：c++, c, linux, system

我正在 Linux 上编写一个应用程序，它需要我捕获系统事件，例如：

1.  系统重启
2.  用户“xyz”登录
3.  “xyz”应用程序崩溃等。

并需要基于此执行一些功能。例如：

1.  运行备份脚本
2.  运行恢复程序等。

谁能告诉我如何在 C/Linux 中捕获系统事件？

PS：我不是在这里谈论“文件系统”事件：P

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T09:42:49.710

没有“系统事件”的概念。您需要指定需要处理的事件并实施适当的机制来处理每个事件：

*   系统启动：`init`进程在启动期间调用脚本`/etc/init.d`。确切的基础架构在发行版之间略有不同，但[Linux 标准基础](http://refspecs.linuxfoundation.org/lsb.shtml) [系统初始化](http://refspecs.linuxfoundation.org/LSB_4.1.0/LSB-Core-generic/LSB-Core-generic/tocsysinit.html)通常应该适用于所有发行版。

*   用户登录/注销：LSB 还定义了[Pluggable Authentication Modules](http://pam.sourceforge.net/)库的接口。您可以实现将在登录期间调用的共享库（以及其他需要身份验证和授权的操作）。根据您想要做什么，可能已经有一个适合您的模块，因此请先尝试寻找它。在任何一种情况下，我都不认为有独立于发行版的安装方式，即使在给定的发行版上，您也必须考虑管理员可能进行了自定义修改，因此安装需要管理员手动干预。

*   应用程序崩溃：您必须对其进行检测。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-19T10:02:31.987

我认为您应该考虑阅读系统日志-您询问的所有内容都记录到系统日志中（用于标准配置）。如果您的系统使用 syslog-ng，那么您甚至可以将其配置为直接写入您的程序，有关详细信息，请参阅[http://www.syslog.org/syslog-ng/v2/#id2536904](http://www.syslog.org/syslog-ng/v2/#id2536904)。但即使使用任何其他 syslog 守护程序，您也始终可以从 /var/log 读取文件（或多个文件），就像`tail -f`对特定消息做出反应一样。

我不确定捕获应用程序崩溃 - 有一个内核选项可以记录用户进程中的每个 SIGSEGV，但 AFAIK 它仅在 ARM 架构上可用 - 最后的手段是检测你的应用程序（正如 Jan Hudec 指出的那样）记录一些东西到系统日志。

# c# - 使用 Web 应用程序中的 Photoshop 文件

> ID：13450500
> 
> 赞同：6
> 
> 时间：2012-11-19T09:03:33.837
> 
> 标签：c#, php, web-applications, photoshop, photoshop-script

我想与 Photoshop 文件交互并使用其动作和智能对象创建图像。

是否有任何 php 或 C# API 可以做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-02T21:32:33.213

首先，我想让你反思一下这种事情的合法性。Adobe 会让您实际上只是将他们的应用程序代理到网络吗？我看到他们有很多许可证，所以也许其中一个实际上授予您这样做的权限（但是，仍然可能有一些警告，所以我建议您阅读一下）。由于不是这个问题，我不再谈论这个，我只是想提一下，因为它应该是相关的。

现在，对于实际问题 - 如果您查看 Microsoft Office Interop，Microsoft 声明它在服务器端环境中不受支持。转到[此 Microsoft 页面](http://support.microsoft.com/default.aspx?scid=kb;EN-US;q257757#kb2)并阅读更多信息部分中使用 Office 服务器端自动化的问题。

如果您决定在服务器端运行常规客户端应用程序，则会出现几个问题，如上述页面所述，但最重要的问题之一如下：

> **与桌面的交互性：** Office 应用程序假定它们在交互式桌面下运行。在某些情况下，可能需要使应用程序可见，某些自动化功能才能正常工作。如果发生意外错误，或者如果需要未指定的参数来完成某个功能，Office 旨在通过一个模式对话框提示用户，询问用户想要做什么。无法关闭非交互式桌面上的模式对话框。因此，该线程无限期地停止响应（挂起）。尽管某些编码实践可以帮助降低出现此问题的可能性，但这些实践并不能完全防止该问题。**仅这一事实就使得从服务器端环境运行 Office 应用程序存在风险且不受支持。**

虽然这是 Microsoft 为其产品编写的，但它们或多或少适用于任何常规客户端应用程序。即使你仍然决定采用这种方法，正如 Neville K 已经建议的那样，这将是一项非常耗费资源的任务。

考虑到上述情况，我可能会问一个不同的问题，即“使用什么库或服务器端应用程序来做你需要对图像做的任何事情”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-19T09:44:18.037

基于[此链接](http://www.adobe.com/devnet/photoshop.html)，您可以使用 Photoshop SDK 执行此操作[：](http://www.adobe.com/devnet/photoshop/sdk.html) “使用 Photoshop SDK，您可以使您的应用程序通过 TCP 连接驱动和/或与 Photoshop CS6（版本 13.0.0 或更高版本）通信。现在可以创建一本包含 Photoshop 教程的电子书，允许用户从电子书中驱动 Photoshop CS6 中的操作”

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-07T15:24:02.237

这听起来很难，但有些[公司似乎让它发挥了作用](http://www.markupwand.com/faq)。[Xee也可以阅读 PSD（并且](http://wakaba.c3.cx/s/apps/xee.html)[在源代码中](http://www.jwz.org/blog/2012/11/psd/)有关于这种格式的史诗般的评论）。

但是引用[HN](http://news.ycombinator.com/item?id=4746924)的某人的话：

> PSD**从未打算成为一种数据交换格式**：它是单个程序的序列化格式，它比几乎任何其他软件都具有更多实际人们所依赖的独立不相关的功能，并且保持了惊人的向后兼容性和几乎不间断的向前兼容性。在其超过二十年的存在期间的兼容性。这个产品的“文件格式”需要在这种情况下受到批评，以及类似的大型程序，如 Office。因此，我很难理解为什么有人会认为 PSD 文件将成为某种组织良好的文件格式，他们应该能够轻松地从自己的应用程序中解析出来，这只是天真的一厢情愿：**甚至 Adob​​e 的其他产品在打开这些文件时也有限制；要真正操作这些文件，您确实需要与 Photoshop 的特定编辑模型高度兼容**（因此这两类文件格式之间存在概念差异）。

我建议查看 Xee 以获取服务器端实用程序。

祝你好运。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-19T10:44:21.710

如果您真的愿意，您可以使用脚本界面从任何 Web 语言启动“Shell”任务。

但是，我非常担心这种方法 - Photoshop 的内存要求只能支持几个用户，并且您需要一个相当复杂的轮询机制来检查“shell”任务的结果。Photoshop 根本不是为了以这种方式为网站提供动力的。

考虑改用图形库——我过去使用过 ImageMagick，效果很好。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-06T21:24:33.690

注意警告，你真的不能用 Photoshop 一次处理超过 1 或 2 张图像而不会使你的服务器崩溃，所以仅仅把它放在你的网络服务器上是不可能的。对于大多数任务来说，重量更轻的图像库要好得多。

但是您可以从您的 Web 应用程序中对作业进行排队，然后在另一台计算机上处​​理它们，或者将其限制为一次只处理一个。

Adobe 有宏和完整的基于动作/javascript 的脚本环境，您可以从命令行或 com 启动。

**Adobe 脚本指南**

[http://wwwimages.adobe.com/www.adobe.com/content/dam/Adobe/en/devnet/photoshop/pdfs/photoshop_cs5_scripting_guide.pdf](http://wwwimages.adobe.com/www.adobe.com/content/dam/Adobe/en/devnet/photoshop/pdfs/photoshop_cs5_scripting_guide.pdf)

对于旧版本的 Photoshop，您可以使用宏功能来录制动作。然后，从动作中创建一个液滴。使用图像文件作为唯一参数从命令行调用液滴。图像文件的路径可能需要是绝对路径。

# javascript - 如何使用诸如“function someName(){}”之类的名称调用函数？

> ID：13450504
> 
> 赞同：1
> 
> 时间：2012-11-19T09:03:50.453
> 
> 标签：javascript

我在 JavaScript 中有一个私有函数的名称作为字符串，如何调用该函数？

```
var test = function () {

    this.callFunction = function(index) {
        return this["func" + index]();
    }

    function func1() { }
    function func2() { }
    ...
    function funcN() { }
}

var obj = new test();
obj.callFunction(1); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T09:06:50.990

`func1`和朋友是局部变量，而不是对象的成员。你不能这样称呼他们（至少不能以任何理智的方式）。

用函数表达式（而不是函数声明）定义它们并将它们存储在一个数组中。

```
var test = function () {

    this.callFunction = function(index) {
        return funcs[index]();
    }
    var funcs = [
         function () {},
         function () {},
         function () {}
    ];
}

var obj = new test();
obj.callFunction(0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T09:07:25.040

正如您的代码所代表的那样，这些函数不作为实例的属性存在。您需要做的是将它们创建为上下文的属性。

```
var test = function () {

    this.callFunction = function(index) {
        return this["func" + index];
    }

    this.func1 = function() { }
    this.func2 = function() { }
    ...

}

var obj = new test();
obj.callFunction(1)(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T09:13:15.627

您可以使用私有函数数组：

```
var test = function() {
    var func = [
        function() { return "one" },
        function() { return "two"; }
    ]
    this.callFunction = function(index) {
        return func[index]();
    }
}

var obj = new test();
var ret = obj.callFunction(1);
console.log(ret);​
​ 
```

[http://jsfiddle.net/V8FaJ/](http://jsfiddle.net/V8FaJ/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T09:07:02.057

你可以使用评估

```
var test = function () {

    this.callFunction = function(index) {
        return eval("func" + index + '()');
    }

    function func1() {
        return 1;
    }

    function func2() {
        return 2;
    }

    function funcN() { }
};

var obj = new test();
obj.callFunction(2); 
```

**评估是邪恶的**

# abap - ABAP 中的冒烟测试和猴子测试

> ID：13450505
> 
> 赞同：3
> 
> 时间：2012-11-19T09:03:57.137
> 
> 标签：abap, smoke-testing, monkey-testing

如何在 ABAP 中进行烟雾和猴子测试？有没有工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T09:48:21.137

烟雾测试可以通过使用[eCATT](http://help.sap.com/saphelp_nw04/helpdata/en/1b/e81c3b84e65e7be10000000a11402f/content.htm)实现自动化。请注意，创建 eCATT 测试非常耗时，因此您应该事先进行成本效益分析。

我不知道任何用于猴子测试的工具，除了可能创建一个使用随机生成的数据的 ABAP 单元测试套件。

# php - 使用 Salt 加密密码 PHP

> ID：13450509
> 
> 赞同：-1
> 
> 时间：2012-11-19T09:04:15.353
> 
> 标签：php, security, salt

这是我的代码，

```
 <?php 

    function($string){
    $salt = "@x5v";
    $hash = sha1(md5($salt.$string)).md5($string).sha1(md5($string));
    return $hash;
    }   
    ?>
    <?php

    print "<center>";
    if(isset($_POST['username'])){
    echo 'Variable is set and I can use it!';
   }
   $Username = $_POST["username"]; 
   $Password = md5($_POST["password.$hash"]);
   $Email  = $_POST["email"];

?> 
```

我认为这是导致问题的这条线：

```
$Password = md5($_POST["password.$hash"]); 
```

将用户密码传递到数据库的正确语法是什么，用我上面定义的字符串加密？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T10:04:23.573

> 我认为这是导致问题的这条线：
> 
> $Password = md5($_POST["password.$hash"]);

你在这里做的是不正确的。它应该是：

```
$Password = md5($_POST["password"] . $hash); 
```

你所做的实际上是使用一个最终会像“password.fdg858fug83u5g5”这样的键来索引 $_POST。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T09:06:35.280

我推荐这个库而不是滚动你自己的解决方案：

[http://www.openwall.com/phpass/](http://www.openwall.com/phpass/)

这是一篇解释如何使用它的文章：

[http://sunnyis.me/blog/secure-passwords/](http://sunnyis.me/blog/secure-passwords/)

您也应该阅读这个 StackOverflow 答案：

[https://stackoverflow.com/a/6337021/943102](https://stackoverflow.com/a/6337021/943102)

# sql - 从excel导入数据并插入sql表

> ID：13450513
> 
> 赞同：4
> 
> 时间：2012-11-19T09:04:31.463
> 
> 标签：sql, sql-server, excel

我正在从 excel 导入数据并插入到 sql 表中。我的 Excel 文件中的一个字段填充了时间值。我想将该时间值作为字符串导入到我的 sql 表中。当我这样做时，我在我的 sql 表中得到一个奇怪的值。Excel 值为：**07:00**并将其作为字符串插入 sql 表后，时间值如下所示：**0,29166666667**。

将其作为字符串值导入的原因是您必须能够在同一字段中定义 Days。像这样：**D2 10:30**。当我导入这种值时，它会正确插入。

谁能帮忙？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T09:10:55.743

Excel 将日期和时间存储为从 0 到 0.99999999 +x 天的数值。

0.29166666667 就像`00.01.1900 07:00:00`，这​​在您的情况下似乎是正确的。

因此，在将其用作直接字符串输入之前，您必须对该值进行一些重新格式化或转换。

在 VBA 中，您可以使用`Format(myValue,"DD-MM-YYYY hh:mm:ss")`.

等效的工作表函数是`TEXT(A1,"DD-MM-YYYY hh:mm:ss")`.

格式代码取决于您的区域设置。`Format(myTime, "Long Time")`如果您更喜欢使用 excel 定义的时间格式，您可能想尝试这样的事情。

因为您没有发布任何代码，所以我不确定您如何导入您的 excel 数据。但我想说，获得更好结果的最快方法是设置一个新列，使用`TEXT`引用先前时间列的公式，并使用这个新的格式化列作为 sql-db 的输入。

# javascript - 粘贴内容时如何在 Nic Editor 中获取格式化文本？

> ID：13450515
> 
> 赞同：0
> 
> 时间：2012-11-19T09:04:43.493
> 
> 标签：javascript

在从 excel 复制并将其粘贴到 Nic 编辑器时，我只需要获取没有样式的内容。我怎样才能实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T09:39:16.507

NicEditor（0.9 版）没有任何与处理粘贴内容相关的代码。它依赖于[contenteditable](http://html5doctor.com/the-contenteditable-attribute/)属性的机制。在此处查看脑死亡简单示例[http://jsfiddle.net/WLPbY/](http://jsfiddle.net/WLPbY/)

从上面的示例中将一些样式化的内容粘贴到 div 中 - 您会看到它是样式化的，并且看起来就像粘贴到 NicEditor 时所做的一样（所有这些都通过向`contenteditable`div 添加属性来实现）。

至于如何解决您的问题 - 您可以尝试对[粘贴事件](http://help.dottoro.com/ljuimtmq.php)进行操作以对粘贴的数据进行操作以获取它并去除任何不需要的样式。

# java - Facebook如何实现附加链接

> ID：13450521
> 
> 赞同：0
> 
> 时间：2012-11-19T09:05:22.837
> 
> 标签：java, html

*Facebook*可以（几乎）总是从页面中提取最重要的文本内容和图像。我认为一个通用的解析规则不能做到这一点。

*Facebook*是如何实现的？是否准备好解析热门网站链接的规则？还是有一种更聪明的方法可以从 html 中找出真实内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T09:10:46.240

元标记。许多网站甚至会通过使用开放图形`og` `<meta>`标签来优化 facebook。即使是那些不使用的`og`，通常也会有`<meta>`带有有用信息的标签，如摘要、标题、图像等。

[https://developers.facebook.com/docs/opengraph/keyconcepts/](https://developers.facebook.com/docs/opengraph/keyconcepts/)

所以回答你的问题 - 他们没有。网站为他们做这件事。

# php - 如何检测用户来自智能手机

> ID：13450522
> 
> 赞同：0
> 
> 时间：2012-11-19T09:05:22.950
> 
> 标签：php, .htaccess, user-agent, smartphone, google-ads-api

我如何知道用户是否通过智能手机（尤其是 iPhone 和 Android）访问了我的网站？

我想将用户重定向到一个专门的网站，所以**PHP**检测和**htaccess**检测都很好。

更具体地说，用户将来自**AdWords**广告系列。AdWords 是否在 URL 中添加一些相关的内容会有所帮助？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T09:15:42.400

我一直在将它用于一个项目。我相信大约一年前我在 stackoverflow.com 上找到了这段代码。您可以修改 if 语句以仅重定向特定设备或重定向到每个设备的特定站点。这是一个包罗万象的方法，可将任何移动设备重定向到[http://www.example.com/mobile](http://www.example.com/mobile)页面。我将它放在一个在每个页面的标题中调用的函数中（因为我拥有的每个页面都包含相同的 header.php）。

```
$iphone = strpos($_SERVER['HTTP_USER_AGENT'],"iPhone");
$android = strpos($_SERVER['HTTP_USER_AGENT'],"Android");
$palmpre = strpos($_SERVER['HTTP_USER_AGENT'],"webOS");
$berry = strpos($_SERVER['HTTP_USER_AGENT'],"BlackBerry");
$ipod = strpos($_SERVER['HTTP_USER_AGENT'],"iPod");
$ipad = strpos($_SERVER['HTTP_USER_AGENT'],"iPad");

if($iphone || $android || $palmpre || $ipod || $berry || $ipad == true) 
{ 
    header('Location: mobile');
} 
```

我从未使用过 AdWords，但我发现此页面详细介绍了向 URL 添加 GET 变量：[在链接中使用 AdWords 动态参数](http://certifiedknowledge.org/blog/using-adwords-dynamic-parameters-in-links/ "在链接中使用 AdWords 动态参数")

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-31T15:59:19.873

我查看了用户代理字符串：

[http://www.useragentstring.com/](http://www.useragentstring.com/)

老实说，最简单的方法似乎是检查 $_SERVER['HTTP_USER_AGENT'] 是否包含“Mobile”一词。

现在，当然，这可以检测到任何移动设备、智能手机或平板电脑，所以它可能不适合您的情况，但它似乎是我作为 Web 开发人员的最大区别——是我在现代“移动”浏览器上的用户，或者它们在 PODB（普通的旧桌面浏览器）上？:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T09:19:28.713

此信息已经在 $_SERVER 超全局中。你所要做的就是找到`Iphone/Ipdad etc`内在的发生`$_SERVER['HTTP_USER_AGENT']`

只需定义一些可以为您执行此操作的函数，然后重定向到特定页面，如下所示（这是程序方法）：

```
<?php

$mobile = array('Iphone', 'Androind'); //etc add more

//We won't use global keyword
//We would pass an array as arg instead
function isMobile(array $mobile){
  foreach($mobile as $agent){

     if ( strpos($_SERVER['HTTP_USER_AGENT'], $agent) ){
         //mobile detected
         //or return its name, do it the way you like
         return true;
     }
  }
}

//Now simply check then do redirect, like this
if ( isMobile($mobile) ){

   header('Location: /some-mobile-page.php')

} else {
  header('Location: /regular-page.php');
} 
```

# vim - VIM 支持通过 SFTP 上传

> ID：13450525
> 
> 赞同：5
> 
> 时间：2012-11-19T09:05:33.553
> 
> 标签：vim, plugins, sftp

我习惯了 Sublime 的插件，它可以让你在本地项目和远程项目之间进行映射。通过这样做，当您完成编辑文件时，您可以执行右键单击和“上传文件”操作，这会自动更新远程服务器中的文件。

我想知道在使用 VIM 编程时最好的方法是什么。我正在寻找一种简单的方法来将本地项目映射到远程项目并能够轻松上传文件。

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-19T09:28:13.427

如果您只想在远程服务器上编辑文件，请尝试 vim 的`netrw`功能：

```
vim scp://you@yourserver//path/to/directory/ 
```

直接编辑文件：

```
vim scp://you@yourserver//path/to/directory/somefile.txt 
```

或者，如果您已经在 中`vim`，请点击`ESC`，然后键入：

```
:e scp://you@yourserver//path/to/directory/ 
```

这假设：

1.  您已经`ssh`安装了（通常是 Linux 或 OSX 的情况；如果您在 Windows 上，则视情况而定）。
2.  您可以通过一些方便的方法（和密钥）`ssh`访问服务器`sshagent`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T09:28:55.970

大多数严肃的 FTP 客户端允许您在本地编辑远程文件。Filezilla、gFTP、Transmit、Cyber​​duck、YummyFTP……它们都有自己的“Edit in……”按钮。GUI FTP 客户端可能不是性感的黑客工具，但它们工作*得*很好。

其中一些重要的 FTP 客户端具有同步功能或文件夹监视程序。可能值得您花时间四处寻找这样的功能。

当然，你也可以使用 Vim 本身通过 FTP 或 SFTP 编辑远程文件：

```
$ vim sftp://user@machine/filename
$ vim ftp://user@machne/filename 
```

并列出远程文件：

```
$ vim sftp://user@machine/directory/ 
```

有关`:help netrw`更多信息，请参阅。

你是否考虑过使用像 Subversion、Git 或 Mercurial 这样的 VCS？

# c# - 基于自定义事件触发器的asp.net basend中的更改值控制

> ID：13450533
> 
> 赞同：0
> 
> 时间：2012-11-19T09:06:05.333
> 
> 标签：c#, asp.net

嗨，我想在事件触发时更新文本框中的值..我知道如何在 winform 中执行此操作..但我无法在 webform 中执行此操作..

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if(IsPostBack)
           return;
        else 
           myClass.MyEvent += new MyClass.MyEventDelegate(Default_MyEvent);
    }

    private void Default_MyEvent(string value)
    {
        txtBox.Text = value;
    } 
```

上面的代码不会改变我在 asp.net 中的文本框的文本值，但它可以在 winform 中工作。如何在网络表单中做到这一点？

*编辑

我尝试通过网络上的套接字创建文件传输应用程序。我已经在桌面应用程序中完成了这项工作。基本上，当客户端打开网页时，客户端将连接到特定端口上的服务器。并且从服务器传输到客户端的每个数据，然后在Web表单中文本框的文本都会发生变化。

# ruby-on-rails - 如何在 Ruby 中对获取参数和检查 nil 的代码进行重复数据删除

> ID：13450537
> 
> 赞同：1
> 
> 时间：2012-11-19T09:06:44.120
> 
> 标签：ruby-on-rails, ruby, design-patterns, reflection, metaprogramming

```
token = params[:token]
email = params[:email]
phone_number = params[:phone_number]
iso_code = params[:iso_code]

if token.nil? or email.nil? or phone_number.nil? or iso_code.nil?
  raise InvalidParameterException
end

token.strip!
email.strip!
phone_number.strip!
iso_code.strip!

#use the variables 
```

我的 rails 项目中有很多这样的代码。您如何在 Ruby on Rails 中推广这种模式？
反射和元编程有可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T09:26:54.663

```
unless [:token, :email, :phone_number, :iso_code].-(params.keys).empty?
  raise InvalidParameterException
end
params.each{|_, v| v.strip!} 
```

然后，就像`params[:token]`每次一样使用它。`params`也许您可以为like使用更短的变量名`p`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T09:29:27.740

我认为在这种情况下不需要元编程或模式，只是常识：

```
[:token, :email, :phone_number, :iso_code].each do |k|
  raise InvalidParameterException if params[k].nil?    
  params[k] = params[k].strip
end 
```

我从来没有理解过这种反模式的流行：

```
par_1 = params[:par_1]
...
par_n = params[:par_n] 
```

为什么不使用`params[:par_x]`呢？使用在散列中分组的 params 变量通常比将它们存储到一堆局部变量中更方便。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T09:16:26.417

您可以定义以下方法：

```
def verify_presence_define_var_and_strip(params, symbol_list)
  symbol_list.each do |s|
    raise InvalidParameterException if params[s].nil?
    define_method s, params[s].strip
  end
end 
```

使用此方法，您的代码可以替换为：

```
verify_presence_define_var_and_strip(params, [:token, :email, :phone_number, :iso_code]) 
```

请注意，它将定义方法，而不仅仅是设置局部变量，但如果您的类中还没有具有此名称的方法，您应该得到相同的结果。

您可能更喜欢使用该`instance_variable_set`方法，但您必须在变量名前加上`@`.

[更新]

如果你真的想定义局部变量而不是方法/实例变量，我不知道使用 eval 的其他解决方案：

```
eval "#{s} = #{params[:s].strip}" 
```

但是，如果您搜索一下`eval`，您会发现，这被认为是**不好的做法**，而且在这种情况下，您将评估来自 URL/POST 参数的值！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T09:10:30.277

创建一个辅助方法来访问 params 哈希并遍历元素并检查 nil 并抛出异常本身或将值返回给可能抛出异常的调用方法。

你可以像这样迭代任何哈希，

```
hash.each do |key,value|
 #example nil check
  if value.nil?
    #do what you want
  end
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-19T09:27:49.573

如果你想在你的参数散列中提高 nil ，你可以这样做

```
raise InvalidParameterException if params.values.include? nil 
```

如果您只想提高某些特定参数，则必须首先选择与这些键关联的值：

```
required_keys = [:key1, :key2, :key3]
raise invalidParameterException if required_keys.map{|k| params[k]}.include? nil 
```

编辑：由于缺少积分而无法回答，但我相信其中一个答案不起作用：

```
[:some_key] - {some_key: nil}.keys   # => [] 
```

如果参数哈希包含一个用值 nil 初始化的键（由于解析失败或用户输入无效），则数组减法不起作用。

# sugarcrm - SugarCE：如何根据变化的时间条件更新表字段

> ID：13450540
> 
> 赞同：0
> 
> 时间：2012-11-19T09:06:51.623
> 
> 标签：sugarcrm

我使用 SugarCE v 6.5.4 。我需要根据数据库表数据中的时间条件来更新数据库表字段的状态。每 5 分钟检查一次条件，如果满足更新表的状态。它怎么能做到？请给我一个解决方案。

谢谢， 阿内斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T07:35:29.450

您应该设置一个每 5 分钟运行一次的调度程序，它会执行您想要的查询和操作。看看[http://developers.sugarcrm.com/wordpress/2012/09/07/adding-your-own-reoccuring-jobs-to-the-scheduler/](http://developers.sugarcrm.com/wordpress/2012/09/07/adding-your-own-reoccuring-jobs-to-the-scheduler/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T16:31:10.517

您可以从 as400 或主表加入您的 suagrcrm 数据库，并在任何 mySQL 数据库中直接传递值。

或者另一种从 PHPMYADMIN 中的 IMPORT 手动更新的方法。

# websphere - IBM Websphere Portal 7 中 portlet 标记库的定义 JAR 在哪里？

> ID：13450543
> 
> 赞同：2
> 
> 时间：2012-11-19T09:06:57.000
> 
> 标签：websphere, websphere-portal

我正在尝试在 Eclipse Juno 中为 websphere 构建 portlet。到目前为止一切正常，在 WPS7 上构建和运行 WAR 文件没问题。

但是在我的 JSP 编辑器中，我收到了很多警告：

```
Can not find the tag library descriptor for "/WEB-INF/tld/portal.tld" 
```

在我的 JSP 文件中，我使用通常的 taglib 行：

```
<%@taglib uri="http://java.sun.com/portlet" prefix="portlet"%> 
```

现在我想知道是否必须将定义此标记的实际 JAR 文件带入我的 eclipse 中，或者是否还有其他我错过的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T20:35:18.900

`taglib`您收到此错误消息的原因与您引用的声明无关。后者指的是标准的 Portlet 标记库 (JSR-168)，而前者与 WebSphere Portal 的专有标记有关，需要使用 WebSphere Portal 特定的工具。

我猜这`portal.tld`是您的`web.xml`.

在 RAD 下开发 portlet 时，IBM 的 RAD 插件通过将 WebSphere Portal 运行时（整体）附加到动态 Web 项目的类路径来确保 JSP 编译器知道该 TLD 文件。

在 Eclipse Juno 下，这不是为您完成的。您必须找到包含它的 JAR 文件（可能会因一个 WebSphere Portal 版本而异）并将其添加到您的编译时类路径中。

话虽如此，您可能首先要考虑为什么需要该`web.xml`声明。使用 Portal 7.0，IBM 的大多数标记库都可以通过它们的 URI 来引用，而不必特别提及 TLD 文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T20:15:17.783

我正在使用 Portal 8 安装，但结构应该相似。

我在 [Portal Install root]\Portal Server\base\wp.engine.tags\shared\app\wp.engine.tags.jar 找到了一个包含 portal.tld 的 jar

尽管作为一个更完整的解决方案，您可能希望将整个基本文件夹包含到您的类路径中。服务器运行时 RAD 添加到我的 portlet 项目中包括该文件夹中的许多 jar，作为基本设置的一部分。它还包括来自 [WAS Install root]\App Server\plugins 的许多 jar。由于您只是使用 Eclipse 而不是 RAD（这将有助于管理 Portal 服务器 jars），您可能希望创建一个用户库来管理所有这些 jars。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-26T15:01:30.833

在 RAD/Eclipse 中，假设您安装了 Portal 8 Stubs 和 Developer Tools，您可以转到 Project->Project Properties -> Java Build Path，转到 Libraries 选项卡，转到 Add Library -> Server Runtime，您应该会看到“Websphere Portal 8”或您安装的任何版本......一旦添加了该库，您的 URI 问题应该得到解决。这实际上将整个门户安装中的每个 jar 文件添加到构建路径。如果您没有安装存根和开发工具，或者如果您使用的是其他 IDE，则需要手动将 jar 文件添加到构建路径...。

# .net - 将 DateTime.Now 从一个 UTC 时区转换为另一个

> ID：13450545
> 
> 赞同：0
> 
> 时间：2012-11-19T09:07:01.137
> 
> 标签：.net

示例场景：

我在 +13.00 时区有一台服务器（例如），我的用户在 +2.00 时区工作。

我怎么能引起：

```
DateTime.Now 
```

在服务器上调用以返回 UTC +2.00 的时间？（或将 DateTime.Now 结果转换为 +2.00 时区）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T09:10:39.533

您将使用[TimeZoneInfo.ConvertTime](http://msdn.microsoft.com/en-us/library/bb382770.aspx)方法。这允许您传入`DateTime`要转换的时间和源/目标时区。

示例用法：

```
var localTime = DateTime.Now;
try
{
   Console.WriteLine("Local time: {0}", localTime);
   TimeZoneInfo destTz = TimeZoneInfo.FindSystemTimeZoneById("Pacific Standard Time");
   var pacificTime = TimeZoneInfo.ConvertTime(localTime, TimeZoneInfo.Local, destTz);
   Console.WriteLine("Pacific time: {0}", pacificTime);
}
catch (TimeZoneNotFoundException)
{
    Console.WriteLine("The registry does not define the Pacific Standard Time zone.");
}                           
catch (InvalidTimeZoneException)
{
    Console.WriteLine("Registry data on the Pacific Standard Time zone has been corrupted.");
} 
```

如果您总是转换本地时区（即您没有明确说从 X 时区转换为 Y），那么您可以使用其他不带参数的[TimeZoneInfo.ConvertTime重载。](http://msdn.microsoft.com/en-us/library/bb382835.aspx)`sourceTimeZone`时区是从`DateTime.Kind`源日期的属性中计算出来的（在你的情况下，`DateTime.Now`无论如何都会暗示本地）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T11:39:50.540

普通`DateTime`的本身并不包含有关时区的信息。`Kind`（如果知道它是当地时间还是世界时间，它确实包含一个提示。）

考虑在服务器和用户之间的通信中使用 UTC 时间的可能性。发送前使用`.ToUniversalTime()`，接收后使用`.ToLocalTime()`。请注意，如果您对`DateTime`值执行算术运算，则`Kind`可能不会被保存，并且存在`.ToLocalTime()`多次意外执行等的风险。

也有可能改为使用**[`DateTimeOffset`](http://msdn.microsoft.com/en-us/library/System.DateTimeOffset.aspx)**。它包含时区以及日期和时间。

```
var nowWithZone = DateTimeOffset.Now; 
```

您可以使用和等`DateTimeOffset`方法转换为其他。`nowWithZone.ToLocalTime()``nowWithZone.ToOffset(TimeSpan.FromHours(+2.0))`

您可以使用、和`DateTime`等属性转换为普通格式。`nowWithZone.LocalDateTime``nowWithZone.UtcDateTime``nowWithZone.DateTime`

最后，如果这对您的需求来说太混乱或太简单，则可以使用[Noda time](http://noda-time.blogspot.dk/)。

# android - TableRow 中的 Android Spinner 宽度是恒定的

> ID：13450548
> 
> 赞同：1
> 
> 时间：2012-11-19T09:07:13.757
> 
> 标签：android, width, spinner

我有以下布局：

```
 <TableRow
        android:id="@+id/contentRow3"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TextView
            style="@style/hotelapp_textblack"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:layout_marginRight="5dp"
            android:text="@string/check_room"
            tools:context=".MainActivity" />

        <Spinner
            android:id="@+id/spinRoom"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:spinnerMode="dropdown"
            android:dropDownWidth="match_parent" />

    </TableRow> 
```

使用以下 ArrayAdapter 布局：

```
<TextView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center"
    android:minHeight="30dp"
    android:textColor="#000" /> 
```

`TableRow`显然是其中之一。我在这里面临的问题是，无论我做什么，我都无法更改`Spinner`. （不是列表项，是微调器本身）。因此，无论我将宽度设置为`0dp`、还是`match_parent`，它都保持不变。我该怎么做才能修改宽度？`wrap_content``x_dp`

# windows - 从设备管理器检索调制解调器 COM 端口

> ID：13450555
> 
> 赞同：0
> 
> 时间：2012-11-19T09:07:40.990
> 
> 标签：windows, winforms, winapi, device-driver

我正在寻找检索设备管理器中可用的调制解调器 COM 端口信息。当任何 2g/3g 加密狗连接到电脑时，它们会被操作系统检测到并注册为调制解调器。在设备属性中，我们有调制解调器选项卡。通过单击调制解调器选项卡，我们获得了 com 端口信息。我们想通过任何内置应用程序或一段代码来检索此调制解调器信息。

已经尝试过 devcon.exe（由 Microsoft 提供），但它对我们没有帮助。它只是检索调制解调器的硬件 ID，而不是 COM 端口详细信息等。如果有人对此有任何想法，请帮助我这个。

问候湿婆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T09:21:33.867

您可以找到此注册表项中列出的所有 com 端口

```
HKEY_LOCAL_MACHINE\HARDWARE\DEVICEMAP\SERIALCOMM 
```

# file - Unix/Solaris：无法删除 aa 目录，因为存在伪文件

> ID：13450559
> 
> 赞同：1
> 
> 时间：2012-11-19T09:08:01.693
> 
> 标签：file, unix, directory, solaris, delete-file

我目前正在编译不同的 PHP 版本并想删除一些垃圾文件夹。

我有一个名为“php-5.4.7-src”的文件夹，我想删除它，但是当我这样做时

```
$ rm -Rf php-5.4.7-src 
```

总有弹出

```
rm: cannot remove directory php-5.4.7-src/ext/standard/tests/general_functions: File exists
rm: cannot remove directory php-5.4.7-src/ext/standard/tests: File exists
rm: cannot remove directory php-5.4.7-src/ext/standard: File exists
rm: cannot remove directory php-5.4.7-src/ext: File exists
rm: cannot remove directory php-5.4.7-src: File exists 
```

所以我做了

```
$ find . 
```

和

```
$ find . -type f 
```

并且只是弹出上面的文件夹，不存在文件。我也是所有文件夹的所有者，我也尝试以 root 身份删除它们。

如何删除不存在的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T07:43:39.553

我意识到这并不能回答您的问题，而只是风格的小问题，可能会在将来使您头疼。如果您不得不将您的脚本移动到另一种风格的 UNIX 中，那么它们就有可能会崩溃。进行递归删除的传统标志是`-r`，不是`-R`。节省您也不必按 shift 键:)

现在谈谈什么可以回答你的问题。我知道您说过您检查了正在运行的进程，但这是保持 inode 保持打开状态的唯一方法，并且只有打开的 inode 才能防止层次结构被删除。还有其他进程，例如`updated`在当时可能一直在爬取您的目录的系统上经常运行的进程。您可以尝试的一件事是执行`sync`以确保所有挂起的写入都已刷新。

*有东西*使目录保持打开状态。您可能还想尝试`lsof +D php-5.4.7-src`看看到底是什么。

# jquery - 鼠标右键单击按钮应该执行左键单击按钮（jquery）的动作

> ID：13450562
> 
> 赞同：0
> 
> 时间：2012-11-19T09:08:10.717
> 
> 标签：jquery

我和我的团队正在努力解决这个问题。

有谁知道在单击鼠标右键时执行左键单击操作的 jquery 代码

例如：假设我右键单击一个链接，而不是打开一个弹出窗口，我需要它去链接的目的地。在其他方面，我需要右键单击来执行鼠标左键单击的操作。

尝试搜索网络，但没有用。因此将其发布为我的最后一个选择。

非常感谢任何帮助。

提前致谢 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T09:15:12.963

试试这个，例如（更新）：

```
<html>
<body oncontextmenu="return false;">
<a href="#">Test Link</a>
<script src="jquery-1.8.2.min.js"></script>
<script>
$(document).ready(function()
{
    $(document).mousedown(function(e)
    {

        if (e.button == 2) //right click
        {
         e.preventDefault();
         e.stopPropagation();
         e.stopImmediatePropagation();
         document.body.style.backgroundColor = "green";
         return false;
        }
        if (e.button == 0)//left click
        {
         e.preventDefault();
         e.stopPropagation();
         e.stopImmediatePropagation();
         document.body.style.backgroundColor = "blue";
         return false;
        }

    });
});
</script>
</body>
</html> 
```

如果您想阻止默认行为，请在更改背景颜色之前使用`e.preventDefault();`, 。`e.stopPropagation();` `e.stopImmediatePropagation();`

# c++ - 在 C++ 中将派生类指针分配给基类指针

> ID：13450570
> 
> 赞同：6
> 
> 时间：2012-11-19T09:08:40.307
> 
> 标签：c++

我有以下

```
class base
{
};

class derived : public base
{
  public:
   derived() {}
   void myFunc() { cout << "My derived function" << std::endl; }

}; 
```

我现在有

```
base* pbase = new derived();
  pbase->myFunc(); 
```

我收到错误 myFunc 不是 base 的成员函数。

如何避免这种情况？以及如何让 myFunc 被调用？

注意我应该让基类不包含任何功能，因为它是设计的一部分，上面的代码是大功能的一部分

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T09:10:16.600

`myfunc`需要可从基类访问，因此您必须`myfunc`在`base`. 如果您打算`base`成为一个抽象基类，即无法实例化并充当接口的类，则可以将其设为纯虚拟：

```
class base
{
 public:
  virtual void myfunc() = 0; // pure virtual method
}; 
```

如果您希望能够实例化`base`对象，那么您必须提供一个实现`myfunc`：

```
class base
{
 public:
  virtual void myfunc() {}; // virtual method with empty implementation 
}; 
```

There is **no other clean way to do this** if you want to access the function from a pointer to a base class. The safetest option is to use a `dynamic_cast`

```
base* pbase = new derived;

....
derived* pderived = dynamic_cast<derived*>(pbase);
if (derived) {
  // do something
} else {
  // error
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-19T09:15:23.490

If you are adamant that this function should NOT be a part of base, you have but 2 options to do it.

Either use a pointer to derived class

```
derived* pDerived = new derived();
pDerived->myFunc(); 
```

Or (**uglier** & ***vehemently* discouraged**) static_cast the pointer up to derived class type and then call the function
**NOTE**: To be used **with caution**. Only use when you are SURE of the type of the pointer you are casting, i.e. you are sure that `pbase` is a `derived` or a type derived from `derived`. In this particular case its ok, but im guessing this is only an example of the actual code.

```
base* pbase = new derived();
static_cast<derived*>(pbase)->myFunc(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-19T09:10:45.157

To use the base class pointer, you *must* change the base class definition to be:

```
class base
{
public:
    virtual void myFunc() { }
}; 
```

I see no other way around it. Sorry.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-19T09:11:05.760

You could add it as a member of base and make it a virtual or pure virtual function. If using this route however, you should also add a virtual destructor in the base class to allow successful destruction of inherited objects.

```
class base
{
public:
   virtual ~base(){};
   virtual void myFunc() = 0;
};

class derived : public base
{
  public:
   derived() {}
   void myFunc() { cout << "My derived function" << std::endl; }

}; 
```

# iphone - UITableViewStyleGrouped 成直角

> ID：13450571
> 
> 赞同：0
> 
> 时间：2012-11-19T09:08:41.757
> 
> 标签：iphone, ios, uitableview

当我创建表视图时

```
myTableView = [[UITableView alloc]initWithFrame:CGRectMake(0, 0, 320, 400) style:UITableViewStyleGrouped]; 
```

表格视图有圆角，但我想要直角（所以表格视图单元格应该看起来像矩形，但表格视图仍然应该有很多部分）。

问题是：如何创建具有许多截面和直角的表格视图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T09:17:41.440

在 TableView 数据源中。在 cellForRowAtIndexPath 中，您可以将单元格的背景设置为空白...

```
cell.backgroundView = [[UIView alloc] initWithFrame:CGRectZero()]; 
```

然后你可以在单元格的后面放一个图像或矩形或任何东西。

你甚至可以创建一个新的 UIView 并把它放在 backgroundView 的位置。

然后你可以在里面放任何你想要的东西，图片，标签等等……它们会放在单元格内容的后面。

分组样式中单元格的圆角只是一个图像，因此可以由您替换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T09:21:19.343

将图像设置为单元格的背景图像，并赋予 to 的背景`UITableView`颜色`clearColor`并设置图像，如下所示..

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
     ///write your code..
       UIImageView *img = [[[UIImageView alloc]initWithFrame:CGRectMake(0, 0, 320, 45)] autorelease]; // set frame as your cell frame
      img.image = [UIImage imageNamed:@"yourImageName"];
      cell.backgroundView = img;
    ////write your code
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T09:15:54.970

对于部分，您可以编写一个委托方法，例如

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView 
```

{

```
// Return the number of sections.
return 1;//how many sections you want you can write a value after return type 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T09:22:13.913

我发现使角成直角的最佳方法是将背景视图设置为零，然后在其中放置一个视图。

```
[cell setBackgroundView:nil];

cell.backgroundView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 44)]; 
```

# c# - C# - 在块的末尾自动释放内存

> ID：13450572
> 
> 赞同：2
> 
> 时间：2012-11-19T09:08:50.593
> 
> 标签：c#, memory, out-of-memory

所以我有一个程序可以每秒增加 5MB 的内存。由于每个应用程序只能分配 2GB，因此在我启动程序并获得 System.OutOfMemoryException 后大约 5 分钟就达到了限制。

我已经“完成了我的作业”（希望足够好：D）并且知道在一个块结束后，该块内的变量不会被处理。

最终，我需要一种方法来自动从每个块之后使用的变量中释放内存，以阻止 OutOfMemoryException 的发生。

PS：我意识到这个话题有很多困惑，所以如果我在我的问题中犯了错误，请随时纠正我。但大多数情况下，我想把这个例外排除在外。

编辑

好吧，奇怪的事情发生了。我将整个项目从我的桌面（它不起作用）复制到我的笔记本电脑上。显然，它在我的笔记本电脑上运行良好！内存只增加了 500 KBps，并在 1 秒后自动释放。我不知道为什么，它是完全相同的项目，并且没有更改任何代码。

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T09:12:23.867

[在using 语句](http://msdn.microsoft.com/en-us/library/yh598w02%28v=vs.80%29.aspx)中使用这些变量并在完成后调用[GC.Collect()](http://msdn.microsoft.com/en-us/library/xe0c2357.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T09:51:12.757

使用 ANTS 探查器或 CLRProfiler 来确定哪些对象正在占用空间以及哪些方法正在创建和保存对这些对象的引用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T09:27:28.983

以我的经验，在托管代码中泄漏内存的最常见方法是长时间持有引用，或者没有意识到如何处理引用。实时引用将阻止垃圾收集，无论您的代码如何处理内容。

[这](http://blogs.msdn.com/b/delay/archive/2009/03/11/where-s-your-leak-at-using-windbg-sos-and-gcroot-to-diagnose-a-net-memory-leak.aspx)是一篇关于如何找出泄漏的内容以及这些引用在哪里的不错的文章，您可能还想阅读“附加背景”链接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T09:13:39.890

也许您的对象应该实现 IDisposable 以便您可以在不再需要它们时清理资源。这篇 MSDN 文章展示了如何实现它：

[深入研究 IDisposable](http://msdn.microsoft.com/en-us/magazine/cc163392.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-19T09:12:38.037

可能这个讨论将帮助您了解.net [Finalize/Dispose 模式在 C# 中的内存管理实际发生了什么](https://stackoverflow.com/questions/898828/c-sharp-finalize-dispose-pattern?lq=1)

以防万一，这是关于如何处理对象的另一篇文章：[使用 dispose/finalize 模式释放套接字/事件/ummaged 代码的正确技术](https://stackoverflow.com/questions/13356924/the-correct-technique-for-releasing-a-socket-event-ummaged-code-with-the-dispose/13357076#13357076)

# php - 检查文件指针在 PHP 中是否仍然有效

> ID：13450574
> 
> 赞同：2
> 
> 时间：2012-11-19T09:09:10.600
> 
> 标签：php, fopen, fwrite, unlink, file-pointer

如果您确实使用了简单的 fopen/fwrite()，例如：

```
$ref = @fopen('/path/to/file', 'x+b'); // returns false if already exists
if ($ref) {
    fwrite($ref, 'A');
    sleep(5);
    fwrite($ref, 'B');
} 
```

如果其他进程在睡眠期间删除了文件，如何检查文件指针是否仍然有效？

我考虑过使用简单的 is_file() 检查，但这并不能说明另一个进程是否执行了 unlink() 然后创建了一个具有相同路径的新文件。

作为参考，即使文件已取消链接（），fwrite 似乎仍然返回 true。

**编辑**：澄清一下，sleep(5) 只是一个随机时间，在竞争条件下可能只是几毫秒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T09:51:43.073

我刚刚做了一个测试，似乎这`fstat`是解决方案：

```
$fd = fopen("/path/to/file", "w");
var_dump(fstat($fd)); // shows ['nlink'] => int(1)
sleep(60);
// in a shell console, remove the file
var_dump(fstat($fd)); // shows ['nlink'] => int(0) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T09:12:45.837

您需要再次执行 fopen()。在 linux 系统上，您可以写入已删除的文件，因为您仍然引用它。当您关闭它时，该文件将最终被删除。

如果进程需要等待我会关闭，然后在睡眠之间打开文件

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-19T09:12:57.313

如果您持有文件的句柄，则无需打扰。文件系统正在处理这个问题。

**编辑**

句柄是有效的，除非您关闭它或脚本结束并且**删除**文件与句柄的有效性绝对无关，锁定也是如此。通过创建大文件（1GB）并开始使用浏览器获取即可以轻松地检查这一点，您现在可以“安全地”从其他进程中删除它。这不会影响获取甚至`ls`不再将文件列为现有的工具。我写了“安全”，因为如果下载失败，那么 httpd 将关闭打开的句柄，然后，如果没有其他进程持有句柄，它将 phisicaly 释放磁盘空间。但**只要**至少有一个引用它，数据就会保留在磁盘上（可以通过使用以下工具检查可用磁盘空间来轻松检查`df`- 按顺序：

```
create 1GB file
df
start download
rm file
df 
```

第二个`df`将表明磁盘空间与第一个相同（当然假设没有发生其他文件操作）。现在停止下载并`df`重新下载。可用空间现在增加了 1GB。

请注意，Windows 的 FS 不会让您删除打开的文件，但这只是实施问题，而不是技术限制。*nix 上的大多数（如果不是每个）FS 都可以毫无问题地处理这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T09:16:29.047

只是为了增加很多精度： fopen() 锁定取决于您打开文件的类型。`w`并且`w+`会锁定 - `r`, `a`,`r+`不会（默认情况下）。但是，如果您真的想确保您的文件不能在其他地方使用，该功能`flock()`可能会派上用场。

但是，如果您真的需要锁定文件并且在 5 秒内什么都不做，我会质疑您的设计/实现，而不是找到解决方法。

# entity-framework - 如何从 app.config 文件中检索实体框架的 ConnectionString 而不会出现空引用异常

> ID：13450577
> 
> 赞同：2
> 
> 时间：2012-11-19T09:09:23.330
> 
> 标签：entity-framework, connection-string, app-config

我想通过使用此代码`ConnectionString`从`app.config`DataAccess 类库中检索用于实体框架的应用程序模型的`.edmx`

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Configuration;

namespace BusinessLogicAndData
{
    public class Connection
    {
        public static RevenueData GetContext()
        {
            //ConfigurationManager configManager = new ConfigurationManager();
            string conString = ConfigurationManager.ConnectionStrings["RevenueData"].ConnectionString;

            RevenueData RDC = new RevenueData(conString);

            return RDC;
        }
    }
} 
```

但是每次程序运行时，它都会抛出一个空引用异常，抱怨

> *对象引用未设置为对象的实例*

我已经浏览了 VS 2010 的堆栈跟踪，但我似乎无法确定问题所在。请对异常的起源提出任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T09:14:15.280

您应该将连接字符串添加到`App.Config`可执行应用程序（而不是在 DataAccess 库项目中配置）。

# git - Git Merge 删除基础分支的新文件

> ID：13450581
> 
> 赞同：2
> 
> 时间：2012-11-19T09:10:07.177
> 
> 标签：git, branch

我们有一个开发分支和许多不同的功能分支。现在我们有一个外部开发人员，他创建了一个功能分支，并向我们的存储库（[https://github.com/massiveart-webservices/ZOOLU/pull/7](https://github.com/massiveart-webservices/ZOOLU/pull/7)）提出了拉取请求。

现在我遇到的问题是，如果我尝试合并他的分支，那么自从外部开发人员创建他的特性分支以来，我们的开发分支中所做的每一次更改都会被删除。您可以在拉取请求中看到这一点，例如在文件 library/massiveart/generic/fields/Imagemap/data/helpers/Imagemap.php 上。

据我所知，git 会将来自另一个分支的所有提交合并到所需的提交中。所以我认为这些文件不应该被删除，因为它们不会在外部开发人员的任何提交中被删除（在他的存储库中这些文件甚至不存在）。所以我的问题是为什么 git 会尝试删除这些文件，以及如何解决这个问题。

我还告诉他将更改从我们的开发人员分支拉到他的功能分支中，但结果并不令人满意......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T09:54:06.797

由于提交[75326832600d0034138ec7bc15000d4cfcd50d3d](https://github.com/NurbekChymbaev/ZOOLU/commit/75326832600d0034138ec7bc15000d4cfcd50d3d)中的错误合并，您提到的特定文件丢失了。正确的合并会添加文件（因为合并的版本应该是合并分支中所有更改的超集），但是这个没有，这相当于删除了分支上的文件。

# c# - 向参数传递多个值

> ID：13450585
> 
> 赞同：-3
> 
> 时间：2012-11-19T09:10:20.627
> 
> 标签：c#, crystal-reports

我已经能够将一个值传递给水晶报表中的参数。但是，我现在的任务是将多个值传递给一个参数。我想查询一个 sql server 数据库并将查询结果传递给参数。如果查询的结果大于一，所有这些都应该被参数捕获。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T09:48:04.457

你要做的是

1.  前往选择专家
2.  从具有多个值的数据源中选择字段
3.  从下拉列表中，选择`is one of`

此外，您的参数字段应设置为`Allow multiple values = true`

# visual-studio-2012 - 发布的 ms visual studio 2012 不工作

> ID：13450592
> 
> 赞同：2
> 
> 时间：2012-11-19T09:10:46.080
> 
> 标签：visual-studio-2012, publishing, fileshare, vshost32

我创建了一个 C# 项目并想发布它。在 MS Visual Studio 2012 中工作时，我遵循了“如何发布：http: [//msdn.microsoft.com/en-us/library/31kztyey.aspx](http://msdn.microsoft.com/en-us/library/31kztyey.aspx) ”。
所以我在我的文件共享设备上选择了所有正确的文件夹，它构建得很好。
但是在我通过 setup.exe 安装项目后，我尝试运行 .appliction 但它不会显示我创建的表单，而在任务管理器中，如果我无法杀死带有描述“Vshost32.exe”的进程说“结束过程”它会再次出现，但仍然不会向我展示我的项目。

我在调试模式和发布模式下运行了项目（在发布之前）。我尝试通过 cd-rom 而不是文件共享发布，但出现了同样的问题。

我现在如何在我们的文件共享设备上为没有 MS Visual Studio 的其他公司成员发布我的项目，以便他们也可以运行它？（我不认为，简单地将 .exe 从 bin\release 文件夹中复制出来是一种干净的方法）

# adsense - 为什么我的 Google Adsense 广告没有展示？

> ID：13450596
> 
> 赞同：-2
> 
> 时间：2012-11-19T09:10:52.383
> 
> 标签：adsense

我有一个旅游指南网站网络，我最近在其中添加了 Google Adsense。我看到为广告注册的展示次数，但我已经在手机、笔记本电脑和台式机上访问了这些网站，但我自己还没有设法看到这些广告。

您能在这些网站上看到 Adsense 广告吗？如果是的话，知道为什么我不能吗？如果没有，知道什么是错的吗？

[www.tokyo.vn](http://www.tokyo.vn) [www.hanquoc.vn](http://www.hanquoc.vn)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:13:59.890

抱歉，刚刚发现越南语不是受支持的语言，尽管越南是世界上人口最多的 15 个国家之一。

# c# - 从文本文件填充数据表

> ID：13450601
> 
> 赞同：4
> 
> 时间：2012-11-19T09:11:21.550
> 
> 标签：c#, file, datatable

我有这个代码块，它读取一个文本文件 [Tab delimited] 并返回一个数据表。但问题是它将文件或记录的第一行视为标题，并将其余行显示为记录，将记录数减去 - 1 所以现在我希望代码将文件的所有内容作为记录读取.

这是代码：

```
streamReader reader = new streamReader (filePath);
string line = reader.readLine();
Datatable dt = new Datatable ();
DataRow row;
string[] value = line.Split('\t');

foreach(string dc in value)
{
 dt.columns.add(New DataColumn(dc));
}

while(!reader.endofStream)
 {
  value = reader.ReadLine().split('\t');

  if (value.Length == dt.Columns.Count)
 {
  row = dt.NewRow();
  row.ItemArray = value;
  dt.Rows.Add(row);
 }

 }

 return dt; 
```

当我尝试删除

```
foreach(string dc in value)
{
 dt.columns.add(New DataColumn(dc));
} 
```

以及依赖它的所有行代码，dt 什么都不返回。

我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T09:22:30.320

如果您知道没有标题，我假设您也不知道列的名称，是吗？然后您需要添加“匿名”列：

```
DataTable dt = new DataTable();
while (reader.Peek() >= 0)
{
    string line = reader.ReadLine();
    string[] fields = line.Split('\t');
    if (dt.Columns.Count == 0)
    {
        foreach (string field in fields)
        {
            // will add default names like "Column1", "Column2", and so on
            dt.Columns.Add(); 
        }
    }
    dt.Rows.Add(fields);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T09:25:18.817

```
DataTable dt = new DataTable();
var lines = File.ReadAllLines(strPath).ToList();
dt.Columns.AddRange(lines.First().Split(new char[] { '\t' }).Select(col => new DataColumn(col)).ToArray());
lines.RemoveAt(0);
lines.Select(x => x.Split(new char[] { '\t' })).ToList().ForEach(row => dt.Rows.Add(row)); 
```

将此用于测试数据

```
List<string> lines = new List<string>();
lines.Add("Col1\tCol2\tCol3");
lines.Add("aaa\tbbb\tccc"); 
```

# php - 如何在 Codeigniter 中加载图像？

> ID：13450608
> 
> 赞同：3
> 
> 时间：2012-11-19T09:11:45.893
> 
> 标签：php, css, codeigniter

嘿，我是 Codeigniter 的新手。在 Controllers 文件夹中，我创建了一个名为`caller.php`的文件，并`home1.php`在`\Views`. 在`root directory`我创建了一个名为的图像文件夹`\Images`，并创建了一个`css`名为`\css`. 在 images 文件夹中有 6 张图片。在 css 文件夹`style.css`中存在文件。

在`caller.php`我写

```
<?
class caller extends CI_Controller
{
    function index()
    {
        $this->load->view('home1');

        // what i have to write here lo load images....

    }
} 
```

在`home1.php`我写

```
<html>
  <head>

    <link rel="stylesheet" type="text/css" href="<?php echo base_url();?>css/style.css">

    // what i have to write here to load images

  </head>

  <body>
    <div id="outer">

      <div id="container">

        <div id="images">
          <img src="new.jpg" width="960" height="400"/>
          <img id="image1" src="1.jpg" />
          <img id="image2" src="2.jpg" />
          <img id="image3" src="3.jpg" />
          <img id="image4" src="4.jpg" />
          <img id="image5" src="5.jpg" />
        </div>

        <div id="slider">
          <a href="#image1">1</a>
          <a href="#image2">2</a>
          <a href="#image3">3</a>
          <a href="#image4">4</a>
          <a href="#image5">5</a>
        </div>
...................................................
....................................................
      </div>
    </div>
  </body>
</html> 
```

现在对于上面的代码我如何加载图像。请专家帮助我。如果需要额外的配置，请提及。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T09:27:48.480

由于您已经在使用 url 助手，我建议使用 base_url 包装您的图像 src 属性，例如：

```
<img src="<?php echo base_url('images/1.jpg'); ?>" /> 
```

正如在另一个答案中提到的那样，最好（强制？）将控制器中的类名大写

```
class Caller extends CI_Controller { ... 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-19T09:21:23.410

首先，您需要将您的班级名称大写。

```
 class Caller extends CI_Controller {

        public function index()
        {
            // method code goes here
        }

    } 
```

然后，您需要使用绝对链接或 CI URL 帮助程序链接到这些图像：“/images/1.jpg”等等。 **此处详细介绍了如何与 CI URL 助手一起使用**：[Helper](https://www.codeigniter.com/userguide3/general/helpers.html)

编辑

在你的构造方法中加载 URL 助手：

```
 $this->load->helper('url'); 
```

您可以像这样创建一个 URL：

```
 echo base_url("blog/post/123"); 
```

这将使：

```
 http://example.com/index.php/news/local/123 
```

或者

```
 http://example.com/news/local/123 
```

如果您在配置文件中取出了 index.php。

这是一个带有调用 URL 帮助器的构造函数的类：

```
 class Caller extends CI_Controller { 

        public function __construct() 
        { 
            parent::__construct();
            $this->load->helper('url'); 
        } 

        public function index() 
        { 
            // method code goes here 
        } 
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-29T17:24:49.927

在根目录中创建文件夹并在视图 html 文件中轻松编写代码。

如果目录名称是 directoryName 和图像名称 imageName.jpg

你可以这样打电话。

```
<img src="directoryName/imageName.jpg"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T09:29:30.173

您可以执行与加载 CSS 文件相同的操作。
在根目录中创建一个文件夹。创建一个子文件夹（如果您有 Multisite）
，然后将配置文件中的 base_url 指向您的基本路径。

然后做同样的事情
`<img id="image1" src="<?PHP echo base_url(); ?>images/[sub-folder]/1.jpg" />`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-19T09:36:16.403

只有简单的方法

```
<img id="image1" src="<?php echo base_url('1.jpg'); ?>" /> 
```

就是这样！！！

# node.js - 如何支持浏览器的服务器推送方法以及 websockets 在其中的作用？

> ID：13450609
> 
> 赞同：0
> 
> 时间：2012-11-19T09:11:49.807
> 
> 标签：node.js, jakarta-ee, webserver, websocket, server-push

我有一个用例，我计划从浏览器轮询到服务器以检查给定客户的任何更新。然后我想探索推送方法，其中 webserver（在我的例子中是 tomcat）可以在 webserver 上运行的 servlet 获得任何更新时自动执行从第三方更新。我想到了第一个问题 javaclass 如何知道它必须向哪个浏览器客户端发送更新。然后我在[http://www.gianlucaguarini.com/blog/nodejs-and-a-simple 找到了链接-推送通知服务器/](http://www.gianlucaguarini.com/blog/nodejs-and-a-simple-push-notification-server/)。这是演示如何支持推送方法的惊人链接。但是我想出了一些基本问题来继续使用这种方法。这些都是：-

1）浏览器内部是否仅使用 websockets 与 webserver 进行通信，或者他们只是使用 TCP 进行通信？据我了解，浏览器仅使用 TCP 协议，尽管它受到 chrome、mozilla 等一些兄弟的支持

2）是否所有浏览器都支持websocket（由示例中的io.connect（'url'）提供），特别是IE7，IE8根据我的理解

3）要支持浏览器上的推送方法，websockets是唯一的方法吗？根据我的理解，websockets主要用于将数据从webserver推送到浏览器（仅限那些支持websockets的）对于第一个浏览器需要与webserver建立websocket连接。现在服务器将使用创建的websocket向浏览器发送任何数据。对？

4）当websocket自动断开连接时是否有可能，例如请求超时或等待响应很长时间？

5）我们需要显式断开套接字还是在浏览器关闭时它会自动关闭？

如果回复是逐点的，那将非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T09:21:30.850

1.  WebSocket 协议**是**TCP 协议。只是它以HTTP开头，然后可以升级为TCP。

2.  Internel Explorer 应该在版本 10 中支持 WebSockets。其他主要浏览器（Chrome、FireFox、Safari、Opera）完全支持它。

3.  还有很多其他的可能性。简单轮询、长轮询（您发出一个 ajax 请求并且服务器仅在他有新数据时响应）、隐藏无限 iframe、使用闪存等。

4.  是的。

5.  一旦使用端口的应用程序（在这种情况下是浏览器）被终止，那么所有连接也将终止。

# php - 与 MySQL 服务器的连接丢失（错误：111）

> ID：13450611
> 
> 赞同：1
> 
> 时间：2012-11-19T09:12:00.883
> 
> 标签：php, mysql

我有一个 php 文件来从服务器获取数据

当我尝试执行它时，我收到一条消息：-

警告：mysql_connect() [function.mysql-connect]：在“读取初始通信数据包”时丢失与 MySQL 服务器的连接，系统错误：第 3 行 /home/-/-/public_html/GetData.php 中的 111

第 3 行是

```
 $con = mysql_connect("cs.neiu.edu","myusername","mypassword"); 
```

我也尝试过将主机名指定为 localhost，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T09:15:12.580

您需要`bind-address`在 my.cnf 中配置绑定地址并访问数据库，例如。`GRANT ALL ON foo.* TO bar@'162.54.10.20' IDENTIFIED BY 'PASSWORD';`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T01:17:12.807

该错误意味着连接被拒绝。我和你在同一个班级，显然我使用的是同一个服务器，我猜你输入了错误的密码。如果您更改了课堂上提供的密码，则它可能与您连接到服务器时使用的密码不同。我使用以下，它工作正常....

```
<?php
  $con = mysql_connect('localhost','username','password');
  if (!$con)
  {
    die('Could not connect: ' . mysql_error());
  }
  mysql_select_db("databaseName", $con);
  ..
  ..
  ..
  mysql_close($con);
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T03:31:43.023

实际上我意识到我的密码错误。

# c# - 用于测试WPF的开源GUI测试工具（C#使用VS2010）

> ID：13450619
> 
> 赞同：1
> 
> 时间：2012-11-19T09:12:20.387
> 
> 标签：c#, testing

我是测试新手.....我正在寻找用于测试 WPF 的开源 GUI 测试工具。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T09:15:22.377

尽管我在 WPF 项目中使用[White](http://teststack.github.com/White/)并取得了一些成功，但测试 GUI 总是很痛苦，而且总是涉及手动测试。我将我的 UI 逻辑基于[MVVM 架构模式](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)，然后尝试在 ViewModel 中进行与 GUI 相关的所有测试（这样我就可以使用普通的单元测试框架，如[NUnit](http://www.nunit.org/)）并尽可能保持 View 愚蠢，没有任何 XAML 技巧或手工制作的自定义控件。在很多项目中，我几乎不用自动化 GUI 测试就可以侥幸逃脱。

# c# - 如何为“123456#”编写正则表达式以打印 123456？

> ID：13450620
> 
> 赞同：2
> 
> 时间：2012-11-19T09:12:21.873
> 
> 标签：c#, regex

嗨，我需要一个正则表达式将 # 或 * 替换为 ""(emptyString) 我尝试过`/[\\*\\#]/g`但似乎不起作用。

```
http://ideone.com/MtjsX5 
```

请在这方面需要你的帮助。

我实际上正在使用这个 Grxml 语法，如下所示

```
SWI_meaning          = DIGITS.SWI_literal.replace( /[ ]+/g, '' );
 SWI_meaning          = SWI_meaning.replace( /[\*\#]/g, '' ); 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T09:18:05.990

除了正则表达式，您可以使用[char.IsDigit](http://msdn.microsoft.com/en-us/library/system.char.isdigit.aspx)从字符串中仅过滤掉数字。试试下面的。

```
string str = "123456#";
string newString = string.Join("",
                         str.Select(r=> char.IsDigit(r) ? r.ToString():"")); 
```

编辑：礼貌[@LB](https://stackoverflow.com/users/932418/l-b)

```
string newString = String.Join("",str.Where(char.IsDigit)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-19T09:19:49.030

```
string str = "123456#";
string clean = Regex.Replace(str, @"[#*]", string.Empty); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T09:41:22.117

> 有些人在遇到问题时会想“我知道，我会使用正则表达式”。现在他们有两个问题。

按照 Jamie Zawinski 的建议，您只需调用两次 replace 即可。

```
String str = "123456#*42#";
var result = str.Replace("*", "").Replace("#", ""); 
```

PS。并不是说它真的很重要，但 Replace Replace 似乎是最快的。[https://gist.github.com/4109899](https://gist.github.com/4109899) DS。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T11:48:25.907

似乎缺少一个选项，然后您几乎完全被覆盖。对于仅删除两个字符，Replace.Replace 的使用是最快的，紧随其后的是数组操作和字符串生成器。

Linq Where 和 string.Join 的使用使一切都变慢了一点，尽管这并不重要。

您会惊讶地发现 Regex（至少在 .NET 4.5 下）并不像您预期​​的那么慢。它甚至比使用 Linq 还要快。也许如果您使用编译表达式或委托，您也许可以加快 Linq 表达式的速度。

当您需要替换字符串中的较大部分或多个字符而不是两个字符时，统计信息可能会发生变化。

```
 static void Main(string[] args)
    {
        string str = "123456#23876587234687237*723547623547523745273#";

        Console.WriteLine("Join+Where");
        Test(s => String.Join("",s.Where(char.IsDigit)), str);

        Console.WriteLine("ArrayOperation");
        Test(s => new string(Array.FindAll(s.ToCharArray(), char.IsDigit)), str);

        Console.WriteLine("Join+Select");
        Test(s => string.Join("", s.Select(r=> char.IsDigit(r) ? r.ToString():"")), str);

        Console.WriteLine("ReplaceReplace");
        Test(s => s.Replace("*", "").Replace("#", ""), str);

        Console.WriteLine("Regex");
        Test(s => Regex.Replace(s, "[#*]", ""), str);

        Console.WriteLine("Regex");
        Regex rx = new Regex("[#*]", RegexOptions.Compiled);
        rx.Match(""); // Precompile for better results
        Test(s => rx.Replace(s, ""), str);

        Console.WriteLine("StringBuilder");
        Test(s => new StringBuilder(s).Replace("*", "").Replace("#", "").ToString(), str);
        Console.ReadLine();

    }

    public static void Test(Func<string,string> proposedSolution, string input)
    {
        GC.Collect();
        GC.WaitForPendingFinalizers();
        Thread.Sleep(5000);

        Stopwatch sw = new Stopwatch();
        sw.Start();

        for (int i = 0; i < 1000; i++)
        {
            string val = proposedSolution(input);
            Debug.Write(val);
        }

        sw.Stop();

        Console.WriteLine(sw.ElapsedMilliseconds);
    } 
```

“123456#23876587234687237*723547623547523745273#”的输出如下（您会注意到，如果正确使用正则表达式，它并不像人们让您相信的那么慢：

```
Join+Where
88
ArrayOperation
25
Join+Select
45
ReplaceReplace
18
Regex
39
Regex+Compiled
41
StringBuilder
19 
```

当您需要替换的不仅仅是数字以外的所有内容时，这可能会变得更有趣。或者更具体地说是“#”和“*”。但最终，创建一个简单的测试，然后选择最容易理解和执行的方法可能是最好的解决方案。

*需要指出的一件事*：并非所有提供的解决方案都做同样的事情。虽然有些只保留数字，但另一些则专门从给定输入中删除两个字符。对于您的示例，这两个选项似乎都是有效的，但了解差异很重要。

使用 LINQ 仅删除 # 和 * 的相同选项：

```
 char[] Removechars = new[] { '#', '*' };

        Console.WriteLine("Join+Where");
        Test(s => String.Join("", s.Where(c => !Removechars.Contains(c))), str);

        Console.WriteLine("ArrayOperation");
        Test(s => new string(Array.FindAll(s.ToCharArray(), c => !Removechars.Contains(c))), str);

        Console.WriteLine("Except");
        Test(s => new string(s.ToCharArray().Except(Removechars).ToArray()), str);

        Console.WriteLine("Join+Select");
        Test(s => string.Join("", s.Select(c => !Removechars.Contains(c) ? c.ToString():"")), str); 
```

这些选项都比使用 IsDigit 或 !IsDigit 慢。

# ios - 在 iOS 中构建高级表单

> ID：13450622
> 
> 赞同：2
> 
> 时间：2012-11-19T09:12:23.897
> 
> 标签：ios, forms

我在 XCode 4 中有一个主/详细信息设置，它本质上是一个多部分表单，主视图中包含基本项目，以及可以根据需要添加的其他项目。

我想要做的是让每个项目（NSMutableArray 中的对象）呈现一个视图（在详细视图中），其中包含多个表单元素，例如文本字段和选择器，当它在主视图中被选中时。

让列表中的每个项目在右侧视图中显示其适当的表单元素的最佳方法是什么，因为在情节提要中完成这一切似乎是不可撤销的？

# php - php上传文件唯一名称问题

> ID：13450627
> 
> 赞同：1
> 
> 时间：2012-11-19T09:12:42.180
> 
> 标签：php, mysql

好吧，我有一个由.php 文件（uploader.php）处理的html 上传表单。这是一个多文件上传的代码。

因此，当它上传时，所有文件都会以其各自的文件名进入上传目录。比如：abc.jpg、abc2.jpg 等。

但是如果有人上传了一个同名的文件，那么它就会覆盖现有文件。所以我需要上传文件的唯一名称。有没有办法用唯一的随机名称重命名文件。喜欢：12545454.jpge、234324324.jpge、323453253.jpg等。

**php代码：**

```
<?php
if (isset($_POST['Submit'])) {
$number_of_file_fields = 0;
$number_of_uploaded_files = 0;
$number_of_moved_files = 0;
$uploaded_files = array();
$upload_directory = dirname(__file__) . '/uploaded/'; //set upload directory

/**
 * we get a $_FILES['images'] array ,
 * we procee this array while iterating with simple for loop
 * you can check this array by print_r($_FILES['images']);
 */
for ($i = 0; $i < count($_FILES['images']['name']); $i++) {
    $number_of_file_fields++;
    if ($_FILES['images']['name'][$i] != '') { //check if file field empty or not
        $number_of_uploaded_files++;
        $uploaded_files[] = $_FILES['images']['name'][$i];
        if (move_uploaded_file($_FILES['images']['tmp_name'][$i], $upload_directory . 
$_FILES['images']['name'][$i])) {
            $number_of_moved_files++;
        }

    }

}
echo "Number of File fields created $number_of_file_fields.<br/> ";
echo "Number of files submitted $number_of_uploaded_files . <br/>";
echo "Number of successfully moved files $number_of_moved_files . <br/>";
echo "File Names are <br/>" . implode(',', $uploaded_files);
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T09:25:49.230

使用[uniqid()](http://php.net/manual/en/function.uniqid.php)。它是为此而生的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T09:20:30.277

您可以按照 wormhit 的建议 concat`time();`和`session_id()`or`uniqid()`对每个文件的名称也是非常好的主意。

使用以下代码：

```
<?php
$target_path = "images/";

$target_path = $target_path . basename( $_FILES['uploadedfile']['name']); 

if(move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target_path)) {
    echo "The file ".  basename( $_FILES['uploadedfile']['name']). 
    " has been uploaded";
} else{
    echo "There was an error uploading the file, please try again!";
}
//$upload_directory = ''.uniqid().'_'.dirname(__file__) . '/uploaded/'; //set upload directory

$uploaded_file="".$upload_directory ."/".uniqid()."_".$_FILES['images']['name'][$i]."";

if (move_uploaded_file($_FILES['images']['tmp_name'][$i],$uploaded_file)) {
            $number_of_moved_files++;
        }
?>

<?php
if (isset($_POST['Submit'])) {
$number_of_file_fields = 0;
$number_of_uploaded_files = 0;
$number_of_moved_files = 0;
$uploaded_files = array();
$upload_directory = dirname(__file__) . '/uploaded/'; //set upload directory

/**
 * we get a $_FILES['images'] array ,
 * we procee this array while iterating with simple for loop
 * you can check this array by print_r($_FILES['images']);
 */
for ($i = 0; $i < count($_FILES['images']['name']); $i++) {
    $number_of_file_fields++;
    if ($_FILES['images']['name'][$i] != '') { //check if file field empty or not

        $uploaded_file="".$upload_directory ."".uniqid()."_".$_FILES['images']['name'][$i]."";

        $number_of_uploaded_files++;
        $uploaded_files[] = $_FILES['images']['name'][$i];
        if (move_uploaded_file($_FILES['images']['tmp_name'][$i],$uploaded_file)) {
            $number_of_moved_files++;
        }

    }

}
echo "Number of File fields created $number_of_file_fields.<br/> ";
echo "Number of files submitted $number_of_uploaded_files . <br/>";
echo "Number of successfully moved files $number_of_moved_files . <br/>";
echo "File Names are <br/>" . implode(',', $uploaded_files);
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T09:25:24.527

你可以用这个

```
 $ext = pathinfo($file_name, PATHINFO_EXTENSION);
 $newfilename = substr( sha1(uniqid (rand())), 0, 10). '.'.$ext; 
```

# google-analytics - 代码中的多个 trackpageview 调用

> ID：13450629
> 
> 赞同：2
> 
> 时间：2012-11-19T09:12:44.303
> 
> 标签：google-analytics

我有许多具有不同 url 的数据库生成页面。目前所有这些都通过调用来跟踪

```
_gaq.push(['_trackPageview']); 
```

我现在想将这些页面作为一个页面进行跟踪，但我无法删除现有的 _trackPageview 调用。因此，我决定添加一个新调用，以便对 _trackPageview 进行两次调用，如下所示：

```
_gaq.push(['_trackPageview']);
...
_gaq.push(['_trackPageview',static_url]); 
```

这行得通吗？这会跟踪同一页面的两个综合浏览量吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T02:55:27.060

是的，您当前的实现应该双重计算每个页面的综合浏览量，这可能不是您想要的。

如果您无法摆脱第一个呼叫，我建议创建一个新的单独配置文件并将第二个页面呼叫发送到此新配置文件，以便至少对其进行独立跟踪。最好的方法是在第二个跟踪器上添加前缀：

```
_gaq.push(['_trackPageview']);
...
_gaq.push(['b._setAccount', 'UA-XXXXXXXX-2']);
_gaq.push(['b._trackPageview']); 
```

这是讨论类似内容的参考： http://productforums.google.com/forum/#!category-topic/analytics/discuss-google-analytics-features-with-other-users/ [5nDlmeAriIw](http://productforums.google.com/forum/#!category-topic/analytics/discuss-google-analytics-features-with-other-users/5nDlmeAriIw)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T21:07:41.370

如果您使用 Google 跟踪代码管理器，您可以为每个页面设置触发规则，以便每个页面生成单独的触发事件。这也意味着您可以在 GTM 中管理您的标签，这样您就不必在每次想要进行更改时更新每个页面上的标签，只要每个页面上都有 GTM 容器代码。使用 Google Analytics 中的过滤器意味着您不需要不同的配置文件。

# ios - iOS 如何从邮件应用程序获取电子邮件联系人？

> ID：13450631
> 
> 赞同：1
> 
> 时间：2012-11-19T09:12:54.630
> 
> 标签：ios, abaddressbook

我的应用程序需要向朋友发送电子邮件。

我发现邮件应用程序的电子邮件地址比联系人应用程序多得多。在 Mail 应用程序或 MFMessageComposeViewController 中，我可以从之前联系过我的任何邮件中搜索电子邮件礼服。

我的问题是如何将这些电子邮件地址检索到我的应用程序？

最好的，

孔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T09:27:07.973

不，您只能通过[通讯簿 API](http://developer.apple.com/library/iOS/#documentation/ContactData/Conceptual/AddressBookProgrammingGuideforiPhone/Introduction.html#//apple_ref/doc/uid/TP40007744)访问联系人，这与使用的 API 相同[`MFMessageComposeViewController`](http://developer.apple.com/library/ios/#documentation/MessageUI/Reference/MFMessageComposeViewController_class/Reference/Reference.html)。

由于安全限制，Apple 不允许访问其他应用程序的数据。

# php - 如何使用 preg-match 将 html 标签替换为其他标签？

> ID：13450632
> 
> 赞同：2
> 
> 时间：2012-11-19T09:12:56.643
> 
> 标签：php, regex, preg-match

我有一个如下的字符串。

```
<label>value1<label>:value<br>
<label>value2<label>:value<br>
<label>value3<label>:value<br> 
```

我需要安排如下

```
 <li><label>value1<label><span>value</span><li> 
```

我已经尝试了过去 2 天，但没有运气。有帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T09:27:32.463

这真的不是你应该用正则表达式做的事情。您可能可以将一个可行的解决方案混在一起，前提是它对其正在解析的内容做出很多假设，但如果该内容与预期有任何显着程度的偏差，它总是很脆弱并且容易崩溃。

更好的选择是使用 PHP 的[DOM 系列](http://php.net/manual/en/book.dom.php)类。我真的不能自由地为您编写代码（无论如何，这不是 SO 的用途），但我可以为您提供有关您需要遵循的步骤的指示。

1.  定位标签之后和 BR 之前的文本节点（XPath 在这里可能很有用）
2.  将文本节点放入跨度。
3.  在标签之后将 span 插入 DOM
4.  删除 BR。
5.  将标签和跨度包装在一个里

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T08:19:33.670

如果，为了正则表达式，你应该使用它，然后如下：

```
$string = <<<TOK
<label>value1<label>:value<br>
<label>value2<label>:value<br>
<label>value3<label>:value<br>
TOK;
preg_match_all('/<label>(.*?)<label>\:(.*?)<br>/s', $string, $matches);
print_r($matches);
/*
Array
(
    [0] => Array
        (
            [0] => value1:value
            [1] => value2:value
            [2] => value3:value
        )
    [1] => Array
        (
            [0] => value1
            [1] => value2
            [2] => value3
        )

    [2] => Array
        (
            [0] => value
            [1] => value
            [2] => value
        )
)
*/
$content = "";
foreach($matches as $key => $match)
{
    $content.= "<li><label>{$matches[1][$key]}<label><span>{$matches[2][$key]}</span><li>\n";
}
echo($content);
/*
Output:
    <li><label>value1<label><span>value</span><li>
    <li><label>value2<label><span>value</span><li>
    <li><label>value3<label><span>value</span><li>
*/ 
```

# ssrs-2008 - SSRS 2008R2 中的全文对齐

> ID：13450647
> 
> 赞同：2
> 
> 时间：2012-11-19T09:14:14.770
> 
> 标签：ssrs-2008, reporting-services

有什么方法可以完全证明 SSRS 2008R2 中的文本。我想没有直接的选择。请建议任何解决方法来实现它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T11:33:37.350

这是 SSRS 的一个众所周知的限制。看看连接：[https](https://connect.microsoft.com/SQLServer/feedback/details/404966/full-justification-in-reporting-services-2008-needed) ://connect.microsoft.com/SQLServer/feedback/details/404966/full-justification-in-reporting-services-2008-needed 他们建议了一种可能适合您需求的[解决方法](http://www.fyireporting.com/forum/viewtopic.php?t=552)（您将需要访问您的报告服务器）

# android - Android：“/sdcard”与 Environment.getExternalStorageDirectory() 之间的区别是什么

> ID：13450648
> 
> 赞同：0
> 
> 时间：2012-11-19T09:14:19.567
> 
> 标签：android, sd-card

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T09:18:02.857

有时，某些设备制造商可能会为外部存储使用不同的路径。某些设备可能根本没有外部存储，并将其板载存储的一部分视为外部存储。在其他时候，“/sdcard”也可能被映射到另一个存储区域。

所以一般认为使用不明智`"/sdcard".`

另一方面，`Environment.getExternalStorageDirectory()`它是一个系统 API，将始终受到所有设备制造商的支持。它将始终正确映射到旨在用作该特定设备的外部存储的存储区域。因此，当您需要对外部存储目录的引用时，您可以安全地使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T09:17:09.333

并非所有设备都有 SD 卡。有些像平板电脑一样内置存储。因此，您应该使用外部存储目录。

可能是它是映射到 /sdcard 的目录，但也可能是其他目录/挂载。

回答您的问题：不，他们不会丢失那里的数据。

# google-apps-script - 可能加速gappscript

> ID：13450651
> 
> 赞同：0
> 
> 时间：2012-11-19T09:14:27.863
> 
> 标签：google-apps-script

我有一个从面板捕获信息的脚本。输入信息后，用户单击“提交”按钮，输入的数据将存储在电子表格中，该电子表格稍后将用于替换我在该电子表格的单元格上拥有的模板的某些字段。这个过程非常耗时，大约需要一分钟才能完成所有这些。我想知道的是，如果我可以使用参数信息，而不是将数据存储在电子表格的单元格中，并在我拥有的模板上替换它，是否有可能。关于如何做到这一点的任何想法？

```
function a(e) {

   var doc = SpreadsheetApp.getActiveSpreadsheet();
var timecell = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Templates").getRange("A2");
var timebval = timecell.setValue(e.parameter.Times);
var t1 = timecell.getValue();
var mincell = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Templates").getRange("A3");
var minbval = mincell.setValue(e.parameter.Minutes);
var t2 = mincell.getValue();
var namecell = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Templates").getRange("A4");
var nabval = namecell.setValue(e.parameter.Name);
var t3 = namecell.getValue();
var email = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Templates").getRange("A5");
var emaval = email.setValue(e.parameter.email);
var t4 = email.getValue();
var address = "albdominguez25@gmail.com";
var advancedArgs = {bcc:t4};
var emailSubject = "Test";

var emailTemplate =SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Templates").getRange("A1").getValue() ; 
  emailTemplate = emailTemplate.replace("TIME",t1).replace("MIN",t2).replace("EXP",t3);   

MailApp.sendEmail(address, emailSubject, emailTemplate, advancedArgs);

Browser.msgBox("Your Email has been sent!"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T09:48:13.100

无需将某些内容存储到电子表格并从其中读取每个值，只需直接使用 replace 方法中的值，如下所示。

```
function a(e) {
  var address = e.parameter.email;
  var advancedArgs = {bcc:t4};
  var emailSubject = "Test";

  var emailTemplate = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Templates").getRange("A1").getValue() ; 
  emailTemplate = emailTemplate.replace("TIME", e.parameter.Times).replace("MIN", e.parameter.Minutes).replace("EXP", e.parameter.Name);   

  MailApp.sendEmail(address, emailSubject, emailTemplate, advancedArgs);
  Browser.msgBox("Your Email has been sent!");
} 
```

如果您必须将这些值存储在电子表格中以供以后参考，则执行一次 setValues 而不是多次调用 setValue 会更快。使用参数 info 发送电子邮件后，只需调用它即可一次设置所有值：

```
var range = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Templates").getRange("A2:A5");
range.setValues([[e.parameter.Times], [e.parameter.Minutes], [e.parameter.Name], [e.parameter.email]]); 
```

# linux - 在加载巨大的 initrd 时显示启动图像

> ID：13450652
> 
> 赞同：7
> 
> 时间：2012-11-19T09:14:32.727
> 
> 标签：linux, kernel, splash-screen, initrd

考虑一个具有以下约束的实时 GNU/Linux 发行版：所有软件都应该包含在一个`initrd`映像中（这会导致其巨大的大小），并且内核包含尽可能少的静态编译模块。

考虑所描述的发行版的启动过程：引导加载程序（例如 grub 或 isolinux）加载内核，然后加载并提取 initrd 到内存中。在提取过程中（在旧计算机上需要 20-30 秒），屏幕上没有任何反应。

我想知道，是否有现成的解决方案可以在 initrd 提取过程中显示启动画面？如果没有，您能否对以下想法发表评论：

1.  将例如 600x480x8 位图像静态编译到内核中，并在提取 initrd 时以某种方式将其刷新到帧缓冲区中。

2.  做同样的事情，但强制加载特定的视频驱动程序（例如 VESA）并侵入其代码，而不是内核的帧缓冲区。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-16T16:34:33.023

也许你可以让它更简单：创建 2 个 initrd 文件。第一个可以很小。然后它可以调用 Plymouth 以在提取真正的 initrd 时显示启动画面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-21T17:04:37.803

如果您认为内核加载了 initrd 映像，那您就错了。它由引导加载程序完成。如果你想显示一个启动画面，你必须告诉你的引导加载程序显示一个图像。如何执行此操作取决于您的引导加载程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-09T13:31:33.083

您可以尝试创建一个普通的 .ppm 文件并将 LZMA 压缩用于内核压缩模式。这可以通过使用引导徽标选项来完成，但不确定它是否适合您。

首先，您需要在内核中启用对 Bootup 徽标和标准 224 色 Linux 徽标的支持：

设备驱动程序 —> 图形支持 ->

```
Support for frame buffer devices
VESA VGA graphics support
Video mode selection support
Framebuffer Console support
Select compiled-in fonts
VGA 8×16 font
Bootup logo
Standard 224-color Linux log 
```

其次，如果假设您有一个`.png`名为 的图像`screen.png`，则需要生成相应的`.ppm`文件：

```
pngtopnm screen.png| ppmquant -fs 223 | pnmtoplainpnm > /usr/src/linux/drivers/video/logo/logo_linux_clut224.ppm 
```

然后只需编译、安装、更新您的引导加载程序并检查它是否适合您。

# maven - DisplayTool安装和使用

> ID：13450656
> 
> 赞同：0
> 
> 时间：2012-11-19T09:14:49.267
> 
> 标签：maven, velocity

我正在使用 Velocity 1.7 来格式化字符串，但我在使用默认值时遇到了一些问题。Velocity 本身没有特殊语法来处理未设置值并且我们想使用另一个默认值的情况。通过速度，它看起来像：

```
#if(!${name})Default John#else${name}#end 
```

这对我的情况不方便。谷歌搜索后，我找到了 DisplayTool，根据文档，它看起来像：

```
$display.alt($name,"Default John") 
```

所以我添加了 maven 依赖项，但不确定如何将 DisplayTool 添加到我的方法中，并且很难找到相关说明。也许有人可以提供建议或提供有用的链接？...

我的方法：

```
public String testVelocity(String url) throws Exception{

    Velocity.init();
    VelocityContext context = getVelocityContext();//gets simple VelocityContext object 
    Writer out = new StringWriter();
    Velocity.evaluate(context, out, "testing", url);

    logger.info("got first results "+out);

    return out.toString();
} 
```

当我发送

```
String url = "http://www.test.com?withDefault=$display.alt(\"not null\",\"exampleDefaults\")&truncate=$display.truncate(\"This is a long string.\", 10)";
String result = testVelocity(url); 
```

我得到 "http://www.test.com?withDefault=$display.alt(\"not null\",\"exampleDefaults\")&truncate=$display.truncate(\"This is a long string.\" , 10)" 没有变化，但应该得到

```
"http://www.test.com?withDefault=not null&truncate=This is... 
```

请告诉我我错过了什么。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:26:41.070

URL 的构造发生在您的 Java 代码中，在您调用 Velocity 之前，因此 Velocity 不会计算`$display.alt(\"not null\",\"exampleDefaults\")`. 该语法仅在 Velocity 模板（通常具有`.vm`扩展名）中有效。

在Java代码中，不需要使用`$`符号，直接调用DisplayTool方法即可。我以前没有合作`DisplayTool`过，但它可能是这样的：

```
DisplayTool display = new DisplayTool();
String withDefault = display.alt("not null","exampleDefaults");
String truncate = display.truncate("This is a long string.", 10);
String url = "http://www.test.com?" 
    + withDefault=" + withDefault 
    + "&truncate=" + truncate; 
```

不过，`DisplayTool`直接从 Velocity 模板调用您的方法可能会更好。这就是[示例用法](http://velocity.apache.org/tools/devel/javadoc/org/apache/velocity/tools/generic/DisplayTool.html)中显示的内容。

# webcam - 使用 red5 进行网络摄像头录制

> ID：13450657
> 
> 赞同：-1
> 
> 时间：2012-11-19T09:15:04.703
> 
> 标签：webcam, red5, recording, video-recording

我们有一个 red5 记录器/red5 服务器设置。这工作正常，视频正在服务器中创建。我们在录制和播放等方面遇到问题，无法以简化的方式工作。即在您录制并播放录制的一个之后，它可能不会一直播放。玩家有点卡住了。

是否有任何可以很好地完成工作的 red5 记录器的免费或付费替代品？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T02:13:36.310

视频无法播放的原因可能会有所不同，并且不确定其他流媒体服务器是否会解决您的问题。例如，如果无论您使用哪种流媒体服务器都存在网络问题，它都会失败。但是，替代方案可能是 Wowza 或 Adob​​e FMS。

塞巴斯蒂安

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T07:36:08.127

也许您遇到了同样的问题，请参阅： [WARN orsnet.rtmpt.BaseRTMPTConnection - Response buffer was null after encoding](https://stackoverflow.com/questions/13477466/warn-o-r-s-net-rtmpt-basertmptconnection-response-buffer-was-null-after-encodi)

流失败后，您的日志文件中是否有任何警告？此日志文件可能会揭示您的问题，请参阅 /usr/local/red5/log/red5.log

# magento - Magento REST API 更新

> ID：13450660
> 
> 赞同：1
> 
> 时间：2012-11-19T09:15:18.970
> 
> 标签：magento, rest, model

我一直在尝试使用此链接格式通过 REST API 更新客户信息上的字段：

```
http://<magentohost>/api/rest/customers 
```

但是对于我收到的**客户电子邮件已经存在**

如何通过 REST API 更新信息..

示例代码：

```
 $productData = json_encode(array(
            'id'        => 1,
            'firstname' => 'Ted',
            'lastname'  => 'Mosbius',
            'website_id'=> 1,
            'group_id'     => 1,
            'email'         => 'ted@mosbis.com'
        ));
        $headers = array('Content-Type' => 'application/json');
        $oauthClient->fetch($resourceUrl, $productData, OAUTH_HTTP_METHOD_POST, $headers);
        // $oauthClient->fetch($resourceUrl);
        $productsList = json_decode($oauthClient->getLastResponse());
        print_r($productsList); 
```

在这段代码中，电子邮件存在，id 存在，website_id 存在并且 group_id 存在......我只是想更新 firstName 和 lastName

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T09:44:37.507

刚刚发现问题，基于此链接（http://ajaxpatterns.org/RESTful_Service）进行更新时，我需要使用**PUT**而不是**POST ...**

```
$productData = json_encode(array(
    'id'        => 1,
    'firstname' => 'Ted',
    'lastname'  => 'Mosbius',
));
$headers = array('Content-Type' => 'application/json');
$oauthClient->fetch($resourceUrl, $productData, OAUTH_HTTP_METHOD_PUT, $headers);
$productsList = json_decode($oauthClient->getLastResponse());
print_r($productsList); 
```

希望这将有助于将来的某人...... :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T13:31:49.957

错误确实出现了更少的标题，如下所示：

```
$headers = array('Content-Type' => 'application/json', 'Accept' => '*/*'); 
```

# c# - 在 web.config 文件中写一个 Server.MapPath？

> ID：13450670
> 
> 赞同：1
> 
> 时间：2012-11-19T09:15:51.863
> 
> 标签：c#, asp.net, web-config, log4net, server.mappath

嗨，我正在尝试为我的实时网站编写日志并且我的路径有问题，我需要使用方法 Server.MapPath 但我需要在我的 web.config 中完成它。

我该怎么办？

文件值保存路径，但我需要在其上设置一个 Server.MapPath。

```
 <log4net>

<add key="LogFilePath1" value="../Logs/CurrentLog" id="FP1"/>
<add key="LogFilePath2" value="../Logs/CurrentLog.txt" id="FP2" />

<appender name="RollingFileAppender" type="log4net.Appender.RollingFileAppender">
  <file value="../Logs/CurrentLog"/> 
  <appendToFile value="true"/>

  <rollingStyle value="Size"/>
  <maxSizeRollBackups value="10"/>
  <maximumFileSize value="10000"/>
  <staticLogFileName value="true"/>
  <filter type="log4net.Filter.LevelRangeFilter">
    <acceptOnMatch value="true"/>
    <levelMin value="INFO"/>
    <levelMax value="FATAL"/>
  </filter>
  <layout type="log4net.Layout.PatternLayout">
    <conversionPattern value="%-5level %date [%thread] %-22.22c{1} - %m%n"/>
  </layout>
</appender>

<appender name="LogFileAppender" type="log4net.Appender.FileAppender">
  <file value="../Logs/Log.txt"/>
  <appendToFile value="true"/>
  <layout type="log4net.Layout.PatternLayout">
    <header value="**"/>
    <footer value="**"/>
    <conversionPattern value="%newline%date [%thread] %-5level %logger - %message%newline" />
  </layout>
</appender>

<root>
  <level value="DEBUG"/>
  <appender-ref ref="LogFileAppender"/>
  <appender-ref ref="ConsoleAppender"/>
  <appender-ref ref="RollingFileAppender"/>
</root>

<logger name="ConsoleApp.LoggingExample">
  <level value="ERROR"/>
  <appender-ref ref="EventLogAppender"/>
</logger> 
```

记录器代码 C#：

```
public class Logger
    {
        protected static readonly ILog logger = LogManager.GetLogger(typeof(Logger));

        public void logError(string message, Exception ex)
        {
            HttpContext.Current.Server.MapPath(Convert.ToString(ConfigurationManager.AppSettings["LogFilePath1"]));
            HttpContext.Current.Server.MapPath(Convert.ToString(ConfigurationManager.AppSettings["LogFilePath2"]));
            log4net.Config.XmlConfigurator.Configure();
            logger.Error(message + ex);
        }

        public void logInfo(string message)
        {
            HttpContext.Current.Server.MapPath(Convert.ToString(ConfigurationManager.AppSettings["LogFilePath1"]));
            HttpContext.Current.Server.MapPath(Convert.ToString(ConfigurationManager.AppSettings["LogFilePath2"]));
            log4net.Config.XmlConfigurator.Configure();
            logger.Info(message);
        }

    } 
```

我已将 C# 代码添加到 Server.MapPath 的键中，我只是在努力调用文件值中的键 =

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T09:34:17.453

将您的路径存储在配置中

```
<add key="LogFilePath1" value="~/Logs/CurrentLog" id="FP1"/> 
```

从您的代码中读取密钥

```
string path = GetPath("LogFilePath1");
string fullPath = System.Web.HttpContext.Server.MapPath(path); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T10:37:48.940

从配置文件中读取路径时，Log4net 不使用 Server.Map 路径。它不知道它是在 Web 上下文中运行的。我猜你可以实现你自己版本的 Rolling File Appender 并覆盖从配置中获取路径的函数。但是，我只会使用日志位置的完整路径。通常，您确实希望登录您的应用程序正在运行的其他磁盘，以防止磁盘空间不足并杀死您的应用程序。

# xml - XSD：从模式中限制 0（零）

> ID：13450672
> 
> 赞同：1
> 
> 时间：2012-11-19T09:15:54.440
> 
> 标签：xml, regex, xsd, xsd-validation

样品 xsd

```
<xsd:simpleType name="test">
        <xsd:restriction base="xsd:token">
            <xsd:pattern value="[a-zA-Z0-9\-]{1,17}"/>
        </xsd:restriction>
    </xsd:simpleType> 
```

我如何更改此模式以阻止零。（是否可能）
更多信息：
0 不应该被允许
00 ,000,0000 等不应该被允许
10 有效并且应该被允许

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T10:01:44.410

由于 XML 不支持前瞻，因此为长度不超过 17 的字符串断言这一点的正则表达式可能会变得非常难看。但我认为您可以将长度约束提取为单独的限制：

```
<xsd:simpleType name="test">
    <xsd:restriction base="xsd:token">
        <xsd:pattern value="[a-zA-Z0-9\-]*[a-zA-Z1-9\-][a-zA-Z0-9\-]*"/>
        <xsd:minLength value="1"/>
        <xsd:maxLength value="17"/>
    </xsd:restriction>
</xsd:simpleType> 
```

现在该模式需要一个非零字符（在允许的字符类之外）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T01:32:40.050

如果您的目标不是禁止令牌中出现 0，而只是禁止仅由零组成的令牌（因此接受“10”和“01”，但拒绝“0”、“00”等），那么也许这会做你想要的：

```
<xs:simpleType name="test">
  <xs:restriction>
    <xs:simpleType>
      <xs:restriction base="xs:token">
        <xs:pattern value="[a-zA-Z0-9\-]{1,17}"/>
      </xs:restriction>
    </xs:simpleType>
    <xs:pattern value=".*[^0].*"/>
  </xs:restriction>
</xs:simpleType> 
```

基本思想是从你已经定义的类型开始，然后通过限制从它派生出另一种类型，加上词法空间的每个成员必须有一个非 0 字符的约束。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T12:45:09.600

怎么样

`<xsd:pattern value="[a-zA-Z1-9\-]|[a-zA-Z0-9\-]{2,17}"/>`

# java - 使用 java 的 linux 操作系统的 USB 检测

> ID：13450673
> 
> 赞同：4
> 
> 时间：2012-11-19T09:16:00.540
> 
> 标签：java

我是java新手。每当用户插入 USB 端口时，我都需要帮助来检测 USB 事件。这应该适用于使用 java 的 linux 操作系统。请建议我 api 可以完全满足我的要求

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T09:23:32.283

你可以使用这个：

[http://jusb.sourceforge.net/](http://jusb.sourceforge.net/)

也检查这个讨论：

[SWT：收到系统设备更改通知（USB 设备连接/断开）](https://stackoverflow.com/questions/765564/swt-getting-notified-of-a-system-device-change-usb-device-connection-disconn)

编辑1。请记住，jusb 已停产。但是，它的完整源代码可在 sf 上找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-17T21:46:59.380

Java 7.0 引入了新的 API WatchService。结合 linux-command 'mount'，我找到了一个可行的解决方案。

见[http://arjenmaxnet.blogspot.nl/2014/01/detecting-usb-devices-with-java-70.html](http://arjenmaxnet.blogspot.nl/2014/01/detecting-usb-devices-with-java-70.html)

# datetime - DateTime.Parse(string)' 引发类型为“System.FormatException”的异常 System.DateTime {System.FormatException}

> ID：13450676
> 
> 赞同：0
> 
> 时间：2012-11-19T09:16:10.507
> 
> 标签：datetime

`DateTime.Parse(string)``System.FormatException` `System.DateTime {System.FormatException}`为不同的文化抛出了类型异常。

有没有办法将存储在字符串中的日期从任何文化转换为日期时间格式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T09:18:45.897

```
System.Globalization.CultureInfo cultureinfo =  new System.Globalization.CultureInfo("en-gb");
DateTime dt = DateTime.Parse("13/12/2009", cultureinfo); 
```

# c# - 更改 Recaptcha 的主题？

> ID：13450677
> 
> 赞同：3
> 
> 时间：2012-11-19T09:16:11.653
> 
> 标签：c#, javascript, asp.net, captcha, recaptcha

我使用以下脚本在 c# 服务器端更改asp.net 中的recaptcha。但是这段代码不起作用。**如何更改 ReCaptcha 的颜色或主题？**

```
 <script type="text/javascript">
            var RecaptchaOptions = {theme : 'White'};
       </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T09:21:59.217

我认为您只是以错误的方式书写主题名称，只需尝试使用小“w”的白色即可。

```
<script type="text/javascript">
            var RecaptchaOptions = {theme : 'white'};
</script> 
```

请参阅此链接以获取确切的工作代码：

[https://developers.google.com/recaptcha/docs/customization](https://developers.google.com/recaptcha/docs/customization)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-24T22:41:27.030

George Siggouroglou 的 asp.net 的第二种方法是一种魅力

我似乎无法按照[https://developers.google.com/recaptcha/docs/customization](https://developers.google.com/recaptcha/docs/customization)中的说明设置主题- 将 js 放在包含 recaptcha 控件的表单上方 - 但将主题属性直接添加到 recaptcha 代码中乔治解释说：

```
<recaptcha:RecaptchaControl
    ID="recaptcha"
    runat="server"
    PublicKey="your-public-key"
    PrivateKey="your-private-key"
    Theme="white"
/> 
```

作品。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T09:20:53.180

你用大写`W`而不是小写`w` 试试这个

换个主题试试

```
<script type="text/javascript">
 var RecaptchaOptions = {
    theme : 'white'
    /*WE CAN USE FOLLOWING THEME TO CHANGE THE COLOR OF RECAPTHCA*/
    /*red,white,blackglass,clean'*/

    /*lang :'es';*/ //used to set the language
 };
 </script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-27T12:19:35.750

如果您使用的是 asp.net 并且如果您使用[recapctcha 来控制 asp.net](https://developers.google.com/recaptcha/docs/aspnet)，那么如果您想更改主题（红色（默认）、白色、黑色玻璃、干净），有两种方法。

[方法 1，](https://developers.google.com/recaptcha/docs/customization)

> 要使 reCAPTCHA 小部件显示不同的主题，您首先需要
> 在主 HTML 页面中 reCAPTCHA 出现的元素**之前**
> 的任何位置添加以下代码 （如果放置在第一次调用 reCAPTCHA 的主脚本之后，这将不起作用）：

```
<script type="text/javascript">
    var RecaptchaOptions = {
        theme : 'theme_name'
    };
</script> 
```

方式二：

> 将属性“主题”添加到 recapcha asp.net 控件：

```
<recaptcha:RecaptchaControl
    ID="recaptcha"
    runat="server"
    PublicKey="your-public-key"
    PrivateKey="your-private-key"
    Theme="white"
/> 
```

# java - 如何使用 Saxon 调试 XSLT 中的扩展函数？

> ID：13450683
> 
> 赞同：1
> 
> 时间：2012-11-19T09:16:25.793
> 
> 标签：java, xslt, xslt-1.0, saxon

我一直在阅读有关如何将扩展函数与 XSLT 和 Saxon 一起使用的编程博客，并且似乎无法成功引用 XSLT 中的外部 Java 函数。每当我运行转换时，我都会收到以下错误：

```
Cannot find a matching 0-argument function named {come.acme.javaxslt.business.CarBusiness}getModel()
  at xsl:apply-templates (file:/C:/Users/Dave/workspace/acme-javaXSLT-demo/cars.xsl#18)
     processing /cars/car[1]/model[1]
  in built-in template rule
  at xsl:apply-templates (file:/C:/Users/Dave/workspace/acme-javaXSLT-demo/cars.xsl#10)
     processing /cars
EXCEPTION: net.sf.saxon.trans.XPathException: Cannot find a matching 0-argument function named {com.acme.javaxslt.business.CarBusiness}getModel()
; SystemID: file:/C:/Users/Dave/workspace/acme-javaXSLT-demo/cars.xsl; Line#: 30; Column#: -1
net.sf.saxon.trans.XPathException: Cannot find a matching 0-argument function named {com.acme.javaxslt.business.CarBusiness}getModel()
    at net.sf.saxon.expr.ErrorExpression.evaluateItem(ErrorExpression.java:58)
    at net.sf.saxon.expr.ErrorExpression.iterate(ErrorExpression.java:71)
    at net.sf.saxon.expr.Atomizer.iterate(Atomizer.java:180)
... 
```

**引用的Java类：**

```
package com.acme.javaxslt.business;

public class CarBusiness {

    public static String getModel(){
        return "/";
    }
} 
```

**XSLT：**

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:cars="com.acme.javaxslt.business.CarBusiness">

<xsl:template match="/">
  <html>
  <body>
  <h2>My Car Collection</h2>  
  <xsl:apply-templates/>  
  </body>
  </html>
</xsl:template>

<xsl:template match="car">
  <p>
    <xsl:apply-templates select="make"/>  
    <xsl:apply-templates select="model"/>
  </p>
</xsl:template>

<xsl:template match="make">
  Make: <span style="color:#ff0000">
  <xsl:value-of select="."/></span>
  <br />
</xsl:template>

<xsl:template match="model">
  Artist: <span style="color:#00ff00">
  <xsl:value-of select="cars:getModel()"/></span>
  <br />
</xsl:template>

</xsl:stylesheet> 
```

**在 Java 中使用撒克逊语：**

```
TransformerFactory tfactory = TransformerFactory.newInstance();
Transformer transformer = tfactory.newTransformer(new StreamSource(new File(xslID)));
transformer.transform(new StreamSource(new File(sourceID)), new StreamResult(new File("html/report.html"))); 
```

一旦运行上述，就会发生错误。

即使我将自定义 Java 类替换为 XSLT 中的内置 Java 方法，我也会收到相同的错误。所以很明显XSLT 没有与Java 挂钩。

推荐的方法是将 -TJ 添加到 JVM 选项中，或者使用 FeatureKeys.TRACE_EXTERNAL_FUNCTIONS 做一些事情，但我已经在网上搜索了很多关于如何执行此操作的信息，以便了解为什么我的 XSLT没有与外部Java函数挂钩，无济于事。

拜托，有人可以帮我弄清楚我的问题是什么吗？

Saxon PE 和 HE 正在发生这种情况，我还没有尝试过其他版本。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T11:33:39.990

我应该使用早期版本的 Saxon，Saxon-B 9.1.0.8，如下所示：

[http://sourceforge.net/p/saxon/discussion/94027/thread/33492ab5/](http://sourceforge.net/p/saxon/discussion/94027/thread/33492ab5/)

只要我将较旧的 jar 文件放在路径中，上面的 XSLT 就会正确调用 java 函数。

# php - 自动显示数据库中的数据并在液晶屏上显示

> ID：13450684
> 
> 赞同：0
> 
> 时间：2012-11-19T09:16:28.587
> 
> 标签：php, javascript, html, mysql

我想使用 php 和 mysql 创建如下内容：-

[http://prositos.no/cl/](http://prositos.no/cl/)

它与以下内容相同或相似：-

*   航班信息系统
*   电影院的电影放映时间列表

可能吗？我不知道这个自动更改页面的确切名称。我试图在网上搜索教程，但没有运气。

有人可以帮助/指导我了解如何开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T09:27:12.010

1.  从提供您可以使用的 API 的任何站点获取航班数据（或解析具有您需要的数据的站点）
2.  将数据保存到数据库
3.  创建一个显示缓存的航班数据的站点

每当有人打开您的网站时，您都必须检查缓存数据的年龄。如果它（例如 1 分钟）太旧，您将在输出站点之前更新航班数据。

另一种方法是设置一个 cronjob，每 n 分钟更新一次缓存的航班数据。

您可以添加一些 javascript 让页面每 n 分钟通过 AJAX 重新加载一次。

# javascript - 在不使用循环或 jQuery 的情况下获取数组或 JSON 中选择的选项值列表

> ID：13450686
> 
> 赞同：3
> 
> 时间：2012-11-19T09:16:40.920
> 
> 标签：javascript, jquery, json

我需要数组或 JSON 中的选项值列表。我使用了以下代码。

```
var compArray=[];
jQuery("#myCombo option").each(function(){
       compArray.push(jQuery(this).val());
       }); 
```

但我不想循环迭代选项，因为我的选项列表可以增长。我用过

```
JSON.stringify(document.getElementById("myCombo").options) 
```

但是在 stringify 它显示空的 JSON 对象，虽然我可以从中获得价值

```
document.getElementById("myCombo").options[0].value 
```

我必须将请求参数中的这些值传递给服务器，并且我不想通过循环。请提出优化的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T10:11:32.263

您可以像这样使用自定义序列化程序：

```
var options = Array.prototype.slice.call(document.getElementById("sel").options),
    str = JSON.stringify(options, function(key, value){
       if(key === ""){
           return value;   
       }
       if(!isNaN(parseInt(key))) {
          return value.value;   
       }
    }; 
```

[http://jsfiddle.net/Vh9qD/](http://jsfiddle.net/Vh9qD/)

或者使用迭代而不为每个选项创建 jQuery 实例

```
var options = Array.prototype.slice.call(document.getElementById("sel").options),
    str = JSON.stringify(options.map(function(item){return item.value;})); 
```

检查此性能测试：http: [//jsperf.com/get-options](http://jsperf.com/get-options)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T09:24:32.047

`But i dont want to iterate the options in a loop because my options list can grow.`

这与组合没有任何关系。

每当您`option`向组合添加/删除 a 时，只需调用一个函数，该函数随后`option`将从您的数组中添加/删除它。

```
function addDeleteListInArray( oVal, addDelete ) {
   if( addDelete ) {
       // add to array
       compArray.push( oVal );
   } else {
       // delete from array
       for( var i=0; i< compArray.length; i++ ) {
          if( compArray[ i ] == oVal ) {
              compArray.splice( i, 1 );
              break;
          }
       }
   }
} 
```

希望这可以帮助。

# mysql - CakePHP 保存默认值 0

> ID：13450688
> 
> 赞同：2
> 
> 时间：2012-11-19T09:16:43.733
> 
> 标签：mysql, cakephp, database-design, cakephp-1.3

`0`使用 CakePHP 1.3如果表单字段中没有写入任何内容，我想为字段保存一个值。最好的方法是仅在 MySQL 中执行此操作，但没有成功。我试图设置：

`Null`=`no`和`Default`= `0`; 或`Null`=`yes`和`Default`= `0`;

此外，这两种组合都结合了 CakePHP Behavior 设置为`beforeSave`or `beforeValidate`：

`$model->data[$name][$field] = 0;` 或者 `unset($model->data[$name][$field]);`

还有：

`Null`=`yes`和`Default`= `0`; 或`Null`=`yes`和`Default`= `NULL`;

始终查询是：

```
 INSERT INTO `table` (`zero_field`, `other_fields`) VALUES (NULL, 'other_data')
 or
 INSERT INTO `table` (`zero_field`, `other_fields`) VALUES ('', 'other_data') 
```

如果`Null`=`no`出现错误：`Column 'zero_field' cannot be null`

即使我取消设置该字段，我也会得到包含该字段的查询。

`0`如果表单中的值未设置或为空，我应该如何在数据库中保存值？

`zero_field`是_`int(11)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T12:19:11.893

1.  为数据库中的字段设置 null = no, default = 0
2.  清除 app/tmp/cache/models/* 中的模型缓存文件
3.  确保在保存新记录之前使用 Model->create() ，以便使用默认值填充要保存的新记录。
4.  保存并获胜。

# ajax - 对 TideSDK 应用程序之外的 xml 文件的 Ajax 请求

> ID：13450696
> 
> 赞同：0
> 
> 时间：2012-11-19T09:16:52.577
> 
> 标签：ajax, tidesdk

我有一个 TideSDK 应用程序，它将与另一个文件夹位于同一文件夹中，其中包含一个 xml 文件以及一些图像和视频。

```
 [my application]
        -> application.app
        -> [data]
            -> data.xml
            -> image.jpg 
```

现在我需要获取 xml 文件中的数据以及图像/视频的 urls/filepath 这可能吗？

该应用程序在没有 TideSDK 的情况下通过 ajax 获取数据在线工作，所以我在这里尝试以相同的方式进行操作，但只是将文件路径更改为 xml。我试图通过对其进行硬编码并使用 Ti.Filesystem.getFile() 来做到这一点，但结果总是相同的：pathToTheApplication/application.app/Contents/Resources/pathToTheApplication/data/data.xml。

所以你可以看到 url 的第二部分是正确的，但它总是从 Resources 文件夹开始。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T15:38:04.627

您应该能够使用 getFile()。您是否确保将绝对路径传递给文件而不是相对路径？

# java - 如何让Tomcat等到Web应用程序完成？

> ID：13450698
> 
> 赞同：0
> 
> 时间：2012-11-19T09:16:56.760
> 
> 标签：java, tomcat, servlets, jersey

我有一个 Java Web 应用程序，打包为“战争”并部署在`Tomcat`. 该应用程序用于`Jersey`实现 REST Web 服务。

此应用程序有时会更新文本 (XML) 文件。我猜如果`Tomcat`在应用程序仍在更新此文件时停止，则该文件可能已损坏。为了防止文件损坏，我想`Tomcat`等到文件关闭后再退出。现在我想知道如何实现它。

所以，我的问题是如何`Tomcat`等到 Web 应用程序完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T09:19:20.390

看看[ServletContextListener](http://docs.oracle.com/javaee/5/api/javax/servlet/ServletContextListener.html)特别是 context Destroyed 方法。

**Servlet 上下文即将关闭的通知。**

```
 void  contextDestroyed(ServletContextEvent sce) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T09:41:02.820

在您的情况下，我会采取不同的方法（这可能不是您问题的答案，而是您的情况的建议）。

将新的 xml 文件写入临时文件 (conf.xml.tmp)，这样您的原始文件 (conf.xml) 仍然保持不变。

完成生成 xml 后，只需将新生成的 (conf.xml.tmp) 移到原始 (conf.xml) 的顶部。

（您也可以复制原件用于备份）。

这样，如果 tomcat 在处理 xml 生成时停止，您将始终拥有一个工作 xml。

这里的关键是在同一个磁盘中移动文件在某种程度上是一种“原子”操作，它会完成或不完成，但不会完成一半。

希望能帮助到你

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T09:33:06.987

您可以修改关闭脚本来解决这个问题。确保该文件处于一致状态，然后调用关闭。

您可以检查文件写入是否正在处理中，然后将脚本休眠 5 分钟，然后调用 shutdown.sh/shutdown.bat 脚本。

除此之外，您还可以在 java 级别执行；但我更喜欢从外部控制它。这样您就可以独立于您的核心应用程序对其进行修改。

# r - ggplot2：用每个条形图的总数注释堆积条形图

> ID：13450700
> 
> 赞同：1
> 
> 时间：2012-11-19T09:17:09.987
> 
> 标签：r, ggplot2, bar-chart

我想注释一个图以显示每列的总数。例如

```
 ggplot(diamonds, aes(clarity, fill=cut)) + 
        geom_bar(position="fill") +
        scale_y_continuous(name="proportion") 
```

这将产生一个堆叠的条形图。然而，很难知道每个条的 n 是多少。I1、SI2 等。如何对其进行注释，以便对于每个条形，n 都显示在顶部？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T09:24:07.210

最简单的方法是在绘图之前计算总数，然后将它们分别添加到绘图中。首先，我们计算列总数：

```
totals = tapply(diamonds$price, diamonds$clarity, length)
dd = data.frame(clarity = names(totals), labels = as.vector(totals), y= 1) 
```

然后我们使用`geom_text`添加总数：

```
ggplot(diamonds, aes(clarity)) + 
    geom_bar(aes( fill=cut), position="fill") +
    scale_y_continuous(name="proportion") + 
    geom_text(data=dd, aes(x=clarity, y=y, label=labels), size=4) 
```

# python - 一段时间后意外退出：错误无法将 str 转换为浮点数

> ID：13450702
> 
> 赞同：0
> 
> 时间：2012-11-19T09:17:18.677
> 
> 标签：python, linux, nohup

我编写了一个小脚本，每小时从网站读取并搜索某个字符串。这个字符串是我要计算的数字。

如果我使用“nohup python3 /path/to/script &”运行脚本，它会工作一段时间。几个小时后，有时几天甚至弱化脚本停止处理“〜/ nohup”中的错误输出，即float（）无法转换第41行中的字符串。

```
line 41: current_value = float(html_content[temperature_pos_begin:temperature_pos_end]) 
```

整个脚本： http: [//pastebin.com/AEY1Kafa](http://pastebin.com/AEY1Kafa)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T09:23:47.370

使用异常处理程序查看导致错误的原因。如果温度不可用，他们可能会使用某种占位符。

```
try:
    current_value = float(html_content[temperature_pos_begin:temperature_pos_end])
except ValueError:
    print "Failed to convert %r to a float"%html_content[temperature_pos_begin:temperature_pos_end]
    current_value = None # or something that makes sense 
```

# javascript - 如何在IE中设置表格的行背景颜色

> ID：13450703
> 
> 赞同：2
> 
> 时间：2012-11-19T09:17:38.923
> 
> 标签：javascript, html, internet-explorer

我用了

```
mycurrent_row.setAttribute("bgcolor", "#EEF4EA"); 
```

它适用于 firefox 和 chrome。但在 ie 中没有设置颜色

我用

```
mycurrent_row.setAttribute("bgcolor", "#EEF4EA");
mycurrent_row.bgcolor = "#EEF4EA"; 
```

它既不工作。

如何在 IE 中设置行的颜色？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T09:19:31.410

该属性名为`bgColor`，而不是`bgcolor`，但您应该使用[backgroundColor CSS 属性](http://msdn.microsoft.com/en-us/library/ie/ms530716%28v=vs.85%29.aspx)而不是[弃用的 HTML 属性 bgColor](http://msdn.microsoft.com/en-us/library/ie/ms533505%28v=vs.85%29.aspx)：

```
mycurrent_row.style.backgroundColor = "#EEF4EA"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T09:19:45.720

您可以设置内联样式

```
mycurrent_row.setAttribute("style", "background:#EEF4EA"); 
```

# android - 地图中的GeoPoint与谷歌地图显示位置不同

> ID：13450705
> 
> 赞同：0
> 
> 时间：2012-11-19T09:17:43.510
> 
> 标签：android, location

我使用 LocationManager 来获取位置。然后将位置转换为 GeoPoint 并在地图中显示。为什么它与谷歌地图显示位置如此不同？这是获取位置的方法：

```
mLocationManager = (LocationManager)this.getSystemService(Context.LOCATION_SERVICE);
        Criteria criteria = new Criteria();
        criteria.setAccuracy(Criteria.ACCURACY_FINE);
        criteria.setAltitudeRequired(false);
        criteria.setBearingRequired(false);
        criteria.setCostAllowed(true);
        criteria.setPowerRequirement(Criteria.POWER_LOW);
        final String strLocationProvider = mLocationManager.getBestProvider(criteria, true);
 mLocationManager.requestLocationUpdates(strLocationProvider, 1000, 0, 
                new LocationListener(){

                    @Override
                    public void onLocationChanged(Location location) {
                        // TODO Auto-generated method stub
                        double geoLatitude = mLocation.getLatitude()*1E6;
            double geoLongitude = mLocation.getLongitude()*1E6;
            GeoPoint currentGeoPoint = new GeoPoint((int)geoLatitude,(int)geoLongitude);
            mapCon.animateTo(currentGeoPoint);                  }

                    @Override
                    public void onProviderDisabled(String provider) {
                        // TODO Auto-generated method stub

                    }

                    @Override
                    public void onProviderEnabled(String provider) {
                        // TODO Auto-generated method stub

                    }

                    @Override
                    public void onStatusChanged(String provider, int status,
                            Bundle extras) {
                        // TODO Auto-generated method stub

                    }
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T09:23:06.530

尝试这个。

```
LocationListener locationListener = new LocationListener() {
     public void onLocationChanged(Location location) {      
     int lat = (int) (location.getLatitude() * 1E6);
     int lng = (int) (location.getLongitude() * 1E6);
     GeoPoint point = new GeoPoint(lat, lng);
     OverlayItem overlayitem4 = new OverlayItem(point, "You Are Here", "Boulder, CO"); 
 }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T09:51:06.440

您可以使用投影在地理点和地图上的点之间进行转换。

```
Projection projection = mapView.getProjection(); 

GeoPoint point = new GeoPoint(lat, lng);

Point myPoint = new Point();
projection.toPixels(point, myPoint); 
```

然后你会在你的 OverlayItem 中使用 myPoint

# php - cURL 未正确保存图像

> ID：13450709
> 
> 赞同：-1
> 
> 时间：2012-11-19T09:18:08.243
> 
> 标签：php, curl

```
$ch = curl_init();
$fp = fopen("$localName",'w');

curl_setopt($ch, CURLOPT_FILE, $fp);
curl_setopt($ch, CURLOPT_URL, $src);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_BINARYTRANSFER,1);
curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/4.0 (compatible; MSIE 5.01; Windows NT 5.0)");
curl_setopt($ch, CURLOPT_TIMEOUT, 200);
curl_setopt($ch, CURLOPT_AUTOREFERER, false);
curl_setopt($ch, CURLOPT_REFERER, "http://google.com");
curl_setopt($ch, CURLOPT_HTTP_VERSION, CURL_HTTP_VERSION_1_1);
curl_setopt($ch, CURLOPT_HEADER, 0);
$rawdata=curl_exec ($ch);
curl_close ($ch);

fwrite($fp, $rawdata); 
fclose($fp); 
```

... 写入文件但无效（0 字节）。请告诉我我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T09:38:10.127

我运行了您的代码，但出现了一些错误。我在这里纠正了那些：

```
$src = '<URL to the image>';
$ch = curl_init($src);

//curl_setopt($ch, CURLOPT_FILE, $fp); This option is not required
//curl_setopt($ch, CURLOPT_URL, $host); Since you are setting the source in init skip this
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_BINARYTRANSFER,1);
curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/4.0 (compatible; MSIE 5.01; Windows NT 5.0)");
curl_setopt($ch, CURLOPT_TIMEOUT, 200);
curl_setopt($ch, CURLOPT_AUTOREFERER, false);
curl_setopt($ch, CURLOPT_REFERER, "http://google.com");
curl_setopt($ch, CURLOPT_HTTP_VERSION, CURL_HTTP_VERSION_1_1);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, TRUE); // Follows redirect responses.

$raw=curl_exec($ch);
if ($raw === false) {
    trigger_error(curl_error($ch));
}

curl_close ($ch);
$localName = basename($src); // The file name of the source can be used locally       
if(file_exists($localName)){    
    unlink($localName);
}

$fp = fopen($localName,'wb');
fwrite($fp, $raw);
fclose($fp); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T07:46:39.507

原来问题是加载了一些图像，但是 302 重定向状态消息混淆了 curl。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T09:25:07.460

尝试为图像类型添加 header()。

例如，如果它是 PNG 图像，请在代码中添加：

```
// ...
header('Content-type: image/png');
file_put_contents($raw); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T09:29:27.107

玩了一场，您似乎只需要以下内容：

```
<?
$src = 'http://bit.ly/TT5N5M';

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $src);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
$output = curl_exec($ch);
curl_close($ch);

$fp = fopen("img.jpg",'w');
fwrite($fp, $output);
fclose($fp); 
```

# ruby-on-rails-3 - 性能：Rails 3.2.8 开发日志显示大量 CACHE 行

> ID：13450710
> 
> 赞同：1
> 
> 时间：2012-11-19T09:18:10.750
> 
> 标签：ruby-on-rails-3

在 Rails 3.2.8 的开发中，我从 CACHE 中得到了很多这样的行。

```
CACHE (0.0ms)  SELECT "projects".* FROM "projects" WHERE "projects"."id" IN (1, 7) 
```

我知道 rails 正在缓存查询以提高性能。所有缓存行都在 0,0 毫秒内完成。所以，这可能不是问题。

**问题**

我是否应该尝试改进我的代码/设计以摆脱如此多的缓存？它会提高性能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T09:34:10.870

缓存通常会提高而不是损害应用程序性能。默认情况下，在单个请求中，完全相同的查询只会运行一次，其余时间的结果将被缓存。这就是您通过 CACHE 日志条目观察到的情况。

然而，这意味着您的应用程序尝试多次执行完全相同的查询。所以是的，我建议您查看模型的哪些部分被反复请求，并可能保留物化`.all`结果并将它们作为参数传递而不是查询您的模型。

更准确的答案当然取决于您的具体情况，但您的直觉是正确的 - 大量缓存命中暗示可能会改进一点的设计。

还有一点需要注意：如果要确保查询执行非缓存，请将其包装在 uncached 方法中，如下所示：

```
 ActiveRecord::Base.uncached do
    # your code here   
  end 
```

# html - 如何将 html 字符串转换为 pdf？

> ID：13450712
> 
> 赞同：0
> 
> 时间：2012-11-19T09:18:12.650
> 
> 标签：html, asp-classic, pdf-generation

我正在使用 ASPPDF 活动 x 组件。我已经从 ASP 创建了一个 pdf 文档。但是这个pdf的内容只是简单的文本。如何将包含 html 标签的 asp 变量转换为 pdf 文档？

这是我的代码

```
Set Pdf = Server.CreateObject("Persits.Pdf")                
Set Doc = Pdf.CreateDocument                    
Doc.Title = "Mi primer documento PDF"
Doc.Creator = "arsys.es"                    
Set Page  = Doc.Pages.Add                   
Set Font =  Doc.Fonts("Helvetica")          
Params = "x=0; y=650; width=612; alignment=center;  size=10"                    
Page.Canvas.DrawText "pdf text", Params, Font 'can I put asp variable instead of "pdf      text"?                   
Filename = Doc.Save( Server.MapPath("salida\archivo.pdf"), False  )                 
Response.Write "Enhorabuena! Descarga tu primer <A HREF=salida/" &  Filename &  ">archivo  PDF</A>" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T19:11:28.153

我的服务器上运行着同样的东西。它附带的指南需要您使用`Doc.ImportFromUrl`，但这需要对 ASP 页面的完整参考。所以....

1) 如果需要，创建您的 ASP 页面并使用 SQL 和绑定来布局您的页面。我将其与 QueryString 参数一起使用，因为我只想引用一个值来创建 PDF .....我的示例基于创建发票。

2) 在 ASP 页面的“不同文件夹”中运行页面中的 ASPPDF 脚本

3) 确保您有完整的路径参考，例如[http://www.domain.com/file.asp](http://www.domain.com/file.asp)

这应该有助于：

```
<%
Set Pdf = Server.CreateObject("Persits.Pdf")
Set Doc = Pdf.CreateDocument
' A4 paper size - if US required remove/comment the line below.
Set Page = Doc.Pages.Add(595.3, 841.9) 
Doc.ImportFromUrl "http://www.yourdomain.com/yourfile.asp?valueID=" & Request.QueryString("valueID")

Filename = Doc.Save( Server.MapPath("quotation.pdf"), False ) 
    'Response.Write "Success! Download your PDF file <A HREF="Filename & ">here</A>

%> 
```

无论如何，这对我有用！

# sql - 计算所有条目的移动平均值

> ID：13450714
> 
> 赞同：0
> 
> 时间：2012-11-19T09:18:34.807
> 
> 标签：sql, oracle

我有一个表, `Measures`, 列: `timestamp`(Unix 时间戳), `tag`, `value`. 要获得一个单一的移动平均线，比如 15 天，我可以执行以下操作：

```
SELECT tag,avg(value) 
FROM measures 
 WHERE tag='xtr' 
 AND timestamp<1353304800
 AND timestamp>1350622800 
 GROUP BY tag; 
```

现在我想获得 150 条最新行的移动平均值，但我不知道如何查询它。

```
SELECT t, s,avg(bv) 
FROM 
  (SELECT A.timestamp as t,A.tag as ta,A.value as ac, B.timestamp as tb,B.value as bv, 
  FROM measures 
  CROSS JOIN measures B 
  WHERE A.tag='xtr' AND B.tag='xtr' 
  GROUP BY A.tag) WHERE ROWNUM <= 150; 
```

这显然是错误的，但我一直在考虑它并无法弄清楚。有任何想法吗？我的思路是，我需要将每个条目与它下面的 150 个条目进行匹配，并计算`value`这 150 个条目的平均值。我也很确定没有 a 可能有更好的方法`CROSS JOIN`，因为那会很慢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T10:08:44.640

不完全清楚您的表结构和数据的唯一性是什么，但此查询将为您提供所有时间戳的前 150 行（包括当前行）的真实移动平均值。

```
SELECT
  tag,
  timestamp,
  avg(value) over (partition by tag
                   order by timestamp asc
                   rows between 149 preceding and current row) moving_avg
FROM
  measures 
WHERE
  tag='xtr' 
```

如果您只需要隔离最近的 150 行，那么您的查询基于：

```
select
  tag,
  value
from(
  select tag
         value
  from measures
  order by timestamp desc)
where
  rownum <= 150 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T09:54:08.130

```
WITH
  sequenced AS
(
  SELECT
    ROW_NUMBER() OVER (PARTITION BY tag ORDER BY timestamp) AS sequence_id,
    *
  FROM
    measures
)
SELECT
  measure.tag,
  measure.timestamp,
  AVG(history.value)
FROM
  sequenced           AS measure
INNER JOIN
  sequenced           AS history
    ON  history.tag          = measure.tag
    AND history.sequence_id >  measure.sequence_id - 150
    AND history.sequence_id <= measure.sequence_id
GROUP BY
  measure.tag,
  measure.timestamp 
```

效率不高，每一行都连接到其他 150 行。但这是我所知道的大多数*（相对较新*的）ORACLE 版本将支持的最简单的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T11:25:54.923

Oracle 有包，使用包你可以编写自己的移动平均函数。

我没有足够的时间来测试应用程序，但理论上它应该可以工作（仅适用于 oracle）

“包体中声明的变量将在整个会话期间有效（保持其价值）。”

```
Create or replace package xxx ;
procedure clearMovingAverage ;
function movingAverage (newAVG in number) return number ;
end ;
/

create or replace package body xxx ;
movTot number ;
movCnt number ;
procedure clearMovingAverage is 
begin
  movTot := 0 ;
  movCnt := 0 ;
end ;
function movingAverage (newAvg in number) return number is 
begin
  if newAvg is not null then 
     movTot := movTot + newAvg ;
     movCnt := movCnt + 1 ;
  end if ;
  return movTot / movCnt ;
end ;
end ;
/ 
```

用法：

```
begin
  xxx.clearMovingAverage ;
  select tag,xxx.movingAverage(avg(value)) 
    FROM measures 
  ..... 
   group by tag ;
end ; 
```

或者

```
begin
  xxx.clearMovingAverage ;
  select tag, xxx.MovingAverage(avgValue) 
    from (select tag,avg(value) avgValue 
          FROM measures 
          ..... 
          group by tag)
end ; 
```

希望这段代码会有所帮助...

# google-plus - Google+ 共享者 - 预览图片

> ID：13450716
> 
> 赞同：-1
> 
> 时间：2012-11-19T09:18:43.367
> 
> 标签：google-plus, facebook-sharer

我正在使用这样的链接：https: [//plus.google.com/share?url=](https://plus.google.com/share?url=www.myurl.com) www.myurl.com 从网站上分享 Google+ 上的文章。

这工作正常，但共享的预览图像不正确。我在 Google 文档中读到您需要指定这样的图像：

```
<img itemprop="image" src="thumbnail.jpg" /> 
```

问题是，我想使用的图像没有显示在我想分享的页面上。我有我想使用的特定缩略图（比文章中显示的图像更小）。

有没有办法为 Google 指定图像，例如 Facebook 的 og:image 标签，而不必使用标签？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T14:18:22.620

> 有没有办法为 Google 指定图像，例如 Facebook 的 og:image 标签，而不必使用标签？

[https://developers.google.com/+/plugins/snippet/](https://developers.google.com/+/plugins/snippet/)：

> `2\. Open Graph protocol`
> 
> 如果页面包含标题、图像和描述的 Open Graph 属性，它们将用于 +Snippet。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-08T17:42:45.847

此外，定义页面预览图像的 schema.org 标记不需要显示在页面上，您可以在 HEAD 中将其定义为元数据：

```
<meta itemprop="image" content="thumbnail.jpg" /> 
```

# sql - 如何使用sql生成随机数？

> ID：13450721
> 
> 赞同：2
> 
> 时间：2012-11-19T09:18:54.317
> 
> 标签：sql, sql-server, sql-server-2008

> **可能重复：**
> [如何为 TSQL Select 中的每一行生成随机数？](https://stackoverflow.com/questions/1045138/how-do-i-generate-random-number-for-each-row-in-a-tsql-select)

我正在将 excel 表导入 sql 数据库，db 表有以下列： srno | 护照号|航班号

现在，当我导入 excel 表时，导入后 srno 保持为 NULL。现在我需要使用 sql 查询更新这个 Srno 列，使其具有随机数或非随机序列号，但它应该具有相同的 srno 值，其中护照号码相同我的意思是：如果 passportnumber abc123 每次出现 4 次srno 必须具有相同的值，例如：

```
srno | passportnumber|flightnumber
12   | ab32434       |AI-2011
13   | ab565235      |AI-2562
14   | ABC123        |AI-2025
14   | ABC123        |AI-2000
14   | ABC123        |AI-5623
15   |XYZ12334       |AI-5625 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T09:21:28.497

```
with cte as (
  select DENSE_RANK() OVER (ORDER BY passportnumber) as rank,
    srno
  from table)
update cte
  set srno = rank; 
```

这将按照护照的顺序给出序列号。修改它以根据预加载随机数的查找字典提供真正的随机数是微不足道的，我将其留作练习。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T09:37:54.887

如果相同的护照号码出现不止一次，那么首先您应该考虑规范化您的数据，创建一个包含唯一护照号码和一个 ID 列且身份增量为 ON 的表。

然后使用 Passports ID（在您的情况下为“srno”）更新航班表，并删除列“passportnumber”

# node.js - nodejs 包包含 CoffeeScript。该怎么办？

> ID：13450722
> 
> 赞同：1
> 
> 时间：2012-11-19T09:19:01.683
> 
> 标签：node.js, coffeescript

我 npm 安装了 node-term-ui 包，但我不断收到“意外字符串”错误，然后我注意到文件中的语法看起来不同，并意识到这是我以前从未使用过的 CoffeeScript。

我如何使它工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T16:15:28.870

zeMirco 的回答是正确的，但让我添加更多信息：`node-term-ui`正在做的事情非常非常不寻常。作者已经`main`在它们中设置了`package.json`指向一个`.coffee`文件，而不是将该文件编译成一个`.js`文件。他们在自述文件中也没有注意到这一点。我看到现在在[https://github.com/jocafa/node-term-ui/issues/2](https://github.com/jocafa/node-term-ui/issues/2)对此进行了讨论。

`.js`作者可能没有想到需要文件，因为如果您正在运行`.coffee`文件，则可以运行`require` 其他`.coffee`文件。事实上，你需要`.coffee`直接 require 文件就是先 require`coffee-script`模块。所以你可以在你的 JS 文件中做的是：

```
require('coffee-script');
var TermUI = require('node-term-ui'); 
```

请务必先添加`coffee-script`为项目依赖项。

我希望作者将修改该库，以便不需要使用 CoffeeScript，但这种解决方法应该比 zeMirco 手动编译模块的解决方案更容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T09:40:51.230

只需将其编译成javascript

```
npm install -g coffee-script

coffee --compile TermUI.coffee // assuming you are inside the modules main folder 
```

然后不需要模块，而是需要创建的`TermUI.js`文件

```
var termui = require('./node_modules/node-term-ui/TermUI.js') 
```

# node.js - node.js 表达抛出异常变量

> ID：13450723
> 
> 赞同：0
> 
> 时间：2012-11-19T09:19:09.513
> 
> 标签：node.js, exception, express

我想创建一个在参数中有 var 的函数，如果定义了 var，则返回 var 值，否则返回 var 名称

我试试

```
test = function(variable){
    try{
        if ( typeof(variable) != "undefined" ) {
            return 'true'
        }
        return 'false'
    }catch(e){
        console.log(e);
    }

} 
```

但是如果我有一个未定义的 var，则不会调用该函数并且我有未定义的函数错误。

我也想知道如何获得变量名

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T09:32:44.033

不要`var`用作您的参数。它是 JavaScript 中的[保留字](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Reserved_Words)，不描述变量的用途。

怎么样：

```
var test = function(variable) {
  if (!variable) return false;
  return variable;
} 
```

# javascript - d3.js如何绘制一个节点开始和一个节点结束的有向图

> ID：13450736
> 
> 赞同：1
> 
> 时间：2012-11-19T09:19:47.940
> 
> 标签：javascript, graph, d3.js, directed-graph

有人知道 d3.js 吗？我有个问题：

*我可以画一个有向图吗？*

注意：图从一个节点开始，可能以一个节点结束。所以它不是一棵树。

示例：A->B->C,A->D->C。这些是一张图中的路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-06T22:41:03.240

有一个非常相似的相同问题[here](https://stackoverflow.com/questions/20853485/d3-js-collapsible-tree-how-to-connect-different-parents-with-same-child)你会在那里找到你的问题的所有解释和选项。

# html - 不允许加载本地资源：file:///D://foldername//filename.jpg

> ID：13450737
> 
> 赞同：3
> 
> 时间：2012-11-19T09:19:51.987
> 
> 标签：html, jsp

实际上，如果我将所有图像以 Blob 类型存储到 Mysql 数据库中，则实际上我必须将 20000 张图像上传到 mysql 数据库中，性能会降低，如果需要上传其他图像，它会变慢。为了避免这个问题，我将所有图像存储到文件夹中并他们的路径进入 mysql 数据库表。并使用分页检索这些图像。现在数据显示在表格中，但没有显示图像。

```
String sb1 = new String("file://");
String sb2=new String(user.getPlaceImage());

out.println("<td><img src="+sb1.concat(sb2)+"  width='70' height='50' /></td>"); 
```

如果有任何替代方法来处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T09:29:52.700

这是我用来向用户提供图像的一种基本替代技术：在您的网站根目录之外创建一个文件夹，这样用户就无法使用 HTTP 直接访问这些文件。假设您已经有一个包含所有图像的 URI 的数据库表。创建一个接口文件，例如：getimage.jsp?id=42，它为用户提供请求的图像文件。此外，如果您在数据库中存储相对 URL，则需要格外小心，因为您可能会尝试从与尝试访问图像的 JSP 文件相关的错误路径中读取文件。

# javascript - 如何通过动态拆分javascript中的列来添加行

> ID：13450738
> 
> 赞同：0
> 
> 时间：2012-11-19T09:20:08.490
> 
> 标签：javascript, html

这段代码的问题是，当我们要添加一行时，它只会在一列中添加一行。请问有人可以告诉我如何拆分列吗？

JavaScript：

```
 function Myfunction(tableid) {
        var table=document.getElementById("tablerow");            
        var rowCount = table.rows.length;            
        var row = table.insertRow(rowCount);            
        var cell1 = row.insertCell(0); 
        var cell2 = row.insertCell(0);

        cell2.innerHTML = rowCount + 1;

        var cell3 = row.insertCell(1);
        var element2 = document.createElement("input");
        element2.type = "text";
        cell3.appendChild(element2);
    } 
```

HTML：

```
 <body>
       <table id="tablerow" border="1" align="center">
          <tr>
            <td><center>1</center></td>
            <td><input type="textbox" name="" value=""></td>
            <td><input type="textbox" name="" value=""></td>
            <td><input type="textbox" name="" value=""></td>
         </tr>
         <tr>
            <td><center>2</center></td>
            <td><input type="textbox" name="" value=""></td>
            <td><input type="textbox" name="" value=""></td>
            <td><input type="textbox" name="" value=""></td>
         </tr>

         <center><input type="button" value="Add Row" onclick="Myfunction()"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T10:04:39.657

您在表格中有四列，但您试图插入只有三个单元格的行。这导致无效的表结构。

`insertCell()`此外，您应该在调用方法时通过提供正确的索引将每个单元格放在正确的位置。

这是插入包含四个单元格的行的工作代码，首先有“运行索引”，其余有文本框，每个都有自己的文本框：

```
function Myfunction(tableid) {
    var table=document.getElementById("tablerow");        
    var rowCount = table.rows.length;        
    var row = table.insertRow(rowCount);        

    var cell1 = row.insertCell(0); 
    cell1.innerHTML = rowCount + 1;

    var cell2 = row.insertCell(1);
    var element2 = document.createElement("input");
    cell2.appendChild(element2);

    var cell3 = row.insertCell(2);
    var element3 = document.createElement("input");
    cell3.appendChild(element3);

    var cell4 = row.insertCell(3);
    var element4 = document.createElement("input");
    cell4.appendChild(element4);
} 
```

[​现场测试用例](http://jsfiddle.net/mebph/)。

这有效，但相当“笨拙”。为了让它更灵活、更好地编写，添加另一个函数：

```
function CellWithTextbox(row, index) {
    var cell = row.insertCell(index);
    var element = document.createElement("input");
    element.type = "text";
    cell.appendChild(element);
    return cell;
} 
```

然后你的函数的最后一部分将转向那些简单的行：

```
var cell2 = CellWithTextbox(row, 1);
var cell3 = CellWithTextbox(row, 2);
var cell4 = CellWithTextbox(row, 3); 
```

[更新了小提琴](http://jsfiddle.net/mebph/1/)。

# java - 在后台运行一个进程，linux ubuntu

> ID：13450740
> 
> 赞同：0
> 
> 时间：2012-11-19T09:20:23.613
> 
> 标签：java, linux, shell, ubuntu, background

我想运行一个 .jar 文件，所以我所做的就是在命令的最后加上“&”（实际上不需要记录输出，我只想能够断开与主机的远程服务器的连接）我的java程序，程序本身完成后保存结果）

我按照以下方式进行操作，但它不在后台运行，它让我等待：

`java -Xmx72G -cp //home/arian/rapidminer/lib/rapidminer.jar com.rapidminer.RapidMinerCommandLine -f //home/arian/RMRepository/testRemote.rmp &`

知道为什么它不起作用吗？

谢谢，阿里安

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T09:53:02.680

“它让我等待”是什么意思？是否`RapidMinerCommandLine`有机会从`stdin`其他流中读取？

如果你想在后台运行一个进程*并*断开你应该使用的 tty 会话[`nohup`](http://linux.die.net/man/1/nohup)，例如：

```
nohup java -Xmx.... com.rapidminer.RapidMinerCommandLine & 
```

（记得`&`最后！）

您可以在忽略所有`... 1> /dev/null`之前添加。`&``stdout`

您还可以考虑使用该[`screen`](http://linux.die.net/man/1/screen)实用程序，它允许您断开和重新连接到会话，但这对（半）交互式会话更有用。

（另外，你指定的最大堆大小相当大？）

干杯，

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T09:55:25.350

您可以使用 JSVC，这是一个用于守护 Java 应用程序的实用程序

[http://commons.apache.org/daemon/jsvc.html](http://commons.apache.org/daemon/jsvc.html)

它会给你一个 var pid 文件，对于创建一个真正的启动/停止脚本很有用。

编辑：其他解决方案，也许可以帮助

这是我在嵌入式系统上为 Slackware Linux 完成的一个非常古老的启动/停止脚本：

```
#!/bin/sh

application_start() {
  cd /usr/local/YOURHOME
  /usr/lib/java/bin/java \
        -Xmx72G \
        -classpath //home/arian/rapidminer/lib/rapidminer.jar \
        com.rapidminer.RapidMinerCommandLine \
        -f //home/arian/RMRepository/testRemote.rmp &
  echo -n "Starting App daemon:  $CMDLINE"
  ps -Ao pid,command | grep java | grep com.rapidminer.RapidMinerCommandLine | awk '{print $1}' > /var/run/app.pid
  echo
}

application_stop() {
  echo -n "Stopping DataBaseSynchronizerClient daemon..."
  kill `cat /var/run/DataBaseSynchronizerClient.pid`
  echo
  sleep 1
  rm -f /var/run/DataBaseSynchronizerClient.pid
  killall DataBaseSynchronizerClient 2> /dev/null
}

application_restart() {
  application_stop
  sleep 1
  application_start
}

case "$1" in
'start')
  application_start
  ;;
'stop')
  application_stop
  ;;
'restart')
  application_restart
  ;;
*)
  echo "usage $0 start|stop|restart"
esac 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-19T09:57:00.827

我不知道为什么它不起作用。在大多数贝壳中，它确实应该。

无论如何，如果您打算断开连接，您通常会发现仅将作业置于后台是不够的：断开连接将关闭控制台（这将单独破坏许多程序）并发送 SIGHUP 信号（这将导致大约任何要退出的程序）。

您应该考虑使用`nohup`来运行程序（使用`&`）。或者，如果您确实需要稍后返回并与该程序进行交互，`screen`或者`byobu`可能更符合要求。另一种选择可能是将任务添加到您的`crontab`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-19T10:43:16.553

我同意它应该按原样工作，但我在后台运行 Java 时也遇到了问题。我的解决方案是使用该`screen`实用程序（通常安装在大多数 Linux 发行版中），您可以在其中打开可以分离的 shell。如果我记得很清楚，命令是这样的（但也有一个很好的联机帮助页）

```
screen -S myCustomName # runs a new shell called myCustomName
CTRL + D # detach from the current screen instance
screen -ls # list active screen instances
screen -r myCustomName # reattach to the screen instance. 
```

希望它能解决你的问题。

# java - String.format 以 dd-MMM-YYYY HH:mm 模式获取输出日期（Java）

> ID：13450742
> 
> 赞同：0
> 
> 时间：2012-11-19T09:20:31.637
> 
> 标签：java

```
String.format(start.toString("dd-MMM-YYYY HH:mm")); 
```

`LocalDateTime`其中 start 是来自`org.joda.time`api的类中的日期输入

当我使用此代码时，它的返回月份像这样“Dec”，但我希望输出为“DEC”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T09:24:57.160

如果你想要一个特定的案例，我会使用`.toUpperCase()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T09:36:47.307

我总是使用子字符串，在我的情况下是这样的：

```
String sDate = String.format(start.toString("dd-MMM-YYYY HH:mm"));
String oDate = sDate.substring(0, 2)+"-"+sDate.substring(3, 6).toUppercase()+"-"+sDate.substring(7, 11); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T09:31:15.873

如果这 (String.format(start.toString("dd-MMM-YYYY HH:mm"));) 检索到您想要的正确格式，那么您可以简单地使用

**String.format(start.toString("dd-MMM-YYYY HH:mm")).toUpperCase();**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T09:25:19.143

唯一的方法是用大写版本替换子字符串。

```
Date start = new Date();
SimpleDateFormat oFormat = new SimpleDateFormat("dd-MMM-YYYY HH:mm");
String sDate = oFormat.format(start);

System.out.println(sDate);

sDate = sDate.substring(0,3) + sDate.substring(3,6).toUpperCase() +  sDate.substring(6,sDate.length());

System.out.println(sDate); 
```

# qt - Scala.React 与 Qt 信号和插槽

> ID：13450746
> 
> 赞同：11
> 
> 时间：2012-11-19T09:20:44.910
> 
> 标签：qt, scala, functional-programming, reactive-programming, frp

随着 Scala.React 的兴起，我想知道当使用 Qt 作为 Scala 程序的 GUI 框架时，Qt 的 Signals & Slots 机制是否会过时。这两种方法中的一种如何在以下每个类别中表现出色？

*   易于编码，关于简洁和清晰
*   表现力：是否有任何技术提供另一种技术不提供的可能性（例如 WPF 的依赖属性强制机制）？
*   编译时类型安全，例如使用 QtScript 定义信号和插槽时
*   性能 - 但它在 GUI 中真的很重要吗？

假设 Scala.React 已经处于完成状态并且有据可查：你什么时候更喜欢一种方法而不是另一种方法？

# c++ - 隐式转换为匹配运算符参数

> ID：13450750
> 
> 赞同：0
> 
> 时间：2012-11-19T09:20:59.170
> 
> 标签：c++, operators, operator-overloading, type-conversion

我有以下类声明：

```
class DepthDescriptor
{
public:
    DepthDescriptor(DepthType depth);
    bool operator==(DepthDescriptor& type);
    bool operator>=(DepthDescriptor& type);
    bool operator<=(DepthDescriptor& type);
...
} 
```

为什么以下行不执行到`DepthDescriptor`对象的隐式转换以便可以进行运算符比较？

```
if (depth == Depth_8U)
{
...
} 
```

请注意，它`depth`是一个`DepthDescriptor`对象，`DepthType`是一个枚举，并且`Depth_8U`是枚举值之一。我希望像上面这样的行会首先调用隐式构造函数`DepthDescriptor(DepthType depth)`，然后调用适当的运算符，但我得到`no operator "==" matches these operands`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T09:28:47.873

尝试

```
bool operator==(const DepthDescriptor& type) const;
bool operator>=(const DepthDescriptor& type) const;
bool operator<=(const DepthDescriptor& type) const; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T09:31:34.307

要进行转换，您应该编写全局函数而不是成员函数，并且应该是 const 正确的。IE

```
bool operator==(const DepthDescriptor& lhs, const DepthDescriptor& rhs)
{
    ...
} 
```

如果您使用成员函数，转换将不会发生在左侧。除非您是 const 正确的，否则转换可能不会在标准的符合编译器中发生。

# java - java.awt.List 的宽度不一致

> ID：13450751
> 
> 赞同：1
> 
> 时间：2012-11-19T09:21:00.790
> 
> 标签：java, macos, swing, awt

我对这个小程序的布局有疑问。它在边框布局中的画布旁边有一个列表。现在有时当我运行它时，列表非常窄，只有 51 像素宽。其他时候，只要对代码进行微小的更改，它就可以正常工作，并且列表足够宽以显示条目。该列表是从一个数组中填充的，从数组中注释掉一项就足以改变行为。准确地说，评论这一行可以解决问题

```
{"---- Lissajous curves ","t","t","1","1"}, // commenting this line fixes problem 
```

我怀疑这是一个错误，但很高兴知道它是否可重现或者我是否在做一些愚蠢的事情。也不太确定提交错误的正确位置，我在 Mac OS X 10.6.8 上使用标准 Java

```
import java.applet.Applet;
import java.awt.BorderLayout;
import java.awt.Canvas;
import java.awt.Dimension;
import java.awt.Frame;
import java.awt.List;

import javax.swing.SwingUtilities;

public class Zap extends Applet {

    private static final long serialVersionUID = 330L;

    String[][] equations = new String[][]{
//                  {"Line ----------------------","3 t-1","t+1"},
                    {"Line","3 t-1","t+1"},
                    {"Circle","cos(t)","sin(t)","-pi","pi"},
                    {"Sq Circle","cos(t)","2 sin(t)","-pi","pi"},
                    {"Ellipse","2 cos(t)","sin(t)","-pi","pi"},
                    {"Cycloid","t-sin(t)","1-cos(t)","-20","20"},
                    {"---- Hypocycloids ----"},
                    {"Deltoid","2 cos(t)+cos(2t)","2 sin(t)-sin(2t)","-pi","pi"},
                    {"Astroid","cos(t)^3","sin(t)^3","-pi","pi"},
                    {"Hypocycloids 5","cos(t) + cos(4 t)/4","sin(t) - sin(4 t)/4","-pi","pi" },
                    {"---- Epicycloids ----"},
                    {"Cardioid",
                            "cos(t) - cos(2 t)/2",
                            "sin(t) - sin(2 t)/2","-pi","pi" },
                    {"Nephroid",
                                            "cos(t) - cos(3 t)/3",
                                            "sin(t) - sin(3 t)/3","-pi","pi" },
                    {"Epicycloid 3",
                                                    "cos(t) - cos(4 t)/4",
                                                    "sin(t) - sin(4 t)/4","-pi","pi" },
                    {"Epicycloid 4",
                                                            "cos(t) - cos(5 t)/5",
                                                            "sin(t) - sin(5 t)/5","-pi","pi" },
                    {"Epicycloid 4",
                                                            "cos(t) - cos(5 t)/5",
                                                            "sin(t) - sin(5 t)/5","-pi","pi" },
                    {"Epicycloid 5",
                                                                    "cos(t) - cos(6 t)/6",
                                                                    "sin(t) - sin(6 t)/6","-pi","pi" },

                    {"---- Lissajous curves ","t","t","1","1"}, // commenting this line
                    {"Lissajous 1,2","sin(t)","sin(2 t)","-pi","pi"},
                    {"Lissajous 1,3","sin(t-pi/2)","sin(3 t)","-pi","pi"},
                    {"Lissajous 1,4","sin(t)","sin(4 t)","-pi","pi"},//             {"a Lissajousxxxxxxxxxxb",""},
                    {"Lissajous 2,1","sin(2t)","sin(t)","-pi","pi"},
                    {"Lissajous 2,2","sin(2t-pi/4)","sin(2t)","-pi","pi"},
                    {"Lissajous 2,3","sin(2t-pi/3)","sin(3t)","-pi","pi"},
                    {"Lissajous 3,4","sin(3t)","sin(4t)","-pi","pi"},
    };

    /** The canvas for plotting the graph */
    private Canvas graphCanvas;

    /** List of equations */
    List list = new List();

    /**
     * Initializes the applet FunctionPlotter
     */
    @Override
    public void init ()  {
        try {
            initComponents();

        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    /**
     * Sets the layout of the applet window to BorderLayout, creates all
     * the components and associates them with event listeners if necessary.
     * @param j
     * @throws JepException
     */
    private void initComponents ()  {
        setLayout(new BorderLayout());

//        GridBagConstraints gbc1 = new GridBagConstraints(0, 0, 1, 1,0.9, 1, GridBagConstraints.EAST, GridBagConstraints.BOTH, new Insets(0, 0, 0, 0), 0 , 0) ;
//        GridBagConstraints gbc2 = new GridBagConstraints(1, 0, 1, 1, 0.1, 1, GridBagConstraints.EAST, GridBagConstraints.BOTH, new Insets(0, 0, 0, 0), 0, 0);
//        setBackground (java.awt.Color.white);

//        list.addItemListener(this);
        list.setMinimumSize(new Dimension(220, 200));
        list.setSize(new Dimension(220, 200));
        list.setPreferredSize(new Dimension(220, 200));
        System.out.println("list "+list.getBounds());
        System.out.println("list ps"+list.getPreferredSize());
        //add(list,gbc2);
        add("East",list);
        for(String[] eles:equations) {
            list.add(eles[0]);
    }
        // create the graph canvas and add it
        graphCanvas = createGraphCanvas();
        //add (graphCanvas,gbc1);
        add("Center",graphCanvas);
        System.out.println("list ps before validate"+list.getPreferredSize());
        list.validate();
        this.validate();
        System.out.println("list ps after validate"+list.getPreferredSize());
        System.out.println(((Object)list).toString());
        System.out.println("\n\n");
    }

    protected Canvas createGraphCanvas()  {
          Canvas gc = new Canvas();
        gc.setPreferredSize(new Dimension(300,300));
        gc.setSize(new Dimension(300,300));
        System.out.println("PC size "+gc.size());
        return gc;
    }

    public static void main(String argv[]) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });
    }
    protected static void createAndShowGUI() {
            Frame f = new Frame();
            f.setSize(600, 400);
            Zap pp = new Zap();
            f.add(pp);
            pp.init();
            System.out.println("pack");
        //f.pack();
            System.out.println("setVis");
            f.setVisible(true);
            System.out.println("setVis done");
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T10:56:37.863

试试这个（基于 Swing 的）列表变体。

![扎普](../Images/8666be6955eaa4a34b493e2490af4e9d.png)

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import javax.swing.*;

public class Zap extends JPanel {

    private static final long serialVersionUID = 330L;

    String[][] equations = new String[][]{
            //                  {"Line ----------------------","3 t-1","t+1"},
            {"Line","3 t-1","t+1"},
            {"Circle","cos(t)","sin(t)","-pi","pi"},
            {"Sq Circle","cos(t)","2 sin(t)","-pi","pi"},
            {"Ellipse","2 cos(t)","sin(t)","-pi","pi"},
            {"Cycloid","t-sin(t)","1-cos(t)","-20","20"},
            {"---- Hypocycloids ----"},
            {"Deltoid","2 cos(t)+cos(2t)","2 sin(t)-sin(2t)","-pi","pi"},
            {"Astroid","cos(t)^3","sin(t)^3","-pi","pi"},
            {"Hypocycloids 5","cos(t) + cos(4 t)/4","sin(t) - sin(4 t)/4","-pi","pi" },
            {"---- Epicycloids ----"},
            {"Cardioid",
                "cos(t) - cos(2 t)/2",
                "sin(t) - sin(2 t)/2","-pi","pi" },
                {"Nephroid",
                    "cos(t) - cos(3 t)/3",
                    "sin(t) - sin(3 t)/3","-pi","pi" },
                    {"Epicycloid 3",
                        "cos(t) - cos(4 t)/4",
                        "sin(t) - sin(4 t)/4","-pi","pi" },
                        {"Epicycloid 4",
                            "cos(t) - cos(5 t)/5",
                            "sin(t) - sin(5 t)/5","-pi","pi" },
                            {"Epicycloid 4",
                                "cos(t) - cos(5 t)/5",
                                "sin(t) - sin(5 t)/5","-pi","pi" },
                                {"Epicycloid 5",
                                    "cos(t) - cos(6 t)/6",
                                    "sin(t) - sin(6 t)/6","-pi","pi" },

                                    {"---- Lissajous curves ----","t","t","1","1"}, // commenting this line
                                    {"Lissajous 1,2","sin(t)","sin(2 t)","-pi","pi"},
                                    {"Lissajous 1,3","sin(t-pi/2)","sin(3 t)","-pi","pi"},
                                    {"Lissajous 1,4","sin(t)","sin(4 t)","-pi","pi"},//             {"a Lissajousxxxxxxxxxxb",""},
                                    {"Lissajous 2,1","sin(2t)","sin(t)","-pi","pi"},
                                    {"Lissajous 2,2","sin(2t-pi/4)","sin(2t)","-pi","pi"},
                                    {"Lissajous 2,3","sin(2t-pi/3)","sin(3t)","-pi","pi"},
                                    {"Lissajous 3,4","sin(3t)","sin(4t)","-pi","pi"},
    };

    /** The canvas for plotting the graph */
    private JPanel graphCanvas;

    DefaultListModel model = new DefaultListModel(); 
    /** List of equations */
    JList list = new JList(model);

    /**
     * Initializes the FunctionPlotter
     */
    public void init ()  {
        try {
            initComponents();

        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    /**
     * Sets the layout of the applet window to BorderLayout, creates all
     * the components and associates them with event listeners if necessary.
     * @param j
     * @throws JepException
     */
    private void initComponents ()  {
        setLayout(new BorderLayout());
        System.out.println("list "+list.getBounds());
        System.out.println("list ps"+list.getPreferredSize());
        list.setVisibleRowCount(8);
        JScrollPane scroll = new JScrollPane(
                list, 
                JScrollPane.VERTICAL_SCROLLBAR_ALWAYS,
                JScrollPane.HORIZONTAL_SCROLLBAR_NEVER
                );
        add(BorderLayout.LINE_END,scroll);

        for(String[] eles:equations) {
            model.addElement(eles[0]);
        }

        // create the graph canvas and add it
        graphCanvas = createGraphCanvas();
        //add (graphCanvas,gbc1);
        add("Center",graphCanvas);
    }

    protected JPanel createGraphCanvas()  {
        JPanel gc = new JPanel() {

            @Override
            public void paintComponent(Graphics g) {
                super.paintComponent(g);
                g.setColor(Color.GREEN.darker());
                g.fillRect(0, 0, getWidth(), getHeight());
            }
        };

        gc.setPreferredSize(new Dimension(300,10));
        return gc;
    }

    public static void main(String argv[]) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });
    }
    protected static void createAndShowGUI() {
        JFrame f = new JFrame();
        f.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        Zap pp = new Zap();
        f.add(pp);
        pp.init();
        System.out.println("pack");
        f.pack();
        System.out.println("setVis");
        f.setVisible(true);
        System.out.println("setVis done");
    }
} 
```

# php - ZF2：为什么 partial() 在 Application 模块中而不是在 Admin 中查找？

> ID：13450757
> 
> 赞同：0
> 
> 时间：2012-11-19T09:21:18.140
> 
> 标签：php, partial-views, zend-framework2

简单的问题，但无法弄清楚。

为什么`$this->partial()`在 Zend Framework 2 中的视图中调用`Admin`模块中的视图时，它会在模块中查找文件`Application`？

这是一个堆栈：

```
include( '/.../module/Admin/view/admin/pages/index.phtml' )
include( '/.../module/Application/view/partials/pagination.phtml' ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T10:32:02.530

我真的不明白这包括什么东西是你做的......

您有两种方法可以为部分分配模板。我总是建议采用完全合格的方式，因为这也是最快的方式。

```
$this->partial('NAMESPACE / CONTROLLERNAME / ACTIONNAME', array(/** key value pairs*/)); 
```

当您只使用`ACTIONNAME`而不是完全限定的模板名称时，渲染器将在您当前的模块中查找并`actionname.phtml`在所述模块中搜索。

您必须使用完全限定的模板名称才能从另一个模块加载部分。

如前所述，总是完全合格。它要快得多；）

# c - 从适配器获取 DNS 服务器 IP 地址？

> ID：13450761
> 
> 赞同：2
> 
> 时间：2012-11-19T09:21:22.820
> 
> 标签：c, windows, dns

我无法使用 C 获取 DNS 服务器 IP 地址。我尝试过使用，但它只能使用和`IP_ADAPTER_INFO`获取主 WINS 服务器 IP 地址和次要 WINS 服务器 IP 地址。`pAdapter->PrimaryWinsServer``pAdapter->SecondaryWinsServer`

根据我的知识，WINS 服务器和 DNS 服务器是两种不同类型的服务器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T09:34:55.073

使用`[GetAdaptersAddresses()](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365915%28v=vs.85%29.aspx)`, 并查看`[IP_ADAPTER_ADDRESS](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366058%28v=vs.85%29.aspx)`结构。

# protocol-buffers - 如何将 protobuf 对象序列化到 Ehcache？

> ID：13450762
> 
> 赞同：1
> 
> 时间：2012-11-19T09:21:23.333
> 
> 标签：protocol-buffers, ehcache

我有数百万个对象，我需要将它们保存到缓存中。为了减少这些对象的大小和序列化/反序列化的时间，我使用 protobuf 对象而不是 POJO，然后将它们作为字节数组保存到 Ehcache 中。但是Ehcache会将protobuf字节数组放入一个Ehcache的对象中，然后再将该对象序列化到内存中，所以使用protobuf的优势就没有了。

我可以将 protobuf 对象的字节表示直接保存到 Ehcache 中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T18:09:04.473

当您说“Ehcache 会将 protobuf 字节数组放入 Ehcache 的对象”时，我猜您指的是 net.sf.ehcache.Element，对吧？但是“然后将对象序列化到内存中”，你是什么意思？澄清一下，Ehcache 不会序列化任何要存储在堆上的东西。如果您谈论 offHeap 存储，那么是的，东西会被序列化。但是如果你存储字节数组，序列化这些值是......简单的。此外，您不必担心内部数据结构序列化，这些处理*非常*具体，即使您能够在那里使用 protobuf，您也不会获得任何收益。

但是，将 protobuf 用于域实例与纯 Java 序列化相比，您获得的所有好处都不会丢失。

# assembly - 递归斐波那契汇编 MIPS 代码

> ID：13450763
> 
> 赞同：0
> 
> 时间：2012-11-19T09:21:27.807
> 
> 标签：assembly, recursion, mips, fibonacci

我在模块编译器中为我的课程创建了一个代码生成器。它以 MIPS 汇编代码生成代码，并且似乎工作正常（我测试了非常简单的程序和表达式）。我测试了递归斐波那契程序，它目前永远循环。基本情况 0 和 1 工作正常。但是当我尝试 fib(2) 或更多时，它会一直循环。不知道是什么问题，谁能帮我找出来？

这是代码：

```
main: 
move $fp $sp 
sw $ra 0($sp)
addiu $sp $sp -4 
sw $fp 0($sp) 
addiu $sp $sp -4 
li $a0 2 #testing comment
sw $a0 0($sp) 
addiu $sp $sp -4 
jal fib_entry 
lw $ra 4($sp) 
addiu $sp $sp 8 
lw $fp 0($sp) 
li $v0, 10 
syscall 
fib_entry: 
move $fp $sp 
sw $ra 0($sp)
addiu $sp $sp -4 
lw $a0 4($fp) 
sw $a0 0($sp) 
addiu $sp $sp -4 
li $a0 0 
lw $t1 4($sp) 
addiu $sp $sp 4 
beq $a0 $t1 thenBranch1
elseBranch1: 
lw $a0 4($fp) 
sw $a0 0($sp) 
addiu $sp $sp -4 
li $a0 1 
lw $t1 4($sp) 
addiu $sp $sp 4 
beq $a0 $t1 thenBranch2
elseBranch2: 
sw $fp 0($sp) 
addiu $sp $sp -4 
lw $a0 4($fp) 
sw $a0 0($sp) 
addiu $sp $sp -4 
li $a0 1 
lw $t1 4($sp) 
sub $a0 $t1 $a0 
addiu $sp $sp 4 
sw $a0 0($sp) 
addiu $sp $sp -4 
jal fib_entry 
sw $a0 0($sp) 
addiu $sp $sp -4 
sw $fp 0($sp) 
addiu $sp $sp -4 
lw $a0 4($fp) 
sw $a0 0($sp) 
addiu $sp $sp -4 
li $a0 2 
lw $t1 4($sp) 
sub $a0 $t1 $a0 
addiu $sp $sp 4 
sw $a0 0($sp) 
addiu $sp $sp -4 
jal fib_entry 
lw $t1 4($sp) 
add $a0 $a0 $t1 
addiu $sp $sp 4 
b endIf2 
thenBranch2: 
li $a0 1 
endIf2: 
b endIf1 
thenBranch1: 
li $a0 0 
endIf1: 
lw $ra 4($sp) 
addiu $sp $sp 12 
lw $fp 0($sp) 
jr $ra 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T18:34:26.523

该代码的各种问题。

1.  你应该在写信`$sp` **之前**`($sp)`递减（尽管这只是惯例）
2.  您应该在修改`$fp` **之前**保存（这是常识；））
3.  MIPS 通常使用寄存器来传递参数（但您当然可以制定自己的约定）
4.  你的堆栈处理非常复杂，至少在`main`它是不平衡的
5.  建议从而`main`不使用`exit`系统调用返回

在尝试生成一些 asm 代码之前，您当然应该能够编写和调试 asm 代码。

给定一个输入结构类似于这个 C 实现：

```
unsigned fib_entry(unsigned n) {
    unsigned ret;
    unsigned n1;
    unsigned f1;
    unsigned n2;
    unsigned f2;

    if (n <= 1) goto fib_small;

    n1 = n - 1;
    f1 = fib_entry(n1);
    n2 = n - 2;
    f2 = fib_entry(n2);
    ret = f1 + f2;
    goto fib_done;

fib_small:
    ret = n;

fib_done:
    return ret;
} 
```

我希望一个不太聪明的编译器生成这样的代码：

```
fib_entry:
    addiu $sp $sp -28   # we need room for $ra, n, ret, n1, n2, f1, f2
    sw $ra, 24($sp)     # store $ra since not leaf function
    sw $a0, 20($sp)     # store n

    lw $t0, 20($sp)     # load n
    ble $t0 1 fib_small

    lw $t0, 20($sp)     # load n
    addi $t0 $t0 -1     # n - 1
    sw $t0, 12($sp)     # store as n1

    lw $a0, 12($sp)     # pass n1 as argument
    jal fib_entry
    sw $v0 4($sp)       # store into f1

    lw $t0, 20($sp)     # load n
    addi $t0 $t0 -2     # n - 2
    sw $t0, 8($sp)      # store as n2

    lw $a0, 8($sp)      # pass n2 as argument
    jal fib_entry
    sw $v0 ($sp)        # store into f2

    lw $t0 4($sp)       # f1
    lw $t1 ($sp)        # f2
    addu $t0 $t0 $t1    # f1 + f2
    sw $t0 16($sp)      # store into ret

    b fib_done

fib_small:
    lw $t0, 20($sp)     # load n
    sw $t0 16($sp)      # store into ret

fib_done:
    lw $v0 16($sp)      # load return value
    lw $ra 24($sp)      # restore $ra
    addiu $sp $sp 28    # restore stack
    jr $ra              # return 
```

注意我故意让它未优化。这种代码应该足够简单以生成。

# oracle - 在 oracle 中优化简单的选择查询

> ID：13450769
> 
> 赞同：2
> 
> 时间：2012-11-19T09:21:37.617
> 
> 标签：oracle, optimization

我正在尝试优化以下查询：

```
 SELECT   tickstime AS time,
          quantity1 AS turnover
    FROM   cockpit_test.ticks
   WHERE   date_id BETWEEN 20111104 AND 20111109 
     AND   mdc_id IN (297613)
ORDER BY   time; 
```

它非常简单，但运行大约需要 60-90 秒。**cockpit_test.TICKS**表包含超过 100M 的行。它还具有**MDC_ID**和**DATE_ID**列的索引。

EXPLAIN PLAN 给出以下输出

```
"-------------------------------------------------------------------------------------------------------"
"| Id  | Operation                    | Name           | Rows  | Bytes |TempSpc| Cost (%CPU)| Time     |"
"-------------------------------------------------------------------------------------------------------"
"|   0 | SELECT STATEMENT             |                | 26905 |   604K|       | 11783   (1)| 00:02:22 |"
"|   1 |  SORT ORDER BY               |                | 26905 |   604K|   968K| 11783   (1)| 00:02:22 |"
"|   2 |   TABLE ACCESS BY INDEX ROWID| TICKS          | 26905 |   604K|       | 11596   (1)| 00:02:20 |"
"|*  3 |    INDEX RANGE SCAN          | TICKS_MDC_DATE | 26905 |       |       |    89   (0)| 00:00:02 |"
"-------------------------------------------------------------------------------------------------------"
" "
"Predicate Information (identified by operation id):"
"---------------------------------------------------"
" "
"   3 - access(""MDC_ID""=297613 AND ""DATE_ID"">=20111104 AND ""DATE_ID""<=20111109)" 
```

所以我不完全确定这一切意味着什么，但似乎索引正在被命中，并且大部分时间都被索引 rowid 访问行所消耗。

有什么方法可以让这个查询运行得更快吗？

**UPD**

这是表定义：

```
Name                                      Null?    Type
----------------------------------------- -------- ----------------------------
DATE_ID                                   NOT NULL NUMBER(38)
MDC_ID                                    NOT NULL NUMBER(38)
TICKSTIME                                 NOT NULL DATE
STATE                                     NOT NULL NUMBER(38)
VALUE1                                    NOT NULL FLOAT(126)
VALUE2                                             FLOAT(126)
VOLUME1                                            FLOAT(126)
VOLUME2                                            FLOAT(126)
QUANTITY1                                          NUMBER(38)
QUANTITY2                                          NUMBER(38) 
```

表上有3个索引：

*   MDC_ID 上的索引
*   DATE_ID、MDC_ID、TICKSTIME 上的复合索引
*   DATE_ID、MDC_ID 上的复合索引

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T09:33:11.340

一般来说，Oracle 不能组合两个单独的索引（除非它们是位图索引而不是“普通”btree 索引）。

什么是`mdc_id`柱子？如果它有许多不同的值，您可以在`mdc_id, date_id`.

理论上，Oracle 可以使用索引来返回排序后的数据。在这种情况下，您的索引应该是 on `mdc_id, date_id, time`。

为什么不为日期列使用日期数据类型？对于这个特定的查询，它可能不会有太大的不同，但总的来说，如果您使用正确的数据类型，Oracle 将能够更好地确定数据的分布。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T09:55:30.593

我会检查这个解释计划是否对基数有准确的估计。当提供多个谓词时，基数估计不佳是很典型的，并且对于如此小的查询和估计的排序大小，执行时间似乎非常高（除非您的存储基础设施严重不足，这也是很典型的）。

鉴于查询的持续时间，我会通过调用动态采样来确保估计是准确的......

```
SELECT
  /*+ dynamic_sampling(4) */
  tickstime AS time,
  quantity1 AS turnover
FROM
  cockpit_test.ticks
WHERE
  date_id BETWEEN 20111104 AND 20111109 and
  mdc_id IN (297613)
ORDER BY
 tickstime; 
```

如果事实证明估计的临时空间小于 realtiy（您可以通过查询 V$SQL_WORKAREA_ACTIVE 来检查），那么您可能需要调整会话的内存设置以切换到自动内存管理并增加排序区域的大小。

# javascript - 使用 jQuery 切换表格行

> ID：13450771
> 
> 赞同：0
> 
> 时间：2012-11-19T09:21:40.583
> 
> 标签：javascript, jquery, html-table, row, toggle

我有一个表格，我在其中单击父行，该行显示/隐藏具有某些 CSS 类的子行。问题是 .toggle() 是通过单击父行触发的，我只想通过单击父行内的类 btn 的 span 来触发。

这是 HTML：

```
<table cellpadding="5" cellspacing="3" border="1">
  <tbody>
    <tr class="parent" id="2479">
      <td><span class="btn">text</span></td>
      <td>text</td>
      <td>text</td>
      <td>text</td>
      <td>text</td>
      <td>text</td>
    </tr>
    <tr class="child-2479">
      <td>text</td>
      <td>text</td>
      <td>text</td>
      <td>text</td>
      <td>text</td>
      <td>text</td>
    </tr>
    <tr>
      <td>text</td>
      <td>text</td>
      <td>text</td>
      <td>text</td>
      <td>text</td>
      <td>text</td>
    </tr>
    </tbody>
</table> 
```

这个 jQuery：

```
$(function() {
    $('tr.parent')
        .click(function(){
            $(this).siblings('.child-'+this.id).toggle('slow');
        });
    $('tr[class^=child-]').hide().children('td');
}); 
```

这是[jsfiddle链接](http://jsfiddle.net/esedic/Hjhb8/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T09:28:07.500

您可以将选择器更改为

`$('tr.parent td span.btn').click(function(){...});`

这将为您`span`提供与课程`button`中`td`的`tr`课程相关的任何内容`parent`

**更新**

如果表格是动态创建的，您可以使用该`on()`功能而不是单击，如果我理解您的话。

我明白你的意思，即使你的问题没有反映出来。我为你更新了小提琴。

这是您想要的 jquery：

```
$(function() {
    $('tr.parent td')
        .on("click","span.btn", function(){
            var idOfParent = $(this).parents('tr').attr('id');
            $('tr.child-'+idOfParent).toggle('slow');
        });
}); 
```

[在这里看小提琴](http://jsfiddle.net/Hjhb8/7/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T09:29:46.823

尝试：

```
$("tr.parent > td").on( "click", "span.btn", function() {

    var childId = $(this).parents("tr").prop("id");
    $("tr.child-" + childId).toggle("slow");
}); 
```

[在这里](http://jsfiddle.net/bruno/MBzE6/5/)提琴

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T09:37:32.597

**[用on()](http://api.jquery.com/on/)**试试

```
 $("body").on("click", "tr span.btn", function(event){
     $(this).siblings('.child-'+this.id).toggle('slow');
 }); 
```

# nhibernate - NHibernateUtil.Date.SqlType 使用 DateTime

> ID：13450775
> 
> 赞同：2
> 
> 时间：2012-11-19T09:22:02.617
> 
> 标签：nhibernate

我有一个 sql server 2008 数据库，其中有一列日期类型。我遇到了 nhibernate 的性能问题，因为 nhibernate 将 sql 写入类型 DateTime 和 sql string like `'2012-05-01 00:00:00'`，这会导致查询计划错误。

如果类型正确，如日期和 sql 字符串 '2012-05-01' 即 .ToShortDateString，它就可以工作。

所以即使我告诉 nhibernate 我想要`NHibernate.Type.DateType`，sql 输出不正确，它会使用 DateTime 和`'2012-05-01 00:00:00'`.

我尝试调试`NHibernate`代码，但这很难，因为我无法让 vs.net 停止优化，所以我无法观看本地人。

有什么线索吗？

# windows - Eclipse CDT + windows，可以可视化调试吗？

> ID：13450780
> 
> 赞同：1
> 
> 时间：2012-11-19T09:22:19.477
> 
> 标签：windows, mingw, eclipse-cdt

Windows平台下的Eclipse CDT能否进行可视化调试？我应该为此使用什么编译器？我尝试使用 MinGW，构建时一切都很好，但似乎无法使用可视化调试器（断点等）。如果我的设置有误，请告诉如何正确配置 Eclipse。

# javascript - 为什么 JavaScript 在条件语句中同时允许 &&（逻辑）和 &（按位）？

> ID：13450781
> 
> 赞同：2
> 
> 时间：2012-11-19T09:22:20.257
> 
> 标签：javascript, conditional, logical-operators

我最近发现一段 javascript 正在评估 null / undefined ，如下所示：

```
// The single & is on purpose!
if(x !== null & x !== undefined) {
    // Do this...
} 
```

这对我来说似乎是一个非常糟糕的做法，但它似乎有效。

据我所知，这些操作员应该执行两项不同的任务：

```
var x = 3; x &= 6; // No syntax errors.

var x = 3; x &&= 6; // Syntax error.

if(x == null && x == undefined) // No syntax errors.

if(x == null & x == undefined) // No syntax errors, but wrong operator usage? 
```

任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T09:29:00.020

当这样使用时，运算符`&`和逻辑运算符都`&&`可以作为逻辑运算符（即使`&`运算符实际上不是逻辑运算符）。实际的区别是`&&`使用[短路评估](http://en.wikipedia.org/wiki/Short-circuit_evaluation)，而`&`不是。

使用运算符没有问题`&`，只要即使第一个操作数的计算结果为假，也可以计算第二个操作数。

`&&`当第一个操作数确定第二个操作数是否可以计算时，该运算符可用于阻止对第二个操作数进行计算。例如：

```
if (x != null && x.prop == 42) { ... } 
```

这比必须检查一个，然后另一个要短：

```
if (x != null) {
  if (x.prop == 42) { ... }
} 
```

* * *

没有`&&=`操作员，因为在这种情况下使用短路评估没有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T09:33:46.667

`expr1 & expr2`casts 两个参数都被转换为整数，然后计算它们的按位与。在布尔值的情况下，结果是`0`or `1`(NOT `false`or `true`)。零是虚假的，一个是真实的，但仍然存在差异，即始终对两个参数进行评估。

`expr1 && expr2`如果它是假的则返回`expr1`，否则它评估并返回`expr2`。`Expr2`如果`expr1`是假的，则不评估。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T09:33:24.320

在条件下使用二元运算可能是有益的。

例如，没有逻辑“XOR”运算符，而是一个二元运算符：

if (cond1 ^ cond2) { // 如果一个且只有一个条件为真，则做某事 }

应用于布尔值的二元运算符将表达式计算为整数（为 0 或 1），其中二元运算有效且定义明确。

此外，二元运算保证所有子表达式都被评估，其中`&&`短路也就是当表达式为假时停止评估。了解差异允许为问题选择最佳实践。

也有人可能会质疑，为什么 JavaScript 允许字符串或对象比较：

```
if ("foo") { // is true }
if ("false") { // is also true }
if (null) { // is false } 
```

# c# - 如何验证gridview列单元格

> ID：13450783
> 
> 赞同：-5
> 
> 时间：2012-11-19T09:22:24.613
> 
> 标签：c#, sql-server, winforms

如何根据先前的单元格值验证 gridview 列单元格？

例如，如果当前单元格值为 10，则下一个单元格值必须大于 10

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T01:54:13.987

你有 CellValidated/CellValidating/CellValueChanged 事件。

你从他们那里得到的参数包括行号和列号。您剩下要做的就是与上面的行进行比较。

# html - 使网站在不使用百分比的情况下扩大规模

> ID：13450784
> 
> 赞同：0
> 
> 时间：2012-11-19T09:22:25.687
> 
> 标签：html, css, responsive-design, tablet

目前我正在创建一个响应式网站。我目前遇到的问题是响应式布局的设计（不是我设计的，我只是实现设计的人）的固定宽度为 745px。当然，这不是大多数平板电脑（如果有的话）的宽度。

例如，在宽度为 768px 的 iPad 上，每边会有 10px 的边距。这看起来不是那么好，也不是设计师的意图。

有没有办法让网站在移动/平板设备上升级而不使用百分比值？设计的几个部分依赖于固定的像素值，将整个设计转换为百分比值或多或少是不可能的。

例如，如果我只是稍微放大 iPad，它看起来完全符合预期。因此，如果我可以选择强制平板设备缩放到 745 像素宽度，然后保持固定，这正是我所需要的。然而，经过一番谷歌搜索，我还没有找到任何东西。

最好使用纯 CSS/HTML 的解决方案，但 JavaScript 也可以。

再澄清一点：此解决方案的目标只是纵向模式下的平板电脑。景观中的智能手机和平板电脑应保持不变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T13:28:59.683

您可以包括放大您的相应媒体查询：

您可以使用`transform:scale();`（使用相应的浏览器前缀）和 IE `zoom:<x>`，结果*如下*：

```
@your according media-query{
      -webkit-transform: scale(1.1);  /* Safari 3.1+, Chrome */ 
         -moz-transform: scale(1.1);  /* Firefox 3.5+ */
          -ms-transform: scale(1.1);  /* IE9+ */
           -o-transform: scale(1.1);  /* Opera 10.50+ */
              transform: scale(1.1);
                   zoom: 1.1;         /* old IEs*/
} 
```

这在浏览器中应该有相当好的支持，并且不会通过禁用用户按他们希望的方式缩放来弄乱用户体验（就像你的 javascript 解决方案一样）。

显然，这可能需要一些 javascript 调整以适应目标设备视口的精确测量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T09:29:43.610

您可能想调查媒体查询并稍微更改平板电脑的 CSS：http: [//www.w3.org/TR/css3-mediaqueries/](http://www.w3.org/TR/css3-mediaqueries/)

# php - yii : strcmp() 期望参数 2 是字符串，给定数组

> ID：13450785
> 
> 赞同：0
> 
> 时间：2012-11-19T09:22:27.903
> 
> 标签：php, yii

问题：`strcmp()`期望参数 2 是字符串，给定数组。

用户更新时会出现此错误消息。用户创建工作正常。我怎么解决这个问题？

我创建`radiobuttonlist`如下：

```
<div style="height:140px; padding-left: 20px;">
    <div>
        <?php echo $form->labelEx($model,'role'); ?>
        <?php 
            echo $form->radioButtonList(
                $model, 
                'role', 
                $roles,
                array(
                    'labelOptions'=>array('style'=>'display:inline; padding-right: 1em; vertical-align:middle '), // add this code
                )
            );
        ?> 
        <?php echo $form->error($model,'role'); ?>
    </div>
</div> 
```

`$roles`来自控制器：

```
if(Yii::app()->user->isSuperuser) {
    $all_roles=new RAuthItemDataProvider('roles', array('type'=>2, ));
    $roles = $all_roles->fetchData();
} else {
    $roles = Authitem::model()->findAll('type=2 And name<>:name',array(':name'=>'Superadmin'));

    $original_roles = Authassignment::model()->findAll('userid=:userid',array(':userid'=>$model->id));
    $model->role    = CHtml::listData($original_roles, 'itemname', 'itemname'); 

    $roles = CHtml::listData($roles,'name','name');
    //$model->role = array_merge($original_roles, $roles);
    //$model->role = (array)$original_roles;
    //var_dump($model->role);
    //die;
    $this->render('update',array(
        'model'=>$model,
        'profile'=>$profile,
        'roles'=>$roles,
        //'department'=>$department,
        //'designation'=>$designation,
        'original_roles'=>$original_roles,
    ));
} 
```

当我使用 as`$form->checkBoxList`时，它工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-12T12:36:14.340

当您使用 生成按钮列表时`$form->radioButtonList()`，yii 会生成一个额外的隐藏输入字段。如果您以标准方式提交表单，则效果很好。

但是，当您为 ajax 提交序列化表单时，会`.serialize()`选择隐藏的`<input>`. 然后，它有两个用于所述单选按钮字段的值，并继续创建一个数组而不是单个值。

这会导致错误： **strcmp() 期望参数 2 是字符串，给定数组**

最好的解决方案是防止 yii 生成 hidden `<input>`。这可以很容易地通过添加

```
array('uncheckValue'=>NULL) 
```

作为 HTML 选项。例如：

```
$form->radioButtonList($model,'viewer_format', $options, array('uncheckValue'=>NULL)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T13:11:22.000

调用[RadioButtonList()](http://www.yiiframework.com/doc/api/1.1/CHtml#activeRadioButtonList-detail)时设置的第四个参数应该是键值对数组，而不是数组数组。我不确定您是否可以定义“labelOptions”，因为它不是 HTML 标记。

发生错误是因为 Yii 期望您的最终数组是键值对，而是看到 'labelOptions' 是一个数组，而不是一个字符串。

尝试类似的东西；

```
echo $form->radioButtonList($model, 'role', $roles,
    array('style'=>'display:inline; padding-right: 1em; vertical-align:middle '),
); 
```

甚至更好地使用 css；

```
.myRadioButtonList { display:inline; padding-right: 1em; vertical-align:middle } 
```

在视图中：

```
echo $form->radioButtonList($model, 'role', $roles,
    array('class'=>'myRadioButtonList'),
); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2021-02-22T13:22:17.707

您的渲染需要 2 个参数，首先是视图，然后是参数示例： return $this->render('view', []);

# java - Java RMI UnmarshalException 和 AWS EC2 服务器

> ID：13450791
> 
> 赞同：2
> 
> 时间：2012-11-19T09:22:39.590
> 
> 标签：java, amazon-ec2, client-server, rmi

我正在尝试实施在[此处](http://docs.oracle.com/javase/tutorial/rmi/server.html)的 Sun/Oracle 网站上找到的 RMI Compute PI 教程。该服务器位于 Amazon windows EC2 服务器上。客户端位于我家中的个人计算机上。为了简单起见，我禁用了服务器上的防火墙并打开了 EC2 安全组上的所有端口。我可以 ping 机器，访问文件等...我的目标只是让一个基本的 RMI 程序在 AWS 上运行。稍后我将监督安全问题。

启动服务器不是问题。它已正确绑定到 RMI 注册表。我正在使用以下命令来启动它：

`java -Djava.security.manager -Djava.security.policy=C:\AWSTest\security.policy -Djava.rmi.server.codebase=file:/C:/AWS/Sources/sun-rmi-tutorial-server/bin/ file:/C:/AWS/Sources/sun-rmi-tutorial-common/bin/ -classpath C:\AWS\Sources\sun-rmi-tutorial-server\bin;C:\AWS\Sources\sun-rmi-tutorial-common\bin engine.ComputeEngine ec2-XX-XX-XX-XXX.ap-southeast-1.compute.amazonaws.com`

*   RMI 注册表在服务器端启动。
*   我在服务器端声明了一个新的安全管理器`System.setSecurityManager(new RMISecurityManager())`
*   我正在使用一个`security.policy`我被授予所有权限的文件。

当我在本地计算机上启动客户端时，我以 UnmarshalException 结束：

```
ComputePi exception: error unmarshalling return; nested exception is: 
    java.lang.ClassNotFoundException: engine.ComputeEngine_Stub
java.rmi.UnmarshalException: error unmarshalling return; nested exception is: 
    java.lang.ClassNotFoundException: engine.ComputeEngine_Stub
    at sun.rmi.registry.RegistryImpl_Stub.lookup(Unknown Source)
    at java.rmi.Naming.lookup(Naming.java:101)
    at client.ComputePi.main(ComputePi.java:14)
Caused by: java.lang.ClassNotFoundException: engine.ComputeEngine_Stub
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:264)
    at sun.rmi.server.LoaderHandler.loadClass(LoaderHandler.java:453)
    at sun.rmi.server.LoaderHandler.loadClass(LoaderHandler.java:184)
    at java.rmi.server.RMIClassLoader$2.loadClass(RMIClassLoader.java:637)
    at java.rmi.server.RMIClassLoader.loadClass(RMIClassLoader.java:264)
    at sun.rmi.server.MarshalInputStream.resolveClass(MarshalInputStream.java:216)
    at java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:1593)
    at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1514)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1750)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1347)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:369)
    ... 3 more 
```

你有什么错误的建议吗？为什么客户端找不到正确的 Stub ？我正在使用 Eclipse Juno、Genady RMI 插件和 Java 1.7.0_07。

谢谢你的帮助

**编辑 1：**

Java 工作空间围绕 3 个项目进行组织：客户端、服务器端和一个公共项目，其中服务器和客户端共享类。

*   我可以从本地计算机读取远程注册表。RMI 插件可以远程连接到服务器并检查注册表。

*   如果我没有制作 3 个项目，而是将所有类放在同一个项目下，那么一切正常......但我注意到没有生成（或需要）存根。

*   如果在客户端，我在类路径中引用服务器类（所有内容都在本地构建），我会遇到连接超时错误而不是解组错误。

    ComputePi 异常：连接拒绝主机：XX.XXX.XX.XX；嵌套异常是：java.net.ConnectException：连接超时：连接 java.rmi.ConnectException：连接拒绝主机：XX.XXX.XXX；嵌套异常是：java.net.ConnectException: Connection timed out: connect at sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:619) at sun.rmi.transport.tcp.TCPChannel.createConnection(TCPChannel.java :216) 在 sun.rmi.transport.tcp.TCPChannel.newConnection(TCPChannel.java:202) 在 sun.rmi.server.UnicastRef.invoke(UnicastRef.java:128) 在 engine.ComputeEngine_Stub.executeTask(ComputeEngine_Stub.java: 35) 在 client.ComputePi.main(ComputePi.java:19) 引起：java.net.ConnectException：连接超时：在 java.net 的 java.net.DualStackPlainSocketImpl.connect0(Native Method) 处连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:06:20.720

您尚未将存根类部署到客户端。

# java - charAt :error java.lang.NullPointerException

> ID：13450792
> 
> 赞同：2
> 
> 时间：2012-11-19T09:22:50.710
> 
> 标签：java, etl, talend

我正在尝试使用 talend 检查第 4 个字符是否 = 4 然后我转换 S _ 如果不是我们保留输入文件的值是可以帮助我的 Excel 文件

```
 row1.B.charAt(4) == '4'? StringHandling.CHANGE(StringHandling.LEFT(row1.B,9) ,"_","S"):row1.B 
```

我有这个错误

```
[statistics] connected
Exception in component tMap_1
java.lang.NullPointerException
    at projectname.test_0_1.test.tFileInputExcel_2Process(test.java:1140)
    at projectname.test_0_1.test.runJobInTOS(test.java:1672)
    at projectname.test_0_1.test.main(test.java:1540) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T09:26:10.530

或者`row1`（`row1.B`使用适当的大写字母！属性以小写开头）是`null`

更新：关于您的问题的评论，`row1.B`则为空。检查它并在条件下控制它，`((row1.B != null) && (....))`或者`((row1.B == null) || (...))`（更有可能）检查您的逻辑以为其分配适当的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T09:27:54.520

当您取消引用指向 null 的变量时，会导致空指针异常。

在你的情况下，要么`row1`要么`row1.B`是`null`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T22:56:02.283

最简洁的方法是编写一个用户例程，然后在行输入上从 tMap 调用该函数。例如 userFunction(row1.B)

使函数输出您需要的任何字符串操作。这也允许您处理 Excel 中 B 单元格为空的情况。您不能在 tMap 的单行中做到这一点。

# .net - 是否可以通过 OData 流式传输实体？

> ID：13450793
> 
> 赞同：7
> 
> 时间：2012-11-19T09:22:52.020
> 
> 标签：.net, odata, iqueryable

我是 OData 的新手，所以请多多包涵。

假设我将 IQueryable<> 与 OData 一起使用，并且服务器生成的记录数很大（例如 10000），是否可以在客户端上的实体不断到达时开始处理它们（在整个 HTTP 流之前收到）？

我想到的概念类似于将 LINQ 与 SqlDataReader ( [details](http://msdn.microsoft.com/en-us/library/bb399413%28v=vs.100%29.aspx) ) 一起使用，其中数据仅在 LINQ2SQL 提供程序枚举记录时从 SQL 中获取（通过连接到 SqlDataReader 的底层只进服务器端游标）。

HTTP 确实允许流式传输。OData IQueryable<> 可以利用这种支持吗？如果可以实现端到端流式传输，数据将在服务器上枚举，并一次一条记录地流入（序列化）到 HTTP 流中。当客户端接收到流并对其进行反序列化时，可以枚举实体并保持一次到达一个。

这是一厢情愿吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T15:57:01.057

是否可以使用 WCF 数据服务流式传输内容？**是的，它是**。为此，您必须[实现流提供程序，该提供程序](http://blogs.msdn.com/b/astoriateam/archive/2010/08/04/data-services-streaming-provider-series-implementing-a-streaming-provider-part-1.aspx)允许二进制大对象 (BLOB) 数据的流式传输，例如照片、视频和文档 ( **No Entities** )

如果一个大的结果集是从 IIS 流式传输的，它是 feed/xml/json 并且在响应完成之前它是无效的。但是，您可以使用 $skip 和 $top 参数执行多个并行请求，以便将该结果集拆分为几个较小的请求并在它们到达时加入它们。

**更新**：另一种选择可以通过创建自己的基础设施来通过 wcf ds 进行流式传输，就像这个人[http://blogs.msdn.com/b/tom_laird-mcconnell/archive/2010/01/18/using-ado-net-wcf -data-services-for-streaming-infinite-event-result-sets.aspx](http://blogs.msdn.com/b/tom_laird-mcconnell/archive/2010/01/18/using-ado-net-wcf-data-services-for-streaming-infinite-event-result-sets.aspx)

# database - Redis 变慢的原因

> ID：13450794
> 
> 赞同：10
> 
> 时间：2012-11-19T09:23:04.907
> 
> 标签：database, nosql, redis

Redis 工作/响应缓慢的原因可能是什么？

即我在 Stackoverflow 上发现在 Redis 中存储大文件或数据会使其变慢。有什么别的？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-19T10:28:27.943

这个问题没有简单的答案。对于所有基于 NoSQL 或 SQL 的存储解决方案，有很多情况可能导致存储引擎的高延迟或缓慢。Redis 也不例外。

我建议从阅读开始：

*   [Redis 有多快？](http://redis.io/topics/benchmarks)
*   [Redis 延迟问题排查](http://redis.io/topics/latency)

以下是潜在原因的非详尽列表：

*   硬件不足（网络、内存、CPU）
*   基于软件的虚拟化（例如低端硬件上的 Xen）
*   内存不足，在操作系统级别生成交换
*   在单线程引擎中执行了太多 O(n) 操作（如 KEYS）
*   存储在 Redis 中的大型对象，导致通信缓冲区的不受控制的扩展
*   大量同时会话（> 30000）
*   每秒连接操作太多（Redis 不是网络服务器，连接应该是永久的，而不是瞬态的）。
*   客户端应用程序生成的往返次数过多（没有流水线或聚合命令使用）
*   bgsave 或 AOF 重写生成的大型 fork 操作（尤其是在 VM 上）
*   使用 AOF 时的 I/O 相关延迟
*   同时触发多个过期操作的累积
*   客户端和主/从通信缓冲区内存累积，或日志数据缓慢
*   网络带宽消耗很大时的[TCP incast 条件](http://www.snookles.com/slf-blog/2012/01/05/tcp-incast-what-is-it/)
*   使用分布式存储（尤其是多云存储，例如 EC2 EBS）来存储转储或 AOF 文件

可能还有许多其他原因，与您自己的应用程序产生的工作负载有关。

如果有人想到其他一般原因，我们可以将它们添加到此列表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-29T12:02:44.430

如前所述`new connections`，> 200 每分钟可能会导致缓慢。一个可能的解决方案是添加一个保持恒定连接数的代理：

*   [twemproxy](https://github.com/twitter/twemproxy)
*   [使者](https://github.com/envoyproxy/envoy)

# java - struts2 使用瓷砖时重定向到默认操作

> ID：13450801
> 
> 赞同：0
> 
> 时间：2012-11-19T09:23:21.347
> 
> 标签：java, struts2, tuckey-urlrewrite-filter

我有这样的 index.jsp

```
<% response.sendRedirect("home.action"); %> 
```

我想调用那个动作`http://localhost:8080/Myapp`

但我想删除 index.jsp 并尝试使用

```
<default-action-ref name="home"/>
<action name ="home"---- 
```

但我收到 404 错误，指定该操作不存在在这种情况下该怎么办？当我在动作（类）控件中放置断点时，控件没有起作用，所以我认为这`<default-action-ref name="home"/>`不起作用

请提供一些有用的输入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:04:39.370

**我使用了一个简单的逻辑**

```
<action name="regi">
<result name="success" type="tiles">regi.tiles</result>
</action>
<action name="registration" class="com.regform">
<result name="success" type="redirect">regi.action</result>
</action> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T12:38:10.070

我认为这不是一个好主意，但它会满足您的要求。

```
<action name="">
    <result type="redirectAction">home</result>
</action> 
```

# c# - 无法让全局错误处理程序在我的自托管 wcf 服务上工作

> ID：13450804
> 
> 赞同：3
> 
> 时间：2012-11-19T09:23:38.570
> 
> 标签：c#, wcf, global, ierrorhandler

您好，我已经尝试让 Ierrorhandler 工作了几个小时，但我非常卡住:) 我从本指南中获得了最多的结果

[http://www.remondo.net/wcf-global-exception-handling-attribute-and-ierrorhandler/#comment-10385](http://www.remondo.net/wcf-global-exception-handling-attribute-and-ierrorhandler/#comment-10385)

但我无法让它与我的操作/功能一起使用

**程序.cs**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.ServiceModel;

namespace Phpwcfconsole
{
    class program
    {
        static void Main(string[] args)
        {
            using (ServiceHost host = new ServiceHost(typeof(Service1)))
            {
                try
                {
                    host.Open();
                    Console.WriteLine("Host open. Press any key to <EXIT>");
                    Console.ReadLine();
                    host.Close();
                }
                catch (Exception e)
                {
                    Console.WriteLine(Environment.NewLine + e.Message);
                    host.Close(); 
                }
            }
        }
    }
} 
```

**应用程序配置**

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
 <system.web>
  <compilation debug="true" />
 </system.web>

 <system.serviceModel>
  <services>
   <service behaviorConfiguration="Phpwcfconsole.Service1Behavior" 
        name="Phpwcfconsole.Service1">
    <endpoint 
      address="" 
      binding="basicHttpBinding" 
      contract="Phpwcfconsole.IService">
      <identity>
        <dns value="localhost" />
      </identity>
    </endpoint>
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
    <host>
      <baseAddresses>
        <add baseAddress="http://agent007:8732/phpwcf/" />
      </baseAddresses>
    </host>
  </service>
</services>
<behaviors>
  <serviceBehaviors>
       <behavior name="Phpwcfconsole.Service1Behavior">
           <serviceMetadata httpGetEnabled="True"/>
           <serviceDebug includeExceptionDetailInFaults="false" />
         </behavior>
       </serviceBehaviors>
     </behaviors>
     <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
     <bindings>
       <basicHttpBinding>
         <binding name="MyServiceBinding"
                hostNameComparisonMode="StrongWildcard"
                receiveTimeout="00:10:00"
                sendTimeout="00:10:00"
                openTimeout="00:10:00"
                closeTimeout="00:10:00"
                maxReceivedMessageSize="20000000"
                maxBufferSize="20000000"
                maxBufferPoolSize="20000000"
                transferMode="Buffered"
                messageEncoding="Text"
                textEncoding="utf-8"
                bypassProxyOnLocal="false"
                useDefaultWebProxy="true" >
           <security mode="None" />
         </binding>
       </basicHttpBinding>
     </bindings>
   </system.serviceModel>
 </configuration> 
```

**IService.cs**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.Text;

namespace Phpwcfconsole
{
    [ServiceContract]
    public interface IService
    {
        [OperationContract]
        string GetData(int value);
    }
} 
```

**服务器函数.cs**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;

namespace Phpwcfconsole
{
    public partial class Service1 : IService
    {
        public string GetData(int value)
        {
            throw new Exception("error");
        }
    }
} 
```

**异常处理程序.cs**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.ServiceModel;
using System.ServiceModel.Channels;
using System.ServiceModel.Dispatcher;
using System.ServiceModel.Description;
using System.Collections.ObjectModel;
using System.ServiceModel.Configuration;

namespace Phpwcfconsole
{
    public class GlobalExceptionHandler : IErrorHandler
    {
        public bool HandleError(Exception ex)
        {
            return true;
        }

        public void ProvideFault(Exception ex, MessageVersion version,
                             ref Message msg)
        {
            // Do some logging here

            var newEx = new FaultException(
                string.Format("CALLED FROM YOUR GLOBAL EXCEPTION HANDLER BY {0}",
                              ex.TargetSite.Name));

            MessageFault msgFault = newEx.CreateMessageFault();
            msg = Message.CreateMessage(version, msgFault, newEx.Action);
        }
    }

    public class GlobalExceptionHandlerBehaviourAttribute : Attribute, IServiceBehavior
    {
        private readonly Type _errorHandlerType;

        public GlobalExceptionHandlerBehaviourAttribute(Type errorHandlerType)
        {
            _errorHandlerType = errorHandlerType;
        }

        public void Validate(ServiceDescription description, ServiceHostBase     serviceHostBase)
        {

        }

        public void AddBindingParameters(ServiceDescription description, ServiceHostBase serviceHostBase,
            Collection<ServiceEndpoint> endpoints, BindingParameterCollection parameters)
        {
        }

        public void ApplyDispatchBehavior(ServiceDescription description, ServiceHostBase serviceHostBase)
        {
            var handler = (IErrorHandler)Activator.CreateInstance(_errorHandlerType);

            foreach (ChannelDispatcherBase dispatcherBase in serviceHostBase.ChannelDispatchers)
            {
                var channelDispatcher = dispatcherBase as ChannelDispatcher;
                if (channelDispatcher != null)
                channelDispatcher.ErrorHandlers.Add(handler);
            }
        }
    }
} 
```

好的，如果我在里面放一些 console.writeLine

**公共类 GlobalExceptionHandlerBehaviourAttribute ：属性，IServiceBehavior** 函数我看到它们在我启动程序时运行。但我无法获得指南上的示例，该示例使用我的函数抛出异常并让我的 IErrorhandler 捕获该异常。

我在其他函数中尝试了一些异常，但我的 IErrorhandler 没有任何反应。

但是到目前为止我发现了一个异常，当我在**Wcftestclient**中添加我的服务然后停止调试并删除**IService.cs中的****[OperationContract]**然后重新开始并尝试在不刷新的情况下运行该函数时，该异常得到被 IErrorhandler 捕获

 **所以我的问题是为什么我不能在函数中捕获异常？非常感谢您的回答。C（：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-27T05:12:53.627

FaultContractAttribute 是否足以满足您的要求？查看 msdn 文档中的示例。 [http://msdn.microsoft.com/en-us/library/system.servicemodel.faultcontractattribute.aspx](http://msdn.microsoft.com/en-us/library/system.servicemodel.faultcontractattribute.aspx) 这听起来与您尝试做的类似，比自定义服务行为更复杂。

在跨进程/机器使用 WCF 时，FaultContracts 等同于异常，因为消费者不一定是 .net 客户端。**

# linux - 使用 diff 命令查找两个目录之间的差异

> ID：13450808
> 
> 赞同：0
> 
> 时间：2012-11-19T09:23:55.510
> 
> 标签：linux

我想在修改后的内核文件和原始内核文件之间的 .diff 文件中更改部分。我使用 diff -b -r -w dir1 dir2 它在命令行上提供它，但我想在单独的 diff 扩展文件中获取它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T09:30:41.177

diff -b -r -w dir1 dir2 >> your_file_name.patch

将保存您的结果。

# c - 如何在C中的char数组中搜索字符串？

> ID：13450809
> 
> 赞同：5
> 
> 时间：2012-11-19T09:23:55.310
> 
> 标签：c, arrays, string

例如我有：

```
char buff[1000]; 
```

我想搜索字符串“hassasin”是否在该字符数组中。这是我尝试过的。

```
char word[8] = "hassasin";
char Buffer[1000]=sdfhksfhkasd/./.fjka(hassasin)hdkjfakjsdfhkksjdfhkjh....etc 
int k=0;
int t=0; 
int len=0; 
int sor=0; 
for (k=0; k<1000; k++){ 
    for (t=0; t<8; t++){ 
        if (Buffer[k]==word[t]) len++; 
        if (len==8) "it founds 0.9.1" 
    } 
} 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-19T09:26:01.247

是的，您可以只使用[strstr](http://linux.die.net/man/3/strstr)：

```
 #include <stdlib.h>
 #include <string.h>

 char buff[1000];
 char *s;

 s = strstr(buff, "hassasin");      // search for string "hassasin" in buff
 if (s != NULL)                     // if successful then s now points at "hassasin"
 {
     printf("Found string at index = %d\n", s - buff);
 }                                  // index of "hassasin" in buff can be found by pointer subtraction
 else
 {
     printf("String not found\n");  // `strstr` returns NULL if search string not found
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T09:41:36.717

如果 chararray 包含 stringend 或不以 \0 结尾，您可以使用这些代码，因为 strstr 会阻止这些代码：

```
#include <stdio.h>
int main()
{
    char c_to_search[5] = "asdf";

    char text[68] = "hello my name is \0 there is some other string behind it \n\0 asdf";

    int pos_search = 0;
    int pos_text = 0;
    int len_search = 4;
    int len_text = 67;
    for (pos_text = 0; pos_text < len_text - len_search;++pos_text)
    {
        if(text[pos_text] == c_to_search[pos_search])
        {
            ++pos_search;
            if(pos_search == len_search)
            {
                // match
                printf("match from %d to %d\n",pos_text-len_search,pos_text);
                return;
            }
        }
        else
        {
           pos_text -=pos_search;
           pos_search = 0;
        }
    }
    // no match
    printf("no match\n");
   return 0;
} 
```

[http://ideone.com/2In3mr](http://ideone.com/2In3mr)

# c++ - C++ - 使用类参数定义向量大小

> ID：13450815
> 
> 赞同：2
> 
> 时间：2012-11-19T09:24:19.647
> 
> 标签：c++, vector, artificial-intelligence

您好，我正在尝试使用 C++ 创建遗传算法，并且尝试使用向量作为容器，问题是我不知道如何设置向量的大小，因为向量具有这样的类参数

```
class population
{
    friend class chromosome;
private:
    int population_number;
    int best_index[2];
    vector <chromosome *> chromosome_population;
public:
    population(int numberOfPopulation);
    population(int numberOfPopulation,int numberOfSynapse);
    ~population();
    int worst_chromosome();
    void mating();
    void crossover(int parent_1,int parent_2);
}; 
```

这是人口类，这是染色体类

```
class chromosome
{
    friend class population;
private:
    int chromosome_id;
    float fitness;
    vector <gen *> gen_chromosome;
public:
    chromosome();
    ~chromosome();
    void fitness_function();
    void mutation_translocation();
    int get_chromosome_size();
}; 
```

如何在人口类构造函数中设置向量长度？我尝试使用 vector.pushback 和 vector.resize 但两者都会给我错误，因为参数不匹配。实际上我明白它为什么会出错但我不知道如何匹配向量推回中的参数这是我的人口构造函数

```
population::population(int numberOfPopulation)
{
    srand (time(NULL));
    population_number = numberOfPopulation;
    for(int a=0;a<population_number;a++)
    {
        chromosome_population.push_back();
    }
    cout<<chromosome_population.size();
    for(int i=0;i<population_number;i++)
    {
        chromosome_population[i]->chromosome_id = i;
        int chromosome_length = rand() % 10 + 1;
        for(int j=0;j<chromosome_length;j++)
        {
            chromosome_population[i]->gen_chromosome[j]->basa_biner = rand()%1;
            chromosome_population[i]->fitness = (rand()%99)+1;
        }
    }
} 
```

如果您还需要任何其他信息，您可以在评论中告诉我，我会添加您需要的信息。之前谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T09:28:40.790

`std::vector`有几个[构造函数](http://en.cppreference.com/w/cpp/container/vector/vector)，其中一个变体接受要存储在`vector`.

`vector`在`population`构造函数的初始化列表中指定 的大小：

```
population::population(int numberOfPopulation) :
    population_number(numberOfPopulation),
    chromosome_population(numberOfPopulation)
{
} 
```

给出这种方法，`population_number`成员变量是不必要的，因为它可以通过`chromosome_population.size()`.

在 will 上指定初始大小`vector`意味着它包含`numberOfPopulation`空指针。在访问 中的元素之前，`vector`您需要创建对象，在这种情况下使用`new`. 如果元素是可复制的并且不需要多态行为，那么建议使用`vector<chromosome>`。如果必须在中使用动态分配的元素，`vector`则必须先分配：

```
chromosome_population[i] = new chromosome(); 
```

并记住`delete`何时不再需要。

还希望使用一种形式的智能指针而不是原始指针。使用智能指针的一个优点是，当`vector<unique_ptr<chromosome>>`超出范围时，将为您销毁元素，而无需显式调用`delete`每个元素。请参阅[有哪些可用的 C++ 智能指针实现？](https://stackoverflow.com/questions/5026197/what-c-smart-pointer-implementations-are-available)有关可用智能指针的有用列表。

请注意，它[`vector::push_back()`](http://en.cppreference.com/w/cpp/container/vector/push_back)接受一个参数，其类型与其元素相同。所以正确的调用`push_back()`是：

```
chromosome_population.push_back(new chromosome()); 
```

如果您指定 at 构造的初始大小`vector`，调用`push_back()`将*在*`vector`.

# ruby-on-rails - 如何在 Rails 3 中捕获视图错误

> ID：13450816
> 
> 赞同：0
> 
> 时间：2012-11-19T09:24:26.727
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我在哪里可以在 Rails 3 中注册一个可以捕获视图错误的处理程序？Rails 引发了一类错误，我们希望处理并保持沉默，而不是记录为 FATAL。

（这些不是我们代码中的错误，而是由于客户端在页面完成渲染之前关闭连接以及 Rails/unicorn 尝试写入损坏的管道而导致的错误。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T10:01:35.203

会`rescue_from`为你工作吗？[http://api.rubyonrails.org/classes/ActiveSupport/Rescuable/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveSupport/Rescuable/ClassMethods.html)

你可以想象拯救（和沉默）你的特定子类`ActionView::TemplateError`

# java - 解压zip错误android

> ID：13450817
> 
> 赞同：1
> 
> 时间：2012-11-19T09:24:27.570
> 
> 标签：java, android, zip

所以当我试图在电脑上解压我的 zip 文件时出现错误。

7zip 错误是 - 尝试将文件指针移动到文件开头之前。

**UPD - 发送到 ftp 后发生错误，在发送存档之前是可以的！**

对于 ftp 工作，我使用 ClientFTP lib。

首先，在我的设备上，我创建了一个带有 gps 坐标的文本文件，然后我尝试将其压缩并上传到 ftp

然后下载到电脑上解压。

我尝试了很多方法来创建档案

下面的代码来创建一个文本文件

```
 File file;
  try{
    file = new File(path, "locations.lft");
    if (file.exists())
      file.delete();
      file.createNewFile();
    }catch (Exception e){
    try{ftp.quit();}catch(Exception E){}
      return;
    }
   BufferedWriter BW = null;
   try{
BW = new BufferedWriter(new FileWriter(file));
}catch(Exception e){
try{ftp.quit();}catch(Exception E){}
    return;
}
Cursor row = db.Query("locations",null,"date_time BETWEEN " + ToBeggingOfDay(date).getTime() + " AND " + 
                    ToEndOfDay(date).getTime());
try{
   while (row.moveToNext()){
   String line = "" + row.getString(row.getColumnIndex("latitude")) + "~" +  row.getString(row.getColumnIndex("longtitude")) + "~"  + DateFormat.format("yyyy-MM-dd-kk-mm-ss", new Date( row.getLong(row.getColumnIndex("date_time")) )) + "~" + "0~~~~"+row.getString(row.getColumnIndex("speed"));
       BW.write(line);
   BW.newLine();
 }
}catch (Exception e){
SendMsg("ERROR", "Can't write in file (" + e.getLocalizedMessage() + ")");
try{ftp.quit();}catch(Exception E){}
  try{BW.close();}catch(Exception E){}
return;
}finally{
row.close();
try{BW.close();}catch(Exception E){}
 } 
```

打包 zip 文件的代码

```
 public class ZipUtil {
        /**
         * A constants for buffer size used to read/write data
         */
        private static final int BUFFER_SIZE = 4096;

        /**
         * Compresses a collection of files to a destination zip file
         * @param listFiles A collection of files and directories
         * @param destZipFile The path of the destination zip file
         * @throws FileNotFoundException
         * @throws IOException
         */
       public void compressFiles(List<File> listFiles, String destZipFile) throws FileNotFoundException, IOException {

           ZipOutputStream zos = new ZipOutputStream(new FileOutputStream(destZipFile));

           for (File file : listFiles) {
               if (file.isDirectory()) {
                   addFolderToZip(file, file.getName(), zos);
               } else {
                   addFileToZip(file, zos);
               }
           }

           zos.flush();
           zos.close();
       }

       /**
        * Adds a directory to the current zip output stream
        * @param folder the directory to be  added
        * @param parentFolder the path of parent directory
        * @param zos the current zip output stream
        * @throws FileNotFoundException
        * @throws IOException
        */
        private void addFolderToZip(File folder, String parentFolder,
                ZipOutputStream zos) throws FileNotFoundException, IOException {
            for (File file : folder.listFiles()) {
                if (file.isDirectory()) {
                    addFolderToZip(file, parentFolder + "/" + file.getName(), zos);
                    continue;
                }

                zos.putNextEntry(new ZipEntry(parentFolder + "/" + file.getName()));

                BufferedInputStream bis = new BufferedInputStream(
                        new FileInputStream(file));

                long bytesRead = 0;
                byte[] bytesIn = new byte[BUFFER_SIZE];
                int read = 0;

                while ((read = bis.read(bytesIn)) != -1) {
                    zos.write(bytesIn, 0, read);
                    bytesRead += read;
                }

                zos.closeEntry();

            }
        }

        /**
         * Adds a file to the current zip output stream
         * @param file the file to be added
         * @param zos the current zip output stream
         * @throws FileNotFoundException
         * @throws IOException
         */
        private void addFileToZip(File file, ZipOutputStream zos)
                throws FileNotFoundException, IOException {
            zos.putNextEntry(new ZipEntry(file.getName()));

            BufferedInputStream bis = new BufferedInputStream(new FileInputStream(
                    file));

            long bytesRead = 0;
            byte[] bytesIn = new byte[BUFFER_SIZE];
            int read = 0;

            while ((read = bis.read(bytesIn)) != -1) {
                zos.write(bytesIn, 0, read);
                bytesRead += read;
            }

            zos.closeEntry();
        }
    } 
```

在发送到 FTP 的代码末尾

```
 BufferedInputStream bis = null;
            try{
                bis = new BufferedInputStream(new FileInputStream(file));
                if (!ftp.storeFile(FTPFileName, bis)){
                    SendMsg("ERROR", "Can't write in file");
                    return;
                }
            }catch (Exception e) {
                SendMsg("ERROR", "Can't write in file");
                return;
            }finally{
                try{bis.close();}catch (Exception E) {}
                file.delete();
            } 
```

例子

```
 try {

                           ZipUtil zipper = new ZipUtil();
                            File directoryToZip = new File(path+"locations.lft");
                            String zipFilePath = path + "1.zip";
                            List<File> listFiles = new ArrayList<File>(1);
                            listFiles.add(directoryToZip);

                            zipper.compressFiles(listFiles, zipFilePath);
                        }catch(Exception e){
                             e.printStackTrace();
                        }
                        file = new File(path, "1.zip"); 
```

对不起我的英语不好，希望你知道为什么我会收到这个错误

# grails - Grails 自定义应用程序上下文持有者

> ID：13450818
> 
> 赞同：0
> 
> 时间：2012-11-19T09:24:29.817
> 
> 标签：grails, configuration, static, javabeans

我想从静态方法中访问 Grails ConfigObject，并尝试关注这篇文章： [http ://burtbeckwith.com/blog/?p=1017](http://burtbeckwith.com/blog/?p=1017)

该解决方案建议使用单例类创建自定义应用程序上下文持有者，并将其注册到 bean 列表 (resources.groovy) 中。

单例类应该有一个 ApplicationContext 类型的私有属性，它应该由 setApplicationContext 方法初始化，但看起来这永远不会发生。

如何在我的单例类实例中设置 ApplicationContext？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T09:36:43.033

这取决于您何时尝试访问它 - 如果您的静态方法在 grailsApplication 完全设置之前被调用，那么它可能尚未被注入。尝试使用`grails.util.Holders`（ApplicationHolder 等的非弃用替代品）或尝试[“域类技巧”](http://burtbeckwith.com/blog/?p=993)

```
new MyDomainObject().getDomainClass().grailsApplication.config 
```

# c# - IF/ELSE 条件：频率连续

> ID：13450820
> 
> 赞同：0
> 
> 时间：2012-11-19T09:24:35.353
> 
> 标签：c#, wpf

我创建了一个 C# / WPF 应用程序，我想在运行时更改 WPF 表单的颜色，根据条件任务是如果用户选择红色表单更改为红色，如果用户选择绿色表单颜色变为绿色

用户在组合框中选择颜色（红色，绿色），我在组合框单击事件代码中编写代码，例如

```
if ( color.Text== "green")
{
   SolidColorBrush bg = new SolidColorBrush(Colors.green);
   g.Background = bg;   //g is stack panel name 
}
else
{
   SolidColorBrush bg = new SolidColorBrush(Colors.red);
   g.Background = bg;
} 
```

但在运行时，我选择了绿色，颜色变为红色而不是绿色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T09:28:39.277

那是因为`color.Text`不等于`"green"`？

尝试使用`(string)color.SelectedValue`.

哦-@Fuex 指出（尽管假设您使用的是 Windows 窗体，但实际上您使用的是 WPF）-您不使用该`Click`事件-因为不会进行任何选择。

您需要使用该[`SelectionChanged`](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.selector.selectionchanged.aspx)事件。

将逻辑移至该处理程序后，您还应该能够返回使用`.Text`

# qt - QML 桌面中的单选按钮

> ID：13450829
> 
> 赞同：7
> 
> 时间：2012-11-19T09:25:16.880
> 
> 标签：qt, radio-button, desktop, qml

我的页面中有 3 个单选按钮，QML 桌面应用程序。一旦我检查了一个 - 我希望所有其他都未选中。

我尝试使用`CheckableGroup`我在帮助中找到的代码：

```
CheckableGroup { id: group }
Row {
 id: row
 spacing: platformStyle.paddingMedium
 RadioButton {
     id: button1
     text: "1"
     platformExclusiveGroup: group
 }
 RadioButton {
     id: button2
     text: "2"
     platformExclusiveGroup: group
 }
 RadioButton {
     id: button3
     text: "3"
     platformExclusiveGroup: group
     checked: true
 }
} 
```

但我收到错误“platformExclusiveGroup 不是有效的属性名称”我尝试了另一种解决方案

```
RadioButton {
  id: rbtnDecimal1
  width: 130
  onClicked: {
    if (checked) {
      rbtnHexadecimal1.checked=false;
      rbtnString1.checked=false;
    }
  }
  text: "Decimal Data";
  anchors.left: rbtnHexadecimal1.right
} 
```

当一个按钮被选中时，所有其他按钮都未选中，但其他按钮保持选中状态，直到我将鼠标移到它们上 - 它们变得未选中。

知道如何实施吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-09-25T01:53:16.483

您需要[`ExclusiveGroup`](http://doc.qt.io/qt-5/qml-qtquick-controls-radiobutton.html#exclusiveGroup-prop)为`RadioButton`s 指定一个。

```
Row {
    id: row
    ExclusiveGroup { id: group }
    RadioButton {
        id: button1
        text: "1"
        exclusiveGroup: group
    }
    RadioButton {
        id: button2
        text: "2"
        exclusiveGroup: group
    }
    RadioButton {
        id: button3
        text: "3"
        exclusiveGroup: group
        checked: true
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T11:16:19.673

QML 桌面组件中的 RadioButton 不支持您的第一种方法，但您可以尝试以下解决方法：

```
property int currentIndex: 1

onCurrentIndexChanged: {
    button1.checked = currentIndex == 0
    button2.checked = currentIndex == 1
    button3.checked = currentIndex == 2
}

Row {
    RadioButton {
        id: button1
        text: "1"
        onClicked:{
            currentIndex = 0
        }
    }
    RadioButton {
        id: button2
        text: "2"
        onClicked:{
            currentIndex = 1
        }
    }
    RadioButton {
        id: button3
        text: "3"
        onClicked:{
            currentIndex = 2
        }
    }
} 
```

# asp.net - 如何在服务器端将 Json 转换为 Grid

> ID：13450836
> 
> 赞同：0
> 
> 时间：2012-11-19T09:25:28.893
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

我有一个 json，我想在服务器端转换为 HTML 网格视图并将 HTML 作为字符串返回

```
 StringBuilder sb = new StringBuilder();
    var serializer = new JavaScriptSerializer();
    string g = serializer.Serialize(ox)
    //here convert g to html table
    sb.Append(g);
    return sb.ToString(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T11:00:54.777

```
 private String Serialize2HTMLTable(List<conversion> ox)
        {
            var serializer = new JavaScriptSerializer();

            DataTable dt = (DataTable)JsonConvert.DeserializeObject(serializer.Serialize(ox), (typeof(DataTable)));

            StringWriter sw = new StringWriter();
            HtmlTextWriter w = new HtmlTextWriter(sw);

            //Create a table
            Table tbl = new Table();
            tbl.BorderStyle = BorderStyle.Solid;
            tbl.BorderWidth = 1;
            //Create column header row
            TableHeaderRow thr = new TableHeaderRow();
            foreach (DataColumn col in dt.Columns)
            {
                TableHeaderCell th = new TableHeaderCell();
                th.Text = col.Caption;
                thr.Controls.Add(th);
            }
            tbl.Controls.Add(thr);

            //Create table rows
            foreach (DataRow row in dt.Rows)
            {
                TableRow tr = new TableRow();
                foreach (var value in row.ItemArray)
                {
                    TableCell td = new TableCell();
                    td.BorderStyle = BorderStyle.Solid;
                    td.BorderWidth = 1;
                    td.Text = value.ToString();
                    tr.Controls.Add(td);
                }
                tbl.Controls.Add(tr);
            }

            tbl.RenderControl(w);

            return sw.ToString();

        } 
```

# php - 如何获取子/子创建新 UL 的查询

> ID：13450839
> 
> 赞同：2
> 
> 时间：2012-11-19T09:25:36.197
> 
> 标签：php, mysql, parent-child, categories

我正在尝试为父子类别制作未排序列表，如果有任何子类别，它将创建另一个未排序列表（如缩进文本），以便用户可以正确理解。

我有 fetch sql 但对于 foreach 我不明白如何设置，因此通过在父类别下创建另一个无序列表，子类别将仅显示在父类别下。

这是我的代码

```
$query_cat =    "SELECT * FROM ^categories";
$query = qa_db_query_sub($query_cat);
$catsid = qa_db_read_all_assoc($query);

echo '<UL>';
foreach ($catsid as $catid){
    echo '<LI>'. $catid['title'].' '. $catid['categoryid'].'</LI>';
}
echo '</UL>'; 
```

![类别的表格图像](../Images/ef8286b04892722e4eab76a02c27dda2.png)

## 所以最终的结果是

*   第一类
    *   子类别1
*   第二类

## 编辑：

使用@vlcekmi3 修改代码后回答[https://stackoverflow.com/a/13451136/1053190](https://stackoverflow.com/a/13451136/1053190)我得到了这个结果

## ![在此处输入图像描述](../Images/b61ec3aad064fc0a15c02da1ab3c4568.png)

现在如何从父列表中排除子类别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T09:42:53.593

你可以使用复杂的查询或类似的东西

```
foreach ($catsid as $catid) {
    ...
    $subquery_cat = "SELECT * FROM ^categories WHERE parentid='".$catid['categoryid']."'";
    $query = qa_db_query_sub($subquery_cat);
    $subcatsid = qa_db_read_all_assoc($query);
    // wrap into html
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T09:45:00.947

您的设计没有真正简单的解决方案。最有效的方法是添加类似`order_in_list`（也许是`depth_in_list`）的列。

它们将在循环中预先计算（伪代码）：

```
START TRANSACTION
UPDATE t1 SET order_in_list = 0 // Restart whole loop

$ids = array(0);

while $id = array_shift($ids){
   $record = SELECT * FROM t1 WHERE id = $id // Get id details, order_in_list is important
   $children = SELECT * FROM t1 WHERE parent_id = $id // get list of all childs
   // If it's root element, start indexing from 0
   $root_order = ($record ? $record->order_in_list : 1) 
   $child_no = count($children) // How many child will be adding

   // No children, nothing to do:
   if $child_no < 1{
      continue;
   }

   append_to_array($ids, $children) // Store ids to process

   // Shift all later records, we'll be creating gap in order_in_list 1,2,3,4,5
   // To 1,2,5,6,7 to insert items on places 3,4
   UPDATE t1 SET order_in_list = (order_in_list + $child_no)
      WHERE order_in_list > $record->order_in_list

   // Okay, set IDs for direct children
   foreach( $children as $child){
       UPDATE t1 SET order_in_list = $root_order, depth_in_list = $record->depth_in_list+1
          WHERE id = $child->id
       $root_order++;
   }
}
COMMIT 
```

这样，您将获得以下记录：

```
First category, 1, 1
Second category 3, 1
Sub category, 2, 2 
```

您可以使用简单的循环显示：

```
$last_depth = 0;
foreach( (SELECT * FROM t1 ORDER by `order_in_list`) as $row){
    if( $last_detph > $row['depth_in_list'])){
       // Close level </ul>
    } else if($last_detph < $row['depth_in_list']){
       // Opening level <ul>
    } else {
       // The same depth
    }
    $last_depth = $row['depth_in_list'];
} 
```

* * *

### 不修改数据库

构建两个包含根元素和所有元素的数组可能是最有效的：

```
$root_elements = array();
$all_elements = array();

foreach( (SELECT * FROM t1) as $row){
    // Store details into all_elements, note that entry may have already be created when
    // processing child node
    if( isset( $all_elements[$row['id']])){
      // set details
    } else {
      $all_elements[$row['id']] = $row;
      $all_elements[$row['id']]['children'] = array(); // Array of child elements
    }

    if( $row['parent_id'] == NULL){
        $all_elements[] = $row['id'];  // Add row element
    } else {
        if( isset( $all_elements[ $row[ 'parent_id']])){
            $all_elements[ $row[ 'parent_id']]['children'][] = $row['id'];
        } else {
            // Create new record:
            $all_elements[ $row[ 'parent_id']] = array();
            $all_elements[ $row[ 'parent_id']]['children'] = array($row['id']);
        }
    }
} 
```

然后写成：

```
foreach( $root_elements as $element_id){
    write_recursive( $all_elements[ $element_id]);
}

// And display
function write_recursive( $element)
{
   echo '<ul>...';
   if( count( $element['children'])){
      foreach( $element['children'] as $child){
         write_recursive( $all_elements[ $child]);
      }
   }
   echo '</ul>';
} 
```

您最好为此创建类（以使用全局变量替换），但您应该有一种可靠的方法来做到这一点。无论如何，尽量避免在大量记录中使用它（我不会超过 2000-5000 个菜单条目），至少尝试缓存它。

*注意：解决方案在显示列表时面向数据库上的最少请求数。*

# mvvm - MVVM Light：如何从 DialogMessage 中删除 System.Windows.MessageBoxResult 的依赖关系

> ID：13450843
> 
> 赞同：1
> 
> 时间：2012-11-19T09:25:49.407
> 
> 标签：mvvm

我正在使用 MVVM Light 开发一个 MVVM 应用程序，总的来说，我发现它非常好用。但是，我有一个烦人的问题，希望有人能提供帮助。

我正在使用`DialogMessage`从 VM 向视图发送实例来显示对话框。结果通过回调发送回我的虚拟机，到目前为止一切都很好。

但是，对话框的结果（确定、是、否、取消等）作为`enum System.Windows.MessageBoxResult`. 对我来说，这似乎违背了 View/ViewModel 的分离，`MessageBoxResult`显然是 UI 中的一种类型，因此 VM 不应依赖于此或`System.Windows`命名空间中的任何内容。

我正在寻找的是以某种方式使用`DialogMessage`替代回调，例如，`Action<UserResult>;`而不是`Action<System.Windows.MessageBoxResult>;`，`UserResult`我定义的类型代表用户选择而不依赖于`MessageBoxResult`.

这是可能的，还是我过于严格地希望将 UI 概念排除在 VM 之外？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T10:05:58.203

关于您问题的第二部分，当我开始使用 MVVM Light 时，我也觉得`MessageBoxResult`在 VM 中收到回复似乎有点面向 UI。
另一方面，如果只是*名称*不同 - 例如您建议的 UserResult - 这对您来说就足够了吗？
如果只是类的命名有问题，我想你可以让它溜走。结果并没有表明 MessageBox 是否带有按钮或是否是某种其他类型的 UI 实现（假设是带有组合框的表单）**。** `Ok, Yes, No, Cancel`

如果它仍然困扰您，您始终可以为`DialogMessage`Dialog 创建一个包装器，获取`MessageBoxResult`并返回 a `UserResult`，它可以是具有相同值的枚举（将其视为一个简单的转换器）。
但正如我所说，我认为这可能是一个矫枉过正...

# php - 禁用空格键

> ID：13450848
> 
> 赞同：-1
> 
> 时间：2012-11-19T09:26:07.127
> 
> 标签：php, javascript, jquery

我使用 mysql 在 php 中创建了一个**图片库。**它具有按用户**添加评论**的能力。

[截屏](http://i.stack.imgur.com/kUZpm.png)

我的问题是，每当我尝试在消息框中**按空格键**时，它会更改图像并且我无法在消息框中输入多个单词。

是因为我的代码吗？还是这是默认行为？如果是这样，我该如何阻止它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T05:41:34.803

好的，这就是答案。我不得不设置

> enableKeyboard=false

在 ready 函数中，因为它默认为 true。

您可以参考以下链接了解更多详情：

[照片滑动](http://www.photoswipe.com/)

谢谢你没有帮助..：P

# javascript - 通过 javascript 确定页面 UI 文化

> ID：13450851
> 
> 赞同：1
> 
> 时间：2012-11-19T09:26:24.460
> 
> 标签：javascript, html

我的 html 代码中有两个 div 标签，如下所示。我想根据页面 UI 文化（Ui 文化是 en-US 或 fa-IR）更改他们的 float 属性......我想我可以使用 java 脚本来做到这一点。但我不知道如何通过 Javascript 获取 UI 文化。我想要一个 if 条件中的代码来确定 Ui 文化...提前为您提供帮助...

```
<div id="zone1" style="float: left;"><img alt="" src="~/IconArrow.png" /> &nbsp;</div>
<div id="zone2" style="float: left;"><img alt="" src="~/IconHome.png" /></div>

<script type="text/javascript">
if(/* ui culture is fa-IR*/)
{
    document.getElementById("zone1").style.float = "right";
    document.getElementById("zone2").style.float = "right";     
} 
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T10:55:40.783

你好试试这个，让我知道。如果这解决了您的问题，请不要忘记选择正确答案

```
<script type="text/javascript">
function testfunc(g)
{
    //alert("asd"+g);
    if(g == "fa-IR")
    {
        alert("as");
        obj = document.getElementById("zone1");
        obj2 =document.getElementById("zone2");
        obj.setAttribute("style", obj.getAttribute("style") + "; float:right; ");
        obj2.setAttribute("style", obj2.getAttribute("style") + "; float:right; ");
    }
}
</script> 
```

==================================================== ================================

```
<div style="display:block; width:100%; height:100px; border:1px solid #333">
    <div id="zone1" style=" float: left; display:block; width:20px; height:20px; background:#93F;"> </div>
    <div id="zone2" style="  float: left; display:block; width:20px; height:20px; background:#F66;"> </div>
</div>

<input type="button" name="" onclick = "testfunc('fa-IR')" value="test" /> 
```

# jquery - jquery.tree.checkbox.js 在 ie9 中无法正常工作

> ID：13450852
> 
> 赞同：1
> 
> 时间：2012-11-19T09:26:41.450
> 
> 标签：jquery, asp.net-mvc-2, cross-browser, treeview, internet-explorer-9

我正在使用 MVC 2，对于树视图，我正在使用 jquery.tree.checkbox.js 插件。它在 Mozilla 3.6+ 中运行良好，但在 IE9 树视图中无法正常运行。数据未在 IE9 中正确加载。
我使用了 `<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE9" />`兼容 IE 的代码。
有什么解决办法吗？

请有人帮助我吗？一周后没有回复这个问题。我在等它:(

# internet-explorer - IE8 的 SSL 证书错误

> ID：13450861
> 
> 赞同：1
> 
> 时间：2012-11-19T09:27:07.577
> 
> 标签：internet-explorer, ssl, openssl

这是一个重复的问题：

[我需要做什么才能让 Internet Explorer 8 接受自签名证书？](https://stackoverflow.com/questions/681695/what-do-i-need-to-do-to-get-internet-explorer-8-to-accept-a-self-signed-certific)

[IE8 不会安装 SSL 证书](https://stackoverflow.com/questions/1042035/ie8-will-not-install-ssl-certificate)

但是，我再次问同样的问题，因为它没有在那个线程中回答。除了 OP'd 将他的浏览器从 IE 更改为 Firefox。

我已经在**受信任的根证书颁发机构下安装了证书。** 并且，以下是有关证书的详细信息。

![在此处输入图像描述](../Images/443bf9dbbfd2144360900bacc0a3e0be.png)

![在此处输入图像描述](../Images/327b1589d5a129fb2b35895d62a8b421.png)

所以，我的问题是**“IE8 是否存在任何解决方案？”**

# algorithm - 布尔值的多维聚类

> ID：13450862
> 
> 赞同：1
> 
> 时间：2012-11-19T09:27:10.150
> 
> 标签：algorithm, cluster-analysis, multidimensional-array

这是我的问题场景：

我有几千个对象。每个对象有 256 个布尔维度（真或假）。我想找到这样的集群

1.  每个集群都有最小数量的真实维度（集群的维度是真实的，如果该集群中的任何对象都将该维度市场设为真实）。
2.  所有集群上所有真实维度的总和是最小的。
3.  每个簇不大于某个预定义值。

不需要解决方案的最优性，但是算法应该很快。

我应该如何最好地解决这个问题？有推荐的算法吗？

* * *

注意：我已经对这个问题实施了蛮力方法，但速度很慢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T21:55:58.493

您可以将其写为**[混合整数线性程序 (MILP)](http://en.wikipedia.org/wiki/Linear_programming#Integer_unknowns)**：

您有固定数量的集群和对象。
每个集群最多可以有 256 个真实维度。
如果对象 k 中的维度 i 为真，则参数![D_{k,j}](../Images/c5a3aebee136a3a2281b91ded47bb027.png)等于 1。

您有以下**变量**：

1.  ![d_{i,j}](../Images/595869ae96dfd90619ae24e3acd27661.png)是一个二元变量，如果维度 j 是集群 i 的真实维度，则等于 1。
2.  ![o_{i,k}](../Images/9dbcac1d06c678bc41c4f262aa94796e.png)是一个二进制变量，如果对象 k 在集群 i 中，则该变量为真。

您有以下**限制**：

1.  每个对象只能在一个集群中
2.  一个维度在集群中为真，如果它在集群内的所有对象中都为真
3.  每个簇只能容纳 M 个对象

第二个约束是一个棘手的约束，因为它*感觉*不是线性的，但实际上你*可以*线性地编写它。**约束**可以写成：

1.  ![C1](../Images/85ce62c64493461f3a89e980e9944976.png)对于所有 k
2.  ![C2](../Images/53f22918157236af4dc0fe4551ecf5b7.png)对于所有 i 和 j
3.  ![C3](../Images/f61b2c2beec3601fd93b462143720a98.png)对于所有我

**目标函数**可以是所有 的总和，![d_{i,j}](../Images/595869ae96dfd90619ae24e3acd27661.png)因此您可以最小化所有集群中所有真实维度的总和。

让我解释**第二个约束**：在右侧，您计算集群 i 内的元素数量，减去维度 j 设置为 1 的对象数量。如果所有对象都具有维度 j，则这等于零，否则为正值。

如果计算结果为零，则![d_{i,j}](../Images/595869ae96dfd90619ae24e3acd27661.png) **必须**等于 1 以避免违反约束。如果不是，![d_{i,j}](../Images/595869ae96dfd90619ae24e3acd27661.png)可以是任何东西（零或一）。这是有效的，因为![d_{i,j}](../Images/595869ae96dfd90619ae24e3acd27661.png)会出现在目标函数中，这意味着当程序在零或一之间进行选择时，它将选择零。

写完后，您可以使用商业求解器（如果有的话，他们会向学生提供免费许可证，如果您是其中之一）或[Coin-OR](http://www.coin-or.org/)来解决它。

提醒一下：解决 MILP 是一个**NP 完全问题**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T17:49:09.963

所以我决定写下我想出的（理论）解决方案。部分是因为它可能对我有帮助（有关此内容的更多信息，请参见下文），部分是因为它可以为任何感兴趣的人提供一个体面的解决方案。这是一个线性方程组，可以使用[Simplex Algorithm 求解](http://en.wikipedia.org/wiki/Simplex_algorithm)。

我想出的约束是：

* * *

> 1) 每个对象都在一个簇中
> 
> 2）每个簇最多有 M 个（*常量*）对象
> 
> 3) 集群的维度为真，当且仅当该集群中的至少一个对象将该维度设置为真时

* * *

我将解释现在如何强制执行约束：

假设有 n 个对象和 k 个簇。我们考虑总和（在下面这是一行）

> x [1] ¹ + x [2] ¹ + x [3] ¹ + ... + x [n] ¹ + d [1] ¹ + d [2] ¹ + d [3] ¹ + ... + d [n] ¹ +
> 
> x [1] ² + x [2] ² + x [3] ² + ... + x [n] ² + d [1] ² + d [2] ² + d [3] ² + ... + d [n] ² +
> 
> ...
> 
> x [1] ^k + x [2] ^k + x [3] ^k + ... + x [n] ^k + d [1] ^k + d [2] ^k + d [3] ^k + ... + d [n] ^k

在哪里

> x [a] ^c为真当且仅当对象 a 为 int 簇 c
> 
> 如果集群 c 中的维度 b 为真，则d [b] ^c为真

由于集群对象总是更好（或至少从不有害），我们知道集群的数量是*ceil(objects 除以 M)*。为简单起见，我现在将省略变量，只写系数。

**1)**每个对象都在一个簇中

> 10...0 0...0 10...0 0...0 10...0 0...0 ... 10...0 0...0 = 1
> 
> 010...0 0...0 010...0 0...0 010...0 0...0 ... 010...0 0...0 = 1
> 
> ...
> 
> 0..01 0...0 0...01 0...0 0...01 0...0 ... 0...01 0...0 = 1

这将强制每个对象都在一个集群中。这理论上可以允许对象在几个集群中具有部分（<1）。但是因为我们正在寻找最佳解决方案，所以这不会发生。

**2）**每个簇最多有 M 个（*常量*）对象

> 11...1 0...0 0...0 0...0 0...0 0...0 ... 0...0 0...0 <= M
> 
> 0...0 0...0 11...1 0...0 0...0 0...0 ... 0...0 0...0 <= M
> 
> ...
> 
> 0...0 0...0 0...0 0...0 0...0 0...0 ... 11...1 0...0 <= M

对象的总和不大于 M。这个约束应该是明确的。

现在是棘手的部分：

**3)**集群的维度为真，当且仅当该集群中的至少一个对象将该维度设置为真时

对于每个维度和每个集群，考虑那些将该维度设置为 true 的元素（我们也可以考虑 false 元素，但它们无关紧要）。我们现在为它们中的每一个（以及每个集群）写一行

> 0..010...0 -10...0 0...0 0...0 ... 0...0 0...0 <= 0

其中 1 表示此对象（在此集群中）的此维度设置为 true，而 -1 表示该维度（在本例中为第一个）。如果对象被设置在这个集群中，那么这个集群的维度必须是 1 (1*1 -1*d <= 0)，如果没有设置，维度也可以是零 (0*1 - 1*d < = 0)。

对于第一个集群中的第二个维度，这看起来像这样：

> 0..010...0 0-10...0 0...0 0...0 ... 0...0 0...0 <= 0

对于最后一个集群和最后一个维度，像这样

> 0...0 0...0 0...0 0...0 ... 0..010..0 0...0-1 <= 0

现在我们可以简单地最小化 x [a] ^c的总和，我们就完成了。

*这可能会以更好的方式写下来，但我希望它是可以理解的。*

* * *

现在问题如下：我正在处理 70 个集群、3000 个对象和 2300 个维度。使用上述方法会产生 371000 个变量（集群 * 对象 + 集群 * 维度）和 1292095 行（将行估计为对象 + 集群 + 维度 * log(objects) * 集群）

我倾向于认为最佳解决方案是不可行的。即使您仍然可以优化此处描述的方法，类似的方法也不太可能表现得更好。所以现在我正在寻找好的近似值，欢迎任何关于如何解决这个问题的想法。

谢谢 ：）

# mysql - 我的 Sql 更新字符串日期时间

> ID：13450866
> 
> 赞同：2
> 
> 时间：2012-11-19T09:27:31.323
> 
> 标签：mysql, sql

我尝试了很多例子，但没有人能解决我的问题。以下是我尝试过的一些示例。只是我需要将字符串日期更新为可为空的日期时间列。我得到的是 000-00-00 或 NULL 列。

感谢您的帮助我是 mysql 的新手，试图理解：/

```
Update `scorelisting` 
set MaxScoreDate=DATE(STR_TO_DATE('13.05.2012 15:31:00','%d.%m.%Y %H:%M:%S')) 
where UserId=258070

Update `scorelisting` 
set MaxScoreDate=STR_TO_DATE('13.05.2012 15:31:00','%d.%m.%Y %H:%M:%S') 
where UserId=258070

Update `scorelisting` 
set MaxScoreDate=DATE('%d.%m.%Y %H:%M:%S',STR_TO_DATE('13.05.2012 15:31:00')) 
where UserId=258070

Update `scorelisting` 
set MaxScoreDate=DATE('%d.%m.%Y %H:%M:%S',strtotime('13.05.2012 15:31:00'))
where UserId=258070 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T09:29:32.520

使用*分钟*`i`_

 *```
Update `scorelisting` 
set MaxScoreDate=DATE(STR_TO_DATE('13.05.2012 15:31:00','%d.%m.%Y %H:%i:%s')) 
where UserId=258070 
```*

# sharepoint - 我在哪里可以找到 windows sharepoint service 2.0 的默认 404 错误页面

> ID：13450869
> 
> 赞同：1
> 
> 时间：2012-11-19T09:27:38.390
> 
> 标签：sharepoint

我在哪里可以找到默认的 htm 文件，映射以显示*Sharepoint 服务 2.0*中的 404 错误。目前对站点的请求遇到404错误，都会跳转到默认页面，但是这里需要注意的是，这不是我们在IIS自定义错误选项中设置的。

我这里的要求是对 404 错误页面进行少量修改。我尝试将请求映射到带有*web.config*`<customErros>`标记的自定义错误页面。但不幸的是，它仍然显示默认的 404 错误页面。当我检查错误页面的视图时，我可以看到一些评论，例如，*`res://shdocvw.dll/http_404.htm#http://www.DocURL.com/bar.htm`*

 *对此有任何想法吗？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T10:01:07.123

我不必这样做，但这个条目看起来很合理：http: [//blogs.msdn.com/b/jingmeili/archive/2007/04/08/how-to-create-your-own-custom-404 -error-page-and-handle-redirect-in-sharepoint-2007-moss.aspx](http://blogs.msdn.com/b/jingmeili/archive/2007/04/08/how-to-create-your-own-custom-404-error-page-and-handle-redirect-in-sharepoint-2007-moss.aspx)

基本上，当您安装 WSS 时，它会劫持 IIS。您仍然可以执行您期望的大部分操作，但您需要通过管理中心页面和控制 SharePoint 的许多方面的 XML 文件。*

# c# - .NET 单元测试 - 使用 MVC 的 Moq/xUnit 框架，不返回预期结果

> ID：13450870
> 
> 赞同：3
> 
> 时间：2012-11-19T09:27:42.470
> 
> 标签：c#, .net, moq, xunit.net

这是我的场景：

我正在使用一个带有存储库的 .NET MVC 4.0 项目（如您所料），并尝试将 Moq/xUnit 测试库实现到一个 .NET 单元测试项目中。

我已经做到了这一点：

**MVC 控制器**

```
private IHOLService _service;

public PolicyController(IHOLService service)
{
      _service = service;
}

public ActionResult Index()
{
     var policies = _service.GetAllPolicies(100, 0).ToList();

     return View(policies);
} 
```

**单元测试类**

```
[Fact]
 public void GetPolicies()
 {
            // Arrange
            var mockService = new Mock<IHOLService>();
            List<Policy> policy = new List<Policy>()
            mockService.Setup(cr => cr.GetAllPolicies(10, 0)).Returns(policy);
            var controller = new PolicyController(mockService.Object);

            // policy here contains 0 results.

             // Act
        var result = (ViewResult)controller.Index();

        var model = result.ViewData.Model; // equals 0.

        // Assert
        var listCategories = Assert.IsAssignableFrom<List<Policy>>(result.ViewData.Model);

         // listCategories.Count equals 0 results.

        Assert.Equal(10, listCategories.Count); // Thus always fails
  } 
```

我的问题是，当直接调用Controller时，一切正常，加载了100条策略。

但是，当我运行测试时，加载了 0 个产品，我猜测其中的模拟调用存在问题，可能与服务初始化有关。有没有人以前有过这种情况并可以提供建议？

另外，我是否正确测试我的服务，而不是我在数据层保存的存储库？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T09:57:20.220

在您的测试代码中，您初始化`policy`为一个空列表，然后告诉您的模拟服务返回这个空列表。要制定测试负载策略，您需要将一些策略实例放入您的`policy`列表中。

我会写一个看起来像这样的测试：

```
[Fact]
public void GetPolicies()
{
   // Arrange
   var mockService = new Mock<IHOLService>();
   Policy expectedPolicy = new Policy(); // substitute for the real way you construct these
   List<Policy> policy = new List<Policy>() { expectedPolicy };
   mockService.Setup(cr => cr.GetAllPolicies(10, 0)).Returns(policy);

   // Act
   var result = (ViewResult)controller.Index();

   var model = result.ViewData.Model; // equals 0.

   // Assert
   var listCategories = Assert.IsAssignableFrom<List<Policy>>(result.ViewData.Model);

   Assert.Equal(expectedPolicy, listCategories.First());        
} 
```

但这实际上取决于您尝试对代码的哪个方面进行单元测试。据我所见，此测试只是确认您正在按预期存储策略对象。您可以为依赖于 Policy 实例本身的任何逻辑编写进一步的测试。

# python - Pygame：图形输入+文本输入

> ID：13450878
> 
> 赞同：2
> 
> 时间：2012-11-19T09:28:04.363
> 
> 标签：python, input, pygame

在 Pygame 中，如何获取图形输入（例如单击退出按钮）并同时从终端窗口获取输入？

为了给您提供上下文，我的游戏有一个 GUI，但它的游戏命令是从“input()”命令中获取的。如何在处理图形的同时从命令行查找输入？

我不确定这是否可行，但如果不是，我还有哪些其他选项可以从用户那里获取文本输入？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T10:13:20.970

你不能这样做，除非你`input`在不同的线程中使用该命令，但是你必须处理同步（这可能是你想要或不想做的）。

我实现这一点的方式是创建一种游戏内控制台。当按下特殊键（例如'\'）时，您会显示控制台，而当您的应用程序处于该状态时，您的解释器按键不是作为游戏中的命令，而是......好吧，作为文本。您可以在控制台中打印它们（使用字体）。当按下一个键（例如“return”）时，您可以使控制台消失并且这些键收回它们的主要功能。

我为我的宠物项目做了这个，它很有魅力。另外，由于您使用 python 进行开发，因此您可以接受 python 指令并使用`exec`它们来执行它们并“即时”编辑您的游戏

# reporting-services - Reporting Services 将用户添加到角色

> ID：13450879
> 
> 赞同：0
> 
> 时间：2012-11-19T09:28:06.110
> 
> 标签：reporting-services, ssrs-2008

我的域帐户是此服务器的管理员，它运行 sql 2008r2 和报告服务。当我导航到“http://localhost/reports”时，我可以看到 web ui。无论如何，我单击站点设置，而不是导航到安全选项卡。在此窗口中，我转到新角色分配。我的问题在这个部分。我在这里看到的唯一角色是系统管理员和系统用户。

我搜索了一下，我看到的屏幕截图都具有报表服务器角色，如浏览器、发布者、报表生成器。

无论如何，这与安装过程有关，还是与我的域帐户权限或其他有关？

提前致谢

编辑

当我使用 sql server management studio 连接到报表服务器时，在安全选项卡中我可以看到角色和系统角色文件夹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T03:55:26.567

报表管理器中的角色是上下文相关的。您在站点设置中看到的是系统角色，它们控制对全局功能的访问（独立于内容）。浏览器、发布者等 - 这些是项目角色，它们是在报告目录项目（文件夹、报告等）的上下文中分配的，有关更多信息，请参阅文档[http://msdn.microsoft.com/en-us/library/ms156034(v= sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms156034(v=sql.105).aspx) 总结一下，使用 SSMS 就是创建或更新角色定义，或者 Report Manager 为用户/项目分配角色

# python - 打印用户组

> ID：13450887
> 
> 赞同：0
> 
> 时间：2012-11-19T09:28:45.157
> 
> 标签：python, django

我想在模板中打印有关我所有用户及其组的信息，如下所示：

```
 {% for user in users %}
        <tr>
          <td>(there should be enumerate here - 1,2,3,4 etc...)</td>
          <td>{{ user.last_name }}</td>
          <td>{{ user.first_name }}</td>
          <td>
          {% for group in user.groups %}
          {{ group }}, </td>
          {% endfor %}
        </tr>
        {% endfor %} 
```

但它不起作用：

> “ManyRelatedManager”对象不可迭代

我还有两个问题： **1.如何轻松枚举用户，如下所示：**

```
 <tr>
      <td>1</td>
      <td>Kowalski</td>
      <td>John</td>
      ...
    </tr>
    <tr>
      <td>2</td>
      <td>Smith</td>
      <td>John</td>
      ...
    </tr>
         ... 
```

**2.如何打印这样的组：**

> 组 1、组 2、组 3

反而

> group1, group2, group3, （最后一个逗号是错误的）

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T09:33:22.783

你应该改变

```
{% for group in user.groups.all %}
{{group}} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T09:53:24.363

以下代码应该可以满足您的要求：

```
{% for user in users %}
    <tr>
        <td>{{ forloop.counter }}</td>
        <td>{{ user.last_name }}</td>
        <td>{{ user.first_name }}</td>
        <td>
            {% for group in user.groups.all %}
                {{ group }}
                {% if not forloop.last %},{% endif %} 
            {% endfor %}
        </td>
    </tr>
{% endfor %} 
```

查看官方文档中的以下链接以获取有关内置 forloop 变量的更多信息：[https ://docs.djangoproject.com/en/dev/ref/templates/builtins/#for](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#for)

# encryption - 加密注册表项值

> ID：13450888
> 
> 赞同：1
> 
> 时间：2012-11-19T09:28:47.477
> 
> 标签：encryption, batch-file, registry

有人知道我是否可以使用批处理编程来加密记录密钥值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T09:34:40.760

*这取决于您所说的encrypt*是什么意思。

您可以设置权限以阻止用户获得访问权限，使用`regini`.

查看`regini /?`更多信息，或查看这篇[文章](http://support.microsoft.com/kb/245031)。

要保护您指定的密钥，您可以使用它

```
regini -m \\1stbyteit-pc C:\regpermissions.txt 
```

***注册权限.txt***

```
HKEY_CLASSES_ROOT\Software\Blackbird\main\ADMIN_PASSWORD [1 5] 
```

我曾用过`[1 5]`这个例子。许可编号列表是

```
1  - Administrators Full Access
2  - Administrators Read Access
3  - Administrators Read and Write Access
4  - Administrators Read, Write and Delete Access
5  - Creator Full Access
6  - Creator Read and Write Access
7  - World Full Access
8  - World Read Access
9  - World Read and Write Access
10 - World Read, Write and Delete Access
11 - Power Users Full Access
12 - Power Users Read and Write Access
13 - Power Users Read, Write and Delete Access
14 - System Operators Full Access
15 - System Operators Read and Write Access
16 - System Operators Read, Write and Delete Access
17 - System Full Access
18 - System Read and Write Access
19 - System Read Access
20 - Administrators Read, Write and Execute Access
21 - Interactive User Full Access
22 - Interactive User Read and Write Access
23 - Interactive User Read, Write and Delete Access 
```

# visual-studio-2012 - showModelDialog 和 javascript 调试

> ID：13450893
> 
> 赞同：0
> 
> 时间：2012-11-19T09:28:55.517
> 
> 标签：visual-studio-2012

我们使用的是 Windows 8 和 vs2012。在我们的应用程序中，我们在很多地方都使用了 showModelDialog。当我们在主窗口调试时，js调试工作正常，但是如果我们在与showModeldialog打开的模型对话框网页相关的javascript上添加任何断点会导致以下错误 -

没有可用的来源 -

当前线程当前未运行代码或无法获取调用堆栈。

继续运行并让调试器在此线程下次运行代码时停止。

步。

谢谢，

达尔吉特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T00:19:55.440

我在 Windows8 + IE10 + VS2012 上遇到了类似的错误，但今天我用 Update 2 更新了 vs2012，问题就解决了。

[VS2012 更新 2 在这里](http://www.microsoft.com/visualstudio/esn/downloads#d-visual-studio-2012-update)

# class - 汇编中的结构或类

> ID：13450894
> 
> 赞同：3
> 
> 时间：2012-11-19T09:28:57.367
> 
> 标签：class, assembly, macros, masm

我需要 c++ 中的结构或类之类的东西

例如，我需要一个具有数组和两个属性（size 和 len）的类以及一些函数，如 append 和 remove 。

如何使用宏和过程在汇编中实现这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T09:59:02.327

Tasm 支持例如。

```
struc String  // note: without 't' at the end
   size   dw 100
   len    dw 10
   data   db 0 dup(100)
ends String 
```

[Gnu 汇编器](http://linux.web.cern.ch/linux/scientific4/docs/rhel-as-en-4/struct.html)也有一个`.struct`指令。

[MASM](http://www.hep.wisc.edu/~pinghc/asm5.html)的语法是：

```
String STRUCT
    size dw 100
    len dw 10
String ENDS 
```

再次使用同一 MASM 手册：

```
ASSUME eax:PTR String
mov ecx, [eax].size,
mov edx, [eax].len
ASSUME eax:nothing
.. or ..
 mov ecx, (String PTR [eax]).size   // One can 'cast' to struct pointer 
```

也可以直接访问局部变量

```
mov eax, myStruct.len 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T15:01:09.190

这是我编写的 HID 接口例程中的示例 MASM 结构：

```
SP_DEVICE_INTERFACE_DATA struct
    CbSize      DWORD   ?
    ClassGuid   GUID    <>
    Flags       DWORD   ?
    Reserved    ULONG   ?
SP_DEVICE_INTERFACE_DATA ends 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-11-13T13:12:39.507

8086 MASM 中的结构

**句法**

```
struct_name STRUC
var_name type ?
...
struct_name ENDS 
```

**规则**

1）无法初始化（如果初始化导致垃圾值）

2）应该使用“直接寻址模式”访问（如果不导致“立即寻址模式”）

**两个数字相加的程序**

```
DATA SEGMENT
FOO STRUC
A DB ?
B DB ?       
SUM DW ?
FOO ENDS

DATA ENDS

CODE SEGMENT
ASSUME CS:CODE,DS:DATA
START:MOV AX,DATA
      MOV DS,AX

      XOR AX,AX
      MOV DS:[FOO.A],0FFH  
      MOV DS:[FOO.B],0FFH

      MOV AL,DS:[FOO.A]   ;al=ff
      ADD AL,DS:[FOO.B]   ;al=al+ff
      ADC AH,00H          ;ah=ah+carry_flag(1/0)+00
      MOV DS:[FOO.SUM],AX ;sum=ax
      HLT                 ;stop

CODE ENDS
END START 
```

# java - PDF 表单填写 iText 错误

> ID：13450900
> 
> 赞同：1
> 
> 时间：2012-11-19T09:29:15.533
> 
> 标签：java, pdf, itext

我有一个 PDF 文件，其中包含一些需要从 Java 代码填写的表单字段。为此，我使用 iText 2.1.7 库，以及此代码：

```
PdfReader reader = new PdfReader("C:\\Users\\igor\\Desktop\\test.pdf");
PdfStamper stamper = new PdfStamper(reader, new FileOutputStream("testout.pdf"), '\0', true);
AcroFields fields = stamper.getAcroFields();
fields.setField("txtFirstName", "Milan");
stamper.close(); 
```

我收到此错误消息：

```
org.w3c.dom.DOMException: INVALID_CHARACTER_ERR: An invalid or illegal XML character is specified. 
at com.sun.org.apache.xerces.internal.dom.CoreDocumentImpl.checkQName(CoreDocumentImpl.java:2582)
at com.sun.org.apache.xerces.internal.dom.ElementNSImpl.setName(ElementNSImpl.java:117)
at com.sun.org.apache.xerces.internal.dom.ElementNSImpl.<init>(ElementNSImpl.java:80)
at com.sun.org.apache.xerces.internal.dom.CoreDocumentImpl.createElementNS(CoreDocumentImpl.java:2095)
at com.lowagie.text.pdf.XfaForm$Xml2SomDatasets.insertNode(Unknown Source)
at com.lowagie.text.pdf.AcroFields.setField(Unknown Source)
at com.lowagie.text.pdf.AcroFields.setField(Unknown Source)
at proba.main(proba.java:21) 
```

PDF不是我创建的，所以我不知道文件使用什么类型的表格（如果我理解正确的话，有FDF和XFA表格）。由于 PDF 不是我创建的，我使用这个工具[http://support.persits.com/pdf/demo_formfields.asp](http://support.persits.com/pdf/demo_formfields.asp)来找出表单字段的名称，它给了我这个：

```
applicationPrepaid[0].#pageSet[0].Pagina1[0].txtFirstName[0] 
```

[Pdftk](http://www.pdflabs.com/tools/pdftk-the-pdf-toolkit/)工具只给了我`txtFirstName`字段名称。我尝试了全名，只是`txtFirstName`它不起作用。帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-28T11:03:54.593

问题似乎在于您正在使用基本页面这一事实。名称“#pageSet[0”是导致错误的原因。我认为这是导致错误的“磅”(#) 符号。

# c++ - 在 QDomElement 中保存 QColor 和 QFont？

> ID：13450909
> 
> 赞同：-1
> 
> 时间：2012-11-19T09:29:33.810
> 
> 标签：c++, qt

你如何保存像`QColor`和这样`QFont`的东西`QDomElement`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T09:46:26.110

你应该做序列化`QColor`和. 这可以帮助您[序列化 Qt 数据类型](http://doc.qt.digia.com/qt/datastreamformat.html)和[数据流](http://books.google.ru/books?id=nyxoEiGHKtoC&pg=PA241&lpg=PA241&dq=serialization%20QColor%20to%20xml%20qt&source=bl&ots=oJnuoxJdzK&sig=45yY3fBFHbvSZD_glg94_3y0zj8&hl=ru&sa=X&ei=ff-pUNHFG-rV4QSPt4HYDg&ved=0CDkQ6AEwAw#v=onepage&q=serialization%20QColor%20to%20xml%20qt&f=false)`QFont``XML`

# c# - 升级到 MVC 4 后，异步任务不起作用

> ID：13450922
> 
> 赞同：1
> 
> 时间：2012-11-19T09:30:15.607
> 
> 标签：c#, asp.net-mvc, asynchronous

我已将我的网站从 MVC 3 升级到 MVC 4 并开始遇到此错误：

```
An asynchronous operation cannot be started at this time. Asynchronous operations may only be started within an asynchronous handler or module or during certain events in the Page lifecycle. If this exception occurred while executing a Page, ensure that the Page is marked <%@ Page Async="true" %> 
```

虽然它在 MVC 3 中工作。

这段代码：

```
 Uri uri = new Uri(string.Format(
            UrlTemplate,
            ServiceId,
            HttpUtility.UrlEncode(id),
            HttpUtility.UrlEncode(org),
            HttpUtility.UrlEncode(user),
            HttpUtility.UrlEncode(activity),
            HttpUtility.UrlEncode(module)));

        using (var client = new WebClient())
        {
            client.DownloadDataTaskAsync(uri);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T10:07:09.277

正如错误消息所说：确保页面被标记`<%@ Page Async="true" %>`。这是 MVC 4 的新特性。

# php - 哪个更快，纯 HTML 或数据库中存储的 HTML？

> ID：13450924
> 
> 赞同：0
> 
> 时间：2012-11-19T09:30:20.597
> 
> 标签：php, html, mysql, dynamic, content-management-system

我想知道如果您将所有 html 放在纯文本 html 文件或 PHP 文件中，它将从数据库中加载您的 html，是否会更快。

万一客户会询问将立即发送而无需数据库交互的页面。如果两个 PHP 必须从数据库加载数据，然后将它们转换为对象，然后将其填充到 html 文件中，然后将其发送回主机。

看起来第一个选项是最快的选项。提到在这两种情况下，动态 HTML 都将由 PHP 生成，它也是通过数据库加载的。

我正在制作一个可以测试它的测试环境。我将自己对此进行测试，并在获得结果后上传结果。

据我所知，Joomla 从数据库加载整个 HTML 文档。现在，当我想自己制作 CMS 时，我希望我的网页能够快速加载。在我看来，Joomla 很烂，所以我的问题仍然存在：

哪个是更快的纯 html 或数据库中存储的 html？

我看到我的问题引起了很多情绪。我会为我的问题增加一些价值。

1.  我自己在测试吗：“是的，当然，我不是一个懒惰的人，不准备自己寻求答案”
2.  那你为什么要问：“我对你的意见感兴趣。认为我可以自己找到所有答案是愚蠢的。而且有很多有经验的程序员知道这一点，所以为什么不问”
3.  在所有情况下，HTML 都由 CMS 管理。这个想法是 cms 必须以真正混合的方式快速。所以不管你有一个小网站还是一个大网站，如果你的网站有实际的动态内容或内容在几年内都是一样的。
4.  我看到人们在评论中说没有性能问题，或者它太小了，不算数。我的问题是：“真的没关系吗？纯文本文件还是生成表单数据库”
5.  缓存？好的，我将研究一下缓存。

我做了一些测试，这就是结果。对我来说，它们很奇怪，我无法理解。我使用 google chrome 来存储 geensteil、tweakers.nl 和 stackoverflow（此页面）、google.com 的网页。然后我使用 chrome 检查工具检查页面并使用网络按钮查看我正在加载的内容。然后我复制 HTML 并将其放入 mysql myisam 并使用 PHP 加载它。我在一个excel文件中写下了结果。

这些是我的测试结果：

![这里](../Images/e6c7f8ff69bbe3af6b8872b03a0141d3.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T09:45:15.850

简要地：

**数据库**- 在服务器和数据库之间进行握手以及编写脚本需要时间。通过脚本连接、查询、返回结果、将结果渲染到页面。

然而

**平面文件**- 您直接访问该文件，就好像它已经嵌入到页面中一样，唯一的时间就是执行代码。

但是，除非您使用的是非常缓慢且可能是共享的服务器，否则您不应该真正注意到差异。在我看来，Joomla 是一个要求很高的 CMS，如果您只想放置几页，它并不是那么好。如果您追求简单的东西，请尝试阅读一些教程并自己编写一个。这应该让你开始

1.  [http://www.1stwebdesigner.com/tutorials/creating-your-own-cms-1/](http://www.1stwebdesigner.com/tutorials/creating-your-own-cms-1/)
2.  [http://css-tricks.com/php-for-beginners-building-your-first-simple-cms/](http://css-tricks.com/php-for-beginners-building-your-first-simple-cms/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T10:23:50.330

严格考虑两个相同 HTML 文件（一个来自文件系统，另一个来自数据库）的页面加载时间，静态文件总是最快的。

例如，您可以从 Nginx、Varnish 提供它，它们通常比 apache 更快。你不需要像 PHP 那样加载额外的库，不需要连接到 MySQL 的开销，也不需要等待查询时间。

*注意：带有 Apache 和 mod_php 的 PHP 开销很大。使用与 MySQL 的持久连接或连接池，php-fpm 代替 mod_php 和 APC 可以提供很大帮助，但它与提供静态文件的速度仍然相去甚远。*

如果您想要真正快速的页面加载时间。试试 nginx + memcache ( [http://wiki.nginx.org/HttpMemcachedModule](http://wiki.nginx.org/HttpMemcachedModule) )。Nginx 有能力直接从 memcache 中获取数据。将您的整个 html 放在 memcache 中，其中键是 url。这是一个示例 nginx 设置：

```
location / {
    if ($request_method = GET)
    {
                    set $memcached_key some_prefix:$request_uri;
                    memcached_pass  localhost:11211;
                    error_page 404 =200 @fallback;
    }

    default_type text/html;
    try_files $uri $uri/ /index.php$uri?$args;
}

location @fallback {
    try_files $uri $uri/ /index.php$uri?$args;
} 
```

# ios - 从 iOS 到 OSX 的 glDrawArrays

> ID：13450925
> 
> 赞同：4
> 
> 时间：2012-11-19T09:30:24.280
> 
> 标签：ios, macos, opengl

我正在尝试让我为 iOS 制作的游戏在 OSX 中运行。到目前为止，除了使用 glbound 纹理绘制一些随机生成的山丘之外，我已经能够让一切正常工作。

它在 iOS 中完美运行，但不知何故，当应用程序在 OSX 中运行时，这部分是唯一不可见的。我检查了所有坐标和颜色值，所以我很确定它与 OpenGL 有某种关系。

```
glDisable(GL_TEXTURE_2D);
glDisableClientState(GL_TEXTURE_COORD_ARRAY);
glDisableClientState(GL_COLOR_ARRAY);

glBindTexture(GL_TEXTURE_2D, _textureSprite.texture.name);
glColor4f(_terrainColor.r,_terrainColor.g,_terrainColor.b, 1);    
glVertexPointer(2, GL_FLOAT, 0, _hillVertices); 
glTexCoordPointer(2, GL_FLOAT, 0, _hillTexCoords);
glDrawArrays(GL_TRIANGLE_STRIP, 0, (GLsizei)_nHillVertices);   

glEnableClientState(GL_COLOR_ARRAY);    
glEnableClientState(GL_TEXTURE_COORD_ARRAY);
glEnable(GL_TEXTURE_2D); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T12:42:11.433

您正在禁用纹理坐标（和颜色）数组以及纹理单元，但正在绑定纹理坐标指针。

这真的是你打算做的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T14:37:45.183

显然它毕竟是被绘制的，只是作为 1/2 像素线。不知何故，有效的顶点有一些缩放，必须检查我的代码。

# javascript - 强制重新加载指令的模板

> ID：13450926
> 
> 赞同：33
> 
> 时间：2012-11-19T09:30:25.183
> 
> 标签：javascript, angularjs

我正在开发一个带有多个指令的 AngularJS 应用程序。该指令的模板存储在一个单独的 html 文件中。编辑这些模板时，我的浏览器在重新加载后未检测到任何更改，并且始终使用缓存版本。检测到对源代码的任何其他更改并导致重新加载。

我猜这个问题有点像AngularJS在加载模板时使用的$templateCache。

我在 AngularJS 1.0.2 的源代码中发现以下内容来自第 4317 行，它是 compileTemplateUrl() 的一部分：

```
$http.get(origAsyncDirective.templateUrl, {cache: $templateCache}) 
```

我想知道是否有其他人遇到过这种问题，以及是否有办法告诉 AngularJS 何时缓存，何时不缓存。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2014-06-27T21:18:01.470

我知道这是一个老问题，但这里有一个更简单的解决方法，虽然它有点小技巧，但它对我有用，并且不需要你对 $templateCache 做任何事情。

每当我遇到这个问题（我在指令模板中看到它，但也看到静态 JSON 文件）时，我都会在正在加载的 URL 的末尾添加一个查询参数，如下所示：

```
...
templateUrl: "partials/template.html?1",
... 
```

每当我对模板进行更改并且它没有重新加载时，我都会在最后增加该数字。由于浏览器不知道这对服务器是否有特殊意义，它应该尝试重新加载更改后的 URL，无论它是否被缓存。这也将确保文件在生产环境中重新加载。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-19T09:53:56.680

模板缓存存储在您的浏览器中，因为这是一个 javascript 应用程序。实际上，您可以使用开发人员工具手动提供 $cache 或阻止浏览器缓存模板（因为对于生产来说，缓存似乎不是问题）。

对于强制馈送缓存：

```
function Main($cache) {
    $cache.data['first.html'] = {value: 'First template'};
    $cache.data['second.html'] = {value: '<b>Second</b> template'};

}

Main.$inject = ['$xhr.cache'];​ 
```

看到它在这个[小提琴](http://jsfiddle.net/vojtajina/ENf5r/)中工作。

要阻止您的浏览器缓存模板（引用自此[Google Groups 帖子](https://groups.google.com/forum/#!msg/angular/wMRtJZ7R480/5bFH_ZhgdRwJ)，关于此问题，确切地说）：

> 我和我的团队遇到了同样的问题。我们在使用 Chrome 时进行开发的解决方案是打开开发者工具，然后选择右下角的齿轮。然后选择网络 - 禁用缓存。
> 
> 这解决了我们所有的部分/模板缓存问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-24T12:52:11.433

```
app.controller('someCtrl', function ($scope, $cacheFactory, templateRequest)
{   
    $scope.refreshTemplate = function ()
    {
      var tpl = "<template name>";
      $cacheFactory.get('templates').remove(tpl);
      $templateRequest(tpl).then(function ok(){
          console.log("Template "+tpl+" loaded.");
      });
     }
   ...
  } 
```

那么当你调用 refreshTemplate 函数时，你会导致重新加载

# c# - 如何将项目添加到 IList

> ID：13450928
> 
> 赞同：1
> 
> 时间：2012-11-19T09:30:38.513
> 
> 标签：c#, .net

我有一个 IList 。

```
 IList<MyClass> MyList
    {
        get;
        set;
    } 
```

我在页面加载中将 Myclass 列表复制到此

```
MyList=Listofmyclass; 
```

我想向 MyList 添加一个新项目

```
MyList.Add(NewItem); 
```

但是当我使用此代码时，我得到错误“**集合是固定大小的。** ”

如何将新项目添加到 IList？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T09:34:35.020

我假设这`MyList`是一个`MyClass[]`. 数组具有固定大小，您不能向其中添加项目。相反，如果可能的话，我会分配一个[`List<MyClass>`](http://msdn.microsoft.com/en-us/library/3wcytfd1.aspx)支持它的代替。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T09:35:21.973

可能是您有一个固定大小的 Listofmyclass 实现，换句话说：

```
IsFixedSize == true 
```

这可以防止添加/删除列表元素。

> IList 实现分为三类：只读、固定大小和可变大小。无法修改只读 IList。固定大小的 IList 不允许添加或删除元素，但允许修改现有元素。可变大小的 IList 允许添加、删除和修改元素。

看[这里](http://msdn.microsoft.com/en-us/library/system.collections.ilist.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T09:36:06.363

`IList`如果集合的实际类型支持添加，您只能将项目添加到。在你的情况下它没有。例如，如果您使用数组，则它不支持添加。

您可以使用该`ToList`方法将您的收藏变成一个列表，该列表支持添加：

```
MyList = Listofmyclass.ToList(); 
```

# php - 如何在 PHP 中实现远程协助功能？

> ID：13450930
> 
> 赞同：1
> 
> 时间：2012-11-19T09:30:41.080
> 
> 标签：php, remote-assistance

我在谷歌搜索并知道有一些工具可以提供远程协助功能（例如：Gotoassist、teamviewer）。但我想在 php 中实现类似的功能。

是否可以在php中实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T09:33:06.783

我不仅要使用 PHP，而且 PHP 是一种服务器端脚本语言。

[http://uk3.php.net/manual/en/faq.general.php#faq.general.what](http://uk3.php.net/manual/en/faq.general.php#faq.general.what)

PHP 可以负责连接会话/启动服务器中继器并帮助您的用户与您连接 - 但它不能在物理上绘制客户端屏幕图形和鼠标/键盘操作 - 您需要这样的东西：

[http://phpremotesupport.com/about/](http://phpremotesupport.com/about/)

与 VNC 查看器或其他远程查看产品（最有可能使用 C、C++、C#、.NET VB 对其进行编程）一起使用 - 发现这个可能对您有用的称为 noVNC（基于 Web）： [http： //kanaka.github.com/noVNC/](http://kanaka.github.com/noVNC/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T09:36:38.793

这样的事情可能会帮助你：

[http://phpremotesupport.com/](http://phpremotesupport.com/)

# plone - 为什么我将鸡蛋上传到 pypi 时文件丢失？

> ID：13450931
> 
> 赞同：0
> 
> 时间：2012-11-19T09:30:57.993
> 
> 标签：plone, setuptools, distutils, setup.py, pypi

按照[http://plone.org/documentation/kb/how-to-upload-your-package-to-plone.org/distuttils-commands-and-.pypirc](http://plone.org/documentation/kb/how-to-upload-your-package-to-plone.org/distuttils-commands-and-.pypirc)上的说明，我将鸡蛋上传到 pypi (adi. workingcopyflag)。创建的 egg 缺少一些文件（configuration.zcml 和配置文件）。

为什么这些文件丢失/我该如何解决？

编辑：Brandon Rhodes 回答[如何将原始 Python 包上传到 PyPI？](https://stackoverflow.com/questions/778980/how-to-upload-a-pristine-python-package-to-pypi)帮助。

添加 MANIFEST.in 是解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T22:31:16.553

我建议您使用 zest.releaser 来自动化发布过程 - 减少人为错误：

[http://opensourcehacker.com/2012/08/14/high-quality-automated-package-releases-for-python-with-zest-releaser/](http://opensourcehacker.com/2012/08/14/high-quality-automated-package-releases-for-python-with-zest-releaser/)

例如，它会警告您缺少 MANIFEST.in。

（免责声明：我的博客文章）

# c# - 无法从配置文件中读取配置部分

> ID：13450937
> 
> 赞同：0
> 
> 时间：2012-11-19T09:31:18.113
> 
> 标签：c#, configuration-files

我正在读取配置文件以获取`baseAddress`位于以下位置的值：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>...

<system.serviceModel>
<services>
  <service name="nameX" behaviorConfiguration="behaviorConfigurationX">
    <host>
      <baseAddresses>
        <add baseAddress="http://xxx"/>
      </baseAddresses>
    </host>
  </service>
</services>

...</configuration> 
```

我能够找到`services`配置部分，但它下面没有服务部分。这是快速观看：![在此处输入图像描述](../Images/ec072641b2d060c4e85e3c3648e08831.png)

如何从此配置文件中获取**[http://xxx ？](http://xxx)**

编辑：这是我如何加载配置文件：

```
 string folderPath = Environment.GetFolderPath(Environment.SpecialFolder.ProgramFiles) + "\\SoftOne";
            string[] directories = Directory.GetDirectories(folderPath, "*" + DisplayName + "*");

            if (directories.Length > 0)
            {
                string[] configFiles = Directory.GetFiles(directories[0], "*.config");

                if (configFiles.Length > 0)
                {
                    System.Configuration.Configuration configuration = System.Configuration.ConfigurationManager.OpenExeConfiguration(configFiles[0]);
                }
            } 
```

# magento - Magento Google Analytics 内容实验

> ID：13450947
> 
> 赞同：1
> 
> 时间：2012-11-19T09:31:57.263
> 
> 标签：magento, testing, google-analytics, google-experiments

最简单的实现方法是`Google Analytics Content Experiment`什么`Magento CE`？

我想测试主页内容。

添加`Testing Code`到`CMS`页面不起作用。测试标签在分析标签之后。

Magento 是否支持`Testing Tag`通过管理界面添加？还是有一种简单的方法可以通过添加标签`XML Layout Update`？

是否可以使用`Google Tag Manager`添加我们需要的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T18:52:48.793

标签可以在 body 之后安装，例如：

将以下代码添加到布局文件夹中的 local.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<!--
Last loaded layout file
-->
<layout>
  <default>
    <reference name="after_body_start">
      <block type="cms/block" name="tags-first-in-body" before="-">
        <action method="setBlockId"><block_id>tags-first-in-body</block_id></action>
      </block>
    </reference>
  </default>
</layout> 
```

并添加一个名为 tags-first-in-body 的静态块。将代码插入此块。

# wordpress - 将 wordpress 插件作为独立程序或应用程序运行的步骤。（潜在的独立应用）

> ID：13450951
> 
> 赞同：0
> 
> 时间：2012-11-19T09:32:11.310
> 
> 标签：wordpress

我想让这个`Wordpress`插件[`Visual Form Builder`](http://wordpress.org/extend/plugins/visual-form-builder/screenshots/)使它作为一个独立的程序或应用程序在 wordpress 之外工作。

任何人都想在 wordpress 之外实现这一点。这个插件不太依赖于 wordpress 数据。因为我有类似的要求，这个插件正在做什么。我如何在 wordpress 之外使用这个插件。

# java - Spring Batch：如何监控当前正在运行的作业并在 jsp 页面上显示进度

> ID：13450952
> 
> 赞同：2
> 
> 时间：2012-11-19T09:32:16.187
> 
> 标签：java, spring-mvc, batch-processing, spring-batch

我想知道如何监控我当前正在运行的批处理作业的状态。我的作业基本上是处理带有一些默认步骤的文件夹，所以我想逐步向用户显示进度。我正在使用[Tasklets](http://static.springsource.org/spring-batch/apidocs/org/springframework/batch/core/step/tasklet/Tasklet.html)和**DB Job Repository**。用一些解释实现这一点的示例代码将更有帮助。
谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T09:58:16.840

如果您想开发自己的监控应用程序/网页，您可能需要查看`JobExplorer`or`JobOperator`界面。它为您提供了获取 JobExecutions 的方法，并且在 JobExecutions 中，您可以获取 StepExecutions。所有这些都为您提供了工作的状态和内部的各个步骤。

* * *

编辑以回复评论：

对于引用的进度信息，它不是存储在 Spring Batch 中的东西。但是，这两个界面确实可以帮助您。首先将进度信息存储在步骤执行上下文中。然后确保你的 tasklet 没有被实现为同步任务。你必须返回 CONTINUABLE （如果我混淆了这个术语，请原谅我，我以前使用 Spring Batch 已经有一段时间了），这样你的 tasklet 将被 Spring Batch 连续调用。（这可以通过多种方式完成，或者您将工作分成几部分，并且每次调用 tasklet execute()，您只处理其中一个部分并仅在所有部分完成时返回 FINISHED，或者您可以生成另一个线程做这项工作，你的 tasklet 只是监控进度等）。

通过这样做，您将使用进度信息不断更新步骤执行上下文，因此您可以使用 JobExplorer 和 JobOperator 获取 Job Execution -> Step Execution -> Step's Execution Context 以用于进度报告。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-27T06:29:07.087

你应该看看 spring 批处理管理应用程序。

[春季批处理管理员](http://static.springsource.org/spring-batch-admin/getting-started.html)

直接引用：这是一个常规的战争文件。部署后，您可以使用 Web 浏览器（例如 localhost:8080/spring-batch-admin-sample）浏览并查看启动作业和检查作业执行的功能。

当然，通过一些修改，您可以实现自己的要求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-26T22:11:33.987

Spring Batch 4.2 版带有基于 Micrometer 的批处理监控和指标捕获。您可以尝试利用它们。下表列出了一些指标 [![春季批处理指标](../Images/2963e3a2c701cf807449a9bc564978bc.png)](https://i.stack.imgur.com/sPHOM.png)

Spring Batch 还使您能够创建自己的指标。您可以在此处查看更多详细信息[https://docs.spring.io/spring-batch/4.2.x/reference/html/monitoring-and-metrics.html#custom-metrics](https://docs.spring.io/spring-batch/4.2.x/reference/html/monitoring-and-metrics.html#custom-metrics)

# java - 使用反射在抽象类中创建一个实例

> ID：13450953
> 
> 赞同：5
> 
> 时间：2012-11-19T09:32:18.817
> 
> 标签：java, reflection, abstract-class

是否可以使用反射在抽象祖先类中创建派生类的实例让我们说：

```
abstract class Base {

public Base createInstance(){
  //using reflection
    Class<?> c = this.getClass();
    Constructor<?> ctor = c.getConstructor();
    return ((Base) ctor.newInstance());
}

}//end Base

class Derived extends Base {

 main(){

new Derived().createInstance()

 } 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T09:39:52.107

你可以这样做

```
public class Derived extends Base {
    public static void main(String ... args) {
        System.out.println(new Derived().createInstance());
    }
}

abstract class Base {
    public Base createInstance() {
        //using reflection
        try {
            return getClass().asSubclass(Base.class).newInstance();
        } catch (Exception e) {
            throw new AssertionError(e);
        }
    }
} 
```

印刷

```
Derived@55fe910c 
```

更常见的模式是使用 Cloneable

```
public class Derived extends Base {
    public static void main(String ... args) throws CloneNotSupportedException {
        System.out.println(new Derived().clone());
    }
}

abstract class Base implements Cloneable {
    @Override
    public Object clone() throws CloneNotSupportedException {
        return super.clone();
    }
} 
```

印刷

```
Derived@8071a97 
```

但是，应避免使用其中任何一个。通常还有另一种方法可以做你需要的事情，这样 base 就不会隐式地依赖于派生。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T09:42:23.767

证明它有效很容易：

```
abstract class Base {
  public Base createInstance() throws Exception {
    return getClass().newInstance();
  }
}

public class Derived extends Base {
  public static void main(String[] args) throws Exception {
    System.out.println(new Derived().createInstance().getClass());
  }
} 
```

印刷

```
class test.Derived 
```

你应该问自己两次为什么需要它，以及它是否真的是解决问题的好方法。如果您需要克隆，请考虑该`clone`机制，它的作用基本相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T09:37:06.963

您可以使用`Class.forName()`and`Class.newInstance()`创建任何类。但是没有办法轻松地识别一个类的子类。有关执行此操作的技术，请参阅[此 JavaWorld 提示](http://www.javaworld.com/javatips/jw-javatip113.html)。

但是，我认为，真正的问题是您最终要达到的目标是什么，以及使用传统技术是否可以更轻松地完成。

# liferay - 为可实例化的 Portlet 动态创建 actionURL

> ID：13450954
> 
> 赞同：2
> 
> 时间：2012-11-19T09:32:30.063
> 
> 标签：liferay, liferay-6

我一直致力于在`MVCPortlet`控制器中以编程方式创建 Liferay actionUrls。到目前为止，我已经成功地创建了一个指向另一个 portlet 操作的工作链接，`Layout`使用以下代码放置在另一个页面中（用 Liferay 术语）：

```
LiferayPortletResponse rr = PortalUtil.getLiferayPortletResponse( response);

Layout layout = ... // I manage to get the correct one using  LayoutLocalServiceUtil

LiferayPortletURL ddUrl = rr.createActionURL("portlet_WAR_name") ;

if(Validator.isNotNull(layout)){
    // Setting info to the other portlet
    ddUrl.setPlid(layout.getPlid());

    // Setting the action Name
    ddUrl.setParameter(ActionRequest.ACTION_NAME, "actionFunctionNameOf_MVCPortlet");

    // adding any action-related params
    ddUrl.setParameter("someParam1", ...) );
    ddUrl.setParameter("someParam2", ...) );

    return ddUrl;
} 
```

我的问题是这不适用于可**实例**化的Portlet。

我可以添加一些参数来使这个 url 链接到`-any-`目标 Portlet 的实例吗？

还是我需要知道`instanceId`目标 Portlet 的名称？如果是这样，我该如何将其设置为`LiferayPortletURL`实例？

提前谢谢，任何帮助将不胜感激

**PS：我正在使用 Liferay 6.1 GA1**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T22:50:16.540

您可以将 portletid 设置为可**实例**化的portlet id：

```
String portletId = (String) request.getAttribute(WebKeys.PORTLET_ID);
ddUrl.setPortletId(portletId); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T10:22:11.813

好的，我找到了方法，所以我分享：

```
LiferayPortletResponse rr = PortalUtil.getLiferayPortletResponse( response);

// I get the correct layout using  LayoutLocalServiceUtil
Layout layout = ... ;

LiferayPortletURL ddUrl = rr.createActionURL("portlet_WAR_name");

if(layout != null) {

    // Setting info to the other portlet
    ddUrl.setPlid(layout.getPlid());

    // Setting the action Name
    ddUrl.setParameter(ActionRequest.ACTION_NAME, "actionFunctionNameOf_MVCPortlet");

    //Finding the full portletId of the instanceable Portlet
    LayoutTypePortlet layoutTypePortlet =
        LayoutTypePortletFactoryUtil.create(
            LayoutLocalServiceUtil.getFriendlyURLLayout(
                themeDisplay.getLayout().getGroupId(), 
                false, "page_friendly_url")
        );

    List<String> portletIdList = layoutTypePortlet.getPortletIds();

    for(String prtId : portletIdList){
        if(prtId.contains("portlet_WAR_name")){
            ddUrl.setPortletId(prtId);
        }
    }

    // adding any action-related params
    ddUrl.setParameter("someParam1", ...) );
    ddUrl.setParameter("someParam2", ...) );

    return ddUrl;
} 
```

感谢 Tony Rad的[提示](https://stackoverflow.com/a/13483571/468763 "托尼拉德对这个问题的回答")。`setPortletId`

我还发现[这个答案](https://stackoverflow.com/questions/11827415/how-to-find-portlets-added-on-a-particular-page-in-liferay "如何查找添加到特定页面的 portlet")非常有用。

# java - 二叉搜索树中的节点删除

> ID：13450957
> 
> 赞同：0
> 
> 时间：2012-11-19T09:32:42.137
> 
> 标签：java, binary-search-tree, nodes

我正在尝试从存储字典之类的单词的二进制搜索树中删除一个节点。DictEntry 元素包含单词、定义和将显示的定义类型的数字（字符串、图像等）。找不到单词时会引发 DictionaryException。

用户必须能够通过仅在方法中输入单词来删除条目。这些是用于删除的以下方法；

```
public void remove(String word) throws DictionaryException {
    if (root!=null) {
        //checks if the word is equal to the entrie's word
        if (word.equals(root.getElement().word()))
            root = replacement(root);
        else {
            // parent is the node above current
            BinaryTreeNode<DictEntry> current, parent = root;
            boolean found = false;
            // if lexicographically smaller than the root's word
            if (word.compareTo(root.getElement().word()) < 0)
                current = root.getLeft();
            // if lexicographically higher than the root's word
            else
                current = root.getRight();
            while (current != null && !found) {
                if (word.equals(current.getElement().word())) {
                    found = true;
                    if (current == current.getLeft())
                        parent.setLeft(replacement(current));
                    else
                        parent.setRight(replacement(current));
                } else {
                    parent = current;

                    if (word.compareToIgnoreCase(current.getElement()
                            .word()) < 0)
                        current = current.getLeft();
                    else
                        current = current.getRight();
                }// end if else
            }// end while
            if (!found)
                throw new DictionaryException("The entry was not found");
        }
    }
}

private BinaryTreeNode<DictEntry> replacement(BinaryTreeNode<DictEntry> node) {
    BinaryTreeNode<DictEntry> found = null;
    // check if both sides are empty
    if (node.getLeft() == null && node.getRight() == null)
        found = null;
    else if (node.getLeft() != null && node.getRight() == null)
        found = node.getLeft();
    else if (node.getLeft() == null && node.getRight() != null)
        found = node.getRight();
    // if both sides have an entry
    else {
        //helper positions
        BinaryTreeNode<DictEntry> current = node.getRight();
        BinaryTreeNode<DictEntry> parent = node;

        //moving positions
        while (current.getLeft() != null) {
            parent = current;
            current = current.getLeft();
        }// end while

        if (node.getRight() == current)
            current.setLeft(node.getLeft());
        else {
            parent.setLeft(current.getRight());
            current.setRight(node.getRight());
            current.setLeft(node.getLeft());
        }
        found = current;
    }// end if else
    return found;
} 
```

我的问题是，每当我尝试像这样测试它时，都不会删除该节点，其中字典代表 BinarySearchTree；

```
// Insert and remove a word
try {
    dictionary.insert("course","A series of talks or lessons",1);
    dictionary.remove("course");
    res = dictionary.findWord("course");
    if (res == "") {System.out.println("Remove test passed");}
    else {System.out.println("Remove test failed");}
}
catch(DictionaryException e) {
    System.out.println("Remove test 4 failed");
} 
```

我已经尝试使用我的插入方法查找和使用，但我什么也没得到，所以我假设问题出在我的删除逻辑中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T09:41:22.787

乍一看，替换方法是使用 == 运算符进行节点比较。这仅比较节点的内存地址。如果要根据节点的值进行比较，则需要使用 .equals() 方法。

# c# - 克隆自定义 UserControl C# WPF - Easiet Way (Shallow Copy)

> ID：13450959
> 
> 赞同：-1
> 
> 时间：2012-11-19T09:32:49.283
> 
> 标签：c#, wpf, clone

嗨，我想克隆（浅克隆）自定义 UserControl，例如：

```
ucButton uc;
ucButton uc2;
uc = uc2; 
```

当我这样做时，编译器希望我也从画布中删除旧实例（uc）。

使用：

```
Canvas1.Children.Add(uc)

Canvas2.Children.Add(uc2) 
```

有什么建议么？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T09:55:38.283

可悲的是，我不认为有一种简单的方法可以实现这一点：如果您的用户控件包含其他引用类型，它们应该通用，还是应该被复制？

此外，您将无法获得 UserControl 上附加依赖项属性的完整列表。

Personnaly，我会将我的用户控件封装在我的 xaml 资源中的 DataTemplate 中，并根据需要从[DataTemplate](http://msdn.microsoft.com/fr-fr/library/vstudio/system.windows.datatemplate.aspx)创建用户控件的新实例。

```
<DataTemplate x:Key="ucButton">
  <myControls:ucButton ... />
</DataTemplate> 
```

在您的代码中，从资源中获取模板，然后[加载内容](http://msdn.microsoft.com/fr-fr/library/vstudio/system.windows.frameworktemplate.loadcontent.aspx)。

```
var uc = template.LoadContent() as UserControl;
var uc2 = template.LoadContent() as UserControl; 
```

我知道这不完全是你想要做的。如果不能从 xaml 实例化，我的解决方案将不起作用。

# html - IE 7/8 中文本输入的文本缩进替代

> ID：13450963
> 
> 赞同：0
> 
> 时间：2012-11-19T09:32:56.777
> 
> 标签：html, css, internet-explorer-8, cross-browser, internet-explorer-7

这是我的 jsFiddle 示例：

[http://jsfiddle.net/jsplashindia/LYUA5/1/](http://jsfiddle.net/jsplashindia/LYUA5/1/)

这是我的 HTML 和 CSS：

```
<html>
<head>
<style type='text/css'>
    .testStyle {
    text-indent:30px;            
}
</style>

</head>
<body>

    <input type="text" class="testStyle">

</body>
</html> 
```

基本上我需要在我的文本输入中获得一个缩进，如下所示：

![这是预期的行为](../Images/b8895ec5ccdd11326b1047d67cbad09b.png)

但是，在 IE 7 和 IE 8 中，我得到以下行为：

![在 IE7/8 中观察到的行为](../Images/7b5b623d7e3484bd10a6ea3980da9343.png)

我需要去掉文本输入字段的前导空间。是否有使用 text-indext 的替代方法，以便在 IE7/8 和所有其他浏览器中获得预期的行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T09:38:58.960

添加`float:left`

```
.testStyle {
    text-indent:30px;
    float:left      
} 
```

**[演示](http://jsfiddle.net/LYUA5/2/)**

***或者***

采用`padding-left`

**[演示 2](http://jsfiddle.net/LYUA5/3/)**

# wordpress - 如何将 wordpress postmeta 表中的值放入 foreach 循环

> ID：13450965
> 
> 赞同：0
> 
> 时间：2012-11-19T09:32:57.113
> 
> 标签：wordpress

我正在尝试将 postmeta 键中的所有值放入 foreach 循环中，

我已经尝试过 get_post_ meta 和 get_post_custom 但这些似乎只能基于帖子 Id 工作。

还尝试了 get_post_custom_values 但这似乎只是返回当前帖子..？

我只想要某个 meta_key 的所有值。我正在尝试使用值填充表单下拉列表...？

有任何想法吗...

这就是我现在拥有的；

```
$results = $wpdb->get_results( "SELECT $wpdb->postmeta.meta_value WHERE $wpdb- >
postmeta.meta_key = 'geo_short_address'" );
$options = array();
foreach ($results as $result) {
$options[$result->meta_value] = ucwords( $meta_value ); 
```

}

```
?>
             </select> 
        <select name="country" id="country">
        <option value="selected">Select a location</option>
        <?php

        foreach ($options as $key => $value) {
            ?>
        <?php $retaincount = $value  ?>
                       <option <?php if ($_GET['country'] == $retaincount ) { ?
         >selected="<?php echo $value; ?>" <?php }; ?>value="<?php echo $value ?>">
         <?  php echo $value?></option>

            <?php

    }
    ?>
             </select> 
    <p>
    <input type="submit" value="<?php _e('Filter', 'appthemes'); ?>"
            class="submit" />
    <input type="hidden" name="action" value="Filter" />

    </p>
    <div class="clear"></div>
        </form>
        <?php endif;

        }

        Thanks 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T09:51:46.117

我很确定您将需要一个自定义的 MySQL 查询。

这是应该起作用的东西：

```
global $wpdb;

$results = $wpdb->get_results( "SELECT $wpdb->postmeta.meta_value FROM $wpdb->postmeta WHERE 1=1 AND $wpdb->postmeta.meta_key = 'geo_short_address'" );
$options = array();
foreach ($results as $result) {
    $options[$result->meta_value] = ucwords( $result->meta_value );
}

echo '<select class="field" name="country">';
foreach ($options as $key => $value) {
    echo "<option value='$key'" . ( $_GET['country'] == $value ? " selected='selected'" : "" ) . ">$value</option>";
}
'</select>'; 
```

只需替换`'custom_key'`为您的自定义字段名称，这应该会为您提供该自定义字段的所有值。

我现在无法测试代码，所以如果它不起作用，请随时告诉我。

# css - 简单的 CSS3 动画在 Webkit 中不起作用

> ID：13450972
> 
> 赞同：0
> 
> 时间：2012-11-19T09:33:22.627
> 
> 标签：css, animation, webkit

在这里建立一个网站：http: [//chooseavirb.com/strat/](http://chooseavirb.com/strat/)

出于某种原因，webkit - chrome, safari -animations 没有触发：

```
@-webkit-keyframes slideright{
0% {transform: translate(0px, 0px)}
20% {transform: translate(00px,0px)}
25% {transform: translate(150px, 0px)}
45% {transform: translate(150px,0px)}
50% {transform: translate(300px,0px)}
70% {transform: translate(300px,0px)}
75% {transform: translate(150px,0px)}
95% {transform: translate(150px,0px)}
100% {transform: translate(0px,0px)}
}

#SliderNine img
{display: inline-block;
 animation: slideright 30s infinite;
-moz-animation: slideright 30s infinite;
-webkit-animation: slideright 30s infinite;   
-ms-animation: slideright 30s infinite;     
} 
```

任何有专业知识的人都可以说这可能会发生吗？它在 Firefox 上运行良好。-

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T09:41:50.150

请检查以下链接。

[http://css-tricks.com/snippets/css/keyframe-animation-syntax/](http://css-tricks.com/snippets/css/keyframe-animation-syntax/)

也使用特定浏览器相关的变换动画如下

例子：-

```
-webkit-transform:  translate(0px, 0px);

-o-transform: translate(0px, 0px); 

-moz-transform: translate(0px, 0px); 
```

它可能会为美国创造魔法......！

这可能会有所帮助

[http://www.w3schools.com/css3/css3_2dtransforms.asp](http://www.w3schools.com/css3/css3_2dtransforms.asp)

# python - 在django中生成pdf

> ID：13450977
> 
> 赞同：0
> 
> 时间：2012-11-19T09:33:49.973
> 
> 标签：python, django, pdf

我正在做一个网上商店，需要生成一个带有订单的 pdf。我一直在寻找，但它没有说明生成它的最佳选择是什么。

关于从 html 生成 pdf 的库的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T09:45:33.070

[xhtml2pdf](http://www.xhtml2pdf.com/)工作得很好。但是，它不支持 100% CSS。

你可以在一些工作之后找到 HTML 和 CSS 的工作组合，注意你应该使用表格进行布局。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T09:47:31.040

我有比萨[http://pypi.python.org/pypi/pisa](http://pypi.python.org/pypi/pisa)的经验，它适用于从 html 创建 pdf。如果您使用摊铺机，只需添加到您的 requirements.txt：pisa reportlab html5lib

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T18:22:42.037

ReportLab 是解决您问题的好方法。

[http://www.reportlab.com/software/opensource/rl-toolkit/download/](http://www.reportlab.com/software/opensource/rl-toolkit/download/)

```
from reportlab.pdfgen import canvas 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T09:48:02.963

我注意到两个选项，它们可能会有所帮助：

第一个是官方 Django 文档本身，这里是链接 [https://docs.djangoproject.com/en/dev/howto/outputting-pdf/](https://docs.djangoproject.com/en/dev/howto/outputting-pdf/)

第二个来自谷歌代码（Django-report）请看一下，这里是链接。 [http://code.google.com/p/django-report/](http://code.google.com/p/django-report/)

# iphone - 屏蔽背景图像

> ID：13450980
> 
> 赞同：0
> 
> 时间：2012-11-19T09:34:06.847
> 
> 标签：iphone, cocoa-touch, uislider, cgimage

我有一个`BackGroundImage`是“ `image1.png`”和另一个图像“ `image2.png`”。我有一个`UIslider`......当我移动滑块时，背景图像必须消失......如何实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T09:37:35.013

设置 alpha 为 0，用于隐藏 imageView，并设置消失效果。Alpha 的最大值为 1，最小值为 0。如果将滑块的最大值设置为 1，滑块的最小值设置为 0，则可以根据需要使用以下方法。此方法需要设置为滑块值变化的动作。

```
- (void)sliderChange:(UISlider *)sender
{
   yourImageView.alpha = sender.value;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T09:52:00.417

CGImageCreateWithMask 接受两个参数 original image 和 imageMask 并返回蒙版图像。我们将蒙版图像包装在 UIImage 对象中并释放蒙版图像引用。如果我们想在我们的输出/蒙版图像中绘制未绘制区域，那么我们可以在填充了背景颜色的位图上下文中绘制蒙版图像。

有关更多详细信息，请参阅此链接，也许您可​​以从本教程中获得一些想法。

[理解图像反射掩蔽](http://intellidzine.blogspot.in/2011/06/understanding-image-reflection-masking.html)

之后，当您想要`setAlpha`使用 BackgroundImage 时，请使用以下内容进行设置。线..

```
yourMaskingImage.alpha = yourSLider.value; 
```

# javascript - 在特定的 html 页面通过 ID 获取元素

> ID：13450981
> 
> 赞同：0
> 
> 时间：2012-11-19T09:34:06.843
> 
> 标签：javascript, jquery, dom

我有相同的元素：

```
<div id="demo_div" style="display:none;"></div> 
```

在**page1.html**和**page2.html**上。

JavaScript 可以访问 page1.html 和 page2.html。当我访问元素时

```
$("#demo_div") 
```

我得到了 DOM 中的*第一个*元素（page1.html 和 page2.html 是 index.html 的选项卡，因此其中一个是隐藏的，但始终存在于 DOM 中）。

是否可以从特定页面获取元素？

**更新 1**：

整个 HTML：

```
<html>
<html lang="us">
<head>
    <meta charset="utf-8">
    <title>Test Index Page</title>

    <META HTTP-EQUIV="CACHE-CONTROL" CONTENT="NO-CACHE">
    <META HTTP-EQUIV="PRAGMA" CONTENT="NO-CACHE">
    <META HTTP-EQUIV="Expires" CONTENT="-1">

    <link href="css/styles.css" rel="stylesheet">
    <script src="js/jquery-1.8.2.js"></script>
    <script src="js/jquery-ui-1.9.0.min.js"></script>

    <script src="modules/page1.js?version=5"></script>
    <script src="modules/page2.js?version=5"></script>
</head>
<body>
<div id="wrap">
    <div id="content" style="display:none;">
    <div id="main_tabs">
        <ul id="tabs_header">
            <li><a href="#Home">Home</a></li>
            <li><a href="modules/page1.html?version=3">Page1</a></li>
            <li><a href="modules/page2.html?version=14">Page2</a></li>
        </ul>
    </div>
    </div>
</div>
</body>
</html> 
```

**更新 2**：

我不能有唯一的 ID，因为我`.load`用于加载 page2.html 作为 page1.html 的隐藏部分，因此我将有重复的元素。

**更新 3**：

我从链接到 index.html 的文件中运行 JavaScript，`.js`因此它可以访问其兄弟姐妹（page1.html 和 page2.html）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T10:20:30.760

以防有人错过。当您知道正在加载哪个页面时，可以使用动态添加的类来解决该问题。只需在 div 中添加一个类：

```
$('myDiv').addClass('page' + thePageNr); 
```

尽管如此：删除重复的 ID，它们会产生意外的行为 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T10:03:55.243

Dom 元素 ID 应该是唯一的！但在你的情况下，它不是。

如果您仍然喜欢使用相同的 id，请尝试使用下面的[**属性选择器**](http://api.jquery.com/category/selectors/attribute-selectors/)，但通常没有人会推荐使用相同的 id

```
 $("div[id='demo_div']") 
```

# android - 设备管理 Android 应用实施

> ID：13450986
> 
> 赞同：2
> 
> 时间：2012-11-19T09:34:24.740
> 
> 标签：android, device-admin

我只是想分享我制作设备管理应用程序的代码，并在最后寻求一些帮助。我已经提到了这个链接：

[设备管理员](http://developer.android.com/guide/topics/admin/device-admin.html)。

这是清单代码：

# 您必须以下列方式声明广播接收器，属性是不言自明的。

```
<receiver
        android:name=".DeviceAdmin"
        android:description="@string/data"
        android:label="Mobile Security"
        android:permission="android.permission.BIND_DEVICE_ADMIN" >
        <meta-data
            android:name="android.app.device_admin"
            android:resource="@xml/policies" />

        <intent-filter android:priority="1000">
            <action android:name="android.app.action.DEVICE_ADMIN_ENABLED" />
        </intent-filter>
</receiver> 
```

# android:resource="@xml/policies" 这个 xml 文件包含要使用的策略列表。

现在您需要像这样声明一个 DeviceAdminReceiver 的子类，用于向设备的设备管理员注册您的应用程序：

```
public class DeviceAdmin extends DeviceAdminReceiver{

@Override
public void onDisabled(Context context, Intent intent) {
    // TODO Auto-generated method stub
    super.onDisabled(context, intent);
    Toast.makeText(context, "App is UnLocked and can be uninstalled.",              Toast.LENGTH_SHORT).show();
}

@Override
public void onEnabled(Context context, Intent intent) {
    // TODO Auto-generated method stub
    super.onEnabled(context, intent);
    Toast.makeText(context, "App is Locked and cannot be uninstalled.",        Toast.LENGTH_SHORT).show();
} 
```

}

# 两种方法 onDesable() 和 onEnable() 仅用于在用户激活或停用管理时向用户发送消息。

现在我正在处理锁定和解锁应用程序的活动：

```
btnLock.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            ComponentName component = new ComponentName(StartActivity.this, DeviceAdmin.class);
            Intent intent = new Intent(DevicePolicyManager.ACTION_ADD_DEVICE_ADMIN);
            intent.putExtra(DevicePolicyManager.EXTRA_DEVICE_ADMIN, component);
            intent.putExtra(DevicePolicyManager.EXTRA_ADD_EXPLANATION,"Lock this app from being uninstalled");
            startActivity(intent);
            btnLock.setEnabled(false);
            btnUnlock.setEnabled(true);
        }
    });

    btnUnlock.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            DevicePolicyManager dPm = (DevicePolicyManager)getSystemService(Context.DEVICE_POLICY_SERVICE);
            ComponentName component = new ComponentName(StartActivity.this, DeviceAdmin.class);
            dPm.removeActiveAdmin(component);
            btnUnlock.setEnabled(false);
            btnLock.setEnabled(true);
        }
    }); 
```

我想设置一个密码，每当我的应用程序从设备管理员停用时都必须询问该密码。

# c# - 创建实时 Windows 7 小工具

> ID：13450990
> 
> 赞同：0
> 
> 时间：2012-11-19T09:34:35.253
> 
> 标签：c#, .net, windows-7

我做了很多谷歌搜索，但找不到正确的答案。我想为 Windows 7 创建小工具，它将显示来自数据库的一些实时数据。（将创建 Web 服务）

我应该如何进行此操作。我创建了与 web 服务（使用 jquery）对话并以表格格式显示数据的 html 文件。

我还需要做什么？它将如何安装在客户端机器上？如何部署它？我应该使用哪种技术，以便它始终显示实时更新的数据。我会对 net c# 感到满意。

请帮我解决这个问题。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T21:01:11.667

[http://msdn.microsoft.com/en-us/library/bb456468(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/bb456468(v=vs.85).aspx)

上面的链接将帮助您创建您的第一个小工具。它基本上需要一个 html 和一个 xml 文件，位于一个名为 foldername.gadget 的文件夹中。此文件夹位于 Program Files\Windows Sidebar\Gadgets

# c++ - 为掩码应用位向量

> ID：13450993
> 
> 赞同：-1
> 
> 时间：2012-11-19T09:34:48.380
> 
> 标签：c++, bitmask, uint64

我想做一个简单的位掩码操作。让我们说

```
uint64_t a = 348659235483; 
```

假设这个数字被转换为二进制，我想提取从第 6 位到第 12 位的值（0 是右端的 MSB）。最小的代码是什么？

二进制是

```
10100010010110110110101101/110101/0011011 
```

所以我想保存`110101`哪个是`53`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T09:38:14.667

怎么样

```
uint64_t a = 348659235483;
uint64_t result = (a & 0x0fe0) >> 6; 
```

# jquery - Firefox 和 Chrome 中的 jQuery BlockUI

> ID：13450997
> 
> 赞同：1
> 
> 时间：2012-11-19T09:34:59.120
> 
> 标签：jquery, firefox, google-chrome, jquery-blockui

jQuery BlockUI 在 IE 上运行得很好，所以这对我来说绝对是个问题：D

好吧，我想要一个等待默认消息的 gif：

```
var message = "<img src='/img/ajax-loader2.gif' width='32' height='32'>";
$.blockUI.defaults.message = message; 
```

这种类型在 IE 中工作并在 FF 中中断（显示无法加载的图像），而 Chrome 不显示任何内容。:(

有人想强制展示这个漂亮的 gif 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T20:21:24.190

我使用此代码并且适用于 chrome 和 firefox：

```
var msg = "<img src='/img/ajax-loader2.png' width='32' height='32'>";
$.blockUI({message: msg}); 
```

如果您想取消阻止它，请使用：

```
$.unblockUI(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-27T11:53:17.713

试试这个：方法1：

```
<script type="text/javascript">
    $(document).ajaxStop($.unblockUI);
    $(document).ready( () {
    $.blockUI({ message: '<img src="/img/ajax-loader2.gif" />'}); 
   });
</script> 
```

方法2：希望这个链接对你有帮助， [点击这里](https://stackoverflow.com/questions/17424828/chrome-firefox-doesnt-display-images-in-objects-shown-in-beforeunload-event)

# xml-parsing - 从 yr.no 的 API 获取另一天的预测

> ID：13450998
> 
> 赞同：0
> 
> 时间：2012-11-19T09:35:03.770
> 
> 标签：xml-parsing

我目前正在从 yr.no 的 API 获取当前时间的[这个 API](http://api.yr.no/weatherapi/locationforecast/1.8/?lat=59.378217;lon=13.504219)的数据，我想从特定的日期和时间获取温度，但我不知道如何让它工作。

我想得到这个数据（这是周三的预测）：

```
<time datatype="forecast" from="2012-11-21T15:00:00Z" to="2012-11-21T15:00:00Z">
<location altitude="52" latitude="59.3782" longitude="13.5042">
<temperature id="TTT" unit="celcius" value="7.0"/>
<windDirection id="dd" deg="183.2" name="S"/>
<windSpeed id="ff" mps="3.7" beaufort="3" name="Lett bris"/>
<humidity value="78.3" unit="percent"/>
<pressure id="pr" unit="hPa" value="1020.2"/>
<cloudiness id="NN" percent="100.0"/>
<fog id="FOG" percent="0.0"/>
<lowClouds id="LOW" percent="100.0"/>
<mediumClouds id="MEDIUM" percent="0.0"/>
<highClouds id="HIGH" percent="23.6"/>
</location>
</time> 
```

如何获取此预测并在我的网站上查看？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T09:45:53.057

我已经解决了！这是工作代码：

```
foreach($weather->product->time AS $forecast) {
    $from = $forecast->attributes()->from;
    $to = $forecast->attributes()->to;

    if($from == '2012-11-21T12:00:00Z' AND $to == '2012-11-21T12:00:00Z') {
            echo echo $forecast->location->temperature->attributes()->value.'° C';
        }
} 
```

# ios - IOS：如何使用 ios google drive sdk API 下载 Google Docs 文件？

> ID：13450999
> 
> 赞同：5
> 
> 时间：2012-11-19T09:35:05.710
> 
> 标签：ios, google-drive-api, google-api-objc-client

我将 google 驱动 sdk 与我的 ios 应用程序集成在一起。目前我正在使用以下代码根据下载 url 链接从我的谷歌驱动器 a/c 下载文件。但是当我尝试下载谷歌文档文件（具有 mime 类型**application/vnd.google-apps.document**）时，谷歌驱动库中没有下载 url 链接。在那种情况下，我如何下载谷歌文档数据？我可以使用**alternateLink**而不是下载网址链接吗？必须感谢任何帮助。

**我的代码：**

```
- (void)loadFileContent {

GTMHTTPFetcher *fetcher =
[self.driveService.fetcherService fetcherWithURLString:[[self.driveFiles objectAtIndex:selectedFileIdx] downloadUrl]];

[fetcher beginFetchWithCompletionHandler:^(NSData *data, NSError *error) {
    if (error == nil) {
        NSLog(@"\nfile %@ downloaded successfully from google drive", [[self.driveFiles objectAtIndex:selectedFileIdx] originalFilename]);

        //saving the downloaded data into temporary location

    } else {
        NSLog(@"An error occurred: %@", error);            

    }
}]; 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-02T09:03:52.207

这里是从谷歌驱动器下载文件的步骤。它适用于文件和谷歌文档。

步骤1：

获取文件列表并将其存储到具有相关文件下载链接 url 的数组或字典中：

```
- (void)loadDriveFiles {
fileFetchStatusFailure = NO;

//for more info about fetching the files check this link
//https://developers.google.com/drive/v2/reference/children/list    
GTLQueryDrive *query2 = [GTLQueryDrive queryForChildrenListWithFolderId:[parentIdList lastObject]];
query2.maxResults = 1000;

// queryTicket can be used to track the status of the request.
[self.driveService executeQuery:query2
              completionHandler:^(GTLServiceTicket *ticket,
                                  GTLDriveChildList *children, NSError *error) {
                  GTLBatchQuery *batchQuery = [GTLBatchQuery batchQuery];                      
                  //incase there is no files under this folder then we can avoid the fetching process
                  if (!children.items.count) {                          
                      [self.driveFiles removeAllObjects];
                      [fileNames removeAllObjects];                          
                      [self performSelectorOnMainThread:@selector(reloadTableDataFromMainThread) withObject:nil waitUntilDone:NO];                          
                      return ;
                  }

                  if (error == nil) {
                      int totalChildren = children.items.count;
                      count = 0;

                      [self.driveFiles removeAllObjects];
                      [fileNames removeAllObjects];                                                    //http://stackoverflow.com/questions/14603432/listing-all-files-from-specified-folders-in-google-drive-through-ios-google-driv/14610713#14610713
                      for (GTLDriveChildReference *child in children) {
                          GTLQuery *query = [GTLQueryDrive queryForFilesGetWithFileId:child.identifier];                              
                          query.completionBlock = ^(GTLServiceTicket *ticket, GTLDriveFile *file, NSError *error) {

                              //increment count inside this call is very important. Becasue the execute query call is asynchronous
                              count ++;
                              NSLog(@"Google Drive: retrieving children info: %d", count);                                  
                              if (error == nil) {
                                  if (file != nil) { //checking the file resource is available or not
                                      //only add the file info if that file was not in trash
                                      if (file.labels.trashed.intValue != 1 )
                                          [self addFileMetaDataInfo:file numberOfChilderns:totalChildren];
                                  }

                                  //the process passed all the files then we need to sort the retrieved files
                                  if (count == totalChildren) {
                                      NSLog(@"Google Drive: processed all children, now stopping HUDView - 1");
                                      [self performSelectorOnMainThread:@selector(reloadTableDataFromMainThread) withObject:nil waitUntilDone:NO];
                                  }
                              } else {
                                  //the file resource was not found
                                  NSLog(@"Google Drive: error occurred while retrieving file info: %@", error);

                                  if (count == totalChildren) {
                                      NSLog(@"Google Drive: processed all children, now stopping HUDView - 2");
                                      [self performSelectorOnMainThread:@selector(reloadTableDataFromMainThread)
                                                             withObject:nil waitUntilDone:NO];
                                  }                                      
                              }                                  
                          };                              
                          //add the query into batch query. Since we no need to iterate the google server for each child.
                          [batchQuery addQuery:query];
                      }                          
                      //finally execute the batch query. Since the file retrieve process is much faster because it will get all file metadata info at once
                      [self.driveService executeQuery:batchQuery
                                    completionHandler:^(GTLServiceTicket *ticket,
                                                        GTLDriveFile *file,
                                                        NSError *error) {
                                    }];

                      NSLog(@"\nGoogle Drive: file count in the folder: %d", children.items.count);
                  } else {
                      NSLog(@"Google Drive: error occurred while retrieving children list from parent folder: %@", error);
                  }
              }]; 
```

}

step-2：添加文件元数据信息

```
 -(void)addFileMetaDataInfo:(GTLDriveFile*)file numberOfChilderns:(int)totalChildren
{
    NSString *fileName = @"";
    NSString *downloadURL = @"";

    BOOL isFolder = NO;

    if (file.originalFilename.length)
        fileName = file.originalFilename;
    else
        fileName = file.title;

    if ([file.mimeType isEqualToString:@"application/vnd.google-apps.folder"]) {
        isFolder = YES;
    } else {
        //the file download url not exists for native google docs. Sicne we can set the import file mime type
        //here we set the mime as pdf. Since we can download the file content in the form of pdf
        if (!file.downloadUrl) {
            GTLDriveFileExportLinks *fileExportLinks;

            NSString    *exportFormat = @"application/pdf";

            fileExportLinks = [file exportLinks];
            downloadURL = [fileExportLinks JSONValueForKey:exportFormat];
        } else {
            downloadURL = file.downloadUrl;
        }
    }

    if (![fileNames containsObject:fileName]) {
        [fileNames addObject:fileName];

        NSArray *fileInfoArray = [NSArray arrayWithObjects:file.identifier, file.mimeType, downloadURL,
                                  [NSNumber numberWithBool:isFolder], nil];
        NSDictionary *dict = [NSDictionary dictionaryWithObject:fileInfoArray forKey:fileName];

        [self.driveFiles addObject:dict];
    }
} 
```

step-3：根据表格行上的文件选择下载文件

```
 NSString *downloadUrl = [[[[self.driveFiles objectAtIndex:selectedFileIdx] allValues] objectAtIndex:0]
                   objectAtIndex:download_url_link];
NSLog(@"\n\ngoogle drive file download url link = %@", downloadUrl);    
GTMHTTPFetcher *fetcher =
[self.driveService.fetcherService fetcherWithURLString:downloadUrl];    
//async call to download the file data
[fetcher beginFetchWithCompletionHandler:^(NSData *data, NSError *error) {
    if (error == nil) {
        NSLog(@"\nfile %@ downloaded successfully from google drive", self.selectedFileName);

        //saving the downloaded data into temporary location
        [data writeToFile:<path> atomically:YES];               
    } else {
        NSLog(@"An error occurred: %@", error);
    }
}]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T02:30:26.013

Google Docs 原生格式的文档不能作为其他文件下载，只能使用`exportLinks`URL 导出为不同的支持格式。

有关更多详细信息和支持的格式列表，请查看 Google Drive SDK 文档：

[https://developers.google.com/drive/manage-downloads#downloading_google_documents](https://developers.google.com/drive/manage-downloads#downloading_google_documents)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-01T13:10:06.857

我以前也有类似的问题。具体来说，我没有找到在 Google Document 中创建的原生文档的 downloadurl。它们是空的。只有通过 DrEdit 创建的（Drive SDK 中举例说明的解决方案）与 downloadUrl 相关联。

解决方案实际上是嵌入到属性中： **GTLDriveFileExportLinks实例中的***JSON*，它返回 NSMutableDictionary*。您可以选择通过访问*JSONString*属性来查看 JSON 对象的内容。JSON可变字典可以通过查询*GTLDriveFile*实例中的**exportLinks**得到。示例如下：

 ******```
GTLDriveFile *file = files.items[0]; // assume file is assigned to a valid instance.
NSMutableDictionary *jsonDict = file.exportLinks.JSON; 
NSLog(@"URL:%@.", [jsonDict objectForKey:@"text/plain"]); 
```******