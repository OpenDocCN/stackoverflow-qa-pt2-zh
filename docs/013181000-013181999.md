# StackOverflow 问答 13181000-13181999

# ruby-on-rails - 加快从 Dragonfly 到 S3 的上传速度

> ID：13181004
> 
> 赞同：0
> 
> 时间：2012-11-01T16:07:02.317
> 
> 标签：ruby-on-rails, heroku, amazon-s3, paperclip, dragonfly-gem

（Heroku 上的 Rails 3.2）

为了在 Rails 中处理图像上传，我从[Paperclip](https://github.com/thoughtbot/paperclip)切换到[Dragonfly](https://github.com/markevans/dragonfly)，因为我喜欢能够在第一次请求缩略图时动态生成缩略图。

但是，将附件上传到 S3（使用[S3DataStore](https://github.com/markevans/dragonfly/blob/master/lib/dragonfly/data_storage/s3data_store.rb)）似乎比[使用 Paperclip慢得多](https://github.com/thoughtbot/paperclip/blob/master/lib/paperclip/storage/s3.rb)

这是上传在 NewRelic 事务跟踪中的外观：![痕迹](../Images/74fdbe78e3d49776bc9ec91dd911a48c.png)

有人有加速这个的经验吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:30:20.337

这是一个非常令人惊讶的基准。服务器是否在 EC2 上进行文件上传，并且与您的 S3 存储桶位于同一区域？生成的缩略图有多大？

除了这些问题，在响应期间进行任何类型的缩略图生成可能都不是一个好主意：它会为需要生成缩略图的每个页面加载增加一些时间，即使该时间不是 3 秒，它也会还是有事的。[我会使用像Delayed Paperclip](https://github.com/jstorimer/delayed_paperclip)这样的 gem 异步处理图像。尽管您不会像使用 CarrierWave 那样节省存储空间，但您的响应时间将大大缩短。

# c# - C# - 以编程方式获取在 Windows 启动时运行的应用程序列表

> ID：13181009
> 
> 赞同：1
> 
> 时间：2012-11-01T16:07:16.950
> 
> 标签：c#, .net, startup

我想以编程方式获取在 Windows 启动时运行的应用程序列表。

我在 msconfig->startup 中看到了这些应用程序。

但是当我在 C:\User\Appdata\Microsoft\windows\start menu\programs\startup 中看到它时

它显示文件夹是空的。

如何以编程方式获取这些启动应用程序列表 C#。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T16:18:22.353

您在 msconfig 中看到的那些都在注册表中，尽管它们并不是全部。您可以尝试阅读

```
/Software/Microsoft/Windows/CurrentVersion/Run 
```

和

```
/Software/Microsoft/Windows/CurrentVersion/RunOnce 
```

在两者`HKEY_LOCAL_MACHINE`和`HKEY_CURRENT_USER`

[您可以在MSDN](http://msdn.microsoft.com/en-us/library/aa376977%28v=VS.85%29.aspx)和[support.microsoft](http://support.microsoft.com/kb/314866)上找到有关这些的信息。

尝试CodeProject 中[使用 C# 从注册表读取、写入和删除](http://www.codeproject.com/Articles/3389/Read-write-and-delete-from-registry-with-C)一文，让您开始使用注册表。

现在，正如我上面所说，它们并不是全部。列出这些仍然会错过服务和驱动程序，以及其他一些将启动异步的代码，例如资源管理器扩展、控制面板扩展、音频和视频编解码器等。所有这些都没有考虑到客户端机器可能不会使用资源管理器作为外壳。

我建议您在 sysinternals 上查看[autoruns](http://technet.microsoft.com/en-us/sysinternals/bb963902)。您还可以使用它的命令行工具来获取您想要的信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T16:20:17.390

有一篇很好的文章：[使用系统配置实用程序了解和控制启动应用程序](http://technet.microsoft.com/en-us/magazine/ee851671.aspx)。

还有一个很棒的工具可以查看所有启动程序的列表：[Autoruns](http://technet.microsoft.com/en-us/sysinternals/bb963902)。

例如，您可以枚举`HKLM\Software\Microsoft\Windows\CurrentVersion\Run`键的字符串值：

```
const string runKey = "SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Run";
using (RegistryKey startupKey = Registry.LocalMachine.OpenSubKey(runKey))
{
    var valueNames = startupKey.GetValueNames();

    // Name => File path
    Dictionary<string, string> appInfos = valueNames
        .Where(valueName => startupKey.GetValueKind(valueName) == RegistryValueKind.String)
        .ToDictionary(valueName => valueName, valueName => startupKey.GetValue(valueName).ToString());
} 
```

# java - GPS应用距离

> ID：13181010
> 
> 赞同：3
> 
> 时间：2012-11-01T16:07:17.793
> 
> 标签：java, android, gps

> **可能重复：**
> [如何在 Android 上通过 GPS 跟踪距离？](https://stackoverflow.com/questions/10818178/how-to-track-distance-via-gps-on-android)

我设计了一个 GPS 应用程序，它可以很好地告诉我的位置。但现在我想包含更多功能。我将如何在那里做一个半径？有5或6公里的周边区域！我怎么能提到那个地区的一个地方和我的地方之间的距离？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T16:23:51.173

如果您只是有不同的坐标并想用它们进行计算，只需查看已经可用的 Android 功能：http: [//developer.android.com/reference/android/location/Location.html](http://developer.android.com/reference/android/location/Location.html)

您可以创建 Location 对象，将纬度/经度坐标与设置函数一起使用，然后使用

```
float distanceInMeters=location1.distanceTo(location2); 
```

得到结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T19:00:35.773

我觉得这个问题开始变成很多问题。**我决定通过将其指向您的问题标题“GPS 应用距离”**来解决这个问题。

在我的应用程序中，我没有使用 Google 的 API，而是通过执行以下操作请求用户与 GPS 坐标列表的距离：

在我的`JJMath`课堂上：

**获取距离（Haversine 公式，以英里为单位）：**

```
/**
 * @param lat1
 * Latitude which was given by the device's internal GPS or Network location provider of the users location
 * @param lng1
 * Longitude which was given by the device's internal GPS or Network location provider of the users location 
 * @param lat2
 * Latitude of the object in which the user wants to know the distance they are from
 * @param lng2
 * Longitude of the object in which the user wants to know the distance they are from
 * @return
 * Distance from which the user is located from the specified target
*/
public static double distFrom(double lat1, double lng1, double lat2, double lng2) {
    double earthRadius = 3958.75;
    double dLat = Math.toRadians(lat2-lat1);
    double dLng = Math.toRadians(lng2-lng1);
    double sindLat = Math.sin(dLat / 2);
    double sindLng = Math.sin(dLng / 2);
    double a = Math.pow(sindLat, 2) + Math.pow(sindLng, 2) * Math.cos(lat1) * Math.cos(lat2);
    double c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
    double dist = earthRadius * c;

    return dist;
} 
```

**然后我将这个数字四舍五入：**

```
/** This gives me numeric value to the tenth (i.e. 6.1) */
public static double round(double unrounded) {
    BigDecimal bd = new BigDecimal(unrounded);
    BigDecimal rounded = bd.setScale(1, BigDecimal.ROUND_CEILING);
    return rounded.doubleValue();
} 
```

我不使用地图叠加层，但我相信会有很棒的教程或答案。

# javascript - 使用 javascript 创建 JSON 请求数据

> ID：13181014
> 
> 赞同：1
> 
> 时间：2012-11-01T16:07:31.483
> 
> 标签：javascript, json, html

我需要使用从 html 表单获取的输入为 JSON 请求创建数据。我要生成的数据格式如下所示。

```
 {
   "applicationName":"Tesing",
   "cpuCount":"12",
   "hostdescName":"localhost",
   "maxMemory":"0",
   "maxWallTime":"0",
   "minMemory":"0",
   "nodeCount":"1",
   "processorsPerNode":"12",
   "serviceDesc":{
      "inputParams":[
         {
            "dataType":"input",
            "description":"my input",
            "name":"myinput",
            "type":"String"
         },
         {
            "dataType":"input",
            "description":"my input",
            "name":"myinput",
            "type":"String"
         }
      ],
      "outputParams":[
         {
            "dataType":"output",
            "description":"my output",
            "name":"myoutput",
            "type":"String"
         },
         {
            "dataType":"output",
            "description":"my output",
            "name":"myoutput",
            "type":"String"
         }
      ]
   }
} 
```

我的代码如下所示；

```
 var jasonRequest = {};
    jasonRequest["applicationName"] = appName;
    jasonRequest["cpuCount"] = cpuCount;
    jasonRequest["hostdescName"] = hostName;
    jasonRequest["maxMemory"] = maxMemory;
    jasonRequest["maxWallTime"] = ""; //TODO
    jasonRequest["minMemory"] = ""; //TODO
    jasonRequest["nodeCount"] = nodeCount;
    jasonRequest["processorsPerNode"] = ""; //TODO

    var inArray = new Array();
    for(var j=0; j<inputCount; j++) {
        var input = {};
        input["dataType"] = "input";
        input["description"] = "empty";
        input["name"] = $("#inputName" + j+1).val();
        input["type"] = $("#inputType" + j+1).val();

        inArray[j] = input;
    }

    var outArray = new Array();
    for(var j=0; j<outputCount; j++) {
        var output = {};
        output["dataType"] = "output";
        output["description"] = "empty";
        output["name"] = $("#outputName" + j+1).val();
        output["type"] = $("#outputType" + j+1).val();

        outArray[j] = output;
    }

    var serviceDesc = {};
    serviceDesc["inputParams"] = inArray;
    serviceDesc["outputParams"] = outArray;

    jasonRequest["serviceDesc"] = serviceDesc;

    alert("printing inArray");
    alert(inArray.toSource().toString());
    alert(JSON.stringify(jasonRequest)); 
```

此代码创建的数据如下所示。我可以使用字符串并通过连接它来创建消息，但我认为这不是一个很好的方法。如您所见， inputParams 和 outputParams 未正确填充。您能否建议我如何正确生成此消息。

```
{
   "applicationName":"Tesing",
   "cpuCount":"12",
   "hostdescName":"localhost",
   "maxMemory":"0",
   "maxWallTime":"0",
   "minMemory":"0",
   "nodeCount":"1",
   "processorsPerNode":"12",
   "serviceDesc":{"inputParams":"","outputParams":[]}} 
```

[编辑] 我的代码如下所示。

```
 $(document).ready(function(){
        var inputCount = 0;
        var outputCount = 0;

        $("p1").live("click", function(){
            inputCount++;
            $(this).after("<br/>");
            $(this).after("Input Name         *:" +
                    "<input type=&quot;text&quot; id=&quot;inputName" + inputCount + "&quot; name=&quot;inputName" + inputCount + "&quot; value=&quot;echo_input&quot; size=&quot;50&quot;><br/>");

            $(this).after("Input Type         *:" +
                    "<input type=&quot;text&quot; id=&quot;inputType" + inputCount + "&quot; name=&quot;inputType" + inputCount + "&quot; value=&quot;String&quot; size=&quot;50&quot;><br/>");
        });

        $("p2").live("click", function(){
            $(this).after("Output Name         *:" +
                    "<input type=&quot;text&quot; id=&quot;outputName" + outputCount + "&quot; name=&quot;outputName" + outputCount + "&quot; value=&quot;echo_output&quot; size=&quot;50&quot;><br/>");
            $(this).after();

            $(this).after("Output Type         *:" +
                    "<input type=&quot;text&quot; id=&quot;outputType" + outputCount + "&quot; name=&quot;outputType" + outputCount + "&quot; value=&quot;String&quot; size=&quot;50&quot;><br/>");
        });

        $('[name="btn2"]').click(function(){
            var appName = $("#appName1").val();
            var exeuctableLocation = $("#exeuctableLocation1").val();
            var scratchWorkingDirectory = $("#scratchWorkingDirectory1").val();
            var hostName = $("#hostName1").val();

            var projAccNumber = $("#projAccNumber1").val();
            var queueName = $("#queueName1").val();
            var cpuCount = $("#cpuCount1").val();
            var nodeCount = $("#nodeCount1").val();
            var maxMemory = $("#maxMemory1").val();

            var serviceName = $("#serviceName1").val();
            var inputName1 = $("#inputName1").val();
            var inputType1 = $("#inputType1").val();
            var outputName = $("#outputName1").val();
            var outputType = $("#outputType1").val();

            var jsonRequest = {};
            jsonRequest["applicationName"] = appName;
            jsonRequest["cpuCount"] = cpuCount;
            jsonRequest["hostdescName"] = hostName;
            jsonRequest["maxMemory"] = maxMemory;
            jsonRequest["maxWallTime"] = ""; //TODO
            jsonRequest["minMemory"] = ""; //TODO
            jsonRequest["nodeCount"] = nodeCount;
            jsonRequest["processorsPerNode"] = ""; //TODO

            var inArray = [];
            for(var j=0; j<inputCount; j++) {
                var input = {};
                input["dataType"] = "input";
                input["description"] = "empty";
                input["name"] = $("#inputName" + j+1).val();
                input["type"] = $("#inputType" + j+1).val();

                inArray[j] = input;
            }

            var outArray = new Array();
            for(var j=0; j<outputCount; j++) {
                var output = {};
                output["dataType"] = "output";
                output["description"] = "empty";
                output["name"] = $("#outputName" + j+1).val();
                output["type"] = $("#outputType" + j+1).val();

                outArray[j] = output;
            }

            var serviceDesc = {};
            serviceDesc["inputParams"] = inArray;
            serviceDesc["outputParams"] = outArray;

            jsonRequest["serviceDesc"] = serviceDesc;

            alert("printing inArray");
            alert(inArray.toSource().toString());
            alert(JSON.stringify(jsonRequest));

            $.ajax({
                beforeSend: function(x) {
                    if (x && x.overrideMimeType) {
                        x.overrideMimeType("application/j-son;charset=UTF-8");
                    }
                },
                type: "POST",
                dataType: "json",
                contentType: "application/json;charset=utf-8",
                url: "http://localhost:7080/airavata-registry-rest-services/registry/api/applicationdescriptor/build/save/test",
                data: jasonRequest
            }).done(function( msg ) {
                        alert( "Data Saved: " + msg );
                    });

        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:20:12.177

什么是`inputCount`和`outputCount`？似乎它们是零或 NaN 或其他东西，所以你得到空数组。但是，您的代码仍将打印`"inputParams":[]`而不是`"inputParams":""`.

要获得良好的输出（不是您的应用程序需要它，仅用于调试），您可以使用[`JSON.stringify`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify).

# c# - 在 Windows 窗体 C# 中模拟降雪

> ID：13181019
> 
> 赞同：0
> 
> 时间：2012-11-01T16:07:42.340
> 
> 标签：c#

我是 C# 的新手，我想使用 Windows 窗体在 C# 中创建类似落雪（点）的东西。

我已经能够在屏幕顶部创建雪花（我想每隔 0,1 秒创建一个新点，在 Form 的随机 x 位置，并将每个雪花的位置写到 List(Point) 中，并且每一个 Tick计时器（0,1s）我希望雪花将其位置向下改变 3px，向右改变 1-3px）

但是我在刷新雪花位置时遇到了问题。我不知道如何访问列表中的每个雪花以随机化其新位置。我尝试了 foreach，但它给了我错误，说我无法更改 foreach 中的变量。

例子：

```
foreach (var snowflake in snowflakeList)            
            {
               snowflake.Y += 3;
               snowflake.X += moveRandom.Next(1, 4);
            } 
```

谁能告诉我如何将雪花列表（点）划分为单个雪花，以便我可以分别更改每个点的位置？

谢谢 ：-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:37:06.933

正如安德鲁斯的回答使用 for 循环，但由于列表是 Points （一种值类型），您需要直接引用列表中的 Point 而不是复制它：

```
for (int i = 0; i < snowflakeList.Count; i++)            
{
    snowflakeList[i].Y += 3;
    snowflakeList[i].X += moveRandom.Next(1, 4);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T16:10:59.787

最简单的方法就是使用集合的索引：

```
for (int i = 0; i < snowflakeList.Count; i++)            
{
    var snowflake = snowflakeList[i];
    snowflake.Y += 3;
    snowflake.X += moveRandom.Next(1, 4);
    snowflakeList[i] = snowflake;
} 
```

# glsl - Three.js 和 GLSL - 万花筒着色器

> ID：13181023
> 
> 赞同：0
> 
> 时间：2012-11-01T16:08:01.037
> 
> 标签：glsl, webgl, three.js, fragment-shader, vertex-shader

我正在开始并尝试使用 GLSL 和 WebGL。使用 Three.js r52。

我有一个带有着色器材质的简单平面几何网格。

我已经将纹理作为统一属性传递，并且能够以不同的方式对其进行操作。

但是，当我尝试从 Shader Toy 中试验着色器时，更具体地说，这个[http://www.iquilezles.org/apps/shadertoy/?p=Kaleidoscope](http://www.iquilezles.org/apps/shadertoy/?p=Kaleidoscope)的工作方式不同。

我认为与职位有关。

任何人都知道可能是什么问题？

# url-routing - 重定向脚本使图像引用不可能

> ID：13181026
> 
> 赞同：3
> 
> 时间：2012-11-01T16:08:07.197
> 
> 标签：url-routing

我有一个站点，我在另一个站点的后面运行。为了节省托管等，域指向一个脚本，并根据地址栏中的 url 相应地重定向到包含单独站点的子文件夹。我对此很满意，而且效果很好。因此，当它到达 url 1 时，它会转到“www.domain1.com/url1/Home/Index”，当输入数字 2 时，它会转到“www.domain2.com/url2/Home/Index”。url1 和 url2 是子文件夹。

当我正在开发另一个脱离原始网站的网站时，问题就来了。我的网站是在 vs 中开发的，并且即将发布，显然所有的图像 url、脚本 url 等都是完全错误的，因为它们没有考虑到网站中的子文件夹。他们都使用了 /images/site/image1.jpg 等。这意味着他们是从根目录而不是从我的子文件夹 url 查找的。

有没有一种简单的方法来实现这一点，这样我就可以使用 vs 开发它，而不必每次发布代码时都更改每个图像引用？

我意识到这可能对我的问题有一个非常简单的答案——我似乎找不到任何合适的东西。

有什么建议么？

除此之外，当我的网站加载时，它会加载到默认页面，因此当我使用 ../images/site 等时，当 url 包含 Home/Index 时，它会起作用，但当它在默认 url 上点击它时不起作用'不包括文件夹和页面限定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-04-30T13:48:44.390

只是注意到这是没有答案的。在 MVC 中引用时，您需要使用波浪号 (~) 来引用应用程序的路由。因此，在我的例子中，我有两个站点，如果引用了应用程序的路由，则使用波浪符号，其中每个站点都被指定为不同的路由。

# visual-studio-2012 - 为什么我可以选择在 VS2012 中将 Web 应用程序转换为 Web 应用程序？

> ID：13181028
> 
> 赞同：2
> 
> 时间：2012-11-01T16:08:14.040
> 
> 标签：visual-studio-2012

如果我在我的解决方案中右键单击新添加的“MVC4 Web 应用程序”，我会选择“转换为 Web 应用程序”。

这对项目有什么影响？我以为这个项目已经是一个 Web 应用程序了？

# sql-server - 我可以安排的数据库比较工具

> ID：13181030
> 
> 赞同：2
> 
> 时间：2012-11-01T16:08:23.470
> 
> 标签：sql-server, database-comparison

我正在使用 SQL Server 的数据库比较工具，它允许我执行以下操作：

*   安排比较定期发生
*   将结果通过电子邮件发送给我（以易于阅读的格式，而不是生成的脚本）
*   允许我排除/包含某些对象名称（例如排除包含 %test% 的表名称。这不是一个真实的例子，但有充分的理由说明它会派上用场。）

以及显而易见的：

*   有通常的选项来忽略评论、身份种子等
*   用于选择不同类型对象的选项

如果它是免费的，或者至少不花钱，那当然是额外的奖励。

我已经尝试过 RedGate 的 SQL 比较以及 Visual Studio 中的内置数据库比较，但似乎都无法做到上面的前 3 点。我还查看了此处各种线程中推荐的其他工具，但他们再次在其功能中未提及上述 3 点。

我发现的一个选项是 RedGate 的 SQL 比较 SDK，我想我可以用它写一些东西来做我想做的事。

我只是想研究可以开箱即用地完成上述所有工作的工具。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T23:42:18.350

SQL Compare Pro 带有一个命令行，它比 SDK 更容易设置。如果您通过 Windows 调度程序或在代理作业中调用它，您可以实现您正在寻找的内容。

如何从 Powershell 调用命令行的示例可以在这里找到： [http ://www.simple-talk.com/sql/database-administration/auditing-ddl-changes-in-sql-server-databases/](http://www.simple-talk.com/sql/database-administration/auditing-ddl-changes-in-sql-server-databases/)

本文还介绍了如何在 Powershell 中发送电子邮件。SQL Compare 也可以使用 /filter 开关传递过滤器，以根据各种规则排除对象。

[http://www.red-gate.com/supportcenter/Content/SQL_Compare/help/10.0/sc_cl_Switches_in_the_cl](http://www.red-gate.com/supportcenter/Content/SQL_Compare/help/10.0/sc_cl_Switches_in_the_cl)

如果您无法正常工作，请发送电子邮件至 support@red-gate.com。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T16:31:03.630

我认为没有任何工具可以开箱即用地完成所有这些工作。你有没有机会看看 sp_CompareDB。我有类似的要求，最终基于相同的要求编写了自己的例程。

[http://www.sql-server-performance.com/2001/database-comparison-sp/](http://www.sql-server-performance.com/2001/database-comparison-sp/)

# linux - Linux，如何使用目录名创建文件？

> ID：13181034
> 
> 赞同：1
> 
> 时间：2012-11-01T16:08:30.340
> 
> 标签：linux, directory

如何创建文件夹，如：wdw/1/11、wdw/2/22、... wdw/6/66、...、wdw/9/99，以及使用最深目录中的目录名称的文件，如 directoryname_file.txt

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:15:53.207

在 Bash 中，您可以使用 mkdir 命令：

```
your_dir="wdw/1/11"
if [ ! -d $your_dir ]; then
    mkdir $your_dir
fi 
```

IF 子句是检查目录是否已经存在。您可以使用/2/22、6/66 等循环更改“your_dir”的值...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T16:17:54.513

在 bash 中：

```
mkdir wdw                                    # Creates the top dir.
mkdir {1..9}                                 # Creates the subdirs using brace expansion.
for dir in {1..9} ; do
    mkdir $dir/$dir$dir                      # Creates the subsubdirs.
    touch $dir/$dir$dir/$dirdir"_file".txt   # Creates the file.
done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T16:18:44.363

您将使用该`-p`标志`mkdir`来创建嵌套目录，例如：

```
dir_name="wdw/1/11"
mkdir -p $dir_name 
```

然后使用`touch`or`echo`创建文件：

```
touch $dir_name/directoryname_file.txt 
```

或者

```
echo "some text" > $dir_name/directoryname_file.txt 
```

# r - 构造矩阵作为行和列的函数

> ID：13181037
> 
> 赞同：1
> 
> 时间：2012-11-01T16:08:35.953
> 
> 标签：r

情况很简单。我想创建一个`A`n 行 m 列的矩阵，其中每个元素的值由预定函数给出`f(i, j)`。实现这一目标的最优雅的方法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-01T16:20:49.120

您可以使用`outer`：

```
outer(1:3,1:3,function(i,j) i^2+j)
     [,1] [,2] [,3]
[1,]    2    3    4
[2,]    5    6    7
[3,]   10   11   12 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T16:16:12.947

如果您提供了一个可重现的示例，这将有所帮助，但您可以执行以下操作：

```
f <- function(i,j) i*j
m <- 4
n <- 2
out <- apply(expand.grid(1:m, 1:n), 1, function(x) f(x[1],x[2]))
dim(out) <- c(m,n) 
```

# c - 如何确定 linux 串行端口上剩余的写入/输出缓冲区空间量？

> ID：13181040
> 
> 赞同：4
> 
> 时间：2012-11-01T16:08:39.447
> 
> 标签：c, linux, serial-port, buffer, ioctl

您可以使用 ioctl 确定在 linux 下可以从串行端口读取多少数据。是否可以确定串行端口在写入时剩余多少缓冲区空间？实际上，我想将一个数据块写入串行端口，只有当它可以一次性全部卸载时才会成功，或者如果必须将其分块则失败。对端口的写入和读取是非阻塞的。我不希望这是 UARTs 缓冲区，而是 UARTs 缓冲区之前的内核内存缓冲区（我猜）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-10-03T10:28:54.660

您可以确定写入/输出的数量。

供阅读：

```
ioctl(device_handler, TIOCINQ, &bytes); 
```

对于写：

```
ioctl(device_handler, TIOCOUTQ, &bytes); 
```

FIFO 缓冲区大小：

```
serial_struct serinfo;
memset(&serinfo, 0, sizeof(serinfo));
ioctl(device_handler, TIOCGSERIAL, &serinfo);
serinfo.xmit_fifo_size; 
```

问候，弗吉尼亚州。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T22:23:56.700

如果您使用文件描述符访问串行端口，则可以`select`用于检查描述符何时准备好进行非阻塞写入。我不知道这适用于串行端口。我将它用于 TCP 套接字并且它有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T18:50:42.980

串口是字符设备而不是块设备。它没有缓冲区。字符设备（如串口、键盘、鼠标）只读写一个字符而不是一个单词。例如，如果你听某人写的连续剧“祝你有美好的一天”，如果你从他开始打字的时候就没有听，你就看不到整个短语。收听时您只会看到输入的字符

# java - 如何创建“isSubstring(str1, str2)”的递归布尔方法

> ID：13181042
> 
> 赞同：1
> 
> 时间：2012-11-01T16:08:45.613
> 
> 标签：java, string, recursion, substring

```
if (isSubstring(str1, str2))
System.out.println(str1 + " is a substring of " + str2 + ".") 
```

这是isSubstring的方法：

```
public static boolean isSubstring(String str, String target)
    {   
        if (str == target)
            return true;

        return (isSubstring(str, target.substring(0,5)));            
    } 
```

这就是我现在的代码，我无法理解你将如何解决这个问题。我的导师要求我们使用递归，所以返回必须调用自己。通常只用一行代码就可以轻松解决这个问题：

```
public static boolean isSubstring(String str, String target)
{
return str.contains(target)
} 
```

但是我必须毫无意义地使用递归来解决这个问题，知道这种方法是多么微不足道以及我的导师强迫我们这样做是多么的复杂，这非常令人沮丧。我真的不知道从哪里开始，因为“return str.contains(target)”并没有给我一个很好的基础来尝试解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:12:54.833

几件事：

首先，您的想法是正确的，但是您想让您搜索的“下一个”字符串比当前字符串小一个大小。因此，如果您在字符串 Hamburger 中查找，您会先搜索 amburger，然后再搜索 mburger。因此，当您重复出现时，您可能会尝试像`return isSubstring(str,target.substring(1))`现在您似乎使用数字 5 来获取前 5 个字符。这很奇怪，因为你第一次这样做时，（从汉堡到汉堡）你将永远无法再这样做。如果您最初的目标是“火腿”，那么您会立即轰​​炸！不太好。

其次，仅测试是否相等是不够的。以汉堡包为例，如果您正在寻找 urge，您会找到 urger，然后直接找到 rger。你永远不会有冲动。因此，不要测试equals，而是测试with `beginsWith()`。（如果你从后面缩小它，比如 Hamburger 到 Hamburge 到 Hamburg，那么你会使用`endsWith()`.)

最后，如果你没有达到目标，你没有一个好的路径来做什么。如果您有`xyzzy`一个目标，并且您正在搜索`bob`，您将找不到它。因此，您需要一个“基本案例”，我建议将其用作第一行。上面写着“如果令牌不可能在目标中，那么让我们立即返回 false”。

这很难，令人沮丧，而且似乎毫无意义。但请记住，他并不是要教您搜索字符串。太傻了，你知道如何搜索字符串！他试图教你递归，这并不容易“得到”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T16:10:08.343

一种解决方法是：在比较字符串/对象时使用`equals()`而不是。比较引用相等性。比较内容是否相等。`==``==``equals()`

```
if (str == target) 
```

应该

```
if (str.equals(target)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T16:10:28.553

用方法比较字符串`equals()`：change

```
if (str == target) 
```

至

```
if (str.equals(target)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-11T12:06:41.920

您知道该功能适用​​于：

*   基本情况）一个空字符串，必须返回false；
*   基本情况）一个以你要查找的字符串开头的字符串，必须返回true；
*   rec case）否则删除第一个字符并检查字符串的其余部分。

这里是Java中的代码：

```
public static boolean isSubstring(final String str1, final String str2) {
    if ((str1 == null) || (str2 == null) || str1.isEmpty()) {
        return false;
    } else if (str1.startsWith(str2)) {
        return true;
    } else {
        return isSubstring(str1.substring(1), str2);
    }
} 
```

测试：

```
public static void main(final String[] args) {
    System.out.println(isSubstring("hello this is a simple test", "is a"));
} 
```

输出：

```
true 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T16:28:04.520

好的，我明白了，Asad 的建议很有用。这是isSubstring的工作方法：

```
public static boolean isSubstring(String str, String target)
{   
    if (target.length() == 0)
        return false;

    if (str.equals(target))
        return true;

    else     
    return (isSubstring(str, target.substring(0,target.length()-1)));            
} 
```

我不确定第二个“if”是否应该是“else if”。

# xml - 如何从 XML 消息定义 Delphi 类

> ID：13181047
> 
> 赞同：1
> 
> 时间：2012-11-01T16:09:13.627
> 
> 标签：xml, delphi, wsdl

我正在使用 Delphi 2007。

使用 WSDL 导入器，我从外部 WSDL 创建了一个包含多个功能的单元。

不幸的是，它不包含返回的 XML 的显式结果类型。

Fi 函数 getHash('login', 'password') 返回以下 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="...........>
  <SOAP-ENV:Body>
    <ns1:getHashResponse>
      <return xsi:type="ns2:Map">
        <item>
          <key xsi:type="xsd:string">code</key>
          <value xsi:type="xsd:string">1004</value>
        </item>
        <item>
          <key xsi:type="xsd:string">error</key>
          <value xsi:type="xsd:string">Login was not successfull</value>
        </item>
      </return>
    </ns1:getHashResponse>
  </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

从这里我一直在尝试定义正确的类。到目前为止，我想出的是：

```
 TKeyValue = class;

  TArrayofKeyValue = array of TKeyValue;

  TKeyValue = class(TRemotable)
  private
    FKey: String;
    FValue: String;
  published
    property Key:        String        read FKey     write FKey;
    property Value:      String        read FValue   write FValue;
  end;

  function getHash(const uid: WideString; const pwd: WideString): TArrayOfKeyValue; stdcall; 
```

当我使用此代码进行测试时，我确实得到了两个 TKeyValue 实例。但它们都是空的。我的班级定义有什么问题？还是我走错了路？

最好是更好的 WSDL，但这不取决于我。

# jquery - HTML 超链接保持在同一位置

> ID：13181056
> 
> 赞同：3
> 
> 时间：2012-11-01T16:09:52.890
> 
> 标签：jquery, html

我有以下链接：

```
 <a id="readmore" href="#">READ MORE</a> 
```

当用户单击此超链接时，我正在使用 Jquery 来切换此链接下方的内容以显示/隐藏内容。我对 href="#" 的一个问题是它会将用户带到页面顶部。相反，我希望它保持在同一位置，以便我可以在 READ MORE 超链接下方显示信息的切换效果。有没有一种对大多数浏览器有效且安全的解决方案。我试过 href="" 但这并没有成功。

我也试过

```
 <a id="readmore"href="javascript:void(0)"> READ MORE</a> 
```

但不确定这是否是最佳做法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T16:12:05.823

您可以使用

```
$('#readmore').click(function(e) {
  e.preventDefault();
}); 
```

preventDefault() 停止元素的默认行为，因此在这种情况下，它将停止屏幕跳转。

[在此处](http://api.jquery.com/event.preventDefault/)阅读有关它的更多信息

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T16:14:16.330

一个非常熟悉的问题使用`javascript:void(0)`而不是#

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T16:11:49.523

确保使用 e.preventDefault(); （假设你的事件变量是 e）或者在你的点击方法结束时返回 false

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T16:13:16.717

你也可以使用老派风格......

```
<a id="readmore" href="javascript:void(0);">Read More</a> 
```

**UDPATE**

OP修改了他的帖子以包括“最佳实践”......因此......

[不显眼的 Javascript](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T16:13:42.813

在您的代码中，您需要传递一个事件变量并调用 preventDefault 来阻止锚标记的默认操作。

IE

```
$('#readmore').click(function(e) {
    $('div').toggle();
    e.preventDefault();
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-01T16:16:47.567

你也可以使用`nohref="nohref"`而不是`href="#"`

`href="#anchor"`将您带到`<a></a>`页面上已定义的元素`name="anchor"`

既然你没有..它去了顶部

# c# - 使用哪种 WCF 安全模式

> ID：13181057
> 
> 赞同：3
> 
> 时间：2012-11-01T16:09:53.490
> 
> 标签：c#, wcf, wcf-binding, wcf-security

我最近构建了一个 WCF 服务，现在准备为其添加安全性。我想通过 https 提供它，面向互联网，客户端将使用用户名和密码进行身份验证。我只有 3 个用户，所以我想让身份验证尽可能简单。此外，请求将一次一个，我希望请求者每次都进行身份验证（对我来说，这意味着消息客户端凭据）。此外，这将托管在 IIS6 中。我对 WCF 的阅读显示了很多[安全选项](http://msdn.microsoft.com/en-us/library/ms733836.aspx)，坦率地说，我对选择什么感到不知所措。

鉴于上述要求，我应该选择哪个配置选项以及如何配置 WCF。是否有任何示例项目可以实现我需要的安全性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T17:08:15.963

**服务配置：**

```
Binding : wsHttpBinding
Security Mode : Message
ClientCredentialMode : UserName 
```

**客户端配置：**

```
CertificateValidationMode : PeerOrChainTrust 
```

**代理人 ：**

```
proxy.clientCredentials.UserName.Username
proxy.clientCredentials.UserName.Password 
```

您还可以看到以下网址：

[http://msdn.microsoft.com/en-us/library/vstudio/aa967563(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/vstudio/aa967563(v=vs.90).aspx)

# c++ - 何时从数组中删除类指针

> ID：13181063
> 
> 赞同：0
> 
> 时间：2012-11-01T16:10:31.207
> 
> 标签：c++, class, delete-operator

我有一个指针列表 `object *lst[200];`

我用它来添加一个：

```
object a = new object();
a->id = current_amount;
lst[current_amount] = a;
current_amount++; 
```

现在我想添加一个功能删除它：

我只是想从数组中删除这个元素：（我存储一个 id 用它来删除它）

```
 void delete(object *elem)
    {
        if(!elem)
          return;
       for (int i = elem->id ; i < current_amount - 1;i++)
       {
            lst[i] = lst[i + 1];
       }

    } 
```

问：什么时候打电话`delete elem`？上面的代码根本没有释放内存......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:12:48.280

由于上面的代码不是 C++，这里有一些是：

```
std::list<std::unique_ptr<object>> lst; 
```

和方法`erase`, `push_back`, `push_front`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T16:15:43.787

```
void deleteElem(object *elem) // you can't call your function 'delete'
    {
        if(!elem)
          return;

       for (int i = elem->id ; i < current_amount - 1;i++)
       {
            lst[i] = lst[i + 1];
       }

       delete elem; // this free's the memory

    } 
```

# wpf - 复制/克隆和打印图表。ActualWidth 和 ActualHeight 的问题

> ID：13181066
> 
> 赞同：0
> 
> 时间：2012-11-01T16:10:47.833
> 
> 标签：wpf, printing, charts, resize, copy

我正在尝试打印报告期间生成的图表。我可以将图表放在 DocumentPaginator 文档上，但是在调整图表大小以适合页面时遇到问题。我注意到，如果我更改报告程序的大小，这将改变图表大小，则会影响图表的缩放比例。这一认识向我展示了图表的`ActualWidth`和`ActualHeight`与缩放直接相关。

我试过了：

```
myChart.Width = newWidth;
myChart.Height = newHeight;

Measure(myChart.RenderSize);
Arrange(new Rect(0, 0, newWidth, newHeight)); 
```

但这导致我在报告程序中的可视图表调整大小，并且可打印图表在第二次打印之前不会调整为新大小。

意识到 myChart 已连接到 reportChart，我尝试将 reportChart 复制/克隆到 myChart。

我试过了：

```
public class Copy<T>
{
    public static T DeepCopy<T>(T element)
    {
        string xaml = XamlWriter.Save(element);
        StringReader xamlString = new StringReader(xaml);
        XmlTextReader xmlTextReader = new XmlTextReader(xamlString);
        var DeepCopyobject = (T)XamlReader.Load(xmlTextReader);
        return DeepCopyobject;
    }

} 
```

或者

```
myChart = XamlReader.Parse(XamlWriter.Save(reportChart.DataContext)) as Chart 
```

但`string xaml = XamlWriter.Save(element);`会花费太长时间，两者都会导致堆栈溢出。

我在用

```
myChart = new Chart() { DataContext = reportChart.DataContext } 
```

制作我的副本，但 ActualWidth 和 ActualHeight 遇到“0”，所以我无法判断 Chart 的 DataContext 是否正确复制。

我确实让我的图表使用

```
myChart.Width = newWidth;
myChart.Height = newHeight;

myChart.Measure(new System.Windows.Size(newWidth, newHeight));
myChart.Arrange(new Rect(0, 0, newWidth, newHeight)); 
```

或者说我的 Chart 的 ActualWidth 和 ActualHeight 更新到我想要的大小，但是我在我的文档上得到了一个黑色图像，图表应该在哪里。

那么如何打印一张图表，并将其正确缩放到选定的纸张尺寸？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:29:37.760

所以我找到了适合我的东西。我觉得这不是最干净的方法。

由于我需要缩放图表，我正在尝试打印我需要复制/克隆图表。

我用`myNewChart = new Chart() { DataContext = myOldChart.DataContext }`之前说的。

我在我的项目中添加了一个新窗口，并在其中渲染了我的新图表，这样我就不会从中得到黑色图像。

转换Window.xaml 代码。此代码与我的原始图表代码匹配。

```
<Window x:Class="QScanReportPrinting.ConvertingWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="ConvertingWindow"
    xmlns:cht="clr-namespace:System.Windows.Controls.DataVisualization.Charting;assembly=System.Windows.Controls.DataVisualization.Toolkit">

<Grid>
    <Grid.Resources>
        <!-- CutomColumnStyle Style -->
        <Style x:Key="CutomColumnStyle" TargetType="cht:ColumnDataPoint">
            <!--Background Color-->
            <Setter Property="Background" Value="{Binding barColor}"/>

            <!--Annotations, or column value labels-->
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="cht:ColumnDataPoint">
                        <Grid>
                            <Rectangle Fill="{TemplateBinding Background}" Stroke="Black"/>
                            <Grid Margin="0 -20 0 0" HorizontalAlignment="Center" VerticalAlignment="Top">
                                <TextBlock Text="{TemplateBinding FormattedDependentValue}" FontWeight="Bold" Margin="2">
                                    <TextBlock.RenderTransform>
                                        <RotateTransform Angle="-60" />
                                    </TextBlock.RenderTransform>
                                </TextBlock>
                            </Grid>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Grid.Resources>

    <!--Chart for Graph-->
    <cht:Chart x:Name="UI_Chart" Title="{Binding GraphTitle}" Background="White">
        <cht:Chart.Series>
            <cht:ColumnSeries Title="{Binding ChartKey}" ItemsSource="{Binding GraphDataCollection}" IndependentValueBinding="{Binding Path=X}" DependentValueBinding="{Binding Path=Y}"
                              DataPointStyle="{StaticResource CutomColumnStyle}">
                <cht:ColumnSeries.IndependentAxis>
                    <cht:CategoryAxis Orientation="X">
                        <cht:CategoryAxis.AxisLabelStyle>
                            <Style TargetType="cht:AxisLabel">
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="cht:AxisLabel">
                                            <TextBlock Text="{TemplateBinding FormattedContent}">
                                            <TextBlock.LayoutTransform>
                                                <RotateTransform Angle="-60"/>
                                            </TextBlock.LayoutTransform>
                                            </TextBlock>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </cht:CategoryAxis.AxisLabelStyle>
                    </cht:CategoryAxis>
                </cht:ColumnSeries.IndependentAxis>
            </cht:ColumnSeries>
        </cht:Chart.Series>
    </cht:Chart>
</Grid> 
```

然后在我的虚拟机中调用。

```
 private void GetChartVisual()
    {
        // Initialize variable
        cw = new ConvertingWindow();

        cw.UI_Chart.DataContext = myNewChart.DataContext;

        // Set MainWindow to be the owner of this window
        cw.Owner = Application.Current.MainWindow;
        // Set DataContext to this DataContext 
        // Allows binding with variables already loaded
        cw.DataContext = this;

        cw.Show();

        myNewChart = cw.UI_Chart;

        cw.Close();
    } 
```

通过这样做，它呈现了我的视觉效果。然后我可以将其调整为我想要的大小，而不会影响我的原始图表。不是最漂亮的东西，但它有效。

# java - Java 日历/日期问题

> ID：13181069
> 
> 赞同：2
> 
> 时间：2012-11-01T16:10:56.830
> 
> 标签：java

我正在构建一个月份列表，我将其用作 JSP 中表的标题。

我正在做的是比较我从数据库中获得的月份，并一直迭代或“尝试”到那个月份。在这种情况下，月份是 11 月

问题是我只能从 2012 年 10 月到 2013 年 10 月建立一个列表

我的逻辑看起来很合理，我不确定我还能尝试什么。

起点和比较..从数据库中，关键是

```
int effortYear = 2013
Calendar max = Calendar.getInstance();
         max.set(effortYear,8,1,0,0,0);
   for (ItemUnitBean item:  scheduledBeans)

       {
             ItemUnitBean bean = new ItemUnitBean();
          for(Entry<Date, ItemPhasing> en : item.getScheduledItemByMonth().entrySet() )
           {
System.out.println( "KEY= " + en.getKey() );  // KEY =2013-11-01 
  if ( en.getKey().compareTo(max.getTime()) > 0 ) 
              {
                    max.setTime(en.getKey());
              }

           }
          finalScheduledBeans.add(bean);
       } 
```

现在建立列表：

```
TreeSet<Date> scheduledMonthList = new TreeSet<Date>();
  Calendar temp = Calendar.getInstance();
         temp.set(effortYear-1,9,1,0,0,0);

         do 
         {
             scheduledMonthList.add(temp.getTime());
             System.out.println("montList= " + temp.getTime()  );
             temp.add( Calendar.MONTH, 1 );

         }  while( temp.compareTo(max) <= 0 ); 
```

这是记录器吐出的内容：

![在此处输入图像描述](../Images/07ca649bb47edfe5c280bad5d2df1798.png)

谁能看到为什么 11 月没有被添加到列表中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T16:48:45.717

您将使用设置为现在的日历开始循环，并在其中重置年、月、日、小时、分钟和秒。但是您没有将毫秒设置为 0。

因此，一旦到了 10 月，就加 1 个月，并获得 11 月*+ 几毫秒*。而 November *+ some milliseonsds*大于 November *+ 0 milliseconds*。

# asp.net-mvc - MVC 认证和授权

> ID：13181074
> 
> 赞同：0
> 
> 时间：2012-11-01T16:11:05.097
> 
> 标签：asp.net-mvc, authentication, authorization

我正在使用 MVC 4 并且正在使用表单身份验证。我听说 MVC 有自己的身份验证和授权实现，但不确定它是什么以及如何使用它。MVC 的实现叫什么，从表单迁移到使用它是否容易？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:42:08.263

答案是。有点。

MVC（版本 1-3）使用标准的会员数据库和表单身份验证。MVC 4 也使用标准的表单身份验证，但使用称为 WebSecurity 的系统来访问它的会员系统。WebSecurity 是为 WebMatrix 项目创建的，MVC 4 在默认模板中采用了它。

如果需要，您仍然可以使用标准会员系统，但是 WebSecurity（尤其是 SimpleMembership）允许对数据进行更大程度的自定义。

MVC 还可以通过多种方式进行配置以进行授权。可以使用较旧的 web.config 方法，也可以使用 AuthorizationFilters 等`[Authorize]`属性。这仍然使用 FormsAuthentication，但在幕后，它只是配置使用它的一种方式。

# asp.net-mvc-4 - 即使在 bundle 中的 CSS 文件被修改后也不会生成新的查询字符串令牌

> ID：13181080
> 
> 赞同：2
> 
> 时间：2012-11-01T16:11:18.467
> 
> 标签：asp.net-mvc-4, bundle, bundling-and-minification

我正在使用 ASP.NET MVC 4、.NET 4.5。

这是我要添加的捆绑包：

```
bundles.Add( new StyleBundle( "~/Content/css" ).Include(
                        "~/Content/bootstrap/css/bootstrap.css",
                        "~/Content/bootstrap/css/bootstrap-responsive.css",
                        "~/Content/site.css" ) ); 
```

这是从此包生成的 CSS 的链接：

```
<link href="/Content/css?v=8HZAB6C8ZnrIPYNFzMQKt0AR4AUsUYBjxPPkbGSRIZo1" rel="stylesheet"> 
```

我的问题是我正在修改作为捆绑包的一部分的 bootstrap.css 并且它没有为**v** 查询字符串 var 生成新令牌，因此它会提取旧版本。

我尝试强制重新启动应用程序以获取 asp.net 优化框架以找出我已更改此文件但它没有发生...

非常感谢任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T14:21:19.943

好的，今天早上经过一个小时的反复试验，我能够找出这个问题的原因。

在 bootstrap.css 所在的同一目录中，我还从原始下载中获得了 bootstrap.min.css 的副本。因此，一旦我删除了 .min 文件，它就开始在捆绑和缩小过程中获取我的更改。

希望这对其他人有帮助。

# ruby-on-rails - Rails 单元测试模型验证：包含失败

> ID：13181083
> 
> 赞同：0
> 
> 时间：2012-11-01T16:11:29.353
> 
> 标签：ruby-on-rails, ruby, unit-testing, inclusion

模型顺序.rb

```
class Order < ActiveRecord::Base
    attr_accessible :address, :email, :name, :payment_type_id
    belongs_to :payment_type

    PAYMENT_TYPES = PaymentType.pluck(:id)

    validates :name, :address, :email, :payment_type_id, :presence => true
    validates :payment_type_id, :inclusion => {:in => PAYMENT_TYPES}
end 
```

模型 payment_type.rb

```
class PaymentType < ActiveRecord::Base
  attr_accessible :name, :id

  has_many :order
end 
```

在浏览器中，验证工作正常，如果错误则给出错误，否则继续。但问题是当我`rake test:functionals`从终端运行时。测试没有通过验证。如果我评论这一行：

```
validates :payment_type_id, :inclusion => {:in => PAYMENT_TYPES} 
```

一切正常。我不明白为什么它可以在一个地方工作，但在测试中却不行？...

夹具一切正常。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T02:59:45.557

最有可能的问题是，您将付款类型存储在一个常量中。

为了使您的测试正常工作，`PaymentTypes`必须在 rails 加载您的`Order`模型之前在数据库中可用，但情况可能并非如此。

解决此问题的一种方法是使用（记忆的）类方法来存储您的付款类型。只要你`PaymentTypes`在数据库中访问这个类方法，你应该没问题。

```
class Order < ActiveRecord::Base
  validates :payment_type_id, :inclusion => { :in => self.payment_types }

  def self.payment_types
    @@payment_types ||= PaymentType.pluck(:id)
  end
end 
```

# c++ - 在 typedef 结构中定义结构

> ID：13181084
> 
> 赞同：-1
> 
> 时间：2012-11-01T16:11:35.543
> 
> 标签：c++, struct

```
typedef struct leaf{
  int value;
  struct leaf* lchild;
  struct leaf* rchild;
} LEAF; 
```

例如，上面定义了结构`leaf`并创建了该类型的 2 个成员：lchild、rchild。那么这像递归吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:21:10.317

你的假设是错误的。`leaf`有 2 个类型的成员`leaf*`，不是`leaf`。所以这不是（数据）递归。

以及以下

```
struct leaf
{
    leaf x;
}; 
```

在 C++ 中是非法的。请注意，在 C++ 中，`struct leaf`当您声明该类型变量的成员时不需要，也不需要`typedef`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T16:38:56.390

[递归](https://en.wikipedia.org/wiki/Recursion_%28computer_science%29)的含义是：

> “...允许函数调用自身...”

您所拥有的基本上只是对另一个结构的引用（指针）。

假设您正在使用二叉树，递归的一个例子就是中[序](https://en.wikipedia.org/wiki/Tree_traversal#Inorder)搜索。inorder方法将*自身*调用到左孩子和右孩子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T16:19:09.957

这是您经常希望使用递归算法处理的数据结构。所以是的，我想这有点像“数据递归”。

请注意，“叶子”是一个非常糟糕的名字。按照正常的术语，叶子没有孩子，“节点”或类似的东西将是正常的名称。

# .htaccess - 产生 404 错误的链接中的 ASCII 字符

> ID：13181092
> 
> 赞同：1
> 
> 时间：2012-11-01T16:12:02.667
> 
> 标签：.htaccess, url-rewriting, query-string, ascii

我曾经在我的所有网址中都有一个查询字符串 ?q= 。我现在将这些 url 重定向到别名。

`RewriteRule ^(.*)$ index.php?q=$1 [L,NC] RewriteCond %{QUERY_STRING} ^q=(.*)$ [NC] RewriteRule ^$(.*) /%1? [R=301,L,NE]`

不幸的是，其他网站以这种方式链接到我网站上的页面 www.example.com/%3Fq%3Dfaqs。我将我网站上的所有链接都更改为绝对链接，但不知何故，谷歌已经索引了数百个看起来像 www.example.com/%3Fq%3Dfaqs?q=contact 或 www.example.com/%3Fq%3Dfaqs%3Fq% 的页面3D接触。有没有办法可以使用 htaccess 或其他方法将这些 ASCII 代码重写回符号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T14:25:03.230

我通过写这样的行来解决这个问题`Redirect 301 /?q=faqs example.com/?q=faqs`This redirected /%3Fq%3Dfaqs to /?q=faqs which redirected to /faqs. 可能不是最好的方法，但它确实有效。

# objective-c - iOS块对象而不复制？

> ID：13181093
> 
> 赞同：3
> 
> 时间：2012-11-01T16:12:02.743
> 
> 标签：objective-c, ios, block

最近我了解到如果我需要保留一个块对象，我应该复制该块，因为它是在堆栈上创建的。

然后我回顾了我的一些代码。我发现我正在做类似的事情：

```
@implementation MyView
...
-(void) addButton:(NSString *)title clickAction:(void ^(void)) action {
    [self.buttons addObject:@[ title, action ] ];
}
-(void) createButtons { ... }
...
@end

...

// Somewhere in my project:
-(void) init {
     MyView *view = [MyView new];
     [view addButton:@"OK"     clickAction:^{ NSLog(@"OK");     }];
     [view addButton:@"Cancel" clickAction:^{ NSLog(@"Cancel"); }];
} 
```

基本上，我向 MyView 添加了一些按钮信息。在某些时候，MyView 将创建按钮。当按钮被点击时，MyView 会找出对应的 clickAction，并调用它。

奇怪的是，这个程序运行良好，没有异常，没有错误。

那么，为什么程序在不复制块对象的情况下运行呢？

其他信息：* iphone app (4.3 - 6.0) * 非 ARC * XCode 4.5

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T16:22:02.147

在幕后，块实现由两部分组成：

*   块的可执行代码，以及
*   包含块中使用的变量值的数据结构

仅将块的第二部分放入堆栈并复制到堆内存中；第一部分被编译成程序的代码段，不会被复制。

由于您的块实现不引用周围范围内的任何变量，因此它们的块的数据部分是空的。这就是您的代码有效的原因：根本没有什么可复制的！但是，无论如何，您都应该添加块副本，否则对块代码的微小更改会破坏您的应用程序，而编译器不会注意到任何事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T16:24:12.070

编译器根据块的作用创建不同类型的块。如果一个块没有捕获任何变量，那么它可以用一个`NSGlobalBlock`(`NSGlobalBlock`只是一个函数指针) 来表示。我怀疑这就是正在发生的事情。

# google-app-engine - 在同一个 webapp 中使用 flask 和 webapp2

> ID：13181095
> 
> 赞同：1
> 
> 时间：2012-11-01T16:12:07.907
> 
> 标签：google-app-engine, python-2.7, flask, webapp2

我是 python 的新手。我在 GAE python 中为我的 webapp 使用 webapp2 和 jinja2。我在烧瓶框架中有一个登录功能。

现在我需要将登录功能集成到我的 webapp 中。

www.example.com/ - 使用 webapp2 框架和 jinja2 模板
www.example.com/login - 使用烧瓶框架

除了将烧瓶中编写的代码更改为 webapp2 之外，还有其他方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T16:36:46.947

也许这会有所帮助：

[https://github.com/kamalgill/flask-appengine-template](https://github.com/kamalgill/flask-appengine-template)

> 用于在 Google App Engine (Python) 上运行基于 Flask 的应用程序的样板项目模板

# sql - 从一列中获取三行的总和？

> ID：13181101
> 
> 赞同：-2
> 
> 时间：2012-11-01T16:12:28.547
> 
> 标签：sql

我有一个表，其中的数据类似于：

```
user  type       hours    used    --to make another column with this info    available

2334  sick       10.000   2.000                                              8.000
2334  vacation   48.000   56.000                                             -8.000
2334  personal   0        8.000                                              0
1356  sick       0        16.000                                             -16.000
1356  vacation   80.000   0                                                  80.000
1356  personal   14.000   14.000                                             0
4355  sick       4.000    1.000                                              3.000
4355  vacation   112.000  0                                                  112.000 
4355  personal   8.000    0                                                  8.000 
```

我必须总结小时列中的值，但仅限于每个用户。因此，用户 2334 将获得`58.000`小时数，`10.000 + 48.000 + 0`但会使用`66.000`小时数导致`-8.000`小时数。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T16:13:22.613

```
SELECT user, SUM(hours) totalHours
FROM tableName
GROUP BY user 
```

*   [**查看 SQLFiddle 演示**](http://sqlfiddle.com/#!2/1c6f9/1)

# mercurial - 如何 Hg Shelve 添加了尚未提交的文件

> ID：13181103
> 
> 赞同：18
> 
> 时间：2012-11-01T16:12:44.640
> 
> 标签：mercurial, shelving

我正在使用 Mercurial [Shelve 扩展](https://www.mercurial-scm.org/wiki/ShelveExtension)从命令行搁置更改。它工作得很好，除非我想搁置的更改在工作目录中包含新添加的文件（a）。基本上，它会搁置除新添加的文件之外的所有内容。我通过查看 .hg/shelve 存储的更改来检查这一点。

如何搁置新添加的文件（一种状态）？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-10-08T12:15:57.227

此响应已过期，但您可以使用以下命令搁置所有文件（跟踪/取消跟踪）：

```
hg shelve -A 
```

或者

```
hg shelve --addremove 
```

关于这个命令，文档说：

> 在搁置之前将新/丢失的文件标记为添加/删除

您必须注意使用此功能，因为在取消搁置后，您的旧未跟踪文件会被跟踪。如果在 hg commit 命令中没有指定文件，这些文件已经在最后一次提交中提交。如果您想再次取消跟踪它们，您应该使用 hg forget。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-09-19T20:13:52.250

我假设您在谈论当前未跟踪的文件？您需要添加第一个。

因此，只需`hg add`为您的新文件执行此操作，然后`hg shelve`也将它们搁置。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-03T01:30:45.900

谢谢你，汤姆。我正在使用Mac，所以它并没有真正起作用。起作用的是另一个反复无常的扩展“hgattic”，您可以在我的博客中阅读更多信息

[http://margotskapacs.com/2012/10/shelving-uncommitted-changes-in-mercurial/](http://margotskapacs.com/2012/10/shelving-uncommitted-changes-in-mercurial/)

（请参阅“错误 - 添加的文件无法搁置”部分）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T20:44:21.520

如果命令行不是绝对必要的：

然后只需键入（在 Linux 上）

```
thg shelve 
```

这使您可以轻松搁置已添加（但尚未提交）的文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-17T02:05:58.933

作为一个主要使用 Git 的用户，我发现 Atlassian [SourceTree](http://www.sourcetreeapp.com/)是处理我必须使用的奇怪的 Mercurial 存储库的最简单方法。它内置了搁板。价格也合适（免费）。

*免责声明：我为 Atlassian 工作*

# css - Chrome和Safari中文本链接上的CSS鼠标点击区域太大

> ID：13181105
> 
> 赞同：0
> 
> 时间：2012-11-01T16:12:50.490
> 
> 标签：css

我相信 CSS 文件中的某些内容导致 Chrome 和 Safari 在所有文本链接的区域上创建了超大的鼠标。IE 或 Firefox 不会发生这种情况。谁能给我一个关于 CSS 有什么问题的提示？鼠标变为链接周围正常范围之外的指针方式。感谢您的帮助。

有问题的页面：http: [//developer4you.net](http://developer4you.net)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T19:00:00.643

感谢云岑！

`<a>`如果您在 CSS 中使用 Cambria Math 字体，一些浏览器（即 Chrome 和 Safari）会将可点击区域定位在元素的正常点击区域边界之外。这使页面对用户不友好。Stackoverflow 摇摆不定，再次感谢 yunzen！

# mysql - 将表连接在一起，为外部链接创建新列

> ID：13181106
> 
> 赞同：1
> 
> 时间：2012-11-01T16:12:51.043
> 
> 标签：mysql, join

> **可能重复：**
> [带有 3 个表的数据透视表](https://stackoverflow.com/questions/12986802/pivot-table-with-3-tables)

**编辑**：对不起，我的一列错了

我有以下表格：

```
_______________________________________
| ItemID | ItemName | ItemDescription |
|________|__________|_________________|
|   1    |  Alice   |       Foo       |
|________|__________|_________________|
|   2    |   Bob    |       Bar       |
|________|__________|_________________| 
```

* * *

```
________________________
| LinkID | LinkAddress |
|________|_____________|
|   1    |  www.c.com  |
|________|_____________|
|   2    |  www.b.com  |
|________|_____________|
|   3    |  www.a.com  |
|________|_____________| 
```

* * *

```
________________________________________
| AssocID | ItemID | LinkID | LinkType |
|_________|________|________|__________|
|    1    |   1    |   3    | Youtube  |
|_________|________|________|__________|
|    2    |   2    |   2    | Facebook |
|_________|________|________|__________|
|    3    |   2    |   1    | Twitter  |
|_________|________|________|__________| 
```

我正在尝试获取一个 SQL 查询来创建这样的结果：

```
__________________________________________________________________
| ItemName | ItemDescription | Youtube   | Facebook  |  Twitter  |
|__________|_________________|___________|___________|___________|
|  Alice   |       Foo       |   NULL    |   NULL    | www.a.com |
|__________|_________________|___________|___________|___________|
|   Bob    |       Bar       | www.c.com | www.b.com |   NULL    |
|__________|_________________|___________|___________|___________| 
```

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T16:17:55.127

```
SELECT  a.ItemName, a.ItemDescription,
        MAX(CASE WHEN b.LinkType = 'Youtube' THEN c.LinkAddress ELSE NULL END) youtube,
        MAX(CASE WHEN b.LinkType = 'Facebook' THEN c.LinkAddress ELSE NULL END) Facebook,
        MAX(CASE WHEN b.LinkType = 'Twitter' THEN c.LinkAddress ELSE NULL END) Twitter
FROM    tableName a
        LEFT JOIN tableAssco b
            ON a.ItemID = b.ItemID
        LEFT JOIN tableLinks c
            ON b.LinkID = c.LinkID
GROUP BY a.ItemName, a.ItemDescription 
```

*   [**SQLFiddle 演示**](http://sqlfiddle.com/#!2/916cf/2)

或通过使用`Prepared Statements`

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'MAX(CASE WHEN b.LinkType = ''',
      LinkType,
      ''' then c.LinkAddress ELSE NULL end) AS ',
      LinkType
    )
  ) INTO @sql
FROM tableAssco;

SET @sql = CONCAT('SELECT  a.ItemName, a.ItemDescription, ', @sql, ' 
                   FROM    tableName a
                          LEFT JOIN tableAssco b
                              ON a.ItemID = b.ItemID
                          LEFT JOIN tableLinks c
                              ON b.LinkID = c.LinkID
                  GROUP BY a.ItemName, a.ItemDescription');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

*   [**SQLFiddle 演示**](http://sqlfiddle.com/#!2/916cf/3)

# jquery - 如何在mvc3中将参数传递给外部Web服务

> ID：13181113
> 
> 赞同：0
> 
> 时间：2012-11-01T16:13:02.437
> 
> 标签：jquery, web-services

网络服务是这样的，
我在部分视图中使用了这个

```
 <form action="www.xyz/x/y" method="post">
    <input type="hidden" name="abc" value="40" />
<input type="button" id="btn"/>
   /> 
```

当我单击按钮时，webservice 的输出将是这样的。 `abc:40` 我在 jscript 中有一个变量，其值约为 80。当我们选择 1,2 时，每次它都会像乘以 1,2 一样发生变化。现在，当我单击按钮时，该值应该会改变。喜欢`abc:80` `abc:160`

我怎样才能传递这个变量。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T05:18:47.353

最后我得到了答案。它简单
地将 id 赋予隐藏字段

`$("#selector").val();`

# mysql - Web请求性能在压力下真的很糟糕

> ID：13181114
> 
> 赞同：2
> 
> 时间：2012-11-01T16:13:05.217
> 
> 标签：mysql, performance, flask, load-testing

我使用 python 和 Flask 框架编写了一个 Web 应用程序，并使用 mod_wsgi 在 Apache 上设置它。今天我使用 JMeter 对这个应用程序进行一些负载测试。对于一个网址：

*   当我只设置1个线程发送请求时，响应时间为200ms

*   当我设置20个并发线程发送请求时，响应时间增加到超过4000ms（4s）。这是无法接受的！

我试图找出问题所在，所以我在烧瓶的 before_request 和 teardown_request 方法中记录了时间。事实证明，处理请求所花费的时间刚刚超过 10 毫秒。

在这个 URL 处理程序中，应用程序只是在 Mysql 数据库中执行一些 SQL 查询（大约 10 个），没什么特别的。

为了测试问题是否出在 Web 服务器或框架配置上，我在同一个烧瓶应用程序中编写了另一个方法 Hello，它只返回一个字符串。它在负载下表现完美，响应时间为 13 毫秒，20 线程并发。

在进行负载测试时，我在服务器上执行“top”，大约有 10 个 apache 线程，但 CPU 大部分是空闲的。

我现在无计可施。即使请求是串行执行的，性能也不应该如此急剧下降......我的猜测是在我不知道的地方有一些排队，除了处理请求之外，肯定还有开销。

如果您有调优 Web 应用程序性能的经验，请帮助！

*编辑*

关于apache的配置，我用的是MPM worker模式，配置：

```
<IfModule mpm_worker_module>
    StartServers          4
    MinSpareThreads      25
    MaxSpareThreads      75
    ThreadLimit          64
    ThreadsPerChild      50
    MaxClients          200
    MaxRequestsPerChild   0
</IfModule> 
```

至于 mod_wsgi，我尝试打开和关闭 WSGIDaemonProcess（通过注释掉以下行），性能看起来是一样的。

```
# WSGIDaemonProcess tqt processes=3 threads=15 display-name=TQTSERVER 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:32:56.140

恭喜！您发现了性能问题 - 而不是您的用户！

分析 Web 应用程序的性能问题通常很困难，因为有很多活动部件，而且在运行时很难看到应用程序内部。

您描述的行为通常与瓶颈资源相关联 - 当存在无法跟上的特定资源时会发生这种情况，因此将请求排队，这往往会导致响应时间出现“曲棍球棒”曲线 - 一旦你达到目标在这个资源跟不上的地方，响应时间会很快增加。

20 个并发线程似乎很少发生这种情况，除非你在页面上做了很多非常繁重的工作。

首先要开始的地方是 TOP - 当 CPU 很低时，内存、磁盘访问等在做什么？您的数据库是否在同一台机器上运行？如果不是，TOP 在数据库服务器上说什么？

假设这不是一些愚蠢的硬件问题，下一个最可能的问题是该页面上的数据库访问。当您想要的只是一条记录时，可能是一个查询实际上返回了整个数据库（这是 ORM 解决方案中相当常见的反模式）；这可能导致您描述的行为。我会使用 Flask 日志框架来记录您的数据库调用（开始、结束、返回的记录数），并在那里查找异常情况。

如果数据库在负载下表现良好，则要么是框架，要么是应用程序代码。再次，在代码中使用日志语句来跟踪各个代码块的执行时间，并继续寻找......

它并不迷人，而且可能非常乏味 - 但在上线之前你发现它要好得多！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T23:45:57.070

看看使用 New Relic 来确定瓶颈在哪里。在我的演讲中查看它的概述和关于识别瓶颈的讨论：

[http://lanyrd.com/2012/pycon/spcdg/](http://lanyrd.com/2012/pycon/spcdg/)

还要编辑您的原始问题并添加您正在使用的 mod_wsgi 配置，以及您使用的是 Apache prefork 还是 worker MPM，因为您可能在那里做一些非最佳的事情。

# java - 2 Java 中的错误，没有线索

> ID：13181115
> 
> 赞同：3
> 
> 时间：2012-11-01T16:13:10.963
> 
> 标签：java

我是一个编程初学者，我正在尝试用java完成我的第一个小程序，已经解决了很多错误，还剩下2个错误。我想我已经导入了所有需要的东西，但错误仍然出现。

错误：

1.  Container 类型的方法 SetLayout(FlowLayout) 未定义
2.  B1 无法解析为类型（也发生在 B2 和 B5 中）

这是我的代码：

```
 import java.awt.Color;
    import java.awt.Container;
    import java.awt.FlowLayout;

    import javax.swing.JButton;
    import javax.swing.JFrame;
    import javax.swing.JTextField;

    class Przyciski3 extends JFrame{
    JTextField t = new JTextField(20);
    JButton b1 = new JButton("B");
    JButton b2 = new JButton("A");
    JButton b5 = new JButton("Reset");
    int i=0;
    int j=0;

    Przyciski3(){
    setTitle("Przyciski3");
    Container cp = getContentPane();
    cp.SetLayout(new FlowLayout());
    cp.add(b1);
    cp.add(b2);
    cp.add(t);
    cp.add(b5);
    setDefaultCloseOperation(EXIT_ON_CLOSE);
    setSize(500,200);
    setVisible(true);
    b1.addActionListener(new B1());
    b2.addActionListener(new B2());
    b5.addActionListener(new B5());
    b1.setBackground(Color.green);
    b2.setBackground(Color.blue);
    b5.setBackground(Color.black);
    }
    }
class B1 implements ActionListener{
public void actionPerformed(ActionEvent 0){
i++;
t.setText(""+i);
}
}

class B2 implements ActionListener {
public void actionPerformed(ActionEvent 0){
j++;
t.setText(""+j);
}
}
public static void main (String[] arg){
JFrame f = new Przyciski();
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T16:15:15.247

*   更改`cp.SetLayout(...)`为`cp.setLayout(...)`。Java 区分大小写。
*   在`public void actionPerformed(ActionEvent 0){`您尝试`ActionEvent`通过`0`. 在 Java 中，变量名不能以数字开头，因此请尝试将其更改为`ActionEvent action`.
*   什么是`i`和`t`在你`B1`和`B2`班级？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T16:15:37.320

这只是错误的情况......你需要`cp.setLayout(new FlowLayout());`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T16:16:22.063

java区分大小写。

```
cp.SetLayout(new FlowLayout()); 
```

应该

```
cp.setLayout(new FlowLayout());[Container class API][1] 
```

# sql - SQL - 如何取出链式数据？

> ID：13181117
> 
> 赞同：-1
> 
> 时间：2012-11-01T16:13:11.867
> 
> 标签：sql, orm

我有 4 个为我自动生成的表：

*   用户
*   挑战
*   锻炼
*   挑战_运动

一位用户可能有许多挑战，而一个挑战将有许多练习。

我注意到的是，挑战表引用了它的父用户（称为 user_id），但练习表中没有对挑战的引用；他们的关系存储在 Challenge_Exercise 作为 Challenge_id 和 exercise_id。

我的问题是，我将如何取出每个与特定用户相关联的练习？例如 id = 1 的用户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:18:03.130

```
SELECT *
FROM   excerise,
       challenge_excerise,
       challenge
WHERE  challenge.user_id = 1
       AND challenge_excerise.challenge_id = challenge.id
       AND challenge_excerise.exercise_id = excercise.id 
```

我在这里做的是一个`join`，你也可以明确地用它来做`inner joins`（如果你想知道更多，谷歌它）。

需要此表是因为您有`many to many`关系，这意味着每个挑战可以有多个练习，但每个练习也可以有多个挑战。那时做一个额外的表是一个标准，所以你没有多余的数据，这个表通常被称为`junction table`.

如果你想要背景，只需谷歌它，这个主题有大量数据。

# plot - 使用 matplotlib 或 pyqtgraph 绘制实时数据

> ID：13181118
> 
> 赞同：6
> 
> 时间：2012-11-01T16:13:13.840
> 
> 标签：plot, matplotlib, pyqt4

我有设备连接到我的串行端口，我需要轮询它们，然后在图中显示该数据。我目前正在使用matplotlib（缓慢地）进行这项工作。我最多可以连接 64 台设备，每台设备可以更新 20 条数据。我已经对其进行了设置，以便可以创建一个新窗口并添加一条数据以进行绘制。每打开一个额外的绘图窗口，我的更新速度就会大大减慢。
我已经尝试在 matplotlib 中使用 blit 动画，但它并不流畅，我可以在更新中看到异常。我试过 PyQtGraph，但找不到任何关于如何使用这个包的文档，现在我正在尝试 PyQwt，但无法安装它（主要是因为我的公司不会让我们安装一个包处理 .gz 文件）。任何想法或建议将不胜感激。

```
import sys
from PyQt4.QtCore import (Qt, QModelIndex, QObject, SIGNAL, SLOT, QTimer, QThread,  QSize, QString, QVariant)
from PyQt4 import QtGui

from matplotlib.figure import Figure
from matplotlib.backends.backend_qt4agg import FigureCanvasQTAgg as FigureCanvas
from plot_toolbar import NavigationToolbar2QT as NavigationToolbar
import matplotlib.dates as md
import psutil as p
import time
import datetime as dt
import string
import ui_plotting
import pickle

try:
  _fromUtf8 = QString.fromUtf8
except AttributeError:
  _fromUtf8 = lambda s: s

class Monitor(FigureCanvas):
"""Plot widget to display real time graphs"""
  def __init__(self, timenum):
    self.timenum=timenum
    self.main_frame = QtGui.QWidget()
    self.timeTemp1 = 0
    self.timeTemp2 = 0
    self.temp = 1
    self.placeHolder = []
    self.y_max = 0
    self.y_min = 100

# initialization of the canvas
#        self.dpi = 100
#        self.fig = Figure((5.0, 4.0), dpi=self.dpi)
    self.fig = Figure()
    FigureCanvas.__init__(self, self.fig)
#        self.canvas = FigureCanvas(self.fig)
#        self.canvas.setParent(self.main_frame)
# first image setup
#        self.fig = Figure()
#        self.fig.subplots_adjust(bottom=0.5)
    self.ax = self.fig.add_subplot(111)
    self.mpl_toolbar = NavigationToolbar(self.fig.canvas, self.main_frame,False)
    self.mpl_toolbar.setFixedHeight(24)

# set specific limits for X and Y axes
#        now=dt.datetime.fromtimestamp(time.mktime(time.localtime()))       
#        self.timenum = now.strftime("%H:%M:%S.%f")
    self.timeSec = 0      
    self.x_lim = 100
    self.ax.set_xlim(0, self.x_lim)
    self.ax.set_ylim(0, 100)
    self.ax.get_xaxis().grid(True)
    self.ax.get_yaxis().grid(True)
# and disable figure-wide autoscale
    self.ax.set_autoscale_on(False)
    self.ax.set_xlabel('Time in Seconds')
# generates first "empty" plots
    self.timeb = []
    self.user = []
    self.l_user = []
    self.l_user = [[] for x in xrange(50)]
    for i in range(50):
        self.l_user[i], = self.ax.plot(0,0)

# add legend to plot
#        self.ax.legend()

def addTime(self,t1,t2):
    timeStamp = t1+"000"
#   print "timeStamp",timeStamp
    timeStamp2 = t2+"000"
    test = string.split(timeStamp,":")
    test2 = string.split(test[2],".")        
    testa = string.split(timeStamp2,":")
    testa2 = string.split(testa[2],".")

    sub1 = int(testa[0])-int(test[0])
    sub2 = int(testa[1])-int(test[1])
    sub3 = int(testa2[0])-int(test2[0])
    sub4 = int(testa2[1])-int(test2[1])

    testing = dt.timedelta(hours=sub1,minutes=sub2,seconds=sub3,microseconds=sub4)

    self.timeSec = testing.total_seconds()

def timerEvent(self, evt, timeStamp, val, lines):
    temp_min = 0
    temp_max = 0
# Add user arrays for each user_l array used, don't reuse user arrays
    if self.y_max<max(map(float, val)):
        self.y_max = max(map(float, val))
    if self.y_min>min(map(float, val)):
        self.y_min = min(map(float, val))            
#       print "val: ",val
    if lines[len(lines)-1]+1 > len(self.user):
        for k in range((lines[len(lines)-1]+1)-len(self.user)):
            self.user.append([])

# append new data to the datasets
#        print "timenum=",self.timenum
    self.addTime(self.timenum, timeStamp)
    self.timeb.append(self.timeSec)
    for j in range((lines[len(lines)-1]+1)):
        if j >49:
            break
        if j not in lines:
            del self.user[j][:]
            self.user[j].extend(self.placeHolder)
            self.user[j].append(0)
        else:
            if len(self.timeb) > (len(self.user[j])+1):
                self.user[j].extend(self.placeHolder)
            self.user[j].append(str(val[lines.index(j)])) 

    for i in range(len(lines)):
        if i>49:
            break
        self.l_user[lines[i]].set_data(self.timeb, self.user[lines[i]])
# force a redraw of the Figure

#        if self.y_max < 2:
#            self.y_max = 2
#        if self.y_min < 2:
#            self.y_min = 0 
    if self.y_min > -.1 and self.y_max < .1:            
        temp_min = -1
        temp_max = 1
    else:
        temp_min = self.y_min-(self.y_min/10)
        temp_max = self.y_max+(self.y_max/10)

    self.ax.set_ylim(temp_min, temp_max)
    if self.timeSec >= self.x_lim:
        if str(self.x_lim)[0]=='2':
            self.x_lim = self.x_lim * 2.5
        else:
            self.x_lim = self.x_lim * 2
        self.ax.set_xlim(0, self.x_lim)
#        self.fig.canvas.restore_region(self.fig.canvas)
#        self.ax.draw_artist(self.l_user[lines[0]])
#        self.fig.canvas.blit(self.ax.bbox)
    self.fig.canvas.draw()

#        self.draw()

    self.placeHolder.append(None)

class List(QtGui.QListWidget):

  def __init__(self, parent):
    super(List, self).__init__(parent)

    font = QtGui.QFont()
    font.setFamily(_fromUtf8("Century Gothic"))
    font.setPointSize(7)
    self.setFont(font)
    self.setDragDropMode(4)
    self.setAcceptDrops(True)
    self.row = []
    self.col = []
    self.disName = []
    self.lines = []
    self.counter = 0
    self.setStyleSheet("background-color:#DDDDDD")
    self.colors = ["blue", "green", "red", "deeppink", "black", "slategray", "sienna", "goldenrod", "teal", "orange", "orchid", "lightskyblue", "navy", "darkgreen", "indigo", "firebrick", "deepskyblue", "lightskyblue", "darkseagreen", "gold"]

def dragEnterEvent(self, e):
    if e.mimeData().hasFormat("application/x-qabstractitemmodeldatalist"):
#            print "currentRow : ", self.currentRow()
#            print "self.col: ", self.col
#            print "self.row: ", self.row
#            print "self.col[]: ", self.col.pop(self.currentRow())
#            print "self.row[]: ", self.row.pop(self.currentRow())

        self.col.pop(self.currentRow())
        self.row.pop(self.currentRow())
        self.disName.pop(self.currentRow())
        self.lines.pop(self.currentRow())
        self.takeItem(self.currentRow())
    if e.mimeData().hasFormat("application/pubmedrecord"):
        e.accept()
    else:
        e.ignore() 

def dropEvent(self, e):

    items = 0
    data = e.mimeData()
    bstream = data.retrieveData("application/pubmedrecord", QVariant.ByteArray)
    selected = pickle.loads(bstream.toByteArray())
    e.accept()
#        print selected
#        if self.count() != 0:
#            j = (self.lines[self.count()-1]%len(self.colors))+1

#        else:
#            j=0
    while items < len(selected):
        j=self.counter
        if j >= len(self.colors)-1:
            j = self.counter%len(self.colors)
        m = len(self.lines)
        self.lines.append(self.counter)
#            if m != 0:
#                n = self.lines[m-1]
#                self.lines.append(n+1)
#            else:
#                self.lines.append(0)
        self.col.append(str(selected[items]))
        items = items+1
        self.row.append(str(selected[items]))
        items = items+1
        self.disName.append(str(selected[items]))
        listItem = QtGui.QListWidgetItem()
        listItem.setText(str(selected[items]))

        listItem.setTextColor(QtGui.QColor(self.colors[j]))
        self.addItem(listItem)            
        items = items+1

        self.counter += 1
def dragLeaveEvent(self, event):
    event.accept()  

class PlotDlg(QtGui.QDialog):
  NextID = 0
  filename = 'Plot'
  def __init__(self,time, callback, parent=None):
    super(PlotDlg, self).__init__(parent)
    self.id = PlotDlg.NextID
    PlotDlg.NextID += 1
    self.callback = callback
    self.setWindowFlags(Qt.Window | Qt.WindowMinimizeButtonHint | Qt.WindowMaximizeButtonHint)
    self.setAttribute(Qt.WA_DeleteOnClose,True)
    self.value = []
    print "time=",time
    self.time = time
    self.dc = Monitor(self.time)
#        self.threadPool = []

    self.listWidget = List(self)
    sizePolicy = QtGui.QSizePolicy(QtGui.QSizePolicy.Fixed, QtGui.QSizePolicy.MinimumExpanding)
    sizePolicy.setHorizontalStretch(0)
    self.listWidget.setSizePolicy(sizePolicy)
    self.listWidget.setMaximumSize(QSize(150, 16777215))

    grid = QtGui.QGridLayout()
    grid.setSpacing(0)
    grid.setContentsMargins(0, 0, 0, 0)
    grid.addWidget(self.dc.mpl_toolbar,0,0,1,12)
    grid.addWidget(self.listWidget,1,1)
    grid.addWidget(self.dc,1,0)
    grid.setColumnMinimumWidth(1,110)

    self.setLayout(grid)

def update(self, clear=0):
    if clear == 1:
 now=dt.datetime.fromtimestamp(time.mktime(time.localtime()))                         
        self.dc.timenum = now.strftime("%H:%M:%S.%f") 

        self.dc.timeSec = 0
        self.dc.x_lim = 100
        self.dc.y_max = 0
        self.dc.y_min = 100            
        del self.dc.timeb[:]
        del self.dc.user[:]
        del self.dc.placeHolder[:]

#            del self.dc.l_user[:]
#            self.dc.l_user = [[] for x in xrange(50)]
#            for i in range(50):
#                self.dc.l_user[i], = self.dc.ax.plot(0,0)
        for i in range(50):
            self.dc.l_user[i].set_data(0, 0)

#            print self.dc.l_user
#            print self.dc.user

        self.dc.ax.set_xlim(0, self.dc.x_lim)
        self.dc.fig.canvas.draw()
#        print self.value
#        print str(self.time)
#        print "time:",str(self.time)
#        self.threadPool.append( GenericThread(self.dc.timerEvent,None, str(self.time), self.value, self.listWidget.lines) )
#        self.threadPool[len(self.threadPool)-1].start()

    self.dc.timerEvent(None, str(self.time), self.value, self.listWidget.lines) 

def closeEvent(self, event):
#        self.update(1)
    self.callback(self.id)
    PlotDlg.NextID -= 1

class GenericThread(QThread):
  def __init__(self, function, *args, **kwargs):
    QThread.__init__(self)
    self.function = function
    self.args = args
    self.kwargs = kwargs

  def __del__(self):
    self.wait()

  def run(self):
    self.function(*self.args,**self.kwargs)
    return 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-06-07T01:05:20.357

pyqtgraph[网站](http://www.pyqtgraph.org)比较了绘图库，包括 matplotlib、chaco 和 pyqwt。总结是：

*   Matplotlib 是事实上的标准绘图库，但不是为速度而构建的。
*   Chaco 专为速度而生，但难以安装/部署
*   PyQwt 目前已被废弃
*   PyQtGraph 旨在提高速度且易于安装

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-02-06T16:25:22.617

我已经广泛使用 matplotlib 和 PyQtGraph，并且对于任何类型的快速或“实时”绘图我强烈推荐 PyQtGraph，（在一个应用程序中，我通过 12 个 32 位的串行连接绘制来自惯性传感器的数据流浮动每个以 1 kHz 的频率进入，并且没有明显的延迟。）

正如前面的人所提到的，PyQtGraph 的安装很简单，根据我的经验，它在 windows 和 linux 上的显示和执行大致相当（减去窗口管理器的差异），并且包含的​​示例中有大量的演示代码来指导完成几乎任何数据绘图任务。

PyQtGraph 的 Web 文档确实不太理想，但源代码注释很好且易于阅读，再加上文档完善且多样化的演示代码集，根据我的经验，它在易用性和性能方面都远远超过了 matplotlib（即使有更广泛的 matplotlib 在线文档）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-08T13:21:00.927

我建议[Chaco](http://docs.enthought.com/chaco/index.html) “......一个用于构建交互式和自定义二维图和可视化的包。” 它可以集成到 Qt 应用程序中，尽管您可能可以从 PyQwt 获得更高的帧速率。

我实际上用它来编写一个“应用程序”（这个词太大了：它不是很花哨，它都适合〜200 LOC），它从串行端口获取数据并绘制它（20 行，超过 20 fps， 15 fps 时 50，在我的笔记本电脑上全屏显示）。

Chaco 文档或在线帮助不如 matplotlib 全面，但我想它会有所改进，无论如何对我来说已经足够了。

作为一般建议，避免在每一帧都绘制所有内容，即，使用`.set_data`matplotlib 和 chaco 中的方法。此外，在 stackoverflow 中有一些关于使 matplotlib 更快的问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-05-31T08:43:25.867

这是使用动画功能的一种方法：

```
import numpy as np
import matplotlib.pyplot as plt
import matplotlib.animation as animation

fig, ax = plt.subplots()
data = np.zeros((32,100))
X = np.arange(data.shape[-1])

# Generate line plots
lines = []
for i in range(len(data)):
    # Each plot each shifter upward
    line, = ax.plot(X,i+data[i], color=".75")
    lines.append(line)

# Set limits
ax.set_ylim(0,len(data))
ax.set_xlim(0,data.shape[-1]-1)

# Update function
def update(*args):
    # Shift data left
    data[:,:-1] = data[:,1:]

    # Append new values
    data[:,-1] = np.arange(len(data))+np.random.uniform(0,1,len(data))

    # Update data
    for i in range(len(data)):
        lines[i].set_ydata(data[i])

ani = animation.FuncAnimation(fig, update,interval=10)
plt.show() 
```

# .net - 导入 DLL 并在 mono 下运行应用程序

> ID：13181124
> 
> 赞同：1
> 
> 时间：2012-11-01T16:13:28.600
> 
> 标签：.net, dll, import, mono, delphi-prism

我使用以下代码导入“winmm.dll”。

```
 MyUtils = public static class
  private
  protected
  public
    [DllImport("winmm.dll")]
    class method timeBeginPeriod(period:Integer):Integer; external;
    [DllImport("winmm.dll")]
    class method timeEndPeriod(period:Integer):Integer; external;
  end; 
```

访问方法如下。

```
MyUtils.timeBeginPeriod(1); //within winform load event
MyUtils.timeEndPeriod(1);   //within winform formclosing event 
```

在 Windows 7 下，它按预期工作得很好。在 Linux 系统上的 mono 下，它也可以正常工作，但有一个例外。程序启动后，会弹出一个消息框，其中包含导入的 dll 的名称和 OK 按钮，如下所示。当我单击“确定”按钮时，我的程序继续并按预期运行，没有任何错误。

![在此处输入图像描述](../Images/629f50182b183adef8a2d0a63e72cccb.png)

我已经梳理了我的程序，看看我是否有意在任何地方显示 dll 文件名，但我根本找不到类似的东西。

**编辑：**更多信息，我需要使用 winmm.dll 的原因是我需要能够将线程睡眠粒度或默认延迟调整到大约 1 毫秒或接近它 -**不要播放电影或音乐文件。**我能够调整的唯一方法是通过这些方法`timeBeginPeriod`和`timeEndPeriod`. 这样我的程序就可以通过串口成功通话了。我的程序是每隔几毫秒来回交谈一次，24/7/365 天不间断。至关重要的是，它的通信达到 90% 或更多。导入 dll 文件后，我的程序在 windows 和 linux 上的通信是完美的，除了我在单声道下的 Linux 上得到那个烦人的消息框。

我以前从未见过或听说过这样的问题。有人为什么吗？

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T16:26:19.260

我认为对 Mono 的工作方式存在一些误解。WinMM.dll 是 Windows 的本机二进制文件。Mono 不会自动允许您导入 winmm.dll 并在 linux 环境中使用它。我猜你的程序没有按预期运行，因为`timeBeginPeriod`and`timeEndPeriod`不会执行。

除非您有一些适用于 linux 的 Windows 多媒体模块的端口，否则这是行不通的。Mono 移植了`System.Media.SoundPlayer`有什么方法可以从中获得所需的一切吗？

Mono 中的 P/Invoke 运行良好，但您仍然需要为每个平台本地构建二进制文件。

有一篇感兴趣的文章关于[移植到 linux - 替换 winmm](http://lists.dot.net/pipermail/mono-devel-list/2007-June/023867.html)

您可能想查看 LGPL [LAME](http://lame.sourceforge.net)。

**更新**

问题是 Thread.sleep 不是一个准确的等待来创建确定性行为，而不管分辨率如何。您不能使用 Thread.sleep 以接近 1ms 的粒度同步某些内容。JVM 和 .NET 平台都可以达到接近 1ms 的精度，但是这并不能保证。如果系统很忙，您可能无法及时将上下文切换回您的线程，这意味着它可能是 3 毫秒、10 毫秒，甚至更糟糕的是 30 毫秒。

您应该搜索两件事。Linux 上的高分辨率计时器。以及如何创建实时系统。由于您几乎需要与毫秒通信，因此您需要研究实时系统并弄清楚如何创建一个确定性的计时系统。

大多数计时器只能让您获得接近 30 毫秒的分辨率。

如果您在 linux 上找到高分辨率计时器，您仍然需要考虑上下文切换和时间流逝以弥补丢失的时间，或者在亚毫秒处理时减慢速度。

我意识到您声称它在 Windows 上运行良好，但我试图解释它并没有真正按照您的想法工作。它现在可以工作，但是在该机器上可能会出现许多情况，这将导致您的系统无法以 1 毫秒的间隔处理数据，因此需要您在以后调试系统。

支持我的一些事情：[如何在 Windows 上使线程睡眠时间少于一毫秒](https://stackoverflow.com/questions/85122/sleep-less-than-one-millisecond)

# set - 如何使用基于鼠标的事件编辑和设置 Zedgraph 比例限制？

> ID：13181125
> 
> 赞同：2
> 
> 时间：2012-11-01T16:13:31.033
> 
> 标签：set, scale, zedgraph, limits

我想使用基于鼠标的事件**从用户界面级别设置 Zedgraph 比例限制，在**以下代码的帮助下，我可以以编程方式更改比例值，

> ```
>  GraphPane myPane = zedGraphControl1.GraphPane; 
> ```

```
 // Set Min & Max of X-Axis Scale
        myPane.XAxis.Scale.Min = 0;
        myPane.YAxis.Scale.Max = 100;
        myPane.AxisChange(); 
```

但我试图为最终用户提供一个选项，以便他或她可以将鼠标放在比例值上并动态更改限制。

**编辑：**

![在此处输入图像描述](../Images/ab611baf3431d8b6451176aa8b720a51.png)

***简单的想法：*** *我们应该能够通过在这些比例限制（0.0 或 1.2）上单击鼠标两次来更改比例限制。*

感谢您的想法和建议并感谢您的宝贵时间.... :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T01:57:00.343

我唯一能想到的就是利用这个`MouseClick`事件，然后尝试进行一次大的肮脏的黑客攻击。我会检查`Location`图形的属性（通常会给你左上角的坐标），然后检查`Size`属性（这样做以防你的窗口改变了大小，你的图形也改变了），然后得到你的[System.Windows.Forms .Cursor.Position](http://msdn.microsoft.com/en-us/library/system.windows.forms.cursor.position.aspx)。如果光标在刻度值上，那么可能会有一个弹出显示，他们可以在其中输入新值`Max`或`Min`值？在动态变化的图表中大致确定比例值的显示位置可能会很麻烦，但绝对可以做到，特别是如果您坐下来计算一下标签显示的大小百分比。

我希望这有帮助！

编辑：还要确保它是被点击的左键：

```
 if (e.Button == MouseButtons.Left) 
```

# python - 日期和时间对应于python中的时间零

> ID：13181126
> 
> 赞同：1
> 
> 时间：2012-11-01T16:13:35.933
> 
> 标签：python, time

是否有代码仅使用模块时间（在python中）确定与时间零相对应的日期和时间？

```
import time
x = time.time()
print(x) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T16:16:28.963

来自[文档](http://docs.python.org/2/library/time.html)：

> 当年 1 月 1 日，0 时，“自纪元以来的时间”为零。对于 Unix，纪元是 1970。要找出纪元是什么，请查看`gmtime(0)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T16:16:18.010

“时间 0”*通常*是[UNIX 纪元](https://en.wikipedia.org/wiki/Unix_epoch)。

从[`time`模块文档](http://docs.python.org/2/library/time.html)：

> 纪元是时间开始的点。当年 1 月 1 日，0 时，“自纪元以来的时间”为零。对于 Unix，纪元是 1970。要找出纪元是什么，请查看 gmtime(0)。

```
>>> import time
>>> time.gmtime(0)
time.struct_time(tm_year=1970, tm_mon=1, tm_mday=1, tm_hour=0, tm_min=0, tm_sec=0, tm_wday=3, tm_yday=1, tm_isdst=0) 
```

# android - Image Magick 不需要的颜色变化

> ID：13181131
> 
> 赞同：1
> 
> 时间：2012-11-01T16:13:50.990
> 
> 标签：android, imagemagick, imagemagick-convert

我使用图像魔法调整图标大小。原始图标是灰色的，但是当我使用以下命令调整它的大小时： convert -resize 50.0% -unsharp 0x1 生成的较小图标是黑色的。知道如何解决这个问题吗？

谢谢大卫

# c# - 当一个类已经存在时使用枚举？

> ID：13181132
> 
> 赞同：0
> 
> 时间：2012-11-01T16:13:54.030
> 
> 标签：c#, enums, constants

我有一个定义如下的类：

```
public class Category
{
    public int Id {get; set;}
    public string Name {get; set;}

    //... additional properties ...
} 
```

我的数据库中有大约 10 个类别，并且该集合在未来不太可能发生变化（尽管可能会偶尔添加新类别）。每个类别都有许多与之关联的字段。

在大多数情况下，其他类仅填充类别的`Id`. 我需要根据特定类别执行不同的操作。

例如：

```
if (categoryId == 1)
{
    //do something
}
else
{
    //do something else
} 
```

**我希望在执行此操作时避免硬编码值。**

我通常会为此目的使用枚举，但我不确定在这种情况下如何构造它，因为我已经有一个类。一个想法是创建一个名为 的单独枚举`CategoryEnum`，但这看起来很臭。另一种选择是使用类常量。

`Id`将类别与特定常量值进行比较的最清晰方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:17:10.493

那这个呢：

```
public enum CategoryId { ... }

public class Category
{
    public CategoryId Id {get; set;}
    public string Name {get; set;}

    //... additional properties ...
} 
```

枚举描述了 ID，而你的类的其余部分添加了其他有用的信息。

* * *

如果您想将其保留为`int`属性，您仍然可以使用枚举：

```
public enum CategoryId { ... }

public class Category
{
    public int Id {get; set;}
    public string Name {get; set;}

    //... additional properties ...
} 
```

然后当您需要测试该值时：

```
switch ((CategoryId)myCategory.Id)
{ ... } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T16:20:24.770

如果我正确理解问题，这应该是一个有效的实现。

```
if(categoryId == (int)Category.CategoryOne)
{
 ...
}
else 
{
  ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T17:27:12.023

根据 Antarr Byrd 的[回应](https://stackoverflow.com/a/13181259/370671)，似乎使用类常量可以实现最清晰的代码。

```
public class Category
{
    public const int CATEGORY_ONE = 1;
    public const int CATEGORY_TWO = 2;
    //etc.

    public int Id {get; set;}
    public string Name {get; set;}

    //... additional properties ...
} 
```

为了比较：

```
if (categoryId == Category.CATEGORY_ONE)
{
    //do stuff
} 
```

# ios - iOS 应用程序和子类化中的多个 UITableView 控制器

> ID：13181142
> 
> 赞同：0
> 
> 时间：2012-11-01T16:14:39.107
> 
> 标签：ios, uitableview, subclass

我正在学习斯坦福的 CS193P iOS 课程，在其中一项作业中，我们需要多个 UITableView。在作业笔记中，老师说：

> “并使用你出色的面向对象编程设计技能，确保尽可能多地重用代码。这个应用程序中的许多 MVC 都非常相似。创建 UITableViewController 的子类来做某事是完全可以的，然后创建一个该类的子类来做一些更精致的事情。”

所以与其拥有

```
@interface myFirstTableViewController : UITableViewController 
```

和

```
@interface mySecondTableViewController : UITableViewController 
```

他暗示我们使用：

```
@interface myFirstTableViewController : UITableViewController 
```

和

```
@interface mySecondTableViewController : myFirstTableViewController 
```

当我这样做时，`mySecondTableViewController`只有以下方法：

```
initWithNibName
viewDidLoad
didReceiveMemoryWarning 
```

这里发生了什么事？在`mySecondViewController`中，我是否只需要实现那些不同的方法`myFirstTableViewController`（可能稍作更改然后调用`super`版本？

此外，这是正确的做事方式还是最好将我的每个自定义 tvcs 作为 UITableViewController 的单独子类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T16:23:26.527

更可能的模式是：

```
@interface CommonTableViewController : UITableViewController
...
@interface FirstTableViewController : CommonTableViewController
...
@interface SecondTableViewController : CommonTableViewController 
```

然而，很难设置上下文无关的规则。这真的取决于有多少相似的代码可以移动到共同的父级中。`mySecondTableViewController`（如果一切都正确，那么您构建事物的方式也不一定是错误的`myFirstTableViewController`，再加上一点。）

# android - 如何将 ISO4217 货币代码提供给 NumberFormat？

> ID：13181143
> 
> 赞同：6
> 
> 时间：2012-11-01T16:14:38.900
> 
> 标签：android, string, currency, iso, number-formatting

我想避免使用区域设置，而是使用货币代码（ISO 4217，如“USD”）。我了解如何使用货币代码设置 Currency 类，但是，我如何将此 Currency 合并到一个 NumberFormat 中以将双倍格式设置为所述货币？

我分别理解 NumberFormat 和 Currency，但是如何将它们组合起来以将双精度值格式化为真正的货币字符串，例如 4.00 -> $4.00？我必须使用 NumberFormat，因为我去掉了小数位以生成整个货币数字，例如本例中的 $4。

谢谢你的帮助，瑞恩

编辑：回答，.setCurrency，这是我在 NumberFormat 中没有注意到的，doh！我太专注于用货币构造 NumberFormat，但我很挣扎，因为你只能从 Locale 构造。希望我早点想到这一点。谢谢！下次我会更仔细地阅读列出的方法。我知道 NumberFormat 必须支持 Currency 类，只有以这种方式使用 Currency 才有意义。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T18:18:24.697

这应该使您可以将给定货币的金额显示为最接近的完整货币单位。我还没有测试过，但认为它是 95% 正确的。

```
double amount = ...;
String currencyCode = ...;
Currency currency = Currency.getInstance(currencyCode);
NumberFormat format = NumberFormat.getCurrencyInstance();
format.setMaximumFractionDigits(0);
format.setCurrency(currency);
String formattedAmount = format.format(amount); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T18:28:08.530

您是否尝试过以下代码：

```
 NumberFormat nf = NumberFormat.getCurrencyInstance();
    String currencyCode = "USD";
    nf.setCurrency(Currency.getInstance(currencyCode));
    double currencyAmmount = 4.00;
    String formattedValue= nf.format(currencyAmmount); 
```

从我得到的上面的代码中，`$4.00`我认为这是你所期望的。

我想这里最重要的是使用`NumberFormat.getCurrencyInstance()`而不是`NumberFormat.getInstance()`.

# php - 如何将数字转换为时间戳？

> ID：13181144
> 
> 赞同：1
> 
> 时间：2012-11-01T16:14:41.253
> 
> 标签：php, time, phpmyadmin, timestamp

我将如何使用 php 将数字转换为时间戳（特别是分钟）？

我在我的数据库中使用时间戳，`00:01:30`例如`00:00:30`

但是我写这篇文章的人有一个习惯（并要求）他们只能输入`30`or`60`或`75`。就我而言，我需要以某种方式将它们分别转换为`00:00:30`,`00:01:00`和`00:01:15`。

我该怎么做呢？我知道`strtotime()`，`date()`但我似乎无法弄清楚如何获取数字并转换它......

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T16:23:43.450

您可以使用一种技巧轻松地将此类 int 转换为时间：

```
$time = gmdate('H:i:s', 75); // 00:01:15 
```

这是有效的，因为 gmdate 将始终从 转换秒数`1970-01-01 00:00:00`，因此它将为 86400 以下的所有整数产生正确的结果

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T16:21:59.703

如果输入只有几分钟，而不是处理 strtotime，您可能只想手动将其转换为字符串。例如：

```
<?php
  $minutes = 75;
  $timestring = sprintf('%2d:%2d:%2d', floor($minutes/60), ($minutes%60), 0);
  echo 'Time: '.$timestring;
?> 
```

这将打印出来`01:15:00`。从您的问题来看，分钟数似乎在最后一列，但我正在以更标准的格式展示我的解决方案。

**编辑：包括结果并使用更合适的示例**：

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T16:22:38.743

我建议使用[mktime](http://php.net/manual/en/function.mktime.php)。例如，如果您知道可以输入的开始时间，然后只需在分钟列中添加 30、60 或 90。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T15:03:43.597

如果您的 PHP 足够新（5.3.x），请使用 DateTime 类，然后从一天的开始创建一个时间，然后添加 75 分钟，或者甚至使用内置格式从过去的时间转换。

# c - 在 Arm 汇编中使用 C 中声明的全局变量

> ID：13181145
> 
> 赞同：7
> 
> 时间：2012-11-01T16:14:47.183
> 
> 标签：c, assembly, arm

我有一个声明全局变量的 C 文件。该文件将与一些 ARM 汇编文件一起编译。

```
int foo;

void call_asm(void);

int main(void) {
    call_asm();
    return foo;
} 
```

```
call_asm:
    ... 
```

我尝试使用[来自 arm 信息中心的链接，](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0203j/Cihcciij.html)但编译器 ( `arm-linux-gnueabi-gcc`) 告诉我“导入”是未定义的指令。

我可以简单地做类似的事情：

```
LDR    r0, =GLOBAL_VAR 
```

如何在汇编中使用 C 文件中定义的全局变量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2019-04-01T10:03:34.587

一旦你问 gcc 如何做到这一点，这变得非常简单。例如，使用 编译以下函数`gcc -S -O3`：

```
extern int foo;
void useFoo()
{
    foo=7;
} 
```

您将看到 gcc 如何实现它。

基于此，我设计了一个从 C 调用汇编函数来设置全局 C 变量的工作示例：

```
// test.c
#include <stdio.h>

void setupFoo();
int foo;

int main()
{
    setupFoo();
    printf("foo=%d\n", foo);
} 
```

```
# test.s
.text
.global foo
.fooAddr:
    .word foo

.global setupFoo
setupFoo:
    ldr r0, .fooAddr
    mov r1, #123
    str r1, [r0]
    bx lr 
```

编译和运行：

```
$ gcc test.c test.s -o test && ./test
foo=123 
```

在 gcc Raspbian 6.3.0-18+rpi1 上测试。

上面的汇编代码基于`useFoo`示例的 gcc 输出。一种更简单的方法是使用`=foo`而不是手动将地址放置到变量中：

```
# test.s
.text
.global foo
.global setupFoo
setupFoo:
    ldr r0, =foo
    mov r1, #123
    str r1, [r0]
    bx lr 
```

这将导致`foo`汇编器将地址放在函数定义之后。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T17:59:28.340

我认为您需要将指令从 ARM 汇编器转换为 GNU 汇编器。如果我理解正确，您可以使用`.global`指令而不是`.import`. 从[用作](http://sourceware.org/binutils/docs-2.22/as/index.html#Top)页面：

> *.global**符号***
> 
> .global 使符号对 ld 可见。如果您在部分程序中定义*符号*，则其值可用于与其链接的其他部分程序。否则，*符号*从链接到同一程序的另一个文件的同名符号中获取其属性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-22T14:43:36.403

```
.extern (symbol) 
```

是你需要的

# c# - 当平台为 x64 或 x86 时，Debug.Fail 不起作用

> ID：13181146
> 
> 赞同：1
> 
> 时间：2012-11-01T16:14:50.413
> 
> 标签：c#, .net

当我的应用程序针对 x64 或 x86 而不是针对任何 CPU 编译时， 如何使类和类`Debug.Fail`的 the 和其他方法正常工作？`Debug``Trace`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T11:21:36.663

Go to the Project properties page in Build tab under General group check both Define DEBUG constant and TRACE constant these options will make it functional

# java - Java日历，获取当前月份值，需要澄清

> ID：13181150
> 
> 赞同：18
> 
> 时间：2012-11-01T16:15:04.363
> 
> 标签：java, calendar

11月1日..

```
 Calendar.getInstance().get(Calendar.MONTH); // prints 10 (October) 
```

如果我们从 0 开始是有意义的，但似乎我们没有

```
 Calendar.getInstance().get(Calendar.JANUARY); // prints 1 
```

请问我错过了什么？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-01T16:18:53.163

Java 日历中的月份*是*0 索引的。`Calendar.JANUARY`不是一个**字段**，所以你不应该将它传递给`get`方法。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-11-01T16:24:20.137

正如其他人所说，Calendar.MONTH 返回 int 并且索引为零。

获取当前月份作为`String`使用`SimpleDateFormat.format()`方法

```
Calendar cal = Calendar.getInstance();
System.out.println(new SimpleDateFormat("MMM").format(cal.getTime()));

returns NOV 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-11-01T16:22:12.827

```
Calendar.getInstance().get(Calendar.MONTH); 
```

从零开始，10 是 11 月。来自javadoc；

> public static final int MONTH get 和 set 字段编号，表示月份。这是特定于日历的值。公历和儒略历中的第一个月是 JANUARY，即 0；最后一个取决于一年中的月数。

```
Calendar.getInstance().get(Calendar.JANUARY); 
```

这不是明智之举， for 的`JANUARY`值为 0，这与 相同`ERA`，您正在有效地调用；

```
Calendar.getInstance().get(Calendar.ERA); 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2016-10-18T06:58:24.740

用于`Calendar.getInstance().get(Calendar.MONTH)+1`获取当前月份。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-10-20T02:44:06.197

```
import java.util.*;

class GetCurrentmonth
{
    public static void main(String args[])
    {
        int month;
        GregorianCalendar date = new GregorianCalendar();      
        month = date.get(Calendar.MONTH);
        month = month+1;
        System.out.println("Current month is  " + month);
    }
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-11-01T16:19:00.527

`Calendar.get`将标准日历字段之一作为参数，例如`YEAR`或`MONTH`不是月份名称。

`Calendar.JANUARY`为 0，这也是 的值`Calendar.ERA`，因此`Calendar.getInstance().get(0)`将返回时代，在本例`Calendar.AD`中为 1。

对于您问题的第一部分，请注意，正如广泛记录的那样，月份从 0 开始，因此 10 实际上是 11 月。

# jquery - JQuery 和 KineticJS HTML5 绘制和拖放

> ID：13181151
> 
> 赞同：0
> 
> 时间：2012-11-01T16:15:06.370
> 
> 标签：jquery, html, canvas, drag-and-drop, kineticjs

我设计了一个页面，可以在画布中使用鼠标绘制线条并拖放项目。

我的主要问题是我只能删除一项。第二个问题是我无法在拖动项目时克隆，所以我在开始时将它们复制到 for 循环中。

这是完整的页面：[http ://www.trustweb.it/Html5draw/](http://www.trustweb.it/Html5draw/)

这是与拖放项目相关的javascript：

```
/***DRAG&DROP ITEMS ***/
        var overitem=0;
        var start = null;

        function bindGroupEvents(group, rect, trash) {
            group.on('mouseover', function() {

              overitem=1;
              if(group.getStage()) {
                trash.moveTo(group);
                trash.show();
                trash.getLayer().draw();
                document.body.style.cursor = 'pointer';
              }
            });

            group.on('mouseout', function() {
              trash.hide();
              trash.getLayer().draw();
              document.body.style.cursor = 'default';
              overitem=0;
            });

            group.on('dragmove', function() {
              if(start) {
                var rect = group.get('.rect')[0];
                rect.setWidth(start.rectWidth + group.getX() - start.groupX);
                rect.setHeight(start.rectHeight + start.groupY - group.getY());
                group.setX(start.groupX);
                trash.setX(rect.getWidth() - 24);
                // draw shapes layer and handle layer
                trash.getStage().draw();
              }
            });

            group.on('dragstart', function() {
              /*
              if(group.getId()=='dryer' || group.getId()=='washing' )
              {
                alert('to be cloned');
                }
            */
              group.moveToTop();
            });
        }

        function bindTrashEvents(trash) {
            trash.on('mouseover', function() {

              console.log('over');

              var group = trash.getParent();
              var rect = group.get('.rect')[0];
              start = {
                groupX: group.getX(),
                groupY: group.getY(),
                rectWidth: rect.getWidth(),
                rectHeight: rect.getHeight()
              };
            });

            trash.on('mouseout', function(){
              start = null;
            });

            trash.on('click', function() {
                alert('click');

                trash.getParent().transitionTo({
                    opacity: 0,
                    duration: 0.2,
                    callback: function() {
                        var rect = trash.getParent().remove();
                    }
                })
            });
        }
        /*** END DRAG&DROP ***/

        window.onload = function() {
            var layer = new Kinetic.Layer();
            var stage = new Kinetic.Stage({
                container: "container",
                width: 978,
                height: 598
            });

            /** DRAG&DROP UITEM **/
            var shapesLayer = new Kinetic.Layer();
            var editLayer = new Kinetic.Layer();

            // build trash
            trash = new Kinetic.Image({
              visible: false,
              opacity: 0.7,
              x: 3,
              y: 3
            });

            // load trash image
            var trashImg = new Image();
            trashImg.onload = function() {
              trash.setImage(trashImg);
              editLayer.add(trash);
            }; 
            trashImg.src = 'x.png';

            bindTrashEvents(trash);

            // build rectangles
            var colors = ['red', 'orange'];

            /* washing machine */
            for(i=0;i<30;i++)
            {
            var group = new Kinetic.Group({
                x: 1,
                y: 1,
                id:'washing',
                draggable: true
            });
            var rect = new Kinetic.Rect({
                width: 50,
                height:50,
                fill: colors[0],
                stroke: 'black',
                opacity: 0.85,
                name: 'rect'
            });

            bindGroupEvents(group, rect, trash);
            group.add(rect);
            shapesLayer.add(group);
            }

            /* dryer */
            for(i=0;i<30;i++)
            {
            var group = new Kinetic.Group({
                x: 100,
                y: 1,
                draggable: true
            });
            var rect = new Kinetic.Rect({
                width: 50,
                height:50,
                fill: colors[1],
                stroke: 'black',
                opacity: 0.85,
                name: 'rect'
            });
            bindGroupEvents(group, rect, trash);
            group.add(rect);
            shapesLayer.add(group);
            }
            stage.add(shapesLayer);
            stage.add(editLayer);

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T22:01:09.883

最新的 KineticJS 4.3 有一个可以使用的 .clone() 方法。

```
 group.on('click', function(){ 
    var newRect = rect.clone();
    shapesLayer.add(newRect);
    newRect.simulate('mousedown');
    newRect.simulate('dragstart');
 } 
```

见：http: [//jsfiddle.net/CPrEe/38/](http://jsfiddle.net/CPrEe/38/)

如果要删除图层中的所有项目，您可以这样做：

```
 layer.removeChildren(); 
```

或者干脆做：

```
 layer.hide(); 
```

这样你就看不到整个图层。

**更新** [http://jsfiddle.net/CPrEe/77/](http://jsfiddle.net/CPrEe/77/)

```
group.on('click', function(){ 
    var newRect = rect.clone();
    shapesLayer.add(newRect);
    newRect.fire('mousedown');
    newRect.fire('dragstart');
} 
```

# response - 是否可以扩展 ServiceStack 中的 ResponseStatus 类以包含其他属性？

> ID：13181154
> 
> 赞同：1
> 
> 时间：2012-11-01T16:15:15.503
> 
> 标签：response, servicestack

我想包括几个扩展基本功能的附加属性，例如`public bool Success { get; set; }`或覆盖`ErrorCode`以返回一个`int`。这样的事情可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T18:56:40.607

不，您不能扩展内置类型，但您可以[覆盖默认错误处理以使用您自己的错误处理](https://stackoverflow.com/questions/13143502/catching-exceptions-with-servicestack/13151256#13151256)。

但由于 int 只是一个更严格的字符串，我个人会保持原样，只使用辅助扩展方法，例如：

```
public static class ResponseStatusExtensions {
    public int? ErrorNumber(this ResponseStatus status) {
        int errNum;
        return int.TryParse(status.ErrorCode, out errNum) ? errNum : (int?)null;
    }
} 
```

然后你可以像这样使用它：

```
if (response.ResponseStatus.ErrorNumber() == 100) { ... } 
```

# asp.net-mvc - ASP.NET MVC3：是否可以使 @Html.TextBoxFor 文本被隐藏

> ID：13181156
> 
> 赞同：0
> 
> 时间：2012-11-01T16:15:29.897
> 
> 标签：asp.net-mvc, asp.net-mvc-3, textbox, passwords

是否可以`@Html.TextBoxFor(m => EmployeeID)`在输入时隐藏视图中的文本。与 . 相同的功能`@Html.PasswordFor`。我不能使用 PasswordFor 是有原因的。

我想要与我之前的帖子相同的功能。
[ASP.NET MVC3 HtmlPasswordFor 如何使其在发布方法后不重置](https://stackoverflow.com/questions/13179440/asp-net-mvc3-htmlpasswordfor-how-to-make-it-not-reset-after-post-methods)

编辑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:19:39.260

这样做： `@Html.HiddenFor(m => EmployeeID)`这就是成功的原因。

或者，如果您只想隐藏输入中的文本 - 将文本颜色设置为与输入颜色相同。

祝你好运

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T16:26:11.977

不，除了使用密码类型（它不会隐藏它们，而是隐藏它们）之外，没有办法隐藏输入的值以隐藏。您可以将文本颜色设置为与背景颜色相同，但只需复制并粘贴文本即可。此外，如果文本框在 get 或 post 上填充，那么他们可以查看源代码并查看值。

编辑：

PasswordFor 不填充帖子文本框的原因是因为它是一个安全漏洞。所有人所要做的就是查看源代码，他们可以看到其中的内容。

如果您理解这一点，并且可以接受。然后您可以简单地使用标准输入密码框。

```
<input type="password" id="secrets" name="secrets" value="@Model.secrets" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T14:48:08.323

只需将 @value 设置为 Model.PasswordFiels ，如示例中所示：

`@Html.PasswordFor(c => c.CodePassword, new { @class = "text", @value=Model==null?"":Model.CodePassword})`

# serial-port - 使用 Java 中的设备名称打开串行端口

> ID：13181186
> 
> 赞同：0
> 
> 时间：2012-11-01T16:16:56.250
> 
> 标签：serial-port

是否可以使用设备名称打开串行端口，而不是使用“COMX”（其中 X 是数字）之类的东西打开它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T00:14:02.080

我想这是不可能的。我们无法根据设备名称打开端口。我已经对此进行了很多搜索......但不要引用我的话。我猜其他串行通信库（如 SMSLib 或 RXTX）可能能够，但我也不确定。

# php - php堆叠字符串查询

> ID：13181188
> 
> 赞同：1
> 
> 时间：2012-11-01T16:17:02.393
> 
> 标签：php

我正在尝试基于查询字符串嵌套 if 语句，但它不起作用

请求参数

```
index.php?list&page=1 
```

php

```
if ($_SERVER['QUERY_STRING'] == 'list') {
  if ($_GET['page'] == '1') {
    echo 'hi';
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:21:50.050

在您的示例中，`$_SERVER['QUERY_STRING']`等于整个查询字符串，即`list&page=1`. 您可以`$_GET['list']`改用：

```
if (isset($_GET['list'])) {
  if ($_GET['page'] == '1') {
    echo 'hi';
  }
} 
```

注意：在您的示例`$_GET['list']`中等于空字符串，因此我们使用`isset`. 顺便说一句，您可能也应该对 page 变量执行此操作，因为它可能并不总是存在。换句话说，`if ( isset($_GET['page']) && $_GET['page'] == '1' )`

# php - 在php中将单个文件上传更改为多个文件上传

> ID：13181189
> 
> 赞同：0
> 
> 时间：2012-11-01T16:17:01.883
> 
> 标签：php, post, xml-rpc, openerp

谁能帮我将代码从上传单个文件更改为多个文件上传？我尝试了很多示例，但似乎无法使其正常工作。颂如下。

```
 <tr>
      <td>Add file:</td>
        <td><input  type="file" name="cv" size="chars" class="Form" />             
     </td> 
    </tr>

    <?php
    include("lib/xmlrpc.inc");
    include("settings.php");  
    include("header.php"); 

$post = $_POST;

    $client = new xmlrpc_client($serverUri.'common');

    $msg = new xmlrpcmsg('login');
    $msg->addParam(new xmlrpcval($db, "string"));
    $msg->addParam(new xmlrpcval($user, "string"));
    $msg->addParam(new xmlrpcval($password, "string"));

    $res =  &$client->send($msg);

    if(!$res->faultCode()){

        $val = $res->value();   
        $id = $val->scalarval();

        if (empty($id)){

            echo "Connection error = ";
            exit;
        }
        else
        {

            $client2 = new xmlrpc_client($serverUri.'object');

            $val = array ("name" => new xmlrpcval($post['subject'],"string"),
                          "email_from" => new xmlrpcval($post['email'], "string"),
                          "partner_name" => new xmlrpcval($post['name'], "string"),
                          "partner_phone" => new xmlrpcval($post['phone'], "string"),
                          "description" => new xmlrpcval($post['letter'], "string"),
                          "job_id" => new xmlrpcval($post['jobid'], "int")
                        );

            $msg = new xmlrpcmsg('execute');
            $msg->addParam(new xmlrpcval($db, "string"));
            $msg->addParam(new xmlrpcval($id, "int"));
            $msg->addParam(new xmlrpcval($password, "string"));
            $msg->addParam(new xmlrpcval("hr.applicant", "string"));
            $msg->addParam(new xmlrpcval("create", "string"));
            $msg->addParam(new xmlrpcval($val, "struct"));

            $res2 = &$client2->send($msg);

            if(!$res2->faultCode())
            {
                $val2 = $res2->value()->scalarval();

                $tmp_name = $_FILES['cv']['tmp_name'];
        $file_name = $_FILES['cv']['name'];

                if(file_exists($tmp_name))
                {
                    // open the file for a binary read
                    $file = fopen($tmp_name,'rb');
                    // read the file content into a variable
                    $data = fread($file,filesize($tmp_name));
                    // close the file
                    fclose($file);

                    // now we encode it and split it into acceptable length lines
                    $encodedFile = base64_encode($data);   

                    $valFile = array ("name" => new xmlrpcval($file_name,"string"),
                                  "datas" => new xmlrpcval($encodedFile, "string"),
                                  "datas_fname" => new xmlrpcval($file_name, "string"),
                                  "index_content" => new xmlrpcval("true", "string"),
                                  "res_model" => new xmlrpcval("hr.applicant", "string"),
                                  "res_id" => new xmlrpcval($val2, "int"),
                                );

                    $msgFile = new xmlrpcmsg('execute');
                    $msgFile->addParam(new xmlrpcval($db, "string"));
                    $msgFile->addParam(new xmlrpcval($id, "int"));
                    $msgFile->addParam(new xmlrpcval($password, "string"));
                    $msgFile->addParam(new xmlrpcval("ir.attachment", "string"));
                    $msgFile->addParam(new xmlrpcval("create", "string"));
                    $msgFile->addParam(new xmlrpcval($valFile, "struct"));                                    

                    $res2File = &$client2->send($msgFile);
                }

                echo 'Thanks for applying, Files (name of file to be added) are uploaded.<br />';
                echo '<a href="index.php">Back to start</a><br />';

            }
            else
            {
                echo "<br />Problem in message sending for create application";

            }
        }           
    }
    else
    {
        echo "<br />Connection not established";
    }

include("footer.php");
?>

 <input name="cv" type="file" size="chars" class="Form" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T17:35:54.817

尝试这个

```
<!-- IMPORTANT:  FORM's enctype must be "multipart/form-data" -->
<form action="upload-handler.php.php" method="post" enctype="multipart/form-data">
  Send these files:<br />
  <input name="userfile1" type="file" /><br />
  <input name="userfile2" type="file" /><br />
  <input type="submit" value="Send files" />
</form>

<?php foreach ($_FILES as $file) { ... } 
```

或者，如果您尝试从单个输入中获取多个文件。

```
<!-- IMPORTANT:  FORM's enctype must be "multipart/form-data" -->
<form method="post" action="upload-handler.php" enctype="multipart/form-data">
  <input name="userfiles[]" id="userfiles" type="file" multiple="" />
</form>

<?php foreach ($_FILES as $file) { ... } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-13T10:20:15.520

```
$handle = fopen('D:\wamp\www\splite\uploads\hard bounce 10.txt','r'); 
        $f = 1; //new file number
        while(!feof($handle))
        {
            $newfile = fopen('D:/wamp/www/splite/batches/'.$f.'txt','w'); //create new file to write to with file number
            for($i = 1; $i <= 5000; $i++) //for 5000 lines
            {
                $import = fgets($handle);
                print_r($import);
                fwrite($newfile,$import);
                if(feof($handle))
                {break;} //If file ends, break loop
            }
            fclose($newfile);
            //MySQL newfile insertion stuff goes here
            $f++; //Increment newfile number
        }
        fclose($handle);`enter code here` 
```

# node.js - 在路径外调用函数

> ID：13181193
> 
> 赞同：0
> 
> 时间：2012-11-01T16:17:13.297
> 
> 标签：node.js, mongodb, express

在 mongojs 中，当你这样做时：

```
var birds = db.birds.find(searchTerm, callback); 
```

...你如何将参数传递给回调？我试过绑定，如：

```
birds = db.birds.find(searchTerm, app.get('getBirds').bind(res)); 
```

……但无济于事。仅供参考，我正在尝试传递 GET 路由的响应对象，以便回调可以使用 res.send(results) 呈现。

另一个选项是设置 app.set('res': res); 并从回调中调用 app.get('res') - 我不确定这是一个好主意。它可以工作，但它不能很好地遵守事件循环模型 - 我认为返回应用程序的请求可能代价高昂？任何帮助将不胜感激。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:32:11.007

确定您要完成的工作：

您是否打算`find`在服务器的响应中使用调用结果？您可以将 包装`find`在一个将响应作为参数接收的函数中，然后定义对 的回调，并在`find`其中访问响应。

例如（未经测试的代码，但这是想法）：

```
// function called when a request is received
function getBirds(searchTerm, res) {
    birds = db.birds.find(searchTerm, function(err, docs) {
        // code in here will have access to res because it is in a closure
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T16:57:46.867

您通常通过将`callback`函数调用包装在匿名函数中来做到这一点：

```
db.birds.find(searchTerm, function (err, birds) {
    callback (err, birds, res);
}); 
```

# d3.js - D3js：何时使用 .datum() 和 .data()？

> ID：13181194
> 
> 赞同：34
> 
> 时间：2012-11-01T16:17:15.257
> 
> 标签：d3.js, nvd3.js

我经常看到`.datum`使用面积图的时候。例如：

```
svg = d3.select("#viz").append("svg").datum(data) 
```

对于何时需要，是否有任何经验法则`.datum`？

```
var area = d3.svg.area()  
    .x(function(d) { return x(d.x); })  
    .y0(height)  
    .y1(function(d) { return y(d.y); });  

var svg = d3.select("body").append("svg")  
    .attr("width", width)  
    .attr("height", height);  

svg.append("path") 
    .datum(data)
    .attr("d", area); 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-11-01T16:26:36.537

我认为文档很好地回答了这个问题：[https](https://github.com/mbostock/d3/wiki/Selections#wiki-datum) ://github.com/mbostock/d3/wiki/Selections#wiki-datum 。

基本上，关键是在某些情况下，当您进行选择时，您对进入/退出集不感兴趣。如果是这种情况，通常似乎是完整图表的情况，则使用基准。

**更新：**这取决于：当您期望没有动态更新时，在您给定的示例中似乎就是这种情况，基准是可以的。为什么？因为还没有 path svg 元素，所以只有一个 path 元素，一旦添加它就不会改变。

如果您在哪里有多个路径元素和动态更改（例如，每秒钟后最旧的数据元素被删除并添加一个新元素），那么您*将*需要数据。这将为您提供三组：不再存在数据的图形元素集、更新数据的元素集和之前不存在数据项的元素集（分别是输入、更新和退出集）。一旦你需要这个，我建议你阅读 d3 文档。

显然，计算这三组并不是没有成本的。在实践中，这只会在您使用“大型”（我认为 d3 可以扩展到数千个项目）数据集时成为问题。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-01-10T12:29:02.800

一个很好的例子教程是here。 [http://bost.ocks.org/mike/selection/#data](http://bost.ocks.org/mike/selection/#data)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-12-22T23:30:51.773

其他链接到[教程](http://bost.ocks.org/mike/selection/#data)，但我认为[selection.datum 上的 API 参考](https://github.com/mbostock/d3/wiki/Selections#datum)给出了公认的答案：

> 获取或设置每个选定元素的绑定数据。与该 `selection.data`方法不同，此方法**不计算连接（因此不计算进入和退出选择）。**

因为它不计算连接，所以它不需要知道关键函数。因此，注意两者的签名区别，**只有`data`函数接受一个key函数**

*   `selection.datum([value])`
*   `selection.data([values[, key]])`

我认为本教程`data`给出了另一个更基本的区别，类似于“数据”和“数据”这两个词的含义。也就是说，**“数据”是复数，“数据”是单数**。因此，可以通过两种方式连接数据：

> 通过加入元素**组**`selection.data`。
> 
> 通过分配给**各个**元素`selection.datum`。

@Hugolpz 的[要点](https://gist.github.com/hugolpz/824446bb2f9bc8cce607)给出了“群体”与“个人”的重要性的很好的例子。这里，`json`表示一个数据数组。请注意如何`datum`将整个数组绑定到一个元素。**如果我们想达到同样的效果，`data`我们必须首先将 json 放入另一个数组中。**

*   `var chart = d3.select("body").append("svg").data([json])`
*   `var chart = d3.select("body").append("svg").datum(json)`

# lotus-notes - 使用公式从其他数据库嵌入 Lotus Notes 视图？

> ID：13181196
> 
> 赞同：0
> 
> 时间：2012-11-01T16:17:18.187
> 
> 标签：lotus-notes, lotus-formula

创建嵌入视图时，将出现一个弹出窗口，询问来自哪个数据库以及要嵌入哪个视图。还有一个选项可以使用@formula 来指定视图。选择该选项将显示另外 2 个选项“显示”（单选按钮）：“查看”和“公式”。如何编写公式以从“数据库 B”中选择视图“员工”？假设我目前在“数据库 A”中。在表单中，我已经在“svr”和“db”字段中传递了“数据库 B”服务器和文件名/路径的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T20:06:25.883

不幸的是你不能。您只能指定与当前数据库中的视图对应的视图名称。

在此处查看更多信息：[http ://www-10.lotus.com/ldd/nd6forum.nsf/0/8b60e2b8c9c3223c852572e2004cbd79?OpenDocument](http://www-10.lotus.com/ldd/nd6forum.nsf/0/8b60e2b8c9c3223c852572e2004cbd79?OpenDocument)

只是一个想法：我不确定这是否可能，但也许您可以将两个嵌入式视图添加到您的表单中，然后隐藏/显示它们？它们不会基于公式，但决定它们是否显示/隐藏可以基于公式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-30T09:34:31.637

这是你的做法：[http ://dmcnally.blogspot.com/2011/01/configurable-embedded-views-single.html](http://dmcnally.blogspot.com/2011/01/configurable-embedded-views-single.html)

这是一篇广泛的文章，所以我不会在这里描述它。

我一直在使用这个解决方案，效果很好。

# java - Heroku 和 GIT 的批处理文件不起作用

> ID：13181202
> 
> 赞同：0
> 
> 时间：2012-11-01T16:17:34.300
> 
> 标签：java, git, heroku

我是 GIT 和 heroku 的新手。

```
$ sh target\bin\worker.bat
sh: targetbinworker.bat: No such file or directory. 
```

我在哪里犯错？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T22:01:08.287

Unix shell 不理解 Windows 批处理文件或反斜杠作为路径分隔符。尝试打开 Windows 命令提示符并`target\bin\worker.bat`在其中运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T16:20:11.080

看起来您在 linux 控制台上使用反斜杠。尝试

sh 目标/bin/worker.bat

（这可能也不起作用，因为 .bat 是 Windows 扩展；没有类似 target/bin/worker.sh 的东西吗？）

# c#-4.0 - c#.net中字母数字（字母数字++）值的自动递增

> ID：13181205
> 
> 赞同：0
> 
> 时间：2012-11-01T16:17:39.263
> 
> 标签：c#-4.0

c#.net中字母数值的自动增量

输入文本 --> 输出文本，增量 +1

56755 --> 56756

56759 --> 5675a

5675z --> 56761

zzz --> 1111

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:17:39.263

**c#.net中字母数字（字母数字++）值的自动递增**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace AlphaNumeric
{
    public class Program
    {
        public static void Main(string[] args)
        {
            var programObj = new Program();

            Console.WriteLine(programObj.AlphaNumericIncrement("56755")); //   56756
            Console.WriteLine(programObj.AlphaNumericIncrement("56759")); //   5675a
            Console.WriteLine(programObj.AlphaNumericIncrement("5675z")); //   56761
            Console.WriteLine(programObj.AlphaNumericIncrement("zzz"));   //   1111

            Console.ReadLine();
        }

        public string AlphaNumericIncrement(string text)
        {
            if (text == null || text.Trim().Length == 0)
                return "1";
            else
            {
                text = text.Trim();
                string alphaNum = "123456789abcdefghijklmnopqrstuvwxyz";
                var collection = text.ToLower().Trim().ToCharArray().Reverse().ToList();
                bool isNextInr = true;
                int l = collection.Count() - 1, i = 0;
                while (isNextInr && i < collection.Count())
                {
                    isNextInr = false;
                    switch (collection[i])
                    {
                        case 'z':
                            collection[i] = '1';
                            if (i < l)
                                isNextInr = true;
                            else
                                collection.Add('1');
                            break;
                        default:
                            collection[i] = char.Parse(alphaNum.Substring(alphaNum.IndexOf(collection[i]) + 1, 1));
                            break;
                    }
                    i++;
                }
                collection.Reverse();
                return string.Join("", collection);
            }
        }
    }
} 
```

# git - 为什么 git rebase 的合并冲突通常比合并少？

> ID：13181212
> 
> 赞同：7
> 
> 时间：2012-11-01T16:17:55.550
> 
> 标签：git, merge, rebase, git-rebase

我经常听到有人说，与 git merge 相比，使用 git rebase 减少了合并冲突的数量，但我从来没有找到解释为什么会这样。

当两个人都修改同一行代码时，简单地在另一组更改之上重放一组更改并不能神奇地消除内在冲突，那么是什么让 rebase 更好呢？

任何人都可以提供一个简单的示例，其中合并会发生冲突但变基不会？

更新：经过 3 年的 git 经验，我开始相信我原来的前提是错误的：在 rebase 和 merge 中冲突同样可能发生。然而，rebase 确实使历史更容易理解，并在需要时进行挑选或倒带。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:23:26.653

您解决了提交中的冲突，它们将被引入，因此实际上，您没有任何冲突。

如果我在我的特性分支中编辑了一条在主分支中发生变化的行，并进行了直接合并，它将发生冲突。

如果我变基，它将在我进行此更改的提交处停止，然后我处理冲突。

# java - 减少 Java 中的泛型参数

> ID：13181216
> 
> 赞同：2
> 
> 时间：2012-11-01T16:18:07.577
> 
> 标签：java, generics, type-inference

我在 Java 中使用泛型和几个类。我想找到一种方法来减少我需要添加的参数数量。

```
public abstract class KeyValueProducer<O,K,V> {
  ....
}

public class KeyValueProducerMapper<O,K,V,KVP extends KeyValueProducer<O,K,V>> {

  public static <O,K,V,KVP extends KeyValueProducer<O,K,V>> KeyValueProducerMapper<O,K,V,KVP> create(Set<KVP> set) {
      return new KeyValueProducerMapper(set);
  }

  public KeyValueProducerMapper(Set<KVP> kvps) {
        ...
  }

  public V getVal(K key) {
      return map.get(key).getValue();       
  }
} 
```

当我想创建我的 KeyValueProducerMapper 的实例时，看起来我需要写出：

```
Set<KVP> set;
....
KeyValueProducerMapper<K,V,O,KVP> kvpm = new KeyValueProducerMapper(set); 
```

这似乎有点冗长和荒谬。有什么办法可以像这样定义它吗？

```
KeyValueProducerMapper<KVP> kvpm = new KeyValueProducerMapper(set); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:30:58.853

从您的示例中不清楚 K、V 和 O 用于什么类型参数。但是对于`KeyValueProducerMapper`类的这种声明，您不能将其声明为`KeyValueProducerMapper<KVP> = ...`. 您必须将其声明为`KeyValueProducerMapper<O,K,V,KVP> = ...`（使用 O、K、V、KVP 的具体类型或在父范围内指定这些类型参数，即方法或类）。唯一的替代方法是将类声明更改为没有类型参数 K、V 和 O。

至于表达式的右侧部分，您可以使用静态`create()`方法而不指定类型参数，因为将从表达式的左侧部分解析。

# iphone - 在方向更改时为 UICollectionView 设置动画

> ID：13181217
> 
> 赞同：15
> 
> 时间：2012-11-01T16:18:08.577
> 
> 标签：iphone, ios, uiinterfaceorientation, uicollectionview

考虑一个[UICollectionView](http://developer.apple.com/library/ios/#Documentation/UIKit/Reference/UICollectionView_class/Reference/Reference.html#//apple_ref/occ/cl/UICollectionView)，它在横向和纵向上具有不同数量的项目和不同的布局（即：间距）。

当设备旋转时，需要做什么才能使这些更改动画化？[我在Collection View Programming Guide](http://developer.apple.com/library/ios/#Documentation/WindowsViews/Conceptual/CollectionViewPGforIOS/Introduction/Introduction.html#//apple_ref/doc/uid/TP40012334-CH1-SW1)上找不到任何关于如何处理旋转的提及。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-08-07T16:48:37.303

不需要重新加载集合视图的数据——调用`[collectionView.collectionViewLayout invalidateLayout]`将导致集合视图更新其布局。

在 UICollectionViewLayout 子类中重写`shouldInvalidateLayoutForBoundsChange:`以返回 YES 将导致在`invalidateLayout`集合视图的边界更改时（包括其大小更改时以及用户滚动其内容时）自动调用。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-17T03:50:29.270

根据方向，我有不同数量的部分，自动旋转并没有改变它。我必须添加对 collectionView 的调用以重新加载数据。我正在使用 UICollectionViewController，如果您还有其他内容，请调整为您自己的集合视图属性：

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(    NSTimeInterval)duration {
    [super willRotateToInterfaceOrientation:toInterfaceOrientation duration:duration];
    [self.collectionView reloadData];
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-01-20T14:43:56.497

最快的方法是混合所有其他答案。

只需在您的 ViewController 中添加以下行：

```
override func willRotateToInterfaceOrientation(toInterfaceOrientation: UIInterfaceOrientation, duration: NSTimeInterval) {
    self.mCollectionView.collectionViewLayout.invalidateLayout()
} 
```

您不需要重新加载数据。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-10-03T18:15:14.033

我在 Swift 中使用了以下简单代码：

```
override func viewWillTransitionToSize(size: CGSize, withTransitionCoordinator coordinator: UIViewControllerTransitionCoordinator) {
    super.viewWillTransitionToSize(size, withTransitionCoordinator: coordinator)
    collectionView.collectionViewLayout.invalidateLayout()
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-06T11:36:31.620

如果您只想在轮换活动中做某事，我正在使用这种方法：

```
- (void)updateViewConstraints {
    [super updateViewConstraints];
    [[_cvMyCollectionView collectionViewLayout] invalidateLayout];
} 
```

然后从`UICollectionViewDelegateFlowLayout`

```
 - (CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout *)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath {
        /* 
         * Calculate size, example
         * */
         CGSize cellSize = CGSizeMake(150.0f, 150.0f);

      return cellSize;
      } 
```

具有横向和纵向所需的行为或例如取决于宽度。

您甚至可以保存以前的方向并检查它是否已更改以决定是否使布局无效。

即使您再次在导航控制器中返回，这也会刷新大小。

# amazon - 没有 sql server 的亚马逊 ses 邮件发送

> ID：13181218
> 
> 赞同：0
> 
> 时间：2012-11-01T16:18:14.483
> 
> 标签：amazon, email

我需要解决两件事

1.  发送批量电子邮件时，需要一个可以处理数千封电子邮件而不会在服务器上遇到超时问题的解决方案（出于安全原因，客户端不允许来自 sql server 的 smtp）。

2.  批量电子邮件系统也可以安排。

指导我最好的解决方案

# sql-server - 从特定时间选择数据

> ID：13181219
> 
> 赞同：1
> 
> 时间：2012-11-01T16:18:15.433
> 
> 标签：sql-server, datetime

我无法获得仅在昨天早上 6 点到今天早上 6 点之间显示结果的查询。使用 sql server 2008。我有一个类型为 datetime 的时间戳列

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T16:19:43.443

```
select * from your_table
where ts_col between 
             dateadd(hour, 6, DATEADD(day, DATEDIFF(day, 0, GETDATE()), -1))   
             and dateadd(hour, 6, DATEADD(day, DATEDIFF(day, 0, GETDATE()), 0)); 
```

[SQLFiddle 示例](http://sqlfiddle.com/#!3/acd39/14)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T16:37:42.783

`where DATEDIFF(SECOND, CAST(GETDATE() as DATE), ts_column) BETWEEN -21600 AND 21600`

# php - 表更改弹出通知？

> ID：13181220
> 
> 赞同：-1
> 
> 时间：2012-11-01T16:18:17.330
> 
> 标签：php, mysql, ajax, jquery, logic

我有一张用于用户徽章和成就的表格。徽章的默认值写为**锁定**在每个徽章的字段值中。然后，当用户解锁徽章时，字段值将更新为**unlocked**。我如何通过弹出消息提醒用户他们刚刚根据价值变化解锁了一项新成就？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:23:15.893

这可能与 Javascript 和 onclick(alert('unlocked')) 或类似的东西有关。

# gnuplot - gnuplot 水平键

> ID：13181224
> 
> 赞同：5
> 
> 时间：2012-11-01T16:18:32.807
> 
> 标签：gnuplot

我在 multiplot 环境中使用 gnuplot。我只想有一个钥匙盒（这不是问题），我想在地块下放入“水平模式”。

```
Nice Plot1 | Nice Plot2

Nice Plot3 | Nice Plot4

      the keybox 
```

似乎 keybox 的总大小不能超过其相应绘图的宽度（所以这里是屏幕大小的一半）。这会导致我不想要的键盘中的行返回。

有没有办法绕过它？

谢谢。

编辑：添加脚本。（钥匙箱在 3 行）

```
set terminal epslatex color
set output 'Plot.tex'
set multiplot
set xrange [0:0.8]
set key box
set key reverse horizontal maxcols 10 samplen 0.5 spacing 1
#set key font ",9"
set key at screen 0.9,0.15
set size 0.5,0.5
set origin 0,0
set lmargin 4
set bmargin 3
set rmargin 0
set tmargin 0
set xtics nomirror
set ytics nomirror
plot x with lines lt 1 lw 4 lc rgb "red" title 'Median',\
x  with lines lw 4 lc rgb "blue" title '$ F,F^{-1}$',\
x with lines lw 4 lc rgb "magenta" title '$ F,\Gamma^\mathcal{P}$',\
x with lines lw 4 lc rgb "orange" title '$\Lambda_\text{MI}$',\
x with lines lt 1 lw 4 lc rgb "green" title '$k$-NN'

#
# Plot n°2
#
set size 0.5,0.5
set origin 0,0.5
set xrange [0:0.8]
set key off
set title ''
set lmargin 4
set bmargin 3
set rmargin 0
set tmargin 0
set xtics nomirror
set ytics nomirror
plot x  with lines lt 1 lw 4 lc rgb "red" title 'Median',\
x  with lines lw 4 lc rgb "blue" title '$ F,F^{-1}$',\
x  with lines lw 4 lc rgb "magenta" title '$ F,\Gamma^\mathcal{P}$',\
x  with lines lw 4 lc rgb "orange" title '$\Lambda_\text{MI}$',\
x with lines lt 1 lw 4 lc rgb "green" title 'KNN',\
x with lines lt 1 lw 4 lc rgb "black" title 'Ground Truth'

set size 0.5,0.5
set origin 0.5,0
set xrange [0:0.8]
set key off
set title ''
set lmargin 4
set bmargin 3
set rmargin 0
set tmargin 0
set xtics nomirror
set ytics nomirror
plot x with lines lt 1 lw 4 lc rgb "red" title 'Median',\
x with lines lw 4 lc rgb "blue" title '$ F,F^{-1}$',\
x with lines lw 4 lc rgb "magenta" title '$ F,\Gamma^\mathcal{P}$',\
x with lines lw 4 lc rgb "orange" title '$\Lambda_\text{MI}$',\
x with lines lt 1 lw 4 lc rgb "green" title 'KNN',\
x with lines lt 1 lw 4 lc rgb "black" title 'Ground Truth'

set size 0.5,0.5
set origin 0.5,0.5
set xrange [0:0.8]
set key off
set title ''
set lmargin 4
set bmargin 3
set rmargin 0
set tmargin 0
set xtics nomirror
set ytics nomirror
plot x  with lines lt 1 lw 4 lc rgb "red" title 'Median',\
x  with lines lw 4 lc rgb "blue" title '$ F,F^{-1}$',\
x with lines lw 4 lc rgb "magenta" title '$ F,\Gamma^\mathcal{P}$',\
x with lines lw 4 lc rgb "orange" title '$\Lambda_\text{MI}$',\
x with lines lt 1 lw 4 lc rgb "green" title 'KNN',\
x with lines lt 1 lw 4 lc rgb "black" title 'Ground Truth' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T17:43:03.670

这是一个丑陋的问题。我从来没有真正使用过 epslatex 终端——这可能会导致额外的复杂性，因为文档指出

> “当使用 Tex 终端时……格式化信息嵌入在字符串中，gnuplot 只能估计字符串定位的正确宽度”

你说得对，gnuplot 似乎不想制作一个比绘图更宽的键——太糟糕了，你不能像使用`rectangle`. 不过，这很容易解决。诀窍是使您的图（没有键）正常，然后制作一个最终的“空”图，该图与您需要的一样大以适合标签：

```
set term ...
set output ...

#Let the magic begin!

set multiplot
unset key

#<plot 1>
#...
#</plot 1>

#<plot 2>
#...
#</plot 2>

#<plot 3>
#...
#</plot 3>

#<plot 4>
#...
#</plot 4>

#<null>
#here we need to unset everything that was set previously
unset origin
unset border
unset tics
unset label
unset arrow
unset title
unset object

#Now set the size of this plot to something BIG
set size 2,2 #however big you need it

#example key settings
set key box 
set key horizontal reverse samplen 1 width -4 maxrows 1 maxcols 12 
set key at screen 0.5,screen 0.15 center top

#We need to set an explicit xrange.  Anything will work really.
set xrange [-1:1]
set yrange [-1:1]

plot NaN w title 'title 1',\
     NaN w title 'title 2',\
     NaN w title 'title 3',\
     NaN w title 'title 4'   #etc.

#</null>
unset multiplot  #<--- Necessary for some terminals, but not postscript I don't think. 
```

# chef-infra - 带有 JSON 的 Chef-solo run_list 错误

> ID：13181226
> 
> 赞同：0
> 
> 时间：2012-11-01T16:18:35.673
> 
> 标签：chef-infra, vagrant

首先尝试使用 chef-solo 来构建一个 vagrant VM。现在由于我的 node.json 文件而遇到错误，其他人之前曾尝试[在](https://serverfault.com/questions/411752/going-from-vagrant-in-development-to-chef-solo-in-production-and-getting-a-fat?rq=1)[SO 上解决](https://stackoverflow.com/questions/6132516/vagrant-requires-attributes-in-roles-json-that-break-existing-chef-project)几次。VM 是 Ubuntu 12.04，工作站和节点都运行 10.16.2。

这是node.json：

```
{
  "name": "apptron",
  "description": "slightly complicated config",
  "chef_type": "role",
  "json_class": "Chef::Role",
  "default_attributes": {},
  "env_run_lists": {
     "_default": [],
     "production": [],
     "staging": [],
     "test": [],
     "monitoring": [],
     "queuing": []
  },
 "run_list": ["recipe[base]", "recipe[user]"],
 "override_attributes": {}
} 
```

在节点上的堆栈跟踪：

```
vagrant@web:~$ sudo chef-solo -l debug
[2012-11-03T02:51:08+00:00] INFO: *** Chef 10.16.2 ***
[2012-11-03T02:51:08+00:00] DEBUG: Building node object for web
[2012-11-03T02:51:08+00:00] DEBUG: Extracting run list from JSON attributes provided on command line
[2012-11-03T02:51:08+00:00] DEBUG: Re-raising exception: NoMethodError - undefined method `delete' for role[apptron]:Chef::Role
/home/vagrant/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/chef-10.16.2/lib/chef/node.rb:407:in `consume_run_list'
/home/vagrant/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/chef-10.16.2/lib/chef/node.rb:392:in `consume_attributes'
/home/vagrant/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/chef-10.16.2/lib/chef/node.rb:380:in `consume_external_attrs'
/home/vagrant/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/chef-10.16.2/lib/chef/client.rb:252:in `build_node'
/home/vagrant/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/chef-10.16.2/lib/chef/client.rb:412:in `do_run'
/home/vagrant/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/chef-10.16.2/lib/chef/client.rb:176:in `run'
/home/vagrant/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/chef-10.16.2/lib/chef/application.rb:140:in `run_chef_client'
/home/vagrant/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/chef-10.16.2/lib/chef/application/solo.rb:224:in `block in run_application'
/home/vagrant/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/chef-10.16.2/lib/chef/application/solo.rb:216:in `loop'
/home/vagrant/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/chef-10.16.2/lib/chef/application/solo.rb:216:in `run_application'
/home/vagrant/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/chef-10.16.2/lib/chef/application.rb:72:in `run'
/home/vagrant/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/chef-10.16.2/bin/chef-solo:25:in `<top (required)>'
/home/vagrant/.rbenv/versions/1.9.3-p194/bin/chef-solo:23:in `load'
/home/vagrant/.rbenv/versions/1.9.3-p194/bin/chef-solo:23:in `<main>'
[2012-11-03T02:51:08+00:00] FATAL: Stacktrace dumped to /var/chef/chef-stacktrace.out
[2012-11-03T02:51:08+00:00] DEBUG: NoMethodError: undefined method `delete' for role[apptron]:Chef::Role
/home/vagrant/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/chef-10.16.2/lib/chef/node.rb:407:in `consume_run_list'
/home/vagrant/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/chef-10.16.2/lib/chef/node.rb:392:in `consume_attributes'
/home/vagrant/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/chef-10.16.2/lib/chef/node.rb:380:in `consume_external_attrs'
/home/vagrant/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/chef-10.16.2/lib/chef/client.rb:252:in `build_node'
/home/vagrant/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/chef-10.16.2/lib/chef/client.rb:412:in `do_run'
/home/vagrant/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/chef-10.16.2/lib/chef/client.rb:176:in `run'
/home/vagrant/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/chef-10.16.2/lib/chef/application.rb:140:in `run_chef_client'
/home/vagrant/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/chef-10.16.2/lib/chef/application/solo.rb:224:in `block in run_application'
/home/vagrant/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/chef-10.16.2/lib/chef/application/solo.rb:216:in `loop'
/home/vagrant/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/chef-10.16.2/lib/chef/application/solo.rb:216:in `run_application'
/home/vagrant/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/chef-10.16.2/lib/chef/application.rb:72:in `run'
/home/vagrant/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/chef-10.16.2/bin/chef-solo:25:in `<top (required)>'
/home/vagrant/.rbenv/versions/1.9.3-p194/bin/chef-solo:23:in `load'
/home/vagrant/.rbenv/versions/1.9.3-p194/bin/chef-solo:23:in `<main>'
[2012-11-03T02:51:08+00:00] FATAL: NoMethodError: undefined method `delete' for role[apptron]:Chef::Role 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T03:09:26.347

事实证明，由于某种原因，问题出在`node.json`关键点上，当我应用它时，我得到了奇怪的错误。`json_class: "Chef::Role"`当我不这样做时，一切都在 Vagrant 上按预期运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-19T13:07:12.300

您将角色 json 数据放入节点 json 文件中，这就是导致此问题的原因。

这一点：

```
"chef_type": "role",
"json_class": "Chef::Role", 
```

属于一个角色 json。

就我而言，我在角色 json 中有节点 json 数据，在节点 json 中有角色 json 数据... herp derp :)

# c# - 如何使用两个 WSDL 并通过 C# 应用程序维护一个测试实例？

> ID：13181228
> 
> 赞同：3
> 
> 时间：2012-11-01T16:18:38.077
> 
> 标签：c#, testing, wsdl, salesforce

我创建了一个服务，它使用他们的 WSDL 通过 C# 与 SalesForce 平台进行通信。碰巧，SalesForce（相当合乎逻辑地）允许其平台的“沙盒”实例和其平台的“生产”实例。我的应用程序设计用于生产，但我一直在使用沙箱进行集成测试和单元测试。我现在已经到了需要部署到生产环境的地步。但是，我面临一个大问题，即如果我需要构建和测试新功能，我必须将 WSDL 从生产实例更新到沙盒实例，然后在添加新功能时来回交换。这是因为这两个 WSDL*完全不同*，我必须从它们生成代码！这不仅草率，而且很危险。

我想找到一种方法来使用注册表项、文本值或一些配置设置来告诉我的应用程序使用哪个 WSDL。麻烦是？我不知道如何解决这个问题。我的代码引用的对象正是从该 WSDL 生成的。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T19:37:17.313

两者之间的 WSDL 不应该完全不同！当然，除非在沙盒中创建了很多新对象和自定义字段并且尚未推送到生产环境中......

您是否有任何机会混合了企业（强类型版本）和合作伙伴（更通用的）WSDL？查看此帮助主题以获取更多信息： http: [//www.salesforce.com/us/developer/docs/api/Content/sforce_api_quickstart_intro.htm#choose_wsdl](http://www.salesforce.com/us/developer/docs/api/Content/sforce_api_quickstart_intro.htm#choose_wsdl)

如果您真的关心数据模型，您可能会决定使用合作伙伴版本（生成的代码有点难看，因为它为您提供了通用的 sObjects 而不是更具体的 Account、Contact 等）。我总是对企业版很好（沙盒中的东西最终将其投入生产，一旦不同的系统开始依赖数据模型，团队就会尽可能地开始同步他们的版本）。

* * *

区分它们对我有用的方法是检查端点（在文件的最底部）。我正在做 PHP 集成，所以对我来说，动态翻转端点不是问题，而是“信任”相同的对象结构。不知道它在 C# 世界中的样子，这条信息最终在解析代码中的什么位置......祝你好运！

企业 - 沙盒

```
<service name="SforceService">
<documentation>Sforce SOAP API</documentation>
<port binding="tns:SoapBinding" name="Soap">
    <soap:address location="https://test.salesforce.com/services/Soap/c/26.0/(18 char sandbox Id)"/>
</port>
</service> 
```

企业 - 生产

```
https://login.salesforce.com/services/Soap/c/26.0/(prod id) 
```

Partner WSDLs have "u" in the URL instead of "c" and they don't carry specific organisation's id: `https://test.salesforce.com/services/Soap/u/26.0"/`

(my small trick to memorize this is to think about it as "Client" or "Customized" and "Universal")

**Edit:** of course if you'll stick to "enterprise" the only endpoint you can really count on is production. Sandbox org ids change every time they're refreshed.

# mysql - Rails 十进制迁移产生整数列

> ID：13181230
> 
> 赞同：1
> 
> 时间：2012-11-01T16:18:43.800
> 
> 标签：mysql, ruby-on-rails, migration, decimal

我正在使用 mysql2 gem (v0.3.11) 运行 Rails 3.1.1。出于某种原因，当向表中添加一些小数列时，它会生成整数字段。它没有给我任何错误，并且迁移显示正在创建十进制列。有没有其他人遇到过这个问题？这是我的迁移中的一行：

`add_column :tracks, :energy, :decimal, precision: 18`

我通常不会跑到 StackOverflow，但我真的不知道在哪里寻找问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T22:13:55.733

尝试将`:scale => x`（`x`小数点右侧需要的数字位数）添加到迁移中的行。

[来源和更多信息](http://torontoprogrammer.ca/2010/05/decimal-numbers-in-rails-and-mysql/)

# jquery - 使用 $.inArray() 在数组中查找值时遇到问题

> ID：13181234
> 
> 赞同：0
> 
> 时间：2012-11-01T16:18:50.433
> 
> 标签：jquery, arrays, indexof

我有一个值和一个数组。我正在尝试查看该值是否包含在数组中。我正在使用 jQuery 的“inArray”方法，但结果一直告诉我找不到它。我究竟做错了什么？

这是小提琴。 [http://jsfiddle.net/p9xcb/](http://jsfiddle.net/p9xcb/)

```
var array =  ["79C8A605-1384-4A51-8AC9-C53C1AE075D2", "E367CEEE-A344-4C63-B4B3-A1CC20D3DAF2", "1E3ED40E-935A-4895-960E-89FFD8CD81B9", "2E67F9E8-4770-497E-A938-0A145DA033AF", "35B33B09-6BD3-495E-9A3E-4B5D6DF8655E", "F419FB1F-4922-46B9-B651-8BB0D42510DD", "61FD263B-175E-4434-8A88-8E00418E2E14", null, "FF98229A-998C-49AD-9392-E4CE98115C0A", "C88B9D52-FE70-430C-B43D-D52F9B22E997", "1DDF2413-B453-42BB-8D78-7A7AAA94C353", "55D922B1-EBCD-4EC3-87A5-FA6AA38C9975", "0FA8079A-F76F-4CA5-B370-7B8B9AF2720A", "CF1971EF-E0C2-4C54-8131-A19FB14F2515", "A736854B-73A2-4282-85E0-6298D8AB815A", "DA280665-DC5E-4DF2-9FB1-924E1C8E4713", "9C73A934-9DDF-415C-A409-F2AC79493539", "FD950617-2C9C-4B6C-94F1-6C746699B636", "F184BBBE-C296-4F1D-9DD7-57F87D3B95A6", "676955FB-3F3D-4DC6-8F9D-A873A8440499", "5509E5C6-6650-4DF6-B7A9-49C8BC935B53", "7D88DCD6-431E-41EB-9A87-5C19C2D579FC", "509EA3D8-5B30-41F0-809B-D1E45BC30E3C", "6C4D6F4F-A188-4E6C-B40C-02AE4A5FFAAB", "710E2593-FE14-4CAB-B97C-95D96BB81266", "CBEB793E-A572-4995-8342-E9A48EF19E82", "A8C937F2-056C-46B4-8034-11CA4BB37A1D", "8E9B5E53-298B-4BDE-A696-20F102C28F12", "7BF7421C-CB21-4A44-BBA3-2CFD3A74C889", "F8D89224-7BB7-477F-BB8E-F5B2633A4111", "73F196CF-62F8-4F7A-9938-4F52404450E4", "B4D419D6-A5B8-4141-8C0E-ADCBEC72F2D8", "59ECF672-5C93-4E1E-8E30-6E0699874D61", "EC72A684-5888-48E1-99FD-FE455A50222F", "5D234D6D-E296-4D90-B87E-61FB6FB48702", "8EDD5718-E28A-4A4E-85BA-4DC9C072EAA8", "66FEA812-9945-4FFB-87CB-CCA828768FA0", "0025CB40-3016-4286-AD60-46685EDFD6A1", "508AC4D3-EA29-43A9-92CC-453FE2438D58", "030C5CBE-C227-4326-BED7-DB16A90D5A36", "2AAFF154-0FD0-4B60-9180-DE19A9E0890B", "64EBB0B4-81C1-46EB-8B1A-711A06E45FA3", "E1AA77B2-0E67-42A7-B7D7-A15D2A4EA448", "E9543440-E66E-4984-AC4E-091F161D33D6", "D93988D5-73D9-4988-B1A1-B48282F3C7B7", "6DC572B8-1F69-4A5C-81C7-6EAC617EBEE1", "BB56B36C-1D90-4B8D-ABF0-4ECD4052DCC1", "D1FEFB8D-84F4-4500-92F2-70FEE23F4B6E", "3A836ED4-639C-42C4-B945-375DC053FB61", "33672786-E964-4C3F-A3EB-7BF6634D13A0", "7F76C892-AEC1-4901-80BE-B93DFF59D159", "0E92F1AD-5C09-4B3D-BAF5-5D62BA3440EF", "73E50616-DCA7-4E83-B81F-100C21A18C49", "CF89704A-BD58-4D41-A5B5-10BAFC6F8085", "0D5CBF2A-3699-4968-A2DC-F6EA61D6C7C1", "FED50D50-86E8-42E2-8CD4-17DC01BB966C", "81EEFFA0-D172-4BC3-8474-2C55E6CB06CA", "8FA6CBBD-D5AC-431D-B1E3-C0D1BA48ECCA", "7EEA9381-F0F0-4252-BF29-D15A5A0283C6", "0FFDE30B-E4C3-40CC-A292-566D54D05821", "E24EE39E-0FDE-4C20-B61C-E5C07B483CF8", "82F6B86F-6EAB-42B4-B19D-CA6EAFF83A92", "7B663073-6296-4A08-89AF-7051EAFC3E8A", "EA36E8B5-A266-473C-A076-96A605A856B9", "4A99A5A0-FBF3-4AC6-A34A-52E761B98C8A", "26513617-D98B-44D9-BDD5-2FFCB8C7783B", "67F93D0F-E145-4447-A7B8-E3D1E944B88C", "9798FD1D-B781-4420-A37E-622E04E69672", "1A872624-E81B-45B7-B6FD-ED229AE54042", "092C0992-FAED-4E74-AB3E-6553F5261EF2", "76B94E6B-BE6B-43F2-ABBD-67A3B92C33B9", "AADF1B4D-F32E-4C0C-B4FC-EAC051338B8C", "E8A2479D-B1FC-4B67-AC94-C1AB8E1C7298", "8F7350C0-867D-461A-92D9-225CF8E91D60", "E742D55B-ADF0-4ADF-A3C9-EC4B3BAA832A", "320EBB4F-F0AB-47E7-A5B6-334429F8DEC8", "CEF5D66B-5EF2-468B-A9BE-06B0BC05E917", "CC6D2205-EB58-414D-A404-ED7B743E385E", "7D7EB4D0-BE31-4F28-928D-8E1FC5C947F0"];

var value = "CC6D2205-EB58-414D-A404-ED7B743E385E";

$('body').html($.inArray(value, array));​ 
```

编辑：

如果我运行此代码

```
if ($.inArray(value, array)) {/*this will never be called, why?*/} 
```

我永远不会看到任何`/*this will never be called, why?*/`部分在哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:22:06.407

> $.inArray() 方法类似于 JavaScript 的原生 .indexOf() 方法，因为它在找不到匹配项时返回 -1。如果数组中的第一个元素与值匹配，则 $.inArray() 返回 0。

除此之外，还`inArray`返回事件的索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T16:28:47.827

这*可能*是你的问题。在 javascript`if (0)`中将与 相同`if (false)`，并且`if (-1)`与`if (true)`. 你需要使用

```
if ($.inArray(value, array) >= 0) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T16:52:30.607

您应该首先了解javascript中真假的概念。以下值将在布尔运算符内部评估为 false

```
undefined
null
empty string
false
0 
```

以下将评估为真

```
non-null object reference
non-empty string
true
any non-zero number 
```

现在你看到问题了吗

```
if($.inArray(value,array)){

} 
```

提示：未找到元素 (-1) 将评估为真，在第一个位置 (0) 找到元素将评估为假。在第一个之后的任何元素中查找值将评估为真。

简单的解决方法是使用：

```
if ($.inArray(value, array) >= 0) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T16:22:12.990

```
check = function (arr,val)
{
    for(i = 0; i < arr.length;i++){
        try{
         if(arr[i].indexOf(val) != -1){
            return i;           
        }
        }catch(e){}
    }
    return -1;
} 
```

像这样使用它`check(array,value);`

# javascript - 如何将谷歌地图对象传递到我的自调用 JS 函数中？

> ID：13181236
> 
> 赞同：0
> 
> 时间：2012-11-01T16:18:49.770
> 
> 标签：javascript, google-maps, scope, self-invoking-function

我已经简化了这个问题的例子，但它找不到谷歌地图对象。它返回 TypeError:a 为空。

有任何想法吗？我认为这是范围问题或其他问题，但完全卡住了

感谢您的任何想法。

```
(function ($, document){

    mapOptions = {
          center: new google.maps.LatLng(-34.397, 150.644),
          zoom: 8,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
    map = new google.maps.Map(document.getElementById("map_canvas"),mapOptions);

})(jQuery, document); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:26:03.183

请记住，您的代码在页面仍在加载时运行。可能是google的地图库还没有加载。

你必须使用这样的结构：

```
(function ($, document){
    google.load("maps", function () {
        // here maps is guaranteed to be available
    });
    // here maps may _not_ be available
})(jQuery, document); 
```

# c - malloc.c 中的 SIGABRT，刚刚发生了什么？

> ID：13181241
> 
> 赞同：8
> 
> 时间：2012-11-01T16:19:10.793
> 
> 标签：c, malloc, runtime-error, sigabrt, cgdb

我写了这段无辜的代码，导致了这样一个邪恶的错误：

```
static char * prefixed( char * pref, char *str ) {
    size_t newalloc_size = sizeof(char) * (strlen(pref) + strlen(str));
    char * result = (char*) malloc( newalloc_size );
    [...] 
```

调试（cgdb）的输出：

```
Breakpoint 1, prefixed (pref=0x401345 "Env: ", str=0x4012b5 "Home") at ./src/backend/os/env.c:77
(gdb) s
(gdb) p newalloc_size 
$1 = 9
(gdb) s
envtest: malloc.c:2368: sysmalloc: Assertion `(old_top == (((mbinptr) (((char *) &((av)->bins[((1) - 1) * 2])) - __builtin_offsetof (struct malloc_chunk, fd)))) && old_size == 0) || ((unsigned long) (old_size) >=
(unsigned long)((((__builtin_offsetof (struct malloc_chunk, fd_nextsize))+((2 * (sizeof(size_t))) - 1)) & ~((2 * (sizeof(size_t))) - 1))) && ((old_top)->size & 0x1) && ((unsigned long)old_end & pagemask) == 0)'
failed.

Program received signal SIGABRT, Aborted.
0x00007ffff7a68fd5 in raise () from /usr/lib/libc.so.6
(gdb) 
```

我也检查了传递的参数。他们应该在哪里：

```
Breakpoint 1, prefixed (pref=0x401345 "Env: ", str=0x4012b5 "Home") at ./src/backend/os/env.c:77
(gdb) p pref
$2 = 0x401345 "Env: "
(gdb) p strlen(pref)
$3 = 5
(gdb) p str
$4 = 0x4012b5 "Home"
(gdb) p strlen(str)
$5 = 4
(gdb) 
```

谁能想象，这里出了什么问题？我知道有将两个字符串组合在一起的功能，但我想自己做！

亲切的问候。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-01T16:21:15.783

这听起来像是程序中*其他地方*的内存泄漏或缓冲区溢出（或其他一些堆损坏） 。我建议使用 to`-Wall -g`选项重新编译它`gcc`，以改进您的程序，直到编译器没有给出警告，并使用[valgrind](http://valgrind.org/)并`gdb`调试问题。

其实你的说法

```
 result = (char*) malloc( newalloc_size ); 
```

错误（终止空字节的空间不足）。你可能想要

```
 result = malloc(newalloc_size+1); 
```

但你应该学会使用[asprintf](http://linux.die.net/man/3/asprintf)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T16:27:41.013

从您的代码中，最可能的答案是您正在使用以 null 结尾的字符串，并且不允许在您分配的缓冲区中为终止 null 留出空间。

试试这个，而不是你的行：

```
size_t newalloc_size = sizeof(char) * (strlen(pref) + strlen(str) + 1); 
```

终止的 null 被写入 malloc 的缓冲区之外，它可能会覆盖 malloc 的内部簿记的一部分。这会导致堆损坏，迟早会导致 malloc 崩溃。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-02-05T17:30:44.413

我试图分配过多的内存并且也得到了邪恶的错误（错误代码：EXC_I386_INVOP）。

我通过 Product/Scheme/Edit Scheme... 中的诊断工具（在 XCode 6.1.1 中）对其进行了跟踪，然后在 Run/Diagnosis 中进行了跟踪。

# mysql - 模拟存储过程中的函数调用

> ID：13181244
> 
> 赞同：0
> 
> 时间：2012-11-01T16:19:49.170
> 
> 标签：mysql, stored-procedures, syntax

（以下查询是对实际查询的极端简化，为了代码清晰）

我有一个存储过程，其中有一个查询：

```
SELECT
   f1,
   f2
FROM
   T1
WHERE
   T1.id IN (SELECT complex_id FROM t2 WHERE complex='condition') 
```

我想在其他存储过程中重用内部查询，但**只在一个地方**`(SELECT complex_id FROM t2 WHERE complex='condition')`维护它的语法。 我将如何使用 DB 对象（SP、Triggers 等）**而不**使用外部代码（如 PHP 等）来实现这一点。

 ***** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:54:18.170

您应该创建一个视图：[http ://dev.mysql.com/doc/refman/5.5/en/create-view.html](http://dev.mysql.com/doc/refman/5.5/en/create-view.html)

```
CREATE VIEW reusable_query AS
SELECT complex_id FROM t2 WHERE complex='condition'; 
```

那么你就可以：

```
SELECT * FROM t1 WHERE id IN (SELECT complex_id FROM reusable_query); 
```

您可以使用这样的存储过程更进一步：

```
CREATE FUNCTION isInReusableQuery(param INT) RETURNS BOOL
DELIMITER //
BEGIN
    DECLARE cnt INT;
    SELECT COUNT(complex_id) INTO cnt FROM reusable_query
    WHERE
        complex = 'condition'
        AND complex_id = param;
    RETURN cnt > 0;
END //
DELIMITER ; 
```

这使您可以执行以下操作：

```
SELECT * FROM t1 WHERE isInReusableQuery(id); 
```

不过，我可能不会推荐后者。从存储的函数中查询视图可能会阻止一些[优化](http://dev.mysql.com/doc/refman/5.5/en/view-algorithms.html)。****

# sql-server - SQL Server 2008 中服务器角色的默认用户映射是什么

> ID：13181245
> 
> 赞同：0
> 
> 时间：2012-11-01T16:19:51.243
> 
> 标签：sql-server, sql-server-2008

我正在学习身份验证-用户-角色-模式之间的关系。在我的应用程序中，我使用的是分配为系统管理员（以及公共）服务器角色的 Windows 身份验证。

之后，当我执行时`SELECT CURRENT_USER`，我得到`dbo`. 但是，我找不到从服务器角色到数据库用户的映射。我还通过创建一个具有公共服务器角色的登录来进行测试。使用此登录名，我在执行时得到了客人`SELECT CURRENT_USER`。

那么这个映射是在哪里定义的呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T14:40:51.970

我不确定你在问什么。

您的用户登录名必须具有该`sysadmin`角色。在内部，具有该`sysadmin`角色的所有用户都将自动模拟该`dbo`用户。这就是`sysadmin`角色的工作方式。如果您添加另一个用户登录并运行`SELECT CURRENT_USER()`，您将获得实际用户名而不是`dbo`.

至于定义映射的一般位置，它位于`sys.server_principals`和`sys.server_role_members`系统目录中。您可以使用此查询来查看映射：

```
select      r.name "role_name", m.name "member_name"
from        sys.server_principals r
left join   (sys.server_role_members rm
            inner join  sys.server_principals m
                        on rm.member_principal_id = m.principal_id)
            on r.principal_id = rm.role_principal_id
where       r.type = 'R'
order by    r.name, m.name 
```

您必须使用存储过程`sp_addsrvrolemember`并`sp_dropsrvrolemember`实际修改映射。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T21:16:40.123

虽然我不完全确定您的问题，但您可能想查看[`IS_SRVROLEMEMBER`](http://msdn.microsoft.com/en-us/library/ms176015%28v=sql.100%29.aspx)，例如：

```
select is_srvrolemember('sysadmin');
select is_srvrolemember('dbcreator');
select is_srvrolemember('bulkadmin');
select is_srvrolemember('diskadmin');
select is_srvrolemember('processadmin');
select is_srvrolemember('serveradmin');
select is_srvrolemember('setupadmin');
select is_srvrolemember('securityadmin'); 
```

或者甚至

```
select is_member('dbo');
select is_member('public');
select is_member('guest'); 
```

SQL Server 2008 中有许多[安全功能可以帮助您。](http://msdn.microsoft.com/en-us/library/ms186236%28v=sql.100%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T10:30:54.230

我想出了如何检查映射，以及让我感到困惑的部分。首先，检查服务器登录和数据库用户之间映射的查询是这样的：

```
SELECT
SDP.PRINCIPAL_ID AS [Principal ID], 
SDP.NAME AS [Database UserName], 
SDP.TYPE_DESC AS [Datebase UserType],  
SSP.NAME AS [Server LoginName], 
SSP.TYPE_DESC AS [Server LoginType]
FROM sys.database_principals SDP 
INNER JOIN sys.server_principals SSP 
ON SDP.sid = SSP.sid 
```

sid 是所有主体的唯一标识符，包括服务器级别、数据库级别。

其次，让我感到困惑的实际部分。这是因为存在隐式映射，但即使查询也不会显示。让我再次描述一下我的问题：我使用我的 Windows 登录名（我们称之为 MY_W_NAME）作为身份验证模式来登录 SQL Server。之后，当我对一个数据库执行 select CURRENT_USER 时，我得到了 dbo，它是一个数据库用户。我会假设 MY_W_NAME 和 dbo 之间存在显式映射，我想找到它是唯一的自然。我正在使用 SQL Server 管理工作室，我在服务器登录名 MY_W_NAME 的属性窗口中看到，有一个名为“用户映射”的选项卡。所以我期待在这里看到一个映射，结果发现没有。在我运行上面的查询之后，我仍然找不到那里列出的 MY_W_NAME。所以它是如何映射的真的很神秘。

原来这是因为 MY_W_NAME 是服务器角色“sysadmin”，默认情况下，此登录名将映射到所有数据库的所有“dbo”数据库用户。但是此映射不会由查询显示，也不会显示在属性窗口的用户映射选项卡上。一些进一步的实验显示了更多有趣的事实：我实际上可以添加从 MY_W_NAME 到特定数据库的显式映射，例如，从脚本或属性窗口。但是，即使我看到为 MY_W_NAME 创建新数据库用户的执行是成功的，当我对这个数据库运行 select CURRENT_USER 时，我仍然得到 dbo。我想这是因为“系统管理员”确实具有更高的权限。相反，如果我创建了一个具有“公共”服务器角色的服务器登录名，并在此登录名与数据库用户之间添加了一个映射，则会显示此映射。

我必须说，对于 SQL Server 经验有限的普通人来说，这不是一种自然的方式。几天后，终于有人向我指出了这一点。

# swtbot - Eclipse 应用程序外的 SWTBot 测试

> ID：13181246
> 
> 赞同：3
> 
> 时间：2012-11-01T16:19:53.257
> 
> 标签：swtbot

我有一个可以作为常规 Eclipse 插件运行的应用程序，我可以像往常一样使用我的 SWTBot 测试对其进行测试。

可以在我的计算机上单独安装相同的插件应用程序（就像任何其他 Windows 应用程序一样）。

问题是 - 如何配置 SWTBot 测试以在单独安装的应用程序上运行？（而不是类名，我需要使用一些文件夹/文件名作为应用程序位置）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-25T14:16:54.710

您需要以一种或另一种方式在目标应用程序中安装 SWTBot。请参阅[http://wiki.eclipse.org/SWTBot/Automate_test_execution#On_an_already_packaged_RCP_application](http://wiki.eclipse.org/SWTBot/Automate_test_execution#On_an_already_packaged_RCP_application)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-15T13:18:58.880

Tycho 最近可以轻松地针对现有应用程序运行 JUnit 测试（也包括 SWTBot 测试）：[http ://wiki.eclipse.org/Tycho/Testing_with_Surefire#p2Installed_on_provisioned_RCP_application](http://wiki.eclipse.org/Tycho/Testing_with_Surefire#p2Installed_on_provisioned_RCP_application)

# c++ - 从作用域分配器适配器构造内部分配器

> ID：13181248
> 
> 赞同：3
> 
> 时间：2012-11-01T16:19:58.497
> 
> 标签：c++, boost, c++11

最近我开始使用 C++11 范围分配器概念的 boost 实现。现在我很困惑如何将作用域分配器适配器与嵌套级别超过 1 的容器一起使用。特别是如何将作用域分配器适配器中的分配器正确地传播到嵌套的分配器，以及如何检索正确的内部分配器以传递给稍后要移入的对象？

更准确地说。我遇到的问题如下。有一个`vector<vector<int>>`，我可以做类似的事情

```
namespace bco = boost::container;
typedef std::allocator<int> Alloc1;
typedef bco::vector<int, Alloc1 > Vec1;

typedef bco::scoped_allocator_adaptor<std::allocator<Vec1>, 
std::allocator<Vec1>> Alloc2;

typedef bco::vector<Vec1, Alloc2 > Vec2; 
```

并使用在 Vec2 中移动 Vec1

```
Alloc2 alloc2;
Vec2 vec2(alloc2);
vec2.push_back(boost::move(Vec1(alloc2.inner_allocator()))); 
```

但是，如果我再添加一个级别并尝试相同，它将不再起作用

```
typedef bco::scoped_allocator_adaptor<std::allocator<Vec2>,
std::allocator<Vec2>, std::allocator<Vec2> > Alloc3;

typedef bco::vector<Vec2, Alloc3 > Vec3;

 Alloc3 alloc3;
 Vec3 vec3(alloc3);
 vec3.push_back(Vec2(alloc3.inner_allocator())); 
```

推送不会编译，因为 Vec2 构造中的分配器不是预期的类型。这并不奇怪，因为分配器不知道。例如，以下也是传播分配器的有效代码。

```
typedef bco::scoped_allocator_adaptor< std::allocator<Vec2> > Alloc3b;
typedef bco::vector<Vec2, Alloc3b > Vec3b; 
```

到目前为止一切顺利，但我看不到将分配器转换为所需类型的方法。使用 rebind 只会更改分配的类型，但不会更改分配器类型本身。所以我错过了将作用域分配器适配器转换为另一个的魔法。通常人们并不关心，因为分配器特征构造函数会处理它。但是，可以肯定的是，要移入的对象使用正确的分配器，我需要以某种方式从“主”作用域分配器适配器获取相应的内部分配器。感谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T18:29:37.593

Short form, change your typedef for Alloc3:

```
typedef bco::scoped_allocator_adaptor< std::allocator<Vec2>, 
                                       std::allocator<Vec1>, 
                                       std::allocator<int> > Alloc3;

Alloc3 alloc3;
Vec3 vec3(alloc3);
vec3.push_back(Vec2(alloc3.inner_allocator())); 
```

The reason it didn't work without the change is that the inner allocator for your original implementation was `bco::scoped_allocator_adaptor< std::allocator<Vec2>, std::allocator<Vec2>>`. When constructing one `scoped_allocator_adaptor` from another, all of the template arguments except the first have to be the same. In the original case giving you problems, this was not the case, hence the compiler error.

# git - 从 Git 中的多个提交中导出修改后的文件

> ID：13181249
> 
> 赞同：4
> 
> 时间：2012-11-01T16:19:59.150
> 
> 标签：git, git-diff

与此问题非常相似的问题：[Export only modified and added files with folder structure in Git](https://stackoverflow.com/questions/4541300/export-only-modified-and-added-files-with-folder-structure-in-git)

[给定的答案](https://stackoverflow.com/a/4541846/47121)似乎只输出给定提交（*$commit_id*）中更改的文件：

```
git diff-tree -r --no-commit-id --name-only --diff-filter=ACMRT *$commit_id*
```

我想获取 commit1 和 commit2 之间的修改文件列表...这可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T16:23:51.643

您应该只能使用提交 ID。例如：

```
git diff-tree -r --no-commit-id --name-only --diff-filter=ACMRT 218d182e 3ef44d29d 
```

如果要在提交中包含更改，`3ef44d29d`则需要通过 ID 或 with 指定其父级`3ef44d29d^`。

这里有一些例子，来自我自己的一个项目。回顾历史，我有以下提交：

```
1a443
fb4ae
88226
c46ba 
```

我从各种命令中得到以下输出：

```
$ git diff-tree -r --name-only 1a443
1a443831fa9f797fedb397e900bd3d45e2093ea6
public/customers.en.html
$ git diff-tree -r --name-only fb4ae
fb4ae4af0ac473b8547ec1717d4b4172c0d634f4
public/checkout.en.html
$ git diff-tree -r --name-only 88226
88226fec6f1082b1dffd266d3e1bd0dc38cca520
public/finish.en.html
$ git diff-tree -r --name-only c46bac
c46bacddee7785599c2f026f53cd93357e8ad30d
public/index.php 
```

我可以很容易地得到所有的`c46bac`变化`1a443`：

```
$ git diff-tree -r --name-only c46bac 1a443
public/checkout.en.html
public/customers.en.html
public/finish.en.html 
```

但请注意，它不包括对`public/index.php`commit的更改`c46bac`。我们真正想要的是使用该提交的**父**级作为我们比较的起点。

```
$ git diff-tree -r --name-only c46bac^ 1a443
public/checkout.en.html
public/customers.en.html
public/finish.en.html
public/index.php 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-19T16:02:42.953

`git diff --name-only commit1..commit2`

# ios - 如果项目不存在，Core Data 添加项目

> ID：13181255
> 
> 赞同：0
> 
> 时间：2012-11-01T16:20:13.127
> 
> 标签：ios, web-services

我有一个网络服务，可以将数据发送到手机。有时它已经作为核心数据对象存在，有时它是新的。我对该项目有一个唯一的引用，所以我基本上想搜索该对象是否存在，如果不存在，则将其保存到核心数据存储中。如果它存在，那么在理想世界中我想更新对象。

目前我删除所有对象并从我的网络服务中再次填充它们，但显然当有很多项目时这不切实际。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:25:07.637

你应该在你的实体中有一个唯一的 ID。然后你从核心数据中获取具有该 ID 的实体，如果它是空的，则创建一个新实体，否则使用获取的实体。那么这有什么问题呢？如果您使用并发可能会更难。

# c# - c#为按钮使用二维数组

> ID：13181258
> 
> 赞同：1
> 
> 时间：2012-11-01T16:20:23.130
> 
> 标签：c#, .net, arrays, visual-studio-2010, multidimensional-array

![图片](../Images/8a258b0aed68f7f8709d19bd048713e5.png)

上图是程序的外观

四个顶部按钮已按如下方式放置在二维数组中

```
private Button[,] btns;

        public Form1()
        {
            InitializeComponent();

            btns = new Button[,] { { button2 , button1 },
                                   { button4 , button3 }};
        } 
```

四个按钮已初始化为

```
 foreach (var btn in btns)
            {
                btn.Enabled = false;
            } 
```

我想要做的是当您单击底部的两个按钮时，该行中的每个按钮都启用并签名颜色（红色和蓝色依次像连接 4 游戏）

我已经设法解决了一半的问题，但是当我单击第 1 行按钮时，它也会继续启用第 2 行，当我单击第 2 行按钮时，它会从第 1 行开始启用

我如何限制每个按钮来处理二维数组，以便它只启用正确的行。

这是完整的代码

```
namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {

        private Button[,] btns;

        public Form1()
        {
            InitializeComponent();

            btns = new Button[,] { { button2 , button1 },
                                   { button4 , button3 }};
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            foreach (var btn in btns)
            {
                btn.Enabled = false;
            }
        }
        int cc = 0;

        private void button5_Click(object sender, EventArgs e)
        {

            foreach (var btn in btns)
            {

                if (!btn.Enabled)
                {
                    btn.Enabled = true;

                    if (cc == 0)
                    {
                        cc = 1;
                        btn.BackColor = Color.Red;

                    }
                    else
                    {
                        cc = 0;
                        btn.BackColor = Color.Blue;
                    }

                    return;
                }
            }
        }

        private void button6_Click(object sender, EventArgs e)
        {

            foreach (var btn in btns)
            {

                if (!btn.Enabled)
                {
                    btn.Enabled = true;

                    if (cc == 0)
                    {
                        cc = 1;
                        btn.BackColor = Color.Red;

                    }
                    else
                    {
                        cc = 0;
                        btn.BackColor = Color.Blue;
                    }

                    return;
                }
            }
        }
    }
} 
```

解决了

这个问题解决了，这就是我解决它的方法：

```
 private void button5_Click(object sender, EventArgs e)
            {
               Button[] row1 = new Button[] {button2, button1};
                foreach (var roww1 in row1)
                {

                    if (!roww1.Enabled)
                    {
                        roww1.Enabled = true;

                        if (cc == 0)
                        {
                            cc = 1;
                            roww1.BackColor = Color.Red;

                        }
                        else
                        {
                            cc = 0;
                            roww1.BackColor = Color.Blue;
                        }

                        return;
                    }
                }
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T16:42:00.023

使用多维数组时，需要使用 for 循环而不是 foreach 一次遍历数组的一行：

```
private void button5_Click(object sender, EventArgs e)
{
   for (int col = 0; col < btns.GetLength(1); ++col)
   {
      var btn = btns[0, col];
   //snip
}

private void button6_Click(object sender, EventArgs e)
{
   for (int col = 0; col < btns.GetLength(1); ++col)
   {
      var btn = btns[1, col];
   //snip
} 
```

# combobox - 如何使用 ComboBoxTableCell 显示不同的值？

> ID：13181265
> 
> 赞同：0
> 
> 时间：2012-11-01T16:20:46.790
> 
> 标签：combobox, tableview, javafx-2

我尝试使用`ComboxBoxTableCell`没有成功。
单元格的内容显示对象属性的正确值。但是当显示组合框时，所有项目都使用`toString`对象方法而不是属性显示。
我试图覆盖`updateItem`或`ComboBoxTableCell`提供一个`StringConverter`但没有任何效果。

您对在表格单元格中自定义组合框列表显示有一些想法吗？

我在下面放了一个简短的例子来快速查看问题。执行应用程序并单击单元格，您将看到包含`toString`对象值的组合框。

```
package javafx2;  

import javafx.application.Application;
import javafx.beans.property.adapter.JavaBeanObjectPropertyBuilder;
import javafx.beans.value.ObservableValue;
import javafx.collections.FXCollections;
import javafx.collections.ObservableList;
import javafx.scene.Scene;
import javafx.scene.control.TableCell;
import javafx.scene.control.TableColumn;
import javafx.scene.control.TableColumn.CellDataFeatures;
import javafx.scene.control.TableView;
import javafx.scene.control.cell.ComboBoxTableCell;
import javafx.stage.Stage;
import javafx.util.Callback;
import javafx.util.StringConverter;

public class ComboBoxTableCellTest extends Application {

    public class Product {
        private String name;
        public Product(String name) {
            this.name = name;
        }
        public String getName() { return name; }
        public void setName(String name) { this.name = name; }
    }

    public class Command {
        private Integer quantite;
        private Product product;
        public Command(Product product, Integer quantite) {
            this.product = product;
            this.quantite = quantite;
        }
        public Integer getQuantite() { return quantite; }
        public void setQuantite(Integer quantite) { this.quantite = quantite; }
        public Product getProduct() { return product; }
        public void setProduct(Product product) { this.product = product; }
    }

    public static void main(String[] args) {
        launch(args);
    }

    @Override
    public void start(Stage stage) throws Exception {
        Product p1 = new Product("Product 1");
        Product p2 = new Product("Product 2");
        final ObservableList<Product> products  = FXCollections.observableArrayList(p1, p2);
        ObservableList<Command> commands  = FXCollections.observableArrayList(new Command(p1, 20)); 

        TableView<Command> tv = new TableView<Command>();
        tv.setItems(commands);

        TableColumn<Command, Product> tc = new TableColumn<Command, Product>("Product");
        tc.setMinWidth(140);
        tc.setCellValueFactory(new Callback<TableColumn.CellDataFeatures<Command,Product>, ObservableValue<Product>>() {

            @Override
            public ObservableValue<Product> call(CellDataFeatures<Command, Product> cdf) {
                try {
                    JavaBeanObjectPropertyBuilder<Product> jbdpb = JavaBeanObjectPropertyBuilder.create();
                    jbdpb.bean(cdf.getValue());
                    jbdpb.name("product");
                    return (ObservableValue) jbdpb.build();
                } catch (NoSuchMethodException e) {
                    System.err.println(e.getMessage());
                }
                return null;
            }
        });
        final StringConverter<Product> converter = new StringConverter<ComboBoxTableCellTest.Product>() {

            @Override
            public String toString(Product p) {
                return p.getName();
            }

            @Override
        public Product fromString(String s) {
                // TODO Auto-generated method stub
                return null;
            }
        };

        tc.setCellFactory(new Callback<TableColumn<Command,Product>, TableCell<Command,Product>>() {

            @Override
            public TableCell<Command, Product> call(TableColumn<Command, Product> tc) {
                return new ComboBoxTableCell<Command, Product>(converter, products) {
                    @Override
                    public void updateItem(Product product, boolean empty) {
                        super.updateItem(product, empty);
                        if (product != null) {
                            setText(product.getName());
                        }
                    }
                };
            }
        });

        tv.getColumns().add(tc);
        tv.setEditable(true);

        Scene scene = new Scene(tv, 140, 200);
        stage.setScene(scene);
        stage.show();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T13:45:13.450

*Desculpe-me Philippe Jean por respondê-lo em português, mas como não domino bem sua língua, achei melhor desta forma。*

*Encontrei o mesmo problema que o seu e solucionei-o com a seguinte implementação。*

* * *

我发现了与您相同的问题，并通过以下实现解决了它。

```
final ObservableList<Product> products  = FXCollections.observableArrayList(p1, p2);
ObservableList<Command> commands  = FXCollections.observableArrayList(new Command(p1, 20));

TableView<Command> tv = new TableView<Command>();
tv.setItems(commands);

/**
 * Substitua as sugestões de tipo Product por String da TableColumn e suas correlacionadas como abaixo
 */
TableColumn<Command, String> tc = new TableColumn<Command, String>("Product");
tc.setMinWidth(140);
tc.setCellValueFactory(new Callback<TableColumn.CellDataFeatures<Command, String>, ObservableValue<String>>(){
    @Override
    public ObservableValue<String> call(CellDataFeatures<Command, String> p) {
        return new SimpleObjectProperty(p.getValue().getProduct().getName());
    }
});
tc.setCellFactory(new Callback<TableColumn<Command, String>, TableCell<Command, String>>() {
    @Override
    public TableCell<Command, String> call(TableColumn<Command, String> p) {
        /**
         * Este Map guardará os objetos Product indexando pelo "name"
         */
        final Map<String, Product> products = new HashMap();
        Iterator<Product> productsi = pojosComboBox.iterator();
        while(productsi.hasNext()) {
            Product product = productsi.next();
            products.put(product.getName(), product);
        }

        ComboBoxTableCell cell = new ComboBoxTableCell(FXCollections.observableArrayList(products.keySet())){
            @Override
            public void updateItem(Object item, boolean empty) {
                super.updateItem(item, empty);
                if(item != null) {
                    /**
                     * Aqui acontece a atualização do objeto Command de acordo com o esperado
                     */
                    tabela.getItems().get(getIndex()).setProduct(products.get(item.toString()));
                }
            }
        };
        cell.setAlignment(Pos.CENTER);
        return cell;
    }
}); 
```

# c# - Webview 无法加载到弹出窗口商店应用程序（Facebook 登录页面）

> ID：13181267
> 
> 赞同：1
> 
> 时间：2012-11-01T16:20:50.837
> 
> 标签：c#, windows-8

我从 msdn 站点中的 CameraCaptureUI 获得了示例代码。然后我添加了一个函数来调用 facebook 登录页面的弹出窗口。但是弹出窗口什么也没显示。我用一个新项目测试了 facebook 代码，它工作正常。有谁知道为什么这个弹出窗口不能显示任何东西？

```
 popup.Child = new FacebookLogin();
        popup.IsOpen = true;
        App.fbevents.FBEvent += fbevents_FBEvent; 
```

# orchardcms - Orchard CMS 向查询过滤器公开自定义零件数据

> ID：13181268
> 
> 赞同：0
> 
> 时间：2012-11-01T16:20:57.253
> 
> 标签：orchardcms

我有一个自定义部分“功能”这是模型

```
public class FeatureRecord : ContentPartRecord
{
    public virtual bool IsFeatured { get; set; }
    public virtual string Text { get; set; }

}

public class FeaturePart : ContentPart<FeatureRecord>
{
    [Display(Name = "Is featured")]
    public bool IsFeatured
    {
        get { return Record.IsFeatured;  }
        set { Record.IsFeatured = value; }
    }

    [StringLength(400)]
    [Display(Name = "Feature Text")]
    public string FeatureText
    {
        get { return Record.Text; }
        set { Record.Text = value;  }
    }

} 
```

我想为投影小部件设置查询，过滤器偏向于 IsFeatured 值为 true

但是，过滤器的选项列表中仅显示归档值。如何将自定义零件数据公开给过滤器选项值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T16:41:18.333

您可以通过投影下的绑定选项卡添加新属性以与投影一起使用。

# jpa-2.0 - 为什么 JPA/Hibernate 不执行批处理？

> ID：13181270
> 
> 赞同：0
> 
> 时间：2012-11-01T16:21:01.803
> 
> 标签：jpa-2.0

我的实体类如下所示：

```
@Entity
class Entity {

    private UUID id;
    private String name;

    // normal getters and setters

    @PrePersist
    public void init(){
        if(id == null){
            setId(UUID.randomUUID());
        }
    } 
```

在我的 persistence.xml 中，我有以下内容：-

```
 <property name="hibernate.jdbc.batch_size" value="30"/>
    <property name="hibernate.order_inserts" value="true"/>
    <property name="hibernate.order_updates" value="true"/> 
```

在单个事务中，我在 for 循环中调用“entityManager.persist(myEntity)”。确切的迭代次数可能因多次运行而异。

在我的日志记录配置中，我有以下内容，

```
<logger category="org.hibernate.jdbc.BatchingBatcher">
    <level name="DEBUG"/>
</logger>
<logger category="org.hibernate.jdbc.AbstractBatcher">
    <level name="DEBUG"/>
</logger>
<logger category="org.hibernate.persister.entity.AbstractEntityPersister">
    <level name="DEBUG"/>
</logger> 
```

但是，在服务器的日志中，我找不到任何证据表明在插入期间执行了任何类型的批处理。我使用 Hibernate 作为 JPA 提供程序。

知道我在这里做错了什么吗？

# java - Java RMI - 在服务器端注册客户端

> ID：13181272
> 
> 赞同：0
> 
> 时间：2012-11-01T16:21:01.933
> 
> 标签：java, client-server, rmi

我对 Java RMI 很陌生。我已经阅读了 Sun 教程以及一本关于分布式系统的书中的一些信息。然而，我对服务器的任务感到很困惑。虽然服务器应该很容易设计，但我并没有真正掌握。我的远程界面为我提供了以下功能：

```
public void login(String name, RemoteInterfaceClient client) throws RemoteException 
```

我应该如何在 Server 类中实现它？我显然不需要做任何检查，或者？谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:35:35.783

您需要编写一个实现您的接口和扩展的类`UnicastRemoteObject`。这样，当您远程调用登录方法时，它就会完成您的工作。

# jquery - 日期选择器加载触发器？

> ID：13181277
> 
> 赞同：3
> 
> 时间：2012-11-01T16:21:24.340
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

datepicker 是否具有等效于 onFirstLoad 的方式，它具有 onSelect 函数或类似的东西？如果没有，是否可以为 datepicker 模拟这样的触发器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T17:32:12.740

您可以检查 datepicker div 现在是否存在，如下所示：

```
$(function() {
   if ($('#ui-datepicker-div').length) {
      // Datepicker is present
      console.log("Now loaded");
   }
}); 
```

*注意：如果您想要做的是特定于日期选择器的操作，那么我建议您查看日期选择器选项以指定您想要的内容。*

此外，如果您正在等待加载 JQuery UI，请查看[$.getScript](https://api.jquery.com/jquery.getscript/)。

下面的片段

```
<link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
<script src="//code.jquery.com/jquery-1.10.2.js"></script>
<script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
<script>
  $(function() {
    $("#datepicker").datepicker();
  });
</script>

<body>

<p>Date: <input type="text" id="datepicker"></p>
<div id="dlog">Not loaded</div>

<script>
    $(function() {
      if ($('#ui-datepicker-div').length) {
           $('#dlog').text("Datepicker now loaded");
      }
    });
</script>

</body>
```

# php - IntelliJ IDEA 11 中 require_once() 中未定义的 PHP 常量

> ID：13181278
> 
> 赞同：0
> 
> 时间：2012-11-01T16:21:25.113
> 
> 标签：php, zend-framework, intellij-idea

我是 IntelliJ IDEA 11 的新手。我的 Zend 项目的大多数 PHP 文件都以以下内容开头：

```
require_once(APPLICATION_PATH . '/businessobjects/Car.php'); 
```

IDE 在这一行提到了两个警告：

*   未定义常量 APPLICATION_PATH
*   找不到路径“businessobjects”

结果，当我将鼠标悬停在“new Car()”上时，IDE 会告诉我“Undefined class Car”。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:36:28.293

## 解决方案

IntelliJ IDEA 的另一个问题已[在 StackOverflow 上](https://stackoverflow.com/questions/1147336/how-to-get-intellij-idea-to-display-directories)讨论过（IntelliJ 没有在项目树中显示任何文件夹）。在我将所有文件添加为一个“WebModule”并且 IntelliJ 完成对所有这些文件夹和文件的索引之后，它完美地找到了我的业务对象和类“汽车”的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T16:46:39.930

路径问题与未定义的 APPLICATION_PATH 常量有关，因为它预先将路径传递给 require_once。

可能，ZEND 期望您已经定义了 APPLICATION_PATH 常量，可能是这样的：

```
define('APPLICATION_PATH', __DIR__); 
```

（参见：[PHP 魔术常量](http://php.net/manual/en/language.constants.predefined.php)）

您还可以测试该常量是否已定义，如下所示：

```
if (!defined('APPLICATION_PATH')) {
    // it's not defined, so define it!
} else {
    // proceed as usual
} 
```

我对 IntelliJ IDEA / Zend 不太熟悉，但很可能缺少一个定义 APPLICATION_PATH 的配置文件。

另请参阅：[Google 搜索 zend 配置 APPLICATION_PATH](https://www.google.com/search?q=zend%20config%20APPLICATION_PATH&aq=f&oq=zend%20config%20APPLICATION_PATH&sugexp=chrome,mod=0&sourceid=chrome&ie=UTF-8)

# javascript - 用于移动设备的配置文件 javascript

> ID：13181279
> 
> 赞同：3
> 
> 时间：2012-11-01T16:21:31.500
> 
> 标签：javascript, jquery, jquery-animate, profiling

我有一个在移动设备上运行的密集 javascript 页面。有些动画有点拖沓。我想看看瓶颈在哪里。是否有工具可以让我分析 javascript 以查看可以优化的地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:45:13.273

这与您要问的有关：

[移动设备上的 Javascript 分析](https://stackoverflow.com/questions/9005346/javascript-profiling-on-mobile-devices)

这是一个很好的分析器列表，可用于测试 js 性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T16:52:40.720

如果您有 Android 设备，您可以使用 Chrome Android 应用程序以及桌面上的 Chrome 来通过 USB 进行调试/配置文件/检查：

[https://developers.google.com/chrome/mobile/docs/debugging](https://developers.google.com/chrome/mobile/docs/debugging)

设置起来有点烦人，因为你必须安装和使用 ADB 控制台命令，但是一旦它工作，你就不会回去了。

# string - mod_rewrite - 检查字符串

> ID：13181280
> 
> 赞同：0
> 
> 时间：2012-11-01T16:21:39.073
> 
> 标签：string, mod-rewrite, rule

我想检查一个 URL 是否包含刺痛“-EN.htm”，如果是，则应用重写。

这应该使用 ^-EN.htm 来完成，如下所示，但该规则不起作用：

```
 RewriteCond %{REQUEST_URI} ^/(.*?)/([-_0-9a-zA-Z./=]*)^-EN.htm
 RewriteRule ^(.*)$ /indexEN.php?folder=%1&follow=%2 [L] 
```

我究竟做错了什么？

谢谢你的每一个帮助，

斯科特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T10:53:58.340

您的正则表达式看起来不正确。您也可以丢失条件，而只是将模式移动到重写规则。类似的东西

```
RewriteRule ^/?(.*?)/([-_0-9a-zA-Z./=]*)^-EN.htm /indexEN.php?folder=$1&follow=$2 [L] 
```

您需要将前导斜杠设为可选（在 htaccess 中将其剥离），而不是使用**%**反向引用，而是使用**$**。

现在进入你的模式，它是无效的。匹配字符串的`^`开头（URI），所以如果你有两个并且你没有尝试从字面上匹配`^`字符（你需要转义），那么表达式将永远不会匹配任何东西。如果没有您必须处理的 URL 示例，我假设您可能只想放弃第二个`^`：

```
RewriteRule ^/?(.*?)/([-_0-9a-zA-Z./=]*)-EN.htm /indexEN.php?folder=$1&follow=$2 [L] 
```

# ios - 本地通知

> ID：13181281
> 
> 赞同：0
> 
> 时间：2012-11-01T16:21:42.280
> 
> 标签：ios, uilocalnotification, appdelegate

我在我的游戏应用程序中实现了一个本地通知，该通知每天启动一次以获得每日奖励。当我点击通知横幅时一切正常，但是，当我从应用程序图标进入应用程序时，本地通知无法正常工作。

这是我的代码：

```
-(BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary*)launchOptions{
.......
.......
application.applicationIconBadgeNumber = 0;
UILocalNotification *localNotif = [launchOptions objectForKey:UIApplicationLaunchOptionsLocalNotificationKey];
if (localNotif)
{
     NSLog(@"recieved notification %@",localNotif);
    UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Daily Bonus"
                                                   message:@"You recieved 100 free coins"
                                                  delegate:nil
                                         cancelButtonTitle:nil
                                         otherButtonTitles:@"ok", nil];
    [alert show];
    [alert release];
    NSUserDefaults *standardUserDefaults = [NSUserDefaults standardUserDefaults];
    float balance = [standardUserDefaults floatForKey:kCurrentScore];
    balance +=100.0f;
    NSLog(@"%g",balance);
    [standardUserDefaults setFloat:balance forKey:kCurrentScore];
    [standardUserDefaults synchronize];
} 
```

我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:25:29.390

这就是它的工作方式。
从应用程序的图标启动应用程序不会触发任何通知到您的应用程序，只会从横幅中触发。
如果您想奖励您的用户，即使他们没有点击横幅，您可能应该使用与触发通知的逻辑相同的逻辑 - 只需计算自应用程序上次运行以来的时间并在那里执行您的操作。

# php - HTML 中的 PHP 和 JS

> ID：13181282
> 
> 赞同：-4
> 
> 时间：2012-11-01T16:21:42.693
> 
> 标签：php, javascript

这就是我想要做的：

我有一个 data.php 页面。

在此页面中，我主要使用 HTML。在 HTML 中，我有一些 PHP 代码，由

```
<?php   

?> 
```

现在，我正在尝试在 PHP 中插入 JavaSript；如下所示：

```
<?php   
     <script type="text/javascript">

     </script>

?> 
```

但我从 Adob​​e Dreamweaver 收到“语法错误”通知。

我在这里做错了什么？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-01T16:24:16.397

您需要结束 PHP，然后启动 Javascript

```
<?php
...php here...
?>
     <script type="text/javascript">

     </script>

<?php
... more php ...
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T16:23:29.323

您不应该将 Javascript 包含在`<?php ... ?>`标签中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T16:25:23.060

PHP 在请求到达客户端之前在服务器上执行。Javascript 在客户端上执行。因此，您需要 PHP 来回显 javascript。

```
<?php

echo '<script type="text/javascript" src="xxx">';
echo 'SOME JAVASCRIPT FUNCTIONALITY';
echo '</script>';

?> 
```

不是我推荐它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T16:26:19.783

如果您必须将 JavaScript 包含在 PHP 标记中，那么您可以执行以下操作：

```
<?php   
     echo '<script type="text/javascript">';

     echo '</script>';

?> 
```

请记住，如果您需要在 echo 语句中使用相同的类型，您可能必须转义引号。这可以通过添加反斜杠 - 来完成`\"`。

我最近自己参与了一个项目，我们需要使用 PHP 进行一些加密并使用 JavaScript 中返回的值，但我们的代码采用以下形式：

```
<script type="text/javascript">
    // Do something in JavaScript
    var x = <?php echo $calculatedValue; ?>;
    // etc..
</script> 
```

维护它可能是一场噩梦，但它比这个答案中的第一个例子更好。

# java - Java：当从 JMenuItem 多次调用方法时，JTextField 创建无限循环

> ID：13181283
> 
> 赞同：0
> 
> 时间：2012-11-01T16:21:41.410
> 
> 标签：java, swing, jtextfield

我正在为大学编写一个文本分析程序，该程序需要您向字典中添加一个单词以及其他操作。我的这部分代码有问题，因为如果用户在 JTextField 为空时点击 ok，我需要出现错误消息。我可以让它继续运行，但以某种方式创建了一个无限循环，并带有错误消息。请帮忙，我在网上找遍了，但找不到这么简单的错误的答案。这是我的代码：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.io.*;
import java.util.*;
import java.lang.Character;

public class TAPtest implements ActionListener
{
 private JFrame tap = new JFrame("Text Analysis"); 
 private JMenuBar tapMenu = new JMenuBar();
 private JMenu dictionary = new JMenu("Dictionary");
 private JMenuItem addWord = new JMenuItem("Add Word");
 private JFrame frameAdd = new JFrame("Add Word");
 private JLabel add = new JLabel("Enter word to add:");
 private JButton okNewWord = new JButton("Ok");
 private JButton cancelNewWord = new JButton("Cancel");
 private JTextField inputNewWord = new JTextField(28);
 private JPanel westAdd = new JPanel();
 private JPanel eastAdd = new JPanel();
 private JPanel southAdd = new JPanel();
 private Vector <String> dictionaryVector = new Vector<String>();

 public TAPtest() //Constructor. Contains TAP GUI.
 {  
   tap.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
   tap.setSize(350, 100);
   tap.setLocation(700, 500);
   tap.setResizable(false); 
   tap.setJMenuBar(tapMenu);
   tapMenu.add(dictionary);
   dictionary.add(addWord);

   addWord.addActionListener(this);

   tap.setVisible(true);
 }

 public void actionPerformed(ActionEvent event) //All actions performed.
 {
   if (event.getActionCommand() == "Add Word") addNewDicWordGUI();

   if (event.getSource() == okNewWord) addNewDicWord();
   if (event.getSource() == cancelNewWord) frameAdd.dispose();
 }

 public void addNewDicWordGUI()
 {
   frameAdd.setSize(350, 150);
   frameAdd.setLocation(700, 500);
   frameAdd.setResizable(false); 

   okNewWord.setSize(5,20);
   cancelNewWord.setSize(5,20);

   westAdd.add(add);
   eastAdd.setLayout(new GridLayout(2,1));
   eastAdd.add(okNewWord);
   eastAdd.add(cancelNewWord);
   southAdd.add(inputNewWord);

   frameAdd.add(westAdd, BorderLayout.WEST);
   frameAdd.add(eastAdd, BorderLayout.EAST);
   frameAdd.add(southAdd, BorderLayout.SOUTH);

   okNewWord.addActionListener(this);
   cancelNewWord.addActionListener(this);
   inputNewWord.addActionListener(this);

   frameAdd.setVisible(true);
 }

 public void addNewDicWord() 
 {
   String inputNew = inputNewWord.getText(); //Get JTextField value.
   inputNew = inputNew.toLowerCase();
   frameAdd.dispose();
   if (inputNew.equals("")) 
    JOptionPane.showMessageDialog(null, "You must enter a word", "Notice", 1);
   else {
    boolean addItemFound = dictionaryVector.contains(inputNew); //True if contains.
   if(addItemFound) //If true.
JOptionPane.showMessageDialog(null, inputNew + " already exists in the dictionary.", "Word Already Exists", 1);
   else { //If not true.
    dictionaryVector.addElement(inputNew); //Add the word to the dictionary Vector.
Collections.sort(dictionaryVector); //Sort the vector in ascending order.
JOptionPane.showMessageDialog(null, inputNew + " was added to the dictionary.", "Word Added", 1);
   }
   inputNewWord.setText(null);
 }
}

public static void main(String [] args)
{
  TAPtest program = new TAPtest();
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:53:27.177

```
private Vector <String> dictionaryVector = new Vector<String>();
inputNewWord.setText(null);
JOptionPane.showMessageDialog(null, "You must enter a word", "Notice", 1);
public void actionPerformed(ActionEvent event) //All actions performed.
{
    ...
} 
```

应该更好

```
private SortedSet<String> dictionaryVector = new TreeSet<String>();
inputNewWord.setText("");
JOptionPane.showMessageDialog(null, "You must enter a word", "Notice",
         JOptionPane.ERROR_MESSAGE);
public void actionPerformed(ActionEvent event) //All actions performed.
{
    SwingUtilities.invokeLater(new Runnable() {
        @Override public void run() {
            ...
        }
    }
} 
```

最后一个`invokeLater`可能造成了麻烦。事件处理`actionPerformed`是在事件线程上完成的，并且应该在事件处理之后显示一条消息*（* 作为 GUI 保持响应的任何更长的任务）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T17:04:13.950

像这样声明 frameAdd -

```
private JFrame frameAdd = null; 
```

addNewDicWordGUI() 方法应该是这样的 -

```
public void addNewDicWordGUI()
{

           if(frameAdd==null)
               {

//Initialized only for the first time

            frameAdd = new JFrame("Add Word");

       frameAdd.setSize(350, 150);
       frameAdd.setLocation(100, 200);
       frameAdd.setResizable(false); 

       okNewWord.setSize(5,20);
       cancelNewWord.setSize(5,20);

       westAdd.add(add);
       eastAdd.setLayout(new GridLayout(2,1));
       eastAdd.add(okNewWord);
       eastAdd.add(cancelNewWord);
       southAdd.add(inputNewWord);

       frameAdd.add(westAdd, BorderLayout.WEST);
       frameAdd.add(eastAdd, BorderLayout.EAST);
       frameAdd.add(southAdd, BorderLayout.SOUTH);

       okNewWord.addActionListener(this);
       cancelNewWord.addActionListener(this);
       inputNewWord.addActionListener(this);
     }
      frameAdd.setVisible(true);
 } 
```

进行上述更改，它将正常工作。

# java - Java 使用两个循环

> ID：13181286
> 
> 赞同：2
> 
> 时间：2012-11-01T16:21:53.207
> 
> 标签：java, loops

我的教授要求我们生成这个输出：

> A1 B2 C3 D4 E5
> 
> F6 G7 H8 I9 J10
> 
> K11 L12 M13 N14 O15
> 
> P16 Q17 R18 S19 T20
> 
> U21 V22 W23 X24 Y25
> 
> Z26

我得到了正确的输出，但他不接受我的代码；他说我必须在不使用数组且仅使用 2 个循环的情况下做到这一点。我想不出任何可以产生相同输出的解决方案。我想知道是否可以只用 2 个循环产生相同的输出？我这样写了我的代码，但我的教授说我必须修改它。

```
public class lettersAndNumbers {

    public static void main(String[] args) {
        // TODO Auto-generated method stub

        String[] abc = {"A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R",
                "S", "T", "U", "V", "W", "X", "Y", "Z", };

        int i = 0;
        while ( i < abc.length ) {

            int j = 1;
            while ( j <= 26 ) {

                int k = 1;
                while ( k <= 5 ) {

                    System.out.print(abc[i] + j + "\t");
                    j++;
                    i++;
                        k++;

                    if ( k == 6 ) {
                        System.out.println();
                    }

                }
                k = 1;
            }
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T16:32:49.433

您实际上可以在字符上循环，这将使您的代码更具可读性并避免为您的字母使用数组：

```
int count = 1;
for (char letter = 'A'; letter <= 'Z';) {
    for (int i = 1; i <= 5; ++i, ++letter, ++count) {
        System.out.print(letter);
        System.out.print(count + "\t");
        if (letter == 'Z')
            return;
    }
    System.out.println();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T16:37:03.723

我的 Java 真的很生锈，但我认为这就是你要找的：

```
for(int i = 0; i < 26; i++) {
  System.out.printf("%c%d ", 'A' + i, i + 1);

  if (i % 5 == 0) {
    System.out.println();
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T16:30:02.333

这是一种在一个 for 循环中执行此操作的方法：

```
// 'A' starts at 65
int ascii_offset = 65;

// Loop 26 times and print the alphabet
for (int index = 1; index <= 26; index++) {

    // Convert an ascii number to a char
    char c = (char) (ascii_offset + index - 1);

    // Print the char, the index, then a space
    System.out.print("" + c + (index) + " ");

    // After 5 sets of these, print a newline
    if (index % 5 == 0) {
        System.out.println("\n");
    }
} 
```

有关 ascii 和 int 到 char 转换的进一步阅读，这里有一个相关的讨论：[Converting stream of int's to char's in java](https://stackoverflow.com/questions/833709/converting-int-to-char-in-java)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T16:29:58.420

嗯，别难过。我会做你一开始做的同样的事情。但是，您可以只使用两个循环而不使用数组来执行此操作。

让一个循环简单地从 1 迭代到 26。然后让另一个循环从大写字母 A 的 ASCII 值 (65) 到大写字母 Z 的 ASCII 值 (90) 进行迭代。您现在需要做的就是将 ASCII 值转换为字符串，然后进行连接。

[http://www.asciitable.com/](http://www.asciitable.com/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T16:30:09.993

在一个循环中这样做有什么问题吗？

```
public class AlphaOneLoop {
public static void main(String[] args) {
    for (int i = 65; i <= 90; i++) {
        System.out.print(new String(Character.toChars(i)) + (i - 65 + 1) + " ");

    }
} 
```

}

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-11-01T16:25:31.663

这应该这样做：

```
String[] abc = {"A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R",
            "S", "T", "U", "V", "W", "X", "Y", "Z", };

for(int i=0; i<abc.length; i++){
 System.out.println(abc[i] + (i+1) + "\t");
 if( i % 5 == 0 ){
  System.out.println();
 }
} 
```

# actionscript-3 - 将对象的单个实例添加到舞台

> ID：13181288
> 
> 赞同：0
> 
> 时间：2012-11-01T16:22:00.227
> 
> 标签：actionscript-3, flash, instance

晚上好，

我似乎无法让我的代码只向舞台添加一个对象实例。它似乎在舞台上添加了至少 3 个对象实例。添加的对象是 r2、r3 和 r4。

```
stop();

import flash.events.Event;
stage.focus=stage;
var upKeyDown5:Boolean = false;
var rightKeyDown5:Boolean = false;
var downKeyDown5:Boolean = false;
var leftKeyDown5:Boolean = false;
var enterkey:Boolean = false;
var interaction:Boolean = false;
p5.addEventListener(Event.ENTER_FRAME, moveChar5);
stage.addEventListener(KeyboardEvent.KEY_DOWN, checkKeysDown5);
stage.addEventListener(KeyboardEvent.KEY_UP, checkKeysUp5);
Mouse.hide();
function moveChar5(e:Event):void{
if(downKeyDown5 && !upKeyDown5 && !rightKeyDown5 && !leftKeyDown5)
{
    p5.gotoAndStop("walk_down");
    if(p5.y < 492.75)
        p5.y += 6;
}
if(upKeyDown5 && !downKeyDown5 && !rightKeyDown5 && !leftKeyDown5)
{
    p5.gotoAndStop("walk_up");
    if(p5.y > 202.85)
        p5.y -= 6;
}
if(rightKeyDown5 && !upKeyDown5 && !downKeyDown5 && !leftKeyDown5)
{
    p5.gotoAndStop("walk_right");
    if(p5.x < 871.5)
        p5.x += 6;
}
if(leftKeyDown5 && !upKeyDown5 && !rightKeyDown5 && !downKeyDown5)
{
    p5.gotoAndStop("walk_left");
    if(p5.x > 203.65)
        p5.x -= 6;
}
if(enterkey && interaction && p5.hitTestObject(c1)){
    if (!(Boolean(stage.getChildByName('r2')))) {
        var rat2:r2;
        rat2 = new r2();
        addChild(rat2);
        rat2.y=38;
        rat2.x=32;
    }
}
if(enterkey && interaction && p5.hitTestObject(c2)){
    if (!(Boolean(stage.getChildByName('r3')))) {
        var rat3:r3;
        rat3 = new r3();
        addChild(rat3);
        rat3.y=38;
        rat3.x=32;
    }
}
if(enterkey && interaction && p5.hitTestObject(c3)){
    if (!(Boolean(stage.getChildByName('r4')))) {
        var rat4:r4;
        rat4 = new r4();
        addChild(rat4);
        rat4.y=38;
        rat4.x=32;
    }
}
 }

 function checkKeysDown5(event:KeyboardEvent):void{
if(event.keyCode == 87){
    upKeyDown5 = true;
}
if(event.keyCode == 68){
    rightKeyDown5 = true;
}
if(event.keyCode == 83){
    downKeyDown5 = true;
}
if(event.keyCode == 65){
    leftKeyDown5 = true;
}
if (event.keyCode == 13){
    enterkey = true;
}
 }

 function checkKeysUp5(event:KeyboardEvent):void{
if(event.keyCode == 87){
    upKeyDown5 = false;
    p5.gotoAndStop("still_up");
}

if(event.keyCode == 68){
    rightKeyDown5 = false;
    p5.gotoAndStop("still_right");
}

if(event.keyCode == 65){
    leftKeyDown5 = false;
    p5.gotoAndStop("still_left");
}

if(event.keyCode == 83){
    downKeyDown5 = false;
    p5.gotoAndStop("still_down");
}

if (event.keyCode == 13){
    enterkey = false;
}

if(p5.hitTestObject(c1) || p5.hitTestObject(c2) || p5.hitTestObject(c3)){
    p5.gotoAndStop("interaction");
    interaction = true;
}
else
    interaction = false;
 } 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T16:42:39.307

使用语句而不是所有那些 if 语句会更有效和更`switch`简洁（如果您只希望满足其中一个且仅满足其中一个条件）

我认为您的问题与您跟踪老鼠的方式有关-例如。使用`stage.getChildByName`.
下面是一个示例，以及一些关于您的其他一些潜在问题的注释。

```
switch(true){
    case (enterkey && interaction && p5.hitTestObject(c1)):
        if (!(Boolean(stage.getChildByName('r2')))) {  //your not giving your rat a name so this will always return false, plus you're not adding the rat to the stage but to this class
            var rat2:r2;
            rat2 = new r2();
            addChild(rat2); //use stage.addChild if you want the above check (stage.getChildByName) to work
            rat2.y=38;
            rat2.x=32;
            rat2.name = "r2"; //if you want the above check to work

            break;  //break out of the switch if you don't want any of the others evaluate since this rat got added
        }

    //do a case for your other blocks
} 
```

最好不要使用 stage.getChidByName ，而是创建一个这样的方法：

```
function checkRatExists(ratClass:Class):Boolean {
    var tmp:DisplayObject;
    var i:int = numChildren;
    while(i--){
        tmp = getChildAt(i);
        if(tmp is ratClass){
            return true;
        }
    }
    return false;
} 
```

然后使用该新函数而不是 stage.getChildByName：

```
if (!checkRatExists(r2)) //r2 is the class of rat you want to check 
```

* * *

除了你的问题之外，创建一个方法/函数来做你的老鼠定位和添加而不是一遍又一遍地重复代码会更干净......

```
function addRat(rat:RatCommonBaseClass, ratName:String):void {
        addChild(rat);
        rat.y=38;
        rat.x=32;
        rat.name = ratName;
}

//now you can just do this for all your rats:
addRat(new r2(),"r2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T16:43:27.403

对于添加对象的语句，您没有 else 条件，因此很可能发生的情况是所有语句都同时满足条件。添加 else 语句应该可以防止这种情况发生：

```
if(enterkey && interaction && p5.hitTestObject(c1)){
    if (!(Boolean(stage.getChildByName('r2')))) {
        var rat2:r2;
        rat2 = new r2();
        addChild(rat2);
        rat2.y=38;
        rat2.x=32;
    }
}
else if(enterkey && interaction && p5.hitTestObject(c2)){
    if (!(Boolean(stage.getChildByName('r3')))) {
        var rat3:r3;
        rat3 = new r3();
        addChild(rat3);
        rat3.y=38;
        rat3.x=32;
    }
}
else if(enterkey && interaction && p5.hitTestObject(c3)){
    if (!(Boolean(stage.getChildByName('r4')))) {
        var rat4:r4;
        rat4 = new r4();
        addChild(rat4);
        rat4.y=38;
        rat4.x=32;
    }
} 
```

这样，它将首先检查 p5 是否已击中 c1，只有在没有击中时才会检查是否已击中 c2，然后对 c3 进行相同的操作。

# jquery - 如何使用 JQuery 和 AJAX 设置元素的属性？

> ID：13181294
> 
> 赞同：2
> 
> 时间：2012-11-01T16:22:13.653
> 
> 标签：jquery, ajax

我正在制作字典。一页包含字母表中的每个字母：

```
<div class="letter" id="letter-a">
<h3><a href="#">A</a></h3>
</div>
<div class="letter" id="letter-b">
<h3><a href="#">B</a></h3>
</div> 
```

*等等*

将鼠标悬停在一个字母上时，我希望弹出一个工具提示，其中包含一些以该字母开头的单词示例。

这些示例存储在一个单独的 HTML 文件中，如下所示：

```
<div class="letter" id="letter-a">
Abdication, Absolute, Acknowledge...
</div>
<div class="letter" id="letter-b">
Bacchus, Backbite, Beard...
</div> 
```

*等等*

我能想到的最快解决方案是对链接的标题属性使用 $.get 调用，如下所示：

```
$('.letter a').hover(function(){
  var $this=$(this);
  var letter='letter-'+$this.text();
  letter=letter.toLowerCase();
  var url='tooltip-content.html #'+letter;
  $this.attr('title', $.get($(url).text()));
}, function(){
      //etc
  });
}); 
```

但是此代码仅在工具提示中显示“[object Object]”，而不是示例单词。

有谁知道如何解决它或可以提出更优雅的解决方案？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T16:26:05.097

`$.get`返回一个`jqXHR`对象，而不是文本。

尝试这个：

```
$.get($url).done(function(txt) {
    $this.attr('title', txt);
}); 
```

ps 对每个单独的字母使用 AJAX 会很慢 - 最好一次性将示例词直接填充到`title`属性中：

```
var letters = $.get('tooltip-content.html').done(function(html) {
     var $html = $(html);     // convert to object - don't put in the DOM
     $html.each(function() {  // iterate over each div
         var id = this.id;    // extract its ID
         $(id).attr('title', $(this).contents());
     });
}); 
```

（或类似的东西...）

# visual-studio-2010 - 无论我尝试什么，代码都会不断出错

> ID：13181295
> 
> 赞同：0
> 
> 时间：2012-11-01T16:22:21.290
> 
> 标签：visual-studio-2010, opencv, codeblocks, sift, feature-detection

我一直在尝试获取我在此处发布的非常简单的代码：[SiftFeatureDetector .detect 功能损坏？](https://stackoverflow.com/questions/13162074/siftfeaturedetector-detect-function-broken)去工作。

但它一直在中断，它编译得很好但拒绝运行。

我有 OpenCV 2.4.2，Windows XP。

这是我所做的：

我首先在带有 OpenCV 2.4.2 的 Visual C++ 2010 上尝试了它，我添加了 F:\opencv\build\include 中包含的所有库以及非免费库我还在链接器中链接了 bin 文件夹：F:\ opencv\build\x86\vc10\lib

但它继续在同一条线上突破。Aurelius 提到我的代码在他的机器上运行，这非常令人沮丧。

然后我拿出我的第二台笔记本电脑并在上面安装了代码块，我链接了所有正确的库和 dll 文件，但它给出了一个不同的错误：

> 无法在动态链接库 libstdc++-6.dll 中找到过程入口点 __gxx_personality_v0

任何人都可以帮我解决这个问题，现在已经 3 天了，我觉得我没有接近解决方案。当我的代码正常但应用程序拒绝工作时，它非常令人沮丧。它显然是一些错误的设置。请帮我解决这个问题。

谢谢

我想提一下，像显示图像、迭代像素、改变颜色和检测颜色这样的简单程序工作正常，它的这种筛选导致了问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T18:49:28.167

stackoverflow 上有很多类似的主题，例如[libstdc++-6.dll not found](https://stackoverflow.com/questions/6404636/libstdc-6-dll-not-found) Google：[https ://www.google.pl/search?q=libstdc%2B%2B-6+opencv&sugexp=chrome,mod=9&sourceid=chrome&ie=UTF -8](https://www.google.pl/search?q=libstdc%2B%2B-6+opencv&sugexp=chrome,mod=9&sourceid=chrome&ie=UTF-8)

总结一下，正如它所说的不同的问题。首先，您正在使用下载的构建。可以使用与您的编译器版本不同的编译器版本来完成此构建，这可能是问题所在。

解决方案：**在您的计算机上编译 OpenCV，链接这些库并使用 dll，然后一切正常**

# php - login.php sql数据库

> ID：13181296
> 
> 赞同：0
> 
> 时间：2012-11-01T16:22:24.683
> 
> 标签：php, sql, login, cpanel

当我的 login.php 文件加载时出现此错误。'警告：mysql_num_rows()：提供的参数不是有效的 MySQL 结果资源'这是我所拥有的..

```
$query = mysql_query("SELECT * FROM users WHERE username='$username'");
$numrows = mysql_num_rows($query);
if($numrows!=0)
{
while ($row = mysql_fetch_assoc($query))
{
    $dbusername = $row['username'];
    $dbpassword = $row['password'];
}
if ($username==$dbusername&&$password==$dbpassword)
{
    echo "Youre in!";
}
else
    echo "Incorrect Password!";
}
else
    die("That user doesnt exist!");
}
else
die("Please enter a username and a password!");
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:24:43.167

将此添加到文件的顶部

```
ini_set('display_errors', 'on');
error_reporting(E_ALL | E_STRICT); 
```

这个“应该”显示您的语法错误，无论如何，您的问题是语法错误

下面的代码应该让您更接近最终目的地

```
<?
ini_set('display_errors', 'on');
error_reporting(E_ALL | E_STRICT);

if($username) {
    $query = mysql_query("SELECT * FROM users WHERE username='$username'");
    $numrows = mysql_num_rows($query);
    if($numrows!=0) {
        while ($row = mysql_fetch_assoc($query)) {
            $dbusername = $row['username'];
            $dbpassword = $row['password'];
        }

        if ($username==$dbusername&&$password==$dbpassword) {
            echo "Youre in!";
        } else {
            echo "Incorrect Password!";
        }
    } else {
        die("That user doesnt exist!");
    }
} else {
    die("Please enter a username and a password!");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T16:31:43.740

你错过了一些大括号：

```
$query = mysql_query("SELECT * FROM users WHERE username='$username'");
$numrows = mysql_num_rows($query);
if($numrows!=0)
{
    while ($row = mysql_fetch_assoc($query))
    {
        $dbusername = $row['username'];
        $dbpassword = $row['password'];
    }
    if ($username==$dbusername&&$password==$dbpassword)
    {
        echo "Youre in!";
    }
    else
        echo "Incorrect Password!";
    }
} else // <- THIS ONE
    die("That user doesnt exist!");
}
// And here another, in a if condition that isn't started in the code you give.
else
die("Please enter a username and a password!");
?> 
```

服务器可以配置为如果出现错误，则页面留空。

mySQL 登录的其他一些技巧：**永远不要将用户输入直接放在 MySQL 查询语句中！**然后很容易通过 SQL 注入来入侵您的网站。

更多详情： http: [//www.derby-web-design-agency.co.uk/blog-post/how-to-create-a-secure-login-system-in-php-part-1/12/](http://www.derby-web-design-agency.co.uk/blog-post/how-to-create-a-secure-login-system-in-php-part-1/12/)

# java - 如何订购 Vaadin 表格行？

> ID：13181300
> 
> 赞同：5
> 
> 时间：2012-11-01T16:22:32.000
> 
> 标签：java, sql, vaadin

我有一个表**阶段**，其中包含引用**存储库**表的值。在存储库中，每个值都有一个订单号。

通常在 SQL 中，我会加入它们，然后按 order 列排序。但是，如果我想在 Vaadin 中执行此操作，我必须使用`FreeFormQuery`来进行此连接。

问题是我希望允许用户更改表**阶段**中的值。所以我需要实施`FreeFormQueryDelegate`. 有没有办法通过使用标准`TableQuery`而不是标准来完成这项工作`FreeFormQuery`？

也许手动移动表中的行？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-02T20:49:15.163

Vaadin 为表格提供了一些排序选项。

您可以对一个特定的 propertyId 进行排序，也可以对一组属性进行排序。

```
// sort one container property Id
table.setSortContainerPropertyId(propertyId);
table.setSortAscending(ascending);
table.sort();

// sort several property Ids
table.sort(propertyId[], ascending[]); 
```

注意：上面的代码不是正确的代码，而是显示方法体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-03T04:48:22.650

我使用以下代码重新排列 vaadin 表格行，当单击“上移”按钮时，同时选择表格行。

```
Object selectedItemId = fieldTable.getValue();
        if(selectedItemId != null){
            List<Object> items = new ArrayList<>(fieldTable.getItemIds());
            int index = items.indexOf(selectedItemId);

            if(index < 1){
                LOGGER.info("Selected Filed is at the top, cannot move up further");
                return;
            }

            //Rearrange itemids for new order
            Object upperRow= items.set(index - 1, selectedItemId);
            items.set(index, upperRow);

            items.forEach(itemId -> {
                //Gets the properties of old table item
                Item item = fieldTable.getItem(itemId);
                String name = (String) item.getItemProperty(Constants.PROPERTYID_FIELD_NAME).getValue();
                Button toggleBtn = (Button) item.getItemProperty(Constants.PROPERTYID_SORT_BUTTON).getValue();

                //Remove the old table item
                fieldTable.removeItem(itemId);

                //Insert old table item into the new position index
                Item newItem = fieldTable.addItem(itemId);
                newItem.getItemProperty(Constants.PROPERTYID_FIELD_NAME).setValue(name);
                newItem.getItemProperty(Constants.PROPERTYID_SORT_BUTTON).setValue(toggleBtn);

                int position = items.indexOf(itemId);
                if(position == index - 1) {
                    fieldTable.select(itemId);
                }
            });
        } 
```

# vb.net - VB.NET -> C++ -> Java:- 从 C++ 调用 Java 函数 - 请求的代码示例

> ID：13181302
> 
> 赞同：1
> 
> 时间：2012-11-01T16:22:36.903
> 
> 标签：vb.net

在这里，我正在寻找一个概念性的解决方案，以及一些指导。这不是一个指定“代码/编译/执行中的错误......”等的查询。请忍受冗长的帖子。

我的产品是用 VB.NET 编写的桌面产品。

办公室的另一个中心团队维护了一个 java 代码，该代码执行一些计算，并发布 jar 以供任何需要它的人使用。该团队发布了 jar 公开的 API。

这个java jar的用户到目前为止都是java开发人员，所以到目前为止一切都很顺利。

现在，我需要使用同一个 jar 并因此调用那些暴露的 java API，以便“代码是一个，并且由任意多的人使用”。

请传递任何有用的链接/代码示例，以帮助我实现这一目标。

PS 1\. 我没有机会使用任何第三方工具来搭建 Java 和 .net 之间的桥梁。

1.  为此目的，我对 JNI 有了一点了解，但没有得到一个可靠的代码示例来解释我应该在 C++ 端做什么来调用 java 函数。

2.  我的团队可以努力从 VB.NET 调用 C++ wappers

提前致谢，

# mysql - 根据总数限制sql查询和排名

> ID：13181306
> 
> 赞同：0
> 
> 时间：2012-11-01T16:22:43.570
> 
> 标签：mysql

我对我的 MYSQL 数据库有一个 sql 查询，并且希望将结果限制为只有 10 个销售人员而不是 20 个。我尝试在查询中插入他们的姓名，但不断出错。也可以根据总数进行排名。我正在使用的 sql 查询是：

```
select sales_id, totalbuy, totalsell, totalbuy + totalsell as total from
(select sales_id, SUM(CASE WHEN side= 'buy' THEN 1 ELSE 0 END) AS totalbuy, 
SUM(CASE WHEN side= 'sell' THEN 1 ELSE 0 END) AS totalsell
from sales_id where sales_id='sales1', GROUP BY sales_id)q 
```

上面写着 sales1 我尝试使用逗号和单引号添加剩余的 9 个 sales_ids，但无法正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:23:43.317

如果您只需要特定的 sales_id，请使用“IN”子句。

如果您只想要前 10 名，请删除该行并使用 LIMIT

```
select sales_id, totalbuy, totalsell, totalbuy + totalsell as total from
(select owner_id, SUM(CASE WHEN side= 'buy' THEN 1 ELSE 0 END) AS totalbuy, 
SUM(CASE WHEN side= 'sell' THEN 1 ELSE 0 END) AS totalsell
from sales_id  
where sales_id in ('sales1', 'sales2', 'sales3', 'sales4')-- if you wanna certain sales_id only
GROUP BY sales_id)q
order by total desc
limit 0, 10;--top 10 by total (bigger first) 
```

# encryption - 压缩和加密...首先应用哪个？

> ID：13181309
> 
> 赞同：1
> 
> 时间：2012-11-01T16:22:59.997
> 
> 标签：encryption, compression, libgcrypt

我正在使用 C 语言进行远程备份项目...我想发送数据并压缩和加密数据。

但是我很困惑是先压缩还是先加密！

什么会更好？：

1.  压缩数据然后加密
2.  加密数据然后压缩

另外我将使用 zlib 进行压缩。而且我想知道要使用哪个加密库...有人说 libgcrypt 很好。好的加密库（非常易于使用）的建议将不胜感激...... :)

或者有什么可以同时完成这两项工作的吗？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-01T16:25:08.583

您应该在加密之前进行压缩。

任何好的加密算法都会产生无法很好压缩的类随机数据。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-11-01T20:50:26.763

我最喜欢的易于编写、理解和使用的算法是[河豚](http://www.schneier.com/blowfish.html)。在一些代码留置权中，该链接有一些实现。

它与 AES/DES 之类的安全级别大致相同，即几乎牢不可破。与所有加密货币一样，真正的漏洞将是您和您的用户！

# ios - 如何拦截 imageview 的放大事件？

> ID：13181315
> 
> 赞同：0
> 
> 时间：2012-11-01T16:23:17.873
> 
> 标签：ios, imageview

我正在图像视图中显示图像，并且正在尝试覆盖标签/文本。我想在放大图像视图时更改叠加层 - 我检测放大事件的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T17:05:44.300

You should use the `UIScrollViewDelegate` methods to detect zoom events. If you are not using `UIScrollView` already, you should really use it!

# javascript - prettyPhoto：Twitter 的 URL 生成损坏？

> ID：13181316
> 
> 赞同：0
> 
> 时间：2012-11-01T16:23:20.267
> 
> 标签：javascript, jquery, prettyphoto

我正在为画廊使用 prettyPhoto 插件。它带有 FB 和 Twitter 分享按钮。但是，在打开新图片时更新 Twitter 的分享 URL 会出现问题。URL 始终指向打开的第一张图片。

似乎这是一个[已知的错误](http://forums.no-margin-for-errors.com/discussion/12349/twitter-fb-like-button-generated-url-bug)，有人设法绕过它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T21:29:32.200

好的，我设法通过为`changepicturecallback`选项提供回调来解决这个错误。然后在回调中删除由 prettyPhoto 注入的 Twitter 按钮，并使用正确的 URL 初始化一个新按钮。

```
jQuery(document).ready(function() {      
  jQuery("a[rel^='prettyPhoto']").prettyPhoto({
    theme: 'dark_rounded',
    changepicturecallback: onPictureChanged
  });

  function onPictureChanged() {
    var twitterDiv = jQuery('.twitter');
    twitterDiv.empty();

    jQuery('<a>', {
      'class': 'twitter-share-button',
      'text': 'Tweet',
      'data-url': location.href,
      'data-count': 'none',
      'href': 'http://twitter.com/share'      
    }).appendTo(twitterDiv);    

    twttr.widgets.load();    
  }     
}); 
```

# mysql - 找出每天有多少人注册

> ID：13181317
> 
> 赞同：0
> 
> 时间：2012-11-01T16:23:24.320
> 
> 标签：mysql

在 mySQL 中，我想做的是查询我的表并找出每天有多少人注册。换句话说，我希望能够在一个月内产生以下输出：

```
1 January: 10 registrations
2 January: 150 registrations
3 January: 50  registrations

select created, regID
from registrations 
```

数据库中的日期格式如下：2012-11-01 00:00:00

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T16:27:58.077

要获取 1 月每一天的注册计数，请使用以下命令`select`：

```
select daymonth(registration_date), count(*)
from registrations
where registration_date >= '01/01/2012' and registration_date <= '01/31/2012'
group by daymonth(registration_date) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T16:27:27.553

您通常使用分组运算符：

```
SELECT COUNT(*) AS registrations, DATE(created) AS created_date GROUP BY created_date 
```

如果`created`已经是一`DATE`列，则不需要转换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T16:27:28.247

试试这个：

```
SELECT created, count(regID) FROM registrations GROUP BY created ORDER BY created ASC 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T16:28:24.907

```
SELECT   DATE(DATE_REGISTERED) DATE, COUNT(*) totalRegistered
FROM     tableName
GROUP BY DATE 
```

# maven - Wro4j Maven 插件 - 缺少必需的类

> ID：13181322
> 
> 赞同：2
> 
> 时间：2012-11-01T16:23:41.363
> 
> 标签：maven, plexus, wro4j

我正在尝试根据[文档运行 wro4j maven 插件](http://code.google.com/p/wro4j/wiki/MavenPlugin)

我将插件添加到我的 pom.xml：

```
<plugin>
    <groupId>ro.isdc.wro4j</groupId>
    <artifactId>wro4j-maven-plugin</artifactId>
    <version>1.5.0</version>
</plugin> 
```

并运行目标：

```
mvn wro4j:run -Dminimize=true -DtargetGroups=all 
```

但是构建失败并出现错误：

```
org.apache.maven.lifecycle.LifecycleExecutionException: Internal error in the pl
ugin manager executing goal 'ro.isdc.wro4j:wro4j-maven-plugin:1.5.0:run': Unable
to load the mojo 'ro.isdc.wro4j:wro4j-maven-plugin:1.5.0:run' in the plugin 'ro
.isdc.wro4j:wro4j-maven-plugin'. A required class is missing: org/codehaus/plexu
s/util/Scanner 
```

你知道如何避免这个错误吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T03:31:42.397

从 wro4j-1.5.0 开始，运行插件需要 maven 3.0。原因是一个称为增量构建支持的功能，它依赖于一个默认情况下在旧版本的 maven 上不可用的库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-19T17:15:33.930

问题在于您的本地环境。

转到我的 windows 机器上的这个文件夹：`${user.home}/.m2/repository`，然后删除这个文件夹中的所有内容。（好吧，您可以保留一份副本。）

删除后，运行 Maven 命令：`mvn clean install -U`.

请参阅：[https ://groups.google.com/forum/#!topic/wro4j/ZPSFBQ_5lI8](https://groups.google.com/forum/#!topic/wro4j/ZPSFBQ_5lI8)

# objective-c - UITableView contetOffset 和滑动起点不能一起工作

> ID：13181323
> 
> 赞同：0
> 
> 时间：2012-11-01T16:23:42.300
> 
> 标签：objective-c, ios

我在按钮点击中使用以下代码将我的表格视图向上移动，但是当用户向下滑动表格视图时，它会到达原始位置。我该如何解决？

```
 [UIView animateWithDuration:0.3 delay:0 options: UIViewAnimationCurveEaseOut
                     animations:^{
                         self.tableView.contentOffset = CGPointMake(0, 59);
                     }
                     completion:^(BOOL finished) {
                         if (finished) {
                             self.tableView.contentOffset = CGPointMake(0, 59);
                         }
                     }
     ]; 
```

有小费吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:34:26.777

他们可能在较新的 iOS 版本中更改了这一点，但我记得 UITableViewController 不能很好地与自定义定义的 tableView 框架配合使用。

如果您使用常规的 UIViewController，我很确定它会正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T16:35:39.000

我不确定语法；但是您应该能够定义自己的自定义手势。它将处理特定功能。它应该允许您实际创建自己的事件处理程序和视图。

这应该允许您控制它如何滚动到该位置。

文章在这里：http: [//developer.apple.com/library/ios/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/GestureRecognizers/GestureRecognizers.html](http://developer.apple.com/library/ios/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/GestureRecognizers/GestureRecognizers.html)

如果我误解了您要完成的工作，我深表歉意，但希望这会有所帮助。如果没有，我相信更有经验的开发人员将能够为您提供帮助。

# jquery - 无法运行多个回弹实例

> ID：13181326
> 
> 赞同：1
> 
> 时间：2012-11-01T16:23:45.833
> 
> 标签：jquery, css

当我尝试将两个不同的背景添加到两个不同的 div 或 body 和一个 div 时，仅显示两者中的一个。

喜欢这个页面： http: [//geek1983.no-ip.org/caro_new/](http://geek1983.no-ip.org/caro_new/)

显示背景，但不显示#sliders div。

Ps 你可以看到代码底部的javascript。

有人能帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:28:48.143

您需要按照 Backstretch 网站上的设置说明进行操作。我什至没有看到任何调用 Backstretch 脚本的调用。

[http://srobbin.com/jquery-plugins/backstretch/](http://srobbin.com/jquery-plugins/backstretch/)

您需要将其添加到您的头部标签中。

```
<head>
<script type="text/javascript">

jQuery.backstretch([
      "link-to-image.jpg"
    , "link-to-second-image.jpg"
    , "link-to-third-image.jpg"
  ], {duration: 3000, fade: 750});

</script>
</head> 
```

# c# - RabbitMQ：注入连接工厂

> ID：13181328
> 
> 赞同：6
> 
> 时间：2012-11-01T16:23:50.897
> 
> 标签：c#, .net, dependency-injection, rabbitmq

我正在尝试为我正在编写的一对 Windows 服务设置 RabbitMQ，以便以快速可靠的方式促进它们之间的通信。但是，我在尝试设置主要的 Windows 服务引擎时遇到了问题，这些引擎需要建立与 RabbitMQ 服务器的连接才能完成它们的工作。

基本上，`ConnectionFactory`RabbitMQ 的 .NET 客户端中的对象不是抽象的，也没有实现任何接口。我看不到使用像 StructureMap 这样的 IoC 容器来注入此类的明显方法。甚至文档中的代码示例也只是明目张胆地展示了`new`它，如下所示：

```
 ConnectionFactory factory = new ConnectionFactory();
 factory.Uri = "amqp://user:pass@hostName:port/vhost";
 IConnection conn = factory.CreateConnection(); 
```

呈现给我的解决方案是将整个工厂推到服务的主要`OnStart`和`OnStop`功能中，这真的很难测试，而且无论如何也没有太大的兴趣。然而，这给我留下了一个单一`IConnection`的服务，所以如果该连接以任何方式中断，服务将无法恢复，必须简单地退出。如果主引擎对工厂有可见性，它可以简单地产生一个新的连接并继续。但是除非我注入它，否则没有连接到现有服务器就无法测试主引擎！

我在这里有什么遗漏吗？我不考虑的任何其他选择？我怎样才能注入这个工厂，如果我不能，我怎样才能限制损害？

编辑：另外，作为事后的想法，如果有人很好地了解主要开发团队对这样的更改的接受程度，我很高兴对 RabbitMQ 的 .NET 客户端进行更改以在此实现一个接口。我很乐意做出贡献，但我最不想做的就是让我的程序在一些自定义版本的 RabbitMQ 上运行，从而首先消除使用第三方库的主要好处。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T11:45:32.770

RabbitMQ C# 客户端是一个低级纯 AMQP 实现，您可能希望将其包装在更高级别的抽象中，然后将其注册到您的 IoC 容器中。

[EasyNetQ](http://easynetq.com)是对基本客户端的更高层次的抽象，实现了一个持久的 AMQP 连接，在连接丢失（通过网络问题或服务器反弹）后重新连接，并重建所有当前订阅。欢迎您使用任何您认为有用的代码。

简而言之，这是一个将连接管理包装在某种[PersistentConnection](https://github.com/mikehadlow/EasyNetQ/blob/master/Source/EasyNetQ/PersistentConnection.cs)类中的问题，然后[使用一些代码注册每个订阅，以便在成功重新连接后重建它们](https://github.com/mikehadlow/EasyNetQ/blob/master/Source/EasyNetQ/RabbitAdvancedBus.cs)。

我写[了一篇](http://mikehadlow.blogspot.co.uk/2012/09/wiring-up-topshelf-windsor-and-easynetq.html)关于连接 EasyNetQ、Windsor IoC 容器和 TopShelf 的博客文章。我已经成功地使用这种技术来构建基于 RabbitMQ 的 Windows 服务。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-01T16:35:27.670

[棘手的部分是根据文档](http://www.rabbitmq.com/releases/rabbitmq-dotnet-client/v2.8.7/rabbitmq-dotnet-client-2.8.7-client-htmldoc/html/index.html) 看起来`ConnectionFactory`它没有实现任何接口。

所以你真的只剩下实现自己的东西了，比如，

```
public interface IConnectionFactory
{
    ConnectionFactory Get();
    ConnectionFactory Get(string uri);
}

public class ConnectionFactoryCreator : IConnectionFactory
{
    public ConnectionFactory Get(
        string uri = "amqp://user:pass@hostName:port/vhost")
    {
        return new ConnectionFactory
        {
            Uri = uri
        };
    }
} 
```

对于您最终使用它的课程，

```
public class RabbitMQUserClass
{
    public ConnectionFactory ConnectionFactory {get; private set;}
    public RabbitMQUserClass(IConnectionFactory connectionFactory)
    {
        ConnectionFactory = connectionFactory.Get();
    }
} 
```

# ios - 图片加载进度条

> ID：13181330
> 
> 赞同：0
> 
> 时间：2012-11-01T16:23:51.287
> 
> 标签：ios, uiimageview, progress-bar

我试图找到一种在加载 UIImage 期间显示带有百分比标签的进度条的方法。标签和进度条应该显示加载的进度。

我的图像的加载是这样实现的：

```
NSData* receivedData =  [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:urlImage]];
UIImage* tmp = [UIImage imageWithData:receivedData]; 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T17:04:26.890

您无法使用您发布的代码显示任何进度。相反，使用 NSURLConnection 并异步下载数据。您需要查看初始响应并获取文件大小，然后当您收到有关数据的通知时，您可以根据文件大小和目前收到的数据总量更新进度条。

# c++ - RCpp/RInside C++ 主要方法查询和限制？

> ID：13181331
> 
> 赞同：1
> 
> 时间：2012-11-01T16:23:53.630
> 
> 标签：c++, r, rcpp, rinside

我在 RCpp 邮件列表中找不到关于 RInside 的几个问题。您可以在 C++ main() 方法之外定义 RInside() 吗？有没有这样的例子？或者我可以在每个 C++ 应用程序中只有一个 R 嵌入式会话吗？有没有办法我可以使用我的 C++ papp 通过 OpenMP 之类的东西同时调用多个 R 脚本？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T16:30:18.097

您可以在任何地方定义您的`RInside()`实例。

但是因为 R 是单线程的，所以每个进程只能有*一个实例。*所以我发现实例化`main()`最简单，因为我可以传递一个引用。请参阅包中的各种示例脚本。

*是的，如果您想要“许多”实例，那么通过 MPI 生成不同进程*的技巧是一个很好的技巧。

至于 OpenMP，我发现你必须*非常*小心，因为 R 是单线程的。

但是，如果失败，您为什么不尝试想要尝试并报告 rcpp-devel 列表呢？

# java - Java 中的 ObjectOutputStream

> ID：13181333
> 
> 赞同：0
> 
> 时间：2012-11-01T16:23:58.233
> 
> 标签：java, objectinputstream

我有一个功能

```
public void loadUserOnline() {
        try {
            oos.writeObject(req); //Send request to Server to get online users
            oos.flush();
            LinkedList<UserOnlineInfo> userOnlineInfoList = (LinkedList<UserOnlineInfo>)ois.readObject(); // read object from Server contains online users
            Vector<String> listData = new Vector<>(); // a Vector for JList
            for (int i = 0; i < userOnlineInfoList.size(); i++) {
                listData.add(userOnlineInfoList.get(i).getUser() + " --- " + userOnlineInfoList.get(i).getStatus()); // add elements to Vector
            }
            theList.setListData(listData); // set data source for JList
        }
        catch (Exception e){
            e.printStackTrace();
        }
    } 
```

我第一次调用这个函数时，它从服务器获取数据。然后来自服务器的数据发生变化。我第二次调用这个函数，数据和第一次一样。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T16:25:06.127

您正在使用相同的 ObjectOutputStream 实例，`oos`该实例已因第一次调用此方法而耗尽。如果您再次初始化您的 ObjectOutputStream，那么您将获得一个新流：

```
public void loadUserOnline() {
   // initialise oos here or before the call to this method
   ObjectOutputStream oos = new ObjectOutputStream(...... 
   try {
      oos.writeObject(req);
.... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T20:34:21.120

`ObjectOutputStream.reset()`每次要重新发送具有新值的相同对象时都需要调用，否则使用`writeUnshared()`. 请参阅 Javadoc。

# jsf - 如何在 h:column 中加粗特定字符串

> ID：13181336
> 
> 赞同：0
> 
> 时间：2012-11-01T16:24:14.440
> 
> 标签：jsf

我有一个 JSF 数据表，它成功地根据搜索显示数据。但是，我不确定如何在特定列中选择性地加粗某些文本数据。

所以，例如，我想要这个文本......

> 这是 h:column 中的一些文本

在页面上显示这样...

> 这是h:column中的一些**文本**

这是我的数据表的样子

结果：

```
<h:dataTable var="results"
             value="#{logSearcherBean.results}"
             border="1">
    <h:column>#{results.logName}</h:column>
    <h:column>#{results.matchLine}</h:column>
</h:dataTable> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:35:26.640

您可以*自制*一个[EL 函数](https://stackoverflow.com/questions/7079978/how-to-create-a-custom-el-function/7080174#7080174)来操作列值并返回所需的 HTML，

```
<h:outputText value="#{my:highlight(results.logName, logSearcherBean.query)}" escape="false" /> 
```

*（请注意，这是由于，这是字面显示 HTML 所必需的，如果是一个完全由最终用户控制的值，则`escape="false"`对 XSS 攻击也很敏感）`logName`*

*或者*抓取操纵返回的 HTML 的 JavaScript/jQuery，另请参阅这个相关问题：[Highlight a word with jQuery](https://stackoverflow.com/questions/119441/highlight-a-word-with-jquery)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-12T13:57:59.437

大家好，

```
 <p:column id="lastName"
                              headerText="Last Name">
                        <h:outputText value="#{person.lastName}" style="#{myBean.getStyle(person.lastName)}"/>
                    </p:column> 
```

在 bean 中：

```
public String getStyle(String str) {
    return str.equals(keyword) ? "background-color: yellow" : "";
} 
```

所有最好的和快乐的编码！

# oracle10g - 如何从 SQLPLus 将错误记录到表中

> ID：13181341
> 
> 赞同：2
> 
> 时间：2012-11-01T16:24:19.883
> 
> 标签：oracle10g, sqlplus

我对 Oracle 很陌生，所以如果这在其他地方有所涉及，请与我联系。

我有一个运行作业的 MS SQL 框，调用批处理文件在 SQLPLUS 中运行脚本到 ETL 到 Oracle 10G 数据库。

我的脚本出现间歇性问题，导致 ETL 失败，在没有错误日志记录的情况下，这是一个未知数。当前的解决方案根据脚本完成前后的行数突出显示加载失败。

我希望能够将运行有问题的脚本时遇到的任何错误插入到接收数据负载的同一数据库上的错误日志表中。

脚本没有什么太技术性的东西，在高层次上是通过 SQL 代码执行以下步骤，没有过程调用。

1.  使用日期和当前行数更新表
2.  将数据从远程源提取到临时表中
3.  将暂存表合并到中间暂存表中
4.  执行一些转型行动
5.  将中间临时表合并到最终的 Fact 表中
6.  使用新的行数更新表

请告知是否可以通过 SQLPLUS 将错误消息、代码、行号等传递到数据库表中？如果是这样，实现这一目标的最简单方法。

下面显示了脚本的前几行以提供风味

```
/*set echo off*/
set heading off
set feedback off
set sqlblanklines on

/* ID 1 BATCH START TIME */
INSERT INTO CITSDMI.CITSD_TIMETABLE_ORDERLINE TGT
(TGT.BATCH_START_TIME)
(SELECT SYSDATE FROM DUAL);
COMMIT;

insert into CITSDMI.CITSD_TIMETABLE_ALL_LOADS
(LOAD_NAME, LOAD_CRITICALITY,LOAD_TYPE,BATCH_START_TIME)
values
('ORDERLINE','HIGH','SMART',(SELECT SYSDATE FROM DUAL));
commit;

/* Clear the Staging Tables */

TRUNCATE TABLE STAGE_SMART_ORDERLINE;
Commit;

TRUNCATE TABLE TRANSF_FACT_ORDERLINE;
Commit; 
```

所以它继续其余的步骤。

任何助手将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-23T15:02:57.637

虽然不完全了解您的要求，但有几点建议。

1.  WHENEVER 命令将帮助您控制 sqlplus 在发生错误时应该执行的操作，例如

当 SQLERROR 退出失败回滚 当 OSERROR 退出失败回滚

插入 ...

插入 ...

如果以下任何语句失败，这将导致 sqlplus 以错误状态 1 退出。

您还可以让 WHENEVER SQLERROR CONTINUE ...

由于 WHENEVER ... EXIT FAILURE/SUCCESS 控制退出状态，调用脚本/程序将知道它是否工作失败。

1.  日志记录

使用 SPOOL 将输出假脱机到文件。

1.  记录到表。

最好的方法是将您的语句包装到 PLSQL 匿名块中并使用异常处理程序来记录错误。

因此，将上述内容放在一起，使用 UNIX shell 作为调用程序：

```
sqlplus -S /nolog <<EOF
WHENEVER SQLERROR EXIT FAILURE ROLLBACK
CONNECT ${USRPWD}
SPOOL ${SPLFILE}

BEGIN
   INSERT INTO the_table ( c1, c1 ) VALUES ( '${V1}', '${V2}' );
EXCEPTION
   WHEN OTHERS THEN
      INSERT INTO the_error_tab ( name, errno, errm ) VALUES ( 'the_script', SQLCODE, SQLERRM );
      COMMIT;
END;
/

SPOOL OFF 
QUIT
EOF

   if [ ${?} -eq 0 ]
   then
      echo "Success!"
   else
      echo "Oh dear!! See ${SPLFILE}"
   fi 
```

# c++ - 将进程的输出写入缓冲区

> ID：13181342
> 
> 赞同：0
> 
> 时间：2012-11-01T16:24:25.063
> 
> 标签：c++, linux

> **可能重复：**
> [如何在 C++ 中执行命令并获取命令输出？](https://stackoverflow.com/questions/478898/how-to-execute-a-command-and-get-output-of-command-within-c)

在我的 c++ 程序中，我正在使用 execv/system 运行一个外部程序。

我想将程序的输出重定向到我程序中的缓冲区，即：

```
char* buff[some size large enough for any possible output];
system(some program);
//THE PROGRAM I JUST RAN IS A SPECIAL BLACK BOX PROGRAM THAT RUNS
//AND PARSE AN HTTP DUMP FILE AND PRINTS IT TO THE SCREEN WHEN RUNNING
//I WANT THE OUTPUT TO GO A BUFFER IN MY PROGRAM.
//THE IDEA IS TO HAVE THE DATA OF THE OUTPUT ON THE BUFFER RATHER THAN ON A FILE

//have the buffer filled with the output of the program 
```

谢谢 ：-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:45:40.790

如果您想读取子进程的输出，那么（至少在 POSIX/UNIX/Linux 世界中）您应该真正考虑使用管道进行进程间通信。一个关于 Stackoverflow 的有用问题/答案以及指向一些好的资源的链接在这里：[fork()、pipe() 和 exec() 进程创建和通信](https://stackoverflow.com/questions/5094063/fork-pipe-and-exec-process-creation-and-communication)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T16:30:40.227

我不确定是否有其他方法可以做到这一点，但这就是我想到的

```
char* buff[some size large enough for any possible output];
system(some program >somefile.txt);  

//have the buffer filled with the output of the program
// And redirect it into a file

//Do initial validity checks and open the file

read(somefile.txt,buff,bufflen);
//Read the file

unlink somefile.txt 
//Unlink if the file is not needed 
```

将 bufflen 替换为要从文件中读取的字节数。

# oauth - 在 wifi 热点使用 Facebook 登录

> ID：13181343
> 
> 赞同：1
> 
> 时间：2012-11-01T16:24:29.773
> 
> 标签：oauth, wifi, facebook-oauth

我们正在开发一个 wifi 热点强制门户，用户可以在其中使用他们首选的社交网络凭据进行身份验证。

当然，在用户登录强制门户之前，他/她无法访问互联网，因此必须打开一些 url 才能访问外部身份验证页面。

对我们来说不幸的是，facebook 的 oauth 对话框是“ [https://www.facebook.com/dialog/oauth](https://www.facebook.com/dialog/oauth) ”。作为 https 我们只能打开 IP 或主机名，但我们无法控制请求的“路径”，所以我们应该打开所有 www.facebook.com 站点。不幸的是，对于法律问题，这是不可能的。

最简单的解决方案是在不同的 url 上有 oauth 对话框页面（例如： http: [//oauth.facebook.com/dialog/oauth ..](http://oauth.facebook.com/dialog/oauth..)），这可能吗？

还有什么建议吗？

我在这个论坛中发现了一些类似的问题（请原谅我重复的问题），但没有一个答案。

# android - 运行 ProgressDialog MonoAndroid

> ID：13181344
> 
> 赞同：2
> 
> 时间：2012-11-01T16:24:34.037
> 
> 标签：android, xamarin.android, threadpool, progressdialog

我正在尝试运行一个 progressDialog，它将在我的应用程序的第一次加载时将项目加载到 Sqlite 数据库中。我收到一条错误消息，因为应用程序在将其余数据加载到数据库之前运行应用程序中的其余代码。

如何确保代码在程序其余部分的代码之前在 progressDialog 中完成？

```
LocalDatabase DB = new LocalDatabase();
var dbpd = ProgressDialog.Show(this, "Loading Database", "Please wait Loading Data",true);
ThreadPool.QueueUserWorkItem((s) =>{
DB.createDB();
RunOnUiThread(() => databaseLoaded());
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:50:27.947

为此使用 ayncTask

```
class loadDatabase extends AsyncTask<Void, Void, Void>{

        @Override
        protected void onPreExecute(Void result) {
            //Start the dialog
            super.onPostExecute(result);
        }

        @Override
        protected Void doInBackground(Void... params) {
            //Do the database loading part..
            return null;
        }
        @Override
        protected void onPostExecute(Void result) {
            //Dismiss the dialog and proceed furture.
            super.onPostExecute(result);
        }

    } 
```

要执行此操作，请在其新对象上调用 execute。

# javascript - 如何增加 OpenERP 日期和日期时间字段的年限？

> ID：13181347
> 
> 赞同：1
> 
> 时间：2012-11-01T16:24:48.870
> 
> 标签：javascript, openerp

我想知道为什么 OpenERP 的日期和日期时间字段有年份限制？

如果我单击年份选项卡选择一年，它一次只显示 21 年。如果我想选择一个更老的年份，我必须从列表中选择一个更老的年份，然后它将为我打开下一个 21 年的列表。这让我很烦。

有没有办法增加年份的限制，以便至少可以一次滚动到像 1950,2020 这样的良好年份范围？

我想我将不得不玩javascript，但不知道怎么玩。有人可以帮我吗 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T05:13:30.367

是的，我在这里理解你的观点，但这是 jquery lib dattime picker yearrange 默认为 -10 abd +10 的形式，但是是的，你可以增加限制你想要的我在下面为树干微笑者提供了补丁，也可以做到 6.1开放式ERP

```
=== modified file 'addons/web/static/src/js/view_form.js'
--- addons/web/static/src/js/view_form.js   2012-10-31 15:03:24 +0000
+++ addons/web/static/src/js/view_form.js   2012-11-02 05:08:29 +0000
@@ -2328,7 +2328,8 @@
             changeYear: true,
             showWeek: true,
             showButtonPanel: true,
-            firstDay: Date.CultureInfo.firstDayOfWeek
+            firstDay: Date.CultureInfo.firstDayOfWeek,
+            yearRange:"c-30:c+30"
         });
         this.$el.find('img.oe_datepicker_trigger').click(function() {
             if (self.get("effective_readonly") || self.picker('widget').is(':visible')) { 
```

在这里您可以看到增加年份范围 -30 将允许您增加上一年范围，+30 将增加来年范围。这是 lib 配置可以随时覆盖。

谢谢你。

# titanium - 如何使用钛创建客户风格的进度条？

> ID：13181348
> 
> 赞同：0
> 
> 时间：2012-11-01T16:25:01.757
> 
> 标签：titanium, titanium-mobile

我想使用钛创建自己的进度条，而不是使用 createProgressBar 函数......或者我希望能够设置使用 createProgressBar 函数创建的进度条的样式（更改外观、背景等）。我怎样才能做到这一点？

```
var ind2 = Titanium.UI.createProgressBar({
    width : 200,
    min : 0,
    max : 90,
    value : 0,
    height : 150,
    color : '#000000',
    font : {
        fontSize : 14,
    },
    top : 60
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T20:43:39.560

Use views. Spruce it up with graphics.

```
var win = Ti.UI.createWindow({
    backgroundColor: 'white'
});
var track = Ti.UI.createView({
    width: 100, height: 30,
    backgroundColor: 'red'
});
var progress = Ti.UI.createView({
    left: 0,
    width: 1, height: 30,
    backgroundColor: 'green'
});
track.add(progress);
win.add(track);
win.addEventListener('open', function () {
    progress.animate({
        width: 100,
        duration: 5000
    });
    // or: progress.width = 100;
});
win.open(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-08T09:47:59.077

如果它只是 iOS，你可以使用[NappAppearance 模块](https://github.com/viezel/NappAppearance)并像这样自定义你的进度条：

```
var NappAppearance = require('dk.napp.appearance');
NappAppearance.setGlobalStyling({
    progressBar:{
        progressTintColor:"#CD1625",
        trackTintColor:"#ececec",
        progressImage:"/images/components/progressBarBG.png",
        trackImage:"/images/components/progressBarTrack.png"

    },
}); 
```

# c# - .NET 等效于 Android SDK 的 AsyncTask（我需要在后台线程上执行操作时显示进度条）

> ID：13181350
> 
> 赞同：2
> 
> 时间：2012-11-01T16:25:05.160
> 
> 标签：c#, multithreading, progress-bar

我在一个基本的 C# .NET 4.0 WinForms 应用程序中。我想要做的是编写一些逻辑来在后台线程上执行后台操作时在 GUI 线程上显示进度条。

Android 已经实现了[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)类，它有一些需要重写的方法：onPreExecute、doInBackground、onProgressUpdate 和 onPostExecute。OnPreExecute 你可以显示进度条，在 PostExecute （当 doInBackground 方法返回时）你可以隐藏它。

[我在这里](http://msdn.microsoft.com/en-us/library/vstudio/hh191443.aspx)读到 .NET 4.5 内置了类似的东西。.NET 4.0 中有类似的东西吗？如果没有，实现类似 android 的 AsyncTask 是一个好主意，还是在 C# 中有更传统的方法来做到这一点？

问候，

担

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T16:26:48.590

.NET 中最接近的就是[`BackgroundWorker`](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)类，使用这些事件：

*   `DoWork`- 在`RunWorkerAsync`被调用时发生。
*   `ProgressChanged`- 在`ReportProgress`被调用时发生。
*   `RunWorkerCompleted`- 在后台操作完成、取消或引发异常时发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T16:27:16.453

看看[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)类。它提供了您描述的所有功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-29T10:16:58.703

您可以使用 BackgroundWorker 创建自己的抽象类，如此处所述[AsyncTask using BackgroundWorker](https://stackoverflow.com/a/59964818/6165407)

# google-app-engine - 简单 AppEngine + Google Cloud Storage 应用程序中的“ExistenceError”

> ID：13181356
> 
> 赞同：0
> 
> 时间：2012-11-01T16:25:25.540
> 
> 标签：google-app-engine, google-cloud-storage

我有一个简单的 AppEngine 处理程序，如下所示：

```
class TestGS(webapp2.RequestHandler):
    def get(self):

        file_name = '/gs/ds_stats/testfile'
        files.gs.create(file_name, mime_type='text/html')        

        with files.open(file_name, 'a') as file_handle:

            file_handle.write("foo")

        files.finalize(file_name) 
```

但是，当我调用此处理程序时，我会`ExistenceError: ApplicationError: 105`排队`with files.open(...`。

这似乎是一个超级简单的场景，根本没有任何迹象表明为什么会失败（特别是因为`files.gs.create`上面的右边似乎已经成功，但是有没有办法验证这一点？）。

查看[源代码](http://code.google.com/p/googleappengine/source/browse/trunk/python/google/appengine/api/files/file.py#177)，我看到以下问题可能导致此错误：

```
 if (e.application_error in
      [file_service_pb.FileServiceErrors.EXISTENCE_ERROR,
       file_service_pb.FileServiceErrors.EXISTENCE_ERROR_METADATA_NOT_FOUND,
       file_service_pb.FileServiceErrors.EXISTENCE_ERROR_METADATA_FOUND,
       file_service_pb.FileServiceErrors.EXISTENCE_ERROR_SHARDING_MISMATCH,
       file_service_pb.FileServiceErrors.EXISTENCE_ERROR_OBJECT_NOT_FOUND,
       file_service_pb.FileServiceErrors.EXISTENCE_ERROR_BUCKET_NOT_FOUND,
       ]):
    raise ExistenceError() 
```

这是一个相当大范围的问题......当然它不会告诉我是哪一个！再一次，奇怪的是“创造”似乎奏效了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T23:30:59.393

问题是文档中缺乏明确性。`files.gs.create`返回一个特殊的“可写文件路径”，您需要将其输入`open`和`finalize`. 一个正确的示例如下所示：

```
class TestGS(webapp2.RequestHandler):
    def get(self):

        file_name = '/gs/ds_stats/testfile'
        writable_file_name = files.gs.create(file_name, mime_type='text/html')        

        with files.open(writable_file_name, 'a') as file_handle:

            file_handle.write("foo")

        files.finalize(writable_file_name) 
```

# php - 在 PHP 复选框中为样式类型使用变量

> ID：13181362
> 
> 赞同：-1
> 
> 时间：2012-11-01T16:25:37.683
> 
> 标签：php, forms, checkbox

我想根据名为`$show`.

我想设置`$show`为`"checkbox"`或`"hidden"`

并将其用于

```
<input type="checkbox" name="PosMon" id="PosMon" tabindex=" 9" /> 
```

代替`"checkbox"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:28:44.447

假设`$show`包含一个布尔值，然后使用：

```
<input type="<?php if($show){echo "checkbox";}else{echo "hidden";}?>" name="PosMon" id="PosMon" tabindex=" 9" /> 
```

或者

```
<input type="<?php echo $show ? 'checkbox' : 'hidden'; ?>" name="PosMon" id="PosMon" tabindex=" 9" /> 
```

如果它包含字符串值，请使用：

```
<input type="<?php echo $show; ?>" name="PosMon" id="PosMon" tabindex=" 9" /> 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T16:29:42.217

```
<input type="<?php echo $show == true ? 'checkbox' : 'hidden' ?>" name="PosMon" id="PosMon" tabindex=" 9" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T16:41:27.657

由于复选框的默认值在选中时**打开**，如果您没有设置值，您将不得不将 on 的值添加到隐藏字段并且您不需要`tabindex=" 9"`。

*复选框*

```
<?php 
$show = 'checkbox';

echo '<input',
     ' type="'.$show.'"',
     ' name="PosMon" '.(($show=='hidden')?'value="on"':null),
     (($show != 'hidden')?'id="PosMon"':null).
     (($show != 'hidden')?' tabindex=" 9"':null).' />';
?> 
```

**结果：** `<input type="checkbox" name="PosMon" id="PosMon" tabindex=" 9" />`

*隐*

```
<?php 
$show = 'hidden';

echo '<input',
     ' type="'.$show.'"',
     ' name="PosMon" '.(($show=='hidden')?'value="on"':null),
     (($show != 'hidden')?'id="PosMon"':null).
     (($show != 'hidden')?' tabindex=" 9"':null).' />';
?> 
```

**结果：** `<input type="hidden" name="PosMon" value="on" />`

# java - Java中的哈希表内存使用

> ID：13181366
> 
> 赞同：2
> 
> 时间：2012-11-01T16:25:53.100
> 
> 标签：java, memory-leaks, hashtable

我正在使用 java 从文件中读取数据，将数据复制到较小的数组并将这些数组放入哈希表中。我注意到 Hashmap 比原始文件消耗更多的内存（大约两倍）！知道为什么吗？

这是我的代码：

```
public static void main(final String[] args) throws IOException {
    final PrintWriter writer = new PrintWriter(new FileWriter("test.txt",
            true));
    for(int i = 0; i < 1000000; i++)
        writer.println("This is just a dummy text!");
    writer.close();

    final BufferedReader reader = new BufferedReader(new FileReader(
            "test.txt"));
    final HashMap<Integer, String> testMap = new HashMap<Integer, String>();
    String line = reader.readLine();
    int k = 0;
    while(line != null) {
        testMap.put(k, line);
        k++;
        line = reader.readLine();
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T16:30:23.957

这不是问题`HashMap`，它通常是 Java 对象的问题。每个对象都有一定的内存开销，包括数组和`HashMap`.

但更重要的是：**字符数据占用**内存空间的两倍。原因是[Java 对每个字符使用 16 位](https://stackoverflow.com/q/3956734/1374678)，而文件可能以 ASCII 或 UTF-8 编码，每个字符仅使用 7 或 8 位。

**更新：**对此您无能为力。您发布的代码原则上很好。它只是不适用于大文件。如果您`HashMap`仔细调整，您可能会做得更好，或者您可以使用字节数组而不是字符串来存储您的字符（假设所有内容都是 ASCII 或单字节 UTF-8）。

但最终，要解决内存不足的问题，正确的方法是重新考虑程序，这样您就不必一次将整个文件读入内存。

无论您对该文件的内容做什么，请考虑是否可以*在从磁盘读取文件时*执行此操作（这称为**流式传输**），或者提取相关部分并仅存储它们。您也可以尝试**随机访问**该文件。

我建议你稍微阅读一下这些东西，尝试一些东西，然后回来问一个新的问题，具体到你的应用程序。因为这条线太长了。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-01T16:31:16.253

地图是一种“可扩展”结构——当它达到其容量时，它会调整大小。因此，您的地图使用的 40% 的空间可能实际上是空的。如果您知道地图中有多少条目，则可以使用临时构造函数以最佳方式调整地图大小：

```
Map<xx,yy> map = new HashMap<> (length, 1); 
```

即使您这样做，地图仍将使用比所包含项目的实际大小更多的空间。

更详细地说：HashMap 的大小在达到（容量 * loadFactor）时翻倍。HashMap 的默认加载因子是 0.75。

例子：

*   想象一下您的地图的容量（大小）为 10,000 个条目
*   然后，您在地图中放置了 7,501 个条目。容量 * loadFactor = 10,000 * 0.75 = 7,500
*   因此，您的 hashmap 已达到其调整大小阈值并调整为 (容量 * 2) = 20,000，尽管您只持有 7,501 个条目。这会浪费很多空间。

**编辑**

这个简单的代码让您了解实际发生的情况 - 输出是：

```
threshold of empty map = 8192
size of empty map = 35792
threshold of filled map = 8192
size of filled map = 1181712
threshold with one more entry = 16384
size with one more entry = 66640 
```

这表明如果您添加的最后一项恰好强制地图调整大小，它可以人为地增加地图的大小。诚然，这并不能说明您观察到的整体效果。

```
public static void main(String[] args) throws java.lang.Exception {
    Field f = HashMap.class.getDeclaredField("threshold");
    f.setAccessible(true);

    long mem = Runtime.getRuntime().freeMemory();
    Map<String, String> map = new HashMap<>(2 << 12, 1); // 8,192
    System.out.println("threshold of empty map = " + f.get(map));
    System.out.println("size of empty map = " + (mem - Runtime.getRuntime().freeMemory()));

    mem = Runtime.getRuntime().freeMemory();
    for (int i = 0; i < 8192; i++) {
        map.put(String.valueOf(i), String.valueOf(i));
    }
    System.out.println("threshold of filled map = " + f.get(map));
    System.out.println("size of filled map = " + (mem - Runtime.getRuntime().freeMemory()));

    mem = Runtime.getRuntime().freeMemory();
    map.put("a", "a");
    System.out.println("threshold with one more entry = " + f.get(map));
    System.out.println("size with one more entry = " + (mem - Runtime.getRuntime().freeMemory()));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T16:28:37.670

HashMap（和数组）的实现内部有很多东西需要存储。数组长度就是这样一个例子。不确定这是否会导致*double*，但它肯定会占一些。

# nhibernate - 将 FK 列映射（通过代码 - 不流畅）作为父实体中的枚举列表

> ID：13181370
> 
> 赞同：2
> 
> 时间：2012-11-01T16:26:04.993
> 
> 标签：nhibernate, asp.net-mvc-4, nhibernate-mapping, nhibernate-3

我有一个代表一个人的实体类和一个代表一个人拥有的权限的枚举。我试图通过代码使用 nhibernate 映射将此关系映射到数据库，但没有成功。

代码如下所示：

```
public enum Permissions
{
  None = 1,
  CanUpdate = 2,
  CanInsert = 3,
  CanDelete = 4
}

public class Person
{
   private ICollection<Permissions> permissions;

   public Person()
   {
      this.permissions = new Collection<Permissions>();
   }

   public virtual ICollection<Permissions> Permissions
   {
      get
      {
         return this.permissions;
      }
   }
}

public class PersonMap : ClassMapping<Person>
{
   public PersonMap()
   {
      this.Set(
        x => x.Permissions,
        m =>
          {
             m.Access(Accessor.Field);
             m.Key(k => k.Column("PersonId"));
             m.Table("PersonHasPermission");
          },
        map => map.Element(
        p =>
          {
             p.Column("PermissionId");
             p.Type<NHibernate.Type.EnumType<Permissions>>();
          }));
    }
} 
```

数据库表如下所示：

```
Person
-----------------------
PersonId (PK, uniqueidentifier, not null)
Name (nvarchar(max), not null)

PersonHasPermission
-----------------------
PersonId (PK, FK, uniqueidentifier, not null)
PermissionId (PK, FK, int, not null) 
```

因此，使用此配置，我没有遇到任何异常，但每当我尝试获取某人的权限时，即使数据库中有数据，集合也始终为空。

我希望上面的代码解释了我想要实现的目标，但如果需要进一步说明，请告知。

对此的任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T17:46:52.777

我正在使用 XML 配置，甚至可以在其中映射受保护或私有成员。因此，令我惊讶的是您没有收到任何异常。因为您的 Collection 没有**任何**设置器（公共或受保护）。我希望是这样的： *NHibernate.PropertyNotFoundException: {"Could not find a setter for property 'Permissions' in class 'Person'"}* 但也许 fluent 能够将您的映射从属性转换为字段。

我尝试使用公共设置器或字段（均如下所示）测试您的代码并且它有效。有我的 xml 映射片段：

```
<!-- public or protected setter -->
<bag name="Permissions" inverse="false" lazy="true" table="PresonHasPermission" cascade="all">
   <key column="PersonId" />          
   <element type="Permissions" column="PermissionId" />
</bag>

<!-- accessing the field -->
<bag name="permissions" inverse="false" lazy="true" table="PresonHasPermission" cascade="all"
   access="field" >
   <key column="PersonId" />          
   <element type="Permissions" column="PermissionId" />
</bag> 
```

（映射到字段时保持*类*定义不变）

# data-binding - 了解 AngularJS 中的双向数据绑定

> ID：13181378
> 
> 赞同：4
> 
> 时间：2012-11-01T16:26:22.857
> 
> 标签：data-binding, angularjs, two-way

我是 AngularJS 的新手。很长一段时间以来，我一直试图以我一直使用 Javascript 框架（如 JQuery 或 Mootools）的方式滥用它。现在我明白它不会再那样工作了......但是我遇到了一些大问题，因为我总是使用 CMS 生成我的 HTML 输出。

所以它非常静态，当它第一次出现时......小例子：

```
<ul>
 <li>foo <span>delete</span></li>
 <li>bar <span>delete</span></li>
 <li>blub <span>delete</span></li>
</ul> 
```

现在我想，双向数据绑定意味着我可以在 Angular Scope 和 Controller 的帮助下生成视图，也可以通过视图生成模型。

我可能会在那里感到困惑......所以这是我的问题。有没有办法从 CMS 的静态 HTML 输出启动模型？

我尝试过这样的事情......

```
<ul ng-controller="Ctrl">
 <li ng-init="item[0].name=foo">{{item[0].name}} <span ng-click="remove(0)">delete</span></li>
 <li ng-init="item[1].name=bar">{{item[1].name}} <span ng-click="remove(1)">delete</span></li>
 <li ng-init="item[2].name=blub">{{item[2].name}} <span ng-click="remove(2)">delete</span></li>
</ul> 
```

在我的控制器中，我写了一个删除函数。但是当它删除时，它只删除了名称......跨度按钮仍然存在

当我将我的数据定义为 javascript-array 并通过 Angular 使用 ng-repeat 完成整个输出时，它确实有效......就像这样：

```
<ul ng-repeat="it in item">
 <li>{{it.name}} <span ng-click="remove($index)">delete</span></li>
</ul> 
```

我希望我在这里提出了一个观点，每个人都得到我的困难和问题？谁能告诉我我在那里尝试的东西是否可行？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-01T17:16:52.637

这是人们适应 Angular 和其他类似框架的常见问题。

您不再需要服务器为您呈现 HTML。您需要做的就是设置模板，并将适当的数据加载到示波器中。

```
<ul ng-controller="Ctrl" ng-init="getMyItems()">
 <li ng-repeat="item in items">{{item.name}} <a ng-click="remove($index)">delete</a></li>
</ul> 
```

在你的控制器中你会做这样的事情

```
app.controller('Ctrl', function($scope, $http) {
   $scope.items = [];
   $scope.getMyItems = function(){
       $http.get('/my/json/stuff/url').success(function(data) {
           $scope.items = data;
           $scope.$apply();
       });
   };
}); 
```

现在我知道你可能在想“但我不想单独请求获取我的 JSON。这很好（可能不相关，但很好）......你需要做的就是将它粘贴到一个全局变量中并改为使用 $window 检索它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-30T06:51:48.093

让我们谈谈代码。这是一个实时应用程序，它显示绑定到 MySQL 数据的个人资料图片。当 MySQL ( 模型 ) 视图 (HTML) 发生任何变化时，将被更新。

```
app.controller('two_way_control',function($scope,$http,$interval){
load_pictures();
$interval(function(){
load_pictures();
},300);
function load_pictures(){
$http.get('http://localhost:3000/load').success(function(data){
$scope.profile_pictures=data;
});
}; 
```

这是HTML

```
<div id="container" ng-app='two_way' ng-controller='two_way_control'>
      <div class="row" ng-repeat="data in profile_pictures">
        <div class=".col-sm-6 .col-md-5 .col-lg-6">
          <h4>User Say's</h4><hr>
          <p>
            This is a Demo feed. It is developed to demonstrate Two way data binding.
          </p>
          <img src="{{data.profile_picture}}">
        </div>
      </div>
    </div> 
```

了解更多： [http ://codeforgeek.com/2014/09/two-way-data-binding-angularjs/](http://codeforgeek.com/2014/09/two-way-data-binding-angularjs/)

希望能帮助到你 ！

# linux - Linux 服务器上的缓存内存是否“免费”？

> ID：13181382
> 
> 赞同：4
> 
> 时间：2012-11-01T16:26:40.073
> 
> 标签：linux, apache, memory, ubuntu

Linux 服务器上的缓存内存是否“免费”，即可供其他应用程序免费使用？

我知道Linux内存的使用方式与Windows不同......

但我只有几 MB 的可用内存和 1.2GB 的缓存内存：

```
 total       used       free     shared    buffers     cached
Mem:          3945       3893         51          0         28       1216
-/+ buffers/cache:       2648       1296
Swap:         3895        857       3038 
```

是否像“不可用”一样使用了已损坏的内存？

定期删除缓存有意义吗？冲洗后我有：

```
 total       used       free     shared    buffers     cached
Mem:          3945       2820       1125          0          1        197
-/+ buffers/cache:       2621       1323
Swap:         3895        851       3044 
```

1 小时后，它恢复到具有 1.2 GB 缓存内存的旧状态。

cat /proc/meminfo 冲洗后 1 小时：

```
MemTotal:      4040048 kB
MemFree:         44636 kB
Buffers:         30172 kB
Cached:        1247868 kB
SwapCached:     137156 kB
Active:        3316940 kB
Inactive:       493920 kB
SwapTotal:     3989496 kB
SwapFree:      3101076 kB
Dirty:           25696 kB
Writeback:           0 kB
AnonPages:     2527784 kB
Mapped:         219676 kB
Slab:            52356 kB
SReclaimable:    21240 kB
SUnreclaim:      31116 kB
PageTables:      96668 kB
NFS_Unstable:        0 kB
Bounce:              0 kB
CommitLimit:   6009520 kB
Committed_AS:  6223392 kB
VmallocTotal: 34359738367 kB
VmallocUsed:     18852 kB
VmallocChunk: 34359719439 kB
HugePages_Total:     0
HugePages_Free:      0
HugePages_Rsvd:      0
HugePages_Surp:      0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:31:51.740

需要明确的是，缓存列是使用的子集。进程使用的内存可以单独在已使用的列中，或者如果该内存被缓存，则可以同时在已使用的列和缓存的列中。Cached 只是关于缓存了多少已用内存的报告。

缓存中的内存项不是免费的，但如果您需要空间，它们将从缓存中删除并替换为更频繁请求的内容。但是，您的操作系统足够聪明，可以将经常使用的块保存在缓存中——不要试图比你的内存管理更聪明——总体上你可能会做得更糟。

这些相同的项目不断被加载到缓存中的原因是它们经常被需要。需要时不在缓存项中，仍然会用完该内存空间。

# java - 带有网络服务的开源邮件列表软件

> ID：13181386
> 
> 赞同：0
> 
> 时间：2012-11-01T16:26:59.660
> 
> 标签：java, php, mailing-list

> **可能重复：**
> [推荐的开源java邮件列表软件](https://stackoverflow.com/questions/780357/recommended-open-source-java-mailing-list-software)

谁能推荐我可以安装到我的网络服务器上的开源邮件列表软件？我正在寻找以下功能：

*   可通过 Web 服务（SOAP、REST 等）访问
*   GUI 基于 Web 的管理控制台
*   支持 MySQL 数据库

理想情况下，我希望软件是 PHP 或 Java。到目前为止，我已经找到[了 phpList](http://www.phplist.com/)和[Sympa](http://www.sympa.org/)。

phpList 看起来很棒，但是没有 Web 服务支持。Sympa 还不错，它支持 SOAP，但它是用 Python 编写的。

谢谢！

# objective-c - NSArrayController 为什么这不起作用？

> ID：13181387
> 
> 赞同：1
> 
> 时间：2012-11-01T16:27:00.720
> 
> 标签：objective-c, cocoa, nsarraycontroller

我正在尝试编写一个例程，该例程从制表符分隔的文件中将数百条客户记录导入到 NSArrayController 中。

这是我的初始代码：

```
NSString *stringFromFile = [NSString stringWithContentsOfFile:[fileURL path]
                                encoding:NSUTF8StringEncoding error:&error];
NSArray *paragraphsArray = [stringFromFile componentsSeparatedByString:@"\r"];
NSMutableDictionary *destDict = [[NSMutableDictionary alloc] init];

int i;
for (i = 0; i <= [paragraphsArray count]-1; i++) {
    NSString *currentParagraph = [paragraphsArray objectAtIndex:i];
    if ([currentParagraph length ] > 4) {
        NSArray *elementsArray = [currentParagraph componentsSeparatedByString:@"\t"];
        if ([elementsArray count] > 0) {
            currentSerial++;
            [destDict setObject:[NSString stringWithFormat:@"%ld",currentSerial]
                         forKey:@"idSerial"];
            [destDict setObject:[elementsArray objectAtIndex:1]
                         forKey:@"destRazaoSocial"];
            [destDict setObject:[elementsArray objectAtIndex:2]
                         forKey:@"destLogradouro"];
            [destDict setObject:[elementsArray objectAtIndex:3]
                         forKey:@"destLogradouroNro"];
            /// repeat this for every field...
            //Add the record:
            [destArrayController addObject:destDict];
        }
    }
} 
```

这段代码导致插入错误的记录，如果我在一个例子中有4条记录，插入的4条记录将与最后一条记录具有相同的内容。

但是，如果我将代码更改为此，分配 destDict 并在每个循环中丢弃它，它就可以工作：

```
NSString *stringFromFile = [NSString stringWithContentsOfFile:[fileURL path]
                                   encoding:NSUTF8StringEncoding error:&error];
NSArray *paragraphsArray = [stringFromFile componentsSeparatedByString:@"\r"];
int i;
for (i = 0; i <= [paragraphsArray count]-1; i++) {
    NSString *currentParagraph = [paragraphsArray objectAtIndex:i];
    if ([currentParagraph length ] > 4) {
        NSArray *elementsArray = [currentParagraph componentsSeparatedByString:@"\t"];
        if ([elementsArray count] > 0) {
            NSMutableDictionary *destDict = [[NSMutableDictionary alloc] init];
            currentSerial++;
            [destDict setObject:[NSString stringWithFormat:@"%ld",currentSerial]
                         forKey:@"idSerial"];
            [destDict setObject:[elementsArray objectAtIndex:1]
                         forKey:@"destRazaoSocial"];
            [destDict setObject:[elementsArray objectAtIndex:2]
                         forKey:@"destLogradouro"];
            [destDict setObject:[elementsArray objectAtIndex:3]
                         forKey:@"destLogradouroNro"];
            /// repeat this for every field...
            //Add the record:
            [destArrayController addObject:destDict];
            [destDict release];
        }
    }
} 
```

这可行，但对我来说看起来并不优雅。你能告诉我正确的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T18:31:57.670

The reason why the first code does not work is that you are creating the `NSMutableDictionary` outside of the loop, changing its contents, and then adding it multiple times to an array.

When you add an object to an array, it doesn't create an actual copy of the object, but instead, the array simply sends that object a `retain` message. So in your first code segment, because you created the `destDict` instance outside of the loop, you end up adding the same `destDict` instance to the array multiple times. Because it's the same instance, the dictionary will effectively have the contents from the changes you made on the very last loop.

You can use the code like in your second example, but instead of creating the `destDict` using `alloc/init`, just create an auto-released instance using `[NSMutableDictionary dictionary]`. Then there's no need to add the `[destDict release];` line after adding it to the array controller. (Not a big deal, but anyway)...

```
NSString *stringFromFile = [NSString stringWithContentsOfFile:[fileURL path]
                                encoding:NSUTF8StringEncoding error:&error];
NSArray *paragraphsArray = [stringFromFile componentsSeparatedByString:@"\r"];
int i;
for (i = 0; i <= [paragraphsArray count]-1; i++) {
    NSString *currentParagraph = [paragraphsArray objectAtIndex:i];
    if ([currentParagraph length ] > 4) {
        NSArray *elementsArray = [currentParagraph componentsSeparatedByString:@"\t"];
        if ([elementsArray count] > 0) {

            NSMutableDictionary *destDict = [NSMutableDictionary dictionary];

            currentSerial++;
            [destDict setObject:[NSString stringWithFormat:@"%ld",currentSerial]
                         forKey:@"idSerial"];
            [destDict setObject:[elementsArray objectAtIndex:1]
                         forKey:@"destRazaoSocial"];
            [destDict setObject:[elementsArray objectAtIndex:2]
                         forKey:@"destLogradouro"];
            [destDict setObject:[elementsArray objectAtIndex:3]
                         forKey:@"destLogradouroNro"];
            /// repeat this for every field...
            //Add the record:
            [destArrayController addObject:destDict];
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T17:03:24.020

以您发布的第二种方式进行操作没有任何问题。另一种方法（可能更好也可能不会更好）是第一种方法，但是将 [destDict copy] 而不是 destDict 添加到您的数组中。

关于你的 for 循环的另一点——如果你不需要使用你的代码中没有的索引，你应该使用快速枚举。它更快更容易编写。所以这：

```
int i;
for (i = 0; i <= [paragraphsArray count]-1; i++) {
    NSString *currentParagraph = [paragraphsArray objectAtIndex:i]; 
```

可以这样完成（称为 for-in 循环）：

```
for (NSString *currentParagraph in paragraphArray){
    ....
    ....
} 
```

# header - liferay 中 header-portlet-javascript 的可配置值

> ID：13181390
> 
> 赞同：4
> 
> 时间：2012-11-01T16:27:12.280
> 
> 标签：header, liferay, portlet

header-portlet-javascript 是否可以从系统属性中获取？

例如：

```
<header-portlet-javascript>${external.js.url}</header-portlet-javascript> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T08:50:54.453

一般来说，这是不可能的。

但是，如果您想要包含的 Javascript 出现在您的门户的每个页面上是可以的，您可以在 Liferay 主题中添加对它的引用。在主题内，您可以执行动态操作来检索正确的 JS url，例如使用门户属性：

```
#set($jsUrl = $propsUtil.get("external.js.url"))
<script type="text/javascript" src="$jsUrl"></script> 
```

要对 System 属性产生相同的效果，事情会变得更复杂一些。据我所知，没有办法从注入的 Velocity 变量中获取系统属性。因此，我们需要创建一个小的事件处理程序挂钩，将这个属性注入到 Velocity 上下文中。

## 门户网站属性

```
servlet.service.events.pre=my.custom.ServicePreAction 
```

## ServicePreAction.java

```
public class ServicePreAction extends Action {

    public void run(HttpServletRequest request, HttpServletResponse response) {
        Map<String,Object> veloVars = new HashMap<String,Object>();
        veloVars.put("externalJSurl", System.getProperty("external.js.url"));
        request.setAttribute(WebKeys.VM_VARIABLES, veloVars);
    }

} 
```

## portal_normal.vm

```
<script type="text/javascript" src="$externalJSurl"></script> 
```

# ruby-on-rails - .切换！返回“无路线”红宝石

> ID：13181400
> 
> 赞同：0
> 
> 时间：2012-11-01T16:27:40.370
> 
> 标签：ruby-on-rails, ruby, sqlite

好的，可能是新手的错误，但我希望有人能帮助我。让我首先为这个例子的性质道歉。我的应用程序需要知道狗是否已绝育，并在狗列表中查看此选项。

示例...
Dog1 | 所有者 | 绝育狗2 | 所有者 | 未绝育

该视图看起来很棒，甚至可以正确返回属性问题是当我单击 Neutered/Not neutered 链接时，它不会切换数据库中的字段并且我得到一个 Routing Erro No route matches [POST] "/dogs/3" .

我有一个名为 Dog 的数据库，它有一个布尔选项：neutered 我在 dogs_controller.rb

> ...
> def neuter
> @dog = Dog.find(param[:id])
> @dog.toggle!(:admin)
> flash[:success] = "改变狗的绝育状态"
> redirect_to dogs_url
> end
> ...

在我的 routes.rb 我有

> ...
> 资源 :dogs do
> member do
> get :watching, :watchers (在程序中的其他地方使用) end
> end
> ...

在列出我拥有的狗的部分中

> ...
> <%= link_to dog.name, dog %>
> <%= 如果 dog.neutered？%>
> <%= link_to "Neutered", dog, method: :neuter, data: { confirm: "这会将狗标记为已绝育。你确定吗？" } %>
> <% else %>
> <%= link_to "Not Neutered", dog, method: :neuter, data: { confirm: "这会将狗标记为未绝育。你确定吗？" } %>
> ...

那么我错过了什么？我确定这很简单，但我似乎找不到它。我尝试了其他几个选项，但似乎没有任何解决方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T17:12:58.563

所以这里发生了一些事情。

首先，`link_to`如果您想链接到中性操作，您的做法是不正确的。您要么需要命名路线：

```
<%= link_to "Neutered", neuter_dog_path(dog), method: :post %> 
```

或者您需要准确指定控制器和操作：

```
<%= link_to "Neutered", controller: :dogs, action: :neuter, id: dog.id %> 
```

其次，如果你想使用命名路由，你需要在你的路由文件中添加一个部分。

```
resources :dogs do
  member do
    post :neuter
  end
end 
```

然后链接应该可以正常工作。

# visual-studio-2010 - 签署具有私有访问器的程序集的最佳实践是什么

> ID：13181402
> 
> 赞同：2
> 
> 时间：2012-11-01T16:27:46.750
> 
> 标签：visual-studio-2010, assembly-signing

我有一个应该签署的项目。该项目设置为我的测试项目的 InternalVisibleTo 属性。测试项目引用了抛出异常的私有访问器：访问器没有强名称。现在，看在上帝的份上，我想如何签署大会！我应该只签署项目而不进行一些重构的测试，还是有私有访问器的解决方法？最佳做法是什么？先感谢您。

# php - 当 MySQL 结果行数 >= 10 时开始一个新列

> ID：13181403
> 
> 赞同：-4
> 
> 时间：2012-11-01T16:27:48.597
> 
> 标签：php, mysql

我无法弄清楚如何让我的代码在我的表中为结果创建一个新的 HTML 列`while ($row = mysql_fetch_array($result)) {`- 当返回的结果达到 10 时，我希望在同一个 HTML 表中创建一个新的表列。

我怎样才能做到这一点？我正在使用的代码是：

```
while ($row = mysql_fetch_array 
($result, MYSQL_ASSOC)) {
    $row_color = ($row_count % 2) ? $color1 : $color2;
    echo '<tr><td align="left" bgcolor=' . $row_color . '> <b>' . $row['manufacturer'] . '</b>: <a href=view_inventory.php?mdl_key=' . $row['mdl_key'] . '&man_key=' . $row['man_key'] . '&cls_key=' . $row['cls_key'] . '&sub_cls_key=' . $row['sub_cls_key'] . '> ' . $row['model'] . '</a></b></td></tr>';
    $row_count++;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:45:01.663

你真的应该使用新的 PDO 接口，因为很久以前不推荐使用 mysql 扩展，如果你有选择，请阅读[这个文档。](http://hk2.php.net/manual/en/mysqlinfo.api.choosing.php)

不过，使用旧扩展名，只需执行以下操作：

```
$rowCount = mysql_num_rows($result);

if ($rowCount >= 10) {
    while ($row = mysql_fetch_array($result)) {
        // Do your extra column stuff here.
    }
}
else {
    while ($row = mysql_fetch_array($result)) {
        // Do your normal stuff here.
    }
}

// It is a good practise to remove variables after 
// loops, this helps releasing memory in large scripts.
unset($rowCount, $row, $result); 
```

# javascript - AngularJS $http 和 $resource

> ID：13181406
> 
> 赞同：258
> 
> 时间：2012-11-01T16:27:57.687
> 
> 标签：javascript, web-services, angularjs

我有一些我想调用的网络服务。`$resource`或者`$http`，我应该使用哪一个？

`$resource`：[https ://docs.angularjs.org/api/ngResource/service/$resource](https://docs.angularjs.org/api/ngResource/service/$resource)

`$http`：[https ://docs.angularjs.org/api/ng/service/$http](https://docs.angularjs.org/api/ng/service/$http)

在我阅读了上述两个 API 页面后，我迷路了。

您能否用简单的英语向我解释有什么区别以及我应该在什么情况下使用它们？如何构建这些调用并将结果正确读入 js 对象？

* * *

## 回答 #1

> 赞同：210
> 
> 时间：2014-05-27T17:01:31.100

我觉得其他答案虽然正确，但并不能完全解释问题的根源：`REST`是`HTTP`. 这意味着可以通过完成的所有事情都可以通过`REST`完成，`HTTP`但并非所有可以通过完成的事情都可以通过`HTTP`完成`REST`。这就是为什么在内部`$resource`使用`$http`。

**那么，什么时候互相使用呢？**

如果您所需要的只是`REST`，也就是说，您正在尝试访问一个`RESTful`Web 服务，`$resource`那么与该 Web 服务的交互将变得超级容易。

相反，如果您尝试访问任何不是网络服务的东西`RESTful`，那么您将不得不使用`$http`. 请记住，您也可以`RESTful`通过 访问 Web 服务`$http`，这将比使用 更麻烦`$resource`。这是大多数人在 AngularJS 之外使用`jQuery.ajax`（相当于 Angular 的`$http`）的方式。

* * *

## 回答 #2

> 赞同：170
> 
> 时间：2012-11-01T17:07:27.763

`$http`用于通用 AJAX。在大多数情况下，这就是您将要使用的。`$http`您将手动进行, `GET`,`POST`类型`DELETE`调用并自行处理它们返回的对象。

`$resource``$http`用于 RESTful Web API 场景的包装。

* * *

非常笼统地说：RESTful Web 服务将是一种服务，它具有一个数据类型的端点，该数据类型基于 HTTP 方法（如`GET`、`POST`、`PUT`、`DELETE`等）对该数据类型做不同的事情。作为 JavaScript 对象，然后对其进行更改并使用 . 将其发回，甚至使用.`$resource``GET``POST``DELETE`

......如果这是有道理的。

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2015-08-08T00:29:21.440

`$http`进行通用AJAX调用，其中**通用**意味着它可以包括*RESTful* api和*Non-RESTful* api。

并且`$resource`专门用于那个*RESTful*部分。

**Restful Api**之所以在近几年流行起来，是因为 url 组织得更好，而不是程序员编写的随机 url。

如果我使用*RESTful API*来构造 url，它将类似于`/api/cars/:carId`.

`$resource`获取数据的方法

```
angular.module('myApp', ['ngResource'])

    // Service
    .factory('FooService', ['$resource', function($resource) {
        return $resource('/api/cars/:carId')
    }]);

    // Controller
    .controller('MainController', ['FooService', function(FooService){
        var self = this;
        self.cars = FooService.query();
        self.myCar = FooService.get('123');

    }]); 
```

这将为您提供一个[资源对象](https://docs.angularjs.org/api/ngResource/service/$resource)，它会自动附带`get`, `save`, `query`, `remove`,`delete`方法。

`$http`获取数据的方法

```
angular.module('myApp', [])

    // Service
    .factory('FooService', ['$http', function($http){
        return {
            query: function(){
                return $http.get('/api/cars');
            },

            get: function(){
                return $http.get('/api/cars/123');
            }
            // etc...
        } 
```

看看我们需要如何定义*RESTFul API*上的每个常见操作。还有一个区别是return while`$http`返回一个对象。还有第三方插件可以帮助 Angular 处理*RESTFul API*，比如[restangular](https://github.com/mgonto/restangular)`promise``$resource`

 ** * *

如果 API 类似于`/api/getcarsinfo`. 留给我们的就是使用`$http`.

* * *

## 回答 #4

> 赞同：30
> 
> 时间：2016-02-04T22:26:38.227

我认为答案更多地取决于*您*在编写代码时的身份。**如果您是 Angular 新手，请使用`$http`，直到您知道为什么需要`$resource`.** `$http`在您对阻碍您的方式有具体经验，并且您了解`$resource`在*代码*中使用的含义之前，请坚持使用`$http`.

这是我的经验：我开始了我的第一个 Angular 项目，我需要向 RESTful 接口发出 HTTP 请求，所以我做了你现在正在做的同样的研究。根据我在类似这样的 SO 问题中阅读的讨论，我选择使用`$resource`. **这是一个我希望我能撤消的错误。**原因如下：

1.  `$http`示例很多，很有帮助，而且通常正是您所需要的。清晰`$resource`的例子很少，而且（根据我的经验）很少有你需要的一切。对于 Angular 新手来说，直到后来，当您对文档感到困惑并为找不到有用`$resource`的示例来帮助您而感到愤怒时，您才会意识到您选择的含义。
2.  `$http`可能是您要查找的内容的一对一心理地图。您无需学习新概念即可了解您所获得的内容`$http`。`$resource`带来了很多你还没有心理地图的细微差别。
3.  哎呀，我是说你不必学习新概念吗？作为 Angular 新手，你**必须**了解 Promise。`$http`返回一个 Promise 并且是有`.then`能力的，所以它正好适合你正在学习的关于 Angular 和 Promise 的新东西。`$resource`，它不直接返回承诺，使您对 Angular 基础知识的初步掌握变得复杂。
4.  `$resource` is powerful because it condenses the code for RESTful CRUD calls and the transformations for input and output. That's great if you're sick of repeatedly writing code to process the results of `$http` yourself. To anyone else, `$resource` adds a cryptic layer of syntax and parameter passing that is confusing.

I wish I knew me 3 months ago, and I'd be emphatically telling myself: "Stick with `$http` kid. It's just fine."

* * *

## 回答 #5

> 赞同：24
> 
> 时间：2014-08-01T12:55:44.040

我认为重要的是要强调 $resource 期望对象或数组作为来自服务器的响应，而不是原始字符串。因此，如果您有原始字符串（或除对象和数组之外的任何内容）作为响应，则必须使用 $http

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2014-05-26T01:34:44.183

在选择`$http`或`$resource`从技术上讲，没有正确或错误的答案，本质上两者都会做同样的事情。

的目的`$resource`是允许您传入模板字符串（包含占位符的字符串）以及参数值。*将模板字符串中的占位符*`$resource`替换为作为对象传递的参数值。这在与 RESTFul 数据源交互时非常有用，因为它们使用类似的原则来定义 URL。

 *什么`$http`是执行异步 HTTP 请求。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-11-22T16:09:28.560

资源服务只是使用 REST APSI 的有用服务。当您使用它时，您不会编写 CRUD 方法（创建、读取、更新和删除）

在我看来，资源服务只是一个捷径，你可以用http服务为所欲为。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-08-06T02:13:20.887

在使用 $resource 而不是 $http 时我注意到的一件事是，如果您在 .net 中使用 Web API

$resource 被绑定到一个执行单一目的的控制器中。

$resource('/user/:userId', {userId:'@id'});

```
[HttpGet]
public bool Get(int id)
{
    return "value"
}

public void Post([FromBody]string value)
{
}

public void Put(int id, [FromBody]string value)
{
}

public void Delete(int id)
{
} 
```

虽然 $http 可以是任何东西。只需指定网址。

$http.get - "api/authenticate"

```
[HttpGet]
public bool Authenticate(string email, string password)
{
    return _authenticationService.LogIn(email, password, false);
} 
```

这只是我的意见。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-01-12T12:18:49.510

$resource 服务目前不支持 Promise，因此与 $http 服务有明显不同的接口。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-08-15T12:17:27.570

What I could understand is that if you are having a RESTFUL resources to manage, using `$resource` will let you define the resource once in code, and use the resource for multiple operations on the resource. This increases the readability and maintainability of the code.

If you just want to have general purpose calls not managing it like post, delete, update, you may go with `$http` or `$resource` (as you prefer).**

# python - 对于 scikit-learn 中的每个文件，如何从 TD-idf 向量中获得最高频率项？

> ID：13181409
> 
> 赞同：1
> 
> 时间：2012-11-01T16:28:05.813
> 
> 标签：python, parsing, machine-learning, classification, scikit-learn

我正在尝试从 scikit-learn 中的向量中获取最高频率项。从示例它可以为每个类别使用它，但我希望它用于类别内的每个文件。

[https://github.com/scikit-learn/scikit-learn/blob/master/examples/document_classification_20newsgroups.py](https://github.com/scikit-learn/scikit-learn/blob/master/examples/document_classification_20newsgroups.py)

```
 if opts.print_top10:
        print "top 10 keywords per class:"
        for i, category in enumerate(categories):
            top10 = np.argsort(clf.coef_[i])[-10:]
            print trim("%s: %s" % (
            category, " ".join(feature_names[top10]))) 
```

我想对来自测试数据集的每个文件而不是每个类别执行此操作。我应该在哪里寻找？

谢谢

编辑：s/discriminitive/最高频率/g（抱歉混淆）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T13:08:55.883

您可以使用转换的结果`get_feature_names`来获取给定文档的术语计数。

```
X = vectorizer.transform(docs)
terms = np.array(vectorizer.get_feature_names())
terms_for_first_doc = zip(terms, X.toarray()[0]) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-06T20:15:48.307

好像没人知道。我在这里回答，因为其他人面临同样的问题，我现在在哪里寻找，还没有完全实施。

它位于 sklearn.feature_extraction.text 的 CountVectorizer 深处：

```
def transform(self, raw_documents):
    """Extract token counts out of raw text documents using the vocabulary
    fitted with fit or the one provided in the constructor.

    Parameters
    ----------
    raw_documents: iterable
        an iterable which yields either str, unicode or file objects

    Returns
    -------
    vectors: sparse matrix, [n_samples, n_features]
    """
    if not hasattr(self, 'vocabulary_') or len(self.vocabulary_) == 0:
        raise ValueError("Vocabulary wasn't fitted or is empty!")

    # raw_documents can be an iterable so we don't know its size in
    # advance

    # XXX @larsmans tried to parallelize the following loop with joblib.
    # The result was some 20% slower than the serial version.
    analyze = self.build_analyzer()
    term_counts_per_doc = [Counter(analyze(doc)) for doc in raw_documents] # <<-- added here
    self.test_term_counts_per_doc=deepcopy(term_counts_per_doc)
    return self._term_count_dicts_to_matrix(term_counts_per_doc) 
```

我添加了 self.test_term_counts_per_doc=deepcopy(term_counts_per_doc) ，它使它能够像这样从外部矢量化器调用：

```
load_files = recursive_load_files
trainer_path = os.path.realpath(trainer_path)
tester_path = os.path.realpath(tester_path)
data_train = load_files(trainer_path, load_content = True, shuffle = False)

data_test = load_files(tester_path, load_content = True, shuffle = False)
print 'data loaded'

categories = None    # for case categories == None

print "%d documents (training set)" % len(data_train.data)
print "%d documents (testing set)" % len(data_test.data)
#print "%d categories" % len(categories)
print

# split a training set and a test set

print "Extracting features from the training dataset using a sparse vectorizer"
t0 = time()
vectorizer = TfidfVectorizer(sublinear_tf=True, max_df=0.7,
                             stop_words='english',charset_error="ignore")

X_train = vectorizer.fit_transform(data_train.data)

print "done in %fs" % (time() - t0)
print "n_samples: %d, n_features: %d" % X_train.shape
print

print "Extracting features from the test dataset using the same vectorizer"
t0 = time()
X_test = vectorizer.transform(data_test.data)
print "Test printing terms per document"
for counter in vectorizer.test_term_counts_per_doc:
    print counter 
```

这是我的叉子，我还提交了拉取请求：

[https://github.com/v3ss0n/scikit-learn](https://github.com/v3ss0n/scikit-learn)

如果有更好的方法，请建议我。

# ios - 带有渐变的 UIProgressView

> ID：13181416
> 
> 赞同：1
> 
> 时间：2012-11-01T16:28:28.013
> 
> 标签：ios, uicolor, uiprogressview, cagradientlayer

有没有办法`progressTintColor`制作渐变？具体来说，我想让它成为从绿色到红色的渐变色 - 标准温度模式。

添加子图层不起作用，因为它将图层放在视图“后面”：

```
CAGradientLayer *gradient = [CAGradientLayer layer];
gradient.frame = self.testBar.bounds;
gradient.colors = [NSArray arrayWithObjects:(id)[[UIColor greenColor] CGColor], (id)[[UIColor redColor] CGColor], nil];
[self.testBar.layer insertSublayer:gradient atIndex:0]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T16:38:42.197

您可以尝试创建带[图案的 UIColor](https://stackoverflow.com/a/844801/243192)并将其设置为 tint 颜色，但我怀疑它会起作用。

否则，您可能需要继承 UIProgressView 或构建自己的 UIView 子类。进度条并不难画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-15T08:39:36.680

我发现了这个，它在我当地的效果很好

[https://medium.com/academy-poa/how-to-create-a-uiprogressview-with-gradient-progress-in-swift-2d1fa7d26f24](https://medium.com/academy-poa/how-to-create-a-uiprogressview-with-gradient-progress-in-swift-2d1fa7d26f24)

1.Extent UIImage

```
 extension UIImage {

        public convenience init?(bounds: CGRect, colors: [UIColor], orientation: GradientOrientation = .horizontal) {
            let gradientLayer = CAGradientLayer()
            gradientLayer.frame = bounds
            gradientLayer.colors = colors.map({ $0.cgColor })

            if orientation == .horizontal {
                gradientLayer.startPoint = CGPoint(x: 0.0, y: 0.5);
                gradientLayer.endPoint = CGPoint(x: 1.0, y: 0.5);
            }

            UIGraphicsBeginImageContext(gradientLayer.bounds.size)
            gradientLayer.render(in: UIGraphicsGetCurrentContext()!)
            let image = UIGraphicsGetImageFromCurrentImageContext()
            UIGraphicsEndImageContext()

            guard let cgImage = image?.cgImage else { return nil }
            self.init(cgImage: cgImage)
        }
    }

public enum GradientOrientation {
    case vertical
    case horizontal
} 
```

2.  创建自己的渐变进度条

导入 UIKit

```
class GradientProgressView: UIProgressView {

@IBInspectable var firstColor: UIColor = UIColor.white {
    didSet {
        updateView()
    }
}

@IBInspectable var secondColor: UIColor = UIColor.black {
    didSet {
        updateView()
    }
}

func updateView() {

    if let gradientImage = UIImage(bounds: self.bounds, colors: [firstColor, secondColor]) {
        self.progressImage = gradientImage
    }
} 
```

}

3.  在你的课上

    让 progressView = GradientProgressView(progressViewStyle: .bar)

    ```
     progressView.firstColor = UIColor(red: 0.949, green: 0.478, blue: 0.329, alpha: 1) //your own color
     progressView.secondColor = UIColor(red: 0.631, green: 0.329, blue: 0.949, alpha: 1) //your own color
     progressView.updateView() 
    ```

# asp.net-mvc - 无法使用 WP8 模拟器连接到本地 MVC 4 api 服务器

> ID：13181417
> 
> 赞同：1
> 
> 时间：2012-11-01T16:28:28.877
> 
> 标签：asp.net-mvc, restsharp, windows-phone-8

我有一个使用 MVC 4 api 服务器的小游戏项目，但是由于我安装了 windows 8 / VS12 / WP8 SDK，我无法从模拟器中的应用程序访问服务器，但是我可以访问已部署的网络服务器。

是否有某种默认防火墙会阻止我联系本地主机服务器？当我尝试时，我只是得到一个 NotFound 异常，本地主机服务器在我的浏览器中工作正常以检索一些 xml 对象

我在 Windows 7 中使用 vs2010 和 wp7 sdk 有相同的代码。

要连接到服务器，我使用[http://restsharp.org/](http://restsharp.org/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T17:36:31.523

模拟器在 Hyper-V 中运行，它是一个**虚拟机**。它运行自己的网络，因此您的 PC 的*“本地主机”*在虚拟机内部不可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T13:57:23.933

您不必设置完整的 IIS...您可以使用 IIS express（运行 Web api 解决方案时的 Visual Studio 方式）。

你需要做两件事，第一件检查

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj684580(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj684580(v=vs.105).aspx) - 仅称为“**使用 IIS Express 的快速解决方案**”的部分（第 1 到第 4 部分）

第二个，添加 Microsoft 防火墙规则以允许从 VM 访问 IIS express。防火墙 > 高级设置 > 传入规则 > 新端口规则

# z3 - 编译 Z3 测试示例会产生构建错误

> ID：13181420
> 
> 赞同：3
> 
> 时间：2012-11-01T16:28:37.640
> 
> 标签：z3

我从 codeplex 的源代码编译了 Z3。配置细节：

*   操作系统 Debian 5.0 (Lenny)
*   GLIBC 2.7
*   GCC 4.4.3
*   OpenMP 4.3.4（包版）

当我尝试构建 c 示例时，我得到：

```
../../lib/libz3.so: undefined reference to `std::ctype<char>::_M_widen_init() const@GLIBCXX_3.4.11' 
```

当我尝试构建 c++ 示例时，我得到：

```
../../lib/libz3.so: undefined reference to `omp_init_nest_lock@OMP_3.0'
../../lib/libz3.so: undefined reference to `omp_unset_nest_lock@OMP_3.0'
../../lib/libz3.so: undefined reference to `omp_set_nest_lock@OMP_3.0'
../../lib/libz3.so: undefined reference to `omp_destroy_nest_lock@OMP_3.0'. 
```

前面提到的示例是从 Z3 网站下载的。当我构建随源代码一起提供的 test_capi 示例时，我得到了上述错误消息的并集。

问题的本质是什么？系统使用Z3有什么先决条件吗？

在另一台 Debian 6.0 机器上，一切顺利。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T17:26:02.287

我假设您使用的是官方 src 版本或 master 分支。如果是这种情况，您可以尝试在目录中编译`test_capi`使用吗？`test_capi`

```
gcc -o test_capi -I ../lib test_capi.c -L ../bin/external -lz3 -lstdc++ -lgomp 
```

在上面的命令中，我们明确告诉`gcc`链接到 C++ 标准和 OMP 库。对于 c++ 示例，您只需要包含`-lgomp`，因为默认情况下 g++ 将与 C++ 标准库链接。您可以使用以下方法找到其他缺少的依赖项`ldd`：

```
ldd ../bin/external/libz3.o 
```

话虽如此，我正在为 Z3 开发一个新的构建系统，您可以通过`unstable`从 codeplex 获取分支来尝试它。你能试一试吗？很高兴收到您的反馈，以使构建在更多平台上顺利进行。

# hyper-v - WP8 模拟器停止工作

> ID：13181422
> 
> 赞同：0
> 
> 时间：2012-11-01T16:28:39.203
> 
> 标签：hyper-v, windows-phone-8

好的，所以我在 WP8 模拟器上工作得很好，但突然进入 Hyper-V 管理器后它停止工作，没有做任何更改，甚至删除了要在调试时再次创建的虚拟机，但没有运气

我已经尝试了各种模拟器图像，但它们似乎都不再起作用了，事件查看器在 Hyper-V 上没有显示错误。

我注意到的是，虚拟机在 Hyper-V 中启动会进入 Windows 徽标，然后在黑屏中挂起几分钟，然后自动关闭，尝试在不调试的情况下直接从 hyper-v 启动它，但没有任何效果，我应该重新安装 SDK 吗？在我看来，这与安装无关，因为它以前工作过

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T17:37:13.240

删除 Hyper-V 中的实例，然后运行`XdeCleanup`​​.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T23:06:48.320

取自连接论坛，我不知道它是否能解决您的问题：

我遇到了模拟器问题并尝试了几件事，包括以下解决方案，有几次无法弄清楚问题所在，所以我恢复了以前的图像，因为这很快。

来自讨论“RTW - 无法调试 - IP 地址问题”

> 1.  卸载 SDK
> 2.  使用以下命令卸载并重新安装虚拟交换机：
> 3.  C:> netcfg –u vms_pp
> 4.  C:> netcfg –cp –i vms_pp
> 5.  重启
> 6.  重新安装 SDK

来自讨论“模拟器和无线适配器问题”

> 问题解决了！Hyper-V 对来宾 VM（虚拟机）和主机使用相同的 MAC 地址。如果路由器配置为始终为主机提供相同的 IP 地址，它将与模拟器冲突。解决方案 - 在路由器上从已知 PC 中删除主机，让它给你一些新的 IP 地址（不固定）。启动模拟器后，它将从路由器获取正确的 IP 地址。路由器将向您显示两台具有相同 MAC 但 IP 地址不同的 PC（主机和虚拟机）。

# python - 在 gtk.ListStore 中指定字段的更好方法

> ID：13181424
> 
> 赞同：1
> 
> 时间：2012-11-01T16:28:44.720
> 
> 标签：python, gtk, pygtk

我有`ListStore`很多领域，其中大部分是相同的：

```
store = gtk.ListStore(str,str,str,str,str,str,str,str,
            gtk.gdk.Pixbuf,gtk.gdk.Pixbuf,gtk.gdk.Pixbuf,gtk.gdk.Pixbuf,
            gtk.gdk.Pixbuf,gtk.gdk.Pixbuf,gtk.gdk.Pixbuf,gtk.gdk.Pixbuf,
            gtk.gdk.Pixbuf,gtk.gdk.Pixbuf,gtk.gdk.Pixbuf,gtk.gdk.Pixbuf,
            gtk.gdk.Pixbuf,gtk.gdk.Pixbuf,str,) 
```

有比这种可怕的大量重复更好的方法吗？

编辑：所以这结束了：

```
store = gtk.ListStore( *(8*(str,)+14*(gtk.gdk.Pixbuf,)+(str,)) ) 
```

我猜可读性较差，但在编程上更具适应性

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T16:32:58.747

1.  如果您可以控制`ListStore`代码，请将它们打包成 a`namedtuple`并确保它们不会隐藏内置名称。
2.  如果您无法控制`ListStore`代码，请将它们打包成一个元组并通过`gtk.ListStore(*yourtuple)`.

# macos - 如何在我的 applescript 中包含命令行实用程序？

> ID：13181431
> 
> 赞同：2
> 
> 时间：2012-11-01T16:29:10.103
> 
> 标签：macos, applescript

我编写了一个applescript，它使用了一个有助于执行点击的外部命令行脚本。

现在，如果我想发布我的脚本，我应该如何对待最终用户？我的意思是，我应该对他们说：“首先，您必须下载此 CLI 实用程序，并将其放入此文件夹……然后下载并运行我的脚本！”

这是一个新手问题，但是：这是唯一的方法吗？或者我可以在我的脚本/包中以某种方式包含 CLI 代码吗？如果是怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T17:54:59.963

如果脚本足够短，您可以直接将其包含在 AppleScript 中：

```
do shell script "if [ -f /tmp/foo ]; then rm /tmp/foo; fi" 
```

如果它太长和/或足够复杂以至于不方便，你可以将它嵌入到应用程序包中（我认为在 Contents/MacOS 子文件夹中是最好的地方），然后像这样从 AppleScript 执行它：

```
set objectFolder to (path to me) as string
do shell script ((quoted form of POSIX path of (objectFolder)) ¬
    & "Contents/MacOS/scriptname") 
```

# javascript - Jquery If, Else Slider

> ID：13181432
> 
> 赞同：0
> 
> 时间：2012-11-01T16:29:11.680
> 
> 标签：javascript, jquery, if-statement

我花了两天时间在新网站的首页上工作，但是我无法使用这些功能。

最好查看此链接。

[http://isca01.bigwavemedia.info/~stagedgo/html/](http://isca01.bigwavemedia.info/~stagedgo/html/)

当您将鼠标悬停在促销活动上时，页面向左推 20 像素，但是当单击滑块时，当您再次将鼠标悬停在它上面时，它应该向右推 20 像素。

我使用了下面的代码，它的工作方式是检查包装器是否已被推送。

```
if ($('.wrapper').css('marginLeft') ==  "0px") {
          //code to push page left 20
     }
 if ($('.wrapper').css('marginLeft') >  "1px") {
          //code to push page right 20
     } 
```

任何帮助都会很棒，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T16:49:20.770

作为尤金所说的更新，您应该能够使用它：

```
if (parseInt($('.wrapper').css('margin-left').replace('px', '')) ==  0) {
      //code to push page left 20
}
if (parseInt($('.wrapper').css('margin-left').replace('px', '')) >=  20) {
      //code to push page right 20
} 
```

这将确保返回的值是一个整数，并且您实际上得到的是左边距的值，而不是不是有效属性的 'marginLeft'。

编辑：刚刚注意到我错过了一个右括号，但代码对我有用。[我在这里](http://jsfiddle.net/tCHg6/)对 jsfiddle 进行了测试（只需将 margin-left 值更改为适当的值以查看框更改颜色）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T16:35:53.187

您不能对不是数字的事物使用“超过”运算符。

尝试这个：

```
if ($('.wrapper').css('marginLeft') ==  "0px") {
      //code to push page left 20
} else {
      //code to push page right 20
} 
```

或者，您可以只传递不带“px”的数字进行比较：

```
if (parseInt($('.wrapper').css('marginLeft')) ==  0) {
      //code to push page left 20
}
if (parseInt($('.wrapper').css('marginLeft')) >=  20) {
      //code to push page right 20
} 
```

**编辑：**

用这个替换你的整个悬停代码（从第 200 行到第 243 行）。基本上，当边距为0时将其向右移动，当边距不为0时将其向左移动。这应该可以解决您的问题。

```
$(".show_hide").hover(function() {

    if(parseInt($(".wrapper").css('marginLeft')) == 0) {

        $(".wrapper").animate({
            right: -20,
            opacity: 1
        }, 300);

    } else {

        $(".wrapper").animate({
            left: -20,
            opacity: 1
        }, 300);

    };  

}, function() {

    $(".wrapper").animate({
        right: 0,
        left: 0,
        opacity: 1
    }, 300);

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T16:55:43.237

您的 JavaScript 代码是：

```
$(document).ready(function(){

// some code here

$('.show_hide').toggle(function(){
  // some code here
},
function() {
  // some code here
});

if ($('.wrapper').css('marginLeft') ==  "0px") {
  $(".show_hide").hover(function () {
    $(".wrapper").animate({ left: 20, opacity : 1 }, 300);
  },
  function () {
    $(".wrapper").animate({ left:0, opacity : 1 }, 300);
  })
}
else if ($('.wrapper').css('marginLeft') > "1px") {
  $(".show_hide").hover(function () {
    $(".wrapper").animate({ right:20, opacity : 1 },300);
  },
  function () {
    $(".wrapper").animate({ right:0, opacity : 1}, 300);    
  })
}           
}); 
```

您可以在此处看到，当文档准备好时，您定义了一次“悬停”行为。

而您应该做的是在“切换”事件期间重新定义此行为。

我建议您改用此代码：

```
function setupHoverBehaviour() {
  var marginValue = $('.wrapper').css('marginLeft');
  if ( marginValue ==  "auto" || parseInt(marginValue) == "0" ) {
    $(".show_hide").hover(function () {
      $(".wrapper").animate({ left: 20, opacity : 1 }, 300);
    },
    function () {
      $(".wrapper").animate({ left:0, opacity : 1 }, 300);
    })
  }
  else {
    $(".show_hide").hover(function () {
      $(".wrapper").animate({ right:20, opacity : 1 },300);
    },
    function () {
      $(".wrapper").animate({ right:0, opacity : 1}, 300);  
    })
  }
}

$(document).ready(function(){

  // some code here

  $('.show_hide').toggle(function(){
    // some code here

    setupHoverBehaviour();
  },
  function() {
    // some code here

    setupHoverBehaviour();
  });

  setupHoverBehaviour();

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T16:34:12.633

我会在包装器或 click 事件上的触发器元素中添加一个类，以指示它已被推送。然后，您可以在任何元素上使用 .hasClass("pushed") 来确定它是否需要向左或向右滑动。

# jquery - 具有固定内容的图像滑块

> ID：13181433
> 
> 赞同：0
> 
> 时间：2012-11-01T16:29:18.437
> 
> 标签：jquery, slider

我想构建一个类似于[https://www.airbnb.com.sg/的滑块](https://www.airbnb.com.sg/)

在内容保持不变的情况下，只有背景图像被滑动。

你能建议我任何有类似要求的jquery插件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:42:56.453

如果我在你的位置，我会使用[flex 滑块](http://www.woothemes.com/flexslider/)在背景中滑动图像，并使用 css 绝对定位将我的静态内容放在滑块上。

首先使用 flex 滑块创建一个大滑块。

创建您的静态内容，例如：

```
<div id="staticContent"> 
   <!-- your content such as form or anything goes here-->
</div> 
```

使这个静态内容 div 绝对定位。

```
#staticContent{
  position:absolute;
  left:20%;
  top:20%; /*change these values*/
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T17:33:59.183

你可以试试[NivoSlider](http://nivo.dev7studios.com/)。这是一个很好的。

# iphone - 如何将 xml 文件的属性加入 NSMutableDictionary？

> ID：13181435
> 
> 赞同：0
> 
> 时间：2012-11-01T16:29:33.963
> 
> 标签：iphone, xml, cocoa-touch, nsmutablearray, nsmutabledictionary

我必须将解析的 XML 文件的所有相同属性加入到`NSMubableDictionary`.

我需要字典中有关**"show1"、"show2"**等的所有内容（即 " **"show1"、"show2"**等...键和`NSArrays`属于每个键的属性。

我正在使用 RaptureXML 库来解析内容：

```
RXMLElement *rootXML = [RXMLElement elementFromXMLString:string
                                                   encoding:NSUTF8StringEncoding];

[rootXML iterateWithRootXPath:@"//audio" usingBlock: ^(RXMLElement *program) {

    NSString * show = [NSString stringWithString:[program attribute:@"program"]];
    NSString * date = [NSString stringWithString:[program attribute:@"date"]];
    NSString * time = [NSString stringWithString:[program attribute:@"time"]];
    NSString * path = [NSString stringWithString:[program attribute:@"path"]];

}]; 
```

}

这是 XML 文件：

```
<audio date="11/01/2012" time="12:00 to 13:00" program="show1" path="http://mydomain/onDemand/audio_12.mp3"/>
<audio date="11/01/2012" time="11:00 to 12:00" program="show2" path="http://mydomain/onDemand/audio_11.mp3"/>
<audio date="11/01/2012" time="10:00 to 11:00" program="show2" path="http://mydomain/onDemand/audio_10.mp3"/>
<audio date="11/01/2012" time="09:00 to 10:00" program="show2" path="http://mydomain/onDemand/audio_09.mp3"/>
<audio date="11/01/2012" time="08:00 to 09:00" program="show3" path="http://mydomain/onDemand/audio_08.mp3"/>
<audio date="11/01/2012" time="07:00 to 08:00" program="show3" path="http://mydomain/onDemand/audio_07.mp3"/>
<audio date="11/01/2012" time="06:00 to 07:00" program="show3" path="http://mydomain/onDemand/audio_06.mp3"/>
<audio date="11/01/2012" time="05:00 to 06:00" program="show4" path="http://mydomain/onDemand/audio_05.mp3"/>
<audio date="11/01/2012" time="04:00 to 05:00" program="show4" path="http://mydomain/onDemand/audio_04.mp3"/>
<audio date="11/01/2012" time="03:00 to 04:00" program="show4" path="http://mydomain/onDemand/audio_03.mp3"/> 
```

我怎样才能做到这一点？有没有更好的方法来解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T18:54:50.847

没有提示您正在使用什么 XML 库，一些伪代码：

```
NSMutableDictionary * dict = blablah
for(xmlthing * audio in yourxmlarrayofthoseaudiotags)
{
    NSString * key = [audio attributeForKey:@"program"];
    NSArray * showObject = [dict objectForKey:key];
    if(showObject == nil)
    {
        create your base array/dictionary object based on shows
    }
    create your show dictionary object by adding only date, time, path
    [showObject addObject:showtime];
} 
```

编辑：您提到该库是一件好事，因为它是基于块的，并且与所有其他 xml 库完全不同。上面的代码是伪代码，你必须更新和改变必要的东西才能让它在你的代码中工作。但无论如何，对于 RaptureXML 来说，大致如下：

```
NSMutableDictionary * reorgDict = [[NSMutableDictionary alloc] init];
[rootXML iterate:@"audio.*" usingBlock: ^(RXMLElement * element) {
     NSString * key = [element attribute:@"program"];
     NSMutableArray * showObjects = [reorgDict objectForKey:key];
    if(showObjects == nil)
    {
        showObjects = [[NSMutableArray alloc] init];
        [reorgDict setObject:showObjects forKey:key];
    }
    NSMutableDictionary * thisShow = [[NSMutableDictionary alloc] init];
    [thisShow setObject:element attribute:@"date" forKey:@"date"];
    [thisShow setObject:element attribute:@"time" forKey:@"time"];
    [thisShow setObject:element attribute:@"path" forKey:@"path"];
    [showObjects addObject:thisShow];
}]; 
```

可能有一种更聪明的方法可以在那里进行处理，但我以前没有使用过这个库。但是上面的代码试图做的是重新解析 xml 并将其放入如下结构中

```
>dictionary
\-> key = "program" ("show1")
 \-> array
  \-> dictionary
    \-> key = "date"
    \-> key = "time"
    \-> key = "path"

\-> key = "program" ("show2")
 \-> array
  \-> dictionary
    \-> key = "date"
    \-> key = "time"
    \-> key = "path"
  \-> dictionary
    \-> key = "date"
    \-> key = "time"
    \-> key = "path" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T16:33:10.427

你可以这样做`NSXMLParser`，检查[一下](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSXMLParser_Class/Reference/Reference.html)。[Apple here](http://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/XMLParsing/XMLParsing.pdf)有一个很好的文档。

# php - 如何用 PHP 命名上传的图像文件？

> ID：13181439
> 
> 赞同：0
> 
> 时间：2012-11-01T16:29:53.097
> 
> 标签：php, counter, uploading

我想更改我的 php 上传页面上的代码，以便它上传带有顺序编号的照片 1.jpg 2.jpg 3.jpg... 9999999.jpg

我想以从 1 开始到无穷大的升序命名图像。

我不希望任何图像被覆盖，我认为可以使用计数器，但我不知道如何正确编码。

上传的图像存储在两个目录中。1\. 原始文件 2\. 缩略图

```
$DestinationDirectory    = 'user-uploads/'; //original file
    $DestinationDirectorytn  = 'user-uploads-thumbnails/'; //original file thumbnail 
```

`time()`目前它通过函数命名文件

```
// current time value, will be added as the new image name
    $CurrentTime    = time(); 

//Construct a new image name (time) for our new image.
    $NewImageName = $CurrentTime.'.'.$ImageExt; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T16:36:38.060

尝试这个：

```
$directory = "user-uploads/";
$filecount = count(glob($directory . "*"))+1;
//Construct a new image name (time) for our new image.
$NewImageName = $filecount.'.'.$ImageExt; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T16:39:10.723

您可以计算目录中的文件并增加文件名的值。

该链接有示例：[http ://www.brightcherry.co.uk/scribbles/php-count-files-in-a-directory/](http://www.brightcherry.co.uk/scribbles/php-count-files-in-a-directory/)

在对文件进行计数之后，您设置文件的名称：将值与名称连接。

谢谢

但是还有很多其他的方法。

# node.js - 使用 emailjs 在 Heroku 上的 Node 应用程序崩溃

> ID：13181459
> 
> 赞同：0
> 
> 时间：2012-11-01T16:30:47.747
> 
> 标签：node.js, heroku

我在我的 NodeApp 中集成了“ **emailjs** ”，它**在本地**运行良好。

当我将 NodeApp 推送到 Heroku 时，我收到了这个错误，我似乎找不到错误。希望有人可以帮助

这是错误：

```
2012-11-01T15:24:28+00:00 app[web.1]:           ^
2012-11-01T15:24:28+00:00 app[web.1]: Error: Cannot find module 'bufferjs/concat'
2012-11-01T15:24:28+00:00 app[web.1]:     at Function._resolveFilename (module.js:337:11)
2012-11-01T15:24:28+00:00 app[web.1]:     at Object..js (module.js:464:10)
2012-11-01T15:24:28+00:00 app[web.1]:     at Module.load (module.js:353:31)
2012-11-01T15:24:28+00:00 app[web.1]:     at Function._load (module.js:311:12)
2012-11-01T15:24:28+00:00 app[web.1]:     at Module.require (module.js:359:17)
2012-11-01T15:24:28+00:00 app[web.1]: 
2012-11-01T15:24:28+00:00 app[web.1]:     at Function._load (module.js:279:25)
2012-11-01T15:24:28+00:00 app[web.1]:     at Module.require (module.js:359:17)
2012-11-01T15:24:28+00:00 app[web.1]:     at require (module.js:375:17)
2012-11-01T15:24:28+00:00 app[web.1]:     at Object.<anonymous> (/app/node_modules/emailjs/smtp/message.js:17:4)
2012-11-01T15:24:28+00:00 app[web.1]:     at Module._compile (module.js:446:26)
2012-11-01T15:24:30+00:00 heroku[web.1]: Process exited with status 1
2012-11-01T15:24:30+00:00 heroku[web.1]: State changed from starting to crashed
2012-11-01T15:24:31+00:00 heroku[router]: Error H10 (App crashed) -> GET jeppestrom.dk/ dyno= queue= wait= service= status=503 bytes=
2012-11-01T15:24:31+00:00 heroku[nginx]: 90.185.25.178 - - [01/Nov/2012:15:24:31 +0000] "GET / HTTP/1.1" 503 601 "-" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.94 Safari/537.4" jeppestrom.dk
2012-11-01T15:24:32+00:00 heroku[router]: Error H10 (App crashed) -> GET jeppestrom.dk/favicon.ico dyno= queue= wait= service= status=503 bytes=
2012-11-01T15:24:32+00:00 heroku[nginx]: 90.185.25.178 - - [01/Nov/2012:15:24:32 +0000] "GET /favicon.ico HTTP/1.1" 503 601 "-" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.94 Safari/537.4" jeppestrom.dk
2012-11-01T15:24:24+00:00 heroku[web.1]: State changed from crashed to down

My package.json:

{
"name":"app.js",
"version":"0.1.0",
"engines": {
    "node": "0.6.x",
    "npm":  "1.0.x"
},
"dependencies": {
    "express":"2.5.9",
    "jade":"0.26.1",
    "emailjs":"*"
}
} 
```

非常感谢。

# python - 将文本从 Word 复制到 Python 不需要转义字符，为什么？

> ID：13181465
> 
> 赞同：2
> 
> 时间：2012-11-01T16:31:04.533
> 
> 标签：python, exception, python-3.x, ms-word

我是 Python 新手，最近在我正在上的一门课上，我们开始了巨龙领域教程。[http://inventwithpython.com/chapter6.html](http://inventwithpython.com/chapter6.html)我决定独自完成这个小项目，制作一个半长的冒险故事。大约进行到一半时，我开始将文本粘贴到 Word 中。（我使用的是我之前在 Flash 中制作的冒险故事，所以所有的测试都已经写好了）。我开始粘贴到 word 中，这样我可以更快地替换 ' with ' 和 "with \"，因为它们有很多而且占用了很多时间。当我运行它时，我发现了一些奇怪的东西。我直接从 Flash 复制的文本需要反斜杠才能正确显示 ' 或 "，但我从 Word 复制的文本不需要。当我运行它时，我从 word 复制的文本会显示反斜杠。

例如：

```
“这是新人？”金发男子问道。
“是的，莉莉，”雷切尔兴高采烈地回答。

```

这就是我运行它时将显示的内容。如果我取出反斜杠并运行它，它将打印：

```
“这是新人？” 金发女郎问道。
“是的，莉莉，”雷切尔高兴地回答。

```

但是我从 Flash 复制的文本可以正常使用反斜杠，如果我将它们取出，它会导致某种错误。

有人可以向我解释为什么如果我从 Word 复制文本就不需要反斜杠了吗？如果有人想知道我正在使用 Python 3.2.2，我还没有在 2.7 中对其进行测试。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T16:35:40.370

Word 是一个糟糕的代码编辑器。

引号被替换为“花式”引号，而不是 ASCII 字母表中的普通双引号，而是 Unicode 标准中其他地方的双引号：

```
>>> u'”'
u'\u201d' 
```

我的 Unicode 应用程序告诉我这是正确的双引号符号；Word 通常也使用匹配的左双引号符号。

如果要在 python 字符串中使用双引号，只需将整个字符串括在*单*引号中：

```
'I am a string with a double (") quote' 
```

或者您可以使用三重引用：

```
"""I am a string with both singe (') *and* double (") quotes""" 
```

这样你就不必为所有这些逃跑而烦恼。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T16:35:01.980

这是因为`\`转义了`"`, 并且 python 没有在字符串中找到任何右引号，所以它会引发`EOL`错误：

```
In [19]: "This the newbie\ "  #add a space after `\` and it works
Out[19]: 'This the newbie\\ '

In [20]: "This the newbie\" 
------------------------------------------------------------
   File "<ipython console>", line 1
     "This the newbie\"
                       ^
SyntaxError: EOL while scanning string literal

In [22]: "\"This the newbie\"" 
Out[22]: '"This the newbie"' 
```

# html - 在构建 BlackBerry WebWorks 或 PhoneGap 应用程序时如何缩短开发周期？

> ID：13181470
> 
> 赞同：1
> 
> 时间：2012-11-01T16:31:16.763
> 
> 标签：html, cordova, blackberry-webworks, blackberry-10

我有兴趣了解 WebWorks 开发人员如何通过使用任何巧妙的构建过程/测试技术在他们的开发周期中节省时间。

您会推荐哪些提示和技巧来帮助减少构建和测试 WebWorks（或 PhoneGap）应用程序所需的时间？

例如，这是来自 Demian Borba的一个很好的建议 ( [http://dborba.com/?p=274 )：](http://dborba.com/?p=274)

1.  构建您的应用程序一次，但将其配置为从您的开发 Web 服务器加载其起始页面
2.  对该内容进行更改，它们将在您重新启动应用程序时反映出来（无需重新编译/重新部署应用程序）
3.  甚至可以使用 Livereloader 让它更快

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T11:49:37.743

如果你使用 ant，这里有一些你会发现有用的目标：

```
<target name="zip" depends="init" description="Archive your files before building the bar" >
    <zip
        destfile="${build.dir}/${type.name}.zip"
        basedir="${basedir}"
        excludes="*.project,*.settings/,.*properties,*.svn,*.svn/*, builder/, .gitignore, .git/*"
        includes="*,WebContent/"
    />
</target>

<target name="bar" depends="zip" description="create the bar file" >
    <exec executable="${bbwp}">
        <env key="JAVA_HOME" path="${sdk.JAVA_HOME}" />
        <arg value="${build.dir}/${type.name}.zip"/>
        <arg line="-o '${build.dir}'" />
        <arg line="-v" />

        <!-- Allows debugging on port 1337 -->
        <arg line="-d" />
        <!-- Sign to Appworld -->
        <!-- <arg line="-g ${keyPass} - -buildId 10" />  -->
    </exec>
</target>

<target name="install" depends="bar"  description="Deploy the the .bar file to your simulator. The old application is automatically uninstalled." >
    <java jar="${BarDeploy.dir}/BarDeploy.jar"
    fork="true"
    maxmemory="512M"
    >
        <env key="JAVA_HOME" path="${sdk.JAVA_HOME}" />
        <arg value="-installApp" />
        <arg value="-launchApp" />
        <arg value="-password" />
        <arg value="${password}" />
        <arg value="-device" />
        <arg value="${simIP}" />
        <arg value="-package" />
        <arg value="${bar.file}" />
    </java>
</target>

<target name="uninstall" description="Uninstall an application from the Simulator. " >
    <java jar="${BarDeploy.dir}/BarDeploy.jar"
    fork="true"
    maxmemory="512M"
    >
        <env key="JAVA_HOME" path="${sdk.JAVA_HOME}" />
        <arg value="-uninstallApp" />
        <arg value="-password" />
        <arg value="${password}" />
        <arg value="-device" />
        <arg value="${simIP}" />
        <arg value="-package" />
        <arg value="${bar.file}" />
    </java>
</target> 
```

这里是一个 windows 环境变量的例子：

```
<property name="password" value=""/>
<property name="simIP" value="169.254.0.1" />
<property name="keyPass" value="" />

<property name="sdk.HOME" location="C:\Program Files\Research In Motion\BlackBerry 10 WebWorks SDK 1.0.1.8" />
<property name="build.dir" location="${basedir}\build" />
<property name="bar.file" location="${build.dir}\device\${type.name}.bar" />
<property name="sdk.JAVA_HOME" location="C:\Program Files\Java\jre6" />
<property name="bbwp" location="${sdk.HOME}\bbwp.bat" />
<property name="BarDeploy.dir" location="${sdk.HOME}\dependencies\tools\lib" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T08:41:10.903

黑莓刚刚发布了官方的[Ant 构建脚本](https://github.com/blackberry/BB10-WebWorks-Community-Samples/tree/master/Ant-Build-Script)

# html - 不同的行为流体布局

> ID：13181471
> 
> 赞同：0
> 
> 时间：2012-11-01T16:31:18.907
> 
> 标签：html, css, layout, dynamic

我正在寻找前段时间看到的布局，但我忘记添加书签了。它有 3 个主要列，但在调整大小时，它变为 2 个，第 3 个下降到下一行。这**不是**通过溢出调整大小的正常布局。

调整大小时，3 个列实际上保持相同的宽度，直到达到某个限制，每个列的宽度为 33%，但增加了高度。唯一明显改变的是文本大小。然后，在调整大小的某个时刻，3 个中的一个下降到下一行，使顶部的 2 个调整大小以填充整个宽度（50% 和 50%），而底部的一个则填充100% 的新行。我尝试了很多谷歌搜索，但由于我不是本地人，我似乎无法找到*准确*的术语来找到它。我知道它在演示中完美运行，并且仅使用 CSS 和 HTML。

编辑，他们三个的容器一直保持相同的宽度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:36:18.260

媒体查询听起来像是您所追求的。您可以根据浏览器窗口的宽度指定不同的样式。它当然可以用来实现你所追求的。

例如。假设您想定位宽度大于 900 像素的设备，您可以使用：

```
@media screen and (min-width: 900px) {
  .class {
    background: #666;
  }
} 
```

[您可以在此处](http://webdesignerwall.com/tutorials/css3-media-queries)找到有关媒体查询的更多信息

# javascript - 如何根据表单值创建自定义 JSON？

> ID：13181473
> 
> 赞同：0
> 
> 时间：2012-11-01T16:31:30.040
> 
> 标签：javascript, jquery

我正在根据下面的动态表单值创建 JSON，当用户提交时，我在 #results 中显示 json 提要

生成JSON时是否也可以获取表单中的所有值，我想获取

*   姓名、身份证、
*   标题信息，
*   输入值等

    然后按以下顺序创建/显示 JSON？

工作版本可以在这里查看：

[http://jsfiddle.net/dev1212/GP2Y6/25/](http://jsfiddle.net/dev1212/GP2Y6/25/)

目前它没有重新调整任何值并得到一些未定义的..我尝试过的代码如下

```
<script>

    x = function(selector){

        var attrs = [];

        $(selector + " input").each(function(){

            var attrObject = {};

            $(this.attributes).each(function(index, attr){

                attrObject[attr.name] = attr.value;
 attrObject[attr.va] = attr.value;
                //console.log(attrObject)
            });

            attrs.push(attrObject);
            attrObject = {};

        });

        return attrs;
    }

    $(document).ready(function(){

        alert(JSON.stringify(x("#myform")));

    });

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:38:33.880

```
<script type="text/javascript" src="/www/include/js/jquery.min.js"></script>

<script>

    x = function(selector){

        var attrs = [];

        $(selector + " input").each(function(){

            var attrObject = {};

            $(this.attributes).each(function(index, attr){

                attrObject[attr.name] = attr.value;
                //console.log(attrObject)
            });

            attrs.push(attrObject);
            attrObject = {};

        });

        return attrs;
    }

    $(document).ready(function(){

        alert(JSON.stringify(x("#myForm")));

    });

</script>

<form id="myform" class="form-wd">

    <input class="ui-dform-text" type="text" title="data for network.node1.eth0.ipaddr" name="network.node1.eth0.ipaddr">

</form> 
```

# c++ - 如何使用 OpenGL 在 Qt 界面上显示 IPLImage 流进行渲染？

> ID：13181475
> 
> 赞同：1
> 
> 时间：2012-11-01T16:31:40.147
> 
> 标签：c++, qt, opengl, opencv, iplimage

将 IplImage 集成和显示到 Qt GUI 中的最佳方法是什么？这可以使用OpenGL完成吗？如果是，如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:33:03.487

好吧，我在这里回答我自己的问题。
一年以来，我一直在使用 OpenCV，并且很多时候我不得不编写打开视频文件并将其流式传输的代码。
最近，我一直在使用 Qt 来提供高级 gui，并且我想出了一个使用 OpenGL 在 Qt GUI 上显示 IplImages 的解决方案（我花了很多时间挣扎，但最终成功了）。尽管可以使用 Qt highgui 支持构建 OpenCV，但我热衷于学习一点 OpenGL 并在我的应用程序中使用它。
我认为这对于需要一个基本框架来为其应用程序运行视频的人会有所帮助。
这个基本框架可用于广泛的应用，如视频内容分析、人脸识别、模式识别等。从更广泛的意义上说，这基本上是一个没有音频支持的视频播放器。因此，如果您愿意，可以添加音频支持并使其成为视频播放器。它将播放几乎所有格式，因为 opencv 使用 ffmpeg 播放视频。我已经为它创建了一个 C++ 库，我非常广泛地使用它：

主要课程有：

```
QVideo : The main widget, providing functionality to open a video/rtsp stream and play it  
QIplImage: The core display widget. It's a QGLWidget which renders an IplImage
BackgroundWorker: This is a thread which runs in the background to retrieve images
from the stream. It is mandatory to run the frame grabber in a background thread,
otherwise it interferes with the GUI thread. All the image processing can be done in 
this thread 
```

提供了源代码，因此您可以根据需要对其进行修改。安装库后，您可以在 qt 应用程序中使用它，如下所示：

```
//Create an object
QVideo* video=new QVideo("Name",);
//set geometry (optional)
setCentralWidget(video); 
```

要构建库，您需要安装 qt 和 opencv（支持 ffmpeg）。该库根据体系结构安装在 /usr/lib 或 /usr/lib64 中。包含文件安装在 /usr/local/include 当然，如果需要，所有这些都可以在项目文件中进行更改。要安装，只需解压缩包，然后运行 ​​qmake、make 和 sudo make install。注意：该项目是为 unix 配置的，需要针对 windows 构建进行更改。给我留言以获取更多信息。

# asp.net - 在网站上下载许多文件的最佳方式

> ID：13181477
> 
> 赞同：1
> 
> 时间：2012-11-01T16:31:46.860
> 
> 标签：asp.net, web-applications, web, web-application-design

我正在设计一个网站，让用户将本地文件夹同步到在线文件夹（有点像保管箱）。

我试图找到一种方法来避免开发本地工具来进行下载和同步。并以某种方式在线进行。

是否可以在某个目录树中下载多个文件？网站可以免费写入本地目录吗？

zip 文件不是一个选项，因为文件批次可能会变得非常大。

编辑：同步不应该定期发生。就在用户登录网站时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T04:32:10.027

我的建议是使用 WebDAV 之类的东西，然后看[这里](https://en.wikipedia.org/wiki/WebDAV)

# javascript - 未定义的地理位置

> ID：13181479
> 
> 赞同：0
> 
> 时间：2012-11-01T16:32:00.910
> 
> 标签：javascript, jquery, google-maps, google-maps-api-3, geolocation

我正在尝试使用 google 的 jsapi 获取客户端的当前位置，但我将 'google.loader' 设置为未定义。知道为什么会发生这种情况吗？下面给出的是我使用的代码片段。

```
$.getScript('http://www.google.com/jsapi', function() 
{
if(google.loader.ClientLocation) {
var visitor_lat = google.loader.ClientLocation.latitude;
var visitor_lon = google.loader.ClientLocation.longitude;
var visitor_city = google.loader.ClientLocation.address.city;
var visitor_region = google.loader.ClientLocation.address.region;
var visitor_country = google.loader.ClientLocation.address.country;
var visitor_countrycode = google.loader.ClientLocation.address.country_code;
console.log("Your location is: " + visitor_country);
}}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:34:24.380

您只加载`http://www.google.com/jsapi`基本`google`库，您可以使用该库加载实际的谷歌模块，如“ClientLocation”。

使用类似的东西：

```
google.load("my_library", function () {
    google.my_library; // is not available
} 
```

更改`my_library`为您需要的任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T12:03:27.957

我今天也遇到了同样的问题。

如果您使用的是手机浏览器，并且您禁用了浏览器的本地化，则 api 无法正确加载并引发 js 错误（解析错误）。

我已经用 iphone 和 android 手机对其进行了测试。

打开浏览器的本地化并正常工作！

# java - 如何近似矢量旋转

> ID：13181480
> 
> 赞同：0
> 
> 时间：2012-11-01T16:32:07.483
> 
> 标签：java, vector, rotation, double, trigonometry

我有一个以速度 V(vectorX, vectorY) 移动的点。最初 V = (1, 0)。我反复使用随机角度旋转它：

vectorX = vectorX * Math.cos(radianAngle) - vectorY * Math.sin(radianAngle);
vectorY = vectorX * Math.sin(radianAngle) + vectorY * Math.cos(radianAngle);

旋转不应调整矢量长度。但是这个解决方案减少了我的向量长度加班：

0.9999999164020167
0.9989817245134542
0.9990928546670482
0.9990920078686215
0.9990307271300217
0.9990123195664165
0.9990122314933966
0.9958140526821458
0.9953881407397223
0.9953002497794944
0.9953739080312035
0.9953762669739241
0.9951229086200286
0.9951022010798389
0.9950609497602859
0.9950608230271147
0.9948941861659032
0.9949385678072231

我知道 sin 和 cos 函数给出了近似的结果。但是为什么我的长度会变短呢？以及如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T16:34:41.957

欢迎来到非精确浮点运算的世界。你失去了精确度。这是生活中的事实。

您可能应该将初始固定矢量旋转一个增加的角度。

IE：

```
angle = angle + radianAngle;
vectorX = initialVectorX * Math.cos(angle) - initialVectorY * Math.sin(angle);
vectorY = initialVectorX * Math.sin(angle) + initialVectorY * Math.cos(angle); 
```

这样你就不会累积精度损失。

# java - 中继器中的 JSF 映射绑定

> ID：13181483
> 
> 赞同：1
> 
> 时间：2012-11-01T16:32:13.223
> 
> 标签：java, jsf, el

这是我正在尝试做的事情：

```
<ui:repeat value="#{foo}" var="keyprefix">
  <p:inputText value="#{someBean.someMap[keyprefix + 'somesuffix']}" />              
</ui:repeat> 
```

我试过使用`fn:join`which 不起作用。我尝试使用`.concat()`但我不在 2.2 上，我仍在使用 2.1。有没有一种简单的方法可以做到这一点我错过了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:38:08.923

您可以使用`<c:set>`通常的方式通过在字符串文字中内联 EL 表达式来准备动态映射键。

```
<c:set var="key" value="#{keyprefix}somesuffix" />
<p:inputText value="#{someBean.someMap[key]}" /> 
```

# jquery - JQuery 旋转文本片段/短语

> ID：13181485
> 
> 赞同：0
> 
> 时间：2012-11-01T16:32:14.670
> 
> 标签：jquery, html, fadein, fadeout

我想仅使用 HTML、CSS 和 JQuery 来旋转文本片段，并对短语产生淡入/淡出效果，以便一个淡入淡出，而下一个淡入淡出。我有以下代码，但不能弄清楚在哪里添加我的淡入/淡出效果。或者，有没有更好的方法来旋转带有淡入/淡出效果的文本片段？我想远离插件，因为使用资源繁重的插件可能是矫枉过正。似乎我想要做的事情可以用一些原生的 JQuery 函数来完成。

**HTML：**

```
<h1>I like <span id="phrase">apples</span>.</h1> 
```

**Javascript：**

```
$(document).ready(function() {
    function setRandomPhrase() {
        // Set phrases into an array
        var phrases = new Array(
            "oranges",
            "pears",
            "strawberries",
            "grapes",
            "pineapples",
            "bananas"
        );

        // Selects a random phrase
        var random = Math.floor(Math.random()*phrases.length);
        // Sets the area to use that random phrase
        $("#phrase").text(phrases[random]);
    }
    // Fire the function every 5 seconds...
    setInterval(setRandomPhrase,5000);
}); 
```

这是一个半工作示例： http: [//jsbin.com/ayukac/1/edit](http://jsbin.com/ayukac/1/edit) ...只需要帮助确定在哪里添加淡入淡出效果。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:42:46.517

像这样的东西？淡出当前水果，然后在淡出完成后，更新值并淡入。

...

```
var random = Math.floor(Math.random()*phrases.length);

$("#phrase").fadeOut("slow",function(){
    $("#phrase").text(phrases[random]).fadeIn("slow");
}); 
```

...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T16:49:27.187

[http://jsbin.com/ayukac/2/edit](http://jsbin.com/ayukac/2/edit)

我还添加了一个基本检查，以防止同一单词在您的随机选择中连续出现两次。

```
var random = Math.floor(Math.random()*phrases.length);

while (phrases[random] == $("#phrase").text())
  {
     var random = Math.floor(Math.random()*phrases.length);
  }
// Sets the area to use that random phrase
$("#phrase").fadeOut('slow',function(){$("#phrase").text(phrases[random]).fadeIn('slow')}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T16:44:32.550

基本`setInterval`功能是这样的：

```
setInterval(function() {
       // Do something every 5 seconds
 }, 5000); 
```

所以你在`setRandomPhrase`火灾中所做的一切也是如此。你需要做的是添加这个：

```
$("#phrase").fadeOut("slow",function(){
      $("#phrase").text(phrases[random]).fadeIn("slow");
} 
```

而不是这个：

```
$("#phrase").text(phrases[random]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T17:41:40.867

如果您使用 jQuery，为什么不能使用 jQuery 插件。如果您喜欢这样做，您可以使用以下链接。 [网络代码](http://jonmifsud.com/open-source/jquery/jquery-webticker/)

# android - 使用 tabhost 在列表视图中添加图像

> ID：13181487
> 
> 赞同：0
> 
> 时间：2012-11-01T16:32:26.697
> 
> 标签：android, listview, android-tabhost

这是MainActivity的.xml，它由两个tabhost组成，第一个包含一个动态列表视图。我想在列表视图的每个项目的开头添加一个图像，如图标或徽标。

我必须对 .xml 进行哪些修改。谢谢

这是 main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
         android:id="@android:id/tabhost"
         android:layout_width="fill_parent"
         android:layout_height="fill_parent">
    <LinearLayout
            android:orientation="vertical"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:padding="5dp">

        <TabWidget
                android:id="@android:id/tabs"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"/>

        <FrameLayout
                android:id="@android:id/tabcontent"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:padding="5dp"/>

    </LinearLayout>
</TabHost> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:39:41.603

您可以找到将自定义 ArrayAdapter 与 ListView 一起使用的教程：[http](http://www.ezzylearning.com/tutorial.aspx?tid=1763429) ://www.ezzylearning.com/tutorial.aspx?tid=1763429 。
这是另一个教程[http://www.vogella.com/articles/AndroidListView/article.html](http://www.vogella.com/articles/AndroidListView/article.html)。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T16:35:41.553

您需要为您的适配器设置一个适配器`ListView`，然后在`getView`适配器中膨胀或以编程方式创建一组视图，这些视图代表`ListView`.

你应该*谷歌*`ListView`关于如何为s设置适配器的教程

# excel - 在 Excel 中创建自定义函数

> ID：13181494
> 
> 赞同：5
> 
> 时间：2012-11-01T16:32:56.810
> 
> 标签：excel, excel-formula

这似乎是很明显的事情，excel*必须*有这个功能，我就是找不到。

如何在不使用 VBA 的情况下创建自定义函数？（VBA 太大了，会导致安全警告等）。

例如，我有一个包含几个非常复杂的公式的电子表格。这些公式中的每一个都在几列中复制。每列都有数百个条目，因此每个条目都被复制了数百次。如果我调整一些东西，那么我必须手动填写或将我的更改从一列复制到另一列。

一个简单的看起来像这样：
=(Payment1 - F$12)*12 + ($D21-H21)
但我想做的是：
=MyFunction(f$12,$D21,H21)
并有实际的公式“MyFunction”在某个地方只写过一次。

我发现了一些接近给我想要的东西的东西。例如，在表格中，Excel 将自动将公式中的更改复制到列的其余部分，从而节省您手动选择范围并执行“向下填充”的步骤。

它还将允许命名单元格的相对引用，这似乎相当于用户定义的无参数函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T20:00:51.577

如果您可以使用文本来创建公式，那么您可以定义一个*名称*来评估函数。

在单元格 A2 中，创建一个名称**EvalAbove**，并在引用到中，输入`=evaluate(A1)`

![新名称对话框](../Images/db19e1f3cbab3644b2a2f926f5793a38.png)

这样，您可以构造一个公式，
例如 B1 包含`SUM`，B2 包含`=("="&B1&"(A2:A5)")`
，然后在 B3 中，您可以输入`=EvalAbove`

这意味着如果您更改 B1 中的公式名称，则 B2 将更改以显示更改后的公式，B3 将更改以显示结果。

*   请注意，这仍然算作启用宏的工作簿，但没有 VBA 代码，只是命名范围

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-22T10:41:33.457

如果我解释正确，您可以为您展示的示例执行此操作。如果不是，您可以稍微重新排列以符合要求

你的函数有三个参数：

第一个来自当前列的第 12 行 第二个来自当前行的 D 列 第三个来自当前行右侧的第二列 我假设 Payment1 已经是一个命名变量？

将光标设置在 F21 中，然后定义此名称

MyFunction =(Payment1 - F$12)*12 + ($D21-H21)

这会将参数设置为来自所示位置

为了更好地理解这一点，切换到 RC 模式并将公式键入为：

```
 =(Payment1 - R12C)*12 + (RC4-RC[+2]) 
```

您现在可以通过 F 列向下传播公式

=我的功能

它将始终使用相应 F12 列 Dxx 和列 Hxx 中的值

如果将公式拖到下一列，它将使用 G12、Dxx 和 Ixx

如果要更改公式，请在定义名称空间中编辑它

这是 Excel 中不能有非 vba UDF 的规则的一般例外。通常在 Excel 中，您想要作为函数“参数”的内容实际上位于可以相对解决的固定位置（行或列）。

例如，您经常想在左侧的单元格上执行 udf

因此，一个 udf 给出左侧单元格的立方根将是一个命名公式，如下所示：

立方根 =(RC[-1])^(1/3)

或者在 a1 表格中将光标设置在 B1 中并输入 =(A1)^(1/3) 并且 Excel 会在内部将其转换为 RC 表格

对于三个参数 - 使用三列

它可以工作并且不会遇到有关评估（）的波动性问题

是的，我知道这是一个旧帖子，但它可能会帮助遇到同样问题的人。

鲍勃·J。

# objective-c - 在 Xcode 4.3 中从 xib 调整和放置 UIView

> ID：13181496
> 
> 赞同：0
> 
> 时间：2012-11-01T16:32:58.330
> 
> 标签：objective-c, xcode

如果已经有这个问题的答案，请原谅我，但我看着他们并不确定他们中的任何一个。这是我的问题：

我有一个 xib 文件，它有自己的视图（超级视图）。在超级视图上，我在顶部放置了一个分段控件，并在分段控件下方放置了一个较小的 UIView。使用故事板中的 Autosizing Control，我能够使视图显示在我期望的位置。现在我在 Xcode 4.3 中使用 xib 文件，我发现 Autosizing Control 没有显示。我解决了这个问题，现在可以使用 Autosizing Control。但是，我仍然无法让视图显示在我期望的位置。

使用自动布局，至少我的视图是我想要的。取消选中 Autolayout 并使用 Autosizing Control，看起来超级视图（或空白）现在被推到了我的分段控件旁边的左上角。

我是 XCode 的新手，新的变化真的给我带来了麻烦。有人知道如何让我的子视图显示在我的分段控制下的超级视图中吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T14:32:52.770

好的。我学过！你真的不想取消选中自动布局。而是保留 Autolayout 并学习如何处理新的约束。容易得多；好多了。只需成为约束专家，新的自动布局（默认）会为您处理一切（包括自动旋转）。超乎想象的光滑！！！！

# c# - 为什么 OrderBy 返回 IOrderedEnumerable 比排序快得多？

> ID：13181498
> 
> 赞同：20
> 
> 时间：2012-11-01T16:33:05.173
> 
> 标签：c#, .net, linq, sorting, collections

[这是这个优秀问题C# Sort and OrderBy comparison](https://stackoverflow.com/questions/1832684/c-sharp-sort-and-orderby-comparison)的后续。我将使用相同的示例：

```
List<Person> persons = new List<Person>();
persons.Add(new Person("P005", "Janson"));
persons.Add(new Person("P002", "Aravind"));
persons.Add(new Person("P007", "Kazhal")); 
```

争论的方法是：

```
persons.Sort((p1, p2) => string.Compare(p1.Name, p2.Name, true));
//and
persons.OrderBy(n => n.Name); 
```

首先让我说，我知道没有任何显着的性能差异需要担心。但我很想知道为什么它`OrderBy`的表现比`Sort`. 我正在使用@phoog 在原始问题中发布的答案。

```
private void button1_Click(object sender, EventArgs e)
{
    IEnumerable<Person> people;

    BenchMark(persons => persons.Sort((p1, p2) => string.Compare(p1.Name, p2.Name, true)));

    BenchMark(persons => people = persons.OrderBy(n => n.Name));
}

private static Random randomSeed = new Random();
public static string RandomString(int size, bool lowerCase)
{
    var sb = new StringBuilder(size);
    int start = (lowerCase) ? 97 : 65;
    for (int i = 0; i < size; i++)
    {
        sb.Append((char)(26 * randomSeed.NextDouble() + start));
    }
    return sb.ToString();
}

private static void BenchMark(Action<List<Person>> action)
{
    List<Person> persons = new List<Person>();
    for (int i = 0; i < 10000; i++)
    {
        persons.Add(new Person("P" + i.ToString(), RandomString(5, true)));
    }
    List<Person> unsortedPersons = new List<Person>(persons);

    Stopwatch watch = new Stopwatch();
    for (int i = 0; i < 100; i++)
    {
        watch.Start();

        action(persons);

        watch.Stop();
        persons.Clear();
        persons.AddRange(unsortedPersons);
    }

    MessageBox.Show(watch.Elapsed.TotalMilliseconds.ToString());
} 
```

**结果：**

```
Sort() => 3500 ~ 5000 ms
OrderBy() => 0.2 ~ 1.5 ms 
```

尽管即使我最初测试的列表较小，差异也很大，但随着集合的大小增加，它变得越来越明显。可能是我遗漏了一些理解 .NET 集合的关键，但我的想法是，既然`Sort`作用于现有的.NET 集合，与作用于相同集合的（在我们的例子中）`List<T>`相比，`OrderBy`它在处理中的开销（如果有的话）应该更小，但是必须返回另一个集合。但仍然表现得要好得多。与类型相比可能会有一定的开销，但无论如何都会对现有列表起作用！此外，我很高兴看到一种方法比现有的 .NET 方法运行得更快。`List<T>``persons`[`IOrderedEnumerable<T>`](http://msdn.microsoft.com/en-us/library/bb534852.aspx)`OrderBy``List<T>``IEnumerable<T>``Sort``Linq`

原始问题中的所有答案都`Sort`与`OrderBy.ToList`我认为会有一些开销进行比较，因此或多或少地表现相同。

实施差异可能是什么？

* * *

**编辑：**好的，我学到了一些新东西。以下是我确认延期执行的方式。

```
private void button1_Click(object sender, EventArgs e)
{
    BenchMark(persons =>
    {
        persons.Sort((p1, p2) => string.Compare(p1.Name, p2.Name, true));
        foreach (var item in persons)
        {
            break;
        }
    });

    BenchMark(persons =>
    {
        IEnumerable<Person> people = persons.OrderBy(n => n.Name);
        foreach (var item in people)
        {
            break;
        }
    });
} 
```

`Sort`运行时间为 4000 - 5000 毫秒，而`OrderBy`运行时间略高于 5000 毫秒。所以确实我的结论是错误的。一旦我开始列举这些收藏品，它们的表现就相当了。我更喜欢anyday的语法`OrderBy`:)

**编辑 2：我刚刚发现这与**[此](https://stackoverflow.com/questions/10299464/why-is-array-sort-so-slow-compared-to-linq?lq=1)完全相同。但是这里有一个[更有趣的问题，一般来说是关于延迟执行，](https://stackoverflow.com/questions/10110013/order-of-linq-extension-methods-does-not-affect-performance)虽然不是完全关于排序。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-11-01T16:34:26.630

在这种情况下，`OrderBy`速度要快得多，因为您实际上并没有执行它。

在您枚举结果之前，查询是*deferred*，因此它实际上从未进行排序。在您实际枚举结果之前，`IOrderedEnumerable<T>`不会处理输入并进行任何形式的排序。

尝试将基准更改为：

```
 BenchMark(persons => people = persons.OrderBy(n => n.Name).Count()); 
```

该`Count()`调用将强制排序实际发生（因为它需要枚举`IOrderedEnumerable<T>`以生成计数），这应该会显着平衡您的时间。

大多数 LINQ 扩展方法都以这种方式工作 - 直到您枚举它们（通过`Count()`、调用`ToList()`或仅在正常`foreach`循环中使用它们等），它们的影响可以忽略不计，因为除了构建可枚举之外，它们实际上并没有直接做任何事情。与其他基准进行比较的原因`OrderBy(...).ToList()`是，添加`ToList()`强制`OrderBy`完全执行并实际排序结果。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-01T16:34:08.437

`OrderBy()`与大多数 LINQ 方法一样，使用延迟执行。

在您枚举其结果之前，它实际上并没有做任何事情。

要正确衡量其性能，您可以调用`.OrderBy(...).Count()`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T19:39:36.407

`OrderBy()`不创建排序列表。

它创建一个 IEnumerable 对象，当您枚举它时，它会生成一个排序列表。在您枚举列表之前，不会发生实际的排序。

# mysql - 循环遍历mysql语句中的数组字段？

> ID：13181500
> 
> 赞同：0
> 
> 时间：2012-11-01T16:33:19.263
> 
> 标签：mysql, arrays, loops

我得到了一个有点奇怪的数据库，但我无法更改它。有一个字段设置为数组，但包含我需要在 where 子句中访问的 ID。这是设置的字段：

```
TABLE: PROMOS
promo_id   |    contract_ids
-----------------------------
 1               23,34,54
 2               13,34,55
 3               20,30 
```

我需要做一个 sql 查询来获取合同 id = 34 的所有 promo_ids

```
mysql_query("SELECT promo_id FROM Promos WHERE contract_ids = '34' 
```

有没有办法做到这一点？？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T16:35:57.357

```
SELECT promo_id FROM Promos 
WHERE FIND_IN_SET(34, contract_ids) > 0 
```

请参阅[FIND_IN_SET 文档](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set)

# c# - 访问数据绑定 GridView 中的组标题子元素

> ID：13181506
> 
> 赞同：1
> 
> 时间：2012-11-01T16:33:41.787
> 
> 标签：c#, xaml, windows-8, microsoft-metro, windows-runtime

我正在开发一个带有数据绑定 gridview xaml 控件的 Windows 8 Metro 应用程序。

![在此处输入图像描述](../Images/a795b92fd2fd2df9818e134df328e1c0.png)

我在组的标题中添加了一个名为 progressRingGroup 的环形进度条，如下所示。

```
<ProgressRing x:Name="progressRingGroup" IsActive="True" Visibility="Visible" Width="16" Height="16" Margin="0,-7,0,0"/> 
```

我想从我的代码中以编程方式访问 ring-progress-bar（所以我可以启动/停止它）但是由于我的网格视图是数据绑定的，我不知道该怎么做。

我在 gridview 中有多个组，需要分别访问所有组。

这是我的 gridview 的 groupstyle xaml 定义；

```
<GridView.GroupStyle>
            <GroupStyle>
                <GroupStyle.HeaderTemplate>
                    <DataTemplate>
                        <Grid Margin="1,0,0,6">
                            <Button
                                AutomationProperties.Name="Group Title"
                                Click="Header_Click"
                                Style="{StaticResource TextPrimaryButtonStyle}" >
                                <StackPanel Orientation="Horizontal">
                                    <ProgressRing x:Name="progressRingGroup" IsActive="True" Visibility="Visible" Width="16" Height="16" Margin="0,-7,0,0"/>
                                    <TextBlock Text="{Binding Title}" Margin="6,-7,10,10" Style="{StaticResource GroupHeaderTextStyle}" />
                                    <TextBlock Text="{StaticResource ChevronGlyph}" FontFamily="Segoe UI Symbol" Margin="0,-7,0,10" Style="{StaticResource GroupHeaderTextStyle}"/>                                        
                                </StackPanel>
                            </Button>
                        </Grid>
                    </DataTemplate>
                </GroupStyle.HeaderTemplate>
                <GroupStyle.Panel>
                    <ItemsPanelTemplate>
                        <VariableSizedWrapGrid ItemWidth="75" ItemHeight="150" Orientation="Vertical" Margin="0,0,80,0" MaximumRowsOrColumns="3"/>
                    </ItemsPanelTemplate>
                </GroupStyle.Panel>
            </GroupStyle>
        </GridView.GroupStyle> 
```

帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T00:26:35.020

如果您希望能够控制每个进度环的 IsActive 属性，请将 bool 属性添加到您的组数据模型，并将 IsActive 绑定到该属性。这样您就可以控制每个 ProgressRing，而无需以编程方式访问所有它们。

例如：

```
<ProgressRing x:Name="progressRingGroup" IsActive="{Binding GroupLoading}" Visibility="Visible" Width="16" Height="16" Margin="0,-7,0,0"/> 
```

如果您仍想以编程方式访问每个，您可以`Loaded`在 DataTemplate 中为 ProgressRing 分配一个事件，当事件触发时，获取对环（发送方）的引用。

# visual-studio - 防止在项目文件中生成解决方案相对 nuget 导入？

> ID：13181510
> 
> 赞同：0
> 
> 时间：2012-11-01T16:34:08.720
> 
> 标签：visual-studio, project, nuget, solution

在位于不同目录的不同解决方案之间使用共享项目时，我遇到了 nuget 数据包管理问题。一种解决方案是使用 nuget，另一种则不是。问题是数据包管理器在 .csproj 文件中添加了一行：

![一只忙碌的猫](../Images/d8290601c2baa480865d316f4a620ae0.png)

现在由于 nuget 包管理只在共享项目中使用，解决问题的方法是将 $(SolutionDir) 更改为 $(ProjectDir)。这工作并解决了现在的问题。

现在，每当重新打开启用了 nuget 数据包管理的解决方案时，它会自动将同一行（如上图所示）添加到共享项目 .csproj 文件中，这再次中断从另一个解决方案加载项目。

如何防止自动生成该导入子句，或者是否有其他优雅的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T07:27:44.920

在不使用 NuGet 的解决方案中启用 NuGet 包还原应该可以解决您的问题（右键单击解决方案，启用包还原）。虽然您没有在该项目中使用 NuGet，但打开该选项并没有什么坏处。

就我个人而言，我尽量不要从多个解决方案中引用同一个项目，而是将它们转换为私有 NuGet 包。像这样进行开发可能会有点痛苦，因为您需要创建新包，部署然后将其安装到您的其他项目中。但它解决了许多其他令人头疼的问题，例如您当前遇到的问题以及让开发人员在签入时意外破坏其他项目。

# javascript - 访问以前存储的访问者级自定义变量

> ID：13181514
> 
> 赞同：1
> 
> 时间：2012-11-01T16:34:12.643
> 
> 标签：javascript, google-analytics

在 Google Analytics 中，访问者级别的自定义变量存储在 cookie 中。

我希望**仅当之前没有数据存储在此插槽中时才**将一些数据存储在 GA 自定义变量中，即永远不要覆盖访问者级别的自定义变量。

有什么办法可以做到这一点，或者通过测试是否已经存储了一些数据，或者通过检索存储的值？

没有`_getCustomVar`，但是有什么方法可以让我自己做一些等效的事情而不“侵入”cookies？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T18:49:01.037

有[`_getVisitorCustomVar(index)`](https://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApiBasicConfiguration#_gat.GA_Tracker_._getVisitorCustomVar)。

例如：

```
_gaq.push(function() {
  var pageTracker = _gat._getTrackerByName(); // Gets the default tracker.
  var visitorCustomVar1Value = pageTracker._getVisitorCustomVar(1);
}); 
```

它仅适用于访问者级别的自定义 var，因为这是 GA cookie 中唯一存储的客户端大小`__utmz`。但这正是你要找的我猜。

如果您想查看是否已经设置了非访问者级别的自定义 var，那么您需要在设置自定义 var 以便以后检索时自己编写逻辑来存储单独的 cookie。但这应该是一件简单的事情，而且可能比侵入专有 cookie 更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-14T15:50:51.793

```
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'xxxxxxxxxxxxxxx']);

   _gaq.push(function() {
        var pageTracker = _gat._getTrackerByName();
        var userTypeVar = pageTracker._getVisitorCustomVar(1);
    });

  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script> 
```

# firefox - MVC3 到 MVC4 升级问题

> ID：13181521
> 
> 赞同：1
> 
> 时间：2012-11-01T16:34:34.283
> 
> 标签：firefox, asp.net-mvc-4

我今天更新了我的 MVC3 站点以使用 MVC4，但遇到了一个问题。导航到特定 url（MVC 区域的 url）时，我在 Firefox 中收到此消息

```
The page isn't redirecting properly

Firefox has detected that the server is redirecting the request for this address in a way that will never complete. 
```

这曾经与 MVC4 一起工作。Chrome 仍然适用于 MVC4。

有任何想法吗？

# android - 扩展 AbsListView 示例

> ID：13181526
> 
> 赞同：6
> 
> 时间：2012-11-01T16:34:53.773
> 
> 标签：android, listview, android-arrayadapter

我想构建一个自定义列表（Pinterest 网格布局）并且我想扩展`AbsListView`. 周围有很好的例子吗？这似乎非常非常困难。

谢谢托比亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-16T22:18:10.053

我创建了一篇关于这个的[**好帖子**](https://stackoverflow.com/questions/18557720/gridview-with-different-cells-sizes-pinterest-style)，发现[**这是最好的**](https://github.com/huewu/PinterestLikeAdapterView)。

但是，请注意，就像其他库一样，它也有自己的问题。我发现当你在它上面调用 notifyDatasetChanged() 时，你会在 getView 方法上得到奇怪的视图和位置对（关于这个问题的链接）[**。**](https://stackoverflow.com/questions/19243670/how-to-avoid-refreshing-of-cells-on-when-calling-notifydatasetchanged-for-pint)我也发现它根本不调用“onScrollChanged”方法（关于这个问题[**的链接）**](https://stackoverflow.com/questions/19134712/onscrollchanged-doesnt-get-called-for-pinterest-listview)

即使这个库很好，我也想看一个关于扩展 abdListView 的教程。

# c++ - 如何通过 boost asio 向客户端发送 OpenNI 深度图？

> ID：13181528
> 
> 赞同：1
> 
> 时间：2012-11-01T16:35:02.583
> 
> 标签：c++, boost, boost-asio, kinect, openni

我试图通过boost asio（没有序列化）向客户端发送kinect深度图是尝试异步还是同步更好（现在我的方法是同步）：

像这样的smthg..

```
server:
//depthmap
const XnDepthPixel* pDepthMap = depth.GetDepthMap();
boost::asio::write (socket, boost::asio::buffer (pDepthMap, sizeof(pDepthMap))); //sizeof isnt right..

client:
XnDepthPixel* depth;
socket.read_some( boost::asio::buffer (&depth, sizeof(XnDepthPixel)* ?? )); //send sizeof(pDepthMap) before.. 
```

编辑：XnDepthPixel 的定义（也来自 OpenNI）：

```
/** Defines the depth values type (16-bit values). **/
typedef XnUInt16 XnDepthPixel 
```

和 XnUInt16：

```
/** 16-bit unsigned integer. */ 
typedef unsigned short      XnUInt16; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T11:34:22.780

`sizeof(pDepthMap)`只是指针的大小，但您真正想要的是发送一些结构，而不是指向它的指针。

请看一下 ASIO*序列化* [示例](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_asio/examples.html#boost_asio.examples.serialization)，了解如何使用 Boost.Serialization 来完成。如果您不想使用 Boost.Serialization，您可以以某种专有方式自行“序列化”您的结构。

# javascript - 使gridview行加粗

> ID：13181536
> 
> 赞同：0
> 
> 时间：2012-11-01T16:35:34.390
> 
> 标签：javascript, asp.net

我想在javascript中按钮的单击事件上加粗gridview的所有行，例如，我有这个按钮

```
<asp:button runat="server" text="Test" onclientClick="makerowsBold();"/> 
```

.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:39:38.513

只要您使用 jQuery，这应该可以工作：

CSS：

```
.bold { font-weight:bold; } 
```

Javascript（使用 jQuery）：

```
function makerowsBold() {
    $('#idOfYourGridViewTable tr td').addClass('bold');
} 
```

出于某种未知原因，有人坚持不使用 jQuery/MooTools/等。

```
function makerowsBold() {
    var cells = document.getElementById("idOfYourGridViewTable").getElementsByTagName("td");
    for ( var i = 0; i < cells.length; i++ )
        cells[i].className += " bold";
}​ 
```

这是[小提琴](http://jsfiddle.net/EFAEA/3/)。

# c - 带有指针的结构的 const 正确性

> ID：13181546
> 
> 赞同：11
> 
> 时间：2012-11-01T16:36:12.303
> 
> 标签：c, constants, const-correctness

我有一个包含一些指针的结构。我希望这些的价值是不可修改的。但是简单地写 const infront 并不会使结构成员不可变

```
typedef struct{
  int *x;
  int *y;
}point;

void get(const  point *p,int x, int y){
  p->x[0]=x;//<- this should not be allowed
  p->y[0]=y;//<- this should not be allowed
} 
```

有人可以指出我正确的方向。

编辑：

因此，似乎没有简单的方法可以使用函数原型来告诉属于该结构的所有内容都应该是不可修改的

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-10-17T23:55:40.420

你可以通过定义一个 const 点类型和一个可变点类型来做到这一点，然后使用一个透明的联合：

```
typedef struct{
    const int *  x;
    const int *  y;
} const_point;

typedef struct{
    int *  x;
    int *  y;
} mutable_point;

typedef union __attribute__((__transparent_union__)) {
    const_point cpoint;
    mutable_point point;
} point; 
```

然后，您使用 point 或 const_point 类型（绝不是 mutable_point 类型）声明函数参数。

point 类型对象将透明地转换为 const_point 类型，但不是相反。这使您可以拥有更高程度的类型安全性。

请参阅此处以获取 gcc 中的示例：http: [//toves.freeshell.org/xueg/](http://toves.freeshell.org/xueg/)

请注意，我检查的最后一个 C++ 版本不支持透明联合（不确定最新的 C++ 标准），因此您可能会遇到可移植性问题。

它还可以使代码更难阅读和维护，特别是如果你有更复杂的结构。例如：您可能有点类型，其中 x 或 y 为 const，或者您可能需要将点结构嵌入到另一个结构中，例如矩形，您可能必须根据它们的 constness 为多种类型定义多个结构。

总而言之，我不确定这是否总是值得额外的麻烦。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T17:09:21.550

如果我正确理解您的问题，您希望将整个 struct 对象的 constness 自动传播到该 struct 成员指向的对象。即如果结构对象不是常量，则数组应该是可修改的，而如果结构对象是常量，则数组不应该是可修改的。

如果是这样，那么不幸的是，这在 C 语言中是无法实现的。

在 C++ 中，可以通过强制用户使用访问器成员函数来访问数据成员（而不是直接访问数据成员）来完成。但在 C 中它根本无法完成。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T16:45:12.303

为了解释你需要建立什么，当你写

```
point str;

point *p=&str; 
```

这里**p 是指向 str 的指针，**它的类型是**point**

当您将其声明为 const 时，这意味着 p 是一个常量指针。这并不限制结构可能包含的指针。

如果要`const`在结构内部应用，则必须将结构内部的指针也定义为 const

```
typedef struct{
   const int *  x;
   const int *  y;
}point; 
```

再次推动我的观点，将参数声明为

```
 void get(point * const  p,int x, int y) 
   //Constant Pointer ( *to prevent p from pointing to anything else*)

    //    AND

   //Make the pointers inside point structure constant
   //( *to prevent the int pointers x & y from pointing to anything else*) 
```

如果它指向的结构也是 const 使用

```
 void get(const point * const p, int x, int y)
     //Constant Pointer to constant structure 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T16:41:12.490

那是因为您更改了另一个指针指向的内存内容，而不是`p`.

`p`指向包含 2 个指向`int`. 你没有改变内存`p`指向，而是另一个内存区域。所以编译器对此很好。

```
 +----------+
p ->   |    x     |  -> wherever  
       +----------+
       |    y     |  -> another place in memory
       +----------+ 
```

`const`ness od`p`是不可继承的。如果你写 了，`p->a = array;`那么编译器会抱怨的。这`const`只是一个合同，说您不会通过该指针更改内存。

# php - preg_match_all 与 php 以获取单位的测量值

> ID：13181552
> 
> 赞同：-1
> 
> 时间：2012-11-01T16:36:31.647
> 
> 标签：php, preg-match-all

我正在努力寻找解决方案，使用 preg_match_all 从以下文本中仅获取值和测量值 untis ，前文本

```
MAN CAB HDMI TO HDMI M/M 18 cm SHIELDED 1.3V BLK 
MAN CAB HDMI TO HDMI M/M SHIELDED 1.3V BLK 18cm
MAN CAB HDMI TO HDMI M/M SHIELDED 1.3V BLK 5M
MAN CAB HDMI TO HDMI 5 M M/M SHIELDED 1.3V BLK 
MAN CAB HDMI TO HDMI M/M SHIELDED 1.3V BLK 5.0 m
MAN CAB HDMI TO HDMI M/M SHIELDED 1.3V BLK 5.2m
MAN CAB HDMI TO HDMI 5,2m M/M SHIELDED 1.3V BLK  
MAN CAB HDMI TO HDMI M/M 5,2 m SHIELDED 1.3V BLK 
```

想得到结果

```
18 cm,18cm,5M,5 M,5.00 M,5.0 mm,5.2m and 5,2m 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:39:40.697

像这样的东西应该工作：

```
preg_match_all("/[0-9,.]+\s*(cm|m|mm)/mis", $string); 
```

这些`mis`标志使正则表达式不区分大小写，并允许匹配换行符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T16:44:17.590

怎么样：

```
preg_match_all('/([0-9,\.]+\s?(cm|mm|m))/mis', $string, $matches); 
```

# ios - 如何更改不同部分的uitableviewcell数据？

> ID：13181555
> 
> 赞同：0
> 
> 时间：2012-11-01T16:36:56.033
> 
> 标签：ios, uitableview

I want to change the data of two rows in two different sections when one of them is selected so that they will have the same answer. 但它不起作用：

```
 NSIndexPath *indexPath1 = [NSIndexPath indexPathForRow:row1 inSection:section1];
    cell = [self.tableView cellForRowAtIndexPath:indexPath1];
    //DO SOMETHING WITH CELL LABEL

    NSIndexPath *indexPath2 = [NSIndexPath indexPathForRow:row2 inSection:section2];
    cell = [self.tableView cellForRowAtIndexPath:indexPath2];
    //MAKE THIS CELL LABEL SAME AS THE LAST ONE 
```

如果第二个单元格位于不同的部分，则它不起作用！有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:51:25.860

如果此时其中一个单元格不可见，您将从*cellForRowAtIndexPath:*获得*nil 。*因此，您应该从数据模型而不是 UI 中获取所需的条目。在那里更改所需的信息：

 *```
NSArray *section1Data = [self.dataModell objectAtIndex:section1];
NSDictionary *dataObject1 = [section1Data objectAtIndex:row1];
[dataObject1 setValue:@"My new Text." forKey:@"theTextPropertyKey"];

NSArray *section2Data = [self.dataModell objectAtIndex:section2];
NSDictionary *dataObject2 = [section1Data objectAtIndex:row2];
[dataObject2 setValue:@"My new Text." forKey:@"theTextPropertyKey"]; 
```

然后在 UI 中重新加载所需的单元格：

```
NSArray *indexPaths = @[indexPath1, indexPath2];
[self.tableView reloadRowsAtIndexPaths:indexPaths]; 
```*

# javascript - 使用 Jquery Autocomplete 处理“无结果”

> ID：13181557
> 
> 赞同：1
> 
> 时间：2012-11-01T16:37:05.510
> 
> 标签：javascript, jquery, jquery-ui, jquery-autocomplete, jquery-ui-autocomplete

嘿，当用户当前查询没有结果时，我正在尝试返回一条消息！我已经查看了整个网络并且有类似的场景，但我似乎无法让它与下面的代码一起使用！任何人都可以帮我解决这个问题，因为我正在拔头发试图修复它！

我需要保持使用键盘向下滚动结果的能力。

提前致谢。

**HTML**

```
   <div id="search_box">
     <form id="search_form" autocomplete="off" action="" onSubmit="return false;">
        <input type="text" id="suggestSearchBox" value="按城市或酒店名称搜索" onClick="this.value='';" />
     </form>
   </div>

```

**Javascript** 注意：远程数据源称为“dataLocCodes”，它是一个 javascript 数组

```
// JavaScript 文档
$（函数（）{
   $("#suggestSearchBox").focus().autocomplete(dataLocCodes, {
      最大：15，
      选择第一：真，
      匹配包含：真，
      格式项目：函数（行，我，最大值）{
      如果（row.hotelId）{
         返回 row.accomName + ' - ' + row.city + ' - ' + row.country;
      } 别的 {
         返回 row.city + ' - ' + row.country;
      }
   }
}）。结果（
   功能（事件，行，格式化）{
      $("input#suggestSearchBox").val(row.city + ' - ' + row.country);
      var 参数 = row.locparam;
      var encoded_url = param.replace(/ /gi,"+");
      编码的url = 编码的url.replace(/&/gi,"amp");
      window.location.href = "hotels.html?location=" + encoded_url;
   });
});

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-23T13:05:42.397

有几种方法可以处理这个问题。您可以创建一个`source`方法，以便如果过滤器的结果为空，则添加“无结果”作为值，或者您处理`response`事件以显示一条消息，在您的 ui 中返回没有结果。如果使用该`source`方法，则添加一个选择处理程序以防止 No Result 成为一个值。

```
var availableTags = ['Abc', 'Def', 'ghi'];
$('#noresults').autocomplete({
    source: function (request, response) {
        var responses = $.ui.autocomplete.filter(availableTags, request.term);
        if (responses.length == 0) responses.push('No Result');
        response(responses);

    },
    response: function (event, ui)
    {
        if (ui.content.length == 0) {
            console.log('No results');
        }
    },
    select: function (event, ui) {
        // don't let no result get selected
        return (ui.item.value != 'No Result');
    }
}); 
```

# python - 导入模块：__main__ vs import as module

> ID：13181559
> 
> 赞同：16
> 
> 时间：2012-11-01T16:37:09.207
> 
> 标签：python, module, python-import, python-module

作为序言，我想我可能已经想出了如何让这段代码工作（基于在[import 之后更改模块变量](https://stackoverflow.com/questions/12242417/changing-module-variables-after-import)），但我的问题实际上是关于为什么会发生以下行为，所以我可以理解将来不应该做什么。

我有三个文件。第一个是 mod1.py：

```
# mod1.py

import mod2

var1A = None

def func1A():
    global var1
    var1 = 'A'
    mod2.func2()

def func1B():
    global var1
    print var1

if __name__ == '__main__':
    func1A() 
```

接下来我有 mod2.py：

```
# mod2.py

import mod1

def func2():
    mod1.func1B() 
```

最后我有driver.py：

```
# driver.py

import mod1

if __name__ == '__main__':
    mod1.func1A() 
```

如果我执行命令`python mod1.py`，那么输出是`None`. 根据我上面引用的链接，`mod1.py`导入为`__main__`和`mod1.py`导入自`mod2.py`. 因此，我创建了`driver.py`. 如果我执行命令`python driver.py`，那么我会得到预期的输出：`A`. 我有点看到差异，但我并没有真正看到机制或原因。这是如何以及为什么会发生的？同一个模块会存在两次似乎违反直觉。如果我执行`python mod1.py`，是否可以访问`__main__`版本中`mod1.py`的变量而不是导入的版本中的变量`mod2.py`？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-01T16:40:10.587

该`__name__`变量始终包含模块的名称，*除非*文件已作为脚本加载到解释器中。*然后*将该变量设置为字符串`'__main__'`。

毕竟，脚本随后作为整个程序的主文件运行，其他所有内容都是由该主文件直接或间接导入的模块。通过测试`__name__`变量，您可以检测文件是作为模块导入还是直接运行。

在内部，模块被赋予一个命名空间字典，它作为每个模块元数据的一部分存储在`sys.modules`. 主文件，即执行的脚本，存储在与`'__main__'`.

但是，当您将文件作为模块导入时，python 首先`sys.modules`会查看该模块之前是否已经导入过。所以，`import mod1`意味着我们首先寻找`sys.modules`模块`mod1`。`mod1`如果还没有命名空间，它将创建一个带有命名空间的新模块结构。

因此，如果您都`mod1.py`作为主文件运行，*然后*将其作为python模块导入，它将*在*`sys.modules`. 一个 as `'__main__'`，然后是`'mod1'`。这两个命名空间是完全独立的。您的全局`var1`存储在 中，`sys.modules['__main__']`但`func1B`正在寻找它在哪里。`sys.modules['mod1']``var1``None`

但是当你使用`python driver.py`,`driver.py`成为`'__main__'`程序的主文件，并且`mod1`只会被导入到`sys.modules['mod1']`结构中一次。这一次，`func1A`存储`var1`在`sys.modules['mod1']`结构中，这就是`func1B`会发现的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-27T22:02:39.770

关于可选地使用模块作为主脚本的实用解决方案 - 支持一致的交叉导入：

# 解决方案1：

`__main__`参见例如在 Python 的 pdb 模块中，它是如何通过在执行为（最后）时导入自身作为脚本运行的：

```
#! /usr/bin/env python
"""A Python debugger."""
# (See pdb.doc for documentation.)
import sys
import linecache

...

# When invoked as main program, invoke the debugger on a script
if __name__ == '__main__':
    import pdb
    pdb.main() 
```

只是我建议将`__main__`启动重新组织到脚本的开头，如下所示：

```
#! /usr/bin/env python
"""A Python debugger."""
# When invoked as main program, invoke the debugger on a script
import sys
if __name__ == '__main__':        
    ##assert os.path.splitext(os.path.basename(__file__))[0] == 'pdb'
    import pdb
    pdb.main()
    sys.exit(0)

import linecache
... 
```

这样，模块主体就不会执行两次——这是“昂贵的”、不可取的并且有时是关键的。

# 解决方案2：

在极少数情况下，最好将实际脚本模块`__main__`直接公开为实际模块别名 ( `mod1`)：

```
# mod1.py    
import mod2

...

if __name__ == '__main__':
    # use main script directly as cross-importable module 
    _mod = sys.modules['mod1'] = sys.modules[__name__]
    ##_modname = os.path.splitext(os.path.basename(os.path.realpath(__file__)))[0]
    ##_mod = sys.modules[_modname] = sys.modules[__name__]
    func1A() 
```

已知缺点：

*   `reload(_mod)`失败
*   腌制的类需要额外的映射来解酸（`find_global`..）

# javascript - 从跨域 iframe 中读取父变量

> ID：13181560
> 
> 赞同：1
> 
> 时间：2012-11-01T16:37:10.653
> 
> 标签：javascript, iframe, cross-domain-policy

我知道有很多关于跨域 iframe 的问题，但我绝对可以解决我的问题：

在页面 www.domain_A.com/test.php

```
<div id="test">this what i want</div>
<iframe src="http://www.domain_B.com/iframe.html" width="500" height="300" name="myFrame" id="myFrame" style="border:1px solid black;"></iframe> 
```

而 www.domain_B.com/iframe.html 是这样的：

```
document.domain = "www.multipress.fr";
test = document.getElementById('test'); ;
alert(test); 
```

所以我想提醒一下：这就是我想要的。但正如你猜想的那样，我从 Chrome 收到了安全错误。

所以我看到的唯一解决方案是在 iframe 之前整合一个脚本以使用 postMessage 技术。但在此之前，如果我能找到其他解决方案，我宁愿与你核实。

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:42:13.007

您可以从父页面访问的唯一内容是 iframe 标记本身 - 当它指向不同的域时，内部没有任何内容可用。

# python - python-twisted：用于后台不返回处理的 fork

> ID：13181561
> 
> 赞同：3
> 
> 时间：2012-11-01T16:37:12.817
> 
> 标签：python, fork, twisted

如何正确派生一个不使用任何来自twisted的子进程（但使用来自父进程的数据）（例如处理来自父进程的某些数据的“快照”并将其写入文件，而不阻塞）？

看来，如果我在子进程之后执行干净关闭之类的操作`os.fork()`，它会关闭父进程中的一些套接字/描述符；避免这种情况的唯一方法是做`os.kill(os.getpid(), signal.SIGKILL)`，这似乎是个坏主意（尽管没有直接问题）。

（此外，如果 dict 在父进程中发生更改，它会不会在子进程中也发生更改？快速测试表明它不会更改。操作系统/内核是 debian stable / sid）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T18:54:46.493

[`IReactorProcess.spawnProcess`](http://twistedmatrix.com/documents/current/api/twisted.internet.interfaces.IReactorProcess.html)（通常以 形式提供`from twisted.internet import reactor; reactor.spawnProcess`）可以生成一个进程，该进程在您的系统上运行任何可用的可执行文件。子进程不需要使用 Twisted，甚至不需要使用 Python。

不要给`os.fork`自己打电话。正如您所发现的，它与进程状态有许多非常特殊的交互，这些交互`spawnProcess`将为您管理。

其中的问题`os.fork`是：

*   分叉复制您当前的进程状态，但不复制线程的状态。这意味着在修改某些全局状态的过程中的任何线程都会使事情半途而废，可能持有一些永远不会被释放的锁。不要在您的应用程序中运行任何线程？您是否审核了您使用的每一个库，它的每一个依赖项，以确保它们中没有一个曾经或*将*永远使用后台线程做任何事情？
*   您可能认为您只触及应用程序内存的某些区域，但由于 Python 的引用计数，您甚至外围查看（或存在于堆栈中）的任何对象都可能具有递增或递减的引用计数。增加或减少 refcount 是一种写操作，这意味着整个*页面*（不仅仅是一个对象）被复制回您的进程中。因此，Python 中的分叉进程往往会积累比分叉的 C 程序更大的复制集。
*   许多库，尤其[是构成 macOS 和 iOS 系统的](https://stackoverflow.com/questions/7379419/fork-cocoa-process-and-re-init-cocoa-how)[*所有*](https://stackoverflow.com/questions/7379419/fork-cocoa-process-and-re-init-cocoa-how)库，都无法正确处理，如果您尝试在 之后但之前`fork()`使用它们，只会使您的程序崩溃。`fork``exec`
*   [有一个标志](https://stackoverflow.com/questions/6125068/what-does-the-fd-cloexec-fcntl-flag-do)告诉文件描述符关闭`exec`- 但没有这样的标志让它们关闭`fork`。因此，如果您不仔细管理对它们的访问权限，任何文件（包括日志文件，以及由您甚至可能不知道的库打开的任何后台临时文件）都可能被静默损坏或截断。

# objective-c - 有没有办法在自动引用计数中重写 dealloc？为什么它不起作用？

> ID：13181567
> 
> 赞同：1
> 
> 时间：2012-11-01T16:37:42.373
> 
> 标签：objective-c, xcode, automatic-ref-counting, release, dealloc

我是一名计算机编程专业的二年级学生，正在开发一个 Objective C 的程序。（如果重要的话，Xcode）。现在，我们正在制作动画并在屏幕上移动动画对象。现在，我正在处理一个让我发疯的错误。我的程序正在使用 ARC，自动引用计数，据说它应该有助于内存管理。但是，由于某种原因，我似乎无法使用

```
[super dealloc]; 
```

它总是给我一个错误，上面写着“ARC禁止发送'dealloc'的显式消息

为什么是这样？我如何解决它？它适用于我的其他程序，只是不是这个？

此外，发布似乎也不起作用。例如，下面的代码给了我 2 个错误：[fireBall release];

错误说“'release'不可用：在自动引用计数模式下不可用”，下一个错误说“ARC forbids explicit message send of 'release'”。为什么会发生这种情况，我该如何解决？此代码适用于我的其他程序。有人可以解释一下，或者至少提供一个可以解决我所有问题的链接吗？谢谢阅读

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T16:44:41.163

您应该花一些时间来完整阅读[Apple 的 ARC 指南](http://developer.apple.com/library/ios/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)

它将为您节省**大量**时间，而且绝对值得理解。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T16:41:37.720

您可以定义自己的 dealloc 方法，只是不能调用 [super dealloc] （ARC 会自动调用它）。发布也是如此，您不需要调用它，因为 ARC 处理将其放置在您的代码中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T16:40:03.570

简单，只需删除该行。ARC 负责所有的 release/autorelease/dealloc 调用。ARC 对对象的生命周期有 100%（几乎）的洞察力，并为您插入这些调用。

不过，您仍然可以覆盖 dealloc 方法来进行一些清理。

# jquery - 移动设备上的 jQuery 动画

> ID：13181570
> 
> 赞同：0
> 
> 时间：2012-11-01T16:37:51.303
> 
> 标签：jquery

我在移动设备上运行一些 jQuery 动画。动画是滞后和生涩的。有什么可以做的来改善这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:39:30.527

这个库有助于弥合 jQuery 和原生 CSS 动画之间的差距，我发现：

[http://ricostacruz.com/jquery.transit/](http://ricostacruz.com/jquery.transit/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T16:40:07.390

将此样式应用于您正在制作动画的元素，它会强制 webkit 与 GPU 共享处理负载

```
-webkit-transform: translateZ(0); 
```

[您可以从这张幻灯片](http://standardista.com/velocity/)中获取一些有用的提示

# c# - ASP.NET File.Exists 在文件存在时返回 false

> ID：13181571
> 
> 赞同：0
> 
> 时间：2012-11-01T16:37:55.753
> 
> 标签：c#, asp.net, file, permissions

当文件实际存在时，File.Exists 返回 false。

我知道如果没有读取权限它会返回 false，但我似乎无法正确处理。

更多信息：

我的 FTP 目录是这样组织的：

```
Root

    ImageSite

        ImageDirectory

    MySite

        My .aspx.cs File that's calling File.Exists() 
```

我尝试使用与 ImageSite 和 ImageDirectory 相同的 ftp 用户帐户上传 .aspx.cs 文件。没有帮助。

为了确定，我还尝试用反斜杠替换正斜杠。

这是我的代码 - 我将文件路径硬编码为图像目录的完整 ftp 路径。

```
 string serverUrl =@"\\fs4-n01\blah\blah\blah\ImageSite.com\web\content\Images\" + product.ImageUrl;
        bool exists = File.Exists(serverUrl); 
```

我也想过模仿。我已经在我的 web.config 中使用了一种身份模拟，但它似乎并没有让我同时使用这两种身份，所以我把它放在我的代码文件所在的子目录下，在标签下。但它似乎没有这样做。（无论哪种方式，文件的所有者都与图像目录相同，正如我所提到的。）

我正在使用 ASP.NET 4.0。

任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T20:17:07.963

我打电话给我的托管服务提供商 (Rackspace)，并被告知 .NET 的工作方式是出于安全原因，您无法访问内容目录之外的文件。（对于 ASP 经典网站，它确实让你，截至目前。）

# c++ - 数独输入程序跳过提示

> ID：13181572
> 
> 赞同：0
> 
> 时间：2012-11-01T16:37:59.790
> 
> 标签：c++, sudoku

我为我的计算机科学课编写了一个程序，该程序可以验证和解决 .txt 文件中的数独难题，但我想更进一步，编写一个程序，使输入和数独游戏变得容易。我相信您可以根据此代码找出文件的格式。我唯一的问题是最后一个 cin 被跳过了，这个选项对我很重要。任何见解将不胜感激！

```
#include <iostream>
#include <fstream>
#include <string>

using namespace std;

struct s {
s();
~s() {/*zzzz*/}
void show_grid();
void set (int &r, int &c, int &v) {g[r][c] = v;}
private:
int g[9][9];
};

//************************************************************************

void s::show_grid() {

//print game out to check it
cout << "  |  -------------------------------  |" << endl;
for (int k=0; k<81; k++) {
    if (k%3 == 0)
        cout << "  |";
    cout << "  " << g[k/9][k%9];
    if (k%9 == 8) {
        cout << "  |" << endl;
        if ((k/9)%3 == 2)
            cout << "  |  -------------------------------  |" << endl;
    }
}
cout << endl;
}

//************************************************************************

s::s() {

//initialize all elements to zero
for (int i=0; i<9; i++) {
    for (int j=0; j<9; j++) {
        g[i][j] = 0;
    }
}
}

//************************************************************************

void create_name (string &name) {

//append .txt extension LIKE IT OR NOT
string ext = name;
ext.erase(ext.begin(), ext.end() - 4);

if (ext.compare(".txt")!=0)
    name.append(".txt");
}

//************************************************************************

int main () {

s g;
string name;
string yon("");
int count = 0;
int row, col, val, rcv;
ofstream os;

cout << "Enter game file name: ";
cin >> name;

create_name(name);

//open and do typical checks
os.open(name.c_str());
if (os.fail()) {
    cerr << "Could not create " << name << ". Waaaah waaaaaaaaaah...\n\n";
    return 0;
}

//useful output (hopefully)
cout << "Enter grid coordinates and value as a 3-digit number,\n"
    << "from left to right, row by row.\n" 
    << "(e.g. 2 in first box would be 112)\n";

//take input as one int, to be user friendly
while (cin >> rcv && count < 81) {
    row = (rcv / 100) - 1;
    col = ((rcv / 10) % 10) - 1;
    val = rcv % 10;
    os << row << " " << col << " " << val << endl;
    g.set (row, col, val);
    count++;
}

os.close();

//From here down is broken, but it still compiles, runs, and works
cout << "Show grid input(y/n)?\n";
cin >> yon;

if (yon.compare("y")==0)
    g.show_grid();
else if (yon.compare("n")==0)
    cout << "Peace!\n";

return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:49:01.927

问题在这里：

```
while (cin >> rcv && count < 81) 
```

考虑在以下情况下会发生什么`count==81`：首先，`rcv`将从 输入`cin`，然后才将条件`count < 81`评估为假。循环将停止，并且 的值`rcv`将被忽略。因此，您有效地阅读了一个输入太多。

您应该更改评估顺序，以便`count`首先检查：

```
while (count < 81 && cin >> rcv) 
```

* * *

**编辑**：

根据您上面的评论，您实际上期望读取的值少于 81 个。在这种情况下，我建议让用户输入一个特殊值（例如 0）来终止循环。你只需要添加`if (rcv==0) break;`. 如果你只是输入了一个无效的值，那么`cin`流将被置于失败状态，进一步的输入将不会成功。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T17:24:55.047

```
cin >> yon 
```

实际上仍然读入一个变量，它只是读入while循环发现为假的变量。当 while 循环条件返回 false 时，rcv 被忽略，因此该数字保留在输入流中等待下一个 cin 语句。当调用 yon 时，用于 rcv 的数字被读入 yon，给你一些奇怪的错误。

最好使用interjay的方法：

```
while (count < 81 && cin >> rcv) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T18:30:44.617

尝试类似：

```
//useful output (hopefully)
cout << "Enter grid coordinates and value as a 3-digit number,\n"
    << "from left to right, row by row.\n" 
    << "(e.g. 2 in first box would be 112)\n"
    << "or Z to end the loop\n";  // 1

//take input as one int, to be user friendly
while (count < 81 && cin >> rcv ) { // 2
    row = (rcv / 100) - 1;
    col = ((rcv / 10) % 10) - 1;
    val = rcv % 10;
    os << row << " " << col << " " << val << endl;
    g.set (row, col, val);
    count++;
}

if(!std::cin) {  // 3
  std::cin.clear();
  std::cin.ignore(std::numeric_limits<std::streamsize>::max(), '\n');
} 
```

1）让用户知道他可以输入无效字符。不一定是`Z`，实际上**任何**非数字字符都可以。

2) 按`&&`.

3) 如果`std::cin`处于错误状态，清除错误并忽略`Z`.

# sql - 将连接的 IDS 从表插入字段的 SQL 语句有什么问题？

> ID：13181575
> 
> 赞同：1
> 
> 时间：2012-11-01T16:38:16.563
> 
> 标签：sql, sql-server, sql-server-2008-r2

```
INSERT INTO Activity_Feed (userID,Type,DataIDs,PodID) 
VALUES ( 1437
      , 'eventattend'
      , (SELECT LEFT(EventID, LEN(eventID) - 1 as nvarchar) 
         FROM ( 
            SELECT EventiD + ', ' 
            FROM   events 
            FOR XML PATH ('')) c (EventID))
      , 5) 
```

基本上我想从一个表中取出一堆 ID，并将它们作为逗号分隔的字符串插入到 varchar 字段中。

例如

```
Activity_Feed (table)

activityID   1
userID       2
DataIDs      1,3,4,56,367 // This would be the (Select Ids FROM bit) 
```

我想从表中取出一堆 RSVP ID 并将它们的 ID 粘贴在字段中......

为了进一步解释，由于此查询的性质，我想避免对查询进行规范化。让我知道我是否还应该分离出数据......

活动提要的工作方式是这样的......

我在活动中创建了一个新条目，类型为`event_attending`（这是我正在参加的活动。

我给它加上时间戳，我在字段中输入事件的 ID在 6 小时内`dataIDs`匹配的任何新活动都会`event_attending`触发`update`记录而不是`insert`

我保持时间戳不变，但更新了与该时间段关联的 ID，因此基本上使用该时间段内的最新事件出席来更新 ID。

我认为规范化似乎有点矫枉过正：D 标准化是否有矫枉过正之类的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T16:40:31.260

始终规范化您的数据库。

这*完全没有*错，但在数据库设计中非常糟糕。

这很差的原因：

*   很难加入表格
*   很难找到价值

为什么不创建这样的表，

活动

*   活动ID
*   活动名称

喂养

*   饲料ID
*   饲料名称

Activity_Feed

*   饲料ID
*   活动ID

所以`Activity_Feed`表将包含这样的东西

```
FeedID  ActivityID
=====================
1         1
1         2
1         3
2         1
2         3
3         2
3         1 
```

你现在可以加入表格，

```
SELECT  a.ActivityName, c.FeedName
FROM    Activity a
        INNER JOIN Activity_Feed b
            ON a.ActivityID = b.ActivityID
        INNER JOIN Feed c
            ON b.FeedID = c.FeedID
-- WHERE  a.ActivityName = 1             -- or something like this 
```

# c# - 检查安全性后更新可编辑文本字段

> ID：13181578
> 
> 赞同：1
> 
> 时间：2012-11-01T16:38:26.330
> 
> 标签：c#, javascript, asp.net-mvc-3, jeditable

我有一个场景，只有一些用户有权更新字段。我正在尝试将 jEditable 放置到位以允许对字段进行就地编辑，并希望在控制器中检查后端的权限，如下所示：

```
 public JsonResult UpdateComment(string MRN, string comment)
 {
    if (this.HttpContext.User.CanComment())
    {
        return this.Json(new 
           { 
             Status = "OK", 
             value = this.service.UpdateComment(MRN, comment) 
           });
    }

    return this.Json(new { //???? });
} 
```

我的视图看起来像：

```
@model MyApp.ViewModels.DetailViewModel
<div>
    ....
    <span id="txtSource">@Html.DisplayFor(m=>m.Source)</span>
    <span id="txtMRN">@Html.DisplayFor(m=>m.MRN)</span>
    <span id="@Model.CommentIdName">@Html.DisplayFor(m=>m.Comments)</span>
    ....
</div>
<script type="text/javascript">
    $(function() {
        $('#editComment').editable("/@Model.Source/UpdateComment",
            {
                id: 'mrn',
                name: 'comment',
                type: 'textarea',
                cancel: 'Cancel',
                submit: ' OK',
                tooltip: 'Click to Edit Comment...'
            });
    });
</script> 
```

在用户没有“评论”权限的情况下，需要取消编辑，并将字段值恢复为原来的值。

我已经在我的视图中设置了将字段的 id 更改为 jEditable 在呈现视图时不寻找的东西，这样就可以处理大多数情况，而无需在后端处理它。

我正在尝试保护数据并返回合理的响应，但我不知道需要什么代码来代替注释//????'。

**编辑：**

修复了 javascript 问题并通过将其放入视图来简化它。

# php - 将 XML 数据解析为 php

> ID：13181579
> 
> 赞同：1
> 
> 时间：2012-11-01T16:38:27.747
> 
> 标签：php, xml

我有以下代码，我想知道如何将该 XML 数据发送到 php 变量。

```
 $XMLAttendee= "<attendee_list>
        <attendee>
        <attendee_id>1028</attendee_id>
        <screen_name>shahid</screen_name>
                    <language_culture_name>es-ES</language_culture_name>
            </attendee>
                </attendee_list>"; 
```

因此，变量 $XMLAttendee 保存 xml 数据并将其传递给以下变量 $requestParameters["attendee_list"]=$XMLAttendee;

所以我想知道如何将 xml 数据解析为 php 变量

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T18:54:55.493

您可以使用 xml_parse_into_struct：

```
<?php
$xml = "
<attendee_list>
    <attendee>
        <attendee_id>1028</attendee_id>
        <screen_name>shahid</screen_name>
        <language_culture_name>es-ES</language_culture_name>
    </attendee>
</attendee_list>";

$parser = xml_parser_create();
xml_parse_into_struct($parser, $xml, $values, $index);
xml_parser_free($parser);

print_r($values); 
```

输出：

```
Array
(
    [0] => Array
        (
            [tag] => ATTENDEE_LIST
            [type] => open
            [level] => 1
            [value] => 

        )

    [1] => Array
        (
            [tag] => ATTENDEE
            [type] => open
            [level] => 2
            [value] => 

        )

    ... 
```

# c# - 在 C++/CLI 中处理 C# 异常

> ID：13181584
> 
> 赞同：1
> 
> 时间：2012-11-01T16:38:40.250
> 
> 标签：c#, c++, visual-studio-2010, exception-handling, c++-cli

我有一个复杂的 C#、C++/CLI 和本机 C++ 代码组合。简而言之，我所拥有的：

1.  第三方托管应用程序，即 Visual Studio 2010 进程
2.  由该进程加载的 C++/CLI dll，即[Evaluator Add-In](http://msdn.microsoft.com/en-us/library/8fwk67y3%28v=vs.80%29.aspx)
3.  AC# 程序集，其中包含一个`Windows.Froms.Form`类，由 dll 显示

我使用以下方法从 C++/CLI dll 显示我的 C# 表单`ShowDialog`：

```
System::Reflection::Assembly^ GUI = System::Reflection::Assembly::LoadFrom("MyCppDll.dll");
Type^ FormMain = GUI->GetType("MyCsNamespace.FormMain");
MethodInfo^ ShowDialog = FormMain->GetMethod("ShowDialog", gcnew array<Type^>{});
System::Object^ form = System::Activator::CreateInstance(FormMain, args);
ShowDialog->Invoke(form, nullptr); 
```

一切正常，除了我不知道如何处理表单执行期间可能抛出的异常。我希望`ShowDialog->Invoke`调用只是抛出这些异常，但事实并非如此。

我试图`AppDomain::UnhandledException`在 C++ 中设置处理程序，但它没有被触发。奇怪的是，我试图在 C# 中设置它，但它也没有被触发。

那么在这种情况下如何处理 C# 程序集中抛出的 C++ dll 中的异常呢？我可以完全控制 C++ 和 C# 代码，但主机应用程序已关闭。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T16:45:15.217

`ShowDialog->Invoke`将抛出 TargetInvocationException；this 的 InnerException 将是表单抛出的异常。

# google-maps-api-3 - 如何在合并的融合表中添加行？

> ID：13181591
> 
> 赞同：0
> 
> 时间：2012-11-01T16:39:08.623
> 
> 标签：google-maps-api-3, google-fusion-tables

我正在使用融合表使用谷歌地图 api v3 在谷歌地图上加载数据。我已经将该融合表与州、县边界合并，这样我就可以用这些边界加载地图。管理合并融合表的更好方法是什么？有一个融合表 API，但看起来它不允许在合并的融合表中添加新行。我确信人们需要在融合表中添加新行。我想知道如何管理它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T08:19:43.807

如文档中所述，[无法将行或列添加到合并表中](https://developers.google.com/fusiontables/docs/v1/getting_started#tableDef)。

至于行，很容易绕过这个限制，因为您可以简单地将新行添加到合并表所基于的*基表中。*

# ruby-on-rails - 我可以在类方法中使用 has_many 方法吗？

> ID：13181597
> 
> 赞同：0
> 
> 时间：2012-11-01T16:39:22.147
> 
> 标签：ruby-on-rails, ruby

我有一个付款模型，它在活动上是多态的

```
class Payment
  belongs_to :activity, polymorphic: true
end 
```

其中一项活动是转介。

```
class Referral
  has_many :payments, :as => :activity

  def self.unpaid
    where(payments.count == 0)
  end
end 
```

我想创建一个类方法，这样我就可以获得所有未付费的推荐。我在上面使用了这种方法，但是在付款时遇到了 undefined_method 错误。
Referral.first.payments.count 工作正常。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:49:02.020

在我看来，您正在寻找的是[ActiveRecord Scopes](http://guides.rubyonrails.org/active_record_querying.html#scopes)。使用范围，你会做这样的事情：

```
class Referral
  has_many :payments, :as => :activity

  scope :unpaid, includes(:payments).where('payments.id is null')
end 
```

这将对付款执行连接，然后条件将找到所有没有付款的列（换句话说，没有付款）。然后你可以做 Referral.unpaid.all，并查看所有没有联合付款的推荐。

# redirect - 发送通过 varnish 的重定向后浏览器丢失历史记录

> ID：13181606
> 
> 赞同：0
> 
> 时间：2012-11-01T16:39:52.930
> 
> 标签：redirect, varnish

我目前正在清漆中实施付费专区。在某些情况下，我通过清漆发送重定向：

```
sub process_request {
    if (req.http.count ~ "5") {
        error 302;
    }
} 
```

在相应的错误子例程中，我像这样重定向：

```
sub paywall_redirect {
    if (obj.status == 302 && req.http.count ~ "5") {
        set obj.http.Location = "http://www.google.com/";
    }
} 
```

幸运的是，逻辑有效，但不幸的是，我丢失了在重定向到 google.com 之前使用的域的浏览器历史记录。

假设我创建了一个新选项卡，`www.paid-content.com/article.html`为我想阅读的某篇文章打开并超过了计数器限制（例如，通过重新加载页面）。然后我被重定向到`www.google.com`浏览器后退按钮被禁用。

假设我来自`www.website.com`to`www.paid-content.com/article.html`并超过限制，那么后退按钮将我带回到`www.website.com`.

这种行为是这样的吗？我应该如何在 varnish 中重定向以保留浏览器的历史记录？

谢谢你的帮助！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T11:14:12.247

这确实是预期的行为。本质上，您是在告诉浏览器`www.paid-content.com/article.html`现在位于`www.google.com`. 浏览器缓存此信息，它也会影响历史记录。

完成重定向的最佳方法是通过自定义错误处理程序。

```
sub process_request {
    if (req.http.count ~ "5") {
        error 750;
    }
} 
```

然后在您的自定义错误处理程序中创建一个带有元刷新标记的合成响应正文。即使元刷新也有它的缺点，但它应该以你想要的方式保留浏览历史。

```
sub paywall_redirect {
    if (obj.status == 750 && req.http.count ~ "5") {
        set obj.http.Content-Type = "text/html; charset=utf-8";
        synthetic {"
           <html>
             <head>
               <meta http-equiv="refresh" content="0;URL='http://www.google.com/'">
             </head>
             <body></body>
           </html>
        "};
        return(deliver);
    }
} 
```

也许更优雅的解决方案是显示一个合成页面，解释付费专区已被击中，但这实际上是一个偏好问题。

# iphone - UITableView 内容大小

> ID：13181607
> 
> 赞同：17
> 
> 时间：2012-11-01T16:39:53.630
> 
> 标签：iphone, ios, uitableview, nsfetchedresultscontroller

我的应用程序中的几个表格视图有问题。

当表格的内容发生变化（因此表格视图的内容变大）时，就会出现问题。

由于某种原因， UITableView 的 contentSize 保持不变，这意味着我无法滚动查看新内容。

当特定单元格变大（在 [tableView reloadData]; 之后）或添加新单元格（使用 NSFetchedResultsController 委托方法）时，会发生这种情况。

我需要为 tableView 做些什么来重新调整它的 contentSize 吗？

编辑以显示代码，但这只是样板 NSFetchedResultsController 委托代码......

```
- (void)controllerWillChangeContent:(NSFetchedResultsController *)controller {
    // The fetch controller is about to start sending change notifications, so prepare the table view for updates.
    [self.tableView beginUpdates];
}

- (void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject atIndexPath:(NSIndexPath *)indexPath forChangeType:(NSFetchedResultsChangeType)type newIndexPath:(NSIndexPath *)newIndexPath {

    UITableView *tableView = self.tableView;

    switch(type) {

        case NSFetchedResultsChangeInsert:
            [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeDelete:
            [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeUpdate:
            [self configureCell:(OJFPunchListCell*)[tableView cellForRowAtIndexPath:indexPath] atIndexPath:indexPath];
            break;

        case NSFetchedResultsChangeMove:
            [tableView deleteRowsAtIndexPaths:[NSArray
                                           arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
            [tableView insertRowsAtIndexPaths:[NSArray
                                           arrayWithObject:newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;
    }
}

- (void)controller:(NSFetchedResultsController *)controller didChangeSection:(id )sectionInfo atIndex:(NSUInteger)sectionIndex forChangeType:(NSFetchedResultsChangeType)type {

    switch(type) {

        case NSFetchedResultsChangeInsert:
            [self.tableView insertSections:[NSIndexSet indexSetWithIndex:sectionIndex] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeDelete:
            [self.tableView deleteSections:[NSIndexSet indexSetWithIndex:sectionIndex] withRowAnimation:UITableViewRowAnimationFade];
            break;
    }
}

- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller {
    // The fetch controller has sent all current change notifications, so tell the table view to process all updates.
    [self.tableView endUpdates];
} 
```

我以前在iOS5中做过这种事情，从来没有遇到过问题。似乎这可能是 iOS6 的变化？

：：编辑：：

愚蠢的是，我在同一个应用程序中有许多其他 UITableViewControllers，它们都工作正常。我可以添加新单元格、添加动态大小的单元格、调整单元格大小等......并且表格在所有内容中都可以正确滚动。

这个问题现在发生在我最近添加的几个 tableview 上。

：：编辑：：

好的，只是做一些调试。当我第一次进入表视图时 contentSize.height 是 594。

当我添加一个新项目并返回到同一个 tableviewController 时，contentSize.height 是 749。

但是，我无法滚动查看 tableView 底部新添加的单元格。它只是不会在那里滚动。它在旧的 contentSize 高度反弹。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-07-08T00:03:56.267

我遇到了同样的问题，最终得到了这个解决方法。我正在设置`contentSize`正确的之后`[self.tableView endUpdates];`

```
[self.tableView endUpdates];

NSLog(@"%f", self.tableView.contentSize.height);

self.tableView.contentSize = [self.tableView sizeThatFits:CGSizeMake(CGRectGetWidth(self.tableView.bounds), CGFLOAT_MAX)];

NSLog(@"%f", self.tableView.contentSize.height);

[self.tableView setContentInset:UIEdgeInsetsMake(50, 0, -50, 0)]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T20:59:28.727

我在使用带有两个子 VC 的自定义视图控制器时遇到了同样的问题，一个是 tableview + fetched results controller。

在从一个 vc 添加内容并返回我的表格后，我会明白我无法滚动到底部的新内容。

因此，在我的 tableview + fetched results 控制器中，我根据我拥有的已获取对象的数量调整内容大小，无论它们来自何处。

最坏的情况是我在展示 VC 时没有添加任何内容，但成本很低。

```
//In my tableview + fetched results controller class
-(void)viewDidAppear:(BOOL)animated{
    [super viewDidAppear:animated];

    NSUInteger objCount = self.fetchedResultsController.fetchedObjects.count;
    //My custom cell has a height of 50.0f, yours may not!
    CGFloat tableHeight = objCount * 50.0f;

    NSLog(@"%i objects, total height: %f",objCount,tableHeight);

    [self.tableView setContentSize:CGSizeMake(self.tableView.contentSize.width, tableHeight)];

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-21T15:22:12.787

我有带有“UITableViewAutomaticDimension”的动态表格视图。在重新加载后发生了一些事情，它的内容大小等于它的帧大小。在我手动将内容大小设置为表格边界大小后，一切正常。我希望这有帮助。

```
table.beginUpdates()
table.contentSize = CGSize(width: table.bounds.width, height: table.bounds.height)
table.endUpdates() 
```

这是在我完成 table.reloadData() 之后

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2015-01-26T08:42:19.267

尝试这个：

我遇到了类似的问题。在我的情况下，我将一个 tableview 拖到一个自定义视图控制器，它由一个 push segue 呈现。如果 tableview 中显示的数据量超过某个数字，那么我无法触摸单元格在表格视图的底部。

已经尝试了很多方法：设置表格视图的框架/内容大小，但没有一个对我有用。最后，我找到了根本原因并以一种简单的方式解决了它（虽然不是很优雅）。

首先，根本原因：IB创建的表格视图的宽度大于其父视图控制器。因此，任何超出视图边界的单元格都不会被触摸。

所以，解决方法很简单：进入StoryBoard，调整table view的宽度，使其小于父view的宽度。好像一个table view是StoryBoard创建的，不能通过代码改变它的frame。这就是我到目前为止所发现的。我猜这是 StoryBoard 的错误。

希望它对你有用。

# jquery - 使用 jQuery 切换 wp_query 循环中的隐藏文本

> ID：13181608
> 
> 赞同：0
> 
> 时间：2012-11-01T16:39:53.157
> 
> 标签：jquery, wordpress, foreach

Ok so i have 5 images that when selected shows a load of information on the picture underneath it. 图像和文本存储在自定义联系人类型中。现在我让它处理最后一张图片，这是自定义内容类型中的第一篇文章。我是编写自己的 jQuery 的新手，所以不确定每个循环是否需要某种类型的东西？

这里图像类被赋予了一个ID，所以每个人都是不同的

```
<a href="#" class="tutorlink-<?php the_id(); ?>"><img src="<?php echo $TutorImageURL[0]; ?>" alt="<?php echo get_post_meta($att, '_wp_attachment_image_alt', true); ?>" /></a>              
<?php endwhile; ?>
<div class="tutor-block">
<img src="<?php bloginfo('template_directory'); ?>/images/click.png" alt="tutors"/>
</div>

<div class="tutor-description">
<?php // The Loop
 while ( $tutors->have_posts() ) : $tutors->the_post(); ?> 
```

这里包含的 div 类也被赋予了自己的 id

```
<div class="tutor-description-inner-<?php the_id(); ?>">
  <?php the_content(); ?>
</div> 
```

此脚本首先隐藏文本。

```
<script>
var id = <?php echo $theID; ?>;
$('.tutor-description-inner-'+id+'').hide();
</script> 
```

这是我到目前为止编写的脚本，用于切换最后一张图片的文本。

```
<script>                  
 $(document).ready(function() {
   $('.tutorlink-'+id+'').click(function() {
     $('.tutor-description-inner-'+id+'').toggle('slow');   
  return false;
    });
});
</script> 
```

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:49:19.850

您最好在 id 属性中使用 id，然后将点击事件应用于“tutorlink”类

```
<a href="#" class="tutorlink" id="<?php the_id(); ?>"><img src="<?php echo $TutorImageURL[0]; ?>" alt="<?php echo get_post_meta($att, '_wp_attachment_image_alt', true); ?>" /></a> 
```

这是描述：

```
<div class="tutor-description-inner" id="tutor-description-inner-<?php the_id(); ?>">
  <?php the_content(); ?>
</div> 
```

这是点击事件

```
 <script>                  
     $(document).ready(function() {
       $('.tutorlink').click(function() {
         $('.tutor-description-inner').hide('fast', function() {
            $('#tutor-description-inner-'+this.id+'').toggle('slow');
         });   
      return false;
        });
    });
    </script> 
```

# php - 将唯一日期插入 txt 文档

> ID：13181609
> 
> 赞同：0
> 
> 时间：2012-11-01T16:39:59.280
> 
> 标签：php

我正在尝试此脚本仅将唯一日期插入文本文件，但它无法正常工作：

```
$log_file_name = "logfile.txt";
$log_file_path = "log_files/$id/$log_file_name";

if(file_exists($log_file_path)){
  $not = "not";
  $todaydate = date('d,m,Y');
  $today = "$todaydate;";
  $strlength = strlen($today);
  $file_contents = file_get_contents($log_file_path);
  $file_contents_arry = explode(";",$file_contents);
  if(!in_array($todaytodaydate,$file_contents_arry)){
    $append = fopen($log_file_path, 'a');
    $write = fwrite($append,$today); //writes our string to our file.
    $close = fclose($append); //closes our file    
  }
  else {
    $append = fopen($log_file_path, 'a');
    $write = fwrite($append,$not); //writes our string to our file.
    $close = fclose($append); //closes our file    
  }
}
else{
  mkdir("log_files/$id", 0700);
  $todaydate = date('d,m,Y');
  $today = "$todaydate;";
  $strlength = strlen($today);
  $create = fopen($log_file_path, "w");
  $write = fwrite($create, $today, $strlength); //writes our string to our file.
  $close = fclose($create); //closes our file
} 
```

问题在于 if else 语句如果它已经在数组中，则应该将其写入其中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T16:57:59.430

`$todaytodaydate`应该`$todaydate`

# css - 在 CSS 中添加高度：100% 到 body

> ID：13181612
> 
> 赞同：1
> 
> 时间：2012-11-01T16:40:08.710
> 
> 标签：css

这更像是一个奇怪的问题，而不是需要帮助。

我正在使用百分比高度解决问题。我注意到，当我将 height: 100% 添加到 body 标签时，它会将 body 拉伸到窗口的确切高度（它应该这样做）。但是，我的内容超出了我身体的总高度。

这是坏事吗？将我的正文设置为 100% 并让内容溢出，或者不设置高度并让正文“包含”所有内容更好？

编辑：

页面上没有任何内容是绝对定位的。我也清除了所有的花车。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:45:54.957

如果您的 body 的高度设置为 100%，并且页面上的所有对象都没有设置为 position: absolute，那么您的 body 应该始终根据其内容进行调整。听起来您的页面上可能有一些具有特殊定位的项目。

# algorithm - 递归关系：证明 (n/2) + (n/2) = O(n)

> ID：13181613
> 
> 赞同：0
> 
> 时间：2012-11-01T16:40:09.637
> 
> 标签：algorithm, complexity-theory, time-complexity

所以说我有一个这样的算法：

```
void dummy_algorithm(int a[]) {
   int center = floor(a.length/2);
   //For reference purposes: Loop 1  
   for(int i = 0; i < center; i++) {
       //The best code you've ever seen
   }
   //Loop 2
   for(int j = center + 1; j < a.length; j++) {
      //Slightly less awesome code
   }
} 
```

这是非常基本的东西。我知道两个循环都遍历数组的一半，从而给每个循环一个 (n/2) 复杂性。但是，该方法所做的总工作显然是 O(n)。

所以，我的问题是：我如何证明（通过递归关系）这个算法是 O(n)？还是我完全错了？

注意：我不能将两个循环合二为一。它们执行最终进入递归调用的操作。其他你能想到的都是不允许的。这个问题有很多限制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T17:01:13.227

如果您真的在寻找*O(x) + O(y) = O(x+y)*的证明，它可以按照以下方式工作：

R1 ∈ O(x) ∧ R2 ∈ O(y)
⇒ ∃ a。R1 < ax ∧ ∃ b。R2 < 由
⇒ ∃ a, b。R1 < ax ∧ R2 < by
⇒ ∃ a, b。R1+R2 < ax + 由
⇒ ∃ a, b。c=max(a,b) ∧ R1+R2 < cx + cy
⇒ ∃ c。R1+R2 < c(x+y)
⇒ R1+R2 ∈ O(x+y)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T16:43:33.613

```
 (N/2) + (N/2)
= 2*(N/2)
= 2N/2
= N 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T16:50:29.303

时间复杂度（以及是否需要递归关系）**取决于您在循环**中所做的事情，即

```
//The best code you've ever seen (*complexity1*) 
```

和

```
 //Slightly less awesome code (*complexity2*) 
```

是。

**如果每次迭代只需要固定的时间量**，即*复杂*度1和*复杂度*2在O(1)中，那么总复杂度将是n*O(1) = O(n)。这显示了[Big-O-Notation 的](http://en.wikipedia.org/wiki/Big_O_notation)真正作用：从诸如*复杂性*1和*复杂性*2 等常量因素中抽象出来。

**如果每次迭代都需要 O(f(n))**，那么您的总时间复杂度将为 O(n*f(n))。

**如果每次迭代都进行递归调用**，即`dummy_algorithm`使用较小参数调用，则确实需要递归关系来计算时间复杂度。递归关系的外观取决于您进行递归调用的频率以及使用什么参数。[http://en.wikipedia.org/wiki/Recurrence_relation](http://en.wikipedia.org/wiki/Recurrence_relation)向您展示了如何找到和解决适当的递归关系。

# visual-studio-2010 - 一步一步，如何在 Visual Studio 2010 中为给定类型的每个文件添加自定义构建步骤？

> ID：13181614
> 
> 赞同：24
> 
> 时间：2012-11-01T16:40:08.560
> 
> 标签：visual-studio-2010, msbuild, code-generation, build-process, customtool

**问题**

1.  我在 Visual Studio 2010 项目中有一堆自定义文件。
2.  当它们更改时，我需要在这些自定义文件上运行一个工具。
3.  该工具生成现有 .cpp 文件包含的 .h 文件。
4.  我希望该工具作为构建过程的一部分运行。
5.  它需要在 Visual Studio 中运行，但理想情况下也可以作为 msbuild 进程的一部分运行。

**现有不合标准的解决方案**

在每个文件上，每次添加时，我都可以转到文件设置，将项目类型设置为自定义构建工具，然后在自定义构建工具对话框中，设置命令行参数，设置（硬编码）输出，然后设置（硬编码的）附加依赖项。

显然，这是一个糟糕的解决方案，因为每次添加自定义类型的新文件时，它的工作量都很大且容易出错。

**所需的解决方案**

我为任何扩展名为 .foo 的文件设置了 Visual Studio，当 .foo 文件更改时，它会在编译 CPP 代码之前运行工具 bar.exe。

**我尝试过的事情**

基于此： http: [//msdn.microsoft.com/en-us/library/3e889s84](http://msdn.microsoft.com/en-us/library/3e889s84(v=vs.100).aspx) (v=vs.100).aspx 我试图设置一个 .targets 和 .xml 文件。但是，我不知道如何创建一个新的项目类型以使其显示在 Visual Studio 中，我也不知道如何使其神奇地应用于每个 .foo 类型的文件。最重要的是，我还没有弄清楚其中的任何链接如何链接到任何描述调用我的 bar.exe 工具的行为。

我试图搜索所有 Visual Studio 的 xml/targets 文件，以跟踪现有的项目类型并确定它们如何转换为实际的构建操作。它总是在 ItemType 的墙上结束，那里有一堆在 ProjectItemsSchema 中描述的，但我找不到它们在哪里实现，或者我自己如何实现它们。

MSDN 的文档完全失败了，我想我已经阅读了每一个可能相关的页面十次，但无济于事。

在 Visual Studio 2008 中，我使用 .rules 文件进行了类似操作，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<VisualStudioToolFile
Name="Foo Build Rules"
Version="8.00"
>
<Rules>
    <CustomBuildRule
        Name="FooBuild"
        DisplayName="FooGen"
        CommandLine="..\..\tools\FooGen.exe [inputs]"
        Outputs="$(InputName).h"
        AdditionalDependencies="*.foo"
        FileExtensions="*.foo"
        ExecutionDescription="Generating Foos..."
        >
        <Properties>
        </Properties>
    </CustomBuildRule>
</Rules>
</VisualStudioToolFile> 
```

然而，此功能已在 2010 年被弃用，我一直无法弄清楚如何在新系统中复制它。

帮助？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-11T21:07:05.047

首先将自定义 ItemGroup 添加到您的项目文件中。

如下所示：

```
<ItemGroup>
    <CustomBuild Include="faq.txt">
      <Message>Copying readme...</Message>
      <Command>copy %(Identity) $(OutDir)%(Identity)</Command>
      <Outputs>$(OutDir)%(Identity)</Outputs>
    </CustomBuild>
  </ItemGroup> 
```

接下来创建一个自定义目标并定义您希望在构建过程中运行自定义目标的位置。

下面的链接更详细地一步一步地解释。

希望这可以帮助。

[演练：使用 MSBuild 创建 Visual C++ 项目](http://msdn.microsoft.com/en-us/library/dd293607%28v=vs.100%29.aspx)

[如何：将自定义构建工具添加到 MSBuild 项目](http://msdn.microsoft.com/en-us/library/ff770593%28v=vs.100%29.aspx)

[注意](http://msdn.microsoft.com/en-us/library/ee862524%28v=vs.100%29.aspx)：在当前版本中，IDE 不支持创建新规则。因此，使用 Visual C++ 早期版本创建的项目中的规则文件的最简单方法是将项目迁移到当前版本。

# unicode - 与汉字 U+5F8C 关联的 Unicode 数据可能不一致 后

> ID：13181619
> 
> 赞同：1
> 
> 时间：2012-11-01T16:40:35.563
> 
> 标签：unicode, character-encoding, cjk

[在这里](http://www.unicode.org/cgi-bin/GetUnihanData.pl?codepoint=5f8c)，您将找到中文 Unicode 字符 U+5F8C 后的以下数据：

> kGB0 = 6565（简体后的kuten形式）
> 
> kGB1 = 2683
> 
> kSimplifiedVariant = U+540E 后</p>

字符 U+58FC 的简化形式如何等于字符 6565（即字符后）并且同时具有 kSimplifiedVariant = U+540E ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T17:42:42.360

kGB0 和 kGB1 映射仅指定其他字符代码中字符的代码编号。数字6565就是GB 2312-80中U+5F8C的代号。

另一方面，kSimplifiedVariant 映射将一个 Unicode 字符映射到另一个字符，如第3.7.1节 UAX #38 的[简体和繁体中文变体中所述。](http://www.unicode.org/reports/tr38/index.html#SCTC)字符 U+5F8C 和 U+540E 是不同的代码点，但映射定义了它们之间的对应关系。这样的通信没有任何含义。它只是意味着您可以执行某些转换，例如将 CJK 字符替换为其简体中文形式。

# ruby-on-rails - 如何使用 Vim 脚本快速重构为更新的 Ruby 语法？

> ID：13181620
> 
> 赞同：1
> 
> 时间：2012-11-01T16:40:43.450
> 
> 标签：ruby-on-rails, ruby, regex, vim

我想快速重构当前行例如：

```
Subscription.create(:user => @user, :app => this_app, :verified => true, :approved => true) 
```

到

```
Subscription.create(user: @user,app: this_app, verified: true, approved: true) 
```

我只想在光标下方的行或选定的代码中更改该语法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T16:48:23.393

这将起作用

```
:%s/:\([^ ]*\)\(\s*\)=>/\1:/g 
```

[从那篇博文中](http://robots.thoughtbot.com/post/17450269990/convert-ruby-1-8-to-1-9-hash-syntax)偷来的

请注意，您也可以使用[该 gem](https://github.com/michaeledgar/hash_syntax/)

# css - 用 css3 定义 scale3d 原点

> ID：13181621
> 
> 赞同：0
> 
> 时间：2012-11-01T16:40:49.200
> 
> 标签：css

我一直致力于使用 css3 创建动画条形图。它在酒吧的侧面一直运作良好，但酒吧的顶部和底部一直存在问题。

我一直在通过 jQuery 更改它们的 css 'height' 属性来缩放侧面，但我意识到这不是最好的方法。我试过使用 scale3d()，但它总是从似乎是对象中心的地方缩放对象。我需要它从立方体底部缩放对象。这是我到目前为止的css（使用手写笔）

```
#barTwo
#barOne
#barThree
#barFour
    position relative
    -webkit-transition -webkit-transform 2s linear
    -webkit-transform-style preserve-3d
    height 400px
    width 100px
    float left
    margin-left 100px

.face
    position absolute
    height 360px
    width 80px
    padding 20px
    background-color rgba(50, 50, 50, 0.3)
    bottom 0px
    left 0px
    -webkit-transition 10000ms all

.one /* top */
    -webkit-transform rotateX(90deg) translateZ(340px)
    height 80px     
    background-color rgba(50, 50, 50, 0.9)
    display none

.two /* front */
    -webkit-transform translateZ(60px)
    background-color rgba(50, 50, 50, 0.7)

.three /* right */
    -webkit-transform rotateY(90deg) translateZ(60px)
    background-color rgba(50, 50, 50, 0.6)

.four /* back */
    -webkit-transform rotateY(180deg) translateZ(60px)
    background-color rgba(50, 50, 50, 0.7)

.five /* left */
    -webkit-transform rotateY(-90deg) translateZ(60px)
    background-color rgba(50, 50, 50, 0.8)

.six /* bottom */
    -webkit-transform rotateX(-90deg) translateZ(60px) rotate(180deg)
    background-color rgba(50, 50, 50, 0.9)
    height 80px
    display none 
```

画了一个很棒的矩形，但我一直在想“向上”缩放它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T22:43:07.847

您正在寻找`*-transform-origin`房产。其默认值为 50%、50%。如果你想让事情向上扩展，那么 50%、100% 就是你要找的（它将原点设置在元素的底部。）

# java - JPA 和 Hibernate：仅比较时间戳的时间部分

> ID：13181624
> 
> 赞同：2
> 
> 时间：2012-11-01T16:40:59.513
> 
> 标签：java, hibernate, jpa, jpql

我通过 JPA 使用 Hibernate，我需要按其`Date`属性的时间部分过滤记录。

```
public class Foo {
    Date getDateTime() {
        // Returns a date and time value.
    }
}

Time startTime = ...;
Time endTime = ...;

TypedQuery<Foo> query = entityManager.createQuery("SELECT foo FROM Foo foo where :startTime <= foo.dateTime AND foo.dateTime <= :endTime", Foo.class);
query.setParameter("startTime", startTime);
query.setParameter("endTime ", endTime); 
```

当然这不起作用，因为您不能直接比较 a`Date`和 a `Time`。如果这是一个 SQL 查询，那么我会使用一些特定于 DBMS 的日期函数来比较它们，但是如何比较 JPA 中的日期和时间呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T04:54:42.580

如果您使用 JPA，您可以使用 @Temporal(TemporalType.TIME) 它只会返回 TIMESTAMP 的时间部分。喜欢：@Temporal(TemporalType.TIME) 日期 getDateTime()

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T16:46:07.817

为什么不使用本机查询，然后利用您熟悉的数据库特定功能。一旦你有了 Native Query，你就可以将`java.sql.Time`对象转换为 long 并执行它。

[EntityManager API 文档](http://docs.oracle.com/javaee/6/api/javax/persistence/EntityManager.html#createNativeQuery%28java.lang.String,%20java.lang.String%29)

例如，如果您使用的是 Oracle。

```
 long MILLIS_PER_DAY = 24 * 60 * 60 * 1000;
    long startTimeMillis = (startTime.getTime() % MILLIS_PER_DAY)/1000;
    long stopTimeMillis = (endTime.getTime() % MILLIS_PER_DAY)/1000;
    entityManager
            .createNativeQuery(
                    "select * from foo where to_number(to_char(date_time, 'sssss')) between ?1 and ?2", Foo.class)
            .setParameter(1, startTimeMillis)
            .setParameter(2, stopTimeMillis).getResultList(); 
```

实际查询将根据您的数据库风格而有所不同，但是创建 NativeQuery 应该允许您利用特定于您的数据库的底层供应商功能。

应对这一挑战的另一种方法是创建一个视图，其中包含一个列，该列包含具有日期数据类型的列的时间部分。这将允许您以在代码中透明的方式利用底层数据库技术。设置此列后，您将在查询中建立正确的 where 子句。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T14:31:39.570

没有任何简单或标准化的方法可以仅与使用 JPA2 的现有日期时间/时间戳列的时间（或日期）组件进行比较。选项：

1.  **使用本机查询**。 如果您需要秒精度（不是毫秒），[kmb385 的答案有效。](https://stackoverflow.com/a/13181715/123378)我认为更常见的原生 SQL 方法是使用 CAST 或 EXTRACT 仅与时间组件进行比较。

2.  **将另一列添加到仅包含日期时间的时间组件的表/视图中，**并使用它进行比较。您可能还会使用`@Temporal(TemporalType.TIME)`注释向 Foo 添加另一个字段。

# ios - 添加 iAd 而不影响以前的用户

> ID：13181633
> 
> 赞同：3
> 
> 时间：2012-11-01T16:41:40.150
> 
> 标签：ios, objective-c, iad

我想知道是否有一种很好的方法可以在我的应用中实施广告而不影响已经下载它的用户。对于我的下一次更新，我想添加带有 IAP 选项的 iAd 以将其删除。问题是，我不希望广告出现在已经在使用该应用程序的用户身上。

我正在考虑使用存储在 NSUserDefaults 中的 BOOL 来跟踪是否显示广告。我希望新用户下载设置了此标志的应用程序以显示广告，但正在更新以将此标志设置为好像他们已经购买了此新 IAP 的用户。如何以及什么是这样做的好方法？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T16:46:17.817

没有真正的方法。
假设您没有使用 UDID 并将其发送到某个服务器进行检查（这无论如何都不会解决多个设备）。
您现在可能应该发布一个没有 iAd 的新版本，保存在这些用户可以不用 iAd 的首选项（或者更好的是 iCloud）中，一段时间后，发布您的 iAd 版本，检查该偏好。
当然，如果用户删除应用程序或在新设备上安装 - 您的偏好会丢失，他会获得 iAd。
这就是 iCloud 派上用场的地方，但您可能希望以不同的方式使用 iCloud，因此没有干净的解决方案。
另请注意，没有升级的用户无论如何都会获得 iAd——就像 NSPostWhenIdle 所说的那样。

# java - 返回一些负数的递归阶乘方法

> ID：13181638
> 
> 赞同：7
> 
> 时间：2012-11-01T16:41:59.123
> 
> 标签：java, factorial

这是我的阶乘方法：

```
public static long factorial(int num1) {
    if (num1 <= 1) 
        return 1; 
    else
        return num1 * factorial(num1 - 1);
} 
```

这就是所谓的递归阶乘方法：

```
for (i = 0; i <= 25; i++)
    System.out.printf  ("%d !=  %,d\n", i, factorial (i)); 
```

到目前为止一切顺利，起初输出似乎是正确的，但有些阶乘是负数而不是正数：

```
OUTPUT:
0 !=  1
1 !=  1
2 !=  2
3 !=  6
4 !=  24
5 !=  120
6 !=  720
7 !=  5,040
8 !=  40,320
9 !=  362,880
10 !=  3,628,800
11 !=  39,916,800
12 !=  479,001,600
13 !=  6,227,020,800
14 !=  87,178,291,200
15 !=  1,307,674,368,000
16 !=  20,922,789,888,000
17 !=  355,687,428,096,000
18 !=  6,402,373,705,728,000
19 !=  121,645,100,408,832,000
20 !=  2,432,902,008,176,640,000
21 !=  -4,249,290,049,419,214,848
22 !=  -1,250,660,718,674,968,576
23 !=  8,128,291,617,894,825,984
24 !=  -7,835,185,981,329,244,160
25 !=  7,034,535,277,573,963,776 
```

21、22和24都是负数，为什么会这样？这是某种“除以0”的悖论吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-01T16:45:28.310

你是溢出来的。您需要根据包含 long 值的二进制数来考虑它。只要将 1 添加到 long 可以包含的最大正值，它就会滚动到负最小值。

您可能需要阅读本文以获得全面的理解。 [http://en.wikipedia.org/wiki/Two%27s_complement](http://en.wikipedia.org/wiki/Two%27s_complement)

在 Java 中，您可以使用 BigInteger 获取更大的值 [http://docs.oracle.com/javase/1.4.2/docs/api/java/math/BigInteger.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/math/BigInteger.html)

# javascript - span 标签的内容被截断

> ID：13181642
> 
> 赞同：0
> 
> 时间：2012-11-01T16:42:10.250
> 
> 标签：javascript, html, css

我的名字是垂直显示的。基本上这是我的html页面的结构。

```
<div>                                  <div/>
  <a>name<span>Details</span></a>          <a>name<span>Details</span></a>      
  <a>name<span>Details</span></a>         <a>name<span>Details</span></a>
</div>                                 </div> 
```

因此，每个“a”标签都包含一个名称，而 span 标签包含有关该名称的详细信息。span 标签的显示属性设置为“none”开始，当鼠标悬停在“a”标签内容上时更改为“block”。问题是跨度标记内容在 IE8 中被截断。在 Firefox 和 chrome 中运行良好。

我的 CSS 文件：

```
#tooltip1 { position: relative; }
#tooltip1 a{text-decoration: none; color:#000000;} 
#tooltip1 a span { display: none; color: #FFFFFF; }    
#tooltip1 a:hover span { display: block; position: absolute; 
                         background-color: #aaa; color: #FFFFFF; 
                         padding: 5px; height: 10px; 
                         width:500px; } 
```

我将鼠标悬停在这张图片中的“OMA”上，而不是显示“OMAHA NEBRASKA”，它只显示“OMAHA” 我该怎么做才能让 IE 显示所有文本？我曾尝试使用“溢出”属性，但没有奏效。

![它在我的系统中的样子的图片](../Images/0032ae2fe28c315986842e0bf4a65e7f.png)

这是 jsfiddle 的链接，如果想查看所有代码，请查看 [http://jsfiddle.net/7s4Np/10/](http://jsfiddle.net/7s4Np/10/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:53:39.107

尝试将 z-index 应用于 a:hover span

```
#tooltip1 a:hover span{ z-index:5; } 
```

我认为工具提示隐藏在流程中的下一个相关元素后面，并且其中包含不透明的背景颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T16:49:28.927

问题在于应用于 div 标签的 .container 类的 css。尽管我在这里的问题没有显示应用 .container 类的 div，但它在我发布的 jsfiddle 链接中显示了这一点。

这就是问题所在：

```
.container {width: 100px; float: left; overflow: hidden; padding: 10px;} 
```

我删除了“溢出：隐藏”属性，它就像一个魅力。

在我之前解决此问题的尝试中，我已将“溢出：可见”应用于子元素（跨度标记）。子元素中的值（溢出：可见）是否应该超过父元素中定义的值（溢出：隐藏）？

无论如何，谢谢你们所有的时间。

# c# - 实体框架 5.0 和 FileTable

> ID：13181645
> 
> 赞同：2
> 
> 时间：2012-11-01T16:42:13.117
> 
> 标签：c#, sql, entity-framework, sql-server-2012, filetable

所以说我的 SQL Server 2012 数据库中有以下表：

```
Person
  PersonId
  FirstName
  LastName

Photo
  PhotoId
  PersonId (fk)
  DateTaken

PhotoFileTable
  (all the FileTable columns) 
```

存储在磁盘上的照片结构如下：\\myserver\filestreamshare\People\PersonId\Photo1.tif

并且非常重要：磁盘上已经有大量照片需要添加到数据库中——这就是为什么我认为 FileTable 会很酷，因为它会自动拾取它们。

所以我需要做两件事——首先，将 Photo 表与 PhotoFileTable 相关联，这样我就可以获得一个人的所有照片。其次（也是更痛苦的）我想使用 Entity Framework 5.0 来做到这一点。

使用 edmx 设计器，我无法添加包含hierarchyid 的表。由于这是主键，因此它似乎应该用作 PhotoId 和 path_locator（FileTable hierarchyid）之间的 1:1 映射。但是我也无法添加照片表。

这里最好的方法是什么？归根结底，我想在 C# 中使用 EF 对象。理想情况下，它看起来像：

```
class Person
  List<Photo>

class Photo
  Filestream (to lazy load the image from the filesystem to bitmapimage)
  Path (?)

or maybe
class Photo
  BitmapImage (lazy load) 
```

我会以错误的方式解决这个问题吗？我可以从这里到那里吗？想法或建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T09:09:51.217

也许你可以试试这个。

桌子：

```
PhotoTable(
PhotoID uniqueidentifier ROWGUIDCOL  NOT NULL,
PhotoImage varbinary(max) FILESTREAM  NULL, 
```

)

插入：

```
create procedure spPhotoInsert
   @PhotoID uniqueidentifier
   ,@sPhotoPath nvarchar(max)
   ,@PhotoImage varbinary(max)
 as
begin

    select 
        cast('' as  varbinary(max)) PhotoImage
    into 
        #ret1

    truncate table #ret1

    declare @strSql nvarchar(max) = 'select * from OPENROWSET(BULK ''' 
                                    + @sPhotoPath + ''',SINGLE_BLOB) AS PhotoImage'
    insert into #ret1 EXEC(@strSql)

    insert into
        PhotoTable
           (
           PhotoID
           ,PhotoImage
           )
    select
        @PhotoID
        ,PhotoImage
    from
        #ret1

    drop table #ret1

end 
```

更新：

```
create procedure spPhotoUpdate
   @PhotoID uniqueidentifier
   ,@sPhotoPath nvarchar(max)
   ,@PhotoImage  varbinary(max)
as
begin

    select 
        cast('' as  varbinary(max)) PhotoImage
    into 
        #ret1
    truncate table #ret1

    declare @strSql nvarchar(max) = 'select * from OPENROWSET(BULK ''' 
                                    + @sPhotoPath + ''',SINGLE_BLOB) AS PhotoImage'
    insert into #ret1 EXEC(@strSql)

    update
        PhotoTable
    set
        PhotoImage = r.PhotoImage
    from
        PhotoTable, #ret1 r
    where
        PhotoID = @PhotoID

    drop table #ret1

end 
```

删除：

```
create procedure PhotoDelete
   @PhotoID uniqueidentifier
as
begin

    delete
        PhotoTable
    where
        PhotoID = @PhotoID

end 
```

和观点：

```
CREATE VIEW vPhotoTable
AS
    select
       PhotoID
       ,'' as sPhotoPath
       ,PhotoImage
    from 
        PhotoTable 
```

在此之后，可以使用 EF 读取/写入图像，如下所示：

```
//InsertPhoto(sPath) 
Entities db = new Entities();
vPhoto p = db.vPhotos.CreateObject();
p.PhotoID = Guid.NewGuid();
p.sPhotoPath = sPath;
db.vPhotos.AddObject(p);
db.SaveChanges();

//UpdatePhoto(PhotoID,sPath):
Entities db = new Entities();
vPhoto p = db.vPhotos.Where(x => x.PhotoID == PhotoID).Single();
p.sPhotoPath = sPath;
db.ObjectStateManager.ChangeObjectState(p, EntityState.Modified);
db.SaveChanges();

//DeletePhoto(PhotoID):
Entities db = new Entities();
vPhoto p = db.vPhotos.Where(x => x.PhotoID == PhotoID).Single();
db.vPhotos.DeleteObject(p);
db.SaveChanges(); 
```

# google-app-engine - Google App Engine 身份验证选项

> ID：13181648
> 
> 赞同：1
> 
> 时间：2012-11-01T16:42:25.610
> 
> 标签：google-app-engine

我希望在 Google Cloud 上放置一个应用程序（基本上是将一个 Visual Basic 项目转换为 Javascript，然后上传它。）我想为一个基于云的应用程序启动一个订阅服务，而且它不会是庞大的想象力的延伸。非常小（阅读：不是大量的列或大量数据），只是想给用户一个选择。

我今天注册了，发现有 3 个身份验证选项。但是，我没有看到替代方案（例如：基于确认的付费客户帐户的身份验证）。

我是否可以假设没有其他方法可以限制对 Google App Engine 应用程序的访问（出于专有原因）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:57:21.430

您可以限制对任何您想要访问的人的访问，您只需要以某种方式跟踪用户并为他们提供某种类型的令牌以允许他们访问或不授予他们访问权限。

我已经使用 webapp2 会话完成了一个小型论坛。每个用户都会获得一个永久 ID，他们可以通过使用用户名和密码登录来检索，并且只有当他们在正确的列表中拥有一个 ID 时，他们才能访问某些内容。 [webapp2 会话](http://webapp-improved.appspot.com/api/webapp2_extras/sessions.html)

```
# To set a value:
self.session[username] = 'Paid'

# To get a value:
is_paid = self.session.get(username) 
```

也许（我没用过）看看应用引擎样板，它有很多你可以使用的登录选项。[App Engine 样板](http://ae-boilerplate.appspot.com/)| [测试登录](http://ae-boilerplate.appspot.com/login?continue=/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T19:17:39.807

身份验证与付费/未付费无关。在确定一个帐户是否“付费”之前，您需要知道该用户是谁。这就是身份验证的作用。AppEngine 具有对 Google 帐户或 OpenId 身份验证的内置支持。如果需要，您可以使用 Facebook 进行身份验证，但您必须自己集成。

一旦您知道哪个用户访问了您的应用程序，您就可以决定您的应用程序的哪些部分可供免费用户、付费帐户等使用。

# xml - 如何在 xslt 中找到从节点到其子节点的相对 xpath 表示法？

> ID：13181650
> 
> 赞同：0
> 
> 时间：2012-11-01T16:42:28.293
> 
> 标签：xml, xslt, xpath

我对 xslt 比较陌生，但我有一些运气来设计一个巨大的 xml 文件。现在我被困在一个地方，无法继续。可以说xml文件的结构有点像

```
<xxx>
.......
.......
.......
 <Field id="123" type="fld" elem="3">
   <td:value passed="true"> 25 </td:value>
 </Field>
.......
.......
.......

</xxx> 
```

我目前在 Field 节点。如果我这样做，`<xsl:value of select="name()" />`它会给出“Field”，如果我这样做，`<xsl:value of select="@type" />`我会得到“fld”。但如果我这样做，`<xsl:value of select="." />`我得到的值`<td:value>`是 25。

我担心的是我需要在 td:value 中获取“通过”属性的值。如果我从当前位置使用以下模板，我可以访问该属性。

```
<xsl:apply-templates select="*[@passed]" />

  <xsl:template match="*[@passed]" >
       <xsl:value-of select="@passed" />
     </xsl:template> 
```

但问题是“通过”属性可能并不总是存在，所以我需要`<td:value>`只使用节点名称来访问节点。

我试过

```
<xsl:apply-templates select=".//td" />
<xsl:apply-templates select=".//td:value" />
<xsl:apply-templates select=".//*" />
<xsl:apply-templates select=".*" />
<xsl:apply-templates select="td" /> 
```

似乎没有任何效果。我如何从 Field 节点到达那个 td:value 节点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T17:04:22.870

您需要在输入 XML中声明分配给`td`前缀 of的相同命名空间。`td:value`例如：

```
<foo xmlns:td="urn:td">
  <Fieldid="123" type="fld" elem="3">
    <td:value passed="true"> 25 </td:value>
  </Field>
</foo> 
```

XSLT 可能类似于：

```
<xsl:template match="Field">
  <xsl:if test="td:value@passed" xmlns:td="urn:td">
    <xsl:value-of select="td:value"/>
  </xsl:if>
</xsl:template> 
```

重要的部分是名称空间与输入文档中的名称相同，XSLT 文档中的前缀名称是否不同都没有关系。如果可能，并且如果所有 XML 都在您的控制之下，那么为了清楚起见，它应该是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T17:00:08.610

澄清一下，您当前位于**field**元素上，并且您正在尝试选择子**td:value**以获取其**@passed**属性，但如果此属性不存在，您希望获取获取元素的值反而。

嗯，你可以做的是首先做的是替换这个

```
<xsl:apply-templates select="*[@passed]" /> 
```

有了这个

```
<xsl:apply-templates select="*" /> 
```

然后，您需要两个匹配的模板；一种用于当属性存在时，一种用于捕获其他情况

```
<xsl:template match="Field/*[@passed]" >
   <xsl:value-of select="@passed" />
</xsl:template>

<xsl:template match="Field/*" >
   <xsl:value-of select="." />
</xsl:template> 
```

当您有两个这样的模板时，XSLT 将首先匹配更具体的一个。因此，如果存在**@passed**属性，则始终匹配第一个模板（即使第二个模板也匹配它）。当没有一个存在时，将使用第二个。

编辑：如果你不想指定元素名称，你可以用这个替换你的模板......

```
<xsl:template match="*[@passed]" >
   <xsl:value-of select="@passed" />
</xsl:template>

<xsl:template match="*" >
   <xsl:value-of select="." />
</xsl:template> 
```

但是，这些将开始匹配可能影响 XSLT 其他部分的所有元素。因此，您可能必须在此处使用**mode**参数

```
<xsl:apply-templates select="*" mode="Field" />

<xsl:template match="*[@passed]" mode="Field" >
   <xsl:value-of select="@passed" />
</xsl:template>

<xsl:template match="*" mode="Field" >
   <xsl:value-of select="." />
</xsl:template> 
```

# php - mysql正在插入doublepost

> ID：13181651
> 
> 赞同：0
> 
> 时间：2012-11-01T16:42:30.900
> 
> 标签：php, mysql, sql, insert, double

我在插入 mysql 时遇到问题。单击该按钮时，mysql insert 正在做一个双张贴。我找不到问题。为什么要双标？

代码在这里[http://pastebin.com/z1xx3fjt](http://pastebin.com/z1xx3fjt)

并且`postNewTopic.php`：

```
<?
session_start();
mysql_connect('.com', 'user', 'pw');
mysql_select_db('db');

function msg($status,$txt){
    return '{"status":'.$status.',"txt":"'.$txt.'"}';
}

if(empty($_POST['t']) or empty($_POST['ttitle'])){
    die(msg(0,"Complete all fields!"));
}

$title = mysql_real_escape_string($_POST['ttitle']);
$desc = mysql_real_escape_string($_POST['tdesc']);
$msg = mysql_real_escape_string($_POST['t']);

mysql_query("INSERT INTO f_topics(`title`, `text`, `desc`) 
                        VALUES('$title', '$msg', '$desc')");

echo msg(1,mysql_error());
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:52:06.983

也许您的**/favicon.ico**正在加载并导致您的脚本运行两次。

当您有捕获丢失文件的重写规则并且您没有`/favicon.ico`. *第一次发生在我身上，很有趣！*

**编辑**：

**考虑使用 HTTPfox**或其他一些跟踪浏览器`requests/responses`并查看页面加载次数的工具。这是您需要寻找的第一件事。

# jquery - 如果未选中复选框，请执行某些操作

> ID：13181652
> 
> 赞同：0
> 
> 时间：2012-11-01T16:42:34.127
> 
> 标签：jquery

在弄清楚这一点时遇到了一些麻烦。如果第二个和第三个中的复选框`td`都未选中，则禁用第四个中的复选框。

```
$('#allergies tbody tr').each(function () {
  if ($('td:eq(1) input[type="checkbox"]:not(:checked)', $(this)).length > 0 
      && $('td:eq(2) input[type="checkbox"]:not(:checked)', $(this)).length > 0) {
      $("td:eq(3) input", $(this)).attr('disabled', false);
  }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:45:20.007

```
$('#allergies tbody tr').each(function () {
  if ($('td:eq(1) input[type="checkbox"]:not(:checked)').length > 0 
      && $('td:eq(2) input[type="checkbox"]:not(:checked)').length > 0) {
      $("td:eq(3) input").prop('disabled', true);
  }
}); 
```

到 tr 使用中的特定的

```
$('#allergies tbody tr').each(function () {
  if ($('td:eq(1) input[type="checkbox"]:not(:checked)', $(this)).length > 0 
      && $('td:eq(2) input[type="checkbox"]:not(:checked)', $(this)).length > 0) {
      $("td:eq(3) input", $(this)).prop('disabled', true);
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T16:46:43.940

您的逻辑是正确的，但可读性较差..将它们分成较小的块

```
$('#allergies tbody tr').each(function () {
    var $this  = $(this);
    var chk1 = $this.find('td:eq(1) input[type="checkbox"]').is(':checked');
    var chk2 = $this.find('td:eq(2) input[type="checkbox"]').is(':checked');

    // If both are false then disable else 
    // enable them
    if(chk1 === false && chk2 === false){
       $this.find('td:eq(3) input').prop('disabled', true);
    }
    else{
       $this.find('td:eq(3) input').prop('disabled', false);
    }
}); 
```

# c# - 如何在 C# 中实现 web api 外观

> ID：13181654
> 
> 赞同：3
> 
> 时间：2012-11-01T16:42:34.503
> 
> 标签：c#, asp.net-mvc, c#-4.0, asmx, asp.net-web-api-routing

**背景：**我们需要能够支持 IIS 以外的 Web 服务器。为此，我们计划将所有处理逻辑转移到另一个服务，该服务将使用排队机制作为传输（具体为 RabbitMQ）。我们将有一个 HTTP web api，它基本上会将所有请求转发到这个其他服务；对于 IIS，我们将在 C# 和 Java 中为其他 Web 服务器（如 Tomcat）实现这个外观。

我的问题是这个；对于 c#，将所有 HTTP 请求和内容请求转发到另一个服务的最佳方式是什么。我正在考虑为此使用 asmx HTTPHandler；我让它工作；但解决方案很丑陋，需要使用 URL 重写器来处理干净的 URL。

有谁知道是否可以使用 MVC 或 web-api 本身来做到这一点？我们基本上把收到的所有内容；URL 本身、cookies、查询字符串等；将其打包并送去处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T16:46:31.750

想出了如何使用 Web-API 和通配符路由来做到这一点。

感谢您输入阿列克谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-10T08:07:21.347

（回复一个老问题，但可能对其他人有用）

我有一个类似的问题，我们需要在只支持基本或 kerberos 身份验证的 web api 前面放置一个外观。

我使用了这个解决方案，将传入的 url 转换为后端服务器的 url：http: [//www.dotnetspeak.com/asp-net-mvc/using-webapi-in-multi-tier-web-application/](http://www.dotnetspeak.com/asp-net-mvc/using-webapi-in-multi-tier-web-application/)

我在该解决方案中添加了一些逻辑来检查标头中的令牌（来自 asp.net 登录系统），因为 ExecuteAsync 在授权过滤器之前执行：

```
var token = controllerContext.Request.Headers.Authorization;
if (token != null && token.Scheme.Equals("bearer", StringComparison.InvariantCultureIgnoreCase))
{
     var ticket = Startup.OAuthOptions.AccessTokenFormat.Unprotect(token.Parameter);

     if (ticket != null && ticket.Identity != null && ticket.Identity.IsAuthenticated)
     {
          var claimsPrincipal = new ClaimsPrincipal(ticket.Identity);
          //From here, you can use the claimsPrinciple to check if user is allowed to even call the service.
          var authorized = claimsPrincipal.IsInRole("Users");

     }
 } 
```

如果 Startup.OAuthOptions 不可用，您可能需要将其转换为 Startup.cs 或 Startup.Auth.cs 中的静态变量。

因为我需要提供一种替代身份验证方法而不是后端服务的基本身份验证，所以添加了额外的标头更新以切换到基本身份验证。

```
//from the dotnetspeak solution (copy existing headers)
foreach (var httpRequestHeader in controllerContext.Request.Headers)
{
    client.DefaultRequestHeaders.Add(httpRequestHeader.Key, httpRequestHeader.Value);
}

//Set basic authentication, whatever the original Authorization header might have been
//TODO: use lookup table or something like that to convert claimsPrinciple to matching domain user account 
var byteArray = Encoding.ASCII.GetBytes(@"Domain\userId:password");
client.DefaultRequestHeaders.Authorization = new System.Net.Http.Headers.AuthenticationHeaderValue("Basic", Convert.ToBase64String(byteArray)); 
```

# android - 始终启动没有历史记录的新活动实例

> ID：13181657
> 
> 赞同：4
> 
> 时间：2012-11-01T16:42:44.893
> 
> 标签：android, android-intent, android-activity

有没有办法将活动作为没有历史记录的新实例启动？

在清单文件中尝试了以下内容。

```
android:launchmode="singleinstance"
android:noHistory=true 
```

我能够实现我所需要的，但是一旦屏幕被锁定，就会显示以前的活动。这`noHistory`是应该做的，但不是我需要的。

始终保持屏幕打开不是可取的，因为它会不必要地耗尽电池。有没有其他方法可以使用新实例启动活动并且没有历史记录但在屏幕锁定时也可以工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T07:23:26.780

您也可以通过添加来做到这一点`android:noHistory="true"`

在你的 android manifest Activity Tag ( `ClassName`)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T17:10:46.360

这将启动一个包含新信息且没有历史记录的活动

```
Intent intent = new Intent(MainActivity.this, TargetActivity.class);
intent.setAction(Intent.ACTION_VIEW);
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
intent.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
MainActivity.startActivity(intent); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T07:05:31.377

尝试在意图中使用此标志。

或参考此以获得[更多详细信息](http://glorious-arvind.blogspot.in/2012/11/launch-activity-with-no-history.html)

```
intent.setFlags(Intent.FLAG_ACTIVITY_NO_HISTORY); 
```

新活动不会保存在历史堆栈中。一旦用户离开它，活动就完成了。

# python - Why views.py and not controller.py

> ID：13181658
> 
> 赞同：0
> 
> 时间：2012-11-01T16:42:45.970
> 
> 标签：python, django, design-patterns

In most MVC/ORM type systems django's views.py might be referred to as a controller, and their templates the views. Is this a different design pattern that they are following? Why is it called views.py?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T16:45:20.277

This question is answered in the [FAQ](https://docs.djangoproject.com/en/dev/faq/general/#django-appears-to-be-a-mvc-framework-but-you-call-the-controller-the-view-and-the-view-the-template-how-come-you-don-t-use-the-standard-names).

> **Django appears to be a MVC framework, but you call the Controller the “view”, and the View the “template”. How come you don’t use the standard names?**
> 
> Well, the standard names are debatable.
> 
> In our interpretation of MVC, the “view” describes the data that gets presented to the user. It’s not necessarily how the data looks, but which data is presented. The view describes which data you see, not how you see it. It’s a subtle distinction.
> 
> So, in our case, a “view” is the Python callback function for a particular URL, because that callback function describes which data is presented.
> 
> Furthermore, it’s sensible to separate content from presentation – which is where templates come in. In Django, a “view” describes which data is presented, but a view normally delegates to a template, which describes how the data is presented.
> 
> Where does the “controller” fit in, then? In Django’s case, it’s probably the framework itself: the machinery that sends a request to the appropriate view, according to the Django URL configuration.
> 
> If you’re hungry for acronyms, you might say that Django is a “MTV” framework – that is, “model”, “template”, and “view.” That breakdown makes much more sense.
> 
> At the end of the day, of course, it comes down to getting stuff done. And, regardless of how things are named, Django gets stuff done in a way that’s most logical to us.

# jira - 获取代码审查任务以显示在 JIRA 的仪表板中，分配给我的小部件或类似的

> ID：13181660
> 
> 赞同：4
> 
> 时间：2012-11-01T16:42:46.160
> 
> 标签：jira, jira-plugin

有谁知道我如何让代码审查项目在 jira 仪表板上弹出。我尝试了各种查询和不同的小部件（我只能从坩埚中找到一个），但是我似乎无法找到一种方法来让这些显示而无需导航到该特定部分。

***澄清一下，这更像是由 Atlassian 托管的 jira 安装配置。它们具有您可以拖放到仪表板上的小部件。鱼眼+坩埚的东西允许您创建似乎不会出现在 jira 东西中的代码审查。

我敢肯定有办法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T23:57:50.873

似乎有一个提供此功能的小部件，但显然它不适用于此应用程序的在线版本。此外，坩埚和代码审查的东西，以及 SVN 支持，正在被删除。

# dynamic - 矩阵优化中的所有最小值

> ID：13181661
> 
> 赞同：0
> 
> 时间：2012-11-01T16:42:48.543
> 
> 标签：dynamic, matrix, minimum

我有一个`nxn`带有正整数的矩阵。我必须计算每个元素的成本。

`Cost(i, j) = min( val(p, r) + dist(pos(i, j) ,pos(p, r)) ), p, r = 0:n-1`.

`dist(pos(i, j) ,pos(p, r)) = |i - p| + |j – r|`（距离曼哈顿）

我在 O(n^4) 中解决了这个问题，如下所示：

```
for(int i = 0 ; i < n ; i ++)

  for(int j = 0 ; j < n ; j ++) {
    int cost = 9999999;

    for(p = 0 ; p < n ; p ++) {

      for(r = 0 ; r < n ; r ++) {

        if( val[p][r] + abs(i-p) + abs(j-r)) < cost {

           cost = val[p][r] + abs(i-p) + abs(j-r);

        }

       }

     }

} 
```

现在，我需要 O(n^2) 的最优解。我知道这是可能的，而且我听说解决方案是动态编程，但我看不出这怎么可能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T21:25:05.527

我在 n^2 中解决了。这个想法是在行（左右和左右）和列（上下和上下）上进行迭代。

无效排序（int **v）{

//在线

for(int i = 0 ; i < n ; i ++) {

```
//left to right
for(int j = 1 ; j < n ; j ++) {
  if(v[i][j-1] + 1 < v[i][j])
    v[i][j] = 1 + v[i][j-1];
}
//right to left
for(int j = n-2 ; j >= 0 ; j --) {
  if(v[i][j+1] + 1 < v[i][j])
    v[i][j] = 1 + v[i][j+1];
} 
```

}

//在列上

for(int j = 0 ; j < n ; j ++) {

```
//up to down
for(int i = 1 ; i < n ; i ++) {
  if(v[i-1][j] + 1 < v[i][j])
    v[i][j] = 1 + v[i-1][j];
}
//down to up
for(int i = n-2 ; i >= 0 ; i --) {
  if(v[i+1][j] +1 <v[i][j])
    v[i][j] = 1 + v[i+1][j];
} 
```

} }

# cocoa - 静态库中的 MagicalRecord：如何加载数据模型？

> ID：13181662
> 
> 赞同：0
> 
> 时间：2012-11-01T16:42:54.673
> 
> 标签：cocoa, core-data, magicalrecord

我正在尝试将 MagicalRecord 与静态库中的数据模型一起使用。当我打电话时

```
[MagicalRecord setupCoreDataStackWithAutoMigratingSqliteStoreNamed:@"db.sqlite"]; 
```

在库中，它似乎没有加载数据模型。打电话给

```
[TheObject MR_createEntity]; 
```

会抛出异常：

```
could not locate an entity named 'TheObject' in this model.' 
```

如何加载我想使用的模型？项目布局概览：

![项目布局](../Images/9021b1fadfedaef6a33b76d905238e16.png)

我认为 MR 默认会尝试从主包中加载模型？

```
[MagicalRecord setDefaultModelNamed:@"TheModel.xcdatamodeld"]; 
```

也不会找到。如果我尝试将库的模型资源文件复制到主项目中，Xcode 会通过崩溃来抱怨。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T23:38:29.240

构建静态库为数据模型生成了一个已编译的 .mom 文件。（打开 lib 的 Products 组，右键单击编译的 lib，在 Finder 中显示）这个文件可以添加到主项目的资源中，使其在主包中可用。

# perl - RoseDB 尝试运行 .pl 脚本时出错

> ID：13181664
> 
> 赞同：1
> 
> 时间：2012-11-01T16:43:04.253
> 
> 标签：perl, rose-db-object

当我尝试运行这个 .pl 脚本时：

```
\#!/usr/bin/perl

use strict;

use abc::abcBill;
use abc::abcBill::Manager;

abc::abcBill::Manager->update_abcBill(
 set => {  mb_status=>'Purged' },
 where=>[  mb_created_date => { ls => '2012-05-01 00:00:00' } ],
 debug =>1
); 
```

我得到的错误是：

**无法通过包“abc::abcBill::Manager”定位对象方法“update_abcBill”**

我已经检查了我 的 .pl 脚本`abcBill::Manager`，我在那里有一个`make_manager`方法，但它不会编译 .pl 脚本。

# css - Helvetica Neue 在 IE7 中渲染异常

> ID：13181665
> 
> 赞同：1
> 
> 时间：2012-11-01T16:43:10.413
> 
> 标签：css, fonts, twitter-bootstrap, internet-explorer-7

我正在尝试进行一些跨浏览器维护，但在 IE7 中出现字体时遇到问题。我没有跨浏览器测试的经验，所以如果我很愚蠢，请原谅我。我正在使用 bootstrap.min.css 并且正文中定义的字体是：

```
body{margin:0;font-family:"Helvetica Neue",Arial, Helvetica,sans-serif;font-size:13px;line-height:18px;color:#333333;background-color:#ffffff;} 
```

默认的 Helvetica Neue 在我的 Mac 开发机器上运行良好，但是当我在 IE7 上使用 Crossover 进行测试时，字体非常难以看到，这只是 Windows 上字体的错误版本吗？如果是，我可以定义一种不在 IE7 中使用的方式吗？这就是字体的样子。![在此处输入图像描述](../Images/b629008ba43f8c263d71cc71a0e37681.png)

如果我将 Arial 放在 Helvetica Neue 之前，字体看起来会更好，但它会改变其他浏览器的外观。我很迷茫，希望能得到一些帮助，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T16:54:02.337

您必须使用 font-face 来实现跨浏览器兼容性。“Helvetica Neue”不是网络安全字体，因此它的渲染取决于它是否在查看器系统上可用。如果不是，则呈现该行中的下一个字体，在这种情况下它可能是 Arial。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T16:56:14.763

使用star hack瞄准IE7

body {
font-family:"Helvetica Neue",Arial, Helvetica,sans-serif;
*字体系列：Arial、Helvetica、sans-serif；
}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T17:19:10.773

大多数计算机没有名为“Helvetica Neue”的字体，而在您的情况下，几乎所有 IE 7 安装都会使用 Arial。

如果这没有发生，那么情况会受到一些 CSS 代码而不是公开的代码的影响，或者在您的情况下，受到 Crossover 软件的影响。我敢打赌后者——该软件可能会尝试在您的系统中使用 Helvetica Neue 字体，但未能正确使用。无论如何，这很可能只与您的开发环境相关。只需在真实的 Windows 系统中在真实的 IE 上测试页面即可。

# linux - sftp unix 批处理文件

> ID：13181667
> 
> 赞同：1
> 
> 时间：2012-11-01T16:43:17.517
> 
> 标签：linux, shell, unix

最初我写了下面的脚本来使用 rsa 密钥执行 sftp，我的意思是没有密码。

现在我想先进行用户/密码认证，然后再进行 RSA 公钥认证。下面需要进行哪些修改以提供用户名和密码以及要在 unix 机器上安装的任何密钥？

导出 SFTP_BATCH_FILE='/var/tmp/SFTP_BATCH_FILE'

```
#------------------------------------------------------------------------
# Create sftp script
#------------------------------------------------------------------------
rm -f $SFTP_BATCH_FILE
echo "lcd $SOURCE_FILE_DIRECTORY " > $SFTP_BATCH_FILE
echo "cd $DESTINATION_FILE_DIRECTORY " >> $SFTP_BATCH_FILE
if [ -z $FILE_TO_UPLOAD_TESTD ] then
echo "put $FILE_TO_UPLOAD_TESTD " >> $SFTP_BATCH_FILE
fi
if [ -z $FILE_TO_UPLOAD_TESTDF ] then
echo "put $FILE_TO_UPLOAD_TESTDF " >> $SFTP_BATCH_FILE
fi
echo "bye" >> $SFTP_BATCH_FILE

#------------------------------------------------------------------------
# Do sftp
#------------------------------------------------------------------------
echo " Before SFTP " >> $LOG_FILE
if [[ -z $ FILE_TO_UPLOAD && -z $ FILE_TO_UPLOAD1 ]] then
 echo “No files to transfer” >> $LOG_FILE
       mv $LOG_FILE $LOG_DIRECTORY
 exit 1
else 
echo “Attempting to connect to  Remote Server $REMOTE_SERVER_PROD” >> $LOG_FILE
/usr/bin/sftp –v -oPort=$SFTP_PORT -b $SFTP_BATCH_FILE $SOURCE_FUNCTIONAL_ID@$REMOTE_SERVER_PROD >> $LOG_FILE 2 >> $LOG_FILE
fi 
```

问候，柴

# c++ - OpenCV 立方与 lanzcos4 调整大小

> ID：13181676
> 
> 赞同：1
> 
> 时间：2012-11-01T16:43:52.320
> 
> 标签：c++, image-processing, opencv, computer-vision

在 OpenCV 中调整矩阵大小时，何时适合在双三次上使用 Lanzcos4 进行放大？

这篇文章涵盖了 opencv 中使用的前 3 种方法，但没有提到任何关于 Lanzcos4 的内容

[如何选择图像插值方法？(Emgu/OpenCV)](https://stackoverflow.com/questions/3112364/how-do-i-choose-an-image-interpolation-method-emgu-opencv)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T17:12:56.147

Lanczos4 将给出更接近理论完美滤波器的结果，但您应该针对您的特定应用对其进行评估。您可能会在平滑区域的边缘看到一些“振铃”或波浪，并且速度会变慢。

您可以在此链接上看到不同调整大小技术的良好比较，尽管我认为他们对 Lanczos3 的实现不正确地实现了缩小：[http ://pixinsight.com/doc/docs/InterpolationAlgorithms/InterpolationAlgorithms.html](http://pixinsight.com/doc/docs/InterpolationAlgorithms/InterpolationAlgorithms.html)

# javascript - 在 jQuery .each 循环中访问元素

> ID：13181680
> 
> 赞同：0
> 
> 时间：2012-11-01T16:44:16.813
> 
> 标签：javascript, jquery, momentjs

早上好，这是我的第二个自编js；为我的知识和风格的浅薄深表歉意。我怀疑我目前的解决方案有点泡泡糖和胶带。

我有一个有开始时间和结束时间的事件列表。它们还有一些导致元素高度变化的各种文本数据。我正在使用 moment.js 将时间转换为适当的宽度和偏移量。

我想以尽可能压缩的格式显示元素而不重叠。到目前为止，通过存储角变量并在循环的下一次迭代中比较它们，我已经使它适用于大多数事件集；然后将当前元素向下移动到前一个元素的底部。

有没有更好的方法可以让我将一个事件与所有以前的事件进行比较并相应地定位它？

```
 $('.metro_event').each(function (i) {

        // Set Width and Left Offset based on start time and duration
        pixelScale = 1.25
        startTime = $(this).attr('start_date');
        startTime = moment(startTime);
        endTime = moment($(this).attr('end_date'));
        endTime = moment(endTime);
        duration = moment.duration(endTime - startTime);
        dayStart = moment(startTime).startOf('day');
        timeOffsex = moment.duration(startTime - dayStart);
        timeOffset = ((timeOffsex - 32400000)/60000) * 1.25;
        timeWidth = (duration/60000) * 1.25;
        $(this).css("width", timeWidth + "px");
        $(this).css("left", timeOffset + "px");

        //Get Height of Current for comparison
        currentHeight = $(this).height();
        currentBottom = currentHeight

        // Get Paramters for Previous Positioned Element

        lastWidth = $(".positioned").filter(':last').width();
        lastHeight = $(".positioned").filter(':last').height();
        lastLeft = $(".positioned").filter(':last').css("left");
        lastLeft = lastLeft.substring(0, lastLeft.length - 2);
        lastLeft = lastLeft * 1
        lastTop = $(".positioned").filter(':last').css("top");
        lastTop = lastTop.substring(0, lastTop.length - 2);
        lastTop = lastTop * 1
        lastRight = lastLeft + lastWidth;
        lastBottom = lastTop + lastHeight;

        // Compare Placement to Previous Positioned Element and Move Down as required

        if (timeOffset<lastRight && currentHeight>lastTop)
            {
            $(this).css("top", lastBottom + "px");
        }

        $(this).addClass('positioned');

        // Increment Height and Set Height of Containing Div

        $('#events').css("height", "300px");

    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:57:33.880

不要使用`$(".positioned").filter(':last')`（并且不要一遍又一遍地使用，但只能使用一次）。我认为你真正想要的是一个包含最后一个迭代元素的变量，不是吗？

```
var last = null; // or $(".positioned").filter(':last') if there are already some
$('.metro_event').each( function() {
    var $this = $(this);
    // get attributes,
    // compute moments,
    // get css styles and position values

    // Now, use the variable
    last …
    // to get position values etc of the last element
    // style $this and
    $this.addClass("positioned");

    // then, after you're done, set "last" for the next iteration
    last = $this;
});
// maybe clean the global? variable last again with
last = null; 
```

# sql - Need Comma seperated output for a query fetching mutiple rows

> ID：13181692
> 
> 赞同：2
> 
> 时间：2012-11-01T16:44:57.807
> 
> 标签：sql, plsql, oracle11g

Query:

```
select o.candidateid 
from onboardingcandidates o, candidatedetails c 
where o.candidateid=c.candidateid 
    and o.JOININGSTATUS='0091' 
    and to_date(o.joiningdate)=to_date(sysdate+5);

Output:

cand1
cand2
cand3
cand62

Required Output:

cand1, cand2, cand3, cand62 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T16:46:36.983

use **[LISTAGG](http://docs.oracle.com/cd/E14072_01/server.112/e10592/functions087.htm)**

```
SELECT LISTAGG(o.candidateid) WITHIN GROUP () ..... 
```

*   [**SEE SQLFiddle Demo**](http://sqlfiddle.com/#!4/37b70/5)

# javascript - Crowdflower：如何包含自定义 HTML？

> ID：13181695
> 
> 赞同：1
> 
> 时间：2012-11-01T16:45:08.243
> 
> 标签：javascript, mechanicalturk, crowdsourcing, crowdflower

我正在尝试使用其 Builder 工具在 Crowdflower 上创建工作。到目前为止，一切都很好。我有希望人们标记的文本项目：

```
a string with some <b>html</b> elements, such as <p> and <br> 
```

当我在 Crowdflower Builder 中包含 {{text}} 时，它不会以粗体或带有额外的换行符显示文本，而是从字面上向我显示 html 标记。我查看了 Builder 创建的 HTML 页面源代码，似乎在 Crowdflower 管道中的某个地方，我的所有 HTML 标记都转换为

```
 a string with some &lt;b&gt;html&lt;/b&gt; elements, such as &lt;p&gt; and &lt;br&gt; 
```

有没有办法绕过这个限制？我真的需要自定义 HTML 标签来完成我的工作。可以选择在工作中包含您自己的 CSS 和 Javascript，而我最后的选择是编写一个 Javascript 函数来取消转义我的 HTML 标记。但我希望我在这里错过了一些非常简单的东西。

抱歉，误导性的“Javascript”标记，我无法创建自定义标记（本来是众包的）。

**编辑：**

如果有人遇到同样的问题：编写自定义 Javascript 函数确实有效，我只是尝试过。不过仍然希望有更好的解决方案:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T05:22:47.550

你还有这个问题吗？它应该工作。我可以上传包含名为 text 的列的 CSV，然后在 CML 编辑器中使用 {{text}} 以显示您在上面包含的粗体和换行符的文本。如果您仍然遇到问题，请随时给我发消息。

模板语言是 Shopify 的 Liquid 的一个子集，尽管听起来您可能已经熟悉了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-13T14:53:08.567

您以哪种格式上传数据？

我遇到了同样的问题：我从 CSV 开始，将列与更大的导入搞混了，然后切换到 ODS 电子表格，效果很好。然而，ODS 似乎将标签保存在实体编码中，而 Crowdflower 不会解码。因此，变为“<b>”，因此您无法使用 ODS 导入 html 标签。

以 JSON 格式上传我的数据解决了所有问题，并且标签可以正常工作，而无需 JS 变通办法。

# python - 在嵌套的for循环中获取迭代计数器

> ID：13181700
> 
> 赞同：1
> 
> 时间：2012-11-01T16:45:14.407
> 
> 标签：python

我想要一个计数器来计算我总共完成了多少次迭代。我愿意：

```
counter = 0;
for i, item in enumerate(items):
    for j, anotheritem in enumerate(anotheritems):
        counter += 1; 
```

但我不禁要问有没有更蟒蛇的方式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T16:47:53.893

它简单易读，就像它得到的 Pythonic 一样（除了分号。）

如果您开始将更多代码放入这些循环中，我唯一的建议是给出更具描述性`i`的名称。`j`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T17:18:33.573

我想说最pythonic的方法是记录`i`而`j`不是`count`，因为元组`(i,j)`的意义远不止`count`-您可以计算计数`(i,j)`！

```
for i, item in enumerate(items):
    for j, anotheritem in enumerate(anotheritems):
        where_i_am = (i,j)
        # count = i*len(anotheritems) + j + 1

total_iterations = len(items) * len(anotheritems) # equivalently (i+1) * (j+1) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T16:48:31.333

```
for counter,ijpair in enumerate(itertools.product(enumerate(items),enumerate(other))):
    i,j = ijpair
    //... do stuff 
```

正如 Codemonkey 指出的那样，我们并没有增加这里的可读性，并且对于明确说明的用途，这并不是真正的改进。但是， enumerate 和 itertools.product 表达式都是生成器/迭代器，因此可以将它们传递给其他函数，例如 map 在那里使用。因此，您可以过滤 item 和 otheritem 的值相同的地方：

```
allelements = itertools.product(items, others)
sameys = itertools.ifilter(lambda a: a[0]==a[1], allelements) 
```

而现在，sameys 的结构与`allelements`. 关键是整个可迭代集变成了一个迭代器表达式，而不是一个循环构造，它可以更容易地传递。

# javascript - 使用短路运算符抛出错误 - javascript

> ID：13181703
> 
> 赞同：5
> 
> 时间：2012-11-01T16:45:20.120
> 
> 标签：javascript

我知道 jslint/jshint 不喜欢它，但我想知道做类似的事情是否有任何真正的问题。

```
var err = function(msg) { throw new Error(msg); }; 
```

**示例 1：**分配

```
var foo = bar.foo || baz.foo || err('missing foo property'); 
```

**示例 2：**验证

```
typeof foo['bar'] !== 'string' && err('bar has to be a string'); 
```

有什么我应该注意的问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T16:47:43.667

据我所知，这并没有比`or die()`PHP 更错误。运算符的短路性是明确定义的，因此只有在达到最后一种情况时才会抛出错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T18:18:29.710

正如评论中所涵盖的那样，由于 JavaScript 对真实性的松散解释，很有可能出现意外行为，而真实性是上述逻辑运算符的驱动力。因此，短路方法在其中有用的条件子集是有限的，因此它不能提供一致的解决方案。

在给出的 2 个示例中，示例 2 是一个很好的应用程序，因为它是具有非常明确的输出的测试的可读应用程序。但是，如果任何尝试的值评估为在程序逻辑中可能有效的任何值，但从`false`语言的角度来看，示例 1 将导致问题。对这些类型的问题应用解决方案将有效地抵消语法可能提供的任何好处。针对这些类型问题的变化的解决方案可能不一致，因此这会增加在初始创建或任何后续修改时引入错误的风险。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T16:49:49.810

要考虑的重要事项之一是与其他一些运算符的优先级和交互。放置不正确`,`或括号会以微妙且不易阅读的方式改变流程。否则，只要您确保预期的逻辑与快捷方式规则匹配，它就应该是安全的。当然，对于什么语言认为真正适用的常见问题也是如此。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T16:55:01.697

好吧，如果您特别检查类型是否为`string`，那么您就错过了一个重点。原始类型字符串没有方法。

```
var s = 'something';
console.log(typeof s);// outputs string

var s = new String('something');// same text as above
console.log(typeof s);//outputs object 
```

JavaScript 有一个称为自动装箱的功能。当您对以第一种方式声明的变量调用字符串方法时，它会自动从字符串切换到对象字符串，因此检查字符串的正确方法是：

```
isString = function (obj) { return toString.call(obj) === '[object String]';}; 
```

Triple equal(===) 用于快速避免未定义/空情况和常见的比较陷阱。

除此之外，你很好。在生产中，您还应该相应地记录错误并在调用 throw 函数时使用 try catch 块。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-01T16:59:30.167

短路您在问题中显示的方式应该绝对没问题，并且 imo 优先于复杂的 if-else 语句（当然，您检查的主要条件首先应该是正确的，但这不是这里的主题）。除了看起来更优雅的代码之外，您实际上是从客户端必须下载的总数据中减少字节数，这*总是*好的。

# iphone - 如何在表格单元格中查看表格

> ID：13181705
> 
> 赞同：0
> 
> 时间：2012-11-01T16:45:27.450
> 
> 标签：iphone, objective-c, uitableview

![在此处输入图像描述](../Images/a6fd25b7cab96a7541801ea47dadb6c3.png)我正在开发一个 iPad 应用程序。应用程序中的一个视图有一个表格视图，我正在将一个表格单元格加载到表格视图中。

```
// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *identifier = @"tmpCell";
    AgendaListCellView *cell = (AgendaListCellView *)[tableView dequeueReusableCellWithIdentifier:identifier];

    if(cell == nil) {
        [[NSBundle mainBundle] loadNibNamed:@"AgendaListCellView_iPad" owner:self options:nil];

        cell = tmpCell;
    }
    cell.artist = [_mArAgendaList objectAtIndex:indexPath.row];
    // Configure the cell.
    [cell setRow:[_mArDictionaryObjects objectAtIndex:indexPath.row]];
    return cell;
} 
```

但是现在我需要在`AgendaListCellView` Is it possible to add a table to a cell 中添加一个表格视图？

见下图

我正在使用一个单元格加载这个。你在右上角看到 2 个文本字段吗？这将随机加载。并有所减少。有任何解决方案吗？ ![在此处输入图像描述](../Images/a6fd25b7cab96a7541801ea47dadb6c3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T17:24:55.967

是的，有可能。您可以在单元格内添加表格视图。如果单元格中的所有表具有相似的数据源，我建议您创建单独的委托类来处理 tableview（单元格内）的委托和数据源方法。它将最小化您的代码复杂性。

# xslt - 如何使用 XSLT 将单个输入 XML 文件转换为两个单独的 XML 文档

> ID：13181709
> 
> 赞同：0
> 
> 时间：2012-11-01T16:45:43.427
> 
> 标签：xslt

我有一个 XML 文档，并希望根据 XML 文件中特定 XML 标记的出现，使用单个 XSLT 文件将其转换为两个单独的 XML 文档。

例如，

A.xml ----> 有一个标签`<Customer convertto = "Master">`然后我应该转换成 Master.xml 文件。

如果 A.xml 文件有`<Customer convertto = "Child">`那么我应该转换成 Child.xml 文件。

在这两种情况下，我都想使用单个 XSLT 文件。

# ruby-on-rails-3 - 在 Rails 中使用多态关系时，我不能在我的 has_many 属性名称（Rails）中使用下划线

> ID：13181710
> 
> 赞同：0
> 
> 时间：2012-11-01T16:45:44.807
> 
> 标签：ruby-on-rails-3, polymorphism

我的应用程序使用这样的多态关系：

```
class Child < ActiveRecord:Base
  belongs_to :child_owner, polymorphic: true
end

class Parent < ActiveRecord:Base
  has_many :children, as: :child_owner, dependent: :destroy
end 
```

此设置工作正常。但是，当我将属性名称更改为多字`:children`变量`:kids_of_parent`时，我得到一个未初始化的常量异常（对于 Parent::KidsOfParent）。就我而言，多字变量将更具描述性。我究竟做错了什么？有人至少可以确认这种行为吗？

谢谢，

克里斯

将 Rails 3.2.8 与 ruby​​ 1.9.3 一起使用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T18:00:51.820

我认为您应该在使用非常规名称时指定一个类，如下所示：

```
has_many :kids_of_parent, as: :child_owner, class_name: "Child", dependent: :destroy 
```

# windows-8 - 在哪里可以找到 Windows 8 上 Visual Studio 2012 中的设备面板？

> ID：13181716
> 
> 赞同：4
> 
> 时间：2012-11-01T16:46:07.813
> 
> 标签：windows-8, visual-studio-2012, windows-store-apps

1.在Windows 8上安装VS 2012 Ultimate，然后启动VS 2012，但在VS2012 View Menu中找不到设备面板。Windows 商店应用程序的调试只有 3 个选项：

```
Simulator  
Local Machine  
Remote Machine 
```

[这里提到的设备面板](http://msdn.microsoft.com/en-us/library/windows/apps/jj215600.aspx)。

2.如果用模拟器调试windows store应用，运行应用，然后尝试用Alt+F4停止调试应用，模拟器中运行的应用不会关闭，如果切换到VS 2021用Alt+Tab停止调试， VS 2012 最终将被冻结并崩溃。

不知道哪里错了。如何解决？在哪里可以找到设备面板，和模拟器一样吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-16T11:26:21.100

在菜单栏中。选择“设计”并单击“设备窗口”。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-01T18:34:19.010

设备面板与模拟器不同，它是一种快速工具，可以更改设计表面以匹配屏幕分辨率、设备状态等，仅此而已。

这是设备面板

![在此处输入图像描述](../Images/b2cdd0bbf1032d1d51d2272c3aa0fa67.png)

它出现在

![在此处输入图像描述](../Images/33b9a0a45934fe95a3b646851cb62437.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T07:29:38.660

在设计选项卡中，您将找到设备窗口

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-26T09:25:27.307

*   “设计”选项卡仅在打开 XAML 页面时出现。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-21T08:12:29.817

在 Visual Studio 社区 2017 中...

要查看“设备”面板（又名设备窗口），我很确定您需要 3 件事：

1.  安装模块“通用 Windows 平台开发”
2.  打开 UWP 项目
3.  具有小于 10.0.16299.0 的 Windows 10 的最大目标

这就是我解释此页面内容的方式：
[https ://docs.microsoft.com/en-us/visualstudio/designers/creating-a-ui-by-using-xaml-designer-in-visual-studio?view =vs-2017](https://docs.microsoft.com/en-us/visualstudio/designers/creating-a-ui-by-using-xaml-designer-in-visual-studio?view=vs-2017)

# java - 从标签或jsp调用Java set方法

> ID：13181718
> 
> 赞同：2
> 
> 时间：2012-11-01T16:46:14.490
> 
> 标签：java, jstl, el

我正在尝试从标记文件中调用 set 方法。这是我的代码：

```
<c:set var="countryCode" value="${proposalPerson.countryCode}"/>
<c:set value="${f:KualiForm.setCurrentPersonCountryCode(countryCode)}"/> 
```

第二个语句是我遇到问题的 set 语句。请注意，此标记循环遍历对象列表，我需要将此值设置为在代码中处理服务器端较低。无论如何，我得到的错误是：

```
PWC6296: The function setCurrentPersonCountryCode 
must be used with a prefix when a default namespace is not specified 
```

我在这个网站上找到了一些相关的帖子，但似乎没有一个对我有用。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T13:07:14.730

这是我需要的代码：

```
<c:set var="currentCountryCode" value="${KualiForm.document.developmentProposalList[0].proposalPersons[personIndex].countryCode}"/>
<jsp:setProperty name="KualiForm" property="currentPersonCountryCode" value="${currentCountryCode }"  /> 
```

# bash - 将文件内容附加到 Bash 中现有文件的底部

> ID：13181725
> 
> 赞同：112
> 
> 时间：2012-11-01T16:46:34.187
> 
> 标签：bash, sed, awk, append

> **可能重复：**
> [将文本附加到每个文件的 Shell 脚本？](https://stackoverflow.com/questions/5586293/shell-script-to-append-text-to-each-file)
> [如何在 SHELL 脚本中将输出附加到文本文件的末尾？](https://stackoverflow.com/questions/6207573/how-to-append-output-to-the-end-of-text-file-in-shell-script)

我正在尝试找出将 api 详细信息插入到预先存在的配置中的最佳方法。我想过使用`sed`将api文本文件的内容插入到config.inc文件的底部。我已经启动了脚本，但它不起作用，它会擦除​​文件。

```
#!/bin/bash

CONFIG=/home/user/config.inc
API=/home/user/api.txt

sed -e "\$a $API" > $CONFIG 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：236
> 
> 时间：2012-11-01T16:52:26.400

这应该有效：

```
 cat "$API" >> "$CONFIG" 
```

您需要使用`>>`运算符附加到文件。重定向`>`会导致文件被覆盖。（截断）。

# java - 覆盖对象的 toString() 表示返回意外符号

> ID：13181734
> 
> 赞同：3
> 
> 时间：2012-11-01T16:47:10.920
> 
> 标签：java, junit, junit4, tostring, primitive-types

我正在为 Clock 类编写 JUnit 测试方法，以确保对象的 toString 表示以我想要的格式返回。所以，我已经覆盖了 toString() 并按照它想要的方式编写它，但是当我将它与我期望在 JUnit 中的格式进行比较时，它会失败并显示以下内容：

org.junit.ComparisonFailure: 预期: <时间: 10:0[0:0]0 > 但是是:<时间: 10:0[:]0>

为什么这里显示符号 [ 和 ]？它是我不知道的 toString() 表示的一部分吗？相关代码如下：

**JUnit：**

```
 @Test
public void testFormattingOfTimeIsDisplayedCorrectly() {

    final byte TEN = 10;
    final byte DBL_ZERO = 00;

    clock.setTime(TEN, DBL_ZERO, DBL_ZERO);

    final String EXPECTED_STRING = "Time : 10:00:00";

    assertEquals(EXPECTED_STRING, clock.toString());    

} 
```

**时钟类中的 toString()：**

```
@Override
public String toString() {
    return "Time : " + hours + ":" + minutes + ":" + seconds;
} 
```

**并且 setTime 方法也在 Clock 类中：**

```
public void setTime(byte hour, byte minutes, byte seconds) {

    this.hours = hour;
    this.minutes = minutes;
    this.seconds = seconds;

} 
```

我想知道，也许它与使用字节有关？或者它只是我不明白的 toString() 返回的东西。我只是对为什么我的 JUnit 方法不将它们视为相同的格式感到困惑。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T16:48:58.243

这：

```
<10:0[0:0]0 > but was:< Time : 10:0[:]0> 
```

表示差异。即输出是 10:0:0 而不是 10:00:00。毫不奇怪，鉴于您的代码是这样做的：

```
return "Time : " + hours + ":" + minutes + ":" + seconds; 
```

并且分钟/秒不是零填充的。也许检查格式设置`String.format()`。`%02d`我不明白（也）为什么你会使用 byte 作为值。An`int`将是在这里使用的更正常的类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T16:52:47.537

换行：

```
return "Time : " + String.format("%02d", hours) + ":" + String.format("%02d", minutes) + ":" + String.format("%02d", seconds); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T16:51:58.650

它指出您的方法返回 10:0:0 而不是 10:00:00。数字类型不存储前导零，因此您的 DBL_ZERO 常量不会以您想要的方式工作。

试试这个：

```
@Override
public String toString() {
    return "Time : " + hours + ":"
        + (minutes < 10 ? "0" : "") + minutes + ":"
        + (seconds < 10 ? "0" : "") + seconds;
} 
```

# frameworks - EF5 Grdiview only Count & ReadOnly

> ID：13181739
> 
> 赞同：2
> 
> 时间：2012-11-01T16:47:35.157
> 
> 标签：frameworks, entity, datasource

在实体框架中，当我从数据源添加拖动时，网格视图仅显示计数和只读列，我也尝试手动分配 datsource 但仍然无法正常工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T19:16:36.647

通过一些研究，我找到了解决方案。

顺便说一句，我首先使用代码。

在父实体中，我将子属性从列表更改为 ObservableCollection。我还将命名空间 System.Collections.ObjectModel 添加到我的类中。

老的：`Public Overridable Property PageElements As List(Of PageElement)`

新的：`Public Overridable Property PageElements As ObservableCollection(Of PageElement)`

删除现有的数据源（以及表单中的控件）。然后重新创建您的数据源拖动到窗体。

您可能需要创建一个名为 ObservableListSource 的类并使用它来代替 ObservableCollection，但到目前为止它似乎已经解决了最初的问题。

这是我在网上其他地方找到的 ObservableListSource 的建议定义。

```
Public Class ObservableListSource(Of T As Class)
     Inherits ObservableCollection(Of T)
     Implements IListSource
     Private _bindingList As IBindingList

    Private ReadOnly Property ContainsListCollection() As Boolean Implements IListSource.ContainsListCollection
         Get
             Return False
         End Get
     End Property

    Private Function GetList() As IList Implements IListSource.GetList
         Return If(_bindingList, (InlineAssignHelper(_bindingList, Me.ToBindingList())))
     End Function
     Private Shared Function InlineAssignHelper(Of T)(ByRef target As T, value As T) As T
         target = value
         Return value
     End Function
EndCLass 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-15T18:40:03.467

# c# - C# 线程安全快速（est）计数器

> ID：13181740
> 
> 赞同：184
> 
> 时间：2012-11-01T16:47:39.977
> 
> 标签：c#, multithreading, thread-safety, counter

在 C# 中获得具有最佳性能的线程安全计数器的方法是什么？

这很简单：

```
public static long GetNextValue()
{
    long result;
    lock (LOCK)
    {
        result = COUNTER++;
    }
    return result;
} 
```

但是有更快的选择吗？

* * *

## 回答 #1

> 赞同：305
> 
> 时间：2012-11-01T16:50:13.737

这会更简单：

```
return Interlocked.Increment(ref COUNTER); 
```

[MSDN Interlocked.Increment](http://msdn.microsoft.com/en-us/library/dd78zt0c.aspx)

* * *

## 回答 #2

> 赞同：120
> 
> 时间：2012-11-01T17:20:20.657

正如其他人推荐的那样，`Interlocked.Increment`将具有比 更好的性能`lock()`。只需看一下 IL 和 Assembly，您就会看到它`Increment`变成了“总线锁”语句，并且它的变量直接递增（x86）或“添加”到（x64）。

此“总线锁定”语句锁定总线以防止另一个 CPU 在调用 CPU 执行其操作时访问总线。现在，看一下 C#`lock()`语句的 IL。在这里，您将看到调用以`Monitor`开始或结束一个部分。

换句话说，.Net`lock()`声明比 .Net 做的更多`Interlocked.Increment`。

所以，如果你想做的只是增加一个变量，`Interlock.Increment`会更快。查看所有 Interlocked 方法以查看各种可用的原子操作并找到适合您需要的操作。`lock()`当您想要执行更复杂的事情（例如多个相互关联的递增/递减）或序列化对比整数更复杂的资源的访问时使用。

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2012-11-01T16:50:43.303

我建议您在 System.Threading 库中使用 .NET 的内置互锁增量。

以下代码将通过引用递增一个 long 变量，并且是完全线程安全的：

```
Interlocked.Increment(ref myNum); 
```

来源：http: [//msdn.microsoft.com/en-us/library/dd78zt0c.aspx](http://msdn.microsoft.com/en-us/library/dd78zt0c.aspx)

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2012-11-01T16:49:40.680

尝试使用[Interlocked.Increment](http://msdn.microsoft.com/en-us/library/dd78zt0c.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-08T06:46:34.897

如前所述，使用`Interlocked.Increment`

来自 MS 的代码示例：

以下示例确定需要多少个 0 到 1,000 范围内的随机数来生成 1,000 个具有中点值的随机数。为了跟踪中点值的数量，将变量 midpointCount 设置为等于 0，并在随机数生成器每次返回中点值时递增，直到达到 10,000。因为三个线程生成随机数，所以调用Increment(Int32)方法保证多个线程不会同时更新midpointCount。请注意，锁也用于保护随机数生成器，并且使用 CountdownEvent 对象来确保 Main 方法不会在三个线程之前完成执行。

```
using System;
using System.Threading;

public class Example
{
   const int LOWERBOUND = 0;
   const int UPPERBOUND = 1001;

   static Object lockObj = new Object();
   static Random rnd = new Random();
   static CountdownEvent cte;

   static int totalCount = 0;
   static int totalMidpoint = 0;
   static int midpointCount = 0;

   public static void Main()
   {
      cte = new CountdownEvent(1);
      // Start three threads. 
      for (int ctr = 0; ctr <= 2; ctr++) {
         cte.AddCount();
         Thread th = new Thread(GenerateNumbers);
         th.Name = "Thread" + ctr.ToString();
         th.Start();
      }
      cte.Signal();
      cte.Wait();
      Console.WriteLine();
      Console.WriteLine("Total midpoint values:  {0,10:N0} ({1:P3})",
                        totalMidpoint, totalMidpoint/((double)totalCount));
      Console.WriteLine("Total number of values: {0,10:N0}", 
                        totalCount);                  
   }

   private static void GenerateNumbers()
   {
      int midpoint = (UPPERBOUND - LOWERBOUND) / 2;
      int value = 0;
      int total = 0;
      int midpt = 0;

      do {
         lock (lockObj) {
            value = rnd.Next(LOWERBOUND, UPPERBOUND);
         }
         if (value == midpoint) { 
            Interlocked.Increment(ref midpointCount);
            midpt++;
         }
         total++;    
      } while (midpointCount < 10000);

      Interlocked.Add(ref totalCount, total);
      Interlocked.Add(ref totalMidpoint, midpt);

      string s = String.Format("Thread {0}:\n", Thread.CurrentThread.Name) +
                 String.Format("   Random Numbers: {0:N0}\n", total) + 
                 String.Format("   Midpoint values: {0:N0} ({1:P3})", midpt, 
                               ((double) midpt)/total);
      Console.WriteLine(s);
      cte.Signal();
   }
}
// The example displays output like the following:
//       Thread Thread2:
//          Random Numbers: 2,776,674
//          Midpoint values: 2,773 (0.100 %)
//       Thread Thread1:
//          Random Numbers: 4,876,100
//          Midpoint values: 4,873 (0.100 %)
//       Thread Thread0:
//          Random Numbers: 2,312,310
//          Midpoint values: 2,354 (0.102 %)
//       
//       Total midpoint values:      10,000 (0.100 %)
//       Total number of values:  9,965,084 
```

以下示例与上一个示例类似，不同之处在于它使用 Task 类而不是线程过程来生成 50,000 个随机中点整数。在此示例中，lambda 表达式替换了 GenerateNumbers 线程过程，并且对 Task.WaitAll 方法的调用消除了对 CountdownEvent 对象的需要。

```
using System;
using System.Collections.Generic;
using System.Threading;
using System.Threading.Tasks;

public class Example
{
   const int LOWERBOUND = 0;
   const int UPPERBOUND = 1001;

   static Object lockObj = new Object();
   static Random rnd = new Random();

   static int totalCount = 0;
   static int totalMidpoint = 0;
   static int midpointCount = 0;

   public static void Main()
   {
      List<Task> tasks = new List<Task>();
      // Start three tasks. 
      for (int ctr = 0; ctr <= 2; ctr++) 
         tasks.Add(Task.Run( () => { int midpoint = (UPPERBOUND - LOWERBOUND) / 2;
                                     int value = 0;
                                     int total = 0;
                                     int midpt = 0;

                                     do {
                                        lock (lockObj) {
                                           value = rnd.Next(LOWERBOUND, UPPERBOUND);
                                        }
                                        if (value == midpoint) { 
                                           Interlocked.Increment(ref midpointCount);
                                           midpt++;
                                        }
                                        total++;    
                                     } while (midpointCount < 50000);

                                     Interlocked.Add(ref totalCount, total);
                                     Interlocked.Add(ref totalMidpoint, midpt);

                                     string s = String.Format("Task {0}:\n", Task.CurrentId) +
                                                String.Format("   Random Numbers: {0:N0}\n", total) + 
                                                String.Format("   Midpoint values: {0:N0} ({1:P3})", midpt, 
                                                              ((double) midpt)/total);
                                     Console.WriteLine(s); } ));

      Task.WaitAll(tasks.ToArray());
      Console.WriteLine();
      Console.WriteLine("Total midpoint values:  {0,10:N0} ({1:P3})",
                        totalMidpoint, totalMidpoint/((double)totalCount));
      Console.WriteLine("Total number of values: {0,10:N0}", 
                        totalCount);                  
   }
}
// The example displays output like the following:
//       Task 3:
//          Random Numbers: 10,855,250
//          Midpoint values: 10,823 (0.100 %)
//       Task 1:
//          Random Numbers: 15,243,703
//          Midpoint values: 15,110 (0.099 %)
//       Task 2:
//          Random Numbers: 24,107,425
//          Midpoint values: 24,067 (0.100 %)
//       
//       Total midpoint values:      50,000 (0.100 %)
//       Total number of values: 50,206,378 
```

[https://docs.microsoft.com/en-us/dotnet/api/system.threading.interlocked.increment?view=netcore-3.0](https://docs.microsoft.com/en-us/dotnet/api/system.threading.interlocked.increment?view=netcore-3.0)

# asp.net-mvc - ASP.NET MVC - 通用控制器模型问题和多态性

> ID：13181746
> 
> 赞同：0
> 
> 时间：2012-11-01T16:47:57.067
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2, asp.net-mvc-4, polymorphism

## 设置：

我设计了一个向导（最初基于 Steve Sanderson 在 Pro ASP.NET MVC 2 中的向导）。

本质上，基本向导控制器声明如下：

```
public abstract class WizardController<TModel> : Controller where TModel : class, IWizardModel, new()
{
   // Loads-n-loadsa-code
} 
```

因此，要实现我的向导，我需要如下声明我的向导控制器：

```
[WizardOptions(StartLabel="Edit >>")]
public partial class EditFeeEarnerController : WizardController<MyApp.Models.MySpecificWizardModel>
{
     // small amounts of highly intuitive code
} 
```

在哪里`MyViewModel`实现`IWizardModel`。

到现在为止还挺好。该向导工作得很好，我对此很满意，所以不要挂断电话。

问题如下：

## 问题：

唯一的问题是我的向导为每个步骤使用部分视图，这些视图与视图 ( ) 一起“缝合” `Wizard.cshtml`。

`Wizard.cshtml`**除了**顶部的声明**外，****任何**向导总是相同的，在我的示例中：**`@model`**

 **```
@model MyApp.Models.MySpecificWizardModel 
```

结果，在一个包含 20 个向导的应用程序中，同一个文件出现了 20 次。

绝对不干。

## 问题：

我想放入一个文件`~/Views/Shared/Wizard.cshtml`并将其用于我所有的向导。我不能这样做的原因是因为我只事先知道我的向导视图模型将继承自`IWizardModel`.

我不能这样做：

```
@model IWizardModel 
```

那么最好的方法是什么，或者它是不可能的？

我想我可以有一个基本的向导视图模型，我的所有向导视图模型都继承自（而不是直接实现`IWizardModel`）。

这行得通吗？

# 编辑（事后看来）：

作为记录，我的问题是我误以为使用接口作为我的模型，即 ，`@model IWizardModel`是行不通的。正如 Iain Galloway 在他的回答中指出的那样，它确实解决了我的问题。

我认为我不能使用接口作为我的模型的原因是我做了以下事情：

```
@model IWizardModel // MyNamespace.MySpecificWizardModel 
```

问题是右边的注释（我注释掉了旧模型）。

出于某种原因，该评论产生了一个错误（与 相关`ViewEngine`）。匆忙中，我只是假设您不能为模型使用接口。

正如老威尔所说：你的力量是伟大的，哦，延迟。

请参阅 Iain Galloway 的答案和我的附录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T17:58:30.383

我刚刚测试了以下内容：-

```
public interface IModel
{
    string Value { get; }
}

public class Foo : IModel
{
    public string Value { get; set; }
}

public class HomeController : Controller
{
    public ActionResult GenericView()
    {
        return View(new Foo() { Value = "Foo" });
    }
} 
```

与 GenericView.cshtml 一起：-

```
@model MvcApplication1.Models.IModel

<h2>@Model.Value</h2> 
```

这似乎对我有用。我是否遗漏了您要求中的重要内容？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T12:40:36.973

## 伊恩·加洛韦回答的附录：

Iain Galloway 的回答是正确的，在视图中使用界面是没有问题的。

想来想去，流程如下：

## 该模型：

可以说我有一个界面`ISomeInterface`：

```
public interface ISomeInterface
{
    public int Step { get;set; }
} 
```

我有一个`MyModel`实现的模型类`ISomeInterface`：

```
public class MyModel : ISomeInterface
{
    public int Step { get;set; }
    public string Name { get;set; }
    public string Address { get;set; }
} 
```

## 控制器和动作：

您可以将模型传递给视图，如下所示：

```
return View("MyView", MyModel); 
```

## 看法：

作为`MyModel`implements `ISomeInterface`，我可以在视图中写入：

```
@model ISomeInterface 
```

应用多态性，因此视图可以访问`MyModel`操作中的代码传入的所有属性，而不仅仅是`ISomeInterface`视图声明的属性。

这就是我想要的。它有效，因此 Iain Galloway 的答案被标记为正确。

## 在我的向导的情况下：

由于在一般情况下使用 @model ISomeInterface 有效，它也适用于我的向导。

然而，为了清楚起见，在为每个步骤保存标记的**部分视图**（并且仅在部分视图中）中，我留下了特定模型的声明，而不仅仅是它实现的接口。IE：

```
@model MyModel 
```

由于使用@model 的多态性，我现在可以将`wizard.cshtml`文件移动到共享文件夹，这对我的整个`DRYness`向导来说是一个很好的结果。

`wizard.cshtml`通过在控制器的文件夹中包含一个实现，我仍然可以灵活地为每个向导进一步自定义。例如，如果我的向导上有一个验证码控件，并且它需要特定的 javascript 和样式文件，我可能想要这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T16:54:26.950

据我所知，你不能这样做。原因是视图引擎静态编译强类型视图。通过实现自己的视图引擎，您可能可以做一些非常高级的事情，但您不太可能想要做那么多工作来保存几行模板代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T17:12:56.097

你可以用技巧做你想做的事：你可以创建`WizardModel`实现`IWizardModel`并包含`InheritedWizardModel`type 属性的包装器模型`IWizardModel`。

```
public class WizardModel: IWizardModel
{
    private IWizardModel _inheritedWizardModel{get;set;}

    //implementation IWizardModel
    public SomeType SomeIWizardProperty
    {
        get{return _inheritedWizardModel.SomeIWizardProperty;} 
        set{_inheritedWizardModel.SomeIWizardProperty = value;}
    }
} 
```

并使用它**

# java - 如何让 ToggleButton 识别 Android 活动中的多次单击？

> ID：13181753
> 
> 赞同：1
> 
> 时间：2012-11-01T16:48:17.887
> 
> 标签：java, android, android-widget, textview, togglebutton

我试图让一个 ToggleButton 在两种类型的文本之间来回切换 TextView 中的文本。当我第一次单击时，它将默认文本切换为替代文本，但当我再次单击它时不会将其切换回来。这是我的代码：

```
ELswitch = (ToggleButton)findViewById(R.id.toggleButton1);
    ELswitch.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            if(ELswitch.isEnabled()==true)
            {
                InputStream iFile = getResources().openRawResource(R.raw.raw_text_file_alternate);
                try {

                    text.setText(inputStreamToString(iFile));
                    text.setFocusable(false);
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            } else {
                InputStream iFile = getResources().openRawResource(R.raw.raw_text_file_default);
                try {

                    text.setText(inputStreamToString(iFile));
                    text.setFocusable(false);
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        }
    }); 
```

我收到的一个解决问题的建议是只使用一个常规按钮和一个计数器和 2 的 mod。似乎应该有一种方法可以从 ToggleButton 做到这一点。我想我可能错误地实例化了 ToggleButton 或错误地使用了 if 语句，但我找不到错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:57:36.270

看起来您的比较适用于：

```
ELswitch.isEnabled()==true 
```

这只会告诉你开关是否启用，而不是它是否被检查。您可能需要更改它以检查它是否被选中：

```
ELswitch.isChecked()==true 
```

您可以在以下指南/文档中找到有关“切换”按钮的更多信息：

[http://developer.android.com/reference/android/widget/ToggleButton.html](http://developer.android.com/reference/android/widget/ToggleButton.html)

从您的问题来看，您似乎还想使用**OnCheckedChangeListener**而不是**OnClickListener**。例如，可以在下面的指南中找到：

[http://developer.android.com/guide/topics/ui/controls/togglebutton.html](http://developer.android.com/guide/topics/ui/controls/togglebutton.html)

希望这会有所帮助！

# java - 使用 MySQL 数据库创建登录

> ID：13181756
> 
> 赞同：-5
> 
> 时间：2012-11-01T16:48:38.913
> 
> 标签：java, android, mysql

我目前正在开发一个安卓应用程序，一个网站的移动版本。不，在这个应用程序中，我的客户想要使用他们的 MySQL 数据库的登录系统。我阅读了有关创建登录到 MySQL 数据库的[AndroidHive](http://androidhive.info/2012/01/android-login-and-registration-with-php-mysql-and-sqlite)教程，但我不明白这一点。

我的问题是，创建一个具有连接到 MySQL 数据库功能的 android 应用程序的主要概念是什么？谢谢您的答复.. ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T20:15:54.843

该[教程上的](http://androidhive.info/2012/01/android-login-and-registration-with-php-mysql-and-sqlite)[图表](http://www.androidhive.info/wp-content/uploads/2012/01/android_mysql_php_api.png)（链接如下）显示了关键概念：

![使用数据库的android登录，通过HTTP API](../Images/6911a069e1498a2d5369a862fc4b975d.png)

要点是您的 Android 应用程序不直接连接到数据库，而是调用 HTTP API。然后，Web 服务器与数据库对话以验证用户身份，并将结果传递回 App。

就我一眼看得出，这种设计没有“会话”——每个操作都需要客户端提供登录名和密码。

# jquery - 如何重新计算选项：第一次计算后更改选项时选择？

> ID：13181758
> 
> 赞同：2
> 
> 时间：2012-11-01T16:48:45.560
> 
> 标签：jquery, datepicker, option, selectedvalue

这是我的第一篇文章，我有两个问题：

1.  当我从上到下选择（回答）所有内容时，计算工作正常。如果我更改“日期”，它会重新计算，但是当我之后更改“box2”时，它不会重新计算。有解决办法吗？

2.  因为这是我的第一个脚本，所以我想知道它是否有用？

    ```
    $(document).ready(function() {

    $("#box").chained("#box2").change(function() {

    var selector = function (dateStr) {
    var d1 = $('#from').datepicker('getDate');
    var d2 = $('#to').datepicker('getDate');
    var diff = 0;

        if (d1 && d2) {
            diff = Math.floor((d2.getTime() - d1.getTime()) / 86400000); // ms per day
        }

        $('#days').val(diff);

    var ttl = $('#totaal');
    var discon = $('#discount-container');
    var disc = $('#discount');
    var tax = $('#tax');
    var price = $('#box option:selected').attr('data-price');
    var total = diff * price;
    var tax7 = total*0.07;
    var disc75 = total*0.075;
    var disc15 = total*0.15;

    if (diff >7 && diff <15) {
        discon.show('slow');
        disc.val("- " + disc75.toFixed(2));
        tax.val("+ "+ tax7.toFixed(2));
        ttl.val("Naf. "+  (total+tax7).toFixed(2));
    } 
    else if (diff >14 ) {
        discon.show('slow');
        disc.val("- " + disc15.toFixed(2));
        tax.val("+ "+ tax7.toFixed(2));
        ttl.val("Naf. "+  (total+tax7).toFixed(2));
    } 
    else {
        discon.hide('slow');
        tax.val("Naf. "+ tax7.toFixed(2));
        ttl.val("Naf. "+  (total+tax7).toFixed(2));
    }
     }  

        $('#from').datepicker({
        dateFormat: 'D dd-mm-yy', 
        minDate: '+1D',
        maxDate: '+2Y',
        changeMonth: true,
        numberOfMonths: 1,
        onClose: function( selectedDate ) {
        $( "#to" ).datepicker( "option", "minDate", selectedDate );
        }
    });
    $('#to').datepicker({
        dateFormat: 'D dd-mm-yy', 
        minDate: '+1D',
        maxDate: '+2Y',
        changeMonth: true,
        numberOfMonths: 1,
        onClose: function( selectedDate ) {
        $('#from').datepicker( "option", "maxDate", selectedDate );
        }
    });

    $('#from,#to').change(selector)

    });

    }); 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:52:33.087

1.

长`$("#box").chained("#box2").change(function() {`
到 `$("#box, #box2").change(function() {`

2\. 您的代码看起来不错，但是因为您没有很多元素实例，我建议您放弃将每个选择器定义为变量。

# javascript - 验证文本框中的双重类型

> ID：13181760
> 
> 赞同：0
> 
> 时间：2012-11-01T16:48:55.767
> 
> 标签：javascript, jquery, html

检查是否在文本框中输入了有效的双精度类型编号“##.##”的最佳方法是什么？所以如果有一个小数输入一次，不要让用户再次输入。

正则表达式会是最好的方法吗？

任何帮助深表感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:57:10.617

你可以像这样使用正则表达式

```
> "222.22".match(/^\d+.?\d*$/)
["222.22"]

> "222.22.2".match(/^\d+.?\d*$/)
null 
```

您也可以尝试将其转换为数字，例如

```
> isNaN(Number("22.2.2"))
true 
```

通过转换为数字进行检查的唯一问题或优势是它将允许像 1e6 这样的数字

```
> isNaN(Number("1e6"))
false 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T17:15:10.370

如果您在谈论 jQuery，那么有很多选择。其中大多数涉及正则表达式检查。

使用正则表达式匹配有效数字很容易，如果您主要关心的是防止进一步的字符插入，请继续阅读。

您需要做的就是以下内容。

1.  您需要一个整数字符映射来“允许”输入。
2.  阻止除与字符映射匹配的键之外的所有其他输入。
3.  如果已经有一个，则进一步防止“点”插入。

我假设您允许以点开头的模式，只要 javascript 将它解析为好像有一个前导零，并且许多开发人员将此视为速记。

同样使用 jQuery 标签，假设您正在使用 jQuery。

```
$("#Foo").keydown(function(e) {
    var c = e.keyCode
      , value = $(this).val();

    // Prevent insertion if the inserting character is
    // 1\. a 'dot' but there is already one in the text box, or
    // 2\. not numerics.
    if ( (c == 190 && value.indexOf('.') > -1) || c < 48 || c > 57 ) {
        e.preventDefault();
        return;
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T17:01:42.710

如果使用 HTML5 是一种选择，您可以使用一种称为“模式”的新输入类型。

它是这样工作的：

```
<input id="numberField" type="text" title="You need to provide a number in the form of 2 integer and 2 decimal digits" pattern="\d{2}\.\d{2}" /> 
```

然后，您可以注册一个事件以使元素在失去焦点时不可编辑，如下所示（使用 jQuery）：

```
$("#numberField").blur(function() { $(this).attr("disabled", "disabled"); }); 
```

或者，如果您只想检查该字段包含的内容是否是数字（任何形式），您可以像这样检查它：

```
$("#numberField").blur(function() {
    if (!isNaN(parseInt($(this).val()))) {
        $(this).attr("disabled", "disabled");
    };
}​);​ 
```

[在 fiddle 上检查一下](http://jsfiddle.net/ehhct/)。

# r - 重塑数据集 r

> ID：13181764
> 
> 赞同：1
> 
> 时间：2012-11-01T16:49:11.007
> 
> 标签：r, reshape

我需要从长格式重塑为宽格式。我没有时间变量。为以下数据集中的每个 id 创建时间变量以在 base r （不是 reshape 包）中进行后续整形的最简单方法是什么？

```
h<-seq(from=as.Date("2005-06-01"), to=as.Date("2008-06-30"), by=1)

a<-data.frame(id=sample(c(1:100),300,replace=T),val=rnorm(n=300),date=sample(h,300,replace=T)) 
```

//M

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T17:19:08.200

这是一种可能的方法。它用于`ave`根据“id”出现的次数创建一个“时间”变量，对我来说，这听起来就像你正在寻找的东西。

您的数据，但已订购（并使用`set.seed`以便其他人可以复制它）：

```
set.seed(1)
h <- seq(from=as.Date("2005-06-01"), 
         to=as.Date("2008-06-30"), by=1)
a <- data.frame(id=sample(c(1:100), 300, replace=TRUE),
                val=rnorm(n=300), 
                date=sample(h, 300, replace=TRUE))
rm(h)
a <- a[order(a$id, a$date), ]
rbind(head(a), tail(a))
#      id         val       date
# 27    2  0.78763961 2007-08-25
# 116   2  0.27005490 2008-03-05
# 281   3 -2.03328560 2006-08-08
# 47    3  1.44115771 2007-06-25
# 133   4  1.32425863 2006-06-14
# 228   5 -0.14587563 2006-10-15
# 111  98  0.95101281 2008-04-29
# 293  99 -0.01825971 2006-01-20
# 139  99  0.43370215 2008-02-20
# 121 100 -0.25893258 2005-06-07
# 18  100 -1.42449465 2007-08-19
# 104 100 -0.24766434 2008-05-11 
```

您最终会得到 8 个“次”，使用`table`.

```
max(table(a$id))
# [1] 8
a$time <- ave(a$id, a$id, FUN=seq_along)
rbind(head(a), tail(a))
#      id         val       date time
# 27    2  0.78763961 2007-08-25    1
# 116   2  0.27005490 2008-03-05    2
# 281   3 -2.03328560 2006-08-08    1
# 47    3  1.44115771 2007-06-25    2
# 133   4  1.32425863 2006-06-14    1
# 228   5 -0.14587563 2006-10-15    1
# 111  98  0.95101281 2008-04-29    1
# 293  99 -0.01825971 2006-01-20    1
# 139  99  0.43370215 2008-02-20    2
# 121 100 -0.25893258 2005-06-07    1
# 18  100 -1.42449465 2007-08-19    2
# 104 100 -0.24766434 2008-05-11    3
a.wide <- reshape(a, direction = "wide", idvar="id", timevar="time")
a.wide[1:8, 1:8]
#     id      val.1     date.1      val.2     date.2     val.3     date.3    val.4
# 27   2  0.7876396 2007-08-25  0.2700549 2008-03-05        NA       <NA>       NA
# 281  3 -2.0332856 2006-08-08  1.4411577 2007-06-25        NA       <NA>       NA
# 133  4  1.3242586 2006-06-14         NA       <NA>        NA       <NA>       NA
# 228  5 -0.1458756 2006-10-15  0.5929847 2008-03-31        NA       <NA>       NA
# 299  6  0.2368037 2006-02-06  1.0341077 2006-10-07        NA       <NA>       NA
# 10   7  1.8692906 2005-07-19 -0.4839749 2006-06-02  1.435070 2007-11-30 1.017754
# 158  8  0.5672209 2006-08-28 -0.4075286 2006-11-11 -2.285236 2007-03-29       NA
# 69   9  0.6422413 2008-06-20         NA       <NA>        NA       <NA>       NA
names(a.wide)
#  [1] "id"     "val.1"  "date.1" "val.2"  "date.2" "val.3"  "date.3" "val.4"  
#  [9] "date.4" "val.5"  "date.5" "val.6"  "date.6" "val.7"  "date.7" "val.8" 
# [17] "date.8" 
```

# vb.net - 同一 DataGridView 单元格中的不同字体颜色

> ID：13181772
> 
> 赞同：0
> 
> 时间：2012-11-01T16:49:39.390
> 
> 标签：vb.net, datagridview

有没有办法在同一个单元格中使用 2 种不同的颜色`DataGridView`？我正在使用 vb.net 2010。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T22:14:12.750

将代码放入 DataGridView.CellFormatting 事件中

```
Private Sub dataGridView1_CellFormatting(ByVal sender As Object, _
    ByVal e As DataGridViewCellFormattingEventArgs) _
    Handles dataGridView1.CellFormatting
    ' If the column is the Artist column, check the 
    ' value. 
    If Me.dataGridView1.Columns(e.ColumnIndex).Name _
        = "Artist" Then 
        If e.Value IsNot Nothing Then 

            ' Check for the string "pink" in the cell. 
            Dim stringValue As String = _
            CType(e.Value, String)
            stringValue = stringValue.ToLower()
            If ((stringValue.IndexOf("pink") > -1)) Then
                e.CellStyle.BackColor = Color.Pink
            End If 

        End If 
    ElseIf Me.dataGridView1.Columns(e.ColumnIndex).Name _
        = "Release Date" Then
        ShortFormDateFormat(e)
    End If 
End Sub 
```

[http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.cellformatting.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.cellformatting.aspx)

# c# - 何时仅将 ID 存储在类中与存储完全填充的对象？

> ID：13181774
> 
> 赞同：0
> 
> 时间：2012-11-01T16:49:47.500
> 
> 标签：c#

假设我有两个表如下：

```
食物类型：

身份证 | 姓名 | ... 附加字段 ...
---------------------------------------------
1 | 水果 | ...
2 | 蔬菜 | ...

```

```
食物：

身份证 | 食物类型 ID | 姓名
----------------------
1 | 1 | 苹果
2 | 1 | 橙子
3 | 2 | 萝卜
4 | 2 | 菠菜
5 | 1 | 梨

```

当我为 构建一个类时，在什么情况下只定义而不是整个对象`Food`会更好？`FoodTypeId``FoodType`

IE

```
public class Food
{
    public int Id {get; set;}
    public int FoodTypeId {get; set;}
    public string Name {get; set;}
} 
```

对比

```
public class Food
{
    public int Id {get; set;}
    public FoodType FoodType {get; set;}
    public string Name {get; set;}
}

public class FoodType
{
    public int Id {get; set;}
    public string Name {get; set;}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T16:58:05.007

如果您不经常需要使用有关 FoodType 对象的其他信息，那么最好只存储 ID，并且获取和填充该信息需要付出很大的努力。

如果您经常使用附加信息或填充它的工作量足够小，您可能希望存储一个实际的食物类型对象。

当然还有其他混合情况，例如对象同时具有 ID 和实际对象，但在某些情况下实际对象为“null”而不是填充，或者具有仅填充某些字段的实际对象引用的对象。更复杂的选项将具有实际对象，而不是 id，但会根据其使用情况懒惰或急切地填充它。

# c# - ASP.NET 页面中的侧面选项窗口

> ID：13181776
> 
> 赞同：-1
> 
> 时间：2012-11-01T16:50:05.743
> 
> 标签：c#, asp.net, css, webforms, modal-dialog

我有一个如下页面：

![在此处输入图像描述](../Images/17b7fcb863dbf334ec8836669afe12bb.png)

我想 ：

1.  在列表中选择一个项目，说“热门”
2.  该选择的链接将出现在右侧。否则它不存在或被隐藏。
3.  我单击该链接，然后可以从某种框中的另一个检查列表中选择更多选项。但它不一定是一个盒子。

实现这些项目的最简单方法是什么**？**（假设我没有 javascript 经验——只有 c# html 和一些 css）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:54:00.823

如果您要在前端（浏览器）中完成此操作，那么您将**需要**一些 JavaScript。单靠 HTML 和 CSS 是不行的；JavaScript 用于处理交互。您可能应该查看一个 JavaScript 库，例如[jQuery](http://jquery.com/)或[YUI](http://yuilibrary.com/)。

# grails - 绑定不来自 ViewModel 的值

> ID：13181777
> 
> 赞同：2
> 
> 时间：2012-11-01T16:50:07.450
> 
> 标签：grails, knockout.js

我正在尝试将 KnockoutJS 逐渐添加到我现有的应用程序中。我的第一个尝试是采用一些现有的小型表单，并将它们的值推送到模糊的服务器，并通过绑定更新一些元素。

我遇到的问题是，当表单首次显示时，它没有通过剔除填充。我正在使用表单中已有的数据呈现页面。所以我像这样设置我的淘汰赛：

```
function DomainViewModel() {
  this.name = "";
  this.description = "";
}

ko.applyBindings(new DomainViewModel()); 
```

我的表格是这样的：

```
<input data-bind="value: name" value="${domainInstance.name.encodeAsHTML()}"/>
<textarea data-bind="value: description" >${domainInstance.description.encodeAsHTML()}</textarea> 
```

所以发生的事情是显示我的表单，然后敲除将 ViewModel 中的值应用于表单，这会清除服务器放置在那里的值。我理解为什么会发生这种情况，并且这不是错误。但是，我想知道这里是否还有其他选择。

我知道我可以执行以下操作：

```
function DomainViewModel() {
  this.name = "${domainInstance.name}";
  this.description = "${domainInstance.name}";
} 
```

但这需要我将一些 javascript 直接放入 GSP（我正在使用 Grails）而不是外部脚本文件中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T17:17:17.760

所以，你有几种方法可以做到这一点。首先，永远不要这样做

```
function DomainViewModel() {
  this.name = "${domainInstance.name}";
  this.description = "${domainInstance.name}";
} 
```

您的视图模型刚刚变得不可重用。如果您想使用 grails 填充视图模型，请在页面上设置一些 javascript 对象，并将其传递到您的外部 javascript 文件视图模型定义中，如下所示（不要忘记使您的属性可观察！）：

```
var grailsData = {
    name : "${domainInstance.name}",
    description : "${domainInstance.name}"
};

  ...
function DomainViewModel(data) {
  this.name = ko.observable(data.name);
  this.description = ko.observable(data.description);
}

ko.applyBindings(new DomainViewModel(grailsData); 
```

我会推荐这种方法，因为稍后当您更改数据源时，您不必更改 HTML。但是，还有另一种选择。您可以创建一个从元素中收集值的绑定，并使用它来设置初始可观察值。该绑定可能如下所示：

```
ko.bindingHandlers.valueWithInit= {
    init: function(element, valueAccessor) {
        valueAccessor()(element.value);
    },
    update: function(element, valueAccessor) {
        var value = valueAccessor();
        element.value = ko.utils.unwrapObservable(value);
    }
}; 
```

这是一个演示此方法[的小提琴](http://jsfiddle.net/p3QQx/1/)

# java - 在 NetBeans 中构建 JUnit 测试以用于较旧的 Java 版本

> ID：13181778
> 
> 赞同：0
> 
> 时间：2012-11-01T16:50:07.917
> 
> 标签：java, maven, netbeans, netbeans-plugins

我正在使用 NetBeans 6.5 IDE (Build 090226) 和 Maven (4.0.5) 在 Fedora 系统上使用 Java (1.6.0_06) 开发 Java 软件。

我正在对一些遗留代码进行更新，我想为它构建一个测试（使用 JUnit）。该代码用于 Java 1.5。为了以最快、最简单的方式提供测试数据，我想通过扩展 ResultSet 接口来实现一个简单的模拟数据集。问题是，尽管我的项目设置为使用 JDK 1.5 构建和测试：

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-compiler-plugin</artifactId>
 <configuration>
    <source>1.5</source>
    <target>1.5</target>
    <fork>true</fork>
    <executable>/usr/java/jdk1.5.0_14/bin/javac</executable>
    <compilerVersion>1.5</compilerVersion>
  </configuration>
</plugin>
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-surefire-plugin</artifactId>
  <configuration>
    <!-- snip some non-jvm configuration -->
    <jvm>/usr/java/jdk1.5.0_14/bin/java</jvm>
    <forkMode>once</forkMode>
  </configuration>
</plugin> 
```

编辑器仍然想让我的类抽象，因为它认为我缺少 Java 1.6 ResultSet 中存在的方法，但这些方法使用 Java 1.5 中不存在的类（NClob 和 RowId 和 SQLXML）。

我的编译器插件似乎设置正确——我可以成功构建和运行这个 JUnit 测试，但是我的整个源代码树都显示错误图标（有效地掩盖了任何真正的错误）。如果我在 ResultSet 导入语句中使用“Go To Source”函数（或“Go To Declaration”），它会将我带到 Java 1.6 源 zip，但在方法上会响应“无法在此处执行 Go To Source”。

我错过了什么？如何让 NetBeans 编辑器窗口识别此代码使用 1.5 JDK，而不是 JDK NetBeans 启动？

TIA，伊莱恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T22:01:27.760

将“profile.xml”（“项目文件”下的菜单选项添加到主项目中，解决了我的问题：

```
<profiles>
  <profile>
    <id>netbeans-private</id>
    <properties>
      <netbeans.hint.jdkPlatform>JDK_1.5</netbeans.hint.jdkPlatform>
    </properties>
  </profile>
</profiles> 
```

感谢 andih 的鼓励支持，这让我一直在寻找答案。

伊莱恩

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T18:11:32.223

使用 Maven 编译器插件不会影响 Netbeans 项目的编译器设置。

查看项目属性，您可以将源/二进制格式设置为您需要的版本。但请注意，这不会隐藏仅在您的 IDE 中设置的 Java 平台版本（现在很可能是 1.6）中可用的方法。这可能会出现问题，例如 IOException 构造函数接受一个原因，以及 Java 1.6 或更高版本引入的其他 API 扩展。

当设置为 1.5 时，Netbeans 会很高兴地编译此代码，但它确实不会在 1.5 JVM 上运行。因此，为了确保您还必须安装 1.5 JDK，将其添加到您的平台列表（工具 -> 平台）并使用它来编译您的项目。作为额外的奖励，当使用正确的 JDK 时，NetBeans 会在编辑器窗口中标记诸如缺少的 IOException 构造函数之类的东西。

# php - 来自目录的GD图像批处理

> ID：13181781
> 
> 赞同：3
> 
> 时间：2012-11-01T16:50:23.283
> 
> 标签：php, gd

真的绞尽脑汁，我已经研究了 2 天以上。

目标？单击/选择带有图像的子目录；在提交时，将使用 GD 在所选的整个 DIR 上运行批处理，在同一服务器上的 /thumbs 文件夹中创建拇指。

地位？我可以一次对一个文件执行此操作，需要一次执行多个文件。

这是我的功能一次性代码：

```
$filename = "images/r13.jpg";

list($width,$height) = getimagesize($filename);

$width_ratio = 166 / $width;
if ($height * $width_ratio <= 103)
{
    $adjusted_width = 166;
    $adjusted_height = $height * $width_ratio;
}
else
{
    $height_ratio = 103 / $height;
    $adjusted_width = $width * $height_ratio;
    $adjusted_height = 103;
}

$image_p = imagecreatetruecolor(166,103);
$image = imagecreatefromjpeg($filename);
imagecopyresampled($image_p,$image,ceil((166 - $adjusted_width) / 2),ceil((103 - $adjusted_height) / 2),0,0,ceil($adjusted_width),ceil($adjusted_height),$width,$height);

imagejpeg($image_p,"images/thumbs/r13.jpg",70); 
```

如您所见，脚本针对单个文件，我想遍历目录而不是指定名称。

（我也会研究 imagemagick，但目前它不是一个选项。）

我将继续阅读 SO 等，但任何帮助都会是巨大的。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T17:03:36.143

您需要从此代码中创建一个函数：

```
function processImage($filename){
    list($width,$height) = getimagesize($filename);

    $width_ratio = 166 / $width;
    if ($height * $width_ratio <= 103)
    {
        $adjusted_width = 166;
        $adjusted_height = $height * $width_ratio;
    }
    else
    {
        $height_ratio = 103 / $height;
        $adjusted_width = $width * $height_ratio;
        $adjusted_height = 103;
    }

    $image_p = imagecreatetruecolor(166,103);
    $image = imagecreatefromjpeg($filename);
    imagecopyresampled($image_p,$image,ceil((166 - $adjusted_width) / 2),ceil((103 - $adjusted_height) / 2),0,0,ceil($adjusted_width),ceil($adjusted_height),$width,$height);

    imagejpeg($image_p,"images/thumbs/".basename($filename),70);
    imagedestroy($image_p);
} 
```

请注意此函数的最后两行：它根据传递的文件名写入 thumb 并销毁资源以释放内存。

现在将其应用于目录中的所有文件：

```
foreach(glob('images/*.jpg') AS $filename){
    processImage($filename);
} 
```

基本上就是这样。

# sql - 为什么表 sys.sql_modules 是空的？

> ID：13181782
> 
> 赞同：0
> 
> 时间：2012-11-01T16:50:25.143
> 
> 标签：sql, sql-server

在 SSMS 中，我使用以下脚本创建了一个数据库。当脚本执行完成时，我希望在[sql_modules](http://technet.microsoft.com/en-us/library/ms175081.aspx)表中看到 CREATE TABLE 语句。但是我找不到它。

```
CREATE DATABASE [MyDb]
GO 
USE [MyDb]
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[MyTable] (
    [UID] [uniqueidentifier] NOT NULL,
    [DateTime] [datetime] NOT NULL
) 
```

这是我运行获取表定义的查询。但是，我得到三个空结果集。知道为什么我会得到这三个空结果集吗？

```
USE MyDb
GO

SELECT * 
FROM sys.sql_modules

SELECT * 
FROM sys.triggers

SELECT sm.object_id, OBJECT_NAME(sm.object_id) AS object_name, o.type, o.type_desc, sm.definition
FROM sys.sql_modules AS sm
JOIN sys.objects AS o ON sm.object_id = o.object_id
ORDER BY o.type; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T17:05:14.677

To get columns and table information, this is a good place to start:

```
SELECT c.*, t.*
FROM sys.tables AS t
INNER JOIN sys.columns AS c ON t.object_id = c.object_id
INNER JOIN sys.schemas AS sch ON t.schema_id = sch.schema_id
WHERE sch.name = 'dbo'
   AND t.name = 'YourTable' 
```

# c - C文件处理-整数值13不能写入文件

> ID：13181783
> 
> 赞同：1
> 
> 时间：2012-11-01T16:50:27.267
> 
> 标签：c, file, file-handling

我无法使用 C 上可用的任何文件处理函数（包括`putw()`、`fprintf()`和`fwrite()`.

```
#include <stdio.h>
#include <conio.h>

void main()
{
  int i;
  int arr[]={10, 11, 12, 13, 14, 15};
  FILE *fp;
  if (fp = fopen("test", "w")) {
        for(i=0; i<6; i++) {
            putw(arr[i], fp);
        }
  }
  fclose(fp);
  fp = fopen("test", "r");
  while ((i=getw(fp))!= EOF) {
        printf("%d, ",i);
  }
  fclose(fp);
  getch();
} 
```

给出一个输出

```
10, 11, 12, 3584, 3840, 
```

和一个修改过的数组

```
int arr[]={13, 11, 12, 13, 14, 15}; 
```

给出一个输出

```
2816, 3072, 0, 14, 15, 
```

您可以注意到在遇到**值 13**后输出与预期不同。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T16:52:14.147

看起来像 CR/LF 行结束处理。使用“b”模式修饰符以二进制模式打开文件，即：

```
 if (fp = fopen("test", "wb")) {
  fp = fopen("test", "rb"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T17:01:25.673

它肯定闻起来像 CR/LF 处理。这样做的原因是 13 是 CR 的 ASCII ......我会将其作为二进制文件处理，让您负责行尾问题！

# .net - .NET 等效于 JavaScript Array.join()

> ID：13181786
> 
> 赞同：0
> 
> 时间：2012-11-01T16:50:35.513
> 
> 标签：.net, arrays

> **可能重复：**
> [.Net 中的 Array.Join？](https://stackoverflow.com/questions/484464/array-join-in-net)

从`List<String>`包含`"Hello"`and的一个中`"World"`，我想获得`"Hello, World"`.

是否有一个库函数可以接受我的列表和字符串`", "`并返回`"Hello, World"`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T16:51:26.420

是的;`String.Join(separator, array)`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T16:51:29.207

是的，有：毫不奇怪，它被称为[`Join`](http://msdn.microsoft.com/en-us/library/0h8wc12c.aspx)

```
String.Join(", ", new string[] {"hello", "world"}); 
```

在 .NET 4.0 及更高版本中，第二个参数可以是`IEnumerable<T>`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T16:52:10.567

```
string.join(yourlist.ToArray()) 
```

# asp.net - 分布式缓存 (AppFabric) 和缓存依赖项

> ID：13181787
> 
> 赞同：1
> 
> 时间：2012-11-01T16:50:37.810
> 
> 标签：asp.net, caching, appfabric

是否可以在 AppFabric 或任何其他分布式缓存系统中拥有“缓存依赖项”，类似于使用 ASP.Net 的 HttpRuntime 缓存可以使用`CacheDependency`该类执行的操作？

其范围是说一个 UserControl 附加到缓存的“键”。如果缓存条目更改，则用户控件无效并重新加载自身。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T10:09:26.670

经过一些研究和测试 - AppFabric 确实支持与上述类似的东西，称为“缓存通知回调”。基本上，您可以附加到缓存的项目/区域，并且系统将在缓存更改时引发事件。

然而，此类通知不是即时的，而是使用“轮询”机制。这是一个必须牢记的事情，因为起初我认为该系统无法正常工作。默认轮询时间为 300 秒（5 分钟），因此可能需要一些“时间”才能获得通知。这可以更改为任何其他间隔，尤其是对于测试。

我已经尝试过了，可以确认它的工作原理。有关如何实现的详细信息，请参见 MSDN 链接： http: [//msdn.microsoft.com/en-us/library/ee808091 (v=azure.10).aspx](http://msdn.microsoft.com/en-us/library/ee808091(v=azure.10).aspx)

# wpf - WPF 依赖属性优先级和引用类型默认值

> ID：13181788
> 
> 赞同：1
> 
> 时间：2012-11-01T16:50:37.893
> 
> 标签：wpf, silverlight, xaml, dependency-properties

如果我创建这样的自定义控件：

```
public class MyControl : ContentControl
{
   public static readonly DependencyProperty ItemsProperty =               
         DependencyProperty.Register(
                "Items", 
                typeof(ObservableCollection<object>), 
                typeof(MyControl), 
                new PropertyMetadata(null));

   public MyControl()
   {   
       // Setup a default value to empty collection
       // so users of MyControl can call MyControl.Items.Add()
       Items = new ObservableCollection<object>();
   }

   public ObservableCollection<object> Items
   { 
      get { return (ObservableCollection<object>)GetValue(ItemsProperty); } 
      set { SetValue(ItemsProperty, value); } 
   } 
} 
```

然后允许用户像这样在 Xaml 中绑定到它：

```
<DataTemplate>
    <MyControl Items="{Binding ItemsOnViewModel}"/>
</DataTemplate> 
```

然后绑定永远不会起作用！这是由于[Dependency Property Precedence](http://msdn.microsoft.com/en-us/library/ms743230.aspx#listing)将 CLR Set 值置于模板绑定之上！

所以，我明白为什么这不起作用，但我想知道是否有解决方案。是否可以为只想以编程方式添加项目的 MyControl 的懒惰消费者提供新的 ObservableCollection 的 ItemsProperty 的默认值，同时允许 My Control 的 MVVM 高级用户通过 DataTemplate 绑定到相同的属性？

这适用于 Silverlight 和 WPF。风格的 DynamicResource 设置器似乎是一个解决方案，但这不适用于 Silverlight :(

**更新：**

我可以确认**`SetCurrentValue(ItemsProperty, new ObservableCollection<object>());`**完全符合我的要求 - 在 WPF 中。它写入默认值，但它可以被模板绑定覆盖。**任何人都可以建议一个等效的 Silverlight 吗？**说起来容易做起来难！：秒

**另一个更新：**

显然，您可以使用值强制在 .NET3.5 中模拟 SetCurrentValue，并且可以使用这些技术在 Silverlight 中模拟值强制。也许这里有一个（冗长的）解决方法。

[.NET3.5 的 SetCurrentValue 解决方法，使用Silverlight 的 Value](http://drwpf.com/blog/2010/05/05/value-coercion-for-the-masses/) [Coercion Value Coercion workaround](http://arbel.net/2009/11/04/local-values-in-dependencyobjects/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T17:28:28.053

当 ObservableCollection 属性出现异常时，我尝试丢弃对该属性的分配。我发现参考文献翻译不正确，绑定丢失了，不知何故。因此，我避免实际*设置*ObservableCollection 属性（而是更喜欢清除现有属性并向其添加元素）。使用 DependencyProperty会变得*非常*草率，因为您将在 setter 中多次调用 getter。您可能要考虑改用 INotifyPropertyChanged。无论如何，这就是它的样子：

编辑：公然从 SteveL 的回答中窃取吸气剂。我对其进行了一点修改，以便您只需调用一次 GetValue，就可以了。很好的工作。

```
public ObservableCollection<object> Items
{ 
    get
    {
        ObservableCollection<object> coll = (ObservableCollection<object>)GetValue(ItemsProperty);
        if (coll == null)
        {
            coll = new ObservableCollection<object>();
            this.SetValue(ItemsProperty, coll);
        }

        return coll;
    }
    set 
    {
        ObservableCollection<object> coll = Items;
        coll.Clear();
        foreach(var item in value)
            coll.Add(item);
    }
} 
```

请注意，这取决于您的默认设置是否正确。这意味着将静态 ItemsProperty 默认更改为正确类型的新 ObservableCollection（即 new PropertyMetadata(new ObservableCollection()）。您还必须在构造函数中删除该设置器。注意，我不知道是否这样'实际上会工作。如果没有，你肯定会想要使用 INotifyPropertyChanged ......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T17:37:32.563

你不能只指定依赖属性的默认属性：

```
 public static readonly DependencyProperty ItemsProperty = DependencyProperty.Register(
        "Items",
        typeof(ObservableCollection<object>),
        typeof(CaseDetailControl),
        new PropertyMetadata(new ObservableCollection<object>())); 
```

还是我想念你所追求的？

编辑：

啊...在那种情况下，如何在 getter 上检查 null ？：

```
 public ObservableCollection<object> Items
    {
        get
        {
            if ((ObservableCollection<object>)GetValue(ItemsProperty) == null)
            {
                this.SetValue(ItemsProperty, new ObservableCollection<object>());
            }

            return (ObservableCollection<object>)GetValue(ItemsProperty);
        }

        set
        {
            this.SetValue(ItemsProperty, value);
        }
    } 
```

# javascript - 抓取/复制/转换为变量：谷歌翻译文本（写入其他页面）客户端

> ID：13181794
> 
> 赞同：1
> 
> 时间：2012-11-01T16:50:49.530
> 
> 标签：javascript, dom-events, google-translate, displayobject

主要需要了解如何使用 JavaScript 操作显示的翻译文本，以便将其转换为可用文本。

**我正在创建一个 3 框翻译系统：** 源文本--> 翻译文本--> 源语言

这将允许输入英语。
法语翻译（旁边）。
法语翻译回英语（旁边）。

这将是最终的谷歌翻译器，因为作者可以通过用英文阅读来检查他的法语翻译（当他打字时！）；避免愚蠢的翻译错误。

*顺便说一句，这作为一个概念很有效，但是非常费力，每次更改都涉及在两个选项卡上复制和粘贴（即不是按键入的方式）。*

这可以通过任何方式完成，以获得最终结果。

**我目前正在用 3 个 iframe 开发它**，使用下面的函数（onclick）来存储源文本。

```
var pg_1 = document.getElementById("textarea_id").value;
localStorage.pg_1_text=pg_1; 
```

这个脚本将其写入第 2 页，它将被自动翻译。

```
document.getElementById("result").innerHTML="<pre>" + localStorage.pg_1_text + "</pre>"; 
```

**我现在需要**将翻译后的显示文本写入第 3 页。

显然，我可以在文本上拖动鼠标，复制并粘贴到第 3 页。但是，onclick 系统会更好。写一段，点击每一页，查看结果……就可以了。

我的问题是我不知道如何引用这个“显示的文本”。但无论如何，优先级是将显示的文本放入第 3 页。

（注意：我读过类似的帖子，但似乎没有一个适用）

# android - 在 Linux 中为 Android NDK 构建脚本

> ID：13181796
> 
> 赞同：2
> 
> 时间：2012-11-01T16:50:55.503
> 
> 标签：android, linux, android-ndk

如何使用 NDK 构建我的 android 源代码。
我已经下载了ndk，但我不知道如何设置arch编译器路径。

这是我的“build-for-android.sh”代码：

```
#!/bin/sh
cairo=system
curl=system
pal=android
alsa=no
pulse=no
sles=yes
ffmpeg=yes
gallium=no
egl=yes
glx=no

PKG_CONFIG_PATH=$MOONLIGHT_PREFIX/lib/pkgconfig
if [ -d /usr/X11/share/aclocal ]; then
  export ACLOCAL_FLAGS="-I /usr/X11/share/aclocal"
fi

./autogen.sh --host=arm-linux-androideabi --prefix=$MOONLIGHT_PREFIX --with-manual-mono=yes --with-testing=no --enable-browser-support --disable-desktop-support --with-unwind=no --with-ffmpeg=$ffmpeg --with-alsa=$alsa --with-pulseaudio=$pulse --with-opensles=$sles --with-pal=$pal --with-curl=$curl --with-cairo=$cairo --with-gallium-path=$gallium --enable-sdk=no --with-egl=$egl --with-glx=$glx CFLAGS="-DPLATFORM_ANDROID -I$MOONLIGHT_PREFIX/include $CFLAGS" LDFLAGS="-L$MOONLIGHT_PREFIX/lib $LDFLAGS" CXXFLAGS="-fno-rtti -DPLATFORM_ANDROID -I$MOONLIGHT_PREFIX/include $CFLAGS"
make $@ 
```

当我运行它时，出现以下错误：

```
checking for arm-linu-androideabi-g++... no
checking for arm-linu-androideabi-c++... no
checking for arm-linu-androideabi-gpp... no
checking for arm-linu-androideabi-aCC... no
checking for arm-linu-androideabi-cc... no
.
.
.
. 
```

我可以在 ~/Android/android-ndk-r8b/toolchains/arm-linux-androideabi-4.4.3/prebuild/linux-x86/bin/* 目录中看到它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T20:30:37.753

好的。我找到了。：

首先，创建一个独立的工具链，使配置脚本更易于使用

```
~$ android-ndk-r5b/build/tools/make-standalone-toolchain.sh --platform=android-8 --install-dir=android-8-toolchain 
```

接下来，将工具链的 bin 目录添加到 PATH。

```
~$ export PATH=$PATH:~/android-8-toolchain/bin/ 
```

# zend-form - ZF2 选择元素用法

> ID：13181799
> 
> 赞同：0
> 
> 时间：2012-11-01T16:51:06.250
> 
> 标签：zend-form, zend-framework2

我正在使用 Zend Framework 2，我需要一个 Dependent Dropdown。当用户选择一个类别（在我的示例中为 cat_id）时，系统会使用正确的元素填充子类别（sca_id）。

我可以通过创建这样的应用程序来做到这一点：

我的表格如下所示：

```
 $this->add(array(
        'name' => 'cat_id',
        'type' => 'Zend\Form\Element\Select',
        'options' => array(
            'label' => 'Categoria',
            'value_options' => array(
                '' => '',
            ),
        ),
    ));
    $this->add(array(
        'name' => 'sca_id',
        'type' => 'Zend\Form\Element\Select',
        'options' => array(
            'label' => 'Sub Categoria',
            'style' => 'display:none;', // Esse campo soh eh exibido qndo uma categoria for escolhida
            'value_options' => array(
                '' => '',
            ),
        ),
    )); 
```

请注意，我没有在那里填写 value_options，因为我选择在我的控制器中执行此操作，其中服务管理器可用：

```
 $form = new ProdutoForm('frm');
    $form->setAttribute('action', $this->url()->fromRoute('catalogo-admin', array( ... )));
    // Alimenta as comboboxes...
    $form->get('cat_id')->setValueOptions($this->getCategoriaService()->listarCategoriasSelect()); 
```

在 cat_id 的更改事件中，我`$.ajax`从 Action 中获取元素并填充 sca_id。

这很好用！

问题在于我的验证：

```
 $this->add(array(
        'name' => 'cat_id',
        'require' => true,
        'filters'  => array(
            array('name' => 'Int'),
        ),
    ));
    $this->add(array(
        'name' => 'sca_id',
        'require' => true,
        'filters'  => array(
            array('name' => 'Int'),
        ),
    )); 
```

当我提交表单时，它一直说：`The input was not found in the haystack`对于两个下拉菜单...

我做错了什么？

额外问题：有更好的方法来填充我的下拉列表吗？

Ps.：我猜这个问题[Disable notInArray Validator Zend Framework 2](https://stackoverflow.com/questions/13174648/disable-notinarray-validator-zend-framework-2)问的问题与我类似，但我想详细说明我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T10:41:01.130

好吧，我意识到我应该在验证表单之前填充我的选择元素！

```
// SaveAction
$request = $this->getRequest();
if ($request->isPost())
{
    $form = new ProdutoForm();

    // Alimenta as comboboxes...
    $form->get('cat_id')->setValueOptions($this->getCategoriaService()->listarCategoriasSelect());
    $form->get('sca_id')->setValueOptions($this->getSubCategoriaService()->listarSubCategoriasSelect());

    // If the form doesn't define an input filter by default, inject one.
    $form->setInputFilter(new ProdutoFormFilter());

    // Get the data.
    $form->setData($request->getPost());

    // Validate the form
    if ($form->isValid())
    {
        // Valid!
    }else{
        // Invalid...
    } 
```

该代码工作得很好。我的表格现在完美验证！

# pdf - 带有 FPDI 模板和 THEAD 的 TCPDF

> ID：13181800
> 
> 赞同：1
> 
> 时间：2012-11-01T16:51:12.123
> 
> 标签：pdf, tcpdf, fpdi

我有一个带有 THEAD 输出的 html 表，`writeHTML`它应该显示在表顶部的每个页面上。它可以工作，但是当我使用由 FPDI 加载的模板时，头部是白色的，并且在第二页和更远的地方消失了。我可以用鼠标标记头部字段，但显示为白色。边框仅显示为左侧的一个小点。

我已经尝试添加`$this->setPageMark()`到该`addPage`方法中。但它仍然是同样的问题。

```
public function AddPage($orientation = '', $format = ''){
    parent::AddPage($orientation, $format);
    if($this->template != null){
        $this->useTemplate($this->template);
        $this->setPageMark();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-08T20:52:12.200

您需要在开始时启用分页符，这会导致您遇到的问题；这是一个示例代码片段；

```
require_once('tcpdf/tcpdf.php'); //main code    
require_once('tcpdf/fpdi.php');  //read existing pdf and sends to fpdf
$pdf = new FPDI();
$pdf->setPrintHeader(false); //no header
$pdf->setPrintFooter(false);//no footer    
$pdf->SetAutoPageBreak(FALSE, 0); // set auto page breaks
//loop starts here
{ 
    $pdf->setSourceFile($page_background); //set page                                                                                                                                                             
    $templateId = $pdf->importPage(1); //we only need the first page                                                                                   
    $pdf->useTemplate($templateId);     //use the imported page
    //your write html code and any other tcpdf related code comes here
}
$pdf->Output(outcome.pdf, 'I'); //use F instead of I  to show generated pdf. 
```

# android - Android更改选项卡而不丢失数据

> ID：13181804
> 
> 赞同：0
> 
> 时间：2012-11-01T16:51:29.747
> 
> 标签：android

我正在使用 android 中的选项卡，根据我的要求，我需要打开一个包含 5 个选项卡的弹出窗口。也就是说，我有一个片段，我必须在其中打开一个 DialogFragment，并且这个 DialogFragment 需要显示我的 5 个选项卡。到目前为止很安静！可以在各自的选项卡上输入每个内容。但问题是，当我更改选项卡时，在另一个选项卡中输入的值是干净的。示例：我进入 tab1 填充文本字段中的任何值，然后当我切换到 tab2 时，tab1 回到输入之前的值丢失。鉴于这种情况，我如何保留填充到边缘变化的值？按照下面的代码进一步解释。

```
import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.support.v4.app.DialogFragment;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.Spinner;
import android.widget.TabHost;
import android.widget.TabHost.OnTabChangeListener;
import android.widget.TabHost.TabSpec;
import android.widget.TextView;
import br.com.company.R;
import br.com.company.beans.Ordem;
import br.com.company.dispatcher.IDispacher;
import br.com.company.fragment.helper.IFragmentCo;
import br.com.company.bo.IClasseBO;

public class TabsFragment extends DialogFragment implements OnTabChangeListener {

    private static final String TAG = "FragmentTabs";
    public static final String TAB_DADOS_CLIENTE = "dadosCliente";
    public static final String TAB_DEFEITO_FALHA = "defeitoFalha";
    public static final String TAB_SERVICOS = "servico";
    public static final String TAB_MATERIAIS = "material";
    public static final String TAB_OBSERVACAO = "observacao";

    private View mRoot;
    private Button enviar;
    private Button cancelar;
    private Spinner classe;
    private TabHost mTabHost;

    private Ordem ordem;
    private IClasseBO classeBO;
    private IDispacher dispatch;
    private IFragmentCo ifrag;

    private int mCurrentTab;

    public TabsFragment(IFragmentCo ifrag, Ordem ordem) {
        this.ordem = ordem;
        this.ifrag = ifrag;
    }

    @Override
    public void onAttach(Activity activity) {
        super.onAttach(activity);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

        mRoot = inflater.inflate(R.layout.ordem_encerramento, null);

        enviar = (Button) mRoot.findViewById(R.ordem_encerramento.enviar);

        cancelar = (Button) mRoot.findViewById(R.ordem_encerramento.cancelar);

        cancelar.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                TabsFragment.this.dismiss();
            }
        });

        mTabHost = (TabHost) mRoot.findViewById(android.R.id.tabhost);
        setupTabs();
        return mRoot;
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        setRetainInstance(true);

        mTabHost.setOnTabChangedListener(this);
        mTabHost.setCurrentTab(mCurrentTab);

        mTabHost.getTabContentView().addView(addView(R.layout.dados_cliente));

    }

    private void setupTabs() {
        mTabHost.setup(); // importante!

        mTabHost.addTab(newTab(TAB_DADOS_CLIENTE, R.string.tab_dados_cliente, R.ordem_encerramento.dados_cliente));
        mTabHost.addTab(newTab(TAB_DEFEITO_FALHA, R.string.tab_defeito_falha, R.ordem_encerramento.defeito_falha));
        mTabHost.addTab(newTab(TAB_SERVICOS, R.string.tab_servico, R.ordem_encerramento.servico));
        mTabHost.addTab(newTab(TAB_MATERIAIS, R.string.tab_material, R.ordem_encerramento.material));
        mTabHost.addTab(newTab(TAB_OBSERVACAO, R.string.tab_observacao, R.ordem_encerramento.observacao));
    }

    private View addView(int resource) {
        LayoutInflater layoutInflater = (LayoutInflater)getActivity().getBaseContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View view = layoutInflater.inflate(resource, null);
        return view;
    }

    private TabSpec newTab(String tag, int labelId, int tabContentId) {
        Log.d(TAG, "buildTab(): tag=" + tag);

        View view = LayoutInflater.from(mTabHost.getContext()).inflate(R.layout.tabs_bg_view, null);
        TextView tv = (TextView) view.findViewById(R.id.tabsText);
        tv.setText(labelId); 

        TabSpec tabSpec = mTabHost.newTabSpec(tag);
        tabSpec.setIndicator(view);
        tabSpec.setContent(tabContentId);
        return tabSpec;
    }

    @Override
    public void onResume() {
        super.onResume();
    }

    @Override
    public void onTabChanged(String tabId) {
        Log.d(TAG, "onTabChanged(): tabId=" + tabId);
        View view = null;
        if (TAB_DADOS_CLIENTE.equals(tabId)) {
            mTabHost.getTabContentView().removeAllViews();
            mTabHost.getTabContentView().addView(addView(R.layout.dados_cliente));
            mTabHost.setCurrentTab(0);
        } else if (TAB_DEFEITO_FALHA.equals(tabId)) {   
            view = new DefeitoFalhaView().createView(getActivity());
            mTabHost.getTabContentView().addView(view);
            mTabHost.setCurrentTab(1);
        } else if (TAB_SERVICOS.equals(tabId)) {
            mTabHost.getTabContentView().removeAllViews();
            mTabHost.getTabContentView().addView(addView(R.layout.servico));
            mCurrentTab = 2;
        } else if (TAB_MATERIAIS.equals(tabId)) {
            mTabHost.getTabContentView().removeAllViews();
            mTabHost.getTabContentView().addView(addView(R.layout.materiais));
            mCurrentTab = 3;
        } else if (TAB_OBSERVACAO.equals(tabId)) {
            mTabHost.getTabContentView().removeAllViews();
            mTabHost.getTabContentView().addView(addView(R.layout.observacao));
            mCurrentTab = 4;
        }

    }

    public View getmRoot() {
        return mRoot;
    }

} 
```

文件.xml。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/White"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="30dip"
        android:layout_gravity="center_vertical"
        android:orientation="horizontal"
        android:paddingRight="10dip" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:gravity="center_vertical"
            android:paddingLeft="10dip"
            android:text="Devolver OS"
            android:textColor="@color/Black" />

        <View
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1" />

        <Button
            android:id="@+ordem_encerramento/cancelar"
            style="@style/ButtonNovo"
            android:layout_marginLeft="10dip"
            android:text="Cancelar" />

        <Button
            android:id="@+ordem_encerramento/enviar"
            style="@style/ButtonNovo"
            android:layout_marginLeft="10dip"
            android:text="Enviar" />
    </LinearLayout>

    <View
        android:layout_width="fill_parent"
        android:layout_height="1dip"
        android:background="@xml/menu_bg" />

    <ScrollView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_marginBottom="40dip" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="vertical"
            android:padding="10dip" >

            <TabHost
                xmlns:android="http://schemas.android.com/apk/res/android"
                android:id="@android:id/tabhost"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:background="#EFEFEF" >

                <LinearLayout
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:orientation="vertical" >

                    <TabWidget
                        android:id="@android:id/tabs"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content" />

                    <FrameLayout
                        android:id="@android:id/tabcontent"
                        android:layout_width="fill_parent"
                        android:layout_height="fill_parent" >

                        <FrameLayout
                            android:id="@+ordem_encerramento/dados_cliente"
                            android:layout_width="fill_parent"
                            android:layout_height="fill_parent" />

                        <FrameLayout
                            android:id="@+ordem_encerramento/defeito_falha"
                            android:layout_width="fill_parent"
                            android:layout_height="fill_parent" />

                        <FrameLayout
                            android:id="@+ordem_encerramento/servico"
                            android:layout_width="fill_parent"
                            android:layout_height="fill_parent" />

                        <FrameLayout
                            android:id="@+ordem_encerramento/material"
                            android:layout_width="fill_parent"
                            android:layout_height="fill_parent" />

                        <FrameLayout
                            android:id="@+ordem_encerramento/observacao"
                            android:layout_width="fill_parent"
                            android:layout_height="fill_parent" />
                    </FrameLayout>
                </LinearLayout>
            </TabHost>
        </LinearLayout>
    </ScrollView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T17:38:18.320

尝试将这些值存储在某个地方，例如`SharedPreferences`静态变量，然后将它们重新设置为`onTabChanged()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T17:41:15.707

TabGroupActivity.java

```
import java.util.ArrayList;
import com.data.DataClass;
import android.app.Activity;
import android.app.ActivityGroup;
import android.app.LocalActivityManager;
import android.content.Intent;
import android.os.Bundle;
import android.view.KeyEvent;
import android.view.Window;

/**
 * The purpose of this Activity is to manage the activities in a tab. Note:
 * Child Activities can handle Key Presses before they are seen here.
 * 
 * @author Eric Harlow
 */
public class TabGroupActivity extends ActivityGroup {

private ArrayList<String> mIdList;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    if (mIdList == null)
        mIdList = new ArrayList<String>();
}

/**
 * This is called when a child activity of this one calls its finish method.
 * This implementation calls {@link LocalActivityManager#destroyActivity} on
 * the child activity and starts the previous activity. If the last child
 * activity just called finish(),this activity (the parent), calls finish to
 * finish the entire group.
 */
@Override
public void finishFromChild(Activity child) {
    LocalActivityManager manager = getLocalActivityManager();
    int index = mIdList.size() - 1;

    if (index < 1) {
        finish();
        return;
    }
    manager.destroyActivity(mIdList.get(index), true);
    mIdList.remove(index);
    index--;
    String lastId = mIdList.get(index);
    Intent lastIntent = manager.getActivity(lastId).getIntent();
    Window newWindow = manager.startActivity(lastId, lastIntent);
    setContentView(newWindow.getDecorView());
}

/**
 * Starts an Activity as a child Activity to this.
 * 
 * @param Id
 *            Unique identifier of the activity to be started.
 * @param intent
 *            The Intent describing the activity to be started.
 * @throws android.content.ActivityNotFoundException.
 */
public void startChildActivity(String Id, Intent intent) {
    Window window = getLocalActivityManager().startActivity(Id,
            intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP));
    if (window != null) {
        mIdList.add(Id);
        setContentView(window.getDecorView());
    }
}

/**
 * The primary purpose is to prevent systems before
 * android.os.Build.VERSION_CODES.ECLAIR from calling their default
 * KeyEvent.KEYCODE_BACK during onKeyDown.
 */
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
        // preventing default implementation previous to
        // android.os.Build.VERSION_CODES.ECLAIR
        // onBackPressed();//Added after
        return true;
    }
    return super.onKeyDown(keyCode, event);
}

/**
 * Overrides the default implementation for KeyEvent.KEYCODE_BACK so that
 * all systems call onBackPressed().
 */
@Override
public boolean onKeyUp(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
        onBackPressed();
        return true;
    }
    return super.onKeyUp(keyCode, event);
}

/**
 * If a Child Activity handles KeyEvent.KEYCODE_BACK. Simply override and
 * add this method.
 */
public void onBackPressed() {
    int length = mIdList.size();
    if (length > 1) {
        Activity current = getLocalActivityManager().getActivity(
                mIdList.get(length - 1));
        if (DataClass.isTemp()) {
            overridePendingTransition(R.anim.slide_in_up,
                    R.anim.slide_in_up);
        }
        current.finish();
    }
}
} 
```

MainTab.java

```
import com.data.DataClass;
import android.app.TabActivity;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.graphics.Color;
import android.graphics.drawable.StateListDrawable;
import android.os.Bundle;
import android.view.Gravity;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.TabHost;
import android.widget.LinearLayout.LayoutParams;

public class MainTabInfoMe extends TabActivity {
public final static int HOME = 1;
public final static int DIARY = 2;
public final static int PROGRESS = 3;
long transactionID = -1;
public static TabHost tabHost;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.mytabs);
    MyView view = null;

    tabHost = getTabHost();
    TabHost.TabSpec spec;
    Intent intent;

    intent = new Intent().setClass(this, TabGroup1Activity.class);
    view = new MyView(this, R.drawable.home_select, R.drawable.home, "");
    view.setFocusable(true);
    spec = tabHost.newTabSpec("Home").setIndicator(view).setContent(intent);
    tabHost.addTab(spec);

    intent = new Intent().setClass(this, TabGroup2Activity.class);
    view = new MyView(this, R.drawable.prof_select, R.drawable.prof, "");
    view.setFocusable(true);
    spec = tabHost.newTabSpec("Diary").setIndicator(view)
            .setContent(intent);
    tabHost.addTab(spec);

    intent = new Intent().setClass(this, TabGroup3Activity.class);
    view = new MyView(this, R.drawable.bus_select, R.drawable.bus, "");
    view.setFocusable(true);
    spec = tabHost.newTabSpec("progress").setIndicator(view)
            .setContent(intent);
    tabHost.addTab(spec);

    tabHost.setCurrentTab(0);
    tabHost.getTabWidget().getChildAt(0).getLayoutParams().height =    
            LayoutParams.WRAP_CONTENT;
    tabHost.getTabWidget().getChildAt(1).getLayoutParams().height = 
            LayoutParams.WRAP_CONTENT;
    tabHost.getTabWidget().getChildAt(2).getLayoutParams().height = 
            LayoutParams.WRAP_CONTENT;

    if (MyApplication.getFrom().equals("Home")) {
        tabHost.setCurrentTab(0);
    } else if (MyApplication.getFrom().equals("Diary")) {
        tabHost.setCurrentTab(1);
    } else if (MyApplication.getFrom().equals("progress")) {
        tabHost.setCurrentTab(2);
    }

    int type = 0;
    if (getIntent().getExtras() != null) {
        if (getIntent().getExtras().containsKey("from")) {
            type = getIntent().getExtras().getInt("from");
            switch (type) {
            case HOME:
                tabHost.setCurrentTab(0);
            case DIARY:
                tabHost.setCurrentTab(1);
            case PROGRESS:
                tabHost.setCurrentTab(2);
            default:
                tabHost.setCurrentTab(0);
            }
        }
    }
}

public long getTransactionID() {
    return transactionID;
}

public void setTransactionID(long l) {
    transactionID = l;
}

public void switchTabSpecial(int tab) {
    tabHost.setCurrentTab(tab);
}

class ChangeTabReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        tabHost = getTabHost();
        tabHost.setCurrentTab(1);
    }
}

private class MyView extends LinearLayout {
    ImageView iv;

    public MyView(Context c, int drawable, int drawableselec, String label) {
        super(c);

        iv = new ImageView(c);
        StateListDrawable listDrawable = new StateListDrawable();
        listDrawable.addState(SELECTED_STATE_SET, this.getResources()
                .getDrawable(drawable));
        listDrawable.addState(ENABLED_STATE_SET, this.getResources()
                .getDrawable(drawableselec));
        iv.setImageDrawable(listDrawable);
        iv.setBackgroundColor(Color.TRANSPARENT);
        iv.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
                LayoutParams.WRAP_CONTENT, (float) 0.0));
        iv.setPadding(0, 0, 0, 5);
        setGravity(Gravity.CENTER);

        addView(iv);
    }
}

@Override
protected void onPause() {
    super.onPause();
    if( DataClass.isTemp()){
    overridePendingTransition(R.anim.slide_in_up, R.anim.slide_in_up);
    }
}
@Override
protected void onDestroy() {
    super.onDestroy();
    finish();
}
 } 
```

类的FirstTab

```
 public class TabGroup1Activity extends TabGroupActivity {
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    startChildActivity("OptionsActivity", new Intent(this, 
        MainActivity.class));
}
@Override
public void onBackPressed() {
    super.onBackPressed();
     DataClass.setTemp(false);
    finish();
}
} 
```

类的 SecondTab

```
 public class TabGroup2Activity extends TabGroupActivity {
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    startChildActivity("OptionsActivity", new Intent(this, 
        MainActivity.class));
}
@Override
public void onBackPressed() {
    super.onBackPressed();
     DataClass.setTemp(false);
    finish();
}
} 
```

类的第三个选项卡

```
 public class TabGroup1Activity extends TabGroupActivity {
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    startChildActivity("OptionsActivity", new Intent(this, 
        MainActivity.class));
}
@Override
public void onBackPressed() {
    super.onBackPressed();
     DataClass.setTemp(false);
    finish();
}
} 
```

静态变量类

```
 import android.app.Application;

 public class MyApplication extends Application {

private static String from = "Home";
public static String getFrom() {
    return from;
}

public static void setFrom(String fromPage) {
    from = fromPage;
}
 } 
```

xml文件

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical" android:layout_width="fill_parent"
android:layout_height="fill_parent" >
<TabHost android:id="@android:id/tabhost" android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
    <RelativeLayout android:orientation="vertical"
        android:layout_width="fill_parent"         
              android:layout_height="fill_parent">
        <FrameLayout android:id="@android:id/tabcontent"
            android:layout_width="fill_parent" 
                android:layout_height="wrap_content" />
        <TabWidget android:id="@android:id/tabs"
            android:layout_width="fill_parent" 
                            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true" 
                           android:background="@drawable/topbarbck"/>
    </RelativeLayout>
           </TabHost>
               </LinearLayout> 
```

放置所有文件并检查它

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T20:56:26.087

感谢所有试图帮助我的人！我对android没有太多经验，但据我所见，必须根据android提出的层次结构执行类。也就是说，在我的情况下，我有一个调用我的片段的主要活动，并且通过其中一个片段我必须调用 DialogFragment，这会使 DialogFragment 膨胀几个视图（我的选项卡），所以我有以下结构：

活动 > 片段 > DialogFragment > 视图

基于这个解决方案，我的情况是：

```
import android.app.Activity;
import android.os.Bundle;
import android.support.v4.app.DialogFragment;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.Spinner;
import android.widget.TabHost;
import android.widget.TabHost.OnTabChangeListener;
import android.widget.TabHost.TabSpec;
import android.widget.TextView;

public class OrdemEncerramentoFragment extends DialogFragment implements OnTabChangeListener {

    private static final String TAG = "FragmentTabs";
    public static final String TAB_DADOS_CLIENTE = "dadosCliente";
    public static final String TAB_DEFEITO_FALHA = "defeitoFalha";
    public static final String TAB_SERVICOS = "servico";
    public static final String TAB_MATERIAIS = "material";
    public static final String TAB_OBSERVACAO = "observacao";

    private View mRoot;
    private Button enviar;
    private Button cancelar;
    private TabHost mTabHost;

    private Ordem ordem;
    private IClasseBO classeBO;
    private IDispacher dispatch;
    private IFragmentCo ifrag;

    private int mCurrentTab;

    public OrdemEncerramentoFragment(IFragmentCo ifrag, Ordem ordem) {
        this.ordem = ordem;
        this.ifrag = ifrag;
    }

    @Override
    public void onAttach(Activity activity) {
        super.onAttach(activity);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

        mRoot = inflater.inflate(R.layout.ordem_encerramento, null);

        enviar = (Button) mRoot.findViewById(R.ordem_encerramento.enviar);

        cancelar = (Button) mRoot.findViewById(R.ordem_encerramento.cancelar);

        cancelar.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                OrdemEncerramentoFragment.this.dismiss();
            }
        });

        enviar.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                View view = mTabHost.getChildAt(0);
                new DefeitoFalhaView().getDadosDefeitoFalha(view);
            }
        });

        mTabHost = (TabHost) mRoot.findViewById(android.R.id.tabhost);

        setupTabs();
        return mRoot;
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        setRetainInstance(true);

        mTabHost.setOnTabChangedListener(this);
        mTabHost.setCurrentTab(0);

    }

    private void setupTabs() {
        mTabHost.setup(); // importante!
        mTabHost.addTab(inserirAba(TAB_DADOS_CLIENTE, R.string.tab_dados_cliente, new DadosClienteView().createView(getActivity())));
        mTabHost.addTab(inserirAba(TAB_DEFEITO_FALHA, R.string.tab_defeito_falha, new DefeitoFalhaView().createView(getActivity())));
        mTabHost.addTab(inserirAba(TAB_SERVICOS, R.string.tab_servico, new ServicoView().createView(getActivity())));
        mTabHost.addTab(inserirAba(TAB_MATERIAIS, R.string.tab_material, new MaterialView().createView(getActivity())));
        mTabHost.addTab(inserirAba(TAB_OBSERVACAO, R.string.tab_observacao, new ObservacaoView().createView(getActivity())));
    }

    private TabSpec inserirAba(String tag, int labelId, final View view) {
        TabHost.TabSpec spec = mTabHost.newTabSpec(tag);

        spec.setContent(new TabHost.TabContentFactory() {
          public View createTabContent(String tag) {
            return(view);
          }
        });
        spec.setIndicator(buildTabIndicator(labelId));
        return spec;
    }

    private View buildTabIndicator(int msg) {
         View indicator=LayoutInflater.from(mTabHost.getContext()).inflate(R.layout.tabs_bg_view, null);
         TextView tv=(TextView)indicator.findViewById(R.id.tabsText);

         tv.setText(msg);

         return(indicator);
     }

    @Override
    public void onTabChanged(String tabId) {
        Log.d(TAG, "onTabChanged(): tabId=" + tabId);
    }

    public View getmRoot() {
        return mRoot;
    }

} 
```

# javascript - 如何删除附加到可放置 div 的文本

> ID：13181808
> 
> 赞同：0
> 
> 时间：2012-11-01T16:51:47.070
> 
> 标签：javascript, jquery, css

我创建了一个清除按钮，每当一个元素被放入一个可放置的 div 时就会出现。问题是还创建了按钮以清除 div 中的 html，并在清除项目后我希望按钮消失。

```
$('#sortcard, #dropbox, #dropbox1').droppable({accept:'.sorting', hoverClass:'border', tolerance: 'touch',
    drop: function (e, ui){

    $(e.target).append(ui.draggable.html() + '<br/>');
        //can use $(this) or (e.target)
    $("#add_friend").show().fadeOut(12000);
    $(e.target).droppable("destroy");
    $(e.target).append("<input type='button' name='Sub' value='clear'/>");
    }
    });

    $(":button").click(function(){
        $(ui.draggable).remove;
        $(":button").fadeOut(20000)        
    }); 
```

然而，正如[这里](http://jsfiddle.net/Kxtvg/136/)所见，它只是没有发生。我很想了解为什么我的按钮不能按我想要的方式工作以及如何解决这个问题。一般来说，任何其他提示也将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T17:04:03.017

改变

```
$(":button").fadeOut(20000) 
```

到

```
$(this).fadeOut(20000) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T17:04:55.350

更新：编辑删除使用“live”（已弃用）。

您的单击处理程序正在尝试绑定到尚不存在的元素。尝试在创建按钮时绑定点击处理程序：

老的：

```
$(e.target).append("<input type='button' name='Sub' value='clear'/>");} 
```

新的：

```
$(e.target).append($("<input type='button' name='Sub' value='clear'/>")
           .click(function(){
               $(this).parent().empty();
               $(this).fadeOut(20000);
            })); 
```

# c# - WinRT C# 使用 MediaElement 播放视频播放器视频

> ID：13181809
> 
> 赞同：0
> 
> 时间：2012-11-01T16:51:48.820
> 
> 标签：c#, webview, winrt-xaml, mediaelement

我正在尝试在我的应用程序中播放 Viddler 视频，但无法正常工作。这是我的简单代码：

XAML：

```
 < MediaElement VerticalAlignment="Center" Visibility="Visible" 
    HorizontalAlignment="Center"
    Name="myMediaElement" Height="350" 
    Width="640" /> 
```

还有我的 C#：

```
myMediaElement = new MediaElement();
Uri url = new Uri("http://www.viddler.com/embed/5b17d44f/");
myMediaElement.Source = url;
myMediaElement.Play(); 
```

任何帮助都会很棒！当我到达页面时，什么都没有发生，应用程序没有破坏它只是什么都不做......

编辑：最后我刚刚决定将[http://www.viddler.com/embed/5b17d44f/](http://www.viddler.com/embed/5b17d44f/) url 调用到 Webview 中，这不是最好的主意，但它确实有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T16:30:00.087

1.  不要创建新的 MediaElemet。您已经创建了一个 (XAML)。
2.  `AutoPlay="True"`在您的 XAML 中设置

**编辑**：仅当媒体已加载时播放才有效。

# iphone - 如何更改 UISwitch 在 TableView 中的位置

> ID：13181810
> 
> 赞同：0
> 
> 时间：2012-11-01T16:51:52.460
> 
> 标签：iphone, objective-c, ios, xcode

我有一个包含 UISwitches 的 TableView。开关稍微偏离屏幕。如何正确显示。

![转变](../Images/df4383ce54f346768fa4c9b25cdd8e5e.png)

这是我显示开关的代码。

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    static NSString *CellIdentifier = @"POICell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];
    if(!cell){

    //set the cell text to the
    cell.textLabel.text = [self.catNames objectAtIndex:[indexPath row]];
    NSString *toggle = [self.toggleArray objectAtIndex:[indexPath row]];
    //add switch
    cell.selectionStyle = UITableViewCellSelectionStyleNone;

    UISwitch *switchView = [[UISwitch alloc] initWithFrame:CGRectZero];
    cell.accessoryView = switchView;

    if ([toggle isEqualToString: @"OFF"]) {
        [switchView setOn:NO animated:NO];
    }else{
        [switchView setOn:YES animated:NO];
    }

    [switchView addTarget:self action:@selector(switchChanged: ) forControlEvents:UIControlEventValueChanged];
    // Configure the cell...

    }
    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T17:02:33.143

我不会将 UISwitch 添加到标准单元格，而是创建一个包含文本标签和开关的自定义 UITableViewCell。

但是在查看了 Apple 文档之后，您想要实现的似乎是一种有效的方法。

[iOS 表视图编程指南](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/tableview_iphone/TableViewCells/TableViewCells.html)

而且您的代码已经看起来很像这个 SO 问题：[如何使用 UISwitch 创建 UITableViewCell 并获取数据？](https://stackoverflow.com/questions/4585840/how-to-create-a-uitableviewcell-with-a-uiswitch-and-get-the-data) 所以我不确定为什么 UISwitch 没有按预期显示。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-01T16:56:43.020

我认为默认accessoryView的位置不能毫无问题地移动，因为TableViewCell会在很多情况下重新定位它。

因此，将其添加为子视图可​​能是更好的主意，而不是尝试“破解”默认行为。

# asp.net-mvc-4 - 如何在视图页面上缩小脚本块内的 JavaScript

> ID：13181812
> 
> 赞同：28
> 
> 时间：2012-11-01T16:52:03.280
> 
> 标签：asp.net-mvc-4

如何以最小的努力在视图页面的脚本块中缩小 JavaScript？

我有一些页面特定的脚本想放在特定的视图页面上。但是 ASP.NET MVC4 捆绑和缩小仅适用于脚本文件，而不适用于视图页面内的脚本代码。

**更新**

我接受了 Sohnee 的建议，将脚本提取到文件中。但我需要在特定页面上使用它们，所以我最终要做的是：

在布局页面上，我为页面特定的 javascript 块创建了一个可选部分：

```
 @RenderSection("js", required: false)
</body> 
```

然后在视图页面中，假设`Index.cshtml`我像这样渲染脚本部分：

```
@section js{    
    @Scripts.Render("~/bundles/js/" + Path.GetFileNameWithoutExtension(this.VirtualPath))
} 
```

如您所见，它假定 javascript 文件名 ( `index.js`) 与视图页面名称 ( `index.cshtml`) 相同。然后在捆绑配置中，我有：

```
var jsFiles = Directory.GetFiles(HttpContext.Current.Server.MapPath("Scripts/Pages"), "*.js");
foreach (var jsFile in jsFiles)
{
    var bundleName = Path.GetFileNameWithoutExtension(jsFile);
    bundles.Add(new ScriptBundle("~/bundles/js/" + bundleName).Include(
    "~/Scripts/pages/" + Path.GetFileName(jsFile)));
} 
```

然后，如果您在`index`页面上，HTML 输出将是：

```
 <script src="/bundles/js/Index?v=ydlmxiUb9gTRm508o0SaIcc8LJwGpVk-V9iUQwxZGCg1"></script>
</body> 
```

如果您在`products`页面上，则 HTML 输出将是：

```
 <script src="/bundles/js/Products?v=ydlmxiUb9gTRm508o0SaIcc8LJwGpVk-V9iUQwxZGCg1"></script>
</body> 
```

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-09-28T20:55:46.660

您可以使用此 HTML 帮助程序缩小内联脚本

```
using Microsoft.Ajax.Utilities;
using System;

namespace System.Web.Mvc
{
    public class HtmlHelperExtensions
    {
        public static MvcHtmlString JsMinify(
            this HtmlHelper helper, Func<object, object> markup)
        {
           string notMinifiedJs =
            markup.Invoke(helper.ViewContext)?.ToString() ?? "";

            var minifier = new Minifier();
            var minifiedJs = minifier.MinifyJavaScript(notMinifiedJs, new CodeSettings
            {
                EvalTreatment = EvalTreatment.MakeImmediateSafe,
                PreserveImportantComments = false
            });
            return new MvcHtmlString(minifiedJs);
        }
    }
} 
```

在你的 Razor View 中像这样使用它

```
 <script type="text/javascript">
           @Html.JsMinify(@<text>
        window.Yk = window.Yk || {};
        Yk.__load = [];
        window.$ = function (f) {
            Yk.__load.push(f);
        }
         </text>)
</script> 
```

如果您使用 System.Web.Optimization，则所有必要的 dll 都已被引用，否则您可以安装 WebGrease NuGet 包。

此处提供了一些其他详细信息：http: [//www.cleansoft.lv/minify-inline-javascript-in-asp-net-mvc-with-webgrease/](http://www.cleansoft.lv/minify-inline-javascript-in-asp-net-mvc-with-webgrease/)

编辑：将 DynamicInvoke() 替换为 Invoke()。这里不需要运行时检查，Invoke 比 DynamicInvoke 快得多。添加 。？检查可能的空值。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-01T16:57:37.323

以最小的努力做到这一点的方法是将其提取到脚本文件中。然后，您可以根据需要使用捆绑和缩小。

如果您想内联缩小它，这将比简单地将脚本移出页面要付出更大的努力。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-10-09T21:24:16.367

根据@samfromlv 的回答，我也创建了一个扩展来处理 CSS。它也考虑`BundleTable.EnableOptimizations`在内。

[优化扩展.cs](https://gist.github.com/MrScruffy04/6908211)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-05-16T16:13:44.030

添加 ASP.NET MVC Core 的答案。我用来缩小内联 JS 和 razor 生成的 html 的解决方案是[WebMarkupMin](https://www.nuget.org/packages/WebMarkupMin.Core)。

最终归结为在我的项目中添加这两个微小的更改：

```
public void Configure(IApplicationBuilder app)  
{
    app.UseStaticFiles();

    //added
    app.UseWebMarkupMin();

    app.UseMvc(.....
}

public void ConfigureServices(IServiceCollection services)  
{
    services.AddMvc();

    //added    
    services.AddWebMarkupMin(
        options =>
        {
            //i comment these two lines out after testing locally
            options.AllowMinificationInDevelopmentEnvironment = true;
            options.AllowCompressionInDevelopmentEnvironment = true;
        })
        .AddHttpCompression();
} 
```

[Andrew Lock（ ASP.NET Core in Action](https://www.manning.com/books/asp-dot-net-core-in-action)的作者）有一篇很棒的博客文章，关于使用 WebMarkupMin [https://andrewlock.net/html-minification-using-webmarkupmin-in-asp-net-core/](https://andrewlock.net/html-minification-using-webmarkupmin-in-asp-net-core/) WebMarkupMin 是高度可配置的，并且Andrew 的帖子更深入，强烈建议您在复制和粘贴之前仔细阅读。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-02-05T12:28:31.613

聚会有点晚了，但对于 .NET Core，您可以使用 TagHelper 来缩小脚本标记的内容，如下所示：

```
[HtmlTargetElement("script", Attributes = MinifyAttributeName)]
public class ScriptTagHelper : TagHelper
{
    private const string MinifyAttributeName = "minify";

    [HtmlAttributeName(MinifyAttributeName)]
    public bool ShouldMinify { get; set; }

    public override async Task ProcessAsync(TagHelperContext context, TagHelperOutput output)
    {
        if (!ShouldMinify)
        {
            await base.ProcessAsync(context, output);
            return;
        }

        var textChildContent = await output.GetChildContentAsync();
        var scriptContent = textChildContent.GetContent();

        // or use any other minifier here
        var minifiedContent = NUglify.Uglify.Js(scriptContent).Code;

        output.Content.SetHtmlContent(minifiedContent);
    }
} 
```

然后在您的视图中使用它：

```
<script minify="true">
  ...
</script> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-20T20:46:01.657

Fenton 对此给出了很好的回答：“与其缩小内联 JavaScript 代码，不如将内联 JavaScript 代码外部化，然后你可以使用任何标准的 JavaScript 缩小器/捆绑器进行缩小。”

以下是外部化 JavaScript 的方法：[https ://webdesign.tutsplus.com/tutorials/how-to-externalize-and-minify-javascript--cms-30718](https://webdesign.tutsplus.com/tutorials/how-to-externalize-and-minify-javascript--cms-30718)

这是我缩小内联 JavaScript 代码的直接答案（需要一些手动工作）。

1.  复制内联 JavaScript 代码片段并将它们粘贴到单独的 JavaScript 文件中并保存，例如`inline.js`

2.  使用[esbuild](https://github.com/evanw/esbuild)缩小中的内联代码片段，在[此处](https://esbuild.github.io/api/#minify)`inline.js`查看有关缩小的更多详细信息

    ```
    esbuild --minify < inline.js > inline-minified.js 
    ```

3.  复制缩小的 JavaScript 代码片段`inline-minified.js`并将其粘贴回原始 HTML 以替换标记内的原始代码。

4.  完毕。

# c++ - Boost::Range 中的 itertools.tee 等价物？

> ID：13181823
> 
> 赞同：9
> 
> 时间：2012-11-01T16:52:32.377
> 
> 标签：c++, boost, boost-range

Python`itertools`具有`tee`用于 n 复制迭代的功能：

```
def tee(iterable, n=2):
    it = iter(iterable)
    deques = [collections.deque() for i in range(n)]
    def gen(mydeque):
        while True:
            if not mydeque:             # when the local deque is empty
                newval = next(it)       # fetch a new value and
                for d in deques:        # load it to all the deques
                    d.append(newval)
            yield mydeque.popleft()
    return tuple(gen(d) for d in deques) 
```

我在`Boost::Range`. 我错过了什么还是应该自己动手？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T21:46:23.083

[itertools.tee](http://docs.python.org/2/library/itertools.html#itertools.tee)非常适合在 Python 中无处不在的单遍迭代。例如[生成器](http://wiki.python.org/moin/Generators)是单通道的，它们经常被使用。

但是，如果您已经拥有 list/deque，您将不会使用**itertools.tee**，因为它会涉及多余的重复 - 您可以一遍又一遍地迭代原始 list/deque。

C++ 也有单通范围的概念，例如[Input Iterator](http://www.sgi.com/tech/stl/InputIterator.html)，但它们并不那么普遍。这是典型 C++ 程序的另一组目标的结果 - 尽可能为用户提供最大的保持最佳性能。如果你愿意，这是另一种心态。

为了说明这一点，让我们比较[boost::transformed](http://www.boost.org/doc/libs/1_53_0/libs/range/doc/html/range/reference/adaptors/reference/transformed.html)和[itertools.imap](http://docs.python.org/2/library/itertools.html#itertools.imap)（或[生成器表达式](http://docs.python.org/2/reference/expressions.html#grammar-token-generator_expression)）：

它们都通过给定的“棱镜”提供输入序列的视图。**itertools.imap**返回单程可迭代，而**boost::transformed**返回与输入范围具有相同类别的范围视图 - 即，如果您将[随机访问范围](http://www.boost.org/doc/libs/1_53_0/libs/range/doc/html/range/concepts/random_access_range.html)作为输入传递，您将获得**随机访问范围**作为结果。

另一个事实是 C++ 默认使用[值语义](http://en.wikipedia.org/wiki/Value_semantics)，而 python 具有指针语义。这意味着如果在 C++ 中复制迭代器，并且多次“碰撞”它 - 原始迭代器将不会被更改（虽然如果它是单遍范围，它可能会失效，但这不是重点）。

但是，有时您确实希望从单程范围内累积值并多次查看它们。在这种情况下，最常见的解决方案是手动将值显式地累积到某个容器。例如：

```
vector<int> cache(first,last); 
```

* * *

但是，在 C++ 中仍然可以使用类似 tee 的包装器，这里是**概念验证**。用法是：

```
auto forward_range = tee_range(first,last); 
```

**tee_range**将**单程范围**作为参数并返回**前向范围**（多程）（还有**make_tee_iterator**，它在迭代器级别工作）。因此，您可以复制该范围并对其进行多次迭代：

```
auto r = forward_range;
auto out = ostream_iterator<int>(cout," ");
copy(forward_range,out);
copy(forward_range,out);
copy(r,out); 
```

还有对**itertools.tee**的改进——在内部，只有一个**双端队列**用于缓存值。

[现场演示](http://coliru.stacked-crooked.com/a/2689e33e4eb3ccce)：

```
#include <boost/range/adaptor/transformed.hpp>
#include <boost/iterator/iterator_facade.hpp>
#include <boost/smart_ptr/make_shared.hpp>
#include <boost/range/iterator_range.hpp>
#include <boost/smart_ptr/shared_ptr.hpp>
#include <boost/container/vector.hpp>
#include <boost/container/deque.hpp>
#include <boost/range/algorithm.hpp>
#include <algorithm>
#include <iterator>
#include <cassert>
#include <limits>

template<typename InputIterator>
class tee_iterator : public boost::iterator_facade
    <
        tee_iterator<InputIterator>,
        const typename std::iterator_traits<InputIterator>::value_type,
        boost::forward_traversal_tag
    >
{
    typedef typename std::iterator_traits<InputIterator>::value_type Value;
    typedef unsigned Index;
    struct Data
    {
        boost::container::deque<Value> values;
        boost::container::vector<tee_iterator*> iterators;
        InputIterator current,end;
        Index min_index, current_index;
        Index poped_from_front;
        //
        Data(InputIterator first,InputIterator last)
            : current(first), end(last), min_index(0), current_index(0), poped_from_front(0)
        {}
        ~Data()
        {
            assert(iterators.empty());
        }
    };
    boost::shared_ptr<Data> shared_data;
    Index index;
    static Index get_index(tee_iterator *p)
    {
        return p->index;
    }
public:
    tee_iterator()
        : index(std::numeric_limits<Index>::max())
    {}
    tee_iterator(InputIterator first,InputIterator last)
        : shared_data(boost::make_shared<Data>(first,last)), index(0)
    {
        shared_data->iterators.push_back(this);
    }
    tee_iterator(const tee_iterator &x)
        : shared_data(x.shared_data), index(x.index)
    {
        if(shared_data)
            shared_data->iterators.push_back(this);
    }
    friend void swap(tee_iterator &l,tee_iterator &r)
    {
        using std::swap;
        *boost::find(l.shared_data->iterators,&l) = &r;
        *boost::find(r.shared_data->iterators,&r) = &l;
        swap(l.shared_data,r.shared_data);
        swap(l.index,r.index);
    }
    tee_iterator &operator=(tee_iterator x)
    {
        swap(x,*this);
    }
    ~tee_iterator()
    {
        if(shared_data)
        {
            erase_from_iterators();
            if(!shared_data->iterators.empty())
            {
                using boost::adaptors::transformed;
                shared_data->min_index = *boost::min_element(shared_data->iterators | transformed(&get_index));
                Index to_pop = shared_data->min_index - shared_data->poped_from_front;
                if(to_pop>0)
                {
                    shared_data->values.erase(shared_data->values.begin(), shared_data->values.begin()+to_pop);
                    shared_data->poped_from_front += to_pop;
                }
            }
        }
    }
private:
    friend class boost::iterator_core_access;
    void erase_from_iterators()
    {
        shared_data->iterators.erase(boost::find(shared_data->iterators,this));
    }
    bool last_min_index() const
    {
        return boost::count
        (
            shared_data->iterators | boost::adaptors::transformed(&get_index),
            shared_data->min_index
        )==1;
    }
    Index obtained() const
    {
        return Index(shared_data->poped_from_front + shared_data->values.size());
    }
    void increment()
    {
        if((shared_data->min_index == index) && last_min_index())
        {
            shared_data->values.pop_front();
            ++shared_data->min_index;
            ++shared_data->poped_from_front;
        }
        ++index;
        if(obtained() <= index)
        {
            ++shared_data->current;
            if(shared_data->current != shared_data->end)
            {
                shared_data->values.push_back(*shared_data->current);
            }
            else
            {
                erase_from_iterators();
                index=std::numeric_limits<Index>::max();
                shared_data.reset();
            }
        }
    }
    bool equal(const tee_iterator& other) const
    {
        return (shared_data.get()==other.shared_data.get()) && (index == other.index);
    }
    const Value &dereference() const
    {
        if((index==0) && (obtained() <= index))
        {
            shared_data->values.push_back(*(shared_data->current));
        }
        assert( (index-shared_data->poped_from_front) < shared_data->values.size());
        return shared_data->values[index-shared_data->poped_from_front];
    }
};

template<typename InputIterator>
tee_iterator<InputIterator> make_tee_iterator(InputIterator first,InputIterator last)
{
    return tee_iterator<InputIterator>(first,last);
}

template<typename InputIterator>
boost::iterator_range< tee_iterator<InputIterator> > tee_range(InputIterator first,InputIterator last)
{
    return boost::iterator_range< tee_iterator<InputIterator> >
    (
        tee_iterator<InputIterator>(first,last),
        tee_iterator<InputIterator>()
    );
}
// _______________________________________________________ //

#include <iostream>
#include <ostream>
#include <sstream>

int main()
{
    using namespace std;
    stringstream ss;
    ss << "1 2 3 4 5";
    istream_iterator<int> first(ss /*cin*/ ),last;
    typedef boost::iterator_range< tee_iterator< istream_iterator<int> > > Range; // C++98
    Range r1 = tee_range(first,last);
    Range r2 = r1, r3 = r1;
    boost::copy(r1,ostream_iterator<int>(cout," "));
    cout << endl;
    boost::copy(r2,ostream_iterator<int>(cout," "));
    cout << endl;
    boost::copy(r2,ostream_iterator<int>(cout," "));
} 
```

输出是：

```
1 2 3 4 5
1 2 3 4 5
1 2 3 4 5 
```

* * *

[Boost.Spirit](http://www.boost.org/doc/libs/1_53_0/libs/spirit/doc/html/index.html)具有类似目标的[Multi Pass 迭代器。](http://www.boost.org/doc/libs/1_53_0/libs/spirit/doc/html/spirit/support/multi_pass.html)

> multi_pass 迭代器会将任何输入迭代器转换为适合与 Spirit.Qi 一起使用的前向迭代器。multi_pass 将在需要时缓冲数据，并在不再需要其内容时丢弃缓冲区。如果只有一个迭代器副本存在，或者没有回溯发生，就会发生这种情况。

# php - 具有挑战性的问题 - 使用 PHP 对 XML 数据进行排序

> ID：13181833
> 
> 赞同：0
> 
> 时间：2012-11-01T16:53:39.770
> 
> 标签：php, xml

我有包含大量产品数据的 xml 文件。我需要根据我的字段（ProductRange）的数据对我的产品进行排序。

```
$ProductRange=urldecode($_GET['Range']); 
```

**XML文件数据：**

```
<?xml version="1.0" standalone="yes"?>
<Rows>
<Row Code="10026" Name="Eden 36cm Shallow Round Planter Terracotta"  
ProductRange="Eden;3" ProductSubRange="EDEN 36CM ROUND PLANTER"  />
<Row Code="10031" Name="Lid only for 30l Crystal and Uni Clear" 
ProductRange="Crystal;410;Uni;3" ProductSubRange="30Ltr LID"    />
<Row Code="10088" Name="Casa Hipster Laundry Basket Silver" ProductRange="Casa;2"  
ProductSubRange="CASA HIPSTER LAUNDRY BASKET" />
<Row Code="10091" Name="Casa Hipster Laundry Basket Ice White" 
ProductRange="Casa;8;Laundry;1" ProductSubRange="CASA HIPSTER LAUNDRY BASKET"   />
<Row Code="10200" Name="Eden Grid Cover Black" ProductRange="Eden;8" 
ProductSubRange="EDEN DRAIN TIDY/GRID COVER" />
<Row Code="10249" Name="Lid only for 50L Uni Assorted" ProductRange="Uni;1" 
ProductSubRange="50Ltr MAXI BOX LID"  />
<Row Code="10259" Name="Uni 50L Box Clear" ProductRange="Uni" ProductSubRange="MAXIBOX" />
<Row Code="10269" Name="Eden 46cm Shallow Round Planter Terracotta"       
ProductRange="Eden;1" ProductSubRange="EDEN 46CM ROUND PLANTER"  />
</Rows> 
```

字段“ProductRange”包含值/订单，即 ProductRange="{Range of Product};{Sorting Order of Product 它应该出现在 ProductRange}"。例如，Code="10031" 和 ProductRange="Crystal;410;Uni;3" 的产品应分别出现在排序 ASCENDING 顺序为 410 的 Crystal 和排序顺序为 3 的 Uni 下。并且 ProductRange 不带分号，例如 ProductRange=" Uni”可以以任何顺序出现。请注意，一个 ProductRange 可以有多个产品，如 XML 中用分号指示的那样。

**问题：** 我如何通过使用 PHP 拆分 ProductRange 字段来对我的产品进行排序，以便它可以生成类似升序排序的结果：

*伊甸园：*

```
 Code: 10269         Name: Eden 46cm Shallow Round Planter Terracotta
  Code: 10026         Name: Eden 36cm Shallow Round Planter Terracotta 
  Code: 10200         Name: Eden Grid Cover Black 
```

*单：*

```
 Code=10259          Name: Uni 50L Box Clear
 Code:10249          Name: Lid only for 50L Uni Assorted 
 Code:10031          Name: Lid only for 30l Crystal and Uni Clear 
```

*水晶：*

```
 Code:10031         Name: Lid only for 30l Crystal and Uni Clear 
```

*卡萨：*

```
 Code:10088         Name: Casa Hipster Laundry Basket Silver
  Code="10091"       Name: Casa Hipster Laundry Basket Ice White 
```

等等.....

如何按此顺序提取数据？请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T08:19:48.313

您以前的功能就可以了，您所需要的只是微小的变化

改变

```
 case 'ProductRange' : 
```

至

```
 case 'ProductRange' :
                case 'Name' : 
```

或者只需删除 switch 语句

然后打电话

```
$list = groupBy($xml, "Name", array("show" => true,"delimiter" => " ","name" => "Eden"));
print("<pre>");
foreach ( $list as $name => $value ) {
    foreach ( $value as $element ) {
        printf("Code:%s         Name: %s\n",$element['Code'],$name);
    }
} 
```

输出

```
Code:10026         Name: Eden 36cm Shallow Round Planter Terracotta
Code:10200         Name: Eden Grid Cover Black
Code:10269         Name: Eden 46cm Shallow Round Planter Terracotta 
```

# c# - ASP.NET 如何上传我的网站

> ID：13181841
> 
> 赞同：0
> 
> 时间：2012-11-01T16:54:17.090
> 
> 标签：c#, asp.net, web

这似乎是一个非常愚蠢的问题，但我在任何地方都找不到我的问题的答案：如何将我的 asp.net 网站上传到我的虚拟主机，或者我需要微软提供的虚拟主机。提前感谢您的回答

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:55:10.633

右键单击在 vs 中发布项目文件，您几乎没有选择上传它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T16:56:53.363

使用一些 ftp 客户端将您的网站内容发布到您的服务器。

您可以使用**[FileZilla](http://filezilla-project.org/)**发布您的网站内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T21:49:02.240

一些网络主机提供文件上传器通过文件管理器上传您的 asp.net 文件，如果您不上传太多文件或大文件，您可以使用基于 web 的 webhost 文件管理器，例如爸爸有一个。或者创建一个 FTP 帐户在虚拟主机上并通过 FTP 客户端（例如 Filezila）上传，您可以从[http://filezilla-project.org/](http://filezilla-project.org/)下载它您需要提供 asp.net 托管的虚拟主机

# delphi - TRemotable 类中的 Delphi XE2 泛型

> ID：13181842
> 
> 赞同：3
> 
> 时间：2012-11-01T16:54:21.097
> 
> 标签：delphi, generics, soap, delphi-xe2

由于与我想在我的 TRemotable 类中使用泛型的问题不相关的原因。我发现 Soap.OPToSOAPDomConv.pas 有一些问题。它使用的是旧的 RTTI，我猜它无法处理泛型，因此类不会序列化为 xml。

我设法更改了 Soap.OPToSOAPDomConv.pas 以便它与泛型一起使用。我的主要问题是是否可以对 Delphi 源文件进行更改？如果不是，有没有更好的方法来做到这一点？只要是我自己用的，我想应该没有什么大问题，但是很难把源码分发给其他人，还有Delphi未来的变化需要考虑。这篇冗长的帖子的其余部分只是关于我实际在做什么的细节:-)

我在 Soap.OPToSOAPDomConv.pas 中改变了这个（第 3759 行）

```
if SerializeProps then
begin
  { Serialized published properties }
  Count := GetTypeData(Instance.ClassInfo)^.PropCount;
  if Count > 0 then
  begin
    CheckedElemURI := False;
    GetMem(PropList, Count * SizeOf(Pointer));
    try
      GetPropInfos(Instance.ClassInfo, PropList); 
```

To：（我猜这不是最漂亮的实现）

过程中的新变量：

```
Context: TRttiContext;       
RttiProperty:  TRttiProperty; 
```

第 3759 行：

```
if SerializeProps then
begin
  { Serialized published properties }
  Count := 0;
  for RttiProperty in Context.GetType(Instance.ClassInfo).GetProperties do
  begin
    if RttiProperty.Visibility = mvPublished then //The old method only read published
      Count := Count + 1;                         //RTTI scoping [mvPublished] requires changes to
  end;                                            //soap.InvRegistry
  begin
    CheckedElemURI := False;
    GetMem(PropList, Count * SizeOf(Pointer));
    try
      I := 0;
      for RttiProperty in Context.GetType(Instance.ClassInfo).GetProperties do
        if RttiProperty.Visibility = mvPublished then
        begin
          PropList[I] := TRttiInstanceProperty(RttiProperty).PropInfo;
          I := I + 1;
        end; 
```

关于我在做什么的一些细节可能会有所帮助。背景是从 SOAP Web 服务导入的 wsdl 生成了一个巨大的单元，它由大约 2000 个类和 300k 行代码组成。Web 服务设计是我无法控制的。WSDL 导入器使所有这些类在 RTTI 中可见，这会消耗 RTTI 空间并且单元不会编译。

我已经在这里和那里重构了代码，现在有了一个有效的实现。在重构时，我发现我可以通过使用泛型删除大约 50000 行冗余代码。由于 Delphi 无论如何都不会“按原样”编译导入的 wsdl，所以每当 Web 服务中出现新方法时，我都必须手动维护该单元，所以我想让它尽可能可读。

基本上我是根据下面的变化。该示例具有非常简化的类，并且该示例实际上在重构代码中具有更多行，但考虑到原始类有很多程序等，这种方法确实使单元更具可读性，并且也更容易组合类。

```
TLCar = class(TRemotable)
private
  FEngine: string;
  FName: string;
published
  property Name: string read FName write FName;
  property Engine: string read FEngine write FEngine;
end;

TLBicycle = class(TRemotable)
private
  FPedals: string;
  FName: string;
published
  property Name: string read FName write FName;
  property Pedals: string read FPedals write FPedals;
end;

TListCarRequest = class(TRemotable)
private
  FreturnedTags: TLCar;
published
  property returnedTags: TLCar read FreturnedTags write FreturnedTags;
end;

TListBiCycleRequest = class(TRemotable)
private
  FreturnedTags: TLBicycle;
published
  property returnedTags: TLBicycle read FreturnedTags write FreturnedTags; 
```

到：

```
TCommonReturnedTags = class(TRemotable)
private
  FName: string;
published
  property Name: string read FName write FName;
end;

TLCar = class(TCommonReturnedTags)
private
  FEngine: string;
published
  property Engine: string read FEngine write FEngine;
end;

TLBicycle = class(TCommonReturnedTags)
private
  FPedals: string;
published
  property Pedals: string read FPedals write FPedals;
end;

TGenericListRequest<T: TCommonReturnedTags, constructor> = class(TRemotable)
private
  FreturnedTags: T;
published
  property returnedTags: T read FreturnedTags write FreturnedTags;
end;

TListCarRequest = class(TGenericListRequest<TLCar>)
end;

TListBiCycleRequest = class(TGenericListRequest<TLBicycle>)
end; 
```

亲切的问候，

担

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-06T20:14:39.920

进行此类修改时需要考虑两件事。首先，更改是否会对现有功能产生影响。在这种情况下，我会说它是安全的，因为该功能是此操作的新功能，因此不应出现任何意外行为。第二部分是进化开发环境。环境演变的问题是动作之间的绑定可能会发生变化，这可能会导致意想不到的事情。此时可以假设 XE2 已经分享了更新。如果不是，则在修补或更新时必须密切注意。第二种变化，如从 XE2 到 XE3 的变化可以更好地处理。只需将以下内容放在*Soap.OPToSOAPDomConv.pas*顶部：

```
{$IFNDEF VER230}
   {$MESSAGE ERROR 'Intended to be used with XE2'}
{$ENDIF} 
```

当编译时出错时，您可能会模糊地记得那个文件有一些东西......所以简而言之，就尝试评估影响和适应环境变化而言，这并不是一件坏事。希望这是你想知道的。

# javascript - Angular：如何在控制器中访问元素指令的范围

> ID：13181846
> 
> 赞同：6
> 
> 时间：2012-11-01T16:54:29.157
> 
> 标签：javascript, angularjs

鉴于这个简单的 Angular 模块：

```
angular.module('fixturesModule', [])
.directive('clubfixtures', function () {
    "use strict";
    return {
        restrict: 'E',
        replace: true,
        transclude: true,
        scope: {
            club : "@club",
            max : "@max"
        },

    templateUrl: "ClubResultsTemplate.html",

    controller: function ($scope, $http) {

        $http.get("data.json").success(function (data) {
            $scope.results = data;
        });

        $scope.sortBy = "Date";

    }
}
}); 
```

如何在控制器功能中访问俱乐部和最大值？

谢谢，杰夫

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-20T12:41:47.727

范围内的属性使用“@”设置，如在调用控制器函数*后*`scope: { myAttr: '@' }`接收它们的值。

 *您可以使用简单的 setTimeout 来演示这一点 - 请参阅[http://jsfiddle.net/Q4seC/](http://jsfiddle.net/Q4seC/)（请务必打开控制台）

如您所见，$attrs 已在您需要时准备就绪。

有趣的是，如果您使用 '=' 而不是 '@'，则该值已准备好并且可用，这让我认为这可能被视为 Angular 中的错误......

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-01T17:32:41.813

提到的 2 个变量 (`max`和`club`) 将简单地定义在注入指令控制器的范围内。这意味着您可以编写：

```
controller: function ($scope, $http) {

        $scope.max; //do sth with $scope.max
        $scope.club //so sth with $scope.club

        $http.get("data.json").success(function (data) {
            $scope.results = data;
        });
} 
```

在您的指令的控制器中。

如果您想了解更多信息，我建议在[http://docs.angularjs.org/guide/directive](http://docs.angularjs.org/guide/directive)中使用“指令定义对象”，其中讨论指令中的范围。*

# android - 在运行时更改语言环境？

> ID：13181847
> 
> 赞同：13
> 
> 时间：2012-11-01T16:54:37.063
> 
> 标签：android, localization

我们有一个 Android 应用程序，可用作远程 PC 程序的客户端。我们想添加一个功能，以便 PC 可以指示 Android 应用程序在运行时更改其区域设置，即启动应用程序；将其与 PC 通信；稍后，PC 会告诉应用程序切换到西班牙语或中文。

我们已经为它们各自的语言环境设置了所有布局和字符串资源。我们的应用程序是用户看到的唯一应用程序，因此设备的其余部分是否保持英语并不重要。

[在 Android 中以编程方式更改语言](https://stackoverflow.com/questions/2900023/change-language-programatically-in-android)有另一个线程，但似乎没有得出结论。

我可以放。. .

```
Locale locale = new Locale(sTheNewLocale);
Locale.setDefault(locale);
Configuration config = new Configuration();
config.locale = locale;
getBaseContext().getResources().updateConfiguration(config,
      getBaseContext().getResources().getDisplayMetrics()); 
```

. . . 在*setContentView(* )之前的*onCreate()*中，但如果我想在屏幕启动并运行后更改语言环境，这并没有真正帮助。有没有办法在 Activity 已经运行后重新加载内容视图？那么**有**什么实用的方法可以可靠地即时更改语言环境，还是我必须告诉我的老板除了在启动应用程序之前将整个设备设置为新的语言环境之外，这是无法做到的？

 **** * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-12-09T14:33:13.883

由于您可以使用 API 11，[`recreate`](http://developer.android.com/reference/android/app/Activity.html#recreate())因此可以在您的活动中使用此方法：

```
private void restartInLocale(Locale locale)
{
    Locale.setDefault(locale);
    Configuration config = new Configuration();
    config.locale = locale;
    Resources resources = getResources();
    resources.updateConfiguration(config, resources.getDisplayMetrics());
    recreate();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T16:58:39.063

您可以启动活动的新实例并退出旧实例。这是一个完整的（未经测试的）示例，您可以如何存储任何所需的语言并重新启动您的应用程序。你只需要用`restartInLanguage`你喜欢的语言打电话。

```
public class YourMainActivity extends Activity {
    private static final String APP_SHARED_PREFS = "com.example.test";
    private SharedPreferences settings;
    private Editor editor;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        settings=getSharedPreferences(APP_SHARED_PREFS, Activity.MODE_PRIVATE);
        editor=settings.edit();

        Locale locale = new Locale(settings.getString("lang", "default-lang"));
        Locale.setDefault(locale);
        Configuration config = new Configuration();
        config.locale = locale;
        getResources().updateConfiguration(config, getResources().getDisplayMetrics());

        // your stuff...
    }

    public void restartInLanguage(String lang) {
        editor.putString("lang", lang);
        editor.commit();
        Intent intent = getIntent();
        finish();
        startActivity(intent);
    }

    // ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-08T11:00:18.270

我结合了@weston 和@rekire（都是+1）并扩展它来处理这个用例：

*   ActivityA => ActivityB => SettingsActivity-changeLocale

在父活动之后`changeLocale`，还应该重新创建以反映新的语言环境。`SettingsActivity``ActivityA``ActivityB`

我的解决方案： ActivityA 和 ActivityB 继承，如果区域设置已更改，则从`LocalizedActivity`其签入并在必要时`onResume`触发`recreate()`

因此，每个继承自的活动都会 `LocalizedActivity`自动处理特定于应用程序的区域设置更改。

```
/**
 * An activity that can change the locale (language) of its content.
 *
 * Inspired by http://stackoverflow.com/questions/13181847/change-the-locale-at-runtime
 *
 * Created by k3b on 07.01.2016.
 */
public class LocalizedActivity extends Activity {
    /** if myLocale != Locale.Default : activity must be recreated in on resume */
    private Locale myLocale = null;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        fixLocale(this);
        super.onCreate(savedInstanceState);
    }

    @Override
    protected void onResume() {
        super.onResume();

        // Locale has changed by other Activity ?
        if ((myLocale != null) && (myLocale.getLanguage() != Locale.getDefault().getLanguage())) {
            myLocale = null;
            recreate();
        }
    }

    /**
     * Set Activity-s locale to SharedPreferences-setting.
     * Must be called before onCreate
     * @param context
     */
    public static void fixLocale(Context context)
    {
        final SharedPreferences prefs = PreferenceManager
                .getDefaultSharedPreferences(context);
        String language = prefs.getString(Global.PREF_KEY_USER_LOCALE, "");
        Locale locale = Global.systemLocale; // in case that setting=="use android-locale"
        if ((language != null) && (!language.isEmpty())) {
            locale = new Locale(language); // overwrite "use android-locale"
        }

        if (locale != null) {
            Locale.setDefault(locale);
            Configuration config = new Configuration();
            config.locale = locale;
            Resources resources = context.getResources();
            resources.updateConfiguration(config, resources.getDisplayMetrics());
            // recreate();

            if (context instanceof LocalizedActivity) {
                ((LocalizedActivity) context).myLocale = locale;
            }
        }
    }
} 
```

这是我[的 A Photo Manager 项目中使用的](https://github.com/k3b/AndroFotoFinder)[LocalizedActivity.java](https://github.com/k3b/AndroFotoFinder/blob/master/app/src/main/java/de/k3b/android/widget/LocalizedActivity.java)和[SettingsActivity.java](https://github.com/k3b/AndroFotoFinder/blob/master/app/src/main/java/de/k3b/android/androFotoFinder/SettingsActivity.java)的源代码

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-13T21:21:39.970

解决方案是在设置语言环境后，在 onResume 方法的每个活动中使用 setContentView 和 controlLanguage（您也可以从 Global 类调用此方法）方法。例子：

```
@Override
    public void onClick(View v) {
        SharedPreferences.Editor editor;
        editor = sharedPref.edit();
        Configuration config = new Configuration(getBaseContext().getResources().getConfiguration());
        String language = "";
        switch (v.getId()){
            case R.id.turkceButton:
                editor.putString("language", "tr");
                language="tr";
                break;
            case R.id.englishButton:
                editor.putString("language", "en");
                language="en";
                break;
        }
        Locale locale = new Locale(language);
        Locale.setDefault(locale);
        config.locale = locale;
        getBaseContext().getResources().updateConfiguration(config, getBaseContext().getResources().getDisplayMetrics());
        editor.commit();

@Override
    protected void onResume() {
        super.onResume();
        controlLanguage(getApplicationContext(), getResources());
        setContentView(R.layout.main);
    }

public void controlLanguage(Context context, Resources res){
        SharedPreferences sharedPref = PreferenceManager.getDefaultSharedPreferences(context);
        String language = sharedPref.getString("language","en");
        Locale locale = new Locale(language);
        Locale.setDefault(locale);
        res.getConfiguration().locale = locale;
        res.updateConfiguration(res.getConfiguration(), res.getDisplayMetrics());
    } 
```***

# android - 如何在 android 布局中添加 3 个按钮并让每个按钮的宽度为 33.3%？

> ID：13181849
> 
> 赞同：2
> 
> 时间：2012-11-01T16:54:38.697
> 
> 标签：android

我有一个问题，我需要在 android 布局中放置 3 个按钮，但是：

*   它们都应该排成一排
*   它们都应该是显示宽度的 33.3%

我用表格和堆栈布局尝试了一些东西，但没有设法让它与宽度一起工作。

请帮我

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T16:56:29.773

使用 LinearLayout 作为根，然后为每个按钮赋予属性`android:layout_weight="1"`- 这将使它们的权重相同，并占用空间。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:layout_margin="5dip"
android:orientation="horizontal" >
<Button
    android:id="@+id/rvButton" 
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:layout_weight="1"
    />
<Button
    android:id="@+id/rvButton" 
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:layout_weight="1"
    />
<Button
    android:id="@+id/rvButton" 
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:layout_weight="1"
    /> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T16:58:09.633

采用水平方向的线性布局并按如下所示放置相同的权重。

```
<LinearLayout
android:orientation="horizontal"
android:layout_width="fill_parent"
android:layout_height="wrap_content">
<Button
android:layout_width="0dp"
android:layout_weight="1"
android:layout_height="wrap_content"/>
<Button
android:layout_width="0dp"
android:layout_weight="1"
android:layout_height="wrap_content"/>

<Button
android:layout_width="0dp"
android:layout_weight="1"
android:layout_height="wrap_content"/>
</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-01T16:58:43.140

试试这个：

```
<LinearLayout
  android:layout_with="fill_parent"
  android:layout_height="warp_content"
  android:orientation="horizontal"
  android_weight_sum="3">
  <View 
    android:layout_width="0dip"
    android:layout_height="wrap_content"
    android:layout_weight=1 />
  <View 
    android:layout_width="0dip"
    android:layout_height="wrap_content"
    android:layout_weight=1 />
  <View 
    android:layout_width="0dip"
    android:layout_height="wrap_content"
    android:layout_weight=1 />
</LinearLayout> 
```

您的 LinearLayout 的总和为 3，其中的每个 View 恰好占其空间的三分之一

# javascript - 是否存在允许旋转变换尊重 div 边界的方法或插件？

> ID：13181850
> 
> 赞同：4
> 
> 时间：2012-11-01T16:54:39.677
> 
> 标签：javascript, html, css, jquery-plugins

默认情况下，css rotate 属性似乎出现在标签间距之后。[例如，如果您在一列中有两个 div 并且您旋转一个，它们会重叠。](http://jsfiddle.net/ArielT/NKgCg/8/)我可能完全错过了处理这个问题的 css 或 html 的某些方面，是吗？

显而易见的解决方案似乎是编写一些 javascript 来管理旋转后元素的放置。是否存在有助于处理此间距的插件？我能找到的唯一接近的是[jquery-rotate plug](http://code.google.com/p/jquery-rotate/)，但它似乎没有提供任何关于间距的功能。

演示间距问题的相关 html/css。

HTML

```
<div class="red-box rotate-right"></div>
<div class="blue-box"></div>​ 
```

CSS

```
.rotate-right {
  -webkit-transform: rotate(90deg);
  -moz-transform: rotate(90deg);
  -o-transform: rotate(90deg);
  -ms-transform: rotate(90deg);
  transform: rotate(90deg);
}

.red-box{
  height: 50px;
  width: 100px;
  background: red;
}

.blue-box{
  height: 50px;
  width: 100px;
  background: blue;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T21:03:06.180

好吧，当心这看起来很难看。

首先，我使用[CSS-Tricks 中的代码](http://css-tricks.com/get-value-of-css-rotation-through-javascript/)来获取旋转角度。然后，我使用一些代数来找到（从旋转元素的中心）到包含该元素的框边的距离。然后我在旋转元素的边缘添加边距，以在需要的地方创建（或删除）额外空间。这也考虑了原始边距（如果有）。

用法：

旋转元素后，调用`$(rotatedElement).space([grow],[shrink])`. 有关参数描述，请参见代码注释。

```
jQuery.fn.space = function(grow,shrink){
    // grow = Grow area around element to fit? (true/false)
    // shrink = Shrink area around element to fit? (true/false)
    var el = this.get(0);
    if(typeof(grow)=='undefined'){
        grow = true; // Default to grow extra space when needed
    }
    if(typeof(shrink)=='undefined'){
        shrink = false; // Default to not shrink at all
    }

    //Get angle of rotated element
    var st = window.getComputedStyle(el, null);
    var tr = st.getPropertyValue("-webkit-transform") ||
         st.getPropertyValue("-moz-transform") ||
         st.getPropertyValue("-ms-transform") ||
         st.getPropertyValue("-o-transform") ||
         st.getPropertyValue("transform");
    var v = tr.split('(')[1].split(')')[0].split(',');
    var scale = Math.sqrt(v[0]*v[0] + v[1]*v[1]);
    var angle = Math.round(Math.atan2(v[1], v[0]) * (180/Math.PI));

    //Save or recall original margins
    var m = new Array();
    if(el.getAttribute('margins')==null){
        m[0] = st.getPropertyValue("margin-left").match(/\d+/);
        m[1] = st.getPropertyValue("margin-right").match(/\d+/);
        m[2] = st.getPropertyValue("margin-top").match(/\d+/);
        m[3] = st.getPropertyValue("margin-bottom").match(/\d+/);
        el.setAttribute('margins',m[0]+","+m[1]+","+m[2]+","+m[3]);
    } else {
        m = el.getAttribute('margins').split(',');
        console.log(m);
    }
    //Get center coords
    var cx = st.getPropertyValue("width").match(/\d+/)/2;
    var cy = st.getPropertyValue("height").match(/\d+/)/2;

    //Convert radian values to degrees
    function toDeg(angle){
        return angle*Math.PI/180;
    }

    // Coords of the corners
    // (starting from top-left and proceeding clockwise)
    // relative to the center of the element
    // c[cornerID][x|y]
    var c = [ [Math.round(cx*Math.cos(toDeg(angle-180))
                 + cy*Math.cos(toDeg(angle-90))),
               Math.round(cx*Math.sin(toDeg(angle-180))
                 + cy*Math.sin(toDeg(angle-90)))],

              [Math.round(cx*Math.cos(toDeg(angle))
                 + cy*Math.cos(toDeg(angle-90))),
               Math.round(cx*Math.sin(toDeg(angle))
                 + cy*Math.sin(toDeg(angle-90)))],

              [Math.round(cx*Math.cos(toDeg(angle))
                 + cy*Math.cos(toDeg(angle+90))),
               Math.round(cx*Math.sin(toDeg(angle))
                 + cy*Math.sin(toDeg(angle+90)))],

              [Math.round(cx*Math.cos(toDeg(angle-180))
                 + cy*Math.cos(toDeg(angle+90))),
               Math.round(cx*Math.sin(toDeg(angle-180))
                 + cy*Math.sin(toDeg(angle+90)))]
            ];

    var elx = ([c[0][0], c[1][0], c[2][0], c[3][0]]).sort(function(a,b){
                                                          return(a*1)-(b*1);});
    var ely = ([c[0][1], c[1][1], c[2][1], c[3][1]]).sort(function(a,b){
                                                          return(a*1)-(b*1);});

    var b = [-elx[0], elx[3], -ely[0], ely[3]]; // [Left, Right, Top, Bottom]

    if(grow){
        if(b[0]-cx>0) el.style.marginLeft = (m[0] + b[0]-cx) + "px";
        if(b[1]-cx>0) el.style.marginRight = (m[1] + b[1]-cx) + "px";
    /*}
    if(growY){ */
        if(b[2]-cy>0) el.style.marginTop = (m[2] + b[2]-cy) + "px";
        if(b[3]-cy>0) el.style.marginBottom = (m[3] + b[3]-cy) + "px";
    }
    if(shrink){
        if(b[0]-cx<0) el.style.marginLeft = (m[0] + b[0]-cx) + "px";
        if(b[1]-cx<0) el.style.marginRight = (m[1] + b[1]-cx) + "px";
    /*}
    if(shrinkY){ */
        if(b[2]-cy<0) el.style.marginTop = (m[2] + b[2]-cy) + "px";
        if(b[3]-cy<0) el.style.marginBottom = (m[3] + b[3]-cy) + "px";
    }

} 
```

您可能希望根据实时站点中发生的情况将 (`grow`和`shrink`) 拆分为 ( `growX`,`growY`和`shrinkX`, `shrinkY`)，这样就不会破坏布局。为此，只需调整/添加顶部的参数和默认值，以及底部的`if(grow)`/语句。`if(shrink)`

# eclipse - Eclipse：在项目资源管理器中找不到项目

> ID：13181851
> 
> 赞同：3
> 
> 时间：2012-11-01T16:54:41.497
> 
> 标签：eclipse

我正在使用 Eclipse Juno SR1 Java EE，并将 SVN 中的代码作为 Eclipse 项目签出。我可以单击项目中的文件以验证一切正常。下次我重新启动时，我在 Project Explorer 窗口中看不到该项目。

我检查了几件事：菜单项 Project > Open Project 是灰色的，表示没有关闭的项目。该项目的文件树存在于我的工作区中。Eclipse 不允许我创建具有相同名称的新项目，因为已经存在一个。

这是我第一次使用 Juno，是否有一些新的控件可以隐藏项目？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-28T03:14:52.500

“文件 -> 导入 -> 常规 -> 现有项目到工作区”

“文件 -> 导入 -> Android -> 现有的 Android 代码进入工作区”并没有做你想要完成的事情（去过那里......）。

假设以上几行的意思是他们所说的，第一行告诉 Eclipse 识别您作为官方项目导入的内容。第二个告诉 Eclipse 您只导入代码，而不是项目本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T17:09:26.873

尝试从命令行中的 clean 选项开始，也许应该修复它

日食-清洁

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-07T11:24:57.103

尝试文件-> 切换工作区-> 其他

并告诉 eclipse 你的工作区在哪里

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-25T14:51:39.153

有时只是因为 .project 文件丢失。如果您有任何其他项目，请复制其 .project 文件并粘贴到您尝试导入的项目的主文件夹中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-07T13:38:03.897

我在使用 RAD 时遇到了同样的问题。我所做的是：只导入那些在我的门户服务器本地部署的项目。做了一个干净的构建。启动了服务器。

它对我有用。能够访问我的应用程序。其余项目未部署为我的本地门户服务器的一部分，稍后我将根据需要导入它们。

# asp.net - 在 ASP.NET RegularExpressionValidator 中导致行为不一致的换行符

> ID：13181857
> 
> 赞同：0
> 
> 时间：2012-11-01T16:55:25.990
> 
> 标签：asp.net, regex, validation

我正在使用 a`RegularExpressionValidator`来限制在 a 中输入的文本数量`TextArea`。表达式是`"^[\s\S]{0,750}$"`。这几乎完美无缺，但我注意到一些奇怪的行为。

如果我输入 749 个字符和一个换行符（或 748 个字符和两个换行符等），我会在浏览器之间看到一些看似不正确且不一致的行为。我猜这与换行符被不一致地视为 1 个字符或 2 个（CR & LF）有关。

IE 8 - 客户端验证失败，因为这（正确）被视为 751 个字符并且无法提交页面。IE 9 和 Firefox - 客户端验证通过并发布值。但是，在回发时会显示验证错误消息。但是，该值仍然被接受，这是错误的，因为我最终得到了 751 个字符。

有谁知道是什么原因造成的，以及我如何将文本区域限制为 N 个字符？

编辑：更正的正则表达式

编辑：只是跟进这个。很难确定 RegularExpressionValidator 究竟是如何工作的，所以我只是将其切换到自定义验证器并手动进行正则表达式检查。这解决了这个问题。

# shell - rsync 在 shell for 循环中

> ID：13181858
> 
> 赞同：3
> 
> 时间：2012-11-01T16:55:27.880
> 
> 标签：shell, for-loop, sh, rsync

我有这个 shell 脚本

```
#!/bin/sh
PATHS=( a b c d )

for PATH in ${PATHS[@]}
do
  rsync -avziP /home/user/$PATH $SERVER:$server_folder -b --backup-dir=$backup_folder/backup_$date --delete --exclude=.* --log-file=$HOME/rsync.log
done 
```

我总是得到这个错误：

> rsync：找不到命令

让我抓狂的是，如果我删除 for 循环，只运行 rsync 命令，脚本就可以完美运行

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T16:58:59.230

`PATH`是一个保留变量！

它是指定在哪里搜索工具的变量（如`rsync`）

```
$ set | grep ^PATH=
PATH=/home/user/bin:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games 
```

使用另一个变量名！

# html - 在 H3 旁边显示精灵背景图像 DIV

> ID：13181859
> 
> 赞同：1
> 
> 时间：2012-11-01T16:55:29.670
> 
> 标签：html, css, css-sprites

我有以下 HTML：

```
<div style="display: inline-block; width: auto;">
    <h3>
        Search Criteria
    </h3>
    <div style="background-image: url(jQuery-UI/images/ui-icons_2e83ff_256x240.png);
        background-repeat: no-repeat; background-position: -16px -144px; width: 16px;
        height: 16px;">
    </div>
</div> 
```

我试图让`div`显示在`h3`. 但是，正在发生的事情是`div`直接显示在`h3`.

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T17:00:14.507

你需要`float`你的`H3`和`div`

看看这个 jsFiddle。我在 div 中添加了背景颜色，因为我没有图像

[http://jsfiddle.net/CPvXA/](http://jsfiddle.net/CPvXA/)

# facebook - facebook like 按钮未显示正确信息 - 尝试调试

> ID：13181863
> 
> 赞同：0
> 
> 时间：2012-11-01T16:55:43.093
> 
> 标签：facebook, button, facebook-like

我们在图库页面上使用 facebook like 按钮。当您单击“赞”按钮时，会提供父页面信息而不是“项目”信息 - 但是当链接在 Facebook 上单独共享时，它会提取正确的信息。

我尝试使用 Facebook 的调试工具，它提取了正确的信息。问题似乎出在页面上。我检查了元信息，看起来一切正常......

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T17:34:52.520

[https://developers.facebook.com/docs/reference/plugins/like/](https://developers.facebook.com/docs/reference/plugins/like/)

放入正确的子链接，再次生成点赞按钮 >**先测试一下，直接在点赞按钮生成器**中。

如果数据在调试器中正确显示，那么我很确定问题是您没有在“赞”按钮中使用正确/相同的链接。查看您对“赞”按钮的使用情况很重要。您可能遇到转义字符问题，因此仅使用基本链接。

# eclipse - 在eclipse下使用JDT

> ID：13181868
> 
> 赞同：0
> 
> 时间：2012-11-01T16:56:01.510
> 
> 标签：eclipse, eclipse-jdt, helios

我正在使用日食 helios。当我导入时`org.eclipse...`，它会触发一个错误。帮助 > 安装新软件 ... 说 JDT 已经安装！建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T17:00:58.860

您需要安装[插件开发环境](http://www.eclipse.org/pde/)(PDE)。

# c++ - Drawing multiple objects

> ID：13181869
> 
> 赞同：1
> 
> 时间：2012-11-01T16:56:13.793
> 
> 标签：c++, directx, directx-11

I have been learning DirectX for a while now & I got to the point of drawing multiple objects to the screen from .obj files. My problem is that if I draw 2 objects, the 2nd draw will be on top of the 1st.

Example:
Obj1 = Cardboard box
Obj2 = Cube

```
loadStuff_&_draw(Obj1);  
loadStuff_&_draw(Obj2); 
```

That would draw the cube outside/front the box even if it is in/behind.

**How would I make multiple objects draw together so that they overlap correctly?**

The only drawing things I know of are:

*   Load vertex, index, constant buffers
*   updateSubresource()
*   drawIndexed()

**Edit:**
Here is a picture of a cube in a box. It shows that the cube is behind the box rather than inside. It also shows that the rim of the box clips behind the box. Not sure what happened.

I drew the cube, then drew the hollow box.

![Render of a cube in a box](../Images/83d15e1c07daab8b443a04af7e1fe3ba.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T23:30:26.837

This is what the depth buffer (sometimes called the z-buffer) is for. When you write a pixel during the drawing of one object, it records the distance from the viewpoint for that pixel in the depth buffer. Then when you draw a second object that would also write to that pixel, it can compare the new object's depth value at that pixel with the buffered value (from previous objects) and only overwrites the pixel if the new value would be nearer than the old one. If the pixel gets drawn, then the depth value is updated to reflect the closer value.

Some links that might give you some ideas on how to implement this:

[http://msdn.microsoft.com/en-gb/library/windows/desktop/bb205074%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-gb/library/windows/desktop/bb205074%28v=vs.85%29.aspx)

[http://www.rastertek.com/dx11tut35.html](http://www.rastertek.com/dx11tut35.html)

[https://stackoverflow.com/a/8641210/28875](https://stackoverflow.com/a/8641210/28875)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-02T01:39:18.527

This depends on how do you set the world matrix of the object, If you want to second object behind the first object, then set the correct world matrix before drawing. suppose object 1 place at origin(0, 0, 0), then you can translate object2 to (0, 0, -10) to make it behind object1\. and translate to (0, 0, 10) will make it in front of object1.

# git - 如何查看 git 分支的配置？

> ID：13181871
> 
> 赞同：0
> 
> 时间：2012-11-01T16:56:13.567
> 
> 标签：git, configuration, branch

有没有办法可以检查给定本地分支正在跟踪的分支，以及它是否设置为自动变基？这两个是我想检查的主要配置选项。我尝试查看我的 .git/config，但那里没有关于我的本地分支的任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T17:05:00.563

you can see the output of

```
git remote show origin 
```

# android - 在设备旋转之前不会出现 Android 图像

> ID：13181872
> 
> 赞同：3
> 
> 时间：2012-11-01T16:56:17.243
> 
> 标签：android, html, css

我正在为移动网络设计，并且在移动网站中有一个图像/按钮（按百分比定位），它可以在 iPhone 上正确显示（纵向和横向）。但是，在大多数 Android 手机上试用时，图像不会显示，直到手机旋转到横向位置，然后才会以纵向显示在正确的位置。它不会在显示按钮的纵向模式下加载。

我试过定位，z-index，但这似乎不是造成它的原因。非常感谢任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T07:48:37.857

我不确定我是否可以发表评论，所以我会在这里发布，如果他们愿意，mod 可以移动它。

许多浏览器对 css 的解释不同。我会确保您没有采用“隐藏”形式的溢出：隐藏或溢出：惰性。这是我能想到的唯一会导致它在屏幕变宽之前不可见的事情。

# mysql - 简单记录的Mysql优化 - 什么是最好的？

> ID：13181875
> 
> 赞同：0
> 
> 时间：2012-11-01T16:56:27.627
> 
> 标签：mysql, database-design

我正在开发一个最终将拥有数百万用户的系统。系统的每个用户都可以访问系统中的不同“标签”。我正在使用一个名为 usertabs 的表来跟踪它。有两种方法可以处理这个问题。

方式 1：每个用户的单行包含 userid 和 tab1-tab10 作为 int 列。

该系统的优点是通过用户 ID 获取单行的查询非常快，而缺点是“空”列占用空间。另一个缺点是，当我需要添加一个新选项卡时，我必须重新组织整个表，如果有数百万条记录，这可能会很乏味。但这不会经常发生。

方式2：单行包含userid和tabid，仅此而已。每个用户最多可以有 10 行。

该系统的优点是易于分片或其他优化存储的机制，并且不会浪费空间。行仅在必要时存在。缺点是每次访问记录时必须读取多达 10 行。如果这些行是分散的，它们的访问速度可能会更慢或更快，这取决于它们的存储方式？

我的程序员方面倾向于方式 1，而我的大数据方面则倾向于方式 2。

你会选择哪个？为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T17:07:34.990

过早的优化，以及所有这些......

选项 1 可能看起来“更简单”，但您已经确定了主要的缺点 - 可扩展性是一个巨大的痛苦。

我也真的怀疑它是否会比选项 2 更快 - 数据库几乎是专门为查找相关数据位而设计的，查找 10 条记录而不是 1 条记录几乎肯定不会产生您可以衡量的差异。

“分散”的记录并不重要，数据库使用索引能够非常快速地检索数据，而不管它们的物理位置如何。

当然，这确实取决于使用外键的索引，正如@Barmar 评论的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T01:04:19.737

> 如果这些行是分散的，它们的访问速度可能会更慢或更快，这取决于它们的存储方式？

[如果您正确使用聚类](http://use-the-index-luke.com/sql/clustering/index-organized-clustered-index)，它们不必分散。

[InnoDB 表始终是集群](http://www.ovaistariq.net/521/understanding-innodb-clustered-indexes/)的，如果您的子表的 PK ¹看起来类似于：`{user_id, tab_id}`²，这将自动将属于同一用户的选项卡存储在一起，从而在查询“给定用户的选项卡”期间最小化 I/O。

OTOH，如果您的孩子 PK 是：`{tab_id, user_id}`，这将存储连接到同一选项卡的用户物理上靠近在一起，从而非常快速地进行诸如“给我连接到给定选项卡的所有用户”之类的查询。

不幸的是 MySQL 不支持领先的索引压缩（a-la Oracle），因此您仍然需要为在子表中重复所有这些`user_id`s（或`tab_id`第二种情况下的 s）支付存储（和缓存）价格，但是尽管如此，为了灵活性和（可能）易于查询，我仍然会选择解决方案 (2)。

* * *

*¹ InnoDB 自动用作集群键。*

*²即用户的PK在子表的PK的前沿。*

# vba - IE自动化VBA，立即使用sendkeys发送密钥延迟

> ID：13181877
> 
> 赞同：0
> 
> 时间：2012-11-01T16:56:33.560
> 
> 标签：vba, excel, sendkeys, webautomation

我已经编写了一个代码来在网页导航时拍摄屏幕截图并将其粘贴到 Word 文档中使用 VBA，我成功地做到了，但我得到的是上次而不是现在的屏幕截图。

例如，每当我按下 printscreen 时，它都会粘贴上次拍摄的屏幕截图，而不是现在的截图。我试着做延迟，把论点说成是真的，假的，没有任何效果。

这是我在 Class1 模块中尝试过的：

```
Option Explicit
Dim WithEvents ie As InternetExplorer
Dim wordapp As Object
Dim wrdDoc As Object
Dim t As Date
Sub Example()
Set wordapp = CreateObject("word.Application")

wordapp.Visible = True
Set wrdDoc = wordapp.Documents.Add
Set ie = New InternetExplorer
ie.navigate "http://www.csee.wvu.edu/~riggs/html/select_example.html"
Do Until ie.readyState = READYSTATE_COMPLETE: DoEvents: Loop
test
End Sub
Private Function href_onclick() As Boolean

Application.SendKeys "{44}"
wordapp.Selection.Paste
End Function 
```

在一个模块中

```
Sub initialise()
Set ev = New Class1
ev.Example

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T17:03:33.123

尝试 Application.SendKeys "{44}", True

第二个参数告诉代码的执行等待动作完成

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T14:09:02.280

经过所有的努力，我想出了这个解决方案，我只是让粘贴选项等待 3 秒，直到图片被加载到剪贴板......:) 带有 true 选项的 sendkeys 根本不起作用。

# iphone - setCollectionViewLayout 上的 EXC_BAD_ACCESS

> ID：13181879
> 
> 赞同：5
> 
> 时间：2012-11-01T16:56:34.400
> 
> 标签：iphone, ios, exc-bad-access, uicollectionview

如果我在方向更改期间更改[UICollectionView](http://developer.apple.com/library/ios/#Documentation/UIKit/Reference/UICollectionView_class/Reference/Reference.html#//apple_ref/occ/cl/UICollectionView)`EXC_BAD_ACCESS`的布局，我会在几次旋转后得到。

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {
    UICollectionViewLayout *layout = [[UICollectionViewFlowLayout alloc] init];
    self.myCollectionView.collectionViewLayout = layout; // This causes EXC_BAD_ACCESS after a few rotations
} 
```

这是一个`UICollectionView`错误吗？还是我做错了什么？如果这是一个错误，有没有办法在方向改变期间改变整个布局？

[我注意到这个答案](https://stackoverflow.com/a/12631040/143378)中提到了同样的问题。使用 NSZombies 进行调试不会产生额外的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T17:16:19.167

不太确定它有什么事情要做，但[iOS 6 的发行说明](https://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_0/_index.html)说：

> 、`willRotateToInterfaceOrientation:duration:`、 `willAnimateRotationToInterfaceOrientation:duration:`和 `didRotateFromInterfaceOrientation:`方法不再在任何对其自身进行全屏演示的视图控制器上调用——例如，`presentViewController:animated:completion:`
> 
> 您应该确保您的应用程序没有使用这些方法来管理任何子视图的布局。相反，他们应该使用视图控制器的`viewWillLayoutSubviews`方法并使用视图的边界矩形调整布局。

由于您正在使用`UICollectionView` *它*，因此您正在使用此方法来更改其布局。

# php - 使用 PHP、redirect_uri 和应用程序 url 的 Shopify API 必须具有匹配的 myshopify.com 主机？

> ID：13181880
> 
> 赞同：2
> 
> 时间：2012-11-01T16:56:34.813
> 
> 标签：php, shopify

我正在尝试使用由 cmcdonaldca 在[https://github.com/cmcdonaldca/ohShopify.php](https://github.com/cmcdonaldca/ohShopify.php)创建的 php shopify api 库和

我收到此错误：

redirect_uri 和应用程序 url 必须有匹配的主机

这发生在我输入 [myshopname].myshopify.com 的商店名称后，错误出现在带有以下 URL 的页面上：https://[myshopname].myshopify.com/admin/oauth/authorize?client_id=[myclientid ]&scope=客户&redirect_uri=http%3A%2F%2Flocalhost%2Ftest%2FshopifyAPITest2.php

我在本地进行此开发，所以我的主机是本地主机，这真的是问题吗？第一次尝试输入商店名称时，我进入了shopify页面，要求我登录，但是当我稍后再次尝试时，它给了我错误。是否有一些最初设置的会话变量导致错误？根据错误，它看起来不像，但这就是行为所暗示的。

请帮助我了解如何解决此问题。如果这确实意味着 api 脚本需要托管在 myshopify.com（[myshopname].myshopify.com 的主机），我将如何将 php 脚本放在那里？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T17:59:31.097

您收到的错误是告诉您，您在合作伙伴仪表板中为应用程序输入的应用程序 URL 的域与您通过 OAuth 请求提供的域不同。

确保它被列为 localhost 并且错误应该消失。

![应用偏好截图](../Images/d10f1761cb08e6634598a991cc658946.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T16:25:22.473

另外，请确保您在 config/application.rb 中正确设置了 API 密钥和共享密钥

# mysql - 如何使用 SQL 返回一组子字符串

> ID：13181882
> 
> 赞同：1
> 
> 时间：2012-11-01T16:56:39.607
> 
> 标签：mysql, sql, loops, recursion

使用 MySQL，有`x = 'aa.bb.cc'`，我怎样才能获得列表`'aa.bb.cc', 'aa.bb', 'aa'`？

与`x = '39.01'`，列表是`'39.01', '39'`。

与`x = '39.02.01.01'`，列表是`'39.02.01.01', '39.02.01', '39.02', '39'`。

从上面的最后一个例子中`x = '39.02.01.01'`，我希望能够构建类似的东西：

```
SELECT ... FROM ... WHERE foo IN bar 
```

其中`bar`是动态获得的`('39.02.01.01', '39.02.01', '39.02', '39')`。

任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T17:02:37.333

我希望`INSTR`或`LOCATE`功能可能对您有用：

```
 SELECT * from TABLE table1 WHERE INSTR(bar, foo) = 1; 
```

或者

```
 SELECT * from TABLE table1 WHERE LOCATE(foo, bar) =1 ; 
```

这里`bar`可以是`39.02.01.01`并且`foo`可以是子字符串，例如`'39.02.01.01', '39.02.01', '39.02', '39'`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T17:22:50.710

你看过使用 SUBSTRING_INDEX 吗？

像这样的东西：

```
SELECT SUBSTRING_INDEX(field1,".",4) as One, SUBSTRING_INDEX(field1,".",3) as Two,
 SUBSTRING_INDEX(field1,".",2) as Three, SUBSTRING_INDEX(field1,".",1) as Four FROM Test 
```

如果您的值不都包含相同数量的“分隔符”，那么结果可能不是您想要的，我至少需要再喝几杯咖啡来考虑解决类似问题的方法:-)

# c# - 使用 C# 搜索字符串

> ID：13181884
> 
> 赞同：-5
> 
> 时间：2012-11-01T16:56:44.020
> 
> 标签：c#, regex, string

我有以下字符串`"</script><div id='PO_1WTXxKUTU98xDU1'><!--DO NOT REMOVE-CONTENTS PLACED HERE--></div>"`

我需要从 div 标签中获取属性值。我如何使用 C# 检索它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:59:36.040

**避免**使用解析html`regex`

`Regex`不是解析`HTML`文件的好选择..

HTML 并不严格，其格式也不规则。

使用[htmlagilityPack](http://htmlagilitypack.codeplex.com/)

您可以使用 htmlagilityPack 来执行此操作。

```
HtmlDocument doc = new HtmlDocument();
doc.Load(yourStream);
List<string> itemList = doc.DocumentNode.SelectNodes("//div[@id]")//selects all div having id attribute
.Select(x=>x.Attributes["id"].Value)//select the id attribute value
.ToList<string>();
//itemList will now contain all div's id attribute value 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T17:14:00.087

严格解决所提出的问题，解决它的无数方法之一是隔离`div`元素，将其解析为 an`XElement`然后以这种方式提取属性的值。

```
 string bobo = "</script><div id='PO_1WTXxKUTU98xDU1'><!--DO NOT REMOVE-CONTENTS PLACED HERE--></div>";
        string justDiv = bobo.Substring(bobo.IndexOf("<div"));
        XElement xelem = XElement.Parse(justDiv);
        var id = xelem.Attribute("id");
        var value = id.Value; 
```

当然有很多方法可以解决这个问题，但是这个回答了邮件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T14:58:47.587

如果您是受虐狂，您可以使用这种老式的 VB3 风格：

```
 string input = @"</script><div id='PO_1WTXxKUTU98xDU1'><!--DO NOT REMOVE-CONTENTS PLACED HERE--></div>";
        string startString = "div id='";

        int startIndex = input.IndexOf(startString);

        if (startIndex != -1)
        {
            startIndex += startString.Length;
            int endIndex = input.IndexOf("'", startIndex);
            string subString = input.Substring(startIndex, endIndex - startIndex);
        } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-01T17:02:42.930

一个看起来像这样的 .NET Regex 就可以解决问题

```
^</script><div id='(?<attrValue>[^']+)'.*$ 
```

然后，您可以将值保留为

```
MatchCollection matches = Regex.Matches(input, @"^</script><div id='(?<attrValue>[^']+)'.*$");
if (matches.Count > 0)
{
    var attrValue = matches[0].Groups["attrValue"];
} 
```

# javascript - 将类放在另一个类中

> ID：13181885
> 
> 赞同：0
> 
> 时间：2012-11-01T16:56:45.750
> 
> 标签：javascript, jquery

在我的程序中，我有一个名为“正确答案的课程，我想在 td 课程中使用它，但我遇到了真正的麻烦。

这是我将“正确的单词”类添加到“spellWord”的地方。但是如何将它添加到“td”类中。

```
var spellWord = $('.highlight-problem .drop-box');
            if (!spellWord.filter(':not(.occupied)').length) {
                var wordIsCorrect = 0;
                spellWord.each(function () {
                    if ($(this).parents('td').data("letter") == $(this).find("div").data("letter")) {
                        console.log('letter is: ' + $(this).find("div").data("letter"))
                        wordIsCorrect++;
                    }
                });
                console.log(spellWord.length + ' , ' + wordIsCorrect);
                if (spellWord.length == wordIsCorrect) {
                    spellWord.addClass('right-word');
                    $(right).css('visibility', 'visible');
                    $(wrong).css('visibility', 'hidden');
                    score.right++;
                    $('.score').html(score.right + "/2").show();
                    setTimeout(function() {
                        successSound.play();
                    }, 200); 
```

我已经尝试过类似的东西。

```
spellWord.addClass('td').addClass('right-word'); 
```

和

```
$('.td').addClass('right-word'); 
```

但似乎无法让它工作。小提琴：http: [//jsfiddle.net/smilburn/Dxxmh/93/](http://jsfiddle.net/smilburn/Dxxmh/93/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:59:48.600

如果 spellWord 元素在 td 内，请使用[`parent()`](http://api.jquery.com/parent/)：

```
spellWord.parent().addClass('right-word'); 
```

请注意，`parent()`这只会给您直接祖先，`parents()`如果您需要更高，请使用。

[`closest()`](http://api.jquery.com/closest/), [`siblings()`](http://api.jquery.com/siblings/), 或[`find()`](http://api.jquery.com/find/)也可能有帮助，具体取决于 td 与 spellWord 元素的关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T17:00:36.570

尝试`.closest()`

```
spellWord.closest('td').addClass('right-word'); 
```

`td`是 的父级`spellWord.`。所以你需要去它的 td 祖先，然后添加类

# cakephp - Cakephp 2 个额外的“线程”查询连接

> ID：13181888
> 
> 赞同：1
> 
> 时间：2012-11-01T16:57:02.707
> 
> 标签：cakephp, join, tree, cakephp-2.0

我正在使用树行为，当我通过**->find('threaded', ...)**查询时- 正如预期的那样 - 我得到了树。

但我希望发生额外的连接，所以像：

```
$data = $this->Category->find('threaded', array(
    'joins' => array(
        array('table' => 'videos',
            'alias' => 'Video',
            'type' => 'LEFT',
            'conditions' => array(
                'Category.id = Video.category_id',
            )
        )
    )
)); 
```

**Category** hasMany **Video**，但**Video**不是树，只是相关的。

我可以为此使用线程查询吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T23:44:53.170

为了产生“线程化”输出 Cake 1) 调用 find('all)，然后 2) 将结果数组放入 Set::nest() 函数。

因此，只需使用标准查找 + 您的自定义连接获取您的输出，然后只需使用[`Set::nest`](http://book.cakephp.org/2.0/en/core-utility-libraries/set.html#Set%3a%3anest)

（注意：在 Cake 2 中`Hash`已替换`Set`，但 Cake 仍在`Set`内部使用。现在两者都可以使用。[`Hash::nest`](http://book.cakephp.org/2.0/en/core-utility-libraries/hash.html#Hash%3a%3anest)）

所以如果你看一下 Cake 的`model.php`，嵌套函数是这样调用的：

```
return Set::nest($results, array(
            'idPath' => '/' . $this->alias . '/' . $this->primaryKey,
            'parentPath' => '/' . $this->alias . '/' . $parent
        )); 
```

将其用作通话的模板。对于您的数据，它看起来像：

```
return Set::nest($results, array(
            'idPath' => '/Category/id',
            'parentPath' => '/Category/parent_id'           )); 
```

# java - 使用 Java 处理 Excel 特殊字符

> ID：13181891
> 
> 赞同：1
> 
> 时间：2012-11-01T16:57:07.933
> 
> 标签：java, encoding, utf-8, special-characters

我有一个表格，允许用户输入很长的法律文本。用户很可能会从 Excel 和/或 PDF 文件中复制和粘贴。我遇到了特殊字符的问题，我已经把

```
<%@ page contentType="text/html; charset=UTF-8" pageEncoding="ISO-8859-1" %> 
```

在我的 jsp 页面的顶部。但是，我在文本中看到了特殊字符。

例如，在 Excel 文件中有如下描述：

“...承租人将在每月 _ 之前向出租人支付*_****所有***租金”

 *“...”被翻译成┬à（一个从左到右的波浪号）。正如在 Excel 中看到的那样，如何用“...”替换这些特殊字符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T17:27:11.957

发生这种情况是因为省略号`"..."`被复制为单个 Unicode 字符（u+2026 或“...”）。您应该将 pageEncoding 设置为 UTF-8，因为这就是您要发送的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T17:24:56.420

我遇到过类似的问题，人们将 Microsoft“智能引号”复制/粘贴到表单中，并想知道为什么它们以后不能正确呈现或存储。我使用了相当小而直接的 jasciidamnit 库来从任何输入中清除这些字符。 [给图书馆一个机会，看看它是否能解决你的问题](http://sourceforge.net/projects/jasciidammit/)*

# android - 如何设置我的 android 2.3 按钮的样式？

> ID：13181894
> 
> 赞同：-3
> 
> 时间：2012-11-01T16:57:09.853
> 
> 标签：android

是否有在线工具或其他工具来简单地设置我的 android 2.3 按钮的样式？

我不喜欢它们的布局并想改变它，但我不知道没有工具怎么办。

我试图在任何地方使用 holoever 但这不是我想要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T17:06:53.773

here is great example of what you can do...

[http://android.onyou.ch/2011/01/25/simple-custom-button-using-a-selector-xml-layout/](http://android.onyou.ch/2011/01/25/simple-custom-button-using-a-selector-xml-layout/)

I don t understand why you should need a tool...

# asp.net-mvc - 此网页在 Global.asax 中有一个重定向循环

> ID：13181900
> 
> 赞同：0
> 
> 时间：2012-11-01T16:57:23.723
> 
> 标签：asp.net-mvc

只要 Session 变量为空或为空，目标就是在每个 httpRequest 上将所有用户重定向到我的自定义安全页面。

在 Global.asax

该方法导致错误如下：

此网页存在重定向循环 该网页导致的重定向过多。清除此站点的 cookie 或允许第三方 cookie 可能会解决问题。如果不是，则可能是服务器配置问题，而不是您的计算机问题。

```
protected void Application_PostAuthorizeRequest()
{
  if ((Session["SecurityCodeApproved"] == null || !(bool)Session["SecurityCodeApproved"]))
  {
    Response.RedirectToRoute("Security");
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:59:31.200

看起来您正在重定向到同一页面，检查是否设置了会话 cookie，如果没有，则再次重定向。它会不断地自我重定向，直到设置了会话 cookie，而您没有设置一个。您需要重定向到其他地方或设置 cookie 以打破循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T19:08:35.973

不要在您的 Global.asax 中执行此操作，因为您已经注意到，每次触发该事件时您不会总是有一个会话。**此外，您的代码将在所有**请求上触发，包括对 css、图像和 JavaScript 等资源的请求。您想要做的是使用**全局过滤器属性**来执行您的逻辑，或者如果您使用的是 WebForms，您希望在页面级别执行此操作。

当过滤器被执行时，你会得到一个 FilterContext，它将包含你需要的请求和会话对象。

然后您可以重定向到您的安全页面，但请确保您的过滤器属性在您的安全点上被忽略。

# c# - 调用 GoBack() 时 NavigationService 导航到不存在的对象

> ID：13181901
> 
> 赞同：2
> 
> 时间：2012-11-01T16:57:30.680
> 
> 标签：c#, wpf, ninject, composite-primary-key, navigationservice

我正在开发一个带有 MainPage 的 WPF Web 应用程序，该应用程序使用 ninject 加载页面。

基本上，如果有一种方法可以告诉 NavigationService 由于用户更新了复合键中的值而导致 Id 发生了变化，我会感到很困惑。

我会尽力解释更多。我的 MultiTagPage 有一个 MultiTagViewModel，它显示了一个由 (MultiTagDef, Key, Value) 组成的多标签值。还有一个具有相同键和 MultiTagDef 的其他值的 DataGrid。如果您双击其中一个值，则会显示相应的多标签值。

在数据库中，多标签值与复合键（Multitagdef.Name、key、value）一起存储。因此，如果有人更新多标签值，则 ID 会更改（例如从 (A, B, C) 更改为 (A, B, D)）并保存，然后如果用户继续使用数据网格中的另一个多标签值 (A, B, E)并且可能会删除该对象，然后导航服务尝试加载（A，B，C）而不是（A，B，D）。

该体系结构是为具有 ID 列的对象设计的，该列当然永远不会改变。不幸的是，在这种情况下添加 ID 列不是一个选项。那么有人对如何解决这个问题提出建议吗？每次有人保存时我是否应该尝试重新加载页面，或者我可以告诉 NavigationService 当前对象现在已更改 ID？

现在，代码：

从主页：

```
public partial class MainPage : IUIService
{
    public static readonly DependencyProperty MainModelProperty = PropertyHelper.Register<MainPage>(x => x.MainModel);

    public MainModel MainModel
    {
        get { return (MainModel)GetValue(MainModelProperty); }
        set { SetValue(MainModelProperty, value); }
    }

    private static readonly ILog log = LogManager.GetLogger(typeof(MainPage));

    public MainPage()
    {
        // Make doubly sure...
        ShowsNavigationUI = false;

        InitializeComponent();

        App.Kernel.Rebind<IUIService>().ToConstant(this);

        MainModel = App.Kernel.Get<MainModel>();
        WindowTitle = MainModel.Title;

        ContentFrame.Navigating += Navigating;
        ContentFrame.Navigated += Navigated;
        ContentFrame.NavigationFailed += NavigationFailed;
    }

    private void Navigating(object sender, NavigatingCancelEventArgs args)
    {
        object dataContext = null;
        if(ContentFrame.Content is FrameworkElement) {
            dataContext = ((FrameworkElement)ContentFrame.Content).DataContext;
        } else if(ContentFrame.Content is FrameworkContentElement) {
            dataContext = ((FrameworkContentElement)ContentFrame.Content).DataContext;
        }

        if(dataContext is ISaveable && ((ISaveable)dataContext).NeedsSave) {
            if(MessageControl.UnsavedSync() != MessageControl.Button.Yes) {
                args.Cancel = true;
            }
        }
    }

    private void Navigated(object sender, NavigationEventArgs e)
    {
        var mi = e.ExtraData as MenuItemModel;

        if(mi == null) {
            var page = e.Content as IMenuItemPage;

            if(page != null) {
                mi = page.MenuItem;
            }

            if(mi == null) {
                log.DebugFormat("Navigated to {0} ({1}) without menu item", e.Content, e.Uri);
                return;
            }
        }

        MainModel.CurrentMenuItem = mi;

        if(mi.Type != MenuItemType.Folder) {
            Settings.Default.AddRecentMenuItem(new RecentMenuItem(mi.MenuItem));
        }
    }

    #region Generic Edit command

    private void EditCanExecute(object sender, CanExecuteRoutedEventArgs e)
    {
        e.Handled = true;
        e.CanExecute = false;

        var param = Unwrap(e.Parameter);
        var paramType = GetEditType(param);
        if(paramType == null || !editPages.ContainsKey(paramType)) {
            return;
        }

        e.CanExecute = ToConstructorArgument(param) != null;
    }

    private void EditExecuted(object sender, ExecutedRoutedEventArgs e)
    {
        Edit(e.Parameter);
    }

    private void Edit(object param)
    {
        var paramType = GetEditType(param);
        if(paramType == null || !editPages.ContainsKey(paramType)) {
            log.WarnFormat("Page for param {0} (type {1}) not found", param, paramType);
            return;
        }

        if(param is IList) {
            var list = (IList)param;
            if(list.Count > 1000) {
                Show("Too many items selected", "Please select no more than 1000 items at a time", messageTheme: MessageTheme.Warning);
                return;
            }
        }

        var arg = ToConstructorArgument(param);
        if(arg == null) {
            log.Warn("Unexpected parameter " + param + " supplied to EditExecuted");
            return;
        }

        var pageType = editPages[paramType];

        try {
            log.DebugFormat("Got a parameter of type {0}, navigating to edit page {1}", param.GetType(), pageType);

            Navigate(MakePage(pageType, arg));
        } catch(Exception ex) {
            log.Error("Unable to load edit page for parameter " + param, ex);
        }
    }

    private static Page MakePage(Type pageType, params IParameter[] p)
    {
        var page = (Page)App.Kernel.Get(pageType, p);
        var dp = ClientUtil.GetViewModelProperty(page.GetType());
        if(dp != null) {
            page.Loaded += (o, args) => {
                var skrap = App.Kernel.Get(dp.PropertyType, p);
                page.SetValue(dp, App.Kernel.Get(dp.PropertyType, p));
            };
            page.Unloaded += (o, args) => {
                try {
                    page.ClearValue(dp);
                } catch(Exception e) {
                    // Often happens when datagrid is in edit mode when navigating away from page:
                    // http://connect.microsoft.com/VisualStudio/feedback/details/571967/wpf-datagrid-causes-crash-with-sorting-is-not-allowed-during-an-addnew-or-edititem-transaction
                    log.Warn("Error while unloading page", e);
                }
            };

            ViewModelBehavior.SetUpdateUIError(page, true);
        }

        return page;
    }

    #endregion

    #region Navigate command

    private void NavigateCanExecute(object sender, CanExecuteRoutedEventArgs e)
    {
        e.CanExecute = e.Parameter is Type;
        e.Handled = true;
    }

    private void NavigateExecuted(object sender, ExecutedRoutedEventArgs e)
    {
        var type = e.Parameter as Type;
        if(type == null) {
            return;
        }

        Navigate(MakePage(type));
        e.Handled = true;
    }

    #endregion

    #region IUIService implementation 

    public void Navigate(Type type, params Tuple<string, object>[] parameters)
    {
        Navigate(MakePage(type, parameters.Select(x => new ConstructorArgument(x.Item1, x.Item2)).ToArray()));
    }

    public void Navigate(Type type, MenuItemModel menuItem, params Tuple<string, object>[] parameters)
    {
        Navigate(MakePage(type, parameters.Select(x => new ConstructorArgument(x.Item1, x.Item2))
            .Prepend(new ConstructorArgument("menuItem", menuItem))
            .Prepend(new ConstructorArgument("props", menuItem.Params))
            .ToArray()), 
            menuItem);
    }

    public void Navigate(Page content, object extraData = null)
    {
        if(ContentFrame != null) {
            if(ContentFrame.Content is DependencyObject) {
                foreach(var dg in WpfUtil.FindDescendants<DataGrid>((DependencyObject)ContentFrame.Content)) {
                    while(!dg.CommitEdit()) { /* Keep committing */ }
                }
            }

            ContentFrame.Navigate(content, extraData);
        }
    }

    public bool NavigateBack()
    {
        if(ContentFrame != null && ContentFrame.CanGoBack) {
            ContentFrame.GoBack();
            return true;
        } 

        if(NavigationService != null && NavigationService.CanGoBack) {
            NavigationService.GoBack();
            return true;
        }

        return false;
    }

} 
```

如果您需要更多信息，请告诉我。

# ruby-on-rails - 附加到 has_many 关系时防止对现有 Rails 模型进行 sql 更新

> ID：13181902
> 
> 赞同：1
> 
> 时间：2012-11-01T16:57:30.507
> 
> 标签：ruby-on-rails, ruby, activerecord

根据目前的 Rails 文档，关于**现有对象**`<<`的 has_many 关系上的运算符：

 **```
collection<<(object, …)

Adds one or more objects to the collection by setting their foreign keys
to the collection’s primary key. 
```

***（这是有趣的一点）***

```
Note that this operation instantly fires update sql without waiting for 
the save or update call on the parent object. 
```

我没有意识到会发生这种情况，我很惊讶；我本可以发誓过去并非如此，尽管我承认我可能是错的。

在任何一种情况下，我都无法找到任何关于此的其他文档，但是我想知道是否有办法阻止此更新？

我的情况很简单，我只有一个存在于数据库中的对象，正在为“编辑”页面做准备。我在页面呈现之前附加一个或多个相关对象。C'est吹捧。

**更新**：如果您使用运算符直接从数组设置 has_many 关系，显然也会发生相同的更新场景`=`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T17:04:18.777

使用集合的`build`方法。这不会像其他人那样立即触发 SQL 语句。

```
foo.bars.build(attributes)
foo.save 
```

在这里可以找到很多好的信息：http: [//api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)

注意：此方法假定您可以灵活地通过 build 方法创建对象，而不是使用`Bar.new`.**

# c - 将魔术字节写入堆栈以监视其使用情况

> ID：13181910
> 
> 赞同：1
> 
> 时间：2012-11-01T16:57:45.480
> 
> 标签：c, memory-management, stack

我在嵌入式设备上遇到了一个问题，我认为这可能与堆栈溢出有关。

为了测试这一点，我计划用魔法字节填充堆栈，然后通过检查有多少魔法字节完好无损，定期检查堆栈是否溢出。

但我无法让标记堆栈工作的例程。该应用程序不断崩溃。这就是我在程序入口处所做的。

```
 //fill most of stack with magic bytes
    int stackvar = 0;
    int stackAddr = (int)&stackvar;
    int stackAddrEnd = stackAddr - 25000;
    BYTE* stackEnd = (BYTE*) stackAddrEnd;

    for(int i = 0; i < 25000; ++i)
    {
        *(stackEnd + i) = 0xFA;
    } 
```

请注意，分配的堆栈大于 25k。所以我指望此时已经使用了一些堆栈空间。另请注意，堆栈从较高地址向较低地址增长，这就是我尝试从底部向上填充的原因。

但正如我所说，这将崩溃。我一定在这里遗漏了一些东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T17:02:45.067

据我所知，您可能很容易`stackEnd`在循环的最后几次迭代中覆盖变量的内容。这显然是一件坏事，因为您在同一个循环中使用它。在你的循环中停止，比如说`24900`，有帮助吗？

我建议根据您平台上整数的大小在一个计算良好的值处停止循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T17:12:33.257

正如其他人已经指出的那样，您覆盖`stackEnd`. 根据您的字节顺序，最终会得到一个指向 0xXXXXFAFA 的指针，该指针已经比 25000 大（64250）或指向其他地方的 0xFAFAXXXX 的指针。

由于这是一个嵌入式设备，因此是与 i386 完全不同的架构，因此堆栈很有可能向上而不是向下增长。

# ajax - 执行jQuery post时屏蔽整个页面？

> ID：13181912
> 
> 赞同：3
> 
> 时间：2012-11-01T16:57:49.370
> 
> 标签：ajax, jquery

在 jQuery 中，当我们执行每个 Ajax 帖子时，有没有办法自动屏蔽整个页面（以防止用户输入或重复提交......）？我看到了这个插件：jQuery-blockUI ( [http://www.malsup.com/jquery/block/](http://www.malsup.com/jquery/block/) ) 但我们仍然必须为每个 Ajax 帖子手动屏蔽/取消屏蔽。
正如我在 ExtJS 中所知道的，我们可以通过实现“beforeAction”函数来控制它，因为这个事件将在表单上的任何操作之前被触发，但在 jQuery 中我没有找到类似的东西。
你能给我一个解决方案吗？非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T17:03:27.570

自己做这件事不会太难。

**HTML**

```
<body>
     <div id="mask"></div>
     <!-- Everything else -->
</body> 
```

**CSS**

```
#mask{
position:fixed;
width:100%;
height:100%;
background: /* You can make this slightly transparent black rgba(0,0,0,.3); or transparent */;
top:0;
left:0;
display:none;
} 
```

**JAVASCRIPT**

```
var isPageMasked = false,
    mask = $('#mask');

var maskPage = function(){

    if(isPageMasked){
        mask.hide();
    } else {
        mask.show();
    }

    isPageMasked = !isPageMasked;

}; 
```

然后，当您想要屏蔽和取消屏蔽页面时，您只需调用 maskPage() 即可。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T17:10:43.287

您可以只使用 beforeSend 和 complete 功能

```
$.ajax({
  beforeSend: function() {
           //Mask page
    },
  complete: function(){
              //remove Mask
}
  }
}); 
```

# c++ - C ++迭代结构

> ID：13181913
> 
> 赞同：3
> 
> 时间：2012-11-01T16:57:50.893
> 
> 标签：c++, struct, iteration

是否可以遍历结构？

例如

```
struct team{
   int player1;
   int player2;
   int player3;
   int player4;
   ...
   int player99; 
   int size = 99;
} 
```

然后运行一个 for 循环来设置或访问 foo 1-4？

我猜伪代码看起来像

```
for(int i = 0; i < size; i++){
    player i = (i+1); 
 } 
```

如果这没有意义，一个更简化的解释是我只想能够通过每个变量而不必硬编码 player1 = 1; 玩家2 = 2。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T17:00:56.983

一种方法是将播放器/元素放入数组中：

```
struct Team {
    static int const size = 99;
    int players[size];
}; 
```

接着：

```
for(int i = 0; i < size; ++i)
    int player = players[i]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T17:04:15.500

要按照您的要求回答您的问题，我相信您可以使用预编译器宏包（确切的短语取决于您的编译器）来保证用于创建结构实例的内存结构。然后从技术上讲，您可以增加一个指针以在其中移动……如果您生气的话。那将是一种非常糟糕的做法，并且根本不能保证在不同的编译器甚至一周中的不同日子都能工作。不，您想要的是为您完成工作的数据结构；他们提供 100% 现金返还保证！

最基本的结构是一个固定大小的数组，例如：

```
struct team
{
    int players[99]; //an array
    int manager;
    int coach;
    string teamName;
    //etc etc
} 
```

然后访问您的播放器

```
team myTeam;
for(int i(0); i < 99; ++i)
{
    myTeam.players[i]; //do whatever
} 
```

数组的限制是一旦创建就无法更改其大小。所以如果你尝试

```
myTeam.players[99]; //accessing invalid memory - the array values are 0 - 98 
```

**更先进**

如果您需要一个可以在创建后更改大小的数据结构，例如，您可能希望在将来的某个时间向您的团队添加更多球员。然后您可以使用动态数据结构，例如[std::vector](http://www.cplusplus.com/reference/stl/vector/)或[std::deque](http://www.cplusplus.com/reference/stl/deque/)或[std::list](http://www.cplusplus.com/reference/stl/list/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T17:43:59.433

您可以定义指向成员的指针，例如指向成员函数的指针：

```
 typedef int team::*member_t; 
```

您可以拥有指向所有成员的指针数组：

```
 static member_t member[size]; 
```

使用这种方法定义成员函数来迭代所有成员很容易：

```
 template <class F>
  void for_each(F f)
  {
     for (int i = 0; i < size; ++i)
       f(this->*member[i]);
  } 
```

并且使用预处理器宏——你可以在一个地方定义所有成员，在另一个定义指向成员的指针——所以你不会在改变它们的顺序时犯任何错误。查看完整代码：

```
struct team {
#define TEAM_MEMBERS(prefix,suffix) \
  prefix player1 suffix, \
  prefix player2 suffix, \
  prefix player3 suffix

  int TEAM_MEMBERS(,);
  static const int size = 3;
  typedef int team::*member_t;
  static member_t member[size];
  template <class F>
  void for_each(F f)
  {
     for (int i = 0; i < size; ++i)
       f(this->*member[i]);
  }
};
team::member_t team::member[team::size] = {
  TEAM_MEMBERS(&team::,)
}; 
```

还有一些测试：

```
#include <iostream>

int main() {
  team t = { 0 };
  t.for_each([](int m) { std::cout << m << "\n"; }); // prints 0,0,0
  int n = 0;
  t.for_each([&n](int& m) { m = n++; });
  t.for_each([](int m) { std::cout << m << "\n"; }); // prints 0,1,2
  t.player2 = 7;
  t.for_each([](int m) { std::cout << m << "\n"; }); // prints 0,7,2
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T16:59:51.330

我建议使用容器而不是许多变量，例如您可以使用`std::array`or `std::vector`。这样，迭代将变得微不足道，制作副本更容易。但从设计的角度来看它也更好：如果您决定更改玩家的数量，更改容器会比添加/删除许多字段更容易

# android - 在操作栏中的菜单操作中处理双击（-Sherlock）？

> ID：13181919
> 
> 赞同：1
> 
> 时间：2012-11-01T16:58:27.343
> 
> 标签：android, android-actionbar, actionbarsherlock

当菜单选项位于 ActionBar（来自 Sherlock）中时，我可以处理双击菜单选项吗？

还是我必须更改默认布局并使用自定义布局？

非常感谢您的回答。

PS：如果可以访问操作栏中的视图（它们也是视图，对吗？）也许我可以处理我想要的。

# linux-kernel - free_netdev 和锁定

> ID：13181920
> 
> 赞同：1
> 
> 时间：2012-11-01T16:58:37.740
> 
> 标签：linux-kernel, linux-device-driver

在调用 free_netdev 之前是否需要解锁 net_device 结构？我遇到的代码执行以下操作：

```
static void delete_dev(struct net_device *dev)
{
   ASSERT_RTNL();
   ...
   unregister_netdevice(dev);
   ...
   rtnl_unlock();
   free_netdev(dev);
   rtnl_lock();
}

int foo()
{
   struct net_device *dev;

   rtnl_lock();
   ...
   delete_dev(dev);
   rtnl_unlock();
   return 0;
} 
```

这是做事情的正确方法吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T11:30:29.907

您不应再一次解锁锁定 rtnl。

原因如下：[Network Drivers API](http://kernel.org/doc/htmldocs/networking/netdev.html)中没有`free_netdev`关于需要锁的部分。然而，`unregister_netdevice` 需要持有锁并且它已经被包装在API中的`unregister_netdev`函数中，这在文档中有所说明。

无论如何，如果您查看一些流行的驱动程序的来源，[例如 e1000e](http://lxr.free-electrons.com/source/drivers/net/ethernet/intel/e1000e/netdev.c#L6423)，您会看到：

```
6432 static void __devexit e1000_remove(struct pci_dev *pdev)
6433 {
...
6459         unregister_netdev(netdev);
6460 
6461         if (pci_dev_run_wake(pdev))
6462                 pm_runtime_get_noresume(&pdev->dev);
6463 
6464         /*
6465          * Release control of h/w to f/w.  If f/w is AMT enabled, this
6466          * would have already happened in close and is redundant.
6467          */
6468         e1000e_release_hw_control(adapter);
6469 
6470         e1000e_reset_interrupt_capability(adapter);
6471         kfree(adapter->tx_ring);
6472         kfree(adapter->rx_ring);
6473 
6474         iounmap(adapter->hw.hw_addr);
6475         if (adapter->hw.flash_address)
6476                 iounmap(adapter->hw.flash_address);
6477         pci_release_selected_regions(pdev,
6478                                      pci_select_bars(pdev, IORESOURCE_MEM));
6479 
6480         free_netdev(netdev);
6481 
6482         /* AER disable */
6483         pci_disable_pcie_error_reporting(pdev);
6484 
6485         pci_disable_device(pdev);
6486 } 
```

如您所见，没有采取解锁锁定。

此外，他们使用`unregister_netdev`函数，因此它只会被锁定在`unregister_netdevice`自身内部，并且那里的所有数十个反初始化都将在锁定之外。因此，如果您认为自己负担得起，请考虑使用他们*（*`unregister_netdev` netdev 内核开发人员）在对其[源代码](http://lxr.free-electrons.com/source/net/core/dev.c?v=3.6#L6154)的评论中推荐的简单方法。

# php - 仅回显可用的数据库结果

> ID：13181922
> 
> 赞同：0
> 
> 时间：2012-11-01T16:58:40.260
> 
> 标签：php

我有这个关联数组：

```
$Fields = array("row0"=>"Yahoo ID", "row1"=>"MSN ID", "row2"=> "Gtalk ID"); 
```

另一方面，我有这个 SQL 查询：

```
SELECT YahooID, MSNID, GTalkID From UserTable WHERE Username = '$Username' LIMIT 1; 
```

结果可能会有所不同，因为有些用户只有 Yahoo ID，有些用户有其他用户。例如，如果我有这个结果：

```
$row[0] = NONE //means YahooID = NONE
$row[1] = example@msn.com
$row[2] = example@gmail.com 
```

那么如何将其作为输出（回声）：

MSN ID = example@msn.com

Gtalk ID = example@gmail.com

由于 Yahoo ID 不存在，因此结果将只有 MSN 和 Gtalk。'MSN ID' 和 'Gtalk ID' 是来自关联数组的变量，而 'example@msn.com' 和 'example@gmail.com' 来自 SQL 结果。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T17:14:14.047

```
$Fields = array();
while ($row = $result->fetch_assoc()) {
    if (! empty($row[0])) $Fields['MSN ID'] = $row[0];
    if (! empty($row[1])) $Fields['GTalk ID'] = $row[1];
    if (! empty($row[2])) $Fields['Yahoo ID'] = $row[2];
}

foreach ($Fields as $k => $v)
{
    echo "$k = $v" . PHP_EOL;
} 
```

# surf - EmguCV 从 3D 模型中检测关键点

> ID：13181929
> 
> 赞同：1
> 
> 时间：2012-11-01T16:59:17.877
> 
> 标签：surf, emgucv, object-recognition, keypoint

有没有办法我可以从 3D 模型而不是图像中检索观察到的关键点。这是因为我需要跟踪一个不均匀的物体（现在是简单的宇宙飞船：http: [//i.msdn.microsoft.com/dynimg/IC129855.jpg](http://i.msdn.microsoft.com/dynimg/IC129855.jpg)），它可以从任何一侧看到。目前，系统在使用图像时工作得有些好，但就像我说的那样，如果从任何一侧查看，我需要它能够识别模型。目前正在使用此处找到的 SURF 教程的实现： [http ://www.emgu.com/wiki/index.php/SURF_feature_detector_in_CSharp](http://www.emgu.com/wiki/index.php/SURF_feature_detector_in_CSharp)

此外，有没有办法指定关键点的细节或数量？

# php - 使用 htaccess 保护文件

> ID：13181931
> 
> 赞同：0
> 
> 时间：2012-11-01T16:59:23.203
> 
> 标签：php, apache, .htaccess, apache2

我正在使用 htaccess 来保护上传的文件不被公开使用（只有登录的用户才能看到这些文件）。

我当前的 htaccess 包括：

```
RewriteEngine on
RewriteRule ^(.*).(pdf|exe|doc|jpg|jpeg|png|gif)$ access.php?file=$1.$2 [L] 
```

这可行，但是我的文件夹结构如下：

```
access.php
--------------files
---------------------file
---------------------photo 
```

因此，在与 access.php 相同的目录中有一个名为“文件”的子目录，文件中有 2 个子目录文件和照片。

如何在 htaccess 中捕获文件的更完整路径？示例：files/file/a.jpg 现在它只返回 a.jpg

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T17:05:24.040

Try to add a [rewritebase](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritebase) so the result should an absolute URL:

```
RewriteBase / 
```

# asp.net-mvc - 更新分离实体的相关实体

> ID：13181932
> 
> 赞同：0
> 
> 时间：2012-11-01T16:59:23.697
> 
> 标签：asp.net-mvc, entity-framework, entity-framework-5

我在**更新**具有多个相关实体的实体时遇到问题。我有一个非常简单的模型，它由一个文章实体和一个与文章相关的类别列表组成。您可以从复选框列表中选择与这些类别中的哪些相关联......这很好用。

当我实际使用 dbContext**更新**现有实体时，问题就出现了。当我更新这个实体时，我已经将它从上下文中分离出来，准备稍后重新附加它，以便更新可以正确执行。

我可以看到，在发布模型后，类别被添加到文章实体中就好了，看起来它在存储库中更新，没有发生错误。

当我查看数据库时，文章已正常更新，但类别没有。

这是我的（简化的）更新代码...

```
 public virtual bool Attach(T entity)
    {
        _dbContext.Entry(entity).State = EntityState.Modified;
        _dbSet.Attach(entity);

        return this.Commit();
    } 
```

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T10:59:02.100

好的，我明白我现在做错了什么。我正在使用以下内容从上下文中选择实体以在它击中控制器操作之前进行模型绑定。

```
T entity = _dbSet.Find(id);    
_dbContext.Entry(T).State = EntityState.Detached;
return entity; 
```

代替...

```
return _dbSet.AsNoTracking().FirstOrDefault(predicate); 
```

通过分离实体，不会加载任何导航属性，因此无法对它们进行任何更改。使用 AsNoTracking() 仍会加载导航属性，但也允许附加实体对象以进行更新。

希望这可以帮助处于类似情况的其他人。

# postgresql - 哪个 PostGIS SRID 对空间索引最有效？

> ID：13181942
> 
> 赞同：3
> 
> 时间：2012-11-01T17:00:07.720
> 
> 标签：postgresql, postgis, spatial-index

我有一个启用 PostGIS 的数据库，其中一个名为的表`locations`将经纬度点 (SRID 4326) 存储在名为`coordinates`. 但是，我对该表的所有查找都将这些点转换为度量投影（SRID 26986），主要是为了进行距离比较。

显然我想在`coordinates`列上创建一个空间索引。我的问题是，在这种情况下，哪个是空间索引中使用的最佳（*计算*效率最高）SRID ？`coordinates`

我可以使用 SRID 4326 进行索引...

```
CREATE INDEX locations_coordinates_gist 
ON locations 
USING GIST (coordinates); 
```

或使用 SRID 26986...

```
CREATE INDEX locations_coordinates_gist 
ON locations 
USING GIST (ST_Transform(coordinates, 26986)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T20:49:47.180

我在阅读有关该[`ST_Transform`](http://postgis.refractions.net/documentation/manual-1.4/ST_Transform.html)功能的 PostGIS 文档时发现了这个有用的信息...

> 如果使用多个转换，则在常用转换上创建一个功能索引以利用索引的使用是很有用的。

所以看来答案是，两者都用！我创建了两个索引，每个 SRID 一个。

# python - 表单提交在 Django 教程中不断失败

> ID：13181945
> 
> 赞同：2
> 
> 时间：2012-11-01T17:00:15.277
> 
> 标签：python, django

我在[Django 教程（第 4 部分）](https://docs.djangoproject.com/en/dev/intro/tutorial04/)中，并尝试创建一个允许用户选择投票答案的表单。问题正确加载，但是当我单击“投票”（即选择选项并提交表单）时，以下错误不断显示：

```
Page not found (404)
Request Method: POST
Request URL:    http://localhost:8000/polls/vote/6
Using the URLconf defined in mysite.urls, Django tried these URL patterns, in this order:
^polls/ ^$ [name='index']
^polls/ ^(?P<poll_id>\d+)/$ [name='detail']
^polls/ ^(?P<poll_id>\d+)/results/$ [name='results']
^polls/ ^(?P<poll_id>\d+)/vote/$ [name='vote']
^admin/
The current URL, polls/vote/6, didn't match any of these. 
```

以下是 detail.html 中的代码，其形式为：

```
{{ poll.question }}

{% if error_message %}<p><strong>{{ error_message }}</strong></p>{% endif %}

<form action="/polls/vote/{{ poll.id }} " method="post">
{% csrf_token %}
{% for choice in poll.choice_set.all %}
    <input type="radio" name="choice" id="choice{{ forloop.counter }}" value="{{ choice.id     }}" />
<label for="choice{{ forloop.counter }}">{{ choice.choice_text }}</label><br />
{% endfor %}
<input type="submit" value="Vote" />
</form> 
```

我怀疑问题出在这条线上`<form action="/polls/vote/{{ poll.id }} " method="post">`，但我不知道如何解决它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T17:02:24.350

您的投票 ID 和`vote`操作已反转。

您的 url 模式是以下形式：

```
^polls/ ^(?P<poll_id>\d+)/vote/$ [name='vote'] 
```

但是您的表单操作指向`vote/id`相反。扭转那些：

```
<form action="/polls/{{ poll.id }}/vote" method="post"> 
```

请注意，本教程实际上使用不同的方法来生成该 URL；它用：

```
<form action="{% url 'polls:vote' poll.id %}" method="post"> 
```

在给定路由配置和当前轮询对象 ( )的 id 的情况下，[`url`过滤器会为您生成正确的 URL。](https://docs.djangoproject.com/en/stable/ref/templates/builtins/#url)`polls:vote``poll.id`

使用`{% url routename arguments %}`后，您可以更轻松地更改路线，而无需再更正所有模板。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T17:01:52.560

将网址更改为 /polls/{{poll.id}}/vote/

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-07T08:50:12.867

在以前的 tut03 中，他们已经删除了 url 的硬编码部分，现在它是`<form action="{% url 'polls:vote' question.id %}" method="post">`

这应该工作

# javascript - 无法通过“content”或“background-image”而不是“src”指定drawImage

> ID：13181947
> 
> 赞同：1
> 
> 时间：2012-11-01T17:00:23.307
> 
> 标签：javascript, canvas, webkit, drawimage, getimagedata

由于无法使用`src`DOM 属性指定图像集，因此我使用`-webkit-image-set`它来指定图像内容，如下所示：

```
<img id="imgTest" />
...
#imgTest {
    background-image: -webkit-image-set(url(icon1x.jpg) 1x,url(icon2x.jpg) 2x);
} 
```

图像内容加载良好，具体取决于设备像素比。现在，我需要将图像转储到画布中。这是我的代码：

```
var c = document.createElement("canvas");
var ctx = c.getContext("2d");
c.width = 20;
c.height = 20;
ctx.drawImage(document.getElementById("imgTest"), 0, 0);

// Let's see what we've got in the canvas.
var data = ctx.getImageData(0, 0, 2, 2).data; 
```

此时，`data`是一个零填充的数组（而实际图像显然不是空的）。如果我将`src`属性设置为`#imgTest`eg `icon2x.png`，则`data`内容会反映实际图像。

知道是否可以将包含 a 的图像的内容转储`-webkit-image-set`到 cavas 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T02:37:36.800

我不熟悉-webkit-image-set，也不熟悉您的代码，也无法重新创建您的建议。所以最终，我不知道。

但是，我对 HTML 和 javascript 足够熟悉，可以猜测图像元素要么尚未加载，要么背景和实际图像具有不同的数据空间，并且 drawImage() 使用实际图像数据。所以我建议使用 src 属性，并使用和 onload 处理程序在图像或主体完成加载时绘制图像。

另一种选择是使用 src 属性集创建一个隐藏的图像元素，并在加载后使用该数据。

# php - 如何将“另存为...”对话框中显示的文件名从 .php 更改为 .png

> ID：13181948
> 
> 赞同：2
> 
> 时间：2012-11-01T17:00:23.993
> 
> 标签：php, png, gd

我从 stackoverflow 中获取的一个简单的 PHP 脚本会生成一个具有透明背景的 PNG，在其上写入一些文本，然后直接将其输出到客户端浏览器：

```
$font = 25;
$string = 'My Text';
$im = @imagecreatetruecolor(300, 300);
imagesavealpha($im, true);
imagealphablending($im, false);
$white = imagecolorallocatealpha($im, 255, 255, 255, 127);
$red = imagecolorallocate($im, 255, 0, 0);
imagefill($im, 0, 0, $white);
$lime = imagecolorallocate($im, 204, 255, 51);
imagettftext($im, $font, 0, 0, 30, $red, "fonts/tt0588m_.ttf", $string);
header("Content-type: image/png");
imagepng($im);
imagedestroy($im); 
```

范围是获得一个简单的服务，该服务基于通过 URL 传递给它的参数来提供图像，例如 Google Charts（例如[这个 QR 代码图像](https://chart.googleapis.com/chart?cht=qr&chs=500x500&chl=lsajdfgksdafgs&choe=UTF-8&chld=L%7C0)）。

到目前为止，一切都很好，除了如果我点击上面代码生成的图像并想要保存它，浏览器不会将其识别为 PNG 图像，而是*PHP 脚本*（*另存为类型*选择器有这个选项仅），与 Google Charts 示例相反，其中资源被明确标识为 PNG 文件。

如何通过浏览器实现正确的资源识别？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-01T18:12:06.137

浏览器将使用 URL 中的文件名作为“另存为...”对话框中的默认值。当然，您可以*键入*另一个名称或使用建议的名称 (text.php) 保存文件，然后重命名。

您可以使用[Content-disposition](http://en.wikipedia.org/wiki/MIME#Content-Disposition)标头向浏览器“建议”文件名。这是一个例子：

```
header("Content-type: image/png");
header("Content-disposition: inline; filename=mytext.png"); 
```

*   `inline`建议浏览器应尝试显示图像。将其更改`attachment`为建议浏览器应显示“另存为...”或类似对话框。
*   `filename=`应包含您选择的文件名。

# lucene.net - Lucene .NET 在不同服务器上的不同结果

> ID：13181952
> 
> 赞同：0
> 
> 时间：2012-11-01T17:00:40.287
> 
> 标签：lucene.net, lucene

我们在 Web 应用程序中使用 Lucene .NET。我们从 SQL 数据库构建索引，然后对其进行搜索。

我们有一个令人困惑的情况：两台服务器上的相同数据库，相同的代码，相同的配置（相信我，我们已经彻底检查过了）。但是运行相同的搜索会返回截然不同的文档数量（一个产生很多，另一个不是这样）。

我们记录了针对 Lucene 运行的实际查询，并在 Lucene 查询分析器中运行了这些查询，我们在两台服务器上都得到了预期的结果。但是，通过我们的代码执行查询会在服务器之间给出完全不同的结果。

我们甚至在服务器之间复制了索引文件，我们得到了相同的结果——一台服务器总是给出很多结果，而另一台则没有。

我们检查了两台服务器的配置 - 两台服务器都是 Windows 2008 R2，64 位版本，都设置为相同的区域设置等。

我们很困惑 - 任何想法都非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T13:04:45.940

Luke 是一个使用可用的基于 java 的分析器的 java 应用程序。我希望 Luke 和 Lucene.Net 之间的结果会有所不同，特别是如果您使用与 java 版本不同的自定义分析器。

另外，请记住，a`new TermQuery("f", "my value")`会生成一个看起来像“f:my value”的查询，但是将它扔到 Luke 中会真正被解析为“f:my default-field:value”，即完全不同的搜索查询。

我将首先验证您使用的是正确的分析器，并且它们正在生成正确的令牌。我会检查文化敏感的东西，因为它们通常会在你最意想不到的时候偷偷摸摸。（以及进程在非系统语言环境下执行的情况，以及线程在执行期间更改其语言环境的情况。）

# mysql - 查询缓存mysql

> ID：13181954
> 
> 赞同：1
> 
> 时间：2012-11-01T17:00:46.430
> 
> 标签：mysql, performance, caching

我想在 MySQL 上使用查询缓存，但我怀疑如果我在已缓存的查询上更新或插入数据，缓存会反映它吗？

它会只返回缓存的查询还是更新的查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T17:12:40.480

MySQL 的查询缓存自动工作。您不必担心它会变得如此不一致。

一般而言，更新具有使任何将受到影响的缓存查询无效的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T17:16:46.943

查询缓存不返回陈旧数据。当表被修改时，查询缓存中的任何相关条目都会被刷新。

请参阅文档以获取完整参考 - [MySql 查询缓存](http://dev.mysql.com/doc/refman/5.6/en/query-cache.html)

# c# - C# wpf List：如何枚举 n 级 List<>

> ID：13181955
> 
> 赞同：0
> 
> 时间：2012-11-01T17:00:48.037
> 
> 标签：c#, wpf, list, enumeration

一个类 System.Windows.Media.Media3D.Model3DGroup ：Model3D

如果我已经完成了

```
 ...
  model3DGroup1.Add(model3DGroup0);
  model3DGroup2.Add(model3DGroup1);
  model3DGroup3.Add(model3DGroup2);
  model3DGroup4.Add(model3DGroup3);
  ...
  model3DGroupN.Add(model3DGroupN_Minus_One); 
```

如果我不知道上面的代码，我将如何枚举这些 N 级**Model3DGroup**的形式？`model3DGroupN`如何知道每个级别的子元素？孩子的数量可能不是一个。

# google-maps-api-3 - 使用 GPS 坐标获取建筑物名称

> ID：13181963
> 
> 赞同：1
> 
> 时间：2012-11-01T17:00:59.563
> 
> 标签：google-maps-api-3, google-api, google-places-api

我正在编写一个应用程序来使用手机本身获得的 GPS 坐标来检索该位置的建筑物名称。

例如，如果我使用此 http URL 向 Google Place API 请求： [https://maps.googleapis.com/maps/api/place/search/json?location=40.805112,-73.960349&radius=10&sensor=false&key=](https://maps.googleapis.com/maps/api/place/search/json?location=40.805112,-73.960349&radius=10&sensor=false&key=) "YourKey "

我只能通过这个得到这个坐标的**街道名称**。

但是如果我在 maps.google.com 中输入“40.805112,-73.960349”。我可以得到确切的建筑物名称。所以我想知道如何使用 Google Map API 来获取我想要的建筑物名称。

非常感谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T03:06:18.610

[您提供的请求](https://maps.googleapis.com/maps/api/place/search/json?location=40.805112,-73.960349&radius=10&sensor=false&key=YOUR_API_KEY)中的第一个结果包含`"name" : "Church of Notre Dame"`，这不是您要找的吗？

如果您只对此位置的地名感兴趣，一个更好的请求是使用该`rankby=distance`参数，或者`radius`通过以下方式过滤`type=establishment`：

> [https://maps.googleapis.com/maps/api/place/search/json?location=40.805112,-73.960349&rankby=distance&types=establishment&sensor=false&key=YOUR_API_KEY](https://maps.googleapis.com/maps/api/place/search/json?location=40.805112,-73.960349&rankby=distance&types=establishment&sensor=false&key=YOUR_API_KEY)

这将返回给定位置的最近位置。

# php - 无法将字符串转换为整数

> ID：13181964
> 
> 赞同：0
> 
> 时间：2012-11-01T17:01:04.750
> 
> 标签：php, javascript, ajax, string, integer

我正在动态创建一些这样的标签：

```
$('#marker').before('<div class ="file_up" id="bloc_3"></div>'); 
```

然后，我从 id 中获取数字：

```
$('.file_up').live("click",function() 
{
    var address  = $(this).att('id');
    var substr  = address.split("_");
    var suffix = substr.pop("_");

    $.ajax({
        url: "xxxx.php",
        type: "POST",
        data: "suff="+parseInt(suffix),
        cache: false,
        success: function (res){ alert(res);}
    })

} 
```

然后，在 php 文件中，我执行以下操作：

```
<?php

$suff= intval($_POST['suff']);
$x=4;
echo $suff+$x;

?> 
```

无论我尝试什么，我得到的不是 7 的总和，而是两个字符串的连接，如下所示：“34”。

不知道该怎么办。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T17:06:10.670

Try this:

```
 $suff = (int) $_POST['suff'];
 $x = 4;
 echo $suff + $x; 
```

# c++ - 使用 C++ 清除 Netbeans 输出控制台？

> ID：13181965
> 
> 赞同：1
> 
> 时间：2012-11-01T17:01:05.587
> 
> 标签：c++, macos, netbeans, netbeans-7

有没有办法可以清除（或“伪”清除）打印到 C++ 中 Netbeans 输出控制台窗口的文本？如果这很重要，我正在使用 Mac OS X。

# sql - SQL：比较两个不同表的 MAX 日期

> ID：13181966
> 
> 赞同：1
> 
> 时间：2012-11-01T17:01:07.723
> 
> 标签：sql, sql-server

我有 3 张桌子

## 用户

![在此处输入图像描述](../Images/5e613d39ccfc78ee903c927d02acb26b.png)

## 出席

![在此处输入图像描述](../Images/ea6287947a00814210a6f36d869170c4.png)

## 支付

![在此处输入图像描述](../Images/d3f877201d8460e6daafc151f08b2d29.png)

现在我喜欢得到

GroupID、用户名、MAX(PaymetDate)、MAX(AttendenceDate)

其中 MAX(PaymetDate) 小于 MAX(AttendenceDate)

### 这是我试过的

```
 SELECT  MAX(PaymetDate) AS Paied_Upto
    FROM Payment
    Group by GroupID   

    SELECT  MAX(AttendenceDate) AS Last_ AttendenceDate
    FROM Attendence FULL OUTER JOIN Users ON Attendence.Username = Users.Username
    Group by Users.GroupID 
```

但是如何让他们一起工作呢？

### 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T17:15:31.210

试试这个：

```
SELECT u.GroupID, u.UserName, py.LastPaymentDate, at.LastAttendenceDate
FROM User AS u,
(SELECT Username, Max(AttendenceDate) AS LastAttendenceDate FROM Attendence GROUP BY Username) AS at,
(SELECT GroupID, Max(PaymetDate) AS LastPaymentDate FROM Payment GROUP BY GroupID) AS py
WHERE u.UserName=at.Username
AND u.GroupID=py.GroupID
AND py.LastPaymentDate < at.LastAttendenceDate; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T17:18:08.323

试试这个

```
select p.GroupID, u.UserName, MAX(p.PaymetDate), MAX(a.AttendenceDate)
from dbo.Users u
inner join dbo.Attandence a
    ON u.UserName = a.UserName
Inner join dbo.Payment p
    ON u.groupID = p.GroupID
GROUP BY p.GroupID, u.UserName
Having MAX(p.PaymentDate) < MAX(a.attendenceDate) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T17:26:46.557

我认为这可以满足您的需要（**[SqlFiddle 链接](http://www.sqlfiddle.com/#!3/16752/6)**）：

```
select UserName, GroupID, MaxAttendanceDate, MaxPaymentDate
from (
  select 
    u.UserName,
    u.GroupID,
    (select max(AttendanceDate) 
       from Attendance a 
       where a.UserName = u.UserName) as MaxAttendanceDate,
    (select max(PaymentDate) 
       from Payment p
       where p.GroupID = u.GroupId) as MaxPaymentDate
  from [User] u
) x
where MaxAttendanceDate > MaxPaymentDate 
```

# java - Joda DateTime：用字符串中的“CEST”解析日期

> ID：13181970
> 
> 赞同：3
> 
> 时间：2012-11-01T17:01:18.823
> 
> 标签：java, scala, datetime, jodatime

我想使用 joda 库解析 DateTime（在 scala 中，但应该与 java 相同）。

来源看起来像

```
val dateParser = DateTimeFormat.forPattern("yyyy-MM-dd HH:mm:ss z")
val date = dateParser.parseDateTime("2012-08-28 15:35:00 CEST") 
```

在 Java 中，这看起来像

```
DateTimeFormatter dateParser = DateTimeFormat.forPattern("yyyy-MM-dd HH:mm:ss z");
DateTime date = dateParser.parseDateTime("2012-08-28 15:35:00 CEST"); 
```

不幸的是，这不起作用，但会引发异常：

```
java.lang.IllegalArgumentException: Invalid format: "2012-08-28 15:35:00 CEST" is malformed at "CEST" 
```

为什么这不起作用？当然我可以忽略“CEST”部分而只解析其余部分，但是在输入中“CEST”有时可以被“CET”替换，所以我不想忽略它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T17:15:42.127

问题是因为`CEST`是一个不唯一的短区域名称。[请参阅DateTimeFormatter Bug parsing with general time zone in US Locale 中](http://comments.gmane.org/gmane.comp.java.joda-time.user/1385)的详细讨论？

您可以使用来自[github](https://github.com/JodaOrg/joda-time)的最新版本，该版本应该包含一个修复程序，请参阅[此提交](https://github.com/JodaOrg/joda-time/commit/14863a51230b3d44201646dbc1ce5d7f6bb97a33)。

您应该能够使用`DateTimeFormatterBuilder#appendTimeZoneShortName`添加`CEST`为“America/Chicago”的别名或您希望如何解释`CEST`的 .

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T17:14:07.203

使用实例应用解析`java.util.Date`允许您应用解决方法，因为`CEST`解析不好，因为不是唯一的：

```
DateFormat dateParser = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss z");
DateTime dateTime = new DateTime(dateParser.parse("2012-08-28 15:35:00 CEST"));
//Here parsed `java.util.Date` instance is back to an instance of org.jodatime.DateTime` 
```

这种解决方法的好处：不用担心“哪个版本适用于这个时区？？？”

# javascript - 在 Noesis Javascript.net 中保存上下文状态

> ID：13181972
> 
> 赞同：3
> 
> 时间：2012-11-01T17:01:22.710
> 
> 标签：javascript, c#, asp.net-mvc-3, javascript.net

我在我的 C# MVC3 应用程序中 使用 noesis [javascript.net 库。](https://github.com/JavascriptNet/Javascript.Net)

是否可以保存 javascript 上下文对象的快照，然后将该快照重新加载到新的 javascript 上下文实例中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-21T10:42:06.170

不确定原始用户是否会发现这很有用，但我通过在上下文中添加一个对象来实现这一点，让我可以写入磁盘（TextWriter 的简单包装器），然后序列化全局范围的`this`位置`this`，以便捕获所有对象。明显的缺陷是并非所有对象都正确序列化（我用于`JSON.stringify`序列化）。当我需要重新加载上下文时，我将文件中的字符串加载到上下文中的变量中，然后将对象设置回来。

# c - 从所有进程可见的进程中设置环境变量

> ID：13181982
> 
> 赞同：-1
> 
> 时间：2012-11-01T17:02:00.187
> 
> 标签：c, unix, environment-variables, glib

如何从所有进程可见的进程中设置环境变量？我将 C 与 Glib 一起使用。

我有 10 个使用同一个库的进程。问题是在那个库中执行了一个检查过程（这是 CPU 饥饿的）。我想避免为每个进程执行该库检查过程。对于使用该库的第一个进程来说，这就足够了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T17:03:37.467

这根本不可能。

设置环境变量（或更改当前环境）仅对当前进程的子（和后代）进程可见。

其他进程，特别是父进程（通常是在您启动程序的终端中运行的 shell）不受影响。

您可能会玩一些肮脏的把戏，例如在其中添加线条`$HOME/.bashrc`等。但您不应该这样做。

您只需要**记录**哪些环境变量是相关的。设置环境变量是**用户的责任**（也许通过手动编辑他的`$HOME/.bashrc`等）。将这种自由留给您的用户。向他解释如何做到这一点以及为什么。

你编辑了你的问题来解释

> 我有 10 个使用同一个库的进程。问题是在那个库中执行了一个检查过程（这是 CPU 饥渴的）。我想避免为每个进程执行该库检查过程。

但是您绝对不需要为此更改环境变量。

你可以

1.  决定并记录不执行检查，除非给出了某些特定的环境变量（或某些程序参数）

2.  决定给检查一个特定的文件名，并使用文件锁定写入来写入该文件，并使用文件锁定读取再次读取它

3.  让检查将其结果写入某个已知的预先文件中，并在决定您要进行昂贵的检查之前阅读该文件

4.  让一个进程启动所有其他进程，并通知他们检查（可能确实设置了一些环境变量或一些程序参数）或使用一些进程间通信技巧与其他进程通信（您可以使用套接字、锁定文件、共享内存、等等等等……）

5.  做许多其他技巧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T17:03:54.290

那是不可能的。您只能为子进程设置环境。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T18:18:14.090

flock() 听起来可能是您的朋友。

[http://beej.us/guide/bgipc/html/multi/flocking.html](http://beej.us/guide/bgipc/html/multi/flocking.html)

您可能还想查看信号量或 SHM（共享内存）。

[https://beej.us/guide/bgipc/html/multi/semaphores.html](https://beej.us/guide/bgipc/html/multi/semaphores.html)

[http://beej.us/guide/bgipc/html/multi/shm.html](http://beej.us/guide/bgipc/html/multi/shm.html)

这完全取决于您想要的协调水平。文件锁足以让一个进程在我工作的时候离开。信号量和共享内存将允许您协调访问。

# python - 如何将 cv::Mat 转换为 python

> ID：13181986
> 
> 赞同：4
> 
> 时间：2012-11-01T17:02:19.167
> 
> 标签：python, opencv, computer-vision

```
// Generate output image
cv::Mat foreground(image.size(),CV_8UC3,
      cv::Scalar(255,255,255)); // all white image
image.copyTo(foreground,result); // bg pixels not copied 
```

上面的代码是使用 openCV 用 C++ 编写的，现在我需要使用 opencv 将其更改为 python。我找不到 cv::Mat 的替代品。请帮我..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T21:02:50.047

python上的Opencv，只是“导入cv”然后几乎相同的函数名称。见[http://opencv.willowgarage.com/documentation/python/cookbook.html](http://opencv.willowgarage.com/documentation/python/cookbook.html)

或者，如果您安装 numpy opencv 将返回 numpy 数组

# php - 使用 AWS IAM 的临时凭证

> ID：13181996
> 
> 赞同：4
> 
> 时间：2012-11-01T17:02:56.657
> 
> 标签：php, objective-c, xcode, amazon-s3, amazon-web-services

我有一台服务器，它应该向客户端提供临时 AWS 凭证。凭据将使用 HTTPS 传输。

客户端应该能够上传和下载 S3 文件。我的担忧如下：

我有多个用户只访问他们自己的目录：/Users/someUser/myfile.png

一般来说，您可以设置策略以允许或拒绝 S3，但不能仅授予对特定路径的访问权限。

我该怎么办？HTTPS传输就够了吗？

然后我的第二个问题。如果我听到“临时凭证”，我会记住一个密钥，它在几个小时内有效，然后过期。但我不确定 IAM 是否真的是为此而构建的。我应该为所有用户提供相同的凭据吗？或者我是否为每个客户端生成一个密钥对？

服务器使用 PHP 运行，客户端使用 Objective-C。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-02T22:12:51.210

您可以在 Amazon S3 中的路径上指定权限。有关更多详细信息，请参阅以下内容：

[使用 IAM 策略](http://docs.amazonwebservices.com/AmazonS3/latest/dev/UsingIAMPolicies.html)

此外，如果您想创建“临时凭证”，您可以使用 AWS Security Token Service。此服务允许您创建持续 1 到 36 小时的凭证，您可以对这些凭证设置策略以限制其访问。有关该服务的更多详细信息，请参阅：

[安全令牌服务 API 参考](http://docs.amazonwebservices.com/STS/latest/APIReference/Welcome.html?r=829)

最后，还有一篇为 AWS 移动开发工具包编写的文章，它做了类似的事情。它有一个服务器向使用 Amazon S3 存储桶的用户颁发临时凭证。它将用户限制在存储桶的“子文件夹”中，并限制他们的操作。您可以在此处阅读此示例：

[移动应用程序的凭据管理](http://aws.amazon.com/code/4598681430241367)

希望这可以帮助您获得所需的信息。