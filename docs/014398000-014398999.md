# StackOverflow 问答 14398000-14398999

# android - 带有 Mono Android 的 ListView - 设置复选框

> ID：14398002
> 
> 赞同：3
> 
> 时间：2013-01-18T11:29:13.070
> 
> 标签：android, listview, checkbox, mono

我在访问 ListView 中的复选框时遇到问题。我正在尝试在创建每个视图时设置复选框。

我做了一个自定义适配器来实现这个功能：

```
 public override View GetView(int position, View convertView, ViewGroup parent)
    {
        View view = convertView;
        if (view == null)
            view = context.LayoutInflater.Inflate(Android.Resource.Layout.SimpleListItemChecked, null);
        view.FindViewById<TextView>(Android.Resource.Id.Text1).Text = items[position]._fName + items[position]._lName;

        // This seems to return null.. I'm probably accessing it the wrong way.
        view.FindViewById<CheckBox>(Android.Resource.Id.Checkbox).Checked = items[position]._Enabled;
        return view;
    } 
```

问题是，作为注释状态，程序抛出 System.NullReferenceException。关键是我不知道如何访问该复选框。

任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T16:23:00.247

我不知道这是否是最好的方法，但它对我有用：考虑到我们知道列表将包含一个文本和一个复选框，我直接投到 CheckedTextView..

```
 public override View GetView(int position, View convertView, ViewGroup parent)
    {
        var view = convertView as CheckedTextView;
        if (view == null)
            view = context.LayoutInflater.Inflate(Android.Resource.Layout.SimpleListItemChecked, null) as CheckedTextView;
        view.SetText(items[position]._fName + items[position]._lName, TextView.BufferType.Normal);
        view.Checked = items[position]._Enabled;

        return view;
    } 
```

这可能不是实现这一目标的正确/最佳方式，但至少它有效..

# linux - 使用 netstat 结合 ps 查找进程 id

> ID：14398007
> 
> 赞同：5
> 
> 时间：2013-01-18T11:29:21.510
> 
> 标签：linux, bash

我想使用 netstat 查找进程 ID，并使用 ps 查看该进程运行了多长时间。我目前有两个单独的命令来执行此操作。我如何用一个命令来做到这一点？

```
netstat -anp | grep http | grep ESTABLISHED | awk {'print $7}' | awk -F '/' {'print $1'} 
```

和：

```
ps -eo pid,uid,ruser,etime | grep someuser 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-18T11:49:47.970

```
for i in `netstat -anp | grep http | grep ESTABLISHED | awk {'print $7}' | awk -F '/' {'print $1'} | uniq` ; do ps -eo pid,uid,ruser,etime | grep $i ; done 
```

# mysql - 在 DQL 中的另一个 SELECT 查询中实现 SELECT 查询（Doctrine）

> ID：14398021
> 
> 赞同：1
> 
> 时间：2013-01-18T11:30:10.160
> 
> 标签：mysql, sql, doctrine, dql, doctrine-1.2

我有一个 MySQL 的 SQL 查询，它给了我正确的结果。但是，我在使用 DQL 将其转换为 Doctrine 查询时遇到了问题。

```
SELECT Sum(s) AS s 
FROM   (SELECT DISTINCT oder.id   AS m, 
                        o_t.restaurants_id, 
                        o_t.value AS s 
        FROM   orders AS oder 
               INNER JOIN order_total AS o_t 
                       ON oder.id = o_t.orders_id 
               INNER JOIN order_status AS o_s 
                       ON oder.id = o_s.orders_id 
        WHERE  o_s.status = 1 
               AND o_t.code = 'total') a 
```

我正在尝试以下操作：

```
 $query = Doctrine_Query::create()
        ->select('sum(s) as s')
        ->addSelect('DISTINCT order.id,o_t.value')
        ->from('orders as order')
        ->leftJoin('order.order_total as o_t')
        ->leftJoin('order.order_status as o_s_i')
        ->where('o_s_i.status = '.order_status::ORDER_COMPLETE)
        ->andWhere('o_t.code = "total"')->getSqlQuery(); 
```

返回：

```
SELECT DISTINCT o.id     AS o__id, 
                o2.id    AS o2__id, 
                o2.value AS o2__value, 
                Sum(s)   AS o__0 
FROM   orders o 
       LEFT JOIN order_total o2 
              ON o.id = o2.orders_id 
       LEFT JOIN order_status o3 
              ON o.id = o3.orders_id 
WHERE  ( o3.status = 1 
         AND o2.code = "total" ) 
```

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:28:28.547

我注意到您的原始 SQL 查询工作正常，所以为什么不使用带有 Doctrine 的原始 sql 查询。

不知道你用的是哪个版本的Doctrine，所以说一下两种可能。

**案例原则1**

[正如j0k](https://stackoverflow.com/users/569101/j0k)`Doctrine_RawSql`所建议的那样，一种可能性是使用，但仅适用于**Doctrine1.x**。

 ****案例原则2**

您更有可能使用的是最新版本的 Doctrine ( **versions > 2.0** )。[正如您在此处](http://www.doctrine-project.org/blog/doctrine2-native-queries.html)所读到的，您不应该指向使用`Doctrine_RawSql`. 而是使用[官方教程](http://www.doctrine-project.org/blog/doctrine2-native-queries.html)`createNativeQuery`中所示的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T20:44:23.260

是的，[冉阿让](https://stackoverflow.com/users/1339429/jeanvaljean)是对的。

我的朋友，如果您的原始 SQL 运行良好，那么您为什么不使用原始 SQL 查询。

让我帮你写这个。

首先，您需要 PDO（PHP 数据对象），它将作为原始查询的数据库处理程序。

```
$pdo = Doctrine_Manager::getInstance()->getCurrentConnection()->getDbh(); 
```

然后准备语句并执行它：

```
$query = "SELECT Sum(s) AS s 
FROM   (SELECT DISTINCT oder.id   AS m, 
                        o_t.restaurants_id, 
                        o_t.value AS s 
        FROM   orders AS oder 
               INNER JOIN order_total AS o_t 
                       ON oder.id = o_t.orders_id 
               INNER JOIN order_status AS o_s 
                       ON oder.id = o_s.orders_id 
        WHERE  o_s.status = 1 
               AND o_t.code = 'total') a";

$stmt = $pdo->prepare($query);
$stmt->execute();
$results = $stmt->fetchAll(); 
```

您还可以传递如下参数：

```
$query = "SELECT * FROM table WHERE param1 = :param1 AND param2 = :param2";
$stmt = $pdo->prepare($query);

$params = array(
  "param1"  => "value1",
  "param2"  => "value2"
);
$stmt->execute($params);

$results = $stmt->fetchAll(); 
```**

# ios - 如何从 selectedRowAtIndexPath 推送 DetailViewController

> ID：14398027
> 
> 赞同：1
> 
> 时间：2013-01-18T11:30:59.443
> 
> 标签：ios, uitableview, didselectrowatindexpath

**当我从我的 SecondViewController 上单击一个单元格时，我想从Storyboard**转到我的 DetailViewController 。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
{
    NSLog(@"Clicked at row: %@", [barCodeArray objectAtIndex:indexPath.row]);

} 
```

我如何推送到 DetailViewController 并用它发送 [barCodeArray objectAtIndex:indexPath.row]？

编辑：**不工作的代码..**

代码

```
/*DetailViewController *detailViewController1 = [[DetailViewController alloc] initWithNibName:@"DetailViewController" bundle:nil];
[self.navigationController pushViewController:detailViewController1 animated:YES]; 
[detailViewController1 release];
//[self.navigationController popViewControllerAnimated:YES];*/ 
```

![在此处输入图像描述](../Images/2dee818fa9a8091778d48250ac32bb05.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T12:14:58.290

让我们假设**Listviewcontroller**是您的第一个包含 tableview 的视图控制器。从**didSelectRow**你想推**Detailviewcontroller**。

**1** .首先检查您的根视图控制器是否为**导航控制器**。

如果您使用的是故事板，那么首先您的 rootviewcontroller 必须是**Navigation Controller**

要检查转到**MainStoryboard**文件。

它应该是这样的。

-> 导航控制器 -> Listviewcontroller -> Detailviewcontroller

**2** . 一旦确认您的 rootviewcontroller 是**Navigation Controller**。然后从一个**Listviewcontroller**导航到**Detailviewcontroller**你必须使用“ **Segue** ”

**从Listviewcontroller**设置一个新的 segue到**Detailviewcontroller**。

要设置新的 segue **，请按住 Ctrl 键单击位于 Listviewcontroller 场景中的原型单元，然后将生成的线拖到 Detailviewcontroller 场景中。**

释放线路后，从出现的菜单中选择**Push**选项。

故事板将更新以显示表视图和 Detailview 控制器之间的 segue 连接。

打开**Detailviewcontroller**有必要引用这个特定的 segue。为此，请给出一个**标识符**。单击**Listviewcontroller**和**Detailviewcontroller**之间的**segue 连接**，显示 Attributes Inspector（View -> Utilities -> Show Attributes Inspector）并将 Identifier 值更改为“Detailview”。

 ****在**Listviewcontroller**添加下面的方法。

```
 -(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
    {
        if ([[segue identifier] isEqualToString:@"Detailview"])
        {
            DetailViewController *detailViewController =
            [segue destinationViewController];

            // and add any other code which you want to perform.

        }
} 
```

有关更多信息，[请参阅此链接](http://www.techotopia.com/index.php/Implementing_TableView_Navigation_using_Xcode_Storyboards)

在 Tabbarcontroller 中添加导航控制器......你可以像这个添加的图像一样。![.  只是](../Images/71298c0420f4da0c7cb68ec3d0f8a96b.png)

我认为您需要查看此链接： [In Storyboard with Navigation Controller and Tabbar Controller](http://maybelost.com/2011/10/tutorial-storyboard-in-xcode-4-2-with-navigation-controller-and-tabbar-controller-part1/)****

# java - 如何检查 EDT（事件调度线程）是否已完成 Java 中的事件调度

> ID：14398029
> 
> 赞同：5
> 
> 时间：2013-01-18T11:31:06.770
> 
> 标签：java, swing, events, awt, event-dispatch-thread

在我的工具中，我记录了从用户应用程序生成的事件。现在用户可以使用我的工具来重播他的场景。

在回放用户录制的场景时，我使用以下方法将录制的事件一一发布到“EventQueue”：

```
eventQueueObj.postEvent(eventObj); 
```

在大多数情况下，回放用户录制的场景没有问题。

为了解释我的问题，我将举一个简短的例子。

我的工具的用户想要检查在他的应用程序中，“文件”菜单下的“关闭”按钮是否有效。他的场景是：

1) 单击文件菜单。

2) 点击打开菜单项

3) 从文件选择器中选择文件。

4) 单击文件选择器上的打开。

5) 打开文件后，单击文件菜单。

6) 单击关闭菜单项。

重播第1步到第4步没有问题。现在在第5步，我应该等到文件打开（打开的文件很大，需要一些时间）。如果我不等到文件打开并继续前进，“文件”菜单下的“关闭”菜单项将保持禁用状态。所以在“关闭”菜单项上触发鼠标点击事件是没有用的。

我的问题是“如何从 Event Dispatch Thread 获取已完成当前事件处理的信息？”

在此之后，我可以点击“文件”菜单，然后点击第 6 步。

我不想使用**sleep()**递归检查“关闭”菜单项是否启用。因为我只想等待所需的时间，而不是大概的时间。

如果我使用**sleep()**，在大多数情况下，即使用户的文件打开操作完成，我也会浪费一些执行时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T11:44:54.307

这应该有效：

```
Toolkit.getDefaultToolkit().getSystemEventQueue().peekEvent() == null; 
```

一种不同的异步方法是推送一个特殊的最后一个事件并为它设置一个监听器。然后你不需要通过轮询事件队列来忙等待。

# iphone - 没有在 ios6 模拟器中运行的应用程序

> ID：14398032
> 
> 赞同：-8
> 
> 时间：2013-01-18T11:31:14.467
> 
> 标签：iphone, ios

我正在使用 ios6 模拟器。我是否需要单独的模拟器来运行基于 ios5 的应用程序？

当我尝试运行 SampleApp。名为**Twitterrush**。有错误，出现一个弹出窗口说

> 运行目标 iPhone 6.0 模拟器对于运行方案“TwitterRush”无效

方案“TwitterRush”不包含可以为运行目标 iPhone 6.0 模拟器支持的 SDK 构建的可构建项目。确保您的目标都指定了此版本 Xcode 支持的 SDK。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T11:34:10.893

在您的模拟器选项上转到 Hardware->Version->5.1

如果那里不存在 5.1，请转到 Xcode->Preferences->Downloads->iOS 5.1 Simulator->Install

希望这些信息对你有帮助..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T11:45:29.843

在您的项目设置-> 信息选项卡中，您在 iOS 部署目标中看到了什么值？如果是 6.0，您将无法在模拟器 6.0 下的任何地方运行它。如果是5.0，所有版本的simulator => 5.0都可以运行。

在 XCode 中，您可以从“设置活动方案”按钮选择要运行的模拟器版本，通常位于 XCode 项目区域的左上角。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T12:37:16.273

试试这个，在你的模拟器选项上转到`Hardware->Version->5.1`

如果那里不存在 5.1，请转到`Xcode->Preferences->Downloads->iOS 5.1 Simulator->Install`

# php - 如何在分页控件中结合 PHP 和 jQuery

> ID：14398035
> 
> 赞同：0
> 
> 时间：2013-01-18T11:31:23.843
> 
> 标签：php, javascript, jquery

我正在尝试在 PHP 中实现分页。首先，我根据页面记录获取页数，并按页数`<li>`动态生成链接。像这样：

```
for($i = 1; $i <= $no_of_pages; $i++)
{
    echo '<li><a href="view_records.php?pageno='.$i.'">'.$i.'</a></li>';
} 
```

没关系，但问题是当页数超过10页时，页码会换行到下一行。我想通过每次单击左右 10 页来滚动它们。

假设我有 35 页，所以这将显示所有 35 页链接

```
left 1 2 3 4 5 6 7 8 9 10 11 12 ......35 right 
```

但我只想

```
left 1 2 3 4 5 6 7 8 9 10 right 
```

当我点击`right`它时会向右滚动并显示

```
left 11 12 13 14 15 17 18 19 20 right 
```

再次`right`将显示下 10 页链接。JS 或 jQuery 中有什么东西可以控制`li`滚动吗？这将变得很容易，因为我通过 PHP 获得页面总数并将它们的链接放在 HTML 中，用户可以直接移动到所需的页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-12T10:45:59.600

答案为时已晚。无论如何，您最初可以正确获取页面中的前 10 个页面链接。然后，您可以使用 jQuery 更改 li 标签（其 ul）的父元素内的内容。单击“右”时，清空 ul 元素的内容。使用循环添加新的 li 元素以生成。您可能需要一个隐藏值来控制页面限制。

# oracle - 在 Oracle PL/SQL 中格式化回车、换行

> ID：14398036
> 
> 赞同：3
> 
> 时间：2013-01-18T11:31:26.220
> 
> 标签：oracle, plsql, oracle10g, string-formatting, carriage-return

我在发送的邮件正文格式方面遇到问题：

这是 KO 版本（没有新行）：

```
declare
  crlf                     VARCHAR2(2) := chr(13)||chr(10); 
  msg_body                 VARCHAR2(2000);
begin
  msg_body := msg_body || ('Blablah  : '|| SYSTIMESTAMP ) || crlf;
  msg_body := msg_body || ('Blablah  : '|| SYSTIMESTAMP ) || crlf;
  EXECUTE IMMEDIATE 'ALTER SESSION SET smtp_out_server = ''127.0.0.1''';
  UTL_MAIL.send(sender => 'xx@xx.com', recipients => 'yy@yy.com', subject => 'Blah', MESSAGE => msg_body);
end; 
```

这是 OK 版本（漂亮的新行）：

```
declare
  crlf                     VARCHAR2(2) := chr(13)||chr(10);
  msg_body                 VARCHAR2(2000);
begin
  msg_body := msg_body || ('Blablah  : ') || crlf;
  msg_body := msg_body || ('Blablah  : ') || crlf;
  EXECUTE IMMEDIATE 'ALTER SESSION SET smtp_out_server = ''127.0.0.1''';
  UTL_MAIL.send(sender => 'xx@xx.com', recipients => 'yy@yy.com', subject => 'Blah', MESSAGE => msg_body);
end; 
```

最好的祝福

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T11:57:33.243

您的两个版本之间的唯一区别是在有效的版本中排除了 SYSTIMESTAMP。

您没有明确地将 SYSTIMESTAMP 转换为使用[`TO_CHAR()`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions200.htm#SQLRF06129). 它将根据您的[NLS_DATE_FORMAT](http://docs.oracle.com/cd/E11882_01/server.112/e25513/initparams145.htm#REFRN10119)进行隐式转换。

使用您希望的任何[格式模型](http://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements004.htm#i34510)将其正确转换为字符；例如

```
to_char(systimestamp, 'yyyy-mm-dd hh24:mi:ss:ff3') 
```

[`ff`是小数秒。]

[去引用](http://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements002.htm#i53062)

> Oracle 建议您指定显式转换，而不是依赖隐式或自动转换，原因如下：
> 
> *   使用显式数据类型转换函数时，SQL 语句更容易理解。
>     
>     
> *   隐式数据类型转换会对性能产生负面影响，尤其是在将列值的数据类型转换为常量而不是相反时。
>     
>     
> *   隐式转换取决于它发生的上下文，并且可能不会在每种情况下都以相同的方式工作。例如，从日期时间值到 VARCHAR2 值的隐式转换可能会返回意外年份，具体取决于 NLS_DATE_FORMAT 参数的值。
>     
>     
> *   隐式转换的算法可能会随着软件版本和 Oracle 产品的变化而变化。显式转换的行为更可预测。

* * *

我建议调查使用[UTL_SMTP](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/u_smtp.htm#ARPLS71459)而不是 UTL_MAIL。您无需更改会话。一个非常简单的发送过程可能如下所示：

```
declare

   l_to_list  long;
   l_crlf varchar2(2) := chr(13) || chr(10);
   l_conn utl_smtp.connection;
   l_date     varchar2(255) default to_char(sysdate, 'dd Mon yyyy hh24:mi:ss');

begin

   l_conn := utl_smtp.open_connection(<mailhost>, 25);
   utl_smtp.helo(l_conn, <mailhost>);
   utl_smtp.mail(l_conn, <sender>);

   l_to_list := address_email('To: ', <recipients>);

   utl_smtp.open_data(l_conn);

   utl_smtp.write_data('Date: ' || l_date);
   utl_smtp.write_data('From: ' || <sender>);
   utl_smtp.write_data('Subject: ' || nvl(<subject>, '(No Subject)'));
   utl_smtp.write_data('X-Mailer: ' || <mailer_id>);

   utl_smtp.write_data(l_to_list);

   utl_smtp.write_data(l_conn, '' || l_crlf);
   utl_smtp.write_data(l_conn, <msg>);
   utl_smtp.close_data(l_conn);
   utl_smtp.quit(l_conn);

end; 
```

# security - Facebook iFrames 和 XFS 风险

> ID：14398046
> 
> 赞同：1
> 
> 时间：2013-01-18T11:32:00.817
> 
> 标签：security, iframe, xss, facebook-iframe, iframe-app

我们想为我们的品牌页面做一个 Facebook 应用程序，其中一个表单将从我们拥有的安全域中引入。但我们的财务部门似乎不愿意允许这样做，因为 iFrame 可能会进行“跨框架脚本”攻击。

许多大公司在 FB 内部都有应用程序并正在收集用户数据。我怀疑 FB 会允许任何以这种方式不安全的代码。我正在寻找任何谈论 FB 如何管理此类风险的网站。我们能做些什么来管理这种风险呢？如果我们的内容来自我们自己的安全服务器，那不是真的吗，那么 FB 恰好是我们做事的*地方*，但真正的安全性在于我们吗？

欢迎任何想法来反驳我们财务部门的保留意见，甚至是详细阅读此主题的指针。FB自己在这件事上的帮助很少。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T18:02:01.650

[跨框架脚本](https://www.owasp.org/index.php/Cross_Frame_Scripting)是一种利用跨站点脚本 (XSS) 漏洞的方法。如果您的 Web 应用程序已经过测试并发现不受 XSS 漏洞的影响，那么跨框架脚本就不是问题。

您可能想阅读有关[同源策略以及它如何处理 iframe](http://code.google.com/p/browsersec/wiki/Part2#Origin_inheritance_rules)的信息。附带说明一下，XSS 对攻击者很有用，因为它允许他们绕过同源策略。

对于允许 iframe 内容的网站，您不必担心[点击劫持](http://en.wikipedia.org/wiki/Clickjacking)。如果您不熟悉 XSS 等极其常见的 Web 应用程序漏洞，请务必阅读 OWASP 前 10 名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T18:41:55.190

# c++ - QProgressBar 完成加载后出现无法解释的延迟

> ID：14398050
> 
> 赞同：1
> 
> 时间：2013-01-18T11:32:25.673
> 
> 标签：c++, qt, qprogressbar

我从一个循环（进行一些计算）发出信号，该信号触发位于主 GUI 上的进度条更新，在循环结束后，进度条更新为 100%（进程结束时进度条变为隐藏），但是有延迟，进度条保持在 100%，有时鼠标变为忙碌状态，只有几秒钟后进度条才隐藏（表示延迟结束），循环之后什么都没有，所以我什么都不能想到可以让这个延迟。

*   我应该注意，如果循环计算很轻（意味着不需要进行大量计算），则没有这样的延迟。

发射信号在逻辑层的一个类中，我已经尝试通过包含`<QtGui/QApplication>`到该类中来做一些事情（在我看来这不是正确的做法，因为这是逻辑层，所以它为什么需要 QtGui 库，但我我只测试一些东西），我把下面的代码`qApp->processEvents();`放在循环中，现在事情似乎运行起来了，没有忙碌的鼠标，但仍然存在延迟（当延迟发生时，我可以对 GUI 做出唯一不同的反应，但是有在此延迟结束之前没有更新的结果）。

由于与我的测试`processEvents()`我认为它与线程有关，但如果是这样，我该如何纠正延迟行为，当然如果有人认为它可能是别的东西，请告诉。

一些示例代码：

逻辑层类：

```
#include <QtGui/QApplication>
...

processMethod(...)
{
    Loop(...)
    {
        qApp->processEvents();
        emit processBarSignle(value);
        ...some calculations...
    }
    emit processBarSignle(100);
} 
```

视图层（主窗口）：

```
on_btn_nextProcess_clicked()
{
    m_ui->pBar_process->setVisible(true);
    LogicClass->processMethod(...);
    m_ui->pBar_process->setVisible(false);
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T13:50:29.400

在您的代码示例中，实际上只有一个线程。当`on_btn_nextProcess_clicked()`被调用时，它会显示进度条，然后`processMethod()`在同一个线程中运行。理想情况下，您希望分离 UI 和数据处理逻辑。

在初始化中，创建一个单独的`QThread`，启动它，然后通过调用 logicClassObject->moveToThread([your new thread]) 将您的 LogicClass 对象移动到该线程。然后，`processMethod()`变成一个槽，在MainWindow中创建一个`startProcessing()`信号并将两者连接起来。最后，创建一个`processingDone()`slot in`MainWindow`和一个`finishedProcessing()`slot in`LogicClass`并将它们连接起来。完成所有设置后，您可以将代码更改为以下内容：

```
void LogicClass::processMethod(...)
{
    Loop(...)
    {
        emit processBarSignal(value);
        ...some calculations...
    }
    emit processingDone();
}

void MainWindow::on_btn_nextProcess_clicked()
{
    m_ui->pBar_process->setVisible(true);
    emit startProcessing(...);
}

void MainWindow::finishedProcessing()
{
    m_ui->pBar_process->setVisible(false);
} 
```

每当您从两个单独的线程连接信号和插槽时，都会自动处理多线程。在一个线程中发出信号会导致事件在另一个线程中排队，只有在第二个线程重新获得控制权时才会调用该插槽。

在这种情况下，UI线程会在处理线程中调度一个事件开始处理。然后，处理线程将不断地安排进度条值更新，并最终安排一个事件以在完成后关闭进度条。这两个线程将根据操作系统线程调度程序运行，并且处理不会阻塞 UI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T11:58:33.287

尝试以下操作：

```
#include <QtCore/QCoreApplication>
...

processMethod(...)
{
    Loop(...)
    {
        emit processBarSignle(value);
        QCoreApplication::processEvents();
        ...some calculations...
    }
    emit processBarSignle(100);
    QCoreApplication::processEvents();
} 
```

`processEvents()`是[QCoreApplication](http://qt-project.org/doc/qt-5.0/qtcore/qcoreapplication.html#processEvents)的静态方法，就像只包含库`QCoreApplication`的一部分就足够了`QtCore`。

此外，您应该`processEvents()`在进度条更新后添加，而不是在此之前添加。

请注意，`processEvents()`直到处理完 Qt 事件队列中的每个事件后才会返回。如果有例如一个`Cancel`按钮，您将不得不检查用户是否真的在您每次调用时取消了操作`processEvents()`。
您可以通过使用排除特定于用户的事件，例如鼠标单击/按键

```
QCoreApplication::processEvents( QEventLoop::ExcludeUserInputEvents ) 
```

但这将不允许在循环处于活动状态时单击任何内容（例如取消按钮）。

作为进一步的说明：它应该被称为“processBarSingle **”** ;-)

* * *

澄清线程等：

您的整个循环以及任何鼠标点击等都仅在一个线程中执行。如果您调用`emit()`，`slot`与之连接的 会`signal`立即执行（*除非该插槽实际上在不同的线程中*）。与此同时，循环不会继续！

插槽完成后，您的循环将继续。在我的示例中，这意味着`processEvents()`将被调用。现在，如果您的插槽更新了进度条或执行了其他任何导致重绘的操作，则事件队列中将出现重绘事件，并且现在将发生重绘。
如果您`processEvents()`在调用您的插槽之前执行，则此时将没有可以处理的重绘事件。

`processEvents()`再一次，循环在完全完成之前不会继续。处理完所有未决事件后，循环继续进行您的计算。

# android - 如何使用 ndk8 在 Windows 上为 Android 构建 Openssl？

> ID：14398053
> 
> 赞同：6
> 
> 时间：2013-01-18T11:32:38.297
> 
> 标签：android, windows, build, android-ndk, openssl

我尝试下载[OpenSSL-Android](https://github.com/guardianproject/openssl-android#readme)。然后运行 ​​ndk-build，在这种情况下是 ndk8c。

我得到错误：

```
process_begin: CreateProcess(NULL, pwd, ...) failed.
d:/Development/android/android-ndk-r8d/build/gmsl/__gmsl:512: *** non-numeric second argument to `wordlist' function: ''.  Stop. 
```

[当我按照此处](https://stackoverflow.com/questions/10285242/openssl-using-androids-ndk-problems/10295653#10295653)所述对 __gsml 应用修复时

我得到错误：

```
Android NDK: Your APP_BUILD_SCRIPT points to an unknown file: /Android.mk
d:/Development/android/android-ndk-r8c/build/core/add-application.mk:165: *** Android NDK: Aborting...    .  Stop. 
```

或者有没有我可以下载的二进制文件？我基本上只需要 libcrypto.so。

这是我正在使用的 Android.mk：

```
LOCAL_PATH := $(call my-dir)

subdirs := $(addprefix $(LOCAL_PATH)/,$(addsuffix /Android.mk, \
        crypto \
        ssl \
        apps \
    ))

include $(subdirs) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-26T14:30:51.307

1.) 正如 Bad Design 正确指出的那样，__gsml 错误由以下 AndroidManifest.xml 修复

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.evotegra.aCoDriver"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="14"
          android:targetSdkVersion="17"
          android:maxSdkVersion="17" />

</manifest> 
```

2.) 错误：

```
Android NDK: Your APP_BUILD_SCRIPT points to an unknown file: /Android.mk 
```

是线路造成的

```
APP_BUILD_SCRIPT := $(APP_PROJECT_PATH)/Android.mk 
```

在 jni/**应用程序**.mk 中。在 Windows 上，变量 $APP_PROJECT_PATH 未设置，因此它正在根目录中查找 Android.mk。

这可以通过将文件 jni/ **Application.mk**更改为以下内容来解决：

```
LOCAL_PATH := $(call my-dir)
NDK_TOOLCHAIN_VERSION=4.4.3
APP_PROJECT_PATH := $(shell pwd)
APP_BUILD_SCRIPT := $(LOCAL_PATH)/../Android.mk 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-25T21:32:13.433

如果运行**ndk-build**后出现以下错误：

```
android-ndk-r8d/build/gmsl/__gmsl:512: *** non-numeric second argument to `wordlist' function: ''.  Stop. 
```

您应该在 AndroidManifest.xml 文件中至少添加“android:minSdkVersion”：

```
<uses-sdk android:minSdkVersion="14"
          android:targetSdkVersion="17"
          android:maxSdkVersion="17" /> 
```

如果你想修复第二个错误，我认为你应该从“/Android.mk”中删除前导“/”`,$(addsuffix /Android.mk`

编辑：在我将 AndroidManifest.xml 文件更改为如下内容后，我尝试从您链接的 Github 页面构建 Android 项目的 OpenSSL 库，并且它工作正常：

注意：我在GNU/Linux 发行版上使用**android-ndk-r8d** ，并从项目的根目录运行**ndk-build 。**

您不必删除前导的“/”。

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.jp.algi"
      android:versionCode="1"
      android:versionName="1.0">

      <uses-sdk android:minSdkVersion="14"
          android:targetSdkVersion="17"
          android:maxSdkVersion="17" />

    <application android:label="@string/app_name" android:icon="@drawable/ic_launcher">
        <activity android:name="MyJpAndroidAppActivity"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-15T07:58:21.130

我使用了命令 dos2unix AndroidManifest.xml，它为我清除了错误。我希望这会有所帮助

# c# - 请向我解释一下这个 BackgroundWorker 事件

> ID：14398057
> 
> 赞同：3
> 
> 时间：2013-01-18T11:32:59.893
> 
> 标签：c#, winforms

我正在尝试使用 BackgroundWorker，并尝试根据事件通知我的主线程。这些东西对我来说都是新的，想问一下，如果我做得很好。

我通过以下方式简化了我的一个winforms问题：（它只有一个按钮，当我按下它时在另一个线程中计数到十）

```
public partial class Form1 : Form
{
    public void Subscribe(CountToTen c)
    {
        c.HandleWorkerEvent += new CountToTen.WorkerHandler(OtherThreadFinished);
    }
    private void OtherThreadFinished(CountToTen c, EventArgs e)
    {
        Debug.WriteLine("I'm ready !!!");
    }

    public Form1()
    {
        InitializeComponent();
    }

    private void btn_do_Click(object sender, EventArgs e)
    {
        CountToTen newThread = new CountToTen();
        Subscribe(newThread);
        newThread.StartCountingAndReportIfFinished();
    }
} 
```

CountToTen 类：

```
public class CountToTen
{

    public event WorkerHandler HandleWorkerEvent;
    public EventArgs e;
    public delegate void WorkerHandler(CountToTen c, EventArgs e);
    public void StartCountingAndReportIfFinished()
    {
        BackgroundWorker worker = new BackgroundWorker();

        worker.DoWork += delegate(object s, DoWorkEventArgs args)
        {
            for (int i = 1; i <= 10; i++)
            {
                Thread.Sleep(300);
                Debug.WriteLine("Counting :" + i.ToString());

            }
        };

        worker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(delegate(object o, RunWorkerCompletedEventArgs args)
            {
                Debug.WriteLine("Fromt Thread2 : I am finished!");
                if (HandleWorkerEvent != null)
                {
                    HandleWorkerEvent(this, e);
                }
            });

        worker.RunWorkerAsync();
        worker.Dispose();
    }
} 
```

我试图在 BW 完成后创建一个事件，并在我的主窗体中订阅此事件。它工作正常，但是，我真的不明白这一行发生了什么：

```
worker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(delegate(object o, RunWorkerCompletedEventArgs args)
            {
                Debug.WriteLine("Fromt Thread2 : I am finished!");
                if (HandleWorkerEvent != null)
                {
                    HandleWorkerEvent(this, e);
                }
            }); 
```

我不是在这里为我的 BW 创建一个事件，当它完成后，然后为主线程调用另一个？这不是矫枉过正吗？我也可以直接订阅 RunWorkerCompleteEventHandler 吗？

我这里有点困惑，请初学者赐教。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T12:12:42.597

这是对 BackgroundWorker 的 RunWorkerCompleted 事件的订阅。您可以使用匿名方法或命名方法来执行此操作。您也可以通过这种方式删除委托类型声明：

```
worker.RunWorkerCompleted += (o, args) => 
{
    // raise HandleWorkerEvent if there is any subscriber exists
    if (HandleWorkerEvent != null)    
        HandleWorkerEvent(this, e);

    worker.Dispose();
}; 
```

使用命名方法，这看起来像

```
worker.RunWorkerCompleted += Worker_RunWorkerCompleted; 
```

处理程序：

```
void Worker_RunWorkerCompleted(object o, RunWorkerCompletedEventArgs args)
{
    if (HandleWorkerEvent != null)    
        HandleWorkerEvent(this, e);

    ((BackgroundWorker)o).Dispose();
} 
```

顺便说一句，我认为最好有课，这只会数到十个逻辑。在表单上创建 BackgroundWorker，并在 DoWork 事件处理程序中使用此类。表单也会处理它的所有组件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T11:58:22.923

您可以直接订阅 BackgroundWorker 的 RunWorkerCompleted 事件，但这取决于您的业务逻辑和架构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T12:22:25.137

```
Am I not creating an event here for my BW, when it is finished,
 and then call the another for the main thread? 
```

是的..您正在处理 CountToTen 类中的 BackgroundWorker 事件。显然，根据您的类架构，通过事件通知您的主窗体的唯一方法。

```
 Is it not overkill? Could I subscribe directly to the RunWorkerCompleteEventHandler
  as well? 
```

当然你可以..你的 BackgroundWorker 没有直接暴露给主窗体，否则你可以从那里订阅 RunWorkerCompletedEvent 本身。

**注意：** **您不必调用 Dispose()。**它通过 Component 实现 IDisposable 接口。详情[请看这里](https://stackoverflow.com/questions/2542326/proper-way-to-dispose-of-a-backgroundworker)

## 更新

*   替代方式

    ```
    public partial class Form1 : Form
    {
      private void btn_do_Click(object sender, EventArgs e)
      { 
        CountToTen obj= new CountToTen();
         obj.bw.RunWorkerCompleted += new RunWorkerCompletedEventHandler(bw_RunWorkerCompleted);
         obj.bw.RunWorkerAsync();
       }

       void bw_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e){}       
    }
    class CountToTen 
    {
    public BackgroundWorker bw = new BackgroundWorker();
    public CountToTen()
    {
        bw.DoWork += new DoWorkEventHandler(bw_DoWork);
    }

    void bw_DoWork(object sender, DoWorkEventArgs e)
    {
        //Do your Stuff
    }
    } 
    ```

# android - 如果我们长时间保持设备空闲，应用程序会崩溃

> ID：14398061
> 
> 赞同：-1
> 
> 时间：2013-01-18T11:33:14.283
> 
> 标签：android, crash

如果我打开我的应用程序并**长时间保持设备****空闲**，当我解锁手机/设备时，我的应用程序会**崩溃。**为什么会这样？

 ***** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T11:36:41.697

活动未正确实现生命周期（onPause、onStop、onStart、onResume）。也许您假设您的应用程序一直保留在内存中。

有关更多信息，请参阅[Android 文档](http://developer.android.com/training/basics/activity-lifecycle/index.html)****

# android - 如何使用 Android 模拟器中提供的浏览器连接到互联网

> ID：14398064
> 
> 赞同：0
> 
> 时间：2013-01-18T11:33:23.010
> 
> 标签：android, android-emulator

我下载了 Android SDK 模拟器，但无法在模拟器中提供的库存浏览器中连接到互联网。我的系统已连接到互联网，但我想在模拟器的浏览器中进行测试。

如果我需要更改任何设置，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T11:38:33.737

在模拟器中转到设置 -> 无线和网络 -> 移动网络

然后启用数据启用选项，以便您可以使用互联网

# cruisecontrol.net - opencover 报告生成器通过命令提示符运行，但不通过 ccnet.config

> ID：14398067
> 
> 赞同：0
> 
> 时间：2013-01-18T11:33:57.267
> 
> 标签：cruisecontrol.net, opencover, reportgenerator

当我通过命令提示符运行 opencover 时，它会生成一个 xml，然后我运行报告生成器并在正确的文件夹中创建 html 文档，但是当我强制构建时，这些不会发生，这是正确的方法吗? 这是我的 ccnet.config 中的设置

```
 <!-- Open Cover -->
<tasks>
  <exec>
    <executable>C:\Program Files (x86)\OpenCover\OpenCover.Console.exe</executable>
    <buildargs>-target:"C:\Program Files (x86)\NUnit 2.6.2\bin\nunit-console.exe" -register:user -targetargs:"/nologo /noshadow \"C:\Users\username\Documents\Visual Studio 2010\Projects\WebCrawlerMVC\WebCrawlerMVC.Tests\bin\Debug\WebCrawlerMVC.Tests.dll" -filter:+[WebCrawlerMVC]* -output:coverage.xml </buildargs>
  </exec>
  <!-- Report Generator -->
  <exec>      
    <executeable>C:\Program Files (x86)\ReportGenerator\bin\ReportGenerator.exe</executeable>
    <buildargs>-reports:"C:\Program Files (x86)\OpenCover\coverage.xml" -targetdir:"C:\Program Files (x86)\CruiseControl.NET\server\WebCrawlerMVC\Artifacts\Reports" -reporttypes:XML;HTML</buildargs>
  </exec>
</tasks> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T12:15:59.213

前段时间我创建了一个教程。你在这里找到它：http: [//www.palmmedia.de/Blog/2012/9/27/cruisecontrol-net-integration-of-coverage-reports](http://www.palmmedia.de/Blog/2012/9/27/cruisecontrol-net-integration-of-coverage-reports)

我在您的配置中看到的唯一错误是，您将引号放在了错误的位置。采用

> “-reports:C:\Program Files (x86)\OpenCover\coverage.xml”

代替

> -reports:"C:\Program Files (x86)\OpenCover\coverage.xml"

# c++ - 分段错误：STL MAP 的意外行为

> ID：14398068
> 
> 赞同：0
> 
> 时间：2013-01-18T11:34:02.627
> 
> 标签：c++, map

我在我的代码中使用 STL 映射。其中一个功能是使用全局声明的 MAP，它给出了分段错误。但是，如果我将该 MAP 作为局部变量，它的工作正常。以下功能创建问题。

```
typedef map<int,string> DebugAllocPtrList_t;    
DebugAllocPtrList_t DebugAllocPtrList;    

int g_DebugAllocCount;

void DebugAllocNew(void *x, char *szFile, int iLine)
{        
    char szBuf[512];
    szBuf[0]=0; 
    sprintf(szBuf,"%s line %d", szFile, iLine);

    printf("Memory already allocated");

    DebugAllocPtrList[(int)x] = szBuf; //here it gives fault when declared globally.        
    g_DebugAllocCount++;    
} 
```

如果我独立运行这个函数，它的工作。但是当我把这个函数放到我的实际代码中时，它会给出分段错误。如果我让 **DebugAllocPtrList_t DebugAllocPtrList;** 变量本地然后我也会工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T11:59:48.700

我想将您的代码重写为以下代码，没有混合的 C/C++ 代码，没有全局变量等，更多的 C++ 方式：

```
typedef map<int,string> DebugAllocPtrList_t;    

void incrementCount()
{
  static int g_DebugAllocCount = 0;
  g_DebugAllocCount++;
}

std::string makeString(const std::string& file, int line)
{
  std::stringstream ss;
  ss << file << " line " << line;
  return ss.str();
}

void DebugAllocNew(DebugAllocPtrList_t& ptr_map, int x, const std::string& file, int line)
{  
  std::cout <<"Memory already allocated" <<std::endl;
  ptr_map[x] = makeString(file, line);

  incrementCount();
}

int main()
{  
  DebugAllocPtrList_t t;

  DebugAllocNew(t, "something", 1, 2);
  DebugAllocNew(t, "something", 1, 2);
} 
```

# javascript - 将参数从 MVC 视图传递到使用 jQuery 的操作

> ID：14398076
> 
> 赞同：2
> 
> 时间：2013-01-18T11:34:20.587
> 
> 标签：javascript, jquery, asp.net-mvc, asp.net-mvc-3

我想通过以下 jQuery 代码将参数从视图传递给操作，但传递参数没有成功。我错过了什么吗？

```
$('li').click(function () {  
employeeID = $(this).attr('id');    
window.location.href = '/ApproveWork/GetEmployeeDays/'+employeeID; 
}); 
```

控制器：

```
[HttpGet]
public ActionResult GetEmployeeDays(string userCode)
{
     .....
    return View("GetEmployeeDays", model);
} 
```

从 Global.asax 路由

```
public static void RegisterRoutes(RouteCollection routes)
 {
   routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
   routes.MapRoute(
          "Default", // Route name
          "{controller}/{action}/{id}", // URL with parameters
           new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        );          
  } 
```

PS 我尝试使用 AJAX jQuery 函数，但这并没有返回我在操作中指定的视图。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-18T11:40:01.947

您的 javascript 在查看页面上吗

如果是这样，请使用 Url.Action 帮助器以正常方式构建 url

```
var url = '@Url.Action("Action", "Controller", new {parametername = "REPLACEME"})';
window.location.href = url.Replace('REPLACEME', parameter_value); 
```

**更新以考虑客户端变量** **更新 2：更新错字**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T11:55:13.850

你试过ajax吗？

```
$.ajax({
  url: '@Url.Action("GetEmployeeDays", "ApproveWork")',
  type: 'GET',
  dataType: 'html',
  contentType: 'application/json; charset=utf-8',
  data: { userCode: $(this).attr('id') }
 }) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-18T11:54:40.297

您能否检查您的 Global.asax 文件中的注册路线？

请检查那里的可选变量名称。

假设您使用以下方法注册路线。

```
routes.MapRoute( _
            "Default", _
            "{controller}/{action}/{id}", _
            New With {.controller = "Home", .action = "Index", .id = UrlParameter.Optional} _
        ) 
```

你必须在下面写下你的动作。

```
[HttpGet]
public ActionResult GetEmployeeDays(int id)
{
     .....
    return View("GetEmployeeDays", model);
} 
```

或者

```
[HttpGet]
public ActionResult GetEmployeeDays(string id)
{
     .....
    return View("GetEmployeeDays", model);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-21T11:26:54.363

您不能在`@Url.Action`jquery 的帮助下传递参数。您可以创建包含 url 的初始字符串，然后可以将该字符串传递给`window.location.href`

```
$_BaseUrl="Your application url";

<script>
 Window.location.href = $_BaseUrl + '/Admin/Account/SwitchSuperAdminLogin?UserName=' + user + '&Password=' + pass + '&IndustryId=' + indus;
 </script> 
```

# jquery - 第二个 applyBindings 不会触发

> ID：14398079
> 
> 赞同：0
> 
> 时间：2013-01-18T11:34:38.307
> 
> 标签：jquery, data-binding, input, knockout.js, knockout-2.0

> **可能重复：**
> [KnockoutJS：ko.applyBindings 到部分视图？](https://stackoverflow.com/questions/7342814/knockoutjs-ko-applybindings-to-partial-view)

我使用 jQuery 淘汰赛。作为下面的基本示例的结果，文本`"Planet Earth"`显示正常（因此正确添加了敲除并且有效！），但 `"Planet2 Earth2"`不显示。此外，`alert('alert2');`被解雇，但`alert('alert3');`不是。谁能解释我为什么？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script src="Scripts/jquery-1.9.0.min.js" type="text/javascript"></script>
    <script src="Scripts/knockout-2.2.1.js" type="text/javascript"></script>

<script>
    $(document).ready(function () {
        alert("alert1");

        var viewModel = {
            firstName: ko.observable("Planet"),
            lastName: ko.observable("Earth")
        };
        viewModel.fullName = ko.dependentObservable(function () {
            return viewModel.firstName() + " " + viewModel.lastName();
        });

        alert("alert2");
        ko.applyBindings(viewModel);

        alert('alert3');

        var viewModel2 = {
            firstName2: ko.observable("Planet2"),
            lastName2: ko.observable("Earth2")
        };
        viewModel2.fullName2 = ko.dependentObservable(function () {
            return viewModel2.firstName2() + " " + viewModel2.lastName2();
        });

        ko.applyBindings(viewModel2);
    });
</script>
</head>
<body>

<div style="border:1px solid red;">   
<p>First name: <input data-bind='value: firstName' /></p> 
<p>Last name: <input data-bind='value: lastName' /></p> 
<h2>Hello, <span data-bind='text: fullName'> </span>!</h2>  
</div>

<div style="border:1px solid green;">   
<p>First name: <input data-bind='value: firstName2' /></p> 
<p>Last name: <input data-bind='value: lastName2' /></p> 
<h2>Hello, <span data-bind='text: fullName2'> </span>!</h2>  
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T11:47:33.040

要使其工作，您必须修改 4 行：

申请`id`：

```
<div id="one" style="border:1px solid red;"> 
```

和

```
<div id="two" style="border:1px solid green;"> 
```

并为 applyBindings 使用第二个参数：

```
ko.applyBindings(viewModel,document.getElementById("one")); 
```

和

```
ko.applyBindings(viewModel2,document.getElementById("two")); 
```

# java - ListView 中 CheckedTextView 的侦听器

> ID：14398086
> 
> 赞同：1
> 
> 时间：2013-01-18T11:34:48.833
> 
> 标签：java, android

我创建了一个包含checkedTextView 的简单ListView。

当用户单击 listView 行时，我想添加一个侦听器，

1 - textView 被选中。

2 - 如果列表中有另一个文本视图被选中，则变为未选中。

这是我写到现在的代码：

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        ArrayList<String> mStrings = new ArrayList<String>();
        for(int i=0; i<30; i++) {
            mStrings.add("Item " + i);
        }

        setListAdapter( new MultiAdapter(this, mStrings));

        /* Configure ListView */
        ListView lv = getListView();
        lv.setOnItemClickListener(new ItemClick());
    }

    class ItemClick implements OnItemClickListener {
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {

        }
    }

    private class MultiAdapter extends ArrayAdapter<String> {

        private ArrayList<String> mItems;

        public MultiAdapter(Context context, ArrayList<String> mStrings) {
            super(context, R.layout.list2, mStrings);
            this.mItems = mStrings;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {

            View row;

            if (convertView == null)  {
                LayoutInflater inflater = getLayoutInflater();
                row = inflater.inflate(R.layout.list2, parent, false);
            } else
                row = convertView;

            CheckedTextView txt = (CheckedTextView) row.findViewById(R.id.label);

            txt.setText(mItems.get(position));

            return row;
        }
    } 
```

你能帮我谈谈我需要编码的监听器吗？

我找不到任何可以帮助我的有关 checkedTextView 的教程。如果您知道一些示例代码或教程，请告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T11:51:27.047

如果您只想在任何给定时间内检查最多 1 个，那么您可以执行以下操作：

1.  创建`int checkedItem;`属性。此属性显示当前选中项目的索引。-1 如果没有检查。
2.  在`ItemClick`刚刚设置`checkedItem = position`。并调用`getListAdapter().notifyDataSetChanged()`。
3.  在`getView`添加`txt.setChecked(position == checkedItem)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T12:08:18.380

将此代码粘贴到您的 onCreate 方法中

```
 lv.setItemChecked(yourDefCheckedPos, true);
    lv.setSelection(yourDefCheckedPos); 
```

在监听器中：

```
public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
        parent.setSelection(position);
        ((ListView)parent).setItemChecked(position, true);
    } 
```

# android - 添加“通过点击广告支持我们”安卓应用程序

> ID：14398087
> 
> 赞同：3
> 
> 时间：2013-01-18T11:34:52.280
> 
> 标签：android, admob

我是一名 Android 开发人员已有一段时间了，但我是 admob 的新手……

我有两个问题：

在我的应用程序中放置一条文本是否正确，以通知用户他可以通过单击添加来支持我们？比如“点击添加支持我们！” 否则 admob 政策是错误的，他们将关闭我的帐户。

另一个问题是，当我访问 admob 网络时，我可以让我的应用程序接收来自 admob 网络以外的广告......我也应该启用它们吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T11:45:47.377

不，你不能强迫用户点击添加，或者以任何方式激励他们这样做。看看[这个答案](https://stackoverflow.com/a/13612737/1626878)以获得更多解释。

**申请指南**

*   广告不应放置在非常靠近按钮或用户在与您的应用程序交互时可能不小心点击的任何其他对象的下方或下方。
*   广告不应放置在覆盖或隐藏用户在典型交互期间有兴趣查看的任何区域的位置。广告不应放置在用户会随意点击或将手指放在屏幕上的区域。
*   广告不应放置在“死角”屏幕上。必须有一种方法可以在不点击广告的情况下退出屏幕（例如，“返回”或“菜单”按钮）。否则，应通知用户主页按钮将退出应用程序。

查看[AdMob 发布商指南和政策](http://support.google.com/admob/bin/answer.py?hl=en&answer=1307237)

# file - 如何在VC中从文本文件中读取单词#

> ID：14398089
> 
> 赞同：0
> 
> 时间：2013-01-18T11:35:04.573
> 
> 标签：file, text, dictionary, word, words

我想读取一个文本文件并相互删减单词，例如这是我的文本文件：

asd
asdc
asf
气体
asdf

现在我想读“asd”，然后是“asdc”，然后是“asf”……我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T11:41:18.140

```
List<string> words = new List<string>();
string line;
char[] sep = new char[] { ' ', '\t' };

try
{
    System.IO.StreamReader file = new System.IO.StreamReader("c:\\test.txt");
    while ((line = file.ReadLine()) != null)
    {
        words.AddRange(line.Split(sep, StringSplitOptions.RemoveEmptyEntries));  
    }
    file.Close();
}
catch(Exception ex)
{
    Console.WriteLine(ex.Message);
} 
```

此代码逐行读取文本文件并将每一行分隔为单词（按空格和制表符）。您必须自己处理异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T11:41:39.187

使用 StreamReader 的 ReadLine，您可以像这样逐行读取：

使用系统；使用 System.IO；

类测试{

```
public static void Main() 
{

    try 
    {

        // Create an instance of StreamReader to read from a file.
        // The using statement also closes the StreamReader.
        using (StreamReader sr = new StreamReader("TestFile.txt")) 
        {
            String line;
            // Read and display lines from the file until the end of 
            // the file is reached.
            while ((line = sr.ReadLine()) != null) 
            {
                Console.WriteLine(line);
            }
        }
    }
    catch (Exception e) 
    {
        // Let the user know what went wrong.
        Console.WriteLine("The file could not be read:");
        Console.WriteLine(e.Message);
    }
} 
```

}

# javascript - 我可以将 div 及其内容传递到另一个页面吗

> ID：14398090
> 
> 赞同：1
> 
> 时间：2013-01-18T11:35:06.463
> 
> 标签：javascript

我有一个从循环生成的可点击 div。我正在尝试对其进行设置，以便 onclick 将其自身附加到不同页面上的另一个 div 中。这可能吗。这是我尝试过的。

```
 userDiv.addEventListener("click",
            function () {
                var one = document.getElementById('userDiv');
                var two = document.getElementById('singleUser');
                two.appendChild(one);
                window.open("Createtask.html");
     } 
```

**编辑**这里是所有代码

```
 var theID;
    var theName;
    var thePhoto;
    var len = results.rows.length;
    console.log(len);
    for (var i = 0; i < len; i++) {
        theID = results.rows.item(i).id;
        console.log(theID);
        theName = results.rows.item(i).username;
        var htmlStr = theName;
        console.log(theName);
        thePhoto = results.rows.item(i).imagepath;
        console.log(thePhoto);

        var imageHold = new Image();
        imageHold.src = thePhoto;
        console.log("this is the src:" + imageHold.src);
        var userDiv = document.createElement("div"); //Create the div
        userDiv.innerHTML = htmlStr;
        userDiv.appendChild(imageHold);
        imageHold.width = 100;
        imageHold.height = 100;
        document.getElementById('showUsers').appendChild(userDiv); //append it to the document
        userDiv.style.display = 'block';

        identity = results.rows.item(i).username;
        userDiv.id = identity;
        console.log(identity);
        userDiv.addEventListener("click",

            function () {
                var w = window.open("Createtask.html");
                w.addEventListener("load", function(){
                  var one = document.getElementById('userDiv');
                  var two = w.document.getElementById('singleUser');
                  two.appendChild(one);
                });
    });
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T11:37:21.190

您只需**直接**使用从当前窗口创建的子窗口即可。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-18T14:58:26.580

这是我一直在寻找的解决方案。这给了我一个与人的 userDiv 直接相关的全局变量名称。

```
 userDiv.id=theName;
        userDiv.onclick=(function() {
            window.location.href = 'Createtask.html';
            alert($(this).attr("id"));
            name= $(this).attr("id"); 
```

# .net - 哪个安装程序会安装 Microsoft.Web.Publishing.Tasks.dll？

> ID：14398092
> 
> 赞同：14
> 
> 时间：2013-01-18T11:35:10.737
> 
> 标签：.net, msbuild, installation

我们的构建脚本包含一个使用`Microsoft.Web.Publishing.Tasks.dll`, 在文件夹中的任务

```
$(MSBuildExtensionsPath32)\Microsoft\VisualStudio\v10.0\Web\
```

（其中`$(MSBuildExtensionsPath32)`解析为`C:\Program Files (x86)\MSBuild`）

在一台开发人员机器上，整个`Web`文件夹都丢失了。

哪个安装程序安装`Microsoft.Web.Publishing.Tasks.dll`及其文件夹中的相关文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T13:18:19.423

找到答案...如果您选中**Visual Web Developer**选项`Microsoft.Web.Publishing.Tasks.dll`，则由 Visual Studio 2010 安装程序添加。

 *** * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-06-30T22:09:01.580

对于**Visual Studio 2017**，您必须在**单个组件**选项卡中检查**ASP.NET 和 Web 开发工具。**

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-02T07:54:49.410

对于 Visual Studio 2015，在安装程序中选择此组件：
**Windows and Web Development\Microsoft Web Developer Tools**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-07-22T15:13:31.793

也许我的回答会对某人有所帮助。我正在使用 Jetbrains Rider，对于使用 SlowCheetah 的一种解决方案，我需要安装 VS 才能拥有“Microsoft.Web.Publishing.Tasks.dll”dll。

我的解决方案：从安装了 VS 的某些计算机上复制文件夹 '\tools\MSBuild\Microsoft\VisualStudio\v16.0' 并将其放入骑手工具文件夹 'c:\Program Files\JetBrains\JetBrains Rider 2021.1.4\tools\ MSBuild\Microsoft\VisualStudio\v16.0'

就我而言，一切都开始正常工作。****

# c# - 从客户端程序集加载资源

> ID：14398093
> 
> 赞同：0
> 
> 时间：2013-01-18T11:35:16.233
> 
> 标签：c#, embedded-resource, image-loading

我目前正在创建一个游戏引擎，需要从引用我的库的客户端程序集中的资源中加载图像。我正在使用这段代码。

```
public static Image LoadImageFromResource(string name){
    string asmname = Path.GetFileNameWithoutExtension(Assembly.GetEntryAssembly().Location).Replace('\\', '.').Replace('/', '.');
    MessageBox.Show(asmname);
    MessageBox.Show(asmname + "." + name.Replace('\\', '.').Replace('/', '.'));
/*164*/  return (Image)new Bitmap(Assembly.GetEntryAssembly().GetManifestResourceStream(asmname + "." + name.Replace('\\', '.').Replace('/', '.')));
} 
```

我从客户端测试中调用它`GECS_TEST.exe`

```
/*11*/ Image img = Game.LoadImageFromResource("mario_left.png"); 
```

这些是输出`MessageBox`

> GECS_TEST

> GECS_TEST.mario_left.png

我得到了这个例外

```
System.ArgumentException: Value of 'null' is not valid for 'stream'.
   at System.Drawing.Bitmap..ctor(Stream stream)
   at GECS.Core.Game.LoadImageFromResource(String name) in C:\..\Game.cs:line 164
   at GECS_TEST.Test.Main(String[] args) in c:\..\Test.cs:line 11 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T11:57:26.153

使用[Assembly.GetCallingAssembly()](http://msdn.microsoft.com/library/system.reflection.assembly.getcallingassembly.aspx)而不是[Assembly.GetEntryAssembly()](http://msdn.microsoft.com/library/system.reflection.assembly.getentryassembly.aspx)。

# actionscript-3 - 将外部 SWF 捆绑到单个主 SWF

> ID：14398096
> 
> 赞同：1
> 
> 时间：2013-01-18T11:35:24.800
> 
> 标签：actionscript-3, flash, fla

一位客户要求我将一堆 swf 捆绑到一个主控器中，该主控器可以根据命令加载/播放它们。使用加载器获取外部 swf 非常简单；但是，他们使用的广告服务器不支持多个文件。

我的问题是：是否可以将这些子 swf 捆绑到主文件中，以便它们不再是“外部文件”并且可以为广告服务器提供单个 swf？

将它们导入库不起作用，因为它会剥离脚本（对吧...？）。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T21:33:57.423

不不不不不不不不不不（对所有其他答案/评论/无论如何）！！！！

```
[Embed(source='someswf.swf', mimeType='application/octet-stream')]
public class SomeSWF extends flash.utils.ByteArray {
} 
```

然后：

```
var loader:Loader = new Loader();
// add your listeners as such.
loader.loadBytes(new SomeSWF()); 
```

然后您可以使用标准编译器将您的文件捆绑在一起。这里需要注意的一点是，所有主文件必须有不同的名称，Flash 使用主 sprite 来处理 applicationDomain ——因此，如果你走这条路，请确保以不同的方式命名所有舞台类：

```
class SomeSprite_XXXXXXXX extends Sprite {

   // GENERATE YOURLOADER SWFS HERE

   public SomeSprite_XXXXXXXXXXXX() {

      // load manifest file
      // provide api to the ad to load swfs

   }

} 
```

# ibm-mq - WMQ JNDI 通过身份验证查找

> ID：14398097
> 
> 赞同：4
> 
> 时间：2013-01-18T11:35:26.353
> 
> 标签：ibm-mq

对于以下代码

```
 public class JMSSamplePut 
    {
      private static String initialContextUrl = null;
      private static String connectionFactoryFromJndi = "UM_QMGR_QCF";
      private static String queueFromJndi = "BCUFXW.EXB.ATHENA.FX.IN";
      private static String outString = "A sample text message " +
                                    "from JMSSampleput";
      private static int retryInterval = 10;
      private static int retryCount = 3;
      private static int connStatus = 1;

      /**
       * @param args
       */
      public static void main( String[] args ) 
      {

        // Variables
        Queue                   ioQueue      = null;
        QueueSession            session      = null;
        QueueSender             queueSender  = null;
        QueueConnection         connection   = null;
        QueueConnectionFactory  factory      = null;
        boolean                 transacted   = false;
        int i = 0;

        try { 
          // Instantiate the initial context for JNDI
          String contextFactory ="com.sun.jndi.fscontext.RefFSContextFactory";
          Hashtable environment = new Hashtable();
          environment.put(Context.INITIAL_CONTEXT_FACTORY, contextFactory);
          environment.put(Context.PROVIDER_URL, "file:/c:/jndi"); 
          Context context = new InitialDirContext(environment);
          System.out.println("Initial context found!");

          // Create a Queue ConnectionFactory
          factory = (QueueConnectionFactory) context.lookup(connectionFactoryFromJndi);

    ........... 
```

最后一行失败了

捕获 JMSException：com.ibm.msg.client.jms.DetailedJMSSecurityException：JMSWMQ2013：为 QueueManager 提供的安全身份验证无效，连接模式为“Client”，主机名为“NATMIB1.hostname.net(1414)”。请检查您要连接到链接异常的 QueueManager 上提供的用户名和密码是否正确：com.ibm.mq.MQException: JMSCMQ0001: WebSphere MQ call failed with compcode '2' ('MQCC_FAILED') reason '2035' (' MQRC_NOT_AUTHORIZED'）。完成的

JVM参数

```
-Djavax.net.ssl.keystore=c://keystore//a_dev.jks \
-Djavax.net.ssl.keyStorePassword=******** \
-Djavax.net.ssl.trustStorePassword=******** \
-Djavax.net.ssl.trustStore=c://keystore//cacerts.jks \
-Djavax.net.debug=all 
```

任何指针？为什么是以下行？

为具有连接模式“客户端”和主机名“NATMIB1.hostname.net(1414)”的 QueueManager 提供的安全身份验证无效

看起来 JNDI 代理无法找到 QueueManager 的名称？我在 .bindings 文件中有以下行，队列管理器名称是 NATMIB1

```
UM_QMGR_QCF/RefAddr/3/Content=NATMIB1.xyz.net 
```

提前致谢

桑达尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T03:34:49.923

**如果**您拥有正确的工具，调试 WMQ 安全错误非常简单。首先，根据说明获取[SupportPac MS0P并安装到 WMQ Explorer 中。](http://ibm.co/SupptPacMS0P)如果您没有现代版本的 WMQ Explorer，您可以从[SupportPac MS0T](http://ibm.co/SupptPacMS0P)下载它。

接下来，在 QMgr 上启用授权事件并重新创建错误。

此时，在 WMQ Explorer 中右键单击事件队列并选择 Format Event Messages。这将向您显示错误的所有方面，包括：

1.  生成错误的用户 ID。根据通道设置、退出和客户端设置，使用的 ID 可能不是您所期望的。
2.  进行的 API 调用。在这种情况下可能是 Connect，但有时这也不是您所期望的。例如，IBM JMS 类将始终查询 QMgr 以获取 DLQ 名称，如果您未授予查询权限，则它会失败。
3.  用于调用的确切选项。
4.  发出调用的对象。

一旦知道了错误的这些要素，您就可以确定是不是 ID 本身、渠道、ID 的授权等问题。

* * *

***更新***

针对评论中的问题，要启用授权事件，请使用 MQ Explorer 或 runmqsc，如下所示：

[![命令行版本](../Images/8ba356fe54d22b10e338b646bbd55fdb.png)](https://i.stack.imgur.com/qrDn2.jpg)

对于 MQ Explorer 版本，首先右键单击 QMgr 并选择 Properties。

[![在此处输入图像描述](../Images/1efe70d2de0b99c031f742432db2d653.png)](https://i.stack.imgur.com/1VNha.jpg)

然后在导航面板中选择事件，根据需要设置事件并单击`OK`。

[![在此处输入图像描述](../Images/d13b121e216967b45c3fe9542a72ceee.png)](https://i.stack.imgur.com/yjBNV.jpg)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T13:49:12.223

在本例中，您使用文件系统上下文作为 JNDI 提供者。JMS 对象以平面文件格式存储在 c:/jndi 目录中。完成后，您可以在文本编辑器中查看此文件，虽然不是那么容易阅读，但您将能够看到对象的一些元素。顺便说一句，我建议使用 WMQ Explorer 作为这里选择的管理工具——它可以读取和更新任何 JNDI，包括文件系统上下文。

最后一行是查找名为“UM_QMGR_QCF”的对象。这只是对对象进行查找。它不会连接到 QueueManager 来执行此操作，并且连接工厂对象的创建不会创建回 QueueManager 的连接。

所看到的错误将来自 createConnection 调用。该错误意味着 createConnection 调用中提供的用户 ID/密码不匹配或未通过 QM 上设置的任何安全性进行身份验证。

该错误与 TCP/IP 链接上的 SSL 设置无关。

有关设置 WMQ 安全性的信息，您可以从这个场景开始[http://publib.boulder.ibm.com/infocenter/prodconn/v1r0m0/index.jsp?topic=%2Fcom.ibm.scenarios.wmqwas101.doc%2Ftopics% 2Fscenario_overview.htm](http://publib.boulder.ibm.com/infocenter/prodconn/v1r0m0/index.jsp?topic=%2Fcom.ibm.scenarios.wmqwas101.doc%2Ftopics%2Fscenario_overview.htm)

我建议验证异常的来源——也尝试对从 JNDI 返回的对象执行 System.out.println()。所有 WMQ Admin 对象都将通过内置的 toString() 自行格式化

# c - 如何以编程方式确定将使用哪个源 IP 地址到达给定的目标 IP 地址

> ID：14398099
> 
> 赞同：3
> 
> 时间：2013-01-18T11:35:34.110
> 
> 标签：c, linux, routing, ip, solaris

我有一个嵌入式应用程序，它将部署在许多第三方系统上，我需要它来检查它与之通信的每个目标地址是否使用了确定性和静态源 IP 地址（我知道它将与哪些目标 IP 地址通信）。

第三方必须保持自由，以他们认为合适的方式实施其 IP 路由（同时遵守这些限制），我只需要检查它是否是确定性和静态的，并且理想情况下知道它将是什么。

它是一个 C 应用程序，但可以在 Solaris 或 Linux 上运行。

我想这可能需要询问路由表？

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-04-07T20:36:46.697

它对我的工作方式（在 Windows 和 Linux 机器上）是创建一个 socket `SOCK_DGRAM`，并`connect()`在这个 socket 上调用所需的目标地址。如果调用成功，则调用`getsockname()`以获取通过此套接字发送数据时将使用的本地地址。

有点像这样（基于工作代码，为简洁起见删除了错误检查）：

```
const char * destination_address = "8.8.8.8";
sockaddr_storage Addr = { 0 };
unsigned long addr = inet_addr( destination_address );
( ( struct sockaddr_in * ) &Addr)->sin_addr.s_addr = addr;
( ( struct sockaddr_in * ) &Addr)->sin_family = AF_INET;
( ( struct sockaddr_in * ) &Addr)->sin_port = htons( 9 ); //9 is discard port

int Handle = socket( AF_INET, SOCK_DGRAM, IPPROTO_UDP );
socklen_t AddrLen = sizeof(Addr);
connect( Handle, (sockaddr*)&Addr, AddrLen);
getsockname(Handle, (sockaddr*)&Addr, &AddrLen);
char* source_address = inet_ntoa(((struct sockaddr_in *)&Addr)->sin_addr);

printf( "source address: %s\n", source_address ); 
```

`destination_address`您要到达的地址在哪里，`source_address`应该包含 IP 堆栈选择到达它的地址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T11:54:08.453

我希望我没听错...

您必须说服这些第三方管理员在以太网端口上添加一个额外的 IP（假设只有一个）。在您的 C 程序中，您可以使用 bind() 将您的套接字绑定到该 IP 地址。发送的数据包将以绑定的 IP 作为源地址。我在 Linux 上使用它，但 Solaris 也应该这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T12:44:39.587

我假设我们正在谈论传出连接。

应用程序的 ip 地址`bind()`将是正在使用的源地址。所以它可以完全在应用程序的命令下使用哪个 ip-address。

无论如何，应用程序可以`bind()`通过在调用`connect()`.

* * *

路由**不会**改变源 IP 地址。

另一方面，NAT（网络地址转换）确实改变了源 IP 地址。

# android - 我得到了红色的everywhare Tap Activity

> ID：14398106
> 
> 赞同：0
> 
> 时间：2013-01-18T11:36:05.807
> 
> 标签：android, android-tabhost, android-tabactivity

我在扩展 TapActivity 上遇到问题！似乎我在库中没有这样的东西，当我将其更改为扩展 Activity 时，一切正常，除了 getTapHost(); 我不知道它真的很烦人的问题是什么！

```
 package com.example.eateqadat;

import android.app.TapActivity;
import android.content.Intent;
import android.content.res.Resources;
import android.os.Bundle;
import android.widget.TabHost;
import android.widget.TabHost.TabSpec;

public class main extends TapActivity {
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Resources ressources = getResources(); 
        TabHost tabHost = getTapHost(); 

        // Android tab
        Intent intentabout = new Intent().setClass(main.this, about.class);
        TabSpec tabSpecabout = tabHost
          .newTabSpec("عن البرنامج")
          .setContent(intentabout);

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T11:46:28.227

我想你只是在这里的咒语上犯了一个错误。

确保将它们更改为`TabActivity`and `getTabHost()`..

# android - 如何更新所有应用程序

> ID：14398107
> 
> 赞同：-1
> 
> 时间：2013-01-18T11:36:09.620
> 
> 标签：android

我想用我的应用程序上的一个按钮更新系统上的所有应用程序。我的应用程序可以使用 sudo。我也知道，在 Linux 上，可以使用 sudo 命令更新系统。那么，是否可以一键更新系统上的所有应用程序？如果是，如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T11:40:59.507

```
sudo su apt-get update 

sudo su apt-get upgrade 
```

尝试这两个，以便您的系统可以轻松更新。

# swing - JPA 桌面应用程序

> ID：14398108
> 
> 赞同：2
> 
> 时间：2013-01-18T11:36:23.780
> 
> 标签：swing, jpa, jndi

我正在使用 JPA 开发 Java SWING 应用程序，我在 JPA 和 Java EE 方面有很多经验，但在这种情况下，我想在运行时修改“persistence.xml”值。这可以在应用服务器上使用 JNDI 在 Java EE 中完成，但在 Swing 应用程序中我没有找到任何解决方案

注意：persistence.xml 包含以下属性

```
<properties>
  <property name="javax.persistence.jdbc.url" value="jdbc:mysql://localhost:3306/adlbprod?zeroDateTimeBehavior=convertToNull"/>
  <property name="javax.persistence.jdbc.password" value="123"/>
  <property name="javax.persistence.jdbc.driver" value="com.mysql.jdbc.Driver"/>
  <property name="javax.persistence.jdbc.user" value="root"/>
  <property name="eclipselink.ddl-generation" value="create-tables"/>
</properties> 
```

它的继电器感谢任何人都可以帮助这个..谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T05:29:27.653

谢谢大家，我找到了答案。如何在运行时修改属性{步骤 1 删除要动态加载的属性}

```
<properties>
  <property name="javax.persistence.jdbc.url" value="jdbc:mysql://localhost:3306/adlbprod?zeroDateTimeBehavior=convertToNull"/>
  <property name="javax.persistence.jdbc.driver" value="com.mysql.jdbc.Driver"/>
</properties> 
```

{步骤 2 为持有属性值创建一个 Map }

```
 Map pmap = new HashMap();
    pmap.put("javax.persistence.jdbc.password", "123");
    pmap.put("javax.persistence.jdbc.user", "root");
    EntityManagerFactory emf = Persistence.createEntityManagerFactory("JPAQueryPU",pmap);

    try {

        EntityManager em = emf.createEntityManager(pmap);
        Map<String, Object> properties = emf.getProperties();
        System.out.println("pro"+properties);

        Batch ct = new Batch();
        EntityTransaction transaction = em.getTransaction();
        transaction.begin();
        ct.setDescription("Test Batch");

        em.persist(ct);
        transaction.commit();

    } catch (Exception e) {
        e.printStackTrace();

    } 
```

注意：-“JPAQueryPU”是持久性单元的名称

谢谢R+

# c# - 获取两个数据表中的公共行

> ID：14398111
> 
> 赞同：1
> 
> 时间：2013-01-18T11:36:45.510
> 
> 标签：c#, datatable, interaction

我有一个`PromotionRequest`有 4 列的表：

```
| PromoId | PromoType 
----------------------
|   101   |  1   |  
|   101   | 2    |  
|   103   | 3    |  
|   104   | 4    | 
```

我有一个`PromotionResponsek`有 4 列（`PromoId`, `PromoType`, `Value`, `PromoDesc`）的表，其中之一是`PromoId`

我必须找到其值与表`PromotionResponse`的`PromoId`值匹配的所有行。`PromoId``PromotionRequest`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T11:42:08.447

你已经用 SQL 标记了这个，所以如果你想在 SQL 中执行这个，那么你将使用`INNER JOIN`：

```
select rs.promoid,
  rs.promotype,
  rs.value,
  rs.promodesc
from PromotionResponse rs
inner join PromotionRequest pr
  on rs.promoid = pr.promoid 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-18T11:42:12.867

您可以尝试这种 linq 方式在响应表中查找 id，如下所示

```
List<int> ids = requesttable.AsEnumerable()
               .Select(r => (int) r["Id"])
               .ToList();

var query = from item in responsetable.AsEnumerable()
            where ids.Contains( (int) item["Id"] )
            select item; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T12:03:58.763

```
var matched = from table1 in PromotionRequest.AsEnumerable()
               join table2 in PromotionResponse .AsEnumerable() on
               table1.Field<string>("PromoId ") equals table2.Field<string>("PromoId ")
               where table1.Field<string>("PromoId ") == table2.Field<string>("PromoId ")
               select table2;
if (matched.Any())
 {
 } 
```

# html - 全宽边框线和透明标志越过

> ID：14398115
> 
> 赞同：1
> 
> 时间：2013-01-18T11:37:01.713
> 
> 标签：html, css, layout

我认为通过添加我在这里尝试做的图像将是最好的。

我需要的是有一条线（对用户来说只是一个视觉上的东西）来分隔标题 div 和内容 div，但同时徽标应该就在这条线上。

当我添加`border-bottom: 5px solid #ff0000;`时，`header_wrap`显然该线在透明徽标中变得可见，因此看起来徽标被划线了！这是我唯一遇到的问题。

有什么方法可以做我需要的吗？

徽标的背景必须**是**透明的，因为标题和页面正文将以图像作为背景。

提前致谢

![我需要的结果是这个](../Images/3f6d78aedae0636ea0d3831f1cedbac6.png)

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <style>
        *
        {
            margin:0px;
            padding:0px;
        }

        /*** HEADER *************************************************************/

        #header_wrap
        {
            float: left;
            width: 100%;
            height: 115px;
            position:fixed;
            top:0;
            z-index:1;
            border-bottom: 8px solid #e61923;
        }
        #header_centered_content
        {
            width: 850px;
            height: 115px;
            margin: 0 auto 0;
            position: relative;
        }
        #logo
        {
            width: 229px;
            height: 49px;
            position: absolute;
            left: 0px;
            top: 76px;
            background-image:url(images/logo-top.png);
        }

        /*** BODY *************************************************************/

        #body_wrap
        {
            float:left;
            width:100%;
            height:355px;
            margin-top:150px;
        }

        #body_centered_content
        {
            width: 850px;
            margin: 0 auto 0;
            position: relative;
        }   
    </style>
</head>

<body>

    <div id="header_wrap">
        <div id="header_centered_content">
            <div id="logo"></div>
        </div>
    </div>

    <div id="body_wrap">
        <div id="body_centered_content">
            A lot of TEXT !!!
        </div>
    </div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T11:50:01.627

用于`position:absolute`将`divs`一个放在另一个上。

并将背景颜色添加为白色到包含徽标图像的 div。

**HTML**

```
<div id="header_wrap">
        <div id="header_centered_content">
          &nbsp;
        </div>
   <div class="logo"><img src="http://redframe.com/mediakit/horz/black_bg/Redframe_Logo_Black_100.png" /></div>
    </div>

    <div id="body_wrap">
        <div id="body_centered_content">
            A lot of TEXT !!!
        </div>
    </div> 
```

**CSS**

```
#header_wrap{width:100%; position:relative; height:150px; border:green solid 1px}
#header_centered_content{position:absolute; top:41%; border-bottom:5px solid #ff0000; height:5px; width:100%}
.logo{position:absolute; top:38%; left:40%; background:#fff} 
```

**[演示](http://jsfiddle.net/YNJst/1/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T11:41:12.567

任何一个：

1：重新创建白色背景的标志

2：将logo放入一个白色背景的容器中，例如另一个div

3：如果你有logo作为div的背景图片，也将背景颜色设置为白色。

以上所有使用：“背景颜色：白色；” 或背景颜色：#ffffff；"

# javascript - 需要 Underscore.js 知识

> ID：14398116
> 
> 赞同：0
> 
> 时间：2013-01-18T11:37:13.520
> 
> 标签：javascript, underscore.js

我最近一直在通过 underscore.js。我必须在 result() 中发送参数

```
 result_.result(object, property) 
```

这是我的代码：

```
 var template = _.template($('#item-template').html());
            var templateData = {
             listTitle: "Olympic Volleyball Players",
             listItems: [
             {
                 name: "Misty May-Treanor",
                 hasOlympicGold: true,
                 links : "http://www.facebook.com"
             },
             {
                 name: "Kerri Walsh Jennings",
                 hasOlympicGold: true
             },
             {
                 name: "Jennifer Kessy",
                 hasOlympicGold: false
             },
             {
                 name: "April Ross",
                 hasOlympicGold: false
             }
             ]
         };
         var test_var = {name:'hello', func: test_func}
         var test_func = function(one, two){return one+two;}
            $('#target').append(template(templateData)); 
```

问题是我不能用参数（一，二）调用函数 test_func 无论如何都要用它的参数执行函数吗？

这是模板：

```
 <script type="text/html" id="item-template">
                <h2 class="hello"><%= listTitle %></h2>
                <% _.each(listItems, function(value, key, list){%>
                <% if(value.hasOlympicGold){ %>
                <% if(value.links !== undefined){ %>
                <li>Name: <a href="<%= value.links %>"><%=value.name%></a></li>
                <% } else {%>
                <li>Name: <%=value.name%></li>
                <%= _.result(test_var,'func')%>
                <% } %>
                <% } %>
                <% }) %>
                </script> 
```

应该做什么？请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T14:31:05.137

将值添加到您的模板数据中。范围在 with 语句中执行，因此这些变量对函数的范围不可见。

```
var templateData = {
    test_var : test_var,
    test_func : test_func,
    listTitle: ...
} 
```

[http://jsfiddle.net/F38dg/](http://jsfiddle.net/F38dg/)

# javascript - 如何检查我的代码是否在 NodeJs 中运行？

> ID：14398117
> 
> 赞同：1
> 
> 时间：2013-01-18T11:37:20.090
> 
> 标签：javascript, node.js

我有一段 JavaScript 被设计为在 NodeJS 中运行，否则它会中断（例如，它使用`require()`）。我想在运行时检查它是否在 NodeJS 中，否则会产生明确的错误消息。

我已经看到[这个答案](https://stackoverflow.com/a/13644360/57428)解释了如何检查代码是否在浏览器中运行。但是它不检查是否有 NodeJS。

如何检查我的 JavaScript 是否在 NodeJS 中运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T21:53:24.227

一个防弹解决方案将检查全局`window`对象。在浏览器中是存在的，不能删除。在 node.js 中，它不存在，或者如果存在（因为有人定义了它），它可以被删除。（在node.js中，全局对象被调用`GLOBAL`，可以删除）

执行此操作的函数如下所示：

```
function is_it_nodejs() {
  if (typeof window === 'undefined') return true;

  var backup = window,
      window_can_be_deleted = delete window;
  window = backup; // Restoring from backup

  return window_can_be_deleted;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T11:44:05.810

您可以做的一件事是检查`process`对象是否已定义以及`process.argv`数组的第一个元素是否为节点。

就像是：

```
if(typeof process !== 'undefined' && process.argv[0] === "node") {
    // this is node
} 
```

[文档中的](http://nodejs.org/api/process.html#process_process_argv)更多信息。

# javascript - 重定向到另一个页面时如何保留javascript全局变量

> ID：14398120
> 
> 赞同：1
> 
> 时间：2013-01-18T11:37:21.593
> 
> 标签：javascript

**重定向到另一个页面（在同一个域中**）后是否可以保留我的 javascript 全局变量？

我知道我可以使用 html5 localStorage/sessionStorage 或将其存储在服务器会话状态中（稍后再拉）。但是当使用复杂的或更多的全局变量时，我想知道是否有另一种快速的使用方法......

例如：

```
<html>
   <head>
      <title> first page </title>

      <script type="text/javascript">
          var myGlobal="this is my global variable";
            ...
      </script>
   </head>
   <body>
        ...
       <a href="secondPage.htm" ..> to the second page</a>
   </body>
</html> 
```

在 secondPage.htm 中：

```
<html>
   <head>
      <title> second page </title>

      <script type="text/javascript">
          alert(myGlobal);    //I want it to be :  "this is my global variable";
            ...
      </script>
   </head>
   <body>
       ...
   </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T11:39:17.793

> 重定向到另一个页面（在同一个域中）后是否可以保留我的 javascript 全局变量？

不。

新页面 = 新的执行环境。

> 我知道我可以使用 html5 localStorage/sessionStorage 或将其存储在服务器会话状态中（稍后再拉）。但是当使用复杂的或更多的全局变量时，我想知道是否有另一种快速的使用方法......

这些几乎是您唯一的选择。少量数据可以存储在 cookie 中。

# php - Zend_config 注入字符串

> ID：14398121
> 
> 赞同：1
> 
> 时间：2013-01-18T11:37:29.167
> 
> 标签：php, zend-framework

以以下配置为例：

```
array(
    'key' => 'value',
    'key2' => array(
        'key' => '@@INJECT@@',
        'key2' => 'value'
    ),
    'key3' => '@@INJECT@@'
); 
```

然后将`array`其转换为`Zend_Config`对象

但是我尝试`@@INJECT@@`在转换 Zend_Config 对象后找到一种方法来替换为特定值。

使用 basic `array`，我`array_walk_recursive()`用来执行此任务，但我没有找到`Zend_Config`object （而且我不想将`Zend_Config`object 转换为`array`）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T12:14:40.303

您可以滚动自己的递归walker，如下所示：

```
function configWalkRecursive(Zend_Config $config, $callback)
{
    foreach ($config as $key => $item) {
        if ($item instanceof Zend_Config) {
            // recurse into child Zend_Config objects
            configWalkRecursive($item, $callback);
        } else {
            // run the callback against the element
            $callback($key, $item, $config);
        }
    }
} 
```

这遍历 Zend_Config 中的元素，如果找到另一个 Zend_Config 则递归，否则将当前项传递给回调函数。

然后，对于您的回调，您可以执行以下操作来测试项目并根据需要进行替换：

```
$array = array(
    'key' => 'value',
    'key2' => array(
        'key' => '@@INJECT@@',
        'key2' => 'value'
    ),
    'key3' => '@@INJECT@@'
);

$config = new Zend_Config($array, true);

print_r($config);

configWalkRecursive($config, function($key, $item, $configObject) {
    if ('@@INJECT@@' === $item) {
        $configObject->$key = 'somevalue';
    }
);

print_r($config); 
```

输出如下所示：

```
Zend_Config Object
(
    [_allowModifications:protected] => 1
    [_index:protected] => 0
    [_count:protected] => 3
    [_data:protected] => Array
        (
            [key] => value
            [key2] => Zend_Config Object
                (
                    [_allowModifications:protected] => 1
                    [_index:protected] => 0
                    [_count:protected] => 2
                    [_data:protected] => Array
                        (
                            [key] => @@INJECT@@
                            [key2] => value
                        )

                    [_skipNextIteration:protected] => 
                    [_loadedSection:protected] => 
                    [_extends:protected] => Array
                        (
                        )

                    [_loadFileErrorStr:protected] => 
                )

            [key3] => @@INJECT@@
        )

    [_skipNextIteration:protected] => 
    [_loadedSection:protected] => 
    [_extends:protected] => Array
        (
        )

    [_loadFileErrorStr:protected] => 
)
Zend_Config Object
(
    [_allowModifications:protected] => 1
    [_index:protected] => 3
    [_count:protected] => 3
    [_data:protected] => Array
        (
            [key] => value
            [key2] => Zend_Config Object
                (
                    [_allowModifications:protected] => 1
                    [_index:protected] => 2
                    [_count:protected] => 2
                    [_data:protected] => Array
                        (
                            [key] => somevalue
                            [key2] => value
                        )

                    [_skipNextIteration:protected] => 
                    [_loadedSection:protected] => 
                    [_extends:protected] => Array
                        (
                        )

                    [_loadFileErrorStr:protected] => 
                )

            [key3] => somevalue
        )

    [_skipNextIteration:protected] => 
    [_loadedSection:protected] => 
    [_extends:protected] => Array
        (
        )

    [_loadFileErrorStr:protected] => 
) 
```

# google-app-engine - Extjs 在谷歌应用引擎中不起作用

> ID：14398122
> 
> 赞同：2
> 
> 时间：2013-01-18T11:37:31.963
> 
> 标签：google-app-engine, spring-mvc, extjs, extjs4.1

我正在尝试在视图中使用 spring 和 extjs 开发一个谷歌应用引擎应用程序。我已经成功设置了 spring-mvc。这很简单，我有一个主页视图 webapps/WEB-INF/views/home.jsp，我已将 webapps/resources/ 映射为 /resources。我已将 Extjs-4.1 js 库复制到 webapps/resources/extjs。我知道映射正在工作，因为我能够导航到资源，在地址字段中写入完整路径。

我的 home.jsp 很简单，在 header 中包含 ext-all-debug.js 和 ext-all.css：

```
<script type="text/javascript" src="resources/extjs/extjs-all.js"> 
```

我知道路径是正确的，因为我可以在浏览器中加载它，并在地址字段中粘贴地址。

问题是它不起作用。我的体内有一个脚本可以打开一个 extjs 警报，但它永远不会被执行。我在萤火虫中放了一个断点，它永远不会到达那里，我在控制台中也没有任何错误。就像它忽略了脚本标签一样。

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T12:00:44.030

路径`resources/..`是相对于文档的路径。使用前导斜杠使其相对于根文件夹：`/resources/..`

# linq - EF：有没有办法强制 Linq 使用 UNION 而不是 UNION ALL

> ID：14398126
> 
> 赞同：4
> 
> 时间：2013-01-18T11:37:43.617
> 
> 标签：linq, entity-framework

我将 Linq 与实体框架一起使用。

```
GetSet1<T>().Union(GetSet2<T>()) 
```

GetSetX 返回 IQueryable。

生成的 SQL 是 UNION ALL。但我知道 UNION 是实现我的目标的好方法。其实我的解决方法是：

```
GetSet1<T>().Union(GetSet2<T>()).Distinct() 
```

在这种情况下，生成的 sql 如下：

```
select distinct Field...
from (
    select distinct Field...
    union all
    select distinct Field...
) unionall 
```

我知道（因为这是人们认为的方式）

```
select Field...
union
select Field... 
```

是最好的查询。那么有没有办法（我不能（实际上找不到）让 EntityFramework 使用 UNION 而不是 UNION ALL ？

==========

1：添加`<T>`更精确

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-18T11:45:45.867

该`Union()`方法应该返回没有重复的结果。根据查询，EF 将生成`UNION ALL`with`DISTINCT`或 just `UNION`，因此您的显式`Distinct()`不是必需的。的 Linq 等价物`UNION ALL`是`Concat()`.

除此之外，EF 有为查询生成低效 SQL 的历史。如果可以，您应该使用 EF 5.0，它极大地改进了查询 SQL 的生成。

# android - RTC_WAKEUP 不工作

> ID：14398127
> 
> 赞同：3
> 
> 时间：2013-01-18T11:37:45.223
> 
> 标签：android, broadcastreceiver

目前我正在开发一个广播接收器应用程序，我正在制作一个警报，在我们输入秒数后应该显示一条消息。我使用了 RTC_WAKEUP，这意味着它应该在设备打开时显示消息，并且应该打开设备，然后在设备关闭时显示消息。我的问题是它 RTC_WAKEUP 不在我的设备上，但在设备打开时它工作正常。我正在粘贴我的应用程序的代码。在我的应用程序中有两个类。

**主要活动**

```
public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    public void startAlert(View view) {
        EditText text = (EditText) findViewById(R.id.time);
        int i = Integer.parseInt(text.getText().toString());
        Intent intent = new Intent(this, MyBroadcastReceiver.class);
        PendingIntent pendingIntent = PendingIntent.getBroadcast(this.getApplicationContext(), 23432424, intent, 0);
        AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);
        alarmManager.set(AlarmManager.RTC_WAKEUP, System.currentTimeMillis()
                + (i * 1000), pendingIntent);
        Toast.makeText(this, "Alarm set in " + i + " seconds",
                Toast.LENGTH_LONG).show();
    }
} 
```

另一个是

**我的广播接收器**

```
 public class MyBroadcastReceiver extends BroadcastReceiver {
      @Override
      public void onReceive(Context context, Intent intent) {
        Toast.makeText(context, "Jaago Mohan Pyarreee!!!!.",
            Toast.LENGTH_LONG).show();
      }
    } 
```

**显现**

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.broadcastreceiver"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />
    <uses-permission android:name="android.permission.VIBRATE"/>
    <uses-permission android:name="android.permission.WAKE_LOCK" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
         <receiver android:name=".MyBroadcastReceiver" >
        </receiver>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T12:41:12.320

RTC_WAKEUP 不会在屏幕上切换，它所做的只是唤醒你的 cpu，这样你的工作就完成了。要打开屏幕，您需要获取完整的唤醒锁。

```
PowerManager pm = (PowerManager)mContext.getSystemService(Context.POWER_SERVICE);
 PowerManager.WakeLock wl = pm.newWakeLock(PowerManager.SCREEN_DIM_WAKE_LOCK
                                      | PowerManager.ON_AFTER_RELEASE,
                                      "wakeup");
 wl.acquire();
 // ... do work...
//show toask
 wl.release(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T11:56:43.743

您的清单中是否有许可？

```
<uses-permission android:name="android.permission.WAKE_LOCK" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T12:26:32.197

修复您的清单。代替

```
<receiver android:name="MyBroadcastReceiver" > 
```

你需要：

```
<receiver android:name=".MyBroadcastReceiver" > 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-22T06:49:28.407

检查了谷歌 DeskClock 应用程序：com.android.deskclock.alarms.AlarmStateManager （它是一个广播接收器）

在其 onReceive 函数中使用了 goAsync()：

```
@Override
public void onReceive(final Context context, final Intent intent) {
    final PendingResult result = goAsync();
    final PowerManager.WakeLock wl = AlarmAlertWakeLock.createPartialWakeLock(context);
    wl.acquire();
    AsyncHandler.post(new Runnable() {
        @Override
        public void run() {
            handleIntent(context, intent);
            result.finish();
            wl.release();
        }
    });
} 
```

你应该试一试。

# regex - 使用 Reg Exp 顺序重命名“x+2”

> ID：14398134
> 
> 赞同：-1
> 
> 时间：2013-01-18T11:37:58.897
> 
> 标签：regex

我有一批带有模式的文件

```
AB 001 CD.txt
AB 002 FG.txt
AB 003 ID.txt ... 
```

其中前 2 个字符是恒定的，而后 2 个字符都是不同的。

我想保持第一个和最后两个字符不变，只需将中间的数字更改为（xxx + 2）。

```
AB 001 CD.txt -> AB 003 DC.txt
AB 002 FG.txt -> AB 004 FG.txt 
```

我是正则表达式的新手，所以到目前为止我能做的最好的就是找到带有 [0-9] 的数字，但我需要替换模式。

请注意，我只是尝试使用名为“RegExr”的应用程序来测试它以找到替换匹配项。不确定这对正则表达式是否可行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T11:41:51.240

要匹配文件名，您可以使用以下正则表达式：

```
^AB (\d{3}) .*$ 
```

但是，您不能仅用正则表达式替换数字部分。您必须使用为您正在使用的语言指定的一些功能。

从现在开始，您必须获得第一个匹配的组，将其转换为整数，增加 2，在 value 的左侧添加缺失的零并替换为第一个组中提到的这个字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T11:42:27.370

这对于正则表达式来说真的不是一个好工作——你不能用正则表达式来计算。因此，数值操作受到严重限制。恐怕正则表达式不适合这项工作。但是，您可以做的是使用回调（取决于您使用的语言），类似于以下内容（伪代码，取决于您使用的语言）：

```
result = regex_replace_callback('^(\w\w) (\d+) (\w\w).txt)$',
                                increment_match,
                                your_string)

function increment_match(match):
    return match[1] + " " + (int(match[2]) + 2) + " " + match[3] 
```

# asp.net-mvc-3 - mvc 3中的Proplem视图类别

> ID：14398141
> 
> 赞同：1
> 
> 时间：2013-01-18T11:38:28.253
> 
> 标签：asp.net-mvc-3

我有 1 个项目名称 MVC1

我有以下 2 节课：

```
public class category
{
   public int ID {get;set;}
   public string Name {get;set;}
}

public class detail
{
   public int Id {get;set;}
   public string Name {get;set;}
   public int CategoryID{get;set;}
} 
```

和 2 个接口

```
 public inteface ICategory

  {

  IList<category> ListCategory();

  }

  public interface IDetail

  {

  IList<Detail> ListDetail();

  } 
```

和 1 模型 RCateory 从接口 ICategory 继承

```
 public IList<Category> FindAllCategory()

    {

        List<Category> Listcategory_ = new List<Category>();

        foreach (var category in Listcategory)

        {

            Listcategory_.Add(category);

        }

        return Listcategory_;

    } 
```

和 1 模型名称 RDetail 从接口 IDetail 继承

```
 public IList<Detail> FindAllDetail()

    {

        List<Detail> Listdetail_ = new List<Detail>();

        foreach (var detail in Listdetail_)

        {

            Listdetail_.Add(detail);

        }

        return Listdetail_;

    } 
```

和 1 个控制器

```
 DetailController

  private RDetail rDetail = new RDetail();

  private RCategory rCategory = new RCategory();

  public ActionResult ListDetail()

  {

  var detail = rdDetail;

  return View("CreateDetail");

  } 
```

和 1 个视图类型 (cshtml) CreateDetail 容器

```
 @model MVC1.Detail 
```

我如何将类别放入`@Html.DropDownListFor`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T12:26:33.450

与往常一样，在 ASP.NET MVC 应用程序中，您首先创建一个视图模型类，该类将包含您的视图所需的一切：

```
public class MyViewModel
{
    public Detail Detail { get; set; }
    public IEnumerable<SelectListItem> Categories { get; set; }
} 
```

然后让您的控制器操作填充并将此视图模型传递给视图：

```
public ActionResult ListDetail()
{
    var model = new MyViewModel();
    model.Detail = rDetail;
    model.Categories = FindAllCategory().Select(x => 
        Value = x.ID.ToString(),
        Text = x.Name
    );
    return View("CreateDetail", model);
} 
```

最后，您的视图将成为视图模型的强类型，您将能够显示下拉列表：

```
@model MyViewModel
...
@Html.DropDownListFor(x => x.Detail.CategoryID, Model.Categories) 
```

# java - 单个 SMTP 电子邮件中可能有多个发件人

> ID：14398143
> 
> 赞同：0
> 
> 时间：2013-01-18T11:38:41.170
> 
> 标签：java, smtp, jakarta-mail

我们有这些条件：

*   我们使用 Java API 发送 SMTP 电子邮件
*   目前所有系统电子邮件都是从 sysAdmin@xx.com 发送的
*   触发电子邮件的用户，他的电子邮件地址被添加到抄送字段中

我想知道是否可以将用户电子邮件地址移至发件人字段，以便客户会收到一封来自 sysAdmin 和用户的电子邮件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T12:13:28.487

您的问题定义不明确，但在我看来，您应该将用户放入`From:`并添加`Sender: sysAdmin@xx.com`.

如果您的客户使用 Microsoft 客户端，它会显示类似“来自 sysAdmin@xx.com 代表 user@example.com”之类的愚蠢信息，但我想如果他们使用 Microsoft 客户端，您将无法真正获胜。

# javascript - 如何从变量末尾剪切文本直到特定字符？

> ID：14398145
> 
> 赞同：0
> 
> 时间：2013-01-18T11:38:48.513
> 
> 标签：javascript, string

如何从变量末尾剪切文本直到特定字符？

像这样：

```
a_a_a 
```

我想要最后一个“A”并在最后一个“_”处拆分文本：

```
a_a_ | a 
```

然后我想得到 2 个字符串，女巫会是这样的：

```
string A = a_a_
string B = a 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T11:41:44.837

您可以使用[`lastIndexOf`](http://www.w3schools.com/jsref/jsref_lastindexof.asp)获取要搜索的字符的最后一次出现，然后[`substr`](http://www.w3schools.com/jsref/jsref_substr.asp)从该索引中获取字符串

```
var str = "a_a_a";
var startIndex = str.lastIndexOf("_"); //Here we are getting the last index of _ char
var result = str.substr(startIndex); //this will output `_a`
var result = str.substr(startIndex+1); //as we need only `a` we are using `startIndex + 1` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T11:42:43.383

单程;

```
var a = s.substr(0, s.lastIndexOf("_") + 1);
var b = s.substr(a.length); 
```

# java - Zip 中文件名的编码

> ID：14398156
> 
> 赞同：1
> 
> 时间：2013-01-18T11:39:45.960
> 
> 标签：java, file-upload, file-io, zip

在导入多个附件的程序中，用户可以压缩所有需要的文件并一次性上传所有文件。现在，当这些文件中的一个或多个名称中包含外来字符时，就会出现问题。需要明确的是，问题不在于 zip 文件名，而在于 zip 中存在的文件名。

我发现“java.util.zip.ZipInputStream.getNextEntry”正在调用“java.util.zip.ZipInputStream.readLOC”，而后者又调用了“java.util.zip.ZipInputStream.getUTF8String”。

我认为可能的解决方案是将 JVM 系统属性“zip.altEncoding”设置为所需的编码，或者创建“java.util.zip.ZipInputStream”的本地副本并对其进行修改。

任何帮助

# java - 如何从孩子调用父私有方法？

> ID：14398157
> 
> 赞同：18
> 
> 时间：2013-01-18T11:39:54.890
> 
> 标签：java, reflection

```
public class A{
    private int getC(){
        return 0;
    }
}

public class B extends A{
    public static void main(String args[]){
        B = new B();
        //here I need to invoke getC()
    }
} 
```

你能告诉我是否可以通过 Java 中的反射来做 sush 事情？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-18T11:55:58.467

```
class A{

    private void a(){
        System.out.println("private of A called");
    }
}

class B extends A{

    public void callAa(){
        try {
            System.out.println(Arrays.toString(getClass().getSuperclass().getMethods()));
            Method m = getClass().getSuperclass().getDeclaredMethod("a", new Class<?>[]{});
            m.setAccessible(true);
            m.invoke(this, (Object[])null);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

编辑：这是一个安静的旧帖子，但添加了一些建议

## 重新考虑你的设计

调用父级的私有方法，虽然可以通过反射，但不应该这样做。在父类上调用私有方法可能会使类处于无效状态并可能导致意外行为。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-18T11:45:31.520

您可以使用反射来做到这一点，但除非有很好的理由这样做，否则您应该首先重新考虑您的设计。

下面的代码打印 123，即使从外部 A 调用也是如此。

```
public static void main(String[] args) throws Exception {
    Method m = A.class.getDeclaredMethod("getC");
    m.setAccessible(true); //bypasses the private modifier
    int i = (Integer) m.invoke(new A());
    System.out.println("i = " + i); //prints 123
}

public static class A {

    private int getC() {
        return 123;
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-18T11:46:16.053

您应该声明 getc protected。这正是它的用途。

至于反思：是的，这是可能的。不过，您必须在方法对象上调用 setAccessible 。而且风格很糟糕... ;-)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-08-28T15:33:36.763

getDeclaredMethod 只会返回当前类中的私有方法，而不是继承的方法。要实现它，您需要通过 getSuperclass 方法导航继承图。这是一个代码片段

```
 private Method getPrivateMethod(Object currentObject) throws NoSuchMethodException, IllegalAccessException, IllegalArgumentException, InvocationTargetException {
  Class<?> currentClass = currentObject.getClass();
  Method method = null;
  while (currentClass != null && method == null) {
      try {
          method = currentClass.getDeclaredMethod("getC");
      } catch (NoSuchMethodException nsme) {
          // method not present - try super class
          currentClass = currentClass.getSuperclass();
      }
  }
  if (method != null) {
      method.setAccessible(true);
      return method;
  } else {
      throw new NoSuchMethodException();
  } 
```

}

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-18T11:45:40.143

你可以尝试使用反射：

```
 Method getCMethod = A.class.getDeclaredMethod("getC");
    getCMethod.setAccessible(true);
    getCMethod.invoke(new A()); 
```

# javascript - 如何在图像下方添加按钮，是我正确添加元素的方式还是可以做得更好

> ID：14398160
> 
> 赞同：1
> 
> 时间：2013-01-18T11:39:59.857
> 
> 标签：javascript, jquery, html, css

我正在动态附加 html，但无法在图像下方添加按钮（当我启动 div 或 table 时，结束标签会自动关闭）

js函数的相关部分：

```
var fullimage='<li class="picture'+i+'"> <img id='+filename+'  height="100" width="100" src='+this.result + ' /> </li>  '; 
var fullimage=fullimage+'<input type="button" id='+filename+' name="button2"  value="Set as default"> </input>';
$('.pictures').append(fullimage); 
```

HTML

```
<h3>Primary picture</h3>
                    <div id="primary-pic">
                        <p>jpg, png or bmp files <br /> <span>(max 2mb)</span></p>
                        <div class="custom-input-file"> 
```

`

```
 <input type="hidden" name="MAX_FILE_SIZE" value="10000000" />
                            <!--    <input type="file" name="files[]" class="input-file" multiple="multiple" min="1" max"5"/> !-->
                                 <input type="file" name="files[]" multiple onchange="readURL(this);" size="1" class="input-file" />
                                Choose files

                                <body>

                            </form>

                        </div>
                    </div>

                    <div id="more-pics">
                        <ul class="pictures">
                           <li class="picture1"> </li>
                            <li class="picture2">  </li>
                           <li class="picture3"> </li>
                            <li class="picture4">  </li>

                        </ul>

                    </div><!--/#more-pics-->` 
```

可以在此处找到附加 html 的完整 js 函数：

[http://pastebin.com/BJy6FtiU](http://pastebin.com/BJy6FtiU)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T11:52:49.143

我相信你想`LI`在`input`.

你有：

```
<LI> <IMG> </LI> <INPUT> 
```

但是想要：

```
<LI> <IMG><INPUT> </LI> 
```

也不要`var variableName`为同一个变量声明两次。

```
var fullimage='<HTML>';
    fullimage +='<More HTML>"; 
```

# nhibernate - NHibernate - 内存数据库中的 Sqlite - 无法测试映射文件

> ID：14398161
> 
> 赞同：0
> 
> 时间：2013-01-18T11:40:00.927
> 
> 标签：nhibernate, nhibernate-mapping

我想测试我的实体是否可以持久化到数据库中，所以我看到了这篇文章：

[http://www.codethinked.com/nhibernate-20-sqlite-and-in-memory-databases](http://www.codethinked.com/nhibernate-20-sqlite-and-in-memory-databases)

我初始化会话工厂的代码与文章中的代码相同：

```
public class NHibernateInMemoryTestFixtureBase
{
    protected static ISessionFactory sessionFactory;
    protected static Configuration configuration;

    public static void InitalizeSessionFactory(params Assembly[] assemblies)
    {
        if (sessionFactory != null)
            return;

        var properties = new Dictionary<string, string>();
        properties.Add("connection.driver_class", "NHibernate.Driver.SQLite20Driver");
        properties.Add("dialect", "NHibernate.Dialect.SQLiteDialect");
        properties.Add("connection.provider", "NHibernate.Connection.DriverConnectionProvider");
        properties.Add("connection.connection_string", "Data Source=:memory:;Version=3;New=True;");
        properties.Add("connection.release_mode", "on_close");

        configuration = new Configuration();
        configuration.Properties = properties;

        foreach (Assembly assembly in assemblies)
        {
            configuration = configuration.AddAssembly(assembly);
        }
        sessionFactory = configuration.BuildSessionFactory();
    }

    public ISession CreateSession()
    {
        ISession openSession = sessionFactory.OpenSession();
        IDbConnection connection = openSession.Connection;
        new SchemaExport(configuration).Execute(false, true, false, true, connection, null);
        return openSession;
    }
} 
```

这是我的测试：

```
[Test]
public void IWillChangeThisNameLater()
{
    InitalizeSessionFactory(typeof(LogRepository).Assembly);

    var session = this.CreateSession();

    Log log = Log.New("a", "b", "I");

    session.Save(log);
    session.Flush();

    Assert.Greater(log.IDColumn, 0);
} 
```

问题是，我从 log.hbm.xml 中删除了 Log 的“a”属性，并且 session.Save(log) 没有抛出异常或任何东西，它只是工作......

这一定很明显而且很简单，但我不知道为什么会这样，如果没有映射它怎么能保存它，内存数据库是这样工作的吗？那我该如何测试我的映射呢？

我主要做了这个内存测试，以便我可以立即知道有效实体是否无法持久化，当然这将包括映射文件中缺少的属性。

任何想法将不胜感激。

* * *

**编辑：**

按照要求，

日志实体定义：

```
public class Log : DomainBase<Log, ILogRepository<Log>>
{
    private int logId;
    private string tableName;
    private string field;
    private string userLogin;

    protected Log()
    {
    }

    protected Log(string tableName, string field, string userLogin)
    {
        TableName = tableName;
        Field = field;
        UserLogin = userLogin;
    }

    public virtual int LogId { get; set; }
    public virtual string TableName { get; set; }
    public virtual string Field { get; set; }
    public virtual string UserLogin { get; set; }
} 
```

日志映射：

```
<?xml version="1.0" encoding="utf-8"?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2">
  <class name="DomainProject" table="Log" lazy="true">
    <id name="logId" column="ID" type="int">
      <generator class="native" />
    </id>
    <property name="TableName" column="TableName" type="string" />
    <property name="Field" column="Field" type="string" />
    <property name="UserLogin" column="UserLogin" type="string" />
  </class>
</hibernate-mapping> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T12:31:57.603

如果一个类包含映射中未提及的属性，NHibernate 将忽略该属性。

# asp.net - 显示错误来自哪一列

> ID：14398163
> 
> 赞同：0
> 
> 时间：2013-01-18T11:40:12.433
> 
> 标签：asp.net

因此，我在我的 asp.net 项目中使用“excel 数据阅读器”导入了一个 excel 文档，如果其中一列为空，则会引发错误

```
else
{ 
   System.Windows.Forms.MessageBox.Show("UOM column is empty at row");
} 
```

我将如何给出确切的空列，例如。'第 77 行'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T11:50:23.647

如果您使用此链接
[https://gist.github.com/924413/29bd3d648e5a3432387327e64cf1b93a0800bcf4](https://gist.github.com/924413/29bd3d648e5a3432387327e64cf1b93a0800bcf4)
来读取 excel 文件，那么

```
 foreach (DataTable table in result.Tables)
  {
      for (int i = 0; i < table.Rows.Count; i++)
      {
          for (int j = 0; j < table.Columns.Count; j++)
          Console.Write("\"" + table.Rows[i].ItemArray[j] + "\";");
          Console.WriteLine();
       }
   } 
```

然后`i`是行，`j`是列。

# c# - 生成 0 到 9 之间的三个唯一数字列表的最佳方法

> ID：14398165
> 
> 赞同：3
> 
> 时间：2013-01-18T11:40:31.607
> 
> 标签：c#, random, while-loop

基本上都在标题中。这很简单，但我不知道为什么我的 While 循环有时会失败。时不时我会得到一个长度为 2 而不是 3 的列表。

这是我的 C# 代码：

```
public List<int> generateRequiredSecretCode()
{
    List<int> placeHolder = new List<int>();
    Random random = new Random();
    int randomNo = random.Next(0, 10);
    while (!placeHolder.Contains(randomNo) && placeHolder.Count != 3)
    {
        placeHolder.Add(randomNo);
        randomNo = random.Next(0, 10);
    }
    return placeHolder;
} 
```

我的目标总结：我想要一个**长度为 3**的*整数列表，列表*中的每个数字都在 0 到 9 之间并且是**唯一的**

 ***** * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T11:48:35.037

您可以使用整洁的 LINQ 两线

```
var random = new Random();
return Enumerable.Range(0,10).OrderBy(i => random.NextDouble()).Take(3).ToList(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T11:44:47.070

`!placeHolder.Contains(randomNo)`是您的问题，因为如果列表包含 randomNo，则 while 结束。`!placeHolder.Contains(randomNo)`如果像这样在内部检查：

```
while (placeHolder.Count != 3)
{
    if( !placeHolder.Contains(randomNo) )
      placeHolder.Add(randomNo);
    randomNo = random.Next(0, 10);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T11:50:39.050

它有时会失败，因为在极少数情况下，当 Rand.Next 确实向列表中的 thise 返回相同的数字时，`!placeHolder.Contains(randomNo)`将返回 false；false && any = false，所以循环结束。如果你运行它足够长的时间，你最终会得到一个长度为 1 的列表；）

可能的替换：

```
List<int> placeHolder = new List<int>();
Random random = new Random();
int randomNo;
do {
    randomNo = random.Next(0, 10);
    if (!placeHolder.Contains(randomNo) && placeHolder.Count != 3)
    {
         placeHolder.Add(randomNo);
         randomNo = random.Next(0, 10);
    }
} while (placeHolder.Count < 3);
return placeHolder; 
```

[编辑]：这个线程移动得很快......而且Animal的解决方案比我的要好得多:(

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T12:06:56.947

聚会有点晚了，但集合算术看起来很优雅，所以忍不住：

```
private static Random RNG = new Random();

...

public static List<int> RandomNumbers() {
  var numbers = new HashSet<int> { RNG.Next(0, 9), RNG.Next(0, 9), RNG.Next(0, 9) };
  while (numbers.Count < 3) 
  {
    numbers.Add(RNG.Next(0, 9));
  }

  return numbers.ToList();
} 
```****

# git - git stash save 假设文件已更改

> ID：14398166
> 
> 赞同：1
> 
> 时间：2013-01-18T11:40:35.187
> 
> 标签：git, git-stash

我更改了一个跟踪文件。

然后我用`--assume-unchanged`标志标记了文件。

我跑了`git stash save`，但什么也没藏起来。

如何存储保存假设更改的文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T11:48:16.457

我猜你已经跑了

```
git update-index --assume-unchanged <file> 
```

看起来您必须在存储它之前再次将其添加到索引中。

```
git update-index --no-assume-unchanged <file> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T11:46:55.887

您应该在将其标记为“ ”*之前*尝试运行 git stash `--assume-unchanged`。
或者至少`--no-assume-unchanged`在存储之前标记它“”。

（除非您在谈论*两个*不同的文件，并且您的问题是关于将一​​个文件标记为“未更改”并看到*另一个*文件*未被*存储拾取的副作用）。

* * *

请注意，[`git stash`](https://git-scm.com/docs/git-stash)自 2013 年以来已移植到 C，[建议使用 Git 2.24+（2019 年第四季度）](https://stackoverflow.com/a/9816844/6309)。

# java - 此自定义比较方法是否包含逻辑错误

> ID：14398174
> 
> 赞同：1
> 
> 时间：2013-01-18T11:41:01.170
> 
> 标签：java, android, sorting

在一个 android 应用程序中，我有一个位置列表。我需要根据它们与用户位置的距离对它们进行排序。为此，我实现了一个自定义比较器：

```
Collections.sort(houseList, new Comparator<HouseEntity>()
  {
     @Override
     public int compare(HouseEntity house1, HouseEntity house2)
     {
        if(userLocation == null) return 0;
        return (int) (userLocation.distanceTo(house1.location) - userLocation.distanceTo(house2.location));
     }
  }); 
```

它在我所做的所有测试中运行良好。但是，一些用户因以下错误而崩溃：

```
java.lang.IllegalArgumentException: Comparison method violates its general contract! 
```

在阅读了关于 SO 的所有其他相同问题后，我得出结论，当逻辑中可能存在错误时会出现此错误（例如，我们可能同时得到 a>b 和 b>a）。但我找不到任何场景来复制该逻辑错误。

什么情况可能导致此错误？我该如何解决？

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T12:46:19.440

正如**Peter Lawrey**所说，您应该使用`Double.compare(x, y)`or`Float.compare(x, y)`而不是强制转换为 int。这里的解释：

比较器必须是可传递的，即只要 A == B 和 B == C，那么 A == C 也是如此。假设我们有三个点`A`，`B`并且`C`到用户位置的距离为 0.2、0.4 和 1.3。

1.  (int) (0.2 - 0.4) = (int) (-0.2) = 0 =>`A == B`
2.  (int) (0.4 - 1.3) = (int) (-0.9) = 0 =>`B == C`
3.  (int) (0.2 - 1.3) = (int) (-1.1) = -1 =>`A < C`

如您所见，比较器不是传递的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T11:44:32.297

如果`userLocation == null`那么`house1.equals(house2)`应该给真。

# android - 摆脱黑屏

> ID：14398176
> 
> 赞同：0
> 
> 时间：2013-01-18T11:41:07.973
> 
> 标签：android, android-gui

这个问题可能已经被问过很多次了..是的！我正面临所谓的“黑屏问题”。
我的第一个活动是哪个主要活动，在哪个活动中完成了登录，这个活动之后是下一个活动，它是用户帐户的简单摘要报告。
现在，对于这份报告，我获取数据集，对其进行解析并使用它来动态构建表格。小人黑屏出现在这里！！报告，如表中的正确呈现，但在该屏幕上，这个黑色半透明层不断出现。
我尝试了一切，使用处理程序、异步任务、半透明主题，但没有任何帮助！当我的摘要报告加载时，恶棍仍然出现。如果我按下“返回”按钮，它就会消失，并且屏幕看起来很正常，就像它第一次加载时所预期的那样。我无法弄清楚到底出了什么问题，无论是我的编码方法（动态生成表）或者它是一个模拟器问题或什么。

`My emulator details are as follows:`
`CPU:ARM`
`Target: Android 2.3.3`
`skin: WVGA800`
`sd card:1024M`

有人请救救我！！

**编辑：**
在我的第二个活动中，我执行以下操作：

```
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_summary_report);
        ad = new AlertDialog.Builder(this).create();
        boolean is = IsConnectedToNetwork(); 
        if (is == true){
                Handler execWS = new Handler();
                execWS.post(callWS);//Fetch Data via web service and parse it
                if(result != null){
                    Handler genUI = new Handler();
                    genUI.post(createUI);// generate the table based on "result". ie. in a for loop i create textviews and append it to the table layout
                }
            }
        else{
            Error = "Connection Failed. Try Again!";
        }
        if(Error.length() != 0){
        ad.setMessage(Error);
        ad.setTitle("Error..");
            ad.show();
        }
    } 
```

我的第二个活动的 Xml 布局..

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:baselineAligned="false"
    android:gravity="center"
    android:orientation="vertical">

    <TableLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="5dip">
            <ImageView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center_horizontal"
                android:contentDescription="@string/Logo"
                android:src="@drawable/complogo" 
                android:gravity="top"/>
            <TextView
                android:id="@+id/lblLoginInfo"  
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:gravity="center_horizontal"/>
    </TableLayout>

    <TableLayout
        android:id="@+id/tblSummRep"
        android:layout_width="wrap_content"
        android:layout_height="0dp"
        android:layout_weight="4"
        android:padding="5dip">
    </TableLayout>
    <TableLayout
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:padding="5dip">

            <TextView
                android:id="@+id/AppName"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:gravity="center"
                android:text="@string/AppName"
                android:textColor="#ff6600" />

            <TextView
                android:id="@+id/AppVersion"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:gravity="center"
                android:text="@string/AppVersion"
                android:textColor="#ff6600" />

            <TextView
                android:id="@+id/Disclaimer"
                        android:gravity="center"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:text="@string/Disclaimer"                   
                android:textColor="#ff6600" />
    </TableLayout>
</LinearLayout> 
```

我将文本视图附加到“tblSummRep”..

**更新** 我的异步任务类..

```
 private class ShareWork extends AsyncTask<Void, Void, Boolean>{
        ProgressDialog pDlg;
        //String[][] result = null;
        protected void onPreExecute(){
            pDlg.setMessage("Please wait while the Report Loads...");
            pDlg.show();
        }

        @Override
        protected Boolean doInBackground(Void... params) {
            boolean RetVal = false;
            //my fetch code
            return RetVal;
        }

        protected void onPostExecute(Boolean value){
            if(value == true){
                pDlg.setMessage("Please try again later!!");
                pDlg.show();
            }
            else{
                createUI.run();

            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T12:07:21.243

我不知道您所说的“黑屏问题”指的是什么，但您声明您正在获取数据（我猜是从远程服务器获取数据）并且发生了这种情况。这对我来说听起来是关于阻塞 UI 线程的。您在活动的哪个方法中获取数据（可能在 onCreate 中）？您不应该在图形线程上执行耗时的操作，例如查询远程服务器（这可能需要几秒钟）。在这些情况下，始终应使用[AsyncTask 。](http://developer.android.com/reference/android/os/AsyncTask.html)用户应该会收到一些关于后台发生的事情的反馈，因此通常推荐使用 ProgressBar（或至少是微调器）。

[您可以在此处](https://stackoverflow.com/a/7713264/34880)查看如何使用 AsyncTask 解决类似问题。

**更新**

您刚刚发布了您的代码。问题在于（正如我所推测的）这行代码：

```
execWS.post(callWS);//Fetch Data via web service and parse it 
```

我想这是一个 WS 电话。您在这里阻塞了 UI 线程。以与我提供的链接相同的方式创建一个 AsyncTask，并在任务完成后执行其余代码（显示错误或带有数据的动态表）。

您的 AsyncTask 可能看起来像这样（我还没有尝试过）：

```
private class LoadTableTask extends AsyncTask<URL, Integer, Object> {
     protected Object doInBackground(URL... urls) {
         Handler execWS = new Handler();
         execWS.post(urls[0]);//Fetch Data via web service and parse it
         return result;
     }

     protected void onProgressUpdate(Integer... progress) {
         //Not used in your case. It would be a good idea to create an undefined progress dialog in your case
     }

     protected void onPostExecute(Object result) {
         if(result != null){
                Handler genUI = new Handler();
                genUI.post(createUI);// generate the table based on "result". ie. in a   for loop i create textviews and append it to the table layout
         }

     }
 } 
```

您的 onCreate() 方法将被替换为：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_summary_report);
    ad = new AlertDialog.Builder(this).create();
    boolean is = IsConnectedToNetwork(); 
    if (is == true){
            new LoadTableTask().execute(callWS);
        }
    else{
        Error = "Connection Failed. Try Again!";
    }
    if(Error.length() != 0){
    ad.setMessage(Error);
    ad.setTitle("Error..");
        ad.show();
    }
} 
```

# html - HTML5 Canvas 中的自定义字体

> ID：14398177
> 
> 赞同：1
> 
> 时间：2013-01-18T11:41:10.667
> 
> 标签：html, canvas, font-face

我正在使用 Font Awesome 为我的网页提供各种符号。我也想在我的画布上使用其中一个符号，一个齿轮来提供一个设置图标。

Cog 图标的 CSS 定义为（适用于页面的其余部分）

```
content: "\f013";
font-family: "FontAwesome"; 
```

在我的画布上，我使用以下代码，但它只出现 013...我做错了什么？

```
context.fillStyle = "rgba(255, 255, 255, 0.7)";
context.font      = 'FontAwesome';
context.textAlign = 'right';
context.fillText("\f013", counter.x + halfWidth - 10, counter.y - halfWidth +20);
context.textAlign = 'left'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T12:15:36.460

JavaScript 对 Unicode 转义使用不同的语法。`"\uf013"`

# graphics - 使用贝塞尔曲线绘制图形

> ID：14398178
> 
> 赞同：5
> 
> 时间：2013-01-18T11:41:10.700
> 
> 标签：graphics, plot, bezier

我有一系列`(x0,y0)... (xn,yn)`单调点，`x`并希望使用贝塞尔曲线通过这些点绘制“最佳”曲线。这条曲线不应该太“锯齿”（例如类似于连接点），也不能太弯曲（绝对不能“倒退”）。我已经创建了一个原型，但想知道是否有客观的“最佳解决方案”。

我需要找到所有段的控制点`xi,y1 x(i+1)y(i+1)`。我目前对细分的方法（端点除外）`x(i), x(i+1)`是：

*   找到向量`x(i-1)...x(i+1)`，对其进行归一化和缩放`factor * len(i,i+1)`以给出前导控制点的向量
*   找到向量`x(i+2)...x(i)`，对其进行归一化和缩放`factor * len(i,i+1)`以给出尾随控制点的向量。

我尝试过 factor=0.1（太锯齿）、0.33（太弯曲）和 0.20 - 差不多。但是有没有更好的方法（比如说）使二阶和三阶导数尽可能平滑。（我假设这样的算法是在图形包中实现的）？

如果需要，我可以发布伪/代码。这是三个图像（0.1/0.2/0.33）。控制点用直线表示：黑色（尾随）和红色（前导）

![使用因子=0.1](../Images/243c590469333b0057b70e2d0e8e3b66.png)

![使用因子=0.2](../Images/94a026f37dcad291912d5ed8f584484f.png)

![使用因子=0.33](../Images/f8b5fd98006916e1888676d11bff6ac1.png)

这是当前代码。它的目的是在没有-ing的情况下`Y`针对`X`(monotonic `X`) 进行绘图。`close`我已经建立了自己的用于创建 SVG 的库（首选输出）；此代码为每个曲线段（control1、xcontrol2、end）创建三倍的`x,y`in 。`coordArray`开始由最后一次操作（移动或曲线）假设。它是 Java，但应该易于解释（`CurvePrimitive`映射到三次，`"d"`是 SVG 中完整路径的字符串表示形式）。

```
 List<SVGPathPrimitive> primitiveList = new ArrayList<SVGPathPrimitive>();
    primitiveList.add(new MovePrimitive(real2Array.get(0)));
    for(int i = 0; i < real2Array.size()-1; i++) {
        // create path 12
        Real2 p0 = (i == 0) ? null : real2Array.get(i-1);
        Real2 p1 = real2Array.get(i);
        Real2 p2 = real2Array.get(i+1);
        Real2 p3 = (i == real2Array.size()-2) ? null : real2Array.get(i+2);
        Real2Array coordArray = plotSegment(factor, p0, p1, p2, p3);
        SVGPathPrimitive primitive = new CurvePrimitive(coordArray);
        primitiveList.add(primitive);
    }
    String d = SVGPath.constructDString(primitiveList);
    SVGPath path1 = new SVGPath(d);
    svg.appendChild(path1);

/**
 * 
 * @param factor to scale control points by
 * @param p0 previous point (null at start)
 * @param p1 start of segment
 * @param p2 end of segment
 * @param p3 following point (null at end)
 * @return
 */
private Real2Array plotSegment(double factor, Real2 p0, Real2 p1, Real2 p2, Real2 p3) {
    // create p1-p2 curve
    double len12 = p1.getDistance(p2) * factor;
    Vector2 vStart = (p0 == null) ? new Vector2(p2.subtract(p1)) : new Vector2(p2.subtract(p0));
    vStart = new Vector2(vStart.getUnitVector().multiplyBy(len12));
    Vector2 vEnd = (p3 == null) ?  new Vector2(p2.subtract(p1)) : new Vector2(p3.subtract(p1));
    vEnd = new Vector2(vEnd.getUnitVector().multiplyBy(len12));
    Real2Array coordArray = new Real2Array();
    Real2 controlStart = p1.plus(vStart);
    coordArray.add(controlStart);
    Real2 controlEnd = p2.subtract(vEnd);
    coordArray.add(controlEnd);
    coordArray.add(p2);
    // plot controls
    SVGLine line12 = new SVGLine(p1, controlStart); 
    line12.setStroke("red");
    svg.appendChild(line12);
    SVGLine line21 = new SVGLine(p2, controlEnd); 
    svg.appendChild(line21);
    return coordArray;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T11:54:39.667

贝塞尔曲线需要数据点，以及每个点的斜率和曲率。在图形程序中，斜率由控制线的斜率设置，曲率由长度可视化。

当您没有用户输入这样的控制线时，您需要估计每个点的梯度和曲率。维基百科页面[http://en.wikipedia.org/wiki/Cubic_Hermite_spline](http://en.wikipedia.org/wiki/Cubic_Hermite_spline)，特别是“插入数据集”部分有一个直接采用这些值的公式。

通常，从点估计这些值是使用有限差分完成的 - 因此您可以使用任一侧的点的值来帮助估计。这里唯一的选择是如何处理只有一个相邻点的端点：您可以将曲率设置为零，或者如果曲线是周期性的，您可以“环绕”并使用最后一个点的值。

我引用的维基百科页面也有其他方案，但大多数其他人介绍了一些其他“免费参数”，您需要找到一种设置方式，因此在没有更多信息来帮助您决定如何设置其他参数的情况下，我' d 选择简单的方案，看看你是否喜欢结果。

如果维基百科的文章不够清楚，请告诉我，我会敲一些代码。

需要注意的另一点：您追求的是什么“类型”的贝塞尔插值？大多数图形程序在二维上进行三次贝塞尔曲线（即您可以绘制圆形曲线），但您的示例图像看起来可能是一维函数近似值（因为每个 x 只有一个 y 值）。我引用的页面上并没有真正提到图形程序类型曲线。将斜率和曲率的估计转换为[http://en.wikipedia.org/wiki/B%C3%A9zier_curve](http://en.wikipedia.org/wiki/B%C3%A9zier_curve) (Cubic Bezier) 上所示形式的控制向量所涉及的数学需要一些工作，但想法是相似的。

下面是一个可能方案的图片和算法，假设您唯一的输入是三个点 P1、P2、P3

![贝塞尔插值方案](../Images/bcf4fb0b0dcc899acba3ea4ce370dbe1.png)

构造一条线 (C1,P1,C2)，使得 (P3,P1,C1) 和 (P2,P1,C2) 的角度相等。以类似的方式构建其他深灰色线条。这些深灰色线的交点（标记为 C1、C2 和 C3）成为控制点，*与 Bezier Curve 维基百科网站上的图像具有相同的意义*。所以每条红色曲线，例如 (P3,P1)，都是由点 (P3, C1, P1) 定义的二次贝塞尔曲线。红色曲线的构造与维基百科网站上给出的相同。

但是，我注意到 Bezier Curve 维基百科页面上的控制向量似乎与您使用的控制向量类型不匹配，因此您可能必须弄清楚如何将这两种方法等同起来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-17T16:11:32.033

我尝试使用二次样条而不是三次样条来简化控制点的选择（您只需选择每个点的梯度作为相邻间隔的平均梯度的加权平均值，然后在数据处绘制曲线的切线点并粘贴这些切线相交的控制点），但我找不到设置端点梯度的合理策略。所以我选择了拉格朗日拟合：

```
function lagrange(points) { //points is  [ [x1,y1], [x2,y2], ... ]
//  See: http://www.codecogs.com/library/maths/approximation/interpolation/lagrange.php
  var j,n = points.length;
  var p = [];
  for (j=0;j<n;j++) {
    p[j] = function (x,j) { //have to pass j cos JS is lame at currying
      var k, res = 1;
      for (k=0;k<n;k++)
        res*=( k==j ? points[j][1] : ((x-points[k][0])/(points[j][0]-points[k][0])) );
      return res; 
    }
  }
  return function(x) {
    var i, res = 0;
    for (i=0;i<n;i++)
      res += p[i](x,i);
    return res;
  }
} 
```

有了这个，我只需制作大量样本并用直线将它们连接起来。

如果您的数据（如我的数据）包含真实世界的测量值，这仍然是错误的。这些会受到随机误差的影响，如果您使用强制曲线精确地击中它们的技术，那么您可能会在点之间获得愚蠢的山谷和山丘。在这种情况下，您应该问自己数据应该适合什么多项式的顺序，并且……嗯……这就是我要弄清楚的。

# compiler-construction - PyCharm 中的 Numpy 导入产生“无法找到工作编译器”

> ID：14398188
> 
> 赞同：2
> 
> 时间：2013-01-18T11:41:42.100
> 
> 标签：compiler-construction, numpy, python-3.x, pycharm

我是 Python 和 PyCharm 的新手，安装了 PyCharm 2.6（在 Mac OSX 上）并尝试为 Python 3.3 导入 NumPy。JetBrains 支持文件告诉我安装 Cython，这也会产生“无法找到工作编译器”

我需要如何安装以及安装哪个编译器？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T12:17:19.753

检查“gcc”命令是否有效。如果存在，请尝试将 CC 环境变量设置为“gcc”。

# php - PHP：如何检查总数。网址中的参数？

> ID：14398190
> 
> 赞同：6
> 
> 时间：2013-01-18T11:41:45.613
> 
> 标签：php, mysql, query-string

我正在使用 $_REQUEST 检索参数。有没有办法找到总数。URL 中的参数而不是检索每个参数然后计数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T11:46:25.620

`&`这将为您提供分离的 URL 查询参数的总数：

```
count(explode('&', $_SERVER['QUERY_STRING'])) 
```

如果您只想要唯一的参数，请`$_GET`改用：

```
count($_GET) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T11:44:26.180

用 检索它们`$_GET`。这应该足够了。

例子：

```
// url: index.php?a=1&b=2&c=3
echo count($_GET); // 3 params, $_GET['a'], $_GET['b'], $_GET['c'] 
```

注意：您也可以在 url 中传递数组（[检查这里](https://stackoverflow.com/questions/1763508/passing-arrays-as-url-parameter)），整个数组计算一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T11:49:15.723

如果只需要 URL 中的参数，最好使用 $_GET。由于 $_REQEUST 包含 $_GET、$_POST 和 $_COOKIE 的内容。[见 php.net](http://php.net/manual/en/reserved.variables.request.php)

如果您想知道参数的数量，可以使用以下方法计算 URL 中的参数数量：`count($_GET)`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T11:45:44.150

这将为您解决问题。尝试这个 ：

```
$total = count($_GET);
回声$总计；

```

# html - 覆盖默认对话框按钮：目的：防止最终用户意外单击“确定”（关于未保存的网页）

> ID：14398193
> 
> 赞同：1
> 
> 时间：2013-01-18T11:41:49.540
> 
> 标签：html, user-interface, user-interaction, user-friendly

（一）蒂姆托迪=。有不止一种方法可以做到
(b) TIOOWTDI =。只有一种方法可以做到

我**不**知道*这个*问题的情况是上面的（a）还是（b）。

以下链接*可能*适用*于此*讨论：
[https](https://developer.mozilla.org/en-US/docs/DOM/window.onbeforeunload)
://developer.mozilla.org/en-US/docs/DOM/window.onbeforeunload MSDN [beforeunload | onbeforeunload 事件](http://msdn.microsoft.com/en-us/library/ms536907(v=vs.85).aspx)
[http://dev.w3.org/html5/spec-LC/history.html#unloading-documents](http://dev.w3.org/html5/spec-LC/history.html#unloading-documents)
[http://dev.w3.org/html5/spec-LC/history.html#beforeunloadevent](http://dev.w3.org/html5/spec-LC/history.html#beforeunloadevent)
...***注意：没有[BeforeUnloadEvent](http://dev.w3.org/html5/spec-LC/history.html#beforeunloadevent)特定的初始化方法。***

**请注意**：我*不是*在讨论 SO 文章[276660](https://stackoverflow.com/questions/276660/how-can-i-override-the-onbeforeunload-dialog-and-replace-it-with-my-own) [*“如何覆盖 OnBeforeUnload 对话框并将其替换为我自己的？*](https://stackoverflow.com/questions/276660/how-can-i-override-the-onbeforeunload-dialog-and-replace-it-with-my-own)这是关于最终用户在对话框中看到的**文本**；我通过第一个回复找到了 SO 文章[276660](https://stackoverflow.com/questions/276660/how-can-i-override-the-onbeforeunload-dialog-and-replace-it-with-my-own)到这个讨论： [建议：更改默认值，你确定要离开这个页面吗？从**确定**到**取消**](http://forums.asp.net/t/1873274.aspx/1)

我对各种浏览器行为方式的问题是需要防止最终用户丢失她/他的键入数据，因为她/他不小心点击离开页面；如果她/他恰好在显示对话框后不久按了空格键，则很容易发生这种灾难；*除非您*是刚刚失去一两个小时打字的最终用户，否则“灾难”似乎是一个非常强烈的词。

一世。JavaScript是防止这种情况的***唯一方法吗？***
ii. 有没有办法告诉最终用户的浏览器将**取消**设置为默认值？

澄清（*我希望*）：在 Windows 操作系统对话框中，可以告诉 Windows 操作系统默认突出显示哪个按钮；例如，如果消息类似于*“删除我的所有文件”*，则默认为“确定”是个坏主意。

所以经常在我撰写问题时保存我的文本；其他论坛不这样做。

我猜如果我的笔记本电脑在我写这条消息时崩溃了，那么 SO 会给我一些方法来恢复到我现在所处的位置。

有人能告诉我浏览器是否有一种或多种方法，如果有，在哪里可以找到更多信息？

恕我直言，将默认对话框按钮设置为“**确定**”太危险了，因为*不小心*按空格键可能会导致很多悲伤。

谢谢你。

# python - EMR 长时间无输出

> ID：14398201
> 
> 赞同：0
> 
> 时间：2013-01-18T11:42:23.563
> 
> 标签：python, hadoop, mapreduce, emr, mrjob

我有一个使用 MRJob 库用 python 编写的 MapReduce 作业。在我的本地机器上完成这项工作大约需要 30 分钟。在 EMR 上运行相同的作业时，我很长时间没有看到任何输出（~=1 小时）。我不得不停止工作。此外，在我的本地机器上花费很少时间的作业在 EMR 上运行得很好。我尝试增加超时，但任务跟踪器在超时后杀死了减速器。我收到以下错误消息

```
`Task attempt_201301181027_0001_r_000000_0 failed to report status for 3600 seconds.Killing! 
```

EMR 为我的工作创建了 4 个映射器和一个减速器。此外，我编写的 reducer 代码需要对大约 11-12 MB 的整个数据集进行大量循环。我希望这项工作与我的本地机器在大约同一时间完成，但它没有发生。有什么解决办法？？`

# php - 表单提交后在同一页面上显示文本框消息

> ID：14398207
> 
> 赞同：1
> 
> 时间：2013-01-18T11:42:39.837
> 
> 标签：php, textbox

我有一个关于在页面顶部显示文本框消息的问题。我使用这个代码 -

```
 <?php
if(isset($_POST['submit']) && $_POST['submit']=='Submit'){
 $message=$_POST['message'];
 $name=$_POST["name"];
 echo $name . "<br />" . $message;?>
 <html>
 <head>
 </head>
 <body>
<form method="POST" action="<?=$_SERVER["PHP_SELF"]?>">

    <br>Name:<input type="text" name="name" id="name">

    <br>Message:<textarea name="message" id="message"></textarea>

    <br><input type="submit" name="submit" value="Submit"/>

   </form>
   </body>
   </html>
   <?php    
  }
  else {  
    ?>
 <html>
 <head>  
 </head>
 <body>
 <form method="POST" action="<?=$_SERVER["PHP_SELF"]?>">

    <br>Name:<input type="text" name="name" id="name">

    <br>Message:<textarea name="message" id="message"></textarea>

    <br><input type="submit" name="submit" value="Submit"/>

</form>
</body>
</html>
<?php } ?> 
```

如何保存以前输入的详细信息并将其显示在表单提交的新详细信息下方

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T11:46:16.807

您可以像这样在隐藏字段中传递上一条消息

```
<?php
if(isset($_POST['submit']) && isset($_POST['prevmsg'])){

 echo "New Message :".$_POST['message'];
 echo "Previous Message :".$_POST['prevmsg'];

}

if(isset($_POST['submit']) && $_POST['submit']=='Submit'){
 $message=$_POST['message'];
 $name=$_POST["name"];
 echo $name . "<br />" . $message;?>
 <html>
 <head>
 </head>
 <body>
<form method="POST" action="<?=$_SERVER["PHP_SELF"]?>">

    <br>Name:<input type="text" name="name" id="name">

    <br>Message:<textarea name="message" id="message"></textarea>
        <input type="hidden" name="prevmsg" value="<?=$message?>"/>
    <br><input type="submit" name="submit" value="Submit"/>

   </form>
   </body>
   </html>
   <?php    
  }
  else {  
    ?>
 <html>
 <head>  
 </head>
 <body>
 <form method="POST" action="<?=$_SERVER["PHP_SELF"]?>">

    <br>Name:<input type="text" name="name" id="name">

    <br>Message:<textarea name="message" id="message"></textarea>

    <br><input type="submit" name="submit" value="Submit"/>

</form>
</body>
</html>
<?php } ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T11:58:06.427

一个肮脏的解决方案，让你继续......

```
<?php
  if(isset($_POST['submit']) && $_POST['submit']=='Submit'){
  $message=$_POST['message'];
  $name=$_POST["name"];
  if( isset( $_COOKIE['previous_message'] ) ) {
    $the_previous = explode(';', $_COOKIE['previous_message']);
    echo $the_previous[0] . "<br />" . $the_previous[1];?>
  } else {
    setcookie('previous_message', $name . ';' . $message);
  }
  setcookie('previous_message', $name . ';' . $message);
  echo $name . "<br />" . $message;?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T12:18:24.807

@Sibu，试试这个。

```
<?php
function display(){
    if(isset($_POST['submit']) && $_POST['submit']=='Submit'){
        $message=$_POST['message'];
        $name=$_POST["name"];
        echo $name . "<br />" . $message;?>
    }
}
?>
<html>
<head>
</head>
<body>
<?php display(); ?>
<form method="POST" action="<?=$_SERVER["PHP_SELF"]?>">
    <br>Name:<input type="text" name="name" id="name">
    <br>Message:<textarea name="message" id="message"></textarea>
    <br><input type="submit" name="submit" value="Submit"/>
</form>
</body>
</html> 
```

移动该功能，以便您可以指定要显示消息的位置。希望能帮助到你。

# autocomplete - CrossUI.Droid.Dialog EntryElement 因文本预测而失去焦点

> ID：14398210
> 
> 赞同：0
> 
> 时间：2013-01-18T11:42:44.770
> 
> 标签：autocomplete, focus, xamarin.android, android-dialog, mvvmcross

我正在使用该`CrossUI.Droid.Dialog`项目在 Droid 平台中创建一个新的对话框视图。我还使用了 MvvmCross 框架提供的绑定。

这是我在 Droid 视图中创建和绑定对话框的代码：

```
 protected override void OnCreate(Bundle bundle)
    {
        base.OnCreate(bundle);

        DroidResources.Initialise(typeof(Resource.Layout));

        Root = new RootElement()
            {
                new Section("Private Configuration")
                    {
                        new EntryElement("Name:").Bind(this, "{'Value':{'Path':'Configuration.Name'}}"),
                        new EntryElement("Description:").Bind(this, "{'Value':{'Path':'Configuration.PrivateDescription'}}"),
                        new BooleanElement("Active?").Bind(this, "{'Value':{'Path':'Configuration.Active'}}")
                    },
                new Section("Display Configuration")
                    {
                        new StringElement("Header Title")
                            {
                                Click = (o, e) => GoToHeaderTitleActivity(),
                                LayoutName = "dialog_rootNavigate"
                            }
                    }
            };
    } 
```

当我运行应用程序时，会显示对话框并且绑定是正确的。

**我遇到的问题是，当我尝试在其中一个 EntryElement 中写东西时，焦点就转移到了其他地方……这仅在我启用了“文本预测”时才会发生。**

我已经检查了[Android.Dialog](https://github.com/slodge/Android.Dialog)中的示例，一切似乎都很好。

我正在使用带有 ICS 4.0 的 Galaxy Tab 2 7.0

有人遇到这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-30T09:35:06.590

找到答案了！！

显然，Android 中存在一个已知问题，即 EditText 控件和 ListView 无法正常播放。这不是 MvvmCross 或 Monodroid.Dialog 的问题。

为了克服这个问题（我猜这是它存在的原因？）在`MvxLinearDialogActivity`使用对话框开发表单时使用。问题立即消失。

正如课堂上的评论所说：

> DialogActivity 基于线性视图，这将解决所有与编辑文本相关的焦点问题，例如[在 ListView 内的 Focusable EditText](https://stackoverflow.com/questions/2679948/focusable-edittext-inside-listview)上使用元素建议时无济于事

# django - 没有 full=True 的主干 fetchRelated 只给出 ID 和 URI

> ID：14398211
> 
> 赞同：1
> 
> 时间：2013-01-18T11:42:52.650
> 
> 标签：django, backbone.js, backbone-relational, tastypie

我有以下美味的资源：

```
class ArtistResource(SearchableResource):
    audio_tracks = fields.ToManyField('music.api.AudioTrackResource', 'audio_tracks', related_name='artists', null=True, blank=True)
    class Meta:        
        filtering = {
        "title": ('startswith',),
        "id": ALL_WITH_RELATIONS,
        }
    queryset = Artist.objects.all()
    resource_name = 'artist'
    allowed_methods = ['get']

class AudioTrackResource(SearchableResource):
    artists = fields.ToManyField('music.api.ArtistResource', 'artists', null=True, blank=True)
    class Meta:
        filtering = {
        "artists": ALL_WITH_RELATIONS,
        }
    queryset = AudioTrack.objects.all()
    resource_name = 'audio_track'
    allowed_methods = ['get'] 
```

以及以下骨干模型：

```
class Track extends Backbone.RelationalModel
  urlRoot: TRACK_API
  relations: [
  {
  type: Backbone.HasMany
  key: 'artists'
  relatedModel: Artist
  collectionType: ArtistCollection
  reverseRelation:
    key: 'track'
    includeInJSON: 'title'
  }
  ]  
  Track.setup()
  Track

class Artist extends Backbone.RelationalModel
    urlRoot: ARTIST_API
    relations: [
    {
    type: Backbone.HasMany
    key: 'audio_tracks'
    relatedModel: Track
    collectionType: TrackCollection
    reverseRelation:
      key: 'artist'
      includeInJSON: 'title'
    }
    ]

   Artist.setup()
   Artist 
```

而且我无法在我的 Tastypie 资源中设置**full=True**，因为它会创建递归……我根本不想设置 full=True。但我不知道何时何地**fetchRelated()**。它不会获取任何东西，因为对象 URI 数组已经存在。有没有其他方法可以在双方都填充与 JSON 的多对多关系？

PS我在谷歌搜索这个问题3天后创建了这个问题，但我没有找到有效的解决方案。

# iphone - 从 iPhone 中的服务器检索后的 Unicode 字符更改

> ID：14398212
> 
> 赞同：3
> 
> 时间：2013-01-18T11:43:05.090
> 
> 标签：iphone, mysql, objective-c, unicode, emoji

我有一个 iPhone 应用程序，我在其中`UITextview`通过 Web 服务将文本发送到服务器。在下一页中，我将通过 Web 服务显示来自服务器的评论列表。一切正常，除非我在`UITextview`.

下一页显示方形框而不是一些表情符号字符（不是全部）。

我注意到：

1.  工作：我`UITextview`从表情符号键盘插入了一个表情符号字符，并将其代码打印在日志中，\u2601，并将此文本提交给服务器。在下一页中，我得到了相同的 unicode \u2601 并且工作正常。它向我显示了表情符号图标。

2.  不工作：现在我`UITextview`从表情符号键盘中插入了另一个表情符号字符，并将其代码打印在日志中，\ud83d\udc16，并将此文本提交给服务器。在下一页中，我得到了一个与我发送的不同的 unicode 代码点：\uf416。iPhone 无法识别这个 unicode，所以它给了我一个方框。

那么这里的问题是什么？仅当表情符号字符具有一对 unicode 代码点时，它才起作用。

存储评论的数据库是 MySQL 5.5 版。

为什么从服务器检索表情符号字符代码对时会发生变化？如何将检索到的 Unicode 解码为其原始形式，以便 iPhone 可以识别它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T09:10:13.450

字符 U+F416 位于私人使用区域 (PUA) 之一中。

很可能，从应用程序到数据库并返回的一些代码用这个字符替换了表情符号。这可以是这种方式的任何组件，例如您用来与服务通信的客户端库、Web 服务、数据库接口或数据库本身。尝试单独处理每一层，或者跟随角色穿过层来检查它是否仍然正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T06:12:47.857

谢谢马尔拜尔斯，你给了我提示。我已经阅读了什么是 Unicode 平面、什么是代理以及它是如何工作的。我发现这实际上不是服务器问题，因为我的 SQL 服务器版本是 5.5，它具有字符集**uyf8mb4**，我在 Comments 列中使用了该设置。

现在我在我的应用程序中使用 SBJSON 来解码从服务器获取的 json 响应的问题。SBJSON 在一个 unicode UTF16 中解码该代理对（UTF16 UTF16），这就是为什么不显示带有代理对的表情符号的原因。Apple为 ios5 及更高版本的 os引入了 json 库**NSJSONSerialization 。**我用那个库来解码 json 响应，我的代码就像魅力一样工作..:)

我从这里得到了解决方案

[http://blog.manbolo.com/2011/12/12/supporting-ios-5-new-emoji-encoding](http://blog.manbolo.com/2011/12/12/supporting-ios-5-new-emoji-encoding)

和这里

[http://blog.manbolo.com/2012/10/29/supporting-new-emojis-on-ios-6](http://blog.manbolo.com/2012/10/29/supporting-new-emojis-on-ios-6)

感谢@Manbolo 博客。

# html - 在 3 个 div 上设置相等的高度

> ID：14398214
> 
> 赞同：-2
> 
> 时间：2013-01-18T11:43:14.827
> 
> 标签：html, css

我创建了 3 个 div，我必须设置我尝试使用 height:100% 的所有高度，但它不起作用。所有这些 div 的内容都有变化，但我需要所有高度相同。请帮助我！

```
<html>

<style type="text/css">

.b1{height:190px;width:150px;background:#963;float:left}
.b2{height:150px;width:150px;background:#955;float:left}
.b3{height:180px;width:150px;background:#966;float:left}

</style>
</head>

<body>

<div class="b1"></div>
<div class="b2"></div>
<div class="b3"></div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T11:54:16.703

您需要将所有父元素的高度设置为 100%，在您的情况下，它将是：

```
body,html { height: 100%; } 
```

演示：http: [//jsfiddle.net/Cb4nU/3/](http://jsfiddle.net/Cb4nU/3/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T12:08:31.157

将此代码放在您的CSS中。我想这会帮助你..

```
 .b2{
    margin: 1px;
    background-color: ; 
    height: 100px;
    width:100px; 
    border: 1px solid ;
}
 .b2 {
    margin: 1px;
    background-color: ; 
    height: 100px;
    width:100px; 
    border: 1px solid ;
    }
 .b3 {
    margin: 1px;
    background-color: ; 
    height: 100px;
    width:100px; 
    border: 1px solid ;
} 
```

干杯...！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T11:57:54.143

将所有 3 个包装在一个 div 中，并使用您希望它们拉伸到的高度也可以使用 [http://jsfiddle.net/Cb4nU/2/](http://jsfiddle.net/Cb4nU/2/)

```
<div class="a">
<div class="b1">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque nunc massa, accumsan ut volutpat id, gravida porta turpis. Duis tincidunt feugiat est nec rhoncus.    </div>
<div class="b2">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque nunc massa,</div>
<div class="b3">Lorem ipsum dolor sit amet</div>
</div>

.a{height:300px;}
.b1{height:100%;width:150px;background:#963;float:left}
.b2{height:100%;width:150px;background:#955;float:left}
.b3{height:100%;width:150px;background:#966;float:left} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T13:04:28.063

嗨，下面的代码片段会做必要的，

**CSS：**

```
.parent { display:table; }
.b1{ border:1px solid red; display:table-cell; width:150px;background:#963;}
.b2{ border:1px solid green; display:table-cell; height:150px;width:150px;background:#955;}
.b3{ border:1px solid blue; display:table-cell; width:150px;background:#966;} 
```

**HTML**

```
<div class="parent">
<div class="b1"></div>
<div class="b2"></div>
<div class="b3"></div>
</div> 
```

变化 ：

1.  添加了**父**容器 div
2.  从 CSS 中的所有 div 中删除了**height**和**float:left属性**
3.  为 CSS 中的所有 div添加了**显示属性**

# ssrs-2008 - 显示具有非常高和非常低值的图表

> ID：14398219
> 
> 赞同：1
> 
> 时间：2013-01-18T11:43:21.590
> 
> 标签：ssrs-2008, reporting-services, reportbuilder

我有一个条形图，以目标百分比的形式显示针对类别目标的销售额。

我遇到的问题是，有时一两个类别的表现会超出预期，从而使图表难以阅读。

将 Y 轴限制在 200% 被认为是不可接受的，因为用户希望看到条形图的顶部。

用户询问是否可以从中间裁剪一个部分，所以您会看到 0% - 150%，然后是（高杆顶部 - 10%）% 到（高杆顶部 + 10%）的差距)%。我不认为这可以使用内置的图表控件来完成。

![这是图表外观的示例](../Images/6c6e065a59d62f01fc5944048bc26869.png)

有没有人有任何处理这种情况的好方法的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T11:48:42.530

查看刻度中断：

[http://technet.microsoft.com/en-us/library/bb934379(v=sql.100).aspx](http://technet.microsoft.com/en-us/library/bb934379(v=sql.100).aspx)

不能保证它会像您希望的那样处理您的数据，但它是一个很好的起点。

# osgi - 如何在 Jboss AS 7 中运行的 Vaadin Web 应用程序中使用 OSGI 服务

> ID：14398220
> 
> 赞同：0
> 
> 时间：2013-01-18T11:43:21.543
> 
> 标签：osgi, jboss7.x, vaadin

我是 OSGI 的新手，目前正在尝试使用它来创建模块化 Web 应用程序。Web 应用程序本身是使用 Vaadin 6 创建的。我在 Vaadin 网站上关注了这篇 WIKI 文章：[使用 OSGI 创建模块化 Vaadin 应用程序](https://vaadin.com/wiki/-/wiki/Main/Creating%20a%20Modular%20Vaadin%20Application%20with%20OSGi)

到目前为止我所做的步骤： - 为模块服务创建 OSGI 包（跟踪其他 osgi 模块又名插件的简单服务）并将其部署到 jboss。- 创建 vaadin 应用程序，只是一个存根。

OSGI 服务应该被注入到 Servlet 类中，例如：

```
@WebServlet(urlPatterns="/*")
public static class Servlet extends AbstractApplicationServlet {

@Resource(mappedName="vaadin-moduleService")
ModuleService moduleService;

@Override
protected Class<? extends Application> getApplicationClass() {
    return ModuleDemoApp.class;
}

@Override
protected Application getNewApplication(HttpServletRequest request) throws ServletException {
    return new ModuleDemoApp(moduleService);
}
} 
```

现在的问题是——如何在此处注入此服务？目前我只是得到 NULL 指针，所以 DI 不起作用。从上面提到的文章：

```
Note, that the servlet has a moduleService field annotated with the 
@Resource annotation. One of the interesting features of GlassFish 3 
is that it is possible to inject references to OSGi services into all 
container managed Java beans, even though they are not actually 
running in the OSGi container themselves. Thus, in this case, GlassFish 
will find the module service we define in the previous section and inject it. 
```

据此，Glassfish 将在内部自动完成所有魔法。有人知道如何使用 JBoss7 完成它吗？

不幸的是，对于如何在 OSGI 容器内运行的任何东西可以在其外部引用，没有找到任何好的（对于新手）解释......假设不需要将 Web 应用程序本身转换为 OSGI 包来完成我需要的东西。这是真的？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:14:51.373

该[文档](https://docs.jboss.org/author/display/JBOSGI/Application+Server+Integration)指出，JavaEE 组件可以将 BundleContext 作为`@Resource`. 如果可行，那么您可以通过 ServiceTracker 跟踪您的模块服务。

[我在这里](https://github.com/njbartlett/VaadinOSGi)看到了另一个将 Vaadin 与 OSGi 一起使用的示例。

# perl - 无法在 Perl 脚本中遍历散列中的数组

> ID：14398222
> 
> 赞同：0
> 
> 时间：2013-01-18T11:43:31.247
> 
> 标签：perl

请帮我解决这个问题

# pre_package_config.pm

```
use strict;
our %pre_pkg_configs;

$pre_pkg_configs{locDbList}=['default','default_test']; 
```

# 第二个.pl

```
#!/usr/bin/perl
use Expect;
use strict;

our %pre_pkg_configs;

my  $pre_pkg_file = './pre_package_config.pm';

eval {require $pre_pkg_file};

foreach my $db ( $pre_pkg_configs{locDbList} ){
    print $db;
} 
```

# 输出：

数组 (0x10092ae88)

# 本来应该：

默认 default_test

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T11:49:10.200

`$pre_pkg_configs{locDbList}`是单个（标量）值。迭代它只会给你一个值（恰好是对数组的引用）。如果要遍历该数组的内容，则需要取消引用：

```
for my $db (@{ $pre_pkg_configs{locDbList} }) {
    print $db;
} 
```

请注意，这将输出`defaultdefault_test`，而不是`default default_test`. 获得后者的最简单方法是：

```
print join(" ", @{ $pre_pkg_configs{locDbList} }), "\n"; 
```

要了解有关参考的更多信息，请参阅[`perldoc perlreftut`](http://perldoc.perl.org/perlreftut.html)。
（此外，您应该`use warnings;`在每个文件中除了`use strict;`.）

# jquery - JS 验证 - 自定义规则？

> ID：14398223
> 
> 赞同：1
> 
> 时间：2013-01-18T11:43:36.027
> 
> 标签：jquery

> **可能重复：**
> [jQuery Validate Plugin - 如何创建简单的自定义规则？](https://stackoverflow.com/questions/241145/jquery-validate-plugin-how-to-create-a-simple-custom-rule)

我正在使用 js 验证，我想知道是否可以制定自己的规则？

我想在验证之前检查我的数据库中是否存在用户名。为此，我需要从 js 中的方法返回 true 或 false。

如何将其添加到 js 验证中？

# db2 - 如何编写一个 DB2 存储过程来插入/更新/删除随机值？

> ID：14398225
> 
> 赞同：0
> 
> 时间：2013-01-18T11:43:46.037
> 
> 标签：db2, procedure

1.我想写一个DB2程序对表进行常见的插入/更新/删除，问题是如何生成随机值的SQL语句？例如，如果是整数类型的列，存储过程可以生成 1 到 10000 之间的数字，或者对于 varchar 类型的列，存储过程可以生成具有固定长度的随机选择的字符串，例如 10；

2.如果 DB2 SQL 语法支持将文件中的数据放入随机选择的行的 LOB 列中，例如，我有一个表 t1(c0 integer,c1 clob)，那么我怎么能像“插入到t1 值(100，some_path_to_a_text_file)" ?

3.使用DB2“导入”加载数据，如果文件包含10000行，似乎DB2默认会在一个事务中提交整个10000行插入。是否有任何配置/选项可以用来将“导入”过程划分为 10 个事务，每个事务有 1000 行？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:02:14.447

1）做一个随机操作，得到一个随机值，并按照一组规则进行处理。我目前正在开发的实用程序中有一个类似的案例。 [https://github.com/angoca/log4db2/blob/master/src/examples/sql-pl/bank/DemoBankRandom.sql](https://github.com/angoca/log4db2/blob/master/src/examples/sql-pl/bank/DemoBankRandom.sql)

它基于随机值实现插入、选择、更新或删除。

2）不知道。什么是……

3）对于更频繁的提交，你把 commitcount. 有关更多信息，请查看信息中心[http://publib.boulder.ibm.com/infocenter/db2luw/v10r1/topic/com.ibm.db2.luw.admin.cmd.doc/doc/r0008304.html](http://publib.boulder.ibm.com/infocenter/db2luw/v10r1/topic/com.ibm.db2.luw.admin.cmd.doc/doc/r0008304.html)

# c++ - 基于 DCT 的视频编码过程

> ID：14398229
> 
> 赞同：0
> 
> 时间：2013-01-18T11:44:16.223
> 
> 标签：c++, video-encoding, huffman-code, dct, run-length-encoding

我遇到了一些问题，希望您能够澄清。我自学了一个类似于 Mpeg2 的视频编码过程。过程如下：

1.  将 RGBA 图像拆分为 4 个单独的通道数据存储块。所以一个包含所有 R 值的数组，一个单独的 G 值数组等。

2.  获取数组并获取一个 8x8 像素数据块，使用离散余弦变换 (DCT) 对其进行变换。

3.  使用预先计算的量化矩阵量化这个 8x8 块。

4.  之字形编码量化步骤的输出。所以我应该得到一个连续数字的踪迹。

5.  运行长度编码 (RLE) 之字形算法的输出。

6.  Huffman 编码 RLE 阶段后的数据。使用预先计算的霍夫曼表中的值替换。

7.  返回第 2 步并重复，直到所有通道数据都已编码

8.  返回第 2 步并为每个通道重复

第一个问题是我是否需要将 RGBA 值转换为 YUV+A (YCbCr+A) 值才能使进程正常工作，还是可以继续使用 RGBA？我问，因为 RGBA->YUVA 转换是一个繁重的工作量，我想尽可能避免。

下一个问题。我想知道 RLE 存储应该只运行 0 还是可以扩展到数组中的所有值？请参阅以下示例：

```
 440000000111 == [2,4][7,0][3,1]   // RLE for all values
 or
 440000000111 == 44[7,0]111        // RLE for 0's only 
```

最后一个问题是关于霍夫曼阶段的单个符号是什么？例如，要替换的符号是 2 或 4 之类的值，还是符号是运行级别对 [2,4]。

感谢您花时间阅读并帮助我。我阅读了许多论文并观看了许多 youtube 视频，这有助于我理解各个算法，但不能帮助我理解它们如何链接在一起以形成代码中的编码过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T12:03:30.953

（这似乎更像 JPEG 而不是 MPEG-2 - 视频格式更多的是压缩帧之间的差异，而不仅仅是图像压缩）

如果您使用 RGB 而不是 YUV，您可能不会获得相同的压缩率和/或质量，但如果您愿意，您可以这样做。与算法的其余部分相比，色彩空间转换几乎不是繁重的工作量。

通常在这种应用程序中，您会使用零，因为这是您获得大量重复的元素（并且希望在每个块的末尾也有一个可以用单个标记值替换的好数字），而其他系数不是那么重复，但如果你期望其他值的重复，我猜是 YMMV。

是的，您可以将 RLE 对编码为霍夫曼编码中的单个符号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T13:28:45.740

1) 是的，您需要转换为 YUV……为了获得更高的压缩比，您需要利用人眼“忽略”显着色彩损失的能力。通常，您将保持 Y 平面的分辨率相同（大概 A 平面也是如此），但将 U 和 V 平面下采样 2x2。例如，如果你在做 640x480，Y 是 640x480，U 和 V 平面是 320x240。此外，您可以为 U/V 平面选择不同的量化。与 DCT 或 DFT 相比，这种转换的成本很小。

2）你不必RLE它，你可以直接霍夫曼编码。

# javascript - Backbone.js 中的可选路由参数？（再次）

> ID：14398231
> 
> 赞同：5
> 
> 时间：2013-01-18T11:44:19.857
> 
> 标签：javascript, backbone.js, javascriptmvc, backbone-routing

我正在尝试在 Backbone 0.9.10 中设置路由。我想匹配以下类型的路线：

```
/england/
/england/birmingham
/france
/france/paris
... 
```

等等。这就是我目前在路由器中的内容：

```
var AppRouter = Backbone.Router.extend({
  routes: {
    "": "index",
    "(/:country)": "index",
    "(/:country)(/:city)": "index"
  },
  index: function(country, city) { 
      console.log('index', country, city);
  }
});
var StateApp = new AppRouter();
Backbone.history.start({ pushState: true }); 
```

我有两个问题：

1.  'index' 函数目前根本没有触发，无论我转到 = 的 URL`/`还是`/england`其他任何东西。
2.  我也不清楚可选参数是否会按照我设置的方式工作 - 可以像这样连续有两个可选参数吗？我还不知道我需要支持多少个国家，所以我确实希望`country`参数是一个参数，而不是指定单个国家。

如果可能的话，我宁愿使用正确的 URL 路由而不是正则表达式解析。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-18T12:18:47.200

如果您想像您的示例一样将所有 url（包括根）路由到一种方法，您只需要定义一个路由：

```
routes: {
  "(:country)(/:city)": "index"
} 
```

因为这两个参数都是可选的，所以这将匹配：

*   "" (空字符串)
*   “英国”
*   “英国/伦敦”

如果您只想要格式为的路由`england`而`england/london`不是 root page `/`，请声明一个单独的空路由，并使该`:country`部分非可选：

```
routes: {
  "" : "home",
  ":country(/:city)": "index"
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-29T17:05:06.783

如果您想拥有一条路线并且可以灵活地更改您希望 url 的外观。你也可以考虑

```
routes: {
 "(/country/:country)(/city/:city)": "index"
} 
```

* * *

匹配

```
"" (Empty string)
"country/england"
"country/england/city/london" 
```

# sql-server - SQL Server 中的数据更改时更新网站？

> ID：14398235
> 
> 赞同：2
> 
> 时间：2013-01-18T11:44:27.617
> 
> 标签：sql-server, sql-server-2008

我陷入了一个问题。有一个将数据添加到数据库的应用程序，它是一个封闭源。我正在创建它的网络界面。我想要的功能是，如果列中某个字段的值大于列中另一个字段的值，SQL 服务器应该 http 将消息发布到我的站点。

在 Microsoft SQL 中可以吗？如果是，如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T12:22:17.470

好的，如果另一个软件正在插入，你可以这样做......

```
ALTER TRIGGER [dbo].[ABCD] ON [dbo].[XXX] 
FOR INSERT
AS
    Declare @A -- from column 1 in INSERT
    Declare @B -- from column 2 in INSERT

    if (@A > @b)
        begin
              EXEC  msdb.dbo.sp_send_dbmail
              @recipients = @email,
              @body = @message,
              @subject = 'Latest record has column value A greater than column value B'
        end
    else 
        begin
        --do whatever
        end 
```

附言。`sp_send_dbmail`是一个`stored procedure`发送电子邮件或消息的

# sql - 更新一个临时表 T-SQL 中的 2 个值

> ID：14398236
> 
> 赞同：0
> 
> 时间：2013-01-18T11:44:29.220
> 
> 标签：sql, tsql, sql-update

我想请您帮忙查询。我有一个带有 value(float)、attribute(nvarchar) 和 system(int) 的临时表。我需要根据属性更新值，但使用系统。所以...

```
UPDATE #inventory (value, attribute)
SET (value, attribute) = (SELECT SUM(value), 'Actual'
                        FROM ReportValue v, ReportValueType t, ReportProducts ti
                        WHERE v.type_id = t.id
                        AND v.voyage_id = ti.id
                        AND t.value_code = 'total'
                        AND t.category_code = 'cold'
                        AND ti.end_time BETWEEN @start AND @end)
UPDATE #inventory (value, attribute)
SET (value, attribute) = (SELECT SUM(value), 'Actual'
                        FROM ReportValue v, ReportType t, Reportprod ti
                        WHERE v.type_id = t.id
                        AND v.voyage_id = ti.id
                        AND t.field_name = 'Total'
                        AND t.slot_type = 'COLD'
                        AND t.xml_id = -2000
                        AND ti.end_time BETWEEN @start AND @end)
else (value, attribute)
end 
```

这是错误的形式。我怎样才能让它工作？预先感谢您的回答！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T13:03:30.593

好的，所以您似乎也在尝试了解更新语法...（这是合规的）：

```
UPDATE tblNameCanBeTempTable
SET Column1 = S.Value1, Column2 = S.Value2, etc
FROM (anyValidSelectTableStatement) S
    WHERE tblNameCanBeTempTable.KeyValue =  S.keyValue 
```

所以路线是让你的选择语句，检查它产生你想要的值，然后在开始处添加更新，最后在行匹配 WHERE

你可以做类似的事情

`Col1 = CASE WHEN X=1 THEN S.Value1 ELSE Col1 END`

对于每一行。

# debugging - 阻止特定 URL 进行测试的最佳方法是什么？

> ID：14398241
> 
> 赞同：20
> 
> 时间：2013-01-18T11:44:47.427
> 
> 标签：debugging, google-chrome, web-scraping, fiddler

我正在使用 Google Chrome 和 Fiddler 4.4 版观察网站。

该页面正在使用 AJAX 更新其数据。我想阻止一个特定的 URL 来测试如果它不起作用会发生什么。

阻止 URL 的最简单方法是什么？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-18T22:24:19.843

你希望发生什么？

转到自动回复选项卡。勾选**启用自动响应**和**不匹配的请求通过**。单击**添加**按钮。在顶部框中，输入**http://example.com/yourURLisHere**。在其下方的框中，选择**404_Plain.dat**或选择***drop**或***reset**。第一个返回 404。第二个只是在看到目标 URL 时断开连接。如果第三个看到目标 URL，则发送 TCP/IP RST 数据包。

# jquery - JSONP 数据未定义跨域发布

> ID：14398244
> 
> 赞同：0
> 
> 时间：2013-01-18T11:44:53.310
> 
> 标签：jquery, .net, json, web-services, jsonp

我正在尝试将来自 jquery $.ajax 方法的请求发送到我在不同域上创建的 .net Web 服务。我已经尝试了很多事情，但我仍然无法让它发挥作用。我不断得到的回应是不确定的。

有人可以建议吗？

谢谢

.NET 代码

```
public class Handler1 : IHttpHandler
    {

        public void ProcessRequest(HttpContext context)
        {
            string callback = "";
            try
            {
                if (!string.IsNullOrEmpty(context.Request["callback"]))
                {
                    if (!string.IsNullOrEmpty(context.Request["var1"]))
                        SaveData(context.Request["var1"]);
                    callback = context.Request["callback"];

                    var oSerializer = new System.Web.Script.Serialization.JavaScriptSerializer();                    
                    string sJSON = oSerializer.Serialize(JSON);

                    HttpContext.Current.Response.ContentType = "application/json";
                    string qs = HttpContext.Current.Request.QueryString["callback"];

HttpContext.Current.Response.Write(callback+"(\"Clients : \"" + sJSON+ ")");

                }

            }
            catch (Exception exc)
            {

                context.Response.Write(callback +
            "({ \"return\": \"" + exc.Message + "\" })");
            }
        } 
```

查询

```
$.ajax({
                url:        "URL",
                dataType:   "jsonp",
                success:    function(data){
                    alert(data); // Always Undefined

                }
            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T12:34:03.323

您在这里返回损坏的 JSON：

```
HttpContext.Current.Response.Write(callback+"(\"Clients : \"" + sJSON+ ")"); 
```

你注意到`\"`后面了`Clients:`吗？你应该把它放在`:`. 因此，您的 JSON 看起来像这样（如果您使用了诸如 FireBug 之类的 javascript 调试工具，您会立即注意到，因为 FireBug 会将此错误写入您的控制台）：

```
callback("Clients : "[{"ID":1,"Name":"client 1"},{"ID":2,"Name":"client 2"},{"ID":3,"Name":"client 3"}]) 
```

看到问题了吗？

**永远不要**对 JSON 进行硬编码。**永远不要**使用字符串连接来构建 JSON。**从不**。

**在构建或解析 JSON 时始终**使用 JSON 序列化程序。

就像这样：

```
string sJSON = oSerializer.Serialize(new { Clients = JSON });
context.Response.ContentType = "application/json";
context.Response.Write(string.Format("{0}({1})", callback, sJSON)); 
```

在这个例子中，我将一个匿名类型传递`new { Clients = JSON }`给 JSON 序列化程序，它将注意产生正确和有效的输出：

```
callback("Clients":[{"ID":1,"Name":"client 1"},{"ID":2,"Name":"client 2"},{"ID":3,"Name":"client 3"}]) 
```

# forms - Symfony 2.1：如何根据我的用户在下拉列表中设置默认值

> ID：14398247
> 
> 赞同：0
> 
> 时间：2013-01-18T11:45:06.380
> 
> 标签：forms, symfony, selectedindex

我想创建一个带有下拉列表和文本字段的表单。我的下拉列表包含我的代理实体的值和我的文本字段一个星期数。我想根据我连接的用户设置默认值，但我不知道如何。

我已经修改了我的实体、我的表单和我的控制器：

我与我的代理关系有一个实体周：

```
class Week
{
/**
 * @var integer
 *
 * @ORM\Column(name="id", type="integer")
 * @ORM\Id
 * @ORM\GeneratedValue(strategy="AUTO")
 */
private $id;

/**
 *
 * @ORM\ManyToOne(targetEntity="Agency", inversedBy="week", cascade={"persist"})
 * @ORM\JoinColumn(name="agency_id", referencedColumnName="id")
 */
private $agency;

/**
 * @var integer
 *
 * @ORM\Column(name="week_number", type="integer")
 */
private $week_number;

/**
 * @var \DateTime
 *
 * @ORM\Column(name="week_start", type="datetime")
 */
private $week_start;

/**
 * @var \DateTime
 *
 * @ORM\Column(name="week_end", type="datetime")
 */
private $week_end;

public function getAgency()
{
    return $this->agency;
}
.... public function get.....
} 
```

然后是我的代理实体：

```
class Agency
{
/**
 * @var integer
 *
 * @ORM\Column(name="id", type="integer")
 * @ORM\Id
 * @ORM\GeneratedValue(strategy="AUTO")
 */
private $id;

/**
 * @var string
 *
 * @ORM\Column(name="name", type="string", length=50)
 */
private $name;

/**
 * @var integer
 *
 * @ORM\Column(name="nb_team", type="integer")
 */
private $nb_team;

/**
 * @var \DateTime
 *
 * @ORM\Column(name="date_creation", type="datetime")
 */
private $date_creation;

/**
 *
 * @ORM\OneToMany(targetEntity="Week", mappedBy="agency", cascade={"persist"})
 */
private $week;

public function .....
} 
```

我的表格：

```
public function buildForm(FormBuilderInterface $builder, array $options)
{        
    $builder->add('agency', 'entity', array(
                    'class' => 'MyProjectBundle:Agency',
                    'property' => 'name',
                   /* 'query_builder' => function(\Doctrine\ORM\EntityRepository $er) {
                        return $er->createQueryBuilder('a')->orderBy('a.name', 'ASC');
                    },*/
                    'attr' => array('onchange' => 'javascript:this.form.submit();')
                ))->add('week_number', 'text');
} 
```

我的控制器：

```
$num_week = 4;
$id = 3;
 $agency_id = $em->getRepository('MyProjectBundle:Agency')->find($id);
    $week = $em->getRepository('MyProjectBundle:Week')->WeekExiste($num_week, $week_start, $agency_id);
    $form2 = $this->createForm(new FormType(), $week);
    if ($request->isMethod('POST')) {
        $form2->bind($request);

        $data = $form2->getData();
        $agency = $data['agency'];
    }
    else {
        $agency = $em->getRepository('MyProjectBundle:Agency')->find($id);
    } 
```

$week 返回一个正确的实体。我的表单适用于 week_number 字段，但我的下拉列表没有选择我在控制器中设置的代理机构。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T12:30:34.000

我对默认选项值有同样的问题，你可以在我的问题上检查它。
我已经分享了一个完整的代码。
[symfony2 选择的选项](https://stackoverflow.com/questions/14341531/symfony2-selected-option)

# syntaxhighlighter - 在语法荧光笔中启用换行？

> ID：14398250
> 
> 赞同：1
> 
> 时间：2013-01-18T11:45:12.233
> 
> 标签：syntaxhighlighter

我想在 Alex Gorbachev 语法荧光笔中启用代码换行。在这里阅读一个[线程](https://bitbucket.org/alexg/syntaxhighlighter/issue/182/version-3-making-code-wrap)来做到这一点..

但我无法将其付诸行动。有谁知道怎么做？

# python - 如何将大表（100M+ 行）导出到文本文件？

> ID：14398252
> 
> 赞同：0
> 
> 时间：2013-01-18T11:45:21.343
> 
> 标签：python, mysql, database, hadoop, export

我有一个包含超过一亿行的大表的数据库。我想导出这些数据（经过一些转换，比如将这个表与其他几个表连接起来，清理一些字段等）并将其存储在一个大文本文件中，以供以后使用 Hadoop 处理。

到目前为止，我尝试了两件事：

1.  使用 Python，我使用[这个子查询技巧](http://explainextended.com/2009/10/23/mysql-order-by-limit-performance-late-row-lookups/)按块（通常一次 10'000 条记录）浏览表，对每一行执行转换并直接写入文本文件。这个技巧有帮助，但`LIMIT`随着出口的进行，它变得越来越慢。我无法用这个导出完整的表。

2.  使用`mysql`命令行工具，我尝试将查询结果`CSV`直接输出到文本文件中。由于大小，它耗尽了内存并崩溃了。

我目前正在研究[Sqoop](http://sqoop.apache.org/)作为将数据直接导入的工具`HDFS`，但我想知道其他人如何处理如此大规模的导出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T12:15:58.510

内存问题指向使用错误的数据库查询机制。

通常，建议`mysql_store_result()`在 C 级别上使用，这对应于在 Python 级别上使用`Cursor`or 。`DictCursor`这样可以确保数据库尽快再次空闲，并且客户端可以随心所欲地处理数据。

但它不适合大量数据，因为数据缓存在客户端进程中。这可能非常消耗内存。

在这种情况下，最好使用`mysql_use_result()`(C) resp。`SSCursor`/ `SSDictCursor`（蟒蛇）。这限制了您必须获取整个结果集，同时对数据库连接不做任何事情。但它为您的客户端进程节省了大量内存。使用`mysql`CLI，您可以通过`-q`参数实现此目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T11:53:29.627

我不知道您到底使用了什么查询，因为您没有在这里给出它，但我想您正在指定限制和偏移量。这是在数据开始时非常快速的查询，但速度非常慢。

如果你有唯一的列，比如 ID，你只能获取前 N 行，但是修改查询子句：

```
WHERE ID > (last_id) 
```

这将使用索引并且速度可以接受。

但是，简单地做通常应该更快

```
SELECT * FROM table 
```

并为此类查询打开游标，并具有合理的大获取大小。

# quickfix - Quickfix 哪个优先级更高：消息头还是 sessionID？

> ID：14398254
> 
> 赞同：2
> 
> 时间：2013-01-18T11:45:22.470
> 
> 标签：quickfix

如果我使用

`FIX::Session::sendToTarget(FIX::Message, FIX::SessionID)`

然后假设在消息的标题中：

```
sender Comp ID = s1, target CompID = t1 
```

在 SessionID 变量中：

```
sender Comp ID = s1, target CompID = t2 
```

消息将发送到`t1`或`t2`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-10T19:24:01.803

它将使用您在`sendToTarget`调用中指定的会话 ID。从 QF 源代码...

```
bool Session::sendToTarget( Message& message, const SessionID& sessionID )
throw( SessionNotFound )
{
  message.setSessionID( sessionID );
  Session* pSession = lookupSession( sessionID );
  if ( !pSession ) throw SessionNotFound();
  return pSession->send( message );
} 
```

请注意，消息会话 ID 立即被传递给函数的 sessionID 覆盖。

# c# - 如何将以下字符串拆分为字符串数组

> ID：14398263
> 
> 赞同：0
> 
> 时间：2013-01-18T11:45:45.257
> 
> 标签：c#

我想拆分以下内容：

```
name[]address[I]dob[]nationality[]occupation[] 
```

所以我的结果是：

```
name[]
address[I]
dob[]
nationality[]
occupation[] 
```

我尝试使用`Regex.Split`但无法获得这些结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T11:48:29.373

您可以使用`Regex.Split`以下正则表达式：

```
(?<=])(?=[a-z]) 
```

它将在左侧的右方括号和右侧的字母之间拆分。这是使用[环视断言](http://www.regular-expressions.info/lookaround.html)完成的。它们不消耗匹配的任何字符，因此在这个星座中它们非常方便地在字母之间进行匹配。

基本上它的意思正是我写的：`(?<=])`将匹配字符串中前面有一个右括号的点，同时`(?=[a-z])`匹配字符串中的一个点（都是零宽度，即字符*之间*），后面是一个字母。如果您的输入数据看起来与您在问题中给我们的数据不同，您可以稍微调整一下。

您还可以通过使用`(?<=])\b`. 但我建议不要这样做，因为`\b`通常情况下，`\w`这是一件非常丑陋的事情。它的工作原理*大致*相同，但不完全一样，因为`\b`在这种情况下，相当于`(?=[\w])`并`\w`匹配更多的东西，即十进制数字和下划线。

快速 PowerShell 测试（它使用相同的正则表达式实现，因为它是 .NET 下面）：

```
PS> 'name[]address[I]dob[]nationality[]occupation[]' -split '(?<=])(?=[a-z])'
name[]
address[I]
dob[]
nationality[]
occupation[] 
```

为了完整起见，还有另一种选择。您可以在要保留的标记*之间*拆分字符串，也可以只收集要保留的标记的所有匹配项。在后一种情况下，您需要一个与您需要的模式相匹配的模式，例如

```
[a-z]+\[[^\]]*] 
```

或者[丹尼斯给出的答案](https://stackoverflow.com/a/14398406/73070)（我只是倾向于避免`\w`，`\b`除了快速和肮脏的黑客或打高尔夫球，因为我坚持认为它们没有有用的应用程序）。您可以将其与`Regex.Matches`.

通常这两种方法都可以正常工作，然后取决于拆分或匹配模式是否更容易理解。因为`Regex.Matches`你会得到`Match`对象`string[]`，所以如果你需要它，你实际上不会得到 a ，所以这也需要`.Select(m => m.Value)`。

在这种情况下，我想这两个正则表达式都不应该单独留下来解释它的作用。我可以很好地阅读它们，但是许多开发人员对正则表达式有些不安，尤其是像环视这样的更高级的概念通常需要解释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T11:56:02.193

```
text.Split(new Char[] { ']' }, StringSplitOptions.RemoveEmptyEntries).Select(s => s + "]").ToArray(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T11:54:19.623

使用这个正则表达式模式：

```
\w*\[\w*\] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T11:58:37.980

```
string inputString = "name[]address[I]dob[]nationality[]occupation[]";    
var result = Regex.Matches(inputString, @".*?\[I?\]").Cast<Match>().Select(m => m.Groups[0].Value).ToArray(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-18T11:55:20.697

正则表达式应该没问题。您还可以考虑使用 string.IndexOf 捕获开始和结束方括号，例如：

```
IEnumerable<string> Results(string input)
{
    int currentIndex = -1;
    while (true)
    {
        currentIndex++;
        int openingBracketIndex = input.IndexOf("[", currentIndex);
        int closingBracketIndex = input.IndexOf("]", currentIndex);

        if (openingBracketIndex == -1 || closingBracketIndex == -1)
            yield break;

        yield return input.Substring(currentIndex, closingBracketIndex - currentIndex + 1);
        currentIndex = closingBracketIndex;     
    }
} 
```

# jquery - 如何动画：使用 jQuery 选择器之前

> ID：14398266
> 
> 赞同：2
> 
> 时间：2013-01-18T11:45:52.547
> 
> 标签：jquery, css, animation, transition, pseudo-element

我有一些元素：在伪选择器定义之前。我需要为其添加一些过渡、动画，但在 CSS 中这是不可能的。所以我认为我可以用 jQuery 做到这一点，但有些东西也不能正常工作。你能帮助我吗？这是我的代码：

```
var pilot = $('#remote_control'),
    pilot_shadow = $('#remote_control:before');
pilot.on({
    mouseenter: function(){
        pilot_shadow.animate({
            opacity: 0
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T13:14:26.833

If you use [http://jquery.lukelutman.com/plugins/pseudo/jquery.pseudo.js](http://jquery.lukelutman.com/plugins/pseudo/jquery.pseudo.js)

When you do this, it will work:

```
pilot_shadow = $('#remote_control:before'); 
```

# php - 绝对位置不起作用

> ID：14398268
> 
> 赞同：-2
> 
> 时间：2013-01-18T11:45:53.943
> 
> 标签：php, css, positioning, mozilla

绝对位置在 Mozilla 中不起作用。对于 jquery 日历，我将 position:absolute 用于 div，它似乎除了 windows 中的 mozilla 之外都可以工作。当我删除 position:absolute 时，它​​将在 windows firefox 中工作，但在所有其他浏览器中仅显示备用月份

jQuery是

```
var CalendarEightysix = new Class({
    Implements: Options,

    options: {
        'slideDuration': 500,
        'fadeDuration': 200,
        'toggleDuration': 200,
        'fadeTransition': Fx.Transitions.linear,
        'slideTransition': Fx.Transitions.Quart.easeOut,

        'prefill': true,
        'defaultDate': null,
        'linkWithInput': true,

        'theme': 'default',
        'defaultView': 'month',
        'startMonday': false,
        'alwaysShow': false,
        'injectInsideTarget': false,
        'format': '%n/%d/%Y',
        'alignX': 'right',
        'alignY': 'ceiling',
        'offsetX': 0,
        'offsetY': 0,

        'draggable': false,
        'pickable': true,
        'toggler': null,
        'pickFunction': $empty,
        'disallowUserInput': false,

        'minDate': null,
        'maxDate': null,
        'excludedWeekdays': null,
        'excludedDates': null,

        'createHiddenInput': false,
        'hiddenInputName': 'date',
        'hiddenInputFormat': '%t'
    },

    initialize: function(target, options) {
        this.setOptions(options);

        this.target = $(target);
        this.transitioning = false;

        //Extend Date with unix timestamp parser
        Date.defineParser({
            re: /^[0-9]{10}$/,
            handler: function(bits) { return new Date.parse('Jan 01 1970').set('seconds', bits[0]); }
        });

        //Selected date
        if($defined(this.options.defaultDate)) this.selectedDate = new Date().parse(this.options.defaultDate).clearTime();
        else if(this.options.linkWithInput && $chk(this.target.get('value'))) this.selectedDate = new Date().parse(this.target.get('value')).clearTime();
        if(!$defined(this.selectedDate) || !this.selectedDate.isValid()) this.selectedDate = new Date();
        this.viewDate = this.selectedDate.clone().set('date', 1).clearTime();

        //Base
        var innerHtml = '<div class="wrapper"><div class="header"><div class="arrow-left"></div><div class="arrow-right"></div><div class="label clickable"></div></div>'+
                            '<div class="body"><div class="inner"><div class="container a"></div><div class="container b"></div></div></div><div class="footer"></div></div>';
        this.element = new Element('div', { 'class': 'calendar-eightysix', 'html': innerHtml, 'style': 'display: '+ (this.options.alwaysShow ? 'block' : 'none') }).addClass(this.options.theme);

        if(this.options.injectInsideTarget) this.element.injectBottom(this.target);
        else {
            this.element.injectBottom($(document.body));
            this.position();
            window.addEvent('resize', this.position.bind(this));
        }

        this.currentContainer = this.element.getElement('.container.a').setStyle('z-index', 999);
        this.tempContainer = this.element.getElement('.container.b').setStyle('z-index', 998);

        //Header
        this.header = this.element.getElement('.header');
        this.label = this.header.getElement('.label');
        this.arrowLeft = this.header.getElement('.arrow-left');
        this.arrowRight = this.header.getElement('.arrow-right');

        this.label.addEvent('click', this.levelUp.bind(this));
        this.arrowLeft.addEvent('click', this.slideLeft.bind(this));
        this.arrowRight.addEvent('click', this.slideRight.bind(this));

        //Date range
        if($defined(this.options.minDate)) {
            this.options.minDate = Date.parse(this.options.minDate).clearTime();
            if(!this.options.minDate.isValid()) this.options.minDate = null;
        }
        if($defined(this.options.maxDate)) {
            this.options.maxDate = Date.parse(this.options.maxDate).clearTime();
            if(!this.options.maxDate.isValid()) this.options.maxDate = null;
        }

        //Excluded dates
        if($defined(this.options.excludedDates)) {
            var excludedDates = [];
            this.options.excludedDates.each(function(date) {
                excludedDates.include(this.format(new Date().parse(date).clearTime(), '%t'));
            }.bind(this));
            this.options.excludedDates = excludedDates;
        }

        //Dragger
        if(this.options.draggable && !this.options.injectInsideTarget) {
            this.header.addClass('dragger');
            new Drag(this.element, { 'handle': this.header });
        }

        //Hidden input
        if(this.options.createHiddenInput) {
            this.hiddenInput = new Element('input', { 'type': 'hidden', 'name': this.options.hiddenInputName }).injectAfter(this.target);
        }

        //Prefill date
        if(this.options.prefill) this.pick();

        //Link with input
        if(!this.options.disallowUserInput && this.options.linkWithInput && this.target.get('tag') == 'input') {
            this.target.addEvent('keyup', function() {
                this.setDate(this.target.get('value'), false);
            }.bind(this));
        }

        //Disallow input
        if(this.options.disallowUserInput && this.target.get('tag') == 'input') 
            this.target.addEvents({ 'keydown': ($lambda(false)), 'contextmenu': ($lambda(false)) });

        //Toggler
        if($defined(this.options.toggler)) this.options.toggler = $(this.options.toggler);

        //Show / hide events
        ($defined(this.options.toggler) ? this.options.toggler : this.target).addEvents({
            'focus': this.show.bind(this), 'click': this.show.bind(this)
        });

        if(!this.options.alwaysShow) document.addEvent('mousedown', this.outsideClick.bind(this));
        MooTools.lang.addEvent('langChange', function() { this.render(); this.pick(); }.bind(this));

        //View
        this.view = this.options.defaultView;
        this.render();
    },

    render: function() {
        this.currentContainer.empty();

        switch(this.view) {
            case 'decade': this.renderDecade(); break;
            case 'year': this.renderYear(); break;
            default: this.renderMonth();
        }
    },

    renderMonth: function() {
        this.view = 'month';
        this.currentContainer.empty().addClass('month');
        if(this.options.pickable) this.currentContainer.addClass('pickable');

        var lang = MooTools.lang.get('Date'), weekdaysCount = this.viewDate.format('%w') - (this.options.startMonday ? 1 : 0);
        if(weekdaysCount == -1) weekdaysCount = 6;
        var today = new Date();

        //Label
        this.label.set('html', lang.months[this.viewDate.get('month')] +' '+ this.viewDate.format('%Y'));

        //Day label row
        var row = new Element('div', { 'class': 'row' }).injectBottom(this.currentContainer);
        for(var i = (this.options.startMonday ? 1 : 0); i < (this.options.startMonday ? 8 : 7); i++) {
            var day = new Element('div', { 'html': lang.days[this.options.startMonday && i == 7 ? 0 : i] }).injectBottom(row);
            day.set('html', day.get('html').substr(0, 2));
        }

        //Add days for the beginning non-month days
        row = new Element('div', { 'class': 'row' }).injectBottom(this.currentContainer);
        y = this.viewDate.clone().decrement('month').getLastDayOfMonth();
        for(var i = 0; i < weekdaysCount; i++) {
            this.injectDay(row, this.viewDate.clone().decrement('month').set('date', y - (weekdaysCount - i) + 1), true);
        }

        //Add month days
        for(var i = 1; i <= this.viewDate.getLastDayOfMonth(); i++) {
            this.injectDay(row, this.viewDate.clone().set('date', i));
            if(row.getChildren().length == 7) {
                row = new Element('div', { 'class': 'row' }).injectBottom(this.currentContainer);
            }
        }

        //Add outside days
        var y = 8 - row.getChildren().length, startDate = this.viewDate.clone().increment('month').set('date', 1);
        for(var i = 1; i < y; i++) {
            this.injectDay(row, startDate.clone().set('date', i), true);
        }

        //Always have six rows
        for(var y = this.currentContainer.getElements('.row').length; y < 7; y++) {
            row = new Element('div', { 'class': 'row' }).injectBottom(this.currentContainer);
            for(var z = 0; z < 7; z++) {
                this.injectDay(row, startDate.clone().set('date', i), true);
                i++;
            }
        }

        this.renderAfter();
    },

    //Used by renderMonth
    injectDay: function(row, date, outside) {
        today = new Date();

        var day = new Element('div', { 'html': date.get('date') }).injectBottom(row);
        day.date = date;
        if(outside) day.addClass('outside');

        if(($defined(this.options.minDate) && this.format(this.options.minDate, '%t') > this.format(date, '%t')) || 
           ($defined(this.options.maxDate) && this.format(this.options.maxDate, '%t') < this.format(date, '%t')) ||
           ($defined(this.options.excludedWeekdays) && this.options.excludedWeekdays.contains(date.format('%w').toInt())) ||
           ($defined(this.options.excludedDates) && this.options.excludedDates.contains(this.format(date, '%t'))))
            day.addClass('non-selectable');
        else if(this.options.pickable) day.addEvent('click', this.pick.bind(this));

        if(date.format('%x') == today.format('%x')) day.addClass('today');
        if(date.format('%x') == this.selectedDate.format('%x')) day.addClass('selected');
    },

    renderYear: function() {
        this.view = 'year';
        this.currentContainer.addClass('year-decade');
        var today = new Date(), lang = MooTools.lang.get('Date').months;

        //Label
        this.label.set('html', this.viewDate.format('%Y'));

        var row = new Element('div', { 'class': 'row' }).injectBottom(this.currentContainer);
        for(var i = 1; i < 13; i++) {
            var month = new Element('div', { 'html': lang[i - 1] }).injectBottom(row);
            month.set('html', month.get('html').substr(0, 3));  //Setting and getting the innerHTML takes care of html entity problems (e.g. [M&a]uml;r => [Mär]z)
            var iMonth = this.viewDate.clone().set('month', i - 1);
            month.date = iMonth;

            if(($defined(this.options.minDate) && this.format(this.options.minDate.clone().set('date', 1), '%t') > this.format(iMonth, '%t')) ||
               ($defined(this.options.maxDate) && this.format(this.options.maxDate.clone().set('date', 1), '%t') < this.format(iMonth, '%t')))
                month.addClass('non-selectable');
            else month.addEvent('click', this.levelDown.bind(this));

            if(i - 1 == today.get('month') && this.viewDate.get('year') == today.get('year')) month.addClass('today');
            if(i - 1 == this.selectedDate.get('month') && this.viewDate.get('year') == this.selectedDate.get('year')) month.addClass('selected');
            if(!(i % 4) && i != 12) row = new Element('div', { 'class': 'row' }).injectBottom(this.currentContainer);
        }

        this.renderAfter();
    },

    renderDecade: function() {
        this.label.removeClass('clickable');
        this.view = 'decade';
        this.currentContainer.addClass('year-decade');
        var today = new Date();

        var viewYear, startYear;
        viewYear = startYear = this.viewDate.format('%Y').toInt();
        while(startYear % 12) startYear--;

        //Label
        this.label.set('html', startYear +' &#150; '+ (startYear + 11));

        var row = new Element('div', { 'class': 'row' }).injectBottom(this.currentContainer);
        for(var i = startYear; i < startYear + 12; i++) {
            var year = new Element('div', { 'html': i }).injectBottom(row);
            var iYear = this.viewDate.clone().set('year', i);
            year.date = iYear;

            if(($defined(this.options.minDate) && this.options.minDate.get('year') > i) ||
               ($defined(this.options.maxDate) && this.options.maxDate.get('year') < i)) year.addClass('non-selectable');
            else year.addEvent('click', this.levelDown.bind(this));

            if(i == today.get('year')) year.addClass('today');
            if(i == this.selectedDate.get('year')) year.addClass('selected');
            if(!((i + 1) % 4) && i != startYear + 11) row = new Element('div', { 'class': 'row' }).injectBottom(this.currentContainer);
        }

        this.renderAfter();
    },

    renderAfter: function() {
        //Iterate rows and add classes and remove navigation if nessesary
        var rows = this.currentContainer.getElements('.row');
        for(var i = 0; i < rows.length; i++) {
            rows[i].set('class', 'row '+ ['a', 'b', 'c', 'd', 'e', 'f', 'g'][i] +' '+ (i % 2 ? 'even' : 'odd')).getFirst().addClass('first');
            rows[i].getLast().addClass('last');

            if(i == (this.view == 'month' ? 1 : 0) && $defined(this.options.minDate) && this.format(this.options.minDate, '%t') >= this.format(rows[i].getFirst().date, '%t')) 
                this.arrowLeft.setStyle('visibility', 'hidden');
            if(i == rows.length - 1 && $defined(this.options.maxDate)) {
                if((this.view == 'month' && this.format(this.options.maxDate, '%t') <= this.format(rows[i].getLast().date, '%t')) ||
                   (this.view == 'year' && this.format(this.options.maxDate, '%t') <= this.format(rows[i].getLast().date.clone().increment('month'), '%t')) ||
                   (this.view == 'decade' && this.format(this.options.maxDate, '%t') <= this.format(rows[i].getLast().date.clone().increment('year'), '%t')))
                    this.arrowRight.setStyle('visibility', 'hidden');
            }
        };
    },

    slideLeft: function() {
        this.switchContainers();

        //Render new view
        switch(this.view) {
            case 'month':  this.viewDate.decrement('month'); break;
            case 'year':   this.viewDate.decrement('year'); break;
            case 'decade': this.viewDate.set('year', this.viewDate.get('year') - 12); break;
        }
        this.render();

        //Tween the new view in and old view out
        this.currentContainer.set('tween', { 'duration': this.options.slideDuration, 'transition': this.options.slideTransition }).tween('left', [-this.currentContainer.getWidth(), 0]);
        this.tempContainer.set('tween', { 'duration': this.options.slideDuration, 'transition': this.options.slideTransition }).tween('left', [0, this.tempContainer.getWidth()]);
    },

    slideRight: function() {
        this.switchContainers();

        //Render new view
        switch(this.view) {
            case 'month':  this.viewDate.increment('month'); break;
            case 'year':   this.viewDate.increment('year'); break;
            case 'decade': this.viewDate.set('year', this.viewDate.get('year') + 12); break;
        }
        this.render();

        //Tween the new view in and old view out
        this.currentContainer.set('tween', { 'duration': this.options.slideDuration, 'transition': this.options.slideTransition }).tween('left', [this.currentContainer.getWidth(), 0]);
        this.tempContainer.set('tween', { 'duration': this.options.slideDuration, 'transition': this.options.slideTransition }).tween('left', [0, -this.currentContainer.getWidth()]);
    },

    levelDown: function(e) {
        if(this.transitioning) return;
        this.switchContainers();
        this.viewDate = e.target.date;

        //Render new view
        switch(this.view) {
            case 'year': this.renderMonth(); break;
            case 'decade': this.renderYear(); break;
        }

        //Tween the new view in and old view out
        this.transitioning = true;
        this.currentContainer.set('tween', { 'duration': this.options.fadeDuration, 'transition': this.options.fadeTransition, 
                                             'onComplete': function() { this.transitioning = false }.bind(this) }).setStyles({'opacity': 0, 'left': 0}).fade('in');
        this.tempContainer.set('tween', { 'duration': this.options.fadeDuration, 'transition': this.options.fadeTransition }).fade('out');
    },

    levelUp: function() {
        if(this.view == 'decade' || this.transitioning) return;
        this.switchContainers();

        //Set viewdates and render
        switch(this.view) {
            case 'month': this.renderYear(); break;
            case 'year':  this.renderDecade(); break;
        }

        //Tween the new view in and old view out
        this.transitioning = true;
        this.currentContainer.set('tween', { 'duration': this.options.fadeDuration, 'transition': this.options.fadeTransition, 
                                             'onComplete': function() { this.transitioning = false }.bind(this) }).setStyles({'opacity': 0, 'left': 0}).fade('in');
        this.tempContainer.set('tween', { 'duration': this.options.fadeDuration, 'transition': this.options.fadeTransition }).fade('out');
    },

    switchContainers: function() {
        this.currentContainer = this.currentContainer.hasClass('a') ? this.element.getElement('.container.b') : this.element.getElement('.container.a');
        this.tempContainer = this.tempContainer.hasClass('a') ? this.element.getElement('.container.b') : this.element.getElement('.container.a');
        this.currentContainer.empty().removeClass('month').removeClass('year-decade').setStyles({ 'opacity': 1, 'display': 'block', 'z-index': 999 });
        this.tempContainer.setStyle('z-index', 998);

        this.label.addClass('clickable');
        this.arrowLeft.setStyle('visibility', 'visible');
        this.arrowRight.setStyle('visibility', 'visible');
    },

    pick: function(e) {
        if($defined(e)) {
            this.selectedDate = e.target.date;
            this.element.getElements('.selected').removeClass('selected');
            e.target.addClass('selected');
        }

        var value = this.format(this.selectedDate);

        if(!this.options.injectInsideTarget) {
            switch(this.target.get('tag')) {
                case 'input': this.target.set('value', value); break;
                default: this.target.set('html', value);
            }
            (this.hide.bind(this)).delay(150);
        }

        if($defined(this.hiddenInput)) this.hiddenInput.set('value', this.format(this.selectedDate, this.options.hiddenInputFormat));
        this.options.pickFunction(this.selectedDate);
    },

    position: function() {
        var top, left;
        var coordinates = this.target.getCoordinates();

        switch(this.options.alignX) {
            case 'left':
                left = coordinates.left;
                break;
            case 'middle':
                left = coordinates.left + (coordinates.width / 2) - (this.element.getWidth() / 2);
                break;
            case 'right': default:
                left = coordinates.left + coordinates.width;
        }

        switch(this.options.alignY) {
            case 'bottom':
                top = coordinates.top + coordinates.height;
                break;
            case 'top':
                top = coordinates.top - this.element.getHeight();
                break;
            case 'ceiling': default:
                top = coordinates.top;
        }

        left += this.options.offsetX.toInt();
        top += this.options.offsetY.toInt();

        this.element.setStyles({ 'top': top, 'left': left });
    },

    show: function() {
        if(!this.visible & !this.options.alwaysShow) {
            this.visible = true;
            if(!Browser.Engine.trident) {
                this.element.setStyles({ 'opacity': 0, 'display': 'block' });
                if(!this.options.injectInsideTarget) this.position();
                this.element.set('tween', { 'duration': this.options.toggleDuration, 'transition': this.options.fadeTransition }).fade('in');
            }  else {
                this.element.setStyles({ 'opacity': 1, 'display': 'block' });
                if(!this.options.injectInsideTarget) this.position();
            }
        }
    },

    hide: function() {
        if(this.visible & !this.options.alwaysShow) {
            this.visible = false;
            if(!Browser.Engine.trident) {
                this.element.set('tween', { 'duration': this.options.toggleDuration, 'transition': this.options.fadeTransition,
                                            'onComplete': function() { this.element.setStyle('display', 'none') }.bind(this) }).fade('out');
            } else this.element.setStyle('display', 'none');
        }
    },

    toggle: function() {
        if(this.visible) this.hide();
        else this.show();
    },

    format: function(date, format) {
        if(!$defined(format)) format = this.options.format;
        if(!$defined(date)) return;
        format = format.replace(/%([a-z%])/gi,
            function($1, $2) {
                switch($2) {
                    case 'D': return date.get('date');
                    case 'n': return date.get('mo') + 1;
                    case 't': return (date.getTime() / 1000).toInt();
                }
                return '%'+ $2;
            }
        );
        return date.format(format);
    },

    outsideClick: function(e) {
        if(this.visible) {
            var elementCoords = this.element.getCoordinates();
            var targetCoords  = this.target.getCoordinates();
            if(((e.page.x < elementCoords.left || e.page.x > (elementCoords.left + elementCoords.width)) ||
                (e.page.y < elementCoords.top  || e.page.y > (elementCoords.top + elementCoords.height))) &&
               ((e.page.x < targetCoords.left  || e.page.x > (targetCoords.left + targetCoords.width)) ||
                (e.page.y < targetCoords.top   || e.page.y > (targetCoords.top + targetCoords.height))) ) this.hide();
        }
    },

    //Version 1.0.1 addition, can easily be called from outside
    setDate: function(value, pick) {
        if(!$defined(pick)) pick = true;
        if($type(value) == 'date') {
            var date = value.clearTime();
        } else {
            var date = $chk(value) ? new Date().parse(this.target.get('value')).clearTime() : new Date().clearTime();
        }
        if(date.isValid()) {
            this.selectedDate = date.clone();
            this.viewDate = this.selectedDate.clone().set('date', 1);
            this.render();
            if(pick) this.pick();
        }
    }
}); 
```

Style.css 是

```
 .calendar-eightysix .body {
            position: relative;
        }
            .calendar-eightysix .body .inner .container {
                position: absolute;
                left: 0;
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T11:51:40.637

在 jquery 中，将 switchContainers: function() 替换为

```
switchContainers: function() {
    this.currentContainer = this.currentContainer.hasClass('a') ? this.element.getElement('.container.b') : this.element.getElement('.container.a');
    this.tempContainer = this.tempContainer.hasClass('a') ? this.element.getElement('.container.b') : this.element.getElement('.container.a');
    this.currentContainer.empty().removeClass('month').removeClass('year-decade').setStyles({ 'opacity': 1, 'display': 'block', 'z-index': 999 });
    this.tempContainer.setStyles({ 'display': 'none', 'z-index': 998 });
    this.currentContainer.hasClass('a') ? this.currentContainer.setStyles({ 'opacity': 1, 'display': 'block', 'z-index': 999 }) : '';

    this.label.addClass('clickable');
    this.arrowLeft.setStyle('visibility', 'visible');
    this.arrowRight.setStyle('visibility', 'visible');
}, 
```

在 style.css 中替换`.calendar-eightysix .body .inner .container`为

```
.calendar-eightysix .body .inner .container {
    left: 0;
} 
```

# tinymce - tinymce 显示替换字符而不是英镑符号

> ID：14398271
> 
> 赞同：2
> 
> 时间：2013-01-18T11:46:01.807
> 
> 标签：tinymce, wordpress

我正在使用[http://wordpress.org/extend/plugins/nextgen-tinymce-description/](http://wordpress.org/extend/plugins/nextgen-tinymce-description/)我正在尝试获取英镑符号而不是替换字符�（带有白色问号的黑色菱形）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T12:04:52.447

您可以将charmap 按钮添加到您的按钮配置中。使用此字符插入按钮，您将在插入后看到磅字符。我猜在您的情况下，该字符未作为 html 实体输入：`&pound;`

# php - 从 PHP 到 Android 的多设备推送通知

> ID：14398273
> 
> 赞同：-3
> 
> 时间：2013-01-18T11:46:04.113
> 
> 标签：php, android, notifications, push

如何从[PHP](http://en.wikipedia.org/wiki/PHP)向多个 Android 设备发送推送通知？

我有将其发送到单个设备的工作代码，但不适用于多个设备。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T11:59:05.770

根据谷歌的文档，

> Google Cloud Messaging for Android (GCM) 是一项服务，可帮助开发人员将数据从服务器发送到 Android 设备上的 Android 应用程序

使用此服务，您可以在新数据可用时向您的应用程序发送数据，而不是及时向服务器发出请求。

*   查看[使用 Google Cloud Messaging (GCM)、PHP 和 MySQL 的 Android 推送通知](http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/)。这是 GCM 通知的很好的指导教程
*   还有一个很好的工作示例，说明[如何为 Android 实现 GCM PHP 推送服务器](http://www.sherif.mobi/2012/07/gcm-php-push-server.html)

# javascript - 在 javascript var 中引用

> ID：14398275
> 
> 赞同：1
> 
> 时间：2013-01-18T11:46:12.433
> 
> 标签：javascript, string, modx, modx-revolution

我想做这样的事情：

```
<script>
var text = "this is some sample text that i want to replace";
var new_text = text.replace(/'/g, "\\'");
var new_text = text.replace(/"/g, "\"");
document.write(new_text);
</script> 
```

但只要我的 var 中有一个 " ，`text var text = "this is some sample "text" that I want to replace";`它就会破坏我的 javascript ，因此我无法替换它。

我的 var 文本来自 modx CMS tiny mce 字段，因此它是一种像这样显示的 $ [[*content]]。

这是我的 modx 模板代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr" lang="fr"> 
<head><meta http-equiv="content-type" content="text/html; charset=utf-8"/>
<title>[[*titrepage]]</title>
<style type="text/css">
div.code_view {
    height:auto;
    }

div.code_demo {

    /* margin:1em auto 1.4em; */
    border:1px solid #ddd;
                width: 535px;
                color: #112433;

    }

div#content div.code_demo ul.demoLinks {
    margin:6px 6px 10px;
    }

div#infoDiv { 
   padding:0 8px 8px;
   }

div#infoDiv h4 {
    margin:4px 0;
    font-size:1.1em;
    }

</style>
<script src="http://aurorafilms.eskem-studio.com/assets/templates/aurora/js/dw_contentswap.js" type="text/javascript"></script>
<script type="text/javascript" charset="utf-8">

function init_ContentSwap() {
    var swap1 = {
        restoreDefault: false,
        content: {
            'old': "<h4>Synopsis</h4><p>[[*synopsis]]</p>",
            'infos': '<h4>Infos</h4><p>[[*infos]]</p>',
                                            'presse': "<h4>Presse</h4><p>[[*Presse:jsonEncode]]</p>",
            'festivals': "<h4>Festivals</h4><p>[[*festival]]</p>"

        }
    }

    dw_ContentSwap.setup(swap1);
}

dw_Event.add(window, 'load', init_ContentSwap);

</script></head>
<body>  
<div id="page">    <ul class="demoLinks">
        <li style="z-index: 10; width: 80px; position: relative; "><a href="#old" class="showInfo old">Synopsis</a></li>
        <li style="z-index: 9; width: 80px; position: relative;  left: -20px;"><a href="#infos" class="showInfo infos">Infos</a></li>
        <li style="z-index: 8; width: 80px; position: relative;  left: -40px;"><a href="#presse" class="showInfo presse">Presse</a></li>
        <li style="z-index: 7; width: 80px; position: relative;  left: -60px;"><a href="#festivals" class="showInfo festivals">Festivals</a></li>

    </ul><div id="content" style="float: left;" >
            <div id="text">
<!-- demo -->

<div class="code_demo">

    <div id="infoDiv"><h4>Synopsis</h4><p>[[*synopsis]]</p></div>
</div>

<!-- end demo -->

<p class="clearer">&nbsp;</p></div> </div>  </div>    

</body>
</html> 
```

那么最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T12:14:29.807

问题是，您试图将资源中的内容用作 javascript 字符串（由 modx 解析器注入）。但是 javascript 中的硬编码字符串必须遵循一些规则（没有或只有转义的换行符，正确的引用）。因此，简单地在它周围加上一些引号只会在最简单的情况下有所帮助。

要解决您的问题，请尝试以下操作：

1\. 创建一个新的[片段](http://rtfm.modx.com/display/revolution20/Snippets)，调用`jsonEncode`内容如下：

```
<?php
return json_encode($input); 
```

2\. 将要使用资源内容的 javascript 代码更改为：

```
var text = [[*content:jsonEncode]]; 
```

链接：

*   [输入和输出滤波器（输出修改器）](http://rtfm.modx.com/display/revolution20/Input+and+Output+Filters+%28Output+Modifiers%29)
*   [将 PHP 字符串传递给 Javascript 变量（并转义换行符）](https://stackoverflow.com/questions/168214/pass-a-php-string-to-a-javascript-variable-and-escape-newlines)

* * *

**更新**

看到添加的代码，我建议采用不同的方法。如果您使用嵌套的 modx 变量，我上面描述的内容可能会中断。我认为最节省的方法是将js中需要访问的任何内容呈现到隐藏的div中。并`innerHTML`从该元素中提取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T12:13:45.623

尝试：

```
<script>
var text = "this is some sample text that i want to replace";
var new_text = new_text.replace(/["']/g, "'")
document.write(new_text);
</script> 
```

# html - HTML/CSS：Webkit 浏览器截断了斜体链接

> ID：14398286
> 
> 赞同：5
> 
> 时间：2013-01-18T11:47:00.297
> 
> 标签：html, css, hover, hyperlink

**我有什么我**
有一个普通的 HTML 链接，比如`<a href="#">Link</a>`. 在我的样式表中，我已将该链接设置为，`display: inline-block;`因为我必须稍微推动它以匹配布局。设置为
。`font-style``italic`

**问题**
这导致了以下问题： 因为文本设置为斜体，链接单词的最后一个字母超出了链接周围的框。正因为如此，Safari 和 Chrome 在悬停时“切割”了颜色变化。请参阅我为链接分配背景颜色以使其更清晰的屏幕截图。
![在此处输入图像描述](../Images/13e959b55276dbdf29b763d908ac0444.png)
正常链接颜色是浅色，蓝色是悬停颜色。

Firefox 可以正确管理这一点，而不会削减任何内容。

为链接设置填充可能是最简单的解决方案，但我觉得对我来说是一种解决方法。还有其他解决方案吗？

**小提琴：http:** [//jsfiddle.net/qD78e/](http://jsfiddle.net/qD78e/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T12:35:50.507

您始终可以向斜体类添加填充，例如：

```
a{
    display: inline-block;
    font-style: italic;
    font-size: 100pt;
    background-color: red;
    color: white;
    padding: 0 10px;
} 
```

会给你这个： http: [//jsfiddle.net/8ZAUf/](http://jsfiddle.net/8ZAUf/) - 这似乎在我测试的所有浏览器（opera，safari，chrome，firefox）中显示相同。

您也可以接受 Kamo 的建议，尽管我会稍微修改一下并执行以下操作：

```
#prob:after{
  content: '\00a0';
  font-size: 18pt;
} 
```

给你： http: [//jsfiddle.net/AZS6S/](http://jsfiddle.net/AZS6S/)，然后你可以重新使用它（显然是通过使用一个类，而不是一个id）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T12:30:53.140

您可以添加`&nbsp;`到您的链接：`<a href="#" id="prob">Link&nbsp;</a>`但这是常见的错误和令人沮丧的一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T12:45:12.420

您可以使用 javascript 强制重绘。它看起来仍然不完全正确，因为文本仍然大于边界框，您可以在背景中看到边界框，但如果这不是问题，您可以使用此解决方案。

看：

[http://jsfiddle.net/qD78e/15/](http://jsfiddle.net/qD78e/15/)

主要的事情：

```
var prob = document.getElementById('prob');
prob.addEventListener('mouseover', function() {
  // force a repaint of the parentNode:
  prob.parentNode.style.color = 'blue';
}, false);
prob.addEventListener('mouseout', function() {
  // force a repaint of the parentNode:
  prob.parentNode.style.color = 'pink';
}, false); 
```

可能有更好的方法来强制重绘。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T12:45:08.780

```
<style>
.link{
    background:#999;
    display:inline-block;
}
.link a{
    font-style:italic;
    color:#000;

}
.link a:hover{
    color:#00F;
}
</style>

<div class="link">
    <a href="#">Link</a>
</div> 
```

我已经创建了上面的代码。请试试这个。

# c# - 在 LINQ to CRM 中组合 LINQ 查询会导致问题吗？

> ID：14398292
> 
> 赞同：1
> 
> 时间：2013-01-18T11:47:28.343
> 
> 标签：c#, linq, dynamics-crm-4

奇怪的事情正在发生。

如果我这样做：

```
 var allAccountsQuery = from acc in baseQ
                               where
                                   //high potential check - 1, 2, 3
                               (acc.mcpl_potencjal_klienta == 1 || acc.mcpl_potencjal_klienta == 2 || acc.mcpl_potencjal_klienta == 3) &&
                                   //directors block check
                               ((acc.mcpl_blokada_dyrektorska == true && acc.mcpl_blokada_do <= date) || acc.mcpl_blokada_dyrektorska == false || acc.mcpl_blokada_dyrektorska == null) &&
                                   //sack assign date check
                               (acc.mcpl_dataprzypisaniazworka == null || acc.mcpl_dataprzypisaniazworka < date) &&
                                   //owner change check
                               (acc.mcpl_datazmianywasciciela == null || acc.mcpl_datazmianywasciciela < date) &&
                                   //creation date check
                                   //TODO:For testing!
                                   //(acc.mcpl_data_utworzenia_test < date)
                               (acc.createdon < date)
                               select acc;

        var joinQuery = from acc in allAccountsQuery
                        join opp in ctx.opportunityopportunities on acc.accountid equals opp.customerid.Value
                        select new
                        {
                            Account = acc,
                            Opportunity = opp
                        };

        Plugins.Common.XrmHelper.ClearCache("account");
        var joinResult = joinQuery.ToList(); 
```

然后我会在执行这个查询时得到一个未知的平台错误。我需要将整个`where`子句从复制粘贴`allAccountsQuery`到`joinQuery`并`baseQ`再次使用，然后它就可以工作了。

这里发生了什么？我认为只要您不执行任何不受支持的操作，您就可以安全地加入 LINQ 查询。

PS。最奇怪的部分是粘贴的代码将在略有不同的`where`条件下工作。

聚苯乙烯。`baseQ`只是一个更简单的`where`查询，就像`allAccountsQuery`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T14:28:55.083

也许不是答案，但由于我无法发表评论，也没有人回答，我认为这可能会有所帮助。为什么你不在第一个查询中加入？据我所知，LINQ CRM 查询在我们有 OR 谓词的子句中加入表时存在问题，而不是当我们尝试从不同的表中进行选择时，我认为查询应该可以工作。我有一篇[文章](https://stackoverflow.com/a/13644870/1528483.)解释了我学到的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T14:41:25.993

与其他提供程序生命 EF 或 Linq-to-SQL 相比，Linq-to-CRM 支持的操作集有限。

对两个查询中的一个或两个进行补水可能会取得更好的成功。由于您的`account`查询有 where 子句，请尝试对其进行补水：

```
var joinQuery = from acc in allAccountsQuery.ToList()   // call ToList() to hydrate the query
                join opp in ctx.opportunityopportunities
                   on acc.accountid equals opp.customerid.Value
                select new
                {
                    Account = acc,
                    Opportunity = opp
                }; 
```

如果您的人数较多，`Opportunities`您可能希望在执行`Join`.

# java - jdk7 RessourceBundle / 日志记录问题

> ID：14398297
> 
> 赞同：0
> 
> 时间：2013-01-18T11:47:48.653
> 
> 标签：java, java-7, java.util.logging

我注意到来自 java.util.logging 的 Level 类的本地化消息在 Java7 上不起作用。看起来加载有`RessourceBundle`问题`sun.util.logging.resources.logging`

让我们考虑以下代码段

```
Locale.setDefault(Locale.GERMANY);
String msg = Level.SEVERE.getLocalizedName();
System.err.println(msg); 
```

在 java 6 上打印

```
SCHWERWIEGEND 
```

在 java 7 上打印

```
SEVERE 
```

我读了一篇文章，解释说 Locale 类在 jdk7 中重新实现。不过，这似乎很奇怪。我还尝试了 Java 7 设置

```
Locale.setDefault(Category.DISPLAY, Locale.GERMANY);
then 
Locale.setDefault(Category.FORMAT, Locale.GERMANY);
finally 
System.setProperty("sun.locale.formatasdefault", "true"); 
```

但似乎都不起作用。

这是 JVM 中的错误还是我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-15T21:53:07.190

这可能与[JDK-8028233](https://bugs.openjdk.java.net/browse/JDK-8028233)有关。[您可以通过“ java.util.logging.SimpleFormatter](http://docs.oracle.com/javase/7/docs/api/java/util/logging/SimpleFormatter.html) .format”系统属性或 LogManager 属性指定格式字符串来更改日期格式。

# jquery - jQuery css背景位置更改两次

> ID：14398298
> 
> 赞同：1
> 
> 时间：2013-01-18T11:47:49.573
> 
> 标签：jquery, background-position, animate.css

我基本上试图以相当快的速度连续两次改变 div 上的背景位置。这是我当前的代码：

```
$('.slide1').css({'margin':' 0 0 0 1000px','display':'none'}).delay(2400).show().animate({marginLeft: 0},1000, function(){ 
        $('.accordion').css('background','#000'); 
        $('.shadow-horizontal').css('visibility','visible');
        $('.panel:nth-child(2)').delay(2000).css('background-position','0px top'); //this one doesn't seem to fire
        $('.panel:nth-child(2)').delay(2000).css('background-position','-410px top'); //this one does 
    }); 
```

正在发生的只是第二个变化正在发生。第一个似乎根本没有受到影响。

我会注意到我需要使用 jQuery 来完成，理想情况下我更愿意将 jquery .css 更改包装在一个函数中，然后调用当前 jQuery .css 更改。

我也尝试了一个不起作用的长字符串版本。

```
$('.panel:nth-child(1)').css('background-position','0px top').delay(500).css('background-position','-41px top'); 
```

这是我所在位置的现场版本：http: [//faithandsony.co.uk/sony_accordion_hover-hightlight/](http://faithandsony.co.uk/sony_accordion_hover-hightlight/)

提前感谢您的任何答案。我会回答任何问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T11:53:35.143

这可能只是一个时间问题。您可以使用简单`timeout()`的方法在第二个之前执行第一个，使第二个 CSS 更改在执行前等待 1000 毫秒（或 1 秒）。

```
$('.panel:nth-child(2)').delay(2000).css('background-position','0px top');

setTimeout(function() {
    $('.panel:nth-child(2)').css('background-position','-410px top');
}, 4000); 
```

* * *

或者，将第一个的延迟保持在 2000，并将第二个更改为 4000，给出：

```
$('.panel:nth-child(2)').delay(2000).css('background-position','0px top'); 
$('.panel:nth-child(2)').delay(4000).css('background-position','-410px top'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T12:08:15.313

延迟仅适用于动画，

为了保持它的使用，只需做一个空动画

```
$('.panel:nth-child(2)').delay(2000).animate({},function()
{ $(this).css('background-position','0 top');
}).delay(2000).animate({},function()
{ $(this).css('background-position','-410px top');
}); 
```

如果它不适用于空 {}，请尝试为一个愚蠢的参数设置动画，如果您总是通过示例 margin:0 获得动画，则为他设置动画：

```
animate({margin:0},time,callback); 
```

# c# - 使用 C# DateTime 将 SQL 日期时间设置为最小值

> ID：14398300
> 
> 赞同：6
> 
> 时间：2013-01-18T11:47:52.507
> 
> 标签：c#, sql-server, datetime

我在 SQL Server 中有一个日期时间列。我相信它的最小值可能是 1753 年的某个日期或什么的。代表表的我的实体框架 POCO 包含一个日期时间。我想将数据库中的日期时间设置为可以设置的最小值。最简单的方法是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-18T11:50:44.770

可以使用以下属性检索该值；

```
SqlDateTime.MinValue 
```

有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/system.data.sqltypes.sqldatetime.minvalue.aspx 。](http://msdn.microsoft.com/en-us/library/system.data.sqltypes.sqldatetime.minvalue.aspx)

# php - 通过循环时数据未正确惰性化

> ID：14398303
> 
> 赞同：0
> 
> 时间：2013-01-18T11:48:04.737
> 
> 标签：php, mysqli

```
 $answersql = "INSERT INTO Penalty_Marks (PenaltyAnswer, PenaltyMarks, QuestionId) 
    VALUES (?, ?, ?)";

if (!$insertanswer = $mysqli->prepare($answersql)) {
    // Handle errors with prepare operation here
}

   $c = count($_POST['incorrect']);

    for($i = 0;  $i < $c; $i++ )
    {

$incorrect = $_POST['incorrect'][$i];
$answerMarks = $_POST['answerMarks'][$i];
$numQuestion = $_POST['numQuestion'][$i];

$insertanswer->bind_param('sii', $incorrect, $answerMarks, $numQuestion);
$insertanswer->execute();

} 
```

上面的插入并不是将所有不正确的答案都插入到表格中，它只是在每个问题中插入一个不正确的答案。我究竟做错了什么？

下面是当前数据库表的样子：

```
PenaltyAnswerId PenaltyAnswer  PenaltyMarks  QuestionId
1               A              4             12
2               D              1             13 
```

下面是它应该是什么样的：

```
PenaltyAnswerId PenaltyAnswer  PenaltyMarks  QuestionId
1               A              4             12
2               B              3             12
3               D              0             12
4               D              1             13
5               E              1             13 
```

下面是表格：

```
<form id="PenaltyMarks" action="insertpenaltymarks.php" method="post">

    <table id='penaltytbl'>
    <?php

    foreach($ques_ans as $questionId => $inc_ans)
    {
        $q_row_span = count($inc_ans);
        $row_count = 0;
        $inc_ans = array_values($inc_ans);

    ?>

    <tr class="questiontd">
    <td>
    <input type="hidden" name="numQuestion[]" value="<?php echo$questionId?>" />
    </td>

    <td>
    <input type="hidden" class="hiddenincorrect" name="incorrect[]" value="<?php echo$inc_ans[$row_count];?>">
    </td>

    <td>
    <input  name="answerMarks[]" type="text" data-type="qmark" value='0'  />
    </td>

    </tr>
        <?php
            //remaining incorrect answers in separate row (if any) follows here
        if($row_count < $q_row_span - 1) 
        {
            for($i=($row_count + 1); $i<$q_row_span; $i++) { ?>     
                <tr>
                <td>
                <input type="hidden" class="hiddenincorrect" name="incorrect[]" value="<?php echo$inc_ans[$i];?>">
                </td>

                <td class="answermarkstd">
                <input  name="answerMarks[]" type="text" data-type="qmark" value='0'  />            
                </td>
                </tr>
        <?php
            }
        }
    }

    ?>
    </table>
<input id="submitBtn" name="submitPenalty" type="submit" value="Submit Marks" />
    </form> 
```

下面是jquery处理提交：

```
myClickHandler = function(e) {

       if (confirm("Are you sure you want to Proceed?" + "\n")) {
         $.ajax({
           url: "insertpenaltymarks.php",
           data: $("#PenaltyMarks").serialize(),
           async: false,
           type: "POST"
         });
         return true;
      } else {
        return false;
      }
    };

    $('#PenaltyMarks').submit(myClickHandler);

}); 
```

更新：

```
Question Table:

QuestionId (PK auto)  (int 10)
QuestionNo  (int 4)
QuestionContent (varchar 5000)

Penalty_Marks Table;

PenaltyAnswerId (PK auto) (int 10)
PenaltyAnswer (Varchar 5)
PenaltyMarks (int 3)
QuestionId (FK)  (int 10) Reference to QuestionId in Question Table 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T11:52:06.127

**更新**

使用您当前的代码，您可以`var_dump`发现`$_POST['numQuestion']`数组包含的成员可能比`$_POST['incorrect'][$i]`数组少。我也更新了我的代码。

```
<form id="PenaltyMarks" action="insertpenaltymarks.php" method="post">

<table id='penaltytbl'>
<?php

foreach($ques_ans as $questionId => $inc_ans)
{
    $q_row_span = count($inc_ans);
    $row_count = 0;
    $inc_ans = array_values($inc_ans);
?>

<tr class="questiontd">
<td>
<input type="hidden" name="numQuestion[<?php echo $questionId; ?>]" value="<?php echo$questionId?>" />
</td>

<td>
<input type="hidden" class="hiddenincorrect" name="incorrect[<?php echo $questionId; ?>][]" value="<?php echo$inc_ans[$row_count];?>">
</td>

<td>
<input  name="answerMarks[<?php echo $questionId; ?>][]" type="text" data-type="qmark" value='0'  />
</td>

</tr>
    <?php
        //remaining incorrect answers in separate row (if any) follows here
    if($row_count < $q_row_span - 1) 
    {
        for($i=($row_count + 1); $i<$q_row_span; $i++) { ?>     
            <tr>
            <td>
            <input type="hidden" class="hiddenincorrect" name="incorrect[<?php echo $questionId; ?>][]" value="<?php echo $inc_ans[$i];?>">
            </td>

            <td class="answermarkstd">
            <input  name="answerMarks[<?php echo $questionId; ?>][]" type="text" data-type="qmark" value='0' />            
            </td>
            </tr>
    <?php
        }
    }
}

?>
</table>
<input id="submitBtn" name="submitPenalty" type="submit" value="Submit Marks" />
</form> 
```

插入脚本也应该更改:)

```
foreach($_POST['incorrect'] as $questionId => $incorrectArray)
{
    for($i = 0; $i < count($incorrectArray), $i++)
    {
        $incorrect = $_POST['incorrect'][$questionId][$i];
        $answerMarks = $_POST['answerMarks'][$questionId][$i];
        $numQuestion = $_POST['numQuestion'][$questionId];

        $insertanswer->bind_param('sii', $incorrect, $answerMarks, $numQuestion);
        $insertanswer->execute();
    }
} 
```

# objective-c - 为什么我的 NSTextField 没有响应 setStringValue？

> ID：14398305
> 
> 赞同：0
> 
> 时间：2013-01-18T11:48:07.987
> 
> 标签：objective-c, xcode, cocoa-bindings

我有一个连接到界面生成器的对象（左侧的小蓝框之一（Xcode 4.5.2），并且我已经创建了到 NSTextField 的绑定，就像我习惯做的那样。我还合成了文本主文件中的字段（不太明白为什么，但很确定这是必要的）。但是，当我尝试将 setStringValue:@"a string" 发送到文本字段时，它不起作用。另外，当我尝试将文本字段对象打印到显示为空的命令行。通过谷歌搜索，我认为有些人在使用 init 而不是 awakefromnib 时会遇到这个问题，但是当我按下按钮时会触发我程序中的这个方法。代码如下。如果需要更多信息，请告诉我。谢谢。

```
#import <Foundation/Foundation.h>
#import "CSSRuleSet.h"

@interface RuleSetViewUpdater : NSObject
@property (weak) IBOutlet NSTextField *top;

-(void)updateFields:(CSSRuleSet *)RuleSet;

@end 
```

.

```
#import "RuleSetViewUpdater.h"

@implementation RuleSetViewUpdater

@synthesize top = _top;

-(void)updateFields:(CSSRuleSet *)RuleSet
{
    [_top setStringValue:[RuleSet getValue:@"top"]];
    NSLog(@"%@", _top);
}

@end 
```

xib结构

![在此处输入图像描述](../Images/27d84fb10ba64073f41b028651af12cf.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T18:44:47.040

好的，所以我意识到我做错了什么。基本上，我已经很好地将接口构建器连接到对象，并且它可以工作，但是由于我的程序的性质，我正在初始化一个新对象来控制接口，但没有意识到这样做它将无法访问界面。所以基本上我不得不传递原始对象。这可能没有任何意义，但如果需要更好地解释，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T14:58:53.013

首先，您需要从源文件到 XIB 文件中的对象的连接。您定义了一个插座，但不确定它是否实际连接。右键单击 XIB 文件中的对象并确保插座已连接。

您的 NSLog 语句（ NSLog(@"%@", _top); ）记录 NSTextField 对象本身。它记录“（null）”的事实意味着插座（尚未）连接。当您的 XIB 文件被加载时，插座不会立即连接。加载文件时，将对 XIB 文件中的所有对象调用 awakeFromNib()。在此之后，您应该能够使用插座访问对象。

# linq - C# MongoDB“近”查询

> ID：14398308
> 
> 赞同：8
> 
> 时间：2013-01-18T11:48:14.820
> 
> 标签：linq, c#-4.0, collections, mongodb-.net-driver

我有一个看起来像这样的 mongo 集合：

```
{
"_id": {
    "$oid": "50e9f38fbd7680c8090bcb4"
},
"guid": "D3G5wQ8RZL",
"lat": 37.503287248864,
"lng": -121.97620341421, 
```

我想使用 C# linq 执行“NEAR”查询

它需要看起来像这样

```
query = query.Where(x => LinqToMongo.Inject(Query.Near("Location", -96.770401, 32.816774, 20))); 
```

我的问题是 - 我应该对“位置”进行编码吗？如何查看上述收藏中的积分？

谢谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-09-22T18:01:04.420

从 MongoDB 2.4 开始，存储和索引 GeoJSON。[你可以在这里](http://docs.mongodb.org/manual/applications/geospatial-indexes/)找到所有的概念。

如何在 POCO 类型上定义 GeoJSON 属性：

```
public class Foo
{
  public GeoJsonPoint<GeoJson2DGeographicCoordinates> Location { get; set; }
} 
```

一个实例化的例子：

```
var docToInsert = new Foo
            {   
                Location = new GeoJsonPoint<GeoJson2DGeographicCoordinates>(
                    new GeoJson2DGeographicCoordinates(-121.97620341421, 37.503287248864))
            }); 
```

[$near](http://docs.mongodb.org/manual/reference/operator/near/)需要一个地理空间索引，由于我们存储的是 GeoJSON，它特别需要一个 2dsphere 索引：

```
var collection = //get MongoCollection<Foo> from MongoDatabase object
collection.EnsureIndex(IndexKeys<Foo>.GeoSpatialSpherical(x => x.Location)); 
```

现在查询：

```
var point = GeoJson.Point(GeoJson.Geographic(-96.770401, 32.816774)); //long, lat

var locationClause = Query<Foo>.Near(y=> y.Location, point, 20); //20 is max distance from your question. note that it's in meters
IQueryable<Foo> query = collection.AsQueryable().Where( x=> locationClause.Inject()); 

//or with the non-generic Query:  
IQueryable<Foo> query = collection.AsQueryable().Where( x=> Query.Near("Location", point, 20).Inject()); 
```

# ios - 未使用 RESTkit 映射的核心数据关系

> ID：14398309
> 
> 赞同：2
> 
> 时间：2013-01-18T11:48:15.440
> 
> 标签：ios, core-data, restkit

我正在努力使用 RESTkit 0.20.0-pre6 正确映射核心数据关系。

我想映射这个 JSON：

```
{ "items" : [ {"id" : 2001, "itemAttr1" : "..."}, ...<more items>... ],
  "rooms":  [ {"id" : 3001, "items": [2001, ...<more item id's>...] } 
```

到相应的核心数据模型：

```
Entity ItemMO (Attributes "id", "itemAttr1", Relationship "room" to RoomMO)
Entity RoomMO (Attributes "id", Relationship "items" to ItemMO) 
```

属性映射得很好，但关系是空的。

我已经尝试使用[这里](http://restkit.org/api/latest/Classes/RKConnectionDescription.html)`RKConnectionDescription`描述的方法，使用以下代码：

```
NSEntityDescription *roomEntity = [NSEntityDescription entityForName:@"RoomMO" inManagedObjectContext:self.context];
NSRelationshipDescription *itemsInRoom = [roomEntity relationshipsByName][@"items"];
RKConnectionDescription *connection = [[RKConnectionDescription alloc] initWithRelationship:devicesInRoom keyPath:@"devices"];
[roomMapping addConnection:connection]; 
```

我也尝试过使用简单`RKRelationshipMapping`但无济于事：

```
[itemMapping addPropertyMapping:[RKRelationshipMapping relationshipMappingFromKeyPath:nil toKeyPath:@"room" withMapping:roomMapping]]; 
```

我一定遗漏了一些简单的东西，因为这不应该是 RESTkit 的奇特案例。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T22:42:07.667

我让它工作了。诀窍是在 ItemMO 上为外键添加一个额外的属性“roomId”。

```
Entity ItemMO (Attributes "id", "roomId", "itemAttr1", Relationship "room" to RoomMO) 
```

然后将关系告诉 RESTkit：

```
[itemMapping addConnectionForRelationship:@"room" connectedBy:@{@"roomId" : @"id"}]; 
```

如果没有额外的外键属性，RESTkit 似乎无法建立关系。

# permissions - 如何应用 MSMQ 队列权限的简短说明

> ID：14398312
> 
> 赞同：1
> 
> 时间：2013-01-18T11:48:20.343
> 
> 标签：permissions, msmq, message-queue

我试图了解如何在不同情况下应用队列权限，例如：

*   每个人都允许发送权限，但“MachineName$”或用户没有允许发送权限
*   每个人都允许发送权限，但“MachineName$”或用户的发送权限被拒绝
*   每个人都没有允许发送权限，但“MachineName$”可以
*   每个人都已拒绝发送权限，但“MachineName$”已允许

令人惊讶的是，我没有找到一篇简短而简单的文章来解释这些事情。我讨厌阅读一本巨大的微软书籍来理解一个简短而简单的概念。

因此，我将非常感谢提供一个很好的解释和/或对我的示例问题的解释性答案的链接。

# magento - 在事件观察器中保存产品的属性

> ID：14398314
> 
> 赞同：0
> 
> 时间：2013-01-18T11:48:31.500
> 
> 标签：magento

我使用magento 1.7。
我正在尝试使用 magento 制作广告模块。
用户可以将广告作为产品发布，当他支付订单时，我想启用广告（产品）。为此，我听了 sales_order_invoice_save_after。一切正常，但是当我尝试将产品保存在事件侦听器中时，保存函数会引发异常：

```
SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails 
```

我的功能如下所示：

```
public function onInvoiceSaveAfter(Varien_Event_Observer $observer)
{
    $event = $observer->getEvent();
    $invoice = $event->getInvoice();
    switch($invoice->getState())
    {
       case Mage_Sales_Model_Order_Invoice::STATE_PAID :
       {

          $order = $invoice->getOrder();
          $items = $order->getAllItems();

          //Update the product
          $product = Mage::getModel('catalog/product')->load($item->getEntityId());
          $product->setAdEndDate('2015-10-10 00:00:00');
          $product->getResource()->saveAttribute($product, 'ad_end_date'); //Throws exception
        }
} 
```

任何人都可以帮助我吗？
我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T12:33:41.200

我相信这是因为您实际上没有正在使用的项目（您从不使用 foreach() 循环）。尝试这个：

```
public function onInvoiceSaveAfter(Varien_Event_Observer $observer)
{
    $event = $observer->getEvent();
    $invoice = $event->getInvoice();
    switch ($invoice->getState()) {
        case Mage_Sales_Model_Order_Invoice::STATE_PAID :
        {

            $order = $invoice->getOrder();
            $items = $order->getAllItems();

            foreach ($items as $item) {
                //Update the product
                $product = Mage::getModel('catalog/product')->load($item->getProductId());
                $product->setAdEndDate('2015-10-10 00:00:00');
                $product->getResource()->saveAttribute($product, 'ad_end_date'); //Throws exception
            }

        }
    }
} 
```

如果这不起作用，请尝试直接保存产品，而不是只更新一个属性：

```
$product->save() 
```

# python - 获取带有时区的昨天日期

> ID：14398320
> 
> 赞同：1
> 
> 时间：2013-01-18T11:48:47.440
> 
> 标签：python

嗨，我能够找到这个问题的答案，但没有包含时区（[http://stackoverflow.com/questions/1712116/formatting-yesterdays-date-in-python](http://stackoverflow.com/questions/1712116/formatting-yesterdays-date-in-python)）

这对我来说很好用：

```
>>> import time
>>> time.strftime('/%Z/%Y/%m/%d')
'/EST/2013/01/18' 
```

但是有没有办法得到昨天的日期？当我们从 EST 切换到 EDT、EDT 到 EST 时，我需要处理时区更改

datetime 模块允许使用 timedelta，但默认情况下，naive 对象不支持时区，我不确定如何处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:39:43.050

自己做的方法，但我不知道是否有更好的方法

```
>>> import time
>>> from datetime import date, timedelta
>>> yesterday = date.today() - timedelta(1)
>>> yesterday = yesterday.strftime('%Y/%m/%d')
>>> yesterday = "/%s/%s" % ( time.tzname[0], yesterday )
>>> print yesterday
'/CET/2013/01/17' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T13:05:24.287

对于计费时区和夏令时更改，`datetime.datetime`对象需要是时区感知的，即`tzinfo`属性不应该是`None`. 这可以通过继承`tzinfo`抽象类来完成。该`ustimezone`模块正是这样做的。

```
>>> import ustimezone
>>> from datetime import datetime, tzinfo, timedelta
>>> yesterday = datetime.now() - timedelta(days=1)
>>> yesterday
datetime.datetime(2013, 1, 17, 18, 24, 22, 106445)
>>> yesterday_aware = yesterday.replace(tzinfo=ustimezone.Eastern)
>>> yesterday.strftime('%Z/%Y/%m/%d')
'EST/2013/01/17'    # Will show EDT/EST depending on dst being present or not. 
```

dst 信息由`tm_isdst`timetuple 的值捕获。

```
>>> yesterday_aware.timetuple()
time.struct_time(tm_year=2013, tm_mon=1, tm_mday=17, tm_hour=18, tm_min=24, tm_sec=22, tm_wday=3, tm_yday=17, tm_isdst=0)
>>> _.tm_isdst
>>> 0    # the tm_isdst flag of the time tuple can be used for checking if DST is present or not. 
```

这里的`ustimezone`模块看起来像这样（从 Python[日期](http://docs.python.org/dev/library/datetime.html)时间参考中的示例借来）

```
from datetime import datetime, tzinfo, timedelta

ZERO = timedelta(0)
HOUR = timedelta(hours=1)

# A complete implementation of current DST rules for major US time zones.

def first_sunday_on_or_after(dt):
    days_to_go = 6 - dt.weekday()
    if days_to_go:
        dt += timedelta(days_to_go)
    return dt

# US DST Rules
#
# This is a simplified (i.e., wrong for a few cases) set of rules for US
# DST start and end times. For a complete and up-to-date set of DST rules
# and timezone definitions, visit the Olson Database (or try pytz):
# http://www.twinsun.com/tz/tz-link.htm
# http://sourceforge.net/projects/pytz/ (might not be up-to-date)
#
# In the US, since 2007, DST starts at 2am (standard time) on the second
# Sunday in March, which is the first Sunday on or after Mar 8.
DSTSTART_2007 = datetime(1, 3, 8, 2)
# and ends at 2am (DST time; 1am standard time) on the first Sunday of Nov.
DSTEND_2007 = datetime(1, 11, 1, 1)
# From 1987 to 2006, DST used to start at 2am (standard time) on the first
# Sunday in April and to end at 2am (DST time; 1am standard time) on the last
# Sunday of October, which is the first Sunday on or after Oct 25.
DSTSTART_1987_2006 = datetime(1, 4, 1, 2)
DSTEND_1987_2006 = datetime(1, 10, 25, 1)
# From 1967 to 1986, DST used to start at 2am (standard time) on the last
# Sunday in April (the one on or after April 24) and to end at 2am (DST time;
# 1am standard time) on the last Sunday of October, which is the first Sunday
# on or after Oct 25.
DSTSTART_1967_1986 = datetime(1, 4, 24, 2)
DSTEND_1967_1986 = DSTEND_1987_2006

class USTimeZone(tzinfo):

    def __init__(self, hours, reprname, stdname, dstname):
        self.stdoffset = timedelta(hours=hours)
        self.reprname = reprname
        self.stdname = stdname
        self.dstname = dstname

    def __repr__(self):
        return self.reprname

    def tzname(self, dt):
        if self.dst(dt):
            return self.dstname
        else:
            return self.stdname

    def utcoffset(self, dt):
        return self.stdoffset + self.dst(dt)

    def dst(self, dt):
        if dt is None or dt.tzinfo is None:
            # An exception may be sensible here, in one or both cases.
            # It depends on how you want to treat them.  The default
            # fromutc() implementation (called by the default astimezone()
            # implementation) passes a datetime with dt.tzinfo is self.
            return ZERO
        assert dt.tzinfo is self

        # Find start and end times for US DST. For years before 1967, return
        # ZERO for no DST.
        if 2006 < dt.year:
            dststart, dstend = DSTSTART_2007, DSTEND_2007
        elif 1986 < dt.year < 2007:
            dststart, dstend = DSTSTART_1987_2006, DSTEND_1987_2006
        elif 1966 < dt.year < 1987:
            dststart, dstend = DSTSTART_1967_1986, DSTEND_1967_1986
        else:
            return ZERO

        start = first_sunday_on_or_after(dststart.replace(year=dt.year))
        end = first_sunday_on_or_after(dstend.replace(year=dt.year))

        # Can't compare naive to aware objects, so strip the timezone from
        # dt first.
        if start <= dt.replace(tzinfo=None) < end:
            return HOUR
        else:
            return ZERO

Eastern  = USTimeZone(-5, "Eastern",  "EST", "EDT") 
```

# makefile - makeifle 中 src_dir ?= src 的含义

> ID：14398322
> 
> 赞同：-3
> 
> 时间：2013-01-18T11:48:50.930
> 
> 标签：makefile, gnu-make

我是 makfile 的新手。什么是？=在makefile中的含义是什么意思如果未定义则定义或其他含义

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T11:50:40.290

是的，它的意思是“如果没有定义就定义”。来自`info make`：

> 变量还有另一个赋值运算符，`?='。这称为条件变量赋值运算符，因为它仅在变量尚未定义时才有效。

# php - 在 php echo 上应用 css 的正确方法是什么？

> ID：14398325
> 
> 赞同：-6
> 
> 时间：2013-01-18T11:49:04.753
> 
> 标签：php, css

如何在下面的回声上应用 css？在为 UTF 编码添加标头之前，我让它工作了，但现在它也回显了 css，所以我的回显结果是：`<p align='center'>Good!!!</p>`

```
<?php 
header('Content-type: text/plain; charset=utf-8');

$answer = $_POST['1'];  
if ($answer == "YES") {          
    echo 'Good!!!';      
}
else {
    echo 'Try Again!';
} 
?> 
```

**更正：**

```
<?php 
    header('Content-type: text/html; charset=utf-8');

    $answer = $_POST['1'];  
    if ($answer == "YES") {          
        echo "<p align='center'>Good!!!</p>";        
    }
    else {
        echo "<p align='center'>Try Again!</p>";  
    } 
    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T11:51:14.893

您正在发送标头：

```
Content-type: text/plain; 
```

它告诉浏览器传入的数据是纯文本，而不是 html，因此返回数据中的任何标记都将被忽略。

# machine-learning - 对 GB 中的大型数据集实施最大似然估计的最佳/首选方法是什么

> ID：14398327
> 
> 赞同：3
> 
> 时间：2013-01-18T11:49:11.277
> 
> 标签：machine-learning

我有一个千兆字节（GB）的数据集，并想估计其中缺失值的参数。

在机器学习中有一种称为 MLE（最大似然估计）的算法可以用于它。
由于 R 可能无法在如此大的数据集上工作，那么哪个库最适合它呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T03:08:30.583

通过[维基：MLE](http://en.wikipedia.org/wiki/Maximum_likelihood)：

> 在统计学中，最大似然估计 (MLE) 是一种估计统计模型参数的方法。当应用于数据集并给出统计模型时，最大似然估计提供模型参数的估计。

通常，您需要两个步骤才能应用 MLE：

*   获取数据集
*   确定统计模型

此时，如果您可以获得 MLE 估计的解析形式的解，只需将您的数据流式传输到 mle-estimate 计算中，例如，对于高斯分布，要估计均值，您只需累积总和，并保持计数和样本均值将是您的 mle-estimate。

然而，当模型涉及许多参数并且它`pdf`是高度非线性的时。在这种情况下，必须使用非线性优化算法在数值上寻求 MLE 估计。如果您的数据量很大，请尝试[stochastic gradient descent](http://en.wikipedia.org/wiki/Stochastic_gradient_descent)，真实梯度由单个示例的梯度近似。当算法扫描训练集时，它会为每个训练示例执行更新公式。这样您仍然可以以多次扫描的方式一次将一个数据流式传输到您的更新程序。这样，内存限制根本不应该成为问题。

# python - SQLAlchemy 可以自动从数据库模式创建关系吗？

> ID：14398329
> 
> 赞同：10
> 
> 时间：2013-01-18T11:49:17.000
> 
> 标签：python, sqlite, sqlalchemy, relationship, foreign-key-relationship

从具有外键的现有（SQLite）数据库开始，SQLAlchemy 可以自动建立[关系](http://docs.sqlalchemy.org/en/rel_0_8/orm/tutorial.html#building-a-relationship)吗？

SQLAlchemy 类是通过`__table_args__ = {'autoload': True}`.

目标是轻松访问相关表中的数据，而无需手动添加所有关系（即不使用`sqlalchemy.orm.relationship()`and `sqlalchemy.orm.backref`）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-18T16:28:04.060

**[更新]**从 SQLAlchemy 0.9.1 开始，有[Automap 扩展](http://docs.sqlalchemy.org/en/rel_0_9/orm/extensions/automap.html)可以做到这一点。

对于 SQLAlchemy < 0.9.0，可以使用 sqlalchemy 反射。

SQLAlchemy 反射加载表之间的外键/主键关系。但不会在映射类之间创建关系。实际上反射不会为您创建映射类 - 您必须指定映射类名称。

其实我认为加载外键的反射支持是一个很好的帮手和节省时间的工具。使用它，您可以使用联接构建查询，而无需指定要用于联接的列。

```
from sqlalchemy import *
from sqlalchemy import create_engine, orm
from sqlalchemy.ext.declarative import declarative_base
from sqlalchemy.orm import relationship

metadata = MetaData()
Base = declarative_base()
Base.metadata = metadata

db = create_engine('<db connection URL>',echo=False)
metadata.reflect(bind=db)

cause_code_table = metadata.tables['cause_code']
ndticket_table = metadata.tables['ndticket']

sm = orm.sessionmaker(bind=db, autoflush=True, autocommit=True, expire_on_commit=True)
session = orm.scoped_session(sm)

q = session.query(ndticket_table,cause_code_table).join(cause_code_table)
for r in q.limit(10):
    print r 
```

此外，当我使用反射对现有数据库运行查询时 - 我必须只定义映射的类名称、表绑定、关系，但不需要为这些关系定义表列。

```
class CauseCode(Base):
    __tablename__ = "cause_code"

class NDTicket(Base):
    __tablename__ = "ndticket"
    cause_code = relationship("CauseCode", backref = "ndticket")

q = session.query(NDTicket)
for r in q.limit(10):
    print r.ticket_id, r.cause_code.cause_code 
```

总体而言，SQLAlchemy 反射已经是强大的工具并且可以节省我的时间，因此手动添加关系对我来说是一个很小的开销。

如果我必须开发将使用现有外键添加映射对象之间关系的功能，我将从使用[反射和检查](http://docs.sqlalchemy.org/en/latest/core/schema.html?highlight=reflection#fine-grained-reflection-with-inspector)器开始。使用 get_foreign_keys() 方法提供了建立关系所需的所有信息——引用的表名、引用的列名和目标表中的列名。并将使用此信息将具有关系的属性添加到映射类中。

```
insp = reflection.Inspector.from_engine(db)
print insp.get_table_names()
print insp.get_foreign_keys(NDTicket.__tablename__)
>>>[{'referred_table': u'cause_code', 'referred_columns': [u'cause_code'], 'referred_schema': None, 'name': u'SYS_C00135367', 'constrained_columns': [u'cause_code_id']}] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-09T14:31:24.763

从 SQLAlchemy 0.9.1 开始，（现在是实验性的）Automap 扩展似乎就是这样做的：http: [//docs.sqlalchemy.org/en/rel_0_9/orm/extensions/automap.html](http://docs.sqlalchemy.org/en/rel_0_9/orm/extensions/automap.html)

# matlab - 在有限差分求解器中高效生成稀疏矩阵

> ID：14398331
> 
> 赞同：2
> 
> 时间：2013-01-18T11:49:19.593
> 
> 标签：matlab, numerical-methods

我正在编写一个程序来使用有限差分法求解 3D Schroedinger 方程。我的代码的 1D 和 2D 版本运行得很好，但是在 3D 版本中，我发现矩阵的生成（对于那些知道 QM 的人，这是哈密顿矩阵；对于那些不知道的人，这并不重要）到目前为止花费的时间最多（典型的网格间距需要几分钟，而所有其他操作需要几秒钟，包括最小特征值查找器！）。

我想知道是否有人对如何更有效地编写矩阵生成有任何建议。我在下面包含了我的代码的两个版本：一个应该相对容易理解，然后是遵循 MATLAB 文档建议的第二个版本，我不应该在制作稀疏矩阵时直接索引条目，而是应该制作三个向量（行和列索引及其各自的值）并从中生成稀疏矩阵。不幸的是，后者根本没有帮助加快速度，因为我仍在使用愚蠢的三重嵌套循环，而且我想不出避免它的好方法。

```
delta = 0.1e-9;
Lx = 2e-9;
x = 0:delta:Lx;
Nx = length(x);
Ly = 2e-9;
y = 0:delta:Ly;
Ny = length(y);
Lz = 2e-9;
z = 0:delta:Lz;
Nz = length(z);

map = inline('((idx_x-1) * Ny*Nz) + ((idx_y-1) * Nz) + idx_z','idx_x','idx_y','idx_z','Ny','Nz'); % define an inline helper function for mapping (x,y,z) indices to a linear index

Tsparse = sparse([],[],[],Nx*Ny*Nz, Nx*Ny*Nz, 7*(Nx-2)*(Ny-2)*(Nz-2)); % kinetic part of Hamiltonian matrix: (d^2/dx^2 + d^2/dy^2 + d^2/dz^2); NOTE: we'll have 7*(Nx-2)*(Ny-2)*(Nz-2) non-zero entries in this matrix, so we get the sparse() function to preallocate enough memory for this

for idx_x = 2:Nx-1
    for idx_y = 2:Ny-1
        for idx_z = 2:Nz-1
            Tsparse( map(idx_x,idx_y,idx_z,Ny,Nz) , map(idx_x ,idx_y , idx_z , Ny, Nz) ) = -6/delta^2;
            Tsparse( map(idx_x,idx_y,idx_z,Ny,Nz) , map(idx_x+1,idx_y , idx_z , Ny, Nz) ) = 1/delta^2;
            Tsparse( map(idx_x,idx_y,idx_z,Ny,Nz) , map(idx_x-1,idx_y , idx_z , Ny, Nz) ) = 1/delta^2;
            Tsparse( map(idx_x,idx_y,idx_z,Ny,Nz) , map(idx_x ,idx_y+1, idx_z , Ny, Nz) ) = 1/delta^2;
            Tsparse( map(idx_x,idx_y,idx_z,Ny,Nz) , map(idx_x ,idx_y-1, idx_z , Ny, Nz) ) = 1/delta^2;
            Tsparse( map(idx_x,idx_y,idx_z,Ny,Nz) , map(idx_x ,idx_y , idx_z+1, Ny, Nz) ) = 1/delta^2;
            Tsparse( map(idx_x,idx_y,idx_z,Ny,Nz) , map(idx_x ,idx_y , idx_z-1, Ny, Nz) ) = 1/delta^2;
        end
   end
end 
```

此代码创建了一个矩阵，该矩阵仅沿 7 个对角线具有非零条目（并且并非每个对角线中的所有条目都非零）。

这是我尝试以更接近 MATLAB 文档建议的方式创建 T 矩阵的代码版本：

```
delta = 0.1e-9;
Lx = 2e-9;
x = 0:delta:Lx;
Nx = length(x);
Ly = 2e-9;
y = 0:delta:Ly;
Ny = length(y);
Lz = 2e-9;
z = 0:delta:Lz;
Nz = length(z);

map = inline('((idx_x-1) * Ny*Nz) + ((idx_y-1) * Nz) + idx_z','idx_x','idx_y','idx_z','Ny','Nz'); % define an inline helper function for mapping (x,y,z) indices to a linear index

Iidx = zeros(7*(Nx-2)*(Ny-2)*(Nz-2),1); % matrix row indices
Jidx = zeros(7*(Nx-2)*(Ny-2)*(Nz-2),1); % matrix col indices
vals = zeros(7*(Nx-2)*(Ny-2)*(Nz-2),1); % matrix non-zero values, corresponding to (row,col)
cnt = 1;
for idx_x = 2:Nx-1
    for idx_y = 2:Ny-1
        for idx_z = 2:Nz-1
            % Tsparse( map(idx_x,idx_y,idx_z,Ny,Nz) , map(idx_x ,idx_y , idx_z , Ny, Nz) ) = -6/delta^2;
            Iidx(cnt) = map(idx_x,idx_y,idx_z,Ny,Nz);
            Jidx(cnt) = map(idx_x,idx_y,idx_z,Ny,Nz);
            vals(cnt) = -6/delta^2;
            cnt = cnt + 1;
            % Tsparse( map(idx_x,idx_y,idx_z,Ny,Nz) , map(idx_x+1,idx_y , idx_z , Ny, Nz) ) = 1/delta^2;
            Iidx(cnt) = map(idx_x,idx_y,idx_z,Ny,Nz);
            Jidx(cnt) = map(idx_x+1,idx_y,idx_z,Ny,Nz);
            vals(cnt) = 1/delta^2;
            cnt = cnt + 1;
            % Tsparse( map(idx_x,idx_y,idx_z,Ny,Nz) , map(idx_x-1,idx_y , idx_z , Ny, Nz) ) = 1/delta^2;
            Iidx(cnt) = map(idx_x,idx_y,idx_z,Ny,Nz);
            Jidx(cnt) = map(idx_x-1,idx_y,idx_z,Ny,Nz);
            vals(cnt) = 1/delta^2;
            cnt = cnt + 1;
            % Tsparse( map(idx_x,idx_y,idx_z,Ny,Nz) , map(idx_x ,idx_y+1, idx_z , Ny, Nz) ) = 1/delta^2;
            Iidx(cnt) = map(idx_x,idx_y,idx_z,Ny,Nz);
            Jidx(cnt) = map(idx_x,idx_y+1,idx_z,Ny,Nz);
            vals(cnt) = 1/delta^2;
            cnt = cnt + 1;
            % Tsparse( map(idx_x,idx_y,idx_z,Ny,Nz) , map(idx_x ,idx_y-1, idx_z , Ny, Nz) ) = 1/delta^2;
            Iidx(cnt) = map(idx_x,idx_y,idx_z,Ny,Nz);
            Jidx(cnt) = map(idx_x,idx_y-1,idx_z,Ny,Nz);
            vals(cnt) = 1/delta^2;
            cnt = cnt + 1;
            % Tsparse( map(idx_x,idx_y,idx_z,Ny,Nz) , map(idx_x ,idx_y , idx_z+1, Ny, Nz) ) = 1/delta^2;
            Iidx(cnt) = map(idx_x,idx_y,idx_z,Ny,Nz);
            Jidx(cnt) = map(idx_x,idx_y,idx_z+1,Ny,Nz);
            vals(cnt) = 1/delta^2;
            cnt = cnt + 1;
            % Tsparse( map(idx_x,idx_y,idx_z,Ny,Nz) , map(idx_x ,idx_y , idx_z-1, Ny, Nz) ) = 1/delta^2;
            Iidx(cnt) = map(idx_x,idx_y,idx_z,Ny,Nz);
            Jidx(cnt) = map(idx_x,idx_y,idx_z-1,Ny,Nz);
            vals(cnt) = 1/delta^2;
            cnt = cnt + 1;

        end
    end
end
Tsparse = sparse(Iidx, Jidx, vals, Nx*Ny*Nz, Nx*Ny*Nz); 
```

在此先感谢您的任何建议！

--dx.dy.dz

（旁注：“map”函数用于从 3D 坐标系 (x,y,z) 到 1D 值。假设我的特征值问题是 H psi = E psi，其中 H 是哈密顿矩阵，而 psi是一个向量，而 E 是一个标量。矩阵 H = T + V（V 未在代码示例中显示，只有 T 是）写在一个基础上，其中 3D psi 函数被离散化并从 3D 折叠到 1D。例如，假设我每个维度只有 2 个网格点，所以 x=1:1:2, y=1:​​1:2, z=1:1:2。然后我的哈密顿量写在基础 {psi( 1,1,1), psi(1,1,2), psi(1,2,1), psi(1,2,2), psi(2,1,1), psi(2,1,2) ), psi(2,2,1), psi(2,2,2)}，即它是一个 8×8 矩阵。eigs() 求解器输出的特征向量 psi 将是一个 8 分量向量，如果需要，我可以将其重新整形为 2x2x2 矩阵。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T12:34:07.300

我想我可以给一些建议：

*   而不是您自己的地图，您可能会考虑该`sub2ind`功能

*   您反复调用`map(idx_x,idx_y,idx_z,Ny,Nz)`-确保您可以将其存储起来以供重复使用。

*   邻居的相对位置也将保持不变 - 无需重新计算

作为一个小例子，我会这样做：

```
siz = [4,4,4];

pos = sub2ind(siz,1,1,1)

tmp = [
    sub2ind(siz,2,1,1)-pos
    sub2ind(siz,1,2,1)-pos
    sub2ind(siz,1,1,2)-pos
    ];

neighbors = [tmp;-tmp];
%%
big_dim = prod(siz);
mat = sparse(big_dim,big_dim);
%%
for i=2:siz(1)-1
    for j=2:siz(2)-1
        for k=2:siz(3)-1
            c_pos = sub2ind(siz,i,j,k);
            mat(c_pos,c_pos)=-6;
            c_neighbors=c_pos+neighbors;
            mat(c_pos,c_neighbors)=1;
        end
    end
end 
```

# javascript - 在不使用原生包装器的情况下，使用 javascript 在移动 Web 浏览器中访问手机的原生功能

> ID：14398334
> 
> 赞同：1
> 
> 时间：2013-01-18T11:49:27.423
> 
> 标签：javascript, cordova, mobile-website, native-code

我心中有一个疑问。我可以使用 javascript（或任何其他库）在移动 Web 浏览器中访问设备特定功能，而无需使用本地包装器（如 PhoneGap 那样）。我想开发一个**移动网站**，该网站将访问一些特定于设备的功能，如发送短信、捕获照片、访问位置。所有这些都应该通过移动网络浏览器访问，而不是使用一些本地代码作为包装器。 **是否可以？我可以在手机浏览器中访问手机的原生功能吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T22:15:09.037

取决于您要做什么。在大多数浏览器中，可以通过 sms: uri 发送短信。几乎所有浏览器都实现了 Geolocation API。但是，拍摄照片将是一个问题。

检查 caniuse.com 以查看您的目标浏览器上可用的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T11:58:18.560

我不明白为什么不，我的理解是 PhoneGap 模拟浏览器，所以你在浏览器中编写一个移动网站，它都被编译成一个独立的应用程序

我认为在移动网站上使用相同的 JS/html 代码没有什么问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T18:16:09.200

使用 JavaScript 的网页可以访问托管环境允许它访问的任何内容。出于安全原因和缺乏标准化，移动浏览器不允许网页访问移动设备的许多本机功能，例如发送短信。

您可能会对现在浏览器中可用的内容感到惊讶，但您可以做一些您想做的事情，包括 GeoLocation。请参阅[http://www.html5rocks.com/](http://www.html5rocks.com/)了解现在可用的内容。

但是，如果您需要访问未通过标准浏览器 API 公开的内容，那么您需要将您的网页托管在原生 shim 中，例如 PhoneGap/Cordova，这将提供对那些额外缺失的功能的访问。能够以非标准方式提供，因为它在不同的安全上下文中运行。

# javascript - 为什么这个函数会增加错误的十进制值？

> ID：14398337
> 
> 赞同：2
> 
> 时间：2013-01-18T11:49:33.337
> 
> 标签：javascript

> **可能的重复：**
> [JavaScript 的浮点数学被破坏了吗？](https://stackoverflow.com/questions/588004/is-javascripts-floating-point-math-broken)
> [在 JavaScript 中舍入浮点数](https://stackoverflow.com/questions/6621802/rounding-a-float-in-javascript)

为什么这个函数会增加错误的十进制值？我只想显示一位小数。

```
var valueElement = $('#valueTempe');
function incrementValue(e){
    if(valueElement.text() < 6){
        valueElement.text(Math.max(parseFloat(valueElement.text()) + e.data.increment)); 
    }

    return false;
}
$('#plus').bind('click', {increment: 0.1}, incrementValue);     
$('#minus').bind('click', {increment: -0.1}, incrementValue); 
```

jsFiddle：[测试](http://jsfiddle.net/2dMQ8/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T12:05:35.893

同样的方式`1/3`不能用十进制精确表示，`0.1`不能用二进制精确表示，而Javascript数字是二进制浮点值。

在 Javascript中`0.2 + 0.1`返回`0.30000000000000004`.
在浏览器控制台中尝试。

实际上，53 位可用于将尾数存储在 Javascript 64 位浮点值`0.1`中，二进制的十进制值四舍五入到 53 位的精度
`0.00011001100110011001100110011001100110011001100110011010`
，当转换回十进制时正好是
`0.1000000000000000055511151231257827021181583404541015625`.

我们可以使用`toFixed`Firefox 来展示这一点（其他浏览器将参数限制为 20）：
`(0.1).toFixed(55)`返回 `0.1000000000000000055511151231257827021181583404541015625`。

同样，二进制的十进制值`0.2`四舍五入到 53 位的精度，然后再转换回十进制就是
`0.200000000000000011102230246251565404236316680908203125`.

`0.1`如果我们将and的两个二进制表示相加`0.2`，四舍五入到 53 位，然后再转换回十进制，我们就得到了
`0.3000000000000000444089209850062616169452667236328125`.

所以 Javascript 中`0.1`+的结果`0.2`不是`0.3`但是，小数点后 17 位是`0.30000000000000004`.

事实上，`0.3`无论如何都不能用二进制本身精确表示。
它实际上存储为十进制值的二进制等价物，
`0.29999999999999993338661852249060757458209991455078125`
这就是 Javascript 中
`0.2 + 0.1 == 0.3`返回`false`.

* * *

**十进制到二进制**
十进制数只能用二进制精确表示，如果`2`它是用最低术语表示为简单分数时数字的分母的唯一质因数。
例如，
`0.1`是`1/10`， 并且`10`有素因数`2`和`5`，所以没有精确的表示。
`0.5`是`1/2`，而唯一的素因子`2`是`2`，所以它可以被精确地表示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T12:05:10.823

您可以使用 .toFixed(1) 如下

```
var valueElement = $('#valueTempe');
function incrementValue(e){
    if(valueElement.text() < 6){
        valueElement.text(Math.max(parseFloat(valueElement.text()) + e.data.increment).toFixed(1)); 
    }
    if(valueElement.text() == 6){
        valueElement.text(Math.max(parseFloat(valueElement.text()) -1).toFixed(1));
    }
    return false;
}

$('#plus').bind('click', {increment: 0.1}, incrementValue);     
$('#minus').bind('click', {increment: -0.1}, incrementValue); 
```

[演示](http://jsfiddle.net/MuhammadHani/CtbBz/)

# android - Android ffmpeg0.8 不能用 android ndk5 和 cygwin 编译器编译

> ID：14398339
> 
> 赞同：0
> 
> 时间：2013-01-18T11:49:46.487
> 
> 标签：android, android-ndk, ffmpeg

我正在使用以下教程进行 ffmpeg 编译。

[http://www.roman10.net/how-to-build-ffmpeg-for-android/](http://www.roman10.net/how-to-build-ffmpeg-for-android/)

我遵循了他们提供的所有指示。已更改 **build_android.sh**中的路径，
我正在使用 android ndk5 和 cygwing 最新编译器。但我面临以下问题。.so 文件没有被创建。

```
Krajesh@Rajesh /cygdrive/D/RAJESH-ANDROID/Rajesh-workspace/FFMPEG_2
$ /cygdrive/d/Android_NDK/android-ndk-r5/ndk-build
Prebuilt       : libffmpeg.so <= jni/ffmpeg-0.8/android/armv7-a/
Install        : libffmpeg.so => libs/armeabi-v7a/libffmpeg.so
install: cannot open `/cygdrive/D/RAJESH-ANDROID/Rajesh-workspace/FFMPEG_2/obj/local/armeabi-v7a/libffmpeg.so' for reading: Permission denied
/cygdrive/d/Android_NDK/android-ndk-r5/build/core/build-binary.mk:305: recipe for target `/cygdrive/D/RAJESH-ANDROID/Rajesh-workspace/FFMPEG_2/libs/armeabi-v7a/libffmpeg.so' failed
make: *** [/cygdrive/D/RAJESH-ANDROID/Rajesh-workspace/FFMPEG_2/libs/armeabi-v7a/libffmpeg.so] Error 1 
```

任何人都可以解释为什么我会遇到许可被拒绝的问题以及如何克服这个问题。我正在使用 Windows 7 电脑。

谢谢。拉杰什·K

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-07T09:39:39.677

有同样的问题。修复是针对目录`chmod 777`中有问题的 .so 文件`/obj/.../`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T08:36:34.300

我强烈建议切换到最新的 NDK（截至今天的 r8d）。你不需要 cygwin 来使用它，而且它更友好。使用 ndk-build.cmd 而不是 bash 脚本，您的构建很可能会成功。

# c - 有没有办法锁定互斥锁并在给定时间后自动解锁？

> ID：14398345
> 
> 赞同：3
> 
> 时间：2013-01-18T11:50:11.477
> 
> 标签：c, linux, posix, real-time, mutex

这是在 Linux 上，但理想情况下我想要一个符合 POSIX 的解决方案。

我有两个线程，每个线程都能够通过 API 函数写入硬件总线。在任何给定时间只允许一个线程写入总线，并且在总线写入之后，在几百毫秒数量级的给定时间内不得写入总线。

两个线程都实现为状态机。

显而易见的解决方案是使用互斥锁来串行访问总线，设置计数器或时间戳，并在适当的时间到期后让状态机解锁互斥锁。

这对我来说似乎有点脆弱。如果未来的维护开发人员错误地修改了状态机，互斥锁可能不会被释放，从而导致难以诊断的死锁。

是否有一个 API 调用可以锁定互斥体，但在给定超时后自动解锁它？Google 揭示了 pthread_mutex_timedlock()，但这并不完全相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T11:54:44.663

我不知道任何允许自动释放锁的 pthreads API。

就个人而言，我会尝试通过单个线程序列化对总线的访问，以避免这些并发症。如果该线程维护一个输入队列并且其他线程将它们的请求发布到它，那么它可以执行它希望的任何序列化和冲突解决，这也使得在进一步访问之前实现延迟变得更容易。只要您小心不要在此线程中使用任何阻塞函数，您唯一真正的失败情况就是它可能会意外终止。

如果您需要从总线读取和写入，您可以给每个线程一个输入队列，并让工作线程向 IO 线程发布一个“读取请求”，然后等待响应被发送回它自己的输入队列。如果一个线程只有一个未完成的请求，那么你真的不需要队列，一个简单的[条件变量](https://computing.llnl.gov/tutorials/pthreads/#ConditionVariables)和一个指向要填充的结构的指针可能工作得很好。

如果您确实希望两个线程共享资源，那么我认为您总是会有互斥锁被锁定的风险。即使您设置了一个计时器并在固定时间后强制释放互斥锁，这也可能会导致不同的错误，即一个线程继续使用资源，认为它拥有锁，而实际上它完全由另一个线程持有。最终，您正在尝试针对未来的编程错误计划稳健性，这是一个很好的目标，但有一个限制 - 互斥锁只是一个必须小心的东西。

如果您必须使用互斥锁，我建议您最好的方法是简单地最小化需要互斥锁的代码并避免阻塞其中的调用。如果您正在实现状态机，请尝试确保互斥锁不必在状态转换之间保持锁定状态。如果可能的话，确定您的互斥锁的范围，以便它们仅在调用链中某个级别的单个函数调用期间保持 - 这使得通过肉眼发现锁定/解锁不匹配变得容易得多。如果您使用的是 C++，那么使用[RAII](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)使您的锁释放更加可靠。

但是再一次，我认为您会发现以某种方式序列化您的请求会容易得多，通常是通过将一个线程声明为仲裁器（现有线程之一或新线程之一）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T12:12:28.683

如果遇到这个问题，我可能会使用另一个“APIwrite”线程与驱动程序交互。该线程将围绕生产者-消费者队列弹出和睡眠（数百毫秒）循环。任何其他希望写入的线程只需将 *writeBuffer 排队。writeBuffer 结构可以包含一个函数(*writeBuffer) 指针，APIwrite 线程将在写入后调用该指针。该函数由原始线程提供，可以
发出原始线程正在等待的某个事件的信号，也可以只释放 *writeBuffer。

避免使用显式互斥锁、计时器等，并允许同步或异步写入。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T11:59:39.463

在共享（和互斥体覆盖的）内存中拥有最后一次总线访问的时间戳怎么样？每次写入都将如下所示：

1.  锁定互斥锁
2.  检查上次访问的时间戳；如果您的等待时间尚未过去，请在这段时间的剩余时间里休眠，因为无论如何您都无法在此线程中执行任何其他操作
3.  写
4.  更新上次访问的时间戳
5.  解锁互斥锁

# html - .class:hover 没有发生

> ID：14398346
> 
> 赞同：1
> 
> 时间：2013-01-18T11:50:11.840
> 
> 标签：html, css, google-chrome

我有两个带有以下代码的类-

```
<div class="arrow-left"> <h1> < </h1> </div>
<div class="arrow-right"><h1> > </h1> </div> 
```

他们的风格——

```
.arrow-left{
position: fixed;
top:40%;
left:10%;
vertical-align: middle;
height:80%;width:5%;
text-align: center;
}
.arrow-right{
position: fixed;
top:40%;
right:10%;
vertical-align: middle;
height:80%;width:5%;
text-align: center;
}
.arrow-left:hover, .arrow-right:hover{
background-color: #4EB30B;
cursor:pointer;
} 
```

它们用于导航目的。
当我将鼠标悬停在 .arrow-left 上时，它的背景不会改变，但是当我将鼠标悬停在 .arrow-right 上时，它的背景会发生变化。一旦我点击了 .arrow-right ，我将鼠标悬停在 .arrow-left 上，它的背景就会发生变化！
这发生在 Ubuntu 上的 Chrome 中。
这是 我想知道为什么会发生这种情况但不需要解决方法的[网页。](https://dl.dropbox.com/u/115036486/main.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T11:55:47.547

这是由箭头的定位引起的，在您的示例链接中，当鼠标位于左箭头下方约 150 像素时，左箭头悬停正在工作，您应该为其指定宽度和高度（以 px 为单位），以便悬停仅在您处于真的在盒子上徘徊

另外，`div.b-wrap`在左箭头框上方使用属性`z-index`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T11:55:57.880

添加`z-index:100`到`.arrow-left`

# jquery - WP Supersized & Easy Fancybox Conflict

> ID：14398347
> 
> 赞同：0
> 
> 时间：2013-01-18T11:50:14.433
> 
> 标签：jquery, wordpress, fancybox, supersized

我正在使用 WP Supersized 和 Easy Fancybox Wordpress 插件。一切都很好，直到我没有点击链接打开一个fancybox。图像打开完美，只是位置有一些问题。它在打开时向左移动。

这是我使用 fancybox 的演示页面的链接：[http ://martinushoeve.dig-id.be/?page_id=5](http://martinushoeve.dig-id.be/?page_id=5)

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T07:05:11.510

我发现了这个问题的答案。

这是罪魁祸首：自版本 3.1.2 以来添加的 jquery.animate-enhanced.js 文件正在创建问题。

注释掉这一行：

```
wp_register_script('jquery_animate_enhanced', content_url().'/plugins/wp-supersized/js/jquery.animate-enhanced.min.js',array('jquery'),self::supersized_jquery_animate_enhanced_version) 
```

可能在此文件的第 55 行：wp-content/plugins/wp-supersized/includes/WPSupersized.php

这现在对我有用。

# yii - yii echo 图像在 Windows 上不起作用

> ID：14398356
> 
> 赞同：0
> 
> 时间：2013-01-18T11:50:36.913
> 
> 标签：yii

嗨，我在 Yii 中有以下代码，它适用于 linux apache，但在 windows xampp 上它给出了一个错误：

```
 $aliasPath = Yii::getPathOfAlias('application.upload');
    $imageUrl = Yii::app()->getAssetManager()->publish($aliasPath);
    echo CHtml::Image($imageUrl.'/logo.jpg','Client',array('width'=>'240'));` 
```

它会导致在浏览器中显示以下内容：

```
getAssetManager()->publish($aliasPath); echo CHtml::Image($imageUrl.'/logo.jpg','Client',array('width'=>'240')); ?> 
```

任何帮助将非常感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T11:57:17.230

PHP肯定是处理的吗？和完整的 php 开始标签 ( `<?php`)？如果我使用具有此确切内容的 .html 文件：

```
<?php 
$aliasPath = Yii::getPathOfAlias('application.upload');
$imageUrl = Yii::app()->getAssetManager()->publish($aliasPath);
echo CHtml::Image($imageUrl.'/logo.jpg','Client',array('width'=>'240')); 

?> 
```

然后我得到完全按照您的描述，因为它在第一个`<`和第二`>`个标签之间读取，并将它们隐藏为一个完全未知的 HTML 标签。

如果 PHP 正在处理，您可以使用简单的页面轻松测试

# visual-studio-2012 - Visual Studio 2012 / Entity Framework 5（数据库优先）：如何订阅部分类中的属性或集合更改？

> ID：14398360
> 
> 赞同：3
> 
> 时间：2013-01-18T11:50:57.387
> 
> 标签：visual-studio-2012, entity-framework-5, inotifypropertychanged

到目前为止，我一直在使用 Visual Studio 2010 和 Entity Framework 4.x。（数据库优先）。对于我生成的一些实体类，我添加了部分类定义和一些只读属性。要获得有关属性更改的通知，我可以处理实体的 PropertyChanged 事件，并在查询的属性之一发生更改时为添加的只读属性引发 PropertyChanged 事件。非常简单。

最近我切换到 Visual Studio 2012，它默认包含 Entity Framework 5。我从现有数据库（数据库优先）创建了一个新模型，并生成了实体类。但似乎生成的类无法利用 INotifyPropertyChanged - 因为它们是 POCO 类（这是默认代码生成策略），因此不像 Entity Framework 4.x 中那样从 EntityObject 派生。

所以我的第一个问题是：使用 Entity Framework 5（数据库优先），我如何才能获得有关属性更改的通知？这一定是可能的，因为 WPF 中的数据绑定确实有效，即使绑定了刚刚创建的实体类实例（因此它不是来自上下文查询的动态实体代理）。

我的第二个问题是：使用 Entity Framework 5（数据库优先），我如何将实体对象的关联集合绑定到 wpf 控件？实体关系的生成关联属性是 ICollection，具有默认的 HashSet 实例。因此，当添加或删除相关实体对象时，绑定的 wpf 控件不会收到有关该集合更改的通知（即使在实体集的本地属性中使用 ObservableCollection 时，关联属性仍然是没有更改通知的 HashSets..） .

实现这些基本目标的“预期”方式是什么？

在此先感谢，汉内斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T06:48:23.257

**手动方法**：为什么不先使用代码并从有趣的设置器手动引发 PropertyChanged 事件？工作量很大，但控制力很强。

**动态方法** 假设您有一个 EditViewModel，它有一个名为 Document 的属性，其中包含对生成的 EF 实体的引用，您需要绑定到此 Document 属性。

利用适配器设计模式，您可以将实体包装在一个类中，该类实现 INotifyPropertyChanged 并在调用 setter 时引发 PropertyChanged 事件。而不是绑定到您在拦截器上绑定的实体，女巫会引发属性更改并使用反射 api 将属性调用委托给包装的实体对象。

你可以在这里找到一个很好的例子，目标是让 ViewModel 实现 INotifyPropertyChanged 但你也可以对文档执行此操作：[http ://www.hightech.ir/SeeSharp/best-implementation-of-inotifypropertychange-ever](http://www.hightech.ir/SeeSharp/best-implementation-of-inotifypropertychange-ever)

# php - Twitter Oath Token 问题

> ID：14398368
> 
> 赞同：0
> 
> 时间：2013-01-18T11:51:22.320
> 
> 标签：php, twitter-oauth

我收到以下错误，我不确定为什么它没有收到令牌。

哇！此页面没有请求令牌。这是我们要求使用您的 Twitter 帐户的应用程序所需的特殊密钥。请返回将您发送到此处的站点或应用程序，然后重试；这可能只是一个错误。

网址：[https ://twitter.com/oauth/authorize?oauth_token=](https://twitter.com/oauth/authorize?oauth_token=)

```
 include_once 'classes/lib/EpiCurl.php';
include_once 'classes/lib/EpiOAuth.php';
include_once 'classes/lib/EpiTwitter.php';
include_once 'classes/lib/secret.php';

if (!isset($_GET['oauth_token'])) $_GET['oauth_token'] = "";
if (!isset($_GET['bm'])) $_GET['bm'] = "";
if (!isset($_GET['next'])) $_GET['next'] = "";
if (!isset($_POST['login'])) $_POST['login'] = "";

$twitterObj = new EpiTwitter($consumer_key, $consumer_secret);
$oauth_token = $_GET['oauth_token'];    

  if($oauth_token == '')
  { 
    $tloginurl = $twitterObj->getAuthorizationUrl();        
} 
```

# php - 如何在 TYPO3 的插件插入页面中显示插件项目信息？

> ID：14398373
> 
> 赞同：4
> 
> 时间：2013-01-18T11:51:39.870
> 
> 标签：php, typo3

我创建了一个小图片库管理插件。我可以将自己的插件插入页面，但我错过了一些要点。当我在页面中插入插件时，我想在那里显示信息以便更轻松地跟踪添加的所有项目。这是我要显示预览的页面： ![Typo3 页面的插件总结](../Images/bfaf53d2380413ad71329153c4f593e5.png)

在 CODE: 部分下，我确信我可以放置内容，但不知道执行该操作的方法或配置。

我将不胜感激有关此的任何提示。

更新：我使用的是 FlexForms，而不是 TypoScript 或类似的东西。我正在寻找的是一些 Hook 或一些特殊的可配置方法来执行 PHP 函数以在那里输出东西。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T11:57:05.750

请参阅[http://buzz.typo3.org/people/steffen-kamper/article/render-custom-preview-from-extension](http://buzz.typo3.org/people/steffen-kamper/article/render-custom-preview-from-extension)了解如何在typo3 页面视图中创建自己的插件预览的教程。

# iis - WMI IIS 6.0 自定义 HttpError (Powershell)

> ID：14398375
> 
> 赞同：0
> 
> 时间：2013-01-18T11:52:00.817
> 
> 标签：iis, powershell, wmi

请有人可以看看这个并告诉我我做错了什么？我正在尝试使用 powershell 和 wmi 修改 IIS 网站中的自定义错误消息属性...这就是我想出的。

```
 $Server = "localhost" 
    $Wmi = Get-WmiObject -Class IIsWebServerSetting -Namespace "root\microsoftiisv2" -ComputerName $server -filter "ServerComment = 'SharePoint - SP80'" -Authentication 6
    $CustomHttpError = $wmi | Foreach-Object { $_.HttpErrors | ? {$_.HttpErrorCode -contains "400"} | Select HttpErrorCode, HttpErrorSubcode, HandlerType,HandlerLocation;}
    $CustomHttpError.HandlerLocation('C:\WINDOWS\help\iisHelp\common\Custom.htm') 
```

我收到错误消息“方法调用失败，因为 [Selected.System.Management.ManagementBaseObject] 不包含名为 'HandlerLocation' 的方法”

当我使用 Get-Member 检查 $CustomHttpError 时，我得到以下信息。

类型名称：Selected.System.Management.ManagementBaseObject

Name MemberType 定义
---- ---------- ----------
Equals Method bool Equals(System.Object obj)
GetHashCode Method int GetHashCode()
GetType Method type GetType()
ToString方法字符串 ToS​​tring()
HandlerLocation NoteProperty System.String HandlerLocation=C:\WINDOWS\help\iisHelp\common\400.htm HandlerType NoteProperty System.String HandlerType=FILE
HttpErrorCode NoteProperty System.String HttpErrorCode=400
HttpErrorSubcode NoteProperty System.String HttpErrorSubcode=*

如果 HandlerLocation 属性不是我可以调用的方法，我该如何修改它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T12:48:09.887

尝试：

```
$Server = "localhost" 
$Wmi = Get-WmiObject -Class IIsWebServerSetting -Namespace "root\microsoftiisv2" -ComputerName $server -filter "ServerComment = 'SharePoint - SP80'" -Authentication 6

#Get httperrors array
$HttpErrors = $wmi.HttpErrors
#Changing 400 error pages
$HttpErrors | % { if ($_.HttpErrorCode -eq "400") { $_.HandlerLocation = "C:\WINDOWS\help\iisHelp\common\Custom.htm" } }

#Set updated httpserros property
$wmi.HttpErrors = $HttpErrors
#Save object
$wmi.Put() 
```

# java - 从 servlet 执行 oracle 查询的错误结果

> ID：14398377
> 
> 赞同：0
> 
> 时间：2013-01-18T11:52:14.947
> 
> 标签：java, sql-server, oracle, servlets, sqlplus

我正在使用以下代码来执行查询。我想通过使用 lpad 命令和连接将结果显示为“B010025”。（25 和 B01 作为输入值给出）。但它只显示 B0125。当我从 SQL*Plus 执行它时，它显示了正确的结果。但在 servlet 中却没有。我无法理解这一点。谁能帮我得到预期的结果。

```
public class PickOfferNo extends HttpServlet {

protected void processRequest(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    response.setContentType("text/html;charset=UTF-8");
    PrintWriter out = response.getWriter();
    try {
         //TODO output your page here
        out.println("<html>");
        out.println("<head>");
        out.println("<title>Servlet PickOfferNo</title>");  
        out.println("</head>");
        out.println("<body>");
        out.println("<h1>Servlet PickOfferNo at " + request.getContextPath () + "</h1>");
        out.println("</body>");
        out.println("</html>");

    } finally {            
        out.close();
    }
}

// <editor-fold defaultstate="collapsed" desc="HttpServlet methods. Click on the + sign on the left to edit the code.">

@Override
protected void doGet(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    //processRequest(request, response);

    response.setContentType("text/html;charset=UTF-8");
    PrintWriter out = response.getWriter();
    try
    {
        out.println("<html>");
        out.println("<head>");
        out.println("<title>Servlet PickOfferNo</title>");
        out.println("</head>");
        out.println("<body>");
        out.println("<h1>Servlet PickOfferNo at " + request.getContextPath () + "</h1>");
        doPost(request,response);
        out.println("</body>");
        out.println("</html>");
    }
    finally
    {
       out.close(); 
    }
}

@Override
protected void doPost(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    //processRequest(request, response);
    String ofrn=null;
    //String cd=null;
    //String no=null;
    String cd="B01";
    String no="25";
    JSONObject obj = new JSONObject();
    //cd=request.getParameter("sec_code");
    PrintWriter out=response.getWriter();
    try
    {
        Class.forName("oracle.jdbc.driver.OracleDriver");
        java.sql.Connection conn = DriverManager.getConnection("jdbc:oracle:thin:@192.168.1.200:1521:pdsm", "test", "test");
             Statement stmt=conn.createStatement();
                 conn.setAutoCommit(true);
                 //ResultSet rs=stmt.executeQuery("select to_char(nvl(max(substr(offerno,4,4)),0)+1) into '"+no+"' from offer1 where div_sec='"+cd+"'");
                 ResultSet rs1=stmt.executeQuery("select lpad(ltrim(rtrim('"+no+"')),4,'0') from dual");
                 //while(rs1.next())
                 ofrn=cd+no;

                 //obj.put("offrn", ofrn);
                 out.println(ofrn);
    }
    catch(Exception e)
    {
        out.println(e.getMessage());
    }
}

@Override
public String getServletInfo() {
    return "Short description";
}// </editor-fold>
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T11:59:05.823

仅有的：

```
String cd="B01";
String no="25"; 
```

和：

```
ofrn=cd+no; 
```

有助于输出结果：

```
out.println(ofrn); 
```

所以，没有什么意外的发生！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T11:59:10.807

这是因为您没有选择数据库返回的值。执行

```
"select lpad(ltrim(rtrim('"+no+"')),4,'0') from dual" 
```

不会改变“no”或“cd”的值。

您应该获取结果集并对其进行处理以访问结果集返回的第一行中的第一列。

以下代码应该完成分配。（未测试。）

```
ResultSet rs1=stmt.executeQuery("select lpad(ltrim(rtrim('"+no+"')),4,'0') from dual");
if(rs1.next()){
no = rs1.getString(1);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T11:56:39.063

`cd`您从未为和赋值`no`。

```
 ResultSet rs1=stmt.executeQuery("select lpad(ltrim(rtrim('"+no+"')),4,'0') from dual");
    //while(rs1.next())
    ofrn=cd+no;

    //obj.put("offrn", ofrn);
    out.println(ofrn); 
```

# iphone - 在距源一定距离处找到坐标

> ID：14398378
> 
> 赞同：0
> 
> 时间：2013-01-18T11:52:16.297
> 
> 标签：iphone, dictionary, math, coordinates

我正在开发一个 iPhone 应用程序，我需要在距给定点一定距离处找到一些坐标。

用户触摸地图，我在触摸时获得坐标。现在我必须找到一些向东约 5 公里的坐标，以及向南约 5 公里的另一个坐标。我在网上搜索过，但找不到任何算法。

我不确定这是这个问题的正确位置，或者我是否需要找到其他可以找到与数学相关的问题的部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:30:03.043

如果地球的周长是 C，则给定点以南 d 公里处的点是向南 360*d/C 度。向东 d 公里处的点是向东 360*d/(C*cos(纬度)) 度。

因此，如果地球的周长是 40075.04 公里，向南移动 5 公里，您将从纬度中减去 0.0449 并使用相同的经度。要向东移动 5 公里，您将使用相同的纬度并将经度添加 0.0449/cos(latitude)。

# wpf - 如何将滚动值绑定到 WPF 中的标签？

> ID：14398379
> 
> 赞同：0
> 
> 时间：2013-01-18T11:52:22.910
> 
> 标签：wpf, user-controls, wpf-controls, label

我有一个改变它的价值的卷轴，我想写一个`Label`每时每刻都在使用的价值。

我试过这个：

```
<Window x:Class="WpfApplication16.Window1"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:my="clr-namespace:WpfApplication16"
    Title="Window1" Height="300" Width="300">
<Window.Resources>
    <my:ValueAngleConverter x:Key="valueAngleConverter"/>
    <my:ValueTextConverter x:Key="valueTextConverter"/>
</Window.Resources>
<Grid>
    <Slider Name="knob" SmallChange="1">
        <Slider.Template>
            <ControlTemplate>
                <Viewbox>
                    <Canvas Width="300" Height="300" Margin="5">
                        <Ellipse Fill="LightBlue" Width="300" Height="300" Canvas.Left="0" Canvas.Top="0" 
            Stroke="Black" StrokeThickness="10"
            MouseLeftButtonUp="Ellipse_MouseLeftButtonUp"
            MouseMove="Ellipse_MouseMove"/>
                        <Ellipse Fill="Black" Width="60" Height="60" Canvas.Left="120" Canvas.Top="120"/>
                        <Canvas>
                            <Line Stroke="Red" StrokeThickness="5" X1="150" Y1="30" X2="150" Y2="20"
            MouseLeftButtonUp="Ellipse_MouseLeftButtonUp" MouseLeftButtonDown="Ellipse_MouseLeftButtonDown"/>
                            <Canvas.RenderTransform>
                                <RotateTransform CenterX="150" CenterY="150">
                                    <RotateTransform.Angle>
                                        <MultiBinding Converter="{StaticResource valueAngleConverter}">
                                            <Binding RelativeSource="{RelativeSource TemplatedParent}" Path="Value"/>
                                            <Binding RelativeSource="{RelativeSource TemplatedParent}" Path="Minimum"/>
                                            <Binding RelativeSource="{RelativeSource TemplatedParent}" Path="Maximum"/>
                                        </MultiBinding>
                                    </RotateTransform.Angle>
                                </RotateTransform>
                            </Canvas.RenderTransform>
                        </Canvas>
                    </Canvas>
                </Viewbox>
            </ControlTemplate>
        </Slider.Template>
    </Slider>
    <Label Content="{Binding Value, ElementName=knob, UpdateSourceTrigger=PropertyChanged}" />
</Grid> 
```

我已将滑块内容的外观更改为椭圆滑块（如果有人感到好奇，我可以附上完整代码）。

但我的问题与我的标签有关。当我改变滚动值时，我希望它改变。现在它显示第一个值，但堆叠滚动（我无法滚动）并且无法更改其值。

**关于将滚动值绑定到标签内容**我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T11:59:23.297

以下代码有效。我看到的不同之处在于您没有在绑定中声明`Path=Value`，但我认为这不重要。

```
<StackPanel>
    <Slider Name="knob" SmallChange="1"/>        
    <Label Content="{Binding ElementName=knob, Path=Value, UpdateSourceTrigger=PropertyChanged}"/>
</StackPanel> 
```

`Template`应该在`Value`绑定的点检查 。

# java - 如何使用逻辑迭代对象列表：迭代并在jsp中显示每个对象的属性值？

> ID：14398382
> 
> 赞同：0
> 
> 时间：2013-01-18T11:52:27.337
> 
> 标签：java, jsp, struts, loops

我有一个分配给我的操作类中的会话属性的对象（Java bean）列表，如下所示：

```
List<NewProfile> profiles = ... ;
session.setAttribute("profiles", profiles); 
```

这`profiles`是一个名为 的类的对象列表`NewProfile`。

现在我必须检索配置文件并遍历每个`NewProfile`实例，并使用`logic:iterate`.

欢迎提出建议！提前致谢！

问候维杰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T11:57:09.263

可能这个样本可以帮助[逻辑：迭代](http://www.mkyong.com/struts/struts-logic-iterate-example/)

# c# - 包装内联函数

> ID：14398384
> 
> 赞同：2
> 
> 时间：2013-01-18T11:52:48.483
> 
> 标签：c#, c++, c++-cli, wrapper

> **可能重复：**
> [C++/CLI 混合模式 DLL 创建](https://stackoverflow.com/questions/2691325/c-cli-mixed-mode-dll-creation)

我正在使用 c++ cli 包装一个 C++ 类。头文件如下所示：

**pabcon.h**

```
class PABCon {
private:
        unsigned int maxIndex;      
        long byteSize;  
public:
    __declspec(dllexport) inline unsigned int GetMaxIndex() { return this->maxIndex; };
    __declspec(dllexport) void invertData();
}; 
```

我以这种方式包装非内联函数：

**pabconwrapper.h**

```
public ref class PABConWrapper
{
private:
    PABCon *pabc;

public:
    PABConWrapper();
    ~PABConWrapper();
    void invertData();
}; 
```

**pabconwrapper.cpp**

```
PABConWrapper::PABConWrapper() : pabc(new PABCon())
{

}

void PABConWrapper::invertData()
{
    pabc->invertData();
}

PABConWrapper::~PABConWrapper()
{
    delete pabc;
} 
```

我的问题是：

1) 包装**内联**c++ 函数的最佳方法是什么？

2) 我应该如何处理**pabcon.h**中定义的私有变量？我也应该以某种方式包装它们吗？

谢谢

PS 我上次接触 C++ 是在 4 年前，从那时起我就用 C# 编写代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T13:45:44.350

内联：将方法标记为内联是对编译器的指令，即不发出函数调用，而是获取方法的内容，并将其直接放入调用函数中。我相信这只是建议性的，编译器无论如何都可以选择发出函数调用。无论如何，从 C++/CLI 调用此函数时不需要做任何花哨的事情，因此在包装它时不需要做任何花哨的事情。只需像任何其他方法一样包装它。

私有变量：如果它们是*私有*变量，那么使用的非托管 C++ 代码`PABCon`将无法访问它们。的公共接口`PABCon`只是公共方法，所以这就是您需要担心的全部。（如果 C++ 类有任何*公共*变量，那么您可以通过在 C++/CLI 中创建一个属性来包装它们。）

`~PABConWrapper`: 在 C++/CLI 中，`~`不是析构函数，而是 dispose 方法。正如现在所实施的那样，如果您忘记处置您的新类，就会发生内存泄漏。至少，切换`~`到`!`，并声明终结器。理想情况下，同时实现`!`and `~`，在两个方法中删除非托管对象（使用适当的空检查），并在其他方法中添加适当的空检查。这将是 IDisposable 的良好且正确的实现。

# android - Android 上警报对话框的确定 按钮

> ID：14398392
> 
> 赞同：33
> 
> 时间：2013-01-18T11:53:25.933
> 
> 标签：android, android-alertdialog

这是我的警报代码，按下按钮时会显示一条消息。如何使 OK 按钮关闭？

```
 Button bm1 = (Button) findViewById(R.id.button1);
    bm1.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            AlertDialog alert = new AlertDialog.Builder(screen4.this).create();
            alert.setTitle("Doctor");
            alert.setMessage("message");
            alert.setCancelMessage(null);
            alert.show();
        }
    });
}} 
```

我已经放`alert.setCancelMessage(null)`了，但它没有显示任何关闭按钮。

**解决方案：**

```
 Button bm1 = (Button) findViewById(R.id.button1);
       bm1.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Builder alert = new AlertDialog.Builder(screen4.this);
            alert.setTitle("Doctor");
            alert.setMessage("message");
            alert.setPositiveButton("OK", null);
            alert.show();
        }
    }); 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-01-18T11:56:24.787

将您的警报对话框更改为：

```
Builder alert = new AlertDialog.Builder(screen4.this);
alert.setTitle("Doctor");
alert.setMessage("message");
alert.setPositiveButton("OK",null);
alert.show(); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-18T11:56:33.367

您可以使用它为对话框创建确定和取消按钮，

```
AlertDialog.Builder builder = new AlertDialog.Builder(
                        getApplicationContext());
                builder.setCancelable(true);
                builder.setTitle("Title");
                builder.setInverseBackgroundForced(true);
                builder.setPositiveButton("Yes",
                        new DialogInterface.OnClickListener() {
                            @Override
                            public void onClick(DialogInterface dialog,
                                    int which) {
                                dialog.dismiss();
                            }
                        });
                builder.setNegativeButton("No",
                        new DialogInterface.OnClickListener() {
                            @Override
                            public void onClick(DialogInterface dialog,
                                    int which) {
                                dialog.dismiss();
                            }
                        });
                AlertDialog alert = builder.create();
                alert.show(); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-02-21T10:25:00.280

**难道不能只使用一个积极的按钮来完成吗？**

```
AlertDialog.Builder builder = new AlertDialog.Builder(this);
builder.setMessage("Look at this dialog!")
       .setCancelable(false)
       .setPositiveButton("OK", new DialogInterface.OnClickListener() {
           public void onClick(DialogInterface dialog, int id) {
                //do things
           }
       });
AlertDialog alert = builder.create();
alert.show(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-03T09:43:28.390

```
 bt = (Button) findViewById(R.id.button1);
    bt.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            ab = new AlertDialog.Builder(MainActivity.this);

            ab.setTitle("confirm");
            ab.setIcon(R.drawable.ic_launcher);
            ab.setMessage("Do u want to close this application?");

            ab.setPositiveButton("ok", new DialogInterface.OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int i) {
                    Toast.makeText(MainActivity.this, "ok", Toast.LENGTH_SHORT).show();
                }
            });

            ab.setNegativeButton("cancle", new DialogInterface.OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int i) {
                    Toast.makeText(MainActivity.this, "cancle", Toast.LENGTH_SHORT).show();
                }
            });

            ab.show();
        }
    }); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-18T11:55:16.470

您可以使用`setPositiveButton`和`setNegativeButton`

```
 alert.setPositiveButton("OK", new OnClickListener() {

        @Override
        public void onClick(DialogInterface alert, int which) {
            // TODO Auto-generated method stub
            //Do something
            alert.dismiss();
        }
    });
    alert.setNegativeButton("Cancel", new OnClickListener() {

        @Override
        public void onClick(DialogInterface alert, int which) {
            // TODO Auto-generated method stub
            alert.dismiss();
        }
    }); 
```

编辑：

```
alert.setButton("OK", new DialogInterface.OnClickListener() {

    @Override
    public void onClick(DialogInterface dialog, int which) {
        // TODO Auto-generated method stub
        // Do something
        alert.dismiss();
        }
    });
alert.setButton("Cancel", new DialogInterface.OnClickListener() {
    @Override
    public void onClick(DialogInterface dialog, int which) {
        // TODO Auto-generated method stub

        alert.dismiss();
        }
    }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-18T11:58:45.887

检查 API 中的 AlertDialog.Builder 页面：http: [//developer.android.com/reference/android/app/AlertDialog.Builder.html](http://developer.android.com/reference/android/app/AlertDialog.Builder.html)

您可以分别使用 setPositiveButton、setNeutralButton 和 setNegativeButton 方法设置正、中性和负按钮

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-18T11:55:14.643

alert.setPositiveButton 或 alert.setNegativeButton

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-18T11:57:00.043

```
Button bm1 = (Button) findViewById(R.id.button1);
    bm1.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            AlertDialog alert = new AlertDialog.Builder(screen4.this).create();
            alert.setTitle("Doctor");
            alert.setMessage("message");
            alert.setCancelMessage(null);

            alert.setButton("OK", new DialogInterface.OnClickListener() {

                public void onClick(DialogInterface dialog, int which) {
                    //do somthing or dismiss dialog by                dialog.dismiss();

                }
            });

            alert.show();
        }
    });
}} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-01-18T12:02:05.853

```
 Button bm1 = (Button) findViewById(R.id.button1);
bm1.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {
    final AlertDialog dialog = new AlertDialog.Builder(screen4.this).create();
    dialog.setTitle("Doctor");
    dialog.setMessage("message");
    dialog.setButton("Ok",new DialogInterface.OnClickListener() {
           public void onClick(DialogInterface dialog, int id) {
            // here you can add functions

           }
    });
    dialog.setButton2("Cancel",new DialogInterface.OnClickListener() {
       public void onClick(DialogInterface dialog, int id) {
        // here you can add functions
               dialog.dismiss();
    }
    });
    dialog.show();
    }}; 
```

# caroufredsel - 可以在 caroufredsel 中为每个项目设置不同的延迟吗？

> ID：14398393
> 
> 赞同：0
> 
> 时间：2013-01-18T11:53:26.517
> 
> 标签：caroufredsel

有没有办法`auto`在 caroufredsel ( [caroufredsel](http://caroufredsel.dev7studios.com/configuration.php) ) 中使用配置来指定每个项目的不同延迟，例如，可以有：

*   第一项 - 5 秒
*   第二项 - 10 秒
*   第三项 - 8 秒
*   ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T23:29:37.097

在网站上工作时，我遇到了类似的问题。轮播包含动画和一些附加信息作为静态幻灯片。动画的持续时间远远超过了阅读其他幻灯片内容所需的时间，所以我想为动画设置不同的超时时间。

*该解决方案在“配置事件”*部分的[自定义事件的代码示例页面](http://caroufredsel.dev7studios.com/code-examples/custom-events.php)的文档中有些隐藏。

 *您可以通过以下方式访问和编辑`configuration`对象

`$('#carousel').triggerHandler('configuration')`

并根据要显示的项目实际分配不同`timeoutDuration`的值，例如在对象的`onBefore`事件处理程序中`scroll`：

```
...
scroll: {

    onBefore: function(data){

        if(data.items.visible[0].id == 'animation'){
            t = 30000;
        }
        else {
            t = 5000;
        }
        $('#carousel').triggerHandler('configuration').auto.timeoutDuration = t;
    },
... 
```*

# c++ - 使用 sscanf() 拆分空白字符串

> ID：14398397
> 
> 赞同：2
> 
> 时间：2013-01-18T11:53:33.833
> 
> 标签：c++, scanf, split

我试图用空格分割一个长字符串，使用`sscanf()`.

例如：我需要拆分这个

```
We're a happy family 
```

进入

```
We're
a
happy
family 
```

我尝试了以下方法

```
char X[10000];
fgets(X, sizeof(X) - 1, stdin); // Reads the long string
if(X[strlen(X) - 1] == '\n') X[strlen(X) - 1] = '\0'; // Remove trailing newline
char token[1000];
while(sscanf(X, "%s", token) != EOF) {
    printf("%s | %s\n", token, X);
} 
```

前面的代码进入一个无限循环输出`We're | We're a happy family`

我尝试`sscanf()`用 C++替换`istringstream`，效果很好。

是什么让 X 保持其价值？它不应该像普通流一样从缓冲区中删除吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T11:56:59.217

`sscanf()`确实存储有关它先前读取的缓冲区的信息，并且总是从传递给它的地址（缓冲区）开始。一个可能的解决方案是使用`%n`格式说明符来记录最后`sscanf()`停止的位置并`X + pos`作为第一个参数传递给`sscanf()`. 例如：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main()
{
    const char* X = "hello again there";
    char token[1000];
    int current_pos = 0;
    int pos = 0;
    while (1 == sscanf(X + current_pos, "%999s%n", token, &pos))
    {
        current_pos += pos;
        printf("%s | %s\n", token, X + current_pos);
    }
    return 0;
} 
```

[请参阅http://ideone.com/XBDTWm](http://ideone.com/XBDTWm)上的演示。

或者只是使用`istringstream`and `std::string`：

```
std::istringstream in("hello there again");
std::string token;
while (in >> token) std::cout << token << '\n'; 
```

# sql-server - 更改数值格式

> ID：14398401
> 
> 赞同：0
> 
> 时间：2013-01-18T11:53:44.550
> 
> 标签：sql-server, sql-server-2008, sql-server-2005

我在 MS SQL Server 表中有一个数字列（比如 column1）

数据看起来像这样

```
Column1
23.50000
170.50000
53.50000 
```

注意：小数点后总是有 5 位数字。

现在我需要一个 MS SQL 查询以下列方式显示数值

```
Column1
00023500
00170500
00053500 
```

整数部分为 5 位，小数部分为 3 位。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T06:19:02.773

如果我理解正确你需要什么

```
 declare @t table(a dec(18,5))
    insert into @t values(23.50000),(170.50000),(53.50000),(322.50000),(413142.5022)

    select a, left(replace(replicate('0', 
    case when 6-CHARINDEX('.',cast(a as varchar),1)<0 then 0 else 
6-CHARINDEX('.',cast(a as varchar),1) end) 
    +cast(a as varchar),'.',''),8) from @t 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T12:08:01.453

我认为您应该在客户端执行此操作

```
 RIGHT('00000000'+CONVERT(VARCHAR,CONVERT(INT,field*1000)),8) 
```

# java - 端口转发应用程序不起作用，我不知道为什么

> ID：14398410
> 
> 赞同：0
> 
> 时间：2013-01-18T11:54:34.190
> 
> 标签：java, networking, io

我需要编写一个快速简便的端口转发器。目前它接受连接并且可以很好地从客户端读取，但是它没有从它运行的本地机器上得到任何东西。（仅供参考，这是为了转发网络服务器，因为我找不到我通常用来将 VS2010/2012 转发到网络的应用程序，所以我自己制作了）。

我知道吞咽异常，这很糟糕，但现在这并不重要，我可以稍后处理。

```
import java.io.*;
import java.net.*;

public class SocketForward {
  int src = 0;
  int dest = 0;
  public static void main(String args[]) throws Exception {
    if (args.length < 2) {
      System.out.println("Usage: java SocketForward <source port> <destination port>");
      System.exit(1);
    } else {
      new SocketForward().startRun(Integer.parseInt(args[0]), Integer.parseInt(args[1]));
    }
  }
  public void startRun(int src, int dest) throws Exception {
    try {
      this.src = src;
      this.dest = dest;
    } catch (NumberFormatException e) {
      System.out.println("Usage: java SocketForward <source port> <destination port>");
      System.exit(1);
    }
    ServerSocket server = new ServerSocket(dest);
    System.out.println("Waiting for connections...");
    while (!server.isClosed()) {
      new ConnHandler(src, server.accept());
    }
  }
}

class ConnHandler implements Runnable {
  Socket clientSocket;
  Socket hostSocket;
  int hostport;
  Thread thread;
  BufferedOutputStream hostOut;
  BufferedOutputStream clientOut;
  BufferedInputStream hostIn;
  BufferedInputStream clientIn;
  public ConnHandler(int hostport, Socket clientSocket) {
    System.out.println("Connected to " + clientSocket.getInetAddress());
    this.clientSocket = clientSocket;
    this.hostport = hostport;
    this.thread = new Thread(this);
    thread.start();
  }
  @Override
  public void run() {
    try {
      hostSocket = new Socket("", hostport);
      System.out.println("Connected to localhost:" + hostport);
      hostOut = new BufferedOutputStream(hostSocket.getOutputStream());
      clientOut = new BufferedOutputStream(clientSocket.getOutputStream());
      hostIn = new BufferedInputStream(hostSocket.getInputStream());
      clientIn = new BufferedInputStream(clientSocket.getInputStream());
      new Thread() {
        public void run() {
          while (this == Thread.currentThread()) {
            byte[] buf = new byte[8192];
            try {
              int len = 0;
              while ((len = ConnHandler.this.clientIn.read(buf)) > 0) {
                System.out.println("Client: " + new String(buf, 0, len));
                ConnHandler.this.hostOut.write(buf, 0, len);
              }
            } catch (Exception e) {
              e.printStackTrace();
              break;
            }
          }
        }
      }.start();
      new Thread() {
        public void run() {
          while (this == Thread.currentThread()) {
            byte[] buf = new byte[8192];
            try {
              int len = 0;
              while ((len = ConnHandler.this.hostIn.read(buf)) > 0) {
                System.out.println("Host: " + new String(buf, 0, len));
                ConnHandler.this.clientOut.write(buf, 0, len);
              }
            } catch (Exception e) {
              e.printStackTrace();
              break;
            }
          }
        }
      }.start();
    } catch (Exception e) {
      e.printStackTrace();
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T11:58:34.310

您没有进行任何刷新，从而引入了不透明的中间人行为。这很可能会扰乱客户端和服务器所期望的数据流。

关于代码风格的旁注：`try-catch`在循环之外更方便`while`，所以它会自动中断：

```
try {
  while (...) ...
} catch (Throwable t) {
   t.printStackTrace();
} 
```

还要注意`Throwable`，而不是——`Exception`你会想知道**任何**破坏你的代码的错误，而不仅仅是`Exception`s。

# android - 我们如何根据计时器增量来推进搜索栏？

> ID：14398411
> 
> 赞同：-1
> 
> 时间：2013-01-18T11:54:34.300
> 
> 标签：android

在我的应用程序（即录音机应用程序）中，我希望根据时间（Chronometer）进行搜索栏，即根据音频记录的时间。

怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T11:59:37.673

使用`yourProgressBar.setProgress(VALUE_YOU_WANNA_SET)`.

在每秒更新 UI 的线程中。

# cuda - 2D CUDA 纹理内存对全局内存的便利性

> ID：14398416
> 
> 赞同：2
> 
> 时间：2013-01-18T11:54:54.677
> 
> 标签：cuda, textures

我正在实施一个简单的 boxcar 过滤器，只是作为评估 2D 局部纹理和全局内存访问的不同速度的借口。

更详细的，`.cu`文件如下

```
#include <cuda.h>  
#include <cuda_runtime.h>
#include "cufft.h"
#include "Kernels_Test_Texture_Float.cuh"

#define BLOCK_SIZE_x 16
#define BLOCK_SIZE_y 16

/**********************/
/* TEST TEXTURE FLOAT */
/**********************/
extern "C" void Function_Test_Texture_Float(float* data, float* dev_result, int N1, int N2){

    size_t pitch; 
    float* data_d;
    cudaMallocPitch((void**)&data_d,&pitch, N1 * sizeof(float), N2);
    cudaChannelFormatDesc desc = cudaCreateChannelDesc<float>();
    cudaBindTexture2D(0,&data_d_texture,data_d,&desc,N1,N2,pitch);
    cudaMemcpy2D(data_d,pitch,data,sizeof(float)*N1,sizeof(float)*N1,N2,cudaMemcpyHostToDevice);

    cudaMemset(dev_result,0,sizeof(float)*N1*N2);
    dim3 dimBlock(BLOCK_SIZE_x,BLOCK_SIZE_y); dim3 dimGrid(N1/BLOCK_SIZE_x + (N1%BLOCK_SIZE_x == 0 ? 0:1),N2/BLOCK_SIZE_x + (N2%BLOCK_SIZE_x == 0 ? 0:1));
    Kernel_Test_Texture_Float<<<dimGrid,dimBlock>>>(dev_result,N1, N2);

}

/**************/
/* TEST FLOAT */
/**************/
extern "C" void Function_Test_Float(float* data, float* dev_result2, int N1, int N2){

    float* data_d;  cudaMalloc((void**)&data_d,sizeof(float)*N1*N2);
    cudaMemcpy(data_d,data,sizeof(float)*N1*N2,cudaMemcpyHostToDevice); 

    cudaMemset(dev_result2,0,sizeof(float)*N1*N2);
    dim3 dimBlock(BLOCK_SIZE_x,BLOCK_SIZE_y); dim3 dimGrid(N1/BLOCK_SIZE_x + (N1%BLOCK_SIZE_x == 0 ? 0:1),N2/BLOCK_SIZE_x + (N2%BLOCK_SIZE_x == 0 ? 0:1));
    Kernel_Test_Float<<<dimGrid,dimBlock>>>(dev_result2,data_d,N1, N2);

} 
```

文件`.cuh`如下

```
texture<float,2> data_d_texture;

/**************************/
/* 2D TEXTURE TEST KERNEL */
/**************************/
__global__ void Kernel_Test_Texture_Float(float* dev_result, int N1, int N2)
{
    int i = threadIdx.x + blockDim.x * blockIdx.x;
    int j = threadIdx.y + blockDim.y * blockIdx.y;

    float datum, accumulator=0.;

    int size_x=5;
    int size_y=5;

    if((i<(N1-size_x))&&(j<(N2-size_y)))
    {
        for (int k=0; k<size_x; k++)
        for (int l=0; l<size_y; l++){
            datum = tex2D(data_d_texture,i+k,j+l);
            accumulator = accumulator + datum;
        }
        dev_result[j*blockDim.x*gridDim.x+i] = accumulator;
    }
}

/******************/
/* 2D TEST KERNEL */
/******************/
__global__ void Kernel_Test_Float(float* dev_result2, float* data_d, int N1, int N2)
{
    int i = threadIdx.x + blockDim.x * blockIdx.x;
    int j = threadIdx.y + blockDim.y * blockIdx.y;

    float accumulator=0.;

    int size_x=5;
    int size_y=5;

    if((i<(N1-size_x))&&(j<(N2-size_y)))
    {
        for (int k=0; k<size_x; k++)
            for (int l=0; l<size_y; l++){
                accumulator = accumulator + data_d[(j+l)*blockDim.x*gridDim.x+(i+k)];
        }
        dev_result2[j*blockDim.x*gridDim.x+i] = accumulator;
    }
} 
```

但是，全局内存内核的结果比纹理内存内核快得多（`94us`vs `615us`- 计时是 Visual Profiler 的结果 - 卡是 GeForce GT 540M）。

我正在使用纹理内存或全局内存确实比缓存纹理更快有什么问题吗？

提前感谢您的任何评论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T12:30:30.060

一般来说，全局内存读取访问比纹理内存读取快。此外，GT 540M 具有 2.1 的计算能力，因此它具有可配置的 L1 和 L2 缓存层次结构，用于全局内存访问。这个缓存层次结构也很小，它比纹理缓存大。

考虑到这两个方面，您的全局内存实现比纹理更快也就不足为奇了。

您可能没有考虑设备的 L1/L2 缓存层次结构。根据问题的大小，您可以通过在启动`Kernel_Test_Float`内核之前将 L1 缓存最大化到 48KB 来找到更好的性能：

```
cudaThreadSetCacheConfig(cudaFuncCachePreferL1); 
```

# backbone.js - 骨干.js 没有附加元素，仍然是正确的数据控制台

> ID：14398417
> 
> 赞同：0
> 
> 时间：2013-01-18T11:54:56.143
> 
> 标签：backbone.js

> **可能重复：**
> [Backbone.js - 名称更改时未触发更改](https://stackoverflow.com/questions/14453219/backbone-js-change-not-triggering-while-the-name-change)

在我的以下功能中，控制台显示数据，但没有附加到正文标签，任何人都发现我的问题..

我的 json ：

```
[
    {name:'student4'},
    {name:'student5'},
    {name:'student6'}
] 
```

代码 ：

```
 (function($){   
var model = Backbone.Model.extend({
  defaults:{
    name:'default name'
  }
});

var collection = Backbone.Collection.extend({
  model:model,
  url: 'data/names.json'
});

var itemViews = Backbone.View.extend({
  tagname:'li',
  render:function(){
    this.$el.html(this.model.get('name'));
    return this;
  }  
})

var view = Backbone.View.extend({
  el: $("#contacts"),
  initialize:function(){
    this.collection = new collection();
    this.collection.on("reset", this.render, this);
    this.collection.fetch();
  },
  render:function(){
    var that = this;
    _.each(this.collection.models, function(item){
      that.renderName(item);
    })
  },
  renderName:function(item){
    var itemView = new itemViews({model:item});
    this.$el.append(itemView.render().el); //nothing rendering
  }
});

var stView = new view();

})(jQuery) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T12:26:22.457

问题似乎在这两行：

```
this.collection.fetch(); //it seems it's not fetching;
this.render(); 
```

`Collection.fetch`是一个异步操作。当`render`您查看时，请求尚未返回，因此您的集合为空。尝试将渲染方法绑定到集合`reset`事件：

```
collection.on("reset", this.render, this);
this.collection.fetch(); 
```

# php - 无法在 Magento 1.4 中显示面包屑块

> ID：14398418
> 
> 赞同：0
> 
> 时间：2013-01-18T11:54:58.707
> 
> 标签：php, magento, breadcrumbs

我正在使用自定义主题。尽管文件 breadcrumbs.phtml 位于它应该在的位置并调用 getChildHtml('breadcrumbs') 方法，但我无法在任何地方显示面包屑。

另一方面，一切正常，例如footer.phtml。

文件footer.phtml 和breadcrumbs.phtml 存储在同一位置。

如果我将以下代码放在 1column.phtml 中：

`<?php echo $this->getChildHtml('breadcrumbs') ?>
<?php echo $this->getChildHtml('footer') ?>`

...只有第二行有效。我没有得到任何错误或任何东西，只是没有出现面包屑的事实。我在 breadcrumbs.phtml 中放了一些随机回声，以确保我会注意到该块。

我在这里严重用尽了想法。顺便说一句，缓存被禁用了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T14:47:33.143

不确定你是否都准备好了，但你检查了你的布局文件（frontend\default[YOUR TEAM]\layout\page.xml）

page.xml 应该包含以下几行，最好它们是默认页面的子页面。

```
<block type="page/html_breadcrumbs" name="breadcrumbs" as="breadcrumbs"/> 
```

如果存在，请在 page.xml 中搜索 1column 并查看面包屑是否未禁用。

# jsp - mongodb 查询：如何获取唯一条目、列的总和、计数等，

> ID：14398422
> 
> 赞同：0
> 
> 时间：2013-01-18T11:55:05.613
> 
> 标签：jsp, mongodb

关于此链接[mongodb 查询：如何获取唯一条目](https://stackoverflow.com/questions/11028320/mongodb-query-how-to-get-unique-entries)

我试过这个命令，

```
db.userInfo.group({key: {userID: true}, initial: {filescount: 0}, reduce: function(doc, aggregator) { aggregator.filescount += 1;}}); 
```

这将返回如下所示，

```
[
    {
            "userID" : "50d002940cf2298e9721642d",
            "filescount" : 2
    },
    {
            "userID" : "50b9d10e0cf2362982338e38",
            "filescount" : 12
    }
] 
```

这对于仅获取值的计数是可以的，我需要如下所示

```
[
    {
            "userID" : "50d002940cf2298e9721642d",
            "filescount" : 2,
            "filesTotalSize" : 1000,
            "physicalFilescount" : 1
    },
    {
            "userPID" : "50b9d10e0cf2362982338e38",
            "filescount" : 12,
            "filesTotalSize" : 10000,
            "physicalFilescount" : 10
    }
] 
```

其中 filesTotalsize 是所有 filesSize 字段的总和，physicalFilescount 是用户集合中存储的物理文件数。

任何帮助都会对我表示赞赏和帮助。谢谢， Annamalai.Lk

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T12:19:50.963

我使用以下 js 提取详细信息，

```
print("Number of Users info Collection is : "+db.user.find({},{_id:1}).count());
print("userID,EmailId,Age,Sex,fileCount,TotalPhysicalFiles,TotalFileSize");

//user is a collection based on that i get values from the userFiles collection
//(i.e) each user have some files in userFiles collection..
//So that i really want to get each users
//files count, actual files count, sizeused field values

db.user.find().forEach( function(user) {
var fileCount = 0;
var totalPhysicalFiles = 0;
if(user != undefined)
{       
    db.userFiles.find().forEach( function(userFiles) { 
        if(userFiles.userID == user._id)
        {
            fileCount++;
            if(userFiles.fileURL != undefined)
                totalPhysicalFiles++;
        }           
    });
    var userRoleId = user.appRole.$id;
    var userType = "";
    if(userRoleId == "01")
        userType = "ADMIN";
    else
        userType = "USER";
    print(user._id+","+user.userId+","+user.age+","+user.sex+","+fileCount+","+totalPhysicalFiles+","+user.sizeUsed);
}}); 
```

最后使用以下命令从命令提示符处执行此 js，

./mongo localhost:27017/testDB getUserCount.js > test.csv

它将在该路径中生成一个 csv 文件。

# java - 将密钥和 SSL 证书导入 java 密钥库

> ID：14398423
> 
> 赞同：3
> 
> 时间：2013-01-18T11:55:12.230
> 
> 标签：java, ssl, openssl, ssl-certificate, x509certificate

我有 pem 格式的证书文件和私钥文件。是否可以使用带有 JDK 附带的默认库而不是第三方库的 Java 代码将这些文件加载​​到 Java 密钥库中。当我尝试谷歌搜索时，我只能找到 .der 格式的文件，以便使用 java 代码导入到 java 密钥库中。

[http://knowledge-oracle.blogspot.in/2009/02/import-private-key-and-certificate-in.html](http://knowledge-oracle.blogspot.in/2009/02/import-private-key-and-certificate-in.html)

是否可以通过java代码将pem格式的密钥和证书文件加载到java密钥库中而不转换为.der格式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T20:48:06.493

这是可能的，但不是不使用第三方库。
Java 不像 OpenSSL 那样对密钥库容器使用 pem 格式，因此您必须将它们转换为密钥库`PKCS12`或`JKS`.
您可以使用 bouncy castle 通过代码进行转换，也可以使用工具从 pem 文件创建密钥库并在应用程序中使用该密钥库。
试试这个 java 应用程序[证书助手](http://sourceforge.net/projects/certhelper/)来转换到密钥库

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T19:02:48.167

这是一个可以导入 pem 文件的小型实用程序：http: [//www.clearfield.com/key_store_browser/key_store_browser.html](http://www.clearfield.com/key_store_browser/key_store_browser.html)

该实用程序是开源的，您可以下载源代码。

# c++ - 不同的素数分区数

> ID：14398432
> 
> 赞同：6
> 
> 时间：2013-01-18T11:55:35.347
> 
> 标签：c++, algorithm, primes, partitioning, prime-factoring

> **可能重复：**
> [作为素数部分的数字](https://stackoverflow.com/questions/14218882/a-number-as-its-prime-number-parts)

我有这个家庭作业，很难，我必须得到给定数字的所有不同的素数分区。例如，数字 7 有五个不同的素数分区（或表示它拥有的 2 个素数分区的五种不同方式）：

*   5 + 2
*   2 + 5
*   3 + 2 + 2
*   2 + 3 + 2
*   2 + 2 + 3

如您所见，如果它是素数，则数字本身被排除在外。我不必打印所有不同的分区，只需打印它们的数量。

所以我对此有点迷茫。我完全无法生成任何代码，但我认为我应该从动态编程的角度来处理这个问题。我只是要求一些提示。有人有想法吗？提前致谢。

输入的最大数字为100。另外，程序的运行时间不能超过1秒，内存限制为128 MB。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T15:23:53.937

要解决这个问题，您需要结合三个想法：

假设给定的数字是 n：

*   找到所有小于 n 的素数，如此[处所示](http://www.geekviewpoint.com/java/numbers/all_prime)。

*   从您的素数数组和 n 动态计算子集总和。[这里](http://www.geekviewpoint.com/java/dynamic_programming/subset_sum_coins_change)和[这里](http://www.geekviewpoint.com/java/dynamic_programming/positive_subset_sum)有一些提示

*   然后，计算从第二步得到的每个答案的不同排列的数量，如下[所示](http://www.geekviewpoint.com/java/numbers/permutation)。

当然，这只是一个提示。但它应该对您编写最终代码有很大帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T12:56:44.697

您可能想查看[Wikipedia](https://en.wikipedia.org/wiki/Partition_(number_theory))上的分区数学，特别是在页面中间的生成函数和受限分区生成函数部分。它提到了由特定加数（由自然数集 T 指定）组成的分区的生成函数。

令数 n 的非顺序依赖素数分区的数量为 R(n)。您可以通过对 x 取第 n 个偏导数并设置 x = 0 从生成函数导出 R(n)。这可能并不容易。

一个警告：这些分区不依赖于顺序（即 1 + 2 和 2 + 1 仅计为一个分区）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T12:18:27.133

因此，以提示而不是答案的形式：

*   正如其他地方所说，您可以预先计算素数。
*   您可以重复使用较小数字的结果吗？那么，假设您知道 5 的实际排列，这是否有助于您找到 7 的任何实际排列？
*   结果是否有任何结构，如果有，您可以使用该结构来避免重复计算吗？例如，您列出了数字 7 的 5 个排列，但它们彼此之间表现出一些相似性 - 这是一个普遍趋势，它是什么？
*   假设您找到了内部结构*并且*可以使用较小的结果来帮助找到较大的结果，您可以两者都做吗 - 您可以完全避免存储完整的中间结果吗？
*   最后，您需要列出每个有序组合还是只返回有序组合的*数量*？您可以在此处节省计算。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T12:01:09.180

不幸的是，您不能在这里过多地提高蛮力。您绝对应该做的一件事是使用[Eratosthenes 筛子](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)预先计算所有素数，直到给定数字。之后，给定一个数字 N 递归打印其所有分区，其中最小的素数是连续素数列表中的每个素数（记住让它是最小的，这样你就不会重复分区）。

编辑：知道你只需要知道分区的数量后：最好的解决方案是使用动态编程。同样，您需要在一个数组中记忆一个二维`mem[MAX_SIZE][MAX_SIZE]`第一个索引是您正在计算解决方案的数字，第二个索引是您应该用于分区的最小素数的索引。

# c# - 为 DataSet 调用 ReadXml 时出现 XML 解析错误

> ID：14398433
> 
> 赞同：0
> 
> 时间：2013-01-18T11:55:38.550
> 
> 标签：c#, xml, dataset

编码

```
XmlTextReader reader = new XmlTextReader("http://www.meloy.kommune.no/no/Abonner-pa-nyheter/Nyheter-Meloy-Kommune/");
DataSet ds = new DataSet();
ds.ReadXml(reader); 
```

`ds.ReadXml`调用时导致此错误：

> System.Net.WebException：远程服务器返回错误：（500）内部服务器错误。在 System.Net.HttpWebRequest.GetResponse() 在 System.Xml.XmlDownloadManager.GetNonFileStream(Uri uri, ICredentials 凭据, IWebProxy 代理, RequestCachePolicy cachePolicy) 在 System.Xml.XmlUrlResolver.GetEntity(Uri absoluteUri, String role, Type ofObjectToReturn) 在System.Xml.XmlTextReaderImpl.OpenUrlDelegate(Object xmlResolver) 在 System.Threading.CompressedStack.runTryCode(Object userData) 在 System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup(TryCode 代码, CleanupCode backoutCode, Object userData) 在 System.Threading.CompressedStack。在 System.Xml.XmlTextReaderImpl 处运行（CompressedStack 压缩堆栈，ContextCallback 回调，对象状态）。

错误的原因是什么，我该如何解决？

编辑：这有效：

```
WebClient wc = new WebClient();
Stream st = wc.OpenRead("d:\\episerver\\test.xml");

        string rss ="";
        using (StreamReader sr = new StreamReader(st)) {
           rss = sr.ReadToEnd();
        }

         XmlReader reader = XmlReader.Create(new StringReader(rss));
        DataSet ds = new DataSet();
        ds.ReadXml(reader); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T12:59:33.377

我认为这与 C# Web 请求创建的标头有关。该线程似乎处理相同的问题：

[如何在不提供凭据的情况下将安全的 rss 提要读入 SyndicationFeed？](https://stackoverflow.com/questions/2813989/how-do-i-read-a-secure-rss-feed-into-a-syndicationfeed-without-providing-credent)

# google-app-engine - 可以下载 GAE Python 文档以供离线阅读吗？

> ID：14398441
> 
> 赞同：3
> 
> 时间：2013-01-18T11:55:58.840
> 
> 标签：google-app-engine

IIRC GAE[下载页面](https://developers.google.com/appengine/downloads)曾经有一个单独的文档链接，但我现在没有看到。是否可以下载 Python 文档以获得更快的本地访问？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-27T06:43:35.887

我使用此命令下载了完整的 AppEngine 文档

```
wget  --recursive  --no-clobber  --page-requisites --html-extension  --convert-links  --restrict-file-names=windows --no-parent      https://developers.google.com/appengine/ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-28T14:50:57.367

[正如 Jan Killian在这里](https://groups.google.com/d/msg/google-appengine/mj_VA3UCkD8/UnhmEC-tDnEJ)指出的那样，有一个[开放的问题](https://code.google.com/p/googleappengine/issues/detail?id=8654)可以让离线文档可下载和更新，您可以像我一样为它加注星标，以帮助推动其优先级。

同时，我在那篇使用 httrack 镜像站点的帖子中使用了 Jan 的方法。所以如果我在目录'/home/yuvlio/app/docs'中运行它

```
$ httrack -N100 -%k https://developers.google.com/appengine/docs/python/ 
```

它将通过浏览器在文件 url 上提供文档`file:///home/yuvilio/apps/docs/appengine/docs/python/index.html`

为了更好地设置样式表，我决定让本地 Web 服务器上的虚拟主机指向根目录`/home/yuvilio/apps/docs/appengine/docs/python`（也就是说，我在本地 Apache 服务器上创建了一个简单的虚拟主机，并将其指向 DocumentRoot 的目录。然后，我在文件上运行了一个简单的搜索和替换脚本，以将所有内容更改`https://developers.google.com`为我的虚拟主机的 ServerName（我称之为`http://developers.google.dev`）并以这种方式获得样式。然后我可以浏览`http://developers.google.dev/index.html`我最终切换到 .

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T22:47:26.150

我没有检查这是否与谷歌在应用引擎网页上提供的文档完全相同，但应用引擎 svn 的文档目录至少看起来像通过浏览源代码的网页：

```
http://code.google.com/p/googleappengine/source/browse/trunk/docs/ 
```

您可以使用 svn 客户端查看此内容。

# jquery - 使用 display:block 选择元素

> ID：14398444
> 
> 赞同：4
> 
> 时间：2013-01-18T11:56:06.750
> 
> 标签：jquery, jquery-selectors

这是 html 内容，我想从中选择报告中具有使用 jQuery 的显示块的所有元素 `$("#report:visible")`对我不起作用。

```
<div id="report">
        <div id="p1" style="display: block;">
            <input id="pname1"  type="checkbox" name="report1">
            <input id="pname2"  type="checkbox" name="report2">
        </div>
        <div id="p2"  style="display: none;">
            <input id="pname1"  type="checkbox" name="report1">
            <input id="pname2"  type="checkbox" name="report2">
        </div>
        <div id="p3"  style="display: none;">
            <input id="pname1"  type="checkbox" name="report1">
            <input id="pname2"  type="checkbox" name="report2">
        </div>
            <div id="p4"  style="display: block;">
            <input id="pname3"  type="checkbox" name="report1">
            <input id="pname4"  type="checkbox" name="report2">
        </div>
</div> 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-18T12:10:30.703

也许你可以使用这段 jQuery ：

```
$("#report div:visible").each(function() { 
    console.log($(this).attr('id')); 
}); 
```

还是这个:)？

```
$("#report div:visible"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-18T11:59:04.727

```
$("#report > :visible") 
```

这将选择`#report`可见的直接子代。如果没有空间，您将自行选择`#report`它是否可见。（如果没有它，`>`它也会以输入为目标。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-18T12:02:01.347

这可以帮助您使用几个选择器[CSS Selectors](http://net.tutsplus.com/tutorials/html-css-techniques/the-30-css-selectors-you-must-memorize/)。

至于您的要求，您可以使用`div`它`display:block`在`#report`.

```
$('#report div[style*=display:block]') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T11:58:24.447

你可以使用：

```
$("[style='display: block;']"); 
```

但我不会，我也会添加一个类来挂钩。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-18T11:59:46.827

您不能使用属性值本身直接选择 CSS 中的元素。但是，您可以按类别选择。最好的解决方案是使用一个类来分配`display: block`（例如一个`visible`类），然后根据它的存在与否进行选择。

`style`另一种方法是使用元素的整个值进行选择。但是这样做的问题是，如果您添加其他内联样式，则选择器将不再起作用。然后，您可以进入正则表达式解析样式属性，但在我看来，应用`visible`or`hidden`类要容易得多，并且性能会好得多。

请注意，使用`visible`or`hidden`类的另一个优点是您可以使用 JavaScript 非常轻松地打开和关闭它：

```
document.getElementById("id").classList.toggle("hidden"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-18T12:10:50.810

为什么不只是

```
$('#report div:visible'); 
```

如果标记保持这样，它将起作用。如果不只是向报告条目中添加一个类，例如“条目”，那么请执行

```
$('#report .entry:visible'); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-01-24T10:03:51.970

这应该有效：

```
$("#report *").filter(function(){
    $(this).css("display") === "block";
}); 
```

* 选择#report 中的所有元素。然后，您将它们过滤到 CSS 属性设置为阻止的那些。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-04-24T09:46:07.733

使用`:visible`代替，`[style*="display:block"]`因为它适用于包括 IE 在内的所有浏览器。`[style*="display:block"]`在 IE 中不起作用。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-10-27T17:06:50.237

我喜欢[jjj](https://stackoverflow.com/users/502381/jjj)的答案，即`:visible`在选择器中使用。但是，如果你真的需要使用 style 属性，我会使用下面的选择器

```
$("[style*='display: block'], [style*='display:block']") 
```

请注意

1.  我使用了包含运算符 (*=)，以防其他样式也存在。
2.  我省略了结尾的分号`;`，以防在没有它的情况下编写样式属性。
3.  最后，我使用了两个选择器，用逗号分隔，`,`区别在于冒号后面的空格`:`。

话虽如此，如果您知道`style`属性中写入的确切样式语法，对于有`property`问题的（在这种情况下是`display`），您可以简单地将其与 contains`*=`甚至完全匹配一起使用`=`。

有关更多信息，请访问[W3School CSS 属性选择器](https://www.w3schools.com/css/css_attribute_selectors.asp)

# c++ - boost::spirit::qi 性能

> ID：14398445
> 
> 赞同：3
> 
> 时间：2013-01-18T11:56:20.573
> 
> 标签：c++, boost, boost-spirit, boost-spirit-qi

我有以下片段。

```
#include <iostream>
#include <sstream>
#include <chrono>

#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/classic.hpp>

namespace qi = boost::spirit::qi;
namespace classic = boost::spirit::classic;

template<typename T>
void output_time(const T& end, const T& begin)
{
   std::cout << std::chrono::duration_cast<std::chrono::seconds>(
         end - begin).count() << std::endl;
}

template<typename Iter>
struct qi_grammar : public qi::grammar<Iter>
{
   qi_grammar():qi_grammar::base_type(rule_)
   {
      rule_ = *string_;
      string_ = qi::char_('"') >> *(qi::char_ - '"') >> qi::char_('"');
   }
   qi::rule<Iter> rule_;
   qi::rule<Iter> string_;
};

template<typename Iter>
struct classic_grammar : public classic::grammar<classic_grammar<Iter>>
{
   template<typename ScannerT>
   struct definition
   {
      definition(const classic_grammar&)
      {
         rule = *string_;
         string_ = classic::ch_p('"') >> *(classic::anychar_p - '"') >> classic::ch_p('"');
      }
      classic::rule<ScannerT> rule, string_;
      const classic::rule<ScannerT>& start() const { return rule; }
   };
};

template<typename Iter>
void parse(Iter first, Iter last, const qi_grammar<Iter>& prs)
{
   auto start = std::chrono::system_clock::now();
   for (int i = 0; i < 100; ++i)
   {
      Iter next = first;
      if (!qi::parse(next, last, prs) || next != last)
      {
         assert(false);
      }
   }
   auto finish = std::chrono::system_clock::now();
   output_time(finish, start);
}

template<typename Iter>
void parse_c(Iter first, Iter last, const classic_grammar<Iter>& prs)
{
   auto start = std::chrono::system_clock::now();
   for (int i = 0; i < 100; ++i)
   {
      auto info = classic::parse(first, last, prs);
      if (!info.hit) assert(false);
   }
   auto finish = std::chrono::system_clock::now();
   output_time(finish, start);
}

int main()
{
   qi_grammar<std::string::const_iterator> qi_lexeme;
   classic_grammar<std::string::const_iterator> classic_lexeme;
   std::stringstream ss;
   for (int i = 0; i < 1024 * 500; ++i)
   {
      ss << "\"name\"";
   }
   const std::string s = ss.str();
   std::cout << "Size: " << s.size() << std::endl;
   std::cout << "Qi" << std::endl;
   parse(s.begin(), s.end(), qi_lexeme);
   std::cout << "Classic" << std::endl;
   parse_c(s.begin(), s.end(), classic_lexeme);
} 
```

结果是

```
forever@pterois:~/My_pro1/cpp_pro$ ./simple_j 
Size: 3072000
Qi
0
Classic
1 
```

所以，qi 解析比经典快。但是当我将 string_ 规则的属性更改为 std::string() （即`qi::rule<Iter, std::string()> string_;`）时，我有

```
forever@pterois:~/My_pro1/cpp_pro$ ./simple_j 
Size: 3072000
Qi
19
Classic
1 
```

它非常非常慢。我做错了什么？谢谢。

编译器：gcc 4.6.3。提升 - 1.48.0。标志：-std=c++0x -O2。在 LWS 上的结果是相同的。

char_ ie 语义动作的使用

```
string_ = qi::char_('"') >> *(qi::char_[boost::bind(&some_f, _1)] - '"')
 >> qi::char_('"')[boost::bind(&some_clear_f, _1)]; 
```

提高性能，但我也在寻找另一种解决方案，如果它存在的话。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T16:15:01.730

我想我之前在 SO 上回答了一个非常相似的问题。可悲的是，我找不到它。

简而言之，您可能更喜欢在源数据中使用迭代器，而不是在每次匹配时分配（和复制）字符串。

使用时

```
qi::rule<Iter, boost::iterator_range<Iter>()> string_;
string_ = qi::raw [ qi::char_('"') >> *(qi::char_ - '"') >> qi::char_('"') ]; 
```

我得到了（具有相当大（16 倍）的数据集）：

```
Size: 49152000
Qi
12
Classic
11 
```

实际上，在将规则本身更改为

```
 string_ = qi::raw [ qi::lit('"') >> *~qi::char_('"') >> '"' ]; 
```

我有

```
Size: 49152000
Qi
7
Classic
11 
```

所以……我想这很不错。在 LWS 上查看：http: [//liveworkspace.org/code/opA5s$0](http://liveworkspace.org/code/opA5s%240)

> 为了完整起见，显然您可以通过执行类似的操作从 iterator_range 获取字符串
> 
> > ```
> > const std::string dummy("hello world");
> > auto r = boost::make_iterator_range(begin(dummy), end(dummy));
> > std::string asstring(r.begin(), r.end()); 
> > ```

诀窍是将实际的字符串构造延迟到*需要的时候*。您可能希望让这个技巧*自动*发生。这就是`Spirit Lex`令牌属性的作用。你可能想调查一下。

# asp.net - 向类添加异常属性？

> ID：14398449
> 
> 赞同：0
> 
> 时间：2013-01-18T11:56:28.263
> 
> 标签：asp.net, .net, vb.net

我在 .net 网站中使用 vb.net 和 .net 2

是否可以在类后面的代码中添加一个（我认为它称为异常属性），这样如果类中发生任何异常但只发生在该类中，那么我可以退出该类中的任何函数并对异常执行某些操作

这是可能的还是你有其他想法？

我想要做的是，如果发生任何异常，则立即停止并返回异常。

谢谢你的建议。

```
<add exception attribute>
Partial Class _Default
    Inherits System.Web.UI.Page

    Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

        Dim result As String = "all fine"

        doOne()

        If Exception Then

            result = Exception.Message

        End If

        Return result

    End Sub

    Private Sub doOne()

        doTwo()
        Throw New ApplicationException("Exception Occured")
    End Sub

    Private Sub doTwo()

        Throw New ApplicationException("Exception Occured")
    End Sub

    Private Sub doThree()
        doOne()
        Throw New ApplicationException("Exception Occured")
    End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T11:58:55.017

我建议看一下并使用[ELMAH](http://code.google.com/p/elmah/)：

> ELMAH（错误记录模块和处理程序）是一个完全可插拔的应用程序范围的错误记录工具。它可以动态添加到正在运行的 ASP.NET Web 应用程序，甚至是一台机器上的所有 ASP.NET Web 应用程序，无需重新编译或重新部署。

# java - 将列表作为批处理文件中的参数传递

> ID：14398466
> 
> 赞同：1
> 
> 时间：2013-01-18T11:57:14.547
> 
> 标签：java, batch-file

我想将字符串列表作为参数传递到批处理文件中，但它不起作用。谁能给我解决方案。我的代码是这样的：

```
Process pr = rt.exec(new String[] { "cmd", "/c", "D:/test.bat " + s1.get(i)}); 
```

但是当我直接触发命令而不使用批处理文件时，它可以工作。

```
Process pr = rt.exec(new String[] { "cmd", "/c", 
     "java -jar D:/clientApplication.jar " + s1.get(i)}); 
```

首选java中的示例示例。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T11:59:03.850

```
new String[] { "cmd", "/c", "D:/test.bat ", s1.get(i)} 
```

# java - 在 Servlet 中检索单选按钮

> ID：14398468
> 
> 赞同：0
> 
> 时间：2013-01-18T11:57:21.743
> 
> 标签：java, servlets, null

我正在使用`Servlet`. `request.getParameter()`即使选中了单选按钮，也总是返回空值。任何人都可以帮忙吗？

这是我的`index.jsp`页面

```
<html>
<body>
<form action="FileLoader" method="post" enctype="multipart/form-data">
<p>
<label>
<input type="radio" name="se" value="pre-signing" checked = "checked">
Pre-signing </label>
<br>
<label>
<input type="radio" name="se" value="post-signing">
Post-signing </label>
</p>
</body>
</html> 
```

这是我的 servlet 页面

```
public void doPost(HttpServletRequest request,HttpServletResponse response)throws  ServletException, java.io.IOException {
String radioButton= request.getParameter("se");
System.out.println("radioButton ::"+radioButton);} 
```

即使选中了单选按钮，它也会返回一个空值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T12:06:43.547

因为您的编码类型是多部分的..您的 http 请求将不包含您需要的信息。

它将在[MultiPartRequest](http://www.servlets.com/cos/javadoc/com/oreilly/servlet/MultipartRequest.html)中可用.. 看到[这个问题](https://stackoverflow.com/questions/1748259/get-form-parameters-from-multipart-request-without-getting-the-files).. 它会有所帮助

# java - 密钥库密码被篡改

> ID：14398476
> 
> 赞同：3
> 
> 时间：2013-01-18T11:57:55.817
> 
> 标签：java, android, sdk, passwords, keystore

我已经将我的 android-app 上传到 Google Play 有一段时间了。直到昨晚它一直在完美地工作。

当我尝试导出我的 android 项目时，我在输入密钥库的密码时遇到错误。

早些时候，我的 debug.keystore-file 位置默认设置为我的 .android 文件夹。但是现在我必须专门选择它。无论如何，当我输入我的密码时（我已经使用了八个早期版本，因此我 100% 肯定是正确的）我收到以下错误消息：

> “密钥库被篡改，或密码不正确”

我怎样才能解决这个问题？

我知道自上次成功发布以来我所做的唯一更改是我已将 Android SDK 从 1.6 版更新到 1.7 版。这会对我的 debug.keystore 及其密码的有效性产生任何影响吗？

我通常通过谷歌搜索找到我的答案，但在这种情况下，经过几个小时的搜索，我仍然找不到解决方案。请帮我。我真的很想尽快发布我的新版本:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:27:26.370

你为什么提到`debug.keystore-file`？您是否使用调试密钥签署了您的版本？调试密钥过期时会重新创建。所以也许这就是发生的事情。正如[SDK 文档](http://developer.android.com/tools/publishing/app-signing.html)所说，在上传到 Google Play 之前，您必须使用发布密钥签署您的 apk。

# ruby-on-rails - 使用 rails app 替换 settings.yml 中键的值

> ID：14398478
> 
> 赞同：0
> 
> 时间：2013-01-18T11:58:03.897
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我在 Rails 应用程序 /my_app/config/settings.yml 中有一个密钥

年龄：25

我想将年龄值从 25 替换为用户使用 ruby​​ 代码输入的任何值。我该怎么做。在写入值之前是否需要先加载文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T12:30:27.087

以写入模式打开文件

从您的文件中读取并解析 yml 内容。

替换值

将 yml 值写入原始文件或新文件。

完毕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T13:53:04.670

Rails 为静态内容提供国际化支持，`has_translations`补充并为动态内容提供国际化支持。

宝石可以从[这里](https://github.com/nmindia/has_translations)找到。

# android - 如何更改 ListPreference 对话框的外观

> ID：14398483
> 
> 赞同：6
> 
> 时间：2013-01-18T11:58:28.827
> 
> 标签：android, dialog, listpreference

我想更改对话框`RadioButton`上出现`ListPreference`的复选标记或不同的东西，或者没有，有没有简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-12-11T18:29:54.847

如果你想改变整个对话框，也许要使用像这个[材料对话框](https://github.com/afollestad/material-dialogs)包这样的替换对话框库，你可以使用这个替换`ListPreference`：

```
import com.afollestad.materialdialogs.MaterialDialog;

public class MaterialListPreference extends ListPreference {
  private MaterialDialog.Builder mBuilder;
  private Context context;

  public MaterialListPreference(Context context) {
    super(context);
    this.context = context;
  }

  public MaterialListPreference(Context context, AttributeSet attrs) {
    super(context, attrs);
    this.context = context;
  }

  @Override
  protected void showDialog(Bundle state) {
    mBuilder = new MaterialDialog.Builder(context);
    mBuilder.title(getTitle());
    mBuilder.icon(getDialogIcon());
    mBuilder.positiveText(null);
    mBuilder.negativeText(getNegativeButtonText());
    mBuilder.items(getEntries());
    mBuilder.itemsCallback(new MaterialDialog.ListCallback() {
      @Override
      public void onSelection(MaterialDialog dialog, View itemView, int which, CharSequence text) {
        onClick(null, DialogInterface.BUTTON_POSITIVE);
        dialog.dismiss();

        if (which >= 0 && getEntryValues() != null) {
          String value = getEntryValues()[which].toString();
          if (callChangeListener(value))
            setValue(value);
        }
      }
    });

    final View contentView = onCreateDialogView();
    if (contentView != null) {
      onBindDialogView(contentView);
      mBuilder.customView(contentView);
    }
    else
      mBuilder.content(getDialogMessage());

    mBuilder.show();
  }

} 
```

它没有做太多，只是覆盖对话框显示和选择回调部分的最低限度。如果您选择不同的对话框库但不是太多，YMMV 会非常轻微，它们往往或多或少直接替代`AlertDialog`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-08-04T16:02:36.803

在分析了`ListPreference`AndroidX 中的源代码后，我得出的结论是，最简单的方法是编写一个`Preference`继承自`ListPreference`但生成它自己的`AlertDialog`，您可以按照您想要的任何方式自定义：

```
import android.app.AlertDialog
import android.content.Context
import android.util.AttributeSet
import androidx.preference.ListPreference
import com.my.app.R

class MyListPreference : ListPreference {

    constructor(context: Context?, attrs: AttributeSet?, defStyleAttr: Int, defStyleRes: Int) : super(
        context,
        attrs,
        defStyleAttr
    )

    constructor(context: Context?, attrs: AttributeSet?, defStyleAttr: Int) : super(context, attrs, defStyleAttr)

    constructor(context: Context?, attrs: AttributeSet?) : super(context, attrs)

    constructor(context: Context?) : super(context)

    override fun onClick() {

        AlertDialog.Builder(context).setSingleChoiceItems(R.array.app_language, getValueIndex())
        { dialog, index->
            if(callChangeListener(entryValues[index].toString())){
                setValueIndex(index)
            }
            dialog.dismiss()
        }
            .setNegativeButton(R.string.cancel) { dialog, _  -> dialog.dismiss() }
            .show()
    }

    private fun getValueIndex() = context.resources.getStringArray(R.array.app_language).indexOf(value)
} 
```

这样您就可以使用自己的样式、标题、图标以及您可以在`AlertDialog`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-18T12:51:53.097

试试下面的链接希望它可以帮助你

[http://developer.android.com/guide/topics/ui/settings.html](http://developer.android.com/guide/topics/ui/settings.html)

[例子](https://stackoverflow.com/questions/4549746/custom-row-in-a-listpreference)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-30T11:09:11.693

如果你想要java代码。尝试以下代码。

```
public class SearchEngineListPreference extends ListPreference {
    private Context mContext;
    public SearchEngineListPreference(Context context) {
        super(context);
        mContext = context;
    }

    public SearchEngineListPreference(Context context, AttributeSet attrs) {
        super(context, attrs);
        mContext = context;
    }

    @SuppressWarnings("New API")
    public SearchEngineListPreference(Context context, AttributeSet attrs, int defStyleAttr) {
        super(context, attrs, defStyleAttr);
        mContext = context;
    }

    @SuppressWarnings("New API")
    public SearchEngineListPreference(Context context, AttributeSet attrs, int defStyleAttr, int defStyleRes) {
        super(context, attrs, defStyleAttr, defStyleRes);
        mContext = context;
    }

    @Override
    protected void onClick() {
        AlertDialog.Builder ab = new AlertDialog.Builder(mContext);
        ab.setCancelable(true);
        ab.setTitle(getTitle());
        String value = getValue();
        ab.setSingleChoiceItems(R.array.setting_entries_search_engine,
                findIndexOfValue(value),
                (dialog, index) -> {
                    CharSequence[] entryValues = getEntryValues();
                    if (callChangeListener(entryValues[index].toString())){
                        setValueIndex(index);
                    }
                    dialog.dismiss();
                }).setNeutralButton(mContext.getString(R.string.dialog_button_custom),
                (dialog, whichButton) -> {
                    dialog.dismiss();
                    showEditDialog();
                }).setNegativeButton(mContext.getString(R.string.dialog_button_negative),
                (dialog, whichButton) -> {
                    dialog.dismiss();
                });
        ab.show();
    }

    private void showEditDialog() {
      .......
    } 
```

# php - PHP 分叉和内存共享让我抓狂

> ID：14398488
> 
> 赞同：0
> 
> 时间：2013-01-18T11:58:41.283
> 
> 标签：php, fork, pcntl

我花了几个小时和几天来找到为什么要`php`在我的分叉子代之间共享内存，我认为如果父代在分叉之前在函数中设置了一个 var，那么该函数将始终在子代中返回相同的结果:~

```
new mytest;
class mytest{
    var $t = 'Parent';
    public function __construct(){              
        //$this->runChildProcess($i);       

        $pidsCount = 0;
        for($i = 0; $i < 5; $i++) { 
            $pids[$pidsCount] = pcntl_fork();
            if($pids[$pidsCount]) {
                $this->t = 'Parent';
                // i am the parent
                $pidsCount++;
            }
            else {
                $this->t = 'Enfant';
                // i am the child
                $this->runChildProcess($i);
                exit();
            }
        }
        for($i = 0; $i < $pidsCount; $i++) {
            pcntl_waitpid($pids[$i], $status, WUNTRACED);
        }
    }

    function runChildProcess($i) {
        $a = rand(0,100)."\n";
        echo $this->t.' : '.$a;
    }   
} 
```

如果您运行此示例，它会很好，孩子们将输出不同的数字。但是，如果您取消注释第一个**`$this->runChildProcess($i);`**，那么您会看到所有孩子都将返回相同的结果（第一个由孩子计算的结果）

我不知道如何处理:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T12:02:21.737

我认为这与内存共享无关。您只是看到`rand`.

注释掉该行后，每个孩子`rand`都会第一次呼叫，因此每个孩子都会独立播种。

如果该行未注释，则在任何孩子分叉*之前*`rand`播种。所以他们都看到了同一个种子。

# delphi - ADO 连接一还是四？

> ID：14398491
> 
> 赞同：0
> 
> 时间：2013-01-18T11:58:52.303
> 
> 标签：delphi, ms-access, delphi-xe2, ado

我正在尝试连接到 mdb（访问 2000） 我的应用程序有 1 个主屏幕和 4 个按钮。每个按钮都会打开一个新表单。

我需要在所有 4 个子表单上访问此数据库，我必须为每个表单添加 ADOConnection 吗？我可以在主窗体上建立连接吗？或者有没有更好的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T12:32:16.827

您只需要一个可以在所有表​​单中使用的 ADOConnection。共享该连接的最简单方法是创建一个数据模块，将 ADOConnection 放在其上，然后从所有表单中使用该数据模块及其连接。确保在表单创建之前创建数据模块。

您还可以将查询和表格组件放在一个或多个数据模块上。我发现它有助于促进 UI 和数据访问之间的分离，但这完全取决于你。

多个连接的唯一原因是当您从多个线程访问数据库时。在这种情况下，您访问数据库的每个线程都需要一个连接。您正在从主线程执行所有操作，因此只需要一个连接。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-18T12:36:01.923

将 TADOConnection 放在一个数据模块上，并以所有形式使用数据模块来共享连接。

打开你的项目：

文件 -> 新建 -> 其他 Delphi 项目 -> Delphi 文件数据模块

然后：

项目 -> 选项表单将数据模块移动到自动创建表单的顶部

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T12:13:04.707

您必须为应用程序使用唯一`TADOCOnnection`的（服务于所有表单）。每个表单都可以使用`TADOQuery`, `TADOTable`,... 与主连接。

没有理由使用 4 个连接 ( `TADOConnection`)。

# javascript - 为什么 val() 返回未定义？

> ID：14398500
> 
> 赞同：1
> 
> 时间：2013-01-18T11:59:11.883
> 
> 标签：javascript, jquery

单击按钮时，我尝试获取下一个隐藏输入字段的值，但我的脚本始终返回“未定义”。我在做什么错，为什么 val() 返回未定义？如果仅尝试使用 next('input:hidden') 选择元素，则该函数将返回一个对象。

```
 <div class="row-fluid">
            <div class="span12">
                <div class="message-ratebox">
                    <ul class="unstyled inline">
                        <li>
                            <button class="rating-button" id="rating-first" value="1">
                                Er will dich
                            </button>1
                        </li>
                        <li>
                            <button class="rating-button" id="rating-second" value="2">
                                Er will dich nicht
                            </button>5
                        </li>
                        <li>
                            <button class="rating-button" id="rating-third" value="3">
                                Es ist alles offen
                            </button>2
                        </li>
                    </ul>
                    <input type="hidden" name="target_message_id" value="1" />
                </div>
            </div>
        </div>
        <div class="row-fluid">
            <div class="span12">
                <div class="message-ratebox">
                    <ul class="unstyled inline">
                        <li>
                            <button class="rating-button" id="rating-first" value="1">
                                Er will dich
                            </button>1
                        </li>
                        <li>
                            <button class="rating-button" id="rating-second" value="2">
                                Er will dich nicht
                            </button>5
                        </li>
                        <li>
                            <button class="rating-button" id="rating-third" value="3">
                                Es ist alles offen
                            </button>2
                        </li>
                    </ul>
                    <input type="hidden" name="target_message_id" value="2" />
                </div>
            </div>
        </div> 
```

*JavaScript：*

```
$(document).ready(function() {
    $('button.rating-button').click(function(event) {
        event.preventDefault();
        var $rating = $(this).attr('value');
        var $messageId = $(this).next('input:hidden').val();

        alert('test'+$messageId);
    });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T12:00:41.453

这是因为没有`next`元素 for `<button>`。您必须向上爬 DOM 树，直到`<div>`找到隐藏元素：

```
var $messageId = $(this).closest(".message-ratebox").find("input:hidden").val(); 
```

或向上直到`<ul>`并选择`next`元素：

```
var $messageId = $(this).closest("ul").next("input:hidden").val(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T12:12:06.813

```
 $('button.rating-button').click(function(event) {
            event.preventDefault();
            var $rating = $(this).val();
            var $messageId = $(this).parent().parent().parent().find('input').val();
            alert($rating + $messageId );

           }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T12:17:22.083

您需要从按钮向上解析到输入的容器，在这种情况下是最近的 div，然后向下解析到​​隐藏的输入...

```
$('button.rating-button').click(function(event) {
    event.preventDefault();
    var $rating = $(this).val();
    var $messageId = $(this).closest("div").find('input[type=hidden]').val();
    alert($rating + $messageId);
}); 
```

# ruby-on-rails - 在rails中发布一个数组

> ID：14398503
> 
> 赞同：0
> 
> 时间：2013-01-18T11:59:30.013
> 
> 标签：ruby-on-rails, ruby, post

这个解释起来很长，但基本上我的控制器是构建的，并且需要一个数组 `params[:order_items]`，所以我尝试过这样的：

```
<%= hidden_field_tag "order_items", @order[:order_items_ids] %> 
```

但我得到了连接的ID

```
<input id="gig_items" name="gig_items" type="hidden" value="2300124946"> 
```

那么，如何`params`仅使用 html（不使用 js）在其中一个键中发送和排列？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T12:06:08.680

您可以将其发布在由 ',' 连接的字符串中，例如：

```
<%= hidden_field_tag "order_items", @order[:order_items_ids].join(",") %> 
```

然后将其拆分到您的控制器中。但是如果你真的想要它在一个数组中。你也可以这样做：

```
<%@order[:order_items_ids].each do |oid|%>
    <%= hidden_field_tag "order_items[]", oid %>
<%end%> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T12:07:15.127

我会这样做，但 html 可能有更好的解决方案：

```
<% @order.order_items_ids.each do |o| %>
     <input id="order_items" name="order_items[]" type="hidden" value="<%= o %>" />
<% end %> 
```

编辑：只是说，对于订购物品，如果我是你，我会把它放在会话中。

# c# - ObjectDeletedException: 为什么 NHibernate 不能自动中断关联？

> ID：14398509
> 
> 赞同：1
> 
> 时间：2013-01-18T11:59:45.530
> 
> 标签：c#, nhibernate, fluent-nhibernate, fluent-nhibernate-mapping

我有一个一对一的映射，我试图用 Fluent NHibernate 映射来表达它。我知道网上有很多类似的问题/答案，但几个小时后，我很难找到具体问题的答案。

我有一个`Member`和`Subscription`对象。一个成员可以有 0..1 个订阅，一个订阅实例只能属于一个成员。

这是我的课程：

```
public class Member
{
    public Subscription Subscription { get; set; }
}

public class Subscription
{
    public Member Member { get; set; }

    public DateTime StartDate { get; set; }

    public DateTime FinishDate { get; set; }
} 
```

这是我的映射（流利）：

对于会员：

```
mapping.HasOne(member => member.Subscription)
    .PropertyRef(subscription => subscription.Member).Cascade.SaveOrUpdate(); 
```

对于订阅：

```
mapping.References(subscription => subscription.Member)
   .Unique().Cascade.None(); 
```

有一些要求，但我似乎无法满足所有要求：

*   即节省`Member`级联到`Subscription`.
*   删除 a`Subscription`会破坏 上的关联`Member`。
*   删除 a`Subscription`不会删除`Member`.

如果我将 Cascade 设置`Member`为`Subscription`已保存，但删除 a`Subscription`会引发`ObjectDeletedException`.

*`Subscription`为什么 NHibernate在应用级联之前不能自动删除关联到first `Member`？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T12:58:02.980

这里的基本问题是，这不是一对一关系，而是一对多，多方限制为 0 或 1。在一对一关系中，两个实体必须具有相同的主关键，这显然不是这里的情况。看到[这个问题](https://stackoverflow.com/questions/2208796/modeling-one-to-zero-or-one-relationships-z-cardinality)。

我会将其建模为

```
public class Member
{
    private ICollection<Subscription> _subscriptions;

    public Name() { _subscriptions = new HashSet<Subscription>(); }

    public Subscription Subscription
    {
        get { return _subscriptions.SingleOrDefault(); }
        set
        {
            _subscriptions.Clear(); // may want to check if it contains value first
            value.Member = this; // assuming bidirectional association
            _subscriptions.Add(value); // null check value first
        }
    }
}

mapping.HasMany<Subscription>(Reveal.Member<Member>("_subscriptions"))
    .KeyColumn("MemberId")
    .AsSet().Inverse().Cascade.AllDeleteOrphan(); 
```

另外，我认为您没有正确使用 property-ref ，但这可能是因为您不恰当地进行了一对一的映射。

# javascript - 如何使用java脚本检查.Net framework 4.5是否安装

> ID：14398519
> 
> 赞同：0
> 
> 时间：2013-01-18T12:00:31.890
> 
> 标签：javascript

我在某些按钮单击操作上打开工作流应用程序。因此，我想在打开 Workflow 应用程序之前检查是否使用 JavaScript 安装了 .Net framework 4.5，因为该应用程序需要 .NET framework 4.5。

如何使用 JavaScript 实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T12:03:19.507

这有时在用户代理的字符串中指定，因此可以从那里提取。

```
document.write(navigator.userAgent); 
```

但我不会说这是可靠的。例如，在众多浏览器上的测试表明这仅由我机器上的 IE 报告：

> [**Chrome** : *Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.79 Safari/537.4*]
> 
> [**火狐**：*Mozilla/5.0 (Windows NT 6.1; WOW64; rv:15.0) Gecko/20100101 Firefox/15.0.1*]
> 
> [**Internet Explorer**：*Mozilla/4.0（兼容；MSIE 8.0；Windows NT 6.1；WOW64；Trident/4.0；SLCC2；**.NET CLR 2.0.50727**；**.NET CLR 3.5.30729**； **.NET CLR 3.0.30729**；Media Center PC 6.0；**.NET4.0C**；**.NET4.0E** )*]

# php - 如何使用 Twig 在 Symfony2 中的标签内渲染输入

> ID：14398521
> 
> 赞同：1
> 
> 时间：2013-01-18T12:00:35.833
> 
> 标签：php, symfony, twig

我尝试为我的项目创建一个自定义表单主题，我想在其中呈现标签内的所有复选框字段，例如：

```
<label><input type="checkbox" /><label> 
```

我发现我必须为此更改 choice_widget_expanded 块：

```
{% block choice_widget_expanded %}
    {% spaceless %}
        <div {{ block('widget_container_attributes') }}>
        {% for child in form %}
            {{ form_widget(child) }}
            {{ form_label(child) }}
        {% endfor %}
        </div>
    {% endspaceless %}
{% endblock choice_widget_expanded %} 
```

问题是，当我将 form_label 块的内容复制到容器中而不是调用 form_label(child) 时，我并没有真正看到该块如何访问传递的变量（当我调用函数时它是子变量），以及如何在 form_label 块中调用 form_widget 函数：

```
{% block form_label %}
    <label>{{ form_widget(?? what to put here??) }}</label>
{% endblock form_label %} 
```

此外，如果我创建一个具有不同名称的块，例如“form_label_extra”并尝试调用它，它会引发错误，因为它不是注册的 twig 函数。

有谁知道这些变量是如何在表单块之间传递的，以及如何实现我的目标？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T19:50:01.590

我做了同样的修改下面的块

```
{% block checkbox_widget %}
{% spaceless %}
<label class="button i_clear"> 
    <input type="checkbox"
        {{ block('widget_attributes') }}
        {% if value is defined %} value="{{ value }}"{% endif %}
        {% if checked %} checked="checked"{% endif %} />
    <span>{{ label }}</span>
</label>
{% endspaceless %}
{% endblock checkbox_widget %} 
```

您仍然需要删除原始标签，您可以使用 javascript 对其进行修改，使用 css 将其隐藏或修改模板以使其有条件地呈现，无论是最适合您的。

这个问题也可能有帮助：[Symfony2 - 如何将复选框/收音机的标签和输入放在同一行？](https://stackoverflow.com/questions/11507217/symfony2-how-to-put-label-and-input-for-checkboxes-radios-in-a-same-line)

# ios - 如何在 UITextView 中显示 NSArray

> ID：14398522
> 
> 赞同：2
> 
> 时间：2013-01-18T12:00:39.410
> 
> 标签：ios, objective-c, nsarray, uitextview

我有一个我想在 uitextview 中拥有的数组。这就是它当前的显示方式。如何删除 ( ( ) ) 的？

这是一个屏幕截图

![在此处输入图像描述](../Images/682ed2b01d53b728a156d6e4c75e4f0d.png)

这是我的代码：

```
NSArray *arrayConditions = [[NSArray alloc] initWithObjects:[item objectForKey:@"conditions"], nil];

NSString * resultConditions = [arrayConditions description];

self.conditionsDeal.text = resultConditions;

NSLog(@"conditions are %@", [item objectForKey:@"conditions"]); 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T13:07:02.300

```
NSArray *arrayConditions = [[NSArray alloc] initWithObjects:[item objectForKey:@"conditions"], nil];

// change this line only for the concatenation
NSString * resultConditions = [arrayConditions componentsJoinedByString:@"\n"];

self.conditionsDeal.text = resultConditions;

// this line always provides you the result of the '-description' method of the 'NSArray'
NSLog(@"conditions are %@", [item objectForKey:@"conditions"]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T12:09:24.210

```
NSMutableString *textViewText = [NSMutableString string];

for (NSString *str in arrayConditions)
    [textViewText appendFormat:@"%@\n", str];
self.conditionsDeal.text = textViewText; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T12:20:01.200

1.  将该数组转换为 NSMutableString。
2.  用“，”或空格分隔该字符串并将其写入 UITextView。

# ruby-on-rails-3 - 如何在集合中列出从 20:00 到 24:00 的所有时间，并且只列出时间 > Time.now

> ID：14398525
> 
> 赞同：0
> 
> 时间：2013-01-18T12:00:44.443
> 
> 标签：ruby-on-rails-3, forms, time, simple-form

我试图用 20.00、20.10、20.20 ... 24:00 之类的时间填充集合。所以每隔10分钟。但是如何巧妙地做到这一点并考虑到 Time.now 呢？

仅应列出 > Time.now 的时间。所以如果它的 20.30 它不应该*显示*20.10, 20.20,20.30

**示例代码**

```
= f.input :order,   :collection => ["20:00","20:10","20:20"... etc ["24:00"],
                    :default => 2,
                    :label => "orders,
                    :hint => "Select the time you want this order to be processed" 
```

到目前为止我尝试过的一些事情：

```
:collection => [(Time.now + 10.minutes).strftime("%I:%M%p").to_s] 
```

和

```
#hours=(Time.now.minus_with_coercion(Time.now.midnight)/3600/2) 
```

***有什么想法如何干净地编码吗？***谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T12:54:17.660

不确定是否理解您的问题，但这可能会有所帮助：

```
Time.parse('20:00').to_datetime.step(Time.parse('23:59'), 10.minutes).to_a.map {|date| date.strftime("%I:%M%p")}
=> ["08:00PM", "08:10PM", "08:20PM", "08:30PM", "08:40PM", "08:50PM", "09:00PM", "09:10PM", "09:20PM", "09:30PM", "09:40PM", "09:50PM", "10:00PM", "10:10PM", "10:20PM", "10:30PM", "10:40PM", "10:50PM", "11:00PM", "11:10PM", "11:20PM", "11:30PM", "11:40PM", "11:50PM"] 
```

之后，您可以调用 delete_if 方法来删​​除不需要的时间。

类似的东西：

```
Time.parse('20:00').to_datetime.step(Time.parse('23:59'), 10.minutes).to_a.delete_if {|date| date < DateTime.now.to_time}.map {|date| date.strftime("%I:%M%p")} 
```

# jquery - 改变值类型

> ID：14398528
> 
> 赞同：0
> 
> 时间：2013-01-18T12:00:59.073
> 
> 标签：jquery

```
$.fn.findMaxHeight = function() {
    var wrapperHeight = $(this).height();
    var wrapperMaxHeight = $(this).css('max-height');

    if ( wrapperHeight == wrapperMaxHeight ) {
        alert("max-height reached");
    } else {
        alert("not yet");
    }
}
$('.subscription-wrapper').findMaxHeight();
$('.payment-wrapper').findMaxHeight(); 
```

...不起作用，因为`.css()`退货`300px`和`.height()`退货`300`所以它们无法比较。我如何解决它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T12:02:30.747

只需使用`parseInt`.

具体来说，

```
var wrapperMaxHeight = parseInt($(this).css('max-height'), 10); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T12:03:26.440

使用转换您的 CSS 高度`parseInt`

```
var wrapperMaxHeight = parseInt($(this).css('max-height')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T12:05:01.867

使用 parseFloat 而不是 parseInt。高度并不总是整数！半像素是可能的。

# javascript - video.js 结束事件

> ID：14398537
> 
> 赞同：1
> 
> 时间：2013-01-18T12:01:25.940
> 
> 标签：javascript, video.js

为什么这会引发此错误：

> 提供的元素或 ID 无效。（视频JS）

我知道这可能很明显，但有代码：

```
<script type="text/javascript">
 var videoPlayer = _V_("example_video_1", {}, function(){
this.addEvent("ended", function(){ 
   alert('Here I am');
  });
});        
</script> 
```

和通过 PHP 设置的视频 ID

```
<?PHP
  echo "<video id=\"example_video_1\" class=\"video-js vjs-default-skin\"  controls width=\"".$vid_h."\" height=\"".$vid_w."\" autoplay preload=\"auto\" data-setup='{}'>";
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T14:10:59.140

确保您的脚本位于它引用的视频元素之后。否则，您会得到“提供的元素或 ID 无效”，因为它在脚本执行时不存在。

例如

```
<!DOCTYPE html>
<html>
<head>
  <link href="http://vjs.zencdn.net/c/video-js.css" rel="stylesheet">
  <script src="http://vjs.zencdn.net/c/video.js"></script>
</head>
<body>
  <video id="example_video_1" class="video-js vjs-default-skin" controls preload="auto" width="360" height="202" autoplay data-setup="{}">
    <source src="http://example.com/video.mp4" type='video/mp4'>
  </video>
  <script type="text/javascript">
    var videoPlayer = _V_("example_video_1", {}, function(){
      this.addEvent("ended", function(){ 
        alert('Here I am');
      });
    });       
  </script>
</body>
</html> 
```

# c++ - 通过引用到常量将元素传递给 lambda

> ID：14398538
> 
> 赞同：5
> 
> 时间：2013-01-18T12:01:54.460
> 
> 标签：c++, c++11, template-meta-programming, lambda, decltype

在算法内部，我想创建一个通过引用到常量接受元素的 lambda：

```
template<typename Iterator>
void solve_world_hunger(Iterator it)
{
    auto lambda = [](const decltype(*it)& x){
        auto y = x;   // this should work
        x = x;        // this should fail
    };
} 
```

编译器不喜欢这段代码：

> 错误：»const«-qualifier 不能应用于 »int&«（手动翻译自德语）

然后我意识到这`decltype(*it)`已经是一个参考，当然那些不能做`const`。如果我删除`const`，代码会编译，但我想`x = x`失败。

让我们相信程序员（也就是我）一分钟，摆脱由于引用折叠规则而被丢弃的`const`和显式`&`，无论如何。但是等等，`decltype(*it)`实际上**保证**是一个参考，或者我应该添加显式`&`以确保安全？

如果我们不信任程序员，我可以考虑两种解决方案来解决问题：

```
(const typename std::remove_reference<decltype(*it)>::type& x)

(const typename std::iterator_traits<Iterator>::value_type& x) 
```

你可以自己决定哪个更丑。理想情况下，我想要一个不涉及任何模板元编程的解决方案，因为我的目标受众以前从未听说过。所以：

问题1：`decltype(*it)&`总是和 一样`decltype(*it)`？

问题 2：如何在没有模板元编程的情况下通过引用到常量来传递元素？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T12:20:50.337

问题 1：不，对 InputIterator 的要求仅仅`*it`是可转换为 T（“迭代器要求”中的表 72）。

`decltype(*it)`例如`const char&`，对于`value_type`is的迭代器，可能是这样`int`。或者它可能是`int`。或`double`。

using`iterator_traits`不等于 using `decltype`，决定​​你想要哪个。

同理，`auto value = *it;`不一定给你一个具有迭代器值类型的变量*。*

问题 2：可能取决于您所说的模板元编程是什么意思。

如果使用的特征类型是 TMP，那么没有 TMP 就无法指定“对迭代器的值类型的 const 引用”，因为这`iterator_traits`是访问任意迭代器的值类型的唯一方法。

如果你想 const-ify`decltype`那么这个怎么样？

```
template<typename Iterator>
void solve_world_hunger(Iterator it)
{
    const auto ret_type = *it;
    auto lambda = [](decltype(ret_type)& x){
        auto y = x;   // this should work
        x = x;        // this should fail
    };
} 
```

您可能必须捕获`ret_type`才能使用它的类型，我目前无法轻松检查。

不幸的是，它额外取消了迭代器的引用。您可能可以编写一些聪明的代码来避免这种情况，但聪明的代码最终会成为 .tmp 的替代版本`remove_reference`，因此 TMP.

# c# - 自定义 MembershipProvider 出现“操作或方法未实现”错误

> ID：14398541
> 
> 赞同：1
> 
> 时间：2013-01-18T12:02:03.820
> 
> 标签：c#, asp.net, asp.net-mvc

我在使用自定义会员提供程序时遇到问题。我的类实现了 的所有方法`MembershipProvider`，但是当我使用 WSAT 安全部分时，我收到了以下消息：

`There is a problem with your selected data store. This can be caused by an invalid server name or credentials, or by insufficient permission. It can also be caused by the role manager feature not being enabled. Click the button below to be redirected to a page where you can choose a new data store.`

以下错误消息可能有助于诊断问题：`The operation or method is not implemented`。

这是我的 web.config：

```
<membership defaultprovider="CustomProvider">
    <providers>
        <clear />
        <add name="CustomProvider" type="Owl.CustomMembershipProvider.UserManager" applicationname="TestApp" connectionstringname="QUESTIONNARIESSql" enablepasswordretrieval="false" enablepasswordreset="false" maxinvalidpasswordattempts="5" />
   </providers>
</membership> 
```

这是我的 CustomMembership 类：

```
public class UserManager : MembershipProvider 
{
        public UserManager(): base()
        {

        }

        public override void Initialize(string name, System.Collections.Specialized.NameValueCollection config)
        {

            // Inicializar
            base.Initialize(name, config);
        }

        public MembershipUser CreateUser(string email, out MembershipCreateStatus status)
        {
            MembershipUser uInfo = new UserInfo(email, "CustomMembershipProvider", Guid.NewGuid());

            try
            {
                using (QuestionnarieEntities context = new QuestionnarieEntities())
                {
                    string auxEmail = (from u in context.UsersData
                                       where u.UserEmail == email
                                       select u.UserEmail).FirstOrDefault();

                    if (auxEmail == null)
                    {
                        UsersData userData = new UsersData();
                        userData.UserEmail = email;
                        userData.UserId = Guid.NewGuid();

                        context.AddToUsersData(userData);
                        context.SaveChanges();
                        status = MembershipCreateStatus.Success;
                        return uInfo;
                    }
                    else
                    {
                        status = MembershipCreateStatus.DuplicateEmail;
                        return uInfo;
                    }
                }

            }
            catch (Exception)
            {
                status = MembershipCreateStatus.UserRejected;
                throw;
            }

        }

        public override bool DeleteUser(string email, bool deleteAllRelatedData)
        {
            try
            {
                // implementar exclusão
                return true;
            }
            catch (Exception)
            {
                return false;
            }
        }

        public override MembershipUser GetUser(string email, bool userIsOnline)
        {

            MembershipUser uInfo = new UserInfo(email, "CustomMembershipProvider", Guid.NewGuid()); ; 
            return uInfo;
        }

        public void UpdateUser(UsersData user)
        {

            try
            {
                using (QuestionnarieEntities context = new QuestionnarieEntities())
                {

                    UsersData userData = (from u in context.UsersData
                                          where u.UserEmail == user.UserEmail
                                          select u).FirstOrDefault();

                    userData.UF = user.UF;
                    userData.Age = user.Age;
                    userData.City = user.City;
                    userData.Color = user.Color;
                    userData.Country = user.Country;
                    userData.Gender = user.Gender;
                    userData.Occupation = user.Occupation;
                    userData.Schooling = user.Schooling;

                    context.SaveChanges();

                }

            }
            catch (Exception)
            {
                throw;
            }
        }

        public bool ValidateUser(string email)
        {

            using (QuestionnarieEntities context = new QuestionnarieEntities())
            {
                return true;
                //try
                //{
                //    UsersData userData = (from u in context.UsersData
                //                    where u.UserEmail == email
                //                    select u).FirstOrDefault();

                //    if (userData != null)
                //        return true;
                //    else
                //        throw new Exception("O usuário não foi validado!");
                //}
                //catch (Exception)
                //{
                //    return false;
                //}

            }
        }

        public override string ApplicationName
        {
            get
            {
                return "Authentication";
            }
            set
            {
                string apl= value;
            }
        }

        public override bool ChangePassword(string username, string oldPassword, string newPassword)
        {
            return true;
        }

        public override bool ChangePasswordQuestionAndAnswer(string username, string password, string newPasswordQuestion, string newPasswordAnswer)
        {
            return true;
        }

        public override MembershipUser CreateUser(string username, string password, string email, string passwordQuestion, string passwordAnswer, bool isApproved, object providerUserKey, out MembershipCreateStatus status)
        {
            status = MembershipCreateStatus.Success;
            MembershipUser user = new UserInfo("sss","CustomProvider",Guid.NewGuid());
            return user;
        }

        public override bool EnablePasswordReset
        {
            get { return false; }
        }

        public override bool EnablePasswordRetrieval
        {
            get { return false; }
        }

        public override MembershipUserCollection FindUsersByEmail(string emailToMatch, int pageIndex, int pageSize, out int totalRecords)
        {
             MembershipUserCollection muc = new MembershipUserCollection();
            muc.Add(new UserInfo("sss","CustomProvider",Guid.NewGuid()));
            totalRecords = 1;
            return muc;
        }

        public override MembershipUserCollection FindUsersByName(string usernameToMatch, int pageIndex, int pageSize, out int totalRecords)
        {
            MembershipUserCollection muc = new MembershipUserCollection();
            muc.Add(new UserInfo("sss", "CustomProvider", Guid.NewGuid()));
            totalRecords = 1;
            return muc;
        }

        public override MembershipUserCollection GetAllUsers(int pageIndex, int pageSize, out int totalRecords)
        {
            MembershipUserCollection muc = new MembershipUserCollection();
            muc.Add(new UserInfo("sss", "CustomProvider", Guid.NewGuid()));
            totalRecords = 1;
            return muc; ;
        }

        public override int GetNumberOfUsersOnline()
        {
            return 1;
        }

        public override string GetPassword(string username, string answer)
        {
            return "teste";
        }

        public override MembershipUser GetUser(object providerUserKey, bool userIsOnline)
        {
            MembershipUser uInfo = new UserInfo("luizdias@gmail.com", "CustomMembershipProvider", Guid.NewGuid()); ;
            return uInfo;
        }

        public override string GetUserNameByEmail(string email)
        {
            try
            {
                using (QuestionnarieEntities context = new QuestionnarieEntities())
                {
                   string auxEmail = (from u in context.UsersData
                                       where u.UserEmail == email
                                       select u.UserEmail).FirstOrDefault().ToString();

                   return auxEmail;

                }

            }
            catch (Exception)
            {
                return string.Empty;
                throw;
            }            
        }

        public override int MaxInvalidPasswordAttempts
        {
            get { return 3; }
        }

        public override int MinRequiredNonAlphanumericCharacters
        {
            get { return 0; }
        }

        public override int MinRequiredPasswordLength
        {
            get { return 2; }
        }

        public override int PasswordAttemptWindow
        {
            get { return 3; }
        }

        public override MembershipPasswordFormat PasswordFormat
        {
            get { return MembershipPasswordFormat.Clear; }
        }

        public override string PasswordStrengthRegularExpression
        {
            get { return ""; }
        }

        public override bool RequiresQuestionAndAnswer
        {
            get { return false; }
        }

        public override bool RequiresUniqueEmail
        {
            get { return false; }
        }

        public override string ResetPassword(string username, string answer)
        {
            return string.Empty;
        }

        public override bool UnlockUser(string userName)
        {
            return false; // implementei
        }

        public override void UpdateUser(MembershipUser user)
        {
            string s = "s" + "s";
        }

        public override bool ValidateUser(string username, string password)
        {
            return true;
        }
    } 
```

# android - Android 通过busybox命令行静默安装apk

> ID：14398543
> 
> 赞同：4
> 
> 时间：2013-01-18T12:02:08.743
> 
> 标签：android, busybox, android-install-apk

我想通过 BusyBox 命令在后台静默安装 .apk。我已经看到了一些类似的问题，例如[THIS](https://stackoverflow.com/questions/12598687/install-apk-in-background-using-busybox)，但我仍然无法正常工作我的代码......

我有：

1.  我的 .apk 我需要安装在 /sdcard/download/app.apk
2.  根
3.  BusyBox 已安装

代码（不工作）：

```
String sss = Environment.getExternalStorageDirectory() + "/download/" + "app.apk";
Process install;
install = Runtime.getRuntime().exec("/system/xbin/busybox pm install " + sss); 
int success = install.waitFor(); 
```

如果我使用“安装”而不是“pm install”，它会很好地复制文件。

上面的 PS 代码在 AsyncTask 中执行。没有错误，但也没有任何反应......请帮忙！

我也试过这个，但我得到退出值 139 并且没有结果：

```
 Process process;
        process = Runtime.getRuntime().exec("su");
        DataOutputStream os = new DataOutputStream(process.getOutputStream());
        os.writeBytes("pm install /mnt/sdcard/app.apk\n");
        os.flush();
        os.writeBytes("exit\n");
        os.flush();

        int i = process.waitFor(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-04T12:20:27.557

也许这段代码会帮助你

```
Process p = null;
try
{
    p = Runtime.getRuntime().exec("su");
    DataOutputStream outs=new DataOutputStream(p.getOutputStream());

    String cmd="pm install /mnt/sdcard/app.apk";
    outs.writeBytes(cmd+"\n");
}
catch (IOException e)
{
    e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T15:36:07.243

在对许多 android 设备进行大量调查后，我意识到这段代码是正确的并且有效！

一台设备（Samsung Galaxy Tab 2 7.0 - 4.0.3 ICS）出现了一些问题。也许这是 ICS 的一些奇怪特性。将固件更新到 4.1.2 (Jelly Bean) 后问题已解决。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-29T10:35:56.297

您可以简单地使用 adb install 命令静默安装/更新 APK。示例代码如下

```
public static void InstallAPK(String filename){
    File file = new File(filename); 
    if(file.exists()){
        try {   
            String command;
            filename = StringUtil.insertEscape(filename);
            command = "adb install -r " + filename;
            Process proc = Runtime.getRuntime().exec(new String[] { "su", "-c", command });
            proc.waitFor();
        } catch (Exception e) {
        e.printStackTrace();
        }
     }
  } 
```

# android - 平板电脑处于非活动状态时的 HttpUrlConnection 问题

> ID：14398547
> 
> 赞同：1
> 
> 时间：2013-01-18T12:02:21.907
> 
> 标签：android

我在多个设备上遇到问题，当设备在一段时间内未与之交互时，我的 HttpUrlConnection 无法按预期运行。项目目标平台为 Android 4.0.3。

下面是我如何使用 HttpUrlConnection 的示例。

```
new AsyncRequestDTOBaseItemArray(callback).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, url); 
```

实际的 AsyncTask

```
public class AsyncRequestDTOBaseItem extends AsyncTask<String,String,Object> {

HttpURLConnection connection;
InputStream inStream;
IApiCallback callback;

public AsyncRequestDTOBaseItem(IApiCallback callback) {
    this.callback = callback;
}

@Override
protected Object doInBackground(String... uri) {

    try {
        URL url = new URL(uri[0]);
        connection = (HttpURLConnection) url.openConnection();
        connection.setConnectTimeout(5000);
        connection.addRequestProperty("Accept-Encoding", "gzip");
        connection.setInstanceFollowRedirects(false);
        connection.connect();

        String encoding = connection.getContentEncoding();
        // Determine if the stream is compressed and uncompress it if needed.
        if (encoding != null && encoding.equalsIgnoreCase("gzip")) {
            inStream = new GZIPInputStream(connection.getInputStream());
        }  else {
            inStream = connection.getInputStream();
        }

        if (inStream != null) {
           InputStreamReader isr = new InputStreamReader(inStream);
            Gson gson = new Gson();

            try {
                DTOBaseItem item = gson.fromJson(isr, DTOBaseItem.class);
                return item;
            } catch (Exception e) {
                Log.i("AsyncRequestDTOBaseItem", "Exception");
                if (e != null && e.getMessage() != null) {
                    Log.e("AsyncRequestDTOBaseItem", e.getMessage());
                }
            } finally {
                inStream.close();                   
            }
        }   

    } catch (SocketTimeoutException e) {
        Log.i("AsyncRequestDTOBaseItem", "Socket Timeout occured");
    } catch (IOException e) {
        Log.i("AsyncRequestDTOBaseItem","IOException");

        if (e != null && e.getMessage() != null) {
            Log.i("AsyncRequestDTOBaseItem",e.getMessage());
        }

    } finally {
        if (connection != null)
            connection.disconnect();
    }
    return null;
}

@Override
protected void onPostExecute(Object result) {
    callback.Execute(result);
}
} 
```

除非设备处于非活动状态，否则我看不到上述代码有任何问题。当设备处于非活动状态时，最后执行的代码行是

```
String encoding = connection.getContentEncoding(); 
```

我还进入了 wifi 设置并确保我的 wifi 不休眠。起初我以为可能是wifi重新连接造成了这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T00:16:54.230

看起来问题可能是服务器没有发回数据。

我添加了**connection.setReadTimeout(5000);** 现在问题似乎已经消失了。

# javascript - JavaScript 检查是否为 Chrome、Firefox 和 Opera 安装了浏览器扩展

> ID：14398548
> 
> 赞同：6
> 
> 时间：2013-01-18T12:02:21.907
> 
> 标签：javascript, firefox, opera

如果没有为 Chrome、Firefox 和 Opera**安装扩展程序**， 我想在我们的网站上显示自定义栏（通知，例如：安装我们的插件。） 。如果安装了扩展，则不会显示任何内容。

**这个想法是**：
1\. 用户访问我们的网站，并出现一个带有消息的栏 - “嘿，安装我们的扩展程序”。
2\. 用户点击安装并安装扩展。用户无需打开它。
3\. 用户再次访问我们的网站，并且安装了扩展后，该栏不再出现。
**我们只讨论安装检查，而不是 cookie**。

到目前为止，我只能找到适用于 Chrome 的解决方案：[http](http://blog.kotowicz.net/2012/02/intro-to-chrome-addons-hacking.html)
://blog.kotowicz.net/2012/02/intro-to-chrome-addons-hacking.html 和 Firefox：[http ://webdevwonders.com/detecting- firefox-add-ons/](http://webdevwonders.com/detecting-firefox-add-ons/)
Opera 从未被提及。

有没有办法为 Opera 做这件事，基于检查作为扩展的一部分的本地资源的想法：
chrome-extension://--Extension ID--/blank.gif
Firefox chrome://firebug/内容/空白.gif

或者： **是否有一种简单的方法来检查是否为 Chrome、Firefox 和 Opera 安装了扩展程序？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T12:36:05.460

如果扩展愿意合作，它可以很容易地在文档中宣传它的存在。例如：

* * *

~~扩展可以做~~

 ~~```
window.$$myExt = ... 
```~~ 

然后您可以通过以下方式检测扩展名

```
if(typeOf $$myExt !== 'undefined'){... 
```

~~（或其任何变体）~~

[至少](https://stackoverflow.com/questions/1622145/how-can-i-mimic-greasemonkey-firefoxs-unsafewindow-functionality-in-chrome)获取页面`window`有点棘手

* * *

扩展可以做

```
document.body.classList.add("myExt-visited") 
```

然后您可以通过以下方式检测扩展名

```
if(document.body.classList.contains("myExt-visited")){... 
```

* * *

扩展可以做

```
document.body.innerHTML += "<div id='myExt-toolbar'>..."
// or $('body').append("<div id='myExt-toolbar'>..."); 
```

那么您可以通过以下方式检测扩展名

```
if(document.getElementByID("myExt-toolbar")){...
// or if($("#myExt-toolbar").length){... 
```

* * *

或者，你可以做

```
<div id="myExt-replacement">
   ... 
```

并且扩展会做

```
var replacement = document.getElementByID("myExt-replacement");
replacement && replacement.remove(); 
```

* * *

或者你可以做

```
function onMyExtExists(){
  ...
} 
```

并且扩展会做

```
onMyExtExists && onMyExtExists(); 
```

# dynamics-crm-2011 - CRM 2011 SDK - 从服务上下文获取底层 IOrganizationService

> ID：14398549
> 
> 赞同：1
> 
> 时间：2013-01-18T12:02:27.603
> 
> 标签：dynamics-crm-2011, crm

我为我的 CRM 组织生成了 ServiceContext。我能够正确连接到 CRM。由于我在 app.config 文件中有所有上下文配置，我想知道是否可以从已经实例化的 OrganizationServiceContext 中获取 IOrganizationService？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T22:34:47.073

当我需要从多个地方访问*服务*引用时，我通常分两步完成。首先，我尝试查看是否可以将其传递给被调用的方法（我假设您有类似以下的内容）。

```
using (IOrganizationService service 
  = (IOrganizationService) new OrganizationServiceProxy(...))
{
  DoSomething();
  DoSomething(service);
}

private void DoSomething(IOrganizationService service) { ... } 
```

当它失败时（由于技术设置或单纯的愚蠢），我设置了一个私有属性并在构造函数（或至少第一个调用方法）中为其分配一个值，以便将来像这样访问。

```
class MyClass
{
  private IOrganization _service;
  private IOrganization _Service
  {
    get
    {
      if(_service == null)
        _service = (IOrganizationService) new OrganizationServiceProxy(...);
      return _service;
    }
  }
  ...
} 
```

如果您有很多在服务器上运行的代码，您可能希望将所有这些内容移到一个单独的类中并对其进行调用（使用上面讨论的属性设置）。

我不完全确定我是否正确地回答了你的问题，所以如果我错过了你的观点，那就太好了。

# three.js - ThreeJS 对象材质显示空白

> ID：14398551
> 
> 赞同：0
> 
> 时间：2013-01-18T12:02:31.683
> 
> 标签：three.js, webgl, shader

**下面的代码将地球渲染为黑色地球**。请注意，我是 WebGL 的初学者，也在我在某人的代码中找到并使用它的“制服”和参数部分下方。

如果我添加普通材质，它可以工作，但使用着色器它就不起作用。

脚本链接： [https ://threejsdoc.appspot.com/doc/three.js/examples/js/ShaderExtras.js](https://threejsdoc.appspot.com/doc/three.js/examples/js/ShaderExtras.js)

```
<script type="text/javascript" src="js/three.min.js"></script>
<script type="text/javascript" src="js/ShaderExtras.js"></script>

//Earth
var earthTexture   = THREE.ImageUtils.loadTexture( "img/planets/earth_atmos_2048.jpg" );
var earthCloudsTexture   = THREE.ImageUtils.loadTexture( "img/planets/earth_clouds_1024.png" );
var earthNormalTexture   = THREE.ImageUtils.loadTexture( "img/planets/earth_normal_2048.jpg" );
var earthSpecularTexture = THREE.ImageUtils.loadTexture( "img/planets/earth_specular_2048.jpg" );

var earthShader = THREE.ShaderUtils.lib[ "normal" ];
var earthUniforms = THREE.UniformsUtils.clone( earthShader.uniforms );

    earthUniforms[ "tNormal" ].texture = earthNormalTexture;
    earthUniforms[ "uNormalScale" ].value = 0.85;

    earthUniforms[ "tDiffuse" ].texture = earthNormalTexture;
    earthUniforms[ "tSpecular" ].texture = earthSpecularTexture;

    earthUniforms[ "enableAO" ].value = false;
    earthUniforms[ "enableDiffuse" ].value = true;
    earthUniforms[ "enableSpecular" ].value = true;

    earthUniforms[ "uDiffuseColor" ].value.setHex( 0xffffff );
    earthUniforms[ "uSpecularColor" ].value.setHex( 0x333333 );
    earthUniforms[ "uAmbientColor" ].value.setHex( 0x000000 );
    earthUniforms[ "uShininess" ].value = 15;

var earthParameters = {

                fragmentShader: earthShader.fragmentShader,
                vertexShader: earthShader.vertexShader,
                uniforms: earthUniforms,
                lights: true,
                fog: true

                };

var earth_mat = new THREE.ShaderMaterial( earthParameters );

var earth_geom = new THREE.SphereGeometry( 200, 32, 32 );
earth_geom.computeTangents();
var earth = new THREE.Mesh( earth_geom, earth_mat );
earth.position.x = 6000;
scene.add( earth ); 
```

# cocoa - 不可编辑的 NSTextView 可以使用 setAutomaticLinkDetectionEnabled 突出显示链接吗？

> ID：14398552
> 
> 赞同：2
> 
> 时间：2013-01-18T12:02:37.093
> 
> 标签：cocoa, url, hyperlink, nstextview

我一直在使用 NSTextView 来显示一些不可编辑的文本，并希望突出显示它的字符串中的任何链接。我已经看到了一些解析链接并添加属性的代码。那会很好用，但我想知道我是否可以以某种方式重用内置链接检测。

我试过设置：

```
[textView setEnabledTextCheckingTypes:NSTextCheckingTypeLink];
[textView setAutomaticLinkDetectionEnabled:YES]; 
```

并使用：

```
[textView checkTextInDocument:nil]; 
```

设置字符串后。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T12:50:43.510

为了完整起见，这里是我手动添加到 NSTextView 的链接的方式：

```
- (void)highlightLinksInTextView:(NSTextView *)view {
  NSDataDetector *linkDetector = [NSDataDetector dataDetectorWithTypes:NSTextCheckingTypeLink error:nil];
  NSArray *matches = [linkDetector matchesInString:view.string options:0 range:NSMakeRange(0, view.string.length)];

  [view.textStorage beginEditing];

  for (NSTextCheckingResult *match in matches) {
    if (!match.URL) continue;

    NSDictionary *linkAttributes = @{
      NSLinkAttributeName: match.URL,
    };

    [view.textStorage addAttributes:linkAttributes range:match.range];
  }

  [view.textStorage endEditing];
} 
```

不幸的是，每次设置 NSTextView 字符串时都必须调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-04-18T13:47:00.687

我最近偶然发现了这个并创建了一个 NSTextView 子类[LinkDetectingTextView.swift](https://gist.github.com/martinhoeller/c4372ec33b4352115f34d92b359286aa)。希望这对将来的某人有所帮助。

# php - 一种去除不完整 bbcode 的方法？

> ID：14398553
> 
> 赞同：1
> 
> 时间：2013-01-18T12:02:37.123
> 
> 标签：php, regex

有没有办法在 php 中搜索 bbcode 之类的`[b][/b]`.

例如，他们没有结束标签？说在电子邮件订阅中显示文本回复的片段被削减到*`x characters`*可能会被切断`BB-Code`而使其保持打开状态？

与 PHP 一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T12:16:45.950

您可以[解析](http://en.wikipedia.org/wiki/Parsing)bbcode 字符串。它相当复杂，但您可以实现简单的算法来提供句法分析。通过这种方式，您可以获得所有错误，例如未关闭的标签或标签关闭中的错误顺序，例如：

```
[b] 
    [i] 
    [/b]
[/i] 
```

最简单的方法：

1.  准备标签列表 ( `[b], [i] etc`)
2.  搜索第一个标签并将其添加到堆栈中
3.  继续寻找，如果有更多的开始标签，也将它们推入堆栈。
4.  当你找到结束标签时，检查堆栈顶部的内容。应该有正确的开始标签。如果没有，那么你会找到你要找的东西。如果结束标记适合，那么您可以弹出最后一个元素并继续解析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T19:30:22.107

我写了一个函数，它会告诉你字符串中是否有一些未闭合的 bb-tags。虽然它不能告诉位置，但它会告诉哪些标签有错误，因此更容易找到它们。它还可以找到复杂的 bb-tags，例如 [url=something]urlname[/url]

```
<?PHP
$test_string = "
    [b]bold ok[/b]
    [b]bold unclosed[b]
    [i]italic unclsed[i]
    [i]italic[/i]
";

echo checkBBCode($test_string);

//------------------------------------

function checkBBCode($str)
{
    $result = "";

    $taglist = array("b", "i", "u", "h1", "h2", "url"); //the bb-tags to search for
    $result_array = array();

    foreach($taglist as $tag )
    {
        // How often is the open tag?  
        preg_match_all ('/\['.$tag.'(=[^ ]+)?\]/i', $str, $matches);  
        $opentags = count($matches['0']);  

        // How often is the close tag?  
        preg_match_all ('/\[\/'.$tag.'\]/i', $str, $matches);  
        $closetags = count($matches['0']);  

        // how many tags have been unclosed? 
        $unclosed = $opentags - $closetags;  
        $unclosed = (int)$unclosed*-1; //force positive values

        $result_array[] = $tag." :".$unclosed;
    }

    foreach($result_array as $check)
    {
        $result .= "\n\r<br>".$check;
    }
    return $result;
}

?> 
```

我在 dreamincode.net 上发现了一个有用的脚本，它在前端有不同的工作方式，并通过突出显示不正确的标签来直观地显示它们。

[bb_check 现场演示](http://zaksdg.com/lab/bbc_check/)

[bb_check 全文](http://www.dreamincode.net/forums/topic/240132-check-for-bbcodes-missing-improperly-closed-tags/)

# iphone - 在 viewController 上使用按钮和滑动手势时如何弹回

> ID：14398554
> 
> 赞同：-1
> 
> 时间：2013-01-18T12:02:39.533
> 
> 标签：iphone, ios, objective-c, ipad

我这里有两种情况。1.从VC1单击按钮，我想移动到VC6，然后向后滑动。这是通过上面提到的代码完成的。2\. 我在 VC1 中也有滑动手势移动到 VC2、VC3、VC4、VC5 和 VC6。现在我想从 VC6 滑动回 VC5、Vc4、VC3、VC2 然后到 VC1。我可以分别实现这两个场景。但是我怎样才能一起实现这些场景。

我有六个视图控制器。在`viewController1`我有一个按钮，可以将我带到`viewController6`. 然后我从使用代码中分别弹回`viewController5`, `viewController4`, `viewController3`,`viewController2`和`viewController1``viewController6`

```
 - (IBAction)SwipeGoto5:(UISwipeGestureRecognizer *)sender 
{
    IndexPage *P1VC=[[IndexPage alloc] initWithNibName:@"IndexPage" bundle:nil];
    Page2 *P2VC=[[Page2 alloc] initWithNibName:@"Page2" bundle:nil];
    Page3 *P3VC=[[Page3 alloc] initWithNibName:@"Page3" bundle:nil];
    Page4 *P4VC=[[Page4 alloc] initWithNibName:@"Page4" bundle:nil];
    Page5 *P5VC=[[Page5 alloc] initWithNibName:@"Page5" bundle:nil];

    NSLog(@"swipe to 5");
    NSMutableArray *allViewControllers = [NSMutableArray arrayWithArray: self.navigationController.viewControllers];
    [allViewControllers insertObject:P1VC atIndex:1];
    [allViewControllers insertObject:P2VC atIndex:2];
    [allViewControllers insertObject:P3VC atIndex:3];
    [allViewControllers insertObject:P4VC atIndex:4];
    [allViewControllers insertObject:P5VC atIndex:5];

    self.navigationController.viewControllers=allViewControllers;
    [self.navigationController popViewControllerAnimated:YES];

} 
```

我也有`UISwipeGestureRecognizer`带`viewController1`我去`viewController2`,`viewController3`和. 当我使用on并且我也有上面提到的代码时，我将如何弹出。`viewController4``viewController6``viewController6``UISwipeGestureRecognizer``viewController1`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T12:14:22.370

获取滑动手势（从右到左）并在其中编写 popViewController 的代码。

# java - 在线程内运行线程，“类异常错误”

> ID：14398555
> 
> 赞同：2
> 
> 时间：2013-01-18T12:02:41.410
> 
> 标签：java, multithreading, class, methods, queue

我有一个运行方法，它试图覆盖另一个运行方法。但它没有发生，因为在它传递给运行方法之前我得到了一个“类未找到异常”。

这是我的带有运行方法的课程

我怎么能超越 run 方法。

我必须调用才能执行的类。

```
 public abstract class MessageProcessor implements Runnable {
private Collection<KpiMessage> fetchedMessages;
private Connection dbConnection;
Statement st = null;
ResultSet rs = null;
PreparedStatement pstmt = null;
private Collection<KpiMessage> outgoingQueue;

public KpiMsg804 MessageProcessor(Collection<KpiMessage> outgoingQueue, Connection
 dbConnection){
    this.outgoingQueue = outgoingQueue;
    this.dbConnection = dbConnection;
    return (KpiMsg804) fetchedMessages;
}

    public Collection<KamMessage> generate(Collection<KamMessage> outgoingQueue)
   {
    while(true){
        try {

            while (rs.next()) {
                KamMessage filedClass = convertRecordsetToPojo(rs);
                outgoingQueue.add(filedClass);

            }

            for (KamMessage pojoClass : outgoingQueue) {
                KamMsg804 updatedValue = createKamMsg804(pojoClass);
                System.out.print(" " + pojoClass.getSequence());
                System.out.print(" " + pojoClass.getTableName());
                System.out.print(" " + pojoClass.getAction());
                System.out.print(" " + updatedValue.getKeyInfo1());
                System.out.print(" " + updatedValue.getKeyInfo2());
                System.out.println(" " + pojoClass.getEntryTime());
            }
            return outgoingQueue;

        } catch (SQLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T12:15:42.003

在您的代码中，您正在类中创建一个默认可见性字段，而不是覆盖该`run()`方法。只要坚持：

```
MessageProcessor processor = new MessageProcessor() {
  @Override
  final public void run() {
    MessageProcessor(outgoingQueue).generate(outgoingQueue);                    
  }
}; 
```

并删除外部`MessageProcessor`声明。

我制作了您的代码的一个子集：

```
public class PollingSynchronizer {
  public static void main(String[] args) {
    MessageProcessor message = new MessageProcessor() {
      MessageProcessor message = new MessageProcessor() {
        public void run() {
          System.out.println("new run");
        }
      };
    };

    new Thread(message).start();
  }
}

class MessageProcessor implements Runnable {
  public void run() { System.out.println("old run"); }
} 
```

哪个会打印`old run`，因为第一个`MessageProcessor::run()`它并没有真正被覆盖。

# html - 内联元素是否可以有效地具有块级元素后代？

> ID：14398556
> 
> 赞同：2
> 
> 时间：2013-01-18T12:02:44.787
> 
> 标签：html

将块级元素（例如`p` *直接*嵌套在诸如`b`.

但是，使用诸如`display: inline-block`or `position: absolute`is 这样的 css 在概念上是合理的，可以在内联上下文中包含块级内容。

浏览器在很大程度上接受内联元素中的这种块级元素，但在某些情况下，无效的构造会导致真正的问题：

```
<p><span><p></p></span></p> 
```

上面的例子*不会*被解析为三个嵌套元素；无论CSS如何，最内层`<p>`都会隐式关闭外层。`<p>`你可以看到[一个 jsbin 演示](http://jsbin.com/ofuhoq/4/edit)。

**是否有*某种*方法可以使用中间元素将块级元素有效地放置在内联元素中？**

**如果这*不可能*`<p>`，对于大多数情况（最好也适用于棘手的标签）是否有无效但功能性的解决方法？**

需要明确的是，我正在寻找一种不需要对文档结构进行侵入性更改的通用解决方案（即“只`span`在所有地方使用，用于所有内容”不是一个有吸引力的解决方案）。我想嵌入具有潜在块级内容的未知（动态生成）文档片段 - 因此修复片段以排除块级元素是不可行的。

* * *

相关：（主要解决直接嵌套的有效性）

*   [如果块元素包含另一个块元素，则将块元素更改为与 CSS 内联是错误的吗？](https://stackoverflow.com/questions/746531/is-it-wrong-to-change-a-block-element-to-inline-with-css-if-it-contains-another)
*   [内联元素内的块级元素](https://stackoverflow.com/questions/1714121/block-level-elements-inside-inline-elements)
*   [HTML5 中的内联级元素中是否允许块级元素？](https://stackoverflow.com/questions/6061869/are-block-level-elements-allowed-inside-inline-level-elements-in-html5)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T19:37:27.247

W3C 验证器（在 XHTML 模式下）列出了以下在 a`<span>`和 a之间有效的元素`<p>`：

*   目的
*   插件
*   德尔
*   地图
*   按钮

使用这些作为 inline-to-block 扳手的页面在 XHTML Strict 中验证，但在 HTML 5 中不验证。在这些标记中，我更喜欢`object`，因为它的语义包袱最少。

HTML 5 似乎放弃了内联与块的区别，转而采用更复杂的系统，其中有几种不同的元素类别，一个元素可以拥有哪些子元素取决于它的祖先是什么。在这些元素中`ins`，`del`和`map`现在接受与其父元素接受的相同类型的子元素，并且`button`只接受“短语内容”（最接近内联元素的东西）。的错误消息`object`没有多大意义，但据我所知，它继承了父元素的限制，同时也施加了自己的一些限制。

据我所知，一旦你进入其中（缺少 iframe 和新文档），就无法逃避短语内容，所以这个问题的答案是否定的，不能在 HTML5 中完成（如本文）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T12:12:19.010

语义上是错误的，我认为 HTML5 只允许 < a > 标签内的块元素（据我所知）。

换句话说，您可以通过更改 css 使您的 html 代码按您的意愿工作，但这并不意味着您的 html 代码是正确的。您还应该考虑将出现的 SEO 和可访问性问题。

# html - 我的网站崩溃 IE8，但只有在服务器上访问时

> ID：14398558
> 
> 赞同：0
> 
> 时间：2013-01-18T12:03:09.330
> 
> 标签：html, internet-explorer-8

我一直在这个网站上工作并检查 IE8、Chrome、FF 和 Safari。自始至终一切都很好。

但是，既然我已经将网站上传到服务器，它每次都会崩溃 IE8 - 这是怎么回事？！

链接：[http ://www.oxfordsoundhire.com/morland](http://www.oxfordsoundhire.com/morland)

请帮忙！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T12:06:06.860

链接：[http ://www.oxfordsoundhire.com/morland](http://www.oxfordsoundhire.com/morland)

它在 Internet Explorer 10 上运行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T12:08:03.440

我认为这与这个 js 文件有关：[http ://www.oxfordsoundhire.com/morland/js/carouFredSel.html](http://www.oxfordsoundhire.com/morland/js/carouFredSel.html)

它实际上不在那个位置，但不是只返回空白，而是您的服务器返回一个完整的 404.html 文件，并且打开`"<HTML..."`使它中断。

# javascript - JavaScript中的十进制到二进制递归函数

> ID：14398562
> 
> 赞同：1
> 
> 时间：2013-01-18T12:03:20.007
> 
> 标签：javascript, recursion, binary

我想在 js 中编写一个递归函数来计算十进制数的二进制表示。

我确实设法通过以下方式解决了这个问题：

```
var t = (function f(n, s)
{
    return((s = (n % 2) + s) && (n == 0)) ? s : f(Math.floor(n / 2), s);
})(4, '');

console.log(t); 
```

小提琴：http: [//jsbin.com/ihezev/3/edit](http://jsbin.com/ihezev/3/edit)

但是，我无法摆脱前导零。

因此，如果我使用 7 执行 IIFE，它会产生 : `0111`并且我想要`111`。

我怎样才能摆脱领先`0`？

*（请不要使用字符串替换解决方案。我想尽可能保持优雅。我知道我可以做到`alert(Number(234).toString(2))`，但这个问题被标记为递归。）*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2019-01-25T23:54:09.720

[这是我从python](https://www.geeksforgeeks.org/decimal-binary-number-using-recursion/)移植的一个干净的

```
const decToBi = num => num === 0 ? 0 : num % 2 + 10 * decToBi(Math.floor(num / 2));
console.log(decToBi(10)); //1010
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T12:28:15.797

有点改变但仍然优雅：

```
var t = (function f(n, s) {
    return n === 0 ? s || "0" : f(~~(n / 2), (n % 2) + s);
})(7, "");  // "111" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-03-15T15:55:01.023

```
function base10ToString(num, str = "") {
  if (num === 0) {
    return str;
  }
  if (num % 2 === 0) str = "0" + str;
  else str = "1" + str;
  return base10ToString(Math.floor(num / 2), str);
}
console.log(base10ToString(7));
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T12:05:37.663

您需要传递一个参数，该参数表示您是否已经生成了一个`1`。虽然该参数是`false`，但您不会为 a 生成任何内容`0`。

# ios - iOS - 设备（如果静音）在设置 kAudioSessionProperty_AudioCategory 时挂起

> ID：14398563
> 
> 赞同：5
> 
> 时间：2013-01-18T12:03:20.463
> 
> 标签：ios, avaudiosession, mute

我有一个问题，我试图在 AVAudioSession 上更改我的音频类别，以开始录制麦克风输入。

如果我在设备的静音开关未设置（即未静音）时使用我当前的实现（以及许多替代实现来尝试解决此问题）执行此操作，那么一切都很好。

如果我在静音时执行此操作 - 来自任何先前的音频类别（MediaPlayback、SoloAmbient 等），则会出现巨大的延迟，并导致设备在一段时间内表现得非常缓慢。

这就是我正在做的事情。在应用程序启动时，我这样做：

```
AudioSessionInitialize(NULL, NULL, NULL, NULL);
UInt32 sessionCategory = kAudioSessionCategory_SoloAmbient;
AudioSessionSetProperty(kAudioSessionProperty_AudioCategory, sizeof(sessionCategory), &sessionCategory);
AudioSessionSetActive(true); 
```

稍后，开始录制：

```
AudioSessionInitialize(NULL, NULL, NULL, NULL);
UInt32 sessionCategory = kAudioSessionCategory_RecordAudio;
AudioSessionSetProperty(kAudioSessionProperty_AudioCategory, sizeof(sessionCategory), &sessionCategory);
AudioSessionSetActive(true); 
```

如果我调试并逐步完成，一切都会像预期的那样快，直到我点击 AudioSessionSetProperty——这就是设备挂起的地方。当我使用 RecordAudio 和 PlayAndRecord 类别时会发生这种情况。

发生这种情况时，我会在控制台中收到以下消息：

```
AudioSessionSetProperty posting message to kill mediaserverd
AudioSessionSetActive posting message to kill mediaserverd
AudioQueueSetProperty posting message to kill mediaserverd
AllocateBuffer posting message to kill mediaserverd 
```

我已经在网上搜索了这些，但它们从来没有与我遇到的这种延迟一起被报告，而且它们也没有强调我可能做错了什么。

有没有人经历过类似的事情，你知道我能做些什么来解决这个问题吗？

提前致谢

# rtc - 用于 RTC 的轻量级 Eclipse 插件

> ID：14398567
> 
> 赞同：4
> 
> 时间：2013-01-18T12:03:39.173
> 
> 标签：rtc, rational-team-concert

IBM 拥有这个 200+ Mb 的 Eclipse 插件，我可以在其中访问 Eclipse 的所有内容和所有功能。

是否有可用的更小更轻量级的 Eclipse 插件，可以访问开发人员需要的信息。基本上只是分配给我或我的团队的工作项列表。

是的，我可以将现有的大型 IBM 插件配置为仅显示该信息，但是我仍然会在我的 Eclipse 中安装这个庞大的庞然大物。

我知道 Tasktop Dev 允许我将工作项导入 mylyn 任务列表，但我正在寻找更便宜的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T12:21:21.453

不，因为该插件必须管理工作项*和*更改集（版本化文件列表），即计划*和*源代码控制部分。
此外，您还需要 EMF - GMF 依赖项，它是 200+ MB 包的一部分，如“[提示：将 Rational Team Concert 客户端安装到 Eclipse 3.5.x](https://jazz.net/library/article/384) ”中所述。

这基本上是 RTC 插件的 75%（其余是 JBE 的链接：Jazz Build Engine）。

# php - Magento - 将 SKU 数组添加到购物车

> ID：14398572
> 
> 赞同：2
> 
> 时间：2013-01-18T12:04:01.690
> 
> 标签：php, zend-framework, magento, magento-1.7

我正在为我正在开发的电子商务网站按 sku 形式添加产品。我制作的表格基本上有 2 个字段，“cod”和“qt”。

我已将其传递给此脚本（已编辑）：

```
<?php
    $sku = $_POST['cod'];
    $qty = $_POST['qt'];
    $product = new Mage_Catalog_Model_Product();
    $cart = Mage::getSingleton('checkout/cart');

    $osids = array();

    foreach ($sku as $lol){
        $lolz = Mage::getModel('catalog/product')->loadByAttribute('sku',$lol)->getId();
        array_push($osids, $lolz);

    }
var_dump($osids);

$params = array(
    'qty' => 2,
);
$cart->addProductsByIds($osids, $params);
$cart->save();
Mage::getSingleton('checkout/session')->setCartWasUpdated(true);

?> 
```

var_dump 正确显示数组，即。在这种情况下有多个 sku，但 foreach 循环只会将数组中的第一个 sku 添加到购物车中。

知道为什么吗？

我不想在数组中添加所有 sku。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T12:14:46.053

试试下面的代码：

```
<?php
    $sku_list = $_POST['cod'];
    $qty = $_POST['qt'];
    $cart = Mage::getSingleton('checkout/cart');

    foreach ($sku_list as $sku){
        $product = Mage::getModel('catalog/product')->loadByAttribute('sku',$sku);
        $cart->addProduct($product, $qty);
    }
    $cart->save();
    Mage::getSingleton('checkout/session')->setCartWasUpdated(true); 
```

# c - ALSA Api：如何同时播放两个波形文件？

> ID：14398573
> 
> 赞同：6
> 
> 时间：2013-01-18T12:04:02.253
> 
> 标签：c, linux, audio, alsa

播放两个重叠的独立波形文件所需的 API 配置/调用是什么？我试图这样做，我收到资源繁忙错误。解决问题的一些指示将非常有帮助。

`snd_pcm_prepare()`以下是来自第二个波形文件的错误消息

```
"Device or resource busy" 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-18T12:25:32.400

您可以配置 ALSA 的`dmix`插件以允许多个应用程序共享输入/输出设备。

执行此操作的示例配置如下：

```
pcm.dmixed {
    type dmix
    ipc_key 1024
    ipc_key_add_uid 0
    slave.pcm "hw:0,0"
}
pcm.dsnooped {
    type dsnoop
    ipc_key 1025
    slave.pcm "hw:0,0"
}

pcm.duplex {
    type asym
    playback.pcm "dmixed"
    capture.pcm "dsnooped"
}

# Instruct ALSA to use pcm.duplex as the default device
pcm.!default {
    type plug
    slave.pcm "duplex"
}
ctl.!default {
    type hw
    card 0
} 
```

这将执行以下操作：

*   使用插件创建新设备`dmix`，允许多个应用共享输出流
*   创建另一个 using`dsnoop`对输入流执行相同的操作
*   将这些合并到一个新设备中，该设备将使用插件`duplex`支持输入和输出`asym`
*   告诉 ALSA 使用新`duplex`设备作为默认设备
*   告诉 ALSA 用来`hw:0`控制默认设备（alsamixer 等）

坚持这个，或者`~/.asoundrc`你`/etc/asound.conf`应该很高兴。

有关更多信息，请参阅[http://www.alsa-project.org/main/index.php/Asoundrc#Software_mixing](http://www.alsa-project.org/main/index.php/Asoundrc#Software_mixing)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-18T12:10:10.300

ALSA 不提供混音器。如果您需要同时播放多个音频流，则需要自己将它们混合在一起。

实现这一点的最简单方法是将 WAV 文件解码为`float`样本，添加它们，然后在将它们转换回整数样本时对其进行剪辑。

或者，您可以尝试多次打开*默认*音频设备（而*不是*像“hw：0”这样的硬件设备），对于您希望播放的每个流一次，并希望加载 dmix ALSA 插件并提供混音功能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-12-03T01:03:05.970

由于 ALSA 默认提供混音器设备 (dmix)，您可以简单地使用 aplay，如下所示：

```
aplay song1.wav &
aplay -Dplug:dmix song2.wav 
```

如果您的音频文件是相同的速率和格式，那么您不需要使用插件。它成为了 ：

```
aplay song1.wav &
aplay -Ddmix song2.wav 
```

但是，如果您想对这种方法进行编程，这里有一些 C++ 音频编程[教程](http://forum.audioinjector.net/viewtopic.php@f=10&t=2982.html)。这些教程向您展示了如何加载音频文件和操作不同的音频子系统，例如 jackd 和 ALSA。

在[此示例](https://github.com/flatmax/gtkiostream/blob/master/test/ALSAPlaybackTest.C)中，它演示了使用 ALSA 播放一个音频文件。可以通过打开第二个音频文件来修改它，如下所示：

```
Sox<short int> sox2;
res=sox2.openRead(argv[2]);
if (res<0 && res!=SOX_READ_MAXSCALE_ERROR)
  return SoxDebug().evaluateError(res); 
```

然后像这样修改[while循环](https://github.com/flatmax/gtkiostream/blob/master/test/ALSAPlaybackTest.C#L107-L119)：

```
 Eigen::Array<int, Eigen::Dynamic, Eigen::Dynamic, Eigen::RowMajor> buffer, buffer2;
  size_t totalWritten=0;
  while (sox.read(buffer, pSize)>=0 && sox2.read(buffer2, pSize)>=0){
    if (buffer.rows()==0 || buffer.rows()==0) // end of the file.
      break;
    // as the original files were opened as short int, summing will not overload the int buffer.
    buffer+=buffer2; // sum the two waveforms together
    playBack<<buffer; // play the audio data
    totalWritten+=buffer.rows();
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-02T07:18:47.057

您也可以使用此配置

```
 pcm.dmix_stream
   {
       type dmix
        ipc_key 321456 
        ipc_key_add_uid true
        slave.pcm "hw:0,0"
   }

   pcm.mix_stream
   {
      type plug
      slave.pcm dmix_stream
   } 
```

在 ~/.asoundrc 或 /etc/asound.conf 中更新它

你可以使用命令

对于 wav 文件

aplay -D mix_stream "文件名"

对于 raw 或 pcmfile

aplay -D mix_stream -c “频道” -r “速率” -f “格式” “文件名”

根据您的音频文件输入通道、速率、格式和文件名的值

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-13T06:27:35.330

下面是一个非常简化的多线程播放方案（假设两个文件是相同的样本格式，相同的通道号和相同的频率）：

1.  每个文件解码都启动基于缓冲区的线程（必须将此代码制作 2 次 - for`file1`和 for `file2`）：

    ```
    import wave
    import threading

    periodsize = 160
    f = wave.open(file1Wave, 'rb')
    file1Alive = True
    file1Thread = threading.Thread(target=_playFile1)
    file1Thread.daemon = True
    file1Thread.start() 
    ```

2.  文件解码线程本身（也必须定义两次 - for`file1`和 for `file2`）：

    ```
    def _playFile1():
        # Read data from RIFF
        while file1Alive:
            if file1dataReady:
                time.sleep(.001)
            else:
                data1 = f.readframes(periodsize)
                if not data1:
                    file1Alive = False
                    f.close()
                else:
                    file1dataReady == True 
    ```

3.  启动合并线程 (aka `funnel`) 以合并文件解码

    ```
    import alsaaudio
    import threading

    sink = alsaaudio.PCM(alsaaudio.PCM_PLAYBACK, device="hw:CARD=default")
    sinkformat = 2
    funnelalive = True
    funnelThread = threading.Thread(target=self._funnelLoop)
    funnelThread.daemon = True
    funnelThread.start() 
    ```

4.  合并和播放（又名`funnel`）线程

    ```
    def _funnelLoop():
        # Reading all Inputs
        while funnelalive:
            # if nothing to play - time to selfdestruct
            if not file1Alive and not file2Alive:
                funnelalive = False
                sink.close()
            else:
                if file1dataReady and file2dataReady: 
                    # merging data from others but first
                    datamerged = audioop.add(data2, data2, sinkformat)
                    file1dataReady = False
                    file2dataReady = False
                    sink.write(datamerged)
                    time.sleep(.001) 
    ```

# javascript - AMD：当它是一个对象而不是数组时，“依赖项”是什么意思？

> ID：14398578
> 
> 赞同：0
> 
> 时间：2013-01-18T12:04:43.893
> 
> 标签：javascript, amd, js-amd

我继承了一些带有 AMD 模块的代码，如下所示：

```
define('shared/modulename', {
    load: function(name, parentRequire, callback, config) {...}
}) 
```

这与[此处记录的依赖关系数组](https://github.com/amdjs/amdjs-api/wiki/AMD)的正常 AMD 语法不同。代码没有注释，也没有解释为什么这个模块需要改变语法。

这个 define() 的调用实际上做了什么？

查看为 load() 函数提供的参数，它们似乎是 AMD 内部的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T12:22:49.847

这是定义 AMD 模块的简单形式之一。[http://requirejs.org/docs/api.html#define](http://requirejs.org/docs/api.html#define)

在 RequireJS 中，您可以以这种简单的格式定义名称-值对：

```
define({foo: 'yay'}) 
```

您也可以在定义中指定模块名称，这是您在组合模块时需要的。所以这使我们的例子：

```
define('aloha', {foo: 'yay'}) 
```

现在回到你的代码。意思很浅薄。它定义了一个名为`shared/modulename`. 该`exports`模块的 是一个对象，其中包含一个名为 的方法`load`。

你可以像这样使用这个模块：

```
require('shared/modulename').load(name, parentRequire, callback, config) 
```

# python - easy_thumbnails 和 s3boto 表演

> ID：14398579
> 
> 赞同：1
> 
> 时间：2013-01-18T12:04:46.090
> 
> 标签：python, django, amazon-web-services, amazon-s3

我正在使用带有 THUMBNAIL_DEFAULT_STORAGE = 'storages.backends.s3boto.S3BotoStorage' 的 Django easy-thumbnails 1.1。

我有一个 API，它返回一个 json 的图片列表，该列表调整大小以适合 iPhone 屏幕。

代码是：

```
for p in pl:
    photos.append({
        'id': p.id,
        'url': request.build_absolute_uri(
            get_thumbnailer(p.photo)['iPhoneCombo'].url
        ) if p.photo else None,
    }) 
```

我注意到 get_thumbnailer 消耗的时间比使用本地存储慢 4 倍。

我做错什么了吗？或者是否有任何优化性能的最佳实践？

谢谢你。

# security - 如何干净地删除 Plone 自定义权限？

> ID：14398585
> 
> 赞同：1
> 
> 时间：2013-01-18T12:05:06.690
> 
> 标签：security, permissions, plone

你知道，你开始创建一个名为的发行版`something.good`，并在其上定义一个类似的`permissions.zcml`东西：

```
<configure xmlns="http://namespaces.zope.org/zope">

  <permission
     id="something.good.reset"
     title="something.good: reset entries"
     />

</configure> 
```

但是，一旦在服务器上安装了发行版，您就会意识到权限不够好，必须完全重构为`something.else`.

卸载`something.good`from`plone_quickinstaller`不会删除权限。转到 ZMI 中的任何安全选项卡，您仍然可以看到它。

我四处寻找文档，浏览代码，`AccessControl`但`Products.GenericSetup`找不到任何东西。

关于如何删除它的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:19:55.047

好的，所以 Plone 很容易，不要介意别人可能会告诉你什么。

那么，您（实际上是我）想要删除权限定义？**去做就对了！**

因此，要检查以正确删除权限的事项列表是：

*   删除权限`permissions.zcml`
    *   如果没有剩余权限，请删除对该文件的任何引用（可能在您的`configure.zcml`）
*   删除所有对权限的引用`profiles/default/rolemap.xml`
*   扫描您的所有`configure.zcml`文件或 python 文件（如果使用类似 grok 的权限）以引用该权限

**就是这样！**

一旦您重新启动您的实例，权限将不再显示在 ZMI 的安全选项卡上。

似乎权限是在启动时即时创建的？在我看来是这样。证明我错了！

# html - 重定向到页面中的特定 div？

> ID：14398587
> 
> 赞同：0
> 
> 时间：2013-01-18T12:05:15.870
> 
> 标签：html

我有以下代码：

```
<body>
<div id="cp_container">
<a href="#" onclick="show_questions_panel()" >Questions</a>
<a href="#" onclick="show_profile_panel()" >Profile </a>

<div id="cp_questions_panel">

    <div id="cp_button_container">
        <a href="#" onclick="show_all_questions()" >All Questions </a>
        <br>
        <a href="#" onclick="show_un_answered_questions()" >  Un Answered Questions</a>

    </div>

    <div id="cp_all_questions">

    </div>

    <div id="cp_un_answered_questions">
        <div id='question_edit_form'>

            <form  method="post" action="cpanel.php#cp_un_answered_questions">

                <label>Question Title </label><br>
                <input type="text" name="question_title_edit" id='question_title_edit'>
                <br>
                <label>Question</label><br>
                <textarea name="question_edit" id="question_edit" rows="5" cols="50"></textarea>
                <br>
                <label>Answer Title </label><br>
                <input type="text" name="answer_title_edit" id="answer_title_edit">
                <br>
                <label>Answer</label><br>
                <textarea name="answer_edit" id="answer_edit" rows="5" cols="50"></textarea>
                <br>

                <input type="input" name="question_id_edit" id="question_id_edit">
                <input type="submit" value="Save">

            </form>

        </div> <!--End of  question_edit_form-->

    </div> <!-- End Of cp_un_answered_questions -->

</div> <!-- End Of cp_questions_panel -->

<div id="cp_profile_panel">

</div> 
```

在上面的代码中存在这一行：

```
<form  method="post" action="cpanel.php#cp_un_answered_questions"> 
```

但提交表单后，浏览器会转到“cpanel.php”页面。我希望浏览器转到提交的表单以报告提交结果。热解决了吗？

# c# - 不同类型参数的函数定义？

> ID：14398589
> 
> 赞同：-1
> 
> 时间：2013-01-18T12:05:23.583
> 
> 标签：c#

我正在编写一个简单的程序，其中我定义了一个接受某种类型参数的函数，现在我得到的新要求有相同的程序要完成，我已经在之前的函数中编写过，但这次它应该在不同类型的论据。我无法为两种不同类型的论据直接调用相同的函数。所以我的问题是我应该如何修改我的函数以使其行为。我希望这是可能的。我想要一些东西，我有`Sum(int 1,int j)`现在这样的函数我想对`double`类型参数使用相同的函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T12:07:26.140

简单的泛型

```
T Sum<T>(T i,T j) { ... } 
```

但是，您将无法做`i+j`任何事情，所以这取决于。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T12:08:15.640

这称为重载。您可以做的只是编写两个函数：

```
public double Sum(int 1, int j)

public double Sum(double 1, double j) 
```

您的程序将根据您传递给它的参数调用适当的程序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-18T12:11:17.140

为什么不定义一个以 double 作为参数类型的方法，然后您也可以为整数值调用它。

```
private double Sum(double a, double b)
{
  return a+b;
} 
```

后来你可以这样称呼它：

```
int a = 1;
int b = 2;
int Sum = (int) Sum(a,b); 
```

由于可以将整数传递给双精度类型参数。但是，如果您的方法涉及复杂的计算，那么您最好使用不同类型的 Sum 方法的多个重载。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T12:06:57.117

您声明一个具有相同数量但类型不同的参数的新方法。

```
public Int32 Sum(Int32 i, Int32 j)
{
    return i + j;
}

public Double Sum(Double i, Double j)
{
    return i + j;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-18T12:07:59.307

在 .NET 中，没有包含不同数字类型的类型。因此，您需要同一方法的两个重载，一个带`int`参数，一个带`double`参数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-18T12:08:21.040

所以你有一个带`int`参数的方法

```
public int Sum(int val1,int val2)
{
    return val1 + val2;
} 
```

现在你需要一个方法`doubles`：

```
public double Sum(double val1,double val2)
{
    return val1 + val2;
} 
```

如果你想要一个支持所有“数字”类型的[泛型](http://msdn.microsoft.com/en-us/library/512aeb7t%28v=vs.110%29.aspx)类，你可以看看这里：

[http://www.codeproject.com/Articles/33617/Arithmetic-in-Generic-Classes-in-C](http://www.codeproject.com/Articles/33617/Arithmetic-in-Generic-Classes-in-C)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-18T12:09:38.193

您可以为不同的数据类型编写**通用方法**。检查此[链接](http://msdn.microsoft.com/en-us/library/twcad0zb%28v=vs.80%29.aspx) 更多地查看此链接。它展示了如何创建一个可以处理多种数据类型的函数。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-18T12:29:35.563

```
int a = 2, b = 3;
        double c = 2.345, d = 3.45;
        object inta = a, intb = b;
        object doublec = c, doubled = d;
        Console.WriteLine(Sum(inta, intb).ToString());
        Console.WriteLine(Sum(doublec, doubled).ToString());

public object Sum(object a, object b)
    {
        object sum = null;
        if (a.GetType().ToString() == "System.Int32" && b.GetType().ToString() == "System.Int32")
        {
            sum = Convert.ToInt32(a.ToString()) + Convert.ToInt32(b.ToString());
        }

        if (a.GetType().ToString() == "System.Double" && b.GetType().ToString() == "System.Double")
        {
            sum = Convert.ToDouble(a.ToString()) + Convert.ToDouble(b.ToString());
        }
        return sum;

    } 
```

# javascript - 更改 mongo 集合的顺序（车把/流星）

> ID：14398591
> 
> 赞同：1
> 
> 时间：2013-01-18T12:05:30.103
> 
> 标签：javascript, mongodb, meteor, handlebars.js

我有一个由名称和分数组成的排行榜流星示例应用程序：请参阅--> [http://leaderboardtry.meteor.com/](http://leaderboardtry.meteor.com/)

我希望元素的顺序在单击切换按钮时在分数和名称之间切换。这是我尝试过的： Javascript：

```
// Set up a collection to contain player information. On the server,
// it is backed by a MongoDB collection named "players".

Players = new Meteor.Collection("players");
Session.set("sort_by", "score");  

if (Meteor.isClient) {

   Template.leaderboard.players = function () {
    return Players.find({}, {sort: {score: -1}});
  };

  Template.leaderboard.selected_name = function () {
    var player = Players.findOne(Session.get("selected_player"));
    return player && player.name;
  };

  Template.player.selected = function () {
    return Session.equals("selected_player", this._id) ? "selected" : '';
  };

  Template.leaderboard.events({
    'click input.inc': function () {
      Players.update(Session.get("selected_player"), {$inc: {score: 5}});
    },
    'click input.toggle': function(){
    var switch_sort = Session.equals("sort_by", "name")?"score":"name";
     Session.set("sort_by", switch_sort);  
     var togg = Session.get("sort_by");
     if (togg == "score"){

           Players.find({}, {sort: {score: -1}});

     } else {

                 Players.find({}, {sort: {name: -1}});

     }
  }
  });

  Template.player.events({
    'click': function () {
      Session.set("selected_player", this._id);
    }
  });
}

// On server startup, create some players if the database is empty.
if (Meteor.isServer) {
  Meteor.startup(function () {
    if (Players.find().count() === 0) {
      var names = ["Ada Lovelace",
                   "Grace Hopper",
                   "Marie Curie",
                   "Carl Friedrich Gauss",
                   "Nikola Tesla",
                   "Claude Shannon"];
      for (var i = 0; i < names.length; i++)
        Players.insert({name: names[i], score: Math.floor(Math.random()*10)*5});
    }
  });
} 
```

HTML

```
<head>
  <title>Leaderboard</title>
</head>

<body>
  <div id="outer">
    {{> leaderboard}}
  </div>
</body>

<template name="leaderboard">
   <input type="button" class="toggle" value="toggle sort" />

  <div class="leaderboard">
    {{#each players}}
      {{> player}}
    {{/each}}
  </div>

  {{#if selected_name}}
  <div class="details">
    <div class="name">{{selected_name}}</div>
    <input type="button" class="inc" value="Give 5 points" />
  </div>
  {{/if}}

  {{#unless selected_name}}
  <div class="none">Click a player to select</div>
  {{/unless}}
</template>

<template name="player">
  <div class="player {{selected}}">
    <span class="name">{{name}}</span>
    <span class="score">{{score}}</span>
  </div>
</template> 
```

问题肯定是我在 JS 中的尝试。感谢您的帮助，因为我是流星/蒙戈的新手

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:43:42.827

在我看来，排行榜使用存储在 Template.leaderboard.players 中的函数来填充列表；所以你需要把 sort_by 代码放在那里吗？像这样？

```
Template.leaderboard.players = function () {
    var togg = Session.get("sort_by");
    if (togg == "score"){
       return Players.find({}, {sort: {score: -1}});
    } else {
        return Players.find({}, {sort: {name: -1}});
    }
}; 
```

这只是一个建议-我不知道流星，所以我不知道它是如何知道重新运行该功能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-09T17:33:40.127

我已经设法做到了。

```
 // Set a session var to store current sort order 
    // Do this first thing in the Meteor.isClient *if*
    Meteor.startup(function(){
        Session.set("sort_by", {score: -1, name: 1});
    }); 
```

请注意，此处处理了玩家排序：

```
 Template.leaderboard.players = function () {
        // The commented line below is the original line in the code
        // return Players.find({}, {sort: {score: -1, name: 1}});

        // Replace line above for the line below
        return Players.find({}, {sort: Session.get("sort_by")});
    }; 
```

一旦你有了它，你应该从一个按钮处理一个事件，所以：

*   在 HTML 文件中创建按钮（例如）：

    ```
    <input type="button" class="sort" value="Order by Name"/> 
    ```

*   处理 JS 文件中的事件（注意这个处理程序已经存在，我只是添加代码）：

    ```
    Template.leaderboard.events({

        'click input.inc': function () {
        Players.update(Session.get("selected_player"), {$inc: {score: 5}});},

        // This is the code you need
        'click input.sort': function () {
            var sort_by = Session.get("sort_by");
            if(Object.keys(sort_by)[0] == "score"){
                Session.set("sort_by", { name: 1, score: -1 });
            }
            else{
                Session.set("sort_by", { score: -1, name: 1 });
            }
        },
    }); 
    ```

这应该足够了。

# javascript - 应用程序脚本：将电子表格单元格复制到表格中，并带有格式

> ID：14398594
> 
> 赞同：0
> 
> 时间：2013-01-18T12:05:33.190
> 
> 标签：javascript, google-apps-script

我正在编写一个通过 URL 打开外部 Google 电子表格的脚本。该脚本需要将单元格复制到 FlexTable 中，并显示它们。

问题是电子表格单元格具有自定义显示格式，以将它们显示为经过时间（m：ss.SS）。如果我只是用 加载表格元素`table.setWidget(x, y, app.createLabel(z))`，标签只会显示 1899 年的日期。知道如何复制格式吗？

谢谢。

编辑

这几乎做到了：

```
date = new Date(z);  // 'z' from 'getValues'
elapsed = Utilities.formatDate(date, "GMT", "m:ss.SS");
table.setWidget(x, y, app.createLabel(elapsed)); 
```

不幸的是，`"m:ss.SS"`不起作用；它总是将毫秒显示为 0。有什么想法吗？

另一个编辑

应用程序脚本似乎完全搞砸了。这段代码：

```
date = new Date();
elapsed = Utilities.formatDate(date, "GMT", "m:ss.SS");
table.setWidget(x, y, app.createLabel(elapsed)); 
```

正确显示当前时间的分钟和秒部分，但显示了**3**位小数，而不是 2 位。这段代码：

```
date = new Date(z);  // 'z' from 'getValues' 
```

不工作。当`z`以非零毫秒数显示在电子表格中时，此构造函数始终将毫秒数设置为 0（`getMilliseconds`返回 0）。有人有解决方法吗？我需要应用程序脚本来处理田径比赛时间，通常是秒到小数点后 2 位，可能是几分钟。我注意到这些对应于 1899 年 12 月 30 日的日期。这很奇怪——这个日期不应该有一个负时间值吗？GWT 源代码将`formatDate`负值作为一种特殊情况处理，很难看出它在做什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T18:58:23.083

这是一种可能的解决方法，可以按照您想要的方式显示时间：[测试表](https://docs.google.com/spreadsheet/ccc?key=0AnqSFd3iikE3dHhMTlNEN2c5Ym9xdVV1dVdNNDlsWlE) *（请不要修改）*

我使用 Ui 来定义时间值，但在脚本中将其转换为日期对象，以验证它如何与“真实”日期对象一起使用。

**编辑：**根据这篇文章和 AdamL 对这篇文章的不同回答[，](https://stackoverflow.com/questions/14417665/google-spreadsheet-dates-times-broken-compared-to-excel)我终于得到了一些东西，可以在 UI 和自定义格式的帮助下，在数百秒内显示和计算短时间值。

```
function onOpen() {
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var menuEntries = [ {name: "Change cell format", functionName: "EditFormat"},
                      {name: "Reset format to default", functionName: "ResetFormat"},
                      {name: "show UI test", functionName: "sportChrono"},
                    ]               
  ss.addMenu("Custom Format", menuEntries);
}

function EditFormat() {
  var oldname = SpreadsheetApp.getActiveRange().getNumberFormat();
  var name = Browser.inputBox("Current format (blank = no change):\r\n"+ oldname);
  SpreadsheetApp.getActiveRange().setNumberFormat((name=="")?oldname:name);
}

function ResetFormat() {
  SpreadsheetApp.getActiveRange().setNumberFormat("0.###############");
}

 function sportChrono() {
  var app = UiApp.createApplication().setTitle('Show Time in mm:ss.SS');
  var main = app.createGrid(3, 4).setWidth('100');
  var button = app.createButton('validate')
  var btn2 = app.createButton('send to Cell').setId('btn2').setVisible(false)
  var time = app.createTextBox().setId('time').setName('time')
  var cellist = app.createListBox().addItem('A1').addItem('A2').addItem('A3').addItem('A4').addItem('A5').setVisible(false).setId('cellist').setName('cellist')
  var min = app.createTextBox().setName('min');
  var sec = app.createTextBox().setName('sec');
  var Msec = app.createTextBox().setName('Msec');
    main.setText(0,0,'minutes').setText(0,1,'secs').setText(0,2,'millisecs')
    main.setWidget(1,0,min).setWidget(1,1,sec).setWidget(1,2,Msec);
    main.setWidget(1,3,button).setWidget(2,0,time).setWidget(2,1,cellist).setWidget(2,2,btn2)
  var handler = app.createServerHandler('show').addCallbackElement(main)
    button.addClickHandler(handler)
  var handler2 = app.createServerHandler('writeToSheet').addCallbackElement(main)
    btn2.addClickHandler(handler2)
  app.add(main)
  ss=SpreadsheetApp.getActive()
  ss.show(app)
}

function show(e){
  var ss=SpreadsheetApp.getActive();
  var app = UiApp.getActiveApplication();
  var min = e.parameter.min
  var sec = e.parameter.sec
  var Msec = e.parameter.Msec
  var time = new Date()
      time.setHours(0,min,sec,Msec)
  var nmin = digit(time.getMinutes())
  var nsec = digit(time.getSeconds())
  var nMsec = digit(time.getMilliseconds())
  app.getElementById('time').setText(nmin+':'+nsec+'.'+nMsec)
  var btn2 = app.getElementById('btn2').setVisible(true)
  var cellist = app.getElementById('cellist').setVisible(true)
  return app
  }

function writeToSheet(e){
  var range = e.parameter.cellist
  var val = e.parameter.time
  var ss=SpreadsheetApp.getActive();
    ss.getRange(range).setFormula('=value("0:'+val+'")');
  }

function digit(val){
  var str
    if(val<10){
      str='0'+val}
    else if(val>9&&val<99){
      str=val.toString()}
    else{
      str=Math.round(val/10).toString()
    }
  return str
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T11:25:40.327

该区域有多个相关且未修复的错误；例如，请参见[此处。](https://stackoverflow.com/questions/14417665/google-spreadsheet-dates-times-broken-compared-to-excel)让 Google 表格处理经过的时间是一个糟糕的想法。我最终的解决方案是使用“整数”来保持时间，并在 GAS 中进行所有必需的格式化和处理（小心，因为它们实际上是不精确的浮点数，当然）。这很容易，而且比与`Date`. 唯一的麻烦是如果您需要从 Excel 导入日期。我不得不修改 Excel 电子表格以将日期转换为 ms，然后将其导入。

# python - SQLAlchemy 关系自省

> ID：14398597
> 
> 赞同：2
> 
> 时间：2013-01-18T12:05:47.827
> 
> 标签：python, sqlalchemy, introspection

我有两个具有一对多关系的映射类：

```
class Part(...):
    product = relationship('products', backref=backref('parts'))

class Product(...):
    pass 
```

给定`Part.product`，我可以反省这种关系，即获取属性名，也可以获取backref属性名：

```
>>> rel = Part.product   # image it's passed in as a function parameter
>>> rel.property.key
'product'
>>> rel.property.backref[0]
'parts' 
```

我也可以反过来访问这种关系：

```
>>> rel = Product.parts
>>> rel
<sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x3744fd0>
>>> rel.property.key
'parts' 
```

但是，我不知道如何访问原始属性名称（又名 backref 的 backref 属性，在示例中又名“产品”）：

```
>>> rel.property.backref is None
True 
```

我必须在哪里挠痒痒`Product.parts`才能获得`'product'`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T17:01:57.910

我试图重现你所描述的情况，也得到`Product.parts.property.backref = None`了。在pycharm中调试后，我发现其他属性部分包含属性名称：

```
print Product.parts.property.backref
>>>None
print Product.parts.property.back_populates
>>>product 
```

我建议考虑`back_populates`在这种情况下使用作为 hack。

back_populates 在[文档 Linking Relationship Configuration:Relationships with Backref](http://docs.sqlalchemy.org/en/latest/orm/backref.html)中有描述。根据文档，您需要像这样定义模型：

```
class Part(...):
    product = relationship('products', back_populates='parts')

class Product(...):
    parts = relationship('products', back_populates='product')
    pass 
```

# symfony - Symfony - 实体继承和表单

> ID：14398598
> 
> 赞同：1
> 
> 时间：2013-01-18T12:05:51.150
> 
> 标签：symfony

在我的项目中，我有一个抽象实体，我们称之为 Parent，以及两个子实体：ChildA 和 ChildB，它们扩展了 Parent 类。我正在使用学说和单表策略， ChildA 和 ChildB 是相似的。这部分工作正常，现在我的问题出在表格上。

我想要一个可用于创建其中一个类（ChildA 或 ChildB）的实体的表单，因此我希望在表单中有第一个字段来选择用户想要创建的实体类型，并且显示该类的字段（是否只有一个不同的字段，我正在使用 javascript 根据所选类显示/隐藏字段）

为此，我创建了一个包含 ChildA 和 ChildB 的所有字段以及用于选择类型的字段的表单，我的想法是在控制器中检查类型，然后根据选定的内容创建与 ChildA 或 ChildB 关联的特定表单键入，并将其与从主窗体接收到的值绑定，但这里的问题是如何在此窗体中显示错误

任何人都有解决这个问题的好方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:46:19.697

我认为你这样做很困难。
对于这个问题，我将创建 2 个表单（FormChildA，FormChildB），并相应地关联字段。
因为无论如何您都在使用 javascript，所以只需使用选项呈现页面并使用 ajax 获取表单：

```
<div id="select-type">
    <button value="child_a" type="button">Select ChildA</button>
    <button value="child_b" type="button">Select ChildB</button>
</div>
<div id="form-container"></div>
<script>
    $('#select-type button').on('click', function(event) {
        event.preventDefault();
        $.get('path/to/get_ajax_form', {type: $(this).val()}, function(data) {
            $('#form-container').html(data);
        });
    });
</script> 
```

创建一个 Controller 方法来检索表单：

```
public function getAjaxFormAction()
{
    $type = $this->get('request')->query->get('type');
    switch( $type ) {
        case 'child_a':
            $form = $this->createForm(new FormChildA, new ChildA);
            break;
        case 'child_b':
            $form = $this->createForm(new FormChildB, new ChildB);
            break;
    }

    return $this->render('AcmeBundle:Forms:_type_form.html.twig', array(
       'form' => $form->createView(),
       'type' => $type,
    ));
} 
```

为每个表单添加一个带有表单类型值的隐藏字段，
这样您就可以用一种方法验证这些表单（与检索它们的方式相同）。

这使得单独修改和验证每个表单变得更加容易！

# javascript - 如何使用来自 url 或本地文件的 javascript 在 html 中运行 exe

> ID：14398602
> 
> 赞同：-5
> 
> 时间：2013-01-18T12:06:00.913
> 
> 标签：javascript, html, file

我想从我尝试过使用 iframe 命令的浏览器运行一个 .exe 文件，但似乎无法让它工作我想要的只是每次有人进入 Intranet（而不是 Internet）时就是这样可能的？

好的，我已经研究了一段时间，我理解做这样的事情的含义。

我想要这样做的唯一原因是因为我希望每当有人进入 Intranet 的主页时运行一些更新，例如 java、flash 等......有没有可能以最少的用户交互来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T12:13:27.177

没有运行可执行文件的标准方法。您只能通过 ActiveX 在 IE 中执行 .exe。[在 IE 中进行操作](http://www.devppl.com/forum/how-to-call-exe-file-using-html-vt12862.html#p49912)

网页加载时执行 .exe 的 Javascript -

```
window.onload = function(){
  if (!document.all) {
  alert ("Available only with Internet Explorer.");
  return;
  }
  var ws = new ActiveXObject("WScript.Shell");
  ws.Exec("C:\\Program Files\\Adobe\\Photoshop 6.0\\Photoshp.exe");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T12:11:28.440

将他们的快捷方式更改为浏览器（这肯定比准备特殊图像或 pdf 文件或天知道要容易得多）。

将用户浏览器快捷方式指向一个脚本，该脚本首先运行您的 exe（以及您想要的每个命令），然后最终启动浏览器本身。只是（像）一个批处理脚本。

您是该公司网络的管理员，对吧？那时应该很容易做到。
当然你也可以在你的网络上推送你想要的更新，那么你根本不需要这样的解决方案！

祝你好运！

# iphone - 在目标 c/iOS 中将日期字符串转换为 NSDate

> ID：14398604
> 
> 赞同：11
> 
> 时间：2013-01-18T12:06:06.587
> 
> 标签：iphone, ios, objective-c, xcode

我有这个字符串 ----> Sun, 16 Dec 2012 15:30:22 +0000

我想将其转换为 NSDate。我已经尝试了下面的代码，但它给了我 null

```
NSDateFormatter *df = [[NSDateFormatter alloc] init];

[df setDateFormat:@"yyyy-MM-dd hh:mm:ss a"];

NSDate *date = [[NSDate alloc] init];

date = [df dateFromString: @"Sun, 16 Dec 2012 15:30:22 +0000"];

NSLog(@"date: %@", date); 
```

我没有得到这个问题？

任何指导请

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-18T12:14:57.887

格式化程序的`dateFormat`需要与您提供给它的字符串的格式相匹配。

因此这样的事情应该有效

```
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
formatter.dateFormat = @"EEE, dd MMM yyyy HH:mm:ss ZZZ";

NSLog(@"%@", [formatter dateFromString:@"Fri, 18 Jan 2013 15:30:22 +0000"]); 
```

要查看说明符的实际含义，请查看[Unicode Technical Standard #35](http://unicode.org/reports/tr35/tr35-6.html#Date_Format_Patterns)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T12:11:18.893

试试这个代码

```
NSDateFormatter *df = [[NSDateFormatter alloc] init];

    [df setDateFormat:@"EEEE, dd MMM yyyy"];

    NSDate *date = [[NSDate alloc] init];

    date = [df dateFromString: @"Sun, 16 Dec 2012"];

    NSLog(@"date: %@", date); 
```

希望对你有帮助。。

编辑 ：-

对于你的字符串

```
NSDateFormatter *df = [[NSDateFormatter alloc] init];

    [df setDateFormat:@"EEEE, dd MMM yyyy HH:mm:ss z"];

    NSDate *date = [[NSDate alloc] init];

    date = [df dateFromString: @"Sun, 16 Dec 2012 15:30:22 +0000"];

    NSLog(@"date: %@", date); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-18T12:13:59.027

试试这个从字符串中获取 NSDate

```
- (NSDate*) dateFromString:(NSString*)aStr
{

    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setLocale:[[[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"] autorelease]];
    //[dateFormatter setDateFormat:@"YYYY-MM-dd HH:mm:ss a"];
    [dateFormatter setDateFormat:@"EEE, dd MMM yyyy HH:mm:ss ZZZ"];
    [dateFormatter setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];

    NSLog(@"%@", aStr);
    NSDate   *aDate = [dateFormatter dateFromString:aStr];
    [dateFormatter release];
    return aDate;
} 
```

这对我来说可以。

# events - 从 zk 中的 Fileupload 获取完整的文件路径

> ID：14398609
> 
> 赞同：0
> 
> 时间：2013-01-18T12:06:29.853
> 
> 标签：events, zk, zul

我想要绝对路径，但它是日食路径。如何获得原始路径请帮助我。

```
<zk>
  <window title="Hello World!!" border="normal">
    <label value="You are using: ${desktop.webApp.version}" id="lab" />
    <textbox id="tex" width="250px" />
    <button label="Upload Image" upload="true,maxsize=300">
      <attribute name="onUpload">
        <![CDATA[
          org.zkoss.util.media.Media media = event.getMedia();
          java.io.File myFile = new java.io.File(media.getName());
          Messagebox.show("path"+myFile.getAbsolutePath());
        ]]>
      </attribute>
    </button>
  </window>
</zk> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T16:26:53.490

现在浏览器具有非常高的安全性，因此它可以防止显示客户端本地文件系统并且为了安全起见它对每个人都有意义，没有任何互联网用户会喜欢服务器将知道我们的本地文件系统，如果仍然有任何浏览器在浏览器中显示您的文件系统它是浏览器中的安全湖。

# c# - 选定行可见性的数据网格详细视图

> ID：14398610
> 
> 赞同：0
> 
> 时间：2013-01-18T12:06:33.157
> 
> 标签：c#, wpf, datagrid

我`Datagrid`有一些价值观。I need to display it in another grid when a row of the Data grid is selected.I have binded that grid with datagrid. 它一切正常。

I need to display that detailed view only when any row in the datagrid is selected. 否则应该隐藏。

我怎样才能实现它？由于是初学者，我无法弄清楚如何实现这一点。如果我得到一些回应，我会很高兴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T12:19:49.260

尝试使用 datatrigger 更改网格对象的可见性，例如 Datagrid 的名称为 LISTNAME

```
 <Grid>
        <Grid.Style>
            <Style TargetType="{x:Type Grid}">
                <Style.Triggers>
                    <DataTrigger Binding="{Binding ElementName=LISTNAME, Path=SelectedIndex}" Value="-1">
                        <Setter Property="Visibility" Value="Collapsed"/>
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </Grid.Style> 
```

# java - 使用import语句时如何编译程序

> ID：14398613
> 
> 赞同：-3
> 
> 时间：2013-01-18T12:06:36.213
> 
> 标签：java

假设一个文件`A.java`在`pac`包中，另一个文件`B.java`在`mac`包中。

`B.java`使用包`A`类`pac`。当我编译`B.java`它显示错误。

我如何参考`A.java`以便`JRE`它轻松导入文件`B.java`并编译它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T12:10:24.803

请浏览以下链接，然后尝试纠正问题

[http://docs.oracle.com/javase/tutorial/java/package/packages.html](http://docs.oracle.com/javase/tutorial/java/package/packages.html)

[http://en.wikipedia.org/wiki/Java_package](http://en.wikipedia.org/wiki/Java_package)

# sql-server - 如何执行下一项任务（添加条件并将参数从 2 个数据源传递到一个存储过程）

> ID：14398623
> 
> 赞同：1
> 
> 时间：2013-01-18T12:07:05.107
> 
> 标签：sql-server, ssis

我有 2 张 excel 文件。我需要做什么：

1.  从第一张纸上读取 Id（只有一行，一列）
2.  检查db中是否有该id的记录（图1）

![在此处输入图像描述](../Images/10cd93681d86c5f57ea4c4746f4591f5.png)

3.  如果满足先前的条件，那么我需要从第二张表中读取数据（多行）

4.  将#3 中的数据和#1 中的 id 传递到存储过程并执行它。

    该图使用用户数据读取第二张表并传递给存储过程。 ![在此处输入图像描述](../Images/585580869fa675851bb71fabd028e99e.png)

但我不明白如何将它组合成一个方案以使项目 1-4 工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:26:34.137

所以...如果我认为我正确理解了您的问题...您想要做的是将该 Excel ID 值存储在一个变量中，然后将其作为派生列添加到第 2 部分中的数据流中。

所以你的包应该是这样的：

**执行 SQL 任务**

ConnectionType EXCEL，Connection是你的Excel连接，Result Set是“单行”，SQL Statement是“select top 1 * from [SheetNameWithDataSourceIDGoesHere$]”。结果集将结果名称“0”映射到变量名称（我们称其为 User::DataSourceID。）

**数据流任务**

资料来源：Excel工作表

派生列：称其为 DataSourceID，值为 User::DataSourceID。

查找：针对您查找数据源的任何位置。没有匹配输出会直接进入您的数据转换和存储过程。

* * *

如果你想变得花哨，你可以在第一个之后包含第二个*执行 SQL 任务*，使用*SQLStatementSource*的表达式来针对包含数据源 ID 的数据库表运行。

就像是：

```
"select count(1) as DataSourceIDExists from DATASOURCELOOKUPTABLE where DataSourceID = " + (DT_WSTR,50)@User::DataSourceID 
```

然后将其映射到“单行”结果集，结果名称“0”映射到*User::DataSourceIDExists*。然后在该任务之后，使用带有表达式的优先约束

```
(User::DataSourceIDExists == 0) 
```

确定您是否甚至进入*数据流任务*以加载 Excel 数据。因为听起来你还不是一个全面的 SSIS 专家，所以这可能是一个很好的学习机会。

# javascript - 使用 $.get() 将数据发送到 servlet 并插入 mysql

> ID：14398629
> 
> 赞同：0
> 
> 时间：2013-01-18T12:07:27.110
> 
> 标签：javascript, mysql, jquery, servlets

最近我使用`$.getJSON`向**flickr api**发送请求以获取一些照片信息（我总共获得了 100 个数据）并在`$.getJSON()`的回调函数中，我使用*`$.each()`*and**`$.get('myServlet.do')`**将数据发送到 servlet 然后插入 MySQL 数据库。

我想应该没有问题，但是我发现如果我使用上面的方法，我的数据库会有重复的数据，有谁知道是什么问题？

顺便说一句，当收到 servlet 时，数据是重复的。

如果有人能给我一些建议，将不胜感激......

这是我如何使用的代码*`$.get()`*：

```
$.getJSON('http://query.yahooapis.com/v1/public/yql?q=select id,title,location.latitude,location.longitude,dates.taken,farm,server,secret from flickr.photos.info where photo_id in' + '(select id from flickr.photos.search(0) where text=\"' + queryText + '\" and has_geo=1 and lat=22.993299484253 and lon=120.20359802246 and content_type=1 and radius=20 and api_key=\"' + appid + '\" limit 100 ) and api_key=\"' + appid + '\"&format=json',

function (data) {
  var clientTime = $('#clientTime').html();
  $.each(data.query.results.photo,

  function () {
    console.log(this.id + " " + this.title + " " + this.farm + " " + this.server + " " + this.dates.taken);
    $.post('insertphotoinfo.do', {
      id: encodeURI(this.id),
      title: encodeURI(this.title),
      farm: encodeURI(this.farm),
      server: encodeURI(this.server),
      secret: encodeURI(this.secret),
      takendate: encodeURI(this.dates.taken),
      latitude: encodeURI(this.location.latitude),
      longitude: encodeURI(this.location.longitude),
      clientTime: encodeURI(clientTime)
    },

    function (Result) {

    });
  }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T13:22:15.830

恐怕我对 servlet 一无所知，但我可以从 MySQL 的角度解决这个问题。

在一个非常简单的层面上，如果您每次都从 Flickr 获取相同的数据，然后将所有这些数据插入到数据库中，那么您最终会得到重复的数据。

一个`INSERT`命令，无论它是如何包装的，都会添加一行数据。它不检查该数据是否已经存在。

概括地说，您的问题有三种解决方案。

1）写一些东西来检查一个项目是否已经存在，然后运行`UPDATE`或`INSERT`酌情。

2）如果您总是收集完整的数据集，并且没有任何依赖于 ID 列的内容，则可以在插入新数据之前删除所有现有数据。如果它是表中唯一的数据，则可以使用`TRUNCATE`.

3) 将 MySQL 中的适当列标记为`UNIQUE`. 这将防止添加具有相同数据的另一行 - 但您的 servlet 可能不喜欢被传递错误。

最简单的是解决方案2。

您必须自己弄清楚这些解决方案是如何使用 servlet 实现的，但如果掌握了正确的概念，您应该能够找到一些东西。

# jqgrid - jqgrid 多个日期选择器和自动对焦

> ID：14398630
> 
> 赞同：0
> 
> 时间：2013-01-18T12:07:30.133
> 
> 标签：jqgrid, datepicker

我想我在 jqGrid 中发现了一个奇怪的错误。如果单击[此链接](http://jsfiddle.net/andreapier/yNw3C/2000/)，您可以看到带有寻呼机的 jqGrid。如果您单击“+”按钮，您将获得 2 个日期选择器按预期工作的添加表单。

如果您现在单击[此链接](http://jsfiddle.net/andreapier/yNw3C/2001/)，您可以看到相同的表格和相同的添加按钮。无论如何，如果您尝试使用日期选择器设置第二个日期，您会注意到焦点移回第一个输入，打开第一个日期选择器。
该示例不起作用，因为它`Id`隐藏了第一个字段 ( )，所以真正的第一个字段是 a `datepicker`。此外，编辑形式是模态的。

最后，如果您单击[此链接](http://jsfiddle.net/andreapier/yNw3C/2002/)，即使第一个字段是日期选择器，行为也是正确的。我唯一改变的是 modal 属性（在它为真之前为假）。

但是，我需要隐藏该`Id`字段并有一个模式窗口，所以我必须摆脱这个问题......
有人可以提出解决方案或提示吗？
谢谢

PS：请注意，如果您设置`modal: false`，您仍然会得到黑色/透明覆盖，就像窗口是模态的一样，但不是！如果您在编辑表单之外单击，它将被关闭。这对我的要求是不可接受的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:53:34.247

尝试将 jqModal 参数设置为 false

```
var editParams = {
     modal: true,
     jqModal:false,
     ... //other options you need
}

grid.editGridRow(row_id, editParams); 
```

有关更多信息，请参阅答案 Oleg's [analisys](https://stackoverflow.com/a/12282798/315935)

# opencv - 具有多线程的 OpenCV traincascade

> ID：14398631
> 
> 赞同：2
> 
> 时间：2013-01-18T12:07:30.707
> 
> 标签：opencv, object-detection

我想通过 opencv_traincascade 训练 haar 级联。

后

```
opencv_traincascade -data result/apple/ -vec samples/sample.vec -bg negatives.dat -minHitRate 0.999 -mode ALL -numPos 2000 -numNeg 1500 -precalcValBufSize 2000 -precalcIdxBufSize 2000 
```

我看到只加载了一个核心。我能做些什么来快速训练级联？如果我需要使用一些选项重新编译 OpenCV，请告诉我如何去做。谢谢！

UPD：找到这个[线程](https://stackoverflow.com/questions/5151558/opencv-2-2-and-multi-cpus-is-opencv-haartraining-exe-multithreaded)。有一个新问题：如何使用 flag 设置 OpenCV `HAVE_TBB`？它会帮助我吗？我可以在 OpenCV 2.4.3 中使用哪个版本的[IPP ？](https://registrationcenter.intel.com/RegCenter/NComForm.aspx?ProductID=1452)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:59:33.853

对不起我的英语不好。我找到了我的问题的答案。

*在 xubuntu 12-10 上使用 IPP 7.1 测试 intel64 和 Opencv 2.4.3*

要将 IPP&&TBB 与 OpenCV 一起使用，您应该从[官方网站下载并安装它们](https://registrationcenter.intel.com/RegCenter/NComForm.aspx?ProductID=1452)

**ia32 用于 32 位架构，intel64 用于 64 位！**

在你应该通过这个命令编译 OpenCv 之后：

```
cmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local -D BUILD_PYTHON_SUPPORT=ON -D WITH_IPP=ON -D IPP_H_PATH=/opt/intel/ipp/include/ -D WITH_TBB=ON .. 
```

**在cmake之后检查输出！**

```
make
sudo make install 
```

# android - Android 数组适配器 - Getview -Textview 抛出错误

> ID：14398632
> 
> 赞同：0
> 
> 时间：2013-01-18T12:07:31.850
> 
> 标签：android, android-listview, android-arrayadapter, textview

我有一个使用 ArrayAdapter 生成的 Lsit 视图。getView 方法中的 TextView 字段在使用 POJO 类中的值填充时引发错误。您能否让我知道我的代码需要更正的地方。

提前致谢。

```
public class ApplianceAdapter extends ArrayAdapter<POJO_Appliance> {
    private ArrayList<POJO_Appliance> appliance;  
    Context context;
    LayoutInflater vi; 
    public ApplianceAdapter(Context context ,ArrayList<POJO_Appliance> appliance) {    
        super(context, 0, appliance); 
        this.appliance = new ArrayList<POJO_Appliance>();    
        this.appliance.addAll(appliance); 
        this.context =context;
        vi = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);  
    }     
    private class ViewHolder {
        TextView applianceName;     
        Button cancel,edit; 
    } 
    public View getView(final int position, View convertView, ViewGroup parent) {      
        ViewHolder holder;  
        if (convertView == null) { 
            holder = new ViewHolder();  
                convertView    = vi.inflate(R.layout.rowappliance,  null); 
                holder.applianceName    = (TextView) convertView.findViewById(R.id.tvapplianceName);  
                holder.cancel  = (Button)   convertView.findViewById(R.id.bCancel); 
                holder.edit    = (Button)   convertView.findViewById(R.id.bEdit);        
            convertView.setTag(holder); 
        } else {
            holder = (ViewHolder) convertView.getTag();  
        }  

        Log.i("AddAppliance"," Appliance Name : " + appliance.get(position).getApplianceName());
        holder.applianceName.setText(appliance.get(position).getApplianceName());   

        //   Cancel button
        holder.cancel.setTag(position); 
        holder.cancel.setOnClickListener(new View.OnClickListener() {        
            public void onClick(View v) {                   
                try {
                    int pos = (Integer) v.getTag();                         
                    Log.i("ConfirmAdapter ","Order cancel @ position : " + pos);  
                    entry.deleteAppliance(roomName,appliance.get(pos).getApplianceName());
                    refreshAdapter();
                    } catch (Exception e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                    }  
                }       
            });    
        return convertView; 
        } 
} 
```

错误日志：

```
01-18 17:28:32.259: E/AndroidRuntime(28641): FATAL EXCEPTION: main
01-18 17:28:32.259: E/AndroidRuntime(28641): java.lang.NullPointerException
01-18 17:28:32.259: E/AndroidRuntime(28641): at com.example.homeauto.AddAppliance$ApplianceAdapter.getView(AddAppliance.java:136)
01-18 17:28:32.259: E/AndroidRuntime(28641): at android.widget.AbsListView.obtainView(AbsListView.java:2040)
01-18 17:28:32.259: E/AndroidRuntime(28641): at android.widget.ListView.makeAndAddView(ListView.java:1772)
01-18 17:28:32.259: E/AndroidRuntime(28641): at android.widget.ListView.fillDown(ListView.java:672)
01-18 17:28:32.259: E/AndroidRuntime(28641): at android.widget.ListView.fillFromTop(ListView.java:732)
01-18 17:28:32.259: E/AndroidRuntime(28641): at android.widget.ListView.layoutChildren(ListView.java:1611)
01-18 17:28:32.259: E/AndroidRuntime(28641): at android.widget.AbsListView.onLayout(AbsListView.java:1870)
01-18 17:28:32.259: E/AndroidRuntime(28641): at android.view.View.layout(View.java:11418)
01-18 17:28:32.259: E/AndroidRuntime(28641): at android.view.ViewGroup.layout(ViewGroup.java:4328)
01-18 17:28:32.259: E/AndroidRuntime(28641): at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1652)
01-18 17:28:32.259: E/AndroidRuntime(28641): at android.widget.LinearLayout.layoutHorizontal(LinearLayout.java:1641)
01-18 17:28:32.259: E/AndroidRuntime(28641): at android.widget.LinearLayout.onLayout(LinearLayout.java:1417)
01-18 17:28:32.259: E/AndroidRuntime(28641): at android.view.View.layout(View.java:11418)
01-18 17:28:32.259: E/AndroidRuntime(28641): at android.view.ViewGroup.layout(ViewGroup.java:4328)
01-18 17:28:32.259: E/AndroidRuntime(28641): at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1652)
01-18 17:28:32.259: E/AndroidRuntime(28641): at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1510)
01-18 17:28:32.259: E/AndroidRuntime(28641): at android.widget.LinearLayout.onLayout(LinearLayout.java:1415)
01-18 17:28:32.259: E/AndroidRuntime(28641): at android.view.View.layout(View.java:11418)
01-18 17:28:32.259: E/AndroidRuntime(28641): at android.view.ViewGroup.layout(ViewGroup.java:4328)
01-18 17:28:32.259: E/AndroidRuntime(28641): at android.widget.FrameLayout.onLayout(FrameLayout.java:443)
01-18 17:28:32.259: E/AndroidRuntime(28641): at android.view.View.layout(View.java:11418)
01-18 17:28:32.259: E/AndroidRuntime(28641): at android.view.ViewGroup.layout(ViewGroup.java:4328)
01-18 17:28:32.259: E/AndroidRuntime(28641): at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1652)
01-18 17:28:32.259: E/AndroidRuntime(28641): at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1510)
01-18 17:28:32.259: E/AndroidRuntime(28641): at android.widget.LinearLayout.onLayout(LinearLayout.java:1415)
01-18 17:28:32.259: E/AndroidRuntime(28641): at android.view.View.layout(View.java:11418)
01-18 17:28:32.259: E/AndroidRuntime(28641): at android.view.ViewGroup.layout(ViewGroup.java:4328)
01-18 17:28:32.259: E/AndroidRuntime(28641): at android.widget.FrameLayout.onLayout(FrameLayout.java:443)
01-18 17:28:32.259: E/AndroidRuntime(28641): at android.view.View.layout(View.java:11418)
01-18 17:28:32.259: E/AndroidRuntime(28641): at android.view.ViewGroup.layout(ViewGroup.java:4328)
01-18 17:28:32.259: E/AndroidRuntime(28641): at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1489)
01-18 17:28:32.259: E/AndroidRuntime(28641): at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2442)
01-18 17:28:32.259: E/AndroidRuntime(28641): at android.os.Handler.dispatchMessage(Handler.java:99)
01-18 17:28:32.259: E/AndroidRuntime(28641): at android.os.Looper.loop(Looper.java:137)
01-18 17:28:32.259: E/AndroidRuntime(28641): at android.app.ActivityThread.main(ActivityThread.java:4441)
01-18 17:28:32.259: E/AndroidRuntime(28641): at java.lang.reflect.Method.invokeNative(Native Method)
01-18 17:28:32.259: E/AndroidRuntime(28641): at java.lang.reflect.Method.invoke(Method.java:511)
01-18 17:28:32.259: E/AndroidRuntime(28641): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
01-18 17:28:32.259: E/AndroidRuntime(28641): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
01-18 17:28:32.259: E/AndroidRuntime(28641): at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-25T12:38:01.367

这可能是由于**findViewById**中的错误引用。您应该检查文本视图或布局视图的 id :-)

# jquery - jqplot：使xaxis标签旋转

> ID：14398633
> 
> 赞同：1
> 
> 时间：2013-01-18T12:07:41.470
> 
> 标签：jquery, jqplot

我试图让 xaxis 标签旋转到目前为止没有运气，这是我的 jsfiddle：http: [//jsfiddle.net/YX9wX/10/](http://jsfiddle.net/YX9wX/10/)

```
xaxis: {
    renderer: $.jqplot.CategoryAxisRenderer,
    ticks: jsonColsObj,
    labelRenderer: $.jqplot.CanvasAxisLabelRenderer,
    tickRenderer: $.jqplot.CanvasAxisTickRenderer,
    tickOptions: {
      angle: -30,
      fontFamily: 'Arial',
      fontSize: '9pt'
    }
  }, 
```

如您所见，“测试”标签水平放置而不是角度

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:06:18.777

你错过了这个插件参考：

```
jqplot.canvasAxisTickRenderer.js 
```

[http://jsfiddle.net/pabloker/YX9wX/12/](http://jsfiddle.net/pabloker/YX9wX/12/)

# ios - 处理视频文件时切换到后台时 GPUImage 崩溃

> ID：14398646
> 
> 赞同：1
> 
> 时间：2013-01-18T12:08:19.817
> 
> 标签：ios, objective-c, gpuimage

我`GPUImage`在切换到后台时遇到了一些问题。

在我的应用程序中，我不使用`GPUImage`类捕获视频。用户从卷中选择一个视频，然后我的应用程序应用 3 个 GPUImage 过滤器。当用户在视频处理过程中将应用程序发送到后台时，就会出现问题。

我知道当应用程序在后台时我无法访问 GPU，所以在我的`applicationWillResignActive`: 我调用`GPUImageMovie`and`GPUImageMovieWriter endProcessing`方法。问题是，即使我调用了这个方法，我仍然有`gpus_ReturnNotêrmittedKillClient`错误。

有想法该怎么解决这个吗？

提前致谢！

# internet-explorer - DotNetNuke 导航菜单锚定目标=_top

> ID：14398648
> 
> 赞同：0
> 
> 时间：2013-01-18T12:08:35.173
> 
> 标签：internet-explorer, dotnetnuke

如何为 dotnet nuke 网站的导航菜单中的所有菜单项提供 target=_top？或者如何从我的页面提供代码以确保所有锚点都将在顶部框架中打开。我以前使用过，它适用于 Firefox 和 google chrome，但不适用于 Internet Explorer。我需要它在 Internet Explorer 上工作！

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T05:19:50.227

如果您使用的是 DarkKnight 皮肤，您可以修改 DDRMenu 模板，您可能会在 /portals/_default/skins/DarkKnight 文件夹中找到它们，然后是 dnnmega 和 dnnstandard 文件夹，然后那里有一个您可以自定义的 XSLT 文件。

对于 DNNMega 菜单，您会发现

```
<a href="{@url}"> 
```

您可以在其中修改和添加 target="_top"

另一种方法可能是让 jquery 通过并在页面加载时执行此操作，尽管您使用的 jquery 会因您在皮肤中使用的菜单而有很大差异。

# jsp - 如何使用 taglib URI 查找 JAR 名称

> ID：14398649
> 
> 赞同：1
> 
> 时间：2013-01-18T12:08:36.517
> 
> 标签：jsp, jar, oracle-adf, taglib

我的 JSP 上有 URI 名称，我需要找到它在哪个 jar 中使用，例如在我的 JSP 页面上我有以下 URI

```
<%@ taglib uri="http://xmlns.oracle.com/adf/faces/rich" prefix="af"%> 
```

我需要找出它所指的 jar 我几乎执行了所有类型的搜索操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T13:07:11.480

安装[WinRAR](http://www.win-rar.com/)。它能够在任意文件夹中搜索多个压缩文件。打开 WinRAR，导航到`/lib`所有 JAR 所在的文件夹，然后按 F3。选择在所有文件中搜索并提供搜索关键字`http://xmlns.oracle.com/adf/faces/rich`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T12:11:59.967

为此，您必须搜索类路径中的所有 JAR 文件。在每个 JAR 中，`.tld`在`META-INF`目录中查找包含`uri`您要查找的文件的文件。

换句话说：在类路径的所有 JAR 中查找`.tld`包含 string的文件。`http://xmlns.oracle.com/adf/faces/rich`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T13:53:19.260

如果您使用的是 Tomcat，请尝试

```
<%=tldLocationsCache.getLocation("http://xmlns.oracle.com/adf/faces/rich")
.getJarResource().getJarFile().getName() %> 
```

# java - Image Servlet Image 返回为空

> ID：14398650
> 
> 赞同：1
> 
> 时间：2013-01-18T12:08:37.980
> 
> 标签：java, sql, image, oracle, servlets

嗨，我已尝试遵循此处找到的这个非常有用的 tut：

[http://balusc.blogspot.co.uk/2007/04/imageservlet.html](http://balusc.blogspot.co.uk/2007/04/imageservlet.html)

我正在按照教程尝试创建我的图像 servlet，它从数据库中检索图像并将其显示在我的 jsp 页面上的用户。据我所知，代码看起来不错，但控制台向我显示 500 内部错误，并且我的服务器控制台指示我的 Image 变量在此处为空：

```
Image image = dataManager.getPhotos(homeId); 
```

以下是我的完整代码：

```
@WebServlet(name = "ImageServlet", urlPatterns = {"/Image"})
public class ImageServlet extends HttpServlet {

private static final int DEFAULT_BUFFER_SIZE = 10240; // 10KB.
private static DatabaseConnector dataManager;

@Override
protected void doGet(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {

    // Get ID from request.
    String homeId = request.getParameter("id");

    // Check if ID is supplied to the request.
    if (homeId == null) {
        // Do your thing if the ID is not supplied to the request.
        // Throw an exception, or send 404, or show default/warning image, or just ignore it.
        response.sendError(HttpServletResponse.SC_NOT_FOUND); // 404.
        return;
    }
    try {
        // Lookup Image by ImageId in database.
        // Do your "SELECT * FROM Image WHERE ImageID" thing.
        Image image = dataManager.getPhotos(homeId);

        // Check if image is actually retrieved from database.
        if (image == null) {
            // Do your thing if the image does not exist in database.
            // Throw an exception, or send 404, or show default/warning image, or just ignore it.
            response.sendError(HttpServletResponse.SC_NOT_FOUND); // 404.
            return;
        }

        // Init servlet response.
        response.reset();
        response.setBufferSize(DEFAULT_BUFFER_SIZE);
        response.setContentType("image/png");
        response.setHeader("Content-Length", String.valueOf(image.getLength()));
        response.setHeader("Content-Disposition", "inline; filename=\"" + image.getHomeID() + "\"");

        // Prepare streams.
        BufferedInputStream input = null;
        BufferedOutputStream output = null;

        try {
            // Open streams.
            input = new BufferedInputStream(image.getContent(), DEFAULT_BUFFER_SIZE);
            output = new BufferedOutputStream(response.getOutputStream(), DEFAULT_BUFFER_SIZE);

            // Write file contents to response.
            byte[] buffer = new byte[DEFAULT_BUFFER_SIZE];
            int length;
            while ((length = input.read(buffer)) > 0) {
                output.write(buffer, 0, length);
            }
        } finally {
            // Gently close streams.
            close(output);
            close(input);
        }

    } catch (IllegalArgumentException ex) {
        Logger.getLogger(ImageServlet.class.getName()).log(Level.SEVERE, null, ex);
    } catch (SQLException ex) {
        Logger.getLogger(ImageServlet.class.getName()).log(Level.SEVERE, null, ex);
    } catch (ClassNotFoundException ex) {
        Logger.getLogger(ImageServlet.class.getName()).log(Level.SEVERE, null, ex);
    }
}

private static void close(Closeable resource) {
    if (resource != null) {
        try {
            resource.close();
        } catch (IOException e) {
            // Do your thing with the exception. Print it, log it or mail it.
            e.printStackTrace();
        }
    }
} 
```

下面的我的数据库连接器处理并检索以下数据：

```
 public Image getPhotos(String homeID) throws
        IllegalArgumentException, SQLException, ClassNotFoundException {

    createConnection();

    Image img = new Image();

    ResultSet rs = null;
    PreparedStatement preparedStatement = null;

    String strQuery = "SELECT * "
            + "FROM home_photo "
            + "WHERE home_photo.home_id = ?";

    try {
        preparedStatement = conn.prepareStatement(strQuery);
        preparedStatement.setString(1, homeID);
        rs = preparedStatement.executeQuery();

        while (rs.next()) {
            img.setHomeID(rs.getInt("home_id"));
            img.setPhotoID(rs.getInt("photo_id"));
            img.setContent(rs.getBinaryStream("photo"));
            img.setDescription(rs.getString("description"));
            img.setLength(rs.getInt("length"));
            img.setContentType(rs.getString("type"));
        }

    } catch (SQLException e) {
        throw new SQLException(e);
    }

    closeConnection();
    return img;
} 
```

其中我看不到它会在哪里返回 img 和 null？

帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T12:10:45.083

问题和代码表明它*实际上*是. 代码的编写方式是，如果曾经是，那么它只会返回 404，而不是 500 和.`dataManager``null``image``null``NullPointerException`

您需要确保`dataManager`不是`null`，例如通过在方法中实例化它`init()`，或者如果它是 EJB，则将其注入为`@EJB`.

* * *

**与具体问题**无关**`DatabaseConnector`，作为`static`变量并将 JDBC`Connection`声明为实例变量也不是一个好兆头。此代码不是线程安全的。从这里开始学习如何编写正确的 JDBC 代码：[在多线程系统中使用静态 java.sql.Connection 实例是否安全？](https://stackoverflow.com/questions/9428573/is-it-safe-to-use-a-static-java-sql-connection-instance-in-a-multithreaded-syste)在您找到图像 servlet 的同一博客上，您还可以找到基本的[JDBC DAO 教程](http://balusc.blogspot.com/2008/07/dao-tutorial-data-layer.html)。**

# ios - 格式化 iso-8601 日期字符串

> ID：14398651
> 
> 赞同：1
> 
> 时间：2013-01-18T12:08:41.553
> 
> 标签：ios, facebook-graph-api

我从我的 ios 应用程序中的几个 facebook 粉丝页面接收事件，并且响应包含一个字段 start_time，它采用 ISO-8601 格式。但是，我注意到对于某些页面，我在这个字符串中得到了偏移量，但对于一些我没有。它们可能看起来像三者中的任何一个，2013-01-13T11:00:00、2013-01-25T21:00:00+0530 或只是日期 2013-02-03。如何检测格式并将其格式化为具有用户时区日期和时间的更易读的格式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T12:50:47.687

您可以检查字符串中的“T”或“+”，因为您肯定知道这些是仅有的 3 种可能性：

```
NSString *dateString = @"2013-01-13T11:00:00";

if (([dateString rangeOfString:@"T"].location != NSNotFound) && ([dateString rangeOfString:@"+"].location != NSNotFound))  {

    NSLog(@"found T and + in dateString: %@", dateString);
    //set date format accordingly...

} else if (([dateString rangeOfString:@"T"].location != NSNotFound) && ([dateString rangeOfString:@"+"].location == NSNotFound)) {

    NSLog(@"only found T in dateString: %@", dateString);
    //set date format accordingly...

} else {

    NSLog(@"didn't find T or + in dateString: %@", dateString);
    //set date format accordingly...
} 
```

# excel - VBA Excel-如何使用 MS Excel 关闭中的取消按钮？

> ID：14398652
> 
> 赞同：1
> 
> 时间：2013-01-18T12:08:44.123
> 
> 标签：excel, events, vba, messagebox

我正在运行一个宏，`Private Sub Workbook_BeforeClose(Cancel As Boolean)` 但每当用户单击“**取消**”按钮时宏不应该运行。

* * *

我一直遵循代码行

```
Private Sub Workbook_BeforeClose(Cancel As Boolean)
If Cancel = True Then
    MsgBox "You clicked on Cancel"
ElseIf Cancel = False Then
    Call SDA
End If 
```

End Sub
但是，每当我按下**取消**按钮时，它都不会向我显示任何 MessageBox。任何帮助将不胜感激。![在此处输入图像描述](../Images/a49c260dd4f95900a61dbbf57194c676.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T12:13:39.930

请试试这个：

```
Option Explicit

Private Sub Workbook_BeforeClose(Cancel As Boolean)
Dim Msg As String
Dim ireply As Integer
    If Not Me.Saved Then
        Msg = "Do you want to Save this book? "
        ireply = MsgBox(Msg, vbQuestion + vbYesNoCancel)
        Select Case ireply
            Case vbYes
                Me.Save
                Call SDA 
            Case vbNo
                Me.Saved = True
            Case vbCancel
                Cancel = True
                MsgBox "Cancelling...workbook close event!"
                Exit Sub
          End Select
    End If        
End Sub 
```

*   输出对话框：

![在此处输入图像描述](../Images/b757181c40f2b6fdb5c0fa5ff7b4651c.png)

消息框取消事件包装的通常结构如下：

```
'--Display MessageBox
    Dim intMsg as integer
    intMsg = MsgBox(strPrompt, vbYesNo, strTitle) 
    '--Check pressed button
    If iRet = vbNo Then
        MsgBox "NO!"
    Else
        MsgBox "Yes!"
    End If 
```

# html - 最好不要为不同页面上的相同内容更改 html 标记？

> ID：14398653
> 
> 赞同：1
> 
> 时间：2013-01-18T12:08:52.123
> 
> 标签：html, accessibility

我正在使用部分标签对论坛页面上的主题和回复进行分组。如果我需要在其他文章页面上加载主题及其回复，我将 div 标签用于同一块并将主题标题从 h1 更改为 h2。虽然它是有效的。但是，对于辅助技术，这会让导航有点混乱吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T12:15:33.097

假设您所谈论的辅助技术主要涉及屏幕阅读器，那么了解您的页面的可访问性的最佳方法是自己下载并测试它。我曾经这样做的免费屏幕阅读器称为 NVDA，但还有更多。

通常，当页面背后有逻辑结构时，屏幕阅读器效果最好。如果您要显示多篇文章，请确保每篇文章都位于页面上类似的层次结构位置，并且每篇文章本身在结构上与其他文章相似。使用 HTML5 语义标签（如`article`,`aside`等）可能会有所帮助，但不是必需的。屏幕阅读器和其他辅助技术的出现时间比这些标签的存在时间要长得多。如果可能的话，它们当然很好用，但还有其他更重要的方法可以让尽可能多的受众访问您的页面。

另一件好事是对标题使用标题标签，并按顺序使用它们。屏幕阅读器通常为用户提供从一个标题跳到另一个标题的选项，以便获得页面上内容的摘要。您还可以在页面顶部或在视觉上放置标题可能不合适的部分中包含视觉上不可见的链接（通过使用 CSS 将它们放置在远离页面边缘的位置）。这些内容将由屏幕阅读器在上下文中阅读，而您的非视障用户不会看到它们。

如果您担心可访问性，更清楚地了解您的页面的可访问性的好方法是遵循 WCAG（Web 内容可访问性指南）标准建议。WCAG 由 W3C 管理，具有不同级别的可访问性，您在开发内容时可以考虑尊重这些可访问性。W3C 有一个验证器列表，可以在[此处](http://www.w3.org/WAI/RC/tools/complete)找到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T13:23:05.950

要从评论中回答您的问题：

> 把一个题目读成h2，点击它，然后进入论坛页面，这个题目变成了h1，听起来怎么样？

这不应该让大多数人感到困惑，特别是如果你一直这样做的话。我假设您正在制作一个类似新闻的网站。

上面 Levi 提到`article`了标签。如果您每页有多个故事，我建议您使用它们。`div`标签大致是 HTML 世界的垃圾箱，只有在没有其他可用时才应该使用它。`Article`标签既为您的代码提供了更好的语法价值，而且它们还有另一个功能，称为角色。角色允许使用屏幕阅读器的人在页面中跳转，就像使用标题标签一样。

# string - postgres case比较字符串到字符串

> ID：14398655
> 
> 赞同：0
> 
> 时间：2013-01-18T12:09:05.963
> 
> 标签：string, postgresql, select

我有一个带有多个子选择的选择。

我想做一个案例语句，将字符串与字符串进行比较。例如，从 ireport 我得到一个数据库模式作为参数。在一个模式的情况下，选择一个，在另一个模式的情况下，另一个选择

```
 select 
        (select a from b) as one,
        (select case "msp." = "msp" THEN select bla bla bal
       else select bla bla) as two 
```

我猜postgres不支持这个。

我试着把所有的东西都喜欢

```
 select 
        (select a from b) as one,
        (select case par = "msp" THEN select bla bla bal
       else select bla bla) as two
  from
   (select "msp." as par) 
```

但是（选择 "msp." as par ）也不起作用。就像 SELECT 1+2 结果一样。我试过做类似的事情。有什么建议么？？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T12:41:00.187

如果您总是将字符串与带有 . 附加然后最简单的事情就是附加 . 比较时。例如

```
'foo.' = 'foo' || '.' 
```

# android - 两个独立的通知

> ID：14398656
> 
> 赞同：1
> 
> 时间：2013-01-18T12:09:09.620
> 
> 标签：android

我有一个从广播中触发通知的警报接收器。完美运行。现在我添加了另一个通知，我喜欢单独有 2 个通知。开始第一个通知，稍后开始第二个通知，第二个通知取消第一个通知，所以我只看到第二个。我需要在通知栏上有 2 个通知。还删除“标志取消”不运行。

我的代码（第二次通知）：

```
String ns2 = Context.NOTIFICATION_SERVICE;
            NotificationManager mNotificationManager2 = (NotificationManager) context.getSystemService(ns2);

            int icon = R.drawable.ic_launcherlight;
            CharSequence tickerText = not1[x];
            long when = System.currentTimeMillis();

            Notification notification = new Notification(icon, tickerText, when);

            CharSequence contentTitle = "Casual";
            CharSequence contentText = not1[x];

            Intent notificationIntent = new Intent("com.example.myapp", null, context, NotifyCasual.class);
            notificationIntent.putExtra("notify", not1[x]);
            PendingIntent contentIntent = PendingIntent.getActivity(context, 2, notificationIntent,PendingIntent.FLAG_CANCEL_CURRENT);

            notification.setLatestEventInfo(context, contentTitle, contentText, contentIntent);

            SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(context);

            String Sound = prefs.getString("sound", "");
notification.defaults |= Notification.DEFAULT_VIBRATE;
            notification.defaults |= Notification.FLAG_AUTO_CANCEL;
            notification.flags |= Notification.FLAG_AUTO_CANCEL | Notification.FLAG_SHOW_LIGHTS;

            final int HELLO2 = 1;

            mNotificationManager2.notify(HELLO2, notification); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T12:22:16.607

你必须这样做。当您创建通知时，请按照此操作。

第一次通知：

```
mNotificationManager.notify(1, notifyDetails); 
```

第二次通知：

```
mNotificationManager.notify(2, notifyDetails); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T12:20:39.390

为了每次都必须为 PendingIntent 传递不同的 id 时获得新通知，

所以你必须创建一个动态id

```
int id = 0; // declare globally and save the id.
PendingIntent contentIntent = PendingIntent.getActivity(context, id,
                       notificationIntent,PendingIntent.FLAG_CANCEL_CURRENT);
id = id + 1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T12:16:17.560

使用 setData 使您的每个通知意图都独一无二。我使用 when=Calendar.getInstance().getTimeInMillis()

试试下面的代码

```
 /*create intent for show notification details when user clicks notification*/
    Intent intent =new Intent(getApplicationContext(), NotificationDetailsActivity.class);
    intent.putExtra(NOTIFICATION_DATA, notificationData);

    /*create unique this intent from  other intent using setData */
    intent.setData(Uri.parse("content://"+when));
    /*create new task for each notification with pending intent so we set Intent.FLAG_ACTIVITY_NEW_TASK */
    PendingIntent pendingIntent = PendingIntent.getActivity(getApplicationContext(), 0, intent, Intent.FLAG_ACTIVITY_NEW_TASK);

    /*get the system service that manage notification NotificationManager*/
    NotificationManager notificationManager =(NotificationManager) getApplicationContext().getSystemService(Context.NOTIFICATION_SERVICE); 

    /*build the notification*/
    NotificationCompat.Builder notificationBuilder = new NotificationCompat.Builder(
            getApplicationContext())
            .setWhen(when)
            .setContentText(notificationContent)
            .setContentTitle(notificationTitle)
            .setSmallIcon(smalIcon)
            .setAutoCancel(true)
            .setTicker(notificationTitle)
            .setLargeIcon(largeIcon)
            .setDefaults(Notification.DEFAULT_LIGHTS| Notification.DEFAULT_VIBRATE| Notification.DEFAULT_SOUND)
            .setContentIntent(pendingIntent);

    /*Create notification with builder*/
    Notification notification=notificationBuilder.build();

    /*sending notification to system.Here we use unique id (when)for making different each notification
     * if we use same id,then first notification replace by the last notification*/
    notificationManager.notify((int) when, notification); 
```

# wpf - 从word文档中读取表格并显示

> ID：14398659
> 
> 赞同：1
> 
> 时间：2013-01-18T12:09:20.127
> 
> 标签：wpf, ms-word, interop

我需要从 Word 文档中读取表格并将它们显示在我的 WPF 应用程序中。最好的方法是什么？

我`Word Interop`用来阅读Word文件。我可以使用该`Word.Document.Tables`集合从 Word 文件中获取表格。但我无法找到如何在我的 WPF 应用程序中显示这些表。

# java - 如何捕获从 Jasper 报告图像 servlet 引发的异常

> ID：14398665
> 
> 赞同：0
> 
> 时间：2013-01-18T12:09:43.667
> 
> 标签：java, security, exception-handling, jasper-reports

我的 Web 应用程序使用 JASPERREPORTS 来编译和提供各种报告。报告中出现的所有图像均来自 ImageServlet `net.sf.jasperreports.j2ee.servlets.ImageServlet`。

```
<servlet>
    <servlet-name>ImageServlet</servlet-name>
    <servlet-class>net.sf.jasperreports.j2ee.servlets.ImageServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>ImageServlet</servlet-name>
    <url-pattern>/image</url-pattern>
</servlet-mapping> 
```

对图像的请求是这样的：

```
GET /watapp/image?rand=0.5039537955900038&image=px 
```

在我的应用程序的安全审计中，有人提出如果查询参数被更改，例如设置 `image=pxxx`会导致 500 内部服务器错误。所以我需要处理这个异常。

```
net.sf.jasperreports.engine.JRRuntimeException: Invalid image name: pxxx
        at net.sf.jasperreports.engine.export.JRHtmlExporter.getPrintElementIndex(JRHtmlExporter.java:2408)
        at net.sf.jasperreports.engine.export.JRHtmlExporter.getImage(JRHtmlExporter.java:695)
        at net.sf.jasperreports.j2ee.servlets.ImageServlet.service(ImageServlet.java:98)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at com.watapp.filters.login.ApplicationFilter.doFilter(ApplicationFilter.java:41)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:857)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
        at java.lang.Thread.run(Thread.java:662) 
```

我的问题是，如何处理这个异常？servlet 与 JASPER jar 一起提供，我无法控制 servlet 的代码。请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:05:01.363

创建您自己的 servlet 并修改 servlet-mapping for`/image`以指向它而不是 jasper servlet。

您的新 servlet 不必做任何工作，它可以简单地将请求传递给 jasper servlet，但它使您能够插入异常处理程序来捕获`JRRuntimeException`.

# sql - SqlDbType.VarChar 达到最大大小

> ID：14398666
> 
> 赞同：1
> 
> 时间：2013-01-18T12:09:48.323
> 
> 标签：sql, sql-server, sql-server-2008

在我的代码中，我将`string result`值传递给我的存储过程

```
try
{
using (SqlStoredProcedure sspObj = new SqlStoredProcedure("dbo.usp_CloseEvent", Connection, CommandType.StoredProcedure))
{
sspObj.AddParameterWithValue("@Close", SqlDbType.VarChar, 0, ParameterDirection.Input, result);
sspObj.ExecuteNonQuery();
sspObj.Dispose();
}
}
catch (Exception xObj)
{
Console.WriteLine("Error >> " + xObj.Message);
} 
```

默认`SqlDbType.VarChar`大小为 1 到 8000 个字符。我的问题是**如果我的`string`变量`result`大小超过 8000 个字符怎么办**

什么是解决方案？

我的存储过程看起来像这样

```
ALTER PROCEDURE [dbo].[usp_CloseEvent]
    @Close      VarChar(Max)
AS 
```

SqlStoredProcedure.cs

```
virtual public SqlParameter AddParameterWithValue(string parameterName,
            SqlDbType dbType,
            int size,
            ParameterDirection direction,
            object value) {

            SqlParameter p = this.AddParameter(parameterName, dbType, size, direction);

            if (value == null) {
                value = DBNull.Value;
            }

            p.Value = value;

            return p;
        } 
```

数据库是 SQL SERVER 2008

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T12:15:48.860

对于 a `VARCHAR(MAX)`，您需要在添加参数时传递 -1 作为大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T12:18:50.050

> 我的问题是：如果我的字符串变量结果的大小超过 8000 个字符怎么办？

将出现一条错误消息，指出输入数据将在字符串末尾被截断（截断意味着截断）。

> 什么是解决方案？

我认为首先您检查可以将多少个字符传递给存储过程并手动更改表列。

另一种方法是使用 SQL 命令更改列定义`Alter Table`。但我不推荐这种方式

# visual-studio-2010 - 在 WriteableBitmap DrawLine 方法中设置线条描边粗细

> ID：14398669
> 
> 赞同：4
> 
> 时间：2013-01-18T12:10:10.930
> 
> 标签：visual-studio-2010, silverlight, line, writeablebitmap

我正在使用 WriteableBitmap 来绘制线条

```
WriteableBitmap writeableBmp=new WriteableBitmap(500,500);
writeableBmp.DrawLineDDA(10, 20, 50, 70,myIntColor); 
```

但是在这里我没有任何方法来设置线条笔画粗细。我想设置线条描边粗细。请帮帮我，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:53:26.360

看一看，

[带粗细的抗锯齿线算法（在 WriteableBitmap 上）](https://stackoverflow.com/questions/9079133/anti-aliased-line-algorithm-with-thickness-on-writeablebitmap)

[http://writeablebitmapex.codeplex.com/](http://writeablebitmapex.codeplex.com/)

[http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.writeablebitmap(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.writeablebitmap%28v=vs.95%29.aspx)

# android - 使用 JNI 和 NDK 旋转位图

> ID：14398670
> 
> 赞同：12
> 
> 时间：2013-01-18T12:10:13.130
> 
> 标签：android, bitmap, android-ndk, java-native-interface, image-rotation

## 背景：

我已经决定，由于位图占用大量内存，很容易导致内存不足错误，我将把艰苦的、消耗内存的工作放在 C/C++ 代码上。

## 我用于旋转位图的步骤是：

1.  读取位图信息（宽度、高度）
2.  将位图像素存储到数组中。
3.  回收位图。
4.  创建一个相反大小的新位图。
5.  将像素放入新的位图中。
6.  释放像素并返回位图。

## 问题：

即使一切似乎运行没有任何错误，输出图像也不是原始图像的旋转。事实上，它完全毁了它。

旋转应该是逆时针方向，90 度。

## 我得到的示例（放大的屏幕截图）：

![在此处输入图像描述](../Images/eb2c98a043adbd0f97e8f5441f4349a3.png)

如您所见，不仅颜色变得更奇怪，而且尺寸与我设置的不匹配。这里真的很奇怪。

也许我没有正确读取/放置数据？

当然这只是一个例子。只要设备有足够的内存来保存它，该代码应该可以在任何位图上正常工作。另外，我可能想对位图进行其他操作，而不是旋转它。

## 我创建的代码：

Android.mk 文件：

```
LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)
LOCAL_MODULE    := JniTest
LOCAL_SRC_FILES := JniTest.cpp
LOCAL_LDLIBS := -llog
LOCAL_LDFLAGS += -ljnigraphics
include $(BUILD_SHARED_LIBRARY)
APP_OPTIM := debug
LOCAL_CFLAGS := -g 
```

cpp文件：

```
#include <jni.h>
#include <jni.h>
#include <android/log.h>
#include <stdio.h>
#include <android/bitmap.h>
#include <cstring>
#include <unistd.h>

#define  LOG_TAG    "DEBUG"
#define  LOGD(...)  __android_log_print(ANDROID_LOG_DEBUG,LOG_TAG,__VA_ARGS__)
#define  LOGE(...)  __android_log_print(ANDROID_LOG_ERROR,LOG_TAG,__VA_ARGS__)

extern "C"
  {
  JNIEXPORT jobject JNICALL Java_com_example_jnitest_MainActivity_rotateBitmapCcw90(JNIEnv * env, jobject obj, jobject bitmap);
  }

JNIEXPORT jobject JNICALL Java_com_example_jnitest_MainActivity_rotateBitmapCcw90(JNIEnv * env, jobject obj, jobject bitmap)
  {
  //
  //getting bitmap info:
  //
  LOGD("reading bitmap info...");
  AndroidBitmapInfo info;
  int ret;
  if ((ret = AndroidBitmap_getInfo(env, bitmap, &info)) < 0)
    {
    LOGE("AndroidBitmap_getInfo() failed ! error=%d", ret);
    return NULL;
    }
  LOGD("width:%d height:%d stride:%d", info.width, info.height, info.stride);
  if (info.format != ANDROID_BITMAP_FORMAT_RGBA_8888)
    {
    LOGE("Bitmap format is not RGBA_8888!");
    return NULL;
    }
  //
  //read pixels of bitmap into native memory :
  //
  LOGD("reading bitmap pixels...");
  void* bitmapPixels;
  if ((ret = AndroidBitmap_lockPixels(env, bitmap, &bitmapPixels)) < 0)
    {
    LOGE("AndroidBitmap_lockPixels() failed ! error=%d", ret);
    return NULL;
    }
  uint32_t* src = (uint32_t*) bitmapPixels;
  uint32_t* tempPixels = new uint32_t[info.height * info.width];
  int stride = info.stride;
  int pixelsCount = info.height * info.width;
  memcpy(tempPixels, src, sizeof(uint32_t) * pixelsCount);
  AndroidBitmap_unlockPixels(env, bitmap);
  //
  //recycle bitmap - using bitmap.recycle()
  //
  LOGD("recycling bitmap...");
  jclass bitmapCls = env->GetObjectClass(bitmap);
  jmethodID recycleFunction = env->GetMethodID(bitmapCls, "recycle", "()V");
  if (recycleFunction == 0)
    {
    LOGE("error recycling!");
    return NULL;
    }
  env->CallVoidMethod(bitmap, recycleFunction);
  //
  //creating a new bitmap to put the pixels into it - using Bitmap Bitmap.createBitmap (int width, int height, Bitmap.Config config) :
  //
  LOGD("creating new bitmap...");
  jmethodID createBitmapFunction = env->GetStaticMethodID(bitmapCls, "createBitmap", "(IILandroid/graphics/Bitmap$Config;)Landroid/graphics/Bitmap;");
  jstring configName = env->NewStringUTF("ARGB_8888");
  jclass bitmapConfigClass = env->FindClass("android/graphics/Bitmap$Config");
  jmethodID valueOfBitmapConfigFunction = env->GetStaticMethodID(bitmapConfigClass, "valueOf", "(Ljava/lang/String;)Landroid/graphics/Bitmap$Config;");
  jobject bitmapConfig = env->CallStaticObjectMethod(bitmapConfigClass, valueOfBitmapConfigFunction, configName);
  jobject newBitmap = env->CallStaticObjectMethod(bitmapCls, createBitmapFunction, info.height, info.width, bitmapConfig);
  //
  // putting the pixels into the new bitmap:
  //
  if ((ret = AndroidBitmap_lockPixels(env, newBitmap, &bitmapPixels)) < 0)
    {
    LOGE("AndroidBitmap_lockPixels() failed ! error=%d", ret);
    return NULL;
    }
  uint32_t* newBitmapPixels = (uint32_t*) bitmapPixels;
  int whereToPut = 0;    
  for (int x = info.width - 1; x >= 0; --x)
    for (int y = 0; y < info.height; ++y)
      {
      uint32_t pixel = tempPixels[info.width * y + x];
      newBitmapPixels[whereToPut++] = pixel;
      }
  AndroidBitmap_unlockPixels(env, newBitmap);
  //
  // freeing the native memory used to store the pixels
  //
  delete[] tempPixels;
  return newBitmap;
  } 
```

.java文件：

```
 static
    {
    System.loadLibrary("JniTest");
    }

  /**
   * rotates a bitmap by 90 degrees counter-clockwise . <br/>
   * notes:<br/>
   * -the input bitmap will be recycled and shouldn't be used anymore <br/>
   * -returns the rotated bitmap . <br/>
   * -could take some time , so do the operation in a new thread
   */
  public native Bitmap rotateBitmapCcw90(Bitmap bitmap);

...
  Bitmap rotatedImage=rotateBitmapCcw90(bitmapToRotate); 
```

* * *

编辑：得到答案后，我希望与大家分享这段代码和注释：

*   为了让它工作，我在代码中用“uint32_t”替换了“uint16_t”的每个实例（这是我询问的代码中的错误）。

*   输入和输出位图必须使用 8888 配置（即 ARGB ）

*   输入位图将在此过程中被回收。

*   该代码将图像逆时针旋转 90 度。当然，您可以根据自己的需要进行更改。

* * *

## 更好的解决方案

我在[**这里**](https://stackoverflow.com/questions/18250951/jni-bitmap-operations-for-helping-to-avoid-oom)发表了一篇具有此功能和其他功能的不错的帖子。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T12:48:13.237

由于您使用的是`ARGB_8888`格式，因此每个像素都是`uint32_t`not `uint16_t`。尝试更改您的旋转位图创建以`uint32_t`用于源和目标数组，它应该会更好。

# java - Java Matcher.find(int start) 在区域内不起作用

> ID：14398683
> 
> 赞同：2
> 
> 时间：2013-01-18T12:11:09.190
> 
> 标签：java, regex, replace, region, matcher

我正在尝试在 JTextArea 中的选择范围内进行匹配，并且我正在使用 Matcher.region() 来定义匹配的边界：

```
JTextComponent t;

Pattern p = Pattern.compile("string", Pattern.CASE_INSENSITIVE | Pattern.MULTILINE);
Matcher m = p.matcher(t.getText()).region(t.getSelectionStart(), t.getSelectionEnd());
m.useAnchoringBounds(false);

if(m.find()) {
  System.out.println("Found match from " + m.start() + " to " + m.end());
}
else {
  System.out.println("No match found");
} 
```

上述工作按预期工作，它将找到该区域内的第一个匹配项 - 如果未找到匹配项，则找不到匹配项。

但是，我正在尝试遍历区域内的匹配项（搜索和替换类型函数），如果我指定了区域内的 find() 起始位置，则它匹配区域外：

```
int cPos = m.regionStart();
if (m.find(cPos) || m.find(m.regionStart())) {
  System.out.println("Found match from " + m.start() + " to " + m.end());
  cPos = m.end();
}
else {
  System.out.println("No match found");
} 
```

如果我指定起始位置，这是一个错误还是我破坏了该区域 - 即使它包含在该区域内？

谢谢，克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T12:15:28.973

从[Javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#find%28int%29)：

`public boolean find(int start)`

> **重置**此匹配器，然后 [...]

（强调我的）

# javascript - 第三方页面上的 JavaScript 注入

> ID：14398685
> 
> 赞同：6
> 
> 时间：2013-01-18T12:11:17.563
> 
> 标签：javascript, subdomain

我最近偶然发现了一个名为[Overlay101](https://www.overlay101.com/)的网站，它允许您为其他网站创建游览。

我很感兴趣看到他们用来加载第三方网站进行编辑的技术。

当您键入网站地址时，它会作为 overlay101.com 网站的子域加载。

例如，如果我输入[`https://stackoverflow.com/questions/111102/how-do-javascript-closures-work`](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)- 它被加载为[`http://stackoverflow.com.www.overlay101.com/questions/111102/how-do-javascript-closures-work`](http://stackoverflow.com.www.overlay101.com/questions/111102/how-do-javascript-closures-work)

我想知道子域创建是如何实现的，我在注入 JavaScript 的页面的源代码中看到了。我也想知道这怎么可能。

最让我感兴趣的是 Stackoverflow.com 不允许在框架内加载页面 - 我想知道他们如何设法加载页面以便可以添加游览弹出窗口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T12:28:46.923

他们只是使用通配符 DNS 条目来使所有子域工作。然后他们使用`Host`标头获取原始域名并下载站点的 HTML 代码。由于他们在服务器端执行此操作，因此他们不需要任何框架等。

# rotation - DirectX 9 - 在正交视图中旋转时四边形变得拉伸

> ID：14398688
> 
> 赞同：1
> 
> 时间：2013-01-18T12:11:22.420
> 
> 标签：rotation, directx, sprite, orthographic

我正在编写一些代码来使用 DirectX 9 中的一个大顶点缓冲区作为纹理四边形来呈现精灵列表。当在正交视图中旋转和渲染时，这些带纹理的四边形会被拉伸，我遇到了问题。奇怪的是，当旋转 0 或 PI 弧度时，不会发生拉伸，而当旋转 1/2 PI 或 1 1/2 PI 弧度时，拉伸程度最高。

![在此处输入图像描述](../Images/d9ab47bb1654c8ecb94a96226005a6d7.png)

这似乎是合理的，这取决于视图或投影矩阵，或者是生成旋转矩阵时的问题，但是经过大量调整和测试后我无法找到任何解决方案。作为参考，使用的纹理为 32x32 像素。

这是我最初用来为所有精灵设置投影和视图矩阵的代码：

```
D3DXMATRIX projection;
D3DXMatrixOrthoOffCenterLH(&projection, -(float)ScreenWidth / 2.0f,
                                         (float)ScreenWidth / 2.0f,
                                         (float)ScreenHeight / 2.0f,
                                        -(float)ScreenHeight / 2.0f,
                                         1.0f, 1000.0f);

HR(mFX->SetMatrix(mProjectionHandle, &projection));

D3DXMATRIX view;
D3DXVECTOR3 pos(0.0f, 0.0f, -100.0f);
D3DXVECTOR3 up(0.0f, 1.0f, 0.0f);
D3DXVECTOR3 target(0.0f, 0.0f, 0.0f);
D3DXMatrixLookAtLH(&view, &pos, &target, &up);

HR(mFX->SetMatrix(mViewHandle, &view)); 
```

以及创建旋转矩阵的代码：

```
D3DXMatrixRotationZ(&_rotation,
                    (2.0f * D3DX_PI) - _spriteComponent.GetRotation()); 
```

最后是着色器代码：

```
outVS.col.a = gAlpha;

outVS.posH = mul(float4(posL, 1.0f), gWorld);
outVS.posH = mul(outVS.posH, gView);
outVS.posH = mul(outVS.posH, gProjection);
outVS.posH = mul(outVS.posH, gScaling);
outVS.posH = mul(outVS.posH, gRotation);
outVS.posH = mul(outVS.posH, gTranslation);

outVS.tex0 = tex0;

return outVS; 
```

在设置投影矩阵时，我也尝试使用 D3DXMatrixOrthoLH() 函数，并且出现同样的问题。任何想法可能导致这种奇怪的缩放？

# java - 使用 ObjectInputStream 时如何处理 StreamCorruptedException？

> ID：14398693
> 
> 赞同：0
> 
> 时间：2013-01-18T12:11:30.727
> 
> 标签：java

`我是java新手，在下面的代码中得到StreamCorruptedException......在这段代码中，我试图使用ObjectInputStream从一个文件中读取多个对象......我无法处理StreamCorruptedException......我的o / p得到的是文件 C098.txt 已经存在 产品 ID：- P001 描述：- 书价：- Rs.200 线程“main”中的异常 java.io.StreamCorruptedException：无效类型代码：AC at java.io.ObjectInputStream.readObject0(ObjectInputStream .java:1374) 在 java.io.ObjectInputStream.readObject(ObjectInputStream.java:369) 在 Utility.getProducts(Utility.java:57) 在 Utility.main(Utility.java:23)

```
CODE:
import java.io.*;
import java.util.*;
class Product implements Serializable{
    private static final long serialVersionUID = 1L;
    String productId;
    String desc;
    String price;
    public Product(String PId,String a_des,String a_price){
        productId=PId;
        desc=a_des;
        price=a_price;
    }
    public String toString(){
        return "Product ID:- "+productId+"\nDescription:- "+desc+"\nPrice:- "+price;
    }
}
class Utility{
    // Product objProduct;
    public static void main(String args[]) throws Exception{
        String cartId = "C098.txt";
        Product objProduct = new Product("P001","Book","Rs.200");
        addProductToCart(cartId,objProduct);
        getProducts(cartId);
        objProduct = new Product("P087","Laptop","Rs.45,500");
        addProductToCart("C098.txt",objProduct);
        getProducts(cartId);
    }
    public static void addProductToCart(String CId,Product p) throws Exception{
        try{
        boolean searchFile;
        File objFile = new File(CId);
        searchFile = objFile.exists();
        if(searchFile)
            System.out.println("File "+CId+" already exists");
        else{
            objFile.createNewFile();
            System.out.println("File "+CId+" did not exist. It is now created");
        }
        FileOutputStream objFOS = new FileOutputStream(objFile,true);
        ObjectOutputStream objO = new ObjectOutputStream(objFOS);
        objO.writeObject(p);
        objO.flush();
        objO.close();
        }catch(Exception e)
        {
            System.out.println("Exception Caught");
        }
    }
    public static void getProducts(String CId) throws Exception{

        Product objProduct1 = new Product("","","");
        File objFile1 = new File(CId);
        FileInputStream objFIS = new FileInputStream(objFile1);
        ObjectInputStream objI = new ObjectInputStream(objFIS);
        Object obj = null;
        try{
            while((obj=objI.readObject()) != null){
                if (obj instanceof Product) {
                    System.out.println(((Product)obj).toString());
                }
            }
        }catch (EOFException ex) { //This exception will be caught when EOF is reached
            System.out.println("End of file reached.");
        }finally {
            //Close the ObjectInputStream
            try{
                if (objI != null)
                    objI.close();
            }catch (IOException ex) {
                ex.printStackTrace();
            }
        }
    }
}` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T23:57:57.673

你不能“处理”它。你必须*阻止*它。它是由设计错误引起的，例如`ObjectOutputStreams`在单个 读取的流上使用两个`ObjectInputStream`，就像您在此处通过附加到文件或写入对象以外的数据而不是对称读取它所做的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T12:31:57.607

问题是由于标题问题，您正在附加到同一个文件，并且在返回第二个对象时由于标题问题而引发异常。尝试在不同的文件中写入对象，您可以摆脱问题。

SCE 当从对象流中读取的控制信息违反内部一致性检查时引发。尝试

```
    导入java.io.*；
    导入 java.util.*；
    类产品实现可序列化{
        私有静态最终长序列版本UID = 1L；
        字符串产品ID；
        字符串描述；
        字符串价格；
        公共产品（字符串 PId，字符串 a_des，字符串 a_price）{
            产品ID=PId；
            desc=a_des;
            价格=a_price;
        }
        公共字符串 toString(){
            return "产品 ID:- "+productId+"\n描述:- "+desc+"\n价格:- "+price;
        }
     // 产品 objProduct;
        公共静态 void main(String args[]) 抛出异常{
            字符串 cartId = "C0982.txt";
            产品 objProduct = new Product("P001","Book","Rs.200");
            addProductToCart(cartId,objProduct);
            获取产品（cartId）；
            产品 objProduct1 = new Product("P087","Laptop","Rs.45,500");
            addProductToCart("C0981.txt",objProduct1);
            getProducts("C0981.txt");
        }
        公共静态 void addProductToCart(String CId,Product p) 抛出异常{
            尝试{
            布尔搜索文件；
            文件 objFile = 新文件（CId）；
            searchFile = objFile.exists();
            如果（搜索文件）
                System.out.println("文件 "+CId+" 已经存在");
            别的{
                objFile.createNewFile();
                System.out.println("文件 "+CId+" 不存在，现在已创建");
            }
            FileOutputStream objFOS = new FileOutputStream(objFile,true);
            ObjectOutputStream objO = new ObjectOutputStream(objFOS);

 `objO.writeObject(p);
        objO.flush();
        objO.close();
        }catch(Exception e)
        {
            System.out.println("Exception Caught");
        }
    }
    public static void getProducts(String CId) throws Exception{

        Product objProduct1 = new Product("","","");
        File objFile1 = new File(CId);
        FileInputStream objFIS = new FileInputStream(objFile1);
        ObjectInputStream objI = new ObjectInputStream(objFIS);
        Object obj = null;
        try{
            while((obj=objI.readObject()) != null){
                if (obj instanceof Product) {
                    System.out.println(((Product)obj).toString());
                }
            }
        }catch (EOFException ex) { //This exception will be caught when EOF is reached
            System.out.println("End of file reached.");
        }finally {
            //Close the ObjectInputStream
            try{
                if (objI != null)
                    objI.close();
            }catch (IOException ex) {
                ex.printStackTrace();
            }
        }
    }
}
</pre>` 

```

# firefox - 为什么 html 5 音频标签在 FF 上不起作用？

> ID：14398696
> 
> 赞同：2
> 
> 时间：2013-01-18T12:11:34.507
> 
> 标签：firefox, mp3, html5-audio, ogg

我已经构建了一个 Web 应用程序，它使用 html5 音频标签播放一些歌曲。当我使用 FF(firefox) 时，我必须播放`ogg`文件，而在 IE 上我必须播放`mp3`文件。

问题是我刚刚将我的 webapp 移到了 godaddy 服务器上，而 FF 不再播放声音了。在 localhost FF 上播放声音，但不在 godaddy 上。Chrome 在 localhost 上播放声音，就像在 godaddy 上一样。

这是我使用的代码：

```
<audio id="ff01" src="/files/hello.ogg"></audio>
<audio id="ie01" src="/files/hello.mp3"></audio>
<button class="btn" onClick="document.getElementById('ff01').play()">FF</button>
<button class="btn" onClick="document.getElementById('ie01').play()">IE</button> 
```

你能告诉我为什么 Firefox 可以播放文件`localhost`，但不能播放`godaddy`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T17:00:18.193

`.htaccess`我通过在文件中添加以下内容来解决它

```
AddType audio/ogg .ogg
AddType audio/mp3 .mp3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T12:19:05.413

您应该指定 mime 类型并将每个音频文件作为`audio`标签的子级；试试这个：

```
<audio id="01">
  <source src="/files/hello.ogg" type="audio/ogg">
  <source src="/files/hello.mp3" type="audio/mpeg">
  Your browser does not support the audio tag.
</audio> 
```

# android - 如何根据谷歌地图android中的最佳路线显示多个地点路线

> ID：14398697
> 
> 赞同：1
> 
> 时间：2013-01-18T12:11:34.660
> 
> 标签：android, google-maps, google-maps-android-api-2

我想在android上显示多个纬度之间的路线。我可以显示两点之间的路线。但我想根据谷歌地图中的最佳路线路径显示多点路线。喜欢这个网站 [点击这里](http://findthebestroute.com/RouteFinder.html "最佳路线")。我正在使用 android 本机编程。

预先感谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T03:16:18.850

使用 Google Directions API 并使用航路点构建您的路线请求。来自 API 文档*“航点允许您计算通过其他位置的路线。”*

请参阅 - [在路线中使用航点](https://developers.google.com/maps/documentation/directions/#Waypoints)

# c# - 同时按下两个按钮时

> ID：14398699
> 
> 赞同：3
> 
> 时间：2013-01-18T12:11:39.840
> 
> 标签：c#

我有一个小问题。我有一个表格，这是我的登录表格。然后我还有另一个表单，就是我的添加用户表单。当我单击登录表单的登录按钮时，它需要检查 shift 和 control 键是否同时按住。Ff 他们两个都没有被按下，那么添加用户表单不应该打开。但如果它们都被按下并单击登录按钮，它应该显示表单。

我有的：

```
if (Control.ModifierKeys == (Keys.Control & Keys.Shift))
{
    //Show the form
} 
```

但这不起作用。

当我有：

```
if (Control.ModifierKeys == Keys.Shift)
{
    //Show the form
} 
```

然后它工作。

我怎样才能通过按下两个按钮、控制和换档来实现这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-18T12:13:00.780

试试`Keys.Control | Keys.Shift`。

* * *

这是一个标志枚举；每个值都由底层中的一个单独的位表示`int`。

`Keys.Control & Keys.Shift`导致零值 - 例如，如果`Control`is`0001`和`Shift`is `0010`，按位- `&`is `0000`。

`Control.ModifierKeys`当`0000`且仅当用户没有按住*任何*修饰键时才会出现，所以只有当用户没有按住任何东西时`==`才会导致。`true`

`Keys.Control | Keys.Shift`另一方面，会产生一个表示“这两个标志”的值-例如，如果`Control`是`0001`和`Shift`是`0010`，则按位-`|`是`0011`。

`Control.ModifierKeys`当`0011`且仅当用户同时按住`Ctrl`和`Shift`按住时才会出现，所以`==`只会`true`在这种情况下导致。

* * *

或者，您可以将其分解为

```
bool ctrlIsHeldDown  = (Control.ModifierKeys & Keys.Control) == Keys.Control;
bool shiftIsHeldDown = (Control.ModifierKeys & Keys.Shift)   == Keys.Shift;
if (CtrlIsHeldDown && shiftIsHeldDown)
{
    ...
} 
```

该`(value & x) == x`构造检查是否设置了单个标志`x`，然后是标准布尔逻辑。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T12:14:44.753

你可以这样做 ：

```
if (Control.ModifierKeys == (Keys.Control | Keys.Shift))
{
    //Show the form
} 
```

希望这有帮助。

# magento - Magento 模块在管理员中不可见

> ID：14398700
> 
> 赞同：-2
> 
> 时间：2013-01-18T12:11:53.410
> 
> 标签：magento

请在下面指导我，

Magento 核心模块在管理员上启用。

系统->配置->高级->高级。

我检查了数据库，状态已启用。我下载了原始源代码并上传了它。即使模块不可见。

它的状态仍然显示为假。

除了 core_config_data 之外，是否有任何状态更新？

在缓存文件中，它显示状态为假。

我已经清除了缓存，登录并注销了所有内容。没用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T14:10:15.143

你想看 Magento 核心模块？？？:-) 核心模块是您安装 Magento 的引擎，您看不到它！

# c# - 解析和分析几 GB 的数据

> ID：14398704
> 
> 赞同：0
> 
> 时间：2013-01-18T12:12:17.607
> 
> 标签：c#, .net, performance, memory, scalability

我正在寻找一种分析自定义日志文件的方法。

我现在已经使用 LINQ 和 C#.NET 实现了。它仅适用于最大 500MB 的日志文件。

日志文件的每一行都被制成一个看起来像的对象

```
public class Metrics
{
    public DateTime Date { get; set; }
    public string Metrics1 { get; set; }
    public string Metrics2 { get; set; }
                :
                :
    public string Metrics9 { get; set; }
} 
```

* * *

```
List<Metrics> MetricsList = new List<Metrics>(); 
```

* * *

MetricsList 已填充。在 MetricsList 上运行各种 LINQ 查询以提供有用的分析。据观察，一个 Metrics 对象需要 300 个字节。我在 500MB 的日志文件中有大约 400 万行，这使得仅 MetricsList 的大小就消耗了超过 1GB 的程序内存。

我的要求是解析和分析大小高达 2 GB 的文件，这看起来会消耗 4 GB 的内存。

使用 Windows、Microsoft 技术和任何开源库的任何更好的方法或替代方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:06:21.540

通常您不想将这样的文件存储在内存中（当然除非您有足够的内存），而是在解析文件时处理数据。我只需安装更多内存并将解决方案设置为 64 位可能...

但是，如果这不是一个选项，您总是可以稍微优化内存使用。.NET 将字符串存储为 char[] ，其中 char 基本上是 2 字节短。您可以通过使用 Encoding.UTF8.GetBytes 简单地将其存储为 char[] 而不是 byte[] 来轻松节省大量内存。

此外，在 64 位环境中，每个字符串或 byte[] 消耗 24 个字节（16 个用于对象本身，8 个用于指针）。如果你有很多小字符串，那可以加起来。除了将它们存储为字符串之外，您还可以存储单个 byte[] 并在 getter 中进行解析。

所以总结我的建议是：购买更多内存或在您阅读/需要时处理数据。

**[更新+1]**

刚刚注意到您使用了一个列表。随用随处理的最简单方法是将文件读取为 IEnumerable 并在其上使用 Linq。不要先把它放在一个列表中。例如：

```
public IEnumerable<Metric> ReadFile()
{
    string s;
    while ((s=myFileReader.ReadLine())!=null)
    {
        yield return Parse(s);
    }
}

int someAnalysis = ReadFile().Sum((a)=>(a.Metric1.Length)); // or whatever you do 
```

**[更新+2]**

哦，我还有一个技巧要给你。读取文件可能会影响性能，因为文件 IO 相对来说很糟糕。因此，除了使用上面的 IEnumeration 技巧，您还可以使用压缩流将所有数据存储在内存中 - 然后在处理期间使用它而不是文件。

对于那些想知道我是否认真对待这个奇怪的解决方案的人：这是构建搜索技术和数据库时经常使用的技术，仅仅是因为拥有更多（快速）内存意味着拥有更少（慢）磁盘 IO。此外，日志文件可能会很好地压缩。

因此，在内存流之上读取文件 && flatestream。然后以上面讨论的方式为 Linq 阅读它（再次，在 memorystream 之上的 flatestream）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T13:15:33.100

我使用 SQlite 完成了类似的任务。安装 System.Data.SQLite NuGet（可选：我也使用 Dapper NuGet 作为一个非常有效的微 ORM），然后你就有了一个非常好的工具来执行查询和生成你的报告。您可能不喜欢的唯一一件事是您必须编写 SQL 而不是 LINQ（虽然 SQLite 也有 LINQ；但我没有使用它）。

这样，内存消耗也会消失。

# oracle - Oracle APEX 是一个有效的选项吗？

> ID：14398708
> 
> 赞同：1
> 
> 时间：2013-01-18T12:12:34.563
> 
> 标签：oracle, oracle-apex

我们有一个 PHP/Symfony Web 应用程序，我们用它来手动启动 Oracle DB 上的一些程序。有时参数被传递给程序：作为自由文本框或通过动态填充的下拉列表（例如，SELECT DISTINCT name FROM mytable）。之前 webapp 做得更多也更复杂，但现在它实际上只是手动启动程序。（嗯，还有用户和权限管理：例如，用户 A 只能启动程序 A，用户 B 只能启动程序 B）。

现在的问题是，这个解决方案是否仍然是一个不错的选择，或者直接在 Oracle 服务器上切换到使用 Oracle APEX 的解决方案是否会更好。

所以在这里我有一些问题

*   有人知道 APEX 并使用过它吗？评论？你怎么看呢？
*   是不是基本上适合这样的任务？我们还需要考虑什么？什么都需要？
*   如果是，这样的解决方案需要多少努力（最多 20 个用户，最多 6 个类别中的 20 个程序）？
*   维护呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T15:58:24.280

你在这方面说它是开放的，我同意@Ben。
但是，您似乎正在寻找的东西看起来很容易在 Apex 中实现。在程序上创建的表单页面将自动生成所需的页面项和调用程序的进程。
如果您有包，您可以轻松地模仿这种行为，因为您可以创建所需的页面项目，以及将这些值传递给打包过程或函数的过程。
您需要的是在您的数据库上安装 apex 和一个侦听器（嵌入式 plsql 网关、独立的 apex 侦听器或其他一些 http 服务器）。
所需的努力不会太多。创建页面和项目并不是那么难，并且可以以声明的方式完成。如果您只知道 PLSQL，那么您仍然可以在 apex 中找到自己的方式，而不必首先担心 html 和/或 javascript。
如果您（至少现在）只需要一些调用过程/包的表单，那么您应该做的唯一维护就是在更改数据库中的过程调用时调整页面项目和进程。

如果您真的感兴趣，只需访问 apex.oracle.com 并请求工作空间。获取文档下的 2 天开发人员指南。这将至少让您了解如何以及什么，并且您会看到一些 apex 必须提供的东西。在您请求的工作区中还将有一个演示应用程序（产品），您可以查看它、打包的演示应用程序......您也可以访问自己的模式，可以通过 sql 浏览器访问。创建程序！然后创建一个新的应用程序/页面，并基于程序：看看你是否喜欢你所看到的。

# javascript - 从 textarea 发送值

> ID：14398712
> 
> 赞同：0
> 
> 时间：2013-01-18T12:12:52.320
> 
> 标签：javascript

你好我有以下脚本：http: [//jsfiddle.net/EFjcA/](http://jsfiddle.net/EFjcA/)

我想要我的功能：

```
var saveEdit = function(event2){
    var btn = event2.target,
        li  = btn.parentNode,
        p   = li.getElementsByClassName('paratext')[0],
        te  = p.parentNode;

    te.style.display="none";
    p.appendChild(te.value);
    p.style.display="block";
    btn.innerText = "Edit";
    btn.onclick = makeAreaEditable;
}; 
```

..从文本区域内保存值并在按下按钮 Ok 后显示它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T12:58:27.967

请换行

```
p.appendChild(te.value); 
```

进入

```
p.innerText = te.value;
li.appendChild(p); 
```

# caching - SCOPE=system 在 CentOS 上打开文件过多错误

> ID：14398721
> 
> 赞同：0
> 
> 时间：2013-01-18T12:13:36.017
> 
> 标签：caching, operating-system, centos, load-testing, resin

我在应用程序上运行负载测试时收到以下错误日志

```
errnoStr=Too many open files, errno=24, SCOPE=system. 
```

有人能解释一下这里的意思`SCOPE=system`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T20:09:48.503

由于该消息不是 Resin 错误消息，因此不清楚 SCOPE=system 的含义。

对于打开的文件，您需要查看 ulimit 并使用 Resin 的 /resin-admin 检查文件描述符计数。如果您使用的是 Resin 专业版，健康系统将跟踪打开的文件描述符。（查看 /resin-admin 中的“仪表”选项卡以获取图表。）

```
> ulimit -a 
...
open files   (-n) 1024 
```

对于负载测试，您需要有很多打开的文件，因为您想对大量网络连接施加压力，并且每个网络连接都使用一个文件描述符。

如果以 root 身份启动 Resin，Resin 会自动增加打开的文件。在 jvm-default.log 日志中，Resin 会告诉你它增加了多少。

```
[13-03-05 12:05:37.047] {main}   JNI: file, async keepalive (max=127744), socket 
```

否则，您可以在操作系统中手动设置它。（CentOS 使用 /etc/limits.conf。）

为获得最高性能，请确保您使用的是 Resin Professional。如果您正在评估，您可以获得评估许可证。此外，使用 Resin Pro 和负载测试，您应该查看 /resin-admin 图表和 /resin-admin 分析器以了解您的瓶颈是什么。

# d3.js - 拖动强制布局可防止其他 mouseup 侦听器

> ID：14398724
> 
> 赞同：3
> 
> 时间：2013-01-18T12:13:47.207
> 
> 标签：d3.js, mouseevent, drag, force-layout, mouseup

我想在 d3.js 强制布局中启用拖动。当拖动一个圆圈并释放鼠标按钮时，我想通过回调调用一个特定的函数，如下所示：

```
this.force = d3.layout.force()
    .nodes(this.nodes)
    .size([this.width, this.height]);

// enable dragging
this.circle
    .call(this.force.drag)
    .on("dragend", function() {
        console.log("You should see this, when releasing a circle.");
    })
    .on("mouseup.drag",function(d,i) {
        console.log("Or see this.");
    }); 
```

不幸的是，force.drag 处理程序从未完全触发/消耗该事件。那么如何在拖动结束时在 d3 强制布局中执行给定的回调函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T09:45:24.093

你不是在这里调用这个`"dragend"`事件。`this.force.drag`这也取决于您如何定义`this.force.drag`.

这应该适合你

```
myCustomDrag = d3.behavior.drag()
    .on("dragstart", function(d,i){
        //do something when drag has just started
    })
    .on("drag", function(d,i){
        //do something while dragging
    })
    .on("dragend", function(d,i){
        //do something just after drag has ended
    }); 
```

在上面的代码中，只需`call(myCustomDrag)`在您希望此拖动行为出现的元素（此处为圆圈）上使用。

# .net - 如何找到现有项目中使用的 .NET 版本？

> ID：14398727
> 
> 赞同：15
> 
> 时间：2013-01-18T12:13:59.587
> 
> 标签：.net, version

预计我将继续开发已多次易手的 C#/ASP.NET 项目，没有人确定使用的是哪个版本的 .NET。

有什么东西（可能是项目属性或其他地方的一个选项）告诉我项目使用哪个版本的 .NET？

**编辑 ：**

该项目托管在远程服务器（一个古老的服务器！）上，该服务器在 Windows Server 2003 上运行，并使用 Visual Studio 2005。我检查了 Web.config 文件，在 下`<system.web>`，我发现`<compilation debug="true">`但没有条目`targetFramework`！
此条目的存在是否也取决于 .NET 版本？这是 2.x 或更早版本吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-18T12:19:27.473

项目文件中的标签是`<TargetFrameworkVersion>v4.0</TargetFrameworkVersion>`.

或者在项目属性下： ![在此处输入图像描述](../Images/ed6e119bf97b1ebbcef7fabc6d84e080.png)

如果是 Web 应用，可以在 Web.config 下找到：`<compilation targetFramework="4.0">`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T12:18:02.117

检查您的 Web 配置文件。

在webconfig下`<system.web>`

```
<httpRuntime targetFramework="4.5" />
<compilation debug="false" targetFramework="4.5" /> 
```

这个 targetFramework 是版本

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-04T09:45:51.010

您可以借助`<TargetFrameworkVersion>`.csproj 文件中的标记检查项目的 .NET 版本。

您可以在此处打开 .csproj 表单：右键单击项目 => 在文件资源管理器中打开文件夹 => 在文本编辑器中打开 .csproj。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T12:16:52.563

您可以在项目属性中找到它或在运行时使用`Environment.Version()`.

# html - HTML5 画布上的特殊符号

> ID：14398729
> 
> 赞同：3
> 
> 时间：2013-01-18T12:14:06.340
> 
> 标签：html, canvas, ascii

我想在我的 HTML5 画布上绘制特殊的 ASCII 符号，`&pound;`但它们实际上显示为字母本身而不是磅符号。我该怎么做才能使这些正确显示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T12:16:06.043

`&pound;`是一个 HTML 实体，它在基于 XML/SGML 的标记语言中没有任何意义。

但是您不需要它，因为 Javascript 可以让您管理 Unicode。只需使用文字

```
var pound = '£'; 
```

并确保以 UTF-8 格式保存和提供您的 javascript 文件。

或者，如果您不能使用 UTF-8，请将其转义为

```
var pound = "\u00A3"; 
```

# android - 使用幻灯片删除项目列表视图 - 像 Gmail

> ID：14398733
> 
> 赞同：41
> 
> 时间：2013-01-18T12:14:09.777
> 
> 标签：android, android-listview

我正在开发一个列表视图中带有商店列表的应用程序。我需要当我`listview`向右（或向左）滑动项目时，该项目应该从列表视图中删除。

我有我的列表视图，只需要该功能即可。

提前致谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-10T00:20:56.440

这就是我实现这种效果的方式。我们有一个 ListView `lvSimple`，我们将 onTouchListener 添加到我们的`lvSimple`. 这是我的工作代码。

```
float historicX = Float.NaN, historicY = Float.NaN;
static final int DELTA = 50;
enum Direction {LEFT, RIGHT;}
...
ListView lvSimple = (ListView) findViewById(R.id.linLayout);
...
lvSimple.setOnTouchListener(new OnTouchListener() {
    @Override
    public boolean onTouch(View v, MotionEvent event) {

        switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN:
                historicX = event.getX();
                historicY = event.getY();
                break;

            case MotionEvent.ACTION_UP:
                if (event.getX() - historicX < -DELTA) {
                    FunctionDeleteRowWhenSlidingLeft();
                    return true;
                }
                else if (event.getX() - historicX > DELTA) {
                    FunctionDeleteRowWhenSlidingRight();
                    return true;
                }
                break;

            default:
                return false;
        }
        return false;
    }
}); 
```

`FunctionDeleteRowWhenSlidingLeft()`当我们向左滑动时调用函数， `FunctionDeleteRowWhenSlidingRight()`- 分别向右滑动。在此功能中，您需要粘贴动画代码。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-07-24T14:55:47.827

[Android-Developer 的回答指向](https://stackoverflow.com/a/14398828/339725)[gist.github.com](https://gist.github.com/romannurik/2980593)中 Roman Nurik 的代码。此代码已过时。他在他的开源项目[Dash Clock](https://code.google.com/p/dashclock/)中使用这个 Swipe to Dismiss listener 。

在使用 Gist.github.com 中的代码之前，您应该了解一些事情。

1.  gist.Github 中的过时代码对触摸非常敏感。如果您继续点击 ListView 中的项目，它将被删除。在更新的代码中，他修复了投掷灵敏度。
2.  如果您在 ListView 中声明了分隔符，则此侦听器无法正常工作。如果需要分隔符，请在 ListItem 布局中声明它们。
3.  此代码仍处于**测试阶段**。买者自负。

**所以我建议使用更新的代码。[您可以在此处](https://code.google.com/p/dashclock/source/browse/main/src/main/java/com/google/android/apps/dashclock/ui/SwipeDismissListViewTouchListener.java)找到更新的源代码。**

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-08-02T17:19:58.007

~~您应该考虑的另一个选择是使用 Tim Roes 的[EnhancedListView](https://github.com/timroes/EnhancedListView)库。~~ **[更新 - 2015 年 8 月 1 日]**随着 RecycleView 的引入，[该](https://developer.android.com/reference/android/support/v7/widget/RecyclerView.html)库已被弃用。

前面提到的 Roman Nurik 的 SwipeToDismiss 侦听器需要 API 级别 12 或更高。Jake Wharton 移植了此代码以支持[SwipeToDismissNOA](https://github.com/JakeWharton/SwipeToDismissNOA)中的所有 API 级别。

Tim Roes 进一步扩展了这个库以支持**Undo**功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-10T02:05:45.833

我用macloving写的东西做了一个回答。目前它正在起作用，但只有当你所有的孩子都具有相同的高度时它才起作用。

```
listView.setOnTouchListener(new View.OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            // TODO Auto-generated method stub
            switch (event.getAction()) {
                case MotionEvent.ACTION_DOWN:
                    historicX = event.getX();
                    historicY = event.getY();
                    return false;

                case MotionEvent.ACTION_UP:
                    if (listView.getChildAt(0) != null) {
                        int heightOfEachItem = haveListView.getChildAt(0).getHeight();
                        int heightOfFirstItem = -haveListView.getChildAt(0).getTop() + haveListView.getFirstVisiblePosition()*heightOfEachItem;
                        //IF YOU HAVE CHILDS IN LIST VIEW YOU START COUNTING
                        //listView.getChildAt(0).getTop() will see top of child showed in screen
                        //Dividing by height of view, you get how many views are not in the screen
                        //It needs to be Math.ceil in this case because it sometimes only shows part of last view
                        final int firstPosition = (int) Math.ceil(heightOfFirstItem / heightOfEachItem); // This is the same as child #0

                        //Here you get your List position, use historic Y to get where the user went first
                        final int wantedPosition = (int) Math.floor((historicY - haveListView.getChildAt(0).getTop()) / heightOfEachItem) + firstPosition;
                        //Here you get the actually position in the screen
                        final int wantedChild = wantedPosition - firstPosition;
                        //Depending on delta, go right or left
                        if (event.getX() - historicX < -DELTA) {
                            //If something went wrong, we stop it now
                            if (wantedChild < 0 || wantedChild >= List.size()|| wantedChild >= listView.getChildCount()) {

                                return true;
                            }
                            //Start animation with 500 miliseconds of time
                            listView.getChildAt(wantedChild).startAnimation(outToLeftAnimation(500));
                            //after 500 miliseconds remove from List the item and update the adapter.
                            new java.util.Timer().schedule(
                                    new java.util.TimerTask() {
                                        @Override
                                        public void run() {
                                            List.remove(wantedPosition);
                                            updateAdapter();
                                        }
                                    },
                                    500
                            );
                            return true;

                        } else if (event.getX() - historicX > DELTA) {
                            //If something went wrong, we stop it now
                            if (wantedChild < 0 || wantedChild >= List.size() || wantedChild >= listView.getChildCount()) {

                                return true;
                            }
                            //Start animation with 500 miliseconds of time
                            listView.getChildAt(wantedChild).startAnimation(outToRightAnimation(500));
                            //after 500 miliseconds remove from List the item and update the adapter.
                            new java.util.Timer().schedule(
                                    new java.util.TimerTask() {
                                        @Override
                                        public void run() {
                                            List.remove(wantedPosition);
                                            updateAdapter();
                                        }
                                    },
                                    500
                            );
                            return true;

                        }
                    }
                    return true;
                default:
                    return false;
            }
        }
    }); 
```

动画有这个功能：

```
private Animation outToLeftAnimation(int duration) {
    Animation outtoLeft = new TranslateAnimation(
            Animation.RELATIVE_TO_PARENT, 0.0f,
            Animation.RELATIVE_TO_PARENT, -1.0f,
            Animation.RELATIVE_TO_PARENT, 0.0f,
            Animation.RELATIVE_TO_PARENT, 0.0f);
    outtoLeft.setDuration(duration);
    outtoLeft.setInterpolator(new AccelerateInterpolator());
    return outtoLeft;
}

private Animation outToRightAnimation(int duration) {
    Animation outtoRight = new TranslateAnimation(
            Animation.RELATIVE_TO_PARENT, 0.0f,
            Animation.RELATIVE_TO_PARENT, +1.0f,
            Animation.RELATIVE_TO_PARENT, 0.0f,
            Animation.RELATIVE_TO_PARENT, 0.0f);
    outtoRight.setDuration(duration);
    outtoRight.setInterpolator(new AccelerateInterpolator());
    return outtoRight;
} 
```

我正在尝试这个，直到现在我还没有看到错误，如果有人也可以尝试会很好。

# iphone - 如何确定 iphone / ipad / ipod / appletv 是否较旧、较新或等于同系列的其他设备？

> ID：14398736
> 
> 赞同：0
> 
> 时间：2013-01-18T12:14:23.283
> 
> 标签：iphone, ios, ipad, ipod, uidevice

如何比较不同的平台？

示例：我想知道当前设备是否比 iPhone 4S 旧。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T13:11:40.957

将这些方法添加到某个类（例如 YourClass）：

```
+(NSString*)deviceVersion{
    // get hardware device version string
    struct utsname systemInfo;
    uname(&systemInfo);
    return [NSString stringWithCString:systemInfo.machine
                              encoding:NSUTF8StringEncoding];
    /*      possible values:
     @"i386" (or similar)     on the simulator //
     @"iPod1,1"   on iPod Touch
     @"iPod2,1"   on iPod Touch Second Generation
     @"iPod3,1"   on iPod Touch Third Generation
     @"iPod4,1"   on iPod Touch Fourth Generation
     @"iPhone1,1" on iPhone
     @"iPhone1,2" on iPhone 3G
     @"iPhone2,1" on iPhone 3GS
     @"iPad1,1"   on iPad
     @"iPad2,1"   on iPad 2
     @"iPad3,1"   on iPad 3 (aka new iPad)
     @"iPhone3,1" on iPhone 4
     @"iPhone4,1" on iPhone 4S
     @"iPhone5,1" on iPhone 5
     @"iPhone5,2" on iPhone 5
     ...future version...?       */
}

+(NSNumber *)getVersionForDevice:(NSString*)deviceToCheck{
    NSNumber* versionNumber = nil;
    if (deviceToCheck && ![deviceToCheck isEqualToString:@""]) {
        NSString* deviceMachine = [Utils deviceVersion];
        NSString* deviceVersion = nil;
        if ([deviceMachine hasPrefix:deviceToCheck]) {
            deviceVersion = [deviceMachine stringByReplacingOccurrencesOfString:deviceToCheck withString:@""];
            deviceVersion = [deviceVersion stringByReplacingOccurrencesOfString:@"," withString:@"."];
            float floatVersion = [deviceVersion floatValue];
            versionNumber = [NSNumber numberWithFloat:floatVersion];
        }
    }
    return versionNumber;
}

+(BOOL)isSimulator{
    NSString* deviceMachine = [Utils deviceVersion];
    //    NSLog(@"Utils deviceMachine: %@", deviceMachine);
    if (![deviceMachine hasPrefix:@"iPhone"] && ![deviceMachine hasPrefix:@"iPod"] && ![deviceMachine hasPrefix:@"iPad"]) {
        return 1;
    }
    return 0;
} 
```

然后，如果在 iPhone 上并想测试版本：

```
float iPhoneVersion = [[YourClass getVersionForDevice:@"iPhone"] floatValue]; 
```

并为 iPad 做类似的电话... iPod ...

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-18T12:14:23.283

如果您需要进行比较，您可以使用

*   [https://github.com/fossli/uidevice-extension/blob/master/Source/UIDevice-Hardware.h](https://github.com/fossli/uidevice-extension/blob/master/Source/UIDevice-Hardware.h)
*   [https://github.com/fossli/uidevice-extension/blob/master/Source/UIDevice-Hardware.m](https://github.com/fossli/uidevice-extension/blob/master/Source/UIDevice-Hardware.m)

然后您可以轻松比较相同类型的平台

```
UIDeviceComparisonResult result = [[UIDevice currentDevice] compareCurrentPlatformWithOtherPlatform:@"iPhone4,1"];
BOOL isOlderThanIPhone4S = result == UIDeviceComparisonResultOtherNewer;
return isOlderThanIPhone4S; 
```

所有平台的名称都可以在 UIDevice-Hardware.m 中找到

# java - Java Hibernate：org.hibernate.MappingException：未知实体

> ID：14398741
> 
> 赞同：0
> 
> 时间：2013-01-18T12:14:36.183
> 
> 标签：java, entities, hibernate-annotations

我在我的 java 项目中使用 hibernate 时遇到问题，希望您能帮助我：

首先，这是我的一些代码：
实体类

```
package de.zaed.entities;

import javax.persistence.CascadeType;
import javax.persistence.Entity;
import javax.persistence.Id;
import javax.persistence.OneToOne;
import javax.persistence.Table;

@Entity
@Table(name="USER")
public class User {

/**
 * the user id in the database
 */
@Id
private Long id; 

/**
 * the username of a user
 */
private String username;

/**
 * the users password
 */
private String password;

/**
 * The role of a user
 */
@OneToOne(mappedBy="user", cascade=CascadeType.ALL)
private UserRole role;

public Long getId() {
    return id;
}

public String getPassword() {
    return password;
}

public UserRole getRole() {
    return role;
}

public String getUsername() {
    return username;
}

public void setId(Long id) {
    this.id = id;
}

public void setPassword(String password) {
    this.password = password;
}

public void setRole(UserRole role) {
    this.role = role;
}

public void setUsername(String username) {
    this.username = username;
}   
} 
```

我将类添加到 AnnotationConfiguration 的部分

```
config.addAnnotatedClass(User.class); 
config.addAnnotatedClass(UserRole.class); 
config.configure("hibernate.cfg.xml"); 
```

现在我的问题：
在执行以下代码时：

```
User dbUser = new User();
dbUser.setUsername(username);
dbUser.setPassword(password);

Session session = DatabaseService.getSessionFactory().getCurrentSession();
session.beginTransaction();

session.save(dbUser);

session.flush();

session.close(); 
```

我明白了

```
org.hibernate.MappingException: Unknown entity: de.zaed.entities.User 
```

调用 session.save(dbUser) 时出错。

我在论坛和一些教程中阅读了很多帖子，但我找不到解决我的问题的方法。希望您能够帮助我。

谢谢， kaQn4p

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T12:23:05.217

用户类中没有用户名和密码的映射。您必须定义注释@Column 例如

@Column(name = "username") 私有字符串用户名；

@Column(name = "password") 私有字符串密码；

假设表 User 中定义的列与 User 类中定义的字段相同。列名在 Column Annotation 的 name 字段中定义

# java - 如何将存储在字符串中的日期和时间转换为android中的24格式时间？

> ID：14398742
> 
> 赞同：1
> 
> 时间：2013-01-18T12:14:37.713
> 
> 标签：java, android

我将日期和时间存储在字符串中，即我的字符串包含 str =“18/01/2013 5:00:00 pm”。如何在 android 中将其转换为 24 格式时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T12:18:28.130

您可以使用两个 SimpleDateFormat 实例：一个将输入解析为日期，另一个将日期格式化为具有所需格式的字符串。

例如，`formattedDate`在下面的代码中将是`18/01/2013 17:00:00`：

```
String str = "18/01/2013 5:00:00 pm";
SimpleDateFormat input = new SimpleDateFormat("dd/MM/yyyy hh:mm:ss a");
Date dt = input.parse(str);

SimpleDateFormat output = new SimpleDateFormat("dd/MM/yyyy HH:mm:ss");
String formattedDate = output.format(dt); //contains 18/01/2013 17:00:00 
```

笔记：

*   `hh`用于上午/下午 (1-12)`HH`中的小时，而用于白天 (0-23) 中的小时。
*   有关更多格式选项，请查看[javadoc](http://developer.android.com/reference/java/text/SimpleDateFormat.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T12:24:15.790

要获取 AM PM 和 12 小时日期格式，请使用`hh:mm:ss a`字符串格式化程序 WHERE`hh` 用于 12 小时格式，`a`用于 AM PM 格式。

*注意：* HH 是`24`小时，hh 是`12`小时日期格式

```
SimpleDateFormat formatter = new SimpleDateFormat("mm/dd/yyyy hh:mm:ss a");
            String newFormat = formatter.format(testDate); 
```

**例子**

```
String date = "18/01/2013 5:00:00 pm";
        SimpleDateFormat sdf = new SimpleDateFormat("yyyy/mm/dd HH:MM:SS");
        Date testDate = null;
        try {
            testDate = sdf.parse(date);
        }catch(Exception ex){
            ex.printStackTrace();
        }
        SimpleDateFormat formatter = new SimpleDateFormat("mm/dd/yyyy hh:mm:ss a");
        String newFormat = formatter.format(testDate);
        System.out.println(".....Date..."+newFormat); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T12:22:15.017

尝试

```
 String str ="18/01/2013 5:00:00 pm";
    Date date = new SimpleDateFormat("dd/MM/yyyy hh:mm:ss a").parse(str);
    str = new SimpleDateFormat("dd/MM/yyyy HH:mm:ss").format(date);
    System.out.println(str); 
```

输出

```
18/01/2013 17:00:00 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T12:18:11.490

您可以为此使用 SimpleDateFormat：

```
SimpleDateFormat dateFormat = new SimpleDateFormat(dd/mm/yyyy HH:mm:ss"); 
```

请参阅与您的要求相反的[this 。](https://stackoverflow.com/a/14053087/1777090)刚刚发布了链接，以便您了解 HH 和 hh 的不同之处。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-18T12:18:58.327

尝试使用 java SimpleDateFormat 类。

例子：

```
SimpleDateFormat df = new SimpleDateFormat("dd/MM/yyyy HH:mm:ss");
df.parse(date); 
```

大写 HH 使用 24h 格式

# java - 隐藏实用程序类构造函数：实用程序类不应具有公共或默认构造函数

> ID：14398747
> 
> 赞同：123
> 
> 时间：2013-01-18T12:14:49.430
> 
> 标签：java, constructor, sonarqube

我在声纳上收到此警告。我想要解决方案来删除 Sonar Qube 上的这个警告。

我的课是这样的：

```
public class FilePathHelper {
    private static String resourcesPath;
    public static String getFilePath(HttpServletRequest request) {
        if(resourcesPath == null) {
            String serverpath = request.getSession().getServletContext().getRealPath("");               
            resourcesPath = serverpath + "/WEB-INF/classes/";   
        }
        return resourcesPath;       
    }
} 
```

我想要适当的解决方案来消除声纳上的这个警告。

* * *

## 回答 #1

> 赞同：222
> 
> 时间：2013-01-18T12:16:05.950

如果这个类只是一个实用类，你应该将这个类设为 final 并定义一个私有构造函数：

```
public final class FilePathHelper {
   private FilePathHelper() {
      //not called
   }
} 
```

这可以防止在代码的其他地方使用默认的无参数构造函数。

此外，您可以将类设为 final，这样它就不能在子类中扩展，这是实用程序类的最佳实践。由于您只声明了一个私有构造函数，因此其他类无论如何都无法扩展它，但将类标记为 final 仍然是最佳实践。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-01-18T12:15:57.323

我不知道声纳，但我怀疑它正在寻找一个私有构造函数：

```
private FilePathHelper() {
    // No-op; won't be called
} 
```

否则，Java 编译器将提供一个公共的无参数构造函数，这是您不想要的。

（您还应该使类成为最终类，尽管其他类无论如何都无法扩展它，因为它只有一个私有构造函数。）

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-01-18T12:37:55.430

我使用没有实例的枚举

```
public enum MyUtils { 
    ; // no instances
    // class is final and the constructor is private

    public static int myUtilityMethod(int x) {
        return x * x;
    }
} 
```

您可以使用

```
int y = MyUtils.myUtilityMethod(5); // returns 25. 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2015-01-15T18:35:07.957

最佳实践是在构造类时抛出错误。

**例子：**

```
/**
 * The Class FooUtilityService.
 */
final class FooUtilityService{

/**
* Instantiates a new FooUtilityService. Private to prevent instantiation
*/
private FooUtilityService() {

    // Throw an exception if this ever *is* called
    throw new AssertionError("Instantiating utility class.");
} 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2020-06-16T12:35:18.150

您可以只使用 Lombok 注释来避免不必要的初始化。

使用`@NoArgsConstructor`如下`AccessLevel.PRIVATE`：

```
@NoArgsConstructor(access = AccessLevel.PRIVATE)
public class FilePathHelper {
   // your code 
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-04-21T19:40:45.023

我建议在 Sonar 中禁用此规则，引入私有构造函数并没有真正的好处，只是代码库中的冗余字符需要其他人阅读并且计算机需要存储和处理。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-17T23:36:49.090

**使用Lombok**的替代方法是使用`@UtilityClass`注释。

`@UtilityClass`在 Lombok 中作为实验性功能引入`v1.16.2`：

> 如果一个类用 注释`@UtilityClass`，它会发生以下事情：
> 
> *   它被标记为最终。
> *   如果在其中声明了任何构造函数，则会生成错误。
>     *   否则，将**生成一个****私有的无参数构造**函数；它抛出一个.**`UnsupportedOperationException`**
>     
> ***   **类中的所有方法**、内部类和字段**都被标记** **`static`**。**

 **### 概述：

实用程序类是一个只是函数命名空间的类。它的任何实例都不能存在，并且它的所有成员都是静态的。例如，`java.lang.Math`和`java.util.Collections`是众所周知的实用程序类。

这个注解会自动将被注解的类变成一个类。

**不能实例化实用程序类。**

通过用 标记您的类`@UtilityClass`，**lombok 将自动生成一个**引发异常的私有构造函数，将您添加的任何显式构造函数标记为错误，并将类标记为 final。

如果该类是内部类，则该类也被标记为**static**。

**实用程序类的所有成员都自动标记为静态。**甚至字段和内部类。

### 例子：

```
import lombok.experimental.UtilityClass;

@UtilityClass
public class FilePathHelper {

    private static String resourcesPath;

    public static String getFilePath(HttpServletRequest request) {
        if(resourcesPath == null) {
            ServletContext context = request.getSession().getServletContext();
            String serverpath = context.getRealPath("");               
            resourcesPath = serverpath + "/WEB-INF/classes/";   
        }
        return resourcesPath;       
    }
} 
```

**来自官方文档的参考：**

*   [https://projectlombok.org/features/experimental/UtilityClass](https://projectlombok.org/features/experimental/UtilityClass)

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2018-12-17T18:01:47.040

[SonarQube 文档](https://rules.sonarsource.com/csharp/type/Code%20Smell/RSPEC-1118)建议`static`在类声明中添加关键字。

即更改`public class FilePathHelper`为`public static class FilePathHelper`.

或者，您可以添加私有或受保护的构造函数。

```
public class FilePathHelper
{
    // private or protected constructor
    // because all public fields and methods are static
    private FilePathHelper() {
    }
} 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2018-05-24T06:40:13.160

```
public class LmsEmpWfhUtils {    
    private LmsEmpWfhUtils() 
    { 
    // prevents access default paramater-less constructor
    }
} 
```

这可以防止在代码的其他地方使用默认的无参数构造函数。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2016-05-04T04:59:20.080

添加私有构造函数：

```
private FilePathHelper(){
    super();
} 
```

* * *

## 回答 #11

> 赞同：-3
> 
> 时间：2018-04-19T00:05:27.030

使实用程序类最终并添加一个私有构造函数**

# dojo - 使用 JSON.NET 为 Dojo data-dojo-props 序列化 C# 对象

> ID：14398749
> 
> 赞同：1
> 
> 时间：2013-01-18T12:14:54.820
> 
> 标签：dojo, json.net

Dojo 的`dijit`html5 标记使用属性名称 data-dojo-props。该值基本上是一个 JSON 字符串，属性名称周围没有引号，也没有最外面的大括号。

它看起来像这样。

```
data-dojo-props="prop1:'xyz', prop2:true, prop3: { subprop1: 1, subprop2: 'abc'}" 
```

我正在使用 C# 使用 JSON.NET 从 C# 对象中写出它并传入对象指针。我找到了省略属性名称引号的设置，但我想不出一种优雅的方式来删除外部大括号。

现在，我将通过正则表达式运行字符串以删除它们，但想知道是否有人新的更好的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T13:46:02.047

我分别序列化每个顶级属性并使其成为全局 javascript 变量。然后我在`data-dojo-props`. 我承认它不是那么优雅。

我对您上述方法的担忧是，如果 的值`subprop2`包含引号，您将收到解析器错误。

```
<script type="text/javascript">
    menuData = {THE SERIALIZED JSON GOES HERE};
</script>
<div data-dojo-type="SomeWidget" data-dojo-props="menuData: menuData"></div> 
```

# android - android使View对输入透明

> ID：14398751
> 
> 赞同：0
> 
> 时间：2013-01-18T12:14:57.853
> 
> 标签：android, input, android-view

我有一个`RelativeLayout`带有薄红框背景和一个（大部分是透明的）`ImageView`作为孩子的。它们的大小相等：

![在此处输入图像描述](../Images/6812f651abd8125a25d66a32f0fbb08d.png)

在屏幕上看起来如下：

![在此处输入图像描述](../Images/d6c593e8c5d2d26cd69e606baf47f695.png)

当用户按下此复合对象时，我想将框架的颜色更改为绿色：

![在此处输入图像描述](../Images/01a5bfe852caafa3db1958b78aff68a1.png)

我将`RelativeLayout`'s background 设置为 a `StateListDrawable`，将红色变为绿色。在我将一个孩子`ImageView`（代表蓝色字母“A”）添加到`RelativeLayout`. 此 ImageView 拦截输入触摸并因此阻止输入。我试着打电话

```
imageView.setEnabled(false);
imageView.setFocusable(false);
relativeLayout.setDescendantFocusability(ViewGroup.FOCUS_BEFORE_DESCENDANTS); 
```

但没有任何帮助。

如何使 ImageView 对输入事件“透明”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T12:18:42.337

将 OnTouchListener 设置为在任何情况下都返回 false 的 ImageView。这样触摸事件就不会被消耗并传递给下一个监听器。

# objective-c - 在objective-c中添加一个类

> ID：14398754
> 
> 赞同：0
> 
> 时间：2013-01-18T12:15:01.367
> 
> 标签：objective-c

我是 Xcode 的新手，我试图了解事情是如何工作的，从书本上学习，阅读教程等。我遇到了一个小问题

当我使用“命令行工具”创建一个新项目时，如果我手动创建类接口、实现然后将代码写入主程序，它可以完美运行

但是，如您所知，当通过 CommandLineTool 创建项目时，它仅提供 main.m 我单击文件 -> 添加新文件并选择 Objective-c 类，命名该类，然后它为我提供 classname.m 和 classname.h当我编写它们不起作用的代码时，main 不知何故看不到其他文件我的意思是 main 和 class.h 和 class.m 没有连接我想是因为当我开始写作时

```
classname *newclassname= [[classname alloc] init]; 
```

类名没有出现，所以有什么建议我做错了什么？我很抱歉我的英语不好，提前感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T12:22:04.940

Objective-C 区分大小写，因此在编写类名或类名时要小心，检查所有代码。此外，约定是对类名使用大写字母，对变量和实例使用小写字母。变量通常用 camelCase 编写，因此 newclassname 将是`newClassname`：

```
Classname *newClassname= [[Classname alloc] init]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T12:19:48.470

好像你需要这个：

```
#import "classname.h" 
```

# android - 在horizo ntalscrollview android中拖放

> ID：14398755
> 
> 赞同：1
> 
> 时间：2013-01-18T12:15:16.147
> 
> 标签：android, android-view

我有自己的horizo​​ntalScrollView，里面有一个RelativeLayout（垂直），这个RelativeLayout里面有三个LinearLayout（horizo​​ntal）。在每个 LinearLayout 中，我都有一些 ImageView。

如何拖动此 imageView 并将其放入不在 Horizo​​ntalScrollView 内的另一个布局中？

我正在使用 android (2.3.3) api level 10，我找到了拖放项目的方法，但不像我问的那样。这是我的 xml 中与 Horizo​​ntalScrollView 相关的一部分：ImageView 以编程方式添加到三个 LinearLayout 中。

```
 <com.toj.hungrynow.HorizontalScrollViewEx
            android:id="@+id/listItem"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_above="@+id/barSettings"
            android:layout_alignParentTop="true"
            android:layout_marginLeft="40dp"
            android:layout_marginRight="40dp"
            android:scrollbars="none" >

            <RelativeLayout
                android:id="@+id/relativeContainer"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center_vertical|center_horizontal"
                android:background="@android:color/transparent"
                android:orientation="vertical" >

                <LinearLayout
                    android:id="@+id/topContainer"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentLeft="true"
                    android:layout_alignParentTop="true"
                    android:layout_centerHorizontal="true"
                    android:layout_marginBottom="10dp"
                    android:background="@android:color/transparent"
                    android:orientation="horizontal" >
                </LinearLayout>

                <LinearLayout
                    android:id="@+id/middleContainer"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentLeft="true"
                    android:layout_below="@+id/topContainer"
                    android:layout_centerHorizontal="true"
                    android:layout_marginBottom="10dp"
                    android:background="@android:color/transparent"
                    android:orientation="horizontal" >
                </LinearLayout>

                <LinearLayout
                    android:id="@+id/bottomContainer"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentLeft="true"
                    android:layout_below="@+id/middleContainer"
                    android:layout_centerHorizontal="true"
                    android:background="@android:color/transparent"
                    android:orientation="horizontal" >
                </LinearLayout>
            </RelativeLayout>
        </com.toj.hungrynow.HorizontalScrollViewEx> 
```

谢谢

# ios - 用 valueForKeyPath 求 NSMutableArray 的平均值

> ID：14398756
> 
> 赞同：5
> 
> 时间：2013-01-18T12:15:18.237
> 
> 标签：ios, objective-c, nsmutablearray, average

目前我正在尝试找到一种紧凑的方法来**平均一个 matrix**。显而易见的解决方案是对矩阵求和，然后除以元素的数量。然而，我在苹果开发者网站上发现了一种方法，声称这可以使用 valueForKeyPath 以更简单的方式完成。这是链接在这里：

[http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/KeyValueCoding/Articles/CollectionOperators.html](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/KeyValueCoding/Articles/CollectionOperators.html)

这是我目前正在尝试使其正常工作的示例：

```
-(void)arrayAverager
{
   NSMutableArray *myArray = [NSMutableArray arrayWithCapacity:25];
   [myArray addObject:[NSNumber numberWithInteger:myValue]];
   NSNumber *averageValue = [myArray valueForKeyPath:@"@avg.self"];
   NSLog(@"avg  = %@", averageValue);

} 
```

**问题**是：它不是对数组进行平均，而是将数组中的元素 1 逐 1 打印出来。

更新

```
-(void) pixelAverager

{
    //Put x-coordinate value of all wanted pixels into an array
    NSMutableArray *xCoordinateArray = [NSMutableArray arrayWithCapacity:25];
    [xCoordinateArray addObject:[NSNumber numberWithInteger:xCoordinate]];
    NSLog(@"avg = %@", [xCoordinateArray valueForKeyPath:@"@avg.intValue"]);
 } 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-18T12:33:50.107

你需要使用`@avg.floatValue`（或`@avg.doubleValue`，或你有什么）。运算符将`@avg`平均由点后面的名称指定的数组中对象的属性。文档在这一点上令人困惑，但这就是：

> 获取运算符右侧键路径指定的属性指定的值

正在说。由于您有一组`NSNumber`对象，因此您可以使用其中一个`*value`访问器，例如`floatValue`获取每个对象的值。举个例子：

```
#include <Foundation/Foundation.h>

int main(void) {
  NSMutableArray *ma = [NSMutableArray array];
  [ma addObject:[NSNumber numberWithFloat:1.0]];
  [ma addObject:[NSNumber numberWithFloat:2.0]];
  [ma addObject:[NSNumber numberWithFloat:3.0]];

  NSLog(@"avg = %@", [ma valueForKeyPath:@"@avg.floatValue"]);

  return 0;
} 
```

编译并运行此代码返回：

```
$ clang avg.m -framework Foundation -o avg
steve:~/code/tmp
$ ./avg 
2013-01-18 12:33:15.500 avg[32190:707] avg = 2
steve:~/code/tmp 
```

这种方法的好处是，只要所有对象都响应指定的方法，这对任何集合（同质的或其他的）`@avg`都有效。

**编辑**

正如评论中所指出的，OP 的问题是他用一个元素对集合进行平均，因此它似乎只是打印集合的内容。对于`NSNumber`对象的集合，`@avg.self`工作得很好。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-18T12:34:41.187

不，你不能这样做。对象`Transaction`是一个`Modal Class`。这`class`具有三个属性，即

*   收款人
*   数量
*   日期

此图像中的每个`row`代表一个`Transaction modal object`。

![在此处输入图像描述](../Images/594cbe315c57c97c959d1d8cbded3a37.png)

`transactions`是一个`array`包含所有这些行的 ( `Transaction Modal Objects`)。

在这些`transactions`数组中，他们尝试使用 operator 计算`Transaction Modal` **金额**字段平均值`@avg`。所以，就像

```
NSNumber *transactionAverage = [transactions valueForKeyPath:@"@avg.amount"]; 
```

你的数组没有 key `self`。所以这就是问题所在

# macros - Clojure 宏参数

> ID：14398757
> 
> 赞同：1
> 
> 时间：2013-01-18T12:15:23.950
> 
> 标签：macros, clojure

大约一周前，我在这个帖子中问了一个问题：[在 Clojure 中循环遍历“let”列表？](https://stackoverflow.com/questions/14307684/looping-through-a-let-list-in-clojure) 我得到了一个很好的答案，然而，一个相当令人困惑的问题出现在我的脑海中：

以下是部分答案：

```
(defmacro anaphoric-let [alternating-symbols-and-values & body]
    `(let [~@alternating-symbols-and-values
           names# (quote ~(flatten (partition 1 2 alternating-symbols-and-values)))
           values#  ~(vec (flatten (partition 1 2 alternating-symbols-and-values)))
           ~'locals (zipmap names# values#)]
        ~@body))

Input: 
(anaphoric-let [a 1 b 2 c 3 d 4 e "cat"] 
     (dorun (for [x (vals locals)] 
          (if (number? x) (println "roar"))))) 
```

本例中的 (dorun) 语句是宏参数中的主体，对吗？所以我的印象是它只会“复制粘贴”身体。所以而不是：

```
~@body 
```

它看起来像下面，然后它会取消引用复制的文本和所有内容：

```
~@(dorun (for [x (vals locals)] 
       (if (number? x) (println "roar")))) 
```

在试图解释所有正在发生的事情时，我尝试了我刚刚解释的确切内容。我没有尝试使用 ~@body，而是尝试在其中放置一些“真实代码”。

然后它看起来像这样：

```
(defmacro anaphoric-let [alternating-symbols-and-values & body]
     `(let [~@alternating-symbols-and-values
          names# (quote ~(flatten (partition 1 2 alternating-symbols-and-values)))
          values#  ~(vec (flatten (partition 1 2 alternating-symbols-and-values)))
          ~'locals (zipmap names# values#)]
       ~@(dorun (for [x (vals locals)] 
             if (number? x) (println "roar")))))) 
```

这不起作用并抱怨它是“无法解析符号：在这种情况下的本地人”我是一个新手，我已经尝试过实验和分析，但我并没有变得更聪明。每次我想我都明白了，总会有一个小小的“但是……”出现并粉碎一切！

我觉得我对示例的其余部分确实有一个不错的理解，除了邪恶的 ~@body ... 我个人的猜测是，由于我对如何组合所有这些古怪的小符号缺乏全面的了解，所以我可能错过了它们的某种组合......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T12:39:32.920

~@expr 在反引号表达式中表示*计算 expr 并将其拼接到周围的表达式*中。

由于您**不想**评估 (dorun ...) 表达式，您可以复制并粘贴它：

```
(defmacro anaphoric-let [alternating-symbols-and-values & body]
     `(let [~@alternating-symbols-and-values
          names# (quote ~(flatten (partition 1 2 alternating-symbols-and-values)))
          values#  ~(vec (flatten (partition 1 2 alternating-symbols-and-values)))
          locals# (zipmap names# values#)]
       (dorun (for [x (vals locals#)] 
           if (number? x) (println "roar")))))) 
```

由于您不再需要在正文中插入特定符号，因此我将替换的本地人移至 gensym'd 符号

现在为什么要在这样的硬编码宏中引入用户指定的符号，我不知道。我假设这只是为了实验。

# jquery - HTML5 Canvas，如何在使用 Jquery 更改 img 源后自动更新图像

> ID：14398758
> 
> 赞同：0
> 
> 时间：2013-01-18T12:15:26.603
> 
> 标签：jquery, ajax, html

[http://shedlimited.debrucellc.com/](http://shedlimited.debrucellc.com/)

我正在使用带有剪辑区域等在中心的 html 画布来绘制图像、拖动和调整大小；

在右侧，我使用 PHP/Ajax 为用户提供上传新图像的能力。

上传新图像后，我使用 jQuery 更改显示在画布上的图像的 img.src（我正在从我在 PHP 脚本 fyi 中写入的文本文件中提取这些数据，我无法开始工作与变量等）。

过程是

1) 上传新图片，

2）点击枕头更改图像src，使用以下代码：

```
$('.button2').click(function()
    {   
jQuery.get('scripts/testFile.txt', function(data) {
sourcer = data;
    }); 
```

3）图像不会在画布上自动更改，因此我必须单击画布上的图像才能更新新的图像源，然后图像会更改为新的 img.src

我的问题：我想删除此步骤 3)，以便用户不必单击图像来更改它，他们所要做的就是完成步骤 2) -> 单击按钮来更改图像，

那么我可以以某种方式模拟从jquery单击的图像吗？

# php - 网站翻译加载

> ID：14398773
> 
> 赞同：1
> 
> 时间：2013-01-18T12:16:08.217
> 
> 标签：php, javascript, jquery, smarty

我有一个约会网站，目前是英文的。根据客户要求，他告诉我将网站转换为波兰语。如果我要为网站创建语言文件，那么我需要对整个项目进行返工。有什么技术可以让我的网站在浏览器中加载时自动翻译成波兰语。当特定事件发生时，还会显示一些隐藏的 div。

该网站是用 php 创建的，带有 smarty 模板。

请帮助我。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T12:38:11.503

如果您想要自定义解决方案，您将不得不对当前代码进行一些编辑。

**选项1**

将所有字符串存储在[YAML](http://en.wikipedia.org/wiki/YAML)文件或数据库或平面文件中，或者以其他方式存储它们。事实是，一旦你的应用程序加载，它会在数据库中查询你的语言的字符串（你的 url 最后会有 /en、/fr、/de 等）并将它们放在你的页。

这意味着您必须编写检索此数据的代码，并在您的应用程序中放置。

**选项 2**

根据 Dainis 在评论中的建议，使用 Google 的“[自动翻译”。](http://support.google.com/chrome/bin/answer.py?hl=en&answer=173424)这不是可定制的，但意味着您不必对当前代码进行任何修改。

**选项 3**

使用[Bing 的翻译 API](http://www.microsoft.com/web/post/using-the-free-bing-translation-apis)并为每个请求中要翻译的数据手动请求字符串。对 Bing API 的访问对开发人员是免费的，并且包含大量免费翻译——但这将是数据密集型*的，除非您缓存翻译*以供将来使用。

使用选项 3，您仍然需要编写自己的自定义解决方案。因此，如果您的截止日期很紧，或者您只是懒惰，请选择选项 2。

# c - 解析字符缓冲区的代码

> ID：14398774
> 
> 赞同：2
> 
> 时间：2013-01-18T12:16:08.523
> 
> 标签：c, parsing, buffer

我想解析一个字符缓冲区并将其存储在数据结构中。缓冲区的第一个 4 个字节指定名称，第二个四个字节指定值的长度 (n)，接下来的 n 个字节指定值。

例如：char *buff = "aaaa0006francebbbb0005swisscccc0013unitedkingdom"

我想从缓冲区中提取名称和值并将其存储为数据结构。例如： char *name = "aaaa" char *value = "france"

```
char *name = "bbbb"
char *value = "swiss" 
```

存储后，我应该能够使用名称访问数据结构中的值。我应该使用什么数据结构？

编辑（来自评论）：我尝试了以下方法：

```
struct sample { 
    char string[4]; 
    int length[4]; 
    char *value; }; 

struct sample s[100]; 

while ( *buf ) { 
    memcpy(s[i].string, buf, 4); 
    memcpy(s[i].length, buf+4, 4); 
    memcpy(s[i].value, buf+8, s.length); 
    buf += (8+s.length); 
} 
```

我应该三次调用 memcpy 吗？有没有办法通过只调用一次 memcpy 来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T12:45:31.423

为了扩展您新提供的信息，这会更好：

```
struct sample { 
    char string[4]; 
    int length; 
    char *value; }; 

struct sample s[100]; 

while ( *buf && i < 100) { 

    memcpy(s[i].string, buf, 4); 

    s[i].length = atoi(buf+4); 

    s[i].value = malloc(s[i].length);
    if (s[i].value)
    {
         memcpy(s[i].value, buf+8, s[i].length); 
    }
    buf += (8+s[i].length); 
    i++; 
```

}

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T13:21:01.200

根本不使用*memcpy*怎么样？

```
typedef struct sample { 
    char name[4]; 
    union 
    {
        char length_data[4];
        unsigned int length; 
    };
    char value[]; 
} sample_t; 

const char * sample_data = "aaaa\6\0\0\0francebbbb\5\0\0\0swisscccc\15\0\0\0unitedkingdom";

void main()
{
    sample_t * s[10];
    const char * current = sample_data;
    int i = 0;

    while (*current)
    {
        s[i] = (sample_t *) current;
        current += (s[i])->length + 8;
        i++;
    }

    // Here, s[0], s[1] and s[2] should be set properly

    return;
} 
```

现在，您永远不会明确指定表示长度的 4 个字节是包含字符串表示还是实际的二进制数据；如果是四个字符需要通过*atoi()*或类似的，那么你需要做一些后处理，比如

```
 s[i]->length = atoi(s[i]->length_data) 
```

在结构可用之前，这反过来意味着源数据必须是可写的并且可能在本地复制。但即便如此，您也应该能够一次复制整个输入缓冲区，而不是把它切碎。

另外，请注意，这依赖于使用此结构的任何内容都尊重长度字段，而不是将值字段视为以空字符结尾的字符串。

最后，使用像这样的二进制整数数据显然是依赖于架构的，并具有以下所有含义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T13:53:54.317

我会这样做：我将定义一个可变长度结构，如下所示：

```
typedef struct { 
    char string[4]; 
    int length[4]; 
    char value[0] } sample; 
```

现在，在解析时，将字符串和长度读入临时变量。然后，为结构分配足够的内存。

```
uint32_t string = * ( ( uint32_t * ) buffer );
uint32_t length = * ( ( uint32_t * ) buffer + 4);
sample * = malloc(sizeof(sample) + length);
// Check here for malloc errors...
 * ( (uint32_t *) sample->string) = string;
 * ( (uint32_t *) sample->length) = length;
memcpy(sample->value, ( buffer + 8 ), length); 
```

这种方法将缓冲区的整个上下文保持在一个连续的内存结构中。我用它所有的时间。

# android - Android 前置摄像头 API

> ID：14398778
> 
> 赞同：5
> 
> 时间：2013-01-18T12:16:30.967
> 
> 标签：android, android-camera

我得到了调用另一个具有相机预览的类的活动。问题是它打开了后置摄像头，我需要前置摄像头。我怎么能做到这一点在默认情况下它会打开前置摄像头（我在谷歌中查看但我尝试的每件事都在应用程序打开时崩溃了）。这是活动：

```
package com.elichai.tfillin;

import android.app.Activity;
import android.hardware.Camera;
import android.os.Bundle;
import android.widget.FrameLayout;

public class CameraActivity extends Activity {

   private Camera mCamera;
   private CameraPreview mPreview;

   @Override
   public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.activity_main);

       mCamera = getCameraInstance();

       mPreview = new CameraPreview(this, mCamera);
       FrameLayout preview = (FrameLayout) findViewById(R.id.camera_preview);
       preview.addView(mPreview);
   }
   public static Camera getCameraInstance(){
       Camera c = null;
       try {
           c = Camera.open(); 
       }
       catch (Exception e){
       }
       return c; 
   } 
```

这是另一个类：

```
package com.elichai.tfillin;

import java.io.IOException;
import android.content.Context;
import android.hardware.Camera;
import android.hardware.Camera.CameraInfo;
import android.util.Log;
import android.view.SurfaceHolder;
import android.view.SurfaceView;

public class CameraPreview extends SurfaceView implements SurfaceHolder.Callback {
    private SurfaceHolder mHolder;
    private Camera mCamera;
    int cameraId=0;

   @SuppressWarnings("deprecation")
   public CameraPreview(Context context, Camera camera) {
        super(context);
        mCamera = camera;

        mHolder = getHolder();
        mHolder.addCallback(this);
        mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);        
    }

    public void surfaceCreated(SurfaceHolder holder) {
        try {
            mCamera.setPreviewDisplay(holder);
            mCamera.startPreview();
        } catch (IOException e) {
        }
    }

    public void surfaceDestroyed(SurfaceHolder holder) {
       mCamera.release();
    }

public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
    mCamera.setDisplayOrientation(90);
   if (mHolder.getSurface() == null){
      return;
    }

    try {
        mCamera.stopPreview();
    } catch (Exception e){
    }

    try {
        mCamera.setPreviewDisplay(mHolder);
        mCamera.startPreview();

    } catch (Exception e){
    }
} 
```

}

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-18T12:24:13.980

您的当前`Camera.open()`没有参数，这意味着它将打开默认摄像头，该摄像头几乎总是后置摄像头。

您应该遍历可用的摄像头并找出前置摄像头的 ID 并使用它来打开它。就像是：

```
private Camera openFrontFacingCamera() 
{
    int cameraCount = 0;
    Camera cam = null;
    Camera.CameraInfo cameraInfo = new Camera.CameraInfo();
    cameraCount = Camera.getNumberOfCameras();
    for ( int camIdx = 0; camIdx < cameraCount; camIdx++ ) {
        Camera.getCameraInfo( camIdx, cameraInfo );
        if ( cameraInfo.facing == Camera.CameraInfo.CAMERA_FACING_FRONT  ) {
            try {
                cam = Camera.open( camIdx );
            } catch (RuntimeException e) {
                Log.e(TAG, "Camera failed to open: " + e.getLocalizedMessage());
            }
        }
    }

    return cam;
} 
```

然后在您的应用程序中使用它，如下所示：

```
public static Camera getCameraInstance() {
   Camera c = null;
   try {
       c = openFrontFacingCamera();
   }
   catch (Exception e){
   }
   return c; 
} 
```

看到这两种方法所做的都是打开并返回 Camera 实例，您可以通过直接调用`openFrontFacingCamera()`而不是`getCameraInstance()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T12:25:41.757

你可以试试这个：

```
private Camera openFrontFacingCameraGingerbread() 
{
    int Count = 0;
    Camera cam = null;
    Camera.CameraInfo cameraInfo = new Camera.CameraInfo();
    cameraCount = Camera.getNumberOfCameras();
    for ( int camIdx = 0; camIdx < Count; camIdx++ ) {
        Camera.getCameraInfo( camIdx, cameraInfo );
        if ( cameraInfo.facing == Camera.CameraInfo.CAMERA_FACING_FRONT  ) {
            try {
                cam = Camera.open( camIdx );
            } catch (RuntimeException e) {
                Log.e(TAG, "Camera failed to open: " + e.getLocalizedMessage());
            }
        }
    }

    return cam;
} 
```

而且您还需要在清单文件中为相机添加权限。

```
<uses-permission android:name="android.permission.CAMERA" />
<uses-feature android:name="android.hardware.camera" android:required="false" />
<uses-feature android:name="android.hardware.camera.front" android:required="false" /> 
```

# c++ - 如何在 Qt 中写不同的行？

> ID：14398780
> 
> 赞同：1
> 
> 时间：2013-01-18T12:16:33.527
> 
> 标签：c++, qt

我想保存在 .txt 中的两行编辑但在不同的行中。它在同一条线上。

```
if(sFile.open(QFile::WriteOnly | QFile::Text))
    {
        QTextStream out(&sFile);

        out << ui.lineEdit_2->text();
        out << ui.lineEdit->text();

        sFile.flush();
        sFile.close();
    } 
```

PD：我用 LineEdit 在 Qt Designer 中输入的文本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T12:23:03.707

您可以使用`endl`或`"\n"`（n 表示“新行”）。这不是 Qt 特定的，而是一般的 C++：

```
out << ui.lineEdit_2->text() << "\n" 
    << ui.lineEdit->text(); 
```

# ios - 支持 Retina 4 英寸，部署目标为 4.3

> ID：14398786
> 
> 赞同：1
> 
> 时间：2013-01-18T12:16:46.537
> 
> 标签：ios, ios5, ios6

我正在使用最新的 SDK 和 Xcode 4.5.2 开发 iPhone 和 iPad 应用程序。

我的客户说我的应用程序必须支持 iOS 4.3 及更高版本。

因此，如果我以 iOS 4.3 为目标，则无法使用：

*   故事板。
*   自动布局。

我必须为每个创建 XIB `ViewController`，但是：

**我必须做什么才能支持 Retina 4 英寸屏幕？**

和

**我必须做些什么来支持 iOS 5？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T12:35:25.530

只需为 3.5 英寸屏幕设计您的应用程序，并明智地使用自动调整大小的蒙版。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T12:25:36.937

对于支持 Retina 4 英寸屏幕，[这](https://stackoverflow.com/questions/12396545/ios-6-apps-how-to-deal-with-iphone-5-screen-size)是一个很好的答案

是的故事板和自动布局不适用于 iOS 4.3

有关 iOS 5 的更多信息，您无需为此进行特殊编码

是的，您可以支持将部署目标设置为 iOS 4.3 的 Retina 4 英寸

希望这些信息对你有帮助..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T12:25:45.127

看看这两个链接

[iphone 5的屏幕尺寸](https://stackoverflow.com/questions/13399075/screen-size-of-iphone-5/13399220#13399220)

[iPhone 5 图像的命名约定？](https://stackoverflow.com/questions/13287047/naming-convention-for-iphone-5-images/13287481#13287481)

我不明白为什么这些不起作用。

**从评论中移动**

@VansFannel 我会在代码中执行此操作，而不是在 xibs 上执行此操作。所以我会有类似的东西

```
 if(IS_IPHONE5()) { 
      // do one layout 
   } else if(IS_IPAD) { 
      // do this layout 
   } else {
      // do the final layout
   } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-21T06:54:25.823

在 info.plist 文件中删除启动屏幕界面文件基本名称的选项，您将不会遇到问题

# c++ - QFileDialog 历史

> ID：14398789
> 
> 赞同：2
> 
> 时间：2013-01-18T12:17:07.660
> 
> 标签：c++, qt, qfiledialog

我正在尝试在 QFileDialog 上设置历史记录，但它似乎没有出现在任何地方。

```
QFileDialog dialog(parent, caption, path, filter);
dialog.setHistory(history);
dialog.exec(); 
```

但是我在任何地方都看不到对话框中的历史记录。它应该在哪里？它应该在任何地方吗？我在这里做错了什么？

编辑：

我做了这个小技巧，让它即使使用文件名也能工作

```
for(int index = 0; index < files.size(); index++)
{
    QFileinfo info(files[index]);
    files[index] = info.path();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T12:37:18.440

如果您打开路径选择组合框，您应该会在`Recent Places`.

示例：以下代码

```
QStringList history;
history << "C:\\temp" << "C:\\Development" << "C:\\Development\\temp";

QFileDialog dialog;
dialog.setHistory( history );
dialog.exec(); 
```

在我的计算机上导致此结果（Windows XP 32 位）：

![QFileDialog 的屏幕截图，将给定的目录列为最近的位置](../Images/439472f3d9cf0c2d2a2e4055e211c784.png)

# python - 如何使用日期时间保存 ffmpeg 流

> ID：14398791
> 
> 赞同：1
> 
> 时间：2013-01-18T12:17:20.093
> 
> 标签：python, datetime, ffmpeg

我想从 ffmpeg 编码行编写输出格式，以将流保存在带有日期和小时的 SD 卡中。

为了简化问题，我写了以下内容（只需忽略额外内容）：

```
import subprocess, sus, os, datetime, time
from subprocess import Popen, PIPE

def call_command(command):
    subprocess.Popen(command.split('  '))

call_command('ffmpeg -f video4linux2 -y -s qvga -r 24 -i /dev/video0 \
              -vcodec mpeg2video /home/pi/webcam_+%Y/%m/%d_at_%H:%M:%S.mpg') 
```

我还尝试了另一种解决方案，例如首先定义文件名并从 ffmpeg 行调用它，但它不起作用。

# air - Air - 如何在 Flash CS5.5 中使用原生扩展？

> ID：14398792
> 
> 赞同：0
> 
> 时间：2013-01-18T12:17:21.027
> 
> 标签：air, invoke, air-native-extension

我想在 Flash CS5.5 中使用本机扩展 (ANE)。我将 ANE 保存为 SWC 并将其添加到我的项目中，但此错误不断出现：

错误信息：

> 1172: 定义 qnx.events:InvokeEvent 找不到。

动作脚本：

```
import qnx.events.InvokeEvent;

 import qnx.invoke.*;    

            //NOTE: THIS MUST BE THE FIRST THING SET IN YOUR APPLICATION CONSTRUCTOR

          InvokeManager.invokeManager.addEventListener(InvokeEvent.INVOKE, onInvoke );

         function onInvoke( event:InvokeEvent ):void

        {

            if( InvokeManager.invokeManager.startupMode == InvokeStartupMode.INVOKE )

            {

                //invoked as an application/target.

                var mydata:InvokeRequest = InvokeManager.invokeManager.startupRequest;

           }

            else if( InvokeManager.invokeManager.startupMode == InvokeStartupMode.VIEWER )

            {

                //invoked as a viewer

                var myotherdata:InvokeViewerRequest = InvokeManager.invokeManager.startupViewerRequest;

           }

            else

            {

              //launched by the pressing on the icon on the home screen.

            }

        } 
```

代码中是否缺少任何内容？我以前从未使用过 ANE/SWC，因此欢迎提供任何帮助。

我上传了文件。如果有人可以看看它们会很棒：下载：[http ://www.sendspace.com/file/gjqp1w](http://www.sendspace.com/file/gjqp1w)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T04:39:34.460

你是如何打包应用程序的？此错误通常意味着扩展未与应用程序正确打包。

我相信从 CS5.5 开始你在打包时仍然需要使用 adt 命令行来指定 ANE 文件的位置，所以如果你只是从 CS5.5 导出你会得到这个错误。

类似于以下内容：

```
adt -package 
    -target ipa-ad-hoc 
    -storetype pkcs12 -keystore ../AppleDistribution.p12 
    -provisioning-profile AppleDistribution.mobileprofile 
    myApp.ipa 
    myApp-app.xml 
    myApp.swf icons Default.png 
    -extdir extensionsDir 
```

此外，您必须确保将扩展 ID 添加到您的应用程序描述符中：

```
<extensions> 
    <extensionID>com.extension.id</extensionID> 
</extensions> 
```

# .net - 为什么 XmlNodeList 是一次性的？

> ID：14398798
> 
> 赞同：4
> 
> 时间：2013-01-18T12:18:04.307
> 
> 标签：.net, xml, idisposable

我找不到这个问题的答案。

只是出于好奇，为什么[XmlNodeList 类](http://msdn.microsoft.com/en-us/library/system.xml.xmlnodelist%28v=vs.110%29.aspx)在 .NET 4.5 中实现 IDisposable 而在以前的版本中没有实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T19:02:29.197

`IEnumerator<T>`很可能出于与实现`IDisposable`但`IEnumerator`不实现相同的原因- 早期版本是在作者考虑可能需要清理的情况之前编写的，但返回此类实现的工厂可能不知道这种需要。例如，一个类可能接受一个文件名并`XmlNodeList`从该文件中提供一个“live”；的`IDisposable.Dispose`方法`XmlList`将关闭基础文件。如果接口或抽象类的大部分用户必须使用如下代码：

```
IDisposable asDispos = thing as IDisposable;
if (asDispos != null)
  asDispos.Dispose(); 
```

如果其中许多不应该实现，那么这个东西可能应该实现`IDisposable`自己，因为无条件地调用`IDisposable.Dispose`一个已知实现`IDisposable`的类比尝试强制转换一个可能实现也可能不实现的类更快`IDisposable.Dispose`。

# android - 试图将意图发送到其他应用程序：错误 SecurityException: Permission Denial: Starting Intent

> ID：14398799
> 
> 赞同：4
> 
> 时间：2013-01-18T12:18:05.763
> 
> 标签：android, android-intent

我正在尝试将意图从应用 A 发送到应用 B。在应用 AI 的活动中，请执行以下操作：

```
Intent i = new Intent();
i.setAction("com.example.test2.REQUEST_RESPONSE");
i.putExtra("info", "bla bla bla");
startActivityForResult(i, 0); 
```

在应用程序 BI 中，清单中有以下活动：

```
 <activity android:name=".Receiving"
        android:label="@string/app_name"
        android:exported="false" >
        <intent-filter>
            <action android:name="com.example.test2.REQUEST_RESPONSE" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity> 
```

这在活动的 onCreate 中：

```
Intent intent = getIntent();
if (intent.getAction().equals("com.example.test2.REQUEST_RESPONSE")) {
    Log.e("Received", "Intent received thank you!");
} 
```

有了这个我收到以下错误：

```
01-18 12:30:44.950: E/AndroidRuntime(31200): FATAL EXCEPTION: main
01-18 12:30:44.950: E/AndroidRuntime(31200): java.lang.RuntimeException: Unable to     resume activity {com.example.test/com.example.test.MainActivity}:     java.lang.SecurityException: Permission Denial: starting Intent { act=example.test2.REQUEST_RESPONSE cmp=example.test2/.Receiving (has extras) } from ProcessRecord{41ae02d8 31200:com.example.test/u0a10107} (pid=31200, uid=10107) not exported from uid 10115
01-18 12:30:44.950: E/AndroidRuntime(31200):    at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2742)
01-18 12:30:44.950: E/AndroidRuntime(31200):    at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2771)
01-18 12:30:44.950: E/AndroidRuntime(31200):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2235)
01-18 12:30:44.950: E/AndroidRuntime(31200):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
01-18 12:30:44.950: E/AndroidRuntime(31200):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
01-18 12:30:44.950: E/AndroidRuntime(31200):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-18 12:30:44.950: E/AndroidRuntime(31200):    at android.os.Looper.loop(Looper.java:137)
01-18 12:30:44.950: E/AndroidRuntime(31200):    at android.app.ActivityThread.main(ActivityThread.java:5039)
01-18 12:30:44.950: E/AndroidRuntime(31200):    at java.lang.reflect.Method.invokeNative(Native Method)
01-18 12:30:44.950: E/AndroidRuntime(31200):    at java.lang.reflect.Method.invoke(Method.java:511)
01-18 12:30:44.950: E/AndroidRuntime(31200):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-18 12:30:44.950: E/AndroidRuntime(31200):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-18 12:30:44.950: E/AndroidRuntime(31200):    at dalvik.system.NativeStart.main(Native Method)
01-18 12:30:44.950: E/AndroidRuntime(31200): Caused by: java.lang.SecurityException: Permission Denial: starting Intent { act=com.example.test2.REQUEST_RESPONSE cmp=com.example.test2/.Receiving (has extras) } from ProcessRecord{41ae02d8 31200:com.example.test/u0a10107} (pid=31200, uid=10107) not exported from uid 10115
01-18 12:30:44.950: E/AndroidRuntime(31200):    at android.os.Parcel.readException(Parcel.java:1425)
01-18 12:30:44.950: E/AndroidRuntime(31200):    at android.os.Parcel.readException(Parcel.java:1379)
01-18 12:30:44.950: E/AndroidRuntime(31200):    at android.app.ActivityManagerProxy.startActivity(ActivityManagerNative.java:1870)
01-18 12:30:44.950: E/AndroidRuntime(31200):    at android.app.Instrumentation.execStartActivity(Instrumentation.java:1412)
01-18 12:30:44.950: E/AndroidRuntime(31200):    at android.app.Activity.startActivityForResult(Activity.java:3370)
01-18 12:30:44.950: E/AndroidRuntime(31200):    at android.app.Activity.startActivityForResult(Activity.java:3331)
01-18 12:30:44.950: E/AndroidRuntime(31200):    at com.example.test.MainActivity.onResume(MainActivity.java:125)
01-18 12:30:44.950: E/AndroidRuntime(31200):    at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1185)
01-18 12:30:44.950: E/AndroidRuntime(31200):    at android.app.Activity.performResume(Activity.java:5182)
01-18 12:30:44.950: E/AndroidRuntime(31200):    at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2732)
01-18 12:30:44.950: E/AndroidRuntime(31200):    ... 12 more 
```

如果我从意图过滤器中删除类别，则会收到此错误：

```
01-18 12:21:03.059: E/AndroidRuntime(30865): Caused by: android.content.ActivityNotFoundException: No Activity found to handle Intent { act=com.example.test2.REQUEST_RESPONSE (has extras) } 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-18T12:23:36.360

如下更改活动清单标签，以便它打开第二个应用程序。

```
<activity android:name=".Receiving"
        android:label="@string/app_name"
        android:exported="true" >
        <intent-filter>
            <action android:name="com.example.test2.REQUEST_RESPONSE" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity> 
```

崩溃的原因是因为您设置`android:exported="false"`了这意味着其他进程无法访问此活动。因此，您将其设置为 true 并执行相同操作，它不会崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-29T11:20:59.093

您必须显示另一个应用程序的活动。如果您调用另一个应用程序的活动类，它将将该活动类放在前面，但在我的一个项目中，我调用了将在后台工作的 BroadCastReceiver。

这是您在清单文件中注册接收器并在意图过滤器中为该接收器提供 URL SCHEME 的方式

```
 <receiver android:name="com.example.exampleapp.ExampleReceiver" >
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />

            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />
            <category android:name="android.intent.category.LAUNCHER" />

            <data android:scheme="receiver" />
        </intent-filter>
    </receiver> 
```

现在从应用程序 A 中打开一个 Intent

```
 Intent mainIntent = new Intent();
    mainIntent = new Intent(Intent.ACTION_VIEW);
    mainIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    mainIntent.setData(Uri.parse("receiver://123"));
    context.sendBroadcast(mainIntent); 
```

这个 setData 将数据传递给其他应用程序，例如 put extra do 将数据传递给另一个类。

我希望这可以帮助你 ：）

# c# - Nhibernate 无法反序列化可序列化的属性

> ID：14398801
> 
> 赞同：2
> 
> 时间：2013-01-18T12:18:11.423
> 
> 标签：c#, nhibernate, nhibernate-mapping

我在 sql 类中有一个表，其中第一列是 ID，另一列是 fImage。fImage 列的数据类型是 Image。我正在使用 nhibernate 加载所有图像并希望将其绑定到图片框控件中。但是我们在使用 nhibernate 读取数据时遇到异常，因为**nhibernate 无法反序列化可序列化的属性**。

我浏览了一些关于 stackoverflow 和 google 的链接，但似乎没有什么对我有用。

在这里，我给出了示例 hbm 文件和类文件。

```
namespace BlackOpsP2.Core.Domain.ARModule
{
using System;
using System.Collections.Generic;
using System.Text;
using System.Drawing;

/// <summary>
/// Documentation for the tARReportLogo.
/// </summary>
public partial class tARReportLogo : DomainObject<System.Guid>
{
    #region Constructor
    /// <summary>
    /// Initializes a new instance of the <see cref="tARReportLogo"/> class.
    /// </summary>
    public tARReportLogo()
    {
    }

    /// <summary>
    /// Initializes a new instance of the <see cref="tARReportLogo"/> class.
    /// </summary>
    /// <param name="fReportLogoID">The Payment Type ID.</param>
    public tARReportLogo(System.Guid fReportLogoID)
    {
        this.ID = fReportLogoID;
    }

    #endregion        

    #region Properties

    /// <summary>
    /// Gets or sets ReportLogoID.
    /// </summary> 
    public virtual System.Guid fReportLogoID { get; set; }

    /// <summary>
    /// Gets or sets Image ID.
    /// </summary> 
    public virtual System.Guid fImageID { get; set; }

    /// <summary>
    /// Gets or sets Image Name.
    /// </summary> 
    public virtual string fImageName { get; set; }

    /// <summary>
    /// Gets or sets Image Value.
    /// </summary> 
    public virtual Image fImageValue { get; set; }                

    #endregion

    #region Methods
    /// <summary>
    /// Joins a first name and a last name together into a single string.
    /// </summary>    
    /// <returns>The hash code.</returns>
    public override int GetHashCode()
    {
        return ID.GetHashCode();
    }
    #endregion
}
} 
```

这是hbm文件

```
<?xml version="1.0" encoding="utf-8" ?>
    <hibernate-mapping assembly="BlackOpsP2.Core" namespace="BlackOpsP2.Core.Domain.ARModule" xmlns="urn:nhibernate-mapping-2.2">
  <class name="tARReportLogo" table="tARReportLogo" lazy="true" >
     <id name="fReportLogoID">
        <generator class="guid" />
     </id>    
     <property name="fImageID">
     </property>
     <property name="fImageName" >     
     </property>
     <property name="fImageValue" type="Serializable" length="2147483647">
     </property>    
  </class>
</hibernate-mapping> 
```

我正在使用休眠 3.3 版。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T12:47:55.350

将您的 C# 属性更改为`byte[]`

```
public partial class tARReportLogo : DomainObject<System.Guid>
{
  ...
  public virtual byte[] fImageValue { get; set; }  // image as a byte array
  ...
} 
```

而且您的映射不需要更多

```
<property name="fImageValue" length="2147483647" /> 
```

您可以在 C# 中进行的任何其他转换（到 Image 实例或其他）。NHiberante 将正确映射`byte[]`到 SQL Server`image`

# operating-system - DOS [like] 操作系统部分和规范

> ID：14398805
> 
> 赞同：1
> 
> 时间：2013-01-18T12:18:20.590
> 
> 标签：operating-system, dos

类似 DOS 的操作系统部分及其规格是什么？

例如：

微软操作系统：

1.  内核设计：blah blah blah
2.  文件系统：等等等等
3.  引导加载程序：...
4.  ...

86-DOS：

1.  ...
2.  ...

多用户 DOS：

1.  ...

等等。

PS 我有兴趣了解所有版本，因此请随时分享您对任何列表或未列出版本的了解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T00:10:15.633

这是一个开始（*有一个巨大的列表*）：

[DOS 操作系统](http://en.wikipedia.org/wiki/Comparison_of_DOS_operating_systems)及其一些技术规范的比较（*在维基百科上*）

他们谈论：

*   PC-DOS
*   操作系统
*   Z-DOS
*   DOS加
*   博士
*   火山口 OpenDOS
*   FreeDos

等等

这里有更多关于[MS-DOS 系统组件的](http://en.wikipedia.org/wiki/DOS)信息，包括设计、引导系统、文件系统、驱动器命名方案、内存管理等。

维基百科上也有广泛[的操作系统比较](http://en.wikipedia.org/wiki/Comparison_of_operating_systems)，以及一些技术信息……</p>

# css - 如何在 Visual Studio 2012 中打开 Web Essentials 2012 中的实时 Web 预览

> ID：14398811
> 
> 赞同：15
> 
> 时间：2013-01-18T12:18:44.503
> 
> 标签：css, visual-studio, web-essentials

我正在尝试在 Visual Studio 中编辑 CSS 文件时打开 Web Essentials 2012 的实时 Web 预览功能。我到处都可以找到以下说明如何在没有一个对我有用的情况下做到这一点：

1) 按 Ctrl + Alt + Enter -> 没有任何反应；

2) 在解决方案资源管理器中右键单击您的 Web 项目项，然后单击“实时 Web 预览”以显示窗口并加载网站。-> 不存在这样的按钮。

任何帮助将不胜感激。谢谢你。

![实时预览的 Missin 选项。](../Images/ef9e32188816c5bbfadd0b4f93111463.png)

# c# - GetManifestResourceStream() 在调试器中返回 NULL

> ID：14398819
> 
> 赞同：1
> 
> 时间：2013-01-18T12:19:14.290
> 
> 标签：c#, .net, visual-studio-2010, debugging, embedded-resource

我在我的应用程序中嵌入了一些 XML 资源，它可以加载 XSD 文件，但不能加载 XML 文件。这就是我加载 XSD 文件的方式。

```
 private static XmlSchema LoadXsdResource(string folder, string xsdName)
    {
        string filename = string.Format("Namespace.{0}.{1}.xsd", folder, xsdName);
        using (Stream stream = Assembly.GetCallingAssembly().GetManifestResourceStream(filename))
        {
            return XmlSchema.Read(stream, (o, e) =>
            {
                log.Warn(string.Format("Napaka pri parsanju XSD sheme {0}: {1}: {2}", e.Severity, e.Message, filename));
            });
        }
    } 
```

我在其他地方加载 XML：

```
XDocument xdoc = XDocument.Load(Assembly.GetCallingAssembly().GetManifestResourceStream("Namespace.Resources.Oddaja.xml")); 
```

这也有效，但*前提*是我运行编译的程序集。当我使用调试器运行它时，我得到一个`NullReferenceException`来自`GetManifestResourceStream()`.

所以我把命名空间搞砸了，对吧？不，我检查并再次检查。命名空间是正确的，如果不是，我会在正在运行的程序集中遇到异常。（每当发生异常时，我都会记录）我还使用 .NET Reflector 仔细检查了资源是否确实以我期望的名称存在。

我还三重检查并确保`Build Action`设置为`Embedded Resource`但没有任何效果。我提醒您，当我在调试器之外运行 exe 并且可以打印 XML 时，它*工作正常。*但是，当使用调试器运行时，它返回 null 并且程序崩溃。

什么可能导致`GetManifestResourceStream()`仅在调试时返回 null？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T12:30:56.497

问题是我从`Main()`. 国家的文件[`Assembly.GetCallingAssembly()`](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.getcallingassembly.aspx)：

> 返回调用当前执行方法的方法的程序集。

`Assembly`调用我的方法`Main()`的当然是调试器。调试器没有我想要的资源，它崩溃了。该`LoadXsdResource()`方法有效，因为调用程序集是我的并且拥有我想要的资源。

我想要的是[`Assembly.GetExecutingAssembly()`](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.getexecutingassembly.aspx)：

> 获取**包含当前正在执行的代码的程序集。**

如果我将我的代码放在一个类中，就不会发生这种情况。我想我是因为愚蠢而交了税。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T13:52:03.300

`Assembly.GetCallingAssembly()`确实是问题所在。调试时，Visual Studio 托管进程正在调用您的代码，`yourapp.vshost.exe`. 其中当然不包含您的资源。

解决方法是 Project + Properties，Debug 选项卡，取消选中“Enable the Visual Studio hosting process option”。但当然，真正的解决方法是更多地关注代码的位置与资源的位置，做出`GetExecutingAssembly()`最有可能正确的选择。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-04-24T09:43:10.000

当文件名路径错误时返回 null。它变成像这样的完整路径 System.IO.Stream s = b.GetManifestResourceStream("TestApp.XML.test.xml");

```
Nanespace.FileFolderName.xmlfilename.xml
TestingEnvironmentNamespace.Test.test.xml 
```

上面的例子展示了如何映射完美路径的最佳方法。

# php - Silex 上的绑定方法

> ID：14398821
> 
> 赞同：3
> 
> 时间：2013-01-18T12:19:15.733
> 
> 标签：php, routes, silex

我在任何地方都找不到它。所以我问：在 silex 上，我们为什么要使用 bind() 呢？例如，在这个静态页面的路由上：

```
$pages = array(
    '/'      => 'index',
    '/blog'  => 'blog',
    '/about' => 'about',
);

foreach($pages as $route => $view) {
    $api->get($route, function(Silex\Application $app) use($view) {
        return $app['twig']->render($view.'.html');
    })->bind($view);
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-18T12:24:18.677

对于一个事件繁重的框架，这是一个糟糕的选择，但这基本上是命名路由。

提供者之类的东西如果有名字就可以访问路由。

相关文件：

*   [http://silex.sensiolabs.org/doc/usage.html#named-routes](http://silex.sensiolabs.org/doc/usage.html#named-routes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-16T00:11:52.503

从[silex 文档](http://silex.sensiolabs.org/doc/usage.html#named-routes)：

> 一些提供者（例如`UrlGeneratorProvider`）可以使用命名路由。默认情况下，Silex 会为您生成一个无法真正使用的路由名称。您可以通过在路由方法返回的 Controller 对象上调用 bind 来为路由命名：

```
$app->get('/', function () {
    ...
})->bind('homepage');

$app->get('/blog/{id}', function ($id) {
    ...
})->bind('blog_post'); 
```

> 如果您使用使用`RouteCollection`.

# html - PHP/HTML - Html 电子邮件 - Gmail 将来自我网站的邮件检测为垃圾邮件？（见模板）

> ID：14398823
> 
> 赞同：0
> 
> 时间：2013-01-18T12:19:19.540
> 
> 标签：html, email, gmail, spam

我有一个简单的模板，我一直用它来使用 php 向我的网站用户发送电子邮件。

我现在注意到，由于某种奇怪的原因，gmail 似乎认为我的电子邮件是垃圾邮件，因此我网站上发送到 gmail 地址的每封邮件最终都会进入垃圾邮件文件夹。

由于该域是一个新域，我怀疑其原因是因为我的网站被标记为以某种方式分发垃圾邮件的网站，所以我得出的结论是它必须取决于我的 html 用户以及可能的方式我使用了超链接。

如果有人可以查看我在下面放置的简短示例并向我解释我在这一切中做错了什么，我将不胜感激，因为我已经摸索了很长时间，这似乎是有效的根据规范？

欢迎任何意见、建议、反馈或想法，谢谢！

```
<?php
// multiple recipients
$to  = "exampleuser@gmail.com";

// subject
$subject = 'Please Confirm User Account Registration';

// message
$message = '
<html>
<head>
    <title>My Domain User Account Registration</title>
</head>
<body>
    <p>My Domain User Account Registration :</p>
    <p>We have just received a request to have your information added to our website as a user account. This would enable you to buy products on our website at <a href="http://www.mydomain.com/">http://www.mydomain.com/</a></p>
    <p>If this is correct and you do wish to create a new user account on our website, please click the link below to be directed our website.</p>
    <p><a href="http://www.mydomain.com/users/register/confirmation/confirm.php?confirm=12345&key=12345abcde">http://www.mydomain.com/users/register/confirmation/confirm.php?confirm='.$userId.'&key='.$randomKey.'</a></p>
    <p>If you received this email by mistake, simply delete it. You won&rsquo;t be subscribed if you don&rsquo;t click the confirmation link above and your email address will be removed from our database by tomorrow.</p>
    <p>For questions about this message, please contact us at : <a href="mailto: info@mydomain.com">info@mydomain.com</a></p>
    <p>Thank you.</p>
</body>
</html>
';

// To send HTML mail, the Content-type header must be set
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";

// Additional headers
$headers .= 'From: Accounts @ www.mydomain.com <accounts@mydomain.com>' . "\r\n";

//Send the message
mail($to, $subject, $message, $headers);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T12:22:07.857

如果可以的话，把这个拿出来：

```
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n"; 
```

然后，您以纯文本形式发送电子邮件，它们不会被自动检测为垃圾邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T23:43:31.837

在纠缠我的主机相当长一段时间后，发现他们的服务器基本上被标记为垃圾邮件的发件人，所以来自我网站上的有问题的共享服务器上的邮件会自动发送到垃圾邮件文件夹以供 gmail用户...

需要注意的事情！

# rpm - 修改 rpm 文件

> ID：14398824
> 
> 赞同：0
> 
> 时间：2013-01-18T12:19:20.750
> 
> 标签：rpm, rpmbuild

如何将文件添加到已经存在的 rpm 包中？

有没有办法提取 rpm 并添加文件并重建包含新文件的包？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T18:55:34.247

您可以使用[rpm2cpio](http://www.rpm.org/max-rpm/s1-rpm-miscellania-rpm2cpio.html) 和[cpio](http://www.gnu.org/software/cpio/manual/cpio.html)命令来提取 RPM 的内容。这不会创建规范文件，因此您需要找到一个副本，或创建一个。

# java - ORA-00905: 从 servlet 执行时缺少关键字错误

> ID：14398827
> 
> 赞同：1
> 
> 时间：2013-01-18T12:19:29.460
> 
> 标签：java, oracle, servlets, sqlplus

我正在使用以下代码来执行查询。它显示错误为 ORA-00905：缺少关键字。当我在 sql*plus 中执行此操作时，它显示正确的结果。通过使用 servlet 它不会。任何人都可以帮我解决问题

```
public class PickOfferNo extends HttpServlet {

protected void processRequest(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    response.setContentType("text/html;charset=UTF-8");
    PrintWriter out = response.getWriter();
    try {
         //TODO output your page here
        out.println("<html>");
        out.println("<head>");
        out.println("<title>Servlet PickOfferNo</title>");  
        out.println("</head>");
        out.println("<body>");
        out.println("<h1>Servlet PickOfferNo at " + request.getContextPath () + "</h1>");
        out.println("</body>");
        out.println("</html>");

    } finally {            
        out.close();
    }
}

// <editor-fold defaultstate="collapsed" desc="HttpServlet methods. Click on the + sign on the left to edit the code.">

@Override
protected void doGet(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    //processRequest(request, response);

    response.setContentType("text/html;charset=UTF-8");
    PrintWriter out = response.getWriter();
    try
    {
        out.println("<html>");
        out.println("<head>");
        out.println("<title>Servlet PickOfferNo</title>");
        out.println("</head>");
        out.println("<body>");
        out.println("<h1>Servlet PickOfferNo at " + request.getContextPath () + "</h1>");
        doPost(request,response);
        out.println("</body>");
        out.println("</html>");
    }
    finally
    {
       out.close(); 
    }
}

@Override
protected void doPost(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    //processRequest(request, response);
    String ofrn=null;
    String cd=null;
    String no=null;

    cd=request.getParameter("sec_code");
    PrintWriter out=response.getWriter();
    try
    {
        Class.forName("oracle.jdbc.driver.OracleDriver");
        java.sql.Connection conn = DriverManager.getConnection("jdbc:oracle:thin:@192.168.1.200:1521:pdsm", "test", "test");
             Statement stmt=conn.createStatement();
                 conn.setAutoCommit(true);
                 ResultSet rs=stmt.executeQuery("select to_char(nvl(max(substr(offerno,4,4)),0)+1) into '"+no+"' from offer1 where div_sec='"+cd+"'");
                 ResultSet rs1=stmt.executeQuery("select lpad(ltrim(rtrim("+no+")),4,'0') from dual");
                 if(rs1.next())
                     no=rs1.getString(1);
                 ofrn=cd+no;

                 //obj.put("offrn", ofrn);
                 out.println(ofrn);
    }
    catch(Exception e)
    {
        out.println(e.getMessage());
    }
}

/** 
 * Returns a short description of the servlet.
 * @return a String containing servlet description
 */
@Override
public String getServletInfo() {
    return "Short description";
}// </editor-fold>
} 
```

谢谢。请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T12:37:49.507

表达式在`SELECT INTO`这里不起作用。该`SELECT INTO`表达式只能在**PL/SQL**运行时中使用，例如在存储过程中。您应该使用常规`SELECT`语法并照常从 ResultSet 对象中获取结果。以下代码应该可以工作：

```
 ResultSet rs=stmt.executeQuery("select to_char(nvl(max(substr(offerno,4,4)),0)+1) from offer1 where div_sec='"+cd+"'");
             if(rs.next())
                 no=rs.getString(1);
             ResultSet rs1=stmt.executeQuery("select lpad(ltrim(rtrim("+no+")),4,'0') from dual");
             if(rs1.next())
                 no=rs1.getString(1); 
```

# javascript - ASP.Net CodeBehind 中的 JavaScript

> ID：14398832
> 
> 赞同：0
> 
> 时间：2013-01-18T12:19:55.017
> 
> 标签：javascript, asp.net, webforms

我在添加到代码隐藏中的一些 javascript 时遇到问题。我在这里试图实现的目标是在页面加载上进行另一个回发。现在，你可能会觉得这很奇怪，但我的疯狂是有办法的。

在我的 ASP.Net 向导中，我有一个文本框，其中包含从另一个步骤填充的日期。然后，该日期用于用财务信息填充 3 个其他控件。有必要在此步骤的负载上填充这 3 个其他控件。现在我试图简单地做 on `page_load`，但这不起作用，因为某些控件不存在或日期不在文本框中。我也尝试在该`page render`方法上执行此操作，但出于相同的原因，这也不起作用。

因此，我求助于使用 javascript 执行双重回发，但这会导致各种问题。

这是 Page_Load 的代码：

```
 Dim validateFinancial as String = "<script language='javascript'>window.onload = function() ( ValidateFinancialDate() { __doPostBack('<%= UpdatePanel2.ClientID %>'); return false; })</script>"
 Page.ClientScript.RegisterStartUp(Me.GetType(), "MyScript", validateFinancial, false) 
```

它没有触发，并且在浏览器左下角的 javascript 错误框中显示缺少“；”。如果我删除 javascript 代码并简单地将其添加到带有字符串中函数名称的标记中，它将出现错误，但是当发布到网络服务器时会导致 AJAX 控件在整个页面上失败。

请问有没有办法让这个工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T12:25:30.853

你的问题是

```
<%= UpdatePanel2.ClientID %> 
```

不会被解释。当您希望您的 javascript 回发时，ASP 已经完成了您的页面的呈现。您将不得不找到另一种传递 UpdatePanel2.ClientID 值的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T12:30:52.907

你不应该`<%= UpdatePanel2.ClientID %>`在后端使用。使用将您的替换为上述方法的返回值来获得`__doPostBack('<%= UpdatePanel2.ClientID %>')`等效项。`ClientScript.GetPostBackEventReference(UpdatePanel2, string.Empty);``__doPostBack('<%= UpdatePanel2.ClientID %>')`

* * *

**更详细：**

让我们从头开始。在客户端加载页面后，您需要由 UpdatePanel2 启动回发。正确的 JS 函数模式应该是：

```
window.onload = function() { ValidateFinancialDate(); %Do postback%; return false;}; 
```

要获得 UpdatePanel2 的 %Do postback% 函数调用，我们需要使用`ClientScript.GetPostBackEventReference(UpdatePanel2, string.Empty)`backend 方法，该方法将产生正确的 JS __doPostBack 函数调用，以发出由 UpdatePanel2 控件发起的回发请求。

因此 C# 上的工作示例如下：

```
string postbackReference = Page.ClientScript.GetPostBackEventReference(UpdatePanel2, string.Empty);
string validateFinancial = "window.onload = function() { ValidateFinancialDate(); " + postbackReference + "; return false;};";
Page.ClientScript.RegisterStartUp(this.GetType(), "MyScript", validateFinancial, true); 
```

请注意 RegisterStartUp 方法的**true**参数，这将自动将 validateFinancial 脚本内容包装到标签中。

但是对于您要解决的问题，这种双重回发的解决方法似乎是人为的，如果您提供更多源代码，我们可以找到更好的解决方案。

# python - 有没有更短的方法来删除列表中的前两个值？

> ID：14398837
> 
> 赞同：0
> 
> 时间：2013-01-18T12:20:23.040
> 
> 标签：python, min, average, python-3.3

我想找到不包括前两个值的列表的总和：

```
values.remove(min(values))

values.remove(min(values))

avg = sum(values) / len(values) 
```

有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T12:23:52.063

可以试试这个：

```
qAvg=sum(sorted(qList)[2:])/(len(qList)-2) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T12:23:33.480

是的，可以。

```
qAvg = sum(sorted(qList)[2:])/1 
```

`sorted`给你一个排序列表，并且`[2:]`是一个列表[切片](http://docs.python.org/3/library/functions.html#slice)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T12:27:07.653

根据您打算实现的目标，您还可以期待使用 heapq 模块

```
>>> qList = [randint(1,100) for _ in range(10)]
>>> import heapq
>>> heapq.heapify(qList)
>>> sum(heapq.nsmallest(len(qList) - 2, qList))/(len(qList) - 2)
50 
```

# web-services - 网络服务 API

> ID：14398839
> 
> 赞同：-1
> 
> 时间：2013-01-18T12:20:26.047
> 
> 标签：web-services, api

我是否认为 Web 服务的 API 是 Web 服务的客户端，它提供函数名称来访问 Web 服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T12:48:55.447

不完全是，尽管您陈述的最后一部分可能是正确的..ish。

API 代表“应用程序程序员接口”（或类似的东西）。基本上，API 是一组规范，告诉*使用方*（客户端）如何访问某些资源（Web 服务）。

例如，客户端可以是根据 API 中的规范连接到服务的应用程序。这是一个一般原则（不仅适用于 Web 服务），而且可以非常简单，例如：

```
https://www.google.com/search?q=catnip 
```

这是谷歌的搜索查询。API 声明参数的值`q`（使用 , 在 url 中传递`?q=<some value>`）应该被搜索。

客户端可以是您的网络浏览器，也可以是将该查询传递给 Google 并接收它提供的答案的任何其他应用程序。

*旁注：同一个 API 还声明 url 中可以有更多数据，例如格式、客户端信息等：* `https://www.google.com/search?client=opera&q=catnip&ie=utf-8`

# jquery - 检查DIV是否包含Image

> ID：14398840
> 
> 赞同：9
> 
> 时间：2013-01-18T12:20:32.537
> 
> 标签：jquery

我正在尝试确定 DIV 是否有图像。我的 DIV 的结构如下：

```
<li class="customData">
  <div class="customdata1"><img src="" /></div>
  <div class="customdata1"><input type="text" /></div>
</li> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-18T12:21:44.310

尝试这个：

```
$('.customData div').each(function() {
    if ($(this).find('img').length) {
        // there is an image in this div, do something...
    }
}); 
```

这将`img`在`div`. 如果您只希望它作为直系后代，请将其用于`if`条件：

```
$(this).children('img').length 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-18T12:34:23.413

您可以使用`has()`选择器

```
$('.customData div:has(img)').doSomething() 
```

不确定您想做什么，例如，如果您想计算它们：

```
 alert(  $('.customData div:has(img)').length) 
```

API 参考[http://api.jquery.com/has-selector/](http://api.jquery.com/has-selector/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-12T21:49:32.023

首先让我们指定 div

`var dD = getElementById("desiredDivID");`

现在让我们找到 div 的子元素：

```
var elements = dD.childNodes.length; 
```

现在我们遍历每个元素节点：

```
for(index = 0; index < elements; index++){
node = dD.childNodes[index];
if (node && node.nodeType == 1 && node.nodeName == 'IMG'){
    dD.removeChild(node);
            }
} 
```

在最后一个 if 语句中，我们检查节点是否存在，然后检查节点类型和节点名称。这些检查中的每一个都必须返回 true，然后 .removeChild(node) 删除指定的元素节点，该节点在“IMG”字符串中标记。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-09T09:30:28.650

也许这会有所帮助

```
if ($(".customData:contains('img')")) {
 console.log("sucess");
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-21T16:20:59.810

如果我理解正确，你想检查它是否有图像，所以另一种方法我会说你需要检查 src 属性，如果你有一个 img 标签但没有 src 会发生什么？这有时会发生在动态环境中（使用实际的编程代码而不是纯 HTML）。

```
$('.customData .customdata1').find('img').attr('src'); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-11T13:22:24.593

**HTML**

```
<img src="some-url" class="banner-image"> 
```

Javascript方式

```
console.log(document.querySelector('.banner-image').tagName); 
```

jQuery方式：

```
console.log(jQuery('.banner-image')[0].tagName); 
```

> 添加 [0] - JQuery 元素转换为 Javascript Dom 对象。如果您有循环，则不需要 [0]。

我刚刚在工作时发现了它，它与任何浏览器兼容。

# android - Android / Eclipse：png图像中的透明区域

> ID：14398843
> 
> 赞同：0
> 
> 时间：2013-01-18T12:20:44.220
> 
> 标签：android, eclipse, image, png

我有一个带有透明区域的 png 图像。我想在这个透明区域中添加一个 Surface View。你能给我一些建议吗？我已经在这个网站和谷歌上找了几个小时，但没有找到我可以使用的东西。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T12:26:50.820

使用 FrameLayout 并将您的 png 作为覆盖放在 SurfaceView 的顶部。

```
<FrameLayout>
 <SurfaceView>
 <ImageView>
</FrameLayout> 
```

# java - 在 Java 中调用“call”方法时无法存储 Vector 数据

> ID：14398844
> 
> 赞同：0
> 
> 时间：2013-01-18T12:20:49.327
> 
> 标签：java, vector, threadpool, runnable

我的代码有问题。代码即将找到网关/子网，如果程序找到一个，它会将其返回给一个名为“call()”方法的类。这部分工作正常，但问题是我想传递网关的 ID（你知道网关是否是 192.168.1\. **1**，它也会将数字**1**传递给填充已建立网关向量的类）。问题是由于某种原因，包含网关 ID 的向量是空的。你能给我一个线索如何解决问题吗？此致。这是我在项目中使用的代码：

```
int GateWayKey = 1;
int GateWayKeyStop=254;
String ip="";
StoredGW FoundedGW = new StoredGW();
int SubNetKey = 2;
int SubNetKeyStop = 254;
Vector <Integer> AllGateWays= new Vector <Integer>();
Vector <Future<String>> AllSQLs = new Vector <Future<String>>();

final int NUM_THREADS = Runtime.getRuntime().availableProcessors(); 
ExecutorService exec = Executors.newFixedThreadPool(NUM_THREADS);
public void run() {

    for (;GateWayKey<=GateWayKeyStop;GateWayKey++){
        ip="192.168."+GateWayKey+".1";
        AllSQLs.add(exec.submit((new PingTask(ip,GateWayKey))));
    }
        AllGateWays = FoundedGW.GiveMeGWs();
    for (int j : AllGateWays){
        for (;SubNetKey<=SubNetKeyStop;SubNetKey++){
            ip="192.168."+j+"."+SubNetKey;         
            AllSQLs.add (exec.submit(new PingTask(ip,null))));
        }
 exec.shutdown();
} 
```

这是执行 ping 和存储网关 ID 的类：

```
public class PingTask implements Callable <String> {
String ips; 
int GateWay;
public PingTask (){
}

public PingTask (String ip, int GateWayKey){
    ips=ip;
    GateWay=GateWayKey;
}

public String call(){
    InetAddress address;
    try {
        address = InetAddress.getByName(ips);
        try {
            if (address.isReachable(5000)) { 
                        StoredGW GWs = new StoredGW();
                        GWs.addNewGW(GateWay);
                } else {
                        return null;
                }
            } catch (IOException e) {
                return null;
            }
        } catch (UnknownHostException e) {
            return null;
        }
}
} 
```

这是我存储网关的课程

```
public class StoredGW {
Vector <Integer> AllFoundedGWs= new Vector<Integer>();
public void addNewGW(int i){
    AllFoundedGWs.add(i);
}
public Vector<Integer> GiveMeGWs(){
    return AllFoundedGWs;
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T12:25:11.060

问题在这里：

```
StoredGW GWs = new StoredGW();
GWs.addNewGW(GateWay); 
```

您制作了一个新的 StoreGW（作为局部变量），然后将其丢弃。而是使用 , `FoundedGW`。您必须确保它对您的任务可见，您可能必须将它作为构造函数参数传递，以便它可以在您的任务中使用。

尝试这个：

```
public class PingTask implements Callable <String> {
    String ips; 
    int GateWay;
    StoredGW store;

    public PingTask (){
    }

    public PingTask (String ip, int GateWayKey, StoredGW store){
        ips=ip;
        GateWay=GateWayKey;
                    this.store = store;
    }

    public String call(){
        InetAddress address;
        try {
            address = InetAddress.getByName(ips);
            try {
                if (address.isReachable(5000)) { 
                            store.addNewGW(GateWay);
                    } else {
                            return null;
                    }
                } catch (IOException e) {
                    return null;
                }
            } catch (UnknownHostException e) {
                return null;
            }
    }
} 
```

然后你可以这样称呼它：

```
AllSQLs.add(exec.submit((new PingTask(ip,GateWayKey, FoundedGW)))); 
```

作为一个不相关的旁注，您需要查看[Java 命名约定的标准](http://www.oracle.com/technetwork/java/javase/documentation/codeconvtoc-136057.html)，它会使您的代码更容易被其他人理解。

# css - 将两个 div 对齐？导轨

> ID：14398847
> 
> 赞同：0
> 
> 时间：2013-01-18T12:20:51.713
> 
> 标签：css, alignment, erb

我有这两个按钮 div，我想在彼此下方对齐，彼此之间有大约 10px 的边距。这是代码，拍手没有意义。

```
<div id = "buttons">

      <div id = "signin-button">
      <%= link_to "Sign In", new_user_session_path, :id => "SignInText" %>
    </div>

    <div id = "signup-button">
      <%= link_to "Sign Up", new_user_registration_path, :id => "SignUpText" %>
    </div>

  </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T12:22:21.877

一些css，你完成了：

```
#signin-button,
#signup-button
{
  float: right;
  margin-bottom: 10px;
} 
```

并更改您的 div 以使用类而不是 id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T12:51:03.640

这两个 div 可以使用这个 css 在彼此下方对齐 -

```
 #signin-button,#signup-button{ display : inline position:absolute;margin-bottom: 10px; } 
```

# bash - 使用 awk 在文件中搜索

> ID：14398848
> 
> 赞同：0
> 
> 时间：2013-01-18T12:20:52.583
> 
> 标签：bash, awk

我需要像哈希一样在文件中搜索。想知道 awk 是否是正确的解决方案

输入示例：

```
bla   123.123.123.0
# This line should be a comment
ble      www.ble.com
bli  <random whitespace> ::1
blo   anything 
```

根据上下文，我需要两个不同的输出：

获取密钥：

```
bla ble bli blo 
```

并搜索（ble）

```
www.ble.com 
```

我希望这是微不足道的`awk`

**编辑：**改进了输入格式的描述

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T12:28:18.230

像这样的一种方式（要求不是很清楚）：

```
$ awk '!/^#/{a[$1]=$2}END{print a[x];}' x='ble' file
www.ble.com 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T12:28:45.547

获取密钥：

```
kent$  grep -oP "^\w+(?= )" file
bla
ble
bli
blo 
```

如果您希望它们与 awk 放在一行中

```
kent$  awk 'NR!=2{printf $1" "}' test
bla ble bli blo 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T12:27:24.213

不是很清楚格式...首先这个怎么样？

```
$ awk '/^[^#]/{print $1}/www/{print $2}' input.txt
bla
ble
www.ble.com
bli
blo 
```

或“两个不同的输出：

```
/^[^#]/ {
    k[$1]++
}
/www/ {
    w[$2]++
}

END {
    print "keys:"
    for (x in k)
        print "\t"x
    print "urls:"
    for (x in w)
        print "\t"x 
```

}

输出：

```
$ awk -f keys.awk input.txt
keys:
    bla
    ble
    bli
    blo
urls:
    www.ble.com 
```

# php - 将分数转换为单词

> ID：14398849
> 
> 赞同：10
> 
> 时间：2013-01-18T12:20:54.200
> 
> 标签：php, fractions

我想知道是否有一种巧妙的方法可以使用 PHP将其转换`1/2, 1/4, 5/8`为单词 ( )。`half, quarter, five eighths`

我有一个产品数据提要，需要根据名称为每个产品创建一个干净的 URL。有些测量值像 1/4"，目前我换掉任何非字母/数字，在这种情况下留下“14”。将此分数转换为“四分之一”会更有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T12:34:44.333

如果你需要打印`two by five`等`one by four`，我有办法。

1.  用“/”爆炸你的号码。`$nums= explode("/",$num)`

2.  使用此链接中的[函数](http://www.karlrixon.co.uk/writing/convert-numbers-to-words-with-php/)将数字转换为数字，

> $ones= convert_number_to_words($nums[0]);

```
$two=  convert_number_to_words($nums[1]); 
```

然后，`echo $ones."by".$two`; 输出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T12:37:46.653

不，没有巧妙的方法可以做到这一点。

你需要

*   为分子实现一个[整数到基数字符串](http://www.karlrixon.co.uk/writing/convert-numbers-to-words-with-php/)转换器
*   将其修改为分母的 int-to-ordinal-string 转换器（“第三”而不是“三”等，而不是将“二十三”变成“第二十三”）
*   添加一些特殊情况（“第二”->“一半”，“第四”->“四分之一”，如果你不是美国人......“第一”->“”？）
*   可以选择实现一个[简化](https://stackoverflow.com/questions/12412782/simplify-a-fraction)器，所以“2/4”=>“一半”而不是“两个季度”
*   如有必要，不要忘记将分母复数！

# sql-server - 如何修改主键列以使其自动生成？

> ID：14398860
> 
> 赞同：2
> 
> 时间：2013-01-18T12:21:32.487
> 
> 标签：sql-server, tsql, sql-server-2012

> **可能重复：**
> [如何在创建表后设置自动增量而不会丢失任何数据？](https://stackoverflow.com/questions/6084572/how-to-set-auto-increment-after-creating-a-table-without-any-data-loss)

如何修改 SQL Server 2012 表的主键列（整数类型）以使其自动生成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T12:28:16.080

```
CREATE TABLE dbo.Test(PkCol int CONSTRAINT PK_Test_PkCol PRIMARY KEY, OtherCol varchar(1));

ALTER TABLE dbo.Test
DROP CONSTRAINT PK_Test_PkCol 
GO
ALTER TABLE dbo.Test DROP COLUMN PkCol
ALTER TABLE dbo.Test
ADD PkCol int IDENTITY(1,1) CONSTRAINT PK_Test_PkCol PRIMARY KEY
GO 
```

[**身份**](http://msdn.microsoft.com/en-us/library/ms186775%28v=sql.105%29.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T12:35:22.723

您可以删除现有列并添加列类型指定为的新列`IDENTITY`。

但要小心！

[我喜欢并从这里](http://www.sqlservercentral.com/Forums/Topic126147-8-1.aspx)复制了以下评论：

如果您只是删除现有列并添加一个具有相同名称但将其定义为标识的新列，您可能会修改表中某些记录的主键值。不能保证新列将获得与旧列相同的值。

由于无法将列本身修改为标识列，因此您必须创建一个带有标识列的新表，将旧表中的数据插入到新表中（使用 set identity_insert on you'll get新列中的值与旧列中的值相同），重命名或删除原始表（最好先重命名它，这样如果出现问题，您就可以回滚修改），重命名新表到原始表的名称，重新创建引用原始表的外键并运行`dbcc checkident`以将身份的种子初始化为下一个数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T13:16:46.963

既然您说的是 SQL 2012，那么您还有另一个选择：序列。查看[联机丛书](http://msdn.microsoft.com/en-us/library/ff878370.aspx)，了解如何使用“下一个值”作为列的默认值。

# python - 从 shell 运行时，如何告诉 pdb.run 使用我当前的导入？

> ID：14398864
> 
> 赞同：0
> 
> 时间：2013-01-18T12:21:46.857
> 
> 标签：python, pdb

我想在 Python shell 上使用`pdb.run()`. 我知道我可以给它一个`globals`或一个`locals`参数，但我不知道要传递什么值，以便我将所有当前的导入保留在调试器会话中。 `pdb.run('myfunction()')`似乎没有保留我以前在 shell 中所做的任何导入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:19:24.213

我找到了答案。您需要传入`locals()`函数的结果：

```
pdb.run('myfunction()',locals()) 
```

# php - CSS 还是 PHP？颜色是原始颜色的 80% 但没有“透明度”？

> ID：14398865
> 
> 赞同：6
> 
> 时间：2013-01-18T12:21:46.687
> 
> 标签：php, css, colors

这可能是一个棘手的问题。

我有一个 php 函数，它返回一个`rgba()`带有参数的颜色值`$alpha`。

```
function colorWheel($alpha) {

   "rgba(170, 135, 178, ".$alpha.")"
   …
} 
```

所以打电话的时候……</p>

```
.title { color: <?php echo colorWheel(.8); ?>; } 
```

……我明白了`rgba(170, 135, 178, .8);`

* * *

我遇到的问题是颜色是“透明的”并显示“叠加层”。

![在此处输入图像描述](../Images/ded750fd5ede3af206d87d424ba3fdbb.png)

**然而我真正喜欢的只是色值的80%！** 没有任何透明覆盖。

现在的问题是如何解决这个问题？

任何有创意的想法如何做到这一点？我不需要使用`rgba()`它，这只是我想到的最简单的事情。有没有一种**CSS**方法不混合具有 alpha 值的重叠形状？

或者是否有一个 php 解决方案来计算**80%**的版本`rgb(170, 135, 178)`？重要的是，此计算与函数一起动态工作，因为函数中有更多颜色 -这是**[“如何基于日期和随机返回颜色值？”](https://stackoverflow.com/questions/14231823/how-to-return-a-color-value-based-a-date-and-random)****的后续问题。！**

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T12:46:10.020

问题是您对“80% 颜色”的定义实际上是什么。

CSS 目前有 2 种颜色空间可用：RGB 和 HSL（实际上得到[了很好](http://caniuse.com/#search=hsl)的支持）。

您可以进行以下 RGB 计算：

```
function colorWheel($alpha) {

    'rgba('.$r*$alpha.','.$g*$alpha.','.$b*$alpha.', 1)';
    …
} 
```

或者您可以采用 HSL 并将亮度（和或饱和度）通道降低 20%。在进行诸如使颜色更深/更亮之类的操作时，HSL 颜色空间更加直观。

```
function colorWheel($alpha) {

    "hsla($h,$s,".$l*$alpha.",1)";
    // or
    // ("hsla($h, "+$s*$alpha+", $l, 1)";)
    …
} 
```

这些都产生（略微）不同的结果。

颜色空间可以通过一些不太复杂的公式相互转换。也许你应该看看一个随机的颜色选择器（例如[这个](http://www.workwithcolor.com/hsl-color-picker-01.htm)或[那个](http://www.colorpicker.com/)），然后决定哪种计算方式最适合你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T12:25:57.067

应该这样做：

```
function colorWheel($alpha) {
    $r = round(170 * $alpha);
    $g = round(135 * $alpha);
    $b = round(178 * $alpha);
    "rgba($r, $g, $b, 1)";
    …
} 
```

好吧，这会使颜色更深，如果你想让它更亮，你必须将 alpha 设置为 > 1 的值，并检查 r、g 或 b 是否超过 255，如果超过，则将其设置为 255

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T12:38:51.630

要使用不透明度模拟颜色，您还需要背景颜色。可以说，那`R,G,B`是背景颜色组件，`r,g,b`您是颜色组件。如果要在特定背景上模拟不透明度颜色，则应取同一运河的相应值并添加特定权重：

```
r = r*alpha + R*(1-alpha)
g = g*alpha + G*(1-alpha)
b = b*alpha + B*(1-alpha) 
```

让我们举个简单的例子。您想 在背景（白色）`alpha = 0.8` 上使用颜色（红色）。这意味着，你需要总和 80% 你的颜色 + 20% BG：`rgb(r,g,b) = rgb(255,0,0)``rgb(R,G,B) = rgb(255,255,255)`

```
r = 255*0.8 + 255*0.2 = 255
g = 0*0.8 + 255*0.2 = 51
b = 0*0.8 + 255*0.2 = 51 
```

# c# - 实体框架数据库首次配置

> ID：14398867
> 
> 赞同：0
> 
> 时间：2013-01-18T12:21:54.390
> 
> 标签：c#, asp.net, entity-framework-5

我的数据库中有以下表格

备注表：

*   笔记ID
*   描述
*   任务 ID（可以为 NULL）

任务表：

*   任务ID
*   任务类型
*   任务描述

我使用 Entity Framework 5.0 Database First 方法。

在某些情况下，会有与单个任务相关联的笔记，但也会有笔记是独立的，这意味着它们没有链接到单个任务。

我的问题是我需要如何配置 edmx（模型）文件，所以当我要求一个任务时，他会给我相关的注释？

我认为这是我需要配置映射的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:30:27.693

你不必配置任何东西。只需从数据库中生成模型，然后

```
 var query = context.Tasks.Include("Notes"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T15:41:48.150

如果您首先编写代码，那么这将自动执行。只需使 TaskId 可以为空：

```
public class Note
{
    public int NoteID {get; set;}
    public string Description {get; set;}
    public int? TaskId {get; set;} // Notice the int is nullable

    public virtual Task {get; set;}
}

public class Task
{
    public int TaskID {get; set;}
    public TaskTypeEnum TaskType {get; set;}
    public string Description {get; set;}

    public virtual ICollection<Note> Notes {get; set;}
} 
```

# python - 强制 genfromtxt 输出为无向量

> ID：14398868
> 
> 赞同：1
> 
> 时间：2013-01-18T12:21:55.373
> 
> 标签：python, numpy, genfromtxt

在只加载一列数据的情况下，有没有办法强制 genfromtxt 输出形状为 : (xx, 1) 的数据？通常的形状是 (xx, )。xx 在我的示例中可以是任何整数。

更新：这是代码示例：

```
import numpy as np
a = np.zeros([1000, 10])
nbcols = 1
for ind in range(0, 10, nbcols)
    a[:, ind : ind + nbcols] = np.genfromtxt('file_1000x10.csv', usecols = range(nbcols)) 
```

这段代码仅适用于 nbcols >= 2; 假设 nbcols 是整数 c [1, 10]。是否有解决方案使其适用于 nbcols = 1 而无需添加 if 语句。

事实上，我为这篇文章简化了太多的原始代码，尽管这不会影响我的问题的答案。事实上，文件名是通过一个变量给出的，如下所示：

```
filename = 'file_1000x10_' + '%02d' % ind.astype(int) + '.csv' 
```

因此，在 for 循环的每次迭代中，np.genfromtxt 都会从另一个文件加载数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:23:20.717

我认为诀窍在于`reshape(-1, nbcols)`你从中得到什么`np.genfromtxt`，所以你的作业应该是这样的：

```
a[:, ind:ind + nbcols] = np.genfromtxt('file_1000x10.csv',
                                       usecols = range(nbcols)).reshape(-1, nbcols) 
```

在单独的说明中，`ind`每次循环和读取文件是不必要的。你可以做一些更高维度的巫术，如下所示：

```
import numpy as np
from StringIO import StringIO

def make_data(rows, cols) :
    data = ((str(k + cols * j) for k in xrange(cols)) for j in xrange(rows))
    data = '\n'.join(map(lambda x: ' '.join(x), data))
    return StringIO(data)

def read_data(f, rows, cols, nbcols) :
    a = np.zeros((rows, (cols + nbcols - 1) // nbcols, nbcols))
    a[...] = np.genfromtxt(f, usecols=range(nbcols)).reshape(-1, 1, nbcols)
    return a.reshape(rows, -1)[:, :cols]

>>> read_data(make_data(3, 6), 3, 6, 2)
array([[  0.,   1.,   0.,   1.,   0.,   1.],
       [  6.,   7.,   6.,   7.,   6.,   7.],
       [ 12.,  13.,  12.,  13.,  12.,  13.]])
>>> read_data(make_data(3, 6), 3, 6, 1)
array([[  0.,   0.,   0.,   0.,   0.,   0.],
       [  6.,   6.,   6.,   6.,   6.,   6.],
       [ 12.,  12.,  12.,  12.,  12.,  12.]])
>>> read_data(make_data(3, 6), 3, 6, 4)
array([[  0.,   1.,   2.,   3.,   0.,   1.],
       [  6.,   7.,   8.,   9.,   6.,   7.],
       [ 12.,  13.,  14.,  15.,  12.,  13.]]) 
```

* * *

**原始答案** 您可以添加尺寸为 1 的额外尺寸以`your_array`使用：

```
your_array.reshape(your_array.shape + (1,)) 
```

或同等的

```
your_array.reshape(-1, 1) 
```

同样可以实现

```
your_array[..., np.newaxis] 
```

或同等的

```
your_array[..., None] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T18:56:24.857

如果您可以使用`loadtxt`而不是`genfromtxt`，并且如果您使用的是 numpy 1.6.0 或更高版本，则该`ndmin`参数允许您指定数组的（最小）维数。例如：

```
a[:, ind : ind + nbcols] = np.loadtxt('file_1000x10.csv', usecols=range(nbcols), ndmin=2) 
```

# html - 带有导航箭头 HTML 的选框

> ID：14398872
> 
> 赞同：1
> 
> 时间：2013-01-18T12:22:13.567
> 
> 标签：html, marquee, navigationcontroller

我在我的 HTML 中创建了一个选取框

```
<marquee behavior="alternate" scrollamount="1" width="400">
</marquee> 
```

它工作正常。

但我想在这个选框上添加箭头，以便让用户`left/right`更快地移动内容。

我一直在尝试使用滚动条，但似乎不是最好的解决方案，因为滚动宽度必须小于选取框宽度才能工作。

任何解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T12:25:03.810

您只是使用纯 HTML，还是可以使用 Javascript / jQuery？如果是这样，这样的事情可能会有所帮助：

[http://remysharp.com/demo/marquee.html](http://remysharp.com/demo/marquee.html)

这只是来自一个快速的谷歌，所以那里可能有更漂亮的 jQuery 解决方案。

# javascript - 禁止页面上的内联脚本

> ID：14398877
> 
> 赞同：0
> 
> 时间：2013-01-18T12:22:17.953
> 
> 标签：javascript, cross-browser

有没有办法通过指定一些 HTTP 标头、服务器上的策略或类似内容来禁止浏览器执行某些页面的内联脚本（代码直接放在页面上，而不是外部资源中，即事件处理程序、脚本块等）？我正在寻找一些通用的解决方案：跨浏览器和 HTTP 服务器不可知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T12:35:45.330

基本上，这称为[XSS](http://en.wikipedia.org/wiki/Cross-site_scripting)过滤，一个简单的答案是*阻止它的输入*，或者如果有任何通过，则*根本不渲染它们*。有很多方法可以做到这一点，图书馆也可以帮助你，具体取决于平台。

在入口点，您应该过滤它们。应始终过滤来自客户的提交。这称为 XSS 过滤。

在渲染方面，[`html_entities`](http://php.net/manual/en/function.htmlentities.php)如果您想将特殊字符（尤其是来自用户输入的特殊字符）转义到页面中，您应该执行一些操作。

所有这些都是在服务器上完成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T21:41:31.203

经过大量的谷歌搜索和与大学的一些讨论，我终于找到了解决方案 -**[内容安全策略](http://en.wikipedia.org/wiki/Content_Security_Policy)**（描述这个概念的好文章 - [“内容安全策略简介”](http://www.html5rocks.com/en/tutorials/security/content-security-policy/)由 Mike West 撰写）。现在它在 W3C 的[候选推荐](http://www.w3.org/TR/CSP/)阶段，但最流行的浏览器已经支持它（不幸的是在 IE 版本 < 10 中支持）。

它完全符合我的要求：

*   它是一个响应 HTTP 标头，因此它与服务器无关
*   它（或多或少......）跨浏览器
*   它可以禁止浏览器执行内联脚本（带有指令`unsafe-inline`）或 eval（`unsafe-eval`；eval 是邪恶的）并引入了许多有用的限制（从浏览器安全的角度来看）

# oracle - Oracle XE 11g 主页不显示

> ID：14398879
> 
> 赞同：8
> 
> 时间：2013-01-18T12:22:20.240
> 
> 标签：oracle, installation, oracle11g, listener

我一直在寻找解决我的问题的方法一段时间，但似乎没有一个有效，这是我在重新安装之前的最后一次尝试。

我今天通过它的安装向导安装了 Oracle XE 11g 第 2 版，一切顺利。我似乎遇到的麻烦是我无法打开浏览器主页。

浏览器给了我错误：`cannot establish a connection to the server at 127.0.0.1:8080`

我在 Windows 7 32 位上，我已经下载并安装了 XE。

通过阅读所有可能的答案，我收集到在回答我的问题之前可能需要一些信息。我运行的各种命令的结果也是如此，所有答案都要求。

1)

```
C:\Users\lenove> netstat -nao | find "8080" 
```

这个没有结果

2)

```
C:\Users\lenovo> lsnrctl status

LSNRCTL for 32-bit Windows: Version 11.2.0.2.0 - Production on 18-JAN-2013 16:46:43

Copyright (c) 1991, 2010, Oracle.  All rights reserved.

Connecting to (DESCRIPTION=(ADDRESS=(PROTOCOL=IPC)(KEY=EXTPROC1)))
STATUS of the LISTENER
------------------------
Alias                     LISTENER
Version                   TNSLSNR for 32-bit Windows: Version 11.2.0.2.0 - Production
Start Date                18-JAN-2013 16:18:54
Uptime                    0 days 0 hr. 27 min. 52 sec
Trace Level               off
Security                  ON: Local OS Authentication
SNMP                      OFF
Default Service           XE
Listener Parameter File   C:\oracle\oraclexe\app\oracle\product\11.2.0\server\network\admin\listener.ora
Listener Log File         C:\oracle\oraclexe\app\oracle\diag\tnslsnr\Voldemort\listener\alert\log.xml
Listening Endpoints Summary...
  (DESCRIPTION=(ADDRESS=(PROTOCOL=ipc)(PIPENAME=\\.\pipe\EXTPROC1ipc)))
  (DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)(HOST=Voldemort)(PORT=1521)))
Services Summary...
Service "CLRExtProc" has 1 instance(s).
  Instance "CLRExtProc", status UNKNOWN, has 1 handler(s) for this service...
Service "PLSExtProc" has 1 instance(s).
  Instance "PLSExtProc", status UNKNOWN, has 1 handler(s) for this service...
Service "xe" has 1 instance(s).
  Instance "xe", status READY, has 1 handler(s) for this service...
The command completed successfully 
```

3)

```
SQL> SELECT dbms_xdb.gethttpport FROM dual;
SP2-0640 : Not Connected 
```

4) oraclexe/app/oracle/product/11.20/server/network/ADMIN/listener.ora的目录（oracleexe是安装向导建议的默认安装目录）

```
SID_LIST_LISTENER =
  (SID_LIST =
    (SID_DESC =
      (SID_NAME = PLSExtProc)
      (ORACLE_HOME = C:\oracle\oraclexe\app\oracle\product\11.2.0\server)
      (PROGRAM = extproc)
    )
    (SID_DESC =
      (SID_NAME = CLRExtProc)
      (ORACLE_HOME = C:\oracle\oraclexe\app\oracle\product\11.2.0\server)
      (PROGRAM = extproc)
    )
  )

LISTENER =
  (DESCRIPTION_LIST =
    (DESCRIPTION =
      (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC1))
      (ADDRESS = (PROTOCOL = TCP)(HOST = Voldemort)(PORT = 1521))
    )
  )

DEFAULT_SERVICE_LISTENER = (XE) 
```

我尝试同时使用 chrome 和 firefox（两者的最新版本），但仍然无法获得它。

**注意：**这是我第一次尝试 oracle，所以我对尝试线程建议的每个解决方案都有些谨慎，因此我有自己的线程。

提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-10T10:34:14.267

我安装在 Windows 7 pro 上（在本地管理员帐户下）并且运行顺利。我在 Windows 7 Home Premium 上安装了完全相同的包（UAC 提示提升到本地管理员），但我遇到了问题：没有 XE 主页。

您应首先检查 Windows 服务（通过控制面板 > 管理工具 > 服务）OracleServiceXE 和 OracleXETNSListener 是否确实已启动。

然后，您可以使用（将 \Oracle\XE 调整到您的安装路径）检查（如顶部帖子所示）TNS 侦听器状态

```
C:\Oracle\XE\app\oracle\product\11.2.0\server\bin\lsnrctl status 
```

这会产生*Listening Endpoints*，如果您没有看到**三行**（可能缺少第三行！）：

```
 (DESCRIPTION=(ADDRESS=(PROTOCOL=ipc)(PIPENAME=\\.\pipe\EXTPROC1ipc)))
  (DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)(HOST=BHPPC)(PORT=1521)))
  (DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)(HOST=BHPPC)(PORT=8080))(Presentation=HTTP)(Session=RAW)) 
```

那么这正是问题所在。诀窍是记下 TNS 服务侦听的主机名（例如上例中的 BHPPC）。然后在您的`C:\Windows\System32\drivers\etc\hosts`喜欢中添加 en 条目（单独一行，在 127.0.0.1 之前没有空格，后跟空格或制表符，然后是您的主机名）：

```
 127.0.0.1  BHPPC 
```

并重新启动上面列出的两个 Windows 服务。使用命令再次检查*监听端点*`lsnrctl status`；如果现在列出了神奇的第三行，则 XE 主页将起作用。主机名解析确实存在一个错误，您应该为 TNS 服务提供一个明确的 IP 地址映射，令人惊讶的是，它不需要监听端口 1521。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-23T08:13:16.170

**我建议您从本地**管理用户继续安装。

在我的电脑上：windows 7 专业版，64 位

*   与域中的用户连接，在管理组中：安装失败，没有任何消息。在位于**/oraclexe/app/oracle/product/11.2.0/server/config/log**的日志文件中，我发现了很多“未连接”消息（抱歉，我没有保留日志文件）

*   与本地管理用户连接：安装工作和菜单 getStarted 工作：浏览器显示 Oracle Database XE 11.2 管理主页。

# mysql - 按评级类型分组？

> ID：14398889
> 
> 赞同：3
> 
> 时间：2013-01-18T12:22:57.107
> 
> 标签：mysql, sql, pivot

我有两张桌子：

ab_message

*   用户身份
*   标题
*   内容
*   问题

和 ab_message_rating：

*   ID
*   用户身份
*   message_id
*   created_at
*   更新时间

`ab_message`与 存在 OneToMany 关系`ab_message_rating`。每个条目`ab_message_rating`都有 1、2 或 3 作为评分值。

所以我想在一个查询中选择消息和所有相关的表条目。关键是，我需要在这个查询评级中按值计算。

例如，结果应该是：

> 消息 abc 有 5 个等级为 1 的条目、7 个等级为 2 的条目和 10 个等级为 3 的条目

如何在查询中做到这一点？像 Group By 和 A Join 之类的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T12:31:11.297

```
SELECT ID, Title, Content, 
        MAX(CASE WHEN Rating = 'Rating 1' THEN totalCount ELSE NULL END) 'Rating 1',
        MAX(CASE WHEN Rating = 'Rating 2' THEN totalCount ELSE NULL END) 'Rating 2',
        MAX(CASE WHEN Rating = 'Rating 3' THEN totalCount ELSE NULL END) 'Rating 3'
FROM    
(
    SELECT  a.ID, a.Title, a.Content,
            b.Rating, COUNT(*) totalCount
    FROM    Message a
            LEFT JOIN Rating b
                ON a.ID = b.MessageID
    GROUP BY a.ID, a.Title, a.Content, b.Rating
) r
GROUP BY ID, Title, Content 
```

样本结果：

```
╔════╦═══════════════╦══════════╦══════════╦══════════╦══════════╗
║ ID ║     TITLE     ║ CONTENT  ║ RATING 1 ║ RATING 2 ║ RATING 3 ║
╠════╬═══════════════╬══════════╬══════════╬══════════╬══════════╣
║  1 ║ Lost Prophets ║ CONTENT1 ║        1 ║        5 ║        7 ║
║  2 ║ Cannibal      ║ CONTENT2 ║        3 ║        4 ║        6 ║
║  3 ║ Sigbin        ║ CONTENT3 ║        4 ║        4 ║        1 ║
╚════╩═══════════════╩══════════╩══════════╩══════════╩══════════╝ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T12:28:17.950

[这](http://www.sqlfiddle.com/#!2/4cb115/2)不是非常有效或漂亮，但它会起作用：

```
select concat('Message "', m.title , '" has ', 
   cast((select count(*) 
        from Table_Rating r 
        where r.message_id = m.id 
        and rating = 1) as char),
   ' entries of rating 1, ',
   cast((select count(*) 
        from Table_Rating r 
        where r.message_id = m.id 
        and rating = 2) as char),
   ' entries of rating 2, and ',
   cast((select count(*) 
        from Table_Rating r 
        where r.message_id = m.id 
        and rating = 3) as char),
   ' entries of rating 3') as FullMessage
from Table_Message m 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T12:46:45.920

```
SELECT 'Message '+ m.title + ' has ' + 
    -- ISNULL(z.Rating1/2/3,0) because z.Rating1/2/3 could be NULL (see OUTER APPLY + Table_Rating may not have rows)
    CONVERT(VARCHAR(11), ISNULL(z.Rating1,0)) + 'entries of rating 1, ' +  
    CONVERT(VARCHAR(11), ISNULL(z.Rating2,0)) + 'entries of rating 2, and '+
    CONVERT(VARCHAR(11), ISNULL(z.Rating3,0)) +  'entries of rating 3' AS Description
FROM Table_Message tm
OUTER APPLY (
    SELECT y.[1] AS Rating1, y.[2] AS Rating2, y.[3] AS Rating3
    FROM (
        -- This query will generate 0, 1, 2 or 3 rows because of GROUP BY r.Rating
        SELECT r.Rating, COUNT(*) as Cnt 
        FROM Table_Rating r 
        WHERE r.message_id = m.id 
        GROUP BY r.Rating
    ) x
    -- The PIVOT operator will transponse (it converts rows into columns) the source rows (alias x) into just one row with 3 columns:
    -- [1] = COUNT for Rating 1, [2] = COUNT for Rating 2, [3] = COUNT for Rating 3
    PIVOT ( MAX(x.Cnt) FOR x.Rating IN ([1], [2], [3]) ) y
) z 
```

# asp.net-mvc - 相对路径无法在 iis 7.5 上运行，但它可以在调试模式下与 2010 相比

> ID：14398897
> 
> 赞同：0
> 
> 时间：2013-01-18T12:23:39.713
> 
> 标签：asp.net-mvc, relative-path

为了简要介绍我们的问题，我默认使用由 VS 创建的 MVC 应用程序，只有我添加的图像文件夹有一个徽标图像。

我在站点主文件中使用此图像作为我用来访问它的徽标路径../../Images/logo.png。

此徽标图像在调试模式 vs 2010 中加载，但是当我在本地主机 iis 7.5 中发布它时，它不会被加载。单击错误时，它显示不同的路径。

尽管上述内容在我的共享服务器上有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T18:10:37.997

谢谢，我用谷歌搜索了很多，并在某些页面上找到了一些提示，这是我使用的补救措施 src='<%ResolveUrl("../../Images/logo.png")%>' 并且工作正常

# php - foreach 和 if，以正确的顺序显示内容

> ID：14398899
> 
> 赞同：0
> 
> 时间：2013-01-18T12:23:43.410
> 
> 标签：php

这是我的代码，它基本上抓取`$banners`并显示它们，目前有 2 个，但是，它在第​​一个之后停止并显示 html`div id="footerNews...`等，然后再继续。这是对的...

```
 <?php if ($banners) { $i = 1; ?>
<div id="footerBanners">
    <?php foreach ($banners as $banner) { ?>

        <a href="<?php echo $banner['link']; ?>"><img src="<?php echo $banner['image']; ?>" alt="<?php echo $banner['title']; ?>" /></a> 

        <?php if ($i == 1) { ?>
            <div id="footerNewsletter">
                <p>Newsletter Sign Up</p>
                <a href="#">Go</a>
                <input type="text" name="email" placeholder="Email address" />
            </div>
            <div id="footerEvents"><a href="<?php echo $events; ?>"><?php echo $text_events; ?></a></div>
        <?php } ?>
    <?php $i++; } ?>
</div>
<?php } ?> 
```

问题是其中的一些变量`$banners`实际上没有链接。为了解决这个问题，我试图在没有链接的`if`情况下添加一个不显示的声明。`<a href>`但是，这会打乱内容的顺序，重要的是我将内容保持在上面的正确顺序^。这是我的尝试。

```
 <?php if ($banners) { $i = 1; ?>
<div id="footerBanners">
    <?php foreach ($banners as $banner) { ?>
        <?php if ($banner['link'] == '') { ?>
        <img src="<?php echo $banner['image']; ?>" alt="<?php echo $banner['title']; ?>" /><?php } 
        else { ?>
        <a href="<?php echo $banner['link']; ?>"><img src="<?php echo $banner['image']; ?>" alt="<?php echo $banner['title']; ?>" /></a><?php } ?>
        <?php } ?>
        <?php if ($i == 1) { ?>
            <div id="footerNewsletter">
                <p>Newsletter Sign Up</p>
                <a href="#">Go</a>
                <input type="text" name="email" placeholder="Email address" />
            </div>
            <div id="footerEvents"><a href="<?php echo $events; ?>"><?php echo $text_events; ?></a></div>
        <?php } ?>
    <?php $i++; } ?>
</div> 
```

虽然代码按照它所说的去做，但它不再显示正确的顺序，它显示 1 可链接`$banner`然后是 html，然后是图像（即第二个`$banner`没有链接。但是我需要它以相同的方式显示布局作为代码的第一位。这是输出的 html 代码，虽然图像最后出现在网站上。

```
 <div id="footerBanners">
                            <img src="http://mysite.com/image/data/banner4.jpg" alt="Free Delivery" />                          
                            <a href="http://mysite.com/index.php?route=product/category&amp;path=500_509"><img src="http://mysite.com/image/data/banner5.jpg" alt="Gift Vouchers" /></a>                                        <div id="footerNewsletter">
                <p>Newsletter Sign Up</p>
                <a href="#">Go</a>
                <input type="text" name="email" placeholder="Email address" />
            </div>
            <div id="footerEvents"><a href="http://mysite.com/index.php?route=information/information&amp;information_id=17">EVENTS</a></div>
                    </div> 
```

任何指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:23:30.247

```
<?php if ($banners) { 
 echo '<div id="footerBanners">';

 foreach ($banners as $banner) {
    if ($banner['link'] == '') { 
        echo '<img src="'.$banner['image'].'" alt="'.$banner['title'].'" />'; 
    }
    else { 
        echo '<a href="'.$banner['link'].'"><img src="'.$banner['image'].'" alt="'.$banner['title'].'" /></a>';
    }
    if ($first_banner != 'displayed') { 

        echo '<div id="footerNewsletter">
                    <p>Newsletter Sign Up</p>
                    <a href="#">Go</a>
                    <input type="text" name="email" placeholder="Email address" />
                </div>
                <div id="footerEvents"><a href="'.$events.'">'.$text_events.'</a></div>';
        $first_banner = 'displayed';
    }
 }
 echo '</div>';    
}
    ?> 
```

# c++ - 使程序在“机器字节”中具有不同位数的机器之间可移植

> ID：14398902
> 
> 赞同：10
> 
> 时间：2013-01-18T12:23:47.197
> 
> 标签：c++, c

我们都是可移植 C/C++ 程序的粉丝。

我们知道`sizeof(char)`or`sizeof(unsigned char)`总是`1`“字节”。但是那个`1`“字节”并不意味着一个 8 位的字节。它仅表示“机器字节”，其中的位数可能因机器而异。看到[这个问题](https://stackoverflow.com/questions/2215445/are-there-machines-where-sizeofchar-1)。

* * *

假设您将 ASCII 字母“A”写入文件`foo.txt`。如今，在任何具有 8 位机器字节的普通机器上，这些位都会被写出：

```
01000001 
```

但是，如果您要在具有 9 位机器字节的机器上运行相同的代码，我想这些位会被写出：

```
001000001 
```

* * *

更重要的是，后一种机器可以将这 9 位写为一个机器字节：

```
100000000 
```

但是如果我们要在以前的机器上读取这些数据，我们将无法正确地完成它，因为没有足够的空间。不知何故，我们必须首先读取一个机器字节（8 位），然后以某种方式将最后的 1 位转换为 8 位（一个机器字节）。

* * *

程序员如何正确调和这些东西？

我问的原因是我有一个写入和读取文件的程序，我想确保它在 5、10、50 年后不会中断。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-20T18:49:44.207

> 程序员如何正确调和这些东西？

无所作为。您提出了文件系统问题。

想象一下可怕的一天，当第一台 9 位机器启动时，准备重新编译您的代码并处理`A`您去年写入文件的 ASCII 字母。

为了确保 C/C++ 编译器可以合理地存在于这台机器上，这台新计算机的操作系统遵循 C 和 C++ 假定的相同标准，其中**文件的大小以字节为单位。**

*...您的 8 位源代码已经存在小问题。每个源文件的大小只有大约九分之一的机会甚至可以存在于该系统上。*

或者可能不是。就像我经常遇到的情况一样，[Johannes Schaub-litb](https://stackoverflow.com/users/34509/johannes-schaub-litb)已经先发制人地[引用了有关 C++ 源代码有效格式的标准](https://stackoverflow.com/a/331935/16287)。

> 如有必要，物理源文件字符以实现定义的方式映射到基本源字符集（为行尾指示符引入换行符）。三元字符序列（2.3）被相应的单字符内部表示代替。任何不在基本源字符集 (2.2) 中的源文件字符都将替换为指定该字符的通用字符名。（实现可以使用任何内部编码，只要处理源文件中遇到的实际扩展字符，以及源文件中表示为通用字符名称的相同扩展字符（即使用 \uXXXX 表示法）等价的。）

“以实现定义的方式。” 这是个好消息...只要有某种方法可以将您的源代码转换为可以在这台机器上表示的任何 1:1 格式，您就可以编译它并运行您的程序。

所以这就是你真正的问题所在。如果这台计算机的创建者好心提供了一个实用程序来对 8 位 ASCII 文件进行位扩展，以便它们实际上可以存储在这台新机器上，那么`A`您很久以前编写的 ASCII 字母已经没有问题了。如果没有这样的实用程序，那么您的程序已经需要维护，并且您无法采取任何措施来阻止它。

**编辑：较短的答案（解决已被删除的评论）**

问题询问如何处理**特定**的9 位计算机...

*   使用没有向后兼容的 8 位指令的硬件
*   使用不使用“8 位文件”的操作系统。
*   使用 C/C++ 编译器打破了 C/C++ 程序过去编写文本文件的方式。

[Damian Conway](http://en.wikipedia.org/wiki/Damian_Conway)经常重复引用 C++ 与 C 的比较：

> “C++ 试图防范墨菲，而不是马基雅维利。”

他描述的是其他软件工程师，而不是硬件工程师，但意图仍然是合理的，因为推理是一样的。

C 和 C++ 都以某种方式标准化，*要求您假设其他工程师想要玩得好*。您的马基雅维利式计算机不会对您的程序构成威胁，因为它完全是对 C/C++ 的威胁。

回到你的问题：

> 程序员如何正确调和这些东西？

你真的有两个选择。

*   接受您描述的计算机不适合 C/C++ 世界
*   接受 C/C++ 不适合可能在您描述的计算机上运行的程序

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T16:58:39.207

唯一可以确定的方法是将数据存储在文本文件中，将数字存储为数字字符串，而不是一些位。使用 UTF-8 和 base 10 的 XML 在可移植性和可读性方面应该是相当不错的总体选择，因为它定义明确。如果您想偏执，请保持 XML 足够简单，以便在紧要关头可以使用简单的自定义解析器轻松解析，以防您的假设计算机无法使用真正的 XML 解析器。

当解析数字时，它比适合您的数字数据类型的要大，那么，这是您需要在上下文中认为合适的情况下处理的错误情况。或者使用“big int”库，它可以处理任意大的数字（当然，与“本机”数字数据类型相比，性能下降了一个数量级）。

如果您需要存储位字段，则存储位字段，即位数，然后以任何格式存储位值。

如果您有特定的数字范围，则存储该范围，以便您可以明确检查它们是否适合可用的数字数据类型。

字节是非常基本的数据单元，因此您无法真正在具有不同位数的存储之间传输二进制数据，您必须进行转换，并且要转换您需要知道数据的格式，否则您根本无法转换多字节值正确。

添加实际答案：

*   在您的 C 代码中，不要处理字节缓冲区，除非在隔离函数中，然后您将根据 CPU 架构进行适当修改。例如，.JPEG 处理函数将采用以未指定方式包装图像数据的结构，或用于从中读取图像的文件名，但绝不会采用原始`char*`​​到字节缓冲区。
*   将字符串包装在不采用编码的容器中（大概它将在 8 位字节机器上使用 UTF-8 或 UTF-16，在 9 位字节机器上可能当前使用非标准[UTF-9 或 UTF-18](http://en.wikipedia.org/wiki/UTF-9_and_UTF-18)等） .
*   将从外部源（网络、磁盘文件等）读取的所有内容包装到返回本机数据的函数中。
*   创建不会发生整数溢出的代码，并且不要依赖任何算法中的溢出行为。
*   `~0`使用（而不是`0xFFFFFFFF`或其他东西）定义全为位掩码
*   对于大多数不需要整数的数字存储，首选 IEEE 浮点数，因为它们独立于 CPU 架构。
*   不要将持久性数据存储在可能需要转换的二进制文件中。而是使用 UTF-8 中的 XML（可以在不破坏任何内容的情况下转换为 UTF-X，用于本机处理），并将数字作为文本存储在 XML 中。
*   与不同的字节顺序相同，除了更多，唯一可以确定的方法是将您的程序移植到具有不同位数的实际机器上，并运行全面测试。如果这真的很重要，那么您可能必须首先实现这样的虚拟机，并为它移植 C 编译器和所需的库，如果您找不到其他库的话。即使是仔细（=昂贵）的代码审查也只会让你走上正轨。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-18T12:38:28.007

如果您打算为 Quantum Computers 编写程序（我们将在不久的将来购买），那么请开始学习 Quantum Physics 并参加有关编程的课程。

除非您计划在不久的将来使用布尔计算机逻辑，否则..我的问题是您将如何确保今天可用的文件系统明天将不一样？或者用 8 位二进制存储的文件如何在明天的文件系统中保持可移植性？

如果你想让你的程序代代相传，我的建议是创建你自己的计算机，使用你自己的文件系统和你自己的操作系统，并根据明天的需求改变接口。

我的问题是，我几年前编写的计算机系统（摩托罗拉 68000）对于普通大众来说已经不存在了，而且该程序严重依赖机器的字节顺序和汇编语言。不再便携了:-(

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-18T14:05:27.910

如果您正在谈论写入和读取**二进制**数据，请不要打扰。今天没有可移植性保证，除了你从程序中写入的数据可以被用**相同编译器编译的****相同**程序读取（包括命令行设置）。如果您正在谈论编写和阅读**文本**数据，请不要担心。有用。

 ***** * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-21T00:48:15.780

第一：**可移植性最初的实际目标是减少工作量**；因此，如果要实现相同的最终结果，可移植性比不可移植性需要更多的努力，那么在这种情况下编写可移植代码不再是有利的。不要仅仅出于原则而将“可移植性”作为目标。在您的情况下，带有关于磁盘格式的详细记录说明的非便携式版本是一种更有效的面向未来的方法。尝试编写以某种方式迎合任何可能的通用底层存储格式的代码可能会使您的代码几乎难以理解，或者维护它会因此而失宠（如果没有人愿意，无需担心未来的验证）无论如何都要在 20 年后使用它）。

第二：我认为您不必担心这一点，因为在 9 位机器（或类似机器）上运行 8 位程序的唯一现实解决方案是通过**虚拟机。**

在不久的或遥远的将来，任何使用 9 位以上机器的人都极有可能能够启动传统的 x86/arm 虚拟机并以这种方式运行您的程序。从现在开始的 25 到 50 年硬件应该不会有任何问题，为了执行单个程序而运行整个虚拟机；并且该程序可能*仍会*比现在在当前的本机 8 位硬件上更快地加载、执行和关闭。 *（事实上​​，今天的一些云服务已经倾向于启动整个虚拟机来服务单个任务）*

我强烈怀疑这是任何 8 位程序在 9 位/其他位机器上运行的唯一方法，因为其他答案中提到了简单*加载和解析*8 位源代码所固有的基本挑战或8 位二进制可执行文件。

它可能不像“高效”，但它会起作用。当然，这也假设 VM 将具有某种机制，通过该机制可以将 8 位文本文件从虚拟磁盘导入和导出到主机磁盘。

但是，正如您所看到的，这是一个远远超出您的源代码的巨大问题。最重要的是，最有可能的是，在新硬件上更新/修改甚至从头开始重新实现您的程序会更便宜、更容易，而不是费心试图解决这些晦涩难懂的可移植性问题——正面。考虑到它的行为几乎肯定需要比仅仅转换磁盘格式更多的努力。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-18T12:29:33.787

8 位字节将一直保留到时间结束，所以不要担心。会有新的类型，但这种基本类型永远不会改变。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-21T09:17:49.357

有点晚了，但我无法抗拒这一点。预测未来是艰难的。预测计算机的未来对你的代码来说可能比过早的优化更危险。

**简短答案**
虽然我以 9 位系统如何处理 8 位字节的可移植性来结束这篇文章，但这种经历也让我相信 9 位字节系统将永远不会在通用计算机中再次出现。

我的预期是，未来的可移植性问题将是硬件具有至少 16 位或 32 位访问权限，使得 CHAR_BIT 至少为 16。此处的仔细设计可能有助于处理任何意外的 9 位字节。

> 对**/的问题。**读者：有没有人知道今天生产中使用 9 位字节或补码算法的通用 CPU？我可以看到嵌入式控制器可能存在的位置，但仅此而已。

**长答案**
早在 1990 年代，计算机和 Unicode 的全球化让我期望 UTF-16 或更大，以推动每字符位数的扩展：C 中的 CHAR_BIT。但由于遗留的寿命比一切都长，我也期望 8 位字节至少只要计算机使用二进制文件，它就仍然是一个行业标准。

> BYTE_BIT：每字节位数（流行，但不是我所知道的标准）
> BYTE_CHAR：每字符字节数

C 标准没有解决消耗多个字节的**字符。**它允许它，但没有解决它。

> **3.6 字节： （** *C11 标准 ISO/IEC 9899:201x*最终草案）
> 数据存储的可寻址单元，大到足以容纳执行环境的基本字符集的任何成员。
> 
> 注 1：可以唯一地表示对象的每个单独字节的地址。
> 
> 注 2：一个字节由一个连续的比特序列组成，其数量由实现定义。最低有效位称为低位；最高有效位称为高位。

在 C 标准定义如何处理大于 1 的 BYTE_CHAR 值之前，我不是在谈论“宽字符”，这是可移植代码必须解决的主要因素，而不是更大的字节。CHAR_BIT 为 16 或 32 的现有环境是要研究的。ARM 处理器就是一个例子。我看到了两种读取外部字节流的基本模式，开发人员需要从中选择：

*   解压：将一个 BYTE_BIT 字符转换为本地字符。当心符号扩展。
*   打包：将 BYTE_CHAR 字节读入本地字符。

便携式程序可能需要一个 API 层来解决字节问题。为了即时创造和想法，我保留将来攻击的权利：

```
  #define BYTE_BIT 8 // 每字节位数
  #define BYTE_CHAR (CHAR_BIT/BYTE_BIT) //bytes-per-char

  size_t byread(void *ptr,
                size_t size, // BYTE_BIT 字节数
                int packing, // 每个字符要读取的字节数
                                 //（符号扩展为负数）
                文件*流）；

  size_t bywrite(void *ptr,
                size_t 大小，
                内包装，
                文件*流）；

```

*   `size`要传输的 BYTE_BIT 字节数。
*   `packing`每个**char**字符传输的字节数。虽然通常为 1 或 BYTE_CHAR，但它可以指示外部系统的 BYTE_CHAR，它可以小于或大于当前系统。
*   永远不要忘记字节顺序冲突。

**避免 9 位系统：**
我之前为 9 位环境编写程序的经验让我相信我们不会再看到这种情况，除非你碰巧需要一个程序在某个地方的真正旧的遗留系统上运行。可能在32/64 位系统上的[9 位 VM中。](http://www.math.utah.edu/~beebe/vm.html#simh)自 2000 年以来，我有时会快速搜索但没有看到对旧 9 位系统当前后代的引用。

在我看来，任何非常出乎意料的未来通用 9 位计算机都可能具有 8 位模式或 8 位 VM（@jstine）来运行程序。唯一的例外是专门构建的嵌入式处理器，通用代码无论如何都不太可能在其上运行。

在过去，一台 9 位机器是 PDP/15。十年与这种野兽的克隆搏斗让我从没想过会再次出现 9 位系统。我对为什么遵循的首选：

*   额外的数据位来自于抢夺核心内存中的奇偶校验位。旧的 8 位内核带有一个隐藏的奇偶校验位。每个制造商都这样做了。一旦内核变得足够可靠，一些系统设计人员会迅速将现有的奇偶校验转换为数据位，以便在非 MMU 机器较弱的时候获得更多的数字能力和内存地址。现在的内存技术没有这么奇偶校验位，机器没那么弱，64位内存这么大。所有这些都应该使设计更改的成本效益低于当时的更改。
*   在 8 位和 9 位架构之间传输数据，包括现成的本地 I/O 设备，而不仅仅是其他系统，一直是一个痛苦的过程。*同一系统上的*不同控制器使用了不兼容的技术：
    1.  使用 18 位字的低 16 位。
    2.  使用 9 位字节的低 8 位，其中额外的高位可能设置为从奇偶校验敏感设备读取的字节的奇偶校验。
    3.  将三个 8 位字节的低 6 位组合成 18 位二进制字。一些控制器允许在运行时选择 18 位和 16 位数据传输。您的程序会发现什么样的未来硬件和支持系统调用，只是无法提前预测。
*   连接到 8 位互联网本身就足以扼杀任何人的 9 位梦想。当时他们侥幸逃脱，因为当时机器之间的互联程度较低。
*   在字节寻址存储中拥有 2 位的偶数倍数以外的东西会带来各种麻烦。示例：如果您想要一个 8 位字节中包含数千位的数组，您可以`unsigned char bits[1024] = { 0 }; bits[n>>3] |= 1 << (n&7);`. 要完全打包 9 位，您必须进行实际除法，这会带来可怕的性能损失。这也适用于每字字节数。
*   任何没有在 9 位字节硬件上实际测试过的代码都可能在第一次实际冒险进入意想不到的 9 位字节领域时失败，除非代码非常简单，以至于将来为 9 位重构它只是一个小问题. 之前的 byread()/bywrite() 在这里可能会有所帮助，但它可能需要额外的 CHAR_BIT 模式设置来设置传输模式，返回当前控制器如何排列请求的字节。

为了完整起见，任何想要为教育体验担心 9 位字节的人可能还需要担心自己的补码系统会回来；其他似乎已经死的当之无愧的死亡（两个零：+0和-0，是持续噩梦的根源……相信我）。那时 9 位系统似乎经常与补码运算配对。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-01-23T18:46:47.253

我认为未来计算机中非 8 位字节的可能性很低。它需要重写这么多，但收益却很少。但如果发生...

通过在本机数据类型中进行所有计算并仅重写输入，您将为自己省去很多麻烦。我正在描绘类似的东西：

```
template<int OUTPUTBITS, typename CALLABLE>
class converter {
  converter(int inputbits, CALLABLE datasource);
  smallestTypeWithAtLeast<OUTPUTBITS> get();
}; 
```

请注意，这可以在将来存在这样的机器时编写，因此您现在无需执行任何操作。或者，如果您真的很偏执，请确保在 OUTPUTBUTS==inputbits 时只调用数据源。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2013-01-24T04:12:13.860

在编程语言中，一个字节总是 8 位。因此，如果字节表示在某些机器上具有 9 位，无论出于何种原因，都由 C 编译器来协调它。只要您使用 char 编写文本，例如，如果您将“A”写入/读取到文件，您将只写入/读取文件的 8 位。所以，你不应该有任何问题。****

# mysql - 无法在 mysql 触发器中调用函数。错误是：未声明的变量

> ID：14398923
> 
> 赞同：0
> 
> 时间：2013-01-18T12:25:16.130
> 
> 标签：mysql, function, triggers

我的数据库中有一个名为 SPLIT_STRING 的 mysql 用户定义函数

```
CREATE FUNCTION `SPLIT_STR`(
  x VARCHAR(255),
  delim VARCHAR(12),
  pos INT
) RETURNS varchar(255) CHARSET latin1
RETURN REPLACE(SUBSTRING(SUBSTRING_INDEX(x, delim, pos),
       LENGTH(SUBSTRING_INDEX(x, delim, pos -1)) + 1),
       delim, '') 
```

根据位置拆分值，我正在使用触发器来更新状态，我需要一个临时变量来借助函数`SPLIT_STR`as来存储数据

```
delimiter //
CREATE TRIGGER `after_tbl1_insert` AFTER INSERT ON `tbl1`
 FOR EACH ROW BEGIN
DECLARE cab_meter_new VARCHAR(10);
DECLARE cab_cost_new VARCHAR(10);

SET @cab_meter_new = SPLIT_STR(NEW.gps_rs232, '|', 1); 
select SPLIT_STR(NEW.gps_rs232, '|', 1) INTO @cab_meter_new,SPLIT_STR(NEW.gps_rs232, '|', 2) INTO @cab_meter_old; //Throws error
----
---
--
END //
delimiter ; 
```

如果我在触发器中调用一个函数，它会抛出一个错误

```
#1327 - Undeclared variable: SPLIT_STR 
```

这是调用函数设置变量的正确方法吗，我们可以在触发器中调用函数吗，我使用的是Mysql 5.1.66版本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T07:14:02.433

抱歉，问题是 select into 的语法

```
select SPLIT_STR(NEW.gps_rs232, '|', 1) INTO @cab_meter_new,SPLIT_STR(NEW.gps_rs232, '|', 2) INTO @cab_meter_old; // Incorrect - and shows SPLIT_STR is not defined(Thinks as variable)

select SPLIT_STR(NEW.gps_rs232, '|', 1),SPLIT_STR(NEW.gps_rs232, '|', 2)  INTO @cab_meter_new, @cab_meter_old; //Correct syntax to store multiple 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T12:33:34.553

试试这个：：

```
SET @cab_meter_new := SPLIT_STR(NEW.gps_rs232, '|', 1); //Throwing error here 
```

或者你可以::

```
Select SPLIT_STR(NEW.gps_rs232, '|', 1) INTO @cab_meter_new; 
```

# ios - iphone4S没有安装app

> ID：14398928
> 
> 赞同：0
> 
> 时间：2013-01-18T12:25:37.320
> 
> 标签：ios, provisioning-profile

我添加了一个新的设备 ID 并下载了最新的配置文件。

我创建了项目档案。新配置文件适用于所有旧设备，但不适用于新添加的设备。

当我尝试使用 iTunes 安装 .ipa 文件时，它会在第三步（确定要同步的应用程序）中停止。

**以下是设备日志：**

```
finishing deferred symbolic links:
1/18/13 3:49:54 PM  [0x0-0x65065].com.apple.Xcode[968]    /var/folders/X6/X62k2qceFk8k2XLGJwb-Ek+++TI/-Tmp-/IMA232qfBg/Payload/abc.app/CodeResources -> _CodeSignature/CodeResources
1/18/13 3:49:54 PM  [0x0-0x65065].com.apple.Xcode[968]  ]
1/18/13 3:49:54 PM  [0x0-0x65065].com.apple.Xcode[968]  + /usr/bin/codesign --verify -vvvv -R=anchor apple generic and (certificate 1[field.1.2.840.113635.100.6.2.1] exists and (certificate leaf[field.1.2.840.113635.100.6.1.2] exists or certificate leaf[field.1.2.840.113635.100.6.1.4] exists)) /var/folders/X6/X62k2qceFk8k2XLGJwb-Ek+++TI/-Tmp-/IMA232qfBg/Payload/abc.app
1/18/13 3:49:54 PM  [0x0-0x65065].com.apple.Xcode[968]  Program /usr/bin/codesign returned 0 : [/var/folders/X6/X62k2qceFk8k2XLGJwb-Ek+++TI/-Tmp-/IMA232qfBg/Payload/abc.app: valid on disk
1/18/13 3:49:54 PM  [0x0-0x65065].com.apple.Xcode[968]  /var/folders/X6/X62k2qceFk8k2XLGJwb-Ek+++TI/-Tmp-/IMA232qfBg/Payload/abc.app: satisfies its Designated Requirement
1/18/13 3:49:54 PM  [0x0-0x65065].com.apple.Xcode[968]  /var/folders/X6/X62k2qceFk8k2XLGJwb-Ek+++TI/-Tmp-/IMA232qfBg/Payload/abc.app: explicit requirement satisfied
1/18/13 3:49:54 PM  [0x0-0x65065].com.apple.Xcode[968]  ] 
```

任何人都可以帮助我知道发生了什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:05:45.737

我认为您的新 iPhone 4S 中没有安装与 ipa 相关的移动配置文件。为此，您必须将移动配置文件拖放到 iTunes 中。

# c++ - 回声打印实现

> ID：14398929
> 
> 赞同：2
> 
> 时间：2013-01-18T12:25:37.293
> 
> 标签：c++, ios, c, codegen

我正在我的 iOS 6 应用程序中实现 echoprint，但是当我编译我的项目时，它给了我来自 Codegen 的错误。

```
 Undefined symbols for architecture i386:
  "Codegen::Codegen(float const*, unsigned int, int)", referenced from:
      codegen_wrapper(float const*, int) in Codegen_wrapper.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-24T14:29:14.080

这里解释了如何在 iOS 上编译和运行 Codegen：

[Echoprint iOS 缺少框架](https://stackoverflow.com/questions/12135898/echoprint-ios-missing-framework)

由于 XCode 中的模拟器使用 i386 处理器，因此无法将其与在 arm7 中编译的对象链接。

在编译`libechoprint-codegen-ios.a`选择`iPhone Simulator`作为目标时，您将在 i386 中编译它。然后它将成功链接它。您可以通过键入来了解它是在 arm7 还是 i386 中编译的

`lipo -info path/libechoprint-codegen-ios.a`

来源：[http ://www.verious.com/qa/linker-error-for-echoprint-in-ios/](http://www.verious.com/qa/linker-error-for-echoprint-in-ios/)

# java - LDAP 替换一个属性的列表值

> ID：14398933
> 
> 赞同：1
> 
> 时间：2013-01-18T12:25:52.937
> 
> 标签：java, ldap, jndi

我有一个属性，比如`telephonenumber`，它在一个人身上出现了好几次。现在我想用新数字列表替换所有数字：

```
<person>  
<telephonnumber>12345</telephonnumber>  
<telephonnumber>23456</telephonnumber>  
</person> 
```

替换为：

```
<person>  
<telephonnumber>56789</telephonnumber>  
<telephonnumber>78901</telephonnumber>  
</person> 
```

我怎样才能在 Java 中做到这一点？

使用

```
mods.add(new ModificationItem(DirContext.REPLACE_ATTRIBUTE, new BasicAttribute("telephonnumber", "56789")));  
mods.add(new ModificationItem(DirContext.REPLACE_ATTRIBUTE, new BasicAttribute("telephonnumber", "78901"))); 
```

最终所有值将被最后一个 ModificationItem 替换。好吧，我可以通过删除所有数字并从列表中添加所有新值来解决问题。但我认为 Java LDAP 直接支持它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T13:56:21.047

您想使用多值电话属性创建***单个***替换。请参阅[Oracle LDAP 属性教程](http://docs.oracle.com/javase/jndi/tutorial/ldap/misc/attrs.html)。

```
// Create a multivalued attribute that has four String values
BasicAttribute oc = new BasicAttribute("objectClass", "top");
oc.add("person");
oc.add("organizationalPerson");
oc.add("inetOrgPerson"); 
```

提示：在开始编码之前，首先通过[LDIF](https://www.rfc-editor.org/rfc/rfc2849)文件尝试 LDAP 操作。

# php - Jquery 在 facebook 、 twitter 、 google plus iframe 上？

> ID：14398934
> 
> 赞同：1
> 
> 时间：2013-01-18T12:25:54.690
> 
> 标签：php, facebook, twitter

我想在 facebook、twitter、google plus iframe 上运行/执行 jquery 代码。
我已经尝试以多种方式做到这一点，但它不起作用。
代码总是显示错误无/找不到对象。
其实我想知道当前登录的用户是否已经完成了**like/follow/+**。
如果当前登录用户已经点赞/关注，那么我需要**隐藏点赞/关注**链接，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T12:32:38.080

你不能用 jquery 做到这一点，但你可以使用他们自己的 API 来完成你所需要的。例如，Facebook 已经在他们的 API 中包含了所有这些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T12:50:30.217

如果您使用的是 PHP Facebook SDK，您可以按如下方式查询它：

```
 $likes = $facebook->api('me/likes');
 $fanpageliked = false;
 $appliked = false;

    foreach ($likes['data'] as $ilike) {
        if ($ilike['id'] == $fanpageid) {$fanpageliked = true;}
        if ($ilike['id'] == $appid) {$appliked = true; }
    } 
```

如果您的粉丝页面 id 存储在 $fanpageid 中，或者应用程序 id 存储在 $appid 中，那么 $fanpageliked 将为 true（和/或 appid）。

因此，如果您只是在寻找粉丝页面 id，请删除 appid if 并添加中断：

```
 if ($ilike['id'] == $fanpageid) {
      $fanpageliked = true;
      break;
 } 
```

之后，您可以拥有以下内容：

```
if (!$fanpageliked) {
    echo "Like us NOW!";
    // .... display like button etc
   }
else {
     echo "You are ours now. Bwa ha ha!";
   } 
```

# applet - Java 小程序无法在 Java 7 更新中加载

> ID：14398942
> 
> 赞同：0
> 
> 时间：2013-01-18T12:26:11.827
> 
> 标签：applet, java-7

在我们将 PC 升级到 java 7 更新之前，我们的应用程序运行良好。该应用程序在 Java 6 中运行良好，但在 Java 7 中无法运行。

我正在使用 Internet Explorer 7 进行测试。

# perl - 在 ./Merge_gcov_generalised.pl 第 226 行的连接 (.) 或字符串中使用未初始化的值， 第 284046 行 (#1)

> ID：14398943
> 
> 赞同：1
> 
> 时间：2013-01-18T12:26:12.973
> 
> 标签：perl

我编写了一个 perl 脚本来合并来自不同机器的 gcov 文件。下面是我为合并编写的子程序。

```
sub merge_gcov()
    {
        open(FILE1, "<$_[0]") or die "can not open file";
        open(FILE2, "<$_[1]") or die "can not open file";
        open(FILE3, ">$_[2]") or die "can not open file";
        my ($line1, $line2 , $flag );
        while ( 1 )
        {  
            $line1 = <FILE1>; # read them each
            $line2 = <FILE2>;
            last unless ( $line1 || $line2 ); # if both empty exit loop
            #
            # otherwise test for which one just finished
            #
            unless( $line1 )
            {
                $flag = 1;
            last;
            }
            unless( $line2 )
            {
                $flag = 2;
            last
            }   
            #
            # now do the voodo on the two lines
            #
            chomp($line2);
            chomp($line1);
            if($line1=~/^\s*-/ and  $line2 =~/^\s*-/)  
            {   
                print FILE3 "$line1\n";
            }
            elsif($line1=~/^\s*#####/ and  $line2 =~/^\s*#####/) 
            {      
                print FILE3 "$line1\n";
            }
            elsif($line1=~/^\s*#####:\s{0,}(\d{1,})/ and  $line2 =~/^\s{0,}(\d{1,})/) 
            {     
                print FILE3 "$line2\n"
            }
            elsif($line1=~/^\s{0,}(\d{1,})/ and  $line2 =~/^\s*#####:\s{0,}(\d{1,})/) 
            {  
                print FILE3 "$line1\n"
            }
            elsif($line1=~/^\s{0,}(\d{1,})/ and  $line2 =~/\s{0,}(\d{1,})/) 
            { 
                my @values1 =  split(/:/, "$line1");
                my @values2 =  split(/:/, "$line2");
                print FILE3 ("      ",$values1[0]+$values2[0]),":","$values1[1]:","$values1[2]\n";
            }
            else
            {  
                print FILE3 "$line1\n";
                print FILE3 "$line2\n";
             }

        }
    close(FILE3);
    } 
```

合并正确完成，但合并后我得到以下错误....

```
Use of uninitialized value in concatenation (.) or string at
        ./Merge_gcov_generalised.pl line 226, <FILE2> line 284046 (#1)
Use of uninitialized value in concatenation (.) or string at
        ./Merge_gcov_generalised.pl line 226, <FILE2> line 284414 (#1)
Use of uninitialized value in concatenation (.) or string at
        ./Merge_gcov_generalised.pl line 226, <FILE2> line 302995 (#1)
Use of uninitialized value in concatenation (.) or string at
        ./Merge_gcov_generalised.pl line 226, <FILE2> line 311633 (#1)
Use of uninitialized value in concatenation (.) or string at
        ./Merge_gcov_generalised.pl line 226, <FILE2> line 311962 (#1)
Use of uninitialized value in concatenation (.) or string at
        ./Merge_gcov_generalised.pl line 226, <FILE2> line 321536 (#1)
Use of uninitialized value in concatenation (.) or string at
        ./Merge_gcov_generalised.pl line 226, <FILE2> line 323445 (#1)
Use of uninitialized value in concatenation (.) or string at
        ./Merge_gcov_generalised.pl line 226, <FILE2> line 329553 (#1)
Use of uninitialized value in concatenation (.) or string at
        ./Merge_gcov_generalised.pl line 226, <FILE2> line 336009 (#1)
Use of uninitialized value in concatenation (.) or string at
        ./Merge_gcov_generalised.pl line 226, <FILE2> line 336330 (#1)
Use of uninitialized value in concatenation (.) or string at
        ./Merge_gcov_generalised.pl line 226, <FILE2> line 338188 (#1)
Use of uninitialized value in concatenation (.) or string at
        ./Merge_gcov_generalised.pl line 226, <FILE2> line 343170 (#1)
Use of uninitialized value in concatenation (.) or string at
        ./Merge_gcov_generalised.pl line 226, <FILE2> line 349037 (#1)
Use of uninitialized value in concatenation (.) or string at
        ./Merge_gcov_generalised.pl line 226, <FILE2> line 349610 (#1)
Use of uninitialized value in concatenation (.) or string at
        ./Merge_gcov_generalised.pl line 226, <FILE2> line 633937 (#1)
Use of uninitialized value in concatenation (.) or string at
        ./Merge_gcov_generalised.pl line 226, <FILE2> line 634509 (#1)
Use of uninitialized value in concatenation (.) or string at
        ./Merge_gcov_generalised.pl line 226, <FILE2> line 634877 (#1)
Use of uninitialized value in concatenation (.) or string at
        ./Merge_gcov_generalised.pl line 226, <FILE2> line 653458 (#1)
Use of uninitialized value in concatenation (.) or string at
        ./Merge_gcov_generalised.pl line 226, <FILE2> line 662096 (#1)
Use of uninitialized value in concatenation (.) or string at
        ./Merge_gcov_generalised.pl line 226, <FILE2> line 662425 (#1)
Use of uninitialized value in concatenation (.) or string at
        ./Merge_gcov_generalised.pl line 226, <FILE2> line 671999 (#1)
Use of uninitialized value in concatenation (.) or string at 
```

我知道当我不使用警告时我没有收到这些警告**，**但是有没有其他方法可以删除这些警告。

第 226 行是：**print FILE3 (" ",$values1[0]+$values2[0]),":","$values1[1]:","$values1[2]\n";**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-23T03:04:50.627

您测试未初始化的一行或另一行，但您从不使用该信息，因此您`undef`在 final 中打印了一个与换行符连接的行`else`；这是您的警告的来源。

您的`gcov`文件实际上有一堆多余的换行符，这是由一个文件首先用完引起的，每个不匹配的行一个。它们之所以有效，是因为`gcov`它接受的内容非常宽容，或者因为`gcov`当它看到第一个裸换行符时停止静默读取输入。第一个很棒；第二个非常糟糕。

为了解决这个问题，我们需要弄清楚我们期望在哪里拥有一个`undef`，以及当我们找到一个时要做什么。这段代码可以`undef`在我们到达每个文件`$line1`的`$line2`末尾时生成。让我们看看你如何使用这些来查看哪些地方`undef`可以，哪些地方不行。

1.  测试两行是否为假（例如`undef`）：这是`undef`.
2.  设置`$flag`：很好用，但逻辑​​不好，因为你再也不会使用`$flag`了。
3.  模式匹配：很好的用法，因为模式匹配不应该（并且确实）失败，这对您的代码是正确的。
4.  打印一行可能是`undef`: bad usage，因为这会生成警告并输出一个额外的空换行符。

因为模式匹配都将失败`undef`，所以您可以完全跳过设置的代码`$flag`并使最后一个`else`看起来像这样：

```
...
else {
    # One or the other file has run out already. Note that
    # the $line variables being undef here is OK because that's
    # an expected possible value that we're actually testing for.
    # We could used "defined $lineX" but since undef itself is 
    # false, this is okay.
    print FILE3 "$line1" if $line1;
    print FILE3 "$line2" if $line2;
} 
```

现在进行一些`undef`哲学思考。

未初始化的变量警告几乎总是某个地方的逻辑错误，尽管 Perl 很擅长修复它。如果你得到这些，你应该寻找以下内容：

1.  我在调用返回的东西`undef`吗？如果是这样，我是说错了，还是参数不好？`//`如果我的调用有效，我可以替换一个默认值而不会出错，比如 0 或 ''（使用定义或运算符）？我是否需要一个表格或子表格来给我默认值？如果我不能使用默认值，我的逻辑有什么问题？
2.  如果不是这种情况，我是在引用未初始化的数组或哈希条目吗？Perl 将*自动激活*这些条目并将它们设置为`undef`. 我的索引或键是坏的吗？如果不是，我应该自己将这些条目设置为默认值，检查我的数组索引，还是检查哈希元素`exists`是否为哈希？否则，适用 1\. 中的标准。
3.  如果这些都不是，我有一个未初始化的标量变量。为什么没有初始化？我应该把它初始化成什么？我*忘记做了*什么假设（通过不将标量初始化为已知值）？

一般来说，除非您的代码应该发出警告（例如，您在其中添加了`warn`一个警告），否则警告意味着某些事情与您预期的不一样。您应该查看它并了解原因，而不仅仅是隐藏诊断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T12:49:47.317

如果您想要做的只是摆脱您已经期望并*考虑**到*的特定警告，那么您所要做的就是：

 *```
{    no warnings 'uninitialized';
     # **Small** bit of code causing the problem.
     say "A string and $probably_undefined";
} 
```

我强调，*小*代码的原因是 Perl 没有一千个警告类别可以通过 pragma 打开和关闭。它有几个相当广泛的类别，如果你因为太大而解除武装，那么空间*会*咬你。这个想法是查看*每个*警告条件并确定未初始化的值是否无效 - 或者您至少可以解释的值。*

# java - 来自java的音频流不工作，但视频工作正常

> ID：14398945
> 
> 赞同：1
> 
> 时间：2013-01-18T12:26:24.383
> 
> 标签：java, javascript, html, struts2

我是 Struts 2 的新手。现在在一个 Web 项目中开发一个画廊页面。因为我必须在没有页面加载的情况下在弹出窗口中显示图像/音频/视频文件。我成功地在图像和视频文件中正常工作，但不是音频文件。我的struts动作如下。

```
<action name="download" class="com.mkyong.common.action.DownloadAction">
 <result name="success" type="stream">
  <param name="contentType">application/octet-stream</param>
  <param name="inputName">fileInputStream</param>
  <param name="bufferSize">256</param>
 </result>
</action> 
```

我的课程文件是

```
try {
fileInputStream = new FileInputStream(new File("E:\\ESS_GALLERY\\2451252452\\Gallery\\Audios\\audio_2.wav"));
    } catch (Exception e) {
        e.printStackTrace();
} 
```

而jsp（HTML）代码是

```
<object id='tempAud1' name="emQTPlayer" height="45px" width="120px"
    style="behavior: url(#BinaryBehaviorID)"
    codebase="http://www.apple.com/qtactivex/qtplugin.cab"
    classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B">
    <param name="autoplay" value="false" />
    <param name="src"
        value="<s:property value="mediaAud[0].fileLocation"/>" />
    <param name="controller" value="true" />
    <param name="type" value="video/quicktime" />
    <param name="align" value="bottom" />
    <param name="border" value="0" />
    <%--<param name="wmode" value="transparent">--%>
    <param name="showcontrols" value="true">
    <embed id='tempAud2' name="emQTPlayer" type="video/quicktime"
        autoplay="false" height="45px" width="120px" align="top" border="0"
        controller="true" postdomevents="true"
        pluginspage="http://www.apple.com/quicktime/download/"
        showcontrols="true" src='' />
</object> 
```

. 在那我将在 onclick 事件中设置 src ......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T06:46:15.087

通过如下更改内容类型参数..

```
<action name="download" class="com.mkyong.common.action.DownloadAction">
        <result name="success" type="stream">
          <param name="contentType">audio/mpeg</param>
          <param name="inputName">fileInputStream</param>
          <param name="bufferSize">256</param>
        </result>
    </action> 
```

这适用于音频文件....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T14:20:13.833

您不提供`<embed>`object 的来源是否正常？

尝试将其更改为

```
<embed id='tempAud2' name="emQTPlayer" type="video/quicktime"
    autoplay="false" height="45px" width="120px" align="top" border="0"
    controller="true" postdomevents="true"
    pluginspage="http://www.apple.com/quicktime/download/"
    showcontrols="true" src='<s:property value="mediaAud[0].fileLocation"/>' /> 
```

# java - Surface 视图中的语音识别 [android]

> ID：14398946
> 
> 赞同：0
> 
> 时间：2013-01-18T12:26:24.883
> 
> 标签：java, android, surfaceview, speech-recognition

我正在尝试在表面视图中进行语音识别。我遇到了一个小错误。
错误：

它不是绘制文本，而是绘制背景。

这一行（#64）：

```
c.drawARGB(255, 0, 0, 255); //works
p.setTextSize(50);
p.setColor(Color.WHITE);
c.drawText("mText: "+mText, 500, 500, p);  //does not work 
```

代码：

```
package com.l3g3nds.virtual_dog;

import java.util.ArrayList;
import java.util.Random;

import android.annotation.TargetApi;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Paint.Style;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.speech.RecognitionListener;
import android.speech.RecognizerIntent;
import android.speech.SpeechRecognizer;
import android.util.Log;
import android.view.MotionEvent;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.view.View;
import android.view.View.OnTouchListener;
import android.widget.TextView;

@TargetApi(8)
public class Main extends SurfaceView implements Runnable, OnTouchListener{

    Thread t;
    boolean ok, started;
    SurfaceHolder holder;

    private String mText;
    private SpeechRecognizer sr;
    private static final String TAG = "MyStt3Activity";

    public Main(Context context) {
        super(context);

        holder = getHolder();
        setOnTouchListener(this);

        sr = SpeechRecognizer.createSpeechRecognizer(context);    
        sr.setRecognitionListener(new listener());

        mText = "nothing";

        ok = false;
        t = null;
    }

    public void run() {
        while(ok == true)
        {    if(!(holder.getSurface().isValid()))
                continue;
            Paint p = new Paint();
            Canvas c = holder.lockCanvas();  

            c.drawARGB(255, 0, 0, 255);
            p.setTextSize(50);
            p.setColor(Color.WHITE);
            c.drawText("mText: "+mText, 500, 500, p);

            holder.unlockCanvasAndPost(c);
        }
    }

    public void pause() {
        ok = false;
        while(true){    
            try{
                t.join();
            }catch(Exception e){ e.printStackTrace();    }
            break;
        }
        t = null;
    }

    public void resume(){
        ok = true;
        t = new Thread(this);
        t.start();
    }

    @SuppressWarnings("deprecation")
    public boolean onTouch(View v, MotionEvent me) {

        int action = me.getAction();
        if(action == MotionEvent.ACTION_DOWN){
            Intent intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);        
            intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);
            intent.putExtra(RecognizerIntent.EXTRA_CALLING_PACKAGE,"voice.recognition.test");

            intent.putExtra(RecognizerIntent.EXTRA_MAX_RESULTS,5); 
                 sr.startListening(intent);
                 Log.i("111111","11111111");
        }
        else if(action == MotionEvent.ACTION_UP){

        }
        else if(action == MotionEvent.ACTION_MOVE){

        }
        return true;
    }

    class listener implements RecognitionListener          
    {
             public void onReadyForSpeech(Bundle params)
             {
                      Log.d(TAG, "onReadyForSpeech");
             }
             public void onBeginningOfSpeech()
             {
                      Log.d(TAG, "onBeginningOfSpeech");
             }
             public void onRmsChanged(float rmsdB)
             {
                      Log.d(TAG, "onRmsChanged");
             }
             public void onBufferReceived(byte[] buffer)
             {
                      Log.d(TAG, "onBufferReceived");
             }
             public void onEndOfSpeech()
             {
                      Log.d(TAG, "onEndofSpeech");
             }
             public void onError(int error)
             {
                      Log.d(TAG,  "error " +  error);
                      mText.equals("error " + error);
             }
             public void onResults(Bundle results)                   
             {
                      String str = new String();
                      Log.d(TAG, "onResults " + results);
                      ArrayList<String> data = results.getStringArrayList(SpeechRecognizer.RESULTS_RECOGNITION);
                      for (int i = 0; i < data.size(); i++)
                      {
                                Log.d(TAG, "result " + data.get(i));
                                str += data.get(i);
                      }
                      //mText.setText("results: "+String.valueOf(data.size())); 
                      if(data.size() > 0)
                         mText.equals(String.valueOf(data.get(0)));

             }
             public void onPartialResults(Bundle partialResults)
             {
                      Log.d(TAG, "onPartialResults");
             }
             public void onEvent(int eventType, Bundle params)
             {
                      Log.d(TAG, "onEvent " + eventType);
             }
    }
} 
```

我以为我的课是一个上下文？我究竟做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T12:52:17.057

如果您将 Context 传递给您的构造函数，您应该使用：`sr = SpeechRecognizer.createSpeechRecognizer(context);`

# ios - 将应用程序从 iOS 5 升级到 iOS 6

> ID：14398951
> 
> 赞同：0
> 
> 时间：2013-01-18T12:26:32.337
> 
> 标签：ios, ios5, ios6, upgrade

我们正在向应用商店提交一个应用程序，并试图确定我们应该提交 iOS 5.0 还是 iOS 6.x。

上次我们尝试将应用程序从 iOS 4.3 升级到 5.0 时，它不会让我们这样做，因为有些用户无法获得升级。（我不记得确切的信息，[但可能是这个](https://stackoverflow.com/questions/9338569/existing-app-upgrade-from-ios-4-2-to-ios-5-0)，硬件上的差异）。

我只是想知道我们现在是否为 iOS 5.0 提交，如果我们以后想使用 iOS 6.x 中的功能，将不得不提交一个具有新捆绑名称的新应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T12:42:27.863

> 我只是想知道我们现在是否为 iOS 5.0 提交，如果我们以后想使用 iOS 6.x 中的功能，将不得不提交一个具有新捆绑名称的新应用程序。

不，如果您的应用程序的未来版本需要 iOS 6，您将不需要更改应用程序或捆绑包名称。您只需在应用程序 info.plist 中更改部署 SDK，一切都会好起来的。当然，仍然使用 iOS5 的用户将无法升级到您最新的仅 iOS6 版本，并且将继续使用他们已经安装的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T12:31:10.913

Apple 已决定放弃对运行 armv6 的旧设备的支持，该设备现已弃用。所有 armv7 设备都可以升级到 iOS 5，因此最好将其设置为支持的最低版本。使用 iOS 5 作为 ARC 和 Storyboard 等有很多好处。无法从使用 armv6 设备的 iOS 4.2 升级的用户因此不再受 Apple 支持。当您的大多数用户升级到该版本时，您可以随时更新到 iOS 6。

# c++ - 如果 operator= 函数未在 C++ 类中实现，执行如何工作

> ID：14398953
> 
> 赞同：0
> 
> 时间：2013-01-18T12:26:37.420
> 
> 标签：c++

我正在实施一项新功能。

我有一个带有布尔变量的简单类。我没有在其中实现 operator= 功能。尽管如此，当我使用 operator = 复制对象时，值正在被复制。

你能解释一下它是如何工作的吗？不写这个函数有多安全，因为在我的应用程序中，很多时候，我将使用运算符'='复制这些对象

```
#include <iostream>
using namespace std;
class A
{
    public:
    bool abc;
    bool xyz;
};
int main()
{
  A obj1, obj2;
  obj1.abc = true;
  obj1.xyz = false;

  obj2 = obj1;

  cout<<"obj2 abc: "<<obj2.abc<<endl; //How do the values got copied?
  cout<<"obj2 xyz: "<<obj2.xyz<<endl;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T12:27:33.027

如果您的班级不管理资源，那是安全的。默认`operator =`执行逐个成员复制。这是一个浅拷贝，因此所有可访问的成员都`operator =`将被正确复制。

如果该类正在管理资源（动态内存、流、句柄等），则默认值是不安全的 - 请参阅[规则三](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T12:30:17.077

如果您在类中不使用动态或其他资源内存，则可以使用赋值运算符的默认实现。但是，如果不是这种情况，例如您有一个使用动态分配内存的成员，这将是不安全的并且可能会产生意想不到的影响。

# java - 带有@SpringApplicationContext 的 Unitils - 匹配的通配符是严格的，但找不到元素“context:annotation-config”的声明

> ID：14398956
> 
> 赞同：1
> 
> 时间：2013-01-18T12:27:03.380
> 
> 标签：java, spring, junit, applicationcontext, unitils

我使用了 maven，并且我对我的项目有以下依赖。

```
 <dependency>
        <groupId>org.unitils</groupId>
        <artifactId>unitils-spring</artifactId>
        <version>3.3</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>org.unitils</groupId>
        <artifactId>unitils-dbunit</artifactId>
        <version>3.3</version>
        <scope>test</scope>
    </dependency> 
```

[官方文档](http://www.unitils.org/tutorial-spring.html)中指定了我的测试类

```
package fr.meehome.user.dao.impl;

import org.junit.Assert;
import org.junit.Test;
import org.unitils.UnitilsJUnit4;
import org.unitils.spring.annotation.SpringApplicationContext;
import org.unitils.spring.annotation.SpringBeanByType;

import fr.meehome.user.dao.IUserDao;

@SpringApplicationContext({"/fr/meehome/user/dao/applicationContext-test.xml" })
public class UserDaoTest extends UnitilsJUnit4 {

    @SpringBeanByType
    private IUserDao userDao;

    @Test
    public void dummyTest() {
        Assert.assertEquals(true, true);
    }
} 
```

我的 ApplicationContext 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:jee="http://www.springframework.org/schema/jee" 
    xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:p="http://www.springframework.org/schema/p"
    xsi:schemaLocation="
    http://www.springframework.org/schema/beans 
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/context 
    http://www.springframework.org/schema/context/spring-context-3.0.xsd
    http://www.springframework.org/schema/jee
    http://www.springframework.org/schema/jee/spring-jee-3.0.xsd
    http://www.springframework.org/schema/tx
    http://www.springframework.org/schema/tx/spring-tx-3.0.xsd">

    <context:annotation-config />

    <context:component-scan base-package="fr.meehome.user.dao" use-default-filters="false">
        <context:include-filter type="annotation" expression="org.springframework.stereotype.Repository" />
    </context:component-scan>

    <bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource" >
        <property name="driverClassName" value="org.hsqldb.jdbcDriver" />
        <property name="url" value="jdbc:hsqldb:mem:testdb" />
        <property name="username" value="sa" />
        <property name="password" value="" />
    </bean>

    <bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean" >
        <property name="dataSource" ref="dataSource" />
        <property name="annotatedClasses">
            <list>
                <value>fr.meehome.user.dao.domain.User</value>
            </list>
        </property>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.HSQLDialect</prop>
                <prop key="hibernate.show_sql">true</prop>
                <prop key="hibernate.hbm2ddl.auto">create</prop>
            </props>
        </property>
    </bean>

    <bean id="transactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager" >
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>

    <tx:annotation-driven transaction-manager="transactionManager" />

</beans> 
```

当我运行我的测试时，我有这个堆栈跟踪：

```
org.unitils.core.UnitilsException: Unable to create application context for locations [/fr/meehome/user/dao/applicationContext-test.xml]
    at org.unitils.spring.util.ApplicationContextManager.createInstanceForValues(ApplicationContextManager.java:121)
    at org.unitils.spring.util.ApplicationContextManager.createInstanceForValues(ApplicationContextManager.java:36)
    at org.unitils.core.util.AnnotatedInstanceManager.getInstanceImpl(AnnotatedInstanceManager.java:234)
    at org.unitils.core.util.AnnotatedInstanceManager.getInstance(AnnotatedInstanceManager.java:121)
    at org.unitils.spring.util.ApplicationContextManager.getApplicationContext(ApplicationContextManager.java:65)
    at org.unitils.spring.SpringModule.getApplicationContext(SpringModule.java:235)
    at org.unitils.spring.SpringModule$1.isApplicableFor(SpringModule.java:108)
    at org.unitils.database.transaction.impl.DefaultUnitilsTransactionManager.getTransactionManagementConfiguration(DefaultUnitilsTransactionManager.java:180)
    at org.unitils.database.transaction.impl.DefaultUnitilsTransactionManager.startTransaction(DefaultUnitilsTransactionManager.java:96)
    at org.unitils.database.DatabaseModule.startTransaction(DatabaseModule.java:410)
    at org.unitils.database.DatabaseModule.startTransactionForTestMethod(DatabaseModule.java:381)
    at org.unitils.database.DatabaseModule$DatabaseTestListener.beforeTestSetUp(DatabaseModule.java:535)
    at org.unitils.core.Unitils$UnitilsTestListener.beforeTestSetUp(Unitils.java:273)
    at org.unitils.UnitilsJUnit4TestClassRunner$TestListenerInvokingMethodRoadie.runBeforesThenTestThenAfters(UnitilsJUnit4TestClassRunner.java:151)
    at org.junit.internal.runners.MethodRoadie.runTest(MethodRoadie.java:84)
    at org.junit.internal.runners.MethodRoadie.run(MethodRoadie.java:49)
    at org.unitils.UnitilsJUnit4TestClassRunner.invokeTestMethod(UnitilsJUnit4TestClassRunner.java:95)
    at org.junit.internal.runners.JUnit4ClassRunner.runMethods(JUnit4ClassRunner.java:61)
    at org.unitils.UnitilsJUnit4TestClassRunner.access$000(UnitilsJUnit4TestClassRunner.java:44)
    at org.unitils.UnitilsJUnit4TestClassRunner$1.run(UnitilsJUnit4TestClassRunner.java:62)
    at org.junit.internal.runners.ClassRoadie.runUnprotected(ClassRoadie.java:34)
    at org.junit.internal.runners.ClassRoadie.runProtected(ClassRoadie.java:44)
    at org.unitils.UnitilsJUnit4TestClassRunner.run(UnitilsJUnit4TestClassRunner.java:68)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: Line 18 in XML document from class path resource [fr/meehome/user/dao/applicationContext-test.xml] is invalid; nested exception is org.xml.sax.SAXParseException: cvc-complex-type.2.4.c: The matching wildcard is strict, but no declaration can be found for element 'context:annotation-config'.
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:396)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:174)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:209)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:180)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:243)
    at org.springframework.context.support.AbstractXmlApplicationContext.loadBeanDefinitions(AbstractXmlApplicationContext.java:113)
    at org.springframework.context.support.AbstractXmlApplicationContext.loadBeanDefinitions(AbstractXmlApplicationContext.java:80)
    at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:123)
    at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:423)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:353)
    at org.unitils.spring.util.ApplicationContextManager.createInstanceForValues(ApplicationContextManager.java:117)
    ... 28 more
Caused by: org.xml.sax.SAXParseException: cvc-complex-type.2.4.c: The matching wildcard is strict, but no declaration can be found for element 'context:annotation-config'.
    at org.apache.xerces.util.ErrorHandlerWrapper.createSAXParseException(Unknown Source)
    at org.apache.xerces.util.ErrorHandlerWrapper.error(Unknown Source)
    at org.apache.xerces.impl.XMLErrorReporter.reportError(Unknown Source)
    at org.apache.xerces.impl.XMLErrorReporter.reportError(Unknown Source)
    at org.apache.xerces.impl.xs.XMLSchemaValidator$XSIErrorReporter.reportError(Unknown Source)
    at org.apache.xerces.impl.xs.XMLSchemaValidator.reportSchemaError(Unknown Source)
    at org.apache.xerces.impl.xs.XMLSchemaValidator.handleStartElement(Unknown Source)
    at org.apache.xerces.impl.xs.XMLSchemaValidator.emptyElement(Unknown Source)
    at org.apache.xerces.impl.XMLNSDocumentScannerImpl.scanStartElement(Unknown Source)
    at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(Unknown Source)
    at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)
    at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
    at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
    at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)
    at org.apache.xerces.parsers.DOMParser.parse(Unknown Source)
    at org.apache.xerces.jaxp.DocumentBuilderImpl.parse(Unknown Source)
    at org.springframework.beans.factory.xml.DefaultDocumentLoader.loadDocument(DefaultDocumentLoader.java:75)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:388)
    ... 40 more 
```

我已经在 stackoverflow 上看到了很多这样的问题，解决方案是正确声明 xmlns 上下文和 schemaLocation。他们在这种情况下很好。

```
xmlns:context="http://www.springframework.org/schema/context"
xsi:schemaLocation="
    http://www.springframework.org/schema/context 
    http://www.springframework.org/schema/context/spring-context-3.0.xsd" 
```

可能是版本 org.unitils.spring.annotation.SpringApplicationContext 无法加载

```
<context:annotation-config /> 
```

任何想法 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:08:28.383

您需要确保：`springframework.org/schema/context/spring-context-3.0.xsd`也在您的类路径中。如果它不附带 unitils，您可以直接包含 Spring 依赖项：

```
<dependency> 
    <groupId>org.springframework</groupId> 
    <artifactId>spring-context</artifactId> 
    <version>${spring.version}</version> 
</dependency> 
```

确保为您的命名空间包含正确的版本

# android - 如何使用 AIDL 文件中的 ContentValues

> ID：14398958
> 
> 赞同：0
> 
> 时间：2013-01-18T12:27:07.780
> 
> 标签：android

我正在尝试`android.content.ContentValues`在aidl 界面中使用类。既然这个类实现了parcelable，为什么不能在aidl文件中声明。所以这是让aidl识别parcelable类的特殊之处。

问候，

耆那教 CS

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T04:55:31.377

所有实现 Parcelable 接口的类都可以在 AIDL 文件中定义。所以我们可以编辑 platform\version\framework.aidl 文件添加 contentValues。这样问题就解决了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-12T22:52:23.597

我找到了另一种更好的方法来处理它：

1.  在您的源代码中创建一个包 android.content。
2.  添加和定义一个名为 ContentValues.aidl 的aidl 文件：
3.  使用以下代码添加 ContentValues.aidl： package android.content; 可打包的内容值；

然后编译将不会显示错误。

# jsf - 魔术 ui:repeat var

> ID：14398960
> 
> 赞同：4
> 
> 时间：2013-01-18T12:27:14.987
> 
> 标签：jsf, jsf-2, scope, uirepeat

我偶然发现了一种出乎意料的行为，至少对我来说是这样。使用 ui:repeat 时，似乎我可以从外部访问 var。

代码 - 页面：

```
<f:metadata>
   <f:event type="preRenderView" listener="#{xTest.init()}" />
</f:metadata>

<h:form id="xTestForm">
   <h:panelGroup layout="block">
      Track: #{trk.name}
   </h:panelGroup>

   <table>
      <ui:repeat
         value="#{xTest.trackList}"
         var="trk">
         <tr>
            <td>#{trk.name}</td>
            <td>
               <p:commandLink
                  actionListener="#{xTest.setTrack(track)}"
                  value="test"
                  update=":xTestForm" />
            </td>
         </tr>
      </ui:repeat>
   </table>
</h:form> 
```

代码 - 豆

```
package beans;

import dao.DAOFactory;
import dao.track.TrackDAO;
import dto.Track;
import exceptions.DAOException;
import java.io.Serializable;
import java.sql.SQLException;
import java.util.ArrayList;
import java.util.List;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ViewScoped;
import javax.faces.context.FacesContext;
import util.MessageUtil;

@ManagedBean
@ViewScoped
public class xTest implements Serializable {

    private DAOFactory daoFactory = Config.getInstance().getDAOFactory();
    private TrackDAO trackDAO;
    private Track track = new Track();
    private MessageUtil msg = new MessageUtil();
    private List<Track> trackList = new ArrayList();

    public xTest() {
        trackDAO = daoFactory.getTrackDAO(true);
    }

    public void init() {
        if (!FacesContext.getCurrentInstance().isPostback()) {
            try {
                trackList = trackDAO.listByAlbumid(241);
            } catch (SQLException | DAOException ex) {
                msg.setErrorMessage(ex);
            }
        }
    }

    public List<Track> getTrackList() {
        return trackList;
    }

    public void setTrack(Track track) {
        this.track = track;
    }
} 
```

如果单击曲目列表中的链接，则曲目名称将显示在 panelGroup 中。这怎么可能？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T13:12:34.087

这是 Mojarra 中的一个错误。它的`UIRepeat`组件在恢复视图阶段忘记在迭代结束时从请求范围中删除迭代变量。它在例如 MyFaces 中不起作用。

您不应该依赖您的业务代码。请注意，`<h:dataTable>`没有这个问题，它通过[`((UIData) component).setRowIndex(-1)`in`encodeEnd()`方法](https://github.com/eclipse-ee4j/mojarra/blob/2.3.14/impl/src/main/java/com/sun/faces/renderkit/html_basic/TableRenderer.java#L167)在迭代结束时正确地从请求范围中删除迭代变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-02-09T18:09:16.653

8 年后有人向 PrimeFaces 报告了这个问题，所以我打开了一个 Mojarra 问题和一个 PR 来解决这个问题。

Mojarra 问题：[https ://github.com/eclipse-ee4j/mojarra/issues/4830](https://github.com/eclipse-ee4j/mojarra/issues/4830)

Mojarra 公关：[https ://github.com/eclipse-ee4j/mojarra/pull/4831](https://github.com/eclipse-ee4j/mojarra/pull/4831)

# ajax - Chrome 扩展程序 - 无法向其他域上的服务器发出 AJAX 请求

> ID：14398963
> 
> 赞同：2
> 
> 时间：2013-01-18T12:27:25.020
> 
> 标签：ajax, google-chrome-extension, xmlhttprequest

我有一个 Chrome 内容脚本，我想使用 AJAX 将数据发布到远程服务器

```
 $.ajax({
          url: "http://remote_server/endpoint.php",  
          type: "POST",  
          dataType: "json",  
          contentType: "json",  
          data: {"foo": "bar"},
    }); 
```

如果我在 manifest.json 中设置以下内容，我可以将其发布到我的本地托管服务器 -

```
 "permissions": [
    "http://*/"
  ], 
```

或者

```
 "permissions": [
    "http://localhost/"
  ], 
```

但是，如果尝试将数据发布到远程服务器，即使我在 manifest.json 中有以下任一设置，我也会收到错误消息 -

```
 "permissions": [
    "http://*/"
  ], 
```

或者

```
 "permissions": [
    "http://remote_server/"
  ], 
```

我想如果您设置了允许[跨站点请求](http://developer.chrome.com/extensions/xhr.html)的权限？那么为什么这不起作用呢？

> XMLHttpRequest 无法加载 `http://remote_server/endpoint.php`。Access-Control-Allow-Origin 不允许来源 chrome-extension://koogajpmmcapakdeahannaecjbcfgicl。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:48:45.297

它应该工作。确保在进行更改后重新加载扩展：设置->工具->扩展并单击扩展的“重新加载”链接。

# ruby - Ruby 2.0 字节码导出/导入

> ID：14398964
> 
> 赞同：10
> 
> 时间：2013-01-18T12:27:25.663
> 
> 标签：ruby, bytecode, yarv, ruby-2.0

我一直在阅读[ruby​​ 2.0 的新特性](http://www.rubyinside.com/ruby-2-0-implementation-work-begins-what-is-ruby-2-0-and-whats-new-5515.html)，发现它将支持字节码导入/导出：

> Ruby 2.0 有望简化将预编译的 Ruby 脚本保存为字节码表示，然后直接运行这些脚本。

我已经安装了 ruby​​-2.0.0-p0，但是我没有找到任何关于如何导出字节码的信息（或者关于这个问题的一般文档）。此功能是否已经实现，如果是，我该如何使用它？

我也想知道一些细节。YARV 字节码是否应该与平台无关？是否所有 gem 都自动包含在字节码中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T14:03:20.097

在有更好信息的人看到这个问题之前，我做了一些研究：

> 此功能是否已经实现，如果是，我该如何使用它？

它已实现，但似乎没有暴露（例如`ruby --dump-bytecode`不存在）。也没有太多的[文档](http://www.ruby-doc.org/core-2.0/RubyVM/InstructionSequence.html)。据我所知，您正在寻找的是：

```
seq = RubyVM::InstructionSequence.compile_file("./example.rb") 
```

`seq.disassemble`将为您提供一个格式良好的字符串，您可以将其转储到文件中，或者`seq.to_a`生成一个如下所示的数组：

```
["YARVInstructionSequence/SimpleDataFormat",
 2,
 0,
 1,
 {:arg_size=>0, :local_size=>1, :stack_max=>2},
 "<main>",
 "./example.rb",
 "./example.rb",
 1,
 :top,
 [],
 0,
 [],
 [[:trace, 1],
  [:putspecialobject, 3],
  [:putnil],
  [:defineclass,
   :User,
   ["YARVInstructionSequence/SimpleDataFormat",
    2,
    0,
    1,
    {:arg_size=>0, :local_size=>1, :stack_max=>6},
    "<class:User>",
    .... 
```

如果您想将此保存到文件中，您可以执行以下操作：

```
File.write("out.dump", Marshal.dump(seq.to_a)) 
```

然后再次加载：

```
arr = Marshal.load(File.read("out.dump")) 
```

`InstructionSequence`不幸的是，鉴于上面加载的数组，我似乎无法弄清楚如何创建一个新数组。

> 我也想知道一些细节。YARV 字节码是否应该与平台无关？是否所有 gem 都自动包含在字节码中？

在上面的示例中，不包括宝石。您`InstructionSequence`将包括等效于 a`require 'active_record'`或您拥有的字节码。我怀疑如果字节码的转储和加载是由`ruby`可执行文件直接提供的，那么这种行为将保持不变。

如果其他人有更多信息，我很乐意看到它！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-18T22:06:20.360

Unfortunately it looks like the verifier didn't get implemented in 2.0-p0, and as a result the load functionality is still commented out (from iseq.c, line 2260):

```
/* disable this feature because there is no verifier. */
/* rb_define_singleton_method(rb_cISeq, "load", iseq_s_load, -1); */ 
```

# node.js - nginx 产生的流量是 node-http-proxy 的四倍

> ID：14398965
> 
> 赞同：2
> 
> 时间：2013-01-18T12:27:28.797
> 
> 标签：node.js, nginx, traffic, http-proxy

我们正在使用 node-http-proxy 一段时间，它工作正常。但是随着我们的系统变得越来越大，我们想迁移到 nginx。

目前我们每秒消耗大约 100 个请求，产生大约 1mb/s 的传出流量。

我们使用 nginx 进行的测试（相同数量的请求、相同的后端服务器和相同的响应）产生大约 4mb/s 的传出流量。我们检查了标头，因为这可能是响应中唯一的区别，但标头并没有太大变化。

有谁知道还有什么可以产生这种流量增加？

谢谢，金

编辑：我们不使用集群，它们只是愚蠢的反向代理。来自域 A 的请求到服务器 A，域 B 到服务器 B，......我们在生产环境中进行了测试，所以后端服务器在测试期间保持不变，只是代理发生了变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-27T14:12:43.613

我们发现会发生什么：旧的 node.js 服务器没有发送所有必需的 ssl 证书。nginx 随每个请求发送所有证书（中间证书等）。

# java - 从 Listener 中检查复选框选择

> ID：14398966
> 
> 赞同：6
> 
> 时间：2013-01-18T12:27:30.087
> 
> 标签：java, button, swt, jface

目前正在工作，但在 JFace 中遇到了一个小问题。我需要有一个复选框，允许下一个按钮变为活动状态。

这是代码：

```
 Button btnConfirm = new Button(container, SWT.CHECK);

    btnConfirm.addSelectionListener(new SelectionAdapter() {
    @Override

    public void widgetSelected(SelectionEvent e) {

          //missing if statement        
          setPageComplete(true);
        }
    });

    btnConfirm.setBounds(330, 225, 75, 20);
    btnConfirm.setText("Confirm"); 
```

我正在尝试做的是建立一个菜单，其中有人必须接受条款和条件才能超越某个点。默认值将不受组织选中，但是当检查框时，将出现下一个按钮；如果不是，则下一个按钮将保持非活动状态。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-18T14:16:13.453

只需`Button` `final`从 : 中创建并访问它`Listener`：

```
final Button btnConfirm = new Button(shell, SWT.CHECK);

btnConfirm.addSelectionListener(new SelectionAdapter()
{
    @Override
    public void widgetSelected(SelectionEvent e)
    {
        if (btnConfirm.getSelection())
            setPageComplete(true);
        else
            setPageComplete(false);
    }
}); 
```

* * *

或者，`Button`从`SelectionEvent`：

```
Button btnConfirm = new Button(shell, SWT.CHECK);

btnConfirm.addSelectionListener(new SelectionAdapter()
{
    @Override
    public void widgetSelected(SelectionEvent e)
    {
        Button button = (Button) e.widget;
        if (button.getSelection())
            setPageComplete(true);
        else
            setPageComplete(false);
    }
}); 
```

# iphone - 使用单独的线程从服务器下载大量数据

> ID：14398974
> 
> 赞同：0
> 
> 时间：2013-01-18T12:27:48.900
> 
> 标签：iphone

我们正在构建一个 iPhone 应用程序，我们在后台下载应用程序内购买时遇到问题，我想知道是否有人有解决方案……

我们的应用内购买相当大 35-40mb，每次购买由 5 件商品组成，每件 7-8mb，因此手机通常会进入待机状态，或者用户在下载购买之前切换应用程序，因此下载应用内购买至关重要在后台无缝。

当我们下载购买时，我们必须从服务器下载大约 35-40mb，并同时更新应用程序中的本地 sqlite 数据库。我们已经测试了在前台下载项目并且它工作正常，并且我们已经做了一些处理以保持下载过程在后台继续并且下载继续并且我们可以看到它在调试器中工作。

但是我们有以下问题……</p>

用户开始下载 应用上的下载页面显示应用正在下载 用户离开应用或手机进入待机 用户返回应用

此时应用程序启动画面加载并停留在屏幕上，直到完成 8mb 下载之一，完成后切换到应用程序上的下载页面。这真的让用户感到困惑，因为他们认为应用程序已经崩溃。

那么我们如何管理应用内购买，以便当用户按下下载时，它会在后台开始下载，并且在下载过程中应用正常运行？因此，用户离开应用程序，当他们返回时，它会显示正确的页面以及下载进度。用户在应用程序内导航，它工作正常。

一些观察...

我必须连续运行 NSURLConnection 5 次才能执行下载，因为每次应用内购买有 5 个项目。

我注意到的是，当第一次下载正在进行时，即使用户按下主页按钮，也不会调用“didEnterBackground”方法，但在第一次下载过程完成后，会调用“didEnterBackground”方法。如果用户将应用程序置于后台，然后返回前台，则应该调用“didEnterForeground”，但事实并非如此。

我正在使用与“MainThread”不同的线程下载数据，但仍在同一问题中运行。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T13:59:56.267

*   看看[AFNetworking](https://github.com/AFNetworking/AFNetworking)，它被许多人使用并加载到不同的线程上。在[自述](https://github.com/AFNetworking/AFNetworking/blob/master/README.md)文件中有一个带有进度的文件下载示例。
*   您可以防止 iOS 在下载过程中进入待机模式：

    ```
    [UIApplication sharedApplication].idleTimerDisabled = YES; 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T22:57:41.020

试试看……一个新的AFNetworking'extension [AFDownloadRequestOperation](https://github.com/steipete/AFDownloadRequestOperation)

此类具有恢复部分下载的额外支持，使用临时目录并具有帮助计算正确下载进度等的特殊块

“不要忘记将 shouldResume 设置为 YES” :)

对于 AFDownloadRequestOperation，您还可以检查此[AFNetworking not resuming download](https://stackoverflow.com/questions/12563753/afnetworking-not-resuming-download)

**UPD**

在最坏的情况下..您可以尝试`"Task Completion for Long-Running Tasks"`或`"Task-Specific Background Processing"`在后台.. [http://www.codeproject.com/Articles/124159/Hour-21-Building-Background-Aware-Applications](http://www.codeproject.com/Articles/124159/Hour-21-Building-Background-Aware-Applications)

# python-2.7 - CKAN 在 Ubuntu 上安装（无法创建标准实例）

> ID：14398978
> 
> 赞同：0
> 
> 时间：2013-01-18T12:28:07.527
> 
> 标签：python-2.7, ubuntu-12.04, ckan

我正在尝试在具有 Ubuntu 10.04 的虚拟机上安装 CKAN 1.8。

安装结束得很好，但是当我创建 std 实例时，在 Python 中出现了我无法解决的错误。

谁能帮我这个？

终端中消息的转录：

```
egov@egov-VirtualBox:~$ sudo ckan-create-instance std default.vm.buildkit yes
Installing or upgrading CKAN std ...
Ensuring users and groups are set up correctly ...
Ensuring directories exist for std CKAN INSTANCE ...
Disabling the crontab for the ckanstd user ...
Putting CKAN into maintenance mode ...
Site std disabled.
To activate the new configuration, you need to run:
  service apache2 reload
Enabling site std.maint.
To activate the new configuration, you need to run:
  service apache2 reload
 * Reloading web server config apache2                                                                 
apache2: Could not reliably determine the server's fully qualified domain name, using 127.0.1.1 for ServerName
                                                                                                [ OK ]
Setting log file permissions so that both Apache and cron jobs can log to the same place ...
Ensuring who.ini file exists ...
Ensuring wsgi.py file exists ...
Making sure PostgreSQL is running ...
Setting the password of the std user in PostgreSQL
Setting the std user password ...
ALTER ROLE
Ensuring the std database exists ...
Overwriting the existing Apache config ...
Performing any database upgrades ...

Traceback (most recent call last):
  File "/usr/bin/paster", line 4, in <module>
    command.run()
  File "/usr/lib/python2.7/dist-packages/paste/script/command.py", line 104, in run
    invoke(command, command_name, options, args[1:])
  File "/usr/lib/python2.7/dist-packages/paste/script/command.py", line 143, in invoke
    exit_code = runner.run(args)
  File "/usr/lib/python2.7/dist-packages/paste/script/command.py", line 238, in run
    result = self.command()
  File "/usr/lib/pymodules/python2.7/ckan/lib/cli.py", line 120, in command
    self._load_config()
  File "/usr/lib/pymodules/python2.7/ckan/lib/cli.py", line 82, in _load_config
    load_environment(conf.global_conf, conf.local_conf)
  File "/usr/lib/pymodules/python2.7/ckan/config/environment.py", line 141, in load_environment
    p.load('synchronous_search')
  File "/usr/lib/pymodules/python2.7/ckan/plugins/core.py", line 122, in load
    service = _get_service(plugin)
  File "/usr/lib/pymodules/python2.7/ckan/plugins/core.py", line 77, in _get_service
    return plugin.load()(name=name)
  File "/usr/lib/python2.7/dist-packages/pkg_resources.py", line 1989, in load
    entry = __import__(self.module_name, globals(),globals(), ['__name__'])
  File "/usr/lib/pymodules/python2.7/ckan/lib/search/__init__.py", line 2, in <module>
    from pylons import config, c
ImportError: cannot import name c

Bringing the std INSTANCE out of maintenance mode ...
Site std.maint disabled.
To activate the new configuration, you need to run:
  service apache2 reload
Enabling site std.
To activate the new configuration, you need to run:
  service apache2 reload
 * Reloading web server config apache2

apache2: Could not reliably determine the server's fully qualified domain name, using 127.0.1.1 for ServerName
                                                                                                    [ OK ]
    Reloading apache ...
     * Reloading web server config apache2                                                                 
apache2: Could not reliably determine the server's fully qualified domain name, using 127.0.1.1 for ServerName
                                                                                                    [ OK ]
    Enabling crontab for the ckanstd user ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T20:39:45.030

问题出现在堆栈跟踪的末尾：

```
File "/usr/lib/pymodules/python2.7/ckan/lib/search/__init__.py", line 2, in <module>
  from pylons import config, c
ImportError: cannot import name c 
```

这表明 pylons（必需的库）可能无法正确安装。您可以通过以下方式检查：

```
 $ python
 >>> import pylons 
```

如果失败了，那么安装中出现了问题，并且没有安装 pylons（应该是这样）。

那时值得尝试重新安装。

请让我知道这是否有帮助（或没有帮助），并将尝试进一步提供帮助。

# python - 如何在基于控制台的 python 程序中实现“最后一个命令”功能

> ID：14398980
> 
> 赞同：0
> 
> 时间：2013-01-18T12:28:13.847
> 
> 标签：python, windows

所以我正在开发一个基于控制台的python（实际上是python3）程序，我用来`input(">")`从用户那里获取命令。

现在我想在我的程序中实现“最后一个命令”功能——当用户按下键盘上的向上箭头时，他们可以看到他们的最后一个命令。

经过一番研究，我发现我可以使用 curses lib 来实现这一点，但有两个问题。

1.  诅咒在 Windows 上不可用。
2.  我的程序的其他部分用于`print()`输出。我不想用诅咒重写它们。

那么还有其他方法可以实现“最后一个命令”功能吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T12:33:08.477

在新版本的 python 中，存在用于处理用户输入的不错的 modile [readline ，以及用于自动完成目的的](http://docs.python.org/2/library/readline.html)[rlcompleter](http://docs.python.org/2/library/rlcompleter.html)。但我认为在 Windows 上无论如何都需要安装 readline lib。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T12:46:18.657

您可以做的是应用某种 shell 历史功能：用户发出的每个命令都将放在一个列表中，然后您将实现一个特殊调用（控制台的命令），让我们说“历史”将在用户填写时按顺序为用户打印列表，每个命令旁边的数字都会增加。然后，另一个调用（再次是控制台的特殊命令），让我们说“！！” （但实际上可能是任何东西，例如“重复”），并且您要重复的一些命令将从列表中获取命令并在不重新输入的情况下执行它：输入 '!! 34' 将再次执行命令号 34，它可以是 'something -a very -b long -c with -d very -e large -f number -g of -h arguments -666'。

我知道它与您想要的不完全相同，但它很容易快速实现，并提供您所追求的命令重复功能，并且应该是不错的替代品，直到您弄清楚如何按照您想要的方式进行操作;)

# ios6 - iOS 6 - 使用 POST 方法在 HTTPBody 中发送数据时出错

> ID：14398986
> 
> 赞同：0
> 
> 时间：2013-01-18T12:28:20.337
> 
> 标签：ios6, http-post, http-status-code-400

直到昨晚代码运行良好，但今天我面临一个奇怪的问题。

```
NSString *hostStr = [@"My API string" stringByAppendingString: @"/users/login"];

NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
[request setURL:[NSURL URLWithString:hostStr]];
[request setHTTPMethod:@"POST"];

NSString *boundary = @"-----FOO";
NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];
[request addValue:contentType forHTTPHeaderField:@"Content-Type"];

NSData *usernameData = [username dataUsingEncoding:NSUTF8StringEncoding allowLossyConversion:NO];
NSData *passwordData = [password dataUsingEncoding:NSUTF8StringEncoding allowLossyConversion:NO];

NSMutableData *body = [NSMutableData data];

[body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[@"Content-Disposition: form-data; name=\"data[login_name]\"\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[@"Content-Type: application/octet-stream\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[NSData dataWithData:usernameData]];

[body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[@"Content-Disposition: form-data; name=\"data[password]\"\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[@"Content-Type: application/octet-stream\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[NSData dataWithData:passwordData]];

[body appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[request setHTTPBody:body];

NSError *error;
NSURLResponse *response;
NSData *urlData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];
NSString *serverOutput = [[NSString alloc] initWithData:urlData encoding:NSUTF8StringEncoding];
NSLog(@"%@",serverOutput); 
```

上面的代码给了我以下响应

```
<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html><head>
<title>400 Bad Request</title>
</head><body>
<h1>Bad Request</h1>
<p>Your browser sent a request that this server could not understand.<br />
</p>
<p>Additionally, a 404 Not Found
error was encountered while trying to use an ErrorDocument to handle the request.</p>
<hr>
<address>Apache Server at MY API URL Port 80</address>
</body></html> 
```

但是当我评论这部分时，对于相同的代码行

```
[body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n", boundary]  dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[@"Content-Disposition: form-data; name=\"data[login_name]\"\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[@"Content-Type: application/octet-stream\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[NSData dataWithData:usernameData]];

[body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[@"Content-Disposition: form-data; name=\"data[password]\"\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[@"Content-Type: application/octet-stream\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[NSData dataWithData:passwordData]];

[body appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]]; 
```

它给了我以下请求响应

```
{"login_name":"Username or Password is not valid","responseCode":"0"} 
```

意味着当我不在 HTTPBody 中发送任何数据时，API 调用给了我想要的响应。我不知道这里出了什么问题。提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T09:24:57.920

好。这是我从未意识到可能是一个问题。

随着我越来越多地检查我的代码，我发现我的代码“那里”没有任何问题。但问题出在服务器端。

我联系了服务器人员，他们说他们启用了一些 ModSecurity，因此无法在 HTTPBody 中发送多部分表单数据。

这花了我整整两天的时间才弄清楚。希望它可以节省一些人的时间。

# android - 如何使用事件列表从广播接收器发出警报对话框？

> ID：14398989
> 
> 赞同：0
> 
> 时间：2013-01-18T12:28:30.353
> 
> 标签：android, android-listview, push-notification

> 当我收到来自 gcm 的通知时，我需要在该对话框中发出带有事件列表的警报对话框。我通过使用自定义 toast 消息来做到这一点。但我无法在警报对话框中为列表编写单击事件. 每当我收到新的通知时，我都会调用此方法。出现警报对话框但 onclick 事件不适用于列表..

```
public void displayToast()
{
    LayoutInflater mInflater = LayoutInflater.from(con);
    View myView = mInflater.inflate(R.layout.statusbar, null);
    Toast toast = new Toast(con.getApplicationContext());
    toast.setGravity(Gravity.CENTER_VERTICAL, 0, 0);
    TextView tv = (TextView) myView.findViewById(R.id.notificationtype);
    ListView lv = (ListView) myView.findViewById(R.id.listView1);
    lv.setAdapter(new StatusAdapter(con, list));
    tv.setText("MESSAGES");

    lv.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,long arg3) {
            // TODO Auto-generated method stub
            if (list.get(arg2).getType().equals("S Notification")) {
                Intent it = new Intent(con,ViewEventActivity.class);
                it.putExtra("eventid", list.get(arg2).getId());
                it.putExtra("event", "team");
                con.startActivity(it);
                //dialog.dismiss();
            }
            if (list.get(arg2).getType().equals("S R Notification")) {
                Intent it = new Intent(con,GameDetailsActivity.class);
                it.putExtra("id", list.get(arg2).getId());
                con.startActivity(it);
                //dialog.dismiss();
            }
            if (list.get(arg2).getType().equals("A Notification")) {
                Intent intent = new Intent(con,ViewItemActivity.class);
                intent.putExtra("id", "" + list.get(arg2).getId());
                con.startActivity(intent);
                //dialog.dismiss();
            }
            if (list.get(arg2).getType().equals("D Notification")) {
                Intent it = new Intent(con,PersonalDetails.class);
                it.putExtra("personId", list.get(arg2).getId());
                con.startActivity(it);
                //dialog.dismiss();
            }
            if (list.get(arg2).getType().equals("M Notification")) {
                Intent it = new Intent(con,MessageContentActivity.class);
                it.putExtra("messageid", list.get(arg2).getId());
                con.startActivity(it);
            //  dialog.dismiss();
            }
        }
    });
    toast.setDuration(Toast.LENGTH_LONG);
    toast.setDuration(1800000);
    toast.setView(myView);
    toast.show();
} 
```

![在此处输入图像描述](../Images/440815ed7a465b50555d4a6666d2de2f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T13:05:43.633

Toast Window 具有`WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE`框架设置的属性，

因此，您拥有的任何视图都无法向其发送事件。

# javascript - SVG 对象样式属性作为 javascript 变量

> ID：14398990
> 
> 赞同：0
> 
> 时间：2013-01-18T12:28:32.460
> 
> 标签：javascript, svg

我正在尝试对 javascript 变量进行样式填充颜色。我必须在 SVG 代码的不同位置重用这个变量。

```
<path d="......."
id="path3950" 
style="fill:#c1e0b2;"/> 
```

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T12:42:52.257

您是说您必须为 svg 中的不同路径重用样式填充？

javascript 变量不会帮助您解决此问题，您要做的是跨多个路径使用 CSS 类规则。

```
 <path d="......." class="myPaths" id="path3950"/>
    <path d="......." class="myPaths" id="path3951"/>
    <path d="......." class="myPaths" id="path3952"/>

    //in css, either by linking a file at the top of the svg
    //     or with 
    <style type="text/css" >
       <![CDATA[
            .myPaths {
                fill: #c1e0b2;
            }   
        ]]>
    </style> 
```

并且 CSS 填充将应用于它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T08:18:19.233

您可以通过此代码在 javascript 中获取内联 css 值。

```
var p = document.getElementById("path3950");  
var fill_color = p.style.getPropertyValue("fill"); 
```

`fill_color`将是“ `#c1e0b2`”。

# c++ - 可变函数声明 VS 采用列表的函数

> ID：14398992
> 
> 赞同：2
> 
> 时间：2013-01-18T12:28:43.517
> 
> 标签：c++, variadic-functions, function-parameter, stdlist

在设计一个类或一个函数时，下面显示的哪种方式更好，为什么？

```
class Container {

    //Provide this functionality??
    void addItemVariadic(const Value& val, ...);

    //Or provide this functionality??
    void addItemList(const list<Value>& vals);

}; 
```

提供像 addItemVariadic(..) 或 addItemList(..) 这样的函数更好吗？

还是提供一组这样的功能更好，比如进一步获取一些迭代器，或者限制功能更好，比如只获取一个列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T12:33:29.593

使用可变参数函数很**危险**

如果你传递了一个没有适当类型的变量，它会在运行时调用函数时崩溃。

相反，如果您使用 a `std::list`，它不会简单地编译，并且可以避免崩溃。

顺便说一句：我建议你在这种情况下使用`std::vector`而不是。`std::list`

**Edit1** [可能的重复问题。](https://stackoverflow.com/questions/3555583/passing-variable-number-of-arguments-with-different-type-c/3555663#3555663)使用运算符 <<一次输入所有参数的**一个很好的解决方案。**

**Edit2**为了在不同的 std::containers 之间进行选择，有一个选择图作为[这个问题](https://stackoverflow.com/questions/7471227/c-container-performance-question/7471328#7471328)的答案。此图针对 C++03，它不涵盖 C++1 中引入的新容器。

# javascript - 在for循环中传递变量（html + javascript）

> ID：14398993
> 
> 赞同：0
> 
> 时间：2013-01-18T12:28:43.767
> 
> 标签：javascript, html, variables, for-loop

我正在尝试一一读取数组中的值以提取最小值和最大值。我已经尝试了以下解决方案，但我无法弄清楚它有什么问题。我试图一点一点地分解它，似乎变量 MIN 没有被传递给 for 循环

```
window.eqfeed_callback = function(results) {
 var MIN=Number.POSITIVE_INFINITY;
   for (var i = 0; i < results.features.length; i++) {
     var tmpval = results.features[i].properties.con;
     if (tmpval < MIN) {
       MIN=tmpval;
     }
   }

 [do something with MIN]
} 
```

# java - AsyncTask 在执行期间崩溃

> ID：14398997
> 
> 赞同：-1
> 
> 时间：2013-01-18T12:28:52.567
> 
> 标签：java, android, android-asynctask

因此，如果我启动**`AsyncTask`**它，它只会在调用方法时崩溃`getXmlFromUrl`。我没有找到解决方案，有人可以帮助我吗？我正在尝试一个小时或其他什么......它说有一个丢失的`catch`块，但是在哪里？如果我评论该`getXmlFromUrl`应用程序就可以正常工作。我走到了尽头，所以任何帮助都会很好:)

**资料来源： http:** [//pastebin.com/347ayn6W](http://pastebin.com/347ayn6W)

**错误： http:** [//pastebin.com/AA3W7e4F](http://pastebin.com/AA3W7e4F)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T12:32:03.753

简单地说：你不能在 AsyncTask`doInBackground()`方法中查看东西。
只需将您的调用 `p.dismiss();`移至`onPostExecute()`
onPostExecute 也是您需要从 AsyncTask-Class 覆盖的方法：

```
onPostExecuted(Void nothing)
{
 p.dismiss();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T12:31:38.990

```
p.dismiss(); 
```

不要在 doInBackground() 方法中关闭您的进度对话框。你应该这样做 onPostExecute() 方法

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T12:31:51.363

问题：

```
01-18 12:58:39.086: E/AndroidRuntime(16249): Caused by: android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views. 
```

因为您正在解雇`ProgressDailog dialog`在**WorkerThread**`doInBackground()`中运行的 AsyncTask 。当您在**ActivityMainThread**上运行时..**`ProgressDailog dialog`**

 ******Android 严格不允许更新 Worker 或任何其他线程中的任何视图。**

只需 `p.dismiss();`从AsyncTask中删除`doInBackground()`并放入`onPostExecute()`

**就像是：**

```
protected Void doInBackground(Void... nothing){
 Globals.shopCon=new ShopConnection("http://" + Globals.ip + "/ws410/rest/");
 return null;                                   
}

onPostExecuted(Void nothing)
{
 p.dismiss();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T12:32:06.290

如日志：

> CalledFromWrongThreadException：只有创建视图层次结构的原始线程才能接触其视图

因为您正试图 `ProgressDialog`在`doInBackground`. 搬进`p.dismiss()`去`onPostExecute`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-18T12:32:51.660

[在这里](http://pastebin.com/u0M2cRS9)找到新版本的代码。你不应该关闭里面的进度对话框`doInBackground()`****

# asp.net-mvc - 在 MVC3 中将静态和动态属性传递给 htmlAttribute

> ID：14398998
> 
> 赞同：1
> 
> 时间：2013-01-18T12:28:55.250
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我有一个场景，我将添加两个属性。

一个是动态的，即基于用户角色的***只读，另一个是静态的，即******id***

我在下面尝试了这个，但它对我不起作用。

> 下面在 HTML 中呈现的属性是
> 
> **readonlystr = , id = 'emp-name'**

```
var readonlystr = (Model.Role.EmpEdit) ? "" : "readonly=readonly";

@Html.TextBoxFor(m => m.Name, new { readonlystr, @id = "emp-name" })
@Html.TextBoxFor(m => m.Age, new { readonlystr, @id = "emp-age" })
@Html.TextBoxFor(m => m.City, new { readonlystr, @id = "emp-city" }) 
```

有什么建议可以通过组合两个属性并通过它来实现这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T12:46:37.153

```
var readonlystr = Model.Role.EmpEdit ? new Dictionary<string, object>() : new Dictionary<string, object> { { "readonly", "readonly" } };

@Html.TextBoxFor(m => m.Name, readonlystr.Union(new Dictionary<string, object>{{"id", "emp-name"}}).ToDictionary(x=>x.Key, x=>x.Value)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T12:46:53.467

```
 @{
        Dictionary<string, object> attribs = new Dictionary<string, object>();
        if (!Model.Role.EmpEdit) {
            attribs.Add("readonly", "readonly");
        }
        attribs.Add("id", "");
    }

    @{attribs["id"] = "emp-name";}
    @Html.TextBoxFor(m => m.Name, attribs)
    @{attribs["id"] = "emp-age";}
    @Html.TextBoxFor(m => m.Age, attribs) 
```