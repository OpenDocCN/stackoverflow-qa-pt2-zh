# StackOverflow 问答 12514000-12514999

# php - 通过 HTML 表单 (PHP) 编辑 XML

> ID：12514000
> 
> 赞同：2
> 
> 时间：2012-09-20T13:44:55.690
> 
> 标签：php, xml, forms

我正在尝试创建一个表单，让您可以编辑 xml 标记的内容。我目前有一个form.php：

```
<?php
$data=simplexml_load_file('welcome.xml');
$welcome=$data->item->name;
?>

<form method="post">
    <textarea name="name"><?php echo $welcome ?></textarea>
    <br>
    <input type="submit" name="submit" value="submit">
</form>

<?php
if(isset($_POST['submit'])) {
$data=simplexml_load_file('welcome.xml');
$data->item->name=$_POST['name'];
$handle=fopen("welcome.xml","wb");
fwrite($handle,$xml->asXML());
fclose($handle);
}
?> 
```

和welcome.xml：

```
<welcome>
    <item>
        <name>$welcome</name>
    </item>
</welcome> 
```

当我按下提交时，它不会保存输入的内容，它只是刷新页面并删除 xml 文件中之前的任何值..

**更新**

该表单现在可以使用，但我添加了一个重置​​按钮，我需要它来清除 xml 文件，因此它只有`<welcome>`标签。我已更改`$data->item->name=$_POST['welcome'];`为，`$data='';`但它会删除文本并保持标签不变。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T14:01:05.370

您可以使用 simplexml 来完成。

从 xml 读取数据：

```
$data = simplexml_load_file('welcome.xml');

$welcome = $data->item[0]->name; 
```

并写入数据：

```
$data = simplexml_load_file('welcome.xml');

$data->item[0]->name = $_POST['welcome'];

$handle = fopen("welcome.xml", "wb"); 
fwrite($handle, $xml->asXML());
fclose($handle); 
```

编辑：对于评论中的问题：

```
<?php
if(isset($_POST['submit'])) {
$data=simplexml_load_file('welcome.xml');
$data->item->name=$_POST['name'];
$handle=fopen("welcome.xml","wb");
fwrite($handle,$data->asXML());
fclose($handle);
}

$data=simplexml_load_file('welcome.xml');
$welcome=$data->item->name;

?>

<form method="post">
    <textarea name="name"><?php echo $welcome ?></textarea>
    <br>
    <input type="submit" name="submit" value="submit">
</form> 
```

# java - 可运行的 jar 不能从一台机器运行到另一台机器

> ID：12514001
> 
> 赞同：1
> 
> 时间：2012-09-20T13:45:06.827
> 
> 标签：java

因此，当将项目导出为可运行的 jar 时，该 jar 在当前机器上运行良好。将 jar 移动到另一台机器，它找不到主类： 使用 cmd 得到错误：

```
 Desktop>java -jar RunMe.jar
Exception in thread "main" java.lang.ExceptionInInitializerError
        at java.lang.Class.forName0(Native Method)
        at java.lang.Class.forName(Unknown Source)
        at org.eclipse.jdt.internal.jarinjarloader.JarRsrcLoader.main(JarRsrcLoa
der.java:56)
Caused by: java.lang.ArrayIndexOutOfBoundsException: 500
        at pnl_user.readFile(pnl_user.java:667)
        at pnl_user.readTNS(pnl_user.java:432)
        at pnl_user.<init>(pnl_user.java:412)
        at main.<clinit>(main.java:9)
        ... 3 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T13:47:57.323

要运行 JAR 文件，请使用`java -jar thejarfile.jar`.

`java runme`会尝试`runme`从当前类路径（可能未设置为指向您的应用程序）运行该类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T13:50:25.177

这个**runme**是jar中的jar名还是主类？

要从 jar 启动您的应用程序，您可以执行以下操作：

```
java -jar runme.jar 
```

# php - 使用 PHP 屏蔽图像生成 CGI 脚本的 URL

> ID：12514008
> 
> 赞同：3
> 
> 时间：2012-09-20T13:45:40.060
> 
> 标签：php, apache, url-rewriting, cgi, jpeg

我有一个联网的摄像头，可以在点击时生成视频快照 `http://192.0.0.8/image/jpeg.cgi`。问题是通过`192.0.0.8`直接访问根（即），用户可以访问实时视频源，所以我希望完全隐藏地址。

我提出的解决方案是使用 PHP 检索图像并将其显示在`http://intranet/monitor/view.php`. 尽管用户可以通过反复点击这个新地址来创建动作，但我认为这不太可能。

我尝试过以各种方式使用`include()`and `readfile()`，但并没有真正经常使用 PHP 来理解我是否朝着正确的方向前进。我迄今为止的最佳尝试是输出 jpeg 内容，但我没有将代码保存足够长的时间与您分享。

任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T14:01:19.423

如果要限制每个用户的请求，请使用以下命令：

```
$timelimit = 30;//Limit in seconds

if(!isset($_SESSION['last_request_time'])) {
    $_SESSION['last_request_time'] = time();
}

if(time() > $_SESSION['last_request_time'] + $timelimit) {
    //prepare and serve a new image
} else {
    //serve an old image
} 
```

如果要限制图像刷新时间，请使用相同的脚本，但将 last_request_time 保存在所有用户（数据库、文件、缓存）共享的位置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T13:13:48.250

一个简洁的方法如下：

```
header('Content-Type: image/jpeg');
readfile('http://192.0.0.8/image/jpeg.cgi'); 
```

然后 jpeg 的内容作为文件直接从`http://intranet/monitor/view.php`.

# .net - 在 TabControl 中切换选项卡并进行数学运算 (.NET) 时避免出现图形伪影

> ID：12514009
> 
> 赞同：0
> 
> 时间：2012-09-20T13:45:48.840
> 
> 标签：.net, winforms, graphics, tabcontrol

我在 Visual Studio 项目中有一个带有 TabControl 的表单，有 4 个选项卡。

当我加载表单时，我只准备了 3 个选项卡。

如果用户切换到第 4 个选项卡，我必须在选项卡中显示数据之前进行一些数学运算。

切换时我遇到一些图形伪影，如下所示：

![在此处输入图像描述](../Images/7d108a3b8ee2f71e84445fe45b7f295a.png)

*（不要看模糊的，看中间的while条纹和右边的切割图形）*

我在进行数学运算之前尝试了暂停布局，但可能在 TabControl.SelectedIndexChanged 中绘图已经开始。不，没有变化的事件。

我该如何解决这个问题？**可能不使用单独的线程。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T14:56:01.690

由于您说在计算完成后工件会自行更正，这很可能是因为您没有给 UI 线程更新屏幕的机会，因为您正在花费 CPU 进行计算。您可能需要使用某种线程来解决问题。

Windows 窗体包含一个很好的[`BackgroundWorker`](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)控件，可以使此类任务变得非常简单。只需将控件从工具箱拖到表单设计器上，然后为`DoWork`和`RunWorkerCompleted`事件创建事件处理程序。将您的计算放在`DoWork`处理程序中，以及在处理程序中计算完成后需要对 UI 进行的任何更新`RunWorkerCompleted`（重要的是要注意，您不应从`DoWork`处理程序访问任何 UI 元素）。

这是一个简短的代码示例：

```
 public partial class Form1 : Form
  {
    private MyCalculationState _state;

    public Form1()
    {
      InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
      backgroundWorker1.RunWorkerAsync();
    }

    private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
    {
      _state = new MyCalculationState();

      // Do some calculations
      _state.Value = 5;
    }

    private void backgroundWorker1_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
      // Update the UI after calculations are complete
      textBox1.Text = _state.Value.ToString();
    }
  } 
```

# z3 - ini-option CASE_SPLIT 产生奇怪的模型

> ID：12514011
> 
> 赞同：6
> 
> 时间：2012-09-20T13:45:55.070
> 
> 标签：z3

在使用 z3 撰写硕士论文时，我发现了一些我无法理解的奇怪东西。我希望你能帮助我。:)

我写的 smt 文件是这样的：

```
(set-logic QF_UF)
(set-info :smt-lib-version 2.0)

;Declare sort Node and its objects.
(declare-sort Node 0)
(declare-fun n0 () Node)
(declare-fun n1 () Node)

;Predicate
(declare-fun dead_0 (Node) Bool)
;Abbreviation
(declare-fun I () Bool)

;initial configuration
(assert(= I (and 
(not(= n0 n1))
(not(dead_0 n0))
(dead_0 n1))))

;Predicate
(declare-fun dead_1 (Node) Bool)
;variable
(declare-fun m0_1 () Node)

;Abbreviation for Transformation
(declare-fun TL1_1 () Bool)

;Transformation1neuerKnoten1
(assert(or (= m0_1 n0)(= m0_1 n1)))

;Is the whole formula satisfiable?
(assert(= (and I TL1_1) true))
(check-sat)
(get-model) 
```

使用 z3 作为带有默认选项的命令行工具时，一切都运行良好。生成的模型包含：

```
;; universe for Node:
;;   Node!val!0 Node!val!1 
;; ----------- 
```

和

```
(define-fun n0 () Node
Node!val!0)
(define-fun n1 () Node
Node!val!1)
(define-fun m0_1 () Node
Node!val!0) 
```

所以我的变量 m0_1 绑定到节点 n0。

然后我将 z3 与仅包含`CASE_SPLIT=5`. 结果是一个奇怪的模型。在我看来，区别基本上是我的变量 m0_1 没有绑定到我的任何节点 n0 或 n1。生产的模型包含：

```
;; universe for Node:
;;   Node!val!2 Node!val!0 Node!val!1 
;; ----------- 
```

和

```
(define-fun n0 () Node
Node!val!0)
(define-fun n1 () Node
Node!val!1)
(define-fun m0_1 () Node
Node!val!2) 
```

所以我的问题是：为什么 z3 创建另一个节点 ( `Node!val!2`) 以及为什么我的变量`m0_1`绑定到这个新节点？我认为我的一个断言 ( `(assert(or (= m0_1 n0)(= m0_1 n1)))`) 会禁止这样做。

提前致谢！:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T15:48:39.720

Z3 有一个称为“相关性传播”的功能。此功能对于包含量词的问题非常有效，但对于无量词问题通常是开销。命令行选项`RELEVANCY=0`禁用相关传播，`RELEVANCY=2`或`RELEVANCY=1`启用它。该选项`CASE_SPLIT=5`假定启用了相关性传播。如果我们提供`CASE_SPLIT=5 RELEVANCY=0`，那么 Z3 会生成一个警告信息

```
WARNING: relevacy must be enabled to use option CASE_SPLIT=3, 4 or 5 
```

并且，*忽略*该选项。

此外，默认情况下，Z3 使用“自动配置”功能。此功能扫描输入公式并调整给定实例的 Z3 配置。因此，在您的示例中，会发生以下情况：

1.  您提供选项`CASE_SPLIT=5`
2.  当 Z3 验证命令行选项时，相关性传播被禁用，并且不会生成警告消息。
3.  Z3 运行自动配置过程，并且由于您的示例没有量词，因此它禁用了相关性传播`RELEVANCY=0`。现在，使用了不一致的配置，Z3 产生了错误的结果。

为了避免这个问题，如果你使用`CASE_SPLIT=5`，那么你也应该使用`AUTO_CONFIG=false`(disables auto configuration) 和`RELEVANCY=2`(enables relevancy propagation)。所以，命令行应该是：

```
z3 CASE_SPLIT=5 AUTO_CONFIG=false RELEVANCY=2 file.smt2 
```

`CASE_SPLIT=5`在下一个版本（Z3 4.2）中，如果用户在启用自动配置时尝试设置，我将使 Z3 显示警告消息。

# haskell - 在haskell中从stdin懒惰地读取和操作浮点数

> ID：12514013
> 
> 赞同：4
> 
> 时间：2012-09-20T13:45:59.547
> 
> 标签：haskell, stdin, lazy-evaluation

我正在尝试从标准输入读取数据作为双精度，操作它们并写入它们。到目前为止，我想出的是：

```
import qualified Data.ByteString.Lazy as B
import Data.Binary.IEEE754
import Data.Binary.Get

-- gives a list of doubles read from stdin
listOfFloat64le = do
  empty <- isEmpty
  if empty
     then return []
     else do v <- getFloat64le
             rest <- listOfFloat64le
             return (v : rest)

-- delay signal by one
delay us = 0 : us

-- feedback system, add delayed version of signal to signal
sys us = zipWith (+) us (delay us)

main = do
    input <- B.getContents
    let hs = sys $ runGet listOfFloat64le input
    print $ take 10 hs 
```

这个想法是将数据馈送到程序中，然后在将其写入标准输出之前通过反馈系统。虽然现在它只打印前 10 个值。

这有效，但似乎并没有懒惰地评估。即它必须将所有输入读入内存。所以：

```
dd if=/dev/urandom bs=8 count=10 | runhaskell feedback.hs 
```

会很好，但是：

```
dd if=/dev/urandom | runhaskell feedback.hs 
```

将不会。我的猜测是它`listOfFloat64le`使事情无法正常工作的功能。那么如何创建一个可迭代的对象来传递给我的`sys`函数，而不必将所有内容都读入内存呢？

我不是一个很有经验的haskeller。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T15:52:46.200

我采取了另一条路线，而是以 8 个字节的间隔拆分 ByteString 并对其进行映射：

```
import qualified Data.ByteString.Lazy as L
import Data.Binary.IEEE754
import Data.Binary.Get

-- delay signal by one
delay us = 0 : us

-- feedback system, add delayed version of signal to signal
sys us = zipWith (+) us (delay us)

-- split ByteString into chunks of size n
chunk n xs = if (L.null xs)
        then []
        else y1 : chunk n y2
          where
            (y1, y2) = L.splitAt n xs

main = do
    input <- L.getContents

    let signal = map (runGet getFloat64le) (chunk 8 input)
    print $ take 10 (sys signal) 
```

这似乎至少有效，但我不知道性能如何。

编辑：我切换`chunk`到`chunker`使用 runGetState 代替：

```
chunker :: Get a -> L.ByteString -> [a]
chunker f input = if (L.null input)
                     then []
                     else val : chunker f rest
                       where
                        (val, rest, _) = runGetState f input 0 
```

并像这样使用它：`let signal = chunker getFloat64le input`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T17:07:19.133

这似乎是一个标准问题，您可以轻松地使用类似`pipes`or的东西`conduits`。您可以将`stdin`其作为源和`stdout`接收器，并将变压器应用为`conduit`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T14:45:06.610

看到[这个问题](https://stackoverflow.com/questions/11695373/lazy-decoding-of-a-list-with-data-binary)。看起来 Binary 比我很久以前使用它时变得更严格了。

# java - Java - 从具有不同纪元的外部设备的时间戳计算时间

> ID：12514018
> 
> 赞同：2
> 
> 时间：2012-09-20T13:46:11.367
> 
> 标签：java, date, calendar, timestamp, epoch

所以我对 Java 中的日历/时间/日期内容有点陌生，但我在网上读过很多关于它们的内容。

这是我必须做的：

我有一个将 Avl 数据包发送到我的通信服务器的外部设备，并且我正在进行数据部分的解析过程。

在数据包的某处，设备发送一个 32 位的时间戳，我必须将其解析/翻译成保存 GPS 点记录的时间。

时间戳给了我从 2007.01.01 00:00 UTC 开始的秒数

现在这是一个示例代码，我觉得它是我在其余实验中尝试过的最接近的示例代码。

DateFormat formatter = new SimpleDateFormat("dd/MM/yyyy hh:mm:ss.SSS");

```
 long now = (long)(TimeStampSeconds.longValue() * 1000);

    Calendar calendar = Calendar.getInstance();
    calendar.clear();
    calendar.set(2007, 0, 1);
    calendar.setTimeInMillis(now);

    System.out.println(now + " = " + formatter.format(calendar.getTime())); 
```

之后我发现 calendar.set 没有创造一个新的纪元，所以 .setTimeInMills 不起作用。虽然我得到了一些疯狂的结果，比如：

二进制时间戳为：0000101011000001010110001111011100001111

秒：46193506063

46193506063000 = 25/10/3433 04:27:43.000

我不应该只是想念 1970 年到 2007 年之间的 37 年吗？

我想找到一种方法来从我从设备获得的秒数中找到时间，但是它们的纪元是 2007 年 1 月 1 日，而 java 的纪元是 1970 年 1 月 1 日。

编辑：我想要的是有时间：2007 年 1 月 1 日加上时间戳的时间。希望我稍微澄清了这个问题..

有人有什么想法吗？？提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:49:32.223

看来您想要做的只是将您的`now`价值添加到`Calendar`. 这很容易做到：

```
DateFormat formatter = new SimpleDateFormat("dd/MM/yyyy hh:mm:ss.SSS");

long now = (long)(TimeStampSeconds.longValue() * 1000);

Calendar calendar = Calendar.getInstance();
calendar.clear();
calendar.set(2007, 0, 1);
calendar.setTimeInMillis(calendar.getTimeInMillis() + now);

System.out.println(now + " = " + formatter.format(calendar.getTime())); 
```

**编辑**

关于你的`now`变量持有的东西有些奇怪。`46193506063 seconds`对`1464.786468258 years`应按[这个时间转换器](http://www.unitconversion.org/unit_converter/time.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T14:09:57.687

假设您在 long 变量中读取输入`timestamp`，我会执行以下操作：

```
Calendar theirEpoch = Calendar.getInstance();
theirEpoch.set(2007, 0, 1);
Calendar myEpoch = Calendar.getInstance();
myEpoch.set(1970, 0, 1);
long difference = myEpoch.getTimeInMillis() - theirEpoch.getTimeInMillis();
Calendar result = Calendar.getInstance();
result.setTimeInMillis(timestamp + difference); 
```

我没有测试它，但它应该给你的想法。另请注意，我没有考虑时区。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T14:17:13.597

最简单的做法是在设置时间以毫秒为单位后使用*Calendar*`roll()`的方法：

 *`calendar.roll(Calendar.YEAR, 37)`--> 只需将您的日期增加 37 年 ;-)

但我认为您的输入数据是错误的：如果您计算自 2007 年 1 月 1 日到现在为止的秒数，它应该是大约 2 亿，而不是像您的示例中那样的 400 亿......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T14:20:28.470

这是做你想做的事情的正确方法：

```
Calendar cal = Calendar.getInstance();
cal.set(2007, 1, 1, 0 ,0 ,0);
cal.set(Calendar.MILLISECOND, 0);
cal.add(Calendar.MILLISECOND, theirEpoch); 
```

If their epoch is in seconds, change the last MILISECOND to SECOND.*

# design-by-contract - 为什么按合同设计不受欢迎？

> ID：12514020
> 
> 赞同：4
> 
> 时间：2012-09-20T13:46:12.947
> 
> 标签：design-by-contract

从理论上讲，这似乎是避免错误的一个很好的解决方案，但为什么在实践中我们听到的很少呢？

例如，为什么我们不能在 Java 或 .net 上看到对它的更多支持？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-27T00:26:07.257

我也一直在寻找这个答案。但它似乎在编程世界中并不流行。所以讨论的人不多。我尝试使用它，但是我发现在编程时真正思考我应该写什么合同很麻烦。但是它有利于调试。

你有没有尝试过？你对此有何评论？

# c# - 日期时间到 Excel 区域问题

> ID：12514021
> 
> 赞同：2
> 
> 时间：2012-09-20T13:46:14.803
> 
> 标签：c#, excel, interop

我强烈键入我的 DataTable DateTime 列，然后将 DataTable 转换为 Object[,] 并粘贴到 Excel 中。我的问题是，在某些情况下，日期以美国格式显示，而在其他情况下以英国格式显示。执行此操作并确保粘贴正确日期但同时保持列类型的标准做法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T13:51:05.507

`NumberFormat`使用 C# Excel 互操作，您可以使用该属性设置单元格或单元格区域的格式。

这只是一个字符串，与您在 Excel 中键入的内容相同，如果您右键单击一个单元格或一系列单元格并选择`Custom`类别，然后键入格式。

您只需执行以下操作即可确保单元格中的日期始终具有相同的格式：

```
range.Value = DateTime.Now.ToOADate();
range.NumberFormat = "dd/mm/yyyy"; 
```

# c++ - 奇怪的算术错误 - 255x256x256x256=18446744073692774400

> ID：12514027
> 
> 赞同：25
> 
> 时间：2012-09-20T13:46:38.760
> 
> 标签：c++, multiplication, uint64

我在c++下编程时遇到了一件奇怪的事情。这是一个简单的乘法。

代码：

```
unsigned __int64 a1 = 255*256*256*256;
unsigned __int64 a2= 255 << 24; // same as the above

cerr()<<"a1 is:"<<a1;
cerr()<<"a2 is:"<<a2; 
```

有趣的是，结果是：

```
a1 is: 18446744073692774400 
a2 is: 18446744073692774400 
```

而应该是：（使用计算器确认）

```
4278190080 
```

谁能告诉我这怎么可能？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-09-20T13:49:39.567

```
 255*256*256*256 
```

所有操作数都是`int`你溢出的`int`。有符号整数的溢出是 C 和 C++ 中未定义的行为。

**编辑：**

请注意，`255 << 24`如果您的`int`类型是，则第二个声明中的表达式也会调用未定义的行为`32-bit`。`255 x (2^24)`是`4278190080`不能用 a 表示的`32-bit` `int`（最大值通常`2147483647`在`32-bit` `int`二进制补码表示的 a 上）。

C 和 C++ 都说`E1 << E2`如果`E1`是有符号类型并且是正数并且`E1 x (2^E2)`不能以 的类型表示`E1`，则程序会调用未定义的行为。这`^`是数学*幂*运算符。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-09-20T13:50:21.353

你的文字是`int`. 这意味着所有的操作实际上都是在 上执行的`int`，并立即溢出。当转换为无符号 64 位 int 时，这个溢出的值就是您观察到的值。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-09-20T15:51:49.350

也许值得解释一下产生数字 18446744073692774400 的原因。从技术上讲，您编写的表达式触发了“未定义的行为”，因此编译器可能会产生*任何*结果；但是，假设`int`是 32 位类型，现在几乎总是这样，如果你写，你会得到相同的“错误”答案

```
uint64_t x = (int) (255u*256u*256u*256u); 
```

并且该表达式不会*触发*未定义的行为。（从`unsigned int`to的转换`int`涉及*实现定义的*行为，但由于多年来没有人生产过补码或符号和大小 CPU，因此您可能遇到的所有实现都以完全相同的方式定义它。）我已经写了以 C 风格进行转换，因为我在这里所说的一切都同样适用于 C 和 C++。

首先，让我们看一下乘法。我用十六进制写右手边，因为这样更容易看到发生了什么。

```
255u * 256u               = 0x0000FF00u
255u * 256u * 256u        = 0x00FF0000u
255u * 256u * 256u * 256u = 0xFF000000u (= 4278190080) 
```

最后一个结果 ,`0xFF000000u`具有 32 位数字集的最高位。因此，将该值转换为带*符号*的32 位类型会导致它变为负数，就好像从其中减去 2 ^(32)一样（这是我上面提到的实现定义的操作）。

```
(int) (255u*256u*256u*256u) = 0xFF000000 = -16777216 
```

我在那里写了十六进制数字，无`u`后缀，以强调当您将其转换为有符号类型时，该值的*位模式*不会改变；它只是被重新解释。

现在，当您将 -16777216 分配给`uint64_t`变量时，它会通过添加 2 ^(64)反向转换为无符号的 as-if 。（与无符号到有符号的转换不同，此语义是由标准规定的。）这*确实*改变了位模式，将数字的所有高 32 位设置为 1 而不是您预期的 0：

```
(uint64_t) (int) (255u*256u*256u*256u) = 0xFFFFFFFFFF000000u 
```

如果你用`0xFFFFFFFFFF000000`十进制写，你会得到 18446744073692774400。

作为最后一条建议，每当你从 C 或 C++ 中得到一个“不可能的”整数时，试着用十六进制打印出来；以这种方式更容易看到二进制补码固定宽度算术的奇怪之处。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T03:29:59.293

答案很简单——溢出。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T05:19:32.903

这里溢出发生在 int 上，当你将它分配给 unsigned int64 时，它转换为 18446744073692774400 而不是 4278190080

# android - 如何在 VideoView 中播放音频时显示缩略图？

> ID：12514028
> 
> 赞同：1
> 
> 时间：2012-09-20T13:46:40.280
> 
> 标签：android, android-videoview

我有一个同时播放音频和视频流的 videoView，但是当我播放音频时，我不希望屏幕为空白，而是想显示图像或缩略图，我该如何完成此任务？

# html - 构建html文档

> ID：12514034
> 
> 赞同：-1
> 
> 时间：2012-09-20T13:46:45.613
> 
> 标签：html

我已经接管了一些生成没有结构的 html 文档的软件。它本身的 HTML 已经足够好了。很好的封闭和嵌套，但几乎不可能用人眼阅读，因为换行符是 tekst 编辑器用来查看文档的方式，取悦。

所以，我的问题如下。

你们有谁知道一个在线解析器或程序，它允许显示一个杂乱的、或多或少缩小的 html 文档，以显示一个人类可读的文档？最好还缩进各种标签以显示标签的嵌套级别

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T13:49:02.420

也许试试这个（刚刚选择了“html online tidy”谷歌搜索的第一个链接）。[http://infohound.net/tidy/](http://infohound.net/tidy/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T13:49:32.367

试试[这个](http://infohound.net/tidy/)。

它是在线的，而且是免费的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T13:48:22.133

几乎所有的 HTML 编辑器都具备这种能力。例如：HTMLKit

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T13:48:48.520

JS Beautifier 也适用于 HTML：http: [//jsbeautifier.org/](http://jsbeautifier.org/)

如果您搜索，还有其他类似的在线工具可用。

# installation - 在本地目录中安装包

> ID：12514037
> 
> 赞同：19
> 
> 时间：2012-09-20T13:47:01.277
> 
> 标签：installation, package, go, local

`go get...`在本地目录中安装包（带有 的包）的最佳做法是什么？

示例：我想试用[Revel](http://robfig.github.com/revel/) Web 框架，但我不想在`/usr/local/go`.

通常我会说`sudo go get github.com/robfig/revel`写在主页上，但这会将它安装在`/usr/local/go/src/pkg/...`.

有没有一种简单的方法可以说（例如）`go get --local ...`并将包放在当前（子）目录中？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-20T14:15:19.020

要扩展 keks 答案，您可以将 .bashrc 更新为如下所示

```
export GOROOT=/usr/local/go
export GOPATH=~/workspace/me/go
export PATH=$PATH:$GOROOT/bin:$GOPATH/bin 
```

现在安装的所有软件包`go get`都与 go 发行版分开。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-20T13:55:09.473

您可以导出环境变量`GOPATH`。对我来说是`~/local/lib/go`。这个文件夹有子文件夹`bin`,`pkg`和`src`, 所以它就像`/usr/local/go`. -tool`go`会自动下载、构建和安装包到这个目录。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-07-12T14:17:57.500

您可能需要考虑使用[Go Version Manager (gvm)](https://github.com/moovweb/gvm)。

除了在 Go 版本之间轻松切换之外，它还允许您在*pkgsets*（“工作区”）之间切换。

首先你创建一个集合

```
gvm pkgset create myproject 
```

然后你用它

```
gvm pkgset use myproject 
```

奇迹般有效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-01-24T17:07:52.767

在启用现代模块的 go（在 go 1.11 中引入）中，您可以将[gobin](https://github.com/myitcv/gobin)程序与 GOBIN env var 一起使用，以指定二进制文件的目标：

```
GOBIN=./local gobin github.com/robfig/revel 
```

gobin的安装如下：

```
GO111MODULE=off go get -u github.com/myitcv/gobin 
```

# c# - 如何从页面中删除 jQuery 代码？

> ID：12514038
> 
> 赞同：0
> 
> 时间：2012-09-20T13:47:01.653
> 
> 标签：c#, jquery, asp.net

是否可以从代码隐藏页面中删除或删除所有 jQuery 代码？首先，我想删除所有内容，然后重新创建其中一些。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T14:24:37.187

我认为您正在以错误的方式考虑这一点，您无需删除代码只需添加一个条件，这意味着它仅在您想要的时候运行。例如，您可以向要使用 jQuery 影响的元素添加一个类，并且仅在它具有此类时才运行 click 函数。当您不希望它运行时删除类，当您确实希望它运行时添加类....简单。

```
$('#MainContent_fileUpload').live('change', function () { 
    if($(this).hasClass('active')){ 
        $("#MainContent_btnUpload").click(); 
    }
});

if (condition of acivity){
    $('#MainContent_fileUpload').addClass('active')
}

if (condition of inacivity){
    $('#MainContent_fileUpload').removeClass('active')
} 
```

# javascript - 从 android 活动调用 javascript 函数

> ID：12514039
> 
> 赞同：4
> 
> 时间：2012-09-20T13:47:03.597
> 
> 标签：javascript, android, cordova

我在主要活动中使用以下代码，它给出的函数 display() 没有定义

```
public class cordovaExample extends DroidGap {
    Context mcontext;
    private novel n;
    private Server s;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        new Thread(new Server(this)).start();
        try {
            Thread.sleep(500);
        } catch (InterruptedException e) { }
        new Thread(new Client()).start();

        super.init();

        n = new novel(this, appView); 
        s = new Server(this,appView);

        appView.getSettings().setJavaScriptEnabled(true);
        appView.addJavascriptInterface(n, "novel");
        appView.addJavascriptInterface(s, "Server");

        super.loadUrl("file:///android_asset/www/index.html");
        super.loadUrl("javascript:display()");
    }
} 
```

在最后一行给出错误 display() 未定义

```
function display() {
    alert("abc");
} 
```

上面的代码显示了我在 html 文件中使用的显示功能

任何类型的帮助将不胜感激

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T13:54:05.697

让 Cordova 在页面加载时加载 JavaScript 是个坏主意。这应该由您的本地 JavaScript 处理。尝试在 HTML 页面本身中调用 display() 函数：

```
<script>
    function display()
    {

        alert("abc");

    }

    window.onload = function() {
        display();
    }
</script> 
```

如果您以后需要从 Cordova 中调用 JavaScript，可以通过以下方式进行：

```
sendJavascript("display();"); 
```

要从其他类访问此方法，您将需要访问您的主要活动。简单但可能不安全的方法是在主 Activity 中创建一个静态变量，该变量将保存 Activity 本身。例子：

```
public class MyActivity extends DroidGap {
    public static MyActivity activity;

    public void onCreate(Bundle savedInstanceState) {
        activity = this;
    }
} 
```

然后，在课堂上的任何地方，执行以下操作：

```
MyActivity.activity.sendJavascript('display();'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-25T04:53:50.087

从 Cordova 2.6 开始，您可以在 CordovaActivity (DroidGap) 中覆盖 onMessage，您必须捕获消息“onPageFinished”，然后您可以调用文档上声明的任何函数：

```
@Override
public Object onMessage(String id, Object data) {
    if("onPageFinished".equals(id)) {
        sendJavascript("display('abc');");
    }
    return super.onMessage(id, data);
} 
```

在 HTML 中：

```
<script>
    function display(arg) {
        alert(arg);
    }
</script> 
```

其他选项是在 CordovaActivity 的 onResume() 函数中调用它：

```
@Override
public void onResume() {
    super.onResume();
    sendJavascript("display('abc');");
} 
```

# java - 线程消费者内部的 NullPointerException

> ID：12514042
> 
> 赞同：2
> 
> 时间：2012-09-20T13:47:13.523
> 
> 标签：java, multithreading

> **可能重复：**
> [我在 Consumer 内收到 NullPointerException](https://stackoverflow.com/questions/12512949/i-am-getting-nullpointerexception-inside-consumer)

这是否被认为是 Producer ， Consumer Scenario 中的错误？

**这是我的 Producer 类。**

```
package com ;

import java.util.concurrent.PriorityBlockingQueue;

public class Producer extends CommonClass implements Runnable {
    private SyncronizedStack stack;
    private int producerNum;

    Producer(PriorityBlockingQueue<Character> queue) {
        this.queue = queue;
    }

    public void run() {

        char ch;

        for (ch = 'a'; ch <= 'f'; ch++) {
            queue.add(ch);
            System.out.println("Producer" + producerNum + "produced :" + ch);
            try {
                Thread.sleep((int) (Math.random() * 300));

            } catch (InterruptedException e) {
                System.out.println("Error");
            }

        }

    }

} 
```

**这是我的消费类**

```
package com ;

import java.util.concurrent.PriorityBlockingQueue;

public class Consumer extends CommonClass implements Runnable {

    private int consumerNum;

    Consumer(PriorityBlockingQueue<Character> queue) {
        this.queue = queue;
    }

    public void run() {
        char c;
        for (int i = 0; i < 7; i++) {
            try {
                c = queue.take();
                System.out.println("Consumer" + consumerNum + "consumed:" + c);
            } catch (Exception e1) {
                e1.printStackTrace();
            }
            try {
                Thread.sleep((int) (Math.random() * 300));
            } catch (InterruptedException e) {
                System.out.println("Error");
            }
        }

    }
} 
```

**这是我的 CommonClass**

```
package com ;

import java.util.concurrent.PriorityBlockingQueue;

public class CommonClass {

    PriorityBlockingQueue<Character> queue = null;

} 
```

**这是我的客户程序**

```
package com ;

import java.util.concurrent.PriorityBlockingQueue;

public class SyncTest {

    public static void main(String[] args) {

        CommonClass cs = new CommonClass();

        PriorityBlockingQueue<Character> queue = new PriorityBlockingQueue<Character>();

        Producer p1 = new Producer(queue);
        Thread t1 = new Thread(p1);
        t1.start();

        Consumer c1 = new Consumer(queue);
        Thread ct1 = new Thread(c1);

        ct1.start();

    }
} 
```

**当我运行它时，我得到的输出为**

```
Producer0produced :a
Consumer0consumed:a

Producer0produced :b
Consumer0consumed:b

Producer0produced :c
Consumer0consumed:c

Producer0produced :d
Consumer0consumed:d

Producer0produced :e
Producer0produced :f
Consumer0consumed:e
Consumer0consumed:f 
```

这是 e 和 f 字母的情况。

这个输出有问题吗？？正如我看到的语句 Producer0produced 同时两次，然后是 Consumer0consumed 语句同时针对字母 e 和 f 。

**我担心使用此代码我会错过 Producer 生成的任何信息吗？**

请指教 ？？

感谢您的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T13:50:13.400

> 这个输出有问题吗？

没有。在消费者设法消费第一个项目之前，您的生产者线程刚刚设法生产了第二个项目。这是完全自然的，尤其是当你随机睡觉时。

当然，您可能希望为队列指定一个上限 - 然后使用[`offer`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/BlockingQueue.html#offer%28E%29)而不是`add`检测队列已满的情况 - 但您显示的输出很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T13:50:26.300

> 正如我看到的语句 Producer0produced 同时两次，然后是 Consumer0consumed 语句同时针对字母 e 和 f 。

不，这是意料之中的。您正在演示多线程的典型异步行为。生产者能够在消费者睡觉时生成 2 个字母。

这将发生，特别是考虑到生产者和消费者都在进行随机睡眠：

```
Thread.sleep((int) (Math.random() * 300)); 
```

但即使没有睡眠，线程程序也会出现这种不对称行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T14:25:22.787

**这是一个错误吗？**

答案 -**否**它发生是因为您添加了不必要的睡眠。

```
Thread.sleep((int) (Math.random() * 300)); 
```

我已经简化了您的生产者消费者版本，如下所示。

```
public class Example {

public static class Producer implements Runnable {
    private PriorityBlockingQueue<Character> queue;

    Producer(PriorityBlockingQueue<Character> queue) {
        this.queue = queue;
    }

    public void run() {
        char ch;
        for (ch = 'a'; ch <= 'f'; ch++) {
            queue.put(ch);
        }
    }
}

public static class Consumer implements Runnable {

    private PriorityBlockingQueue<Character> queue;

    Consumer(PriorityBlockingQueue<Character> queue) {
        this.queue = queue;
    }

    public void run() {
        for (int i = 0; i < 7; i++) {
            try {
                System.out.println("Consumer take :" + queue.take());
            } catch (InterruptedException e) {
                Thread.currentThread().interrupt();// Propagate interrupt
            }
        }
    }
}

public static void main(String[] args) {
    ExecutorService executorService = Executors.newFixedThreadPool(2);
    PriorityBlockingQueue<Character> queue = new PriorityBlockingQueue<Character>(7);
    executorService.execute(new Producer(queue));
    executorService.execute(new Consumer(queue));
    executorService.shutdown();
}

} 
```

# mongodb - 使用 MongoDB 的新聚合框架搜索和计算标签的有效方法？

> ID：12514043
> 
> 赞同：2
> 
> 时间：2012-09-20T13:47:16.427
> 
> 标签：mongodb, aggregation-framework

我正在尝试使用新的 AF 从 Map/reduce 迁移。我有数百万这样的对象：

```
{
 _id: ObjectID,
 owner: 1,
 tags: [
   {text: "dog", score: 5}, 
   {text: "cat", score: 3}, 
   {text: "hamster", score:1}]
}

{
 _id: ObjectID,
 owner: 2,
 tags: [
   {text: "cat", score: 8}, 
   {text: "fish", score: 4}]
} 
```

我想做一份报告，其中包含所有者为 X 的“猫”和“鱼”的所有匹配项。

到目前为止，我的管道假设输入标签 ["cat", "fish"] 看起来像：

```
{
  $match: { owner: X, $in: {"tags.text": ["cat", "fish"]}}
}, {
  $project: {text: "$tags.text"},
}, {
  $unwind: "$text",
}, {
  $match: {"text": {$in: {"tags": ["cat", "fish"]}}
}, {
  $group: {"_id": "$text", "total: {"$sum": 1}}
} 
```

第一个 $match 只是缩小到所有这些百万对象的一个​​子集——因为我有一个关于所有者和“tags.txt”的索引。

该管道对于少量标签的功能很好，但我需要能够传入 100-1000 个“标签”并获得快速结果。似乎将所有标签投影出来并展开一定是低效的，只是在下一个匹配步骤中过滤了 90% 的方式。

有没有更有效的方法？也许重新排序管道步骤？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T15:08:27.347

这对我来说看起来不错，除了一些拼写错误，并且`$in`每个`$match`管道操作中运算符的用法可能应该是：

```
{
  $match: {owner: X, "tags.text": {$in: ["cat", "fish"]}}
}, {
  $project: {text: "$tags.text"}
}, {
  $unwind: "$text"
}, {
  $match: {"text": {$in: ["cat", "fish"]}}
}, {
  $group: {"_id": "$text", "total": {"$sum": 1}}
} 
```

本质上，您希望`$match`尽可能早地在管道中使用，以限制稍后在管道中处理的文档数量。`owner`与特定标签的匹配实现了这一点。您还需要确保您`$match`的 （相当于 a `.find()`）使用适当的索引。

# java - 将通配符子网转换为最小的 cidr 子网列表

> ID：12514050
> 
> 赞同：3
> 
> 时间：2012-09-20T13:47:38.920
> 
> 标签：java, wildcard, converter, subnet, cidr

我需要将通配符子网转换为最小的 cidr 子网列表。例如：

```
1.2.3.4/255.0.255.0
converted to
1.0.3.0/24
1.1.3.0/24
1.2.3.0/24
1.3.3.0/24
...
1.254.3.0/24
1.255.3.0/24 
```

上面的例子很简单，但对于像 1.2.3.4/252.0.128.0 这样的通配符子网，它更复杂。

Java中是否有一个库。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T13:57:48.120

您可以`SubnetUtils`从[**Apache使用**](http://www.docjar.com/docs/api/org/apache/commons/net/util/SubnetUtils.html)

它有一个构造函数`SubnetUtils(String address, String mask)` ，将 2 个字符串、目标 IP 和网络掩码作为参数。

然后你可以使用嵌套类`SubnetUtilsInfo`和它的方法来得到你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-06T20:11:04.760

TCP/IP 中使用了 3 种类型的掩码。子网掩码、简单位掩码和通配符掩码。子网掩码必须是连续的。意思是一系列 1，后面是一系列 0。自 1991 年以来一直如此（RFC 1219）。使用此掩码是为了让设备了解相关子网的网络号、广播号和有效主机。简单的位掩码用于访问控制并允许不连续。Cisco ASA 防火墙、iptables 和其他系统使用这些类型的掩码来测试 IP 地址的某些部分。例如 10.1.0.254 255.255.0.255 正在测试第一个八位字节为 10，第二个八位字节为 1，第四个八位字节为 254，但第三个八位字节的值可以是 0-255。通配符掩码是一种反转的简单位掩码，通常用于 Cisco 路由器和交换机。这些也允许是不连续的。使用与之前相同的示例，我们将反转掩码以获得 10.1.0.254 0.0.255.0 的测试。此测试与前面的示例相同，因为我们关心八位字节 1,2 和 4 是否匹配精确值，但八位字节 3 可能会有所不同。所有这一切的关键点是您正在尝试转换两种不同的东西。子网掩码的使用与简单的位掩码/通配符掩码不同。从一个转换到另一个是不可能的。即使简单/通配符掩码是连续的，该掩码也可能不代表正在使用的实际子网掩码。所有这一切的关键点是您正在尝试转换两种不同的东西。子网掩码的使用与简单的位掩码/通配符掩码不同。从一个转换到另一个是不可能的。即使简单/通配符掩码是连续的，该掩码也可能不代表正在使用的实际子网掩码。所有这一切的关键点是您正在尝试转换两种不同的东西。子网掩码的使用与简单的位掩码/通配符掩码不同。从一个转换到另一个是不可能的。即使简单/通配符掩码是连续的，该掩码也可能不代表正在使用的实际子网掩码。

# c# - 将数据从 Excel 工作表绑定到中继器或 GridView

> ID：12514051
> 
> 赞同：0
> 
> 时间：2012-09-20T13:47:46.370
> 
> 标签：c#, asp.net

将数据从 excel 工作表绑定到中继器或 GridView 的有效且最简单的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T13:54:12.833

`OleDbDataAdapter`我认为创建和创建遗嘱很容易`DataSet`完成这项工作。

您可以轻松地将 a 绑定`DataSet`到`gridview`

例如

```
var conn = ("Provider=Microsoft.Jet.OLEDB.4.0;" + 
            ("Data Source=add file path here;" +                                
            "Extended Properties=\"Excel 8.0;\"")); 

var query = "SELECT table from [sheet1$]";

var adpterObj = new OleDbDataAdapter(SSQL, conn); 

var ds = new DataSet();

adpterObj.Fill(ds);
GridView1.DataSource = ds.Tables[0].DefaultView; 
GridView1.DataBind(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T07:06:16.113

首先我们要浏览

```
 void btnBrowse_Click(object sender, EventArgs e)
 {
   OpenFileDialog fileDialog = new OpenFileDialog();
   fileDialog.Filter = "Excel files (*.xls)|*.xls";
   fileDialog.InitialDirectory = "C:";
   fileDialog.Title = "Select a Excel file";
   if (fileDialog.ShowDialog() == DialogResult.OK)
    txtMsg.Text = fileDialog.FileName;
   if (string.IsNullOrEmpty(txtMsg.Text))
   return;
 } 
```

注意：txtMsg.Text = fileDialog.FileName; //这里文件名保存在一个文本框中

然后我们可以上传excel表格到gridview...

```
 private void btnUpload_Click(object sender, EventArgs e)
 {
    if (!string.IsNullOrEmpty(txtMsg.Text))
    {
       InsertBuyBackExceldata(txtMsg.Text);
    }
 } 
```

这里我们可以调用 InsertBuyBackExceldata 方法

```
 void InsertBuyBackExceldata(string filePath)
  {
       if (buyBackServiceProxyController == null)
         buyBackServiceProxyController = new ProxyController();
       buyBackServiceServiceProxy = buyBackServiceProxyController.GetProxy();

       ListBuyBackrequest = new List();
       String[] a= GetExcelSheetNames(filePath); // This method for get sheet names
       var connectionString = string.Format("Provider=Microsoft.Jet.OLEDB.4.0; data source={0}; Extended Properties=Excel 8.0;", filePath);
       //string a=filePath.
        String sheetName = a[0];
       var adapter = new OleDbDataAdapter("SELECT * FROM [" + sheetName + "]", connectionString);
       var ds = new DataSet();

       adapter.Fill(ds, sheetName );

       DataTable data = ds.Tables[sheetName ];

       BindGrid(data);
  } 
```

在这里，我正在调用一种方法来获取工作表名称。

```
 private String[] GetExcelSheetNames(string excelFile)
   {
         OleDbConnection objConn = null;
         System.Data.DataTable dt = null;

      try
      {
         String connString = "Provider=Microsoft.Jet.OLEDB.4.0;" +
           "Data Source=" + excelFile + ";Extended Properties=Excel 8.0;";

         objConn = new OleDbConnection(connString);

         objConn.Open();

         dt = objConn.GetOleDbSchemaTable(OleDbSchemaGuid.Tables, null);

         if (dt == null)
         {
              return null;
         }

       String[] excelSheets = new String[dt.Rows.Count];
       int i = 0;

      foreach (DataRow row in dt.Rows)
      {
            excelSheets[i] = row["TABLE_NAME"].ToString();
             i++;
      }

      return excelSheets;
    }
     catch (Exception ex)
     {
         return null;
     }
     finally
     {
          if (objConn != null)
          {
            objConn.Close();
            objConn.Dispose();
       }
        if (dt != null)
        {
            dt.Dispose();
        }
      }
    } 
```

//Excel上传到Gridview

```
 void BindGrid(DataTable Data)
    {
     try
     {
      // Adding one check box
      DataGridViewCheckBoxColumn chkSelection = new DataGridViewCheckBoxColumn();
      chkSelection.Name = "Selection";
      dgItemsForBuyBackGrid.Columns.Add(chkSelection);
      int intCount = Data.Rows.Count;
      if (i==true)
      {
       if (intCount > 0)
       {
         ExcelGrid.DataSource = Data;
         ExcelGrid.BindPage();
       }
        else
       {
          ExcelGrid.DataSource = null;
          ExcelGrid.BindPage();
          return;
       }
      // Here I am setting Grid colomns properties this name should equal to Excel //column names.
       ExcelGrid.Columns["BI"].ReadOnly = true;
       ExcelGrid.Columns["AAA"].ReadOnly = true;
       ExcelGrid.Columns["AAB"].ReadOnly = true;
       ExcelGrid.Columns["AAC"].ReadOnly = true;
       ExcelGrid.Columns["AAD"].ReadOnly = true;
       ExcelGrid.Columns["AAE"].ReadOnly = true;
       ExcelGrid.Columns["AAF"].ReadOnly = true;
       ExcelGrid.Columns["AAG"].ReadOnly = false;
      }
      else
      {
         // Some Code
        }
     }
      catch (Exception ex)
      {

      }
    }
   }
  } 
```

**Excel 2007 和其他版本上传到 .Net 中的 Gridview。**

步骤： 1) AccessDatabaseEngine.exe --> (Install) 和上面代码的一些代码变化。

2) 浏览点击

```
 private void btnBrowse_Click(object sender, EventArgs e)
   {
      -------
      fileDialog.Filter ="Excel files (*.xls;*xlsx;*xlsb)|*.xls;*xlsx;*xlsb";
      // Show those extentional files.
       --------------
    } 
```

3) 处理点击

```
 string connstring = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + fileName + ";Extended Properties=Excel 12.0;"; 
```

谢谢你 ：）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T13:58:21.070

也许这个链接会解决你的问题

[点我](http://www.codeproject.com/Articles/32370/Import-Excel-File-to-DataSet)

```
public static DataSet ImportExcelXLS(string FileName, bool hasHeaders) {
string HDR = hasHeaders ? "Yes" : "No";
string strConn;
if (FileName.Substring(FileName.LastIndexOf('.')).ToLower() == ".xlsx")
    strConn = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + FileName + ";Extended Properties=\"Excel 12.0;HDR=" + HDR + ";IMEX=0\"";
else
    strConn = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + FileName + ";Extended Properties=\"Excel 8.0;HDR=" + HDR + ";IMEX=0\"";

DataSet output = new DataSet();

using (OleDbConnection conn = new OleDbConnection(strConn)) {
    conn.Open();

    DataTable schemaTable = conn.GetOleDbSchemaTable(
        OleDbSchemaGuid.Tables, new object[] { null, null, null, "TABLE" });

    foreach (DataRow schemaRow in schemaTable.Rows) {
        string sheet = schemaRow["TABLE_NAME"].ToString();

        if (!sheet.EndsWith("_")) {
            try {
                OleDbCommand cmd = new OleDbCommand("SELECT * FROM [" + sheet + "]", conn);
                cmd.CommandType = CommandType.Text;

                DataTable outputTable = new DataTable(sheet);
                output.Tables.Add(outputTable);
                new OleDbDataAdapter(cmd).Fill(outputTable);
            } catch (Exception ex) {
                throw new Exception(ex.Message + string.Format("Sheet:{0}.File:F{1}", sheet, FileName), ex);
            }
        }
    }
}
return output;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T13:52:55.610

您应该使用任何一个库或任何其他库从 Excel 中读取数据，然后根据您的要求`(OLEDB Connection, COM Object`将结果放入任何 .Net 对象 ( )。`DataSet, DataTable`然后绑定`DataSet`到你的`Repeater`.

# spring - junit 与 spring 和 mybatis

> ID：12514053
> 
> 赞同：0
> 
> 时间：2012-09-20T13:47:48.403
> 
> 标签：spring, junit, mybatis

我是junit和TDD的新手。

我刚刚制作了我的第一个测试用例。

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = {"classpath:spring-beans/spring-cms-root.xml"})
public class MemberServiceImplTest {

    @Autowired
    MemberService memberService;

    @Test
    public void testGetMemberById() {
        Member member = memberService.getMemberById("testid");
        assertTrue(member != null);
    }

    @Test
    public void testGetMemberBySeq() {
        Member member = memberService.getMemberBySeq(1);
        assertTrue(member != null);
    }
} 
```

但是这个测试类在运行 junit 测试时在下面给了我这个错误。

```
java.lang.IllegalArgumentException: Mapped Statements collection does not contain value for com.tource.cms.member.MemberService.getMemberById
    at org.apache.ibatis.session.Configuration$StrictMap.get(Configuration.java:672)
    at org.apache.ibatis.session.Configuration.getMappedStatement(Configuration.java:507)
    at org.apache.ibatis.session.Configuration.getMappedStatement(Configuration.java:500)
    at org.apache.ibatis.binding.MapperMethod.setupCommandType(MapperMethod.java:240)
    at org.apache.ibatis.binding.MapperMethod.<init>(MapperMethod.java:71)
    at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:39)
    at $Proxy18.getMemberById(Unknown Source)
    at com.tource.cms.member.MemberServiceImplTest.testGetMemberById(MemberServiceImplTest.java:39)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:74)
    at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:82)
    at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

所以我改变了我的测试类，如下所示。

```
public class MemberServiceImplTest {

    MemberService memberService;

    public MemberServiceImplTest() {
        ApplicationContext ctx = new ClassPathXmlApplicationContext("spring-beans/spring-cms-root.xml");
        memberService = ctx.getBean("memberServiceImpl", MemberServiceImpl.class);
    }

    @Test
    public void testGetMemberById() {
        Member member = memberService.getMemberById("testid");
        assertTrue(member != null);
    }

    @Test
    public void testGetMemberBySeq() {
        Member member = memberService.getMemberBySeq(1);
        assertTrue(member != null);
    }
} 
```

这很好用。有人知道它为什么有效吗？

我对两个班级之间的区别一无所知。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T12:48:23.720

您的 mybatis 映射/配置文件未加载，或者您的 bean 未正确自动连接。在损坏的示例中，尝试将 @Qualifier("memberServiceImpl") 添加到您的 memberService 声明中，就在 @Autowired 下方。

仅供参考，因为您说您是单元测试的新手，而不是 assertTrue(member != null)，您应该 assertNotNull(member)。如果您的断言失败，这将产生一个稍微好一点的错误消息。

# java-me - Java ME：是否支持javascript？

> ID：12514055
> 
> 赞同：1
> 
> 时间：2012-09-20T13:47:53.040
> 
> 标签：java-me

我有诺基亚 S40 第 6 版设备。那么，所有 S40 设备都支持 JavaScript 吗？因为我使用 HttpConnection 调用一个 URL(ad.doubleclick.net/.../...) 并且它返回 JavaScript 编码文本所以我的 S40 设备只显示在下面的东西

> `<!-- // -->`

那么，任何人都可以知道为什么会这样吗？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T13:56:20.320

没有 S40 设备支持 Java ME 应用程序中的 Javascript。有些人可能会在本机网络浏览器中支持它。

# objective-c - 以低权限运行 OSX 应用程序

> ID：12514056
> 
> 赞同：2
> 
> 时间：2012-09-20T13:47:55.360
> 
> 标签：objective-c, cocoa, least-privilege

我有一个正在处理的 OSX 应用程序。它不是沙盒（它是一个内部应用程序，可以防止沙盒）。

在某些时候，我的应用程序启动了一个[辅助应用程序](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSBundle_Class/Reference/Reference.html#//apple_ref/occ/instm/NSBundle/pathForAuxiliaryExecutable%3a)，实际上只是一个命令行应用程序。我希望能够剥夺这个应用程序除了将文件写入 TMPDIR 之外的任何功能。我正在尝试遵循[最小特权原则](http://en.wikipedia.org/wiki/Principle_of_least_privilege)。

我正在使用的当前代码是：

```
NSTask* task = [NSTask new];
NSBundle* thisBundle = [NSBundle mainBundle];
[task setArguments:@[a, b, c]];
[task setLaunchPath:[thisBundle pathForAuxiliaryExecutable:@"MyProgram"]];
[task launch]; 
```

这可能与 NSTask 吗？如果不是，我可以使用什么机制以非常低的权限启动 MyProgram？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T14:20:35.233

最好的工具称为 XPC。它在 10.7 中有点弱，但在 10.8 中却非常强大。它的全部目的是让您以这种方式分割您的程序，同时使 IPC 非常容易。一些文档：

*   *守护进程和服务编程指南*中的[“创建 XPC 服务”](https://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPSystemStartup/Chapters/CreatingXPCServices.html#//apple_ref/doc/uid/10000172i-SW6-SW1)
**   [NSXPC连接](http://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSXPCConnection_reference/translated_content/NSXPCConnection.html)*   [Cocoa 与 XPC 的进程间通信](https://developer.apple.com/videos/wwdc/2012/?id=241)（WWDC 2012 session）*   [XPC 简介](https://developer.apple.com/videos/wwdc/2011/?id=206)（WWDC 2011 会议）*   [ObjectToXPC](http://aron.cedercrantz.com/2011/12/17/convert-between-xpc-objects-and-objective-c/) - 3rdparty 库。我没有玩过它，但它承诺在 10.7 中进行对象编组（请参阅下面为什么对象编组可能很危险）。您也可以只使用自己的 JSON 协议等。*

 *XPC 在 10.8 中的一大变化是他们添加了`NSSecureCoding`. 他们修改了编译器以将类信息注入协议定义中，以便可以更安全地完成对象编组。这意味着当你说一个 ObjC 协议传递一个`NSString`时，他们实际上可以检查该对象是否是一个`NSString`. （在 10.8 之前，对象中没有类信息`Protocol`。您只能检查参数是否应该是“对象”。）

谁在乎？好吧，假设我劫持了你的低权限任务并欺骗它返回一个`NSSomethingElse`而不是一个`NSString`（也许我只是覆盖了`isa`修改它的类的指针）。假设`NSSomethingElse`有一种`length`方法对我作为攻击者有用。现在，当您的高权限任务调用`[returnedValue length]`时，它将运行错误的方法。或者，也许`NSSomethingElse`没有`length`方法，所以我可以强制高权限任务抛出“不实现选择器”异常，这对我也很有用。有了`NSSecureCoding`，这种攻击就难多了。它可以自省返回的对象，注意它不是一个`NSString`，并拒绝将它返回给调用代码。

即使没有`NSXPCConnection`.*

# asp.net - 安装 nopCommerce 2.65 时出错

> ID：12514059
> 
> 赞同：0
> 
> 时间：2012-09-20T13:47:57.213
> 
> 标签：asp.net, nopcommerce

安装 nopCommerce 2.65 时出现以下错误 **“•安装失败：序列包含多个元素”**

我正在输入带有数据库连接信息的设置信息，但出现此错误。

请帮帮我！！！

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T19:01:57.340

Are you upgrading, or doing a fresh install? If you've had a failed install, it's not uncommon to get that message. If it's a failed install, delete the previous database that was created, and re-install - it should go fine after that.

# java - 使用 BubbleSort 对对象进行排序和比较

> ID：12514060
> 
> 赞同：0
> 
> 时间：2012-09-20T13:48:04.507
> 
> 标签：java, sorting, object, compare

我的 Java 程序有问题。大家能帮帮我吗.. 这是程序。 **简介** 在“MukaBuku”网站上，每个用户都拥有以下属性：

1.  姓名，用户的姓名
2.  帖子，发表作品的多篇帖子
3.  朋友，一些现有的朋友

对财产，C先生想要某种DOWN如下：

1.  根据大量现有好友比较用户。如果有两个好友的好友数相同的用户，则继续积分排序的过程 2
2.  根据存在的帖子数比较用户。如果有两个用户拥有相同数量的帖子排序过程，则继续第 3 点
3.  最后是根据他们的名字在字母表中比较两个用户。

**输入格式** 输入由 N +1 行组成。第-1 行代表网站“MukaBuku”中存在的用户数，其中1 ≤ N ≤ 1000。然后在第-2 行到第1 行 **输出格式** 输出由N 行组成。

示例输入：

```
6 
Budi 13 14,
Andi 90 87,
Fawwaz 39 109, 
Bayu 41 9, 
Ani 77 77, 
Ano 77 77, 
```

输出 ：

```
Total Sorting : 8 
Fawwaz 109 39 
Andi 87 90 
Ano 77 77 
Ani 77 77 
Budi 14 13 
Bayu 9 41 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T14:09:46.580

除了上面的帖子说的，让你的 MukabuMember 实现`Comparable<MukabuMember>` 接口。`public int compareTo(MukabuMember m)`然后用您解释的比较过程覆盖。

完成后，您可以调用 Arrays.sort(yourlist)，它将按照您的方式进行排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T13:55:45.470

有一个类（比如 MukabuMember），其中包含你提到的所有属性作为字段。现在有一个主类并为 MukabuMember 类创建 N 个对象。使用 MukabuMember 类作为参数创建一个列表。使用迭代器遍历列表进行排序。您需要三个比较（以嵌套的 if 方式）来根据您的要求进行排序，而不是单个比较 stmt。这应该足够了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T14:30:57.373

以下是您可以遵循的步骤：

1.  创建一个名为 MukabukuMember 的类，其中包含字段**name**、**numberOfPosts** * *numberOfFriends* *
2.  让这个类实现**Comparable**接口。这个接口有一个方法**compareTo**，你可以在其中编写所有的比较逻辑。
3.  Mkae 确保您还覆盖了 MukabukuMember 类中的**equals**和**hashCode**方法。**您需要特别注意的是确保确定两个 MukabukuMember 类相等的逻辑在 compareTo 和 equals 中是相同的**

完成上述三个步骤后，您可以将这些对象存储在**List 中**并对其进行迭代。在每次迭代中，您可以简单地测试**MukabukuMember**类的两个对象，例如**obj1**和**obj2**，如下所示：

*   **obj1.compareTo(obj2)** -如果 obj1 > obj2返回**1 ；****0**如果 obj1 == obj2 和**-1**如果 obj1 < ob
*   **obj1.equals(obj2) - 如果****obj1 == obj2**返回真

# jsp - 避免 JSP 中的代码重复

> ID：12514062
> 
> 赞同：2
> 
> 时间：2012-09-20T13:48:12.617
> 
> 标签：jsp, code-reuse, code-duplication

我正在使用 JSP 和 Spring 框架。`select`在一个页面中，我希望在相应元素旁边有五个按钮。我的问题是如何避免为此重复代码？

这是我为一个按钮选择组合所拥有的代码：

```
 <tr>
            <td>
                <sf:label path="inputFile">Select a file:</sf:label>
            </td>
            <td>
                <sf:select path="inputFile" cssStyle="width: 250px;" onchange="enableLocal(this.selectedIndex,'matButton')">
                    <sf:option value="Upload a Local File" />
                    <sf:option value=" --- Available already: --- " disabled="true" />
                    <sf:options items="${flowData.availableInputs}" />
                </sf:select>
            </td>
            <td>
                <input id="matButton" type="file" name="inputFile"/>
            </td>
        </tr> 
```

在上面的代码中，名称`inputFile`和`matButton`将被视为参数，即其他按钮将具有不同的名称。

我想到的是类似于带有两个参数的函数，它会生成上述代码。可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T13:54:04.940

创建[自定义 JSP 标记文件](http://docs.oracle.com/javaee/5/tutorial/doc/bnaiy.html)。

`/WEB-INF/tags/file.tag`

```
<%@ tag body-content="empty" %>
<%@ attribute name="selectPath" required="true" type="java.lang.String" %>
<%@ attribute name="buttonId" required="true" type="java.lang.String" %>
<%@ taglib prefix="sf" uri="...???..." %>

<tr>
    <td>
        <sf:label path="${selectPath}">Select a file:</sf:label>
    </td>
    <td>
        <sf:select path="${selectPath}" cssStyle="width: 250px;" onchange="enableLocal(this.selectedIndex,'${buttonId}')">
            <sf:option value="Upload a Local File" />
            <sf:option value=" --- Available already: --- " disabled="true" />
            <sf:options items="${flowData.availableInputs}" />
        </sf:select>
    </td>
    <td>
        <input id="${buttonId}" type="file" name="inputFile"/>
    </td>
</tr> 
```

*（我不知道那个`sf`taglib 是什么，你必须自己完成它的 URI）*

按如下方式使用它，`file`文件的基本文件名在哪里`.tag`：

```
<%@ taglib prefix="my" tagdir="/WEB-INF/tags" %>
...
<my:file selectPath="inputFile" buttonId="matButton" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T14:11:09.070

如上所述，您可以使用自定义标签jsp。然后，您可以在模型中的某处声明要使用的所有对 ( `inputFile`& )，并使用核心标签库 ( )。参考这个[例子](http://www.crazysquirrel.com/computing/java/jsp/jstl-forEach.jspx)。这将遍历包含标签定义的集合（您可以从控制器进行所有这些操作）。`matButton``<c:forEach>`

# c - Mongo C 驱动程序：带有未定义符号的动态链接给出运行时错误

> ID：12514070
> 
> 赞同：0
> 
> 时间：2012-09-20T13:48:23.790
> 
> 标签：c, mongodb, gcc, dynamic-linking

我试图在我的应用程序中使用 Mongo C 驱动程序，但严重陷入链接问题。MongoC 驱动提供 4 个对象（libbson.a + libbson.so + libmongoc.a + libmongoc.so）。我的 Makefile 添加了这样的库。

```
srv_la_LIBADD = -lrt -lcre2 -lre2 -lcurl -lpthread -lmongoc \
                -lbson @MODULES_LIBADD@ 
```

驱动程序已成功编译并安装在 /usr/local/lib 中。我什至在 /lib 和 /lib64 目录中创建了这些链接。

问题是我的应用程序被正确编译和链接，但最终的 srv.so 包含*来自*mongo C 驱动程序的未定义符号，这会产生运行时错误。

```
Error loading module srv.so:/usr/local/c_icap/lib/c_icap/srv.so:       undefined symbol: mongo_cursor_set_query 
```

Make 过程中的链接器行是：

```
 libtool: link: gcc -shared  -fPIC -DPIC  .libs/srv_la-srv.o
 .libs/srv_la-erd.o 
 .libs/srv_la-erd_list.o 
 .libs/srv_la-str_util.o 
 .libs/srv_la-url_util.o 
 .libs/srv_la-easyzlib.o 
 .libs/srv_la-state_db.o 
 .libs/srv_la-data_access_api.o 
 .libs/srv_la-cJSON.o  
 .libs/srv_la-clib_es.o   
 -lrt -lcre2 -lre2 /usr/lib/x86_64-linux-gnu/libcurl.so 
 -lpthread -lmongoc -lbson  -O2 -O2   -Wl,-soname -Wl
 ,srv.so -o .libs/srv.so 
```

特别是 srv.so 的 objdump 说：

```
root@talha:/webproxy# objdump -t services/.libs/srv.so|grep "mongo"
0000000000000000         *UND*  0000000000000000              mongo_cursor_set_query
0000000000000000         *UND*  0000000000000000              mongo_destroy
0000000000000000         *UND*  0000000000000000              mongo_cmd_authenticate
0000000000000000         *UND*  0000000000000000              mongo_create_index
0000000000000000         *UND*  0000000000000000              mongo_cursor_destroy
0000000000000000         *UND*  0000000000000000              mongo_update
0000000000000000         *UND*  0000000000000000              mongo_cursor_next
0000000000000000         *UND*  0000000000000000              mongo_cursor_init
0000000000000000         *UND*  0000000000000000              mongo_remove
0000000000000000         *UND*  0000000000000000              mongo_connect
0000000000000000         *UND*  0000000000000000              mongo_cursor_bson 
```

而 bson 符号已正确添加。这很奇怪，因为两个库都安装在同一位置并已添加到 Makefile 中。

我试图静态链接 libmongoc.a(static) 但这导致链接器给出 srv.so 链接到 libmongoc.a 的可移植性警告，并生成最终的 srv.a 而不是 src.so（但这种情况是有道理的）。即使那样，srv.a 中也不存在这些符号。这对我来说更奇怪。

mongo C 驱动程序是使用 -fPIC 标志构建的，因此可以满足该部分的需求。有什么有用的提示吗？为什么它没有正确链接，为什么链接器没有给出任何错误？

# c# - DGV ComboBox 单元保持可更新

> ID：12514073
> 
> 赞同：0
> 
> 时间：2012-09-20T13:48:29.743
> 
> 标签：c#, datagridviewcolumn

我有一个 DataGridView，我希望用户能够直接向其中添加记录。这是通过单击 DGV 下方的链接来完成的，此时以编程方式添加了一个新行，第一个可见单元格是 ComboBoxCell 类型。我如何做到这一点的代码摘录是：

```
// Add a new row to DGV
DataGridView dgv = this.dgvInformation;
DataGridViewRow newRow = new DataGridViewRow();
dgv.Rows.Add(newRow);

// Create cells and add to row
DataGridViewComboBoxCell cellInfoType = new DataGridViewComboBoxCell();
newRow.Cells["InfoType"] = cellInfoType;

// Create DataSource based off LINQ query here
List<ComboItemAccountInfoType> comboDataSource = new List<ComboItemAccountInfoType>();
// List is populated here

// Assign DataSource to combo cell
cellInfoType.DataSource = comboDataSource;
cellInfoType.ValueMember = "AccInfoTypeID";
cellInfoType.DisplayMember = "InfoType";

// Scroll new row into view and begin editing
dgv.FirstDisplayedScrollingRowIndex = dgv.Rows.Count - 1;
dgv.CurrentCell = dgv[1, dgv.Rows.Count - 1];
dgv.BeginEdit(true); 
```

DataSource 包含一些 ID 为 -1 的值，这些值是用户不应选择的类别，所有其他值都有其有效的数据库 ID。这一切都很好，除了如果用户选择了 -1 行，我无法继续编辑组合单元格，因为它只是将值存储在单元格中，我无法再激活下拉菜单。我已将以下代码添加到 _CellValueChanged 事件中，但没有任何效果：

```
private void dgvInformation_CellValueChanged(object sender, DataGridViewCellEventArgs e)
{
    DataGridView dgv = this.dgvInformation;
    DataGridViewCell cell = dgv[e.ColumnIndex, e.RowIndex];

    // If type of cell is ComboBox then 
    if (cell.GetType() == typeof(DataGridViewComboBoxCell))
    {
        DataGridViewComboBoxCell cellInfoType = (DataGridViewComboBoxCell)cell;

        if ((int)cellInfoType.Value == -1)
        {
            MessageBox.Show("Going back into edit mode...");
            dgv.CurrentCell = cell;
            dgv.BeginEdit(true);
        }
        else
        {
            MessageBox.Show(cellInfoType.Value.ToString());
        }
    }
} 
```

移动到另一个单元格后，我确实在此处收到“正在返回编辑模式...”消息，但它并没有按照它所说的去做！任何人都可以解释为什么它不会回到编辑模式，或者有没有办法防止值在被选择后立即被锁定？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T14:21:00.193

如果值为-1，则应该有一个“验证”事件供您拦截和取消。

# java - 如何在 java String 中表示 XML 转义字符

> ID：12514075
> 
> 赞同：0
> 
> 时间：2012-09-20T13:48:29.030
> 
> 标签：java, xml, xsd

我正在使用 anyuri xsd 数据类型。我正在使用 java String builder 构建它。现在为了遵守它，我需要从中删除 char # 并用转义字符替换。现在我尝试用 %23 替换它，据我了解，它是这个字符的十六进制表示，但没有恶意。如果有人遇到此问题，请分享。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:54:56.140

您可以使用[StringEscapeUtils.escapeXml](http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/StringEscapeUtils.html#escapeXml%28java.lang.String%29)来做到这一点。这个：

```
System.out.println(StringEscapeUtils.escapeXml("<some foo=\"xxx&\"/>")); 
```

将输出：

```
&lt;some foo=&quot;xxx&amp;&quot;/&gt; 
```

但是您不应该走这条路，只学习如何使用适当的 Java 库生成 XML。请参阅此处的一些[java+xml 问题](https://stackoverflow.com/questions/tagged/java+xml)。

**编辑** 您可以使用 &#xNN; 转义任何 unicode 字符，其中 NN 是给定字符的十六进制值。# 将是 #

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-20T13:54:27.967

XML 等效语法，例如 '<' 是

> `&lt;`

# c++ - QObject 在删除时是否区分堆栈和堆分配的子项？

> ID：12514077
> 
> 赞同：8
> 
> 时间：2012-09-20T13:48:37.763
> 
> 标签：c++, qt, memory-management, undefined-behavior, qobject

根据 Qt 文档：

> QObjects 在对象树中组织自己。当您以另一个对象作为父对象创建 QObject 时，该对象将自动将自身添加到父对象的 children() 列表中。父级获得对象的所有权；即，它将自动删除其析构函数中的子级。

对我来说，这意味着当 QObject 被删除时，它会遍历并调用它存储在其子列表中的所有指针的 delete。

然而，子节点没有必要被动态分配，使用堆栈分配的对象构建 QObject 树是完全合法的。

根据标准规范，对不指向动态分配对象的指针调用 delete 是未定义的行为，这可能导致从“无”到程序崩溃的任何事情。

IMO 不太可能 QObject，它几乎是整个 Qt 类集合的支柱，依赖于可能产生未定义行为的东西。

那么，QObject 在删除时是否区分栈和堆分配的孩子呢？如果是这样，究竟如何？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-20T13:52:56.360

> 然而，子节点没有必要被动态分配，使用堆栈分配的对象构建 QObject 树是完全合法的。

不。见[QObject::~QObject()](http://qt-project.org/doc/qt-4.8/qobject.html#dtor.QObject)：

> **警告：**所有子对象都被删除。如果这些对象中的任何一个在堆栈上或全局上，那么您的程序迟早会崩溃。

# java - 如何测量我的 Android 应用在某个时刻消耗的能量

> ID：12514078
> 
> 赞同：3
> 
> 时间：2012-09-20T13:48:39.443
> 
> 标签：java, android, battery, energy, consumption

几个月前我一直在努力解决这个问题，因为我正在写我的论文，但不幸的是我没能成功。我正在做的是关于在手机上本地运行算法的应用程序和同一个应用程序但在云上运行算法并将响应返回给手机的应用程序所消耗的能量的性能分析。我想要做的是尝试找到一种准确的方法来获得该算法消耗的能量，因为它一直执行到它得到解决方案（本地和远程）。

有什么方法可以在java中使用Android API来做到这一点？我想编写自己的代码来获得这些措施。请任何你们认为有帮助的东西请告诉我...感谢您的时间和耐心，

阿尔贝托。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T14:17:15.687

我不确定是否有这样的 API 可用。这是一个类似[讨论](https://stackoverflow.com/questions/2960319/how-to-calculate-power-consumption-on-an-android-mobile-that-uses-wifi)的链接。如果你想要，因为能量/电池消耗取决于可能的其他因素，包括编译器的效率。

# iphone - MPMoviePlayerController 有时会旋转，有时不会。

> ID：12514081
> 
> 赞同：0
> 
> 时间：2012-09-20T13:49:00.247
> 
> 标签：iphone, objective-c, ios, mpmovieplayercontroller

我有一个扩展 MPMoviePlayerController 的自定义类，因此它可以随手机方向旋转。我的应用程序在播放视频时不支持在任何其他视图中旋转，这很好用......有一段时间。在删除并重新安装应用程序之前，它们随机只会以纵向播放。有没有其他人见过这样的事情？一直在追这个，每次我认为它已修复时，它都会返回。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T14:14:32.097

我做了完全一样的。我的应用程序是基于标签的，除了电影播放器​​之外不支持旋转。这是我的代码，我在播放持续旋转的电影时使用。我曾使用[电影播放器​​视图不旋转](https://stackoverflow.com/questions/9572640/ios-movie-player-view-doesnt-rotate)和[MPMoviePlayer 完成按钮问题](https://stackoverflow.com/questions/6142571/mpmovieplayer-done-button-issue/6142685#6142685)链接来提出此解决方案。祝你好运！

用法：

```
CustomMoviePlayer* cPlayer = [[CustomMoviePlayer alloc] init];
[cPlayer playMovie:movieFilePath onViewController:self]; 
```

自定义电影播放器​​.h

```
#import <MediaPlayer/MediaPlayer.h>

@interface CustomMoviePlayer : UIViewController 

@property(nonatomic, retain)  MPMoviePlayerController* moviePlayer;
-(void)playMovie:(NSString*)filePath onViewController:(UIViewController*)view;

@end 
```

自定义电影播放器​​.m

```
#import "CustomMoviePlayer.h"
#define degreesToRadian(x) (M_PI * (x) / 180.0)
#define radianToDegrees(x) ((x) * 180.0/M_PI)

@implementation CustomMoviePlayer

-(void)playMovie:(NSString*)filePath onViewController:(UIViewController*)controller {
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(rotateMoviePlayer) name: UIDeviceOrientationDidChangeNotification object:nil];
    [[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];   

    NSURL *url = [NSURL fileURLWithPath:filePath];

    self.moviePlayer =  [[MPMoviePlayerController alloc] initWithContentURL:url];
    self.moviePlayer.controlStyle = MPMovieControlStyleDefault;
    self.moviePlayer.shouldAutoplay = YES;

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(moviePlaybackComplete:) name:MPMoviePlayerPlaybackDidFinishNotification object:moviePlayer];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(MPMoviePlayerDidExitFullscreen:) name:MPMoviePlayerDidExitFullscreenNotification object:moviePlayer];

    [controller.view addSubview:moviePlayer.view];
    [self.moviePlayer setFullscreen:YES animated:YES];
}

- (void)moviePlaybackComplete:(NSNotification *)notification {
     [self cleanupOnMovieComplete];
}

- (void)MPMoviePlayerDidExitFullscreen:(NSNotification *)notification {
     [self cleanupOnMovieComplete];
}

- (void)cleanupOnMovieComplete {
    [[NSNotificationCenter defaultCenter] removeObserver:self name:MPMoviePlayerPlaybackDidFinishNotification object:moviePlayer];
    [[NSNotificationCenter defaultCenter] removeObserver:self name:MPMoviePlayerDidExitFullscreenNotification object:moviePlayer];

    if(_moviePlayer != nil) {
        [_moviePlayer.view removeFromSuperview];
        [_moviePlayer release];
        _moviePlayer = nil;
    }

    /* Transform window to identity */
    [[UIDevice currentDevice] endGeneratingDeviceOrientationNotifications]; 
    [[NSNotificationCenter defaultCenter] removeObserver:self name:UIDeviceOrientationDidChangeNotification object:nil];

    UIWindow *window = [UIApplication sharedApplication].keyWindow;

    if (!window)
        window = [[UIApplication sharedApplication].windows objectAtIndex:0];

    [window setTransform:CGAffineTransformIdentity];
}

-(void)rotateMoviePlayer {
    UIDeviceOrientation orientation = [[UIDevice currentDevice] orientation];

     if (orientation != UIDeviceOrientationUnknown) {

         CGAffineTransform transform = CGAffineTransformMakeRotation(degreesToRadian(0));

         UIWindow *window = [UIApplication sharedApplication].keyWindow;

        if (!window)
            window = [[UIApplication sharedApplication].windows objectAtIndex:0];

        switch (orientation) {
            case UIDeviceOrientationLandscapeLeft:
                transform = CGAffineTransformMakeRotation(M_PI / 2); 
                [window setTransform:transform];
                break;
            case UIDeviceOrientationLandscapeRight:
                transform = CGAffineTransformMakeRotation(-M_PI / 2);
                [window setTransform:transform];
                break;
            case UIDeviceOrientationPortraitUpsideDown:
                transform = CGAffineTransformMakeRotation(M_PI);
                [window setTransform:transform];
                break;  
            case UIDeviceOrientationPortrait:
                [window setTransform:CGAffineTransformIdentity];
                break;
         }
    }   
}

@end 
```

# c# - AutoMapper.Map 忽略源对象中的所有 Null 值属性

> ID：12514084
> 
> 赞同：26
> 
> 时间：2012-09-20T13:49:03.220
> 
> 标签：c#, .net, repository, automapper

我正在尝试映射 2 个相同类型的对象。我想要做的是 AutoMapper 忽略所有`Null`在源对象中具有值的属性，并将现有值保留在目标对象中。

我已经尝试在我的“存储库”中使用它，但它似乎不起作用。

```
Mapper.CreateMap<TEntity, TEntity>().ForAllMembers(p => p.Condition(c => !c.IsSourceValueNull)); 
```

可能是什么问题？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-21T02:27:58.677

有趣，但你最初的尝试应该是要走的路。下面的测试是绿色的：

```
using AutoMapper;
using NUnit.Framework;

namespace Tests.UI
{
    [TestFixture]
    class AutomapperTests
    {

      public class Person
        {
            public string FirstName { get; set; }
            public string LastName { get; set; }
            public int? Foo { get; set; }
        }

        [Test]
        public void TestNullIgnore()
        {
            Mapper.CreateMap<Person, Person>()
                    .ForAllMembers(opt => opt.Condition(srs => !srs.IsSourceValueNull));

            var sourcePerson = new Person
            {
                FirstName = "Bill",
                LastName = "Gates",
                Foo = null
            };
            var destinationPerson = new Person
            {
                FirstName = "",
                LastName = "",
                Foo = 1
            };
            Mapper.Map(sourcePerson, destinationPerson);

            Assert.That(destinationPerson,Is.Not.Null);
            Assert.That(destinationPerson.Foo,Is.EqualTo(1));
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2017-07-14T08:13:07.657

`Condition`使用 3 个参数重载让您使表达式等效于您的示例`p.Condition(c => !c.IsSourceValueNull)`：

方法签名：

```
void Condition(Func<TSource, TDestination, TMember, bool> condition 
```

等价表达：

```
CreateMap<TSource, TDestination>.ForAllMembers(
    opt => opt.Condition((src, dest, sourceMember) => sourceMember != null)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T14:13:51.430

到目前为止，我已经这样解决了。

```
foreach (var propertyName in entity.GetType().GetProperties().Where(p=>!p.PropertyType.IsGenericType).Select(p=>p.Name))
   {
      var value = entity.GetType().GetProperty(propertyName).GetValue(entity, null);
      if (value != null)
      oldEntry.GetType().GetProperty(propertyName).SetValue(oldEntry, value, null);
    } 
```

但仍然希望使用 AutoMapper 找到解决方案

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-08T16:17:30.433

将 Marty 的解决方案（有效）更进一步，这是一种使其更易于使用的通用方法：

```
public static U MapValidValues<U, T>(T source, U destination)
{
    // Go through all fields of source, if a value is not null, overwrite value on destination field.
    foreach (var propertyName in source.GetType().GetProperties().Where(p => !p.PropertyType.IsGenericType).Select(p => p.Name))
    {
        var value = source.GetType().GetProperty(propertyName).GetValue(source, null);
        if (value != null && (value.GetType() != typeof(DateTime) || (value.GetType() == typeof(DateTime) && (DateTime)value != DateTime.MinValue)))
        {
            destination.GetType().GetProperty(propertyName).SetValue(destination, value, null);
        }
    }

    return destination;
} 
```

用法：

```
class Person
{
    public string Name { get; set; } 
    public int? Age { get; set; } 
    public string Role { get; set; } 
}

Person person = new Person() { Name = "John", Age = 21, Role = "Employee" };
Person updatePerson = new Person() { Role = "Manager" };

person = MapValidValues(updatePerson, person); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-28T12:01:08.947

解决方法 -如果源值为 null，则在目标类型**[DataMember(EmitDefaultValue = false)]中添加 DataMember 属性将删除该属性。**

```
[DataContract]
class Person
{
    [DataMember]
    public string Name { get; set; } 

    [DataMember]
    public int? Age { get; set; } 

    [DataMember(EmitDefaultValue = false)]
    public string Role { get; set; } 
} 
```

如果 Role 值为 null，则将删除 Role 属性。

# entity-framework - 如何将现有项目更新到实体框架 5.0

> ID：12514088
> 
> 赞同：4
> 
> 时间：2012-09-20T13:49:17.593
> 
> 标签：entity-framework

我有一个实体框架项目。我想将它更新到 EF 5。我使用 NuGet 和这个命令：

```
PM> Install-Package EntityFramework 
```

安装 EF 5.0。它在我的配置文件中添加了几行：

```
<section name="entityFramework"
         type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"
         requirePermission="false" /> 
```

这足以将我的项目升级到 EF 5.0 吗？这是进行更新的正确方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T14:12:11.223

您需要更改您的项目以使用 .Net 4.5 以利用大量 EF5 改进。这是来自团队的博客。 [http://blogs.msdn.com/b/adonet/archive/2012/08/15/ef5-released.aspx](http://blogs.msdn.com/b/adonet/archive/2012/08/15/ef5-released.aspx)

兼容性

此版本的 NuGet 包与 Visual Studio 2010 和 Visual Studio 2012 完全兼容，可用于面向 .NET 4.0 和 4.5 的应用程序。

**某些功能仅在编写面向 .NET 4.5 的应用程序时可用。这包括枚举支持、空间数据类型、表值函数和性能改进。**

# c# - 使用 C sharp 将 https 网站添加到受信任列表

> ID：12514101
> 
> 赞同：0
> 
> 时间：2012-09-20T13:49:57.930
> 
> 标签：c#, internet-explorer, https, registry, trusted-sites

我需要编写可以模仿 IE 将网站添加到受信任列表的功能的 c sharp 应用程序，我能够实现这一点，但是当需要 HTTPS 复选框实现时，我的代码不起作用。

```
private void checkHTTP_Click(object sender, System.EventArgs e)
{
    if (this.checkHTTP.Checked)
    {
        saveHTTPSSettings(71);
    }
    else
    {
        saveHTTPSSettings(67);
    }
}

private void saveHTTPSSettings(int val)
{
     RegistryKey key = Registry.CurrentUser.CreateSubKey(
        @"Software\Microsoft\Windows\CurrentVersion\Internet Settings\Zones\2\");

     if (key != null)
     {
         key.SetValue("Flags", val);
     }
} 
```

完成此注册后，与 IE 受信任站点 HTTPS 选项所做的更改相同，但在添加网站时，它无法按预期工作。无论为 https 选择什么，它有时都会添加两个站点，有时会给出错误代码 -2147024891

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:53:55.110

您收到的错误翻译为十六进制代码 **0x80070005**，这意味着您没有足够的权限来做您想做的事。尝试通过右键单击/以管理员身份运行来启动您的程序，看看是否有变化。

# mono - 单声道 ARMv7 和 LLVM

> ID：12514102
> 
> 赞同：5
> 
> 时间：2012-09-20T13:49:59.030
> 
> 标签：mono, xamarin.ios, monodevelop, ios6, armv7

我正在将我的应用程序更新到 ios6 并且遇到以下问题

*   使用 ARMv7 构建应用程序无法使用标志 LLVM ...（错误 MT3001）

我的系统配置是

*   MonoDevelop 3.0.4.7
*   单触 6.0.0.0
*   单声道 2.10.9

参考问题：[iOS 6 Mono 和向后兼容性](https://stackoverflow.com/questions/12508826/ios-6-mono-and-backward-compatibility)

**更新**

错误是

> 无法 AOT 程序集 ICSharpCode.SharpZipLib.dll (MT3001)

详细输出

```
/Users/TEST/Desktop/Xcode_4.5.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/gcc  -miphoneos-version-min=3.1 -arch armv7  -std=c99 -I/Developer/MonoTouch/SDKs/MonoTouch.iphoneos.sdk/usr/include -isysroot /Users/TEST/Desktop/Xcode_4.5.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk -c /var/folders/_3/x0_zyy9j0r5_gg94nc3r51zm0000gn/T/tmp371fb2f4.tmp/mscorlib.dll.7.s -o /var/folders/_3/x0_zyy9j0r5_gg94nc3r51zm0000gn/T/tmp371fb2f4.tmp/mscorlib.dll.7.o
error MT3001: Could not AOT the assembly '/Users/TEST/Public/Progetti/AppTest/bin/iPhone/Release/ICSharpCode.SharpZipLib.dll'
  at MTouch+<CompileAssemblies>c__AnonStoreyB.<>m__E (System.String s) [0x00000] in <filename unknown>:0 
  at System.Threading.Tasks.Parallel+<ForEach>c__AnonStorey36`1[System.String].<>m__34 (System.String e, System.Threading.Tasks.ParallelLoopState s, System.Object l) [0x00000] in <filename unknown>:0 
  at System.Threading.Tasks.Parallel+<ForEach>c__AnonStorey35`2[System.String,System.Object].<>m__32 () [0x00000] in <filename unknown>:0 
  at System.Threading.Tasks.TaskActionInvoker+ActionInvoke.Invoke (System.Threading.Tasks.Task owner, System.Object state, System.Threading.Tasks.Task context) [0x00000] in <filename unknown>:0 
  at System.Threading.Tasks.Task.InnerInvoke () [0x00000] in <filename unknown>:0 
  at System.Threading.Tasks.Task.ThreadStart () [0x00000] in <filename unknown>:0 
```

ICSharpCode.SharpZipLib.dll 这是我用来解压缩文件的库。

# php - Suppress output from queries being executed using ADODB

> ID：12514117
> 
> 赞同：0
> 
> 时间：2012-09-20T13:50:39.507
> 
> 标签：php, mysql, adodb

I am working on some old code using `ADODB` in `PHP`. Queries look like this:

```
$query = "SELECT `foo`                                                                                                                                                                
          FROM `bar`;                                                                                                                                           
$result = $conn->Execute( $query ); 
```

I am adding some AJAX functionality to the software but I realised that the `Execute` function is echoing/printing out the query - I don't want this:

```
(mysqlt): SELECT `foo`                                                                                                                                                                
           FROM `bar` &nbsp; 
```

I believe `mysqlt` is the `MySQL` driver.

Is there a way to stop this output ?

Many thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T14:32:36.377

Try disabling debugging.

```
$query = "SELECT `foo` FROM `bar`";
$conn->Debug = false;
$conn->Execute($query); 
```

Otherwise, try using output buffering:

```
ob_start();
$query = "SELECT `foo` FROM `bar`";
$conn->Execute($query);
ob_end_clean(); 
```

# iphone - 如何实现（iOS）操作表但一行中有多个按钮？

> ID：12514118
> 
> 赞同：0
> 
> 时间：2012-09-20T13:50:40.273
> 
> 标签：iphone, xcode, button, action

我想知道如何实现像 iPhone 内置照片编辑应用程序这样的操作表。

转到照片应用程序，然后选择一张照片，然后单击裁剪按钮。有一个按钮叫约束。单击它，将显示一个操作表（或弹出视图？）。它在一行上有 3 个按钮。但似乎操作表只能在一行中有一个按钮。

那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T15:39:23.557

编写自己的视图和视图控制器。将视图设计为您想要的外观，当您想要显示“操作表”时，让您的控制器像系统一样从底部为视图设置动画。做这样的自定义工作表并不难。帮自己一个忙，不要将代码添加到现有的 VC 中，而是创建一个带有委托和简单协议的新类，使其有点像操作表。当用户最终点击按钮时，协议使用协议回调返回结果。然后，您可以在其他地方重用这个类（或将其发布在 github 上以获取名利！）

# mongodb - 无法启动/启动本地 mongo db

> ID：12514119
> 
> 赞同：78
> 
> 时间：2012-09-20T13:50:46.187
> 
> 标签：mongodb, localhost, local

我是 MongoDB 的新手。我目前有一个 mongo db 的转储（即 .bson 文件的目录），并且正在尝试将其导入 mongo。

我按照[http://docs.mongodb.org/manual/tutorial/install-mongodb-on-os-x/](http://docs.mongodb.org/manual/tutorial/install-mongodb-on-os-x/)上的说明安装了 mongo 。

我目前正在尝试通过运行 mongod --dbpath /path/to/my/mongodata （这是一个空目录）来测试启动本地 mongo 实例。

我在标准输出中得到以下信息：

```
Thu Sep 20 09:46:01 [initandlisten] MongoDB starting : pid=1065 port=27017 dbpath=/path/to/my/mongodata/ 64-bit host=dhcp-18-111-28-92.dyn.mit.edu
Thu Sep 20 09:46:01 [initandlisten] 
Thu Sep 20 09:46:01 [initandlisten] ** WARNING: soft rlimits too low. rlimits set to 266 processes, 2560 files. Number of processes should be at least 1280 : 0.5 times number of files.
Thu Sep 20 09:46:01 [initandlisten] db version v2.2.0, pdfile version 4.5
Thu Sep 20 09:46:01 [initandlisten] git version: f5e83eae9cfbec7fb7a071321928f00d1b0c5207
Thu Sep 20 09:46:01 [initandlisten] build info: Darwin bs-osx-106-x86-64-1.local 10.8.0 Darwin Kernel Version 10.8.0: Tue Jun  7 16:33:36 PDT 2011; root:xnu-1504.15.3~1/RELEASE_I386 i386 BOOST_LIB_VERSION=1_49
Thu Sep 20 09:46:01 [initandlisten] options: { dbpath: "/path/to/my/mongodata/" }
Thu Sep 20 09:46:01 [initandlisten] journal dir=/path/to/my/mongodata/journal
Thu Sep 20 09:46:01 [initandlisten] recover : no journal files present, no recovery needed
Thu Sep 20 09:46:01 [websvr] admin web console waiting for connections on port 28017
Thu Sep 20 09:46:01 [initandlisten] waiting for connections on port 27017 
```

在这一点上，它只是挂在那里，什么都不做。似乎它正在等待本地主机上发生某些事情，但我对 mongo 的了解还不够好，无法理解发生了什么。有什么帮助吗？

* * *

## 回答 #1

> 赞同：157
> 
> 时间：2012-09-20T13:59:49.877

没有错，您已经启动了服务器，它正在运行并监听端口`27017`。现在您可以开始与服务器交互，例如只需打开一个新的终端选项卡并运行`mongo`，这将打开 mongo 的交互式控制台并连接到默认服务器（`localhost:27017`）

如果您想将 mongod 作为后台进程运行（以返回控制台），您可以使用[--fork](http://www.mongodb.org/display/DOCS/Starting+and+Stopping+Mongo#StartingandStoppingMongo-RunningasaDaemon)命令选项。这需要您使用某种[日志记录。](http://www.mongodb.org/display/DOCS/Logging)

例如。`mongod --dbpath /path/to/my/mongodata --fork --logpath /path/to/my/mongod.log`

如果你想恢复 bsonexport，你可能会使用[mongorestore](http://www.mongodb.org/display/DOCS/Import+Export+Tools#ImportExportTools-mongorestore)命令

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-29T00:59:14.267

在配置文件中添加以下内容并使用 调用它`monogd`，确保`bind_ip`根据您的要求进行配置，并使用以下链接添加更多副本集：

[https://docs.mongodb.org/manual/tutorial/deploy-replica-set/](https://docs.mongodb.org/manual/tutorial/deploy-replica-set/)

**第1步：**

```
vi /etc/mongod.conf

replication: replSetName: rs01 
```

**第2步：**

```
mongod --config /etc/mongod.conf 
```

**输出：**

```
warning: bind_ip of 0.0.0.0 is unnecessary; listens on all ips by default
about to fork child process, waiting until server is ready for connections.
forked process: 30012
child process started successfully, parent exiting 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-30T11:43:08.237

您需要遵循以下 2 个步骤：

**第一步：** 打开 CMD 并输入`mongod`. 这将运行 mongo 服务器

**第 2 步：** 打开另一个命令提示符，移动到文件所在的位置并键入

```
mongorestore -d db_name -c collection_name file.bson 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-10T17:51:06.953

复制自官方文档

> 这将启动主要的 MongoDB 数据库进程。控制台输出中的等待连接消息表明 mongod.exe 进程正在成功运行。

[https://docs.mongodb.com/manual/tutorial/install-mongodb-on-windows/](https://docs.mongodb.com/manual/tutorial/install-mongodb-on-windows/)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-08-18T04:30:52.467

按 ctrl+c 或 ctrl+z 将停止 mongod 服务，只需运行 sudo servie mongod start

# sql - SQL Server 2008 替换 Unicode 字符

> ID：12514121
> 
> 赞同：1
> 
> 时间：2012-09-20T13:50:47.773
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我刚刚完成了一个项目，我将来自 34 个非规范化数据源的数据聚合到一个规范化 SQL Server 2008 数据库中。

唯一的问题是......来自这些数据源的较大文本字段已经失去了一些保真度，并且现在始终显示 Unicode 控制字符（其中很多）。

这是我用来从制表符分隔的 *.txt 文件之一导入数据的代码：

```
BULK INSERT MyTabeNameHere
        FROM 'C:\FILE\PATH\HERE\FileNameHere.txt'       
        WITH
        (
            FIELDTERMINATOR = '\t',
            ROWTERMINATOR = '\n',
            FIRSTROW = 2
        ) 
```

示例数据可能是：

```
Lorem ipsum ò dolor sit amet
ááá Lorem ipsum dolor sit amet
Lorem ipsum dolor sit amet
Lorem ipsumû dolor sit amet
Lorem ipsum dolor sit aÆmet 
```

我想通过一个 SQL 函数运行这些数据并输出这个......

所需的输出将是：

```
Lorem ipsum dolor sit amet
Lorem ipsum dolor sit amet
Lorem ipsum dolor sit amet    
Lorem ipsum dolor sit amet
Lorem ipsum dolor sit amet 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T14:51:32.920

在这种情况下，还有其他[批量插入](http://msdn.microsoft.com/en-us/library/ms188365.aspx)选项可能会有所帮助，例如：

```
DATAFILETYPE = 'widechar' -- and others 
```

或者

```
CODEPAGE = 'ACP' -- and others 
```

在[将批量操作从 SQL 2000 移动到 2008](https://stackoverflow.com/questions/9087326/in-sql-server-bulk-insert-how-do-i-use-higher-ascii-characters-for-field-and-ro)时，我不得不放弃对格式文件的使用，并包括 widechar 作为获得正确输出的选项。不过，我对你的困境还不够熟悉，不知道这是否对你有用。

> [...] 34 个未标准化的数据源 [...]

正如批量文档所提到的，了解您正在读取的文件类型（ascii、ansi 等）很重要。

# php - symfony2.1 的 PHPUnit - 无法重新声明 xyz()

> ID：12514123
> 
> 赞同：1
> 
> 时间：2012-09-20T13:50:50.520
> 
> 标签：php, symfony, pear, symfony-2.1, composer-php

我读到 PHPUnit 可以用 pear 或 composer 安装。因为我在一个带有 WAMPSERVER 和一个用于控制台内容的 cygwin 的 Windows 上并且没有安装 pear，所以我通过 composer 安装了 PHPUnit。而且特别是因为symfony2.1你必须使用composer，所以[我选择了这个方法](http://www.phpunit.de/manual/3.7/en/installation.html#installation.composer)。

我将它添加到我的 composer.json

```
"require-dev": {
    "phpunit/phpunit": "3.7.*"
}, 
```

然后做一个

```
php composer.phar install --dev 
```

**//Update1（感谢拆解者）**

bin 文件（phpunit 和 phpunit.bat）被复制或链接到应用程序的 bin 目录。但是当我打电话时，`bin/phpunit -c app/` 我得到了这个错误：

```
Fatal error: Cannot redeclare assetic_init() (previously declared in C:\wamp_\www\symfony2.1\vendor\kriswallsmith\assetic\src\functions.php:20) in C:\wamp_\www\symfony2.1\vendor\kriswallsmith\assetic\src\functions.php on line 26

Call Stack:
    0.0005     128056   1\. {main}() C:\wamp_\www\symfony2.1\vendor\phpunit\phpunit\composer\bin\phpunit:0
    0.0095     433520   2\. PHPUnit_TextUI_Command::main() C:\wamp_\www\symfony2.1\vendor\phpunit\phpunit\composer\bin\phpunit:42
    0.0096     436736   3\. PHPUnit_TextUI_Command->run() C:\wamp_\www\symfony2.1\vendor\phpunit\phpunit\PHPUnit\TextUI\Command.php:130
    0.0096     436952   4\. PHPUnit_TextUI_Command->handleArguments() C:\wamp_\www\symfony2.1\vendor\phpunit\phpunit\PHPUnit\TextUI\Command.php:139
    0.0144     683168   5\. PHPUnit_TextUI_Command->handleBootstrap() C:\wamp_\www\symfony2.1\vendor\phpunit\phpunit\PHPUnit\TextUI\Command.php:615
    0.0148     689328   6\. PHPUnit_Util_Fileloader::checkAndLoad() C:\wamp_\www\symfony2.1\vendor\phpunit\phpunit\PHPUnit\TextUI\Command.php:787
    0.0152     689448   7\. PHPUnit_Util_Fileloader::load() C:\wamp_\www\symfony2.1\vendor\phpunit\phpunit\PHPUnit\Util\Fileloader.php:77
    0.0200    1013688   8\. include_once('C:\wamp_\www\symfony2.1\app\bootstrap.php.cache') C:\wamp_\www\symfony2.1\vendor\phpunit\phpunit\PHPUnit\Util\Fileloader.php:93
    0.0202    1016424   9\. require_once('C:\wamp_\www\symfony2.1\app\autoload.php') C:\wamp_\www\symfony2.1\app\bootstrap.php.cache:3
    0.0204    1017424  10\. require('C:\wamp_\www\symfony2.1\vendor\autoload.php') C:\wamp_\www\symfony2.1\app\autoload.php:5
    0.0205    1017440  11\. ComposerAutoloaderInit::getLoader() C:\wamp_\www\symfony2.1\vendor\autoload.php:7

PHP Fatal error:  Cannot redeclare assetic_init() (previously declared in C:\wamp_\www\symfony2.1\vendor\kriswallsmith\assetic\src\functions.php:20) in C:\wamp_\www\symfony2.1\vendor\kriswallsmith\assetic\src\functions.php on line 26
PHP Stack trace:
PHP   1\. {main}() C:\wamp_\www\symfony2.1\vendor\phpunit\phpunit\composer\bin\phpunit:0
PHP   2\. PHPUnit_TextUI_Command::main() C:\wamp_\www\symfony2.1\vendor\phpunit\phpunit\composer\bin\phpunit:42
PHP   3\. PHPUnit_TextUI_Command->run() C:\wamp_\www\symfony2.1\vendor\phpunit\phpunit\PHPUnit\TextUI\Command.php:130
PHP   4\. PHPUnit_TextUI_Command->handleArguments() C:\wamp_\www\symfony2.1\vendor\phpunit\phpunit\PHPUnit\TextUI\Command.php:139
PHP   5\. PHPUnit_TextUI_Command->handleBootstrap() C:\wamp_\www\symfony2.1\vendor\phpunit\phpunit\PHPUnit\TextUI\Command.php:615
PHP   6\. PHPUnit_Util_Fileloader::checkAndLoad() C:\wamp_\www\symfony2.1\vendor\phpunit\phpunit\PHPUnit\TextUI\Command.php:787
PHP   7\. PHPUnit_Util_Fileloader::load() C:\wamp_\www\symfony2.1\vendor\phpunit\phpunit\PHPUnit\Util\Fileloader.php:77
PHP   8\. include_once() C:\wamp_\www\symfony2.1\vendor\phpunit\phpunit\PHPUnit\Util\Fileloader.php:93
PHP   9\. require_once() C:\wamp_\www\symfony2.1\app\bootstrap.php.cache:3
PHP  10\. require() C:\wamp_\www\symfony2.1\app\autoload.php:5
PHP  11\. ComposerAutoloaderInit::getLoader() C:\wamp_\www\symfony2.1\vendor\autoload.php:7 
```

为什么会执行这个，我没有定义在这个目录中搜索测试。我尝试删除发生错误的文件，但随后出现类似错误：`cannot redeclare`另一个类/函数的错误。所以看起来源被加载了两次。

**//Update2** phpunit.xml.dist是我安装symfony的时候生成的，我没有修改。

```
<?xml version="1.0" encoding="UTF-8"?>

<!-- http://www.phpunit.de/manual/current/en/appendixes.configuration.html -->
<phpunit
    backupGlobals               = "false"
    backupStaticAttributes      = "false"
    colors                      = "true"
    convertErrorsToExceptions   = "true"
    convertNoticesToExceptions  = "true"
    convertWarningsToExceptions = "true"
    processIsolation            = "false"
    stopOnFailure               = "false"
    syntaxCheck                 = "false"
    bootstrap                   = "bootstrap.php.cache" >

    <testsuites>
        <testsuite name="Project Test Suite">
            <directory>../src/*/*Bundle/Tests</directory>
            <directory>../src/*/Bundle/*Bundle/Tests</directory>
        </testsuite>
    </testsuites>

    <!--
    <php>
        <server name="KERNEL_DIR" value="/path/to/your/app/" />
    </php>
    -->

    <filter>
        <whitelist>
            <directory>../src</directory>
            <exclude>
                <directory>../src/*/*Bundle/Resources</directory>
                <directory>../src/*/*Bundle/Tests</directory>
                <directory>../src/*/Bundle/*Bundle/Resources</directory>
                <directory>../src/*/Bundle/*Bundle/Tests</directory>
            </exclude>
        </whitelist>
    </filter>

</phpunit> 
```

当我删除测试套件和过滤器块时，错误仍然存​​在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T15:05:08.033

我刚刚尝试过，并在我的项目`bin`目录中创建了一个符号链接。所以我能够使用`bin/phpunit`.

# ruby - Mountain Lion 上的 SSL 问题 - Ruby/RVM/OpenSSL

> ID：12514124
> 
> 赞同：2
> 
> 时间：2012-09-20T13:50:56.000
> 
> 标签：ruby, ruby-on-rails-3, openssl, evernote

我已经尝试了一切来解决这个问题，但没有任何工作。我已经卸载了所有东西并重新安装了。还是没有爱。这是我尝试连接到 Evernote API 时遇到的错误。

```
OpenSSL::SSL::SSLError: SSL_connect SYSCALL returned=5 errno=0 state=SSLv2/v3 read server hello A 
```

我正在运行：RVM 1.15.9
Ruby 1.9.3-p194
OpenSSL 1.0.1c
Rails 3.2.8
Homebrew 0.9.3

我已经尝试了一切。遵循本指南[http://railsapps.github.com/openssl-certificate-verify-failed.html](http://railsapps.github.com/openssl-certificate-verify-failed.html)

尝试使用 Evernote API，这就是这一切的开始。cURL 可以很好地 ping HTTPS 地址。干杯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T15:19:35.070

可能是 SSL v2 和 v3 之间的问题。

## 命令行诊断：

要诊断此问题，请在命令行上尝试：

```
$ openssl s_client -connect sandbox.evernote.com:443 
```

该命令可能会像这样失败：

```
CONNECTED(00000003)
140386475906720:error:140790E5:SSL routines:SSL23_WRITE:ssl handshake failure
... 
```

现在只用 SSL3 试试：

```
openssl s_client -no_tls1 -no_ssl2 -ssl3 -connect  sandbox.evernote.com:443 
```

你想得到这样的结果：

```
CONNECTED(00000003)
depth=2 C = US, O = "VeriSign, Inc.", OU = VeriSign Trust Network
... 
```

如果第一个命令失败，而第二个命令成功，那么问题很可能是 SSL2 与 SSL3。

## 红宝石诊断：

```
#!/usr/bin/env ruby                                                                                                                                                                                                                                                              
require 'net/http'
uri = URI.parse('https://sandbox.evernote.com/')
req = Net::HTTP::Get.new(uri.path)
sock = Net::HTTP.new(uri.host, 443)
sock.use_ssl = true

# Try with default SSL                                                                                                                                                                                                                                                           
begin
  sock.start do |http|
    response = http.request(req)
  end
  puts "success with SSL default"
rescue
  puts "failure with SSL default"
end

# Try with just SSL3                                                                                                                                                                                                                                                             
sock.ssl_version="SSLv3"
begin
  sock.start do |http|
    response = http.request(req)
  end
  puts "success with SSLv3"
rescue
  puts "failure with SSLv3"
end 
```

## 如何修复它：

警告：这是一个黑客。使用风险自负。如果有人找到更好的方法来做到这一点，请在此处发表评论。

修补 HTTP.new 以强制它始终使用 SSLv3

```
require 'net/http'
module Net
  class HTTP < Protocol
    def HTTP.new(address, port = nil, p_addr = nil, p_port = nil, p_user = nil, p_pass = nil)
      socket = Proxy(p_addr, p_port, p_user, p_pass).newobj(address, port)
      socket.ssl_version = "SSLv3"
      socket
    end
  end
end

uri = URI.parse('https://sandbox.evernote.com/')
req = Net::HTTP::Get.new(uri.path)
sock = Net::HTTP.new(uri.host, 443)
sock.use_ssl = true

# Try with default SSL                                                                                                                                                                                                                                                           
begin
  sock.start do |http|
    response = http.request(req)
  end
  puts "success with SSL default"
rescue
  puts "failure with SSL default"
end 
```

# java - 从 Flash Media Live Encoder 连接 red5 时出错

> ID：12514128
> 
> 赞同：1
> 
> 时间：2012-09-20T13:51:05.957
> 
> 标签：java, red5, fmle

几天以来，我试图让 red5 authdemo 工作（在 Eclipse Juno 中）。

见：[http](http://blog.infrared5.com/2012/05/red5-authentication/)
://blog.infrared5.com/2012/05/red5-authentication/demo-project来源：[http ://dl.dropbox.com/u/7316897/ir5/blog/red5-auth.zip](http://dl.dropbox.com/u/7316897/ir5/blog/red5-auth.zip)

red5 服务器似乎工作正常：

```
...
[INFO] [Launcher:/authdemo] org.red5.demo.auth.Application - Available auth providers: 1 
```

但是当我尝试通过 Flash Media Live Encoder 2.3 连接**rtmp://localhost/authdemo时出现以下错误/异常：**

```
[INFO] [NioProcessor-2] org.red5.server.net.rtmp.codec.RTMPProtocolDecoder - Action connect
[INFO] [NioProcessor-2] org.red5.server.net.rtmp.RTMPHandler - Connecting to: [WebScope@66bfa709 Depth = 1, Path = '/default', Name = 'authdemo']
[INFO] [NioProcessor-2] org.red5.demo.auth.Application - W3C x-category:session x-event:connect c-ip:127.0.0.1 c-client-id:0    
[INFO] [NioProcessor-2] org.red5.demo.auth.FMSAuthenticationHandler - appConnect
[INFO] [NioProcessor-2] org.red5.demo.auth.FMSAuthenticationHandler - Connection: RTMPMinaConnection from 127.0.0.1 : 53362 to 127.0.0.1 (in: 3259 out 3073 )
[ERROR] [NioProcessor-2] org.red5.server.net.rtmp.RTMPHandler - Error connecting {}
        java.lang.ClassCastException: org.red5.server.net.rtmp.status.StatusObject cannot be cast to java.lang.String
        at org.red5.server.net.rtmp.RTMPConnection.connect(RTMPConnection.java:284) ~[red5.jar:na]
        at org.red5.server.net.rtmp.RTMPMinaConnection.connect(RTMPMinaConnection.java:87) ~[red5.jar:na]
        at org.red5.server.net.rtmp.RTMPHandler.onInvoke(RTMPHandler.java:268) ~[red5.jar:na] 
```

（...很多类似的错误消息...）

```
[WARN] [Red5_Scheduler_Worker-2] org.red5.server.net.rtmp.RTMPConnection - Closing RTMPMinaConnection from 127.0.0.1 : 53362 to 127.0.0.1 (in: 3259 out 3177 ), with id 1 due to long handshake 
```

有没有人遇到过这个问题？有什么想法可以解决我的问题吗？

提前致谢！

# performance - 哪个快，抽象类还是接口？

> ID：12514131
> 
> 赞同：9
> 
> 时间：2012-09-20T13:51:19.433
> 
> 标签：performance, oop, interface, abstract-class, concept

> **可能重复：**
> [为什么接口方法调用比具体调用慢？](https://stackoverflow.com/questions/6839943/why-are-interface-method-invocations-slower-than-concrete-invocations)

我最近有机会出现在一个面试中，面试官问*Abstract class*和*Interface*哪个更快。虽然我对这个问题感到困惑，但我回答*接口*主要是因为我认为后期绑定概念会导致抽象类的性能延迟。在网上探索了同样的问题之后，我开始知道抽象方法更快，尽管根据一些博客接口方法更快。我有点困惑，所以我想问这个问题以正确理解哪个更快以及为什么有充分的理由。

根据以下内容，Abstract 类速度很快，但没有正当理由。 [http://www.codeproject.com/Articles/11155/Abstract-Class-versus-Interface](http://www.codeproject.com/Articles/11155/Abstract-Class-versus-Interface)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-20T14:24:25.267

答案取决于编程语言，可能还取决于您使用的编译器。在使用运行时优化的 Java VM 等环境中，可能根本无法回答。老实说，在一个典型的 Java 项目中，没有人关心，因为即使存在差异，它也会非常小，不会显着降低您的软件速度。除非您有严格的实时约束，否则您不会使用 Java（并且可能根本没有多态性）。

基本上，接口方法和抽象方法都使用动态调度，所以如果有的话，差别很小。在没有太多细节知识的情况下，我假设理论上，只要语言不为类实现多重继承，抽象方法的调度速度就会更快。方法指针在调度向量中的位置是静态的，而不是接口方法（一个类通常可以实现多个接口）。

但正如我所说，我不知道编译器中发生的事情的细节。可能还有其他我没有想到的因素。如果我必须在采访中回答这个问题，我会引用 Don Knuth 的“过早优化是万恶之源”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T00:00:41.827

这个问题的最佳答案是“*我会写一个小测试来找出，如果我真的，真的需要*”。获取一个真实示例并在受控条件下运行它，其中两个实现仅在接口与抽象类方面有所不同。如果没有具体的实现，“哪个更快”的问题毫无意义。面试官要么试图炫耀（并且可能不知道实际答案），要么试图测试你的批判性思维能力（这个问题有意义吗？），或者非常挑剔。

The first rule of optimization is **do not optimize... yet**. The second rule is to **profile your program** to find bottlenecks before any refactoring: a change of algorithm or data-structure the right place is often the only thing that is needed; and I am willing to bet that in, say, Java, the hotspot compiler will make any difference between abstract and interface, if any, truly hard to find indeed.

# ruby-on-rails - 为什么我不能在 Rails 的 link_to 块中嵌套一个部分？

> ID：12514134
> 
> 赞同：4
> 
> 时间：2012-09-20T13:51:27.773
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我看过很多关于这个的帖子，甚至文档都说如果你这样做

```
<%= link_to(result) do %>
    html-content-here
<% end %> 
```

然后你得到一个带有你的html内容的标签

但是，当我这样做时

```
<%= link_to(result) do %>
    <%= render :partial => 'campings/inSelection', :locals => { :result => result } %>
<% end %> 
```

我的链接和部分存在，但我得到了类似的东西

```
<a href="link"></a>
partial's-content-here 
```

这显然不是我想要的，这不可能吗？

这是我的部分内容：

```
 <div class="campingInHighlights">
      <% imgUrl = result.photo1.blank? ? "/assets/camping_defaut.png" : "http://applicampings.francecom.com/photos/fiches/liste/#{result.photo1}"  %>
      <%= image_tag imgUrl, class:"photo" %>
      <h3><%= link_to result.nom.to_s.downcase.capitalize, result %></h3>
      <p><%= result.ville.to_s.downcase.capitalize %> (<%= result.departement.code %>)</p>
      <div class="stars">
         <% result.nbetoile.times do %>
             <%= image_tag "/assets/star.png", class: "star" %>
         <% end %>
      </div>
  </div> 
```

`link_to`编辑：所以事实证明问题是因为我的部分中包含的链接标签，无论它们是手动创建还是通过函数创建的，都不能有任何这些到部分中。有人可以解释一下这里发生了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T14:07:46.923

尝试用(no ) 替换`<%= render..`标记，以便块返回部分文本，但本身不输出它。`<% render..``=``render`

# asp.net - ASP.NET telerik radUpload 在 IE 中不起作用

> ID：12514137
> 
> 赞同：0
> 
> 时间：2012-09-20T13:51:31.307
> 
> 标签：asp.net, file-upload, telerik

我正在使用 Telerik radUpload 控件来构建像 gmail 文件上传这样的页面，我使用以下代码打开了一个 display:none radUpload 控件：

```
 <telerik:RadUpload ID="RadUpload1" Runat="server"   OnClientAdded="onClientAdded" ControlObjectsVisibility="None" Localization-Select="abcd"></telerik:RadUpload>
<script type="text/javascript">
var $fileInput;
function onClientAdded(sender, args) {
$fileInput = $telerik.$(args._fileInputField);
}
function OpenDialog() {
$fileInput.click();
uploadTimer();
}
</script> 
```

他是我的 UploadTimer 函数：

```
function uploadTimer() {
try {
var t = setTimeout("uploadTimer()", 500);
//var v = $("#RadUpload1").val();
var upload = $find("<%= RadUpload1.ClientID %>");
value = upload.getFileInputs()[0].value;
//IE?
if (navigator.userAgent.indexOf("MSIE") != -1) {
//if (value != '') {
$("#btnSubmit").click();//}
}
else//non IE?
{if (value != '') {
$("#btnSubmit").click();}
}}
catch (err) {}} 
```

我点击这个按钮来显示我的radUpload，然后调用一个计时器，它调用一个按钮服务器端点击函数将radUpload选择的文件保存到服务器，但是我在IE中没有上传文件，这是怎么回事？

```
<input type="button" value="select file" style="font-family:Tahoma;" onclick="OpenDialog()" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:31:11.240

您是否将任何代码包装在 AJAX 面板或 UpdatePanel 中？您不能将 AJAX 与该控件一起使用来执行更新。

相反，如果您想要 AJAX 上传文件，类似于 Gmail 的做法，请使用 RadAsyncUpload：[http ://www.telerik.com/help/aspnet-ajax/asyncupload-overview.html](http://www.telerik.com/help/aspnet-ajax/asyncupload-overview.html)

# c# - 连接字符串有问题

> ID：12514138
> 
> 赞同：1
> 
> 时间：2012-09-20T13:51:38.667
> 
> 标签：c#, asp.net, visual-studio-2010, login, connection-string

我正在 Visual studio.net 2010 中编写登录页面。(c#) 我创建了一个包含一些方法的类。这包括 ：

```
namespace SchoolsNetwork
{
public class cUsers2
{
    SqlConnection SchoolsDBConnectionString;
    SqlDataAdapter sda;
            SqlCommandBuilder scb;
 SqlConnection(ConfigurationManager.ConnectionStrings
 "SchoolsDBConnectionString"].ConnectionString);

public DsUsers2  Checkpassword(string UserName, string password,out bool Success)
    {
        DsUsers2 dsUsers=new DsUsers2();
        string SqlStr="select * from tblMembers  where Username='"+UserName+"' and Password='"+password+"'";
        sda.SelectCommand=new SqlCommand(SqlStr,SchoolsDBConnectionString);

        sda.Fill(dsUsers.tblMembers);
        Success=dsUsers.tblMembers.Rows.Count>0;
        return dsUsers ;
    } 
```

然后在我的 form.aspx 页面中，我有用于输入用户名和密码的文本字段以及用于单击登录的按钮。按钮的代码是：

```
protected void Button1_Click(object sender, EventArgs e)
    {
        if (txtuser.Text.Trim().Length>0 && txtpass.Value.Length>0 )
        {  
            cUsers2 cUsers=new cUsers2();
            DsUsers2 dsUser=new DsUsers2();
            bool Success;
            if (txtuser.Text.Trim()=="admin")
            {
                Success=cUsers.CheckAdminPass(txtuser.Text.Trim(),txtpass.Value.Trim());  
                if (Success)
                {
                    Response.Redirect("WebForm2.aspx");
                }
            }

            dsUser=cUsers.Checkpassword(txtuser.Text.Trim(), txtpass.Value.Trim(),out Success);
            if(Success)
            {
                Session["ID"]=dsUser.tblMembers.Rows[0][dsUser.tblMembers.IDUserColumn].ToString();
                System.Web.HttpContext.Current.Response.Redirect("frmProfile.aspx");

            }
            else lblerror.Text="invalid username & password";

        }
    } 
```

在 web.config 我有这个作为连接字符串：

```
<configuration>

  <connectionStrings>
    <add name="ApplicationServices" connectionString="data     source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnetdb.mdf;User Instance=true"
  providerName="System.Data.SqlClient" />
    <add name="SchoolsDBConnectionString" connectionString="
Data Source=Sunny-LPTP\SQLEXPRESS;Initial Catalog=SchoolsDB;Integrated Security=True"
  providerName="System.Data.SqlClient" />
  </connectionStrings> 
```

调试后，此行被标记为错误：

```
sda.SelectCommand=new SqlCommand(SqlStr,SchoolsDBConnectionString); 
```

它说

> 你调用的对象是空的。

谁能帮帮我吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T14:00:21.547

您需要**为 sda 创建一个实例**。

```
SqlDataAdapter sda = new SqlDataAdapter(SELECT_STMT, CONNECTION)

// according to your project
SqlDataAdapter sda = new SqlDataAdapter(SqlStr,SchoolsDBConnectionString); 
```

请参阅[**MSDN SqlDataAdapter 构造函数**](http://msdn.microsoft.com/de-de/library/system.data.sqlclient.sqldataadapter.sqldataadapter%28v=vs.90%29.aspx)

此外，您应该真正关心**SQL Injection**。使用[SqlParameters](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparameter.aspx)。

*你应该考虑的一些事情*

*   使用块
*   SqlParameter 代替字符串连接
*   使用 ExecuteScalar 仅访问一个值 / DataAdapter.Fill 获取表

您的代码的一个粗略示例可能是：

```
using (SqlConnection con = new SqlConnection(CONNECTION_STRING))
{
    string selStmt = "select count(*) from ABC where username=@username and passwort=@password";
    SqlCommand cmd= new SqlCommand (selStmt, con);

    cmd.Parameters.Add("@username", SqlDbType.Varchar);
    cmd.Parameters["@username"].Value = USERNAME_FROM_TEXTBOX

    cmd.Parameters.Add("@password", SqlDbType.Varchar);
    cmd.Parameters["@username"].Value = PASSWORD_FROM_TEXTBOX

    return int.Parse(cmd.ExecuteScalar().ToString()) > 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T14:09:21.040

您正在使用一个`SchoolsDBConnectionString`对象，它只是定义未初始化。

您可以尝试以下操作：

```
SqlConnection SchoolsDBConnectionString = new SqlConnection(ConfigurationManager.ConnectionStrings["SchoolsDBConnectionString"].ConnectionString); 
```

后期你刚刚定义了`SqlDataAdapter sda`没有初始化它的字段。
所以写下：

```
SqlDataAdapter sda = new SqlDataAdapter(YourQueryVariable, SchoolsDBConnectionString); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T14:01:28.930

似乎您收到此异常是因为您尚未初始化“sda”对象：

```
SqlDataAdapter sda; 
```

你需要初始化它：

```
sda = new SqlDataAdapter(...); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T14:01:51.147

您应该在使用它之前创建一个对象实例

```
// call constructor before you use code 
 sda = new SqlDataAdapter();       
 sda.SelectCommand=new SqlCommand(SqlStr,SchoolsDBConnectionString); 
```

# ios - 版权侵权检测

> ID：12514148
> 
> 赞同：1
> 
> 时间：2012-09-20T13:52:17.470
> 
> 标签：ios

当客户决定违反合同使用他们没有支付费用的软件时：是否可以将应用商店中的应用与基于您自己的软件的 ipa 文件进行二进制比较，以检测不应该使用的代码用过吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T14:08:22.820

是的，假设您可以获取要与自己的比较的 ipa 文件（大概可以通过从 App Store 将该应用程序安装到越狱设备上来完成）。您可以使用（或编写）实用程序将该文件与您自己的文件进行比较。

这是某人要求使用二进制差异工具的示例，

[是否有适用于 Mac OS X 的图形二进制差异工具？](https://stackoverflow.com/questions/7871702/is-there-any-graphical-binary-diff-tool-for-mac-os-x)

当然，您会期望一些差异（签名、时间戳等）。您需要查看差异的详细信息，以确定该文件是否基本相同（或源自同一来源）。

# css - 水平堆叠的div用于液体布局，其中一个宽度会改变？

> ID：12514149
> 
> 赞同：0
> 
> 时间：2012-09-20T13:52:21.387
> 
> 标签：css, css-float

下面是我的代码和小提琴：http: [//jsfiddle.net/hehUt/2/](http://jsfiddle.net/hehUt/2/)

```
<div class="one"></div>
<div class="two">text here text here text here text here text here text here text here text here text here text here text here text here text here text here text here text here text here text here text here text here text here text here text here text here text here text here text here text here text heretext here text here text here  text here text here text here text here text here text here text here re text here text here text here text here text here text here text here text here text here text here text here text here text here text here text here text heretext here text here text here  text here text here text here text here text here text here text here 
</div>​
.one {
    background-color: red;
    height: 75px;
    width: 75px;
    float: left;
}
.two {
    margin-left: 75px;
}​ 
```

我希望 2 个 div 以流畅的布局并排放置并占用所有可用空间。我还希望文本不要在图像之后换行，而是保持垂直对齐。这一切都很好。

但是说 div.one 的宽度发生了变化，我需要更改应用于 div.two 的边距。有没有解决的办法？例如，如果 div.one 的宽度是由来自 CMS 的内容设置的如此多样，我是否需要让 CMS 将边距 px 值应用于 div.two 或者是否有适用于不同宽度的 div 的 CSS 解决方案。一？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T14:04:18.283

只是做`overflow: hidden;`而不是`margin-left`. 小演示：[小链接](http://jsfiddle.net/glee/nv26E/)。`overflow: hidden;`力`.two`不与浮动相交`.one`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T13:57:49.010

[http://jsfiddle.net/iambriansreed/hehUt/7/](http://jsfiddle.net/iambriansreed/hehUt/7/)

我发现`display: table-cell`它非常有用。

```
.wrap {
    display: table-row;
}
.one {
    display: table-cell;
    background-color: red;
    height: 75px;
    width: 75px;
}
.two {
    display: table-cell;
}​ 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-20T13:57:19.353

```
.one
{
     width:30%;
}

.two
{
     width:40%;
}

.three
{
     width:30%;
} 
```

这是你想要的吗？

# silverlight - 如何从 ClientBin 文件夹中获取所有“.xaps”

> ID：12514151
> 
> 赞同：0
> 
> 时间：2012-09-20T13:52:37.360
> 
> 标签：silverlight

我的程序分为模块，这些模块在不同的 Silverlight 项目中实现。我想创建一个视图（请注意，我在 SL 端执行此操作）并将模块名称关联到 ClientBin 目录中的 xap。为此，我需要列出该目录中存在的所有“.xaps”（可能我会用它们创建一个列表框）。

我尝试使用 Directory 方法来做到这一点，但我的访问总是被拒绝。我也尝试过使用 Path 方法，但我也失败了。

这可能吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T14:24:23.983

尝试以管理员权限运行 Visual Studio 吗？

如果您的 Web 应用程序配置为使用 IIS，则应用程序池的标识必须对解决方案文件夹具有读/写权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T14:59:15.667

服务器需要为您的 SL 应用程序提供某种 Web 服务。该 Web 服务将有权访问服务器文件系统，您可以使用普通的 DirectoryInfo 从目录中读取文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T19:29:42.680

看看棱镜。它包含一个模块化框架，支持类似于您的场景。XAP 模块列在 Silverlight 应用程序加载的特殊“modules.xml”目录中。Silverlight 应用程序然后可以访问模块元数据并可以按需加载模块。

# eclipse - 将控制字符放到 Eclipse 控制台

> ID：12514152
> 
> 赞同：4
> 
> 时间：2012-09-20T13:52:40.760
> 
> 标签：eclipse

如何在 Linux 下的 Eclipse 中将控制字符（如 CTRL+R）放入控制台？
我在 Eclipse 中运行一个脚本，它在某个时候停止。然后我需要通过键入 Ctrl+R 来继续它。如果我在普通终端中执行此操作，这可以正常工作，但它在 Eclipse 控制台下不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-28T21:29:46.550

**简直不能**。

控制台被认为是输入/输出视图，而不是一种外壳。不仅输入能力仅限于简单的按键，而且输出能力也被截断。例如，您不能管理 Eclipse 控制台的 \b。

*如果您想在*Eclipse 视图中使用 shell ，然后启动脚本，您可以随时打开它，请参阅[https://stackoverflow.com/a/1562667/1360888](https://stackoverflow.com/a/1562667/1360888)

# python - Python 的正则表达式模式缓存如何工作？

> ID：12514157
> 
> 赞同：12
> 
> 时间：2012-09-20T13:52:58.650
> 
> 标签：python, regex, performance, python-2.7

来自 Python 文档[`re.compile()`](http://docs.python.org/library/re.html#re.compile)：

> 注意 传递给 re.match()、re.search() 或 re.compile() 的最新模式的编译版本被缓存，因此一次只使用几个正则表达式的程序不必担心编译正则表达式表达式。

然而，在我的测试中，这个断言似乎站不住脚。当重复使用相同模式的以下片段计时时，编译版本仍然比未编译版本快得多（应该被缓存）。

我在这里缺少什么来解释时差吗？

```
import timeit

setup = """
import re
pattern = "p.a.t.t.e.r.n"
target = "p1a2t3t4e5r6n"
r = re.compile(pattern)
"""

print "compiled:", \
    min(timeit.Timer("r.search(target)", setup).repeat(3, 5000000))
print "uncompiled:", \
    min(timeit.Timer("re.search(pattern, target)", setup).repeat(3, 5000000)) 
```

结果：

```
compiled: 2.26673030059
uncompiled: 6.15612802627 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-20T13:59:53.357

这是（CPython）的实现`re.search`：

```
def search(pattern, string, flags=0):
    """Scan through string looking for a match to the pattern, returning
    a match object, or None if no match was found."""
    return _compile(pattern, flags).search(string) 
```

这是`re.compile`：

```
def compile(pattern, flags=0):
    "Compile a regular expression pattern, returning a pattern object."
    return _compile(pattern, flags) 
```

这依赖于[`re._compile`](https://github.com/python/cpython/blob/master/Lib/re.py#L270)：

```
def _compile(*key):
    # internal: compile pattern
    cachekey = (type(key[0]),) + key
    p = _cache.get(cachekey)            #_cache is a dict.   
    if p is not None:
        return p
    pattern, flags = key
    if isinstance(pattern, _pattern_type):
        if flags:
            raise ValueError('Cannot process flags argument with a compiled pattern')
        return pattern 
    if not sre_compile.isstring(pattern):
        raise TypeError, "first argument must be string or compiled pattern"
    try:
        p = sre_compile.compile(pattern, flags)
    except error, v:
        raise error, v # invalid expression
    if len(_cache) >= _MAXCACHE:
        _cache.clear()
    _cache[cachekey] = p
    return p 
```

所以你可以看到，只要正则表达式已经在字典中，唯一涉及的额外工作就是在字典中查找（这涉及创建一些临时元组，一些额外的函数调用......）。

**更新** 在过去的美好时光（上面复制的代码），缓存过大时会完全失效。这些天来，缓存循环——首先丢弃最旧的项目。此实现依赖于 python 字典的顺序（这是在 python3.7 之前的实现细节）。在 python3.6 之前的 Cpython 中，这会从缓存中删除一个任意值（可以说这仍然比使整个缓存无效更好）

# c++ - 使用名称中的范围解析运算符声明指针

> ID：12514158
> 
> 赞同：2
> 
> 时间：2012-09-20T13:53:00.127
> 
> 标签：c++

我试图在双向链表上理解本教程。 [http://www.dreamincode.net/forums/topic/53161-how-to-create-a-basic-double-linked-list/](http://www.dreamincode.net/forums/topic/53161-how-to-create-a-basic-double-linked-list/)

我无法理解这部分

```
 element* list::FirstEl = NULL;    //This initialises the static element* 'FirstEl' to  NULL  
  element* list::LastEl = NULL;     //This initialises the static element* 'LastEl' to 
```

我会说这段代码创建了一个名为“list::FirstEl”的元素类型指针并将其设置为null，但范围解析运算符让我觉得C++中还没有涉及到一些东西。

这里发生了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T13:53:46.583

这是一个`static`类成员初始化。

```
class list
{
    static element* FirstEl;
    static element* LastEl;
}; 
```

你所拥有的是成员的初始化。

变量的名称是`FirstEl`and `LastEl`，但它们是类的一部分，这就是为什么在定义它们时必须限定它们的名称。

就像在定义方法名称时限定它们一样。

# delphi - 用于实现 Windows 7 联合搜索的 Delphi 组件或工具包？

> ID：12514159
> 
> 赞同：3
> 
> 时间：2012-09-20T13:53:00.447
> 
> 标签：delphi, plugins, windows-7, vcl

有没有人见过带有源代码的 Delphi VCL 组件，可以更轻松地实现 Windows 7 联合搜索插件？如果不是这样，那么好的源代码示例或文章怎么样？

# android - Android 上的谷歌浏览器（仅限 Android）不允许带有类型号和 step="any" 的小数

> ID：12514162
> 
> 赞同：15
> 
> 时间：2012-09-20T13:53:08.673
> 
> 标签：android, google-chrome

我有一个问题，我不确定它是否是一个错误，关于 android 键盘的一些奇怪等。

假设你在某处有这个输入框：

```
 <input type='number' step='any' > 
```

在默认的 ICS android 浏览器、Safari 移动浏览器、iOS Chrome（可能还有其他浏览器）上，这完全符合您的预期：它会显示一个带有数字和小数点的键盘（由于 step）。

然而，在 Android 上的 Chrome 上（正如我所说的只有这个版本），它会显示一个没有小数点的数字键盘。

有谁知道解决方法？

**额外细节**

它似乎仅限于三星键盘和谷歌浏览器的组合。以下作品：

*   带有 3rd 方键盘的 Google Chrome
*   带有三星键盘的主浏览器和 Firefox

因此，似乎只有三星键盘和 Chrome 的组合会导致问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-06-26T04:11:39.723

此问题似乎已修复[https://code.google.com/p/chromium/issues/detail?id=151738#c17](https://code.google.com/p/chromium/issues/detail?id=151738#c17)。我认为这已在 2014 年 6 月发布的 Chrome Mobile 36 中得到修复——它肯定在 Chrome Mobile 47 中得到修复，这是我目前在三星手机上拥有的唯一版本。

如果您的用户不多，有两种解决方法：

1.  要求用户安装 Google 键盘并启用它 - 请参阅[https://play.google.com/store/apps/details?id=com.google.android.inputmethod.latin](https://play.google.com/store/apps/details?id=com.google.android.inputmethod.latin)

2.  要求用户使用本机浏览器（要求用户使用标有“Internet”的世界图标的应用程序）。

在 Android 4.4 上使用 WebView 的应用程序被 Chrome 30 或 33 的 WebView 卡住了，所以我猜使用 WebView 的三星 Android 4.4 手机会受到影响。在任何其他版本的 Android 上使用 WebView 不应受到影响（Android 4.3 或更低版本使用 WebView 的本机浏览器，Android 5.0+ 应使用没有错误的 Chrome 版本，因为 Chrome WebView 已更新）。

同样相关的是[三星浏览器](https://gist.github.com/NielsLeenheer/4daa6a9ce7f4a0f4733d)的电话版本和[有关三星浏览器的评论](http://www.quirksmode.org/blog/archives/2014/09/25_of_mobile_ch.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-01T19:53:28.733

对那些错误地支持 type="number" 的三星设备使用 type="tel"。此处详细介绍其他方法： [Samsung Galaxy Tablet does not allow into floating point numbers to inputs with "number" type](https://stackoverflow.com/questions/11134903/samsung-galaxy-tablet-does-not-allow-entering-floating-point-numbers-to-inputs-w/23389191#23389191)

# vb.net - Asp 对象不会除了从数据库传递的空值

> ID：12514165
> 
> 赞同：0
> 
> 时间：2012-09-20T13:53:24.690
> 
> 标签：vb.net, asp-classic

当数据库中有条目时，此代码可以正常工作，但是当我删除条目时，它会出错。我相信它没有接受空值。我真的不工作，但如果数据库中没有价值，我真的很想了解如何使它工作

```
<%
Dim rsValue

gParama = "^Param1^,^Param2^"
set rsValue = GetData(000, gParama,"","")
sURL= rsValue("table column")
rsValue = nothing
%>

<html>
 .......
<% if sURL <> "" then %>
   <td>
  <a href=<%sURL%> class="user">
 <img src= "../images/random.gif" > RANDOM</a>
  </td>
 <%end if%>
 .......
 </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T13:56:40.053

在使用记录集之前，您需要检查 EOF（文件结尾）。

```
if rsValue.eof then
    'no data!
end of 
```

# c# - 如何在 OpenFile 对话框中使用不同算法打开不同类型的文件？

> ID：12514167
> 
> 赞同：1
> 
> 时间：2012-09-20T13:53:33.943
> 
> 标签：c#, file-io, openfiledialog

我想用 OpenFileDialog 打开 2 种类型的文件（.txt 和 .dat），每种类型的文件都应该用不同的算法打开。OpenFile 方法获取我正在打开的文件的流。但是，我能得到那个文件的类型吗？还是有另一种区分文件的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T13:57:26.733

如果我们谈论winforms，那么您有可用的文件名，您可以在打开文件之前检查扩展名..

```
var dialog = new OpenFileDialog();

if (dialog.ShowDialog() == DialogResult.OK)
{
    var extension = Path.GetExtension(dialog.FileName);

    // do what you need
} 
```

# c++ - ios::app 和用于输入的 fstream 之间的交互

> ID：12514175
> 
> 赞同：0
> 
> 时间：2012-09-20T13:53:59.520
> 
> 标签：c++, io, append, iostream, fstream

在调试别人的代码时，我遇到了 C++`fstream`对象之间的交互，通过流运算符输入，`ios::app`而我以前不知道。

假设`file.txt`存在并包含文本数据。在`fstream`其原始上下文中，它是长期存在的，并为输入和输出服务。以下代码未按预期工作（不提供文件输出），已省略错误处理代码：

```
#include <string>
#include <iostream>
#include <fstream>

using namespace std;

int main()
{
    fstream f("file.txt", ios::app);
    string in;
    f >> in;
    cout << in << endl;
    f.close();
    return 0;
} 
```

将文件打开语句更改为以下内容可解决此问题：

```
fstream f("file.txt"); 
```

这是预期的行为吗？是否不能`fstream`使用 ios::app 打开一个对象并期望通过流操作符输入的行为正确？

在 64 位 Linux 上使用 g++ 4.6.3 编译，在 32 位 Windows 7 上使用 mingw-g++ 4.4.1 编译

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T14:01:03.760

如果您检查[`std::fstream`构造函数](http://en.cppreference.com/w/cpp/io/basic_fstream/basic_fstream)，您会注意到默认参数是标志位域`ios_base::in`和`ios_base::out`. 通过仅`ios_base::app`作为标志提供，您可以使文件仅附加。如果你想要输入*和*追加，那么你必须使用 eg `ios::in | ios::app`。

# cairo - 我可以在 Pango Cairo 布局中自动排列两种字体样式吗？

> ID：12514181
> 
> 赞同：1
> 
> 时间：2012-09-20T13:54:27.217
> 
> 标签：cairo, pango

我想要两个具有不同文本样式的段落，一个在另一个之上。这是描述它的最快方式：

```
<p style="font-size: 20pt">Para 1</p><p style="font-size: 10pt">Para 2</p> 
```

我在两者上都设置了换行，所以在运行时我不知道第一个高度是多少。如果我在第 1 段中有很多行，我会想把第 2 段往下移。如果我在第一段中有一行，我想将第 2 段上移。正如 HTML 所表现的那样。

但似乎我只能使用`pango_layout_set_font_description(PangoLayout *, PangoFontDescription *)`.

1.  这是否意味着我需要使用 2 个布局？
2.  如果是这样，我如何让第二个布局立即出现在第二个布局下方？我是否需要`pango_layout_get_height(PangoLayout *)`相应地使用和移动第二个布局？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T06:28:51.940

这应该是可能的。如果你使用 pango_parse_markup()，你可以使用类似 '<span font="Sans 12">foo</span><span font="Sans 16">bar</span>' 的东西。如果您不想使用 pango_parse_markup()，请查看 PangoAttrType 和 PangoAttrList。但是，我没有他们的任何例子。看起来你需要 pango_attr_list_new()、pango_attr_list_insert()、pango_attr_size_new() 和 pango_layout_set_attributes()。（在 PangoAttribute 中设置 start_index 和 end_index！）

当然，您也可以使用多种布局，但让 pango 为您找出所需的魔法可能更容易。

# awk - awk 分隔符正则表达式

> ID：12514183
> 
> 赞同：2
> 
> 时间：2012-09-20T13:54:37.227
> 
> 标签：awk, delimiter

我试图从一个看起来像这样的文件中提取所有数字（只是数字）（总是三个'|||'）并确保数字后面跟着3 |||

```
file:
12342|||blah blah
31221|||foo bar
12342|||bar foo 
```

我只想得到 12342,31221,12342

到目前为止我有

```
//works
echo "2333|||test" | awk -F  "([^1-9])+\|"  '{print $1}'

// should fail and return none
echo "2333|||test" | awk -F  "([^1-9])+\|+"  '{print $1}' 
```

任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T14:03:18.383

`awk -F'|' '/^[1-9]+\|/ && NF == 4 {print $1}' data.txt`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T14:07:41.830

你的意思是这样？？

```
awk -F'\\|\\|\\|' '{print $1}' 
```

捕捉精确三个“|||”之前的文本

```
grep -Po "^\d+(?=\|\|\|)"

kent$  grep -Po "^\d+(?=\|\|\|)" <<<"2333||tes"

kent$  grep -Po "^\d+(?=\|\|\|)" <<<"2333|||tes"
2333 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T14:07:59.777

如果您可能有一个数字后跟两个管道并且您不想要这些行，那么...如果您有 GNU `grep`，您可以使用：

```
grep -o '^[0-9][0-9]*|||' file | awk -F '|' '{print $1}' 
```

您可以使用`sed`而不是`awk`进行后处理。该`-o`选项特定于 GNU `grep`，因此不能可靠地移植。

如果必须拒绝编号后有 4 个管道的行，则必须更加努力：

```
grep -E -o '^[0-9]+\|{3}($|[^|])' file | awk -F '|' '{print $1}' 
```

扩展的 ( `egrep`) 正则表达式查找行首、一个或多个数字、三个管道符号，后跟行尾或另一个非管道字符。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T14:10:11.477

这是一个扩展的 grep 替代方案：

```
grep -oE '^[0-9]+\|{3}($|[^|])' file | grep -oE '[0-9]+' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T13:58:01.123

怎么样：

```
awk -F\| '{if (NF >= 4) print $1}' <foo
12342
31221
12342 
```

# sql - SQL：将一行变成一列（并在新列中包含列名）

> ID：12514192
> 
> 赞同：0
> 
> 时间：2012-09-20T13:55:08.840
> 
> 标签：sql, sql-server, sql-server-2008-r2, unpivot

我正忙于编写要在安全令牌服务中使用的声明提供程序类。

用户权限从 SQL Server 2008 R2 数据库中读取：

```
SELECT A, B, C, ..., X FROM Permissions WHERE UserId = @UserId 
```

会给我一行，例如：

```
A B C ... X
1 0 1     1 
```

以表格形式拥有这些数据会容易得多

```
Permission Value
A          1
B          0
C          1
...
X          1 
```

由于实际的表包含几十列，我希望能够“动态地”进行换位，而不必真正手动输入任何列名。

感觉就像 PIVOT/UNPIVOT 函数和 INFORMATION_SCHEMA.COLUMNS 视图是我需要的，但我不知道该怎么做。

对可以执行此操作的查询有任何想法吗？

PS。我想如果推送到了，我只需将结果集粘贴在 DataTable 中并遍历代码中的列以生成用户声明，但我想先了解上述方法是否可行 :)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T14:01:45.693

如果您没有`UNPIVOT`可用的功能（您没有指定 RDBMS），那么您可以使用`UNION ALL`（参见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/c4d91/1)）：

```
select 'A' as Permission, A as Value
FROM Permissions
WHERE UserId = @UserId
UNION ALL
select 'B' as Permission, B as Value
FROM Permissions
WHERE UserId = @UserId 
```

如果您在 sql-server 中有未知数量的列，那么您可以使用动态 sql，您的代码将与此类似：

```
DECLARE @colsUnPivot AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

SET @colsUnPivot = stuff((select ','+C.name
         from sys.columns as C
         where C.object_id = object_id('Permissions')
            and C.name != 'UserId'
         for xml path('')), 1, 1, '')

set @query 
  = 'select permission, value
    from
    (
        select *
         from permissions
         where userid = '+@UserId+'
    ) x
     unpivot
     (
        value
        for permission in ('+ @colsunpivot +')
     ) u'

exec(@query) 
```

见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/c4d91/4)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T13:59:40.373

确实不转。

```
 select Permission, Value 
   from (Select * from Permissions where UserID = @userID) s
   unpivot (Value for Permission in ([a],[b],[c],...,[x])) u 
```

如果您必须有动态列，则使用动态 SQL 和 构造上述查询`sp_executesql`，或者在您的 c# 代码中（适当注意和注意）。

但大概你知道这些列是什么？也许首先可以将权限存储在结果的标准化形式中？

# magento - 将网站从一个主机迁移到另一个主机使主题丢失样式和其他

> ID：12514195
> 
> 赞同：0
> 
> 时间：2012-09-20T13:55:32.707
> 
> 标签：magento, magento-1.7

我将我的 Magento 网站从一个主机迁移到另一个主机，现在我失去了所有的主题样式等等。我应该在某个地方改变路径吗？我检查 /app/etc/local.xml 但在那里找不到。此外，我在数据库级别检查 core_config_data 并再次没有发现任何内容。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T11:05:19.593

您是否尝试过检查文件和目录权限？也许该`skin`目录不可访问。除此之外，您必须设置媒体目录和子目录的权限，以允许 Magento 在那里写入产品缩略图。

# git - 回顾性地将 Git 文件夹转换为子模块？

> ID：12514197
> 
> 赞同：135
> 
> 时间：2012-09-20T13:55:38.693
> 
> 标签：git, git-submodules

通常情况下，您正在编写某种类型的项目，一段时间后，项目的某些组件作为独立组件（也许是库）实际上是有用的。如果您从一开始就有这个想法，那么大部分代码很有可能在它自己的文件夹中。

有没有办法将 Git 项目中的一个子目录转换为子模块？

理想情况下，会发生这样的情况，即从父项目中删除该目录中的所有代码，并在其位置添加子模块项目，并带有所有适当的历史记录，并且所有父项目提交都指向正确的子模块提交.

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2012-09-20T15:13:38.777

要将子目录隔离到其自己的存储库中，`filter-branch`请在原始存储库的克隆上使用：

```
git clone <your_project> <your_submodule>
cd <your_submodule>
git filter-branch --subdirectory-filter 'path/to/your/submodule' --prune-empty -- --all 
```

然后就是删除你的原始目录并将子模块添加到你的父项目中。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2016-04-08T12:43:21.007

首先将目录更改为将成为子模块的文件夹。然后：

```
git init
git remote add origin <repourl>
git add .
git commit -am 'first commit in submodule'
git push -u origin master
cd ..
rm -rf <folder> # the folder which will be a submodule
git commit -am 'deleting folder'
git submodule add <repourl> <folder> # add the submodule
git commit -am 'adding submodule' 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2017-06-22T12:10:53.803

我知道这是一个旧线程，但这里的答案会压缩其他分支中的任何相关提交。

克隆和保留所有这些额外分支和提交的简单方法：

1 - 确保你有这个 git 别名

```
git config --global alias.clone-branches '! git branch -a | sed -n "/\/HEAD /d; /\/master$/d; /remotes/p;" | xargs -L1 git checkout -t' 
```

2 - 克隆遥控器，拉出所有分支，更改遥控器，过滤您的目录，推送

```
git clone git@github.com:user/existing-repo.git new-repo
cd new-repo
git clone-branches
git remote rm origin
git remote add origin git@github.com:user/new-repo.git
git remote -v
git filter-branch --subdirectory-filter my_directory/ -- --all
git push --all
git push --tags 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-05-26T10:08:03.610

# 现状

假设我们有一个名为的存储库`repo-old`，其中包含一个子目录**，** `sub`我们希望将其转换为具有自己 repo的子**模块**`repo-sub`。

还打算将原始存储库`repo-old`转换为修改后的存储库`repo-new`，其中所有涉及先前存在的子目录`sub`的提交现在都应指向我们提取的子模块存储库的相应提交`repo-sub`。

# 让我们改变

`git filter-branch`可以通过两步过程来实现这一点：

1.  `repo-old`从到的子目录提取`repo-sub`（已在接受的[答案](https://stackoverflow.com/a/12515629/13613140)中提到）
2.  `repo-old`从到的子目录替换`repo-new`（使用正确的提交映射）

**备注**：我知道这个问题很老，并且已经提到过，`git filter-branch`它有点被弃用并且可能很危险。但另一方面，它可能会帮助其他人使用转换后易于验证的个人存储库。所以**请注意**！请让我知道是否有任何其他工具可以做同样的事情而不会被弃用并且可以安全使用！

我将解释我是如何使用 git 版本 2.26.2 在 linux 上实现这两个步骤的。旧版本可能会在一定程度上起作用，但需要进行测试。

为了简单起见，我将自己限制在原始 repo中只有一个`master`分支和一个远程的情况。另请注意，我依赖带有前缀的临时 git 标签，这些标签将在此过程中被删除。因此，如果已经有类似名称的标签，您可能需要调整下面的前缀。最后请注意，我没有对此进行广泛测试，并且可能存在配方失败的极端情况。所以请**在继续之前备份所有内容**！`origin``repo-old``temp_`

 **以下 bash 片段可以连接成一个大脚本，然后应该在存储库所在的同一文件夹中执行该脚本`repo-org`。不建议将所有内容直接复制并粘贴到命令窗口中（即使我已经成功测试过）！

## 0\. 准备

### 变量

```
# Root directory where repo-org lives
# and a temporary location for git filter-branch
root="$PWD"
temp='/dev/shm/tmp'

# The old repository and the subdirectory we'd like to extract
repo_old="$root/repo-old"
repo_old_directory='sub'

# The new submodule repository, its url
# and a hash map folder which will be populated
# and later used in the filter script below
repo_sub="$root/repo-sub"
repo_sub_url='https://github.com/somewhere/repo-sub.git'
repo_sub_hashmap="$root/repo-sub.map"

# The new modified repository, its url
# and a filter script which is created as heredoc below
repo_new="$root/repo-new"
repo_new_url='https://github.com/somewhere/repo-new.git'
repo_new_filter="$root/repo-new.sh" 
```

### 过滤器脚本

```
# The index filter script which converts our subdirectory into a submodule
cat << EOF > "$repo_new_filter"
#!/bin/bash

# Submodule hash map function
sub ()
{
    local old_commit=\$(git rev-list -1 \$1 -- '$repo_old_directory')

    if [ ! -z "\$old_commit" ]
    then
        echo \$(cat "$repo_sub_hashmap/\$old_commit")
    fi
}

# Submodule config
SUB_COMMIT=\$(sub \$GIT_COMMIT)
SUB_DIR='$repo_old_directory'
SUB_URL='$repo_sub_url'

# Submodule replacement
if [ ! -z "\$SUB_COMMIT" ]
then
    touch '.gitmodules'
    git config --file='.gitmodules' "submodule.\$SUB_DIR.path" "\$SUB_DIR"
    git config --file='.gitmodules' "submodule.\$SUB_DIR.url" "\$SUB_URL"
    git config --file='.gitmodules' "submodule.\$SUB_DIR.branch" 'master'
    git add '.gitmodules'

    git rm --cached -qrf "\$SUB_DIR"
    git update-index --add --cacheinfo 160000 \$SUB_COMMIT "\$SUB_DIR"
fi
EOF
chmod +x "$repo_new_filter" 
```

## 1.子目录提取

```
cd "$root"

# Create a new clone for our new submodule repo
git clone "$repo_old" "$repo_sub"

# Enter the new submodule repo
cd "$repo_sub"

# Remove the old origin remote
git remote remove origin

# Loop over all commits and create temporary tags
for commit in $(git rev-list --all)
do
    git tag "temp_$commit" $commit
done

# Extract the subdirectory and slice commits
mkdir -p "$temp"
git filter-branch --subdirectory-filter "$repo_old_directory" \
                  --tag-name-filter 'cat' \
                  --prune-empty --force -d "$temp" -- --all

# Populate hash map folder from our previously created tag names
mkdir -p "$repo_sub_hashmap"
for tag in $(git tag | grep "^temp_")
do
    old_commit=${tag#'temp_'}
    sub_commit=$(git rev-list -1 $tag)

    echo $sub_commit > "$repo_sub_hashmap/$old_commit"
done
git tag | grep "^temp_" | xargs -d '\n' git tag -d 2>&1 > /dev/null

# Add the new url for this repository (and e.g. push)
git remote add origin "$repo_sub_url"
# git push -u origin master 
```

## 2.子目录替换

```
cd "$root"

# Create a clone for our modified repo
git clone "$repo_old" "$repo_new"

# Enter the new modified repo
cd "$repo_new"

# Remove the old origin remote
git remote remove origin

# Replace the subdirectory and map all sliced submodule commits using
# the filter script from above
mkdir -p "$temp"
git filter-branch --index-filter "$repo_new_filter" \
                  --tag-name-filter 'cat' --force -d "$temp" -- --all

# Add the new url for this repository (and e.g. push)
git remote add origin "$repo_new_url"
# git push -u origin master

# Cleanup (commented for safety reasons)
# rm -rf "$repo_sub_hashmap"
# rm -f "$repo_new_filter" 
```

**备注：**如果新创建的 repo`repo-new`在此期间挂起，`git submodule update --init`则尝试以递归方式重新克隆存储库一次：

```
cd "$root"

# Clone the new modified repo recursively
git clone --recursive "$repo_new" "$repo_new-tmp"

# Now use the newly cloned one
mv "$repo_new" "$repo_new-bak"
mv "$repo_new-tmp" "$repo_new"

# Cleanup (commented for safety reasons)
# rm -rf "$repo_new-bak" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-20T15:08:29.733

可以做到，但并不简单。如果你搜索`git filter-branch`,`subdirectory`和`submodule`, 会有一些关于这个过程的不错的文章。它本质上需要创建项目的两个克隆，`git filter-branch`用于删除一个中的一个子目录以外的所有内容，并仅删除另一个中的那个子目录。然后您可以将第二个存储库建立为第一个存储库的子模块。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-26T18:27:07.897

这会就地进行转换，您可以像使用任何过滤器分支（我使用`git fetch . +refs/original/*:*`）一样将其退出。

我有一个项目，其中包含一个`utils`开始在其他项目中有用的库，并且想将其历史拆分为子模块。没想到先看 SO，所以我自己写了，它在本地构建历史，所以速度要快一些，之后如果你愿意，你可以设置辅助命令的`.gitmodules`文件等，并将子模块历史自己推送到任何地方你要。

剥离的命令本身在这里，文档在评论中，在后面的未剥离的命令中。`subdir`使用set 将其作为自己的命令运行，就像`subdir=utils git split-submodule`您要拆分`utils`目录一样。这很 hacky，因为它是一次性的，但我在 Git 历史记录中的 Documentation 子目录中对其进行了测试。

```
#!/bin/bash
# put this or the commented version below in e.g. ~/bin/git-split-submodule
${GIT_COMMIT-exec git filter-branch --index-filter "subdir=$subdir; ${debug+debug=$debug;} $(sed 1,/SNIP/d "$0")" "$@"}
${debug+set -x}
fam=(`git rev-list --no-walk --parents $GIT_COMMIT`)
pathcheck=(`printf "%s:$subdir\\n" ${fam[@]} \
    | git cat-file --batch-check='%(objectname)' | uniq`)
[[ $pathcheck = *:* ]] || {
    subfam=($( set -- ${fam[@]}; shift;
        for par; do tpar=`map $par`; [[ $tpar != $par ]] &&
            git rev-parse -q --verify $tpar:"$subdir"
        done
    ))
    git rm -rq --cached --ignore-unmatch  "$subdir"
    if (( ${#pathcheck[@]} == 1 && ${#fam[@]} > 1 && ${#subfam[@]} > 0)); then
        git update-index --add --cacheinfo 160000,$subfam,"$subdir"
    else
        subnew=`git cat-file -p $GIT_COMMIT | sed 1,/^$/d \
            | git commit-tree $GIT_COMMIT:"$subdir" $(
                ${subfam:+printf ' -p %s' ${subfam[@]}}) 2>&-
            ` &&
        git update-index --add --cacheinfo 160000,$subnew,"$subdir"
    fi
}
${debug+set +x} 
```

* * *

```
#!/bin/bash
# Git filter-branch to split a subdirectory into a submodule history.

# In each commit, the subdirectory tree is replaced in the index with an
# appropriate submodule commit.
# * If the subdirectory tree has changed from any parent, or there are
#   no parents, a new submodule commit is made for the subdirectory (with
#   the current commit's message, which should presumably say something
#   about the change). The new submodule commit's parents are the
#   submodule commits in any rewrites of the current commit's parents.
# * Otherwise, the submodule commit is copied from a parent.

# Since the new history includes references to the new submodule
# history, the new submodule history isn't dangling, it's incorporated.
# Branches for any part of it can be made casually and pushed into any
# other repo as desired, so hooking up the `git submodule` helper
# command's conveniences is easy, e.g.
#     subdir=utils git split-submodule master
#     git branch utils $(git rev-parse master:utils)
#     git clone -sb utils . ../utilsrepo
# and you can then submodule add from there in other repos, but really,
# for small utility libraries and such, just fetching the submodule
# histories into your own repo is easiest. Setup on cloning a
# project using "incorporated" submodules like this is:
#   setup:  utils/.git
#
#   utils/.git:
#       @if _=`git rev-parse -q --verify utils`; then \
#           git config submodule.utils.active true \
#           && git config submodule.utils.url "`pwd -P`" \
#           && git clone -s . utils -nb utils \
#           && git submodule absorbgitdirs utils \
#           && git -C utils checkout $$(git rev-parse :utils); \
#       fi
# with `git config -f .gitmodules submodule.utils.path utils` and
# `git config -f .gitmodules submodule.utils.url ./`; cloners don't
# have to do anything but `make setup`, and `setup` should be a prereq
# on most things anyway.

# You can test that a commit and its rewrite put the same tree in the
# same place with this function:
# testit ()
# {
#     tree=($(git rev-parse `git rev-parse $1`: refs/original/refs/heads/$1));
#     echo $tree `test $tree != ${tree[1]} && echo ${tree[1]}`
# }
# so e.g. `testit make~95^2:t` will print the `t` tree there and if
# the `t` tree at ~95^2 from the original differs it'll print that too.

# To run it, say `subdir=path/to/it git split-submodule` with whatever
# filter-branch args you want.

# $GIT_COMMIT is set if we're already in filter-branch, if not, get there:
${GIT_COMMIT-exec git filter-branch --index-filter "subdir=$subdir; ${debug+debug=$debug;} $(sed 1,/SNIP/d "$0")" "$@"}

${debug+set -x}
fam=(`git rev-list --no-walk --parents $GIT_COMMIT`)
pathcheck=(`printf "%s:$subdir\\n" ${fam[@]} \
    | git cat-file --batch-check='%(objectname)' | uniq`)

[[ $pathcheck = *:* ]] || {
    subfam=($( set -- ${fam[@]}; shift;
        for par; do tpar=`map $par`; [[ $tpar != $par ]] &&
            git rev-parse -q --verify $tpar:"$subdir"
        done
    ))

    git rm -rq --cached --ignore-unmatch  "$subdir"
    if (( ${#pathcheck[@]} == 1 && ${#fam[@]} > 1 && ${#subfam[@]} > 0)); then
        # one id same for all entries, copy mapped mom's submod commit
        git update-index --add --cacheinfo 160000,$subfam,"$subdir"
    else
        # no mapped parents or something changed somewhere, make new
        # submod commit for current subdir content.  The new submod
        # commit has all mapped parents' submodule commits as parents:
        subnew=`git cat-file -p $GIT_COMMIT | sed 1,/^$/d \
            | git commit-tree $GIT_COMMIT:"$subdir" $(
                ${subfam:+printf ' -p %s' ${subfam[@]}}) 2>&-
            ` &&
        git update-index --add --cacheinfo 160000,$subnew,"$subdir"
    fi
}
${debug+set +x} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-02T10:24:54.213

@knittl 使用的当前答案`filter-branch`使我们非常接近预期的效果，但是在尝试时，Git 向我发出了警告：

```
WARNING: git-filter-branch has a glut of gotchas generating mangled history
         rewrites.  Hit Ctrl-C before proceeding to abort, then use an
         alternative filtering tool such as 'git filter-repo'
         (https://github.com/newren/git-filter-repo/) instead.  See the
         filter-branch manual page for more details; to squelch this warning,
         set FILTER_BRANCH_SQUELCH_WARNING=1. 
```

现在，在这个问题被首次提出和回答 9 年后，`filter-branch`已弃用`git filter-repo`. 事实上，当我使用 git 查看我的 git 历史记录时`git log --all --oneline --graph`，它充满了不相关的提交。

那怎么用[`git filter-repo`](https://github.com/newren/git-filter-repo)呢？Github 有一篇很好的文章[在这里](https://docs.github.com/en/get-started/using-git/splitting-a-subfolder-out-into-a-new-repository)概述了这一点。（请注意，您需要独立于 git 安装它。我使用的是 python 版本`pip3 install git-filter-repo`）

如果他们决定移动/删除文章，我将在下面总结和概括他们的程序：

```
git clone <your_old_project_remote> <your_submodule>
cd <your_submodule>
git filter-repo --path path/to/your/submodule
git remote set-url origin <your_new_submodule_remote>
git push -u origin <branch_name> 
```

从那里，您只需要将新存储库注册为您想要的子模块：

```
cd <path/to/your/parent/module>
git submodule add <your_new_submodule_remote>
git submodule update
git commit 
```**

# php - 当子菜单具有 class="active" 时，将 class="current" 添加到父菜单

> ID：12514202
> 
> 赞同：0
> 
> 时间：2012-09-20T13:55:56.203
> 
> 标签：php, css

我显然不知道如何将 class="current" 添加到`<li> tag`父菜单`<li> tag`的`class="active"`. 我尝试使用 jQuery 来实现这一点，但它不起作用，因为单击它时页面会重新加载。所以我只是简单地`name`在数据库中添加了一个字段作为参数。Bellowing 是我的 PHP 代码：

```
echo '<ul>';
    $main_menu = model::getMainMenu();
       foreach($main_menus as $menu){
            echo '<li class="dropdown">
            <a href=?page='.$menu['name'].'&m=1 class='.(($_GET['page'] == $menu['name'])?'current':'').'>'.$menu['title'].'</a>';
            $sub_menus = model::getSubMenu($menu['id']);
            if( $sub_menus != '' ){
              echo '<ul>';
              foreach($sub_menus as $sub){
                echo '<li><a href=?page='.$sub['name'].' class='.(($_GET['page']==$sub['name'])?'current':'').'>'.ucwords( $sub['title'] ).'</a></li>';
              }
             echo '</ul>';
            }
            echo '</li>';
    }
</ul> 
```

我只能通过比较来检测哪个子页面或页面当前处于活动状态`$_GET['page'] and the $sub['name']`（我的 url 结构就像这样`index.php?page=home`）。但是，我不知道在当前选择子菜单时如何检测父菜单。

[我在这里](http://pio.comze.com)上传了页面

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T14:07:15.503

请参阅下面的代码。不确定它是否完全正确，但想法应该很清楚。基本上 - 如果其中一个 LI 处于活动状态，您可以将所有 LI html 收集到一个变量中并将标志设置为 tru。而不是回显考虑到标志变量状态的所有内容。

```
echo '<ul>';
    $main_menu = model::getMainMenu();
       foreach($main_menus as $menu) {                
            $sub_menus = model::getSubMenu($menu['id']);
            $lis = "";
            $hasCurrent = false;
            if($sub_menus != '') {
                foreach($sub_menus as $sub) {
                    $lis .= '<li><a href=?page='.$sub['name'].' class='.(($_GET['page']==$sub['name'])?'current':'').'>'.ucwords( $sub['title'] ).'</a></li>';
                        if($_GET['page']==$sub['name']) {
                            $hasCurrent = true;
                        }
                }
                echo '<li class="dropdown ' . $hasCurrent ? 'active' : '' . '">
                      <a href=?page='.$menu['name'].'&m=1 class='.(($_GET['page'] == $menu['name'])?'current':'').'>'.$menu['title'].'</a>';
                if($lis != '') {
                    echo '<ul>';
                    echo $lis;
                    echo '</ul>';
                }
            }
            echo '</li>';
    }
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T14:00:10.537

一种可能的解决方案：

给“活动”标签一个 ID，而不是一个类 - 因为一次只能激活一个页面（大概）。

然后使用 Javascript 遍历 DOM 并找到父元素：

```
var active_elem = document.getElementById("active");
var parent_element = active_elem.parentElement.parentElement; 
```

然后分配班级/ ID 或您想做的任何事情。

# php - 使用 PHP 重定向器返回打开的图元标记

> ID：12514206
> 
> 赞同：1
> 
> 时间：2012-09-20T13:56:09.423
> 
> 标签：php, redirect, facebook-like, facebook-opengraph

我正在创建一个移动网站，并在其上放置了 Facebook Like 按钮。有关测试版本，请参见[http://www.rwponline.nl/test/](http://www.rwponline.nl/test/)。

网站的根目录包含一个 PHP 文件，该文件检查用户是否被重定向到 /desktop/index.php 或 /mobile/index.php

在测试网站上，您会在右下角找到“Verzenden”按钮（即用荷兰语分享）。单击后，弹出窗口希望共享[http://www.rwponline.nl/desktop/](http://www.rwponline.nl/desktop/)但是，我想共享主目录（www.rwponline.nl），以便始终将新访问者重定向到相应的网站。这是like按钮的代码：

```
<script>(function(d, s, id) {var js, fjs = d.getElementsByTagName(s)[0];if (d.getElementById(id)) return;js = d.createElement(s); js.id = id;js.src = "//connect.facebook.net/nl_NL/all.js#xfbml=1";fjs.parentNode.insertBefore(js, fjs);}(document, 'script', 'facebook-jssdk'));</script>

<div class="fb-like" data-href="http://www.rwponline.nl" data-send="true" data-layout="button_count" data-width="200" data-show-faces="false" data-colorscheme="dark" data-font="verdana"></div> 
```

我知道 Facebook 正在寻找 OG 元标记，因此在网站根目录上的这个重定向 PHP 文件中，我在执行重定向之前返回所需的标头。请参阅下面的代码。

```
 if($redirect = ($mobile_browser==true) ? $mobileredirect : $desktopredirect){
header('<meta property="og:title" content="RWP Audio & Lighting"/>');
header('<meta property="og:description" content="RWP Audio &#38; Lighting weet van elk evenement een sfeervolle happening te maken!"/>');
header('<meta property="og:type" content="website"/>');
header('<meta property="og:image" content="http://www.rwponline.nl/test/images/icon150.png"/>');
header('<meta property="og:url" content="http://www.rwponline.nl"/>');
header('<meta property="og:site_name" content="RWP Audio & Lighting"/>');
header('<meta property="fb:admins" content="RWPOnline"/>');
header("HTTP/1.1 301 Moved Permanently"); 
header('Location: '.$redirect); // redirect to the right url for this device
exit; 
```

我尝试更改 HTTP 状态代码（例如 200 或 204）但没有成功。在 Facebook 开发者页面 (http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.rwponline.nl%2Ftest%2F) 上测试这个也没有给我有什么问题的线索。谁能帮我？还是我忽略了什么？谢谢！

# python - Pylint 和 Tornado - 在 @tornado.web.authenticated 上失败

> ID：12514214
> 
> 赞同：1
> 
> 时间：2012-09-20T13:56:34.207
> 
> 标签：python, tornado, pylint

**Pylint**在遇到**@tornado.web.authenticated时崩溃**

```
class Handler1(tornado.web.RequestHandler):
    def get(self):
        return 'hello'

class Handler2(tornado.web.RequestHandler):
    @tornado.web.authenticated
    def get(self):
        return 'hello' 
```

Pylint 在包含 Handler1 的文件上运行。Pylint 在包含 Handler2 报告的文件上崩溃：**decorator.expr.name == node.name): AttributeError: 'Getattr' object has no attribute 'name'**

```
Traceback (most recent call last):
   File "/Users/andy/dev/virtualenv/thanks-app/bin/pylint", line 4, in <module>
    lint.Run(sys.argv[1:])
   File "/Users/andy/dev/virtualenv/thanks-app/lib/python2.7/site-packages/pylint/lint.py", line 879, in __init__
    linter.check(args)
   File "/Users/andy/dev/virtualenv/thanks-app/lib/python2.7/site-packages/pylint/lint.py", line 502, in check
    self.check_astng_module(astng, walker, rawcheckers)
   File "/Users/andy/dev/virtualenv/thanks-app/lib/python2.7/site-packages/pylint/lint.py", line 574, in check_astng_module
    walker.walk(astng)
   File "/Users/andy/dev/virtualenv/thanks-app/lib/python2.7/site-packages/pylint/utils.py", line 528, in walk
    self.walk(child)
   File "/Users/andy/dev/virtualenv/thanks-app/lib/python2.7/site-packages/pylint/utils.py", line 528, in walk
    self.walk(child)
   File "/Users/andy/dev/virtualenv/thanks-app/lib/python2.7/site-packages/pylint/utils.py", line 525, in walk
    cb(astng)
   File "/Users/andy/dev/virtualenv/thanks-app/lib/python2.7/site-packages/pylint/checkers/base.py", line 161, in visit_function
    if not redefined_by_decorator(node):
   File "/Users/andy/dev/virtualenv/thanks-app/lib/python2.7/site-packages/pylint/checkers/base.py", line 116, in redefined_by_decorator
    decorator.expr.name == node.name):
 AttributeError: 'Getattr' object has no attribute 'name' 
```

是否有特定的 Pylint 检查可以禁用以阻止此崩溃的发生？

我正在使用：

*   皮林特 0.25.1
*   Python 2.7.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T14:19:22.960

浏览了[这里的代码](http://fossies.org/unix/misc/pylint-0.25.2.tar.gz%3aa/pylint-0.25.2/checkers/base.py)。禁用这些已停止发生错误：[将这些添加到配置]

禁用=E0100,E0101,E0102,E0106

> pylint 文件 -d E0100,E0101,E0102,E0106

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T16:28:47.090

此错误已在 pylint 存储库中修复，并将很快发布（0.26 应该在下周发布）。所以要么使用结帐（hg clone [http://hg.logilab.org/pylint](http://hg.logilab.org/pylint)），要么等到下周

# python - Scrapy 服务器不运行蜘蛛

> ID：12514216
> 
> 赞同：0
> 
> 时间：2012-09-20T13:56:37.197
> 
> 标签：python, parsing, web-crawler, scrapy

我设置了从命令行完美运行的蜘蛛

```
$ scrapy crawl somesite 
```

我用这个字符串制作了一个 shell 脚本，并通过 cronjob 运行它。但这是一个非常糟糕的主意，因为爬虫不会等到结束之前的爬虫爬虫。所以我得到了一些非常复杂的结果。所以我试图让爬虫通过

```
$ scrapy server
$ curl http://localhost:6800/schedule.json -d project=myproject -d spider=spider2 
```

并且没有结果。爬虫不运行。我不知道如何安排蜘蛛运行（例如每 10 分钟一次）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T12:24:45.067

您使用的是哪个版本的 Scrapy？

要解决等待结束前一个爬虫的问题，请尝试一些简单的控制，如下所示：

```
#!/usr/bin/python

import os
import traceback

spiderName='someSpider'

# Block file
pid = str(os.getpid())
pidfile = "/tmp/" + spiderName + ".pid"

if os.path.isfile(pidfile):
  print "%s is blocked, another process running..." % spiderName
  sys.exit()
else:
  file(pidfile, 'w').write(pid)

try:
  os.chdir('/some/dir/crawlers')
  os.execl('/usr/local/bin/scrapy', 'foo', 'crawl', spiderName)
except OSError:
  print str(traceback.format_exc()) 

os.unlink(pidfile) 
```

# xaml - 在 Windows 8 上的本地存储中交付数据

> ID：12514220
> 
> 赞同：1
> 
> 时间：2012-09-20T13:56:55.540
> 
> 标签：xaml, c#-4.0, windows-8, windows-runtime

是否可以在 Windows 8 应用程序的本地存储中发送一些数据？我在我的项目中使用基于文件的数据库，并希望将整个数据库交付给用户，这样我就不必创建所有条目（超过 350 个）。

*您可以在 C:\Users\ username* \AppData\Local\Packages中找到本地存储的数据，但我无法将信息保存在我的应用程序之外。也许你有一个想法。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T14:17:31.677

我过去这样做的方式是允许将数据写入文件......

*   将文件添加为资产。
*   启动时，检查本地存储文件夹以查看文件是否存在。
*   如果文件不存在，请将其从 InstalledLocation 复制到 LocalFolder
*   对复制的文件正常执行 IO。

如果您随后需要从 Web 更新文件，您可以将新副本直接下载到 LocalFolder 路径以供使用，或者对其进行解析并将条目添加到原始文件中。

# javascript - 如何设置第三方 cookie

> ID：12514222
> 
> 赞同：7
> 
> 时间：2012-09-20T13:57:05.047
> 
> 标签：javascript, cookies

如何设置第三方 cookie。我有要求设置 cookie，并且 cookie 将在访问的网站中启用，就像我在访问 cde.com 或 def.com 或 ghi.com 时在 abc.com 中设置了 cookie 一样，所以设置的 cookie 将在所有网站上获取。如何在 javascript 中获取所有域上的 cookie。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T14:05:50.963

如果您将使用 abc.xyz.com、cde.xyz.com、def.xyz.com（谷歌获取[子域 cookie](https://www.google.com/search?q=subdomain+cookies)）而不是 abc.com、cde.com、def.com，则可以直接共享 cookie . 也许可以像这样设置您的网站并且仍然满足您的要求。

否则，如果所有这些网站不能位于同一域的子域中，那么您可能会让其中一个充当中央 cookie 服务器，当用户在其他域上时，您可以使用 JSONP 将它们定向到您的 cookie 上的某个脚本将向您发送他们的 id 或其他内容并使您的脚本处理 AJAX 请求的域将其域 cookie 设置为相同的值。例子：

1.  用户访问 def.com
2.  def.com 上的 JavaScript 代码向 abc.com 发出 JSONP 请求
3.  如果尚未设置，abc.com 将设置 cookie
4.  abc.com 返回 cookie 值作为对 def.com 上脚本的响应
5.  def.com 上的脚本将其本地 def.com cookie 设置为相同的值

现在您的服务器可以协调他们的统计数据等。

所有这一切当然只有在所有网站相互合作的情况下才有可能，即。您的网站也不能与您无法控制的其他网站的 cookie 混为一谈。

**更新：**

另请参阅Alex Sexton 的[Breaking The Cross Domain Barrier](http://vimeo.com/24705559)演讲，以获取一些灵感和代码示例。

**更新：**

如果您决定使用类似于上述方法的方法，请**确保您了解潜在的安全问题，例如**[跨站点请求伪造](http://en.wikipedia.org/wiki/Cross-site_request_forgery)攻击的可能性。[在 Stack Overflow 中搜索 JSONP 安全性](https://stackoverflow.com/search?q=jsonp+security)，以找到有关如何使其安全的更多信息。请记住，上面的解释是对您需要理解的一些复杂过程的简化。你被警告了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T13:58:05.030

您只能访问您的域 cookie。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T13:59:02.783

无法分配多域 cookie。

# ios - 为 armv7s 升级到 XCode 4.5 但 XCode 4.5 删除了 armv6 但不能限制要求

> ID：12514231
> 
> 赞同：7
> 
> 时间：2012-09-20T13:57:26.507
> 
> 标签：ios, xcode4.5

我已升级到 XCode 4.5 以添加 armv7s 架构支持，但是，我发现您无法使用 XCode 4.5 生成 armv6 二进制文件。

我已经支持 armv6，但是，想用 XCode 4.5 支持 armv7s 似乎迫使我与以下条款相矛盾：“**您只能扩展您的设备要求。不允许提交对二进制文件的更新以限制您的设备要求。** ”

有谁知道我们是否被允许放弃 armv6，或者是否有解决方法？

可能还值得一提的是，我正在构建一个框架（库），而不是一个应用程序。所以我想支持应用程序开发人员。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T21:32:49.853

armv6 是初代 iPhone 和 iPhone 3G 的 CPU 架构。鉴于两代 iOS 和更多版本不再支持两者，将其从支持的目标中删除是安全的。事实上，以 armv7 为目标应该会为当前设备生成更优化的二进制文件。

看看您如何开发图书馆，这将对用户施加限制。您将限制 armv6 用户或 armv7s 用户 - 选择对我来说似乎很明显，但为了安全起见，我建议将您的 armv7 及更高版本分支为新项目（可能是“v2”），以便旧库的用户可以继续安全地使用它，直到他们能够升级他们的项目。保持原始不受支持以激励更快的升级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T00:58:05.933

重新阅读您的问题后，我对您为什么遇到任何问题感到困惑。您正在构建一个框架，因此此限制不适用于您：

*   以前使用您的框架（支持 Armv6 的版本）的用户无论如何都无法更新他们的应用程序，除非他们放弃 Armv6。

*   由于新的应用程序开发人员将被迫使用 XCode 4.5，因此无论如何他们都将放弃 Armv6。如果他们想将您的框架与新应用程序一起使用，他们无论如何都无法支持 Armv6。

所以在我看来，作为一个框架开发者，这个指南根本不适用于你。

**编辑 - 另外... Facebook 应用程序已更新为仅支持 iOS 4.3，不再支持 Armv6 设备。** [http://itunes.apple.com/us/app/facebook/id284882215?mt=8](http://itunes.apple.com/us/app/facebook/id284882215?mt=8)

# mysql - 与 mysql 查询的并行性

> ID：12514233
> 
> 赞同：2
> 
> 时间：2012-09-20T13:57:28.723
> 
> 标签：mysql, parallel-processing, apache-storm

我有以下问题：

我目前正在处理多个并行线程，它们同时应该通过 mysql 查询从同一个数据库中获取数据（我为此使用 Java - 更准确地说，使用 Java 进行风暴）。但是不是并行执行，而是按顺序执行，因此，整个过程所需的时间或多或少是来自每个线程的每个查询的总时间。

有没有办法实际并行执行这些线程（以及来自同一数据库的查询）？我真的需要加快这个过程很多。

不幸的是，有太多的代码行无法向您展示一些有用的摘录......

我希望你仍然可以帮助我解决这个问题。

谢谢1

# performance - perl 中的哈希元素的别名

> ID：12514234
> 
> 赞同：4
> 
> 时间：2012-09-20T13:57:30.703
> 
> 标签：performance, perl, reference, alias, copy-on-write

是否可以在不同的哈希键下访问相同的值？我如何告诉 Perl 不要复制“非常长的文本”？

```
$hash->{'key'} = 'very long text';
$hash->{'alias'} = $hash->{'key'}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T15:30:54.170

简单的方法是使用对公共变量的引用。

```
my $hash;
my $val = 'very long text';
$hash->{key} = \$val;
$hash->{alias} = $hash->{key};

say ${ $hash->{key} };        # very long text
say ${ $hash->{alias} };      # very long text

${ $hash->{key} } = 'some other very long text';

say ${ $hash->{key} };        # some other very long text
say ${ $hash->{alias} };      # some other very long text

say $hash->{key} == $hash->{alias} ? 1 : 0;  # 1 
```

复杂的方法是使用[Data::Alias](http://search.cpan.org/perldoc?Data%3a%3aAlias)。

```
use Data::Alias qw( alias );

my $hash;
$hash->{key} = 'very long text';
alias $hash->{alias} = $hash->{key};

say $hash->{key};        # very long text
say $hash->{alias};      # very long text

$hash->{key} = 'some other very long text';

say $hash->{key};        # some other very long text
say $hash->{alias};      # some other very long text

say \$hash->{key} == \$hash->{alias} ? 1 : 0;  # 1 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-20T14:10:24.530

[Tie::AliasHash](https://metacpan.org/module/Tie%3a%3aAliasHash)会起作用，但我不建议走这条路。你想做什么，你觉得你需要别名哈希键？可能有更好的路线可以走。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T14:14:40.723

使用数组引用而不是标量。

```
use Data::Dumper ;

my $Var = [10];
my %Hash = ('k' => $Var, 'a' => $Var);

print Dumper \%Hash;
$Hash{'a'}[0] = 'test' ;
print Dumper \%Hash; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T14:08:01.760

不可以。以下解决方法是可能的：

### 复制就好

除非我们谈论的是兆字节而不是兆字节的数据，或者除非我们这样做几千次，否则仅仅复制数据不会有太大的伤害。

### 使用参考

```
my %hash = (key => 'very long text');
my $reference = \($hash{key});

print "The very long text is ", $$reference, "\n"; 
```

或者

```
$hash{alias} = \($hash{key});

print "The very long text is ", $$hash{alias}, "\n"; 
```

缺点：你必须使用不同的语法。

### 使用变量作为键

```
my $key = "key";
my $alias = $key;

my %hash = ($key => 'very long text');

print "The very long text is ", $hash{$alias}, "\n"; 
```

缺点：额外的变量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T14:06:00.170

您可以使用参考：

```
$hash->{'key'} = 'very long text';
$hash->{'alias'} = \$hash->{'key'};
print ${$hash->{alias}}, "\n" if ref $hash->{alias}; 
```

# web-services - 在 oracle 10g pl/sql 过程中访问 web 服务

> ID：12514235
> 
> 赞同：1
> 
> 时间：2012-09-20T13:57:32.267
> 
> 标签：web-services, oracle, oracle10g, plsqldeveloper

我正在使用soap_api 方法来访问oracle 中的Web 服务。当我创建 add_numbers 函数并执行 add_numbers 函数时，函数不会执行。在 select 语句中调用 web 服务时触发以下错误

```
select add_numbers(2,5) from dual 
```

错误是

*   ORA-29273: HTTP 请求失败
*   ORA-06512：在“SYS.UTL_HTTP”，第 1029 行
*   ORA-12541: TNS: 没有监听器
*   ORA-06512：在“dbtest.SOAP_API”，第 144 行
*   ORA-06512：在“dbtest.ADD_NUMBERS”，第 34 行 FROM！

我正在使用这个链接中的这个函数和soap_api方法。[以http://www.oracle-base.com/articles/9i/sumption-web-services-9i.php#Top](http://www.oracle-base.com/articles/9i/consuming-web-services-9i.php#Top)为例

用于调用 Web 服务的函数。

```
CREATE OR REPLACE FUNCTION add_numbers (p_int_1 IN  NUMBER,  p_int_2  IN  NUMBER)  RETURN NUMBER AS
  l_request   soap_api.t_request;
  l_response  soap_api.t_response;
  l_return    VARCHAR2(32767);  
  l_url          VARCHAR2(32767);
  l_namespace    VARCHAR2(32767);
  l_method       VARCHAR2(32767);
  l_soap_action  VARCHAR2(32767);
  l_result_name  VARCHAR2(32767);
BEGIN
  l_url         := 'http://192.168.0.75:9001/LicWebService.asmx';
  l_namespace   := 'xmlns="http://192.168.0.75:9001/"';
  l_method      := 'AddNum';
  l_soap_action := 'http://192.168.0.75:9001/AddNum';
  l_result_name := 'return';  
  l_request := soap_api.new_request(p_method => l_method,   p_namespace=> l_namespace);
  soap_api.add_parameter(p_request => l_request,p_name => 'int1',p_type => 'xsd:integer',p_value   => p_int_1);
  soap_api.add_parameter(p_request => l_request,p_name=> 'int2', p_type=> 'xsd:integer',p_value   => p_int_2);
  l_response := soap_api.invoke(p_request => l_request, p_url=> l_url,  p_action => l_soap_action);
  l_return := soap_api.get_return_value(p_response  => l_response,p_name=> l_result_name, p_namespace => NULL);
END; 
```

请建议我在哪里犯错。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T17:01:36.947

您的 TNS 设置不正确或 TNS 服务未运行。这就是`UTL_HTTP`api 不工作的原因（由 使用`SOAP_API`）。

按照[此](http://www.dba-oracle.com/t_ora_12541_tns_no_listener.htm)链接进行故障排除并解决此问题。

# html - 字体图标 vs png 图标

> ID：12514236
> 
> 赞同：13
> 
> 时间：2012-09-20T13:57:32.797
> 
> 标签：html, css, fonts, svg, icons

我使用图标作为标签，但我看到了这个网站：`www.fontello.com`您可以在其中创建带有图标的字体。

但是当我用图标创建字体时，它比我所有的图标都大，因为有 svg、ttf、woff 和 eot，所有这 4 种字体都比所有 png 图标都大。

```
@font-face {
  font-family: 'fonticons';
  src: url("../font/fonticons.eot");
  src: url("../font/fonticons.eot?#iefix") format('embedded-opentype'), url("../font/fonticons.woff") format('woff'), url("../font/fonticons.ttf") format('truetype'), url("../font/fonticons.svg#fonticons") format('svg');
  font-weight: normal;
  font-style: normal;
} 
```

我所有的图标都是 optipng 压缩的 .png 图像。

这适用于所有浏览器吗？

那么我为什么要使用这种字体方法呢？

还有什么替代品`fontello.com`？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-20T14:26:13.013

好问题。~~我目前正在尝试使用 Fontello 和字体图标，看看它是否是一种可行的方法。~~

这是一种可行的方法。我在生产应用程序中使用了基于字体的图标，并在几乎所有流行的浏览器/设备上进行了测试（Fontello 有甚至支持 IE7 的示例）。关于 Fontello，我只有好话要说，但你可以使用任何你想要的工具。

字体图标可以缩放到所需的任何（比例）尺寸，*并*适用于任何像素密度。如果您在高密度显示器（例如 Apple Retina，并且在所有移动设备上越来越流行）查看您的网站，则光栅格式（例如 PNG）和矢量格式之间存在巨大差异。

您可以在单个文件中定义所有图标（如精灵），但与精灵不同的是，您不必担心文件中项目的尺寸。此外，您可以独立于文件中的其他项目缩放每个项目。

**注意事项**

*   您将需要管理字体文件。这些不是人类可读的，因此您需要使用工具。
*   有相关的 CSS 选择器需要维护（通常每个图标一个选择器）。
*   有时需要额外的标记来实现特定的效果/解决问题。
*   较小的尺寸问题；并非所有图标都均匀地填充一个框，并且它们受每个浏览器的文本渲染特性的影响。

与使用精灵或为每个图标同时创建 PNG/SVG 相比，这些考虑可能更少工作。

请记住，字体图标不包含任何颜色信息。但是，您可以像设置任何其他文本一样设置它的样式。这包括使用 ARGB 颜色和应用评论中指出的更高级的 CSS 效果。

关于文件大小，请记住浏览器几乎永远不会下载所有 4 种字体格式。正确完成，通常只会下载一个。

另一种方法是使用 SVG（不是 SVG 字体）作为图标。浏览器对 SVG 的支持少于 SVG `@font-face`，因此您需要一个光栅回退。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-20T14:20:39.173

这个方便的网站向您展示了哪个浏览器支持 CSS 功能。在这种情况下 < IE9 会给你带来问题。

[http://caniuse.com/#feat=fontface](http://caniuse.com/#feat=fontface)

就个人而言，我更喜欢将 CSS sprites 用于我的 UI 元素，以确保跨浏览器的一致性。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-26T13:46:57.947

快速免责声明：我一直在研究一个名为[pictonic](https://pictonic.co/)的图标字体库。

> 当我用图标创建字体时，它比我所有的图标都大，因为有 svg、ttf、woff 和 eot，所有这 4 种字体都比所有 png 图标都大。

在文件大小方面，您可能会发现以下 png 与图标字体的比较有趣：

[http://blog.pictonic.co/post/32260064131/icon-fonts-could-speed-up-your-page-loading-time-by-14](http://blog.pictonic.co/post/32260064131/icon-fonts-could-speed-up-your-page-loading-time-by-14)

您应该使用跟踪验证图标是否正在转换为矢量格式。由于许多矢量格式（如 svg）也支持位图，如果您的图标被导入为位图，您将不会体验到将它们转换为矢量化字体的任何与文件大小相关的好处。

根据我的经验，即使是 16x16px，ttf 字体也应该比 20 个左右图标的组合文件大小小得多。随着图像大小的增加，这个差距会扩大，因为向量在每个比例上都具有相同的文件大小。

> 这适用于所有浏览器吗？

取决于你使用什么方法。pictonic 在所有浏览器上都经过测试，回到 ie5，但对于旧的 ie 版本（5-7）需要一点 js。所以理论上它可以让图标字体在所有浏览器中工作。

> 那么我为什么要使用这种字体方法呢？

图标字体非常通用，您可以使用 css 操作它们，使图像图标看起来非常不灵活。这是一个演示：[https ://pictonic.co/#main-demo](https://pictonic.co/#main-demo)

例如，您可以尝试您的布局，只需几行 css 即可更改所有图标的颜色、大小和阴影。这很方便。

此外，由于它们是基于矢量的，它们是开箱即用的视网膜，因此它们在视网膜屏幕上看起来很棒，就像在苹果视网膜显示器（视网膜 macbook、iphone 4+、ipad3+）上一样，而图像需要媒体查询以双倍交换占用更多空间的分辨率版本。

我相信如果您使用正确的格式，它们会非常有效。

> 还有 fontello.com 的替代品吗？

pictonic 尚不能导入用户生成的图标，但它确实允许您从 2000 多个令人惊叹的图标生成自定义图标字体，包括相当大的免费图标集。我们总是在添加更多，所以[看看](https://pictonic.co)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-07-09T20:28:13.247

您的另一种选择可能是：http: [//fontastic.me/](http://fontastic.me/)

;)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-15T14:30:00.870

1.  使用字体图标，您可以包含扩展名为 .woff、.ttf、.eot、.svg 的字体文件和该字体的 css 文件。它们的大小较小，您可以在需要时更改图标的大小，使用图像文件 png/jpeg 它会扭曲图像文件，而字体图标会正确缩放。
2.  对于多个图像，您必须向服务器发出多个 http 请求，这可以在此处避免。
3.  字体图标文件也可在 cdn 上使用，因此如果某些早期网站已将其缓存在浏览器中，则不必从服务器请求它。
4.  使用 fontello，您可以自定义和仅使用所需的图标。
5.  还有 fontawesome 当前版本 4.2，您可以在其中获取字体图标，如果您需要对旧版本浏览器的支持，您可以选择旧版本 3。
6.  您还可以使用 LESS/SASS 对其进行自定义。
7.  另一种选择是使用 css sprites，您可以使用传统方法或使用在线服务对其进行优化。
8.  在 html 中使用它非常简单，一旦您确定 css 文件和字体文件已加载到浏览器中，您只需将类名添加到 html 元素就可以了，然后您可以自定义字体大小、颜色，背景颜色根据您的意愿。

[字体真棒](http://fortawesome.github.io/Font-Awesome/)

[丰泰洛](http://fontello.com/)

[你可以在这里](http://www.bootstrapcdn.com/#tab_fontawesome)找到 CDN

# apache-flex - Flex Advanceddatagrid 滚动条宽度

> ID：12514238
> 
> 赞同：0
> 
> 时间：2012-09-20T13:57:35.000
> 
> 标签：apache-flex, advanceddatagrid

我正在使用`advanceddatagrid`Flex4.6 解决方案。我有两个`advanceddatagrid`s 放在一起。目前我已经让它工作，以便移动底部水平滚动条相应地移动顶部网格滚动条，但问题是它不会移动相同的距离，因为一个滚动条比另一个大。有谁知道如何设置`horizontalscrollbar`宽度以便我可以使它们的长度相同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T22:34:11.300

你需要做一些数学运算：

```
grid2.horizontalScrollPosition = grid1.horizontalScrollPosition  * grid2.maxHorizontalScrollPosition/grid1.maxHorizontalScrollPosition; 
```

# php - 从链接弹出

> ID：12514239
> 
> 赞同：0
> 
> 时间：2012-09-20T13:57:35.837
> 
> 标签：php

我有一个链接，我想在弹出窗口中打开一个页面，该链接和 onclick 工作正常，但在一个新的完整窗口中打开它，但是当我在“_blank”之后添加该部分时，它停止工作。这是我的代码

```
echo '<li>'.$img.'<a href="#" onclick="window.open(\'job_detail.php?id='.$item_id.'\'_blank\', \'toolbar=0,location=no,menubar=0,height=550,width=500,left=200, top=300\')">'.$item_name.'</a></li>'; 
```

我怀疑我的语法有错字或问题，但我找不到。

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T14:02:38.930

```
echo '<li>'.$img.'<a href="#" onclick="window.open(\'job_detail.php?id='.$item_id.'\', \'_blank\', \'toolbar=0,location=no,menubar=0,height=550,width=500,left=200, top=300\')">test'.$item_name.'</a></li>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T14:06:14.863

```
echo '<li>'.$img.'<a href="#" onclick="window.open(\'job_detail.php?id='.$item_id.'\', \'_blank\', \'toolbar=0,location=no,menubar=0,height=550,width=500,left=200, top=300\')">'.$item_name.'</a></li>'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T14:12:50.617

您在 window.open 参数中缺少一些单引号，并且您传递的参数略有不正确。_blank 是与 URL（第一个参数）分开的参数，URL 需要一个单引号，而 NAME 需要一个单引号。更正的代码如下

```
echo('<li>' . $img . '<a href="#" onclick="window.open(\'job_detail.php?id=' . $item_id . '\',\'_blank\', \'toolbar=0,location=no,menubar=0,height=550,width=500,left=200,top=300\')">' . $item_name . '</a></li>'); 
```

# android - 如何从 DatePicker 对话框中为多个调用设置日期

> ID：12514242
> 
> 赞同：2
> 
> 时间：2012-09-20T13:57:45.157
> 
> 标签：android

美好的一天，似乎无法找到解决方案。我有 2 个按钮，按下时会打开一个 datepickerdialog，但我现在的问题是，如何将它们设置为 OnDateSet 方法上的适当按钮。我使用 DialogFragment 作为日期，然后在我的活动中实现 DateListener。我曾尝试使用 getTag() 但没有成功获取标签。这是我尝试过的：

```
public void showfromDatePickerDialog(View v) {
        DialogFragment dateFragment = new DateDialogFragment();
        dateFragment.show(getSupportFragmentManager(), "fromdatePicker");
    }

    public void showtoDatePickerDialog(View v) {
        DialogFragment dateFragment = new DateDialogFragment();
        dateFragment.show(getSupportFragmentManager(), "todatePicker");
    }

        public void onDateSet(DatePicker view, int year, int month, int day) {

        StringBuilder builder = new StringBuilder();
        builder.append(day).append("-")
               .append(month).append("-")
               .append(year);

        String text= builder.toString();

        if(view.getTag().toString().equals("fromdatePicker")) { // error here

            Log.d(TAG, "got here" + text);
            fromdate.setText(text);
        }

        if(view.getTag() == "todatePicker") {
            todate.setText(text);
        } 
```

任何想法如何实施？我不断看到有关使用 2 个不同 DialogFragment 类的解决方案，但我猜应该有另一种方法。还是我错了？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T14:44:07.437

好的，我可以解决这些问题。这对任何有这个问题的人都有帮助。如果它稍微不正确，请告诉我，我可以更改它。但这就是我为解决这个问题所做的。

在日期集上：

```
 public void onDateSet(DatePicker view, int year, int month, int day) {

        StringBuilder builder = new StringBuilder();
        builder.append(day).append("-")
               .append(month).append("-")
               .append(year);

        String text= builder.toString();

FragmentManager fragmanager = getSupportFragmentManager();

      if(fragmanager.findFragmentByTag("fromdatePicker") != null) {

            Log.d(TAG, "got here" + text);
            fromdate.setText(text);
        }

       // if(view.getTag() == "todatePicker") {
  if(fragmanager.findFragmentByTag("todatePicker") != null) {
            todate.setText(text);
        } 
```

这样，您可以将相同的 dateListener 用于多个调用，并根据在对话框上调用 show 时传递的标签适当地设置日期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T14:11:11.707

使用下面的 DatePicker 对话框代码。

```
private int mYear;
private int mMonth;
private int mDay; 
Calendar cal4DatePicker = Calendar.getInstance();
Button btnDOB=findviewbyId(R.id.btndob);

private DatePickerDialog.OnDateSetListener mDateSetListener = new DatePickerDialog.OnDateSetListener() {

    public void onDateSet(DatePicker view, int year, int monthOfYear,
            int dayOfMonth) {
        mYear = year;
        mMonth = monthOfYear;
        mDay = dayOfMonth;

        cal4DatePicker.set(Calendar.YEAR, mYear);
        cal4DatePicker.set(Calendar.MONTH, mMonth);
        cal4DatePicker.set(Calendar.DAY_OF_MONTH, mDay);

        btnDOB.setText(new StringBuilder()
                .append(mDay).append("-").append(mMonth).append("-").append(mYear).append(" "));
    }
}; 
```

在 btnDOB 上，您需要设置单击列表器以显示此 DatePicker 对话框。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-09T09:30:17.080

我只用时间选择器尝试过同样的事情。您也可以尝试为日期选择器设置相同的设置。

```
 package com.example.toolboxtest;

import java.text.Format;
import java.text.SimpleDateFormat;

import java.util.Calendar;
import java.util.Date;
import java.util.GregorianCalendar;

import android.app.Dialog;
import android.app.TimePickerDialog;
import android.os.Bundle;

import android.support.v4.app.FragmentActivity;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TimePicker;

public class MainActivity extends FragmentActivity implements OnClickListener {

    Button testBtn; 
    EditText testET;
    static final int TIME_DIALOG_ID = 0;
    int mHour = 0;
    int mMinute = 0;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        testBtn = (Button) findViewById(R.id.testBTn);
        testET = (EditText) findViewById(R.id.testET);

        testBtn.setOnClickListener(this);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    @Override
    public void onClick(View v) {
        switch(v.getId()){
        case R.id.testBTn:
            showDialog(TIME_DIALOG_ID);
            break;
        }

    }
    private TimePickerDialog.OnTimeSetListener mTimeSetListener = new TimePickerDialog.OnTimeSetListener() {
        public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
            mHour=hourOfDay;
            mMinute = minute;
//          myPrefs = ImportantDateReminderActivity.this.getSharedPreferences("myPrefs",MODE_WORLD_WRITEABLE);
//          prefsEditor = myPrefs.edit(); 
//          prefsEditor.putInt("hour", mHour);
//          prefsEditor.putInt("minute", mMinute);
//          prefsEditor.putString("a", a);
//          prefsEditor.commit();
            if(mHour==12){                 
                //reminderSetTime.setText(new StringBuilder().append("12").append(":").append((minute)+" PM"));
                testET.setText(mHour+":"+mMinute+" "+"PM");

            }
            else             
                updateTimeDisplay();         
        } 
    };

    private void updateTimeDisplay() {          
        try {             
            Format formatter;             
            SimpleDateFormat df = new SimpleDateFormat("hh:mm");             
            Date d = df.parse(mHour + ":" + mMinute);             
            Calendar gc = new GregorianCalendar();             
            gc.setTime(d);             
            //gc.add(Calendar.HOUR, 0);             
            Date d2 = gc.getTime();  

            formatter = new SimpleDateFormat("hh:mm a");             
            String time = formatter.format(d2);   
            System.out.println("The TIME is: "+time);
            testET.setText(time);

            String hour = new SimpleDateFormat("hh").format(d2);
            String minute = new SimpleDateFormat("mm").format(d2);
            String a = new SimpleDateFormat("a").format(d2);
            System.out.println("The Hour is: "+hour+ " "+minute+ " " +a);
            /*myPrefs = this.getSharedPreferences("myPrefs",MODE_WORLD_WRITEABLE);
            prefsEditor = myPrefs.edit(); 
            prefsEditor.putInt("hour", Integer.parseInt(hour));
            prefsEditor.putInt("minute", Integer.parseInt(minute));
            prefsEditor.putString("a", a);
            prefsEditor.putString("complateTime", time);
            prefsEditor.commit();*/

            //addTwoMonthNotification();
        } catch (Exception e) {             
            e.printStackTrace();         
        }      
    } 

    @Override
    protected Dialog onCreateDialog(int id) {
        switch (id) {
            case TIME_DIALOG_ID:
                return new TimePickerDialog(this,mTimeSetListener, mHour, mMinute, false);
        }
        return null;
    }

} 
```

希望它会帮助你。

如果有任何问题，请告诉我。

# git - 你会把jar文件放到git repo吗？或者你只会在 pom.xml 中定义它？

> ID：12514246
> 
> 赞同：1
> 
> 时间：2012-09-20T13:57:49.127
> 
> 标签：git, jakarta-ee, maven, version-control, nexus

使用 maven 管理 Java EE 项目很不错，并将所有 jar 依赖项放在 pom.xml 中，这样您就不需要将这些大 jar 文件添加到您的 git 版本控制 repo 中。

这很棒，尤其是当所有依赖项都在 Maven 中央仓库中时。

如果有一些 jar lib 不包含在 maven Central repo 中，你会将这些 jar lib 添加到 git repo 中吗？或者您只会将这些文件上传到您的本地 Nexus 服务器？（**无论如何，如果有一天你不在本地的 nexus 服务器上，这并不好**）

那么你的选择是什么，你会将 jar 文件放到 git repo 中吗？或者你只会在 pom.xml 中定义它？当 Maven 的中央存储库不包含此类 jar 库时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T14:01:44.393

我认为将依赖项保留在本地 Nexus 存储库（并在 pom.xml 中定义）而不是版本控制系统的最佳方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T06:45:04.233

显然，您将代码托管在 github 中，并从不总是在公司 Intranet 中的位置使用它。那么，基本上，您可以使用以下解决方案：

1.  在您自己的公共服务器上托管一个 nexus（或类似）存储库，并进行身份验证。这样它就可以从任何你想要的地方访问。例如，它也可以在[Amazon](https://stackoverflow.com/questions/850570/maven-s3-wagon-provider)上完成。
2.  使用一些免费、开放、托管的解决方案。例如，[Sonatype 为](http://www.sonatype.com/people/2009/11/a-year-of-providing-free-maven-repository-hosting/)开源项目提供免费托管。
3.  正如[已经建议](https://stackoverflow.com/a/12514392/365237)的那样，您也可以[在 github 上托管您的 maven](http://cemerick.com/2010/08/24/hosting-maven-repos-on-github/)存储库- 不要将其存储在您的代码存储库中，为它创建一个单独的项目！
4.  或者.. 只需支付托管费用。如果您愿意为此付费，应该有一些受支持的解决方案。

这些中的任何一个都应该适合你。从您描述情况的方式来看，选项 3 可能是您想要的。无论如何，将它们放在代码存储库之外的其他地方。

编辑：可能我也忽略了闭源开发最不言而喻的解决方案，所以这将是一个替代方案 5。来自[评论](https://stackoverflow.com/questions/12410423/how-do-i-setup-a-private-remotely-accessible-maven-repository)：

> 在这种情况下，最明智的做法是将存储库放在防火墙后面，并允许外部人员通过您的 VPN 访问它。您可以设置一个可公开访问的服务，要求所有用户提供某种凭据，但是当您真的不需要组织外部的任何人使用时，为什么要向外部世界开放您的存储库（以及由此带来的所有风险）它？当然，假设您有一个 VPN - 但如果您有远程员工，您可能应该有一个 VPN，以便他们可以安全地访问您的内部服务。

如果您的回购不是公开的，这听起来很合理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T14:06:02.853

如果本地服务器不是一个选项，那么您可以使用 git 发布依赖项。

这是网址的示例： [https ://github.com/plokhotnyuk/calculator/raw/master/repo](https://github.com/plokhotnyuk/calculator/raw/master/repo)

并且 repo 的内容应该从本地 maven 存储库中复制： [https ://github.com/plokhotnyuk/calculator/tree/master/repo](https://github.com/plokhotnyuk/calculator/tree/master/repo)

# asp.net-mvc-3 - 如何在区域中获取我的登录页面？

> ID：12514249
> 
> 赞同：0
> 
> 时间：2012-09-20T13:57:53.683
> 
> 标签：asp.net-mvc-3

我的项目中有 2 个区域：Admins、Members 和我在视图文件夹中有 Login.csthml。因此，它的地址是：

> http:localhost.com:5555/Areas/Members/view/Login.cshtml

我想在我的网站主页上创建文本链接“登录”，当我点击它时，它应该转到我上面所说的登录页面。

我使用这个代码：@Html.Action("Login", "Members")

但是，它不知道它应该去会员区，它会抛出一个错误：

> {"未找到视图“登录”或其主视图或没有视图引擎支持搜索的位置。搜索了以下位置:\r\n~/Views/Members/Login.aspx\r\n~/Views/Members /Login.ascx\r\n~/Views/Shared/Login.aspx\r\n~/Views/Shared/Login.ascx\r\n~/Views/Members/Login.cshtml\r\n~/Views /Members/Login.vbhtml\r\n~/Views/Shared/Login.cshtml\r\n~/Views/Shared/Login.vbhtml"}

我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T14:16:47.013

您在 Global.asax 上有区域注册吗？通过右键单击项目并使用向导添加区域时，所有编码都会自动完成。

您发布的地址也不正确......它应该类似于 http: localhost:[port]/[AreaName]/Members/Login

尝试使用这个 url 表单来查看路由是否正常工作

# c# - 在 Silverlight 中为画布上的图像和文本元素分配 zIndex 顺序

> ID：12514250
> 
> 赞同：0
> 
> 时间：2012-09-20T13:57:59.817
> 
> 标签：c#, wpf, silverlight, z-index, frameworkelement

我在 silverlight 中有一个图像编辑器，允许用户在画布上添加、操作和删除图像和文本元素。我注意到有时添加新元素时它的行为似乎很奇怪，例如它们将被放置在现有元素的后面。下面是添加图像元素的代码，以及它调用的 order elements 方法。我从其他人那里继承了这段代码，所以有时我无法理解他的意图。该代码似乎没有做它应该做的事情。

有人可以建议一种更好的方法来为我添加的元素分配 Z-Index 值吗？

我的工作区画布的 XAML -

```
<Canvas x:Name="pnlCanvas" HorizontalAlignment="Center" VerticalAlignment="Center" Height="{Binding Path=CanvasHeight, Mode=OneWay,UpdateSourceTrigger=Default}"
                        Width="{Binding Path=CanvasWidth, Mode=OneWay, UpdateSourceTrigger=Default}" >
                    <ItemsControl ItemsSource="{Binding Path=Elements, Mode=OneWay}"  >
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <Canvas Background="{Binding Path=CanvasBackground, Mode=OneWay}"
                                    Height="{Binding Path=CanvasHeight, Mode=OneWay,UpdateSourceTrigger=Default}"
                                    Width="{Binding Path=CanvasWidth, Mode=OneWay, UpdateSourceTrigger=Default}" />
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                    </ItemsControl>
                </Canvas> 
```

添加图像元素 -

```
private void AddImageElement(object param)
    {
        bool? gotImage;
        string fileName;
        BitmapImage imageSource = GetImageFromLocalMachine(out gotImage, out fileName);
        OrderElements();

        if (gotImage == true)
        {
            Image image = new Image();
            image.Name = fileName;
            image.Source = imageSource;
            image.Height = imageSource.PixelHeight;
            image.Width = imageSource.PixelWidth;
            image.MaxHeight = imageSource.PixelHeight;
            image.MaxWidth = imageSource.PixelWidth;
            image.Cursor = Cursors.Hand;
            image.Tag = null;

            AddDraggingBehavior(image);
            image.MouseLeftButtonUp += element_MouseLeftButtonUp;

            this.Elements.Add(image);
            numberOfElements++;

            this.SelectedElement = image;
            this.SelectedImageElement = image;
        }
    } 
```

订单元素 -

```
private void OrderElements()
    {
        var elList = (from element in this.Elements
                      orderby element.GetValue(Canvas.ZIndexProperty)
                      select element).ToList<FrameworkElement>();

        for (int i = 0; i < elList.Count; i++)
        {
            FrameworkElement fe = elList[i];
            fe.SetValue(Canvas.ZIndexProperty, i);

        }

        this.Elements = new ObservableCollection<FrameworkElement>(elList);

    } 
```

一旦我解决了这个问题，我的最终意图是包含一个图层容器，比如在 Photoshop 等中，我将能够重新排序元素。希望有人可以帮助我朝那个方向前进。基本上我如何正确设置 Z-Index，因为我不认为这是这样做的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T15:42:28.620

An`ItemsControl`将每个元素包装在一个`<ContentPresenter>`标签中，因此尽管 ZIndex 已在您的元素上设置，但它不会被应用，因为`ZIndex`on`ContentPresenter`最重要

实际渲染的内容如下所示：

```
<Canvas>
    <ContentPresenter>
        <Image Canvas.ZIndex="0" />
    </ContentPresenter>
    <ContentPresenter>
        <Image Canvas.ZIndex="1" />
    </ContentPresenter>
    ...
</Canvas> 
```

要解决此问题，请在 中设置`ZIndex`，`ItemContainerStyle`以便将其应用于`ContentPresenter`而不是 UI 元素

```
<ItemsControl.ItemContainerStyle>
    <Style>
        <Setter Property="Canvas.ZIndex" Value="{Binding Canvas.ZIndex}" />
    </Style>
</ItemsControl.ItemContainerStyle> 
```

[有关详细信息，请参阅我关于 WPF 的 ItemsControl 的博客文章](https://rachel53461.wordpress.com/2011/09/17/wpf-itemscontrol-example/)的底部部分

**编辑：**

显然 Silverlight 没有`ItemsContainerStyle`用于`ItemsControl`.

`ContentPresenter`在这种情况下，只需为设置您的`Canvas.ZIndex`值的隐式样式`ItemsControl.Resources`

```
<ItemsControl.Resources>
    <Style TargetType="ContentPresenter">
        <Setter Property="Canvas.ZIndex" Value="{Binding Canvas.ZIndex}" />
    </Style>
</ItemsControl.Resources> 
```

# iphone - 以编程方式从 UIImagePickerController 保存一段视频

> ID：12514253
> 
> 赞同：0
> 
> 时间：2012-09-20T13:58:05.797
> 
> 标签：iphone, objective-c, video

我正在尝试研究如何以编程方式编辑从 UIImagePickerController 获取的视频数据。

在录制这段视频的过程中，我将聆听有趣的事件并记录它们的时间，然后当视频完成时，我希望能够在这些时间剪下 10 秒的剪辑并将它们保存为单独的视频。

您可以使用编辑控件来执行此操作，因此我认为它也可以通过编程方式进行。

到目前为止，我只有下面的代码获取视频数据，但我不确定如何继续。

```
-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {
NSString *type = [info objectForKey:UIImagePickerControllerMediaType];

[self dismissModalViewControllerAnimated:NO]; 

if ([type isEqualToString:(NSString *)kUTTypeVideo] || 
    [type isEqualToString:(NSString *)kUTTypeMovie]) { // movie != video
    NSURL *videoURL = [info objectForKey:UIImagePickerControllerMediaURL];
    NSData *videoData = [NSData dataWithContentsOfURL:videoURL];

} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T14:11:57.247

您可以使用[FFMPEG 库](https://github.com/jgh-/FFmpeg-for-iOS)将视频切成小块。

完美满足您的要求。

# visual-studio - 寻找代码来更新 SpreadsheetML 文档上的文本框（客户端使用 VB.Net，但我可以阅读和转换 C#）

> ID：12514262
> 
> 赞同：0
> 
> 时间：2012-09-20T13:58:34.167
> 
> 标签：visual-studio, ms-office, openxml-sdk

我有一个 2010 Excel 电子表格 (OpenXML)，上面有一个文本框“LengthVariableTextBox”。我希望使用带有 VB.Net（推荐）或 C# 的 openxml SDK 更改文本框值（当前为 @@.@ 只是一个占位符）。下面是来自 drawing7.xml 的 XML 片段，显示了文本框。

谢谢您的帮助！

M.斯科特·布莱洛克

```
 <xdr:twoCellAnchor>
     <xdr:from>
       <xdr:col>2</xdr:col>
       <xdr:colOff>502920</xdr:colOff>
       <xdr:row>8</xdr:row>
       <xdr:rowOff>45720</xdr:rowOff>
     </xdr:from>
     <xdr:to>
       <xdr:col>3</xdr:col>
       <xdr:colOff>510540</xdr:colOff>
       <xdr:row>9</xdr:row>
       <xdr:rowOff>76200</xdr:rowOff>
     </xdr:to>
     <xdr:sp macro="" textlink="">
       <xdr:nvSpPr>
         <xdr:cNvPr id="287" name="3:24 PM 9/19/2012" />
         <xdr:cNvSpPr txBox="1" />
       </xdr:nvSpPr>
       <xdr:spPr>
         <a:xfrm>
           <a:off x="1722120" y="1386840" />
           <a:ext cx="617220" cy="198120" />
         </a:xfrm>
         <a:prstGeom prst="rect">
           <a:avLst />
         </a:prstGeom>
         <a:solidFill>
           <a:schemeClr val="tx1" />
         </a:solidFill>
         <a:ln w="9525" cmpd="sng">
           <a:solidFill>
             <a:schemeClr val="lt1">
               <a:shade val="50000" />
             </a:schemeClr>
           </a:solidFill>
         </a:ln>
       </xdr:spPr>
       <xdr:style>
         <a:lnRef idx="0">
           <a:scrgbClr r="0" g="0" b="0" />
         </a:lnRef>
         <a:fillRef idx="0">
           <a:scrgbClr r="0" g="0" b="0" />
         </a:fillRef>
         <a:effectRef idx="0">
           <a:scrgbClr r="0" g="0" b="0" />
         </a:effectRef>
         <a:fontRef idx="minor">
           <a:schemeClr val="dk1" />
         </a:fontRef>
       </xdr:style>
       <xdr:txBody>
         <a:bodyPr vertOverflow="clip" wrap="square" rtlCol="0" anchor="t" />
         <a:lstStyle />
         <a:p>
           <a:r>
             <a:rPr lang="en-US" sz="1100">
               <a:solidFill>
                 <a:schemeClr val="bg1" />
               </a:solidFill>
             </a:rPr>
             <a:t>@@.@</a:t>
           </a:r>
         </a:p>
       </xdr:txBody>
     </xdr:sp>
     <xdr:clientData />
   </xdr:twoCellAnchor> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T11:52:10.743

这是答案：

[http://social.msdn.microsoft.com/Forums/en-US/oxmlsdk/thread/3eb9075a-de13-4f4a-a83d-c42cdb6b8e98](http://social.msdn.microsoft.com/Forums/en-US/oxmlsdk/thread/3eb9075a-de13-4f4a-a83d-c42cdb6b8e98)

# javascript - 如果您不知道元素的 id 或类，如何查找/调试所有 jQuery 事件绑定的列表

> ID：12514263
> 
> 赞同：1
> 
> 时间：2012-09-20T13:58:35.137
> 
> 标签：javascript, click, jquery

[我使用click()](http://api.jquery.com/click/) -函数动态添加了 jQuery 点击事件：

```
$("#elementId").click(function() {
    debugger;
    //Some code
}); 
```

我意识到您可以使用[data 属性](http://api.jquery.com/jQuery.data/)找到事件：

```
$('#elementId').data("events"); 
```

但是，如果您想动态地找到它们（如果有的话）怎么办？例如

```
<div id="containerWithComplexStructure">
    //Some elements with .click events may be in here
</div> 
```

如果您**不知道他们的 id 或 class** ，您如何找到他们？

您可以通过[Chrome 开发者工具](https://developers.google.com/chrome-developer-tools/docs/overview)框架（或类似工具）访问它们，能够浏览它们的变量等吗？

与此类似（点击图片放大）：

[Chrome 开发者工具视图，在断点处停止 http://imageshack.us/a/img138/1209/findclickfunction.png](http://imageshack.us/a/img138/1209/findclickfunction.png)

> 对于单个已知元素，请参阅：[如何使用 Firebug（或类似工具）调试 JavaScript/jQuery 事件绑定](https://stackoverflow.com/questions/570960/how-to-debug-javascript-jquery-event-bindings-with-firebug-or-similar-tool)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T14:01:07.993

简单，`console.log( jQuery('#elementId').data('events') );`在您的代码中；

或者只是`jQuery('#elementId').data('events');`在控制台中。

查看所有元素的事件：

```
var elements_with_events = 0;
$('*').each(function(i,e){

    if($(e).data('events')){
        console.log( $(e) );
        console.log( $(e).data('events') );
        elements_with_events++;
    }

});
console.log( elements_with_events + ' elements have events.' ); 
```

~~...并等待崩溃。~~实际上，这工作得非常快。

您也可以在附加事件时添加一个类。那么你不是在搜索每个说的事件而是类。

# sql - SQL如何知道列的数据类型

> ID：12514265
> 
> 赞同：0
> 
> 时间：2012-09-20T13:58:42.050
> 
> 标签：sql, sql-server-2008, ms-access

我正在使用 MS Access 和 MS Sql 2008，我需要获取单个表中特定列的 DataType。

你能发布一个代码示例吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T14:00:13.267

尝试这个：

```
SELECT
  COLUMN_NAME, DATA_TYPE, CHARACTER_MAXIMUM_LENGTH
FROM INFORMATION_SCHEMA.COLUMNS
WHERE TABLE_SCHEMA = 'schema'
  AND TABLE_NAME = 'tablename'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T17:10:54.987

我假设您希望以编程方式获取**MS Access DB**的架构元数据，因为 SQL Server 还有其他答案。不幸的是，MS Access 不提供`information_schema`直接查询的视图目录（或任何真实模拟），因此您可能必须尝试以下方法之一：

*   在 SQL Server 中创建一个链接服务器到您的 Access DB，并[通过该](http://www.aspfree.com/c/a/Microsoft-Access/Configuring-a-Linked-Microsoft-Access-Server-on-SQL-2005-Server/).

*   在您的应用程序中使用类似的东西[`GetOleDbSchemaTable`](http://support.microsoft.com/kb/309488)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T14:09:11.473

您还可以使用目录视图：

```
SELECT  sch.name [Schema],
        tbl.name [Table],
        col.name [Column],
        typ.name [Type]
FROM    sys.columns col
JOIN    sys.tables tbl ON 
        tbl.object_id = col.object_id
AND     tbl.name = 'tableName'
JOIN    sys.schemas sch ON
        sch.schema_id = tbl.schema_id
AND     sch.name = 'schemaName'
JOIN    sys.types typ ON
        typ.system_type_id = col.system_type_id 
```

# javascript - Microsoft JScript 运行时错误：在 IE 9 中使用花式框时出现“数组”未定义错误

> ID：12514267
> 
> 赞同：1
> 
> 时间：2012-09-20T13:58:49.610
> 
> 标签：javascript, jquery, internet-explorer-9, fancybox

这是我的 HTML 代码：

```
 <a id="hidden_link" href="StatusNotification.aspx" class="statusNotification fancybox.iframe"></a> 
```

这是我的 jquery(fancybox) 代码

```
<script type="text/javascript" language="javascript">
$(document).ready(function() {
    $(".statusNotification").fancybox({
        helpers: {
            overlay: {
                closeClick: false
            },
            // prevents closing when clicking OUTSIDE fancybox
            title: {
                type: 'float'
            }
        },
        scrolling: 'no',
        //prevents scrolling
        width: 600
    })
    $('#hidden_link').fancybox().trigger('click');
});
</script> 
```

我在页面加载时调用了上面的脚本来显示一个花哨的框，但它没有显示，给出了错误：

```
Microsoft JScript runtime error: 'Array' is undefined** in IE 9 
```

但它在 IE 7 和 IE 8 中运行良好。

有谁知道这个问题的解决方案？

**编辑：**仅当我尝试使用 JavaScript 触发它时才会发生此错误。如果我通过单击链接手动触发它，它工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T14:18:14.393

您首先添加一个`fancybox()`to `$('.statusNotification')`，然后将其添加`$('#hidden_link')`到此示例中是同一件事。

将javascript更改为：

```
$(".statusNotification").fancybox({
  helpers   : { 
  overlay : {closeClick: false}, // prevents closing when clicking OUTSIDE fancybox 
  title :{ type : 'float'}
  },
  scrolling : 'no',  //prevents scrolling
  width : 600
})
$('#hidden_link').trigger('click');
​ 
```

这行得通，在这里试试：http: [//jsfiddle.net/J9uEV/](http://jsfiddle.net/J9uEV/)

# php - 不建议将计算从 MySQL 转移到 PHP？

> ID：12514268
> 
> 赞同：1
> 
> 时间：2012-09-20T13:58:54.167
> 
> 标签：php, mysql

我遇到了我之前问过的问题/问题 –[如何优化 AVG 查询的表？](https://stackoverflow.com/questions/12501622/how-to-optimise-a-table-for-avg-query)事实证明，@MichaelT 在一件事上是对的——使用 PHP 计算 AVG 比使用 MySQL 更快（比如使用 500 万条记录和 24 GB RAM 机器计算 AVG 速度快 80%）。

它并不总是一种选择。但是，请考虑此代码示例（数据集大小为 5m 条记录）。

**MySQL的方式。**

1）聚合数据（创建临时数据）（500ms）

```
CREATE TEMPORARY TABLE `temporary_grouped_data` AS
(
    SELECT
        `r1`.`id`,
        `c1`.`wt`,
        `c1`.`cpu`,
        `c1`.`mu`,
        `c1`.`pmu`
    FROM
        `requests` `r1`
    INNER JOIN
        `request_hosts` `rh1`
    ON
        `rh1`.`id` = `r1`.`request_host_id`
    INNER JOIN
        `request_uris` `ru1`
    ON
        `ru1`.`id` = `r1`.`request_uri_id`
    INNER JOIN
        `calls` `c1`
    ON
        `c1`.`id` = `r1`.`request_caller_id`
    WHERE
        1=1 {$sql_query['where']}
); 
```

2) 获得整体 AVG (300ms)

```
SELECT COUNT(`id`), MIN(`wt`), MAX(`wt`), AVG(`wt`), MIN(`cpu`), MAX(`cpu`), AVG(`cpu`), MIN(`mu`), MAX(`mu`), AVG(`mu`), MIN(`pmu`), MAX(`pmu`), AVG(`pmu`) FROM `temporary_grouped_data`; 
```

3) 计算第 95 个百分位数 (200ms)

```
SELECT `wt` FROM `temporary_grouped_data` ORDER BY `wt` ASC LIMIT 1726, 1;
SELECT `cpu` FROM `temporary_grouped_data` ORDER BY `cpu` ASC LIMIT 1726, 1;
SELECT `mu` FROM `temporary_grouped_data` ORDER BY `mu` ASC LIMIT 1726, 1;
SELECT `pmu` FROM `temporary_grouped_data` ORDER BY `pmu` ASC LIMIT 1726, 1; 
```

4）计算模式（200ms）

```
SELECT `wt`, COUNT(`wt`) `quantity` FROM `temporary_grouped_data` GROUP BY `wt` ORDER BY `quantity` DESC LIMIT 1;
SELECT `cpu`, COUNT(`cpu`) `quantity` FROM `temporary_grouped_data` GROUP BY `cpu` ORDER BY `quantity` DESC LIMIT 1;
SELECT `mu`, COUNT(`mu`) `quantity` FROM `temporary_grouped_data` GROUP BY `mu` ORDER BY `quantity` DESC LIMIT 1;
SELECT `pmu`, COUNT(`pmu`) `quantity` FROM `temporary_grouped_data` GROUP BY `pmu` ORDER BY `quantity` DESC LIMIT 1 
```

**PHP方式。**

1）将所有相关记录放入一个数组中（200ms）。

```
SELECT
    `r1`.`id`,
    `c1`.`wt`,
    `c1`.`cpu`,
    `c1`.`mu`,
    `c1`.`pmu`
FROM
    `requests` `r1`
INNER JOIN
    `request_hosts` `rh1`
ON
    `rh1`.`id` = `r1`.`request_host_id`
INNER JOIN
    `request_uris` `ru1`
ON
    `ru1`.`id` = `r1`.`request_uri_id`
INNER JOIN
    `calls` `c1`
ON
    `c1`.`id` = `r1`.`request_caller_id` 
```

2) 执行所有计算（200 毫秒）。

PHP 方法要快得多。我有什么理由不应该使用 PHP 来执行这些计算？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T14:02:22.110

将工作转移到 PHP 意味着必须通过网络传输整个结果集，这可能会非常糟糕，具体取决于大小。此外，无论如何，我都不是数据库人，但这些结果是出乎意料的。您应该调查您在数据库版本中以错误方式做事的可能性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T14:06:59.747

速度不是一切。我会把它放在它所属的地方。

它会在 PHP 中扩展吗？同样使用 PHP 方法，您必须将所有数据从 db 传输到 php。它需要多少 RAM，等等。也许您的数据库没有得到很好的优化。您的数据库的磁盘可能是坏的，等等。说真的，我会把它留在数据库中并检查它为什么表现如此糟糕。

# date - 在 GNU Octave 中，获取日期和时间

> ID：12514269
> 
> 赞同：4
> 
> 时间：2012-09-20T13:58:57.463
> 
> 标签：date, time, octave

我想在 GNU Octave 中获取日期和时间并将其打印到屏幕上。做这个的最好方式是什么？

我检查了 Octave 文档，但没有看到使用单行简单命令打印出 YYYY-MM-DD HH:MM:SS 的功能。我可以做到，只需要 2 或 3 行来组装它。如何将八度音阶中的 yyyy-mm-dd hh:mm:ss 作为字符串？

[http://www.gnu.org/software/octave/doc/interpreter/Timing-Utilities.html](http://www.gnu.org/software/octave/doc/interpreter/Timing-Utilities.html)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T13:58:57.463

## 回顾所有在 Octave 中获得时间的方法：

**1.时间命令：**

```
time ()

ans = 1.3482e+09 
```

一个数字，它是当前时间，表示自纪元以来的秒数。纪元参考 1970 年 1 月 1 日 00:00:00 CUT（协调世界时）。

**2.时钟命令：**

```
clock 
```

它以矩阵格式返回日期 2012-09-20 21:46:12：

```
2012.0000      9.0000     20.0000     21.0000     46.0000     12.2778 
```

**3.日期命令：**

```
date ()

ans = 20-Sep-2012 
```

**4\. strftime(fmt, tm_struct) 命令**

```
strftime ("%r (%Z) %A %e %B %Y", localtime (time ()))

ans = 09:52:42 PM (EDT) Thursday 20 September 2012 
```

**5.使用strftime获取yyyy-mm-dd hh:mm:ss格式**

```
strftime ("%Y-%m-%d %H:%M:%S", localtime (time ()))

ans = 2012-09-20 21:56:07 
```

有关 strftime 格式修饰符 ( `%r`, `%Z`...) 的描述，请参见：

[https://octave.sourceforge.io/octave/function/strftime.html](https://octave.sourceforge.io/octave/function/strftime.html)

# sencha-touch-2 - 记住登录 Sencha 2 应用程序

> ID：12514272
> 
> 赞同：0
> 
> 时间：2012-09-20T13:59:28.990
> 
> 标签：sencha-touch-2

我们不希望用户每次打开我们的 Sencha 2 应用程序时都登录。目前还没有确定我们是通过 Web 浏览器提供它还是使用 Sencha 构建工具将其打包为原生应用程序。

任何建议如何解决它？我是否应该使用一些本地存储来记住用户是否已登录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T17:42:40.643

我在[github](https://github.com/olegtaranenko/sencha-touch-2-login)上创建了一个 Simple Login 项目来说明我如何在凭证保存中使用 localStorage。随意在您的项目中使用想法。欢迎反馈和评论

干杯，奥列格

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-24T04:25:00.717

在这里，我将使用 'ext-record-2' 的 id 保存用户名和密码值。

```
if (values.keepUser) {
    var user = Ext.create('MyApp.model.LoginLocalSave', {
        id: 'ext-record-2',
        uemail: values.uname,
        pword: values.pword,
        isRemember: values.keepUser
    });
    user.save();
} 
```

在启动登录屏幕时，我们需要使用先前保存的 id 'ext-record-2' 从本地存储中读取用户名和密码字段并将其显示在字段上。

```
launch: function() {
    var User = Ext.ModelMgr.getModel('MyApp.model.LoginLocalSave');
    User.load('ext-record-2', {
        success: function(user) {
            Ext.ComponentQuery.query('formpanel #uname')[0].setValue(user.get('uemail'));
            Ext.ComponentQuery.query('formpanel #pword')[0].setValue(user.get('pword'));
            Ext.ComponentQuery.query('formpanel #keepUser')[0].setValue(user.get('isRemember'));
        },
        failure: function() {
            console.warn('Auto-fill login failed.');
        }
    });
}, 
```

请通过单击链接访问以下 URL 以获取完整的源代码。[通过解决方案解决]

[http://saravanakumar.org/blog/2014/04/login-screen-with-username-and-password-remember-in-sencha-touch/](http://saravanakumar.org/blog/2014/04/login-screen-with-username-and-password-remember-in-sencha-touch/)

# blackberry-10 - 黑莓10应用安装

> ID：12514277
> 
> 赞同：2
> 
> 时间：2012-09-20T14:00:03.140
> 
> 标签：blackberry-10

嗨朋友们，我是 blackberry10 开发的新手。我正在使用 HTML 5 开发应用程序。我可以在 Ripple Emulator 中运行该应用程序。有了这个，我创建了 bar 文件。但是我怎样才能将此应用程序安装到我的设备中。当我用命令提示符尝试这个时，它显示错误为

```
Info: Sending request: Install and Launch
Info: Action: Install and Launch
Info: File size: 1118370
Info: Installing sampleapp.testRel_sampleapp__42572c37...
Info: Processing 1118370 bytes
actual_dname::
actual_id::
actual_version::
result::failure 881 required signatures missing (RDK, AUTHOR) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T21:24:41.193

我想您已经设置了签名密钥，因为您拥有 Dev Alpha。

创建一个调试令牌

```
blackberry-debugtokenrequest -storepass *yourkeypass* -devicepin *yourpin* d:\*yourfile*.bar 
```

将其上传到设备

```
blackberry-deploy -installDebugToken d:\*yourfile*.bar -device *yourdeviceip* -password *yourdevicepass* 
```

在此之后，将您的文件 .bar 与*bbwp*一起放在主 sdk 文件夹中，并将其重命名为**debugtoken.bar**

**启用远程 Web 调试**，现在它可以工作了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:16:45.440

当我编写我的第一个 WebWorks 应用程序时，我也遇到了同样的问题。按照指南中的所有说明进行操作，仍然遇到同样的问题。看起来该应用程序未在调试模式下部署/启动。

所以这是我的解决方案：

在 Ripple 的右侧，有“构建”选项卡（或工具箱） - 选择“设置”。将弹出一个对话框。选中复选框“启用远程 Web 检查器”并关闭对话框。

现在只需点击“打包和启动”按钮。

应该管用。

# entity-framework - 发布 Web 对话框未将我的实体框架 5 上下文检测为代码优先

> ID：12514281
> 
> 赞同：8
> 
> 时间：2012-09-20T14:00:16.350
> 
> 标签：entity-framework, deployment, ef-code-first, entity-framework-5, entity-framework-migrations

我最近将使用实体框架的 WFC 项目从 v4.3.1 升级到 5.0。
我只运行编码迁移（没有自动迁移）。

以前，我使用发布配置文件来部署此解决方案并应用迁移。由于将项目升级到 EF5，迁移部分不再起作用，并且发布对话框未检测到上下文具有代码优先迁移。

具体来说，该`.pubxml`文件从检测我的上下文`<Object Type="DbCodeFirst">`到`<Object type="DbDacFx">`哪个不适合我的上下文发生了变化。

作为一种解决方法，我已将`<entityFramework>`数据库初始化程序配置手动添加到我的 web.config 转换中，但我想了解为什么发布配置文件不起作用。那是一个更好的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-03-12T08:02:24.257

当合并另一个开发人员的提交并触发 Visual Studio 项目重新加载时，它曾经发生在我身上。这就是它导致“DbCodeFirst”到“DbDacFx”变化的原因。

如果我重新启动 Visual Studio，那么一切都会恢复到应有的状态。

只是另一个想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T06:52:21.323

您可能错过了将 EntityFramework 的引用添加到您的项目中。通过添加引用，您应该能够控制 DbCodeFirst 选项是否可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-17T18:19:18.380

正如[这篇文章所建议的那样](https://stackoverflow.com/questions/16543229/publish-entity-framework-code-first-migrations-with-no-context-in-the-startup-pr/16558527#16558527)，尝试使用 DbContext 的完全限定名称作为连接字符串的名称。代替：

**网页配置**

`<connectionStrings> <add name="MyContext" .../> </connectionStrings>`

利用：

**网页配置**

`<connectionStrings> <add name="MyNamespace.AnotherNamespace.MyContext" .../> </connectionStrings>`

就我而言，为了使用我现有的发布配置文件 (.pubxml)，我还必须手动编辑`<ObjectGroup Name="..." ...>`. 可能重新创建发布配置文件也可以。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-13T20:43:30.710

我有同样的问题，但不是在相同的背景下。

我一直在使用 EF 6.1.3 的现有 ASP.NET MVC 5.2.3 应用程序使用 Code First 迁移一个月，没有出现任何问题。在某个时间点，我添加了对 Windows Azure 存储的支持，但我犯了一些错误：

*   我添加了一个新项目。不幸的是，我选择了“控制台应用程序”而不是“类库”。我试图通过在“项目设置”中将其更改回“类库”来修复它
*   我使用 Nuget，`Install-Package WindowsAzure.Storage`但我将它安装在 MVC 项目上而不是类库上。我尝试通过`Uninstall-Package`在 MVC 项目上执行并将其安装到正确的项目来修复它
*   我将类库中的类称为“WorkOrderStorage”
*   我将 connectionString 添加到`<connectionStrings>`web.config 中的元素和 web.release.config 中的转换

我想我的项目现在处于不一致的状态。我注意到它会忘记 Code First 迁移（我监视了对 .pubxml 文件的更改）：

1.  当我在 MVC 项目和包含 WorkOrderStorage 类的库之间进行引用时
2.  当我在现有库之一中创建一个空的“WorkOrderStorage”类时

最后，我通过从头开始正确地重新创建这个库作为类库来修复它（因为观察 1）。我还将类命名为 WorkOrderRepository（因为观察 2）。

# wpf - DataGrid 行转换为具有空属性的对象

> ID：12514283
> 
> 赞同：0
> 
> 时间：2012-09-20T14:00:21.500
> 
> 标签：wpf, binding, datagrid

我有一个 DataGrid 绑定到一个名为 Quote 的对象

```
 <CollectionViewSource x:Key="cvs" Source="{Binding QuoteList}">
            <CollectionViewSource.SortDescriptions>
                <scm:SortDescription PropertyName="TimeStamp" Direction="Descending"/>
            </CollectionViewSource.SortDescriptions>
        </CollectionViewSource>

......

     <DataGrid ItemsSource="{Binding Source={StaticResource cvs}}" x:Name="MasterAllGrid" AutoGenerateColumns="False" 
            HeadersVisibility="All"  CanUserAddRows="False" 
                VerticalAlignment="Stretch" SelectionChanged="MasterAllGrid_SelectionChanged" VerticalScrollBarVisibility="Auto" >
            <DataGrid.Columns>
                <DataGridTextColumn Header="ticker" Binding="{Binding Path=Ticker}"/>
                <DataGridTextColumn Header="name" Binding="{Binding Path=ProductName}"/>
                <DataGridTextColumn Header="tenor" Binding="{Binding Path=Tenor}"/>
                <DataGridTextColumn Header="rating" Binding="{Binding Path=Rating}"/>
                <DataGridTextColumn Header="Bid Amount" Binding="{Binding Path=BidAmount}"/>
                <DataGridTextColumn Header="Bid Price" Binding="{Binding Path=BidPrice}"/>
                <DataGridTextColumn Header="Offer Price" Binding="{Binding Path=OfferPrice}"/>
                <DataGridTextColumn Header="Offer Amount" Binding="{Binding Path=OfferAmount}"/>
                <DataGridTextColumn Header="Price" Binding="{Binding Path=Price}"/>
                <DataGridTextColumn Header="Amount" Binding="{Binding Path=Amount}"/>
                <DataGridTextColumn Header="Direction" Binding="{Binding Path=Direction}"/>
                <DataGridTextColumn Header="Action" Binding="{Binding Path=Action}"/>
                <DataGridTextColumn Header="Time" Binding="{Binding Path=TimeStamp}"/>
                <DataGridTextColumn Header="Sender" Binding="{Binding Path=Sender.SuojiContactWrapper.SuojiContact.FullName}"/>
            </DataGrid.Columns>
        </DataGrid> 
```

我试图将选定的行回退到引用

```
Quote quote = (Quote)MasterAllGrid.SelectedItem; 
```

但是，似乎因为 Sender 我必须使用嵌套属性，

```
<DataGridTextColumn Header="Sender" Binding="{Binding Path=Sender.SuojiContactWrapper.SuojiContact.FullName}"/> 
```

强制转换在 Quote 对象中具有 Sender 属性为 Null。

我可以知道如何解决这个问题吗？

# asp.net-mvc-3 - 使用jquery网格实现动态列（来自数据表）？

> ID：12514284
> 
> 赞同：2
> 
> 时间：2012-09-20T14:00:21.497
> 
> 标签：asp.net-mvc-3

在看到我关于这个主题的问题/答案后，最后我决定提出这个问题，

1.  从控制器端，我返回一个具有动态列数的数据表（在设计时不修复，它将在运行时给出列）。
2.  想要将该数据表绑定到 jquery 网格。

请建议和帮助....

我检查了这个解决方案，但是如何使用 MVC？

[使用jqgrid加载数据后是否可以修改colModel？](https://stackoverflow.com/questions/5383847/is-it-possible-to-modify-the-colmodel-after-data-has-loaded-with-jqgrid/5408195#5408195)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T17:58:33.523

如果这能解决您的问题，请检查此项。这可能很慢，但它会起作用。

```
 @foreach (System.Data.DataRow row in Model.Table.Rows)
                                        {
                                            <tr>
                                            @foreach (System.Data.DataColumn col in Model.Table.Columns)
                                            {
                                                <td>
                                                    @Model.Table.Rows[row.Table.Rows.IndexOf(row)][col.ColumnName].ToString()
                                                </td>
                                            }
                                            </tr>
                                               } 
```

# json - 带有 JAXB 注释的 Spring 3.1.2 中的注册器 MappingJackson2HttpMessageConverter

> ID：12514285
> 
> 赞同：9
> 
> 时间：2012-09-20T14:00:35.023
> 
> 标签：json, spring, jaxb, mocking, jackson

我有许多带有 JAXB 注释的实体，我想使用消息转换器将它们转换为 JSON。

我知道我的读取 JAXB 注释的 ObjectMapper 有效：

```
String correctJsonText = jacksonObjectMapper.writeValueAsString(entityWithJAXB); 
```

但是当我调用我的休息服务时，默认注册的 MappingJacksonHttpMessageConverter（未配置为读取 JAXB）似乎接管了 - 当 @XmlTransient 被忽略时，由于循环引用导致堆栈溢出......

如何配置 Spring 以使用 MappingJackson2HttpMessageConverter ？

**当前配置**

```
<mvc:annotation-driven>
    <mvc:message-converters register-defaults="false">
        <bean id="jacksonMessageConverter" class="org.springframework.http.converter.json.MappingJackson2HttpMessageConverter">
            <property name="objectMapper" ref="jacksonObjectMapper" />
            <property name="supportedMediaTypes">
                <list>
                    <bean class="org.springframework.http.MediaType">
                        <constructor-arg index="0" value="application" />
                        <constructor-arg index="1" value="json" />
                        <constructor-arg index="2" value="UTF-8" />
                    </bean>
                </list>
            </property>

        </bean>
    </mvc:message-converters>
</mvc:annotation-driven>

<bean id="jaxbAnnotationInspector" class="com.fasterxml.jackson.module.jaxb.JaxbAnnotationIntrospector" />

<bean id="jacksonObjectMapper" class="com.fasterxml.jackson.databind.ObjectMapper">
    <property name="annotationIntrospector" ref="jaxbAnnotationInspector" />
</bean> 
```

**休息服务**

```
@RequestMapping(value="/{id}", method=RequestMethod.GET, produces = "application/json;charset=UTF-8")
public @ResponseBody EntityWithJAXB readEntityWithJAXB(@PathVariable int id, Model model) {
    return entityService.getById(id);
} 
```

**依赖项**

```
<dependency>
    <groupId>com.fasterxml.jackson.core</groupId>
    <artifactId>jackson-core</artifactId>
    <version>2.0.5</version>
</dependency>
<dependency>
    <groupId>com.fasterxml.jackson.core</groupId>
    <artifactId>jackson-databind</artifactId>
    <version>2.0.5</version>
</dependency>
<dependency>
    <groupId>com.fasterxml.jackson.module</groupId>
    <artifactId>jackson-module-jaxb-annotations</artifactId>
    <version>2.0.5</version>
</dependency> 
```

**更新/解决方案**

通过调试我的上下文，我可以看到配置`<mvc:annotation-driven>`无效。

事实证明，我使用 MockMcv 进行的单元测试总是加载默认的处理程序适配器，因此忽略了我的自定义对象映射器。由于方便，我只使用 junit test 测试了控制器，因为它很好地击中了控制器，我不认为这是一个可能的错误原因......

我还没有找到测试的修复方法，但是当我使用 curl 调用服务时，一切正常！

**更新/最终解决方案**

刚刚为我的测试设置找到了解决方案；使用 MockMvc (spring-test-mvc) 时，您必须明确指定自定义消息转换器：

```
private MockMvc mockMvc;

@Autowired
private MappingJackson2HttpMessageConverter jacksonMessageConverter;

@Autowired
private RestController restController;

@Before
public void initMockMvc(){
    mockMvc = MockMvcBuilders.standaloneSetup(restController)
            .setMessageConverters(jacksonMessageConverter).build();
} 

@Test
public void testRestController() throws Exception{
    DefaultRequestBuilder requestBuilder = MockMvcRequestBuilders.get("/json/42");
    this.mockMvc.perform(requestBuilder).andDo(print()).andExpect(status().isOk());
} 
```

唯一剩下的问题是在`jacksonMessageConverter`解决以下 JIRA 之前无法直接自动装配：[https](https://jira.springsource.org/browse/SPR-9469) ://jira.springsource.org/browse/SPR-9469 。在那之前，我刚刚在我的测试上下文中创建了 jacksonMessageConverter 的副本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T22:19:59.177

我复制了您的配置，它非常适合我。默认消息转换器不应生效，因为您已明确指定该`register-defaults=false`属性。这就是我的 @XmlTransient 注释的外观：

```
@XmlAccessorType(XmlAccessType.FIELD)
public class EntityWithJAXB {

    @XmlTransient
    private EntityWithJAXB aChild; 
```

# ruby-on-rails - 如何在 Ruby on Rails 3 中通过 Ajax 更新总和？

> ID：12514288
> 
> 赞同：0
> 
> 时间：2012-09-20T14:00:54.320
> 
> 标签：ruby-on-rails, ruby, jquery

我正在构建一个 Invoicing 应用程序，其中**Invoice**可以有各种**Items**。

在发票视图中，每个项目都有这样的一行：

```
<%= f.text_field :price %>
<%= f.text_field :quantity %> 
```

可以使用 Ajax 将新项目添加到发票中，即无需重新提交页面。

这工作得很好。

不过，如果所有项目的**总数**也可以通过 Ajax 更新，而用户不必每次都重新提交页面，那就太好了。

谁能告诉我如何做到这一点？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T16:04:23.807

这取决于您现有的代码。您是否以 JSON 格式提交/接收数据？尝试使用某种客户端处理（纯 javascript、jQuery 或其他框架）。

`:remote`或者您使用带有 js.erb 模板的更传统的 Rails表单？如果是这样，您可以在 create.js.erb 中更新发票总额。类似的东西（我假设发票总额用 id="total" 的标签包装，项目属于发票，发票有总计字段）

```
... # your current code
$("#total").update("<%= escape_javascript(@item.invoice.total)%>"); 
```

删除和更新操作相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T14:02:36.457

您应该考虑使用某种前端 MVC 或 MVVM 框架来处理这个问题。看一下knockoutjs：

> 通过应用模型-视图-视图模型 (MVVM) 模式来简化动态 JavaScript UI

[http://learn.knockoutjs.com/#/?tutorial=collections](http://learn.knockoutjs.com/#/?tutorial=collections) **<-- 本教程几乎准确地展示了您所追求的。**

基本上，您将设置一个 viewModel 来表示您的视图，该视图将具有一组行条目，这将是“可观察的”，这意味着无论何时更改（添加到或从中删除）您对它的绑定都会更新. 例如，它可以是与每个行项目绑定的 with 。

然后你可以有一个计算出的 observable 会自动更新

# javascript - Javascript数组索引错误

> ID：12514295
> 
> 赞同：0
> 
> 时间：2012-09-20T14:01:14.353
> 
> 标签：javascript, multidimensional-array, menuitem

我正在尝试访问一个简单的嵌套数组，这样做：

```
var currMenu = 1;
    while ( currMenu < menu.length ) {
        alert(currMenu);
        alert(menu[0][currMenu].text);
        currMenu++;
} 
```

尽管警报抛出了正确的值，但我在 firebug 上收到此错误：TypeError: menu[0][currMenu] is undefined。

怎么了？

谢谢！

编辑：对不起，我很着急，这里有“菜单”结构：

```
menu[0] = new Array();
menu[0][0] = new Menu(false, '', 15, 50, 20, '','' , 'navlink', 'navlink');
menu[0][1] = new Item('someText', '#', '', 100, 10, 1); 
```

和对象项目：

```
function Item(text, href, frame, length, spacing, target) {
    this.text = text;
    if (href == '#') {
        this.href = '#';
    } else if (href.indexOf('http') == 0) {
        this.href = href;
    } else this.href = href;
    this.frame = frame;
    this.length = length;
    this.spacing = spacing;
    this.target = target;
    // Reference to the object's style properties (set later).
    this.ref = null;
    this.showLoadingBar = false;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T14:02:35.450

假设您的菜单与 一致`[0][currMenu]`，您应该像这样访问它：

```
while ( currMenu < menu[0].length ) {
    alert(currMenu);
    alert(menu[0][currMenu].text); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T14:02:46.323

您正在查看“菜单”数组的长度，但您正在*访问*该数组的第零个索引处的数组（可能是也可能不是数组；我无法从代码中看出你的意思）已发布）。

# c# - WCF服务：返回后执行工作

> ID：12514308
> 
> 赞同：4
> 
> 时间：2012-09-20T14:02:10.187
> 
> 标签：c#, wcf, web-services

我目前正在开发的 WCF 服务中有一个方法，我想在将结果返回给用户后做一些工作。

该服务的用户正在发送我们存储在数据库中的“项目”，然后通过调用其他服务和其他可能需要大量时间（几分钟）的东西来处理。问题是用户真的只需要知道项目的数据库ID。

所以我不希望用户等待所有这些事情都完成。在我这样返回之前启动 System.Threading.Tasks.Task 来执行这样的繁重工作是否是一个合理的解决方案：

```
int id = InsertIntoDB(item);
Task.Factory.StartNew(() => HeavyProcessing());
return id; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T14:10:47.530

当然，这个选项很好。你有什么问题吗？

另一种选择是简单地在客户端进行异步调用，然后服务器实现也可以是同步的，但这取决于您的场景 - 此选项实现起来更简单（无异步），但它可能会使服务器命中一些使用配额（例如最大并发客户端）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T14:30:32.567

成功完成这项任务有多重要？IIS 托管的 WCF 服务可能会被 IIS 主动终止，在这种情况下，后台线程可以在执行过程中停止。如果这是一个问题，您最好在消息队列中对操作进行排队，并让 Windows 服务在它可用时接收它。在这种情况下，Windows 服务更加可靠。

# php - 删除字符串 PHP 中特定符号之前的所有内容

> ID：12514311
> 
> 赞同：1
> 
> 时间：2012-09-20T14:02:20.437
> 
> 标签：php, preg-replace

例如我有字符串`one two three four five`，我想删除之前`two`和之后的所有字符，我知道这是函数`preg_replace()`，但我不知道如何写这个表达式，我不知道是什么意思，例如 '/([az])([ AZ])/' 请说出这个表达式的名称`$pattern`和含义

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T14:12:46.990

如果您正在寻找基于 preg_replace 的解决方案，那么这里是：

```
$str = 'one two three four five';
var_dump ( preg_replace('#^.*?(two.*?four).*$#i', '$1', $str) ); 
```

**扩展：** RegEx 用于`preg_replace`首先将文本匹配到您的起始文本`two`，然后匹配到您的结束文本`four`，最后用匹配的字符串替换它，从而丢弃之前`two`的所有文本和之后的所有文本`four`。请注意`.*?`使您的匹配不贪心。在此处阅读有关正则表达式的更多信息：[http ://www.regular-expressions.info/](http://www.regular-expressions.info/)

### 输出

```
string(14) "two three four" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T14:07:06.370

preg_replace 是一个接受[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)进行替换的函数。

您可以并且应该了解这些，因为它们非常强大，但它们对于您的问题并不是必不可少的。

您可以使用`strpos`和`substr`功能

`substr`接受要缩短的字符串、起始位置和字符数，然后返回缩短的字符串。

`strpos`接受一个要搜索的字符串和一个要搜索的字符串，并返回第一个字符串中第二个字符串的位置。

所以你可以这样使用它们：

```
$text = "one two three four five";
$locationOfTwo = strpos($text, "two"); //The location in the string of the substring "two" (in this case it's 4)
$locationOfFour =strpos($text, "four") + strlen("four"); //Added the length of the word to get to the end of it (In this case it will set the variable to 18).
$subString = subsstr($text, locationOfTwo, (locationOfFour-locationOfTwo)); 
```

# excel - 将 excel 测试导入 HP 质量中心

> ID：12514315
> 
> 赞同：2
> 
> 时间：2012-09-20T14:02:27.070
> 
> 标签：excel, hp-quality-center

我想在测试计划部分将我的 excel 文档上的测试导入 HP 质量中心。

我使用加载项 excel 插件导入测试，它工作正常，但 HPQC 中的“请求覆盖率”选项卡未填充。

我想用我的excel中名为“链接到req”的列来填充它。

我怎样才能做到这一点 ？

提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-28T11:04:10.967

您可以导入您可以使用 excel 执行的任何操作。剩下的事情在.net 中编写一个简单的程序来读取excel 并在HP 中进行操作（即添加req-test 链接）。在导入时无法添加附件时，我之前做过此类工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-20T20:07:01.517

QC 导出向导中的测试用例字段映射几乎是固定的。我不记得我们有一个用于需求链接的字段，但您可以仔细检查映射步骤中可用的字段列表。如果您找到这样的字段，您只需键入代表工作表中相应列的字母。否则恐怕您将不得不手动进行需求/测试用例映射。

# html - 网格中的 CSS 中心列表项

> ID：12514318
> 
> 赞同：1
> 
> 时间：2012-09-20T14:02:32.377
> 
> 标签：html, css, css-float

首先，我的 CSS 技能是……正在进行中的工作。但到目前为止，我已经成功地将一堆列表项排列在一个网格中。[http://jsfiddle.net/ashanova/Y4SR3/2/](http://jsfiddle.net/ashanova/Y4SR3/2/)

我现在想做的是将列表项居中。我试图替换`float`为，`inline`但它会导致每个项目的`width`and`height`崩溃。我还想在每个列表项中水平和垂直居中文本，理想情况下省略（不是单词）溢出文本。作为最后一个规范，如果可能的话，我只想将 CSS 修改为 the`ul`及其子项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T14:16:52.917

虽然当您处理多个父元素和子元素以及在 2 个轴上居中（/中间）时，语言有点不清楚，但我认为如果其他答案不是您想要的，您可能真的想要`display: table-cell`.

检查[这个小提琴](http://jsfiddle.net/crowjonah/Y4SR3/15/)。

如果你给你的`li`元素`display: table-cell`,`text-align: center`和`vertical-align: middle`，我认为文本会适当地安排自己。不幸的是，`table-cell` 元素不接受边距，所以我添加了一个 10px 的边框。

为了完成溢出文本的截断和椭圆的插入，您需要使用某种 javascript。

**更新**

通过许多其他答案和评论了解了更多关于您所追求的内容后，我在这里提出了一个更好的解决方案：http: [//jsfiddle.net/crowjonah/jx8sD/](http://jsfiddle.net/crowjonah/jx8sD/)

您需要做的是`<a class="list-item">`在元素内插入标签`li`，并使用以下 CSS：

```
.tile li {
    background-color: white;
    display: block;
    float: left;
    margin: 10px;
    overflow: hidden;
}
.tile li a.list-item{
    display: table-cell;
    vertical-align: middle;
    height: 75px;
    text-align: center;
    width:75px;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T14:05:25.520

`Text-align: center`将使您的列表项与中心对齐。`Vertical-align: text-top`将项目垂直对齐到中心。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T14:12:23.077

`vetical-align`在这种情况下实际上不会完成这项工作。我希望它是那么简单。

这篇文章将使您对问题有一些了解并帮助您解决它：

[了解垂直对齐，或“如何（不）垂直居中内容”](http://phrogz.net/CSS/vertical-align/index.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T14:16:53.733

这将做你想要的。内联块项目的边框很痛苦，所以我使用边框使其看起来正确。

```
.tile li {
    background-color: white;
    display:inline-block;
    border: 10px solid red;
    width: 75px;
    height: 75px;
    text-align:center;
    display:table-cell;
    vertical-align:middle;
    overflow: hidden;
} 
```

# android - 我应该把这个库放在我的 android 应用程序中的什么位置？

> ID：12514321
> 
> 赞同：0
> 
> 时间：2012-09-20T14:02:36.700
> 
> 标签：android, html, textview

我刚刚下载了这个库（[http://mathscribe.com/author/jqmath.html](http://mathscribe.com/author/jqmath.html)）来显示方程。现在我在一个 html 文档中有我的方程式。到现在为止还挺好。我的问题是：

1.  我可以在我的 android 应用程序的 textview 中加载该 html 文档吗？
2.  如果是这样，我必须将那些 html 文档和 jquery 库放在 eclipse 中的哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T14:07:32.227

您可以在 Android 应用程序中将 HTML 内容显示到 WebView 控件中。您可以将 html 文档放入应用程序资产中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T19:35:12.630

这个 tut 可能有用

[http://www.mobiledevelopersolutions.com/home/start/included-demo-apps](http://www.mobiledevelopersolutions.com/home/start/included-demo-apps)

你可能有类似的问题，所以考虑以下

[帮助在 Android WebView 中使用 JQuery](https://stackoverflow.com/questions/5422272/help-using-jquery-in-android-webview)

# jquery - 对话框定位。添加类？

> ID：12514330
> 
> 赞同：0
> 
> 时间：2012-09-20T14:03:06.663
> 
> 标签：jquery

可能是一个菜鸟问题......但我没有找到解决方案。

我有一个对话框...

```
 $("#dialogId").dialog({ position: ['top', 80] }); 
```

我有机会把这个职位放在一个班级吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T14:06:05.793

根据 jQuery UI[文档](http://jqueryui.com/demos/dialog/#option-dialogClass)，您可以使用以下`dialogClass`选项：

```
$("#dialogId" ).dialog({ dialogClass: "myClass" }); 
```

并在您`myClass`指定的位置..

```
.myClass { top: 80px } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T14:05:09.603

```
$("#dialogId").addClass("className"); 
```

并且在这个 className 中设置你想要的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T14:06:05.387

是的，它会是`.my_positioned_dialog { position:absolute; top:80px; }`

# php - 从 PHP 会话中获取数据

> ID：12514331
> 
> 赞同：2
> 
> 时间：2012-09-20T14:03:07.643
> 
> 标签：php, session

我创建了一个 php 会话并像这样分配了数据

```
session_start();
$_SESSION['desd']=$imgD; 
```

当我尝试在其他页面上检索它时，我什么也得不到。

这是我在第二页所做的，

```
session_start();
$_imgname = $_SESSION['desd']; 
```

怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T14:10:05.517

假设变量`$imgD`已定义，代码是有效的（`var_dump`这是检查这一点的一种方法，但`print`或者`echo`也可以工作）。

检查以确保在您的浏览器中启用了 cookie。

此外，请确保 session_start() 位于脚本顶部附近，它应该是每次发送给客户端的第一件事。

要测试会话，请使用以下代码创建“index.php”：

```
<?php
  session_start();  
  if(isset($_SESSION['views']))
      $_SESSION['views'] = $_SESSION['views']+ 1;
  else
      $_SESSION['views'] = 1;

  echo "views = " . $_SESSION['views']; 
?> 
```

重新加载页面几次，您应该会看到一个递增的数字。

在两个页面之间传递会话变量的示例如下：

**PageOne.php**

```
 <?php 
   session_start(); 

   // makes an array 
   $colors=array('red', 'yellow', 'blue'); 
   // adds it to our session 
   $_SESSION['color']=$colors; 
   $_SESSION['size']='small'; 
   $_SESSION['shape']='round'; 
   print "Done";
 ?> 
```

**PageTwo.php**

```
<?php 
 session_start(); 
 print_r ($_SESSION);
 echo "<p>";

 //echo a single entry from the array
 echo $_SESSION['color'][2];
?> 
```

为简单起见，将 PageOne.php 和 PageTwo.php 放在同一目录中。调用 PageOne.php，然后调用 PageTwo.php。

[也可以试试这里](http://www.tizag.com/phpT/phpsessions.php)、[这里](http://www.w3schools.com/php/php_sessions.asp)和[这里](http://php.about.com/od/advancedphp/ss/php_sessions.htm)的教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T14:13:32.863

如果您调用`session_start()`，服务器会从 cookie 中获取会话 ID。

cookie 可能有问题，因为代码是有效的。

# ruby-on-rails - “gem install bundler”不适用于在 Mac OS x 10.8.1 中包含 gemset(rvm) 的项目

> ID：12514335
> 
> 赞同：0
> 
> 时间：2012-09-20T14:03:15.173
> 
> 标签：ruby-on-rails, macos, rubygems, rvm

我的问题总结为以下几行：

```
Joses-MacBook-Pro:~ jose$ cd Estate/
Using /Users/jose/.rvm/gems/ruby-1.9.2-p290 with gemset realstate
Joses-MacBook-Pro:Estate jose$ bundle
ERROR: Gem bundler is not installed, run `gem install bundler` first.
Joses-MacBook-Pro:Estate jose$ gem install bundler
Successfully installed bundler-1.2.1
1 gem installed
Installing ri documentation for bundler-1.2.1...
Installing RDoc documentation for bundler-1.2.1...
Joses-MacBook-Pro:Estate jose$ bundle
ERROR: Gem bundler is not installed, run `gem install bundler` first.
Joses-MacBook-Pro:Estate jose$ 
```

这是我的 Gem Env 的输出：

```
RubyGems Environment:
  - RUBYGEMS VERSION: 1.8.24
  - RUBY VERSION: 1.9.3 (2012-04-20 patchlevel 194) [x86_64-darwin12.1.0]
  - INSTALLATION DIRECTORY: /Users/jose/.rvm/gems/ruby-1.9.3-p194
  - RUBY EXECUTABLE: /Users/jose/.rvm/rubies/ruby-1.9.3-p194/bin/ruby
  - EXECUTABLE DIRECTORY: /Users/jose/.rvm/gems/ruby-1.9.3-p194/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - x86_64-darwin-12
  - GEM PATHS:
     - /Users/jose/.rvm/gems/ruby-1.9.3-p194
     - /Users/jose/.rvm/gems/ruby-1.9.3-p194@global
  - GEM CONFIGURATION:
     - :update_sources => true
     - :verbose => true
     - :benchmark => false
     - :backtrace => false
     - :bulk_threshold => 1000
  - REMOTE SOURCES:
     - http://rubygems.org/ 
```

我试图通过使用我在这里看到的许多答案来解决这个问题，例如： [Ruby: "gem install bundler" not installed bundler](https://stackoverflow.com/questions/11296737/ruby-gem-install-bundler-not-installing-bundler)

但不幸的是，到目前为止我还没有解决这个问题，我希望有人能帮助我解决这个问题。我是 Mac OS X 新手。

提前致谢 ！

**编辑：**

*哪个捆绑包：*

```
Joses-MacBook-Pro:Estate jose$ which bundle
/Users/jose/.rvm/bin/bundle 
```

*$（哪个捆绑包）*

*哪个宝石等*

```
Joses-MacBook-Pro:Estate jose$ which gem || type gem | head -n 1
/Users/jose/.rvm/bin/gem
Joses-MacBook-ProEstate jose$ hash -r
Joses-MacBook-Pro:Estate jose$ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T14:47:53.497

你需要明确使用红宝石：

```
rvm use 1.9.3 
```

# bash - 使用 expect 来自动化管道命令

> ID：12514336
> 
> 赞同：2
> 
> 时间：2012-09-20T14:03:17.340
> 
> 标签：bash, automation, automated-tests, expect

我想`cat ~/.ssh/id_rsa.pub | ssh root@host 'cat >> .ssh/authorized_keys'`在`expect`. 使用`spawn`command 执行命令时，

```
spawn cat ~/.ssh/id_rsa.pub | ssh root@host 'cat >> .ssh/authorized_keys' 
```

它抛出错误消息，

```
cat |: No such file or directory
cat ssh: No such file or directory
... 
```

我应该如何产生管道命令？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T19:01:32.397

因为您想在技术上一次执行多个 shell 命令（并且 spawn 不处理管道 I/O），所以您需要将它们封装在脚本中，然后使用 spawn 执行脚本。

你想要的脚本已经作为 ssh-copy-id 存在，但是如果你想要一个精简的版本，你可以动态创建一个脚本文件，然后将它传递给期望 spawn：

```
cat > /tmp/sshkeycopy.sh <<MYEOF
cat ~/.ssh/id_rsa.pub | ssh user@host 'mkdir -p -m 600 ~/.ssh; cat >> ~/.ssh/authorized_keys'
MYEOF

chmod u+x /tmp/sshkeycopy.sh

expect -c "
spawn /tmp/sshkeycopy.sh
expect { ... }" 
```

在这个 bash 示例中，shell 将按预期处理管道，并且只是抛出密码提示以供期望处理。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T14:26:14.700

是否`spawn`处理输入重定向？

```
spawn ssh root@host "cat >> .ssh/authorized_keys" < ~/.ssh/id_rsa.pub 
```

如果您不`cat`使用`expect`.

编辑：在命令周围使用双引号`cat`，而不是单引号（经测试，这不起作用）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-12T23:14:29.743

您可以使用此模式：

```
spawn bash -c "cat MEH | ssh root@host 'cat >>HMM' " 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-08T20:59:16.027

这已经过测试并且可以在 Linux 上运行

```
#!/usr/bin/expect -f
set DOMAIN www.somedomain.tld
set TARFILE "[exec bash -c "echo $DOMAIN | cut -d'.' -f 1"].cert.tar"
puts "$TARFILE\r" 
```

# api - 在有争议的情况下选择合适的 HTTP 状态码还是引入子码？

> ID：12514338
> 
> 赞同：3
> 
> 时间：2012-09-20T14:03:18.347
> 
> 标签：api, http, rest, http-status-codes

我正在开发针对远程服务器运行的 iOS 应用程序，背后有另一个开发人员。我们正在编写的项目和 API 草案处于初始阶段。

我们面临的问题是我们对现有的 HTTP/REST 规范描述的常规状态代码数量不满意：在某些情况下，我们不确定要选择什么代码。

提供最少上下文的示例：

1.  服务器端验证错误。外汇。客户端验证没问题，但服务器 API 最近略有更改，因此服务器应该返回一些内容，表明这正是验证问题。

2.  尝试注册已存在的用户。SO主题没有提供任何精确的观点。

3.  用户已注册，并在未完成密码确认过程的情况下尝试登录。

我们在这里看到两种明显的方法：

1.  在找不到适当的常规状态代码的情况下使用 fx 400 错误。这将导致我们从 JSON 响应中解析错误文本消息。显然，这种方法会在客户端代码中引入多余的复杂性。

2.  创建我们自己的子代码系统并在我们的代码中依赖它。这涉及太多人为的惯例，这将导致我们变得过于固执和武断。

感觉这种情况的数量会增加，我们正在考虑在我们的服务器应该提供的 JSON 响应中引入自定义子代码（即选择第二种方法）。

我在这里问的是：

对于这些情况，推荐的方法、策略，甚至是胶水或技巧是什么？

不严格遵循状态代码的 REST/HTTP 约定有什么好处？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T15:28:49.100

对于验证问题，我使用 422 Unprocessable Entity (WebDAV; RFC 4918) 请求格式正确，但由于语义错误而无法遵循。这是因为请求失败不是因为语法错误，而是因为语义。

然后，为了进行交流，您只需要确定错误格式，因此对于情况 1，如果有必填字段，您可能会返回 422 和以下内容。

```
{
  "field": ["required"]
} 
```

我会将第二个视为验证问题，因为它实际上是用户名的验证问题，因此 422 如下所示。

```
{
  "username": ["conflict"]
} 
```

第三，我将其视为 403 Forbidden，因为传递授权标头将无济于事，并且将被禁止，直到他们执行除传递凭据之外的其他操作。

您可以执行类似[oauth2](http://tools.ietf.org/id/draft-ietf-oauth-v2-31.html#token-errors)的操作并返回一个人类可读的描述，一个人们可以对其进行编码的常量，进一步澄清错误和一个 uri 以获取更多信息。

```
{
  "error": "unfinished_registration",
  "error_description": "Must finish the user registration process", 
  "error_uri": "http://yourdocumentation.com"
} 
```

注意：您会发现人们不同意什么 http 代码映射到什么情况以及是否应该使用 422，因为它是 WebDAV 扩展的一部分，这很好，您可以做的*最*重要的事情是记录代码的含义和含义与他们的意思一致而不是完美。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T00:49:08.373

HTTP 中没有“子代码”之类的东西（Microsoft IIS 显然违反了规范，应该被鞭打）。

如果有合适的状态码，使用它；*不要*说“这个状态代码在我的应用程序中意味着那个”，因为那失去了通用状态代码的价值；您不妨设计自己的协议。

之后，如果您需要细化状态码的语义，请使用标题和/或正文。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T14:17:59.663

对于您描述的用例，您可以使用以下错误代码：

1) 400 错误请求

> 由于语法错误，服务器无法理解该请求。客户端不应该在没有修改的情况下重复请求。

2）409冲突

> 由于与资源的当前状态冲突，无法完成请求。仅在预期用户可能能够解决冲突并重新提交请求的情况下才允许使用此代码。响应正文应该包含足够的
> 
> 供用户识别冲突来源的信息。理想情况下，响应实体将包含足够的信息供用户或用户代理解决问题；但是，这可能是不可能的，也不是必需的。
> 
> 响应 PUT 请求时最有可能发生冲突。例如，如果正在使用版本控制并且被 PUT 的实体包含对资源的更改，这些更改与早期（第三方）请求所做的更改相冲突，则服务器可能会使用 409 响应来指示它无法完成请求. 在这种情况下，响应实体可能会以响应 Content-Type 定义的格式包含两个版本之间差异的列表。

3) 401 未授权

> 该请求需要用户身份验证。响应必须包含一个 WWW-Authenticate 头字段（第 14.47 节），其中包含适用于所请求资源的质询。客户端可以使用合适的授权头域重复请求（第 14.8 节）。如果请求已包含授权凭证，则 401 响应表示已拒绝对这些凭证的授权。如果 401 响应包含与先前响应相同的质询，并且用户代理已经尝试了至少一次身份验证，则应该向用户呈现响应中给出的实体，因为该实体可能包含相关的诊断信息。HTTP 访问身份验证在“HTTP 身份验证：基本和摘要式访问身份验证”[43] 中进行了说明。

对于您拥有的任何其他用例，它会有所不同。如果真的没有编码特定错误的标准方法，我可能会选择 2 号。

# javascript - Sitecore 做随机的事情

> ID：12514343
> 
> 赞同：0
> 
> 时间：2012-09-20T14:03:52.587
> 
> 标签：javascript, client, sitecore, sitecore6

我感觉我们的 Sitecore 安装与配置有问题，但我无法指出在哪里。在 Sitecore 客户端中，事情是随机发生的。例如 -

*   Sitecore 客户端中的点击没有任何作用。
*   如果我在打开日志查看器后注销然后重新登录，我只会看到日志查看器而没有其他选项。
*   单击链接将使我退出。
*   如果我已登录并且其他管理员尝试使用他/她的凭据登录，有时他们会看到我的凭据。
*   IE 8 连续抛出与“scWin”相关的 javascript 错误。

前 4 个在 firefox、chrome 和 IE 中是一致的。最后一个完全是 IE 事件。

IIS 重置修复了这些问题，但随后这些事件很快又开始发生。

我查看了日志文件，但在那里什么也没看到。我还能在这里做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T19:43:01.417

这听起来真的很奇怪。您确定您没有感染某种恶意软件或某种病毒吗？它是否发生在使用此解决方案的每台电脑上？

您可以尝试删除 Sitecore 文件并从安装 zip 复制新文件，看看是否能解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T20:18:11.630

这听起来确实很奇怪...我要做的第一件事是确保您完全按照 IE 设置指南进行操作，以确保不是您的浏览器导致问题。Javascript肯定是启用的，是吗？它发生在 Firefox 中的事实也意味着这可能不是真正的问题。Martijn 可能正在做某事……您是否尝试过完全使用另一台机器来访问该站点？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T19:33:43.740

结果是 .NET 缓存 - 部分 - 已打开并导致各种问题。我们删除了它，这一切都奏效了。

# php - Netbeans 7.2 中哪个模板用于新项目中的 index.php

> ID：12514344
> 
> 赞同：1
> 
> 时间：2012-09-20T14:03:51.963
> 
> 标签：php, netbeans, netbeans-7.2

当我新建一个PHP项目时，项目中默认生成文件index.php。

如果我更改新的网页 php 模板，下次创建新项目时 index.php 不会反映更改。但是其他新的网页php都可以。

index.php 有什么不同。

提前致谢。

# jms - ActiveMQ 中的路由

> ID：12514347
> 
> 赞同：5
> 
> 时间：2012-09-20T14:04:08.350
> 
> 标签：jms, activemq

我有以下情况：

生产者 P 生成消息，将它们全部发布到 AMQ 'A'（对于 'P' 是本地的）。

我是否可以将消息从 ActiveMQ A 路由到远程 Active MQ B 或 C？

基本上，我正在寻找“A”端配置中的过滤器来路由这些消息。

提前致谢， 马达夫

高拉夫

我的意思是我分别在位置 A、B 和 C 有 3 个 activeMQ 实例，我在位置 A 有一个生产者 bean 'P'，它在本地将消息放置在 AMQ 实例 @A 中，因为我减轻了连接维护的麻烦（减少）如果我要远程连接到 AMQ 实例 B 或 C，则“P”中的消息丢失概率。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T05:57:15.837

如果您想互连 3 个代理，那么只需从它们中创建一个[代理网络](http://activemq.apache.org/networks-of-brokers.html)……然后生产者和消费者可以连接到任何代理，并且消息可以根据需求流向适当的代理，等等。

否则，如果您想要更明确的控制，那么您可以使用[Camel](http://activemq.apache.org/enterprise-integration-patterns.html)使用单独的连接工厂等执行从 brokerA 队列到 broker B/C 队列的基本（或复杂）路由。

# c++ - 我们如何从 vs2010 hash_map 的 less 中受益？

> ID：12514352
> 
> 赞同：0
> 
> 时间：2012-09-20T14:04:27.653
> 
> 标签：c++, data-structures, stl

如果您不知道 vs2010 实际上需要总排序，请参阅[此内容，因此它需要较少的用户定义。](https://stackoverflow.com/questions/4018350/hash-map-why-it-defines-less-rather-than-equal-to)

一个答案说二进制搜索是可能的，但我不这么认为，这是因为

1.  ***哈希函数***应该是统一的，并且负载因子最好小于 1，这意味着，在大多数情况下，每个哈希槽一个元素。即不需要二分查找。
2.  ***显然***，由于定位合适，它会减慢插入速度。

哈希映射如何从这种设计中受益？我们如何利用这种设计？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T14:16:44.023

> 哈希函数应该是统一的，并且负载因子最好小于 1，这意味着，在大多数情况下，每个哈希槽一个元素。即不需要二分查找。

每个哈希槽最多不会有一个元素。一些存储桶将不得不保留多个密钥。除非输入仅来自预先确定的受限值集（即完美散列），否则散列函数将不得不处理比它可以产生的输出更多的输入。会有碰撞；这在像这个一样通用的实现中是不可避免的。然而，好的散列函数应该产生分布良好的散列，这使得每个散列槽的元素数量保持在较低水平。

> 显然，它会因为定位合适的位置而减慢插入速度。

假设一个好的散列函数和非退化输入（输入被设计成许多元素产生相同的散列），每个桶总是只有几个键。插入这样的二叉搜索树不会有那么大的成本，而且很少的成本可能会在其他地方带来好处（搜索可能比使用链表的实现更快）。并且在退化输入的情况下，哈希图会退化成二叉搜索树，这比简单的链表要好得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T14:11:53.487

您的问题在实践中基本上是无关紧要的，因为 C++ 现在提供`unordered_map`使用`Equal`谓词而不是小于比较器的等。

但是，考虑一个`hash_map<string, ...>`. 显然， 的值空间`string`大于 的`size_t`，因此对于任何散列函数，都会存在具有相同散列值的值，因此被放置在同一个桶中。在哈希表中的所有项目都放在同一个桶中的病态情况下，利用键之间的排序将提高访问、插入和删除的速度。

请注意，在有序列表（或二叉树）上的搜索是 O(log n) 而不是 O(n)。

# javascript - jQuery preventDefault - 无法正常工作

> ID：12514354
> 
> 赞同：3
> 
> 时间：2012-09-20T14:04:39.133
> 
> 标签：javascript, forms, jquery, placeholder

我正在尝试使用 preventDefault 以便在使用“帐号”作为输入值提交表单时不会发生任何事情。

对于我所做的所有阅读，我看不到问题所在。我怀疑我只是盯着它太久了，错过了一些非常明显的东西。帮我今天准时离开办公室！

这里的非工作代码示例：http: [//jsfiddle.net/sX52r/](http://jsfiddle.net/sX52r/)

**HTML**

```
<form action="/" id="AccSearch" method="post">                            

<input type="text" name="AccountNumber" ID="AccountNumber" class="lookup_field" value="Account number" onfocus="if(this.value=='Account number'){this.value=''}" 
onblur="if(this.value==''){this.value='Account number'}">

<input type="image" id="AccSearchSubmit" src="/Images/search.png" onmousedown="this.src='/Images/search_down.png'" onmouseup="this.src='/Images/search.png'" onmouseout="this.src='/Images/search.png'" alt="Submit" />

</form> 
```

**js**

```
$('#AccSearchSubmit').click(function (e) {
    if ($('#AccountNumber').val == 'Account number') {
        e.preventDefault();
        alert("BOING!");
    }
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T14:06:06.823

[`val`](http://api.jquery.com/val/)是一个函数，你应该调用它。

```
if ($('#AccountNumber').val() == 'Account number') { 
```

和[工作 jsFiddle](http://jsfiddle.net/bazmegakapa/sX52r/10/)。

建议：

*   [捕获表单的提交](http://api.jquery.com/submit/)事件可能是一个更好的主意，因为在文本输入中按 Enter 也会提交表单。

*   您应该使用`placeholder`HTML5 属性（所有现代浏览器都支持它），而不是这种“脆弱”的解决方案（使用所有丑陋、突兀的内联事件处理程序），并且对于旧浏览器，使用[Mathias Bynens 的 jquery-placeholder 之](https://github.com/mathiasbynens/jquery-placeholder)类的插件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-20T14:05:36.527

使用表单的提交事件。使用 click() - 您将不得不手动处理 enter 按键。

```
$('#AccSearch').submit(function (e) {
    if ($('#AccountNumber').val() == 'Account number') {
        e.preventDefault();
        alert("BOING!");
    }
}); 
```

你也错过了 .val() 之后的括号

[http://jsfiddle.net/sX52r/8/](http://jsfiddle.net/sX52r/8/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T14:09:35.623

`val`是 jQuery 对象的方法，而不是属性。改变这个：

```
if ($('#AccountNumber').val == 'Account number') { 
```

对此：

```
if ($('#AccountNumber').val() == 'Account number') {
//                         ^^ invoke the method 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T14:09:13.933

$('#AccountNumber').val 是函数指针。要使用该值，请像这样调用函数：

```
$('#AccountNumber').val(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T15:03:23.303

我只是想跟进这件事，因为我今天有一点空闲时间并设法改进了我的原始代码。

我发现在这种情况下使用 return false 实际上比 preventDefault 更合适。通过按 Enter 提交表单也存在问题，这取决于我正在使用的文本框的值。

无论如何，这是我的解决方案 - 结果也更轻了。

[http://jsfiddle.net/sX52r/22/](http://jsfiddle.net/sX52r/22/)

```
$('#AccSearch').submit(function () {
if ($('#AccountNumber').val() == 'Account number' || $('#AccountNumber').val() == '') {
alert("BOING!");            
return false;
}}); 
```

# c# - 从 C# 应用程序发送 Outlook 邮件项目

> ID：12514355
> 
> 赞同：-3
> 
> 时间：2012-09-20T14:04:42.597
> 
> 标签：c#, vba

在 VBA 中，我目前使用类似于以下的代码来创建和发送 Outlook 邮件项目：

```
Function example()

Dim OutAppl As Outlook.Application
Dim my_email As Outlook.MailItem

Set OutAppl = New Outlook.Application
Set my_email = OutAppl.CreateItem(olMailItem)

    With my_email

       .Importance = 2
       .To = "me@foo.com; "
       .Subject = "not so easy in C#"
       .BodyFormat = 2   'olFormatHTML
       .HTMLBody = "<P>" & _
                  "<BR>" & _
                  "<FONT face=""Lucida Sans Unicode"" size=2.5>" & _
                         "Hello SO" & _
                         "<BR>" & _
                         "</FONT>" & _
                         "</P>" & _
                   "</BODY></HTML>"           
       .Save
       .send
     End With

Set OutAppl = Nothing
Set my_email = Nothing

End Function 
```

我从哪里开始使用 C# 创建类似上面的东西？我可以参考类似于使用 excel 的 Outlook interops assemply 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T14:16:23.493

`Add Reference`为了直接回答您的问题，Outlook 互操作库只是 Visual Studio对话框中Excels 的一部分：

![参考](../Images/02ecc75255a73a7670df033d76c501af.png)

是的，它的工作方式与 Excel 相同，您实例化一个 Outlook 应用程序对象，然后或多或少地通过 Outlook 中的 VBA 执行任何操作，您可以通过在 .Net 中调用应用程序实例等效方法来执行此操作。

如果您希望我添加一些示例代码，只需发表评论，我会的，但正如 jrummell 所说，为什么不直接使用`System.Net.Mail`？

# php - PDO 和 MySQL '之间'

> ID：12514357
> 
> 赞同：7
> 
> 时间：2012-09-20T14:04:44.850
> 
> 标签：php, mysql, sql, pdo

我正在尝试让 PDO 与 MySQL 'between' 一起工作。下面是我的代码：

```
$DBH = new PDO("mysql:host=$host;dbname=$dbname", $user, $pass);  

$start_date = date('Y-m-d H:i:s', mktime(0, 0, 0, 11, 1, 2009));
$end_date = date('Y-m-d H:i:s', mktime(23, 59, 59, 11, 30, 2009));

$STH = $DBH->prepare("SELECT * FROM `table` WHERE `start_date` BETWEEN ':start_date' AND ':end_date'");
$STH->bindParam(':start_date', $start_date, PDO::PARAM_STR);
$STH->bindParam(':end_date', $end_date, PDO::PARAM_STR);
$STH->execute();
var_dump($row); 
```

返回的是一个值为“0”或“NULL”的数组。当我对结束日期进行硬编码时，它就像`start_date`设置为 -1 一样，重新调整了`end_date`. 那么，我在这里做错了什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-20T14:05:31.470

不要用单引号包裹这些值。

```
$STH = $DBH->prepare("SELECT * FROM `table` WHERE `start_date` BETWEEN :start_date AND :end_date"); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-20T14:05:32.650

不要在参数周围加上引号：

```
$STH = $DBH->prepare("SELECT * FROM `table` WHERE `start_date` BETWEEN :start_date AND :end_date"); 
```

# xml - Is it possible to flatten an XML Schema package in only one XSD file?

> ID：12514361
> 
> 赞同：5
> 
> 时间：2012-09-20T14:04:53.900
> 
> 标签：xml, xsd

I have an XSD package composed of two XSD files: let's say A.xsd and B.xsd. The schema A imports (not includes) the B schema. They have different namespaces.

I need to use those schema in a system that doesn't work well with `xsd:imports`.

Is it possible to flatten an XSD package in one and only one XSD file or is one XSD file per namespace the absolute minimum?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T00:21:31.117

Each `xs:schema` element contains declarations for just one target namespace. But nothing in the spec says that `xs:schema` has to be the root element of the XML document. In theory, therefore, you could just wrap both schema elements in a wrapper file; in practice, not all XSD validators will be happy with that as input.

[Later addition: since it seems to be a contentious point, perhaps I should say explicitly that I'm assuming that by "one XSD file" you mean one XML document, contained in a single file, containing the XSD. If you mean something else, please explain.]

You don't say what kind of problems you're having with imports, but one thing that may be worth trying is to remove the schema location information from the `xs:import` element in A.xsd (so the import just names the namespace involved, not the location of the schema document), and pass both A.xsd and B.xsd to the processor as run-time parameters. (Most though not all XSD processors allow you to specify at invocation time some schema documents for them to read. The order of the arguments can matter, so if it doesn't work the first time, try reversing the order.)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T14:54:41.890

No, it is not possible. You can only target one namespace per XSD. If anything, there's only one root xs:schema per XSD, with only one attribute (which is not a list) called targetNamespace.

# string - 如何使用 bteq 将字符串括在双引号中

> ID：12514363
> 
> 赞同：1
> 
> 时间：2012-09-20T14:04:58.190
> 
> 标签：string, export, teradata

我正在创建一个 CSV 文件，然后将其邮寄给用户组。在这个文件中有一个很长的 varchar() 列，其中包含合法的逗号。

不用说，这是抛弃 XLS 导入。

BTEQ 中有没有办法在字符串周围强制使用双引号？

我似乎无法使用“\”“打印它。还有其他选择吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T14:12:57.897

找到了。选择 ... '"' || field1 || '"' ... 从 ...

# python - 如何使用 python 解析文本区域中的 Xml 并返回 json？

> ID：12514364
> 
> 赞同：0
> 
> 时间：2012-09-20T14:04:58.237
> 
> 标签：python, json, xml-parsing, beautifulsoup

我正在使用 BeautifulSoup 在网页上提交表单。该页面在类似于以下的文本区域中返回 Xml 结果：

```
<textarea name='xmlresults' rows='40' cols='150'>
 <?xml version="1.0" encoding="UTF-8"?>
 <companies>
   <company name=”Acme Corp” timestamp="2012-09-04 02:49:39">
     <officers>
       <officer name=”John Doe” position=”CEO” />
     </officers>
   </company>
 </companies>
</textarea> 
```

我想使用 python 解析结果并返回一个 json 结果。我正在寻找有关处理此问题的最佳方法的一些指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T14:25:45.880

您可以尝试[xmltodict](https://github.com/martinblech/xmltodict)：

```
import xmltodict
import json

json.dumps(xmltodict.parase(txt)) 
```

但首先您需要按顺序放置引号（xml 中有两种类型的双引号）并删除带有 xml 版本的行（我认为您在 json 结果中不需要这个）。

# c# - 将月份名称作为参数传递给水晶报表？

> ID：12514367
> 
> 赞同：0
> 
> 时间：2012-09-20T14:05:11.317
> 
> 标签：c#, crystal-reports, parameter-passing

我正在制作一份报告，我必须按月显示记录，我使用了一个带有月份名称的下拉列表和另一个带有年份列表的下拉列表。我使用了记录上的选择公式：

```
{daily.date} >= cdate(year(currentdate),(Month ({?startdate})),1)
and
{daily.date} < dateserial(year(currentdate),(Month ({?startdate}))+1,1) 
```

如何将月份和年份的名称作为参数传递给报告，以便可以查看该月份和年份的报告...如果我选择 1 月和 2012 年，那么我应该能够查看 2012 年 1 月的记录在我的报告中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T14:09:43.970

请记住，您需要传入适合计算机当前区域设置的月份名称；传递“三月”可能在我所在的地方有效，但在其他国家/地区无效。

对于月份，您可以创建一个名为 的参数`?MonthParam`，并将其添加到您的记录选择公式中：

```
MonthName (Month({YourTable.YourColumnName})) = {?MonthParam} 
```

对于这一年，只需执行以下操作：

```
Year({YourTable.YourColumnName}) = {?YearParam} 
```

把它们加在一起，你有：

```
MonthName (Month({YourTable.YourColumnName})) = {?MonthParam} AND
    Year({YourTable.YourColumnName}) = {?YearParam} 
```

# c# - 如何使用 MVC 和 razor 和 C# 在森林/域中提取 DC 列表

> ID：12514369
> 
> 赞同：0
> 
> 时间：2012-09-20T14:05:11.667
> 
> 标签：c#, asp.net, asp.net-mvc-3, active-directory, domaincontroller

查询：我的项目主页现在应该有一个域控制器列表，用于一个具有指定域 example.com 的选定森林，带有 + 号，如果我们展开 + 号，我们应该能够看到每个连接的复制服务器列表每个域的 DC。

如何使用 -

MVC3（模型中涉及哪些元素，控制器中可能包含什么，视图......等）Rajor C#

帐户管理命名空间

更加具体

为当前域中的每个 DC 显示相同的内容 (example.com)

更清楚：

example.com 是域让我说我们有 4 个域控制器 DC1 DC2 DC3 DC4

反过来 DC1 将具有复制的 DC，例如在 DC1 下 e 将具有 sub DC1 server1 sub DC1 server2

ETC

在 DC2 下，我们将有

子 DC2 服务器 1 子 DC2 服务器 2

到目前为止，我作为新手尝试过：在 MVC3 中创建了一个主页，其中页眉和页脚放置了一些粗略的数据。在正文部分，我很惊讶地为文件资源管理器之类的树视图提供了域中的域控制器列表。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T09:34:51.887

这是你的解决方案

在搜索了这么长时间的 MSDN 文档后，我得到了您的解决方案。

我认为这是你所期待的。

```
ArrayList alDcs = new ArrayList();
Domain domainaa = Domain.GetCurrentDomain();
foreach (DomainController dc in domainaa.DomainControllers)
 {
    alDcs.Add(dc.Name);
 } 
```

GetCurrentDomain 方法由运行应用程序的域凭据确定。要检索表示运行应用程序的计算机加入的域的域对象，无论与该应用程序关联的凭据如何，请改用 GetComputerDomain 方法。

通过这种方式，我可以获得所有已经相互保持信任关系的域控制器。

还有另一种方法可以让您授予具有管理员权限的用户的凭据。

```
 ArrayList alDomains = new ArrayList();
  Forest currentForest = Forest.GetForest(new DirectoryContext(DirectoryContextType.Forest, "contesso.local", "userame", "password"));
  DomainCollection myDomains = currentForest.Domains;
  DomainControllerCollection dccc = currentForest.RootDomain.DomainControllers;
  foreach (DomainController dc in dccc)
    {
       alDomains.Add(dc.Name);
    } 
```

现在剩下的唯一部分是创建一个树视图，我猜你可以自己做。

希望这可以帮助你

# android - Android 中的 ListFragment 扩展了另一个类

> ID：12514379
> 
> 赞同：1
> 
> 时间：2012-09-20T14:05:36.140
> 
> 标签：android, android-fragments

我的活动扩展了另一个自定义类，但我需要使用 ListFragment。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T14:08:23.763

使自定义类扩展 ListFragment。

# jquery - 覆盖 jquery validate 插件电子邮件地址验证

> ID：12514382
> 
> 赞同：18
> 
> 时间：2012-09-20T14:05:37.673
> 
> 标签：jquery, regex, jquery-validate, email-validation

我发现 jQuery 验证插件正则表达式不足以满足我的要求。它接受任何电子邮件地址 xxx@hotmail.x 作为有效的电子邮件地址，而我希望能够提供此正则表达式 /^([a-zA-Z0-9_.-+])+\@(([a-zA -Z0-9-])+.)+([a-zA-Z0-9]{2,4})+$/ 以便验证地址的完整 .com 部分。我更关心能够提供我自己的正则表达式而不是获得一个万无一失的正则表达式（因为没有用于电子邮件验证的万无一失的正则表达式）

仅供参考：我也在进行服务器端验证，但此时我并不担心哪个电子邮件地址正则表达式是正确的。

有没有办法在 jQuery 验证插件的“规则”部分中做到这一点？

这是我现在的规则部分：

```
rules: {
                        email: {
                            required:  {
                                    depends:function(){
                                        $(this).val($.trim($(this).val()));
                                        return true;
                                    }   
                                },
                            email: true
                        }, 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-20T14:12:31.673

我不会这样做，但为了得到答案，您需要添加自己的自定义验证。

```
//custom validation rule
$.validator.addMethod("customemail", 
    function(value, element) {
        return /^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(value);
    }, 
    "Sorry, I've enabled very strict email validation"
); 
```

然后在您的规则中添加：

```
rules: {
                    email: {
                        required:  {
                                depends:function(){
                                    $(this).val($.trim($(this).val()));
                                    return true;
                                }   
                            },
                        customemail: true
                    }, 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-20T14:06:29.990

你的正则表达式太严格了，jQuery 是对的。

```
"this is a valid adress !"@yes.it.is 
```

我建议您阅读以下内容：[停止使用复杂的正则表达式验证电子邮件地址](http://davidcelis.com/blog/2012/09/06/stop-validating-email-addresses-with-regex/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-11-22T11:34:54.850

尝试这个！

```
 jQuery.validator.addMethod("customEmail", function(value, element) {
             return this.optional(element) || /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/i.test(value);
            }, "Please enter valid email address!");

        $(form).validate({
             rules: {
                 email:{
                     required:true,
                     customEmail:true
                 }
             }
        }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-15T17:47:30.203

```
// Add Custom Email Validation
jQuery.validator.addMethod('customemail', function (emailaddr, element) {
      emailaddr = emailaddr.replace(/\s+/g, '');
      return this.optional(element) || 
      emailaddr.match(/^\b[A-Z0-9._%-]+@@[A-Z0-9.-]+\.[A-Z]{2,4}\b$/i);
 }); 
```

# qt - Qt 服务器和客户端编程

> ID：12514391
> 
> 赞同：1
> 
> 时间：2012-09-20T14:06:01.777
> 
> 标签：qt, client-server

我在 Qt 中创建了一个服务器控制台应用程序，现在我正在创建一个客户端 gui 应用程序。

每次我连接到服务器时，我的服务器端都会向客户端发送数据。

```
QTcpSocket *socket = server->nextPendingConnection();
socket->write("connection is available"); 
```

在客户端 gui 应用程序必须通过 lineedit 获取此数据。

如何从客户端的服务器获取数据？

# amazon-s3 - 删除 S3 文件时刷新 CloudFront 的缓存

> ID：12514396
> 
> 赞同：2
> 
> 时间：2012-09-20T14:06:13.203
> 
> 标签：amazon-s3, amazon-cloudfront

我已将 CloudFront 设置为 S3 作为我的 CDN。如您所知，当您将文件上传到 S3 存储桶时，它们会被推送到 CloudFront 的所有边缘站点并缓存以获得最佳性能。

如果我从 S3 中删除文件，它们将保留在 CDN 的缓存中，并且仍在提供给最终用户。如何防止这种行为？我希望 CloudFront 仅提供 S3 存储中实际可用的文件。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T16:14:46.607

您可以使用 API 或控制台使 Cloudfront 上的对象[无效。](http://docs.amazonwebservices.com/AmazonCloudFront/latest/DeveloperGuide/Invalidation.html)执行此操作时，文件将从 Cloudfront 边缘位置删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T16:06:47.783

J0nes 是对的。不过，这可能需要大约 10 分钟才能实施。

# c# - 程序如何知道传递了哪些参数？

> ID：12514402
> 
> 赞同：0
> 
> 时间：2012-09-20T14:06:35.607
> 
> 标签：c#, .net, mysql, xml

我是编程世界的新手。

我有一个数据提取程序，可以将 MySQL 中的数据提取到一个 word 模板文件中。我不明白主程序如何知道将哪个参数传递给参数。运行exe时，程序怎么知道`"Haha, I need to pass a string in there, And it is precisely this string right here"`？？？。

编辑：该程序应该在按下“提取按钮”时运行，但 exe 程序如何知道字符串 arg 参数在哪里？exe从哪里得到它？

**主要代码**

```
private static void Main(string[] args)
        {
            try
            {
                if (args[0] == "ALL" || args[0] == "*" || args[0] == "all")
                {
                    PrintARs();
                    Console.Read();
                }
                else
                {
                    CreateARDocument(args[0]);
                }
            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.Message);
                Console.Read();
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T14:10:49.690

有很多方法：

1.  你没有。你只是让人们猜测，直到他们猜对了。
2.  当提供无效输入或没有输入时，作业可以向控制台写出指令以帮助用户正确执行
3.  您可以提供外部文档，即 readme.txt 文件。
4.  您可以使程序具有交互性，而不是使用命令行参数（写出询问您想要什么的文本，然后从标准输入中获取输入。
5.  您可以为程序制作一个真正的 GUI，带有一个文本框和一个用于输入的按钮。通常当你看到这样的程序（使用命令行参数）时，这是因为它只是一个工具，并不是设计成真正用户友好的；它会被只知道如何使用它的程序员使用，或者它会被其他程序使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T14:13:28.730

好的，从你的代码继承一些想法

如果您的应用程序被称为 app.exe

如果你跑了

```
app.exe 1 2 3 4 5 
```

您将拥有`args[] = { 1,2,3,4,5}`并且可以查看它们

如果你跑了

```
app.exe /all c:\my stuff\a.txt 
```

你会得到`args[] = { /all, c:\my, stuff\a.txt }`

您的代码查看第一个 arg 并说它是“ALL，* 还是 all”......所以写“All”的笨拙的人会输掉......然后将该 arg 以他们编写的任何方式发送到函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T14:10:57.817

如果您从命令行执行此操作，那么它将是

```
myApp.exe "arg0" "arg1" "arg2" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T14:12:41.677

static void Main(string[] args) 是应用程序的入口。

args 是传入 Main 的参数

args.Length 是你传入的参数数量

在主函数中设置断点

在解决方案资源管理器中右键单击您的项目 -> 单击属性 -> 单击调试 -> 将 abcd 放入命令行参数，以调试模式运行应用程序，并检查 args 的值

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T14:20:12.130

在 ExtractButton 点击​​事件内部：

```
System.Diagnostics.Process.Start("PATH to your exe file", "Command Line Arguments"); 
```

命令参数的顺序与它们在 args[] 数组中的顺序相同。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-20T14:21:14.410

这些是[命令行参数](http://msdn.microsoft.com/en-us/library/cb20e19t.aspx)。

您可能已经注意到，您`Program.cs`的解决方案中总是有一个文件。这就是您的`Main()`方法所在的位置。在 Windows 窗体项目中，它不需要 string[] 参数，尽管您可以更改它，然后它会运行您的应用程序。

# php - blueimg 图片上传目录并获取上传图片名称

> ID：12514404
> 
> 赞同：0
> 
> 时间：2012-09-20T14:06:40.707
> 
> 标签：php, blueimp

我正在尝试在我的网页中使用 blueimg 图像上传器（在 php 中），但是我在上传目录时遇到了问题。这是我的文件的路径。

起始页是 index.php，它位于 blueimg 文件夹中，所有其他必需的 blueimg 文件和文件夹都位于该 blueimg 文件夹中。

这是 upload.class.php 中的行

```
 'script_url' => $this->getFullUrl().'/',
        'upload_dir' => dirname($_SERVER['SCRIPT_FILENAME']).'/files/',
        'upload_url' => $this->getFullUrl().'/files/',
        'param_name' => 'files', 
```

我是否需要修改任何其他文件中的任何其他行？

第二个问题：我想知道有没有办法获取上传图片的名称以便保存到数据库中？

# c - 在 Windows 上构建 CUnit

> ID：12514408
> 
> 赞同：3
> 
> 时间：2012-09-20T14:07:04.170
> 
> 标签：c, windows, unit-testing

有没有人设法为 Windows 构建 CUnit 库？

我想在 Windows 下运行我目前在 linux 下开发的相同单元测试，所以我需要一个 windows 版本的 cunit 共享库来链接到

我挣扎得很厉害

安装了 MinGW 和 MinGW MSYS 工具，所以有一个 gcc 编译器和 Make 等等

但尝试标准：

```
./configure
make
make install 
```

失败`./configure`

我已经尝试安装 ftjam 并按照 CUnit README 中的说明进行操作，但它失败了：

```
jam -f Jambase install
Jambase: No such file or directory
don't know how to make install
...found 1 target(s)...
...can't find 1 target(s)... 
```

这里的想法很快就用完了-感激地收到任何帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-07-21T07:26:07.370

上面的答案是错误的。正确答案如下：

```
libtoolize

automake --add-missing 

autoreconf

./configure --prefix=/mingw

make

make install 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T15:16:59.497

用以下方法钉住它（已经安装了 MinGw 和 MSYS）

```
mkdir c:/tmp
cd CUnit-2.1-2
bash ./configure --prefix=c:/tmp
make
make install 
```

但我只是`libcunit.a`没有`libcunit.dll`

我注意到当我最初在 linux 下构建时，我得到了一个`libcunit.so`

所以看起来只是静态链接，但我想我可以忍受

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T04:12:53.187

无论出于何种原因，源档案都没有 Jam 的支持文件。您可以从 Cunit 在 SourceForge 上的 SVN 存储库中获取它们。您还需要链接器导出定义文件 ( `libcunit_dll.def`)

我选择将 Jamfiles（针对所有子目录）修补到已发布的 2.1-2 树上。看起来 SVN 主干中有几个重大更改/未关闭的缺陷。

获得文件后：

```
export MINGW=gcc
export JAM_TOOLSET=MINGW
jam.exe -f Jambase libcunit 
```

将构建一个适当的 Windows dll。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-03T04:19:48.037

有人对使用 Eclipse 构建 CUnit 感兴趣吗？我试过并且可以成功构建它！

[笔记]

*   我使用了 CUnit-2.1-2，CUnit-2.1-3 包缺少头文件“Cunit.h”。
*   有些编译器不支持“诅咒”，所以我不构建它。
*   我也不使用 CUnit 包中的 makefile。

[如何]

1.  使用 Cygwin 或 Mingw 编译器在 Eclipse 中创建一个静态库 C 项目。
2.  将 CUnit\Headers 中除 Curses.h 之外的所有 .h 文件复制到您的新项目中，然后将该文件夹包含到构建中
3.  将 CUnit\Sources\Framework 中的所有 .c 文件复制到您的项目中
4.  将 Automated.c、Basic.c、Console.c 复制到您的项目中
5.  构建项目，您将在 Archieves 文件夹中获得 libCUnitLib.a。

# jquery - 为什么我的 jquery 插件不起作用？

> ID：12514411
> 
> 赞同：1
> 
> 时间：2012-09-20T14:07:18.293
> 
> 标签：jquery

我正在制作一个插件，但我没有得到任何结果，如果我将控制台放在函数中，以防万一我把它放在外面它可以工作。

问题是什么？任何人都可以帮我找出来吗？

我的代码：

```
(function ($){
    $.fn.slideIt = function () {
        this.fadeOut('normal', function(){
            console.log(this);
        });

}
})(jQuery); 
```

[这是小提琴](http://jsfiddle.net/RW8R3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T14:10:51.567

您的 jsFiddle 制作不正确。HTML 框应该只包含 HTML，将您的 JavaScript 放入`JavaScript`框中。

`slideIt`问题是，你在它被宣布之前就打电话了。

这是一个更新的示例：http: [//jsfiddle.net/RW8R3/1/](http://jsfiddle.net/RW8R3/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T14:15:16.810

使用文档就绪事件，当您调用插件时您的 div 不存在：

```
$(function(){
    $('#slideContainer').slideIt();
}); 
```

演示：http: [//jsfiddle.net/RW8R3/2/](http://jsfiddle.net/RW8R3/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T14:54:11.737

您正在打破“jQuery 的魔力”。该插件应如下所示：

```
(function($) 
{
    $.fn.slideIt = function()
    {
        return this.each(function()
        {
            $(this).fadeOut('normal', function()
            {
                console.log($(this));
            });
        });
    }
})(jQuery);

$('#slideContainer').slideIt();​ 
```

否则，您将无法执行 $('#slideContainer').slideIt().fadeIn("slow") 之类的操作。

工作演示[在这里](http://jsfiddle.net/RW8R3/4/)。

# ruby-on-rails - 嵌套表单中的多个操作 - 在 link_to 中传递的属性

> ID：12514416
> 
> 赞同：0
> 
> 时间：2012-09-20T14:07:32.663
> 
> 标签：ruby-on-rails, nested-attributes

我正在寻找一种解决方案，以便在提交整个表单之前对嵌套资源进行预验证，并且不知道正确的设计。

所以我有一个简单的`User`模型`has_one :place`被嵌套属性接受：

```
class User < ActiveRecord::Base
   ...

   has_one :place, :dependent => :destroy
   accepts_nested_attributes_for :place
   attr_accessible :place_attributes
   ...
end 
```

该`Place`模型包含诸如`:street_number, :street, :postal_code, :city, :country`.

我想为用户的编辑设置一个表格，以便他可以介绍这个地方。在提交之前，我想让用户有机会验证这个地方。所以我在`PlaceController`.

```
# place_controller.rb
class PlaceController < ApplicationController
   ...
   def validate
      # code for validation
   end
 end 
```

顺便说一句，我定义了该地点的路线如下：

```
# route.rb
resources :users do
  resource :place do
    match 'validate', :to => 'place#validate'
  end
end 
```

然后在视图中我设置了表单：

```
<%= form_for(:user, :url => edit_user_path(@user), :html => {:method => :put, :multipart => true}) do |f| %>
 <%= f.text_field :name %>
 # other fields for users
 ...
 <%= f.fields_for :place do |builder| %>
   <%= render 'places/form', :f => builder %>
 <% end %>

 <%= f.submit "Update" %> 
```

部分`places/form`管理嵌套属性的字段`place`：

```
<%= f.text_field :street_number %>
<%= f.text_field :street %> 
... 
```

重点是：我想要一个提交或链接来调用`validate`具有位置模型属性的操作。我试过类似的东西：

```
<%= link_to 'Validate', validate_user_place_path(@user, :format => :js, :params_to_validate => f.object), :remote => true %> 
```

即使它正确调用了控制器，我也没有得到要在控制器中验证的属性。

我该怎么办？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T12:52:37.697

给我自己：

我最终通过在表单中​​添加两个简单的按钮来实现它，其中一个按钮带有名称，以便识别所采取的操作。我只是遵循了以下 railscast 背后的想法：[Railscast 38](http://railscasts.com/episodes/38-multibutton-form)。

所以在视图中：

```
<%= f.submit 'Validate', :name => 'validate_place' %>
<%= f.submit 'Update' %> 
```

在`User`控制器中，我检查`update`操作中的按钮：

```
def update

 if params[:validate_place] 
    #validation of place is performed

 else
    #user is updated
 end
end 
```

唯一缺少的一点是它不是 ajax 基础。真可惜！

干杯...

我是一个可怜孤独的牛仔...

# ios - 在 iOS6 中弃用枚举 UITextAlignment 以支持 NSTextAlignment

> ID：12514421
> 
> 赞同：3
> 
> 时间：2012-09-20T14:07:47.047
> 
> 标签：ios, deprecated, ios6

在为 iOS6 编译我的应用程序时，我收到以下弃用消息：

从 iOS 6 和更高版本开始， UITextAlignmentCenter 已被弃用。改用 NSTextAlignmentCenter。

我以为很容易解决，但似乎 NSTextAlignment 在 iOS 6.0 及更高版本中可用，我还想支持 iOS 5。解决这个问题的最佳实践是什么？

我应该检查用户正在运行哪个 iOS，然后基于此使用 NSTextAlignment 或 UITextAlignment 吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-20T14:49:57.643

已弃用的意思就是——它会在未来消失。如果是我，我会等到你的应用程序是 iOS6 或更新版本（我假设明年你会这样做）。在 Xcode 停止支持所需的旧版本之前，Apple 极不可能将其删除。

# drupal - 如何在 Drupal 7 中隐藏 preprocess_node 的字段

> ID：12514424
> 
> 赞同：3
> 
> 时间：2012-09-20T14:07:52.907
> 
> 标签：drupal, drupal-7

我有简单的问题。我的内容类型（标题图像）中有一个必须打印的字段`page.tpl.php`（由于布局）。

它工作正常，我在`theme_preprocess_page()`函数中添加了一些代码以在 page.tpl.php 中显示该字段

```
function theme_preprocess_page( &$variables, $hook )
{
    $node = menu_get_object();

    if( $node && $node->type == 'page' )
    {
        $view = node_view($node);
        $variables['headerimage'] = render($view['field_headerimage']);
    }
} 
```

现在我在从节点视图中隐藏该 field_headerimage 时遇到问题。它不能从管理 ui（内容类型 -> 管理显示）中隐藏，因为如果我从那里隐藏它​​，它也将不可用`theme_preprocess_page()`。

所以我尝试从 preprocess_node 隐藏该字段

```
function theme_preprocess_node( &$variables, $hook )
{
    if( $variables['page'] )
    {
        hide($variables['field_headerimage']);
        unset($variables['field_headerimage']);
        $variables['field_headerimage'] = NULL;
    }
} 
```

我添加了我尝试将其从显示中删除的每一行代码。我究竟做错了什么？或者：你如何隐藏字段`theme_preprocess_node()`

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-20T16:57:17.100

在`hook_preprocess_node()`内容中已经为节点对象构建并转储到`content`数组中；这是将`$content`在模板文件中转换为的数组，也是您需要从中删除字段显示的数组：

```
if( $variables['page'] )
{
    hide($variables['content']['field_headerimage']);
    // ... 
```

那应该摆脱它没问题。

为了完整起见，您也可以在 node.tpl.php 文件中轻松执行此操作：

```
hide($content['field_headerimage']); 
```

或者在[`hook_node_view()`](http://api.drupal.org/api/drupal/modules%21node%21node.api.php/function/hook_node_view/7)自定义模块中：

```
function MYMODULE_node_view($node, $view_mode, $langcode) {
  hide($node->content['field_headerimage']);
} 
```

# c# - 调试器未完成逐步执行的方法

> ID：12514425
> 
> 赞同：-1
> 
> 时间：2012-09-20T14:07:58.870
> 
> 标签：c#, debugging

我有一段相当简单的 C# 代码，我经常使用它

```
 SqlCommand sql = new SqlCommand();
        sql.Connection = new SqlConnection(getConnectionString());
        sql.CommandText = @"update [Reporting].[dbo].[Customer_Master]
                            set groupID = @groupID
                            where customer = @customerID";

        sql.Parameters.Add(new SqlParameter("@groupID", groupID));
        sql.Parameters.Add(new SqlParameter("@customer", customer));

        sql.Connection.Open();
        sql.ExecuteNonQuery();
        sql.Connection.Close();

        sql.Dispose(); 
```

出于某种原因，它没有正确更新我的数据库，所以我决定在方法的开头添加一个断点并逐步执行每一行以确保我的变量正确输入。

但是，该方法在 sql.Connection.Open() 之后关闭，因为它只是将我返回到主代码。

有什么想法吗？

谢谢。

编辑：我发现了问题。我使用了错误的参数名称。我仍然觉得奇怪的是，它在打开连接后关闭了该方法而没有引发错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T14:14:28.270

您要么在此处抛出某种异常，要么在单步执行 .Open 时可能是超时错误。但我同意 dash，首先将其放入 try/catch 中，这应该始终是您的第一步。

# knockout.js - ko.observable()，在使用前检查（并且可能更新）值

> ID：12514431
> 
> 赞同：0
> 
> 时间：2012-09-20T14:08:19.833
> 
> 标签：knockout.js

例如我们有：

```
<input type="text" data-bind="value: num1, valueUpdate: 'keyup'"/>
<input type="text" data-bind="value: num2, valueUpdate: 'keyup'"/>
<input type="text" data-bind="value: total"/>

var viewModel = {
    num1: ko.observable(0),
    num2: ko.observable(0)
};

viewModel.total = ko.computed(function () {
    return parseFloat(viewModel.num1()) + parseFloat(viewModel.num2());
}, viewModel);

ko.applyBindings(viewModel); 
```

是否可以检查`num1`是否`num2`包含`,`？`.`如果是，我需要在计算之前将其替换为`viewModel.total`.

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T14:20:56.113

我会在其中添加几个计算出的 observable 来进行解析：

```
 var viewModel = {  
        num1: ko.observable(0),  
        num2: ko.observable(0)  
    };  

   viewModel.num1Parsed = ko.computed(function () {  
        return viewModel.num1().replaceAll(',', '.');  
    }, viewModel);  

   viewModel.num2Parsed = ko.computed(function () {  
        return viewModel.num2().replaceAll(',', '.');  
    }, viewModel);  

    viewModel.total = ko.computed(function () {  
        return parseFloat(viewModel.num1Parsed()) + parseFloat(viewModel.num2Parsed());  
    }, viewModel); 
```

我将以下函数用于replaceAll：

```
/** 
* ReplaceAll by Fagner Brack (MIT Licensed) 
* Replaces all occurrences of a substring in a string 
*/
String.prototype.replaceAll = function (token, newToken, ignoreCase) {
    var str, i = -1, _token;
    if ((str = this.toString()) && typeof token === "string") {
        _token = ignoreCase === true ? token.toLowerCase() : undefined;
        while ((i = (
        _token !== undefined ?
            str.toLowerCase().indexOf(
                        _token,
                        i >= 0 ? i + newToken.length : 0
            ) : str.indexOf(
                        token,
                        i >= 0 ? i + newToken.length : 0
            )
    )) !== -1) {
            str = str.substring(0, i)
                .concat(newToken)
                .concat(str.substring(i + token.length));
        }
    }
    return str;
}; 
```

或者，您可以将 HTML 中的 num1 和 num2 可观察值替换为在写入值时解析的计算值：

```
 this.num1Parsed = ko.dependentObservable({
        read: function () {
            return viewModel.num1();
        },
        write: function (value) {
            viewModel.num1(value.replaceAll(',', '.'));
        },
        owner: this
    });

    this.num2Parsed = ko.dependentObservable({
        read: function () {
            return viewModel.num2();
        },
        write: function (value) {
            viewModel.num2(value.replaceAll(',', '.'));
        },
        owner: this
    }); 
```

.. 然后将您的 HTML 更改为：

```
<input type="text" data-bind="value: num1Parsed, valueUpdate: 'keyup'"/>             
<input type="text" data-bind="value: num2Parsed, valueUpdate: 'keyup'"/>             
<input type="text" data-bind="value: total"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T19:55:01.060

这个[小提琴](http://jsfiddle.net/gbos/gmNJR/1/)说明了一个使用[ko 扩展器](http://knockoutjs.com/documentation/extenders.html)将扩展应用到可观察对象的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T14:23:46.243

是的。最简单的方法是调用 Javascripts 字符串替换函数，例如

```
var temp1 = viewModel.num1().replace(',','.'); 
```

这不仅会查找逗号，还会在同时找到时替换它。

注意：这仅适用于单个逗号，因为浮点数应该只有一个句点。如果插入任何其他逗号或句点，则逗号/句点后面的数字将被忽略。

参见小提琴例如[http://jsfiddle.net/Rynan/LYzhx/](http://jsfiddle.net/Rynan/LYzhx/)

# c++ - 使用 CreateProcess 尽可能使用单个命令参数调用 exec* 函数

> ID：12514434
> 
> 赞同：2
> 
> 时间：2012-09-20T14:08:27.090
> 
> 标签：c++, exec, posix

我使用 CreateProcess 为 Win32 编写了子命令执行代码：

```
 CreateProcessW(NULL, // app
                 &commandW[0], // command line
                 NULL, // process security attributes
                 NULL, // primary thread security attributes
                 TRUE, // handles are inherited
                 0, // creation flags
                 NULL, // use parent's environment
                 NULL, // use parent's current directory
                 &startup_info, // STARTUPINFOW pointer
                 &process_info); // receives PROCESS_INFORMATION 
```

这使用了一个“技巧”并将整个命令放在第二个参数中，该参数通常只包含传递给程序的参数。我想为 POSIX 做同样的事情，但同样的“技巧”不适用于该`execlp`功能（我也打赌其他所有功能）。有没有办法仍然使用一个单一的`std::string command`并开始一个过程？将命令拆分为可执行文件名和参数是可能的，但如果可能的话，我想避免很多工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T14:12:30.640

您可以调用一个外壳，并将大字符串传递给外壳，让外壳处理它。自己试试：

```
sh -c "echo 'hello world'" 
```

（即传递两个参数，“ `-c`”和包含命令和参数的大字符串）

更好的是：创建第一个命令`exec`，这将使您的新进程“替换”它生成的 shell，然后甚至没有人知道它是使用 shell 启动的。

正如@ecatmur 在评论中指出的那样，这是[`system`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/system.html)调用的确切功能。

但是您正在向潜在的（严重的）问题敞开大门：您现在必须处理字符的引用和转义。shell 可以（并且将）解释任何特殊字符，除非它们被转义，并且任何包含空格的参数都必须正确引用。

类 Unix 操作系统以它们的方式处理参数是有原因的。

我的观点是 Windows 方法存在根本缺陷。这是一个严重的设计疏忽，会阻止您将复杂的字符串作为命令行参数传递给其他程序。

# validation - 使用绑定验证

> ID：12514436
> 
> 赞同：2
> 
> 时间：2012-09-20T14:08:30.247
> 
> 标签：validation, javafx-2, fxml

我为 JavaFX 应用程序制作了一个配置面板。我设法创建了一个动态更改侦听器，如下所示：

```
public class InputMaskChecker implements ChangeListener<String> {

    public static final String NUMERIC      = "^[0-9]*$";
    public static final String TEXTONLY     = "^\\w*$";
    public static final String PASSWORD     = "^[\\w\\+\\!\\?\\-\\$\\&\\%£]+$";
    public static final String DATASOURCE   = "^([a-zA-Z]+:){3}@([a-zA-Z0-9]+:)+[a-zA-Z0-9]+$";
    public static final String TCPPORT      = "^(6553[0-5]|655[0-2]\\d|65[0-4]\\d\\d|6[0-4]\\d{3}|[1-5]\\d{4}|[2-9]\\d{3}|1[1-9]\\d{2}|10[3-9]\\d|102[4-9])$";

    private static final String STYLE = "-fx-effect: dropshadow(gaussian, red, 4, 0.0, 0, 0);";

    public final BooleanProperty erroneous = new SimpleBooleanProperty(false);

    private final String mask;
    private final int max_lenght;
    private final TextField control;

    public InputMaskChecker(String mask, TextField control) {
        this.mask = mask;
        this.max_lenght = 0;
        this.control = control;
    }

    public InputMaskChecker(String mask, int max_lenght, TextField control) {
        this.mask = mask;
        this.max_lenght = max_lenght;
        this.control = control;
    }

    @Override
    public void changed(ObservableValue<? extends String> observableValue, String oldValue, String newValue) {
        erroneous.setValue(!newValue.matches(mask) || ((max_lenght > 0) ? newValue.length() > max_lenght : false) || newValue.length() == 0);
        control.setStyle( erroneous.get() ? STYLE : "-fx-effect: null;");
    }
} 
```

在我的控制器中使用它，如下所示：

```
field1.textProperty().addListener(new InputMaskChecker(InputMaskChecker.DATASOURCE, field1));
field2.textProperty().addListener(new InputMaskChecker(InputMaskChecker.TEXTONLY, field2));
field3.textProperty().addListener(new InputMaskChecker(InputMaskChecker.PASSWORD, field3));
field4.textProperty().addListener(new InputMaskChecker(InputMaskChecker.NUMERIC, 1, field4)); 
```

它按预期工作，但有一个小故障：我想让主控制器上的 SAVE 按钮对侦听器做出反应，如果字段有错误，它就会被禁用。

**现在是我的头脑风暴请求。**你有什么建议吗？

使用共享`SimpleBooleanProperty`的 AND-ing 侦听器显然不起作用。

**（解决方案）更新：**`private final BooleanBinding binding;`向控制器 添加一个变量。然后：

```
InputMaskChecker listener1 = new InputMaskChecker(InputMaskChecker.DATASOURCE, field1);
InputMaskChecker listener2 = new InputMaskChecker(InputMaskChecker.DATASOURCE, field2);
InputMaskChecker listener3 = new InputMaskChecker(InputMaskChecker.DATASOURCE, field3);
InputMaskChecker listener4 = new InputMaskChecker(InputMaskChecker.DATASOURCE, field4);

field1.textProperty().addListener(listener1);
field2.textProperty().addListener(listener2);
field3.textProperty().addListener(listener3);
field4.textProperty().addListener(listener4);

binding = new BooleanBinding() {
    {
    super.bind(listener1.erroneous, listener2.erroneous, listener3.erroneous, listener4.erroneous);
    }

    @Override
    protected boolean computeValue() {
        return (listener1.erroneous.get() || listener2.erroneous.get() || listener3.erroneous.get() || listener4.erroneous.get());
    }
};

control.getDisableProperty().bind(binding); 
```

完毕 ;）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T14:25:47.620

我可以建议下一个方法：

使您`InputMaskChecker`有状态`public SimpleBooleanProperty valid;`，将在更新方法中引用：

```
@Override
public void changed(ObservableValue<? extends String> observableValue, String oldValue, String newValue) {
    valid.set(!newValue.matches(mask) || ((max_lenght > 0) ? newValue.length() > max_lenght : false) || newValue.length() == 0);
    // BTW, I would suggest to use styleclasses instead for performance reasons
    control.setStyle( valid.get() ? STYLE : "-fx-effect: null; ):
} 
```

然后你可以在“保存”按钮创建中说：

```
Button btn = new Button("Save");
btn.disableProperty().bind(
      listener1.valid.and(listener2.valid).and(listener3.valid).not()); 
```

或创建一个实用方法，该方法将添加侦听器并更新“保存”禁用属性。

# grails - Grails 命令对象 - 有没有共同的模式？

> ID：12514444
> 
> 赞同：3
> 
> 时间：2012-09-20T14:08:44.050
> 
> 标签：grails

我想知道在 grails 应用程序中使用命令对象是否有任何首选模式。特别是如果我应该定义另一种方法来保存对象或使用相同的控制器方法来呈现表单和保存？

让我展示一个示例，其中包含用于呈现表单和保存对象的单独方法

```
def user(int id) {} // shows the edit user form - user.gsp. Submit takes us to saveUser method
def saveUser(UserCommand cmd) {} // actually saves the user, then redirects somewehre else 
```

一切都应该工作，但是：

如果存在验证错误，则该`saveUser`方法必须执行该`user`方法所做的整个逻辑。如果在显示用户表单之前，我们必须从数据库加载其他对象，执行一些计算等......它必须再次完成，因为我们必须再次显示表单并包含验证错误。这会导致不必要的代码重复。当验证失败时，我无法重定向到`user`方法，因为我会丢失命令对象以及与之相关的任何错误。因此我将无法显示验证错误。

使用相同方法保存和呈现表单的另一个示例

```
def user(UserCommand cmd, Integer id) {
   def u=User.load(id)
   if (request.method=="POST"&&cmd.validate()) {
      // populate u with command object values and save in database
      // then redirect somewhere
   }
} 
```

此示例消除了对代码重复的需要。仅在有`POST`请求时才保存用户，在其他情况下仅显示表单。如果出现验证错误，它们可以访问并显示在 gsp 页面上。

主要问题是即使有`GET`对用户页面的请求（这意味着显示 user.gsp 表单），也会创建并验证一个空的命令对象实例（因为它是在同一个控制器中定义的）。因此，每次显示表单时都会出现验证错误，即提供的值为空（因为命令对象为空）

两种场景都可以轻松修改以正常工作（例如：在场景 1 中的会话中重定向之前保存命令对象，并且仅`POST`在场景 2 中有请求时才显示验证错误）但它需要额外的代码并且似乎不是很优雅.

有没有更简单 - 更多“圣杯”的解决方案来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-31T18:43:55.820

问题：在控制器操作中复制模型填充逻辑。例如，在多个操作中将作者列表插入模型。

有时我觉得很优雅的解决方案：

```
def afterInterceptor = { model ->
    model.authors = authorService.list()
} 
```

查看 Grails 文档了解更多信息：http: [//grails.org/doc/latest/ref/Controllers/afterInterceptor.html](http://grails.org/doc/latest/ref/Controllers/afterInterceptor.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T16:39:35.990

这是我在这种情况下通常做的一个示例：

```
def create(MeetingCommand cmdMtn) {
    switch (request.method) {
    case 'GET':
        cmdMtn = new MeetingCommand() 
        bindData cmdMtn, params, [include: boundProperties]
        createEditModel(cmdMtn: cmdMtn)
        break
    case 'POST':
            def meetingInstance
            Meeting.withTransaction { status ->
                try{
                    Boolean okValidated = (cmdMtn.validate() && !cmdMtn.hasErrors())
                    if (okValidated) {
                        meetingInstance = meetingService.bindInstance(cmdMtn)
                        flashMessage 'meeting.created', FLASH_CLASS_SUCCESS, [meetingInstance.id], 'Meeting creato'  
                        redirect action: ACTION_SHOW, id: meetingInstance.id
                    }
                    else {
                        log.error cmdMtn
                        log.error cmdMtn.errors
                        status.setRollbackOnly()
                        createEditModel(cmdMtn: cmdMtn)
                    }
                } catch (e){
                    status.setRollbackOnly()
                    log.error e
                    createEditModel(cmdMtn: cmdMtn)
                }
            }
        break
    }
}
protected createEditModel(mdl = [:]) {
    mdl
} 
```

我从[http://blog.freeside.co/post/41774629876/semi-restful-scaffolded-controllers](http://blog.freeside.co/post/41774629876/semi-restful-scaffolded-controllers)获得灵感，并且域持久性逻辑已移至服务层。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-10T14:39:09.437

我开始向`isBlank`我的命令对象添加一个吸气剂：

```
class UserCommand {
    String username
    String password

    boolean isBlank() { !username && !password }
} 
```

然后在我的控制器中，我重新创建空白命令，因此不运行验证：

```
def createUser(UserCommand cmd) {
    if (cmd.blank) cmd = new UserCommand()
    //...render form, there will be no errors on inital view
}

def saveUser(UserCommand cmd) {
    if (cmd.hasErrors()) {
        return createUser(cmd)
    } else {
    //...and so on
} 
```

唯一的缺点是，如果用户提交一个空白表单，将不会出现验证错误，但另一方面，空白表单应该很明显必须填写*一些东西*，否则为什么会有呢？

# c++ - 成员函数的函数指针

> ID：12514447
> 
> 赞同：0
> 
> 时间：2012-09-20T14:08:56.563
> 
> 标签：c++, visual-studio

有人可以帮助解决这个问题：

我在课堂上有一个功能

```
class A
{
   void fcn1(double *p, double *hx, int m, int n, void *adata);
   void fcn2();
} 
```

在 fcn2 中，我尝试使用指向 fcn1 的指针，如下所示：

```
A::fcn2()
{
  void (*pfcn1)(double*, double*, int, int, void*) = fcn1;
} 
```

我收到一个错误：

> 错误 C3867：“A::fcn”：函数调用缺少参数列表；使用 '&A::fcn' 创建指向成员的指针

这将是一种帮助的人。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T14:11:27.917

改成：

```
void (A::*pfcn1)(double*, double*, int, int, void*) = &A::fcn1; 
```

考虑使用 a`typedef`以提高可读性：

```
class A
{
   ...
   typedef void (A::*fcn1_ptr)(double*, double*, int, int, void*);
};

void A::fcn2()
{
    fcn1_ptr pfcn1 = &A::fcn1;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T14:11:52.207

`fcn1()`不是普通函数，而是成员函数。您不能使用普通的函数指针来存储指向它的指针，因为这不能提供足够的信息：`this`调用函数时应该设置什么？

您需要改用*成员*函数指针：

```
void (A::*pfcn1)(double*, double*, int, int, void*) = &A::fcn1; 
```

如果你有一个`a`type的对象`A`，你可以稍后使用：

```
(a.*pfcn1)(&somedouble, &somedouble, 42, 69, NULL); 
```

如果你有一个指向`pa`类型对象的指针`A`，你可以稍后调用它：

```
(pa->*pfcn1)(&somedouble, &somedouble, 42, 69, NULL); 
```

# android-edittext - Edittext字符串验证问题

> ID：12514457
> 
> 赞同：0
> 
> 时间：2012-09-20T14:09:39.353
> 
> 标签：android-edittext

我如何验证 EditText 是否有值（即它不为空或不为空）。我编写了以下代码，将键入的字符串值分配`EditText`给一个`String`对象，但验证它不是空的对我来说是个问题。每当我运行它时，我都会得到一个`NullPointerException`.

```
public class LoginFragment extends SherlockFragment {
EditText e1;
EditText e2;
Button b;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInatanceState) {
    View view = inflater.inflate(R.layout.login_layout, container, false);

    e1 = (EditText) view.findViewById(R.id.reg_email);
    e2 = (EditText) view.findViewById(R.id.reg_password);

    b = (Button) view.findViewById(R.id.btnLogin);
    b.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {

            String mEmail = e1.getText().toString(); // NullPointerException
            String pwrd = e2.getText().toString();

            if ((mEmail.equals(null)) || (pwrd.equals(null))) {
                AlertDialog.Builder build = new AlertDialog.Builder(
                        getActivity());
                build.setMessage("Please enter your login details");
                build.setCancelable(false);

                build.setPositiveButton("Ok",
                        new DialogInterface.OnClickListener() {

                            @Override
                            public void onClick(DialogInterface dialog,
                                    int which) {
                                dialog.cancel();

                            }
                        });
                AlertDialog alert = build.create();
                alert.show();
            } else {
                Toast.makeText(getActivity(), "Welcome", Toast.LENGTH_SHORT)
                        .show();
                Intent intent = new Intent(getActivity(), Home.class);
                startActivity(intent);
            }

        }
    });
    return view;
}
} 
```

有人可以帮我吗？我阅读了其他人提出的类似问题，但它并没有解决我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T10:58:40.617

你不需要在字符串中取值。解决方法如下。在课堂上定义这个

```
EditText username;
EditText password; 
```

然后按照这个

```
username = (EditText) findViewById(R.id.User_name_value);
password = (EditText) findViewById(R.id.password_value);
if (username.getText().toString().equals("") || password.getText().toString().equals("")) 
{
    // Log.i("TAG!","Inside if condition");
    Toast.makeText(this, user_text, Toast.LENGTH_SHORT).show();
} else {

} 
```

# xml - 使用 XSLT 获取带有子节点值的 xml 父节点标记名称

> ID：12514464
> 
> 赞同：0
> 
> 时间：2012-09-20T14:10:04.387
> 
> 标签：xml, xslt, xml-parsing

我需要使用 xslt 转换 XML。

我想将一个具有子节点的节点转换为他的标签名称是父节点的名称并且他的值是他的一个孩子的值的节点。

例子：

给定的xml：

```
<Parent>
  <ChildA>1</ChildA>
  <ChildB>2</ChildB>
</Parent> 
```

所需的 xml 输出：

```
<Parent>2</Parent> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T14:18:46.067

您没有指定您感兴趣的子节点....

像这样的东西：

```
<xsl:template match="Parent">
  <Parent>
    <xsl:value-of select="ChildB"/>
  </Parent>
</xsl:template> 
```

使用调用的第一个子节点的值`ChildB`（如果有）。这：

```
<xsl:template match="Parent">
  <Parent>
    <xsl:value-of select="*[2]"/>
  </Parent>
</xsl:template> 
```

使用第二个子节点的值。这：

```
<xsl:template match="Parent">
  <Parent>
    <xsl:value-of select="*[last()]"/>
  </Parent>
</xsl:template> 
```

使用最后一个子节点的值....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T14:17:43.790

```
<xsl:element name="../node-name()">
 <xsl:value-of select="."/>
</xsl:element> 
```

# url - 一些客户端在 Lotus Notes 中单击时 javax.mail 链接缺少 Url 参数

> ID：12514469
> 
> 赞同：0
> 
> 时间：2012-09-20T14:10:15.190
> 
> 标签：url, lotus-notes, jakarta-mail

我正在编写的一个内部公司应用程序会生成并发送一封电子邮件。在电子邮件的内容中，我内联了一个包含一些 url 参数的链接。该应用程序将电子邮件发送给适用的同事并出于调试目的，也发送给我自己。

当我收到电子邮件并将鼠标悬停在链接上时，我在 Lotus Notes 底部的状态栏中看到该链接具有 Url 参数。所以很明显，当我单击链接时，IE 会打开并按预期显示查询结果，因为地址具有 Url 参数。

一位同事（住在镇上）抱怨说，当他们点击链接时，IE 打开了，但页面显示一条消息，提示找不到该记录。我检查了我的日志文件，并注意到他们的日志条目显示他们访问基本 Url 但没有任何 Url 参数，因此记录查找失败的原因。

这怎么可能？这是发送给我的相同消息。

通过电话，我让他们将鼠标悬停在 Lotus 中的链接上，他们说状态栏中没有显示任何内容。然后我要求他们将他们的电子邮件转发给我以进行进一步检查。当我将鼠标悬停在此电子邮件中的链接上时，我会在状态栏中看到 Url，并且它具有 Url 参数。

这是怎么回事？在这个同事 Lotus 中是否有一些偏好从被点击的链接中剥离 Url 参数？

检查日志显示大多数收件人在单击此链接时会被带到 URL 参数仍然有效的站点。但是还有一些其他同事的日志条目只显示了 Url。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-28T23:28:30.990

最后我能够解决我的问题。在链接 url 中，我使用了“www.abc.com?data=date”，它工作了几年，但最近 Notes 邮件变得很挑剔，决定将其解释为“www.abc.com”，而忽略了“?data =数据”。我将 url 更改为“http://”www.abc.com?data=data”，Notes 又开心了。

解决我的问题：添加“http://”。希望它也对其他人有所帮助。

# php - Webkit 不断改变表格的固定宽度

> ID：12514472
> 
> 赞同：0
> 
> 时间：2012-09-20T14:10:24.750
> 
> 标签：php, css, html-table, webkit, fixed-width

我们正在重做整个网站。当前的网站已有 7 年多的历史，但似乎有一个仅出现在基于 Webkit 的浏览器（Chrome 和 Safari）中的 CSS 错误。我们希望修复该错误，因为新站点准备就绪可能需要一段时间。

我们有一个固定宽度的表格：

```
<table width="1000" border="0" cellspacing="0" cellpadding="0" bgcolor="#FFFFFF">
    <tr>
        <td class="left" width="200" valign="top">
            Contents of the menu here.
        </td>
        <td valign="top">
            <table width="100%" border="0" cellspacing="0" cellpadding="0">
                Contents of website here.
            </table>
        </td>
    </tr>
</table> 
```

相关元素和类的CSS如下：

```
td {
    font-size: 11px;
}

td.left {
    width: 200px;
    padding-top: 50px;
    background-color: #EFEFEF;
}

td.top {
  height: 16px;
  align: right;
  padding-bottom: 2px;
} 
```

问题是 Webkit 计算*td* with class *left*为 161 像素而不是 200 像素。我可以通过添加`style="display: block"`or来解决这个问题`style="min-width: 200"`，但是当我这样做时，Webkit 会将第一个表格的大小调整为 1039 像素而不是 1000 像素，从而导致页面的其余部分到处移动。它似乎完全忽略了固定宽度的要求。

我想知道是否有办法在不彻底改变网站结构的情况下解决这个问题。如果需要，您可以在[相关网站](http://www.skoll.nl/)上使用 CSS 。请注意，该错误仅出现在**Chrome**和**Safari**中。我检查了许多关于 Webkit 的错误报告和许多 Stack Overflow 问题，但似乎没有一个与我的问题完全匹配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T14:14:30.647

哇，不要在这样的基本脚本上使用表格，使用 div：

```
<div style="width:1000px; background-color:#ffffff; float:left; clear: both;">
    <div style="width:200px; float:left;">
        Contents of the menu here.
    </div>
    <div style="width:800px; float:right;">
        Contents of website here.
    </div>
</div> 
```

这应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T14:23:55.373

我认为问题在于右侧“赞助商”表中的图像。

将 min-width 设置为左​​表，并将 width:150px 设置为“sponsoren”-table 中的 div-tag，对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T14:13:10.443

尝试将类添加到您的表中并：

```
table.yourclass {
    width: 1000px !important;
} 
```

# c# - C# - 如何从提升的进程启动非提升的进程

> ID：12514473
> 
> 赞同：0
> 
> 时间：2012-09-20T14:10:25.767
> 
> 标签：c#, windows, wix, windows-installer

> **可能重复：**
> [从提升的进程启动非提升的进程](https://stackoverflow.com/questions/3927790/start-non-elevated-process-from-elevated-process)

故事：
`Standard-User`启动一个 MSI `As Administrator`，Msi 在安装完成时启动一个进程（比如说 Sample.exe）。
问题：
Sample.exe 以管理员权限而不是当前桌面 (statndard) 用户启动。这导致了一些问题。
所以我希望 sample.exe 应该以当前窗口登录用户（标准用户）开始。

我做了一些谷歌搜索，找到[了这篇文章](http://www.codeproject.com/Articles/18946/High-elevation-can-be-bad-for-your-application-How)。但是这篇文章在`C++`并且我正在使用`C#`and `WIX`。因此，如果在 c# 中有任何其他简单的方法可以做到这一点，如果没有，那么我如何在我的项目中使用本文的代码。

`NOTE: This question has been asked multiple time on stackoverflow but i didnt find the answer for c#`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T15:06:38.630

根据最佳实践，安装人员应...

*   以标准用户身份启动非提升
*   UI 安装顺序未提升
*   转换到执行序列将提示确认。如果用户是管理员，他们会收到 UAC 提示。如果用户不是管理员，则会提示他们输入管理员的“肩负”凭据
*   计划为即时延迟的自定义操作与模拟运行与用户上下文（非提升）
*   计划为 Deferred with No Impersonation 的自定义操作运行提升为 SYSTEM

如果 MSI 从提升的进程（例如 CMD 以管理员身份运行）启动，则 UI 和 Execute 都将被提升。这是设计使然，据我所知，没有办法将其降级，我也想不出您想要这样做的任何理由。

# popup - 如何在批处理脚本中创建弹出消息？

> ID：12514475
> 
> 赞同：45
> 
> 时间：2012-09-20T14:10:38.550
> 
> 标签：popup, batch-file

我需要知道如何在**不**使用 VBScript 或 KiXtart 或任何其他外部脚本/编程语言的情况下在批处理脚本中制作弹出消息。我对此一无所知……甚至没有起点。我知道，`NET SEND`但在我当前的环境中禁用了 Messenger 服务。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-08-15T08:32:44.610

```
msg * "Enter Your Message" 
```

这有帮助吗？

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2012-09-20T16:04:12.000

关于 LittleBobbyTable 的回答 - NET SEND 在 Vista 或 Windows 7 上不起作用。它已被 MSG.EXE 取代

有一个适用于所有 Windows 版本的粗略解决方案 - 可以通过启动一个新的 cmd.exe 窗口来发送粗略的弹出消息，该窗口在按下一个键后会关闭。

```
start "" cmd /c "echo Hello world!&echo(&pause" 
```

如果您希望脚本在消息框消失之前暂停，则可以添加 /WAIT 选项。

```
start "" /wait cmd /c "echo Hello world!&echo(&pause" 
```

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2012-09-21T02:54:12.650

您可以像这样利用`CSCRIPT.EXE`or `WSCRIPT.EXE`（我相信，自 Windows 95 以来，每个版本的 Windows 中都存在此功能）：

```
echo msgbox "Hey! Here is a message!" > %tmp%\tmp.vbs
cscript /nologo %tmp%\tmp.vbs
del %tmp%\tmp.vbs 
```

或者

```
echo msgbox "Hey! Here is a message!" > %tmp%\tmp.vbs
wscript %tmp%\tmp.vbs
del %tmp%\tmp.vbs 
```

您还可以选择更可自定义的`PopUp`命令。此示例在超时之前为您提供了 10 秒的窗口来单击“确定”：

```
echo set WshShell = WScript.CreateObject("WScript.Shell") > %tmp%\tmp.vbs
echo WScript.Quit (WshShell.Popup( "You have 10 seconds to Click 'OK'." ,10 ,"Click OK", 0)) >> %tmp%\tmp.vbs
cscript /nologo %tmp%\tmp.vbs
if %errorlevel%==1 (
  echo You Clicked OK
) else (
  echo The Message timed out.
)
del %tmp%\tmp.vbs 
```

在上述情况下，两者`cscript`的`wscript`行为相同。当从批处理文件调用时，bot`cscript`将`wscript`暂停批处理文件，直到它们完成脚本，然后允许文件继续。

当从命令提示符手动调用时，在`cscript`完成之前不会将控制权返回给命令提示符，同时`wscript`会创建一个单独的线程来执行其脚本，甚至在脚本完成之前将控制权返回给命令提示符。

此线程中讨论的其他方法不会导致批处理文件的执行在等待单击消息时暂停。您的选择将取决于您的需求。

**注意：**使用此方法，可以使用多个按钮和图标配置来覆盖对用户的各种**yes/no/cancel/abort/retry**查询：[https ://technet.microsoft.com/en-us/library/ee156593.aspx](https://technet.microsoft.com/en-us/library/ee156593.aspx)

[![在此处输入图像描述](../Images/e9b2263e5fa9b403a82854edff01f147.png)](https://i.stack.imgur.com/tOubf.gif)

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2014-09-19T01:58:28.603

更多方式（在所有这些方式中，脚本等待按钮按下不同`msg.exe`）。

**1)**最极客和最黑客 - 它使用 IEXPRESS 创建小型 exe，该 exe 将创建一个带有单个按钮的弹出窗口（[它可以创建另外两种类型的弹出消息](http://www.dostips.com/forum/viewtopic.php?f=3&t=5901)）。适用于 XP 及更高版本的每个窗口：

```
;@echo off
;setlocal

;set ppopup_executable=popupe.exe
;set "message2=%~1"
;
;del /q /f %tmp%\yes >nul 2>&1
;
;copy /y "%~f0" "%temp%\popup.sed" >nul 2>&1

;(echo(FinishMessage=%message2%)>>"%temp%\popup.sed";
;(echo(TargetName=%cd%\%ppopup_executable%)>>"%temp%\popup.sed";
;(echo(FriendlyName=%message1_title%)>>"%temp%\popup.sed"
;
;iexpress /n /q /m %temp%\popup.sed
;%ppopup_executable%
;rem del /q /f %ppopup_executable% >nul 2>&1

;pause

;endlocal
;exit /b 0

[Version]
Class=IEXPRESS
SEDVersion=3
[Options]
PackagePurpose=InstallApp
ShowInstallProgramWindow=1
HideExtractAnimation=1
UseLongFileName=0
InsideCompressed=0
CAB_FixedSize=0
CAB_ResvCodeSigning=0
RebootMode=N
InstallPrompt=%InstallPrompt%
DisplayLicense=%DisplayLicense%
FinishMessage=%FinishMessage%
TargetName=%TargetName%
FriendlyName=%FriendlyName%
AppLaunched=%AppLaunched%
PostInstallCmd=%PostInstallCmd%
AdminQuietInstCmd=%AdminQuietInstCmd%
UserQuietInstCmd=%UserQuietInstCmd%
SourceFiles=SourceFiles
[SourceFiles]
SourceFiles0=C:\Windows\System32\
[SourceFiles0]
%FILE0%=

[Strings]
AppLaunched=subst.exe
PostInstallCmd=<None>
AdminQuietInstCmd=
UserQuietInstCmd=
FILE0="subst.exe"
DisplayLicense=
InstallPrompt=
; 
```

示例用法（如果将脚本另存为`expPopup.bat`）：

```
call expPopup.bat "my Message" 
```

**2）**使用`MSHTA`。也适用于 XP 及更高版本的每台 Windows 机器（尽管 OP 不想要“外部”语言，但此处的 jsvascript 已最小化）。应保存为`.bat`：

```
@if (true == false) @end /*!
@echo off
mshta "about:<script src='file://%~f0'></script><script>close()</script>" %*
goto :EOF */

alert("Hello, world!"); 
```

或在一行中：

```
mshta "about:<script>alert('Hello, world!');close()</script>" 
```

或者

```
mshta "javascript:alert('message');close()" 
```

或者

```
mshta.exe vbscript:Execute("msgbox ""message"",0,""title"":close") 
```

**3）**这里是参数化的`.bat/jscript`混合（应该保存为`bat`）。它再次使用 jscript 尽管有 OP 请求，但由于它是一个 bat，它可以被称为 bat 文件而无需担心。它使用[POPUP](http://msdn.microsoft.com/en-us/library/x83z1d9f(v=vs.84).aspx)允许更多的控制比更多populae [MSGBOX](http://msdn.microsoft.com/en-us/library/sfw6660x(v=vs.84).aspx)。它使用 WSH ，但不像上面的例子那样使用 MSHTA。

```
 @if (@x)==(@y) @end /***** jscript comment ******
     @echo off

     cscript //E:JScript //nologo "%~f0" "%~nx0" %*
     exit /b 0

 @if (@x)==(@y) @end ******  end comment *********/

var wshShell = WScript.CreateObject("WScript.Shell");
var args=WScript.Arguments;
var title=args.Item(0);

var timeout=-1;
var pressed_message="button pressed";
var timeout_message="timedout";
var message="";

function printHelp() {
    WScript.Echo(title + "[-title Title] [-timeout m] [-tom \"Time-out message\"] [-pbm \"Pressed button message\"]  [-message \"pop-up message\"]");
}

if (WScript.Arguments.Length==1){
    runPopup();
    WScript.Quit(0);
}

if (args.Item(1).toLowerCase() == "-help" ||  args.Item(1).toLowerCase() == "-h" ) {
    printHelp();
    WScript.Quit(0);
}

if (WScript.Arguments.Length % 2 == 0 ) {
    WScript.Echo("Illegal arguments ");
    printHelp();
    WScript.Quit(1);
}

for (var arg = 1 ; arg<args.Length;arg=arg+2) {

    if (args.Item(arg).toLowerCase() == "-title") {
        title = args.Item(arg+1);
    }

    if (args.Item(arg).toLowerCase() == "-timeout") {
        timeout = parseInt(args.Item(arg+1));
        if (isNaN(timeout)) {
            timeout=-1;
        }
    }

    if (args.Item(arg).toLowerCase() == "-tom") {
        timeout_message = args.Item(arg+1);
    }

    if (args.Item(arg).toLowerCase() == "-pbm") {
        pressed_message = args.Item(arg+1);
    }

    if (args.Item(arg).toLowerCase() == "-message") {
        message = args.Item(arg+1);
    }
}

function runPopup(){
    var btn = wshShell.Popup(message, timeout, title, 0x0 + 0x10);

    switch(btn) {
        // button pressed.
        case 1:
            WScript.Echo(pressed_message);
            break;

        // Timed out.
        case -1:
           WScript.Echo(timeout_message);
           break;
    }
}

runPopup(); 
```

示例用法（将等待 10 秒按是按钮）：

```
jsPopup.bat -title CoolTitile -t 10 -tom "time out" -pbm "press the button please" -message "love and peace" 
```

**4）**和一个 `jscript.net/.bat`混合（应该保存为`.bat`）。这次它使用`.NET`并编译一个`.exe`可以删除的小文件：

```
@if (@X)==(@Y) @end /****** silent jscript comment ******

@echo off
::::::::::::::::::::::::::::::::::::
:::       compile the script    ::::
::::::::::::::::::::::::::::::::::::
setlocal

::if exist "%~n0.exe" goto :skip_compilation

:: searching the latest installed .net framework
for /f "tokens=* delims=" %%v in ('dir /b /s /a:d /o:-n "%SystemRoot%\Microsoft.NET\Framework\v*"') do (
    if exist "%%v\jsc.exe" (
        rem :: the javascript.net compiler
        set "jsc=%%~dpsnfxv\jsc.exe"
        goto :break_loop
    )
)
echo jsc.exe not found && exit /b 0
:break_loop

call %jsc% /nologo /out:"%~n0.exe" "%~f0" 
::::::::::::::::::::::::::::::::::::
:::       end of compilation    ::::
::::::::::::::::::::::::::::::::::::
:skip_compilation

::
::::::::::
"%~n0.exe" %*
::::::::
::
endlocal
exit /b 0

****** end of jscript comment ******/

import System;
import System.WIndows;
import System.Windows.Forms

var arguments:String[] = Environment.GetCommandLineArgs();
MessageBox.Show(arguments[1],arguments[0]); 
```

示例用法：

```
netPopUp.bat "Roger That" 
```

**5）**最后一次调用powershell创建一个弹出窗口（如果安装了powershell，可以从命令行或批处理调用）：

```
powershell [Reflection.Assembly]::LoadWithPartialName("""System.Windows.Forms""");[Windows.Forms.MessageBox]::show("""Hello World""", """My PopUp Message Box""") 
```

**6）**虽然`msg`解决方案已经作为答案发布，但这是一种更好的使用方法：

```
msg * /self /w "hello world" 
```

`/self`是一个未记录的开关，它将强制 msg 仅将消息发送给当前用户。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-01-09T06:57:21.297

味精*你好世界

为我工作..

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-01-18T17:19:35.340

所以，我提出 cmdmsg.bat。

代码是：

```
@echo off
echo WScript.Quit MsgBox(%1, vbYesNo) > #.vbs
cscript //nologo #.vbs
echo. >%ERRORLEVEL%.cm
del #.vbs
exit /b 
```

还有一个示例文件：

```
@echo off 
cls 
call cmdmsg "hi select yes or no"

if exist "6.cm" call :yes
if exist "7.cm" call :no

:yes
cls
if exist "6.cm" del 6.cm
if exist "7.cm" del 7.cm
echo.
echo you selected yes
echo.
pause >nul
exit /b

:no
cls
if exist "6.cm" del 6.cm
if exist "7.cm" del 7.cm
echo.
echo aw man, you selected no
echo.
pause >nul
exit /b 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-20T14:46:11.540

您最好的选择是按照[Rob van der Woude 网站上的](http://www.robvanderwoude.com/usermessages.php)`NET SEND`记录使用。

否则，您将需要使用外部脚本程序。批处理文件实际上旨在通过`ECHO`.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-06-12T01:33:48.237

这很简单，因为我已经创建了几行代码来为你做这件事

所以设置一个变量为 msg 然后使用这个代码。它会在 VBS 消息框中弹出。

代码：

```
@echo off
echo %msg% >vbs.txt
copy vbs.txt vbs.vbs
del vbs.txt
start vbs.vbs
timeout /t 1
del vbs.vbs
cls 
```

这只是我想出的东西，它应该可以满足您的大多数消息需求，并且它也可以与 Spaces 一起使用，这与某些批处理脚本不同

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-10-11T18:27:22.610

发消息很容易，方法如下：

首先打开记事本并输入：

```
msg "Message",0,"Title" 
```

并将其保存为 Message.vbs。

现在在您的批处理文件类型中：

```
Message.vbs %* 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-03-19T12:30:12.307

## `msg * message goes here`

该方法非常简单易行，并且应该适用于我相信的任何批处理文件。此方法的唯一“缺点”是它一次只能显示 1 条消息，如果有多个消息，它将根据您将它们放入代码中的顺序依次显示。还要确保批处理文件中有不同的循环或连续运算符，否则它将自动关闭并且只会出现此消息。如果你需要一个“安静”的后台循环操作符，这里有一个：

## `pause >nul`

这应该让它保持运行，但在按下按钮后它将关闭。

还要在运行时保持所有命令“安静”，以便它们只是运行而不显示它们已输入到文件中，只需将以下行放在批处理文件的开头：

## `@echo off`

我希望所有这些提示有所帮助！

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-03-02T03:58:58.867

我根据这里和其他帖子中的好答案整理了一个脚本

您可以设置标题超时甚至睡眠以安排后者和 \n 用于新行

您还可以将按键返回到变量 ( `%pop.key%`)。

[这](https://stackoverflow.com/a/60087350/12327655)是我的代码

# sql - MS Access 中的批量数据插入

> ID：12514482
> 
> 赞同：0
> 
> 时间：2012-09-20T14:10:54.203
> 
> 标签：sql, database, ms-access

我有一个 .mdb 文件，它被一个特定的应用程序用作数据存储。应用程序本身没有插入大量数据的工具，我需要插入大约 300-400 条生成的记录。

不使用VB怎么能做到这一点？（因为我对此一无所知）起初我以为写一个程序，但据我所知，Access 不支持过程和函数（这真的很奇怪），只支持基本的 SQL 语句。

是否可以将数据导出到 Postgre 等其他数据库，在那里编写和运行程序，然后将数据重新导入 .mdb 文件？还是有其他解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T17:25:08.197

如果您要从特定表中导出数据，请选择该表并右键单击它。将出现一个菜单，允许您导出该特定表的内容。选择格式（可能是 .csv 或 .txt 以获得最大的灵活性），然后将其导入到任何位置并进行相应的操作。

如果要重新导入结果，请从文件 -> 获取外部数据 -> 导入菜单中选择并导入新处理的数据。那应该这样做。只需确保数据列与您导入的表正确对齐。这不应该需要任何 VBA。此建议与 Access 2003 相关。

# r - 缺乏拟合总和或平方测试包

> ID：12514484
> 
> 赞同：3
> 
> 时间：2012-09-20T14:10:55.593
> 
> 标签：r

有谁知道 R 中有一个很好的包来计算线性回归的 SSPE（纯平方和误差）和 SSLF（缺乏拟合平方和）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T15:37:51.560

我正在看这个，想知道为什么没有人站出来回答这个看似非常简单的问题。也许我的假设a）SSPE与通常称为总平方和（又名TSS）的相同，b）SSLP通常被称为（TSS-model SS）都是错误的，这是一个更复杂的问题。时间会证明一切。如果这两个假设是正确的，那么基数 R 中的`summary`和`anova`函数就是答案：

```
?summary.lm
?anova 
```

这可能与 stats.stackexchange 问题重叠：[https](https://stats.stackexchange.com/questions/36064/calculating-r-squared-coefficient-of-determination-with-centered-vs-un-center) ://stats.stackexchange.com/questions/36064/calculating-r-squared-coefficient-of-determination-with-centered-vs-un-center 尽管我认为这些问题略有不同。

# ios - iOS 会显示弹出窗口以更新到最新的 iOS 吗？

> ID：12514497
> 
> 赞同：1
> 
> 时间：2012-09-20T14:11:28.473
> 
> 标签：ios, ios5, ios6

我们使用 iOS 5.1.1 开发了一个 kiosk 类型的应用程序。现在 iOS 6 出来了，我想知道 Apple 是否会随机显示一个弹出窗口来更新到 iOS 6？显然，我们还不想更新，也不希望我们的最终用户在使用信息亭时看到这个弹出窗口。

如果有弹出窗口，有没有办法关闭它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T14:34:09.893

@狮子座。你不正确。我打开我的 iPad，它只是在我的屏幕上弹出一个蓝色警报窗口，上面写着“Apple 已发布更新，等等，升级到 iOS6”。

因此，为了确认，它确实显示了一个弹出窗口。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T15:42:44.863

坏消息，大家（对不起，没有全屏，因为有一个私人应用程序）：![在此处输入图像描述](../Images/7b11442ff5fc347ab61fe449135442b2.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T16:52:26.037

我们处于类似的情况，支持网络的 iPad 被用作信息亭。我们认为进入

设置 -> 常规 -> 软件更新 -> 了解更多

然后单击模式上的完成按钮将防止@A-Live 的答案中显示的弹出窗口再次发生。不幸的是，这作为一个真正的解决方案有点难以测试，但我们这样做的 iPad 没有显示弹出窗口。

# c# - 以另一种形式显示一个gridView的行信息

> ID：12514507
> 
> 赞同：0
> 
> 时间：2012-09-20T14:11:59.947
> 
> 标签：c#, winforms

我的表格中有一个 GridView（表格 1），我希望双击其中的某些记录以另一种表格（表格 2）显示所有记录信息。

这是我双击它时用来从gridView获取dataRow的代码：

```
 private void gridControl1_DoubleClick(object sender, EventArgs e)
        {
            DataRow row = gridView1.GetDataRow(gridView1.GetSelectedRows()[0]);
        } 
```

但我不知道如何以另一种形式（FORM 2）显示行信息。

***表格1：*** ![在此处输入图像描述](../Images/8377a07bc0a13228cd30d39beb5fc740.png)

***表格2：***

![在此处输入图像描述](../Images/6c6cdbca6077cab7a27597ac4d3c2265.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T14:14:01.943

[在表单之间传递数据](http://www.c-sharpcorner.com/UploadFile/thiagu304/passdata05172006234318PM/passdata.aspx)

基本上：

```
 DataRow row = gridView1.GetDataRow(gridView1.GetSelectedRows()[0]);
  Form2 frm = new Form2(row);
  frm.Show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T18:56:32.823

我不这么认为，将表单构造函数参数化是个好主意，有时会带来麻烦

```
 Form2 frm = new Form2();
  frm.SourceRow = gridView1.GetDataRow(gridView1.GetSelectedRows()[0]);
  frm.Show(); 
```

# c++ - 遍历字符串c ++中的行

> ID：12514510
> 
> 赞同：13
> 
> 时间：2012-09-20T14:12:14.187
> 
> 标签：c++, string, join, split

这就是我需要做的。我在 C++ 中有一个字符串。对于字符串中的每一行，我需要在行首附加几个字符（如“>>”）。我正在努力解决的问题是将字符串拆分为换行符，遍历附加字符的元素，然后将字符串重新连接在一起。我已经看到了一些想法，例如`strtok()`，但我希望 c++ 字符串会有一些更优雅的东西。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-20T14:19:21.677

这是一个直截了当的解决方案。也许不是最有效的，但除非这是热代码或字符串很大，否则应该没问题。我们假设您的输入字符串被称为`input`：

```
#include <string>
#include <sstream>

std::string result;

std::istringstream iss(input);

for (std::string line; std::getline(iss, line); )
{
    result += ">> " + line + "\n";
}

// now use "result" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-20T14:33:59.400

更实用的方法是使用`getline`-based 迭代器，如[this answer](https://stackoverflow.com/a/1567703/91757)所示，然后使用 with[`std::transform`](http://en.cppreference.com/w/cpp/algorithm/transform)来转换所有输入行，如下所示：

```
std::string transmogrify( const std::string &s ) {
    struct Local {
        static std::string indentLine( const std::string &s ) {
            return ">> " + s;
        }
    };

    std::istringstream input( s );
    std::ostringstream output;
    std::transform( std::istream_iterator<line>( input ), 
                    std::istream_iterator<line>(),
                    std::ostream_iterator<std::string>( output, "\n" ),
                    Local::indentLine );
    return output.str();
} 
```

助手实际上缩进了行，`indentLine`换行符由`ostream_iterator`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-20T14:16:26.387

如果您的字符串中的数据基本上就像一个文件，请尝试使用[`std::stringstream`.](http://en.cppreference.com/w/cpp/io/basic_stringstream)

```
std::istringstream lines( string_of_lines );
std::ostringstream indented_lines;
std::string one_line;
while ( getline( lines, one_line ) ) {
    indented_lines << ">> " << one_line << '\n';
}
std::cout << indented_lines.str(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T14:22:35.470

您可以将其包装在 a 中`stringstream`并用于`std::getline`一次提取一行：

```
std::string transmogrify(std::string const & in) {
    std::istringstream ss(in);
    std::string line, out;
    while (getline(ss, line)) {
        out += ">> ";
        out += line;
        out += '\n';
    }
    return out;
} 
```

# c++ - /fp:strict 和 /fp:precise 之间的区别？

> ID：12514516
> 
> 赞同：15
> 
> 时间：2012-09-20T14:12:23.890
> 
> 标签：c++, visual-c++, floating-point, floating-point-precision, visual-studio-2010

什么时候使用 fp:strict 而不是 fp:precise？如果我想要“更精确”的计算并避免舍入错误，使用前者会更好吗？使用其中任何一种的启发式方法是什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-20T14:32:59.373

标准 IEEE 754 指定了浮点计算和在内存中存储浮点值的方法。

使用`fp:strict`意味着遵守 IEEE 754 的所有规则。`fp:strict`用于维持不同编译器和平台之间的按位兼容性。

`fp:precise`削弱了一些规则，但它保证不会丢失计算的精度。

`fp:fast`允许编译器对包含浮点计算的表达式进行特定的优化和转换。这是最快的方法，但不同的编译器和平台的结果会有所不同。

# javascript - 单击滚动时的jQuery不起作用

> ID：12514520
> 
> 赞同：0
> 
> 时间：2012-09-20T14:12:32.893
> 
> 标签：javascript, jquery, wordpress

单击图像右侧的白色块应该滑到 Wonder-diner 页面，但它似乎没有做任何事情。

[http://www.wondercafe.co.uk/test/](http://www.wondercafe.co.uk/test/)

我在元素检查器中收到以下错误消息：

加载资源失败：服务器响应状态为 404（未找到）

```
 <script type="text/javascript">
$.getDocHeight = function(){
    return Math.max(
        $(document).height(),
        $(window).height(),
        /* For opera: */
        document.documentElement.clientHeight
    );
    };
    $(document).ready(function() {
        $('#wonder-diner #ajax-wrapper').load('/node/10 #wonder-diner', function() {
            $('#wonder-diner #wonder-diner #clicker').remove();
            $('#wonder-diner #ajax-wrapper #scroll').jScrollPane();
            var centerwidth = $(window).width() - $('#sidebar-left').width() - $('#clicker').width() - $('#center').width() - 15;
        $('#wonder-diner #center').css({ 'left' : centerwidth / 2 + $('#clicker').width() + 2.5, 'margin' : '0', 'position' : 'absolute' });
        if ($(window).width() < 937) {
            $('#wonder-diner #center').css({ 'right' : '230px' });
        }

            var contentHeight = $.getDocHeight() - ($('#footer').height() + 15) - (26 + 15) - 80; // Height of window - (footer height + padding bottom) - (margin top of #aqueeze + padding top) - padding on .inside
        $('#wonder-diner #wrapper #container #center .inside').css({'height' : contentHeight});
        $('#wonder-diner #scroll').css({'height' : contentHeight});
        $('#wonder-diner #scroll').not($('.page-food-drink #scroll, .page-roastery-coffees #scroll')).jScrollPane({ verticalDragMaxHeight: 100 });

        $(window).bind('resize', function () {

    var contentHeight = $.getDocHeight() - ($('#footer').height() + 15) - (26 + 15) - 80; // Height of window - (footer height + padding bottom) - (margin top of #aqueeze + padding top) - padding on .inside
    $('#wonder-diner #wrapper #container #center .inside').css({'height' : contentHeight});
    var centerwidth = $(window).width() - $('#sidebar-left').width() - $('#clicker').width() - $('#center').width() - 15;
    $('#wonder-diner #center').css({ 'left' : centerwidth / 2 + $('#clicker').width() + 2.5, 'margin' : '0', 'position' : 'absolute' });
    $('#wonder-diner #scroll').css({'height' : contentHeight});
    $('#wonder-diner #scroll').not($('.page-food-drink #scroll, .page-roastery-coffees #scroll')).jScrollPane({ verticalDragMaxHeight: 100 });

    if ($(window).width() < 937) {
        $('#wonder-diner #center').css({ 'right' : '230px' });
    }

});
        });
        $('.scrollPage').click(function() {
            var elementClicked = $(this).attr("href");
            var destination = $(elementClicked).offset().left;
            $("html:not(:animated),body:not(:animated)").animate({ scrollLeft: destination}, 500, 'linear' );
        return false;
        });

        $('li.menu-2409 a').click(function() {
            var elementClicked = $(this).attr("href");
            var destination = $(elementClicked).offset().left;
            $("#holder").animate({
                    left: '-100%'
                }, 500, 'linear');
            return false;
        });
        $('li.menu-2456 a').live('click', function() {
            //var elementClicked = $(this).attr("href");
            var destination = $('#restaurant').offset().left;
            $("#holder").animate({
                    left: '0'
                }, 500, 'linear');
            return false;
        });
    });
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T14:22:12.490

`.load('/node/10 #wonder-diner'`不是正确的 URL。

# entity-framework - 实体框架代码优先数据迁移不适用于 VS2012 Web 部署

> ID：12514521
> 
> 赞同：9
> 
> 时间：2012-09-20T14:12:36.340
> 
> 标签：entity-framework, code-first, webdeploy, entity-framework-migrations

我使用 Visual Studio 2012、.NET 4.5 和 Entity Framework 5.0 创建了一个 MVC 3.0 应用程序。

使用 Code First 数据迁移，我能够正确地将模型更改传播到我的本地测试数据库，但是在使用 Web Deploy 部署到我的登台和生产服务器时，我无法弄清楚如何让它工作。

我已阅读以下文章...

[http://msdn.microsoft.com/en-us/library/dd394698(v=vs.110)#dbdacfx](http://msdn.microsoft.com/en-us/library/dd394698(v=vs.110)#dbdacfx)

...这解释了应该发生的事情，但它对我不起作用，因为 Web Deploy 似乎无法检测到我正在使用实体框架。本教程显示了一个复选框以启用 Code First 迁移的执行...

![Web 部署发布对话框](../Images/2ee1d5058382a0314e9e220dbcab8434.png)

...但我的对话框显示每个数据库的唯一`Update Database`复选框。

我已经读过，为了让 Visual Studio 检测实体框架上下文的使用，`Web.config`必须包含一个定义它的元素。这是我的：

```
<entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework" />

    <contexts>
        <context type="MyContext, MyAssembly">
            <databaseInitializer type="System.Data.Entity.MigrateDatabaseToLatestVersion`2[[MyContext, MyAssembly], [MyConfig, MyAssembly]], EntityFramework">
                <parameters>
                    <parameter value="MyConnectionStringName"/>
                </parameters>
            </databaseInitializer>
        </context>
    </contexts>
</entityFramework> 
```

任何建议将不胜感激。

谢谢，

蒂姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T15:00:25.243

我通过实验发现了这个问题的解决方案。

事实上，我的 MVC 应用程序是由 VS2012 通过从 VS2010 解决方案转换而来的。由于转换过程没有报告任何问题，我认为它已经正确转换了所有内容，包括发布配置文件。

但是，我发现问题出在这些配置文件的转换中，除非我手动编辑它们的 XML 文件，否则显然没有办法让旧的导入配置文件参与 Code First 迁移。

只需在转换后的解决方案中创建新的发布配置文件即可产生预期的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-23T13:01:46.810

试试这个：启用迁移-强制

确保以下设置为 true AutomaticMigrationsEnabled = true;

重新发布 - 为我工作

# php - PHP PDO 包装器更新 +1

> ID：12514528
> 
> 赞同：0
> 
> 时间：2012-09-20T14:12:57.603
> 
> 标签：php, mysql, database, pdo

如标题所述，如何通过添加 +1 来更新字段？

我正在使用来自[http://www.imavex.com/php-pdo-wrapper-class/index.php的 PDO 包装器类](http://www.imavex.com/php-pdo-wrapper-class/index.php)

我尝试了下面的代码，但它没有更新该字段：

```
1\. $update = array('log' => 'log+1');
2\. $update = array('log' => '+1');

$DB->update('user', $update, "idClient = 1"); 
```

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T14:17:44.320

这是您最终要寻找的查询：

```
"UPDATE user SET log = log + 1 WHERE idClient = 1"; 
```

使用该`PDO`语法，我假设它看起来像：

```
$update = array('log' => 'log +1');
$DB->update('user', $update, 'idClient = 1'); 
```

* * *

编辑：

需要记录错误，请查看： [https ://stackoverflow.com/a/2413308/185672](https://stackoverflow.com/a/2413308/185672)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T14:32:35.767

你也可以试试这个方法也很安全

```
$sql = 'UPDATE user SET log = log + 1 WHERE ( idClient = :userid )';
$prepStatement = $pdo->prepare( $sql );
$prepStatement->execute(array(':userid' => 1)); 
```

# asp.net - 为本地网络托管 ASP.NET 文件

> ID：12514532
> 
> 赞同：1
> 
> 时间：2012-09-20T14:13:13.830
> 
> 标签：asp.net, vb.net, iis-express

我正在尝试设置一个需要由本地网络上的用户仅使用 IIS Express（最新版本）访问的站点，我可以通过 URL **http://timesheet:8080**访问它，但是，没有其他联网机器可以通过此 URL 访问它。

*applicationhost.config*文件中的`<sites>`部分内容如下：

 *```
 <sites>
        <site name="Final Time Planning" id="1">
            <application path="/" applicationPool="Clr4IntegratedAppPool">
                <virtualDirectory path="/" physicalPath="T:\Public$\Temp\Charlie\Web\Final Time Planning" />
            </application>
            <bindings>
                <binding protocol="http" bindingInformation="*:8080:timesheet" />
            </bindings>
        </site>

        <siteDefaults>
            <logFile logFormat="W3C" directory="%IIS_USER_HOME%\Logs" />
            <traceFailedRequestsLogging directory="%IIS_USER_HOME%\TraceLogFiles" enabled="true" maxLogFileSizeKB="1024" />
        </siteDefaults>
        <applicationDefaults applicationPool="Clr4IntegratedAppPool" />
        <virtualDirectoryDefaults allowSubDirConfig="true" />
    </sites> 
```

我还在我的主机文件中添加了“时间表”，本地 IP 为 127.0.0.1。

我究竟做错了什么？任何建议都非常感谢。如果您需要更多信息，请随时询问。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T14:15:06.013

你说：

> 我还在我的主机文件中添加了“时间表”，本地 IP 为 127.0.0.1。

您是否在所有试图访问您站点的计算机的主机文件中添加了一行，指向您的 PC 的 IP 地址？

此外，您可能需要[启用远程请求](https://stackoverflow.com/questions/3313616/iis-express-enable-external-request)

**编辑** 鉴于您无法访问主机文件/DNS 配置，我认为您最好的选择是将 IIS Express 配置为侦听**任何**主机名。然后，有人可以访问它，`http://yourmachinename:8080/`或者`http://timesheets:8080/`取决于他们是否可以解决`timesheets`.

将您的 bindingInformation 属性更改为

```
bindingInformation="*:8080:" 
```*

# matlab - 从点创建 3D 逻辑蒙版

> ID：12514533
> 
> 赞同：-1
> 
> 时间：2012-09-20T14:13:14.937
> 
> 标签：matlab, points

我有一组 3D 点指定对象表面上的点。从这些观点出发，我需要构建一个 3D 逻辑蒙版。matlab怎么解决这个问题？希望能得到一些见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T21:20:20.833

如果您有“曲线拟合工具箱”，则可以将曲面公式拟合到数据中。如果您现在是确切的类型（如球、锥体......），您可以将其定义为适合的公式。

也许您可以提供一些示例数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T21:35:04.033

```
% parameters
num_coordinates = 100;
max_coordinate = 20;
% generate random coordinate
x = sort(randi(max_coordinate, [num_coordinates, 1]));
y = sort(randi(max_coordinate, [num_coordinates, 1]));
z = sort(randi(max_coordinate, [num_coordinates, 1]));
% create the mask
mask = false(max_coordinate, max_coordinate, max_coordinate);
for k = 1 : length(x)
    mask(x(k), y(k), z(k)) = true;
end 
```

如果速度很重要，我想有一个更快的解决方案。

# html - JQueryMobile 按钮组配置

> ID：12514534
> 
> 赞同：0
> 
> 时间：2012-09-20T14:13:22.783
> 
> 标签：html, jquery-mobile

JQueryMobile 提供水平[分组按钮](http://jquerymobile.com/test/docs/buttons/buttons-grouped.html)的功能：

```
BtnA | BtnB 
```

或垂直：

```
BtnA
----
BtnB 
```

通过`controlgroup`配置。

是否可以进行以下设置，包括水平和垂直放置：

```
BtnA | BtnB
-----------
BtnC | BtnD 
```

如果是，如何？`controlgroup`在这种情况下有什么替代方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T14:44:35.727

尝试使用 JQM 内容网格像这样：

```
 <div class="ui-grid-a">
            <div class="ui-block-a"><button type="button" data-theme="c">Previous</button></div>
            <div class="ui-block-b"><button type="button" data-theme="c">Next</button></div>      
            <div class="ui-block-a"><button type="button" data-theme="c">Previous</button></div>
            <div class="ui-block-b"><button type="button" data-theme="c">Next</button></div>     
        </div> 
```

这是一个演示：http: [//jsfiddle.net/ashanova/kkf9w/](http://jsfiddle.net/ashanova/kkf9w/)

继承人 JQM 文档：http: [//jquerymobile.com/test/docs/content/content-grids.html](http://jquerymobile.com/test/docs/content/content-grids.html)

# java - Hibernate Criteria 等价于 SQL 查询

> ID：12514536
> 
> 赞同：0
> 
> 时间：2012-09-20T14:13:28.727
> 
> 标签：java, hibernate

我有一个要求，我需要从表中找到所有超过 180 天的行。为此，我编写了以下 SQL 查询：

```
SELECT * FROM table_name WHERE 
(EXTRACT (DAY  FROM (CURRENT_TIMESTAMP - UPDATE_TS))) > 180 
```

在上面的查询中，**UPDATE_TS**是一个存储每行时间戳的列。

我在 Oracle 中运行了上述查询，它返回了所需的结果。

我正在使用 Hibernate 进行数据持久性，所以我想使用 Hibernate Criteria API 来做同样的事情。我在 Hibernate 中工作不多，所以发现它有点困难。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T16:40:31.060

Hibernate 查询语言将是您的理想选择。

```
from YourEntity e where (day(current_date()) - day(e.myDate)) > 180 
```

我没有测试过这个 HQL，但类似的东西应该可以工作。阅读 HQL： [http ://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T14:25:05.777

您可以获得 CURRENT_DATE | 之一 当前时间 | CURRENT_TIMESTAMP 用于 JPQL 中的日期/时间操作。我没有看到`EXTRACT`任何实现中的用法。所以你可能想直接比较天数？查看[JPQL 文档](http://docs.oracle.com/html/E24396_01/ejb3_langref.html#ejb3_langref_datetime)以获取更多详细信息。

# database - 无法理解解释计划中成本关键字与时间的相关性

> ID：12514541
> 
> 赞同：0
> 
> 时间：2012-09-20T14:14:07.183
> 
> 标签：database, postgresql, postgresql-8.4, sql-execution-plan

当我在查询下运行时

```
explain
select count(*) over() as t_totalcnt,  max(hits) over() as t_maxhits,  max(bytes) over() as t_maxbytes, * 
from 
(
    select category,sum(hits) as hits,sum(bytes) as bytes 
    from (
        select "5mintime",category,hits,bytes,appid, 0 as tmpfield
       from web_categoryutfv1_24hr_ts_201209 
       where "5mintime" >='2012-09-12 00:00:00' and "5mintime" < '2012-09-19 00:00:00'
    ) as tmp  
    where "5mintime" >='2012-09-12 00:00:00' 
    and "5mintime" <= '2012-09-18 23:59:59' 
    and appid in ('') group by category order by hits desc 
) as foo 
limit 10; 
```

我得到以下输出

```
 Limit  (**cost=31.31..31.61** rows=10 width=580)
  ->  WindowAgg  (**cost=31.31..32.03** rows=24 width=580)   
  ->  Subquery Scan foo  (cost=31.31..31.61 rows=24 width=580)
     ->  Sort  (**cost=31.31..31.37** rows=24 width=31)
        Sort Key: (sum(web_categoryutfv1_24hr_ts_201209.hits))
               ->  HashAggregate  (**cost=30.39..30.75** rows=24 width=31)
                    ->  Seq Scan on web_categoryutfv1_24hr_ts_201209  (cost=0.00..27.60 rows=373 width=31)
            Filter: (("5mintime" >= '2012-09-12 00:00:00'::timestamp without time zone) 
                   AND ("5mintime" < '2012-09-19 00:00:00'::timestamp without time zone)
                   AND ("5mintime" >= '2012-09-12 00:00:00'::timestamp without time zone)
                   AND ("5mintime" <= '2012-09-18 23:59:59'::timestamp without time zone)
                   AND ((appid)::text = ''::text)) 
```

当我在没有解释标签的情况下运行上面的查询时。我在 1 秒内得到输出，而这里 cost=31.31..31.61。

任何人请帮我理解解释计划中的成本关键字是什么意思我的意思是解释计划中的成本关键字单位？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T17:22:47.737

成本是查询计划者对操作难度或执行所需时间的估计。它基于一些机器级参数——例如，磁盘查找与流式读取相比需要多长时间——以及表级信息，例如每行有多大、有多少行或值的分布在每一列。没有单位，产生的成本值是任意的。成本是 PostgreSQL 用来确定如何执行查询的指标；它将考虑执行查询的多种方式并选择成本最低的计划。有关成本计算的更多详细信息，请参阅[Planner 成本约束](http://www.postgresql.org/docs/9.2/static/runtime-config-query.html#RUNTIME-CONFIG-QUERY-CONSTANTS)。

假设您使用的是默认设置，那么顺序扫描的成本如此之低表明 PostgreSQL 认为该表中的行数不多。运行需要整整一秒钟的事实表明，事实上，该表中有很多行。您可以通过说 告诉 PostgreSQL 收集有关该表的新统计信息`ANALYZE web_categoryutfv1_24hr_ts_201209`。无论如何，该`pg_autovacuum`过程应该定期收集统计信息，但也许您使用的是旧版本的 PostgreSQL，或者它有一段时间没有运行，或者谁知道；无论如何，再次手动操作并没有什么坏处。

如果 PostgreSQL 认为表很小，它会更喜欢顺序扫描而不是使用索引，因为整个表的顺序读取比索引扫描然后是一堆随机读取要快。另一方面，如果 PostgreSQL 认为表很大，那么在`5mintime`and/or上引用索引可能会更快`appid`，假设所述索引将允许它排除许多行。如果您没有这样的索引，请考虑创建一个。

最后一件事：`EXPLAIN`有一个名叫`EXPLAIN ANALYZE`. 虽然`EXPLAIN`向您显示 PostgreSQL 将选择的查询计划以及指导其决策的成本，但`EXPLAIN ANALYZE`实际执行查询并向您显示每个组件运行多长时间。有关更多信息，请参见[解释](http://www.postgresql.org/docs/9.2/static/sql-explain.html)。

# node.js - Node.js 作为服务器脚本

> ID：12514544
> 
> 赞同：0
> 
> 时间：2012-09-20T14:14:25.017
> 
> 标签：node.js

> **可能重复：**
> [如何在 Node.JS 中退出](https://stackoverflow.com/questions/5266152/how-to-exit-in-node-js)

我正在使用 node.js 在后台导入一些数据，并且我将使用 cron 在后台每隔一天运行一次脚本。我不需要它来听。节点脚本运行后如何退出？我应该使用 process.exit() 还是有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T16:57:12.433

如果它没有绑定到数据库或端口上的列表，它将自动关闭。如果您已连接到数据库并需要关闭进程，则`process.exit();`在清理连接后使用。

# c - 如何在 Linux 中手动查找目录？

> ID：12514553
> 
> 赞同：2
> 
> 时间：2012-09-20T14:14:40.860
> 
> 标签：c, directory, find, xv6

我即将编写一个显示 linux 中当前目录的命令。我知道我可以使用“pwd”命令，但这就是我需要自己实现的！...换句话说，当输入所谓的“findme”命令时，我想返回我所在的目录片刻。我已经设法创建了我的“findme”命令（这很简单，我知道），但是我应该如何知道在执行命令后我在哪里，以便显示整个目录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T21:37:15.853

这似乎是一个相当奇怪的要求：“实施 pwd”（这不是家庭作业，是吗？）。你能提供更多的背景信息吗？

可能相关的信息是：

*   该目录`..`链接到父目录和`.`当前目录；所以...
*   将目录更改`..`为文件系统中的上一级（除非您位于顶部）；加
*   每个目录都有一个“inode number”，所以如果你考虑一个 directory `foo`，那么它和*目录* `foo/.`都将具有相同的 inode 编号。

我不知道它`pwd`实际上是如何做到的，但我会花钱你可以用这些信息重新实现它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T09:15:11.843

XV6 与 GNU/Linux 完全不同。pwd 没有在 UNIX V6 中实现，这就是为什么它是一个很好的练习。您可能希望将 getcwd() 实现为系统调用。

# iphone - UIToolBar 加载不正确

> ID：12514554
> 
> 赞同：0
> 
> 时间：2012-09-20T14:14:45.060
> 
> 标签：iphone, ios, xcode, uitoolbar

在更改了一些构建设置以发布应用程序后，我发现 UIToolbar 现在无法正确加载。

我很确定这不是代码问题，而是我意外更改的 Xcode 设置 - 任何人都可以帮忙吗？

以下是问题前后的截图。

前：

![问题之前](../Images/75eba9e026be3ce05127c5e2855e572c.png)

后：

![问题后](../Images/df3b75dc19db06c25a2ffee2e01ce437.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:28:07.023

看起来您正在某处重置大小（查看注销按钮如何偏移和左上角）。此外，看起来还有另一个蓝色按钮，您只能看到右侧的边缘。您似乎错误地设置了项目框架。您可能希望在相关项目之前和之后执行 NSLog 以查看它们被设置为什么，然后您可以追踪谁在设置它们。

# android - 在 2.2 错误上运行片段 - 找不到类

> ID：12514556
> 
> 赞同：2
> 
> 时间：2012-09-20T14:14:46.980
> 
> 标签：android, android-fragments, android-compatibility

我正在尝试使我的应用程序向后兼容 Android 2.2。

我有 Fragments、ListFragments、FragmentPagerAdapter 和 ActionBarSherlock 都在发生。

我已经包含了 android 支持库，并且构建在我的 android 4.1 设备上完美运行，但在 2.2 设备上，我得到以下内容：

```
09-21 00:10:32.867: I/dalvikvm(1229): Failed resolving Lanother/music/player/AlbumListFragment; interface 521 'Landroid/widget/SearchView$OnQueryTextListener;'
09-21 00:10:32.877: W/dalvikvm(1229): Link of class 'Lanother/music/player/AlbumListFragment;' failed
09-21 00:10:32.877: E/dalvikvm(1229): Could not find class 'another.music.player.AlbumListFragment', referenced from method another.music.player.MainActivity.<init>
09-21 00:10:32.877: W/dalvikvm(1229): VFY: unable to resolve new-instance 531 (Lanother/music/player/AlbumListFragment;) in Lanother/music/player/MainActivity;
09-21 00:10:32.877: I/dalvikvm(1229): Could not find method another.music.player.MainActivity.getActionBar, referenced from method another.music.player.MainActivity.onCreate
09-21 00:10:32.887: W/dalvikvm(1229): VFY: unable to resolve virtual method 3906: Lanother/music/player/MainActivity;.getActionBar ()Landroid/app/ActionBar;
09-21 00:10:32.887: I/dalvikvm(1229): Failed resolving Lanother/music/player/AlbumListFragment; interface 521 'Landroid/widget/SearchView$OnQueryTextListener;'
09-21 00:10:32.887: W/dalvikvm(1229): Link of class 'Lanother/music/player/AlbumListFragment;' failed
09-21 00:10:32.887: E/dalvikvm(1229): Could not find class 'another.music.player.AlbumListFragment', referenced from method another.music.player.MainActivity.onListItemClicked
09-21 00:10:32.887: W/dalvikvm(1229): VFY: unable to resolve new-instance 531 (Lanother/music/player/AlbumListFragment;) in Lanother/music/player/MainActivity;
09-21 00:10:32.887: I/dalvikvm(1229): Failed resolving Lanother/music/player/SongListFragment; interface 521 'Landroid/widget/SearchView$OnQueryTextListener;'
09-21 00:10:32.887: W/dalvikvm(1229): Link of class 'Lanother/music/player/SongListFragment;' failed
09-21 00:10:32.887: E/dalvikvm(1229): Could not find class 'another.music.player.SongListFragment', referenced from method another.music.player.MainActivity.onListItemClicked
09-21 00:10:32.887: W/dalvikvm(1229): VFY: unable to resolve new-instance 576 (Lanother/music/player/SongListFragment;) in Lanother/music/player/MainActivity;
09-21 00:10:32.887: I/dalvikvm(1229): Could not find method another.music.player.MainActivity.getActionBar, referenced from method another.music.player.MainActivity.onOptionsItemSelected
09-21 00:10:32.887: W/dalvikvm(1229): VFY: unable to resolve virtual method 3906: Lanother/music/player/MainActivity;.getActionBar ()Landroid/app/ActionBar;
09-21 00:10:32.887: I/dalvikvm(1229): Failed resolving Lanother/music/player/AlbumListFragment; interface 521 'Landroid/widget/SearchView$OnQueryTextListener;'
09-21 00:10:32.887: W/dalvikvm(1229): Link of class 'Lanother/music/player/AlbumListFragment;' failed
09-21 00:10:32.887: E/dalvikvm(1229): Could not find class 'another.music.player.AlbumListFragment', referenced from method another.music.player.MainActivity.onOptionsItemSelected
09-21 00:10:32.887: W/dalvikvm(1229): VFY: unable to resolve new-instance 531 (Lanother/music/player/AlbumListFragment;) in Lanother/music/player/MainActivity;
09-21 00:10:32.897: I/dalvikvm(1229): Could not find method android.support.v4.app.FragmentActivity.getActionBar, referenced from method another.music.player.ArtistListFragment.onListItemClick
09-21 00:10:32.897: W/dalvikvm(1229): VFY: unable to resolve virtual method 810: Landroid/support/v4/app/FragmentActivity;.getActionBar ()Landroid/app/ActionBar; 
```

我已经玩了几个小时了，但我只是不知道该尝试什么。任何建议表示赞赏。如果您需要查看一些代码，请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T03:42:58.907

在阅读了我自己的 SO 问题后，我意识到我并没有正确地解释以下内容：

```
09-21 00:10:32.867: I/dalvikvm(1229): Failed resolving Lanother/music/player/AlbumListFragment; interface 521 'Landroid/widget/SearchView$OnQueryTextListener; 
```

ActionBarSherlock 似乎不支持 onQueryTextListener 和其他一些元素。反正我也不需要这些方法，所以我把它们从活动中去掉，问题就解决了。

我想onQueryTextChange在4.1设备上是原生支持的，但在2.2设备上（actionBar由ActionBarsherlock支持），这些方法是不支持的。

# c# - 使用元数据 c# ASP.NET 将文档上传到 SharePoint

> ID：12514557
> 
> 赞同：0
> 
> 时间：2012-09-20T14:14:48.803
> 
> 标签：c#, asp.net, file-upload, sharepoint-2010, metadata

我正在开发一个使用 Web 服务将文档上传到 Sharepoint 的网站。我有一个可以工作并上传到 Sharepoint 的网络服务。但是，我需要将元数据添加到正在上传的文件中，例如数据库记录中的名字、姓氏、出生日期等，以及来自站点的实时数据。该数据类似于“工作流程编号”、“协议编号”、“文档类型”，这些数据在站点上生成并与该成员和文档相关联。

这是代码：

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Web;
using Microsoft.SharePoint.Client;

namespace DCTMAgent
{
    public class SharePoint
    {               
        internal void SPUploader(Stream fs, string fn)
        {
            ClientContext context = new ClientContext("http://SharepointSite/Home.aspx");

            System.Net.ICredentials creds = System.Net.CredentialCache.DefaultCredentials;

            context.Credentials = creds;
            context.RequestTimeout = 60000000; // Time in milliseconds

            string url = "/Members/";
            string fileName = Path.GetFileName(fn);                   

            string fnUrl = url + fn;
            Microsoft.SharePoint.Client.File.SaveBinaryDirect(context, fnUrl, fs, true);           
        }       
    }
} 
```

如何更改此设置以将元数据与文档一起上传？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T12:07:18.390

这是我的解决方案：

```
 public class SharePoint
        {
            internal void SPUploader(Stream fs, string fn)
             {
                ClientContext context = new ClientContext("http://Sharepointsite");///SitePages/Home.aspx");
                System.Net.ICredentials creds = System.Net.CredentialCache.DefaultCredentials;

                context.Credentials = creds;
                context.RequestTimeout = 60000000; // Time in milliseconds

                string url = "/Members/";
                string fileName = Path.GetFileName(fn);                   

                string fnUrl = url + fn;

                Microsoft.SharePoint.Client.File.SaveBinaryDirect(context, fnUrl, fs, true);

                string uniqueRefNo = GetNextDocRefNo();

                SP.Web web = context.Web;

                Microsoft.SharePoint.Client.File newFile = web.GetFileByServerRelativeUrl(fnUrl);
                context.Load(newFile);
                context.ExecuteQuery();

                Web site = context.Web;
                List docList = site.Lists.GetByTitle("Members");

                context.Load(docList);
                context.ExecuteQuery();

                context.Load(docList.Fields.GetByTitle("Workflow Number"));
                context.Load(docList.Fields.GetByTitle("Agreement Number"));
                context.Load(docList.Fields.GetByTitle("First Name"));
                context.Load(docList.Fields.GetByTitle("Surname"));
                context.Load(docList.Fields.GetByTitle("ID Number"));
                context.Load(docList.Fields.GetByTitle("Date of Birth"));
                context.Load(docList.Fields.GetByTitle("Country"));
                context.Load(docList.Fields.GetByTitle("Document Description"));
                context.Load(docList.Fields.GetByTitle("Document Type"));
                context.Load(docList.Fields.GetByTitle("Document Group"));

                context.ExecuteQuery();                                

*********NEED TO GET THE INTERNAL COLUMN NAMES FROM SHAREPOINT************
                var name = docList.Fields.GetByTitle("Workflow Number").InternalName;
                var name2 = docList.Fields.GetByTitle("Agreement Number").InternalName;
                var name3 = docList.Fields.GetByTitle("First Name").InternalName;
                var name4 = docList.Fields.GetByTitle("Surname").InternalName;
                var name5 = docList.Fields.GetByTitle("ID Number").InternalName;
                var name6 = docList.Fields.GetByTitle("Date of Birth").InternalName;
                var name7 = docList.Fields.GetByTitle("Country").InternalName;
                var name8 = docList.Fields.GetByTitle("Document Description").InternalName;
                var name9 = docList.Fields.GetByTitle("Document Type").InternalName;
                var name10 = docList.Fields.GetByTitle("Document Group").InternalName;
                var name11 = docList.Fields.GetByTitle("Unique Document Ref No").InternalName;     

**********NOW SAVE THE METADATA TO SHAREPOINT**********
                newFile.ListItemAllFields[name] = "927015";
                newFile.ListItemAllFields[name2] = "1234565";
                newFile.ListItemAllFields[name3] = "Joe";
                newFile.ListItemAllFields[name4] = "Soap";
                newFile.ListItemAllFields[name5] = "7502015147852";
                newFile.ListItemAllFields[name6] = "1975-02-01";
                newFile.ListItemAllFields[name7] = "ZA";
                newFile.ListItemAllFields[name8] = "Test";
                newFile.ListItemAllFields[name9] = "Requirements";
                newFile.ListItemAllFields[name10] = "Requirements";
                newFile.ListItemAllFields[name11] = uniqueRefNo;

                newFile.ListItemAllFields.Update();
                context.Load(newFile);
                context.ExecuteQuery(); 
```

# php - 为什么我不能直接访问带有索引的数组？

> ID：12514558
> 
> 赞同：9
> 
> 时间：2012-09-20T14:14:49.643
> 
> 标签：php

当我试图用它的索引直接访问一个数组元素时，我感到很困惑。我想我可以在编码中更好地解释它：-

我有一个员工类的对象，我将它的类型转换为数组并尝试像这样显示它：

```
$arrOfObj = (array) $objEmployee;

$arrKeys = array_keys( $arrOfObj );

display( $arrOfObj ); // display() is a method in my library that prints an array in a mannered way. 
```

这给了我以下输出：-

```
Array
(
   [*m_UserId] => 1155
   [*m_EmailPassword] => 
   [*m_IsAssignedToManagementCompany] => 
   [*m_ManagementCompanyId] => 
   [*m_DepartmentId] => 3
   [*m_DesignationId] => 4
   [*m_EmployeeCompletedMonth] => 
   [*m_EmployeeCompletedDay] => 
   [*m_EmailAddress] =>showket.mca@gmail.com
   ------
   ------
 ) 
```

现在在这里我不明白这个星（*）。当我的成员变量很简单时，例如 m_UserId、m_EmialPassword 等等，它从哪里得到这个 Star。当我尝试使用以下 2 条语句显示相同内容时，出现错误：-

```
display( $arrOfObj['*m_EmailAddress'] ); 
```

**或者**

```
display( $arrOfObj['m_EmailAddress'] ); 
```

两者都给出错误消息**Undefined index: m_EmailAddress**

当我尝试这样做时，它工作正常：-

```
display( $arrOfObj[$arrKeys[8]] ); 
```

最后一个工作正常，谁能解释我的问题。

```
 display( $arrOfObj[$arrKeys[11]] );
            display( $arrOfObj['m_strEmailAddress'] ); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-20T14:20:12.220

> 如果将对象转换为数组，则结果是一个数组，其元素是对象的属性。键是成员变量名，有几个值得注意的例外：整数属性不可访问；私有变量在变量名前面加上类名；**受保护的变量在变量名前有一个“*”。这些前置值在两边都有空字节。**
> 
> [http://php.net/manual/en/language.types.array.php#language.types.array.casting](http://php.net/manual/en/language.types.array.php#language.types.array.casting)

尝试`var_dump(bin2hex($arrKeys[8]))`启蒙。另请参阅上述链接手册中的示例。

# android - 侧边导航，如新 Play Store 中的新功能 android viewpager 中的两个片段

> ID：12514561
> 
> 赞同：0
> 
> 时间：2012-09-20T14:15:09.627
> 
> 标签：android, android-fragments, android-viewpager, google-play

我有这个问题：

我想要在 android 中作为 play store 的效果，特别是 view pager，其中有两个片段，但第一个完全在 viewpager 中，而第二个在其中存在 50%。

我看到很多帖子，例如：

http://stackoverflow.com/questions/9693836/fragmentpageradapter-swipe-to-show-listview-1-3-screen-width

或 http://www.androiduipatterns.com/2012/06/emerging-ui-pattern-side-navigation.html

但解决方案是一个不记得“页面标题”的动画，它应该是这样的图像：！[标题如 google play 或 play store][1]

[http://imageshack.us/photo/my-images/819/firstxr.png/](http://imageshack.us/photo/my-images/819/firstxr.png/)

[http://imageshack.us/photo/my-images/228/secondfy.png/](http://imageshack.us/photo/my-images/228/secondfy.png/)

谢谢大家

# java - @ManyToOne(optional=true/false) 没有被模式自动更新选择

> ID：12514563
> 
> 赞同：0
> 
> 时间：2012-09-20T14:15:14.220
> 
> 标签：java, hibernate

我有 DB 列标记为：

```
@ManyToOne(optional = false)
MyObject field; 
```

当我检查创建的数据库架构时，它被正确地创建为：

```
FIELD BIGINT NOT NULL 
```

现在我想让引用成为非强制性的，并且我想以一种我不需要自己接触架构的方式来做。我希望*hbm2ddl 架构更新*过程能够处理它。

我认为在这种情况下很容易，`@Column(nullable=true/false)`但由于它是运行时指令，因此模式更新似乎`@ManyToOne(optional=true/false)`不会接收到变化。

知道如何进行更改吗？

谢谢

**编辑：**认为添加 @JoinColumn(nullable = true) 可能会有所帮助，但它没有。问题仍在进行中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T14:53:39.783

据我所知，你不能改变它。您必须设置 ManyToOne 可选 true ，然后设置 @Columns(nullable = false ) 。

# css - 如何设置父 div 高度以自我适应内部 div 高度？

> ID：12514564
> 
> 赞同：1
> 
> 时间：2012-09-20T14:15:14.217
> 
> 标签：css, html

我有一个父 div 和 2 个子 div，如下所示：

```
<div class="parent">
    <div style="height:100px; float:left;" >
        aaa
    </div>
    <div style="height:200px; float:left;">
        bbb
    </div>
</div>​ 
```

如何设置“父”css以适应内部div的最大高度？在这种情况下：200px

PS：既不`height=100%`也不`height=auto`工作。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T14:22:05.813

父 div 不采用其内容的高度，因为内部 div 是浮动的。在关闭父 div 之前，您必须清除浮动。试试这个：

```
<div class="parent">
    <div style="height:100px; float:left;" >
        aaa
    </div> 
    <div style="height:200px; float:left;">
        bbb
    </div>
    <div style="clear:both"></div>
</div>​ 
```

* * *

**编辑**：您可能想看看这篇 w3c 文章，了解有关浮动和清除的深入信息：http: [//www.w3.org/wiki/Floats_and_clearing](http://www.w3.org/wiki/Floats_and_clearing)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T14:28:12.063

你也可以在父元素上“overflow:hidden”，但是如果你想让事情脱离那个div（例如负边距、盒子阴影等），你可能会遇到问题。

```
<div class="parent" style="overflow: hidden;">
    <div style="height:100px; float:left;" >
        aaa
    </div>
    <div style="height:200px; float:left;">
        bbb
    </div>
</div>​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T10:41:25.130

我遵循了[peterp](https://stackoverflow.com/users/1006823/peterp)提供的链接，并想引用他们提到的一种方法，该方法对我有用。这种方法首先在他们的列表中，并被*简单地*描述为:)

**做外层`div`也`float`**

```
<div class="parent" style="float:left;"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-21T10:29:49.380

您需要添加 style="clear:both"

```
<div class="parent">
       <div style="height:100px; float:left;" >
           asljkdh        
       </div> 
       <div style="height:200px; float:left;">
          bbb 
       </div>
       <div style="clear:both"></div> <!-- Add this Line-->
     </div>​ 
```

# sql-server-2008-r2 - 有没有办法在 SSMS 的新查询窗口中不让 Intellisense 默认为“开启”？

> ID：12514566
> 
> 赞同：2
> 
> 时间：2012-09-20T14:15:16.413
> 
> 标签：sql-server-2008-r2, intellisense, ssms

我正在对 SQL Server 2008 R2 数据库使用 SSMS (v10.50.2500.0)。我已经安装了[SQL Prompt](http://www.red-gate.com/products/sql-development/sql-prompt/)，并且每当我打开一个新的查询窗口并开始编写查询时，我都厌倦了被内置 SSMS Intellisense 错误地标记为红线。SSMS 中是否有一个选项可以在打开新查询窗口时将本机 Intellisense 默认为关闭？我找不到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T14:20:01.277

从菜单系统：

工具 -> 选项

然后向下钻取：

文本编辑器 -> Transact-SQL -> Intellisense

在那里你会看到“启用智能感知”复选框

![在此处输入图像描述](../Images/cfb0bc9ba7566e538f991d2f11d77be4.png)

# php - 由于相对定位导致的 HTML 布局额外间距

> ID：12514568
> 
> 赞同：0
> 
> 时间：2012-09-20T14:15:28.923
> 
> 标签：php, css, html, position

我已在以下链接上上传了一张图片，该图片显示了我的 html 页面的布局。但我应该坚持以下进展来制作该布局（即由于一些限制和时间问题而修复排序）。

[http://tinyurl.com/9rs9m5y](http://tinyurl.com/9rs9m5y)

问题是内容下方存在额外的空白，由于相对定位而到达那里（是的，我也不能使用绝对定位）。有什么办法可以去掉那个空格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T14:29:52.817

`position:relative`在这种布局中绝对不需要。您应该使用浮点数。您的 SEARCH 应该是 HEADER 的一部分，而不是使用相对定位侵入位置。您的正确导航也是如此。

你真的需要重新考虑你的整个 HTML 结构。

# spotify - 如何按照应用指南中的说明在 Spotify 应用中创建指向艺术家、曲目或专辑的链接？

> ID：12514569
> 
> 赞同：1
> 
> 时间：2012-09-20T14:15:30.960
> 
> 标签：spotify

[应用程序设计指南的第 16 点](https://developer.spotify.com/technologies/apps/guidelines/02_app-design-guidelines.html)描述了指向艺术家、曲目或专辑的链接应该是什么样子，但我找不到一个地方可以告诉人们如何使用 HTML/CSS 和/或 Javascript 创建这样的链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:55:25.583

```
<a href="spotify:album:65YwWxg4kkvzsD91hvels1">Horse Of a Different Color</a> 
```

客户将足够聪明地做正确的事。您可以从API 中的、`Track`和对象获取这些 URI 。`Artist``Album``Playlist`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T20:02:58.767

解决方案非常简单……这就是我们在这里讨论的玩家视图。看这个例子：

```
var sp = getSpotifyApi(1);
var models = sp.require("sp://import/scripts/api/models");
var views = sp.require("sp://import/scripts/api/views");

$(document).ready(function()
{
    new models.Album.fromURI("spotify:album:7auFBtmCGcTn7ElPelMLPn", function(ctx)
    {
        var player = new views.Player();
        player.context = ctx;

        $("#my-album-player").append(player.node);
    });
}); 
```

感谢[ikenndac](https://stackoverflow.com/users/29005/ikenndac)让我走上了正确的道路！

# c++ - inFile 应该放在 -o 标志之前还是之后？

> ID：12514572
> 
> 赞同：0
> 
> 时间：2012-09-20T14:15:37.783
> 
> 标签：c++, g++, gnu

假设你有几个文件，比如“file1.C”和“file2.C”，那么它们可以被编译成一个名为“myprog”的可执行程序

我注意到在一些教程中使用了以下命令：

```
g++ file1.C file2.C -o myprog 
```

而其他人：

```
g++ -o myprog  file1.C file2.C 
```

我的问题是这两种形式本质上是一样的吗？哪个更正式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T17:32:28.493

参数可以是任何顺序。至于哪个更正式——经销商的选择！

# c# - 在 C# 中返回没有后代的 XElement

> ID：12514575
> 
> 赞同：5
> 
> 时间：2012-09-20T14:15:45.907
> 
> 标签：c#, xml, linq-to-xml

当然这很简单，但它现在暗指我，我想将 XDocument 的顶级节点作为 XElement 返回，但不返回它的任何后代：

寻找以下内容，但它不起作用

```
XElement myElement = myXDocument.Root.Element(); 
```

只想返回

```
<Response xmlns="someurl" xmlnsLi="thew3url">
</Response> 
```

从

```
 <Response xmlns="someurl" xmlnsLi="thew3url">   
    <ErrorCode></ErrorCode>            
    <Status>Success</Status>    
    <Result>
    <Manufacturer>
                <ManufacturerID>46</ManufacturerID>
                <ManufacturerName>APPLE</ManufacturerName>
    </Manufacturer>    
    </Result> 
 </Response> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-20T14:20:34.847

有两种方法可以做到这一点：

*   制作 , 的浅拷贝`XElement`并添加属性，或
*   制作 , 的深层副本`XElement`并删除子元素。

第一种方式浪费较少，尤其是当元素有很多子节点时。

这是第一种方法：

```
XElement res = new XElement(myElement.Name);
res.Add(myElement.Attributes().ToArray()); 
```

这里是第二种方式：

```
XElement res = new XElement(myElement);
res.RemoveNodes(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T15:14:30.653

```
class Program
{
    static void Main(string[] args)
    {
        string xml = "<Response xmlns=\"someurl\" xmlnsLi=\"thew3url\">"
                   + "<ErrorCode></ErrorCode>"
+ "<Status>Success</Status>"
+ "<Result>"
+ "<Manufacturer>"
            + "<ManufacturerID>46</ManufacturerID>"
            + "<ManufacturerName>APPLE</ManufacturerName>"
+ "</Manufacturer>"
+ "</Result>"
+ "</Response>";

        XmlDocument doc = new XmlDocument();
        doc.LoadXml(xml);

        var root = doc.FirstChild;

        for (int i = root.ChildNodes.Count - 1; i >= 0; i--)
        {
            root.RemoveChild(root.ChildNodes[i]);
        }

        Console.WriteLine(doc.InnerXml);
        Console.ReadKey();
    }
} 
```

# jsf-2 - JSF2下载文件返回xhtml页面源

> ID：12514576
> 
> 赞同：0
> 
> 时间：2012-09-20T14:15:50.003
> 
> 标签：jsf-2, primefaces

我已经为此工作了几个小时：

当按下按钮时，我需要生成 XML 并将其下载给用户。我已经尝试将 primefaces StreamedContent 与 p:fileDownload 一起使用 - 但我得到的唯一输出是实际页面的 .xhtml 源。我可以在返回 StreamedContent 之前使用日志语句来显示它的内容，并且我可以在那里正确地看到我的 XML 代码，但是下载的文件总是有页面源代码。（我也尝试了很多其他方法，下载 jpg 文件，更改 bean 以直接生成响应并通过 h:commandButton 中的操作调用方法 - 始终获取页面源！）。

这是我的 .xhtml ：

```
 <p:commandButton value="Create XML Bid/Offer" 
                 id="createXMLButton" 
             disabled="#{portfolioBean.noPortfolioSelected}"
                 ajax="false"
                 icon="ui-icon-arrowthichk-s">
    <p:fileDownload value="#{portfolioBean.order}" />  
</p:commandButton> 
```

（备用）

```
 <h:commandButton value="Create XML Bid/Offer" 
    id="createXMLButton" 
    disabled="#{portfolioBean.noPortfolioSelected}"
     ajax="false"
    icon="ui-icon-arrowthichk-s"
    action="#{portfolioBean.download()}" /> 
```

和支持 bean 方法：

```
 public StreamedContent getOrder() {
...
} 
```

（备用）

```
 public String download() {
...
} 
```

我没有包含方法体，因为我知道它们返回正确的 XML……这似乎真的是 JSF 魔法中的东西。这是配置问题还是什么？

谢谢！

**更新** 好的 - 我已经从我的代码中删除了所有内容，所以就是这样：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:p="http://primefaces.org/ui">
<h:head>
    <title>Edison Energy Portal</title>
</h:head>
<h:body>
    <h:form id="form">
        <h:commandButton value="Download PDF" action="#{downloadJPG.downloadFile}" />
     </h:form>
</h:body>
</html>

public class DownloadJPG {

// Constants ----------------------------------------------------------------------------------

private static final int DEFAULT_BUFFER_SIZE = 10240; // 10KB.

// Actions ------------------------------------------------------------------------------------

public void downloadFile() throws IOException {

    // Prepare.
    FacesContext facesContext = FacesContext.getCurrentInstance();
    ExternalContext externalContext = facesContext.getExternalContext();
    HttpServletResponse response = (HttpServletResponse) externalContext.getResponse();

    File file = new File("....", "....");
    BufferedInputStream input = null;
    BufferedOutputStream output = null;

    try {
        // Open file.
        input = new BufferedInputStream(new FileInputStream(file), DEFAULT_BUFFER_SIZE);

        // Init servlet response.
        response.reset();
        response.setHeader("Content-Type", "application/pdf");
        response.setHeader("Content-Length", String.valueOf(file.length()));
        response.setHeader("Content-Disposition", "inline; filename=\"...\"");
        output = new BufferedOutputStream(response.getOutputStream(), DEFAULT_BUFFER_SIZE);

        // Write file contents to response.
        byte[] buffer = new byte[DEFAULT_BUFFER_SIZE];
        int length;
        while ((length = input.read(buffer)) > 0) {
            output.write(buffer, 0, length);
        }

        // Finalize task.
        output.flush();
    } finally {
        // Gently close streams.
        close(output);
        close(input);
    }

    // Inform JSF that it doesn't need to handle response.
    // This is very important, otherwise you will get the following exception in the logs:
    // java.lang.IllegalStateException: Cannot forward after response has been committed.
    facesContext.responseComplete();
}

// Helpers (can be refactored to public utility class) ----------------------------------------

private static void close(Closeable resource) {
    if (resource != null) {
        try {
            resource.close();
        } catch (IOException e) {
            // Do your thing with the exception. Print it, log it or mail it. It may be useful to 
            // know that this will generally only be thrown when the client aborted the download.
            e.printStackTrace();
        }
    }
}

} 
```

我检查了我的源图像文件，它没有损坏。BalusC 的代码尝试了一次，然后我用 XML 文件替换了当前的 jpg，更改了 MIME 类型，此后没有任何效果。好像有什么不好的东西在tomcat中绊倒了，我无法将其取出或重置（我尝试通过eclipse手动清理tomcat，甚至重新启动我的盒子）。

这是一个真正的装腔作势者。

**更新**：我已经开始 eclipse clean - 没有运气。我真的没主意了。我不得不认为这是某处的配置，因为我知道这段代码可以工作（我已经看过了）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:46:48.617

鉴于没有其他人（甚至没有强大的人`BalusC`）回答，我将其发布为评论。

至于如何下载，[又见 BalusC 博客](http://balusc.blogspot.com.es/2006/05/pdf-handling.html)。如果您有空闲时间，值得浏览一下。

关于浏览器如何管理它的问题，它取决于浏览器的处理方式，无论如何大多数都应该尊重`Content-Disposition`标题。在示例中更改此行

```
response.setHeader("Content-Disposition", "inline; filename=\"" + getFileName() + "\""); 
```

至

```
response.setHeader("Content-Disposition", "attachment; filename\"" + getFileName() + "\""); 
```

[参考](http://www.jtricks.com/bits/content_disposition.html)

# asp.net-mvc - 命中错误：在解析器中找到 IControllerFactory 的实例以及自定义注册的提供程序

> ID：12514578
> 
> 赞同：7
> 
> 时间：2012-09-20T14:15:59.697
> 
> 标签：asp.net-mvc, asp.net-mvc-3, exception, castle-windsor, ioc-container

我们在某些环境中遇到了以下错误，似乎是在应用程序池回收之后。

> 在解析器中找到了 IControllerFactory 的实例，并在 ControllerBuilder.GetControllerFactory 中找到了自定义注册的提供程序。请只设置一个或另一个。

[我们没有使用 ControllerBuilder 来注册我们的控制器工厂，只使用 IDependencyResolver ，正如本博客](http://www.beletsky.net/2011/08/inside-aspnet-mvc-iresolver-and-its.html)中指出的那样

我们使用 Castle Windsor（看似无关）作为我们的容器，并在 Global.asax 的 Application_Start 中，首先注册我们所有的依赖项并调用以下内容来注册 IDepencencyResolver。

```
DependencyResolver.SetResolver(new WindsorDependencyResolver(IoC)); 
```

什么可能导致此异常？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T09:31:25.453

不建议将 MVC DependencyResolver 与 Castle Windsor 一起使用，因为它存在设计缺陷：它不会在应该发布服务实例时发布。有关完整说明，请参阅[本文](http://mikehadlow.blogspot.co.uk/2011/02/mvc-30-idependencyresolver-interface-is.html)。

相反，请使用[Windsor 文档](http://docs.castleproject.org/Windsor.Windsor-tutorial-part-two-plugging-Windsor-in.ashx)中说明的方法，该方法使用自定义工厂将依赖项注入控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-11T12:21:57.730

有关信息，我有相同的错误消息（使用 ninject）。我不明白为什么，因为该应用程序在其他机器上启动良好。我试图清除缓存...但错误仍然存​​在。我在我的存储库中重做了一个结帐，没关系...

# java - 支持创建“类似向导”的命令行应用程序的 Java 框架/库

> ID：12514580
> 
> 赞同：4
> 
> 时间：2012-09-20T14:16:09.203
> 
> 标签：java, command-line, groovy, build

我需要在 Java 和/或 Groovy 中创建一个交互式命令行应用程序来编排一个非常定制的构建和部署过程。

我目前的设想是，结果应该以某种方式感觉就像使用 maven 原型：将有一个“类似向导”的工作流程，在多个阶段提示用户输入。通常在启动应用程序时不会提供所有用户输入（即：用户提供一个 subversion-url，然后应用程序查询 subversion 以获取所有可用标签并将它们显示给用户并提示用户选择一个标签进行构建.. .)

是否有任何 Java/Groovy 库来支持构建这样的命令行应用程序？

到目前为止，我已经找到[了 JCommander](http://jcommander.org/)和[Groovy CliBuilder](http://groovy.codehaus.org/gapi/groovy/util/CliBuilder.html)。但是当涉及到“类似向导”的命令行应用程序时，它们似乎没有帮助，即在运行时的多个点查询用户输入。

任何指针将不胜感激......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T14:22:16.450

groovysh 在后台使用了一个 java 包[jLine](http://jline.sourceforge.net/)。它支持自定义选项卡完成、可保存的命令历史记录和命令行编辑。

我能找到的使用它的功能的最佳示例[是here](https://github.com/sandarenu/sample-apps/blob/master/java-cli-app/src/main/java/org/sansoft/samples/javacli/Shell.java)，但其他地方可能有更好的示例。

希望这就是你所追求的？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-03-27T21:29:02.753

我知道这是一个老问题，但也许这会对其他人有所帮助。[Spring Shell](https://docs.spring.io/spring-shell/docs/current/reference/htmlsingle/)是一个允许您创建交互式命令行用户界面的工具。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T16:39:37.750

我会试试 Apache Commons 命令行接口 API。这与您在使用 Ant 之类的工具时看到的设置相同。我不确定您正在寻找的向导方面，但这可能来自您创建的循环，然后从 API 中添加代码来处理输入。

这是 Apache Commons[命令行的链接](http://commons.apache.org/cli/)

# android - Http请求安卓

> ID：12514585
> 
> 赞同：0
> 
> 时间：2012-09-20T14:16:31.280
> 
> 标签：android, xmlhttprequest

我正在尝试将来自 EditText 的信息发布到 url，然后在应用程序上显示来自 Web 服务器的信息。我尝试了几种不同的方法来做到这一点，但每次尝试都会收到不同的错误消息。

我认为这与我正在编写网址有关，但我不知道该放在哪里，有什么想法吗？

```
@Override
public void onCreate(Bundle savedInstanceState) 
{
  super.onCreate(savedInstanceState);
  setContentView(R.layout.activity_main);

  Button button1 = (Button) findViewById(R.id.send_button);
  final EditText post = (EditText) findViewById(R.id.edit);

  button1.setOnClickListener(new OnClickListener() 
  {

      public void onClick(View v)
      { 

        System.out.println(executeHttpGetRequest("http://free.worldweatheronline.com/feed/weather.ashx?q="+ post.getText().toString() + "&format=json&num_of_days=2&key=9e87fcbce7114648121009"));

     }
  });

}  

private static String executeHttpGetRequest(String desiredUrl) throws Exception
{
    URL url = null;
    BufferedReader reader = null;
    StringBuilder stringBuilder;

    try
    {
        url = new URL(desiredUrl);
        HttpURLConnection connection = (HttpURLConnection) url.openConnection();

        connection.setRequestMethod("GET");

        connection.setReadTimeout(15*1000);
        connection.connect();

        reader = new BufferedReader(new InputStreamReader(connection.getInputStream()));
        stringBuilder = new StringBuilder();

        String line = null;
        while ((line = reader.readLine()) != null)
        {
            stringBuilder.append(line + "\n");
        }

        return stringBuilder.toString();
    }
        catch (Exception e)
        {
            e.printStackTrace();
            throw e;
        }
        finally
        {
            if (reader != null)
            {
                try
                {
                    reader.close();
                }
                catch (IOException ioe)
                {
                    ioe.printStackTrace();
                }
            }
        }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) 
{
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
} 
```

# activepivot - 配置关系存储联接时，我可以从 ActivePivot 存储执行一对多联接吗？

> ID：12514586
> 
> 赞同：3
> 
> 时间：2012-09-20T14:16:34.783
> 
> 标签：activepivot

使用关系存储，是否可以从 ActivePivot 存储到加入存储进行一对多联接。假设我的 ActivePivot 存储连接到 SOME_ID 上的另一个存储，但另一个存储的键是 SOME_ID，SOME_TYPE。那么就有可能：

```
AP_STORE SOME_ID | JOIN_STORE SOME_ID | JOIN_STORE SOME_TYPE
------------------------------------------------------------
      1          |      1             | TYPE1
      1          |      1             | TYPE2 
```

但是，当尝试加入时，会引发以下错误，因为加入存储中没有唯一的条目：

```
Caused by: com.quartetfs.fwk.QuartetRuntimeException: Impossible to find exactly 1 entry from store with key: Key 
```

我可以看到为什么会出现问题，因为 AP 存储中的单个记录确实需要成为两个单独的记录，分别连接到连接存储中的每个记录，但我想除非 JOIN_STORE 否则不会发生： SOME_TYPE 也是 AP 存储中的一个字段。

有没有办法从 AP 商店进行这种一对多的加入？

谢谢

编辑：需要明确的是，AP 商店中不存在 SOME_TYPE（即使使用不同的名称）。我已加入所有常用字段，但加入商店中有多个匹配条目。匹配条目在不常见且在 AP 存储中不存在的字段上有所不同。

如果我尝试添加 AP 商店中不存在的外键（即使使用不同的名称），我会得到：

```
Caused by: com.quartetfs.fwk.QuartetRuntimeException: com.quartetfs.fwk.AgentException: On join 'AP_STORE=>JOIN_STORE' the store 'AP_STORE' does not contain the foreign key 'FIELD_ONLY_IN_JOIN_STORE' in its fields: 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T08:53:15.323

A relational store join does not duplicate the data. You cannot, using the join of the relational stores, join one entry to multiple ones. You cannot use a multiple producing calculator with the relational stores neither.

Depending of your project architecture and workflow, you can consider adding a logic in the transaction handler used to feed your AP_Store. In this transaction handler, you could retrieve the entries of your Join_Store in order to duplicate the entries of your AP_Store.

You'll first need to change your AP_Store keys by adding a new fields used to differentiate your duplicates.

```
 AP_STORE SOME_ID | AP_STORE SOME_DUPLICATE_ID |JOIN_STORE SOME_ID | JOIN_STORE SOME_TYPE
    -----------------------------------------------------------------------------------------        
          1          |            1               |         1         |       TYPE1
          1          |            2               |         1         |       TYPE2 
```

For your transaction handler you can inject the StoresUniverse in order to retrieve your Join_Store and then do a search using the SOME_ID value on the Join_Store to retrieve the number of duplicates you'll need to create:

```
 IRelationalStore joinStore = storeUniverse.get("Join_Store");
    List<IRelationalEntry> joinEntries = joinStore.search("SOME_ID",apStoreObject.get("SOME_ID"));
    for(int i = 0; i < joinEntries.size(); i++) {
       // Clone apStoreObject, add a SOME_DUPLICATE_ID value and add it to the list of objects to add in your AP_Store
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T06:55:48.147

要将您的 AP 商店加入到joiningStore，您需要提供一组字段，这在 2 个商店之间是通用的。没有像这些字段是每个商店的关键字段这样的约束。

然后，如果您的 AP 存储中有一个表示 SOME_TYPE 的字段，只需将其添加为外键。

```
<property name="joins">
    <list>
        <bean class="com.quartetfs.tech.store.description.impl.JoinDescription">
             <property name="targetStoreName" value="JoiningStore" /> 
             <property name="foreignKeys" value="SOME_TYPE" /> 
        </bean>
    </list>
</property> 
```

如果joined store和joining store中的field有不同的名字，可以用一个map来描述joined store外键和joining field中关联字段的关系：

```
<property name="joins">
    <list>
        <bean class="com.quartetfs.tech.store.description.impl.JoinDescription">
             <property name="targetStoreName" value="JoiningStore" /> 
             <property name="foreignKeyMap" >
                 <map>
                      <entry key="AP_SOME_TYPE" value="SOME_TYPE" />
                 </map>
             </property>
        </bean>
    </list>
</property> 
```

# java - Spring - 如何从 BindingResult 中删除“FieldError”？

> ID：12514587
> 
> 赞同：11
> 
> 时间：2012-09-20T14:16:37.573
> 
> 标签：java, spring

我有一个`BindingResult result`已`FieldError`注册的字段`date`。如何消除此错误？

假设错误被添加为`result.rejectValue("date", "my_code", "my_message") ;`

提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-20T14:25:04.193

好吧，首先，BindingResult 是一个接口，而不是一个具体的类，并且该接口没有指定任何消除错误的方法。

根据您正在处理的接口的实现，可能有一种方法（超出 BindingResult 接口中指定的方法）来执行此操作，但似乎不太可能。

我能想到的唯一一件事是创建一个新的 BindingResult 实例，然后遍历错误并重新创建除了您想在新实例中忽略的所有错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-07-09T11:00:54.217

这是一个实现 @GreyBeardedGuy 答案的示例，假设您要删除`error`链接到`field`名为from`specialField`的`class` `MyModel`调用`modelAttribute`：`myModel``BindingResult` `result`

```
List<FieldError> errorsToKeep = result.getFieldErrors().stream()
                .filter(fer -> !fer.getField().equals("specialField "))
                .collect(Collectors.toList());

        result = new BeanPropertyBindingResult(vacancyDTO, "vacancyDTO");

        for (FieldError fieldError : errorsToKeep) {
            result.addError(fieldError);
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T15:21:27.657

重要的问题是，它最初是如何到达那里的？我假设`date`是一个 java.util.Date 字段并且由于格式问题而绑定失败？

例如，您输入`01/01/1970`并预期`1970-01-01`或类似的东西？这里的原因是因为 Spring MVC 有一个默认的日期绑定器。它需要获取日期的字符串表示形式并将其转换为 java.util.Date 并失败，因为它与适当的格式不匹配。

看看[@InitBinder](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/web/bind/annotation/InitBinder.html)以及如何覆盖[字符串到日期的](http://static.springsource.org/spring/docs/1.2.x/api/org/springframework/beans/propertyeditors/CustomDateEditor.html)转换以接受不同的格式。

# ruby-on-rails-3 - 每个块结果的 Rails div

> ID：12514589
> 
> 赞同：0
> 
> 时间：2012-09-20T14:16:43.587
> 
> 标签：ruby-on-rails-3, html, block

我有一个 Rails 3 应用程序，我在其中使用块来循环调用，如下所示：

```
<div class="blah">
<% @call.each  do |call|  %>
<%= link_to call.incident_number, call%>
<% end %>
</div> 
```

我想将 DIV 设置为具有圆角且具有一定大小的位置。这不是问题。但我注意到的是，对于块的每个结果，它都在同一个 DIV 中继续。我希望每个结果都有自己的 div，以便结果在页面上分开显示。

如何使用 DIV 执行此操作，其中块的每个结果都出现在其自己的 DIV 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T14:24:42.063

只需将您的方法包装`link_to`在 div`content_tag`中。

```
<% @call.each  do |call|  %>
  <%= content_tag :div, :class => "some_class" do %>
    <%= link_to call.incident_number, call %>
  <% end %>
<% end %> 
```

# python - 在python pandas中读取缺少值的文件

> ID：12514590
> 
> 赞同：13
> 
> 时间：2012-09-20T14:16:45.250
> 
> 标签：python, pandas

我尝试使用 pandas.read_csv 读取缺失值的 .txt。我的数据格式如下：

```
10/08/2012,12:10:10,name1,0.81,4.02,50;18.5701400N,4;07.7693770E,7.92,10.50,0.0106,4.30,0.0301
10/08/2012,12:10:11,name2,,,,,10.87,1.40,0.0099,9.70,0.0686 
```

具有相同名称的点、gps 位置和其他读数的数千个样本。我使用代码：

```
myData = read_csv('~/data.txt', sep=',', na_values='') 
```

代码错误，因为 na_values 没有给出 NaN 或其他指标。列应该具有相同的大小，但我以不同的长度完成。

我不知道在 na_values 之后应该输入什么（确实尝试了所有不同的东西）。谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-20T14:22:29.617

该参数`na_values`必须是“类似列表”（请参阅​​此[答案](https://stackoverflow.com/a/9941582/1240268)）。

一个字符串是“list like”，所以：

```
na_values='abc' # would transform the letters 'a', 'b' and 'c' each into `nan`
# is equivalent to
na_values=['a','b','c'] 
```

相似地：

```
na_values=''
# is equivalent to
na_values=[] # and this is not what you want! 
```

这意味着您需要使用`na_values=['']`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-20T15:41:55.347

你用的是什么版本的熊猫？将空字符串解释为 NaN 是 pandas 的默认行为，并且似乎在 v0.7.3 和当前 master 中都可以很好地解析数据片段中的空字符串，而根本不使用该`na_values`参数。

```
In [10]: data = """\
10/08/2012,12:10:10,name1,0.81,4.02,50;18.5701400N,4;07.7693770E,7.92,10.50,0.0106,4.30,0.0301
10/08/2012,12:10:11,name2,,,,,10.87,1.40,0.0099,9.70,0.0686
"""

In [11]: read_csv(StringIO(data), header=None).T
Out[11]: 
                   0           1
X.1       10/08/2012  10/08/2012
X.2         12:10:10    12:10:11
X.3            name1       name2
X.4             0.81         NaN
X.5             4.02         NaN
X.6   50;18.5701400N         NaN
X.7    4;07.7693770E         NaN
X.8             7.92       10.87
X.9             10.5         1.4
X.10          0.0106      0.0099
X.11             4.3         9.7
X.12          0.0301      0.0686 
```

# facebook-javascript-sdk - 使用 facebook javascript api 获取用户邮政编码

> ID：12514593
> 
> 赞同：2
> 
> 时间：2012-09-20T14:16:51.100
> 
> 标签：facebook-javascript-sdk

我正在尝试将 facebook 登录与我的网站集成，一切正常，但用于获取用户的邮政编码。我想获取用户的邮政编码。谁能帮我这个。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T08:41:57.853

API 不再允许您访问此类信息。

* * *

AFAIK，前段时间有可能访问用户的地址详细信息（在他们的许可下）——但 Facebook 已经禁用了它。我猜很可能是因为这些数据被广告商滥用了。

# php - 会话文件 - 它是什么时候准确创建的？

> ID：12514599
> 
> 赞同：3
> 
> 时间：2012-09-20T14:17:10.467
> 
> 标签：php, session, global-variables

我很想知道会话文本文件的确切创建时间？一个简单而表面的答案可能是......好吧，当你使用 session_start() 时。但是是吗？php脚本结束时会一直到最后吗？

是什么让我认为它可能在最后是我知道 PHP 不会在页面执行期间每次更改会话变量时写入会话文件。例如，如果您有类似`$_SESSION['x'] = $_SESSION['x'] + 1;`循环的内容，则会话文件不会**在**循环的每次迭代中都被修改。只有当 PHP 脚本完成后，PHP 引擎才会对文件进行更改，以存储`$_SESSION['x']`.

使用相同的逻辑，我认为 PHP 引擎没有理由在您调用 session_start 后立即创建文件。它可能只是延迟这个过程。

这意味着什么；

我可以使用 开始一个会话`session_start()`，设置一些会话变量，在函数中将它们扔掉，将它们用作全局变量，在脚本结束时，我取消设置它们，并销毁会话，因此，我假设没有会话文件已创建，因此不会遇到与创建会话文本文件相关的开销。

我想听听您对此的见解。

我的目的是探索严格使用会话变量作为临时占位符来左右传递全局变量的可能性——而不处理文件 I/O。事实上，我根本不需要下一页中的那些变量。

在这种情况下，会话能否证明比在函数中使用全局变量更快？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T14:27:43.403

经过测试，它会*立即*在`session_start`. 但是，`session_destroy`也将其删除。经测试：

```
mkdir sess && cd sess
vim main.php

session_save_path(dirname(__FILE__));
session_start();
sleep(5);
session_destroy();

php main.php &
ls # main.php   sess_rm4bcun6ear943mf61mdads190
fg # wait for script to end
ls # main.php 
```

你的问题就有答案了。您将`_SESSION`用于全局变量目的的想法不是一个好主意..您不妨使用`$GLOBALS`. 那里没有文件 IO。

# asp.net-mvc - .NET WebApi 身份验证

> ID：12514602
> 
> 赞同：6
> 
> 时间：2012-09-20T14:17:15.717
> 
> 标签：asp.net-mvc, rest, authentication, asp.net-web-api

目前，我有一个销售小部件的 MVC Web 应用程序。用户使用表单身份验证登录我们的系统，然后可以根据他们所属的组执行各种功能（即下订单、查看订单、取消订单等）。

我们的任务是编写一个 API，让第三方能够在我们的系统中创建和查看订单。每个第三方都有自己的用户名，并且会根据他们所属的组限制使用某些 api 方法。

我们正在研究使用 Web Api 作为提供 api 的机制。我们还希望能够从我们的 MVC Web 应用程序中使用这个 api。不幸的是，我们遇到了 Web Api 身份验证的问题。使用 DelegatingHandler，我们已经为我们的 WebApi 实现了基于 SSL 的基本身份验证。这对我们的第三方非常有用。但是，当尝试从我们的 MVC 应用程序使用 Api 时，我们会收到 401 access denied 错误，因为用户在 MVC 应用程序中使用 Forms 身份验证进行了身份验证，但我们无法将这些凭据传递给 Web Api。有没有办法将表单身份验证凭据从我们的 MVC 应用程序传递到我们的 Web api 应用程序？

IIS 设置网站名为 WidgetStore，带有两个 Web 应用程序

*   WidgetStore\UI - 使用表单身份验证
*   WidgetStore\Api - 使用基本身份验证

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-21T06:22:31.327

> 有没有办法将表单身份验证凭据从我们的 MVC 应用程序传递到我们的 Web api 应用程序？

当然，让我们以调用 Web API 的以下 MVC 控制器操作为例：

```
[Authorize]
public ActionResult CallWebApi()
{
    var baseAddress = new Uri("https://example.com");
    var cookieContainer = new CookieContainer();
    using (var handler = new HttpClientHandler() { CookieContainer = cookieContainer })
    using (var client = new HttpClient(handler) { BaseAddress = baseAddress })
    {
        var authCookie = Request.Cookies[FormsAuthentication.FormsCookieName].Value;
        cookieContainer.Add(baseAddress, new Cookie(FormsAuthentication.FormsCookieName, authCookie));
        var result = client.GetAsync("/api/values").Result;
        result.EnsureSuccessStatusCode();

        // now you can read the result.Content ...
    }
} 
```

这假设您还在 Web API 项目的 web.config 中启用了表单身份验证，并且 cookie 名称与 MVC 项目中使用的名称相同。

# windows-8 - 有没有办法为联系人选择器指定标题？

> ID：12514603
> 
> 赞同：0
> 
> 时间：2012-09-20T14:17:18.183
> 
> 标签：windows-8, contacts

单个/多个联系人选择器似乎没有任何指定标题的方法，因此用户突然面临来自人员中心的大量联系人列表。

当然，我们可以提前告诉用户，但这会增加一定程度的设计限制（例如，从应用栏按钮启动）。

我是否也缺少此 API，或者这是当前不受支持的场景？

# jquery - jquery mobile中的回调函数

> ID：12514610
> 
> 赞同：0
> 
> 时间：2012-09-20T14:17:44.377
> 
> 标签：jquery, jquery-mobile, callback

测试函数绑定到按钮单击事件。我是 jquerymobile 的新手，我正在尝试获取 JSON 响应。我已经完成了 JQUERY 文档所说的，但没有调用回调函数。

你能告诉我我做错了什么吗？

```
function test(evt) {

    // addNote($('#title').val(),$('#note').val());
    alert("hello");// <----This alert is displayed

    $.get("http://weather.yahooapis.com/forecastjson?w=2502265",{}, function (data) {
        alert("testing");//<--This alert is NOT displayed
        alert("Data Loaded: " + data);//<--This alert is NOT displayed
    }, "json");   

    alert("Hello");//// <----This alert is displayed
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T14:20:23.083

首先，`àlert("hello")`预计将在任何其他人之前开火。如果调用成功，将在某个时间点调用处理程序。

但是，由于跨站点策略，这不太可能发生。如果您查看开发控制台，您可能会看到类似`XMLHttpRequest cannot load http://weather.yahooapis.com/forecastjson?w=2502265&_=1348150852704\. Origin http://stackoverflow.com is not allowed by Access-Control-Allow-Origin.`

如果您希望为错误添加处理程序，您也可以这样做

只需将代码扩展为

```
$.get("http://weather.yahooapis.com/forecastjson?w=2502265",{}, function (data) {
alert("testing");//<--This alert is NOT displayed
alert("Data Loaded: " + data);//<--This alert is NOT displayed
}, "json").fail(function(jqXHR, textStatus) {
  alert( "Request failed: " + textStatus );
}); 
```

注意原始代码后的 .fail 。如果与远程服务器的通信出错，将调用提供的函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T14:28:31.990

我确定您的页面不在[http://weather.yahooapis.com](http://weather.yahooapis.com)网站上。除了您自己的站点（您的 html 页面从该站点下载）之外，您不得进行 ajax 调用以从任意站点获取数据，这称为同源策略！如果你想从其他站点获取数据，你应该使用 json-rpc，即动态创建一个脚本标签并将 src 属性设置为你要获取数据的地址。如果该站点支持这样的协议，它会将请求的数据作为 js 片段返回，并作为 GET 参数的集合调用回调。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T16:08:17.860

由于相同的源策略，您不能从不同的域发出请求。

您可以向其他域发出 JSONP 请求，但问题是您调用的 Web 服务器返回的是 JSON，而不是 JSONP。但是，我刚刚建立了一个您可以使用的 JSON/JSONP 代理。它将向您指定的 URL 发出请求，将其转换为 JSONP 并返回。

调用代理并将 Yahoo URL 放入`url`参数中，并将数据类型更改为`"jsonp"`：

```
$.get("http://jsonp.guffa.com/Proxy.ashx?url=weather.yahooapis.com%2fforecastjson%3fw=2502265",{}, function (data) {
  ...
, "jsonp"); 
```

演示：http: [//jsfiddle.net/Guffa/bwZMZ/](http://jsfiddle.net/Guffa/bwZMZ/)

信息页面：http: [//jsonp.guffa.com/](http://jsonp.guffa.com/)

# r - 如何用乳胶注释（）ggplot

> ID：12514612
> 
> 赞同：52
> 
> 时间：2012-09-20T14:17:54.737
> 
> 标签：r, ggplot2

我想使用`annotate()`. 使用`expression()`，如[here](https://stackoverflow.com/questions/1395105/getting-latex-into-r-plots)所述将乳胶添加到轴标签，似乎不起作用。以机智：

```
# Use expression() to create subscripted text
p <- ggplot(mpg, aes(x=cty, y=hwy)) + geom_point() +
  scale_x_continuous(expression(text[subscript])) 

# But expression() in annotate adds nothing to the plot
p + annotate("text", x=10, y=40, label=expression(text[subscript])) 

# Passing regular text to annotate works fine
p + annotate("text", x=10, y=40, label="foo") 
```

为什么`expression`s 与`annotate`其他 ggplot 函数的处理方式不同？我怎样才能用乳胶注释？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2016-11-10T13:11:39.813

有一个`R`名为的软件包`latex2exp`可能会有所帮助。它具有`TeX`接受一些用美元符号括起来的 LaTeX 表达式的函数，`$`如下例所示：

```
library(latex2exp)
library(ggplot2)

qplot(1, "A")+
     ylab(TeX("Formula: $\\frac{2hc^2}{\\lambda^\\beta}$"))+
     xlab(TeX("$\\alpha$")) 
```

[![例子](../Images/aa6ac8b018c4684a21eaf698e8f9883b.png)](https://i.stack.imgur.com/WNhJj.png)

更多示例可在[此小插图](https://cran.r-project.org/web/packages/latex2exp/vignettes/using-latex2exp.html)中找到。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-09-20T14:32:46.237

您可以使用`parse`参数，而不使用`expression`：

```
p + annotate("text", x=10, y=40, label="text[subscript]", parse=TRUE) 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2015-12-19T15:42:11.360

tikzDevice包[重新](https://cran.r-project.org/web/packages/tikzDevice/)回到 CRAN（2015 年 11 月发布的最新版本 0.9）。

使用`tikz`确实需要完整的 LaTeX 安装；`knitr`在 LaTeX 文档中通过它可能是最简单的（只需`dev="tikz"`在块选项中设置）。但是，您也可以使用它来创建独立的图形。具有讽刺意味的是，这个问题最难的部分是获得一个文本下标，这需要一个额外的 LaTeX 包 ( `fixltx2e`) 用于`\textsubscript`命令......

```
library(tikzDevice)
## add a package to the defaults
options(tikzLatexPackages=
            c(getOption("tikzLatexPackages"),"\\usepackage{fixltx2e}"))
tikz("tikz.tex",standAlone=TRUE)
library("ggplot2"); theme_set(theme_bw())
p <- ggplot(mpg, aes(x=cty, y=hwy)) + geom_point() +
  scale_x_continuous(name="text\\textsubscript{subscript}")
p + annotate("text", x=10, y=40, label="text\\textsubscript{subscript}")
dev.off()

system("pdflatex tikz.tex") 
```

[![在此处输入图像描述](../Images/7e9e9f2e87108e3a822280b148b1a004.png)](https://i.stack.imgur.com/7rqD1.png)

# sharepoint - SharePoint 下拉列表筛选器

> ID：12514616
> 
> 赞同：1
> 
> 时间：2012-09-20T14:18:02.957
> 
> 标签：sharepoint

我希望能够根据存在的值过滤 SharePoint 列表（通过单击每列列表顶部的过滤器按钮很容易）。但是，我想在下拉菜单中提供选项，一旦选择，列表将根据我提供的选项重新填充。这是否可以在浏览器中执行，还是需要设计器或实际代码？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T19:47:17.417

这是所有 SharePoint 2010 Enterprise Server 知识；我没用过2007。

@Ryan 在这里暗示的是，您可以单击大多数列表列上的向下箭头来过滤它们。一个警告是，如果该列是多选的，它将不会显示下拉列表。（SharePoint 不知道如何对多选列进行分组、筛选或排序。）另一个警告可能是，如果您以不显示标题的方式显示列表项（例如在列表视图 web 部件，或者可能是某些样式......）您显然无法过滤。

一种解决方案可能是使用“SharePoint 列表筛选器”Web 部件，它使用列表列作为筛选值的来源，然后可以将这些值发送到其他 Web 部件，例如列表视图 Web 部件。据推测，您可以使用要过滤的列表作为过滤器 Web 部件本身的源。从用户体验的角度来看，这可能会帮助您以不同的样式显示列表，但仍然可以直接在内容区域中获得下拉过滤器。

“SharePoint 列表筛选器”Web 部件的一个警告是，它实际上并不是一个下拉菜单*，*而是显示一个小的筛选器图标，该图标会弹出一个对话框，然后用户必须在其中选择一个值。

请注意，还有“托管元数据导航”功能可为用户提供下拉菜单（例如选择列）和元数据过滤器字段（用于托管元数据列）。如果在列表/库设置中配置，这些将显示在快速启动（左侧导航区域）中。必须首先在站点上启用该功能。

# c++ - C++11 segfault 中基于范围的 for 循环，但不是常规 for 循环

> ID：12514617
> 
> 赞同：7
> 
> 时间：2012-09-20T14:18:02.627
> 
> 标签：c++, for-loop, c++11, segmentation-fault, auto

```
//fills my vector with pointers.
//(some are pointing places, others are set to nullptr  
vector<Tree_NodeT*> xml_trees {Build_Tree_List(program_options->Get_Files())};

//time to print them
for (auto tree = xml_trees.begin(); tree != xml_trees.end(); ++tree){
    if (*tree){
        (*tree)->Print(std::cout,4);
    }
}
//this worked! No Segfaults!

//time to print them again
for (auto tree : xml_trees){
    if (tree){
        tree->Print(std::cout,4);
    }
}
//Crash! Segfault. 
```

为什么第二个循环有段错误，而第一个循环没有？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T14:34:02.760

**编辑：**
我是个骗子。
正在创建 Tree_NodeT 指针，但未**在**Build_Tree_List 函数中的某处初始化为 nullptr。因此，我得到了一个向量，其中一些指针指向有效内存，而另一些只是新构造的指针，没有设置为空或没有给定任何地址。有趣的是，第一个循环能够在不崩溃的情况下处理这个问题，而第二个循环出现了段错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T14:40:20.357

您的 for 循环范围相当于：

```
for (auto it = xml_trees.begin(); it != xml_trees.end(); ++it) {
    auto tree = *it;
    if (tree){
        (tree)->Print(std::cout,4);
    }
} 
```

不同之处在于 for 循环的范围是复制构造取消引用的迭代器。要获得与传统 for 循环类似的行为，请使用`auto &`：

```
for (auto &tree: xml_trees){
    if (tree){
        tree->Print(std::cout,4);
    }
} 
```

# haskell - 处理有限但任意数量的异质元素的函数

> ID：12514619
> 
> 赞同：4
> 
> 时间：2012-09-20T14:18:07.163
> 
> 标签：haskell, template-haskell

我正在研究博弈论学习的图书馆。在这种情况下，`N`代理聚集在一起并与环境交互。每个代理派生一个交互模型。一个代理的模型取决于它的`N-1`对手。我编写了代码来确定`1`代理和`2`代理的模型，并试图对其进行概括。这是我拥有的部分代码：

```
data System w x a s h h' = System { signaling :: SignalingWXAS w x a s
                                  , dynamic   :: DynamicXAS x a s
                                  , strategy  :: MockupStrategy x a s h h' }

data JointState w x a s h h' = JointState { worldState  :: w
                                          , state       :: x
                                          , mockupState :: MockupState a s h h' }

systemToMockup :: ( Bounded w, Ix w, Bounded x, Ix x
                  , Bounded a, Ix a, Bounded s, Ix s
                  , Bounded (h a), Ix (h a), Bounded (h' s), Ix (h' s)
                  , History h, History h'
                  ) => System w x a s h h' -> Mockup a s h h'
systemToMockup syst = mock
    where
      mock z   = norm $ statDist >>=? condit z >>= computeStatesAndAction >>= sig >>=$ extractSignal
      statDist = ergodicStationary $ transition syst
      condit z = just z . mockupState
      sig      = uncurryN $ signaling syst
      strat    = strategy syst
      computeStatesAndAction joint = do
        let w = worldState joint
        let x = state joint
        a <- strat x (mockupState joint)
        return (w, x, a)
      extractSignal (_, s) = s 
```

和

```
data System2 w x1 a1 s1 h1 h1' x2 a2 s2 h2 h2' = System2 { signaling :: SignalingWXAS2 w x1 a1 s1 x2 a2 s2
                                                         , dynamic1  :: DynamicXAS x1 a1 s1
                                                         , dynamic2  :: DynamicXAS x2 a2 s2
                                                         , strategy1 :: MockupStrategy x1 a1 s1 h1 h1'
                                                         , strategy2 :: MockupStrategy x2 a2 s2 h2 h2' }

data JointState2 w x1 a1 s1 h1 h1' x2 a2 s2 h2 h2' = JointState2 { worldState   :: w
                                                                 , state1       :: x1
                                                                 , mockupState1 :: MockupState a1 s1 h1 h1'
                                                                 , state2       :: x2
                                                                 , mockupState2 :: MockupState a2 s2 h2 h2' }
systemToMockups2 syst = (mock1, mock2)
    where
      mock1 z1   = norm $ statDist >>=? condit1 z1 >>= computeStatesAndActions >>= sig >>=$ extractSignal1
      mock2 z2   = norm $ statDist >>=? condit2 z2 >>= computeStatesAndActions >>= sig >>=$ extractSignal2
      statDist   = ergodicStationary $ transition2 syst
      condit1 z1 = just z1 . mockupState1
      condit2 z2 = just z2 . mockupState2
      sig        = uncurryN $ signaling syst
      strat1     = strategy1 syst
      strat2     = strategy2 syst
      computeStatesAndActions joint = do
        let w  = worldState joint
        let x1 = state1 joint
        let x2 = state2 joint
        a1 <- strat1 x1 (mockupState1 joint)
        a2 <- strat2 x2 (mockupState2 joint)
        return (w, x1, a1, x2, a2)
      extractSignal1 (_, s, _) = s
      extractSignal2 (_, _, s) = s 
```

我追求一个`systemToMockupN`可以容纳任何有限数量的代理的函数定义。

代理是异构的，因此不能直接使用列表。我不能使用元组，因为我事先不知道大小。我尝试使用`curryN`,`uncurryN`等，但没有设法对元组的每个元素进行一次操作。我尝试以类似于`printf`没有成功的方式构建可变参数函数。

我知道我可以使用模板 haskell，但我想知道是否有更好的解决方案我忽略了。任何指向处理有限但任意数量的异构元素的代码的指针将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T17:19:06.200

异质的。我认为你不应该这样做，但你确实问过了。

您可以将现有的库用于异构列表，例如[HList](http://hackage.haskell.org/package/HList)。无论如何，这秘密地使用了 Template Haskell，但你不需要像你自己做的那样弄脏你的手。

由于需要强制转换等，具有动态类型的语言存在各种问题。 HList 是类型安全的，但在我看来，编写运行良好且没有错误的代码仍然不容易。你比元组更有优势，因为你不需要改变类型，跨元素映射你的更新应该更容易，但它仍然不漂亮。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T17:13:29.073

不要异类。这不值得。值得寻找更好的方法*。*这是避免它的一种方法。（还有其他路径。）可能有任意数量的代理，但肯定不存在任意数量的代理类型。（类型真的需要如此参数化吗？我担心你的概括性会让你付出太多代价。

```
 class AnAgent a where 
         liveABit :: World -> a -> (World,a)
         ...
         ...

    data NuclearPlant = ....
    data CoalPlant = ....
    data WidFarm = .....

    data DataCenter = .....

    data EnvFriendly = .....
    data PetrolHead = ..... 
```

如果方便的话，可以通过模式匹配将它们组合在一起以进行共同处理：

```
 data Plant = PN NuclearPlant | PC CoalPlant | PW WindFarm
    data Human = HEF EnvFriendly | HPE PetrolHead

    data Agent = AP Plant | AH Human | AD DataCenter 
```

组内/跨组的共同/异质治疗：

```
 bump :: Agent -> Agent
    bump (Human h) = Human (breakleg h)
    bump a = a 
```

然后，您可以定义所有您想要的代理，然后将它们弹出`[Agent]`并定义一个 nice`eachLiveABit :: World -> [Agent] -> (World,[Agent])`来更新世界及其代理。您可以创建`AnAgent`单个代理类型或组的实例，并构建到`Agent`, （或者甚至可以不使用类型类，只使用普通函数）。

这将遵循`(Classes + Interesting Type System Features) -> (Types and Higher Order Functions)`程序转换，在情感上感觉就像你有点笨拙，但会消除很多麻烦。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T17:28:44.713

广义代数数据类型 (GADT)。

这些使您可以将有限的许多真正异构的数据类型合并为一个，并且是处理存在类型的现代方法。`data Agent = AH Human | AP Plant | ....`他们坐在进场和进场之间的某个地方`HList`。您可以将所有令人难以置信的异构代理实例化为某个类型类，然后将它们捆绑在`AgentGADT`. 确保你的 typeclass 包含你想要对 Agent 做的所有事情，因为如果没有具有显式类型的函数，很难从 GADT 中取回数据；你需要`getHumans [AgentGADT] -> [Human]`吗？还是`updateHumans :: (Human->Human) -> [AgentGADT] -> [AgentGADT]`？使用我另一篇文章中的普通抽象数据类型会更容易。

加分项：您可以`[AgentGADT]`使用类函数统一使用和操作，同时编写奇怪且奇妙的参数化数据类型。减分 - 一旦您的代理数据进入，就很难将其取出。

我最喜欢的在线介绍性文字是[GADTs for dummy](http://www.haskell.org/haskellwiki/GADTs_for_dummies)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T20:27:30.913

**更新：**该策略无法处理的一件事是多态返回类型。此外，根据主要类型具有不同类型的参数会增加相当多的复杂性。

评论中已经提到过，但是进行“异构集合”的最佳方法之一是确定您可以对集合的每个元素实际执行哪些操作（因为您只能执行一组受限的操作在它们上，即使您的语言有鸭式打字）并存储这些操作的记录。例子：

```
data Thing1 = ...
data Thing2 = ...

data AThing = AThing {
  op1 :: ...
  op2 :: ...
}

class IsAThing a where
    mkAThing :: a -> AThing

instance IsAThing Thing1 where
    mkAThing a = AThing {
            op1 = op1_for_thing1 a,
            op2 = op2_for_thig1 a
        } 
```

然后，调用`op1`任何 IsAThing：

```
op1 (mkAThing a) <...other args...> 
```

但是，在您的情况下，您需要以下列表`AThing`：

```
[mkAThing a2, mkAThing a2, ...] 
```

然后在任何元素上：

```
op1 <element of that list> <...other args...> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T15:21:45.610

您可以尝试使用类型类来解决这个问题。
这是一些伪代码：

```
data Mockup = Mockup1 <return type of systemToMockup>
            | Mockup2 <return type of systemToMockups2>

class SystemToMockup a where
    systemToMockup :: a -> Mockup

instance SystemToMockup (System1 ...) where
    <implementation of systemToMockup>

instance SystemToMockup (System2 ...) where
    <implementation of systemToMockups2> 
```

这是一个相当有限的解决方案，我怀疑它是否适合您，因为您的应用程序似乎相当复杂。
一般来说，CA McCann 的方法要好得多。

# java - 从输出解析树中提取文本

> ID：12514621
> 
> 赞同：5
> 
> 时间：2012-09-20T14:18:10.737
> 
> 标签：java, nlp, stanford-nlp

我是 nlp 的新手，我正在尝试使用 stanford 解析器从文本中提取 (NP) 句子，我想检索文本中标记为 (NP) 的部分

如果一个部分被标记（NP）并且它内部的较小部分也被标记（NP）我想取较小的部分。

到目前为止，我设法通过以下方法完成了我想做的事情：

```
private static ArrayList<Tree> extract(Tree t) 
{
    ArrayList<Tree> wanted = new ArrayList<Tree>();
   if (t.label().value().equals("NP") )
    {
       wanted.add(t);
        for (Tree child : t.children())
        {
            ArrayList<Tree> temp = new ArrayList<Tree>();
            temp=extract(child);
            if(temp.size()>0)
            {
                int o=-1;
                o=wanted.indexOf(t);
                if(o!=-1)
                    wanted.remove(o);
            }
            wanted.addAll(temp);
        }
    }

    else
        for (Tree child : t.children())
            wanted.addAll(extract(child));
    return wanted;
} 
```

此方法的返回类型是树列表，当我执行以下操作时：

```
 LexicalizedParser parser = LexicalizedParser.loadModel();
        x = parser.apply("Who owns club barcelona?");
     outs=extract(x);
    for(int i=0;i<outs.size();i++){System.out.println("tree #"+i+": "+outs.get(i));} 
```

是 ：

```
tree #0: (NP (NN club) (NN barcelona)) 
```

我希望立即输出`"club barcelona"`，没有标签，我尝试了该`.labels();`属性，然后`.label().value();`他们返回标签

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-21T05:37:13.623

您可以使用以下命令获取子树 tr 下的单词列表

```
tr.yield() 
```

您可以使用 Sentence 中的便捷方法将其转换为 String 形式：

```
Sentence.listToString(tr.yield()) 
```

你可以像你一样走一棵树，但如果你要做这种事情很多，你可能想看看tregex，它可以更容易地通过声明性模式找到树中的特定节点，例如NP他们下面没有NP。做你正在寻找的一个巧妙的方法是：

```
Tree x = lp.apply("Christopher Manning owns club barcelona?");
TregexPattern NPpattern = TregexPattern.compile("@NP !<< @NP");
TregexMatcher matcher = NPpattern.matcher(x);
while (matcher.findNextMatchingNode()) {
  Tree match = matcher.getMatch();
  System.out.println(Sentence.listToString(match.yield()));
} 
```

# objective-c - iOS：XCode 4.4.1：xcodebuild 错误 - 无法从文件中读取诊断信息

> ID：12514629
> 
> 赞同：1
> 
> 时间：2012-09-20T14:18:40.480
> 
> 标签：objective-c, ios, xcode, xcodebuild

所以我想在终端中使用 xcodebuild 从测试应用程序（称为 RunTeszt1）创建一个构建。该应用程序是一个 iOS 单视图应用程序，其中没有任何内容，只是创建和关闭。

**当我从终端执行此操作时，构建失败。**

```
xcodebuild -target "RunTeszt1" -sdk "$iphoneos5" -configuration Debug 
```

**错误是：**

`Unable to read diagnostics from file "/var/folders/6s/cjw35hhs5lb6wpnx9m8lr2km0000gn/C/com.apple.Xcode.501/SharedPrecompiledHeaders/RunTeszt1-Prefix-eqntxoxxhhlzvieuipqbxfumbpxb/RunTeszt1-Prefix.pch.dia" (Invalid File): Bad header in diagnostics file`

```
Please file a bug at http://bugreport.apple.com with this warning message and any useful information you can provide.
Command /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang failed with exit code 1 
```

当我从 XCode (4.4.1) 运行应用程序时，构建完成并且一切正常。但是，如果我在 XCode 中点击构建按钮后运行控制台应用程序并检查结果，我会在控制台中看到相同的错误消息。尽管如此，构建成功并打开了模拟器。

这真的是 xcodebuild 中的一个错误，应该发送给苹果吗？如果是，我想已经有很多人发送了它。

**我怎样才能让错误消失，或者阻止它取消构建过程，所以像 XCode 那样规避它？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T07:53:27.080

原来问题是**代码签名**。即使我`Don't code sign`输入了构建设置，它仍然挂断了它。此外，似乎“ `-sdk xxx`”也有问题（无论我指定什么 sdk）。运行此命令导致构建成功：

```
xcodebuild clean build CODE_SIGN_IDENTITY="" CODE_SIGNING_REQUIRED=NO -target RunTeszt2 
```

# image - Twitter帖子链接的图像大小限制

> ID：12514634
> 
> 赞同：1
> 
> 时间：2012-09-20T14:18:53.997
> 
> 标签：image, twitter, photo

有谁知道将图片附加到推文时的大小限制是多少？

该文档谈到了显示尺寸，但没有谈到大尺寸限制。当您单击图像时，它会从浏览器变为大尺寸。

我正在尝试优化移动设备的上传大小。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T14:31:53.003

快速谷歌搜索`twitter max image upload size`并点击第一个链接显示

> 照片的最大大小可以是 3MB。

[http://www.technospot.net/blogs/twitter-galleries/](http://www.technospot.net/blogs/twitter-galleries/)

# tridion - 使用 SDL Tridion 复合模板解析输入按钮的图像

> ID：12514639
> 
> 赞同：5
> 
> 时间：2012-09-20T14:19:17.427
> 
> 标签：tridion

我从 SDL Tridion 2011 中的 Dreamweaver 模板构建块 (DWT TBB) 输出以下示例代码：

```
<input type="image" src="tcm:33-1995" name="submit"/>
<img src="tcm:33-1995"/> 
```

在 DWT TBB 之后，我们使用复合组件模板中的默认完成操作来解析路径等。当我在模板生成器中查看时，我们看到 IMG 标记已解析 SRC 属性，但 INPUT 标记被忽略。

有没有办法让默认的 TBB 解析 INPUT 标签和 IMG 标签？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T19:33:48.073

如果我将以下内容放入 DWT：

```
<input type="image" src="tcm:1-90" name="submit"/>
<img src="tcm:1-90" /> 
```

然后将该 DWT 放入页面模板中，如下所示：

1.  载重吨
2.  在包中发布二进制文件
3.  解决链接

我最终得到了这个输出项：

```
<input src="http://localhost/Preview/.../img.jpg"  type="image" name="submit"/>
<img src="http://localhost/Preview/.../img.jpg"  /> 
```

那么你的输出有什么不同呢？

## 更多信息

执行 DWT 后，这是 Output 项：

```
<input type="image" src="tcm:1-90" tridion:href="tcm:1-90" 
       tridion:type="Multimedia" tridion:targetattribute="src" name="submit"/>
<img src="tcm:1-90" tridion:href="tcm:1-90" tridion:type="Multimedia" 
     tridion:targetattribute="src" /> 
```

Publish Binaries in Package TBB 不会修改输出项，因此链接解析器将其更改为我上面显示的最终输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T15:02:36.087

在这种情况下，您必须使用以下语法来解析输入标签中的图像 url

```
<input type="image" src= "url(tcm:33-1995)" name="submit"/> 
```

我希望它可以工作。

# mysql - sql多元素选择

> ID：12514644
> 
> 赞同：0
> 
> 时间：2012-09-20T14:19:32.270
> 
> 标签：mysql, select, max

假设我有以下元素：

**动作表**

```
id          type        date
----------- ----------  ----------
1           start       2012-01-01 10:00:00
2           suspend     2012-01-01 11:00:00
3           resume      2012-01-01 12:00:00
4           suspend     2012-01-01 13:00:00
5           resume      2012-01-01 14:00:00
6           stop        2012-01-01 15:00:00
7           refill      2012-01-01 16:00:00
8           stop        2012-01-01 17:00:00 
```

**关联表**

```
id    actionID    elementID
----- ----------- -----------
1     1           1
2     2           1
3     3           1
4     4           1
5     5           1
6     6           1
7     7           1
8     8           1 
```

**元素表**

```
id    name
----- -----------
1     my element 
```

所以基本上我有一个元素，它的状态根据一些用户触发的动作（动作表）而演变，这些动作可以通过许多元素共享（这就是我有一个关联表的原因）。

我想在 SQL 查询中检索它：

**ElementID，开始动作 ID，最后动作 ID**（开始动作总是链接到一个元素）

是否可以不编写多个 sql 查询？我正在寻找性能最高的查询，因为它将在具有数百万个条目的表上运行（关联表和操作表）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T14:33:38.047

```
select last.elementID, start.actionID as startAction, last.actionID as lastAction
from (
    select elementID, max(actionID) as actionID
    from Association
    group by elementID
    ) last
inner join (
    select elementID, min(actionID) as actionID
    from Association
    group by elementID
    ) start on start.elementID = last.elementID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T14:25:21.337

```
SELECT e.Id, e.name,
  MAX(CASE WHEN a.type = 'start' THEN a.actiondate END) AS 'StartAction',
  MAX(CASE WHEN a.type = 'stop' THEN a.actiondate END) AS 'ENDAction'
FROM @actions a 
INNER JOIN @association s ON a.Id = s.actionid
INNER JOIN @elements e ON s.id = e.Id
GROUP BY e.id, e.name 
```

# msbuild - 上下文中的参考项目

> ID：12514649
> 
> 赞同：1
> 
> 时间：2012-09-20T14:19:50.470
> 
> 标签：msbuild, metadata, itemgroup

我试图找出一种无需显式声明 ItemGroup 即可从上下文访问 Items 的方法。

目前正在尝试复制任务：

```
<Copy SourceFiles="C:\blabla\**\*.*" DestinationFiles="%(?.RecursiveDir)" /> 
```

我可以用什么代替“？” 在上下文中选择项目？

原因是，我有一个通过 XSLT 生成的 MSBuild 项目文件，并且有未知数量的文件夹和文件（其中一些在目标文件夹下遵循不同的结构 - 在这种情况下，我打算使用不同的元数据代替RecursiveDir) 在输入 XML 中。是否可以在不需要声明大量 Itemgroups（或具有很多 Items 的 Itemgroup）的情况下实现这一点？

我试着搜索这个，但我发现的只是声明了 Itemgroups 的帖子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-10T15:45:19.173

@Alexey Shcherbak 写道：

> 您想在不明确声明项目本身的情况下引用项目元数据，所以我怀疑您能否做到这一点。复制任务也要求源文件应该是`ITaskItem[]`类型（字面意思 - 它需要项目集合）。实际上[，复制任务的 msdn 描述](http://msdn.microsoft.com/en-us/library/3e54c37h.aspx) 有一个您可以遵循的确切示例，但您应该在里面声明带有嵌套项目子句的 itemgroup。
> 
> 您可能想知道如果您有一个包含大量文件的项目，它是否会使 MSBuild 变慢。答案是：这取决于 =)。你在巨大的文件集下的意思是什么数字=）。确实，MSBuild 引擎会发出并评估内存中的每个项目组，并且可能一个巨大的文件集可能会导致更大的内存占用。但是 MSBuild 不适合用作您选择的脚本语言（即使 powershell 在一个目录中存在 250K+ 个文件的问题，Windows 本身也存在问题）。如果您只需要执行复制而不访问完整元（递归目录除外） - 使用 Exec 任务并调用 robocopy.exe - 它比其他任何东西都更好（考虑到可用的开箱即用工具）。
> 
> 作为补充 - 在我们声明具体工具不可接受之前，应该测试和评估大量数字。我认为一旦 MSBuild 可以处理大型解决方案 - 它可能会处理相当大的文件集。它只是资源/速度问题。但任何工具也都有其不可逾越的限制。
> 
> 实际上我的意思不是 robocopy 扩展，而是[en.wikipedia.org/wiki/Robocopy](http://en.wikipedia.org/wiki/Robocopy)`robocopy.exe`本身，您可以使用 Exec 任务轻松调用它。就“复制”速度而言，硬链接肯定是无与伦比的=）。但请记住 - 它仅适用于单个磁盘卷（因为它不是实际副本，它只是将另一个文件名添加到同一组字节 =））。如果您需要实际复制到另一个驱动器或通过网络 - robocopy 将再次闪耀 =)。
> 
> PS：20k 文件远非我对巨大的定义；）我们处理了约 280k-300k 的小文件，汇总量约为 80Gb。用于管道的 Powershell 和用于实际位移动的 robocopy 赢得了这一轮。

# c# - C# - NHibernate 带来多对多关系的多条记录

> ID：12514650
> 
> 赞同：0
> 
> 时间：2012-09-20T14:19:51.700
> 
> 标签：c#, mysql, hibernate, nhibernate, many-to-many

基本上，我试图从与自身具有多对多关系的表中提取记录。这是一个产品表，它必须与许多成分（其他产品）相关联。问题是，当我从具有多个关联成分的产品中提取数据时，NHibernate 会为产品所具有的每种成分返回一个对象实例。这是我的班级映射和结构的方式：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" assembly="TCC" namespace="TCC.Hibernate.Domain.Classes">

  <class name="Product" table="product">
    <id name="id" generator="identity">
      <column name="id" not-null="true" />
    </id>

    <property name="name">
      <column name="name" length="128" not-null="true" />
    </property>

    <property name="stock">
      <column name="stock" not-null="true" />
    </property>

    <property name="value">
      <column name="value" not-null="true" />
    </property>

    <many-to-one name="category" class="Category" column="category" not-null="true" fetch="join" lazy="false" />

    <!-- Relations -->
    <set name="ingredients" table="product_x_ingredient" fetch="join" lazy="true">
      <key column="product_id" />
      <many-to-many class="Product" column="ingredient_id" />
    </set>

    <set name="suppliers" table="product_x_supplier" fetch="join" lazy="true">
      <key column="product_id" />
      <many-to-many class="Supplier" column="supplier_id" />
    </set>

    <set name="saleItems" lazy="true" inverse="true">
      <key column="product_id" />
      <one-to-many class="SaleItem" />
    </set>

    <set name="stockInlets" lazy="true" inverse="true">
      <key column="product" />
      <one-to-many class="StockInlet" />
    </set>
  </class> 
```

```
namespace TCC.Hibernate.Domain.Classes
{
    class Product
    {
        public Product()
        {
            suppliers = new HashSet<Supplier>();
            ingredients = new HashSet<Product>();
        }

        public virtual uint id { get; set; }
        public virtual string name { get; set; }
        public virtual float stock { get; set; }
        public virtual float value { get; set; }
        public virtual Category category { get; set; }

        public virtual ICollection<Supplier> suppliers { get; set; }
        public virtual ICollection<Product> ingredients { get; set; }
        public virtual ISet saleItems { get; set; }
        public virtual ISet stockInlets { get; set; }
    }
} 
```

这就是我从数据库中提取数据的方式：

```
using (ISession Session = NHibernateHelper.OpenSession())
{
    return Session
        .CreateCriteria<Product>()
        .SetFetchMode("ingredients", FetchMode.Eager)
        .SetFetchMode("suppliers", FetchMode.Eager)
        .List<Product>();
} 
```

有谁知道为什么？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T14:26:46.930

在您的查询中，指定应使用 DistinctRootEntityTransformer：

```
return Session
        .CreateCriteria<Product>()
        .SetFetchMode("ingredients", FetchMode.Eager)
        .SetFetchMode("suppliers", FetchMode.Eager)
        .SetResultTransformer(Transformers.DistinctRootEntity)
        .List<Product>(); 
```

# wpf - 无法在单个项目检查更改上触发选择复选框的所有选项

> ID：12514651
> 
> 赞同：0
> 
> 时间：2012-09-20T14:19:58.743
> 
> 标签：wpf, mvvm

在一个窗口中有一个 lisbox，它绑定到一个**Employee**类型的列表，每个员工姓名旁边都有复选框，可以单独选择。

得到另一个带有“全选”选项的控制复选框。

**通过将全选复选框的 isChecked 绑定到我的 viewModel 中的属性IsSelectAllChecked** ，我可以轻松地“全选”“全选” 。

但是，如果全选选项为真，并且 lisbox 中的每个员工项目都被选中。如果我取消选中其中一个项目，我如何从全选选项复选框中删除检查。

```
 <StackPanel Grid.Row="1">
        <CheckBox Margin="20,15,0,15" IsChecked="{Binding Path=IsSelectAllChecked}">
            <TextBlock VerticalAlignment="Center" Text="Select All" />
    </CheckBox> 
```

任何人都可以建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T14:59:45.870

员工的`IsChecked`复选框也应该绑定到`IsSelected`员工视图模型的属性。在该属性的设置器中，您可以评估是否`IsSelectAllChecked`需要更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T15:11:27.950

这是我的做法：

这是您的全选`Checkbox`和绑定属性：

```
<CheckBox Margin="20,15,0,15" Content="Select all"
     IsChecked="{Binding Path=IsSelectAllChecked, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

public bool IsSelectAllChecked
{
  get
  {
     return isSelectAllChecked
  }
  set
  {
    isSelectAllChecked = value;
    // Do some code here to turn all selected booleans to true
    SelectAll();
    OnPropertyChanged("IsSelectAllChecked"); // Fire OnPropertyChanged event, important for TwoWay Binding!!
} 
```

请注意，`Binding`for your`CheckBox`现在处于`TwoWay`模式，并且带有`UpdateSourceTrigger=PropertyChanged`. 这将允许：

*   从代码 ( `TwoWay`)更改绑定属性的值
*   更新`CheckBox`值时更新状态 ( `UpdateSourceTrigger=PropertyChanged`)

接下来：这是您的复选框之一，代码中的等价物

```
<CheckBox  Content="Select one"
     IsChecked="{Binding Path=OneOfYourBools, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

public bool OneOfYourBools
{
  get
  {
     return oneOfYourBools;
  }
  set
  {
    oneOfYourBools = value;
    // If the isAllSelected was true, turn it to false!
    if (this.IsSelectAllChecked)
    {
       this.IsSelectAllChecked = false;
    }
    OnPropertyChanged("OneOfYourBools"); // Fire OnPropertyChanged event, important for TwoWay Binding!!
} 
```

这应该可以解决问题：当`bool`更新一个时，`selectAll`布尔值也会更新，反之亦然

# ios - iOS 使用 RESTful Web 服务的当前库

> ID：12514654
> 
> 赞同：2
> 
> 时间：2012-09-20T14:20:08.530
> 
> 标签：ios, web-services, rest

我在 google 上搜索了用于使用 RESTful Web 服务的不同方法和库。但是当我尝试旧库时，它们中的大多数要么已经过时，要么无法工作。这可能是因为其中一些已停产且与新 SDK 不兼容。

我已经尝试过 SBJSON、ASIHTTP、stig 和 jsonframework，但它们似乎都不起作用。

目前在 iOS 中使用哪些库来使用 RESTful Web 服务？如果任何人都可以使用相同的库提供示例教程的链接，那将会很有帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T14:46:59.290

试试 RestKit：[http: //restkit.org/](http://restkit.org/)

它是众所周知的，流行的，使用 XML 以及 JSON 并与 Core Data（响应 NSManagedObjects 映射）一起使用，这使得作为本地缓存的后端非常好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T14:42:53.637

为什么不使用 NSURLConnection 之类的 iOS API 类？（我认为需要iOS5或更高版本）

例如，您可以像这样调用 REST GET 操作：

```
NSMutableURLRequest *req = [NSMutableURLRequest requestWithURL:url];
[req setHTTPMethod:GET];
[NSURLRequest setAllowsAnyHTTPSCertificate:YES forHost:[url host]];//for https

connection = [[NSURLConnection alloc] initWithRequest:req delegate:self startImmediately:YES]; 
```

其中 url 应该是一个指向你的 rest 服务操作 url 的 NSURL 对象。并声明相应的委托方法：

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
    NSHTTPURLResponse* httpResponse = (NSHTTPURLResponse*)response;
    code = [httpResponse statusCode];

    NSLog(@"%@ %i",@"Response Status Code: ",code);

    [data setLength:0];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)d {
    [self.data appendData:d];
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {

    [[[UIAlertView alloc] initWithTitle:@"Error"
                                message:nil
                               delegate:nil
                      cancelButtonTitle:@"ok"
                      otherButtonTitles:nil] show];
    self.connection = nil;
    self.data = nil;
} 
```

连接、数据和代码可以是实现类的局部变量。在这些变量中，您将存储建立的连接、接收到的 JSON 数据（或其他）以及响应 http 代码（如 200、404）。

最后，如果您计划调用安全的 REST 服务，请不要忘记包含 authenticationchallenge 委托。

```
- (void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge {

            //set the user and password loged in
            NSString *username = @"username";
            NSString *password = @"password";                        

            NSURLCredential *credential = [NSURLCredential credentialWithUser:username
                                                                     password:password
                                                                      persistence:NSURLCredentialPersistenceForSession];
            [[challenge sender] useCredential:credential forAuthenticationChallenge:challenge];

        } 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-20T21:48:48.387

使用内置`NSURLSession`然后`NSJSONSerialization`使用 Github 的[Mantle](https://github.com/MantleFramework/Mantle)框架将 JSON 字典映射到您的自定义 ObjC 对象。

# javascript - 为什么我不能得到输入元素的值

> ID：12514657
> 
> 赞同：-6
> 
> 时间：2012-09-20T14:20:17.517
> 
> 标签：javascript

我有这个javascript代码。但是代码没有得到输入的值，我在这里做错了什么？

```
<script type="text/javascript">
function myFunc() {
    "use strict";
    var un = document.getElementByID('user').value;
    var pw = document.getElementByID('pass').value;
    var x  ;
    if(un=="abc") {
        if(pw=="123") {
            document.getElementById('validate').innerHTML ="validation sucessful";
        }
        else {
            document.getElementById('validate').innerHTML ="validation unsuccessful";
        }
    }
    else {
        document.getElementById('validate').innerHTML ="invalid username";
    }
}
</script>
<p>Click on the button to login</p>

USERNAME : <input type='text'   id='user'   value="  "   /><!-- Should be like type="text" and not type="  text"-->
PASSWORD:   <input type='password'    id='pass'   />  <!-- Should be like type="password" and not type="  password"-->
<p id='validate'></p>
<input type='button'  onclick="myFunc()" value='Login' /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T14:23:19.493

函数名不正确`getElementByID`，使用这个：

```
var un = document.getElementById('user').value;
var pw = document.getElementById('pass').value; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T14:24:00.757

它`document.getElementById`不是`document.getElementByID`javascript 是**Javascript 区分大小写**

```
var un = document.getElementById('user').value;
var pw = document.getElementById('pass').value; 
```

不是

```
var un = document.getElementByID('user').value;
var pw = document.getElementByID('pass').value; 
```

# windows - curl : (1) 在 libcurl [windows XP] 中不支持或禁用协议 https

> ID：12514658
> 
> 赞同：0
> 
> 时间：2012-09-20T14:20:18.523
> 
> 标签：windows, ssl, curl, openssl, libcurl

> **可能重复：**
> [libcurl 中不支持或禁用协议 https](https://stackoverflow.com/questions/9595820/protocol-https-not-supported-or-disabled-in-libcurl)

尝试在 Windows XP（32 位）上执行 Curl 时收到此消息。知道如何让它工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T07:25:22.517

可以使用或不使用 openssl 编译 LibCURL。您必须使用一些尚不知道的 cflags 来链接打开的 ssl 二进制文件以进行编译。一点谷歌搜索会帮助你。

问候

# c# - Excel 2007 以编程方式最小化功能区，但不是菜单栏

> ID：12514660
> 
> 赞同：7
> 
> 时间：2012-09-20T14:20:22.383
> 
> 标签：c#, excel, vsto

在 excel 2007 中，我们只需右键单击功能区并选择“最小化功能区”并将其最小化。

我试过了

```
Application.ExecuteExcel4Macro("show.toolbar(\"ribbon\",false)"); 
```

它隐藏了整个丝带但我不想隐藏整个丝带。

我什至尝试过

```
 Application.SendKeys("^{F1}", true); 
```

但它不可靠，因为有时它不能正常工作。

![在此处输入图像描述](../Images/e1942681a09a26db78778d1b59e9d291.png)

有没有办法使用 C# VSTO 代码来做到这一点？

我读了很多关于`toggleribbon()`函数的内容，但找不到使用它的方法。

**编辑：** 如果功能区已经最小化，您可以实际找到方法。我用了

```
 Office.CommandBars cbs = null;
    cbs = Application.CommandBars;
    foreach (Office.CommandBar cb in cbs)
    {
       if (cb.Name == "Ribbon")
       {

         if (cb.Height > 90)
         {
            this.Application.ActiveWindow.Activate(); 
            //to get focus on current workbook so that sendkeys will work
            Application.SendKeys("^{F1}", true);
          }

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T19:28:12.147

`SendKeys` `CTRL+F1`有效，但这似乎是其执行的时间问题。真正的问题是您不知道何时将功能区实际加载到 Excel 中以触发该行为。

这段代码对我来说似乎工作可靠，但它确实取决于加载项的加载速度。`Thread.Sleep()`如果需要，您也可以使用。

```
 private void ThisAddIn_Startup(object sender, System.EventArgs e)
 {
   Task.Factory.StartNew(() => {
       //Thread.Sleep(1000); // optional
       Application.SendKeys("^{F1}");
   }, TaskCreationOptions.AttachedToParent);
 } 
```

[请参阅有关功能区加载时间的相关 MSDN 论坛帖子](http://social.msdn.microsoft.com/Forums/en-US/vsto/thread/baa9a81d-aad3-4af5-9d0a-f945c26ffa18/)。

# javascript - JavaScript 验证（颜色框）

> ID：12514661
> 
> 赞同：0
> 
> 时间：2012-09-20T14:20:23.487
> 
> 标签：javascript, jquery, validation, colorbox

在我的页面中，我需要填写三个字段。如果填写了它们，则会打开一个小弹出窗口进行注册。但是，现在我在 JavaScript 中有它。如果一个或多个字段没有填写，它会依次给出一个消息。比如1、2、3字段不填，会在消息框里提示，请填写字段1，第二次弹出请填写2字段，请填写3字段。并且在它打开注册弹窗后立即弹出。我想防止这种情况发生，除非所有字段都已填写。它不应该在未完成字段的情况下打开弹出窗口。

这是代码：

```
 <script type="text/javascript" id ="popup">

$(document).ready(function() {

$("#lightboxRegister").colorbox({inline:true, width:"50%"});

    $("#lightboxRegister").click(function() {
        if(document.getElementById("title-vis").value ==""){
            alert("You need to enter a book title.");
            self.close();
        }
        if(document.getElementById("abstract-vis").value ==""){
            alert("You need to enter a book abstract.");
            self.close();
        }
        if(document.getElementById("writtenby-vis").value ==""){
            alert("You need to enter a pen name.");
            self.close();
        }

        document.getElementById("title").value = document.getElementById("title-vis").value;
        document.getElementById("abstract").value = document.getElementById("abstract-vis").value;
        document.getElementById("writtenby").value = document.getElementById("writtenby-vis").value;

    });

  });
</script> 
```

我无法弹出这个

```
$("#lightboxRegister").colorbox({inline:true, width:"50%"}); 
```

在 click 函数中工作：

```
 $("#lightboxRegister").click(function() 
```

我在关闭第三个文件的消息后立即尝试输入：

```
$(this).colorbox({inline:true, width:"50%"}); 
```

但我收到以下错误：

> 未捕获的类型错误：对象 # 没有方法 'colorbox'

有关如何解决此问题的任何帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T14:22:50.037

```
<div style="display:none;">
    <div id="lightboxRegister"> REGISTER FORM </div>
</div>

<input type="button" id="btn" value="open inline?" /> 
```

这是jquery代码：

```
$('#btn').click(function(){
    $.colorbox({inline:true, width:"50%", href: '#lightboxRegister'});
}); 
```

演示：[jsfiddle.net/9QkmH/](http://jsfiddle.net/9QkmH/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T14:24:24.503

按需打开彩盒只需使用这个：

```
$.colorbox({...}); 
```

例如：

```
$('.myButton').click(function() {
  alert('ok, lets open colorbox now!');
  $.colorbox({href: 'myUrl.html', width: 500});
}); 
```

# asp.net-mvc - asp.net mvc3，如何获取JsonResult返回的值

> ID：12514662
> 
> 赞同：1
> 
> 时间：2012-09-20T14:20:25.487
> 
> 标签：asp.net-mvc, json, asp.net-mvc-3, jsonresult

这是我的行动。

```
 public virtual JsonResult AddSearch()
    {
        var data = new { Id = food.Id, Image = food.Image, Name = food.Name};

        return Json(data, JsonRequestBehavior.AllowGet);
    } 
```

这是我的 aJax 表单

```
 @using (Ajax.BeginForm("AddSearch", "Home", new AjaxOptions { OnSuccess = "AddSearch" })) 
```

我的 javascript 文件。

```
 function AddSearch() {
        alert("sdfsdfsdf");
    } 
```

它有效，我看到了警告框。我的问题是如何获得 JsonResult 返回的“Id”、“Name”和“Image”。我试过了

```
 alert("sdfsdfsdf"); 
```

它不工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T15:02:50.070

MVC（准确地说是 unobtrusiveAjax 助手）会将标准的[jQuery.ajax](http://api.jquery.com/jQuery.ajax/) `success(data, textStatus, jqXHR)`回调参数传递给`OnSuccess`方法。

因此，您只需将参数添加到您的`AddSearch`方法中：

```
function AddSearch(data, status, xhr) {
        // you can access your properties from data
        alert(data.Name);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T15:05:49.960

**AjaxOption“ UpdateTargetId** ”中还有一个属性，您的响应将在其中附加。你的观点喜欢

```
<div id="tagetId">
</div>

     @using (Ajax.BeginForm("AddSearch", "Home", new AjaxOptions { OnSuccess = "AddSearch", UpdateTargetId = "tagetId" }))
     {

     } 
```

在你的控制器中

```
public Actionresult  AddSearch()
{
    var data = new { Id = food.Id, Image = food.Image, Name = food.Name};

    return data;
} 
```

您的结果将附加在“targetId”中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T14:30:32.560

你可以尝试这样的事情：

在控制器中：

```
public virtual JsonResult AddSearch()
{
    var data = new { Id = food.Id, Image = food.Image, Name = food.Name};

    return Json(data, JsonRequestBehavior.AllowGet);
} 
```

在视图/javascript 部分：

```
function AddSearch() {

    $.getJSON("@url.Action(here_goes_your_actionname)", { parameters }, function (data) {

        alert(data);

    });
} 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T14:26:38.350

我就是这样做的...我访问了模型中的列表并将其转换为我的 javascript 中的 JSON。

```
var JsonServerList = <%= new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(@Model.ServerList) %>; 
```

现在，当我说 ServerList[i].servername 时，我得到了值。

# postgresql - 未找到 PostgreSQL 过程语言“C”

> ID：12514664
> 
> 赞同：8
> 
> 时间：2012-09-20T14:20:28.453
> 
> 标签：postgresql, stored-procedures, keyword, capitalization, plr

我正在尝试在 PostgreSQL 9.2 数据库中使用[PL/R过程语言。](http://www.joeconway.com/plr/)我已经安装了该`plr`语言，并且正在尝试将其添加到数据库中。当我运行命令时，`CREATE EXTENSION plr;`我收到以下错误：

```
ERROR:  language "C" does not exist
STATEMENT:  CREATE EXTENSION plr;
ERROR:  language "C" does not exist 
```

当我列出数据库中的可用语言时，`select * from pg_language;`我得到

```
 lanname  | lanowner | lanispl | lanpltrusted | lanplcallfoid | laninline | lanvalidator | lanacl 
 ----------+----------+---------+--------------+---------------+-----------+--------------+--------
  internal |       10 | f       | f            |             0 |         0 |         2246 | 
  c        |       10 | f       | f            |             0 |         0 |         2247 | 
  sql      |       10 | f       | t            |             0 |         0 |         2248 | 
  plpgsql  |       10 | t       | t            |         12514 |     12515 |        12516 | 
 (4 rows) 
```

所以有一种语言`c`，但它不是大写字母（不确定这是否会有所不同）。

我想知道为什么`plr`扩展找不到`C`程序语言？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-21T12:04:15.850

您可能在 PostgreSQL 9.2 中遇到了这种变化（在[此处引用发行说明](http://www.postgresql.org/docs/current/interactive/release-9-2.html#AEN110228)）：

> CREATE FUNCTION 中不再强制小写程序语言名称 (Robert Haas)
> 
> 虽然不带引号的语言标识符仍然小写，但字符串和带引号的标识符不再强制小写。因此，例如 CREATE FUNCTION ... LANGUAGE 'C' 将不再起作用；它必须拼写为“c”，或者最好省略引号。

它也反映在[手册中`CREATE FUNCTION`](http://www.postgresql.org/docs/current/interactive/sql-createfunction.html)

> **语言名**
> 
> 实现函数的语言名称。可以是`SQL`、`C`、`internal`或用户定义的过程语言的名称。为了向后兼容，名称可以用单引号括起来。

至少从 7.3 版（可能更长）开始不鼓励引用语言名称，但显然旧习惯很难改掉。删除引号`'C'`可以解决问题，到达：`LANGUAGE c`或`LANGUAGE C`。

`PL/R`[从项目页面](http://www.joeconway.com/plr/)来看，在这方面还没有为 PostgreSQL 9.2 做好准备。

### 来自乔康威的反馈

乔康威留下了一个被删除的答案，因为它应该是评论。我将它粘贴在这里以供看不到已删除答案的公众使用：

> 我收到了消息，只是还没有时间发布新的 PL/R 版本。在 12 月之前寻找它，但与此同时，上面提到的手动解决方法非常简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T15:57:34.340

我对 pg_collkey 有类似的问题。我相信您的情况可能有相同的解决方案。这是我所做的：在你的 postgres 扩展目录中有一个 .sql 文件，它告诉 postgres 如何安装扩展。在我的例子中，它被称为 pg_collkey--0.5.0.sql。您需要修改该 sql 文件。在我的系统上（使用 Mac OS X 和 Homebrew），该文件位于 /usr/local/share/postgresql/extension/pg_collkey--0.5.0.sql）。它可能在 LANGUAGE 子句中包含一个大写的“C”，如下所示：

```
CREATE OR REPLACE FUNCTION collkey (text, text, bool, int4, bool) RETURNS bytea
  LANGUAGE 'C' IMMUTABLE STRICT AS
  '$libdir/collkey_icu.so',
  'pgsqlext_collkey'; 
```

将其更改为小写“c”并重新运行“CREATE EXTENSION pg_collkey;” psql中的命令：

```
psql -c 'CREATE EXTENSION pg_collkey;' my_database_name 
```

当然，您需要使用“plr”而不是 pg_collkey 作为扩展名。

# android - 在 android 中使用动态创建的按钮将用户带到另一个具有动态生成内容的活动

> ID：12514671
> 
> 赞同：1
> 
> 时间：2012-09-20T14:20:37.907
> 
> 标签：android, xml, android-button, dynamically-generated

我的一个活动中有一个动态生成的按钮列表，我想知道如何让其中一个按钮在单击时打开另一个活动并根据单击列表中的哪个按钮显示文本。

我使用 for 循环生成按钮（为了便于阅读，我在循环中省略了与 TextViews 相关的详细信息，它还使用了其他地方定义的一些变量）

```
for (int i = 0; i < N; i++) {   

        // create a new Button
        final Button rowButton = new Button(this);

        // Set properties of rowButton
        rowButton.setText("See Recipe");
        rowButton.setId(RecipeArray.get(i));            

        // add the Button to the LinearLayout
        myLinearLayout.addView(rowButton);

        // save a reference to the Button for later
        myButtons[i] = rowButton;
    } 
```

这些按钮代表一个特定的配方，当单击它们时，它们应该将用户带到一个新的活动“HowToMake”并生成一个仅包含与该配方相关的信息的文本视图。它们存储在代码片段“myButtons[i] = rowButton”底部的数组中，但我不确定如何使用它。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T14:24:05.557

添加时，您必须为每个按钮添加一个 onclicklistener。然后在onclick事件中，就可以调用`startActivity`你当前Activity的方法了。当您创建将打开新活动的 Intent 时，您可以向其中添加“额外”（换句话说，您可以添加一些将传递到新活动中的额外数据）。新数据，例如您要打开的配方的 ID :)

示例（未经测试，但应该是正确的）：

```
rowButton.setTag("the unique ID by which you can read back your recipe");
rowButton.setOnClickListener(new OnClickListener() {           
    @Override
    public void onClick(View v) {
        Intent intent = new Intent(YourActivity.this, TheViewRecipeClass.class);
        intent.putExtra("id", v.getTag());
        startActivity(intent);
    }    
} 
```

# c++ - 无法在派生模板类中访问模板基类的成员

> ID：12514673
> 
> 赞同：1
> 
> 时间：2012-09-20T14:20:43.890
> 
> 标签：c++, class, templates, gcc, compiler-errors

我有一个模板基类。可以说。

```
template<class KeyF>
class Base 
{
  private:
   int member1;
   char member2;
   ....
}; 
```

我从上面的类派生了另一个类。

```
template<class KeyF>
class Derived : public Base<KeyF>
{
  public:
  void func1() {
    <accessing member1/member2>
  }

  ....
}; 
```

上面的代码不能在 gcc 中编译。说 member1 不是 Derived 的成员。但是它已经是从一个基类派生的，那为什么不能访问它的成员呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T14:22:51.330

中的成员`Base`是`private`。您无法访问`private members`该课程之外的课程（除了`friend`）。制造它们`protected`，或者制造`protected getters`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T14:24:25.683

你试过**受保护**吗？自从我深入研究 C++ 以来，已经有点...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T14:25:35.097

您需要使用`this->`or为基成员名称添加前缀`Base<KeyF>::`，或者向类添加`using`声明以取消隐藏它们。它们的名称是*从属名称*，并且它们是隐藏的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-19T14:41:02.377

我认为解决该问题需要进行两项更改：

1.  在基类中，将成员定义为“受保护”而不是“私有”，以便在派生类中可访问。

2.  在派生类中，在受保护成员之前添加基类名称。在这种情况下，它应该看起来像“Base<typename>::member1”。

在我的情况下使用 C++17 标准，问题得到了解决。希望这会有所帮助。感谢 Kerrek SB 提供的信息。

# php - 在 Magento 中自定义搜索查询

> ID：12514678
> 
> 赞同：0
> 
> 时间：2012-09-20T14:20:59.693
> 
> 标签：php, magento

我想在 magento 网站中自定义我的默认搜索。在前端，如果客户输入任何关键字，我不希望它在产品描述字段中搜索。除了产品描述，所有字段都可以。但它不应该在产品描述栏中寻找关键字。如何以及在哪里可以自定义生成搜索结果的 SQL 查询。请指导我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T15:01:09.643

无需更改任何 SQL 即可执行此操作。

1) 转到 mangento 管理员，目录 -> 属性。选择描述。

2）更改前端属性：设置

```
Use in Quick Search     = NO
Use in Advanced Search  = NO 
```

# debugging - 查询 GPU 上的活动 CUDA 内核集

> ID：12514683
> 
> 赞同：2
> 
> 时间：2012-09-20T14:21:19.803
> 
> 标签：debugging, cuda

有没有办法让 GPU（或驱动程序）列出 GPU 上的一组活动（或调度或发布）CUDA 内核，而不附加`cuda-gdb`到拥有的 CPU 进程并暂停它？

我在想象类似[pstack](http://linux.die.net/man/1/pstack)的东西，界面可能如下所示：

```
> list-cuda-kernels $pid
gpu 0: kernel_foo
gpu 0: kernel_bar
gpu 1: kernel_baz 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T21:15:42.043

除了 cuda-gdb（或任何其他 CUDA 调试器）之外，没有工具或 API 可以获取当前运行的内核列表。

# c# - 如何找到绑定数据列的变量的位置？

> ID：12514689
> 
> 赞同：0
> 
> 时间：2012-09-20T14:21:34.687
> 
> 标签：c#, silverlight, xaml, mvvm

如何找到绑定数据列的变量的位置？对 SOLUTION 的简单搜索失败。

```
<sdk:DataGridTextColumn MinWidth="15"
Binding="{Binding Accounts[0].AccountValue,
Converter={StaticResource DecimalConverter}}"
                          CanUserSort="False"
                          CellStyle="{StaticResource RightAlignCellStyle}"
                          Header="Account Value"
                          HeaderStyle="{StaticResource DefaultDataGridColumnHeaderStyleRight}"
                                            IsReadOnly="True" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T14:59:12.487

找出 DataContext 的设置位置。它可以在对象本身或其任何父对象上。该变量`Accounts`应该是 DataContext 对象的一个​​属性。

# android - 使用 Asynctask 更新的带有进度条的 Listview

> ID：12514691
> 
> 赞同：0
> 
> 时间：2012-09-20T14:21:42.890
> 
> 标签：android, listview, android-listview, android-asynctask, progress-bar

我正在使用带有进度条的 Listview 来显示使用 Asynctask 下载文件。有一个添加行的按钮，每行都有一个进度条，在进度条上我给了 textviews 以显示下载和传输数据所花费的时间。问题是当我滚动 listview 时， ProgressBar 上显示的进度消失，时间和数据传输停止更新，但正在下载文件。如果有更多行并且我滚动 Listview 它将崩溃。任何人对此有想法请帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T15:08:41.670

```
 progressDialog.setCancelable(false); 
```

# c# - 如何向密封类 Arc 添加属性

> ID：12514692
> 
> 赞同：2
> 
> 时间：2012-09-20T14:21:48.290
> 
> 标签：c#, properties, extends, sealed

如何向密封的 Arc 类添加两个新属性。我想用一个 double 属性来扩展这个类来保存一个 double 值和一个字符串属性来保存对象的名称。我的第一次尝试是通过 Tag 属性，但这只能保存双精度值或对象名称。

问题是我创建了一个包含 43 个圆弧对象的新用户控件，当鼠标进入圆弧时，另一个控件会显示输入段的值和名称。所以每个弧都使用相同的 MouseEntered 函数，我想通过“对象发送者”获取信息。

我希望任何人都有一个好主意。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T14:24:53.640

您可以使用*复合*模式。

```
class SuperArc
{
   Arc Arc { get; set; }
   // other properties.
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T14:24:08.450

你不能。它是密封的。任何一个：

1.  *创建一个包含*作为`Arc`属性的新类。
2.  将元组或其他对象存储在`Arc.Tag`.
3.  用属性装饰弧线

对于您的特定问题，我建议上面的＃2 或存储一个`Dictionary<Arc, blahblahblah>`或`Dictionary<string, blahblahblah>`（按名称）并查找您需要的信息。#1 需要大量开销来包装绘图所需的所有方法和属性，而且可能比它的价值更麻烦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T14:24:57.010

您不能扩展密封类。

尝试创建自己的类并将 Arc 作为类成员，并公开此成员函数。

最好的祝福。

# css - 移动媒体查询、分辨率和ppi模拟器？

> ID：12514696
> 
> 赞同：1
> 
> 时间：2012-09-20T14:21:59.053
> 
> 标签：css, responsive-design, ppi, device-width

是否有任何种类的桌面工具或浏览器插件能够模拟各种移动和平板设备以正确测试响应式设计？而且我不仅仅是在谈论更改浏览器窗口的大小。其他项目也需要模拟：

*   设备宽度
*   最小设备宽度
*   最大设备宽度
*   方向（横向/纵向）
*   -webkit-min-device-pixel-ratio
*   解析度
*   ppi

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T16:48:25.247

我通常尝试[Opera Mobile Emulator](http://www.opera.com/developer/tools/mobile/)。它相当准确，可以模仿高 DPI 显示器等，并且可以很好地处理大多数媒体查询。只需选择您的显示特性或要模拟的设备，它就会尝试以这种方式呈现。

# jquery - jQuery Mobile 自动预取页面

> ID：12514698
> 
> 赞同：1
> 
> 时间：2012-09-20T14:22:02.007
> 
> 标签：jquery, mobile, prefetch

我需要在我的 JQM 项目中添加一个预加载页面。我认为最好的方法是在预加载页面上使用 JQM Prefetch 函数，并在加载预取（主页）页面后触发它。

这是正在使用的代码。我是否需要添加一个实例才能使其正常工作，因为我不确定在哪里添加 url(home.html)？任何帮助将不胜感激。谢谢你。

HTML

```
<head>
<script src="js/jquery-1.7.1.min.js"></script>
<script src="js/custom.js"></script>
<script src="js/jquery.mobile-1.2.0-rc.1.min.js"></script>
</head> 
```

自定义.js

```
$(document).bind("mobileinit", function(){
$.mobile.loadPage( pageUrl, { showLoadMsg: false } );
}); 
```

# android - 使用自定义适配器在列表视图中重复 5 次行

> ID：12514703
> 
> 赞同：0
> 
> 时间：2012-09-20T14:22:11.870
> 
> 标签：android, multidimensional-array, arraylist, android-listview

我有一个应用程序，我在其中显示我从网络服务获得的记录。该记录有 5 个字段，startTime、duration、status 和 clientname。（clientname 实际上由 first 和 last 2 个字段组成）。我可以将 arrayList 中的字段放入 String 数组，然后将该数组传递给适配器。字段显示在 ListView 中。到目前为止一切都很好，除了相同的记录在 ListView 中显示了 5 次。为什么是这样？我将数组传递给适配器一次。

```
public class GetRota extends Activity {

    private static final String TAG = GetRota.class.getSimpleName();
    ListView listView;
    Intent intent;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.getrotalayout);

        listView = (ListView)findViewById(R.id.rotalist);
        intent = this.getIntent();
        Bundle bundle = intent.getBundleExtra("rotaArrayBundle");

        @SuppressWarnings("unchecked")
        ArrayList array =  (ArrayList) bundle.get("rotaArray");

        for(int i = 0; i < array.size(); i++){

             Log.e(TAG, "array pos " + i + " = " +  array.get(i));

        }

        String record = array.get(0).toString();
        String[] itemsInRecord = record.split(",");
        String[] recordItem = new String[5];

       for(int x = 0; x < itemsInRecord.length; x++){

           Log.e(TAG, "token = " + itemsInRecord[x]);
           recordItem[x] = itemsInRecord[x];
      }

       MySimpleArrayAdapter arrayAdapter = new MySimpleArrayAdapter(this, recordItem);
       listView.setAdapter(arrayAdapter);

    }// end of onCreate

    private class MySimpleArrayAdapter extends ArrayAdapter<String> {
          private final Context context;
          private final String[] values;

          public MySimpleArrayAdapter(Context context, String[] values) {
            super(context, R.layout.rotarowlayout, values);
            this.context = context;
            this.values = values;
          }

          @Override
          public View getView(int position, View convertView, ViewGroup parent) {
            LayoutInflater inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            View rowView = inflater.inflate(R.layout.rotarowlayout, parent, false);
           TextView startTime = (TextView)rowView.findViewById(R.id.rowstarttime);
           TextView duration = (TextView)rowView.findViewById(R.id.rowduration);
           TextView status = (TextView)rowView.findViewById(R.id.rowstatus);
           TextView name = (TextView)rowView.findViewById(R.id.rowclientname);

           startTime.setText("Start Time: " + values[0]);
           duration.setText("Duration:" + values[1]);
           status.setText("Status:" + values[2]);
           name.setText("Client:" + values[3] + values[4]);

            return rowView;
          }
        } 

}// end of GetRota 
```

. [更新]

```
private class MySimpleArrayAdapter extends BaseAdapter {
          private final Context context;
          private final ArrayList array;

          public MySimpleArrayAdapter(Context context, ArrayList array) {
            this.context = context;
            this.array = array;
          }

        public int getCount() {
            return array.size();
        }

        public Object getItem(int position) {
            return array.get(position);
        }

        public long getItemId(int position) {
            return position;
        }

          @Override
          public View getView(int position, View convertView, ViewGroup parent) {
            String[] values = array.get(position).toString();
            LayoutInflater inflater = (LayoutInflater) context
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            View rowView;

            if (convertView == null) { // if it's not recycled, initialize some
                                    // attributes
                rowView = new View(context);
                // get layout from gridview_item.xml
                rowView = inflater.inflate(R.layout.rotarowlayout, parent, false);
            } else {
                rowView = (View) convertView;
            }

           TextView startTime = (TextView)rowView.findViewById(R.id.rowstarttime);
           TextView duration = (TextView)rowView.findViewById(R.id.rowduration);
           TextView status = (TextView)rowView.findViewById(R.id.rowstatus);
           TextView name = (TextView)rowView.findViewById(R.id.rowclientname);

           startTime.setText("Start Time: " + values[position][0]);
           duration.setText("Duration:" + values[position][1]);
           status.setText("Status:" + values[position][2]);
           name.setText("Client:" + values[position][3] + values[position][4]);

            return rowView;
          }
        } 
```

[更新hitesh]

```
private class MySimpleArrayAdapter extends ArrayAdapter<String> {
        private final Context context;
        private final ArrayList<String[]> list;

        public MySimpleArrayAdapter(Context context,ArrayList<String[]> list) 
        {      

        super(context, R.layout.rotarowlayout);
         Log.e(TAG, "inside adapter constructor");
                this.context = context;           
                this.list= list;
              }

              @Override
              public View getView(int position, View convertView, ViewGroup parent) {
                  Log.e(TAG, "inside getView");
                LayoutInflater inflater = (LayoutInflater) context
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

               View rowView = inflater.inflate(R.layout.rotarowlayout, parent, false);

               TextView startTime = (TextView)rowView.findViewById(R.id.rowstarttime);
               TextView duration = (TextView)rowView.findViewById(R.id.rowduration);
               TextView status = (TextView)rowView.findViewById(R.id.rowstatus);
               TextView name = (TextView)rowView.findViewById(R.id.rowclientname);

               String[] values = list.get(position);

               startTime.setText("Start Time: " + values[0]);
               Log.e(TAG, "starttime = " + startTime);
               duration.setText("Duration:" + values[1]);
               status.setText("Status:" + values[2]);
               name.setText("Client:" + values[3] + values[4]);

                return rowView;

              }

              @Override
              public int getCount() {
                  return this.list.size();
              }

    }// end of adapter class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T15:40:36.507

您正在使用 split() 将每条记录转换为字符串数组。

```
String[] itemsInRecord = record.split(","); 
```

如果这是一条记录，那么记录数组应该是二维的。但是您的记录数组是一维的。

```
String[] recordItem = new String[5]; 
```

这将传递给您的适配器，该适配器可能正在为`values`. 对于每个位置，您的`getView()`方法是每次读取相同的五个值。

```
startTime.setText("Start Time: " + values[0]);
duration.setText("Duration:" + values[1]);
status.setText("Status:" + values[2]);
name.setText("Client:" + values[3] + values[4]); 
```

因此，您的数据需要两个维度：列表项的数量和每个项目的字段。您当前的代码使用与两者相同的维度，这就是您看到同一记录的五个副本的原因。

```
String[][] recordItem = new String[numRecords][5];
/* ... */
startTime.setText("Start Time: " + values[position][0]);
duration.setText("Duration:" + values[position][1]);
status.setText("Status:" + values[position][2]);
name.setText("Client:" + values[position][3] + values[position][4]); 
```

由于您已经拥有它，我建议使用`ArrayList`原始记录并将其传递给您的适配器。如果您的记录以您定义的某个类的形式出现，请使用它！`ArrayList`支持泛型类型，你可以让你的适配器期望它。您不必扩展`ArrayAdapter`；您可以扩展并提供、、 等`BaseAdapter`的必要实现`getCount()`，使用.`getItem(position)``getItemId(position)``ArrayList`

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-20T14:48:13.417

实际上你的代码是错误的。使用 ArrayList 字符串数组列表

```
for(int i=0;i<array.length;i++)
{
String record = array.get(i).toString();
String[] itemsInRecord = record.split(",");
list.add(record);      } 
```

还可以自定义您的适配器。MySimpleArrayAdapter arrayAdapter = new MySimpleArrayAdapter(this, list); listView.setAdapter(arrayAdapter);

```
private class MySimpleArrayAdapter extends ArrayAdapter<String> {
private final Context context;
private final Arraylist< String[]> list;
public MySimpleArrayAdapter(Context context,Arraylist< String[]> list) 
{         
super(context, R.layout.rotarowlayout,list);
        this.context = context;           this.list= list;
      }

      @Override
      public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View rowView = inflater.inflate(R.layout.rotarowlayout, parent, false);
       TextView startTime = (TextView)rowView.findViewById(R.id.rowstarttime);
       TextView duration = (TextView)rowView.findViewById(R.id.rowduration);
       TextView status = (TextView)rowView.findViewById(R.id.rowstatus);
       TextView name = (TextView)rowView.findViewById(R.id.rowclientname);
String[] values= list.get(position);
       startTime.setText("Start Time: " + values[0]);
       duration.setText("Duration:" + values[1]);
       status.setText("Status:" + values[2]);
       name.setText("Client:" + values[3] + values[4]);

        return rowView;}} 
```

在你的活动课上，替换

```
ArrayList array =  (ArrayList) bundle.get("rotaArray");
    for(int i = 0; i < array.size(); i++){

         Log.e(TAG, "array pos " + i + " = " +  array.get(i));

    }
    String record = array.get(0).toString();
    String[] itemsInRecord = record.split(",");
    String[] recordItem = new String[5];

   for(int x = 0; x < itemsInRecord.length; x++){

       Log.e(TAG, "token = " + itemsInRecord[x]);
       recordItem[x] = itemsInRecord[x];
  }

   MySimpleArrayAdapter arrayAdapter = new MySimpleArrayAdapter(this, recordItem);
   listView.setAdapter(arrayAdapter); 
```

和

```
 ArrayList<String[]> list = new ArrayList<String[]>();

 ArrayList array =  (ArrayList) bundle.get("rotaArray");

    for(int i = 0; i < array.size(); i++){

        String record = array.get(i).toString();
 String[] itemsInRecord = record.split(",");
    list.add(itemsInRecord);  

    }

 MySimpleArrayAdapter arrayAdapter = new MySimpleArrayAdapter(this, list);  
    listView.setAdapter(arrayAdapter); 
```

# asp.net - 当控件在网页asp.net中动态添加时，用户控件的gridview中的Link按钮的单击事件不起作用？

> ID：12514710
> 
> 赞同：0
> 
> 时间：2012-09-20T14:22:26.593
> 
> 标签：asp.net

在单击页面中的按钮时，我将用户控件添加到页面的占位符中。用户控件有一个gridview，它有一个链接按钮作为模板字段，并有一个与之关联的点击事件。

当我单击 gridview 内的链接按钮时，不会触发链接按钮单击事件，并且用户控件也会在页面中消失。

请提出解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T08:14:03.403

--您需要在页面生命周期（page_load/page_init）的早期重新创建所有动态控件，因此asp.net将检测事件并附加它们。

试试这个知识帖子 [http://support.microsoft.com/kb/317794](http://support.microsoft.com/kb/317794)

[为什么动态添加的用户控件的事件不会在回发时触发？](https://stackoverflow.com/questions/6948533/why-dont-events-of-dynamically-added-user-control-fire-on-postback)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T08:22:50.867

您需要重新创建动态控件`on every postback`- 请记住，每次回发都会创建一个新的页面类实例，因此您之前创建的任何动态控件都需要重新创建。

看[这篇文章](http://www.singingeels.com/Articles/Dynamically_Created_Controls_in_ASPNET.aspx)

[和这个](https://stackoverflow.com/questions/8323408/dynamically-loaded-web-user-control-hides-on-postback/8323504#8323504)

# android - 如何在 Roboguice 中使用上下文单例

> ID：12514714
> 
> 赞同：3
> 
> 时间：2012-09-20T14:22:36.480
> 
> 标签：android, dependency-injection, guice, roboguice

我`@ContextSingleton`用来标记依赖于上下文注入的单例。然而，从 RoboGuice 源代码和我自己的测试来看，似乎它在`Application`上下文和不同的活动上下文之间产生了差异。这是完全有道理的，只是当我将它与这样的事件管理工具一起使用时——至少对我来说——有问题：

```
@ContextSingleton
public class Service {
    @Inject
    private Context context;

    public void doSomething(@Observes MyEvent ev) {
        ...
    }
} 
```

尽管该服务被定义为单例，但似乎在它第一次注入某处之前似乎没有创建它的实例，显然是通过延迟加载。因此，触发 a`MyEvent`不会使侦听器调用。我们当时认为我们可以在我们的应用程序中“手动”预先加载类，例如

```
RoboGuice.get(context).getInstance(Service.class); 
```

并因此注册侦听器，但这仅在 Activity 中执行时才能正常工作，*该*Activity 后来也注入`EventManager`来触发事件，但不是应用程序。

所以，在一个理想的世界里，我希望我可以*告诉*RoboGuice 它应该将单例绑定到哪个上下文，就像这样

```
@ContextSingleton(MyApplication.class)
public class Service {
    ...
} 
```

但显然这是不可能的。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T22:13:45.457

我认为您错过了事件不会跨上下文传播并且是特定于上下文的 - 请参阅（旧但仍然有效的）[事件文档](http://code.google.com/p/roboguice/wiki/Events)中的“注意事项”部分。因此，即使您的单例在应用程序上下文中加载，它也无法知道每个活动的上下文中发生的事件。我认为他们这样做是有充分理由的，但是也许如果您将其子类化`Application`，则可以注入一个`EventManager`全局可访问的对象。

我还没有尝试过，所以我不确定它是否会起作用，无论如何，你必须将事件注入到不同的 EventManager 中，所以你最好为这个单例定义一个接口并工作那样的话，因为事件不会以你希望的方式传播。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-30T11:30:43.377

@JRaymond 是对的。RoboGuice 事件侦听器的实例不能在多个上下文中侦听事件。

但这很容易解决。不要让你的单身人士直接听事件。每个活动都可以监听自己的事件，然后将单通置于给定状态：

```
public class MyActivity extends RoboActivity {
    @Inject 
    private InsideAppManager mInsideAppManager;

    public void onHandleResumeEvent( @Observes OnResumeEvent onStartEvent ) {
        mInsideAppManager.setInsideApp(true);
    }

    public void onHandlePauseEvent( @Observes OnPauseEvent onStopEvent ) {
        mInsideAppManager.setInsideApp(false);
    }
} 
```

还有你的单身人士：

```
@Singleton
public class InsideAppManager {
    private boolean isInsideApp;

    public boolean isInsideApp() {
        return isInsideApp;
    }

    public void setInsideApp(boolean isInsideApp) {
        this.isInsideApp = isInsideApp;
    }
} 
```

# java - jdbc create array语句中的HSQL引用自定义类型

> ID：12514715
> 
> 赞同：0
> 
> 时间：2012-09-20T14:22:38.150
> 
> 标签：java, sql, arrays, jdbc, hsqldb

我目前在调用Connection 类的[createArrayOf(String,Object)时遇到 SQLException。](http://docs.oracle.com/javase/6/docs/api/java/sql/Connection.html#createArrayOf%28java.lang.String,%20java.lang.Object%5B%5D%29)我的数据库是HSQL，用于生成类型的代码如下：

```
create type FOO as BIGINT; 
```

我调用的java代码如下：

```
Connection conn = createConnection();  
conn.createArrayOf("MySchema.FOO",data); 
```

这也失败了：

```
Connection conn = createConnection();  
conn.createArrayOf("FOO",data); 
```

结果输出是：

> JDBC 调用中的参数无效：FOO

我的问题是如何绑定到 HSQL 数据库中存在的类型，这**不是**内存中的实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:00:57.287

当前不支持用户定义类型作为此方法的参数。您可以使用“BIGINT”。HSQLDB 的未来版本可能支持用户定义的类型参数。

# mysql - 清漆安装后 PHP myadmin 无法正常工作

> ID：12514716
> 
> 赞同：1
> 
> 时间：2012-09-20T14:22:42.303
> 
> 标签：mysql, phpmyadmin, ubuntu-12.04, varnish

我知道这不完全是一个编程问题，但我希望有人可以帮助我。我已经为 PHP 安装了 Varnish 加速器；在安装过程中更改了端口。成功安装后，我可以在我的文档根目录中访问我的站点。但是 'phpmyadmin' 无法连接到 mysql 服务器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T16:15:30.227

只需通过缓存传递您的 phpmyadmin 应用程序，例如

```
sub vcl_recv {
..
if (req.url ~ "^/phpmyadmin") {
return(pass);
}
..
} 
```

或者

```
sub vcl_recv {
..
if (req.http.host == "pma.yourdomain.com") {
return(pass);
}
..
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-09T18:05:58.047

在 sub vcl_fetch 添加

```
if (req.url ~ "^/phpmyadmin") {
return (hit_for_pass);
} 
```

并在 config.inc.php 添加

```
$cfg['PmaAbsoluteUri'] = 'http://www.mysite.com/phpmyadmin/'; 
```

# php - 如何在 Magento > 1.7 中将类别图像/缩略图添加到导航中

> ID：12514717
> 
> 赞同：0
> 
> 时间：2012-09-20T14:22:46.373
> 
> 标签：php, magento

我已经看到了一些针对 Magento < 1.7 版本的功能请求的解决方案，但对于我正在使用的版本却没有。由于在 v1.7 中导航模板已从我`top.phtml`看到`\app\design\frontend\THEME\TEMPLATENAME\template\page\html\topmenu.phtml`的解决方案移至不再适用。

我只想能够在本机类别菜单下拉列表中输出类别图像（通过管理界面上传）。下拉结构和布局已完成并按我想要的方式工作，减去图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:34:10.123

您将需要覆盖/替换 Mage_Catalog_Model_Observer。

最简单的方法是将 Mage_Catalog_Model_Observer (app/code/core/Mage/Catalog/Model/Observer.php) 复制到：

```
 app/code/local/Mage/Catalog/Model/Observer.php 
```

然后您可以修改：**_addCategoriesToMenu()**

将图像添加到数据中：

```
$categoryData = array(
    'image_url' => $category->getImageUrl(), // or thumbnail if you wanted.
    'name' => $category->getName(),
    'id' => $nodeId,
    'url' => Mage::helper('catalog/category')->getCategoryUrl($category),
    'is_active' => $this->_isActiveMenuCategory($category)
); 
```

然后，此数据将在 Navigation 块中可用。您还需要覆盖此块：将 app/code/core/Mage/Catalog/Block/Navigation.php 复制到

```
app/code/local/Mage/Catalog/Block/Navigation.php 
```

修改**_getHtml()**方法以根据需要将图像添加到标记中。

图片 url 将通过节点提供，如下所示：

```
$child->getImageUrl(); // or
$child->getData('image_url'); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-11-11T11:11:01.177

此解决方案适用于 Magento -1.8.*

在模型文件中。(/app/code/core/Mage/Catalog/Model/Observer.php)

更新函数名称中的以下代码：_addCategoriesToMenu

```
 $categoryData = array( 
        'name' => $category->getName(),
        'id' => $nodeId,
        'url' => Mage::helper('catalog/category')->getCategoryUrl($category),
        'is_active' => $this->_isActiveMenuCategory($category),
        'thumbnail' => Mage::getModel('catalog/category')->load($category->getId())->getThumbnail()

); 
```

然后进入 Html 文件夹。(app/code/core/Mage/Page/Block/Html/Topmenu.php)

在第 128 行更新以下代码行

函数名：_getHtml

```
$urls = Mage::getBaseUrl('media').'catalog/category/'.$child->getData('thumbnail');
$img = '<img src="'.$urls.'" />';

$html .= '<li ' . $this->_getRenderedMenuItemAttributes($child) . '>';
$html .= '<a href="' . $child->getUrl() . '" ' . $outermostClassCode . '><span>'
        . $this->escapeHtml($child->getName()) . ' </span> '.$img.' </a>'; 
```

# java - 使用 Python 监控 Web 使用情况

> ID：12514719
> 
> 赞同：3
> 
> 时间：2012-09-20T14:22:48.570
> 
> 标签：java, python, logging, sniffer

我想编写一个脚本来存储和分析我的互联网使用情况，但除了访问过的页面的简单列表之外，我想为每个页面包含一个“来自”和“去往”，这样我就可以将数据显示为加权有向图。但我不知道该用什么。

*自从我第一次尝试从浏览器外部使用互联网以来，我不知道要查找哪些关键字。我遇到的大多数事情都非常复杂，只对网络管理员有用，但我不关心所有低级数据，我只需要 URL。此外，仅监视传输的数据不会告诉我为了传输数据我做了什么（我猜）。*

这个问题听起来像是 Firefox 插件的工作，但显然他们不允许将数据写入磁盘，我宁愿避免只为一个项目接触 JavaScript。

理想情况下，它应该处理可点击的链接以及书签和手动地址条目，以及多个选项卡或窗口。让我举个例子：

*   打开 Firefox，起始页是 google.com
*   在另一个选项卡中打开 Stackexchange
*   去stackoverflow，搜索和浏览问题
*   切换到谷歌标签，搜索lolcats，点击第一个结果（icanhas.cheezburger.com）并阅读几页
*   去脸书
*   去谷歌，关闭火狐

这应该会产生以下结果：

*   add_node('google')
*   add_node('stackexchange')
*   add_node('stackoverflow'); add_edge('stackexchange', 'stackoverlow')
*   add_node('cheezburger'); add_edge('google', 'cheezburger')
*   add_node('facebook'); add_edge('芝士汉堡', 'facebook')
*   add_edge（“脸书”，“谷歌”）

或至少按加载顺序列出页面，然后我可以为每个唯一条目添加一个节点并遍历对以添加边缘，但如果我使用多个选项卡，此结果将是错误的

**摘要：**
使用 Python 或 Java 我想监控我的互联网流量（至少）或网络浏览器（最好？），这样每当点击链接时，手动输入地址或加载书签，目标位置以及来源（当前活动选项卡的 URL）被返回。如果这是可能的，请向正确的方向轻推我。

# php - 可汗学院 PHP Oauth 代码

> ID：12514722
> 
> 赞同：0
> 
> 时间：2012-09-20T14:22:50.537
> 
> 标签：php, oauth, khan-academy

我真的很努力使用可汗学院的 OAuth。这是针对我的班级网站（我是老师），我想提取特定学生的用户数据。如果我能做 OAUTH 我会没事的。我正在使用 PHP。
那里似乎有很多图书馆，我一直在玩 Google Oauth（位于此处[http://code.google.com/p/oauth-php/source/browse/trunk/example/client/twolegged.php](http://code.google.com/p/oauth-php/source/browse/trunk/example/client/twolegged.php)）

我可以很好地制定令牌请求，尽管当我在脚本中调用它时，它似乎试图重定向到另一个页面并在那里被阻止。
[http://myonlinegrades.com/prealg/khan/oauth-php/example/client/twoleggedtest.php](http://myonlinegrades.com/prealg/khan/oauth-php/example/client/twoleggedtest.php)

我真的很挣扎 - 我喜欢你可能提供的任何帮助。

下面的代码：

```
<?php

include_once "../../library/OAuthStore.php";
include_once "../../library/OAuthRequester.php";

// Test of the OAuthStore2Leg 
// uses http://term.ie/oauth/example/

$key = '*********';//'<your app's API key>';
$secret = '***********';//'<your app's secret>';
$callBack = "http://myonlinegrades.com/prealg/test2.php5";
$url = 'http://www.khanacademy.org/api/auth/request_token';

$options = array('consumer_key' => $key, 'consumer_secret' => $secret);
OAuthStore::instance("2Leg", $options);

$method = "GET";
//$params = null;
$params = array(oauth_consumer_key => $key,oauth_callback=>$callBack);
try
{
    // Obtain a request object for the request we want to make
    $request = new OAuthRequester($url, $method, $params);

    // Sign the request, perform a curl request and return the results, 
    // throws OAuthException2 exception on an error
    // $result is an array of the form: array ('code'=>int, 'headers'=>array(), 'body'=>string)
    $result = $request->doRequest();

    $response = $result['body'];

    if ($response != 'oauth_token=requestkey&oauth_token_secret=requestsecret') 
    {
        echo 'Error! $response ' . $response;
    }
    else 
    {
    }

    var_dump($response);
}
catch(OAuthException2 $e)
{
    echo "Exception" . $e->getMessage();
}

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T23:16:18.160

不确定这是否是您要查找的内容，但我整理了一个使用 Temboo SDK 与可汗学院进行 oAuth 的简单示例：查看[https://github.com/matthewflaming/temboo-experiments/tree/master /可汗学院Oauth](https://github.com/matthewflaming/temboo-experiments/tree/master/KhanAcademyOauth)

（全面披露：我在 Temboo 工作）

# ios - 向右滑动有时不起作用

> ID：12514723
> 
> 赞同：1
> 
> 时间：2012-09-20T14:22:53.783
> 
> 标签：ios, xcode, swipe

我有一个应用程序，滚动是通过滑动完成的。工作或多或少。

好吧，我的代码

```
UISwipeGestureRecognizer *oneFingerSwipeLeft = [[[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(foneFingerSwipeLeft:) ] autorelease];
[oneFingerSwipeLeft setDirection:UISwipeGestureRecognizerDirectionLeft];
[[self view] addGestureRecognizer:oneFingerSwipeLeft]; 
```

和

```
UISwipeGestureRecognizer *oneFingerSwipeRight = [[[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(foneFingerSwipeRight:) ] autorelease];
[oneFingerSwipeRight setDirection:UISwipeGestureRecognizerDirectionRight];
[[self view] addGestureRecognizer:oneFingerSwipeRight]; 
```

在我看来，除了名称和方向之外，它完全一样。之后再次使用相同的代码进行上下。

现在奇怪的行为：左，上，下没有任何问题，右只工作一次。我从教程中获得了这段代码，并在另一个应用程序中左右使用它，它在那里没有任何问题。

有谁知道，我该如何解决这个问题。我在这里阅读了很多关于此的问题，但大多数人都有这个问题，它永远不会起作用，我的解决方案大约是四次尝试中的一次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T16:24:10.613

滑动手势也有类似的问题。您的视图中是否还有其他控件，例如 ScrollViews？如果是这样，您应该查看“canCancelContentTouches”属性。

# php - IIS 持续需要 4 秒来处理来自 HTTP 1.0 客户端的请求

> ID：12514724
> 
> 赞同：2
> 
> 时间：2012-09-20T14:22:55.653
> 
> 标签：php, asp.net, iis, asp-classic

我有一个 RFID 阅读器 (http://avea.cc/web08s.html)，它使用 GET 方法将请求发布到 IIS 服务器。阅读器和服务器都放置在同一个网络中，并使用路由器连接。

阅读器使用键/值对发布这两个参数，ASP.Net 页面将使用几个标签（http://avea.cc/spec/web08s-sp01.pdf）发送响应。

我看到有 4 秒的持续延迟才能得到读者的响应。我在 IIS 日志的“耗时”列下看到 4 秒。

我启用了失败的请求跟踪，并将“0ms”视为处理时间。

除了发送硬编码的“GRNT=01”标签外，ASP.Net 页面中没有太多代码。

我尝试在同一台 IIS 服务器上使用 PHP 页面、经典 ASP 页面发送相同的标签。但是，仍然看到相同的 4 秒延迟。

以下是读者发布的标题：

------------- HeaderParameters --------------

连接：关闭

用户代理：网络阅读器（http://avea.cc）

然后，我使用 Hyper-V 在同一台 Windows 服务器上安装了 Ubuntu，并让读者发布到这台新服务器上。我在几分之一秒内得到了回复。我使用了在 IIS 服务器上使用的相同 PHP 文件。之后，我尝试了几台服务器，但总是在 IIS 上而不是在非 IIS 服务器上出现延迟。

IIS 服务器上没有运行其他角色。它是带有 Web 角色的全新安装。

Windows 7、Windows 8、Windows 2008 R2 和 Windows 2012 上的延迟相同。

当我通过浏览器或 Fiddler 发布相同的请求时，我没有看到任何延迟。

以下是来自 Microsoft 网络监视器的日志：

```
19 12:08:40 AM 9/18/2012 70.2321659 系统 78.70.27.161 192.168.1.101 TCP TCP:Flags=......S., SrcPort=65269, DstPort=HTTP(80), PayloadLen=0, Seq =1498152, Ack=1023812214, Win=32768 ( ) = 32768 {TCP:12, IPv4:11}

20 12:08:40 AM 9/18/2012 70.2341408 系统 192.168.1.101 78.70.27.161 TCP TCP:标志=...A..S., SrcPort=HTTP(80), DstPort=65269, PayloadLen=0, Seq =1500184337, Ack=1498153, Win=8192 (不支持比例因子) = 8192 {TCP:12, IPv4:11}

21 12:08:40 AM 9/18/2012 70.3629428 系统 78.70.27.161 192.168.1.101 HTTP HTTP:Request, GET /avea.asp, Query:cmd=PU&sid=00000100&deviceid=5988&mac=00:13:00:00:17 :64&id=192.168.1.100&type=m&mode=MF2&rev=2&sw=O&ver=1.23 {HTTP:13, TCP:12, IPv4:11}

22 12:08:40 AM 9/18/2012 70.3636151 系统 192.168.1.101 78.70.27.161 HTTP HTTP：响应，HTTP/1.1，状态：好的，URL：/avea.asp {HTTP：13，TCP：12，IPv4： 11}

23 12:08:40 AM 9/18/2012 70.7728540 系统 192.168.1.101 78.70.27.161 TCP TCP：[重新传输 #22]标志=...AP..F，SrcPort=HTTP(80)，DstPort=65269，PayloadLen =251, Seq=1500184338 - 1500184590, Ack=1498347, Win=65070 (比例因子 0x0) = 65070 {TCP:12, IPv4:11}

24 上午 12:08:41 2012 年 9 月 18 日 71.5462335 系统 192.168.1.101 78.70.27.161 TCP TCP：[重新传输#22]标志=...AP..F，SrcPort=HTTP(80)，DstPort=65269，PayloadLen =251, Seq=1500184338 - 1500184590, Ack=1498347, Win=65070 (比例因子 0x0) = 65070 {TCP:12, IPv4:11}

25 12:08:43 AM 9/18/2012 73.1113701 系统 192.168.1.101 78.70.27.161 TCP TCP：[重新传输 #22]Flags=...AP..F，SrcPort=HTTP(80)，DstPort=65269，PayloadLen =251, Seq=1500184338 - 1500184590, Ack=1498347, Win=65070 (比例因子 0x0) = 65070 {TCP:12, IPv4:11}

26 12:08:43 AM 9/18/2012 73.2449081 系统 78.70.27.161 192.168.1.101 HTTP HTTP：请求，GET /avea.asp，查询：cmd=PU&sid=00000100&deviceid=5988&mac=00:13:00:00:17 :64&id=192.168.1.100&type=m&mode=MF2&rev=2&sw=O&ver=1.23 {HTTP:13, TCP:12, IPv4:11}

27 12:08:43 AM 9/18/2012 73.4495140 系统 192.168.1.101 78.70.27.161 TCP TCP:Flags=...A...., SrcPort=HTTP(80), DstPort=65269, PayloadLen=0, Seq =1500184590, Ack=1498541, Win=64876 (比例因子 0x0) = 64876 {TCP:12, IPv4:11}

28 12:08:44 AM 9/18/2012 74.6766982 系统 192.168.1.101 78.70.27.161 TCP TCP：[重新传输#22]标志=...AP..F，SrcPort=HTTP(80)，DstPort=65269，PayloadLen =251, Seq=1500184338 - 1500184590, Ack=1498541, Win=64876 (比例因子 0x0) = 64876 {TCP:12, IPv4:11}

29 12:08:44 AM 9/18/2012 74.7931629 系统 78.70.27.161 192.168.1.101 TCP TCP：标志=...A...F，SrcPort=65269，DstPort=HTTP(80)，PayloadLen=0，Seq =1498541, Ack=1500184590, Win=32768 (比例因子 0x0) = 32768 {TCP:12, IPv4:11}

2012 年 9 月 18 日上午 30 点 12:08:44 74.7931982 系统 192.168.1.101 78.70.27.161 TCP TCP：标志=...A....，SrcPort=HTTP(80)，DstPort=65269，PayloadLen=0，Seq =1500184590, Ack=1498542, Win=64876 (比例因子 0x0) = 64876 {TCP:12, IPv4:11}

```

以下是 IIS 日志中的相应条目：

```
#Software: Microsoft Internet Information Services 7.5#Version: 1.0#Date: 2012-09-18 12:00:28#Fields: date time cs-method c-uri-stem c-uri-query c-ip c-version cs (User-Agent) cs(Cookie) cs(Referer) sc-status sc-substatus sc-win32-status time-taken
2012-09-18 12:08:44 GET /avea.asp cmd=PU&sid=00000100&deviceid=5988&mac=00:13:00:00:17:64&id=192.168.1.100&type=m&mode=MF2&rev=2&sw=O&ver=1.23 78.70 .27.161 HTTP/1.0 网络阅读器+(http://avea.cc) - - 200 0 0 4421

```

在同一个windows盒子上，如果我使用Apache+PHP，没有延迟。

在同一个网络上，使用 Ubuntu+PHP，没有延迟。

如果您有任何减少延迟的建议，请告诉我。

感谢您的时间！

# c# - 在客户端绑定 + WCF

> ID：12514725
> 
> 赞同：0
> 
> 时间：2012-09-20T14:22:58.120
> 
> 标签：c#, wcf, binding, client

我使用 Visual Studio 11 添加服务（添加服务参考）。当我添加服务文章时，我有一个带有一个构造函数的 articleClient：

```
public RssArticleServiceClient(System.ServiceModel.Channels.Binding binding, System.ServiceModel.EndpointAddress remoteAddress) : 
            base(binding, remoteAddress) {
    } 
```

我该如何使用这个构造函数，我不知道我应该使用哪个绑定值？

请提供任何示例或示例？

谢谢

此致

* * *

我这样做：

```
BasicHttpSecurityMode securitymode = BasicHttpSecurityMode.Transport; BasicHttpBinding binding = new BasicHttpBinding(securitymode); binding.MaxReceivedMessageSize = int.MaxValue; binding.MaxBufferSize = int.MaxValue; Uri uri = new Uri("adresse/RssArticleService.svc";); _clientArticles = new RssArticleServiceClient(binding, new EndpointAddress("adresse/RssArticleService.svc";)); var result=await _clientArticles.GetRssDataAsync("1", "fr"); 
```

和 A cat 这个错误：

```
**here was no endpoint listening at adresse/RssArticleService.svc that could accept the message. This is often caused by an incorrect address or SOAP** 
```

我该怎么办，我应该更改绑定类型吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T14:30:19.127

这是我的实现：

```
BasicHttpSecurityMode securitymode = HostSource.Scheme.Equals("https", StringComparison.InvariantCultureIgnoreCase) ? BasicHttpSecurityMode.Transport : BasicHttpSecurityMode.None;
BasicHttpBinding binding = new BasicHttpBinding(securitymode);
binding.MaxReceivedMessageSize = int.MaxValue;
binding.MaxBufferSize = int.MaxValue;

Uri uri = new Uri(Application.Current.Host.Source, "../service.svc");
_client = new RssArticleServiceClient(binding, new EndpointAddress(uri)) 
```

编辑：你需要在你的 web.config 中添加这个：

```
<system.serviceModel> 
<services>
  <service name="namespace.RssArticleService"
           behaviorConfiguration="RssArticleServiceBehavior">
    <endpoint address=""
              binding="basicHttpBinding"
              contract="namespace.IRssArticleService"/>
  </service>
</services>
<serviceBehaviors>
   <behavior name="RssArticleServiceBehavior">
      <serviceMetadata httpGetEnabled="true" httpsGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="true" />
   </behavior>
 </serviceBehaviors>
 <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true"/>
</system.serviceModel> 
```

# c - 如何将c函数直接生成为可执行机器码？

> ID：12514727
> 
> 赞同：2
> 
> 时间：2012-09-20T14:23:02.533
> 
> 标签：c, gcc, compilation

我的文件是 bootpack.c，里面有一个函数`void f() { while(1); }`。我想直接将它生成为可执行的机器代码。所以我像这样编译它：

```
gcc -c -nostdinc -fno-builtin bootpack.c
ld -nostdlib file.o -o bootpack.bin 
```

但我发现 bootpack.bin 是 3.84KB。我想它应该只有几个字节，因为它只是一个循环。怎么了？以及如何正确生成这个文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T17:55:08.410

您可以将`binary`其用作 GNU（基于 BFD）链接器的输出格式：

```
ld -nostdlib file.o --oformat=binary -o bootpack.bin 
```

然后，您可以使用以下方法对其进行拆卸：

```
objdump -b binary -m i386 -D bootpack.bin 
```

（用您的目标架构代替`i386`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T15:24:20.833

因为它包含符号表信息，所以要减小可执行文件的大小可以使用 strip 命令。

将其用作“strip --strip-all executable-file-name”，这样它将删除符号表等额外信息。即使在 gcc 选项 -s 中可以使用，gcc 中还有更多选项可以使用。

# php - PHPUnit 不断跳过测试 - Win7-64、XAMPP、Yii

> ID：12514731
> 
> 赞同：1
> 
> 时间：2012-09-20T14:23:18.057
> 
> 标签：php, selenium, yii, phpunit

PHP 单元在运行时跳过了所有的测试。我正在运行一个开发环境。这是我的环境：

*   视窗 7 专业版 64 位
*   阿帕奇 2.4
*   PHP 5.4.4
*   PHPUnit 3.7.0
*   硒 1.2.8
*   Yii 1.1.10

每次我为 Yii 运行功能（或任何测试）时，我都会得到以下输出。

```
C:\xampp\htdocs\mm\protected\tests>phpunit --verbose functional
PHPUnit 3.7.0 by Sebastian Bergmann.

Configuration read from C:\xampp\htdocs\mm\protected\tests\phpunit.xml

SSSSSS

Time: 12 seconds, Memory: 3.50Mb

There were 6 skipped tests:

1) SiteTest::testIndex
Could not connect to the Selenium Server on localhost:4444.

C:\xampp\php\phpunit:46

2) SiteTest::testContact
Could not connect to the Selenium Server on localhost:4444.

C:\xampp\php\phpunit:46

3) SiteTest::testLoginLogout
Could not connect to the Selenium Server on localhost:4444.

C:\xampp\php\phpunit:46

4) SiteTest::testIndex
Could not connect to the Selenium Server on localhost:4444.

C:\xampp\php\phpunit:46

5) SiteTest::testContact
Could not connect to the Selenium Server on localhost:4444.

C:\xampp\php\phpunit:46

6) SiteTest::testLoginLogout
Could not connect to the Selenium Server on localhost:4444.

C:\xampp\php\phpunit:46
OK, but incomplete or skipped tests!
Tests: 6, Assertions: 0, Skipped: 6.

C:\xampp\htdocs\mm\protected\tests> 
```

**注意：**以前从未收到无法连接到 Selenium 服务器的消息，也没有改变任何事情。仍在发布此问题并进行调查。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T04:26:12.323

即时通讯。Yii 官方指南中有一个章节叫做[功能测试](http://www.yiiframework.com/doc/guide/1.1/en/test.functional)。它开始于：

> 在阅读本节之前，建议您阅读 Selenium 文档。

本章以以下注释结尾，左边距有一个大标记：

> 提示：在运行功能测试之前，必须启动 Selenium-RC 服务器。这可以通过在 Selenium 服务器安装目录下执行命令 java -jar selenium-server.jar 来完成。

# asp.net - 您可以通过编程方式设置 MachineKey 吗？

> ID：12514733
> 
> 赞同：7
> 
> 时间：2012-09-20T14:23:21.287
> 
> 标签：asp.net, web-config

在 ASP.NET 中，您可以通过`machineKey`编程方式设置设置吗？

我们使用的网络应用程序将敏感信息存储在数据库中，因此如果我们可以将解密密钥放在那里，它会很方便。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T16:57:38.523

不; machineKey 元素必须通过配置设置。但是，web.config 本身可以加密，这有助于在攻击者访问配置文件时最大限度地降低密钥泄露的风险。（同样的过程可用于保护 SQL 连接字符串和几乎任何您希望的其他敏感配置元素。）请参阅[http://msdn.microsoft.com/en-us/library/dtkwfdky(v=VS.100)。 aspx](http://msdn.microsoft.com/en-us/library/dtkwfdky(v=VS.100).aspx)有关启用此功能的演练。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-01-20T14:03:26.260

是的你可以。我在 ConsoleApplication 中使用此代码获得了成功：

```
private static void ChangeWebConfig(string validationKey, string decryptionKey, string webConfigPath)
{
    ExeConfigurationFileMap configFileMap = new ExeConfigurationFileMap();
    configFileMap.ExeConfigFilename = webConfigPath;
    System.Configuration.Configuration config = ConfigurationManager.OpenMappedExeConfiguration(configFileMap, ConfigurationUserLevel.None);
    MachineKeySection section = (MachineKeySection)config.GetSection("system.web/machineKey");
    section.ValidationKey = validationKey;
    section.DecryptionKey = decryptionKey;
    config.Save();
} 
```

# sql - 将自动增量 ID 重构为 **SQL DB 中的 GUID

> ID：12514736
> 
> 赞同：2
> 
> 时间：2012-09-20T14:23:27.837
> 
> 标签：sql, postgresql, guid, uuid, refactoring-databases

[Jeff](http://www.codinghorror.com/blog/2007/03/primary-keys-ids-versus-guids.html)和[其他人](http://www.codeproject.com/Articles/388157/GUIDs-as-fast-primary-keys-under-multiple-database)让我相信 GUID 比自动增量 ID 更可取。我有一个由自动增量 id 索引的 Postgres 数据库，所以我想将索引“重构”为 UUID。除了编写遍历表的函数并检查表之间的索引匹配之外，是否还有一些通用（或特定）方法来执行此操作？

**更新**

*   注意：数据库当前未投入生产，因此性能和事务完整性不是问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T18:50:33.667

我找不到可以自动为您执行此操作的任何内容，因此您可以自行决定是否执行此操作。好在世界仍然需要数据库开发人员，嗯？

可以说，最好的方法是将整个更改编写成脚本。创建该脚本的最佳方法可能是使用另一个脚本或工具（编写代码的代码），这似乎不适用于此特定场景。当然，每一个都增加了另一层必须构建和测试的软件。如果我认为我想在一段时间内重复这个过程，或者需要某种程度的审计跟踪（例如更改脚本），我可能会硬着头皮写下编写这个脚本的脚本。

如果这真的只是一次性交易，并且您可以在执行此操作时阻止数据库访问，那么手动进行更改可能会节省时间和精力，就像您最初开发数据库时一样。我的意思是通过您喜欢的方法（图表、SQL DDL 等）添加 UUID 列，用数据填充它们（可能使用 ad-hoc SQL DML），设置键和约束，然后最终删除旧的外键和列（同样，使用您喜欢的任何方法）。

如果您有多个环境（dev、test、prod），您可以在 dev 中执行此操作，然后使用 DB 比较工具编写更改脚本，尽管您需要编写新的 FK 值脚本。

**一个例子**

这是[SQL Fiddle 上的一个工作脚本示例](http://sqlfiddle.com/#!3/f0c9d/1)，尽管它位于 SQL Server（我最简单的数据库）中，只是为了让您了解必须编写*什么脚本（不幸的是，不是**如何*编写脚本）。它在事务上仍然不完全一致，因为有人可以在一个特定操作期间修改某些东西。

我意识到这绝不是一个完整的答案，所以请随时投票给我（并提供更好的答案）。

祝你好运，这实际上是一个有趣的问题。

# javascript - 在 JS 文件中使用 Jquery？

> ID：12514737
> 
> 赞同：0
> 
> 时间：2012-09-20T14:23:27.627
> 
> 标签：javascript, jquery

我已经创建了一个外部 JS 文件，这个 JS 文件包含一些使用 JQuery 的方法，我似乎找不到在 JS 文件上引用 JQuery 文件并在那里使用它的方法。任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T14:43:32.647

要实现目标，有两件事很重要：

1.  **包括 javascript 文件**。通过脚本标签在 HTML 中包含这两个文件，以 jQuery 开头，以确保在您的 javascript 使用时加载它。
2.  **确保 jQuery**。这是很少人告诉你的方式。如果你长期写 JS 和 jQuery，迟早你会遇到覆盖 $-variable 的情况。$-variable 被 jQuery 使用，每个人都使用它进行编码，因为很明显它只是一个字符。然而，jQuery 没有任何“权利”或 $ 变量的东西，所以基本上任何东西或任何人都可以覆盖它。所以我推荐你自己的 javascript 文件看起来像这样：

    `(function($) { // your coding starts here. })(jQuery);`

在从知道自己在做什么的人那里剖析 jQuery 插件时，您可能已经遇到过这种情况。它创建了一个匿名函数，该函数接受一个参数，函数内部的 $ 将知道该参数。然后立即调用该函数并移交 jQuery 函数。这样你就可以确定，无论在这个函数之外发生什么，它里面的 $ 代表 jQuery。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T14:24:54.083

在您的 HTML 文件中，首先包含 jQuery 文件，然后包含您的文件：

```
<script type="text/javascript" src="jquery.min.js"></script>
<script type="text/javascript" src="myfile.js"></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T14:29:41.407

您必须编写一段脚本（纯 JS）来检查是否存在 jQuery，如果不存在，则必须将脚本引用附加到指向 jQuery 文件（或 Google CDN）的页面以包含 jQuery。之后，您可以在脚本的其余部分中使用 jQuery。

我认为这将涉及一些间隔来检查 jQuery 对象是否存在并等待执行其余代码，直到出现这种情况。

谷歌这个，我敢肯定那里有东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T14:25:04.270

只要您在 HTML 中包含 jQuery 核心，全局`jQuery`对象就可以在您的任何脚本中使用。你有一个具体的问题吗？

# objective-c - iOS 的 RestKit 或 ASIHTTPRequest 的替代品

> ID：12514739
> 
> 赞同：3
> 
> 时间：2012-09-20T14:23:35.160
> 
> 标签：objective-c, xcode, ios5, asihttprequest, restkit

除了 RestKit 或 ASIHTTPRequest，还有其他方法可以使用 iOS 连接到 Web 服务吗？ASIHTTPRequest 不再更新，所以我想知道除 RestKit 之外是否有任何当前支持和更新的东西。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T14:39:45.337

什么都不需要`ASIHTTPRequest`。您需要的一切都可以通过**NSURLConnection**及其委托来完成。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T15:06:08.053

看看[意大利面](https://github.com/noodlewerk/Spaghetti)。它是 RestKit 的一个很好的替代品，特别是如果您连接的 Web 服务器不像您希望的那样 RESTfull。提供快乐的支持。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T14:42:43.037

ASI 的作者（可能会错过！）推荐[AFNetworking](https://github.com/AFNetworking/AFNetworking)。根据我在这里看到的情况，这似乎是一个受欢迎的选择。

当然，您可以使用框架附带的内置 NSURLConnection 东西自行开发。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-01-04T06:00:54.027

RestKit 的替代品是 [SLazeKit](https://github.com/shial4/SLazeKit)框架，为 RESTful 资源提供模型映射器和 CoreData 序列化器。

SLazeKit 允许您：

*   通过 Codable 协议映射您的模型
*   从 API 响应序列化 CoreData 模型
*   使用 API 和 CoreData 快速简单地扩展您的模型

它是用 Swift 编写的。但是，你们中的其他人我觉得它很有用。:)

# iphone - Facebook SDK：未调用 openActiveSessionWithPermissions completionHandler

> ID：12514740
> 
> 赞同：4
> 
> 时间：2012-09-20T14:23:37.407
> 
> 标签：iphone, ios, facebook, facebook-ios-sdk

使用我已经实现的 Facebook 代码

```
- (BOOL)openSessionWithAllowLoginUI:(BOOL)allowLoginUI {
    NSArray *permissions = [[NSArray alloc] initWithObjects:
    @"publish_actions", 
    nil];

    return [FBSession openActiveSessionWithPermissions:permissions
                                      allowLoginUI:allowLoginUI
                                 completionHandler:^(FBSession *session,
                                                     FBSessionState state,
                                                     NSError *error) {
   NSLog(@"error %@", error);                                     
    [self sessionStateChanged:session
                        state:state
                        error:error];
                                 }];
} 
```

它返回 NO ，我理解这是第一次登录，并且 loginUI 工作（它将用户发送到 FB 并要求他们授予权限）然后返回但 completionHandler 块永远不会运行。它只是返回到应用程序和 nada。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-25T03:26:05.430

有点晚了，但以防万一有人来检查......

从 openActiveSession 切换到实例方法 openWithCompletionHandler 对我有用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-20T15:20:03.630

我假设您遵循[实现 Facebook SDK 的登录流程](https://developers.facebook.com/docs/howtos/login-with-facebook-using-ios-sdk/)，但值得再次阅读该部分，因为它解释了所有内容。确保您在委托中处理了 openURL 和 handleOpenURL 方法。还要检查[openSessionWithAllowLoginUI 几乎总是返回 NO](https://stackoverflow.com/questions/12115909/opensessionwithallowloginui-almost-always-returns-no)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T02:03:02.400

来自[官方文档](http://developers.facebook.com/docs/reference/ios/3.1/class/FBSession#openActiveSessionWithReadPermissions%3AallowLoginUI%3AcompletionHandler%3A)

> 处理程序
> 
> ...如果提供了一个块，则 FBSession 对象将在每次会话更改状态时调用该块。

我解决了这个问题，我解决了 Open Graph 设置，并通过研究来自 FB 的 Scrumptious 示例代码，例如这些函数 [FBSession.activeSession handleOpenURL:url] 和 [FBSession.activeSession handleDidBecomeActive];

# asp.net - 在 asp.net gridview 的模板列中调用方法

> ID：12514741
> 
> 赞同：0
> 
> 时间：2012-09-20T14:23:41.283
> 
> 标签：asp.net, gridview, datagridtemplatecolumn

我有一个带有模板列的 GridView。在其中我有一个超链接控件，我设置它的可见性并使用 Eval 动态地导航 URL。一切正常，但现在我必须向控件添加一个工具提示，并且我需要修剪文本末尾的空格和逗号。

我正在这样做：

```
ToolTip='<%# Eval("CombinedAccessions").ToString().TrimEnd(',', ' ') %>' 
```

如果在后面的代码上编码，这可以工作，但在 aspx 页面上编码时会失败。但如果我只使用 TrimEnd()，该函数调用就可以正常工作。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T14:59:53.333

问题是该`'`标志正在破坏您的属性值`ToolTip`。您可以将打开和关闭标志更改为，`"`但它会被`"`您里面的另一个打破。解决方案是在后面的代码中调用一个方法：

```
protected string FormatCombinedAccessions(string value)
{
   return value.TrimEnd(',', ' ');
} 
```

在 aspx 中：

```
ToolTip='<%# FormatCombinedAccessions((Convert.ToString(Eval("CombinedAccessions"))) %>' 
```

我改变了`ToString`使用以避免空值。

# ssis - 包在视觉工作室工作但不在工作代理中

> ID：12514744
> 
> 赞同：0
> 
> 时间：2012-09-20T14:23:48.993
> 
> 标签：ssis, sql-job

我已将我的包裹移至另一台服务器。现在在该服务器上，当我在 Visual Studio 上执行我的包时，它工作正常。但是当我部署同一个包并尝试通过**集成服务引擎**或**SQL Job**执行它时..我遇到错误

```
An error occurred with the following error message: "Cannot bulk load. The file "C:\ABC\PQR\XYZ\myFile.txt" does not exist.". 
```

**编辑**

不知何故，这个问题得到了解决，但现在我又遇到了一个问题

当我单击运行包时，安装在 MSDB 中的包工作正常。但是当我为相同的包创建 SQL 代理作业时，它不起作用。

我尝试设置“依赖服务器加密”但没有运气:-(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-04T12:56:15.400

如果这是 **C:\ABC\PQR\XYZ** 映射驱动器连接，则使用它通过服务器代理正常工作的 UNC 路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T11:44:42.577

我建议检查文件夹 C:\ABC\PQR\XYZ\ 是否对用于运行 SQL 代理作业的帐户具有读取权限。

# jquery - 无法识别 JQuery 中的 ASP.NET MVC Url.Action

> ID：12514745
> 
> 赞同：11
> 
> 时间：2012-09-20T14:23:51.940
> 
> 标签：jquery, ajax, asp.net-mvc

我正在尝试在我的 js 文件中使用 Url.Action() 方法来为我的 ajax 调用定义 url。到目前为止，我失败了。

```
 $.ajax(
 {
    type: "POST",
    url: '@Url.Action("SomeAction", "SomeController")',
    data: { 
        fileID: rightClickedFileId
    },
    success: function (data) {

    }
 }); 
```

如果我以这种方式定义 url，浏览器会尝试将数据发布到

```
http://localhost:5907/FileManager/@Url.Action(%22SomeAction%22,%20%22SomeController%22) 
```

结果我的ajax调用失败了。

但是，如果我`'/SomeController/SomeAction'`改用，一切正常。

第二个工作正常，但我想知道第一个的问题？可能是由于路由配置？

谢谢。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-20T14:36:42.160

`Url.Action`是一个 html 辅助方法，它可以在你的 razor 视图中工作，而不是在你的外部 javascript 文件中。

您可以做的是，`Url.Action`在剃刀视图中使用辅助方法获取操作方法的相对 URL，并将其设置为 javascript 变量并在外部 js 文件中使用它。执行此操作时，**请始终确保使用 javascript 命名空间**以避免与现有全局变量可能发生冲突。

您可以在*_Layout.cshtml中添加此代码*

```
<script type="text/javascript">

    var yourApp = yourApp || {};
    yourApp.Urls = yourApp.Urls || {};
    yourApp.Urls.baseUrl = '@Url.Content("~")';
    yourApp.Urls.editUserUrl= '@Url.Action("Edit","User")';

</script> 
```

或者在您的页面特定视图中，

```
@section Scripts
{
  <script type="text/javascript">

     var yourApp = yourApp || {};
     yourApp.Urls = yourApp.Urls || {};
     yourApp.Urls.baseUrl = '@Url.Content("~")';
     yourApp.Urls.editUserUrl= '@Url.Action("Edit","User")';

  </script>
  <script src="~/Scripts/PageSpecificExternalJsFile.js"></script>    
} 
```

现在在您的外部 javascript 文件中，您可以像访问它一样

```
var urlToEditUser = yourApp.Urls.editUserUrl;
//you can use urlToEditUser  now

// Or With the base url, you may safely add the remaining part of your url.
var urlToEditUser2 = yourApp.Urls.baseUrl+"User/Edit";
//you can use urlToEditUser2  now 
```

始终使用`Url.Action`or `Url.RouteUrl`html 辅助方法来构建操作方法的相对 url。无论您当前的页面/路径如何，它都会正确构建 url。

如果你想在你的角度控制器/数据服务等中做同样的事情，看看[这篇文章](https://stackoverflow.com/a/34600407/40521)，它解释了如何使用角度值提供者来做同样的事情。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-20T14:32:55.137

您不能`'@Url.Action("SomeAction", "SomeController")'`在 js 文件中使用，因为这是 ASP.NET MVC 助手，如果您将代码放到视图中，一切都会正常工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-01T23:58:27.753

我的方法与@Shyju 的方法类似，只是我没有在 Razor 视图中设置一个变量，而是`init`在我的 JavaScript 中调用一个函数，并将我需要由 Razor 解释的所有参数传递给它。

所以代码看起来像这样：

```
MyScript.init({
    editUserUrl: "@Url.Action("Edit","User")",
    anotherUrl: "@Url.Action("AnotherUrl", "User")"
}) 
```

然后在 JavaScript 中：

```
var m_options;
MyScript.init = function(options) {
    m_options = options;
}

// use with m_options.editUserUrl here
$.ajax(
{
    type: "POST",
    url: m_options.editUserUrl,
    data: { 
        fileID: rightClickedFileId
    },
    success: function (data) {
    }
 }); 
```

我在这里写了一篇关于它的更详细的帖子：http: [//blog.blanklabs.com/2015/02/aspnet-mvc-refactoring-friendly.html](http://blog.blanklabs.com/2015/02/aspnet-mvc-refactoring-friendly.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-31T10:27:12.327

你可以这样写

```
url:'/controllername/Actionname', 
```

# c# - C# + StyleCop + MSBuild + 全球文化设置未能被拾取

> ID：12514750
> 
> 赞同：4
> 
> 时间：2012-09-20T14:24:03.080
> 
> 标签：c#, msbuild, culture, stylecop

我已经将我的 C# 项目文件设置为导入一个 StyleCop.Targets 项目，该项目在构建时运行所有 StyleCop 规则。这太棒了，通过 Visual Studio 编译时，我已将项目降低到零错误。

但是，当我通过 MSBuild（在同一台机器上）进行编译时，出现以下错误：

`The documentation text within the constructor's summary tag must begin with the text: Initializes a new instance of the <see cref="MyClass" /> class.`

关注初始化中的“Z”...我已经使用**en-GB**全局设置配置了我的 Settings.StyleCop，这样我就不会在代码中收到有关美国主义的错误。但是我无法理解为什么这会导致 MSBuild 出现错误。

我知道 MSBuild 使用相同的 Settings.StyleCop 文件，就好像我更改了一个规则（比如 TabsMustNotBeUsed）MSBuild（和 Visual Studio）选择了这个更改并在所有地方抛出错误。

我正在使用 StyleCop 4.7、Visual Studio 2012 和 MSBuild 4。

这是我的 Settings.StyleCop 文件的片段：

```
<StyleCopSettings Version="105">
  <GlobalSettings>
    <StringProperty Name="Culture">en-GB</StringProperty>
  </GlobalSettings>
  <Parsers>
    <Parser ParserId="StyleCop.CSharp.CsParser">
      <ParserSettings>
        <BooleanProperty Name="AnalyzeDesignerFiles">False</BooleanProperty>
      </ParserSettings>
    </Parser>
  </Parsers>
  <Analyzers>
    <Analyzer AnalyzerId="StyleCop.CSharp.SpacingRules">
      <Rules>
        <Rule Name="TabsMustNotBeUsed">
          <RuleSettings>
            <BooleanProperty Name="Enabled">False</BooleanProperty>
          </RuleSettings>
        </Rule>
      </Rules>
      <AnalyzerSettings />
    </Analyzer>
  </Analyzers>
</StyleCopSettings> 
```

有什么线索吗？

干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T08:36:42.397

我假设您使用的是最新版本的 StyleCop (4.7.41.0) 或接近该版本的版本。在 4.7 版本行中进行了很多更改和修复，并且发布了相当定期的更新。

我猜在将文化设置回**en-US**的文件夹层次结构中必须有另一个 Settings.StyleCop 文件较低（在子文件夹中） 。只要您不在其他设置文件中再次设置，修改此特定设置文件中的其他规则（如 TabsMustNotBeUsed）仍将按预期运行。一个潜在的原因可能是运行 StyleCop 的工作文件夹。

我建议在您的文件系统中进行快速扫描，看看您是否可以找到任何其他设置文件，如果找到，请检查它们的文化设置。

我所做的另一个技巧是停止在解决方案根目录中合并设置文件。这可以通过添加以下设置来完成：

```
<GlobalSettings>
    <StringProperty Name="MergeSettingsFiles">NoMerge</StringProperty>
</GlobalSettings> 
```

这将确保 StyleCop 在所有开发和构建机器上的行为相同，而不管层次结构更高层配置的设置（例如 StyleCop 应用程序文件夹中的设置）。但是，如果您这样做，请确保从不再合并的文件中复制所有必需的设置。根据您的描述，我怀疑这是否能解决这个特定问题，但我发现它有助于保持规则的一致性。

# java - 将ip数组转换为java中最小的cidr子网列表

> ID：12514752
> 
> 赞同：4
> 
> 时间：2012-09-20T14:24:05.263
> 
> 标签：java, ip, cidr

我有一个如下所示的 ip 数组，我想将其转换为最小的 cidr 子网列表。Java中是否有用于该库的库？

例如：

```
1.1.3.0
1.1.3.1
1.1.3.2
1.1.3.3
..
1.1.3.254
1.1.3.255
1.2.3.0
1.2.3.1
1.2.3.2
1.2.3.3
..
1.2.3.254
1.2.3.255
1.3.3.0
1.3.3.1
1.3.3.2
1.3.3.3
..
1.3.3.128
1.3.3.129 
```

转换成

```
1.1.3.0/24
1.2.3.0/24
1.3.3.0/25
1.3.3.128/31 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T17:08:09.963

我不知道Java中是否有可用的库。确实，我对 Java 知之甚少 :) 但如果有帮助的话，我可以给你一个解决问题的算法。

1）将ip地址转换成整数对，其中第一个整数是ip地址的二进制表示（abcd -> a << 24 + b << 16 + c << 8 + d），第二个整数是32 （也就是说，最初每个地址都是它自己的子网 [1]）。

2) 对列表进行排序。

3) 现在扫描排序列表，从第二对开始。对于每一对，如果你可以将它与前一对结合起来，那么就这样做并继续尝试，直到尽可能长时间地结合。两对`[base1, bits1]`and`[base2, bits2]`可以组合 if`bits1 == bits2`和`base2 ^ base1 == 1 << (32 - bits1)`. 在这种情况下，组合是`[base1, bits1 - 1]`。

4) 最后，将这些对转换回 CIDR 表示法：第一个整数是子网的基数（转换回点分十进制时），第二个整数是位宽。

第 2 步和第 3 步都是`O(n log n)`

脚注 1：在您的示例中，您没有包含最后一个字节 0 的地址，这意味着我的算法将在您的测试用例中失败。您必须将它们添加到列表中。这一点揭示了 CIDR 子网定义中一个微妙但重要的细节：从技术上讲，可能的最小子网是 /30，因为该范围的第一个和最后一个 ip 都被保留。因此 /31 将没有有效的 IP 地址。但是，人们经常使用术语 CIDR 子网来表示“识别一组 IP 地址的位掩码”，就像它们用作过滤器表达式一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-03-25T04:40:14.413

Java中有一个可用的库。[开源 IPAddress Java 库](https://seancfoley.github.io/IPAddress/)具有将地址合并到前缀块子网的方法。免责声明：我是 IPAddress 库的项目经理。

以下方法“合并”显示了代码，依赖于库中的方法 mergeToPrefixBlocks：

```
static String[] merge(List<String> strs) {
    // convert first to address
    IPAddress first = new IPAddressString(strs.get(0)).getAddress();
    // convert remaining to address
    IPAddress others[] = strs.subList(1, strs.size()).stream().map(str -> new IPAddressString(str).getAddress()).toArray(IPAddress[]::new);
    // merge them all
    IPAddress[] blocks = first.mergeToPrefixBlocks(others);
    // convert back to strings
    return Arrays.stream(blocks).map(block -> block.toString()).toArray(String[]::new);
} 
```

可以使用您的一组示例地址来演示该方法，如以下代码所示：

```
ArrayList<String> strs = new ArrayList<>();
String firstPref = "1.1.3.";
String secondPref = "1.2.3.";
String thirdPref = "1.3.3.";
for(int i = 0; i <= 255; i++) {
    strs.add(firstPref + i);
    strs.add(secondPref + i);
}           
for(int i = 0; i <= 129; i++) {
    strs.add(thirdPref + i);
}
String result[] = merge(strs);
System.out.println("blocks are " + Arrays.asList(result)); 
```

输出是：

```
blocks are [1.3.3.128/31, 1.3.3.0/25, 1.1.3.0/24, 1.2.3.0/24] 
```

* * *

## 回答 #3

> 赞同：-6
> 
> 时间：2012-09-20T15:29:14.840

试试看：

```
public class Test {
    public static void main(String[] args) {
        String[] ipArray1 = new String[]{"1.1.3.1", "1.1.3.3", "1.1.3.2", "1.3.3.254"};
        String[] ipArray2 = new String[ipArray1.length];
        for(int i=0; i < ipArray1.length; i++) {
            String temp = ipArray1[i];
            ipArray2[i] = temp.substring(0,6) + "0/24";
        }
        for(String  ip : ipArray2) {
            System.out.println(ip);
        }
    }
} 
```

输出 ：

```
 1.1.3.0/24
    1.1.3.0/24
    1.1.3.0/24
    1.3.3.0/24 
```

# android - Android中的谷歌GetDirection

> ID：12514753
> 
> 赞同：2
> 
> 时间：2012-09-20T14:24:07.273
> 
> 标签：android, google-maps, google-maps-mobile

*   我已使用以下代码获取两个方向的路线，但我需要在 Android 中实现多个目的地选项，例如 GetDirections。

*   即使我也尝试了 drawline() 功能的方法，但它不会显示路线指令，如（左转、右转等）。

*   请任何人都可以帮我编写路线路径或嵌入下面列出的链接的航点功能

[https://google-developers.appspot.com/maps/documentation/javascript/examples/directions-waypoints](https://google-developers.appspot.com/maps/documentation/javascript/examples/directions-waypoints)

**代码**

```
Intent intent = new Intent(android.content.Intent.ACTION_VIEW, 
Uri.parse("http://maps.google.com/maps?saddr=st.%20louis,mo&daddr=washington,dc%20to:chicago,il%20to:new%20york,ny");
startActivity(intent); 
```

# jquery - 有没有更简洁的方式来编写这个 jQuery？

> ID：12514755
> 
> 赞同：2
> 
> 时间：2012-09-20T14:24:11.230
> 
> 标签：jquery, loops, for-loop

我可以把它写成一个循环吗？

```
$(document).ready(function(){
    $('#slideItems1').bxSlider();
    $('#slideItems2').bxSlider();
    $('#slideItems3').bxSlider();
    $('#slideItems4').bxSlider();
    $('#slideItems5').bxSlider();
}); 
```

我正在使用[bxSlider](http://bxslider.com/)并且要使用多个画廊，您需要调用滑块并将其关联到每个项目。我有时每页有 200 多个产品。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-20T14:25:33.067

您可以使用[属性 starts-with 选择器](http://api.jquery.com/attribute-starts-with-selector/)来选择 ID 以“slideItems”开头的所有元素：

```
$('[id^="slideItems"]').bxSlider(); 
```

大多数 jQuery 方法都是这种情况（大多数插件也允许这样做）。该方法适用于匹配集中的每个元素，因此不需要循环。您可以看到您正在使用的插件如何[在其源代码](https://github.com/wandoledzep/bxslider/blob/1324b6eb39f07d9a3112fe564c94becafaafbbca/source/jquery.bxSlider.js#L1253)中实现此功能（注意对 的调用`each`，并注意它`this`指的是包含匹配元素集的 jQuery 对象）：

```
this.each(function(){
    // make sure the element has children
    if($(this).children().length > 0){
        base.initShow();
    }
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-20T14:25:51.230

给你所有的幻灯片项目上课，然后就做`$('.slideItem').bxSlider();`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-20T14:25:56.993

给所有元素一个类，然后使用该类选择它们。

```
$('.slideItems').bxSlider(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-20T14:27:14.333

简短但不是最佳的重写将是（如果幻灯片项列表是固定的）

```
$(function(){
    $('#slideItems1, #slideItems2, #slideItems3, #slideItems4, #slideItems5').bxSlider();
}); 
```

但是我强烈建议给他们上一堂课。说`slideritem`和做

```
$(function(){
    $('.slideritem').bxSlider();
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T05:20:25.770

我建议为此提供类名并使用类名访问它。

```
//slideritem is class name which you give to all which has to slider div

$(function()
{

    $('.slideritem').bxSlider();
}); 
```

# ruby-on-rails - 工厂女孩'-'中的rails日期计算：预期的数字（TypeError）

> ID：12514759
> 
> 赞同：0
> 
> 时间：2012-09-20T14:24:20.850
> 
> 标签：ruby-on-rails, ruby, factory-bot

这是我的代码：

```
require 'date'

FactoryGirl.define do
  factory :construction_site do
    startdate = Date.today - rand(500)
    enddate = startdate + (1 + rand(1000))
    name { Faker::Lorem.words(2) }
    address {Faker::Address.street_address + "\n" + Faker::Address.zip_code + " " + Faker::Address.city} 
    internalnumber { "CON" + ( 1 + rand(50000)) }
    self.begin { startdate }
    self.end { enddate }
    finished { enddate < Date.today }
    user
    customer
  end
end 
```

我得到这个错误：

```
/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.2/lib/active_support/core_ext/
date/calculations.rb:100:in `-': expected numeric (TypeError)
        from /Users/kannix/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.2/lib/active_supp
ort/core_ext/date/calculations.rb:100:in `minus_with_duration'
        from /Users/kannix/railsapp/spec/factories/construction_sites.rb:5
:in `block (2 levels) in <top (required)>'
        from /Users/kannix/.rvm/gems/ruby-1.9.3-p125/gems/factory_girl-4.1.0/lib/factory_girl
/syntax/default.rb:18:in `instance_eval'
        from /Users/kannix/.rvm/gems/ruby-1.9.3-p125/gems/factory_girl-4.1.0/lib/factory_girl
/syntax/default.rb:18:in `factory'
        from /Users/kannix/railsapp/spec/factories/construction_sites.rb:4
:in `block in <top (required)>'
        from /Users/kannix/.rvm/gems/ruby-1.9.3-p125/gems/factory_girl-4.1.0/lib/factory_girl
/syntax/default.rb:49:in `instance_eval'
        from /Users/kannix/.rvm/gems/ruby-1.9.3-p125/gems/factory_girl-4.1.0/lib/factory_girl
/syntax/default.rb:49:in `run'
        from /Users/kannix/.rvm/gems/ruby-1.9.3-p125/gems/factory_girl-4.1.0/lib/factory_girl
/syntax/default.rb:7:in `define'
        from /Users/kannix/railsapp/spec/factories/construction_sites.rb:3
:in `<top (required)>' 
```

我的错误在哪里，该代码中是否还有其他需要更改的内容？（我是 Rails 新手；））

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T15:09:32.860

尝试更改以下行：

```
startdate = Date.today - rand(500)
enddate = startdate + (1 + rand(1000)) 
```

至：

```
startdate { Date.today - rand(500).days }
enddate { startdate + (1 + rand(1000)).days } 
```

添加`.days`将保留`startdate`和`enddate`作为`Date`对象

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T19:27:32.810

在工厂声明之前尝试分配这些值怎么样？

```
FactoryGirl.define do
  startdate = Date.today - rand(500)
  enddate = startdate + (1 + rand(1000))

  factory :construction_site do
    name { Faker::Lorem.words(2) }
    address {Faker::Address.street_address + "\n" + Faker::Address.zip_code + " " + Faker::Address.city} 
    internalnumber { "CON" + ( 1 + rand(50000)) }
    self.begin { startdate }
    self.end { enddate }
    finished { enddate < Date.today }
    user
    customer
  end
end 
```

甚至在第一行之前。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T11:40:47.163

我这样解决了

```
require 'date'

FactoryGirl.define do
  startdate = Date.today + 100
  factory :construction_site do
    name { Faker::Lorem.words(2) }
    address {Faker::Address.street_name + ' ' + rand(1000).to_s + "\n" + Faker::Address.zip_code + ' ' + Faker::Address.city} 
    internal_number { "CON" + ( 1 + rand(50000)).to_s }
    self.begin { startdate - rand(500) }
    self.end { startdate + rand(1000) }
    finished { self.end < Date.today }
    user
    customer
  end
end 
```

# winapi - LoadLibrary 因 ERROR_SXS_CANT_GEN_ACTCTX 而失败（dll 依赖于 VS2005 CRT 8.0.50727.4053）

> ID：12514760
> 
> 赞同：0
> 
> 时间：2012-09-20T14:24:23.003
> 
> 标签：winapi, dll, loadlibrary, side-by-side

我有一个用 Visual Studio 2005 构建的第三方 DLL，我在一个用 Visual Studio 2008 构建的项目中使用它。这个 DLL 依赖于 VS2005 CRT，版本 8.0.50727.4053。

在 Windows 7 上它可以工作，但在 Vista 和 XP 上 LoadLibrary 失败并出现并排错误。来自事件查看器：

> “C:\MyLibrary.dll”的激活上下文生成失败。相关程序集 Microsoft.VC80.CRT,processorArchitecture="x86",publicKeyToken="1fc8b3b9a1e18e3b",type="win32",version="8.0.50727.4053" 找不到。请使用 sxstrace.exe 进行详细诊断。

我尝试将`msvcm80.dll`, `msvcp80.dll`,`msvcr80.dll`从`x86_microsoft.vc80.crt_1fc8b3b9a1e18e3b_8.0.50727.4053_none_d08d7da0442a985d`我的计算机上复制到与 DLL 相同的目录，但 LoadLibrary 仍然失败，并且事件查看器中出现相同的错误。

这是 sxstrace.exe 的输出：

```
=================
Begin Activation Context Generation.
Input Parameter:
    Flags = 0
    ProcessorArchitecture = x86
    CultureFallBacks = en-US;en
    ManifestPath = C:\MyDir\MyLibrary.dll
    AssemblyDirectory = C:\MyDir\
    Application Config File = 
-----------------
INFO: Parsing Manifest File C:\MyDir\MyLibrary.dll.
    INFO: Manifest Definition Identity is (null).
    INFO: Reference: Microsoft.VC80.CRT,processorArchitecture="x86",publicKeyToken="1fc8b3b9a1e18e3b",type="win32",version="8.0.50727.4053"
INFO: Resolving reference Microsoft.VC80.CRT,processorArchitecture="x86",publicKeyToken="1fc8b3b9a1e18e3b",type="win32",version="8.0.50727.4053".
    INFO: Resolving reference for ProcessorArchitecture x86.
        INFO: Resolving reference for culture Neutral.
            INFO: Applying Binding Policy.
                INFO: Find publisher policy at C:\Windows\WinSxS\manifests\x86_policy.8.0.microsoft.vc80.crt_1fc8b3b9a1e18e3b_8.0.50727.4016_none_5169e8e10f4ca52d.manifest
                INFO: No binding policy redirect found.
            INFO: Begin assembly probing.
                INFO: Did not find the assembly in WinSxS.
                INFO: Attempt to probe manifest at C:\Windows\assembly\GAC_32\Microsoft.VC80.CRT\8.0.50727.4053__1fc8b3b9a1e18e3b\Microsoft.VC80.CRT.DLL.
                INFO: Attempt to probe manifest at C:\MyDir\Microsoft.VC80.CRT.DLL.
                INFO: Attempt to probe manifest at C:\MyDir\Microsoft.VC80.CRT.MANIFEST.
                INFO: Attempt to probe manifest at C:\MyDir\Microsoft.VC80.CRT\Microsoft.VC80.CRT.DLL.
                INFO: Attempt to probe manifest at C:\MyDir\Microsoft.VC80.CRT\Microsoft.VC80.CRT.MANIFEST.
                INFO: Did not find manifest for culture Neutral.
            INFO: End assembly probing.
    ERROR: Cannot resolve reference Microsoft.VC80.CRT,processorArchitecture="x86",publicKeyToken="1fc8b3b9a1e18e3b",type="win32",version="8.0.50727.4053".
ERROR: Activation Context generation failed.
End Activation Context Generation. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T15:27:28.753

您需要安装[Microsoft Visual C++ 2005 redistributable](http://www.microsoft.com/en-gb/download/details.aspx?id=3387) .

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T09:05:53.007

你需要为 VS2005 安装一个可再发行包。不幸的是，其中有几个用于不同的服务包级别、安全修复等。

一般来说，要找到你想要的那个，谷歌没有加载的 DLL 的版本号（在这种情况下是[8.0.50727.4053](http://www.google.co.uk/search?q=%228.0.50727.4053%22)）。

您可能会找到[指向正确包的链接](http://www.microsoft.com/en-us/download/details.aspx?id=14431)。

# android - 使用不同的 inputType 从一个edittext请求焦点到另一个

> ID：12514762
> 
> 赞同：2
> 
> 时间：2012-09-20T14:24:23.203
> 
> 标签：android, focus

我必须像这些不同的 EditText ：

![在此处输入图像描述](../Images/b31d12594be6e1ed3c34a40a84cf301a.png)

*   EditText1 的 inputType 为“textCapWords”
*   EditText2 的 inputType 为“数字”

当我启动我的活动时，我立即请求关注 EditText1。这样做的唯一方法是将其添加到 onCreate ：

```
getWindow().setSoftInputMode(
WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_VISIBLE);
EDITTEXT1.requestFocus(); 
```

当用户在他的软键盘上单击“返回”时，我希望 EDITTEXT2 获得焦点。所以我添加了这个：

```
EDITTEXT1.setOnKeyListener(new OnKeyListener() {
    public boolean onKey(View v, int keyCode, KeyEvent event) {
        if (keyCode == 66) { // CODE FOR RETURN
            EDITTEXT2.requestFocus();
        }
        return false;
    }
}); 
```

但是当我这样做时，什么也没有发生。我所有的 EditText 都设置为 FocusableInTouchMode 和 Focusable ：

```
<EditText
    android:id="@+id/EDITTEXT1"
    android:layout_width="0dip"
    android:layout_height="20dip"
    android:layout_weight="2"
    android:background="@color/White"
    android:ems="10"
    android:hint="My First EditText"
    android:inputType="textCapWords"
    android:padding="2dip"
    android:singleLine="true"
    android:textColor="@color/Black"
    android:textSize="12dip" >
    <requestFocus />
</EditText>

<EditText
    android:id="@+id/EDITTEXT2"
    android:layout_width="0dip"
    android:layout_height="20dip"
    android:layout_weight="2"
    android:background="@color/White"
    android:ems="10"
    android:hint="My Second EditText"
    android:inputType="textCapWords"
    android:padding="2dip"
    android:singleLine="true"
    android:textColor="@color/Black"
    android:textSize="12dip" >
</EditText> 
```

您对在 EDITTEXT1 上按 OK 后如何聚焦 EDITTEXT2 有任何想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T14:01:03.753

非常感谢您的回答。我终于找到了回答我自己问题的最简单方法：

添加 ：

android:nextFocusRight="@+id/EDITTEXT2"

到 EDITTEXT1 的属性。

在 EDITTEXT1 上单击“Enter”后，无需任何其他操作即可进入 EDITTEXT2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T05:04:26.937

您应该首先创建自己的从 EditText 扩展的 EditText，然后`dispatchKeyEventPreIme`像这样覆盖该方法：

```
@Override
public boolean dispatchKeyEventPreIme(KeyEvent event) {  
    if (event.getKeyCode() == KeyEvent.KEYCODE_BACK) {  
        if (event.getAction() == KeyEvent.ACTION_DOWN && event.getRepeatCount() == 0) {  
            return super.dispatchKeyEventPreIme(event);  
        } else if (event.getAction() == KeyEvent.ACTION_UP) {  
            hideInputMethod();
            //change your focus at here
            return true;  
        }  
    }  
    return super.dispatchKeyEventPreIme(event);  
}

protected void hideInputMethod() {  
    InputMethodManager imm = (InputMethodManager)getContext()  
        .getSystemService(Context.INPUT_METHOD_SERVICE);  
    if (null != imm) {  
        imm.hideSoftInputFromWindow(getWindowToken(), 0);  
    }  
} 
```

顺便说一句，这样编码不是一个好方法`if (keyCode == 66) { // CODE FOR RETURN`，而且66不是back的值，它是key enter。

```
public static final int KEYCODE_ENTER           = 66; 
```

你最好写`KeyEvent.KEYCODE_BACK`或`KeyEvent.KEYCODE_ENTER`代替。

我希望这可以帮助你。

# python - 使用 pycurl 获取文件大小

> ID：12514768
> 
> 赞同：1
> 
> 时间：2012-09-20T14:24:29.443
> 
> 标签：python, pycurl

我想用 python 编写一个下载器，我使用 PycURL 作为我的库，但是我遇到了一个问题。我无法获得要下载的文件的大小。这是我的代码的一部分：

```
import pycurl
url = 'http://www.google.com'
c = pycurl.Curl()
c.setopt(c.URL, url)
print c.getinfo(c.CONTENT_LENGTH_DOWNLOAD)
c.perform() 
```

当我在 python shell 中测试这段代码时，没关系，但是当我将它编写为函数并运行它时，它给了我 -1 而不是大小。问题是什么？

（代码已被编辑）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T15:55:50.663

这个答案增加了缺失`c.setopt(c.NOBODY, 1)`，并且与几个月前给出的答案相同：

```
import pycurl

c = pycurl.Curl()
c.setopt(c.URL, 'http://www.alfe.de')
c.setopt(c.NOBODY, 1)
c.perform()
c.getinfo(c.CONTENT_LENGTH_DOWNLOAD) 
```

在调用`c.setopt(c.NOBODY, 1)`之前调用`c.perform()`避免下载文件的内容（“无正文”，但所有标题）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T02:33:35.483

从`pycurl`Curl 对象的文档中：

> 除非已经调用并完成了 perform，否则不应调用 getinfo 方法。

你在打电话`getinfo`之前打电话`perform`。

这是您示例的简化版本，这行得通吗？

```
import pycurl

url = 'http://www.google.com'
c = pycurl.Curl()
c.setopt(c.URL, url)
c.perform()
print c.getinfo(c.CONTENT_LENGTH_DOWNLOAD) 
```

您应该看到 HTML 内容后跟大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T08:41:34.563

尝试添加调试以查看实际发生的情况。创建 curl 后，请执行以下操作：

```
def curl_debug（调试类型，味精）：
    print("调试: %s %s" % (repr(debug_type), repr(msg)))

c.setopt(pycurl.VERBOSE, 1)
c.setopt(pycurl.DEBUGFUNCTION, curl_debug)

```

# uitableview - iOS UItableview scrollToRowAtIndexPath 不再工作

> ID：12514770
> 
> 赞同：24
> 
> 时间：2012-09-20T14:24:31.690
> 
> 标签：uitableview, ios6

今天早上我刚刚安装了包含 iOS 6 的新 Xcode。

我有一个表视图，其中加载了一个包含章节和行的 plist 文件。章节定义了部分。

用户选择章节和行，表格视图会自动滚动到正确的位置（在 viewDidLoad 中）。

```
NSIndexPath *indexPath = [NSIndexPath indexPathForRow:linePos inSection:chapterPos];
[self.tableView scrollToRowAtIndexPath:indexPath 
    atScrollPosition:UITableViewScrollPositionTop animated:YES]; 
```

这在 iOS5 模拟器中效果很好。

在 iOS 6 模拟器中尝试此操作不会执行滚动。我没有错误。我检查过， linePos 和 chapterPos 收到正确的值，但没有执行滚动。

任何想法为什么？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2014-12-12T15:40:13.390

Objective-C

```
[self.tableView reloadData];
dispatch_async(dispatch_get_main_queue(), ^{
        NSIndexPath *rowIndexPath = [NSIndexPath indexPathForRow:3 inSection:0];
        [self.tableView scrollToRowAtIndexPath:rowIndexPath atScrollPosition:UITableViewScrollPositionMiddle animated:YES];
}); 
```

迅速

```
tableView.reloadData()
DispatchQueue.main.async {
    let indexPath = IndexPath(row: linePos, section: chapterPos)
    self.tableView.scrollToRow(at: indexPath, at: .top, animated: true)
} 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-09-21T08:11:55.827

**对于最新版本的 iOS，请阅读 Fyodor Volchyok 的回答。**请注意，它没有被标记为已接受的答案，仅仅是因为在首次提出问题时（2012 年 9 月），当前答案是有效的解决方案。更新版本的 iOS 也遇到了同样的问题，现在 Fyodor Volchyok 的回答已经解决了这个问题，所以你应该在那一刻 +1 他的回答。

* * *

我找到了答案。我必须先重新加载表格视图中的数据

```
NSIndexPath *indexPath = [NSIndexPath indexPathForRow:linePos inSection:chapterPos];

[self.tableView reloadData];

[self.tableView scrollToRowAtIndexPath:indexPath 
    atScrollPosition:UITableViewScrollPositionTop animated:YES]; 
```

即使我找到了答案，我也不知道为什么它在 iOS5 而不是 iOS6 中工作。

**编辑**

也许我应该补充一点，即使它正在工作，我在显示最后一行时仍然遇到问题并为此发布了一个问题

[UItableview scrollToRowAtIndexPath 没有正确显示最后一行](https://stackoverflow.com/questions/13028239/uitableview-scrolltorowatindexpath-not-displaying-last-row-correctly)

正如@Raj 也要求的那样，我应该说我是在`viewDidLoad`. 为了纠正最后一行显示不正确的问题，我不得不将它放在`viewDidAppear`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-01-17T15:47:17.833

这适用于 iOS 12 和 13：

```
DispatchQueue.main.asyncAfter(deadline: .now() + 0.1) { 
    self.tableView.scrollToRow(at: IndexPath(row: 0, section: 1), at: .bottom, animated: true) 
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-01-05T17:00:09.417

我将此答案添加为 Fyodor Volchyok 答案的补充。我还发现调度解决了这个问题。我能够找到一个不调度的解决方法。

```
self.tableView.reloadData()
let index = // the desired index path

// For some reason, requesting the cell prior to 
// scrolling was enough to workaround the issue.
self.tableView.cellForRowAtIndexPath(index)

self.tableView.scrollToRowAtIndexPath(index, atScrollPosition: .Top, animated: false) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-11-28T22:18:12.943

我在运行 ios11 的 iPhone X 上遇到了另一个与 scrollToRowAtIndexPath 相关的问题（可能是一个错误）。我的桌子有几百个部分，在折叠模式下，~10 可以放在可见屏幕中。随着 indexPath 越来越深，滚动逐渐落后。

例如，当我希望搜索找到第 30 行中的项目时，ScrollPositionTop 将在我希望位于顶部的实际行之前多出一行。

当我测试搜索更深的行时，它开始落后于甚至超过 100 行深左右的任何东西，预期的行甚至没有出现在可见区域中。

到目前为止，我发现的解决方法是对 dispatch_async 中的滚动说动画：NO，然后它可以正常工作而不会出现任何故障。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-12-17T08:27:32.453

iOS7 之后`automaticallyAdjustsScrollViewInsets`UIViewController 默认的属性是`YES`. 当视图控制器被推送时，它会导致系统调整`contentOffset`tableView 的值。即使你打电话`[self.tableView scrollToRowAtIndexPath:rowIndexPath atScrollPosition:UITableViewScrollPositionNone animated:NO];`给`viewWillAppear`. `contentOffset`之后也会被系统更改`viewWillAppear`。所以我的解决方案是：

```
- (void)viewDidLoad {
    [super viewDidLoad];

    self.automaticallyAdjustsScrollViewInsets = NO;

    /// any other codes
}

- (void)viewWillLayoutSubviews {
    self.tableView.contentInset = UIEdgeInsetsMake(self.topLayoutGuide.length, 0, 0, 0);
}

- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];

    // change tableView data source

    [self.tableView reloadData];
     NSIndexPath *indexPath = [NSIndexPath indexPathForRow:[self.dataSourceArray count] - 1 inSection:0];
    [self.tableView scrollToRowAtIndexPath:indexPath atScrollPosition:UITableViewScrollPositionNone animated:NO];
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-07-10T11:55:01.210

另一种可能的解决方法是在调用`layoutIfNeeded`之前先调用`scrollToRowAtIndexPath`。

```
[self.view layoutIfNeeded];
[self.tableView scrollToRowAtIndexPath...]; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-10-23T07:54:32.840

Fyodor Volchyok 在 Swift 中的回答：

```
tableView.reloadData()
let indexPath = NSIndexPath(forRow: linePos, inSection: chapterPos)
// make sure the scroll is done after data reload was finished
dispatch_async(dispatch_get_main_queue()) {
   self.tableView.scrollToRowAtIndexPath(indexPath, atScrollPosition: .Top, animated: true)
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-10-12T06:20:15.447

它在 ios11 中对我有用

```
self.tableView.estimatedRowHeight = 0;
self.tableView.estimatedSectionFooterHeight = 0;
self.tableView.estimatedSectionHeaderHeight = 0

dispatch_async(dispatch_get_main_queue(), ^{
   NSInteger numberOfSections = self.tableView.numberOfSections;
   if (numberOfSections > 0)
   {
     NSInteger lastSection = numberOfSections - 1;
     NSInteger lastRowInLastSections = [self.tableView numberOfRowsInSection:lastSection] - 1;

     NSIndexPath *indexPath = [NSIndexPath indexPathForRow:lastRowInLastSections inSection:lastSection];
     [self.tableView scrollToRowAtIndexPath:indexPath atScrollPosition:UITableViewScrollPositionBottom animated:isAnimated];
}
}); 
```

# spring - 集成 JSF 2.1 和 Spring 3.2

> ID：12514771
> 
> 赞同：4
> 
> 时间：2012-09-20T14:24:34.910
> 
> 标签：spring, jsf-2

我想在我的 JSF 应用程序中使用我的 Spring Beans，让 Spring 在我的 JSF Managed Beans 中注入我的服务/存储库。

我在互联网上找到了很多解决方案，但唯一有效的是以下代码行：

```
ApplicationContext ctx = FacesContextUtils.getWebApplicationContext(FacesContext.getCurrentInstance());
albumRepository = (AlbumRepository) ctx.getBean("albumRepository"); 
```

albumRepository 是我要注入的 Spring Bean。

问题是它真的很蹩脚，我不想在每堂课上，每次注射时都这样做。我想使用注释，例如“@Inject”。

在 Google 中搜索答案，我发现我应该使用 faces-config.xml 中的以下配置集成 JSF 和 Spring：

```
<application>
    <el-resolver>
        org.springframework.web.jsf.el.SpringBeanFacesELResolver
    </el-resolver>
</application> 
```

然后，我应该能够使用带有注释“@ManagedProperty(value="#{albumRepository}")”的 Spring Beans。我试过了，但我得到了错误“托管 bean 的属性 albumRepository 不存在”。

再次在 Google 中搜索，我发现我可以使用 Spring 注释来进行注入，我唯一需要做的就是在 applicationContext.xml 中注册我的托管 bean 所在的包。我已经完成了，但是 Spring 只是忽略了我的注释（@Inject 和 @Autowired，我都试过了）。

在所有这些失败之后，我尝试停止使用 JSF 注释（@ManagedBean 和 @ViewScoped），而是使用 Spring 注释（@Controller 和 @Scope）。现在 JSF 甚至无法识别 bean。

我究竟做错了什么？

编辑：我的 ApplicationContext.xml

```
<context:annotation-config/>
        <jpa:repositories base-package="com.ae.repository" />
        <context:component-scan base-package="com.ae.client.web, com.ae.service" />

        <!-- Data Source -->
        <bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
            <property name="driverClassName"><value>com.mysql.jdbc.Driver</value></property>
            <property name="url"><value>jdbc:mysql://localhost:3306/academia</value></property>
            <property name="username"><value>root</value></property>
            <property name="password"><value>root</value></property>
        </bean>

        <bean id="jpaAdapter" class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
            <property name="database" value="MYSQL" />
            <property name="showSql" value="true" />
        </bean>

        <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
            <property name="dataSource" ref="dataSource" />
            <property name="jpaVendorAdapter" ref="jpaAdapter" />
            <property name="persistenceXmlLocation" value="/META-INF/persistence-web.xml"/>
        </bean>

        <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
            <property name="entityManagerFactory" ref="entityManagerFactory" />
        </bean> 
```

编辑：我的 web.xml

```
<!-- Spring -->
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/applicationContext.xml</param-value>
    </context-param>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <listener>
        <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
    </listener>

    <!-- JSF -->
    <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>Development</param-value>
    </context-param>

    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>/faces/*</url-pattern>
    </servlet-mapping>

    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>

    <context-param>
        <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
        <param-value>server</param-value>
    </context-param>

    <welcome-file-list>
        <welcome-file>faces/index.xhtml</welcome-file>
    </welcome-file-list>

    <!-- Primefaces -->
    <filter>
        <filter-name>PrimeFaces FileUpload Filter</filter-name>
        <filter-class>org.primefaces.webapp.filter.FileUploadFilter</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>PrimeFaces FileUpload Filter</filter-name>
        <servlet-name>Faces Servlet</servlet-name>
    </filter-mapping> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T15:00:16.163

在您的 web.xml 中有这样的上下文参数？

```
<context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>classpath:/*Context.xml</param-value>
    </context-param> 
```

你也可以在你的 web.xml 中发送关于 spring 的监听器吗

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T17:59:54.087

如果你想让 Spring IOC 容器管理你所有的 bean。使用@Component、@Named 或 javax.annotation.ManagedBean 注释之一，您可以使用@Autowired 或@Inject 注入它们。不要忘记将 Spring 的 @Scope 用于其中任何一个。

查看[文档](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#beans-standard-annotations)

如果您想将 JSF IOC 容器与 Spring IOC 容器一起使用，您可以使用 @ManagedProperty 将 Spring bean 注入 JSF bean。

也可以看看：

*   [@Scope（“请求”）不起作用](https://stackoverflow.com/questions/12470512/scoperequest-not-working)
*   [当找到多个匹配的bean时，Spring如何按名称自动装配？](https://stackoverflow.com/questions/4447877/does-spring-autowire-by-name-if-more-than-one-matching-bean-found)

# xml - vb.net 中的 REST 调用：如何传递在 cURL 中工作的密钥“文件”

> ID：12514779
> 
> 赞同：4
> 
> 时间：2012-09-20T14:24:54.357
> 
> 标签：xml, vb.net, rest, post, curl

我已经在这个问题上苦苦挣扎了将近一个月，并且我阅读了我在网上可以找到的所有内容，但没有解决方案。这是我的问题：我正在为 RESTful API 服务实现一个客户端，该服务必须在 vb.net 中通过 POST 调用发送 XML 文件。在获取一些 xml 格式的数据时，我能够使其正常工作，但是在发送此 Xml 文件时，我总是收到“400 bad request error”。

我已经发现它必须是必须传递给服务器的密钥问题（显然只接受文件上传 POST，我不能将其作为字符串发送）。

基本上这个调用适用于 cURL，但我正在努力在 vb.net 中实现我自己的调用，传递正确的值。

工作 cURL 调用：（成功传输 XML）

```
 c:>curl -u username:password -F "file=@filename.xml" -X POST http://hostname.com/URI?parameters 
```

不工作的 Vb.net 代码：（这给了我 400 Bad Request）

```
Dim ss As String = "" 'server says...
Dim S As String = txb_username.Text & ":" & txb_password.Text
Dim EncodedString As String = System.Convert.ToBase64String(System.Text.Encoding.UTF8.GetBytes(S))
Dim req As HttpWebRequest = Nothing
Dim res As HttpWebResponse = Nothing

Try
    Dim xmlDoc As System.Xml.XmlDocument = New System.Xml.XmlDocument
    xmlDoc.XmlResolver = Nothing

    xmlDoc.Load("c:\path\file4.xml")

    Dim sXML As String = "file" & xmlDoc.InnerXml '<- This is where I try to put the "KEY"

    Dim url As String = "http:/host.com+URI"

    req = CType(WebRequest.Create(url), Net.HttpWebRequest) 'or Directcast ... 
    req.Method = "POST"
    req.Headers.Add("Authorization: Basic " & EncodedString)
    req.ContentType = "multipart/form-data"
    req.ContentLength = sXML.Length 
    req.Accept = "*/*"

    System.Windows.Forms.Application.DoEvents()

    Dim sw As System.IO.StreamWriter = New System.IO.StreamWriter(req.GetRequestStream)
    StatusUpdate(sXML)
    sw.Write(sXML)
    sw.Close()
    ss = "server says: "
    res = CType(req.GetResponse, HttpWebResponse)
     StatusUpdate(req.ToString)
    Catch ex As Exception
        StatusUpdate(ss & ex.Message)
    Finally

End Try 
```

是因为我试图将其作为字符串发送吗？（但我还能如何将它作为文件发送？）为此，我制作了另一个发送数据字节的程序，但这也给了我“400”，因为（我假设）我没有放“文件”键。

```
 Dim requestStream As Stream = Nothing
    Dim fileStream As FileStream = Nothing
    Dim uploadResponse As Net.HttpWebResponse = Nothing

    Try

        Dim uploadRequest As Net.HttpWebRequest = CType(Net.HttpWebRequest.Create(URI.Text & Uri_part2.text), Net.HttpWebRequest)

        uploadRequest.Method = Net.WebRequestMethods.Http.Post
        uploadRequest.ContentType = "text/xml; charset=utf-8"
        uploadRequest.Credentials = New NetworkCredential("user", "pass")
        uploadRequest.KeepAlive = True
        uploadRequest.UserAgent = "User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US; rv:1.9.0.10) Gecko/2009042316 Firefox/3.0.10"
        uploadRequest.Accept = ("text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8")
        uploadRequest.Headers.Add("Accept-Language: en-us,en;q=0.5")
        uploadRequest.Headers.Add("Accept-Encoding: gzip,deflate")
        uploadRequest.Headers.Add("Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7")
        uploadRequest.Headers.Add("Content-Disposition: form-data; name=""file"";")
        uploadRequest.ContentType = "application/xml; charset=utf-8"

        requestStream = uploadRequest.GetRequestStream()
        fileStream = File.Open("C:\example.xml", FileMode.Open)

        Dim a As Integer

        Dim buffer(1024) As Byte
        Dim bytesRead As Integer
        While True
            a = a + 1
            bytesRead = fileStream.Read(buffer, 0, buffer.Length)
            StatusUpdate(buffer(a))

            If bytesRead = 0 Then
                Exit While
            End If
            requestStream.Write(buffer, 0, bytesRead)

        End While

       requestStream.Close()

        uploadResponse = uploadRequest.GetResponse()
        Dim responseReader As StreamReader = New StreamReader(uploadRequest.GetResponse.GetResponseStream())
        Dim x As String = responseReader.ReadToEnd()
        responseReader.Close()
        StatusUpdate(x)

    Catch ex As UriFormatException
        StatusUpdate("UriFormatException: " & ex.Message)
    Catch ex As IOException
        StatusUpdate("IOException: " & ex.Message)
    Catch ex As Net.WebException
        StatusUpdate("Net.WebException: " & ex.Message)

    Finally

        If uploadResponse IsNot Nothing Then
            uploadResponse.Close()
        End If

        If fileStream IsNot Nothing Then
            fileStream.Close()
        End If

        If requestStream IsNot Nothing Then
            requestStream.Close()
        End If

    End Try 
```

无论如何，我还尝试了其他 2 个客户端（POSTMAN 和 REST 控制台，Google Chrome 的 2 个扩展），只有将值“file”添加到“key”字段中，我才能让它工作。我必须插入特定的 4 个字符“文件”才能使其正常工作。所以，问题是：如何在 Vb.net 调用中添加相同的值？如何在工作的 Vb.net 代码中翻译 cURL 调用的代码？非常感谢您的时间和帮助！！！

在此处找到我要添加的内容的图像，![想要的形象](../Images/177d9f08dd848c6273f5bc50f8bf5938.png)

PS 我不能使用 PUT，我必须使用 POST（服务器限制）

我还使用我的电脑中的服务器添加了用于我的目的的 HTML 代码（再次参见“文件”键）

```
<html>
<body>
<form enctype="multipart/form-data" action="http://URI" method="POST">
<table border=0>

<tr>
<td align="right">File&nbsp;</td>
<td><input type="FILE" name="file"></td>
</tr>
<tr>
<td>&nbsp;</td>
<td><input type="submit"></td>
</tr>
</table>
</form>
</body>
</html> 
```

此外，我还从我的计算机将一个脚本粘贴到 PERL 中，该脚本也与服务器一起工作。

```
 #!perl

use strict;
use LWP; # Loads all important LWP classes

my $client_id         = 1234;
my $filename          = "new_file.xml";

### Prepare to make a request

my $browser = LWP::UserAgent->new;

my $url = "http://uri.com?&xx=$client_id";

my @post_pairs = (
    #'client_id_in' => $client_id,
    'file' => [$filename],
);

my @ns_headers = (
    'User-Agent' => 'Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US; rv:1.9.0.10) Gecko/2009042316 Firefox/3.0.10',
    'Accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8',
    'Accept-Language' => 'en-us,en;q=0.5',
    'Accept-Encoding' => 'gzip,deflate',
    'Accept-Charset' => 'ISO-8859-1,utf-8;q=0.7,*;q=0.7',
    'Authorization' => 'Basic base64EncodedCredentialsHere',
    'Content_Type' => 'form-data',
);

### Make a request
my $response = $browser->post($url, \@post_pairs, @ns_headers);
die "Can't get $url -- ", $response->status_line
        unless $response->is_success;

### Display the response
print STDOUT $response->content; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T08:49:56.730

我认为你的问题是你真的不知道请求应该是什么样子，请使用 fiddler 查看 cURL 发送的请求并尝试使用 vb.net 实现相同的请求。在我看来，您的 secons 代码（使用缓冲区，而不是 xml 序列化程序）应该可以工作......但前提是可以在服务器端理解这种结构。

# python - 正则表达式来测试字符串的可能值的有限调色板？

> ID：12514802
> 
> 赞同：1
> 
> 时间：2012-09-20T14:25:59.227
> 
> 标签：python, regex, python-2.7

我需要一个正则表达式来测试字符串是否在特定的值调色板中，例如字符串`dir`只能是`ltr`, `rtl`, `lro`, `rlo`，或者另一个例子`bool`只能是`false`, `true`。

我可以使用什么正则表达式来测试一个字符串，比如`dir`一`bool`组有限的值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T14:28:16.387

比正则表达式更好，使用列表或集合。

```
dir_choice = set(('ltr', 'rtl', 'lro', 'rlo'))

if dir in dir_choice:
    ... 
```

（如果你`dir_choice`之前定义过，检查比@IvanKoblik 的编译正则表达式快大约六倍）

```
bool_choice = set(('true', 'false'))

if bool in bool_choice:
    ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T14:28:31.180

你的意思是`'^(ltr|rtl|lro|rlo)$'`和`'^(true|false)$'`？

这甚至可以很容易地自动化：

```
def make_re(args):
    args = (re.escape(arg) for arg in args) #if you want to escape special characters
    return re.compile('^({0})$'.format('|'.join(args)) )

boolre = make_re(('true','false')) 
```

但是，如果您将线路`args = (re.escape(arg) ...)`留在那里，那么您真的不会获得超出您可以使用的任何东西`if arg in myset: ...`。未转义版本的美妙之处在于您至少仍然拥有一些正则表达式的灵活性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T14:28:54.400

要检查 dir 是否等于这些字符串之一，您可以使用以下命令：

```
re.match("^(ltr|rtl|lro|rlo)$", dir) 
```

另一个用于布尔：

```
re.match("^(false|true)$", bool) 
```

除非您遵循更好的建议并为此目的使用哈希集。

# .net - TFS 2010 链接文件未能构建

> ID：12514803
> 
> 赞同：1
> 
> 时间：2012-09-20T14:26:11.447
> 
> 标签：.net, visual-studio, tfs, tfsbuild

我有两个 Visual Studio 2010 解决方案 - 一个在类项目中包含 4 个文件，另一个通过“添加为链接”（也在类项目中）链接到这些文件。这些解决方案都可以在我的机器上构建和运行，没有任何问题。

我已将这些解决方案检查到 TFS 中并创建了一个构建定义，该定义被配置为构建它们（如果重要的话，首先具有实际文件的那个）。

但是，当我运行构建时，它会提示“找不到类型或命名空间名称'xLinkedFileClassx'（您是否缺少 using 指令或程序集引用？）”对于它们在各个位置的每个链接文件类被引用（没有显示其他错误）。

查看构建服务器上的构建文件夹，这些（C:/Builds/...）这些文件不存在。如何让 TFS 处理这些链接文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T19:14:18.827

检查构建定义工作区，您是否将这些文件拉到构建服务器？还要确保工作区与桌面上的相对路径相同

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T16:10:22.687

好吧，看来我的代码中实际上存在一些错误，并且它体现在这个晦涩的错误中！

在我的配置中，我在 Release 中而不是在 Debug 中构建某些项目（反之亦然），但我的 Build Definition 设置为 Release，我在 Visual Studio 的 Debug 中对其进行调试，因此它没有发现错误。修复这些错误似乎可以解决所有问题。

基本上，如果您遇到任何奇怪的错误，请确保您在 Visual Studio 的 Debug 和 Release 中构建您的项目，以防万一它被隐藏了。

# mysql - MySQL 中的复合主键示例

> ID：12514807
> 
> 赞同：10
> 
> 时间：2012-09-20T14:26:15.590
> 
> 标签：mysql, composite-primary-key

我最近遇到了 MySQL 本身和 MySQL 中的 Composite Primary Keys 的主题，特别是它如何有用以及它的优缺点是什么[？](http://weblogs.sqlteam.com/jeffs/archive/2007/08/23/composite_primary_keys.aspx)

我想玩这个，所以我以这种方式创建了三个表：

```
CREATE TABLE person(
    personId INT(11) NOT NULL,
    personName VARCHAR(20) NOT NULL,
    PRIMARY KEY(personId)
)

CREATE TABLE language(
    languageId INT(11) NOT NULL,
    languageName VARCHAR(20) NOT NULL,
    PRIMARY KEY(personId)
)

CREATE TABLE personLanguage(
    personId INT(11) NOT NULL,
    languageId INT(11) NOT NULL,
    description VARCHAR(20) NOT NULL,
    PRIMARY KEY(personId, languageId),
    FOREIGN KEY (personId) REFERENCES person(personId) ON UPDATE CASCADE ON DELETE CASCADE,
    FOREIGN KEY (languageId) REFERENCES language(languageId) ON UPDATE CASCADE ON DELETE CASCADE
) 
```

我可以直接将数据插入到人员和语言表中，我的问题是：

1.  对于 personLanguage 表，我是否只需要插入描述列，而其他列是自动引用的，还是我还需要在 personLanguage 表中插入其他两列的值

2.  是否有可能在插入其他两个表中的数据后立即自动更新 personLanguage 表中的 personId 和 languageId personLanguage 表中的两列

3.  如何获取三个表相关的数据，例如我需要知道 personId=1 的人说哪种语言？它也是使用连接的直接查询还是有其他方法可以做，因为我使用复合主键

很多问题困扰着我，我真的找不到一个完整的工作示例来检查使用复合主键的确切利弊。如果有人可以使用我的示例详细说明这一点，那将非常有帮助。

我知道我已经问了一些基本的，一些毫无意义的问题，但请耐心等待我并就这个话题提出一些好的看法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T14:39:35.963

> 对于 personLanguage 表，我是否只需要插入描述列，而其他列是自动引用的，还是我还需要在 personLanguage 表中插入其他两列的值

是的，您需要插入所有三列才能完全有效。否则数据库将不知道您尝试将此记录绑定到什么人或语言。

> 是否有可能在插入其他两个表中的数据后立即自动更新 personLanguage 表中的 personId 和 languageId personLanguage 表中的两列

您可以通过插入触发器来执行此操作，但这可能没有任何意义。所以，假设您刚刚输入了一种新语言——比如法语。您根本不需要在 personLanguage 表中输入任何值，因为您的现有用户可能不希望获得法语信息。同样的情况也适用于创建一个新人。你可能有很多种语言。大多数人不会说大多数语言，所以同样，您不希望将记录自动输入到 personLanguage 表中。

至于更新个人和语言的记录，KEYS 不应该改变。这就是为什么你会做这样的事情。一旦 Bob 或 Alice 被分配了一个 personId，他们就是那个 Id。一旦为法语分配了一个langaugeId，它就应该始终是那个languageId。

> 如何获取三个表相关的数据，例如我需要知道 personId=1 的人说哪种语言？它也是使用连接的直接查询还是有其他方法可以做，因为我使用复合主键

嗯，这是个棘手的问题。如果您尝试获取 personId=1 使用的所有语言，则加入非常简单。

```
select pl.personId, l.languageId, l.languageName 
  from personLanguage pl
    join language l on l.languageId = pl.languageId
    where pl.personId = 1 
```

如果您试图弄清楚您应该与该人交流哪种语言，情况会变得更加复杂，因为该人可能没有定义任何 personLanguages。如果您可以接受空值，则可以使用外连接，但您需要定义查询以便只返回一种语言。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T14:35:09.227

1.  **对于 personLanguage 表，我是否只需要插入描述列，而其他列是自动引用的，还是我还需要在 personLanguage 表中插入其他两列的值**

    `personLanguage`如果引用的表中存在现有键，则只能将值插入。`person`这意味着您必须`language`在将值插入`personLanguage`. 但是，如果您有一个`NULL`able 字段，您可以这样做，但它会违反唯一复合键。

2.  **是否有可能在插入其他两个表中的数据后立即自动更新 personLanguage 表中的 personId 和 languageId personLanguage 表中的两列**

    您指定的约束 ( `ON UPDATE CASCADE`) 意味着当任何一个中的引用值发生更改时，`person`它`language`会自动更新`personLanguage`. 但是，不能违反对 的`PRIMARY KEY`约束`personLanguage`。

3.  **如何获取三个表相关的数据，例如我需要知道 personId=1 的人说哪种语言？它也是使用连接的直接查询还是有其他方法可以做，因为我使用复合主键**

    由于这是一个基本示例，因此实际上不需要这样做。在扩展形式中，您可以使用显式`JOIN`s 在表之间获取数据。

再多想几句...

复合键通常用于元组（或集合）中的引用。这意味着当您有一个组合键 ( `col1, col2`) on 时`table1`，这将引用一个组合键 ( `col1, col2`) on `table2`。

# maven-2 - 结合 Maven、SoapUi 和 HermesJMS

> ID：12514808
> 
> 赞同：1
> 
> 时间：2012-09-20T14:26:17.313
> 
> 标签：maven-2, soapui

我需要自动化使用 HermesJMS 和 Maven2 的 SoapUI 项目。我得到的问题是 SoapUI 确实无法将 HermesJMS 集成到其类路径中。

```
2012-09-20 15:48:21,340 ERROR [SoapUI] An error occured [java.lang.NullPointerException], see error log for details
2012-09-20 15:48:21,465 ERROR [errorlog] java.lang.NullPointerException
java.lang.NullPointerException
at com.eviware.soapui.impl.wsdl.submit.transports.jms.util.HermesUtils.addHermesJarsToClasspath(HermesUtils.java:120)
at com.eviware.soapui.impl.wsdl.submit.transports.jms.util.HermesUtils.getHermes(HermesUtils.java:74)
at com.eviware.soapui.impl.wsdl.submit.transports.jms.util.HermesUtils.hermesContext(HermesUtils.java:55)
at com.eviware.soapui.impl.wsdl.submit.transports.jms.util.HermesUtils.getHermes(HermesUtils.java:200)
at com.eviware.soapui.impl.wsdl.submit.transports.jms.HermesJmsRequestTransport.getHermes(HermesJmsRequestTransport.java:211)
at com.eviware.soapui.impl.wsdl.submit.transports.jms.HermesJmsRequestTransport.init(HermesJmsRequestTransport.java:102) 
```

似乎集成并不像我想象的那么顺利。

这里的插件配置：

```
<plugin>
        <groupId>eviware</groupId>
        <artifactId>maven-soapui-plugin</artifactId>
        <version>4.5.1</version>
        <dependencies>
                <!-- Start IBM DB2 Support -->
                <dependency>
                        <groupId>com.ibm.db2</groupId>
                        <artifactId>db2jcc</artifactId>
                        <version>3.1.57</version>
                </dependency>
                <dependency>
                        <groupId>com.ibm.db2</groupId>
                        <artifactId>db2jcc_license_cu</artifactId>
                        <version>3.1.57</version>
                </dependency>
                <dependency>
                        <groupId>com.ibm.db2</groupId>
                        <artifactId>db2jcc_license_cisuz</artifactId>
                        <version>3.1.57</version>
                </dependency>
                <!-- End IBM DB2 Support -->
                <dependency>
                        <groupId>hermesjms</groupId>
                        <artifactId>hermes</artifactId>
                        <version>1.14</version>
                </dependency>
        </dependencies>
        <configuration>
                <projectFile>src/test/resources/config/BATS-soapui.xml</projectFile>
                <testSuite>BATS</testSuite>
                <outputFolder>${basedir}/target/soapui</outputFolder>
                <projectProperties>
                        <value>outputFileLocation=${outputFileLocation}</value>
                        <value>malpakke=${malpakke}</value>
                        <value>fagomrade=${fagomrade}</value>
                        <value>useDatabase=${useDatabase}</value>
                </projectProperties>
        </configuration>
        <executions>
                <execution>
                        <phase>integration-test</phase>
                        <goals>
                                <goal>test</goal>
                        </goals>
                </execution>
        </executions>
</plugin> 
```

我猜 SoapUI 没有正确找到 Hermes - 但我该如何解决呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-23T09:30:35.503

我通过以下步骤启动并运行它：

*   在 pom.xml 中添加 hermes-1.14 依赖
*   将 hermesJMS 安装复制到构建服务器的文件系统
*   将 hermes-config.xml 添加到项目中，但在每次构建之前将其复制到文件系统
*   将soapui-settings.xml 添加到项目中，并与soapui-maven-plugin 中的-tag 一起使用
*   使用您的 hermesJMS 安装路径更新 soapui-settings.xml
*   使用您的 hermes-config.xml 位置的路径更新 SoapUI 项目文件

（请记住，配置文件中的路径位置最好与操作系统无关）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T22:56:44.710

我知道它已经晚了，但无论如何它会对其他人有所帮助。

通过在配置元素下的 pom xml 中指定 SOAPUI 设置 XML 的位置，我让 Hermes 与 Maven 一起工作：

```
<settingsFile>C:/softwares/soapui/soapui-settings.xml</settingsFile> 
```

这样，我们就不需要复制hermes文件夹了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T10:02:34.923

我终于解决了这个问题。事实证明，pom.xml 中 hermes 的依赖项并没有使 hermes 可用于soapUi。我们最终将 hermes 文件夹包含在我们的 /src/test/resources 文件夹中，并指向项目 XML 中的这个文件夹。

# drupal-7 - 如何为 drupal 7 站点创建图像站点地图？

> ID：12514812
> 
> 赞同：0
> 
> 时间：2012-09-20T14:26:28.560
> 
> 标签：drupal-7, sitemap

我正在维护一个超过 500 页的 drupal 7 站点。大多数页面包含图像。我想为我的网站创建图像站点地图。

来自谷歌的示例[图片站点地图参考](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=178636)

即，我想列出每个网址下的图像。我尝试 curl 从每个 url 中检索图像。但是执行每个 url 需要更多时间。

有没有简单快捷的方法来实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T12:19:07.117

您可以使用贡献的模块 Google Image Sitemap

[谷歌图片站点地图](https://drupal.org/project/google_image_sitemap)

我会做一些测试，几天后我希望你能说更多

# validation - Razor MVC3 中的要么或验证

> ID：12514813
> 
> 赞同：2
> 
> 时间：2012-09-20T14:26:31.033
> 
> 标签：validation, asp.net-mvc-4, jquery-validate

我有一个带有几个文本框的剃刀视图。

我想这样做，以便您选择一个文本框或其他 3 个文本框，除非您在其中至少一个选项中输入文本，否则您无法提交...即您可以输入社会安全号码，或者您可以输入一个人的名字、姓氏和出生日期。对于最后一个选项，您必须输入名字、姓氏和出生日期。这可能使用不显眼的验证吗？以下是我的部分

```
<div id="searchByDemographicsDiv"style="float: left;width: 50%; display:inline; ">
            @*@using(Html.BeginForm("SearchByDemographic", "SearchPatients",FormMethod.Post, new{ id = "searchByDemographics"})){*@
            @using (Ajax.BeginForm("SearchByDemographic", "SearchPatients", null, new AjaxOptions { HttpMethod = "POST", LoadingElementId = Url.Content("~/Images/ajax-loader.gif"), OnSuccess = "binddata", OnFailure = "FailAlert" }, new { id = "searchByDemographics" })){ 
          <ul>
                      <li>@Html.Label("SSN", new { @for = "SSN" })  <br />@Html.TextBox("SSN", null, new { id = "SSN", name = "SSN", @class = "SSN" })</li>
          </ul>
          <ul>
          <p>Or</p>
          </ul>
          <ul>
            <li>@Html.Label("FirstName", new { @for = "FirstName" }) <br />@Html.TextBox("FirstName", null, new { id = "FirstName", @class = "demoGrphcs", name = "FirstName" })</li>
            <li>@Html.Label("LastName", new { @for = "LastName" }) <br />@Html.TextBox("LastName", null, new { id = "LastName", @class = "demoGrphcs", name = "LastName" })</li>
            <li>@Html.Label("dateOfBirth", new { @for = "dateOfBirth" }) <br />@Html.TextBox("dateOfBirth", null, new { id = "dateOfBirth", @class = "demoGrphcs", name = "dateOfBirth" })</li>
            <li>@Html.Label("Address1", new { @for = "Address1" }) <br />@Html.TextBox("Address1", null, new { id = "Address1" })</li>
            <li>@Html.Label("Address2", new { @for = "Address2" }) <br />@Html.TextBox("Address2", null, new { id = "Address2" })</li>
            <li>@Html.Label("City", new { @for = "City" }) <br />@Html.TextBox("City", null, new { id = "City" })</li>
            <li>@Html.Label("State", new { @for = "State" }) <br />@Html.TextBox("State", null, new { id = "State" })</li>
            <li>@Html.Label("Country", new { @for = "Country" }) <br />@Html.TextBox("Country", null, new { id = "Country" })</li>
            <li>@Html.Label("PostCode", new { @for = "PostCode" }) <br />@Html.TextBox("PostCode", null, new { id = "PostCode" })</li>
          </ul>  
        <input type="submit" value="Search By Demographics" class="button" id="submitDemo"/>     
            }
</div> 
```

我本质上希望用户能够通过 SSN 或其他人口统计信息进行搜索，其中 firstName lastName 和 DateOfBirth 是必填字段。如果按 SSN 搜索，我希望它是必填字段。我知道很复杂。

**更新**我的表单元素的原始验证**更新**

```
$("#searchByDemographics").validate({
    rules: {
        SSN: {
            require_from_group: [1, ".SSN"]
        },
        FirstName: {
            require_from_group: [1, ".demoGrphcs"]
        },
        LastName: {
            require_from_group: [1, ".demoGrphcs"]
        },
        DateOfBirth: {
            require_from_group: [1, ".demoGrphcs"]
        }
    },
    messages : {
        SSN: 'Please Enter either a valid SSN or Demographic Info below',
        FirstName: 'First name is required',
        LastName: 'Last name is required',
        DateOfBirth: 'Date of Birth is required'
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T17:19:09.860

我不确定在这种情况下为什么要进行不显眼的验证，因为验证非常具体。当您尝试完成的验证是可重用的但不适合您的情况时，不显眼的验证很有意义。

我建议您`IValidatableObject`在模型中实现服务器端验证并使用纯 jquery 进行客户端验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T14:57:37.473

我认为简单的方法是从模型中传递所有这些值并在 POST 上检查它，根据您的要求进行验证。

# redis - Redis - 如何按 redis 中的哈希字段而不是键排序？

> ID：12514814
> 
> 赞同：3
> 
> 时间：2012-09-20T14:26:32.170
> 
> 标签：redis

假设我想要 redis hash`a = {1:10, 2:15, 3:5, 4:0, 5:20}`和 set `b = (5,3,4)`。我想从 中获取一个包含元素的列表`b`，按 的值排序`a[b]`（在本例中为`[4,3,5]`）。

当我尝试这样做时，它效果不佳。

```
redis 127.0.0.1:6379> hmset a 1 10 2 15 3 5 4 0 5 20
redis 127.0.0.1:6379> sadd b 5 3 4
redis 127.0.0.1:6379> sort b by a->*
1) "3"
2) "4"
3) "5" 
```

显然，哈希字段占位符中的星号不起作用。除了通过 Redis 声明 a:1-a:5 来完成这项任务之外，还有其他方法吗？

PS 这不是[Redis 的副本：如何按键对哈希进行排序？](https://stackoverflow.com/questions/5780365/redis-how-can-i-sort-my-hash-by-keys)，因为该问题清楚地讨论了该`a:*`方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T23:41:56.920

这是一个已知问题：[链接](https://github.com/antirez/redis/issues/300)

您可以执行以下操作：

redis 127.0.0.1:6379> 悲伤 b 5 3 4

redis 127.0.0.1:6379> zadd a 10 1 15 2 5 3 0 4 20 5

redis 127.0.0.1:6379> zinterstore 结果 2 ab

redis 127.0.0.1:6379> zrange 结果 0 -1

1）“4”

2) “3”

3) “5”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T14:55:34.263

也许您可以改用排序集对其进行建模？将值用作分数，将键用作成员。排序集或多或少类似于按值排序的哈希。我很乐意给你举个例子，但我不确定你要解决的问题到底是什么。如果您能详细说明，也许我可以提供帮助。

# java - 从 500mb 文件中提取多个 XML

> ID：12514819
> 
> 赞同：2
> 
> 时间：2012-09-20T14:26:57.623
> 
> 标签：java, xml, jms

我需要从一个巨大的（大约 500mb）文件中提取 XML，但我有一个 32 位 JVM，它总是用完堆空间。

我已经编写了一个程序来从这个文件中提取 XML，但是必须读取整个文件（我不能每次迭代使用 100 行左右，因为我不能确保第 100 行是结束XML）。

那么我该怎么做呢？

我的提取程序：

```
private static ArrayList<String> extractXml(String xml) {
    String[] newXml = xml.split("\\<\\?");
    ArrayList<String> xmlList = new ArrayList<String>(Arrays.asList(newXml));
    for(int i = 0; i<xmlList.size();i++){
        if(!xmlList.get(i).contains("xml version=\"1.0\" encoding=\"UTF-8\"")){
            xmlList.remove(i);
        }
    }
    int size = xmlList.size();
    if(xml.contains("#"))
    for(int j = 0;j<size;j++){
        xmlList.set(j, "<?"+xmlList.get(j));
        xmlList.set(j,xmlList.get(j).split("\\#")[0]);

    }else
        for(int j = 0;j<size;j++){
            xmlList.set(j, "<?"+xmlList.get(j).trim());
            System.out.println(xmlList.get(j));             
        }

    return xmlList;

} 
```

XML 也有一个 Header（它是一个 JMSStream 标头。就像 XML 上的一个包装器），我已经使用上述逻辑成功地删除了它。

示例文件内容：

```
#---------- #2 : ID:QADC1_HGR1-EMS13112.15DB4FBEA3665328B:4985 ----------#
<MSG_INFO>
    <message type="TextMessage" messageSelector="" receiveTime="2012-09-12T14:37:26.717" jmsServerTimestamp="2012-09-12T14:37:26.775">
        <header JMSMessageID="ID:QADC1_HGR1-EMS13112.15DB4FBEA3665328B:4985" JMSDestination="OPS.FPES.OUTBOUND.FLIGHT.TRACK_A.DISTRIBUTION" JMSDestinationType="Topic" JMSDeliveryMode="2" JMSPriority="4" JMSTimestamp="1347478646775"/>
        <properties>
            ...
        </properties>
    </message>
</MSG_INFO>
BodyLength=31108
<?xml version="1.0" encoding="UTF-8"?>

<ns0:Envelope xmlns:ns0="http://www.wnco.com/opsplatform/flight/flightevent">
    <ns0:Header>
        <ns1:EventHeader xmlns:ns1="http://www.wnco.com/opsplatform/event/header">
            ...
        </ns1:EventHeader>
    </ns0:Header>
    <ns0:Body>
        <ns1:Flight xmlns:ns1="http://www.wnco.com/opsplatform/flight/flight">
           <ns2:ScheduledFlightLeg xmlns:ns2="http://www.wnco.com/opsplatform/flight/flight/scheduledflightleg">
                ...
                <ns3:OperationalFlightLeg xmlns:ns3="http://www.wnco.com/opsplatform/flight/flight/operationalflightleg">
                    ...
                </ns3:OperationalFlightLeg>
            </ns2:ScheduledFlightLeg>
            <ns2:ScheduledFlightLeg xmlns:ns2="http://www.wnco.com/opsplatform/flight/flight/scheduledflightleg">
                ...
                    ...
                </ns3:OperationalFlightLeg>
            </ns2:ScheduledFlightLeg>
            <ns2:ScheduledFlightLeg xmlns:ns2="http://www.wnco.com/opsplatform/flight/flight/scheduledflightleg">
               ...
                    ...
                </ns3:OperationalFlightLeg>
            </ns2:ScheduledFlightLeg>
            <ns2:ScheduledFlightLeg xmlns:ns2="http://www.wnco.com/opsplatform/flight/flight/scheduledflightleg">
                ...
                    ...
                </ns3:OperationalFlightLeg>
            </ns2:ScheduledFlightLeg>
        </ns1:Flight>
    </ns0:Body>
</ns0:Envelope>

#---------- #3 : ID:QADC1_HGR1-EMS13112.15DB4FBEA3665328B:4985 ----------#
        <MSG_INFO>
            <message type="TextMessage" messageSelector="" receiveTime="2012-09-12T14:37:26.717" jmsServerTimestamp="2012-09-12T14:37:26.775">
                <header JMSMessageID="ID:QADC1_HGR1-EMS13112.15DB4FBEA3665328B:4985" JMSDestination="OPS.FPES.OUTBOUND.FLIGHT.TRACK_A.DISTRIBUTION" JMSDestinationType="Topic" JMSDeliveryMode="2" JMSPriority="4" JMSTimestamp="1347478646775"/>
                <properties>
                    ...
                </properties>
            </message>
        </MSG_INFO>
        BodyLength=31108
        <?xml version="1.0" encoding="UTF-8"?>

        <ns0:Envelope xmlns:ns0="http://www.wnco.com/opsplatform/flight/flightevent">
            <ns0:Header>
                <ns1:EventHeader xmlns:ns1="http://www.wnco.com/opsplatform/event/header">
                    ...
                </ns1:EventHeader>
            </ns0:Header>
            <ns0:Body>
                <ns1:Flight xmlns:ns1="http://www.wnco.com/opsplatform/flight/flight">
                   <ns2:ScheduledFlightLeg xmlns:ns2="http://www.wnco.com/opsplatform/flight/flight/scheduledflightleg">
                        ...
                        <ns3:OperationalFlightLeg xmlns:ns3="http://www.wnco.com/opsplatform/flight/flight/operationalflightleg">
                            ...
                        </ns3:OperationalFlightLeg>
                    </ns2:ScheduledFlightLeg>
                    <ns2:ScheduledFlightLeg xmlns:ns2="http://www.wnco.com/opsplatform/flight/flight/scheduledflightleg">
                        ...
                            ...
                        </ns3:OperationalFlightLeg>
                    </ns2:ScheduledFlightLeg>
                    <ns2:ScheduledFlightLeg xmlns:ns2="http://www.wnco.com/opsplatform/flight/flight/scheduledflightleg">
                       ...
                            ...
                        </ns3:OperationalFlightLeg>
                    </ns2:ScheduledFlightLeg>
                    <ns2:ScheduledFlightLeg xmlns:ns2="http://www.wnco.com/opsplatform/flight/flight/scheduledflightleg">
                        ...
                            ...
                        </ns3:OperationalFlightLeg>
                    </ns2:ScheduledFlightLeg>
                </ns1:Flight>
            </ns0:Body>
        </ns0:Envelope> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T15:54:41.270

使用 JAVA Scanner 根据每个 XML 的唯一属性提取 XML。

```
 public static void main(String[] args) {
      String temp = null;
      String searchedData = null;
      File file = new File(fileLocation);
      try{
            Scanner scan = new Scanner (file);
            scan.useDelimiter("xml version");
            while (scan.hasNext()){
                  temp = scan.next();
                  if(temp.contains("<ns1:EventCorrelationID>153721264</ns1:EventCorrelationID>")){
                        searchedData = temp.substring(0, temp.lastIndexOf("</ns0:Envelope>")+15);
                        System.out.println("xml version"+searchedData);
                  }
            }
      }catch(Exception e){
            e.printStackTrace();
      }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T15:31:41.137

好吧，您当然不应该通过将 500Mb 的数据加载到 Java 字符串中然后对字符串应用正则表达式来执行此操作，这似乎就是您正在做的事情。您需要对文件进行缓冲读取并检查每个缓冲区的内容，注意检查跨越从一个缓冲区到下一个缓冲区边界的分隔符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T14:42:55.707

您真的应该只使用 SAX 解析器。SAX 解析器不会一次读取整个文档，而是按顺序读取元素，并且仅在读取时才将其加载到内存中。这与您尝试做的事情和 DOM 解析器相反。

*   这是[SAX 解析的 Java 线索](http://docs.oracle.com/javase/tutorial/jaxp/sax/parsing.html)。
*   这是[一个例子](http://www.mkyong.com/java/how-to-read-xml-file-in-java-sax-parser/)。
*   还有[一个](http://www.javacodegeeks.com/2012/01/xml-parsing-using-saxparser-with.html)。

# php - 使用 AJAX 添加单行

> ID：12514820
> 
> 赞同：0
> 
> 时间：2012-09-20T14:26:57.797
> 
> 标签：php, ajax, animation

这是我正在处理的简要 PHP 代码，

```
$feed_url = "JASON Feed URL";
$json = file_get_contents($feed_url);
$products = json_decode($json);

foreach($products as $product){
$id = $product->id;
$name = $product->name;
$link = $product->link;
}
$query = INSERT INTO TABLE(id,name,link) VALUES ($id,$name,$link);
$result = mysqli_query($query); 
```

我可以提取所有产品的列表。现在，我想将“精选产品”添加到我的数据库中。

例如，我想在每个产品下方显示“安装”按钮，当我点击“安装”时，产品详细信息将添加到我的数据库中并显示“预加载动画图像”。（我不想使用提交“表单方法”，因为它会刷新搜索。）

我知道这可以使用 AJAX 来实现，但我从来没有学过 AJAX :-( 因为我要完成这个项目，所以没有时间学习 AJAX（肯定是在完成当前工作后学习）

有人，请建议执行此操作的基本功能或步骤，我将自行查找更多信息来完成它。一点帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T14:45:56.850

我不容忍给出完整的答案，但我知道被卡住是什么感觉:)

如果你有这样的安装按钮设置，下面有一个加载图像：

```
<a class="installButton" id="product1">Install</a>
<img src="images/loading.gif" id="loading" /> 
```

如果 a 的 id 对应于产品 id，那么您可以制作一个 jQuery 函数，如下所示：

```
$('.installButton').click(function(e) {
    e.preventDefault();
    $("#loading").show();
    var productId = $(this).attr("id");
    $.ajax({
        type: "GET",
        url: "yourPhpScript.php",
        data: "productId="+productId,
        dataType: "json",
        success: function(response) {
            $("#loading").hide();
        }           
    )};
}); 
```

然后，您将修改您的 PHP 脚本以从`$_GET`超全局中获取产品 id，并且只将其插入到数据库中：

```
// Here we get the product id and store it in a variable for use.
$product_id = $_GET['productId'];

$feed_url = "JASON Feed URL";
$json = file_get_contents($feed_url);
$products = json_decode($json);

foreach($products as $product){
    // Here we make sure that we only get the data of the corresponding product id.
    if( $product->id == $product_id ) {
        $id = $product->id;
        $name = $product->name;
        $link = $product->link;
    }
}

$query = INSERT INTO TABLE(id,name,link) VALUES ($id,$name,$link);
$result = mysqli_query($query); 
```

# jquery - 获取html标签内的内容

> ID：12514830
> 
> 赞同：0
> 
> 时间：2012-09-20T14:27:37.463
> 
> 标签：jquery

我在下面有一些简单的代码：

```
<script>
$(function() {
  $("h1").click(function(){
    console.log((this));
    $("p").toggle();
  });
});
</script>
</head>

<body>
<h1>test</h1>
<p>If you click test, I will toggle.</p>

</body> 
```

如果我点击测试，我可以切换 p 标签的可见性。与此同时，我正在写信`<h1>test</h1>`给控制台。我想要的是仅将单词 test 写入控制台。我怎么做？我尝试过的没有任何效果。

谢谢，吉姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T14:32:47.017

使用[.text()](http://api.jquery.com/text/)函数，它只会给你文本。

```
$(function() {
  $("h1").click(function(){
    console.log($(this).text());
    $("p").toggle();
  });
}); 
```

[您可以在此处](http://jsfiddle.net/Allan/9CzWH/)查看工作代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T14:29:42.740

代替：

```
console.log((this)); 
```

和

```
console.log($(this).text()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T14:31:12.930

这应该有效：

```
console.log($(this).html()); 
```

# html - HTML/CSS 溢出问题

> ID：12514831
> 
> 赞同：2
> 
> 时间：2012-09-20T14:27:42.330
> 
> 标签：html, css

鉴于此布局：http: [//jsfiddle.net/7xVAu/](http://jsfiddle.net/7xVAu/)

第二个（黄色）示例是我的目标布局，因为我很高兴灰色元素完全溢出它的容器，但是设置`width:99999px;`是一种“hacky”方法。

在灰色框上进行设置`position:absolute`也将获得所需的效果，但是它将删除下一个元素的间距，并且我无法`height`为该元素设置属性。

有没有更简洁的解决方案？

编辑：澄清：我希望它的行为与`width:99999px`版本完全相同，但没有设置`width:99999px`，因为我觉得这是一种 hacky 方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T14:36:20.873

我不确定我是否完全理解你的问题。但是，如果您正在寻找一种不同的方式来做同样的事情，请查看：http: [//jsfiddle.net/7xVAu/15/](http://jsfiddle.net/7xVAu/15/)。

在[jsfiddle](http://jsfiddle.net/7xVAu/15/)中使用 %'s并使用`position:relative;`. 如您所见，它给出了相同的效果，但 % 取决于容器的大小，这是一个更大的好处。如果您调整黄色容器的宽度，灰色容器也会调整，同时仍会溢出黄色框:) 它还允许您毫无问题地调整高度！

希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T14:43:12.923

也许[像这样](http://jsfiddle.net/7xVAu/33/)的文本浮动？

```
style="background:#777; margin:0 9px 9px 9px; float:left; white-space:nowrap; height:40px;" 
```

我不确定我是否理解了这个问题。

# c# - 执行while循环检查文件是否存在

> ID：12514834
> 
> 赞同：3
> 
> 时间：2012-09-20T14:27:54.113
> 
> 标签：c#, loops

我正在为我工​​作的公司编写一个 C# 程序，它将启动一个 PHP 脚本，该脚本创建一个 PDF，然后打开 PDF 文件。现在，我有：

```
// launch the PHP page to generate my pdf report
Process.Start(phpFile);

// wait for the report to exist
Thread.Sleep(waitTime);

// open the report
Process.Start(filePath); 
```

现在，我不是整个“`Sleep()`在指定时间内希望文件完成后存在”的粉丝。所以我的问题是，使用`do`循环是否可行/更好：

```
do
{
    // Do nothing until the file exists 
} while (!File.Exists(filePath)); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-20T14:29:17.583

为什么不使用[FileSystemWatcher](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)？

设置[Path](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.path.aspx)和[Filter](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.filter.aspx)属性并订阅[Created](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.created.aspx)事件。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-20T14:30:46.510

使用的问题`File.Exists`是文件可能在第一个进程完成写入之前就已经存在。我会做这样的事情：

```
// launch the PHP page to generate my pdf report
Process generator = Process.Start(phpFile);

// wait for the report to exist
generator.WaitForExit();

// open the report
Process.Start(filePath); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-20T14:30:25.217

使用`FileSystemWatcher`并处理创建的事件。如果您希望它`FileSystemWatcher.WaitForChanged`与超时同步使用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T14:31:33.147

我认为查看文件是否以任何方式存在是一种更好的方法。如果您依赖固定的时间量，它可能会失败，或者该过程将等待超过它需要的时间。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T14:55:21.767

等待第一个过程结束怎么办？

```
Process p = Process.Start(phpFile);
p.WaitForExit();

Process.Start(filePath); 
```

# php - 带解析的 FileIFrameField

> ID：12514835
> 
> 赞同：1
> 
> 时间：2012-09-20T14:27:54.950
> 
> 标签：php, file-io, silverstripe

我正在使用 SilverStripe 2.4.7，我想添加一个方法来解析我刚刚使用 FileIFrameField 上传的文件。让我难过的是把这个放在哪里。我在考虑 onAfterWrite 方法，但文件只有在其余字段第一次保存后才会上传，所以我不确定这是否可行。

我的问题是：这种事情的最佳做法是什么？

**编辑**

我有这行代码，其中 $filename 是我上传文件的路径，但我不断收到“没有这样的文件或目录错误”。我什至尝试在文件路径中进行硬编码，但得到了同样的错误。

```
$fh = fopen($filename, 'r'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T09:23:07.937

解析新文件的最佳方法是挂钩到 uploadfield 保存方法，对于 FileIframeField 你可以通过子类化并覆盖 save()

（在 SilverStripe 3 中有一个名为 UploadField 的新类，在 UploadField 中您需要覆盖`UploadField->upload(SS_HTTPRequest $request)`，并且那里的文件可以像这样访问`$tmpfile = $request->postVar($this->getName());`：）

下面，以及如何在 FileIframeField 中执行此操作的示例：

```
class myFileIFrameField extends FileIFrameField {
    public function save($data, $form) {
        if (
            !isset($data['FileSource'])
            || ($data['FileSource'] == 'new' && (!isset($_FILES['Upload']) || !$_FILES['Upload']))
            || ($data['FileSource'] == 'existing' && (!isset($data['ExistingFile']) || !$data['ExistingFile']))
        ) {
            $form->sessionMessage(_t('FileIFrameField.NOSOURCE', 'Please select a source file to attach'), 'required');
            Director::redirectBack();
            return;
        }
        $fileContent = false;
        if($data['FileSource'] == 'new') {
            $fileContent = file_get_contents($_FILES['Upload']['tmp_name']);
        }
        elseif($data['FileSource'] == 'existing') {
            $fileObject = DataObject::get_by_id('File', $data['ExistingFile']);
            $fileContent = file_get_contents($fileObject->getFullPath());
        }
        if ($fileContent) {
            // parse the $fileContent here
        }
        // if you want to still save the file into a relation, 
        //meaning if you want to have the actually FileIframeField behaviour still in tact then call 
        return parent::save($data, $form);
        // other wise, if you do not want to save the relation and you don't want to save the file to the server
        // thenn do NOT call parent::save, just do:
        // Director::redirectBack();
    } 
} 
```

# c# - OnItemCommand 函数不适用于 Listview 中的 asp Linkbutton

> ID：12514836
> 
> 赞同：0
> 
> 时间：2012-09-20T14:27:55.690
> 
> 标签：c#, asp.net, listview, asplinkbutton

我的 asp:ListView 中的 asp:Linkbutton 功能有一些奇怪的问题。这是我的代码：

```
 <asp:ListView ID="lvData" runat="server" OnItemCommand="lvData_ItemCommand" OnItemDataBound="lvData_ItemDataBound">
    <LayoutTemplate>... </LayoutTemplate>
    <ItemTemplate>
    ...
    <td>
      <asp:LinkButton ID="ItemLink" runat="server" CommandName="View" Text='<%# Eval("NameOfBatch")%>'></asp:LinkButton>
    </td>
    ... 
```

我的代码隐藏是这样的：

```
 protected void lvData_ItemCommand(object sender, ListViewCommandEventArgs e)
{    
    string smu = "";
} 
```

如果我在字符串 smu 上放一个断点，它永远不会去那里。唯一发生的事情是我的桌子消失了，没有别的。

你有什么想法 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T16:20:34.483

如果您对表单进行了验证并且不希望它们触发验证，请将控件上的 CausesValidation 属性设置为 false。

# javascript - 想要在 javascript 问题中获得设定值

> ID：12514837
> 
> 赞同：1
> 
> 时间：2012-09-20T14:27:56.343
> 
> 标签：javascript, html

我希望我的代码显示 170, 122 。所有值都已在 Javascript 中设置，但我仍然没有得到输出。

```
<!DOCTYPE html>
<html>
   <body>
      <button onclick="UidToPost()">Get It</button>
      <script>
         var SetUid1 = "170";
         var SetUid2 = "122";
         var SetUid3 = "135";
         var SetUid4 = "144";

         var c = 0;
         var timingToSend;
         var SetUid;

         function UidToPost() {
            c = c + 1;
            var postTo = "SetUid" + c + "";
            document.getElementById("do").innerHTML = postTo;
            timingToSend = setTimeout('UidToPost()', 1000);
         };
      </script>
      <p id="do"></p>
   </body>
</html> 
```

提前致谢。

**这是我正在使用的代码**

```
 var SetUid = [ "170", "122", "135", "144" ];

 var c = 0;
 var timingToSend;

 function UidToPost() {
    var postTo = SetUid[c++];
    document.getElementById("do").innerHTML = postTo;
    if (c < SetUid.length)          
       timingToSend = setTimeout(UidToPost, 1000);
 }; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T14:35:15.763

使用数组而不是离散变量；

```
 var SetUid = [ "170", "122", "135", "144" ];

     var c = 0;
     var timingToSend;

     function UidToPost() {
        var postTo = SetUid[c++];
        document.getElementById("do").innerHTML = postTo;
        if (c < SetUid.length)          
           timingToSend = setTimeout(UidToPost, 1000);
     }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T14:31:28.453

```
document.getElementById("do").innerHTML = window[postTo]; 
```

您还应该养成避免使用 setTimeout 的字符串参数版本的习惯，因为它可能会导致安全问题：

```
timingToSend = setTimeout(UidToPost, 1000); 
```

我假设您还想调用 clearTimeout() （或避免首先设置最后一个），例如，在您的变量完成之后。

最后，使用数组可能更容易、更灵活地完成此操作，但以上是您可以使用当前方法的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T14:34:16.760

您正在尝试动态创建变量的名称以与字符串连接一起使用，这是可能的，但不能使用该语法。由于您的变量是全局变量，它们将存储在`window`对象中，因此您可以像这样访问它们：

```
window["SetUid1"]
window["setUid2"]
//etc 
```

考虑到这一点，您只需要更改此行：

```
var postTo = "SetUid" + c + ""; 
```

至：

```
var postTo = window["SetUid" + c]; 
```

您还需要处理该变量*不*存在的情况（即他们在显示最后一个变量后再次单击按钮），并采取适当的措施（可能循环回到开头）。

[这](http://jsfiddle.net/anthonygrist/nC69f/)是一个工作演示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T14:35:47.470

这不起作用的原因是您将字符串`SetUid`与当前计数连接起来`c`以创建一个字符串，并将其添加到`innerHTML`div 中。

相反，您应该将值保存在数组中，并将变量`c`用作该数组的索引：

```
 var values = [170,122,135,144]
     var c = -1;
     var timingToSend;
     var SetUid;

     function UidToPost() {
        c = (c + 1) % values.length; 
        var postTo = "SetUid" + c + "";
        document.getElementById("do").innerHTML = values[c];
        timingToSend = setTimeout('UidToPost()', 1000);
     } 
```

现场示例：http: [//jsfiddle.net/RsKZj/](http://jsfiddle.net/RsKZj/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T14:34:35.397

这可以解决问题：

```
document.getElementById("do").innerHTML = window[postTo]; 
```

您仍然需要检查变量的数量。现在在显示第 4 个变量后，该函数现在将“未定义”写入屏幕，因为您一直在循​​环。

# javascript - jQuery Chosen Plugin - 如何捕获焦点事件

> ID：12514840
> 
> 赞同：2
> 
> 时间：2012-09-20T14:28:09.817
> 
> 标签：javascript, jquery, jquery-chosen

我正在使用[这个名为“Chosen”的插件](http://harvesthq.github.com/chosen/)在您键入交易时将我普通的旧选择元素转换为查找。

问题是我现有页面有选择元素进入焦点时触发的代码，似乎不再发生火灾。

如果您有任何想要测试的想法，您[可以在这里使用一些示例代码。](http://jsfiddle.net/queZ6/107/)（它与我自己的代码非常相似，因此您也可以看到它是如何实现的。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T14:54:16.773

看看这个：http: [//jsfiddle.net/Fqpc3/](http://jsfiddle.net/Fqpc3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T14:39:36.667

该插件似乎没有回调，这就是我这样做的方式，而不是 .focus() 你传递你需要在模拟该事件的插件回调上做的事情，标记没有事件“焦点”插件生成的。

# python - 鼻子多进程问题

> ID：12514845
> 
> 赞同：2
> 
> 时间：2012-09-20T14:28:24.703
> 
> 标签：python, nose, multiprocess

我在进行鼻子测试时遇到问题。当我从 Eclipse 运行我的套件时，使用Eclipse 首选项中`Run As>Python unit-test`的测试运行程序设置为`Nose test runner`和参数，我得到了一个很好的、有序的运行，其中 4 个新的 python 进程启动，我得到了我的 19 个测试的结果（一个类源自2 个测试生成器方法，第一个分派 6 个测试，第二个分派 13 个）在几分钟内（每个测试都进行一系列 REST 调用，然后进行一些验证）。但是，当我从命令行运行相同的文件时`--verbosity=2 --processes=2 --process-timeout=300``PyDev>PyUnit``object``nosetests --processes=2 --verbosity=2 --process-timeout=300 testfile.py`，它产生了 100 个新的 Python 进程，这些进程似乎是按组组织的，其中一个进程的内存使用量略高于 6k，而其他进程的内存使用量为 50-500k。这些进程无限期地产生，并且测试永远不会完成，直到我开始手动终止这些进程。如果我在没有多处理的情况下从命令行运行测试，它们也可以很好地完成。

Eclipse 是否对测试过程进行了一些额外的控制？我是否可能在 Eclipse 和命令行中运行不同版本的鼻子（即使我在站点包中只看到 1 个鼻子安装）？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2017-02-16T14:31:42.720

尝试玩：

```
_multiprocess_can_split_
and 
_multiprocess_shared_ 
```

在您的测试课程中。

文档： http: [//nose.readthedocs.io/en/latest/doc_tests/test_multiprocess/multiprocess.html](http://nose.readthedocs.io/en/latest/doc_tests/test_multiprocess/multiprocess.html)

# apache - apache别名错误子文件夹访问

> ID：12514846
> 
> 赞同：1
> 
> 时间：2012-09-20T14:28:25.810
> 
> 标签：apache

我有 WAMP 服务器 2.2

我在我的测试文件夹中创建了一个测试 php 项目（2 个 php 文件），测试文件夹位于：c:\projects\test\

我为apache添加了一个别名，conf文件是这样的：

```
Alias /test "c:\projects\test\" 

<Directory "c:\projects\test/">
    Options Indexes FollowSymLinks MultiViews
    AllowOverride all
        Order Allow,Deny 
        Allow from all 
</Directory> 
```

我在测试中添加了一个新文件夹，完整路径为：**c:\projects\test\img**

我的问题是我无法从 http 访问此文件夹下的任何文件。我必须在 conf 文件中添加一些额外的行吗？怎么了？我希望能够访问我的根文件夹 (c:\projects\test) 的任何子文件夹中的任何文件。

谢谢你。

# ajax - jQuery 滑块在 https URL 中不起作用

> ID：12514853
> 
> 赞同：0
> 
> 时间：2012-09-20T14:28:35.460
> 
> 标签：ajax, jquery

我有一个 jquery 照片滑块，它在常规 http:// URL 中运行良好，如下所示：

[http://tinyurl.com/cswdpbc](http://tinyurl.com/cswdpbc)

当我尝试使用 https:// 访问页面时，我的问题就开始了，滑块不再出现。我曾尝试使用 Chrome 工具，但看不到任何异常...有人可以看看，让我知道您认为它可能是什么吗？

HTTPS 网址：[http ://tinyurl.com/c29585s](http://tinyurl.com/c29585s)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T14:31:48.917

您正在调用这个：https：/wp-includes/js/comment-reply.js?ver=20090102 它给出了 SSL 证书错误，请尝试在不定义协议的情况下调用脚本，如下所示：

```
<script type='text/javascript' src='//wp-includes/js/jquery/jquery.js?ver=1.7.1'></script> 
```

此外，您可以使用 google 的 cdn 为您托管该文件；）

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script> 
```

# ruby-on-rails - ruby中下划线的pick方法

> ID：12514854
> 
> 赞同：3
> 
> 时间：2012-09-20T14:28:35.873
> 
> 标签：ruby-on-rails, ruby, underscore.js

我想使用类似的东西

```
hash.pick('prop1', 'prop2') 
```

与使用下划线选择方法相同（获取对象/哈希的属性并基于它们创建新的哈希）

所以它看起来像这样

```
{ prop1: 'asdf', prop2: 'qwer', prop3: 'uiop' }.pick( 'prop2', 'prop3' )
# equals { prop2: 'qwer', prop3: 'uiop' } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T14:37:59.233

对于 Ruby 2.5 及更高版本，使用内置的 hash.slice 方法。

```
{ prop1: 'asdf', prop2: 'qwer', prop3: 'uiop' }.slice(:prop2, :prop3) 
```

这种方法最初是在 Rails (ActiveSupport) 中引入的，因此它可以在 Rails 环境中的早期 Ruby 版本中使用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-20T14:34:20.507

使用[哈希切片](http://api.rubyonrails.org/classes/Hash.html#method-i-slice)方法，如下所示：

```
hash.slice(:prop1, :prop2) 
```

# c# - 静态构造函数行为 (C#)

> ID：12514862
> 
> 赞同：0
> 
> 时间：2012-09-20T14:29:10.993
> 
> 标签：c#

静态构造函数在这里的行为如何？

```
class a
{    
    public static int x;
    static a()
    {
        x = b.y + 1;    
    }
}

class b    
{    
    public static int y = a.x + 1;

    static b()
    { 

    }

    static void Main(String[] args)
    {
       Console.WriteLine("x={0} , y={1} ", a.x, b.y);
        Console.ReadLine();    
    }
} 
```

输出 ：：

x=1 , y=2

如何 ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T14:34:37.213

除了 case 之外，这是[此处](http://msdn.microsoft.com/en-us/library/aa645612%28v=vs.71%29.aspx)给出的确切示例，它给出了以下解释：

> 为了执行 Main 方法，系统首先运行 BY 的初始化程序，然后再运行 B 类的静态构造函数。Y 的初始化程序导致 A 的静态构造函数运行，因为引用了 AX 的值。A 的静态构造函数依次继续计算 X 的值，并在此过程中获取 Y 的默认值，即零。AX因此被初始化为1。A的静态字段初始化器和静态构造器的运行过程结束，返回到Y的初始值的计算，其结果变为2。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-20T14:34:06.873

一切从这条线开始

`public static int y = a.x + 1`;

*   它去`a.x`
*   之后`a`键入，如此`public static int x;`初始化，并且是静态的

    ```
    static a()
    {
        x = b.y + 1;    
    } 
    ```

ctor 调用。

*   在这个 ctor`b.y`中已经*静态*初始化，所以我们得到`b.y` **当前**`0`值，即

所以`x = 0 + 1`。

*   我们回来后`public static int y = a.x + 1;`

在哪里`a.x`，`1`所以它变成`int y = 1 + 1;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T14:31:10.203

1.  `b.y`被初始化，导致`a`被初始化，所以
2.  `a()`被调用，设置`a.x`为`b.y + 1`（`b.y`仍然初始化为其默认值，0）
3.  `b.y`然后设置为`a.x + 1`(`a.x`已初始化为 1)

我会在现实世界的代码中避免这种情况......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T14:34:15.193

请记住，`b.y`从默认值 0 开始。因此，在设置 的值时`y`，`a.x`将变为 1。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T14:37:46.053

来自 C# 规范

> 为了执行 Main 方法，系统首先运行 BY 的初始化程序，然后再运行 B 类的静态构造函数。Y 的初始化程序导致 A 的静态构造函数运行，因为引用了 AX 的值。A 的静态构造函数依次继续计算 X 的值，并在此过程中获取 Y 的默认值，即零。AX因此被初始化为1。A的静态字段初始化器和静态构造器的运行过程结束，返回到Y的初始值的计算，其结果变为2。

线

```
x = b.y + 1; 
```

被执行为

```
x = 0 +1; 
```

因为此时还无法评估 by 的值，因此 by 的值是默认值 (0)

然后程序继续评估该语句

```
y = a.x + 1; 
```

并且由于 ax 在上面的语句中被赋值为 1 上面是

```
y = 1 + 1; 
```

`x == 1`最终的结果是`y == 2`

# spring-data-mongodb - 高级弹簧数据查询/标准

> ID：12514863
> 
> 赞同：0
> 
> 时间：2012-09-20T14:29:15.360
> 
> 标签：spring-data-mongodb

我一直在使用 MongoDB 和 Spring Data - MongoDB 构建基于 Spring 的 REST 服务。

见下文; 我的数据模型的一部分：

```
@Document
public class User{
    .....
    private List<EMail> emails;
    .....
}

public class EMail {
    .....
    private bool defaultMail;
    private String eMailAdress;
    .....
} 
```

电子邮件未注释为 MongoDb 文档。

我想在存储库中实现以下功能。

```
public Boolean exists(String email);
public User getUserByEmail(String email); 
```

我可以使用 Query 和 Criteria API 实现简单的查询，但没有成功实现上述功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T18:22:18.967

我在自己的问题上找到了答案，我想分享一下。

查询应如下所示：

```
query (where("emails").elemMatch(where("eMailAdress").is(email))) 
```

我通过阅读 MongoDb 手册找到了答案，这比 spring-data 手册更容易理解。

//lg

# java - 无法编译 WordCount.java

> ID：12514867
> 
> 赞同：2
> 
> 时间：2012-09-20T14:29:35.930
> 
> 标签：java, javac, cloudera, word-count

```
mark@maestro1:/usr/lib/hadoop/wordcount_classes$ javac -classpath /usr/lib/hadoop/hadoop-common-2.0.0-cdh4.0.1.jar:/usr/lib/hadoop/client/hadoop-mapreduce-client-core-2.0.0-cdh4.0.1.jar -d /usr/lib/hadoop/wordcount_classes /usr/lib/hadoop/wordcount_classes/WordCount.java
/usr/lib/hadoop/hadoop-common-2.0.0-cdh4.0.1.jar(org/apache/hadoop/fs/Path.class):     
warning: Cannot find annotation method 'value()' in type 'LimitedPrivate': class file for org.apache.hadoop.classification.InterfaceAudience not found
/usr/lib/hadoop/wordcount_classes/WordCount.java:14: error: error while writing Map: could not create parent directories
public static class Map extends MapReduceBase implements Mapper<LongWritable, Text, Text, IntWritable> {
            ^
1 error
1 warning 
```

这个错误是怎么回事？我无法编译这个 wordcount.java 文件！

人们一直在告诉我正确设置我的 java 类路径。有人会对我如何处理这件事有任何评论吗？请帮忙！谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T14:32:51.120

这

```
-d /usr/lib/hadoop/wordcount_classes 
```

指示您希望编写类文件的位置。它是否正确 ？我怀疑您无权在那里写信，因此：

```
error while writing Map: could not create parent directories 
```

您可以在该目录中创建一个目录（提示：使用`mkdir`）吗？顺便说一句，我不认为`/usr/lib`目录是这样做的好地方，即使你可以。我希望您在您的主目录中执行开发。

/usr 目录通常用于安装程序、库等，并且对普通用户有写限制。`man hier`很好地解释了 Unix 中使用的不同目录。

# php - php函数参数的未定义变量警告

> ID：12514874
> 
> 赞同：2
> 
> 时间：2012-09-20T14:29:46.940
> 
> 标签：php, function

我收到关于作为函数参数传递的变量的“未定义变量”警告

这是代码：

```
function myFunction ($var) {
... code...
for (k=0; k<$var; k++){
}
...code...
Return $something;
} 
```

之后：

```
echo myFunction(5); 
```

奇怪的是，代码有效，产生了预期的输出，但也产生了这个警告。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T14:30:52.113

此行是错误`for (k=0; k<$var; k++){`的，您缺少`$`变量前面的

它应该是这样的

```
 for ($k=0; $k < $var; $k++){ 
```

您还需要定义`$var`更多信息，请参阅[http://php.net/manual/en/language.variables.variable.php](http://php.net/manual/en/language.variables.variable.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T14:33:27.553

这不是 javascript，总是在每个变量前放一个 $ :)

```
for ($k = 0; $k < $var; $k++) 
```

并实例化您要返回的 $something。

# r - 用 R 绘制一个非常不对称的“像素矩阵”

> ID：12514879
> 
> 赞同：0
> 
> 时间：2012-09-20T14:30:11.717
> 
> 标签：r

我发现所有使用 plot.im 或类似的示例，都使用平方或几乎平方的矩阵。我正在尝试绘制具有异常大小的像素矩阵，例如 18x3000。我的问题是，由于 x/y 比率太小，我只在我的图中看到一条线。有没有办法“缩放”图像的 Y 侧？

这是一个例子[http://ubuntuone.com/0WchsKI5hd8YEqtTe7xAno](http://ubuntuone.com/0WchsKI5hd8YEqtTe7xAno)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T15:26:21.247

我对 的`im`对象不太熟悉`spatstat`，但从参考手册中猜测其中任何一个都应该起作用（`x`你的`im`对象在哪里）。

```
# Specify colors
jet.colors <- colorRampPalette(c("#00007F", "blue", "#007FFF", "cyan",
                      "#7FFF7F", "yellow", "#FF7F00", "red", "#7F0000"))(40)
# Using base R
# Note that you might need to transpose `x` to get the orientation right
image(t(as.matrix(x)), col=jet.colors)

# Using lattice
library(lattice)
levelplot(as.matrix(x), aspect="fill", cuts=39, col.regions=jet.colors) 
```

# javascript - 来自 AJAX 回调的 AngularJS 更新值

> ID：12514882
> 
> 赞同：17
> 
> 时间：2012-09-20T14:30:22.153
> 
> 标签：javascript, angularjs

当我直接更新范围值时，它在视图中更新得很好，但是当这个值从 AJAX 回调更新时它不会更新。这是简化的示例 - [http://jsfiddle.net/hS8Bs/1/](http://jsfiddle.net/hS8Bs/1/)

我怎样才能绕过它？

**更新：**我注意到第二次点击链接确实会更新值，但这不是我想要的。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-09-20T14:53:20.233

真正的问题是缺乏`$scope.$apply`. 当您在角度摘要之外更新角度模型时，您应该使用 apply。

```
$.getJSON('/echo/json/', {}, function(data){
    $scope.$apply(function(){
        $scope.period = '2010 - 2011';
    });
}); 
```

这将触发 diggest 以查看更新，如果您在 apply 中的代码抛出异常，它将被重定向到`$exceptionHandler`服务。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-21T02:10:26.597

这是所选答案的插件，当我实现 $apply() 函数时，我发现 Angular JS 仍然调用“错误：$digest 已经在进行中”。

所以我在这篇文章中找到了[Will Vincent 的](https://stackoverflow.com/users/1972101/will-vincent)代码： [AngularJS : What's the Angular way to interact with a form？](https://stackoverflow.com/questions/14448386/angularjs-whats-the-angular-way-to-interact-with-a-form) ，它检查 $digest 是否已经在进行中，并且仅在安全时调用 $apply() 以：

```
$scope.safeApply = function(fn) {
    var phase = this.$root.$$phase;
    if(phase == '$apply' || phase == '$digest') {
        if(fn && (typeof(fn) === 'function')) {
          fn();
        }
    } else {
       this.$apply(fn);
    }
}; 
```

所以它会是这样的：

`$scope.safeApply(function() { ...code here... });`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-20T14:38:25.870

这是您[缺少的教程](http://docs.angularjs.org/tutorial/step_05)，您需要使用控制器的 $http 参数来更新字段。检查您更新的示例[http://jsfiddle.net/hS8Bs/2/](http://jsfiddle.net/hS8Bs/2/)

# python - 使用 ndim 对 ndarray 进行 Python-numpy 测试

> ID：12514890
> 
> 赞同：4
> 
> 时间：2012-09-20T14:30:48.190
> 
> 标签：python, arrays, numpy

我正在使用 Python 开发一个需要大量数值数组计算的项目。不幸的是（或者幸运的是，取决于你的 POV），我对 Python 很陌生，但多年来一直在做 MATLAB 和 Octave 编程（之前的 APL）。我非常习惯于将每个变量自动输入到矩阵浮点数，并且仍然习惯于检查输入类型。

在我的许多函数中，我要求输入 S 为`numpy.ndarray`size `(n,p)`，因此我必须测试 type(S) 是`numpy.ndarray`并获取 values `(n,p) = numpy.shape(S)`。一个潜在的问题是输入可能是一个列表/元组/int/etc...，另一个问题是输入可能是一个形状数组`()`：`S.ndim = 0`。我突然想到我可以同时测试变量类型，解决`S.ndim = 0`问题，然后得到这样的尺寸：

```
# first simultaneously test for ndarray and get proper dimensions
try:
    if (S.ndim == 0):
        S = S.copy(); S.shape = (1,1);
    # define dimensions p, and p2
    (p,p2) = numpy.shape(S);
except AttributeError:  # got here because input is not something array-like
    raise AttributeError("blah blah blah"); 
```

虽然它有效，但我想知道这是否有效？ndim 的文档字符串说

> 如果它还不是 ndarray，则尝试转换。

我们当然知道 numpy 可以轻松地将 int/tuple/list 转换为数组，所以我很困惑为什么会为这些类型的输入引发 AttributeError，而 numpy 应该这样做

```
numpy.array(S).ndim; 
```

这应该工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T14:34:25.033

在对 NumPy 代码进行输入验证时，我总是使用`np.asarray`：

```
>>> np.asarray(np.array([1,2,3]))
array([1, 2, 3])
>>> np.asarray([1,2,3])
array([1, 2, 3])
>>> np.asarray((1,2,3))
array([1, 2, 3])
>>> np.asarray(1)
array(1)
>>> np.asarray(1).shape
() 
```

这个函数有一个很好的特性，它只在必要时复制数据；如果输入已经是 a `ndarray`，则数据保留在原地（只有类型可以更改，因为它也摆脱了那个讨厌的`np.matrix`）。

> ndim 的文档字符串说

那是函数的文档字符串，而不是非 NumPy 对象`np.ndim`没有的属性。`ndim`您可以使用该函数，但结果是数据可能会被复制两次，因此请改为：

```
S = np.asarray(S)
(p, p2) = S.shape 
```

这将引发一个`ValueError`if `S.ndim != 2`。

`;`[最后注意：如果你只遵循缩进规则，你不需要在 Python 中。事实上，Python 程序员避开了分号。]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T15:13:23.677

鉴于对@larsmans 回答的评论，您可以尝试：

```
if not isinstance(S, np.ndarray):
    raise TypeError("Input not a ndarray")
if S.ndim == 0:
    S = np.reshape(S, (1,1))
(p, p2) = S.shape 
```

首先，您明确检查是否`S`是 (subclass of) `ndarray`。然后，`np.reshape`如果需要，您可以使用 复制您的数据（当然还有重塑它）。最后，你得到了维度。

请注意，在大多数情况下，`np`函数会首先尝试访问 a 的相应方法`ndarray`，然后尝试将输入转换为 a `ndarray`（有时将其保留为子类，如 中`np.asanyarray`，有时不是（如中`np.asarray(...)`）。换句话说，它总是使用方法而不是函数更有效：这就是我们使用`S.shape`而不是`np.shape(S)`.

另一点：`np.asarray`, `np.asanyarray`, `np.atleast_1D`... 都是更通用函数的特例`np.array`。例如，设置to`asarray`的可选`copy`参数，做同样的事情和 sets ，sets ，sets ... 换句话说，与适当的参数一起使用总是更容易。但正如一些评论中提到的，这是风格问题。快捷方式通常可以提高可读性，这始终是一个需要牢记的目标。`array``False``asanyarray``subok=True``atleast_1D``ndmin=1``atleast_2d``ndmin=2``np.array`

无论如何，当您`np.array(..., copy=True)`使用`list([....])`. 即使没有其他任何更改，您的数据也会被复制。这具有其缺点的优点（正如我们用法语所说），例如，您可以将`order`row-first更改`C`为 column-first `F`。但无论如何，你得到你想要的副本。

使用`np.array(input, copy=False)`时，总是会创建一个新数组。它要么指向同一个内存块，就`input`好像后者已经是 a （也就是说，不浪费内存），或者如果不是`ndarray`，将“从头开始”创建一个新的内存块。`input`有趣的情况当然是 if`input`是一个`ndarray`.

在函数中使用这个新数组可能会也可能不会更改原始输入，具体取决于函数。您必须检查要使用的函数的文档，以查看它是否返回副本。NumPy 开发人员努力限制不必要的副本（按照 Python 示例），但有时无法避免。文档应明确说明会发生什么，如果没有或不清楚，请提及。

`np.array(...)`如果出现问题，可能会引发一些异常。例如，尝试将 a`dtype=float`与类似的输入一起使用`["STRING", 1]`会引发 a `ValueError`。*但是，我必须承认我不记得在所有情况下都有哪些例外，请相应地编辑这篇文章*。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T15:24:41.823

欢迎来到堆栈溢出。这几乎可以归结为一种样式选择，但我见过的处理这种情况的最常见方法是将输入转换为数组。Numpy 为此提供了一些有用的工具。`numpy.asarray`已经提到过，但这里还有一些。`numpy.at_least1d`与 类似`asarray`，但将 () 数组重新整形为 (1,)`numpy.at_least2d`与上面相同，但将 0d 和 1d 数组重新整形为 2d，即 (3,) 到 (1, 3)。我们将“array_like”输入转换为数组的原因部分是因为我们很懒，例如有时它`foo([1, 2, 3])`比更容易编写`foo(numpy.array([1, 2, 3]))`，但这也是 numpy 本身的设计选择。请注意，以下工作：

```
>>> numpy.mean([1., 2., 3.])
>>> 2.0 
```

在文档中，`numpy.mean`我们可以看到 x 应该是“array_like”。

> ```
> Parameters
> ----------
> a : array_like
>     Array containing numbers whose mean is desired. If `a` is not an
>     array, a conversion is attempted. 
> ```

That being said, there are situations when you want to only accept arrays as arguments and not all "array_like" types.

# c# - 来自excel的10个随机行

> ID：12514892
> 
> 赞同：0
> 
> 时间：2012-09-20T14:30:56.667
> 
> 标签：c#, excel, random

帮我写代码，因为我现在不知道如何完成这个简单的任务。如何从excel文件中选择10个随机行？

```
 string filepath = @"C:\1.xlsx";
        OleDbConnection conn = new OleDbConnection();
        conn.ConnectionString = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + filepath + @";Extended Properties=""Excel 12.0 Xml;HDR=YES;IMEX=1;TypeGuessRows=0;ImportMixedTypes=Text""";
        OleDbCommand command = new OleDbCommand("SELECT * FROM [Sheet1$]", conn);
        DataSet ds = new DataSet();
        OleDbDataAdapter adapter = new OleDbDataAdapter(command);
        adapter.Fill(ds);
        showdata.DataSource = ds.Tables[0]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:01:38.430

如果您在 Windows 窗体上创建名为 的 DataGridView，请`RandomExcelRows`创建一个名为的按钮`button1`并将以下代码放入**Click**事件处理程序中`button1`：

```
private void button1_Click(object sender, EventArgs e)
{
    Excel.Range[] rows = RandomRows(10, @"C:\test\whatever.xlsx");

    DataTable dt = new DataTable();

    bool ColumnsCreated = false;

    foreach(Excel.Range row in rows)
    {
        object[,] values = row.Value;

        int columnCount = values.Length;

        if(!ColumnsCreated)
        {
            for(int i = 0; i < columnCount; i++)
            {
                DataColumn dc = new DataColumn(String.Format("Column {0}", i));
                dt.Columns.Add(dc);
                ColumnsCreated = true;
            }
        }

        DataRow dr = dt.NewRow();

        for (int i = 0; i < columnCount; i++)
        {
            dr[String.Format("Column {0}", i)] = values[1,i+1];
        }

        dt.Rows.Add(dr);
    }

    RandomExcelRows.DataSource = dt;
} 
```

然后在下面创建一个名为**RandomRows**的方法，其中包含以下内容：

```
private Excel.Range[] RandomRows(int randomRowsToGet, string worksheetLocation, int worksheetNumber = 1, int lowestRow = 0, int highestRow = 99)
{
    Excel.Range[] rows = new Excel.Range[randomRowsToGet];

    Excel.Application excel = new Excel.Application();
    Excel.Workbook workbook = excel.Workbooks.Open(worksheetLocation);
    Excel.Worksheet worksheet = workbook.Worksheets[worksheetNumber];

    List<int> rowNumbers = new List<int>();

    bool allUniqueNumbers = false;

    Random random = new Random();

    while (!allUniqueNumbers)
    {
        int nextNumber = random.Next(lowestRow, highestRow);

        if (!rowNumbers.Contains(nextNumber))
            rowNumbers.Add(nextNumber);

        if (rowNumbers.Count == randomRowsToGet)
            allUniqueNumbers = true;
    }

    for (int i = 0; i < randomRowsToGet; i++)
    {
        rows[i] = worksheet.UsedRange.Rows[rowNumbers[i]];
    }

    Marshal.ReleaseComObject(excel);

    return rows;
} 
```

该程序将从您指定的电子表格中获取随机数量的行（此数量由您指定）并将这些行放入您的 DataGridView。

它非常粗糙，需要重构，但它是您需要的基础。您还可以从文本框中获取包含文件位置的字符串，而不是对其进行硬编码，您想要的行数以及其他参数（例如最小行数和最大行数）也是如此。

同样，您可以使用[OpenFileDialog](http://www.dotnetperls.com/openfiledialog)来允许您的用户浏览到您的 excel 文件等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-22T23:07:46.113

这是我的解决方案：

```
 string filepath = @"C:\1.xlsx";
        OleDbConnection conn = new OleDbConnection();
        conn.ConnectionString = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + filepath + @";Extended Properties=""Excel 12.0 Xml;HDR=YES;IMEX=1;TypeGuessRows=0;ImportMixedTypes=Text""";
        OleDbCommand command = new OleDbCommand("SELECT * FROM [Sheet1$]", conn);
        DataSet ds = new DataSet();
        OleDbDataAdapter adapter = new OleDbDataAdapter(command);
        adapter.Fill(ds);
        // above code block is yours as is.
        // below part is for sorting.

        DataTable data = ds.Tables[0];
        data.Columns.Add(new DataColumn("Guid"));
        for (int i = 0; i < data.Rows.Count; i++)
        {
            data.Rows[i].SetField("Guid", Guid.NewGuid());
        }
        DataView dv = data.DefaultView;
        dv.Sort = "Guid desc";            
        showdata.DataSource = dv.ToTable(); 
```

# r - setTimeLimit 在函数完成后仍然存在

> ID：12514899
> 
> 赞同：4
> 
> 时间：2012-09-20T14:31:24.957
> 
> 标签：r

使用简单的测试功能

```
timefoo<-function(x,trans=TRUE){
setTimeLimit(elapse=4, transient=trans)
warning('starting...')
Sys.sleep(x)
warning('woke up')
return(x)
} 
```

当我调用时，函数会正确终止，例如`timefoo(5)`，但是：

```
 timefoo(3)
[1] 3
Warning messages:
1: In timefoo(3) : starting...
2: In timefoo(3) : woke up
Error: reached elapsed time limit 
```

有人可以解释到底发生了什么吗？就好像在完成并退出`setTimeLimit`后继续运行。`timefoo`设置`transient=FALSE`更糟，因为它会为我的控制台命令设置超时，并在每个命令后（加上 4 秒）给我错误消息。

编辑：为了回答 Gavin 的问题，这里有两个电话的序列

```
Rgames> timefoo(5)
Error in Sys.sleep(x) : reached elapsed time limit
In addition: Warning message:
In timefoo(5) : starting...
Rgames> timefoo(3)
[1] 3
Warning messages:
1: In timefoo(3) : starting...
2: In timefoo(3) : woke up
Error: reached elapsed time limit 
```

我在命令之间手动等待了 10 秒，所以毫无疑问最终的错误消息是由于`timefoo(3)`调用造成的。是否有任何我可能弄乱的 R_ENVIRON 变量导致了这种行为？到目前为止，我只在 Windows7、R64 上对此进行了测试。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T15:41:40.440

我收到相同的错误消息（在 Win 7 下运行 R-2.16 devel）。

帮助页面`?setTimeLimit`指出：

> 'setTimeLimit' 设置适用于每个顶级计算的限制，即在控制台或文件中输入的命令行（包括任何续行）。

所以它并不是真正设计为从函数内部运行的。如果您想这样做，请尝试以下替代方法：

```
timed_computation <- function(expr, time_limit = 1)
{
  setTimeLimit(elapsed = time_limit, transient = TRUE)
  ans <- expr
  setTimeLimit(elapsed = Inf, transient = TRUE)
  ans
}

timed_computation(1 + 1)            #should return 2
timed_computation(Sys.sleep(2))     #should throw an error 
```

# javascript - 为什么我的 iframe 没有调整大小以适应其内容？

> ID：12514903
> 
> 赞同：1
> 
> 时间：2012-09-20T14:31:32.937
> 
> 标签：javascript, html, css, iframe, resize

[我正在按照此处](https://stackoverflow.com/questions/153152/resizing-an-iframe-based-on-content)的说明尝试跨站点 iframe 调整大小，但 iframe 仍然未调整大小。我不确定我做错了什么。

iframe 当前位于[http:](http://ayeoui.com/testerpage.php) //ayeoui.c​​om/testerpage.php 。这会调用博客文章，该文章会在主 ayeoui.c​​om 域上加载“helper.html”页面，理论上应该将信息传递回第一页并触发调整大小。主站点上的代码是这样说的：

```
<script>
  // Resize iframe to full height
  function resizeIframe(height)
  {
    // "+60" is a general rule of thumb to allow for differences in
    // IE & and FF height reporting, can be adjusted as required..
    document.getElementById('iframeid').height = parseInt(height)+60;
  }
</script>
<iframe id='iframeid' src='http://rinich.com/blog/11/index.html'></iframe> 
```

链接页面上又写有以下代码：

```
<body onload="iframeResizePipe()">
<iframe id="helpframe" src='' height='0' width='0' frameborder='0'></iframe>

<script type="text/javascript">
  function iframeResizePipe()
  {
 // What's the page height?
     var height = document.body.scrollHeight;

     // Going to 'pipe' the data to the parent through the helpframe..
     var pipe = document.getElementById('helpframe');

     // Cachebuster a precaution here to stop browser caching interfering
     pipe.src = 'http://www.ayeoui.com/helper.html?height='+height+'&cacheb='+Math.random();

  }
</script> 
```

最后，这将我们带到帮助页面：

```
<html> 
<!-- 
This page is on the same domain as the parent, so can
communicate with it to order the iframe window resizing
to fit the content 
-->  
  <body onload="parentIframeResize()"> 
    <script> 
      // Tell the parent iframe what height the iframe needs to be
      function parentIframeResize()
      {
         var height = getParam('height');
         // This works as our parent's parent is on our domain..
         parent.parent.resizeIframe(height);
      }

      // Helper function, parse param from request string
      function getParam( name )
      {
        name = name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");
        var regexS = "[\\?&]"+name+"=([^&#]*)";
        var regex = new RegExp( regexS );
        var results = regex.exec( window.location.href );
        if( results == null )
          return "";
        else
          return results[1];
      }
     </script> 
  </body> 
</html> 
```

然而测试页面并没有改变！显然我做错了什么，但我不确定是什么。发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T18:09:13.550

`Uncaught SecurityError: Blocked a frame with origin "http://www.ayeoui.com" from accessing a frame with origin "http://ayeoui.com". Protocols, domains, and ports must match.`

您的子域不匹配。`http://www.ayeoui.com`与 完全不同`http://ayeoui.com`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-07T13:37:18.037

检查您的控制台是否有未捕获的错误类型。您正在从一页重定向到另一页，但 resizeIframe 函数在第二页上不起作用。您应该创建另一个 .js 文件并在链接该文件后调用该函数。那应该行得通。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-08-08T13:32:40.260

I'm not sure, but this **might** be the reason: you're getting a [same origin policy error](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Same_origin_policy_for_JavaScript).

The console in Chrome's dev tools logs this error: `Uncaught SecurityError: Blocked a frame with origin "http://www.ayeoui.com" from accessing a frame with origin "http://ayeoui.com". Protocols, domains, and ports must match.`

This is because `www.ayeoui.com` accesses `rinich.com`. This isn't allowed ([why?](https://security.stackexchange.com/questions/8264/why-is-the-same-origin-policy-so-important)).

You could try ensuring everything accesses from/to the same domain: `ayeoui.com`.

* * *

Also, on a separate note, you might want to consider adding the `seamless` attribute to your `iframe`, it just makes everything look so much neater (in my opinion):

```
<iframe id="iframeid" src="http://rinich.com/blog/11/index.html" seamless></iframe> 
```

# javascript - models.User.fromURI 失败

> ID：12514905
> 
> 赞同：0
> 
> 时间：2012-09-20T14:31:41.150
> 
> 标签：javascript, html, spotify

像这样调用 models.User.fromURI 时

```
models.User.fromURI("spotify:user:" + user, function (user) {
            $(div).html("<b ><a style=\"color:#FFFFFF\" href=\"spotify:user:" + user.username + "\">" + user + "</a></b><br />" + text + "");
        }); 
```

我收到这个错误

```
Uncaught TypeError: Object #<Object> has no method 'getUserByUsername' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T15:09:00.113

用户不是开发人员的公共类。它只在内部使用。请仅使用开发人员网站上记录的 API 调用。

# zebra-printers - 如何将 CPF 文件转换为 QL420/QL220

> ID：12514908
> 
> 赞同：4
> 
> 时间：2012-09-20T14:31:48.043
> 
> 标签：zebra-printers

我必须配置超过 30 台 QL420plus 打印机，而我正在为我认为很容易的事情而苦苦挣扎。

我们将把打印机与我们在 Windows Mobile 6 上编写的内部应用程序结合使用。基本上，该应用程序向 CPCL 命令发送流以打印标签。由于标签有非标准字体，我们创建了 7 个需要放在打印机上的 CPF 文件。

然而问题是新版本的 LabelVista（现在称为 Zebra Designer v2.2.3）不会像在 Windows XP 上运行的 LabelVista 那样让您“发送字体”。您必须使用“Zebra 字体下载器”。这就是问题真正出现的地方，因为它不允许您添加 CPF 文件。您必须创建一个 MMF 文件，然后将其下载到打印机。这将创建一个包含各种字体的大文件。当标签格式如下所示时，这是非常无用的：

```
! 0 200 200 304 {8}
LABEL
CONTRAST 0
TONE 0
SPEED 3
PAGE-WIDTH 408
BAR-SENSE 50
COUNTRY UK
VT 7 0 280 220 {0}
VB EAN{13} 1 2 60 310 230 {9}
T Got08Bpt.cpf 0 5 3 {1}
T Got05Bpt.cpf 0 5 91 TICKET PRICE
T Got010Bpt.cpf 0 5 220 RETAIL PRICE
T Got012Bpt.cpf 0 5 240 {12}
T Got014Bpt.cpf 0 20 240 {6}
CONCAT 5 105
Got28Bpt.cpf 0 0 {10}
Got14Bpt.cpf 0 7 {11}
ENDCONCAT
FORM
PRINT 
```

我需要为标签上写的每个文本行使用不同的字体大小，但我无法将 CPF 文件单独下载到打印机。

我无法安装 LabelVista 的旧版本，因为它不允许我在 Windows 7 上安装。我已阅读 Zebra 的 CPCL Progrmaming 指南，这根本没有帮助。任何人都可以提供帮助，否则我的 Zebra 客户经理将有一个非常糟糕的一天。:-)

谢谢

麦克风

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T08:31:44.313

试试我在此处粘贴的代码[通过 WLAN 将字体文件 (.cpf) 发送到 zebra Qln320 打印机](https://stackoverflow.com/questions/12951503/sending-a-font-file-cpf-to-zebra-qln320-printer-over-wlan/13392440#13392440) 我将字体文件存储在 Oracle DB 中，将它们加载到 Windows CE 设备并通过 BT 将它们发送到设备。这种方法中唯一的“坏事”是每次下载文件后打印机都会关闭（购买通过USB从LabelVista加载字体文件的方式，问题相同）。

要从打印机中删除文件，您可以使用此 String.Format("!U1 do \"file.delete\" \"{0}\"\r\n", FileName.ToUpper());

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-09T21:31:20.470

您可以使用“Zebra Setup Utilitites”来管理您的打印机。该软件允许您与打印机通信并对其进行配置。

# c#-4.0 - Linq to XML：根据节点的属性加载对象

> ID：12514912
> 
> 赞同：0
> 
> 时间：2012-09-20T14:31:59.887
> 
> 标签：c#-4.0, linq-to-xml

给定大型 xml 文件中的以下 XML 部分：

```
<item id="C3DD6846593" >
    <name xml:lang="fr">Atlantique</name>
    <name xml:lang="en">Atlantic </name>
</item> 
```

我正在尝试根据节点的属性在 Linq 中加载一个对象。这是我在代码中尝试做的事情。

```
public class MyList
    {
        public string ID {get;set;}

        public string EnName {get;set;}

        public string FrName {get;set;}

        public MyList() { }
    } 
```

......稍后在代码中

```
 AgencyList = (from x in rawSrc.Descendants("item")                          
                                select new MyList{
                                    ID = x.Attribute("id").Value
                                    EnName = x.XPathSelectElement("\\name[@lang='en']").Value,
                                    FrName =x.XPathSelectElement("\\name[@lang='fr']").Value
                                }).ToList(); 
```

我得到“'\name[@lang='en']' 的令牌无效。” 作为错误。还有另一种方法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T14:40:59.617

您需要使用普通斜杠而不是反斜杠。此外，您需要添加属性的命名空间并传入一个实例`IXmlNamespaceResolver`：

```
EnName = x.XPathSelectElement("//name[@xml:lang='en']", ns).Value,
FrName = x.XPathSelectElement("//name[@xml:lang='fr']", ns).Value 
```

# asp.net-mvc-4 - VS2012 实体框架错误

> ID：12514913
> 
> 赞同：1
> 
> 时间：2012-09-20T14:32:05.063
> 
> 标签：asp.net-mvc-4, visual-studio-2012, entity-framework-5

我有一个包含 3 个项目的 MCV 4.5 解决方案。场地、测试和模型。站点和模型引用 EF 5.0。我搜索了所有解决方案文件以获取对 4.3.1 的引用，但结果为空。我已删除并重新创建了对 EF 5.0 的所有引用

我有一个运行良好的 HomeControllerTest.cs。用这个作为测试

```
 [TestMethod]
    public void Index()
    {
        // Arrange
        HomeController controller = new HomeController();

        // Act
        ViewResult result = controller.Index() as ViewResult;

        // Assert
        Assert.AreEqual("Modify this template to jump-start your ASP.NET MVC application.", result.ViewBag.Message);
    } 
```

我创建了一个新的 LOBControllerTest.cs 来支持站点项目中的 LOBController.cs。此测试类使用以下测试失败，并出现错误“无法加载文件或程序集 'EntityFramework, Version=4.3.1.0'

```
 [TestMethod]
    public void Index()
    {
        // Arrange
        LOBController controller = new LOBController();

        // Act
        ViewResult result = controller.Index() as ViewResult;

        // Assert
        Assert.IsNotNull(result);

    } 
```

如果我更改上述测试以执行 HomeController，如下所示，它运行得很好。

```
 [TestMethod]
    public void Index()
    {
        // Arrange
        HomeController controller = new HomeController();

        // Act
        ViewResult result = controller.Index() as ViewResult;

        // Assert
        Assert.IsNotNull(result);

    } 
```

这是在全新安装的 Windows Server 2012 上全新安装的 VS2012。

有什么想法吗？

更新，我忘了提到我也在使用 ReSharper 7.1。我想知道是否有我缺少的设置。

我发现 RS7 stackoverflow.com/questions/12357696/... 有一个记录在案的错误，所以我禁用了 RS7 测试套件并尝试直接从 VS2012 接口运行它，结果相同。所以它不是与 RS7 隔离的。

更新：

这是一个链接[https://www.dropbox.com/sh/740w2jsp8i1mslg/pWiwnSewHQ](https://www.dropbox.com/sh/740w2jsp8i1mslg/pWiwnSewHQ)可以让任何想要查看它的人访问这个项目。这没什么特别的，它只是一个模板项目。我们正在工作中开始一个新项目，我是 MVC 和测试驱动开发的新手，所以我试图抢占先机。

2012 年 9 月 21 日更新

我相信我已经找到了。在与将原始 Wholesale 模板解决方案放在一起的开发人员交谈后，我发现 Wholesale.Admin 中的 Repositories 文件夹引用了一个 NUGet 代码包。我检查了[包站点](http://nuget.org/packages/GenericRepository.EF)，发现最新版本依赖于 EF 4.3.1

![依赖列表图像](../Images/3a39aaff23a61be8447df0f8997f592d.png)

更新：

这得到了证实。从站点下载和升级解决方案后，我不再收到错误消息。我收到另一个错误，但 4.3.1 不再是问题。希望开发人员更新他的 NuGet 解决方案，他已经 7 个月没有更新了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T14:40:08.047

显然，您的 LOBController 在某处以某种方式引用了 EF 4.3。检查您在包含此控制器的类库中的引用，或者可能仍在 bin 文件夹或 GAC 中的 dll ...

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T23:44:11.230

在与将原始 Wholesale 模板解决方案放在一起的开发人员交谈后，我发现 Wholesale.Admin 中的 Repositories 文件夹引用了一个 NUGet 代码包。我检查了包站点，发现最新版本依赖于 EF 4.3.1。我下载了源代码并重新编译引用 EF 5.0 并清除了 4.3.1 错误

# mysql - 使用 putty 在 AWS RDS 上上传大型 mysql 数据库 - “MySQL 服务器已消失”

> ID：12514914
> 
> 赞同：14
> 
> 时间：2012-09-20T14:32:06.033
> 
> 标签：mysql, amazon-web-services

我使用亚马逊网络服务，我已经设置了 EC2 和 RDS 并安装了 apache、php、mysql、phpmyadmin。

我可以导入小的 sql 文件（我还设置了 worpdress 并为此导入了一个 sql db）但是当我尝试使用 putty 导入一个 200mg 的 sql 文件时，我得到了

> ERROR 2006 (HY000) at line 186: MySQL server has gone away'

在做了一些研究之后，似乎增加**数据库参数组**中的**max_allowed_pa** ​​cket 、**wait_timeout**和**net_read_timeout**会有所帮助，但它没有（我在进行更改后确实重新启动，我还使用 RightScale 仪表板将它们设置为最大允许值）。

 **还有什么我应该注意的可能导致这种情况的吗？

我也试过 bigdump.php 没有运气。

我想很多人使用 aws 上传大型 mysql 数据库，所以这有点让我发疯。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2014-05-23T14:38:35.767

我有同样的问题：

1.  转到您的 RDS 仪表板并单击**Parameter Groups**。
2.  单击**Create DB Parameter Group**，将其命名为“LargeImport”（确保您选择的 DB Parameter Group Family 与您的实例版本匹配）并编辑参数。
3.  增加“LargeImport”上的“ **max_allowed_pa** ​​cket”以适应您的导入大小（有效值为 1024-1073741824）。
4.  增加“ **wait_timeout** ”参数以适应您的导入大小。（有效值为 1-31536000 秒）。
5.  保存您的更改。
6.  单击左侧列中的实例并选择您的实例**。**
7.  单击**实例操作**并选择**修改**。
8.  **将Parameter Group**更改为新的“LargeImport”组，然后单击**Continue**。
9.  单击“修改数据库实例”。
10.  更改完成后，再次单击**实例操作**并重新启动您的实例。

一旦您的实例重新启动，您应该能够进行更大的 sql 导入。

**完成导入后，将实例参数组切换回默认参数组并重新启动。**

希望这可以帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-27T08:46:57.710

接受的答案对我不起作用，但将 max_allowed_pa​​cket 更改为较大的值（即 32000000 =~ 32MB）并重新启动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T07:10:19.800

根据[MySQL 文档](http://dev.mysql.com/doc/refman/5.1/en/gone-away.html)，这通常与超时有关。虽然很难诊断这一点，但我可以想到一种可能的解决方法：在与您的 RDS 服务器相同的区域中启动一个 EC2 实例（或使用您已经拥有的现有实例 - 微型实例或小型实例即可） ，例如使用 SFTP 上传您的大型 SQL 转储，安装 MySQL 客户端库并从那里上传您的文件。这将确保您的 mysql 客户端和 RDS 实例之间的导入速度更快。**

# html - 语义 HTML 和清晰：两者

> ID：12514915
> 
> 赞同：5
> 
> 时间：2012-09-20T14:32:23.140
> 
> 标签：html, css, semantics, semantic-markup

我们正试图让我们的 HTML 更加语义化，而在我们的 HTML 中似乎与表示有关的一件事是

```
<div class="clear"></div> 
```

例如，如果我们有以下语义 html：

```
<div class="widgetRow">
    <div class="headerInfo">My header info</div>
    <div class="widgetPricing">$20 to $30</div>
    <div class="footerInfo">My footer info</div>
</div> 
```

而且我的 headerInfo 和 footerInfo 都在 CSS 中向左浮动，而 widgetPricing 向右浮动（仅作为示例）。

**问题：**

我的 widgetRow div 没有任何高度或宽度。`<div class="clear"></div>`在 .footerInfo 之后添加是错误的吗？在那一点上，我似乎没有语义。

**更一般的问题**

在编写语义 HTML 时，是否可以在 HTML 中放置一个唯一的工作是清除浮动的 div？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T15:06:52.990

有几种清除浮动的方法：

**1\. 使用 CSS 伪 :after 类**

```
.container:after { clear:both; content:"."; display:block; height:0; visibility:hidden; } 
```

将容器类应用到您的“widgetRow”div。这种方法可能是最语义化的，但并非所有浏览器都支持，特别是 IE7 及以下。[浏览器支持 :after](http://css-tricks.com/browser-support-pseudo-elements/)

**2\. 使用溢出：自动或溢出：隐藏**

```
.container { overflow:auto; }
.container { overflow:hidden; } 
```

同样，将容器类应用到您的“widgetRow”div。这种方法可能更具语义性，但它也可能会反过来咬你，尤其是在较小的显示器上观看时。overflow:auto 可以触发水平滚动条，而 overflow:hidden 可以将元素隐藏在一起。[使用 oveflow 清除浮动的问题](http://www.impressivewebs.com/overflow-hidden-problem/)

**3\. 使用清除：两者**

```
.clear { clear:both; } 
```

这是您正在使用的方法，假设您的 clear 类与上面的类类似。这是我所知道的唯一一种在所有浏览器中都兼容并且不会给您带来不良副作用的方法。因此，根据您支持的浏览器，我可能会坚持使用您拥有的浏览器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T14:36:33.447

不，应避免仅为视觉/样式目的引入空标记（这也使页面难以维护/缩放）

您可以改为使用一些非结构清除方法，例如[easyclearing](http://www.positioniseverything.net/easyclearing.html)（H5BP 也使用），为浮动包装器添加一些额外的样式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T15:01:38.690

我知道清除浮动的三种基本方法。

1.  带有`clear:both;`您指定的类似的空 div。
2.  将 CSS 属性添加`overflow: auto`到父 div。
3.  使用 CSS 伪选择器在元素之后引入一个元素并清除其上的浮动。

这些的优缺点

# 空分区

**优点**

*   被浏览器广泛支持。
*   没有任何副作用。

**缺点**

*   添加额外的标记只是为了清除浮动。
*   许多人认为这不是语义。

# 溢出

**优点**

*   没有额外的标记。

**缺点**

*   在某些情况下可能会触发不需要的滚动条。
*   溢出自动并不是真正打算用于清除浮动的特定目的。

# 伪选择器

**优点**

*   没有额外的标记。
*   比其他方法更优雅，imo。

**缺点**

*   ie7 及更低版本不支持。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T14:34:12.243

你试过使用[很棒的 clearfix hack](http://www.webtoolkit.info/css-clearfix.html)吗？您不需要以这种方式添加冗余的、非语义的空元素。

要回答您更一般的问题 - 不，为布局目的添加空元素在语义上是无效的。但是，如果您有几个空`<div>`标签，没有人会受到伤害！:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T15:02:45.483

作为上述出色答案的一部分，我将再添加一种方法：

**4\. 使用 display:inline-block + vertical-align:top**

这也可能变得棘手，特别是在 IE7 和更早版本中，因为根据[http://www.quirksmode.org/css/display.html](http://www.quirksmode.org/css/display.html)

> IE 6/7 仅接受具有自然显示的元素的值：内联

它现在得到了广泛的支持，对于某些元素，它甚至可以在 IE6/7 中使用，并且您将获得与浮动元素相同的效果，但没有清除问题。在某些情况下，您甚至可以对标记（将保持语义）稍作更改以使用本机内联元素。hack 也可以仅用于 IE，请参阅[IE7 不理解显示：inline-block](https://stackoverflow.com/questions/6544852/ie7-does-not-understand-display-inline-block)

**Anex：溢出的另一个可能问题：隐藏**

**我最近遇到的溢出：隐藏**方法的另一个缺点：在溢出：隐藏元素中使用绝对定位元素时，这些元素将被容器裁剪。因此，例如，CSS 下拉菜单将无法正常工作。

# ruby-on-rails - 为什么我的格式翻译不起作用

> ID：12514919
> 
> 赞同：1
> 
> 时间：2012-09-20T14:32:38.500
> 
> 标签：ruby-on-rails, internationalization, formtastic

翻译似乎是我最大的敌人：（我有一个很好的 Formtastic 表格和一个 yaml 翻译文件。我将翻译设置为`config/application.rb`：

```
config.i18n.available_locales = :nl
config.i18n.default_locale = :nl 
```

和这样的 before_filter 方法`application_controller.rb`：

```
before_filter :set_locale

def set_locale
  session[:locale] = params[:locale] unless params[:locale].nil?
  I18n.locale = session[:locale] || I18n.default_locale
end 
```

我的表格看起来像这样（它是用haml写的）：

```
= semantic_form_for Ad.new do |f|       
  .holder
    = f.inputs do
      = f.input :name

    = f.inputs do
      = f.input :reason 
```

最后我的 nl.yml 看起来像这样：

```
nl:
  formtastic:
    titles:
      ads:
        reason: "Waarom verkoop je het?"
    labels:
      ads:
        reason: "Waarom verkoop je het?"
    hints:
      ads:
        reason: "Waarom verkoop je het?"
    placeholders:
      ads:
        reason: "Waarom verkoop je het?" 
```

如您所见，我已为 Formtastic 提供的所有这些键添加了相同的翻译，但没有显示，标签仍然`Reason`存在，并且没有占位符文本。据我所知，我已经完全按照 Formtastic 自述文件的规定做了。我正在使用带有导轨（3.2.8）的formtastic（2.2.1）。如果我将 activerecord 翻译添加到`nl.yml`标签确实会被翻译。为什么格式翻译不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T22:44:54.983

我不太确定，但您是否尝试过类似的方法：

```
nl:
  formtastic:
    ads:
      reason: "Waarom verkoop je het?"
... 
```

因为这里的模型类是*Ad*而 i18n 应该以某种方式反映模型结构？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T06:51:15.203

这有点蹩脚，但问题出在`ads`部分。我不应该复数`ad`。这工作正常：

```
nl:
  formtastic:
    titles:
      ad: // Mind the difference here: no 's'
        reason: "Waarom verkoop je het?"
    labels:
      ad:
        reason: "Waarom verkoop je het?"
    hints:
      ad:
        reason: "Waarom verkoop je het?"
    placeholders:
      ad:
        reason: "Waarom verkoop je het?" 
```

# javascript - SCRIPT438：对象不支持“创建”属性或方法 - THREE.JS 相机\Camera.js

> ID：12514924
> 
> 赞同：1
> 
> 时间：2012-09-20T14:32:46.403
> 
> 标签：javascript, internet-explorer, camera, internet-explorer-9, three.js

我收到此错误：SCRIPT438：对象不支持属性或方法“创建”

尝试`three.js`与 IE9 一起使用时。以下代码行导致问题：

```
THREE.Camera.prototype = Object.create( THREE.Object3D.prototype ); 
```

在文件中`cameras\Camera.js`

奇怪的是，它适用于某些带有 IE9 的计算机，而其他计算机则不能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:49:19.993

我今天遇到了同样的问题。IE9 对我的页面使用了 quirks 模式。我通过添加一个来解决它

```
<!DOCTYPE HTML> 
```

在我页面的开头声明。

这也可能是由 IE9 使用 Compatability View 显示您的页面引起的。这可以解释计算机之间行为的差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-01T07:30:30.063

[MSDN](https://msdn.microsoft.com/en-us/library/ie/ff925952(v=vs.94).aspx)说`Object.create`：

```
Supported in the following document modes: Internet Explorer 9 standards, 
Internet Explorer 10 standards, and Internet Explorer 11 standards. Not 
supported in the following document modes: Quirks, Internet 
Explorer 6 standards, Internet Explorer 7 standards, Internet Explorer 8 standards. 
```

因此，当您使用时，`IE9`请检查兼容模式是否设置为`standards`或`Quirks`。

现在，如果您想在`Quirks`模式下做类似的事情，那么它应该如下所示：

```
 THREE.Camera.prototype = new THREE.Object3D().prototype 
```

或者 ，

```
THREE.Camera.prototype = new THREE.Object3D 
```

# php - 从今天起的 1 周内从 MYTABLE 中删除行

> ID：12514925
> 
> 赞同：1
> 
> 时间：2012-09-20T14:32:49.780
> 
> 标签：php, mysql, date, strtotime

我尝试在 1 周内删除我的 DDB 中的一行。

我写：

```
<?php
//in my page
//On click
$today=date("Ymd");
$query = 'INSERT INTO mytable VALUES (id,val,date),("", "'.$val.'", "'.$today'")';
dbb_exe($query);
?>

<?php
//in my header
//Check my table
$today=date("Ymd");

$query = 'SELECT date FROM mytable WHERE id=.'(int)$_GET['id'];
$r_date = dbb_exe($query);

//Here it's where i want delete my row if the row exists since 1 week

if($r_date==($today - "1week")){
//DELETE row
$query = 'DELETE FROM mytable WHERE id=.'(int)$_GET['id];
dbb_exe($query);
}

?> 
```

如您所见，我不知道如何计算 var "1week"，

现在我正在阅读 strtotime 来尝试类似 $date= strtotime($today); 但是我迷路了，无论如何我一整天（+晚上）都可以成功

红牛和stackoverflow是我的朋友。

感谢社区

祝你今天过得愉快

梅尔

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T14:45:44.820

我相信您可以尝试以下方法，而不是使用 php 完成所有工作：

```
DELETE FROM mytable WHERE date = DATE_SUB(CURDATE(), INTERVAL 7 DAY) 
```

这应该删除`mytable`与`date`1 周前相同的所有记录。

如果要删除所有超过 1 周的记录，请替换`=`为。`<`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T14:37:10.747

更改`if($r_date==($today - "1week")){`为 `if($r_date ==(date('Ymd', strtotime(date('Ymd') . " -7days"))) {`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T14:38:52.360

使用： if($today - $r_date >= 7)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T14:48:20.610

如果您将 DATES 存储在`mysql`as`DATE`数据类型中，请执行以下操作：

```
DELETE FROM table WHERE date_column = DATE_ADD(CURRENT_DATE(), INTERVAL 7 DAY) 
```

您没有提供太多详细信息，因此在上面的答案中，我假设它`date`已经存储，当前日期将由 自动获取`MySQL`，但是，您希望将 7 天添加到任何特定日期，然后`CURRENT_DATE()`以如下格式更改为所需日期`2012-09-20`

# c# - “TABLENAME”类型对象的成员“FIELDNAME”的值已更改。不能更改定义对象身份的成员

> ID：12514928
> 
> 赞同：0
> 
> 时间：2012-09-20T14:32:52.560
> 
> 标签：c#, linq-to-sql

我有一张带有 ARTIEST_JAAR 的桌子。（在 SQL-Server 2008 中）。我想更改值 JAAR_TM。我错了什么？

这是发生的异常：

> “ARTIEST_JAAR”类型对象的成员“JAAR_TM”的值已更改。不能更改定义对象身份的成员。考虑添加一个具有新身份的新对象，然后删除现有对象。

```
public void OpslaanJarenActief(int AID_Artiest, int AJaar_Van, int AJaar_Tm)
{
    string sMethodName = "OpslaanJarenActief";

    var qryJarenActief = (from a in FDatabeheer.DataContext.ARTIEST_JAARs
                        where a.ID_ARTIEST == AID_Artiest
                        && a.JAAR_VAN == AJaar_Van
                        select a).SingleOrDefault();
    if (qryJarenActief == null)
    {
        .... then insert....
    }
    else
    {
        try
        {
            qryJarenActief.ID_ARTIEST = AID_Artiest;
            qryJarenActief.JAAR_VAN = AJaar_Van;
            qryJarenActief.JAAR_TM = AJaar_Tm;
            qryJarenActief.DATUM_MUTATIE = DateTime.Today;
            FDatabeheer.DataContext.SubmitChanges();
        }
        catch (Exception ex)
        {
            FLogboek.WriteFoutNaarLogboek(FClassName, sMethodName, "Systeemfout", ex.Message);
        }
    }
} 
```

谢谢

# facebook - facebook like 按钮不显示 :: FB.getLoginStatus() 在调用 FB.init() 之前调用

> ID：12514936
> 
> 赞同：7
> 
> 时间：2012-09-20T14:33:38.587
> 
> 标签：facebook, html, facebook-like, facebook-javascript-sdk

我只想在我的网站上有一个基本的 facebook like 按钮。我按照每个 facebooks 网站 (http://developers.facebook.com/docs/reference/plugins/like/) 的说明进行操作。我尝试了`HTML5`,`XFBML`和`iFrame`方法，也没有任何乐趣。所以我想这可能是我的网站干扰的问题。所以我创建了一个简单的 html 页面，如下所示，它仍然在调用错误`FB.getLoginStatus()`之前给了我调用`FB.init()`错误。

```
<html>
<body>
<div id="fb-root"></div>
<script>(function(d, s, id) {
var js, fjs = d.getElementsByTagName(s)[0];
if (d.getElementById(id)) return;
js = d.createElement(s); js.id = id;
js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
<div class="fb-like" data-href="http://www.facebook.com/[mypage]" data-send="false" data-width="450" data-show-faces="false"></div>
</body>
</html> 
```

更新：我删除了上面所有的东西回到了`iFrame`唯一的方法并且它有效，但只在 Firefox 中。Chrome 和 IE9 我仍然一无所获，但没有报告错误。为什么下面的这一行只在 FireFox 中工作（显然 [myPage] 部分被换掉了）？

```
 <iframe src="//www.facebook.com/plugins/like.php?href=http%3A%2F%2Fwww.facebook.com%2F[myPage]&amp;send=false&amp;layout=standard&amp;width=450&amp;show_faces=false&amp;action=like&amp;colorscheme=light&amp;font&amp;height=35" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:450px; height:35px;" allowTransparency="true"></iframe> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T09:51:18.950

不确定App ID是这里的问题。我也遇到了这个*奇怪*的错误消息，我只是包含了 FB 开发人员页面提供的 FB Like Button 社交插件的标准代码。

然后我再次浏览[插件配置页面](https://developers.facebook.com/docs/reference/plugins/like/)并再次复制代码，无论如何都没有改变，~~注意到生成代码的 HTML 部分几乎没有区别（以前是`<fb:like>`标签，现在是`<div class="fb-like">`）~~。无论如何，错误仍然存​​在。

然后我才意识到几周后 FB Like Button 将永久迁移到*Open Graph 的内置 Like 操作*，如果我理解正确，无论如何你**都**必须创建一个 App ID。

到那时，错误可能就消失了。似乎很难有人对几周后就会*消失*的东西进行修复。

高温高压

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-27T19:50:55.343

你是在本地测试吗？在自己调试和搜索了很多之后，我决定在我的网络服务器上对其进行测试，瞧，它成功了！:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T13:54:33.203

在我们获取 Like Button 脚本的 Facebook 开发者页面上，Facebook 没有说也需要实现 init() （这可能会解决这个问题，但是如果你还调用了init() 函数??)。

无论如何，Like Button 都不需要 APP ID 才能工作。我相信 Facebook 只是给了我们点赞按钮代码——即使缺少 init() 函数会导致这个 js 错误（但显然 init() 实际上并不需要！）。

这似乎是 FB 部署 Like Button API 的一个缺点。

# ios - iOS 的阿拉伯语语音识别

> ID：12514937
> 
> 赞同：0
> 
> 时间：2012-09-20T14:33:40.817
> 
> 标签：ios, objective-c, ios5, speech-recognition

我正在开发一个软件，我需要捕获用户的特定订单并从预定义订单列表中确定它。

无论如何我可以让这个功能在阿拉伯语的支持下工作吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T13:35:09.380

当然，您可以尝试使用 pocketsphinx 来完成此任务，请参阅：

[http://cmusphinx.sourceforge.net/2011/05/building-pocketsphinx-on-android/](http://cmusphinx.sourceforge.net/2011/05/building-pocketsphinx-on-android/)

阿拉伯语声学模型可在此处获得；

[http://sourceforge.net/projects/arabisc/](http://sourceforge.net/projects/arabisc/)

要了解有关 CMUSphinx 的更多信息，请阅读教程

[http://cmusphinx.sourceforge.net/wiki/tutorial](http://cmusphinx.sourceforge.net/wiki/tutorial)

# java - 如何在 Java 中使用 double to int cast

> ID：12514958
> 
> 赞同：28
> 
> 时间：2012-09-20T14:34:54.873
> 
> 标签：java, casting, primitive, mantissa

我是 Java 新手，想知道 double to int cast 是如何工作的？我知道通过取低 32 位来 long 到 int 很简单，但是 double（64 位）到 int（32 位）呢？二进制中 double 的那些 64 位是双精度浮点格式（尾数），那么它如何在内部转换为 int 呢？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-20T14:38:21.573

这一切都记录在JLS的[第 5.1.3 节中。](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.3)

> 第一步，浮点数转换为 long（如果 T 为 long）或转换为 int（如果 T 为 byte、short、char 或 int），如下所示：
> 
> 如果浮点数是 NaN（第 4.2.3 节），则转换第一步的结果是 int 或 long 0。
> 
> *   否则，如果浮点数不是无穷大，则浮点值将四舍五入为整数值 V，使用 IEEE 754 向零舍入模式（第 4.2.3 节）向零舍入。那么有两种情况：
>     
>     
>     *   如果T是long，而这个整数值可以表示为long，那么第一步的结果就是long值V。
>         
>         
>     *   否则，如果这个整数值可以表示为 int，那么第一步的结果就是 int 值 V。
>         
>         
> *   否则，以下两种情况之一必须为真：
>     
>     
>     *   该值必须太小（一个大的负值或负无穷大），第一步的结果是int或long类型的最小可表示值。
>         
>         
>     *   该值一定是太大了（一个大的正值或正无穷大），第一步的结果是int或long类型的最大可表示值。

（这里的第二步无关紧要，什么时候`T`是`int`。）

在大多数情况下，我希望这可以使用硬件支持来*实现*——将浮点数转换为整数通常由 CPU 处理。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-20T14:40:59.123

如果您使用 (int) 强制转换，Java 会截断其值，您可能会注意到：

```
 double d = 2.4d;
    int i = (int) d;
    System.out.println(i);
    d = 2.6;
    i = (int) d;
    System.out.println(i); 
```

输出：

```
2
2 
```

除非你使用 Math.round、Math.ceil、Math.floor...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T14:39:03.273

您可能需要阅读 Java 规范：

[http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.3](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.3)

相关部分是 5.1.3 - “Narrowing Primitive Conversion”。

# asp.net-mvc-3 - Moles 在 VS2010 中创建的程序集在安装 VS2012 后引用 MVC3 和 MVC4

> ID：12514961
> 
> 赞同：3
> 
> 时间：2012-09-20T14:35:07.370
> 
> 标签：asp.net-mvc-3, asp.net-mvc-4, visual-studio-2012, .net-4.5, moles

*程序集 'dllname.Moles, Version=1.2.0.0, Culture=neutral, PublicKeyToken=null' 使用 'System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' 它的版本比引用的程序集更高'System.Web.Mvc，版本 = 3.0.0.0，文化 = 中性，PublicKeyToken = 31bf3856ad364e35'*

针对 .NET4.0 框架的 MVC3 解决方案，以及使用 Moles 框架的单元测试项目，在 Visual Studio 2010 中完美运行。这台计算机上没有安装 MVC4。

安装 Visual Studio 2012 后（以及用 .NET4.5 强制替换 .NET4.0 并安装 MVC4），unittest 项目在 VS2010 中不再编译，它抱怨给定的错误。

当我们检查程序集时，我们有效地看到它引用了 MVC4 和 MVC3??

*   BoneSoft.CSS，版本=1.0.0.0，文化=中性，PublicKeyToken=null
*   itextsharp，版本=5.1.2.0，文化=中性，PublicKeyToken=8354ae6d2174ddca
*   Microsoft.ExtendedReflection，版本=0.94.0.0，文化=中性，PublicKeyToken=31bf3856ad364e35
*   Microsoft.Moles.Framework，版本=0.94.0.0，文化=中性，PublicKeyToken=31bf3856ad364e35
*   mscorlib，版本=2.0.0.0，文化=中性，PublicKeyToken=b77a5c561934e089
*   mscorlib，版本=4.0.0.0，文化=中性，PublicKeyToken=b77a5c561934e089
*   NHibernate.Validator，版本=1.3.1.4000，文化=中性，PublicKeyToken=70154e18752585bd
*   系统，版本=2.0.0.0，文化=中性，PublicKeyToken=b77a5c561934e089
*   系统，版本=4.0.0.0，文化=中性，PublicKeyToken=b77a5c561934e089
*   System.Core，版本=4.0.0.0，文化=中性，PublicKeyToken=b77a5c561934e089
*   System.Data，版本=4.0.0.0，文化=中性，PublicKeyToken=b77a5c561934e089
*   System.Drawing，版本=2.0.0.0，文化=中性，PublicKeyToken=b03f5f7f11d50a3a
*   System.Runtime.Caching，版本=4.0.0.0，文化=中性，PublicKeyToken=b03f5f7f11d50a3a
*   System.Web，版本=4.0.0.0，文化=中性，PublicKeyToken=b03f5f7f11d50a3a
*   **System.Web.Mvc，版本=3.0.0.0，文化=中性，PublicKeyToken=31bf3856ad364e35**
*   **System.Web.Mvc，版本=4.0.0.0，文化=中性，PublicKeyToken=31bf3856ad364e35**
*   System.Xml，版本=2.0.0.0，文化=中性，PublicKeyToken=b77a5c561934e089

MVC4 从未在整个解决方案中被引用，但 Moles 在某处认为在生成引用 MVC3 的程序集的“moles 程序集”时必须包含它。

我也有没有引用 MVC3 的其他程序集的 moles 程序集，并且在编译时没有问题。

我已经删除了项目中的痣程序集，重建并重新创建了痣程序集：同样的错误。

想法在哪里搜索问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T17:27:13.847

我在一个项目中遇到了类似的错误，所以我删除了对 MVC 的引用并重新添加了对 MVC 3 的引用，然后我就可以编译了。

查看 .csproj 文件，在它读取之前：

```
<Reference Include="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL">
  <SpecificVersion>False</SpecificVersion>
  <Private>False</Private>
</Reference> 
```

并在重新添加参考后：

```
<Reference Include="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL" /> 
```

所以看起来标签`<SpecificVersion>False</SpecificVersion>`让项目寻找对新版本 MVC 的引用，这导致了版本冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T22:16:05.300

当你安装 VS 2012 时，它在盒子上安装了 MVC4。MVC 3 不能与 MVC 4 很好地配合 SxS。您需要更新 MVC 3 应用程序才能在安装了 MVC 4 的机器上工作。
这记录在 MVC 4.0 的发行说明中。请阅读部分[安装 ASP.NET MVC 4 中断 ASP.NET MVC 3 RTM 应用程序](http://www.asp.net/whitepapers/mvc4-release-notes#_Toc303253815)。按照 setps“必需的更新”。

# javascript - getElementById() 有效吗？

> ID：12514970
> 
> 赞同：14
> 
> 时间：2012-09-20T14:35:55.037
> 
> 标签：javascript, html, dom, android-webview

我经常`getElementById("id1");`在我的方法中使用该方法。我用它来查找我的 HTML 中的某些元素。我想知道如果它每次都必须搜索整个 DOM，我是否需要关心我使用了多少。

这种方法是如何工作的？它是解析 DOM 并在找到元素时返回它，还是它以某种方式索引了所有这些值，因此能够更快地返回？

PS我对一般的方法很好奇，但如果这有什么不同，我正在使用Android WebView。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-20T14:40:40.573

`getElementById`速度非常快，您不必担心性能。

如果您一遍又一遍地（一遍又一遍地）使用相同的 ID，您可能需要缓存它。性能增益可以忽略不计：

```
var myId = getElementById("myId");
myId.operation1();
myId.operation2();
myId.andSome5000MoreCalls(); 
```

检查[this SO answer](https://stackoverflow.com/a/1716873/540352)以获取一些基准。迈克发布的结果是：

> IE8 getElementById：**0.4844 毫秒**
> IE8 id 数组查找：0.0062 毫秒
> 
> Chrome getElementById：0.0039 毫秒
> Chrome id 数组查找：0.0006 毫秒
> 
> Firefox 3.5 与 chrome 相当。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-20T14:41:54.387

实际上`getElementById`是访问 DOM 中元素的最快方式。索引取决于特定的浏览器，但这里有一个基准：

[http://jsperf.com/getelementbyid-vs-everyone-else](http://jsperf.com/getelementbyid-vs-everyone-else)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-20T14:38:50.630

带有 ID 的元素确实是有索引的，通过 DOM 函数通过其 ID 选择元素是最有效的选择方式。

# java - Spring MVC 3.1 App：在应用程序启动期间多次调用 AbstractApplicationContext#refresh

> ID：12514972
> 
> 赞同：0
> 
> 时间：2012-09-20T14:36:06.933
> 
> 标签：java, spring, tomcat7, spring-insight

我有一个使用 Spring MVC 构建的 REST Web 服务，具有基于注释的配置以及`org.springframework.web.context.support.AnnotationConfigWebApplicationContext`指定要使用的 web.xml。

在日志文件中的应用程序启动期间，我看到某些行 3 次。（休眠初始化 - `SchemaUpdate`,`TableMetadata`等等..., 然后`configWebApplicationContext`, 然后`EhCacheManagerFactoryBean`, 然后`requestMappingHandlerMapping`... 并按此顺序执行 3 次）。

应用程序启动时没有错误，我可以使用 REST 端点。

我担心的是，我的应用程序是否会因此使用更多内存或导致一些不可预测的行为？任何见解都是有帮助的。

这是 Spring Insight 捕获的应用程序启动的屏幕截图：

![在此处输入图像描述](../Images/ee1094de2a814cb393474bc771f0c579.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T09:08:17.613

好的，正如我所看到的，摘录更长的启动时间，它实际上并没有使用更多的内存，所以这很好。

如[JavaDoc API](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/context/support/AbstractApplicationContext.html#refresh%28%29)中所述，它加载或刷新配置的持久表示。

@gigadot在对问题的[评论中指出了很好的问题](https://stackoverflow.com/questions/12514972/spring-mvc-3-1-app-abstractapplicationcontextrefresh-called-multiple-times-dur#comment16846121_12514972)[，](https://stackoverflow.com/users/507546/gigadot)即我可能有多个调度程序 servlet，我有两个，在 onStartup 方法中，一个在 web.xml 的声明中。我删除了 web.xml 中的那个，现在我在启动时有 2 个调用而不是 3 个，并且内存消耗是相同的。`WebInitializer implements WebApplicationInitializer``#refresh`

# ios - Mashape Objective-C for iOS - 对 JSON 对象的 MashapeResponse

> ID：12514977
> 
> 赞同：2
> 
> 时间：2012-09-20T14:36:18.953
> 
> 标签：ios, objective-c, lambda, mashape

我正在通过 Mashape.com 使用一个名为 Lamda (https://www.mashape.com/lambda) 的人脸识别 API。

当我从识别请求中得到结果时，它给了我一个“MashapeRespose”对象。

我无法将此 MashapeResponse 或其任何部分转换为 JSON 对象。

当我打电话

```
NSLog(@"des=%@", [response body]); 
```

我把这个打印出来

```
{
    images =     (
        "http://api.lambdal.com/static/uploads/img05Xv8N.png"
    );
    photos =     (
                {
            height = 241;
            tags =             (
                                {
                    attributes =                     (
                                                {
                            confidence = "0.7097208087892503";
                            gender = male;
                        }
                    );
                    center =                     {
                        x = 95;
                        y = 98;
                    };
                    confidence = "0.978945010372561";
                    "eye_left" =                     {
                        x = 114;
                        y = 84;
                    };
                    "eye_right" =                     {
                        x = 76;
                        y = 85;
                    };
                    height = 112;
                    "mouth_center" =                     {
                        x = "96.5";
                        y = "134.5";
                    };
                    "mouth_left" =                     {
                        x = 74;
                        y = "134.5";
                    };
                    "mouth_right" =                     {
                        x = 119;
                        y = "134.5";
                    };
                    nose =                     {
                        x = 94;
                        y = 113;
                    };
                    tid = 31337;
                    uids =                     (
                                                {
                            confidence = "0.323";
                            prediction = manuel;
                            uid = "manuel@MICClientele";
                        },
                                                {
                            confidence = "0.194";
                            prediction = olivier;
                            uid = "olivier@MICClientele";
                        },
                                                {
                            confidence = "0.161";
                            prediction = sean;
                            uid = "sean@MICClientele";
                        },
                                                {
                            confidence = "0.161";
                            prediction = damien;
                            uid = "damien@MICClientele";
                        },
                                                {
                            confidence = "0.065";
                            prediction = egle;
                            uid = "egle@MICClientele";
                        },
                                                {
                            confidence = "0.065";
                            prediction = gareth;
                            uid = "gareth@MICClientele";
                        }
                    );
                    width = 112;
                }
            );
            url = "http://api.lambdal.com/static/uploads/img05Xv8N.png";
            width = 200;
        }
    );
    status = success;
} 
```

显然这不是有效的 JSON。

这是 MashapeResponse.h 的内容

```
#import "MashapeResponse.h"

@interface MashapeResponse ()
@property (readwrite, retain) NSData* rawBody;
@property (readwrite) NSDictionary* headers;
@property (readwrite) int code;
@end

@implementation MashapeResponse

@synthesize rawBody;
@synthesize headers;
@synthesize code;
@synthesize body;

-(MashapeResponse*)initWithResponse:(int)httpCode headers:(NSDictionary*) httpHeaders rawBody:(NSData*) httpRawBody {
    self = [super init];
    [self setCode:httpCode];
    [self setHeaders:httpHeaders];
    [self setRawBody:httpRawBody];
    return self;
}

@end 
```

有没有人能够在 iOS 上使用 Mashape 并能够转换为 JSON 对象？

我可以使用子字符串来获取我想要的信息，但这不是它应该如何工作，因为文档声明它应该是一个 json 响应..

至少可以说非常沮丧...

问候达米安

PS。我已经向 Mashape 支持发送了这个问题，所以如果我在有人在这里发布答案之前得到了解决方案，我会将它添加到这篇文章中。

编辑：

当我打电话

```
id status = [response valueForKey:@"status"];
NSLog(@"status=%@", [status description]);
id photos = [response valueForKey:@"photos"];
NSLog(@"photos=%@", [photos description]); 
```

我得到了这个例外

```
2012-09-20 16:53:20.609 Clientele[5160:707] *** Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<MashapeJsonObjectResponse 0x3d2810> valueForUndefinedKey:]: this class is not key value coding-compliant for the key status.' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T09:08:11.657

首先感谢 Dcritelli 对这个问题的帮助。

我收到了 Mashape 关于我的问题的回复，他们给我发了这封电子邮件作为回复。

* * *

> 嗨，达米安，
> 
> [response body] 方法已经返回一个解析的 JSON 对象。如果您需要以字节为单位的原始响应（即 NSData* 对象），您可以通过调用 [response rawBody] 来获取它。如果需要，您可以将 NSData* 转换为 NSString*。
> 
> 假设 [response body] 返回解析后的 JSON 对象，例如要获取“photos”数组中第一张照片的“url”属性，您可以编写：

```
 NSArray* photos = [[response body] objectForKey:@"photos"];
 NSDictionary* firstPhoto = [photos objectAtIndex:0];
 NSString* url = [firstPhoto objectForKey:@"url"];
 NSLog(@"URL of the first photo is: %@", url); 
```

> 如果文档令人困惑，我们深表歉意，我们对其进行了更新，您可以在此处阅读新修订： [https ://www.mashape.com/docs/consume/objectivec](https://www.mashape.com/docs/consume/objectivec)
> 
> 如果您需要其他帮助，请告诉我们，干杯

* * *

因此，他们不仅回复了解决方案，还更新了文档。

向 Mashape 致敬。

问候达米安

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T15:31:24.947

我相信这是一个字典对象。api描述中应该列出键。只需使用：

```
[response valueForKey:@"key"] 
```

并将值分配给适当的对象：数组、字典或任何它碰巧的对象。

# android - android videoView java.io.filenotfoundexception 没有内容提供者

> ID：12514980
> 
> 赞同：3
> 
> 时间：2012-09-20T14:36:25.060
> 
> 标签：android, video-streaming, android-videoview, rtsp

我的安卓手机有问题。我正在尝试创建一些可以播放某些流的应用程序。流是 rtsp ......但我有一个问题。我正在使用 videoView 播放流，它看起来不错。我在具有 android 2.3.7 的摩托罗拉和具有 2.3.4 android 的索尼爱立信 xperia mini pro 上对其进行了测试。
问题是当我尝试在具有 ICS 4.04 系统的 HTC One X 上对其进行测试时。

```
video.setVideoPath(url);
video.setOnPreparedListener(this);

@Override
    public void onPrepared(MediaPlayer mp) {
        media_width = mp.getVideoWidth();
        media_height = mp.getVideoHeight();

        if (media_width > 0 && media_height > 0) {
            resize();
            video.start();
        } else {
            mp.setOnVideoSizeChangedListener(this);
        }       
        loading.cancel();
        //video.start();
        mp.setLooping(true);
        startThreads();
    } 
```

当我尝试在 LogCat 中的 uri 中放入一些字符串时，我发现了这个：
09-20 16:33:27.660: E/MediaPlayer(18521): java.io.FileNotFoundException: No content provider: rtsp://xxx.xxx.xxx .xxx:1935/xxx/programer_aac 哪里有问题？？？？这在其他安卓手机上运行良好....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T08:39:34.657

我没有找到答案，但我可以说这是一个 htc 问题。我在 S3 上对其进行了测试，它就像一个魅力，所以问题一定出在 htc 上。

# php - 使用一个提交按钮来更新数据库和发送电子邮件？

> ID：12514981
> 
> 赞同：0
> 
> 时间：2012-09-20T14:36:30.000
> 
> 标签：php, html, sql, forms

我正在使用一个提交按钮来更新数据库中的数据并发送电子邮件。但是，数据并未保存到数据库中。代码如下所示：

```
<?php
    if(isset($_POST['order_status']))
    {
    $dbhost = 'localhost';
    $dbuser = 'root';
    $dbpass = '';
    $conn = mysql_connect($dbhost, $dbuser, $dbpass);
    if(! $conn )
    {
    die('Could not connect: ' . mysql_error());
    }

    $orderno =$_POST['order_no'][$i];
    $status =$_POST['order_status'][$i];
    print_r($_POST['order_no']);
    $sql = 'UPDATE Orders SET status="' . $_POST['order_status'] . '" WHERE   Orderno="' .    $_POST['order_no'] . '"';

    mysql_select_db('PurchaseOrders');
    $retval = mysql_query( $sql, $conn );
    if(! $retval )
    {
    die('Could not update data: ' . mysql_error());
    }
    echo "Updated data successfully\n";
    mysql_close($conn);
    }
?>
<?php
    if(isset($_POST['order_selected']))
    {
    $keys = array_keys($_POST['order_selected']);

    foreach($keys as $key)
    {
        $to = $_POST['order_requested_by'][$key];
        $subject = "Order Form Approval";
        $message = "Your purchase order number: " . " " . $_POST['order_no'][$key] ."    ". "is" ." ". $_POST['order_status'][$key] ;
        $headers = "From: noreply@somewhere.com";
        $sent = mail($to, $subject, $message, $headers) ;
        if($sent)
        {header( 'Location: http://localhost/test/../' ) ; }
        else
        {print "We encountered an error sending your mail"; }
    }
}
?> 
```

在我的表单中，输入字段如下所示：

```
 echo '<td><input type="text" readonly=true name="order_supplier['.$i.']" value="' .    $row['Supplier'] . '"/></td>';
    echo '<td><input type="text" readonly=true name="order_total_price['.$i.']" value="' . $row['totalprice'] . '"/></td>';
    echo '<td><input type="text" readonly=true name="order_requested_by['.$i.']" value="' . $row['requestedby'] . '"/></td>';
    echo '<td>';
    echo '<select name="order_status['.$i.']" id="id" onchange="showUser(this.value)" >';
    echo '<option value = "Pending"   name="order_status['.$i.']" class = "pending"' . ($row['status'] == 'Pending' ? ' selected=selected' : '') . '>Pending</option>';
echo '<option value = "Approved"  name="order_status['.$i.']" class = "approved"' .     ($row['status'] == 'Approved' ? ' selected=selected' : '') . '>Approved</option>';
    echo '<option value = "Disapproved" name="order_status['.$i.']" class     ="disapproved"' . ($row['status'] == 'Disapproved' ? ' selected=selected' : '') . '>Disapproved</option>';
    echo '</select>'; 
```

我真的不知道为什么会这样。当我单击提交时，会出现一条消息，表明数据已成功输入数据库。但是没有输入数据。非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T14:41:33.083

好吧，我很惊讶它没有抛出错误..

```
echo '<select name="order_status['.$i.']" id="id" onchange="showUser(this.value)" > 
```

说

那`$_POST['order_status']`是一个数组..

所以，我建议你回显 $sql，我想你会明白为什么它没有更新你想的记录。

我猜它应该读

```
$sql = 'UPDATE Orders SET status="' .$status  '" WHERE   Orderno="' .$orderno ' . '"'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T14:58:17.857

您的 Sql 语句的“/”用法不正确。

值必须用 ' 而非 " 包围。

如果我们在您的查询中去掉您的变量，您有...

```
UPDATE Orders SET status="order_status" WHERE   Orderno="order_no" 
```

实际上它应该是：

```
UPDATE Orders SET status='order_status' WHERE   Orderno='order_no' 
```

将您的查询更改为：

```
$sql = "UPDATE Orders SET status='" . $_POST['order_status'] . "' WHERE   Orderno='" .    $_POST['order_no'] . "'"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T15:05:04.487

如果 $_POST['order_no'] 是一个数组，则查询格式错误，这适用于所有作为数组的 postdata。那就是如果你在你的 html 中有这样的东西：

```
<input type="text" name="order_no[]" />
<input type="text" name="order_no[]" />
<input type="text" name="order_no[]" /> 
```

然后 $_POST['order_no'] 将有多个值和你的 sql 字符串：

```
$sql = 'UPDATE Orders SET status="' . $_POST['order_status'] . '" WHERE   Orderno="' . $_POST['order_no'] . '"'; 
```

不会是正确的sql。

# java - 实例化基类扩展的问题

> ID：12514982
> 
> 赞同：0
> 
> 时间：2012-09-20T14:36:31.380
> 
> 标签：java, generics, inheritance, collections

我有一个空的抽象基类：

```
public abstract class base{ } 
```

和两个扩展它的类：

```
public class a extends base{}
public class b extends base{} 
```

在另一堂课中，我正在引用它：

```
public class it {

    List<base> list;
    list = new ArrayList<a>; 

    //getting an error above.
    // I thought I could do this?
} 
```

我应该尝试什么？我试图列出基类。然后根据情况，可以创建两个扩展类的列表。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T14:42:06.563

您可以像这样创建列表：

```
list = new ArrayList<base>(); 
```

此列表可以包含来自类型 a 和 b 的项目。例如以下是可以的

```
A a = new A().
list.add(a); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-20T14:42:28.507

`List<base>`并且`List<a>`在任何类层次结构中都不相同或相关。仅仅因为两个集合中元素的类型相关并不能使集合实例相关。

您可以将 的衍生类添加`base`到同一`List<base>`实例：

```
List<base> list = new ArrayList<base>();

list.add(new a());
list.add(new b()); 
```

请参阅Java 教程中的[泛型和子类型。](http://docs.oracle.com/javase/tutorial/extra/generics/subtype.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T14:44:47.380

`List<Base>`和`List<A>`不同的类型。他们没有继承关系。

但是你可以这样声明：

```
List<? extends base> list;

list = new ArrayList<a> 
```

参见《Effective Java》泛型类型。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T14:49:13.050

此代码不起作用的原因是，虽然所有`a`实例都是`base`实例，但并非所有`base`实例都是`a`实例（例如`b`）。

具体来说，`List<base>`意味着您可以将实例添加到列表中`a`：`b`

```
List<base> bases = new ArrayList<base>();
bases.add(new a());
bases.add(new b()); 
```

这将正确编译，因为`bases`其中的所有内容都是`base`.

另一方面，如果 Java 允许您使用您的代码：

```
List<base> bases = new ArrayList<a>();
bases.add(new a());
bases.add(new b()); 
```

添加`b`会将其添加到仅应接受`a`实例的内容中。因此，Java 通过禁止编译该语句来防止这种情况。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T15:48:54.260

如果我想做这样的事情怎么办：

```
List<b> getBList(){

  if (baseList instanceof b ){
      return (List<b>) baseList<base>;
  }
  else return null;

} 
```

# php - 在 PHP 中解码挪威字符

> ID：12514984
> 
> 赞同：0
> 
> 时间：2012-09-20T14:36:36.130
> 
> 标签：php, string, url, char, decode

我想知道如何在 PHP 中解码挪威字符，我使用了 rawurldecode() 但它返回错误，字符串如下：

```
%C3%98yvind 
```

它应该被解码为

```
Øyvind 
```

但是我找不到一种可靠的方法来将其解码为上述内容，是否有一种公平的方法可以在这里使用 mb_string 函数？

# ruby - 使用 firefox 找不到带有 watir 的按钮

> ID：12514985
> 
> 赞同：0
> 
> 时间：2012-09-20T14:36:36.070
> 
> 标签：ruby, watir, watir-webdriver, testwise, testwise-recorder

尝试了多种变体。甚至使用 Testwise 3 记录器来看看它是否想出了一些不同的东西。出于某种原因，我无法等待单击此确定按钮。它只是一直说 assert_exists ：无法定位元素。我正在使用 Firefox 15。

$browser.button(:value,"OK").click

想法？

```
<TABLE  BORDER="0" CELLPADDING="1" CELLSPACING="4" summary="">
<TR>
<TD><INPUT TYPE="BUTTON" VALUE="OK"     onClick="javascript:buttonSubmit('OK')" CLASS="OraButton"></TD>
<TD><INPUT TYPE="BUTTON" VALUE="Cancel" onClick="javascript:buttonSubmit('CANCEL')" CLASS="OraButton"></TD>
</TR>
</TABLE> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T15:18:04.090

在查找输入的类型属性值时，看起来 watir-webdriver（或 selenium-webdriver）区分大小写。

我可以通过修复 HTML 来让它工作：

```
<INPUT TYPE="button" VALUE="OK" onClick="javascript:buttonSubmit('OK')" CLASS="OraButton"> 
```

或使用 xpath 定位器：

```
$browser.button(:xpath, '//INPUT[@TYPE="BUTTON"]').click 
```

# css - 维护最新的响应式媒体查询资源？

> ID：12514989
> 
> 赞同：1
> 
> 时间：2012-09-20T14:36:57.947
> 
> 标签：css, responsive-design, media-queries

网络上有很多关于响应式设计的文章，以及如何使用 css 媒体查询来实现您的目标。然而，它们中的大多数似乎是在 2011 年编写的，当时响应式设计开始流行。

自 2011 年以来，市场上已经发布了许多不同的设备，它们具有多种设备宽度和各种 ppi，2011 年的媒体查询不一定会涵盖。我主要指的是 Galaxy Note I/II 等大尺寸移动设备以及 7 英寸平板电脑，甚至是视网膜显示器等高 ppi 设备。

是否有任何资源可以维护最新的 css 媒体查询代码，这些代码将用于充分覆盖大多数设备的最佳实践方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T20:38:12.747

响应式设计*不仅仅是*“媒体查询”，响应式设计鼓励开发人员和设计师以各种可能的方式拥抱可访问性。

我强烈建议前往 twitter（因为这是所有精彩对话发生的地方）并立即创建一个帐户并关注这些了不起的人：@beep 之后没有特别的顺序：

*   [@beep](http://www.twitter.com/beep) - [Ethan Marcotte](http://ethanmarcotte.com/)，推广响应式设计的人。*   [@RWD](http://www.twitter.com/rwd) - Ethan Marcotte 的帐户，他在其中发布与响应式 Web 设计相关的内容。*   [@lukew](http://www.twitter.com/lukew) - 卢克 Wroblewski。*   [@brad_frost](http://www.twitter.com/brad_frost) -[布拉德弗罗斯特](http://www.bradfrostweb.com)。*   [@Trentwalton](http://www.twitter.com/trentwalton) -[特伦特沃尔顿](http://www.trentwalton.com)。*   [@adactio](http://www.twitter.com/adactio) -[杰里米·基思](http://www.adactio.com)。*   [@scottjhel -Scott](http://www.twitter.com/scottjhel) Jhel [，](http://scottjehl.com/) Picturefill 的创建者，一种用于响应式图像和其他一些很酷的东西的 polyfill。*   [@wilto](http://www.twitter.com/wilto) - 马特侯爵。*   [@smashingmag](http://www.twitter.com/smashingmag) - 粉碎杂志。*   [@grigs](http://www.twitter.com/grigs) -[杰森·格里格斯比](http://blog.cloudfour.com)。*   [@globalmoxie](http://www.twitter.com/globalmoxie) -[乔什·克拉克](http://globalmoxie.com/blog/index.shtml)。*   [@chriscoyier](http://www.twitter.com/chriscoyier) - [Chris](http://css-tricks.com) Coyier ，一切 CSS ..*   [@malarkey](http://www.twitter.com/malarkey) -[安迪克拉克](http://stuffandnonsense.co.uk/blog)。*   [@jordanmoore](http://www.twitter.com/jordanmoore) -[乔丹摩尔](http://jordanm.co.uk)。*   [@viljamis](http://www.twitter.com/viljamis) - [Viljami Salminen](http://viljamis.com)。

    我可能遗漏了一些人，但这是一个很好的起点！您一定会在一天中的任何时候遇到一些与响应式设计相关的良好对话或链接或文章。

    此外，他们几乎每天都在他们的网站上写关于响应式网页设计的文章，所以一定要检查一下。就在那儿，你有很多读物。

    一些不错的读物：
    [条件加载内容](http://adactio.com/journal/5414/)
    [响应式设计的条件加载](http://24ways.org/2011/conditional-loading-for-responsive-designs)
    [创建移动优先响应式 Web 设计](http://www.html5rocks.com/en/mobile/responsivedesign/)
    [EM 拥有它：比例媒体查询 FTW！](http://blog.cloudfour.com/the-ems-have-it-proportional-media-queries-ftw/)- 推荐阅读。
    [这是响应](http://responsive.rga.com/)式的 - 从整个网络收集的有关响应式网页设计的链接和内容的汇总，由 Brad Frost 策划。

    至于出版日期，它们是不相关的；如果内容过时或方法过时，作者很可能会删除它或相应地标记它。

    编辑：还有一些很好的工具来测试你的网站：
    [Responsive.is](http://responsive.is) - 测试你的设计在各种屏幕尺寸上的表现。
    [responsivepx.com](http://responsivepx.com) - 通过在“px”中输入屏幕宽度来准确了解您的设计在哪里中断。
    [pxtoem](http://pxtoem.com) - 将像素单位转换为 ems。
    [Izilla Media Query Debugger](http://mattstow.com/#izillamediaquerydebug) - 这个插件显示浏览器窗口的大小（有点像 responsivepx.com，但在本地工作）。
    [Opera Mobile Emulator](http://www.opera.com/developer/tools/mobile/) - 在 Opera Mobile 上测试您的网站。
    [Opera Mini Simulatr](http://www.opera.com/developer/tools/mini/) - 在 Opera Mini 上测试您的网站（适用于低端设备）。

    **请记住，不要*为*流行的屏幕尺寸设计！当您的设计中断时插入断点（媒体查询）。**相关： http: [//www.netmagazine.com/features/five-responsive-web-design-pitfalls-avoid](http://www.netmagazine.com/features/five-responsive-web-design-pitfalls-avoid)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T18:14:36.850

我知道没有这样的媒体查询库，原因如下：

响应式设计的最佳实践方法是在您的设计中使用媒体查询。一个适当的响应式站点应该根据用户的屏幕大小调整大小，并且当且仅当用户体验需要调整时，才应该使用媒体查询。

要找到设计的断点，请调整浏览器的大小，直到页面变得难以阅读、出现剪辑或其他一些 UI/UX 问题很明显。注意屏幕尺寸并对该断点进行必要的调整。

一些阅读： [http ://webdesignerwall.com/tutorials/setting-breakpoints-in-responsive-design](http://webdesignerwall.com/tutorials/setting-breakpoints-in-responsive-design)

如果您不想使用这种方法，您可以将框架视为最佳实践的来源。我喜欢和经常使用的一个是 Foundation [http://foundation.zurb.com](http://foundation.zurb.com)，还有其他像 Bootstrap [http://twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/)

这些都是出色的工具，但是您会发现自己退后一步并最终发现更适合您的设计的断点。Foundation 是启动项目的绝佳起点。

进一步阅读：

*   [http://bradfrostweb.com/blog/mobile/beyond-media-queries-anatomy-of-an-adaptive-web-design/](http://bradfrostweb.com/blog/mobile/beyond-media-queries-anatomy-of-an-adaptive-web-design/)
*   [http://bradfrostweb.com/blog/mobile/anatomy-of-a-mobile-first-responsive-web-design/](http://bradfrostweb.com/blog/mobile/anatomy-of-a-mobile-first-responsive-web-design/)
*   [http://www.simple-talk.com/author/edward-charbeneau/](http://www.simple-talk.com/author/edward-charbeneau/)
*   [http://www.lukew.com/ff/entry.asp?1562](http://www.lukew.com/ff/entry.asp?1562)
*   [http://www.lukew.com/ff/entry.asp?1485](http://www.lukew.com/ff/entry.asp?1485)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-20T20:34:45.780

来自 twitter 的 Bootstrap 对您来说可能是一个很好的起点。

[http://twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/)

# python - 监视脚本的 Python 线程

> ID：12514992
> 
> 赞同：0
> 
> 时间：2012-09-20T14:37:07.113
> 
> 标签：python, multithreading

我需要创建一个 python 脚本来监视另一个 python 脚本，特别是其中的一些变量。我正在考虑在执行此操作的“观察者脚本”中创建一个独立线程。该线程必须运行，直到“执行脚本”完成。也许所有这些都可以在一个大脚本（观察者+执行者）中完成，我现在真的不知道。

是否有可能在 Windows 中使用 python 来做到这一点？

# jquery - 将 ID 附加到 URL 的末尾

> ID：12514996
> 
> 赞同：0
> 
> 时间：2012-09-20T14:37:10.817
> 
> 标签：jquery, jquery-bbq

我设法根据 ID 将哈希标记附加到 URL，但是，它没有正确隐藏/显示 IE8 中的 DIV。此外，我注意到添加 .selected 类的 jQUery 部分无法正常运行。任何改变有人可以借给我一些专业知识吗？它在 Chrome/Firefox/Safari 中运行良好，但是，可怕的 IE 是一个顽固的骡子！

提前谢谢！

PS - 我使用了这里列出的方法：jqueryfordesigners.com/enabling-the-back-button/

这也是我正在使用的代码：

```
 jQuery(window).load(function () {
        var selectCont = jQuery('.selectCont > div');
        selectCont.hide().filter(':first').show();

        jQuery(window).bind('hashchange', function () {
        var hash = window.location.hash || '#clinicalfaculty';

        selectCont.hide();
        selectCont.filter(hash).show();
            e.preventDefault();

        jQuery('#selectBtn ul.btnNav a').removeClass('selected');
        jQuery('a[hash=' + hash + ']').addClass('selected');
        });
    jQuery(window).trigger('hashchange');
    }); 
```

**@Dan Puzey——**

对于那个很抱歉！我是stackoverflow的新手。

我正在使用的基本代码可以在这里找到：massgeneral.org/emergencymedicine/ourdoctors/EM-Listing.htm

我依赖的 ID 是：#clinicalfaculty、#researchfaculty 和 #fellows，可以在我刚才提到的 HTML 的第 34-36 行找到。当用户单击其中一个按钮（带有 ID）时，JavaScript 会隐藏与 ID 关联的其他两个 DIV，并显示用户单击的 ID。同时，带有 ID 名称的主题标签会附加到用户的“返回”功能。如您所见，在 Firefox 中，它完全按照应有的方式工作。但是，当您在 IE8 中加载它时，它无法正常工作。

就 .selected 而言，我希望能够将 .selected 类应用于单击的按钮以应用自定义样式以视觉通知用户该按钮已被选中并且与该按钮关联的内容当前是正在显示。但是， .selected 没有被正确地添加为一个类。我也不完全确定为什么。

我为正确操作过滤而编写的初始 jQuery 如下所示。但是，它没有附加 # 标签，也不支持使用“返回”按钮。

```
var index = 0, hash = window.location.hash;
    jQuery(window).load(function(){
        jQuery('#selectBtn a').click(function(e) {
        jQuery('.selectCont > div').hide();
        jQuery(this.hash).show();
            e.preventDefault(); //to prevent scrolling
    });
}); 
```

[参考链接](http://massgeneral.org/emergencymedicine/ourdoctors/default-new.aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:54:45.440

我不是 100% 确定您在编写了这么多自己的代码之后会想要迁移到这里，但是 History.js 为您完成了所有这些，并且是跨浏览器兼容的，它是一个非常棒的库，适合您'正在尝试实现，因为它是一个完整的 JavaScript 状态处理库。

[http://balupton.github.com/history.js/demo/](http://balupton.github.com/history.js/demo/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T17:15:40.180

Not sure if this is the fix but it appears that you've forgotten to pass the event argument into the haschange function. Change the signature to this.

```
jQuery(window).bind('hashchange', function (e) { ... }); 
```

# ios - iOS 模拟器 - 使用 TV Out 的技巧？

> ID：12514998
> 
> 赞同：0
> 
> 时间：2012-09-20T14:37:12.823
> 
> 标签：ios, video, simulator, out, television

我正在使用 xcode 4.3.1 中的 iOS 模拟器，而“TV Out”选项似乎没有起作用。我用各种模拟设备和电视分辨率尝试过，但总是黑屏。也许它不支持 iPad 2 和 3 附带的默认镜像？也就是说，当我将 VGA 电缆连接到实际的 iPad 2 时，我会很好地镜像“桌面”和我运行的任何应用程序。

可能模拟器只尊重屏幕 1 的显式视频输出？例如：

```
UIScreen*    secondScreen = [[UIScreen screens] objectAtIndex:1]; 
```

tia，猎户座

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T20:12:18.000

我发现[这个论坛帖子](http://iphonedevsdk.com/forum/iphone-sdk-tools-utilities/69546-tv-out-on-simulator-doesnt-really-work.html)指出模拟器的辅助屏幕上显示的风景有问题。

每次我测试输出到辅助屏幕时似乎都可以纵向工作，但不能横向工作。希望有帮助！

# axapta - 采购订单中的交易（订单类型：退货单）

> ID：12514999
> 
> 赞同：0
> 
> 时间：2012-09-20T14:37:15.933
> 
> 标签：axapta, dynamics-ax-2009

当我发出采购订单（类型：采购订单）并发布装箱单时，Ax 会生成如下交易：

```
Account:  253   debit:100   (packing slip account)
Account: 6133   credit:100  (packing slip offsetaccount) 
```

当我发布发票时，它会生成以下交易：

```
Account: 6033    debit:100  (inventory account)
Account: 40111   debit:18   (Tax)<br>
Account: 4212    credit:118 (providers) 
```

但是当我制作采购订单类型“退货订单”时，因为我要向供应商退货。

我张贴装箱单，Ax 生成如下交易：

```
Account: 253  credit:100  (packing slip account (TPS))
Account: 6133 debit:100   (packing slip offsetaccount (TPS)) 
```

当我张贴发票生成此交易：

```
Account: 253    debit:  100   (packing slip account) (Invert of TPS)
Account: 6133   credit: 100   (packing slip offsetaccount) (Invert of TPS)
Account: 6033   credit: 100  (inventory account)
Account: 40111  credit:  18   (Tax)
Account: 4212   debit:  118   (providers) 
```

当我创建“退货订单”类型的采购订单时，为什么 Ax 在我过帐发票时会生成这 2 个交易（TPS 反转）？

有可能不生成这两个交易吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:13:12.817

我看不出两笔交易的问题。

当您下订单时，前两个交易分别借记和贷记两个帐户 253 和 6133。当您发出退货单时，前两笔交易必须颠倒，即在相同的两个账户 253 和 6133 上分别存在（反向）贷记和借记交易。

如果没有创建这些反向交易，那么分类帐帐户将是错误的。

并回答您的问题：是的，您可以覆盖代码中的标准发布机制。但在这种情况下你不应该这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T09:01:07.497

这可能是应用程序错误。

人为什么会犯错误？因为他们是人。

原因？尝试[调试](https://stackoverflow.com/questions/9888533/debug-on-server-side)。

可以关闭装箱单过帐，请参阅应付帐款\设置\参数，标签页更新，字段“在分类帐中过帐装箱单”。