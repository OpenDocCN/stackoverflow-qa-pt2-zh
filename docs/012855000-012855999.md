# StackOverflow 问答 12855000-12855999

# bash - bash将EOF重定向到变量

> ID：12855000
> 
> 赞同：2
> 
> 时间：2012-10-12T08:24:28.430
> 
> 标签：bash, redirect, var, eof

这是我的文件 perl5lib.sh：

```
export PERL5LIB=`cat |tr '\n' ':'`<<EOF
/home/vul/repository/projects/implatform/daemon/trunk/lib/
/home/vul/repository/projects/platformlib/tool/trunk/cpan_lib
/home/projects/libtrololo 
```

我想开始文件

```
. perl5lib.sh 
```

填充`PERL5LIB`变量，但它挂起。怎么了？我的目标是在文件末尾留下文件夹名称，所以我可以简单地添加新的：

```
echo dirname >> myscript 
```

我已经尝试过，`export PERL5LIB=$(echo blabla)`并且`cat<<EOF`两者都单独工作，但不能一起工作。

=================== 解决方案=============================

# 功能做的伎俩！

```
function fun
{
     export PERL5LIB=`cat|tr '\n' ':'`
}
fun<<EOF
/dir1/lib
/dir2/lib
/dir3/lib
EOF 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T08:41:25.380

您所谓的“EOF”可以用 Google 搜索为*[Here Document](http://tldp.org/LDP/abs/html/here-docs.html)*。*这里的 Document*只能用于提供命令的标准输入。下面的示例在不产生子进程的情况下执行您想要的操作

```
#!/bin/bash

multilineconcat=
while read line; do
  #echo $line
  multilineconcat+=$line
  multilineconcat+=":"
done << EOF
path1
path2
EOF

echo $multilineconcat 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T08:34:11.473

`cat`在这里没用。在子shell内部提供`EOF`：

```
#! /bin/bash
export PERL5LIB=$(tr '\n' ':'<<EOF
/home/vul/repository/projects/implatform/daemon/trunk/lib/
/home/vul/repository/projects/platformlib/tool/trunk/cpan_lib
/home/projects/libtrololo
EOF
) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T08:26:56.393

不是在等待`EOF`你的heredoc 吗？

我希望你说

```
$ mycommand <<EOF
input1
input2
...
EOF 
```

请注意，这`EOF`不是魔术关键字。它只是一个标记，可以是任何东西（`ABC`等等）。它表示文件结束，但人们只是`EOF`按照惯例写。

# sql - 连接表上的子查询

> ID：12855006
> 
> 赞同：1
> 
> 时间：2012-10-12T08:24:40.970
> 
> 标签：sql, subquery

我正在写的查询需要一点帮助。我把它分解成最简单的形式。我的表结构示例如下所示（为清楚起见，我对其进行了更改）：

```
Users
    UserId int -- PK Identity
    Username    varchar(30)

DirectReports
    DirectReportId  int -- PK Identity
    UserId int -- FK to Users.UserId
    ManagerId -- FK to Users.UserId

Documents
    DocumentId int -- PK Identity
    DocumentOwner int -- FK to Users.UserId
    DocumentName varchar(30)
    CreatedBy int -- FK to Users.UserId
    CreatedDate datetime 
```

我需要做的是让创建文档的用户能够看到他们自己的文档。所以我使用：

```
CREATE PROCEDURE GetUsersDocuments
    @UserId         INT = null
AS
BEGIN

    SET NOCOUNT ON;

    Select * from Documents D
    Where D.CreatedBy = ISNULL(@UserId, D.CreatedBy)
END 
```

它返回由特定用户创建的所有文档。

然而，模型的业务规则也规定另一个用户可以代表用户创建文档。因此，用户需要查看自己创建的所有记录以及他们拥有的所有文档：

```
CREATE PROCEDURE GetUsersDocuments
    @UserId         INT = null
AS
BEGIN

    SET NOCOUNT ON;

    Select * from Documents D
    Where D.CreatedBy = ISNULL(@UserId, D.CreatedBy)
    OR D.DocumentOwner = ISNULL(@UserId, D.DocumentOwner)
END 
```

一切正常。但是，我刚刚被告知，用户的所有直接下属都应该可以看到用户创建的文档和用户拥有的文档。

给定我定义的示例表结构，我将如何用查询来表达这一点？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T08:28:39.003

```
Select * from Documents D 
Where D.CreatedBy = ISNULL(@UserId, D.CreatedBy) 
    OR D.DocumentOwner = ISNULL(@UserId, D.DocumentOwner)  
    OR D.DocumentOwner = ( select ManagerID from DirectReports where @UserId = UserID) 
```

# google-app-engine - 查询 JDO 实体在 GAE 中不起作用

> ID：12855011
> 
> 赞同：1
> 
> 时间：2012-10-12T08:25:13.797
> 
> 标签：google-app-engine, jdo, datanucleus

我试图在谷歌应用引擎中使用数据存储。我能够使对象持久化并可以通过 id 检索它。但我无法查询。

这是我的实体：

```
package my.company.domain;

import javax.jdo.annotations.IdGeneratorStrategy;
import javax.jdo.annotations.PersistenceCapable;
import javax.jdo.annotations.Persistent;
import javax.jdo.annotations.PrimaryKey;

@PersistenceCapable(detachable="true")
public class User {

    @PrimaryKey
    @Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
    long key;   

    @Persistent
    private String name;

    @Persistent
    private String password;

    @Persistent
    private boolean adminPrivileges;

//getters & setters
} 
```

我的单元测试：

```
public void persistAndFindUserTest(){

        User user = new User();
        user.setName(johnDoe");
        user.setPassword("password");

        UserService userService = new DefaultUserService();
        user = userService.createUserInDatabase(user);

        User userFromPersistence = userService.getUserById(user.getKey());
        Assert.assertEquals(user.getName(), userFromPersistence.getName());

        Assert.assertNotNull(userService.findUserByName("johnDoe"));
} 
```

findUserByName 的定义如下：

```
public List<User> findUserByEmail(String email){
        PersistenceManager persistenceManager = PMF.get()
                .getPersistenceManager();

        Query q = persistenceManager.newQuery(User.class);
        q.setFilter("email == emailParam");
        q.declareParameters("String emailParam");
    q.setUnique(false);

        List<User> results = null;
        try {
            results = (List<User>) q.execute(email);
        } finally {
            results = (List<User>)persistenceManager.detachCopyAll(results);
            q.closeAll();
        }
        return results;
    } 
```

发生以下异常（第 116 行是我尝试分离结果列表的位置）：

```
java.lang.NullPointerException
    at com.google.appengine.datanucleus.query.QueryEntityPKFetchFieldManager.fetchLongField(QueryEntityPKFetchFieldManager.java:74)
    at org.datanucleus.identity.IdentityUtils.getApplicationIdentityForResultSetRow(IdentityUtils.java:101)    
    at com.google.appengine.datanucleus.EntityUtils.entityToPojo(EntityUtils.java:1009)
    at com.google.appengine.datanucleus.query.DatastoreQuery$2.apply(DatastoreQuery.java:227)
    at com.google.appengine.datanucleus.query.DatastoreQuery$2.apply(DatastoreQuery.java:224)
    at com.google.appengine.datanucleus.query.LazyResult.resolveNext(LazyResult.java:96)
    at com.google.appengine.datanucleus.query.LazyResult$LazyAbstractListIterator.computeNext(LazyResult.java:229)
    at com.google.appengine.datanucleus.query.AbstractIterator.tryToComputeNext(AbstractIterator.java:131)
    at com.google.appengine.datanucleus.query.AbstractIterator.hasNext(AbstractIterator.java:126)
    at com.google.appengine.datanucleus.query.LazyResult$AbstractListIterator.hasNext(LazyResult.java:183)
    at org.datanucleus.api.jdo.JDOPersistenceManager.detachCopyAll(JDOPersistenceManager.java:1213)
    at ch.mttb.clientmanagement.service.impl.DefaultUserService.findUserByEmail(DefaultUserService.java:116)
    at ch.mttb.clientmanagement.service.test.UserServiceTest.persistUserTest(UserServiceTest.java:44)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30)
    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

我使用来自 GAE SDK 1.7.2 的 jar，datanucleus jar 如下：

datanucleus-api-jdo-3.1.0-m3.jar datanucleus-api-jpa-3.1.0-m3.jar datanucleus-appengine-2.1.0-final.jar datanucleus-core3.1.0-m5.jar

我的 enhancer.log 文件仍然是空的。我将 Logging 配置如下：将 log4j.properites 和 WEB-INF 将 log4j-1.2.17.jar 放入构建路径

log4j.properties：

```
log4j.appender.A1=org.apache.log4j.ConsoleAppender
log4j.appender.A1.layout=org.apache.log4j.PatternLayout
log4j.appender.A1.layout.ConversionPattern=%d{HH:mm:ss,SSS} %-5p [%c] - %m%n

log4j.category.DataNucleus.JDO=WARN, A1
log4j.category.DataNucleus.Persistence=WARN, A1
log4j.category.DataNucleus.Cache=WARN, A1
log4j.category.DataNucleus.MetaData=WARN, A1
log4j.category.DataNucleus.General=WARN, A1
log4j.category.DataNucleus.Utility=WARN, A1
log4j.category.DataNucleus.Transaction=WARN, A1
log4j.category.DataNucleus.Datastore=WARN, A1
log4j.category.DataNucleus.ClassLoading=WARN, A1
log4j.category.DataNucleus.Plugin=WARN, A1
log4j.category.DataNucleus.ValueGeneration=WARN, A1
log4j.category.DataNucleus.Enhancer=WARN, A1
log4j.category.DataNucleus.SchemaTool=WARN, A1 
```

我正在使用日食朱诺。

运行 junit 测试时的日志输出：

```
18:3811,450 DEBUG [DataNucleus.Plugin] - Plugin Registry "org.datanucleus.plugin.EclipsePluginRegistry" not found. Falling back to DataNucleus registry. Reason : Class "org.eclipse.core.runtime.RegistryFactory" was not found in the CLASSPATH. Please check your specification and your CLASSPATH..
18:3811,452 DEBUG [DataNucleus.Plugin] - Using PluginRegistry org.datanucleus.plugin.NonManagedPluginRegistry
18:3811,464 DEBUG [DataNucleus.Plugin] - Registering bundle org.datanucleus.api.jpa version 3.1.0.m3 at URL file:/C:/eclipse/plugins/com.google.appengine.eclipse.sdkbundle_1.7.2.1/appengine-java-sdk-1.7.2.1/lib/opt/user/datanucleus/v2/datanucleus-api-jpa-3.1.0-m3.jar.
18:3811,471 DEBUG [DataNucleus.Plugin] - Loading extension points from plug-in file jar:file:/C:/eclipse/plugins/com.google.appengine.eclipse.sdkbundle_1.7.2.1/appengine-java-sdk-1.7.2.1/lib/opt/user/datanucleus/v2/datanucleus-api-jpa-3.1.0-m3.jar!/plugin.xml.
18:3811,472 DEBUG [DataNucleus.Plugin] - Loading extensions from plug-in file jar:file:/C:/eclipse/plugins/com.google.appengine.eclipse.sdkbundle_1.7.2.1/appengine-java-sdk-1.7.2.1/lib/opt/user/datanucleus/v2/datanucleus-api-jpa-3.1.0-m3.jar!/plugin.xml.
18:3811,476 DEBUG [DataNucleus.Plugin] - Registering bundle org.datanucleus version 3.1.0.m5 at URL file:/C:/eclipse/plugins/com.google.appengine.eclipse.sdkbundle_1.7.2.1/appengine-java-sdk-1.7.2.1/lib/opt/user/datanucleus/v2/datanucleus-core-3.1.0-m5.jar.
18:3811,506 DEBUG [DataNucleus.Plugin] - Loading extension points from plug-in file jar:file:/C:/eclipse/plugins/com.google.appengine.eclipse.sdkbundle_1.7.2.1/appengine-java-sdk-1.7.2.1/lib/opt/user/datanucleus/v2/datanucleus-core-3.1.0-m5.jar!/plugin.xml.
18:3811,535 DEBUG [DataNucleus.Plugin] - Loading extensions from plug-in file jar:file:/C:/eclipse/plugins/com.google.appengine.eclipse.sdkbundle_1.7.2.1/appengine-java-sdk-1.7.2.1/lib/opt/user/datanucleus/v2/datanucleus-core-3.1.0-m5.jar!/plugin.xml.
18:3811,540 DEBUG [DataNucleus.Plugin] - Registering bundle com.google.appengine.datanucleus version 2.1.0 at URL file:/C:/eclipse/plugins/com.google.appengine.eclipse.sdkbundle_1.7.2.1/appengine-java-sdk-1.7.2.1/lib/opt/user/datanucleus/v2/datanucleus-appengine-2.1.0-final.jar.
18:3811,549 DEBUG [DataNucleus.Plugin] - Loading extension points from plug-in file jar:file:/C:/eclipse/plugins/com.google.appengine.eclipse.sdkbundle_1.7.2.1/appengine-java-sdk-1.7.2.1/lib/opt/user/datanucleus/v2/datanucleus-appengine-2.1.0-final.jar!/plugin.xml.
18:3811,554 DEBUG [DataNucleus.Plugin] - Loading extensions from plug-in file jar:file:/C:/eclipse/plugins/com.google.appengine.eclipse.sdkbundle_1.7.2.1/appengine-java-sdk-1.7.2.1/lib/opt/user/datanucleus/v2/datanucleus-appengine-2.1.0-final.jar!/plugin.xml.
18:3811,558 DEBUG [DataNucleus.Plugin] - Registering bundle org.datanucleus.api.jdo version 3.1.0.m3 at URL file:/C:/eclipse/plugins/com.google.appengine.eclipse.sdkbundle_1.7.2.1/appengine-java-sdk-1.7.2.1/lib/opt/user/datanucleus/v2/datanucleus-api-jdo-3.1.0-m3.jar.
18:3811,564 DEBUG [DataNucleus.Plugin] - Loading extension points from plug-in file jar:file:/C:/eclipse/plugins/com.google.appengine.eclipse.sdkbundle_1.7.2.1/appengine-java-sdk-1.7.2.1/lib/opt/user/datanucleus/v2/datanucleus-api-jdo-3.1.0-m3.jar!/plugin.xml.
18:3811,567 DEBUG [DataNucleus.Plugin] - Loading extensions from plug-in file jar:file:/C:/eclipse/plugins/com.google.appengine.eclipse.sdkbundle_1.7.2.1/appengine-java-sdk-1.7.2.1/lib/opt/user/datanucleus/v2/datanucleus-api-jdo-3.1.0-m3.jar!/plugin.xml.
18:3811,587 INFO  [DataNucleus.Persistence] - Property datanucleus.appengine.singletonPMFForName unknown - will be ignored
18:3811,587 INFO  [DataNucleus.Persistence] - Property datanucleus.appengine.autoCreateDatastoreTxns unknown - will be ignored
18:3811,602 DEBUG [DataNucleus.Persistence] - Java types support initialising ...
18:3811,603 DEBUG [DataNucleus.Persistence] - Java type [B (persistent=true, DFG=true, embedded=true)
18:3811,604 DEBUG [DataNucleus.Persistence] - Java type [C (persistent=true, DFG=true, embedded=true)
18:3811,604 DEBUG [DataNucleus.Persistence] - Java type [D (persistent=true, DFG=true, embedded=true)
18:3811,604 DEBUG [DataNucleus.Persistence] - Java type [F (persistent=true, DFG=true, embedded=true)
18:3811,604 DEBUG [DataNucleus.Persistence] - Java type [I (persistent=true, DFG=true, embedded=true)
18:3811,604 DEBUG [DataNucleus.Persistence] - Java type [J (persistent=true, DFG=true, embedded=true)
18:3811,604 DEBUG [DataNucleus.Persistence] - Java type [S (persistent=true, DFG=true, embedded=true)
18:3811,604 DEBUG [DataNucleus.Persistence] - Java type [Z (persistent=true, DFG=true, embedded=true)
18:3811,605 DEBUG [DataNucleus.Persistence] - Java type [Ljava.lang.Boolean; (persistent=true, DFG=true, embedded=true)

same for many types

18:3811,651 DEBUG [DataNucleus.Persistence] - Java type [Lcom.google.appengine.api.users.User; (persistent=true, DFG=true, embedded=true)

same for typed Collections, Lists and Sets

18:3811,659 DEBUG [DataNucleus.Persistence] - Java types support loaded
18:3811,659 DEBUG [DataNucleus.Persistence] - Type converter support initialising ...
18:3811,660 DEBUG [DataNucleus.Persistence] - Added converter for java.math.BigDecimal<->java.lang.String using org.datanucleus.store.types.converters.BigDecimalStringConverter

lot more converters added...

18:3811,667 DEBUG [DataNucleus.Persistence] - Added converter for java.util.UUID<->java.lang.String using org.datanucleus.store.types.converters.UUIDStringConverter
18:3811,667 DEBUG [DataNucleus.Persistence] - TypeConverter for javax.time.calendar.LocalDate<->java.lang.String ignored since java type not present in CLASSPATH
18:3811,668 DEBUG [DataNucleus.Persistence] - TypeConverter for javax.time.calendar.LocalTime<->java.lang.String ignored since java type not present in CLASSPATH
18:3811,669 DEBUG [DataNucleus.Persistence] - TypeConverter for javax.time.calendar.LocalTime<->java.lang.Long ignored since java type not present in CLASSPATH
18:3811,669 DEBUG [DataNucleus.Persistence] - TypeConverter for javax.time.calendar.LocalDateTime<->java.lang.String ignored since java type not present in CLASSPATH
18:3811,669 DEBUG [DataNucleus.Persistence] - Type converter support loaded
18:3811,670 DEBUG [DataNucleus.MetaData] - MetaDataManager : Input=(XML,Annotations), XML-Validation=false, XML-Suffices=(persistence=*.jdo, orm=orm, query=*.jdoquery), JDO-listener=true
18:3811,670 DEBUG [DataNucleus.MetaData] - Registering listener for metadata initialisation
18:3811,674 DEBUG [DataNucleus.MetaData] - Listener found initialisation for persistable class my.company.domain.User
18:3811,676 DEBUG [DataNucleus.MetaData] - MetaData of type "jdo" for class "my.company.domain.User" NOT found at /META-INF/package.jdo

same for many different locations

18:3811,724 DEBUG [DataNucleus.MetaData] - Class "my.company.domain.User" has been specified with JDO annotations so using those.
18:3811,743 DEBUG [DataNucleus.MetaData] - Populating Meta-Data for class my.company.domain.User.
18:3811,743 DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "my.company.domain.User" NOT found at /META-INF/package.orm

same for many different locations

18:3811,755 DEBUG [DataNucleus.Datastore] - Creating StoreManager for datastore
18:3811,772 DEBUG [DataNucleus.Connection] - Registered transactional connection factory under name "appengine"
18:3811,773 DEBUG [DataNucleus.Connection] - Registered nontransactional connection factory under name "appengine-nontx"
18:3811,804 DEBUG [DataNucleus.Datastore] - ======================= Datastore =========================
18:3811,805 DEBUG [DataNucleus.Datastore] - StoreManager : "appengine" (com.google.appengine.datanucleus.DatastoreManager)
18:3811,805 DEBUG [DataNucleus.Datastore] - AutoStart : mechanism=None, mode=Quiet
18:3811,805 DEBUG [DataNucleus.Datastore] - Datastore : read-write
18:3811,805 DEBUG [DataNucleus.Datastore] - Schema Control : AutoCreate(None), Validate(None)
18:3811,805 DEBUG [DataNucleus.Datastore] - Query Languages : [JDOQL, JPQL]
18:3811,805 DEBUG [DataNucleus.Datastore] - Queries : Timeout=0
18:3811,805 DEBUG [DataNucleus.Datastore] - ===========================================================
18:3811,805 DEBUG [DataNucleus.Datastore] - StorageVersion : READ_OWNED_CHILD_KEYS_FROM_PARENTS
18:3811,805 DEBUG [DataNucleus.Datastore] - Default Relation Mode : owned
18:3811,805 DEBUG [DataNucleus.Datastore] - ===========================================================
18:3811,819 DEBUG [DataNucleus.Datastore] - StoreManager now created
18:3811,819 DEBUG [DataNucleus.Persistence] - ================= Persistence Configuration ===============
18:3811,819 DEBUG [DataNucleus.Persistence] - DataNucleus Persistence Factory - Vendor: "DataNucleus"  Version: "3.1.0.m5"
18:3811,819 DEBUG [DataNucleus.Persistence] - DataNucleus Persistence Factory initialised for datastore URL="appengine" driver="" userName=""
18:3811,819 DEBUG [DataNucleus.Persistence] - JDK : 1.7.0_05 on Windows 7
18:3811,819 DEBUG [DataNucleus.Persistence] - Persistence API : JDO
18:3811,819 DEBUG [DataNucleus.Persistence] - Plugin Registry : org.datanucleus.plugin.NonManagedPluginRegistry
18:3811,820 DEBUG [DataNucleus.Persistence] - Standard Options : pm-singlethreaded, retain-values, nontransactional-read, nontransactional-write, serverTimeZone=UTC
18:3811,820 DEBUG [DataNucleus.Persistence] - Persistence Options : reachability-at-commit managed-relations(checked) deletion-policy=JDO2
18:3811,820 DEBUG [DataNucleus.Persistence] - Transactions : type=RESOURCE_LOCAL mode=datastore isolation=read-committed
18:3811,820 DEBUG [DataNucleus.Persistence] - Value Generation : txn-isolation=read-committed connection=New
18:3811,820 DEBUG [DataNucleus.Persistence] - ClassLoading : jdo
18:3811,820 DEBUG [DataNucleus.Persistence] - Cache : Level1 (soft), Level2 (soft, mode=UNSPECIFIED), QueryResults (soft), Collections/Maps 
18:3811,820 DEBUG [DataNucleus.Persistence] - ===========================================================
18:3811,823 DEBUG [DataNucleus.Cache] - Level 2 Cache of type "soft" initialised
18:3811,849 DEBUG [DataNucleus.Persistence] - Implementation creator not configured. Due to that, support for 'persistent interfaces' ("PersistenceManager.newInstance()") was disabled!
18:3811,851 DEBUG [DataNucleus.Cache] - Level 1 Cache of type "soft" initialised
18:3811,855 DEBUG [DataNucleus.Persistence] - Object Manager "org.datanucleus.ObjectManagerImpl@3e5b3b80" opened for datastore "com.google.appengine.datanucleus.DatastoreManager@579f707b" with txn="org.datanucleus.TransactionImpl@2491c82e"
18:3811,859 DEBUG [DataNucleus.MetaData] - Initialising Meta-Data for class my.company.domain.User.
18:3811,860 DEBUG [DataNucleus.Persistence] - Making object persistent : "my.company.domain.User@78871dc5"
18:3811,882 INFO  [DataNucleus.MetaData] - Performing appengine-specific metadata validation for my.company.domain.User
18:3811,883 INFO  [DataNucleus.MetaData] - Finished performing appengine-specific metadata validation for my.company.domain.User
18:3811,904 DEBUG [DataNucleus.Persistence] - Managing Persistence of Class : my.company.domain.User [Table : my.company.domain.User, InheritanceStrategy : new-table]
18:3811,918 DEBUG [DataNucleus.Connection] - Created ManagedConnection using DatastoreService = com.google.appengine.api.datastore.DatastoreServiceImpl@79e479a3
18:3811,919 DEBUG [DataNucleus.Connection] - Connection added to the pool : com.google.appengine.datanucleus.DatastoreConnectionFactoryImpl$DatastoreManagedConnection@7303d690 for key=org.datanucleus.ObjectManagerImpl@3e5b3b80 in factory=ConnectionFactory:nontx[com.google.appengine.datanucleus.DatastoreConnectionFactoryImpl@fbc2ee]
18:3811,921 DEBUG [DataNucleus.Datastore.Native] - Putting entity of kind User with key User(no-id-yet) as {tenantId[0], password[password], name[johnDoe], adminPrivileges[false], key[0], }
Okt 11, 2012 6:38:11 PM com.google.appengine.api.datastore.dev.LocalDatastoreService init
INFO: Local Datastore initialized: 
    Type: Master/Slave
    Storage: In-memory
18:3812,064 DEBUG [DataNucleus.Cache] - Object "my.company.domain.User@78871dc5" (id="my.company.domain.User:1") added to Level 1 cache (loadedFlags="[YYYYY]")
18:3812,064 DEBUG [DataNucleus.Connection] - Connection found in the pool : com.google.appengine.datanucleus.DatastoreConnectionFactoryImpl$DatastoreManagedConnection@7303d690 for key=org.datanucleus.ObjectManagerImpl@3e5b3b80 in factory=ConnectionFactory:nontx[com.google.appengine.datanucleus.DatastoreConnectionFactoryImpl@fbc2ee]
18:3812,064 DEBUG [DataNucleus.Persistence] - ObjectManager.internalFlush() process started using ordered flush - 1 dirty objects
18:3812,066 DEBUG [DataNucleus.Cache] - Query Cache of type "org.datanucleus.query.cache.SoftQueryCompilationCache" initialised
18:3812,067 DEBUG [DataNucleus.Cache] - Query Cache of type "org.datanucleus.store.query.cache.SoftQueryDatastoreCompilationCache" initialised
18:3812,068 DEBUG [DataNucleus.Cache] - Query Cache of type "org.datanucleus.store.query.cache.SoftQueryResultsCache" initialised
18:3812,068 DEBUG [DataNucleus.Persistence] - ObjectManager.internalFlush() process finished
18:3812,070 DEBUG [DataNucleus.Cache] - Object "my.company.domain.User@78871dc5" (id="1") added to Level 2 cache (fields="[0, 1, 2, 3, 4]", version="")
18:3812,070 DEBUG [DataNucleus.Lifecycle] - Object "my.company.domain.User@78871dc5" (id="my.company.domain.User:1") has a lifecycle change : "P_NEW"->"P_NONTRANS"
18:3812,070 DEBUG [DataNucleus.Transaction] - Object "my.company.domain.User@78871dc5" (id="my.company.domain.User:1") being evicted from transactional cache
18:3812,071 DEBUG [DataNucleus.Persistence] - Detaching copy of object : "my.company.domain.User@78871dc5" (depth=0) - will be "my.company.domain.User@43ae24e3"
18:3812,073 DEBUG [DataNucleus.Connection] - Connection found in the pool : com.google.appengine.datanucleus.DatastoreConnectionFactoryImpl$DatastoreManagedConnection@7303d690 for key=org.datanucleus.ObjectManagerImpl@3e5b3b80 in factory=ConnectionFactory:nontx[com.google.appengine.datanucleus.DatastoreConnectionFactoryImpl@fbc2ee] but owner object closing so closing connection
18:3812,073 DEBUG [DataNucleus.Connection] - Connection removed from the pool : com.google.appengine.datanucleus.DatastoreConnectionFactoryImpl$DatastoreManagedConnection@7303d690 for key=org.datanucleus.ObjectManagerImpl@3e5b3b80 in factory=ConnectionFactory:nontx[com.google.appengine.datanucleus.DatastoreConnectionFactoryImpl@fbc2ee]
18:3812,073 DEBUG [DataNucleus.Persistence] - Disconnecting my.company.domain.User@78871dc5 from StateManager[pc=my.company.domain.User@78871dc5, lifecycle=P_NONTRANS]
18:3812,073 DEBUG [DataNucleus.Cache] - Object with id="my.company.domain.User:1" being removed from Level 1 cache [current cache size = 1]
18:3812,073 DEBUG [DataNucleus.Cache] - Level 1 Cache cleared
18:3812,074 DEBUG [DataNucleus.Persistence] - Object Manager "org.datanucleus.ObjectManagerImpl@3e5b3b80" closed
18:3812,075 DEBUG [DataNucleus.Cache] - Level 1 Cache of type "soft" initialised
18:3812,075 DEBUG [DataNucleus.Persistence] - Object Manager "org.datanucleus.ObjectManagerImpl@1f6aa236" opened for datastore "com.google.appengine.datanucleus.DatastoreManager@579f707b" with txn="org.datanucleus.TransactionImpl@11bf9757"
18:3812,077 DEBUG [DataNucleus.Cache] - Object with id "my.company.domain.User:1" not found in Level 1 cache [cache size = 0]
18:3812,077 DEBUG [DataNucleus.Cache] - Object "my.company.domain.User@6ccc45d2" (id="my.company.domain.User:1") added to Level 1 cache (loadedFlags="[NNYNN]")
18:3812,079 DEBUG [DataNucleus.Cache] - Object with id="my.company.domain.User:1" taken from Level 2 cache (fields="[0, 1, 2, 3, 4]", version="") - represented as "my.company.domain.User@6ccc45d2"
18:3812,079 DEBUG [DataNucleus.Lifecycle] - Object "my.company.domain.User@6ccc45d2" (id="my.company.domain.User:1") has a lifecycle change : "P_CLEAN"->"P_NONTRANS"
18:3812,079 DEBUG [DataNucleus.Transaction] - Object "my.company.domain.User@6ccc45d2" (id="my.company.domain.User:1") being evicted from transactional cache
18:3812,079 DEBUG [DataNucleus.Transaction] - Object "my.company.domain.User@6ccc45d2" (id="my.company.domain.User:1") is not transactional
18:3812,079 DEBUG [DataNucleus.Connection] - Created ManagedConnection using DatastoreService = com.google.appengine.api.datastore.DatastoreServiceImpl@18d1287b
18:3812,079 DEBUG [DataNucleus.Connection] - Connection added to the pool : com.google.appengine.datanucleus.DatastoreConnectionFactoryImpl$DatastoreManagedConnection@4bb8aff7 for key=org.datanucleus.ObjectManagerImpl@1f6aa236 in factory=ConnectionFactory:nontx[com.google.appengine.datanucleus.DatastoreConnectionFactoryImpl@fbc2ee]
18:3812,080 DEBUG [DataNucleus.Datastore.Native] - Getting entity of kind User with key User(1)
18:3812,088 DEBUG [DataNucleus.Persistence] - Detaching copy of object : "my.company.domain.User@6ccc45d2" (depth=0) - will be "my.company.domain.User@13997783"
18:3812,088 DEBUG [DataNucleus.Connection] - Connection found in the pool : com.google.appengine.datanucleus.DatastoreConnectionFactoryImpl$DatastoreManagedConnection@4bb8aff7 for key=org.datanucleus.ObjectManagerImpl@1f6aa236 in factory=ConnectionFactory:nontx[com.google.appengine.datanucleus.DatastoreConnectionFactoryImpl@fbc2ee] but owner object closing so closing connection
18:3812,088 DEBUG [DataNucleus.Connection] - Connection removed from the pool : com.google.appengine.datanucleus.DatastoreConnectionFactoryImpl$DatastoreManagedConnection@4bb8aff7 for key=org.datanucleus.ObjectManagerImpl@1f6aa236 in factory=ConnectionFactory:nontx[com.google.appengine.datanucleus.DatastoreConnectionFactoryImpl@fbc2ee]
18:3812,088 DEBUG [DataNucleus.Persistence] - Disconnecting my.company.domain.User@6ccc45d2 from StateManager[pc=my.company.domain.User@6ccc45d2, lifecycle=P_NONTRANS]
18:3812,088 DEBUG [DataNucleus.Cache] - Object with id="my.company.domain.User:1" being removed from Level 1 cache [current cache size = 1]
18:3812,088 DEBUG [DataNucleus.Cache] - Level 1 Cache cleared
18:3812,089 DEBUG [DataNucleus.Persistence] - Object Manager "org.datanucleus.ObjectManagerImpl@1f6aa236" closed
18:3812,090 DEBUG [DataNucleus.Cache] - Level 1 Cache of type "soft" initialised
18:3812,090 DEBUG [DataNucleus.Persistence] - Object Manager "org.datanucleus.ObjectManagerImpl@5244c8cc" opened for datastore "com.google.appengine.datanucleus.DatastoreManager@579f707b" with txn="org.datanucleus.TransactionImpl@21daf346"
18:3812,107 DEBUG [DataNucleus.Query] - JDOQL Query : Compiling "SELECT UNIQUE FROM my.company.domain.User WHERE name == nameParam PARAMETERS String nameParam"
18:3812,115 DEBUG [DataNucleus.General] - Class String was resolved to be java.lang.String. It wasnt defined fully-qualified so had to be looked up; you can avoid the lookup (and improve performance) by fully-qualifying the class in the query.
18:3812,122 DEBUG [DataNucleus.Query] - JDOQL Query : Compile Time = 15 ms
18:3812,123 DEBUG [DataNucleus.Query] - QueryCompilation:
  [filter:DyadicExpression{PrimaryExpression{name}  =  ParameterExpression{nameParam}}]
  [symbols: nameParam type=java.lang.String, this type=my.company.domain.User]
18:3812,123 DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT UNIQUE FROM my.company.domain.User WHERE name == nameParam PARAMETERS String nameParam" ...
18:3812,125 DEBUG [DataNucleus.Query] - Query compiled as : Kind=my.company.domain.User Filter : name=johnDoe
18:3812,130 DEBUG [DataNucleus.Datastore.Native] - Executing query in datastore for SELECT UNIQUE FROM my.company.domain.User WHERE name == nameParam PARAMETERS String nameParam
18:3812,146 DEBUG [DataNucleus.Connection] - Created ManagedConnection using DatastoreService = com.google.appengine.api.datastore.DatastoreServiceImpl@3e36cb
18:3812,146 DEBUG [DataNucleus.Connection] - Connection added to the pool : com.google.appengine.datanucleus.DatastoreConnectionFactoryImpl$DatastoreManagedConnection@747f498c for key=org.datanucleus.ObjectManagerImpl@5244c8cc in factory=ConnectionFactory:nontx[com.google.appengine.datanucleus.DatastoreConnectionFactoryImpl@fbc2ee]
18:3812,146 DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 23 ms 
```

（我删除了几个重复的行）

亲切的问候，迈克尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T09:14:18.173

您不能使用原始`long`类型指定实体键。有四种符合条件的类型可以设置为 Key。看一看：[JDO 对象中的键](https://developers.google.com/appengine/docs/java/datastore/jdo/creatinggettinganddeletingdata#Keys)

希望这可以帮助！

# visual-studio-2010 - 是否有任何关于 Resharper 生产力提升的学术研究？

> ID：12855016
> 
> 赞同：4
> 
> 时间：2012-10-12T08:25:23.720
> 
> 标签：visual-studio-2010, visual-studio, resharper

我有一份新工作，我的首要任务之一是让我的老板相信 Resharper 是一个绝妙的主意 - 确实如此。你们中有人知道 Resharpers 生产力提高的任何学术研究吗？我的老板喜欢数字，但我能找到的唯一数字是 Jetbrains 相当不支持的陈述。

所以，目前我最好的论点是“我真的，真的很喜欢它老板”和“请！！！”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T09:51:16.830

为了回答我自己的问题，我说服了我的老板，但没有使用学术研究作为论据。我们买了它，我做了一个小示范，说明一下（很小的）投资，他很高兴。他最喜欢的是：

1.  实时和文件模板（明显且非常可衡量的节省时间）
2.  重构（保持质量）。
3.  有效的捷径（节省时间）。
4.  测试测试运行器（节省时间、维护和提高质量）

所以，事实证明，我不需要研究 Resharper 的有效性，但我仍然感兴趣。

# c# - 将 `null` 值分配给 Nullable 单行“如果”

> ID：12855018
> 
> 赞同：31
> 
> 时间：2012-10-12T08:25:28.360
> 
> 标签：c#, datetime, null

我有这样的课

```
public class MyClass
{
    public int Id { get; set; }
    public Nullable<DateTime> ApplicationDate { get; set; }
    ....
} 
```

现在我正在尝试填充这样的`MyClass`对象

```
DataTable dt = DBHelper.GetDataTable(sql, conn);
DataRow dr = dt.Rows[0];

MyClass oMyClass = new MyClass();
oMyClass.Id = (int)dr["Id"];
oMyClass.ApplicationDate = dr["ApplDate"] == DBNull.Value ? null : Convert.ToDateTime(dr["AppDate"]); 
//Above line gives an error
.... 
```

分配应用程序日期值会出错

`Type of conditional expression cannot be determined because there is no implicit conversion between '<null>' and 'System.DateTime'`

我在这里想念什么？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-10-12T08:28:33.997

您需要转换`null`为`DateTime?`：

```
oMyClass.ApplicationDate = dr["ApplDate"] == DBNull.Value 
    ? (DateTime?)null 
    : Convert.ToDateTime(dr["AppDate"]); 
```

这是因为编译器确定[条件运算符](http://msdn.microsoft.com/en-us/library/ty67wk28%28v=vs.110%29.aspx)的结果类型的方式；行为是设计使然：

> first_expression 和 second_expression 的类型必须相同，或者必须存在从一种类型到另一种类型的隐式转换。

由于`null`它本身[是 null 类型](https://stackoverflow.com/questions/8204578/what-is-the-type-of-null-literal)，因此没有从它或到它的转换，你需要通过强制转换来帮助编译器。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-12T08:28:17.417

```
oMyClass.ApplicationDate =
    dr["ApplDate"] == DBNull.Value ?
    (DateTime?)null :
    Convert.ToDateTime(dr["AppDate"]); 
```

编译器所知道的是，一件事的计算结果为 a ，另一件事的计算`null`结果为 a `DateTime`。编译器会抱怨，因为它无法从一个转换为另一个，因此您可以将它们转换为可以同时是两个值的东西。

请注意，它`DateTime?`是`Nullable<DateTime>`.
另请注意，您只需要转换空值，因为两者之间存在隐式转换`DateTime?`，`DateTime`因此编译器可以自行进行转换。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-12T08:28:42.423

试试这个：

```
oMyClass.ApplicationDate = 
    dr["ApplDate"] == DBNull.Value ? (DateTime?)null : 
                                     Convert.ToDateTime(dr["AppDate"]); 
```

您还可以将强制转换应用于最后一个表达式。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-12-19T20:54:46.487

您可以使用`default`which 将分配未初始化类型的默认值。

```
oMyClass.ApplicationDate = dr["ApplDate"] == DBNull.Value ? default(Nullable<DateTime>) : Convert.ToDateTime(dr["AppDate"]); 
```

更多示例

```
bool isHappy = default(bool); //isHappy = false
int number = default(int); //number = zero
string text = default(text); // text = null
MyObject myObject = default(MyObject); // myObject = null
DateTime? date = default(DateTime?); //date = null 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-12T08:30:52.033

您需要将“null”转换为 Nullable

试试这个代码：

```
oMyClass.ApplicationDate = dr["ApplDate"] == DBNull.Value ? (DateTime?)null : Convert.ToDateTime(dr["AppDate"]); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-01T09:40:05.063

```
DateTime? dt = (DateTime?)null; 
```

或者

```
Nullable<DateTime> dt = (Nullable<DateTime>)null; 
```

# wso2 - wso2 产品注册表菜单（配置、治理、本地）

> ID：12855020
> 
> 赞同：0
> 
> 时间：2012-10-12T08:25:37.037
> 
> 标签：wso2, wso2esb

是否有任何权威文档可用于注册表 UI 菜单下的数据（例如 WSO2 ESB 管理屏幕中的数据）？

我已经看到有关此注册表的信息片段，例如：

> 配置注册表包含可以在同一产品的多个实例（例如 ESB 节点集群）之间共享的产品特定配置。
> 
> 来源：[链接](https://stackoverflow.com/questions/9712962/howto-access-registry-in-wso2-esb)

首先，我有几个问题：

1.  这个注册表和 WSO2 治理注册表有什么区别？
2.  WSO2 esb 管理员用户与此注册表交互的典型用例是什么？
3.  WSO2 esb 开发人员与此注册表交互的典型用例是什么？
4.  是否有存储在此注册表中的所有元数据的描述？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T09:04:08.520

在所有 WSO2 产品中，都有一个用于存储资源的内部注册表。WSo2 Governance Registry 使用相同的核心功能 + 提供完整治理方案的更多功能。如果需要，您可以挂载到外部 WSo2 治理注册表，而无需使用您提到的内部注册表。您可以[在此处](http://wso2.org/library/tutorials/2010/04/sharing-registry-space-across-multiple-product-instances)找到更多详细信息。

# html - 链接列表未正确位于容器中

> ID：12855022
> 
> 赞同：0
> 
> 时间：2012-10-12T08:25:45.840
> 
> 标签：html, css

我的 CSS 中有一个似乎无法修复的错误。当我在浏览器中呈现下面的代码时，它会将页眉和页脚中的链接放在一个新行上（这随后会使页眉和页脚比它们应该的高）并破坏布局

[http://tinkerbin.com/bhu0pfZF](http://tinkerbin.com/bhu0pfZF)

如何让链接正确放置在其页眉/页脚容器中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T08:28:28.640

大多数标签都有默认边距和填充，这应该可以解决问题：

```
ul {
    margin-top: 0;
} 
```

您可能希望通过以下方式重置其他人：

```
ul {
    margin: 0;
    padding: 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T08:29:05.777

### 一些 CSS 更改：

1.  删除`height: 60px;`并`line-height: 60px;`在`#header`.
2.  添加`margin: 0;`为`#header ul`
3.  删除`height: 60px;`和更新`line-height: 60px;`_`#footer``margin-top: -1.2em;`

### 小提琴：[http ://tinkerbin.com/Gw7FiAIT](http://tinkerbin.com/Gw7FiAIT)

# android - Android ADB 不断崩溃 - 使用 USB 3.0 端口时无法在设备上调试

> ID：12855024
> 
> 赞同：2
> 
> 时间：2012-10-12T08:26:02.907
> 
> 标签：android, eclipse, usb, ddms, android-sdk-tools

我刚买了一台新电脑。安装了所有的东西来开发安卓应用程序，就像在我的旧电脑上一样。我已经在我的新电脑上安装了 eclipse Juno 以防万一。

这是问题所在，我无法在真实设备上调试。在任何 AVD 上它都可以正常工作，但是当我尝试在我的真实设备（Galaxy Nexus）上运行一个项目时，我得到以下错误：

**第一次运行**我得到：

```
 [2012-10-12 09:55:17 - SlideMenuExample] Android Launch!
   [2012-10-12 09:55:17 - SlideMenuExample] adb is running normally.
   [2012-10-12 09:55:17 - SlideMenuExample] Performing com.coboltforge.slidemenuexample.MainActivity activity launch
   [2012-10-12 09:55:21 - SlideMenuExample] Uploading SlideMenuExample.apk onto device '0149C6F11601A009'
   [2012-10-12 09:55:26 - SlideMenuExample] Failed to install SlideMenuExample.apk on device '0149C6F11601A009': timeout
   [2012-10-12 09:55:26 - SlideMenuExample] Launch canceled! 
```

**第二次运行**：

```
[2012-10-12 10:01:48 - SlideMenuExample] Android Launch!
[2012-10-12 10:01:48 - SlideMenuExample] adb is running normally.
[2012-10-12 10:01:48 - SlideMenuExample] Performing com.coboltforge.slidemenuexample.MainActivity activity launch
[2012-10-12 10:01:53 - SlideMenuExample] Uploading SlideMenuExample.apk onto device '0149C6F11601A009'
[2012-10-12 10:01:53 - SlideMenuExample] Installing SlideMenuExample.apk...
[2012-10-12 10:01:54 - SlideMenuExample] Success!
[2012-10-12 10:01:54 - SlideMenuExample] Failed to install SlideMenuExample.apk on device '0149C6F11601A009': device not found
[2012-10-12 10:01:54 - SlideMenuExample] com.android.ddmlib.InstallException: device not found
[2012-10-12 10:01:54 - SlideMenuExample] Launch canceled! 
```

**第三次运行**卡在 100% 启动项目，而不是什么也没发生。

**第四次运行**：是的，最终应用程序已成功安装（问题已解决？不）

**第五次运行**再次卡在 100% 并且日食完全崩溃。重启 Eclipse 后，我在错误日志中看到以下错误：

```
java.lang.NullPointerException
at com.android.ide.eclipse.adt.AdtPlugin.getDisplay(AdtPlugin.java:334)
at com.android.ide.eclipse.adt.internal.launch.AndroidLaunchController.launch(AndroidLaunchController.java:595)
at com.android.ide.eclipse.adt.internal.launch.LaunchConfigDelegate.doLaunch(LaunchConfigDelegate.java:322)
at com.android.ide.eclipse.adt.internal.launch.LaunchConfigDelegate.launch(LaunchConfigDelegate.java:238)
at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:855)
at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:704)
at org.eclipse.debug.internal.ui.DebugUIPlugin.buildAndLaunch(DebugUIPlugin.java:1047)
at org.eclipse.debug.internal.ui.DebugUIPlugin$8.run(DebugUIPlugin.java:1251)
at org.eclipse.core.internal.jobs.Worker.run(Worker.java:53) 
```

请任何人都可以帮我解决这个问题。

*   我已经重新安装了 eclipse 和 android SDK。
*   以管理员身份运行eclipse
*   将android sdk的platform-tools和tools文件夹添加到环境变量中
*   将 ADB 连接超时增加到 20000

**编辑** 在我的电脑后面，我有两个 2.0 USB 端口（不像前面的端口那样 3.0）。使用它们时我没有遇到任何麻烦..

但我仍然对为什么 USB 3.0 端口不起作用感兴趣？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-28T01:51:12.837

我不知道 - adb.exe 总是崩溃。我所有的端口都是 USB 3.0。Windows 7，最新更新，Google USB 驱动程序，最新更新 (9)。

卸载了谷歌USB驱动，问题就消失了……

# c - 48 字节二进制到 6 字节二进制

> ID：12855026
> 
> 赞同：2
> 
> 时间：2012-10-12T08:26:04.623
> 
> 标签：c, binary, hex, bytearray, byte

我从命令行读取了一个 17 字节的十六进制字符串，`"13:22:45:33:99:cd"`并希望将其转换为长度为 6 字节的二进制值。

为此，我从命令行读取了一个 17 字节的十六进制字符串，`"13:22:45:33:99:cd"`并将其转换为二进制数字 `0001 0011 0010 0010 0100 0101 0011 0011 1001 1001 1100 1101`。但是，由于我使用的是 char 数组，它的长度为 48 个字节。我希望生成的二进制文件的长度为 6 个字节，即，我希望`0001 0011 0010 0010 0100 0101 0011 0011 1001 1001 1100 1101`为 6 个字节（48 位）而不是 48 个字节。请建议如何做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T08:29:16.480

```
#include <stdio.h>

const char *input = "13:22:45:33:99:cd";
int output[6];
unsigned char result[6];
if (6 == sscanf(input, "%02x:%02x:%02x:%02x:%02x:%02x",
                &output[0], &output[1], &output[2],
                &output[3], &output[4], &output[5])) {
    for (int i = 0; i < 6; i++)
        result[i] = output[i];
} else {
    whine("something's wrong with the input!");
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T08:29:24.840

在字符上拆分字符串`':'`，每个子字符串现在都是一个字符串，您可以传递给 eg[`strtoul`](http://en.cppreference.com/w/c/string/byte/strtoul)然后放入`unsigned char`大小为 6 的数组中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T08:28:49.340

你把它们打包在一起。就像高半字节和低半字节一样：（`(hi<<4)|lo`假设两者都是 4 位）。

尽管您可能更喜欢逐字节转换它们，而不是一开始就逐位转换。

# javascript - 移动网站脚本重定向

> ID：12855029
> 
> 赞同：0
> 
> 时间：2012-10-12T08:26:20.237
> 
> 标签：javascript, redirect, joomla

我有一个 joomla 网站，我已经建立了一个 jquery 移动网站，所以我在下面使用这个代码，

```
<script type="text/javascript">
<!--
if (screen.width <= 680) {
window.location = "site.com";
}
//-->
</script> 
```

但是我的问题是，在我的 jquery 站点中，我有一个查看完整站点的代码，我已将其放在我的主模板的 index.php 中，因此在 joomla 创建的每个页面中，用户都可以看到此代码存在

我的问题是当用户从移动 jquery 站点单击“查看完整站点”而不是再次将他重定向回移动站点时，我如何编写此脚本。

因为当用户按下按钮查看完整站点时，会转到完整站点，几秒钟后他又回到了这个脚本的移动原因..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T09:02:39.380

理想情况下，切换应该在服务器端完成，因为不需要将页面发送到浏览器进行重定向的开销。

[这](http://mobiforge.com/developing/story/lightweight-device-detection-php)是一个让您开始使用的链接，但要专注于您的特定问题：您可以将首选项存储在会话变量中，然后在上面的条件中进行检查。这可以在[JavaScript](https://stackoverflow.com/questions/2257631/how-create-a-session-using-javascript)或[php](http://www.w3schools.com/php/php_sessions.asp)中完成。

如果您要坚持上面的客户端方法，则可以在创建and函数之后修改**if 语句。**`if (screen.width <= 680 && readCookie('screenpref') != 'desktop') {}``setCookie()``readCookie()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T18:06:40.870

就像乔说的那样，我还推荐了一个更有效的服务器端解决方案，检查我刚刚找到的这个链接，这是一个非常全面的用户代理列表，您可以检查以重定向到：[http ://detectmobilebrowsers.com/](http://detectmobilebrowsers.com/)

对于那些不知道用户代理是请求标头的一部分并描述发起请求的客户端软件的人。基本上它是一个字符串，您可以使用它来识别哪个设备请求了您的网页。

# php - CSS 不适用于 CodeIgniter

> ID：12855030
> 
> 赞同：4
> 
> 时间：2012-10-12T08:26:22.673
> 
> 标签：php, css, codeigniter

这是我的 CI 代码的一部分：

```
 class page extends CI_Controller {

        var $Page;

        public function __construct() {
            parent::__construct();
            $this->Page = 1;
            $this->load->model('posts_model');
            $this->load->helper('url');
        }

        public function index() {
            $data['posts'] = $this->posts_model->get_posts($this->Page);
            $this->load->view('header');
            $this->load->view('main', $data);
            $this->load->view('footer');
        }

        function page_num($page) {
            $this->Page = $page;
            $data['posts'] = $this->posts_model->get_posts($this->Page);
            echo $this->Page;
            $this->load->view('header');
            $this->load->view('main', $data);
            $this->load->view('footer');
        }

    } 
```

这是我的查看文件的链接标签：

```
<link rel="stylesheet" type="text/css" href="css/indexpage.css" media="all"/> 
```

当我打开索引文件 (/My-Site/) 时，CSS 工作正常，但是当我打开

例如网址：

" /My-Site/page/page_num/3 ",

页面打开但没有 CSS 样式！

任何机构可以帮助我吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-12T08:28:44.083

使用[`base_url()`](http://codeigniter.com/user_guide/helpers/url_helper.html)函数获取站点的url

`base_url()`给出索引文件所在网站的 url。

例如：`/My-Site/`

或者您可以将文件位置作为参数：`base_url('/css/indexpage.css')`然后将其用作`<link rel="stylesheet" type="text/css" href="<?php echo base_url('/css/indexpage.css');?>" media="all"/>`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T08:35:33.510

尝试一下。

你可以在你的 CSS中使用**base_url() 。**见下面的代码。

```
<link rel="stylesheet" href="<?php echo base_url(); ?>css/style.css" type="text/css" media="all" /> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-12T08:39:04.617

1 - 将其更改为：

```
<link rel="stylesheet" type="text/css" href="<?php echo base_url('css/indexpage.css');?>" media="all"/> 
```

你应该已经知道了，在

```
application/config/config.php 
```

放

```
$config['base_url'] = 'www.yorsite.com'; 
```

2 -

您必须仅在您的一个视图中包含 css

IE

如果您已将其包含在 header.php 文件中，请不要将其添加到 main.php 或 footer.php

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T17:16:15.043

使用它通常是一个好习惯

```
<base href="<?php echo base_url(); ?>" /> 
```

在视图页面的头部。这样您就不必担心将 base_url 添加到所有 href 和 src 属性。因此，如果您的 css 文件位于 codeigniter/assets/css 文件夹中，只需使用

```
<link type="text/css" rel="stylesheet" href="assets/css/style.css" /> 
```

同样，对于后续脚本和 css，您可以只使用“assets/js/filename”或“assets/css/filename”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-12T08:31:04.387

在此处更改网址：

```
<link rel="stylesheet" type="text/css" href="css/indexpage.css" media="all"/> 
```

到：

```
<link rel="stylesheet" type="text/css" href="/css/indexpage.css" media="all"/> 
```

开头的斜线将指向没有任何子类别的域。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-12T09:55:49.420

使用 codeigniter 时请记住，唯一输出 HTML 的页面是 index.php 文件，因此您的 css 应该相对于该文件，或者您使用绝对 url。您可以在某些开发人员在 webroot 处创建资产文件夹的任何地方创建文件夹，他们在这里放置他们的 javascript 文件夹 image 文件夹和 css 文件夹。但最安全的方法是为您的资产使用绝对链接——Javascript、css 和图像。使用绝对链接最简单的方法是使用 base_url("assets/css/indexpage.css"); 这是如何使用它：

1.  在您的任何控制器中加载 url 助手。$this->load->helper('url);
2.  在您的视图中，您想要进行链接的区域使用基本 url 功能。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-10-12T08:30:30.650

这取决于您放置 css 文件的位置。试试 ../css/indexpage.css

# regex - 我想用正则表达式提取多个替代文本实例，但不确定如何

> ID：12855031
> 
> 赞同：1
> 
> 时间：2012-10-12T08:26:25.523
> 
> 标签：regex, extract, phrases

我用它`(?<=alt)[\w\s\,\/\(\)\.]*`来提取第一个替代文本。这很棒，但我想提取多个替代文本。我在视觉网络开膛手中使用正则表达式

我从中提取的代码是

```
<DIV id=ctl00_ContentRightColumn_CustomFunctionalityFieldControl1_ctl00_ctl00_woodFeatures class="woodFeaturesPanel woodFeaturesPanelSingle" sizcache="23614" sizset="0"><H2>Features:</H2>  <DIV sizcache="23614" sizset="0">  <UL sizcache="23614" sizset="0">  <LI sizcache="23386" sizset="0"><IMG alt="Information board at site" src="/PublishingImages/icon_infoboard.gif">  <LI sizcache="20558" sizset="0"><IMG alt="Parking nearby" src="/PublishingImages/icon_carparknear.gif">  <LI sizcache="23614" sizset="0"><IMG alt=Grassland src="/PublishingImages/icon_grassland.giF">  <LI sizcache="17694" sizset="0"><IMG alt="Is woodland creation site" src="/PublishingImages/icon_woodlandcreation.gif">  <LI sizcache="21680" sizset="0"><IMG alt="Mainly broadleaved woodland" src="/PublishingImages/icon_mainlybroadleaved.gif">  <LI sizcache="20704" sizset="0"><IMG alt="Mainly young woodland" src="/PublishingImages/icon_mainlyyoung.gif">  <LI>  <LI></LI></UL></DIV></DIV> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T09:11:58.173

没有语言这很难说，但是使用记忆模式你可以捕捉到你需要的东西：

```
/alt=(\w\S*|"([^"]*)")/ 
```

使用`preg_match_all()`它会产生以下结果：

```
Array
(
    [0] => Array
        (
            [0] => alt="Information board at site"
            [1] => alt="Parking nearby"
            [2] => alt=Grassland
            [3] => alt="Is woodland creation site"
            [4] => alt="Mainly broadleaved woodland"
            [5] => alt="Mainly young woodland"
        )

    [1] => Array
        (
            [0] => "Information board at site"
            [1] => "Parking nearby"
            [2] => Grassland
            [3] => "Is woodland creation site"
            [4] => "Mainly broadleaved woodland"
            [5] => "Mainly young woodland"
        )

    [2] => Array
        (
            [0] => Information board at site
            [1] => Parking nearby
            [2] =>
            [3] => Is woodland creation site
            [4] => Mainly broadleaved woodland
            [5] => Mainly young woodland
        )

) 
```

第二种内存模式用于双引号括起来的字符串；如果为空，您应该查看第一个内存模式。

# linux - linux nasm 代码什么也不显示

> ID：12855035
> 
> 赞同：2
> 
> 时间：2012-10-12T08:26:34.700
> 
> 标签：linux, assembly, nasm

我正在制作一个用户输入数字的程序，它会打印出从零到数字的所有数字。它编译良好，链接良好，运行时不返回任何错误，但它绝对不会打印任何内容。这是代码：

```
SECTION .data 
len   EQU 32

SECTION .bss 
other resd len
data  resd len

SECTION .text

GLOBAL _start
_start:
nop

input:                  ; This section gets the integer from the user
mov eax, 3          ; }
mov ebx, 1          ; }
mov ecx, data       ; } System_read call
mov edx, len        ; }
int 80h             ; }

mov ebp, 1

setup:                  ; This section sets up the registers ready for looping 
mov [other], ebp

loop:                   ; This section loops, printing out from zero to the number given
mov eax, 4
mov ebx, 1
mov ecx, [other]
mov edx, len
int 80h

exit:                   ; Exits the program
mov eax, 1          ; }
mov ebx, 0          ; } System_exit call
int 80h             ; } 
```

当我在 KDBG 上单步执行它时，它会返回一些错误；它收到一个中断和一个分段错误，虽然我不知道在哪里。我不知道为什么，因为当我在 Geany 中运行它时，它最后返回一个 0 值并且运行没有错误。为什么它不起作用？

提前致谢

注意：此代码不会循环。它还没有完成。它在这里应该做的就是打印出数字 1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T17:44:47.270

当您去打印时，您正在调用`mov ecx, [other]`. 这会查看存储在 other 中的地址，然后按照该地址获取存储在那里的任何内容。问题是这个系统调用需要 ecx 中的地址，而不是值。

如果您`mov ecx, other`改为调用，则 ecx 将拥有 other 的地址，并且它将能够转到该地址并打印那里的内容。

您这里还有一个问题：当您打印存储在 中的数字时`other`，它会将其转换为 ascii 值。因此，例如，当您尝试打印 1，而不是打印数字 1 时，它将打印 ascii 1（恰好是标题字符的开头；您不想打印任何内容）。`'0'`如果要打印数字，请添加（字符“0”）。

编辑：还有一件事，当您阅读时，您将 1 传递给 ebx。1 是标准输出。你想要的是 STDIN，它是 0。

# command-line - 在 Windows 7 中使用命令提示符的消息

> ID：12855039
> 
> 赞同：5
> 
> 时间：2012-10-12T08:26:58.657
> 
> 标签：command-line, windows-7, command, command-prompt

如何在**windows 7**`message`中使用网络发送？`command prompt`

 *** * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-09-06T09:45:16.380

“net send”是一个使用名为“messenger”的后台服务的命令。此服务已从 Windows 7 中删除。即**您不能在 Vista 或 Win7 / Win8 上使用“网络发送”。**

可惜，我喜欢使用它。

还有其他选择，但这需要您在要使用的每台 PC 上下载并安装软件，该软件作为后台服务运行，我建议您在使用这类软件时非常非常非常小心，因为它们可能造成严重损坏系统或损害系统安全。

[winsentincidenti](http://www.winsentmessenger.com/innocenti/) / [winsent messenger](http://www.winsentmessenger.com/messenger/)

****由于上述内容，此命令有风险***

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-12T08:46:13.440

输入“味精/？” 在命令提示符下获取向用户发送消息的各种方式。

输入“网络发送/？” 在命令提示符中获取另一种发送消息的变体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T08:45:01.873

您可以使用**net send**命令通过网络发送消息。

例子：

```
网络发送 * 你好吗
```

您可以使用上述语句向您域中的所有成员发送消息。但是如果您想向名为 Mike 的单个用户发送消息，您可以使用

```
网派麦克你好！
```

这将发送**你好！**给名为 Mike 的用户。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-12-11T11:41:32.303

打开记事本并写下这个

```
@echo off
:A
Cls
echo MESSENGER
set /p n=User:
set /p m=Message:
net send %n% %m%
Pause
Goto A 
```

然后另存为“ `Messenger.bat`”并关闭记事本
步骤1：

当您打开该保存的记事本文件时，它将作为带有此详细信息的文件 Messenger 命令提示符打开。

信使
**用户：**

在 " `User`" 之后写下您要联系的计算机的 IP，然后按 Enter。**

# javascript - WebRTC 是正确的吗？（实时多人游戏）

> ID：12855045
> 
> 赞同：8
> 
> 时间：2012-10-12T08:27:27.663
> 
> 标签：javascript, html, node.js, websocket, webrtc

想象一下，我想用 HTML5（客户端）和 node.js（服务器）创建一个实时多人游戏。

我需要非常快速地将数据从服务器传输到客户端，反之亦然。

在本机应用程序中，我会使用`UDP`最多的数据（玩家位置，...），因为它比它快得多，`TCP`并且在丢失时它是不重要的。

在`HTML5`我可以（仅）使用`WebSockets`. WebSockets 位于 TCP 之上，因此速度不够快，无法获得良好的性能。

我听说过`WebRTC`，但我不知道这是否可以解决这个问题。

有人有经验吗？

（我知道，大多数浏览器仍然不支持 WebRTC，但这对我来说并不重要。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T17:50:26.200

就 WebRTC 而言，听起来您需要的是 DataChannel：请参阅[草案协议](https://datatracker.ietf.org/doc/html/draft-jesup-rtcweb-data-protocol-00)和[HTML5 Rocks 文章](http://www.html5rocks.com/en/tutorials/webrtc/basics/#toc-datachannel)（免责声明：我写的！）

DataChannel 是一项正在进行的工作，尚未由任何浏览器实现。

至于其他 WebRTC 组件，Chrome、Firefox Nightlies 和 Opera 都支持 MediaStream (getUserMedia)；RTCPeerConnection 在 Chrome 稳定版中，在一个标志后面（即将发布的版本中没有标志），并承诺在 2013 年第一季度用于 Firefox 18。

编辑：RTCDataChannel 现已在 Firefox 和 Chrome 上实现。

Chrome 的“单页”演示：[simpl.info/dc，Firefox](http://simpl.info/dc)[演示](https://hacks.mozilla.org/2012/11/progress-update-on-webrtc-for-firefox-on-desktop/comment-page-1/#comment-1851192)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-23T16:06:02.003

RTCDataChannel 提供基于会话/可靠以及无连接/不可靠的传输，分别类似于本机客户端中的 TCP 和 UDP。更多信息[在这里](https://stackoverflow.com/questions/18897917/does-webrtc-use-tcp-or-udp)。截至 2013 年，这是一项可行的技术，尽管仅在后来的 Chrome 和 Firefox 版本中才有。

[根据 html5rocks.com](http://www.html5rocks.com/en/tutorials/webrtc/datachannels/)，现在还可以使用二进制类型进行传输。因此，您应该拥有高效的本地 UDP 客户端所具备的所有功能。*但是*，我还不确定二进制传输是否已从 webrtc 存储库（[已修复它）一直](https://code.google.com/p/webrtc/issues/detail?id=1408%20)到 Chrome，或者它是否仍仅在现阶段仅在 Chrome Canary 中可用。

# linq - 如何从 lambda 表达式结果转换为通用列表

> ID：12855046
> 
> 赞同：0
> 
> 时间：2012-10-12T08:27:27.760
> 
> 标签：linq

我有一个像下面这样的类结构。

```
ObservableCollection<Group> deviceCollection = new ObservableCollection<Group>();
public class Group 
{ 
    public string Name { get; set; }       
    public List<TargetSelectionStructure> TargetCollection { get; set; }
}
public class TargetSelectionStructure
{
    public string ItemId { get; set; }
    public string Name { get; set; }
    public bool IsGroup { get; set; }
} 
```

来自可观察的集合对象 deviceCollection。我需要将与 IsGroup 属性匹配的集合设为 false。所以我写了像

```
var currentStruct = deviceCollection.Where(d => d.TargetCollection.Any(t => t.IsGroup == false)); 
```

现在 currentStruct 基本上应该包含集合`List<TargetSelectionStructure>`。我无法将 currentStruct 转换为`List<TargetSelectionStructure>`.
我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T08:30:03.780

你不能施放它，因为它`currentStruct`是一个`IEnumerable<Group>`.

我认为您的查询需要如下所示：

```
var currentStruct = deviceCollection.SelectMany(x => x.TargetCollection)
                                    .Where(x => !x.IsGroup).ToList(); 
```

这将返回所有具有 s 的所有`TargetSelectionStructure`实例。`Group``IsGroup == false`

你的问题并不完全清楚。可以用第二种方式解释您的问题：如果其中至少一个具有 ，您希望拥有`TargetSelectionStructure`来自 a 的所有实例。 为此，您将使用以下查询：`Group``IsGroup == false`

```
var currentStruct = deviceCollection.Where(x => x.TargetCollection
                                                 .Any(y => !y.IsGroup))
                                    .SelectMany(x => x.TargetCollection)
                                    .ToList(); 
```

# spring - Spring Quartz 简单触发器未按预期触发

> ID：12855047
> 
> 赞同：2
> 
> 时间：2012-10-12T08:27:29.287
> 
> 标签：spring, quartz-scheduler

我有一个简单的触发器 bean，应该每 20 分钟触发一次。为此，我在属性文件中指定了重复间隔值。但我的工作是每分钟而不是每 20 分钟醒来一次。

示例 xml

```
<bean id="propertyLoaderJob" 
      class="org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean">
        <property name="targetObject" ref="propertyloader" />
        <property name="targetMethod" value="propFlagValidator" />
        <property name="concurrent" value="false" />
</bean>
<bean id="propertyLoaderTrigger"
    class="org.springframework.scheduling.quartz.SimpleTriggerBean">        
    <property name="jobDetail" ref="propertyLoaderJob" />
    <property name="repeatInterval" value="${quartz.scheduler.repeatInterval}" />
    <property name="startDelay" value="${quartz.scheduler.startDelay}" />       
</bean> 
```

在属性文件中我有这些字段

```
quartz.scheduler.repeatInterval=1200000
quartz.scheduler.startDelay=1000 
```

这可能是什么原因？请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T09:40:38.843

您是否为此指定了属性占位符，

***使用上下文命名空间，***

```
<?xml version="1.0" encoding="UTF-8"?>
 <beans xmlns="http://www.springframework.org/schema/beans"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xmlns:context="http://www.springframework.org/schema/context"
 xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">
 . . .
 <context:property-placeholder location="quartz.scheduler.properties" />
 . . .
 </beans> 
```

* * *

***或*** ***在应用程序上下文中添加 PropertyPlaceholderConfigurer bean***

```
<bean id="propertyConfigurer" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
 <property name="location">
 <value>classpath:quartz.scheduler.properties</value>
 </property>
</bean> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T10:09:10.090

你确定你没有为同一个类/作业使用任何其他触发器，即propertyLoaderJob。您可能正在使用与同一作业相关的 cron 表达式。如果您可以共享完整的spring xml文件，那就太好了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T11:04:34.280

为了将来参考，我正在回答。

除了我的问题中提到的部分，我忘记添加以下代码。那是为了实际触发它：

```
<bean name="nonclusterMode"  class="org.springframework.scheduling.quartz.SchedulerFactoryBean">        
    <property name="triggers">
        <list>              
            <ref bean="propertyLoaderTrigger" />            
        </list>
    </property>
</bean> 
```

现在它按预期工作。

# javascript - jQuery 合并对象和 json_encode

> ID：12855049
> 
> 赞同：0
> 
> 时间：2012-10-12T08:27:35.230
> 
> 标签：javascript, jquery

> **可能重复：**
> [如何动态合并两个 JavaScript 对象的属性？](https://stackoverflow.com/questions/171251/how-can-i-merge-properties-of-two-javascript-objects-dynamically)

我正在尝试在 jQuery 中合并两个对象。

第一个对象：

```
var rules1 = {  
    firstname: { required: true, minlength: 3 },
    lastname: { required: true, minlength: 3 }
}; 
```

第二个对象：

```
var rules2 = {  
    test1: { required: true, minlength: 3 },
    test2: { required: true, minlength: 3 }
}; 
```

我希望结果如下所示：

```
var merged = {  
    firstname: { required: true, minlength: 3 },
    lastname: { required: true, minlength: 3 },
    test1: { required: true, minlength: 3 },
    test2: { required: true, minlength: 3 }
}; 
```

我还需要知道 PHP 数组的外观如何`rules1`，因为该对象将使用`json_encode`函数进行转换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T08:33:01.327

您可以这样做合并它们：

```
var merged =  $.extend(rules1, rules2); 
```

如果你想从 php 构建它，你的对象将是：

```
$rules = new stdClass;
$rules->test1 = new stdClass;
$rules->test1->required = true;
.... 
```

就个人而言，在 PHP 中我更喜欢使用数组。然后可以通过使用一些自定义函数将它们递归地转换为stdClass。您可以在此处找到其中之一：

[http://www.richardcastera.com/blog/php-convert-array-to-object-with-stdclass](http://www.richardcastera.com/blog/php-convert-array-to-object-with-stdclass)

# asp.net-mvc - IIS .NET 授权规则或 MVC 路由规则？

> ID：12855050
> 
> 赞同：0
> 
> 时间：2012-10-12T08:27:40.463
> 
> 标签：asp.net-mvc, security, iis, asp.net-mvc-routing, rules

我想限制对文件夹的访问，而不是页面，所以我认为最好的方法是使用 IIS 远程管理器并添加一个 .NET 授权规则条目以拒绝所有用户访问相关文件夹。

下一步是为可能处于特定角色的用户添加授权（我猜这适用于登录到 MVC 站点的用户，但我还不知道）。

在测试的第一步中，我发现 MVC 3 应用程序将访问者引导到登录页面。

我遇到的第一个挑战，仍在寻求解决。

原始子域格式：

```
subdomain1.site.com 
```

锁定文件夹是“图像”，但锁定文件夹的路径：

```
subdomain1.site.com/content/images 
```

当您尝试访问锁定文件夹中的图像时，您将被重定向到：

```
subdomain1.site.com/subdomain1/Account/LogOn... 
```

我希望这是：

```
subdomain1.site.com/Account/LogOn... 
```

我在 StackOverFlow 上发布了另一个关于[URL 重写的问题……](https://stackoverflow.com/questions/12854705/iis-7-url-rewrite-config-issue-or-mvc-route)不确定正确的解决方案应该是什么，所以我将这些问题分开。

我知道您可以根据登录的用户和角色限制页面，但这仅适用于页面，而不适用于文件夹中可能存在的文件。

我对此的想法是拒绝对文件夹的所有访问，然后添加授权角色的规则。如果安全按照我认为的方式工作，那么当用户登录到 MVC 3 站点时，他们将拥有具有分配角色的凭据。

在这种能力下，只要在规则中映射了相同的角色，它就应该允许他们访问锁定文件夹中的任何受限文件。

# java - Java中的for-each循环用于不同的对象

> ID：12855051
> 
> 赞同：0
> 
> 时间：2012-10-12T08:27:41.423
> 
> 标签：java, foreach

我创建了一个包含所有内容的 pacman 游戏，但问题是幽灵及其动画需要大量代码。

例子：

目前，每个幽灵都需要 3 个 if 语句，即每个幽灵 20 行代码，如果我在游戏中有 3 个幽灵，则 3 x 20 = 60 行无用代码。

以我的 php 经验，我会说.. 使用 foreach 循环或类似的东西.. 但我应该如何在 Java 中做到这一点？有人可以给我一个例子吗？我现在的做法发表在下面：

创建幽灵对象；

```
DrawPacMan ghost1 = new DrawPacMan();
DrawPacMan ghost2 = new DrawPacMan(); 
```

这幅画是这样的：

```
int g1x = 0;
boolean g1r = true;
public void paintComponent(Graphics g) {
    super.paintComponent(g);
    // pacman movement
    diameter = 75;   
    pacman.drawPacMan(g, getHorPlaats(), getVerPlaats(), diameter, getView(), Color.yellow);
    // ghosts movement
    if(g1r == true) {
        g1x += ghostSpeed;          
    }       
    if(g1r == false) {          
        g1x -= ghostSpeed;
    }
    if(g1x == 500 || g1x == 0) {
        g1r = !g1r;
    }
    System.out.println(g1r);
    ghost1.drawGhost(g, g1x, 40, diameter, Color.red);
    ghost2.drawGhost(g, 170, 70, diameter, Color.blue);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T08:30:19.540

在我看来，您并没有以面向对象的方式处理此问题。为什么不使用幽灵的集合，例如。并用它的位置、颜色等`List<Ghost>`定义一个对象？`Ghost`

这一行：

```
 ghost1.drawGhost(g, g1x, 40, diameter, Color.red); 
```

然后将替换为

```
 ghost.draw(g); 
```

你会遍历列表，调用`draw()`每一个。

```
 for(Ghost ghost : ghosts) {
     ghost.draw(g); // pass in the graphics context
  } 
```

每个幽灵都*知道*它的位置、颜色、状态等，您可以根据需要创建任意数量：

```
 List<Ghost> ghosts = new ArrayList<Ghost>();
  for (int i = 0; i < 10; i++) {  
      ghosts.add(new Ghost());
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T08:49:19.317

由于您似乎是 Java 新手，并且仍在了解最好的习语，因此我会就一些不直接回答您的问题但在更一般意义上的问题提供建议。你的代码

```
if(g1r == true) {
    g1x += ghostSpeed;          
}       
if(g1r == false) {          
    g1x -= ghostSpeed;
} 
```

可以重写为

```
g1x += ghostSpeed * (g1r? 1 : -1); 
```

一般注意事项：永远不要将布尔值与文字值进行比较。`b == true`与 just 相同，`b`与`b == false`相同`!b`。

这段代码

```
if (g1x == 500 || g1x == 0) {
    g1r = !g1r;
} 
```

可能会在运行时导致错误，因为您没有在它之前添加围栏代码：`g1x`可以轻松超越您的限制。你应该改写

```
if (g1x >= 500) { g1x = 500; g1r = false; }
else if (g1x <= 0) { g1x = 0; g1r = true; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T08:36:52.407

1.  在同一个函数中将 ghost 对象作为另一个参数传递 paintComponent(Graphics g, Ghost gr)
2.  您可以使条件语句内联，例如 g1r == true ？g1x += ghostSpeed : g1x -= ghostSpeed

# openlayers - 向现有线串添加点

> ID：12855052
> 
> 赞同：3
> 
> 时间：2012-10-12T08:27:43.813
> 
> 标签：openlayers

是否可以将点添加到 openlayers 中的现有线串？我有一个来自服务器的点流，我希望在它们到达客户端时绘制这些点。目前，我能看到的唯一方法是在每次有新点进入时从我收到的最后一个点到新点画一条线，如下所示：

```
Drawer.prototype.drawPoint = function(point)
{
    var line = new OpenLayers.Geometry.LineString([this.lastPoint, point]);
    var lineFeature = new OpenLayers.Feature.Vector(line, null, this.style);
    this.lineLayer.addFeatures([lineFeature]);
    this.lastPoint = point;
} 
```

这似乎效率低下。显然，我可以保留所有点的数组并在每次出现新点时重新绘制整条线，但这似乎也效率低下。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T09:02:30.220

`OpenLayers.Geometry.LineString``addPoint(point, index)`通过它派生的类有一个方法`OpenLayers.Geometry.MultiPoint`，看看[源代码](https://github.com/openlayers/openlayers/blob/master/lib/OpenLayers/Geometry/MultiPoint.js)。

所以你的解决方案应该很简单：

```
line.addPoint(point); //second parameter(index) is optional 
```

您可能还需要`redraw()`在图层上调用方法。

# php - 父子关系 PHP 和 MYSQL

> ID：12855053
> 
> 赞同：1
> 
> 时间：2012-10-12T08:27:44.310
> 
> 标签：php, mysql, sql, join

我有一张这样的桌子：

```
**id     name     parent_id**
1       X         2 
2       Y         2
3       Z         1
4       A         5
5       B         6
6       C         1

I want output look like this: 
**name       *parent name***
X           Y
Y           Y
Z           X
A           B
B           C
C           X 
```

是否可以通过使用 JOIN 进行一次查询？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T08:34:35.543

您需要执行自加入：

```
SELECT child.name AS `name`, parent.name AS `parent name`
FROM   my_table AS child JOIN my_table AS parent ON parent.id = child.parent_id 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/3aa60/1/0)上查看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T08:32:04.587

`select son.name as name, father.name as parent_name from table_name as son left join table_name as father ON son.parent_id = father.id`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T08:33:55.213

您可以使用[JOIN](http://dev.mysql.com/doc/refman/5.0/en/join.html)来执行此操作

例子：

```
SELECT
    table.name
    , parent.name as parent_name
FROM
    table
LEFT JOIN
    parent ON parent.parent_id = table.parent_id
WHERE
    table.visible = 1 
```

之后，您将通过返回的项目数组（数组或对象 - 取决于您使用的 MySQL 抽象）在 php 循环中处理来自查询的响应，将所需的内容保存在您自己的数组中，或者只是将此数组编码为 JSON。

注意：我不知道您需要什么，但`table.id`如果您希望后者能够识别一条记录，最好将其包含在结果中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T08:34:19.237

假设您有 2 张桌子：

1.  `product`
2.  `product_parent`

然后，您运行如下查询：

```
SELECT product.name, product_parent.name
FROM product
INNER JOIN product_parent
ON product.product_parent_id=product_parent.id 
```

# windows-8 - 是否有适用于 Windows 8 商店应用程序的等效游戏中心？

> ID：12855059
> 
> 赞同：3
> 
> 时间：2012-10-12T08:28:13.590
> 
> 标签：windows-8, microsoft-metro, windows-runtime, leaderboard

我找到了适用于 WP7 的 ScoreLoop，但找不到适用于 Windows 8 游戏的任何东西。理想情况下，我想要管理排行榜、奖项、徽章等的东西。

Windows 8 Store 应用程序是否存在这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T19:05:12.170

我不是在哪里获得这些位等，但这是在 2011 年构建时讨论过的：http: [//channel9.msdn.com/Events/BUILD/BUILD2011/PLAT-756T](http://channel9.msdn.com/Events/BUILD/BUILD2011/PLAT-756T)

# java - Java Bean 投影

> ID：12855062
> 
> 赞同：3
> 
> 时间：2012-10-12T08:28:30.740
> 
> 标签：java, javabeans, projection

是否有任何库可以轻松实现 Java bean 的投影？

我有一个按照 Javabean 约定用 getter 和 setter 编写的 bean，在运行时在不同的地方我想采用一个完全填充的 bean，并创建一个新实例，其中只填充了原始属性的子集。

可以使用 QueryDSL 之类的东西吗？Jackson 有可以在 JSON 序列化上下文中使用的视图，但我一直在寻找 Java 到 Java 的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T08:31:15.887

查看[Apache Commons BeanUtils](http://commons.apache.org/beanutils/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T08:36:00.533

[Dozer](http://dozer.sourceforge.net/)是一个 bean-mapper，它将使用反射复制属性。如果需要，可以将其配置为仅包含属性的子集。

# jquery - Json分区jQuery

> ID：12855064
> 
> 赞同：0
> 
> 时间：2012-10-12T08:28:34.110
> 
> 标签：jquery, json, parsing

我是 jQuery 新手，我找到了一个示例，通过使用该示例，我解析了我的 json 字符串，如下所示，但我发现所有输出都是未定义的而不是值。

```
$(document).ready(function() {
    $(document).bind("contextmenu",function(e){
        return false;
    });
    var jsonp = '{"members":[{"User_name":"Vrushank","Email":"eqr@ewr.in"},{"User_name":"dfdaf","Email":"afafi@df.in"},{"User_name":"vimlesh","Email":"vimlesh@lidsfdthe.in"},{"User_name":"nirav","Email":"havsr@lifgffe.in"},{"User_name":"parth","Email":"vasavada@zfs.in"},{"User_name":"fsd","Email":"test.test@gmail.com"}]}';
    var lang = '';
    var user = '';
    var email = '';
    alert(jsonp);
    var obj = $.parseJSON(jsonp);
    //alert(obj);
    $.each(obj, function() {
        lang += this['members'];
        alert(lang);
        $.each(lang, function() {
            user = this['User_name'];
            email = this['Email'];
            $('span').append(user +":"+email+"<br/>");
            user="";email="";
        });

    });

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T08:33:04.353

你不需要打两个`$.each`电话。做就是了：

```
$.each(obj.members, function(i, member) {
       $('span').append([member['User_name'], ':', member['Email'], '<br/>'].join(''));
});​ 
```

看到**[这个小提琴](http://jsfiddle.net/frederikring/4Embv/)**

**[$.getJSON 上](http://api.jquery.com/jQuery.getJSON/)**的jQuery 文档确实有一个很好的示例，说明如何使用**[$.each()循环遍历 JSON 数据](http://api.jquery.com/jQuery.each/)**

# ruby-on-rails - 在 Rails 中将 .zip 文件作为电子邮件附件发送

> ID：12855067
> 
> 赞同：2
> 
> 时间：2012-10-12T08:28:40.393
> 
> 标签：ruby-on-rails

所以我正在尝试发送一封包含 .zip 文件的电子邮件。.zip 文件位于另一台服务器上的另一个 url。我能够检索文件，附加并发送它。但是，当我从电子邮件中获取附件时。它不会打开，因为它说无法打开 *.zip.zip 我已尝试删除名称中的 .zip，但存档管理器也无法打开它。

有任何想法吗？

代码如下。

```
http = Net::HTTP.new('www.somedomaim.org')
  http.start() { |http|
    req = Net::HTTP::Get.new("/path/to/file.zip")
    response = http.request(req)
    tempfile = Tempfile.new('files')
    File.open(tempfile.path, 'w') do |f|
      f.write response.body
    end
     attachments["files.zip"] = File.read(tempfile.path)
     mail to: someone@somewhere.com, subject: "Sending zip file"
  } 
```

**[解决了]**

解决方案相当简单。

```
attachments['files.zip'] = open('http://somedomain.com/path/to/file.zip').read 
```

附件需要接收文件的内容。.read 返回文件的内容。我的问题是我将整个 zip 文件放在新文件的内容中。上述解决方案将仅将 zip 的内容放入一个新文件中。

希望有一天这对某人有所帮助。感谢所有的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-03T18:29:57.980

解决方案相当简单。

```
attachments['files.zip'] = open('http://somedomain.com/path/to/file.zip').read 
```

附件需要接收文件的内容。.read 返回文件的内容。我的问题是我将整个 zip 文件放在新文件的内容中。上述解决方案将仅将 zip 的内容放入一个新文件中。

# powershell - 此计算机上未安装 WAPPSCmdlets

> ID：12855083
> 
> 赞同：1
> 
> 时间：2012-10-12T08:29:26.690
> 
> 标签：powershell, azure, windows-authentication, azure-web-roles, azure-diagnostics

我有一台 Windows 2008 R2 机器，我已经从以下链接安装了 VS2010 和 SP1、Windows Azure SDK 1.7 以及 Azure SDK 和 PowerShell cmdlet 的所有其他工具

[https://www.windowsazure.com/en-us/manage/downloads/](https://www.windowsazure.com/en-us/manage/downloads/)

当我为 Windows Azure Cmdlet 运行 Windows Powershell 时，它显示错误：

> Add-PSSnapin：此计算机上未安装 Windows PowerShell 管理单元“WAPPSCmdlets”。在 line:1 char:21 + cd c:\; add-pssnapin <<<< WAPPSCmdlets + CategoryInfo : InvalidArgument: (WAPPSCmdlets:String) [Add-PSSn apin], PSArgumentException + FullyQualifiedErrorId : AddPSSnapInRead,Microsoft.PowerShell.Commands.Ad dPSSnapinCommand

我也尝试了以下链接，但没有用。 [http://social.msdn.microsoft.com/Forums/is/windowsazuredevelopment/thread/4c59fc7e-3ead-482e-88c3-f5555e915c84](http://social.msdn.microsoft.com/Forums/is/windowsazuredevelopment/thread/4c59fc7e-3ead-482e-88c3-f5555e915c84)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T09:00:03.280

您可以尝试手动加载模块吗？

```
Import-Module "C:\Program Files (x86)\Microsoft SDKs\Windows Azure\PowerShell\Azure\Azure.psd1" 
```

然后只需尝试任何 CmdLet（如`Add-AzureCertificate`），看看您是否可以使用它。

**更新：**由于 Add-AzureCertificate 适用于您，这意味着所有 cmdlet 现在都可用。为了让事情变得更容易，您可以简单地在桌面上创建一个具有以下目标的快捷方式：

> C:\Windows\SysWOW64\WindowsPowerShell\v1.0\powershell.exe -NoExit -Command "cd 'C:\'; Get-ChildItem 'C:\Program Files (x86)\Microsoft SDKs\Windows Azure\PowerShell\Azure *.psd1' | ForEach-Object {Import-Module $_}"

# php - PHP和JQuery的序列化和参数返回问题

> ID：12855084
> 
> 赞同：0
> 
> 时间：2012-10-12T08:29:28.083
> 
> 标签：php, jquery, parameters

我有以下代码：

```
 var data_str = $('form').serialize();
    alert(data_str);
    $("#SerializeTXT").text(data_str).show();
    $.ajax( {
        type: 'POST',
        url: 'test.php',
        data: data_str,
        success: function(data) {
            $('#result').html(data);
        }           
   }); 
```

这是我的 test.php 和结果：

```
<?php print_r($_POST);?> 
```

在我得到的#result

```
Array ( [itemIDhidden] => 2640 [SelectQt] => 1 [Bread] => Black Bread_0 [Cheese] => American_0 [Toppings] => Bacon_0 [Description] => TWSTE 3 45 T4 ) 
```

在我得到的 SerializeTXT

```
itemIDhidden=2640&SelectQt=1&Bread=Black+Bread_0&Cheese=American_0&Toppings=Sauteed+Mushrooms_0&Toppings=Fried+Onions_0&Toppings=Bacon_0&Description=TWSTE+3+45+T4 
```

可以看到帖子只获取了多选元素的最后一个元素。在 SerializeTXT div 中，我得到了从表单中选择的确切内容。

有什么想法，我怎样才能获得 php 文件中的所有这些参数？

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T08:31:54.763

`select`将元素的名称从更改`Toppings`为`Toppings[]`

```
<select name="Toppings" ... 
```

至

```
<select name="Toppings[]" ... 
```

然后`$_POST['Toppings']`将是一个数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T22:49:14.103

```
 var form = $('form');
    var data_str = '';
    form.find('input, select, textarea').each(function()
        {
            data_str += $(this).attr('name')+'='+$(this).val()+'&';
        });
    $.ajax( {
        type: 'POST',
        url: 'test.php',
        data: data_str,
        success: function(data) {
            $('#result').html(data);
        }           
   });
    }; 
```

test.php print_r($_POST); 返回

Array ( [itemIDhidden] => 2643 [SelectQt] => 1 [Bread] => Multi-Grain Bun_0 [Cheese] => American_0,Swiss_0 [Toppings] => Fried Onions_0,Bacon_0,Raw Onion_0 [Description] => TEST TEST测试 [CancelItemForm] => 取消 [BasketItem] => 确认）。

这个数组可以很容易地在 PHP 文件中操作。我希望这对外面的一些人有所帮助

# android - 如何从列表视图中找到选中的复选框？

> ID：12855089
> 
> 赞同：1
> 
> 时间：2012-10-12T08:29:46.690
> 
> 标签：android, listview, checkbox

我有一个列表视图，每行都有一个复选框。我正在使用 viewholder 模式来加载列表，如下所示：

```
View view = convertView;
        if(view == null) {
            LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            view = inflater.inflate(R.layout.setting_list_item, null);

            ViewHolder viewHolder = new ViewHolder();
            viewHolder.cbCat = (CheckBox) view.findViewById(R.id.cbCat);

            view.setTag(viewHolder);
        }
        ViewHolder vh = (ViewHolder) view.getTag();
        vh.cbCat.setText(bt.getName()); 
```

但是当我尝试获取选中的复选框时，如下所示：

```
for(int i = lvCatList.getFirstVisiblePosition(); i < settingAdapter.getCount(); i++) {
            View v = lvCatList.getChildAt(i);
            CheckBox cbx = (CheckBox) v.findViewById(R.id.cbCat);

            if(cbx != null && cbx.isChecked()) {
                toast += " / " + settingAdapter.getItem(i).getName();
                Log.d("CHECKED", toast);
            } 
```

只能获取可见的复选框。如果复选框在屏幕中不可见，则会引发异常。

如何检查列表中的复选框是否被选中。？
}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T08:35:54.493

请参考以下示例以从列表视图中获取选中的项目。[带复选框的 ListView](http://blog.marvinlabs.com/2010/10/29/custom-listview-ability-check-items/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T08:48:36.867

选中复选框时，您可以将选定的复选框值添加到数组列表

```
List<String> SelectedBox = new ArrayList<String>();

View.setOnCheckedChangeListener(new OnCheckedChangeListener()
{
    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked)
    {
        if(isChecked)
            {
                SelectedBox.add(id);
            }
            else
            {
                SelectedBox.remove(id);
            }
    }
}); 
```

当您需要检查复选框是否被选中时，只需参考 SelectedBox

# wpf - 当 IsMouseOver=true 时如何更改 DataGridRow 前景？

> ID：12855094
> 
> 赞同：0
> 
> 时间：2012-10-12T08:30:09.503
> 
> 标签：wpf, datagrid, styles, ismouseover

我在我的应用程序中面临一个问题，即在 datagridrow 的 IsMouseOver= true 属性中更改了背景颜色，但我无法更改前景。要检查属性，我使用了触发器。。谁能帮我解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T08:36:52.327

```
<Style TargetType="DataGridRow"> 
    <Style.Triggers> 
        <Trigger Property="IsMouseOver" Value="True"> 
             <Setter Property="Foreground" Value="Green" />
        </Trigger> 
    </Style.Triggers>
</Style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T08:48:34.127

要在鼠标悬停时更改`DataGridRow`前景色，您必须使用样式触发器。这是一个如何做的例子。在此示例中，我将`Foreground`颜色设置为白色以使其更明显。

**XAML：**

```
<Window x:Class="PocWpf.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Grid.Resources>
            <Style TargetType="{x:Type DataGridRow}" x:Key="GreenForegroundStyle">
                <Style.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter Property="Foreground" Value="White" />
                    </Trigger>
                </Style.Triggers>
            </Style>
        </Grid.Resources>
        <DataGrid x:Name="dgTest" AutoGenerateColumns="True" RowStyle="{StaticResource GreenForegroundStyle}">

        </DataGrid>
    </Grid>
</Window> 
```

**后面的代码：**

```
namespace PocWpf
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

            this.Loaded += new RoutedEventHandler(MainWindow_Loaded);
        }

        void MainWindow_Loaded(object sender, RoutedEventArgs e)
        {
            var list = new List<string>();

            list.Add("A");
            list.Add("A");
            list.Add("A");
            list.Add("A");
            list.Add("A");
            list.Add("A");
            list.Add("A");
            list.Add("A");
            list.Add("A");
            list.Add("A");

            this.dgTest.ItemsSource = list;
        }
    }
} 
```

**这是结果：**
![在此处输入图像描述](../Images/60299408df2b16136f4db28da2718e6b.png)

# android - ANR（强制关闭/等待）同时生成足够大的列表

> ID：12855097
> 
> 赞同：3
> 
> 时间：2012-10-12T08:30:24.140
> 
> 标签：android, android-anr-dialog

我正在创建一种文件资源管理器，如果将任何应用程序文件复制到手机/SD 卡，我将在带有对话框主题的活动中向用户显示它。对于每个复制的新“app.apk”，我将应用程序的名称和位置附加到对话框中，并且列表是可滚动的。我的问题是，如果我一次将大约 200 多个应用程序复制到存储中，列表填充会给出强制关闭/等待对话框 (ANR)。如何防止我的应用出现这种 ANR？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T09:33:15.723

如果一些大型计算和 UI 尝试同时运行并且需要足够的时间来启动（大约超过 5 秒），那么系统会考虑用户关闭应用程序。

为了解决这个问题，一种选择是将您的操作分配到不同的子线程中，然后在异步线程 (runOnUiThread) 上运行 UI 以调度应用程序任务。

```
new Thread() {
    @Override
    public void run() {
        try {
            // code runs in a thread
            activity.runOnUiThread(new Runnable() {
                @Override
                public void run() {
                    // code runs in a UI(main) thread
                }
            });
        } catch (final Exception ex) {
        }
    }
}.start(); 
```

# c# - C#中合适的数据类型

> ID：12855098
> 
> 赞同：0
> 
> 时间：2012-10-12T08:30:29.443
> 
> 标签：c#, c#-4.0, c#-3.0

我想以以下格式存储和处理我拥有的信息。

请让我知道 C# 中可以使用哪些合适的数据类型来满足此要求。

“stat”也是我想附在每个节点上的附加信息。我应该如何在每个节点上携带它。

```
Root -stat
       |
       !_Node1 - stat
       |         |_Node1-1  stat
       |       
       |_Node2 -stat
         |_Node2-1 - stat 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T08:33:35.383

那这个呢？

```
public class Node
{
    public string Stat;
    public List<Node> Children;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T09:31:03.623

您的数据结构是一个[复合模式](http://en.wikipedia.org/wiki/Composite_pattern)：

> 零件 ：
> 
> *   是所有组件的抽象，包括组合组件声明组合中对象的接口
> *   （可选）在递归结构中定义一个用于访问组件父级的接口，并在合适的情况下实现它
> 
> 叶子 ：
> 
> *   表示组合中的叶子对象。
> *   实现所有组件方法
> 
> 合成的 ：
> 
> *   表示复合组件（具有子组件的组件）
> *   实现方法来操纵孩子
> *   实现所有 Component 方法，通常通过将它们委托给其子级

![在此处输入图像描述](../Images/e89012b4e6ebd5697428a2e15f46a0ef.png)

# c# - 根据带有 MonoTouch.Dialog 的 RadioElement 的值显示多个 RootElement(s)

> ID：12855099
> 
> 赞同：2
> 
> 时间：2012-10-12T08:30:29.847
> 
> 标签：c#, xamarin.ios, monotouch.dialog

我一直在寻找有关如何执行此操作的信息：

我需要根据 RadioGroup 的值创建多个`RootElement`s，我不太确定如何或在哪里编写它。

理想情况下，它会创建一个新的`RootElement`（ColorsRoot）并将其称为“Color1”、“Color2”等。

这是我到目前为止所得到的。

```
 public override bool FinishedLaunching (UIApplication app, NSDictionary options)
    {
        // create a new window instance based on the screen size
        window = new UIWindow (UIScreen.MainScreen.Bounds);
        int i = 1;
        RootElement ColumnRoot;
        RootElement ColorsRoot = new RootElement ("Color" + i, new RadioGroup ("color" + i, 0)){
            new Section(){
                new RadioElement("Red", "color"+i),
                new RadioElement("Light red", "color"+i),
                new RadioElement("Dark red", "color"+i),
                new RadioElement("Green", "color"+i),
                new RadioElement("Light green", "color"+i),
                new RadioElement("Dark green", "color"+i),
                new RadioElement("Blue", "color"+i),
                new RadioElement("Light blue", "color"+i),
                new RadioElement("Dark blue", "color"+i),
            }
        };
        EntryElement NameEntry;
        BooleanElement OrientationBool;

        var rootView = new RootElement("TouchBow"){
            new Section(){
                new RootElement("New rainbow"){
                    new Section("New rainbow"){
                        (NameEntry = new EntryElement("Name", "Enter a name", "")),
                        (ColumnRoot = new RootElement("Columns", new RadioGroup("columns",1)){
                            new Section(){
                                new RadioElement("3", "columns"),
                                new RadioElement("5", "columns"),
                                new RadioElement("9", "columns")
                            }
                        }),
                        //MAGIC COLOR IS HAPPENING RIGHT HERE?!
                        new RootElement("Colors"){
                            new Section(){
                                (ColorsRoot),
                                (ColorsRoot)
                            }
                        },
                        (OrientationBool = new BooleanElement("Horizontal", false)),
                    },
                    new Section(){
                        new StringElement("Save rainbow", delegate{
                            Console.WriteLine ("Name.Value: " 
                                               + NameEntry.Value + 
                                               ". ColumnRoot.RadioSelected: " 
                                               + ColumnRoot.RadioSelected +
                                               ". Color: "
                                               + ColorsRoot.RadioSelected +
                                               ". Orientation: "
                                               + OrientationBool.Value);
                        }),
                        new StringElement("View rainbow",
                                          () => { new UIAlertView("Tapped", "String Element Tapped", null, "ok", null).Show();
                        })
                    }
                },
                new StringElement("Load rainbow", delegate{

                    Console.WriteLine ("Name.Value: " + NameEntry.Value + ". ColumnRoot.RadioSelected: " + ColumnRoot.RadioSelected);
                })
            }
        };

        // If you have defined a view, add it here:
        // window.AddSubview (navigationController.View);
        var dvc = new DialogViewController(rootView);
        var nav = new UINavigationController(dvc);
        window.RootViewController = nav;
        // make the window visible
        window.MakeKeyAndVisible ();

        return true;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T02:34:42.697

请记住，您可以保存对层次结构各个部分的引用，并且可以动态添加和删除元素。

# struts2 - 如何扩展struts 2标签？

> ID：12855101
> 
> 赞同：1
> 
> 时间：2012-10-12T08:30:32.097
> 
> 标签：struts2, custom-tags

我想扩展 Struts 2 s:select 标签。有人可以解释执行相同操作所需的步骤。此外，如果 Struts2 框架中有任何可用的钩子或实现

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T08:49:52.853

我认为您可以根据需要更改*freemarker*模板并扩展`org.apache.struts2.views.jsp.ui.SelectTag` [class](http://struts.apache.org/2.x/struts2-core/apidocs/org/apache/struts2/views/jsp/ui/SelectTag.html)。

从这篇[文章](http://bodez.wordpress.com/2009/03/13/customising-struts2-jsp-tags/)开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T10:18:42.990

您可以从检查 freemarker 模板开始（默认是 freemarker，但它可以是速度或其他模板引擎）。请参阅[http://mikeski.net/site/node/16](http://mikeski.net/site/node/16)。

如果这对您来说还不够，那么您可以扩展或创建您自己的 select 标签实现。[http://joshuajava.wordpress.com/2008/12/27/creating-custom-components-with-struts-2/](http://joshuajava.wordpress.com/2008/12/27/creating-custom-components-with-struts-2/)

# android - eglCreateWindowSurface 因 java.lang.IllegalArgumentException 而失败

> ID：12855103
> 
> 赞同：7
> 
> 时间：2012-10-12T08:30:41.160
> 
> 标签：android, opengl-es, opengl-es-2.0, glsurfaceview

在使用 启动某些活动期间尝试快速按下后退按钮时`GLSurfaceView`，`eglCreateWindowSurface`失败并显示`java.lang.IllegalArgumentException`。

我收到以下错误：

```
10-08 18:05:36.490: E/GLSurfaceView(3440): eglCreateWindowSurface
10-08 18:05:36.490: E/GLSurfaceView(3440): java.lang.IllegalArgumentException: Make sure the SurfaceView or associated SurfaceHolder has a valid Surface
10-08 18:05:36.490: E/GLSurfaceView(3440): at com.google.android.gles_jni.EGLImpl._eglCreateWindowSurface(Native Method)
10-08 18:05:36.490: E/GLSurfaceView(3440): at com.google.android.gles_jni.EGLImpl.eglCreateWindowSurface(EGLImpl.java:90)
10-08 18:05:36.490: E/GLSurfaceView(3440): at android.opengl.GLSurfaceView$DefaultWindowSurfaceFactory.createWindowSurface(GLSurfaceView.java:798)
10-08 18:05:36.490: E/GLSurfaceView(3440): at android.opengl.GLSurfaceView$EglHelper.createSurface(GLSurfaceView.java:1065)
10-08 18:05:36.490: E/GLSurfaceView(3440): at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1433)
10-08 18:05:36.490: E/GLSurfaceView(3440): at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1216) 
```

`SurfaceHolder.Callback.surfaceCreated`这些活动在之前或之后都没有调用 GL 操作`SurfaceHolder.Callback.surfaceDestroyed`。

有没有其他人遇到过这个问题，解决方案是什么？

感谢您的任何提前。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-15T08:02:40.273

在多个活动之间切换会迅速撕掉窗口表面。

我修补`GLSurfaceView.guardedRun()`以避免竞争条件`GLSurfaceView`

从：

```
 if (createEglSurface) {
                    if (LOG_SURFACE) {
                        Log.w("GLThread", "egl createSurface");
                    }
                    gl = (GL10) mEglHelper.createSurface(getHolder());
                    if (gl == null) {
                        // Couldn't create a surface. Quit quietly.
                        break;
                    }
                    sGLThreadManager.checkGLDriver(gl);
                    createEglSurface = false;
                } 
```

至：

```
 if (createEglSurface) {
                    if (LOG_SURFACE) {
                        Log.w("GLThread", "egl createSurface");
                    }
                    gl = (GL10) mEglHelper.createSurface(getHolder());
                    if (gl == null) {
                        // If we escape, GLThread ends up. Don't escape.
                        continue;
                    }
                    sGLThreadManager.checkGLDriver(gl);
                    createEglSurface = false;
                } 
```

在我看来，这个问题已[在 JellyBean 中得到解决](https://github.com/android/platform_frameworks_base/commit/7d73df83f9a28950f404e957eb2e4ea1e8525c55)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-07T16:54:13.167

我遇到了同样的问题，并通过为 surfaceDestroyed 设置回调并调用 super.surfaceDestroyed 来修复它。

```
glSurfaceView = new GLSurfaceView(context) {
    public void surfaceDestroyed(SurfaceHolder holder) {
        super.surfaceDestroyed(holder);
    }
}; 
```

# c# - 如何在 Windows 中连接媒体设备

> ID：12855107
> 
> 赞同：0
> 
> 时间：2012-10-12T08:30:41.940
> 
> 标签：c#, .net, webcam

我将准备一个应用程序（charp），询问用户想要使用哪个网络摄像头并从选定的网络摄像头获取流。为此，我需要搜索并找到连接到计算机的网络摄像头，这是我的第一步。第二步是从该网络摄像头获取流。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T08:36:57.910

您可以使用此代码 - 基于`ManagementObjectSearcher` `class`

```
static List<USBDeviceInfo> GetUSBDevices()
    {
      List<USBDeviceInfo> devices = new List<USBDeviceInfo>();

      ManagementObjectCollection collection;
      using (var searcher = new ManagementObjectSearcher(@"Select * From Win32_USBHub"))
        collection = searcher.Get();      

      foreach (var device in collection)
      {
        devices.Add(new USBDeviceInfo(
        (string)device.GetPropertyValue("DeviceID"),
        (string)device.GetPropertyValue("PNPDeviceID"),
        (string)device.GetPropertyValue("Description")
        ));
      }

      collection.Dispose();
      return devices;
    } 
```

# azure - Windows Azure - 免费试用

> ID：12855115
> 
> 赞同：-4
> 
> 时间：2012-10-12T08:31:04.637
> 
> 标签：azure, sms, verification

我想试试，[windows azure 免费试用](https://account.windowsazure.com/signup?offer=ms-azr-0018p&wa=wsignin1.0)，但是我们的国家没有在支持短信的国家中列出，所以无法收到任何使用电话号码的验证，有什么解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T08:48:15.097

查看常见问题解答[https://www.windowsazure.com/en-us/support/faq/](https://www.windowsazure.com/en-us/support/faq/)

它列出了 Azure 可用的国家/地区。

# javascript - 根据屏幕分辨率javascript更改div高度

> ID：12855116
> 
> 赞同：3
> 
> 时间：2012-10-12T08:31:05.680
> 
> 标签：javascript, css, styles, height

这是问题所在。我有

```
<div id="main"></div> 
```

我想使用javascript检查用户分辨率并根据用户分辨率更改他的高度？

Javascript：

```
window.onload = function() {
    var height = screen.height
    document.getElementById(main).style.height = height;
}; 
```

我什至试试这个：

```
window.onload = function() { 
    var height = screen.height 
    var ele = document.getElementById(main);
    if(ele.style.height == "auto") 
    {
            ele.style.height = height;
    }
    else {
        ele.style.height = height;
    }
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T08:51:18.620

如果要设置屏幕高度：

```
var mainNode = document.getElementById("main");
mainNode.style.height = screen.height + "px"; 
```

[屏幕可用高度](http://www.w3schools.com/jsref/prop_screen_availheight.asp)

[屏幕高度](http://www.w3schools.com/jsref/prop_screen_height.asp)

[DOMElement 客户端高度](http://www.w3schools.com/jsref/dom_obj_all.asp)

屏幕高度不同于客户端高度 (document.documentElement.clientHeight)。

# sql - 需要帮助来编写查询以获取组中的最高号码

> ID：12855122
> 
> 赞同：1
> 
> 时间：2012-10-12T08:31:16.397
> 
> 标签：sql, sql-server

我的表有以下列，（复制以创建测试表）

```
CREATE TABLE dbo.[PDNApprovalDetail](
    [PDNApprovalMasterID] [int] NOT NULL,
    [PDNMasterID] [int] NOT NULL,
    [PDNApprovalDetailID] [int] IDENTITY(1,1) NOT NULL,
    [DocumentToApproveID] [int] NULL,
    [RulesID] [int] NULL,
    [RuleSignatureTypeID] [smallint] NULL,
    [SignatureTypeID] [smallint] NULL,
    [ApprovalOrder] [smallint] NULL,
 CONSTRAINT [PK_PDNApprovalDetail] PRIMARY KEY CLUSTERED 
(
    [PDNApprovalDetailID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

-- use this insert statement

INSERT INTO [dbo].[PDNApprovalDetail]
           ([PDNApprovalMasterID]
           ,[PDNMasterID]
           ,[DocumentToApproveID]
           ,[RulesID]
           ,[RuleSignatureTypeID]
           ,[SignatureTypeID]
           ,[ApprovalOrder])
     VALUES
           (136
           ,125
           ,7
           ,2
           ,1
           ,0
           ,1) 
```

我表中的数据可能如下所示（复制并粘贴以插入查询）

```
136,    125,    7,  2,  1,  0,  1
135,    125,    7,  2,  1,  1,  1
136,    125,    7,  2,  1,  1,  1
135,    125,    7,  2,  0,  0,  1
137,    126,    7,  2,  1,  0,  1
137,    126,    7,  2,  1,  0,  1
139,    126,    7,  2,  0,  1,  1
139,    126,    7,  2,  0,  1,  1
138,    127,    7,  2,  1,  1,  1
140,    127,    7,  2,  0,  0,  1
140,    127,    7,  2,  0,  0,  1 
```

我希望通过分组和仅获取具有 MAX PDNApprovalMasterID 的行来输出查询，对于 125 个 PDNMasterID 的组，结果不应该包含 ID 为 135 的行，对于第 125 组，依此类推，对于 126 个组，只有具有 MAX PDNApprovalMasterID 139、137 的行不应该在那里，PDNMasterID 127 结果行应该包含 140 并且不应该包含 138

查看查询如何获取其余列的总和，这是我正在尝试但没有得到正确结果的方法

```
SELECT DISTINCT pa.PDNMasterID, pa.DocumentToApproveID, pa.PDNApprovalMasterID
    , SUM(CASE WHEN pa.SignatureTypeID = pa.RuleSignatureTypeID THEN 1 ELSE 0 END) AS [Approved]
    , SUM(CASE WHEN pa.SignatureTypeID != pa.RuleSignatureTypeID THEN 1 ELSE 0 END) AS [Unapproved]
    , COUNT(*) AS RuleCount
    FROM dbo.PDNApprovalDetail pa
    WHERE pa.[DocumentToApproveID] = 7
    group by pa.PDNMasterID, pa.DocumentToApproveID, pa.PDNApprovalMasterID
    having pa.PDNApprovalMasterID = MAX(pa.PDNApprovalMasterID) 
```

上述查询的结果，它包含不应该存在的 135 PDNAapprovalMasterID 行

```
PDNMasterID DocumentToApproveID PDNApprovalMasterID Approved Unapproved RuleCount
125                 7                   135             2         0         2
125                 7                   136             1         1         2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T08:34:42.997

尝试添加`max`到`select statement`

```
SELECT pa.PDNMasterID, pa.DocumentToApproveID, MAX(pa.PDNApprovalMasterID)
    , SUM(CASE WHEN pa.SignatureTypeID = pa.RuleSignatureTypeID THEN 1 ELSE 0 END) AS [Approved]
    , SUM(CASE WHEN pa.SignatureTypeID != pa.RuleSignatureTypeID THEN 1 ELSE 0 END) AS [Unapproved]
    , COUNT(*) AS RuleCount
    FROM dbo.PDNApprovalDetail pa
    WHERE pa.[DocumentToApproveID] = 7  
    and pa.PDNApprovalMasterID = (select MAX(pa1.PDNApprovalMasterID)
                                  from  dbo.PDNApprovalDetail pa1 
                                  where pa.PDNMasterID = pa1.PDNMasterID
                                   and pa.DocumentToApproveID = pa1.DocumentToApproveID
                                  ) 
    group by pa.PDNMasterID, pa.DocumentToApproveID; 
```

## [SQL 小提琴](http://sqlfiddle.com/#!3/15738/5/0)演示

# javascript - 如果其中有 setTimeout，则不会调用 iOS 6 js 事件函数

> ID：12855123
> 
> 赞同：14
> 
> 时间：2012-10-12T08:31:21.203
> 
> 标签：javascript, jquery, ios, html, ios6

我注意到最新 iOS (iOS 6) 的这种奇怪行为。如果为任何内部具有 setTimeout 的触摸事件调用函数，则永远不会触发 setTimeout 内部的部分。

仅当存在诸如滚动和放大/缩小之类的“系统动画”时才会发生这种情况。

例如：

[http://jsfiddle.net/p4SdL/2/](http://jsfiddle.net/p4SdL/2/)

（我使用 jquery 只是为了测试，但纯 js 也会发生同样的情况）

在任何 iOS 6 设备上使用 safari 打开该页面并放大或缩小。永远不会调用警报。

如果在任何 iOS 5 设备上进行测试，这将工作得很好！似乎在这些动画期间，setTimeout 或 setInterval 被操作系统重置。这是预期的行为还是错误？

谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-17T00:03:16.523

**注意**：看起来 UIWebView 不支持 requestAnimationFrames。感谢[Guillaume Gendre](https://stackoverflow.com/users/552445/guillaume-gendre)指出！

我们正在开发的一个网络应用程序遇到了类似的问题。

对我们来说，是 touchmove 引起了问题。我们实施了一种变通方法（可在此处找到：[https](https://gist.github.com/3755461) ://gist.github.com/3755461 ），它似乎工作得很好，直到另一个问题迫使我们放弃它。（我尝试将解决方法添加到您的小提琴中，并且能够让计时器触发一次或两次，但它需要一个奇怪的手势+滚动事件，这该死的几乎不可能始终如一地重现。）

无论如何，iOS 6 中为开发人员提供的新功能之一是 requestAnimationFrames。我的解决方法基本上是计时器的包装，允许开发人员传递一个布尔值，它将调用本机函数或解决方法函数。

例如：

```
setTimeout(function(){alert("HI")}, 1000); // using native
setTimeout(function(){alert("HI")}, 1000, true); // using workaround 
```

以下是使用该解决方法的其他方法：

```
setInterval(function(){console.log("Interval")}, 1000, true);

var timer = setTimeout(function(){ /* ... */ }, 60000, true);
clearTimeout(timer);

var interval = setInterval(someFunc, 10000, true);
if(someCondition) clearInterval(interval); 
```

这是解决方法示例的两个小提琴。尝试在黑色方块上捏合/缩放：

[http://jsfiddle.net/xKh5m/embedded/result](http://jsfiddle.net/xKh5m/embedded/result)（使用原生`setTimeout`函数） [http://jsfiddle.net/ujxE3/embedded/result](http://jsfiddle.net/ujxE3/embedded/result)

我们已经在生产环境中使用此解决方法几个月了，并且没有遇到任何重大问题。

这是解决方法的公开要点：[https ://gist.github.com/4180482](https://gist.github.com/4180482)

以下是有关 requestAnimationFrames 的更多信息：

[MDN 文档](https://developer.mozilla.org/en-US/docs/DOM/window.requestAnimationFrame)

[Paul Irish on requestAnimationFrame](http://paulirish.com/2011/requestanimationframe-for-smart-animating/)

祝你好运！

# ruby-on-rails - 应该是工厂女孩错误找不到没有 ID 的模型

> ID：12855128
> 
> 赞同：1
> 
> 时间：2012-10-12T08:31:35.663
> 
> 标签：ruby-on-rails, ruby, rspec, factory-bot, shoulda

美好的一天，我从

```
 ActiveRecord::RecordNotFound:
   Couldn't find User without an ID 
```

我的模型

```
 has_many :objects, class_name: 'OrderObject', dependent: :destroy
  belongs_to :user
  belongs_to :tariff

  validates :client, :phone, :tariff_id, :days, :user_id, presence: true 
```

规格

```
 before do
    user = FactoryGirl.create(:user)
    FactoryGirl.create(:order, user_id: user.id)
  end
      context "validations" do
       it { should validate_presence_of :client  }
       it { should validate_presence_of :phone }
       it { should validate_presence_of :tariff_id }
       it { should validate_presence_of :days }
      end

      it { should have_many(:objects) } 
      it { should belong_to(:tariff) }
      it { should belong_to(:user) } 
```

工厂

```
factory :order do
    client "MyString"
    phone "MyString"
    tariff_id 1
    days 1
    # advt_payed_day 1
    # firm_payed_day 1
    user_id 1
  end 
```

**更新 1**

```
changed to
  before(:all) do
   user = FactoryGirl.create(:user )
   puts  user.id 
   order = FactoryGirl.create(:order, user_id: user.id ) 
   puts order.id

  end 
```

输出

```
Order
45
32
  should have many objects
  should belong to tariff
  should belong to user
  validations
    should require client to be set (FAILED - 1)
    should require phone to be set (FAILED - 2)
    should require tariff_id to be set (FAILED - 3)
    should require days to be set (FAILED - 4)
    should require user_id to be set (FAILED - 5) 
```

所以订单和用户被创建......

**正如Rubyman**建议的那样，更新 2 ，我改变了几件事：

```
in spec
  before(:all) do
   user = FactoryGirl.create(:user )
   #puts  user.id 
   order = FactoryGirl.create(:order, user_id: user.id ) 
   puts order 
   puts order.user_id

  end 
```

在工厂

```
 factory :order do
    client "MyString"
    phone "MyString"
    tariff_id 1
    days 1
    # user_id 1
    association :user, factory: :user
  end 
```

输出是：

```
Order
#<Order:0x00000005a866a0>
46
  should have many objects
  should belong to tariff
  should belong to user
  validations
    should require client to be set (FAILED - 1)
    should require phone to be set (FAILED - 2)
    should require tariff_id to be set (FAILED - 3)
    should require days to be set (FAILED - 4)
    should require user_id to be set (FAILED - 5)

1) Order validations 
     Failure/Error: it { should validate_presence_of :client  }
     ActiveRecord::RecordNotFound:
       Couldn't find User without an ID
     # ./app/models/order.rb:35:in `user_is_not_admin?'
     # ./spec/models/order_spec.rb:14:in `block (3 levels) in <top (required)>' 
```

****阅读tdgs**的 建议后**更新 3**是变化：在模型中没有变化：**

 **```
validates :client, :phone, :tariff_id, :days, :user_id, presence: true 
```

在规范中

```
describe Order do
  before(:each) do
   user = FactoryGirl.create(:user )
   #puts  user.id 
   order = FactoryGirl.create(:order, user_id: user.id ) 
   puts order 
   puts order.user_id
   puts order.tariff_id
   puts order.phone
   puts order.days
   puts order.client
   puts '*****'
   user = User.find(order.user_id)
   puts user.login

  end
  context "validations" do
   it { should validate_presence_of :client  }
   it { should validate_presence_of :phone }
   it { should validate_presence_of :tariff_id }
   it { should validate_presence_of :days }
   it { should validate_presence_of :user_id }
  end

  it { should have_many(:objects) } 
  it { should belong_to(:tariff) }
  it { should belong_to(:user) }
end 
```

输出：

```
#<Order:0x00000006c10ce0>
161
101
MyString
1
MyString
*****
user__7
    should require days to be set (FAILED - 1) 
```

据我所知，每个应该的输出都是有效的......

UPDATE N 应该在开头就写好了。我已经在控制台中运行（希望它能解决这个问题）

```
bundle exec rake db:migrate
bundle exec rake db:migrate:reset db:test:prepare 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T10:06:40.417

首先，您的工厂定义没有正确定义关联。你应该有这样的东西：

```
FactoryGirl.define do
  factory :user do
    sequence(:username) {|n| "username_#{n}"}
    # more attributes here
  end

  factory :tariff do
   # attributes
  end

  factory :order do
    client "MyString"
    phone "MyString"
    tariff
    user
    days 1
  end
end 
```

那么你的测试应该这样写：

```
 context "validations" do
   it { should validate_presence_of :client  }
   it { should validate_presence_of :phone }
   it { should validate_presence_of :tariff_id }
   it { should validate_presence_of :days }
  end

  it { should have_many(:objects) } 
  it { should belong_to(:tariff) }
  it { should belong_to(:user) } 
```

您当前在`before`过滤器中拥有的所有代码现在都不相关。另请注意，`before(:all)`在运行测试时 using 可能会产生一些奇怪的影响，因为它们不在**事务**中运行。`before(:each)`另一方面确实如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T08:41:22.110

试试这个

```
 before { 
   @user = FactoryGirl.create(:user, :email => "test.com", :password => "test123", ... )
   @order = FactoryGirl.create(:order, :user_id => @user.id ) 
  } 
```

工厂

```
require 'factory_girl'
FactoryGirl.define do
 factory :order do
  client "MyString"
  ...
  ...
 end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T09:15:14.167

检查如何与工厂女孩建立关联 [https://github.com/thoughtbot/factory_girl/blob/master/GETTING_STARTED.md](https://github.com/thoughtbot/factory_girl/blob/master/GETTING_STARTED.md)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T14:35:37.807

我离开了应该并重写了验证检查。这样它的工作原理：

```
 before(:each) do
   @user = FactoryGirl.create(:user )
   @order = FactoryGirl.create(:order, user_id: @user.id ) 

  end
   it 'absence of client isn\'t acceptable' do
      temp = @order.client
      @order.client = ''
      @order.should_not be_valid
      @order.client = temp
      @order.should be_valid
    end 
```**

# delphi - 高级 TMemo 功能

> ID：12855130
> 
> 赞同：0
> 
> 时间：2012-10-12T08:31:39.870
> 
> 标签：delphi, delphi-xe2, tmemo

美好的一天，告诉我，是否可以实现组件 TMemo 以下功能：

1.  在 TMemo 中输入文本，开始搜索您输入的第一个字符；
2.  如果找到匹配项，我们会推断列表中的选择，其元素显示为链接，然后单击在 TMemo 中突出的找到的文本。
3.  点击右边的链接 - 转到找到的类似于第 2 项的文本

是否可以实现一个标准的 TMemo，或者寻找一个组件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T09:12:25.413

Delphi 以易于扩展现有组件并将其转换为自定义组件而闻名。

如果您在主题之前从未开发过组件可能看起来有点混乱，所以我建议您首先通过查阅本指南来记录您自己的主题：http: [//delphi.about.com/od/vclusing/a/customvcldev.htm](http://delphi.about.com/od/vclusing/a/customvcldev.htm)

完成一些编码后，请回来询问我们您尝试了什么但没有奏效。

希望能帮助到你

# ruby-on-rails-3.2 - 我试图在单击表头时突出显示它

> ID：12855136
> 
> 赞同：1
> 
> 时间：2012-10-12T08:32:20.487
> 
> 标签：ruby-on-rails-3.2

我正在使用下面从 index.html.haml 粘贴的代码。“如果”条件永远不会返回真并且颜色没有改变，谁能告诉我为什么它不返回真

```
%table#movies
  %thead
    %tr
      - if @sort_type == 'title'
        %th.hilite= link_to "Movie Title", movies_path(:sort_type => "title"), id:"title_header"
      - else
        %th= link_to "Movie Title", movies_path(:sort_type => "title"), id:"title_header"
      %th Rating
      - if @sort_type == 'release'
        %th.hilite= link_to "Release Date", movies_path(:sort_type => "release"), id:"release_date_header"
      - else
        %th= link_to "Release Date", movies_path(:sort_type => "release"), id:"release_date_header"
      %th More Info 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T09:48:44.247

检查控制器中分配给@sort_type 的内容。一定有什么地方

```
@sort_type = :title 
```

# c# - 从 Object 读取验证属性

> ID：12855143
> 
> 赞同：2
> 
> 时间：2012-10-12T08:32:43.527
> 
> 标签：c#, validation, reflection

我有一个对象，它的属性装饰有 Validation 属性。我的验证工作正常，但是我需要一个额外的方法来执行基于这些属性的字符串操作。

考虑以下对象：

```
public class Pupil
{
    /// <summary>
    /// 
    /// </summary>
    public Pupil()
    {

    }

    [NotNullValidator]
    [StringLengthValidator(0, 54, MessageTemplate = "Invalid value '{0}' for {1}, Max length: {5}")]
    public string Name{ get; set; }

    [NotNullValidator]
    [StringLengthValidator(0, 2, MessageTemplate = "Invalid value '{0}' for {1}, Max length: {5}")]
    public string Gender{ get; set; }
} 
```

我希望能够根据 StringLengthValidator 属性及其参数来操作“名称”。例如：

```
///Takes a Pupil object in
public static void DoManipulation(object value)
    {
        foreach(var property in value.GetType().GetProperties())
        {
            if(property.Name == "Name")
            {
                var att = property.GetCustomAttributes(typeof(StringLengthValidator), false);
                var length = ((StringLengthValidator)att[0]).UpperBound;

            }               
        }
    } 
```

“长度”的值是空值，而不是 54。我怎样才能得到这个值？希望这是有道理的，谢谢。

一种

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T08:42:30.987

这对我有用，您是否获得了与`StringLengthValidator`您认为的相同的属性？（这是您的自定义类还是 Enterprise Lib 中的类？

就我而言，我创建了一个自定义类`StringLengthValidator`

![在此处输入图像描述](../Images/b03192fda0cbd0b1c935976e2edbe1be.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T08:39:08.647

这一切背后的想法是值 54 可以更改，对吗？否则你只能硬编码 54。

看看如何使用标签控制 web.config 中的验证，以便您可以将 54 添加到 web.config 并从您的应用程序中读取它

[这](http://www.codeproject.com/Articles/256355/Microsoft-Enterprise-Library-5-0-Introduction-to-V)是一个例子，寻找第一种方法，`Rule sets in Configuration`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-26T11:16:17.563

当我今天和我的同事一起寻找它时，我们没有找到解决问题的合适方法，这里是下一个遇到麻烦的人的答案。

属性名是`StringLengthValidator`，但是如果你检查类名它是`StringLengthValidatorAttribute`，所以为了得到正确的属性，你需要这样调用函数`GetCustomAttributes`：

```
property.GetCustomAttributes(typeof(StringLengthValidatorAttribute), false) 
```

这将正确获取属性，然后您将能够获得`UpperBound`

# c++ - 仍然是我的 Vector 版本

> ID：12855144
> 
> 赞同：3
> 
> 时间：2012-10-12T08:32:54.480
> 
> 标签：c++, memory-leaks, vector, point

我正在阅读 Programming Pciples and Practice Using C++ 第 17-19 章，并尝试编写我的 Vector 版本。这是我的代码：

```
#include <stdexcept>
#include <exception>

using namespace std;

struct Range_error:out_of_range{
    int index;
    Range_error(int i):out_of_range("Range error"),index(i){}
};

template<class T, class A = allocator<T>> struct Vector_base{
    A alloc;
    T* elem;
    int sz;                                                     // number of elements
    int space;                                                  // number of elements plus "free space"/"slots" for new elements("the current allocation")

    void copy(const Vector_base& arg)
    {
        T* p = alloc.allocate(arg.sz);
        for(int i=0; i<arg.sz; ++i) alloc.construct(&p[i], arg.elem[i]);
        elem = p;
        sz = arg.sz;
        space = arg.space;
    };

    Vector_base(): elem(alloc.allocate(0)), sz(0), space(0) {};
    Vector_base(int n):elem(alloc.allocate(n)), sz(n), space(n) {};
    Vector_base(const A& a, int n):alloc(a), elem(a.allocate(n)), sz(n), space(n){};
    Vector_base(const Vector_base& arg) {copy(arg);}
    ~Vector_base() {alloc.deallocate(elem, space);}
};

template<class T, class A = allocator<T>> class Vector : private Vector_base<T,A>{
public:
    Vector() : Vector_base(){};
    Vector(int n) : Vector_base(n) {for(int i=0; i<this->sz; ++i) this->alloc.construct(&this->elem[i], T());}
    Vector(const Vector& arg) : Vector_base(arg) {};
    Vector& operator=(const Vector&);

    ~Vector() {};

    int size() const {return this->sz;}
    int capacity() const {return this->space;}

    void resize(int newsize, T val=T());
    void push_back(const T& val);
    void pop_back();                                                // delete the last element
    void reserve(int newalloc);

    T& operator[](unsigned int n) 
    {
        return this->elem[n];   
    }

    const T& operator[](unsigned int n) const 
    {
        return this->elem[n];   
    }

    T& at(unsigned int n)
    {
        if(n<0 || this->sz<=n) throw Range_error(n);
        return this->elem[n];
    }

    const T& at(unsigned int n) const
    {
        if(n<0 || this->sz<=n) throw Range_error(n);
        return this->elem[n];
    }
};

template<class T, class A> void Swap(Vector_base<T,A>& a, Vector_base<T,A>& b){
    Vector_base<T,A> c(a);
    a=b;
    b=c;
}

template<class T, class A> Vector<T,A>& Vector<T,A>::operator=(const Vector<T,A>& a)
{
    if(this == &a) return *this;                                    // self-assignment, no work needed

    if(a.sz<=sz){
        for(int i=0; i<a.sz; ++i) elem[i] = a.elem[i];
        sz=a.sz;
        return *this;
    }

    T* p = new T[a.sz];
    for(int i=0; i<a.sz; ++i) p[i] = a.elem[i];
    delete elem;
    elem=p;
    space=sz = a.sz;
    return *this;

}

template<class T, class A> void Vector<T,A>::reserve(int newalloc)
{
    if(newalloc <= this->space) return;
    Vector_base<T,A> b(this->alloc,newalloc);
    for(int i=0; i<this->sz; ++i) this->alloc.construct(&b.elem[i], this->elem[i]);     // copy
    for(int i=0; i<this->sz; ++i) this->alloc.destroy(&this->elem[i]);

    Swap<Vector_base<T,A>>(*this, b);
    this->space = newalloc;
}

template<class T, class A> void Vector<T,A>::resize(int newsize, T val=T())
{
    reserve(newsize);
    for(int i=this->sz; i<newsize; ++i) this->alloc.construct(&this->elem[i], val);
    for(int i=newsize; i<this->sz; ++i) this->alloc.destroy(&this->elem[i]);
    this->sz = newsize;
}

template<class T, class A> void Vector<T,A>::push_back(const T& val)
{
    if(this->space == 0) reserve(8);
    else if(this->sz == this->space) reserve(2*(this->space));
    this->alloc.construct(&this->elem[this->sz], val);
    ++(this->sz);
}

template<class T, class A> void Vector<T,A>::pop_back()
{
    if(this->sz == 0) return;
    this->alloc.destroy(&this->elem[--(this->sz)]);
    if(this->sz <= (this->space)/2)
    {
        Vector_base<T,A> b(this->alloc,(this->space)/2);
        for(int i=0; i<this->sz; ++i) this->alloc.construct(&b.elem[i], this->elem[i]);     // copy
        for(int i=0; i<this->sz; ++i) this->alloc.destroy(&this->elem[i]);

        Swap<Vector_base<T,A>>(*this, b);

        this->space /= 2;
    }
} 
```

编译时，vc++ 说“void Swap(Vector_base &,Vector_base &)'：无法从'Vector'中推断出'Vector_base,A> &'的模板参数”。我知道 *this 是 Vector 对象，但 b 是 Vector_base 对象，但这就是书上所说的。我怎样才能使这段代码工作？这段代码有内存泄漏吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T10:18:26.257

您的 Swap 函数模板定义为`template<class T, class A>`. 所以你应该这样称呼它：`Swap<T,A>(*this, b);`而不是`Swap<Vector_base<T,A>>(*this, b);`

实际上，调用`Swap<T,A>(*this, b)`是不正确的。您应该分配请求大小的内存并将现有元素复制到新空间。然后释放您最初分配的内存。

第二个问题在于：

```
Vector_base(const A& a, int n)
 : alloc(a), elem(a.allocate(n)), sz(n), space(n) 
```

您不能在 const 对象上调用非常量成员函数。因此，使用`alloc.allocate(n)`而不是`a.allocate(n)`.

**更新 1**

此外，您仍在将`new`and`delete`运算符与Vector 的赋值运算符中的`alloc.allocate()`and混合使用。`alloc.deallocate()`

**更新 2**

您的赋值运算符将永远不会被调用，`Swap<T, A>`因为您实际上正在使用`Vector_base`，而赋值运算符是为 定义的`Vector`。所以[`Memberwise assignment`](http://msdn.microsoft.com/en-us/library/x0c54csc.aspx)会发生。

```
template<class T, class A> void Swap(Vector_base<T,A>& a, Vector_base<T,A>& b){
    Vector_base<T,A> c(a);
    a=b;
    b=c;
} 
```

也就是说，`b.elem`并且`c.elem`将指向同一个地址，`alloc.deallocate`并将为此调用两次。因为第一次`~Vector_base()`将在返回时`c`超出范围时调用`Swap`。`b`当返回时超出范围时，将调用第二次析构函数`reserve`。

这就是为什么你会得到一个未处理的异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T11:28:32.640

> 这段代码有内存泄漏吗？

是的，您的代码存在内存泄漏。例如：

```
void copy(const Vector_base& arg)
{
    T* p = alloc.allocate(arg.sz);
    for(int i=0; i<arg.sz; ++i) 
        alloc.construct(&p[i], arg.elem[i]); <--- what happens here
                                                  if construction fails ?
    elem = p;
    sz = arg.sz;
    space = arg.space;
}; 
```

如果复制构造函数抛出异常，就会泄漏分配的内存以及已经构造的对象所持有的任何资源。

治疗方法是：

```
for (int i = 0; i < arg.sz; ++i)
{
    try { alloc.construct (&p[i], arg.elem[i]); }
    catch (...)
    {
        // 1) Destroy the allocated objects
        while (--i != 0) alloc.destroy (&p[i]);

        // 2) Release p
        alloc.deallocate (p, arg.sz);

        // 3) rethrow exception
        throw; 
    }
} 
```

您必须在整个代码中始终如一地执行此操作，而不仅仅是在`copy`函数中。这是我们使用标准容器而不是自制容器的第一大原因。

例如，异常安全是我们拥有`top`and `pop`in的原因`std::stack`：如果只有一个`pop`方法返回对象的副本，如果复制构造抛出异常会发生什么？

如果您想实现自己的容器（作为练习或深思熟虑的决定），最好从标准库中查看实现。STL 容器是模板，所有代码都驻留在头文件中。仔细研究，你会学到很多东西。

# javascript - 如何验证 ajax 服务器计算的结果是否与用户的 UI 操作匹配？

> ID：12855145
> 
> 赞同：0
> 
> 时间：2012-10-12T08:33:00.000
> 
> 标签：javascript, ajax, asp.net-mvc, hash

我有一个表单，用户可以通过选中复选框来选择一系列值。有两个复选框列表，一个是使用整数作为值，另一个是使用字符串。

问题是我需要根据用户在复选框中选择的值向用户提供一些计算结果。这个计算可能很慢，从 2 到 20 秒不等。

目前，计算值的 ajax 请求在用户选中任何复选框时执行。但这会导致对他们单击的每个复选框的请求。并且每个请求返回的计算结果有时会以错误的顺序到达，这意味着最慢/最后到达的响应是呈现给用户的响应。

我似乎不必验证对用户选择的值的响应，仅在与所选复选框匹配时才显示结果。我认为哈希值将是解决此问题的最佳方法。但是我在用 C# 和 javascript 中的实现找到合适的哈希函数时遇到了一些麻烦。

我知道在返回结果时我可以只返回用户操作，但我仍然需要比较所有值，并且值的数量可能非常大。

最佳我想在服务器上生成所选值的哈希，然后在返回结果时在客户端上生成当前所选值的哈希，然后比较两者将指示结果是否与所选值匹配。

像这样的东西：

```
$.ajax({
  type: 'POST',
  url: '/Backend/GetCalculatedResult',
  data: { CheckedIntegers: checkedIntegers, CheckedStrings: checkedStrings },
  success: function(data) {
        if(ResultMatchesSelection(data.SelectionHash)) {
            DisplayResult(data.Result);
        }
  },
  dataType: "json",
});

function ResultMatchesSelection(hash)
{
    var selectionHash = .. generate hash from selected items;
    return hash == selectionHash;
} 
```

通过在最后一个用户操作后 1 秒执行 ajax 请求，我已经对这个问题进行了部分修复。因此，如果用户依次选中 5 个复选框，每个复选框之间的间隔不到一秒，则请求只会执行一次，而不是 5 次。

我真的很想将两者结合起来。

您知道如何在服务器端和客户端进行这种哈希处理吗？或者，如果您对如何以其他方式解决此问题有想法，请说出您的想法：)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T09:11:49.360

您可以在 jQuery 中声明一个全局变量，例如`requestNo`，并在每次 ajax 调用时发送该变量值（`requestNo`每个 ajax 请求的增量值），而不是散列选定的值并用 ajax 结果检查它们。

当您返回 ajax 响应而不是散列值时，返回`requestNo`您通过 ajax 请求收到的值。在客户端检查`requestNo`ajax 响应是否与当前`requestNo`值相同，如果相同则显示结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T10:52:42.160

尝试使用视觉指示器（加载图像）向用户表明服务器中仍在进行计算。如果您使用的是 Ajax.ActionLink，请使用：http: [//msdn.microsoft.com/en-us/library/system.web.mvc.ajax.ajaxoptions.loadingelementid (v=vs.108).aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.ajax.ajaxoptions.loadingelementid%28v=vs.108%29.aspx)

还有很多方法可以做到这一点，使用 jQuery.jQuery 有 ajax 方法： [http](http://www.w3schools.com/jquery/jquery_ref_ajax.asp) ://www.w3schools.com/jquery/jquery_ref_ajax.asp ，所以你可以使用 ajaxStart 和 ajaxStop/ajaxComplete 来显示和隐藏你的加载图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T10:23:30.947

我采取了另一条路线，这似乎很好地解决了这个问题。我没有检查值，而是保存最后一个 ajax 请求，每次发生操作时，它都会检查最后一个请求是否仍在加载，如果是，则中止，并发送新请求。

如果我相信它会确保两个请求不能同时挂起，这应该可以很好地解决问题:)

# knockout.js - 如何在淘汰赛中使用 tagit

> ID：12855157
> 
> 赞同：5
> 
> 时间：2012-10-12T08:33:37.410
> 
> 标签：knockout.js, knockout-mapping-plugin, tag-it

我在我的代码中使用[http://aehlke.github.com/tag-it/](http://aehlke.github.com/tag-it/)如何与 viewmodel 绑定

html

```
<ul data-bind='jqueryui: "tagit",foreach: Tags' >
            <li class="tagit-choice ui-widget-content ui-state-default ui-corner-all" data-bind='with: $data'>
                <span class="tagit-label" data-bind='text: $data'></span>
                <a class="tagit-close">
                    <span class="text-icon">&times;</span>
                    <span class="ui-icon ui-icon-close"></span>
                </a>
                <input type="hidden" name="item[tags][]" data-bind='value: $data'  style="display: none;">
            </li>
            </ul> 
```

js代码

```
function AppViewModel() {
var self = this;

function Tag(data) {
            this.Name = data;
        }

self.Tags = ko.observableArray([
            new Tag('red'),
            new Tag('blue'),
            new Tag('green')
        ]);
 }

// Activates knockout.js
ko.applyBindings(new AppViewModel()); 
```

提前感谢你的帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-01-06T10:56:21.777

这是基于罗伯特瓦格纳的回答的另一个用于淘汰赛的绑定处理程序，因为我觉得它不够动态：

```
ko.bindingHandlers.tagit = {
//https://github.com/aehlke/tag-it
init: function (element, valueAccessor, allBindingsAccessor) {
    var bind = function () {
        valueAccessor().tags($(element).tagit("assignedTags"));
    };

    var options = $.extend({
        allowSpaces: false,
        caseSensitive: false,
        showAutocompleteOnFocus: true,
        afterTagAdded: function(t,s) { bind(); },
        afterTagRemoved: function(t,s) { bind(); },
        placeholderText: "",
        preprocessTag: function () { },
        beforeTagAdded: function (evt, tag) {
            if (tag.tagLabel.length == 0 || tag.tagLabel.toLowerCase() === options.placeholderText.toLowerCase()) {
                return false;
            }
            return true;
        }
    }, valueAccessor().options || {});

    var tags = valueAccessor()["autocomplete"];
    if (tags)
        $.extend(options, {
            autocomplete: $.extend({ source: tags.source, delay: 0, minLength: 0 },tags)
        });

    $(element).tagit(options);
},
update: function (element, valueAccessor) {
    var value = ko.utils.unwrapObservable(valueAccessor());
    var tags = value.tags();
    $(element).tagit("removeAll");
    for (var x = 0; x < tags.length; x++) {
        $(element).tagit("createTag", tags[x]);
    }
}
}; 
```

我的预处理和自动完成功能：

```
self.TagAutocompleter = function (d, ds) {
    DataMethod.postData("tag/autocomplete", d, function (data) {
        ds(ko.utils.arrayMap(data, function (t) { return t.Tag; }));
    });
};

self.TagProcessor = function (tag) {
    return tag.toLowerCase().replace("#", '');
}; 
```

并在 html 中使用：

```
<ul data-bind="tagit:{tags:Tags, autocomplete:{source:TagAutocompleter, delay:250, minLength: 2}, options:{preprocessTag: TagProcessor}}">
</ul> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-02T00:05:33.937

这是一个自定义绑定[https://gist.github.com/droyad/6136446](https://gist.github.com/droyad/6136446)

```
ko.bindingHandlers.tags = {
    init: function (element, valueAccessor, allBindingsAccessor) {

        var bind = function() {
            var observable = valueAccessor();
            observable($(element).tagit("assignedTags").join(','));
        };

        var options = {
            allowSpaces: true,
            caseSensitive: false,
            showAutocompleteOnFocus: true,
            afterTagAdded: bind,
            afterTagRemoved: bind
        };

        var tags = allBindingsAccessor()["tagsSource"];
        if (tags)
            $.extend(options, {                
                autocomplete: { source: tags, delay: 0, minLength: 0 }
            });

        $(element).tagit(options);
        $(element).data('uiTagit').tagInput.css("width", "50px");
    },
    update: function (element, valueAccessor) {
        var value = ko.utils.unwrapObservable(valueAccessor());
        var tags = value.split(',');
        $(element).tagit("removeAll");
        for (var x = 0; x < tags.length; x++) {
            $(element).tagit("createTag", tags[x]);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T10:32:06.790

我写了一个简单的小提琴。它是带有 de 标签列表的构造组件。 [小提琴](http://jsfiddle.net/muadhib/MHVas/2/)

但这不是双向绑定。如果您不想这样做，我建议您创建一个自定义活页夹，在其中调用淘汰赛的 foreach 模型活页夹。 [请参阅自定义模型绑定器的信息](http://knockoutjs.com/documentation/custom-bindings.html)

在 init 函数上，您需要订阅淘汰 observableArray 中的标签更改以更新控件。并且您需要订阅 onTagAdded 事件和 onTagRemoved 事件。

有一个示例代码，我在其中扩展了 foreach 组件：

```
ko.bindingHandlers.extendForeach = {
    makeForeachValueAccessor: function (valueAccessor) {
         return function () {

            if ((!bindingValue) || typeof bindingValue.length == "number"){
                bindingValue = {
                    data : bindingValue
                }
            }

            return {
                'data': bindingValue['data'],
                'afterAdd': bindingValue['afterAdd'],
                'beforeRemove': bindingValue['beforeRemove'],
                'afterRender': bindingValue['afterRender'],
            };
        };
    },

    init: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
        var newValAccess = ko.bindingHandlers.extendForeach.makeForeachValueAccessor(valueAccessor);
        return ko.bindingHandlers.foreach.init(element, newValAccess, allBindingsAccessor, viewModel, bindingContext);
    },

    update: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
        var newValAccess = ko.bindingHandlers.extendForeach.makeForeachValueAccessor(valueAccessor);
        return ko.bindingHandlers.foreach.update(element, newValAccess, allBindingsAccessor, viewModel, bindingContext);
    }
} 
```

我希望这对你有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T11:06:26.887

感谢 Cedric 无需编写自定义活页夹

我用这种方式解决[链接](http://jsfiddle.net/MHVas/8/)

```
$("#mytags").tagit({
 availableTags: JSON.parse(ko.toJSON(_.pluck(AppViewModel.Tags, 'Name'))),
 onTagAdded: function (event, tagval) {
                    //on every add add with id if tag exist in system
                    var newtag = $(tagval).children('span.tagit-label').html();
                    var temp = _.find(AppViewModel.Tags, function (item) { return item.Name() == newtag; });
                    if (temp) {
                            AppViewModel().SelectedTags.push( Tag({ 'Id': temp.Id(), "Name": newtag} ));
                    }
                    else {
                            AppViewModel().SelectedTags.push( Tag({ "Name": newtag} ));
                    }

                },
onTagRemoved: function (event, tagval) {
                    // do something special
                    var tempTag = $(tagval).children('span.tagit-label').html();
                    AppViewModel().SelectedTags.remove(_.find(SelectedTags(), function (item) { return item.Name == tempTag; }));
                }}); 
```

# java - 如何用 Ant 编译注解处理器？

> ID：12855158
> 
> 赞同：8
> 
> 时间：2012-10-12T08:33:45.307
> 
> 标签：java, ant, build, annotations, apt

这个问题似乎很明显，但实施对我来说非常困难。

我的目标是编写*Ant 构建脚本*来编译一些需要由 Annotation Processor**生成的其他类的类。**我有一个自定义注释，它是处理器实现（从`AbstractProcessor`类继承）。

据我了解，我需要：

1.  编译注释处理器
2.  在一些带注释的类上运行编译器以生成新的类。
3.  编译需要生成类的类

代码（第 1 步和第 2 步）：

* * *

```
<target name="compileAnnotationProcessor">        
    <javac destdir="${OUTPUT_DIR}"
           debug="true"
           failonerror="true"
           includeantruntime="false"
           classpath="${java.class.path}">
        <src>
            <pathelement path="${PROJECT_DIR}/tools/src"/>
        </src>

        <include name="/path/to/annotation/processor/package/**"/>
    </javac>
</target>

<target name="generateFilesWithAPT" depends="compileAnnotationProcessor">
    <javac destdir="${OUTPUT_DIR}"
           includeantruntime="false"
           listfiles="false"
           fork="true"
           debug="true"
           verbose="true">
        <src>
            <pathelement path="${PROJECT_DIR}/common/src/"/>
        </src>
        <include name="/path/to/files/to/compile/**"/>
        <classpath>
            <pathelement path="${OUTPUT_DIR}"/>
            <pathelement path="${java.class.path}"/>
        </classpath>

        <compilerarg line="-proc:only"/>
        <compilerarg line="-processorpath ${OUTPUT_DIR}/path/to/annotation/processor/package/annProcessorImplement"/>
    </javac>
</target> 
```

* * *

实际上，第一个任务是执行良好并为 Annotation 处理器实现编译 .class 文件。它停止在第二个任务。

蚂蚁 说：`Annotation processing without compilation requested but no processors were found.`

What am I doing wrong? Maybe I should put the annotation processor class in a `.jar`? Or provide a file name with .class extension as `-processorpath` argument? I tried several options but nothing helps..

* * *

Notes:

I'm using ant `javac` task instead of `apt`one because [documentation](http://docs.oracle.com/javase/7/docs/technotes/guides/apt/GettingStarted.html) claims that apt tool as well as `com.sun.mirror` API is deprecated. I've also looked through this [question](https://stackoverflow.com/questions/3644069/java-6-annotation-processing-configuration-with-ant), but there is no information how to compile the processor in right way.

I'm using:

*   Java 1.6
*   Ant 1.8.2

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T08:41:17.260

My usual approach is:

*   pack the annotation together with the annotation processor in its own jar
*   register the annotation processor via META-INF/services in that jar

然后，无论您对注释有依赖关系，注释处理器都将被自动拾取，而无需任何额外配置。

# android - 防止 FragmentStatePagerAdapter 不销毁 Fragment

> ID：12855160
> 
> 赞同：1
> 
> 时间：2012-10-12T08:33:51.453
> 
> 标签：android, android-viewpager

我有一些`Fragments`in a`List Collection`用于 a`Viewpager`和 a `FragmentStatePagerAdapter`。我只使用`getItem(){return list.get(index;}`并`getCount(){return list.size()}`在其中。如果我想在适配器中替换该列表，我会加载另一个具有不同片段的列表，`notifyDataSetChanged()`再次调用并将适配器设置为 viewpager 以实现它。那工作得很好。

但是，如果我执行此片段集更改，则先前的片段将`onDestroy()`通过 PagerAdapter 的调用而被销毁。现在我想知道是否可以阻止 onDestroy 调用？或者我必须使用`onSavedInstanceState()`再次加载以前的片段及其状态？

我只是搜索一些不同的方法来恢复由于适配器更改而消失的片段的状态。如果有人对此有所了解，很高兴分享一些想法。如有必要，我可以提供代码。

也许是一个很好的信息：我不使用 PagerAdapter 来实例化片段。我在将列表加载到适配器之前执行此操作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T11:32:50.740

> 现在我想知道是否可以阻止 onDestroy 调用？

使用的*完整和全部要点*是`FragmentStatePagerAdapter`允许Android销毁不使用的片段。你应该`FragmentPagerAdapter`改用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-11T02:26:10.930

那天我提出了同样的问题。

所以我找到了另一个解决方案。

我在 Adapter 类中覆盖了 destroyItem(ViewGroup container, int position, Object object)。

并改变了不工作的 super.destroyItem ..

我不确定该解决方案是否是更好的解决方案，但这对我来说绝对有帮助。

# python - 为 Windows 构建 Rpy2

> ID：12855161
> 
> 赞同：1
> 
> 时间：2012-10-12T08:33:52.983
> 
> 标签：python, r, rpy2

我很困惑，官方`rpy2`最新版本不支持 Windows 平台。

[我在这里](https://bitbucket.org/breisfeld/rpy2_w32_fix/issue/1/binary-installer-for-win32)找到了“lgautier”bitbucket 存储库上最后一个开发版本的非官方构建 。

希望它对你有用。

# r - 小部件中标签的位置

> ID：12855164
> 
> 赞同：0
> 
> 时间：2012-10-12T08:34:09.817
> 
> 标签：r, gwidgets

在下面的小部件中，是否可以更改“无线电”组标签的位置。我想要类似的东西，而不是在项目上方添加“类型”：

```
Type        o Quantitative
            o Qualitative 
```

![在此处输入图像描述](../Images/0267da1cc74015d9857db7caaafa9508.png)

```
win <- gwindow("Empirical Phase Diagram")

BigDataGroup <- ggroup(cont=win)
DataGroup <- gframe("Data", container = BigDataGroup, horizontal=FALSE)

grp.file <- ggroup(horizontal=FALSE, container = DataGroup)
lbl.file <- glabel("File: ", container = grp.file)
browse.file <- gfilebrowse(container = grp.file)

Input1Group <-  gframe("First input variable ", container = DataGroup, horizontal=FALSE)
grp.text.input1 <- ggroup(horizontal=FALSE, container = Input1Group)
lbl.text.input1 <- glabel("Column index",  container = grp.text.input1)
insert.text.input1 <- gedit(text="A", container = grp.text.input1)
grp.type.input1 <- ggroup(horizontal=FALSE, container = Input1Group)
#addSpring(grp.type.input1)
lbl.type.input1 <- glabel("Type ", container = grp.type.input1)
insert.type.input1 <- gradio(items=c("Quantitative", "Qualitative"), container = grp.type.input1) 

Input2Group <-  gframe("Second input variable ", container = DataGroup, horizontal=FALSE)
grp.text.input2 <- ggroup(horizontal=FALSE, container = Input2Group)
lbl.text.input2 <- glabel("Column index", container = grp.text.input2)
insert.text.input2 <- gedit(text="B", container = grp.text.input2)
grp.type.input2 <- ggroup(horizontal=FALSE, container = Input2Group)
lbl.type.input2 <- glabel("Type ", container = grp.type.input2)
insert.type.input2 <- gradio(items=c("Quantitative", "Qualitative"), container = grp.type.input2) 

grp.text.output <- ggroup(horizontal=FALSE, container = DataGroup)
lbl.text.output <- glabel("Output variable range ", container = grp.text.output)
insert.text.output <- gedit(initial.msg="type a range e.g. C:AD", container = grp.text.output)

OptionsGroup <- ggroup(horizontal=FALSE, container = BigDataGroup)
grp.colorspace <- ggroup(horizontal=FALSE, container = OptionsGroup)
insert.colorspace <- gradio(items=c("RGB", "LAB", "LUV"))
lbl.colorspace <- gframe("Color space ", container = grp.colorspace)
add(lbl.colorspace, insert.colorspace)

GoGroup <- ggroup(horizontal=FALSE, container = BigDataGroup)
addSpring(GoGroup)
read <- gbutton(text="Go", container = GoGroup, 
    handler = function(h, ...) {
    print(EPD(filename=svalue(browse.file), 
        input1=svalue(insert.text.input1),
        input2=svalue(insert.text.input2),
        outputs=svalue(insert.text.output),
        color.space=svalue(insert.colorspace))
        )
    }
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T15:43:58.087

两件事情：

在`gWidgets`您可以使用`glayout`容器将标签放在左侧。就像是：

```
tbl <- glayout(cont=parent_container)
tbl[1,1] <- "Type" ## or  glabel("Type ", container = tbl)
tbl[1,2] <- (insert.type.input1 <- gradio(items=c("Quantitative", "Qualitative"), container = tbl)) 
```

后一个双重分配使您可以访问无线电小部件。你也可以用 tbl[1,2] 来获得它。这工作正常，但您需要为行索引做一些簿记。

在`gWidgets2`（现在仅在 github 上）还有一个`gformlayout`容器可以让这更容易：

```
flyt <- gformlayout(cont=parent_container)
insert.type.input1 <- gradio(items=c("Quantitative", "Qualitative"), 
  horizontal=FALSE,
  label = "Type", container = flyt) 
```

顺便说一句，如果你正在使用`gWidgets2RGtk2`你可以修改这个标签的字体，但它是超级hacky。例如：

```
get_labels <- function(fl) {
  children <- Map(function(x) x$getWidget(), fl$widget$getChildren())
  labels <- Filter(function(x) is(x, "GtkLabel"), children)
  names(labels) <- sapply(labels, function(x) x$getText())
  labels
}

## Then to set the font of a label you can do:
labels <- get_labels(flyt)  
flyt$set_rgtk2_font(labels[["Type"]], list(weight="bold")) 
```

而且，如果你还在使用 tcltk，这个函数应该可以工作：

```
set_formlayout_font <- function(fl, value, row) {
  l = tcl("grid", "slaves", fl$widget, row=row-1, column=0)
  fl$set_font_ttk(value, l)
}
set_formlayout_font(fl, list(color="blue"), 2) ## 2nd row 
```

# cocoa - Mac OS X Safari 6 默认搜索引擎在可能值之间发生变化

> ID：12855168
> 
> 赞同：6
> 
> 时间：2012-10-12T08:34:17.400
> 
> 标签：cocoa, safari, osx-mountain-lion, safari6

我想在 Mac OS X 上以编程方式更改 Safari 默认搜索引擎。我知道有 3 个可能的值，但 Safari 将当前值存储在哪里？我想从可可代码从谷歌更改为雅虎。可能吗？

我在文件中看到a`SearchProviderIdentifierMigratedToSystemPreference`变量设置为YES `com.apple.Safari.plist`，可以位于`~/Library/Preferences`. 这可能是当前值的关键，但“系统偏好”存储在哪里？你对此有什么线索吗？

* * *

更新：我发现这个命令`defaults read -g NSPreferredWebServices`总是返回选择的默认搜索引擎。这样做的问题是，当我更改它的值时，safari 不会更改值。
这是将值更改为 Bing 的命令：
`defaults write -g NSPreferredWebServices '{NSWebServicesProviderWebSearch = { NSDefaultDisplayName = Bing; NSProviderIdentifier = "com.bing.www"; }; }';`

该命令应在终端中执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-07-26T00:02:49.980

显然（使用 macOS 11.5 测试），`NSPreferredWebServices`设置系统搜索引擎（例如，当使用 Spotlight 启动网络搜索时，Spotlight 会重定向您）。
每当更新 Safari 的搜索引擎时，都会更新此密钥。

当 Safari 的搜索引擎更改时，另一个键也会更新：（`SearchProviderShortName`在域中`com.apple.Safari`）。显然，这是为了改变 Safari 的搜索引擎而进行的更新。（例如，设置`DuckDuckGo`为使用 DuckDuckGo。）

以前（之前`SearchProviderIdentifierMigratedToSystemPreference`），键是`SearchProviderIdentifier`，值是`com.duckduckgo`DuckDuckGo 搜索引擎。

我的建议是将它们都设置为安全的：

```
defaults write -g NSPreferredWebServices '{NSWebServicesProviderWebSearch = { NSDefaultDisplayName = Bing; NSProviderIdentifier = "com.bing.www"; }; }'
defaults write com.apple.Safari SearchProviderIdentifier -string com.bing.www
defaults write com.apple.Safari SearchProviderShortName -string Bing 
```

* * *

相关问题：[https ://stackoverflow.com/a/16224386](https://stackoverflow.com/a/16224386)

# ios - 如何添加 iOS 设备以将其用作测试设备

> ID：12855174
> 
> 赞同：0
> 
> 时间：2012-10-12T08:34:27.447
> 
> 标签：ios, xcode, ipad, testing

我正在尝试在测试设备上测试我的应用程序。我在会员门户中添加了我的设备，并且还制作了配置文件。当我在 xcode 管理器中将此配置文件添加到我的设备时，它一直这么说

```
Valid signing identity not found 
```

我认为我的钥匙串有问题。我已将我的开发人员证书添加到钥匙串中。但我还需要别的东西吗？我的证书也没有出现在我的钥匙串的钥匙部分。

亲切的问候。

[在这里你可以看到一个截图](http://www.flickr.com/photos/74322780@N08/8079286537/in/photostream)

# counter - Reportbuilder 3.0 统计出现次数

> ID：12855177
> 
> 赞同：0
> 
> 时间：2012-10-12T08:34:39.927
> 
> 标签：counter, reportbuilder3.0

我有一个在不同时间包含“#”的字段。我想计算“#”在这个字段中出现了多少次。我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T11:40:13.357

尝试，**未经测试**：

```
=Split(Fields!Value.Value, "#").Length - 1 
```

# javascript - 回调执行后执行某事

> ID：12855180
> 
> 赞同：1
> 
> 时间：2012-10-12T08:34:47.690
> 
> 标签：javascript, jquery

我正在尝试在执行回调后执行一个函数。

这是我的例子

```
var callback1 = function () {
  // check input ($(this).val()) for validity here
};
var callback2 = function () {
 // make other things after callback1 has finished
};

$("input[type='text']").change(callback1); 
```

然后当 callback1 被执行时，我想执行 callback2。
使用 jquery/javascript 执行此操作的正确方法是什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T08:36:16.993

您可以使用匿名函数并在其中包含两个回调。

```
$("input[type='text']").change(function(){ 
  callback1();
  callback2();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T08:37:00.677

只需执行以下操作：

```
$("input[type='text']").change(function() {
    callback1();
    callback2();
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T08:37:08.193

您可以像这样分配多个回调：

```
$('input ...')
    .on('change', callback1)
    .on('change', callback2) 
```

其他答案的编写方式有一个区别（即使用迭代运行两个回调的匿名函数）。考虑这段代码：

```
function callback1(evt) {
    // check input ($(this).val()) for validity here

    // stop any other handlers from running
    evt.stopPropagation();
}

function callback2() {
    // make other things after callback1 has finished
} 
```

您可以通过调用防止`callback2`从内部执行（我认为返回会完成同样的事情）。这是需要牢记的。`callback1``evt.stopPropagation()``false`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T08:36:17.570

`callback2`在结束时执行`callback1`：

```
var callback1 = function () {
    // check input ($(this).val()) for validity here
    callback2();
};
var callback2 = function () {
    // make other things after callback1 has finished
};

$("input[type='text']").change(callback1); 
```

或者，如果您想让它们完全独立，您可以将一个函数传递给`change()`单独调用回调的事件：

```
var callback1 = function () { /* code */ };
var callback2 = function () { /* code */ };
$("input[type='text']").change(function() {
    callback1();
    callback2();
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-12T08:36:35.787

在另一个匿名函数中调用这两个回调函数：

```
$("input[type='text']").change(function() {
    callback1;
    callback2;
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-12T08:37:13.900

1.  创建一个执行 cb1 和 cb2 代码的唯一回调。

2.  从 cb1 内部调用 cb2。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-12T08:37:41.987

### 用这个：

```
var callback1 = function () {
  // check input ($(this).val()) for validity here
};
var callback2 = function () {
 // make other things after callback1 has finished
};
$('input[type="text"]').change(function() {
    callback1();
    callback2();
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-12T08:39:07.757

使用返回函数的函数来做。

```
var callback1 = function (my_callback) {
  return function(){
    // check input ($(this).val()) for validity here
    //   ...
    my_callback();
  }
};
var callback2 = function () {
 // make other things after callback1 has finished
};

$("input[type='text']").change(callback1(callback2)); 
```

# image - 将矩形放入单个图像中，同时节省空间

> ID：12855181
> 
> 赞同：1
> 
> 时间：2012-10-12T08:34:47.413
> 
> 标签：image

给定一个矩形数组，将它们全部放入最小的单个图像中的算法是什么，尽可能节省空间但不重叠单个较小的图像？

我要求自动创建用于 JavaScript 的 CSS Spritesheet，并且可能会在 PHP GD 中进行；spritesheets 通过减少需要打开的 HTTP 连接的数量来节省时间。这是一个示例 spritesheet，尽管它似乎并没有节省可用空间的每个像素。谢谢！

![在此处输入图像描述](../Images/c55872268c85059c27453c88850675ef.png)

# tomcat - 如何在访问日志文件中捕获发布方法请求？

> ID：12855184
> 
> 赞同：1
> 
> 时间：2012-10-12T08:34:59.083
> 
> 标签：tomcat, jboss, logfile

我通过取消注释 server.xml 文件中的以下代码来启用 jboss 服务器中的访问日志

```
 <Valve className="org.apache.catalina.valves.AccessLogValve"
        prefix="localhost_access_log." suffix=".log"
        pattern="common" directory="${jboss.server.home.dir}/log" 
        resolveHosts="false" /> 
```

每天都会创建访问日志。我可以在访问日志文件中看到 get 方法请求，但看不到 post 方法请求。如何在 jboss 的服务器访问日志文件中捕获 post 方法请求的详细信息。

提前致谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T04:23:31.450

您正在使用`pattern`as `common`which 等效于`'%h %l %u %t "%r" %s %b`.

还有另一个模式属性`%m`--> 用于请求方法（GET、POST 等）将其添加到您的模式中，例如

```
 <Valve className="org.apache.catalina.valves.AccessLogValve"
    prefix="localhost_access_log." suffix=".log"
    pattern="'%h %l %u %t "%r" %s %b %m" directory="${jboss.server.home.dir}/log" 
    resolveHosts="false" /> 
```

此处提供了更多详细信息：[**Tomcat 访问阀**](http://tomcat.apache.org/tomcat-6.0-doc/config/valve.html#Access_Log_Valve/Introduction)。

希望这可以帮助！！

# haskell - 使用 Numeric.FFT 时没有 (Data.Vector.Generic.Base.Vector Data.Vector.Unboxed.Vector Double) 的实例

> ID：12855185
> 
> 赞同：0
> 
> 时间：2012-10-12T08:35:01.377
> 
> 标签：haskell, vector, typeerror

**编辑：解决方案**：该问题的解决方案是在 .cabal 文件中指定正确的向量库。标志（下面@Daniel 亲切地指出）是错误消息中引用了向量的确切**版本**。事实上，我的文件是针对 vector-0.10.something 构建的，而 vector-fftw 是针对 vector-0.9.1 编译的。

* * *

我正在尝试使用 fftw-vector 库，但遇到了这种类型的错误：

```
-- test.hs
import qualified Numeric.FFT.Vector.Invertible as FFTI
import qualified Data.Vector.Unboxed as U

z = FFTI.run FFTI.dct1 U.empty

main = putStrLn "Won't compile" 
```

这是错误消息：

```
No instance for (vector-0.9.1:Data.Vector.Generic.Base.Vector
                   U.Vector Double)
  arising from a use of `FFTI.run'
Possible fix:
  add an instance declaration for
  (vector-0.9.1:Data.Vector.Generic.Base.Vector U.Vector Double)
In the expression: FFTI.run FFTI.dct1 U.empty
In an equation for `z': z = FFTI.run FFTI.dct1 U.empty 
```

但据我所知，实际上有一个 Data.Vector.Gener.Base.Vector 的实例用于 Data.Vector.Unboxed Double [(Link)](http://hackage.haskell.org/packages/archive/vector/0.9.1/doc/html/Data-Vector-Unboxed.html#t%3aVector)（我猜我错了）。

这适用于 ghc-7.6.1、[vector-0.9.1](http://hackage.haskell.org/packages/archive/vector/0.9.1/doc/html/Data-Vector.html)和[vector-fftw](http://hackage.haskell.org/packages/archive/vector-fftw/0.1.2/doc/html/Numeric-FFT-Vector-Invertible.html)。

（我必须对 vector-fftw 进行两个微小的更改，以便它与 base 4.6 和 ghc-7.6.1 一起编译，但这应该是无关的......）

谢谢你

编辑：

我对vector-fftw做了两个改动：

```
--- a/Numeric/FFT/Vector/Base.hsc
+++ b/Numeric/FFT/Vector/Base.hsc
@@ -34,10 +34,11 @@ import Control.Monad.Primitive (RealWorld,PrimMonad(..),
 import Control.Monad(forM_)
 import Foreign (Storable(..), Ptr, unsafePerformIO, FunPtr,
                 ForeignPtr, withForeignPtr, newForeignPtr)
-import Foreign.C (CInt, CUInt)
+-- import Foreign.C (CInt, CUInt)
 import Data.Bits ( (.&.) )
 import Data.Complex(Complex(..))
 import Foreign.Storable.Complex()
+import Foreign.C.Types

diff --git a/vector-fftw.cabal b/vector-fftw.cabal
index 5ca7c46..0436834 100644
--- a/vector-fftw.cabal
+++ b/vector-fftw.cabal
@@ -40,7 +40,7 @@ Library
   Other-modules:
         Numeric.FFT.Vector.Base

-  Build-depends: base>=4.3 && < 4.6, vector==0.9.*, primitive==0.4.*,
+  Build-depends: base>=4.3 && < 4.7, vector==0.9.*, primitive>=0.4 && < 0.6,
                  storable-complex==0.2.* 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T09:18:04.347

Note that the error message specifies the specific version of the package that defines the class an instance is missing for:

```
No instance for (vector-0.9.1:Data.Vector.Generic.Base.Vector
                   U.Vector Double) 
```

That usually means that one of the used packages was compiled against a different version than the one currently used in the project.

I don't see how exactly this would arise, but check for broken packages with `ghc-pkg check`, and verify that your packages have the correct ids with `ghc-pkg describe vector` and `ghc-pkg describe vector-fftw`, possibly `vector` was rebuilt after building `vector-fftw`. and the package hashes do not match.

# c# - 从 C# 中的线程内更改表单上的文本

> ID：12855191
> 
> 赞同：1
> 
> 时间：2012-10-12T08:35:34.513
> 
> 标签：c#, multithreading, forms, textbox

我正在尝试将 Form1 文本框中的文本从线程中更改为“你好”。但是当我执行它时，我收到错误“对象引用未设置为对象的实例”。当我检查时，我看到 txtboxCheckedFiels 的值为 Null。

我将如何创建该 txtbox 的对象？（我有多个线程正在运行，所有线程都应该能够更改该文本。

我试过的代码：

```
txtboxCheckedFiles.Invoke(new Action(() =>
                {
                    txtboxCheckedFiles.Text = "Hello there";
                })); 
```

我尝试过的另一种方式

```
var t = new Thread(
o => 
{
     txtboxCheckedFiles.BeginInvoke(
         ((Action)(() => txtboxCheckedFiles.Text = "Hello there")));
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T09:08:04.937

可能是一样的..但这是我一直使用的：

```
 public void LabelWrite(string value)
    {
        if (InvokeRequired)
            Invoke(new LabelWriteDelegate(LabelWrite), value);
        else
        {
            textBox1.Text = value;
        }
    }
    delegate void LabelWriteDelegate(string value); 
```

就像一个魅力..你基本上也可以在 else { } 中写任何你想要的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T08:39:00.660

首先你必须检查是否需要调用，然后你可以调用它。另外，请考虑检查窗口是否有句柄，这意味着窗口已启动并正在运行（例如，如果您尝试在表单的构造函数中加载数据，这将失败）

```
if (this.InvokeRequired)
{
    IAsyncResult result = BeginInvoke(new MethodInvoker(delegate()
    {
        // DOSTUFF
    }));

    // wait until invocation is completed
    EndInvoke(result);
}
else if (this.IsHandleCreated)
{
    // DO STUFF
} 
```

# r - 下载 shapefile 并将其解压缩到临时目录

> ID：12855194
> 
> 赞同：1
> 
> 时间：2012-10-12T08:35:50.673
> 
> 标签：r

为了在 SO 上发布可重复的帖子，我正在尝试将数据文件下载到一个临时位置，然后从那里将它们加载到 R 中。我主要使用[此 SO Post 中 JD Longs 答案中的](https://stackoverflow.com/questions/7044808/using-r-to-download-gzipped-data-file-extract-and-import-data)代码。下载和解压缩工作正常，但我无法从临时目录加载文件。这是我正在使用的代码：

```
library(maptools)
tmpdir <- tempdir()
url <- 'http://epp.eurostat.ec.europa.eu/cache/GISCO/geodatafiles/NUTS_2010_03M_SH.zip'
file <- basename(url)
download.file(url, file)
unzip(file, exdir = tmpdir )

## I guess the error is somewhere in the next two lines
shapeFile <- paste(tmpdir,"/Shape/data/NUTS_RG_03M_2010")
EU <- readShapeSpatial(shapeFile)
# --> Error in getinfo.shape(fn) : Error opening SHP file 
```

我一直在研究 tempdir() 的 man 文件，但没有成功。将工作目录设置为临时位置也不起作用。我可能在这里错过了一些非常基本的东西。你有任何提示如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T12:08:37.940

```
shapeFile <- paste(tmpdir,"/Shape/data/NUTS_RG_03M_2010", sep="") 
```

默认情况下，`paste`使用空格作为分隔符，这会导致路径错误。当然，从 R 2.15.0 开始，替代方案是`paste0`：

```
shapefile <- paste0(tmpdir,"/Shape/data/NUTS_RG_03M_2010") 
```

# solr - Solr - 化合物 ID 的问题

> ID：12855197
> 
> 赞同：1
> 
> 时间：2012-10-12T08:35:55.820
> 
> 标签：solr

例如，我有 2 个表：table1 = book，table2 = site --> 1 book 可以有 n 个站点。

```
<entity name="book" dataSource="myDs" pk="id"
        transformer="TemplateTransformer"
        query="SELECT b.id, b.title, s.id, s.number, s.content
                     FROM book b. site s WHERE b.id = s.book">
        <field column="b.id" name="id" />
        <field column="s.id" name="sId" />
        <field column="id" template="${id}_${sId}" ignoreMissingVariables="true" />
    </entity> 
```

为什么这不起作用？结果，我只得到了 1 个站点的 1 本书，而不是 x 个站点的 x 本书，我只是没有在字段“id”中获得复合键。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T15:51:44.777

我最近遇到了类似的问题，以下几点为我解决了这个问题：

1.  在 SQL 查询中使用别名来获取不同的列名。请重新检查别名的语法，因为它可能因您的数据库而异。
2.  当您使用模板转换器或进行子选择（在内部实体上）时，请始终使用 entity.COLUMN_NAME_IN_CAPITAL。大写专栏真的难倒我，直到我偶然发现 solr 论坛，其他人建议将其作为解决方案（不幸的是，我没有提供这个有用花絮的帖子的 URL）。

我在上面针对 Oracle DB 做的。不是 100% 确定它是否适用于其他数据库，但想分享解决方案。

这是尝试通过上述更改重新定义您的 DIH

```
<entity name="book" dataSource="myDs" pk="id"
    transformer="TemplateTransformer"
    query="SELECT b.id, b.title, s.id as sid, s.number, s.content
                 FROM book b. site s WHERE b.id = s.book">
    <field column="sid" name="sid" />
    <field column="id" template="${book.ID}_${book.SID}"/>
</entity> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T09:11:25.117

是的，我删除了索引并插入了新的索引。

我得到了什么：

```
 <doc>
    <str name="id">1</str>
    <str name="title">Im a title</str>
    <str name="number">1337</str>
   <str name="content">content 23</str>
  </doc> 
```

我想要的是：

```
 <doc>
    <str name="id">1_1</str>
    <str name="title">Im a title</str>
    <str name="number">1337</str>
   <str name="content">content 23</str>
  </doc>

   <doc>
    <str name="id">1_2</str>
    <str name="title">Im a title for 2</str>
    <str name="number">1654654</str>
   <str name="content">ekddsd</str>
  </doc> 
```

我已经尝试更改以下内容

```
<field column="id" template="${id}_${sId}" ignoreMissingVariables="true" /> 
```

进入

```
<field column="id" template="${id}_${someOtherField}" ignoreMissingVariables="true" /> 
```

结果没有改变..看起来 TemplateTransformer 不起作用？

**编辑** 在我的日志中发现了一些东西：

```
Unable to resolve variable: id while parsing expression: ${id}_${sId}
Unable to resolve variable: sId while parsing expression: ${id}_${sId} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T09:00:45.850

将**multivalued=true**添加到 schema.xml 文件中的 id 和 sId 字段。

# php - 访问者开发后清除缓存

> ID：12855198
> 
> 赞同：5
> 
> 时间：2012-10-12T08:35:58.520
> 
> 标签：php, javascript, caching

我正在开发网站，一些访问者的浏览器出现旧缓存。

有没有办法我们可以使用服务器端的代码甚至 javascript 清除访问者的浏览器缓存，这样他们就不必清除自己？

我找不到这个的直接答案。

大公司一定有一种方式，比如 Facebook、Ebay 等

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T08:40:13.820

我们一直在使用 htaccess 来确定客户端的缓存规则。我们明确地赋予缓存 24 小时的生命周期，并在更新前一天设置无缓存规则。它有帮助，但它很乏味而且不那么可靠。

如果没有人回答，只是发布它来给你一些想法，但我也很想得到答案。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T08:46:40.867

**第一种方法：**

您实际上可以在结束脚本之前保存页面的输出，然后在脚本开始时加载缓存。

示例代码：

```
<?php

$cachefile = 'cache/'.basename($_SERVER['PHP_SELF']).'.cache'; // e.g. cache/index.php.cache
$cachetime = 3600; // time to cache in seconds

if(file_exists($cachefile) && time()-$cachetime <= filemtime($cachefile)){
  $c = @file_get_contents($cf);
  echo $c;
  exit;
}else{
  unlink($cachefile);
}

ob_start();

// all the coding goes here

$c = ob_get_contents();
file_put_contents($cachefile);

?> 
```

您实际上可以在结束脚本之前保存页面的输出，然后在脚本开始时加载缓存。

示例代码：

如果你有很多页面需要这种缓存，你可以这样做：

在 cachestart.php 中：

在 cacheend.php 中：

```
<?php

$c = ob_get_contents();
file_put_contents($cachefile);

?> 
```

然后只需简单地添加

包括（'cachestart.php'）；在脚本的开头。并添加

包括（'cacheend.php'）；在脚本的末尾。请记住有一个名为 cache 的文件夹并允许 PHP 访问它。

还要记住，如果你正在做一个完整的页面缓存，你的页面不应该有特定于会话的显示（例如显示成员的栏或什么），因为它们也会被缓存。查看特定缓存（变量或页面的一部分）的框架。

**第二种方法：**

使用 Squid 或正确更新 HTTP 标头来进行浏览器缓存。

PEAR 有一个缓存包（实际上是两个）：

[http://pear.php.net/package/Cache](http://pear.php.net/package/Cache)

**第四种方法：**

使用[http://memcached.org/](http://memcached.org/)。该网站上有关于如何执行此操作的说明。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T08:38:08.200

我通常使用多种技术组合：

*   PHP 代码生成的 HTML 不会使用标准配置进行缓存，因为它会自动发送适当的标头。
*   如果图像和其他二进制资产发生变化，它们会被重命名。
*   对于 JavaScript 和 CSS，我将自动创建的唯一代码（即内容的 MD5 哈希值或文件大小）添加到文件名（例如`/public/styles.f782bed8.css`）并使用 mod_rewrite 再次删除它。这样，文件中的每次更改都会产生一个新的文件名。这可以在 PHP 运行时在输出 HTML 标头时完成，使其完全自动化。但是，在这种情况下，MD5 可能会对性能产生影响。

# c# - 带有可选参数的发射函数

> ID：12855201
> 
> 赞同：5
> 
> 时间：2012-10-12T08:36:10.410
> 
> 标签：c#, .net, reflection.emit, il, mono.cecil

我有以下 C# 代码：

```
public static double f(double x1, double x2 = 1)
{
    return x1 * x2;
} 
```

这里是 IL 代码（ILSpy）：

```
.method public hidebysig static 
    float64 f (
        float64 x1,
        [opt] float64 x2
    ) cil managed 
{
    .param [2] = float64(1)
    // Method begins at RVA 0x20c6
    // Code size 4 (0x4)
    .maxstack 8

    IL_0000: ldarg.0
    IL_0001: ldarg.1
    IL_0002: mul
    IL_0003: ret
} // end of method A::f 
```

如何使用**System.Reflection.Emit**或更好地使用**Mono.Cecil**获得它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T09:06:53.213

如果我想做一些事情，我通常会使用预期的代码`Mono.Cecil`创建一个类/方法。`C#`然后我检查它（确保你在发布模式下运行它）`Mono.Cecil`并重新创建它。

所以你需要一个`MethodDefinition`带有`name`,`attributes`和`returnType`参数的。名称：“f”

您的方法的属性是：`Mono.Cecil.MethodAttributes.FamANDAssem | Mono.Cecil.MethodAttributes.Family | Mono.Cecil.MethodAttributes.Static | Mono.Cecil.MethodAttributes.HideBySig`

以及返回类型（类型`Mono.Cecil.TypeReference`为 as `System.Double`）

至于参数，`ParameterDefinition`您可以添加两个`target.Parameters.Add()`

您的参数之一具有默认值，因此其属性必须是`Mono.Cecil.ParameterAttributes.Optional | Mono.Cecil.ParameterAttributes.HasDefault` 并且`Constant`设置为`1.0`（在您的情况下）

现在对于方法体：

```
target.Body.GetILProcessor();  // target is your `MethodDefinition` object. 
```

检查来自 的说明后`target.Body.Instructions`，我们看到以下代码：

```
IL_0000: ldarg.0
IL_0001: ldarg.1
IL_0002: mul
IL_0003: stloc.0
IL_0004: br.s IL_0007
IL_0005: ldloc.0
IL_0007: ret 
```

所以只需按正确的顺序添加代码

```
 processor.Append(OpCodes.Ldarg_0); 
```

之后，将您的注入/保存`MethodDefinition`到相应的程序集。

我的装配检查器代码如下所示：

```
 private static void EnumerateAssembly(AssemblyDefinition assembly)
        {
            foreach (var module in assembly.Modules)
            {
                foreach (var type in module.GetAllTypes())
                {
                    foreach (var field in type.Fields)
                    {
                        Debug.Print(field.ToString());
                    }
                    foreach (var method in type.Methods)
                    {
                        Debug.Print(method.ToString());
                        foreach (var instruction in method.Body.Instructions)
                        {
                            Debug.Print(instruction.ToString());
                        }
                    }
                }
            }
        } 
```

# java - 错误 [org.jboss.msc.service.fail]（MSC 服务线程 1-4）MSC00001：无法启动服务

> ID：12855209
> 
> 赞同：1
> 
> 时间：2012-10-12T08:36:33.997
> 
> 标签：java, hibernate, jakarta-ee, jboss, jboss7.x

大家好，我在部署 Jboss-7-as.1.1 时遇到了一些问题，但我遇到了`ERROR [org.jboss.msc.service.fail] (MSC service thread 1-4) MSC00001: Failed to start service`错误。

```
10:44:30,343 INFO  [org.jboss.as.connector] (MSC service thread 1-1) JBAS010408: Starting JCA Subsystem (JBoss IronJacamar 1.0.7.Final)
10:44:30,765 INFO  [org.jboss.as.naming] (MSC service thread 1-2) JBAS011802: Starting Naming Service
10:44:31,750 INFO  [org.apache.coyote.http11.Http11Protocol] (MSC service thread 1-2) Starting Coyote HTTP/1.1 on http--127.0.0.1-8080
10:44:32,031 INFO  [org.jboss.as.mail.extension] (MSC service thread 1-2) JBAS015400: Bound mail session [java:jboss/mail/Default]
10:44:34,062 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-2) JBAS010400: Bound data source [java:jboss/datasources/ExampleDS]
10:44:34,984 INFO  [org.jboss.ws.common.management.AbstractServerConfig] (MSC service thread 1-1) JBoss Web Services - Stack CXF Server 4.0.1.GA
10:44:35,656 INFO  [org.jboss.as.server.deployment.scanner] (MSC service thread 1-3) JBAS015012: Started FileSystemDeploymentService for directory D:\jboss-as-7.1.0.Final\standalone\deployments
10:44:35,703 INFO  [org.jboss.as.remoting] (MSC service thread 1-2) JBAS017100: Listening on /127.0.0.1:9999
10:44:35,703 INFO  [org.jboss.as.remoting] (MSC service thread 1-1) JBAS017100: Listening on /127.0.0.1:4447
10:44:36,296 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-2) JBAS015876: Starting deployment of "axis2.war"
10:44:36,296 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-1) JBAS015876: Starting deployment of "responsecomponent.ear"
10:44:50,296 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-1) Class Path entry xercesImpl.jar in "/D:/jboss-as-7.1.0.Final/bin/content/responsecomponent.ear/lib/xalan-2.7.0.jar"  does not point to a valid jar for a Class-Path reference.
10:44:50,312 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-1) Class Path entry xml-apis.jar in "/D:/jboss-as-7.1.0.Final/bin/content/responsecomponent.ear/lib/xalan-2.7.0.jar"  does not point to a valid jar for a Class-Path reference.
10:44:50,328 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-1) Class Path entry serializer.jar in "/D:/jboss-as-7.1.0.Final/bin/content/responsecomponent.ear/lib/xalan-2.7.0.jar"  does not point to a valid jar for a Class-Path reference.
10:44:50,343 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-1) Class Path entry activation.jar in "/D:/jboss-as-7.1.0.Final/bin/content/responsecomponent.ear/lib/mail-1.4.jar"  does not point to a valid jar for a Class-Path reference.
10:44:50,359 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-1) Class Path entry bcel.jar in "/D:/jboss-as-7.1.0.Final/bin/content/responsecomponent.ear/lib/jibx-bind-1.1.4.jar"  does not point to a valid jar for a Class-Path reference.
10:44:50,375 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-1) Class Path entry jibx-run.jar in "/D:/jboss-as-7.1.0.Final/bin/content/responsecomponent.ear/lib/jibx-bind-1.1.4.jar"  does not point to a valid jar for a Class-Path reference.
10:44:50,375 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-1) Class Path entry xpp3.jar in "/D:/jboss-as-7.1.0.Final/bin/content/responsecomponent.ear/lib/jibx-bind-1.1.4.jar"  does not point to a valid jar for a Class-Path reference.
10:44:50,390 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-1) Class Path entry stax-api.jar in "/D:/jboss-as-7.1.0.Final/bin/content/responsecomponent.ear/lib/jibx-bind-1.1.4.jar"  does not point to a valid jar for a Class-Path reference.
10:44:50,406 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-1) Class Path entry wstx-asl.jar in "/D:/jboss-as-7.1.0.Final/bin/content/responsecomponent.ear/lib/jibx-bind-1.1.4.jar"  does not point to a valid jar for a Class-Path reference.
10:44:50,421 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-1) Class Path entry jaxb-api.jar in "/D:/jboss-as-7.1.0.Final/bin/content/responsecomponent.ear/lib/jaxb-xjc-2.0.2.jar"  does not point to a valid jar for a Class-Path reference.
10:44:50,421 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-1) Class Path entry jaxb-impl.jar in "/D:/jboss-as-7.1.0.Final/bin/content/responsecomponent.ear/lib/jaxb-xjc-2.0.2.jar"  does not point to a valid jar for a Class-Path reference.
10:44:50,437 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-1) Class Path entry jsr173_1.0_api.jar in "/D:/jboss-as-7.1.0.Final/bin/content/responsecomponent.ear/lib/jaxb-xjc-2.0.2.jar"  does not point to a valid jar for a Class-Path reference.
10:44:50,453 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-1) Class Path entry activation.jar in "/D:/jboss-as-7.1.0.Final/bin/content/responsecomponent.ear/lib/jaxb-xjc-2.0.2.jar"  does not point to a valid jar for a Class-Path reference.
10:44:50,468 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-1) Class Path entry jaxb-api.jar in "/D:/jboss-as-7.1.0.Final/bin/content/responsecomponent.ear/lib/jaxb-impl-2.0.2.jar"  does not point to a valid jar for a Class-Path reference.
10:44:50,468 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-1) Class Path entry activation.jar in "/D:/jboss-as-7.1.0.Final/bin/content/responsecomponent.ear/lib/jaxb-impl-2.0.2.jar"  does not point to a valid jar for a Class-Path reference.
10:44:50,484 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-1) Class Path entry jsr173_1.0_api.jar in "/D:/jboss-as-7.1.0.Final/bin/content/responsecomponent.ear/lib/jaxb-impl-2.0.2.jar"  does not point to a valid jar for a Class-Path reference.
10:44:50,500 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-1) Class Path entry jaxb1-impl.jar in "/D:/jboss-as-7.1.0.Final/bin/content/responsecomponent.ear/lib/jaxb-impl-2.0.2.jar"  does not point to a valid jar for a Class-Path reference.
10:44:50,515 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-4) JBAS015876: Starting deployment of "responsecomponent.jar"
10:44:50,953 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-4) MSC00001: Failed to start service jboss.deployment.unit."responsecomponent.ear".PARSE: org.jboss.msc.service.StartException in service jboss.deployment.unit."responsecomponent.ear".PARSE: Failed to process phase PARSE of deployment "responsecomponent.ear"
    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:119) [jboss-as-server-7.1.0.Final.jar:7.1.0.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [rt.jar:1.6.0_11]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [rt.jar:1.6.0_11]
    at java.lang.Thread.run(Thread.java:619) [rt.jar:1.6.0_11]
Caused by: org.jboss.as.server.deployment.DeploymentUnitProcessingException: JBAS017224: Failed to parse service xml ["/D:/jboss-as-7.1.0.Final/bin/content/responsecomponent.ear/META-INF/jboss-service.xml"]
    at org.jboss.as.service.ServiceDeploymentParsingProcessor.deploy(ServiceDeploymentParsingProcessor.java:95)
    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:113) [jboss-as-server-7.1.0.Final.jar:7.1.0.Final]
    ... 5 more
Caused by: javax.xml.stream.XMLStreamException: ParseError at [row,col]:[1,1]
Message: Unexpected element 'jboss-app'
    at org.jboss.staxmapper.XMLMapperImpl.processNested(XMLMapperImpl.java:108)
    at org.jboss.staxmapper.XMLMapperImpl.parseDocument(XMLMapperImpl.java:69)
    at org.jboss.as.service.ServiceDeploymentParsingProcessor.deploy(ServiceDeploymentParsingProcessor.java:88)
    ... 6 more

10:44:58,953 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-2) Class Path entry jaxb-api.jar in "/D:/jboss-as-7.1.0.Final/bin/content/axis2.war/WEB-INF/lib/jaxb-impl-2.1.7.jar"  does not point to a valid jar for a Class-Path reference.
10:44:58,968 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-2) Class Path entry activation.jar in "/D:/jboss-as-7.1.0.Final/bin/content/axis2.war/WEB-INF/lib/jaxb-impl-2.1.7.jar"  does not point to a valid jar for a Class-Path reference.
10:44:58,968 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-2) Class Path entry jsr173_1.0_api.jar in "/D:/jboss-as-7.1.0.Final/bin/content/axis2.war/WEB-INF/lib/jaxb-impl-2.1.7.jar"  does not point to a valid jar for a Class-Path reference.
10:44:58,984 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-2) Class Path entry jaxb1-impl.jar in "/D:/jboss-as-7.1.0.Final/bin/content/axis2.war/WEB-INF/lib/jaxb-impl-2.1.7.jar"  does not point to a valid jar for a Class-Path reference.
10:44:59,000 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-2) Class Path entry jaxb-api.jar in "/D:/jboss-as-7.1.0.Final/bin/content/axis2.war/WEB-INF/lib/jaxb-xjc-2.1.7.jar"  does not point to a valid jar for a Class-Path reference.
10:44:59,015 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-2) Class Path entry jaxb-impl.jar in "/D:/jboss-as-7.1.0.Final/bin/content/axis2.war/WEB-INF/lib/jaxb-xjc-2.1.7.jar"  does not point to a valid jar for a Class-Path reference.
10:44:59,031 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-2) Class Path entry jsr173_1.0_api.jar in "/D:/jboss-as-7.1.0.Final/bin/content/axis2.war/WEB-INF/lib/jaxb-xjc-2.1.7.jar"  does not point to a valid jar for a Class-Path reference.
10:44:59,031 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-2) Class Path entry activation.jar in "/D:/jboss-as-7.1.0.Final/bin/content/axis2.war/WEB-INF/lib/jaxb-xjc-2.1.7.jar"  does not point to a valid jar for a Class-Path reference.
10:44:59,046 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-2) Class Path entry bcel.jar in "/D:/jboss-as-7.1.0.Final/bin/content/axis2.war/WEB-INF/lib/jibx-bind-1.2.1.jar"  does not point to a valid jar for a Class-Path reference.
10:44:59,062 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-2) Class Path entry jibx-run.jar in "/D:/jboss-as-7.1.0.Final/bin/content/axis2.war/WEB-INF/lib/jibx-bind-1.2.1.jar"  does not point to a valid jar for a Class-Path reference.
10:44:59,078 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-2) Class Path entry xpp3.jar in "/D:/jboss-as-7.1.0.Final/bin/content/axis2.war/WEB-INF/lib/jibx-bind-1.2.1.jar"  does not point to a valid jar for a Class-Path reference.
10:44:59,093 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-2) Class Path entry stax-api.jar in "/D:/jboss-as-7.1.0.Final/bin/content/axis2.war/WEB-INF/lib/jibx-bind-1.2.1.jar"  does not point to a valid jar for a Class-Path reference.
10:44:59,093 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-2) Class Path entry wstx-asl.jar in "/D:/jboss-as-7.1.0.Final/bin/content/axis2.war/WEB-INF/lib/jibx-bind-1.2.1.jar"  does not point to a valid jar for a Class-Path reference.
10:44:59,109 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-2) Class Path entry xpp3.jar in "/D:/jboss-as-7.1.0.Final/bin/content/axis2.war/WEB-INF/lib/jibx-run-1.2.1.jar"  does not point to a valid jar for a Class-Path reference.
10:44:59,125 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-2) Class Path entry stax-api.jar in "/D:/jboss-as-7.1.0.Final/bin/content/axis2.war/WEB-INF/lib/jibx-run-1.2.1.jar"  does not point to a valid jar for a Class-Path reference.
10:44:59,140 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-2) Class Path entry wstx-asl.jar in "/D:/jboss-as-7.1.0.Final/bin/content/axis2.war/WEB-INF/lib/jibx-run-1.2.1.jar"  does not point to a valid jar for a Class-Path reference.
10:44:59,156 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-2) Class Path entry activation.jar in "/D:/jboss-as-7.1.0.Final/bin/content/axis2.war/WEB-INF/lib/mail-1.4.jar"  does not point to a valid jar for a Class-Path reference.
10:44:59,171 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-2) Class Path entry xercesImpl.jar in "/D:/jboss-as-7.1.0.Final/bin/content/axis2.war/WEB-INF/lib/xalan-2.7.0.jar"  does not point to a valid jar for a Class-Path reference.
10:44:59,171 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-2) Class Path entry xml-apis.jar in "/D:/jboss-as-7.1.0.Final/bin/content/axis2.war/WEB-INF/lib/xalan-2.7.0.jar"  does not point to a valid jar for a Class-Path reference.
10:44:59,187 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-2) Class Path entry serializer.jar in "/D:/jboss-as-7.1.0.Final/bin/content/axis2.war/WEB-INF/lib/xalan-2.7.0.jar"  does not point to a valid jar for a Class-Path reference.
10:45:00,796 WARN  [org.apache.axiom.util.stax.dialect.StAXDialectDetector] (MSC service thread 1-2) Unable to determine dialect of the StAX implementation at jar:file:/D:/jboss-as-7.1.0.Final/jboss-modules.jar!/
10:45:01,046 INFO  [org.apache.axis2.deployment.ClusterBuilder] (MSC service thread 1-2) Clustering has been disabled
10:45:03,296 INFO  [org.apache.axis2.deployment.ModuleDeployer] (MSC service thread 1-2) Deploying module: addressing-1.5 - file:/D:/jboss-as-7.1.0.Final/standalone/tmp/vfs/tempcb22ca251f6318fa/axis2.war-dcd99ebb654bec5f/WEB-INF/modules/addressing-1.5.mar
10:45:03,343 INFO  [org.apache.axis2.deployment.ModuleDeployer] (MSC service thread 1-2) Deploying module: jaxws-1.5 - file:/D:/jboss-as-7.1.0.Final/standalone/tmp/vfs/tempcb22ca251f6318fa/axis2.war-dcd99ebb654bec5f/WEB-INF/modules/axis2-jaxws-mar-1.5.mar
10:45:04,218 INFO  [org.apache.axis2.deployment.ModuleDeployer] (MSC service thread 1-2) Deploying module: script-1.5 - file:/D:/jboss-as-7.1.0.Final/standalone/tmp/vfs/tempcb22ca251f6318fa/axis2.war-dcd99ebb654bec5f/WEB-INF/modules/axis2-scripting-1.5.mar
10:45:04,281 INFO  [org.apache.axis2.deployment.ModuleDeployer] (MSC service thread 1-2) Deploying module: metadataExchange-1.5 - file:/D:/jboss-as-7.1.0.Final/standalone/tmp/vfs/tempcb22ca251f6318fa/axis2.war-dcd99ebb654bec5f/WEB-INF/modules/mex-1.5.mar
10:45:04,343 INFO  [org.apache.axis2.deployment.ModuleDeployer] (MSC service thread 1-2) Deploying module: mtompolicy-1.5 - file:/D:/jboss-as-7.1.0.Final/standalone/tmp/vfs/tempcb22ca251f6318fa/axis2.war-dcd99ebb654bec5f/WEB-INF/modules/mtompolicy-1.5.mar
10:45:04,406 INFO  [org.apache.axis2.deployment.ModuleDeployer] (MSC service thread 1-2) Deploying module: ping-1.5 - file:/D:/jboss-as-7.1.0.Final/standalone/tmp/vfs/tempcb22ca251f6318fa/axis2.war-dcd99ebb654bec5f/WEB-INF/modules/ping-1.5.mar
10:45:05,375 INFO  [org.apache.axis2.deployment.ModuleDeployer] (MSC service thread 1-2) Deploying module: soapmonitor-1.5 - file:/D:/jboss-as-7.1.0.Final/standalone/tmp/vfs/tempcb22ca251f6318fa/axis2.war-dcd99ebb654bec5f/WEB-INF/modules/soapmonitor-1.5.mar
10:45:06,546 INFO  [org.apache.axis2.deployment.ServiceDeployer] (MSC service thread 1-2) Deploying Web service: SPGenericConnectorVer2.aar - file:/D:/jboss-as-7.1.0.Final/standalone/tmp/vfs/tempcb22ca251f6318fa/axis2.war-dcd99ebb654bec5f/WEB-INF/services/SPGenericConnectorVer2.aar
10:45:06,656 INFO  [org.apache.axis2.deployment.ServiceDeployer] (MSC service thread 1-2) Deploying Web service: version-1.5.aar - file:/D:/jboss-as-7.1.0.Final/standalone/tmp/vfs/tempcb22ca251f6318fa/axis2.war-dcd99ebb654bec5f/WEB-INF/services/version-1.5.aar
10:45:06,687 WARN  [org.apache.axis2.transport.http.AxisServlet] (MSC service thread 1-2) No transportReceiver for org.apache.axis2.transport.http.AxisServletListener found. An instance for HTTP will be configured automatically. Please update your axis2.xml file!
10:45:06,765 INFO  [org.jboss.web] (MSC service thread 1-2) JBAS018210: Registering web context: /axis2
10:45:06,796 ERROR [org.jboss.as] (MSC service thread 1-3) JBAS015875: JBoss AS 7.1.0.Final "Thunder" started (with errors) in 55796ms - Started 181 of 256 services (2 services failed or missing dependencies, 72 services are passive or on-demand)
10:45:07,015 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS015870: Deploy of deployment "responsecomponent.ear" was rolled back with failure message {"JBAS014671: Failed services" => {"jboss.deployment.unit.\"responsecomponent.ear\".PARSE" => "org.jboss.msc.service.StartException in service jboss.deployment.unit.\"responsecomponent.ear\".PARSE: Failed to process phase PARSE of deployment \"responsecomponent.ear\""}}
10:45:07,031 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS015871: Deploy of deployment "axis2.war" was rolled back with no failure message
10:45:07,500 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-1) JBAS015877: Stopped deployment responsecomponent.jar in 482ms
10:45:11,468 INFO  [org.apache.catalina.core.StandardContext] (MSC service thread 1-4) Container org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/] has not been started
10:45:11,703 INFO  [org.jboss.as.osgi] (MSC service thread 1-4) JBAS011942: Stopping OSGi Framework
10:45:11,734 INFO  [org.apache.coyote.http11.Http11Protocol] (MSC service thread 1-3) Pausing Coyote HTTP/1.1 on http--127.0.0.1-8080
10:45:11,734 INFO  [org.apache.coyote.http11.Http11Protocol] (MSC service thread 1-3) Stopping Coyote HTTP/1.1 on http--127.0.0.1-8080 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T08:54:26.457

下面是说您在服务器 jboss-service.xml 文件中放置了一个 jboss-app 元素。不允许使用此类元素。在编辑时，您可能需要在 XML 编辑器 IDE 界面中更加小心。

```
Caused by: org.jboss.as.server.deployment.DeploymentUnitProcessingException: JBAS017224: Failed to parse service xml ["/D:/jboss-as-7.1.0.Final/bin/content/responsecomponent.ear/META-INF/jboss-service.xml"]
    at org.jboss.as.service.ServiceDeploymentParsingProcessor.deploy(ServiceDeploymentParsingProcessor.java:95)
    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:113) [jboss-as-server-7.1.0.Final.jar:7.1.0.Final]
    ... 5 more
Caused by: javax.xml.stream.XMLStreamException: ParseError at [row,col]:[1,1]
Message: Unexpected element 'jboss-app'
    at org.jboss.staxmapper.XMLMapperImpl.processNested(XMLMapperImpl.java:108)
    at org.jboss.staxmapper.XMLMapperImpl.parseDocument(XMLMapperImpl.java:69)
    at org.jboss.as.service.ServiceDeploymentParsingProcessor.deploy(ServiceDeploymentParsingProcessor.java:88)
    ... 6 more 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T09:13:13.527

您是否正在将您的应用程序从早期版本的 jboss 迁移到 jboss7？

如果您正在迁移应用程序，请关注[如何将应用程序从 AS5,6 迁移到 AS7帖子](https://docs.jboss.org/author/display/AS71/How+do+I+migrate+my+application+from+AS5+or+AS6+to+AS7)

**以下错误**

```
 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-4) MSC00001: Failed to start service jboss.deployment.unit."responsecomponent.ear".PARSE: org.jboss.msc.service.StartException in service jboss.deployment.unit."responsecomponent.ear".PARSE: Failed to process phase PARSE of deployment "responsecomponent.ear"
    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:119) [jboss-as-server-7.1.0.Final.jar:7.1.0.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [rt.jar:1.6.0_11]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [rt.jar:1.6.0_11]
    at java.lang.Thread.run(Thread.java:619) [rt.jar:1.6.0_11]
Caused by: org.jboss.as.server.deployment.DeploymentUnitProcessingException: JBAS017224: Failed to parse service xml ["/D:/jboss-as-7.1.0.Final/bin/content/responsecomponent.ear/META-INF/jboss-service.xml"]
    at org.jboss.as.service.ServiceDeploymentParsingProcessor.deploy(ServiceDeploymentParsingProcessor.java:95)
    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:113) [jboss-as-server-7.1.0.Final.jar:7.1.0.Final]
    ... 5 more
Caused by: javax.xml.stream.XMLStreamException: ParseError at [row,col]:[1,1]
Message: Unexpected element 'jboss-app'
    at org.jboss.staxmapper.XMLMapperImpl.processNested(XMLMapperImpl.java:108)
    at org.jboss.staxmapper.XMLMapperImpl.parseDocument(XMLMapperImpl.java:69)
    at org.jboss.as.service.ServiceDeploymentParsingProcessor.deploy(ServiceDeploymentParsingProcessor.java:88)
    ... 6 more 
```

**见上文..它在说以下**

```
 Failed to parse service xml ["/D:/jboss-as-7.1.0.Final/bin/content/responsecomponent.ear/META-INF/jboss-service.xml 
```

这是你的错误，它还说

```
javax.xml.stream.XMLStreamException: ParseError at [row,col]:[1,1]
unexpected element 'jboss-app' 
```

这是错误的原因

删除那个`jboss-app`标签..它不属于这里

检查 Jboss AS7 的 jboss-service.xml 结构。对于 Jboss 7.1，我们有不同的部署描述符

请参阅用于 as7.1 的部署描述符列表的[各种部署描述符](https://docs.jboss.org/author/display/AS71/Deployment+Descriptors+used+In+AS7.1)

**AS7 提供 jboss-app.xml 用于覆盖 application.xml 中的内容，请参阅上面的链接了解详细信息。**

问候

# iphone - UIBezierPath 太多路径 = 太慢？

> ID：12855212
> 
> 赞同：2
> 
> 时间：2012-10-12T08:36:51.203
> 
> 标签：iphone, ios, xcode, quartz-graphics, drawrect

我有一个循环，我在其中向 UIBezierPath 添加了许多（10000+）行。这似乎很好，但是一旦我尝试渲染 bezierpath，我的设备就会变得非常缓慢和生涩。这是因为我在路径中添加了太多行吗？

向 UIBezierPath 添加行 - 简化：（这看起来不错）

```
[path moveToPoint:CGPointZero];

   for (int i = 0; i < 10000; i++ ) {      
           [path addLineToPoint:CGPointMake(i, i)];
    } 
```

渲染 BeizerPath（由 Rob 建议） - 这似乎很慢。

```
- (void)drawBezierAnimate:(BOOL)animate
{
    UIBezierPath *bezierPath = path;

    CAShapeLayer *bezier = [[CAShapeLayer alloc] init];

    bezier.path          = bezierPath.CGPath;
    bezier.strokeColor   = [UIColor blueColor].CGColor;
    bezier.fillColor     = [UIColor clearColor].CGColor;
    bezier.lineWidth     = 2.0;
    bezier.strokeStart   = 0.0;
    bezier.strokeEnd     = 1.0;
    [self.layer addSublayer:bezier];

    if (animate)
    {
        CABasicAnimation *animateStrokeEnd = [CABasicAnimation animationWithKeyPath:@"strokeEnd"];
        animateStrokeEnd.duration  = 100.0;
        animateStrokeEnd.fromValue = [NSNumber numberWithFloat:0.0f];
        animateStrokeEnd.toValue   = [NSNumber numberWithFloat:1.0f];
        [bezier addAnimation:animateStrokeEnd forKey:@"strokeEndAnimation"];
    }
} 
```

问：

1）这是因为我添加太多路径太快了吗？

2）我想最终绘制许多不同颜色的不同线条，所以我假设我需要创建多个（10000+）UIBezierPaths - 这会帮助还是大大减慢设备？

3）我将如何解决这个问题？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T09:34:46.933

我认为没有办法让这个运行足够快。

它可能适用于一次性渲染（到图像缓冲区）。但有了动画 - 不。

该文档没有限制路径中的点数，但是我认为有数千个点，您已经超出了*任何*合理的限制。

OpenGL 在这里可能很有用——也许有人可以插话并就此提供一些建议。

单独使用 UIKit，您可能必须从多个缓存层组合图像。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-13T02:57:31.277

我发现 UIBezierPath 由于抗锯齿而很慢。我的解决方案是在各种拖动操作期间关闭抗锯齿，并在手势完成后重新绘制并启用抗锯齿。

您可以使用 CGContextSetShouldAntialias(context, ...);

# c# - C# 在流中使用关键字

> ID：12855215
> 
> 赞同：1
> 
> 时间：2012-10-12T08:36:54.977
> 
> 标签：c#, stream

我应该使用`using`以下代码的关键字还是 dispose 方法（因为我正在打开一个流）：

```
 class Program
    {
        static void Main(string[] args)
        {
            var x = Deserialize<Dog>(new FileStream(@"C:\Documents and Settings\name\Desktop\demo.xml", FileMode.Open));
         }

        static T Deserialize<T>(Stream s)
        {
            XmlSerializer ser = new XmlSerializer(typeof(T));
            return (T)ser.Deserialize(s);
        }
    } 
```

如果没有，您能否解释一下为什么不（新的 FileStream 会自动处理/关闭流）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-12T08:39:26.587

你应该使用`using`：

```
using(var stream = new FileStream(@"C:\path\demo.xml", FileMode.Open))
{
    var x = Deserialize<Dog>(stream);
    // more code ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T08:38:52.510

是的，您应该处理流。例如，如果您要使用[File.ReadAllText()](http://msdn.microsoft.com/en-us/library/ms143368.aspx)，此静态方法将打开一个流并为您处理它。我建议**使用 Using**，这是因为它也会处理异常。例如在这个点头的例子中：

此版本正确处理 FileStream：

```
using(FileStream fs = FileStream(path, FileMode.Open))
{
   throw new Exception();
} 
```

此示例泄漏了 FileStream 使用的资源，您可以添加 try/catch 块，但它的可读性较差。

```
FileStream fs = new FileStream(path, FileMode.Open);
throw new Exception();
fs.Dispose(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T08:39:08.220

如果使用`using block`，他执行到底治疗`Dispose method`。

您使用 using, because `FileStream is non managed object`,so`Garbage collector don't have informatiosn abouts this object`来清理，因此开发人员必须清理资源以帮助您的 GC。

链接： http: [//msdn.microsoft.com/fr-fr/library/yh598w02 (v=vs.80).aspx](http://msdn.microsoft.com/fr-fr/library/yh598w02(v=vs.80).aspx)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-12T08:41:27.010

您应该将**Using**与实现 IDisposable 的所有内容一起使用 :)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-12T08:59:25.947

如前所述，您应该使用 using。但为什么？好吧，正如已经提到的，您应该对所有实现 IDisposable 的对象使用 using。

在您的情况下，FileStream 继承自实现 IDisposable 的 Stream 对象。在此处阅读有关 FileStream 的更多信息：[msdn](http://msdn.microsoft.com/en-us/library/system.io.filestream.aspx)

# c# - 如果文件存在，则找不到文件错误c#

> ID：12855228
> 
> 赞同：-2
> 
> 时间：2012-10-12T08:38:08.627
> 
> 标签：c#

```
SmtpClient smtpClient = new SmtpClient();
MailMessage message = new MailMessage();
Attachment data = new Attachment(@"\\MYPC\Share\FinalReport.html");
message.Attachments.Add(data);
smtpClient.Send(message); 
```

该准则在上周运行良好。但是今天我遇到了一个异常，因为它找不到文件：*\MYPC\Share\FinalReport.html*。我以不同的方式尝试了一个小时，然后重新启动了系统。再次它工作正常。

关键点：过去一周我没有关闭或重新启动我的电脑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T08:45:24.793

但是，如果我不得不猜测，我会说这可能是您的网络访问的问题。看起来好像您在网络共享上访问文件，所以如果您在某个时候失去连接，可以解释`FileNotFoundException`. 网络访问在高峰时间变得“不可用”并不少见，即当您的网络处于最繁忙的时候。

# java - 如何在 spring 中编写一个高效的 applicationContext.xml

> ID：12855229
> 
> 赞同：-1
> 
> 时间：2012-10-12T08:38:19.610
> 
> 标签：java, spring, javabeans

我刚开始学春天。使用spring在应用程序开发中编写ApplicationContext xml文件时应该避免什么，以便代码高效？（我的意思是在编写 ApplicationContext xml 文件时可以遵循的良好做法，请不要给我反对票，这是一个真正的疑问）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T08:53:03.513

有几件事情要考虑下面只是一些事情要考虑

1）模块化 - 我们可以明智地划分 applicationContext.xml 模块并将其导入主 applicationContext.xml 示例：applicationContext.xml 代码片段

```
<import resource="classpath:dbConfig.xml"/>
<import resource="classpath:userModuleContext.xml"/>
<import resource="classpath:customerModuleContext.xml"/> 
```

2) 数据库配置可以存储在单独的属性文件中，然后使用**PropertyPlaceholderConfigurer在 applicationContext.xml 中使用**

3) Bean 范围应该像原型、单例、请求、会话一样合适

单例 - 表示每个弹簧容器的单个实例。它可能会导致集群环境中的问题。

4) Bean Dependancy Injection 应该是合适的，这样就不会造成像A ---> B ---> C ---> A 这样的循环依赖

还有很多 ....

# android - 我应该什么时候开始在 SurfaceView 上绘图？

> ID：12855232
> 
> 赞同：2
> 
> 时间：2012-10-12T08:38:25.743
> 
> 标签：android, surfaceview

我使用 SurfaceView 创建选取框功能，但有时在 SurfaceView 中的绘图线程开始运行后，UI 线程被阻塞，我对 BACK 或 MENU 按钮的触摸未调度，并产生**ANR**。这种情况时不时发生。

我猜这是因为 SurfaceView 中的绘图开始**得太早**（当然我确保绘图发生在`surfaceCreated()`and之间`surfaceDestroyed()`），我*猜*绘图线程应该在完全初始化之后开始，也许与 Activity 相关？

当我在实际使用返回`Thread.sleep(100)`的代码之前添加开始绘制时，问题*几乎*消失了，它仍然会发生，但是频率很低。如果我在画布上实际绘制某些东西之前让绘图线程休眠足够长的时间，那么问题就不会再发生了。`Canvas``SurfaceHolder.lockCanvas()`

 *看起来我应该在**某些东西**完全初始化后开始绘画，但我不知道那是什么东西。

这个SurfaceView作为一个普通的View放在布局文件中，下面是用来在Surface上绘制的代码。

```
public void run() {
    try {
        // this is extremely crucial, without this line, surfaceView.lockCanvas() may
        // produce ANR from now and then. Looks like the reason is that we can not start
        // drawing on the surface too early
        Thread.sleep(100);
    } catch (Exception e) {}

    while (running) {
        Canvas canvas = null;
        try{

            long ts = System.currentTimeMillis();

            canvas = surfaceHolder.lockCanvas();
            if (canvas != null) {
                synchronized (surfaceHolder) {
                    doDraw(canvas);
                }

                ts = System.currentTimeMillis() - ts;
                if (ts < delayInterval) {
                    Thread.sleep(delayInterval - ts);
                }
            }

        } catch (InterruptedException e) {
            // do nothing
        } finally {
            if (canvas != null)
                surfaceHolder.unlockCanvasAndPost(canvas);
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:38:43.153

你不应该在and`Thread.sleep`之间调用，它应该只在画布解锁后调用。`SurfaceHolder.lockCanvas``SurfaceHolder.unlockCanvasAndPost`

In your code example canvas remains locked almost all the time and cause [starvation](http://docs.oracle.com/javase/tutorial/essential/concurrency/starvelive.html). There is only a little window for SurfaceFlinger to take a canvas a process it. So sometimes this code could fail and that's why ANR errors were sporadic.*

# mysql - 如何找到两个不同 MySQL TABLE 中特定字段之间的差异？

> ID：12855248
> 
> 赞同：0
> 
> 时间：2012-10-12T08:39:19.890
> 
> 标签：mysql

我得到这个 MySQL 数据库的数据馈送。它会改变，但没有迹象表明从源头发生了什么变化。一种方法是创建一个 OLD 表和一个 NEW 表。在将数据馈送填充到 NEW 表之后，然后对 OLD 表进行比较，并且 OLD 表中不存在的任何原因都被视为新记录或更改的记录。顺便说一句，数据馈送中没有记录 ID，所以我不能将其用作参考。

在 MySQL 中，如何在特定字段上比较 OLD 表和 NEW 表以获取新的或更改的列表？谢谢！

附加信息更新：数据馈送是一个邮件列表，但没有为来自源的记录分配 ID。因此，必须比较每条记录中的某些字段才能找到匹配项，但会显示那些不匹配的字段。这样做的目的是生成一份营销报告，说明要添加哪些新客户，或者他们的信息是否已更改。

此任务的重点是确定数据馈送中的哪些记录是新的或自上次馈送以来已更改。饲料每晚进行一次。没有需要更新的数据库，我们只需要报告自上次提要以来的新增/更改内容。关键字段是 Company_Name。

所以我需要知道如何进行 MySQL 查询来搜索旧表（这是昨天的数据馈送）并将其与新表进行比较。如果新表中不存在 Company_name，则这意味着该客户已从邮件列表中删除。如果 Company_name 存在于新表中，但不存在于旧表中，则表明这是添加到邮件列表中的新客户。

这个 MySQL 可以用来定位新记录吗？

```
SELECT * FROM old
WHERE old.company_name
NOT IN (
SELECT new.company_name
FROM new
WHERE old.company_name=new.company_name
); 
```

# c++ - 将 olb 文件中的 COM 接口导入 VC6

> ID：12855250
> 
> 赞同：0
> 
> 时间：2012-10-12T08:39:26.650
> 
> 标签：c++, com, mfc, visual-c++-6

*请不要告诉我不要使用 VC6，它是一个遗留项目。*

我有一个包含 COM 接口的 olb 文件，我需要创建一个包含从 COleDispatchDriver 派生的包装类的头文件和 cpp 文件。我以前做过，但现在我不记得步骤了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T09:17:53.923

打开 ClassWizard（从 View 菜单或 Ctrl+W - 我想）。Add Class 按钮有一个“From a Type Library”选项。

# objective-c - 如何在 Fedora 上运行 Objective C 程序？

> ID：12855251
> 
> 赞同：0
> 
> 时间：2012-10-12T08:39:30.967
> 
> 标签：objective-c, fedora

> **可能重复：**
> [Objective-C 和 linux 上的游戏编程](https://stackoverflow.com/questions/447942/game-programming-on-objective-c-and-linux)

嗨，我是 Objective C 的新手，我没有 mac 机器来运行 Objective C 程序。我搜索了很多命令和解决方案来运行，但我没有得到任何东西。任何人都可以建议我在fedora上运行目标C程序以及命令的任何解决方案。

任何帮助都会被应用。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T09:51:57.087

[Programming in Objective-C by Stephen Kochan](http://www.amazon.co.uk/Programming-Objective-C-Automatic-Reference-Developers/dp/0321811909/ref=sr_1_1?ie=UTF8&qid=1350035430&sr=8-1)本书开头有几章展示了如何使用 GCC 从命令行编译 Objective-C 程序。

更新的版本可能已经更新为用 LLVM 替换 GCC，但我还没有阅读这些内容。

# decimal - 在 R.Studio 中限制生成数字中的小数位数

> ID：12855252
> 
> 赞同：1
> 
> 时间：2012-10-12T08:39:37.787
> 
> 标签：decimal

我一般是编程的初学者，特别是 R。

我想生成一组正态分布的随机数，但将这些数字中的小数位限制为 2。

我一直在使用 x1 <- runif() 来生成我的数字。

我可以添加一些东西以使我只能得到四舍五入到小数点后 2 位的结果吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-05T01:27:00.797

您可以使用 round() 函数限制小数位数。

如果我正确理解您的问题，这应该可以解决问题：

```
x1 <- round(
  runif(5, min=0, max=1)   
  , digits = 2
)
x1 
```

结果，每次都会不同，是：

```
[1] 0.55 0.55 0.75 0.85 0.13 
```

# visual-studio-2012 - 如何将自定义生成操作添加到 Visual Studio 中的列表？

> ID：12855253
> 
> 赞同：4
> 
> 时间：2012-10-12T08:39:42.080
> 
> 标签：visual-studio-2012

如果您在 Visual Studio 中调出项目项的属性，则在“高级”类别中，有一个“构建操作”属性。在我安装的 Visual Studio 中，它包含“无”、“编译”、“内容”等。

如果我尝试在框中键入无法识别的值，我会收到警告“属性值无效”。

**是否可以将我自己的值添加到此列表中？如果是这样，怎么做？**

我不是在询问如何将自定义构建类型添加到 MSBuild 项目文件中——我已经知道如何做到这一点。只是我*懒得*“卸载项目”/“编辑项目”/更改`<None Include="Foo.bar"/>`为`<Whatever Include="Foo.bar"/>`/“重新加载项目”/“是的，我确定我想重新加载项目，即使它已经在编辑器中打开了”。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T13:17:19.757

据此，在您的 csproj 文件（或导入的 .targets 文件）中创建以下 ItemsGroup [：](http://blogs.msdn.com/b/msbuild/archive/2005/10/06/477064.aspx)

```
<ItemGroup>
  <AvailableItemName Include="Whatever" />   
</ItemGroup> 
```

您应该在列表中看到另一个选项。

# smartgwt - 如何在 SectionStackSection 上设置边框

> ID：12855255
> 
> 赞同：0
> 
> 时间：2012-10-12T08:39:51.297
> 
> 标签：smartgwt

在 smartgwt 中，操作标题的边框或 a 的内容相当容易`SectionStackSection`，因为它们呈现单独的 html 元素。

但是，是否也可以在整体上设置边界`SectionStackSection`？没有周围的 div，并且该部分没有 nog`setBorder()`方法。

有任何想法吗？

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T06:12:44.027

您可以使用 setAttribute(String property,String value) 方法来实现这一点。

```
 SectionStackSection section1 = new SectionStackSection("Blue Pawn");
 section1.setExpanded(true);
 section1.addItem(new Img("pieces/48/pawn_blue.png", 48, 48));
 section1.setAttribute("border", "1px solid red");
 sectionStack.addSection(section1); 
```

# r - 将 cron 转换为 R 中的时间戳

> ID：12855256
> 
> 赞同：3
> 
> 时间：2012-10-12T08:39:57.750
> 
> 标签：r, crontab, cronexpression

我正在寻找一种使用 R 将 cron 信息转换为时间戳列表的方法。有简单的方法吗？

给定 crontab 以及开始日期和结束日期，我想获取这两个日期期间的触发时间戳列表。

我还没有找到任何专门处理 CRON 信息的包，但也许有人已经遇到过这个问题？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T11:24:44.707

我假设您的意思是[crontab(5)](http://linux.die.net/man/5/crontab)格式。我知道没有库解析此信息，但以下代码段应该让您开始：

```
splitre <- function(p, s) {
  s <- as.character(s)
  stopifnot(length(s) == 1)
  m <- gregexpr(p, s)[[1]]
  if (m[1] == -1) return(s);
  return(substring(s, c(1, m + attr(m, "match.length")), c(m - 1, nchar(s))))
}

ranges <- function(desc, lo, hi, name) {
  res <- integer(0)
  for (range in splitre(",", desc)) {
    m <- regexec("^(?:\\*|(?:(\\d+)(?:-(\\d+))?))(?:/(\\d+))?$", range)
    m <- regmatches(range, m)[[1]]
    m[m == ""] <- NA
    m[1] <- NA
    m <- as.integer(m)
    if (is.na(m[2])) r <- lo:hi
    else if (is.na(m[3])) r <- m[2]
    else r <- m[2]:m[3]
    if (!is.na(m[4])) {
      stopifnot(m[4] > 0)
      r <- r[rep(c(TRUE, rep(FALSE, m[4] - 1)), length.out = length(r))]
    }
    res <- c(res, r)
  }
  res <- data.frame(res)
  names(res) <- name
  return(res)
}

ct2df <- function(lines) {
  res <- data.frame()
  for (line in lines) {
    if (regexpr("^ *(#|$)", line) == 1) continue
    parts <- splitre(" +", line)
    stopifnot(length(parts) > 5)
    j <- ranges(parts[1], 0, 59, "minute")
    j <- merge(j, ranges(parts[2], 0, 23, "hour"))
    j <- merge(j, ranges(parts[3], 1, 31, "day.of.month"))
    j <- merge(j, ranges(parts[4], 1, 12, "month"))
    j <- merge(j, ranges(parts[5], 0, 6, "day.of.week"))
    res <- rbind(res, j)
  }
  return(res)
}

print(ct2df("* 1-2,5 1-10/2 */3 1 command")) 
```

这并不完美，因为它不会处理月份或星期几的名称，也不会处理关于月份日期与星期几的特殊情况，这需要处理的`*`不仅仅是一个简单的范围。

> 注意：命令执行的日期可以由两个字段指定 - 月份的日期和星期几。如果两个字段都受限制（即 are not `*`），则当任一字段与当前时间匹配时，将运行该命令。例如，`30 4 1,15 * 5`将导致在每个月的 1 日和 15 日以及每个星期五的凌晨 4:30 运行命令。

生成的数据帧可以转换为时间戳列表，但我还没有为此编写代码。也许其他人会，在这篇文章的基础上。简单但缓慢的方法是逐分钟迭代可能的时间戳，并为每个时间戳查看计算数据帧中的一行是否与该值匹配。更快的解决方案将每天进行迭代，使用它来计算一周中的一天和一个月中的一天，然后从匹配那一天的所有行中获取时间。

# mysql - 使用 msgbox 来判断有多少条记录被插入和更新

> ID：12855261
> 
> 赞同：0
> 
> 时间：2012-10-12T08:40:11.190
> 
> 标签：mysql, vba

如何将 mysql 查询合并到 vba 中的消息框中。我想做的是当用户使用 dgv 将数据发送到数据库时。我怎样才能得到一个消息框来显示有多少记录作为更新进入，有多少作为插入进入。

仅供参考，我正在使用重复密钥更新功能。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T14:54:42.200

查看一些代码可能会有所帮助，但您只需要设置一个变量来表示您要显示的每个元素（例如 nUpdates 和 nInserts）。然后只需在消息框中显示该变量：

```
MsgBox("Records going in as updates:" & nUpdates & vbNewLine & vbNewLine & _
    "Records going in as inserts:" & nInserts) 
```

# go - 为什么在golang时间没有定位人员。平等？

> ID：12855264
> 
> 赞同：3
> 
> 时间：2012-10-12T08:40:16.743
> 
> 标签：go

在[http://golang.org/src/pkg/time/time.go](http://golang.org/src/pkg/time/time.go)

```
62  // Equal reports whether t and u represent the same time instant.
63  // Two times can be equal even if they are in different locations.
64  // For example, 6:00 +0200 CEST and 4:00 UTC are Equal.
65  // This comparison is different from using t == u, which also compares
66  // the locations.
67  func (t Time) Equal(u Time) bool {
68      return t.sec == u.sec && t.nsec == u.nsec
69  } 
```

为什么他们不关心 t.loc 和 u.loc？

更新：如果我有2台服务器（不同的位置），如何判断它们的时间是否完全相等？</p>

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-12T08:46:26.040

a`Time`存储**UTC**时间戳。这意味着它不依赖于位置。

时间`6:00 +0200 CEST`和`4:00 UTC`UTC 具有相同的值。它们是完全相同的时刻。

该位置仅用于此时间的本地化表示。

从[文档中](http://golang.org/src/pkg/time/time.go?s=1541:2055#L24)：

> 以这种方式更改位置只会更改演示文稿；它不会改变瞬间

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T08:47:39.823

*   `t.sec`给出自 UTC 第一年 1 月 1 日 00:00:00 以来经过的秒数。
*   `n.nsec`指定 Seconds 命名的秒内的非负纳秒偏移量。（范围 [0, 999999999]）

该[UTC时间](http://en.wikipedia.org/wiki/Coordinated_Universal_Time)不取决于位置。

# javascript - 替换窗口时，window.open() 的 window.opener 问题

> ID：12855266
> 
> 赞同：1
> 
> 时间：2012-10-12T08:40:32.743
> 
> 标签：javascript, window.opener

我有一个 Web 应用程序，其中第 1 页使用打开一个弹出窗口

```
window.open(myUrl, "fixedApplicationTargetId", ""); 
```

**然后页面 #2 使用相同的目标值**调用 window.open 覆盖相同的弹出窗口

```
window.open(anotherUrl, "fixedApplicationTargetId", ""); 
```

此时，最初由页面#1 创建的弹出窗口的内容显示了由页面#2 创建的新内容。到目前为止，任何浏览器都很好。

然后弹出窗口本身会检测谁最后打开了弹出窗口并使用 window.opener 更新了内容。在调用 window.open 第 1 页和第 2 页之前，创建一个全局变量 globalPageId 并分别分配一个唯一编号。弹出窗口检查 window.opener.globalPageId 的值并检测哪个窗口最后更新了弹出内容。

这就是事情分崩离析的地方：上述内容适用于每次使用 window.open 更新内容时更新弹出窗口中的 window.opener 的 chrome 和 firefox。相反，IE 和 Opera 总是将弹出窗口 window.opener 指向第一个使用 window.open 的窗口。

**任何建议，在多个页面在同一目标上调用 window.open 的情况下，如何从弹出窗口本身检测哪个窗口最后打开了窗口？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T10:06:15.557

[window.opener](https://developer.mozilla.org/en-US/docs/DOM/window.opener)应该是可读写的（Internet Explorer 3 除外），因此您可以自己将其设置为适当的窗口。但是，有些浏览器会限制此操作，只允许设置`opener`以`null`防止[出现安全问题](https://bugzilla.mozilla.org/show_bug.cgi?id=184618)。

另一种解决方案是使用自定义属性而不是`opener`. 您可以手动设置它：

```
window.open(myUrl, "fixedApplicationTargetId", "").realOpener = window; 
```

然后在其余代码中使用`window.realOpener.globalPageId`而不是。`window.opener.globalPageId`

# c# - 根据范围数据查找值

> ID：12855270
> 
> 赞同：1
> 
> 时间：2012-10-12T08:41:04.933
> 
> 标签：c#, .net

什么数据结构或数据类型有利于保存数据范围，并根据该范围内的数据返回一个值？

例如假设我有以下范围

```
1-10 -> 1  
11-35 -> 2.5  
36-49-> 3.8  
50-60 -> 1.2  
61-80 -> 0.9 
```

在这种情况下，给定数字`41`我希望`3.8`返回的数字（因为 41 介于 36 和 49 之间）。

是否有一种巧妙的方法可以在数据结构中表示此类数据以执行此查找？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T09:07:38.907

一个相对方便且性能非常好的实现是使用`SortedList<int, Tuple<int, double>>`. 使用每个段的下限作为键，使用上限 + 映射值的元组作为值：

```
var list = new SortedList<int, Tuple<int, double>>
{
    { 1, Tuple.Create(10, 1.0) },
    { 11, Tuple.Create(35, 2.5) },
}; 
```

（当然你可以决定使用更好看的数据结构来声明你的参数，以增强代码的可维护性并在开始工作之前在内部转换为这个）。

由于`list.Keys`保证已排序，因此在查找值时，您可以对其使用[二进制搜索](https://stackoverflow.com/a/2948872/50079)来查找等于或大于输入值的索引：

```
var index = list.Keys.BinarySearch(value);
if (index < 0 && ~index == 0) {
    // no match, stop processing
}
else if (index < 0) {
    // key not found as is, look at the previous interval
    index = ~index - 1;
} 
```

此时指向`index`可能包括的唯一范围`value`，所以剩下的就是测试：

```
if(x >= list.Keys[index] && x <= list.Values[index].Item1) {
    var result = list.Values[index].Item2;
}
else {
    // no match
} 
```

您不会称其为“干净”，但它非常短且非常快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T08:52:55.937

您可以使用此代码

钥匙 ：

```
public class Interval<T> where T : IComparable
{
    public Nullable<T> Start { get; set; }
    public Nullable<T> End { get; set; }

    public Interval(T start, T end)
    {
        Start = start;
        End = end;
    }

    public bool InRange(T value)
    {
        return ((!Start.HasValue || value.CompareTo(Start.Value) > 0) &&
                (!End.HasValue || End.Value.CompareTo(value) > 0));
    }
} 
```

值：十进制

你可以使用这个类型：`Dictionary<Interval, decimal>`

注意：您可以定义访问方法

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T08:48:23.693

我花了一段时间，但我有一个 QuickAndDirty 方法，它假定所有给定值都是有效的并且范围是相邻的，而不使用任何数据结构。还有一个非常具体的数据结构，只有在给定的索引正好在指定的范围内并且可以在运行时扩展时才会返回一些东西。

```
public abstract class TreeNode
{
    public static double QuickAndDirty(int index)
    {
        double result = 1.0;

        if (index > 10)
            result = 2.5;

        if (index > 35)
            result = 3.8;

        if (index > 49)
            result = 1.2;

        if (index > 60)
            result = 0.9;

        return result;
    }

    public abstract double GetValue(int index);

    public abstract TreeNode AddRange(int begin, int end, double value);

    public static TreeNode MakeTreePart(Tuple<int, int, double>[] ranges)
    {
        return TreeNode.MakeTreePart(ranges, 0, ranges.Length >> 1, ranges.Length - 1);
    }

    private static TreeNode MakeTreePart(Tuple<int, int, double>[] ranges, int min, int index, int max)
    {
        if (index == min || index == max)
            return new Leaf(ranges[index].Item1, ranges[index].Item2, ranges[index].Item3);

        return new SegmentTree(
            ranges[index].Item2 + .5,
            TreeNode.MakeTreePart(ranges, min, index >> 1, index - 1),
            TreeNode.MakeTreePart(ranges, index + 1, index << 1, max));
    }
}

public class SegmentTree : TreeNode
{
    private double pivot;
    private TreeNode left, right;

    public SegmentTree(double pivot, TreeNode left, TreeNode right)
    {
        this.pivot = pivot;
        this.left = left;
        this.right = right;
    }

    public override double GetValue(int index)
    {
        if (index < pivot)
            return left.GetValue(index);
        return right.GetValue(index);
    }

    public override TreeNode AddRange(int begin, int end, double value)
    {
        if (end < pivot)
            this.left = this.left.AddRange(begin, end, value);
        else
            this.right = this.right.AddRange(begin, end, value);
        // Do this to confirm to the interface.
        return this;
    }
}

public class Leaf : TreeNode
{
    private int begin, end;
    private double value;

    public Leaf(int begin, int end, double value)
    {
        this.begin = begin;
        this.end = end;
        this.value = value;
    }

    public override double GetValue(int index)
    {
        if (index >= begin && index <= end)
            return value;
        throw new Exception("index out of range");
    }

    public override TreeNode AddRange(int begin, int end, double value)
    {
        if (this.end < begin)
            return new SegmentTree(((double)this.end + begin) * .5, this, new Leaf(begin, end, value));
        else if (end < this.begin)
            return new SegmentTree(((double)end + this.begin) * .5, new Leaf(begin, end, value), this);
        else throw new Exception("Indexes overlap.");
    }
}
    static void Main()
    {
        TreeNode start = new Leaf(36, 49, 3.8);
        start = start.AddRange(11, 35, 2.5);
        start = start.AddRange(1, 10, 1.0);
        start = start.AddRange(50, 60, 1.2);
        start = start.AddRange(61, 80, 0.9);
        double[] values = new double[70];
        for (int i = 1; i < values.Length; i++)
            values[i] = start.GetValue(i);

        TreeNode array = TreeNode.MakeTreePart(
            new Tuple<int, int, double>[]
            {
                Tuple.Create(1, 10, 1.0),
                Tuple.Create(11, 35, 2.5),
                Tuple.Create(36, 49, 3.8),
                Tuple.Create(50, 60, 1.2),
                Tuple.Create(61, 80, 0.9)
            });

        for (int i = 1; i < values.Length; i++)
            values[i] = start.GetValue(i);
    } 
```

# c - va_list 的定义是什么？

> ID：12855271
> 
> 赞同：1
> 
> 时间：2012-10-12T08:41:06.833
> 
> 标签：c

![在此处输入图像描述](../Images/5c435bbc4581088a3da81488b3d53552.png)或者

```
typedef struct {
   unsigned int gp_offset;
   unsigned int fp_offset;
   void *overflow_arg_area;
   void *reg_save_area;
} va_list[1]; 
```

我在搜索时看到了他们两个。

顺便说一句，这是什么`va_list[1]`意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T08:43:48.367

如何定义 va_list 完全取决于您的编译器、操作系统和 ABI。在某些操作系统上，它可以由结构甚至是指向某物的简单指针来定义，而在其他操作系统上，它只是内部编译器的黑魔法，不能用 C 结构来表达。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-12T08:58:05.197

您可以在此找到所有这些

[http://research.microsoft.com/en-us/um/redmond/projects/invisible/include/stdarg.h.htm](http://research.microsoft.com/en-us/um/redmond/projects/invisible/include/stdarg.h.htm)

在那里，您可以注意到 va_list 的定义何时根据环境发生变化。

您还可以找到有关以下内容的一些信息。

[http://www.cplusplus.com/reference/clibrary/cstdarg/va_list/](http://www.cplusplus.com/reference/clibrary/cstdarg/va_list/)

# android - android字节数组正在缩短数字？

> ID：12855272
> 
> 赞同：1
> 
> 时间：2012-10-12T08:41:11.990
> 
> 标签：android, byte, nfc, mifare

在我的小型 NFC 相关项目中，我试图设置一个字节 [] 作为我正在使用的 Mifare Classic 1k 芯片的身份验证密钥。什么时候设置成这样：

```
private byte[] key = {(byte)0xff, (byte)0xff, (byte)0xff, (byte)0xff, (byte)0xff, (byte)0xff}; 
```

它最终是`-1 -1 -1 -1 -1 -1`......为什么Android会这样翻译它，以及，它应该如何真正编码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T09:00:22.763

这与 Android 或 NFC 无关，这就是 Java 的工作方式。`byte`是有符号的，这意味着其中一位用作符号。`0xff=11111111`，这恰好意味着 Java 的 -1。不过，您的 MIFARE 卡并不关心这一点，因此您的程序应该可以正常工作。

# r - 两行图格式

> ID：12855277
> 
> 赞同：1
> 
> 时间：2012-10-12T08:41:21.393
> 
> 标签：r, formatting, plot, rows

我有以下问题：我想在 R 中绘制一个图，其中两个数字相互上方。然而，上图应该占据大部分空间，而下图应该有一个非常低的高度（它只是用来指示“主要”图中的特殊位置）。目前我有这段代码，但我不知道如何设置每行应该占用的空间（第二个图应该在第一个图的正下方）：

```
dev.new()
png("multitest.png")
par( mfrow = c( 2, 1 ) ) 
plot( rnorm( n = 10 ), col = "blue", main = "plot 1", cex.lab = 1.1,ylab="yname", xlab='')
plot( rnorm( n = 10 ), col = "red", main = "", cex.lab = 1.1, xaxt='n',yaxt='n',xlab="xname", ylab="")
dev.off() 
```

我必须在我不知道是否有其他软件包可用于 R 的服务器上运行它。如果有使用其他软件包的建议，我会尝试它。在此先感谢您，到目前为止，我仅在 R 中使用图来绘制简单的直方图。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T09:17:03.127

正如@Roland 所指出的，`layout()`为此目的会比使用`par(mfrow...)`. 以下是一些基本示例，向您展示如何开始使用`layout`. 这些示例都不适合您：我只是给出示例，以便您了解如何进行实验。这里还有一个有用的功能`layout.show()`。

1.  两个地块，一个在另一个之上。第一个地块比另一个地块宽。

    首先，考虑一下您希望数字如何出现的矩阵。按顺序编号。`1`= 图 1，`2`= 图 2，`0`= 此空间中未绘制任何内容。

    ```
     [,1] [,2] [,3] [,4]
    [1,]    1    1    1    1
    [2,]    0    2    2    0 
    ```

    在 中使用此矩阵`layout()`：

    ```
    layout(matrix(c(1, 1, 1, 1, 0, 2, 2, 0), 2, 4, byrow=TRUE))
    plot(rnorm(n = 10), col = "blue", main = "plot 1", 
         cex.lab = 1.1, ylab="yname", xlab='')
    plot(rnorm(n = 10), col = "red", main = "", cex.lab = 1.1, 
         xaxt='n', yaxt='n', xlab="xname", ylab="") 
    ```

    ![在此处输入图像描述](../Images/d3b65d5b47243b26cb33dbb92b262c91.png)

2.  请注意，每个地块的高度仍然相同。您可以使用`heights`参数来控制这一点：

    ```
    layout(matrix(c(1, 1, 1, 1, 0, 2, 2, 0), 2, 4, byrow=TRUE), 
           heights = c(7, 3))
    plot(rnorm(n = 10), col = "blue", main = "plot 1", 
         cex.lab = 1.1, ylab="yname", xlab='')
    plot(rnorm(n = 10), col = "red", main = "", cex.lab = 1.1, 
         xaxt='n', yaxt='n', xlab="xname", ylab="") 
    ```

    ![在此处输入图像描述](../Images/8d0c26dfe3eee2e0254c3879fb818296.png)

3.  这是一个包含三个图的示例。

    ```
    layout(matrix(c(1, 1, 2, 3), 2, 2, byrow=TRUE))
    plot(rnorm(n = 10), col = "blue", main = "plot 1", 
         cex.lab = 1.1, ylab="yname", xlab='')
    plot(rnorm(n = 10), col = "red", main = "", cex.lab = 1.1, 
         xaxt='n', yaxt='n', xlab="xname", ylab="")
    plot(rnorm(n = 10), col = "green", main = "", cex.lab = 1.1, 
         xaxt='n', yaxt='n', xlab="zname", ylab="") 
    ```

    ![在此处输入图像描述](../Images/91655b0249c85d53efdb439de4acda51.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T09:15:00.213

使用布局：

```
nf <- layout( c( 1, 2 ), heights= c( 10, 2 ) )
plot( ... )
plot( .... ) 
```

第一个参数是一个模拟屏幕划分方式的矩阵（这里我们有一个向量作为参数，但你可以使用`matrix( c( 1, 2 ), nrow=2, ncol=1 )`.

# node.js - 按日期查询，不考虑时间部分

> ID：12855280
> 
> 赞同：2
> 
> 时间：2012-10-12T08:41:22.663
> 
> 标签：node.js, mongodb, date, mongoose

我想显示我的博客文章，按创建日期分页。我将在 2012 年 10 月 1 日写 5 篇文章的页面，在 2012 年 10 月 3 日写的 11 篇文章的页面，2012 年 10 月 2 日根本没有页面（没有写文章）

每个帖子文档都存储有一个创建日期，该日期是一个日期时间值，这是一个猫鼬片段：

```
var postSchema = new Schema({
    url: String,
    creationDate: {type: Date, default: Date.now},
    contenuto: String,
}); 
```

所以它会有类似 2012-10-01 18:45:03... 知道我的意思。

在我的代码中，我将创建一个

```
var searchDate = new Date(yy,mm,dd); 
```

**我如何使用它来查询帖子集合，而不考虑creationDate的“时间部分”？**

我不确定这是否总是有效：

```
Post.find({ creationDate:dataRicerca }) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T12:00:21.967

根据这篇文章；

[如何使用 MongoDB 中的时间数据将年/月/日日期解析为更具体的日期？](https://stackoverflow.com/questions/12831025/how-do-i-resolve-a-year-month-day-date-to-a-more-specific-date-with-time-data-in/12849923#12849923)

您可以在架构中单独存储数据（以及完整日期）以便于搜索。你也可以这样做；

```
Post.find({Posted:{$gt: Date("2012-10-01"), $lt:Date("2012-10-02")}}) 
```

（更新为使用 Date() 而不是 ISODate() 以获得更好的兼容性）

# mysql - 选择在第二个表上有 2 个条件的 JOIN 行

> ID：12855285
> 
> 赞同：3
> 
> 时间：2012-10-12T08:41:53.717
> 
> 标签：mysql, sql, join

我有 2 个表：`goods`和`cats_goods`（关系表）。

商品：`id`, `name`.

Cats_goods: `good_id`, `cat_id`.

如何只选择`goods`同时具有`cat_id`=4 和`cat_id`=24 的？

试过：

```
SELECT DISTINCT *
FROM `goods` AS `g`
JOIN `cats_goods` AS `cg` ON (`g`.`id` = `cg`.`good_id`)
WHERE (`cg`.`cat_id` = 24 AND `cg`.`cat_id` = 4) 
```

查询给出 0 个结果！

**UPD：** 对于每个`good`有 1 行`cats_goods`= `cat_id`4 和 1 行`cats_goods`= `cat_id`24。我只需要选择`goods`两个条件都匹配的那些。

**UPD2：**

`goods`表结构：

```
CREATE TABLE IF NOT EXISTS `goods` (
  `id` int(11) NOT NULL auto_increment,
  `code` varchar(50) NOT NULL default '',
  `title` varchar(255) NOT NULL default '',
  `price` decimal(10,2) NOT NULL default '0.00',
  `file` varchar(50) NOT NULL default '',
  `preview` varchar(50) NOT NULL default '',
  `order` int(11) NOT NULL default '0',
  `selltype_id` int(11) NOT NULL default '0',
  `xml_date` varchar(50) NOT NULL default '',
  `invalid` tinyint(1) NOT NULL default '0',
  PRIMARY KEY  (`id`),
  KEY `order` (`order`),
  KEY `selltype_id` (`selltype_id`),
  KEY `code` (`code`),
  KEY `invalid` (`invalid`),
  KEY `xml_date` (`xml_date`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=5014 ; 
```

`goods`表数据：

```
(4964, '00000001731', 'gold 585', 10000.00, '', '', 0, 2, '', 0),
(4965, '00000001733', 'gold 585', 10000.00, '', '', 0, 2, '', 0),
(4966, '00000001769', 'gold 585', 8000.00, '', '', 0, 2, '', 0),
(4967, '00000001767', 'gold 585', 8000.00, '', '', 0, 2, '', 0), 
```

`cats_goods`表结构：

```
CREATE TABLE IF NOT EXISTS `cats_goods` (
  `id` int(10) unsigned NOT NULL auto_increment,
  `good_id` int(10) unsigned NOT NULL default '0',
  `cat_id` int(10) unsigned NOT NULL default '0',
  PRIMARY KEY  (`id`),
  KEY `good_id` (`good_id`,`cat_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=37530 ; 
```

`cats_goods`表数据：

```
(37474, 4964, 24),
(37478, 4966, 24),
(37477, 4966, 4),
(37476, 4965, 24),
(37475, 4965, 4),
(37475, 4967, 4), 
```

只能`goods`选择 4965 和 4966。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T08:45:42.313

试试这个：

```
SELECT DISTINCT *
FROM `goods` AS `g`
JOIN `cats_goods` AS `cg` ON (`g`.`id` = `cg`.`good_id`) 
                          and (`cg`.`cat_id` = 24 OR `cg`.`cat_id` = 4) 
```

或者

```
SELECT DISTINCT *
FROM `goods` AS `g`
JOIN `cats_goods` AS `cg` ON (`g`.`id` = `cg`.`good_id`) 
where `g`.`id` in (24,4) 
```

或者

```
 SELECT DISTINCT *
    FROM `goods` AS `g`
    JOIN `cats_goods` AS `cg1` ON (`g`.`id` = `cg1`.`good_id`) 
                               and (`cg1`.`cat_id` = 24) 
    JOIN `cats_goods` AS `cg2` ON (`g`.`id` = `cg2`.`good_id`) 
                               and (`cg2`.`cat_id` = 4) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T08:52:00.387

尝试

```
SELECT DISTINCT *
FROM `goods` AS `g`
JOIN `cats_goods` AS `cg1` ON (`g`.`id` = `cg1`.`good_id`)
JOIN `cats_goods` AS `cg2` ON (`g`.`id` = `cg2`.`good_id`)
WHERE (`cg1`.`cat_id` = 24 AND `cg2`.`cat_id` = 4) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T08:43:34.653

这个查询比较有趣。一个字段如何同时具有**两个值**？

```
SELECT DISTINCT *
FROM `goods` AS `g`
JOIN `cats_goods` AS `cg` ON (`g`.`id` = `cg`.`good_id`)
WHERE (`cg`.`cat_id` = 24 AND `cg`.`cat_id` = 4) 
```

`OR`把它`WHERE`改成条件，伙计。

```
SELECT DISTINCT *
FROM `goods` AS `g`
JOIN `cats_goods` AS `cg` ON (`g`.`id` = `cg`.`good_id`)
WHERE (`cg`.`cat_id` = 24 OR `cg`.`cat_id` = 4) 
```

如果我问的是可能的，你能显示表格转储吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T08:48:49.633

```
SELECT a.good_id, a.cat_id from cats_goods a inner join goods b on a.good_id=b.id where a.cat_id in (4,24); 
```

# zenity - 很棒的 wm：杀死窗口时弹出是/否对话框

> ID：12855288
> 
> 赞同：4
> 
> 时间：2012-10-12T08:42:13.943
> 
> 标签：zenity, awesome-wm

当我按下[很棒的 wm](http://en.wikipedia.org/wiki/Awesome_(window_manager))`mod-q`时，我会杀死当前窗口。我想弹出一个是/否对话框来确认操作：

```
if zenity --question --title='Quit?' --text='Quit?'; then kill_the_window; fi 
```

但是，killing 函数是从 中的 Lua 代码运行的`rc.lua`，而不是从 shell 运行的。

```
awful.key({ modkey, }, "q", function (c) c:kill() end) 
```

如何在杀死窗口之前让真棒等待[zenity](http://en.wikipedia.org/wiki/Zenity)输出，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T18:58:49.357

Awesome 是用 lua 编写的，所以你只需要知道如何捕获 lua 运行的程序的退出状态。看到[这个问题](https://stackoverflow.com/questions/7607384/getting-return-status-and-program-output)。

# ruby-on-rails-3 - 避免生成scaffoldings.css.scss

> ID：12855290
> 
> 赞同：0
> 
> 时间：2012-10-12T08:42:23.900
> 
> 标签：ruby-on-rails-3

有没有办法自定义 Rails 3 生成器以便在运行时不创建脚手架.css.scss

```
rails g scaffolding MyScaffold 
```

?

我仍然想要 myScaffold.css.scss 所以将下面的代码添加到 application.rb 并不能解决我的问题。`

```
config.generators do |g|      
  g.stylesheets false
end` 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T09:05:14.563

您可以使用 --no-stylesheets 标志：

```
rails g scaffold MyModel --no-stylesheets 
```

# vb.net - 在 VB (Visual Studio 2010) 中传递了错误的参数

> ID：12855293
> 
> 赞同：0
> 
> 时间：2012-10-12T08:42:35.987
> 
> 标签：vb.net, visual-studio-2010, parameter-passing

我尝试做一个简单的函数调用，参数为字符串，但其中一个参数没有传递。我只是不明白。

调用该函数`GrafikUpdates`，第二个参数是非空字符串：

```
GrafikUpdates("Optimal", oBHKWop.Modell, "Add") 
```

![调用函数](../Images/69d685e2a649e3c75dcdc66e2ee5e9ea.png)

然后执行该函数，但第二个参数为空。

```
Public Sub GrafikUpdates(ByVal Modulgröße As String, ByVal Modultyp As String, _
                         ByVal AddOrRemove As String) 
```

![进入函数](../Images/77faa767f46abd6103147ff05e1d2c29.png)

出了什么问题？

# javascript - 如何模拟 $(window).load()？

> ID：12855297
> 
> 赞同：3
> 
> 时间：2012-10-12T08:42:55.843
> 
> 标签：javascript, ajax, jquery

我有一个 ajax 查询，它返回包含很多`$(window).load()`函数的 html 代码。我需要再次调用所有这些函数。

我想通过`$(window).load()`再次调用该方法来做到这一点。如何从我的代码中手动触发它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-12T08:46:11.200

你可以触发

```
$(window).trigger( 'load' ); 
```

我个人建议不要使用这种解决方案。这是一种不好的做法。您应该找到另一种解决方案，因为窗口加载事件可能与您不知道的其他几个不同的回调相关联。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T08:56:53.290

我认为这是解决你的问题。test.js 是您的 java 脚本文件的名称。

```
$.getScript("ajax/test.js", function(data, textStatus, jqxhr) {
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T08:46:19.253

您可以引入简单的消息总线来实现这一目标。最初您可以依赖窗口的加载事件，稍后您可以创建一个通知模块来通知所有感兴趣的模块（代码）发生了一些事情。

# html - 这个CSS的正确方法是什么

> ID：12855298
> 
> 赞同：2
> 
> 时间：2012-10-12T08:42:57.087
> 
> 标签：html, css

我有一个页面，其中主要元素是文档，在这种情况下是隐私政策。

隐私政策标题是一个`<h1>`，其余标题如下`<h2>`等。

在文档的一侧，但不在 H1 的流程中，我有一个小子菜单，它也有一个标题。问题是标题标签应该是什么？

![在此处输入图像描述](../Images/9d8974f946bcffc89685bf878354f0a5.png)

虽然我使用了一些 html5 元素，但我没有使用 SECTION 等，因为旧浏览器依赖于 javascript。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T08:55:39.203

我会根据同样是 h3 的 WordPress 小部件标题说**h3**

例如

```
<h3 class="widget-title srp-widget-title">
    POPULAR ARTICLES
</h3> 
```

我会远离小部件（侧边栏）中的 h1 和 h2。如果是 h3 或 h4 没关系……恕我直言。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T09:01:20.207

使用 H1 标签，与普遍的看法相反，您不会因多个 H1 标签而受到惩罚；但是它可能会对您网站的 SEO 产生一些影响。

如需确认，您可以浏览以下文章：

[可以在同一页面上使用多个 h1 标签，但样式不同吗？](https://stackoverflow.com/questions/503925/is-it-alright-to-use-multiple-h1-tags-on-the-same-page-but-style-them-different)

[http://www.seomoz.org/q/multiple-h1-tags-on-same-page](http://www.seomoz.org/q/multiple-h1-tags-on-same-page)

最重要的是，下面的链接提供了一个有趣的阅读：

[http://productforums.google.com/forum/#!topic/webmasters/kYX4Upa8_es](http://productforums.google.com/forum/#!topic/webmasters/kYX4Upa8_es)

来自上面特别感兴趣的链接的片段：

> 当 google 为页面“分配”权重时，其中一个因素是在您的 H 标签中找到的文本。
> 
> 因此，如果您有一个 H1 标签，并且其中的文本不多，谷歌会将其视为具有很多含义的“非常强的文本”。如果整段文本有一个 H1 标签，由于 H1 标签内包含的单词总数，谷歌会将其视为“弱文本”。
> 
> 页面上 H1 标签的数量也会影响这一点，如果你有两个 H1 标签，这个“非常强的文本”的权重将减半，如果你有三个，它会是（嗯，我不确定它是否是第三个原始重量，或减少三倍（即原始重量除以二，然后再除以二））等等。因此，拥有许多 H1 标签是一个坏主意，因为您将在 H1 中拥有更多组合文本，并且它还会除以页面上 H1 标签的数量。
> 
> 至于 HTML5 中发生了什么，抱歉，但我不确定谷歌如何看待这种嵌套语法，我只是想扩展和澄清 Cristina 所说的内容。

尽管如果您对 SEO 真的很偏执，只需将 H3 放在那里，我相信这并不重要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T09:03:03.273

因为每个标题标签表示每个部分的相对重要性，所以最好从最高级别的标题开始，然后向下工作。我会把它放在h3中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T08:52:52.650

它被认为是一个标题，所以它应该是`<h3>`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-13T12:29:27.387

如果此网页是网站的一部分（而不是独立文档），您可能不想使用`h1`主要内容标题。

即使您不使用分段元素 ( `section`, `article`, `aside`, `nav`)，您的标题仍然会创建一个[大纲](http://www.w3.org/TR/html5/headings-and-sections.html#headings-and-sections)。此大纲应代表您的页面结构，类似于 ToC。

所以让我们考虑一个简单的网站：a）网站标题，b）主要内容，c）网站导航

如果您使用`h1`主要内容的标题，则站点范围的标题和站点范围的导航将在此主要内容的范围内：

1.  隐私政策
    1.  我的酷网站
    2.  导航

但这是不正确的。“隐私政策”是“我的酷网站”的一部分，而不是相反。并且“导航”不是“隐私政策”的子部分。所以你的大纲应该是这样的：

1.  我的酷网站
    1.  隐私政策
    2.  导航

所以解决方案是：`h1`用于您的站点范围的标题（通常是您的公司/项目/个人/等的名称）。您页面的所有范围都由该标题“支配”。这就是将您的页面与站点结合起来的原因。

注意：如果您要使用分段元素，则可以`h1`对每个分段内容使用。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-12T09:15:44.333

如果`<h3>`主要内容中没有，则`<h3>`在侧边栏中使用 a。如果您想将其视为新内容，请`<h1>`再次使用。

这实际上取决于您看到的上下文或您的用户体验。

# android - android调用php但响应不可读

> ID：12855301
> 
> 赞同：0
> 
> 时间：2012-10-12T08:43:05.063
> 
> 标签：android, httpresponse, bufferedreader

我正在尝试从 php 脚本中查询如下：

```
http://xxxx.com/ccvo/mel-asset-data/query.php?lon=144.963620993985&lat=-37.8140023779914&within=20&category=Litter Bin 
```

网页查询的结果将以纯文本形式显示，如下所示：

```
4|Litter Bin,-37.8141472000103,144.963691391683,17.2492037024|Litter Bin,
37.8141472763581,144.963685395193,17.0753971521|Litter Bin,
37.8139653160326,144.963765797949,13.3704129156|Litter Bin,
37.8139469233985,144.963755935562,13.3613106302 
```

我需要将值传递给四个参数。到目前为止，我的代码出现错误 200，这意味着它可以访问网络。此外，查询的格式很好，什么时候做 Log.d 我得到以下信息：

```
query[lon=144.963620993985, lat=-37.8140023779914, within=4, keyword=Litter Bin] 
```

然后我需要将结果解析如下：结果数，（经度和纬度），范围内，关键字

我的可能是：

```
 public class myMapService extends AsyncTask<String, Void, Integer> {
        private ProgressDialog progressDialog;
        private keyword activity;
        private int id = -1;
        private String rst = " " ; 

        public myMapService(keyword activity, ProgressDialog progressDialog)
        {
            this.activity = activity;
            this.progressDialog = progressDialog;
        }

        @Override
        protected void onPreExecute()
        {
            progressDialog.show();
        }

        @Override
        protected Integer doInBackground(String... arg0) {
            String result = "";
            int responseCode = 0;
            try 
            {
                HttpClient client = new DefaultHttpClient();
                HttpPost httppost = new HttpPost("http://xxxx.com/ccvo/mel-asset-data/query.php");

                List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
                nameValuePairs.add(new BasicNameValuePair("lon", "144.963620993985"));
                nameValuePairs.add(new BasicNameValuePair("lat", "-37.8140023779914"));
                nameValuePairs.add(new BasicNameValuePair("within", "20"));
                nameValuePairs.add(new BasicNameValuePair("keyword", "Litter Bin"));
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs,HTTP.UTF_8));

            Log.v("URL", " with query" + nameValuePairs);

            int executeCount = 0;
            HttpResponse response;
            do
            {
                progressDialog.setMessage("Passing paratmeters.. ("+(executeCount+1)+"/5)");
                // Execute HTTP Post Request
                executeCount++;
                response = client.execute(httppost);
                responseCode = response.getStatusLine().getStatusCode();                        
                // If you want to see the response code, you can Log it
                // out here by calling:
                // Log.d("256 Design", "statusCode: " + responseCode)
                //InputStream content = response.getEntity().getContent();

               // Log.d("256 Design", " Response print" + response);

            } while (executeCount < 5 && responseCode == 408);

            BufferedReader rd = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
            StringBuilder sb = new StringBuilder();

            //Log.d("Results", " Inside whileloops " + rd);

            String line;
            while ((line = rd.readLine()) != null)
            {
                result = line.trim();
                sb.append(line);

                rst = result.toString();

            }

            Log.v("Results", "rst " + sb);
            id = Integer.parseInt(result);

        }

        catch (Exception e) {
            responseCode = 408;
            e.printStackTrace();
        }

        Log.d("Results", "from web: " + rst);

        return responseCode;

    }

@Override
protected void onPostExecute(Integer headerCode)
{
    progressDialog.dismiss();

}
} 
```

* * *

当我对响应或 BufferedReader 执行 Log.d 时，我得到如下信息：

```
-java.io.BufferedReader@40fc93c8
-printorg.apache.http.message.BasicHttpResponse@40f746b8 
```

我需要帮助以获取结果并解析它们。

谢谢你，A。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-26T11:13:02.653

```
 nameValuePairs.add(new BasicNameValuePair("weight", myWeight));
             nameValuePairs.add(new BasicNameValuePair("height", myHeight));
             httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
             HttpResponse response = httpclient.execute(httppost);       
             String Result = inputStreamToString(response.getEntity().getContent()).toString();
     private StringBuilder inputStreamToString(InputStream is) {
            String rLine = "";
            StringBuilder answer = new StringBuilder();
            BufferedReader rd = new BufferedReader(new InputStreamReader(is));

            try {
             while ((rLine = rd.readLine()) != null) {
              answer.append(rLine);
               }
            } 

            catch (IOException e) {
                e.printStackTrace();
             }
            return answer;
           }
use it ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T18:13:36.433

我发现我正在使用 POST 方法而不是 GET ；/

我以任何方式解决了这个问题。这是我的代码：

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;

import android.app.ProgressDialog;
import android.os.AsyncTask;
import android.util.Log;

public class myMapService extends AsyncTask<String, Void, Integer> {
    private ProgressDialog progressDialog;
    private keyword activity;
    private int id = -1;
    private String rst = " " ; 

    protected String getASCIIContentFromEntity(HttpEntity entity) throws IllegalStateException, IOException {
        InputStream in = entity.getContent();
        StringBuffer out = new StringBuffer();
        int n = 1;
        while (n>0) {
        byte[] b = new byte[4096];
        n =  in.read(b);
        if (n>0) out.append(new String(b, 0, n));
        }
        return out.toString();
        }

    public myMapService(keyword activity, ProgressDialog progressDialog)
    {
        this.activity = activity;
        this.progressDialog = progressDialog;
    }

    @Override
    protected void onPreExecute()
    {
        progressDialog.show();
    }

    @Override
    protected Integer doInBackground(String... arg0) {

        String result = "";
        int responseCode = 0;

        int executeCount = 0;
        HttpResponse response;

        StringBuilder sb = new StringBuilder();
        String line;
        try 
        {
            HttpClient client = new DefaultHttpClient();
            HttpGet httppost = new HttpGet("http://XXXXXX/ccvo/mel-asset-data/query.php?lon="+ arg0[0].toString() + "&lat="+ arg0[1].toString() +"&within=" + arg0[2].toString()  + "&category="+ arg0[3].toString().replace(" ", "%20"));

                do
                {
                    progressDialog.setMessage("Passing paratmeters.. ("+(executeCount+1)+"/5)");
                    // Execute HTTP Post Request
                    executeCount++;
                    response = client.execute(httppost);
                    responseCode = response.getStatusLine().getStatusCode();                        

                } while (executeCount < 5 && responseCode == 408);

                BufferedReader rd = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
                while ((line = rd.readLine()) != null)
                {
                    result = line.trim();
                    sb.append(line);
                    rst = result.toString();

                }
        }catch (Exception e2) {
            responseCode = 408;
            e2.printStackTrace();
            }

            Log.d("Results", "from web: " + rst);

        return responseCode;
    }

@Override
protected void onPostExecute(Integer headerCode)
{
    progressDialog.dismiss();

}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T08:53:20.063

改进的答案

```
public void postData() {
// Create a new HttpClient and Post Header
HttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost("http://xxxx.com/ccvo/mel-asset-data/query.php");

try {
    // Add your data
    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
    nameValuePairs.add(new BasicNameValuePair("lon", "144.963620993985"));
    nameValuePairs.add(new BasicNameValuePair("lon", "144.963620993985"));

    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

    // Execute HTTP Post Request
    HttpResponse response = httpclient.execute(httppost);

} catch (ClientProtocolException e) {
    // TODO Auto-generated catch block
} catch (IOException e) {
    // TODO Auto-generated catch block
}
} 

BufferedReader br = new BufferedReader(new InputStreamReader(response.getEntity().getContent()),
                8 * 1024);
        StringBuilder sb = new StringBuilder();
        String line;
        try {
            while ((line = br.readLine()) != null) {
                sb.append(line);
            }
        } catch (IOException e) {
            e.printStackTrace();
        }

                    Log.d("response", "Response data:\n" + sb + "\n"); 
```

这会将响应添加到 StringBuilder 并且您可以打印，这应该包含您要显示的信息。因为 BufferReader 是一个对象，这就是它记录对象 ID 的原因。

# php - Codeigniter & PHP 检查会话是否存在

> ID：12855302
> 
> 赞同：10
> 
> 时间：2012-10-12T08:43:07.803
> 
> 标签：php, codeigniter, session, cookies, controls

如何在 PHP 中简单地检查是否启用了 cookie 和用户会话？

我需要这个世界上真正更轻的代码来做到这一点，有人可以告诉我一些东西吗？

我在 Codeigniter 上，但我打算使用本机 PHP 进行此控件。

我的代码：

```
if(session_start()){ echo 'started'; } 
```

据我所知，Codeigniter 不使用本机 PHP 会话，该怎么做？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-12T08:45:32.020

检查有效的会话 ID：

```
$sid = session_id(); 
```

例如：

```
$sid = session_id();
if($sid) {
    echo "Session exists!";
} else {
    session_start();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T08:45:53.970

当你的框架有一些功能而不是使用它时，第一点是**“不要对抗框架” 。**通常在框架类中是防止注入的函数。

这是一个帖子，告诉您如何检查 cookie：

[检查是否启用了 cookie](https://stackoverflow.com/questions/6663859/check-if-cookies-are-enabled)

对于会议

[如何判断会话是否处于活动状态？](https://stackoverflow.com/questions/3788369/how-to-tell-if-a-session-is-active)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-12T08:48:14.680

我认为您可以通过执行以下操作来简单地检查：

```
if(isset($_SESSION)){
  // tells php session is initiated
}
if(isset($_COOKIE)){

} 
```

# c#-4.0 - c# 中的 try 块中是否可能出现多个异常？

> ID：12855303
> 
> 赞同：-1
> 
> 时间：2012-10-12T08:43:08.113
> 
> 标签：c#-4.0

是否可以在 c# 的 try 块中添加多个异常？

如果可能，请提供示例代码

谢谢，桑图

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T08:57:21.913

您可以为单个 try 块提供多个 catch 块，如下所示：-

```
 try
   {
        //your code
   }
   catch(ExceptionClass e)
   {
       //code to handle exception
   }
   catch(ExceptionClass2 e)
   {
       //code to handle exception
   }
   catch(ExceptionClass3 e)
   {
       //code to handle exception
   } 
```

但是您始终必须注意异常类的层次结构。例如，ExceptionClass 不应该是 ExceptionClass2 和 ExceptionClass3 的超类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T08:45:17.187

是的

```
try
{
 stuff()
}
catch (Exception1 e1)
{

}
catch (Exception2 e2)
{

}
finally
{

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T09:14:23.780

请记住在不同的 catch 块中使用从特定到更多泛型的异常

```
try {} 
catch(FileNotFoundException fex) {}
catch(IOExceoption iex) {}
catch(Exception ex) {}
finally {} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T08:45:05.847

你的意思是这样吗？

```
try
{
// Your code
}
catch(an exception)
{
}
catch(a different exception)
{
}
catch(any exception you want)
{
} 
```

# html - 在图像显示之前调用 uiwebview webViewDidFinishLoad

> ID：12855304
> 
> 赞同：2
> 
> 时间：2012-10-12T08:43:13.240
> 
> 标签：html, image, uiwebview

我在本地 html 文件中有一些本地图像，我正在使用`[webView loadHTMLString:htmlContent baseURL:baseURL];`. 该页面出现，一秒钟后图像出现在其上，这是不可取的。为了解决这个问题，我在`webViewDidFinishLoad`. 加载文本后 UIActivityIndi​​cator 消失，但图像仍然需要一点时间。这些图像是 4 KB png，我的 HTML 字符串中有一些 CSS 和一个表格。

# excel - Excel宏逐字读取文本文件并将每个单词写入同一列中的新单元格

> ID：12855307
> 
> 赞同：-1
> 
> 时间：2012-10-12T08:43:27.113
> 
> 标签：excel, vba, text

`,` `我有一个巨大的 txt 文件，其电子邮件 ID 由（空格）、或`;`、或这些的组合分隔。`

 `我想将这些电子邮件 ID 分开并将它们写入 Excel 文件中一行接一行的一列中的新单元格中。

Excel 的分隔导入无法显示所有 id，因为只有 256 列。而我遇到的单词数有数千个。并且最适合逐行插入到同一列的新单元格中。

输入文本文件如下所示：

```
abc@abc.com; xyx@xyc.com, ext@124.de, abcd@cycd.com 
```

需要输出到excel文件：

```
abc@abc.com
xyx@xyc.com
ext@124.de 
abcd@cycd.com 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T09:19:54.860

参考：[http ://www.experts-exchange.com/Software/Office_Productivity/Office_Suites/MS_Office/A_1480-How-to-Split-a-String-with-Multiple-Delimiters-in-VBA.html](http://www.experts-exchange.com/Software/Office_Productivity/Office_Suites/MS_Office/A_1480-How-to-Split-a-String-with-Multiple-Delimiters-in-VBA.html)

您的问题包含几个部分

1.将txt文件读成字符串（Excel有字符串限制）我试过收到错误消息“Out of String Space”，所以我希望你的“Huge”文件不是> 1G之类的

2.用多重分隔符分割它们

3.每行输出邮件

```
Sub Testing()
    Dim fname As String
    Dim sVal As String
    Dim count As Long
    Dim ws As Worksheet
    Set ws = Worksheets("Sheet2") 'Replace Sheet1 with the output sheet name you want
    fname = "H:\My Documents\a.txt"   'Replace the path with your txt file path
    sVal = OpenTextFileToString2(fname)
    Dim tmp As Variant
    tmp = SplitMultiDelims(sVal, ",; ", True)   ' Place the 2nd argument with the list of delimiter you need to use
    count = 0
    For i = LBound(tmp, 1) To UBound(tmp, 1)

         count = count + 1
         ws.Cells(count, 1) = tmp(i)  'output on the first column

    Next i
End Sub    

Function OpenTextFileToString2(ByVal strFile As String) As String
' RB Smissaert - Author
Dim hFile As Long
hFile = FreeFile
Open strFile For Input As #hFile
OpenTextFileToString2 = Input$(LOF(hFile), hFile)
Close #hFile
End Function

''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
' SplitMultiDelims by alainbryden
' This function splits Text into an array of substrings, each substring
' delimited by any character in DelimChars. Only a single character
' may be a delimiter between two substrings, but DelimChars may
' contain any number of delimiter characters. It returns a single element
' array containing all of text if DelimChars is empty, or a 1 or greater
' element array if the Text is successfully split into substrings.
' If IgnoreConsecutiveDelimiters is true, empty array elements will not occur.
' If Limit greater than 0, the function will only split Text into 'Limit'
' array elements or less. The last element will contain the rest of Text.
''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
Function SplitMultiDelims(ByRef Text As String, ByRef DelimChars As String, _
        Optional ByVal IgnoreConsecutiveDelimiters As Boolean = False, _
        Optional ByVal Limit As Long = -1) As String()
    Dim ElemStart As Long, N As Long, M As Long, Elements As Long
    Dim lDelims As Long, lText As Long
    Dim Arr() As String

    lText = Len(Text)
    lDelims = Len(DelimChars)
    If lDelims = 0 Or lText = 0 Or Limit = 1 Then
        ReDim Arr(0 To 0)
        Arr(0) = Text
        SplitMultiDelims = Arr
        Exit Function
    End If
    ReDim Arr(0 To IIf(Limit = -1, lText - 1, Limit))

    Elements = 0: ElemStart = 1
    For N = 1 To lText
        If InStr(DelimChars, Mid(Text, N, 1)) Then
            Arr(Elements) = Mid(Text, ElemStart, N - ElemStart)
            If IgnoreConsecutiveDelimiters Then
                If Len(Arr(Elements)) > 0 Then Elements = Elements + 1
            Else
                Elements = Elements + 1
            End If
            ElemStart = N + 1
            If Elements + 1 = Limit Then Exit For
        End If
    Next N
    'Get the last token terminated by the end of the string into the array
    If ElemStart <= lText Then Arr(Elements) = Mid(Text, ElemStart)
    'Since the end of string counts as the terminating delimiter, if the last character
    'was also a delimiter, we treat the two as consecutive, and so ignore the last elemnent
    If IgnoreConsecutiveDelimiters Then If Len(Arr(Elements)) = 0 Then Elements = Elements - 1

    ReDim Preserve Arr(0 To Elements) 'Chop off unused array elements
    SplitMultiDelims = Arr
End Function 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T10:14:58.970

另一种方式：

```
Sub importText()

Const theFile As String = "Your File Path"
Dim rng

Open theFile For Input As #1
    rng = Application.Transpose(Filter(Split(Replace(Replace(Input(LOF(1), 1), " ", ""), ",", ";"), ";"), "@"))
Close

Sheets(1).Cells(1, 1).Resize(UBound(rng)).Value = rng

End Sub 
```

**编辑** 根据建议，我已经更新了上面的内容以处理连续的混合分隔符 (,;) 所以上面将允许类似：

```
abc@abc.com; xyx@xyc.com, ext@124.de, abcd@cycd.com;,;,; abc@abc.com;; xyx@xyc.com,,; ext@124.de, abcd@cycd.com 
````

# svn - 为什么某些分支的 Tortoise SVN 的 repo-browser 中没有显示修订版本和其他属性

> ID：12855308
> 
> 赞同：3
> 
> 时间：2012-10-12T08:43:29.333
> 
> 标签：svn, tortoisesvn

在 Tortoise SVN 的存储库浏览器中，我看到一些分支显示为灰色，并且没有显示子文件夹和文件的修订或作者等信息。其他分支都很好。

我真的很想知道这是什么意思。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T12:04:06.163

只需单击那些灰色的文件夹。它们只是灰色的，因为尚未获取这些附加信息。如果一个父文件夹中有太多文件夹，repo 浏览器不会获取附加信息，因为它会花费太长时间。因此它只获取基本信息，但将这些项目显示为灰色，以表明您可以强制获取附加信息。

# liferay - 从文档和媒体 portlet 自定义查看文件

> ID：12855322
> 
> 赞同：1
> 
> 时间：2012-10-12T08:44:33.857
> 
> 标签：liferay, liferay-6

我有一个要求，在下拉列表中显示年份 (2008,2009,2010,2011,2012) 作为其值。

在选择特定值`pdf`时，将显示该特定年份的所有年度报告（即该年度的所有文件）。

我发现`Documents & Media`存储此类文件很有用。我`Document Type`为年度报告创建了以下元数据：

1.  **NAME：**上传文件的文本字段名称
2.  **文件上传：**文件上传
3.  **YEAR：** Integer - 今年与下拉值相关联

我正在尝试在查看器上添加一种过滤方式（在下拉列表中显示所有年份）。

当您选择年份时，将显示存储的文件文档。请帮助如何继续。

我们有`Documents & Media Display`，但它显示了所有文件
或者是否`Web-content Display`有用？
或者，如果如何`Documents & Media Display`修改以生成显示 pdf 链接的所有值的下拉列表？

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T13:00:29.500

因此，简而言之，这是您的要求：

1.  显示具有特定值的下拉列表
2.  在选择任何值时，应出现一个列表，其中显示文件列表。

所以根据以上几点我的建议如下：

1.  创建您自己的自定义 portlet 以显示下拉菜单。不要去定制liferay 的portlet，因为稍后您可能需要更多的要求来完善逻辑或更改UI，并且您可能还需要Liferay 的文档库portlet 照原样工作。但是，如果您希望在同一个 portlet 中提供上传文件和下拉菜单，那么您只有一个选项可以使用 Documents and Media 显示 portlet。
2.  [使用Liferay Document & Media API](http://docs.liferay.com/portal/6.1/javadocs/com/liferay/portlet/documentlibrary/service/DLAppServiceUtil.html "Liferay 的文档库 API，你也可以使用 DLAppLocalServiceUtil")和[Dynamic Query API](http://www.liferay.com/web/minhchau.dang/blog/-/blogs/3813353 "使用动态查询 API")编写您的自定义逻辑以显示文件列表。

挑战在于根据`Meta-types`.`Document Type``Document Type`

如果您需要更多内容或不了解任何内容，请发表评论。

# c++ - gcc - 如何查找头包含文件的路径

> ID：12855323
> 
> 赞同：6
> 
> 时间：2012-10-12T08:44:41.190
> 
> 标签：c++, linux, gcc, g++, gcc-warning

我们在 gcc 中是否有任何选项可以找到包含特定文件头的位置。我有以下情况：

file_1.h : 声明 type_1 的类型

文件_2.h：

type_1 变量；

我想检查我正在创建的库中包含的 file_1.h 的位置。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-12T08:53:30.667

gcc 有一个选项 -M：

> -M 不输出预处理的结果，而是输出一个适合make描述主源文件依赖关系的规则。预处理器输出一个 make 规则，其中包含该源文件的目标文件名、冒号和所有包含文件的名称，包括来自 -include 或 -imacros 命令行选项的文件。

如果你这样做，`gcc -M filename.c`它会列出所有标题。与 g++ 相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T11:32:49.370

如果您查看预处理后的输出，它将按照包含的顺序显示包含的标题，因此您可以看到 file_1.h 出现的位置并向后工作以查看包含它的文件，以及包含该文件的文件等。

该`-E`选项告诉 GCC 只执行预处理步骤并在编译前停止。

# package - Visual Studio Web 部署发布包的行为

> ID：12855324
> 
> 赞同：0
> 
> 时间：2012-10-12T08:44:47.567
> 
> 标签：package, visual-studio-2012, publishing, msdeploy, webdeploy

我最近一直在做一些工作，在 Visual Studio 2012 上发布 mvc 应用程序。我一直在使用发布配置文件将 Web 部署配置到不同的环境。我也一直在使用网络转换来根据我的每个发布配置文件转换我的 web.config。

在一个包中，是否有一个设置来确保安装它的服务器从以前的安装中擦除以前安装的内容？

除了上述之外，是否可以打包应用程序并且在部署之前不让它执行转换？因此，该软件包独立于目标服务器（dev、qa）并且可以安装在任一服务器上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T06:03:37.563

您可以使用带有一些自定义 MSDeploy 魔法[的发布配置文件来部署现有包。](https://stackoverflow.com/questions/11683243/deploying-an-existing-package-using-publish-profiles)但是，我没有尝试保留 web.config 转换并完全使用 MSDeploy 参数。值得一试，但我没有用它们测试我的自定义脚本，所以可能有一些我已经忘记的目标。

我仍然使用 web.config 转换，但仅在创建包时删除非调试元素（使用`Release`转换）

# java - 使用 SQLite 捆绑安装 java 桌面应用程序（或任何数据库，例如）

> ID：12855330
> 
> 赞同：1
> 
> 时间：2012-10-12T08:45:15.080
> 
> 标签：java, swing, installation

> **可能重复：**
> [Java 安装程序 - 需要帮助](https://stackoverflow.com/questions/12796658/java-installer-help-needed)

您好，感谢您花时间回答我的问题。

我打算使用 Launch4J 或 SmoothJ 作为我在 Swing 中开发的桌面应用程序的安装程序。但是，与应用程序一起，我需要在客户端本地安装数据库。我的问题是，如何将应用程序的安装与客户端的 DB 安装捆绑在一起？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T09:12:21.220

使用 SQLite，无需安装数据库*。*数据存储在一个文件中，您的应用程序调用访问该文件的 SQLite API。

来自[http://www.sqlite.org/zeroconf.html](http://www.sqlite.org/zeroconf.html)：

> SQLite 在使用前不需要“安装”。没有“设置”程序。没有需要启动、停止或配置的服务器进程。管理员无需创建新的数据库实例或为用户分配访问权限。SQLite 不使用配置文件。不需要做任何事情来告诉系统 SQLite 正在运行。系统崩溃或电源故障后无需执行任何操作即可恢复。没有什么可以解决的。
> 
> SQLite 可以正常工作。

# python - 我如何将参数传递给 pika 回调

> ID：12855332
> 
> 赞同：2
> 
> 时间：2012-10-12T08:45:16.727
> 
> 标签：python, rabbitmq, pika

我使用 pika 与 RabbitMQ 服务器交互如下： 1\. P1 向 RabbitMQ 发送消息 2\. C1 是一个 pyqt4 桌面托盘应用程序，一旦收到就会显示上述消息。代码如下：

```
import sip
sip.setapi('QVariant', 2)

from PyQt4 import QtCore, QtGui

import systray_rc

class Window(QtGui.QDialog):
    def __init__(self):
        super(Window, self).__init__()

        self.createIconGroupBox()
        self.createMessageGroupBox()

        self.iconLabel.setMinimumWidth(self.durationLabel.sizeHint().width())

        self.createActions()
        self.createTrayIcon()

        self.showMessageButton.clicked.connect(self.showMessage)
        self.showIconCheckBox.toggled.connect(self.trayIcon.setVisible)
        self.iconComboBox.currentIndexChanged.connect(self.setIcon)
        self.trayIcon.messageClicked.connect(self.messageClicked)
        self.trayIcon.activated.connect(self.iconActivated)

        mainLayout = QtGui.QVBoxLayout()
        mainLayout.addWidget(self.iconGroupBox)
        mainLayout.addWidget(self.messageGroupBox)
        self.setLayout(mainLayout)

        self.iconComboBox.setCurrentIndex(1)
        self.trayIcon.show()

        self.setWindowTitle("Systray")
        self.resize(400, 300)       

    def setVisible(self, visible):
        self.minimizeAction.setEnabled(visible)
        self.maximizeAction.setEnabled(not self.isMaximized())
        self.restoreAction.setEnabled(self.isMaximized() or not visible)
        super(Window, self).setVisible(visible)

    def closeEvent(self, event):
        if self.trayIcon.isVisible():
            QtGui.QMessageBox.information(self, "Systray",
                    "The program will keep running in the system tray. To "
                    "terminate the program, choose <b>Quit</b> in the "
                    "context menu of the system tray entry.")
            self.hide()
            event.ignore()

    def setIcon(self, index):
        icon = self.iconComboBox.itemIcon(index)
        self.trayIcon.setIcon(icon)
        self.setWindowIcon(icon)

        self.trayIcon.setToolTip(self.iconComboBox.itemText(index))

    def iconActivated(self, reason):
        if reason in (QtGui.QSystemTrayIcon.Trigger, QtGui.QSystemTrayIcon.DoubleClick):
            self.iconComboBox.setCurrentIndex(
                    (self.iconComboBox.currentIndex() + 1)
                    % self.iconComboBox.count())
        elif reason == QtGui.QSystemTrayIcon.MiddleClick:
            self.showMessage()

    def showMessage(self):
        icon = QtGui.QSystemTrayIcon.MessageIcon(
                self.typeComboBox.itemData(self.typeComboBox.currentIndex()))
#        self.trayIcon.showMessage(self.titleEdit.text(),
#                self.bodyEdit.toPlainText(), icon,
#                self.durationSpinBox.value() * 1000)
        self.trayIcon.showMessage('stock alarm',
                'test', icon,
                self.durationSpinBox.value() * 1000)

    def messageClicked(self):
        QtGui.QMessageBox.information(None, "Systray",
                "Sorry, I already gave what help I could.\nMaybe you should "
                "try asking a human?")

    def createIconGroupBox(self):
        self.iconGroupBox = QtGui.QGroupBox("Tray Icon")

        self.iconLabel = QtGui.QLabel("Icon:")

        self.iconComboBox = QtGui.QComboBox()
        self.iconComboBox.addItem(QtGui.QIcon(':/images/bad.svg'), "Bad")
        self.iconComboBox.addItem(QtGui.QIcon(':/images/heart.svg'), "Heart")
        self.iconComboBox.addItem(QtGui.QIcon(':/images/trash.svg'), "Trash")

        self.showIconCheckBox = QtGui.QCheckBox("Show icon")
        self.showIconCheckBox.setChecked(True)

        iconLayout = QtGui.QHBoxLayout()
        iconLayout.addWidget(self.iconLabel)
        iconLayout.addWidget(self.iconComboBox)
        iconLayout.addStretch()
        iconLayout.addWidget(self.showIconCheckBox)
        self.iconGroupBox.setLayout(iconLayout)

    def createMessageGroupBox(self):
        self.messageGroupBox = QtGui.QGroupBox("Balloon Message")

        typeLabel = QtGui.QLabel("Type:")

        self.typeComboBox = QtGui.QComboBox()
        self.typeComboBox.addItem("None", QtGui.QSystemTrayIcon.NoIcon)
        self.typeComboBox.addItem(self.style().standardIcon(
                QtGui.QStyle.SP_MessageBoxInformation), "Information",
                QtGui.QSystemTrayIcon.Information)
        self.typeComboBox.addItem(self.style().standardIcon(
                QtGui.QStyle.SP_MessageBoxWarning), "Warning",
                QtGui.QSystemTrayIcon.Warning)
        self.typeComboBox.addItem(self.style().standardIcon(
                QtGui.QStyle.SP_MessageBoxCritical), "Critical",
                QtGui.QSystemTrayIcon.Critical)
        self.typeComboBox.setCurrentIndex(1)

        self.durationLabel = QtGui.QLabel("Duration:")

        self.durationSpinBox = QtGui.QSpinBox()
        self.durationSpinBox.setRange(5, 60)
        self.durationSpinBox.setSuffix(" s")
        self.durationSpinBox.setValue(15)

        durationWarningLabel = QtGui.QLabel("(some systems might ignore this "
                "hint)")
        durationWarningLabel.setIndent(10)

        titleLabel = QtGui.QLabel("Title:")

        self.titleEdit = QtGui.QLineEdit("Cannot connect to network")

        bodyLabel = QtGui.QLabel("Body:")

        self.bodyEdit = QtGui.QTextEdit()
        self.bodyEdit.setPlainText("Don't believe me. Honestly, I don't have "
                "a clue.\nClick this balloon for details.")

        self.showMessageButton = QtGui.QPushButton("Show Message")
        self.showMessageButton.setDefault(True)

        messageLayout = QtGui.QGridLayout()
        messageLayout.addWidget(typeLabel, 0, 0)
        messageLayout.addWidget(self.typeComboBox, 0, 1, 1, 2)
        messageLayout.addWidget(self.durationLabel, 1, 0)
        messageLayout.addWidget(self.durationSpinBox, 1, 1)
        messageLayout.addWidget(durationWarningLabel, 1, 2, 1, 3)
        messageLayout.addWidget(titleLabel, 2, 0)
        messageLayout.addWidget(self.titleEdit, 2, 1, 1, 4)
        messageLayout.addWidget(bodyLabel, 3, 0)
        messageLayout.addWidget(self.bodyEdit, 3, 1, 2, 4)
        messageLayout.addWidget(self.showMessageButton, 5, 4)
        messageLayout.setColumnStretch(3, 1)
        messageLayout.setRowStretch(4, 1)
        self.messageGroupBox.setLayout(messageLayout)

    def createActions(self):
        self.minimizeAction = QtGui.QAction("Mi&nimize", self,
                triggered=self.hide)

        self.maximizeAction = QtGui.QAction("Ma&ximize", self,
                triggered=self.showMaximized)

        self.restoreAction = QtGui.QAction("&Restore", self,
                triggered=self.showNormal)

        self.quitAction = QtGui.QAction("&Quit", self,
                triggered=QtGui.qApp.quit)

    def createTrayIcon(self):
         self.trayIconMenu = QtGui.QMenu(self)
         self.trayIconMenu.addAction(self.minimizeAction)
         self.trayIconMenu.addAction(self.maximizeAction)
         self.trayIconMenu.addAction(self.restoreAction)
         self.trayIconMenu.addSeparator()
         self.trayIconMenu.addAction(self.quitAction)

         self.trayIcon = QtGui.QSystemTrayIcon(self)
         self.trayIcon.setContextMenu(self.trayIconMenu)

def callback(ch, method, properties, body):
        print " [x] %r:%r" % (method.routing_key, body,)
        #window.showMessage = body
        #window.showMessage()
        #self.showMessage()

def subsribeRabbit():
    import pika
    import sys
    from util import settings

    connection = pika.BlockingConnection(pika.ConnectionParameters(
            host=settings.RABBIT_SERVER))
    channel = connection.channel()

    channel.exchange_declare(exchange=settings.STOCK_ALARMS_TOPIC,
                             type='topic')

    result = channel.queue_declare(exclusive=True)
    queue_name = result.method.queue

    binding_keys = '#'

    for binding_key in binding_keys:
        channel.queue_bind(exchange=settings.STOCK_ALARMS_TOPIC,
                           queue=queue_name,
                           routing_key=binding_key)

    print ' [*] Waiting for logs. To exit press CTRL+C'

    channel.basic_consume(callback,
                          queue=queue_name,
                          no_ack=True)

    channel.start_consuming()

if __name__ == '__main__':

    import sys
    from cron.realtimemonitorschedule import startMonitor    

    app = QtGui.QApplication(sys.argv)

    if not QtGui.QSystemTrayIcon.isSystemTrayAvailable():
        QtGui.QMessageBox.critical(None, "Systray",
                "I couldn't detect any system tray on this system.")
        sys.exit(1)

    QtGui.QApplication.setQuitOnLastWindowClosed(False)

    window = Window()
    window.show()   
    from threading import Thread
    thread = Thread(target = subsribeRabbit)
    thread.start()
    #thread.join()

    sys.exit(app.exec_()) 
```

问题是我如何在 callback() 函数中调用 window.showMessage？提前谢谢，我是 Python 和 RabbitMQ 的新手。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2020-01-07T18:20:42.773

*注意：此答案使用 python3，因此语法可能与三年前的答案略有不同。*

更好的答案是将回调包装在 lambda 中。然后你可以传递任何你想要的东西，只要它在你调用时可以访问`basic_consume`。

首先更改您的回调以仅获取您感兴趣的内容。（您也可以将其重构为一个类并传入`self`。）

```
def on_message(window, method, body):
    print(" [x] %r:%r" % (method.routing_key, body), end="") 
```

然后消费...

```
channel.basic_consume(on_message_callback=lambda ch, method, properties, body: on_message(window, method, body),
                      queue=queue_name,
                      no_ack=True) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-08T01:31:24.733

声明一个类实例，然后将类方法作为 pika consumer_callback 传递：

```
callback = classObject(additional_paramters)

channel.basic_consume(callback.method,
                      queue=queue_name,
                      no_ack=True) 
```

也许？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T08:40:16.680

诀窍是为全局变量定义窗口，如下所示：

```
import sip
sip.setapi('QVariant', 2)

from PyQt4 import QtCore, QtGui

import systray_rc

window = Window()
window.show()  

class Window(QtGui.QDialog):
    def __init__(self):
        super(Window, self).__init__()

        self.createIconGroupBox()
        self.createMessageGroupBox()

        self.iconLabel.setMinimumWidth(self.durationLabel.sizeHint().width())

        self.createActions()
        self.createTrayIcon()

        self.showMessageButton.clicked.connect(self.showMessage)
        self.showIconCheckBox.toggled.connect(self.trayIcon.setVisible)
        self.iconComboBox.currentIndexChanged.connect(self.setIcon)
        self.trayIcon.messageClicked.connect(self.messageClicked)
        self.trayIcon.activated.connect(self.iconActivated)

        mainLayout = QtGui.QVBoxLayout()
        mainLayout.addWidget(self.iconGroupBox)
        mainLayout.addWidget(self.messageGroupBox)
        self.setLayout(mainLayout)

        self.iconComboBox.setCurrentIndex(1)
        self.trayIcon.show()

        self.setWindowTitle("Systray")
        self.resize(400, 300)       

    def setVisible(self, visible):
        self.minimizeAction.setEnabled(visible)
        self.maximizeAction.setEnabled(not self.isMaximized())
        self.restoreAction.setEnabled(self.isMaximized() or not visible)
        super(Window, self).setVisible(visible)

    def closeEvent(self, event):
        if self.trayIcon.isVisible():
            QtGui.QMessageBox.information(self, "Systray",
                    "The program will keep running in the system tray. To "
                    "terminate the program, choose <b>Quit</b> in the "
                    "context menu of the system tray entry.")
            self.hide()
            event.ignore()

    def setIcon(self, index):
        icon = self.iconComboBox.itemIcon(index)
        self.trayIcon.setIcon(icon)
        self.setWindowIcon(icon)

        self.trayIcon.setToolTip(self.iconComboBox.itemText(index))

    def iconActivated(self, reason):
        if reason in (QtGui.QSystemTrayIcon.Trigger, QtGui.QSystemTrayIcon.DoubleClick):
            self.iconComboBox.setCurrentIndex(
                    (self.iconComboBox.currentIndex() + 1)
                    % self.iconComboBox.count())
        elif reason == QtGui.QSystemTrayIcon.MiddleClick:
            self.showMessage()

    def showMessage(self,text='test'):
        icon = QtGui.QSystemTrayIcon.MessageIcon(
                self.typeComboBox.itemData(self.typeComboBox.currentIndex()))
#        self.trayIcon.showMessage(self.titleEdit.text(),
#                self.bodyEdit.toPlainText(), icon,
#                self.durationSpinBox.value() * 1000)
        self.trayIcon.showMessage('stock alarm',
                'test', icon,
                self.durationSpinBox.value() * 1000)

    def messageClicked(self):
        QtGui.QMessageBox.information(None, "Systray",
                "Sorry, I already gave what help I could.\nMaybe you should "
                "try asking a human?")

    def createIconGroupBox(self):
        self.iconGroupBox = QtGui.QGroupBox("Tray Icon")

        self.iconLabel = QtGui.QLabel("Icon:")

        self.iconComboBox = QtGui.QComboBox()
        self.iconComboBox.addItem(QtGui.QIcon(':/images/bad.svg'), "Bad")
        self.iconComboBox.addItem(QtGui.QIcon(':/images/heart.svg'), "Heart")
        self.iconComboBox.addItem(QtGui.QIcon(':/images/trash.svg'), "Trash")

        self.showIconCheckBox = QtGui.QCheckBox("Show icon")
        self.showIconCheckBox.setChecked(True)

        iconLayout = QtGui.QHBoxLayout()
        iconLayout.addWidget(self.iconLabel)
        iconLayout.addWidget(self.iconComboBox)
        iconLayout.addStretch()
        iconLayout.addWidget(self.showIconCheckBox)
        self.iconGroupBox.setLayout(iconLayout)

    def createMessageGroupBox(self):
        self.messageGroupBox = QtGui.QGroupBox("Balloon Message")

        typeLabel = QtGui.QLabel("Type:")

        self.typeComboBox = QtGui.QComboBox()
        self.typeComboBox.addItem("None", QtGui.QSystemTrayIcon.NoIcon)
        self.typeComboBox.addItem(self.style().standardIcon(
                QtGui.QStyle.SP_MessageBoxInformation), "Information",
                QtGui.QSystemTrayIcon.Information)
        self.typeComboBox.addItem(self.style().standardIcon(
                QtGui.QStyle.SP_MessageBoxWarning), "Warning",
                QtGui.QSystemTrayIcon.Warning)
        self.typeComboBox.addItem(self.style().standardIcon(
                QtGui.QStyle.SP_MessageBoxCritical), "Critical",
                QtGui.QSystemTrayIcon.Critical)
        self.typeComboBox.setCurrentIndex(1)

        self.durationLabel = QtGui.QLabel("Duration:")

        self.durationSpinBox = QtGui.QSpinBox()
        self.durationSpinBox.setRange(5, 60)
        self.durationSpinBox.setSuffix(" s")
        self.durationSpinBox.setValue(15)

        durationWarningLabel = QtGui.QLabel("(some systems might ignore this "
                "hint)")
        durationWarningLabel.setIndent(10)

        titleLabel = QtGui.QLabel("Title:")

        self.titleEdit = QtGui.QLineEdit("Cannot connect to network")

        bodyLabel = QtGui.QLabel("Body:")

        self.bodyEdit = QtGui.QTextEdit()
        self.bodyEdit.setPlainText("Don't believe me. Honestly, I don't have "
                "a clue.\nClick this balloon for details.")

        self.showMessageButton = QtGui.QPushButton("Show Message")
        self.showMessageButton.setDefault(True)

        messageLayout = QtGui.QGridLayout()
        messageLayout.addWidget(typeLabel, 0, 0)
        messageLayout.addWidget(self.typeComboBox, 0, 1, 1, 2)
        messageLayout.addWidget(self.durationLabel, 1, 0)
        messageLayout.addWidget(self.durationSpinBox, 1, 1)
        messageLayout.addWidget(durationWarningLabel, 1, 2, 1, 3)
        messageLayout.addWidget(titleLabel, 2, 0)
        messageLayout.addWidget(self.titleEdit, 2, 1, 1, 4)
        messageLayout.addWidget(bodyLabel, 3, 0)
        messageLayout.addWidget(self.bodyEdit, 3, 1, 2, 4)
        messageLayout.addWidget(self.showMessageButton, 5, 4)
        messageLayout.setColumnStretch(3, 1)
        messageLayout.setRowStretch(4, 1)
        self.messageGroupBox.setLayout(messageLayout)

    def createActions(self):
        self.minimizeAction = QtGui.QAction("Mi&nimize", self,
                triggered=self.hide)

        self.maximizeAction = QtGui.QAction("Ma&ximize", self,
                triggered=self.showMaximized)

        self.restoreAction = QtGui.QAction("&Restore", self,
                triggered=self.showNormal)

        self.quitAction = QtGui.QAction("&Quit", self,
                triggered=QtGui.qApp.quit)

    def createTrayIcon(self):
         self.trayIconMenu = QtGui.QMenu(self)
         self.trayIconMenu.addAction(self.minimizeAction)
         self.trayIconMenu.addAction(self.maximizeAction)
         self.trayIconMenu.addAction(self.restoreAction)
         self.trayIconMenu.addSeparator()
         self.trayIconMenu.addAction(self.quitAction)

         self.trayIcon = QtGui.QSystemTrayIcon(self)
         self.trayIcon.setContextMenu(self.trayIconMenu)

def callback(ch, method, properties, body):
        print " [x] %r:%r" % (method.routing_key, body,)
        window.showMessage(body)

def subsribeRabbit():
    import pika
    import sys
    from util import settings

    connection = pika.BlockingConnection(pika.ConnectionParameters(
            host=settings.RABBIT_SERVER))
    channel = connection.channel()

    channel.exchange_declare(exchange=settings.STOCK_ALARMS_TOPIC,
                             type='topic')

    result = channel.queue_declare(exclusive=True)
    queue_name = result.method.queue

    binding_keys = '#'

    for binding_key in binding_keys:
        channel.queue_bind(exchange=settings.STOCK_ALARMS_TOPIC,
                           queue=queue_name,
                           routing_key=binding_key)

    print ' [*] Waiting for logs. To exit press CTRL+C'

    channel.basic_consume(callback,
                          queue=queue_name,
                          no_ack=True)

    channel.start_consuming()

if __name__ == '__main__':

    import sys
    from cron.realtimemonitorschedule import startMonitor    

    app = QtGui.QApplication(sys.argv)

    if not QtGui.QSystemTrayIcon.isSystemTrayAvailable():
        QtGui.QMessageBox.critical(None, "Systray",
                "I couldn't detect any system tray on this system.")
        sys.exit(1)

    QtGui.QApplication.setQuitOnLastWindowClosed(False)

    from threading import Thread
    thread = Thread(target = subsribeRabbit)
    thread.start()
    #thread.join()

    sys.exit(app.exec_()) 
```

# php - 在 PHP 表单上选择日期范围并显示来自 MySQL 数据库的结果

> ID：12855334
> 
> 赞同：0
> 
> 时间：2012-10-12T08:45:28.800
> 
> 标签：php

这可能很简单，但我不明白为什么这不起作用..

我有一个 php 表单，您可以在其中从下拉列表中选择日期范围。我给出了字段名称日、月年和日1、月1、年1。

单击提交时，它会将您带到第二个 php 表单。这是第二种形式的代码：

```
<?php

$username="***";
$password="***";
$database="****";

mysql_connect('localhost',$username,$password);
@mysql_select_db($database) or die( "Unable to select database");

$day = $_GET['day'];
$month = $_GET['month'];
$year = $_GET['year'];
$day1 = $_GET['day1'];
$month1 = $_GET['month1'];
$year1 = $_GET['year1'];

$date1 = "$year-$month-$day";
$date2 = "$year1-$month1-$day1";

$query = "SELECT * FROM main_stock WHERE curr_timestamp BETWEEN '$date1' AND '$date2'";

$result=mysql_query($query);

$num=mysql_num_rows($result); 

?>

<table border="1" cellspacing="2" cellpadding="2">
<tr>
<td><b><font face="Arial, Helvetica, sans-serif">Product Description</font></b></td>
<td><b><font face="Arial, Helvetica, sans-serif">Category</font></b></td>
<td><b><font face="Arial, Helvetica, sans-serif">Master Category</font></b></td>
<td><b><font face="Arial, Helvetica, sans-serif">Barcode</font></b></td>
<td><b><font face="Arial, Helvetica, sans-serif">Status</font></b></td>
<td><b><font face="Arial, Helvetica, sans-serif">TimeStamp</font></b></td>
<td><b><font face="Arial, Helvetica, sans-serif">New Own</font></b></td>
<td><b><font face="Arial, Helvetica, sans-serif">Serial No.</font></b></td>
</tr>

<?php
$i=0;
while ($i < $num) {

$f1=mysql_result($result,$i,"product_desc");
$f2=mysql_result($result,$i,"category");
$f3=mysql_result($result,$i,"mastercategory");
$f4=mysql_result($result,$i,"barcode");
$f5=mysql_result($result,$i,"status");
$f6=mysql_result($result,$i,"curr_timestamp");
$f7=mysql_result($result,$i,"newown");
$f8=mysql_result($result,$i,"serial");
?>

<tr>
<td><font face="Arial, Helvetica, sans-serif"><?php echo $f1; ?></font></td>
<td><font face="Arial, Helvetica, sans-serif"><?php echo $f2; ?></font></td>
<td><font face="Arial, Helvetica, sans-serif"><?php echo $f3; ?></font></td>
<td><font face="Arial, Helvetica, sans-serif"><?php echo $f4; ?></font></td>
<td><font face="Arial, Helvetica, sans-serif"><?php echo $f5; ?></font></td>
<td><font face="Arial, Helvetica, sans-serif"><?php echo $f6; ?></font></td>
<td><font face="Arial, Helvetica, sans-serif"><?php echo $f7; ?></font></td>
<td><font face="Arial, Helvetica, sans-serif"><?php echo $f8; ?></font></td>
</tr>

<?php

$i++;
}
$num_rows = mysql_num_rows($result);

echo "$num_rows Rows\n";
mysql_close();
?> 
```

有什么理由这行不通吗？

我不确定我哪里出错了。当有另一个选项以及诸如“状态”之类的日期时，它会显示结果，但是当它被取出时，我只想显示日期范围之间的所有结果，它不起作用..

这有效：

```
<?php

$username="+++";
$password="+++";
$database="+++";

mysql_connect('localhost',$username,$password);
@mysql_select_db($database) or die( "Unable to select database");

$day = $_GET['day'];
$month = $_GET['month'];
$year = $_GET['year'];
$day1 = $_GET['day1'];
$month1 = $_GET['month1'];
$year1 = $_GET['year1'];
$status = $_GET['status'];

$date1 = "$year-$month-$day";
$date2 = "$year1-$month1-$day1";

$query = "SELECT * FROM main_stock WHERE status = '$status' AND curr_timestamp BETWEEN      '$date1' AND '$date2'";

$result=mysql_query($query);

$num=mysql_num_rows($result); 

?>

<table border="1" cellspacing="2" cellpadding="2">
<tr>
<td><b><font face="Arial, Helvetica, sans-serif">Product Description</font></b></td>
<td><b><font face="Arial, Helvetica, sans-serif">Category</font></b></td>
<td><b><font face="Arial, Helvetica, sans-serif">Master Category</font></b></td>
<td><b><font face="Arial, Helvetica, sans-serif">Barcode</font></b></td>
<td><b><font face="Arial, Helvetica, sans-serif">Status</font></b></td>
<td><b><font face="Arial, Helvetica, sans-serif">TimeStamp</font></b></td>
<td><b><font face="Arial, Helvetica, sans-serif">New Own</font></b></td>
<td><b><font face="Arial, Helvetica, sans-serif">Serial No.</font></b></td>
</tr>

<?php
$i=0;
while ($i < $num) {

$f1=mysql_result($result,$i,"product_desc");
$f2=mysql_result($result,$i,"category");
$f3=mysql_result($result,$i,"mastercategory");
$f4=mysql_result($result,$i,"barcode");
$f5=mysql_result($result,$i,"status");
$f6=mysql_result($result,$i,"curr_timestamp");
$f7=mysql_result($result,$i,"newown");
$f8=mysql_result($result,$i,"serial");
?>

<tr>
<td><font face="Arial, Helvetica, sans-serif"><?php echo $f1; ?></font></td>
<td><font face="Arial, Helvetica, sans-serif"><?php echo $f2; ?></font></td>
<td><font face="Arial, Helvetica, sans-serif"><?php echo $f3; ?></font></td>
<td><font face="Arial, Helvetica, sans-serif"><?php echo $f4; ?></font></td>
<td><font face="Arial, Helvetica, sans-serif"><?php echo $f5; ?></font></td>
<td><font face="Arial, Helvetica, sans-serif"><?php echo $f6; ?></font></td>
<td><font face="Arial, Helvetica, sans-serif"><?php echo $f7; ?></font></td>
<td><font face="Arial, Helvetica, sans-serif"><?php echo $f8; ?></font></td>
</tr>

<?php

$i++;
}
$num_rows = mysql_num_rows($result);

echo "$num_rows Rows\n";
mysql_close();
?> 
```

但是，当“状态”字段被取出（显然是第一种形式的串行下拉列表）时，它停止工作......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T08:47:45.277

1）请使用 PDO 或至少`mysql_real_escape_string()`在`$date`and上`$date1`。

2) 确保您的表格是通过 发送的`GET`。如果是，`POST`您应该使用`$_POST['...']`而不是`$_GET`.

3) 确保您的日期格式正确。您可以使用 sprintf 执行此操作。

```
$date = sprintf('%04d-%02d-%02d', $year, $month, $day);
$date1 = sprintf('%04d-%02d-%02d', $year1, $month1, $day1); 
```

4) 确保`curr_timestamp`是有效的日期/时间字段类型。

# .net - 存储 PBKDF2 加密密码时使用什么数据类型？

> ID：12855336
> 
> 赞同：1
> 
> 时间：2012-10-12T08:45:34.643
> 
> 标签：.net, database, cryptography

我正在使用 SimpleCrypto.Net 来加密我的密码，我知道它使用 PBKDF2 和指定的盐和迭代次数。我想知道在数据库中将密码列设置为最合适的数据类型是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T09:23:49.453

通过查看代码，结果是一个 64 字节的 base64 编码密钥。考虑到 base64 是由 ASCII 字符组成的，我建议将其存储为`CHAR(88)`安全的`VARCHAR(MAX)`. 但是，由于密钥大小固定为 64 字节，因此结果的长度永远不会改变（即使您的盐/迭代已更改）。

# php - PHP 在 46 秒后停止

> ID：12855339
> 
> 赞同：1
> 
> 时间：2012-10-12T08:45:49.767
> 
> 标签：php, apache, ffmpeg, timeout, uploadify

我看到很多主题都有类似的问题，但没有类似的情况，因为 php 设置似乎不是问题。

当前的 php.ini 设置是：

```
max_execution_time = 600
max_input_time = 600
memory_limit = 512M
post_max_size = 192M
upload_max_filesize = 192M 
```

这些设置不能被本地 .htaccess 覆盖

**脚本** 该脚本是 PHP 并执行以下操作：

用户上传电影文件（使用uploadify）。上传完成后，脚本会使用 ffmpeg 将其转换为质量较低的 480p flv 文件。

**问题** 这个脚本一直有效，自从从 php 5.3.9 升级到 5.3.17 后它就停止工作了。上传部分工作正常。我已经尝试过使用 1Mb 到 190mb 的文件。上传后，转换开始，脚本总是在 46 秒处停止。我不知道为什么，但它总是 46 秒。

**服务器** 服务器是至强四核 16Gb 内存，平均负载为 0.62（8 = 100% cpu 使用率）

我真的不知道问题似乎是什么。脚本运行良好，没有改变。所以它一定与新的 PHP 或 Apache 有关，但我不知道。

有人对可能出现的问题提出建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T08:49:14.497

检查 Apache 的 TimeOut 设置，或将其添加到 VirtualHost 部分：

```
TimeOut 2400 
```

您还可以通过制作一个休眠 47 秒的脚本来检查它是否真的是超时或其他问题（如内存）：

```
<?php

sleep(47);
echo "Hi I'm still alive!"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T09:27:38.607

**解决方案**

感谢 Nin，我在我的 apache error_log 中找到了一些东西并且能够修复它：

登录 WHM > Apache 配置 > 包含编辑器 > 发布 VirtualHost 包含 > 全部

并添加

```
<IfModule mod_fcgid.c>
 FcgidProcessLifeTime 8200
 FcgidIOTimeout 8200
 FcgidConnectTimeout 400
 FcgidMaxRequestLen 1000000000 
</IfModule> 
```

好像是fcgi的问题。

# php - 计算今天和 4/3/NextYear 之间的小时差

> ID：12855340
> 
> 赞同：0
> 
> 时间：2012-10-12T08:45:50.080
> 
> 标签：php, datetime, mktime

我想计算今天和明年 4 月 4 日之间的差异（现在是 2013 年 4 月 4 日），但我不知道如何使用实际年份 + 1 创建 DateTime 对象。这就是我所拥有的：

`$now = new DateTime();
$ref = mktime(0, 0, 0, 4, 3, date("Y")+1);
echo $diff = $ref->diff($now)->days;`

我认为问题在于 mktime 没有返回 DateTime 对象？最好的方法是什么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T08:50:25.177

```
$today = date("Y-m-d");
$destination = date("Y-m-d" , mktime(0, 0, 0, 4, 3, date("Y")+1));

$todayObj = new DateTime($today);
$destObj = new DateTime($destination);

echo $diff = $todayObj->diff($destObj)->days; 
```

还没有测试它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T08:51:48.493

使用 strtotime 如下

```
$nextyear = date('Y')+1;
$time1=$nextyear.'-'.date('m').'-'.date('d');

$time2=date('Y-m-d');

echo $hourdiff = round((strtotime($time1) - strtotime($time2))/3600, 1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T08:52:39.043

尝试这个：

```
print_r(date_diff(date_create(), date_create('2013-04-03 00:00:00'))); 
```

输出：

```
DateInterval Object
(
    [y] => 0
    [m] => 5
    [d] => 22
    [h] => 9
    [i] => 8
    [s] => 25
    [invert] => 0
    [days] => 173
) 
```

# python - python关键字参数中列表的可变性（？）

> ID：12855352
> 
> 赞同：1
> 
> 时间：2012-10-12T08:46:38.147
> 
> 标签：python, mutable, keyword-argument

> **可能的重复：**
> [Python 中的“Least Astonishment”：可变默认参数](https://stackoverflow.com/questions/1132941/least-astonishment-in-python-the-mutable-default-argument)

我不确定这叫什么，因此很难找到正在发生的事情的文档。我希望这里的某个人能够指出我正确的方向。

在下面的示例中，我有一个列表作为关键字参数的默认值，它的行为方式是我没想到的：

```
class A(object):
    def __init___(self, c=[0,0]):
        self.c = c

class B(A):
    def __init__(self):
        super(B, self).__init__()

a = A()
b = B()

print a.c, b.c  # outputs [0, 0] [0, 0]

a.c[1] = 5

print a.c, b.c  # outputs [0, 5] [0, 5] 
```

我知道列表是可变的，但我假设在使用列表作为默认关键字参数的情况下，每次都会创建一个“新”列表。是否有文档解释为什么不是这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T08:48:16.093

Python 一次创建一个您指定为默认值的列表，然后通过引用分配它。所以：

```
>>> a1, a2 = A(), A()
>>> a1.c is a2.c
True
>>> a1.c.append(42)
>>> a2.c
[42] 
```

使用这个：

```
class A(object):
    def __init___(self, c=None):
        self.c = c if c is not None else [0, 0] 
```

有关更多信息，请阅读[此](http://effbot.org/zone/default-values.htm)内容，也可以查看[此热门问题](https://stackoverflow.com/questions/1132941/least-astonishment-in-python-the-mutable-default-argument)。

# c# - 使用 httphandler/httpmodule 动态重写 asp.net url

> ID：12855356
> 
> 赞同：0
> 
> 时间：2012-10-12T08:47:08.273
> 
> 标签：c#, asp.net, url-rewriting, httphandler, httpmodule

我有一个 asp.net 应用程序，我需要执行以下操作：

假设我有一个名为 page1.aspx 的页面，我需要的是：

当用户请求将 page1.aspx?id=1 重定向到`http://myapp/books`

当用户请求将 page1.aspx?id=2 重定向到`http://myapp/movies`

书籍和电影是虚拟路径，我不想使用 web.config（重写部分）来执行此操作，因为这应该是动态的。

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T08:59:36.947

构建一个`HttpModule`并在`context_BeginRequest`其中获取当前 URL。稍后有条件地重定向到新的 URL。

```
public class RedirectionModule : IHttpModule
{
    void context_BeginRequest(object sender, EventArgs e)
    {

      // get current url
      // conditionally redirect it
    }
} 
```

[编辑] SEO URL 重写 ASP.NET 请参考[SEO URL rewriting ASP.NET](https://stackoverflow.com/questions/7599689/seo-url-rewriting-asp-net)页面

# .htaccess - .htaccess 重定向 - 更新的站点（301 合适？）

> ID：12855357
> 
> 赞同：0
> 
> 时间：2012-10-12T08:47:14.627
> 
> 标签：.htaccess, redirect, seo

我在更新我的网站时遇到了问题，谷歌搜索结果显示了指向旧页面的链接，这些链接现在是 404，其中一些甚至包含已弃用的内容。

我的问题是关于 301 的使用。旧页面具有深度嵌套的页面，如下例所示：

```
 www.site.com/category/subjects/subject_b.html 
```

它在 google 中显示了对“subject_b”的非常具体的描述，这对于我的目的来说并不是最佳的。

我一直在处理的新布局意味着曾经在“/category/subjects/subject_b”下的内容现在可以在单个页面（www.site.com/subjects.html）中找到，以及假设的subject_a和subject_c .

像这样重定向旧页面会出错吗？

```
 redirect http://www.site.com/category/subjects/subject_a.html http://www.site.com/subjects.html
    redirect http://www.site.com/category/subjects/subject_b.html http://www.site.com/subjects.html
    redirect http://www.site.com/category/subjects/subject_c.html http://www.site.com/subjects.html 
```

另外，我将如何处理包含谷歌描述的页面，其中的内容不在新的等价页面上？

如果有人能为我阐明这一点，我会很高兴，或者指出我可以在哪里阅读更多关于它的正确方向！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T08:51:57.567

> 像这样重定向旧页面会出错吗？

你会删除这`http://www.site.com`部分。这应该足够了：

```
Redirect 301 /category/subjects/subject_a.html /subjects.html
Redirect 301 /category/subjects/subject_b.html /subjects.html
Redirect 301 /category/subjects/subject_c.html /subjects.html 
```

甚至：

```
RedirectMatch 301 ^/category/subjects/subject(.*) /subjects.html 
```

覆盖所有 3。

如果您有多个域都指向同一个文档根目录，并且您实际上需要匹配特定域的路径，则可以使用 mod_rewrite：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(www\.)?site.com$ [NC]
RewriteRule ^/?category/subjects/subject(.*) /subjects.html [L,R=301] 
```

# ruby-on-rails - 在静态页面的文件名中包含带有 md5 哈希的 rails 预编译资产管道 .JS？或将其排除在文件名中的哈希值之外？

> ID：12855358
> 
> 赞同：0
> 
> 时间：2012-10-12T08:47:14.433
> 
> 标签：ruby-on-rails, asset-pipeline, precompile

Rails 3.2 资产预编译会在文件名后面附加一个哈希值。我想在 Rails 之外使用我的一些资产（用于维护页面） 我想从预编译的资产文件夹中包含一些 .JS 文件。

有没有办法从附加到文件名的 md5 哈希中排除某些文件？或者以其他方式使它们可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T09:32:35.403

您会在以下位置找到类似的内容`config/environments/production.rb`：

```
# Precompile additional assets (application.js, application.css, and all
# non-JS/CSS are already added)
# config.assets.precompile += %w( search.js ) 
```

您应该将希望能够单独链接到的任何资产或其他清单文件添加到`config.assets.precompile`数组中。

例如，您可以制作一个`maintenance.js`清单文件，其中包含：

```
//= require foo
//= require bar 
```

将其添加到`config.assets.precompile`：

```
config.assets.precompile += %w( maintenance.js ) 
```

然后在您的维护页面上：

```
<%= javascript_link_tag 'maintenance' %> 
```

有关更多信息，请参阅[资产管道指南中的预编译资产部分](http://guides.rubyonrails.org/asset_pipeline.html#precompiling-assets)。

# caching - heroku rack:cache .. vs Amazon S3 + Amazon Cloudfront

> ID：12855359
> 
> 赞同：1
> 
> 时间：2012-10-12T08:47:20.673
> 
> 标签：caching, heroku, amazon-s3, rack, amazon-cloudfront

使用这个关于 Heroku Cedar 的参考资料，

[https://devcenter.heroku.com/articles/rack-cache-memcached-rails31#rackcache-storage](https://devcenter.heroku.com/articles/rack-cache-memcached-rails31#rackcache-storage)

他们建议使用 rack:cache （作为实体存储）和 memcache （作为元存储）的组合。我相信实际文件存储在实体存储中。

在上面的指南中，他们将其设置为“file:tmp/cache/rack/body”..

假设我想将静态 html 文件存储在缓存中并让它们在 7 天内过期。我是使用上面的 rack:cache + memcached 组合更好，还是将我所有的 html 文件存储在 Amazon S3 + 中会更好Cloudfront CDN，然后运行 ​​cron 作业以从我的 S3 存储桶中删除所有 html 文件，以确保每 7 天刷新一次 html 页面。

逻辑如下：

如果用户从 S3 请求一个特定的 html 文件并且它不存在.. 我的应用程序在 S3 中生成一个新的 html 文件，我们等待通过 cron 进行下一个 S3 批量删除操作。

仅当用户“请求它们”时才会生成文件......我有大约 500 万个静态文件，最多需要一周的时间......我不希望我的 S3 存储桶装满 500 万个 HTML 文件，除非我的访问者每周请求所有 500 万个 html 文件……我估计他们每周只会请求大约 10k 个唯一文件。

所以我的问题是..哪个更高效，更快？将我所有的 html 文件存储在 rack:cache entitystore.... 中，memcache 充当元存储....... 或者使用 Amazon S3 + Cloudfront 运行？

我在这里寻找2个角度：

1.  哪个更有助于减少到达用户的总时间？
2.  哪个更适合减少我的网络服务器上的负载？

该解决方案可能会解决这两个问题。

# c# - MVC4 和 Entity Framework 5 存储过程

> ID：12855360
> 
> 赞同：0
> 
> 时间：2012-10-12T08:47:21.113
> 
> 标签：c#, entity-framework, asp.net-mvc-4

您好我正在尝试使用存储过程和实体框架 5 在我的 mvc4 应用程序中访问数据库表。我创建了一个 FormValueModel.edmx 文件并导入了用户表和 GetUser 存储过程

这是 GetUser 存储过程的代码

```
SELECT 
    *
FROM
    [User].[User]
Where
    @UserName = UserName 
    AND @UserPassword = UserPassword
    AND Active = 1 
```

这是我的控制器中访问存储过程的代码

```
using (var db = new FormValueEntities())
{
    string userName ="TestUser"
    string password = "Password"

    var query = db.GetUser(userName, password);

} 
```

为什么我不能使用 query.UserName 或 query.UserPassword 等访问表。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T08:52:43.370

您需要从查询中获取第一项，即

```
var user = db.GetUser(userName, password).SingleOrDefault(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T08:52:19.653

你需要做这样的事情：

```
var query  = (from a in db.GetUser(userName, password)
select new User
{
   UserName =a.UserName 
    ...other fields
}).tolist(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T19:40:18.453

检查存储过程！！！

```
SELECT 
    *
FROM
    [User].[User]
Where
    @UserName = UserName 
    AND @UserPassword = UserPassword
    AND Active = 1 
```

好的：

```
SELECT 
    *
FROM
    [User].[User]
Where
    UserName = @UserName 
    AND UserPassword = @UserPassword
    AND Active = 1 
```

# ios - UIDocumentInteractionController 更改呈现视图的标题

> ID：12855362
> 
> 赞同：20
> 
> 时间：2012-10-12T08:47:29.520
> 
> 标签：ios, uiviewcontroller, uidocumentinteraction

我正在使用[**`UIDocumentInteractionController`**](https://developer.apple.com/documentation/uikit/uidocumentinteractioncontroller)来显示 PDF 文件。我的文件使用非用户友好的编码文件名存储在文件系统中。我确实可以访问该文件的更友好的名称，但该文件未使用此名称存储（出于唯一性原因）。

当我将文档加载到视图中时`UIDocumentInteractionController`，视图会在标题栏中显示不友好的“真实”文件名。

有什么方法可以更改显示的标题，如`UIDocumentInteractionController`?

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-10-12T09:34:31.253

`UIDocumentInteractionController`有一个`name`属性，您可以将其设置为用户友好的名称。该名称将用于呈现文档的标题栏中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-07T16:54:32.623

这是 Xamarin (C#) 代码，但无论如何我希望它有所帮助

```
public class PreviewFile : IPreviewFile
{
    public PreviewFile()
    {
    }

    public void Preview(string file, string title)
    {
        var window = UIApplication.SharedApplication.KeyWindow;
        var vc = window.RootViewController;
        bool isUrl = file.StartsWith("file:", StringComparison.OrdinalIgnoreCase);
        var url = isUrl ? new NSUrl(file) : NSUrl.FromFilename(file);

        var controller = UIDocumentInteractionController.FromUrl(url);

        controller.Delegate = new MyInteractionDelegate(vc);
        controller.Name = title;

        controller.PresentPreview(true);
    }
}

public class MyInteractionDelegate : UIDocumentInteractionControllerDelegate
{
    UIViewController parent;

    public MyInteractionDelegate(UIViewController controller)
    {
        parent = controller;
    }

    public override UIViewController ViewControllerForPreview(UIDocumentInteractionController controller)
    {
        return parent;
    }
} 
```

# maven - 每个子模块的不同插件配置

> ID：12855364
> 
> 赞同：2
> 
> 时间：2012-10-12T08:47:34.400
> 
> 标签：maven, maven-3

我有一个多模块构建，其中包含可以针对 Java 5 或 Java 6 的模块。我希望允许模块选择加入 Java 6，并将默认值保留为 5。

要将 Java 5 设置为目标，我需要配置以下内容：

*   `maven-compiler-plugin`：源和目标设置为 1.5
*   `maven-bundle-plugin`: 将 Bundle-RuntimeExecutionEnvironment 配置为 J2SE-1.5

要将 Java 6 设置为目标，我需要配置以下内容：

*   `maven-compiler-plugin`：源和目标设置为 1.6
*   `maven-bundle-plugin`: 将 Bundle-RuntimeExecutionEnvironment 配置为 JavaSE-1.6

我考虑有两个属性：`java.compiler.source`并且`osgi.bree`可以由每个模块定义，但这为错误留下了空间。

如何使用单个开关覆盖每个模块的这两个插件的配置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T08:55:00.623

我会亲自构建您的项目，以便 Java 5 模块来自一个父 POM，Java 6 模块来自另一个父 POM。

```
Global Parent (majority of global settings)
  Java5 parent (just define source/bundle)
    module A
    module B
  Java 6 parent (just define source/bundle)
    module C 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T20:06:09.573

允许子模块设置`my.java.version`属性（或任何您想要的名称）并嵌入一个为编译器和捆绑插件设置版本属性的 Groovy 脚本怎么样？在父 pom 中是这样的：

```
<project ...>
    ...
    <properties>
        <my.java.version>1.5</my.java.version>     <!-- default Java version -->
    </properties>
    <build>
        <plugins>
            <plugin>
                <groupId>org.codehaus.groovy.maven</groupId>
                <artifactId>gmaven-plugin</artifactId>
                <version>1.0</version>
                <executions>
                    <execution>
                        <!-- set up properties in an early lifecycle phase -->
                        <phase>initialize</phase>
                        <goals>
                            <goal>execute</goal>
                        </goals>
                        <configuration>
                            <!-- this can be as simple or complex as you need it to be -->
                            <source>
                                if (project.properties['my.java.version'] == '1.6') {
                                    project.properties['my.compiler.version'] = '1.6'
                                    project.properties['my.execution.environment.version'] = 'JavaSE-1.6'
                                }
                                else {
                                    project.properties['my.compiler.version'] = '1.5'
                                    project.properties['my.execution.environment.version'] = 'J2SE-1.5'
                                }
                            </source>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
        </plugins>
        <!-- now use the properties from above in the plugin configurations -->
        <!-- assume that both of these plugins will execute in a phase later than 'initialize' -->
        <pluginManagement>
            <plugins>
                <plugin>
                    <artifactId>maven-compiler-plugin</artifactId>
                    <configuration>
                        <source>${my.compiler.version}</source>
                        <target>${my.compiler.version}</target>
                    </configuration>
                </plugin>
                <plugin>
                    <groupId>org.apache.felix</groupId>
                    <artifactId>maven-bundle-plugin</artifactId>
                    <configuration>
                        <!-- sorry if this part isn't correct; never used this plugin before -->
                        <instructions>
                            <Bundle-RuntimeExecutionEnvironment>${my.execution.environment.version}</Bundle-RuntimeExecutionEnvironment>
                        </instructions>
                    </configuration>
                </plugin>
            </plugins>
        </pluginManagement>
    </build>
</project> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T10:15:42.580

我不认为有一个优雅的 Maven 方法来解决这个复杂的场景，当子模块的数量变得巨大时，你或 Duncan 提出的解决方案都不是易于维护的 IMO。

为了获得最大的可维护性，我会编写 shell 脚本（和/或 Windows 上的批处理文件）以防 Maven 不能很好地完成这项工作，例如，一个`set-version.sh`(and `set-version.bat`) 循环所有子模块并重置默认值`java.compiler.source`和`osgi.bree`基于a `version-feed.txt`，这`version-feed.txt`为您提供了一个单一的中心位置来操作您的版本变化。如您所见，缺点是这实际上不是一个 Maven 解决方案，它需要在每次需要版本定制`set-version.sh`之前运行。`mvn ...`

此外，对于构建/发布标准化，我会使用[maven-enforcer-plugin](http://maven.apache.org/enforcer/enforcer-rules/requireProperty.html)来播放/暂停基于属性`version.set`（由 标记`set-version.sh`）的构建过程，如果开发人员没有遵循正确的程序做构建。`version.set`如果您更喜欢使用在每个子模块中定义的默认值，而不是运行，这也提供了灵活性`set-version.sh`，只需在父 pom.xml 或命令行参数中直接将其设置为 true。

示例目录结构：

```
parent/
    module-a/
    module-b/
    module-c/
    ... ...
    pom.xml
    set-version.sh
    set-version.bat
    version-feed.txt 
```

希望这是有道理的。

# javascript - 函数getById拉斐尔js

> ID：12855366
> 
> 赞同：2
> 
> 时间：2012-10-12T08:47:36.557
> 
> 标签：javascript, google-chrome, svg, raphael

其次，我使用 raphaeljs lib 在不同的路径中进行了 SVG 表单转换。
我想通过使用 raphaeljs 2.1.0 => getById(id); 的功能调用他来获得路径
但是 Chrome 或 Firefox 告诉我没有函数 getById ！我不明白为什么？

这是我的一段代码：

```
rsrGroups = [path_c_trsp,path_i_trsp,path_l_trsp,path_o_trsp];
len = rsrGroups.length;

for(var i = 0; i < len; i++){
    var el = rsrGroups[i];

el.mouseover(function() {
    rsrGroupsMin.forEach(function(el){
        var getPath = el.getById('el.id'); // here is  the method called !
        alert(getPath);
        el.animate({opacity: 0.5},350,function () {});
        rsrGroups2.forEach(function(tri){
            tri.animate({opacity: 0.5},350,function () {});
        });
    });
    this.animate({opacity: 1},350,function () {});
});
} 
```

这是 Chrome 给出的错误：

> 未捕获的类型错误：对象 Raphaël 的对象没有方法“getById”

我尝试了不同的东西，但没有人工作：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T08:57:08.767

getById 是纸对象上的方法，而不是元素，即

```
var paper = Raphael(10, 50, 320, 200);
paper.getById('id') 
```

或者如果您无权访问 paper 变量，您可以调用 el.paper.getById

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-12T08:57:15.997

你的意思是`el.getElementById('el.id')`？

# django - 通过模板渲染一个块，该模板将添加到现有页面以及它自己的页面

> ID：12855368
> 
> 赞同：1
> 
> 时间：2012-10-12T08:47:43.153
> 
> 标签：django, django-templates, django-views

我有一个用于相册/图片管理的页面，有 2 个部分：相册和图片。

选择相册时，图片块需要通过 AJAX 更改以反映所选相册。

这意味着渲染的图片块需要提供给相册页面，并且作为 AJAX 源的自己的视图可用。

我知道我可以通过让图片块始终从 AJAX 渲染来解决这个问题，即使在相册页面加载时也是如此，但是如果可能的话，我想在初始页面加载中提供默认的相册图片。为了做到这一点，我想在相册页面视图中通过与图片 AJAX 视图相同的模板来呈现图片块。

我只熟悉在 TemplateView 对象中提供模板作为 template_name 属性。

我想我可以简单地使用inclusion_tag 调用PictureView 的一个实例，然后将我需要的数据从render_to_response 中提取出来（我还没有尝试过，我只是在理论上）但这对我来说似乎有点脏。我想知道这个问题是否有更优雅的解决方案？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T10:15:42.137

jQuery、Django 模板、JS 模板和backbone.js 应该将它们联系在一起。

我建议为 Pages 块使用专用模板。将此模板包含在页面的 Django 模板中。

对于动态更新，请使用 JS 模板库，例如[underscore.js](http://underscore.js/)或[mustache.js](http://moustache.js)中包含的。您可以[更改](http://underscorejs.org/#template)使用的模板分隔符，使其与 djangos 相同。

将原始页面块模板包含到[javascript](https://stackoverflow.com/questions/4912586/explanation-of-script-type-text-template-script)模板块中 - 使用 django [ssi](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#ssi)标记。

使用[django-tastypie](http://django-tastypie.readthedocs.org/en/latest/index.html)设置一个以 JSON 格式返回照片数据的 api。然后，您的模板库可以使用数据将模板填充到 JS 模板块中，然后您可以用这个呈现的 HTML 替换 Photo 块。使用[backbone.js](http://backbone.js)应该可以简化DOM 元素和JS 事件的绑定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T10:16:03.373

如果我正确理解您的问题，我曾经做过类似的事情，该小节有自己的模板文件，它只描述了页面的一个部分。我使用[include 标记](https://docs.djangoproject.com/en/1.1/ref/templates/builtins/#include)将其包含到页面模板中，因此它在页面加载时加载，然后使用更新的值呈现该模板，并在内容要更改时用 AJAX 在页面上替换它。

这对你来说是一个选择吗？

# php - symfony2 twig 和多级子文件夹

> ID：12855373
> 
> 赞同：33
> 
> 时间：2012-10-12T08:48:07.747
> 
> 标签：php, symfony, twig

我发现包含带有此路径的模板可以正常工作

```
{% include 'AcmeDemoBundle:TemplateArchive:view.html.twig' with {'data': c.data} %} 
```

虽然这似乎是不允许的：

```
{% include 'AcmeDemoBundle:TemplateArchive:6:view.html.twig' with {'data': c.data} %} 
```

换句话说，我试图访问已分类到我的 bundle/resources/views/ 文件夹中的子文件夹结构中的模板。

如果从我的第一行开始，我不允许比常规的单级包含更深入，是否有另一种/更好的方式来构建这些模板文件？

（文件夹名称'6'代表我想包含的数据库中的模板ID，它需要是动态的并且像这样很好地在文件夹中排序......）。

我尝试将模板文件夹命名为“t6”，但没有区别，“没有前导字母的数字”不是这里的问题......

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-10-12T08:50:41.443

关于什么

```
{% include 'AcmeDemoBundle:TemplateArchive:6/view.html.twig' with {'data': c.data} %} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-12-07T02:33:49.983

两者都在工作：

```
AcmeDemoBundle:TemplateArchive:6/view.html.twig
AcmeDemoBundle:TemplateArchive/6:view.html.twig 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-03-21T12:47:07.143

As of Symfony 2.2 you can also use [Namespaced paths](http://symfony.com/doc/current/cookbook/templating/namespaced_paths.html):

```
{% include '@AcmeDemo/TemplateArchive/6/bar.html.twig' with {'data': c.data} %} 
```

You can even define your own Namespaces:

```
# app/config/config.yml
twig:
    # ...
    paths:
        "%kernel.root_dir%/../src/Acme/DemoBundle/Resources/views/TemplateArchive": TemplateArchive 
```

And then use it like:

```
{% include '@TemplateArchive/6/view.html.twig' with {'data': c.data} %} 
```

This also works in controllers (with custom Namespaces too):

```
// TemplateArchiveController.php
return $this->render('@TemplateArchive/6/view.html.twig', ['data' => $c.getData()]); 
```

From [[Symfony Cookbook: Namespaced paths](http://symfony.com/doc/current/cookbook/templating/namespaced_paths.html)]:

> As an added bonus, the namespaced syntax is faster.

# c++ - 模板专业化中缺少方法

> ID：12855379
> 
> 赞同：0
> 
> 时间：2012-10-12T08:48:31.453
> 
> 标签：c++, templates

1.  如何确保（类）模板的特化实现所有功能？（现在只有当我使用时`mul`才会收到错误消息。）
2.  对于traits1 / traits2，对int的专业化有什么区别。我认为它们都是模板专业化，但 traits2 不接受`static`并给出链接器错误而不是编译器错误。

.

```
#include <iostream>

template<typename T>
struct traits1{
  static T add(T a, T b) { return a+b; } /* default */
  static T mul(T a, T b);                /* no default */
};

template<>
struct traits1<int> {
  static int add(int a, int b) { return a*b; }
  /* static int mul(int a, int b) missing, please warn */
};

template<typename T>
struct traits2{
  static T add(T a, T b);
  static T mul(T a, T b);
};

template<>
int traits2<int>::add(int a, int b) { return a*b; }

/* traits2<int>::mul(int a, int b) missing, please warn */

int main()
{
  std::cout << traits1<int>::add(40, 2) << "\n";
  // error: mul is not a member of traits1<int>
  //std::cout << traits1<int>::mul(40, 2) << "\n";

  std::cout << traits2<int>::add(40, 2) << "\n";
  // error: undefined reference to traits2<int>::mul(int, int)
  //std::cout << traits2<int>::mul(40, 2) << "\n";
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T08:51:57.487

1）如果你想要的只是一个特定功能的不同行为，不要专门化整个类。单独专门化该功能：

```
template<>
int traits1<int>::add(int a, int b) { return a*b; } 
```

您不能确保专门化实现所有模板方法，因为它们是不相关的。

2）您没有为 提供定义`traits2::mul`，因此您当然会收到链接器错误-声明就在那里。

# c++ - c ++两个向量之间的区别 基于字符串成员的 A 和 B

> ID：12855385
> 
> 赞同：0
> 
> 时间：2012-10-12T08:48:38.443
> 
> 标签：c++, string, set, set-difference

我有两个向量对象，分别称为 A 和 B。MyType 类**没有**字段 ID，我想获取位于 A 但不在 B 中的 MyType*。

由于我没有 ID 需要根据字符串字段进行比较。

我的对象的类看起来像这样

```
 class Object 
    {
       public:
               Object();
       string      Name;
       bool        Mode;
       string      something;
       Int         range;
    }

    vector<Object*> a; //asssume filled with objects
    vector<Object*> b; //asssume filled with objects
    vector<Object*> ret; 
```

现在我想获得差异`(a,b)`- 所有在 a 而不是 b 的成员。

如何进行此操作。我尝试使用`strcmp()`来进行比较，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T09:06:01.713

将 的所有条目添加`b`到一个[集合](http://www.cplusplus.com/reference/stl/set/)中。然后尝试将 的所有条目添加`a`到该集合中 - 每个成功的条目都是 in`a`但不在 in的条目`b`。

如果是`Name`您要比较的条目，而不是指针，请使用 a`set<string>`并将`Name`条目添加到集合中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T05:26:30.190

这使用了现有的 STL 算法：

```
bool compPtrByName(Object *const &p1, Object *const &p2) {
    return p1->Name < p2->Name;
} 
```

然后打电话

```
std::sort(a.begin(), a.end(), compPtrByName);
std::sort(b.begin(), b.end(), compPtrByName);
std::set_difference(a.begin(), a.end(), b.begin(), b.end(), ret.begin(), compPtrByName); 
```

如果不允许重新排序向量，则先复制它们。

**注意：**这给出了集合差 A - B。对于对称差 (A - B) 并集 (B - A)，请使用`std::set_symmetric_difference`。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-12T09:55:33.270

This seems like a perfect job for `set_difference` ( [http://www.cplusplus.com/reference/algorithm/set_difference/](http://www.cplusplus.com/reference/algorithm/set_difference/) ).

Provide a comparator for your objects, sort the two vectors (using that comparator), and then use `set_difference` (using that same comparator) to get the objects that are in the first, but not the second.

# axapta - 在 axapta 的父网格中选择一行时在子网格中显示子记录

> ID：12855388
> 
> 赞同：0
> 
> 时间：2012-10-12T08:48:58.053
> 
> 标签：axapta

如何在 axapta 2009 中选择父网格中的一行时在子网格中显示子记录。

我在新表单上拖动了父网格和子网格，并成功显示了父子表中的数据。但是希望仅在选择父行时才显示子记录 2。如果oyu有任何建议或者您有文章参考，请告诉我。这将不胜感激。谢谢 N

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T21:39:19.343

[在表单上连接数据源](http://msdn.microsoft.com/en-us/library/aa608858%28v=ax.50%29.aspx)

将子数据源的 JoinSource 属性设置为父数据源的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T16:06:29.247

NP，这是一个编程论坛......不是“告诉我怎么做”论坛。

查看 Forms\SalesTable 以了解销售表如何显示标题记录和子 (SalesLine) 记录。另请查看 DataDictionary\Tables\SalesTable 和 DataDictionary\Tables\SalesLine。

# java - 使用java解析xml文件——基于android的应用程序

> ID：12855391
> 
> 赞同：4
> 
> 时间：2012-10-12T08:49:14.133
> 
> 标签：java, android, xml, xml-parsing

我是在 java 中解析 xml 文件的新手。我对如何解析来自属性的值和值驻留在标签有一些想法，但在我的 XML 中，值驻留在不同的位置：

```
<ul xml:base="http//www.example.com">
    <li>
        <strong>Ram</strong>
        : 45%
    </li>
    <li>
        <strong>CPU</strong>
        : 49%
    </li>
    <li>
        <strong>Undecided</strong>
        : 6%
    </li>
</ul> 
```

这是我的 XML 格式，这里我想从 XML 中解析百分比值。如果有人知道如何解析这些值，请指导我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T09:27:52.353

有几种可能性可以做到这一点。

例如，您可以使用 simplexml 框架。

为此，您可以尝试创建一些可以帮助您解决问题的类。

UL等级：

```
import java.util.ArrayList;
import java.util.List;

import org.simpleframework.xml.ElementList;
import org.simpleframework.xml.Root;

@Root(name = "ul", strict = false)
public class ULTag {

   @ElementList(name = "li", inline = true, required = false)
   List<LITag> liTags = new ArrayList<LITag>();

   public List<LITag> getLiTags() {
      return liTags;
   }

   public void setLiTags(List<LITag> liTags) {
      this.liTags = liTags;
   }

   public ULTag() {
   }

} 
```

李课：

```
import org.simpleframework.xml.Element;
import org.simpleframework.xml.Root;

@Root(name = "li", strict = false)
public class LITag {

   @Element(name = "strong", required = false)
   private String strong;

   public LITag() {
   }

   public String getStrong() {
      return strong;
   }

   public void setStrong(String strong) {
      this.strong = strong;
   }

} 
```

如果您想在其中插入更多内容，也可以创建一个强类。但在这里我们不需要它。

```
import org.simpleframework.xml.Element;
import org.simpleframework.xml.Root;

@Root(name = "strong", strict = false)
public class StrongTag {

   @Element(name = "strong", required = false)
   private String strong;

   public StrongTag() {
   }

   public String getStrong() {
      return strong;
   }

   public void setStrong(String strong) {
      this.strong = strong;
   }
} 
```

反序列化一个简单的对象

```
Serializer serializer = new Persister();
File source = new File("yourxmlexampl.xml");

ULTag ulTag = serializer.read(ULTag.class, source); 
```

用 ulTag 做任何你想做的事。例如：

```
String percent=ulTag.getLITags().get(0).getStrong(); 
```

可能这可以帮助你。填空给我写信。这是一个关于 simplexml 框架的链接 [http://simple.sourceforge.net/download/stream/doc/tutorial/tutorial.php](http://simple.sourceforge.net/download/stream/doc/tutorial/tutorial.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T08:53:03.860

对于 XML 解析，您在 Android、DOM 解析器、Pull 解析器等中有多种选择。速度更快且推荐的一种是 XMLPullParser（参见[http://developer.android.com/training/basics/network-ops/xml.html](http://developer.android.com/training/basics/network-ops/xml.html)）。

我正在使用它，它在处理大数据时比 DOM 解析器好得多。

如果没有大数据要解析，可以使用 DOM 解析器。

这是文档或 XMLPullParser：http: [//developer.android.com/reference/org/xmlpull/v1/XmlPullParser.html](http://developer.android.com/reference/org/xmlpull/v1/XmlPullParser.html)

以及如何使用它的教程：[http ://www.vogella.com/articles/AndroidXML/article.html](http://www.vogella.com/articles/AndroidXML/article.html)

这是一个关于Android中XML解析的通用教程

[http://www.ibm.com/developerworks/opensource/library/x-android/](http://www.ibm.com/developerworks/opensource/library/x-android/)

# asp.net-mvc-3 - MVC3 和 TDD 编码前后

> ID：12855392
> 
> 赞同：1
> 
> 时间：2012-10-12T08:49:19.137
> 
> 标签：asp.net-mvc-3, tdd

我仍然在掌握 MVC3，现在我正在研究 TDD，而不断出现的毫无意义的事情是。

```
The first step is to quickly add a test, basically just enough code to fail. 
```

为什么要为您的代码创建一个测试才能通过。对我来说，编写我的代码然后对其进行测试并查看它是否失败并修复任何和所有可能发生的错误更有意义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T08:51:14.890

如果您编写代码然后编写测试，那么您就不是在进行**测试驱动**开发......

这就是 TDD 的含义。您编写代码以使预先编写的测试能够通过。如果你不那样做，你就没有做 TDD。

这个想法是您的测试代表您的应用程序的要求。你先写这些，就像你在开始编码之前把你的要求写在纸上一样。

这样，您就知道当所有测试都通过时，您就完成了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T08:51:56.920

首先编写测试让您开始思考该方法将如何通过和失败——您开始更深入地思考该方法。

否则，很容易不加思索地直接进入该方法，从而导致方法不太容易测试。稍后再回到单元测试太容易了——它通常不会发生！

此外，如果你先写方法，你在什么时候写测试？*当您知道它通过时，当您对它“满意”时……编写代码而不考虑测试*是一个滑坡。

# android - Android : 点击通知启动活动

> ID：12855395
> 
> 赞同：1
> 
> 时间：2012-10-12T08:49:26.973
> 
> 标签：android, notifications, google-cloud-messaging, android-pendingintent

如何区分`Notifications`并将它们传递给不同的活动？在下面的方法中，第三个`parameter(String tag`) 值是从中检索的`onMessage()`，其中包含一个值。根据该值，我想区分打开哪个 URL，例如 Google 或 Facebook。在我在下面的“if”条件中包含意图代码后，应用程序终止。请帮忙

```
 private static void generateNotification(Context context, String message,
        String tag) {
    long when = System.currentTimeMillis();
    NotificationManager notificationManager = (NotificationManager) context
            .getSystemService(Context.NOTIFICATION_SERVICE);
    Notification notification = new Notification(R.drawable.ic_launcher,
            message, when);
    String title = context.getString(R.string.app_name);

    Log.d("GCM", "Tag Value " + tag);

        if (tag.equals("one")) {
            // pass to a different activity
                       notificationIntent = new Intent(Intent.ACTION_VIEW,
                Uri.parse("https://www.google.com"));

        }

        if (tag.equals("two")) {
            // pass to a different activity
                    notificationIntent = new Intent(Intent.ACTION_VIEW,
                    Uri.parse("https://www.facebook.com"));
        }

    // set intent so it does not start a new activity
    notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP
            | Intent.FLAG_ACTIVITY_SINGLE_TOP);

    PendingIntent intent = PendingIntent.getActivity(context, 0,
            notificationIntent, 0);
    notification.setLatestEventInfo(context, title, message, intent);
    notification.flags |= Notification.FLAG_AUTO_CANCEL;
    notificationManager.notify(0, notification);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T09:31:02.483

在清单上为活动创建意图过滤器，您需要像这样启动

```
<activity
        android:name=".activities.TabsActivity"
        android:screenOrientation="portrait" >
        <intent-filter>
            <action android:name="com.dittoadvertising.push" >
            </action>
            <category android:name="android.intent.category.DEFAULT" >
            </category>
        </intent-filter> 
```

当 Uri.parse("https://www.facebook.com") = 过滤器中的操作名称时

并且在您的活动中将调用方法 onNewIntent(Intent newIntent)，然后意图传入

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T08:52:37.610

将您的代码更改为：

```
 if (tag.equals("one")) {
     notificationIntent = new Intent(Intent.ACTION_VIEW,
            Uri.parse("https://www.google.com"));
  } else if (tag.equals("two")) {
     notificationIntent = new Intent(Intent.ACTION_VIEW,
            Uri.parse("https://www.facebook.com"));
  } 
```

# php - 在 PHP 表单之间传递变量。

> ID：12855398
> 
> 赞同：0
> 
> 时间：2012-10-12T08:49:36.540
> 
> 标签：php, variables, hidden-field

这可能是一个非常简单的问题，但它很早，所以是的......

基本上我有一个表格：

```
<form name="varsForm" action="step2.php" id="formID" method="post"> 
```

正如我所理解的那样，我创建了一些隐藏变量。如下：

```
<input type="hidden" id="typeid" name="typeid" value="1" /> 
```

因为 step2.php 被设置为一个动作，我虽然假设隐藏变量将被传递给 step2.php 是正确的。但是，当我尝试打电话给他们时，我遇到了错误。我尝试简单地调用它们，如下所示：

```
<?php echo $_GET['typeid']; ?> 
```

但它说 caseid 是一个未定义的索引，我假设我没有正确调用它，有人请把我说对了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T08:51:22.047

您正在通过`POST`方法提交表单，请尝试`$_POST['typeid'];`

或者将方法更改为`GET`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T08:52:47.317

**您在发布**信息时正在使用该`$_GET`数组。

 **您应该使用`$_POST`数组，甚至是`$_REQUEST`同时处理 POST 和 GET 的数组。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T08:51:50.203

由于您在表单中使用 method="post" ，因此您应该使用

```
<?php echo $_POST['typeid']; ?> 
```

当您使用 HTTP GET 方法（form 标签中的method="get"）时，使用 PHP 中的 $_GET。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T08:52:30.313

你正在使用`method="post"`，所以看看 $_POST :)

```
<?php echo $_POST['typeid']; ?> 
```

高温高压

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-12T08:52:48.100

由于您使用的是 HTTP`POST`方法，因此您`<form>`需要将代码提供为：

```
<?php echo $_POST['typeid']; ?> 
```

否则，在 HTML 中更改：

```
<form method="get"> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-12T08:51:28.743

您已经`method="post"`将数据放置在消息正文中，而不是查询字符串中。它将可以通过`$_POST`not访问`$_GET`。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-12T08:58:16.943

您将表单中的方法属性设置为 POST，因此传递给 step2.php 的值在 $_GET 中不可用，它将在 $_POST 中可用，因此要访问您需要使用的值 $_POST['typeid'] 。

并且有时为了避免有关索引的警告或通知（例如未定义的索引），您可以先检查其是否存在，然后再处理

有些像这样

```
if (array_key_exists('typeid', $_POST) )
{
     $typeid = $_POST['type_id'];
    // And do what ever you want to do with this value 
} 
```**

# dicom - DICOM 波形中的 RChannel 灵敏度

> ID：12855400
> 
> 赞同：3
> 
> 时间：2012-10-12T08:49:45.913
> 
> 标签：dicom, waveform

我正在尝试让 ECG 查看器读取 DICOM 文件。

我得到了所有数据（比如通道定义序列），也得到了每个通道的波形样本。我的问题是有一个标签（通道灵敏度），我无法弄清楚它的含义。

它有什么目的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T09:31:10.683

获得样本的原始值后，您必须应用由多个标签定义的一些转换。

**当样本代表定义的单位时， Channel Sensitivity**是必填字段，它必须与**Channel Sensitivity Correction Factor**、**Channel Baseline**和**Channel Sensitivity Units**结合使用。表示单位样品量的数值。

这是什么意思？假设您确实阅读了样本，您添加了 Channel Baseline 的偏差并应用了 Channel Sensitivity Correction Factor 的校正因子。

现在该值将 Channel Sensitivity 与 Channel Sensitivity Units 的单位相匹配。例如，假设您获得了一个恒定的 5 mV 信号，您可以将灵敏度设置为 5 mV，将每个样本的值 1 写入磁盘并使用 5 的通道灵敏度校正因子。解码后您将返回 5 mV。如果要以相同的灵敏度显示信号，则无需考虑这一点（但必须考虑其单位）。

供您参考：[http ://dicomlookup.com/html/03_03PU.html#LinkTarget_229394](http://dicomlookup.com/html/03_03PU.html#LinkTarget_229394)

# javascript - 无法在 Windows 8 应用程序中获取源

> ID：12855407
> 
> 赞同：1
> 
> 时间：2012-10-12T08:50:00.597
> 
> 标签：javascript, rss, windows-8, winjs, feedburner

我正在使用 RSS 源为 Windows 8 创建博客阅读器应用程序。部分代码：

```
function downloadBlogFeed() {
    WinJS.xhr({ url: "http://feeds.feedburner.com/CssTricks" }).then(function (rss) {
        var items = rss.responseXML.querySelectorAll("item");

        for (var n = 0; n < items.length; n++) {
            var article = {};
            article.title = items[n].querySelector("title").textContent;
            var thumbs = items[n].querySelectorAll("thumbnail");
            if (thumbs.length > 1) {
                article.thumbnail = thumbs[1].attributes.getNamedItem("url").textContent;
                article.content = items[n].textContent;
                articlesList.push(article);
            }
        }
    });
} 
```

所以，我的应用程序无法从 FeedBurner 读取提要。我收到这个错误

> 无法加载[http://feeds.feedburner.com/~d/styles/itemcontent.css](http://feeds.feedburner.com/~d/styles/itemcontent.css)。应用程序无法在本地上下文中加载远程 Web 内容。

我试过`http://feeds.feedburner.com/CssTricks?format=xml`and `http://feeds.feedburner.com/CssTricks?fmt=xml`，但同样的错误。

**编辑**：完整代码：http: [//jsfiddle.net/8n67y/](http://jsfiddle.net/8n67y/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T14:33:42.920

您遇到的错误不是因为您无法从 Feedburner 中读取。这是因为您尝试加载到 DOM 的内容中的某处是对 Web 上的 CSS 文件 (itemcontent.css) 的引用。

当您在本地上下文中操作时，您无法从 Web 动态加载脚本或 CSS，因为这会在本地上下文中带来安全风险。

看这里：

[http://msdn.microsoft.com/en-us/library/windows/apps/hh465380.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh465380.aspx)

和这里：

[http://msdn.microsoft.com/en-us/library/windows/apps/hh465373.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh465373.aspx)

有关本地环境和 Web 环境之间的差异以及适用于每种环境的限制的更多信息。

对于您的特定情况，我认为您应该尝试进一步解析内容（您可以在上面的代码中设置断点以检查提要返回的 XML 内容）以确定返回 CSS 文件引用的位置并删除它以编程方式，如果它位于一致的位置，或者找到另一种消除 CSS 引用的方法，这似乎是导致异常的原因（基于上面的有限信息）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T02:32:17.393

您可以使用以下代码来完成您想要做的事情，而不是 WinJS.xhr 使用 xmlHTTPRequest。

下面的代码是我使用 RSS 阅读器的代码的一部分，它在所有情况下都运行良好，我们可以下载图片、文本、链接.. 无论你在提要 ( `http://feeds.feedburner.com/CssTricks`) 中找到什么，都可以获取缩略图，一切正常.

我还通过以下修改对其进行了测试，

```
function connectToURL() {
    var url = "";

    xmlHttp = GetXmlHttpObject();
    if (xmlHttp == null) {
         return;
    }   

    xmlHttp.onreadystatechange = stateChanged;
    xmlHttp.open("GET", url,true);
    xmlHttp.send(null);
}

// your job will actually start on this one...
function stateChanged() {
        if(xmlHttp != null )
            if (xmlHttp[item.key].readyState == 4 ) {
                try {
                    var xmlDoc = xmlHttp.responseXML.documentElement.getElementsByTagName("TAGYOUWANTTOGET");
                    for (var i = 0; i < xmlDoc.length; i++) {
                       xmlDoc[i].getElementsByTagName("TAG")[0].childNodes[0].nodeValue
                    }
                } catch (e) {
                   //work on the exception
                }
            }
        }     
}

function GetXmlHttpObject() {
    var xmlHttp = null;
    try {
        xmlHttp = new XMLHttpRequest();
    }
    catch(e) {
        try {
            xmlHttp = new ActiveXObject("Msxml2.XMLHTTP");
        }
        catch(e) {
            xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
        }
    }

    return xmlHttp;
} 
```

# objective-c - 使用 NSPredicate 过滤核心数据中的对象

> ID：12855418
> 
> 赞同：2
> 
> 时间：2012-10-12T08:50:52.123
> 
> 标签：objective-c, ios, core-data, nspredicate

我有三个实体A，B，C。

它们之间的关系是：A<-->>B，B<-->C。

A 有一个称为“类型”的属性。

A和B的关系是a2b，B和C的关系是b2c。c_array 是 C 对象的列表。

我想要做的是使用 NSPredicate 通过 C 和 A 的属性“类型”过滤 A。

```
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc]init];

NSEntityDescription *entity = [NSEntityDescription entityForName:@"A" inManagedObjectContext:managedObjectContext];
[fetchRequest setEntity:entity];

NSMutableArray *parr = [NSMutableArray array];

for (C *c in c_array) {
  [parr addObject:[NSPredicate predicateWithFormat:@"ANY a2b.b2c = %@", c]];
}

NSPredicate *predicate = [NSCompoundPredicate andPredicateWithSubpredicates:[NSArray arrayWithObjects:[NSCompoundPredicate orPredicateWithSubpredicates:parr], [NSPredicate predicateWithFormat:@"type = %i", 0], nil]];

[fetchRequest setPredicate:predicate]; 
```

但我得到的不是我所期望的。所以我也尝试了其他。

```
predicate = [NSPredicate predicateWithFormat:@"type=%i AND (0!=SUBQUERY(a2b,$a2b,$a2b.b2c IN %@).@count)", 0, c_array]; 
```

意想不到的结果又发生了！有人可以帮帮我吗？TT

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T18:31:34.287

听起来你想反过来做。您已经有了 C，并且根据您描述的关系，您的 C 类将具有 B 属性，而您的 B 类将具有 A 属性。所以假设你已经使用过`c2b`并且`b2a`这样的东西应该可以工作：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"c2b.b2a.type == %@",[NSNumber numberWithInt:0]];

NSArray *result = [c_array filteredArrayUsingPredicate:predicate]; 
```

我还注意到您正在将`type`属性与`A`您的谓词中的 int 进行比较。只需寻找`type==%i`i 在哪里 0 将返回所有在 中没有值的对象`type`。因此，要么与`type`对象`NSNumber`或`type.intValue`int 进行比较。

# java - 在solaris上挂起java进程

> ID：12855424
> 
> 赞同：0
> 
> 时间：2012-10-12T08:51:17.647
> 
> 标签：java, solaris, freeze

我们有一个问题，我们的 java 进程永远挂起，除非针对它发出 Kill -9。

相同的进程在其他 Solaris 环境中成功运行，

Java 进程由单线程组成，在对数据进行一些处理后开始和结束，虽然从日志和数据中我们可以看到代码已完全执行，并且所有数据都已处理。

但是如果我们执行 JPS，我们将始终看到该进程正在运行。我们将 EHcache 与 spring 一起用于缓存目的，将 UCP 用于连接池。在 dB 方面，我们有 ORACLE RAC 结构。

花了几个Jstacks，永远看不到我的代码中的进程。虽然从线程转储中可以看到有很多 UCP 线程挂在那里。

还添加了一个 Shutdown 挂钩并最终将其删除，但由于某种原因，似乎从未调用过 shutdownhook。

由于项目限制，无法粘贴代码。

任何人都可以请帮助

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2017-03-27T06:21:16.460

我的客户在安装 Solaris 时遇到了同样的问题。当安装程序在调试模式下运行时，我们意识到嵌入了安装程序的 java 正在挂起。请张贴，以防你们中的任何人找到答案。

# php - 集成 OpenTok 和 Google 日历

> ID：12855435
> 
> 赞同：2
> 
> 时间：2012-10-12T08:51:48.917
> 
> 标签：php, drupal-7, google-calendar-api, opentok, tokbox

我想创建基于 Google 日历中的事件的 OpenTok 会话和令牌，我想知道是否有人尝试做同样的事情并且有任何运气？

我想为每个日历事件创建一个唯一的会话，然后创建一些生命周期等于事件长度的令牌。单个管理员用户可以将此日历与他们的 iPad 日历同步，并从该界面添加和编辑事件。然后，后端 PHP 系统必须侦听新事件和事件更改并做出适当反应。

这可能吗？处理过类似事情的人会推荐这种方法还是建议不同的路线？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-12T00:04:34.503

这肯定是可能的。我建议不要存储大量令牌，而是在有人加入活动时实时生成它们，没有网络调用来制作它们，所以这实际上非常便宜。

您可能还想查看我们刚刚宣布的新[Cloud Raptor SDK](http://labs.opentok.com/raptor/index.php)以收听有趣的事件。它目前仅在 Java 中可用，而不是 PHP，但最终我们将支持更多语言。

# wpf - 如何在 WPF 中使用 BindingSource？

> ID：12855439
> 
> 赞同：0
> 
> 时间：2012-10-12T08:51:53.117
> 
> 标签：wpf, vb.net

如何使用 WPF 在 VB 中声明 BindingSource？我不能像以前使用 Windows 窗体而不是 WPF 时那样使用 BindingSource.CancelEdit() 之类的命令...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T12:38:41.203

您可以为此使用 BindingGroup：在 XAML 中的元素上设置 BindingGroup，该元素包含编辑对象的所有控件。默认情况下，这会将这些控件上的 UpdateSourceTrigger 设置为 Explicit，这意味着您必须调用 BindingGroup.UpdateSources 才能实际更改当前正在编辑的对象的属性。因此，您可以在提交命令或类似命令中执行此操作。

如果要取消编辑，可以使用 BindingGroup.CancelEdit 来完成。这将丢弃控件中的缓存值并将它们重置为绑定属性的值。

我认为这比实现 IEditableObject 或 Memento 容易得多......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T09:50:56.370

简短的回答不是好消息 - 这不是等效的方法。相反，您的方法需要有所不同。一种方法是在基础类上实现**IEditableObject （或将其包装在可编辑类中）。**第二个是实现**撤消**/重做功能。我想你会发现搜索上面加粗的术语和/或纪念品模式你会发现很多很好的例子，下面是一个。

[使用 WPF 绑定取消更新](https://stackoverflow.com/questions/8096687/canceling-an-update-in-wpf-with-binding)

# php - 我如何（ajax）根据其当前内容更改 div 的内容？

> ID：12855445
> 
> 赞同：-2
> 
> 时间：2012-10-12T08:52:05.030
> 
> 标签：php, javascript, html, mysql

我有一个包含很多“onclick”元素的主页，这些元素使用 ajax 来替换不同 div 的内容。

这些 onclick 元素中的大多数都包含在它们更改的 div 中，因此它们会自行删除并显示新的 onclick 选项。

我遇到的问题是我的一些 onclick 元素旨在更改其他 div 的内容，但是它们所做的更改应该取决于它试图更改的 div 中已经显示的类别（例如搜索过滤器） .

所以：

示例 1：

```
<div id="1">
HEALTH
<span onclick="ajaxfunction(div1)"> Doctors </span>
<span onclick="ajaxfunction(div1)"> Dentists </span>
<span onclick="ajaxfunction(div1)"> FItness Clubs </span>

<div id="2">
ELECTRONICS
<span onclick="ajaxfunction(div2)"> Video Games </span>
<span onclick="ajaxfunction(div2)"> Computers </span>
<span onclick="ajaxfunction(div2)"> Televisions </span>

<div id="filter">
Select max distance from store

 <form>
 Radio buttons, options 0, 5, 10 miles
 <input type="submit" **onclick="query(div1)**> Refine Results </input> 
```

所以我在这里尝试做的重要事情是，在加粗的 js 函数中，“查询”我将使用 mysql select 语句对当前的 div1 结果进行子查询。

我的问题是，如何让我的 js 函数“查询”知道 div 1 搜索值当前是“健康”？

我应该制作一个 PHP 会话变量来保存其值被分配给 javascript 变量的 div 的当前值吗？

那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T09:01:58.303

除了使用`<span onclick...`，您还可以使用 normal `<a href`，将要请求的实际 url 作为`href`属性。您可以从 PHP 生成此 url。

然后，（如果您愿意，可以使用 JQuery）您可以将 onclick 事件添加到这些链接，使它们 AJAX 成为单击链接的 url。

如果您正确实现了该搜索页面，那么当它是 AJAX 请求时，它将只呈现搜索结果，但如果它不是 AJAX 请求，它将呈现包含结果的整个页面。使用适当的 PHP 后端，这应该像`if`后端代码中的单个一样简单。

优点是（按随机顺序）：

*   您已经找到答案（您需要的信息已经在网址中）。
*   该站点也可以在没有 javascript 的情况下运行（不仅适用于旧版浏览器，还适用于可访问性）。
*   屏幕阅读器实际上会识别链接，无论它们是否支持 javascript。
*   该页面被搜索引擎更好地索引（它可以跟随链接）。
*   链接的行为类似于链接，包括悬停、光标等。
*   当有人想要“在新选项卡/窗口中打开”时，该链接有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T09:00:31.393

使用全局 javascript var 保存 div 状态

```
<script>

var current_stat = 'HEALTH';

function query()
{
    // check the current_Stat
    // do stuff based on the current staff 
    // change the current staff if the div contents chang 
}
</script> 
```

# cocos2d-iphone - 将图像从 KnownFolders 加载到 BitmapImage

> ID：12855447
> 
> 赞同：0
> 
> 时间：2012-10-12T08:52:10.123
> 
> 标签：cocos2d-iphone, windows-8, c++-cli

```
auto task = create_task(Windows::Storage::KnownFolders::PicturesLibrary->GetFilesAsync(Windows::Storage::Search::CommonFileQuery::OrderBySearchRank));

task.then([&sstrpath](Windows::Foundation::Collections::IVectorView<Windows::Storage::StorageFile^>^ files)
{
    CCLog("num of files detected %d",files->Size);
    Platform::String^ pathstr = files->GetAt(0)->Path;
    OutputDebugStringW(pathstr->Data());

    auto task2 = create_task(files->GetAt(0)->OpenAsync(Windows::Storage::FileAccessMode::Read));

    task2.then([](Windows::Storage::Streams::IRandomAccessStream^ filestream)
    {
        Windows::UI::Xaml::Media::Imaging::BitmapImage^ bmp = ref new Windows::UI::Xaml::Media::Imaging::BitmapImage();
        bmp->SetSource(filestream);
    }
    );
}
); 
```

这是在带有 C++（cocos2dx 框架）中的 VS express RTM 的 Win8 RTM 上完成的。我正在尝试从图片库中加载图像并从中创建一个 BitmapImage。接下来是在 cococs2dx 中以某种方式使用 CCSprite 的 BitmapImage，但这不是这里的问题。该程序能够一直运行到 task2，但是当我尝试引用新的 BitmmapImage 时崩溃。以下是在输出控制台中

```
First-chance exception at 0x75004B32 in myGame.exe: Microsoft C++ exception:        
Platform::WrongThreadException ^ at memory location 0x02D1D794\. HRESULT:0x8001010E
First-chance exception at 0x75004B32 in myGame.exe: Microsoft C++ exception: [rethrow] at memory location 0x00000000.
First-chance exception at 0x75004B32 in myGame.exe: Microsoft C++ exception:   
Platform::WrongThreadException ^ at memory location 0x02D1E5F0\. HRESULT:0x8001010E
Unhandled exception at 0x622C9AD1 (msvcr110d.dll) in PixBlitz.exe: An invalid parameter was passed to a function that considers invalid parameters fatal. 
```

我不确定我做错了什么，因为大多数教程都是基于 Javascript 或 XAML 用于 Win8 应用程序开发的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T20:22:18.413

创建这样的任务会将代码移动到不同的线程上。当您从错误的线程访问对象时，您会得到 Platform::WrongThreadException。您每次都必须从同一个线程访问 GUI 组件。

我相信如果你 RunAsync 到[Dispatcher](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.dependencyobject.dispatcher)上，那将得到正确的线程。将委托传递给 RunAsync，并让该委托包括创建 BitmapImage，以及您想要对 BitmapImage 执行的任何其他操作。

* * *

根据要求，一个例子。

我不熟悉 Win8 开发，但我熟悉它所基于的 WPF。（如果 C++/CLI 现在支持 lambda，我将不得不回去修改一些关于该主题的旧答案。）

我相信这就是你想要的。我可能对该委托的某些语法稍有偏差。

```
Stream^ filesteam = files->GetAt(0)->Open(FileAccessMode::Read); // we're already on a background thread, no need for a Task if we're not going to call 'then'.

// I'm assuming 'this' is a subclass of Windows.UI.Xaml.Window, or something similar. 
this->Dispatcher->RunAsync(CoreDispatcherPriority::Low, []()
{
    BitmapImage^ bmp = ref new BitmapImage();
    bmp->SetSource(filestream);
}
); 
```

# javascript - 比较时字符串对象如何转换？

> ID：12855448
> 
> 赞同：8
> 
> 时间：2012-10-12T08:52:14.303
> 
> 标签：javascript

```
console.log("20">10);  //true 
console.log("20a">"10");  //true 
console.log("20a">10);  //false 
```

我想知道为什么最后一个变成假的。并且“20a”转换为比较之前的内容。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T08:58:10.950

从[比较运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comparison_Operators)的 MDN 页面：

> 对于关系抽象比较（例如<=），操作数首先转换为基元，然后是相同的类型，然后再进行比较。

```
console.log("20">10);  //true 
```

这将转换`"20"`为数字`20`并进行比较。因为`20`大于`10`，所以为真。

```
console.log("20a">"10");  //true 
```

这将比较两个字符串。因为`"20a"`大于（按字母顺序）大于`"10"`，所以它是真的。

```
console.log("20a">10);  //false 
```

这将转换`"20a"`为数字。结果是`NaN`（做`+"20a"`看看这个在行动）。`NaN`不大于任何数字，因此返回 false。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T09:00:54.637

ECMAScript 中的比较算法在此处描述：http: [//bclary.com/2004/11/07/#a-11.8.5](http://bclary.com/2004/11/07/#a-11.8.5)

> 比较 x < y，其中 x 和 y 是值，产生真、假或未定义（这表明至少一个操作数是 NaN）。如下进行这样的比较：
> 
> 1.  调用 ToPrimitive(x, 提示号)。
>     
>     
> 2.  调用 ToPrimitive(y, 提示号)。
>     
>     
> 
> 3.如果Type(Result(1))是String，Type(Result(2))是String，转到第16步。（注意这一步和第7步算法不同，加法运算符+用and代替或者。）
> 
> 4.呼叫号码（结果（1））。
> 
> 5.呼叫号码（结果（2））。
> 
> ...

因此，在 的情况下`"20a">10`，javascript 引擎必须将[ToNumber](http://bclary.com/2004/11/07/#a-9.3)应用于`"20a"`. 完整的算法很复杂，但指出

> 如果语法不能将字符串解释为 StringNumericLiteral 的扩展，则 ToNumber 的结果为 NaN。

因此，您正在比较`NaN`并且`10`任何涉及`NaN`返回 false 的比较（或`undefined`，请参阅下面的评论）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T09:02:25.353

对于最后一种情况，请注意，即使`"20a" < 10`返回 false。这突出了在比较期间对`"20a"`at的评估，与任何数字相比总是返回。`NaN``NaN``false`

# android - 应用程序在 .apk 处崩溃

> ID：12855459
> 
> 赞同：3
> 
> 时间：2012-10-12T08:52:37.793
> 
> 标签：android

当我连接电缆时，我创建的应用程序在模拟器或我的设备上运行良好，但是当我创建一个 .apk 文件（我将其发送给自己）并且我尝试在我的设备上运行它时崩溃。

过去它在我创建的其他应用程序中工作，但在这种情况下它不会。我正在使用`.android/debug.keystore`它的默认键（`android`）。我也尝试创建一个新的密钥库，但是当我运行 apk 时应用程序仍然崩溃。

有没有人对这种错误有任何经验 - 有任何线索如何解决它？

编辑：

bugSense 告诉我：

```
java.lang.NoClassDefFoundError: xx.xxx.xxxxx.xxxxx.CommonUtilities
at xx.xxxx.xxxxx.xxxxx.xxxxxx.onTabChanged(Tabs.java:617) 
at xx.xxxx.xxxxx.xxxxx.xxxxxx.initialiseTabHost(Tabs.java:544)
at xx.xxx.xxxxx.xxxxx.xxxxxx.onCreate(Tabs.java:90) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T09:02:29.643

您的 NoClassDefFoundError 有两个选项

1.  ProGuard 正在缩小文件并删除/剥离/重新压缩您的应用程序需要运行的库。

2.  您的构建路径未正确配置，并且您使用的库未打包到 .apk 中

**编辑：**

CommonUtilities 在哪里定义？外部图书馆？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T10:13:13.543

问题是我正在从右键单击->导出 apk 导出！当最终产品准备好发布时，您必须对它进行这种导出。

当您的应用程序仍在开发中时，正确的导出方法是右键单击项目->Android 工具->导出签名的应用程序包。

非常感谢大家的帮助，从那个问题中学到了关于 android 的新东西。

# linux - linux中的clone()系统调用

> ID：12855463
> 
> 赞同：2
> 
> 时间：2012-10-12T08:52:43.603
> 
> 标签：linux, linux-kernel, system-calls

当我通过传递 0 作为 stack_start 来调用克隆系统调用时会发生什么？根据克隆上的手册页，它应该返回`-EINVAL`，但是当我这样做时，它显示`SIGSEGV (11)`错误。

```
clone(func,NULL,0,args); 
```

应该返回-EINVAL，但它失败了`SIGSEGV`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T11:19:45.977

根据linux内核有这样一个调用链：

[sys_clone(...stack_start...)](http://lxr.free-electrons.com/source/arch/x86/kernel/process.c#L292) ->`do_fork`

[do_fork(...stack_start...)](http://lxr.free-electrons.com/source/kernel/fork.c#L1580) ->`copy_process`

[复制进程（...stack_start...）](http://lxr.free-electrons.com/source/kernel/fork.c#L1149) ->`copy_thread`

[X86_32 上的 copy_thread(...stack_start...) 或 X86_64 上的](http://lxr.free-electrons.com/source/arch/x86/kernel/process_32.c#L129)copy_thread [(...stack_start...)](http://lxr.free-electrons.com/source/arch/x86/kernel/process_64.c#L148)

查看`copy_thread`导致我假设由于此函数不检查`stack_start`正确性（代码中的 sp 参数），因此在克隆后我们有一个具有无效堆栈指针的任务，并且在零地址处的第一个引用导致`SIGSEGV`.

我建议你也看看克隆函数的 glibc 包装器。

# joomla - joomla中的注册事件

> ID：12855472
> 
> 赞同：1
> 
> 时间：2012-10-12T08:53:14.510
> 
> 标签：joomla, joomla2.5

我有 2 个小插件：

1.  在`Authentication`小组和`onUserAuthenticate`活动中工作
2.  在`System`小组和`onAfterRoute`活动中工作

作为 2 个插件，我需要安装 2 个 zip 文件。是否可以使用`registerEvent`函数 create 1 插件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T13:19:59.890

嗯......我认为你应该保留两个不同的插件。

事实上，你*可以*调用另一个插件，但是如果用户只安装了一个而不是另一个呢？
此外，您可以触发一个`event`，而不是单个插件。
这意味着您将触发链接到该事件的**所有**插件，而不仅仅是您的。

恕我直言，您应该使用两个插件，否则您可能会遇到一些错误，这将是调试的噩梦。

# android - 通过 ADB Android 发送 AT 命令

> ID：12855482
> 
> 赞同：11
> 
> 时间：2012-10-12T08:54:17.757
> 
> 标签：android, cmd, adb, at-command

我有一项工作要调查是否可以通过 ADB shell 将 AT 命令发送到 android 设备。到目前为止，我试图回显 AT 命令，但它会将它们作为普通字符串传递。任何帮助请任何人。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-12T09:05:14.860

请试试这个：

```
echo -e "AT+CFUN=?\r\n" > /dev/ttyUSB0 
```

在您的手机上，不一定要调用串行线`ttyUSB0`。如果这不起作用或不可用，请检查`/dev/`目录的其他条目。
所以它也可能是`/dev/ttyGS0`或`/dev/SMD0`（如@Sani 发现的那样）。

如需更多信息，请查看本[指南](http://forum.xda-developers.com/showthread.php?t=1471241)

* * *

笔记：

也可能有电话不响应任何串行`(tty)`设备上的 AT 命令。
我刚刚在三星 Galaxy S4 上尝试了自己的程序，但没有任何成功。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-13T09:11:21.983

`adb shell`是的，您也可以从...运行 AT 命令

```
prerequsite :-
 1\. rooted android phone
 2\. you are aware of the port that RIL use for i/o operation.
 3\. to check which port is being used by RIl use `getprop rild.libargs` 
```

要从 ADB 运行 AT 命令，请使用：

```
echo -c "AT\r\n" > /dev/smd11 
```

PS： **smd11** 是 RIL 使用的端口。这因设备而异。

还要从 android 应用程序运行 AT 命令检查本教程

[http://tech-papers.org/executing-at-commands-android-application/](http://tech-papers.org/executing-at-commands-android-application/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T08:58:12.747

在哪里呼应他们？在 Android 中，您与 rild（无线电接口层）守护进程对话，后者又与专有库对话，后者将命令发送到实际硬件。查看 rild 源代码以获取详细信息。如果符合您的需要，您可能会编写一个与 rild 对话并通过 adb shell 执行它的命令行程序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-08T14:11:38.200

为了找出使用哪个端口：您可以检查

```
# cat /proc/tty/drivers 
```

用于`logcat -b radio | grep dev`查看收音机正在使用的 tty。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-11-10T21:55:57.597

一种以上的组合。我们让它在 Pixel 4 XL 上使用 2 个终端。
我们做了一个：

`cat /dev/smd7`

在另一个：

`echo "AT\r" > /dev/smd7`

输出显示在第一个终端

笔记：

1.  必须是root！
2.  没有一个发现机制对我们有用，所以我们盲目地调用 smdX，直到我们得到“AT\r”的响应。
3.  echo 会自动添加一个 \n，所以添加它是多余的。

# c# - 反序列化 SOAP 消息的详细信息

> ID：12855488
> 
> 赞同：5
> 
> 时间：2012-10-12T08:54:47.023
> 
> 标签：c#, soap, xml-serialization, windows-8, .net-4.5

我正在开发一个 Windows Store 应用程序。

我有以下手动创建的故障类：

```
[XmlRoot(Namespace = "http://schemas.xmlsoap.org/soap/envelope/", ElementName = "Fault")]
public partial class SoapFault
{
    [XmlElement(Form = XmlSchemaForm.Unqualified, ElementName = "faultcode")]
    public String FaultCode { get; set; }

    [XmlElement(Form = XmlSchemaForm.Unqualified, ElementName = "faultstring")]
    public String FaultDescription { get; set; }

    [XmlElement(Form = XmlSchemaForm.Unqualified, ElementName = "detail")]
    public InnerException[] Detail { get; set; }
}

    [XmlType(Namespace = "http://my.namespace.com", TypeName = "InnerException")]
    public partial class InnerException 
    {
        [XmlElement(Form = XmlSchemaForm.Unqualified, ElementName = "message")]
        public String Message { get; set; }
    } 
```

这是我要阅读的服务器的回复：

```
<env:Envelope xmlns:env="http://schemas.xmlsoap.org/soap/envelope/"><env:Body><env:Fault><faultcode>env:Server</faultcode><faultstring>internal error</faultstring><detail><ns2:InnerException xmlns:env="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="http://ns1.my.namespace.com" xmlns:ns2="http://my.namespace.com" xmlns:ns3="http://ns3.my.namespace.com"><message>internal error</message></ns2:InnerException ></detail></env:Fault></env:Body></env:Envelope> 
```

我试图阅读它的方式如下：

```
using (XmlReader reader = XmlReader.Create(await response.Content.ReadAsStreamAsync()))
{
    string SoapNamespace = "http://schemas.xmlsoap.org/soap/envelope/";
    try
    {
         var serializer = new XmlSerializer(typeof(SoapFault));

         reader.ReadStartElement("Envelope", SoapNamespace);
         reader.ReadStartElement("Body", SoapNamespace);

         var fault = serializer.Deserialize(reader) as SoapFault;

         reader.ReadEndElement();
         reader.ReadEndElement();
    }
    catch(Exception ex)
    {
         throw new Exception("Exception was thrown:" + ex.Message);
    }
} 
```

我尝试添加命名空间，更改 XmlElement 属性，但我总是以 SoapFault 中的 Detail 属性为 NULL 结束。当我将类型更改为对象时，我至少会得到一个包含数据的 XmlNode 集。

我必须在此代码中进行哪些更改才能在序列化时实例化正确的类？

请注意：很遗憾，我被迫手动创建调用，并且无法使用自动生成的代码。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T10:18:42.573

[深受How to Deserialize XML document](https://stackoverflow.com/questions/364253/how-to-deserialize-xml-document)的启发，我认为这应该可以解决问题。

我生成的类如下：

1.  将 Xml 服务器回复保存到磁盘 (c:\temp\reply.xml)
2.  xsd c:\temp\reply.xml /o:"c:\temp"
3.  xsd c:\temp\reply.xsd reply_app1.xsd /classes /o:"c:\temp"
4.  将 reply_app1.cs 添加到您的项目中。

这导致：

```
//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:4.0.30319.269
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

using System.Xml.Serialization;

// 
// This source code was auto-generated by xsd, Version=4.0.30319.1.
// 

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType=true, Namespace="http://schemas.xmlsoap.org/soap/envelope/")]
[System.Xml.Serialization.XmlRootAttribute(Namespace="http://schemas.xmlsoap.org/soap/envelope/", IsNullable=false)]
public partial class Envelope {

    private EnvelopeBody[] itemsField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute("Body")]
    public EnvelopeBody[] Items {
        get {
            return this.itemsField;
        }
        set {
            this.itemsField = value;
        }
    }
}

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType=true, Namespace="http://schemas.xmlsoap.org/soap/envelope/")]
public partial class EnvelopeBody {

    private EnvelopeBodyFault[] faultField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute("Fault")]
    public EnvelopeBodyFault[] Fault {
        get {
            return this.faultField;
        }
        set {
            this.faultField = value;
        }
    }
}

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType=true, Namespace="http://schemas.xmlsoap.org/soap/envelope/")]
public partial class EnvelopeBodyFault {

    private string faultcodeField;

    private string faultstringField;

    private EnvelopeBodyFaultDetail detailField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form=System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string faultcode {
        get {
            return this.faultcodeField;
        }
        set {
            this.faultcodeField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form=System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string faultstring {
        get {
            return this.faultstringField;
        }
        set {
            this.faultstringField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form=System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public EnvelopeBodyFaultDetail detail {
        get {
            return this.detailField;
        }
        set {
            this.detailField = value;
        }
    }
}

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType=true, Namespace="http://schemas.xmlsoap.org/soap/envelope/")]
public partial class EnvelopeBodyFaultDetail {

    private InnerException innerExceptionField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Namespace="http://my.namespace.com")]
    public InnerException InnerException {
        get {
            return this.innerExceptionField;
        }
        set {
            this.innerExceptionField = value;
        }
    }
}

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType=true, Namespace="http://my.namespace.com")]
[System.Xml.Serialization.XmlRootAttribute(Namespace="http://my.namespace.com", IsNullable=false)]
public partial class InnerException {

    private string messageField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form=System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string message {
        get {
            return this.messageField;
        }
        set {
            this.messageField = value;
        }
    }
} 
```

是的，它是自动生成的，但我认为这将是创建可以反序列化的类的最简单方法。你可以这样做：

```
XmlDocument document = new XmlDocument();
document.Load(Server.MapPath("~/Data/reply.xml"));

System.Xml.Serialization.XmlSerializer serializer = new System.Xml.Serialization.XmlSerializer(typeof(Envelope));
Envelope envelope = (Envelope)serializer.Deserialize(new StringReader(document.OuterXml)); 
```

哪个正确地拿起了`Detail`财产。在您的情况下，您需要使用`XmlReader`之前所做的事情而不是 my `new StringReader(document.OuterXml)`，并将其包装在 using 块等中。

请记住，反序列化对象的某些属性名称与您在`SoapFault`类中的名称不完全匹配（例如，现在称为`Envelope`），并且某些属性表示为数组而不是单个对象，但是如果需要，您可能可以调整 Xsd 以适应。

# c# - Active Directory 如何查看隐藏属性

> ID：12855490
> 
> 赞同：1
> 
> 时间：2012-10-12T08:54:46.687
> 
> 标签：c#, asp.net, asp.net-mvc-3, active-directory

前提是，这是我第一次使用 Active Directory（我的项目是 Asp.Net MVC 中的 Web 应用程序）。

对于 Active Directory 中的用户，我需要读取`givenName`C# 中的属性。

我的问题：

1.  在 Windows Server 上使用 Active Directory 浏览器我看不到`givenName`用户的属性。能否从 Active Directory 的视图中隐藏此属性？

2.  你能给我提供一个代码示例，让我`givenName`知道用户的 UserName 属性吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T08:59:00.310

如果您使用的是 .NET 3.5 及更高版本，则应查看`System.DirectoryServices.AccountManagement`(S.DS.AM) 命名空间。在这里阅读所有相关信息：

*   [在 .NET Framework 3.5 中管理目录安全主体](http://msdn.microsoft.com/en-us/magazine/cc135979.aspx)
*   [System.DirectoryServices.AccountManagement 上的 MSDN 文档](http://msdn.microsoft.com/en-us/library/system.directoryservices.accountmanagement.aspx)

基本上，您可以定义域上下文并在 AD 中轻松找到用户和/或组：

```
// set up domain context
PrincipalContext ctx = new PrincipalContext(ContextType.Domain);

// find a user
UserPrincipal user = UserPrincipal.FindByIdentity(ctx, "SomeUserName");

if(user != null)
{
   // do something here.... 
   string givenName = user.GivenName;    
} 
```

新的 S.DS.AM 使得在 AD 中与用户和组一起玩变得非常容易！

# sql - 在同一个表中的两行之间查找匹配的列数据

> ID：12855496
> 
> 赞同：1
> 
> 时间：2012-10-12T08:55:40.433
> 
> 标签：sql, database, sqlite

我想在同一个 sqlite 表中找到两行之间的匹配值。例如，如果我有下表：

```
rowid, col1, col2, col3
-----  ----  ----  ----
1      5     3     1    
2      3     6     9    
3      9     12    5 
```

所以比较第 1 行和第 2 行，我得到值 3。

*   第 2 行和第 3 行将给出 9。
*   第 3 行和第 1 行将给出 5。

表中任意两行之间总会有一个且只有一个匹配值。

什么是正确的sqlite查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T09:14:18.877

我对行的值进行了硬编码，因为我不知道如何在 sqllite 中声明变量。

```
select t1.rowid as r1, t2.rowid as r2, t2.col as matchvalue from <yourtable> t1 join
(
  select rowid, col1 col from <yourtable> where rowid = 3 union all
  select rowid, col2 from <yourtable> where rowid = 3 union all
  select rowid, col3 from <yourtable> where rowid = 3
) t2
on t2.col in (t1.col1, t1.col2, t1.col3)
and t1.rowid < t2.rowid -- you don't need this if you have two specific rows
and t1.rowid = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T09:09:36.037

```
select col from
(    
    select rid, c1 as col from yourtable
    union
    select rid, c2 from yourtable
    union
    select rid, c3 from yourtable
) v
where rid in (3,2)
group by col
order by COUNT(*) desc
limit 1 
```

# java - Android 中的 Socket 编程支持

> ID：12855500
> 
> 赞同：0
> 
> 时间：2012-10-12T08:55:57.903
> 
> 标签：java, android, sockets, java-native-interface

我有一个现有的 Linux 和 Windows 应用程序，我在其中使用 IP_TOS、IPPROTO_IP。属于 Winsock2.h（在 Windows 中）和 sys/socket.h（在 Linux 中）。但现在我正试图将其移植到 Android 中。出于这个原因，我想知道是否有任何这样的头文件可以用来支持我现有的应用程序进入 android。

编辑：需要提一下，我有一个使用 NDK7 生成的 .so 文件。我使用 JNI 来支持我的 android 应用程序中的 C++ 程序。

# c# - 附加和更新 boolean 或 int 并不总是有效

> ID：12855502
> 
> 赞同：4
> 
> 时间：2012-10-12T08:56:13.063
> 
> 标签：c#, .net, entity-framework, entity-framework-5

使用 Entity Framework 5，给定一个`messenger`存在于数据库中的对象，具有位属性`published`，在以前的 EF 版本中，我会像这样更新它：

```
using (var c = new EFContext())
{
    Data.Messenger cm = new Messenger { MessageId = messageId };
    c.Messengers.Attach(cm);
    cm.Published = newPublishedValue;
    c.SaveChanges();
} 
```

但是，使用 EF5，如果是，则此方法有效`newPublishedValue`，`true`但如果`newPublishedValue`是`false`，则不会对数据库进行任何更改。同样，此模式不会将整数值设置为 0。

这里发生了什么？

更换

```
c.Messengers.Attach(cm); 
```

和

```
c.Entry(cm).State = System.Data.EntityState.Modified; 
```

修复了这个问题，但是如果 EF5 不会更新我`new Data.Messenger`的默认结构值的属性，那不是让该`Attach`方法有点没用吗？

我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T17:13:18.290

它仅在以前的版本中有效，可能是当您使用派生自`EntityObject`POCO 的实体或具有动态代理更改跟踪的 POCO 时。`Modified`在这种情况下，无论旧值是什么，当您分配一个值（= 调用 setter）时，该属性设置器都会被设置该属性标志的代码覆盖。

在没有动态更改跟踪代理的情况下使用 POCO，它不起作用 - 对于任何版本的 EF - 因为属性设置器只是实体类中数据字段的分配。更改跟踪通过快照更改跟踪进行，这意味着 EF 将您调用时获取的实体快照的`Attach`值与调用时实体具有的值进行比较`SaveChanges`。如果值未更改，EF 未检测到更改并且不为属性编写 UPDATE 语句。

`Attach`仅用于将实体添加到`Unchanged`状态中的上下文中。在您的情况下，您必须`Modified`明确标记该属性以确保它将在数据库中更新，无论旧值是什么：

```
c.Entry(cm).Property(x => x.Published).IsModified = true; 
```

# javascript - json_encode 不工作

> ID：12855504
> 
> 赞同：0
> 
> 时间：2012-10-12T08:56:15.510
> 
> 标签：javascript, html, json

我在尝试设置轮询脚本时遇到问题...该脚本在我的本地主机上运行良好，但是当我将其传输到实时服务器时，我排除了一些错误...我的本地 php 版本是 5.3.8 和实时服务器是 5.2.13 ....投票更新数据库。我将其缩小到 json_encode 的问题...它没有调用 javascript，iv 阅读了大量帖子但找不到答案...这是一些代码片段

```
 include_once ('db_connect.php');
    include_once ('functions.php');

    if ( isset($_POST['poll']) and isset($_POST['option'])){

        $poll_id = intval($_POST['poll']);
        $option_id = intval($_POST['option']);

            add_vote( $option_id,$poll_id );
            setcookie('poll_'.$poll_id, 1, time() * (60 * 60 * 5),'/');

            exit( json_encode(array('results' => results($poll_id))));
    } 
```

这是javascript

```
 $("img", form).remove();
        //set the new options Percentages
        $.each(data.results, function (option, value) {
            $("p#option_" + option).find("span").show().css({
                width: 0,
                opacity: 0
            }).animate({
                width: value + "%",
                backgroundColor: getColorForPercentage(value / 100),
                opacity: 1
            }, "slow", "swing", function () {
                $("p#option_" + option).find("em").text(value + "%").fadeIn("slow");
            })
        });

    }, "json");
    return false; 
```

它绝对让我崩溃......如果尝试这么费力......把exit（）; 在 json_encode 之后...

任何帮助都会非常感激......

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T09:19:06.060

您需要删除以下警告和任何额外的输出。

```
<br />
<b>Warning</b>:  Expiry date cannot have a year greater then 9999 in <b>/content/Hosting/o/p/opinionfreaks.com/web/vote.php</b> on line <b>11</b><br />
string(53) "{"results":{"1":46.7,"2":10,"3":26.7,"4":10,"5":6.7}}" 
```

或者你可以做`error_reporting(E_ERROR);`，但仍然是`<br />`打印。

也考虑以下：

```
setcookie('poll_'.$poll_id, 1, time() + (60 * 60 * 5),'/'); // its + not * 
```

# mysql - MySQL内部连接不同的结果

> ID：12855505
> 
> 赞同：0
> 
> 时间：2012-10-12T08:56:18.650
> 
> 标签：mysql

我试图弄清楚为什么以下两个查询返回不同的结果：

```
SELECT DISTINCT i.id, i.date  
FROM `tblinvoices` i
INNER JOIN `tblinvoiceitems`  it ON it.userid=i.userid
INNER JOIN `tblcustomfieldsvalues`  cf ON it.relid=cf.relid  
WHERE i.`tax` = 0  
AND i.`date`  BETWEEN  '2012-07-01' AND '2012-09-31' 
```

和

```
SELECT DISTINCT i.id, i.date  
FROM `tblinvoices` i
WHERE i.`tax` = 0  
AND i.`date`  BETWEEN  '2012-07-01' AND '2012-09-31' 
```

显然区别在于这里的内连接，但我不明白为什么有内连接的返回的结果比没有内连接的少，我会想，因为我没有做任何交叉表引用，他们应该返回相同的结果。

我正在努力的最后一个问题是

```
SELECT DISTINCT i.id, i.date  
FROM `tblinvoices` i
INNER JOIN `tblinvoiceitems`  it ON it.userid=i.userid
INNER JOIN `tblcustomfieldsvalues`  cf ON it.relid=cf.relid  
WHERE  cf.`fieldid` =5  
AND  cf.`value` 
REGEXP  '[A-Za-z]'
AND i.`tax` = 0  
AND i.`date`  BETWEEN  '2012-07-01' AND '2012-09-31' 
```

但是由于当我添加内部连接时看起来不正确的不同结果（它删除了一些应该有效的结果）它目前无法正常工作，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T09:34:57.257

INNER JOIN 语句将检索存储在 jion 语句的两个表中的行。尝试 LEFT JOIN 语句。这将返回第一个表中但第二个表中不需要的行：

```
SELECT DISTINCT i.id, i.date  
FROM `tblinvoices` i
LEFT JOIN `tblinvoiceitems`  it ON it.userid=i.userid
LEFT JOIN `tblcustomfieldsvalues`  cf ON it.relid=cf.relid  
WHERE i.`tax` = 0  
AND i.`date`  BETWEEN  '2012-07-01' AND '2012-09-31' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T10:07:33.433

INNER JOIN 表示仅显示两个表中存在相同 ID 值的记录。

LEFT JOIN 表示显示左表中的所有记录（即 SQL 语句中前面的记录），而不管右表中是否存在匹配记录。

尝试 LEFT Join 而不是 INNER JOIN

```
SELECT DISTINCT i.id, i.date  
FROM `tblinvoices` i
LEFT JOIN `tblinvoiceitems`  it ON it.userid=i.userid
LEFT JOIN `tblcustomfieldsvalues`  cf ON it.relid=cf.relid  
WHERE i.`tax` = 0  
AND i.`date`  BETWEEN  '2012-07-01' AND '2012-09-31' 
```

# html - Internet Explorer 播放不佳 - 站点左对齐且不是 100% 宽度

> ID：12855506
> 
> 赞同：0
> 
> 时间：2012-10-12T08:56:23.237
> 
> 标签：html, css

我的网站在 chrome 中完美运行，但现在我已经使用 IE7 对其进行了测试，不仅网站左对齐，而且全宽 (100%) 标题背景不再一直延伸，并且标题和内容左对齐。

似乎只有页脚才能正常工作。我不知道为什么会这样，但不是“破解”它来工作，我确信我的代码中有一些错误。

我无法弄清楚这一点！这是我的代码：

**HTML**

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en-US">
<head>
        <title>Title</title>
        <link href="main2.css" rel="stylesheet" type="text/css">
<!--[if !IE 7]>
    <style type="text/css">
        #wrap {display:table;height:100%}
    </style>
<![endif]-->
    </head>
    <body>
<div id="wrap">
    <div id="header">
<div id="header_content">                        
    <a href="/"><img src="/static/img/header.jpg" id="logo" alt="coming soon" title="coming soon"></a>
                        <ul>
                            <li><a href="/posts/list/">Link1</a></li>
                            <li><a href="/posts/create/">Link 2</a></li>
                            <li><a href="/about">Link 3</a></li>
                        </ul>
    </div>
    </div>

    <div id="main">
There are many sticky footer methods to be found in Google. I've tried many of them and they usually fail in some regards. The problem it seems is that some of these methods are old and may have worked in older browsers but they don't in newer browser releases. Because those pages are old, and were heavily linked too in the past, they still rank high in Google. Many webmasters looking for a sticky footer solution end up scratching their heads as they try these same old methods because they are the first ones they end up finding when they search.
    </div>
    </div>

<div id="footer">
    <div id="footer_content">
           &#169; 2012 Company, Inc.
           <ul>
                <li><a href="/contact">Contact</a></li>
                <li><a href="/contact">Terms</a></li>
                <li><a href="/contact">Privacy</a></li>
           </ul>
</div>
    </div> 
</body>
</html> 
```

**CSS**

```
* { margin: 0; padding: 0; }
html, body {height: 100%; }
body { min-width:900px; }

/* LAYOUT */
#wrap {min-height: 100%;}
#main { background-color: purple; margin: 0 auto; overflow: auto; padding-bottom: 60px; width: 900px; } 
body:before { content:""; height:100%; float:left; width:0; margin-top:-32767px;/ } /*Opera Fix*/

/* HEADER */
#header { background-color: orange; width: 100%; line-height: 60px; } 
#header_content { position: relative; width: 900px; margin: 0 auto; }
#header ul { list-style: none; position: absolute; top: 0; right: 0; }
#header ul li { float: left; }
#header ul li a { font-weight: bold; text-decoration: none; }
#header ul li a:hover {  }

/* FOOTER */ 
#footer { margin-top: -60px; clear:both; background-color: blue; line-height: 60px; } 
#footer_content { width: 900px; margin: 0 auto; position: relative;}
#footer ul { list-style: none; position: absolute; top: 0px; right: 0; }
#footer ul li { float: left; margin-right: 5px; }
#footer ul li a { font-weight: bold; margin-right: 5px; text-decoration: none; }
#footer ul li a:hover {  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T08:58:59.297

### 小 CSS 更改：

```
* { margin: 0; padding: 0; }
html, body {height: 100%; }
body { min-width:900px; }

/* LAYOUT */
#wrap {min-height: 100%;}
#main { background-color: purple; margin: 0 auto; overflow: auto; padding-bottom: 60px;} 
#main .wrap {width: 900px; margin: auto;}
body:before { content:""; height:100%; float:left; width:0; margin-top:-32767px;/ } /*Opera Fix*/

/* HEADER */
#header { background-color: orange; width: 100%; line-height: 60px; margin: auto;} 
#header_content { position: relative; margin: 0 auto; width: 900px; }
#header ul { list-style: none; position: absolute; top: 0; right: 0; }
#header ul li { float: left; }
#header ul li a { font-weight: bold; text-decoration: none; }
#header ul li a:hover {  }

/* FOOTER */ 
#footer { margin-top: -60px; clear:both; background-color: blue; line-height: 60px; } 
#footer_content { width: 900px; margin: 0 auto; position: relative;}
#footer ul { list-style: none; position: absolute; top: 0px; right: 0; }
#footer ul li { float: left; margin-right: 5px; }
#footer ul li a { font-weight: bold; margin-right: 5px; text-decoration: none; }
#footer ul li a:hover {  } 
```

### 小提琴：http: [//jsbin.com/iyedik/1](http://jsbin.com/iyedik/1)

# kendo-ui - 如何根据下拉列表更改剑道网格列

> ID：12855509
> 
> 赞同：1
> 
> 时间：2012-10-12T08:56:34.003
> 
> 标签：kendo-ui

我们正在开发一个使用 Kendo UI 的网络应用程序项目。是否可以将第一列标题/标题作为我们从下拉列表中选择的内容。例如：- 如果搜索序列号，则序列号应位于搜索的第一列。但我无法得到这一点，因为我们通常以排序方式定义列定义。根据选择，我们隐藏列的其余部分。例如：

```
xxx.GridColDef = [ {
    field : "serialNo",
    title : "Serial No",

}, {
    field : "firstname",
    title : "firstname",
    }, {
    field : "lastnameo",
    title : "lastname",
    }, 
```

如果我选择名字，则从下拉列表中，名字应该在第一列。但我得到第一列作为序列号有什么办法吗？无需为每个添加单独的列定义。

剑道版——2012.1.322

这应该自动完成，而不是使用列重新排序而不是手动

* * *

对不起，如果我不清楚。我想要的是

在下拉我有

序列号 名 姓 出生日期

最初的网格将如下所示

序列号 名 姓 出生日期

如果用户从下拉列表中选择“名字”，它应该是这样的

名字 序列号 姓氏 DOB

希望这可以帮助。如果您需要更多说明，请告诉我。感谢您为此提供解决方案。

还有一件事： -

“使用您当前版本的 Kendo 2012.1.322 小提琴”在此小提琴中，我无法从下拉列表中进行选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T22:43:55.000

**更新答案 2**

当前的 KendoUI 网格框架不支持在代码中切换列的功能。我创建了一个新的小提琴，您不必在每个 switch case 中完全重新排序列。它遍历您的列定义，如果存在下拉值，则将其从数组中删除并将其放置在第一个位置。我不知道你的 50 列和 8 个下拉菜单是如何相互作用的，所以我很难给出一个完全准确的答案。但是在这里的多个建议之间，我希望你能找到一个解决方案:)

我创建了一个新的 tempColumn 定义变量，以便原始列定义在其原始状态下仍然可用。

```
function onSelect(e) {
    var ddlVal = this.dataItem(e.item.index()).value;
    var tempColumns = columnDefinitions;

    $(tempColumns).each(function(index) {
        if (ddlVal == this.title) {
            tempColumns.splice(index, 1);
            tempColumns.splice(0, 0, this);
        }
    });

    createGrid(tempColumns); 
```

}

[使用香料重新排序列的新小提琴](http://jsfiddle.net/schapman/QQnht/1/)

**更新的答案**

我用你当前版本的剑道创建了一个新的小提琴。您不需要更新您的版本，因为我认为在 Kendo 框架内没有任何方法可以做到这一点。

此解决方案涉及在您从下拉列表中进行选择时重新定义列定义，然后重新创建网格。

[使用您当前版本的剑道更新小提琴](http://jsfiddle.net/schapman/PRN2d/4/)

*出于某种原因，Internet Explorer 有时不能很好地与 jsfiddle 配合使用。此示例适用于 Firefox 和 Chrome，但不适用于 IE。如果您无法尝试使用其他浏览器来查看它是否正常工作，请将代码插入您的解决方案并进行测试。

**原始答案**

我提供了两种不同的解决方案。

1) 您可以更新您的 KendoUI 版本吗？如果可以，那么您可以利用 .showColumn() 和 .hideColumn() 方法。

下面是使用 KendoUI 2012.2.710 的小提琴。在下拉的选择事件中，您只需显示/隐藏相应的列。真的很容易和直接。

[小提琴使用剑道 2012.2.710](http://jsfiddle.net/schapman/HyHZG/5/)

2) 如果您无法更新您的 KendoUI 版本，您可以更改您的 columnDefinition 数组，然后重新创建网格。

在下拉列表的 onSelect 方法中，从 columnDefinition 数组中删除第一列，然后将新的列对象添加到数组中。之后，您删除网格的 div 元素的内容，然后重新创建网格。

您仍然绑定到相同的数据，因此您不必通过网络再次获取数据。

[使用您当前版本的 Kendo 2012.1.322 小提琴](http://jsfiddle.net/schapman/ZpY7D/)

~ 在这两种情况下，绝对可以清理代码以更好地满足您的需求，但我只是想为您提供一些基本功能。希望这可以帮助！

# webmatrix - Webmatrix 2 模板创建失败

> ID：12855510
> 
> 赞同：0
> 
> 时间：2012-10-12T08:56:50.763
> 
> 标签：webmatrix, webmatrix-2

我在使用最新版本的 WebMatrix 从模板创建网站时遇到问题。我已经卸载它并重试了几次重新启动计算机，但仍然无法创建模板。我试图创建导致相同错误的 ASP.NET、Node.js 模板（“方法失败，出现意外错误代码 50”）。谷歌搜索没有帮助。

日志文件中的详细信息是：

例外：System.InvalidOperationException：方法失败，出现意外错误代码 50。在 System.Security.AccessControl.NativeObjectSecurity.CreateInternal（ResourceType resourceType，布尔 isContainer，字符串名称，SafeHandle 句柄，AccessControlSections includeSections，布尔 createByName，ExceptionFromErrorCode exceptionFromErrorCode，对象 exceptionContext） Microsoft.Web.Deployment.SetAclProvider.Add(DeploymentObject source, Boolean whatIf) 的 Microsoft.Web.Deployment.SetAclProvider.Add(DeploymentObject source, Boolean whatIf) 的 Microsoft.Web.Deployment.FileSystemSecurityEx..ctor(Boolean isContainer, String name, AccessControlSections includeSections, Boolean isDirectory) （DeploymentObject 源，DeploymentSyncContext syncContext）在 Microsoft.Web.Deployment.DeploymentSyncContext.HandleAdd（DeploymentObject destObject，DeploymentObject sourceObject) 在 Microsoft.Web.Deployment.DeploymentSyncContext.HandleUpdate(DeploymentObject destObject, DeploymentObject sourceObject) 在 Microsoft.Web.Deployment.DeploymentSyncContext.SyncChildrenOrder(DeploymentObject dest, DeploymentObject source) 在 Microsoft.Web.Deployment.DeploymentSyncContext.SyncChildren(DeploymentObject dest , DeploymentObject source) 在 Microsoft.Web.Deployment.DeploymentSyncContext.ProcessSync(DeploymentObject destinationObject, DeploymentObject sourceObject) 在 Microsoft.Web.Deployment.DeploymentObject.SyncToInternal(DeploymentObject destObject, DeploymentSyncOptions syncOptions, PayloadTable payloadTable, ContentRootTable contentRootTable, Nullable`1 syncPassId) 在Microsoft.Web.Deployment.DeploymentObject.SyncTo(DeploymentProviderOptions providerOptions,DeploymentBaseOptions baseOptions, DeploymentSyncOptions syncOptions) 在 Microsoft.Web.Deployment.DeploymentObject.SyncTo(String provider, String path, DeploymentBaseOptions baseOptions, DeploymentSyncOptions syncOptions) 在 Microsoft.Web.Deployment.DeploymentObject.SyncTo(DeploymentWellKnownProvider provider, String path, DeploymentBaseOptions baseOptions, DeploymentSyncOptions syncOptions) 在 Microsoft.Web.PlatformInstaller.MSDeployProxy.Install(InstallerContext context, RemoteCredentials remoteCredentials)Microsoft.Web.PlatformInstaller.MSDeployProxy.Install(InstallerContext context, RemoteCredentials remoteCredentials) 上的 DeploymentBaseOptions baseOptions、DeploymentSyncOptions syncOptions)Microsoft.Web.PlatformInstaller.MSDeployProxy.Install(InstallerContext context, RemoteCredentials remoteCredentials) 上的 DeploymentBaseOptions baseOptions、DeploymentSyncOptions syncOptions)

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T10:05:36.807

决定不使用 WebMatrix。根据我对 Justin Beckwith 的评论，在假设错误归结为以下原因后，我坚持使用 VS2012：

1.  我的文档文件夹托管在某处的文件共享上
2.  或者与VS2012冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-27T19:47:27.620

在 WebMatrix 快速入门中，转到选项 -> 站点并将您的默认站点位置更改为本地文件路径。

# wpf - 将表格的 2 列与列表框中的 1 个单元格绑定

> ID：12855514
> 
> 赞同：0
> 
> 时间：2012-10-12T08:56:59.633
> 
> 标签：wpf, c#-4.0

名称第一列：日期接收名称第二列：日期发送

数据 ：

日期接收 -------- 日期发送

```
 2001/01/01     --------    2001/01/03
 2001/03/08     --------    2001/03/12
 2001/11/19     --------    2001/11/24
 2001/11/11     --------    2001/12/18 
```

我想在列表框中显示发送和接收之间的时间差。

怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T09:10:47.190

如果您在单元格中使用 DateTime ，则可以执行以下操作：

DateTime time1：您的第一列

DateTime time2 ：您的第三列

TimeSpan diff = time2.Substract(time1);

日期时间：http: [//msdn.microsoft.com/en-us/library/system.datetime.aspx](http://msdn.microsoft.com/en-us/library/system.datetime.aspx)

时间跨度：http: [//msdn.microsoft.com/en-US/library/vstudio/system.timespan.aspx](http://msdn.microsoft.com/en-US/library/vstudio/system.timespan.aspx)

编辑：如果您的问题是关于多重绑定 => [将一个元素绑定到两个来源](https://stackoverflow.com/questions/260439/wpf-bind-an-element-to-two-sources)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T09:11:15.380

将每个日期值转换为 DateTime 对象，然后减去它们，这将创建一个适合您情况的时间跨度对象

```
DateTime receivedDate = new DateTime(year, month, day);
DateTime sendDate = new DateTime(year, month, day);

TimeSpan ts = receivedDate - sendDate; 
```

# c - 如何计算字符串中字符串的出现次数？

> ID：12855515
> 
> 赞同：1
> 
> 时间：2012-10-12T08:57:04.153
> 
> 标签：c, string, pointers, strstr

我必须在更大的字符串中计算特定 C 字符串的出现次数。我正在使用 strstr() 函数在大 C 字符串中使用 char 指针进行计数和前进。问题是它似乎计数得太少，就像文本的减少速度越来越快，跳过了大块的字符。我正在使用一个名为“x”的 int 类型变量来从左到右“减少”文本，但我不知道分配新值是否存在问题。

```
int x=0;
while((p=strstr(text+x,triG))!=NULL)
{
    v[i]++;
    x+=x+3+(p-(text+x));
} 
```

text 是 char* 类型，动态分配。triG 是 char[4] 类型，p 是 char* 类型。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T08:59:53.730

每次比赛后，您都会将 x 的值增加太多。

```
int x=0;
while((p=strstr(text+x,triG))!=NULL)
{
    v[i]++;
    x = p - text + strlen(triG);
} 
```

您还可以简化 的计算`x`。你在添加和删除`x`- 这些抵消了。它的使用也更灵活一些，`strlen(triG)`而不是硬编码假设它总是 4。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T09:05:52.027

你有

```
x+=x+... 
```

你应该有

```
x = x+... 
```

或者

```
x += ... 
```

# java - Java SerialPort 写入将 cpu 使用率提高到 100%

> ID：12855517
> 
> 赞同：1
> 
> 时间：2012-10-12T08:57:07.087
> 
> 标签：java, serial-port, rxtx

我有一个在大约 150 台计算机上运行在 WinXP 上的 Swing GUI 应用程序（每台计算机的配置相同）。

但在其中一些（如 5）上，当应用程序尝试通过 RXTX（pos 打印机）与串行端口通信时，java cpu 使用率上升到近 100%，因此阻塞了整个机器。

此串行端口上的写入是在特定线程中完成的。其中一个看起来像这样：

```
... queries on the hsql database
... writing results in a byte array called "stream"

CommPortIdentifier portId = CommPortIdentifier.getPortIdentifier("COM2");
serialPort = (SerialPort) portId.open("Sending", 2000);
serialPort.setSerialPortParams(9600, SerialPort.DATABITS_8, SerialPort.STOPBITS_1, SerialPort.PARITY_NONE);

OutputStream out = serialPort.getOutputStream();
out.write(stream);
out.close();
serialPort.close(); 
```

在编写之前我首先认为查询存在问题，但我的应用程序在其他线程中执行了很多查询并且没有此类问题。

在这些计算机上，打印时间是可变的（最多 10 分钟，在此期间机器被阻塞）。在其他计算机上，打印在 2 秒内完成，而不会增加 CPU 使用率。

你有什么想法从哪里来的这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T09:01:23.060

建议 检查服务器和工作站允许的波特率 检查发送机器的硬件 RAM 数量 检查 jre 配置面板中允许多少 RAM Java 检查防病毒

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T09:07:50.437

尝试在 Java 发行版（1.6 及更高版本）中包含的[VisualVM](http://visualvm.java.net/)中分析您的应用程序，同时出现高 CPU 使用率。（您可以连接到正在运行的 JVM 对其进行分析。）

这将告诉您哪个函数或库调用正在使用您的 CPU，因此您可以优化或修复您的代码（如果是您的代码导致它）或识别行为异常的库。

在 Debian/Ubuntu 上，您可以从`visualvm`包中获取 VisualVM。`jvisualvm`请注意，无论出于何种原因，运行它的命令都是。

# cakephp - 在 CakePHP 2.2 中使用重定向方法时不传递带有 set 的变量

> ID：12855519
> 
> 赞同：0
> 
> 时间：2012-10-12T08:57:10.630
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.2

有没有办法将变量传递给我要重定向用户的视图？我注意到这不起作用：

```
$this->set('var', 'value')
$this->redirect(array('controller' => 'example', 'action' => 'view', $this->request->data['Post']['id'])); 
```

必须进行重定向。这是从“发布”视图调用的“评论”添加操作。我只希望文本区域在提交之前仍然具有先前输入的文本。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T09:12:27.657

有多种方式，你的不是其中之一。

a) 在 url 中传递值

```
 $this->redirect(array('controller' => 'example', 'action' => 'view', $this->request->data['Post']['id'], 'var' => $value)); 
```

如果您的字符串包含特殊字符等，您需要进行 urlscape 甚至 base64encode

b）将其写入会话并在重定向的控制器操作或视图中读取

c）根据您传递的数据类型，将其存储在其他地方（数据库、缓存、...）。对于较长的内容，上述方法不是一个好的选择。但是，对它的引用，您可以安全地存储在会话中，以便在重定向页面中更轻松地查找。

# intellij-idea - IntelliJ IDEA 中的 SQL 代码辅助

> ID：12855522
> 
> 赞同：1
> 
> 时间：2012-10-12T08:57:16.400
> 
> 标签：intellij-idea

在 IntelliJ IDEA 11.0.1 中，我将数据源连接到 Oracle 数据库。当我打开 *.sql 文件并键入

```
 SELECT * FROM 
```

我在可用表的代码完成列表中看到。所选表的表列在语句的 WHERE 部分中也可用但是当我输入

```
INSERT INTO 
```

代码完成中没有可用的表。SQL 控制台也是如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T10:41:31.653

看起来像一个[已知的错误](http://youtrack.jetbrains.com/issue/IDEA-80264)。它已在[IDEA 12 EAP](http://confluence.jetbrains.net/display/IDEADEV/IDEA+12+EAP)中修复，也将在 IDEA 11.1.4 中修复（在撰写此答案时未发布）。

# html - 自定义形状周围的CSS框阴影？

> ID：12855529
> 
> 赞同：39
> 
> 时间：2012-10-12T08:57:35.497
> 
> 标签：html, css, css-shapes

嘿那里，

我需要创建一个如下所示的 div：

[![截屏](../Images/4b56b33052a72b77b1d732dd1be7e09d.png)](https://i.stack.imgur.com/0xC7c.png)

到目前为止我想出的是：http: [//jsfiddle.net/suamikim/ft33k/](http://jsfiddle.net/suamikim/ft33k/)

```
.bubble {
    position: relative;
    width: 80px;
    height: 160px;
    border: 1px solid #33A7F4;
    border-radius: 9px;
    margin: 100px;
    -webkit-box-shadow: 0px 0px 20px 2px #33A7F4;
    -moz-box-shadow: 0px 0px 20px 2px #33A7F4;
    -ms-box-shadow: 0px 0px 20px 2px #33A7F4;
    -o-box-shadow: 0px 0px 20px 2px #33A7F4;
    box-shadow: 0px 0px 20px 2px #33A7F4;

}

.bubble:after, .bubble:before {
    content: ' ';
    position: absolute;
    width: 0;
    height: 0;
    border: 17px solid transparent;
    right: 100%;
}

.bubble-left:before {
    border-top-color: #33A7F4;
    border-right-color: #33A7F4;
    top: 60px;
}

.bubble-left:after {
    border-width: 16px;
    border-top-color: black;
    border-right-color: black;
    top: 61px;
} 
```

如您所见，“唯一”的问题是气泡尾部周围的盒子阴影（三角形箭头）。

我也尝试过不使用之前和之后的伪类，而是使用第二个 div，它只包含三角形（带有变换、旋转等），但显然这并没有导致我没有成功。

静态图片不是选项，因为矩形本身的大小和尾部的位置都是动态的，并且可以在“运行时”期间更改。

我还想出了一个解决方案，我用动态生成的 svg 创建边框和阴影。如果找不到其他选项，我将坚持使用此解决方案，但感觉就像“黑客”一样强大。我没有在这里发布这个解决方案，因为它涉及 2 个 javascript-framworks（extjs 和 raphael），这个问题应该是关于 html 和 css 的。尽管如此，如果有人对此感兴趣，我仍然可以提供它...

最后一件事：浏览器兼容性并不是什么大问题。如果它在最新版本的大版本中工作（firefox、chrome、opera，即 10，...）一切都很好；）

谢谢，

米克

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-10-12T09:29:03.133

使用投影：

![在此处输入图像描述](../Images/fd2759b824874bdf9871545ee2e8fe46.png)

![在此处输入图像描述](../Images/26cc519cece15b9bdd3439e618bcb2b5.png)

也许[这篇文章（box-shadow-vs-filter-drop-shadow）](http://bricss.net/post/33158273857/box-shadow-vs-filter-drop-shadow)会帮助你

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-12T09:08:26.720

这样做可能不符合您的最佳利益，我会保持原样。

[http://css-tricks.com/triangle-with-shadow/](http://css-tricks.com/triangle-with-shadow/)

您可以跳到“双框方法”，它显示了一种非常手动的方法，使用`:before`and `:after`（您已经用过它来制作气泡）在`transform`. 如果您真的想这样做，您可以将箭头浮动到左侧并通过伪元素应用阴影。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-07-24T04:07:35.517

你应该`filter`在你的 CSS 中使用 from 然后`drop-shadow($yourshadow)`为 value 设置函数。`filter: drop-shadow($yourshadow)`为函数或`shadow: $yourshadow`作为属性编写阴影没有区别。你可以像下面这样写：

```
.shape1, .shape2{
  transform: rotate(35deg);
  background: yellow;
  height: 100px;
  width: 100px;
  display: inline-block;
}

.myshape{
  margin: 30px;
  filter: drop-shadow(4px 4px 10px rgba(0,0,0,0.5));
}
```

```
<div class="myshape">
  <div class="shape1"></div>
  <div class="shape2"></div>
</div>
```

享受...

# c++ - 我什么时候应该在 C++ 中重载 new/delete

> ID：12855531
> 
> 赞同：2
> 
> 时间：2012-10-12T08:57:39.413
> 
> 标签：c++

我在《C++ Primer》中学习了一些关于重载new/delete的知识。但是我很好奇：因为默认的new/delete很好，我应该什么时候重载它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T09:00:40.373

只有当您的班级有特定的内存要求时，您才应该重载它们。例如，如果您想确保所有实例`Foo`都从内存池中分配出来。

除了这类事情之外，很少需要超载它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T09:13:31.623

在类级别，重载它们的通常原因是使用内存池。这通常仅对将动态分配很多的非常小的类有用；例如，图中的节点之类的东西，池分配器可以显着提高局部性和分配/解除分配速度。

您还可以重载全局 new 和 delete 运算符以使用特殊分配器（例如从内存中的特定区域分配）。然而，这可能很棘手，因为无法在删除表达式中指定附加参数。实际上，当您这样做时，您还必须替换非放置 new 和 delete 运算符，并安排新运算符以某种方式存储找到正确删除器所需的信息。

当然，虽然没有重载，但您可以将全局 new 和 delete 操作符替换为用于收集有关分配和删除信息的操作符，用于调试目的（或者因为您有一些自定义放置 new/delete）。

您不应该*对*库中的全局 new/delete 做任何事情。由于您所做的任何事情都需要替换非放置表单，因此在库中执行此操作将存在冲突风险（如果用户还需要在其主应用程序中执行此操作）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T09:05:27.690

此外，如果您创建了一个像[TCMalloc](http://code.google.com/p/gperftools/?redir=1)这样的自定义分配库，并且您希望`new`程序中的所有分配都进入您的库。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T09:08:07.037

[在他们的 folly 库中有一个关于Facebook 的 FBVector](https://github.com/facebook/folly/blob/master/folly/docs/FBVector.md)类型的有趣文档，它解释了为什么他们为向量使用自定义分配器，特别是它允许就地重新分配、优化增长因子以避免 gcc 的分配爬网等等。

一般来说，自己进行分配是个坏主意，因为这是一个复杂的问题，需要做出很多权衡决策。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-12T09:10:11.637

想到的一些用例：

*   正如@Joachim Pileborg 所说，跟踪内存分配和释放。诸如 valgrind 或 address sanitizer 之类的工具可以为您做到这一点，但您自己这样做只允许针对分配的子集，因此对性能的影响较小
*   使用自定义分配机制，例如生成对齐地址（用于 SSE 或其他硬件要求），或在共享内存中分配，或使用内存池，或在特定地址分配以满足低级驱动程序需求
*   使用与编译器/标准库提供的分配算法不同的分配算法。根据您的分配和线程模式，选择适当的分配策略可能会提高性能。

# python - 在 Django 中突出显示下拉菜单

> ID：12855534
> 
> 赞同：0
> 
> 时间：2012-10-12T08:57:47.113
> 
> 标签：python, django

我有一个带有下拉菜单的模板。下拉列表包含几个选项（阅读链接）。When one of them is chosen I want the dropdown to be highlighted. 为此，我想检查请求路径是否是下拉菜单选项之一。

也就是说，我在下拉列表中的链接有 url1、url2、url2，我想在模板中执行此操作：

```
{% if request.path in [url1, url2, url3] %}
    highlight dropdown menu
{% endif %} 
```

解决问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T09:18:27.863

您可以创建[简单的标签](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#simple-tags)并使用它来突出显示下拉列表：

```
@register.simple_tag
def check(url):
    for elem in url_list:
        if elem in url:
            return true
    return false 
```

然后将其应用于您的模板：

```
<select {% if check request.get_full_path %}class="highlighted"{% endif %} >
....
</select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T04:31:38.127

使用 Samuele 的回答，我创建了一个像这样的过滤器：

```
@register.filter
def check(url, url_list, delimeter=","):
    url_list = url_list.split(delimeter)
    for item in url_list:
        if url in item:
            return True
    return False 
```

然后在我的模板中，我使用以下代码：

```
{% if request.path|check:"url1,url2" %}
    # here goes the html code
{% endif %} 
```

# javascript - jQuery Cycle 插件：以恒定速度水平滚动幻灯片，无需缓动

> ID：12855535
> 
> 赞同：1
> 
> 时间：2012-10-12T08:57:51.207
> 
> 标签：javascript, jquery, animation, jquery-cycle, easing

我正在使用[jQuery Cycle 插件](http://jquery.malsup.com/cycle/)。当我`'scrollHorz'`用作属性值时`fx`，幻灯片不是以恒定速度移动，而是以缓动的方式移动（参见[演示](http://jquery.malsup.com/Cycle/scrollhv.html)）。

**如何使幻灯片以恒定速度移动？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T09:01:01.797

只需使用

```
easing: "linear" 
```

你应该没事！例如：

```
$('#s1').cycle({ 
    fx:     'scrollHorz', 
    easing: 'linear',
    prev:   '#prev1', 
    next:   '#next1', 
    timeout: 0 
}); 
```

# hibernate - 从休眠转移到普通 jdbc

> ID：12855536
> 
> 赞同：2
> 
> 时间：2012-10-12T08:57:59.417
> 
> 标签：hibernate, jdbc

我最近开始从事 Java 和 J2EE 方面的工作，并且对与 JDBC 和休眠相关的概念有理论知识。在我的工作中，我的任务是将现有的休眠连接转换为纯 JDBC。任何人都可以提出最简单的方法吗？实际上，我必须处理的所有表都已创建。但我无法找到它们。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T09:02:32.993

您可以使用 Hibernate Mapping 中已有的所有 POJO，并按照一些数据模式（例如[Active Record](http://martinfowler.com/eaaCatalog/activeRecord.html) ）重构它们。

# sql - 如何使用 oracle 将表和数据从一个数据库复制到另一个数据库

> ID：12855541
> 
> 赞同：2
> 
> 时间：2012-10-12T08:58:28.620
> 
> 标签：sql, database, oracle, copy, export

我正在使用 Oracle PL/SQL 开发人员。我有两个实时数据库和虚拟数据库。

我一直在使用虚拟数据库进行开发，现在我需要将所有新表和数据添加到实时数据库中，而不影响当前存储在其中的数据。

我还需要复制所有新的序列和触发器。

我试过导出一个表，但没有运气，使用 SQL 视图我只得到用于创建数据的 SQL，而不是它包含的数据。

我还发现了这个 SQL 代码

```
COPY FROM test@DUMMY - CREATE test -USING SELECT * FROM test; 
```

但它要求我输入一个我不知道的名称和密码，然后在 3 次尝试后失败。然后它继续说还有语法错误。

我对使用 Oracle 还是很陌生，任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T09:10:52.870

尝试：

```
CREATE TABLE NEWTABLE AS SELECT * FROM OLDTABLE; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T09:03:02.900

您可以使用[datapump](http://www.oracle-base.com/articles/10g/oracle-data-pump-10g.php)来做到这一点。

或者如果您想从模式复制到模式

```
create table shecma2.old_table 
as 
select * from schema1.old_table 
```

或使用 oracle sql developer -[这](http://st-curriculum.oracle.com/obe/db/11g/r2/prod/appdev/sqldev/sqldev_adv/sqldev_adv_otn.htm)是链接。

# debugging - Internet Explorer7 发送 2 个请求但 Firefox 和其他只有一个？

> ID：12855544
> 
> 赞同：1
> 
> 时间：2012-10-12T08:58:47.087
> 
> 标签：debugging, firefox, internet-explorer-7, firebug

我正在使用 Internet Explorer 7 和 Firefox/15.0.1。我在 J2EE 中开发了一个 Web 应用程序。
在应用程序中，如果我单击任何超链接，它只会在 Firefox、chrome 中发送一个请求。
我使用 Firebug 和日志检查了它。
与我在 IE7 中测试的方式相同，它显示单个请求的 2 次日志。
这是IE7的错误吗？如何解决？
每次 IE7 发送两个请求.. 有什么工具可以跟踪 HTTP 请求吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-09T07:57:24.890

主要是我正在使用的两种形式的问题......
那是另一种形式的形式。这导致 IE 表现出奇异的行为。
HTML 格式不正确。我改变了它。它按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-06T10:51:20.940

您可以安装 IE Developer Toolbar 在 IE 中调试 JavaScript

# maven - 如何查找具有给定依赖项的所有 pom.xml 文件？

> ID：12855545
> 
> 赞同：0
> 
> 时间：2012-10-12T08:58:54.410
> 
> 标签：maven, dependencies, pom.xml

我在 svn 中有多个带有多个子模块的项目，我想找到所有在 groupId::artifactId:version 方面具有给定依赖关系的工件/pom。

也许那里有一个插件？或者，对于 eks，也许我必须自己实现它。在 perl 中？

# c# - 如何在 asp:literal 中包含引号、< 和 > 符号

> ID：12855548
> 
> 赞同：0
> 
> 时间：2012-10-12T08:59:04.557
> 
> 标签：c#, asp.net, html

希望从上面的主题行中几乎可以清楚地看到

我想在我的 asp:literal中包含一个**小于（和大于）的符号**

显示类似的东西

```
Select <Download> 
```

我试过用这个

```
<asp:Literal ID="LiteralDownload" runat="server" 
Text="Select &lt; Download &gt;"/> 
```

但是 ASP.NET 页面不显示文本

任何想法/帮助？

瓦察

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T09:06:10.093

您应该将 [`LiteraControl`的 Mode 属性设置为`PassThrough`.

默认为`Transform`: 解释为 html 并且不显示

```
ltlMetaHolder.Mode = LiteralMode.PassThrough 
```

或根据 OP 在这种情况下的评论

```
ltlMetaHolder.Mode = LiteralMode.Encode 
```

# jquery - 无限滚动 andersonferminiano.com

> ID：12855550
> 
> 赞同：1
> 
> 时间：2012-10-12T08:59:11.000
> 
> 标签：jquery, ajax, scroll

我正在使用此脚本[http://andersonferminiano.com/jqueryscrollpagination/](http://andersonferminiano.com/jqueryscrollpagination/) 但我有一个问题，该脚本仅在 IE 中无法在 Chrome 中运行

任何人都可以帮助我或建议我另一个无限滚动脚本吗？我将它与 php 和 mysql 一起使用。

提前致谢！乔治

# html - 灰色透明不可点击后屏

> ID：12855555
> 
> 赞同：0
> 
> 时间：2012-10-12T08:59:29.967
> 
> 标签：html, css, background

我正在尝试在原始 html 页面的顶部创建一个灰色透明背景屏幕。到目前为止，我所做的是使用这种 css 样式将一个 div（使用 jquery）附加到 body 标签：

```
.spesificPropertiesDiv {
position: absolute;
display: block;
top: 0px;
width: 100%;
height: 100%;
background-color: black;
opacity: 0.5;
z-index: 6000;
text-align: center;
} 
```

正如我之前提到的，我将一个带有此类的 div 附加到正文中。当我将它附加到大屏幕（24 英寸）上时，每个都可以正常工作，但是当我将它附加到 16 英寸显示器上时，灰屏 div 的高度比主体高度小 100 像素。我需要提到的另一件事是，在大屏幕上，页面适合屏幕，而在较小的屏幕上，会出现滚动条以使页面的下侧可见。
为什么会发生这种情况？我该如何解决？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T09:30:18.763

我已将其更改为：

```
.spesificPropertiesDiv{
    display: block;
    position: fixed; 
    top: 0; bottom: 0; left: 0; right: 0;
    width: 100%;
    height: 100%;
    background-color: black;
    opacity: 0.5;
    z-index: 6000;
    text-align: center;
} 
```

它有效！！！！谢谢大家的帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T09:01:01.267

你能试试：

```
.spesificPropertiesDiv {
    position: fixed; *position: absolute;
    top: 0; bottom: 0; left: 0; right: 0;
} 
```

另外，这个 div 上是否有任何填充？`<body>`它是标签的直接子代吗？：

```
<body>
    <div class="spesificPropertiesDiv"></div>
</body> 
```

# php - 代码设计和结构

> ID：12855556
> 
> 赞同：6
> 
> 时间：2012-10-12T08:59:30.920
> 
> 标签：php

最近有人强调（在我之前的问题中）我设计 Web 应用程序的方式并不理想。

考虑以下。我正在一个多用户网站上工作，其中包含许多不同的部分，包括个人资料和论坛以及支持票。结构如下：

*包含*所有其他页面的主页或 *required_once* 我们将其称为**home.php。**

在**home.php**中，首先加载的东西之一是**router.php**，它处理用户可能产生的每一个 $_GET 和 $_POST，并且每个表单和进程都通过一个名为 $data_process 的主变量进行排序。Router.php 本质上只是 $data_process 的一个巨大的**switch()**语句。这会解析所有数据并给出结果。

接下来是**header.php**，它不仅会处理将要加载的页面的必要变量，还会设置标题并准确决定将在那里显示的内容，例如菜单、用户信息和有关页面的信息当前查看（即主页 > 支持 > 查看工单）。

然后根据 $page 变量加载页面。一个简单的包含。

然后footer.php，然后关闭。

这样就创建了动态网站。一位名叫@HorusKol 的用户告诉我这是不好的做法。我对这个网站非常满意，因为它是我用过的最精简、最容易编写的网站。如果这仍然是糟糕的代码设计？什么是完美的代码设计？

PS - 任何人都可以为我推荐任何解释 PHP、MySQL 和设计结构的好书吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T09:10:27.883

*   这是一个糟糕的设计，因为您处理了很多可能在其余过程中不需要的数据。路由器应该只处理 url，post 数据的处理在其他地方处理。只包括你需要的东西，包括一切都会让事情变慢。
*   更好的方法是在不同的部分更多地构建您的应用程序。处理 url 的路由器，基于路由请求运行操作的控制器，处理所有 html 和页面的视图，访问数据的模型。MVC 是我想到的。
*   没有完美的代码设计。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T11:13:02.063

“好的设计”没有规范的定义——你能希望的最好的就是你的设计以最佳方式平衡项目上的各种力量，你的项目上的力量可能是可维护性、性能、可伸缩性、可扩展性——经典的非功能性要求 - 还包括搜索引擎优化、标准合规性和可访问性（尤其适用于 Web 项目）。

如果您所有的 URL 都是“www.mysite.com/home.php?action=getDetails&productID=123”的形式，那么您的搜索引擎友好度很低。最好有语义 URL - “www.mysite.com/products/DesktopPc/details.php”。您可以通过在当前设计中使用狡猾的 .htaccess 技巧来实现这一点。

从可维护性的角度来看，您的设计存在一些问题。如果我理解正确的话，向站点添加一个新页面需要你修改几个不同源文件中的代码——router.php（你的巨大 switch 语句）、页面本身，可能还有 header.php。这表明代码是紧[耦合的](http://en.wikipedia.org/wiki/Coupling_%28computer_programming%29). 修改巨大的 switch 语句听起来可能是有趣的错误的来源，路由器和标题的组合、操作变量以及实际页面本身似乎有点脆弱。如果您是该项目的唯一工作人员，这没关系，并且您将长期存在；如果不是这种情况，最好使用现成的框架（MVC 是当前最受欢迎的；Zend、Symphony 和 Cake 在 PHP 中都做得很好），因为您可以将新开发人员指向文档并期望他们获得加快速度。

可维护性的最大敌人之一是复杂性——复杂的代码更难处理，并且包含更多的错误。有一个复杂性的[正式指标](http://en.wikipedia.org/wiki/Cyclomatic_complexity)，我很确定您的 switch 语句在该指标上得分非常高 - 本身不一定是一个大问题，但绝对值得关注。许多 MVC 框架通过将路由定义为数据而不是代码（即在配置文件中具有路由）和/或通过使用约定优于配置（即如果请求是针对页面“productDetails”，则包含该文件来避免这种情况“/inc/productDetails.inc”）。

可扩展性可能是另一个问题——想象一下必须将您的网站内容公开为 JSON 或 XML 以及 HTML；在您当前的设计中，这将需要进行大量更改，因为页面处理管道中的每个项目都关心并且需要知道。home.php 需要知道不发送 HTML，页眉和页脚需要知道，路由器需要了解如何处理额外的数据类型，几乎可以肯定会使 switch 语句更大。这又可能没什么大不了的。

能够对代码进行单元测试有助于提高可扩展性和可维护性。测试驱动开发本身将其变成了一个完整的例程；我猜测试你的应用程序很难——但这只是一个猜测；它更多地取决于您如何考虑单个代码块而不是您上面描述的内容。然而，MVC 的另一个好处是它可以很容易地为系统的关键部分编写单元测试。

因此，如果您的项目中的力量不包括对可维护性或可扩展性的强调，并且您可以处理 SEO 方面，我认为您的设计不一定是“坏的”；即使您确实关心这些事情，您也可以做其他事情来适应这些力量 - 编写文档，雇用许多廉价的编码人员。

了解这些设计主题的最佳方法不是关于 PHP 或 MySQL 的书籍；而是 我推荐 Martin Fowler 的“重构”和“企业应用程序架构的模式”，Gamma 等人的“设计模式”。和 McConnell 的 Code Complete（虽然现在有点过时了）。

# javascript - 静态 javascript 成员

> ID：12855561
> 
> 赞同：0
> 
> 时间：2012-10-12T08:59:46.483
> 
> 标签：javascript, prototype

我一直在使用它作为如何为我的对象声明静态成员的一个非常好的解决方法，但我真的不明白为什么它们会变成静态，所以我需要有人向我解释以下行为。

我有以下声明：

```
// Primitive so nothing interesting here
Array.prototype.someMember = "My value is not static";
// Object containing a primitive, now this is the deal
Array.prototype.someOtherMember = {
    value: "My value is static"
};

Array.prototype.changeMember = function (newValue) {
    // Change the primitive value
    this.someMember = newValue;
    // Change the primitive value inside the object
    this.someOtherMember.value = newValue;
}; 
```

如果这是通过以下方式测试的：

```
var arr1 = [], arr2 = [], arr3 = [];
arr1.changeMember('I changed');
alert(arr1.someMember + ', ' + arr2.someMember + ', ' + arr3.someMember);
alert(arr1.someOtherMember.value + ', ' + arr2.someOtherMember.value + ', ' + arr3.someOtherMember.value); 
```

结果是：

> 我变了，我的价值不是静态的，我的价值不是静态的
> 
> 我变了，我变了，我变了

`changeMember`现在，如果我在这样的方法中重新分配整个对象：

```
Array.prototype.changeMember = function (newValue) {
    // Change the primitive value
    this.someMember = newValue;
    // Change the object
    this.someOtherMember = { value: newValue };
}; 
```

Then`someOtherMember`不再是静态的，而是 Array 的第一个实例拥有它自己的。我不明白这种行为，因为毕竟我在这两种情况下都`someOtherMember`通过访问`this`，所以我无法弄清楚为什么它在第一种情况下是静态的，而在第二种情况下它不是静态的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T09:13:29.380

JS 中没有静态属性之类的东西。您看到的是原型继承的正常行为。关键概念是这样的：*数组，实际上所有对象，都是稀疏*的 一个实例没有属性，除非它被显式分配给该实例。只要不发生这种情况，原型就拥有所有属性：

*第一种情况*
你为什么看到`I changed, My value is not static, My value is not static`？很简单：当数组被实例化时，所有的实例*看起来都会*有一个名为 的属性`someMember`，但实际上并没有。当您尝试访问时，`anArray.someMember`JS 将首先扫描该属性的实例，如果该实例没有定义该属性，则 JS 将转向原型并在`someMember`那里寻找。在您的代码段中，该`changeMember`方法使用`this`, 来引用调用该方法的实例，而不是`Object.getPrototypeOf(this).someMember`. 后者是在原型级别更改属性的方式。简而言之：

```
arr1.changeMember('I changed');
// is the same as doing:
arr1.someMember = 'I changed';
arr1.someOtherMember.value = 'I changed'; 
```

赋值`someMember`是一个简单的赋值，设置一个实例的属性。

*第二种情况*
第二个赋值是重新赋值一个对象的属性，*它*被`Array.prototype.someOtherMember`. 对对象字面量的*引用*不会改变，只会改变对象本身。就像在任何其他语言中一样：在处理引用时，对象可以随心所欲地改变，引用将保持不变（它的值可能会改变，但它的内存地址不会改变）。
当您重新定义将`changeMember`新的*Object 文字*重新分配给属性的方法时，您实际上是在创建与案例一相同的情况：直接将新对象分配给属性，这导致 JS*不*扫描原型，而只是在实例级别分配属性。你*可以*使用`Object.getPrototypeOf(this)`or （对于旧版浏览器）`this.prototype`：

```
Array.prototype.changeMember = function (val)
{
    this.someMember = 'I changed At instance level';
    Object.getPrototypeOf(this).someMember = 'Reassing prototype property to '+ val;
    Object.getPrototypeOf(this).someOtherMember = {value:val};//changes proto only
}; 
```

话虽如此，如果您想要静态属性之类的东西，最好使用`Object.defineProperty`：

```
Object.defineProperty(Array.prototype,'sortofStatic',{value:'I cannot be changed',writable:false,configurable:false}); 
```

[可以在 MDN 上找到](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty)更多示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T09:09:21.670

在 someOtherMember 中，一个 Object 实例在 Array 的所有实例之间共享。

在第一种情况下，您正在更改该对象的值，因此 Array 的所有实例的值都会更改。

在第二种情况下，您正在更改对象本身。所以一个数组的实例将包含另一个对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T09:09:47.300

第一种情况很好理解。

第二种情况（`someOtherMember`不是静态成员），您`someOtherMember`每次调用时都会覆盖`changeMember`（删除静态成员`value`）因此不再存在静态成员。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T09:22:05.630

```
Array.prototype.someMember = "My value is not static";

// Here `someOtherMember` is simply a property which points to a memory location
// So initially it will point to the same memory location for all instances of `Array`
Array.prototype.someOtherMember = {
    value: "My value is static"
};

Array.prototype.changeMember = function (newValue) {

    this.someMember = newValue;

    // Here we change a value stored in the memory location pointed by `someOtherMember`
    // As all instances point to the same memory location this change will reflect in all instances
    this.someOtherMember.value = newValue;
};

Array.prototype.changeMember = function (newValue) {

    this.someMember = newValue;

    // Here for this particular instance we make `someOtherMember` point to a new memory location.
    // All instances will point to the old memory location until `changeMember` is invoked.
    this.someOtherMember = { value: newValue };
}; 
```

# c++ - Istringstream 不会“走”过这条线

> ID：12855568
> 
> 赞同：0
> 
> 时间：2012-10-12T09:00:13.900
> 
> 标签：c++, visual-studio-2010, stringstream, istringstream

我正在尝试以下列方式读取存储特征向量的特征向量文件：

> (标签) (bin):(value) (bin):(value) 等

像：

> -1 5：0.015748 6：0.0393701 8：0.0393702 12：0.0.09448811：0.09448214：0.09448212：0.09448812：0.094488

如您所见，它保存时没有值为 0 的 bin。

我尝试使用以下代码阅读它们：

```
int bin;
int label;
float value;
string small_char; -> change to char small_char to fix the problem

if(readFile.is_open())
  while(!readFile.eof()) {
    getline(readFile, line);
    istringstream stm(line);
    stm >> label;
    cout << label << endl;
    while(stm) {
          stm >> bin;
          stm >> small_char;
          stm >> value;
          cout << bin << small_char << value << endl;
    }
    cout << "Press ENTER to continue...";
    cin.ignore( numeric_limits<streamsize>::max(), '\n' );
  } 
} 
```

但由于未知原因，标签被正确读取，第一个带有值的 bin 也是如此，但以下 bin 根本没有被读取。

上面示例行的输出是：

```
-1
5:0.015748
5:0.015748
Press ENTER to continue 
```

接下来的所有行都会发生同样的事情。

我正在使用visual studio 10，如果这很重要的话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T10:06:29.473

经过自己测试，您似乎没有使用正确的类型（以及正确的循环条件）。

我的测试程序：

```
#include <sstream>
#include <iostream>

int main()
{
    std::istringstream is("-1 5:0.015748 6:0.0472441 7:0.0393701 8:0.00787402 12:0.0314961 13:0.0944882 14:0.110236 15:0.0472441 20:0.023622 21:0.102362 22:0.110236 28:0.015748 29:0.228346 30:0.125984");

    int label;
    int bin;
    char small;
    double value;

    is >> label;
    std::cout << label << '\n';
    while (is >> bin >> small >> value)
    {
        std::cout << bin << small << value << '\n';
    }
} 
```

该程序的输出是：

```
-1
5:0.015748
6:0.0472441
7:0.0393701
8:0.00787402
12:0.0314961
13:0.0944882
14:0.110236
15:0.0472441
20:0.023622
21:0.102362
22:0.110236
28:0.015748
29:0.228346
30:0.125984

```

因此，请确保变量类型正确，并更改循环以不得到双尾行。

# c++ - 使用 Microsoft Visual Studio 2010 IDE 进行精确的库链接顺序控制

> ID：12855569
> 
> 赞同：1
> 
> 时间：2012-10-12T09:00:17.910
> 
> 标签：c++, c, linker, ide

对于客户端，我尝试在 Visual Studio 2010 IDE 中重新创建基于命令行的构建工具。从项目中编译库，包括我已经确定的 C/C++ 源文件，链接命令行让我很伤心，因为只有当库的给出顺序与命令行工具完全相同时，可执行文件才能正确链接。

命令行是这样的：

```
link.exe -subsystem:console -machine:I386 -verbose:lib 
-nodefaultlib:libc.lib -nodefaultlib:libcd.lib -nodefaultlib:libcmt.lib -nodefaultlib:libcmtd.lib 
-DEBUG 
-out:myout.exe 
-pdb:myout.pdb 
-libpath:../../path/to/libs
libcmtd.lib kernel32.lib user32.lib ws2_32.lib netapi32.lib comctl32.lib gdi32.lib comdlg32.lib advapi32.lib winmm.lib imagehlp.lib shell32.lib  
x_mylib.lib a_mylib.lib y_mylib3.lib z_my.lib  etc.... 
```

如果 IDE 编译的 .libs 与此命令行链接，则 .exe 是正确的，但是我无法让 IDE 精确链接到这个 .lib 顺序 - 它坚持按字母顺序对所有库进行排序和链接。

有什么想法吗？ *避免陷入关于这一切意义的哲学辩论的诱惑，我无法更改基于命令行的构建工具*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T07:19:37.157

所以，在摆弄了一个这样的答案之后......

如上所述，解决方案中有一些项目链接到其相应的静态库：

`a_mylib.vcxproj b_mylib.vcxproj ... x_mylib.vcxproj y_mylib.vcxproj z_mylib.vcxproj`

添加另一个没有源文件但包含以上所有依赖项的静态库项目`my_libs.vcxproj`使得整个源代码易于构建。最后`my_exe.vcxproj`添加可执行文件，其中仅包含 my_libs 作为依赖项，所有 ?_mylib.libs 作为特定链接器输入，按所需顺序。

当你知道怎么做时很容易。

# azure - Azure 服务总线速度

> ID：12855570
> 
> 赞同：6
> 
> 时间：2012-10-12T09:00:18.520
> 
> 标签：azure, servicebus, azureservicebus

当我尝试从一个简单的控制台应用程序（非调试模式）向我的 Azure 服务总线队列发送 1000 条简单消息时，使用 http 模式需要 90 秒。

使用标准 nettcp 模式需要 70 秒。

其他人的速度也一样吗？我预计它会更快，但也许这是正确的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T09:07:21.633

您是否在同一个线程中执行所有这些操作？尝试使用多个线程/任务并行提交消息。此外，如果您想要更高的吞吐量，您可以尝试对您的 app.config 进行一些更改：

```
 <system.net>
    <settings>
      <servicePointManager expect100Continue="false" useNagleAlgorithm="false"/>
    </settings>
    <connectionManagement>
      <add address = "*" maxconnection = "48" />
    </connectionManagement>
  </system.net> 
```

最后，尝试从 Windows Azure VM（最好是同一个数据中心）中执行控制台应用程序。这将排除您的 WAN 连接的任何影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-07T19:20:03.287

还要看看利用批量发送方法。Azure SDK 在服务总线客户端队列上有一个方法，允许您一次发送一批消息。它以更大的调用为代价减少了总网络开销。您可以将批处理大小调整为适合您的最大值，并将消息排队，直到您填满批处理或达到特定超时。这使您可以进行批处理，但仍然可以在合理的时间内做出响应。

# data-binding - swt/jface 数据绑定：PojoProperties 与 PojoObservable

> ID：12855573
> 
> 赞同：5
> 
> 时间：2012-10-12T09:00:35.287
> 
> 标签：data-binding, jface, eclipse-databinding

我正在编写一个 JFace 对话框，并且我想对模型对象使用数据。

查看代码我可以看到有时我发现一个`PojoProperties`用于构建绑定，而其他时候它被用于一个`PojoObservables`.

查看Javadoc，我可以阅读：

**PojoObservables**：为 POJO（普通的旧 java 对象）创建***可观察对象***的工厂，符合带有 getter 和 setter 的对象的概念，但不提供更改时的属性更改事件。

**PojoProperties**：为 POJO（普通的旧 Java 对象）创建***属性***的工厂，符合具有 getter 和 setter 的对象的概念，但不提供更改时的属性更改事件。

同样的问题适用于**BeansObservables**和**BeansProperties之间存在的差异**

（明显的）区别似乎是 observable 允许观察对象，而 properties 允许观察属性，但是由于 Pojo 的数据有一个 getter 和一个 setter，它们之间有什么区别？我应该为我的对话选择哪一个？

下面是一段代码摘录：

**POJO：**

```
public class DataObject {
  private String m_value;
  public String getValue() {
    return m_value;
  }
  public void setValue(String i_value) {
    m_value = i_value;
  }
} 
```

**DIALOG（相关部分）：**

```
@Override
protected Control createDialogArea(Composite parent) {
    Composite container = (Composite) super.createDialogArea(parent);

    m_combo = new Combo(container, SWT.BORDER);
    m_comboViewer = new ComboViewer(container, SWT.NONE);

} 
```

**BINDING（相关部分）：**

```
 // using PojoObservable
    IObservableValue observeValue = PojoObservables.observeValue(m_dataObject, "value");
    IObservableValue observeWidget = SWTObservables.observeSelection(m_combo);

    // using PojoProperties
    IObservableValue observeValue = PojoProperties.value("value").observe(m_dataObject);
    IObservableValue observeWidget = ViewerProperties.singleSelection().observe(m_comboViewer); 
```

我知道有一次我使用的是组合，而另一次我使用的是`ComboViewer`，但是如果需要，我可以从查看器中获取组合并以另一种方式绑定...

另外，我可以将两者混合使用吗，例如将`observeValue`与 一起使用`ViewerProperties`？

```
 IObservableValue observeValue = PojoObservables.observeValue(m_dataObject, "value");
    IObservableValue observeWidget = ViewerProperties.singleSelection().observe(m_comboViewer); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T12:33:38.877

我在玩 JFace 查看器（尤其是 ComboViewer）和数据绑定，发现如果我使用

```
SWTObservables.observeSelection(comboViewer.getCombo()); 
```

然后数据绑定无法正常工作。

但是，如果我使用

```
ViewersObservables.observeSingleSelection(comboViewer); 
```

然后一切都按预期工作。

也许这对我来说是一个特殊的案例，所以为了更好地了解它，我将在下面的段落中描述我的设置。

我有`modelObject`一个名为`selectedEntity`and的字段，`entities`并将其绑定`ComboViewer`到`modelObject`.

*   我想在模型对象中显示所有“实体”，如果我将任何实体添加到`modelObject.entities`集合中，那么我希望这个实体自动添加到组合中。
*   如果用户选择组合中的某些项目，我想`modelObject.selectedEntity`自动设置。
*   如果我设置`modelObject.selectedEntity`我想自动设置组合选择。

源代码可以在：[https ://gist.github.com/3938502](https://gist.github.com/3938502)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-18T10:26:15.750

自 Eclipse Mars 以来，PojoObservables 被 PojoProperties 弃用，而 BeansObservables 被 BeanProperties 弃用，因此现在应该使用哪个答案已经很明显了。

# tridion - 在 SDL Tridion 2011 SP1 中使用 DCP 执行页面

> ID：12855576
> 
> 赞同：1
> 
> 时间：2012-10-12T09:00:51.890
> 
> 标签：tridion, tridion-2011, tridion-content-delivery

我已经发布了一个带有 DCP 的 ASPX 页面。

```
 <html>
    <head>
    </head>
    <body>
         <tridion:ComponentPresentation runat="server" PageURI="tcm:9-5251-64" ComponentURI="tcm:9-5245" TemplateURI="tcm:9-5247-32"/> 
    </body>
    </html> 
```

执行此页面的方法是什么，以便它呈现 DCP。

我刚刚尝试通过 IIS 浏览此页面，但出现解析器错误。

```
Unknown server tag 'tridion:ComponentPresentation' 
```

如果有人可以指导我运行此页面，那就太好了。

提前致谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-12T09:09:26.480

确保您在**web.config**和**Tridion.ContentDelivery** dll 在 bin中有以下标记

```
 <configuration>
<system.web>
    <pages>
        <controls>
            <add tagPrefix="tridion" 
     namespace="Tridion.ContentDelivery.Web.UI"
     assembly="Tridion.ContentDelivery" />
        </controls>
    </pages>
</system.web> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T09:12:43.710

您需要为您的 .NET Web 应用程序安装“API 服务器角色”：

[http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/task_FF19F86A63E246F793D64495849EDEDF](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/task_FF19F86A63E246F793D64495849EDEDF)

（需要用户名/密码）

# c# - C# System.Numerics.BigInteger 幅度估计

> ID：12855579
> 
> 赞同：1
> 
> 时间：2012-10-12T09:00:55.540
> 
> 标签：c#, biginteger

我目前正在使用以下方法来获得 BigInteger 的幅度估计。我很想知道是否有人可以建议一种不需要使用 BigInteger.ToByteArray(); 的方法

```
 public static long MagnitudeEstimate(BigInteger value)
 {

     byte[] array = value.ToByteArray();

     if (array.Length == 0 || (array.Length == 1 && (array[0] == 0 || array[0] == 1)))
         return 0;
     else
         return (long)(array.Length * 2.408239965);
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T09:13:27.783

转换为双倍并取对数似乎是一种简单的方法。

```
Math.Log10((double)bigInt) 
```

或者只是内置的

```
BigInteger.Log10(bigInt) 
```

我没有对它进行基准测试，所以我不知道它有多快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T09:51:47.170

一个*骇人听闻*的解决方案。我不会用这个。

```
BigInteger bi = new BigInteger(long.MaxValue);

var fieldInfo = typeof(BigInteger).GetField("_bits", BindingFlags.Instance | BindingFlags.NonPublic);

var arr = (uint[])fieldInfo.GetValue(bi);
var size =  arr.Length * sizeof(uint); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T11:27:47.030

结合我的原始版本和 LB 的版本，我确定了以下内容。虽然它并不比我的原始版本快，但它更准确。

非常感谢大家的意见。

```
public static long MagnitudeEstimate(BigInteger value)
{
      var fieldInfo = typeof(BigInteger).GetField("_bits", BindingFlags.Instance | BindingFlags.NonPublic);
      var arr = (uint[])fieldInfo.GetValue(value);
      if (arr != null)
      {
            int totalNumBytes = arr.Length * sizeof(uint);
            int zeroBytes = 0;
            for (int i = arr.Length - 1; i >= 0; i--)
            {
                  if (arr[i] == 0)
                  {
                        zeroBytes += 4;
                        continue;
                  }
                  else if (arr[i] <= 0xFF)
                        zeroBytes += 3;
                  else if (arr[i] <= 0xFFFF)
                        zeroBytes += 2;
                  else if (arr[i] <= 0xFFFFFF)
                        zeroBytes += 1;

                  break;
            }

            return (long)((totalNumBytes - zeroBytes) * 2.408239965);
      }
      else return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-15T19:08:24.163

从 .NET Core 2.1 开始，有一个[新的 API：](https://docs.microsoft.com/en-us/dotnet/api/system.numerics.biginteger.getbytecount?view=netcore-2.1) `public int GetByteCount (bool isUnsigned = false);`

它不会复制任何内容，并且可以非常精确地估计您的数量。

# java - 跟踪多个 java 应用程序资源分配

> ID：12855580
> 
> 赞同：0
> 
> 时间：2012-10-12T09:00:57.867
> 
> 标签：java, memory, jvm, process-monitoring

你能给我推荐一个工具来监控在 Windows 7 机器上运行的多个 java 进程吗？

更具体地说，我有 10 个使用默认 JVM 设置运行的类似应用程序。随着时间的推移，我需要有关内存分配的信息，以识别可能的内存泄漏并在需要时在某处调整更多资源。

一些带有日志和图表的免费工具将是完美的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T09:05:02.490

[标准 JVM JVisualVM](http://docs.oracle.com/javase/6/docs/technotes/tools/share/jvisualvm.html)或[VisualVM](http://visualvm.java.net/)怎么样

# ruby-on-rails-3 - cancan 的 current_ability 方法是否为每个 can 方法调用？

> ID：12855581
> 
> 赞同：2
> 
> 时间：2012-10-12T09:00:58.287
> 
> 标签：ruby-on-rails-3, cancan

我正在使用带有 cancan 1.6.7 和设备 1.4.8 的 Rails 3.0.9

我有一个疑问，罐头/罐头吗？/不能/不能？方法调用 current_ability 方法，因为

我刚刚在应用程序控制器中编写了 current_ability 方法，它覆盖了 cancan 的 current_ability 方法

在 application_controller.rb

```
 def current_ability
      if current_user.kind_of(User)
        @current_ability ||= UserAbility.new(current_user)
      else
        @current_ability ||= AdminAbility.new(current_admin)
      end
    end 
```

发现，这个方法每页请求调用44次

登录后加载的索引页包含 35 个菜单项（使用 can? 方法加载）和具有 3 个操作的内容（使用 can? 方法加载） 为什么调用 current_ability 方法 44 次？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T06:02:35.747

是的。每个`can?` `cannot?`和`authorize!`调用`current_ability`方法（参见：[CanCan 的 controller_additions.rb](https://github.com/ryanb/cancan/blob/master/lib/cancan/controller_additions.rb#L374)）

另外，我不会担心 44 次调用`current_ability`. 您只需为每个请求创建一个 Ability 对象，因为您在控制器上使用实例变量和`||=`操作员（即 memoization）。这对性能影响不大。

*例如，让我们做一个快速的基准测试来获取相同的缓存对象 100,000 次......*

```
require "benchmark"

def cached_object
  @foo ||= String.new('foobar')
end

cached_object.object_id.to_s(16)   # => 3ffc5cc53cb0
cached_object.object_id.to_s(16)   # => 3ffc5cc53cb0 (same object is returned)

Benchmark.bm(7) do |b|
  b.report("Cached Object") { 100000.times {cached_object}}
end

#               user     system   total     real
# Cached Object 0.010000 0.000000 0.010000 (0.017291) 
```

# php - 如何检查日期是否在今天前三天

> ID：12855585
> 
> 赞同：5
> 
> 时间：2012-10-12T09:01:00.610
> 
> 标签：php, date, datetime

嘿，我想知道是否有任何脚本（php）可以检查今天前三天是否指定日期。

说..

```
$d1 = date("Y-m-d", filemtime($testfile));
$d2 = date("Y-m-d"); 
```

现在我想知道如何比较这两个日期以检查 d1 是否至少在 3 天前或在 d2 之前，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-12T09:08:36.473

为什么不使用 DateTime 对象。

```
 $d1 = new DateTime(date('Y-m-d',filemtime($testfile));
 $d2 = new DateTime(date('Y-m-d'));
 $interval = $d1->diff($d2);
 $diff = $interval->format('%a');
 if($diff>3){
 }
 else {
 } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T09:02:49.313

假设您希望测试文件是否在三天前被修改：

```
if (filemtime($testfile) < strtotime('-3 days')) {
   // file modification time is more than three days ago
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-12T09:03:52.000

只需使用时间戳检查它：

```
if (time() - filemtime($testfile) >= 3 * 86400) {
  // ...
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T09:05:36.723

用于`date("Y-m-d", strtotime("-3 day"));`特定日期

你也可以使用

```
strtotime(date("Y-m-d", strtotime("-3 day"))); 
```

在比较日期字符串之前将其转换为整数

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-12T09:43:41.453

好吧，惊讶地发现没有人使用 mktime() 函数，它使工作变得简单

例如您的输入日期是：10/10/2012

mktime 将其转换为 unix 时间戳

```
$check_date=mktime(0,0,0,10,**10+3**,2012); 
```

我们可以执行任何操作天气+，-，*，/

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-12T09:03:37.020

使用时间戳而不是日期，

```
$d1 = filemtime($testfile);
$now = time();
if ($now - $d1 > 3600*24*3) {
  ..
} 
```

# python - 在 python 中，如何将特定本地时间（不是我的本地时间）的日期时间转换为 UTC

> ID：12855586
> 
> 赞同：3
> 
> 时间：2012-10-12T09:01:02.683
> 
> 标签：python, datetime

我正在从伦敦的服务中提取数据，他们在伦敦当地时间为我提供日期和时间信息。所以冬季为 UTC，夏季为 BST(UTC+1)。

在内部，我们对所有内容都使用 UTC，在 Python 中，我如何以一种考虑夏令时的方式将伦敦的东西转换为 UTC？

我很欣赏 DST 翻转的某些时候是模棱两可的，只要它在今年剩下的时间里有效，这是可以接受的。

为了完整起见，我从他们那里得到以下信息：

```
dt="2012-10-12T19:30:00"
lcnid="LDN"
locale="en-gb" 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-12T09:09:15.723

您需要使用时区对象；由于数据变化太频繁，这些并不随 Python 本身提供。该[`pytz`库](http://pytz.sourceforge.net/)很容易安装。

转换示例：

```
>>> import pytz
>>> import datetime
>>> bst = pytz.timezone('Europe/London')
>>> dt = datetime.datetime.strptime('2012-10-12T19:30:00', '%Y-%m-%dT%H:%M:%S')
>>> dt
datetime.datetime(2012, 10, 12, 19, 30)
>>> bst.localize(dt)
datetime.datetime(2012, 10, 12, 19, 30, tzinfo=<DstTzInfo 'Europe/London' BST+1:00:00 DST>)
>>> bst.localize(dt).astimezone(pytz.utc)
datetime.datetime(2012, 10, 12, 18, 30, tzinfo=<UTC>) 
```

# c# - 登录表单和会话

> ID：12855590
> 
> 赞同：0
> 
> 时间：2012-10-12T09:01:27.633
> 
> 标签：c#, asp.net, session, login

我有一个登录表单，其中包含两个框和 buttonclick 上的按钮我使用 sql 数据库验证用户并将 id 存储在会话中并设置 FormsAuthentication 以供以后使用。在注销按钮上，我将它们重定向到 logout.aspx，我在其中销毁会话并重定向到登录页面：

```
 Session.Abandon();
 FormsAuthentication.SignOut(); 
```

现在注销后，如果我使用浏览器后退按钮返回，我仍然可以看到我的上一个页面，但如果我刷新我得到`object reference not set to an instance of an object.`

```
protected void Page_Load(object sender, EventArgs e)
Line 33:         {
Line 34:             string id = Session["ID"].ToString(); 
```

如果发生这种情况，最好的解决方法是让用户重新登录？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T09:07:03.777

注意：我建议你使用

```
if(Session["ID"] != null)
{

} 
```

但我也建议你使用这个`configuration`

```
<system.web>
  <authentication mode="Forms">
    <forms loginUrl="Login.aspx"
           defaultUrl="default.aspx" />
  </authentication>
</system.web> 
```

您的注销链接/按钮应指向包含此代码的页面，以及您想要的任何其他内容。

```
private void Page_Load(object sender, System.EventArgs e)
{
    // Put user code to initialize the page here
    Session.Abandon();
    FormsAuthentication.SignOut();
} 
```

注：时序图

![在此处输入图像描述](../Images/1e958c2df4dba0abd3a0af397d40f73f.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T09:04:46.920

您应该首先检查`Session["ID"] != null` 用户是否未通过身份验证。

但是如果你使用 FormsAuthentication 你也可以使用`User.Identity.IsAuthenticated`

# emacs - org 模式重新文件错误

> ID：12855595
> 
> 赞同：3
> 
> 时间：2012-10-12T09:01:45.823
> 
> 标签：emacs, org-mode, bookmarks

一段时间以来（但我没有更改 .emacs 中的任何内容），我对 emacs 的行为有一些错误：

*   记住模式不会杀死“Ctl-C Ctl-C”上的临时缓冲区
*   Orgmode 不会重新提交任何条目

两个操作都抱怨错误“不是书签格式”

我恢复了一个旧的 .emacs 以确保我没有搞砸它，但错误仍然存​​在。

我在哪里可以调查以找出问题？

自 8 月底以来，我拥有 Emacs 24.2.1。

内置的 orgmode 版本是 7.8.11（我看到 7.9.2 已经出...）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T17:59:22.313

当您完全忽略您的 init 文件时，最好通过查看问题是否仍然发生来开始调试此类问题 - 尝试使用启动 emacs`--no-init-file`并查看是否仍然遇到问题。如果你不这样做，那么它显然*是*你的 init 文件中的东西。

如果除了与 Emacs 本身捆绑的版本之外，您还安装了 Org-mode 的本地安装，您也可能会遇到奇怪的行为 - 例如，如果您通过 ELPA 引入较新的 Org-mode。如果您通过 ELPA 进行本地安装，那么您可以尝试卸载 Org-mode 软件包并使用内置的 Org-mode 再次尝试。

我的 init 文件中有类似于以下内容的内容，以使其切换到安装 ELPA 的 Org 模式以避免此类问题（此变体未经测试，如果不太正确，请原谅我）：

```
(package-initialize)  ; load and initialise ELPA-installed packages
(org-reload)          ; restart Org-mode with the ELPA package 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T09:17:28.363

我向 emacs 团队提交了一个错误，他们发现错误来自损坏的书签文件。

我删除了我的 ~/.emacs.d/bookmark 文件（它是空的），现在一切都很好。

# graph-databases - 删除顶点的所有边和顶点本身

> ID：12855596
> 
> 赞同：0
> 
> 时间：2012-10-12T09:01:46.930
> 
> 标签：graph-databases, orientdb, gremlin

我正在尝试编写一个 gremlin 表达式，对于给定的顶点，它会删除往返于它的所有边，然后删除顶点本身。

我使用 OrientDB 1.3-SNAPSHOT 作为我的图形数据库。

到目前为止，这是我的表达：

```
//The #8:1 just refers to a vertex
g.v('#8:1').bothE.each{ g.removeEdge(it) }.back(2) 
```

我期望上面删除边缘然后返回 2，这应该打印出 node `#8:1`。但是，由于某种原因，我收到此错误：

```
Error: java.lang.NullPointerException 
```

为什么会这样？

最后，我该如何移除顶点？文档表明这`removeVertex()`需要一个参数（即顶点）。如何将顶点从`back(2)`into传递`removeVertex()`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T08:14:29.027

如果您删除顶点，Gremlin 实际上会为您删除所有边。就我而言，我只需要这样做：

```
g.removeVertex(g.v('#8:1')); g.stopTransaction(SUCCESS); 
```

这将删除顶点和与顶点关联的任何边。gremlin 需要停止转换才能提交更改。

现在，至于为什么在我的语句的查询中抛出错误。这是因为`each{}`是一个 grovvy 构造，所以我们退出管道。要在管道中继续，请`sideEffect{}`改用。

# php - 列出特定类别的产品

> ID：12855597
> 
> 赞同：0
> 
> 时间：2012-10-12T09:01:51.610
> 
> 标签：php, smarty, smarty3, cs-cart

我正在尝试根据我所在的产品类别列出 4 个产品，所以如果我正在查看具有“真棒类别”类别的“酷产品”，我想查看 4 个最新的“真棒类别”产品该产品内。

我知道这可以通过手动将每个产品的产品添加到特定块来实现，不幸的是，这种方法的产品太多了，不可行。

我已经到了能够根据当前产品类别获取最新 4 种产品的 id 的地步，但是我无法获取拇指图像或产品的 URL，这是我到目前为止所拥有的，

```
{php}
    $pid = $this->get_template_vars("product");
    $pid = $pid["product_id"];

    $cid = db_get_field("SELECT category_id FROM cscart_products_categories WHERE product_id = '$pid' AND link_type = 'M';");
    $prod_ids = db_get_fields("SELECT * FROM cscart_products_categories WHERE category_id = '$cid' LIMIT 4;");

    foreach($prod_ids as $prod_id){
        echo $prod_id;
    }

    print_r($prods);

{/php} 
```

如您所见，我在配置中启用了 PHP。所以总而言之，我想根据当前产品类别在我当前查看的产品中显示 4 个产品。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-22T20:04:06.967

**方式 1** - 当你有 category_id

```
http://x.com/index.php?dispatch=categories.view&category_id=45 
```

**方式 2** - 当您有 product_id 或 category_id

进行查询（例如类别）

```
select * from cscart_seo_redirects where object_id = 45 and type = 'c' and lang_code='en' 
```

然后阅读**src**字段！

# android - 降低android中位图的DPI分辨率

> ID：12855601
> 
> 赞同：1
> 
> 时间：2012-10-12T09:01:56.073
> 
> 标签：android, image, bitmap

> **可能重复：**
> [在 Android 应用程序中更改位图分辨率](https://stackoverflow.com/questions/9958362/change-bitmap-resolution-in-android-app)

如何降低android中图像或位图的DPI（水平分辨率和垂直分辨率）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T11:14:17.007

“降低 DPI”是指缩放图像吗？如果是这样，请尝试此代码

```
Bitmap.createScaledBitmap(sourceBitmap, dstWidth, dstHeight, false); 
```

# linux - 将 tr 输出重定向到 sed

> ID：12855603
> 
> 赞同：2
> 
> 时间：2012-10-12T09:01:57.377
> 
> 标签：linux, bash, shell, sed

我需要用另一个字符串替换文件中的一个字符串，但在替换之前，我需要将新字符串小写，然后再将其传递给`sed`.

`echo 'NEWSTRING' | tr '[:upper:]' '[:lower:]' | sed 's/foo/(my tr output in lowercase)/g' file.txt`

我的问题是，我们如何将替换字符串作为参数传递？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T09:04:39.217

```
sed "s/foo/$(echo .. |tr ...)/g" file.txt 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T09:03:36.880

尝试使用[`xargs`](http://linux.die.net/man/1/xargs)，例如：

```
echo 'NEWSTRING' | tr '[:upper:]' '[:lower:]' | xargs -I '{}' sed 's/foo/{}/g' file.txt 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-13T06:14:14.667

这可能对您有用（GNU sed）：

```
sed 's/foo/\L'"NEWSTRING"'/'g file 
```

# wcf - Silverlight 故障传播和 UserNamePasswordValidator

> ID：12855607
> 
> 赞同：2
> 
> 时间：2012-10-12T09:02:16.243
> 
> 标签：wcf, silverlight, exception, authentication

场景是使用 Wcf 服务和自定义身份验证的 Silverlight 客户端。为了缓解 500/200 状态代码问题（避免 EndPointNotFound 异常），我应用了[SilverLightFaultBehaviour](http://msdn.microsoft.com/en-us/library/ee844556%28v=vs.95%29.aspx)。但是，这不适用于[UserNamePasswordValidator](http://msdn.microsoft.com/en-us/library/ms551936(v=vs.90).aspx) - 当从 Validate() 引发 FaultException 时，SilverLightFaultMessageInspector 的 BeforeSendReply 实现不会捕获它。

到目前为止，我发现的唯一解决方法是使用替代客户端堆栈`WebRequest.RegisterPrefix("http://", WebRequestCreator.ClientHttp);`（[Silverlight 5 - 调试 npctrl.dll 崩溃](https://stackoverflow.com/questions/9382809/silverlight-5-debugging-npctrl-dll-crash)，[http://communities.vmware.com/thread/394306](http://communities.vmware.com/thread/394306?tstart=0) ?tstart=0 ）。

我的主要动机是我希望能够区分登录失败和连接错误（以下代码来自客户端异步回调方法，仅适用于客户端堆栈）：

```
if (e.Error is MessageSecurityException)
{
    this.HasLoginFailed.Value = Captions.Login_FailedLogin;
}
else
{
    this.HasLoginFailed.Value = Captions.Login_FailedConnection;
} 
```

从 UserNamePasswordValidator 抛出 FaultException 时，是否有其他方法可以修改发送的消息？或者任何概念上不同的自定义身份验证方式，而不是我正在使用的方式，它使我能够修改消息状态或将其保持为 200，或者只是能够区分连接失败和错误凭据？

我的用户名密码注册服务器端代码：

```
var serviceCredential = host.Description.Behaviors.Find<ServiceCredentials>();
serviceCredential.UserNameAuthentication.UserNamePasswordValidationMode =
                    UserNamePasswordValidationMode.Custom; 
serviceCredential.UserNameAuthentication.CustomUserNamePasswordValidator =
                    new MyValidator(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-12T18:44:20.767

当您抛出 a `FaultException`from`MyValidator`时，它被包装为`InnerException`of a `MessageSecurityException`，这可能就是您无法直接将其捕获为 a 的原因`FaultException`。

要为您抛出的故障添加一些信息，您可以添加一个`FaultCode`：

```
throw new FaultException(
    "Invalid user name or bad password.",
     new FaultCode("BadUserNameOrPassword")
); 
```

然后，在客户端捕获异常并检索您的`FaultCode`：

```
try { ... }
catch (MessageSecurityException e)
{
    FaultException fault = (FaultException) e.InnerException;
    String faultCode = fault.Code.Name;
    // you can now display a meaningful error with the faultCode
} 
```

我希望它会有所帮助！

# bash - shell 脚本 - 有没有办法将数字转换为字符？

> ID：12855610
> 
> 赞同：11
> 
> 时间：2012-10-12T09:02:23.883
> 
> 标签：bash, shell

> **可能重复：**
> [使用 printf 将整数 ASCII 值转换为 BASH 中的字符](https://stackoverflow.com/questions/890262/integer-ascii-value-to-character-in-bash-using-printf)

我想将我的整数转换为 ASCII 字符

我们可以像这样在java中转换：

```
int i = 97;          //97 is "a" in ASCII
char c = (char) i;   //c is now "a" 
```

但是，有没有办法做这个shell脚本？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-12T09:12:05.553

```
#!/bin/bash
# chr() - converts decimal value to its ASCII character representation
# ord() - converts ASCII character to its decimal value

chr() {
  printf \\$(printf '%03o' $1)
}

ord() {
  printf '%d' "'$1"
}

ord A
echo
chr 65
echo 
```

**编辑：**

如您所见`ord()`，这有点棘手——在整数前面放一个单引号。

> 单 Unix 规范：“如果前导字符是单引号或双引号，则该值应是单引号或双引号后面字符的基础代码集中的数值。”

（取自[http://mywiki.wooledge.org/BashFAQ/071](http://mywiki.wooledge.org/BashFAQ/071)）。

参见[man printf(1p)](http://www.opengroup.org/onlinepubs/009695399/utilities/printf.html)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-12T09:11:18.083

```
declare -i i=97
c=$(printf \\$(printf '%03o' $i))
echo "char:" $c 
```

# c# - jQuery自动完成多个输出

> ID：12855617
> 
> 赞同：0
> 
> 时间：2012-10-12T09:02:41.183
> 
> 标签：c#, jquery, asp.net, autocomplete

我正在使用 jQuery AutoComplete 根据输入的值从数据库中获取结果。然后，用户将单击搜索按钮以告诉页面搜索该特定条目的详细信息。

我想获得 2 个值，**Name**和**Title**。我只想向用户显示**名称**，而页面使用**标题**作为搜索条件。

例如：当一个人输入**Vehicle**时，结果将显示`Vehicle1, Vehicle2`在一个列表中。
当用户点击时`Vehicle1`，会出现一个隐藏框，**标题**会是`Bike`，比如with `Vehicle2`，会发出隐藏框`Car`。

我可以让**名称**正确显示在文本框中，但我无法终生（并且经过 2 天的搜索）将**标题**绑定到隐藏框。

JavaScript：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.2.js"></script>
<script type="text/javascript" src="http://code.jquery.com/ui/1.9.0/jquery-ui.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $(".tb").autocomplete({
                source: function (request, response) {
                    $.ajax({
                        url: "AutoComplete.asmx/FetchEmailList",
                        data: "{ 'prefix': '" + request.term + "' }",
                        dataType: "json",
                        type: "POST",
                        contentType: "application/json; charset=utf-8",
                        dataFilter: function (data) { return data; },
                        success: function (data) {
                            response($.map(data.d, function (item) {
                                return {
                                    //value: item.Title,
                                    label: item.Name
                                };
                            }));
                        },
                        error: function (XMLHttpRequest, textStatus, errorThrown) {
                            alert(textStatus);
                        }
                    });
                },
                minLength: 2
            });
        });
    </script> 
```

ASPX 代码：

```
<div class="ui-widget" >
    <asp:TextBox ID="tbAuto" class="tb" runat="server">
    </asp:TextBox>
    <asp:TextBox runat="server" ID="tbHidden" class="tb"></asp:TextBox>
</div> 
```

代码隐藏：

```
[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[ScriptService]
public class AutoComplete : System.Web.Services.WebService
{
[WebMethod]
[ScriptMethod(ResponseFormat = ResponseFormat.Json)]
public List<Employee> FetchEmailList(string prefix)
{
    var emp = new Employee();
    var fetchEmail = emp.GetEmployeeList(prefix)
    .Where(m => m.Name.ToLower().StartsWith(prefix.ToLower()));
    return fetchEmail.ToList();
}    
} 
```

CompletionClass：（请原谅命名）

```
public class Employee
{
    public string Title { get; set; }
    public string Name { get; set; }
    public string value { get; set; }

    public List<Employee> GetEmployeeList(string prefixText)
    {
        List<Employee> cmpList = new List<Employee>();

        SqlConnection db = DataConn.SqlConnection();

        db.Open();
        SqlTransaction transaction = db.BeginTransaction();

        //var array = new ArrayList();

        try
        {
            SqlCommand command = new SqlCommand("Select [something] FROM vwGetDetails WHERE [something_else] LIKE N'%" + prefixText + "%' ORDER BY [thatOther_thing] ASC", db, transaction);
            using (SqlDataReader reader = command.ExecuteReader())
            {
                while (reader.Read())
                {
                    cmpList.Add(new Employee() { Name = reader["Value1"].ToString(), Title = "Value1_Cat", value = "Value1_Cat"});
                }
            }

            command = new SqlCommand("Select [something] FROM [somewhere] WHERE [thingy] LIKE N'%" + prefixText + "%' ORDER BY [previousThingy] ASC", db, transaction);
            using (SqlDataReader reader = command.ExecuteReader())
            {
                while (reader.Read())
                {
                    cmpList.Add(new Employee() { Name = reader["Value2"].ToString(), Title = "Value2_Cat", value = "Value2_Cat"});
                }
            }

            transaction.Commit();
        }
        catch (SqlException)
        {
            transaction.Rollback();
            cmpList.Add(new Employee() { Name = "Problem Getting Results.", value = "Error"});
            //array.Add("Problem Getting Results.");
        }

        if (cmpList.Count == 0)
            cmpList.Add(new Employee() { Name = "Nothing to Display.", value = "Info"});
        //array.Add("Nothing to Display.");

        //return array;

        return cmpList;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T10:29:35.353

对 JavaScript 的这些修改应该可以解决问题：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.2.js"></script>
<script type="text/javascript" src="http://code.jquery.com/ui/1.9.0/jquery-ui.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $('input[name$="tbAuto"]').autocomplete({
            source: function (request, response) {
                $.ajax({
                    url: "AutoComplete.asmx/FetchEmailList",
                    data: "{ 'prefix': '" + request.term + "' }",
                    dataType: "json",
                    type: "POST",
                    contentType: "application/json; charset=utf-8",
                    dataFilter: function (data) { return data; },
                    success: function (data) {
                        response(data.d);
                    },
                    error: function (XMLHttpRequest, textStatus, errorThrown) {
                        alert(textStatus);
                    }
                });
            },
            minLength: 2,
            focus: function(event, ui) {
                $('input[name$="tbAuto"]').val(ui.item.Name);
                return false;
            },
            select: function(event, ui) {
                $('input[name$="tbAuto"]').val(ui.item.Name);
                $('input[name$="tbHidden"]').val(ui.item.Title);
                return false;
            }
        }).data('autocomplete')._renderItem = function(ul, item) {
            return $('<li>').data('item.autocomplete', item).append('<a>' + item.Name + '</a>').appendTo(ul);
        };
    });
</script> 
```

这里的假设是选择器准确地返回我们正在处理的元素，如果不是，它们需要调整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-17T11:48:29.867

凉爽的。几天来我一直在谷歌搜索这个解决方案......优秀的干净代码！只是一个小评论：使用 jqueryUI 1.10，这会引发 javascript 异常。 `.data('autocomplete')._renderItem = function(ul, item) {...` 我用过 `.data('ui-autocomplete')._renderItem = function(ul, item) {...` ，一切都很好。

# uml - 简化 UML 活动图

> ID：12855622
> 
> 赞同：0
> 
> 时间：2012-10-12T09:03:03.213
> 
> 标签：uml, activity-diagram

我即将为一个旧程序制作一个 UML 活动图，其中充满`goto`. 我要建模的程序是按照示例中的方式构建的。首先，它做一些事情，然后检查错误标志。如果设置了错误标志，它会将错误代码写入日志并可能转到程序中的另一个位置。

```
// When error, the program generate a Trap and then go to 1000
err = Foo(A,B,C)
if (err != 0) 
{
   CTrap(2000,err,A,B,C)
   goto(1000)
}

// When error, the program generate a trap and continue
err = Foo2(A,B,C)
if (err != 0)
{
   CTrap(2000,err,A,B,C)
} 
```

`CTrap`将错误代码写入日志，我希望活动图显示每个活动可以生成的错误代码以及何时生成。

现在我已经尝试用无数的决策和合并对此进行建模，并为写入日志的每个错误代码添加了一个操作。但那时几乎不可能遵循该计划。我可以删除错误代码的操作，但随后我会丢失重要信息。然后它仍然是无数的决定和合并。我想知道是否有任何符号可以用来以某种方式简化它。因此，它显示了可以生成的错误代码和时间，而不必在图表中充斥着决策和合并。如果我可以以任何方式在错误标志上使用 post-contion，或者如果您可以从带有条件的活动中获得多个输出？

**编辑**

我通过在评论中放置有关错误代码（陷阱）的信息进行了一些实验。不知道能不能像我这样写？我可以从我在某些地方完成的活动中获得不同的输出吗？然后我想知道我是否一直在使用“写入变量”正确？这是一个实验，而不是完整的图表。

以 BFX 为前缀的函数为系统函数，以 BX2 为前缀的函数为与本程序相关的函数。所有合并都是一个 GOTO 目的地。例如，名为 8100 的合并是程序的一部分，用于处理您遇到的错误情况`GOTO 8100`

![我的实验](../Images/0fc66051d95712c8d002087419609846.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T20:50:37.447

您可以使用多个活动图来做到这一点。从您的代码中，您不想在顶层图表上显示可能的错误，但在显示的图表上，`CTrap`您可以显示可能的错误代码及其作用。

如果您想在一张图表中显示所有信息，您无能为力 - 图表会变得非常混乱。

编辑（添加图表后）：您可以连接链接中的警卫，而不是让 4 个链接从交界处传出，而是得到一个。不要以为还有什么可以做的。

# ios - 如何合并视频和录制并制作单个视频

> ID：12855624
> 
> 赞同：-1
> 
> 时间：2012-10-12T09:03:10.887
> 
> 标签：ios, iphone, objective-c, ios6

我想从图像中制作视频并将录制的声音与该视频合并。

经过大量的研发和样品后，我无法将两者合并，直到现在我只能从图像中创建视频。

谁能告诉我合并视频和音频背后的概念。我正在使用**xcode 4.5**和**iOS 6**。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T09:37:43.587

您必须在 StackOverflow 中搜索以前回答的答案。

[这](https://stackoverflow.com/questions/6061092/make-movie-file-with-picture-array-and-song-file-using-avasset/6094407#6094407)是一个描述向电影添加音频的答案。

这是从图像创建电影的答案[。](https://stackoverflow.com/questions/3741323/how-do-i-export-uiimage-array-as-a-movie/3742212#3742212)

# azure - 使用 Task 上传 Blob

> ID：12855626
> 
> 赞同：2
> 
> 时间：2012-10-12T09:03:32.950
> 
> 标签：azure, azure-storage, azure-blob-storage

背景：[文件上传](https://stackoverflow.com/questions/8424690/using-parallel-foreach-in-a-small-azure-instance/12241483#12241483)

我的场景：我需要将大量文件上传到 Azure blob，可能是 10,000 到 100,000 个文件。每个文件大小为 10KB-50KB。

我在上面讨论中使用了解决方案，我看到文件快速上传，但是，我有这么多文件，以至于我发现我的应用程序导致 CPU 使用率非常高，总是 100% ......更糟糕的是下一步我需要运行数百个进程，我的意思是我需要运行数百个进程，每个进程需要上传10,000个或更多文件。到目前为止，我已经对其进行了测试，但不幸的是，我看到了许多奇怪的问题，例如异常“连接已关闭”等...

你们有减少任务CPU使用率的想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T20:24:26.957

我在这里看到的问题是，您旋转了如此多的线程，以至于您只需管理所有排队的线程，即使从技术上讲它们不会尝试同时运行，您也会使机器资源过载。他们将占用 RAM，并且在没有 RAM 的情况下，将使用 SWAP 空间——这将使机器在非荣耀的火焰中崩溃。

我会使用一个队列（天蓝色队列，msmq，Systems.Collections.Queue）来排队所有对象，使用有限数量的线程，这些线程将使用后台链接中描述的异步方法处理文件，然后线程完成执行检查队列中的下一项并处理该项。我的建议是使用非内存队列——我将在下面解释。主要好处是节省内存，这样您的软件就不会因为队列太大而崩溃或变慢。

Parallel.ForEach 等可以节省大量时间，但在处理大量项目时确实会破坏机器的性能 - 如果机器出现故障，那么除非您在某处有检查点，否则您将无法从中恢复。使用持久队列不仅可以让您正确管理机器资源，还可以正确管理您在流程中的位置。

然后，您可以使用 MSMQ 之类的持久队列或如果在云中使用 Azure 队列，在多台机器上进行扩展。如果您使用检查 azure 队列有多大的服务，您甚至可以不时启动实例以减少负载，然后终止额外的实例。

这是我要实现的场景：

使用标准 ThreadPool 大小 当您检测到新文件/批处理时 - 提交到队列 每次在队列中插入新项目时触发事件（如果是内存队列） 让进程检查队列（如果是持久队列） 如果新项目在队列中，首先检查 ThreadPool 中是否有空间 如果没有则忽略（使用 PEEK 方法，因此您不会删除该项目） - 如果有空间，则将工作线程添加到 ThreadPool 进程线程（在 ThreadPool 下运行）应该执行，然后检查队列中是否有另一个项目 - 如果没有 - 线程死亡，这很好

使用这种方法，您可以在 1 台机器或 50,000 台机器上运行它——只要您为超过 1 台机器使用持久队列，您就不会遇到任何问题。当然，如果您使用 Azure 队列，请确保您对重复项目进行了正确的测试，因为您可能会收到已被提供给另一台计算机的排队项目。

这是一种简单的方法，可扩展，并且如果使用持久队列（甚至是文件系统）可以从故障中恢复。但是，它不会通过强制它管理包含 100 万个以上项目的 ThreadPool 来滥用资源来使机器过载。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T20:31:52.787

简单地说，去实现一个线程池，让有 20 个线程（因为这可能是你的网络带宽可以同时处理的数量），每次上传需要 2-3 秒，大约需要 4-5 小时，这是可以接受的。确保您没有在上传之间共享存储或容器实例，这可能会导致“连接已关闭”错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T08:00:22.300

我是 Microsoft 技术布道者，我开发了一个示例和免费工具（不支持/不保证）来帮助解决这些情况。

二进制文件和源代码可在此处获得：[https ://blobtransferutility.codeplex.com/](https://blobtransferutility.codeplex.com/)

Blob 传输实用程序是一个 GUI 工具，用于向/从 Windows Azure Blob 存储上传和下载数千个小/大文件。

**特征：**

*   创建要上传/下载的批次
*   设置内容类型
*   并行传输文件
*   将大文件拆分为并行传输的较小部分

第一个和第三个功能是您问题的答案。

您可以从示例代码中了解我是如何做到的，或者您可以简单地运行该工具并做您需要做的事情。

# postgresql - 仅当外键不存在时如何创建外键？

> ID：12855631
> 
> 赞同：15
> 
> 时间：2012-10-12T09:03:50.657
> 
> 标签：postgresql, postgresql-9.1

我正在使用 PostgreSQL 9.1。

我有一个表`common.client_contact`，我使用以下代码创建了外键：

```
ALTER TABLE common.client_contact 
ADD FOREIGN KEY (contact_id) REFERENCES common.contact_item(id); 
```

如果我执行此代码，我将获得几个具有不同名称的外键（如`client_contact_contact_id_fkey1`、`client_contact_contact_id_fkey2`等`client_contact_contact_id_fkey3`）。

因此，在创建新约束之前，我需要检查它是否存在。

我检查表中是否存在此约束`pg_constraint`：

```
SELECT * FROM pg_constraint WHERE conname = 'client_contact_contact_id_fkey' 
```

现在我需要将它们组合在一起。就像是

```
IF NOT EXISTS
    (SELECT * FROM pg_constraint WHERE conname = 'client_contact_contact_id_fkey')
ALTER TABLE common.client_contact
    ADD CONSTRAINT client_contact_contact_id_fkey
    FOREIGN KEY (contact_id) REFERENCES common.contact_item(id) 
```

要不就

```
ALTER TABLE common.client_contact 
ADD FOREIGN KEY IF NOT EXISTS (contact_id) REFERENCES common.contact_item(id) 
```

但是这两个查询都会产生语法错误。那么，我该如何在 PostgreSQL 中做到这一点？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-12T09:15:44.503

Use a `DO` block to execute it in PL/PgSQL.

```
DO $$
BEGIN
    IF NOT EXISTS (SELECT 1 FROM pg_constraint WHERE conname = 'client_contact_contact_id_fkey') THEN
        ALTER TABLE common.client_contact
            ADD CONSTRAINT client_contact_contact_id_fkey
            FOREIGN KEY (contact_id) REFERENCES common.contact_item(id);
    END IF;
END;
$$; 
```

You seem to be relying on the default constraint name generation, which isn't ideal. It's probably safer to use `information_schema` to check for the presence of a constraint that links the two columns.

The following query checks for a foreign key between the two tables without relying on the generated constraint name:

```
SELECT 1
FROM information_schema.table_constraints tc 
INNER JOIN information_schema.constraint_column_usage ccu 
  USING (constraint_catalog, constraint_schema, constraint_name) 
INNER JOIN information_schema.key_column_usage kcu 
  USING (constraint_catalog, constraint_schema, constraint_name) 
WHERE constraint_type = 'FOREIGN KEY' 
  AND ccu.table_name = 'contact_item' 
  AND ccu.table_schema = 'common'  
  AND ccu.column_name = 'contact_id' 
  AND tc.table_schema = 'common' 
  AND tc.table_name = 'client_contact'
  AND kcu.column_name = 'id'; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-04-03T18:33:53.940

解决您遇到的问题的一种方法是在创建约束之前删除它

```
ALTER TABLE common.client_contact DROP CONSTRAINT IF EXISTS  client_contact_contact_id_fkey; 

ALTER TABLE common.client_contact
    ADD CONSTRAINT client_contact_contact_id_fkey
    FOREIGN KEY (contact_id) REFERENCES common.contact_item(id) 
```

添加命名约束将通过。

* * *

## 回答 #3

> 赞同：-7
> 
> 时间：2012-10-12T09:14:18.960

我不确定这是否可行，但您可以尝试一下。

在执行查询之前触发

```
SET FOREIGN_KEY_CHECKS=0 
```

然后您进行查询并

```
SET FOREIGN_KEY_CHECKS=1 
```

# javascript - 带有开始值和结束值的jQuery进度条

> ID：12855632
> 
> 赞同：0
> 
> 时间：2012-10-12T09:03:56.397
> 
> 标签：javascript, jquery-ui, jquery

Jquery 进度条使用以下代码显示从起点到其值的输出。我需要从中间点开始值到给定的另一个点。

例如：我需要从 0-100 的栏中突出显示 20-30 的位置。

```
<script>
$(function() {
    $( "#progressbar" ).progressbar({
        value: 37
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T09:20:10.530

好的，假设您正在使用 Jquery UI 进度条，并且您需要在进程的进度条上做一些事情，并且当您的进程在 20% 到 30% 之间时，您需要更改颜色或给出一些效果

为此，您需要设置一些类似这样的间隔方法

```
$("#progressbar").data("progress", setInterval(function() {
  if(percentComplete => 20 && percentComplete <= 30) {
    // Do highlighting here
  }
  $("#progressbar").progressbar( { value: percentComplete } );
}, 200)); 
```

上面的代码可能不是一个现成的解决方案，它只是试图传达解决问题的方法

# c++ - 如何在 C/C++ 中将字符串从 UTF8 转换为 Latin1？

> ID：12855643
> 
> 赞同：5
> 
> 时间：2012-10-12T09:04:40.200
> 
> 标签：c++, c, utf-8, latin1, string-conversion

我的问题很简单，但到目前为止我找不到解决方案：

如何在不使用任何额外库（如 libiconv）的情况下将编码的 UTF8 转换为 C++编码`string`的 latin1 ？`string`

到目前为止，我能找到的每个示例都是针对 latin1 到 UTF8 的转换？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T09:20:13.630

```
typedef unsigned value_type;

template <typename Iterator>
size_t get_length (Iterator p)
{
    unsigned char c = static_cast<unsigned char> (*p);
    if (c < 0x80) return 1;
    else if (!(c & 0x20)) return 2;
    else if (!(c & 0x10)) return 3;
    else if (!(c & 0x08)) return 4;
    else if (!(c & 0x04)) return 5;
    else return 6;
}

template <typename Iterator>
value_type get_value (Iterator p)
{
    size_t len = get_length (p);

    if (len == 1)
    return *p;

    value_type res = static_cast<unsigned char> (
                                    *p & (0xff >> (len + 1)))
                                     << ((len - 1) * 6);

    for (--len; len; --len)
        res |= (static_cast<unsigned char> (*(++p)) - 0x80) << ((len - 1) * 6);

    return res;
} 
```

此函数将返回 unicode 代码点`p`。您现在可以使用转换字符串

```
for (std::string::iterator p = s_utf8.begin(); p != s_utf8.end(); ++p)
{
     value_type value = get_value<std::string::iterator&>(p));
     if (value > 0xff)
         throw "AAAAAH!";
     s_latin1.append(static_cast<char>(value));
} 
```

没有保证，代码很旧:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-23T04:16:31.647

这是我为我的目的而写的电影人回答的一个版本。更具可读性，可能会慢一些。我不需要模板的东西，因为我一直在处理`char *`，在我的情况下，我想用 _ 替换非拉丁语字符。以防万一它可以帮助某人：

```
int GetUtf8CharacterLength( unsigned char utf8Char )
{
    if ( utf8Char < 0x80 ) return 1;
    else if ( ( utf8Char & 0x20 ) == 0 ) return 2;
    else if ( ( utf8Char & 0x10 ) == 0 ) return 3;
    else if ( ( utf8Char & 0x08 ) == 0 ) return 4;
    else if ( ( utf8Char & 0x04 ) == 0 ) return 5;

    return 6;
}

char Utf8ToLatin1Character( char *s, int *readIndex )
{
    int len = GetUtf8CharacterLength( static_cast<unsigned char>( s[ *readIndex ] ) );
    if ( len == 1 )
    {
        char c = s[ *readIndex ];
        (*readIndex)++;

        return c;
    }

    unsigned int v = ( s[ *readIndex ] & ( 0xff >> ( len + 1 ) ) ) << ( ( len - 1 ) * 6 );
    (*readIndex)++;
    for ( len-- ; len > 0 ; len-- )
    {
        v |= ( static_cast<unsigned char>( s[ *readIndex ] ) - 0x80 ) << ( ( len - 1 ) * 6 );
        (*readIndex)++;
    }

    return ( v > 0xff ) ? 0 : (char)v;
}

// overwrites s in place
char *Utf8ToLatin1String( char *s )
{
    for ( int readIndex = 0, writeIndex = 0 ; ; writeIndex++ )
    {
        if ( s[ readIndex ] == 0 )
        {
            s[ writeIndex ] = 0;
            break;
        }

        char c = Utf8ToLatin1Character( s, &readIndex );
        if ( c == 0 )
        {
            c = '_';
        }

        s[ writeIndex ] = c;
    }

    return s;
} 
```

测试代码：

```
char s2[ 256 ] = "lif\xc3\xa9 is b\xc3\xa9tt\xc3\xa9r with acc\xc3\xa9nts";
Utf8ToLatin1String( s2 ); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-12T09:09:56.200

`latin1`(aka `ISO-8859-1`) 定义了 Unicode 的前 256 个代码点。因此，在 中`UTF-8`，如果您的字符是 8 位，那么它将完全映射到`latin1`等价物。如果它的长度超过 8 位，则其中没有对应的`latin1`，您应该将其映射到某个“未知字符”（例如，`\0`或？）。

# eclipse - 运行 maven:install 将比我预期的更多的 jars 复制到 WEB-INF/lib

> ID：12855647
> 
> 赞同：1
> 
> 时间：2012-10-12T09:04:51.123
> 
> 标签：eclipse, maven, eclipse-wtp, m2e

日蚀靛蓝；平方米1.1.0；WTP 0.15.3 的 Maven 集成；Maven 3.0.4

我的 web 项目在同一个工作区中有一些依赖项项目。所有项目均已安装。当我运行 maven install 时，除了查看 WEB-INF/lib 中的所有依赖项。

当我运行 maven install plugin 或 maven war plugin 时，WEB-INF/lib 将充满依赖关系，但它们比我预期的要多得多，从 POM 文件的“依赖层次结构”或“有效 POM”视图来看，或从类路径视图中的 Maven 依赖项，我找不到依赖项。

运行**Maven->update projects**没有帮助。

那么这些依赖项来自哪里或者我应该从哪里开始调试？

**编辑** 以前我的项目有一个很大的依赖树（100+ jars），其中一些是不需要的，所以我决定删除它们。我的项目依赖于一个公共项目，它有一些不需要的依赖项，我将它们从 POM 依赖项中删除并为整个项目依赖关系树运行 maven install，成功。然后我在我的项目上运行 maven install，它不应该包括我从公共项目中删除的 jar，但是，不幸的是它们在 WEB-INF/lib 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T09:12:40.847

如果你想知道你的依赖来自哪里，运行：

```
mvn dependency:tree 
```

从命令行。这显示了如何从您声明的依赖项中提取传递依赖项。您还可以运行：

```
mvn dependency:analyze 
```

查看是否可以删除任何未使用的依赖项以减少打包的 JAR 数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T10:25:25.623

问题解决了，我删除了整个项目并从远程导入，运行 maven-install，它起作用了。即使在我对所有依赖项项目运行“maven clean install”之后，仍然不知道为什么它不能工作。

# glibc - 错误，检测到 glibc

> ID：12855648
> 
> 赞同：0
> 
> 时间：2012-10-12T09:04:51.723
> 
> 标签：glibc

这是我的代码：

```
#include<stdio.h>
#include<string.h>
#include<stdlib.h>

main(int argc, char *argv[])
{
  struct numbers_struct {
      char numbers_array[1000];
  };
  char Line[300];
  FILE *Fp;
  int i=0;
  long size;
  Fp=fopen("input2.txt","r");
  fscanf(Fp, "%ld", &size);
  struct numbers_struct *numbers = malloc(sizeof(struct numbers_struct) * size);
  while(!feof(Fp))
    {
      if (fgets(Line,1000,Fp)!=NULL)
        {
          strncpy(numbers[i].numbers_array,Line,1000);
          i++;
        }
    }
  int k;
  k=i;
  for(i=k-1;i>=0;i--)
  printf("%s",numbers[i].numbers_array);
  free(numbers);
  fclose(Fp);

  return 0;
} 
```

当我运行它时，程序会打印正确的输出，然后是以下错误消息：

```
*** glibc detected *** ./part2: double free or corruption (out): 0x08834170 ***
part2: malloc.c:2451: sYSMALLOc: Assertion `(old_top == (((mbinptr) (((char *) &((av)->bins[((1) - 1) * 2])) - __builtin_offsetof (struct malloc_chunk, fd)))) && old_size == 0) || ((unsigned long) (old_size) >= (unsigned long)((((__builtin_offsetof (struct malloc_chunk, fd_nextsize))+((2 * (sizeof(size_t))) - 1)) & ~((2 * (sizeof(size_t))) - 1))) && ((old_top)->size & 0x1) && ((unsigned long)old_end & pagemask) == 0)' failed.
Aborted (core dumped) 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T23:05:33.867

> 我做错了什么？

你已经[损坏了堆](http://www.efnetcpp.org/wiki/Heap_Corruption)。

诊断堆损坏的最佳方法是[Valgrind](http://valgrind.org)和[AddressSanitizer](http://code.google.com/p/address-sanitizer/wiki/AddressSanitizer)。其中任何一个都应该直接指出问题所在。

您的程序中有两个明显的错误：

*   `fgets(Line,1000,Fp)`—— 有多大`Line`，如果出现长线，你要读多少个字符？
*   `struct numbers_struct *numbers = malloc(sizeof(struct numbers_struct) * size);`-- 如果输入文件以`3`15 行开头，会发生什么？

# c++ - 如何初始化作为 c++11 中的类成员的静态 const 向量？

> ID：12855649
> 
> 赞同：21
> 
> 时间：2012-10-12T09:04:51.013
> 
> 标签：c++, class, vector, c++11, initialization

我需要初始化一个作为类成员的静态常量向量。

我努力了：

```
static const vector<string> vr ({"2", "3", "4"});  

static const vector<string> vr = {"2", "3", "4"}; 

static const vector<string> vr {"2", "3", "4"}; 
```

但是，这些都不起作用。

我正在将 Eclipse 与 mingw 一起使用。（我启用了 c++11）

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-12T09:28:45.940

静态变量初始化在类之外完成，如下所示：

```
class Example
{
    static const vector<string> vr;
    // ...
};

const vector<string> Example :: vr ({"hello", "world"}); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-12T09:27:34.217

在类定义中声明静态成员，但在外部定义它们。

```
class MyClass {
public:
    // declaration
    static const std::vector<std::string> vec;
};

// definition
const std::vector<std::string> MyClass::vec = ...; 
```

例外是整型，

```
class MyClass {
public:
    // declaration and definition
    static const int MAX_BURRITOS = 5;
}; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-05-20T14:58:43.417

您确实将您的问题限制在 C++11，但我会将其放在这里，以供将来在搜索结果中找到此内容的访问者使用。

如果您能够前进到**C++17**，则可以使用`const static inline`在类声明中初始化静态成员，而不再需要在类之外拥有它。

像这样：

```
#include <iostream>
#include <string>
#include <vector>

class Test {
public:
    const static inline std::vector<std::string> Names = { "Fred", "Barney", "Wilma" };
};

int main() {
    std::cout << Test::Names[0];
    return 0;
} 
```

# c# - C# 轨迹栏 mciSendString

> ID：12855652
> 
> 赞同：1
> 
> 时间：2012-10-12T09:05:06.007
> 
> 标签：c#, mci

我正在使用 MCI 编写 CD 音频播放器程序，但无法在轨迹栏上显示音频文件的进度。

有谁知道怎么做？

请注意，我必须使用[`mciSendString`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd757161)来获取轨道长度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T10:22:54.440

来自[Simple MCI Player - CodeProject](http://www.codeproject.com/Articles/63094/Simple-MCI-Player)，略有改动：

```
public int GetCurrentPosition()
{
    String command = "status MediaFile position";
    error = mciSendString(command, returnData, 
                          returnData.Capacity, IntPtr.Zero);
    return error == 0 ? int.Parse(returnData.ToString()) : 0;
}

public int GetSongLenght()
{
    if (IsPlaying())
    {
        String command = "status MediaFile length";
        error = mciSendString(command, returnData, returnData.Capacity, IntPtr.Zero);
        return error == 0 ? int.Parse(returnData.ToString()) : 0;
    }
    else
        return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-13T18:20:26.750

在 VB 中，我在 Timer Tick Sub 中做到了这一点......真的很容易......

rem audio 是 mcisendstring 东西 rem TotalLength 是当前曲目的总秒数

```
 Dim PlayPosition As Long = 0

    PlayPosition = audio.SecondsPlayed
    If PlayPosition > 0 And PlayPosition < TotalLength Then
        TrackBar1.Value = (PlayPosition / TotalLength) * TotalLength
    End If 
```

# mysql - 在 MySQL 中存储 INSERT 的日期和时间

> ID：12855656
> 
> 赞同：0
> 
> 时间：2012-10-12T09:05:19.313
> 
> 标签：mysql

> **可能重复：**
> [MySQL 表行中的时间和日期戳](https://stackoverflow.com/questions/1642410/time-date-stamp-in-a-mysql-table-row)

存储 INSERT 语句运行的日期和时间的最佳方法是什么？是否会在查询中包含 Now() 函数？完成后，是否可以计算 72 小时是否已过？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T09:10:10.187

查看该`TimeStamp`字段，特别是您可以创建表本身来为您完成所有工作：

```
CREATE TABLE `table` (
    `id` INT PRIMARY KEY AUTO_INCREMENT,
    `updatetime` TIMESTAMP DEFAULT CURRENT_TIMESTAMP
) 
```

在这里，当创建记录（即 INSERT）时，数据库将为您填充字段内容。

`DATE_DIFF()`您可以使用or函数运行一个简单的查询`TIME_DIFF`来检查任何超过 72 小时的记录。请注意，您可能也想在`UNIX_TIMESTAMP()`此处使用该功能。

欲了解更多信息，请查看[此处](https://stackoverflow.com/questions/2174058/mysql-timediff-to-hours)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T09:17:20.340

[如果您使用CURRENT_TIMESTAMP](http://dev.mysql.com/doc/refman/5.0/en/date-and-time-functions.html#function_current-timestamp)列的默认值定义 datetime 属性，则不需要指定显式值。如果将类型定义为[TIMESTAMP](http://dev.mysql.com/doc/refman/5.0/en/timestamp-initialization.html)，则每次修改记录时都会将其更新为当前时间，除非您专门覆盖该行为。

> 是否可以计算72小时是否已过？

是的 - 但请确保将所有静态计算放在比较操作的一侧：

```
SELECT *
FROM yourtable
WHERE NOW() - INTERVAL 72 HOURS > yourtable.created_time; 
```

会比......更快

```
SELECT *
FROM yourtable
WHERE NOW()> yourtable.created_time + INTERVAL 72 HOURS; 
```

即使没有创建时间的索引。如果您在创建时间上确实有索引，那么第一个查询将不会使用它，但第二个查询会更快。

# iphone - 如何将功能或设计委托给其他 UIViewController

> ID：12855657
> 
> 赞同：0
> 
> 时间：2012-10-12T09:05:21.903
> 
> 标签：iphone, objective-c, ios

例如，我在所有视图控制器中有两个相同的按钮。这些按钮的反应在所有视图控制器中都是相同的。如何在公共类中实现此功能并在每个视图控制器中使用此类或对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T09:09:56.243

当您将一对目标/动作添加到按钮时，您可以将目标设置为特定的类：

```
[button1 addTarget:myOtherClassInstance action:@selector(doSomethingAction:) forControlEvents:UIControlEventTouchUpInside];
[button2 addTarget:myOtherClassInstance action:@selector(doSomethingAction2:) forControlEvents:UIControlEventTouchUpInside]; 
```

在 myOtherClass.m

```
- (void)doSomethingAction:(id)sender {
//Do something and maybe check the sender
}

- (void)doSomethingAction2:(id)sender {
//Do some other thing and maybe check the sender
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T09:10:34.997

您可以将操作方法​​放在委托类中，并将按钮点击事件链接到此方法，如下所示

```
 `[yourButton addTarget:yourDelegate action:@selector(yourmethod:) forControlEvents:UIControlEventTouchUpInside];`
```

# mysql - 计算 MySQL 查询中的行数

> ID：12855661
> 
> 赞同：0
> 
> 时间：2012-10-12T09:05:32.217
> 
> 标签：mysql, sql, count

> **可能重复：**
> [我可以一起使用 COUNT() 和 DISTINCT 吗？](https://stackoverflow.com/questions/4483798/count-and-distinct-can-i-use-together)

我有这个 sql 语句：

```
SELECT * FROM wp_posts
INNER JOIN wp_term_relationships ON (wp_posts.ID = wp_term_relationships.object_id)
WHERE ( wp_term_relationships.term_taxonomy_id IN (4,3) )
AND wp_posts.post_type = 'post' AND (wp_posts.post_status = 'published') 
```

我得到两行具有相同 ID => 预期

添加`GROUP BY wp_posts.ID`会将行数减少到一

现在我想获取 SQL 查询的行数

```
SELECT COUNT(*) AS cnt FROM wp_posts
INNER JOIN wp_term_relationships ON (wp_posts.ID = wp_term_relationships.object_id)
WHERE ( wp_term_relationships.term_taxonomy_id IN (4,3) )
AND wp_posts.post_type = 'post' AND (wp_posts.post_status = 'published')
GROUP BY wp_posts.ID 
```

即使使用“GROUP BY”，我也会得到“2”而不是“1”。

从第一条语句中获取行数的正确语句是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T09:14:16.450

试试这个：

```
SELECT count(DISTINCT wp_posts.ID) as cnt FROM wp_posts INNER JOIN wp_term_relationships ON (wp_posts.ID = wp_term_relationships.object_id) WHERE ( wp_term_relationships.term_taxonomy_id IN (4,3) ) AND wp_posts.post_type = 'post' AND (wp_posts.post_status = 'published') 
```

这将为您提供结果行中唯一 ID 的计数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T09:12:48.880

由于第一个查询显示 2 行，因此第二个查询应该返回`2`，并且确实如此。这是正常工作的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T09:27:00.123

有那个 GROUP BY 没有真正的逻辑意义。

一个简单的解决方法是使用您的原始 sql 作为子选择并基于此进行计数：-

```
SELECT COUNT(*) AS cnt  
FROM (SELECT wp_posts.ID  
FROM wp_posts 
INNER JOIN wp_term_relationships  
ON (wp_posts.ID = wp_term_relationships.object_id) 
WHERE ( wp_term_relationships.term_taxonomy_id IN (4,3) ) 
AND wp_posts.post_type = 'post'  
AND (wp_posts.post_status = 'published') 
GROUP BY wp_posts.ID) Sub1 
```

或者以下可能没问题，具体取决于表之间的关系（以及 wp_posts.ID 的唯一性）。

```
SELECT COUNT(DISTINCT wp_posts.ID) 
FROM wp_posts
INNER JOIN wp_term_relationships 
ON (wp_posts.ID = wp_term_relationships.object_id)
WHERE ( wp_term_relationships.term_taxonomy_id IN (4,3) )
AND wp_posts.post_type = 'post' 
AND (wp_posts.post_status = 'published') 
```

# sql - 密码保护我的 SQL Server 数据库免受用户攻击

> ID：12855667
> 
> 赞同：0
> 
> 时间：2012-10-12T09:05:41.603
> 
> 标签：sql, sql-server, sql-server-2008, protection

在互联网上阅读后我有点困惑，这是无法做到的。

我有一个安装在客户端机器上的应用程序。此应用程序使用随应用程序一起安装的 SQL Server 2008 数据库。该数据库包含一些表，其中包含诸如礼品券余额等重要信息。

我想防止对数据库的未经授权的访问，但问题是因为我将我的数据库安装在客户端机器上，他们已经可以通过 Windows 身份验证访问 SQL 管理工作室。

是否可以阻止他们访问我的数据库和表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T09:19:38.663

Your options:

1.  [DBDefence](http://www.dbdefence.com) (not free)
2.  [Transparent Data Encryption](http://msdn.microsoft.com/en-us/library/bb934049.aspx)
3.  Switch to Sql Server Compact Edition

# xml - 如何向 XElement 添加命名空间前缀

> ID：12855672
> 
> 赞同：0
> 
> 时间：2012-10-12T09:06:01.463
> 
> 标签：xml, f#

我知道[http://msdn.microsoft.com/en-us/library/bb387069.aspx](http://msdn.microsoft.com/en-us/library/bb387069.aspx)。我已阅读示例文章。但是在 F# 中，String 到 XName 的转换存在一些问题。我尝试使用的一些代码：

```
let ( !! ) : string -> XName = XName.op_Implicit

> XElement(!!"tmp:" + !!"root", !!"Content");; 
stdin(9,21): error FS0001: The type 'XName' does not support any operators named '+'

> XElement(!!("tmp:" + "root"), !!"Content");;
System.Xml.XmlException: The ':' character, hexadecimal value 0x3A, cannot be included in a name.

> XElement("tmp" + "root", "Content");;   
The type 'string' is not compatible with the type 'XName' 
```

我想要的是：

```
<tmp:root>Content</tmp:root> 
```

* * *

UPD：我只想要标签之前的前缀命名空间，就像这样：

```
<tmp:root>Content</tmp:root> 
```

没有这样的：

```
> let ns = XNamespace.Get "http://tmp.com/";; 

val ns : XNamespace = http://tmp.com/

> let xe = XElement(ns + "root", "Content");;

val xe : XElement = <root xmlns="http://tmp.com/">Content</root> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T12:01:01.373

我通常做的是...

```
let xmlns = XNamespace.Get

let ns = xmlns "http://my.namespace/"

XElement(ns + "root", "Content") 
```

此外，我倾向于不担心在字符串输出中格式化命名空间的两种不同方式之间的差异。对于 XML 解析器来说，这一切都意味着同样的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T09:21:12.207

我要做的是为每个命名空间定义一个额外的函数：

```
let (!!) = XName.op_Implicit

let tmp = 
    let ns = XNamespace.op_Implicit "www.temp.com"
    fun n -> XNamespace.op_Addition (ns, n)

XElement (tmp "root", "Content") 
```

或者，您可以创建一个处理名称中的“：”的函数：

```
let xn (name : String) =
    match name.IndexOf ':' with
    | -1 -> XName.op_Implicit name
    |  i -> XNamespace.op_Addition (XNamespace.Get (name.Substring (0, i)), name.Substring (i + 1))

XElement (xn "tmp:test", "Content") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T13:47:42.803

您需要添加一个命名空间才能使其正常工作。尝试这样的事情：

```
#r "System.Xml.Linq.dll";;
open System.Xml.Linq

let ns = "tmp" |> XNamespace.Get
let ( !! ) : string -> XName = XName.op_Implicit

let rt = !!("blank")

let urlset = new XElement(rt,
                          new XAttribute(XNamespace.Xmlns + "tmp",ns ),
                          new XElement( ns + "root","Content")) 
```

输出：

```
val urlset : XElement =
<blank xmlns:tmp="tmp">
   <tmp:root>Content</tmp:root>
</blank> 
```

# asp.net - ADO.Net - 从数据库中获取多个值

> ID：12855674
> 
> 赞同：1
> 
> 时间：2012-10-12T09:06:13.990
> 
> 标签：asp.net, ado.net

我是 Dotnet 的新手，有人可以请教 - 我想写一个类库，它可以帮助多个函数，它们将从数据库中获取值。然后这个类库将被编译为 DLL 并提供给其他应用程序使用。

任何人都可以提供我的链接 - 我可以在其中找到 Ado.net 的好示例，或者可以提供任何工作代码，向我展示如何从数据库中获取多个或单个值（在类库中编写所有这些）

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T09:12:42.887

[ADO.NET](http://msdn.microsoft.com/en-us/library/e80y5yhx%28v=vs.110%29.aspx) @MSDN 是一个很好的起点。

CodeProject 提供了一个很好的[教程](http://www.codeproject.com/Articles/361579/A-Beginners-Tutorial-for-Understanding-ADO-NET)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T09:18:06.770

看看这个：[在 ADO.NET 中检索和修改数据](http://msdn.microsoft.com/en-us/library/ms254937.aspx)

如果您已经知道如何创建和打开与数据库的连接，请阅读本节：[DataAdapters 和 DataReaders](http://msdn.microsoft.com/en-us/library/ms254931.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T09:14:53.343

去[http://www.w3schools.com/](http://www.w3schools.com/)，它会帮助你做得更好。

# flash - Flash ActionScript2 循环

> ID：12855676
> 
> 赞同：1
> 
> 时间：2012-10-12T09:06:24.103
> 
> 标签：flash, actionscript-2

我在一个 Flash 文件中有 180 个按钮，对于所有按钮，我需要翻转和点击事件，所以我使用的代码是：

```
button1.onRollOver = function() { //on roll over change button color as white
  var color = new Color(button1); 
  color.setRGB("0xFFFFFF"); 
};
button1.onRollOut = function() { //on roll out reset button color to it`s default
  resetColorFunction(); 
};
button1.onPress = function() { //on click/press runs javascript function in page
  getURL("javascript:ButtonPress('button1');"); 
}; 
```

问题是我有 180 个按钮，所以我将此代码复制到每个按钮、按钮 1、按钮 2、按钮 3、按钮 4 等，直到按钮 180。

有没有办法用一个简单的代码来循环所有按钮，函数。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-29T10:46:51.993

您可以在舞台或任何容器中使用`for-in`循环。

```
for (var item in this) {
    if (this[item] instanceof Button) { //-- Use the most relevent class for abstraction
        var btn = this[item];
        trace ("Button: " + btn._name + " btn._x:" + btn._x + " a: " + btn._alpha);

        //-- add Logic for event handlers.
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T09:21:37.347

您可以将所有这些按钮添加到某种集合中，然后遍历所有元素并添加事件处理程序。像这样的东西：

```
var buttons:ArrayCollection = new ArrayCollection();
var button1:Button = new Button();
var button2:Button = new Button();
// some more buttons creation ... 
```

每次创建按钮时，只需将其添加到`buttons`集合中即可。

```
buttons.addItem(button1);
buttons.addItem(button2);
// etc 
```

最后，您只需遍历所有按钮并添加所需的事件处理程序。

```
for each (var button:Button in buttons)
{
    button.onRollOver = function() { // handle RollOver };
    button.onRollOut  = function() { // handle RollOut };
    button.onClick    = function() { // handle Click };
} 
```

要使用数组，您可以执行以下操作：

```
var buttons:Array = [];
buttons.push(button1);
// add all other buttons..

for (var i:uint = 0; i < buttons.length; i++)
{
    var button:Button = Button(buttons[i]);
    button.onRollOver = function() { // handle RollOver };
    button.onRollOut  = function() { // handle RollOut };
    button.onClick    = function() { // handle Click };
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T15:08:29.003

您可以在 Actionscript 2 中使用 eval 以最轻松的方式标记所有按钮。

```
buttonRollOver = function() { ... };
buttonRollOut = function() { ... };
buttonPressed = function() { ... };

for (var i=1; i<181; i++)
{
   eval("button"+i).onRollOver = buttonRollOver;
   eval("button"+i).onRollOut = buttonRollOut;
   eval("button"+i).onPress = buttonPressed;
} 
```

这一切都很好而且很快。

# ajax - 如何在点击事件换行后加载 div？

> ID：12855678
> 
> 赞同：0
> 
> 时间：2012-10-12T09:06:33.180
> 
> 标签：ajax, wordpress, jquery

我正在 Wordpress 下创建一个单页投资组合。每个画廊缩略图都是一个列表项。
当您单击一个项目时，它会加载一个滑动抽屉 (#DrawerContainer)，使用 ajax 从帖子中拉出内容。

我希望这个抽屉出现在点击项目之后的行上。由于它是一种流畅的布局，我不知道浏览器是连续显示 1、2、3、4 还是 5 个项目。

我试图将我的抽屉附加到每个`<li>`但我担心如果我点击一个缩略图，滑块会打开并使其他缩略图跳到下一行。

所以我认为防止布局问题的最佳方法是**仅在换行后调用抽屉**。

**如何定位行中的最后一个 li 项目，并在该行的换行符后加载一个 div？**

如果我不清楚，这里是我希望看到的代码

**编辑：**如果你想亲自动手，我只是将代码添加到 jsfiddle [http://jsfiddle.net/F6MvZ/10/](http://jsfiddle.net/F6MvZ/10/)

```
<ul id="portfolio-list">
    <li><a href="" class="ProjectWrap">item1</a></li>
    <li><a href="" class="ProjectWrap">item2</a></li>
    <li><a href="" class="ProjectWrap">item3</a></li> //end of first row (br/)

    <li><a href="" class="ProjectWrap">item4</a></li> //if I click this item
    <li><a href="" class="ProjectWrap">item5</a></li>
    <li><a href="" class="ProjectWrap">item6</a></li> //end of second row (br/)

        <div id="DrawerContainer"></div> // the content of item4 appears here

    <li><a href="" class="ProjectWrap">item7</a></li> //end of third row
</ul> 
```

这是我正在努力的代码

```
$(document).ready(function(){
    $.ajaxSetup({cache:false});
    $(".ProjectWrap,.mosaic-overlay,.mosaic-backdrop").click(function(){
        var post_link = $(this).attr("href");
        //$('#DrawerContainer').slideToggle(500);
        $("#DrawerContainer").html("loading...");
        $("#DrawerContainer").load(post_link + " #container > * ");
    return false;
    });

        //Here is the part I'm stuck with now

    $(#portfolio-list).click(function(){
        $("<br/>").append('<section id="DrawerContainer"></section>');
    });

        //I assume the #DrawerContainer will generate a br/

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T16:22:39.057

寻找这样的东西？

[http://jsfiddle.net/RF6df/1/](http://jsfiddle.net/RF6df/1/)

它是我最初写的内容的扩展。希望这可以帮助。

# django - Django AuditTrail 更新

> ID：12855679
> 
> 赞同：0
> 
> 时间：2012-10-12T09:06:38.643
> 
> 标签：django, audit

我想使用[AuditTrail](https://code.djangoproject.com/wiki/AuditTrail)审核我的一个模型。但是在项目的某些地方我有这样的代码：

```
q = Transaction.objects.filter(id = self.id).update(summa = self.summa) 
```

审计跟踪是否适用于此代码或仅适用于`model.save()`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T07:35:32.103

答案有点晚，但为了完整性，迟到总比没有好：

从 AuditTrail 源码中可以看出，AuditTrail 与模型的连接是通过 post_save 信号

`models.signals.post_save.connect(_audit, sender=cls, weak=False)`

（因此与执行自动插入等的数据库触发器没有关系）。

此外，从@isbadawi 的回答中可以看出这里

[django post_save 更新信号](https://stackoverflow.com/questions/7375875/django-post-save-signals-on-update)

post_save 信号仅在 save() 时触发。因此，答案是 AuditTrail 不适用于您的案例（查询集更新）:)

# c# - 具有多个计数器的 C# 远程性能计数器

> ID：12855681
> 
> 赞同：1
> 
> 时间：2012-10-12T09:06:43.707
> 
> 标签：c#, session, performancecounter

我尝试将以下代码用于远程计算机的性能计数器。getAll(counters) 返回一个字符串数组，其中包含我想要获取的所有性能计数器路径。但它不起作用。

调用命令后，结果不包含任何内容。任何想法为什么这不能正常工作？

```
Runspace runspace = RunspaceFactory.CreateRunspace();
runspace.Open();

Pipeline pipeline = runspace.CreatePipeline();

pipeline.Commands.AddScript(@"$sessions = New-PSSession -ComputerName " + serverName + Environment.NewLine
    + @"Invoke-Command -session $sessions -ScriptBlock {Get-Counter -counter " + getAll(counterNames) + " }" + Environment.NewLine
    + "Remove-PSSession -Session $sessions" + Environment.NewLine
    + "exit" + Environment.NewLine + "exit" + Environment.NewLine);

result = pipeline.Invoke(); 
```

例如 getAll 返回此

```
getAll(counterNames)
{string[2]}
    [0]: "\\Memory\\Available Bytes"
    [1]: "\\Processor(_Total)\\% Processor Time" 
```

我将此用于本地 Power Shell 命令，并且它可以正确使用 getAll

```
psh.AddCommand("get-counter");
                    psh.AddParameter("computername", serverName);
                    psh.AddParameter("counter", getAll(counterNames));

                    result = this.PowershellInvoke(psh); 
```

但我需要一个远程计算机的解决方案，我需要一个会话。

# javascript - 是否可以在没有浏览器嗅探和条件注释的情况下在 javascript 中测试 IE？

> ID：12855683
> 
> 赞同：2
> 
> 时间：2012-10-12T09:06:45.410
> 
> 标签：javascript, internet-explorer, browser-detection

我很想知道是否可以在不使用浏览器嗅探/条件注释分配给 IE的情况下在 Javascript`insertRule`和Javascript 方法之间切换。`addRule``addRule`

在 CSS 中，我可以使用特定设备不支持的属性（例如 IE ::pseudo-selector）来为特定浏览器编写规则。Javascript中有类似的技巧吗？

感谢您的一些见解！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T09:14:53.000

改用[特征检测](https://www.google.com/search?q=JavaScript+feature+detection)：

```
var abstractedInsertOfRule = function (rule, stylesheet){
    //if (object) is a quick way to test if the object is defined
    //in browsers that do not implement "insertRule",
    //if (insertRule) returns "falsy"
    if (insertRule) {
        insertRule(rule, stylesheet);
    } else if (addRule) {
        addRule(rule, stylesheet);
    } else {
        //call other rule insertion methods here
    }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T09:09:35.613

```
if(sheet.addRule) { 
    sheet.addRule(...);
}
else
{
    sheet.insertRule(...);
} 
```

# java - 如何在java中找到用户位置

> ID：12855686
> 
> 赞同：3
> 
> 时间：2012-10-12T09:06:49.263
> 
> 标签：java, mysql, jquery

如何从他的**IP**地址获取用户位置

我可以利用哪些免费的 Java API 来获取用户的位置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T09:11:46.970

您要查找的关键字是“地理位置”。我一直在使用

[http://www.maxmind.com](http://www.maxmind.com)

10年了。他们也有[免费服务](http://www.maxmind.com/en/geolite)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T09:21:38.003

可能是这些链接可以帮助您：

1.  [地理谷歌](http://geo-google.sourceforge.net/index.html)
2.  [主机](http://www.hostip.info/)
3.  [GeoLite 数据库](http://www.maxmind.com/app/geolitecountry)

# extjs - extjs emptyText 在用户选择时消失

> ID：12855688
> 
> 赞同：1
> 
> 时间：2012-10-12T09:06:58.830
> 
> 标签：extjs, extjs4.1

我有以下。我的问题是，当用户选择客户端时，“--- Clients ---”会从组合框中消失。emptyText 是在这里使用的正确属性。

```
 {
                                xtype:'combobox',
                                name:'Clients',
                                id:'Clients',
                                displayField:'Name',
                                emptyText:'-------- Clients --------',
                                store:'Clients',
                                queryMode:'local',
                                mode:'local',
                                allowBlank:true,
                                valueField:'Id',
                                width:200
                            }, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T13:50:39.960

简短回答“否”，空文本仅设计为在选择任何内容之前的默认值。

添加到商店的建议是正确的，在您创建商店并获取服务器端数据后，为您的虚拟行手动添加（或者确保您的服务器端数据集包含虚拟行）

就像是：

```
var dummyModel = Ext.create('Namespace.MyModel', 
{
    id: -1,
    text: 'dummy text'
});
Ext.getStore('myStore').add(dummyModel) 
```

# php - 带有包含或评估的自定义流包装器？

> ID：12855692
> 
> 赞同：11
> 
> 时间：2012-10-12T09:07:08.830
> 
> 标签：php, eval, template-engine, stream-wrapper

## 概述

我目前正在编写模板引擎。它甚至支持多种“格式”。目前它可以解析`.php`文件和`.tpl`（特定于这个引擎）。

我会给你一个两者的小例子，只是为了给你一个想法。

**模板.php：**

```
Name: <?php echo $this->h($name) ?>
Posts: 
<?php foreach($posts as $post): ?>
    - <?php echo $this->h($post->name) ?> (<?php echo count($post->comments) ?> comments)
      <?php echo $this->render('post/shortpost', array('post' => $post)) ?>
<?php endforeach ?> 
```

这基本上只是一个标准的 PHP。

**模板.tpl**

```
Name: {>$name}
Posts: 
{foreach($posts as $post):}
    - {>$post->name} ({=count($post->comments)} comments)
      {=:render('post/shortpost', array('post' => $post))}
{endforeach} 
```

这种模板“语言”简单地被翻译成上面的 PHP。

## 比较

### 评估（）

目前这些模板是使用`eval()`.

**临**

*   我不必更改任何代码

**魂斗罗**

*   当模板中发生错误时，您只会收到一条无用的错误消息，它不会告诉您错误发生在哪个文件中，有时行号甚至是错误的。
*   安全？模板文件只需要可读吗？
*   很难调试代码。
*   代码更难理解
*   更多的 .. ？

### 流包装器和 include()

我最近阅读了 php 中的流包装器。你甚至可以创建自己的。另一个解决方案`eval`是为每个模板“格式”创建自定义流包装器并使用 include 来解析模板。

这有以下（潜在的）缺陷：

**临**

*   可以解决在错误消息中显示错误文件/行号的问题（有没有人遇到过这个问题？）
*   您可以完全按照希望处理的方式处理模板文件。完全控制。

**魂斗罗**

*   `allow_url_(fopen|include)`必须开启？
*   它很慢吗？（也很`eval()`慢？）
*   在安全方面没有收获。include 与 eval 的作用基本相同。
*   更多的 ... ？

### **编辑：**缓存的解析文件和 include()

第三种选择是将模板解析为 PHP 代码并缓存它们（如 @Jen-YaKovalev 所建议的那样）。

**临**

*   包括缓存

**魂斗罗**

*   如果在包含渲染模板时发生错误并且发生错误，则错误消息不会将您指向正确的文件/最终会显示错误的行号。
*   您需要一个额外的`tmp/`目录来保存已解析的文件。您需要 PHP/webserver 的写入权限。会更不安全，因为黑客会更容易附加一些恶意代码。

### **编辑：**流过滤器和包含（'php://filter'）

最近发现了以下 php.net 页面：

*   `php://filter:` [http://php.net/manual/en/wrappers.php.php](http://www.php.net/manual/en/wrappers.php.php)
*   `strea_filter_register` [http://fr2.php.net/manual/en/function.stream-filter-register.php](http://fr2.php.net/manual/en/function.stream-filter-register.php)

这将是解决此问题的另一种可能性。使用`include('php://filter/read=filtername/resource=file.php')`，我可以包含一个`filtername`在执行之前首先通过过滤器的文件。

**临**

*   不需要像流包装器那么多的代码

**魂斗罗**

*   不像流包装器（缓存？）
*   安全？
*   速度？

## 问题

*   有使用流包装器解析模板文件或类似文件的经验吗？
*   还有其他解决方案吗？
*   有更多的专业人士和反对者吗？
*   你会推荐哪一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T17:02:23.853

我认为这只是一个人的编码风格的品味，你最好投票它或其他东西。

*   我个人认为*eval 是邪恶*的（在每种语言中），
*   对 include + php 包装器（甚至集成的包装器*）有不好的体验，
*   知道所有大（gish）模板系统都使用*编译*为 php 文件（smarty，twig），这是我会使用的一个。

(*) 在早期的项目中，我们在[数据 url](http://en.wikipedia.org/wiki/Data_URI_scheme)包装的包含中使用了 1 行代码（一个空的类扩展），它的性能很糟糕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T21:46:54.650

您当然不想在生产环境中的每个请求都解析模板，这会浪费资源，因此是一种缓慢且不是非常聪明的方法，因此我强烈建议使用**缓存的解析文件并包含（ )**方法。

# iphone - 定期吊销证书的任何问题

> ID：12855698
> 
> 赞同：2
> 
> 时间：2012-10-12T09:07:28.503
> 
> 标签：iphone, ios, certificate, iphone-developer-program, certificate-revocation

**如果我定期（10 次/月）吊销我的开发证书，有什么问题吗？**

假设我正在使用具有**1 个开发证书和 3 个配置文件**的不同系统开发 3 个应用程序。我会定期将新设备添加到我们所有的临时配置文件中。

在其他 2 台机器上安装配置文件时，**Xcode Organizer**显示警告为“ **A valid signing identity matching this profile could not be found in your keychain** ”。所以我刚刚撤销了我之前的证书并从同一个机器钥匙串生成了新的证书请求。下载新证书后，一切似乎都正常。

然而，其他机器**Xcode 组织者**在尝试修改和下载配置文件时会显示相同的警告。所以我总是会以这种方式解决问题（撤销并重新生成新问题）。

所以我想知道，如果我定期撤销我的开发证书（如帐户禁令/封锁等），会有什么问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-12T09:13:59.047

无需每次都吊销您的证书。在安装开发证书的系统上，进入 Key Chain Access 并选择证书和密钥，右键单击以获取导出选项，然后作为文件导出到您的桌面。现在将该 .p12 文件发送到*另一*台Mac，您可以在其中双击该 .p12 文件以将其安装到该系统的 Key Chain Access 中。您以相同的方式安装证书，一旦完成，它将不会显示该消息。

# asp.net - ASP.NET 3.5 的 Web 应用程序中的完全异步

> ID：12855701
> 
> 赞同：0
> 
> 时间：2012-10-12T09:07:56.177
> 
> 标签：asp.net, wcf, asynchronous, .net-3.5

我一直在告诉自己我发现了`async`一篇`.net 3.5` 关于此的非常好的文章：`http://msdn.microsoft.com/en-us/magazine/cc163725.aspx`

现在，问题是，所有这些方法仍然需要在`Page_Render`事件之前完成异步任务，所以在实践中，Web 应用程序对于用户来说仍然是“挂起”的。

**我的问题：**如何`async`从我的页面启动一项繁重的任务`aspx`，而无需等待或`callback`完成此任务，然后只渲染页面。实际工作是在`WCF`服务中完成的（创建文档、发送邮件）

伪代码：

```
void btn_Click()
{
   AsyncCallWcfServiceButDontWaitForIt();
   lblFeedback.Text = "Your documents are beging generated and mailed in the background";  
} 
```

我想给用户直接反馈，而其余的则在后台处理。我已经通过执行 a 实现了类似的东西，`console script`但我正在寻找一种可能的更好`async`方法。

另请注意，我正在寻找`.NET 3.5`解决方案！

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T09:09:25.570

您正在寻找的*不是*这里的异步（尽管您也应该这样做）......您正在寻找的是 AJAX；您渲染页面，然后通过 Ajax 加载缓慢加载的信息（使用异步代码，就像往常一样）

# asp.net-mvc - 如何在 html 中重新加载单个元素？

> ID：12855702
> 
> 赞同：0
> 
> 时间：2012-10-12T09:08:00.123
> 
> 标签：asp.net-mvc

我有一个包含一些文本框和列表的 html。然后我为我的列表添加了分页，但是每当我尝试单击下一页的列表时，它会重新加载整个页面，然后导致错误，因为该页面需要一个在分页被单击时变为空的 id。我该如何解决这个问题？我正在使用 MVC 和剃刀（cshtml）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T09:09:30.873

在 url 中提供所需的 id，以便您可以在其他页面上获取它

例如。

http:://localhost/abc.html?id=xyz

# iphone - Facebook 在一部 iPhone 的两个不同应用中登录

> ID：12855703
> 
> 赞同：0
> 
> 时间：2012-10-12T09:08:00.700
> 
> 标签：iphone

我在这两个应用程序中开发了两个与 facebook 集成的应用程序，我的要求是如果我打开一个应用程序并登录到 facebook 帐户，如果我打开第二个应用程序它应该同时登录。

谢谢尼希尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T09:14:57.597

这实际上是不可能的，因为这两个应用程序都必须使用相同的 Facebook 应用程序 ID。

由于 Facebook App ID 应该是 App URL 方案的一部分，iOS 看不到这两个应用程序之间的区别，并且会打开最后安装的那个。

您可以尝试将 Facebook 登录数据存储在钥匙串中并在其他应用程序中使用，但不确定这是否可行。

# c# - 时间跨度不接受 MVC3 中的日期

> ID：12855704
> 
> 赞同：4
> 
> 时间：2012-10-12T09:08:01.527
> 
> 标签：c#, asp.net-mvc-3, timespan

我有一个 MVC3 应用程序，我想在其中将时间跨度设置为例如 2 天 5 小时。当我输入 02:05:00:00 时，它给了我以下异常：

```
System.OverflowException: SqlDbType.Time overflow.  Value '2.05:00:00' is out of range.  Must be between 00:00:00.0000000 and 23:59:59.9999999. 
```

当我输入 05:00:00 时，它会正确地将 5 小时保存到数据库中。根据 MSDN 时间跨度有几天的财产。我如何正确设置天数？

模型：

```
public class ProductionTimeVM
{        
    [Required]
    public TimeSpan DefaultTime { get; set; }
} 
```

在我看来，我只是使用：

```
@Html.TextBoxFor(x => x.DefaultTime) 
```

对于我的控制器：

```
public ActionResult SaveProductionTime(ProductionTimeVM vm)
{           
   ProductionTime productionTime = new ProductionTime();
   productionTime.Default = vm.DefaultTime;

   //some more code
 } 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T09:25:58.907

您可能正在将 TimeSpan 值保存到数据库中具有[Time](http://msdn.microsoft.com/en-us/library/bb677243.aspx)数据类型的列。Time 只能表示一天中的某个时间，因此您不能保存大于一天的 TimeSpan。

我使用具有 bigint 数据类型的列来存储和检索 TimeSpan 的刻度。我也想知道是否有更好的选择。这种行为就像一些流行的 ORM 的默认行为，我认为它误导了很多人。

# jquery - 使用jquery禁用文本字段中字母的复制粘贴

> ID：12855708
> 
> 赞同：3
> 
> 时间：2012-10-12T09:08:07.737
> 
> 标签：jquery

在我的项目中，我的文本字段仅采用数值。但是当我使用 ctl+c 复制字母并使用 ctl+v 粘贴时，它将允许文本字段中的字母。所以我使用以下命令禁用复制和粘贴代码。

```
$('input').bind('copy paste', function(e) {
 e.preventDefault();
}); 
```

但我只想阻止字母。这意味着我想要复制粘贴数值而不是字母。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T10:04:35.167

试试这个功能。这可能不是你想要的，但你可以做一些事情。我之前做过这个并发布在我的博客上。

**JS：**

```
 $(function(){  
                $(".numericOnly").bind('keypress',function(e){  
                          if(e.keyCode == '9' || e.keyCode == '16'){  
                                return;  
                           }  
                           var code;  
                           if (e.keyCode) code = e.keyCode;  
                           else if (e.which) code = e.which;   
                           if(e.which == 46)  
                                return false;  
                           if (code == 8 || code == 46)  
                                return true;  
                           if (code < 48 || code > 57)  
                                return false;  
                     }  
                );  
                $(".numericOnly").bind("paste",function(e) {  
                     e.preventDefault();  
                });  
                $(".numericOnly").bind('mouseenter',function(e){  
                      var val = $(this).val();  
                      if (val!='0'){  
                           val=val.replace(/[^0-9]+/g, "")  
                           $(this).val(val);  
                      }  
                });  
           }); 
```

**HTML：**

```
 <body>  
       <input type="text" id="textBox" class="numericOnly" />  
 </body> 
```

这将允许您仅输入数值。你甚至不能复制粘贴和拖放。

**[演示](http://firstblog-jc.blogspot.com/p/demo-prevent-copy-paste-on-input-allow.html)**

**[代码链接](http://firstblog-jc.blogspot.com/2011/08/prevent-copy-paste-on-input-allow-only.html)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T10:45:22.277

在查看了事件对象和“duckduckgoing”之后：

```
$('input').on('paste', function (event) {
    if (event.originalEvent.clipboardData.getData('Text').match(/[^\d]/)) {
        event.preventDefault();
    }
}); 
```

我不知道这是如何跨浏览器的，但如果向后兼容性没有问题，请继续使用它。

在[codepen上查看](http://codepen.io/anon/pen/sbIni)

PS：我在 mac os 10.6 上使用 google chrome 版本 22

编辑：firefox 13 没有 clipboardData 对象，即 10 也没有，safari 5.1.2 支持它（所以它是一个 webkit 功能）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T09:10:02.007

此函数适用于 jQuery。它只允许数字文本框代码：

```
jQuery.fn.filter = function() {
    $(this).keydown(function (e) {
        if (e.shiftKey || e.ctrlKey || e.altKey) { // if shift, ctrl or alt keys held down
            e.preventDefault();         // Prevent character input
        } else {
            var n = e.keyCode;
            if (!((n == 8)              // backspace
            || (n == 46)                // delete
            || (n >= 35 && n <= 40)     // arrow keys/home/end
            || (n >= 48 && n <= 57)     // numbers on keyboard
            || (n >= 96 && n <= 105))   // number on keypad
            ) {
                e.preventDefault();     // Prevent character input
            }
        }
  $(document).mousedown(function(e){ 
    if( e.button == 2 ) { 
      e.preventDefault();         // Prevent character input
        } else {
            var n = e.keyCode;
            if (!((n == 8)              // backspace
            || (n == 46)                // delete
            || (n >= 35 && n <= 40)     // arrow keys/home/end
            || (n >= 48 && n <= 57)     // numbers on keyboard
            || (n >= 96 && n <= 105))   // number on keypad
            ) {
                e.preventDefault();    
            }
    }
    });
} 
```

我不确定你的适当需求，但试试这个。对不起，如果它不是你想要的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T09:34:17.847

对于您的问题，我有一个有趣的解决方法。对于`paste`事件，您可以使用以下代码：

```
$("input").on("paste", function(e) {
    var that = this;
    that.style.color = "#fff";      // field background color
    setTimeout(function() {
        that.value = that.value.replace(/\D/g, "");
        that.style.color = "#000";  // normal field font color
    }, 100);
});​ 
```

**演示：http:** [//jsfiddle.net/dgWDX/](http://jsfiddle.net/dgWDX/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-26T18:34:20.103

jaychapani 提供的解决方案几乎适用于该用户的特定问题。但是，它可以防止粘贴任何内容，甚至是数字。

我稍微修改了代码，现在 Javascript (a) 允许用户粘贴数字，但 (b) 不允许使用字母和特殊字符。我从上面的 jaychapani 示例中删除了以下内容：

```
 $(".numericOnly").bind("paste",function(e) {  
                 e.preventDefault();  
            }); 
```

最终代码将是：

```
 $(function(){  
            $(".numericOnly").bind('keypress',function(e){  
                      if(e.keyCode == '9' || e.keyCode == '16'){  
                            return;  
                       }  
                       var code;  
                       if (e.keyCode) code = e.keyCode;  
                       else if (e.which) code = e.which;   
                       if(e.which == 46)  
                            return false;  
                       if (code == 8 || code == 46)  
                            return true;  
                       if (code < 48 || code > 57)  
                            return false;  
                 }  
            );  

            $(".numericOnly").bind('mouseenter',function(e){  
                  var val = $(this).val();  
                  if (val!='0'){  
                       val=val.replace(/[^0-9]+/g, "")  
                       $(this).val(val);  
                  }  
            });  
       }); 
```

这有效，并且在使用 Ctl+v 或从菜单粘贴时会拒绝字母和特殊字符。但是，我注意到，有时在用户粘贴不需要的字符之后，表单拒绝它们之前会有一段时间的延迟。

通常，拒绝不需要的字符会在一两秒后发生。但是在少数情况下，文本被清除之前的等待时间大约为 10 秒。我猜这是因为（a）我正在刷新观察行为并且一些奇怪的缓存行为导致 Javascript 快速工作的延迟或（b）Javascript 的一些循环问题或（c）一些组合两个都。

不过，这在大多数生产环境中都可以正常工作。我怀疑用户在提交之前会一遍又一遍地刷新页面。

但是，我想知道是否有更优化的解决方案。欢迎提出改进这一点的建议。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-05-24T22:28:55.333

我已经更新了 jaychapani 的答案。在这里，我添加了对箭头键的支持。并防止`%` `&` `(`按键。

```
 $("input").bind('keypress', function (e) {
    if (e.keyCode == '9' || e.keyCode == '16') {
        return;
    }
    var code;
    if (e.keyCode) code = e.keyCode;
    else if (e.which) code = e.which;
    if (e.which == 46)
        return false;
    if (e.which == 33 || e.which == 64 || e.which == 35 || e.which == 36 || e.which == 37 || e.which == 94 || e.which == 38 || e.which == 42 || e.which == 40 || e.which == 41)
        return false;
    if (code == 8 || code == 46)
        return true;
    if (code == 37 || code == 38 || code == 39 || code == 40)
        return true;
    if (code < 48 || code > 57)
        return false;
});

$("input").bind("paste", function (e) {
    e.preventDefault();
});
$("input").bind('mouseenter', function (e) {
    var val = $(this).val();
    if (val != '0') {
        val = val.replace(/[^0-9]+/g, "")
        $(this).val(val);
    }
}); 
```

[JSFiddle 演示](https://jsfiddle.net/qsocgph2/118/)

谢谢你。

# jquery - 列表显示隐藏与 jquery

> ID：12855714
> 
> 赞同：0
> 
> 时间：2012-10-12T09:08:32.213
> 
> 标签：jquery, show-hide

我有这个清单：

```
<ol id="followUs">
    <li>Follow us</li>
    <li class="blog"><a href="#"></a></li>
    <li class="linkedIn"><a href="#"></a></li>
    <li class="twitter"><a href="#"></a></li>
    <li class="facebook"><a href="#"></a></li>
    <li class="smartPhone"><a href="#"></a></li>
    <li id="shareMore">More
        <ul id="socialMore" style="display: none;">
            <li id="youtube"><a href="#">Youtube</a></li>
            <li id="flickr"><a href="#">FlickR</a></li>
            <li id="slideshare"><a href="#">SlideShare</a></li>
            <li id="newsletter"><a href="#">Newsletter</a></li>
        </ul>
    </li>
</ol> 
```

以及以下 jQuery：

```
<script>
jQuery(document).ready(function(){
    jQuery("li#shareMore").mouseenter(function() {
        jQuery('ul#socialMore').css("display","block");
        jQuery('span.popin_header_button').css("display","none");
    });

    jQuery("li#shareMore").mouseleave(function() {
        setTimeout( function(){
            jQuery('ul#socialMore').css("display","none");  
            jQuery('span.popin_header_button').css("display","block");
        },1000);
    });
})
</script> 
```

第二个列表#socialMore 在页面加载时隐藏，我想在鼠标悬停时显示它，当我将鼠标悬停在#socialMore 列表周围时，它会保持在那里。问题是，当我仍然悬停在#socialMore 列表时，列表会出现和消失（除非第二个列表与第一个重叠，这是我不想要的）。

其次，我希望周围的员工位于列表下方，这不会发生，因此我需要隐藏这些。

对于 CSS，第一个列表 #followUs 是水平的，第二个列表 #shareMore 是垂直的。

任何人都可以在这里提出解决方案。不明白出了什么问题。

感谢路过。

**10 月 15 日编辑**

我将jQuery更改为：

```
jQuery("li#shareMore").hover(function() {
    jQuery('li#shareMore>ul').show();
},function(){
        setTimeout( function(){
            jQuery('li#shareMore>ul').hide();   
        },2000);
    }
); 
```

它有效，但不稳定。有时，它工作得很好，有时，即使我还在第一个徘徊，ul 也会消失`<li id="shareMore">More`

**编辑二：10 月 15 日**

进一步推动它，我发现它并不是真的不稳定。逻辑是，在页面刷新时，如果我悬停`li#shareMore`而不转到`>ul`列表，它会按预期工作。当我第一次将鼠标悬停在`>ul`列表上时，它也可以按预期工作。但是，一旦我从`>ul`列表中悬停，从以下时间开始，`>ul`列表就会在 setTimeOut 时间内消失，在这种情况下为 2 秒。

但是，如果我将 setTimeOut 限制设置为 0，一切都会按预期进行。这是迄今为止的观察，除非我遗漏了什么。陌生的世界 ！

感谢任何提示>奇怪的情况。

**编辑**

似乎终于解决了，使用 cleartimeout: [jquery hover and setTimeout / clearTimeOut](https://stackoverflow.com/questions/10299531/jquery-hover-and-settimeout-cleartimeout)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T09:10:21.467

您可以为此使用jquery的`show()`和功能。像`hide()`

```
 $('ul#socialMore').show();
 $('span.popin_header_button').hide(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T10:07:05.370

你能试试下面的代码吗

```
jQuery("li#shareMore").on("mouseout", 'ul#socialMore li', function() {
    setTimeout( function(){
        jQuery('ul#socialMore').css("display","none");  
        jQuery('span.popin_header_button').css("display","block");
    },1000);
}); 
```

开始使用 jquery 的“on”事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T10:00:49.933

你可以试试：

```
jQuery(document).ready(function(){
    jQuery("li#shareMore").mouseenter(function() {
       $('ul#socialMore').show();
    });

    jQuery("li#shareMore").mouseleave(function() {
       $('ul#socialMore').hide();
    });
}) 
```

见：[jsfiddle](http://jsfiddle.net/liorlolo/G4jpF/2/)

# ruby-on-rails - 使用 ember-rails gem 时出错：“未捕获的错误：断言失败：Ember Handlebars 需要 Handlebars 1.0.beta.5 或更高版本”

> ID：12855723
> 
> 赞同：4
> 
> 时间：2012-10-12T09:09:07.263
> 
> 标签：ruby-on-rails, ember.js

我是第一次使用 Ember JS。它用于 Rails 项目，我正在使用 ember-rails gem。我已按照 ember-rails GitHub 上的说明进行操作。

在`bundle install`我跑开之后`rails g ember:bootstrap`。然后，我还将以下两行添加到 application.js：

```
//= require ember

App = Ember.Application.create(); 
```

问题是当我访问 localhost:3000/ 时，控制台中记录了以下 JavaScript 错误：

```
Uncaught Error: assertion failed: Ember Handlebars requires Handlebars 1.0.beta.5 or greater :3000/assets/ember.js?body=1:43
Uncaught ReferenceError: DS is not defined :3000/assets/store.js?body=1:1
Uncaught TypeError: Cannot call method 'template' of undefined :3000/assets/templates/application.js?body=1:1
Uncaught TypeError: Cannot call method 'template' of undefined :3000/assets/templates/application.js?body=1:1
Uncaught Error: <HotDoc.ApplicationView:ember138> - Unable to find template "application". 
```

我正在运行 Rails 3.2.6。

有什么想法可以解决这些问题吗？据我了解，ember-rails 包含 Handlebars 代码，因此我不需要添加任何其他 gem。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T09:25:34.443

在 Ember 1.0.pre 中，他们解开了 Handlebars。您需要自己提供。看起来像 ember-rails 假设同样的事情。

**编辑**

您需要在文件顶部添加

```
//= require handlebars 
```

# sencha-touch - Sencha Touch 2 垂直添加两个列表？

> ID：12855728
> 
> 赞同：0
> 
> 时间：2012-10-12T09:09:16.863
> 
> 标签：sencha-touch, extjs, sencha-touch-2

我想要一个垂直显示两个列表的面板。下面的代码：

```
Ext.define('CD.abc.Profile', {
extend: 'Ext.Panel',
layout: 'fit',
fullscreen: true,
config: {
   layout:     'vbox',
    items:      [
        {
            xtype: 'mylist1'
        },
        {
            xtype: 'mylist2'
        }
    ]
} 
```

});

但该项目不显示，页面显示为空白。我可以在 dom 结构中找到元素，但它们在视图中仍然不可见。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:57:27.597

尝试这个。它为我工作。

```
 Ext.define('CD.abc.Profile', {
        extend: 'Ext.Panel',
        config: {
           layout:'vbox',
            items:      [
                {
                    xtype: 'mylist1', // x-type of your list1 view
                    flex:1
                },
                {
                    xtype: 'mylist2', // x-type of your list2 view
                    flex:1
                }
            ]
        }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T18:46:13.013

试试这个适合我的工作：

```
Ext.define('Sencha.view.Blog', {
extend: 'Ext.Panel',
xtype:'blogpage',

config:{
    layout:'fit',
    width:'100%',
    height:'100%',
    title: 'Blog',
    iconCls: 'star',
    style:'background-color: red;',

    items:[
            { 
                xtype:'list',
                id:'thelist',
                style:'background-color: blue;',
                height:'100%', width:'20%',left:0,
                        store: {
            fields: ['name', 'number'],
            sorters: 'name',
            data: [
                {name: 'Shawshank Redemption', number: 5},
                {name: 'SuperBad', number: 3},
                {name: 'God Father', number: 5},
                {name: 'Forest Gump', number: 4.5},
                {name: 'A Beautiful Mind', number: 5},
            ]
        },

        itemTpl: '{name}'
            },
            { 
                xtype:'list',
                id:'thelist1',
                style:'background-color: blue;',
                height:'100%', width:'20%',right:0,
                        store: {
            fields: ['name', 'number'],
            sorters: 'name',
            data: [
                {name: 'Shawshank Redemption', number: 5},
                {name: 'SuperBad', number: 3},
                {name: 'God Father', number: 5},
                {name: 'Forest Gump', number: 4.5},
                {name: 'A Beautiful Mind', number: 5},
            ]
            },
            itemTpl: '{name}'
            }
        ]
}}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T11:43:46.773

将 flex 属性作为 1 传递

弹性：1

# tfs - TFS2012 sprint 规划：我可以修改“Backlog Query”吗？

> ID：12855738
> 
> 赞同：6
> 
> 时间：2012-10-12T09:09:35.443
> 
> 标签：tfs, backlog, sprint

我们已将 Team Foundation Server 2010 升级到 Team Foundation Server 2012，现在正在使用出色的 TFS2012 Web 访问来处理我们的产品待办事项、我们的 sprint 和我们的 Scrum 板。这一切都运作良好。除了这个：在我们的 TFS2012 网络访问中，我去工作，我看到了我的产品待办事项。但是，我只希望看到未分配给 Sprint（过去/当前或未来 sprint）的 PBI。但是我看到所有没有完成状态的 PBI。我希望 PBI 在移至 Sprint Backlog 时会从该 Product Backlog 中删除。对？

我想编辑工作项查询以进行更改，以便只有具有迭代路径的 PBI 不在 sprint 内。我可以这样做吗？

有一个按钮*创建积压查询*，当我单击该按钮时，将创建一个新查询。我可以编辑该查询 - 但它不用作积压/计划屏幕的查询。

我没有尝试查看此查询是否与新创建的 TFS2012 团队项目中的查询类似。它可能与 TFS2010 团队项目的升级有关。

提前致谢。

**10 月 15 日编辑：**

在创建这个问题时，我觉得 PBI 可以同时出现在 Sprint Backlog 和 Product Backlog 中是错误的。但是 - 在考虑如何完成计划时 - 这可能没问题。我应该将 Product Backlog 视为未完成的 PBI 的积压。PBI 可能会为 sprint（当前或未来，甚至是过去的 sprint）计划 - 但是它们还没有完成。

关于 Product Backlog 视图中的**预测**功能：这有一些问题。积压优先级比已经分配给 sprint 的 PBI 具有更高的优先级 - 这可以改进。我认为这个特性只能用于对未来的 sprint进行*非常粗略的估计。*如果您的 sprint 中有许多 PBI - 预测功能甚至可能会产生误导。这是我的意见。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T01:56:45.970

没有任何选项可以隐藏已在 sprint/迭代中的工作项或更改积压查询。我还检查了包含许多增强功能的 TFS 2012 Update 1 CTP。我认为这将是一个非常有用的功能。我创建了一个 Visual Studio UserVoice 功能建议。如果您有任何可用的选票，请随时为它投票，以便获得更多关注。

[http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/3257889-hide-iteration-work-items-in-web-access-backlog-or](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/3257889-hide-iteration-work-items-in-web-access-backlog-or)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T15:56:25.310

您需要将 PBI 更改为适当的状态。一旦它被“提交”到 Sprint，它就不再在 backlog 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-07T20:30:12.177

如果将 PBI 分配给特定的 sprint，并且您将 PBI 的状态设置为除 New 以外的任何状态，它将从 backlog 中消失并仅显示在 sprint 中。如果您将其保留在 New，它将同时显示。

# junit - 将 Junit XML 报告转换为 HTML 格式

> ID：12855740
> 
> 赞同：0
> 
> 时间：2012-10-12T09:09:35.410
> 
> 标签：junit, soapui

我正在使用soapui免费版生成测试用例报告，但它只生成XML形式的junit报告，现在我想将它转换成HTML形式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T10:31:38.363

有几种方法可以做到这一点，但是您可以按照此答案的建议简单地使用 XSL 转换（ [junitreport 选项）](https://ant.apache.org/manual/Tasks/junitreport.html)[如何为 Junit 结果生成 HTML 报告？](https://stackoverflow.com/questions/2385553/how-can-i-generate-an-html-report-for-junit-results)

```
<junitreport todir="${outputdir}">
    <fileset dir="${jrdir}">
        <include name="TEST-*.xml"/>
    </fileset>
    <report todir="${outputdir}/html"
        styledir="junitreport"
        format="frames">
        <param name="key1" expression="value1"/>
        <param name="key2" expression="value2"/>
    </report>
</junitreport> 
```

我还建议考虑使用 TestNG 的可能性，请在此处了解所有详细信息[https://stackoverflow.com/questions/12768214/testng-or-junit-in-java/12768737#12768737](https://stackoverflow.com/questions/12768214/testng-or-junit-in-java/12768737#12768737)

# php - 从字符串中获取最后一位数字

> ID：12855741
> 
> 赞同：2
> 
> 时间：2012-10-12T09:09:36.083
> 
> 标签：php, regex

我有这个字符串：tag:domain.com,2012-10-12:feed/channel/id/335

我试图从这个字符串中获取最后一个数字到一个变量中。此字符串中的日期也是动态的，但我不需要在变量中使用它。

这是我的代码：

```
$string = "tag:domain.com,2012-10-12:feed/channel/id/335";

preg_match(￼'/tag\:domain\.com,|\d+|-|\d+|-|\d+|\:feed\/channel\/id\/|\d+/', $string, $matches);

$last_digits = ??? 
```

也许有更简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T09:11:49.313

这应该有效。

```
$aParts = explode('/', $string);
$iId = end($aParts); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T09:12:03.263

就在这里。在字符串的末尾使用锚点：

```
preg_match(￼'/\d+$/', $string, $matches); 
```

（`$`表示字符串的结尾，或多行模式下的一行）

然后您可以像这样检索 ID：

```
$last_digits = $matches[0]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T09:12:19.793

```
preg_match('/(\d+)$/', $string, $matches); 
```

$ - 表示结束

$matches[1] 将具有您的价值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T09:14:29.507

这应该工作：

```
$string = "tag:domain.com,2012-10-12:feed/channel/id/335";
$pattern = "/\/(\d+)$/";
preg_match($pattern, $string, $matches);

$number = $matches[1]; 
```

`/`基本上，您要求输入 a和字符串结尾之间的任何数字`$`。

# mysql - MySQL用另一个值替换结果值

> ID：12855747
> 
> 赞同：4
> 
> 时间：2012-10-12T09:09:55.520
> 
> 标签：mysql, sql, case-when, ansi-sql

我有 MySQL，查询是：

```
select name,re_type from myTable 
```

我想替换所有类型的值：

```
1 = student
2 = teacher 
```

所以结果应该是：

```
name    re_type
---------------
Ron     Student
Mac     Teacher 
```

不喜欢：

```
name    re_type
---------------
Ron     1
Mac     2 
```

是否可以进行这样的查询，以便在 MySQL 中获得所需的结果？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-12T09:13:51.980

您可以使用 CASE 语句

```
SELECT name, CASE WHEN re_type = 1 THEN 'Student' WHEN re_type = 2 THEN 'Teacher' ELSE 'Donno' END AS re_type_text
FROM myTable 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T09:14:57.563

您可以使用一个联合表来存储您的 re_type 的标签，例如

```
re_type_id  re_type_label
1           student
2           teacher 
```

并通过以下方式更改您的查询：

```
select t.name,l.re_type_label
from myTable t
inner join labelsTable l
    on l.re_type_id = t.re_type 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T09:25:34.530

我认为他想在 re_type 字段上保留 ID，并在提取时对其进行解码。

您可以使用 CASE WHEN 或 ELT()，MySql 等效于 Oracle 的 Decode()，如解释[here](http://dev.mysql.com/doc/refman/4.1/en/string-functions.html#function_elt)

，但最佳实践是创建一个包含 re_type 和 re_type_description 字段的外部表，因此如果明天您将获得新值，则不必更改所有查询。

# linux - 当我在运行时编辑脚本时会发生什么？

> ID：12855750
> 
> 赞同：13
> 
> 时间：2012-10-12T09:09:56.350
> 
> 标签：linux, shell

当我一个脚本文件并在它仍在运行时保存它会发生什么，它会打印我需要的结果。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-12T09:21:34.310

让我们测试一下。

创建一个脚本`test.sh`：

```
#!/usr/bin/env bash

sleep 1
echo 'echo "executed overwritten"' >> "$0"   # append to self
sleep 1
echo 'executed original' 
```

并执行它：

```
$ bash --version
GNU bash, version 4.2.24(1)-release (i686-pc-linux-gnu)
Copyright (C) 2011 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>

This is free software; you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.
$ chmod +x test.sh 
$ ./test.sh 
executed original
executed overwritten
$ 
```

注意`bash`继续读取修改后的文件。当文件更改时，它会保持其在文件中的当前位置（以字节为单位）。

作为演示，脚本

```
#!/usr/bin/env bash

sleep 1
dd if=/dev/urandom bs=1024 count=1 of="$0" &>/dev/null   # overwrite self
sleep 1
echo 'executed original' 
```

给出输出

```
$ ./test.sh 
./test.sh: line 6: syntax error near unexpected token `$'\311\262\203''
./test.sh: line 6: `��z�eп9)�v��▒y�a��44'{�d��4\:�A����˷���&amp;�$�����l�
@(ɲ��4��OϹI�n>��7��P�M�a��X.�S�a���V�m�~O<��{}������J��$��TOtRd��Nw�&amp;��B�Dz�▒��-��<`�P<?N��▒rT�Jq�L����JY�*hz���M�����i�⫣��S+�����\��c���m�NKV�8|��xvX}�׉V����PTd䊄�9��7���|��/��X��
                                                                                                       ��0¤k��_�R���e�*���(qu:UUɭp/j��n��bŇ_�UR?3▒�▒�%Rn�|DE$8�QbaK)A�{ ��O>9��A�����lt�����g)s��O��M��@���w��|�����N��,W' 
```

请注意，它试图执行随机乱码。

（这是 Ubuntu 12.04。行为可能因其他 shell 而异。）

# iphone - AVAudioPlayer 仅在 iPhone 4S 上不播放声音

> ID：12855753
> 
> 赞同：0
> 
> 时间：2012-10-12T09:10:10.497
> 
> 标签：iphone, ios, avaudioplayer, audio

一年以来，我在商店里有一个应用程序，拥有 iPhone 4S 的人很少告诉我他们的设备上没有播放声音。（无论是使用耳机还是使用内置扬声器，他们都听不到任何声音）

我仍然在真实设备（iPhone 3G、3GS、4、ipod 1G、2G、3G、4G、ipad 1、2、3）上进行了测试，一切似乎都是正确的。声音正在播放。（在各种操作系统上测试：iOS 3.1.2 --> 6.0，它也适用于模拟器）

不幸的是，我自己没有用于测试的 iphone 4S，所以很难知道这个特定设备有什么问题。

会不会是 iPhone 声音设置的问题？

但也许这是关于我的代码的问题？所以，这是我用来播放声音的代码。

这是正确的吗 ？

在.h ...：

```
@private AVAudioPlayer* myPlayer; 
```

在他们中 ...：

```
-(IBAction)playMySound{
playerPlay = YES; // it's a bool variable used at an other place in the code
NSString *path;
if((path = [[NSBundle mainBundle]  
       pathForResource:[NSString stringWithFormat:@"%d", idsound ] 
       ofType:@"m4a" 
       inDirectory:@"sounds"]))
    {
    NSURL *url = [NSURL fileURLWithPath:path];
    NSError *error;
    myPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:&error];
    if (myPlayer == nil) {[myPlayer release]; return;}
    myPlayer.delegate = self;
    [myPlayer play];
    }
else return; 
} 
```

任何意见，将不胜感激 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T09:24:51.030

你的代码真的很奇怪：

在这里您正确地创建了播放器：

```
myPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:&error]; 
```

你检查它是否`nil`仍然正确。

```
if (myPlayer == nil) 
```

但是随后你调用`release`了一个 nil 对象，因为该对象是 nil，所以它什么也不做：

```
{[myPlayer release]; return;} 
```

这应该会好一点：

```
NSError *error = nil;
myPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:&error];
if (myPlayer == nil) {
   NSLog(@"Error creating AVAudioPlayer: %@", error); 
   return;
}
myPlayer.delegate = self;
[myPlayer prepareToPlay];
[myPlayer play]; 
```

# c# - .NET 在 X 秒后引发异常/引发事件

> ID：12855756
> 
> 赞同：1
> 
> 时间：2012-10-12T09:10:17.173
> 
> 标签：c#, .net

在长时间运行的 C# 方法中，我想在几秒钟后引发异常或引发事件。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T09:13:32.633

您可以使用计时器来执行此操作 - 将其设置为您希望的超时并在方法开始时启动它。

在方法的最后，禁用计时器——它只会在超时时触发，您可以连接到滴答事件。

```
var timer = new Timer(timeout);
timer.Elapsed = ElapsedEventHanler; // Name of the event handler
timer.Start();

// do long running process

timer.Stop(); 
```

我建议阅读[不同的计时器类](http://msdn.microsoft.com/en-us/magazine/cc164015.aspx)——这会让你知道它们中的哪一个最适合你的特定需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T09:15:48.727

Use System.Threading.Timer:

```
System.Threading.Timer t;
int seconds = 0;

public void start() {

    TimerCallback tcb = new TimerCallback(tick);
    t = new System.Threading.Timer(tcb);
    t.Change(0, 1000);          
}

public void tick(object o)
{
    seconds++;
    if (seconds == 60)
    {
        // do something
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T09:20:04.937

如果您打算停止长时间运行的方法，那么我认为向该方法添加取消支持将是一种更好的方法，而不是引发异常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T09:26:00.663

尝试以下操作，它具有取消异常的功能（如果进程完成）并在源线程上引发异常：

```
var targetThreadDispatcher = Dispatcher.CurrentDispatcher;
var tokenSource = new CancellationTokenSource();
var cancellationToken = tokenSource.Token;
Task.Factory.StartNew(() => 
{
    var ct = cancellationToken;

    // How long the process has to run
    Task.Delay(TimeSpan.FromSeconds(5));

    // Exit the thread if the process completed
    ct.ThrowIfCancellationRequest();

    // Throw exception to target thread
    targetThreadDispatcher.Invoke(() => 
    {
        throw new MyExceptionClass();
    }
}, cancellationToken);

RunProcess();

// Cancel the exception raising if the process was completed.
tokenSource.Cancel(); 
```

# android - ActionBarsherlock android.R.id.home 当我使用 Actionbarsherlock public boolean onOptionsItemSelected(MenuItem item) { switch (item.getItemId()) { case android.R.id.home: this.finish(); 问问题 问问题 2012-10-12T09:10:29.890 1895 次 This question shows research effort; it is useful and clear 9 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 当我使用 Actionbarsherlock public boolean onOptionsItemSelected(MenuItem item) { switch (item.getItemId()) { case android.R.id.home: this.finish(); return true; default: return super.onOptionsItemSelected(item); } } 我注意到 android.R.id.home 来自 API 11。我们如何确保 android.R.id.home 在 API 8 上是正确的？ 它是一个静态的最终常量，这意味着它的值被复制到编译后的代码中，而不仅仅是一个引用。这就是为什么它能够在每个 API 级别上成功使用的原因。 androidactionbarsherlock 4 1 回答 1 This answer is useful 8 It is a static final constant which means its value is copied into the compiled code instead of being just a reference. This is why it is able to be used successfully on every API level. 于 2012-10-12T14:48:53.667 回答 Related 2 objective-c - 无法在代码中更改 .xib UI 对象的框架 1 nullpointerexception - JavaFX 空指针异常 2 r - 如何将由“+”分隔的变量名列表传递给函数 1 ios - 了解 task_basic_info 任务 resident_size 3 java - 为什么在编译时会创建两个类文件？ 1 php - PDO 怀疑在 MySql 中转义了我的 Blob 的字符 0 java - 使用 JAXB 从 XSD 文件创建只读类 6 python - 在 Python 中的函数中连接任意数量的列表 2 c++ - 在 C++ 中读取输入 1 recursion - 埃菲尔的二叉树 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：12855760
> 
> 赞同：9
> 
> 时间：
> 
> 标签：android, actionbarsherlock

当我使用 Actionbarsherlock

```
public boolean onOptionsItemSelected(MenuItem item)
{
    switch (item.getItemId())
    {
    case android.R.id.home:
        this.finish();
        return true;
    default:
        return super.onOptionsItemSelected(item);
    }
} 
```

我注意到 android.R.id.home 来自 API 11。我们如何确保 android.R.id.home 在 API 8 上是正确的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-12T14:48:53.667

It is a static final constant which means its value is copied into the compiled code instead of being just a reference. This is why it is able to be used successfully on every API level.

# sql - Sql查询查找日期之间的差异

> ID：12855761
> 
> 赞同：-4
> 
> 时间：2012-10-12T09:10:30.097
> 
> 标签：sql

我需要一个 sql 查询来找出两个日期之间的差异。我已经尝试过 between 子句查询，但它包括开始日期。但我需要一个排除开始日期的查询。所以请给我一个不同的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T09:16:03.697

您可以使用[DATEDIFF](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_datediff)方法

例如：

```
SELECT DATEDIFF(SELECT DATE_ADD(start_date,INTERVAL 1 DAY),end_date); 
```

如果您想排除 start_date，或者根据您的要求更改间隔

# postgresql - PostgreSQL 访问 generate_series() 单元

> ID：12855762
> 
> 赞同：1
> 
> 时间：2012-10-12T09:10:31.670
> 
> 标签：postgresql, join, generate-series

我通过 PostgreSQL`generate_series(min, max)`以下列方式生成日期系列：

```
SELECT 
    generate_series(getstartdate(some arguments)
                  , getenddate(some arguments), interval '1 day')
FROM taskresults 
```

`getstartdate()`并且`getenddate()`每个都返回给定任务的开始和结束日期。我有更多的桌子`Employees(employeeid, taskid, worktime)`和`Tasks(taskid, startdate, enddate)`。

我的目标是从我生成的系列中按每天对员工的工作时间进行分组。如何执行此连接？请注意，我无法直接访问这些列`startdate`，并且`enddate`在表格中`Tasks`我只能通过上面提到的那些函数访问日期。工作时间以小时/天为单位，因此我必须通过`SUM()`员工在系列中给定日期的每项任务对其进行汇总。问题是我不知道如何访问生成的系列中的日期。

**编辑**
数据结构：

```
CREATE TABLE employees
(
  employeeid serial NOT NULL,
  firstname character varying(32),
  lastname character varying(32),
  qualification character varying(32),
  incomeperhour numeric,
)
CREATE TABLE employeetasks
(
  projectid integer,
  taskid integer,
  employeeid integer,
  hoursperday real,
)
CREATE TABLE taskresults
(
  simulationid integer,
  taskid integer,
  duration integer
)
CREATE TABLE tasks
(
  projectid integer NOT NULL,
  taskname character varying(32),
  startdate character varying(32),
  enddate character varying(32),
  predecessor integer,
  minduration integer,
  maxduration integer,
  taskid integer,
) 
```

一些解释：
整个数据库用于模拟，因此首先您定义一个任务计划（在表中`tasks`），然后运行将结果插入的模拟`taskresults`。如您所见，我只将 存储`duration`在结果中，这就是为什么我只能使用`getstartdate`/`getenddate`函数访问每个任务的日期范围。该表`employeetasks`基本上将员工从`employees`表中分配到`task`表中，他们每天在该任务中工作的小时数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T10:14:38.737

您可以`JOIN`在生成的系列上像其他任何东西一样。

```
INNER JOIN generate_series(getstartdate(some arguments), getenddate(some arguments), interval '1 day') workday ON (...) 
```

如果不知道您的数据是如何存储的，则很难计算出联接条件。

此外，您的数据结构很奇怪。员工有“taskid”吗？n:1 员工 -> 任务？我真的不能写一个完整的查询，因为我没有得到数据结构。

# cuda - CUDA中的半精度浮点纹理过滤

> ID：12855771
> 
> 赞同：1
> 
> 时间：2012-10-12T09:11:06.667
> 
> 标签：cuda, filtering, textures, precision

*使用16 位浮点*纹理类型时可以利用 CUDA 纹理过滤吗？我已经在 CUDA 3D Array 中使用*32 位浮点*纹理进行了测试，并且过滤效果很好。CUDA 不支持*无符号短*纹理插值，这对我来说是完美的，因为它占用的内存空间更少。

~~我正在考虑这个解决方案 - 如果我错了，请纠正我：~~

 ~~*   将我的*无符号短*数据转换为 [0;1] 范围内的*16 位浮点数*；（如何？）
*   malloc 3D 数组宽度`cudaCreateChannelDescHalf()`通道描述符
*   *将无符号短*数据的纹理绑定到该数组
*   将其发送到 GPU 内存，放入 3D 数组；
*   在内核中 - 使用`tex3D()`函数获取值~~ 

~~请看下面的答案...~~

 ~~* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T10:00:56.103

我再次回答我自己的问题。下次我会在发帖之前尝试更多地挖掘......

我认为问题出在纹理声明上：

```
texture<unsigned short, cudaTextureType3D, cudaReadModeNormalizedFloat> tex; 
```

如我所见，仅当返回值是*浮点*类型时才支持过滤，可以`cudaReadModeNormalizedFloat`如上所述强制使用。然后`tex3D`返回 [0;1] 插值浮点值。~~

# tsql - 购买手数的计算余额

> ID：12855774
> 
> 赞同：0
> 
> 时间：2012-10-12T09:11:18.103
> 
> 标签：tsql

我有一个按日期列出的购买清单。例如：

ItemCode、购买日期、购买数量

*   XXX，2012 年 1 月 1 日，10
*   XXX，2012 年 1 月 10 日，5

对于该项目，我有相应的销售交易：

项目、销售日期、销售数量

*   XXX，2012 年 1 月 2 日，-5
*   XXX，2012 年 1 月 9 日，-3
*   XXX，2012 年 1 月 11 日，-3

我正在寻找一个 SQL 查询（没有游标），以获取每个采购订单数量的余额。即每次采购（先进先出）为0。（用于老化库存）

您如何将采购加入到销售中以获得每个已购买库存批次的余额？没有光标这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T09:12:51.887

是的。

您将这`union`两个表放在一起，并在结果集上运行总计。

```
 ;with cte as 
   (
       select itemcode, purchasedate as tdate, purchaseqty as qty from purchases
       union
       select itemcode, salesdate, salesqty from sales
   )
   select 
    t1.*,
    SUM(t2.qty)
   from cte t1
    left join cte t2 
        on t1.tdate>=t2.tdate
        and t1.item = t2.item
   group by t1.item, t1.pdate, t1.qty 
```

为了在任何特定时间获得剩余的股票，同样的原则适用。

```
select p1.*, 
    case when (select SUM(abs(qty)) from sales) > SUM(p2.qty) then 0
    else SUM(p2.qty) - (select SUM(abs(qty)) from sales)  end as stockremaining         
    from purchases p1
    left join purchases p2 on p1.item = p2.item 
    and p2.purchasedate <= p1.purchasedate
group by p1.purchasedate, p1.item, p1.qty 
```

给

```
1   2012-01-01    10    0
1   2012-01-10     5    4 
```

# html - 形式-垂直样式

> ID：12855777
> 
> 赞同：0
> 
> 时间：2012-10-12T09:11:45.400
> 
> 标签：html, css, twitter-bootstrap

我在我的项目中使用[twitter-bootstrap](http://twitter.github.com/bootstrap)，您可能知道默认的表单对齐方式是垂直的，因此标签显示在表单字段上方。您可以添加类`form-horizontal`以在表单字段旁边显示标签。

我正在构建一个水平显示的表单，但我希望表单的一个子集垂直对齐。所以我将该类添加`form-vertical`到该部分，但它没有改变任何东西。

所以我查看了引导样式表，并没有为`form-vertical`该类声明。

您对解决（或解决）此问题有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T09:53:15.397

我在github上开了[一张票。](https://github.com/twitter/bootstrap/issues/5500)我在自定义样式表中实现了所需的 CSS：

```
.form-vertical .control-label {
  float: none;
  padding-top: inherit;
  text-align: inherit;
  width: auto;
}
.form-vertical .controls {
  margin-left: inherit;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T08:21:00.570

您也许可以使用`<fieldset>`s 解决这个问题并将表单类应用于它们，如下所示：

```
<form class="form">
   <!-- vertical fieldset, no extra class needed -->
   <fieldset>
      <legend>Vertical fieldset</legend>
      [ add your form elements ] 
   </fieldset>
   <!-- horizontal fieldset with the extra class -->
   <fieldset class="form-horizontal">
      <legend>Horizontal fieldset</legend>
      [ add your form elements ] 
   </fieldset>
</form> 
```

也应该与`<div>`s 或任何其他容器一起使用。

# ruby-on-rails - Ruby on Rails：推送到 heroku - 键错误

> ID：12855782
> 
> 赞同：1
> 
> 时间：2012-10-12T09:11:48.673
> 
> 标签：ruby-on-rails, ruby, heroku, key

我最近将我的应用程序从 linux 机器移到了 windows，并且我正在尝试再次使用 heroku 进行设置。我的钥匙有问题，所以我只是想将应用程序作为一个全新的应用程序推送。

我做，`git init`然后`git add .`，然后`git commit -m "init"`，现在我做`heroku create`。

我只想将我的文件夹推送到新的应用程序 cedar，但每次我运行时`git push heroku master`都会尝试推送到旧的应用程序，并且由于我的密钥不匹配而出现错误标志。

有人有想法么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T09:17:09.777

执行`heroku auth:logout`注销，然后`heroku auth:login`再次登录。

要阅读完整的帮助信息，请尝试

```
heroku help
heroku auth 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T09:17:31.153

看来你`heroku apps:create`打错了？看看[这里](https://devcenter.heroku.com/articles/creating-apps)的文档。

此外，如果您已经设置了 git 存储库，那么[部署文档可能对您更有用。](https://devcenter.heroku.com/categories/deployment)

# cocos2d-iphone - 应用程序中使用的滑动手势

> ID：12855788
> 
> 赞同：0
> 
> 时间：2012-10-12T09:12:08.377
> 
> 标签：cocos2d-iphone

我有关于使用滑动手势的问题。

问题是我想在按住单击将方向更改为左右的同时执行左右滑动。

我可以在这种情况下使用 CCTouch 方法吗？如果是，那么我该如何使用它？还有另一种方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T09:50:46.563

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions

{
  ...
  ...
     [self createSwipeRecognizerView];

     return YES;

}

-(void) createSwipeRecognizerView {
    //NSLog(@"Creating Swipe Recognizer");

    UIGestureRecognizer *recognizer;
    recognizer = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(screenDidswipe)];
    // swipeRightOnTable is the callback method in my case

    swipeRecognizer = (UISwipeGestureRecognizer *)recognizer;
    // select swipe direction
    swipeRecognizer.direction = UISwipeGestureRecognizerDirectionUp;

    [self.navController.view addGestureRecognizer:recognizer];
    recognizer.delegate = self;
    [recognizer release];
}

    -(BOOL) gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch 
    {
        if([[MyGame sharedGameObject].layer isKindOfClass:[MyGameScreen class]])
            return YES;
        return NO;
    }

    -(void) screenDidswipe 
    {
        MyGame *sGame = [MyGame sharedGameObject];
        if([sGame.layer isKindOfClass:[MyGameScreen class]])
        {
            [(MyGameScreen*)(sGame.layer) screenDidswipe];
        }
    } 
```

# java - 真机安装apk失败

> ID：12855798
> 
> 赞同：2
> 
> 时间：2012-10-12T09:12:36.177
> 
> 标签：java, android, eclipse

像许多人一样，我得到了这个错误，但我在这里找到的解决方案都没有完成这项工作。在模拟器上安装时我没有收到此错误，但我尝试安装的每个应用程序都会收到此错误。

今天早上我的手机进入了保存模式。之后，我无法再安装应用程序了。不过，手机已经退出了保存模式。

我的 logcat 中没有任何错误。不知道该怎么办了。有人可以帮忙吗？

它类似于this [question](https://stackoverflow.com/questions/7511149/android-failed-to-install-apk-on-real-device-null-error)，但他得到的唯一答案，我已经试过了。

解决问题的坦克给 LisuBB

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T09:18:48.043

检查你的手机内存，看看你是否有足够的内存。并重新启动并再次检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T09:21:55.133

您可以尝试通过执行从您的设备卸载应用程序

```
adb uninstall _nameofapp__ 
```

也尝试重新启动 Android 服务器

```
adb kill-server
adb start-server 
```

然后尝试再次安装。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-12T09:27:10.760

adb 安装有用吗？如果是这样，请尝试通过 cmdline 在外部 sdcard 上安装。

# c# - 来自数据源的 DateTime 类型的给定值无法转换为 spe 的十进制类型

> ID：12855799
> 
> 赞同：0
> 
> 时间：2012-10-12T09:12:38.500
> 
> 标签：c#, sql, database, oracle

我正在尝试将数据从 Oracle 迁移到 SQL。

我已经创建了表名和字段名。

两者的类型和大小相同：例如

*   在 Oracle 上`Varchar2(11)`，在 SQL 上`VARCHAR(11)`
*   在 Oracle 上`Date`，在 SQL 上`datetime2(0)`。

在我的应用程序中，我正在使用`SqlBulkCopy`函数。但是我在提交日期时遇到了上述错误。

```
 private void Processing(string sPath)
    {
        string AppPath = Application.StartupPath.ToString();
        IniFile myIni = new IniFile(sPath);

        string allTable = myIni.IniReadValue("TABLENAME", "TABLE");
        string[] alltables = allTable.Split(',');

        foreach (var tableName in alltables)
        {
            string whereSqlQuery = string.Empty;
            string sOrderBySqlQuery = string.Empty;
            string sSQLSelect = string.Empty;
            string sRCount = string.Empty;

            whereSqlQuery = myIni.IniReadValue(tableName, "WHERE");
            TableName = tableName;
            sOrderBySqlQuery = myIni.IniReadValue(tableName, "ORDERBY");

            sSQLSelect = myIni.IniReadValue(tableName, "SQLSELECT");
            //sRCount = myIni.IniReadValue(tableName, "RCOUNT");

            if (radAuto.Checked == true)
                ConnectAndQuery(tableName, whereSqlQuery, sOrderBySqlQuery, sSQLSelect, sRCount);
            else
                ConnectAndQuery(tableName, whereSqlQuery, sOrderBySqlQuery);
        }
    }
private void ConnectAndQuery(string strTableName, string strWhere, string strOrderBy, string sSqlSelect, string sRcount)
        {
            Cursor.Current = Cursors.WaitCursor;
            string connectionString = GetConnectionString();
            // Using 
            OracleConnection connection = new OracleConnection();
            SqlConnection oConn = default(SqlConnection);            
            DataTable dtSQL = null;            
            DateTime dtLog = DateTime.Now;
            try
            {
                //Opening Oracle DB Connection
                connection.ConnectionString = connectionString;
                connection.Open();
            ShownLog(string.Format("Table = {0} ,  -- STARTING --", strTableName));
            ShownLog("Oracle Connection Opened, OK");
            OracleCommand command = connection.CreateCommand();
            if (!string.IsNullOrEmpty(strWhere))
                SqlQuery = "SELECT * FROM " + strTableName + " WHERE "+ strWhere;
            else
                SqlQuery = string.Format("SELECT * FROM {0} ", strTableName);

            if (!string.IsNullOrEmpty(strOrderBy))
                SqlQuery += " ORDER BY " + strOrderBy;

            command.CommandText = SqlQuery;
            System.DateTime startTime = System.DateTime.Now;
            ShownLog("Starting Date Time : " + startTime);                
            DataTable dtTotalInsertCount = new DataTable(strTableName);

            if (!string.IsNullOrEmpty(sRcount))
            {
                //OracleDataAdapter adpCount = new OracleDataAdapter(sRcount, connectionString);                    
                ////adpCount.FillSchema(dtTotalInsertCount, SchemaType.Source);
                //adpCount.Fill(dtTotalInsertCount);
            }
            OracleDataAdapter adapter = new OracleDataAdapter(SqlQuery, connectionString);
            DataTable dt = new DataTable(strTableName);                
            adapter.FillSchema(dt, SchemaType.Source);

            bool valid = true;
            bool bCheck = true;
            int count = 1000;
            int start = 0;

            string sLogQuery = SqlQuery.Replace("'", "");
            dtLog = DateTime.Now;
            //Insert to SQL Log Table
            Insert(strTableName, dtLog, sLogQuery);

            int iLogCount = 0;
            int iActualCount = 0;
            do
            {
                int iEnd = 0;                    
                adapter.Fill(start, count, dt);
                valid = dt.Rows.Count > 0 ? true : false;

                if (valid)
                {
                    iLogCount += dt.Rows.Count;
                    iEnd = start + dt.Rows.Count;
                    ShownLog("No of data Rows retrieved from Oracle, Count = " + dt.Rows.Count);                        

                    //Create the SQL Server Table 
                    oConn = new SqlConnection(txtDestinationConnString.Text);
                    oConn.Open();

                    ShownLog("SQL Connection Opened, OK");

                    if (string.IsNullOrEmpty(sSqlSelect))
                        bCheck = false;
                    if (bCheck)
                    {
                        ShownLog("Data Comparision Start : " + System.DateTime.Now);                            
                        //If SQL Select Statement has
                        if (!string.IsNullOrEmpty(sSqlSelect))
                        {
                            SqlCommand cmd = new SqlCommand();
                            cmd.CommandText = sSqlSelect;
                            cmd.Connection = oConn;
                            cmd.CommandType = CommandType.Text;
                            SqlDataReader reader = cmd.ExecuteReader();
                            dtSQL = new DataTable();
                            dtSQL.Load(reader);
                            cmd = null;
                            reader = null;

                            //Return record has more than 0
                            ShownLog("Start Duplicate Checking : " + System.DateTime.Now);                                
                            if (dtSQL.Rows.Count > 0)
                            {
                                foreach (DataRow dr in dtSQL.Rows)
                                {
                                    DataRow[] result;
                                    if (strTableName == "ITK_STAFF" || strTableName == "ITK_FLIGHT")
                                    {
                                        result = dt.Select("URNO='" + dr[0].ToString() + "'");                                            
                                    }
                                    else
                                        result = dt.Select("URNO=" + dr[0]);

                                    if (result.Length > 0)
                                    {
                                        foreach (var drRemove in result)
                                        {
                                            dt.Rows.Remove(drRemove);
                                        }
                                    }
                                }
                            }
                            ShownLog("End Duplicate Checking : " + System.DateTime.Now);                                
                        }
                        ShownLog("Actual No.s of records to insert : " + dt.Rows.Count);                            
                        if (dt.Rows.Count == count)
                            bCheck = false;
                        ShownLog("Data Comparision End : " + System.DateTime.Now);                            
                    }

                    if (valid)
                    {
                        ShownLog(System.DateTime.Now + " Copying " + strTableName + " From : " + start.ToString() + " To : " + iEnd);                            
                    }

                    start += count;
                    if (dt.Rows.Count > 0)
                    {
                        iActualCount += dt.Rows.Count;
                        CopyData(dt, oConn);
                        dt.Rows.Clear();
                    }

                    oConn.Close();
                    oConn = null;
                }
            } while (valid);

            System.DateTime endTime = System.DateTime.Now;
            ShownLog("Ending  DateTime: " + endTime);
            //msgOut("No of rows copied from oracle to SQL Server , Count = " + dt.Rows.Count);

            TimeSpan diffTime = endTime.Subtract(startTime);
            ShownLog(String.Format("Time Difference is  Days : {0},  Hours : {1},  Minites : {2}, seconds : {3} ,Milliseconds : {4}", diffTime.Days, diffTime.Hours, diffTime.Minutes, diffTime.Seconds, diffTime.Milliseconds));

            ShownLog(string.Format("Table = {0} ,  -- FINISHED --", strTableName));

            ShownLog(string.Empty);                             

            Update(iLogCount, iActualCount, strTableName, dtLog, sLogQuery, " ", true);

            Cursor.Current = Cursors.Default;
        }
        catch (Exception ex)
        {
            Cursor.Current = Cursors.Default;
            ShownLog(ex.ToString());
            ShownLog(string.Empty);
            Update(0, 0, strTableName, dtLog, "", ex.ToString(), false);
            ((IDisposable)connection).Dispose();
            if (oConn != null)
                oConn.Close();
            RadioButtonControl();
        }
        finally
        {
            Cursor.Current = Cursors.Default;
            ((IDisposable)connection).Dispose();
            if (oConn != null)
                oConn.Close();

            RadioButtonControl();
        }
    }

private void CopyData(DataTable sourceTable, SqlConnection destConnection)
    {
        // Using 
        SqlBulkCopy s = new SqlBulkCopy(destConnection);
        try
        {
            s.DestinationTableName = TableName;
            s.NotifyAfter = 10000;
            s.SqlRowsCopied += new SqlRowsCopiedEventHandler(s_SqlRowsCopied);

            s.WriteToServer(sourceTable);
            s.Close();
        }
        finally
        {
            ((IDisposable)s).Dispose();
        }
    } 
```

# backbone.js - 主干模型验证错误

> ID：12855803
> 
> 赞同：0
> 
> 时间：2012-10-12T09:12:48.127
> 
> 标签：backbone.js, backbone-views, backbone-events

我得到了 addyosmani 基于主干基础的验证，但是当我在我的视图中尝试它时，我无法得到模型生成的错误。TIA

模型.js

```
 validate: function(attrs) {            

        var errors = this.errors = {};
        if (!attrs.box) 
            errors.box= 'box value is required'; 
            //console.log(errors.box); 

        if (!_.isEmpty(errors)) return errors;

 } 
```

视图.js

```
validate: function(model) {
    console.log("error text--" + model.errors[this.input] || '');

 }, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T07:54:39.700

应该是`var errors = this errors || {} ;`吗？

# symfony - 在亚马逊 ec2 上的 bitnami 映像中部署 symfony 项目

> ID：12855807
> 
> 赞同：0
> 
> 时间：2012-10-12T09:13:10.077
> 
> 标签：symfony, bitnami

symfony在/Frameworks文件夹，根路径在Apache2/htdocs/，如何部署symfony项目？我是否需要将 symfony 文件夹复制到 htdocs，像 localhost/ 一样考虑 Apache2/htdocs/？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T11:16:40.367

您可以将 Symfony 文件夹复制到 htdocs 文件夹中，并将 Apache 设置为从 Symfony 包含 app.php 文件的“web”文件夹中提供服务。你需要在这里做一些Apache配置，你可以查看[这篇文章](https://stackoverflow.com/questions/12423983/symfony2-how-to-deploy-in-subdirectory-apache)

# java - Hibernate Criteria 创建一个“？” 在生成的 SQL

> ID：12855810
> 
> 赞同：0
> 
> 时间：2012-10-12T09:13:20.193
> 
> 标签：java, hibernate, annotations, sql-server-2008-r2

我创建了一个示例 Web 应用程序。我使用 MS SQL Server 2008 作为数据库并使用 hibernate + 注释来访问数据库。我的休眠配置xml如下。问题是，Criteria.list() 返回一个空列表，而且我看到一个“？” 在生成的 HSQL 中，而不是我在 Criteria 中传递的参数。

```
<session-factory name="">
    <property name="hibernate.connection.driver_class">sun.jdbc.odbc.JdbcOdbcDriver</property>
    <property name="hibernate.dialect">org.hibernate.dialect.SQLServerDialect</property>
    <property name="hibernate.connection.url">jdbc:odbc:dbname</property>

    <property name="connection.pool_size">10</property>
    <property name="current_session_context_class">thread</property>

    <!-- Disable the second-level cache -->
    <property name="cache.provider_class">org.hibernate.cache.NoCacheProvider</property>       

     <!-- Echo all executed SQL to stdout -->
    <property name="show_sql">true</property>       
    <property name="hibernate.connection.username"></property>
    <property name="hibernate.connection.password"></property>

<mapping class="com.demo.Person" />
</session-factory> 
```

这是我的注释豆

```
 @Entity
    @Table(name = "person")
    public class Person implements Serializable {

        public Person(){

        }
        private static final long serialVersionUID = 1L;
        @Id
        @GeneratedValue(strategy=GenerationType.AUTO) 
        @Basic(optional = false)
        @Column(name = "personid")
        private Integer personid;

        @Basic(optional = false)
        @Column(name = "firstname")
        private String firstname;

        @Column(name = "lastname")
        private String lastname;

        @Basic(optional = false)
        @Column(name = "phone")
        private String phone;

        @Column(name = "mobile")
        private String mobile;

        @Column(name = "street")
        private String street;

        @Basic(optional = false)
        @Column(name = "city")
        private String city;

        @Basic(optional = false)
        @Column(name = "country")
        private String country;

        @Basic(optional = false)
        @Column(name = "bussinessowner")
        private int bussinessowner;

        @OneToMany(cascade = CascadeType.ALL, mappedBy = "resultid1")
        private Collection<Recent> recentCollection;

//setters & getters
} 
```

**我正在运行的代码是**

```
Session session;
        List list = new ArrayList();
        try{
        session = HibernateUtil.getSessionFactory().openSession();
        Criteria criteria = session.createCriteria(Person.class);
        criteria.add(Restrictions.like("firstname", name, MatchMode.START));
        list= criteria.list();
        System.out.println(list.size());

        }catch (Exception e) {
            e.printStackTrace();
        } 
```

**生成的 HSQL ：**

```
Hibernate: select this_.personid as personid2_0_,  this_.city as city2_0_, this_.country as country2_0_, this_.firstname as firstname2_0_, this_.lastname as lastname2_0_ from person this_ where this_.firstname like ? 
```

除此之外，我也没有任何例外。你能帮我解决这个问题吗？谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T09:36:37.737

而不是这条线

```
criteria.add(Restrictions.like("firstname", name, MatchMode.START)); 
```

尝试

```
criteria.add(Restrictions.like("firstname", name, MatchMode.ANYWHERE)); 
```

或者

```
criteria.add(Restrictions.ilike("firstname", name, MatchMode.ANYWHERE)); 
```

如果您将名字传递为“abcd” ，它将生成 SQL 作为**名字，如 '%abcd%'**

你能简单地试试这个吗

```
session = HibernateUtil.getSessionFactory().openSession(); 
List<Person> personList = session.createQuery("Select * from Person p where p.firstname like 'rake%'").list();

System.out.println("Person result :" + personList .size()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T09:22:55.317

改变它有`criteria.add(Restrictions.like("firstname", name + "%"));`帮助吗？而且，顺便说一句，`?`是正确的参数占位符`jbdc`语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T10:39:51.683

“？” 是 JDBC 语句中参数的占位符。你看不到它的实际价值，仅此而已。没有问题，只是使用休眠的跟踪仍然不完整。

如果您想查看 '?' 的实际值，则必须使用额外的产品，例如[log4jdbc](http://code.google.com/p/log4jdbc/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T09:58:53.347

@Rakesh 试试下面的代码：

```
criteria.add(Restrictions.ilike("firstname", name +"%")); 
```

# html - 如何将视频状态更改为设置为起点，而手风琴隐藏？

> ID：12855815
> 
> 赞同：0
> 
> 时间：2012-10-12T09:13:28.190
> 
> 标签：html, video

我有一个有 4 个标题的手风琴，每个标题都有一个视频。当用户点击标题时，内容会向上滑动，所以它会被隐藏。而带有手风琴幻灯片的视频播放器，用户可以切换到下一张幻灯片，但如果用户回到上一张，则视频处于“打开”状态并且处于播放状态。

需要的是，当手风琴滑动时，视频必须停止并设置在视频的起点，每次用户点击，然后才需要播放。如果幻灯片被隐藏，视频将位于顶部并设置回起点。

我找到了将 currentTime 设置回 0 的答案……这是正确的方法吗？有人帮我展示正确的存档方法吗？

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T09:55:39.840

it's works for me:

```
videos.each(function (n,v) {
 v.pause(); v.currentTime = 0;
} ) 
```

# php - 如何为 PHP 中的长脚本更频繁地刷新显示

> ID：12855821
> 
> 赞同：0
> 
> 时间：2012-10-12T09:13:37.820
> 
> 标签：php, refresh

我寻找一种在长脚本上更频繁地刷新显示的方法。IE ：

```
for($i=0;$i<=100000;$i++) {

<!-- 
some long process code 
-->

echo 'content:'.$i.' - ';

} 
```

我在 Chrome 上启动它。目前，回波数据每 30 秒出现一次。我希望刷新回声显示的延迟更短。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T09:15:36.503

定期将脚本的输出推送到浏览器调用`flush()`，即：

```
for($i=0;$i<=100000;$i++) {
  echo 'content:'.$i.' - ';

  if( $i%100 ) {
    flush();
  }
} 
```

还要检查您的[输出缓冲设置](http://php.net/manual/en/book.outcontrol.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T09:15:52.153

你可以看看输出缓冲。 [http://php.net/manual/en/book.outcontrol.php](http://php.net/manual/en/book.outcontrol.php)

# javascript - Android：WebView 中的 requestFileSystem 导致崩溃

> ID：12855822
> 
> 赞同：1
> 
> 时间：2012-10-12T09:13:42.417
> 
> 标签：javascript, android, crash, android-webview, html5-filesystem

我正在开发一个离线应用程序，我必须将文件保存在 html5 fs-sandbox 中。在 Chrome 的桌面上一切正常。

但是我的安卓设备一直在崩溃，`10-12 10:49:53.953: A/libc(9231): Fatal signal 11 (SIGSEGV) at 0x00000000 (code=1)`直到我打电话`window.requestFileSystem(window.PERSISTENT, 5*1024*1024, fsInit, errorHandler);`

因为`window.storageInfo`没有在我的 WebView 中定义，所以我无法`requestQuota`先调用。但是`window.requestFileSystem`已定义~~，我认为崩溃是由于缺少授予的配额~~。即使使用`window.TEMPORARY`和/或较小的尺寸也会导致错误。

* * *

**更新：** 错误报告：[http ://code.google.com/p/android/issues/detail?id=38420](http://code.google.com/p/android/issues/detail?id=38420)

# jquery - 如何获得持续时间 30 分钟？

> ID：12855823
> 
> 赞同：0
> 
> 时间：2012-10-12T09:13:47.283
> 
> 标签：jquery, datetimepicker, timepicker, jquery-ui-timepicker

我正在使用 timepicker jquery。我必须文本字段一个是从，第二个是到。所以当时间从选择自动更新时间到字段时

```
$('#onselectExample').timepicker();
$('#onselectExample').on('changeTime', function() {
    $('#onselectTarget').text($(this).val());
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T09:45:59.863

你想改变`#onselectTarget`时`#onselectExample`改变吗？它可以实现如下：

```
$('#onselectExample').timepicker({
    onSelect: function(selectedDateTime){
        $('#onselectTarget').text(selectedDateTime);
    }
}); 
```

如果您想在选定的时间上增加 30 分钟，您可以编写一个额外的基金：

```
 $(function(){
            $('#onselectExample').timepicker({
                onSelect: function(selectedDateTime){
                    console.log(selectedDateTime);
                    $('#onselectTarget').text(add30Min(selectedDateTime));
                }
            });
        });
        function add30Min(oldTime){
            var time = oldTime.split(":"); //split hours an minutes
            var hours = time[0]; // get hours
            var minutes = time[1]; // get minutes
            if (+minutes >= 30){ // when minutes over 30
                hours = (+hours+1)%24; // add an hour and convert 24 to 0
            }
            minutes = (+minutes + 30)%60; // add 30 minutes and convert 61 to 1
            return $.datepicker.formatTime('hh:mm',{ // use formatTime to return formatted Time
                'hour':hours,
                'minute':minutes
            });
        } 
```

# c - 为什么这个 bit-hack 代码是可移植的？

> ID：12855825
> 
> 赞同：1
> 
> 时间：2012-10-12T09:13:52.120
> 
> 标签：c

```
int v;
int sign; // the sign of v ;
sign = -(int)((unsigned int)((int)v) >> (sizeof(int) * CHAR_BIT - 1)); 
```

**Q1：**既然 v in 是由 type of 定义的`int`，那为什么还要再把它转换成`int`呢？跟便携有关系吗？

**编辑：**

**Q2：**

```
sign = v >> (sizeof(int) * CHAR_BIT - 1); 
```

这个片段 **不可**移植，因为**右移**是**实现定义**`signed int`的，如何填充左边距位取决于编译器。所以

 **```
 -(int)((unsigned int)((int)v) 
```

做便携的把戏。请解释一下为什么这有效。不是总是在左边距位中**填充**0`unsigned int`吗**？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T09:43:30.577

它不是严格可移植的，因为理论上可能`int`和/或`unsigned int`具有填充位。

在具有填充位的假设实现中，从那时起`unsigned int`右移会产生未定义的行为`sizeof(int)*CHAR_BIT - 1`

```
sizeof(int)*CHAR_BIT - 1 >= WIDTH 
```

但是对于所有`unsigned int`没有填充位的实现——据我所知，这意味着所有现有的实现——代码

```
int v;
int sign; // the sign of v ;
sign = -(int)((unsigned int)((int)v) >> (sizeof(int) * CHAR_BIT - 1)); 
```

必须设置`sign`为`-1`if`v < 0`和 0 if `v >= 0`。（注意——感谢[Sander De Dycker](https://stackoverflow.com/users/822669/sander-de-dycker)指出——如果有一个负零，`int`那也会产生会产生这种情况，需要直接检查对象表示。）`sign = 0``-0 == 0``-1``v < 0`

转换之前转换`int`到`unsigned int`转换之前完全是多余的并且什么都不做。

它是 - 忽略假设的填充位问题 - 可移植的，因为标准规定了转换为无符号整数类型和无符号整数类型的表示。

转换为无符号整数类型是减少模数`2^WIDTH`，其中`WIDTH`是类型中值的位数，因此结果位于 0 到 0 到 0 的范围内`2^WIDTH - 1`。

由于没有填充位，`unsigned int`范围的大小`int`不能大于 的`unsigned int`，并且有符号整数的标准要求（6.2.6.2）用以下之一表示

*   符号和大小
*   一个的补码
*   二进制补码

最小可能的可表示`int`值是`-2^(WIDTH-1)`。`int`因此，负值`-k`被转换为`2^WIDTH - k >= 2^(WIDTH-1)`并因此设置了最高有效位。

另一方面，非负值`int`不能大于`2^(WIDTH-1) - 1`，因此转换将保留其值，并且不会设置最高有效位。

因此，当转换结果`WIDTH - 1`向右移动位时（同样，我们假设 中没有填充位`unsigned int`，因此），如果该值是非负的，`WIDTH == sizeof(int)*CHAR_BIT`它将产生一个 0 ，如果它是负的，它将产生一个。`int``1`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T09:17:22.923

不，它只是过度铸造。无需将其转换为 int。不过不痛。

编辑：值得注意的是，它可能会这样做，因此 v 的类型可以更改为其他类型，或者它可能曾经是另一种数据类型，并且在转换为 int 之后，从未删除过强制转换。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T09:27:32.067

它应该非常便携，因为当您转换`int`为`unsigned int`（通过强制转换）时，您会收到一个值，该值是原始值的 2 的补码位表示，`int`最高有效位是符号位。

**更新**：更详细的解释......

我假设其中没有填充位，`int`并且`unsigned int`这两种类型中的所有位都用于表示整数值。对于现代硬件来说，这是一个合理的假设。填充位已成为过去，为了向后兼容（即能够在旧机器上运行代码），我们仍然在当前和最近的 C 标准中携带它们。

有了这个假设，如果`int`和`unsigned int`有`N`位（`N`= `CHAR_BIT * sizeof(int)`），那么根据 C 标准，我们有 3 个选项来表示`int`，这是一个有符号类型：

1.  符号和大小表示，允许值从 -(2 ^(N-1) -1) 到 2 ^(N-1) -1
2.  一个的补码表示，也允许从 -(2 ^(N-1) -1) 到 2 ^(N-1) -1的值
3.  二进制补码表示，允许值从 -2 ^(N-1)到 2 ^(N-1) -1 或可能从 -(2 ^(N-1) -1) 到 2 ^(N-1) -1

符号和大小和补码表示也已成为过去，但我们暂时不要将它们扔掉。

当我们转换`int`为`unsigned int`时，规则是非负值`v`(>=0) 不变，而负值(<0) 变为 2 ^N +`v`的正值，因此= 。^(`v``(unsigned int)-1``UINT_MAX`)

因此，`(unsigned int)v`对于非负数`v`将始终在 0 到 2 ^(N-1) -1 的范围内，并且最高有效位`(unsigned int)v`将为 0。

现在，对于`v`从 到 -2 ^(N-1)到 -1 范围内的负数（该范围是 的三种可能表示形式的负数范围的超集`int`），`(unsigned int)v`将在 2 ^N +(-2 ^(N- 1) ) 到 2 ^N +(-1)，简化我们得到从 2 ^(N-1)到 2 ^N -1 的范围。显然，该值的最高有效位将始终为 1。

如果您仔细查看所有这些数学运算，您会发现二进制中的值与2 的补码表示中的值`(unsigned)v`完全相同：`v`

...
`v`= -2: `(unsigned)v`= 2 ^N - 2 = 111...110 [2]
`v` = -1: `(unsigned)v`= 2 ^N - 1 = 111...111 [2]
`v` = 0: `(unsigned)v`= 0 = 000...000 [2]
`v` = 1: `(unsigned)v`= 1 = 000...001 [2]
...

因此，该值的最高有效位`(unsigned)v`将为`v`>=0 的 0 和`v`<0 的 1。

现在，让我们回到符号和大小和一个的补码表示。这两种表示可以允许两个零， a`+0`和 a `-0`。但是算术计算并没有明显区分`+0`and `-0`，它仍然是 a `0`，无论你加，减，乘还是比较它。你，作为一个观察者，通常不会看到`+0`或`-0`与拥有一个或另一个有任何区别。

试图观察和区分`+0`通常`-0`是没有意义的，如果你想让你的代码可移植，你通常不应该期望或依赖两个零的存在。

`(unsigned int)v`不会告诉你 和 之间的区别`v=+0`，`v=-0`在这两种情况下`(unsigned int)v`都等同于`0u`。

因此，使用这种方法，您将无法判断内部`v`是 a`-0`还是 a `+0`，您不会以这种方式提取 v 的符号位`v=-0`。

但是同样，您从区分两个零中没有任何实际价值，并且您不希望在可移植代码中进行这种区分。

因此，我敢于声明问题中提出的符号提取方法在实践中非常/非常/相当/等可移植。

不过，这种方法有点矫枉过正。并且`(int)v`在原始代码中是不必要的，因为`v`已经是`int`.

这应该绰绰有余并且易于理解：

```
int sign = -(v < 0); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T09:21:51.840

它不是。该标准没有定义整数的表示，因此无法准确保证其结果是可移植的。获得整数符号的唯一方法是进行比较。**

# java - 如何根据桌面上的触摸屏要求增加jspinner箭头的大小

> ID：12855839
> 
> 赞同：1
> 
> 时间：2012-10-12T09:14:28.157
> 
> 标签：java, swing, look-and-feel, jspinner, uimanager

嗨，任何人都可以帮助我如何根据桌面上的触摸屏要求增加 jspinner 箭头的大小

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T09:37:17.413

> 帮助我如何根据桌面上的触摸屏要求增加 jspinner 箭头的大小

*   甚至可以改变

    a) `PreferredSize`for `Buttons`(`API`受限于`Icons size 8x8`, 也必须覆盖)

    b）`Buttons`在JSpinner中重新布局一号`LEFT (or SOUTH)`和二号或`RIGHT (or NORTH)`

*   但因为`JSpinner`我不会走这条路

* * *

*   创建`JTextField`/`JFormattedTextField`使用`DocumentListener`，实现所有限制`DocumentFilter`（[默认情况下，JSpinner 也有相同的要求](https://stackoverflow.com/a/12826561/714968)）

*   放两个`JButtons`（通过`JButton#setXxxIcon`设置自己的`Icon`），以获得`inc / des creasing`价值

*   为`Date`/`Calendar`使用适当的`JCalendar`或`JDatePicker`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-24T13:57:32.167

在微调器组件中更改 JButton 的大小，如下所示：

```
 spn = new JSpinner();   
        spn.getComponent(0).setPreferredSize(new Dimension(40,40)); 
```

JSpinner 具有三个组件。两个 JButton 和一个 JTextField。

1.  第一个组件是 nextButton
2.  第二个组件是previousButton
3.  第三个组件是 NumberEditor

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T10:50:25.333

您可以尝试以下方法之一：

*   查看是否有适合您选择的外观和感觉的*大* [尺寸变体。](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/size.html)

*   使用方法更改`Spinner.arrowButtonSize`属性`UIManager.put()`。

# scala - 多值字段播放框架

> ID：12855840
> 
> 赞同：0
> 
> 时间：2012-10-12T09:14:35.293
> 
> 标签：scala, playframework-2.0

我需要的是一个多值字段，就像本[教程](http://net.tutsplus.com/tutorials/javascript-ajax/how-to-use-the-jquery-ui-autocomplete-widget/)中一样。

使用 Playframework 和 scala 模板还有另一种方法吗？如果没有，如何在填充字段后获取字段中的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T10:19:13.010

Play 及其模板系统只不过是生成所需代码的一种方式（用非常基本的语言来说），所以是的，可以在 Play 中使用本教程。

[您最初指出](http://net.tutsplus.com/tutorials/javascript-ajax/how-to-use-the-jquery-ui-autocomplete-widget/)的教程包含您需要的所有内容，尽管它没有描述所需的 JSON 格式。幸运的是，您可以查看[包含的演示](http://www.danwellman.co.uk/demos/autocomplete.html?subject=&message=#)以查看他们使用 friends.php 生成的内容

当您开始在`To:`字段中写入时，使用 Firebug 或其他类似工具检查向服务器发送的请求以及它作为响应返回的内容。

现在您只需在 Play 中创建一个动作，它将以所需格式返回数据，即：

当它发送请求时：

```
http://somedomain.tld/friends.php?callback=jsonp1350036024256&term=m 
```

它接收响应（名称以 given 开头`term`）：

```
jsonp1350036024256([{"name":"Mace Windu"},{"name":"Mon Mothma"}]) 
```

[JSON 文档的最后一节](http://www.playframework.org/documentation/2.0.4/ScalaJsonRequests)描述了如何在 Play 的操作中准备JSON

# java - 如何知道这个线程是否是 UI 线程

> ID：12855848
> 
> 赞同：22
> 
> 时间：2012-10-12T09:15:06.123
> 
> 标签：java, android, ui-thread

Android上有什么方法可以知道运行我的代码的线程是否是UI线程？在摇摆中 `SwingUtilities.isEventDispatchThread()`，我会告诉我我是否在 UI 线程上。Android SDK 中是否有任何功能可以让我知道这一点？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-10-12T09:28:24.663

1.  从这里借来的答案：[如何检查当前线程是否不是主线程](https://stackoverflow.com/questions/11411022/how-to-check-if-current-thread-is-not-main-thread)

    `Looper.myLooper() == Looper.getMainLooper()`

2.  任何 Android 应用程序都只有一个 UI 线程，因此您可以在 Activity 回调（如 onCreate() ）的某个位置检查并存储其 ID，然后将该线程的 ID 与存储的 ID 进行比较。

    `mMainThreadId = Thread.currentThread().getId();`

3.  无论如何，您可以省略检查是否要在 UI 线程上执行某些操作并使用 Activity 引用

    ```
    mActivity.runOnUiThread( new Runnable() {
        @Override 
        public void run() {
        ...
        }
    }); 
    ```

保证在当前线程上运行，如果它是 UI，或者在 UI 线程中排队。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-06-04T01:27:09.367

是的，有办法。检查当前线程对象与主剪裁器的线程对象。主循环器始终在 UI 线程中。

```
boolean isOnUiThread = Thread.currentThread() == Looper.getMainLooper().getThread(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T09:44:32.157

Hum实际上由于Android架构，所有Activity都运行在主线程，即UI线程。因此，当您编写 Activity 时，Activity 中的所有内容都在 UI 线程中。
这就是为什么在 Honeycomb 中当您在主线程中进行网络调用时添加了一个错误：它完全阻塞了 UI。

因此，默认情况下，您实际上总是在 UI 线程中工作。另一件事：除非您明确要求它位于另一个线程中，否则 Service 将在与其应用程序的活动相同的线程上运行。

那么该怎么办 ？

*   当您必须在活动中进行大量计算时；一种解决方案是使用 AsyncTask（旨在让您轻松使用另一个线程的类）。onExecute() 中的代码在另一个线程中运行（但要小心 postExecute 在您的主线程中运行）。另一种是在 AsyncTask 没有真正适配的时候手动启动一个新线程。
*   如果您创建的服务执行代价高昂的后台任务，请使用清单的 android:process=":my_process" 属性使其在另一个线程中运行。您将需要创建一个 AIDL 来与这个分离的服务进行通信，但这并不是一项复杂的任务。
*   许多对象，例如 MediaPlayer，都有其方法的异步变体。尝试始终使用它们。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-10-06T20:41:12.200

在您要检查的地方放置一个断点，当它被击中时，检查您是否可以与您的 UI 交互（即，如果 UI 未冻结）。如果您无法与 UI 交互，那么您在 UI 线程中，否则您在后台线程中。

# jquery - 使用 jQuery 将子表值替换为文本

> ID：12855850
> 
> 赞同：-1
> 
> 时间：2012-10-12T09:15:16.393
> 
> 标签：jquery

我有以下 HTML 表，想用文本替换子表“class = stock_splitdata”。我被困在如何收集“stock_splitdata”表的 td 值并将它们更改为 text 。

```
<table>
    <thead>
    <tr>
        <th class="header" align="left" width="200px">STOCK</th>
        <th class="header" align="right" width="90px">CATEGORY</th>
        <th class="header" align="right" width="75px">SALES QTY</th>
        <th class="header" align="right" width="75px">GWP QTY</th>
        <th class="header" align="right" width="120px">SALES DATE</th>
        <th class="header" align="right" width="100px">RECEIPT NO</th>
        <th class="{sorter: 'fancyNumber'} header" align="right" width="120px">GROSS SALES</th>

    </tr>
    </thead>
    <tbody>
    <tr>
              <td align="left" width="200px">
                <table class="stock_splitdata" cellpadding="0" cellspacing="0">
                <tbody><tr>
                    <td width="80px">BM1339</td>
                    <td width="40px">DR2</td>
                    <td width="15px">D</td>
                    <td width="30px">80</td>
                </tr>
                </tbody></table>
              </td>
              <td align="right" width="105px">BRA</td>
              <td align="right" width="85px">1</td>
              <td align="right" width="75px">0</td>
              <td align="right" width="120px">01/10/2012</td>
              <td align="right" width="120px">40756</td>
              <td align="right" width="120px">109.90</td>

              </tr><tr>
              <td align="left" width="200px">
                <table class="stock_splitdata" cellpadding="0" cellspacing="0">
                <tbody><tr>
                    <td width="80px">BM1431</td>
                    <td width="40px">BN</td>
                    <td width="15px">D</td>
                    <td width="30px">80</td>
                </tr>
                </tbody></table>
              </td>
              <td align="right" width="105px">BRA</td>
              <td align="right" width="85px">1</td>
              <td align="right" width="75px">0</td>
              <td align="right" width="120px">01/10/2012</td>
              <td align="right" width="120px">40756</td>
              <td align="right" width="120px">69.00</td>
              </tr>
      </tbody>
      <table> 
```

这样最终的值将如下所示：

```
<table>
<thead>
<tr>
    <th class="header" align="left" width="200px">STOCK</th>
    <th class="header" align="right" width="90px">CATEGORY</th>
    <th class="header" align="right" width="75px">SALES QTY</th>
    <th class="header" align="right" width="75px">GWP QTY</th>
    <th class="header" align="right" width="120px">SALES DATE</th>
    <th class="header" align="right" width="100px">RECEIPT NO</th>
    <th class="{sorter: 'fancyNumber'} header" align="right" width="120px">GROSS SALES</th>

</tr>
</thead>
<tbody>
<tr>
          <td align="left" width="200px">
          BM1339 DR2 D 80
          </td>
          <td align="right" width="105px">BRA</td>
          <td align="right" width="85px">1</td>
          <td align="right" width="75px">0</td>
          <td align="right" width="120px">01/10/2012</td>
          <td align="right" width="120px">40756</td>
          <td align="right" width="120px">109.90</td>

          </tr><tr>
          <td align="left" width="200px">
          BM1431 BN D 80
          </td>
          <td align="right" width="105px">BRA</td>
          <td align="right" width="85px">1</td>
          <td align="right" width="75px">0</td>
          <td align="right" width="120px">01/10/2012</td>
          <td align="right" width="120px">40756</td>
          <td align="right" width="120px">69.00</td>
          </tr>
  </tbody>
  <table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T09:18:47.843

您需要将`.stock_splitdata td`文本转换为数组，然后将其与空格分隔符连接在一起，然后替换`.stock_splitdata`表格。

像这样的东西：

```
$(".stock_splitdata").each(function() {
    var $table = $(this);
    var values = $("td", $table).map(function() {
        return $(this).text();
    }).get();
    $table.replaceWith(values.join(" "));
}); 
```

[**示例小提琴**](http://jsfiddle.net/tyUnL/)

# database - woocommerce on order complete insert quantity data into custom database table

> ID：12855852
> 
> 赞同：0
> 
> 时间：2012-10-12T09:15:23.247
> 
> 标签：database, woocommerce, insert, orders

I need in woocommerce after successful Paypal payment and product status change to complete, to insert some info data about the order product e.g product quantity to one of my custom database tables. what action/filter will do the job any example?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T18:24:36.780

经过一些测试，我找到了这个钩子的解决方案

```
add_action( 'woocommerce_order_status_completed', 'check_quantity' );
function check_quantity($order_id) {

// order object (optional but handy)
$order = new WC_Order( $order_id );

if ( count( $order->get_items() ) > 0 ) {
foreach( $order->get_items() as $item ) {

// for all products if ( $item['id'] > 0 ) {
if ( $item['id'] == 8 ) {
$quantity=$item['qty'];
add_qty($quantity);

   }
  }
 }
} 
```

# mysql - Export WordPress Posts and Meta Information in CSV format using SQL Query

> ID：12855854
> 
> 赞同：3
> 
> 时间：2012-10-12T09:15:39.483
> 
> 标签：mysql, sql, wordpress, csv

*Apologies, this is a [duplicate of entry of this post](https://wordpress.stackexchange.com/questions/67798/export-wordpress-posts-and-meta-information-in-csv-format) but I found I'm not getting the right answer there and not sure how to ask to move it over to SO?*

I need to export all WordPress Posts and related Meta information using an SQL query in CSV format. I've managed to export just the Posts but realised that the Meta information is in another table.

Could someone please tell me how I would go about doing this please?

Thanks!

**EDIT: I have already tried a number of plugins, none of which have worked for this specific scenario. I really do need to work on the query itself. Thanks**

**EDIT: The final outcome of the CSV file should look something like this. On one row, these are the columns that I will end up with. (I will delete the additional columns in CSV, I'm just giving a shortened version here)**

```
post_content | post_title | **meta_key** | *meta_value* | **meta_key** | *meta_value* | **meta_key** | *meta_value* | **meta_key** | *meta_value* | **meta_key** | *meta_value* 
```

So one post per row with the meta information in the same row.

**EDIT: With the S-ha-dum, I've managed to get some way, but I have about 12 meta_value > meta_key values to pull out of the DB so I need help to write the rest of the query please**

```
SELECT *,(SELECT meta_value FROM wp_postmeta WHERE wp_postmeta.meta_key = 'Publisher' AND wp_postmeta.post_id = wp_posts.ID) as Publisher FROM wp_posts 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T17:00:48.297

最后，一位朋友设法帮助我解决了我的问题。这是他将所有带有元信息的帖子导出到 CSV 文件的最后一个 SQL 查询。

```
SELECT DISTINCT
post_title
, post_content
,(SELECT meta_value FROM wp_postmeta WHERE wp_postmeta.meta_key = 'Asking Price (US\$)' AND wp_postmeta.post_id = wp_posts.ID) as "Asking Price (US\$)"
,(SELECT meta_value FROM wp_postmeta WHERE wp_postmeta.meta_key = 'Asking Price (ZAR)' AND wp_postmeta.post_id = wp_posts.ID) as "Asking Price (ZAR)"
,(SELECT meta_value FROM wp_postmeta WHERE wp_postmeta.meta_key = 'Author' AND wp_postmeta.post_id = wp_posts.ID) as Author
,(SELECT meta_value FROM wp_postmeta WHERE wp_postmeta.meta_key = 'Binding' AND wp_postmeta.post_id = wp_posts.ID) as Binding
,(SELECT meta_value FROM wp_postmeta WHERE wp_postmeta.meta_key = 'Book Condition' AND wp_postmeta.post_id = wp_posts.ID) as "Book Condition" 
,(SELECT meta_value FROM wp_postmeta WHERE wp_postmeta.meta_key = 'Book Number' AND wp_postmeta.post_id = wp_posts.ID) as "Book Number" 
,(SELECT meta_value FROM wp_postmeta WHERE wp_postmeta.meta_key = 'Book Type' AND wp_postmeta.post_id = wp_posts.ID) as "Book Type"
,(SELECT meta_value FROM wp_postmeta WHERE wp_postmeta.meta_key = 'Edition' AND wp_postmeta.post_id = wp_posts.ID) as  Edition
,(SELECT meta_value FROM wp_postmeta WHERE wp_postmeta.meta_key = 'Illustrator' AND wp_postmeta.post_id = wp_posts.ID) as Illustrator 
,(SELECT meta_value FROM wp_postmeta WHERE wp_postmeta.meta_key = 'Inscription' AND wp_postmeta.post_id = wp_posts.ID) as Inscription 
,(SELECT meta_value FROM wp_postmeta WHERE wp_postmeta.meta_key = 'ISBN' AND wp_postmeta.post_id = wp_posts.ID) as  ISBN
,(SELECT meta_value FROM wp_postmeta WHERE wp_postmeta.meta_key = 'Jacket Condition' AND wp_postmeta.post_id = wp_posts.ID) as "Jacket Condition"
,(SELECT meta_value FROM wp_postmeta WHERE wp_postmeta.meta_key = 'Location' AND wp_postmeta.post_id = wp_posts.ID) as  Location
,(SELECT meta_value FROM wp_postmeta WHERE wp_postmeta.meta_key = 'Published Place' AND wp_postmeta.post_id = wp_posts.ID) as "Published Place"
,(SELECT meta_value FROM wp_postmeta WHERE wp_postmeta.meta_key = 'Published Year' AND wp_postmeta.post_id = wp_posts.ID) as "Published Year" 
,(SELECT meta_value FROM wp_postmeta WHERE wp_postmeta.meta_key = 'Publisher' AND wp_postmeta.post_id = wp_posts.ID) as Publisher 
,(SELECT meta_value FROM wp_postmeta WHERE wp_postmeta.meta_key = 'Size' AND wp_postmeta.post_id = wp_posts.ID) as Size
FROM wp_posts
WHERE post_type = 'post' 
ORDER BY
post_title
, post_content 
```

谢谢各位的意见！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T07:56:29.020

**自定义字段内联 SQL 导出查询**

我想出了一个看起来很激烈的查询。它使用列中的自定义字段提取帖子，内联。请注意，查询中的“Concat”是在一些文本中欺骗相关帖子，您可以自行决定添加更多自定义字段。我的 SQL 应用程序（Sequel Pro）有一个 CSV 导出功能，我在查询远程数据库后使用它。工作非常好。

```
SELECT *

FROM (

    SELECT 
        `wp_posts`.`ID` , 
        `wp_posts`.`post_title` AS `Title`,
        `wp_posts`.`post_date` AS `Date`,

        MAX( CASE WHEN `wp_postmeta`.`meta_key` = 'useremail'
        THEN `wp_postmeta`.`meta_value`
        END ) AS `Email`,

        MAX( CASE WHEN `wp_postmeta`.`meta_key` = 'usercell'
        THEN `wp_postmeta`.`meta_value`
        END ) AS `Cell Phone`,

        concat('http://yoururl.com/?p=',`wp_posts`.`ID`) as `URL`

    FROM `wp_posts`

    LEFT JOIN `wp_postmeta` ON ( `wp_posts`.`ID` = `wp_postmeta`.`post_id` )

    WHERE `wp_posts`.`post_status` = 'publish'

    AND `wp_posts`.`post_type` = 'customposttype'

    GROUP BY `wp_posts`.`ID`

    ORDER BY `wp_posts`.`post_date` DESC

) AS `t` WHERE 1 =1 
```

**结果：**

![自定义字段内联导出结果](../Images/7013ed567abe4ba015977a06a098f2c7.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T09:22:54.140

尝试许多 CSV 导出插件。我用[这个](http://wordpress.org/extend/plugins/navayan-csv-export/screenshots/)效果很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T14:40:11.313

我认为您需要的一切都在 *_posts 和 *_postmeta 表中。

有两种方法可以做到。首先，只需在 *_post 表上加入 *_postmeta 表。

```
"SELECT * FROM {$wpdb->posts} LEFT JOIN {$wpdb->postmeta} ON {$wpdb->posts}.ID = {$wpdb->postmeta}.post_id" 
```

您将希望枚举您的字段，而不是使用 asterix 或 course。您将不得不循环和组织每个帖子的多行。

其次，编写子查询。

```
"SELECT *,(SELECT meta_value FROM {$wpdb->postmeta} WHERE {$wpdb->postmeta}.meta_key = 'Publisher' AND {$wpdb->postmeta}.post_id = {$wpdb->posts}.ID) as Publisher,... FROM {$wpdb->posts}" 
```

子查询在这种情况下应该表现得很好。再次枚举您的字段。

# windows-7 - Windows 7 WebDAV 网络驱动器大小显示本地驱动器大小。不让我复制文件

> ID：12855859
> 
> 赞同：1
> 
> 时间：2012-10-12T09:15:48.313
> 
> 标签：windows-7, webdav, quota, network-drive

当我在 Windows 7 中将 WebDAV 驱动器映射为网络驱动器时（使用`Map Network Drive`资源管理器中的选项），映射的驱动器大小显示为与我的 C: 驱动器大小完全相同。例如，我的 C: 驱动器为 40GB，其中 2GB 可用。我的网络驱动器是 200 GB 并且是空的。但是资源管理器显示我的网络驱动器为 40GB，其中 2GB 可用。当我尝试复制大于 2GB 的文件时，它不允许我这样做。

我在 StackOverflow 上问这个问题，因为我正在开发这个 WebDAV 服务器。我正在使用基于 Java 的开源[Milton](http://milton.io)框架。我对其进行了修改以发送`quota-available-bytes`and `quota-used-bytes`。但是，Windows 仍然不正确地显示大小。请不要 OS X 中的 Finder 能够显示正确的驱动器大小，所以我认为这不是服务器的问题。

谷歌搜索显示这是一个已知的 Windows 问题。有解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T19:09:39.497

根据[这篇文章](http://support.microsoft.com/kb/2386902)，这是设计使然，而不是已知的 Windows 问题。

*“这是设计使然。WebDAV 映射驱动器的容量设置为与客户端计算机的系统驱动器容量相匹配。这意味着您从 WebDAV 映射驱动器获得的容量与本地系统驱动器相同。系统驱动器是安装 Windows 的位置。”*

# javascript - Div margin to equal another div's height - JS

> ID：12855861
> 
> 赞同：0
> 
> 时间：2012-10-12T09:15:59.570
> 
> 标签：javascript, html, height

So my content div is basically hidden behind the header and footer, and has 100% height. On some pages I want to have a JS script to tell the content div move below the header and I tried it like so but it's not working:

```
document.getElementById('content').style.marginTop = document.getElementById('header').height + 55;
} 
```

Any ideas?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T09:18:28.090

```
var height = document.getElementById('header').offsetHeight;
document.getElementById('content').style.marginTop = height + "px"; 
```

# php - code for "delete full directory" returns warning

> ID：12855868
> 
> 赞同：0
> 
> 时间：2012-10-12T09:16:36.653
> 
> 标签：php, directory

I have folder, his name is "1", in this folder is 2 folders: "big_images" and "small_images"

I want delete folder "1" and his content, this is code:

```
function removeFullDir ($dir) {
$content = glob($dir."/*");

foreach ($content as $file) {
    if (is_dir($file)) {
        removeFullDir ($file);
    }
    else {
        unlink($file);
    }
}
    rmdir($dir);
}

removeFullDir("1"); 
```

in localhost (XAMPP server, php version 5.4.4) this code works good. in remote server this code also works, but returns warning:

**Warning: Invalid argument supplied for foreach()**

in remote server, php version is 5.2.42

please tell me, why obtain I this warning?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T09:19:15.160

This happens because [`glob`](http://php.net/manual/en/function.glob.php) does not return an array, which means that based on the documentation it must return `false`. This can happen when there is an error, but it can also happen when the directory happens to be empty:

> Returns an array containing the matched files/directories, an empty array if no file matched or FALSE on error.
> 
> Note: On some systems it is impossible to distinguish between empty match and an error.

To prevent the notice just guard against it:

```
function removeFullDir ($dir) {
    $content = glob($dir."/*");
    if(!$content) {
        return;
    }

    // ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T09:22:35.757

一个可能的原因可能是**open_basedir**限制，这意味着 glob() 返回 false 并且它将在 foreach 循环中出错，因为**$content**不是数组，因此您可以检查如下：

```
//before foreach
if(is_array($content) && count($content) > 0) { 
```

# iframe - 在另一个网页的面板中嵌入 Pentaho 报告

> ID：12855869
> 
> 赞同：0
> 
> 时间：2012-10-12T09:16:39.303
> 
> 标签：iframe, panel, pentaho

我有一个 Web 应用程序，它具有多个显示面板的 portlet 样式主页显示。我想要的是能够在其中一个面板中嵌入 Pentaho 报告。这可能吗？

所以我可以在这个面板中嵌入一个 Pentaho 报告吗？我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T13:40:53.603

你应该能够做到这一点。这是 Pentaho 嵌入指南的链接：http: //infocenter.pentaho.com/help/index.jsp?topic= [%2Freporting_embedders_guide%2Ftopic_introduction.html](http://infocenter.pentaho.com/help/index.jsp?topic=%2Freporting_embedders_guide%2Ftopic_introduction.html)

# c# - 强制用户仅粘贴有效的文件夹目录并稍后使用 C# 在 TextBox 控件中禁用编辑目录

> ID：12855871
> 
> 赞同：0
> 
> 时间：2012-10-12T09:16:40.140
> 
> 标签：c#, textbox, directory

我正在开发 Windows 窗体应用程序并创建了一个 TextBox 控件和一个浏览按钮控件，以便用户可以通过 Button 选择一个文件夹并在 TextBox 中显示目录。

我想让用户可以自由地将目录路径直接粘贴到 TextBox 中。但是，同时，用户必须在 TextBox 中仅提供有效目录作为字符串/文本。

此外，我想禁用通过键盘或任何其他可能的方式编辑此目录。用户将能够随时粘贴新的有效目录，但不能在 TextBox 中对其进行编辑。

有没有办法在运行时使用 C# 来做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T09:26:27.067

如果将文本框设置为`ReadOnly`then 将停止编辑`TextBox`.

然后添加一个事件，`KeyDown`您可以捕获是否`Ctrl + V`按下，然后使用类基于该事件进行操作`Clipbboard`，如果目录有效，则设置`TextBox.Text`.

```
private void textBox1_KeyDown(object sender, KeyEventArgs e)
{
  if (e.Modifiers == Keys.Control && e.KeyCode == Keys.V)
  {
    var clipboard = Clipboard.GetText();
    if (Directory.Exists(clipboard))
      textBox1.Text = clipboard;
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T09:26:44.727

> 我想让**用户可以自由地将目录路径** 直接粘贴到 TextBox 中。但是，同时，用户必须在 TextBox 中仅提供有效目录作为字符串/文本。
> 
> 此外，**我想禁用**通过键盘或任何其他可能的方式编辑此目录。用户将能够随时粘贴新的有效目录，但不能在 TextBox 中对其进行编辑。

是不是很矛盾？那你为什么不使用两个文本框呢？首先让用户输入/粘贴，使用 onchange 事件捕获调用检查目录路径是否正确的方法。如果是，该方法将其复制到第二个文本框，不可编辑，该文本框也链接到您的目录浏览器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T09:31:34.380

您可以处理该[`TextChanged`事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.textchanged.aspx)并检查该文件夹是否有效并且可以在那里访问；如果不是，请撤消他们的更改。如果他们可以编辑文本框文本，这可能不切实际，因为它会在每次击键后检查文件夹是否存在，因此无法输入任何新内容。然而，这可能是您希望它的行为方式！

要检查路径是否有效，我会使用[`Path.GetFullPath`](http://msdn.microsoft.com/en-us/library/system.io.path.getfullpath.aspx)- 将您的文本框文本传递给它，如果路径不存在/无效/您无权访问它，它将引发异常。

如果这对您来说有点乱，您可以使用一个按钮来设置剪贴板中的文本[`Clipboard.GetText()`](http://msdn.microsoft.com/en-us/library/system.windows.forms.clipboard.gettext.aspx)，然后执行您的检查，而不是让他们能够编辑文本框。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T11:10:01.513

感谢大家的建议和回答。这是我所做的事情，对我来说就像是一种魅力。我希望，如果以后遇到同样的问题，这将对某人有所帮助。

它是 LukeHennerley 在此处发布的原始代码的修改版本。感谢 LukeHennerley。

```
private void txtBoxTargetDir_KeyDown(object sender, KeyEventArgs e)
    {
        if (e.Modifiers == Keys.Control && e.KeyCode == Keys.V)
        {
            var clipboard = Clipboard.GetText();
            if (Directory.Exists(clipboard))
            {
                txtBoxTargetDir.Clear();
                txtBoxTargetDir.Text = clipboard;
                txtBoxTargetDir.ReadOnly = true;
            }
            else
            {
                txtBoxTargetDir.Clear();
                txtBoxTargetDir.Text = "It's not a valid directory. Please provide a valid directory.";
            }
        }
    } 
```

您必须首先在 Form.Designer.cs 中添加此事件。

# javascript - Google Maps API v3 显示的标记不超过 10 个

> ID：12855878
> 
> 赞同：0
> 
> 时间：2012-10-12T09:17:09.063
> 
> 标签：javascript, google-maps-api-3

我正在使用 Geocoder 回调函数来获取异步的纬度和经度值。

这适用于前 10 个项目。我会在地图上看到一个标记，以及在我的侧边栏上列出的 10 个标记。但是，第 11 项及以后的项目不会显示任何内容。我正在根据参数集查询我们的内部数据库，这些参数集通常会在我正在循环的数据库表中返回 30 多行。

有没有办法在谷歌地图上显示超过 10 个地址。或者是否需要购买任何许可证来获取 geocoder 的额外 API。

提前致谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T11:14:46.340

Google 地理编码服务有速率限制并受配额限制（以防止滥用），（付费）[Google Maps API for Business](https://developers.google.com/maps/licensing)确实有更高的限制。通常的建议是离线地理编码位置，将[坐标存储在数据库](https://developers.google.com/maps/faq#geocoder_exists)中，然后使用这些坐标显示标记。

如果您无法将位置存储在数据库中，则需要检查地理编码器中的返回值，并在它返回超过查询限制错误时进行延迟。[在 SO](https://stackoverflow.com/search?q=OVER+QUERY+LIMIT+delay)和[Google Maps API v3 group](https://groups.google.com/group/google-maps-js-api-v3/search?hl=en&group=google-maps-js-api-v3&q=OVER+QUERY+LIMIT+delay&qt_g=Search+this+group)中都有这样做的例子。

# jquery - Jquery populate select menu list not working in ie

> ID：12855881
> 
> 赞同：2
> 
> 时间：2012-10-12T09:17:16.897
> 
> 标签：jquery, internet-explorer, select, internet-explorer-9

I am populating a select form menu list based on another menu selection (in wordpress) with jquery code below. It works fine in all browsers excepet ie9/8\. Any advice appreciated.

```
$jmake = $j("select[name='make']");
$jmodel = $j("select[name='model']");

$jmake.change(function (){
if($j(this).val() == "ALFA ROMEO") {
    $j("select[name='model'] option").remove();
    $j("<option>GT</option>").appendTo($jmodel);
    $j("<option>BRERA</option>").appendTo($jmodel);
    } 
```

..hopefully that's clear. Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T09:19:48.300

I think there is syntax error in your script:

```
$jmake.change(function (){
if($j(this).val() == "ALFA ROMEO") {
    $j("select[name='model'] option").remove();
    $j("<option>GT</option>").appendTo($jmodel);
    $j("<option>BRERA</option>").appendTo($jmodel);
    }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T09:56:25.267

试试下面。

```
$jmodel.append('<option></option>').val(val).html(text) 
```

# linux - How it's possible that root can use somebody else private key to login?

> ID：12855891
> 
> 赞同：1
> 
> 时间：2012-10-12T09:17:52.153
> 
> 标签：linux, ssh, ssh-keys

User ``alice'' has public key access to server example.com. So he can do:

```
ssh root@example.com 
```

without pwd.

Now on the same local machine root can do the same, i.e. he can access the remote machine without pwd. But I did not even generate a key pair for root. So it looks like root is using alice's private key to login to remote server. How can this happen? Bug, or misconfiguration, or a misunderstanding on my side?

Of course root has access to alice's id_rsa file but it is weird that it is using that file automatically.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:55:09.337

听起来 Alice 的身份文件是为机器配置的。往里看，`/etc/ssh_config`你应该找到一个指向 Alice 的 id_rsa 文件的 Identity 文件的条目。它应该看起来像这样：

```
IdentityFile ~Alice/.ssh/id_rsa 
```

如果这是真的，这意味着 Alice 机器上的任何用户都可以以 root 身份 ssh 到 example.com 服务器。为防止这种情况，请从 ssh_config 中注释掉或删除此行。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-12T09:24:35.663

我认为是误会。用户“爱丽丝”具有 root 权限。这就是为什么 'Alice' 和 'root' 都可以以 root 身份 ssh 到 example.com - 两者都共享具有 root 权限的同一个用户组。检查 GID。

# php - 如何在 php resque 中为 redis 定义工作？

> ID：12855896
> 
> 赞同：0
> 
> 时间：2012-10-12T09:18:05.563
> 
> 标签：php, redis

我是 redis 的新手，目前我正在为 redis 使用 PHP resque。如何在 php resque 中定义工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T16:43:17.867

这在 2012 年 10 月 13 日发布的最新版本的 PHP-resque 中发生了变化。根据更改日志，“将作业参数包装在一个数组中以提高与 ruby​​ resque 的兼容性。”

which means if you've upgraded to PHP-Resque 1.2 you will access jobs from $args[0].

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T09:19:46.390

排队作业

作业排队如下：

```
require_once 'lib/Resque.php';

// Required if redis is located elsewhere
Resque::setBackend('localhost:6379');

$args = array(
    'name' => 'Chris'
); 
```

Resque::enqueue('default', 'My_Job', $args); 定义工作

每个作业都应该在它自己的类中，并包含一个 perform 方法。

```
class My_Job
{
    public function perform()
    {
        // Work work work
        echo $this->args['name'];
    }
} 
```

当作业运行时，该类将被实例化，并且任何参数都将设置为实例化对象上的数组，并可通过 $this->args 访问。

作业引发的任何异常都将导致作业失败 - 在此要小心，并确保处理不应导致作业失败的异常。

# mysql - SQL：获取当前日期和当前日期+15天之间的数据

> ID：12855907
> 
> 赞同：1
> 
> 时间：2012-10-12T09:18:51.180
> 
> 标签：mysql

在我的应用程序中必须找到即将到来的生日成员，所以我必须找到当前日期和当前日期 +15 天之间的生日。

我试过这个查询

```
Select name from tname 
where dayofyear(birthday)-dayofyear(now()) between 0 and 15 
```

当前日期到达年末时，此查询不起作用

请给我正确的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T09:32:44.303

试试这个查询 -

```
SELECT
  name
FROM
  tname
WHERE
  birthday + INTERVAL YEAR(CURDATE()) - YEAR(birthday) YEAR
    BETWEEN (CURDATE()) AND CURDATE() + INTERVAL 15 DAY; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T09:20:26.267

```
select * 
from tname 
where DATEDIFF(MAKEDATE(YEAR(now()),DAYOFYEAR(birthday)),now()) BETWEEN 0 and 15 
```

这可能会帮助你..，这将是简短的方法。

# php - 在 yii 中显示带有自定义属性的表单

> ID：12855908
> 
> 赞同：0
> 
> 时间：2012-10-12T09:18:58.907
> 
> 标签：php, yii

我想在 YII中显示具有自定义属性的表单，主要是**enctype 。**

我在我的一个视图文件中编写了代码。

```
$form = $this->beginWidget('GxActiveForm', array(
'id' => 'regulation-form',
//'enctype'=>'multipart/form-data',
'enableAjaxValidation' => false,
)); 
```

但它会像这样呈现

```
<form id="regulation-form" method="post" action="my action"> 
```

我想要这样的结果

```
<form id="regulation-form" method="post" action="my action" enctype='form/multi-part'> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T09:22:47.783

假设`GxActiveForm`extends `CActiveForm`，您需要使用该[`htmlOptions`](http://www.yiiframework.com/doc/api/1.1/CActiveForm#htmlOptions-detail)属性：

```
$form = $this->beginWidget('GxActiveForm', array(
    'id' => 'regulation-form',
    'htmlOptions' => array('enctype'=>'multipart/form-data'),
    'enableAjaxValidation' => false,
)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T09:22:11.410

您需要如下编写表单小部件

```
$form = $this->beginWidget('GxActiveForm', array(
'id' => 'regulation-form',
//'enctype'=>'multipart/form-data',
'enableAjaxValidation' => false,
'htmlOptions' => array('enctype' => 'multipart/form-data'),
)); 
```

# node.js - 代码有时会失败，有时会运行

> ID：12855911
> 
> 赞同：0
> 
> 时间：2012-10-12T09:19:05.960
> 
> 标签：node.js

就 node.js 而言，我是一个新手。我编写了以下代码来管道两个 linux 命令。这是我的nodejs代码：

```
var spawn = require('child_process').spawn,
    ls = spawn('ls',['-lh','/usr']),
    grep = spawn('grep',['bin']);

/*
ls.stdout.on('data',function(data){
    console.log('stdout: '+data);
});
*/

ls.stdout.on('data',function(data){
    console.log(""+data);
    grep.stdin.write(data);
});

ls.stderr.on('data',function(data){
    console.log('stderr: '+data);
});

ls.on('exit',function(code){
    console.log('Exit code '+code);
    grep.stdin.end();
})

// ------------------------------------

grep.stdout.on('data',function(data){
    console.log('stdout: '+data);
});

grep.stderr.on('data',function(data){
    console.log('stderr: '+data);
}); 
```

现在这段代码有时会失败，有时会运行。我现在很困惑。当它失败时，它说：

```
Exit code 0
total 160K
drwxr-xr-x   2 root root  68K Oct 12 12:54 bin
drwxr-xr-x   2 root root 4.0K Jun 20 19:58 games
drwxr-xr-x  54 root root 4.0K Sep 24 17:52 include
drwxr-xr-x 252 root root  44K Oct  2 21:53 lib
drwxr-xr-x  10 root root 4.0K Apr 28 19:16 local
drwxr-xr-x   2 root root  12K Sep 18 15:51 sbin
drwxr-xr-x 362 root root  12K Sep 28 17:58 share
drwxr-xr-x   5 root root 4.0K Jul  7 23:39 src

events.js:66
        throw arguments[1]; // Unhandled 'error' event
                       ^
Error: This socket is closed.
    at Socket._write (net.js:517:19)
    at Socket.write (net.js:509:15)
    at Socket.<anonymous> (/home/rajat/nodexperiments/full-spawn.js:13:13)
    at Socket.EventEmitter.emit (events.js:88:17)
    at Pipe.onread (net.js:395:14) 
```

当它运行时，它说：

```
total 160K
drwxr-xr-x   2 root root  68K Oct 12 12:54 bin
drwxr-xr-x   2 root root 4.0K Jun 20 19:58 games
drwxr-xr-x  54 root root 4.0K Sep 24 17:52 include
drwxr-xr-x 252 root root  44K Oct  2 21:53 lib
drwxr-xr-x  10 root root 4.0K Apr 28 19:16 local
drwxr-xr-x   2 root root  12K Sep 18 15:51 sbin
drwxr-xr-x 362 root root  12K Sep 28 17:58 share
drwxr-xr-x   5 root root 4.0K Jul  7 23:39 src

Exit code 0
stdout: drwxr-xr-x   2 root root  68K Oct 12 12:54 bin
drwxr-xr-x   2 root root  12K Sep 18 15:51 sbin 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T12:36:16.323

这显然是一种竞争条件，因为 node.js 是一个高度并行的环境，您已经找到了一个非常好的示例来证明这一点。

```
ls.on('exit',function(code){
    console.log('Exit code '+code);
    grep.stdin.end();
}) 
```

ls 在完成对 grep 的写入之前触发上述事件，然后关闭用于通信的套接字。您的输出给您的提示是，来自 ls 的 exit(0) 消息出现在输出顶部一次，一次出现在错误消息上方。

你不应该在这里关闭 grep 的标准输入通道。

但是如何使用 .exec() 而不是 spawn 在执行类似操作的 bash 脚本上

```
#/bin/bash mybashscript
ls $1 | grep bin 
```

然后使用 JavaScript 闭包，例如

```
child = exec('mybashscript',['-lh','/usr']
  function (error, stdout, stderr) {
    console.log('stdout: ' + stdout);
    console.log('stderr: ' + stderr);
    if (error !== null) {
      console.log('exec error: ' + error);
    }
}); 
```

对于这些事件，您的代码顺序更难阅读。

# python - Python: how to run several scripts (or functions) at the same time under windows 7 multicore processor 64bit

> ID：12855914
> 
> 赞同：0
> 
> 时间：2012-10-12T09:19:41.477
> 
> 标签：python, performance, multiprocessing, multicore

sorry for this question because there are several examples in Stackoverflow. I am writing in order to clarify some of my doubts because I am quite new in Python language.

i wrote a function:

```
def clipmyfile(inFile,poly,outFile):
... # doing something with inFile and poly and return outFile 
```

Normally I do this:

```
clipmyfile(inFile="File1.txt",poly="poly1.shp",outFile="res1.txt")
clipmyfile(inFile="File2.txt",poly="poly2.shp",outFile="res2.txt")
clipmyfile(inFile="File3.txt",poly="poly3.shp",outFile="res3.txt")
......
clipmyfile(inFile="File21.txt",poly="poly21.shp",outFile="res21.txt") 
```

I had read in this example [Run several python programs at the same time](https://stackoverflow.com/questions/12126655/run-several-python-programs-at-the-same-time) and i can use (but probably i wrong)

```
from multiprocessing import Pool
p = Pool(21)  # like in your example, running 21 separate processes 
```

to run the function in the same time and speed my analysis

I am really honest to say that I didn't understand the next step.

Thanks in advance for help and suggestion Gianni

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T10:46:39.263

您提供的示例中使用的映射仅适用于接收一个参数的函数。你可以在这里看到一个解决方案：[Python multiprocessing pool.map for multiple arguments](https://stackoverflow.com/questions/5442910/python-multiprocessing-pool-map-for-multiple-arguments)

在您的情况下，您要做的是（假设您有 3 个包含文件、策略、输出的数组）：

```
def expand_args(f_p_o):
    clipmyfile(*f_p_o)  

files = ["file1.txt", "file2.txt"] 
polis = ["poli1.txt", "poly2.txt"]
outis = ["out1.txt", "out2.txt"]
len_f = len(files)
p = Pool()
p.map(expand_args, [(files[i], polis[i], outis[i]) for i in xrange(len_f)]) 
```

# javascript - 检测 IE“忽略网页上指定的颜色”设置状态

> ID：12855917
> 
> 赞同：2
> 
> 时间：2012-10-12T09:19:52.600
> 
> 标签：javascript, internet-explorer, accessibility

IE 中有一个可访问性选项（“忽略网页上指定的颜色”），它会从网页中删除所有 CSS 颜色/背景颜色，以便某些用户更容易查看。

这可能会通过删除根本无法在前台输出的有用图像而导致问题。

有谁知道是否有办法在最终用户浏览器中检测此设置的状态？

最终它可以用于根据此设置的状态显示替代样式，因此如果可以使用 JS 检测到它，那将是完美的。

但是，我意识到这是一个很长的尝试，因为允许网页检测浏览器设置可能会打开安全漏洞！但对这个主题的任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T12:45:42.717

您可以使用*getComputedStyle*测试给定元素；这不会为您节省自定义 css（如果用户在可访问性设置中定义了覆盖 css），但使用剥离颜色它确实可以工作（尽管它仍然是一个 hack）。

一个 jQuery 示例如下：

```
<div id="example" style="background-color:lime;width:40px;height:40px;border:2px solid #000;"></div>
<script>
$(function(){
    alert($("#example").css("backgroundColor"));
});
</script> 
```

这将为您提供具有可访问颜色的白色 (255,255,255) 和具有剥离颜色的适当石灰 (0,255,0) - 如果您决定使用它，这将使您开始进行此检测。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T19:27:48.450

是的，你可以，我找不到我正在寻找的链接，但下面的链接会让你开始：[http ://www.w3.org/TR/css3-color/#css-system](http://www.w3.org/TR/css3-color/#css-system)

最好的事情是你不需要 Javascript。

# javascript - 从 XMLHttpRequest-Object 获取 responseText

> ID：12855919
> 
> 赞同：1
> 
> 时间：2012-10-12T09:20:02.443
> 
> 标签：javascript, c++, html, web-applications, cgi

我用 c++ 编写了一个 cgi 脚本，将查询字符串返回给请求的 ajax 对象。我还将查询字符串写入文件中，以查看 cgi 脚本是否正常工作。但是，当我在 html 文档中询问要在消息框中显示的响应文本时，我收到一条空白消息。

这是我的代码：

js：

```
<script type = "text/javascript">

var XMLHttp;
if(navigator.appName == "Microsoft Internet Explorer") {
XMLHttp = new ActiveXObject("Microsoft.XMLHTTP");
} else {
XMLHttp = new XMLHttpRequest();
}

function getresponse () {
XMLHttp.open
("GET", "http://localhost/cgi-bin/AJAXTest?" + "fname=" +
document.getElementById('fname').value + "&sname=" + 
document.getElementById('sname').value,true);
XMLHttp.send(null);
}

XMLHttp.onreadystatechange=function(){
if(XMLHttp.readyState == 4)
{
document.getElementById('response_area').innerHTML +=  XMLHttp.readyState;
var x= XMLHttp.responseText
alert(x)
} 
}
</script>

First Names(s)<input onkeydown = "javascript: getresponse ()" 
id="fname" name="name"> <br>

Surname<input onkeydown = "javascript: getresponse();" id="sname">

<div id = "response_area">

</div> 
```

C++：

```
int main() {

QFile log("log.txt");
if(!log.open(QIODevice::WriteOnly | QIODevice::Text))
{
    return 1;
}
QTextStream outLog(&log);
QString QUERY_STRING= getenv("QUERY_STRING");

//if(QUERY_STRING!=NULL)
//{

    cout<<"Content-type: text/plain\n\n"
        <<"The Query String is: "
        << QUERY_STRING.toStdString()<< "\n";
    outLog<<"Content-type: text/plain\n\n"
          <<"The Query String is: "
          <<QUERY_STRING<<endl;

//}

return 0;
} 
```

我很高兴每一个建议做什么！

编辑：我的日志文件的输出工作得很好：

```
Content-type: text/plain

The Query String is: fname=hello&sname=world 
```

我只是注意到，如果我用 IE8 打开它，我会得到查询字符串。但只有在 IE 之后的第一个“keydown”时才会执行任何操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T10:19:47.000

1.  您不必`javascript:`在`on___`处理程序中使用，就`onkeydown="getresponse();"`足够了；

2.  IE>=7 支持`XMLHttpRequest`object，所以直接检查是否`XMLHttpRequest`存在比检查navigator 是否为IE 好。例子：

    ```
    if(XMLHttpRequest) XMLHttp=new XMLHttpRequest();
    else if(window.ActiveXObject) XMLHttp=new ActiveXObject("Microsoft.XMLHTTP"); 
    ```

3.  在您的`getresponse()`函数中，尝试在开头（之前`open`）添加以下代码：

    ```
    try{XMLHTTP.abort();}catch(e){} 
    ```

    因为您使用的是全局对象，所以您可能希望在打开另一个连接之前“关闭”它。

* * *

**编辑**：

某些浏览器（可能是 Firefox 本身？）在默认状态下不能很好地处理非“text/xml”响应，所以为了确保事情和东西，试试这个：

```
function getresponse () {
  try{XMLHttp.abort();}catch(e){}
  XMLHttp.open("GET", "http://localhost/cgi-bin/AJAXTest?" + "fname=" +
    document.getElementById('fname').value + "&sname=" + 
    document.getElementById('sname').value,true);
  if(XMLHttp.overrideMimeType) XMLHttp.overrideMimeType("text/plain");
  XMLHttp.send(null);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T15:35:10.417

我的问题与代码无关...我在本地 IIS7 上测试我的脚本，然后双击文件打开了 html 页面。但是您必须通过浏览器（localhost/mypage.htm）打开网页，否则对于浏览器而言，html 和可执行文件具有不同的来源。这是不允许的。

# axapta - 在 ax 2009 中没有出现子网格的新记录

> ID：12855924
> 
> 赞同：0
> 
> 时间：2012-10-12T09:20:12.337
> 
> 标签：axapta

我在 tabPage1 中为 ParentTable 创建了一个新网格，在 tabPage2 中为 childTable 创建了一个子网格。打开表单后，数据显示成功，但是当我在 tabpage2 中并单击 ctrl + N 时，新行将在父网格中插入新行，而不是在子网格中。如何从表单中为子网格插入新行。谢谢 N

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T21:48:37.580

将`DataSource`tabPage2 的属性设置为您的子数据源的名称。

# git - 如何处理大型 git 存储库？

> ID：12855926
> 
> 赞同：14
> 
> 时间：2012-10-12T09:20:17.580
> 
> 标签：git

我目前正在将 git 用于大型存储库（大约 12 GB，每个分支的大小为 3 GB）。该存储库包含许多二进制文件（音频和图像）。

问题是克隆和拉取可能需要很多时间。特别是“解决增量”步骤可能非常非常长。

解决此类问题的最佳方法是什么？

我试图删除 delta 压缩，因为它[在这里](https://stackoverflow.com/a/7153033/1393890)使用 .gitattributes 中的 delta 选项进行了解释，但它似乎并没有改善克隆持续时间。

提前致谢

凯文

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-12T09:23:33.457

2015 年 4 月更新：[**Git 大文件存储 (LFS)**](https://github.com/blog/1986-announcing-git-large-file-storage-lfs)（由 GitHub 提供）。

它使用[**git-lfs**](https://github.com/github/git-lfs)（请参阅**[git-lfs.github.com](https://git-lfs.github.com/)**）并使用支持它的服务器进行测试：[**lfs-test-server**](https://github.com/github/lfs-test-server)：
**您只能将元数据存储在 git repo 中，而将大文件存储在其他地方**。

![https://cloud.githubusercontent.com/assets/1319791/7051226/c4570828-ddf4-11e4-87eb-8fc165e5ece4.gif](../Images/35543ef6b5979bbdb40878b5d36425bf.png)

* * *

原始答案（2012）

*对于变化不大*的大型二进制文件，一种解决方案是将它们存储在不同的引用中（例如[Nexus 存储库），并且仅对](http://www.sonatype.org/nexus/)*声明*您需要的版本的文本文件进行版本化。
使用“工件存储库”比在*源*存储库中存储二进制元素更容易（用于比较版本和分支之间的合并，这对所述二进制文件没有多大用处）。

另一个以 git 为中心的解决方案是**[git-annex](http://git-annex.branchable.com/)**：

> `git-annex`允许使用 git 管理文件，而无需将文件内容检查到 git 中。
> 虽然这可能看起来自相矛盾，但在处理比 git 目前可以轻松处理的文件时，它很有用，无论是由于内存、时间或磁盘空间的限制。

但是，它与 Windows 不兼容。

更通用的解决方案可能是[**git-media**](https://github.com/schacon/git-media)，它还允许您将 Git 与大型媒体文件一起使用，而无需将媒体存储在 Git 本身中。

最后，最简单的解决方案是将这些二进制文件隔离在它们自己的[git 子模块](http://git-scm.com/book/en/Git-Tools-Submodules)中，正如您在问题中提到的那样：它不是很令人满意，初始克隆仍需要一些时间，但父 repo 的下一次更新将很短。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-15T06:43:02.100

按着这些次序。

1.通过输入以下代码在本地机器上安装 git lfs。

```
git lfs install 
```

2.现在添加您希望lfs为您管理的文件类型。

```
git lfs track "*.mp4" 
```

3.  现在你们都准备好了。继续添加、提交和推送您的文件，不会有任何警告。

# typo3 - TYPO3 语言翻译错误

> ID：12855927
> 
> 赞同：1
> 
> 时间：2012-10-12T09:20:19.483
> 
> 标签：typo3, typoscript, templavoila

我遇到了这个奇怪的错误，其中一个内容被提取了两次

```
 #Page Content
    10 = RECORDS
    10.source.current=1
    10.tables = tt_content
    10.stdWrap.required = 1
    10.wrap =  | 

    #Alternate content is fetched from page 36 if page content not present
    10.stdWrap.ifEmpty.cObject = CONTENT
    10.stdWrap.ifEmpty.cObject {
       table = tt_content
       select.pidInList = 36
    } 
```

除了我翻译页面时，所有这些都可以正常工作。问题是，**仅在我的备用语言中，此备用内容被提取两次**。

翻译适用于正常内容。如果用户没有提供内容，则必须获取默认集。在此示例中，我的“页面内容”为空，因此仅提取了一次替代内容，而在第二种语言中，则提取了两次。

顺便说一句，这个打字稿是在 TemplaVoila 模板的 XML 中编写的。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T12:26:27.610

我已设法通过以替代语言创建新内容而不是翻译原始内容来解决此问题。

当通过此方法调用翻译后的内容时，TemplaVoila 无法很好地处理它。再说一次，也许它不是为此而设计的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-18T09:39:46.113

我刚刚遇到这个问题，我使用的是 CONTENT 模块而不是 RECORDS （在上面的示例中）。

我的解决方案是我错过了 select.languageField 行：

```
10 = CONTENT
10.table = tt_content
10 {
    select.where = colPos = 0
    select.pidInList = 47
    select.orderBy = sorting
    select.languageField = sys_language_uid
} 
```

干杯

# process - 在 Windows 8 上以管理员身份远程 WMI

> ID：12855928
> 
> 赞同：0
> 
> 时间：2012-10-12T09:20:21.607
> 
> 标签：process, wmi, remoting, remote-access

我正在尝试连接到远程机器并运行一个脚本，让我从该机器获取操作系统。为此，我通过 WMI 连接，运行 cmd /c bcdedit -v > bcd.txt。由于某种原因，我一直被拒绝访问，这与从非管理员帐户运行 bcdedit 相同。设置了 WMI 安全性，即运行记事本或 calc 可以完美运行。登录并用于连接到机器的用户是管理员。我被困在这几天没有任何解决方案。欢迎任何解决方法。

注意：有问题的操作系统是 Windows 8 注意2：尝试过的解决方法（但失败）：运行另一个进程，该进程使用 bcdedit（拒绝访问）安排任务，尝试将进程设置为从属性框中以管理员身份运行（甚至无法启动从 WMI 远程）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T16:28:48.887

本地管理员帐户和网络管理员帐户是两个不同的权限。您可以使用本地管理员帐户或具有所需访问令牌的任何帐户访问系统 BCD。

我不确定这些信息是否可以通过 SNMP 获得。

另一种方法是允许远程访问注册表并从本地 \HKLM\BCD00000000 分支（镜像系统 BCD）解码信息。

# c# - 泛型方法的可重用非泛型方法

> ID：12855930
> 
> 赞同：2
> 
> 时间：2012-10-12T09:20:30.730
> 
> 标签：c#, generics, interface

我有以下基本界面

```
public interface IHandler{
  void Handle(IMessage message);
} 
```

和继承基本接口的通用接口

```
public interface IHandler<TMessage> : IHandler where TMessage : IMessage{
  void Handle(TMessage message);
} 
```

我的类可以`IHandler<TMessage>`多次实现接口。`IMessage`是消息的基本接口，在这里不相关。目前我正在实现如下接口。

```
public class ExampleHandler : IHandler<ExampleMessage>, IHandler<OtherExampleMessag>{

  void IHandler.Handle(IMessage message){
    ExampleMessage example = message as ExampleMessage;

    if (example != null) {
      Handle(example);
    }
    else {
      OtherExampleMessage otherExample = message as OtherExampleMessage;

      if (otherExample != null) {
        Handle(otherExample);
      }
  }

  public void Handle(ExampleMessage) {
   //handle message;
  }

  public void Handle(OtherExampleMessage) {
   //handle message;
  }
} 
```

困扰我的是我必须实现该`Handle(IMessage)`方法的方式，因为我认为它有很多冗余代码，并且每次`IHandler<TMessage>`在我的类上实现新接口时我都必须扩展该方法。

我正在寻找的是一种更通用的方法来实现该`Handle(IMessage)`方法（可能在处理程序的基类中），但我目前坚持如何做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T09:29:19.593

您可以使用 new`dynamic`关键字将重载决议移至 DLR：

```
void IHandler.Handle(IMessage message)
{
    dynamic d = message;
    Handle(d);
} 
```

请注意，`RuntimeBinderException`如果传入的消息对您的班级无效，这将在运行时失败。
为避免此异常，您可以为所有未知消息类型添加处理程序：

```
private void Handle(object unknownMessage)
{
    // Handle unknown message types here.
} 
```

* * *

要`IHandler.Handle`在基类中实现，您需要做更多的工作：

```
public class BaseHandler : IHandler
{
    void IHandler.Handle(IMessage message)
    {
        dynamic d = message;
        Handle(d);
    }

    private void Handle<TMessage>(TMessage message) where TMessage : IMessage
    {
        var handler = this as IHandler<TMessage>;
        if(handler == null)
            HandleUnknownMessage(message);
        else
            handler.Handle(message);
    }

    protected virtual void HandleUnknownMessage(IMessage unknownMessage)
    {
        // Handle unknown message types here.
    }
} 
```

您的特定处理程序将如下所示：

```
public class ExampleHandler : BaseHandler,
                              IHandler<ExampleMessage>,
                              IHandler<OtherExampleMessage>
{
    public void Handle(ExampleMessage message)
    {
        // handle ExampleMessage here
    }

    public void Handle(OtherExampleMessage message)
    {
        // handle OtherExampleMessage here
    }
} 
```

这段代码现在像这样工作：

1.  DLR 调用`BaseHandler.Handle<TMessage>`具有真实消息类型的泛型方法，即`TMessage`不会是`IMessage`具体的消息类，如`ExampleMessage`.
2.  在此通用处理程序方法中，基类尝试将自己的大小写为特定消息的处理程序。
3.  如果不成功，它会调用`HandleUnknownMessage`来处理未知的消息类型。
4.  如果转换成功，它会调用`Handle`特定消息处理程序上的方法，有效地将调用委托给具体的处理程序实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T09:27:42.523

一种合理的方法是明智地使用反射：

```
var method = this.GetType().GetMethod("Handle", new[] { message.GetType() });

if (method != null) {
    method.Invoke(this, new[] { message });
} 
```

如果您这样做太多以至于性能成为问题，您可以缓存测试结果以进行大规模改进。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T09:33:56.243

你卡住了，因为你的班级（在问题中）做的不止一件事。它处理`ExampleMessage`和`OtherExampleMessage`。我建议你创建一个类来处理一件事。

**例子：**

```
public class ExampleHandler : IHandler<ExampleMessage> 
```

和

```
public class OtherExampleHandler : IHandler<OtherExampleMessag> 
```

据我了解，您希望有一个类来处理某种事件。在这种情况下，您可能必须使用[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)来通知每个 Handler 当有事情发生并让他们做他们的工作。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-12T09:33:57.530

接口是说你有一个提供 N 服务的实例。当然，这些服务是相似的，但由于它们针对不同的类型，它们是独立的服务。所以你检测到“代码气味”。气味是“为什么不同服务的通用方法？”。

那么服务是否足够不同以证明通用接口声明的合理性？这里的基础是“复制”。重构出重复。重复是**不好**的。一旦你把重复的东西移出，答案就会不言而喻。

换句话说，摆脱通用方法并以自己的方法处理每个方法......重复是您想要移出到另一个类的内容。如果是这样，请考虑注射。

喜欢你的气味检测！

# iphone - 从另一个 ViewController 调用方法

> ID：12855931
> 
> 赞同：6
> 
> 时间：2012-10-12T09:20:31.167
> 
> 标签：iphone, ios, methods, uiviewcontroller

我有一个 ViewControllerA 和一个 ViewControllerB。我想从 ViewControllerB 调用 ViewControllerA 的方法。

在 ViewControllerA 中存在一个方法：

```
 -(NSMutableArray*) loadData; 
```

在 ViewControllerB.h 中：

```
 #import "ViewControllerA.h"
  .......
 @property (nonatomic, strong) ViewControllerA * viewControllerA;
 @property (nonatomic, strong) NSMutableArray * mutableArray; 
```

在 ViewControllerB.m 中：

```
self.mutableArray =[viewControllerA loadData]; 
```

但该方法没有调用。为什么？提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T09:26:24.060

你不见了

```
self. 
```

只要在viewControllerB的某个地方：

```
self.viewControllerA = [[viewControllerA alloc]init];  //or some other initialization occurs... 
```

然后：

```
self.mutableArray =[self.viewControllerA loadData]; 
```

将工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T09:38:24.560

确保在 viewControllerB 的头文件中指定了 loadData 方法。

```
- (void)loadData; 
```

之后，您现在可以调用方法 loadData。

```
[viewControllerA loadData]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T09:23:59.920

viewControllerA 在调用 [viewControllerA loadData] 之前在 ViewControllerB 中分配？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T09:24:03.880

从控制器 A 推送控制器 B 时，只需指定

```
viewControllerB.viewControllerA = self;
[self.navigationController pushViewController:viewControllerB animated:YES]; 
```

然后从 B 调用方法 A。您面临的问题是由于未分配而只是声明了您在 B 中创建的“viewControllerA”。

# mysql - 在单个表中更新从 column1 到 column2 的值替换查询

> ID：12855933
> 
> 赞同：-1
> 
> 时间：2012-10-12T09:20:33.600
> 
> 标签：mysql

我想将已解决的时间更新为创建时间和状态 = 已解决 ID 列表。

```
+-------+---------------------+---------------------+--------+
| id    | created             | Resolved            | Status |
+-------+---------------------+---------------------+--------+
| 15367 | 2012-07-11 21:15:05 | 1970-01-01 00:00:00 | new    |
| 15370 | 2012-07-11 21:21:12 | 1970-01-01 00:00:00 | new    |
| 15374 | 2012-07-11 21:27:28 | 1970-01-01 00:00:00 | new    |
| 15377 | 2012-07-11 21:31:06 | 1970-01-01 00:00:00 | new    |
+-------+---------------------+---------------------+--------+ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T09:24:11.777

[`UPDATE`](http://dev.mysql.com/doc/refman/5.0/en/update.html)查询有问题吗？

```
UPDATE myTable SET Resolved = Created, Status = 'Resolved' 
WHERE ID IN (15367,15370,15374 ,15377) 
```

# [*看到这个 SQLFiddle*](http://sqlfiddle.com/#!2/14729/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T09:23:45.183

试试这个查询，

update table_name set Resolved = created,status= 'resolved' WHERE id in (15367,15370,15374 ,15377)

# javascript - 重定向前调用JS函数

> ID：12855934
> 
> 赞同：0
> 
> 时间：2012-10-12T09:20:38.027
> 
> 标签：javascript, jsf, primefaces

情况如下：客户端用户输入一些数据，按下命令按钮，发起ajax请求。根据输入数据，服务器端的 JSF Bean 重定向到不同的页面。但除了 HTML5 特性 localstorage 和 sessionStorage 应该在客户端更新，也取决于 bean 的结果。对于存储，用户输入的一些数据是必要的，因此用于存储的 java 脚本必须在原始页面中。

现在，问题似乎是在响应之后总是先完成重定向，然后再执行 js 函数，因此无法在 curses 客户端访问用户的输入数据。

在使用回调参数（重定向发生较早）或服务器端的 RequestContext.execute （但在内部也使用我认为的 oncomplete 事件）后，我尝试在客户端按下命令按钮（如“oncomplete”）后调用 js 函数. 我可以想象的一种可能的解决方案是在客户端使用 window.onunload 和一个隐藏的输入公式来获取 bean 的结果。但是没有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T10:05:12.337

您需要通过 JS 而不是 JSF 重定向。从action方法返回`null`，使其返回到同一页面，然后执行以下脚本在JS中执行重定向。

```
window.location = newURL; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-10T08:44:28.003

如果您将 PrimeFaces 与 JSF 一起使用，则可以在 javascript 中对**PrimeFaces.ajax.ResponseProcessor.doRedirect**进行全局覆盖，以便在实际重定向发生之前放置任何自定义代码：

```
PrimeFaces.ajax.ResponseProcessor.doRedirect = function(node) {

   // <<<< your code is here >>>>

   window.location = node.getAttribute('url');
} 
```

将此代码放在某个 js 文件中，并将其包含在您的所有页面中。

# java - 如何检查一个文件是否保存？

> ID：12855936
> 
> 赞同：2
> 
> 时间：2012-10-12T09:20:48.387
> 
> 标签：java, eclipse, eclipse-plugin

如何检查一个文件（`IFile`）是否保存？`IOpenable`界面中有一种方法可以检查是否保存。但是在这种情况下，我该如何`IOpenable`获取`IFile`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T12:12:29.053

假设每个人都表现良好，您可以尝试使用`FileBuffers.getTextFileBufferManager().getFileBuffer(...)`，然后使用`IFileBuffer.isDirty()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T09:38:14.030

只是松散地，您可以创建一个文件对象来保存这样的东西，但这完全取决于您在 Eclipse 框架中派生 java.io.File 对象本身的方式。所以只是形象地编码......

```
class MySaveFile extends java.io.File implements org.eclipse.jdt.core.IOpenable,org.eclipse.core.resources.IFile{

MySaveFile(String savefilename){
super(savefilename);
}//end constructor

} //end class 
```

**[URL：这里是 eclipse http://www.eclipsezone.com/eclipse/forums/t65832.html](http://www.eclipsezone.com/eclipse/forums/t65832.html)的一个实际例子**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T09:24:06.310

`IResource`那是 and 的父级`IFile`，`IFolder`并且具有`exist()`可用于检查资源是否存在的方法。

# javascript - 删除 JSON 的特定部分

> ID：12855940
> 
> 赞同：0
> 
> 时间：2012-10-12T09:21:04.670
> 
> 标签：javascript, jquery, json

希望有人能以此为我指明正确的方向。

我从 .Net 返回了一个 JSON 格式的列表对象，然后用 JQuery 解析。

```
var jsonOpens = $g.parseJSON(seriesReturn); 
```

如果我提醒这一点，我会收到以下信息：

```
1326531600000,8,49,1326531600000,8,49,1326535200000,11,169,1326535200000,11,169 
```

然后我需要做的是删除第二列。

我设法通过循环和删除来做到这一点

```
 for (var i = 0; i < jsonOpens.length; i++) {                    
       delete jsonOpens[i] [1];                           
       } 
```

这有效，但仍然保留该列，即警报：

```
1326531600000,,49,1326531600000,,49,1326535200000,,169,1326535200000,,169 
```

我尝试通过用单逗号替换双逗号来进行替换，但这在这种格式下不起作用。

对我来说，在保持相同格式的同时识别列并完全删除它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T09:25:47.890

假设它是一个 JS 数组，您应该能够使用 .splice() 方法来删​​除相应的元素：

[http://www.w3schools.com/jsref/jsref_splice.asp](http://www.w3schools.com/jsref/jsref_splice.asp)

所以，你的循环将是（我认为）

```
for (var i = 0; i < jsonOpens.length; i++) {                    
   jsonOpens[i].splice(1,1);                           
 } 
```

# pagination - 用于列出子页面的 WP Pagination

> ID：12855945
> 
> 赞同：0
> 
> 时间：2012-10-12T09:21:13.617
> 
> 标签：pagination, wordpress

我正在开发一个 wordpress，并使用了这个[http://wp.tutsplus.com/tutorials/quick-tip-display-excerpts-of-child-pages-with-a-shortcode/](http://wp.tutsplus.com/tutorials/quick-tip-display-excerpts-of-child-pages-with-a-shortcode/)来制作一个简短的标签在父页面上列出子页面。

但是，我需要在其中添加一个分页，以便在此页面上仅列出 9 个最近的子页面，其中我有短标签。

知道怎么做吗？或者其他一些想法，用可以支持分页列出子页面的东西来替换它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T09:32:16.650

您需要调整`$args`以使用`posts_per_page`.

```
 $args = array(  
    'post_parent' => $post->ID,  
    'post_type' => 'page',
    'posts_per_page' => 9
); 
```

为了让分页工作，我推荐[Simple Pagination](http://wordpress.org/extend/plugins/simple-pagination/)。安装后，在您希望它出现的位置调用它：

```
<?php if(function_exists('wp_simple_pagination')) {
    wp_simple_pagination();
} ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T13:23:24.217

分页不适用于 Wordpress 中的页面。页面不意味着分页。

# ios - 使用情节提要向 tableView 添加 UILongPressGestureRecognizer 后 TableView 无法滚动和滑动

> ID：12855946
> 
> 赞同：2
> 
> 时间：2012-10-12T09:21:26.083
> 
> 标签：ios, storyboard, uigesturerecognizer

我使用情节提要向tableView添加了一个UILongPressGestureRecognizer来实现长按单元格以跳转到新的viewController。但是tableView无法滚动或滑动单元格以将其删除。

我在tableView的连接检查器中将tableView的gestureRecognizer设置为longPressGestureRecognizer。只需将它拖到longPressGestureRecognizer。

但是，如果我只是在 viewDidLoad: 中使用 addGestureRecognizer: 方法，就可以了。这让我很困惑。

# android - Bitmap.createBitmap(Bitmap source, int x, int y, int width, int height) 返回错误的位图

> ID：12855952
> 
> 赞同：8
> 
> 时间：2012-10-12T09:21:43.550
> 
> 标签：android, image

我必须裁剪位图图像。为此，我正在使用

```
Bitmap bitmap = Bitmap.createBitmap(imgView.getWidth(),imgView.getHeight(), Bitmap.Config.RGB_565);
Bitmap result =Bitmap.createBitmap(bitmap,imgView.getLeft()+10, imgView.getTop()+50, imgView.getWidth()-20, imgView.getHeight()-100);
bitmap.recycle();
Canvas canvas = new Canvas(result);
imgView.draw(canvas); 
```

但它会切割位图的底部和右侧。位图的顶部和左侧部分存在于输出中。这意味着 x 和 y 位置没有影响。

我正在寻找好的文档。但我做不到。

提前致谢

这里有什么问题以及如何解决？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-12T09:27:13.593

基本上，您的问题源于您创建位图这一事实。你没有在里面放任何东西。然后，您创建一个较小的位图，然后将 imageView 渲染到该较小的位图。

这会切断底部 100 像素和右侧 20 像素。

您需要创建大位图。将 imageview 数据添加到该位图。然后调整它的大小。

以下代码应该可以工作：

```
Bitmap bitmap = Bitmap.createBitmap(imgView.getWidth(),imgView.getHeight(), Bitmap.Config.RGB_565);
Canvas canvas = new Canvas(bitmap);
imgView.draw(canvas);
Bitmap result =Bitmap.createBitmap(bitmap,imgView.getLeft()+10, imgView.getTop()+50, imgView.getWidth()-20, imgView.getHeight()-100);
bitmap.recycle(); 
```

# jquery - 带有多个单词的Jquery自动完成

> ID：12855954
> 
> 赞同：0
> 
> 时间：2012-10-12T09:21:50.327
> 
> 标签：jquery, jquery-ui

我正在研究 jquery，我有一个带有自动完成功能的文本框，它适用于单个单词，但是当我在该文本框中输入第二个单词时，第一个单词会变得不受欢迎。

假设我首先输入了**Java**然后是**Java Script**，第一个**Java**从文本框中消失了。

这是代码，

```
<script>
$("#tag").autocomplete( {
    source: "http://localhost:8080/autocomp",
        multiple: true,
        mustMatch: true,
        autoFill: true
    });
</script> 
```

文本框应该有像**Java**，**Javascript这样的文本**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T12:14:27.530

我知道这是一个老问题，但是当我遇到同样的问题时，它在搜索排名中排名靠前。这在 jQuery > 1.8 中受支持。[他们的例子](http://jqueryui.com/autocomplete/#multiple)是：

```
<script>
$(function () {
    var availableTags = [
        "ActionScript",
        "AppleScript",
        "Asp",
        "BASIC",
        "C",
        "C++",
        "Clojure",
        "COBOL",
        "ColdFusion",
        "Erlang",
        "Fortran",
        "Groovy",
        "Haskell",
        "Java",
        "JavaScript",
        "Lisp",
        "Perl",
        "PHP",
        "Python",
        "Ruby",
        "Scala",
        "Scheme"];

    function split(val) {
        return val.split(/,\s*/);
    }

    function extractLast(term) {
        return split(term).pop();
    }
    $("#tags")
    // don't navigate away from the field on tab when selecting an item
    .bind("keydown", function (event) {
        if (event.keyCode === $.ui.keyCode.TAB && $(this).data("ui-autocomplete").menu.active) {
            event.preventDefault();
        }
    })
        .autocomplete({
        minLength: 0,
        source: function (request, response) {
            // delegate back to autocomplete, but extract the last term
            response($.ui.autocomplete.filter(
            availableTags, extractLast(request.term)));
        },
        focus: function () {
            // prevent value inserted on focus
            return false;
        },
        select: function (event, ui) {
            var terms = split(this.value);
            // remove the current input
            terms.pop();
            // add the selected item
            terms.push(ui.item.value);
            // add placeholder to get the comma-and-space at the end
            terms.push("");
            this.value = terms.join(", ");
            return false;
        }
    });
});
</script> 
```

我已经对此进行了测试，并且可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T10:47:41.083

你的问题是根源。来源：“http://localhost:8080/autocomp”

尝试将值添加到变量中或以不同的方式获取源。

# php - 通过 AJAX/jQuery 保存到数据库，发送两个变量

> ID：12855956
> 
> 赞同：0
> 
> 时间：2012-10-12T09:21:53.733
> 
> 标签：php, jquery, ajax, contenteditable

我有这个问题，我有多个字段通过 AJAX 调用更新数据库。AJAX 调用如下所示：

```
$(".fresheditable").fresheditor("save", function (id, parsedHtml) {
    $.ajax({
        url: 'save.php',
        type: 'POST',
        data: {
            id: id,
            parsedHtml: parsedHtml
        }
    });
}); 
```

ID 值会根据正在编辑的元素而变化。问题是当更新被发送到`save.php`文档时。如何仅使用特定 ID 运行更新？

查看我的 save.php：

```
if($_POST['id']='link') 
{
    $link = $_POST['parsedHtml']; //get posted data

    // query
    $sql = "UPDATE buttons SET linkname=? WHERE id=?";
    $q = $conn->prepare($sql);

    if ($q->execute(array($link,$_SESSION['button'])))
    {
        echo 1;
    }
}

//The next if-statement could look like this:

if($_POST['id']='contactperson') 
{
    $contactperson = $_POST['parsedHtml']; //get posted data

    // query
    $sql = "UPDATE buttons SET contactperson=? WHERE id=?";
    $q = $conn->prepare($sql);

    if ($q->execute(array($contactperson,$_SESSION['button'])))
    {
        echo 1;
    }
} 
```

`save.php`如果向say发送了多个 ID，`link`并且`contactperson`两个 if 语句都为真，并且更新设置了与`parsedHtml`变量相同的值。

我能做些什么`save.php`来防止这种情况发生吗？不知何故，我需要将正确`parsedHtml`的与相应的`id`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T09:37:52.610

PHP（以及 Javascript）中的比较运算符 is`==`和 not`=`

```
if($_POST["id"]=="link") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T09:40:40.243

是因为您在 IF 测试中使用了单个等号，它在值存在时分配并返回 true？不等于比较吗？

例如

```
if($_POST['id']=='link') 
```

不是

```
if($_POST['id']='link') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T09:26:06.970

您可以使用的一件事是我的意思是数据属性

`<span item-data="some_id">data</span>`现在您可以在 jquery 中选择要更新的 html 中的特定项目数据。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-12T09:24:12.573

使用 else-if 结构。

```
if($_POST['id']='link') {

}
else if($_POST['id']='contactperson') {

} 
```

# php - 根据浏览器在 Yii 中引用不同的 js 文件

> ID：12855963
> 
> 赞同：2
> 
> 时间：2012-10-12T09:22:05.303
> 
> 标签：php, javascript, yii

我有 2 个 js 文件。虽然两者都做同样的事情，但在 IE 7 上不起作用，因此我有 2 个不同的 JS 文件。如果浏览器是 IE7，我需要调用一个，而在所有其他情况下调用另一个。

我在页面顶部有标准的 Yii 声明。

```
<?php
    Yii::app()->getClientScript()->registerScriptFile(Yii::app()->baseUrl . '/js/jquery-1.4.4.js');
    //etc....
?> 
```

我在 document.ready 函数中尝试了以下内容。

```
var browserIE7 = (navigator.userAgent.indexOf("MSIE 7")>=0) ? true : false;
if(browserIE7){
    Yii::app()->getClientScript()->registerScriptFile(Yii::app()->baseUrl . '/js/IEjquery-1.4.4.js');
}else{
    Yii::app()->getClientScript()->registerScriptFile(Yii::app()->baseUrl . '/js/jquery-1.4.4.js');
} 
```

然而，这是行不通的。我以前从来不需要这样做，因此很难弄清楚如何去做。

任何帮助表示赞赏。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T12:12:52.123

如果你想要一些 js hack，你可以在你的 html 中使用如下来包含你的脚本只适用于 IE 版本

```
<!--[if lt IE 7]>
<script src="http://example.com/js/IEjquery-1.4.4.js"></script>
<![endif]--> 
```

参考[http://code.google.com/p/ie7-js/](http://code.google.com/p/ie7-js/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T10:05:36.870

你试过在你的 JS 中执行 php 代码吗？或者我错过了什么...

尝试使用扩展[浏览器](http://www.yiiframework.com/extension/browser/)并在您的布局中使用它（或代码附近的某个地方`Yii::app()->getClientScript()...`）

# jquery - 如何为每组孩子附加处理程序？

> ID：12855966
> 
> 赞同：-1
> 
> 时间：2012-10-12T09:22:11.013
> 
> 标签：jquery, handler

假设我有这个 html 场景：

```
<div class="parent">
    <a href="javascript:void(0);" class="child">Link</a>
    <a href="javascript:void(0);" class="child">Link</a>
    <a href="javascript:void(0);" class="child">Link</a>
</div>          

<div class="parent">
    <a href="javascript:void(0);" class="child">Link</a>
</div> 
```

好吧，在`child`链接上，我想计算该组的大小。但如果我点击第一组中的链接，它必须是 3，而不是 4。

所以我需要为每个组附加一个处理程序。试过：

```
$('.parent .child').size(); 
```

但计数始终为 4。我该怎么做？

另外，请注意，对于没有父母的单个链接：

```
<a href="javascript:void(0);" class="child">Link</a> 
```

它必须也能正常工作。（大小为 1，如果它不在任何“父”组内）

这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T09:29:36.190

不是很优雅，但它应该可以完成工作。

```
$('a.child').each(function() {
    $(this).parent().children('a.child').first().addClass('first');
});
$('a.child.first').parent().each(function() {
    alert($(this).children('a.child').size());
}); 
```

[http://jsfiddle.net/XFbWn/4/](http://jsfiddle.net/XFbWn/4/)

注意，你会得到 1-3-1 而不是 3-1-1 .. 我假设这是因为`a.child`没有父级的选择器首先被选择器抓住，因为它在 DOM 树中高于其他`a.child`的

**编辑**：以上是书面答案的解决方案。以下是作者在评论中描述的用例的更新版本

[http://jsfiddle.net/XFbWn/8/](http://jsfiddle.net/XFbWn/8/)

```
$('a.child').each(function() {
    $(this).parent().children('a.child').first().addClass('first');
});
var i = 0;
$('a.child.first').removeClass('first').each(function() {
    $(this).parent().children('a.child').addClass('colorBoxGroup-' + i);
    $('.colorBoxGroup-' + i).colorbox({ rel: 'colorBoxGroup-' + i, transition: "fade", maxWidth: "900px", maxHeight: "600px" });
    i++;
}); 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T09:27:22.697

试试这个

```
<div class="parent" id='group1'>
   <a href="javascript:void(0);" class="child">Link</a>
   <a href="javascript:void(0);" class="child">Link</a>
   <a href="javascript:void(0);" class="child">Link</a>
</div>          

<div class="parent">
   <a href="javascript:void(0);" class="child">Link</a>
</div>
$('#group1 .child').size(); 
```

# php - 如何在PHP中从用户名中拆分域信息

> ID：12855968
> 
> 赞同：0
> 
> 时间：2012-10-12T09:22:15.427
> 
> 标签：php

PHP 正在提取用户 ID，因为`"domain\username"`我`$_SERVER['AUTH_USER']` 希望能够仅在 html 中回显用户名。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T09:33:32.930

您想`username`从以下字符串中提取：

```
domain\username 
```

您可以使用[strrchr()](http://sg3.php.net/manual/en/function.strrchr.php)：

```
echo substr(strrchr($_SERVER['AUTH_USER'], '\\'), 1); 
```

*你需要一个额外`substr()`的来跳过第一个反斜杠*

或使用`explode()`：

```
echo end(explode('\\', $_SERVER['AUTH_USER'])); 
```

*稍微占用更多内存，但在您的情况下可能无关紧要*

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-12T09:25:27.853

您的网址的结构是什么？什么内容管理系统？什么平台？可能有一个函数可以在核心中获取它。

但是，您可以这样使用 $_GET

```
http://www.domain.com/?username=John

<?php 
$username = $_GET['username'];
// If you're on PHP 5.2+, use:
$username = filter_input(INPUT_GET, 'username', FILTER_SANITIZE_STRING);
?> 
```

# c++ - 更好地了解 C++ 中的类

> ID：12855972
> 
> 赞同：0
> 
> 时间：2012-10-12T09:22:32.500
> 
> 标签：c++, class

我现在学习了几门 C++ 课程和一点 Python。不断出现的一个常见问题是我无法真正理解创建课程时发生的事情。我想知道是否有人可以解释 C++ 中的类的具体细节，或者至少将我指向非常详细的网站。我知道声明，但就访问器、方法、构造函数和析构函数的情况而言，即使您想定义何时以及为什么使用类的最佳时间。我只需要整体澄清。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T10:10:00.733

在编程中，您拥有数据和操作该数据的函数。结构 ( `struct`) 允许您将相关的数据片段分组到一个逻辑对象中。

类允许您将数据和函数组合为一个单元。因此，`matrix_add(m1, m2)`您可以说，而不是说`m1.add(m2)`。数据和函数可以是`private`（仅类可访问）、`protected`（类及其子类可访问）或`public`（任何人都可访问）。这称为**封装**：通常，数据是私有的，可以通过一组公共函数访问。在 C++ 中，a`struct`默认为公共范围，而a 默认为`class`私有范围，但在其他方面是相同的。

*访问器*是通常提供对类的私有数据的访问的函数的名称。这些可以是返回（或获取）数据的*getter* ，也可以是修改（或设置）数据的*setter 。*通常，这些方法检查输入的有效性以确保内部约束成立。请注意，访问器可能不会直接返回私有数据，而是派生属性；也就是说，`size`在`empty`C++ 容器（向量、列表、...）上，可以将其视为访问器，即使这些可以是计算值。

*构造函数*是一个特殊的函数，它允许类将数据初始化为合理的值，或者允许用户使用可能不同的数据创建类的新对象。例如，一个矩形类可以由另一个矩形、一个点和大小、一组顶部/左侧/底部/右侧值构成，或者可以为空。在 C++ 中，构造函数与类同名；在 python 中，这被称为`__init__`.

*默认构造函数*是一个不带参数并将类初始化为其默认状态的构造函数（例如，矩阵类的单位矩阵）。

*复制构造函数*是一个构造函数，它接受另一个类类型的对象并创建它的副本。这允许正确处理分配的内存（例如，对于字符串和向量类）。使用简单的数据结构，对象是按值复制的，因此两个对象将引用相同的内存。

*析构函数*是一个允许类执行清理的特殊函数。这可能是诸如删除任何分配的内存、释放互斥锁或关闭打开的文件句柄之类的事情。在 C++ 中，析构函数与类同名，但`~`前面有一个，例如，对于一个`matrix`类，析构函数是`~matrix`.

方法只是作为类的一部分的函数*。*每个方法都将被操作的类对象作为第一个参数。声明方法时，C++ 在内部为您执行此操作（提供隐式`this`参数），而 python 要求您显式提供参数。

在 C++ 中，*运算符*是一个特殊函数，用于实现例如`+`、`-`和。这允许您创建可以像内置类型一样使用的类（尤其是用于向量、矩阵、复数和有理数等数学类）。`*``/`

一个类（“派生”类）可以从另一个类（“基”类）继承。在这里，派生类是基类的子类，可以访问任何`protected`数据或方法。这称为**继承**。这些构成了阶级*层次*。

可以构造一个类，使其具有`virtual`可以被派生类覆盖的方法。这称为**多态性**。

您可以声明不提供任何实现的虚拟方法。这些方法称为*纯虚*方法，提供它们的类称为*抽象基类*。在这里，派生类需要实现这些方法，而对于非纯虚方法，派生类不需要实现这些方法。

只有纯虚方法（没有其他方法）的类实际上是一个*接口*类。C++ 对此没有任何特殊符号，而其他语言则有。

接口通常用于在两个或多个不同系统之间进行交互。例如，音乐播放器可以提供插件架构，允许插件扩展它可以处理的支持的音频格式。在这里，接口提供了播放器和插件之间的合同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T10:06:18.330

> 不断出现的一个常见问题是我无法真正理解创建课程时发生的事情。

我正在回答这部分，因为其他人已经回答了第二部分，但是下面的代码是 java，在查看代码时，请注意类概念而不是 Java 构造。

好吧，在进入编程世界的 CLASS 之前。让我们来看看一个真实的世界。如果我们环顾四周，我们会在我们的活回声系统中看到许多元素（岩石、动物、人类、植物等）。仔细观察发现，它们有一些共同的特征，可以归为一组[生命、器官、颜色等]，我们将这种共同的分组称为“CLASS”的技术名称。

为了理解，编程世界中的类应该理解为什么会有这样一个叫做类的构造。主要事实是它是称为面向对象编程的编程范式的一部分，程序员试图将现实世界的对象（例如车辆、银行等）映射到称为对象的编程模型中。为了创建这些对象，我们必须创建一个可以实际描述这些对象的构造。这样的构造称为类。

为了完整性，下面的解释不仅仅是类。

让我们看一个技术示例 Circle、Rectangle、Square、Hexagon，观察它们我们发现它们属于一个常见的 CLASS，称为 SHAPE。

不要被下面示例中的细节 [extends、@Override 等] 冲昏了头脑。它解释了分类的简单概念，如何利用它来创建新的类。一旦创建了一个类，它就只是一个骨架，即它没有分配任何内存以供实际使用。为了使一个类有用，我们创建它的对象。所以对象是同一类具有不同状态的“元素”。

比如说圆形物体，obj1，obj2，每个物体都有不同的半径。

```
class Shape {

    String name;
    int color;

    public Shape(String name, int color) {
        this.name = name;
        this.color = color; 
    }

    String getName() {
        return name;    
    }

    int getColor() {
        return color;   
    }

    double getArea() {
        return 0;   
    }

    double getPerimeter() {
        return 0;
    }

}

class Rectangle extends Shape {

    int l, b;

    public Rectangle(int l, int b, int h, int color) {  
        super("Rectangle", color);  
        this.l = l;
        this.b = b;
    }

    /* Overloading */   
    @Override 
    double getArea() {
        return l*b; 
    }
    /* Overloading */
    @Override
    double getPerimeter() {
        return (2*l + 2*b);
    }
}

class Circle extends Shape {

    int r;

    public Circle(int r, int color) {
        super("Circle", color);
        this.r = r;
    }   

    dobule getArea() {
        return (PI * (r*r));    
    }

    double getPerimeter() {
        return (2*PI*r);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T09:29:53.973

将对象视为“智能”结构，它不仅包含数据，还包含操作该数据的代码。将类视为这些“智能”结构的类型定义。

创建类实例就像创建结构类型的变量一样。调用类的成员函数就像调用普通函数一样，将结构作为参数传递给它，名称为“this”。

当您理解了这一点时，您就已经对面向对象编程的全部内容了解最多了。

`struct`顺便说一句：你知道关键字和`class`C++ 中有什么区别吗？在结构中，默认情况下所有成员都是公共的，而在类中，默认情况下所有成员都是私有的。而已。否则结构和类是一回事。当您明确将所有成员声明为私有、公有或受保护时，您可以将它们切换出去，程序将像以前一样编译和工作。

# mouseevent - 无法成功地将项目添加到 JavaFX 条形图的 CategoryAxis 系列的开头

> ID：12855977
> 
> 赞同：2
> 
> 时间：2012-10-12T09:22:57.157
> 
> 标签：mouseevent, javafx-2, bar-chart

我尝试为 JavaFX BarChart 实现向左拖动和向右拖动功能。当我在 x 轴数据系列的末尾添加一个项目并在开头删除一个项目时，左拖动功能可以正常工作。

但是，向右拖动功能无法按预期工作。它应该在 x 轴系列的开头添加一个项目并在末尾删除一个项目。删除工作正常，但添加操作导致项目被添加到条形图的末尾而不是开头。

我怀疑它与使用 CategoryAxis 有关，它不承认需要以排序方式从 ObservableList 更新 BarChart（即使我可以看到该项目被添加到底层 ObservableList 的开头）。

另外，请让我知道是否有更好的方法来实现拖动操作。

下面是重现问题的完整应用程序。

```
import java.text.SimpleDateFormat;
import java.util.Date;
import javafx.application.Application;
import javafx.event.EventHandler;
import javafx.fxml.FXML;
import javafx.scene.Scene;
import javafx.scene.chart.BarChart;
import javafx.scene.chart.CategoryAxis;
import javafx.scene.chart.NumberAxis;
import javafx.scene.chart.XYChart;
import javafx.scene.input.MouseEvent;
import javafx.scene.layout.StackPane;
import javafx.stage.Stage;

public class BarchartProblem extends Application {

    private static SimpleDateFormat dateFormat = new SimpleDateFormat("HH:mm:ss");                

    private double dragStartX = 0;    

    private long minTime;
    private long maxTime;

    @FXML
    private BarChart<String,Number> histogramBarChart;

    @Override
    public void start(Stage primaryStage) {        
        final CategoryAxis xAxis = new CategoryAxis();                
        final NumberAxis yAxis = new NumberAxis();                                
        xAxis.setLabel("Time");       
        yAxis.setLabel("Entries");         
        histogramBarChart = new BarChart<String, Number>(xAxis, yAxis);

        final XYChart.Series series1 = new XYChart.Series();
        histogramBarChart.setLegendVisible(false);

        histogramBarChart.getData().addAll(series1);                                

        histogramBarChart.setOnMousePressed(new EventHandler<MouseEvent>() {

            @Override
            public void handle(MouseEvent mouseEvent) {
                System.out.println(mouseEvent);
                dragStartX = mouseEvent.getX();
            }

        });

        histogramBarChart.setOnMouseDragged(new EventHandler<MouseEvent>() {            
            @Override
            public void handle(MouseEvent mouseEvent) {
                if (dragStartX > mouseEvent.getX()) {            
                    XYChart.Series series = histogramBarChart.getData().get(0);            
                    minTime += 60000;
                    maxTime += 60000;            
                    series.getData().add(new XYChart.Data(dateFormat.format(new Date(maxTime)), 0));
                    series.getData().remove(0);                        
                    System.out.println("Drag Left");
                } else if (dragStartX < mouseEvent.getX()) {                                                        
                    XYChart.Series series = histogramBarChart.getData().get(0);            
                    minTime -= 60000;
                    maxTime -= 60000;
                    series.getData().add(0, new XYChart.Data(dateFormat.format(new Date(minTime)), 0));            
                    series.getData().remove(series.getData().size()-1);                                            
                    System.out.println("Drag Right");        
                }
            }
        });

        final long currentTime = System.currentTimeMillis();
        minTime = currentTime-60000*30;
        maxTime = currentTime;

        for (long i = minTime; i <= maxTime; i += 60000) {            
            series1.getData().add(new XYChart.Data(dateFormat.format(new Date(i)), Math.random()*500));                
        }

        StackPane root = new StackPane();
        root.getChildren().add(histogramBarChart);

        Scene scene = new Scene(root, 300, 250);

        primaryStage.setTitle("BarChart Problem");
        primaryStage.setScene(scene);
        primaryStage.show();
    }

    public static void main(String[] args) {
        launch(args);
    }
} 
```

# linux - Shell 在 jarsigner 中传递密钥库路径参数

> ID：12855978
> 
> 赞同：0
> 
> 时间：2012-10-12T09:22:57.317
> 
> 标签：linux, bash, shell, jarsigner

我有这个

```
KEY_STORE_PATH=/home/userr/mykeystore

jarsigner -verbose -sigalg MD5withRSA -digestalg SHA1 -keystore "$KEY_STORE_PATH" bin/PName-release-unsigned.apk alias_name 
```

它不起作用，在这个命令之后它没有签名的apk文件......

但是当我这样做时它工作得很好

```
jarsigner -verbose -sigalg MD5withRSA -digestalg SHA1 -keystore /home/userr/mykeystore bin/PName-release-unsigned.apk alias_name 
```

编辑：实际上我所做的是以下

```
echo ` echo "pass" | jarsigner -verbose -sigalg MD5withRSA -digestalg SHA1 -keystore "$KEY_STORE_PATH" bin/PName-release-unsigned.apk alias_name` 
```

不，我可以猜到是什么问题，但是这种情况有解决方案吗？

编辑 2

我做了简短的测试

壳内

```
 #  asd=123
 #  echo `echo $asd`
 #  123 
```

它正确打印123，所以我认为还有其他问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T10:47:15.490

如果您从子外壳/另一个脚本内部调用 jarsigner，您应该导出您的环境变量：

```
export KEY_STORE_PATH=/home/userr/mykeystore 
```

# android - Sencha touch：如何在window7上为android制作原生应用程序

> ID：12855985
> 
> 赞同：2
> 
> 时间：2012-10-12T09:23:24.270
> 
> 标签：android, sencha-touch-2

我是移动应用程序开发的新手。我在 Windows 7 机器上为 Android 创建本机应用程序时卡住了。我按照以下步骤操作：

1.  我已经下载了*Sencha Touch*并放置在我的本地机器（www 目录）中。我还下载了 Sencha SDK Tools 来执行所有命令。首先我执行了命令：**sencha generate app GS ../GS**

2.  创建了简单的程序并在我的浏览器中运行。(http://localhost:8080/GS)

3.  我已经从[http://developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html)下载了 Android SDK并安装在我的系统中。我在这里很困惑这里需要给出什么路径。

4.  打开 packager.json 文件添加： "versionCode":"1.0" changed : "platform":"Android" "sdkPath" : "什么是 sdk 路径。我在这里很困惑。我给了 C:\Windows\ System32 我认为这是错误的”//我如何找到 android 路径？

5.  接下来我执行命令：**sencha app build native。** …… `[info] packaging your application as a native app.. Failed to create android project`

...是我收到的错误消息。

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:43:28.287

**sdkpath**应该包含您的**android-sdk**在本地计算机上的位置。

```
"sdkPath":"C:/Users/vksharma/AppData/Local/Android/sdk",// put your android-sdk path here 
```

有关详细信息： [请参阅 Sencha-2 文档](http://docs.sencha.com/touch/2-0/#!/guide/native_android)

要查找您的 android 路径，请按照下列步骤操作：

1)**开始**。
2) 键入**sdkmanager**。如果正确安装了android，它就会出现。打开它。
3）在菜单栏下方给出了**sdk-path**。

*参考快照：-*

![安卓 SDK 管理器](../Images/c1f87fe4f7873b20eaf078f0443ce2db.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T07:18:35.520

下载 Android SDK 文件夹后，您必须将该文件夹保存在本地目录中。

这是所需的路径（您将 android sdk 文件夹保存在本地目录中），您必须提供 packager.json 文件。

# file - Lua中的文件到数组

> ID：12855988
> 
> 赞同：3
> 
> 时间：2012-10-12T09:23:34.797
> 
> 标签：file, io, lua

我想知道如何在某种函数中使用 lua 将一行放入数组中

例如。FileToArray("C:/file.txt")?

我知道我可以使用： var = io.open("file") Data = var:read() 但它只返回第一行，没有其他行。

任何人都知道如何解决这个问题或其他方式？我是 lua 和文件系统的新手。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-12T11:47:36.523

您可以传递`"*a"`给读取函数，它应该读取整个文件：

```
local file = io.open("file-name", "r");
local data = file:read("*a") 
```

如果你想将每一行存储在一个数组中。像 Jane 的解决方案一样，您可以使用 io:lines () - 它返回迭代器函数（每次调用都会为您提供一个新行）

```
 local file = io.open("file-name", "r");
 local arr = {}
 for line in file:lines() do
    table.insert (arr, line);
 end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T10:06:03.167

```
local file = io.open("c:\\file.txt")
local tbllines = {}
local i = 0
if file then
    for line in file:lines() do
     i = i + 1
     tbllines[i] = line
    end
    file:close()
else
    error('file not found')
end 
```

有关更多信息，请参阅：[http ://lua-users.org/wiki/IoLibraryTutorial。](http://lua-users.org/wiki/IoLibraryTutorial)

# sql-server - ASP.NET MVC4 查询示例开源建议

> ID：12855990
> 
> 赞同：1
> 
> 时间：2012-10-12T09:23:40.070
> 
> 标签：sql-server, asp.net-mvc, entity-framework-4.1, query-by-example

我们目前正在构建一个新的应用程序，我们希望为用户提供的部分功能是能够通过 Web UI 构建临时查询以用于报告目的。

例如，用户可以选择Entity1 报告。

然后他们可以通过 UI 选择标准

伪示例： ((Entity1.Type = 'this' OR Entity1.Type = 'something else') AND Entity1.CreatedDate > '01-01'2012')

有谁知道是否有一个好的解决方案可用（开源或付费），因为这似乎实施定制解决方案可能需要大量工作。

除此之外，我们正在使用 Entity Framework v4.1 神奇独角兽版。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T18:27:40.320

如果您构建的 UI 以结构化形式给出结果（例如 {entityType.property}{operation}{value}），那么为此动态构建表达式应该相当简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T07:32:01.290

我决定使用[http://devtools.korzh.com/query-builder-aspnet/](http://devtools.korzh.com/query-builder-aspnet/)，因为它为我节省了大量的开发时间。