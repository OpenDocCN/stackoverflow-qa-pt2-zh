# StackOverflow 问答 12632000-12632999

# java - Android SDK 管理器无法运行

> ID：12632003
> 
> 赞同：3
> 
> 时间：2012-09-28T00:30:18.830
> 
> 标签：java, android, environment-variables

我知道这个问题之前可能已经被问过很多次了，但是没有一个答案对我的问题有帮助。

我遇到的问题是，按照此处的安装说明[http://developer.android.com/sdk/installing/index.html](http://developer.android.com/sdk/installing/index.html)，当我运行 SDK 管理器时，会出现一个命令提示符窗口之后立即关闭。我已尝试按照其他站点的安装说明进行操作，甚至遵循了我在此处可以找到的线程中找到的所有建议。

我正在尝试在 Windows 7 Ultimate 64Bit 上执行此操作，并尝试按照其他帖子中的说明设置路径。我的java版本是6u35。

这是 Android.bat 文件在运行时所说的内容。

```
`Exception in thread "main" java.lang.UnsatisfiedLinkError: no swt-win32-3550 or
swt-win32 in swt.library.path, java.library.path or the jar file
    at org.eclipse.swt.internal.Library.loadLibrary(Unknown Source)
    at org.eclipse.swt.internal.Library.loadLibrary(Unknown Source)
    at org.eclipse.swt.internal.C.<clinit>(Unknown Source)
    at org.eclipse.swt.widgets.Display.<clinit>(Unknown Source)
    at com.android.sdkmanager.Main.showSdkManagerWindow(Main.java:328)
    at com.android.sdkmanager.Main.doAction(Main.java:316)
    at com.android.sdkmanager.Main.run(Main.java:118)
    at com.android.sdkmanager.Main.main(Main.java:101)
Press any key to continue . . .` 
```

我不确定这意味着什么，或者如何解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T16:11:20.990

尝试从[http://download.eclipse.org/eclipse/downloads/drops4/R-4.2.1-201209141800/#SWT](http://download.eclipse.org/eclipse/downloads/drops4/R-4.2.1-201209141800/#SWT)更新 SWT 。

例如：

*   ..\tools\lib\x86\swt.jar <= swt-4.2.1-win32-win32-x86.zip\swt.jar

*   ..\tools\lib\x86_64\swt.jar <= swt-4.2.1-win32-win32-x86_64.zip\swt.jar

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-13T18:54:13.067

我尝试了几种方法来解决这个问题，只有这样才能解决我的问题。坦克

这很简单，而且效果很好！

解决方法：eclipse文件夹swt-gdip-win32-4236.dll swt-win32-4236.dll

　　复制到 system32 文件夹，然后重命名“…-3550”等等！

[http://www.programering.com/a/MDO4YDNwATA.html](http://www.programering.com/a/MDO4YDNwATA.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-29T21:27:51.223

这是一个权限问题。对于那些在Win7/Win8中遇到同样问题的人，右键单击eclipse.exe，然后选择“以管理员身份运行”。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-09-22T19:26:28.960

这很简单，而且效果很好！

解决方法：
　　eclipse文件夹
　　swt-gdip-win32-4236.dll
　　swt-win32-4236.dll

　　复制到 system32 文件夹，然后重命名“…-3550”等等
！

[http://www.programering.com/a/MDO4YDNwATA.html](http://www.programering.com/a/MDO4YDNwATA.html)

# actionscript-3 - Flash CS4 & AS3：如何在外部加载的动态文本中添加/使用超链接

> ID：12632014
> 
> 赞同：2
> 
> 时间：2012-09-28T00:32:45.070
> 
> 标签：actionscript-3, hyperlink, flash-cs4

基本设置是这样的：我将外部文本文件中的文本加载到“新闻和事件”样式的动态文本字段中，该字段嵌套在影片剪辑中。

像这样：

```
var newsloader:URLLoader = new URLLoader(new URLRequest("vzm_news_text.txt"));
newsloader.addEventListener(Event.COMPLETE, completeHandler);

function completeHandler(event:Event):void{
    var loadedText:URLLoader = URLLoader(event.target);
    homeContent.newsText.condenseWhite = true;
    homeContent.newsText.htmlText = loadedText.data;
    homeContent.scrollBar.update();
} 
```

我的外部 .txt 文件包含简单的 html 格式标记并完美加载/显示。

我想不通的是：如何在加载的文本中创建活动链接？

我尝试在 .txt 文件中添加 HREF 标记，但链接和之后的所有内容均未显示。我敢肯定这很简单，而且我搜索了很多都没有运气。我是新手，边走边学。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T05:11:27.460

检查您的 href 行不包含任何可能破坏文本变量的 &、" 或 '。

或者，如果您可以加载 .xml 而不是 .txt，您可以将新闻附在 CDATA 标记上。

```
<newstext>
<![CDATA[<a target="_blank" href="http://www.google.com/"> www.google.com</a>]]>
</newstext> 
```

# javascript - 在 Nodejs/V8 扩展中通过 Javascript 将 C++ 对象传递给 C++ 函数

> ID：12632016
> 
> 赞同：4
> 
> 时间：2012-09-28T00:33:08.387
> 
> 标签：javascript, c++, node.js, v8, cvv8

我正在尝试包装一个将对象作为输入的 C++ 函数，以便可以通过 Nodejs 访问它。这是一个简单的例子来展示我正在尝试做的事情。

假设在 C++ 中，

```
struct query {
  string m_foo;
  string m_bar;

  query(string foo, string bar)
   :m_foo(foo), m_bar(bar) {}
}

static string ExecuteQuery(query q); // Implemented somewhere 
```

在Javascript（node.js）中我希望能够做到，

```
 var q = new plugin.query("foo", "bar");
 var result = plugin.ExecuteQuery(q); 
```

我发现的所有 nodejs C++ 插件示例都使用简单的数据类型和相当简单的示例。有没有很好的例子或模式来做这样的事情？由于缺乏 v8 文档和制作插件的繁琐/冗长的语法，我自己对此并没有太多的运气。

需要，

*   能够在 Javascript 中创建 C++ 对象
*   能够通过 Javascript 将这些对象传递给需要它们的方法或静态函数

此外，有没有比 v8-juice/cvv8 更好的方法来简化包装 C++ 库的过程，以便可以通过 node.js 访问它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T18:37:08.617

**node-canvas** 在[node-canvas](https://github.com/LearnBoost/node-canvas)中，TJ Holowaychuk 在展示 C++ 中的对象包装示例方面做得很好，以便在 javascript 端传回和使用。

我将在下面提取一个示例与您分享它是如何完成的。

来自[Image.h](https://github.com/LearnBoost/node-canvas/blob/master/src/Image.h)

```
class Image: public node::ObjectWrap { 
```

来自[Image.cc](https://github.com/LearnBoost/node-canvas/blob/master/src/Image.cc)

```
Persistent<FunctionTemplate> Image::constructor;
...
Handle<Value>
Image::New(const Arguments &args) {
  HandleScope scope;
  Image *img = new Image;
  img->data_mode = DATA_IMAGE;
  img->Wrap(args.This());
  return args.This();
} 
```

另一个例子是[Canvas](https://github.com/LearnBoost/node-canvas/blob/master/src/Canvas.h)对象

```
class Canvas: public node::ObjectWrap { 
```

并来自[Canvas.cc](https://github.com/LearnBoost/node-canvas/blob/master/src/Canvas.cc)

```
Handle<Value>
Canvas::New(const Arguments &args) {
  HandleScope scope;
  int width = 0, height = 0;
  canvas_type_t type = CANVAS_TYPE_IMAGE;
  if (args[0]->IsNumber()) width = args[0]->Uint32Value();
  if (args[1]->IsNumber()) height = args[1]->Uint32Value();
  if (args[2]->IsString()) type = !strcmp("pdf", *String::AsciiValue(args[2]))
    ? CANVAS_TYPE_PDF
    : CANVAS_TYPE_IMAGE;
  Canvas *canvas = new Canvas(width, height, type);
  canvas->Wrap(args.This());
  return args.This();
} 
```

一旦需要 node-canvas 模块，它就像任何其他 javascript 对象一样容易访问。

```
fs.readFile(__dirname + '/someFile.jpg', function(err, image_data){
  var Canvas      = require('canvas');  
  var Image       = Canvas.Image;
  var img = new Image;
  img.onload = function() {
    var canvas = new Canvas(img.width,img.height);
    var ctx = canvas.getContext('2d');
    // grab and modify pixel data etc
  }
  img.src = image_data;
} 
```

有关 ObjectWrap 的说明，请参阅[nodejs 插件文档](http://nodejs.org/api/addons.html)。

* * *

## 回答 #2

> 赞同：-8
> 
> 时间：2012-09-28T00:42:20.963

这取决于您使用的浏览器，但其中大多数 C++ 和 JavaScript 之间的互操作是通过 COM 完成的。

# excel - 创建excel公式

> ID：12632022
> 
> 赞同：-1
> 
> 时间：2012-09-28T00:33:30.600
> 
> 标签：excel, excel-formula

我有 2 个工作表。在工作表“星期一”中，我有一列“D”，其中包含名称。例如 NEW、TRIAL、JIM 等。通过 'MONDAY' 的 'H' 列！我有美元金额。

在工作表“总计”中！我希望 B19 仅显示 ('MONDAY'! column 'H') 的总和 IF ('MONDAY'column 'D') 在同一行中具有特定名称，即 'JIM'。

工作表“TOTAL”的名称也通过“A”列作为参考写入，即 A19 具有“JIM”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T00:41:44.553

*在工作表Total*的 B19 中，使用该`SUMIF`功能

```
=SUMIF('MONDAY'!$D:$D,$a19,'MONDAY'!$H:$H) 
```

[在office.microsoft.com](http://office.microsoft.com/en-gb/excel-help/sumif-HP005209292.aspx)上查看该功能的详细信息以了解其工作原理。

# java - 删除单链表保留顺序中的重复项

> ID：12632025
> 
> 赞同：0
> 
> 时间：2012-09-28T00:34:10.513
> 
> 标签：java, list, linked-list, duplicates

所以我有一个单链表的抽象数据类型，我的编译器在运行这部分测试代码时卡住了。

```
 test.removeDuplicates();
    System.out.println("removeDuplicates() has been run, check following output for counts of 3");
    test.print(); 
```

我从给定列表中删除重复项的方法如下

```
public void removeDuplicates() 
{
    if (head == null) return;

    Node iter = head;

    while (iter != null) 
    {
        Node currNode = iter;
        while(currNode  != null && currNode.next != null)
        {
                if(iter.value == currNode.next.value)
                {
                    currNode.next = currNode.next.next;
                    nItem--;
                }
        currNode = currNode.next;
        }
    }
} 
```

我认为这个 while while 循环遍历整个列表并通过使指针跳过值以删除重复值来取出重复值。

显然其中一个while循环没有终止，似乎我的最后一个值没有得到指向null的指针，但我不明白为什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T00:39:48.663

您没有`iter`在外部 while 循环上进行更新，因此它永远不会`null`导致外部循环无限运行。

在外部 while 循环结束之前添加此行

`iter = iter.next`

# node.js - 如何在 2 个应用程序之间共享猫鼬模型？

> ID：12632028
> 
> 赞同：16
> 
> 时间：2012-09-28T00:34:35.723
> 
> 标签：node.js, mongodb, express, mongoose

我有 2 个应用程序，每个应用程序位于不同的文件夹中，它们需要共享相同的模型。

我想将应用程序 A 中的模型文件夹符号链接到应用程序 B 中的模型文件夹。

我遇到的问题是，一旦您在应用程序 A 中调用 mongoose.model('Model', Schema)，它们就会“绑定”到该应用程序的 mongoose/mongodb 连接。

有人对管理此问题的最佳方法有任何提示吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-11T19:17:54.427

您已经通过使用类似这样的操作来分享您的猫鼬实例

```
var mongoose = require('mongoose');
module.exports.mongoose = mongoose;

var user = require('./lib/user'); 
```

现在在“lib/user.js”里面

```
var mongoose = module.parent.mongoose;
var model = mongoose.model('User', new mongoose.Schema({ ... });
module.exports = model; 
```

所以这样做你可以在其他应用程序中要求“lib/user.js”

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-26T14:39:16.237

我最终在这里做的是在 app2 中将 app1 作为子模块（使用 Git）导入。这样，模型可以正常导入并绑定到应用程序的默认`mongoose`连接。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-11-01T12:29:39.367

我共享 Mongoose 模型的方法是将 mongoose 对象作为参数传递给定义模式和创建模型的共享模块。因此具有共享模式/模型的文件如下所示：

```
module.exports = function(mongoose) {

    var packageSchema = new mongoose.Schema({
        title:          { type: String, required: true },
        description:    String
    });

    mongoose.model('Package', packageSchema, 'packages');
}; 
```

然后每个项目都需要它们，如下所示：

```
var mongoose = require('mongoose');
var mongo_url = process.env.MONGO_CONNECTION;
mongoose.Promise = global.Promise;

mongoose.connect(mongo_url, connectOpts);
require('../../../shared/models/packages')(mongoose); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-01-18T09:50:24.323

一种方法是将 Schema 抽象为纯 JavaScript 对象，然后导入该对象以用于在您的应用程序中构建模型。

例如，对于“产品”模式：

**www/app1/ProductConfig.js**

```
const ProductConfig = {
  name: String,
  cost: Number
}
module.exports = ProductConfig; 
```

**www/app1/ProductSchema.js**

```
const mongoose = require('mongoose');
const Schema = mongoose.Schema;
const ProductConfig = require('./ProductConfig');

const Product = new Schema(Product);

module.exports = mongoose.model('Product', Product); 
```

**www/app2/ProductSchema.js**

```
const mongoose = require('mongoose');
const Schema = mongoose.Schema;
const ProductConfig = require('../app1/ProductConfig');

const Product = new Schema(Product);

module.exports = mongoose.model('Product', Product); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T01:19:17.420

```
./shared/models/user.js

./app1/app.js
var user = require('../shared/user.js');

./app2/app.js
var user = require('../shared/user.js'); 
```

我不明白为什么你不能只从共享路径加载模型。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2017-08-07T08:47:43.680

如果您想在其他 NPM 包之间重用您的 Mongoose 包，最好的方法是在顶级应用程序中安装共享包，然后使用它来初始化其他 NPM 包。

你可以使用这个 npm 模块：[https ://www.npmjs.com/package/mongoose-global](https://www.npmjs.com/package/mongoose-global)

# javascript - grunt (minimatch/glob) 文件夹排除

> ID：12632029
> 
> 赞同：74
> 
> 时间：2012-09-28T00:34:41.327
> 
> 标签：javascript, regex, node.js, glob, gruntjs

我有一种情况，我正在尝试使用 grunt 来整理代码库，不包括特定文件夹。

grunt 在后台使用 minimatch（类似于 bsdglob）来匹配文件，但我似乎无法弄清楚如何对文件夹进行 .gitignore 样式的排除。

我想摄取这个：

`ignoreme`

并匹配这些：

```
/folder/path/here/to/something/ok.js
/another/folder/path.js
/test.js 
```

但不匹配这些：

```
/folder/ignoreme/something.js
/folder/path/here/to/ignoreme/metoo/file.js 
```

这将匹配所有内容，包括ignoreme：

```
/**/*.js 
```

所以我想我可以做类似的事情：

```
/**/!(ignoreme)/**/*.js 
```

但这与ignoreme文件夹中的文件匹配。

我习惯了正则表达式，但似乎无法弄清楚如何在这里重复模式或其他东西 - 我也尝试过类似的东西：

```
/(!(ignoreme)|*)*/*.js 
```

希望容器会重复，但这不起作用，它只是无法匹配所有内容。

有什么方法可以将正则表达式传递给 grunt 文件路径，或者让它为我工作？

# 更新：

以下是我目前处理此问题的方式：

```
var pattern = /\/ignoreme\//
var files = grunt.file.expandFiles(arrayOfFilesPassedToMinimatch).filter(function(f){
  return !pattern.test(f)
}) 
```

如果在 minimatch 中可以排除文件夹，我仍然会感兴趣。

* * *

## 回答 #1

> 赞同：148
> 
> 时间：2012-09-28T03:12:57.953

在当前正在开发的 0.4.0a 版本中，该`grunt.file.expand`方法现在支持排除，并且可以说比底层 minimatch 匹配库更简单。这是可能的，因为`grunt.file.expand`接受*多种*模式（而 minimatch 只接受一种）。

从[grunt.file.expand 文档](http://gruntjs.com/api/grunt.file#grunt.file.expand)：

> 此方法接受逗号分隔的通配符模式或通配符模式数组。路径匹配以 ! 开头的模式 将从返回的数组中排除。模式是按顺序处理的，因此包含和排除顺序很重要。

这意味着您可以指定`['/**/*.js', '!**/ignoreme/**']`，而第一个模式会将所有`.js`文件添加到结果集中，而第二个模式将从`/ignoreme/`结果集中删除所有文件。

如果您真的很好奇，请查看[grunt.file.match 单元测试。](https://github.com/cowboy/grunt/blob/8501765fb7addd073754fabf7a0e779a1a54b122/test/grunt/file_test.js#L60-68)

请注意，提供此功能的 grunt 版本尚未正式发布，但如果您有兴趣在项目中使用它，请参阅[我何时能够使用开发中的功能“X”？](https://github.com/gruntjs/grunt/wiki/Frequently-Asked-Questions)常见问题解答条目。

# iphone - 更新 xcode 后，不再构建一个可以运行的旧应用程序，并且它报告此错误，我不知道它是什么。

> ID：12632030
> 
> 赞同：-1
> 
> 时间：2012-09-28T00:34:43.753
> 
> 标签：iphone, objective-c, ios, xcode

ld：文件是通用的（2 个切片）但不包含一个（n）armv7s 切片：/Users/TianLongWang/iOSDeveloper/OpenTok/newhelloworld/OpenTok-iOS-Hello-World/Opentok.framework/Opentok for architecture armv7s clang：错误: 链接器命令失败，退出代码为 1（使用 -v 查看调用）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T01:29:41.133

就在前几天，我在模拟器上多次成功尝试后尝试在 iPad 上运行我的应用程序时，收到了一条非常相似的消息。我发现在构建设置下，我必须将“仅构建活动架构”设置为是。然后我的应用程序将在我的设备上编译。希望这可以帮助。确保在选择构建设置时选择“全部”以显示所有内容。

# iphone - 使用 iOS 发布 PHP

> ID：12632033
> 
> 赞同：1
> 
> 时间：2012-09-28T00:35:18.120
> 
> 标签：iphone, objective-c, ios, xcode, cocoa

我是 iOs 的初学者，我正在尝试将值发布到 php 页面（该页面处理其余代码）。但是，在 Xcode 中，应用程序会因此代码而崩溃（虽然我不确定发生了什么，但不会在日志或控制台中显示任何警告或错误）。

这是代码：

```
NSMutableURLRequest *request =[NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"http://www.mysite.com/post.php"]];
[request setHTTPMethod:@"POST"];

 NSString *post =[[NSString alloc] initWithFormat:@"type=%@",typeofResponse.text];
 [request setHTTPBody:[post dataUsingEncoding:NSUTF8StringEncoding]];

 NSURLResponse *response;
 NSError *err;
 [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&err]; 
```

我正在尝试通过 GET 变量将“typeofResponse.text”发送到 php。然后 php 脚本将其插入到数据库中。然而，“类型”总是以空白告终，并且应用程序在没有日志的情况下在模拟器中崩溃。怎么了？

是的，我知道这是不安全的，我这样做是为了让我的脚湿透 iOS。谢谢！

# objective-c - ARC 和 viewDidUnload

> ID：12632036
> 
> 赞同：3
> 
> 时间：2012-09-28T00:35:34.767
> 
> 标签：objective-c, ios, cocoa-touch

如果我对视图层次结构中的视图有很强的引用，我是否必须在 viewDidUnload 中将其设置为 nil 还是由 ARC 处理？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T14:00:44.310

前面的两个答案中有太多错误信息，我将确切地澄清情况。请注意，这些与 DEPLOYMENT 目标有关，与您是否使用 iOS6 SDK 构建无关）：

*   你不用担心 self.view - UIViewController 管理它

*   顶级对象 - 即不包含在另一个对象中的对象 - 必须是强大的

*   其他对象应该使用弱（当它们被释放时系统 nil 的 ivar 防止崩溃尝试使用已释放的对象）

*   对于 iOS6 之前的设备上的部署，使用 viewDidUnload 来释放顶级对象和您想要的任何其他内容。注意：在此之后不会调用 dealloc - 您收到的下一条消息很可能是 viewDidLoad，当导致消息的内存问题消失并且视图重新出现时）

*   对于 iOS6 及更高版本，不要使用 viewDidUnload（请参阅下面的编辑），如果要释放与视图或其他 UI 对象无关的内存，请使用 didReceiveMemoryWarning。

*   在所有版本中都会调用 dealloc。使用 ARC，您不会调用 super，也不会像过去那样释放内存。

编辑：来自 iOS6 SDK UIViewController 类描述：

> viewDidUnload 当控制器的视图从内存中释放时调用。（在 iOS 6.0 中已弃用。在内存不足的情况下不再清除视图，因此永远不会调用此方法。）

苹果所做的是删除后备存储——缓存的像素。他们发现这消除了大部分消耗的内存，并且 viewDidUnload 实现得很差（他们在 WWDC 2012 上告诉我们这一点）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T00:45:57.063

如果您有一个 ivar`strong`引用了一个对象，那么只要该 ivar 指向它，该对象就会一直存在。

所以是的，您需要将指针设置为，`nil`否则您的强引用将使视图保持活动状态。如果视图是从 nib 加载的，但不是，`rootView`那么建议使用`weak`，这样您就不必担心这个问题。

# syntax - VB6中使用Private关键字声明变量的目的是什么？

> ID：12632038
> 
> 赞同：1
> 
> 时间：2012-09-28T00:36:21.910
> 
> 标签：syntax, vb6

我在一个类中遇到了这个声明。我习惯用 c# 编程，并且是 vb6 的新手。有人可以告诉我这样做的目的是什么。通常我看到 vb6 中的变量是使用 Dim 声明的。

```
Private MapStatus(CAS_LAST, MAX_CAS_SLOT) As MAP_STATUS 
```

其中 MAP_STATUS 是全局声明的枚举变量。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-28T01:09:45.227

这与[变量的范围有关](http://www.vb6.us/tutorials/vb6-variable-scope)。

`private`在模块顶部的方法之外使用，并使该变量可用于模块中的任何方法。`Dim`在方法中使用并且是方法特定的变量。

因此，在您的情况下，大概是私有的，因为程序员希望该变量可用于整个模块，但不能从模块外部访问。

# php - 是否有任何基于 Zend Framework 2 构建的 CMS/CMF？

> ID：12632039
> 
> 赞同：6
> 
> 时间：2012-09-28T00:37:02.167
> 
> 标签：php, content-management-system, zend-framework2

过去我在 Zend Framework 上做过一些工作，现在我必须再做一次，而且由于 Zend Framework 2 有一个新版本，我想知道什么会促进我的新项目。所以我有一些问题，例如：

*   **从 Zend Framework 2 开始会更好吗？**
*   **从基于 Zend 框架的 CMS/CMF 开始会更好吗？**（促进项目启动过程）
*   **如果是这样，基于（或愿意升级到）Zend Framework 2 的 CMS/CMF 是什么？**

PS：在我的研究中，我发现并分类了一些基于 Zend 的 CMS/CMF：

*   著名但相对较旧（可能被遗弃，我不确定）
    *   **TomatoCMS**（我最喜欢这个类别，使用 jQuery）
    *   Digitalus CMS
    *   核心
*   较新（可能仍处于活动状态）
    *   ZF-Boilerplate（目前正在开发 Zend Framework 2 的版本）
    *   **Centurion**（我最喜欢这个类别，使用 jQuery、CRUD 并支持社交识别。我可能有点倾向于它）

最后，我可能会提到我的项目属于 CMS 类别并被认为是中型的。

等待您的意见，特别是如果有人已经使用过 TomatoCMS、Centurion 或 Zend Framework 2。

**更新：**

我知道有一个相关的问题“[基于 Zend Framework 构建的 CMS](https://stackoverflow.com/questions/1925735/cms-built-on-zend-framework) ”，但它并没有回答我所有的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T06:37:06.463

当然，*如果您正在做一个新项目，那么*从 Zend Framework 2.0 开始是值得的，因为最终代码会更干净，并且许多新使用的功能将使您的开发更容易。

据我所知，目前还没有任何已知的 CMS 已迁移到 ZF2 或从零开始构建的 CMS - 毕竟自稳定版本发布以来仅过去了 3 周。

通常将>= 中型应用程序从 ZF1*升级到 ZF2 的成本太大，因为逻辑完全不同。*

虽然一些[测试](http://www.enrise.com/2012/02/zend-framework-2-performance/)表明ZF2的响应速度比ZF1慢4倍，但最终经过一些优化和更新，我相信它会变得更好，所以入手ZF2是一个不错的投资。

# c++ - libtorrent 内置跟踪器

> ID：12632040
> 
> 赞同：2
> 
> 时间：2012-09-28T00:37:05.670
> 
> 标签：c++, http, bittorrent, tracker, libtorrent

libtorrent 是否提供内置跟踪器？我正在查看 API 文档和示例，但在这些行中找不到任何内容。

BitTorando、Snark 等其他库也公开了 Tracker。

任何人都对此有任何想法，或者是否有任何代码可以帮助我用 libtorrent 本身建立一个跟踪器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T05:33:36.167

假设您正在谈论 libtorrent-rasterbar（如在 libtorrent.org 中）；不，它没有配备跟踪器。

我建议看看[OpenTracker](http://erdgeist.org/arts/software/opentracker/)或[utrack](https://github.com/arvidn/utrack)（仅限 udp）。

# c# - 更改 MVC4 中的默认 ValidationSummary 模板

> ID：12632041
> 
> 赞同：3
> 
> 时间：2012-09-28T00:37:06.140
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4

我想更改默认`Html.ValidationSummary()`模板以使其与 twitter bootstrap 一起使用。我在哪里可以找到它？

我发现的唯一线索就是[这个](https://stackoverflow.com/questions/524935/how-to-change-the-template-for-the-validationsummary)。但这无济于事。我需要更改源本身，因为我使用的是客户端验证。我已经检查过`jquery.validate.js`，`jquery.validate.unobtrusive.js`但那里没有 html 代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T11:05:04.493

所以你要么需要在 CSS 中更改它。

检查这个[**链接**](http://www.w3resource.com/twitter-bootstrap/example-alerts-on-error-success-and-information-with-twitter-bootstrap.html)

以这种方式更改行添加`.alert-error`和自动生成的类`.validation-summary-errors`，还添加相关的类。

```
.alert-error, .validation-summary-errors {
  color: #b94a48;
  background-color: #f2dede;
  border-color: #eed3d7;
} 
```

**所以喜欢这种方式来改变css类。**

中自动生成的 css 类`ValidationSummary`。

```
.validation-summary-errors {
    background-color: #D9FFB2;
    border:1px solid #5CBA30;
    width: 400px;
    }
span.validation-summary-errors {
    border-bottom-color: #D9FFB2;
    display:block;
    }
ul.validation-summary-errors {
    margin:0;
    padding:0;
    border-top:none;
    } 
```

# php - 如何更改关联数组元素的值

> ID：12632044
> 
> 赞同：1
> 
> 时间：2012-09-28T00:37:18.900
> 
> 标签：php, arrays

```
$arr = array(
  'some ugly string as key'  => 'value',
  'some ugly string as key2' => 'value2',

); 
```

我知道可以通过以下方式完成：

`$arr['some ugly string as key'] = 'prefix' . $arr['some ugly string as key']`

但是有没有更短的方法来选择第一个元素？因为在我的情况下，密钥字符串很长......

（我只需要在第一个值前面加上一些文本，然后在最后一个值后面加上一些文本）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T00:52:24.640

我会使用[array_keys()](http://php.net/manual/en/function.array-keys.php)将键本身作为数组获取，然后使用 [0] 和 [length-1] 从该数组中选择第一个和最后一个元素。

```
$arr = array(
  'some ugly string as key'  => 'value',
  'some ugly string as key2' => 'value2',
);

$keys = array_keys($arr);

$firstKey = $keys[0];
$lastKey = $keys[sizeof($arr) - 1];

$arr[$firstKey] = "foo " . $arr[$firstKey]; 
$arr[$lastKey] =  $arr[$lastKey] . "bar "; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T00:46:28.190

这是可行的，首先您重置数组，使内部指针位于开头，然后获取当前指针所在的键，然后为该键分配一个新值。

```
$array1 = array('key1' => 'value1', 'key2' => 'value2', 'key3' => 'value3');
reset($array1);
$first = key($array1);
$array1[$first] = "New Value";
echo $array1['key1']; 
```

输出“新价值”

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-28T00:47:25.937

数组函数的组合将在这里为您提供帮助。

> *   **array_shift** - 将一个元素从数组的开头移开
> *   **array_unshift** - 将一个或多个元素添加到数组的开头
> *   **array_pop** - 弹出数组末尾的元素
> *   **array_push** - 将一个或多个元素压入数组末尾

```
$arr = array("overflow", "superuser", "server");

// prepend first element
$first = array_shift($arr);
$first = 'stack'.$first;
array_unshift($arr,$first);

// append last element
$last = array_pop($arr);
$last .= 'fault';
array_push($arr,$last);

print_r($arr); 
```

输出 -

> ```
> Array
> (
>     [0] => stackoverflow
>     [1] => superuser
>     [2] => serverfault
> ) 
> ```

参考 -

*   [`array_shift()`](http://php.net/manual/en/function.array-shift.php)
*   [`array_unshift()`](http://php.net/manual/en/function.array-unshift.php)
*   [`array_pop()`](http://php.net/manual/en/function.array-pop.php)
*   [`array_push()`](http://php.net/manual/en/function.array-push.php)

# php - PHP 面向对象函数 - 传递变量

> ID：12632046
> 
> 赞同：0
> 
> 时间：2012-09-28T00:37:26.067
> 
> 标签：php, oop

我折腾了两种在类中的方法中使用变量的方法。有些方法最多使用 20 个变量。哪个示例最能满足 OOP 编程结构以及原因

```
**Example 1:**

$sampleclass->variable1 = 100;
$sampleclass->variable2 = 200;
$sampleclass->variable3 = 300;

$row = $sampleclass->Method();

--------------------------

class sampleclass {

  public function Method(){
    if ($this->variable1) {
         // do something
    }
     if ($this->variable2) {
         // do something
    }
     if ($this->variable3) {
         // do something
    }

  }
}

============================================

**Example 2:**

$row = $sampleclass->Method(100,200.300);

class sampleclass {

  public function Method($variable1, $variable2, $variable3){

  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T00:41:25.613

第二种方式更符合得墨忒耳法则：

[http://en.wikipedia.org/wiki/Law_of_Demeter](http://en.wikipedia.org/wiki/Law_of_Demeter)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T00:44:36.433

也许您应该考虑为每个变量创建一个方法？也就是说，如果您需要对所有三个值执行不同的操作，您可以封装每个变量赋值。

例如：

```
class sampleclass 
{

  public function doSomethingWithA($value) 
  {
    $this->valueA = $value * 2;
  }

  public function doSomethingWithB($value) 
  {
    $this->valueB = $value * 3;
  }

  public function doSomethingWithC($value) 
  {
    $this->valueC = $value * 2;
  }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T00:50:58.853

如果您希望将这些变量存储在对象中，请为它们设置（私有）数据成员。您还应该定义“getter”或 mutator 函数，或者至少是一个构造函数，它为这些数据成员获取所需的值。这些功能将防止直接设置数据，从而使您有机会强制执行有关数据值的规则，并防止它们被更改为不适当或不一致的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T00:53:34.717

**TL；DR：**两者都不是。

* * *

如果您基于 3 个不同的条件有 3 个不同的执行，那么应该为每个执行单独的方法。生成的 API 应该类似于：

```
$instance->someMethod( 100 );
$instance->differntMethod( 200 );
$instance->thirdMethod( 300 );
$result = $instance->produceResult(); 
```

该对象应该保持状态。您有 3 种不同的方法可以改变该状态。还有一种返回数据的方法。无需`if`声明。

要了解有关该主题的更多信息，我建议您**观看[此](https://vimeo.com/13439458)讲座和[本](https://vimeo.com/12643301)讲座**。

# java - 实施方法

> ID：12632047
> 
> 赞同：0
> 
> 时间：2012-09-28T00:37:28.140
> 
> 标签：java

我对“不实现 ADT（抽象数据类型）的要求感到困惑。实现 push()、pop() 和 isEmpty()。我可以从接口单独实现这些方法，还是在 linkedStack 类中本地创建这些方法？

`

```
public class linkedStack<T>
{
  private int count;  
  private LinearNode<T> top;  
  private T [] stack;

  public void push (T data) {stack[top++] = data;}
  public T pop() {T result = stack[--top]; stack[top] = null;return result;}
  public boolean isEmpty() {return (top == 0);}

  public linkedStack()
  {count = 0;top = null;}

  public String toString ()
  {
    String result = "\n";

    String[][] grid = null;
    for (int row=0; row < grid.length; row++)
    {  for (int column=0; column < grid[row].length; column++)
        result += grid[row][column] + "";      
        result += "\n";
    }

    return result;
  }

  public class LinearNode<T>
  {
    private LinearNode<T> next;
    private T element;

    public LinearNode ()      {next = null;element = null;}
    public LinearNode (T elem){next = null;element = elem;}

  }  
}

` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T00:39:11.160

ADT 就像构建数据结构的蓝图，所以我假设他们不希望您实现所有方法（即实现 ADT），而只实现方法`pop()`，`push()`并且`isEmpty()`

# ruby-on-rails - Rails，种子代码很难写

> ID：12632049
> 
> 赞同：1
> 
> 时间：2012-09-28T00:37:34.720
> 
> 标签：ruby-on-rails, seed

我是使用 db 的新手。我们在服务器上的生产中使用了一个 rails 应用程序。我们继续在本地进行开发。其中一些开发导致向数据库添加内容。为了保持 dbs 同步，我们为本地所做的一切手动编写种子代码，然后我们计划上传种子代码并在服务器上运行 rake 命令。这是这种事情的典型做法吗？有没有一种简单的方法来编写这个种子代码？这似乎既费力又痛苦，我只是浏览数据库以尝试找出最新的更改是什么，然后编写希望将相同数据添加到服务器上的数据库的代码。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T03:09:19.470

我过去也遇到过类似的问题，我们通过迁移来解决这个问题。做类似的事情

```
class AddSomeStuffToMyThing < ActiveRecord::Migration
  def self.up
    widget=MyThing.new()
    widget.attr_1 = "some stuff"
    widget.attr_2 = 341
    ...
  def self.down
    widget = MyThing.find_by_attr_1("some stuff")
    widget.destroy 
```

如果您经常更改数据库中的种子数据，那么也许您应该开始研究像 Mongo 或 CouchDB 这样的无模式解决方案

# c - 算法 CRC-12

> ID：12632051
> 
> 赞同：3
> 
> 时间：2012-09-28T00:37:50.867
> 
> 标签：c, crc

我正在尝试为 12 位 CRC 和算法做 crc_table，但总是得到错误的结果。

你能帮助我吗？要创建 crc 表，我尝试：

```
void crcInit(void)
{
    unsigned short  remainder;
    int    dividend;
    unsigned char  bit;

    for (dividend = 0; dividend < 256; ++dividend)
    {
        remainder = dividend << 4;

        for (bit = 8; bit > 0; --bit)
        {
            if (remainder & 0x800)
            {
                remainder = (remainder << 1) ^ 0x180D; //Polynomio of CRC-12
            }
            else
            {
                remainder = (remainder << 1);
            }
        }
       crcTable[dividend] = remainder;
    }

} 
```

我更新了，CRC算法是：

```
unsigned short crcFast(unsigned char const message[], int nBytes)
{
    unsigned short remainder = 0x0000;
    unsigned char  data;
    int  byte;

    /*
     * Divide the message by the polynomial, a byte at a time.
     */
    for (byte = 0; byte < nBytes; ++byte)
    {
        data = message[byte] ^ (remainder >> 4);
    remainder = crcTable[data] ^ (remainder << 8);
    }

    /*
     * The final remainder is the CRC.
     */
    return (remainder ^ 0);

} 
```

但它不起作用......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T00:48:05.000

这似乎不对：

```
if (remainder & 10000000) 
```

看起来您打算将此数字设为二进制，但实际上是十进制。您应该改用十六进制文字 (0x80)。

这个数字似乎也有问题，而且你所做的移位大小也有问题：这个测试应该检查是否设置了余数的高位。由于您正在执行 12 位 CRC，因此掩码应为 0x800（二进制 100000000000）。上面的转变可能应该是：

```
remainder = dividend << 4; 
```

设置余数的最左边 8 位。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-10T09:12:33.083

Boost 库将具有已经实现的 CRC 校验和算法，它可以与不同的多项式一起用于除法和位数。使用此链接获取更多信息[Boost CRC](http://www.boost.org/doc/libs/1_43_0/libs/crc/crc.html#crc_basic)。

我自己的一个示例实现是：

```
string data = "S95I";
boost::crc_optimal<11, 0x571> crc;
crc.process_bytes(data.data(), data.size());
stringstream checksum;
checksum << (int)crc() % 1296;
string resultCheck = checksum.str(); 
```

要使用 12 位的 CRC，您必须采用位数和使用的多项式，可在此处找到：[Wikipedia CRC polynomials](http://en.wikipedia.org/wiki/Polynomial_representations_of_cyclic_redundancy_checks)

# c# - 为程序集中的现有类定义默认构造函数

> ID：12632053
> 
> 赞同：5
> 
> 时间：2012-09-28T00:37:51.367
> 
> 标签：c#, reflection

有没有办法为给定程序集中的所有类定义默认构造函数。例如，我在程序集中有这样的类 -

```
public class SomeClass
{
    public SomeClass(int x, int y)
    {
    }
} 
```

这些类都需要一个默认构造函数，但我不想用默认构造函数来混淆所有这些类，那么我该如何使用反射或类似的东西来做到这一点？（也许是 TypeBuilder.DefineDefaultConstructor？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T00:42:52.977

> 这些类都需要一个默认构造函数，但我不想用默认构造函数来混淆所有这些类

如果类需要构造函数，则应包含它。就维护而言，其他任何事情都将是一场噩梦。

自动生成构造函数的主要问题是默认构造函数需要了解相关类，因为它需要正确初始化类的值。在您的示例中，您的默认构造函数需要做*一些事情*`x`来设置通常使用and创建的内部状态`y`。如果不了解类，就无法知道该东西应该是什么，因此*应该*定义类。

话虽如此，没有直接的方法可以“将构造函数添加到每种类型”。您可能会使用像[Cecil](http://www.mono-project.com/Cecil)这样的工具来用您的修改重写程序集 - 基本上，加载程序集，检查每种类型，添加新信息，然后重写它。或者，您可以使用某种形式的 AOP 工具，例如[PostSharp](http://www.sharpcrafters.com/)，在编译时基于某些属性或类似属性创建构造函数。

但是，我建议不要使用这些方法。我认为修改代码本身并*在适当的时候*包含构造函数是正确的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T00:43:08.277

您不能在运行时更改已编译的类以添加默认构造函数。

您可以在编译时使用面向方面的编程来完成。查看[PostSharp](http://www.sharpcrafters.com/)。

# c# - this.QueryString(NameValueCollection) 访问 Form1 - 从另一个类

> ID：12632055
> 
> 赞同：1
> 
> 时间：2012-09-28T00:38:54.360
> 
> 标签：c#, class, asp.net-4.0

我制作了一个辅助方法，使用它来修改查询字符串，用于测试和调试

现在唯一的问题是我想在我的 C# 集合助手类中将它作为一个类

该方法现在运行良好，但因为我仍然是“新鲜”的 .net 开发人员

当它位于单独的公共静态或非静态类中时，我无法弄清楚如何使用它 `this.Request.QueryString`来访问当前表单（form1）值`partial class`

这是代码，你可以自由使用它（：

```
public void QsModify(string action, string NewP_Value, string CurQS_ParamName, string         NewQs_paramName=null, bool redirectWithNewQuerySettings=false)
{

#region <<=========== reflect to readonly & set QueriString ReadOnly - false ============>>

// reflect to readonly property 
PropertyInfo isReadOnly = typeof(System.Collections.Specialized.NameValueCollection).GetProperty("IsReadOnly", BindingFlags.Instance | BindingFlags.NonPublic);

// make collection editable 
isReadOnly.SetValue(this.Request.QueryString, false, null);

#endregion
switch (action)
{
    case ModAQs_Remove:
        if (notEmptyQs()) 
        this.Request.QueryString.Remove(CurQS_ParamName);
        break;
    case ModAQs_Replace:
        this.Request.QueryString.Remove(CurQS_ParamName);
        this.Request.QueryString.Add(NewQs_paramName, NewP_Value);
        break;
    case ModAQs_EditValue:
        this.Request.QueryString.Set(CurQS_ParamName, NewP_Value);
        break;

    case ModAQs_Add:
        this.Request.QueryString.Add(NewQs_paramName, NewP_Value);
        break;

}

#region <<=========== joining Full Path & queryString then Redirection  ============>>

string seperator = "?";
UrlPath = Request.Url.AbsolutePath;
UrlPathAndQuery = string.Join(seperator, UrlPath, this.Request.QueryString);
isReadOnly.SetValue(this.Request.QueryString, true, null);

if (redirectWithNewQuerySettings)
{

    Response.Redirect(UrlPathAndQuery);
}
#endregion
} 
```

我如何使它成为一个能够访问我正在处理的任何项目的类，但不知道表单名称是什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T00:45:57.923

您可以使用

```
HttpContext.Current.Request.QueryString["qs_key"]; 
```

您可以在静态或非静态上下文中使用它。

# c# - 不活动期后会话超时

> ID：12632059
> 
> 赞同：0
> 
> 时间：2012-09-28T00:39:20.427
> 
> 标签：c#, asp.net, ajax

我有一个需要登录的应用程序，还有一个 AJAX 计时器。我已经阅读了几篇关于如何在一段时间后创建会话超时的帖子。但是，如果用户在 5 分钟内没有点击某个按钮，我希望会话结束。有没有办法在每次点击后重置计时器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T00:56:24.017

试试这个：

```
function logout() { 
    location.href = '/your/logout/page.aspx';
}

var timeout = setTimeout(300000, logout);
function resetTimeout() {
    clearTimeout(timeout);
    timeout = setTimeout(300000, logout);
}

document.onclick = resetTimeout; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T00:48:18.773

您可以在页面加载时设置一个javascript计时器（使用setTimeout），并且每次回发都会重置（并且可以选择通过不回发的按钮单击），当该计时器倒计时为零时，它将重定向到处理清除会话然后重定向回登录页面的 logout.aspx（例如：window.location='Logout.aspx'）。

# c++ - C++中未定义的结构类型

> ID：12632060
> 
> 赞同：0
> 
> 时间：2012-09-28T00:39:30.247
> 
> 标签：c++, pointers, types, struct

以下是我的 index.h 类

```
class index
{

struct node {
        string item;
        int counter;
        vector<int> pageNumber;
    };

public:
    node* newNode (string word);
    ...

private:
    vector<node*> indexStructure;
    int lineCounter;
    int indexSize;

}; 
```

在我的 index.cpp 类中，我有一个方法定义如下：

```
node* index::newNode (string word)
{
    node* temp = new node();
    temp.item = word;
    temp.counter = 1;
    temp.pageNumber = new vector <int> (10, -1);
    temp.pageNumber[0] = lineCounter / 40;
    return temp;

} 
```

当我编译时，它告诉我“节点没有命名类型”，即使它是在 index.h 的结构中定义的，并且我的私有向量变量可以具有节点 * 类型。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-28T00:41:11.267

`node`是一个嵌套类`index`，因此它`index::node`在全局命名空间中被调用。

请注意，您可以`index::`在函数体中省略 from，因此只需`index::node`在 cpp 文件的签名中说明，因为它位于“全局命名空间”内。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T00:40:57.390

将其更改为`index::node* index::newNode(string word)`. 直到函数名称结束后才确定以您尝试的方式执行此操作所需的范围。

# javascript - 多个 jQuery .ready() - 附加到现有的事件处理程序而不是创建另一个

> ID：12632068
> 
> 赞同：0
> 
> 时间：2012-09-28T00:41:09.633
> 
> 标签：javascript, jquery

假设我有一个链接到两个脚本的 HTML：

```
...
<script type="text/javascript" src="general.js"></script>
<script type="text/javascript" src="[pagename]_specific.js"></script>
... 
```

这两个脚本中的每一个都定义了自己的 jQuery `.ready()`。

**一般.js：**

```
jQuery(function() {
  var foo;
  $('#btn').click(function() {alert(foo())});
} 
```

**home_specific.js：** “[pagename]_specific.js”的示例

```
jQuery(function() {
  foo = function() {alert("hello")};
} 
```

哪里`#btn`是一个按钮元素。

“general.js”是由多个页面共享的脚本，而每个页面都有其专用的“[pagename]_specific.js”，用于定义分配给的函数的`foo`行为方式。

当我点击时，`#btn`我期待看到“hello”对话框，但相反，我进入`Uncaught TypeError: undefined is not a function`了 chrome 开发人员工具。从[这个 SO question](https://stackoverflow.com/questions/12631817/working-with-the-same-variable-across-the-jquery-ready-defined-in-multiple-sc/12631833#comment17033977_12631833)，我明白这是因为两者`.ready()`有两个独立的事件处理程序。

**问题：**有什么方法可以将`.ready()`in "[pagename]_specific.js" 附加到`.ready()`in "general.js" 的事件处理程序中，而不是定义另一个匿名函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T01:29:32.877

您的脚本中实际发生的事情与您的想法不同。

在下面的：

```
jQuery(function() {
  var foo;
  $('#btn').click(function() {alert(foo())});
} 
```

您已经通过在其前面输入 var 创建了 foo 的本地副本。在这种情况下 foo 是未定义的。

在下面的：

```
jQuery(function() {
  foo = function() {alert("hello")};
} 
```

您实际上已经创建了一个全局可访问的函数，称为 foo。但这在调用之前不会执行。但在第一个脚本中，您尝试调用它。但实际发生的是您的脚本尝试使用其自己的本地定义变量 foo，该变量未定义。

以下是我会做的

```
// general.js:
jQuery(function() {
  $('#btn').click(function() { 
    foo(); 
  });
});

// home_specific.js
var foo = function() {
  alert("hello");
}; 
```

好吧，我希望这有帮助！希望你明白发生了什么！

# javascript - jQuery 帮助使用 Fan Feedr API 从 JSON 对象中检索数据

> ID：12632074
> 
> 赞同：0
> 
> 时间：2012-09-28T00:42:00.043
> 
> 标签：javascript, jquery, api

我正在使用 Fan Feedr API，但无法将 JSON 显示为可查看的数据。我能够成功获取内容，但是我似乎在控制台中显示数据或成功显示为 HTML 时遇到问题...

**这是我的jQuery ...**

```
$.ajax({
    url:'http://ffapi.fanfeedr.com/basic/api/teams/3575a829-cae3-574e-a56a-60b6b1b5a7b7/content?api_key=097879879',
    dataType: "jsonp",
    success: function(data){
        console.log('success');
        console.log(data);
    }
}); 
```

**我的 HTML...**

```
<div class="result"></div> 
```

**还有我开始的小提琴...**

[http://jsfiddle.net/krishollenbeck/vKTaZ/1/](http://jsfiddle.net/krishollenbeck/vKTaZ/1/)

我觉得这应该可行，所以我想我缺少一些基本的东西。但我似乎无法发现它。任何帮助深表感谢。提前致谢。

Fan Feedr 链接... [http://developer.fanfeedr.com/](http://developer.fanfeedr.com/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T00:51:18.090

FanFeedr [API（当前）不支持 JSONP](http://developer.fanfeedr.com/Overview)，因此您不能以这种方式发出跨域请求。

# svg - Openlaszlo 是否支持 SVG？

> ID：12632077
> 
> 赞同：1
> 
> 时间：2012-09-28T00:42:24.170
> 
> 标签：openlaszlo是否对, svg, svg, openlaszlo, lzx

我看到了一些通过 Flash 课程完成的示例。但这在 dhtml 环境中不起作用。对于 dhtml 环境，我必须创建一个单独的 iframe 组件或类似的东西，以便浏览器处理它。有没有更好的方法？我还想知道[openlaszlo是否对](/questions/tagged/openlaszlo "显示标记为“openlaszlo”的问题")[svg](/questions/tagged/svg "显示标记为“svg”的问题")有任何内置支持？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T07:00:18.167

OpenLaszlo 中没有对 SVG 的内置支持。但是，如果您使用 3rd 方库创建自定义组件，仍然可以在两个运行时中使用 SVG。

Flash/Flex仅[在编译时支持嵌入 SVG 文件](http://livedocs.adobe.com/flex/3/html/help.html?content=embed_4.html)，而不是在运行时。在 OpenLaszlo 中没有使用该功能的 API。

对于 SWFx，您可以使用[SVG Web](http://code.google.com/p/svgweb/)，这是一个 JavaScript 库，它在许多浏览器上提供 SVG 支持，包括 Internet Explorer、Firefox 和 Safari。使用该库加上原生 SVG 支持，您可以立即定位约 95% 的现有已安装 Web 库。SVG Web 包括一个[基于 ActionScript 的 SVG 渲染器](http://code.google.com/p/svgweb/source/browse/trunk/src/org/svgweb/SVGViewerWeb.as)。通过将该工具的修改版本编译到 OpenLaszlo 的 SWC 中，可以重用该源代码以向 SWF 运行时添加 SVG 支持。

SWF 运行时的另一个选项是[http://labs.zavoo.com/content/flex/DrawSvg/srcview/index.html](http://labs.zavoo.com/content/flex/DrawSvg/srcview/index.html)

现在所有现代浏览器都支持 SVG：[http](http://caniuse.com/svg) ://caniuse.com/svg您可以创建自己的视图，并将 SVG 添加为显示对象的子项。只需确保设置正确的 CSS 样式，以便 SVG 确实缩放到父 DIV 的大小。

Stackoverflow 有一些很好的示例向您展示如何将 SVG 动态添加到 HTML 页面，例如[如何将 SVG 图像动态插入 HTML？](https://stackoverflow.com/questions/7981100/how-do-i-dynamically-insert-an-svg-image-into-html)

# java - Java/JavaFX异常——如何判断故障

> ID：12632078
> 
> 赞同：4
> 
> 时间：2012-09-28T00:42:30.320
> 
> 标签：java, exception, nullpointerexception, javafx-2

所以我遇到了一个异常，我的代码都没有在其中列出。

是否有一种简单（快速、简单）的方法来判断问题是在我的代码中还是（可能不是）可能是 Java 中的错误，在这种情况下是 JavaFX？

我的代码是一个长时间运行的脚本（Lua 脚本）的包装器，它本身（Lua 脚本）也会调用 Bash 脚本，以防该信息有任何用途。

异常似乎很容易重现，通过在脚本的特定部分运行时在屏幕上单击来实现——事实上，我认为当它被 Lua 和 Bash 双重炮击时——事实上。（我有一个线程，一个 Runnable，它从 Lua 脚本读取输出流，并且我通常可以完全控制我的 JavaFX GUI、记录脚本的结果等，当然，一旦发生此异常。）

这是我的例外：

```
Exception in thread "JavaFX Application Thread" java.lang.NullPointerException
        at javafx.scene.Scene$ClickCounter.access$7600(Scene.java:2985)
        at javafx.scene.Scene$ClickGenerator.preProcess(Scene.java:3081)
        at javafx.scene.Scene$ClickGenerator.access$8400(Scene.java:3051)
        at javafx.scene.Scene$MouseHandler.process(Scene.java:3302)
        at javafx.scene.Scene$MouseHandler.process(Scene.java:3164)
        at javafx.scene.Scene$MouseHandler.access$1900(Scene.java:3119)
        at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1559)
        at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2261)
        at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:228)
        at com.sun.glass.ui.View.handleMouseEvent(View.java:528)
        at com.sun.glass.ui.View.notifyMouse(View.java:922)
        at com.sun.glass.ui.gtk.GtkApplication._runLoop(Native Method)
        at com.sun.glass.ui.gtk.GtkApplication$3$1.run(GtkApplication.java:82)
        at java.lang.Thread.run(Thread.java:722) 
```

感谢您提供有关如何在一般情况下执行此操作的任何指示（特别是在这种情况下）！

更新：我想知道的是：我应该调试*我的*代码以确定原因吗？或者它显然是一个 JavaFX 错误？如果是这样，我会将其报告给负责的 Oracle 团队。

# wpf - 如何仅修改 WPF 控件的 Margin 属性的右侧（或左侧、顶部、底部）值？

> ID：12632079
> 
> 赞同：17
> 
> 时间：2012-09-28T00:42:32.850
> 
> 标签：wpf, xaml, mvvm, wpf-controls, mvvm-light

从代码隐藏中很容易做到这一点：

```
var button = new Button();
var margin = button.Margin;
margin.Right = 10;
button.Margin = margin; 
```

但是，在 XAML 中，我仅限于以下内容：

```
<Button Margin="0,0,10,0" /> 
```

问题在于，现在我可能通过将其他边距值（即左、上、下）设置为零来覆盖它们）。

有没有办法让 XAML 像下面这样？

```
<Button MarginRight="10" /> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-28T00:42:32.850

可以使用附加属性。事实上，这正是附加属性的目的：访问父元素属性或为特定元素添加附加功能。

例如，在应用程序的某处定义以下类：

```
using System;
using System.Windows;
using System.Windows.Controls;

namespace YourApp.AttachedProperties
{
    public class MoreProps
    {
        public static readonly DependencyProperty MarginRightProperty = DependencyProperty.RegisterAttached(
            "MarginRight",
            typeof(string),
            typeof(MoreProps),
            new UIPropertyMetadata(OnMarginRightPropertyChanged));

        public static string GetMarginRight(FrameworkElement element)
        {
            return (string)element.GetValue(MarginRightProperty);
        }

        public static void SetMarginRight(FrameworkElement element, string value)
        {
            element.SetValue(MarginRightProperty, value);
        }

        private static void OnMarginRightPropertyChanged(DependencyObject obj, DependencyPropertyChangedEventArgs args)
        {
            var element = obj as FrameworkElement;

            if (element != null)
            {
                int value;
                if (Int32.TryParse((string)args.NewValue, out value))
                {
                    var margin = element.Margin;
                    margin.Right = value;
                    element.Margin = margin;
                }
            }
        }
    }
} 
```

现在，在您的 XAML 中，您所要做的就是声明以下命名空间：

```
xmlns:ap="clr-namespace:YourApp.AttachedProperties" 
```

然后您可以编写 XAML，如下所示：

```
<Button ap:MoreProps.MarginRight="10" /> 
```

* * *

~~或者，您可以避免使用附加属性，而是编写一些稍微冗长的 XAML，例如：~~

~~`<Button>`~~
    ~~`<Button.Margin>`~~
        ~~`<Thickness Right="10" />`~~
    ~~`</Button.Margin>`~~
~~`</Button>`~~

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T11:49:25.510

您可以将 Margin 数据绑定到 MVVM 中的属性（字符串）。在您的 MVVM 中，您只需要跟踪各个属性（上、右、下、右）。

您可以使用转换器，如：[如何仅在 XAML 中设置上边距？](https://stackoverflow.com/questions/1316405/how-to-set-a-top-margin-only-in-xaml)或[仅绑定 WPF 控件的边距属性的一部分](https://stackoverflow.com/questions/6249518/binding-only-part-of-the-margin-property-of-wpf-control)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T04:11:30.040

尽管附加的属性可以工作。我会尝试重构您的代码，这样您就不会在后面的代码中进行 UI 更改。您应该在文件的设计端尽可能多地处理 UI。我尝试尽可能少地使用 xaml 文件的代码隐藏，因为它会导致 MVVM 出现问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T01:26:47.047

这部分你错了：

```
var button = new Button();
button.Margin.Right = 10; 
```

> 错误 CS1612：无法修改“System.Windows.FrameworkElement.Margin”的返回值，因为它不是变量

已经不是有效代码，因为 Margin 返回一个[结构](http://msdn.microsoft.com/en-us/library/system.windows.thickness.aspx)，因此是一个值类型。而且因为它不是从 DependencyObject 派生的，所以很多 DataBinding 技巧也不起作用。

我只是想给出一个适当的解释，否则我会说你的第一个答案几乎是唯一的方法。

# javascript - Timeline JS：如何设置时间线开始日期？

> ID：12632085
> 
> 赞同：1
> 
> 时间：2012-09-28T00:43:32.867
> 
> 标签：javascript, jquery, json, jquery-plugins

我从[这里](http://timeline.verite.co/)开始使用 TimelineJS和 JSON 版本的数据检索。它工作正常，但我无法调整时间线开始的日期。

在文档中，它说要这样设置 JSON 文件：

```
 {
        "timeline":
        {
            "headline":"The Main Timeline Headline Goes here",
            "type":"default",
            "startDate":"1888",
            "text":"<p>Intro body text goes here, some HTML is ok</p>", 
```

我已经复制了这一点，但只是更改了细节，例如：

```
{
    "timeline":
    {
        "headline":"HOT LATIN EVENTS",
        "type":"default",
        "startDate":"2012,09,30",
        "text":"Scroll through a list of Latin Music events>>> ",
        "date": [

             {
                "startDate":"2012,08,24",
                "headline":"PELIGRO Y SU BANDA  - Melbourne",
                "text":"<p><strong>Copacaban International</strong>, 139 Smith Street, Fitzroy, 3065</p>",
                "asset":
                {
                    "media":"http://www.clavecontraclave.com/Peligro%20-%20Melbourne%20klein.jpg",
                    "credit":"",
                    "caption":""
                }
            }, 
```

我也尝试过仅使用一年`startDate`（例如：2011）但没有效果。时间线从下面的第一个事件开始。

有谁知道发生了什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-08T17:46:38.880

我还没有找到直接指定时间线开始日期的方法，但是您可以遍历时间线幻灯片以找到最接近的匹配项，然后使用该幻灯片的索引作为您的 start_at_slide 值。例如：

```
var timeline_dates = data_source.timeline.date;
var start_index = 0;
var target_date = new Date(); //set whatever date you want as your start date
for(x in timeline_dates) {
    var slide_date = new Date( timeline_dates[x].startDate );
    if( slide_date < target_date) start_index++;
} 
```

然后当你实例化你的时间线时，你会像这样使用它：

```
createStoryJS({
    type:       'timeline',
    width:      '800',
    height:     '400',
    source:     data_source,
    embed_id:   'timeline_container',
    start_at_slide: start_index
}); 
```

# scala - scala：方法的返回值并提前结束该方法

> ID：12632096
> 
> 赞同：3
> 
> 时间：2012-09-28T00:44:57.420
> 
> 标签：scala

我刚刚开始使用 Scala，所以请耐心等待。

我正在编写一个基于给定列表中找到的“*”数量返回布尔值的方法。

```
def stars(n: Int, chars: List[Char]): Boolean = {
  var count = 0
  chars.foreach{ letter =>
    if (letter == "*") {
      count += 1
    }
    if (count == n) {
      return true
    }

  }
  false
}                                               //> stars: (n: Int, chars: List[Char])Boolean

stars(5, "******".toList)                       //> res12: Boolean = false 
```

那应该返回true。因为它应该在计数变为 5 时提前结束，它等于`n`.

我究竟做错了什么？

scala 不允许使用`return`语句过早地结束方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T00:53:01.617

在`if (letter == "*")`您将 char 与 string 进行比较时，因此不断变得错误并且您`count += 1`从未被评估过
您必须`if (letter == '*')`改写

实际上，更惯用的代码是：

```
def stars(n: Int, chars: List[Char]): Boolean = {
  n == chars.count(c => c == '*')
} 
```

# java - 在单元测试期间，如何将所有输出记录到控制台而不是日志文件

> ID：12632097
> 
> 赞同：0
> 
> 时间：2012-09-28T00:45:00.793
> 
> 标签：java, apache, junit, logfactory

原标题：如何让 Apache LogFactory 始终返回相同的日志实现？

我有一个项目，它使用了很多不同的记录器来配置去不同的地方。当我运行单元测试时，我想用我自己实例化的 SimpleLogger 覆盖它们。如何将其设置为 LogFactory 以便始终返回以进行单元测试？

我真的不想处理外部配置文件。

作为一点背景知识，我发现记录器是出了名的不可信。确切地说，它并不是真正的记录器，而是有很多方法可以配置它和过滤输出——它可以从各种配置文件或代码中的任何地方完成，然后它可以输出到各种位置。记录器甚至可以根据配置将某种输出（错误）发送到与其他位置不同的位置。

尽管这可能非常棒且功能强大，但是当您花费 6 个小时想知道为什么您的代码在实际被调用时没有被调用但您的输出被重定向时，这一切都被取消了。

在运行测试时，我希望尽可能确保看到所有输出，因此我想将所有日志重定向到控制台。（所有，就像在我当前的项目中一样，可以创建分布在 6 个目录中的几十个不同的日志文件。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T17:04:54.617

我终于想出了一个方法来做到这一点。

您可以使用自己的工厂扩展 LogFactory——覆盖这两个 getInstance 方法以返回您的记录器（显然所有其他方法都可以为空）。我使用 SimpleLogger 将所有日志记录到控制台：

```
公共日志 getInstance(String name) 抛出 LogConfigurationException {
    // 如果这不仅仅是为了测试，我会保留这些记录器的地图...
    SimpleLog consoleLogger=new SimpleLog(name);
    consoleLogger.setLevel(SimpleLog.LOG_LEVEL_ALL);
    返回控制台记录器；
}
公共日志 getInstance(Class className) 抛出 LogConfigurationException {
    返回 getInstance(arg0.getName());
}

```

然后在此类中使用静态方法安装它：

```
公共静态无效初始化（）{
    System.setProperty(LogFactory.FACTORY_PROPERTY, MyLogFactory.class.getName());
}

```

这将整个日志重新路由限制为一个类，如果您在测试开始时调用 initialize()，则会话的所有日志输出都将重新路由到控制台。不要稍后调用它，否则您正在测试的代码可能已经调用了“正常”工厂并缓存了真正的记录器。

# java - 从 XML 文件 java 内部读取特定元素

> ID：12632103
> 
> 赞同：1
> 
> 时间：2012-09-28T00:46:13.167
> 
> 标签：java, android, xml, parsing, dom

我必须阅读如下所示的 android 清单文件，

```
<?xml version="1.0" encoding="utf-8"?>
<manifest android:versionCode="92" android:versionName="1.9.7B92" package="com.rechild.advancedtaskkiller"
  xmlns:android="http://schemas.android.com/apk/res/android">
    <application android:label="@string/app_name" android:icon="@drawable/icon2">
        <activity android:label="@string/app_name" android:name=".AdvancedTaskKiller" android:launchMode="singleTask" android:configChanges="keyboardHidden|orientation">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
            <intent-filter>
                <action android:name="com.rechild.intent.action.ADVANCED_TASK_KILLER_FREE" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity android:name=".NewSettings" />
        <activity android:name=".IgnoreListActivity">
            <intent-filter>
                <action android:name="com.rechild.advancedtaskkiller.intent.action.IgnoreList" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity android:name=".HealthActivity" />
        <activity android:name=".LogActivity" />
        <activity android:name=".HelpActivity" />
        <activity android:name="com.google.ads.AdActivity" android:configChanges="keyboard|keyboardHidden|orientation" />
        <receiver android:name=".AutoStartReceiver">
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED" />
            </intent-filter>
        </receiver>
        <service android:name=".BackService" android:exported="true" />
        <receiver android:label="@string/app_name" android:icon="@drawable/icon2" android:name=".OneClickAppWidgetProvider">
            <intent-filter>
                <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
            </intent-filter>
            <meta-data android:name="android.appwidget.provider" android:resource="@xml/appwidget_provider" />
        </receiver>
        <receiver android:name=".AlarmReceiver" />
    </application>
    <uses-permission android:name="android.permission.RESTART_PACKAGES" />
    <uses-permission android:name="android.permission.KILL_BACKGROUND_PROCESSES" />
    <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />
    <uses-permission android:name="android.permission.READ_LOGS" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-sdk android:minSdkVersion="3" />
    <supports-screens android:anyDensity="true" android:smallScreens="true" android:normalScreens="true" android:largeScreens="true" />
</manifest> 
```

我的目标是读取所有***活动***元素中的**android:name**属性的值。我怎样才能在java中实现呢？

 ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T01:50:48.130

我解决了这个问题，这是我的代码，

```
package mytest;

import java.io.File;
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.NamedNodeMap;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;

/**
 *
 * @author 
 */
public class ManifestParser {

    public static void Parse(String fileName) {

    try 
    {
        File file = new File(fileName);
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = dbf.newDocumentBuilder();
        Document doc = db.parse(file);
        doc.getDocumentElement().normalize();
        System.out.println("Root element " + doc.getDocumentElement().getNodeName());
        NodeList nodeLst = doc.getElementsByTagName("application");
        System.out.println("Information of all activities");

        for (int s = 0; s < nodeLst.getLength(); s++) {

            Node fstNode = nodeLst.item(s);

          if (fstNode.getNodeType() == Node.ELEMENT_NODE) {

            Element fstElmnt = (Element) fstNode;
            NodeList fstNmElmntLst = fstElmnt.getChildNodes();
            int sz=fstNmElmntLst.getLength();

            for(int nodes=0;nodes<sz;nodes++)
            {
                Node tempNode=fstNmElmntLst.item(nodes);
                if (tempNode.getNodeType() == Node.ELEMENT_NODE)
                {
                    Element tmpElmnt = (Element) tempNode;
                    NamedNodeMap nn=tmpElmnt.getAttributes();

                    if(tmpElmnt.getNodeName().equals("activity"))System.out.println("a: "+tmpElmnt.getAttribute("android:name"));
                }
            }

          }

       }
    } catch (Exception e) {
      e.printStackTrace();
    }
   }

} 
```*

# css - Css菜单悬停背景颜色问题

> ID：12632108
> 
> 赞同：0
> 
> 时间：2012-09-27T18:35:18.187
> 
> 标签：css

我对许多人有一个非常简单的问题，但对我来说已经够复杂了。在过去的一个小时里，我试图解决这个问题，但没有成功。我下载了一个 css 菜单，并毫无问题地进行了所有需要的修改，但有一件事我没有运气尝试修复：当将鼠标悬停在“ccc”上时（例如），然后下降到 1示例（这发生在所有其他单元格上）黑色背景不会一直延伸到右侧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T19:09:16.433

好像`padding-right`开`ul.cssmenu ul`了 至少在 OS X 上的 Chrome 中，删除似乎可以修复它而不会产生不必要的副作用。问题也可能更适合 Stack Overflow。

# sql-server - 即使 FK 为 NULL，也从表中获取一行

> ID：12632110
> 
> 赞同：0
> 
> 时间：2012-09-28T00:46:47.347
> 
> 标签：sql-server

我的 SQL DB 中有两个表：

![在此处输入图像描述](../Images/e7026d87d3dda0b24ae254a5bf838b32.png)

我想从 Id_Editeur = Id_Editeur_Editeur 的两个表中的所有记录中选择 Libelle_Collection,Libelle_Editeur 。

我试过这段代码：

```
select Id_Collection, Libelle_Collection,Libelle_Editeur from Collection_,Editeur where Id_Editeur = Id_Editeur_Editeur 
```

**这是我得到的结果：**

1 | yyyyyyy | 参考

但它只显示 Id_Editeur_Editeur = 1 的一行，即使 Id_Editeur_Editeur = NULL，我也想显示所有记录。

**这就是我想要的结果：**

1 | yyyyyyy | 参考

3 | tytutuyutu | *无效的*

4 | 图尤尔 | *无效的*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T01:04:36.163

我认为你需要一个`LEFT JOIN`：

```
select Id_Collection,     
      Libelle_Collection,
      Libelle_Editeur 
from Collection_ c
Left join Editeur e
     On c.Id_Editeur_Editeur = e.Id_Editeur 
```

# javascript - 在 Javascript 和 WYSIWYG 中将内容包装在自定义标签中

> ID：12632111
> 
> 赞同：0
> 
> 时间：2012-09-28T00:46:49.993
> 
> 标签：javascript, html, wysiwyg, html-editor

所以只是一个基本的 HTML 编辑器，用于在我可以选择任何文本/元素的网站中，单击一个按钮，它会将所述选择包装在我的自定义标签中。编辑器的内容还应该将其值存储在后台的文本字段中，以便可以将其提交给服务器。

我需要将一些内容包装在`<description></description>`标签中，因为服务器端的 HTML 解析器只会拉出该内容以显示在搜索结果中。我似乎找不到任何编辑器可以开箱即用地使用这个功能来说话或允许创建一个简单的扩展来为其放置按钮和操作。

此外，任何可以充当文字处理器的编辑器都是一种奖励。我对它们没有太多经验，但是有点烦人的是，当您按 Enter 键时，它只会复制上面的任何标签，这让我只需要放在`</br>`第一行，所以所有换行符都是单行而不是更多的是段落的情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T00:59:57.617

从技术上讲，HTML 中不允许使用自定义标签

[https://stackoverflow.com/a/2802715/315168](https://stackoverflow.com/a/2802715/315168)

在标记文本时，您可能希望使用 HTML5 数据属性、CSS 类以及泛型`<div>`和元素。`<span>`

对于所见即所得：任何 Javscript 所见即所得编辑器都可以进行您自己的自定义。但是，不要期望开箱即用这种功能，因为它是一个非常狭窄的用例。但是为任何编辑器制作这样的功能只是学习编辑器 API 如何做到这一点 - 没有什么能阻止你。所有 WYSIWYG 编辑器都基于 HTML`contentEditable`属性，因此它们在内部几乎相同。

如果您熟悉 TinyMCE，请选择它。如果您想查看其他选项，简单的 Google 搜索会告诉您。

[http://www.queness.com/post/212/10-jquery-and-non-jquery-javascript-rich-text-editors](http://www.queness.com/post/212/10-jquery-and-non-jquery-javascript-rich-text-editors)

# html5-canvas - 检测在 HTML5 中填充了多少 canvas 元素

> ID：12632115
> 
> 赞同：5
> 
> 时间：2012-09-28T00:47:26.170
> 
> 标签：html5-canvas, getimagedata

我刚开始使用 HTML5，我有一个绘图程序，用户可以通过单击鼠标按钮并像笔一样拖动光标来填充画布。我希望能够弄清楚画布的百分比当前是用笔填充的。我怎么能这样做？[这是我当前在 Gist 上的代码](https://gist.github.com/3797327)谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T00:50:58.947

您可以获得`<canvas>`使用 getImageData() 调用的所有原始像素值

[https://developer.mozilla.org/en-US/docs/DOM/CanvasRenderingContext2D#getImageData%28%29](https://developer.mozilla.org/en-US/docs/DOM/CanvasRenderingContext2D#getImageData%28%29)

然后你在 Javascript 循环中遍历这个像素数据并计算所有不是背景颜色的像素。

填充画布的百分比是

```
 completed = filledInPixels / (canvas.width * canvas.height) 
```

请注意，`getImageData()`调用速度非常慢，您可能只想每秒调用一次。

# android - Android- Click 转到可点击的 RelativeLayout 中的 ListView 而不是 RL

> ID：12632119
> 
> 赞同：0
> 
> 时间：2012-09-28T00:48:24.097
> 
> 标签：android, android-layout, android-listview

我的应用程序有几个`RelativeLayout`s，每个都有 a`TextView`和 a `ListView`。我已经使`RelativeLayout`s 可点击（并且效果很好）。问题是，`ListView`嵌入其中的 s 也是可点击的，并且每当用户尝试点击`RelativeLayout`列表中的区域时，点击会注册为列表。

我尝试将`ListView`s 设置为`clickable="false"`和`focusable="false"`. 我试过s `descendantsFocusability="blocksDescendants"`。`RelativeLayout`那些行不通。

解决方案是什么？这是我的第一个应用程序，我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T18:47:13.417

我通过使列表项的 onItemClick 方法模仿其父级 RelativeLayout 的 onClick 方法来解决我的问题。

如果父RelativeLayout 会导致fragmentA，那么它的子列表中的每一项也会导致fragmentA。

这感觉有点半生不熟和便宜，但它现在有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T01:17:27.607

据我所知，如果您尚未将 listView 对象定义为具有 android:onClick 属性 =“”，那么它们不应响应单击事件。但是，将它们设置为 clickable="false" 不会有什么坏处。

在 android 活动中管理 onClick 事件的最简单方法是在布局中定义每个应以这种方式监视点击事件的视图：

```
public void onClick(View v) {
    switch(v.getId()){
          case R.id.ITEM1 :
              //Insert stuff to do when clicked here
          break;
          case R.id.ITEM2 :
              //Insert stuff to do when clicked here
          break;
    }
} 
```

此方法应在具有以编程方式或 XML 布局定义的相关布局和适当视图的活动上实现。如果你不想使用 switch case，你总是可以用 if(v.getId() == R.id.ITEM_TO_CHECK)... 的条件替换 if-else 语句。

干杯，

杰米

# android - AlarmManager 重新启动我的 android 应用程序

> ID：12632120
> 
> 赞同：0
> 
> 时间：2012-09-28T00:48:29.593
> 
> 标签：android, alarmmanager

我想让我的 AlarmManager 以某种方式在应用程序中的主要活动上调用 onCreate。

另外，我正在同一个班级设置活动。这甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T04:02:48.763

AlarmManager 与`PendingIntent`s 一起工作，实习生基于常规`Intent`s。如果您注册一个`Intent`启动您的一项活动的活动，它将被启动并`onCreate`在此过程中被调用。检查您是否使用了正确的标志，并记住在用户做其他事情时突然弹出活动可能不是一个好主意。

# javascript - 如何为嵌套在 ExtJs 表单内的网格分组列标题

> ID：12632121
> 
> 赞同：0
> 
> 时间：2012-09-28T00:48:29.697
> 
> 标签：javascript, extjs, extjs4, extjs4.1, gridpanel

我有一个嵌套在表单面板内的网格面板。网格包含分组标题，但分组标题的子列未正确加载。知道我做错了什么吗？

```
form = Ext.create('Ext.form.Panel', {
    id: 'form-' + index,
    layout: 'column',
    height: 300,
    width: 500,

    items: [{
        xtype: 'container',
        anchor: '100%',
        columnWidth: 0.5,
        items: [{
            xtype: 'textfield',
            fieldLabel: 'Field1',
            name: 'Field1Value',
            anchor: '96%',
            readOnly: true
        }, {
            xtype: 'textfield',
            fieldLabel: 'Field2',
            name: 'Field2Value',
            anchor: '96%',
            readOnly: true
        }]
    }, {
        xtype: 'gridpanel',
        title: 'Grid',
        columnWidth: 0.5,
        store: store,
        columnLines: true,
        columns: [{
            xtype: 'gridcolumn',
            text: 'Column1',
            dataIndex: 'Column1Value'
        }, {
            //xtype: 'gridcolumn',
            text: 'Column2',
            Columns: [{
                xtype: 'gridcolumn',
                text: 'Column2A',
                dataIndex: 'Column2AValue'
            }, {
                xtype: 'gridcolumn',
                text: 'Column2B',
                dataIndex: 'Column2BValue'
            }, {
                xtype: 'gridcolumn',
                text: 'Column2C',
                dataIndex: 'Column2CValue'
            }]
        }, {
            //xtype: 'gridcolumn',
            text: 'Column3',
            Columns: [{
                xtype: 'gridcolumn',
                text: 'Column3A',
                dataIndex: 'Column3AValue'
            }, {
                xtype: 'gridcolumn',
                text: 'Column3B',
                dataIndex: 'Column3BValue'
            }, {
                xtype: 'gridcolumn',
                text: 'Column3C',
                dataIndex: 'Column3CValue'
            }]
        }, {
            xtype: 'gridcolumn',
            text: 'Column4',
            dataIndex: 'Column4Value'
        }, {
            xtype: 'gridcolumn',
            text: 'Column5',
            dataIndex: 'Column5Value'
        }, {
            xtype: 'gridcolumn',
            text: 'Column6',
            dataIndex: 'Column6Value'
        }]
    }]
});
var formpanel = Ext.getCmp('form-' + index);
formpanel.loadRecord(record);
return form; 
```

我注意到第一级列的值显示正确，但分组的标题列没有显示任何值。它也不显示分组标题，仅显示第一级标题“Column2”和“Column3”。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T06:25:18.367

你犯了一个小小的错误；你用驼峰写法`Columns`，所以它被忽略了。写

```
text: 'Column3',
columns: [{  // <- this way it will work 
```

# mysql - MyISAM 索引使用 LOAD DATA INFILE 减慢速度

> ID：12632122
> 
> 赞同：0
> 
> 时间：2012-09-28T00:48:32.643
> 
> 标签：mysql, innodb, myisam

我正在构建一个用于只读的表，这就是为什么我决定使用 MyISAM 而不是 InnoDB（但我愿意接受建议）。但是，此表需要非常大。虽然每行大约 12-14 字节，但表本身将包含数亿到数十亿行。

该表如下所示：

```
CREATE TABLE `tb1` ( `wid` int(11) NOT NULL DEFAULT '0',
`pid` int(11) NOT NULL DEFAULT '0',
`hit` tinyint(3) unsigned NOT NULL DEFAULT '0',
KEY `wid` (`wid`,`hit`,`pid`))
ENGINE=MyISAM DEFAULT CHARSET=latin1 
```

我正在使用`LOAD DATA LOCAL INFILE`块加载文本文件中的所有数据。

加载大约 20M 行需要 30 秒。然后我加载了一个 100M 行的块，10 分钟后，取消查询后，总共只有 38M 行。（10 分钟内 18M 行？...）

看起来这种类型的加载是指数而不是线性的。这是为什么？

当我有一个不断增加的索引时，我可以做些什么来加快 LOAD DATA INFILE？

就 LOAD DATA INFILE 速度而言，使用 InnoDB 代替 MyISAM 有什么好处吗？

加载所有没有索引的数据会更快吗..然后再应用一个？

感谢您的输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T00:57:06.947

赶紧跑：

```
ALTER TABLE `name` DISABLE KEYS;

... do your query ...

ALTER TABLE `name` ENABLE KEYS; 
```

是的，每个插入还需要插入到与表关联的每个索引中。所以索引比较慢。

另请注意，您可以`INSERT DELAYED`在 MyISAM 上使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T01:20:29.167

减速是索引。您可以使用禁用键技巧，这将更快地导入数据，但启用键步骤仍然需要很长时间。你真正想做的是在导入数据时最大化你的 myisam_sort_buffer_size 。您可以分配给它的内存越多，MySQL 需要去磁盘进行排序和更新索引的次数就越少。您仍然可以使用禁用键技巧，并且可以在导入完成后降低该值。

更改 myisam_sort_buffer_size 值的速度会非常快。对我来说，我看到导入需要几个小时，下降到大约 20 分钟。

# html - 内部 div 的边距影响包含 div 的边距

> ID：12632125
> 
> 赞同：21
> 
> 时间：2012-09-28T00:49:25.250
> 
> 标签：html, css

我在包含 div 中有一个内部 div。

# HTML

```
<div id="container">
  <div id="inner"></div>
</div> 
```

# CSS

```
#container {
    width: 100px;
    height: 100px;
    background-color: red;
}
#inner {
    margin: 30px;
    width: 40px;
    height: 40px;
    background-color: black;
} 
```

# 小提琴

[http://jsfiddle.net/8xUTJ/4/](http://jsfiddle.net/8xUTJ/4/)

我希望这会在一个更大的红色盒子中制作一个垂直和水平居中的小黑盒子。取而代之的是，我将一个黑框粘在了红框的顶部，而红框的顶部边缘。

有人能解释一下 CSS 认为它在这里做什么吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-28T00:52:26.373

添加`overflow:auto`到`#container`div。

**[jsFiddle 示例](http://jsfiddle.net/j08691/8xUTJ/6/)**

或者

`#container`为div添加边框。

[您可以在W3C](http://www.w3.org/TR/CSS2/box.html#collapsing-margins)阅读更多关于这种折叠边距行为的信息。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-28T01:07:29.270

虽然提供的解决方案是可行的，但没有人解释这个问题。这被称为边距崩溃，它发生在几种情况下。

场景 1 - 这些项目将仅相隔 30 像素，因为边距折叠在一起并且较大的边距占优势。

```
<div style="margin-bottom: 20px"></div>
<div style="margin-top: 30px"></div> 
```

场景 2 -（您的场景）内框的边距溢出外框。

```
<div class="outer">
    <div style="margin-top: 20px"></div>
</div> 
```

解决方案是给外框一些填充或边框（正如其他人所建议的那样）。很多时候，我在外盒上使用以下 CSS 来缓解这样的情况：

```
.outer {
    margin-top: -1px;
    border-top: 1px solid transparent;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-28T00:51:30.587

**方法一**

`position:absolute`对于内部 div，所以它*知道* **什么**是 30px 边距

[http://jsfiddle.net/8xUTJ/5/](http://jsfiddle.net/8xUTJ/5/)

* * *

**方法二**

`display:inline-block`对于内部 div

[http://jsfiddle.net/8xUTJ/7/](http://jsfiddle.net/8xUTJ/7/)

* * *

**方法三**

`border:solid 0 transparent`到外部 div

[http://jsfiddle.net/8xUTJ/8/](http://jsfiddle.net/8xUTJ/8/)

*随便挑吧：）*

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-28T01:56:54.437

首先，`#container`有`margin-top:0`和`#inner`有`margin-top:30px`。这些元素的关系是父母和第一个孩子的关系。

> 如果没有边框、内边距、内联内容或间隙将块的外边距顶部与其第一个子块的外边距顶部分开，或者没有边框、内边距、内联内容、高度、最小高度或最大值-height 将块的边距底部与其最后一个子块的边距底部分开，然后这些边距折叠。折叠的边距最终在父级之外。

边距折叠意味着*这些边距组合成一个边距，其大小是组合到其中的最大边距*

> 这些规则甚至适用于零边距，因此第一个/最后一个子级的边距最终超出其父级（根据上述规则），无论父级的边距是否为零

这就是为什么你最终在`#container`元素外部应用了 30px 上边距的原因，从你的小提琴：

![30px 和 0 上边距折叠](../Images/a38767c7e41050963c3c20797469530b.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-28T01:22:22.253

检查这个[**小提琴**](http://jsfiddle.net/8xUTJ/9/)

你需要`float`内在`div`才能让它发挥作用

```
#inner {    
    margin:30px;
    float:left;   /* give float */
    width: 40px;
    height: 40px;
    background-color: black;
 }​ 
```

否则将`overflow:auto`属性赋予`div#container`.

检查这个[**小提琴**](http://jsfiddle.net/8xUTJ/10/)

# php - 使用 mysqli solaris 构建 php - ld：致命：符号引用错误

> ID：12632127
> 
> 赞同：1
> 
> 时间：2012-09-28T00:50:02.803
> 
> 标签：php, build, mysqli, solaris

我正在尝试在 Solaris 10 上使用 mysqli 构建 PHP。我遇到了一个愚蠢的问题，它以前可以工作，但现在我收到以下错误。

配置选项：

```
./configure --with-mysql=/usr/local/mysql \
--with-mysqli=/usr/local/mysql/bin/mysql_config \
--with-apxs2=/usr/apache2/bin/apxs --with-gd --with-jpeg-dir=/usr/local \
--with-xpm-dir=/usr/local --with-png-dir=/usr/local --with-openssl \
--enable-zip --with-ldap 
```

配置工作正常，就像以前一样。mysql_config 的路径是有效的，否则会失败。

制作失败并出现以下错误：

```
Undefined                       first referenced
 symbol                             in file
mysql_stmt_param_count              ext/mysqli/.libs/mysqli_api.o
mysql_set_character_set             ext/mysql/.libs/php_mysql.o
mysql_stmt_send_long_data           ext/mysqli/.libs/mysqli_api.o
mysql_stmt_data_seek                ext/mysqli/.libs/mysqli_api.o
mysql_stmt_insert_id                ext/mysqli/.libs/mysqli_api.o
mysql_stmt_store_result             ext/mysqli/.libs/mysqli_api.o
mysql_stmt_reset                    ext/mysqli/.libs/mysqli_api.o
mysql_stmt_close                    ext/mysqli/.libs/mysqli.o
mysql_stmt_fetch                    ext/mysqli/.libs/mysqli_api.o
mysql_stmt_error                    ext/mysqli/.libs/mysqli_api.o
mysql_stmt_errno                    ext/mysqli/.libs/mysqli_api.o
mysql_commit                        ext/mysqli/.libs/mysqli_api.o
mysql_get_server_version            ext/mysqli/.libs/mysqli_api.o
mysql_stmt_attr_set                 ext/mysqli/.libs/mysqli_api.o
mysql_stmt_attr_get                 ext/mysqli/.libs/mysqli_api.o
mysql_next_result                   ext/mysqli/.libs/mysqli_api.o
mysql_stmt_free_result              ext/mysqli/.libs/mysqli_api.o
mysql_stmt_bind_result              ext/mysqli/.libs/mysqli_api.o
mysql_stmt_num_rows                 ext/mysqli/.libs/mysqli_api.o
mysql_warning_count                 ext/mysqli/.libs/mysqli_api.o
mysql_stmt_prepare                  ext/mysqli/.libs/mysqli.o
mysql_rollback                      ext/mysqli/.libs/mysqli_api.o
mysql_stmt_bind_param               ext/mysqli/.libs/mysqli_api.o
mysql_sqlstate                      ext/mysqli/.libs/mysqli_api.o
mysql_stmt_sqlstate                 ext/mysqli/.libs/mysqli_api.o
mysql_get_character_set_info        ext/mysqli/.libs/mysqli_nonapi.o
mysql_more_results                  ext/mysqli/.libs/mysqli_api.o
mysql_stmt_field_count              ext/mysqli/.libs/mysqli_api.o
mysql_stmt_execute                  ext/mysqli/.libs/mysqli_api.o
mysql_stmt_affected_rows            ext/mysqli/.libs/mysqli_api.o
mysql_stmt_result_metadata          ext/mysqli/.libs/mysqli_api.o
mysql_autocommit                    ext/mysqli/.libs/mysqli_api.o
mysql_stmt_init                     ext/mysqli/.libs/mysqli.o
mysql_set_local_infile_handler      ext/mysqli/.libs/mysqli.o
mysql_set_server_option             ext/mysql/.libs/php_mysql.o
ld: fatal: Symbol referencing errors. No output written to sapi/cli/php
collect2: ld returned 1 exit status
*** Error code 1
make: Fatal error: Command failed for target `sapi/cli/php'
# 
```

有什么线索吗？

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-04T10:10:04.397

图书馆秩序不好...

fast&dirty hack：只需在 Makefile 中将“-L/usr/sfw/lib -L/opt/mysql/lib”更改为“-L/opt/mysql/lib -L/usr/sfw/lib”

/opt/mysql/lib - mysql 库的路径。

```
sh> diff -b Makefile Makefile.orig
91,92c91,92
< EXTRA_LDFLAGS = -avoid-version -module -L/usr/ucblib -L/usr/sfw/lib/gcc/i386-pc-solaris2.10/3.4.3 -L/opt/mysql/lib -L/usr/sfw/lib
< EXTRA_LDFLAGS_PROGRAM = -L/usr/ucblib -L/usr/sfw/lib/gcc/i386-pc-solaris2.10/3.4.3 -L/opt/mysql/lib -L/usr/sfw/lib
---
> EXTRA_LDFLAGS = -avoid-version -module -L/usr/ucblib -L/usr/sfw/lib/gcc/i386-pc-solaris2.10/3.4.3 -L/usr/sfw/lib -L/opt/mysql/lib
> EXTRA_LDFLAGS_PROGRAM = -L/usr/ucblib -L/usr/sfw/lib/gcc/i386-pc-solaris2.10/3.4.3 -L/usr/sfw/lib -L/opt/mysql/lib
105c105
< PHP_LDFLAGS = -L/usr/ucblib -L/usr/sfw/lib/gcc/i386-pc-solaris2.10/3.4.3 -L/opt/mysql/lib -L/usr/sfw/lib
---
> PHP_LDFLAGS = -L/usr/ucblib -L/usr/sfw/lib/gcc/i386-pc-solaris2.10/3.4.3 -L/usr/sfw/lib -L/opt/mysql/lib 
```

# php - 如何使用 php 在单击链接时执行数据库查询

> ID：12632128
> 
> 赞同：1
> 
> 时间：2012-09-28T00:50:04.860
> 
> 标签：php, mysql

我有一个包含“产品”的数据库。在网站的前端，我在每个产品旁边都有一个链接，上面写着“移至垃圾箱”。

当有人单击此链接时`<a href="#">more to trash</a>`，我想将 id=2 的特定产品移动到“垃圾”表。如何执行查询，以便将特定产品移动到“垃圾”表宽度产品 ID 和名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T00:55:39.790

通过 POST 传递变量并在该脚本上恢复它（当然是经过消毒的）。就像是：

`my_script.php?item_no=2&action=trash`

真的，在我看来没什么大不了的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T01:09:41.717

您可以使用 ajax 运行执行数据库查询的 php 脚本。

以下是使用 javascript 和 ajax 触发 php 脚本的方法：[当用户单击链接时，如何运行 PHP 代码？](https://stackoverflow.com/questions/1280767/how-do-i-run-php-code-when-a-user-clicks-on-a-link)

# c# - 在 C# 中序列化日期时间对象时删除时区指示符

> ID：12632130
> 
> 赞同：1
> 
> 时间：2012-09-28T00:50:09.467
> 
> 标签：c#, visual-studio-2008, xml-serialization

我有一个由 Visual Studio 2008 中的 XSD 工具自动生成的类；这个类看起来像这样：

```
/// <remarks/>
    [System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "2.0.50727.3038")]
    [System.SerializableAttribute()]
    [System.Diagnostics.DebuggerStepThroughAttribute()]
    [System.ComponentModel.DesignerCategoryAttribute("code")]
    [System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true, Namespace = "http://www.xxx.com")]
    [System.Xml.Serialization.XmlRootAttribute(Namespace = "http://www.xxx.com", IsNullable = false)]
    public partial class Invoice
    {

        private DateTime startDateField;

      // Some other fields goes here.

             /// <remarks/>
        [System.Xml.Serialization.XmlAttributeAttribute()]
        public System.DateTime startDate
        {
            get
            {
                return this. startDateField;
            }
            set
            {
                this. startDateField = value;
            }
        }
   } 
```

当我序列化一个 Invoice 实例时，我得到一个如下所示的 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<Invoice xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.xxx.com http://www.xxx/cfdv22.xsd"  startDate ="2012-09-27T16:41:36-07:00">
… some other elements goes here.
</Invoice> 
```

如果您看到属性 startDate 的值包含末尾的时区。

有没有办法在实现过程中指定一些东西，将日期时间对象转换为它的表示形式，比如 yyyy-MM-ddTHH:mm:ss？或者删除时区的东西？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T00:57:54.430

[根据XML Schema Recomendation](http://www.w3.org/TR/xmlschema-2/#dateTime)，XML 中的“datetime”类型是[ISO8601](http://en.wikipedia.org/wiki/ISO_8601)日期。

如果您不关心时区，那么[“日期”数据类型](http://www.w3.org/TR/xmlschema-2/#date)可能就是您想要的。

# xcode - Xcode 4.5 假代码签名

> ID：12632131
> 
> 赞同：3
> 
> 时间：2012-09-28T00:50:35.720
> 
> 标签：xcode, code-signing

我刚刚将我的系统从 OS 10.7 升级到运行 Xcode 4.5 的 10.8，并且[来自此来源](http://iphonedevwiki.net/index.php/Xcode#Developing_without_Provisioning_Profile)的关于假代码签名的文档似乎没有提到用于 Xcode 4.5 安装的可修改 iPhoneCodeSign.xcspec 文件。

在将我的系统升级到 OS 10.8 之前，我在 OS 10.7 上运行 Xcode 4.3.2，并且我的伪造代码签名工作就像一个魅力。由于升级我的应用程序崩溃，就像没有安装 AppSync。我检查了日志，确实是代码签名问题。

有没有人对 Xcode 4.5 和假代码签名有任何运气？

我正在为 iPhone 开发应用程序，现在事情似乎碰壁*了*。任何有关该主题的信息都将不胜感激，因为如果我能提供帮助，我想避免降级。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T16:44:15.853

如何在 iOS 设备上构建应用程序并运行它，而无需在越狱手机上加入任何开发程序：

1.  在 xCode 中禁用代码签名要求。在这里阅读如何做到这一点：[使用 xcode 4.5 for iOS6 绕过代码签名](https://stackoverflow.com/questions/12456112/bypassing-code-sign-with-xcode-4-5-for-ios6)
2.  构建没有签名的应用程序并使用 ldid 实用程序手动签名。此处提供了一些附加说明：[如何使用 ldid？](https://stackoverflow.com/questions/12768109/how-to-use-ldid)

# debugging - 是否可以从 gdbserver 获取远程可执行文件名称？

> ID：12632133
> 
> 赞同：1
> 
> 时间：2012-09-28T00:50:42.350
> 
> 标签：debugging, gdb, remote-debugging, gdbserver

我正在研究图形 GDB 前端，如果我的本地调试器中没有加载可执行文件，我很好奇是否有办法从远程目标获取完整的可执行文件名称。

我可以使用 CLI 或 MI。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T18:58:07.540

**您可以通过"info lowers"**获得 PID，并通过**"info os processes"**获得类似 ps(1) 的输出。然后，您必须搜索整个进程列表以找到匹配的 PID 并获取其命令行：

```
(gdb) info inferiors 
  Num  Description       Executable        
* 1    process 14382
(gdb) info os processes
pid        user       command    cores      
1          root       /usr/lib/systemd/systemd --system --deserialize 22 1
2          root       [kthreadd] 3          
...... 
```

我查看了 GDB 源代码，“info os 进程”的相关函数是[info_osdata_command()](http://sourceware.org/git/?p=gdb.git;a=blob;f=gdb/osdata.c;h=8776022843b74328bf435225150df1aad3140c86;hb=HEAD#l292)和[get_osdata()](http://sourceware.org/git/?p=gdb.git;a=blob;f=gdb/osdata.c;h=8776022843b74328bf435225150df1aad3140c86;hb=HEAD#l247)。没有内置的方法来过滤 PID。

# php - jQuery AJAX 请求的困境，不起作用

> ID：12632135
> 
> 赞同：0
> 
> 时间：2012-09-28T00:50:55.740
> 
> 标签：php, javascript, jquery, ajax

基本上我试图通过 AJAX 发表评论，然后将新评论加载到 HTML 中。我认为我的 AJAX 成功功能有问题。数据很好地添加到数据库中，但我仍然收到错误“抱歉，意外错误。请稍后再试。” 如在成功函数本身内部设置的那样。

JS：

```
function newComment(event) {        

    event.preventDefault();

    //Get the data from all the fields
    var comment = $('textarea');
    var product_id = $('input[name=product_id]');

    var form_data = {
        comment : comment.val(),
        product_id : product_id.val()
    };

    //Simple validation to make sure user entered something
    if (comment.val()=='') {
        alert('Comment cannot be blank!');
        return false;
    }

    //show the loading sign
    $('#loading').show();

    //start the ajax
    $.ajax({
        //this is the php file that processes the data and send mail
        url: "main/ajax_comment", 

        //GET method is used
        type: "POST",

        //pass the data         
        data: form_data,

        //success
        success: function (c) {              
            //check the status
            if (c.status==1) {           
                $('Posted By: ' + c.username + '<br> Body: ' + c.body + '<br> Posted On: ' + c.date + '<hr>').appendTo('#new_comment');

                $('#loading').hide();

                $('#new_comment').slideDown();

            //0/false (send mail failed)
            } else alert('Sorry, unexpected error. Please try again later.');               
        }
    });
} 
```

PHP：

```
public function ajax_comment()
{
    sleep(4);
        $this->main_model->add_comment($this->session->userdata('user_id'), $this->input->post('product_id'), $this->input->post('comment'));
        $i = $this->auth_model->get_data_id($this->session->userdata('user_id'), 'user');
        $return = array(
            'status' => '1',
            'username' => $i->username,
            'body' => $this->input->post('comment'),
            'date' => time()
            );
        echo json_encode($return);
} 
```

HTML：

```
<form action="<?php echo base_url()."main/comment"; ?>" method="post">
<input type="hidden" name="product_id" value="<?php echo $p->u_product_id; ?>">
<textarea name="new_comment"></textarea><br>
<input type="submit" name="submit_comment" id="submit_comment" value="Post">
<div id="loading" style="display: none;">
    <img src="<?php echo base_url()."assets/img/load.gif"; ?>">
</div> 
```

难道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T01:00:28.240

您似乎正在将 json 发送回成功函数，因此您应该添加一个数据类型：

```
$.ajax({
    //this is the php file that processes the data and send mail
    url: "main/ajax_comment", 

    //GET method is used
    type: "POST",

    //pass the data         
    data: form_data,

    // data type
    dataType: 'json',       /* added */

    //success
    ... 
```

如果这不能解决问题，请检查您的`c`变量包含的内容，可能还会回显一些 php 警告，从而使返回的 json 无效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T01:12:01.793

**可能的问题或解决方案：**

**(1)**不要使用 input type `submit`，而是使用 type`button`并删除表单`action`值，这也是您在请求`method`中指定的原因。`$.ajax`

**(2)**不要忘记在您的请求中包含`dataType`参数，如下所示：`$.ajax`

```
 $.ajax({
        url: "main/ajax_comment", 
        type: "POST",       
        data: form_data,
        dateType: "json",
        success: function (c) { 
  ... 
```

**（3）**`PHP`在你的成功函数中检查返回的数据，`console.log`并检查状态和其他值，如下所示：

```
success: function (c) { 
   console.log(c);
   console.log(c.status);
... 
```

**(4)**确保您的*javascript*和*json* `objects`组合良好。

# android - 在android中显示视频

> ID：12632146
> 
> 赞同：0
> 
> 时间：2012-09-28T00:52:30.323
> 
> 标签：android, video

> **可能重复：**
> [如何从远程 URL 在 Android 模拟器中显示视频？](https://stackoverflow.com/questions/1425502/how-to-display-video-in-the-android-emulator-from-remote-url)

我想在 android 中使用 VideoView 显示/观看视频，我的模拟器只播放视频的声音，但不显示视频本身。你能帮忙吗？这是源代码

视频视图 vv;

```
 vv = (VideoView)findViewById(R.id.videoView);
    vv.setVideoPath("/sdcard/documentariesandyou.mp4");
    MediaController mediaController = new MediaController(this); 
     mediaController.setAnchorView(vv);  
    vv.setMediaController(mediaController); 
    vv.start();

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T01:35:09.123

在模拟器中测试视频播放并不是一个好主意。由于性能问题，您可能会遇到您提到的问题。
请先尝试在设备上进行测试。

# jquery - Javascript 来过滤列上的 html 表？

> ID：12632147
> 
> 赞同：0
> 
> 时间：2012-09-28T00:52:34.187
> 
> 标签：jquery, html-table

我正在尝试根据列值过滤 html 表（垂直类似于 MS Excel 过滤器）。我认为下面的代码会起作用。它失败了，有人可以帮我理解它为什么失败吗？

错误：

> $("tr").each.find 不是函数 [中断此错误]
> 
> $('tr').each.find('td').eq(coli)(function() {

表的标题行应用了差异类，并且正文应用了差异类，如果重要的话......

```
 rowi = this.rowIndex;
        var coli = e.target.cellIndex;
        cellval = $('tr').eq(rowi).find('td').eq(coli).text();

    $("#filterbutton").click(function() {
        var row = new Array();
        $('tr').each.find('td').eq(coli)(function() {
                if ($(this).text() == cellval) {  //  you can add aditional filter criteria... || $(this).text() == 50) {
                    row.push($(this).index());
                }
            });
        $('th,td').each(function() {
            if (($.inArray($(this).index(), row)==-1) && ($(this).index() != '0')){$(this).hide();}
        });
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T00:57:28.980

`$('tr').each`期望一个函数调用每个`tr`：

```
$('tr').each(function() {
    var $cell = $(this).find('td').eq(coli);

    if ($cell.text() == cellval) {
        row.push(this.rowIndex);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T00:58:02.440

`$('tr').each.find('td').eq(coli)(function() {`

应该：

`$('tr td:eq(' + coli +')').each(function() { ...`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T01:30:41.213

您在这里使用了错误的语法.. 而不是

```
$('tr').each.find('td').eq(coli)(function() {
           if ($(this).text() == cellval) { 
              row.push($(this).index());
           }
   }); 
```

// 尝试这个

```
$('tr').each.find('td').eq(coli)(function() {
      var $curr = $(this).find('td:eq('+ coli + ')') ; (OR) $(this).find('td').eq(coli) ; 

      if ($curr.text() == cellval) { 
          row.push($(this).index());
      }
   }); 
```

# php - 是否有内置函数或插件来处理 JavaScript 中的日期格式？

> ID：12632148
> 
> 赞同：1
> 
> 时间：2012-09-28T00:52:39.073
> 
> 标签：php, javascript, datetime, date-formatting

目前我需要以“2012 年 10 月 5 日”类型格式输出日期。表示没有前导零、空格、完整月份名称、逗号、空格、四位数年份的月份日期。我需要在 JavaScript 中执行此操作。我有这个工作，但我在编写冗长的代码时突然想到有人一定已经想出了更好的方法来做到这一点。

我不认为有一个内置的 JavaScript 函数可以完全按照我想要的方式格式化它。PHP 中只有一个东西带有`date()`. 有没有做同样事情的 JavaScript 插件？

为了给出一个具体的例子，在这种情况下，我从需要获取日期的未来几个小时开始。

目前我有：

```
 var myNow = new Date().getTime();
    var myTime = hours * 60 * 60 * 1000;
    var myDate = new Date(myTime + myNow);
    var myDay = myDate.getDate();
    var myMonthNum = myDate.getMonth();
    var myMonth = '';
    var myYear = myDate.getFullYear();

    switch(myMonthNum) {
        case 0:
            myMonth = 'January';
            break;
        ...

    var completeDate = myDate = " " + myMonth + ", " + myYear;
    $('#theEndDate').html(completeDate); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T01:01:20.143

[`Date`不， objects](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)没有内置任何东西，但是有一堆库可以处理和格式化它们：

*   [日期.js](http://www.datejs.com)
*   [时刻.js](http://momentjs.com/)
*   [X日期](http://arshaw.com/xdate/)
*   Mootools 中的[Date](http://mootools.net/docs/more/Native/Date)和[Date.Extras](http://mootools.net/docs/more/Native/Date.Extras)
*   糖[日期](http://sugarjs.com/dates)
*   [道场.date](http://api.dojotoolkit.org/jsdoc/1.3/dojo.date)
*   Mochikit 中[的一些功能](http://www.mochikit.com/doc/html/MochiKit/DateTime.html)
*   [DateFormat](http://jacwright.com/projects/javascript/date_format/)（仅限 PHP 的`date`）
*   php.js 的[日期](http://phpjs.org/functions/date)
*   [YUI](https://yuilibrary.com/yui/docs/datatype/#dates)中的数据类型，尤其是 i18n
*   [date-functions.js](https://gist.github.com/xaprb/8492729)，特别由[JQuery datetimepicker](https://github.com/xdan/datetimepicker)插件使用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T01:36:46.447

您有一些可以清理的无关代码：

```
var months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
    today = new Date(),
    completeDate = today.getDate() + " " + months[today.getMonth()] + ", " + today.getFullYear();

$('#theEndDate').html(completeDate); 
```

使用库并不总是答案，特别是如果你只打算在一个地方使用它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-28T05:15:29.363

有很多日期库，但如果您只想从日期对象生成一种特定格式，那么这很简单：

```
var formatDate = (function() {

  var months = ['January','February','March','April','May','June',
      'July','August','September','October','November','December'];

  return function(date) {
    return date.getDate() + ' ' + months[date.getMonth()] + ', ' + date.getFullYear();
  }
}());

alert(formatDate(new Date())); // 28 September, 2012 
```

我认为那只用了不到 5 分钟。

# json - 将 json 元素更新为 json 对象

> ID：12632151
> 
> 赞同：1
> 
> 时间：2012-09-28T00:53:02.643
> 
> 标签：json, local-storage

我正在尝试将 JSON 对象的元素更新为该 JSON 对象内的对象。

```
var storedObj = $storage("storedObj").get(); 
```

这会返回类似这样的内容

```
storedObj = {
    businessID: 1234,
    businessName: Some Business,
    businessAddress: null
} 
```

我想更新 businessAddress 并在本地重新保存对象。

```
var bizAddress = {
    city: "City Name",
    state: "State Name",
    Zip: "12345"
} 
```

我试过了，但没有用

```
storedObj.businessAddress = bizAddress;

$storage("storedObj").set(storedObj); 
```

理想情况下，这将使用更新的节点恢复整个对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T04:13:10.440

这可能是因为

```
businessName: Some Business,   //   Supposed to be

businessName: 'Some Business',     // Encased in Quotes 
```

[在这里工作](http://jsfiddle.net/sushanth009/SgDkD/)

# java - 当工作区与帐户上的默认设置不同时，使用 Java Rally Rest API 插入测试用例结果失败

> ID：12632156
> 
> 赞同：3
> 
> 时间：2012-09-28T00:53:20.897
> 
> 标签：java, rest, rally

我使用 Java 的 Rally REST API 解决方案在一个工作区中运行良好。当工作空间不同时，请告知插入测试用例结果。我被困在以下情况下，详细描述如下：*

**设置**

*   用户有默认的工作区/项目设置 - XXX/PPP - TC1 存在。
*   用户有权访问另一个工作区/项目设置 - YYY/QQQ - TC1 存在 -**要更新的测试用例。**
*   尝试使用 Rally WS 1.36 和 1.37。
*   尝试过 Rally 1.0 和 1.0.2-jar [以及适用的相关库]

**脚步**

我正在尝试在工作区 YYY 中设置测试用例 TC1 的结果，但似乎没有更新并因以下错误而失败。

```
// Query for Test Case to which we want to add results
QueryRequest testCaseRequest = new QueryRequest("TestCase");
testCaseRequest.setFetch(new Fetch("FormattedID","Name"));
testCaseRequest.setQueryFilter(new QueryFilter("FormattedID", "=", testCaseId));

String workspaceRef = "/workspace/YYY";
String projectRef = "/project/QQQ";

testCaseRequest.setWorkspace(workspaceRef);
testCaseRequest.setProject(projectRef);

QueryResponse testCaseQueryResponse = restApi.query(testCaseRequest);
JsonObject testCaseJsonObject = testCaseQueryResponse.getResults().get(0).getAsJsonObject();
String testCaseRef = testCaseJsonObject.get("_ref").toString();

//Add a Test Case Result                
System.out.println("Creating Test Case Result...");
JsonObject newTestCaseResult = new JsonObject();
newTestCaseResult.addProperty("Verdict", result);
java.util.Date date= new java.util.Date();
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ssZ");
String timestamp = sdf.format(date);

newTestCaseResult.addProperty("Date", timestamp);
newTestCaseResult.addProperty("Notes", "Automated Test Runs");
newTestCaseResult.addProperty("Build", build);
newTestCaseResult.addProperty("Tester", userRef);
newTestCaseResult.addProperty("TestCase", testCaseRef);

CreateRequest createRequest = new CreateRequest("testcaseresult", newTestCaseResult);
CreateResponse createResponse = restApi.create(createRequest); 
```

这在最后一行失败并出现此错误：

```
"{"CreateResult": {"_rallyAPIMajor": "1", "_rallyAPIMinor": "37", "Errors": ["Could not set value for Test Case: Cannot connect object to value, Test Case value is in a different workspace. [object workspace OID=XXX, value workspace OID=YYY"], "Warnings": []}}" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T04:02:59.557

如果您没有指定在哪个工作区中创建 TestCaseResult，它将默认为您的配置文件默认值（在这种情况下，它与关联的 TestCase 的工作区不同）。

如果您在创建之前添加以下代码，它应该会成功：

```
newTestCaseResult.addProperty("Workspace", testCaseJsonObject.get("Workspace").getAsJsonObject().get("_ref").getAsString()); 
```

您还需要在原始查询中获取 Workspace：

```
testCaseRequest.setFetch(new Fetch("FormattedID","Name", "Workspace")); 
```

您会认为 WSAPI 应该能够从链接的 TestCase 推断出正确的工作区，但是这是所有对象类型的创建过程中的常见行为。

# php - jQuery 验证、提交处理程序和提交表单

> ID：12632160
> 
> 赞同：0
> 
> 时间：2012-09-28T00:54:20.833
> 
> 标签：php, jquery, ajax, jquery-validate, .post

我在执行以下代码时遇到了一些问题。

1.  代码提交了，但什么也没做，又回到了同一个屏幕，好像表单的值还没有提交。

    ```
    <script type="text/javascript">
    $(document).ready(function(){
        $("#signin_form").validate({
              debug: false,
              rules: {
               ///
               },
               messages: {
               ///
               },
              submitHandler: function(form) { 
                  var result;

            $.post('test.php', $('#signin_form').serialize(),    function(data){
                result = $.parseJSON(data);

                if (result.flag == 'false'){
                    $('#results').show()
                }
            })
            .success(function(data){
                if (result.flag == 'true'){
                    form.submit();
                }

            }, 'json');

           }
       });
    });
    </script> 
    ```

2.  如果我将代码更改为以下代码，它可以工作并且将我带到正确的屏幕，但我需要验证验证码，我不确定它是否是正确的地方，我尝试使用 beforeSubmit 但是那么验证码不会被验证。

    ```
    <script type="text/javascript">
    $(document).ready(function(){
        $("#signin_form").validate({
              debug: false,
              rules: {
               ///
               },
               messages: {
               ///
               },
              submitHandler: function(form) { 
                  form.submit();

           }
       });
    });
    </script> 
    ```

有一些关于 $.post 我不理解的东西......并且不提交信息。

有谁知道它可能是什么？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T01:29:21.377

您不需要更改`form`提交方式，在这种情况下，为了验证验证码，请`remote`使用`jquery.validate`.

`remote`使用`jquery.validate`. _ 检查您是否执行了以下操作：

**1)**确保您只使用*jQuery* **1.6.1**及更高版本。

**2)**使用“同步”选项进行远程执行（默认为异步）并将此设置`async`参数设置为 false。

* * *

## 使用示例：

假设这是我的表格...

***HTML：***

将`id`和`name`属性添加到所有表单元素或只是验证码*（这个必须同时具有）。*

```
<form id="signin_form" action="save.php" method="POST">
  Enter captcha: O1S2C3A4R
  <br/>
  <input type="text" id="captcha" name="captcha" value=""/>
  <input type="submit" id="save" name="save" value="Save"/>
</form> 
```

***jQuery：***

添加`type`,`async`和`data`参数。最后一个参数将验证码值传递给**check.php**文件，这就是该元素需要该`id`属性的原因。然后你就可以使用这个选择器了`$('#captcha')`。

*（对我来说这更好，但您也可以使用其他选择器类型按名称调用元素）*

要知道，您还需要为 定义错误消息`remote`，在这种情况下，我使用了*Invalid captcha*。

```
$(document).ready(function(){

    $("#signin_form").validate({
        rules: {
            captcha: {
                required: true,
                remote: { 
                    url:"check.php",
                    type:"post",
                    async:false,
                    data: {
                        /* this is the name of the post parameter that PHP will use: $_POST['captcha'] */
                        captcha: function() {
                            return $.trim($("#captcha").val());
                        }
                    }
                }
            }
        },
        messages: {
            captcha: {
                required: "*",
                remote: "Invalid captcha"
            }
        }
    });

}); 
```

***PHP：检查.php***

此时，重要的是使用`"true"`或`"false"`作为***字符串***来让`jquery.validation`插件知道验证码是否有效。在这种情况下，如果验证码等于***O1S2C3A4R***则有效，并且在客户端，您会看到`submit`将处理html属性中指定的`form`to文件。`save.php``form` `action`

```
<?php

    $captcha = $_POST['captcha'];

    if($captcha == "O1S2C3A4R"){
        echo "true";
    } else {
        echo "false";
    }

?> 
```

* * *

这样做，您可以`form`毫无问题地验证整体，还可以在不更改插件功能的情况下远程检查验证码值。

您也可以一起测试所有这些代码并查看它是否有效:-)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T03:43:25.493

Javascript：

```
<script type="text/javascript">
    $(document).ready(function(){
        $("#signin_form").validate({
            rules: {
                captcha: {
                    remote: {
                        url: "remote.php"
                        }
                    }
                }
            },
            messages: {
                captcha: {
                    remote: "Please enter the text in the captcha."
                }
            }
        });
    });
</script> 
```

HTML 表单：

```
<form id="signin_form">
    <input type="text" name="captcha">
    <input type="submit">
</form> 
```

PHP：

```
$response = $_GET['captcha']; 
$answer  = 'captcha_answer';

if($response==$answer){
    echo 'true'; 
} else {
    echo 'false'; 
} 
```

很抱歉将这部分内容推到答案中——我不允许发表评论：

请记住，将 'async' 参数设置为 false 将锁定您的页面，直到您收到响应，这可能不是您想要的。如果验证库正在等待远程验证的响应，它应该阻止正常的表单提交，至少在较新的版本中（我使用的是 jQuery 1.7.2 和 Validation 1.10.0）。

IIRC jQuery Validate 库会将除确切字符串“true”之外的任何内容视为错误。这可用于根据拒绝原因传递不同的自定义消息。json_encode 添加了额外的引号，导致 jQuery Validate 将其视为自定义错误消息。

# ruby-on-rails - Rails 中的嵌套资源没有路由错误

> ID：12632162
> 
> 赞同：0
> 
> 时间：2012-09-28T00:54:28.350
> 
> 标签：ruby-on-rails

嗨，这是我第一次使用嵌套资源。我确实`rake routes`找到了指向 new_user_album_path 的路径，但它似乎不起作用。问题可能是因为我做了双窝吗？

问题出在我单击用户视图文件中名为 show.html.erb 的链接时。尝试链接到“创建相册”页面，但此时它向我显示错误：

`No route matches {:action=>"new", :controller=>"albums"}`

这是我的文件：

显示.html.erb

```
<% provide(:title, "Welcome, #{@user.name}!") %>

<div>
    You currently have <%= pluralize(@user.albums.count, "album") %>
</div>

<div>
    <%= link_to "Create a new album!", new_user_album_path %>
</div>

<div>
<% if @user.albums.any? %>
hey
<% else %>
boo
<% end %>

</div>

<%= link_to "Back", users_path %> 
```

配置/路由

```
Pholder::Application.routes.draw do
resources :users do
  resources :albums do
    resources :pictures
  end
end 
```

控制器

```
class AlbumsController < ApplicationController
  def index
    @albums = Albums.all

    respond_to do |format|
      format.html
      format.json { render json: @albums }
    end
  end

  def new
    @user = User.find(params[:user_id])
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T00:56:51.420

您需要将用户传递给路由方法，例如：

```
new_user_album_path(@user) 
```

# asp.net - EntityFramework 与数据库外键一起使用

> ID：12632164
> 
> 赞同：1
> 
> 时间：2012-09-28T00:54:46.200
> 
> 标签：asp.net, vb.net, entity-framework

实际上我花了一整天的时间在外键的 EntityFramework 上。假设我们有两个表。Process(app_id,process_id) LookupProcessId(process_id, process_description)

你可以理解两个表的名字，第一个表，使用 process_id 表示每个应用程序，描述在 seoncd 表中。实际上我尝试了很多次并弄清楚如何进行查询：就像

```
Dim result = (from x in db.Processes where x.LookupProcess is (from m in db.LookupProcessIds where descr = "example" select m).FirstOrDefault() select x).FirstOrDefault() 
```

首先我想问有没有更简单的方法来做到这一点。

第二个我想问的问题是关于插入

```
 p As New AmpApplication.CUEngData.Process
    p.app_id=100
    p.LookupProcess = (from m in db.LookupProcessIds where descr = "example" select m).FirstOrDefault()
 db.AddToProcesses(p)
 db.SaveChanges() 
```

从外观上看，它看起来不错，但它给我的错误是“AmpCUEngEntities.Processes”中的实体参与“FK_Process_LookupProcess”关系。找到 0 个相关的“LookupProcess”。1 'LookupProcess' 是预期的。

我能问一下那个插入错误吗？那我的查询是否正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T10:36:18.270

对于您的第一个问题，扩展@jeroenh 的建议：

```
Dim result = (from x in db.Processes.Include("LookupProcess")  
    where x.LookupProcess.descr = "example"  
    select x).FirstOrDefault() 
```

添加该`Include`语句将使实体水合，`LookupProcess`以便您可以查询它们。没有`Include`,`x.LookupProcess`将是 null 这可能会解释为什么你得到了你所做的错误。

如果使用文字字符串作为参数`Include`不理想，请参阅[从 DbSet 3 表返回而没有错误“无法从查询中推断”](https://stackoverflow.com/questions/12886510/returning-from-a-dbset-3-tables-without-the-error-cannot-be-inferred-from-the-q)，以获取使用嵌套实体执行此操作的示例。

对于你的第二个问题，这条线

```
p.LookupProcess = (from m in db.LookupProcessIds
    where descr = "example" select m).FirstOrDefault() 
```

`LookupProcessId`以后可能会给您带来问题，因为如果没有`process_description`“示例”，您将获得`null`. 来自[MSDN](http://msdn.microsoft.com/en-us/library/bb340482.aspx)：

> 引用类型和可空类型的默认值为空。

正因为如此，`p.LookupProcess`插入实体时如果为空，就会出现异常：

> “AmpCUEngEntities.Processes”中的实体参与“FK_Process_LookupProcess”关系。找到 0 个相关的“LookupProcess”。1 'LookupProcess' 是预期的。

为了避免这种问题，您需要`p.LookupProcess`在它进入数据库之前检查它是否为空。

```
If Not p.LookupProcess Is Nothing Then 
    db.AddToProcesses(p)        
    db.SaveChanges()        
End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T14:11:13.037

实际上，您错过了 DataEntityModel 及其框架中的一些概念。要操作数据，您必须从上下文的角度调用对象。这些允许您向 ObjectStateManager 指定 DataObject 的状态。在您的情况下，如果您有来自 FK 的依赖数据，则必须添加/更新从叶子到根的任何链接数据。

这个例子演示了简单（无依赖）的数据操作。选择（如果存在）和插入或更新。

如果您想了解有关 ObjectStateManager 操作的更多信息，请访问[http://msdn.microsoft.com/en-us/library/bb156104.aspx](http://msdn.microsoft.com/en-us/library/bb156104.aspx)

```
 Dim context As New Processing_context 'deseign your context (this one is linked to a DB)

    Dim pro = (From r In context.PROCESS
                    Where r.LOOKUPPROCESS.descr = LookupProcess.descr
                    Select r).FirstOrDefault()

    If pro Is Nothing Then 'add a new one
        pro = New context.PROCESS With {.AP_ID = "id", .PROCESS_ID = "p_id"}

        context.PROCESS.Attach(pro)
        context.ObjectStateManager.ChangeObjectState(pro, System.Data.EntityState.Added)
    Else
        'update data attibutes
        pro.AP_ID = "id"
        pro.PROCESS_ID = "p_id"

        context.ObjectStateManager.ChangeObjectState(pro, System.Data.EntityState.Modified)
        'context.PROCESS.Attach(pro)
    End If

    context.SaveChanges() 
```

我希望这将有所帮助。祝你今天过得愉快！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T06:02:07.917

对于你的第一个问题：

```
 Dim result = (from x in db.Processes 
               where x.LookupProcess.descr = "example" 
               select x).FirstOrDefault() 
```

# javascript - 函数中的点击事件

> ID：12632166
> 
> 赞同：0
> 
> 时间：2012-09-28T00:55:20.033
> 
> 标签：javascript, jquery, event-handling

**编辑**

我的代码现在位于文档的末尾，并且可以正常工作。谢谢帮助。

**问题**

我想调用一个点击功能......但是当我点击我的链接时，网站会重新加载。

这是我的代码：

```
(function(window, undefined) {
var gn = (function(){

var sitelength   = $(window).width(),
    $next        = $('.next'),
    $start       = $('.start'),

    init = function(){
      _scrollto();
      _checkmenu();
    },

    _scrollto = function(){
      $next.on( 'click', function( event ) {
        $('html,body').animate({scrollLeft: $("body").offset().left+200},1500);
        return false;
      });

      $start.on( 'click', function( event ) {
        $('html,body').animate({scrollLeft: $("body").offset().left+0},1500);
        return false;
      });
    },

    _checkmenu = function(){
      $(window).scroll(function(e){
        if($(this).scrollLeft()>100 && (!$('#side').hasClass('ac'))){
          $('#side').addClass('ac');
          $('#side').animate({ left : -230 }, 'slow');
          $('#sitenav').animate({ left : 0 }, 'slow');
        }

        if($(this).scrollLeft()<100 && $('#side').hasClass('ac')){
          $('#side').removeClass('ac');
          $('#side').animate({ left : 20 }, 'slow');
          $('#sitenav').animate({ left : -50 }, 'slow');
        }
      });
    }

return { init : init };
})();
gn.init();
})(window); 
```

但是当我在“$（document）.ready（function（））”中排除整个点击时它工作正常。

```
$(document).ready(function(){
var $next        = $('.next'),
$start       = $('.start');

      $next.on( 'click', function( event ) {
        $('html,body').animate({scrollLeft: $("body").offset().left+200},1500);
        return false;
      });

      $start.on( 'click', function( event ) {
        $('html,body').animate({scrollLeft: $("body").offset().left+0},1500);
        return false;
      });
}); 
```

有人可以告诉我为什么以及如何解决它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T01:01:08.880

该`$.ready()`函数在 DOM “就绪”之前不会执行，这意味着浏览器有时间下载并解析页面的其余部分。

假设您的代码在`<head>`标记中，在您的第一个示例中，代码将在浏览器遇到它时立即执行。浏览器尝试将 click 事件绑定到 $('.next')，但尚未创建元素，因此该事件永远不会被绑定。

像这样包装代码`$.ready()`是非常好的做法，因此您的第二个示例是一个更好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T00:59:13.623

当您不将代码包装在 中`$(function () {...});`时，DOM 尚未完全加载，当您的代码被执行时，因此`$('.next')`实际上`$('.start')`并不适用于任何元素。

发生这种情况是因为今天的 JS 引擎是如此快速和优化，以至于它们可以在浏览器完全加载页面之前执行你的整个脚本。

# java - 如何使用 Java 中的辅助数组从列表中删除重复项？

> ID：12632167
> 
> 赞同：4
> 
> 时间：2012-09-28T00:55:32.250
> 
> 标签：java, arrays, duplicates, counter

我试图通过创建一个临时数组来从列表中删除重复项，该数组存储重复项所在位置的索引，然后将原始数组复制到另一个临时数组中，同时将索引与我存储在我的第一个临时数组中的索引进行比较.

```
public void removeDuplicates()
{
    double tempa [] = new double [items.length];
    int counter = 0;
    for ( int i = 0; i< numItems ; i++)
    {
        for(int j = i + 1; j < numItems; j++)
        {
            if(items[i] ==items[j])
            {
                tempa[counter] = j;
                counter++;

            }
        }
    }

    double tempb [] = new double [ items.length];
    int counter2 = 0;
    int j =0;
    for(int i = 0; i < numItems; i++)
    {
        if(i != tempa[j])
        {
            tempb[counter2] = items[i];
            counter2++;

        }
        else
        {
            j++;

        }
    }

    items = tempb;
    numItems = counter2;
} 
```

虽然逻辑似乎正确，但我的编译器在给我一个 arrayindexoutofbounds 错误

```
tempa[counter] = j; 
```

我不明白计数器如何增长到超过 items.length 的值，逻辑缺陷在哪里？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-28T01:05:20.380

你让自己的事情变得非常困难。让 Java 为您完成繁重的工作。例如 LinkedHashSet 为您提供唯一性并保留插入顺序。它也比将每个值与其他值进行比较更有效。

```
double [] input = {1,2,3,3,4,4};
Set<Double> tmp = new LinkedHashSet<Double>();
for (Double each : input) {
    tmp.add(each);
}
double [] output = new double[tmp.size()];
int i = 0;
for (Double each : tmp) {
    output[i++] = each;
}
System.out.println(Arrays.toString(output)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-23T04:01:28.757

为 int 数组完成，但很容易转换为 double。

1）如果**您不关心**初始数组元素顺序：

```
private static int[] withoutDuplicates(int[] a) {
    Arrays.sort(a);
    int hi = a.length - 1;
    int[] result = new int[a.length];
    int j = 0;
    for (int i = 0; i < hi; i++) {
        if (a[i] == a[i+1]) {
            continue;
        }
        result[j] = a[i];
        j++;            
    }
    result[j++] = a[hi];
    return Arrays.copyOf(result, j);
} 
```

2）如果您关心初始数组元素顺序：

```
private static int[] withoutDuplicates2(int[] a) {
    HashSet<Integer> keys = new HashSet<Integer>();
    int[] result = new int[a.length];
    int j = 0;
    for (int i = 0 ; i < a.length; i++) {
        if (keys.add(a[i])) {
            result[j] = a[i];
            j++;
        }
    }
    return Arrays.copyOf(result, j);
} 
```

3）如果**您不关心**初始数组元素的顺序：

```
private static Object[] withoutDuplicates3(int[] a) {
    HashSet<Integer> keys = new HashSet<Integer>();
    for (int value : a) {
        keys.add(value);
    }
    return keys.toArray();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-28T20:55:22.437

```
import java.util.HashSet;

import sun.security.util.Length;

public class arrayduplication {
public static void main(String[] args) {
        int arr[]={1,5,1,2,5,2,10};
        TreeSet< Integer>set=new TreeSet<Integer>();
        for(int i=0;i<arr.length;i++){
            set.add(Integer.valueOf(arr[i]));
        }
        System.out.println(set);

    }

} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-28T01:03:13.047

想象一下这是您的输入数据：

```
Index: 0, 1, 2, 3, 4, 5, 6, 7, 8
Value: 1, 2, 3, 3, 3, 3, 3, 3, 3 
```

然后根据您的算法，`tempa`需要：

```
Index: 0, 1, 2, 3, 4, 5, 6, 7, 8, ....Exception!!!
Value: 3, 4, 5, 6, 7, 8, 4, 5, 6, 7, 8, 5, 6, 7, 8, 6, 7, 8, 7, 8, 8 
```

为什么你有这个问题？因为第一组嵌套的 for 循环不会阻止您尝试插入重复数组索引的副本！

什么是最好的解决方案？

**使用一套！** 集合保证其中没有重复的条目。如果您创建一个新 Set，然后将所有数组项添加到其中，则 Set 将修剪重复项。然后只需从 Set 回到数组即可。

或者，这是一种非常 C 的方式来做同样的事情：

```
//duplicates will be a truth table indicating which indices are duplicates.
//initially all values are set to false
boolean duplicates[] = new boolean[items.length];
for ( int i = 0; i< numItems ; i++) {
    if (!duplicates[i]) { //if i is not a known duplicate
        for(int j = i + 1; j < numItems; j++) {
            if(items[i] ==items[j]) {
                duplicates[j] = true; //mark j as a known duplicate
            }
        }
    }
} 
```

我把它留给你弄清楚如何完成。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T04:28:35.647

您可以使用一组来删除多个。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-28T03:42:02.233

这是不使用集合的另一种选择，仅使用原始类型：

```
public static double [] removeDuplicates(double arr[]) {
    double [] tempa = new double[arr.length];
    int uniqueCount = 0;
    for (int i=0;i<arr.length;i++) {
        boolean unique = true;
        for (int j=0;j<uniqueCount && unique;j++) {
            if (arr[i] == tempa[j]) {
                unique = false;
            }
        }
        if (unique) {
            tempa[uniqueCount++] = arr[i];
        }
    }

    return Arrays.copyOf(tempa,  uniqueCount);
} 
```

在获得实际结果的过程中，它确实需要一个临时的双对象数组。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-28T01:02:27.023

你已经习惯`num_items`了你的循环。使用该变量也可以为 tempa 设置数组大小。

```
double tempa [] = new double [num_items]; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-28T01:05:43.870

您可以简单地使用`java.util.Set`.

这里有一个例子：

```
public static void main(String[] args)
{
    Double[] values = new Double[]{ 1.0, 2.0, 2.0, 2.0, 3.0, 10.0, 10.0 };
    Set<Double> singleValues = new HashSet<Double>();

    for (Double value : values)
    {
        singleValues.add(value);
    }
    System.out.println("singleValues: "+singleValues);
    // now convert it into double array
    Double[] dValues = singleValues.toArray(new Double[]{});
} 
```

# java - 使用 Ant 从相同的代码库构建 Swing 和 Android 应用程序

> ID：12632169
> 
> 赞同：1
> 
> 时间：2012-09-28T00:55:47.957
> 
> 标签：java, android, swing, ant

根据[我之前关于programmers.SE 的问题的](https://softwareengineering.stackexchange.com/questions/164529/code-bases-for-desktop-and-mobile-versions-of-the-same-app)建议，我将当前项目拆分为三个子目录（swing、common 和android），并在每个子目录中创建了单独的Ant 脚本。现在，我轻松地在 swing 和 common 中创建了 NetBeans 项目，并且能够设置适当的依赖项来编译 Swing 应用程序。然后，当我使用“common”项目中的类时，我意识到我需要另一个用于 Android 构建过程的 Ant 脚本。

所以现在我有四个 Ant 脚本用于构建项目的不同部分，以及每个项目的单独 src、test 和其他支持目录。我遇到的第一个问题是，NetBeans 和我的“android”项目的 ant 脚本都想在我的“common”项目中使用“build.xml”来执行各种构建任务，其中一些任务有名称冲突。我决定要将所有这些项目合并到一个包含 src、test 等子目录的目录中。源代码已经为每个项目组织到单独的包中，我认为这会使其更简单，因为我可以拥有一个单独的 Ant 构建脚本，其中包含用于 Swing 和 Android 构建的单独 traget。

现在我遇到的问题是，当我尝试构建“android”项目时，它也想构建所有 Swing 类。这会带来很多编译器错误。我什至修改了`<javac>`任务，试图`bbct.swing`从编译中排除包层次结构：

```
 <javac encoding="${java.encoding}"
                source="${java.source}" target="${java.target}"
                debug="true" extdirs="" includeantruntime="false"
                destdir="${out.classes.absolute.dir}"
                bootclasspathref="project.target.class.path"
                verbose="${verbose}"
                classpathref="project.javac.classpath"
                fork="${need.javac.fork}"
                excludes="${source.dir}/bbct/swing/**"> <------- here
            <src path="${source.absolute.dir}" />
            <src path="${gen.absolute.dir}" />
            <compilerarg line="${java.compilerargs}" />
        </javac> 
```

不过，Ant 仍然坚持编译我使用 Swing 的类。

所以我有两个问题：

1.  组织这个项目的最佳方式是什么？您会建议我尝试过的两种方法中的一种还是完全其他的方法？

2.  如果我坚持使用我最近的解决方案，我该如何`javac`忽略项目中基于 Swing 的源文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T01:19:33.910

[如何在 Ant 中使用 javac 排除源包](https://stackoverflow.com/questions/2257639/how-to-exclude-a-source-package-using-javac-in-ant)？以及[如何在 ant 的 javac 任务中排除源？](https://stackoverflow.com/questions/3145968/how-can-i-exclude-sources-in-a-javac-task-in-ant)，我找到了使用`<exclude>`元素而不是`excludes`属性的解决方案。这是相关的`<javac>`任务：

```
 <javac encoding="${java.encoding}"
               source="${java.source}" target="${java.target}"
               debug="true" extdirs="" includeantruntime="false"
               destdir="${out.classes.absolute.dir}"
               bootclasspathref="project.target.class.path"
               verbose="${verbose}"
               classpathref="project.javac.classpath"
               fork="${need.javac.fork}">
            <src path="${source.absolute.dir}" />
            <exclude name="bbct/swing/**" />
            <src path="${gen.absolute.dir}" />
            <compilerarg line="${java.compilerargs}" />
        </javac> 
```

**附录：**

我怀疑这个解决方案的核心在于使用相对于`source`属性或`<src>`元素的路径。这意味着`excludes`元素应该使用相对路径也能正常工作。不过，我还没有对此进行测试。

# ruby-on-rails - 轮胎看不到单数/复数？

> ID：12632171
> 
> 赞同：1
> 
> 时间：2012-09-28T00:55:58.353
> 
> 标签：ruby-on-rails, ruby-on-rails-3, elasticsearch, tire

从我读过的所有内容来看，这应该有效。每次更改后我都会重新编制索引。

我的类别名称以复数形式存储，例如“书籍”、“电影”或“磁带”。在 Rails 术语中，这与`@resource.category.name`

如果我搜索它会起作用，`books`但如果我搜索它就不起作用`book`。我正在尝试这样做，以便您可以搜索单数或复数并找到该类别的结果

```
 # Tire

  include Tire::Model::Search
  include Tire::Model::Callbacks

  mapping do
    indexes :url
    indexes :title,       :boost => 3
    indexes :description, :boost => 2
    indexes :categories do
      indexes :name, analyzer: 'snowball', :boost => 1.5, store: 'true'
    end
    indexes :user do
      indexes :username, analyzer: 'keyword'
    end
  end  

  def self.elasticsearch(params)
    tire.search(
        :load => { :include => [:tags] }, 
        :page => params[:page], 
        :per_page => 20) do
      query { string params[:e], default_operator: "OR" } # if params[:e].present?
    end
  end

  def to_indexed_json
    to_json( include: { user: { only: [:username] }, 
                    category: { only: [:name] } } )
  end 
```

# python - Python for 循环到 while 循环

> ID：12632173
> 
> 赞同：1
> 
> 时间：2012-09-28T00:56:13.307
> 
> 标签：python, loops, if-statement, while-loop

我需要一些帮助来将下面的代码转换成更易于管理的东西。我很确定我需要修改它以包含一些 while 语句。但是在最后一天左右一直把我的头撞到墙上。我想我已经接近了......

```
for LevelItemList[1] in LevelUrlList[1]:
if LevelItemList[1][1] == "Folder":
    printFolderHeader(1,LevelItemList[1][0])
    LevelUrlList[2] = parseHTML (LevelItemList[1][2])

    for LevelItemList[2] in LevelUrlList[2]:
        if LevelItemList[2][1] == "Folder":
            printFolderHeader(2,LevelItemList[2][0])
            LevelUrlList[3] = parseHTML (LevelItemList[2][2])

            for LevelItemList[3] in LevelUrlList[3]:
                if LevelItemList[3][1] == "Folder":
                    printFolderHeader(3,LevelItemList[3][0])
                    LevelUrlList[4] = parseHTML (LevelItemList[3][2])

                    for LevelItemList[4] in LevelUrlList[4]:
                        if LevelItemList[4][1] == "Folder":
                            printFolderHeader(4,LevelItemList[4][0])
                            LevelUrlList[5] = parseHTML (LevelItemList[4][2])

                            for LevelItemList[5] in LevelUrlList[5]:
                                if LevelItemList[5][1] == "Folder":
                                    printFolderHeader(5,LevelItemList[5][0])
                                    LevelUrlList[6] = parseHTML (LevelItemList[5][2])

                                    for LevelItemList[6] in LevelUrlList[6]:
                                        printPage(6,LevelItemList[6][0])

                                    printFolderFooter(5,LevelItemList[5][0])

                                else:
                                    printPage(5,LevelItemList[5][0])
                            printFolderFooter(4,LevelItemList[4][0])                                
                        else:   
                            printPage(4,LevelItemList[4][0])
                    printFolderFooter(3,LevelItemList[3][0])

                else:
                    printPage(3,LevelItemList[3][0])
            printFolderFooter(2,LevelItemList[2][0])

        else:
            printPage(2,LevelItemList[2][0])
    printFolderFooter(1,LevelItemList[1][0])

else:
    printPage(1,LevelItemList[1][0]) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T02:20:32.600

我没有完整的代码上下文，但我认为您可以将其简化为以下内容：

```
def printTheList(LevelItemList, index):
    for item in LevelItemList:
        if item[1] == "Folder":
            printFolderHeader(index,item[0])
            printTheList(parseHTML (item[2]), index + 1) # note the + 1
            printFolderFooter(index,item[0])
        else:
            printPage(index,item[0])

# and the initial call looks like this.
printTheList(LevelUrlList[1], 1) 
```

此代码假设您实际上不需要像在代码中那样将值分配给 LevelUrlList 和 LevelItemList。如果您稍后确实需要该数据，我建议传入不同的数据结构来保存结果值。

# javascript - 由于此列表会增长，我如何使用数组或其他方法进行改进？

> ID：12632177
> 
> 赞同：0
> 
> 时间：2012-09-28T00:56:27.927
> 
> 标签：javascript, jquery

此代码有效，但随着我的 var 列表的增长，很快就会变得低效（已经如此？）。

我正在使用他们的新 API 将 Twitter 流添加到页面。这意味着我需要手动向他们提供一些信息，然后他们会返回一个 ID 字符串。没关系，没有解决方法。

此示例仅使用三个流所需的信息，但列表将迅速增长到数十个甚至更多。

```
function isValidTweets(ts_titletweets) {
    var widgetid = $('#TweetStuff').attr('data-widget-id');

    var jackID = '243441836335697920'; //IDs associated with streams
    var jillID = '243398621595312128';
    var harryID = '243398621595312130';

    var ts_titletweets = title.toLowerCase(); //title is parsed from URL elsewhere
    validtweets = "jack|jill|harry"; // if the title doesn't match then no streams should be used
    if (validtweets.indexOf(ts_titletweets.toLowerCase() + "|") > -1) {

        console.log('TweetsEnabled');

        if (ts_titletweets == "jack")
        {widgetid = jackID;
        console.log(widgetid + title)}
        else if (ts_titletweets == "jill")
        {widgetid = jillID;
        console.log(widgetid + title)}
        else if (ts_titletweets == "harry")
        {widgetid = harryID;
        console.log(widgetid + title)};

        $('#TweetStuff').html("<a class=\"twitter-timeline\" width=\"500\" height=\"600\" data-widget-id=" + widgetid + "></a>");

        $("#newTweetsButton").delay(3000).show(0);
        $("#filters").css({'margin' : '-30px 0px 0px 0px'});
        return true;

    } console.log('no Tweets'); 
    return false;

} 
```

我确定我正在手动重新输入，并且希望随着列表的增长而避免这种情况。

非常感谢任何和所有的建议，感谢新手。

谢谢！

**更新错别字**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T01:23:29.757

我不确定我是否理解代码中发生的事情，但您可以使用的是查找表。

```
 var ids = {
        'jack': '243441836335697920',
        'jill': '243398621595312128',
        'harry': '243398621595312130'
    };

    if (/*whatever*/) {

        widgetid = ids[ts_titletweets];
        console.log(widgetid + title);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T01:24:09.650

不太确定你在问什么，但这里有一些可能会有所帮助的东西：

```
// define an object with name: id pairs
var twitterIds = {
  'jack': '243441836335697920',
  'jill': '243398621595312128',
  'harry': '243398621595312130'
};

foreach(var name in twitterIds) {
  // name = jack
  // twitterIds[name] = '243441836335697920'
}

function loadTweets ( name ) {
  if( name && twitterIds[name] ) {
    // load stream here.  Use twitterIds[name] to get the twitter id
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T01:25:06.640

我将创建一个具有与人名相对应的属性的对象。然后，您将 id 存储起来。接下来，您可以检查它是否存在并执行您的代码。

[http://jsfiddle.net/7PSNt/1/](http://jsfiddle.net/7PSNt/1/)

```
var title = 'jill'; //hard coded for demo purposes
var myObject = {
    'jack': 1,
    'jill': 2,
    'harry': 3
};

//I assume title is just one of the keys above (jack, jill, harry)                 
var ts_titletweets = title.toLowerCase();

//if the object contains a property for the title then we can proceed
var tweetID = myObject[ts_titletweets];
if (tweetID != undefined) {
    widgetid = tweetID;
    console.log(widgetid + ':' + title)
}
​ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-28T01:52:59.693

为了提高效率，试试这个：

```
//cache of static jQuery objects
var $$ = { 
    'TweetStuff': $('#TweetStuff'),
    'newTweetsButton': $("#newTweetsButton"),
    'filters': $("#filters")
};

//define the ids in an outer scope - this gives isValidTweets less work to do each time it is called
var ids = {
    jack: '243441836335697920',
    jill: '243398621595312128',
    harry: '243398621595312130'
};

function isValidTweets(title) {
    var t = title.toLowerCase();
    var widgetid = ids[t] || $$.TweetStuff.attr('data-widget-id');
    $$.TweetStuff.html("<a class=\"twitter-timeline\" width=\"500\" height=\"600\" data-widget-id=" + widgetid + "></a>");
    $$.newTweetsButton.delay(3000).show(0);
    $$.filters.css({'margin' : '-30px 0px 0px 0px'});
    console.log('Tweets: ' + (ids[t] ? (widgetid + ' - ' + title) : 'none')); 
    return !!ids[t];//true or false
} 
```

# alias - xargs 采购 tcsh 中的别名

> ID：12632185
> 
> 赞同：1
> 
> 时间：2012-09-28T00:57:48.210
> 
> 标签：alias, xargs, tcsh, subshell

我正在尝试运行使用别名的 xargs 命令。搜索想出了这个

```
alias gojk 'stsq \!:1 | xargs -t -0 -I {} tcsh -c  source ~/.tcshrc.user;myset {}' 
```

但它返回

```
 Bad ! arg selector 
```

变化会回来

```
source: too few arguments. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-16T17:07:56.930

tcsh 仍然评估 ! 引号内的字符。你需要在它前面加上一个反斜杠。

我建议您将 tcsh 部分设为脚本，并在其中将参数传递给它，然后让它工作。然后使用 xargs 调用脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T14:37:24.910

使用`-m`标志让它在启动`tcsh`时读取你的，如`~/.tcshrc`

```
... | xargs -t0 -I {} tcsh -m -c "<alias> {}" 
```

# jquery-mobile - ASP.Net MVC4、jQuery 移动版

> ID：12632206
> 
> 赞同：0
> 
> 时间：2012-09-28T01:00:48.007
> 
> 标签：jquery-mobile, asp.net-mvc-4

我有一个页面，我需要根据用户单击的按钮显示/隐藏 div。在页面中，我有两个 div（divBranchList 和 divGrowerList）和两个按钮（btnBranch 和 btnGrower）。我正在使用以下代码来显示/隐藏 div。

```
 $(document).bind('pageinit', function () {
        alert("here");
        $("#divBranchList").hide();

        //show hide lists
        $("#btnGrower").click(function () {

         $("#divGrowerList").show();
         $("#divBranchList").hide();
       });

      $("#btnBranch").click(function () {
          $("#divBranchList").show();
          $("#divGrowerList").hide();
       });

      }); 
```

虽然这在页面加载或我刷新页面时非常有效，但是当用户单击列表项并且页面在获取一些数据后从服务器返回时无法正常工作。该页面的两个列表都可见，但如果我在 Firebug 的脚本面板中的以下行放置一个断点，它确实会被命中。

```
 $("#divBranchList").hide(); 
```

任何想法为什么 div 没有隐藏或如何使其工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T15:17:23.557

如果您在 JQueryMobile 页面中显示和隐藏内容，您可能需要触发[UpdateLayout](http://jquerymobile.com/test/docs/api/events.html)事件

```
$("#divBranchList").trigger("updatelayout"); 
```

在你完成展示/隐藏之后......

# php - INSERT SQL 语句不起作用

> ID：12632208
> 
> 赞同：-1
> 
> 时间：2012-09-28T01:00:53.247
> 
> 标签：php, sql, forms, postgresql, insert

我在 PostgreSQL 系统上。我以前使用过它并且没有遇到过这个问题，但那是用于基本的选择查询。

现在我正在尝试通过 HTML 表单和 php 插入数据。

当我填写数据时（即使我输入了表单上的所有字段），我也没有收到错误消息，所以我认为应该插入它......

这是我的 php/html：

```
<div id='insert_form'>
<form method='POST' action='insert.php' onsubmit='return checkSubmit()'>
  <label id='lbl_header'><b>Bold</b> fields are required.</label>
  <br /><br />
  <label class='required' for='code1' id='lbl_code1'>* Country code</label>
  <input type='text' name='code1' id='code1' maxlength='3' size='3'/>
  <br /><br />
  <label class='required' for='code2' id='lbl_code2'>* Country code (abbr.)</label>
  <input type='text' name='code2' id='code2' maxlength='2' size='2'/>
  <br /><br />
  <label class='required' for='country_name' id='lbl_name'>* Country name</label>
  <input type='text' name='country_name' id='country_name' maxlength='52'/>
  <br /><br />
  <label class='required' for='continent' id='lbl_continent'>* Continent</label>
  <select name='continent' id='continent'>
    <option value='Africa'>Africa</option>
    <option value='Antarctica'>Antarctica</option>
    <option value='Asia'>Asia</option>
    <option value='Europe'>Europe</option>
    <option value='North America'>North America</option>
    <option value='Oceania'>Oceania</option>
    <option value='South America'>South America</option>
  </select>

  <br /><br />
  <label class='required' for='region' id='lbl_region'>* Region</label>
  <input type='text' name='region' id='region' maxlength='26' />
  <br /><br />
  <label class='required' for='area' id='lbl_area'>* Surface area</label>
  <input type='text' name='area' id='area' />
  <br /><br />
  <label for='indepYear' id='lbl_year'>Year of independence</label>
  <input type='text' name='indepYear' id='indepYear' />
  <br /><br />
  <label class='required' for='population' id='lbl_pop'>* Population</label>
  <input type='text' name='population' id='population' />
  <br /><br />
  <label for='lifeExp' id='lbl_lifeExp'>Life expectancy</label>
  <input type='text' name='lifeExp' id='lifeExp' />
  <br /><br />
  <label for='gnp' id='lbl_gnp'>GNP</label>
  <input type='text' name='gnp' id='gnp' />
  <br /><br />
  <label for='gnp_old' id='lbl_gnp_old'>GNP (old)</label>
  <input type='text' name='gnp_old' id='gnp_old' />
  <br /><br />
  <label class='required' for='local_name' id='lbl_local_name'>* Local name</label>
  <input type='text' name='local_name' id='local_name' maxlength='45' />
  <br /><br />
  <label class='required' for='govt' id='lbl_govt'>* Form of government</label>
  <input type='text' name='govt' id='govt' maxlength='45' />
  <br /><br />
  <label for='HoS' id='lbl_HoS'>Head of state</label>
  <input type='text' name='HoS' id='HoS' maxlength='60' />
  <br /><br />
  <label for='capital' id='lbl_capital'>Capital code</label>
  <input type='text' name='capital' id='capital' />
  <br /><br />
  <label><a href='index.php'>Return to Selection Page</a></label>
  <input type='submit' name='submit' value='Insert row' />
</form>

?> 
```

连接文件已经被证明可以在我过去的项目中工作，所以我知道这不是问题。我已经编译了它，它也说那不是问题。知道为什么它不会插入数据库吗？或者，也许我可以在末尾添加一个可以检查它是否已被插入的 if 语句的函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T01:08:55.850

以您现在的方式使用 INSERT，您必须确保 VALUES () 子句的内容与表中列的数量和顺序完全匹配。如果有任何列不包括在内，即使它们具有默认值或自动编号，该命令也会失败。由于您没有显示有关您的表格的任何信息，我不知道这是否是您问题的根源。

如果是问题，可以使用完整形式的 INSERT：

```
 INSERT INTO county (col1, col2, col3) VALUES ($val1, $val2, $val3) 
```

在任何情况下都强烈推荐这种形式，因为它不对表做任何假设（除了列的名称），并防止命令因以后对表的结构更改而失败。

# perl - 使用 Perl Expect 与程序通信

> ID：12632215
> 
> 赞同：1
> 
> 时间：2012-09-28T01:01:43.153
> 
> 标签：perl, ipc, pipe, expect

我正在尝试使用 Expect 与一个长时间运行的交互式进程交谈。我正在使用 cat -un 来模拟该过程。我的代码如下：

```
 #!/usr/bin/perl 

    use strict; 
    use warnings; 
    use Expect; 

    my $timeout = 4000; 

    my $exp = Expect->spawn("cat -un"); 

    my $text = <STDIN>; 
    $exp->send($text); 

    $text = <STDIN>; 
    $exp->send($text); 

    $exp->expect(undef); # Forever until EOF 
    $exp->expect($timeout); # For a few seconds 
    $exp->expect(0); 

    $text = <STDIN>; 
    $exp->send($text); 

    $exp->expect(undef); # Forever until EOF 
    $exp->expect($timeout); # For a few seconds 
    $exp->expect(0); 
```

我按第一个字符串 + enter 并没有得到任何输出（显然）。我输入第二个字符串，然后按回车键，从 cat -un 转储到屏幕的标准输出。我的第三个字符串不会产生任何输出，但我希望它也能将标准输出转储到屏幕上。

我的目标是与将文本放在屏幕上的交互式进程进行通信（要求用户从菜单中进行选择），然后让用户输入响应并将其发送到进程（生成更多输出和更多菜单）。

Expect 似乎是最简单的方法。请协助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T04:42:29.430

我并没有完全理解你想要做什么，但我确实想出了这个例子，它产生`"cat -un"`然后等待通过`<STDIN>`. 每次它接收到输入时，它都会将该输入发送到`"cat -n"`，然后返回并等待更多输入。

```
#!/usr/bin/perl 

use strict; 
use warnings; 
use Expect; 

my $timeout = 5; 

my $exp = Expect->spawn("cat -un"); 

#$exp->debug(3);
$exp->debug(0);

my $text;
my $idx = 1;
while (1) {
    $text = <STDIN>; 
    $exp->send($text); 
    $exp->expect(1);

    print "$idx. sent text -> $text";
    $idx++;
} 
```

运行此脚本会产生以下输出：

```
% ./myexpect.pl 
s1                          <---- my input
s1
     1  s1
1\. sent text -> s1
s2                          <---- my input
s2
     2  s2
2\. sent text -> s2
s3                          <---- my input
s3
     3  s3
3\. sent text -> s3
s4                          <---- my input
s4
     4  s4
4\. sent text -> s4
Ctrl-C                      <---- my input
% 
```

如果您提供更多信息作为评论或问题，我可以尝试进一步解决您的问题。

# iphone - 如何在 iOS 上每次打开一个唯一文件夹中的解压缩文件

> ID：12632216
> 
> 赞同：1
> 
> 时间：2012-09-28T01:01:51.243
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

在我的 iOS 应用程序中，我正在解压缩“app/temp”文件夹中的文件，如下所示：

```
NSString *unzipFolder = [[CommonFunctions getCachePath] stringByAppendingPathComponent:@"/temp/"]; 
```

一旦我完成它，我将删除项目：

```
 [[NSFileManager defaultManager] removeItemAtPath:unzipFolder error:&e]; 
```

问题是 bcz 我正在创建解压缩文件的多个副本，其中一些文件的图像名称相同并显示错误的图像，而且我没有发现为什么我的删除功能不起作用的错误！

有什么方法可以为用户打开的每条消息解压缩不同路径上的文件夹吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T01:22:24.253

听起来您所要问的只是如何为您的`unzipFolder`每次生成一个唯一的名称。

只是不要使用硬编码的名称。几乎任何事情都会做。例如：

```
NSString *unzipFolderTemplate = [[CommonFunctions getCachePath] stringByAppendingPathComponent:@"temp.XXXXXX"];
char *template = strdup([template fileSystemRepresentation]);
if (mkdtemp(template)) {
  NSString *unzipFolder = [NSString stringWithFileSystemRepresentation:template
                                                                length:strlen(template)];
  free(template);
  // do the work
  [[NSFileManager defaultManager] removeItemAtPath:unzipFolder error:&e];
} 
```

好处`mkdtemp`是它为您创建了目录，并保证没有竞争条件、不知何故遗留的目录或其他问题。它也更安全，例如，有人编写破解或其他越狱黑客通过预测路径来利用您的代码。当然，缺点是您必须下拉到 C 字符串（这意味着显式`free`）。但是，正如我所说，有很多可能性，几乎任何事情都可以。

另外，请注意我使用的是`@"temp.XXXXXX"`，而不是`@"/temp.XXXXXX/"`。那是因为`-[stringByAppendingPathComponent:]`已经为您添加了任何必要的斜杠（实际上就是该方法的全部要点），并且目录创建函数不需要尾部斜杠，因此两个斜杠都是不必要的。

同时，我仍然对您尝试做的事情感到有些困惑。如果您需要为每条消息保留一个唯一的文件夹，并在完成该消息后删除该文件夹，并且您可以一次打开多条消息，则需要某种方式来记住哪个文件夹与哪个消息一起使用。

为此，创建一个`NSMutableDictionary`地方，然后`free(template)`你会想做类似的事情`[tempFolderMap addObject:unzipFolder forKey:messageName]`。然后，在关闭消息时，您将执行`[tempFolderMap objectForKey:messageName]`并使用`removeItemAtPath:error:`消息的结果（然后您也可以从 中删除密钥`tempFolderMap`）。

# vb.net - 调用 OpenFileDialog1.ShowDialog() 时出现堆栈溢出异常

> ID：12632222
> 
> 赞同：0
> 
> 时间：2012-09-28T01:02:43.077
> 
> 标签：vb.net, vsto, openfiledialog

> **可能重复：**
> [试图读取或写入受保护的内存。当我调用 openfileDialog 的 showDialog 方法时](https://stackoverflow.com/questions/8428574/attempted-to-read-or-write-protected-memory-when-i-call-showdialog-method-of-op)

不知道为什么。它最初工作得很好，然后我对代码进行了一些更改，这些更改应该对此没有影响。

选择文件时，我所做的更改仅更改复选框的某些属性：

```
Private Sub OpenFileDialog1_FileOk(ByVal sender As System.Object, ByVal e As System.ComponentModel.CancelEventArgs)
    attachmentLabel.Text = OpenFileDialog1.FileName.ToString()
    attachmentCheckBox.Visible = True
    attachmentCheckBox.Checked = True
End Sub 
```

这是调用 OpenFileDialog1.ShowDialog() 的事件处理程序

```
Private Sub Button2_Click(sender As System.Object, e As System.EventArgs) Handles Button2.Click

        OpenFileDialog1.Title = "Please Select a File"
        OpenFileDialog1.InitialDirectory = "C:temp"

        OpenFileDialog1.ShowDialog()

    End Sub 
```

任何帮助，将不胜感激。发生异常时， e 和 sender 的值会显示“无法评估表达式”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T05:45:30.287

[（这确实是一个评论，但它太大了。）]
这是由于：

1.  您的一些代码未在此处显示，
2.  某些特定于您的机器的文件系统或网络问题，或者
3.  VisualStudio（或 VB.NET 编译器）的暂时性问题。

要排除 (3)，（和 (2) 如果问题是暂时的）重新启动您的机器并重建您的应用程序（清理然后构建或至少只是重建）。

要确认 (2)，请尝试在另一台机器上运行您的程序。

如果问题是 (1)，为了帮助定位问题，请在您的代码中搜索对`OpenFileDialog1`. 如果它出现在设计器生成的代码和您在问题中显示的两个事件之外的任何地方，请将它们包含在您的问题中。

如果问题仍然存在，请确认是否在 Debug 和 Release 版本中都出现，并在问题中包含设计器生成的代码。

# linux - 在 Raspbian /etc/profile 脚本中找不到命令

> ID：12632224
> 
> 赞同：1
> 
> 时间：2012-09-28T01:03:02.977
> 
> 标签：linux, bash, debian, raspberry-pi, raspbian

我`/etc/profile`最后修改了我的脚本以自动加载`rvmsudo siriproxy server`，但是我得到了一些奇怪的错误：

**/etc/profile**

```
# /etc/profile: system-wide .profile file for the Bourne shell (sh(1))
# and Bourne compatible shells (bash(1), ksh(1), ash(1), ...).

if [ "`id -u`" -eq 0 ]; then
  PATH="/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/home/pi/.rvm/bin:/home/pi/.rvm/gems/ruby-1.9.3-p194@SiriProxy/bin"
else
  PATH="/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/local/games:/usr/games:/home/pi/.rvm/bin:/home/pi/.rvm/gems/ruby-1.9.3-p194@SiriProxy/bin"
fi
export PATH

if [ "$PS1" ]; then
  if [ "$BASH" ] && [ "$BASH" != "/bin/sh" ]; then
    # The file bash.bashrc already sets the default PS1.
    # PS1='\h:\w\$ '
    if [ -f /etc/bash.bashrc ]; then
      . /etc/bash.bashrc
    fi
  else
    if [ "`id -u`" -eq 0 ]; then
      PS1='# '
    else
      PS1='$ '
    fi
  fi
fi

# The default umask is now handled by pam_umask.
# See pam_umask(8) and /etc/login.defs.

if [ -d /etc/profile.d ]; then
  for i in /etc/profile.d/*.sh; do
    if [ -r $i ]; then
      . $i
    fi
  done
  unset i
fi

alias ls='ls --color'
cd ~/SiriProxy
rvmsudo siriproxy server 
```

前两行在我设置`ls`颜色别名和目录更改的地方工作。问题如下：

```
Last login: Fri Sep 28 11:42:44 2012 from 192.168.10.94
/usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- bundler (LoadError)
        from /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from /home/pi/SiriProxy/lib/siriproxy/command_line.rb:177:in `load_code'
        from /home/pi/SiriProxy/lib/siriproxy/command_line.rb:84:in `run_server'
        from /home/pi/SiriProxy/lib/siriproxy/command_line.rb:37:in `initialize'
        from bin/siriproxy:6:in `new'
        from bin/siriproxy:6:in `<main>'
pi@raspberrypi:~/SiriProxy$ 
```

它的意思是：

```
pi@raspberrypi:~/SiriProxy$ rvmsudo siriproxy server
Starting SiriProxy on port 443.. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T01:24:55.593

1.  做`which rvmsudo`
2.  修改 /etc/profile 以执行以下操作之一：
    *   指定 rvmsudo 的绝对路径
    *   包括目录 rvmsudo 在路径中。

# fullcalendar - 在 Fullcalendar 中更改过去事件的颜色

> ID：12632229
> 
> 赞同：7
> 
> 时间：2012-09-28T01:03:31.077
> 
> 标签：fullcalendar

我正在尝试实施[此解决方案](https://stackoverflow.com/questions/4016044/adding-a-class-to-past-events-using-fullcalendar-with-google-calendar/4018216#4018216)以在 Fullcalendar 中“灰显”过去的事件，但我没有任何运气。不过，我不太精通 Javascript，所以我认为我犯了一些愚蠢的错误。

我一直将建议的代码放入 fullcalendar.js 中，在第 4587 行附近的 daySegHTML(segs) 调用中。

我在函数的初始 var 列表的末尾添加了前两行（为什么不，我想）——所以是这样的：

```
...
var leftCol;
var rightCol;
var left;
var right;
var skinCss;

var hoy = new Date;// get today's date
hoy = parseInt((hoy.getTime()) / 1000); //get today date in unix

var html = '';
... 
```

然后，就在下面，我在循环中添加了另外两行：

```
for (i=0; i<segCnt; i++) {
    seg = segs[i];
    event = seg.event;
    classes = ['fc-event', 'fc-event-skin', 'fc-event-hori'];
    if (isEventDraggable(event)) {
        classes.push('fc-event-draggable');
    }

    unixevent = parseInt((event.end.getTime()) / 1000); //event date in Unix
    if (unixevent < hoy) {classes.push('fc-past');} //add class if event is old

    if (rtl) {
        if (seg.isStart) {
            classes.push('fc-corner-right');
        }
... 
```

运行此代码会导致呈现的日历不显示任何事件并显示错误消息：未捕获的 TypeError：无法调用 null 的方法“getTime”

显然，所指的“null”是 event.end.getTime()。但我不确定我是否理解到底出了什么问题，或者事情是如何执行的。正如所写，它似乎应该工作。在代码的这一点上，据我所知，event.end 包含一个有效的 IETF 时间码，但由于某种原因，当我尝试通过 getTime() 运行它时它“不存在”？

这对我来说不是一个关键任务调整，但仍然很好——我也想了解发生了什么以及我做错了什么！非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-06-08T21:37:26.543

如果您将 FullCalendar2 与 Google 日历一起使用，则需要使用以下代码版本。这使用 Moment.js 进行一些转换，但由于 FC2 需要它，所以您已经在使用它了。

```
 eventRender: function(event, element, view) {                   
            var ntoday = new Date().getTime();
            var eventEnd = moment( event.end ).valueOf();
            var eventStart = moment( event.start ).valueOf();
            if (!event.end){
                if (eventStart < ntoday){
                    element.addClass("past-event");
                    element.children().addClass("past-event");
                }
            } else {
                if (eventEnd < ntoday){
                    element.addClass("past-event");
                    element.children().addClass("past-event");
                }
            }
        } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-08T06:57:32.280

根据 FullCalendar v1.6.4

在 CSS 中样式化过去的事件：

```
.fc-past{background-color:red;} 
```

在 CSS 中设置未来事件的样式：

```
.fc-future{background-color:red;} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-28T04:48:17.827

没有必要摆弄 fullcalendar.js。只需添加一个回调，例如：

```
 eventRender: function(calev, elt, view) {
      if (calev.end.getTime() < sometime())
        elt.addClass("greyclass");
    }, 
```

您只需为 .greyclass 定义正确的 CSS。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T03:21:35.640

每个事件都有一个与之关联的 ID。最好根据事件的 id 维护自己的所有事件的元信息。如果您要从后端数据库弹出事件，请在表中添加一个字段。对我来说最有效的是仅依靠回调来获取事件 ID，然后设置/重置从我自己的数据存储中获取的属性。只是为了给您一些观点，我将粘贴下面的一段代码片段。关键是针对`EventDAO`您的所有需求的课程。

```
public class EventDAO
{
    //change the connection string as per your database connection.
    //private static string connectionString = "Data Source=ASHIT\\SQLEXPRESS;Initial Catalog=amit;Integrated Security=True";

    //this method retrieves all events within range start-end
    public static List<CalendarEvent> getEvents(DateTime start, DateTime end, long nParlorID)
    {
        List<CalendarEvent> events = new List<CalendarEvent>();

        // your data access class instance
        clsAppointments objAppts = new clsAppointments();

        DataTable dt = objAppts.SelectAll( start, end);

        for(int i=0; i<dt.Rows.Count; ++i)
        {
            CalendarEvent cevent = new CalendarEvent();
            cevent.id = (int)Convert.ToInt64(dt.Rows[i]["ID"]);

                .....            

            Int32 apptDuration = objAppts.GetDuration();    // minutes
            string staffName =  objAppts.GetStaffName();
            string eventDesc = objAppts.GetServiceName();
            cevent.title = eventDesc + ":" + staffName;

            cevent.description = "Staff name: " + staffName + ", Description: " + eventDesc;

            cevent.start = (DateTime)dt.Rows[i]["AppointmentDate"];

            cevent.end = (DateTime) cevent.start.AddMinutes(apptDuration);

            // set appropriate classNames based on whatever parameters you have.
            if (cevent.start < DateTime.Now)
            {
                cevent.className = "pastEventsClass";
            }
            .....

            events.Add(cevent);
        }
    }
} 
```

高级步骤如下：

1.  将属性添加到您的`cevent`类。调用它`className`或任何你想要的东西。
2.  `EventDAO`在获取所有事件的同时在课堂上填写。使用数据库或您维护的任何其他本地存储来获取元信息。
3.  在您的`jsonresponse.ashx`中，检索`className`并将其添加到返回的事件中。

示例片段来自`jsonresponse.ashx`：

```
return    "{" +
    "id: '" + cevent.id + "'," +
    "title: '" + HttpContext.Current.Server.HtmlEncode(cevent.title) + "'," +
    "start:  " + ConvertToTimestamp(cevent.start).ToString() + "," +
    "end: " + ConvertToTimestamp(cevent.end).ToString() + "," +
    "allDay:" + allDay + "," +
    "className: '" + cevent.className + "'," +
    "description: '" + 
    HttpContext.Current.Server.HtmlEncode(cevent.description) + "'" +  "},"; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-01-07T07:45:53.077

```
 eventDataTransform = (eventData) => {
       let newDate = new Date();
          if(new Date(newDate.setHours(0, 0, 0, 0)).getTime() > eventData.start.getTime()){            
              eventData.color = "grey";        
          }else{
              eventData.color = "blue";    
          }
          return eventData;
      }
//color will change background color of event
//textColor to change the text color 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-10-04T12:29:48.567

改编自@MaxD 下面的代码是我用来将过去的事件涂成灰色的代码。

用于全日历拉入 Json 的 JS

```
 events: '/json-feed.php',
 eventRender: function(event,element,view) {
         if (event.end < new Date().getTime())
          element.addClass("past-event");   
    },
 other options .... 
```

我的 Json 中的“event.end”是完整的日期时间“2017-10-10 10:00:00”

CSS

```
.past-event.fc-event, .past-event .fc-event-dot {
    background: #a7a7a7;
    border-color: #848484
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-29T17:17:32.847

好的，这就是我现在所拥有的，它正在工作（有点）：

```
eventRender: function(calev, elt, view) {
      var ntoday = new Date();
      if (calev.start.getTime() < ntoday.getTime()){
          elt.addClass("past");
          elt.children().addClass("past");
      }
} 
```

在我的样式表中，我发现我需要重新设置外部和内部元素的样式以更改颜色；因此`elt.children().addclass`加法。

我可以上班的唯一时间检查，缺少全天活动的结束时间，是查看开始时间 - 但这显然会导致多天活动出现问题。

还有另一种可能的解决方案吗？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-08-30T13:50:23.323

改编自@Jeff 原始答案，只需检查是否存在结束日期，如果确实使用它，则使用开始日期。有一个 allDay 键（真/假），但仍然可以在没有结束日期的情况下创建非 allDay 事件，因此它仍然会引发空错误。下面的代码对我有用。

```
eventRender: function(calev, elt, view) {
            var ntoday = new Date().getTime();
            if (!calev.end){
                if (calev.start.getTime() < ntoday){
                    elt.addClass("past");
                    elt.children().addClass("past");
                }
            } else {
                if (calev.end.getTime() < ntoday){
                    elt.addClass("past");
                    elt.children().addClass("past");
                }
            }
        } 
```

# java - 获取查询

> ID：12632231
> 
> 赞同：0
> 
> 时间：2012-09-28T01:03:36.913
> 
> 标签：java, google-app-engine, objectify

在我使用 Objectfy3 获取这样的 Query 对象之前：

```
@Override
public Query<Question> query() {
    return ofy().query(clazz);
} 
```

但是对于第 4 版，

```
@Override
public Query<Question> query() {
    return ofy().load().type(clazz);
} 
```

这是正确的获取方式`Query<T>`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T01:54:23.503

是的。

请注意，查询命令对象是不可变的（它们在 v3 中是可变的）。

# javascript - geoPlugin 用 IE 取消定义变量

> ID：12632233
> 
> 赞同：0
> 
> 时间：2012-09-28T01:04:20.257
> 
> 标签：javascript, internet-explorer-8, internet-explorer-9, cross-domain

我有几个使用[geoPlugin](http://www.geoplugin.com/)的站点，在 2012 年 9 月 24 日 Microsoft 的 IE 更新之后，我遇到了一些奇怪的问题。我首先注意到我的 nivo 滑块没有出现在我的主页上，所以我深入控制台找到了一个

`SCRIPT5009: 'geoplugin_countryCode' is undefined`

然后我在谷歌浏览器中调试了同一个页面，那里一切正常。我试图破译有关该更新的 KB2744842 公告

这是我的javascript：

```
<script src="https://ssl.geoplugin.net/javascript.gp" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function() {
        var country = geoplugin_countryCode();

        if(country === 'CA'){
            $('#notification').html('<div class="attention" style="display: none;">You are in Canada</div>');
            $('.attention').fadeIn('slow');
            $('html, body').animate({ scrollTop: 0 }, 'slow');
        }else if(country != 'US'){
            $('#notification').html('<div class="attention" style="display: none;">You are in the USA</div>');
            $('.attention').fadeIn('slow');
            $('html, body').animate({ scrollTop: 0 }, 'slow');
        }else{
            //nothing stupid IE
        }

    });
    $('.geoClose').live('click', function() {
        console.log('geoplugin notify closed');
        document.cookie = 'geoClose=true;'
    });
</script> 
```

HTML：

```
<div id="wrapper">
  <div id="header">Header Text</div>
  <div id="notification"></div>
  <div id="content">Content Here!</div>
  <div id="footer"></div>
</div>​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T17:57:09.460

geoPlugin 最近更改了一些关于 SSL 请求的策略，显然 IE 不会遵循重定向实现，而其他浏览会这样做。

结果代码：

```
<script src="http://www.geoplugin.net/javascript.gp" type="text/javascript"></script>
<script src="http://www.geoplugin.net/statistics.gp" type="text/javascript"></script>
<!--<script src="https://ssl.geoplugin.net/javascript.gp" type="text/javascript"></script>-->
<script type="text/javascript">
//<![CDATA[
    $(document).ready(function() {
        var country = geoplugin_countryCode();

        if(country === 'CA'){
            $('#notification').html('<div class="attention" style="display: none;">You are in Canada</div>');
            $('.attention').fadeIn('slow');
            $('html, body').animate({ scrollTop: 0 }, 'slow');
        }else if(country != 'US'){
            $('#notification').html('<div class="attention" style="display: none;">You are in the USA</div>');
            $('.attention').fadeIn('slow');
            $('html, body').animate({ scrollTop: 0 }, 'slow');
        }else{
            //nothing stupid IE
        }

    });
    $('.geoClose').live('click', function() {
        console.log('geoplugin notify closed');
        document.cookie = 'geoClose=true;'
    });
//]]>
</script> 
```

# php - PDO 根据准备好的：param 检查字段，处理 IS NULL 条件

> ID：12632235
> 
> 赞同：6
> 
> 时间：2012-09-28T01:04:23.933
> 
> 标签：php, mysql, pdo, prepared-statement

我有以下查询：

```
//query:
$query = "
    SELECT field1 FROM table 
    WHERE 
        field2 = :PARAM1
    AND ...
    AND fieldx = :PARAM1X";

//params:
$params = array();
$params [":PARAM" . $i] = NULL;

//prepare and execute:
$o = $cnx->prepare($query);
$o->execute($params); 
```

如何将参数与`NULL`值绑定？PDO 会自动更改`= :PARAM1`为吗？`IS NULL`为了清楚起见，尝试计算`WHERE field = null`在 mysql 中不起作用，并且永远不会返回任何内容。我们必须`WHERE field IS NULL`改用。

这就是我现在正在处理的事情。

我必须说我的第一次测试是积极的，但我真的不想在生产环境中在 6 个月内发现副作用......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T01:27:40.030

正如评论`PHP Docs`所说，

```
bindValue(':PARAM1', null, PDO::PARAM_INT); 
```

或者

```
$myNull = null;
$stmt->bindParam(':PARAM1', $myNull, PDO::PARAM_NULL); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T01:27:54.177

如果你想绑定参数将为空值，那么你需要使用 bindValues

```
bindValue(':param', null, PDO::PARAM_INT); 
```

所以对于您的查询，它可能是这样的。

```
$sth = $dbh->prepare('SELECT field1 FROM table WHERE field2 = :PARAM1 AND fieldx = :PARAM1X');
$sth->bindValue(':PARAM1', null, PDO::PARAM_INT); 
```

希望这可以帮助。

# c# - EntityFramework 更新或插入中文或非英文文本

> ID：12632240
> 
> 赞同：7
> 
> 时间：2012-09-28T01:04:49.423
> 
> 标签：c#, asp.net, entity-framework

其实在我没有使用framework或者linq之前，只是用Sqlcommand类输入sql语句，我输入`insert into table values(N'sample')` 其实我不知道N是什么，但是它适用于中文和其他语言，否则会插入一些问号。

但是当我使用EntityFramework时，这种框架总是插入一些问号，请​​问如何解决这个问题。

N 表示 Unicode？你能给我举个例子，EntityFramework 使用这种东西吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-07-15T18:42:46.770

1.  在 .edmx 表中，选择列 -> 检查其属性并将 unicode 设置为 true
2.  如果您在 Code First Apporach 中工作，请重新生成表
3.  检查您的数据库表，它应该是 nvarchar 或 ntext 数据类型

这样 EF 将保存 unicode 字符。

![在此处输入图像描述](../Images/d7392980ca747072151c03860af9f8d6.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-14T16:21:22.323

我对尼泊尔语有完全相同的问题。我必须将 sql server 列的数据类型从 varchar 转换为 nvarchar，然后在实体框架映射中刷新我的 *.edmx 文件。然后它工作得很好。

varchar(255) => nvarchar(255)

varchar(MAX) => nvarchar(MAX)

右键单击 edmx 文件中的该表映射并刷新。保存更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T14:22:04.187

确保在装有中文 sqlserver 的服务器上安装了语言包。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-26T11:39:56.577

我们只是将数据类型更改为 nchar() 或 nvarchar 并且它起作用了。它能够以英语以外的任何语言存储数据。

# vb.net - “从字符串“”到类型“Double”的转换无效。” 在 VB 中

> ID：12632245
> 
> 赞同：3
> 
> 时间：2012-09-28T01:05:52.550
> 
> 标签：vb.net

当我尝试运行程序来计算付款和总利息时，我得到“从字符串转换”到类型“双”无效。

我究竟做错了什么？

```
Dim P As Double
Dim R As Double
Dim N As Double
Dim Payment As Double
Dim totalInterest As Double

Private Sub btnAnalyze_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnAnalyze.Click

P = CDbl(txtAmount.Text)
N = CDbl(txtDuration.Text)
R = CDbl(txtInterestRate.Text)

Payment = (P * R) / (1 - (1 + R) ^ (-N))
totalInterest = (N * Payment) - P

Payment = CDbl(txtPayment.Text)
totalInterest = CDbl(txtInterest.Text)

If P < 0 Then
MessageBox.Show("Please enter in loan amount")

End If

If R <= 0 Then
MessageBox.Show("Please enter in loan amount")

End If

If N <= 0 Then
MessageBox.Show("Please enter in loan amount")

End If

End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T01:08:41.933

您的一项`TextBox`项目尚未填写。

因此，当您使用 时`CDbl`，例如`P = CDbl(txtAmount.Text)`，如果`TextBox`为空，则会导致此错误。

更好的选择是使用[Double.TryParse](http://msdn.microsoft.com/en-us/library/994c0zb1.aspx)而不是`CDbl`，因为它可以让您提出正确的消息：

```
Private Sub btnAnalyze_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnAnalyze.Click

If Not Double.TryParse(txtAmount.Text, P) Then
     MessageBox.Show("Please correct the loan amount")
     Exit Sub
End If

' Do the same for all other CDbl checks 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-06-03T20:26:38.707

我知道这个原始问题很老，但它在 Google 上很流行。

到目前为止，在某种程度上，每个人都是对的。您尝试的 CDbl 函数不能很好地处理空白（它会爆炸）。在某些情况下（特别是我的） TryParse 不是一个选项（请参阅下面的“为什么”以及真正的解决方案）

但是，如果您期望数据中有数字，并且不可能收到错误（长话短说，这是我的上下文），那么您必须使用 CDbl，因为没有其他转换方法可以用于一个表达式（同样，我的上下文）。

就我而言，由于我无法声明变量，因此我找到了一个优雅的解决方案。我用连接器完成了它，在我的情况下（我使用的是 vb.net ）它是`CDbl("0" + txtAmount.Text)`P 是您测试的原始数据，然后是 R 和 N 等。

这与`Val()`过去一样，默认前导零，您没有更改变量中的任何数据，但只解决了空白。还有更多完整的解决方案，但我无法使用这些解决方案，因为我只能使用“单线”可以这么说

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T06:03:07.880

如果文本框为空，则使用函数的 Val() 代替 CDbl()，它将字符串转换为默认值 0。然后运行时错误可能不会出现..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T05:56:47.537

我会说这仅仅是因为你想要：

```
txtPayment.Text = CStr(Payment)
txtInterest.Text = CStr(totalInterest) 
```

代替

```
Payment = CDbl(txtPayment.Text)
totalInterest = CDbl(txtInterest.Text) 
```

# r - R：原始函数 - 出于历史或效率原因？

> ID：12632246
> 
> 赞同：3
> 
> 时间：2012-09-28T01:06:18.427
> 
> 标签：r

我如何找到 R 中出于历史或效率原因的原始函数列表？

原始函数是在 R 代码和用于编写 R 的 C 代码之间提供链接的函数。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-28T01:30:53.437

这将为您提供包装调用的所有 R 函数的名称`.Primitive()`：

```
nms <- names(methods:::.BasicFunsList)        ## ?.BasicFunsList for more info

length(nms)
# [1] 192
c(head(nms, 8), tail(nms, 8))
#  [1] "$"          "$<-"        "["          "[<-"       
#  [5] "[["         "[[<-"       "%*%"        "xtfrm"     
#  [9] "switch"     "tracemem"   "unclass"    "untracemem"
# [13] "while"      "{"          "||"         "~" 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-09-28T01:10:07.140

[这](http://cran.r-project.org/doc/manuals/R-lang.html)是 Cran 的手册，里面有很多关于历史和效率的信息。它简要介绍了 R 命令以及在哪种情况下使用哪个更好。

# java - jdk URL应该和如何关闭？

> ID：12632250
> 
> 赞同：0
> 
> 时间：2012-09-28T01:06:40.207
> 
> 标签：java, url, connection

我用来`java.net.URL`从我设置的互联网上获取 html`keepAlive`和`maxConnections`

```
System.setProperty("http.keepAlive", "true");
System.setProperty("http.maxConnections","600"); 
```

然后我开始从互联网上获取 html，其中包含几个线程，例如：

```
protected static String content(URLConnection conn) throws IOException {
    try (InputStream in = getInputStream(conn)) {
        //bla bla bla...
        // get bytes from in
        return new String(bytes, charset);
    }
} 
```

但是我发现当我运行这个程序一段时间（5-8小时）时，目标网站（用于测试）是建立760个连接？

那么，我应该以及如何手动关闭 URLConnection ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T01:52:45.937

我从未见过使用其 API 显式关闭连接的方法。但是，您可以使用方法设置连接读取超时[`setReadTimeout`](http://docs.oracle.com/javase/6/docs/api/java/net/URLConnection.html#setReadTimeout%28int%29)。这需要在建立连接之前设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T01:19:59.880

老实说，您可能会尝试使用 Socket/ServerSocket 而不是 URLConnection - 使用 Sockets，您可以在选择时关闭套接字，它可以让您更直接地控制何时打开、关闭、读取、并写入连接。查看 API：

[http://docs.oracle.com/javase/6/docs/api/java/net/Socket.html](http://docs.oracle.com/javase/6/docs/api/java/net/Socket.html)

# jquery - 使用 jQuery-rails 替换 Ajax

> ID：12632251
> 
> 赞同：0
> 
> 时间：2012-09-28T01:07:03.087
> 
> 标签：jquery, ruby-on-rails, ajax, partial-views, replacewith

我有一个页面，上面有两种形式。每个表单都是过滤页面结果的不同方式。第一种形式是`collection_select`. 第二种形式是`text_field_tag`. 每个都提交到同一个控制器并使用`index.js.erb`. Firebug 显示 Ajax 调用对它们都有效并返回正确的结果，但是，只有从`text_field_tag`表单返回的结果才能真正更新页面。它使用相同的代码`index.js.erb`来返回两个调用的结果，所以我不确定为什么一个有效而另一个无效。

index.html.erb：

```
<h1>Listing info</h1>
<%= render "partials/filter" %> OR
<%= render "search" %>

<div id="filter_table">
  <%= render 'list' %>
</div> 
```

_list.html.erb：

```
<table class="tablesorter">
<thead><tr><td>Name</td><td>ID</td><td>Description</td></tr></thead>
<tbody>
<% @info.each do |inf| %>
<tr><td><%= inf.name %></td><td><%= inf.id %></td><td><%= inf.desc %></td></tr>
<% end %>
</tbody>
</table> 
```

index.js.erb：

```
$("#filter_table").replaceWith("<div id=\"filter_table\"><%= escape_javascript(render 'list') %></div>");
$(".tablesorter").tablesorter({widgets: ['zebra']}); 
```

_filter.html.erb：

```
<%= form_tag("#", :method => "get", :remote => true) do %>
  <% cur_id = params[:id].to_i %>
  <%= submit_tag("Filter") %>
<% end %> 
```

_search.html.erb：

```
<%= form_tag("#", :method => "get", :remote => true) do %>
  Search for an ID: <%= text_field_tag("id") %>
  <%= submit_tag("Search") %>
<% end %> 
```

控制器.rb：

```
def index
  @info = Blahblah
  respond_to do |format|
    format.html
    format.js
  end
end 
```

下面是从 AJAX 调用返回的一些示例：

作品：

```
http://hostname/blah?utf8=%E2%9C%93&id=Stuff&commit=Search

$("#filter_table").replaceWith("<div id=\"filter_table\"><table class=\"tablesorter\">\n  <thead>\n  <tr>\n    <th class=\"{sorter: \'digit\'}\">One<\/th>\n    <th>ID<\/th>\n    <th>Person<\/th>\n    <th>Person<\/th>\n    <th>Two<\/th>\n    <th>VID<\/th>\n    <th>type<\/th>\n    <th>Status<\/th>\n    <th>Three<\/th>\n    <th>Four<\/th>\n    <th>Five<\/th>\n  <\/tr>\n  <\/thead>\n  <tbody>\n  <tr>\n    <td><a href=\"/blah/801\" id=\"801\">801<\/a><\/td>\n    <td>Meep<\/td>\n    <td>1814<\/td>\n    <td>Meep2<\/td>\n    <td>Test<\/td>\n    <td>Stuff<\/td>\n    <td>unknown<\/td>\n    <td>submitted<\/td>\n    <td>47<\/td>\n    <td>16.6<\/td>\n    <td>7.9<\/td>\n  <\/tr>\n<\/tbody>\n<\/table>\n\n\n\n</div>");
$(".tablesorter").tablesorter({widgets: ['zebra']}); 
```

不工作：

```
http://hostname/blah?utf8=%E2%9C%93&filter=123&commit=Filter

$("#filter_table").replaceWith("<div id=\"filter_table\"><table class=\"tablesorter\">\n  <thead>\n  <tr>\n    <th class=\"{sorter: \'digit\'}\">One<\/th>\n    <th>ID<\/th>\n    <th>Person<\/th>\n    <th>Person<\/th>\n    <th>Two<\/th>\n    <th>VID<\/th>\n    <th>type<\/th>\n    <th>Status<\/th>\n    <th>Three<\/th>\n    <th>Four<\/th>\n    <th>Five<\/th>\n  <\/tr>\n  <\/thead>\n  <tbody>\n  <tr>\n    <td><a href=\"/blah/801\" id=\"801\">801<\/a><\/td>\n    <td>Meep<\/td>\n    <td>1814<\/td>\n    <td>Meep2<\/td>\n    <td>Test<\/td>\n    <td>Stuff<\/td>\n    <td>unknown<\/td>\n    <td>submitted<\/td>\n    <td>47<\/td>\n    <td>16.6<\/td>\n    <td>7.9<\/td>\n  <\/tr>\n<\/tbody>\n<\/table>\n\n\n\n</div>");
$(".tablesorter").tablesorter({widgets: ['zebra']}); 
```

Firebug 显示从 BOTH 调用返回的 Ajax 工作正常，但不知何故，`replaceWith`它不适用于从 Filter 表单返回的内容，但对从 Search 表单返回的内容有效。如果您注意到，示例 Ajax 结果完全相同，但不知何故第一个有效，而第二个无效。两者使用相同的`index.js.erb`代码。

更新：

我还尝试将上面的 index.js.erb 替换为：

```
$("#filter_table").empty();
$("#filter_table").append("<div id=\"filter_table\"><%= escape_javascript(render 'list') %></div>");
$(".tablesorter").tablesorter({widgets: ['zebra']}); 
```

这以与上述相同的方式工作。即使它们都使用相同且相同的控制器和相同的视图代码并且它们都返回相同的 AJAX 结果，使用`text_field_tag`作品的查询和使用 的查询`collection_select`也不起作用。`index.js.erb`

**更新2：**

使用该`collection_select`版本时，在 jquery 行 2215 中返回 AJAX 调用后，我在 firebug 中收到警告。

```
Use of attributes' specified attribute is deprecated.  It always returns true.
return !val || val.specified ? elem.val : elem.text; 
```

我没有通过`text_field_tag`AJAX 调用收到此警告。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T12:29:26.633

我试图运行你的代码（但没有这个`$(".tablesorter").tablesorter({widgets: ['zebra']});`，它工作正常。我粘贴了`alert`电话：

```
$("#filter_table").empty();
alert("1");
$("#filter_table").append("<%= j render 'list' %>"); 
```

当我看到“1”时，没有桌子。你的代码很好。也许这一切都与`tablesorter`通话有关？

# linq - 如何使用 LINQ 查询读取 Outlook 文件夹？

> ID：12632255
> 
> 赞同：0
> 
> 时间：2012-09-28T01:07:28.893
> 
> 标签：linq, email, outlook, directory, mapi

我需要 VB.NET 中的帮助或示例代码来读取指定的 Outlook 文件夹，该文件夹不是收件箱或收件箱的子文件夹

假设文件夹名称是“foo”，我如何使用 LINQ 查询检索电子邮件，可能会为 from、to、date、主题或正文内容添加 where 子句。

谢谢 ：-）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T06:52:28.143

无意冒犯，但是当你有一把锤子时，一切看起来都像钉子:-) 为什么它需要是 LINQ？它在您的源代码中可能看起来很整洁，但它可能会使您的应用程序陷入瘫痪 - 如果您需要任何类型的限制，请尽可能使用本机方法。在你的情况下，那将是`Items.Find/FindNext/Restrict`. 如果您需要访问任意文件夹，请使用该`Namespace.Folders`集合——它包含来自所有商店的顶级文件夹。如果文件夹与收件箱处于同一级别，请使用`Inbox.Parent.Folders`收藏夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-10T12:38:55.903

您可以使用以下内容。

[http://www.nuget.org/packages/scipbe.common.office/](http://www.nuget.org/packages/scipbe.common.office/)

将其添加到您的项目中，您可以在 Outlook 中使用类似 linq 的语法。

还

[http://programmersunlimited.wordpress.com/2011/01/08/linqqer-exposing-linq-extensions-on-non-ienumerableiqueriable-collections/](http://programmersunlimited.wordpress.com/2011/01/08/linqqer-exposing-linq-extensions-on-non-ienumerableiqueriable-collections/)

# ruby-on-rails - 从控制器渲染部分

> ID：12632262
> 
> 赞同：0
> 
> 时间：2012-09-28T01:08:54.030
> 
> 标签：ruby-on-rails, ajax

我对 Rails 还是比较陌生，所以请多多包涵。如何刷新部分并留在页面而不是仅渲染部分？

在`_interaction.html.haml`：

```
%div.vote_up.pull-left
  = link_to('', vote_up_deal_path(deal), :method => :post,
    :class => 'icon-thumbs-up interaction_button', :id => "vote_up_#{deal.id}")

```

在'votes.js'中：

```
$.ajax({
  类型：'POST'，
  url: '/deals/' + id + '/vote_up',
  成功：函数（）{
    //做东西
  }
});

```

在我的`deals_controller.rb`：

```
def vote_up
  如果 user_signed_in?
    current_user.vote_exclusively_for(@deal = Deal.find(params[:id]))
    渲染 :partial => 'deals/partials/interaction', :locals => {:deal => @deal}
  结尾
结尾

```

这会将我重定向到页面并呈现部分内容，而不是像 AJAX 请求那样刷新它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T01:23:48.180

尝试

```
= link_to('', vote_up_deal_path(deal), :method => :post, :remote=>true, 
    :class => 'icon-thumbs-up interaction_button', :id => "vote_up_#{deal.id}") 
```

因为 :remote 说是ajax请求

# html - 使用 vim 正则表达式在 vim 中查找重复的连续字符串

> ID：12632263
> 
> 赞同：3
> 
> 时间：2012-09-28T01:08:54.093
> 
> 标签：html, regex, search, vim, replace

所以假设我的搜索文件中有这个

Foo
Bez，Bez
Foobar
Foo

我想使用正则表达式搜索 Bez, Bez。

这就是我所拥有的，我知道它甚至都不正确。

```
:%s/\([a-zA-Z]\),\([a-zA-Z])/\1,\1,\1/g 
```

所以基本上我想做的就是把“Bez，Bez”变成“Bez，Bez，Bez”

真的，我对如何找到 2 个连续的等效字符串感到困惑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T02:41:25.120

关于什么：

```
%s/\(\w\+\), \1/\1, \1, \1/g 
```

它甚至在结束整个匹配表达式之前就捕获了括号之间的表达式，非常整洁吧？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T01:28:32.100

您使用捕获组，例如：

```
(\w+)\W+\1 
```

但我不记得这种正则表达式的 vim 等价物。

我使用[RegexPal](http://www.regexpal.com/)和您提供的输入进行了测试

![RegexPal 中的测试相等性](../Images/721225e9c38862cf69309c158e6e402b.png)

**编辑**

[在 Vim 中](http://vimregex.com/#backreferences)找到反向引用

# ruby - Ruby：从谷歌分析中获取数据？

> ID：12632266
> 
> 赞同：0
> 
> 时间：2012-09-28T01:09:24.713
> 
> 标签：ruby, google-analytics

我想为每日/每月报告收集谷歌分析数据。所有访问者，特定路径的访问者和转化率。谷歌分析的设置已经完成（我认为）。

我搜索了 ruby​​ 库，但许多信息已经过时，而且 google api 有时会更新。现在(2012-09-28) 什么图书馆流行？以及如何获取数据？我搜索了 ruby​​-toolbox，但这两个库仍然处于活动状态？

图书馆

```
'garb'
https://github.com/vigetlabs/garb
'google-api-client'
http://code.google.com/p/google-api-ruby-client/ 
```

目的：

```
My first step: view data
My second step: edit data(Add note or notation) 
```

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T00:29:43.050

Google-Api-Client 工作正常，是官方客户端，并且不断更新，只需检查提交日志即可。请注意，此 API 不仅适用于 Google Analytics，还适用于任何使用[Google Discovery API 的 Google API](https://developers.google.com/discovery/)。你应该试试。

无论您使用哪种客户端，请确保它与最新版本的 API 兼容。如果它是使用 Google API Discovery 服务构建的，那将是一个加分项，因为这意味着客户端库将在新方法可用时立即支持它们。它就像一个用于构建 API 客户端的 API。

另一方面，GARB 似乎被放弃了一段时间，并且可能错过了最近出现的几个功能。

请注意，Google Analytics API 目前是只读的。所以没有客户端库会支持它，因为没有用于编写注释的 API。不过，有一个[功能请求](http://code.google.com/p/gdata-issues/issues/detail?id=1793)。

# c++ - 如何在分配更多内存空间之前检查指针是否为NULL？

> ID：12632273
> 
> 赞同：0
> 
> 时间：2012-09-28T01:10:06.237
> 
> 标签：c++

我正在为我的项目使用抽象工厂设计模式。

```
CPattern * CObjectA::Create(void)
{
    CPattern *p = new CPattern;
    patternList.push_back (p);
    return *p;
}

//Member variable
CPattern *pat = NULL;

pat = Obj.Create(); 
```

CObjectA 将删除析构期间分配的空间。问题是，如果客户再次这样做：

```
pat = Obj.Create(); 
```

我会分配另一个空间并拍拍它。如果这被调用了几百次，我将继续创建空间而不取消分配它。

在我为它分配另一个空间之前，有没有办法检查 pat 是否为空？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T01:16:01.817

```
delete pat;
pat = Obj.Create(); 
```

更好的解决方案是制作`pat`一个智能指针，当您重新分配给新对象时，它将自动删除该对象。

保持`patternList`最新状态完全是另一个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T01:18:14.843

您的代码不一致：该`Create`函数返回一个引用，但应该返回一个指针（正如您稍后所暗示的那样`pat = Obj.Create();`）。（工厂自然返回指针而不是引用，因为后者鼓励意外复制到基类型的局部变量中 - 称为切片，其中不复制特定于实际运行时类型的数据成员）

“CObjectA 将删除在析构函数期间分配的空间” - 是的，但对于堆分配的对象，您必须让`delete`它们触发析构函数。“客户”应`delete`在更换之前检查和`pat`：

```
delete pat;  // does nothing if pat's already NULL...
pat = new CObjectA.Create(); 
```

# javascript - 如何在整个页面中使用检测脚本来检测特定的浏览器？

> ID：12632277
> 
> 赞同：0
> 
> 时间：2012-09-28T01:10:56.537
> 
> 标签：javascript, picturefill

我有一个单页文档，其中包含仅需要在 Android 2.3 手机和 IE8/9 上加载的几张图片，因为 picturefill.js 项目在这些设备上无法正常工作。

我在我的图片填充代码实例之一中成功使用了此脚本：

```
var ua = navigator.userAgent.toLowerCase();
var isAndroid = ua.indexOf("android") > -1; //&& ua.indexOf("mobile");
if(isAndroid) {
  // Do something!
  document.getElementById('theimage').innerHTML = '<img src="http://placehold.it/200x200">;
} 
```

我需要在页面上多次使用它，但是当我多次粘贴上面的确切代码时会出现问题。

有没有办法将上述内容变成一个函数，可以调用该函数来为唯一图像的每个实例调用不同的图像？我需要使用上面的脚本在页面上调用至少 6 个独特的图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T01:13:31.990

一旦代码执行完毕，您就不需要前两行了，因为它们已经设置好，重新定义它们可能会导致错误。只需在必要时使用 if 语句。

第一次

```
var ua = navigator.userAgent.toLowerCase();
var isAndroid = ua.indexOf("android") > -1; //&& ua.indexOf("mobile");
if(isAndroid) {
  // Do something!
  // Redirect to Android-site?
} 
```

以后的每一次

```
if(isAndroid) {
  // Do something!
  // Redirect to Android-site?
} 
```

# ruby - Ruby 对象文字（ala javascript）

> ID：12632278
> 
> 赞同：12
> 
> 时间：2012-09-28T01:11:13.867
> 
> 标签：ruby

在红宝石中你可以去

```
a = { }
a['a'] = 82
a['b'] = 'foo'
puts a['a'] # 82 
```

我希望我可以使用点表示法，比如 javascript。

`puts a.a # 82`

有没有办法在 ruby​​ 中构建对象文字并使用点符号访问它们？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-28T01:25:39.400

您可以创建一个[`Struct`](http://www.ruby-doc.org/core-1.9.3/Struct.html).

```
A = Struct.new(:a, :b)
a = A.new(82, 'foo')
puts a.a
#=> 82 
```

**编辑：**

你甚至可以做

```
a = { }
a['a'] = 82
a['b'] = 'foo'
Struct.new(*a.keys).new(*a.values) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-28T05:10:51.597

您需要的结构[`OpenStruct`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/ostruct/rdoc/OpenStruct.html)与 JS 对象文字的工作方式相同。它具有覆盖`method_missing`方法，允许使用 setter 方法添加新变量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-28T01:16:24.827

Ruby 没有对象字面量。

Ruby 是一种基于类的面向对象语言。每个对象都是类的一个实例，类负责创建自己的实例。您不只是通过写下来创建对象，您必须通过向类发送消息（通常称为`new`，尽管这只是一种约定）来要求类创建其自身的实例。

# iphone - ObjectiveC中变量位置的声明/定义？

> ID：12632285
> 
> 赞同：116
> 
> 时间：2012-09-28T01:11:58.157
> 
> 标签：iphone, objective-c, ios, ios5

自从开始研究 iOS 应用程序和目标 C 以来，我一直对可以声明和定义变量的不同位置感到非常困惑。一方面，我们有传统的 C 方法，另一方面，我们有新的 ObjectiveC 指令，在此基础上添加了 OO。你们能否帮助我了解我想将这些位置用于我的变量的最佳实践和情况，并可能纠正我目前的理解？

这是一个示例类（.h 和 .m）：

```
#import <Foundation/Foundation.h>

// 1) What do I declare here?

@interface SampleClass : NSObject
{
    // 2) ivar declarations
    // Pretty much never used?
}

// 3) class-specific method / property declarations

@end 
```

和

```
#import "SampleClass.h"

// 4) what goes here?

@interface SampleClass()

// 5) private interface, can define private methods and properties here

@end

@implementation SampleClass
{
    // 6) define ivars
}

// 7) define methods and synthesize properties from both public and private
//    interfaces

@end 
```

*   我对 1 和 4 的理解是，它们是 C 风格的基于文件的声明和定义，对类的概念一无所知，因此必须准确地使用它们在 C 中的使用方式。我见过它们之前用于实现基于静态变量的单例。我还缺少其他方便的用途吗？
*   我对 iOS 的看法是，在 @synthesize 指令之外几乎完全淘汰了 ivar，因此几乎可以忽略不计。是这样吗？
*   关于 5：我为什么要在私有接口中声明方法？我的私有类方法似乎编译得很好，没有在接口中声明。主要是为了可读性吗？

非常感谢，伙计们！

* * *

## 回答 #1

> 赞同：154
> 
> 时间：2012-09-28T01:38:19.547

我能理解你的困惑。尤其是最近对 Xcode 的更新和新的 LLVM 编译器改变了 ivars 和属性的声明方式。

在“现代”Objective-C（在“旧”Obj-C 2.0 中）之前，您没有太多选择。实例变量曾经在大括号之间的标头中声明`{ }`：

```
// MyClass.h
@interface MyClass : NSObject {
    int myVar;
}
@end 
```

您只能在您的实现中访问这些变量，但不能从其他类访问。为此，您必须声明访问器方法，如下所示：

```
// MyClass.h
@interface MyClass : NSObject {
    int myVar;
}

- (int)myVar;
- (void)setMyVar:(int)newVar;

@end

// MyClass.m
@implementation MyClass

- (int)myVar {
   return myVar;
}

- (void)setMyVar:(int)newVar {
   if (newVar != myVar) {
      myVar = newVar;
   }
}

@end 
```

这样，您也可以从其他类获取和设置此实例变量，使用通常的方括号语法发送消息（调用方法）：

```
// OtherClass.m
int v = [myClass myVar];  // assuming myClass is an object of type MyClass.
[myClass setMyVar:v+1]; 
```

因为手动声明和实现每个访问器方法非常烦人，`@property`并且`@synthesize`引入自动生成访问器方法：

```
// MyClass.h
@interface MyClass : NSObject {
    int myVar;
}
@property (nonatomic) int myVar;
@end

// MyClass.m
@implementation MyClass
@synthesize myVar;
@end 
```

结果是更清晰和更短的代码。访问器方法将为您实现，您仍然可以像以前一样使用括号语法。但除此之外，您还可以使用点语法来访问属性：

```
// OtherClass.m
int v = myClass.myVar;   // assuming myClass is an object of type MyClass.
myClass.myVar = v+1; 
```

从 Xcode 4.4 开始，您不必再自己声明实例变量，也可以跳过`@synthesize`。如果您不声明 ivar，编译器会为您添加它，并且它还会生成访问器方法，而无需您使用`@synthesize`.

自动生成的 ivar 的默认名称是以下划线开头的名称或您的属性。您可以使用更改生成的 ivar 的名称`@synthesize myVar = iVarName;`

```
// MyClass.h
@interface MyClass : NSObject 
@property (nonatomic) int myVar;
@end

// MyClass.m
@implementation MyClass
@end 
```

这将与上面的代码完全相同。出于兼容性原因，您仍然可以在标头中声明 ivars。但是因为你想要这样做（而不是声明属性）的唯一原因是创建一个私有变量，你现在也可以在实现文件中这样做，这是首选方式。

实现文件中的`@interface`块实际上是一个[扩展](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/CustomizingExistingClasses/CustomizingExistingClasses.html#//apple_ref/doc/uid/TP40011210-CH6-SW3)，可用于转发声明方法（不再需要）和（重新）声明属性。例如，您可以在标题中声明一个`readonly`属性。

```
@property (nonatomic, readonly) myReadOnlyVar; 
```

并在您的实现文件中重新声明它，`readwrite`以便能够使用属性语法来设置它，而不仅仅是通过直接访问 ivar。

至于完全在任何`@interface`或`@implementation`块之外声明变量，是的，这些都是纯 C 变量并且工作方式完全相同。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2012-09-28T01:51:29.277

首先，阅读@DrummerB 的答案。它很好地概述了为什么以及您通常应该做什么。考虑到这一点，对于您的具体问题：

```
#import <Foundation/Foundation.h>

// 1) What do I declare here? 
```

这里没有实际的变量定义（如果您确切知道自己在做什么，那么这样做在技术上是合法的，但永远不要这样做）。您可以定义其他几种类型的东西：

*   类型定义
*   枚举
*   外部人员

Extern 看起来像变量声明，但它们只是在其他地方实际声明它的承诺。在 ObjC 中，它们应该只用于声明常量，并且通常只用于字符串常量。例如：

```
extern NSString * const MYSomethingHappenedNotification; 
```

然后，您将在`.m`文件中声明实际常量：

```
NSString * const MYSomethingHappenedNotification = @"MYSomethingHappenedNotification"; 
```

* * *

```
@interface SampleClass : NSObject
{
    // 2) ivar declarations
    // Pretty much never used?
} 
```

正如 DrummerB 所指出的，这是遗留问题。不要在这里放任何东西。

* * *

```
// 3) class-specific method / property declarations

@end 
```

是的。

* * *

```
#import "SampleClass.h"

// 4) what goes here? 
```

外部常量，如上所述。文件静态变量也可以在这里。这些相当于其他语言中的类变量。

* * *

```
@interface SampleClass()

// 5) private interface, can define private methods and properties here

@end 
```

是的

* * *

```
@implementation SampleClass
{
    // 6) define ivars
} 
```

但很少。您几乎总是应该允许 clang (Xcode) 为您创建变量。异常通常围绕非 ObjC ivars（如 Core Foundation 对象，尤其是如果这是 ObjC++ 类的 C++ 对象），或具有奇怪存储语义的 ivars（如由于某种原因与属性不匹配的 ivars）。

* * *

```
// 7) define methods and synthesize properties from both public and private
//    interfaces 
```

一般来说，你不应该再@synthesize。Clang（Xcode）会为你做，你应该让它。

在过去的几年里，事情变得非常简单。副作用是现在存在三个不同的时代（易碎 ABI、非易碎 ABI、非易碎 ABI + 自动合成）。因此，当您看到较旧的代码时，可能会有些混乱。因此，由于简单而引起的混乱：D

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-28T01:23:55.437

我也很新，所以希望我不会搞砸任何事情。

1 & 4：C 风格的全局变量：它们具有文件范围。两者之间的区别在于，由于它们是文件宽的，第一个将可供任何导入标头的人使用，而第二个则不可用。

2：实例变量。大多数实例变量是通过使用属性的访问器合成和检索/设置的，因为它使内存管理变得简单易用，并为您提供易于理解的点表示法。

6：实现 ivars 有点新。这是放置私有 ivars 的好地方，因为您只想公开公共标头中需要的内容，但子类不继承它们 AFAIK。

3 & 7：公共方法和属性声明，然后是实现。

5：私有接口。我总是尽可能使用私有接口来保持干净并创建一种黑盒效果。如果他们不需要知道它，就把它放在那里。我也是为了可读性而这样做的，不知道是否还有其他原因。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-02-16T02:13:17.057

这是在 Objective-C 中声明的各种变量的示例。变量名表明它的访问。

文件：Animal.h

```
@interface Animal : NSObject
{
    NSObject *iProtected;
@package
    NSObject *iPackage;
@private
    NSObject *iPrivate;
@protected
    NSObject *iProtected2; // default access. Only visible to subclasses.
@public
    NSObject *iPublic;
}

@property (nonatomic,strong) NSObject *iPublic2;

@end 
```

文件：Animal.m

```
#import "Animal.h"

// Same behaviour for categories (x) than for class extensions ().
@interface Animal(){
@public
    NSString *iNotVisible;
}
@property (nonatomic,strong) NSObject *iNotVisible2;
@end

@implementation Animal {
@public
    NSString *iNotVisible3;
}

-(id) init {
    self = [super init];
    if (self){
        iProtected  = @"iProtected";
        iPackage    = @"iPackage";
        iPrivate    = @"iPrivate";
        iProtected2 = @"iProtected2";
        iPublic     = @"iPublic";
        _iPublic2    = @"iPublic2";

        iNotVisible   = @"iNotVisible";
        _iNotVisible2 = @"iNotVisible2";
        iNotVisible3  = @"iNotVisible3";
    }
    return self;
}

@end 
```

请注意，iNotVisible 变量在任何其他类中都不可见。这是一个可见性问题，因此用`@property`或`@public`不改变它来声明它们。

`@property`在构造函数中，最好使用下划线访问声明的变量`self`以避免副作用。

让我们尝试访问变量。

文件：Cow.h

```
#import "Animal.h"
@interface Cow : Animal
@end 
```

文件：Cow.m

```
#import "Cow.h"
#include <objc/runtime.h>

@implementation Cow

-(id)init {
    self=[super init];
    if (self){
        iProtected    = @"iProtected";
        iPackage      = @"iPackage";
        //iPrivate    = @"iPrivate"; // compiler error: variable is private
        iProtected2   = @"iProtected2";
        iPublic       = @"iPublic";
        self.iPublic2 = @"iPublic2"; // using self because the backing ivar is private

        //iNotVisible   = @"iNotVisible";  // compiler error: undeclared identifier
        //_iNotVisible2 = @"iNotVisible2"; // compiler error: undeclared identifier
        //iNotVisible3  = @"iNotVisible3"; // compiler error: undeclared identifier
    }
    return self;
}
@end 
```

我们仍然可以使用运行时访问不可见的变量。

文件：Cow.m（第 2 部分）

```
@implementation Cow(blindAcess)

- (void) setIvar:(NSString*)name value:(id)value {
    Ivar ivar = class_getInstanceVariable([self class], [name UTF8String]);
    object_setIvar(self, ivar, value);
}

- (id) getIvar:(NSString*)name {
    Ivar ivar = class_getInstanceVariable([self class], [name UTF8String]);
    id thing = object_getIvar(self, ivar);
    return thing;
}

-(void) blindAccess {
    [self setIvar:@"iNotVisible"  value:@"iMadeVisible"];
    [self setIvar:@"_iNotVisible2" value:@"iMadeVisible2"];
    [self setIvar:@"iNotVisible3" value:@"iMadeVisible3"];
    NSLog(@"\n%@ \n%@ \n%@",
          [self getIvar:@"iNotVisible"],
          [self getIvar:@"_iNotVisible2"],
          [self getIvar:@"iNotVisible3"]);
}

@end 
```

让我们尝试访问不可见的变量。

文件：main.m

```
#import "Cow.h"
#import <Foundation/Foundation.h>
int main(int argc, char *argv[]) {
    @autoreleasepool {
        Cow *cow = [Cow new];
        [cow performSelector:@selector(blindAccess)];
    }
} 
```

这打印

```
iMadeVisible 
iMadeVisible2 
iMadeVisible3 
```

请注意，我能够访问`_iNotVisible2`子类私有的支持 ivar。在 Objective-C 中，所有变量都可以被读取或设置，即使是那些被标记的`@private`，也不例外。

我没有包括关联对象或 C 变量，因为它们是不同的鸟。至于 C 变量，任何定义在外部的变量，`@interface X{}`或者`@implementation X{}`是具有文件范围和静态存储的 C 变量。

I didn't discuss memory management attributes, or readonly/readwrite, getter/setter attributes.

# grails - 存储用户输入数据的替代方法

> ID：12632287
> 
> 赞同：-1
> 
> 时间：2012-09-28T01:12:04.147
> 
> 标签：grails

我目前正在从事一个 grails 项目。我现在要做的是创建一个应用程序，该应用程序可以存储用户输入的值而不将其保存在数据库中，然后访问存储的值以进行进一步的处理。有没有办法实现这一点？

请帮忙。谢谢！

**更新：**

很抱歉这个模糊的问题..通过进一步阅读，我得出了一个解决方案，将用户数据输入放在文件中是这个查询的解决方案。它将保存在非易失性存储中，但不会保存在数据库中。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T01:30:15.077

选择几乎是无穷无尽的。如果不需要重新启动，您可以将数据保存在内存中。否则，您可以将其写入文件等。但这一切都归结为与使用数据库几乎相同的事情。只是好奇——你为什么不想使用数据库？

# c# - 找不到初始化文件 gs_init.ps

> ID：12632291
> 
> 赞同：6
> 
> 时间：2012-09-28T01:12:51.230
> 
> 标签：c#, .net, latex, pdflatex

我有一个使用 ghostscript 的 .net windows 窗体应用程序。只有在 1 台机器上我会收到一条错误消息。在所有其他（100s）上，它都能找到。这是在 Citrix 环境中。

错误是“AFPL Ghostscript 8.53：找不到初始化文件 gs_init.ps”

我检查过了，文件确实存在。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2020-10-01T07:35:33.357

`pdflatex *.tex`在 OSx ( )上编译乳胶文件时，我遇到了类似的问题。问题是`gs`由 MacTeX 安装的。该命令`pdflatex`使用的是 MacTex 安装的命令 gs 而不是`brew`. 我通过运行以下命令解决了这个问题`brew link --overwrite ghostscript`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T19:41:22.183

从 Delphi 应用程序调用 GS dll 时，我遇到了类似的问题；我通过设置环境变量解决了它。

从文档中： Ghostscript 按以下顺序尝试目录：

1.  当前目录（除非被`-P-`开关禁用）；
2.  `-I`命令行中开关指定的目录，如果有的话；
3.  环境变量指定的目录`GS_LIB`（如果有）。

# php - 创建用户注册网页

> ID：12632294
> 
> 赞同：0
> 
> 时间：2012-09-28T01:13:36.403
> 
> 标签：php, mysql, database, forms, user-registration

我已经使用注册表单创建了我的网站，该注册表会在最后验证信息并将其插入数据库。我现在需要做的是让用户能够访问他或她注册的帐户。我和他们一样刚进入用户注册网站，所以我真的不知道我应该做什么或者我应该从哪里开始让我的网站的一半帐户访问启动和运行。

如果有人有一些好的教程，请告诉我，我一直在努力寻找它们，但它们都不是我真正想要的。

目前我的数据库是mysql数据库，我的页面主要是jquery，虽然数据库访问都是通过php完成的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T01:37:42.513

如果这不是您的强项之一，您应该查看 Google Identity Toolkit。他们为您提供了您需要做的所有事情的所有代码，您只需将其粘贴到位并提供您的数据库信息，但它会一步一步地引导您。

[https://developers.google.com/identity-toolkit/v1/javaguide](https://developers.google.com/identity-toolkit/v1/javaguide)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T01:55:01.753

这是我制作的简单编码之一：-

```
 <?php

    // CONNECTION TO DATABASE

$mysqli = new mysqli('localhost','USERNAME','PASSWORD','DATABASE'); 

// CHECK CONNECTION

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$username = $_POST['username'];
$password   = $_POST['password'];

$username = $mysqli->real_escape_string($username);
$password = $mysqli->real_escape_string($password);

// WRITING SQL QUERY
$query = "SELECT * from TABLENAME WHERE username= '".$username."'  AND password= '".$password. "' ";

$stmt = $mysqli->query($query);

    /* determine number of rows result set */
    $row_cnt = $stmt->num_rows;

if ($row_cnt > 0)
{
//IF CORRECT DO WHAT?
}

else
{
//IF WRONG DO WHAT?

}
    ?>

    <br />
    <form action="testexecute.php" method="post">
    <input type="text" name="username" />
    <br />
    <input type="text" name="password" />
    <input type="submit" />
    </form> 
```

# twitter-bootstrap - 是否可以将 id 分配给 Twitter Bootstrap 弹出窗口？

> ID：12632295
> 
> 赞同：8
> 
> 时间：2012-09-28T01:13:41.527
> 
> 标签：twitter-bootstrap

我已经能够显示 Twitter Bootstrap 弹出窗口，但是有没有办法在创建时为它们分配 id，以便我可以操纵它们？

到目前为止，这是我的代码：.js

```
$('#test-button').popover({content:'test.', trigger:'click'});
$('#test-button').popover('show'); 
```

.html

```
<a id='test-button' rel='popover'> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-21T04:26:57.213

有几个选项可以用来获取 popover 元素：

1) 修改[Boostrap Popover](https://github.com/twitter/bootstrap/blob/master/js/bootstrap-popover.js)以接受选项对象上的 id 属性并将其注入模板（行：102）

2) 使用 id 设置弹出框选项的 html 属性，例如

```
$('#test-button').popover({html: true, content: '<div id="test-popover-content">... </div>'}) 
```

然后通过访问弹出容器

```
var testPopover = $('#test-popover-content').parent().parent(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-01T21:59:09.953

最简单的方法是使用所需的 id指定[模板。](http://getbootstrap.com/javascript/#popovers)

> 创建弹出框时要使用的基本 HTML。
> 
> 弹出框的标题将被注入到 .popover-title 中。
> 
> 弹出框的内容将被注入到 .popover-content 中。
> 
> .arrow 将成为弹出框的箭头。
> 
> 最外层的包装元素应该有 .popover 类。

这是默认模板值：

```
 '<div class="popover" role="tooltip">
     <div class="arrow"></div>¸
     <h3 class="popover-title"></h3>
     <div class="popover-content"></div>
  </div>' 
```

你可以像这样使用它

```
$(#your-pop-over).popover({
     template:'<div id="your-id" class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'       
    }); 
```

# azure - ServiceBus WorkerRole 诊断监视器错误

> ID：12632297
> 
> 赞同：1
> 
> 时间：2012-09-28T01:13:53.093
> 
> 标签：azure, azureservicebus

我有一个 WebRole 和 2 个 ServiceBus WorkerRoles 正在运行，在角色的 OnStart 期间我得到以下异常：**[System.ArgumentOutOfRangeException] 容器 log4net 参数名称无效的语法：initialConfiguration**

```
Running Azure:  
ConfigurationManager version=1.7.0.3  
ServiceBus version=1.7.0.1  
Storage version=1.7.0.0 
```

在开发 Azure 环境和云中本地运行时会发生这种情况。所有角色都具有以下配置设置：

```
<LocalStorage name="Log4Net" cleanOnRoleRecycle="true" sizeInMB="2048" /> 
```

所有角色在 OnStart 中都有以下代码：

```
try
{
     // Configure Diagnostics to poll Log file to Blob Storage
     var diagnosticsConfig = DiagnosticMonitor.GetDefaultInitialConfiguration();
     diagnosticsConfig.Directories.ScheduledTransferPeriod = TimeSpan.FromMinutes(5);
     diagnosticsConfig.Directories.DataSources.Add(
         new DirectoryConfiguration
             {
                 Path = RoleEnvironment.GetLocalResource("Log4Net").RootPath,
                 DirectoryQuotaInMB = 512,
                 Container = "wad-WebRolelog4net"
             });
     DiagnosticMonitor.Start("Microsoft.WindowsAzure.Plugins.Diagnostics.ConnectionString", diagnosticsConfig);  
}
catch
{
        OnStop();
        return false;
} 
```

**堆栈跟踪：**

> 在 Microsoft.WindowsAzure.Diagnostics.DiagnosticMonitorConfiguration.Validate(String paramName, Nullable`1 resourceSize) 在 Microsoft.WindowsAzure.Diagnostics.DiagnosticMonitor.StartWithExplicitConfiguration(DiagnosticMonitorStartupInfo startupInfo, DiagnosticMonitorConfiguration initialConfiguration) 在 Microsoft.WindowsAzure.Diagnostics.DiagnosticMonitor.Start(CloudStorageAccount storageAccount, DiagnosticMonitorConfiguration initialConfiguration) 在 Microsoft.WindowsAzure.Diagnostics.DiagnosticMonitor.Start(String diagnosticsStorageAccountConfigurationSettingName, DiagnosticMonitorConfiguration initialConfiguration) 在 CICRMIntegrationQueue.WorkerRole.OnStart() 在 c:\Projects\Client\Connection Intelegence\CICloud\CICRMIntegrationQueue\WorkerRole.cs:line 193

当我在所有 3 个角色中都有一个本地存储和轮询时，似乎会发生此错误`DiagnosticMonitor`，当只定义一个角色时，不会发生错误。

# php - PHP - 即使定义了类，为什么也会出现“从空值创建默认对象”警告？

> ID：12632298
> 
> 赞同：0
> 
> 时间：2012-09-28T01:13:57.273
> 
> 标签：php, class, object, include, warnings

互联网上有很多关于此警告的帖子，其中大多数都得出了相同的解决方案，但该解决方案似乎对我没有帮助。涉及到很多代码，所以我会尝试分享相关的部分，希望这足以找到解决方案。

我有一个 PHP 文件，其中包含另一个 PHP 文件。包含的文件包含以下声明：

```
class LayoutDefinition
{
    public $text;
    public $enabled;
    public $html_prefix;
    public $html_suffix;
    public $max_containers;
    public $html_before_first;
    public $html_between_each;
    public $html_after_last;
    public $layout_id;

}

//Create a new class instance
$clsLayoutDefinition = new LayoutDefinition; 
```

稍后在包含的文件中是以下函数（省略了不相关的代码）：

```
 function GetLayout($LayoutID, $AllDates = 0)
        {

    global $clsLayout;

    //DB connection made here//

    //Clear any previous data we have used.
    unset($arrayLayout);

    $query="..."; //db query set here//

    $result = mysql_query($query);

    if($result == FALSE)
    {
        trigger_error($query);
    }

    if(mysql_num_rows($result) == 0)
    {
        echo("GetLayout Query Error 1a - No results");
        return;
    }

            $ob = mysql_fetch_object($result);

            $clsLayoutDefinition->text = $ob->text; // LINE THAT GIVES ERROR
            $clsLayoutDefinition->enabled = $ob->enabled;
            $clsLayoutDefinition->html_prefix = $ob->html_prefix;
            $clsLayoutDefinition->html_suffix = $ob->html_suffix;
            $clsLayoutDefinition->max_containers = $ob->max_containers;
            $clsLayoutDefinition->container_type = $ob->container_type;
            $clsLayoutDefinition->html_before_first = $ob->html_before_first;
            $clsLayoutDefinition->html_between_each = $ob->html_between_each;
            $clsLayoutDefinition->html_after_last = $ob->html_after_last;
            $clsLayoutDefinition->layout_id = $ob->id;

 // more stuff blah blah blah
} 
```

现在，在原始文件中有一行调用 GetLayout() 函数，并传递了一个参数。但是，我收到“从空值创建默认对象”警告，该警告来自我上面提到的包含文件中的行。

在我看到的关于这种警告的帖子中，解决方案似乎总是在将项目分配给它之前必须为变量名称（在本例中为 $clsLayoutDefinition）设置一个类或其他东西。不幸的是，我似乎在这里这样做，但我仍然收到该警告。

请记住，我正在使用最初由其他人编写的代码，而且我还不太熟悉类/对象的工作方式。

出于可读性和相关性的目的，我省略了一些代码，但如果您认为这里还有其他内容需要查看更多代码，我可以发布更多代码。如果可能的话，请尽量具体说明您是否需要查看特定部分。

无论如何，这是与工作相关的，所以我希望我能尽快找到解决方案。

附带说明一下，当我几天前最初遇到这个问题时，我通过`global $clsLayoutDefinition;`在 GetLayout() 函数的开头设置来“解决”它。然而，今晚在网站上工作时，我遇到了一个非常令人困惑的问题，并将其缩小到那个全局声明。当我删除全局声明时，另一个（更严重的）问题消失了，但随后我收到了警告。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T01:54:18.020

放

```
$clsLayoutDefinition = new LayoutDefinition; 
```

在`GetLayout`函数内部并以以下方式结束函数：

```
 return $clsLayoutDefinition; 
```

调用者应该这样做：

```
$clsLayoutDefinition = GetLayout(...); 
```

# mysql - 设计代表员工入住和退房

> ID：12632302
> 
> 赞同：6
> 
> 时间：2012-09-28T01:14:50.757
> 
> 标签：mysql, database-design

我目前有一个表格，代表员工的开始和停止工作时间：

*   id_employee int
*   签入日期时间
*   结帐日期时间

当员工完成时，它需要更新 check_out。

最好有一张如下表吗？

*   id_employee int
*   date_event 日期时间
*   event_type varchar，值可以是 CHECKIN 或 CHECKOUT。

要确定员工是否已经签入，我必须检查给定员工的最后一条记录是否具有 CHECKIN 的 event_type。此外，不再需要获取记录并更新它。

第二种方法更好吗？或者你有其他建议吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2017-11-01T14:33:27.787

我知道这篇文章已经过时了，但这是为仍在寻找解决方案的人准备的：

**考勤表结构**

```
id              | int
employee_code   | varchar
status          | enum('check_in','check_out')
created         | datetime 
```

**数据**

```
id  employee_code   status          created

1   EMP0001         check_in        2016-08-20 09:30:30
2   EMP0001         check_out       2016-08-20 18:15:00
3   EMP0002         check_in        2016-08-21 14:52:48
4   EMP0002         check_out       2016-08-21 21:09:18 
```

**询问**

```
SELECT 
  A1.employee_code,
  A1.created AS check_in_at,
  A2.created AS check_out_at,
  TIMEDIFF(A2.created, A1.created) AS total_time 
FROM
  tbl_attendances AS A1 
  INNER JOIN tbl_attendances AS A2 
    ON A1.employee_code = A2.employee_code 
    AND DATE(A1.created) = DATE(A2.created) 
WHERE 1 = 1 
  AND A1.status = 'check_in' 
  AND A2.status = 'check_out' 
  AND DATE(A1.created) BETWEEN '2016-08-20' 
  AND '2016-08-21' 
  AND DATE(A2.created) BETWEEN '2016-08-20' 
  AND '2016-08-21' 
ORDER BY A1.created DESC 
```

**结果**

```
employee_code   check_in_at            check_out_at           total_time

EMP0002         2016-08-21 14:52:48    2016-08-21 21:09:18    06:16:30
EMP0001         2016-08-20 09:30:30    2016-08-20 18:15:00    08:44:30 
```

`AND A1.employee_code = 'EMP0001'`对于特定员工添加`WHERE`条款

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-28T11:27:13.640

像往常一样，“这取决于”。

选项 1 更易于构建，也更易于查询。找出谁签入但没有签出是一个简单的查询；查找每位员工的总工作时间也很简单。这种简单性可能意味着普通查询会更快。我看到的唯一缺点是它更难扩展。例如，如果您想为“午休”捕获不同的事件类型，则必须添加额外的列。

选项 2 更灵活 - 您可以在不更改架构的情况下添加新的事件类型。然而，简单的查询——员工 x 在 6 月份工作了多少小时——是相当棘手的。您需要付出巨大的额外努力才能获得灵活性。

所以，这取决于你所说的“更好”是什么意思。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-28T09:28:49.997

## 格式 #2 更好，因为：

1.  这个表只是一个打卡记录条目——即使它有异常也没关系。
2.  展望未来，此表将扩展，例如您可能希望再引入两个事件 INTERVAL_OUT、INTERVAL_IN。第二种格式将保持简单。
3.  如果可能，请使用 event_type_id 而不是 event_type 和另一个表 event_type 或只是一个常量数组，例如。

    array_event_name = 数组 (1=>CHECKIN, 2=>CHECKOUT, 3=>INTERVAL_IN, 4=>INTERVAL_OUT)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-28T01:18:06.310

我会选择第二个。

但是，主要问题和业务规则将是相同的，并且可以通过任何一种方法来回答。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-28T03:23:12.563

## 选项1

使用第一个选项，数据库本身可以更好地保护自己免受一些异常¹。一些异常仍然是可能的²，但这是一个开始。

*另一方面*，InnoDB 表是集群的，集群表中的二级索引可能很昂贵（请参阅本文中的“集群的缺点” [）](http://www.ovaistariq.net/521/understanding-innodb-clustered-indexes/)，如果您需要在`check_out`.

## 选项 #2

使用第二个选项，即使是可以通过数据库设计纯粹以声明方式防止的异常，您也依赖于命令式代码。

从好的方面来说，您不太可能需要二级索引。

## 选择

所以简而言之，除非您需要二级索引，否则请使用第一个选项。如果您确实需要二级索引，则取决于您希望实现的[索引类型，您可以选择任一选项。](http://use-the-index-luke.com/sql/glossary/covering-index)

* * *

*¹如不先签入就签出。*

*²如再次入住、未先退房、重叠“进站”等……*

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-28T13:35:59.503

我会选择这里的第一个选项。将两个时间戳放在一行中将增加您的搜索时间，并使您的计算更容易。

假设您要计算员工一天的工作时间。您的搜索将在匹配的第一行停止，您将获得所有必需的数据。您不必深入挖掘，选项 2 并非如此。选项 1 还通过每次签入/签出仅使用 1 行来减小表大小。

选项 2 确实有一个优势。签出时，您的数据库必须进行搜索以更新选项 1 的数据。对于选项 2，它只是一个写入。

考虑到您将多次搜索数据这一事实，您可以放弃直接插入的优势以获得更好的结构和更快的搜索。虽然最终的选择取决于你。

祝你好运！

# asp.net - 从 .aspx 站点调用代码隐藏方法

> ID：12632303
> 
> 赞同：0
> 
> 时间：2012-09-28T01:14:59.290
> 
> 标签：asp.net, methods, code-behind

我想从代码隐藏文件中调用一个方法。我已经阅读了所有线程/帖子等，但它不起作用！

我尝试过了

*   调用 Image1.DataBind(); Image1.ImageUrl="test.jpg"
*   调用 OnDataBinding="methodname" 和正确的方法
*   调用 ImageUrl='<%# GetImage(1) %> 或 <%= GetImage(1) %>

这是我文件中的一些代码片段。

**ASPX 网站：**

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Abstimmung.aspx.cs" Inherits="Schulsprecher.Abstimmung" %> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
.
.
<form id="form1" runat="server">
.
.
<asp:Image ID="Image1" runat="server" Width="250px" Height="300px" ImageUrl='<%# GetImage(1) %>' /> 
```

**代码隐藏文件**

```
protected string GetImage(string index)
{
    return "test.jpg";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T01:56:53.467

如果您可以将其更改为普通的 html 图片标签，您可以这样做

```
<img ID="Image2" width="250" height="300" src='<%= GetImage("1") %>' /> 
```

你应该使用它是强制性的`<asp:Image />`吗？我试过没有成功

# scalability - 使用 MQ 在 DB 中存储数据是个好主意吗？

> ID：12632305
> 
> 赞同：0
> 
> 时间：2012-09-28T01:15:03.000
> 
> 标签：scalability, rabbitmq, message-queue

我将使用 rabbitMQ 作为消息代理并将大多数脚本切换为将数据发送到队列而不是执行直接写入/读取。消费者将获取这些消息并执行相应的操作。在我的梦想中，这会给我更多的灵活性来选择数据库引擎、应用程序级别的分片等等。但一般来说这是个好主意吗？还是我错过了什么？当前的写入负载为 mysql 的约 15k 插入/删除和 redis 实例的 30-50k 集。读取负载是相同的 ~15-20k 选择，50-70k 用于 redis。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T05:26:40.297

您将面临的最大问题是您的数据库写入将被异步处理。如果客户端将数据写入数据库，然后立即将其读回，则该值可能不是它最初插入的值，因为 Rabbit 队列可能非常繁忙或缓慢，从而延迟了更新操作。或者管理员可能不小心清除了您的队列，然后您将让所有这些客户认为他们的事务已提交，但没有任何内容被存储。

这听起来像是过早优化的经典案例。这是寻找问题的解决方案，您可能应该避免这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T08:52:02.450

使用 amqp，您可以使用 RPC 方式运行非异步操作，使用这种架构，您应该找出与异步操作相关的所有问题。

# php - .php 文件更改为 UTF-8

> ID：12632306
> 
> 赞同：-1
> 
> 时间：2012-09-28T01:15:04.250
> 
> 标签：php, utf-8

我将 norepad 中的一些文件更改为 UTF-8，而 firefox 显示的字符非常奇怪。我在 .php 文件中有西里尔字符，如果我没有用 UTF-8 保存文件，我会得到 '?????'

但是我现在遇到的问题是 Firefox 显示 stange 字符。谁能帮我吗？ ![在此处输入图像描述](../Images/6e1c5d08d108b2dcbd7e48977220f169.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T01:32:42.233

检查以确保您的网络服务器实际上将字符集设置为 UTF-8。您可以使用浏览器开发人员工具检查这一点。需要检查的一些事项：

在 php.ini 中：

```
default_charset = "utf-8" 
```

设置标题的php代码：

```
header('content-type: text/html; charset: utf-8'); 
```

# html - 出现一些不在本页代码中的文字

> ID：12632307
> 
> 赞同：-1
> 
> 时间：2012-09-28T01:15:10.823
> 
> 标签：html

我正在制作一个页面，在这个

[http://paypercall.org/app-install/ie-restart.html](http://paypercall.org/app-install/ie-restart.html)

在页面中上下出现奇怪的文字

<<<<<<< 头 <<<<<<< 头

======= ======= >>>>>>> ddc730db718a7c5f4a510aa375ac8aa91f1e46d3 测试无样式表、无页脚和无页眉 >>>>>> b2d2e680fa867e39690b459ce45b597e67fe96c9

我不知道为什么会这样，在代码 html 中这些文本没有出现

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T01:36:54.777

在页面的html源代码中，你可以找到那些无意义的代码。检查您的 html 源代码并重新上传 html 页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T01:25:17.953

意外的文本肯定存在于发送到浏览器的源代码中 - 您可以通过从您选择的浏览器中执行“查看源代码”来验证这一点。

这看起来像一个差异输出，当您提交版本控制系统时是否可能存在冲突？如果是这样，看起来该页面在冲突解决之前已上传。

# .net - 从文件中获取签名

> ID：12632309
> 
> 赞同：0
> 
> 时间：2012-09-28T01:15:26.267
> 
> 标签：.net, openssl, smime

我有一个 php 代码，它使用这样的代码获取文件的签名

```
shell_exec("openssl smime -binary -sign".
    " -certfile '".$keyPath."/WWDR.pem'".
    " -signer '".$keyPath."/passcertificate.pem'".
    " -inkey '".$keyPath."/passkey.pem'".
    " -in '".$this->workFolder."/manifest.json'".
    " -out '".$this->workFolder."/signature'".
    " -outform DER -passin pass:'$pass'"); 
```

我需要一个相同的纯托管 C# 代码吗？知道怎么做吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T03:34:16.897

我不得不去访问[OpenSSL 文档](http://www.openssl.org/docs/apps/smime.html)，看看你在这里做什么，这似乎是使用[PKCS#7](http://en.wikipedia.org/wiki/Cryptographic_Message_Syntax)签署文档。

虽然您当然可以继续使用来自 .Net 的 OpenSSL 和 shell 使用[Process.Start](http://msdn.microsoft.com/en-us/library/53ezey2s.aspx)，但还有更好的选择：

*   OpenSSL 有一个名为[OpenSSL.Net](http://openssl-net.sourceforge.net/)的托管包装器。
*   [BouncyCastle](http://www.bouncycastle.org/csharp/)有一些 PKCS#7 的东西。
*   .Net 具有[System.Security.Cryptography.Pkcs](http://msdn.microsoft.com/en-us/library/6see7k14.aspx)命名空间。

也许比我更熟悉这一点的人可以逐字翻译您的 OpenSSL 声明。与此同时，在 google、msdn 和 stackoverflow 上搜索这些内容。有很多示例，但这实际上取决于您想要完成的任务。

# c# - 2 个 android radiogroups 水平合二为一

> ID：12632316
> 
> 赞同：0
> 
> 时间：2012-09-28T01:16:44.440
> 
> 标签：c#, android, mono

我有 2 个广播组，我想将它们合并为一个。我希望它们是水平的，而不是垂直的。有什么方法可以包装或合并它们吗？我想不通。我刚开始学习编程。我使用的语言是 C# 这是我的代码：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:minWidth="25px"
    android:minHeight="25px">
    <LinearLayout
        android:orientation="horizontal"
        android:minWidth="25px"
        android:minHeight="25px"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/linearLayout1">
        <RadioGroup
            android:minWidth="25px"
            android:minHeight="25px"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:id="@+id/radioGroup1">
            <RadioButton
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:checked="true"
                android:text="RadioButton"
                android:id="@+id/radioButton1" />
            <RadioButton
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="RadioButton"
                android:id="@+id/radioButton2" />
            <RadioButton
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="RadioButton"
                android:id="@+id/radioButton3" />
        </RadioGroup>
        <RadioGroup
            android:minWidth="25px"
            android:minHeight="25px"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:id="@+id/radioGroup2">
            <RadioButton
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:checked="true"
                android:text="RadioButton"
                android:id="@+id/radioButton4" />
            <RadioButton
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="RadioButton"
                android:id="@+id/radioButton5" />
            <RadioButton
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="RadioButton"
                android:id="@+id/radioButton6" />
        </RadioGroup>
    </LinearLayout>
</LinearLayout> 
```

# php - php检查url是否存在

> ID：12632319
> 
> 赞同：0
> 
> 时间：2012-09-28T01:16:52.287
> 
> 标签：php, url

是否有一种 php 方法来检查该 url 现在是否正在使用？

例如我有

```
http://site.com/login.php?action=submit 
```

使用 isset($_GET[action])

我们可以检查 url 中是否存在 action

但我怎样才能检查是否

```
login.php 
```

是活动网址吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T01:23:29.230

像这样的东西：

```
if ( '/login.php' == $_SERVER['REQUEST_URI'] ) {
    // This is login.php
} else {
    // This is not login.php
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T01:23:22.847

您可以测试 $_SERVER['REQUEST_URI'] 以查看它是否包含 login.php。它包含当前的 URI。在此处查看 $_SERVER 的 PHP 手册：http: [//php.net/manual/en/reserved.variables.server.php](http://php.net/manual/en/reserved.variables.server.php)

# solr - 太阳黑子 solr 404 错误

> ID：12632320
> 
> 赞同：3
> 
> 时间：2012-09-28T01:17:17.997
> 
> 标签：solr, sunspot

我正在更新我们的应用程序服务器，但遇到了一个我从未见过的问题。

我已确保服务器已启动并正在运行，我可以查看管理 Web 界面。

当我尝试使用 rails 控制台和此命令 User.index 索引数据时，我从 sunspot/solr 收到以下错误

```
RSolr::Error::Http: RSolr::Error::Http - 404 Not Found
Error: NOT_FOUND
Backtrace: /home/ubuntu/.rvm/gems/ruby-1.9.2-p290/gems/rsolr-1.0.8/lib/rsolr/client.rb:230:in `adapt_response'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290/gems/rsolr-1.0.8/lib/rsolr/client.rb:167:in `execute'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290/gems/rsolr-1.0.8/lib/rsolr/client.rb:161:in `send_and_receive'
(eval):2:in `post'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290/gems/rsolr-1.0.8/lib/rsolr/client.rb:67:in `update'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290/gems/rsolr-1.0.8/lib/rsolr/client.rb:87:in `add'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290/gems/sunspot-1.3.3/lib/sunspot/indexer.rb:101:in `add_documents'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290/gems/sunspot-1.3.3/lib/sunspot/indexer.rb:26:in `add'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290/gems/sunspot-1.3.3/lib/sunspot/session.rb:91:in `index'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290/gems/sunspot-1.3.3/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `index'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290/gems/sunspot-1.3.3/lib/sunspot.rb:184:in `index'
from /home/ubuntu/.rvm/gems/ruby-1.9.2-p290/gems/rsolr-1.0.8/lib/rsolr/client.rb:230:in `adapt_response'
from /home/ubuntu/.rvm/gems/ruby-1.9.2-p290/gems/rsolr-1.0.8/lib/rsolr/client.rb:167:in `execute'
from /home/ubuntu/.rvm/gems/ruby-1.9.2-p290/gems/rsolr-1.0.8/lib/rsolr/client.rb:161:in `send_and_receive'
from (eval):2:in `post'
from /home/ubuntu/.rvm/gems/ruby-1.9.2-p290/gems/rsolr-1.0.8/lib/rsolr/client.rb:67:in `update'
from /home/ubuntu/.rvm/gems/ruby-1.9.2-p290/gems/rsolr-1.0.8/lib/rsolr/client.rb:87:in `add'
from /home/ubuntu/.rvm/gems/ruby-1.9.2-p290/gems/sunspot-1.3.3/lib/sunspot/indexer.rb:101:in `add_documents'
from /home/ubuntu/.rvm/gems/ruby-1.9.2-p290/gems/sunspot-1.3.3/lib/sunspot/indexer.rb:26:in `add'
from /home/ubuntu/.rvm/gems/ruby-1.9.2-p290/gems/sunspot-1.3.3/lib/sunspot/session.rb:91:in `index'
from /home/ubuntu/.rvm/gems/ruby-1.9.2-p290/gems/sunspot-1.3.3/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `index'
from /home/ubuntu/.rvm/gems/ruby-1.9.2-p290/gems/sunspot-1.3.3/lib/sunspot.rb:184:in `index'
from /home/ubuntu/.rvm/gems/ruby-1.9.2-p290/gems/newrelic_rpm-3.3.2.1/lib/new_relic/agent/method_tracer.rb:491:in `block in index_with_trace_SolrClient_Sunspot_index'
from /home/ubuntu/.rvm/gems/ruby-1.9.2-p290/gems/newrelic_rpm-3.3.2.1/lib/new_relic/agent/method_tracer.rb:242:in `trace_execution_scoped'
from /home/ubuntu/.rvm/gems/ruby-1.9.2-p290/gems/newrelic_rpm-3.3.2.1/lib/new_relic/agent/method_tracer.rb:486:in `index_with_trace_SolrClient_Sunspot_index'
from /home/ubuntu/.rvm/gems/ruby-1.9.2-p290/gems/sunspot_rails-1.3.3/lib/sunspot/rails/searchable.rb:256:in `block (2 levels) in solr_index'
from /home/ubuntu/.rvm/gems/ruby-1.9.2-p290/gems/sunspot_rails-1.3.3/lib/sunspot/rails/searchable.rb:345:in `solr_benchmark'
from /home/ubuntu/.rvm/gems/ruby-1.9.2-p290/gems/sunspot_rails-1.3.3/lib/sunspot/rails/searchable.rb:255:in `block in solr_index'
from /home/ubuntu/.rvm/gems/ruby-1.9.2-p290/gems/activerecord-3.1.4/lib/active_record/relation/batches.rb:69:in `find_in_batches'
from /home/ubuntu/.rvm/gems/ruby-1.9.2-p290/gems/activerecord-3.1.4/lib/active_record/base.rb:443:in `find_in_batches'
from /home/ubuntu/.rvm/gems/ruby-1.9.2-p290/gems/sunspot_rails-1.3.3/lib/sunspot/rails/searchable.rb:254:in `solr_index'
from (irb):2
from /home/ubuntu/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.1.4/lib/rails/commands/console.rb:45:in `start'
from /home/ubuntu/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.1.4/lib/rails/commands/console.rb:8:in `start'
from /home/ubuntu/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.1.4/lib/rails/commands.rb:40:in `<top (required)>'
from script/rails:6:in `require'
from script/rails:6:in `<main>' 
```

# python - pyglet的IDE？

> ID：12632323
> 
> 赞同：0
> 
> 时间：2012-09-28T01:17:37.900
> 
> 标签：python, windows, ide, pyglet

我开始在**Windows中使用****pyglet**进行编码。我通常依赖 Spyder 作为**IDE**，但它似乎不喜欢 pyglet。那么在 Windows 中编码/运行 pyglet 的便捷方法是什么？您的最小开发设置是什么？缺少明显的最小设置，例如在 Console2 上运行代码或使用 IDLE。

 ***** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T14:14:18.247

如果您只专门使用 Windows，还有另一个不错的选择：Visual Studio using the [Python Tool for Visual Studio](http://pytools.codeplex.com/)。

您不需要完整的 Visual Studio 包，它可以与 Microsoft 称为 Integrated Shell 的精简版一起使用，该版本可免费使用（如免费；请参阅 python 工具网站上的说明）。该插件本身是免费的（如 Apache 许可证）。

在切换之前我自己使用了 spyder IDE。功能方面我相信有相当的可比性：语法突出显示、代码完成、集成控制台和完整的调试器用户。不同之处在于 python 工具完美地集成到标准 VS 调试工作流中，使用断点，在调试过程中的任何时候观察和评估变量和函数等。如果你曾经在 Visual Studio 中工作过，你会喜欢它的。我遇到的最好的 Python 调试器。

我过去用它来调试 Panda3D 应用程序（python 的 3D 游戏引擎）。由于 pyglet 也在使用 openGL，它应该可以工作，但我还没有尝试过。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T07:36:56.160

我使用[pyscripter](http://code.google.com/p/pyscripter/)。它是免费的，并且具有许多有用的功能，例如预测文本，并且可以与 pyglet 配合使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-23T09:58:21.993

我目前使用[PyCharm](http://www.jetbrains.com/pycharm/)（还有一个免费的社区版）。在其他有用的功能（调试器、版本控制等）中，它提供了在 IDE 中查看图像，这在游戏编程方面特别有用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-28T01:23:43.130

你看过[Pydev](http://pydev.org/)的 Eclipse 吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-01T06:07:02.390

pycharm，我强烈推荐。免费版本有你需要的一切，而且组织得非常好。我用它所有的时间。您需要将 pyglet 文件复制到每个项目中。尽管如此，它仍然易于使用且功能强大，并附带了许多好的工具。****

# c++ - 如何使用指针访问动态结构数组的成员？

> ID：12632329
> 
> 赞同：1
> 
> 时间：2012-09-28T01:18:27.960
> 
> 标签：c++, arrays, pointers, structure, dynamic-memory-allocation

这是主要结构：

```
#include <iostream>
using namespace std;

struct CandyBar 
{
    char brand_name[30];
    float candy_weight;
    int candy_calories;
};

int main()
{
    CandyBar * snack = new CandyBar [3];

    return 0;
} 
```

我设法在 3 个元素的数组中初始化动态分配的 3 个结构。我试图通过以下方式访问这些结构：

```
snack[0]->brand_name = "Whatever"; 
```

没有结果，即使使用其他方法：

```
(*snack[0]).brand_name = "Whatever"; 
```

我真的不知道，因为我已经研究了几天。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T01:20:09.487

由于`snack`是结构数组，因此只需使用`snack[0].brand_name`.

您也不能仅通过`=`在 C 中使用来复制字符串。请`strcpy`改用：

```
strcpy(snack[0].brand_name, "Kitkat"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T01:38:17.533

在 C++ 中，字符串是数组，不能使用`=`. 尝试：

```
strcpy(snack[0].brand_name, "Whatever"); 
```

# php - SQL SELECT 和 GROUP BY Month 在 9+ 个月前没有返回任何结果

> ID：12632331
> 
> 赞同：0
> 
> 时间：2012-09-28T01:18:39.677
> 
> 标签：php, mysql, date

我在这个 MySQL 查询中收到了一个奇怪的结果。

我正在尝试返回按月分组的“订单”。

```
SELECT DATE_FORMAT(date_of_sale, '%b') AS date, SUM(quantity) AS items FROM order_elements JOIN orders ON order_elements.order_ref = orders.order_id WHERE cur_status = 1 AND quantity > 0 AND MONTH(date_of_sale) BETWEEN MONTH(CURDATE() - INTERVAL 8 MONTH) AND MONTH(NOW()) GROUP BY MONTH(date_of_sale) ORDER BY MONTH(date_of_sale) DESC 
```

当我运行查询以获取从现在到**8**个月前的订单时，我得到以下结果：

```
==================
| date   | items |
==================
| Sep    | 95    |
| Aug    | 110   |
| Jul    | 106   |
| Jun    | 110   |
| May    | 100   |
| Apr    | 130   |
| Mar    | 100   |
| Feb    | 94    |
| Jan    | 7     |
=================== 
```

1 月 30 日是我最早订购的日期，也是第一个日期。其他任何 date_of_sale 都晚于 1 月 30 日。

当我从现在到**9**个月前运行相同的查询时，我没有得到任何结果。

我认为这可能与 9 个月前等于 12 月有关，它落在不同的年份并导致某种问题，但我不确定。有谁知道为什么再搜索一个月不会返回任何结果？是否与一月之后没有数据有关，或者月份是不同年份的？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T01:23:43.067

当您查询此内容时：

```
BETWEEN MONTH(CURDATE() - INTERVAL 9 MONTH) AND MONTH(NOW()) 
```

您从第 12 个月到第 9 个月进行查询。因为 12 大于 9，所以不会有任何结果。但是当你查询这个时：

```
BETWEEN MONTH(CURDATE() - INTERVAL 8 MONTH) AND MONTH(NOW()) 
```

您从第 1 个月到第 9 个月进行查询。

解决方案是您还需要在查询中包含年份，而不仅仅是月份的数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T01:26:33.700

您是否尝试过更改处理两个值之间月份的 where 子句？我敢打赌，如果你把它改成只处理纯日期，你应该没问题。

# java - 如何在我的类中使用与我在内部使用的另一个类的方法相同的名称？

> ID：12632332
> 
> 赞同：0
> 
> 时间：2012-09-28T01:18:46.843
> 
> 标签：java

我目前正在为学校做一个项目，但被困在一个特定的部分。

我们正在创建一个`SortedList`应该实现 java 接口 Collection 的类。

问题是，我们的讲师说我们可以使用其他类的方法，例如`ArrayList`或`LinkedList`来定义我们必须手动定义的大多数方法。

如何使用类中的方法在我`size()`的类`ArrayList`的 size 方法中使用`SortedList`？

我想我只是想知道如何创建一个与类中的方法同名的方法，同时从其中的`ArrayList`类中调用`ArrayList`该方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T01:22:48.970

像这样的东西

```
public class SortedList<T> {

  //Used this List as part of the implementation of SortedList
  private List<T> myList = new ArrayList<T>();

  /**
   * Here you implement your SortedList size() method by using your
   * List<Integer> myList as the implementation of it.
   */
  public int size() {
       return myList.size();
  }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T01:23:07.823

所以，

```
ArrayList yourArrayList = new ArrayList(); // creation of instance of ArrayList
SortedList yourSortedList = new SortedList(); // creation of instance of SortedList

yourArrayList.size() // will access the size() method of ArrayList
yourSortedList.size() // will access the size() method of SortedList 
```

类类型的对象将访问它们各自类的方法。

# delphi - 用于 Delphi 的 Vista/7 CoreAudio 帕斯卡文件

> ID：12632345
> 
> 赞同：0
> 
> 时间：2012-09-28T01:20:49.610
> 
> 标签：delphi, windows-7, windows-vista, core-audio

我一直在四处寻找CoreAudio pascal 文件，但找不到它们。我搜索了 Rad Studio XE2 源目录无济于事。

在 Google 上，我找到了一些部分文件，但没有找到整个包或似乎包含 IAudioSessionManager2。

是否有任何定义包含 Win 7 中的新功能，或者我必须自己进行转换？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T05:17:51.967

[他们](http://code.google.com/p/mfpack-media-foundation/source/browse/trunk/MFPACK/CoreAudio/Docs/Core+Audio+headers.txt?r=128)在 Google Code上的[MFPack](http://code.google.com/p/mfpack-media-foundation/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-13T20:46:11.227

MfPack 已移至 SourceForge ( [http://sourceforge.net/projects/mfpack](http://sourceforge.net/projects/mfpack) )。谷歌放弃了他们的源代码托管服务。

# delphi - 仅使用 Delphi 重新绘制表单的一小部分？

> ID：12632346
> 
> 赞同：2
> 
> 时间：2012-09-28T01:20:50.593
> 
> 标签：delphi, redraw

在我的程序中，我有一个`TPanel`从上面滑出的自定义，上面有按钮和图像。它滑出很好，但是当我去隐藏它时，它很慢。我尝试了几种方法，结果都是一样的。如果你注意到下面我尝试了重绘，我认为我可以重绘尾随的矩形，但是这个调用会重绘整个表单，就像我尝试过的所有其他方法一样。我什至尝试使用滚动。我说错了还是有更好的方法来更新需要在面板向上移动时更新的表单部分？

```
while z>mypanels[panel].Fstarttop do
begin
   if z-x<mypanels[panel].Fstarttop then z:=mypanels[panel].Fstarttop else z:=z-x;
   updaterect:=Rect(mypanels[panel].left,z+mypanels[panel].height,mypanels[panel].left+mypanels[panel].width,mypanels[panel].top+mypanels[panel].height);
   mypanels[panel].top:=z;
   //mypanels[panel].Repaint;
   //Application.ProcessMessages;  
   //mypanels[panel].ScrollBy(0,-x);
   //InvalidateRect(form1.Handle,@updaterect,FALSE);
   //Application.ProcessMessages;
   //RedrawWindow(form1.Handle,@updaterect, 0, RDW_UPDATENOW);
   //form1.refresh;
end; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T05:28:03.033

移动面板不会花费很长时间。此外，要更新面板的父级，调用`Form.Update`应该就可以了。要强制只重绘表单的一部分，调用`InvalidateRect`应该做的，就像你已经做的那样（尽管尝试清除背景）。

延迟和/或弄脏的可能原因是：

*   你做了一些广泛的自己的绘画`Form.OnPaint`，
*   `Anchors`, `Align`, 和/或`Constraints`面板和/或形式相互矛盾或导致连锁反应（在这种情况下，尝试`DisableAlign`和`EnableAlign`），
*   该表单不是面板的直接父级，
*   面板位于其他控件之上，
*   你的`updaterect`变量是新的矩形而不是前一个，
*   您的代码和/或调用例程中的其他内容，
*   以上任意组合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T03:29:18.720

另一种方法是使用 Windows 更新区域。您的 Tpanel 作为“句柄”属性，可以与 invalidateRect 一起使用。

通常 vcl 将重绘：
- 面板的背景
- 只有无效矩形中的控件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T01:46:14.150

尝试将父 TForm 的 DoubleBuffered 属性设置为 True。这将有助于降低重绘的执行成本，并可能减少特写动画的抖动。

# web-services - 但说真的.... ASP.NET WebAPI 实现示例，包括 OAuth

> ID：12632348
> 
> 赞同：10
> 
> 时间：2012-09-28T01:21:17.450
> 
> 标签：web-services, oauth, asp.net-web-api

我真的对 WCF 示例不感兴趣。我发现的 DotNetOpenAuth 实现也不[完整](https://github.com/DavidChristiansen/DotNetOpenAuth.WebAPI.40)或[假设为 WCF](https://github.com/DotNetOpenAuth/DotNetOpenAuth/tree/master/samples)。我发现[Thinkitecture.IdentityServer.45](https://github.com/thinktecture/Thinktecture.IdentityServer.45)不是轻量级的，并不适合构建到我的新 WebAPI 项目中。我什至发现了几乎没有真实信息的[Oauth2DotNet项目。](http://nuget.org/packages/OAuth2DotNet)

微软已经发布了[一些](http://nuget.org/packages/Microsoft.AspNet.WebPages.OAuth)与 Oauth/OpenID 相关的项目，但我什至也找不到合适的文档。

我的项目：创建一个新站点，为使用 .NET 4.5 和 ASP.NET WebAPI 的授权移动应用程序提供“REST 风格”的 API 服务。由于这些应用程序不一定要代表用户行事，我们相信“2-legged” Oauth 是可以接受的，因为我们希望能够在特定应用程序退出时关闭并拒绝访问我们的 API手。

在所有这些中，我花了一周的时间试图让一个基本的实现工作，但甚至无法识别各种令牌类型以及令牌本身的组成部分。这真的不应该那么困难，我发现缺乏有关主题的基本信息非常令人沮丧。是的，规格已经发布，但它们没有被提炼并准备好实施。

我想要一个理想的解决方案来扩展以与 WepAPI 的 Authenticate 属性正确集成，可能作为 ActionFilter/AuthorizationFilter 以便我可以在尝试授权访问我的一个或多个优雅的 REST-ful API 方法之前识别和验证远程应用程序.

“开始”在哪里？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-28T06:57:37.267

基本上，[HMAC 身份验证](http://en.wikipedia.org/wiki/Hash-based_message_authentication_code)足以解决您的问题，请在此处查看：

[如何保护 ASP.NET Web API](https://stackoverflow.com/questions/11775594/how-to-secure-an-aspnet-mvc-web-api/11782361#11782361)

和：

[Web API 创建 API 密钥](https://stackoverflow.com/questions/11830338/mvc-4-web-api-creating-api-keys/11831391#11831391)

# php - PHP Mail函数发送错误时间的消息？

> ID：12632350
> 
> 赞同：0
> 
> 时间：2012-09-28T01:21:43.420
> 
> 标签：php, email, time

我正在使用以下代码发送消息。我的手机、服务器和 Mac 上的当前时间是晚上 9:20。我执行此代码，然后在手机上接收和发送电子邮件。但它说它是在 9 点 23 分获得的。未来三分钟后...这是怎么回事

```
$to  = 'me@domain.org' . ', '; // note the comma
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
$headers .= 'From: Check-in Report <reports@fsbcheck.in>' . "\r\n";

// Mail it
mail($to, $subject, $message, $headers); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T01:28:18.303

该时间戳 (9:23) 在 SMTP 服务器报告发送时设置。无论您的外发邮件服务器在哪里，该机器上的系统时钟都需要调整。

# iphone - 数据正在消失

> ID：12632351
> 
> 赞同：-1
> 
> 时间：2012-09-28T01:22:06.653
> 
> 标签：iphone, ios, xcode, uitextfield, tableview

我的示例项目有一个注册表单。我在表格视图中设计了注册表单。它由八个文本字段组成，并在我输入数据时注册数据。但是，当我滚动视图时，注册表单视图文本字段中的数据会消失。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T01:32:24.597

你处理`tableView:cellForRowAtIndexPath:`错了。听起来您每次请求一个新单元格时都在创建一个新单元格（带有一个新的文本字段）。您必须存储每一行​​或整个单元格的文本字段，并在每次请求特定行时返回相同的字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T04:17:05.517

```
//first allocate the view only cell is empty,and  assign values after if (cell == nil){} loop using tag

      - (UITableViewCell *)tableView:(UITableView *)tableview cellForRowAtIndexPath:(NSIndexPath *)indexPath {

         static NSString *CellIdentifier =@"Cell";
         UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

           if (cell == nil)
         {
           cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
             lable.frame=your frame;
            [cell.contentView addSubview :lable];
            titleLbl.frame=your frame;
            [cell.contentView addSubview :titleLbl];

                }
                        UILabel *titleLbl = (UILabel *)[cell viewWithTag:101];
                        UITextField *txtfield = (UITextField *)[cell viewWithTag:102];

                        titleLbl.text = @"";

    } 
```

# jquery - Jquery Jsonp：请求失败：Internet Explorer 9 及更低版本中的解析器错误

> ID：12632356
> 
> 赞同：3
> 
> 时间：2012-09-28T01:22:42.020
> 
> 标签：jquery, ajax, jsonp

我正在使用 JSONP 进行跨域请求。该脚本在 Firefox 和 Chrome 中完美运行，但在 IE 9 及以下版本中出现以下错误：

```
Request failed: parsererror
Error: jQuery1720027601653975035778_1348794800150 was not called 
```

我尝试将 dataType 设置为`jsonp`to`text/json`但它在 Chrome 或 Firefox 中不起作用，并且在 IE 中调用成功时我得到一个空响应。

### 代码

```
$.ajax({ // the function that does everything
            type: "GET",
            url: "http://example.com/products.php?size=" + search_size + "&manufacturer=" + search_manufacturer + "&gender=" + search_gender + "&instock=Y&startat=0&results=30&callback=?", //&callback=? is required to send the offsite server the data. ? is automatically filled in by AJAX
            async: true,
            cache: false,
            contentType: "text/json; charset=utf-8",
            dataType: "jsonp",
            error: function(xhr, textStatus, errorThrown){      // textStatus = Error code if it fails (parsererror = json handshake fail)
                $(datastatus).empty() ;
                $(datastatus).append("<b>Request failed: </b>" + textStatus + "<br>" + errorThrown); // Puts the error code in a special div.                                   
            },
            success: function(data, textStatus){ // data = the json array
                $(datastatus).empty();
                $(datastatus).append("<b>Request succeeded: </b>" + textStatus);

                $("#output").empty(); // empties the product list in preperation to be filled
                alert(data);
                $.each(data, function(index, value) { // cycles through every value in the array. Everything inside the Curly brackets will be run for each object in the array.
                    var hideproduct = value.hideproduct; // value.item is simplified down
                    var productcode = value.productcode;
                    var productname = value.productname;
                    var productprice = value.productprice;
                    var listprice = value.listprice;
                    var photoscode = value.photos_cloned_from;
                    var childof = value.ischildofproductcode;
                    var ProductDescriptionShort = value.productdescriptionshort; 
                    if (ProductDescriptionShort == undefined){
                        var ProductDescriptionShort = ""// changes "undefined" to "" (blank) so customers wont see that error
                    };
                    childcheck = childof; // checks to see if the product is a child
                    if (childcheck == ""){
                    var childof = productcode // changes the product code value to match the child productcode
                    };
                    $("#output").append("<div class='product' code='" + productcode + "'>"
                        + "<a href='http://www.skates.com/-p/" + productcode + ".htm' title='" + productname + ", " + productcode + "'>" + productname + "</a><br>"
                        + "<span><font class='text colors_text'><span class='listprice'>List Price</span>: </font> $" + listprice + "</span><br/><span class='price'>Our Price</span>: </font> $" + productprice + "</span><br>"
                        + "<div class='product_image'><a href='http://www.skates.com/-p/" + productcode + ".htm' title='" + productname + ", " + productcode + "'><img src='http://www.skates.com/v/vspfiles/photos/" + childof + "-1.jpg' border='0' alt='" + productname + "'></a></div>"
                        + "<span class='shortdescription'>" + ProductDescriptionShort + "</span>"
                        + "</div>") // Process and add the data to elements.
                })
            }
        }) 
```

### Json 发送

```
([{"productcode":"K2EMY050","productname":"K2 Enemy aggressive skates - Size 5","productprice":"39.99","hideproduct":"Y","listprice":"199.99","photos_cloned_from":"K2EMY","ischildofproductcode":"K2EMY","productdescriptionshort":""},{"productcode":"S02123060","productname":"K2 Mini Enemy - Size 4-6","productprice":"49.99","hideproduct":"Y","listprice":"149.99","photos_cloned_from":"S02123","ischildofproductcode":"S02123","productdescriptionshort":""},{"productcode":"S03109050","productname":"K2 Cadence SL - Size 5","productprice":"39.99","hideproduct":"Y","listprice":"189.99","photos_cloned_from":"S03109","ischildofproductcode":"S03109","productdescriptionshort":""},{"productcode":"S03112050","productname":"K2 Skye SL Womens - Size 5","productprice":"59.99","hideproduct":"Y","listprice":"199.99","photos_cloned_from":"S03112","ischildofproductcode":"S03112","productdescriptionshort":""},{"productcode":"S03118050","productname":"K2 Spire XP Womens - Size 5","productprice":"99.99","hideproduct":"Y","listprice":"239.99","photos_cloned_from":"S03118","ischildofproductcode":"S03118","productdescriptionshort":""}]) 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T16:55:26.460

Internet Explorer 需要将 crossDomain 变量显式设置为 true 才能使 JSOP 工作。

```
$.ajax({ // the function that does everything
        type: "GET",
        url: "http://example.com/products.php?size=" + search_size + "&manufacturer=" + search_manufacturer + "&gender=" + search_gender + "&instock=Y&startat=0&results=30&callback=?", //&callback=? is required to send the offsite server the data. ? is automatically filled in by AJAX
        async: true,
        cache: false,
        contentType: "text/json; charset=utf-8",
        dataType: "jsonp",
        crossDomain: true, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-26T05:21:22.550

万一有人遇到杰克所描述的问题，但杰克的回答无法解决问题，你可以试试[这个页面](http://www.intoeetive.com/index.php/comments/jquery_ajax_not_working_in_ie)的建议。

基本上，对我来说问题的实际原因是，我将服务器端的字符编码设置为“utf8”，它应该相当于“utf-8”和“UTF-8”，看起来IE9和旧版本不这么认为:)

就像我的一位 JS 开发者朋友曾经告诉我的那样，逗号或减号会让你在 javascript 开发中哭泣（尤其是在 IE 中）

# java - 使用 Ormlite 确定更新语句中更新的记录数

> ID：12632372
> 
> 赞同：2
> 
> 时间：2012-09-28T01:24:21.147
> 
> 标签：java, android, ormlite

我目前在 Android 上使用 Ormlite 4.42 版。我要做的是确定 Ormlite 是否有能力返回更新的记录数。如下所示：

```
SQLiteDatabase db = dbHelper.getWritableDatabase();
count = db.update(COMPANY_TABLE_NAME, values, where, whereArgs); 
```

我不想使用直接的 SQLiteDatabase 连接，而是想在我的内容提供程序中利用 Ormlite。只是好奇这是否是一种选择。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T02:17:21.580

只要您使用的是[ORMLite](http://ormlite.com/) 4.39 或更高版本，这应该可以工作。我现在做一个额外的 SQL 语句来获取前一个的更改数量。从更改日志：

> ANDROID：最终修复了使用 SQLite CHANGES() pragma 为插入/删除/更新调用更改的行数。

您可以使用`UpdateBuilder`代码进行更改：

```
UpdateBuilder<Company, Integer> updateBuilder = companyDao.updateBuilder();
updateBuilder.updateColumnValue("name", newName);
updateBuilder.where().gt("customerCount", 100);
int rowsUpdated = updateBuilder.update(); 
```

也有[用于`UpdateBuilder`](http://ormlite.com/docs/update-builder).

# ruby-on-rails-3 - 运行 `bundle exec sidekiq` 抛出 Celluloid::DeadTaskError: cannot resume a dead task

> ID：12632379
> 
> 赞同：6
> 
> 时间：2012-09-28T01:25:22.610
> 
> 标签：ruby-on-rails-3, sidekiq

[我按照此处](http://mperham.github.com/sidekiq/)找到的 Sidekiq 的简单设置说明进行操作，但无法正常工作。

这是堆栈跟踪。我也启动了redis服务器。有人知道我在这里想念什么吗？

```
E, [2012-09-28T09:11:36.468019 #71427] ERROR -- : Celluloid::SupervisionGroup crashed!
Celluloid::DeadTaskError: cannot resume a dead task
/Users/ernsheong/.rvm/gems/ruby-1.9.3-p0/gems/celluloid-0.12.0/lib/celluloid/tasks/task_fiber.rb:47:in `rescue in resume'
/Users/ernsheong/.rvm/gems/ruby-1.9.3-p0/gems/celluloid-0.12.0/lib/celluloid/tasks/task_fiber.rb:44:in `resume'
/Users/ernsheong/.rvm/gems/ruby-1.9.3-p0/gems/celluloid-0.12.0/lib/celluloid/responses.rb:11:in `dispatch'
/Users/ernsheong/.rvm/gems/ruby-1.9.3-p0/gems/celluloid-0.12.0/lib/celluloid/actor.rb:322:in `handle_message'
/Users/ernsheong/.rvm/gems/ruby-1.9.3-p0/gems/celluloid-0.12.0/lib/celluloid/actor.rb:195:in `run'
/Users/ernsheong/.rvm/gems/ruby-1.9.3-p0/gems/celluloid-0.12.0/lib/celluloid/actor.rb:184:in `block in initialize'
/Users/ernsheong/.rvm/gems/ruby-1.9.3-p0/gems/celluloid-0.12.0/lib/celluloid/thread_handle.rb:12:in `block in initialize'
/Users/ernsheong/.rvm/gems/ruby-1.9.3-p0/gems/celluloid-0.12.0/lib/celluloid/internal_pool.rb:48:in `call'
/Users/ernsheong/.rvm/gems/ruby-1.9.3-p0/gems/celluloid-0.12.0/lib/celluloid/internal_pool.rb:48:in `block in create'
I, [2012-09-28T09:11:36.468316 #71427]  INFO -- : Terminating 2 actors...
I, [2012-09-28T09:11:36.468955 #71427]  INFO -- : Shutdown completed cleanly
/Users/ernsheong/.rvm/gems/ruby-1.9.3-p0/gems/celluloid-0.12.0/lib/celluloid/tasks/task_fiber.rb:35:in `yield': uninitialized fiber (FiberError)
    from /Users/ernsheong/.rvm/gems/ruby-1.9.3-p0/gems/celluloid-0.12.0/lib/celluloid/tasks/task_fiber.rb:35:in `suspend'
    from /Users/ernsheong/.rvm/gems/ruby-1.9.3-p0/gems/celluloid-0.12.0/lib/celluloid/task.rb:19:in `suspend'
    from /Users/ernsheong/.rvm/gems/ruby-1.9.3-p0/gems/celluloid-0.12.0/lib/celluloid/actor.rb:70:in `call'
    from /Users/ernsheong/.rvm/gems/ruby-1.9.3-p0/gems/celluloid-0.12.0/lib/celluloid/proxies/actor_proxy.rb:19:in `_send_'
    from /Users/ernsheong/.rvm/gems/ruby-1.9.3-p0/gems/celluloid-0.12.0/lib/celluloid.rb:90:in `new_link'
    from /Users/ernsheong/.rvm/gems/ruby-1.9.3-p0/gems/celluloid-0.12.0/lib/celluloid/supervision_group.rb:133:in `start'
    from /Users/ernsheong/.rvm/gems/ruby-1.9.3-p0/gems/celluloid-0.12.0/lib/celluloid/supervision_group.rb:120:in `initialize'
    from /Users/ernsheong/.rvm/gems/ruby-1.9.3-p0/gems/celluloid-0.12.0/lib/celluloid/supervision_group.rb:80:in `new'
    from /Users/ernsheong/.rvm/gems/ruby-1.9.3-p0/gems/celluloid-0.12.0/lib/celluloid/supervision_group.rb:80:in `add'
    from /Users/ernsheong/.rvm/gems/ruby-1.9.3-p0/gems/celluloid-0.12.0/lib/celluloid/supervision_group.rb:71:in `supervise_as'
    from /Users/ernsheong/.rvm/gems/ruby-1.9.3-p0/gems/celluloid-0.12.0/lib/celluloid/supervisor.rb:17:in `block in supervise_as'
    from /Users/ernsheong/.rvm/gems/ruby-1.9.3-p0/gems/celluloid-0.12.0/lib/celluloid/supervision_group.rb:63:in `initialize'
    from /Users/ernsheong/.rvm/gems/ruby-1.9.3-p0/gems/celluloid-0.12.0/lib/celluloid/calls.rb:57:in `dispatch'
    from /Users/ernsheong/.rvm/gems/ruby-1.9.3-p0/gems/celluloid-0.12.0/lib/celluloid/actor.rb:320:in `block in handle_message'
    from /Users/ernsheong/.rvm/gems/ruby-1.9.3-p0/gems/celluloid-0.12.0/lib/celluloid/tasks/task_fiber.rb:22:in `block in initialize' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:17:01.373

以防有人再次偶然发现这一点。在试用 ruby​​ 1.9.3 的 falcon 补丁时遇到了同样的错误，通过从 1.9.3-p0-falcon 切换到 ruby​​ 1.9.3-p327 解决了它。

# jquery-mobile - jquery tmpl() 返回空字符串

> ID：12632380
> 
> 赞同：0
> 
> 时间：2012-09-28T01:25:31.683
> 
> 标签：jquery-mobile

我正在使用 jquery mobile 模板从对象列表创建链接列表

我传递的对象有用户名、评论和图像。模板是

```
<script id="commentTemplate" type="text/x-jquery-tmpl">
<li>
    <a href="http://mydomain/sub/sub">
        <img src="{{= url }}" alt="{{= username }}"/>

        <p>{{= username }} - {{= usercomment }}</p>
    </a>
</li>
</script> 
```

现在，当我转到有 js 使用来自其他页面的链接调用此页面的页面时，模板返回空字符串，但是当我通过在浏览器地址栏中键入 url 进入页面时，模板就像魅力一样工作。让我举个例子：

1.  我在 [http://www.mh.mh/home](http://www.mh.mh/home)页面并单击链接转到[http://www.mh.mh/comments](http://www.mh.mh/comments)，模板为所有评论返回空字符串。
2.  我在浏览器中键入[http://www.mh.mh/comments](http://www.mh.mh/comments)并按 Enter 模板返回正确的值并为评论创建链接。

任何解释为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T08:56:35.487

换页时，jquery mobile 只会加载目标页面的正文，而忽略页眉。这意味着您要在页面中使用的任何代码都必须加载到您的页面中，并且必须加载到您的第一页中。有两个直接后果： - 第一个页面的标题应该包含后续页面标题上的所有信息（例如链接到 CSS 和 js 文件） - 任何可能是第一个页面的页面（想想直接 URL 输入甚至刷新）应该有这样的标题

# actionscript-3 - 简单按钮 as3

> ID：12632381
> 
> 赞同：0
> 
> 时间：2012-09-28T01:25:32.440
> 
> 标签：actionscript-3

嗨，我试图在我的 as3 上实现一个简单的按钮。但这不起作用。

我刚刚将 bouton1 添加到我的场景中，但是当我点击它时没有任何反应（跟踪功能不显示我的消息

这是我的代码

```
package {

import flash.events.Event;
import flash.events.MouseEvent;
import flash.geom.Point;
import flash.display.SimpleButton;

//import org.papervision3d.core.animation.clip.AnimationClip3D;
import org.papervision3d.objects.parsers.DAE;
//import org.papervision3d.objects.parsers.Max3DS;
//import org.papervision3d.objects.parsers.KMZ;
import org.papervision3d.view.BasicView;    
import org.papervision3d.events.FileLoadEvent;
import org.papervision3d.objects.DisplayObject3D;
import org.papervision3d.view.BasicView;

//added color to objects
import org.papervision3d.materials.ColorMaterial;
import org.papervision3d.materials.utils.MaterialsList;

import org.papervision3d.core.math.Matrix3D;
import org.papervision3d.core.math.Number3D;
import org.papervision3d.lights.PointLight3D;

public class ExternalModelsExample extends BasicView

{
    private static const FORWARD:Number3D = new Number3D(0, 0, 1);
    private var model:DisplayObject3D;
    private var model2:DisplayObject3D;
    private var model3:DisplayObject3D;/*
    private var model4:DisplayObject3D;
    private var model5:DisplayObject3D;
    private var model6:DisplayObject3D;
    private var model7:DisplayObject3D;
    private var model8:DisplayObject3D;
    private var model9:DisplayObject3D;
    private var model10:DisplayObject3D;*/
    private var rotX:Number = 0.2;
    private var rotY:Number = 0.2;
    private var camPitch:Number = 90;
    private var camYaw:Number = 270;
    private var easeOut:Number = 0.1;

    // definition de la propriété couleur
    private var color:ColorMaterial;
    private var color2:ColorMaterial;
    private var color3:ColorMaterial;/*
    private var color4:ColorMaterial;
    private var color5:ColorMaterial;
    private var color6:ColorMaterial;
    private var color7:ColorMaterial;
    private var color8:ColorMaterial;
    private var color9:ColorMaterial;
    private var color10:ColorMaterial;*/

    private var previousMousePoint:Point = new Point();
    private var isMouseDown:Boolean = false;

    var bouton1:SimpleButton = new SimpleButton();

    public function ExternalModelsExample()
    {   
        stage.frameRate = 40;
        init();
        startRendering();
        addChild(bouton1);
        bouton1.addEventListener(MouseEvent.CLICK, test);
        stage.addEventListener(MouseEvent.MOUSE_DOWN, stage_mouseDownHandler);
        stage.addEventListener(MouseEvent.MOUSE_UP, stage_mouseUpHandler);

    }
    public function test(){
        trace("test");
    }

    private function init():void
    {

        //Declaration color material
        color = new ColorMaterial(0x65b5ff);
        color2 = new ColorMaterial(0xffffff);
        color3 = new ColorMaterial(0x757575);/*
        color4 = new ColorMaterial(0x65b5ff);
        color5 = new ColorMaterial(0xffffff);
        color6 = new ColorMaterial(0x874630);
        color7 = new ColorMaterial(0xbe0da7);
        color8 = new ColorMaterial(0x3107bb);
        color9 = new ColorMaterial(0xff4448);
        color10 = new ColorMaterial(0xc7c7c7);*/

        //COLLADA Utah Teapot
        //Add import on top: import org.papervision3d.objects.parsers.DAE;
        model = new DAE();
        model.addEventListener(FileLoadEvent.LOAD_COMPLETE,modelLoaded);
        DAE(model).load("assets/Z1.DAE", new MaterialsList ( { all:color } ));
        model2 = new DAE();
        model2.addEventListener(FileLoadEvent.LOAD_COMPLETE,modelLoaded);
        DAE(model2).load("assets/Z2.DAE", new MaterialsList ( { all:color2 } ));
        model3 = new DAE();
        model3.addEventListener(FileLoadEvent.LOAD_COMPLETE,modelLoaded);
        DAE(model3).load("assets/Z3.DAE", new MaterialsList ( { all:color3 } ));
        /*model = new DAE();
        model.addEventListener(FileLoadEvent.LOAD_COMPLETE,modelLoaded);
        DAE(model).load("assets/Z4.DAE", new MaterialsList ( { all:color } ));
        model2 = new DAE();
        model2.addEventListener(FileLoadEvent.LOAD_COMPLETE,modelLoaded);
        DAE(model2).load("assets/Z5.DAE", new MaterialsList ( { all:color2 } ));
        model3 = new DAE();
        model3.addEventListener(FileLoadEvent.LOAD_COMPLETE,modelLoaded);
        DAE(model3).load("assets/Z6.DAE", new MaterialsList ( { all:color3 } ));
        model = new DAE();
        model.addEventListener(FileLoadEvent.LOAD_COMPLETE,modelLoaded);
        DAE(model).load("assets/Z7.DAE", new MaterialsList ( { all:color } ));
        model2 = new DAE();
        model2.addEventListener(FileLoadEvent.LOAD_COMPLETE,modelLoaded);
        DAE(model2).load("assets/Z9.DAE", new MaterialsList ( { all:color2 } ));
        model3 = new DAE();
        model3.addEventListener(FileLoadEvent.LOAD_COMPLETE,modelLoaded);
        DAE(model3).load("assets/Z12-cockpit.DAE", new MaterialsList ( { all:color3 } ));
        model = new DAE();
        model.addEventListener(FileLoadEvent.LOAD_COMPLETE,modelLoaded);
        DAE(model).load("assets/Z13-barres.DAE", new MaterialsList ( { all:color } ));*/

    }

    private function modelLoaded(e:FileLoadEvent):void
    {

        scene.addChild(model);
        scene.addChild(model2);
        scene.addChild(model3);/*
        scene.addChild(model4);
        scene.addChild(model5);
        scene.addChild(model6);
        scene.addChild(model7);
        scene.addChild(model8);
        scene.addChild(model9);
        scene.addChild(model10);*/

    }

    private function stage_mouseDownHandler(event:MouseEvent):void
    {
        isMouseDown = true;
    }

    private function stage_mouseUpHandler(event:MouseEvent):void
    {
        isMouseDown = false;    
    }

    override protected function onRenderTick(e:Event=null):void
    {   

        var currentMousePoint:Point = new Point(viewport.containerSprite.mouseX, viewport.containerSprite.mouseY);

        if(isMouseDown)
        {
            var difference:Point = currentMousePoint.subtract(previousMousePoint);
            var vector:Number3D = new Number3D(difference.x, difference.y, 0);
            var rotationAxis:Number3D = Number3D.cross(vector, FORWARD);
            rotationAxis.normalize();
            var distance:Number = Point.distance(currentMousePoint, previousMousePoint);
            var rotationMatrix:Matrix3D = Matrix3D.rotationMatrix(rotationAxis.x, -rotationAxis.y, rotationAxis.z, distance/250);

            model.transform.calculateMultiply3x3(rotationMatrix, model.transform);
            model2.transform.calculateMultiply3x3(rotationMatrix, model2.transform);
            model3.transform.calculateMultiply3x3(rotationMatrix, model2.transform);
        }

        previousMousePoint = currentMousePoint;
        super.onRenderTick();
    }

} 
```

}

你知道为什么我的跟踪（“测试”）不起作用吗？

与对象拖动有冲突吗？

flash 不显示错误

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T05:17:15.490

SimpleButton 对象比“添加和忘记”更复杂，您需要填充其属性，这通常在设计时完成。有四个 DisplayObject 类型的对象，即`upState, overState, downState, hitTestState`确定该按钮的形状和内容。为了使按钮可见和可点击，您需要指定 4 个 Sprite（或其他 DisplayObjects）作为 SimpleButton 构造函数的参数。该`hitTestState`对象用于捕获事件，并且始终是不可见的，因此您只需要在其上绘制正确的形状即可。其他状态分别在按钮向上、鼠标悬停在按钮上以及鼠标在按钮上按下时可见。

```
var upSprite:Sprite=new Sprite();
upSprite.graphics.lineStyle(2,0,1);
upSprite.graphics.drawRect(0,0,50,20);
var hitSprite:Shape=new Shape();
hitSprite.graphics.beginFill(0,1);
hitSprite.graphics.drawRect(3,3,44,14); // a bit smaller rect to make the button narrow
var bouton1:SimpleButton=new SimpleButton(upSprite,upSprite,upSprite,hitSprite); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T01:59:28.263

1.  尝试 mouse_down 上的跟踪操作而不是单击。

2.  您在最后几行中提到了 if(isMouseDown) 。如果这是错误的，我很抱歉，但你必须说 if(isMouseDown) = true

# javascript - jQuery 插件创作和命名空间

> ID：12632382
> 
> 赞同：3
> 
> 时间：2012-09-28T01:25:33.063
> 
> 标签：javascript, jquery, plugins, javascript-namespaces

**我习惯于这样写插件：**

```
;(function($){jQuery.fn.myPlugin=function(options){
    var defaults={
        'property':value
    },
    o=$.extend({},defaults,options||{});

   // INSERT AND CACHE ELEMENTS
   var $Element=$('<div></div>');
   $Element.appendTo($('body'));

function funFunction(){
  // I have access to $Element!
 $Element.hide(500);
};

this.each(function(i){
     var $this=$(this);
});
return this;
});};})(jQuery); 
```

我知道它并不完美，这就是为什么我现在正在尝试正确学习命名空间、更好的插件结构/模式。不幸的是，我读过的前几本书逐字引用了 jQuery 插件创作教程，因此并没有太大帮助。该教程似乎将所有内容都分开了，并且没有显示一个很好的组合示例，这就是我感到困惑的原因。在本教程中，它显示了命名空间示例。

**jQuery 插件命名空间教程**

```
(function( $ ){
  var methods = {
    init : function( options ) { 
    },
    show : function( ) {
    },
    hide : function( ) { 
    },
    update : function( content ) { 
    }
  };

  $.fn.tooltip = function( method ) {
    // Method calling logic
    if ( methods[method] ) {
      return methods[ method ].apply( this, Array.prototype.slice.call( arguments, 1 ));
    } else if ( typeof method === 'object' || ! method ) {
      return methods.init.apply( this, arguments );
    } else {
      $.error( 'Method ' +  method + ' does not exist on jQuery.tooltip' );
    }    
  };
})( jQuery );
// calls the init method
$('div').tooltip(); 
```

我了解结构以及如何访问命名空间对象，但是它显示了不包括任何命名空间的默认值/选项的另一个示例......因此，为了编写一个正确命名空间的插件的开头，具有默认值/选项并缓存我插入的 HTML 元素用于整个插件，我想出了以下内容。

**正确的组合？**

```
;(function($,window,document,undefined){
var myPlugin={
    // METHODS
    init:function(options){

    },
    buildElements:function(){ 
        var $Elements=$('<div id="myElem"></div>')
                    .appendTo($('body'));
       }
};

$.fn.myPlugin=function(method,options){
    var defaults={

    },
    options=$.extend({},defaults,options||{});

    myPlugin.buildElements();

    return this.each(function(){
        var $this=$(this);
        if(myPlugin[method]){
          return myPlugin[method].apply(this,Array.prototype.slice.call(arguments,1));
        }else if(typeof method==='object'||!method){
          return myPlugin.init.apply(this,arguments);
        }else{$.error('Method '+method+' does not exist on jQuery.myPlugin');};
    });
};})(jQuery); 
```

1.  显然，当我构建/插入 myElem 时，它只能在该方法中使用，而不能在任何其他方法中使用......我是在错误的地方构建它吗？

2.  默认值/扩展是否在正确的位置？

3.  如果我不想从插件外部访问方法，是否需要方法逻辑部分？

4.  使用 .prototype 与 .fn 有什么好处吗？

非常感谢任何人和所有人！:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-28T02:18:29.127

更仔细地查看“工具提示”示例插件。这是一个真正伟大的模式。

它完成了您需要的所有命名空间，并且已经是您习惯的类型，至少底部的通用“主管”块是 - 即这部分：

```
$.fn.tooltip = function( method ) {
    // Method calling logic
    if ( methods[method] ) {
      return methods[ method ].apply( this, Array.prototype.slice.call( arguments, 1 ));
    } else if ( typeof method === 'object' || ! method ) {
      return methods.init.apply( this, arguments );
    } else {
      $.error( 'Method ' +  method + ' does not exist on jQuery.tooltip' );
    }    
}; 
```

`methods`在简单的 javascript 术语中是一个私有变量，但它的属性被主管以一种非常聪明、非常规的方式公开为插件的方法。

请不要尝试将默认值/选项代码移出 init 方法。这将把一切都搞砸了！遵循久经考验且值得信赖的模式，一切都会好起来的。

## 编辑：

一定要遵守模式的其他方面：

*   要维护 jQuery 对象的可链接性，请`return this.each(function(){...})`在每个方法中使用不返回特定结果的结构。
*   （通常），在 init 中，建立一个`.data('pluninName', {...})`对象来容纳在初始化时建立的任何数据，这些数据需要稍后由其他插件方法访问/修改/增强。

`methods`该模式只为插件本身（包含对象）提供了一个闭包；闭包的命名空间不能用于元素特定的数据（包括初始化选项），因此需要使用`.data('pluninName', ...)`.

这些不仅仅是约定——它们绝对是使模式按预期工作的关键。

# c# - 如何在 AvalonEdit 中设置语法高亮？

> ID：12632386
> 
> 赞同：3
> 
> 时间：2012-09-28T01:26:25.403
> 
> 标签：c#, wpf, syntax-highlighting, avalonedit

我正在尝试在我正在制作的使用 AvalonEdit 的程序中设置语法突出显示

这是我正在使用的代码：

```
StreamResourceInfo sri = Application.GetResourceStream(new Uri("lua.xshd"));
        using (Stream s  = sri.Stream)
        {
            using (XmlTextReader reader = new XmlTextReader(s))
            {
                var gLua = HighlightingLoader.LoadXshd(reader);
                editor.SyntaxHighlighting = HighlightingLoader.Load(gLua, HighlightingManager.Instance);
                editor.Text = reader.ToString();
            }
        } 
```

我也越来越

> System.dll 中出现“System.UriFormatException”类型的第一次机会异常

我应该如何改变它以使其工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T15:21:28.457

我用

```
using (Stream s = File.OpenRead(@"C:\Users\JFM\Documents\latex3.xshd")) 
{
using (XmlTextReader reader = new XmlTextReader(s)) 
 {
   editor.SyntaxHighlighting = ICSharpCode.AvalonEdit.Highlighting.Xshd.HighlightingLoader.Load
       (reader, ICSharpCode.AvalonEdit.Highlighting.HighlightingManager.Instance);    
 }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-06T05:05:49.860

这是因为您没有包含您的程序集名称。因此，如果您将 xshd 构建为嵌入式资源，它应该是这样的。

```
 private void LoadHightLightRule()
    {
        using (Stream s = myAssembly.GetManifestResourceStream("Your_Assembly_Name.lua.xshd"))
        {
            using (XmlTextReader reader = new XmlTextReader(s))
            {
                Editor.SyntaxHighlighting = HighlightingLoader.Load(reader, HighlightingManager.Instance);
            }
        }
    } 
```

# android - Android camara 参数 getZoomRatio() 值与预期不符

> ID：12632392
> 
> 赞同：3
> 
> 时间：2012-09-28T01:27:35.220
> 
> 标签：android, camera, zooming, augmented-reality

如果我得到一个缩放比率列表：parameters.getZoomRatios()，返回的值为 100,114...200（对应于 1x 1.14x ...2.0x 缩放），但在 200（2x 缩放）的相机预览中，图片看起来放大了 2 倍以上。在示例图像中，在 1x 和 2x 变焦时显示 6cm fov 和在 2x 变焦时显示 2.5cm……我期待在 2x 时为 3.0cm。

![1 倍 (100) 变焦时 6 厘米](../Images/e6cabc9ef8e1721ec5808f357272c23f.png) ![2.5 厘米，2 倍 (200) 变焦](../Images/1fed4465906eb0e39301a9bd0c5390d2.png)

我应该以另一种方式解释这些值吗？...其他人看到了吗？或者这个设备/版本是特定的，还是我应该乘以某个常数或其他值（焦距）？我正在尝试将我的相机视图与我的应用程序的渲染视图相匹配，当我缩放时，这会弄乱匹配。

代码在这里是标准的：

```
public void setZoom(int pZoom)
{
    final Camera.Parameters p = this.mCamera.getParameters();
    if (p.isZoomSupported())
    {
        p.setZoom(pZoom);
        this.mCamera.setParameters(p);

    }

}

    public int getZoom( android.hardware.Camera camera)
    {
        int zoom = 100;

        final Parameters p = camera.getParameters();
        if (p.isZoomSupported())
        {
            final List<Integer> zoomRatios = p.getZoomRatios();
            final int zoomIndex = p.getZoom();
            if (zoomIndex < zoomRatios.size())
            {
                zoom = zoomRatios.get(zoomIndex);
            }   
            //Log.d("zoom","ix:" + zoomIndex + " z:"+zoom);         

        }               
        return zoom;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T13:21:33.150

调用函数“camera.getParameters().getZoomRatios()”似乎是获得相机缩放比例的最安全方法。好吧，确实如此，但是-据我所知-它在每个 android 设备上的行为方式都不相同。

我已经在不同设备上测试了缩放比例：在华硕上调用 getZoomRatios() 时，它返回：[100, 125, 150, 175, 200, 225, 250, 275, 300, 325, 350, 375, 400, 425、450、475、500、525、550、575、600、625、650、675、700、725、750、775、800]。使用这些变焦比，如果您在 1X 变焦时测试 6.0cm，那么在 2X 变焦时会得到 3.0cm。

但是，三星给我返回了这个列表： [100, 102, 104, 109, 111, 113, 119, 121, 124, 131, 134, 138, 146, 150, 155, 159, 165, 170, 182, 189, 200 , 213, 222, 232, 243, 255, 283, 300, 319, 364, 400]。这些值有点奇怪，因为在 1X 变焦下测试 6.0cm 时，它无法在 2X 变焦下得到预期的 3.0cm。当我在设备的标准相机应用程序上验证缩放系数时，我意识到缩放比率必须是等距的。我生成了另一个缩放比率列表，其具有等距值：[100, 110, 120, 130, 140, 150, 160, 170, 180, 190, 200, 210, 220, 230, 240, 250, 260, 270, 280、290、300、310、320、330、340、350、360、370、380、390、400]。

例如，如果我想将缩放设置为 2X，我将有“parameters.setZoom(20)”（参见原始三星列表），这实际上是一个错误，因为我不会有预期的 2X缩放，但 3X 缩放（请参阅生成的列表）。

如果您的 zoomRatios 列表不可信，请尝试生成您自己的 zoomRatios 列表，计算两个连续缩放比例之间的距离，假设正确返回了最小 (1X) 和最大缩放值。顺便说一句，缩放比例列表的大小也是正确的，因此要计算两个连续缩放比例值之间的差异，您可以使用公式：(greatestZoomRatio - minimumZoomRatio) / numberOfZoomRatioElements。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-31T16:56:02.523

在尝试为不同手机型号修复等效缩放级别时，我也偶然发现了这个问题。这些比率看起来很有希望，但我放弃了使用它们，因为它太不一致了。

作为亚瑟王，我也意识到这些值应该是等距的，只有最后一个值有时不能反映实际的缩放系数。例如，我的三星 S4 的比率： [100, 102, 104, 107, 109, 112, 114, 117, 120, 123, 125, 128, 131, 135, 138, 141, 144, 148, 151, 155 , 158, 162, 166, 170, 174, 178, 182, 186, 190, 195, 200] 这是误导，因为手机有 4 倍变焦，但列表没有以 400 结尾！

我看不懂逻辑，所以最后我就放弃了。如果有人可以提供解释，我会非常感兴趣。干杯

# position - 使用 xcode 4.5 的旧应用程序无法对齐中心

> ID：12632394
> 
> 赞同：1
> 
> 时间：2012-09-28T01:27:50.630
> 
> 标签：position, alignment, ios6, retina-display, xcode4.5

我想知道你们中是否有人遇到过这种情况，我只是将我的 Xcode 升级到 Xcode 4.5，在它要求添加`Default-568h@2x.png`屏幕之前，我的应用程序可以在 iPhone 5 上对齐在中心位置。但是，似乎必须添加该屏幕，所以我添加并重建了我的应用程序。应用程序向左对齐。

我知道我可以制作一组新的图形`1136x640px`并编写代码来调整对齐方式，但我有 20 多个应用程序。有人可以告诉我是否有任何可能的方式使应用程序（用于由以前的 Xcode 构建）自动居中对齐？

我没有检查选项自动布局。即使我这样做了，将应用程序对齐在中心位置也无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T01:33:27.027

如果您删除 Default-568h@2x.png 启动屏幕图像，兼容的信箱模式将生效。拥有此图像会触发手机假定您的所有布局都与新的屏幕尺寸兼容。

# ruby - 如何查看 ruby 环境中当前有哪些 gem？

> ID：12632395
> 
> 赞同：0
> 
> 时间：2012-09-28T01:27:51.860
> 
> 标签：ruby, jruby

我的目标是，在运行可能有一些需求的脚本之后（或之前），查看加载到我当前环境中的所有 gem。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T01:35:33.153

```
Gem.loaded_specs.keys 
```

（在[这里](https://stackoverflow.com/questions/2747990/is-there-any-way-to-tell-which-gems-and-plugins-are-loaded-at-runtime-for-a-rail)找到）

# database - 快速绘制数百万对象之间关系的算法

> ID：12632398
> 
> 赞同：0
> 
> 时间：2012-09-28T01:27:59.703
> 
> 标签：database, performance, algorithm, search-engine, relationship

我有一个包含数百万行的关系数据库表，每一个都链接到该表中的数百行。这是一个简单的关系，但当有数百万行时就会出现问题。每次添加新行时，都必须扫描整个范围。

有没有更有效的方法来执行这个操作？

我确信搜索引擎已经在更大范围内解决了这个问题。（这类问题有术语吗？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T04:30:09.840

标准数据库系统会使用索引，这样您就可以处理新行，而无需对整个数据库进行线性扫描。

传统的文本搜索系统会批量处理大量影响，例如对所有单词进行排序以构建倒排索引。它会等待一段时间来积累（或从 Web 收集）足够的输入以使批处理运行值得 - 因此您将批处理的成本分散在大量输入上。然后，您可以将批处理的结果与迄今为止累积的数据合并，或者将其分开并在用户提交查询时搜索多个索引数据块。

如果没有您提出更具体的问题，我无法产生更具体的内容，但您可能会发现从大量输入行中提取关键字并将它们排序以生成单个排序关键字列表有助于匹配过程，或者可能保持当前存储的所有行中关键字的倒排索引。

# user-interface - 如何在emacs中获得顶部和底部边距

> ID：12632399
> 
> 赞同：4
> 
> 时间：2012-09-28T01:28:05.423
> 
> 标签：user-interface, emacs

使用 emacs 时如何获得顶部和底部边距（如左右边缘）？我发现当我在编写或查看大块文本时，让文本从屏幕顶部开始有点不舒服。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T02:29:16.607

我找不到仅顶部和底部的边距设置，但有一个框架参数`internal-border-width`可能就足够了。您可以像这样为当前帧设置它：

```
(set-frame-parameter nil 'internal-border-width 10) 
```

# emacs - 在自动配对中包含其他字符。

> ID：12632400
> 
> 赞同：2
> 
> 时间：2012-09-28T01:28:13.237
> 
> 标签：emacs, elisp

自动配对不适用于 { 和 '。有没有需要添加的代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T06:38:14.140

自动配对通过分析您所处的特定主要模式的[语法表](http://www.gnu.org/software/emacs/manual/html_node/elisp/Syntax-Class-Table.html#Syntax-Class-Table)来工作。那里有**开放分隔符**、**关闭分隔符**和**成对分隔符**（标有**(** , **)**和**$**符号）的条目。您必须修改语法表以改变自动配对的行为。

这将使 { 和 } 分隔符相互匹配：

```
(modify-syntax-entry ?{ "(}")
(modify-syntax-entry ?} "){") 
```

顺便说一句，Emacs 24.1 包含一个名为的内置模式`electric-pair-mode`，它与自动配对模式非常相似。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T03:25:57.253

我认为这取决于您使用的主要模式。但是，如果您想在主要模式指定的配对之外添加特定配对，则有一个变量。检查`M-x customize-group RET autopair RET`。

# android - 如何在 Android 中使用计时器进行计分？

> ID：12632406
> 
> 赞同：1
> 
> 时间：2012-09-28T01:28:56.557
> 
> 标签：android, timer, scoring

我打算使用一个可见的计时器，从 30 秒倒计时到 0 秒。这个计时器将作为我的游戏应用程序中得分的基础，因为每次触摸移动的精灵（包含一个数字）但与请求的数字不匹配（如窗口/通知中所示），当前剩余时间将被扣除5 秒 (-5)。但是如果包含匹配数字的精灵被触摸，则计时器停止并且游戏重新开始（或移动到下一个级别）。

这是类`touchEvent`内部的代码`GameView`：

```
@Override
   public boolean onTouchEvent(MotionEvent event) {
         if (System.currentTimeMillis() - lastClick > 300) {
                lastClick = System.currentTimeMillis();
                float x = event.getX();
                float y = event.getY();
                synchronized (getHolder()) {
                       for (int i = sprites.size() - 1; i >= 0; i--) {
                              Sprite sprite = sprites.get(i);
                              if (sprite.wasPopped(x, y)) {
                                    sprites.remove(sprite);
                                    spritePopped.add(new TempSprite(temps, this, x, y, pop));
                                    break;
                              }
                       }
                }
         }
         return true;
   } 
```

每次触摸移动精灵周围的区域时`sprite.wasPopped`（`spritePopped`如何为计时器创建一个单独的类并在我的`GameView`? 到目前为止，我遇到过使用刻度来计分，它是根据`update()`某个类中调用了多少事件来计时的。任何评论/建议都会非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T17:48:59.017

您可以使用 a`TimerTask`但不推荐使用，因为由于不在主线程上运行，它可能会产生一些不良影响。

您应该做的是获取`deltaTime`并将其存储在变量中。

```
 private float displayedTime;

    Public void timer(){ //call in update()
      displayedTime += deltaTime;
  } 
```

然后你可以混合它来获得完整的秒数或任何你喜欢的计时器。

您不应在更新方法中使用任何类型的计数器来检查时间或添加延迟，因为这会对无法以全 FPS 运行游戏的设备产生不良影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T20:23:54.627

我发现了一个类似的问题，这里的计时器是在一个单独的类中创建的：

```
import android.os.CountDownTimer;
import android.widget.TextView;

public class MyCount extends CountDownTimer {
static TextView timeDisplay;

public MyCount(long millisInFuture, long countDownInterval) {
    super(millisInFuture, countDownInterval);
}

public void onFinish() {
    timeDisplay.setText("Time has ended. Game over.");
    //restart(); 
}

public void onTick(long millisUntilFinished) {
    timeDisplay.setText("Left: " + millisUntilFinished / 1000);
} 
```

}

然后在 GameView 类中的一个单独函数中调用它（一旦游戏开始就会启动）：

```
public void setTimer() { 
timeDisplay = new TextView(this);
this.setContentView(timeDisplay);
MyCount counter = new MyCount(30000, 1000);
counter.start(); 
```

}

# ruby-on-rails - 在 404、403、500 等错误页面中使用模板

> ID：12632417
> 
> 赞同：0
> 
> 时间：2012-09-28T01:30:46.017
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我只是在想，如果我能以一种很酷、很干燥的方式完成这项工作……但我对 Rails 很陌生，不知道我该怎么做……

有什么帮助吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T02:13:18.027

刚刚想通了：

```
rescue_from Foo::BarException do |exception|
    render file: "#{Rails.root}/public/403", formats: [:html], status: 403, layout: true
end 
```

然后像老板一样做403.html，它应该可以工作。

但是，我仍然不知道如何使自动 404 也使用模板......它总是显示异常，即使我在我的应用程序控制器中添加了救援。

# python - 打印字符串的幂集

> ID：12632421
> 
> 赞同：1
> 
> 时间：2012-09-28T01:31:45.930
> 
> 标签：python, powerset

我正在尝试编写 python 代码来打印字符串的[powerset](/tags/powerset/info)，但遇到了一些错误。这是我所拥有的：

```
def getperm (string):
    perm = []
    if len(string) == 0:
        perm.append("")
        return perm
    #if len(string) == 1:
    #   perm.append(string)
    #   perm.append("")
    first = string[0]
    print "first = " + str(first)
    rem = string[1:len(string)]
    print "rem = " + str(rem)
    words = getperm(rem)
    for word in words:
        for i in range(len(word)):
            temp = string[0:i] + first + string[i:len(string)]
            print "temp = " + str(temp)
            perm.append(temp)

    return perm

if __name__=="__main__":
    a = "ab"
    mag  = getperm(a)
    print mag 
```

我的预期输出是：

```
['', 'a', 'b', 'ab'] 
```

我的实际输出是：

```
[] 
```

谁能帮我弄清楚发生了什么？这是python的一些细微差别，还是我的代码中有错误？我认为我的代码应该没问题——我要离开第五版破解编码面试

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T02:08:27.730

你想多了

这部分试图做的太多

```
for word in words:
    for i in range(len(word)):
        temp = string[0:i] + first + string[i:len(string)]
        print "temp = " + str(temp)
        perm.append(temp) 
```

看看它真的应该有多简单

```
def get_powerset (string):
    perm = []
    if len(string) == 0:
        perm.append("")
        return perm
    #if len(string) == 1:
    #   perm.append(string)
    #   perm.append("")
    first = string[0]
    print "first = " + str(first)
    rem = string[1:len(string)]
    print "rem = " + str(rem)
    words = get_powerset(rem)
    perm.extend(words)
    for word in words:
        perm.append(first+word)

    return perm

if __name__=="__main__":
    a = "ab"
    mag  = get_powerset(a)
    print mag 
```

现在您应该能够通过一些重构使代码看起来更好

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T01:38:01.667

这是你想要的吗？

```
import itertools as it

def func(s):
    for i in range(len(s)+1):
        for combo in it.combinations(s,i):
            yield "".join(combo)

print list(func("abc")) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-07-01T00:59:41.593

**这是一个没有**`itertools`模块的重构迭代解决方案：

```
def powerset(s):
    a = ['']
    for i,c in enumerate(s):
        for k in range(2**i):
            a.append(a[k]+c)
    return a 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-28T01:43:20.310

有一种排列方法：

```
>>> import itertools
>>> chars = "ABCD"
>>> perms = list(itertools.permutations(chars))
>>> print(perms)
[('A', 'B', 'C'),
 ('A', 'C', 'B'),
 ('B', 'A', 'C'),
 ('B', 'C', 'A'),
 ('C', 'A', 'B'),
 ('C', 'B', 'A')] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T01:45:02.870

您是否尝试过跟踪您的算法实际上做了什么？

```
getperm('ab'):
  first, rem = 'a', 'b'
  words = getperm('b')
    first, rem = 'b', ''
    words = getperm('')
    words = ['']
    for word in words:
      for i in range(len(word)):
        pass # only called on '', so doesn't matter
    return []
  words = []
  for word in words:
    pass # only called on [], so doesn't matter 
```

所以，这里没有 Python 的细微差别。您的算法在 O(N) 步骤中返回空列表，并且您已在 Python 中正确编码了该算法。

（当然，您可以添加一些更有用的打印语句，而不是手动跟踪它，并查看每个步骤实际上在做什么。）

这可能不是您想要的算法，但您需要告诉我们您*想要*做什么。例如，您是否正在将一些伪代码从 Hoare 移植到 Python 中？如果是这样，伪代码是什么？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-12-16T01:07:59.017

使用[`powerset`](https://more-itertools.readthedocs.io/en/latest/api.html#more_itertools.powerset)来自[`more_itertools`](https://github.com/erikrose/more-itertools)：

```
>>> import more_itertools

>>> ["".join(p) for p in list(more_itertools.powerset("ab"))]
['', 'a', 'b', 'ab'] 
```

这`powerset`是直接从`itertools` [食谱](https://docs.python.org/3/library/itertools.html#itertools-recipes)中实现的便利功能。

# jquery - $(e.currentTarget) 和 $(this) 之间有区别吗？

> ID：12632426
> 
> 赞同：18
> 
> 时间：2012-09-28T01:32:42.517
> 
> 标签：jquery, jquery-events

以下两种方法有什么区别吗？#1 比 #2 快吗？

#1

```
$('#selector').on('click',function(){
  $(this)...
  // do stuff with clicked element
}) 
```

和

#2

```
$('#selector').on('click',function(e){
  $(e.currentTarget)....
  // do stuff with clicked element
}) 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-28T01:36:36.790

在大多数情况下，它们似乎是等价的，尽管“this”似乎更容易输入

根据[http://api.jquery.com/event.currentTarget/](http://api.jquery.com/event.currentTarget/)

> `event.currentTarget`
> 
> 此属性通常等于`this`函数的 。
> 
> 如果您使用[jQuery.proxy](http://api.jquery.com/jQuery.proxy/)或其他形式的范围操作， `this`将等于您提供的任何上下文，而不是 `event.currentTarget`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-10-12T15:02:05.197

在这种情况下，他们会做同样的事情。但是 e.currentTarget 将始终引用单击的内容，而 $(this) 将获取您应用处理程序的选择器。

# c# - 我正在尝试保留/保护视图模型中的某些字段

> ID：12632427
> 
> 赞同：1
> 
> 时间：2012-09-28T01:32:46.767
> 
> 标签：c#, asp.net-mvc

我正在尝试实现[此处找到](https://stackoverflow.com/a/7546290/947978)的解决方案，但是一旦我将“用户”类替换为“EditUserViewModel”类（字段少于用户类的类）并且一旦我到达这一行

```
db.Entry(users).State = EntityState.Modified; 
```

在这段代码中

```
 [HttpPost]
    public ActionResult Edit(EditUserViewModel users)
    {
        if (ModelState.IsValid)
        {
            db.Entry(users).State = EntityState.Modified;
            db.SaveChanges();
            return RedirectToAction("Index");
        }
        return View(users);
    } 
```

我得到错误

```
The entity type EditUserViewModel is not part of the model for the current context. 
```

现在我猜这个错误是因为我的 DBContext 使用了 Users 类而不是 EditUserViewModel 类。我错过了一个步骤还是有什么办法可以解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T04:58:57.647

您需要将数据从您的 MV 合并到您的模型类。

```
if (ModelState.IsValid)
{
    var existingUser = db.Users.Single(p => /* query to find your user */);

    existingUser.From = user.From;
    existingUser.CC = user.CC;
    // etc.

    db.SaveChanges();

    return RedirectToAction("Index");
} 
```

# java - 用于多线程系统的 Java 不可变对象。我做错了什么？

> ID：12632428
> 
> 赞同：1
> 
> 时间：2012-09-28T01:32:46.813
> 
> 标签：java, multithreading, concurrency, immutability

我对不可变对象有点傻。我的想法是它们在多线程环境中很有帮助，并且根据定义是线程安全的。

但是下面的代码似乎正好相反！

```
public class ImmutableTest {

    volatile ImmutableObject obj;

    public static void main(String[] args) throws InterruptedException {
        new ImmutableTest().execute();
    }

    private void execute() throws InterruptedException
    {
        obj = new ImmutableObject(0);
        ExecutorService exec = Executors.newFixedThreadPool(50);    
        for(int i = 0; i < 50; i++){
            exec.execute(new ImmutableRunnable(this));
        }
        Thread.sleep(5000);
        exec.shutdown();
        obj.print();
    }
}

public class ImmutableRunnable implements Runnable {
    ImmutableTest test;

    ImmutableRunnable(ImmutableTest immutableTest) {
        this.test = immutableTest;
    }

    public void run() {
        this.test.obj = new ImmutableObject(this.test.obj.getValue());
}

}

public final class ImmutableObject {

    private int n;

    public ImmutableObject(int newValue) {
        this.n = newValue;
        if(Math.random() > .5){
            try {
            Thread.sleep(100);
        } catch (InterruptedException e) {
                e.printStackTrace();
        }
        }
    }

    public void print() {
        System.out.println(n);
    }

    public int getValue() {
        return n;
    }
} 
```

在线程安全的环境中，我预计结果为 50。但这种情况并非如此。如果您从 ImmutableObject 构造函数中取消随机睡眠，您将获得 50。

那么结论是什么？不可变对象是线程安全的“如果构造函数足够快”？或者（更有可能）我误解了什么？

抱歉，我没有正确解释我的疑问。这不是一个同步问题，我学习了如何同步方法和使用锁。这个问题涉及不可变对象及其与多线程的关系。我到处读到不可变对象是线程安全的，因此它可以在线程之间共享而无所畏惧。但恕我直言，这根本不是真的！！！那么您能否提供一个示例，其中不可变对象在不同线程之间共享并且它的使用不需要同步？多谢你们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T01:38:14.497

你误会了什么。

不可变对象让您可以安全地共享对象并在*不使用锁的情况下**读取*任何方法/字段。

 *在这种情况下，您依赖于*可变* `obj`引用以某种方式进行同步 - 情况并非如此。

不变性只是一个**无法修改**的对象。修改状态后，您需要执行一些同步以确保您想要的实际发生。例如，整个“通过读取 obj 设置 obj”调用需要是独占的，并且以串行方式发生。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T01:41:25.537

ImmutableRunnable.run() 不是线程安全的：

*   它读取 obj 中的值
*   它创建一个新的 ImmutableObject
*   它更新 obj

显然，如果当时正在执行这些步骤，那么您可能会遇到问题。问题不在于不可变对象，而是您在没有适当锁定的情况下对 obj 进行变异。

解决这个问题的最简单方法是在 ImmutableTest 上进行同步。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T10:19:04.067

正如 Yann Ramin 所说，不可变对象可以让您安全地共享和使用该对象，而无需使用锁。

但是，您在这里测试的是*写入*`obj`class 字段的线程安全性`Immutabletest`。`ImmutableTest`不是不可变的，因此不是线程安全的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-06T21:28:17.957

1.  您提供的代码将始终打印 0。这仅仅是因为您正在复制值并且从不更改它，所以它只能是 0 的起始值。
2.  ImmutableObject 不是不可变的……不可变对象只有 final 字段，这是保证状态发布不完整的原因。不过，这对您在此处执行的代码没有任何影响。
3.  如果我通过使 ImmutableObject 或 ImmutableRunnable 增加值来将您的代码修复为我认为您想要的，那么您将遇到上述问题，也就是说 volatile 保证可见性/排序但不保证原子性。为了使您的代码在不同步的情况下正常工作，您可以使用 AtomicReference.compareAndSet 来确保被替换的 ImmutableObject 是您用作下一个对象的基础的那个。例如：

```
 AtomicReference obj = new AtomicReference();// was volatile obj
... change obj access in execute to match
... replace run method with following:
    ImmutableObject curr;
    do{
       curr = this.test.obj.get();
    }while(!this.test.obj.compareAndSet(curr, new ImmutableObject(curr.getValue()+1))); 

```*

# android - 提前获得一周中的某一天

> ID：12632431
> 
> 赞同：2
> 
> 时间：2012-09-28T01:33:53.257
> 
> 标签：android, android-calendar

假设今天是任意一天，我正在尝试找到下周二的日期。目前我只能找到本周星期二的日期......

```
cal.set(Calendar.DAY_OF_WEEK, Calendar.TUESDAY); 
```

我怎样才能得到下周二而忘记上周二？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T01:49:01.047

怎么样...

```
cal.set( Calendar.DAY_OF_WEEK, Calendar.TUESDAY );
cal.add( Calendar.DATE, 7 ); 
```

通常，这类问题会导致一群人理所当然地大喊“ [JODA](http://joda-time.sourceforge.net/)！”

* * *

[由 bwoogie 编辑] 我的最终代码：

```
Calendar c = Calendar.getInstance();
        c.set(Calendar.DAY_OF_WEEK, Calendar.TUESDAY);

        if(c.getTimeInMillis() < System.currentTimeMillis()) {
            c.add(Calendar.DATE, 7);
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T01:50:15.377

试试这个

```
Calendar calendar = Calendar.getInstance();
calendar.set(Calendar.DAY_OF_WEEK, Calendar.TUESDAY);
calendar.add(Calendar.DAY_OF_WEEK, 7);

SimpleDateFormat f = new SimpleDateFormat("MM/d/yyyy");

Log.d("Next", f.format(cal.getTime())); 
```

# jquery - JQuery Validator Method 检查某些短语

> ID：12632432
> 
> 赞同：1
> 
> 时间：2012-09-28T01:33:57.057
> 
> 标签：jquery, regex, validation, jquery-plugins, jquery-validate

我正在使用 jquery 验证器插件，我想添加一个自定义方法来检查用户是否输入了某个关键字。如果他们没有，那么他们就无法继续，有点像密码。他们可以输入多个关键字，他们只需要输入其中一个就可以继续前进。我还想删除他们可能输入的任何空格。这是我到目前为止的内容：

```
jQuery.validator.addMethod("code", function(value, element) { 
    return this.optional(element) || /^\bCODE1\b+\bCODE2\b+\bCODE3\b$/i.test(value);
    }, jQuery.format("Please enter a correct code")); 
```

这不像我想要的那样工作，我应该如何改变它以使其工作？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T01:57:17.730

怎么样：

```
jQuery.validator.addMethod("code", function(value, element) {
    return this.optional(element) || /^(CODE1)|(CODE2)|(CODE3)$/i.test(value);
}, jQuery.format("Please enter a correct code")); 
```

**示例：http:** [//jsfiddle.net/shv7h/](http://jsfiddle.net/shv7h/)

# extjs - 网格单元同时具有图像和文本

> ID：12632433
> 
> 赞同：0
> 
> 时间：2012-09-28T01:34:14.823
> 
> 标签：extjs, extjs4

有没有办法在 Ext js 4 网格面板的单元格上同时放置图像和文本？

感谢帮助。

ck

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T03:54:54.927

是的你可以。但取决于您的要求选择哪种方式。

1.  使用 CSS。定义列时，设置“tdCls”属性：

    ```
    {
        header: 'Image and text column',
        tdCls: 'img-col',
        dataIndex: 'Text'
    } 
    ```

    在 CSS 文件中：

    ```
    td.img-col  {
        background-image: url(images/pic.png); /*16px*/
        background-repeat: no-repeat;
    }

    td.img-col .x-grid-cell-inner {
        margin-left: 16px;
    } 
    ```

2.  使用模板列：

    ```
    {
        xtype: 'templatecolumn',
        header: 'Image and text column',
        tpl: [
            '<img src="{ImgPath}"></img>',
            '<div>{Text}</div>'
        ]
    } 
    ```

    你的模型应该有这个`ImgPath`属性

# sql - 如何在sql中表达一个功能性的zip

> ID：12632434
> 
> 赞同：2
> 
> 时间：2012-09-28T01:34:14.287
> 
> 标签：sql

我有这两个相关的表，我基本上想写

```
for r1, r2 in zip(table1, table2):
  ... 
```

我该怎么做呢？我需要尽快修复的存储过程中的现有代码看起来像这样

```
cursor = select ... where table1.x = table2.x; # implied join
for row in cursor:
  ... 
```

这当然在逻辑上就像两个嵌套的 for 循环。当我想做的只是压缩两个表时，现有代码会遇到各种麻烦，按它们在列中的列排序，然后保留现有逻辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T18:57:51.870

您的选择可能看起来像这样：

```
select *
from table1 t1
join table2 t2
    on t1.x = t2.x 
```

但是，我不知道为什么你需要一个光标。也许您正在尝试遍历这些？游标必须被声明、打开、关闭和释放以避免句柄泄漏。语法可能因数据库而异。这里有一些示例 (MS) T-SQL 可以帮助您入门。

```
declare z_cur cursor for
    select t1.x, t2.y
    from table1 t1
    join table2 t2
        on t1.x = t2.x

declare @xVal varchar(100)
     , @yVal varchar(100)

open z_cur
fetch next from z_cur into @xVal, @yVal

while @@fetch_status = 0
begin
    -- do stuff here
    fetch next from z_cur into @xVal, @yVal
end

close z_cur
deallocate z_cur 
```

# java - 树结构游标 API

> ID：12632436
> 
> 赞同：2
> 
> 时间：2012-09-28T01:34:38.980
> 
> 标签：java, api, guava

我现在正在为树结构重写一个游标 API。我有这样的方法：

```
/**
 * Move cursor to parent node of currently selected node.
 * 
 * @return the cursor instance
 */
INodeCursor moveToParent();

/**
 * Move cursor to first child node of currently selected node.
 * 
 * @return the cursor instance
 */
INodeCursor moveToFirstChild(); 
```

以及相应的布尔 hasParent() 和 hasFirstChild()... 方法。到目前为止，moveToX() 方法还返回了一个布尔值，但我认为是这样的：

`trx.moveToParent().moveToParent().insertFirstChild(...).moveToRightSibling()`...如果您知道自己在做什么，那就更有趣了。但是，我不确定如果失败该怎么办（返回 null 以立即生成 NPE？）。也许最好返回游标实例，调用者必须知道游标可能根本没有移动。

感谢您的任何建议。

编辑：也许这也是 Google Guava Optional 的一个用例？这样我就可以从两者中得到最好的了？

`trx.moveToRightSibling().get().moveToRightSibling().get().insertTextAsFirstChild("foo")`

和

`if (trx.moveToRightSibling.isPresent()) && trx.moveToRightSibling.isPresent() && "foo".equals(rtx.getValue) { ... }`

加上额外的 trx.hasRightSibling()... 方法。所以也许是一个自写的简单包装器，具有大致相同的语义但名称不同。

`if (trx.moveToRightSibling().didSucceed() && ...)`和 `trx.moveToRightSibling().get().moveToRightSibling().get() ...)`

编辑2：例如：

```
/**
 * Determines if the {@link INodeCursor} moved to a node or not. Based on the
 * idea of providing a wrapper just like in Google Guava's {@link Optional}
 * class.
 * 
 * @author Johannes Lichtenberger
 * 
 * @param <T>
 *          type parameter, the cursor
 */
public abstract class Move<T extends INodeCursor> {
  /**
   * Returns a {@link Moved} instance with no contained reference.
   */
  @SuppressWarnings("unchecked")
  public static <T extends INodeCursor> Move<T> notMoved() {
    return (Move<T>) NotMoved.INSTANCE;
  }

  /**
   * Returns a {@code Moved} instance containing the given non-null reference.
   */
  public static <T extends INodeCursor> Moved<T> moved(final @Nonnull T pMoved) {
    return new Moved<T>(checkNotNull(pMoved));
  }

  /**
   * Determines if the cursor has moved.
   * 
   * @return {@code true} if it has moved, {@code false} otherwise
   */
  public abstract boolean hasMoved();

  /**
   * Get the cursor reference.
   * 
   * @return cursor reference
   */
  public abstract T get();
} 
```

编辑3：和我的moveTo（long）方法，所有其他moveToX（）方法都基于：

```
@Override
public Move<? extends INodeCursor> moveTo(final long pNodeKey) {
    assertNotClosed();
    if (pNodeKey == EFixed.NULL_NODE_KEY.getStandardProperty()) {
        return Move.notMoved();
    }

    // Remember old node and fetch new one.
    final INode oldNode = mCurrentNode;
    Optional<? extends INodeBase> newNode;
    try {
        // Immediately return node from item list if node key negative.
        if (pNodeKey < 0) {
            if (mItemList.size() > 0) {
                newNode = mItemList.getItem(pNodeKey);
            } else {
                newNode = Optional.absent();
            }
        } else {
            final Optional<? extends INodeBase> node = mPageReadTrx.getNode(
                    pNodeKey, EPage.NODEPAGE);
            newNode = node;
        }
    } catch (final SirixIOException e) {
        newNode = Optional.absent();
    }

    if (newNode.isPresent()) {
        mCurrentNode = (INode) newNode.get();
        return Move.moved(this);
    } else {
        mCurrentNode = oldNode;
        return Move.notMoved();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T03:02:19.617

就个人而言，在这种情况下，我会创建自己的例外：

```
public class NoSuchNodeException extends RuntimeException {
  ...
} 
```

此异常将从您的游标方法中引发。它允许客户端响应一个有意义的条件（他们请求移动到一个不存在的节点），而不是一个通用的 NPE，这可能意味着任何事情。是否检查异常取决于您的要求。不过，在这种情况下，我发现未经检查的异常要友好得多。

```
public INodeCursor moveToParent() {
   if (currentNode.parent == null) {
       throw new NoSuchNodeException("Node has no parent", currentNode);
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T05:21:07.903

你可以很聪明地创建一个 NullNode 实例。当您 moveToChild 并且没有子节点时，返回 NullNode 并将其父节点设置为您的实际节点。然后，如果你得到一个空节点，你可以检查 isNullNode，你可以用“printPath”方法或其他方法将它带回你从树上掉下来的地方。

如果假设您的分支通常是正确的，那么它会使您的方法链接更加清晰，因为理想情况下它们很少会失败。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T01:59:47.467

根据以上评论：

问题归结为：1）我应该使用布尔返回还是实例

无论哪种方式都需要错误检查：

```
if (trx.moveToParent()) {
    if (trx.moveToParent()) {
        trx.doSomething(); 
```

对比

```
try {
    trx.moveToParent().moveToParent().doSomething();
}
catch(NPE ex) { 
```

第一种方式稍微明显一点，就是修改了trx，但是使用起来有点不方便（比如报错需要一个`else`for每个条件[设置一个标志，然后根据这个标志做一个单一的报错]）

不改变节点的想法与返回布尔值相同，但更丑陋

```
trx.noveToParent();
if (trx.didMove()) {
    trx.moveToParent();
    if (trx.didMove()) {
        trx.doSomething(); 
```

如果是我，我会返回节点并抛出 NPE——您确实需要确保您的变量已正确更新。即 trx.moveToParent().moveToParent() 实际上修改了 trx 两次，而不是一次更改为 trx 和一次更改为某个匿名副本。好的单元测试在这里会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T13:04:32.543

我建议立即抛出一个自己的异常（可能是 NPE 的一个子类），所以它是快速失败的。`lenient()`有时您可能希望通过返回具有所有移动方法但没有变异方法的不同类的方法来使事情变得更容易。宽松类的移动方法从不抛出；如果发生错误，它们会返回失败的实例。通过使用`strict()`，您可以返回原始类或获取异常，以防路径上的某处出现错误。

通常，你会做类似的事情

```
trx.up().right().right().firstChild().addChild(....); 
```

并在出现问题时立即获得异常（是的，我会简化方法名称，“moveToRight”如何比“right”更好？）。“宽松”的使用可能就像

```
ILenientNodeCursor c1 = trx.lenient().up().right().right().firstChild();
if (c1.failed()) c1 = trx.right().right().firstChild();
if (!c1.failed()) c1.strict().addChild(...); 
```

我不太确定“宽松”，但我很确定正常的行为应该是严格的，尽可能快地投掷。这肯定比其他任何东西都不容易出错，而且大多数时候更容易使用。

# jquery - 将鼠标悬停在另一个 div 上时更改 div 的内容

> ID：12632440
> 
> 赞同：1
> 
> 时间：2012-09-28T01:35:32.490
> 
> 标签：jquery, ajax

我设置了一个页面，以便在页面（左中框）的 3x2 块中设置几个公司徽标。

当用户单击徽标时，徽标块旁边的另一个 div（右中框）的内容会发生变化，加载代表 4 个不同数据集的 4 个缩略图图标。

我现在想做的是：

当用户将鼠标悬停在 4 个缩略图图像之一上时，它会将徽标块替换为隐藏 div (中间框-right1) 的内容，其中包含与所选缩略图图像相关的信息。当他们将鼠标从缩略图上移开时，徽标块会重新出现。

现在，单击徽标可以很好地加载第一个 div 的内容，但是将鼠标悬停在第二个 div 中的图像上不会导致徽标块被 mid-box-right1 隐藏 div 中的内容替换。

我通过以下方式设置它：

```
<div id="HiddenContainerOne" style="display:none;">
    <div id="mid-box-left1"><a href="#" class="testbox1"><-- content here --></a></div>
</div>

<div id="HiddenContainerTwo" style="display:none">
    <div id="mid-box-right1"><-- content here --></a></div>
</div>

<div id="mid-box-right">
    <a href="#" class="logo-change"><-- logo here --></a>
</div>

<div id="mid-box-left">
    <-- content here -->    
</div> 
```

JQuery如下：

```
$(document).ready(function() {

$(".logo-change").click(function() {
    $("#mid-box-left").fadeOut(500, function() {
        $("#mid-box-left").html($("#mid-box-left1").html())
        .hide()
        .fadeIn(500, function () {
            $('#mid-box-left');
        });
    });
    return false;
});

$(".testbox1").mouseover(function() {
        $("#mid-box-right").html($("#mid-box-right1").html())
        .hide()
        .fadeIn(500, function () {
            $('#mid-box-right');
        });
    return false;
});
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T01:52:48.723

问题是您正在复制 hiddencontainerone 的 html

```
$('foo').html($('link').html()); 
```

这不会复制事件。因此，复制的链接上不存在 mouseover 事件。您应该`clone`在复制后使用或重新绑定您的事件处理程序。

或者，您可以使用`on`和监视鼠标悬停事件的更高级别节点。

[http://jsfiddle.net/jByc7/](http://jsfiddle.net/jByc7/)

```
$('body').on('mouseover', '.testbox1', function() {
        console.log('mouseover');
        $("#mid-box-right").html($("#mid-box-right1").html())
        .hide()
        .fadeIn(500, function () {
            $('#mid-box-right');
        });
    return false;
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T01:47:33.087

用这个包装你的 jquery 代码

检查文档是否已加载所有 html 元素

```
$(document).ready(function(){

//your jquery code

 }); 
```

# javascript - 无法从 javascript 调用 AS3。闪光

> ID：12632445
> 
> 赞同：1
> 
> 时间：2012-09-28T01:36:01.937
> 
> 标签：javascript, actionscript-3, flash

我想做的就是在我的 AS3 中获取一个函数，以便从 javascript 调用。我已经尝试了大约 20 个 tuts/代码，什么都没有。

我的 Javascript/HTML： http: [//pastebin.com/vPbu41PN](http://pastebin.com/vPbu41PN)

AS3 代码：

```
function onBUnloadb(): void {
    sa.addText("done");
    xmlSocket.send(MyName+"||"+MyKey+"|| /disconnected "+MyName);
}
ExternalInterface.addCallback("onBUnload", onBUnloadb); 
```

我在 firefox 中收到错误消息 Error: TypeError: flashMovie.onBUnload is not a function

这真的不应该这么难：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T02:17:50.967

您的 AS3 代码很好，只需确保您的 javascript 代码正常工作。在 ConfirmExit 中放置一个警报，并确保您正在获取 swfobject：

```
function confirmExit() {
   var flashMovie=getFlashMovieObject("caht");
   alert("calling as3 " + flashMovie);
   flashMovie.onBUnload();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T07:37:14.107

从什么协议加载 HTML 页面？如果是`file:///`，则在与 JavaScript 通信时存在安全限制。

尝试调用`Security.allowDomain('*')`您的 SWF。

# php - PHP imap 下载附件

> ID：12632446
> 
> 赞同：1
> 
> 时间：2012-09-28T01:36:09.893
> 
> 标签：php, imap

下面我使用 PHP 的 imap 库循环浏览电子邮件。它有效，但我坚持保存邮件中的附件。

```
<?php

$hostname = '{imap.gmail.com:993/imap/ssl}INBOX';
$username = 'someemail@somedomain.com';
$password = 'somepassword';

/* try to connect */
$imap_connection = imap_open($hostname,$username,$password) or die('Cannot connect to Gmail: ' . imap_last_error());

/* grab emails */
$emails = imap_search($imap_connection,'ALL');

/* if emails are returned, cycle through each... */
if($emails) {

    /* begin output var */
    $output = '';

    /* put the newest emails on top */
    rsort($emails);

    /* for every email... */
    foreach($emails as $email_number) {

        $structure = imap_fetchstructure($imap_connection,$email_number);
        if(isset($structure->parts) && count($structure->parts)){

            for($i = 0; $i < count($structure->parts); $i++){   

                if(!empty($structure->parts[$i]->bytes)){

                    if(!empty($ifdparameters)){
                        echo "File: ----".$structure->parts[$i]->dparameters[0]->value; 
                                            // returns: testMeOut.jpg

                    }
                }

            } //eof $i loop

        } //eof $structure->parts 

          } // eof foreach $emails

} // eof if($emails)

?> 
```

我正在尝试了解如何将附件保存到服务器上的目录中。我知道：$structure->parts[$i]->dparameters[0]->value; 正在返回附件的名称。

我确定我需要使用 imap_fetchbody() 做一些事情，但我对在线阅读教程和 php 网站感到非常困惑。

谁能看到我关于如何从 $message 中保存附件的最后几个步骤？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T19:53:08.653

一旦编写了用于下载 Excel 文件的内容；

猜猜它可以更改为几乎任何电子邮件附件。

基本上，它演示了您缺少的两个步骤：

```
 $message = array();
    $message["attachment"]["type"][0] = "text";
    $message["attachment"]["type"][1] = "multipart";
    $message["attachment"]["type"][2] = "message";
    $message["attachment"]["type"][3] = "application";
    $message["attachment"]["type"][4] = "audio";
    $message["attachment"]["type"][5] = "image";
    $message["attachment"]["type"][6] = "video";
    $message["attachment"]["type"][7] = "other";

    function get_decode_value($message, $encoding) {
        switch($encoding) {
            case 0:case 1:$message = imap_8bit($message);break;
            case 2:$message = imap_binary($message);break;
            case 3:case 5:$message=imap_base64($message);break;
            case 4:$message = imap_qprint($message);break;
        }
        return $message;
    }

    for ($jk = 1; $jk <= imap_num_msg($mbox); $jk++) {

        $structure = imap_fetchstructure($mbox, $jk , FT_UID);

        /* retrieve message timestamp */
        $header = imap_headerinfo($mbox, $jk);
        $timestamp = $header->udate;

        $parts = $structure->parts;
        $fpos=2;
        for($i = 1; $i < count($parts); $i++) {
            $message['pid'][$i] = ($i);
            $part = $parts[$i];

            if($part->disposition == "ATTACHMENT") {

                $message["type"][$i] = $message["attachment"]["type"][$part->type] . "/" . strtolower($part->subtype);
                $message["subtype"][$i] = strtolower($part->subtype);

                $ext = $part->subtype;
                $params = $part->dparameters;
                $filename = $part->dparameters[0]->value;
                $body="";$data="";

                if($filename=='SomeFile.XLS'){
                    $body = imap_fetchbody($mbox, $jk, $fpos);
                    $dst = '/SomeLocalPath/SomeOtherFile.xls';

                    /* don't overwrite */
                    if(!file_exists($dst)){
                        $fp = fopen($dst, 'w');
                        $data = get_decode_value($body, $part->type);
                        fputs($fp, $data);
                        fclose($fp);
                    }
                }
                $fpos++;
            }
        }
    } 
```

我宁愿想知道为什么无法通过任何 Google API 访问附件...

为什么没有像单向 Mandrill API 这样的双向 GMail API？

# ruby-on-rails - 在 Rails 中存储哈希数组

> ID：12632447
> 
> 赞同：0
> 
> 时间：2012-09-28T01:36:13.140
> 
> 标签：ruby-on-rails, activerecord

我正在开发 Rails 中的应用程序，我想在 ActiveRecord 中存储有序的哈希数组，但它遇到了障碍。我想存储一个 URL、哈希在数组中的位置以及与单个关键字相关的一些指标。

我尝试在关键字/排名模型之间使用 has_many/belongs_to 关联，并尝试使用序列化将哈希数组存储在单个单元格中，但由于某种原因它没有写入数据库。

这是我要存储的内容：

```
Keyword - [{rank(1), url, metric1, metric2}, {rank(2), url, metric1, metric2},...{rank(n), url, metric1, metric2}] 
```

我想我只是在技术实现上苦苦挣扎；尝试了两种不同的模型，包括关联、序列化等。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T03:33:52.277

如果它没有写入数据库，请首先确保它`attr_accessible`。另外，请确保 Array/Hash 的列的类型为`:text`。

# grails - 具有不同附加程序的 Grails 日志记录配置

> ID：12632449
> 
> 赞同：0
> 
> 时间：2012-09-28T01:36:22.327
> 
> 标签：grails, log4j

这是我当前的 log4j 配置。问题是特定于开发的部分。

```
log4j = {
    appenders {
        console name:'stdout',
                threshold: org.apache.log4j.Level.ERROR

        rollingFile name: "appenderAccessLog",
 ...                    
        rollingFile name: "appenderAppLog",
    ...              

        environments {
            development{
                rollingFile name: "appenderDebugLog",
                    threshold: org.apache.log4j.Level.DEBUG,
                    ....
            }
        }

    }

    error       'org.codehaus.groovy.grails.web.servlet',  //  controllers
                'org.codehaus.groovy.grails.web.pages', //  GSP
                'org.codehaus.groovy.grails.web.sitemesh', //  layouts
                'org.codehaus.groovy.grails.web.mapping.filter', // URL mapping
                'org.codehaus.groovy.grails.web.mapping', // URL mapping
                'org.codehaus.groovy.grails.commons', // core / classloading
                'org.codehaus.groovy.grails.plugins', // plugins
                'org.codehaus.groovy.grails.orm.hibernate', // hibernate integration
                'org.springframework',
                'org.hibernate',
                'net.sf.ehcache.hibernate'

    environments {
        production {
            // Override previous setting for 'grails.app.controller'
            root {
                error 'appenderAppLog','stdout'
                additivity = false
            }

        }              
                  debug additivity: false, stdout :['mycompany',
                     'mycompany.security',
                     'mycompany.common',
                     'grails.app.services.mycompany.services']

            debug additivity: false, appenderDebugLog :['mycompany',
                'mycompany.security',
                'mycompany.common',
                'grails.app.services.mycompany.services']

            root {
                error 'appenderAppLog','stdout'
                additivity = true
            } 
```

现在，您可以在上面看到 2 个调试语句，其中包含特定的包重定向到附加程序。现在，如果我想对包 XXX 使用调试并发送到附加程序 A 和 B，我将不得不使用上述定义 - 它是 debugg appender1: XXX 和 debug appender2: XXX 包的重复。

我检查了 grails 日志 - 理想情况下，以下内容应该可以解决额外的调试/附加语句：error org.springframework

```
 debug mycompany.packagenames...

        root {
            error 'appenderAppLog','stdout'
                            debug 'appenderDebugLog', 'stdout'
            additivity = true
        } 
```

但是当我这样做时，实际发生的是错误类别中列出的所有包 - 开始将调试消息发送到 appenderDebugLog 文件。当我在顶部定义每个级别时明确说明了不同的包时 - 为什么根附加程序中的调试配置会创建此问题？

请指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T21:07:58.213

不确定是否是这种情况，但可能移动下面的所有包装规格`appenders`和`root`部分会有所帮助。在 root 中同时指定`stdout`和指定看起来是多余的。`error``debug`

并且有一个选项可以为细粒度配置指定特定于 appender 的定义（例如[http://snipplr.com/view/63391/grails-log4j-for-different-environments--an-example/ ）。](http://snipplr.com/view/63391/grails-log4j-for-different-environments--an-example/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-03-03T15:36:36.467

在我使用 Grails 2 进行的测试中，该`environments`部分中的`log4j`部分似乎不适用于附加程序。但是，您可以`log4j`在根`environments`部分创建单独的配置，但不幸的是，这意味着您必须复制所有内容，例如

```
environments {
    development {
        log4j {
            console name:'stdout',
                threshold: org.apache.log4j.Level.ERROR

            rollingFile name: "appenderAccessLog",

            rollingFile name: "appenderAppLog",

            rollingFile name: "appenderDebugLog",
                threshold: org.apache.log4j.Level.DEBUG,
                ....
    }
    production {
        log4j {
            console name:'stdout',
                threshold: org.apache.log4j.Level.ERROR

            rollingFile name: "appenderAccessLog",

            rollingFile name: "appenderAppLog",
        }
    }
} 
```

[https://grails.github.io/grails2-doc/2.5.x/guide/conf.html#environments](https://grails.github.io/grails2-doc/2.5.x/guide/conf.html#environments)

# collections - 发布/订阅同一服务器集合的多个子集

> ID：12632452
> 
> 赞同：36
> 
> 时间：2012-09-28T01:36:36.383
> 
> 标签：collections, meteor, publish-subscribe

**编辑：这个问题、一些答案和一些评论包含很多错误信息。了解[Meteor 集合、发布和订阅如何工作](https://stackoverflow.com/a/21853298/1269037)，以准确了解发布和订阅同一服务器集合的多个子集。**

* * *

如何将服务器上单个集合的不同子集（或“视图”）发布为客户端上的多个集合？

这是一些伪代码来帮助说明我的问题：

## `items`服务器上的采集

假设我`items`在服务器上有一个包含数百万条记录的集合。我们还假设：

1.  50 条记录的`enabled`属性设置为`true`, 和；
2.  100 条记录的`processed`属性设置为`true`。

所有其他都设置为`false`。

```
items:
{
    "_id": "uniqueid1",
    "title": "item #1",
    "enabled": false,
    "processed": false
},
{
    "_id": "uniqueid2",
    "title": "item #2",
    "enabled": false,
    "processed": true
},
...
{
    "_id": "uniqueid458734958",
    "title": "item #458734958",
    "enabled": true,
    "processed": true
} 
```

## 服务器代码

让我们发布同一个服务器集合的两个“视图”。一个将发送一个包含 50 条记录的游标，另一个将发送一个包含 100 条记录的游标。在这个虚构的服务器端数据库中有超过 4.58 亿条记录，客户端不需要知道所有这些（实际上，在这个示例中，将它们全部发送下来可能需要几个小时）：

```
var Items = new Meteor.Collection("items");

Meteor.publish("enabled_items", function () {
    // Only 50 "Items" have enabled set to true
    return Items.find({enabled: true});
});

Meteor.publish("processed_items", function () {
    // Only 100 "Items" have processed set to true
    return Items.find({processed: true});
}); 
```

## 客户端代码

为了支持延迟补偿技术，我们被迫`Items`在客户端声明一个集合。缺陷在哪里应该很明显：如何区分`Items`for`enabled_items`和`Items`for `processed_items`？

```
var Items = new Meteor.Collection("items");

Meteor.subscribe("enabled_items", function () {
    // This will output 50, fine
    console.log(Items.find().count());
});

Meteor.subscribe("processed_items", function () {
    // This will also output 50, since we have no choice but to use
    // the same "Items" collection.
    console.log(Items.find().count());
}); 
```

我当前的解决方案涉及猴子修补 _publishCursor 以允许使用订阅名称而不是集合名称。但这不会做任何延迟补偿。每次写入都必须往返于服务器：

```
// On the client:
var EnabledItems = new Meteor.Collection("enabled_items");
var ProcessedItems = new Meteor.Collection("processed_items"); 
```

有了猴子补丁，这将起作用。但是进入离线模式并且更改不会立即出现在客户端上——我们需要连接到服务器才能看到更改。

什么是正确的方法？

* * *

### 编辑：我刚刚重新访问了这个帖子，我意识到，就目前而言，我的问题和答案以及过多的评论带有很多错误信息。

归根结底是我误解了发布-订阅关系。我认为当您发布游标时，它将作为与源自同一服务器集合的其他已发布游标不同的集合登陆客户端。这根本不是它的工作原理。这个想法是客户端和服务器都具有相同的集合，但集合中的内容*不同*。pub-sub 合同会协商哪些文件最终会出现在客户端上。汤姆的回答在技术上是正确的，但缺少一些细节来扭转我的假设。根据汤姆的解释，我在另一个 SO 线程中回答了与我类似的问题，但请记住我最初对 Meteor 的 pub-sub 的误解：

希望这可以帮助那些遇到这个线程并且比任何事情都更加困惑的人！

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-28T07:11:58.530

当您想查看项目时，您不能只在客户端使用相同的查询吗？

在 lib 目录中：

```
enabledItems = function() {
  return Items.find({enabled: true});
}
processedItems = function() {
  return Items.find({processed: true});
} 
```

在服务器上：

```
Meteor.publish('enabled_items', function() {
  return enabledItems();
});
Meteor.publish('processed_items', function() {
  return processedItems();
}); 
```

在客户端

```
Meteor.subscribe('enabled_items');
Meteor.subscribe('processed_items');

Template.enabledItems.items = function() {
  return enabledItems();
};
Template.processedItems.items = function() {
  return processedItems();
}; 
```

如果您考虑一下，最好以这种方式插入（本地）一个同时启用和处理的项目，它可以出现在两个列表中（与如果您有两个单独的集合相反）。

## 笔记

我意识到我有点不清楚，所以我已经扩展了一点，希望它有所帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-30T18:16:02.297

您可以像这样制作两个单独的出版物..

**服务器出版物**

```
Meteor.publish("enabled_items", function(){
    var self = this;

    var handle = Items.find({enabled: true}).observe({
        added: function(item){
            self.set("enabled_items", item._id, item);
            self.flush();
        },
        changed: function(item){
            self.set("enabled_items", item._id, item);
            self.flush();
        }
    });

    this.onStop(function() {
        handle.stop();
    });
});

Meteor.publish("disabled_items", function(){
    var self = this;

    var handle = Items.find({enabled: false}).observe({
        added: function(item){
            self.set("disabled_items", item._id, item);
            self.flush();
        },
        changed: function(item){
            self.set("disabled_items", item._id, item);
            self.flush();
        }
    });

    this.onStop(function() {
        handle.stop();
    });
}); 
```

**客户订阅**

```
var EnabledItems = new Meteor.Collection("enabled_items"),
    DisabledItems = new Meteor.Collection("disabled_items");

Meteor.subscribe("enabled_items");
Meteor.subscribe("disabled_items"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T03:35:19.223

`$or`通过使用每个集合的单个发布/订阅来解决问题，并在`find`查询中加以利用，我已经设法取得了一些有希望的初步结果。

这个想法是提供一个包装器`Meteor.Collection`，允许您添加“视图”，它们基本上是命名的游标。但真正发生的是这些游标不是单独运行的......它们的选择器被提取，$or'd 一起并作为单个查询运行并运行到单个 pub-sub。

它并不完美，因为偏移量/限制不适用于这种技术，但目前 minimongo 无论如何都不支持它。

但最终它允许你做的是声明看起来像同一个集合的不同子集，但在引擎盖下它们是同一个子集。前面只有一点抽象，让它们感觉干净利落。

例子：

```
// Place this code in a file read by both client and server:
var Users = new Collection("users");
Users.view("enabledUsers", function (collection) {
    return collection.find({ enabled: true }, { sort: { name: 1 } });
}); 
```

或者如果你想传递参数：

```
Users.view("filteredUsers", function (collection) {
    return collection.find({ enabled: true, name: this.search, { sort: { name: 1 } });
}, function () {
    return { search: Session.get("searchterms"); };
}); 
```

参数作为对象给出，因为它是一个单一的发布/订阅 $or'd 在一起，我需要一种方法来获取正确的参数，因为它们混合在一起。

并在模板中实际使用它：

```
Template.main.enabledUsers = function () {
    return Users.get("enabledUsers");
};
Template.main.filteredUsers = function () {
    return Users.get("filteredUsers");
}; 
```

简而言之，我利用在服务器和客户端中运行相同的代码的优势，如果服务器没有做某事，客户端会做，反之亦然。

最重要的是，只有您感兴趣的记录才会发送给客户。这一切都可以在没有抽象层的情况下通过简单地自己执行 $or 来实现，但是随着更多子集的添加，$or 会变得非常难看。这只是帮助用最少的代码管理它。

我很快写了这个来测试它，对篇幅和缺乏文档表示歉意：

## 测试.js

```
// Shared (client and server)
var Collection = function () {
    var SimulatedCollection = function () {
        var collections = {};

        return function (name) {
            var captured = {
                find: [],
                findOne: []
            };

            collections[name] = {
                find: function () {
                    captured.find.push(([]).slice.call(arguments));
                    return collections[name];
                },
                findOne: function () {
                    captured.findOne.push(([]).slice.call(arguments));
                    return collections[name];
                },
                captured: function () {
                    return captured;
                }
            };

            return collections[name];
        };
    }();

    return function (collectionName) {
        var collection = new Meteor.Collection(collectionName);
        var views = {};

        Meteor.startup(function () {
            var viewName, view, pubName, viewNames = [];

            for (viewName in views) {
                view = views[viewName];
                viewNames.push(viewName);
            }

            pubName = viewNames.join("__");

            if (Meteor.publish) {
                Meteor.publish(pubName, function (params) {
                    var viewName, view, selectors = [], simulated, captured;

                    for (viewName in views) {
                        view = views[viewName];

                        // Run the query callback but provide a SimulatedCollection
                        // to capture what is attempted on the collection. Also provide
                        // the parameters we would be passing as the context:
                        if (_.isFunction(view.query)) {
                            simulated = view.query.call(params, SimulatedCollection(collectionName));
                        }

                        if (simulated) {
                            captured = simulated.captured();
                            if (captured.find) {
                                selectors.push(captured.find[0][0]);
                            }
                        }
                    }

                    if (selectors.length > 0) {
                        return collection.find({ $or: selectors });
                    }
                });
            }

            if (Meteor.subscribe) {
                Meteor.autosubscribe(function () {
                    var viewName, view, params = {};

                    for (viewName in views) {
                        view = views[viewName];
                        params = _.extend(params, view.params.call(this, viewName));
                    }

                    Meteor.subscribe.call(this, pubName, params);
                });
            }
        });

        collection.view = function (viewName, query, params) {
            // Store in views object -- we will iterate over it on startup
            views[viewName] = {
                collectionName: collectionName,
                query: query,
                params: params
            };

            return views[viewName];
        };

        collection.get = function (viewName, optQuery) {
            var query = views[viewName].query;
            var params = views[viewName].params.call(this, viewName);

            if (_.isFunction(optQuery)) {
                // Optional alternate query provided, use it instead
                return optQuery.call(params, collection);
            } else {
                if (_.isFunction(query)) {
                    // In most cases, run default query
                    return query.call(params, collection);
                }
            }
        };

        return collection;
    };
}();

var Items = new Collection("items");

if (Meteor.isServer) {
    // Bootstrap data -- server only
    Meteor.startup(function () {
        if (Items.find().count() === 0) {
            Items.insert({title: "item #01", enabled: true, processed: true});
            Items.insert({title: "item #02", enabled: false, processed: false});
            Items.insert({title: "item #03", enabled: false, processed: false});
            Items.insert({title: "item #04", enabled: false, processed: false});
            Items.insert({title: "item #05", enabled: false, processed: true});
            Items.insert({title: "item #06", enabled: true, processed: true});
            Items.insert({title: "item #07", enabled: false, processed: true});
            Items.insert({title: "item #08", enabled: true, processed: false});
            Items.insert({title: "item #09", enabled: false, processed: true});
            Items.insert({title: "item #10", enabled: true, processed: true});
            Items.insert({title: "item #11", enabled: true, processed: true});
            Items.insert({title: "item #12", enabled: true, processed: false});
            Items.insert({title: "item #13", enabled: false, processed: true});
            Items.insert({title: "item #14", enabled: true, processed: true});
            Items.insert({title: "item #15", enabled: false, processed: false});
        }
    });
}

Items.view("enabledItems", function (collection) {
    return collection.find({
        enabled: true,
        title: new RegExp(RegExp.escape(this.search1 || ""), "i")
    }, {
        sort: { title: 1 }
    });
}, function () {
    return {
        search1: Session.get("search1")
    };
});

Items.view("processedItems", function (collection) {
    return collection.find({
        processed: true,
        title: new RegExp(RegExp.escape(this.search2 || ""), "i")
    }, {
        sort: { title: 1 }
    });
}, function () {
    return {
        search2: Session.get("search2")
    };
});

if (Meteor.isClient) {
    // Client-only templating code

    Template.main.enabledItems = function () {
        return Items.get("enabledItems");
    };
    Template.main.processedItems = function () {
        return Items.get("processedItems");
    };

    // Basic search filtering
    Session.get("search1", "");
    Session.get("search2", "");

    Template.main.search1 = function () {
        return Session.get("search1");
    };
    Template.main.search2 = function () {
        return Session.get("search2");
    };
    Template.main.events({
        "keyup [name='search1']": function (event, template) {
            Session.set("search1", $(template.find("[name='search1']")).val());
        },
        "keyup [name='search2']": function (event, template) {
            Session.set("search2", $(template.find("[name='search2']")).val());
        }
    });
    Template.main.preserve([
        "[name='search1']",
        "[name='search2']"
    ]);
}

// Utility, shared across client/server, used for search
if (!RegExp.escape) {
    RegExp.escape = function (text) {
        return text.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&");
    };
} 
```

## 测试.html

```
<head>
    <title>Collection View Test</title>
</head>

<body>
    {{> main}}
</body>

<template name="main">
    <h1>Collection View Test</h1>
    <div style="float: left; border-right: 3px double #000; margin-right: 10px; padding-right: 10px;">
        <h2>Enabled Items</h2>
        <input type="text" name="search1" value="{{search1}}" placeholder="search this column" />
        <ul>
            {{#each enabledItems}}
                <li>{{title}}</li>
            {{/each}}
        </ul>
    </div>
    <div style="float: left;">
        <h2>Processed Items</h2>
        <input type="text" name="search2" value="{{search2}}" placeholder="search this column" />
        <ul>
            {{#each processedItems}}
                <li>{{title}}</li>
            {{/each}}
        </ul>
    </div>
</template> 
```

# c++ - 指向结构的 C++ 函数返回指针变得很奇怪

> ID：12632455
> 
> 赞同：1
> 
> 时间：2012-09-28T01:36:54.610
> 
> 标签：c++, function, pointers, struct, return

我正在做一项任务，该任务要创建一个程序，该程序可以使用链表从文本文件中读取多项式。当我试图从 read_poly 函数返回链表“poly_pointer”的起始指针时，事情变得很奇怪。

预期输出应为 -12

但我得到的是-10

如果我在 read_poly 返回之前添加一行代码

```
cout << curr_ptr->coef; 
```

输出会突然变成 2-12 有人可以解释一下为什么以及如何解决这个问题吗？

多项式.h

```
#ifndef _POLYNOMIAL_H_
#define _POLYNOMIAL_H_

using namespace std;

typedef struct poly_node *poly_pointer;

typedef struct poly_node {
  int coef;
  int expon;
  poly_pointer link;
};

poly_pointer addNode(int coef, int expon);

#endif 
```

多项式.cpp

```
#include <iostream>
#include <fstream>
#include <string>
#include "Polynomial.h"
using namespace std;

poly_pointer addNode(int coef, int expon)
{
    poly_node a;
    poly_pointer ptr = &a;
    a.coef = coef;
    a.expon = expon;
    return ptr;
}

poly_pointer read_poly(const char* fileName)
{
    poly_pointer start_ptr, curr_ptr;
    start_ptr = curr_ptr = addNode(-1, 6);
    curr_ptr = curr_ptr->link = addNode(2, 3);
    return start_ptr;
} 
```

主文件

```
#include <iostream>
#include "Polynomial.h"
using namespace std;

int main(void)
{
    poly_pointer a, b, d, e, f;
    a = read_poly("input1.txt");
    cout << a->coef;
    cout << a->link->coef;

    cout << "\n-eop-";
    cin.get();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T01:48:37.683

addNode 正在返回一个指向本地分配的 poly_node 的指针。

以下是马虎的内存分配，但会起作用。

```
 poly_pointer a = new poly_pointer();
  a->coef = coef;
  a->expon = expon;
  return a; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T01:42:38.953

```
poly_node a;
poly_pointer ptr = &a;
a.coef = coef;
a.expon = expon;
return ptr; 
```

坏的！您返回了一个指向局部变量的指针。在函数退出后使用该指针会触发未定义的行为。如果你想返回一个超过函数生命周期的值，请使用`malloc`or代替。`new`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T01:59:26.017

只需按值返回即可。适合您拥有的结构。

```
poly_node addNode(int coef, int expon)
{
    poly_node a;
    a.coef = coef;
    a.expon = expon;
    return a;
} 
```

如果类型很大，则在堆上分配内存并返回指针。释放内存的所有权在方法的调用者身上。

```
poly_pointer addNode(int coef, int expon)
{
    poly_pointer a = new poly_node();
    a->coef = coef;
    a->expon = expon;
    return a;
} 
```

如果您有支持 std::unique_ptr 或 std::shared_pointer 的编译器，请使用它们而不是原始指针。

# rally - SDK 2.0：页面工具？

> ID：12632456
> 
> 赞同：1
> 
> 时间：2012-09-28T01:37:00.250
> 
> 标签：rally

在 SDK 1.0 中，可以通过 appHeader 将“页面工具”添加到应用程序中。SDK 2.0 中是否有类似的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T00:05:48.643

不幸的是，目前 2.0 SDK 中还没有类似的页面工具菜单。

# linux - GFORTRAN_CONVERT_UNIT 环境变量在某些平台上不起作用？

> ID：12632457
> 
> 赞同：1
> 
> 时间：2012-09-28T01:37:11.757
> 
> 标签：linux, fortran, endianness, gfortran

我有一个相当单一的代码，它从未格式化的大端二进制文件中读取大量数据。通常，代码从设置环境变量 GFORTRAN_CONVERT_UNIT='native;big_endian:60-70,80-89' 的 bash 脚本中运行，然后使用其中一个单元号打开这些大端数据文件。这适用于 Fedora 和 RHEL。但是，当我在 Debian（以及包括 Ubuntu 和 Linux Mint 在内的衍生产品）、OpenSUSE 和 Arch Linux 上运行该程序时，在 Fortran 代码执行任何操作之前，我会收到以下 malloc 错误：

```
malloc.c:2451: sYSMALLOc: Assertion `(old_top == (((mbinptr) (((char *) &((av)->bins[((1) - 1) * 2])) - __builtin_offsetof (struct malloc_chunk, fd)))) && old_size == 0) || ((unsigned long) (old_size) >= (unsigned long)((((__builtin_offsetof (struct malloc_chunk, fd_nextsize))+((2 * (sizeof(size_t))) - 1)) & ~((2 * (sizeof(size_t))) - 1))) && ((old_top)->size & 0x1) && ((unsigned long)old_end & pagemask) == 0)' failed.
Aborted 
```

为了进一步演示这个问题，我编写了两个 Fortran 程序，一个用于编写简单的大端数据文件，一个用于读取它：

编写程序：

```
shane@linux-0r5g:~/temp> cat test_write.f90
program test_write
implicit none

integer, parameter :: NUM = 10
integer :: i

open (unit=88,form='unformatted',convert='big_endian')
do i = 1,NUM
  write (88) i
end do

close (88)

end program test_write 
```

阅读程序：

```
shane@linux-0r5g:~/temp> cat test_read.f90
program test_read
implicit none

integer, parameter :: NUM = 10
integer :: readInt
integer :: i

open (unit=88,form='unformatted')
do i = 1,NUM
  read (88) readInt
  write (*,*) readInt
end do

close (88)

end program test_read 
```

运行程序（这是在 OpenSUSE 12.2 32 位上使用 GCC 4.7.1，但在 Ubuntu 32 位上也失败）：

```
shane@linux-0r5g:~/temp> ./test_write 
shane@linux-0r5g:~/temp> ./test_read
    16777216
At line 10 of file test_read.f90 (unit = 88, file = 'fort.88')
Fortran runtime error: End of file
shane@linux-0r5g:~/temp> GFORTRAN_CONVERT_UNIT='native;big_endian:88' ./test_read
test_read: malloc.c:2451: sYSMALLOc: Assertion `(old_top == (((mbinptr) (((char *) &((av)->bins[((1) - 1) * 2])) - __builtin_offsetof (struct malloc_chunk, fd)))) && old_size == 0) || ((unsigned long) (old_size) >= (unsigned long)((((__builtin_offsetof (struct malloc_chunk, fd_nextsize))+((2 * (sizeof(size_t))) - 1)) & ~((2 * (sizeof(size_t))) - 1))) && ((old_top)->size & 0x1) && ((unsigned long)old_end & pagemask) == 0)' failed.
Aborted
shane@linux-0r5g:~/temp> 
```

显然，第一次尝试失败，因为它试图读取带有小端读取的大端文件，但第二次尝试应该有效。事实上，它确实适用于许多系统。设置 GFORTRAN_CONVERT_UNIT='big_endian' 而不是尝试挑选单元编号也适用于所有系统。

我不认为这是 32 位与 64 位的问题，因为单体代码位于 64 位服务器上，并且环境变量无论如何都应该工作......我现在在 32 位上运行这些，因为这就是我的笔记本电脑上有。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-09T22:08:47.147

此问题是由于 libgfortran 库中的错误造成的。自 gcc 4.7.3 以来它已被修复（参见[https://gcc.gnu.org/bugzilla/show_bug.cgi?id=54736](https://gcc.gnu.org/bugzilla/show_bug.cgi?id=54736)）。

# asp.net-mvc-3 - ASP.Net MVC 4 的 OAuthWebSecurity 可以打开弹出窗口吗

> ID：12632458
> 
> 赞同：9
> 
> 时间：2012-09-28T01:37:39.857
> 
> 标签：asp.net-mvc-3, asp.net-mvc-4, oauth-2.0, facebook-oauth, oauth-provider

我试图弄清楚如何使用 ASP.Net MVC 4 的新 OAuthWebSecurity 功能。单击 facebook 或 twitter 外部登录按钮时是否可以将表单发布到弹出窗口而不是刷新当前页面？在使用 Javascript 之前，我在 Twitter 和 Facebook 中使用了 oauth，外部身份验证将在弹出窗口中进行。异步返回结果后，弹出窗口将关闭。我可以使用 MVC 4 的新 OAuthWebSecurity 功能做类似的事情吗？谢谢。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-30T13:05:49.330

解决这个问题有几个方面：

1.  打开一个弹出窗口以适应身份验证序列。
2.  验证完成后关闭弹出窗口。
3.  处理身份验证失败。
4.  更新父页面以反映用户已通过身份验证的事实。

以下是我实现这些要求的方式，使用 MVC4`Internet Application`模板作为起点：

要在弹出窗口中启动身份验证序列（而不是重定向到新页面），您需要进行修改`_ExternalLoginListPartial.cshtml`，以便其表单回发针对由 JavaScript 函数启动的弹出窗口：

```
@model ICollection<AuthenticationClientData>

@if (Model.Count == 0)
{
    <div class="message-info">
        <p>There are no external authentication services configured. See <a href="http://go.microsoft.com/fwlink/?LinkId=252166">this article</a>
        for details on setting up this ASP.NET application to support logging in via external services.</p>
    </div>
}
else
{
    <form id="login-launch" action="@Url.Action("ExternalLogin", "Account")" method="POST" target="login-popup" onsubmit="invokeLogin();">
        @Html.AntiForgeryToken()
        <fieldset id="socialLoginList">
            <input type="hidden" id="provider" name="provider" />
            <input type="hidden" name="returnUrl" value="@ViewBag.ReturnUrl"/>
            <p>
                @foreach (var p in OAuthWebSecurity.RegisteredClientData)
                {
                    <button type="submit" onclick="$('#provider').attr('value', '@p.DisplayName'); $('#login-launch').submit();" title="Log in using @p.DisplayName">@p.DisplayName</button>
                }
            </p>
        </fieldset>
    </form>
}

<script type="text/javascript">
    function invokeLogin() {
        var chrome = 100;
        var width = 500;
        var height = 500;
        var left = (screen.width - width) / 2;
        var top = (screen.height - height - chrome) / 2;
        var options = "status=0,toolbar=0,location=1,resizable=1,scrollbars=1,left=" + left + ",top=" + top + ",width=" + width + ",height=" + height;
        window.open("about:blank", "login-popup", options);
    }
</script> 
```

在当前状态下，此代码正确启动弹出窗口并允许执行身份验证序列，但弹出窗口保持打开状态，如果指定了重定向 URL，则弹出窗口显示此页面，而不是将父页面重定向到此 URL。

要在成功（或失败）身份验证后让弹出窗口自行关闭，需要修改处理身份验证回调的控制器操作方法，以便它返回包含关闭弹出窗口的 JavaScript 的自定义视图。正如我们将在下面看到的，这种机制也可以用于实现上述目标 [3] 和 [4] 的解决方案。

```
[AllowAnonymous]
public ActionResult ExternalLoginCallback(string returnUrl)
{
    var result = OAuthWebSecurity.VerifyAuthentication(Url.Action("ExternalLoginCallback", new { ReturnUrl = returnUrl }));

    if (!result.IsSuccessful)
    {
        return View("LoginResult", new LoginResultViewModel(false, Url.Action("ExternalLoginFailure")));
    }

    if (OAuthWebSecurity.Login(result.Provider, result.ProviderUserId, createPersistentCookie: false))
    {
        return View("LoginResult", new LoginResultViewModel(true, returnUrl));
    }

    OAuthWebSecurity.CreateOrUpdateAccount(result.Provider, result.ProviderUserId, result.UserName);
    return View("LoginResult", new LoginResultViewModel(true, returnUrl));
} 
```

此操作方法是`ExternalLoginCallback()`原始项目模板附带的方法的简化版本。与原始实现不同，此简化示例不支持允许用户在创建新帐户时定义个性化用户名，也不允许将多个 OAuth 或 OpenID 帐户与单个 MVC 用户帐户关联。但是，通过扩展上述模式以合并原始模板的更复杂逻辑，这些功能是可行的。

上述操作方法的一个关键设计特征是它始终返回相同的视图，而不管身份验证尝试的结果如何。这是必要的，因为返回的视图包含关闭身份验证弹出窗口并调用父页面中任何必需的后续操作的 JavaScript。因此，如果您修改上述模式，则必须确保每个代码路径都返回一个`LoginResult`视图实例，并根据身份验证的结果正确填充。

这是`Loginresult`视图的标记：

```
@model LoginResultViewModel
@{
    Layout = null;

    var success = Model.Success ? "true" : "false";
    var returnUrl = Model.ReturnUrl == null ? "null" : string.Format("'{0}'", Model.ReturnUrl);
}

<!DOCTYPE html>
<html>
<head>
    <script type="text/javascript">
        if (window.opener && window.opener.loginCallback) {
            window.opener.loginCallback(@success, @Html.Raw(returnUrl));
        }

        window.close();
    </script>
</head>
</html> 
```

上面的视图接受一个类型的模型，`LoginResultViewModel`它反映了已完成的身份验证尝试的结果：

```
public class LoginResultViewModel
{
    public LoginResultViewModel(bool success, string returnUrl)
    {
        Success = success;
        ReturnUrl = returnUrl;
    }

    public bool Success { get; set; }
    public string ReturnUrl { get; set; }
} 
```

有了上述所有元素，就可以启动一个身份验证序列，该序列在序列完成时自动关闭的弹出窗口中执行。如果身份验证成功，用户将在此时登录，并且如果使用返回 URL 启动它（如果由对受`[Authorize]`属性保护的操作方法的请求触发，则会自动发生），父页面将被重定向到最初请求的 URL。

但是，如果用户明确启动身份验证（例如，通过访问登录页面），父页面将不会重定向，因此可能需要部分页面更新以反映用户现在已登录的事实。在 MVC 模板示例中，需要更新页面以显示用户名和`Logout`按钮，而不是`Login`和`Register`按钮。

这可以通过在布局视图中定义一个 JavaScript 回调函数来完成，该回调函数由身份验证弹出窗口执行的 JavaScript 调用：

```
<script type="text/javascript">
    function loginCallback(success, returnUrl) {
        if (returnUrl) {
            window.location.href = returnUrl;
        } else {
            $.ajax({
                url: '@Url.Action("LoginPartial", "Account")',
                success: function (result) {
                    $('#login').html(result);
                }
            });
        }
    }
</script> 
```

上面的 JavaScript 对呈现并返回现有`_LoginPartial`视图的新操作方法进行 AJAX 调用：

```
[HttpGet]
public ActionResult LoginPartial()
{
    if (Request.IsAjaxRequest())
    {
        return View("_LoginPartial");
    }

    return new EmptyResult();
} 
```

需要对原始项目模板进行最后一次修改。`_LoginPartial`必须修改视图以在没有布局视图的情况下呈现：

```
@{
    Layout = null;
} 
```

# javascript - localStorage.getItem('item') 是否优于 localStorage.item 或 localStorage['item']？

> ID：12632463
> 
> 赞同：92
> 
> 时间：2012-09-28T01:38:08.100
> 
> 标签：javascript, syntax, local-storage

我最近问[了一个关于 LocalStorage 的问题](https://stackoverflow.com/questions/12623951/localstorage-get-item-with-dot-bracket-notation-not-working-with-json-parse)。尚未设置该项目时，使用`JSON.parse(localStorage.item)`and `JSON.parse(localStorage['item'])`were not working 返回。`NULL`

然而，`JSON.parse(localStorage.getItem('item')`确实奏效了。事实证明，`JSON.parse(localStorage.testObject || null)`也有效。

[其中一条评论](https://stackoverflow.com/questions/12623951/localstorage-get-item-with-dot-bracket-notation-not-working-with-json-parse/12624333#comment17030808_12624333)基本上是这样说的，`localStorage.getItem()`并且`localStorage.setItem()`应该始终首选：

> getter 和 setter 提供了一种一致的、标准化的和跨浏览器兼容的方式来使用 LS api，并且应该始终优先于其他方式。-[克里斯托夫](https://stackoverflow.com/users/1047823/christoph)

我开始喜欢对 localStorage 使用速记点和括号表示法，但我很想知道其他人对此的看法。**localStorage.getItem('item') 是否比 localStorage.item 或 localStorage['item'] 更好，或者只要它们有效，速记符号就可以了吗？**

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2013-03-15T17:53:55.217

直接属性访问（`localStorage.item`或`localStorage['item']`）和使用功能接口（`localStorage.getItem('item')`）都可以正常工作。两者都是标准的和跨浏览器兼容的。^*根据[规格](http://www.w3.org/TR/webstorage/#the-storage-interface)：

> Storage 对象上支持的属性名称是当前存在于与该对象关联的列表中的每个键/值对的键，按照键最后添加到存储区域的顺序。

当没有找到具有请求名称的键/值对时，它们的行为会有所不同。例如，如果 key`'item'`不存在，`var a = localStorage.item;`将导致`a`be `undefined`，而`var a = localStorage.getItem('item');`将导致`a`value `null`。正如您所发现的，`undefined`在`null`JavaScript/EcmaScript 中不可互换。:)

**编辑：正如 Christoph 在**[他的回答](https://stackoverflow.com/a/24904863/535871)中指出的那样，功能接口是在等于预定义属性的键下可靠地存储和检索值的唯一方法`localStorage`。（其中有六个：`length`、`key`、`setItem`、`getItem`、`removeItem`和`clear`。）因此，例如，以下将始终有效：

```
localStorage.setItem('length', 2);
console.log(localStorage.getItem('length')); 
```

请特别注意，第一条语句不会影响该属性`localStorage.length`（如果 中没有键，则可能会增加它`'length'`）`localStorage`。在这方面，规范似乎在内部不一致。

但是，以下内容可能不会满足您的要求：

```
localStorage.length = 2;
console.log(localStorage.length); 
```

有趣的是，第一个是 Chrome 中的无操作，但与 Firefox 中的函数调用同义。第二个将始终记录`localStorage`.

^* [对于一开始就支持 Web 存储的浏览器来说，情况确实如此。（这几乎包括所有现代桌面和移动浏览器。）对于使用 cookie 或其他技术模拟本地存储的环境，行为取决于所使用的 shim。`localStorage`可以在[这里](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills)找到几个 polyfill 。]

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-07-23T07:59:15.377

这个问题已经很老了，但是既然我在问题中被引用了，我想我应该对我的陈述说两句话。

存储对象相当特殊，它是一个对象，它提供对键/值对列表的访问。因此它不是一个普通的对象或数组。

例如，它具有长度属性，与数组长度属性不同，它是只读的，并返回存储中键的数量。

使用数组，您可以：

```
var a = [1,2,3,4];
a.length // => 4
a.length = 2;
a // => [1,2] 
```

在这里，我们有第一个理由使用 getter/setter。如果你想设置一个名为 的项目`length`怎么办？

```
localStorage.length = "foo";
localStorage.length  // => 0
localStorage.setItem("length","foo");
// the "length" key is now only accessable via the getter method:
localStorage.length  // => 1
localStorage.getItem("length") // => "foo" 
```

对于 Storage 对象的其他成员，它甚至更为关键，因为它们是可写的，并且您可能会不小心覆盖`getItem`. 使用 API 方法可以防止任何这些可能的问题，并提供一致的接口。

同样有趣的一点是规范中的以下段落（由我强调）：

> **setItem() 和 removeItem() 方法对于失败必须是原子的。**在失败的情况下，该方法什么也不做。即，数据存储区的改变必须要么成功，要么根本不能改变数据存储区。

从理论上讲，getter/setter 和访问之间应该没有区别`[]`，但你永远不知道......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-09T09:57:00.777

我知道这是一篇旧文章，但由于没有人真正提到性能，我设置了一些 JsPerf 测试来对其进行基准测试，并且作为一个连贯的接口`getItem`，并且`setItem`始终比使用点符号或括号更快并且更容易阅读。

这是我[对 JsPerf的测试](http://jsperf.com/localstorage-get-set-vs-dot-notation)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-23T05:45:14.080

如前所述，除了不存在的密钥之外几乎没有区别。[性能差异](http://jsperf.com/localstorage-get-by-key-comparison)取决于您使用的浏览器/操作系统。但这并没有那么不同。

我建议你使用标准接口，只是因为它是一种推荐的使用方式。

# jquery - 在 ajax 加载的页面中运行脚本

> ID：12632468
> 
> 赞同：0
> 
> 时间：2012-09-28T01:38:57.443
> 
> 标签：jquery, html, ajax

如何在 ajax 加载的页面中运行脚本？

当您使用 jquery.load 时，所有脚本代码都被删除的事实真的很烦人。我正在尝试使用 AJAX，所以我不需要重新加载整个页面。

脚本，目前：

```
$(document).ready(function() {

var hash = window.location.hash.substr(1);
var href = $('#nav li a, #nav-top li a, #nav-left li a, #nav-right li a').not('.scroll').each(function(){
    var href = $(this).attr('href');
    if(hash==href.substr(0,href.length-4)){
        var toLoad = hash+'.php #content';
        $('#content').load(toLoad)  
    }                                           
});

$('#nav li a, #nav-top li a, #nav-left li a, #nav-right li a').not('.scroll').click(function(){  

    var toLoad = $(this).attr('href')+' #content>*';  // there must be a blank space in ' #content>*'
    $('#content').hide(888,loadContent);  
    $('#load').remove();
    $('#wrapper').append('<span id="load">LOADING...</span>');
    $('#load').fadeIn(888);
    window.location.hash = $(this).attr('href').substr(0,$(this).attr('href').length-4);
    function loadContent() {
        $('#content').load(toLoad,'',showNewContent())  
    }
    function showNewContent() {
        $('#content').show(888,hideLoader());  
    }
    function hideLoader() {
        $('#load').fadeOut(888);
    }

    return false;

});

}); 
```

工作演示示例页面在这里：

[http://www.ideagasms.net/index2](http://www.ideagasms.net/index2) （只需单击“主页”和“关于”链接即可查看它的实际效果。）

我将所有的 jquery 放在三个缩小的文件中；它们包括 php/jquery 购物车、lazyload、灯箱等。我希望我的所有三个主要 js 文件都“保持活力”，这样，当我添加例如“添加到购物车”按钮或 img.lazyload 到 #content div 时，这些东西仍然会起作用。

我听说 livequery 插件是一个不错的解决方案，但它超出了我的想象，对我来说这似乎可能有点矫枉过正。

必须有一种方法可以修改上述脚本以包含 one.min.js、two.min.js 和 three.min.js，从而“重新触发”它们以使它们保持活动状态。

如果这个问题很重要，我愿意雇用任何能解决这个问题的人。然后我可以在这里重新发布解决方案。（我问的这个问题已经被问遍了，包括我得到上述“使用 jquery 加载和动画内容”脚本的主要 nettuts 页面，尽管有些人已经设法修复，但该解决方案仍然避开了大多数人这个，我不知道如何实施他们的解决方案。谁能一劳永逸地解决这个问题，将一次性帮助数百名沮丧的人。你使用 nettuts 教程建立了一个全新的网站，只发现一个星期对加载具有关联脚本的内容没有好处的工作......这真是令人沮丧。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T02:08:26.793

试试这个（在黑暗中拍摄）。

```
$('body').on('click', '#nav li a, #nav-top li a, #nav-left li a, #nav-right li a', function() {
    if (this.hasClass('scroll')) { return; }

    var toLoad = $(this).attr('href') + ' #content>*'; // there must be a blank space in ' #content>*'
    $('#content').hide(888, loadContent);
    $('#load').remove();
    $('#wrapper').append('<span id="load">LOADING...</span>');
    $('#load').fadeIn(888);
    window.location.hash = $(this).attr('href').substr(0, $(this).attr('href').length - 4);

    function loadContent() {
        $('#content').load(toLoad, '', showNewContent())
    }

    function showNewContent() {
        $('#content').show(888, hideLoader());
    }

    function hideLoader() {
        $('#load').fadeOut(888);
    }

    return false;

});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T04:18:27.723

理论上，如果您的页面格式正确，则无需从 Ajax 调用中检索 JS 代码。Ajax 调用用于返回数据（例如**JSON**、**XML**或其他类型的数据或特定区域的一段**HTML ）。**

您应该将 JS 脚本放在第一个加载的页面中。

如果您确实需要加载一些脚本，您可以创建新的脚本节点并将它们放在 DOM 文档的开头（假设您的 Ajax 响应数据包含要加载的好 JS 脚本的路径）。

# javascript - 试图让 JQuery 动画的时间正确

> ID：12632469
> 
> 赞同：0
> 
> 时间：2012-09-28T01:39:00.563
> 
> 标签：javascript, jquery, ruby-on-rails, jquery-animate, fadein

在现有的 Rails 应用程序上工作，但对 JQuery 不太熟悉。现在正在尝试修改不同渐变的时间，以便它们按顺序进入，而不是一次全部进入。即使在对延迟、窗口超时等进行了广泛的重新配置之后，我也无法看到任何可察觉的时间变化。任何人都可以帮忙吗？这是原始代码。

谢谢！

```
- content_for :scripts do
    = javascript_include_tag 'jquery.easing.1.3', 'jquery.slides'

:javascript
    $(document).ready(function(){
        $('#splash-video').on('ended', function() {
            $('#splash').hide();
            //window.setTimeout(function() {
                $('#post-splash').show();
            //},500);
            $('#slides').slides({
                play: 8000,
                pause: 5000,
                hoverPuase: true,
                paginationClass: 'slides-pagination',
                effect: 'fade',
                fadeSpeed: 1200,
                fadeEasing: 'easeOutQuad',
                /*animationStart: function(current) {
                    //$('#slide-caption-' + (current+1)).fadeIn(2500);
                    console.log('animationStart on slide: ', current);
                },
                animationComplete: function(current) {
                    window.setTimeout(function() {
                        $('#slide-caption-' + (current+1)).fadeIn(4000);
                        $('#slide-caption-' + (current)).fadeOut(1200);
                    },6800);
                }*/
            });
        });
        /*window.setTimeout(function() {
            $('#splash').hide();
        },4500);
        window.setTimeout(function() {
            $('#post-splash').show();
        },5500);*/
        //$('video,audio').mediaelementplayer({ alwaysShowControls: false });

        //$('.container.front-end h1').html($('.container.front-end h1').html().replace('&amp;', '<div class="h1-specialchar">&amp;</div>'));
        /*$('#fade1').delay(700).fadeTo(700, 1, function () {
            $('#fade2').fadeTo(700, 1, function () {
                $('#fade3').removeClass('transparent').addClass('fadeInRight');
            });
        });*/
        //$("#fade2 p").each(function() {
        //   $(this).addClass('animated transparent');
        //});

        $("#fade2 p").addClass("animated");
        $('#fade1').delay(700).fadeTo(700, 1);
        window.setTimeout(function() {
            $("#fade2 p").each(function(index) {
                $(this).delay(150*index).fadeTo(0, 1, function() {
                    $(this).addClass("fadeInDownFaster");
                });
            });
        },800);
        window.setTimeout(function() {
            $('#slides').removeClass('transparent').addClass('fadeInRight');
        },1800);
    }); 
```

这似乎更接近一点？

谢谢你的回答。这看起来正确吗？至少到达那里？

```
$("#fade2 p").addClass("animated");'
        window.setTimeout(function() {
                $('#fade1').delay(200).fadeTo(500, 1, function() {
                    $("#fade2 p").each(function(index) {
                    $(this).delay(150*index).fadeTo(400, 1, function() {
                        $(this).addClass("fadeInDownFaster");
            });
        },800);
        window.setTimeout(function() {
            $('#slides').removeClass('transparent').addClass('fadeInRight');
        },1800);
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T01:53:21.707

如果将淡入淡出添加到淡入淡出的回调中，它将在检查此示例[http://jsfiddle.net/5NPDD/后执行](http://jsfiddle.net/5NPDD/)

```
$('#fade1').fadeTo(500, 0, function() {
    $('#fade2').fadeTo(500, 0, function() {

    });
});​ 
```

# c# - 在保存到 redis 之前压缩对象

> ID：12632473
> 
> 赞同：1
> 
> 时间：2012-09-28T01:40:14.720
> 
> 标签：c#, compression, redis, servicestack

我刚开始看ss和redis。我正在使用 microsoft redis 实现。打开压缩后，dump.rdb 增长太快。

我想保存每秒的进程统计信息。示例对象。

```
public class PerfData
{
    public long Id { get; set; }    
    public DateTime TimeStamp { get; set; }
    public string ProcessName { get; set; }
    public int ProcessId { get; set; }
    public TimeSpan TotalProcessorTime { get; set; }
    public TimeSpan UserProcessorTime { get; set; }
    public TimeSpan PrivilegedProcessorTime { get; set; }
    public float ProcessorTime { get; set; }
    public float WorkingSet { get; set; }
} 
```

我已经看到了压缩客户端的建议。这是否意味着我需要将对象转换为这样的东西？

```
public class PerfData
{
    public long Id { get; set; }    
    public DateTime TimeStamp { get; set; }
    public byte[] CompressedJson{get;set;}
} 
```

感谢任何建议和更正。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T21:50:39.970

[ServiceStack 的 Redis Client](https://github.com/ServiceStack/ServiceStack.Redis)中最基础的类是[RedisNativeClient](https://github.com/ServiceStack/ServiceStack.Redis/wiki/IRedisNativeClient)，所有操作都在其中进行`byte[]`。RedisClient 是 RedisNativeClient 的子类，因此您可以强制转换以获取较低级别的 API。

你需要压缩你的值，最终`byte[]`你可以直接保存到redis中。您需要进行相反的操作才能再次将其取出，例如检索原始`byte[]`值并解压缩它。

ServiceStack 的 Redis 客户端已经依赖于 ServiceStack.Common，其中包含[方便的流扩展](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Common/StreamExtensions.cs)来压缩/解压缩数据。

# linux - Linux内存管理器中的“弱引用”？

> ID：12632478
> 
> 赞同：0
> 
> 时间：2012-09-28T01:40:45.473
> 
> 标签：linux, caching, memory-management, weak-references

在 Java 中，如果内存用完，弱引用会被垃圾回收。在 Linux 中，`malloc()`总是返回一个强引用，即。在调用者调用`free()`函数之前，指针永远不会被释放。

我想为缓存分配一个缓冲区，当内存用完时可以自动释放，如下所示：

```
cache_t cache;
if (! cache_alloc(&cache))
    die("Memory out");

cache_lock(&cache); // realloc cache mem if it is collected

if (! cache->user_init) { // The "user_init" maybe reset if the cache mem is collected
  // lazy-init the cache...
  load_contents(cache->mem, ...);
  cache->user_init = 1;
}

// do with cache..
stuff_t *stuff = (stuff_t *) cache->mem;
...

cache_unlock(&cache); 
```

输出中的`buff`and似乎与磁盘 IO 相关：`cache``vmstat`

```
$ vmstat
procs -----------memory---------- ---swap-- -----io---- -system-- ----cpu----
 r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa
 0  0  51604 554220  13384 314852    3   10   411   420  702 1063  8  3 75 14 
```

好吧，我想进一步了解我的示例中的缓存是否可以反映在 vmstat 输出的“缓存”列中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T01:45:17.687

确实没有什么好的方法——C 内存模型根本不允许 Java 内存模型允许的那种行为。当与操作系统交互时，Java 的内存模型当然是建立在 C 模型之上的，这就是为什么 Java 堆必须由应用程序启动器手动限制的原因。

“buff”和“cache”列与内核使用的页面/磁盘缓存和内部缓冲区有关。这些缓存由内核自动处理 - 例如，读取文件会将内容放在“缓存”使用编号中，就像内存不足会将其提交给交换设备（“swpd”）一样。

# php - 来自php的AJAX responseText不起作用

> ID：12632481
> 
> 赞同：0
> 
> 时间：2012-09-28T01:42:00.170
> 
> 标签：php, javascript, ajax

我正在尝试使用 AJAX 制作用户注册表单，我对此很陌生，所以我对我正在做的事情没有太多经验。我的问题是没有让 php 工作或 AJAX 发送文件，这是 responseText 在返回时没有任何价值。我想要它，以便 responseText 将成为 PHP 回声。我认为我的做法是正确的，也许该怎么办？请帮忙。也很抱歉问题的布局不好，我会尽快整理。

HTML：

```
<div id="registration">
    <form method="post" action="" onsubmit="formValidate()">
        <!-- Apply Javascript for form validation and change password property -->
        <div id="title">First Name:</div>
        <input type="text" name="firstname" id="firstname" value="First Name"/>
        <div id="title">Surname:</div>
        <input type="text" name="surname" id="surname" value="Surname"/>
        <div id="title">Address:</div>
        <input type="text" name="address" id="address" value="Address Line 1"/>
        <input type="text" id="town_city" name="town_city" value="Town/City"/>
        <input type="text" name="postcode" id="postcode" value="Postcode" />
        <input type="text" name="country" id="country" value="Country" />
        <div id="title">Email:</div>
        <input type="text" name="email" id="email" value="Email" />
        <div id="title">Password:</div>
        <input  type="text" name="password" id="password" value="Password" />
        <div id="title">Verify Password:</div>
        <input type="text" name="vPassword" id="vPassword" value="Passwloord" />
        <div id="status"></div>
        <input type="submit" name="submit" value="Register" />
    </form>
</div> 
```

JS：

```
function formValidate() {
    if (window.XMLHttpRequest) {
        xml = new XMLHttpRequest();
    } else {
        xml = new ActiveXObject('Microsoft.XMLHTTP');
    }

    var url = 'php/validateUser.inc.php';
    var fn = document.getElementById('firstname').value;
    var ln = document.getElementById('surname').value;
    var add = document.getElementById('address').value;
    var tc = document.getElementById('town_city').value;
    var pCode = document.getElementById('postcode').value;
    var country = document.getElementById('country').value;
    var email = document.getElementById('email').value;
    var pass = document.getElementById('password').value;
    var vPass = document.getElementById('vPassword').value;
    var userInput = "firstname=" + fn + "&surname=" + ln + "&address=" + add + "&town_city=" + tc + "&postcode=" + pCode + "&country" + country + "&email=" + email + "&password=" + pass + "&vPassword=" + vPass;

    xml.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
    xml.open('POST', url, true);

    xml.onreadystatechange = function() {
        if (xml.readyState == 4) {
            if (xml.status == 200) {
                var return_data = xml.responseText;
                document.getElementById("status").innerHTML = return_data;
            } else {
                alert("GNAH!");
            }
        }

        xml.send(userInput);
        document.getElementById("status").innerHTML = "Processing....";
    } 
```

完成这部分后，我希望 PHP 的回显出现在状态 div 中，但它们出现在屏幕的左下角，但“处理中……”却没有。请有任何建议，我知道这是错误的文件。

PHP：

```
<?php
if (isset($_POST['submit'])) {

    if (isset($_POST['firstname'], $_POST['surname'], $_POST['address'], $_POST['town_city'], $_POST['postcode'], $_POST['country'], $_POST['email'], $_POST['password'], $_POST['vPassword'])) {
        $fName = mysql_real_escape_string($_POST['firstname']);
        $lName = mysql_real_escape_string($_POST['surname']);
        $addr = mysql_real_escape_string($_POST['address']);
        $town_city = mysql_real_escape_string($_POST['town_city']);
        $pCode = mysql_real_escape_string($_POST['postcode']);
        $country = mysql_real_escape_string($_POST['country']);
        $email = mysql_real_escape_string($_POST['email']);
        $pass = mysql_real_escape_string($_POST['password']);
        $pass_hash = md5($pass);
        $vPass = mysql_real_escape_string($_POST['vPassword']);

        if (!empty($fName) && !empty($lName) && !empty($addr) && !empty($town_city) && !empty($pCode) && !empty($country) && !empty($email) && !empty($pass) && !empty($vPass) && $pass == $vPass) {
            $query = "INSERT INTO `usertable` (user_id, fName, lName, Address, town_city, pCode, Country, Email, Password) VALUES ('', '$fName', '$lName', '$addr', '$town_city', '$pCode', '$country', '$email', '$pass')";
            $query_run = mysql_query($query);
            if ($query_run) {
                header('Location: login.php');
            } else {
                echo mysql_error();
            }
        } else {
            echo 'Please fill in all fiels and make sure both passwords match.';
        }
    } else {
        echo mysql_error();
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T02:49:09.553

您没有为变量中的“提交”表单字段提供`userInput`值，因此测试：

```
if ($_POST['submit']) 
```

失败。将分配更改为：

```
var userInput = "submit=Register&firstname="+fn+... 
```

# mysql - 实体类型 LogEntry 不是当前上下文模型的一部分

> ID：12632485
> 
> 赞同：2
> 
> 时间：2012-09-28T01:42:51.240
> 
> 标签：mysql, code-first, dbcontext

我正在努力将 BitFactory.Logging 挂接到我的应用程序中。我的一个变化是我将 LogEvent 发布到我的 MySQL 数据库。运行代码优先，EF 4.1。

我编写了一个自定义数据库记录器，如下所示：

```
public class DBLogger : Logger
{
    protected override bool DoLog(LogEntry aLogEntry)
    {
        _db.Add(aLogEntry);
        _db.SaveChanges();
        return true;
    }
    private static IDbContext _db = new MyDB();
    public static IDbContext db
    {
        get { return _db; }
    }
} 
```

我有以下课程：

```
public class LEntry
{
    public virtual LogEntry logEntry { get; set; }
} 
```

}

我有以下 IDbContext：

```
public interface IDbContext
{

    IQueryable<LEntry> LEntries { get; }
    int SaveChanges();
    T Attach<T>(T entity) where T : class;
    T Add<T>(T entity) where T : class;
    T Delete<T>(T entity) where T : class;
} 
```

和以下

```
public class MyDB : DbContext, IDbContext
{
    public DbSet<LEntry> LEntries { get; set; }

    IQueryable<LEntry> IDbContext.LEntries
    {
        get { return LEntries; }
    }

    int IDbContext.SaveChanges()
    {
        return SaveChanges();
    }

    T IDbContext.Add<T>(T entity) 
    {
        return Set<T>().Add(entity);
    }

    T IDbContext.Delete<T>(T entity) 
    {
        return Set<T>().Remove(entity);            
    }

    T IDbContext.Attach<T>(T entity)
    {                      
        var entry = Entry(entity);
        entry.State = System.Data.EntityState.Modified;
        return entity;
    }
} 
```

当我运行代码时，我收到以下错误：

“System.Data.Edm.EdmEntityType: : EntityType 'LEEntry' 没有定义键。定义此 EntityType 的键。”

如果我将 LEntry 课程更改为

```
public class LEntry
{
    [Key]
    public virtual int ID { get; set; }
    public virtual LogEntry logEntry { get; set; }
} 
```

}

并运行，我收到以下错误：

“‘LogEntry’类型映射为复杂类型。Set方法、DbSet对象和DbEntityEntry对象只能用于实体类型，不能用于复杂类型。”

如果我将 LEentry 更改为 ComplexType，如下所示：

```
[ComplexType]
public class LEntry
{
    [Key]
    public virtual int ID { get; set; }
    public virtual LogEntry logEntry { get; set; }
} 
```

然后我收到以下错误：

“类型‘MyDB.Models.LEentry’已经配置为实体类型。它不能重新配置为复杂类型。”

扔在

```
 T IDbContext.Add<T>(T entity) 
    {
        return Set<T>().Add(entity);
    } 
```

堵塞。

我要做的就是将 DoLog 方法发布到我的 MySQL 数据库中。

我究竟做错了什么？

# c# - 在 asp.net 中动态更改文本框值

> ID：12632487
> 
> 赞同：0
> 
> 时间：2012-09-28T01:43:30.687
> 
> 标签：c#, javascript, asp.net, visual-studio-2010

我想设计一个最有可能像谷歌搜索文本框提供的文本框，它可以从用户那里接收数据并检查数据库并提出一些示例。如何在用户输入时动态更改文本框的值。Visual Studio 中有 Event 属性，但它可以通过单击文本框外的某个位置来刷新页面！所以它不能正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T01:49:31.880

最好的办法是使用 ASP.NET Ajax Control Toolkit 提供的 AutoComplete 控件。在此处查看示例：[http ://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/AutoComplete/AutoComplete.aspx](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/AutoComplete/AutoComplete.aspx)

基本上，设置一个将通过 Ajax 轮询的 web 服务。您的服务将获取用户提供的文本，您将在数据库中进行一些查找/搜索，然后返回匹配项。Ajax JavaScript 然后相应地更新文本框。

# php - 将 Android 应用程序连接到 PHP 服务器

> ID：12632488
> 
> 赞同：0
> 
> 时间：2012-09-28T01:43:36.457
> 
> 标签：php, android, networking, web

编写登录服务器的 android 应用程序的最佳方法是什么？我想我不想维护一个套接字，所以我想我想避免这种情况，我想我想使用 http 协议。我的问题是，在服务器端，理想情况下我想使用 PHP 来处理来自 android 应用程序的 GET/POST 调用，但我不知道如何返回（使用 PHP）我的应用程序可以处理的信息和不仅仅是一个html文件。

例如，适用于 android 的 facebook 应用程序。当您第一次下载该应用程序时，您会登录，然后该应用程序会保持您的连接，但显然该应用程序不是另一个 Web 浏览器，而是一个常规应用程序，它显示其信息就像它是一个网站一样。应用程序如何传递会话 cookie 以便 PHP $_SESSION 变量自行维护？android 应用程序如何处理返回的数据？

如果我向 htt://www.test.php 发送一个获取请求，那么在服务器上执行的 PHP 代码可以返回一组自定义数据吗？$_SESSION 变量会自动维护吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T01:59:00.030

您可以发送获取/发布请求以登录服务器。PHP 页面可以返回 JSON 或 XML。然后您的 Java (Android) 代码将不得不解析该响应。

您可以先记录 PHP 页面，然后再启动会话。也许生成一个令牌密钥并将其存储在数据库中，然后将其返回给 android 应用程序。Android 应用程序将获取此令牌（解析后），并可能将其保存在首选项文件中。这种方法基本上是一个自定义会话。您将不得不弄清楚令牌到期等问题。

可能有一种存储 PHP 会话的方法，但不确定应用程序的行为与浏览器有何不同。我认为应用程序的会话可能会更复杂一些。

更多讨论在这里：[php session destroy in android application](https://stackoverflow.com/questions/5947988/php-session-destroyed-in-android-application)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T01:54:14.310

您只需要创建接收数据并将数据发送回客户端的服务器端 API。服务器启动会话，当请求 API 时，客户端收到 PHPSESSID，用于保持会话打开。在客户端上，您使用 cookie 进行会话。

阅读会话：[PHP 会话（简单）](http://www.w3schools.com/php/php_sessions.asp)和[会话处理（综合）](http://php.net/manual/en/book.session.php)

# javascript - 如何在javascript中声明字节

> ID：12632489
> 
> 赞同：-1
> 
> 时间：2012-09-28T01:43:39.403
> 
> 标签：javascript, jquery

```
 var timestamp = new Uint32Array[16];
 var timestamp2 = new byte[0]; 
```

那是我的代码，但它不起作用。任何人都可以帮助我吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T01:48:52.913

也许你可以试试 var timestamp2 = new Uint8Array();

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T01:46:42.867

Javascript 中没有字节数据类型。

通常，您使用`Number`数据类型来表示这样的数字。

```
var timestamp = []; 
```

您没有为数组指定类型。您可以在每个项目中放置您喜欢的任何数据类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T02:07:41.047

**首先：如果你不做一些 webgl 的东西，只是想存储你的时间戳，那就坚持一个老式的数组。**

使用 ArrayBuffers 和类型化数组，您**可以**声明“字节缓冲区”并创建类似 C 的结构。

```
var buffer = new ArrayBuffer(16) // create a 16-byte buffer 
```

要使用该缓冲区，您必须创建视图

```
var int32View = new Int32Array(buffer) 
```

之后，您可以像访问普通数组一样访问缓冲区

```
for(var i = 0; i < int32View.length; i++){
  int32View[i]=i
} 
```

有关 ArrayBuffers 和类型化数组的更多信息，请参见此处

[处理复杂的数据结构](https://developer.mozilla.org/en-US/docs/JavaScript_typed_arrays#Working_with_complex_data_structures)

[ArrayBufferView - 类型化数组子类](https://developer.mozilla.org/en-US/docs/JavaScript_typed_arrays/ArrayBufferView)

# django - django - gmail 显示电子邮件的原始 html（即标签）

> ID：12632490
> 
> 赞同：1
> 
> 时间：2012-09-28T01:44:46.567
> 
> 标签：django

我正在使用 django 辅助方法 send_mail，这可能是问题所在，但我无法从文档中判断是否是这种情况。

所以 - 这是我的方法：

```
send_mail('Alert!', theEmail.format(user.username),'admin@site.com',
        [user.email], fail_silently=False) 
```

电子邮件看起来像这样：

theEmail = """ 嗨 {0}！
这是一封提醒电子邮件
这是一个链接：及时链接

但是当我运行此代码时，电子邮件发送正常 - 但在 gmail 中，消息打印时所有标签都可见。

我打算做某种“以html形式发送”的事情吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T03:41:46.557

尝试类似：

```
from django.core.mail import EmailMessage

msg = EmailMessage(subject, html, from_email, [recipients])
msg.content_subtype = 'html'
msg.send() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T02:49:47.553

您可以在发送之前使用一些 Django 的内置函数来转义 html 字符串（也许 gmail 自己会进行一些转义/取消转义），例如：

```
from django.utils.safestring import mark_for_escaping
my_html = mark_for_escaping(my_raw_html) 
```

或者

```
from django.utils.safestring import mark_safe
my_html = mark_safe(my_raw_html) 
```

`send_mail`不支持“以 html 格式发送”之类的功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-19T18:22:12.087

尝试使用`html_message`参数：

```
send_mail('Alert!', '', 'admin@site.com', [user.email], html_message=theEmail.format(user.username), fail_silently=False) 
```

# performance - 算法的运行时间

> ID：12632497
> 
> 赞同：0
> 
> 时间：2012-09-28T01:45:54.610
> 
> 标签：performance, algorithm, runtime

我需要运行如下所示的一段代码：

```
 sum = 0;
 for(i = 0; i < n; i++)
     for(j = 0; j < i; j++)
         sum++; 
```

并找出几个 N 值的运行时间以及与这些值相关的增长率。

现在我正在使用 Dev C++（可以使用任何 IDE），但我想不出一种方法来实际显示运行时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T01:48:44.563

你可以：

1.  申请时间。例如，使用`time()`API： http: [//linux.die.net/man/2/time](http://linux.die.net/man/2/time)
2.  通过将您的应用程序包装在另一个可以计时运行时的应用程序中来计时。在 *nix 系统上，有一个名为`time`.
3.  使用秒表。

# html - 使 div 内容响应

> ID：12632500
> 
> 赞同：11
> 
> 时间：2012-09-28T01:46:19.353
> 
> 标签：html, responsive-design, css

我的内容目前没有响应。我已经在 iPhone 上对其进行了测试，文本显示在屏幕上。

我已将容器的 CSS 更改为：

```
#container2 {
    width: 960px; 
    max-width: 90%;
    position: relative;
    left: 50%;
    margin-left: -480px;
    line-height: 1.4em;
} 
```

当我在更改后对其进行测试时，内容消失了。我读到了 max-width:90%; 将允许它不超过边界宽度（[http://webdesignerwall.com/tutorials/5-useful-css-tricks-for-responsive-design](http://webdesignerwall.com/tutorials/5-useful-css-tricks-for-responsive-design)），但显然它没有用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-28T02:17:32.073

试试这个CSS：

```
/* Show in default resolution screen*/
#container2 {
width: 960px;
position: relative;
margin:0 auto;
line-height: 1.4em;
}

/* If in mobile screen with maximum width 479px. The iPhone screen resolution is 320x480 px (except iPhone4, 640x960) */    
@media only screen and (max-width: 479px){
    #container2 { width: 90%; }
} 
```

这里的演示：http: [//jsfiddle.net/ongisnade/CG9WN/](http://jsfiddle.net/ongisnade/CG9WN/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-28T01:54:07.467

那里没有很多事情要做，但我认为您正在寻找的是翻转`width`and`max-width`值：

```
#container2 {
  width: 90%;
  max-width: 960px;
  /* etc, etc... */
} 
```

这将为您提供一个占可用空间宽度 90% 的容器，最大为 960 像素，但这取决于其容器本身的可调整大小。响应式设计不过是一大团蜡，所以这甚至不会划伤表面。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-12T10:10:17.750

`@media screen and (max-width : 760px)`（适用于平板电脑和手机）并与此一起使用：`<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">`

# c - C：当我写“b”时，在 printf 中得到一个“@”符号

> ID：12632504
> 
> 赞同：1
> 
> 时间：2012-09-28T01:46:54.797
> 
> 标签：c

在 C 中，我这样做：

```
char* buffer=p->content;       // p is a struct type and content is a char*
printf("buffer:%s\n",buffer); 
```

我的输出是这样的：

```
@uffer: �@��^��0z 
```

我不太清楚为什么会得到�@��^��0z，但我怀疑这与我错误地递增 mypointer 有关。

我的主要问题是：为什么我的“b”被转换为“@”符号？？？？？？？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T01:49:34.510

看起来内存`buffer`指向的内存没有初始化，所以你得到的是随机数据。

你真的需要告诉我们`p->content`从哪里来（设置）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T02:02:12.877

您正在打印的垃圾数据恰好包含一个称为回车的行式打印机控制字符，您的显示设备将其解释为将光标移动到行首的命令。然后，如果出现 @ 字符，它会覆盖输出的第一个字符。

# asp.net - 大型网站上的 MVC3 性能

> ID：12632505
> 
> 赞同：-1
> 
> 时间：2012-09-28T01:46:55.957
> 
> 标签：asp.net, asp.net-mvc-3

我想知道是否有人建议使用 ASP.Net MVC3 开发大型网站。大规模是指每天大约 3000,000 个请求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T02:33:28.007

那不是那么多。我们有一个网站在两台服务器上运行，每天处理大约 8,000,000 个请求，这甚至不使用 10% 的容量。

所以，是的，ASP.NET MVC 确实适用于这种规模的站点。

# android - 移植VXL到android的错误

> ID：12632506
> 
> 赞同：1
> 
> 时间：2012-09-28T01:47:30.590
> 
> 标签：android, cmake

我想将VXL（Vision-something-Libraries）移植到android平台。我使用的交叉编译器是android-cmake。您可以从网址[http://vxl.sourceforge.net/](http://vxl.sourceforge.net/)获取 VXL。 我使用的版本是 vxl-1.14.0 您可以从网址[http://code.google.com/p获取 android-camke /android-cmake/](http://code.google.com/p/android-cmake/)

当我为cmake正确设置我的NDK，并指定独立工具链作为android-camke的引入。然后，我使用andriod-camke编译VXL。但是我遇到很多错误。它无法生成Makefile。有人知道为什么吗？

接下来是错误日志。

```
l00138375@l00138375:/home/hm/build-vxl$ android-cmake ../vxl-1.14.0
CMake Warning at /home/hm/android/android-cmake/toolchain/android.toolchain.cmake:281 (message):
  Using value of obsolete variable ANDROID_NDK_TOOLCHAIN_ROOT as initial
  value for ANDROID_STANDALONE_TOOLCHAIN.  Please note, that
  ANDROID_NDK_TOOLCHAIN_ROOT can be completely removed in future versions of
  the toolchain.
Call Stack (most recent call first):
  /home/hm/android/android-cmake/toolchain/android.toolchain.cmake:376 (__INIT_VARIABLE)
  /usr/share/cmake-2.8/Modules/CMakeDetermineSystem.cmake:89 (INCLUDE)
  CMakeLists.txt:13 (PROJECT)

........

-- Check if the system is big endian - little endian
-- Performing Test VCL_CHAR_IS_SIGNED
CMake Error: TRY_RUN() invoked in cross-compiling mode, please set the following cache variables appropriately:
   VCL_CHAR_IS_SIGNED (advanced)
   VCL_CHAR_IS_SIGNED__TRYRUN_OUTPUT (advanced)
For details see /home/hm/build-vxl/TryRunResults.cmake
-- Performing Test VCL_CHAR_IS_SIGNED - Failed
-- Looking for 8-bit int. [Checking char...]
CMake Error: TRY_RUN() invoked in cross-compiling mode, please set the following cache variables appropriately:
   RUN_RESULT (advanced)
   RUN_RESULT__TRYRUN_OUTPUT (advanced)
For details see /home/hm/build-vxl/TryRunResults.cmake
.........
-- Performing Test VCL_NUMERIC_LIMITS_HAS_INFINITY
CMake Error: TRY_RUN() invoked in cross-compiling mode, please set the following cache variables appropriately:
   VCL_NUMERIC_LIMITS_HAS_INFINITY (advanced)
   VCL_NUMERIC_LIMITS_HAS_INFINITY__TRYRUN_OUTPUT (advanced)
For details see /home/hm/build-vxl/TryRunResults.cmake
-- Performing Test VCL_NUMERIC_LIMITS_HAS_INFINITY - Failed
-- Performing Test VCL_PROCESSOR_HAS_INFINITY
CMake Error: TRY_RUN() invoked in cross-compiling mode, please set the following cache variables appropriately:
   VCL_PROCESSOR_HAS_INFINITY (advanced)
   VCL_PROCESSOR_HAS_INFINITY__TRYRUN_OUTPUT (advanced)
For details see /home/hm/build-vxl/TryRunResults.cmake
-- Performing Test VCL_PROCESSOR_HAS_INFINITY - Failed
-- Looking for C++ include inttypes.h
-- Looking for C++ include inttypes.h - found
-- Looking for memalign
-- Looking for memalign - found
-- Could NOT find DC1394 (missing:  DC1394_LIBRARIES DC1394_INCLUDE_DIR) 
-- Performing Test DIRECTSHOW_SOURCE_COMPILES
-- Performing Test DIRECTSHOW_SOURCE_COMPILES - Failed
CMake Error at config/cmake/Modules/NewCMake/FindDirectShow.cmake:101 (MESSAGE):
  Uncomment code below: FindPackageHandleStandardArgs is now available.
Call Stack (most recent call first):
  core/vidl/CMakeLists.txt:13 (INCLUDE) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:23:49.717

正如 Andrey 的评论所提到的，VXL 使用 CMake 的方式可以防止交叉编译。然而，还有一个替代方案。其中一位维护者维护包含核心库的替代构建系统的分支。分支应该是修改以使用交叉编译器的`vxl-build-makefiles`良好起点。

[http://sourceforge.net/p/vxl/svn/36716/tree/branches/vxl-build-makefiles/](http://sourceforge.net/p/vxl/svn/36716/tree/branches/vxl-build-makefiles/)

如果您对使用分支有任何疑问，或者对 VXL 有任何疑问 - vxl 邮件列表可能更有用。vxl-users@lists.sourceforge.net

# asp.net-mvc - 在列表上执行 CRUD 操作是否很好？

> ID：12632511
> 
> 赞同：0
> 
> 时间：2012-09-28T01:47:58.830
> 
> 标签：asp.net-mvc

我想了解以下在列表上执行 CRUD 操作的方法。它基本上是利用 ASP.NET MVC 的模型绑定功能加载列表。是否建议依赖 DOM 操作来进行插入、删除和更新操作。

[http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)

如果假设 parent.remove() 没有正确实现，所有事情都会搞砸。是否有任何模板类型的方法来标准化事物。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T03:23:35.940

我一见到史蒂文·桑德森，我就确信这是一种好的和正确的方法。还没有看到这家伙不合情理的事情。

显然，对于 ASP.NET MVC，还[没有找到更好的方法。](https://stackoverflow.com/questions/10974453/mvc-4-more-elegant-way-to-edit-variable-length-list-of-items)所以是的，就像今天一样使用那个。

希望这可以帮助。

# php - 根据数据库字段给用户自定义消息

> ID：12632513
> 
> 赞同：0
> 
> 时间：2012-09-28T01:48:08.123
> 
> 标签：php, mysql, database

这是学生报名参加迎新会议的时间的注册表。我已经将电子邮件地址字段设置为数据库中的唯一字段。

我需要做的是，如果电子邮件地址存在，这意味着学生已经注册了一天和时间去迎新。因此，我不想返回错误消息“该电子邮件地址已存在”，而是返回一条消息：“您已经注册了一个定向日/时间。您注册了 at 。如果您想更改您的日期/时间，请取消第一天/时间，然后再回来注册您的新时间。”

所以我需要知道如何搜索数据库以找到他们注册的日期和时间，并在用户尝试多次注册时返回的自定义消息中返回。

```
<?php

// set the mode
if(isset($_GET['p']))   $mode = $_GET['p'];
else if(isset($_POST['p'])) $mode = $_POST['p'];
else $mode = '';

// sanitize input
if(isset($_GET['time_id'])) {
    $timestamp = (int)$_GET['timestamp'];
    $time_id = (int)$_GET['time_id'];
}
if(isset($_POST['time_id'])) {
    $timestamp = (int)$_POST['timestamp'];
    $time_id = (int)$_POST['time_id'];
}

// validate input
$error = '';
if(date("G", $timestamp) != 0)
    $error .= 'Invalid timestamp.<br/>';
if(($time_result = valid_time_id($time_id)) == false)
    $error .= 'Invalid time id.<br/>';
else
    $time_row = mysql_fetch_array($time_result);

switch($mode) {
    default:
        break;

    case "schedule":
        // sanitize input
        $first_name = sanitize_input($_POST['first_name']);
        $last_name = sanitize_input($_POST['last_name']);
        $email = sanitize_input($_POST['email']);
        $retype_email = sanitize_input($_POST['retype_email']);
        $college_id = sanitize_input($_POST['college_id']);
        $retype_college_id = sanitize_input($_POST['retype_college_id']);
        $phone = sanitize_input($_POST['phone']);
        $first = (isset($_POST['first']) ? 1 : 0);
        $verification = $_POST['verification'];

        // validate input
        $error = '';
        if(empty($first_name))
            $error .= 'You must enter a first name.<br>';
        if(empty($last_name))
            $error .= 'You must enter a last name.<br>';
        if(!valid_email($email))
            $error .= 'Invalid email.<br>';
        if($email != $retype_email)
            $error .= 'The two email addresses don\'t match.<br>';
        if(!valid_college_id($college_id))
            $error .= 'Invalid student id. Student id must contain seven digits   including zeros.<br>';
        if($college_id != $retype_college_id)
            $error .= 'The two student ids don\'t match.<br>';
        if(empty($phone))
            $error .= 'You must enter a phone number.<br>';
        $student_result = db_query("select id from ".$GLOBALS['db_pre']."student where canceled='0' and timestamp='".$timestamp."' and time_id='".$time_id."'");
        if(mysql_num_rows($student_result) >= $time_row['slots'])
            $error .= 'Sorry, too many people are already scheduled for this time slot.<br>';
        if($_SESSION['captcha'] != $verification)
            $error .= 'Invalid image verification.<br>';

        // if there's no error
        if($error == '') {
            // schedule it
            db_query("insert into ".$GLOBALS['db_pre']."student set first_name='".$first_name
                ."',last_name='".$last_name
                ."',email='".$email
                ."',college_id='".$college_id
                ."',phone='".$phone
                ."',timestamp='".$timestamp
                ."',time_id='".$time_id
                ."',unschedule_code='".md5(time())
                ."',inserted_at='".gmdate("Y-m-d H:i:s")
                ."'");
            $student_id = mysql_insert_id();

            // send email to student
            $subject = "A-B Tech New Student Appointment Confirmation";
            if(current_site() == "orientation") $subject = "A-B Tech New Student Orientation";
            else $subject = "A-B Tech Campus Tour";
            $message = format_text("Scheduling Email", $student_id);
            email($email, $subject, $message);

            // get the start and end times for the appointment
            $time_result = db_query("select * from ".$GLOBALS['db_pre']."time where id='".$time_id."'");
            $time_row = mysql_fetch_array($time_result);
            //$timestamp_start = strtotime(date("F j, Y", $timestamp).", ".$time_row['time']);
            //$timestamp_end = strtotime("+1 hour", $timestamp_start);

            /*// send email, with calendar attachment, to counselors
            if(current_site() == "orientation") $subject = "A-B Tech New Student Orientation: ";
            else $subject = "A-B Tech Campus Tour: ";
            $subject .= date("F j, Y", $timestamp).", ".$time_row['time']."; ".$first_name." ".$last_name."";
            $message = "A student has scheduled an appointment:\r\n\r\n";
            $message .= "Name: ".$first_name." ".$last_name."\r\n";
            $message .= "Date: ".date("F j, Y", $timestamp).", ".$time_row['time']."\r\n";
            $message .= "Email: ".$email."\r\n";
            $message .= "Phone: ".$phone."\r\n";

            // send the email to all the counselors
            $user_result = db_query("select * from user where no_email=0");
            while($user_row = mysql_fetch_array($user_result)) {
                email($user_row['email'], $subject, $message);
            }*/
        }
        break;
}

// captcha image verification
srand(time());
$_SESSION['captcha'] = substr(md5(rand(1,9999)), rand(1,15), 5);
$_SESSION['captcha'] = str_replace("O", "1", $_SESSION['captcha']); // to avoid confusion
$_SESSION['captcha'] = str_replace("o", "2", $_SESSION['captcha']); // ...
$_SESSION['captcha'] = str_replace("0", "3", $_SESSION['captcha']); // ...

// the top layout
layout_top(date("F j, Y", $timestamp).', '.$time_row['time']);

// the middle layout
switch($mode) {
    default:
        if($mode == "schedule" && $error == "") {
            echo display_text("Scheduling Text", $student_id);
            ?><p><a href="index.php">Click here to go back</a></p><?php
        } else {
            ?>
            <h1 align="center" style="padding-bottom: 0; margin-bottom: 0;"><?=strtoupper(date("F j, Y", $timestamp).' '.$time_row['time'])?></h1>
            <p align="center" style="padding-top: 0; margin-top: 0;"><strong><a href="index.php?month=<?=date("n", $timestamp)?>&year=<?=date("Y", $timestamp)?>">choose another date</a></strong></p>

            <?php if($mode == "schedule" && $error != '') { ?>
            <p class="error"><?=$error?></p>
            <?php } ?>

            <form action="<?=$_SERVER['PHP_SELF']?>" method="post">
            <input type="hidden" name="p" value="schedule">
            <input type="hidden" name="timestamp" value="<?=$timestamp?>">
            <input type="hidden" name="time_id" value="<?=$time_id?>">
            <fieldset>
            <legend>Schedule an appointment for this date</legend>
            <p>Fill out this form to schedule a New Student appointment on this date. Make sure you use a valid email address.</p>
            <ul>
                <li>
                    <label for="first_name">First Name</label>
                    <input type="text" name="first_name"<?=($mode == "schedule" ? ' value="'.$first_name.'"' : '')?>>
                </li>
                <li>
                    <label for="last_name">Last Name</label>
                    <input type="text" name="last_name"<?=($mode == "schedule" ? ' value="'.$last_name.'"' : '')?>>
                </li>
                <li>
                    <label for="email">Email</label>
                    <input type="text" name="email" size="30"<?=($mode == "schedule" ? ' value="'.$email.'"' : '')?>>
                </li>
                <li>
                    <label for="retype_email">Retype Email</label>
                    <input type="text" name="retype_email" size="30"<?=($mode == "schedule" ? ' value="'.$retype_email.'"' : '')?>>
                </li>
                <li>
                    <label for="college_id">Student ID(For your student ID#, please refer to the e-mail you received regarding your A-B Tech WebAdvisor and Email Accounts.)     </label>
                    <input type="text" name="college_id" size="30"<?=($mode == "schedule" ? ' value="'.$college_id.'"' : '')?>>
                </li>
                <li>
                    <label for="retype_college_id">Retype Student ID</label>
                    <input type="text" name="retype_college_id" size="30"<?=($mode == "schedule" ? ' value="'.$retype_college_id.'"' : '')?>>
                </li>

                <li>
                    <label for="phone">Phone</label>
                    <input type="text" name="phone"<?=($mode == "schedule" ? ' value="'.$phone.'"' : '')?>>
                </li>
                <li>
                    <label for="verification">Verification</label>
                    <img src="../images/verify.php" width="180" height="40" alt="Verification"><br/>
                    <input type="text" name="verification" size="10"> <small>&laquo; type the characters in the image above into this box</small>
                </li>
                <li>
                    <input type="submit" value="Submit">
                </li>
            </ul>
            </fieldset>
            </form>
            <?php
        }
        break;
}

// the bottom layout
layout_bottom();
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T01:56:14.620

我认为这样做的方法是首先验证他们的电子邮件地址是否有效，然后查看它是否存在，如果不存在则创建注册条目。

```
if (!valid_email($email)) {
    // show message
    return FALSE;
}

$query = "SELECT * FROM database WHERE email = '$email';";
$result = mysql_query($query);
if (mysql_num_rows($result) > 0) {
     // email already exists, so tell them to deregister first
     return FALSE;
}

$query = "INSERT registration query...."; 
```

还要确保在查询中使用电子邮件地址之前对其进行转义。

# java - 用于 Telnet 的 ExpectJ

> ID：12632514
> 
> 赞同：0
> 
> 时间：2012-09-28T01:48:11.130
> 
> 标签：java, telnet, expectj

我想在 Java 中使用等价的 Expect。这是一个简单的代码：

```
public class TelnetJExpect
{
    @Test
    public void telnetTest() 
    {
        ExpectJ expectinator = new ExpectJ(5);
        try
        {
            Spawn shell = expectinator.spawn("172.17.80.161", 23);
            System.out.println("\nExit: " + shell.getCurrentStandardOutContents());
            shell.stop();
        }
        catch (Exception e)
        {
            e.printStackTrace();
            assertTrue(false);
        }
    }
} 
```

结果，我得到了垃圾：

```
ÿýÿý ÿý#ÿý' 
```

出口：

```
ÿýÿý ÿý#ÿý' 
```

但是，当我从命令行使用 telnet 时，我得到了连接。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:12:41.227

尝试这个

```
 ExpectJ ex = new ExpectJ(50);

    //org.apache.commons.net.telnet.TelnetClient
    TelnetClient telnetClient = new TelnetClient();
    telnetClient.connect("192.168.56.101");

    /*
     * add this constructor to TelnetSpawn
     * 
     * public TelnetSpawn(InputStream in, OutputStream out) throws IOException {
        this.m_socket = null;
        m_fromSocket = in;
        m_toSocket = out;
     */
    TelnetSpawn telnetSpawn = new TelnetSpawn(telnetClient.getInputStream(), telnetClient.getOutputStream());
    Spawn spawn = ex.spawn(telnetSpawn);
    try{
        //provide username and password here
        spawn.interact();
    }catch(NullPointerException npe){
        //ignore, nasty expectj bug
    } 
```

# objective-c - 我的 iCloud NSMetadataItems 的 NSMetadataItemFSCreationDateKey 始终为空

> ID：12632515
> 
> 赞同：1
> 
> 时间：2012-09-28T01:48:23.480
> 
> 标签：objective-c, icloud, nsmetadataquery

在执行 NSMetadataQuery 时，我得到了结果，并且得到了文件路径，但 NSMetadataItemFSCreationDateKey 始终为空。例如：

```
 for (NSMetadataItem * result in sortedResults) {
      NSLog(@"Going through results");
      NSDate *theDate = [result valueForAttribute:NSMetadataItemFSCreationDateKey];
      NSURL * fileURL = [result valueForAttribute:NSMetadataItemURLKey];
    } 
```

如果我对上面的代码进行断点，则 fileURL 设置正确，但 theDate 始终为零。

我正在 iOS 6 上对此进行测试。

# python - Windows 公共项对话框：ctypes + COM 访问冲突

> ID：12632519
> 
> 赞同：8
> 
> 时间：2012-09-28T01:48:52.820
> 
> 标签：python, windows, com, ctypes, access-violation

我正在尝试使用该`ctypes`模块来调用 Windows 的[Common Item Dialog API](http://msdn.microsoft.com/en-us/library/windows/desktop/bb776913%28v=vs.85%29.aspx)。下面显示的代码大致基于[MSDN 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ff485843%28v=vs.85%29.aspx)中概述的步骤。它唯一的依赖是`comtypes.GUID`模块。

```
import ctypes
from ctypes import byref, POINTER, c_int, c_long
from ctypes.wintypes import HWND, HRESULT
from comtypes import GUID

CLSID_FileOpenDialog = '{DC1C5A9C-E88A-4DDE-A5A1-60F82A20AEF7}'
IID_IFileDialog = '{42F85136-DB7E-439C-85F1-E4075D135FC8}'
#IID_IFileOpenDialog = '{D57C7288-D4AD-4768-BE02-9D969532D960}'
CLSCTX_SERVER = 5
COINIT_APARTMENTTHREADED = 2
FOS_PICKFOLDERS = 32
FOS_FORCEFILESYSTEM = 64

ole32 = ctypes.windll.ole32
CoCreateInstance = ole32.CoCreateInstance
CoInitializeEx = ole32.CoInitializeEx

CoInitializeEx(None, COINIT_APARTMENTTHREADED)

ptr = c_int()
error = CoCreateInstance(
    byref(GUID(CLSID_FileOpenDialog)), None, CLSCTX_SERVER,
    byref(GUID(IID_IFileDialog)), byref(ptr))
assert error == 0

ptr = ptr.value
c_long_p = ctypes.POINTER(ctypes.c_int)
print('Pointer to COM object: %s' % ptr)
vtable = ctypes.cast(ptr, c_long_p).contents.value
print('Pointer to vtable: %s' % vtable)

func_proto = ctypes.WINFUNCTYPE(HRESULT, HWND)

# Calculating function pointer offset: 3rd entry in vtable; 32-bit => 4 bytes
show_p = ctypes.cast(vtable + 3*4, c_long_p).contents.value
print('Pointer to show(): %s' % show_p)
show = func_proto(show_p)
show(0) 
```

一切都按预期工作，直到第一次调用`show(0)`：

```
 WindowsError: exception: access violation reading 0xXXXXXXXX 
```

（输出可能会有所不同。）为了比较，我在 AutoHotkey_L 中执行了相同的步骤，它可以直接访问 COM。

```
CLSID := "{DC1C5A9C-E88A-4DDE-A5A1-60F82A20AEF7}"
IID := "{42F85136-DB7E-439C-85F1-E4075D135FC8}"

ptr := ComObjCreate(CLSID, IID)
vtable := NumGet(ptr + 0, 0, "Ptr")
    show := NumGet(vtbl + 0, 3 * A_PtrSize, "Ptr")

MsgBox ptr: %ptr% vtable: %vtable% show: %A_PtrSize%

DllCall(show, "Ptr", ptr, "Ptr", 44) 
```

正如预期的那样，生成的宏会弹出一个打开文件对话框。两种情况下的 vtable 指针偏移量是相同的，但只有 Python 版本会引发访问冲突。

任何人都可以对此有所了解吗？

[我很抱歉没有在适当的地方添加更多超链接，但作为一个新用户，我一次只能添加两个。]

**背景**：我正在组合一个轻量级模块，它提供了一个用于 Python 脚本的本地保存/打开文件对话框。到目前为止，我一直无法在纯 Python 中找到实现。现有的那些依赖于 UI 工具包，例如 Tkinter 或 wxPython。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T11:09:15.937

这是解决方案：

COM 方法有一个额外的参数：'this' 指针。当您从 C++ 调用该方法时，它是隐含的，在 C（和 ctypes）中，您必须自己提供它。

换行

```
func_proto = ctypes.WINFUNCTYPE(HRESULT, HWND) 
```

进入

```
func_proto = ctypes.WINFUNCTYPE(HRESULT, c_long, HWND) 
```

这条线

```
show(0) 
```

进入

```
show(ptr, 0) 
```

并且您的代码将起作用。

# r - 使用 optimx() 的大型 Dirichlet PDF 的 ML 解决方案

> ID：12632520
> 
> 赞同：1
> 
> 时间：2012-09-28T01:49:00.413
> 
> 标签：r

我已经尝试使用 optimx 包使用梯度上升来找到 R 中 18 类 Dirichlet 模型的 ML 解决方案，但我可以找到使 CG 算法运行的初始参数值。我已经为 alpha 尝试了不同的正整数组合。有人可以告诉我我做错了什么吗？代码：

```
####Dirichlet log likelihood function
LnL_Dir <- function(alpha, p, N){
expr1 <- log(gamma(sum(alpha)))
expr2 <- sum(log(gamma(alpha)))
expr3 <- alpha-1
expr4 <- log(p)
lnl <- N*(expr1 - expr2 + sum(expr3*expr4))
return(-lnl)
} 

###gradient function
grad_Dir <- function(alpha, p, N){
expr5 <- digamma(sum(alpha))
expr6 <- digamma(alpha)
expr7 <- log(p)
gradient <- N*(expr5 - expr6 + expr7)
return(-gradient)
}

inits <- rep(c(1),18)    

optimx(inits, LnL_Dir, grad_Dir, method=c("CG"), p=theta.x, N=300) 
```

返回的错误消息是：“无法在初始参数处评估函数”

# android - 如何仅使用 update() 函数设置自动碰撞？

> ID：12632524
> 
> 赞同：0
> 
> 时间：2012-09-28T01:49:20.963
> 
> 标签：android, collision, updates

我刚开始使用 eclipse 进行 Android 编程，最近遇到了这个问题。我有一堆精灵分配给一个数组列表。现在，我想让它自动检测精灵之间的碰撞，但我当前使用的模板只能检测表面边界和移动精灵之间的碰撞。每个精灵的位置和速度都是随机生成的。如何更改我的 Sprite() 类中的 update() 函数以检测移动精灵本身之间的碰撞以及同时改变/反弹到相反方向？这是我的 Sprite 类模板：

```
package com.gameproject.cai_test;

import java.util.Random;

   public Sprite(GameView gameView, Bitmap bmp) {
         this.width = bmp.getWidth() / BMP_COLUMNS;
         this.height = bmp.getHeight() / BMP_ROWS;
         this.gameView = gameView;
         this.bmp = bmp;

         Random rnd = new Random();
         x = rnd.nextInt(gameView.getWidth() - width);
         y = rnd.nextInt(gameView.getHeight() - height);
         xSpeed = rnd.nextInt(MAX_SPEED * 2) - MAX_SPEED;
         ySpeed = rnd.nextInt(MAX_SPEED * 2) - MAX_SPEED;
   }

private void update() {
         if (x >= gameView.getWidth() - width - xSpeed || x + xSpeed <= 0) {
                xSpeed = -xSpeed;
         }
         x = x + xSpeed;
         if (y >= gameView.getHeight() - height - ySpeed || y + ySpeed <= 0) {
                ySpeed = -ySpeed;
         }
         y = y + ySpeed;

         currentFrame = ++currentFrame % BMP_COLUMNS;
   }

   public void onDraw(Canvas canvas) {
         update();
         int srcX = currentFrame * width;
         int srcY = getAnimationRow() * height;
         Rect src = new Rect(srcX, srcY, srcX + width, srcY + height);
         Rect dst = new Rect(x, y, x + width, y + height);

         canvas.drawBitmap(bmp, src, dst, null);
   }

   private int getAnimationRow() {
         double dirDouble = (Math.atan2(xSpeed, ySpeed) / (Math.PI / 2) + 2);
         int direction = (int) Math.round(dirDouble) % BMP_ROWS;
         return DIRECTION_TO_ANIMATION_MAP[direction];
   }

   //gameplay operations

   //only values from 0 to 9 will be picked; each assigned its own sprite in the list
   public int randomValue(){
       Random rnd = new Random();
       RandomValue = rnd.nextInt(10);
       return RandomValue; 
   }

   //sequence operation from addition, subtraction, multiplication, and division
   public int produceSum(){
       int addOne = 0;
       int addTwo = 0;
       Sum = addOne + addTwo;
       return Sum;
   }

   public int produceDiff(){
       int deductOne = 0;
       int deductTwo = 0;
       Difference = deductOne - deductTwo;
       return Difference;
   }

   public int produceProduct(){
       int multiOne = 0;
       int multiTwo = 0;
       Product = multiOne * multiTwo;
       return Product;
   }

   public int produceQuotient(){
       int divideOne = 0;
       int divideTwo = 0;
       Quotient = divideOne / divideTwo;
       return Quotient;
   }

   //each time this returns true, the game is reset with new operation
   //compares the value of the bubble picked to the random number being compared through operations
   public boolean compareBubbleValue(int randomBubble, int bubbleValue){

       if (randomBubble == bubbleValue){
           return true;
       }
       return false;
   } 
```

}

如您所见，update() 方法只检查移动精灵和边界之间的碰撞。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T16:24:11.070

好的，所以让我们命名你的精灵数组`spriteArray`并循环两次

```
 public Rect getBounds(){ //put this in your sprite and enemy-class.
   return new Rect(x, y, x+width, y+height);
 }

 Public void checkCollision(){
    for (int i = 0; i<spriteArray.size(); i++){
           Rect mySprite = spriteArray.get(i).getBounds(); //create rect for every sprite in array
             for (int j = 0; j<spriteArray.size(); i++){
                Rect myOtherSprite = spriteArray.get(i).getBounds();
                  if(mySprite.intersect(myOtherSprite)){ //check if they touch
                   //Todo code here
             }
          }
      }
  } 
```

然后您只需将此方法放入您的更新方法中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T20:14:43.597

这是 GameView 类的编码（请原谅，这是一堆乱七八糟的代码和注释）：

```
package com.gameproject.cai_test;

public class GameView extends SurfaceView {
   private Bitmap bmp;
   private Bitmap background;
   private Bitmap backgroundImage;
   private Bitmap pop;
   private SurfaceHolder holder;
   private GameLoopThread gameLoopThread;
   private List<Sprite> sprites = new ArrayList<Sprite>();
   private List<TempSprite> temps = new ArrayList<TempSprite>();
   private int[] bubbleValue = {0,1,2,3,4,5,6,7,8,9,10};
   private long lastClick;
   private SpriteObject timer;
   private SpriteObject morebanner;
   private SpriteObject formulaBox;
   private SpriteObject levelbanner1;
   private SurfaceHolder surfaceHolder;

   public GameView(Context context) {
         super(context);
         gameLoopThread = new GameLoopThread(this);
         timer = new SpriteObject (BitmapFactory.decodeResource(getResources(), R.drawable.hourglass), 1200, 100);
         morebanner = new SpriteObject(BitmapFactory.decodeResource(getResources(), R.drawable.morebanner), 650, 300);
         formulaBox = new SpriteObject(BitmapFactory.decodeResource(getResources(), R.drawable.formulabox), 650, 600);
         background = BitmapFactory.decodeResource(getResources(), R.drawable.background);
         backgroundImage = BitmapFactory.decodeResource(getResources(), R.drawable.background);
         pop = BitmapFactory.decodeResource(getResources(), R.drawable.pop);
         final Toast toast1 = Toast.makeText(context, "LEVEL 1 start", Toast.LENGTH_LONG);
         holder = getHolder();
         holder.addCallback(new Callback() {

                @Override
                public void surfaceDestroyed(SurfaceHolder holder) {
                }

                @Override
                public void surfaceCreated(SurfaceHolder holder) {
                       //setSurfaceSize(getWidth(), getHeight());
                       toast1.setGravity(Gravity.CENTER_VERTICAL, 0, 0);
                       toast1.show();
                       createSprites();
                       gameLoopThread.setRunning(true);
                       gameLoopThread.start();
                       //banner();
                }

                @Override
                public void surfaceChanged(SurfaceHolder holder, int format,
                              int width, int height) {
                }
         });

   }

   private void createSprites() {
         sprites.add(createSprite(R.drawable.bubble1));
         sprites.add(createSprite(R.drawable.bubble2));
         sprites.add(createSprite(R.drawable.bubble3));
         sprites.add(createSprite(R.drawable.bubble4));
         sprites.add(createSprite(R.drawable.bubble5));
         sprites.add(createSprite(R.drawable.bubble6));
         sprites.add(createSprite(R.drawable.bubble7));
         sprites.add(createSprite(R.drawable.bubble8));
         sprites.add(createSprite(R.drawable.bubble9));
         sprites.add(createSprite(R.drawable.bubble10));
         for (int i = 0; i <= 10; i++){
            bubbleValue[i] = sprites.indexOf(i);
         }
   }

   private Sprite createSprite(int resource) {
         Bitmap bmp = BitmapFactory.decodeResource(getResources(), resource);
         return new Sprite(this, bmp);
   }

   public void setSurfaceSize(int width, int height)
   {
      synchronized (surfaceHolder)
      {
         int canvasWidth = width;
         int canvasHeight = height;

         backgroundImage = Bitmap.createScaledBitmap(backgroundImage, width, height, true);
      }
   }

   @Override
   protected void onDraw(Canvas canvas) {
         canvas.drawColor(Color.WHITE);
         //levelbanner1.draw(canvas);//causes error when applied;for reference only
         for (int i = temps.size() - 1; i >= 0; i--) {
             temps.get(i).onDraw(canvas);
         }
         for (Sprite sprite : sprites) {
             timer.draw(canvas);
             //formulaBox.draw(canvas);   
             sprite.onDraw(canvas);
         }

         if (sprites.size() == 0){
             morebanner.draw(canvas);
         }

   }

   @Override
   public boolean onTouchEvent(MotionEvent event) {
         if (System.currentTimeMillis() - lastClick > 300) {
                lastClick = System.currentTimeMillis();
                float x = event.getX();
                float y = event.getY();
                synchronized (getHolder()) {
                       for (int i = sprites.size() - 1; i >= 0; i--) {
                              Sprite sprite = sprites.get(i);
                              if (sprite.isCollition(x, y)) {
                                    sprites.remove(sprite);
                                    temps.add(new TempSprite(temps, this, x, y, pop));
                                    break;
                              }
                       }
                }
         }
         return true;
   }

   public void update(){

       //for possible check of collision bet. sprites
       //

   } 
```

}

我尝试在这里为精灵分配一个 Rect 并检查底部 update() 函数的碰撞，但结果出错并产生运行时错误。如果它在 Sprite 类 update() 函数中自动化可能会更好，就像它对边界碰撞所做的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T14:26:09.280

如果你想在你的精灵之间有很好的和适当的碰撞，也许看看像[http://www.jbox2d.org/](http://www.jbox2d.org/)这样的物理引擎会有所帮助。

它将为您处理许多复杂的特定情况（隧道、影响时间、早期丢弃的广泛阶段......）

# iphone - 为什么不会通过 tableview 加载？

> ID：12632534
> 
> 赞同：0
> 
> 时间：2012-09-28T01:50:37.840
> 
> 标签：iphone, objective-c, ios

我有一个`UITableView`我正在尝试加载的内容，但我被告知我正在推送的视图为零。这是我的代码：

```
 -(IBAction)buttonAction:(id)sender
{
    UITableView *rootBeerTableController = [[UITableView alloc] init]; 
    self.rootBeerViewController = rootBeerTableController; 
    [[GlobalData sharedData].mViewManager pushView:ROOTBEER animated:YES]; 
} 
```

有人能告诉我这是为什么吗？如果我遗漏了一些代码，请告诉我，我是 iPhone 新手，很抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T02:21:42.633

尝试：

```
UITableView *rootBeerTableController = [[UITableView alloc] initWithStyle:UITableViewStylePlain]; 
self.rootBeerViewController = rootBeerTableController; 
[[GlobalData sharedData].mViewManager pushViewController:self.rootBeerViewController animated:YES]; 
```

看起来你正在推动一个不是对象的宏......很难准确地说出发生了什么，因为你没有定义什么`ROOTBEER`是。

# python - 将数据从一个数据库保存到另一个数据库

> ID：12632536
> 
> 赞同：-1
> 
> 时间：2012-09-28T01:51:06.953
> 
> 标签：python, django

我想在 Postgres 中将数据从一个数据库复制到另一个数据库。我在 django 中编写了一个脚本，并且能够从一个特定的表中获取数据，但是我如何将该数据添加到其他数据库中。新数据库具有相同的表和列名，我想将旧数据库文件保存到新数据库中。这对你们中的一些人来说可能很容易，但我真的想不通。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T01:59:51.750

我对这两个 API 都不熟悉，但如果行/列具有相同的维度，您可以执行类似的操作（这是部分伪代码）：

```
for x in range(height):
    for y in range(width):
        data = call_data_from_database_A(x, y)
        new_entry = enter_data_into_database_B(x, y) 
```

Call_data 是您从该特定行/列获取数据的位置，而 enter_data 将数据输入到该特定行/列中。我对这两个 API 都不熟悉，但如果你找到了这两个，我相信你可以很快搞清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T02:03:02.937

与其编写自己的导入和导出代码，不如使用 Postgres 的本机功能并从旧数据库中转储表，然后将其导入新数据库：

> [http://www.postgresql.org/docs/current/static/sql-copy.html](http://www.postgresql.org/docs/current/static/sql-copy.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T02:34:52.670

使用 Django 执行此操作的最简单方法（将一个 Django 数据库移动到另一个，使用不同的模型 django 数据库定义）是编写 2 个 Django 视图和一个 jquery html 页面。

第一个视图将在原始 Django 应用程序中。它本质上将创建数据库的 json 对象模型，并在获取请求时将其推出。这是 Django 模型的自定义。

第二个视图将在新的 Django 应用程序中。这将接收 json 数据并将其格式化以匹配您当前的 Django 数据库（字段可能不完全匹配，因此进行此迁移的原因）。然后，您只需将元素添加到新数据库中，就像创建新的 Django 模型条目（[示例](https://docs.djangoproject.com/en/1.4/topics/db/models/#extra-fields-on-many-to-many-relationships)）一样。

我个人使用一个单独的 jquery html 页面，该页面从第一个视图获取 json 数据并将其发布到第二个视图。您可以排除这一部分，然后在第二个视图中将其全部用 python 编写，但我发现这样做会更干净。

# android - Eclipse Android 项目中的白名单 url

> ID：12632539
> 
> 赞同：1
> 
> 时间：2012-09-28T01:51:21.863
> 
> 标签：android, eclipse, cordova

使用 XCode 和 phonegap 时，我通常编辑 .plist 文件以将我的 AJAX 请求的 url 列入白名单。这是如何在 Eclipse 中的 Android phonegap 项目中完成的？在谷歌搜索问题后，我确实遇到了编辑 .htaccess 文件并添加

访问控制允许来源 *

我无权修改 .htaccess 文件。

列入白名单时，这适用于 iPhone。在 Android 上，我得到了

access-control-allow-origin 不允许 xmlhttprequest 无法加载

错误，因此在将 url 添加到白名单后它可以与 iPhone 一起使用没有问题，我是否必须修改服务器才能使其正常工作？或者我可以使用Phonegap 将Eclipse 中这个Android 项目中的URL 列入白名单吗？我确实可以访问 ajax 请求的 PHP 文件，如果不能选择白名单，我可以对这些文件做些什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T05:33:22.920

阅读此[文档](http://docs.phonegap.com/en/1.9.0/guide_whitelist_index.md.html)并尝试解决此问题

在我的条件下，这适用于两种设备..（iPhone 和 Android）

对于 Android，您编辑此文件“res/xml/cordova.xml”或“res/xml/phonegap.xml”

# cocoa - 基于视图的 NSTableView 中每一行的 NSViewController？

> ID：12632541
> 
> 赞同：4
> 
> 时间：2012-09-28T01:51:24.563
> 
> 标签：cocoa, nstableview, nsview, nsviewcontroller

Cocoa 中通常的良好实践要求每个人都`NSView`应该拥有自己`NSViewController`的所有者。这应该适用于基于视图的每一行`NSTableView`吗？如果是的话，初始化和缓存这些 NSViewController 的好策略是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T02:03:26.027

在大多数情况下，这将是矫枉过正。不需要*每个* `NSView`人都有一个控制器。与模型层没有关系的视图呢？在这种情况下，不需要中介/控制器？在大表中，这将导致可能不需要的控制器对象的激增。

我会仔细查看文档中提供的[TableViewPlayground示例项目。](https://developer.apple.com/library/mac/#samplecode/TableViewPlayground/Introduction/Intro.html)请注意该项目中 Apple 如何使用组成行的各种视图。特别要关注`ATComplexTableViewController`类及其关联的 nib 文件。在这里，`dataSource`表视图返回视图，其`dataSource`本身充当视图和模型之间的中介。

# jquery - 带有未选择默认选项卡的 Jquery 选项卡

> ID：12632542
> 
> 赞同：0
> 
> 时间：2012-09-28T01:51:26.927
> 
> 标签：jquery, jquery-ui-tabs

我已经实现了 jquery-ui 默认选项卡，我的客户已经回复我，要求在最初登陆页面时存在与选项卡本身分开的主页消息。所以为了说明......我有五个标签，其中有五个对应的 div 和相关的内容。需要添加另一个将在初始化时显示的内容 div，然后一旦选择了一个选项卡，它就会消失并且无法访问。li 元素都需要一个相应的 div 才能使用，如果我尝试将额外的 li 设置为 display:none，jquery 初始化会将其删除......是否有一个简单的解决方案，或者我将不得不编写自定义代码这？

```
 $(document).ready(function () {
            $(".tabs").tabs({ event: "mouseover", fx: { opacity: 'toggle', duration: 'fast' }
            });
        }); 
```

**添加**

```
 $(document).ready(function(){
        $("#blank").remove();}); 
```

*html*

```
 <div class="tabs">
<ul>
      <li id="blank" class="tabsm"><a href="#keytab-x" style="display: none"></a></li>
      <li class="tabsm"><a href="#keytab-1"tab1</a></li>
      <li class="tabsm"><a href="#keytab-2">tab2t</a></li>
      <li class="tabsm"><a href="#keytab-3">tab3</a></li>
      <li class="tabsm"><a href="#keytab-4">tab4</a></li>
      <li class="tabsm"><a href="#keytab-5">tab5</a></li>
</ul>}
 <div id="keytab-x">
                    <h2>
                        this is the default</h2>
                    <p>
                        </p>
                </div>
    <div id="keytab-1">
                    <h2>
                        this is tab 1</h2>
                    <p>
                        </p>
                </div>
    <div id="keytab-2">
                    <h2>
                        this is the tab 2</h2>
                    <p>
                        </p>
                </div>
    <div id="keytab-3">
                    <h2>
                        this is the tab 3</h2>
                    <p>
                        </p>
                </div>
</div>
etc.. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T17:48:48.550

好的，

如前所述，使用删除：

```
$('#tabs').tabs('remove', 2); 
```

或在您的选项卡上放置一个图层，该图层在 x 时间后或与选项卡交互时在 DOM 中被删除/隐藏。

我为覆盖标签的广告块做了一次。

你可以有你的结构，如：

```
<div id="tabs">
    <ul>
        <li>
            <a href='#tabs1">tab 1</a>
        </li>
         <li>
            <a href='#tabs2">tab 2</a>
        </li>
    </ul>
    <div id="tabs1"> my tab1 content</div>
    <div id="tabs2"> my tab2 content </div>
    <div id="myOverlay"> my overlay content </div>
</div> <!-- end tabs --> 
```

随着 jQuery UI 选项卡的工作方式，只有具有与 ul 中的哈希匹配的 id 的 div 才会被视为“选项卡”的一部分 - 任何其他 div 都呈现为普通 div。因此，使用一些 css 来绝对定位叠加层，并使用一些 jquery 来处理隐藏它（当我这样做时，我使用了向下滑动），你就准备好了。

# android - 多点触控问题android

> ID：12632545
> 
> 赞同：1
> 
> 时间：2012-09-28T01:51:52.533
> 
> 标签：android, button, multi-touch

我有一个支持多点触控的项目。当您触摸一个按钮时，它会传递 1。但是，它只获得第一次 touch 。请帮助我，这是为了我们的论文。

这是我的代码：

```
 public boolean onTouch(View v, MotionEvent event) {
     int action = event.getActionMasked();
     if(action == MotionEvent.ACTION_DOWN){

       b1=b2=b3=b4=b5=b6="0";

        switch(v.getId()) {
           case R.id.button3:
               b3 = "1";
               break;
           case R.id.button2:
                b2 = "1";
                break;
           case R.id.button1:
               b1 = "1";
               break;
           case R.id.button4:
               b4 = "1"; 
               break;
           case R.id.button5:
               b5 = "1";
               break;
           case R.id.button6:
               b6 = "1";   

        }
     }  else if(action == MotionEvent.ACTION_POINTER_DOWN )
     { 
         switch(v.getId()) {
           case R.id.button3:
               b3 = "1";
               break;
           case R.id.button2:
                b2 = "1";
                break;
           case R.id.button1:
               b1 = "1";
               break;
           case R.id.button4:
               b4 = "1"; 
               break;
           case R.id.button5:
               b5 = "1";
               break;
           case R.id.button6:
               b6 = "1";   

        }
    }
  } 
```

在这里，当按下 button1 和 button2 时，它应该传递 b1=1 和 b2=1，但它只传递 b1=1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T02:09:09.040

返回`true`表示您处理了触摸事件。

此外，使用字符串（`b1`through `b6`）作为布尔值显然是个坏主意。改用 a `boolean`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T03:18:50.627

您的触摸侦听器的问题（假设所有按钮都调用同一个方法）是每次您进入该方法时它都会重置值，并且`onTouch()`会为您需要处理的每个事件调用一次。在您触摸通过同一个侦听器的两个唯一按钮的示例中，该方法将被调用一次，并带有`ACTION_DOWN`您触摸的第一个按钮的事件，然后第二次带有`ACTION_DOWN`您触摸的第二个按钮的事件。您第二次运行该方法会将所有`bx`输入的值重置为零，然后再设置与该视图关联的值，因此此代码将始终仅将一个按钮“标记”为已触摸。

`ACTION_UP`您可能会考虑为该视图重置和事件上的“标记”状态，`ACTION_CANCEL`以保持更好的全局状态。我也同意其他发帖者的观点，即将这些值存储为字符串似乎效率很低，并且以后比较逻辑会变得更加困难。

# javascript - 从 JavaScript 对 HTML 的更改没有保留

> ID：12632548
> 
> 赞同：0
> 
> 时间：2012-09-28T01:52:23.567
> 
> 标签：javascript, html, hide, show

当从表单完成提交时，我试图隐藏一个 div。发生了变化，但是当警报（“链接”）结束时，一切又回到了原来的样子。

### JavaScript：

```
<script type="text/javascript" language="javascript">
    function checarLogin(user, pass){
        var e;
        if (user.value == "a") {
            if (pass.value == "b") {
                alert("Bienvenido.");
                e = document.getElementById('login').style.display='none';
                alert("link");
            } else
            alert("Usuario o clave incorrectos.");
        } else
            alert("Usuario o clave incorrectos.");

    }
</script> 
```

### HTML：

```
<div id="login">
    <form onsubmit="checarLogin(user, pass)">
    Ingrese usuario y clave para ver los documentos.
    <div id="inlogin" display="none">
        <br><br>
        Usuario <input name="user" type="text"><br><br>
        Clave <input name="pass" id="clave" type="password"><br>
        <input type="submit">
    </div>
    </form>
</div>

<div id="descargas">
    Descargables.
    <div id="indescargas">
    </div>
</div> 
```

我想隐藏登录 DIV。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T01:57:06.180

当您提交表单时，它会往返于服务器。很可能页面正在刷新，这会导致内容恢复到原来的状态。您可以通过使页面变高、向下滚动并提交来测试这一点。如果您弹回顶部，则页面已刷新。

要解决这个问题，您需要使用 ajax 请求来提交表单数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T02:08:39.710

该页面正在提交给自己，添加 return false 应该这样做。[http://jsfiddle.net/Y6x5N/](http://jsfiddle.net/Y6x5N/)

```
<form onsubmit=" return checarLogin(user, pass);"> 
```

和

```
function checarLogin(user, pass){
    var e;
    if (user.value == "a") {
        if (pass.value == "b") {
            alert("Bienvenido.");
            e = document.getElementById('login').style.display='none';
            alert("link");
        } else {
        alert("Usuario o clave incorrectos.");
        }
    } else {
        alert("Usuario o clave incorrectos.");
    }
return false;

}​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T02:09:25.653

发生这种情况是因为表单正在提交到服务器。我假设您要完成的是身份验证功能？一旦用户通过身份验证，**登录** `div`将被删除？

我建议您在服务器端的站点中进行身份验证。如果您打算继续此操作，密码将打印在您的`javascript`块中，并且用户可以轻松阅读。一旦用户成功通过身份验证，服务器可以轻松地返回另一个页面而无需**登录** `div`。更简单，更安全。

# python - Python中的负数模

> ID：12632549
> 
> 赞同：3
> 
> 时间：2012-09-28T01:52:27.763
> 
> 标签：python, modulus

```
23 % -5 = -2
23 % 5 = 3 
```

有人可以向我解释一下我如何理解这一点，因为我明天要考试。我想说它，因为`-5 * -5 =25`那`25 -2 = 23`是他们获得`23`. 这个对吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-28T02:06:28.887

在 Python 中，余数的符号与*分母*的符号相同（这与 C 等语言不同，后者与*分子*的符号相同）。

从数学上讲，你总是可以保证如果`a, b = divmod(n, d)`，那么`a*d + b == n`。

注意`23//5 == 4`and `23//-5 == -5`（Python 总是做地板除法）。因此，正如您所说，我们有`4*5 + 3 == 23`和。`-5*-5 - 2 == 23`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T02:11:01.707

为您的目的查看问题的最简单方法是考虑以下定义：

a mod n = R 其中余数 R 必须满足 0<= R

因此，对于 mod -5 算术，0<= R < -4 即 R 可以是 0、-1、-2、-3、-4 之一

也就是说，您有效地从 a 中减去（或添加）n，直到将 R 带入上述范围：

所以

23 % 5 是 (23-4*5) = 23-20 = 3

但

23 % -5 是 (23+5*(-5)) = 23-25 = -2

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T02:15:34.313

嗯，23 % 5 = 3，因为 4*5 = 20，当你将 23 除以 20 时，你得到的余数是 3。你可以把它想象成你可以不用翻的壁橱。

至于 23 % -5，这个答案因一种编程语言而异。

对于 Python，它是 -2，因为它总是返回除数的值，这是因为 5*5 = 25，当你在 Python 中将 23 除以 25 时，你会得到 -2 的余数（因为它必须是负数，因为除数是负数) 所以我们有 25 - 2 = 23。

值得注意的是，正式的数学定义表明 b 是一个正整数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-21T13:47:34.883

% 在 Python 中使用“模运算”；**这与这样提醒除法操作不同。**

```
a - int(a/n) * n 
```

尽管它有时在某些计算机语言中是等价的。

数学表达式可以在这里找到：[http ://en.wikipedia.org/wiki/Modulo_operation](http://en.wikipedia.org/wiki/Modulo_operation)

所以很明显，在 Python 中“%”操作使用了下面的表达式：

```
mod(a, n) = a - n * floor(a / n) 
```

所以，

23%-5 = mod(23,-5) = 23 - (-5) * floor(23/-5) = 23 - (-5) * -5 = -2

和

23%5 = mod(23, 5) = 23 - 5 * 地板(23/5) = 23 - 5 * 4 = 3

另外，你觉得有趣的是

-23%5 = mod(-23,5) = (-23) - 5 * floor(-23/5) = -23 - 5 * (-5) = 2

因为 floor() 动作将使整数值趋向负无穷大。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T02:05:03.130

让我们把它写成 N=kM+R。

我们有 23 = -5*(-5) - 2 和 23 = 4*5 + 3。

# linux - 配置 Apache 以允许不允许的目录列表

> ID：12632552
> 
> 赞同：1
> 
> 时间：2012-09-28T01:52:52.033
> 
> 标签：linux, apache, ubuntu, web, apache2

我只需要允许特定目录的目录列表：`/var/www/test`. 我按照这里给出的步骤[http://wiki.apache.org/httpd/DirectoryListings](http://wiki.apache.org/httpd/DirectoryListings)但我做错了因为如果我浏览我会收到**Forbidden 403**`http://localhost/test`消息。以下是我的 /etc/apache2/sites-available/test 中的内容。你能发现这个配置有什么错误吗？

```
<VirtualHost *:80>
    DocumentRoot /var/www
    <FilesMatch index.html>
        deny from all
    </FilesMatch>
    <Directory /var/www/php/>
        AllowOverride None
        deny from all
    </Directory>
    <Directory /var/www/>
        AllowOverride None
    </Directory>
    <Directory /var/www/test>
        Options +Indexes
        AllowOverride All
        Order deny,allow
        Allow from all
    </Directory>
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T02:14:46.513

`Order`您指定的 for is `/var/www/test`，`deny,allow`因此`Deny from all`on`/var/www`优先于`Allow from all`for `/var/www/test`。切换到`allow,deny`，你会得到你期望的行为。

我还强烈建议您删除`<FilesMatch index.html>`. 它只会给你带来麻烦。`index.html`与自动目录索引无关；它仅在您明确创建此类文件时才涉及，因此该指令只会使普通`index.html`文件无法正常工作。

# ruby - Ruby输入输出问题

> ID：12632554
> 
> 赞同：0
> 
> 时间：2012-09-28T01:52:53.393
> 
> 标签：ruby

一个简单的问题，但无法弄清楚如何解决它，缺乏Ruby语言的知识：

```
类游戏
  定义初始化
    获取命令
  结尾
  def get_command
    命令 = 获取
    放置命令 # => 位置
    puts command != "POSITION" # => true
    如果命令！=“位置”
      命令 = 获取命令
    别的  
      返回真
    结尾
  结尾
结尾

a = Game.new

```

每当我运行一个应用程序并键入`POSITION`它时，它总是得到`true`比较，`"POSITION"`谁能解释为什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T01:54:43.393

因为你实际得到的是“POSITION\n”。你可以在 irb 中看到：

```
1.9.3p194 :061 > command = gets
POSITION
 => "POSITION\n" 
```

在进行比较之前，您应该剥离命令​​：

```
command = gets.strip 
```

或者

```
command = gets.chomp 
```

这将从输入中去除空格（包括换行符）。

# ios - 构建 Xcode 项目并检索 .app 文件？

> ID：12632570
> 
> 赞同：0
> 
> 时间：2012-09-28T01:55:28.397
> 
> 标签：ios, macos, build

好的，很奇怪的请求，但是如何在我的服务器上构建一个 Xcode 项目并检索 .app 文件？我想使用 iOS 和 Mac OS X 来执行此操作。这些过程有时被称为构建服务器。但 iOS 是最关键的。我还想象在这个过程中还涉及到其他一些技术。所以感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T02:16:24.153

从阅读有关 Hudson 的信息开始：

[http://hudson-ci.org/](http://hudson-ci.org/)

和

[http://blogs.globallogic.com/build-management-for-ios-and-mac-based-projects](http://blogs.globallogic.com/build-management-for-ios-and-mac-based-projects)

# perl - Perl cron 作业保持运行

> ID：12632571
> 
> 赞同：0
> 
> 时间：2012-09-28T01:55:42.707
> 
> 标签：perl, cron, arduino, command-line-arguments, crontab

我目前正在使用 cron 作业来拥有一个 perl 脚本，该脚本告诉我的 arduino 循环我的鱼菜共生系统，一切都很好，除了 perl 脚本没有`die`按预期进行。

这是我的 cron 工作：

```
*/15 * * * * /home/dburke/scripts/hal/bin/main.pl cycle 
```

下面是我的 perl 脚本：

```
#!/usr/bin/perl -w
# Sample Perl script to transmit number
# to Arduino then listen for the Arduino
# to echo it back

use strict;
use Device::SerialPort;
use Switch;
use Time::HiRes qw ( alarm );
$|++;
# Set up the serial port
# 19200, 81N on the USB ftdi driver
my $device = '/dev/arduino0';
# Tomoc has to use a different tty for testing
#$device = '/dev/ttyS0';

my $port = new Device::SerialPort ($device)
    or die('Unable to open connection to device');;
$port->databits(8);
$port->baudrate(19200);
$port->parity("none");
$port->stopbits(1);

my $lastChoice = ' ';
my $signalOut;
my $args = shift(@ARGV);
# Parent must wait for child to exit before exiting itself on CTRL+C
if ($args eq "cycle") {
                open (LOG, '>>log.txt');
                print LOG "Cycle started.\n";
                my $stop = 0;
                sleep(2);
                $SIG{ALRM} = sub {
                        print "Expecting plant bed to be full; please check.\n";
                        $signalOut = $port->write('2'); # Signal to set pin 3 low
                        print "Sent cmd: 2\n";
                        $stop = 1;
                };
                $signalOut = $port->write('1'); # Signal to arduino to set pin 3 High
                print "Sent cmd: 1\n";
                print "Waiting for plant bed to fill...\n";
                print LOG "Alarm is being set.\n";
                alarm (420);
                print LOG "Alarm is set.\n";
                while ($stop == 0) {
                        print LOG "In while-sleep loop.\n";
                        sleep(2);
                }
                print LOG "The loop has been escaped.\n";
                die "Done.";
                print LOG "No one should ever see this.";
    }
    else {
        my $pid = fork();
        $SIG{'INT'} = sub {
            waitpid($pid,0) if $pid != 0; exit(0);
        };

        # What child process should do
        if($pid == 0) {
            # Poll to see if any data is coming in
            print "\nListening...\n\n";
            while (1) {
                my $incmsg = $port->lookfor(9);
                # If we get data, then print it
                if ($incmsg) {
                    print "\nFrom arduino: " . $incmsg . "\n\n";
                }
            }
        }
        # What parent process should do
        else {
                    sleep(1);
                    my $choice = ' ';
                    print "Please pick an option you'd like to use:\n";
                    while(1) {
                        print " [1] Cycle  [2] Relay OFF  [3] Relay ON  [4] Config  [$lastChoice]: ";
                        chomp($choice = <STDIN>);
                        switch ($choice) {
                                case /1/ {
                                        $SIG{ALRM} = sub {
                                                        print "Expecting plant bed to be full; please check.\n";
                                                        $signalOut = $port->write('2'); # Signal to set pin 3 low
                                                        print "Sent cmd: 2\n";
                                                        };
                                        $signalOut = $port->write('1'); # Signal to arduino to set pin 3 High
                                        print "Sent cmd: 1\n";
                                        print "Waiting for plant bed to fill...\n";
                                        alarm (420);
                                        $lastChoice = $choice;
                                }
                                case /2/ {
                                        $signalOut = $port->write('2'); # Signal to set pin 3 low       
                                        print "Sent cmd: 2";
                                        $lastChoice = $choice;
                                }
                                case /3/ {
                                        $signalOut = $port->write('1'); # Signal to arduino to set pin 3 High
                                        print "Sent cmd: 1";
                                        $lastChoice = $choice;
                                }
                                case /4/ {
                                        print "There is no configuration available yet. Please stab the developer.";
                                }
                            else        { print "Please select a valid option.\n\n";}
                        }
                   }
           }
} 
```

当我运行时，`ps -ef`我发现以下输出：

```
dburke   15294 15293  0 14:30 ?        00:00:00 /bin/sh -c /home/dburke/scripts/hal/bin/main.pl cycle
dburke   15295 15294  0 14:30 ?        00:00:00 /usr/bin/perl -w /home/dburke/scripts/hal/bin/main.pl cycle 
```

不应该只有一个过程吗？即使它收到了循环参数并且分叉在循环参数的`if`块之外，它是否也在分叉？

知道为什么它不会因声明而死`die "Done.";`吗？它可以从命令行正常运行，并可以很好地解释“循环”参数。当它在 cron 中运行时，它运行良好，但是，进程永远不会死掉，虽然每个进程都不会继续循环系统，但它似乎确实在以某种方式循环，因为它会非常快地增加我的系统负载。

如果您想了解更多信息，请询问。多谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T21:56:55.407

看起来问题在于我的脚本最初将`cycle`块封装在`fork`其中，出于某种原因，我不知道，它正在打开一个进程（可能是孩子？）。从`cycle`分叉中取出块已经纠正了这个问题。现在它在指定时间运行并在循环完成后正确死亡，让我的 cpu 负载用于更有用的东西。:)

**感谢所有对我的问题发表评论的人。你的建议帮助我解决了这个问题。**

# javascript - 通过 jquery 显示来自控制器的 JSON 数据

> ID：12632572
> 
> 赞同：0
> 
> 时间：2012-09-28T01:55:53.547
> 
> 标签：javascript, jquery

这是数据：

![在此处输入图像描述](../Images/3f793e9f5fc41ab1da0d109ab0b363eb.png)

我试过这段代码：

```
 var listUrl = '<%: Url.Content("~/") %>' + "Home/TodayFocusListEach?clickID=45";

 $.getJSON(listUrl, function (fList) {
     $.each(fList.ja, function (fIndex, Fdata) {
        $parent.append(Fdata.ID + "<br/>");
     });
 }); 
```

但结果是不确定的。

谁能告诉我我该如何解决这个问题？

# java - 为什么我收到一个空指针异常，将串行数据发送到 arduino

> ID：12632575
> 
> 赞同：-1
> 
> 时间：2012-09-28T01:56:28.963
> 
> 标签：java, nullpointerexception

这是堆栈的一部分：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
at me.lorenjz.com.SerialComms.sendStuff(SerialComms.java:122)
at me.lorenjz.com.MainWindowC.actionPerformed(MainWindowC.java:82)
at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2028)
at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2351) 
```

发送资料：

```
 public synchronized void sendStuff(String messageString){
        //System.out.print("The message being sent is:  " + messageString);
        String stupid = "button";
            try {
122:                output.write(stupid.getBytes());
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

    } 
```

这是应该将字符串发送到“sendStuff”的按钮

```
public void actionPerformed(ActionEvent e) {
        // TODO Auto-generated method stub

        //JOptionPane.showMessageDialog(null, "Stuff has happened");
        SerialComms SC = new SerialComms();
        SC.sendStuff("Button");
    } 
```

我在这里做错了什么？

罗兰

添加代码：

```
 public static void main(String[] args){
     System.out.println("Started onCreate");
     MainWindowC nw = new MainWindowC();
     MixWindowTwo mwt = new MixWindowTwo();
     System.out.println("Started second window");
     SerialComms SC = new SerialComms();
        SC.initialize();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T01:58:10.577

显然，`output`尚未创建。

# java - 这个命令是什么意思“-c”？

> ID：12632584
> 
> 赞同：0
> 
> 时间：2012-09-28T01:57:24.953
> 
> 标签：java, android, su

我在看一些代码，发现了这个代码

```
{ "su", "-c", "reboot" } 
```

我知道这会使您的手机重新启动，因为它首先要求 su 然后重新启动，但我不知道 -c 是什么意思。

它就像键盘上的输入按钮？我也可以添加尽可能多的吗？就像是

```
{ "su", "-c", "code", "-c", "code", "-c", "code" } 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T02:00:08.900

`-c`是一个标志，它告诉`su`命令执行以下命令`-c`。因此，在这种情况下，它只是以 root 身份告诉系统重新启动。

[`su`关于命令的一些文档。](http://www.linfo.org/su.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T02:04:26.540

`su reboot`已经意味着“在名为”的用户的凭据下给我一个会话`reboot`。所以必须有一种方法来表明`reboot`不是要成为用户的名称，而是要运行的命令的名称（作为超级用户）。

（您的系统没有手册页`su`吗？）

# ruby-on-rails - 将 rails 控制器的响应类型设置为 xml

> ID：12632586
> 
> 赞同：1
> 
> 时间：2012-09-28T01:58:02.533
> 
> 标签：ruby-on-rails, respond-to, respond-with

我对rails很陌生。我正在尝试将 Rails 控制器的响应类型设置为 xml，但运气不佳。我当然可以更好地理解 respond_to 和 respond_with 是如何工作的。

这是我的控制器的样子：

```
class ResponsesController < ApplicationController

 respond_to :xml

  def index

    require 'rubygems'   
    require 'telapi'

        ix = Telapi::InboundXml.new do

          Say('Hello.', :loop => 3, :voice => 'man')
          Say('Hello, my name is Jane.', :voice => 'woman')
          Say('Now I will not stop talking.', :loop => 0)
        end

        respond_with do |format|
            format.xml { render }
        end

        puts ix.response 

    end
end 
```

这会导致 http 检索失败。有人可以告诉我如何修复控制器并将其响应类型设置为 xml 吗？此外，关于 respond_to 和 respond_with 如何工作的令人信服的 1-2 班轮会很棒！

谢谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T02:19:02.147

代替

```
 respond_with do |format|
            format.xml { render }
        end 
```

和

```
respond_with(ix) 
```

有 2 种渲染 xml 的方法。示例 1 使用了 respond_to，这意味着“每个方法都将使用 xml 并使用从 respond_with 中解析的对象”

示例 2 使用了 respond_to，意思是“使用下面的块来声明什么类型的响应和要解析的对象”

示例 1：

```
class ResponsesController
  respond_to :xml #respond_to A

  def index
    respond_with(@asd) # respond_with A
  end
end 
```

示例 2：

```
def ResponsesController

  def index
    respond_to do |format|
     format.xml { render xml: @asd}
    end
  end
end 
```

[http://blog.plataformatec.com.br/2009/08/embracing-rest-with-mind-body-and-soul/](http://blog.plataformatec.com.br/2009/08/embracing-rest-with-mind-body-and-soul/)

# c# - c# 反序列化对象

> ID：12632588
> 
> 赞同：0
> 
> 时间：2012-09-28T01:58:19.007
> 
> 标签：c#, serialization, deserialization

我有一个如下所示的 xml

```
 string input =
@"<g1:Person xmlns:g1=""http://api.google.com/staticInfo/"">
    <g1:Id>005008</g1:Id>
    <g1:Infolist>
 <g1:Info><g1:Title>a</g1:Title></g1:Info>    
<g1:Info<g1:Title>b</g1:Title></g1:Info>     
<g1:Info><g1:Title>c</g1:Title></g1:Info>
<g1:overview>there are three chaters.</g1:overview>
  </g1:Infolist>
    <g1:age>23</g1:age>
  </g1:Person>"; 
```

我定义了对象，但我不知道将 /Person/Infolist/overview 放在哪里。这个属性如何定义。放在哪里。

```
 [XmlRoot(ElementName = "Person", Namespace = "http://api.google.com/staticInfo/")]
    public class Person
    {

        public int Id { get; set; }

        public int age { get; set; }

        [XmlElement(ElementName = "Infolist", Namespace = "http://api.google.com/staticInfo/")]
        public List<Info> Infolist {get;set; }
    }

    public class Info
    {
        public int Title { get; set; }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T02:02:27.183

```
//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:4.0.30319.269
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

using System.Xml.Serialization;

// 
// This source code was auto-generated by xsd, Version=4.0.30319.1.
// 

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType=true, Namespace="http:=//api.google.com/staticInfo/")]
[System.Xml.Serialization.XmlRootAttribute(Namespace="http:=//api.google.com/staticInfo/", IsNullable=false)]
public partial class Person {

    /// <remarks/>
    public ushort Id;

    /// <remarks/>
    public PersonInfolist Infolist;

    /// <remarks/>
    public byte age;
}

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType=true, Namespace="http:=//api.google.com/staticInfo/")]
public partial class PersonInfolist {

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute("Info")]
    public string[] Info;

    /// <remarks/>
    public string overview;
} 
```

脚步：

*   将您的 Xml 粘贴到 Visual Studio 中的新 Xml 文件中
*   单击 Xml -> 创建架构
*   将架构文件保存到磁盘
*   打开 Visual Studio 命令提示符
*   执行命令：`xsd /classes /fields so.xsd`

这可能是获得结果的众多方法之一。我喜欢让工具生成我的代码——它们永远不会出错。

# c# - 空合并运算符

> ID：12632590
> 
> 赞同：4
> 
> 时间：2012-09-28T01:58:51.633
> 
> 标签：c#, null-coalescing-operator

我有以下代码：

```
decimal? a = 2m;
decimal? b = 2m;
decimal c = a ?? 1m * b ?? 1m; 
```

由于两者`a`和`b`都已填写，我希望`c`给我**4**的结果。

但是，我得到的结果是**2**，在这种情况下`b`被视为**1**而不是**2**。

有谁知道这种行为背后的原因是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T02:03:06.823

如果要获取的值，请对值条件进行分组`4`

```
decimal c = (a ?? 1m) * (b ?? 1m); 
```

您当前的语法被评估为

```
decimal c = a ?? (1m * b ?? 1m); 
```

`2`以及您获得( *as for`a`* )价值的原因

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-28T02:03:44.013

该表达式的作用如下：

```
decimal c = a ?? (1m * b) ?? 1m; 
```

有一个价值，你就`a`明白了。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-28T02:03:31.417

```
decimal c = a ?? 1m * b ?? 1m; 
```

等于：

```
if (a != null)
    c = a
else
    ... 
```

在您的情况下`a`，它不是 null 并且具有值，`2`所以这就是结果。

# python - 没有参数的类方法产生 TypeError

> ID：12632602
> 
> 赞同：6
> 
> 时间：2012-09-28T02:00:15.590
> 
> 标签：python

这段代码：

```
class testclass:
    def __init__(self,x,y):
        self.x = x
        self.y = y
        self.test()

    def test():
        print('test')

if __name__ == '__main__':
    x = testclass(2,3) 
```

产量：

```
Error:
TypeError:test() takes no argument(1 given) 
```

我在没有任何参数的情况下调用测试函数，为什么错误说我给了一个？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-28T02:20:41.430

您将方法称为`self.test()`. 您应该在心理上将其翻译`test(self)`为找出函数定义中如何“接收”调用。然而，您的定义`test`很简单`def test()`，它没有`self`可去的地方，因此您会得到观察到的错误。

为什么会这样？因为 Python 只能在明确指定要查看的对象时查找属性（并且查找属性包括方法调用）。因此，为了让该方法执行任何取决于调用它的对象的任何事情，它需要以某种方式接收该对象。接收它的机制是让它成为第一个参数。

可以使用装饰器告诉 Python`test`根本不需要它。在这种情况下，Python 知道该方法不需要，因此它不会尝试将其添加为第一个参数。因此，以下任一定义都可以解决您的问题：`self``staticmethod``self``test`

```
def test(self):
    print('test') 
```

或者：

```
@staticmethod
def test():
    print('test') 
```

请注意，这仅与在对象上调用的方法有关（总是看起来像`some_object.some_method(...)`）。正常的函数调用（看起来像`function(...)`）没有“点的左边”，所以没有`self`，所以它不会被自动传递。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-28T02:01:12.633

传递`self`给您的`test`方法：

```
def test(self):
    print('test') 
```

您需要这样做，因为 Python 显式传递了一个引用实例化对象的参数作为第一个参数。它不应该被省略，即使方法没有参数（因为指定的错误）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-28T02:18:27.330

Python 总是将实例作为实例方法的第一个参数传递，这意味着有时有关参数数量的错误消息似乎会减少一个。

```
class testclass:
    def __init__(self,x,y):
        self.x = x
        self.y = y
        self.test()

    def test(self):          ## instance method
        print('test', self)

if __name__ == '__main__':
    x = testclass(2,3) 
```

如果您不需要访问类或实例，则可以使用如下所示的静态方法

```
class testclass:
    def __init__(self,x,y):
        self.x = x
        self.y = y
        self.test()

    @staticmethod
    def test():
        print('test')

if __name__ == '__main__':
    x = testclass(2,3) 
```

一个类方法是类似的，如果你需要访问`class`，而不是实例

```
class testclass:
    def __init__(self,x,y):
        self.x = x
        self.y = y
        self.test()

    @classmethod
    def test(cls):
        print('test', cls)

if __name__ == '__main__':
    x = testclass(2,3) 
```

# ios - 如何在 iOS 中设置非零初始值？

> ID：12632603
> 
> 赞同：0
> 
> 时间：2012-09-28T02:00:20.380
> 
> 标签：ios, button, synthesize

我有一个在我的标题中提到的 ivar

```
@interface MyClass : UIView{
    int thistone;}
- (IBAction)toneButton:(UIButton *)sender;
@property int thistone;
@end 
```

我在实现中综合了它：

```
@implementation MyClass
@synthesize thistone;
- (IBAction)toneButton:(UIButton *)sender {
if(thistone<4)
    {thistone=1000;}   // I hate this line.
    else{thistone=thistone+1; }  
} 
```

我找不到（或在任何手册中找到）设置非零初始值的方法。我希望它从 1000 开始，每次按下按钮时增加 1。该代码完全符合我的意图，但我猜有一种更合适的方法可以为我节省上面的 if/else 语句。非常感谢代码修复或指向在线文档中特定行的指针。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T02:06:06.663

每个对象都有一个`init`在实例化时调用的方法的变体。实现这个方法来做这样的设置。UIView 尤其具有`initWithFrame:`和`initWithCoder`. 最好覆盖所有并调用单独的方法来执行所需的设置。

例如：

```
- (void)commonSetup
{
    thisTone = 1000;
}

- (id)initWithFrame:(CGRect)frame
{
    if (self = [super initWithFrame:frame])
    {
        [self commonSetup];
    }

    return self;
}

- (id)initWithCoder:(NSCoder *)coder
{
    if (self = [super initWithCoder:coder])
    {
        [self commonSetup];
    }

    return self;
} 
```

# jpa - 一对多和多对一

> ID：12632604
> 
> 赞同：0
> 
> 时间：2012-09-28T02:00:42.517
> 
> 标签：jpa

我正在寻找有关何时使用上述关系的一些说明。

例如，我有一个由 B 类的实例引用的 A 类。

这种关系应该建模为 OneToMany 并在类 A 中定义一个类 B 的集合，还是由 ManyToOne 建模并在类 B 中引用类 A？

我的问题是关系的选择是否完全取决于程序员，或者依赖于应用程序还是依赖于 JPA？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T02:05:17.243

OneToMany 和 ManyToOne 是同一枚硬币的两个面。如果关联是单向的（也就是说，它不是双向的），那么关系的选择与选择哪一方拥有关系是一样的。例子：

*   您需要从 1 个 A 到许多 B 的单向关系，其中 A 是所有者。唯一的选择是 OneToMany。
*   您需要从 1 个 A 到多个 B 的单向关系，其中 B 是所有者。唯一的选择是多对一。

如果关联是双向的，那么假设您同时使用 OneToMany 和 ManyToOne。选择所有者并不强迫您做出非此即彼的决定。

* * *

更多阅读[@Java EE 6 教程：实体](http://docs.oracle.com/javaee/6/tutorial/doc/bnbqa.html#bnbqh)。

# html - 水平列表中的列表

> ID：12632606
> 
> 赞同：0
> 
> 时间：2012-09-28T02:01:07.370
> 
> 标签：html, css

我正在试验一个设计。看来我无法正确使用 CSS。我有一个水平列表，其中每个列表项都有一个列表。嵌套列表的行为似乎不正常。我在这里做错了什么？

[http://jsfiddle.net/89sqw/](http://jsfiddle.net/89sqw/)

嵌套列表没有平方列表类型，边距全错。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T02:04:23.967

您申请的所有内容也`#tfList li`对您的嵌套列表项有效（除非您覆盖）。此外，您不应该有两个具有相同 id 的元素，而是使用类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T02:10:07.773

几个问题：

1) 正如@bfavaretto 所述，您不能拥有多个具有相同 ID 的元素

~~2）你没有关闭你的“P”标签。结束标签有一个斜杠 ( `</p>`)~~

3）您在将包含块元素的元素上使用 display: inline 。这是~~无效~~ *的不好的做法*，可能会给您带来问题。使用 inline-block 代替：

```
#some-item {
  display: inline-block;
  vertical-align: top;
  *display: inline;
  *zoom: 1;
} 
```

编辑：提示 - 您可以使用特殊的“子”选择器仅选择元素的直接子元素。[http://jsfiddle.net/ryanwheale/F3cqD/](http://jsfiddle.net/ryanwheale/F3cqD/)

```
<ul>
  <li>
    Level 1
    <ul>
      <li>Level 2</li>
      <li>Level 2</li>
    </ul>
  </li>
  <li>Level 1</li>
</ul> 
```

还有这些款式

```
ul > li {
  color: red;
}
ul > li > ul > li {
  color: green;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T02:13:00.397

这个问题很容易被忽略，但它来自于将元素的`display`属性覆盖为，然后错误地尝试将其重新设置为。`#tfList li``display: inline``display: block;`

列表项的正确显示是：

```
display: list-item; 
```

此外，要在列表项上恢复间距，请在`ul`元素上设置左侧填充。

[小提琴](http://jsfiddle.net/89sqw/2/)

# sql-server - 使用现有数据对数据库进行重大更改的安全/可靠/标准流程？

> ID：12632608
> 
> 赞同：1
> 
> 时间：2012-09-28T02:01:15.693
> 
> 标签：sql-server, sql-server-2008, schema

我想拿一张带有标志和字段的桌子，并将其分成较小的桌子。要修改/分解的父表已经包含必须小心处理的实时数据。

这是我的攻击计划，我希望在没有人使用系统的情况下在本周末执行。

1.  创建我们需要的新表
2.  将现有父表 ParentTable 重命名为 ParentTableOLD
3.  创建一个名为 ParentTable 的新表，删除不需要的字段，并添加新字段
4.  运行将 ParentTableOLD 中的条目复制到新表的过程，将旧数据映射到适用的新表/字段
5.  删除 ParentTableOLD 表

以上对我来说似乎非常合理和简单，我相当肯定它会起作用。我对实现这一目标的其他技术感兴趣（以上是我唯一能想到的），以及任何有助于保持井井有条的工具。现在我在纸和笔上奔跑。

我问的原因是，现在有好几次，我一直在重新发明轮子，只是因为我不知道更好，有一个更有经验的人走过来看到我在做什么，然后说，“哦，有一个内置的方法来帮助做到这一点，”或者，“有一种更简单的方法可以做到这一点。” 在有人停下来说“你知道断点来单步执行代码，是吗？”之前，我用 Visual Studio 编写了几个月和几个月。---改变生活，哈哈。

我有带 SSMS 的 SQL Server 2008 R2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T02:50:41.937

帮助您创建“_old”表的一个好技巧是：

```
SELECT  *
INTO    mytable_old
FROM    mytable 
```

SELECT INTO 将复制所有数据*并*一步为您创建表格。

这就是说 - 我实际上会保留当前的表名，而是将所有内容复制到另一个模式中。这将使查询和报告在旧模式（需要时）上运行变得更加容易，然后必须将“_old”添加到所有名称（因为您可以只查找/替换模式名称）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T04:31:45.373

这并不能真正解决您的整体问题，但您可能会发现对您的第 4 步有用的几个工具是 RedGate 的[SQL 比较](http://www.red-gate.com/products/sql-development/sql-compare/)和[数据比较](http://www.red-gate.com/products/sql-development/sql-data-compare/)。SQL Compare 将执行架构迁移，而 Data Compare 将帮助迁移数据。您可以将数据移动到新列和新表，填充默认值，从开发同步到生产，等等。

您可以使用生产数据在开发环境中进行更改，当您对过程感到满意时，在生产中进行实际迁移。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T03:34:08.093

如果可能的话，我首先要做的是某种测试环境。如果您有依赖数据库的外部应用程序，那么请确保它们都针对您修改后的结构运行而不会出现任何问题。

还要对可能引用您要重命名的表的数据库对象进行搜索。例如;

```
SELECT Name
FROM sys.procedures
WHERE OBJECT_DEFINITION(OBJECT_ID) LIKE '%MyTable%' 
```

尝试并确保新旧模式之间的查询具有某种功能等效性。有一些查询/查询可以针对您重命名的表运行，然后让您重新设计的架构引用您的新表结构。这样，您可以确保两种结构返回的数据相同。如果可能，请提前准备好所有这些，以便在完成修改后您可以进行一系列检查，如果存在差异，这可以帮助您决定是继续更改还是取消更改。

最后，制定一个计划，以制定在发生灾难性事件时如何恢复到旧模式的计划。如果您已经使用新表结构一段时间，然后发现了一个重大问题，您能否恢复到旧表并成功地将数据从修改后的表结构中恢复到旧表中？基本上，只要遵守童子军规则并**做好准备**。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-28T02:10:11.990

备份数据库（供参考： http: [//msdn.microsoft.com/en-us/library/ms187510.aspx](http://msdn.microsoft.com/en-us/library/ms187510.aspx)），然后您可以执行所需的步骤。如果一切顺利，那么继续恢复旧数据库（供参考： http: [//msdn.microsoft.com/en-us/library/ms177429.aspx](http://msdn.microsoft.com/en-us/library/ms177429.aspx)）您甚至可以自动执行此备份过程，例如，每周。

# html - HTML 显示字段集和内联按钮

> ID：12632610
> 
> 赞同：1
> 
> 时间：2012-09-28T02:01:59.093
> 
> 标签：html, input, css-float, inline, fieldset

我有一个带有文本输入框的字段集，带有一个提交按钮。我希望它们出现在一行中，但字段集出现在一行中，然后继续出现在下一行中。这是我的html：

```
<label><fieldset class="registration_code">
    <legend>Registration Code</legend>
    <input type="text" name="regis_code" id="regis_code"/>
</fieldset>
    <input type="button" class="button2" name="Submit" value="Continue"/>
</label> 
```

我已经尝试了使按钮或字段集内联、内联块、float:left、float:right 的所有组合。他们都没有得到我想要的。我只想要一行显示这两个元素。我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T02:23:51.133

不确定为什么将代码包装在标签标签中：

[http://jsfiddle.net/hyxaK/1/](http://jsfiddle.net/hyxaK/1/)

```
<fieldset class="registration_code">
    <legend>Registration Code</legend>
    <input type="text" name="regis_code" id="regis_code"/>
</fieldset>
<input type="button" class="button2" name="Submit" value="Continue"/>

.registration_code { display:inline-block; } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-28T02:22:03.443

要么你可以这样做，

```
<label>
    <fieldset class="registration_code">
    <legend>Registration Code</legend>
    <input type="text" name="regis_code" id="regis_code"/>    
    <input type="button" class="button2" name="Submit" value="Continue"/>
    </fieldset>
</label>​ 
```

或这个，

```
fieldset{
    display : inline-block;
}​ 
```

[演示](http://jsfiddle.net/3TbQQ/)

# php - 无法在 mysql_fetch_array 中获取循环以在单独的行上打印

> ID：12632614
> 
> 赞同：0
> 
> 时间：2012-09-28T02:02:30.840
> 
> 标签：php, mysql

我正在尝试遍历我的 mysql 查询结果并打印出一些数据。我所期望的是，当我在打印消息的末尾添加“\n”时，它会将每条消息打印在单独的行上。但由于某种原因，它全部集中在一条线上。为什么会这样，我怎样才能让每条消息都在单独的行上？

```
while($row = mysql_fetch_array($result))
{ 
    $message = $row['action_type'] . " " . $row['identifier'] . " @ " . " placeholder ";
    if($row['location'] !== NULL)
    {
        $message += " on " . $row['location'] . "\n";
    }
    echo $message . "\n";

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T02:05:42.113

您的`$message`变量以 a `/n`when it should be结尾`\n`。尝试更新它以修复（当然，除非在代码的那部分是故意的）：

```
$message += " on " . $row['location'] . "\n"; 
```

实际的`echo`语句以一个真正的换行符结束，所以这应该在命令行中正常工作，但不能在浏览器中工作。

要让它在浏览器的新行上显示，请将`\n`实例更改为`<br />`：

```
echo $message . "<br />"; 
```

# python - Python 期望一个缩进的块错误

> ID：12632615
> 
> 赞同：2
> 
> 时间：2012-09-28T02:02:33.507
> 
> 标签：python

我刚开始学习python。在我第一次遇到 python 时，我遇到了这个问题。我正在学习定义一个函数。在一个简单的命令中，我得到了一个预期的缩进块错误。请指教。我正在使用这种语法

```
>>>def hello():
...print "Hello" 
```

但是当我在“Hello”之后按下回车键时，我得到了预期的缩进块错误实际上我必须定义这个函数如下

```
>>> def hello():
print "Hello"
print "Computers are Fun" 
```

但我无处可去。请帮助我做错了什么

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T02:06:02.907

检查你的缩进。与 C、Java、C++ 不同，没有 {} 来封装函数、代码段。缩进定义了代码段、循环、函数等。

```
>>> def hello():
...     print "hello"
...
>>> hello()
hello
>>> 
```

注意 def 行和 print 行的缩进。您的代码缺少正确的格式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T02:05:03.420

您需要缩进（[推荐](http://www.python.org/dev/peps/pep-0008/#indentation)4 个空格）函数中的命令，如下所示：

```
>>> def hello():
...     print 'hello'
... 
>>> hello()
hello 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T02:07:49.877

'expected an Indented block' 意味着你的缩进不正确，试试下面的代码：

```
def hello():
    print "Hello"

def hello2():
    print "Hello"
    print "Computers are Fun"

hello()
hello2() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-28T02:05:51.237

您需要正确格式化您的函数。Python 有非常具体的间距要求。

```
def hello():
    print "Hello" 
```

# php - 选择后如何回显来自 3 个不同数据库的数据？

> ID：12632617
> 
> 赞同：0
> 
> 时间：2012-09-28T02:02:46.293
> 
> 标签：php, mysql

有 3 个表，分别称为“table1”、“table2”和“table3”。这些表中只有列 ID 相同。所有其他列都不同。

会选择像：

```
 "select * from table1, table2, table3 where WHERE (date >= now())"; 
```

我在回显数据时遇到问题。table1 有一个名为“org”的列，table2 有“name”，table3 有“pgm”。我想要类似的东西：

```
 echo "$data['org']" OR $data['name'] OR $data['pgm']" 
```

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T02:09:25.653

所以，假设你说的是真的：

> 这些表中只有列 id 相同

然后，您可以连接共享此列值的表并在查询中检索这些值：

```
SELECT       t1.org,
             t2.name,
             t3.pgm
FROM         table1 t1
  INNER JOIN table2 t2
  ON         t2.id = t1.id
  INNER JOIN table3 t3
  ON         t3.id = t1.id
WHERE        t1.date >= NOW(); 
```

显式连接，但进一步说明了从不同来源收集数据时表必须具有的关系。

# ruby-on-rails - 新上传的图片在生产中中断但未在开发中

> ID：12632618
> 
> 赞同：0
> 
> 时间：2012-09-28T02:02:51.463
> 
> 标签：ruby-on-rails, image

对于可能导致我的问题的任何反馈，我将不胜感激，如下所述。

我有一个允许用户上传图像的应用程序。在开发中一切正常，在生产中也曾正常工作。

最近，我的新图像都坏了。我可以上传新图片，但是当我几个小时后回来查看时，图片又坏了。大约一周前开始发生这种情况，从那时起我在生产中制作的图像仍然可以。

我正在使用带有 Bootstrap 和 SimpleForm 的 Rails，并为图像使用 Paperclip。我在开发和生产中都使用 Postgres，并且正在部署到 Heroku。

我唯一的提示是在用户没有上传个人资料图片时默认使用的“blank_profile_pic.png”图像。

```
User.all.each do |u|
  if u.profile_pic.file?
    image_tag(user.profile_pic)
  else
    image_tag("blank_profile_pic.png")
  end
end 
```

对于没有上传 profile_pic 的用户，如果他们的个人资料是在上周创建的，则会出现损坏的图像，但对于在一周前问题开始出现之前创建帐户的人来说，预期的“blank_profile_pic.png”仍然存在。相同的代码块如何在新老用户之间返回不同的结果？

我真的不知道从哪里开始，所以如果有任何关于可能原因的反馈，以及我可以在这里显示的任何其他文件，我将不胜感激。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T03:28:32.370

Heroku 是一个只读系统。因此，您绝对必须将图像上传到 S3 或其他提供的云。

您的图像可能已上传到 Heroku 中的 /tmp，然后不知何故被清除，因此出现错误。

以下是文档：[https ://devcenter.heroku.com/articles/read-only-filesystem](https://devcenter.heroku.com/articles/read-only-filesystem)

并使用 S3 配置 Paperclip：[https ://github.com/thoughtbot/paperclip#storage](https://github.com/thoughtbot/paperclip#storage)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-26T18:00:37.477

我不确定你是否安装了 imagemagick gem，但是我们在 image_magic 上遇到了同样的问题，这在生产中破坏了我们的回形针功能，但在开发中没有（很奇怪，我知道）。然而，即使在本地从我们的 gemfile 和 Gemfile.lock 中删除了 imagemagick（运行 bundle install 和所有这些东西），然后在 heroku 上部署回生产环境，错误仍然存​​在于生产环境中！（奇怪，我知道）。

最终成功的是运行：

```
$ heroku repo:purge_cache -a myAppName 
```

（取自：[https](https://github.com/heroku/heroku-repo#purge_cache) ://github.com/heroku/heroku-repo#purge_cache ）

当您部署应用程序时，Heroku 会缓存一些内容，例如您的资产和已安装的 gem，以加快部署速度。虽然这是一个很棒的功能，但它有时会产生副作用，在这种情况下，似乎有关 imagemagick gem 的某些东西“卡”在了生产的缓存中，这就是为什么清除为我们解决了这个问题（因为在清除之后，您的应用将在下一次部署时从头开始重建）

# android - 如何重叠视图？

> ID：12632623
> 
> 赞同：1
> 
> 时间：2012-09-28T02:03:26.923
> 
> 标签：android

我正在制作日历。每天都是一个文本视图，其中有一个数字表示月份中的哪一天。

我想覆盖另一个视图，该视图表明该日期有事件。请参阅下图或思考谷歌日历应用程序的外观。我该怎么做呢？

![在此处输入图像描述](../Images/35198eb9d7f218b3b578f1767762ced6.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T02:11:01.700

一种方法是在相对布局或框架布局中制作两个文本视图。你可以看看[这个](http://android-developers.blogspot.com/2009/03/android-layout-tricks-3-optimize-by.html)以供参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T02:07:41.907

您可以使用 TableLayout 将 TextView 存储在行和列中。

标记特殊日子的一种可能方法是将特定单元格的背景资源更改为具有标记的背景资源，该背景资源与数字不重叠。

如果你想要更多花哨的东西，你可以编写你的自定义 View 子类 TextView，它处理它的 onDraw 调用和其他一切。

据我所知，您可以使用 RelativeLayout 来重叠视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T02:09:17.440

您可以尝试将 left drawable ( `android:drawableLeft=""`) 设置为`TextView`. 或者，您可以使用一些透明背景图像，并在左上角绘制指示符。

# sql - 在 SQL 中从 XML 中选择属性

> ID：12632625
> 
> 赞同：0
> 
> 时间：2012-09-28T02:03:32.407
> 
> 标签：sql, xml, string

好的，我有一个表，其中有一列名为`bdParameters`，数据类型为`text`。列中存储的数据`bdParameters`是保存为文本的 XML。

数据是这样的：

```
<root>
    <row statusID="ALL" subID="ALL" viewMaskFields="false" masID="219" 
         userID="13" prptyDate="08/19/2011" docID="21b15c9e-76a5-44ed-afbb-96b6df2cf881" 
         resmID="8806" leaID="6345" reshID="3560" doEmail="" emailFrom="" emailTo="" 
         emailMsg="penarands" emailSubject="" fieldList="1" fmtID="2" OptInCES="Yes" 
         SendVaiEmailCES="1" RPIPMCURL="blabla@blabla.com" />
    <Custom>
       <UpdateResidentLetter>
          <Row Status="NOTPRINTED" Notes="Created from bulk lettersinterface" />
       </UpdateResidentLetter>
    </Custom>
</root> 
```

我希望能够仅从`emailMsg`该 xml 中选择属性。

那可能吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T02:12:15.330

使用 xml.value 和`@`符号来获取属性

```
declare @t table (col xml);
insert @t select '
<root><row statusID="ALL" subID="ALL" viewMaskFields="false" masID="219" 
userID="13" prptyDate="08/19/2011" docID="21b15c9e-76a5-44ed-afbb-96b6df2cf881" 
resmID="8806" leaID="6345" reshID="3560" doEmail="" emailFrom="" emailTo="" 
emailMsg="penarands" emailSubject="" fieldList="1" fmtID="2" OptInCES="Yes" 
SendVaiEmailCES="1" RPIPMCURL="lm-10-254-9-52.onesitedev.realpage.com" /><Custom>
<UpdateResidentLetter><Row Status="NOTPRINTED" Notes="Created from bulk letters
 interface" /></UpdateResidentLetter></Custom></root>';

select col.value('(/root/row/@emailMsg)[1]','varchar(max)') emailMsg
from @t

-- result
penarands 
```

# io - select() 没有响应 /dev/input/mice 上的写入

> ID：12632630
> 
> 赞同：3
> 
> 时间：2012-09-27T11:10:05.143
> 
> 标签：io, device, c, input

我正在编写一个通过`select()`键盘和鼠标设备文件进行监视的程序。它等待对这些文件的任何写操作（这应该在有击键或鼠标移动时发生），并且一旦有写操作，就会执行一些作业。

但它不起作用。我的代码如下。

```
#include<stdio.h>
#include<string.h>
#include<sys/types.h>
#include<sys/stat.h>
#include<fcntl.h>
#include<linux/input.h>
#include<linux/uinput.h>
#include<sys/time.h>
#include<unistd.h>

void main()
{
    int mouse_fd,kbd_fd,fd_max;
    struct input_event ev;
    fd_set rfs,wfs;

    if((mouse_fd=open("/dev/input/event3",O_WRONLY))==-1)
            {
                printf("opening mouse device file has failed \n");
            }
    else
            {
                printf("opening mouse device file has been successfull \n");
            }
    if((kbd_fd=open("/dev/input/event2",O_WRONLY))==-1)
            {
                printf("opening keyboard device file has failed \n");
            }
    else
        {
            printf("opening keyboard device file has been successfull \n");
        }

    FD_ZERO(&rfs);
    FD_ZERO(&wfs);
    FD_SET(mouse_fd,&rfs);
    FD_SET(kbd_fd,&rfs);
    FD_SET(mouse_fd,&wfs);
    FD_SET(kbd_fd,&wfs);

    if(mouse_fd>kbd_fd)
        {
            fd_max=mouse_fd;
        }
    else
        {
         fd_max=kbd_fd;
        }

    while(1)
    {
        select((fd_max+1),&rfs,NULL,NULL,NULL);
        sleep(2);
        if(FD_ISSET(mouse_fd,&rfs))
            {
                printf("test mouse \n");
            }
        if(FD_ISSET(kbd_fd,&rfs))
            {
                printf("test keyboard \n");
            }
   }
} 
```

当我执行程序时，它会产生这样的输出，

```
[root@localhost Project]# gcc select.c
[root@localhost Project]# ./a.out
opening mouse device file has been successfull 
opening keyboard device file has been successfull 
test keyboard 
test keyboard 
test keyboard 
test keyboard 
test keyboard 
test keyboard 
test keyboard 
test keyboard 
test keyboard 
```

即使我没有按任何键。此外，即使有物理鼠标移动，select() 也不会选择鼠标设备文件。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T13:04:44.750

您需要在每次`select`调用之前重新初始化您的 fd 集。因此，程序中的循环如下所示：

```
while(1)
{
    FD_ZERO(&rfs);
    FD_ZERO(&wfs);
    FD_SET(mouse_fd, &rfs);
    FD_SET(kbd_fd, &rfs);
    FD_SET(mouse_fd, &wfs);
    FD_SET(kbd_fd, &wfs);

    select((fd_max+1),&rfs,NULL,NULL,NULL);

    // proceed normally
} 
```

此外，根据[User1 对 Stack Overflow 上相同问题的评论](https://stackoverflow.com/questions/12619683/select-isnt-responding-to-writing-on-dev-input-mice#comment17015708_12619683)，您需要打开设备进行阅读，因为您正在尝试从中读取数据：

```
// Open device for reading (do you mean to use "/dev/input/mice" here?)
if ((mouse_fd = open("/dev/input/event3", O_RDONLY)) == -1) 
```

Linux 包括一个[select_tut(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/select_tut.2.html)教程手册页，其中解释了如何使用`select`和一个示例程序，可用作参考。“Select Law”#11 提醒您在每次调用`select`.

# makefile - 制作文件两个宏

> ID：12632635
> 
> 赞同：0
> 
> 时间：2012-09-28T02:04:43.110
> 
> 标签：makefile

我想在单个 Makefile 中使用宏来编译两个程序。当我运行 make 时，它​​会产生以下输出：

```
Makefile:27: warning: overriding commands for target `compose'
Makefile:24: warning: ignoring old commands for target `compose'
g++ -g `Magick++-config --cppflags` -c alphamask.cpp
g++ -g `Magick++-config --ldflags` -o alphamask alphamask.o -L /usr/lib64/ -lglut -lGL -lGLU -lMagick++ -lm 
```

它只编译第二个程序。有没有办法让宏编译两个程序？这是我当前的 Makefile：

```
CC      = g++
C       = cpp

CFLAGS      = -g `Magick++-config --cppflags`
LFLAGS      = -g `Magick++-config --ldflags`

ifeq ("$(shell uname)", "Darwin")
  LDFLAGS     = -framework Foundation -framework GLUT -framework OpenGL -lMagick++ -lm
else
  ifeq ("$(shell uname)", "Linux")
    LDFLAGS     = -L /usr/lib64/ -lglut -lGL -lGLU -lMagick++ -lm
  endif
endif

ALPHA       = alphamask
COMP = compose 

${ALPHA}:   ${ALPHA}.o
    ${CC} ${LFLAGS} -o ${ALPHA} ${ALPHA}.o ${LDFLAGS}

${ALPHA}.o: ${ALPHA}.${C}
    ${CC} ${CFLAGS} -c ${ALPHA}.${C}

${COMP}:    ${COMP}.o
    ${CC} ${LFLAGS} -o ${COMP} ${COMP}.o ${LDFLAGS}

${COMP}.o:  ${COMP}.${C}
    ${CC} ${CFLAGS} -c ${COMP}.${C}

run:
    ./alphamask dhouse.png
    ./compose alphamask.png

clean:
    rm -f core.* *.o *~ ${ALPHA} ${COMP} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T03:44:54.177

第一个问题：

```
COMP = compose 

${COMP}.o: ... 
```

在 Make 中为变量添加后缀并不是那么简单。在这种情况下，您会遇到一些空白问题，这就是您收到警告消息的原因，以及`compose`即使您尝试过也无法构建的原因。

既然你是初学者，那我们就用一个简单的方法，粗略但有效。我们将重写这些规则，并在顶部添加一个，以便您可以使用以下命令构建两个文件`make`：

```
all: alphamask compose

alphamask: alphamask.o
    ${CC} ${LFLAGS} -o alphamask alphamask.o ${LDFLAGS}

alphamask.o: alphamask.cpp
    ${CC} ${CFLAGS} -c alphamask.cpp

compose: compose.o
    ${CC} ${LFLAGS} -o compose compose.o ${LDFLAGS}

compose.o: compose.cpp
    ${CC} ${CFLAGS} -c compose.cpp 
```

在你完美地完成这个工作之后，可以进行很多改进。

**编辑：**

现在它运行良好，我们可以改进它。首先让我们放入自动变量，以减少冗余：`$@`是目标的名称，`$^`是先决条件，`$<`是第一个先决条件。

```
all: alphamask compose

alphamask: alphamask.o
    ${CC} ${LFLAGS} -o $@ $^ ${LDFLAGS}

alphamask.o: alphamask.cpp
    ${CC} ${CFLAGS} -c $<

compose: compose.o
    ${CC} ${LFLAGS} -o $@ $^ ${LDFLAGS}

compose.o: compose.cpp
    ${CC} ${CFLAGS} -c $< 
```

现在我们看到命令中有冗余，所以我们可以组合规则：

```
all: alphamask compose

alphamask: alphamask.o

compose: compose.o

alphamask compose:
    ${CC} ${LFLAGS} -o $@ $^ ${LDFLAGS}

alphamask.o: alphamask.cpp    

compose.o: compose.cpp

alphamask.o compose.o:
    ${CC} ${CFLAGS} -c $< 
```

现在我们可以用`.o`模式规则替换对象 ( ) 规则：

```
all: alphamask compose

alphamask: alphamask.o

compose: compose.o

alphamask compose:
    ${CC} ${LFLAGS} -o $@ $^ ${LDFLAGS}

%.o: %.cpp
    ${CC} ${CFLAGS} -c $< 
```

以及可执行文件的静态模式规则。（我们也可以对这些使用模式规则，但这有点太笼统了。）

```
EXECUTABLES = alphamask compose

.PHONY: all
all: $(EXECUTABLES)

$(EXECUTABLES): % : %.o
    ${CC} ${LFLAGS} -o $@ $^ ${LDFLAGS}

%.o: %.cpp
    ${CC} ${CFLAGS} -c $< 
```

当你做出这些改进时，在你进行**下一个改进之前，让每一个改进都完美运行。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T02:22:25.127

我很确定您需要一个规则来制作它们（对两个项目都使用依赖项）：

```
 all: ${ALPHA} ${COMP} 
```

然后当然是：

```
make all 
```

# mysql - MySQL group by 具有多列总和和每个组的总和

> ID：12632638
> 
> 赞同：7
> 
> 时间：2012-09-28T02:04:53.530
> 
> 标签：mysql, sql

我有一张这样的桌子：

```
Votes (id, person, positive_vote, negative_vote) 
```

我想按人分组，并按每个人的总票数排序。我知道如何获得一个组的单个列的总和，但我不知道如何获得每个组的所有总和（总票数）。

这是我到目前为止所拥有的：

```
SELECT person, sum(positive_vote), sum(negative_vote) FROM Votes GROUP BY person; 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-28T02:07:51.077

尝试，

```
SELECT person, 
       sum(positive_vote) totalPositive, 
       sum(negative_vote) totalNegative,
       (sum(positive_vote) + sum(negative_vote)) totalVotes
FROM Votes 
GROUP BY person
-- HAVING (sum(positive_vote) + sum(negative_vote)) < 5 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T02:07:45.563

如果您想要每个人的总数，只需减去总和（如果您只想要总票数，则将它们相加*）*：

```
SELECT person, sum(positive_vote), sum(negative_vote),
    SUM(positive_vote)-SUM(negative_vote)
FROM Votes 
GROUP BY person 
```

请注意，我在这里减去*了总和*，而不是对列本身的差异求和，因为我不知道您如何在表中存储数据，并且 NULL 可以用数学做一些有趣的事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-28T02:07:23.230

```
SELECT Z.person,Z.sum_pv,Z.sum_nv,Z.diff_sum_pv_nv
FROM
(SELECT person, sum(positive_vote) AS sum_pv, sum(negative_vote) sum_nv,sum(positive_vote) - sum(negative_vote) AS diff_sum_pv_nv
FROM Votes GROUP BY person)Z; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-28T02:08:44.903

你的意思是positive_vote和negative_vote的总和吗？

```
SELECT 
  person, 
  SUM(positive_vote) AS positive_votes, 
  SUM(negative_vote) AS negative_votes,
  SUM(positive_vote + negative_vote) AS total_votes
FROM Votes GROUP BY person; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-23T06:19:42.027

```
SELECT person, 
       sum(positive_vote) as totalPositive, 
       sum(negative_vote) as totalNegative,
       (sum(positive_vote + negative_vote)) as totalVotes
FROM Votes 
GROUP BY person 
```

# ruby - Heroku Dep 问题：SSH、PubKey 失败 (Errno::EISDIR)

> ID：12632642
> 
> 赞同：3
> 
> 时间：2012-09-28T02:05:22.907
> 
> 标签：ruby, bash, heroku, ssh

我目前正在学习 Hartl 的教程，努力部署到 heroku。运行 OSX 10.8.1。

经历过 ssh 问题并在这里阅读*了三个问题*，但无法弄清楚。我添加了两个额外的 ssh id，但它给了我 id 2 和 3 的以下错误。

```
$ heroku login
Enter your Heroku credentials.
Email: email@gmail.com  
Password (typing will be hidden): 
Found the following SSH public keys:
1) github_rsa.pub
2) id_dsa.pub
3) id_rsa.pub

Which would you like to use with your Heroku account? 3
Uploading SSH public key /Users/admin/.ssh/id_rsa.pub... failed
 !    Heroku client internal error.
 !    Search for help at: https://help.heroku.com
 !    Or report a bug at: https://github.com/heroku/heroku/issues/new

    Error:       Is a directory - /Users/admin/.ssh/id_rsa.pub (Errno::EISDIR)
    Backtrace:   

  /Users/admin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/heroku-2.32.4/lib/heroku/auth.rb:290:in `read'
  /Users/admin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/heroku-2.32.4/lib/heroku/auth.rb:290:in `block in associate_key'
  /Users/admin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/heroku-2.32.4/lib/heroku/helpers.rb:236:in `action'
  /Users/admin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/heroku-2.32.4/lib/heroku/auth.rb:288:in `associate_key'
  /Users/admin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/heroku-2.32.4/lib/heroku/auth.rb:269:in `associate_or_generate_ssh_key'
  /Users/admin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/heroku-2.32.4/lib/heroku/auth.rb:239:in `check_for_associated_ssh_key'
  /Users/admin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/heroku-2.32.4/lib/heroku/auth.rb:233:in `ask_for_and_save_credentials'
  /Users/admin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/heroku-2.32.4/lib/heroku/auth.rb:84:in `get_credentials'
  /Users/admin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/heroku-2.32.4/lib/heroku/auth.rb:41:in `login'
  /Users/admin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/heroku-2.32.4/lib/heroku/command/auth.rb:31:in `login'
  /Users/admin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/heroku-2.32.4/lib/heroku/command.rb:206:in `run'
  /Users/admin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/heroku-2.32.4/lib/heroku/cli.rb:28:in `start'
  /Users/admin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/heroku-2.32.4/bin/heroku:16:in `<top (required)>'
  /Users/admin/.rbenv/versions/1.9.3-p194/bin/heroku:23:in `load'
  /Users/admin/.rbenv/versions/1.9.3-p194/bin/heroku:23:in `<main>'

    Command:     heroku login
    Version:     heroku-toolbelt/2.32.4 (x86_64-darwin12.1.0) ruby/1.9.3 autoupdate 
```

当我确实获得要加载/授权的 id 时，我尝试`git push heroku master`但遇到了：

```
Permission denied (publickey).
fatal: The remote end hung up unexpectedly 
```

问题可能是我需要用#3替换#1（删除#3 id以外的所有ID？）

很想得到你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T03:31:21.230

再次尝试重新生成您的公钥。但在此之前，再试`heroku keys:add`一次。否则，`ssh-keygen -t rsa`则`heroku keys:add`。

但请注意，如果您更改了密钥，那么您绑定先前密钥的其余应用程序也必须进行更改。

# mysql - 来自地狱的 MySQL 查询

> ID：12632660
> 
> 赞同：0
> 
> 时间：2012-09-28T02:08:17.540
> 
> 标签：mysql

给定下表信息：

```
A       B           C           D       E

1       786788      123.45      0       617
2       786788      654.21      0       3271
3       786788      111.11      0       556
4       786788      224.45      0       1122
5       786788      0.12        12      0   
6       786788      3.21        321     0   
7       786788      0.22        22      0   
8       786788      0.33        33      0   
9       786788      757.57      0       3788
10      786788      545.41      0       2727
11      786788      0.07        7       0   
12      786788      0.05        5       0   
13      786790      50          0       125 
14      786790      50          0       125 
15      786790      50          0       125 
16      786790      50          0       125 
17      786790      50          0       125 
18      786788      1.23        0       6   
19      786788      0.12        0       1   
20      786788      0.12        0       1   
21      786788      0.05        0       0   
22      786788      0.55        0       3   
23      786788      0.45        45      0   
24      786788      1.47        0       7   
25      786788      0.41        0       2   
26      786788      0.74        74      0   
27      786788      100         0       500 
36      786788      5           0       25  
37      786788      24          0       120 
38      786788      23          0       115 
39      786788      1.47        0       7   
40      786788      12          0       60  
41      786788      14          0       70  
43      786222      7.8         0       39  
44      786222      0.12        12      0   
45      786788      47.47       0       237 
46      786788      9.89        989     0   
47      786788      1.23        0       6   
48      786788      1.23        0       6 
```

我试图在一个查询中获取以下信息：

1.  DISTINCT（B栏）
2.  计数（DISTINCT（B 列））
3.  SUM(C 列) WHERE E 列!= 0
4.  总和（D栏）
5.  总和（E 栏）

如果一切顺利，结果应该类似于这个例子（我没有为这个例子“求和”所有内容）：

```
786788      32      SUM(column C) WHERE column E != 0       SUM(column D)       SUM(column E)
786790      5       SUM(column C) WHERE column E != 0       SUM(column D)       SUM(column E)
786222      2       SUM(column C) WHERE column E != 0       SUM(column D)       SUM(column E) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T02:11:55.747

除非我弄错了，否则您建议的字段列表非常接近您在查询中实际需要的内容。我还没有对此进行测试，但试一试（它使用 MySQL`GROUP BY`来执行`DISTINCT`您需要的 /grouping）：

```
SELECT
    B,
    COUNT(*),
    SUM((CASE WHEN E != 0 THEN C ELSE 0 END)),
    SUM(D),
    SUM(E)

FROM
    your_table

GROUP BY B 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T02:12:43.573

我不清楚您是否想要B 的每个值*内*或整个表中的 SUM 并在每一行重复。如果是前者（这对我来说最有意义），我认为这几乎就是你想要的：

```
 SELECT B, COUNT(*), SUM(IF(E = 0, 0, C)), SUM(D), SUM(E) 
    FROM FollowingTable GROUP BY B 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T02:29:13.203

这是工作吗？

```
select b, count(b),sum(case e when 0 then 0 else c end), sum(d), sum(e) from test01 group by b 
```

# git - Git：目前与私有远程仓库合并/冲突。如何告诉 Git 只使用我的本地文件？

> ID：12632666
> 
> 赞同：13
> 
> 时间：2012-09-28T02:08:54.577
> 
> 标签：git, merge, conflict, merge-conflict-resolution

尝试在个人项目中使用/学习 git。只有我和一个远程 git repo，一些提交，我陷入了失败的合并。我的很多文件现在也有 Git 合并冲突标记。

我如何告诉 git 把所有东西都扔掉，只用我的？

我如何进入我所处的状态的一个具体例子：

```
echo A new file > myFile.txt             # example file
git add myFile.txt                       # add file
git commit                               # commit changes
git push                                 # push changes to remote repo
echo A conflicting edit > myFile.txt     # oh, no, forgot some changes
git add myFile.txt                       # add again
git commit --amend                       # amend previous commit
git push                                 # fails. Git suggests to do a pull first
git pull origin HEAD                     # "Automatic merge failed" Now what?
                                         # Just use what I have locally! 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-18T14:35:30.513

```
git checkout --ours . # checkout our local version of all files
git add -u            # mark all conflicted files as merged/resolved
git commit            # commit the merge 
```

有一个混乱的替代方案可以破坏使用相同远程来源的其他所有人的 repo。仅当您是唯一使用它的人时才考虑它：

```
git reset --hard HEAD # undo that failed merge
git push --force      # replace everything remote with local 
```

**解释**（现在我理解`git`得更好了）
发生这种情况的原因是因为修改提交更改了“历史”。在本地执行此操作是安全的，因为它不会影响其他任何人。但是，修改已经推送的提交*确实*会影响其他 repos，并且是不安全的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-28T02:45:13.697

您的 GUI 可能只是设置`--strategy=ours`( `git merge -s ours <branch>`)。这将执行合并，引用两个提交作为父项，但保留整个目录状态。

您的另一个选择是使用`git merge -s recursive -X ours <branch>`，它将尝试从两个分支中引入文件，但只要有冲突，就会更喜欢您的版本。

[文档](http://www.kernel.org/pub/software/scm/git/docs/git-merge.html)

您可以使用以下演示 shell 脚本查看两种不同的样式：

```
#!/bin/sh

mkdir gittest
cd gittest
git init

git checkout master
echo "Line one" > bar
git add bar
git commit -m "Original commit"

git checkout -b fork1
echo "Line one and something" > bar
echo "Line two" > bam
git add bar bam
git commit -m "Fork1 commit."

git checkout master
git checkout -b fork2
echo "Line one and other stuff" > bar
echo "Line three" > baz
git add bar baz
git commit -m "Fork2 commit."

git checkout fork1
if [ "$1" = "ours" ]; then
  # `ls gittest` => bam bar
  # `cat gittest/bar` => Line one and something
  git merge -s ours fork2
else
  # `ls gittest` => bam bar baz
  # `cat gittest/bar` => Line one and something
  git merge -X ours fork2
fi 
```

# c++ - 从 QT 复选框到 Postgresql 的星期选择

> ID：12632667
> 
> 赞同：1
> 
> 时间：2012-09-28T02:08:55.373
> 
> 标签：c++, string, qt, connection-string

我在我的 Qt 应用程序 GUI 中有一组代表一周中的几天的复选框，我选择一个或多个天，并根据选中的框，将查询字符串传递给 PostgreSQL 以显示那些日子的某些数据-例如如果我检查了周一和周三，`extract (dow from timestamp) = 1 or extract(dow from timestamp) = 3`应该添加到我的查询中。我刚刚输入了一个粗略的解决方案——虽然在我写这篇文章时还没有测试过——但我想知道是否有一种更短、更优雅的方法我在这里错过了。代码如下： -`queryAdditionCalltimePart`和字符串稍后会在主查询执行之前`queryAdditionCallStampPart`添加到我的主查询的相关部分 -`QString`

```
bool checkboxArray[7];
bool mult = false;
checkboxArray[0] = this->ui->checkBoxMonday->isChecked();
checkboxArray[1] = this->ui->checkBoxTuesday->isChecked();
checkboxArray[2] = this->ui->checkBoxWednesday->isChecked();
checkboxArray[3] = this->ui->checkBoxThursday->isChecked();
checkboxArray[4] = this->ui->checkBoxFriday->isChecked();
checkboxArray[5] = this->ui->checkBoxSaturday->isChecked();
checkboxArray[6] = this->ui->checkBoxSunday->isChecked();
QString queryAdditionCalltimePart = "";
QString queryAdditionCalStampPart = "";
int count = 0;

queryAdditionCalltimePart.append("(");
queryAdditionCalStampPart.append("(");
for(int i = 0; i < 7; i++)
{
    if(checkboxArray[i] == true)
    {
        count++;
    }
}

int x = 0;

for(int i = 0; i < 7; i++)
{
    if(checkboxArray[i] == true)
    {
        queryAdditionCalltimePart.append("(SELECT EXTRACT(DOW FROM calltime) = '" +QString::number(i+1)+"')");
        queryAdditionCalStampPart.append("(SELECT EXTRACT(DOW FROM cal.stamp) = '" +QString::number(i+1)+"')");

    }

        if(count > 1 && checkboxArray[i] == true)
    {
        if(x == count - 1)
        {
        }
        else
        {
            queryAdditionCalltimePart.append("OR");
            queryAdditionCalStampPart.append("OR"); 
            x++;
        }
    }
}

queryAdditionCalltimePart.append(")");
queryAdditionCalStampPart.append(")"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T06:55:11.117

您可以将属性添加到 Qt 中的任何小部件， http: [//qt-project.org/doc/qt-4.8/qobject.html#setProperty](http://qt-project.org/doc/qt-4.8/qobject.html#setProperty)。该属性可以包含您想要的任何信息。

在您的特定情况下，将 SQL 字符串附加为每个复选框的属性会更简洁。

```
this->ui->checkBoxMonday->setProperty("sql", 
        "(SELECT EXTRACT(DOW FROM calltime) = '" +QString::number(i+1)+"') OR "; 
```

收到用户输入后，只需附加复选框属性并删除最终的 OR。

# razor - 为什么这种剃刀语法会给我一个错误？

> ID：12632668
> 
> 赞同：0
> 
> 时间：2012-09-28T02:09:07.703
> 
> 标签：razor, asp.net-mvc-4, syntax-error

我有以下代码

[http://bc.coverstar.com/images/error.gif](http://bc.coverstar.com/images/error.gif)

为什么我在 Razor 评论后收到语法错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T20:02:14.893

正确的方法是写

```
@{Model.DefinitionID} 
```

或者

```
@Model.DefinitionID 
```

**UPD**：为了在 JavaScript 中使用 Razor 语法，代码应包含在`<text>`标记中。例如：

```
 <text>@Model.DefinitionID</text> 
```

注意：`text`标签不会出现在输出中。

# ios - 在 Core Data 中存储用于绘图的数据集的最佳方法是什么？

> ID：12632675
> 
> 赞同：0
> 
> 时间：2012-09-28T02:09:54.333
> 
> 标签：ios, core-data, nsfetchedresultscontroller

我无法掌握此功能的最佳实现方式。我的最终目标是按会话从笔记文档中获取统计信息，例如字数和行数（会话是打开文档并对其进行编辑然后关闭它的一个实例）。然后获取这些数据并随时间绘制图表。我找不到任何与以这种方式使用核心数据相关的东西。我正在使用 NSFetchedResultsController 来配合斯坦福发布的精彩 iOS 讲座。

这可能只是我对核心数据的巨大误解。将每个会话数据以与“timestamp - wordCount”和“timestamp - lineCount”类似的格式保存为NSString属性以供以后解析会更容易吗？

我有一个应用程序，它有一个文本文档让我们称它们为“笔记”实体。每个笔记实体都有一个以一对一关系与之关联的“统计”实体。notes 实体保留单独的总 wordCount 和 lineCount 属性，而 stats 实体将数据属性保留在上述 NSString 格式的数据集中。

原因是我希望能够在启动时启动 notes 对象，而不必在应用启动时加载大量数据。

这是保留此类数据的最佳方式吗？由于缺乏更好的词，对我来说似乎有点笨拙。我阅读了有关 Core Data 的苹果文档，观看了包括斯坦福讲座在内的一些教程，并通过 Google-fu 技能进行了搜索，但找不到任何东西。这是我第一次使用 Core Data，所以我相信我只是很难真正应用我学到的东西。

如果我错过了什么，请在我边走边写这篇文章时随时打电话给我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T02:23:46.033

试图捕捉几个嵌入式问题：

> 将每个会话数据以与“timestamp - wordCount”和“timestamp - lineCount”类似的格式保存为NSString属性以供以后解析会更容易吗？

更容易，可能吗？但`NSString`不是存储元素数据的好方法。

> 这是保留此类数据的最佳方式吗？

您指的是将有关文档的元数据打包到`NSString`; 我相信它会起作用 - 但可能更好地将元数据封装在它自己的类中 - 或者像你建议的 Core Data 那样。

我的建议是前者；也就是说，我会将您打包的数据放入 a`NSString`并从中创建一个类。Apple 文档直接指出 Core Data 不是入门级技术。它通常是实现模型层的一个很好的解决方案；但不总是。在你的情况下，你可以做一些简单的事情：

```
@interface NoteMetadata:NSObject

@property (nonatomic, assign) NSInteger wordCount;
@property (nonatomic, assign) NSInteger lineCount;
@property (nonatomic, strong) NSDate *timeStamp;

@end 
```

`NoteMetadata`等等，那么也许您的 Note 对象可能具有组成会话的这些对象的数组。

# phpunit - 如何升级 phpunit 的 PHP_CodeCoverage

> ID：12632679
> 
> 赞同：0
> 
> 时间：2012-09-28T02:10:51.960
> 
> 标签：phpunit

我有用 pyrus 升级我的 phpunit 的问题，它总是输出如下内容：

```
Pyrus\Installer\Exception: Dependency validation failed for some packages to install, installation aborted  
Pyrus\Dependency\Exception: pear.phpunit.de/PHPUnit requires    package "channel://pear.phpunit.de/PHP_CodeCoverage" (version >= 1.2.1), installed version is 1.2.0  
Pyrus\Dependency\Exception: pear.phpunit.de/PHPUnit can optionally use package "channel://pear.phpunit.de/PHP_Invoker" (version >= 1.1.0) 
```

我已经使用 -f 标志强制将我的 phpunit 从 3.7.0 升级到 3.7.1，但其他软件包仍然没有升级。

我尝试使用命令**php pyrus.phar upgrade phpunit/PHP_CodeCoverage**来升级 PHP_CodeCoverage，但我得到了类似的东西：

```
Skipping installed package pear.phpunit.de/PHP_CodeCoverage 
```

如何单独升级 ohter 包？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T16:40:47.697

试试`--alldeps`标志，应该有帮助： http: [//pear.php.net/manual/en/guide.users.commandline.installing.php](http://pear.php.net/manual/en/guide.users.commandline.installing.php)

# python - scipy.interpolate.LinearNDInterpolator 没有产生所需的功能

> ID：12632683
> 
> 赞同：2
> 
> 时间：2012-09-28T02:11:37.467
> 
> 标签：python, scipy, multidimensional-array, linear-interpolation

我没有使用 LinearNDInterpolator 获得所需的 2D 线性插值功能。以下代码尝试在 4 个结点 (0,0)、(1,0)、(0,1)、(1,1) 之间进行插值。interp2d 给了我预期的（线性插值）结果，但 LinearNDInterpolator 正在做其他事情，我无法弄清楚。也许我没有正确使用 API。不幸的是，我找不到关于使用的详细文档。有人可以帮助或将我指向正确的论坛（mathoverflow？）来写信吗？

```
>>> f = interp2d([0,1,0,1], [0,0,1,1], [0,1,2,4])
>>> f(0.5,0.5)
array([ 1.75])
>>> g = LinearNDInterpolator([[0,0],[1,0],[0,1],[1,1]], [0,1,2,4])
>>> g(0.5,0.5)
array(2.0) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T02:24:34.113

从[http://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.LinearNDInterpolator.html](http://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.LinearNDInterpolator.html)：

> 插值是通过使用 Qhull [R15] 对输入数据进行三角剖分来构造的，并在每个三角形上执行线性重心插值。

在您的情况下，选择的三角形似乎共享`(0,0), (1,1)`边缘。由于`(0.5, 0.5)`介于`(0,0)`和之间`(1,1)`，因此内插值位于这些顶点的值之间，所以它是`(0+4)/2 = 2.0`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-25T14:08:35.680

因为您的四个输入点是共圆的，所以底层的 Delaunay 三角剖分是不明确的；您最终可能会得到一个从 (0,0) 到 (1,1) 的“边”，或者沿着“另一个对角线”从 (1,0) 到 (0,1) 的一个“边”。

在第一种情况下，(0.5,0.5) 的插值将产生 2.0，在后一种情况下，它将产生 1.5。你无法控制你得到哪一个。

如果你想要那个控制，你有两个选择：

1）通过给插值器一个看起来像德劳尼三角测量返回的对象来明确提供三角测量。

2）将你的一个角落“轻推”向中心。例如，使用 (0.99999,0.99999) 代替 (1,1)；这将“迫使” Delaunay 三角测量得到确定性结果。（在这种情况下，它将“强制”在另一个对角线上使用 (0,0) 到 (0.99999,0.99999) 段。）

而且，FWIW，我认为这两个可能值（1.5 和 2.0）的平均值是您在使用双线性插值时观察到的结果，这并非巧合。我认为这是预期的，在数学上。

# ruby-on-rails - 关联记录满足特定条件的记录的范围？

> ID：12632684
> 
> 赞同：1
> 
> 时间：2012-09-28T02:11:41.720
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord, ruby-on-rails-3.2

我有一个`Customer`模型，每个客户都有很多工作：

```
class Customer < ActiveRecord::Base
  has_many :jobs
end

class Job < ActiveRecord::Base
  belongs_to :customer

  def self.unbilled
    finished.uninvoiced # these are other scopes on Job
  end
end 
```

如何定义一个范围，`Customer`该范围将返回所有未开票工作的客户列表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T02:40:34.340

您也许可以[合并](http://api.rubyonrails.org/classes/ActiveRecord/SpawnMethods.html#method-i-merge)范围：

```
class Customer < ActiveRecord::Base
  has_many :jobs

  scope :freeloaders, joins(:jobs).merge(Job.unbilled)
end 
```

# asp.net-mvc - 为什么@Html.LabelFor 可以获取资源字符串但@Model 不能在 ASP.NET MVC4（剃须刀引擎）中？

> ID：12632685
> 
> 赞同：1
> 
> 时间：2012-09-28T02:11:50.773
> 
> 标签：asp.net-mvc, razor, resources

我正在使用 ASP.NET MVC4 应用程序。我创建了一个包含菜单项的视图模型，我可以通过资源文件在页面中切换语言。

```
#region Properties
[Display(Name = "MenuText", ResourceType = typeof(App.App_Resources.Menu))]
public string menuText { get; set; }

public List<MenuItem> menuItems { get; set; }
#endregion 
```

但是，我想在我的 .cshtml 文件中获取这个资源字符串，然后我尝试如下

```
@model App.Models.MenuViewModel
@Html.LabelFor(model => model.menuText)            <- Success
@Html.DisplayForModel("menuText")                  <- Success
@Model.menuText                                    <- Fail 
```

我插入了一个断点，发现**Model**包含一个名为**menuText**但值为**null**的属性。我检查了**Html**还包含一个属性**Model**并且它的**menuText**也是**null**。但是，**menuItems**有项目，因为我在构造函数中分配了对象。

1.  为什么无法初始化**menuText并为其赋值？**
2.  为什么我可以使用前两个成功显示资源字符串，但**Model.menuText**为 null 并且无法显示任何内容？**@Html.XXX**和**@Model**中的模型有什么不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T02:58:34.393

`@Model.menuText`检索存储在`menuText`属性中的原始字符串值。属性被忽略。

使用`LabelFor`导致`Display`要检查属性的属性。本地化字符串存储在属性中，而不是属性中。

请注意，我认为 Model 对象/类不应该用于存储信息以供显示（这`ViewData`就是用途），而应仅用于从客户端发送到服务器的往返数据。

# javascript - 将 DOCTYPE 添加到页面时的 xmlhttp 状态 200 消息

> ID：12632687
> 
> 赞同：0
> 
> 时间：2012-09-28T02:12:05.057
> 
> 标签：javascript, xml, doctype, xmlhttprequest

我将以下代码放入函数中，当调用该函数时，它会加载我的 XML 文件并将其显示在消息框中：

```
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }

  xmlhttp.onreadystatechange=function()
   {
   if (xmlhttp.readyState==4 && xmlhttp.status==200)
     {
     alert(xmlhttp.responseText);

     } else
     {
     alert('Panel not communicating.Reason: '+xmlhttp.status);
     }
   }

xmlhttp.open("POST","myfile.xml",false);
xmlhttp.send(); 
```

上面的代码完成了所有事情。

但是，只要我将以下代码添加到页面顶部：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"> 
```

当我加载我的函数时，它会出现以下消息：

```
Panel not communicating.Reason: 200 
```

但是它仍然像我想要的那样加载我的 XML 文件。

搜索后说 xmlhttp status 200 表示“OK”

有谁知道它为什么显示此消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T02:21:11.960

这可能意味着`xmlhttp.readyState`正在转换到 4 以外的状态（“完成”）——如果整个页面没有立即下载，这可能会发生，这很可能。您的函数可能应该在 时立即返回`xmlhttp.readyState != 4`，而不是将其视为错误条件。

您还应该强烈考虑在此处使用 jQuery 等 Javascript 框架，因为它会为您节省大量不必要的工作。例如，您在这里获得的所有代码都可以简化为：

```
$.post("myfile.xml", function(data) {
    alert(data);
}).error(function() {
    alert("Panel not communicating.");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T02:21:23.070

我认为您添加的代码不应该出现在 XML 中，它是用于 HTML 的，所以浏览器可能无法解析文件，这使得`xmlhttp.readyState==2`，我不确定这个值，请您检查一下。

# iphone - App ID , Bundle ID 和 Provisioning Profile 问题

> ID：12632690
> 
> 赞同：0
> 
> 时间：2012-09-28T02:12:09.757
> 
> 标签：iphone, xcode, app-store

我在 App Store 中有一个现有的应用程序，我现在正在尝试更新推送通知。对于现有的应用程序，我使用了带有 App ID 的通用配置文件，例如 [一些数字]。*

现在因为我必须添加推送通知，我不得不创建新的 App ID 和供应证书。

对于新的供应证书，我使用 Bundle Identifier（App ID 后缀）在供应门户上创建了新的 App ID：[一些数字]。[我的姓氏]

在 iTunes 上，我现有的应用程序具有 Bundle ID：[我的姓氏]

在 plist 文件中的 XCode 中，Bundle 标识符：[我的姓氏]

我的带有推送通知的应用程序现在可以在我的测试设备上运行，但是当我尝试在 iTunes Connect 上提交更新时，它告诉我我的配置文件有问题并且验证失败。

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T03:01:44.477

在 iTunes 中推送通知有 2 个证书^沙盒和发布。确保，对于发布，你有一个真正的证书

# c++ - 使用 NULL 参数实例化模板类

> ID：12632696
> 
> 赞同：3
> 
> 时间：2012-09-28T02:13:01.710
> 
> 标签：c++, templates, g++

我从一堆其他 Stackoverflow 线程（如[this](https://stackoverflow.com/questions/1418019/casting-pointer-as-template-argument-comeau-msvc-compile-gcc-fails)）中了解到，模板参数是在编译时评估的。此外，非类型模板参数应该是常量表达式、整数表达式或指向具有外部链接的对象的指针。

而且，我没有在 Makefile 的 g++ 命令中使用 --std=c++0x 。

那么，是否可以使用 NULL 作为参数来实例化模板类？

```
// I have a template class like this - 
template<class T, T invalidVal, int e> class A
{ 
    static inline bool dummy(T value) 
    {
       return 0;
    }
}

#define MY_INVALID_VAL ((void *)0)

// Now I want create class from the above template class with 
// T=void*, invalidVal=NULL & e=0 
typedef A<void *, MY_INVALID_VAL, 1> ClassA; 
```

上面的代码在 MS Visual Studio 2008 上编译得很好。在 g++ 上 - 我收到错误 - “转换为整数或枚举类型以外的类型不能出现在常量表达式中”

谷歌搜索后我尝试了一些选项 -

声明“外部无效 *MY_INVALID_VAL;” 在头文件中 - 包含它并执行 void *MY_INVALID_VAL=NULL; 在模板实例化之前。在这种情况下，我收到错误“MY_INVALID_VAL 不是 'void* ' 类型的有效模板参数，因为它不是常量指针”

所以我的问题是 - 如果不使用 c++0x 标准，就没有办法用 NULL 参数实例化模板类吗？

谢谢！

编辑：

感谢所有评论并感谢您引用标准草案中的确切部分。

只是列出我尝试过的东西 -

1）直接传递“0”不起作用。我得到的错误是-“无法将'0'转换为模板参数void *”

2) 声明静态 const void *my_null=0; 并且传递 my_null 不起作用。它给出了错误-“my_null 不能出现在常量表达式中”

3）尝试了评论之一中建议的指向空对象（空对象模式）方法的指针见下文 -

```
class my_null
{
 public:
     my_null() { my_null_ptr = NULL; }
     void * get() { return my_null_ptr; }
 private:
    void *my_null_ptr;
};
my_null my_null_obj;
my_null *ptr = &my_null_obj;

typedef A<void *, (void *)ptr, 1> ClassA; 
```

我仍然收到错误 - “ptr 不能出现在常量表达式中”

所以现在这让我想知道 - 我应该传递什么值才能使其工作？或者有没有可能使它工作？（我的意思是一种不涉及使用 c++11 std 的方法）我还没有找到一个可以成功编译的值。

任何帮助表示赞赏（并且需要:-P）！

作为旁注，我想问的另一件事是 - 是否有任何指针值可用于非类型模板参数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T03:01:44.470

C++98 说非类型模板参数应该是其中之一

> *   整数或枚举类型的整数*常量表达式*；或者
> *   非类型*模板参数*的名称；或者
> *   具有外部链接的对象或函数的名称，包括函数模板和函数*模板ID*，但不包括非静态类成员，表示为*id-expression*；或者
> *   具有外部链接的对象或函数的地址，包括函数模板和函数*模板 ID*，但不包括非静态类成员，表示为 & *id-expression*，其中 & 是选项，如果名称指的是函数或数组；或者
> *   指向成员的指针，如 5.3.1 中所述。

空指针不属于此列表的任何项，因此将空指针作为非类型模板参数传递是无效的。

C++11 将此列表更新为

> *   对于整数或枚举类型的非类型*模板参数，模板**参数*类型的转换常量表达式（5.19）；或者
> *   非类型*模板参数*的名称；或者
> *   一个常量表达式 (5.19)，它指定具有静态存储持续时间和外部或内部链接的对象或具有外部或内部链接的函数的地址，包括函数模板和函数*模板 ID*，但不包括非静态类成员，表示（忽略括号）作为 & *id-expression*，但如果名称引用函数或数组，则 & 可以省略，如果相应的*模板参数*是引用，则应省略；或者
> *   计算结果为空指针值的常量表达式（4.10）；或者
> *   一个常量表达式，计算结果为空成员指针值 (4.11)；或者
> *   指向成员的指针，如 5.3.1 中所述。

The updated requirements do cover null pointers. Therefore, to use null pointers as non-type template arguments you must use C++11.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T02:49:05.927

试试这个：

```
static const void* my_null_pointer = 0;
typedef A<void *, my_null_pointer, 1> ClassA; 
```

类似的东西在 MSVC 和 gcc 上也适用于我。传递 0 作为该模板参数*也应该*有效。

```
typedef A<void *, 0, 1> ClassA; 
```

# c# - 将事件附加到动态创建的按钮单击

> ID：12632699
> 
> 赞同：1
> 
> 时间：2012-09-28T02:14:42.093
> 
> 标签：c#, asp.net, event-handling

我想将事件附加到在运行时生成的单击按钮。到目前为止，我已经编写了代码，但无法将按钮的 ID 传递给方法。这是我的代码

这段代码没有出现任何错误，另一个问题是点击事件后控件被冲走。如何防止这种情况？

```
protected void Button1_Click(object sender, EventArgs e)
   {
     int i = int.Parse(TextBox1.Text);
     for (int x = 1; x <= i; x++)
     {
       Button b = new Button();
       b.ID = "btn_" + x.ToString();
       b.Text = "btn_" + x.ToString();
       b.Click += new System.EventHandler(myEventHandler);
       pnlHolder.Controls.Add(b);
     }
   }

 private void myEventHandler(object sender, EventArgs e)
 {
   txtMain.Text = sender.ToString(); // I want to know which button was pressed
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T02:17:21.610

尝试，

```
txtMain.Text = (sender as Button).Name; 
```

或者

```
txtMain.Text = (sender as Button).Text; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T02:18:23.040

试试这个

```
 private void myEventHandler(object sender, EventArgs e)
 {
   Button b = (Button) sender;
   txtMain.Text = b.ID;
   //
   txtMain.Text = b.Text;

   if(b.ID == "button1")
     doThis();
   else if(b.ID == "button2")
     doThat();
 } 
```

# oop - 覆盖访问器或在构造函数中赋值

> ID：12632701
> 
> 赞同：-1
> 
> 时间：2012-09-28T02:15:05.523
> 
> 标签：oop, overriding, accessor

我有一个关于面向对象编程的问题。如果子类中存在具有不同值的属性。它应该在超类中创建一个抽象访问器，然后在子类中覆盖它。或者在基类中创建一个受保护的实例变量，并在子类构造函数中分配默认值？

让我们看一下代码示例代码：

选择1：

```
class BaseClass {
    public abstract int GetFoo();
}

class SubClass {
    public int GetFoo() {
        return -1;
    }
} 
```

选择2：

```
class BaseClass {
    protected int _foo;

    public int GetFoo() {
        return _foo;
    }
}

class SubClass {
    public SubClass() {
        _foo = -1;
    }
} 
```

或者有什么想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T02:34:08.627

我会采用第一种方法，即提供一个可以在派生类中被覆盖以提供不同值的 getter，而不是在我的类中创建受保护的成员，这些成员也是包私有的并且违反了封装原则。

# symfony - Symfony2 用于子域路由的多个配置和路由文件

> ID：12632702
> 
> 赞同：3
> 
> 时间：2012-09-28T02:15:07.913
> 
> 标签：symfony, symfony-2.1

我们正在构建一个 Symfony2 应用程序，它将使用子域服务于不同的部分：

1.  api.tld.com - API 系统
2.  docs.tld.com - 文档
3.  assets.tld.com - 提供图像的系统

我们这样做的方式是为每个子域创建一个 app 目录，并将标准 /app 目录保留在适当的位置作为中央共享配置。每个应用程序的 web 目录中还有一个自定义引导程序。使用 .htaccess 相应地路由子域。

我遇到的问题是多个配置文件的来源，特别是当它们有自己的路由导入时。在某些情况下，最多可以有 4 个 configs.yml 文件。以以下 URL 为例：

[http://testing.docs.tld.com](http://testing.docs.tld.com)

配置设置当前的工作方式是这样的（并且可以正常工作）

1.  tld.com - 位于 /app/config/config.yml 的全局配置
2.  testing - 位于 /app/config/config_testing.yml 的环境配置。此配置还将 config_dev.yml 导入同一目录中。
3.  docs - 位于 /app_docs/config/config.yml 的应用程序配置

这些都是在 /app_docs/AppKernal.php 中的 AppKernal 中导入的：

```
// Load Global Configuration
// ROUTES INSIDE THIS CONFIG ARE NOT BEING LOADED
$loader->load(__DIR__.'/../app/config/config.yml');

// Load Environment Configuration
// ROUTES INSIDE THIS CONFIG ARE NOT BEING LOADED
$loader->load(__DIR__.'/../app/config/config_' . $this->getEnvironment() . '.yml');

// Load App-centric Configuration
$loader->load(__DIR__.'/config/config.yml'); 
```

现在配置加载就好了。但是我遇到的麻烦，并且没有找到任何明确的文档，是当这些配置中的一个以上定义框架时：路由器：资源。在上面的示例配置中，这些被加载（无论如何都尝试）如下：

**/app/config/config.yml**

```
framework:
    secret:%secret%
    router:
        resource: "%kernel.root_dir%/config/routing.yml"
        strict_requirements: %kernel.debug% 
```

**/app/config/config_testing.yml**

```
// No special Routing 
```

**/app/config/config_dev.yml**

```
framework:
    router:   { resource: "%kernel.root_dir%/config/routing_dev.yml" } 
```

**/app_docs/config/config.yml**

```
framework:
    secret: %secret%
    router:
        resource: "%kernel.root_dir%/config/routing.yml"
        strict_requirements: %kernel.debug% 
```

所有配置都加载正常。但我发现只有上面调用的最后一个路由文件被包含在内。所以我假设规则是它们作为规则被覆盖，而不是扩展。

所以我过去几天试图找出的是，是否可以以上述方式在配置文件中扩展路由文件的包含？我调查的另一个选择是找到一种在 AppKernal 文件中导入路由文件的方法。我只能找到[这个](http://symfony.com/doc/2.0/components/routing.html#load-routes-from-a-file)，它并没有准确解释应该在什么时候使用（或在哪里）。它在包含配置的 AppKernal 中不起作用，因此我假设路由器在该阶段未处于活动状态。

有人有想法么？我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-24T16:02:05.317

我有同样的需求，所以我们这样做了：

```
/apps/config
/apps/config/common_config.yml
/apps/config/common_routing.yml
/apps/config/...

/apps/myapp1
/apps/myapp1/myapp1Kernel.php
/apps/myapp1/...
/apps/myapp1/config
/apps/myapp1/config/config.yml
/apps/myapp1/config/routing.yml
/apps/myapp1/config/...

/apps/myapp2
/apps/myapp2/myapp1Kernel.php
/apps/myapp2/...
/apps/myapp2/config
/apps/myapp2/config/config.yml
/apps/myapp2/config/routing.yml
/apps/myapp2/config/...

... 
```

在每个应用程序的 yml 文件中，我们有：

**/apps/myapp1/config/config.yml**

```
imports:
    - { resource: "../../config/common_config.yml" } 
```

然后，您必须在 /web 中以相同的方式复制

```
/web/myapp1/app.php 
```

谁将呼叫您的应用

```
$kernel = new myapp1Kernel('prod', false);
$kernel->loadClassCache();
Request::enableHttpMethodParameterOverride();
$request = Request::createFromGlobals();
$response = $kernel->handle($request);
$response->send();
$kernel->terminate($request, $response); 
```

# php - PHP 相关文件仅在从 dreamweaver 启动时才有效

> ID：12632705
> 
> 赞同：0
> 
> 时间：2012-09-28T02:15:43.903
> 
> 标签：php, xml, dreamweaver

我开始学习 php，我制作了一个使用 php 文件将信息写入 xml 文件的表单。表单位于 html 文件中，而 php 操作位于单独的文件中。我正在使用 EASyphp 12.1

每当我使用通过 Dreamweaver 发布它的上传表单时，一切都很好。但是当我直接在浏览器中打开它时，它会显示部分 php 代码。这是html的代码

```
<form enctype="multipart/form-data" action="chng.php" method="POST">
<div>Name <input type='text' name="tf" /> </div>
<div>image <input name="uploadedfile1" type="file" /> </div><br />
<input type="submit"  />
</form> 
```

php是

```
$target_path4 = "../img/";
$target_path4 = $target_path4 . basename( $_FILES['uploadedfile4']['name']);
$name4="../img/linkimagen.jpg";

$t = $_POST['tf'];
if(move_uploaded_file($_FILES['uploadedfile4']['tmp_name'], $name4)) {

$xml = simplexml_load_file('info.xml');

$xml->names[0]=$t;
file_put_contents('info.xml', $xml->asXML());
$xml->images[0]=$shortname;
file_put_contents('info.xml', $xml->asXML());
}
?> 
```

然后使用 Jquery ajax 由另一个页面获取 xml 信息。

如前所述，如果我使用 Dreamweaver 启动表单文件，一切正常。此外，有时显示来自 xml 的信息的页面如果直接从浏览器打开时会显示，有时则不会显示，但如果从 Dreamweaver 中打开，它将始终显示。我发现 php 的信息在 Dreamweaver 中不起作用，但不是相反，就像我的情况一样。有什么我必须做的，所以它总是有效的吗？感谢您提供任何信息！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T03:00:48.123

好吧，如果您将其上传到您的服务器 - 有一个 php 解析器可以解析您的文件

如果你在本地打开它，它不会被解析，所以它只是另一个文本文档。

当然，您可以安装 xampp 之类的东西来拥有本地网络服务器，但如果您刚刚开始 - 我猜这有点多:)

- 编辑 -

另外：请注意您的浏览器的行为。如果您的计算机上已经安装了网络服务器，它的地址通常类似于 h ttp://localhost/ 或 h ttp://127.0.0.1 - 如果您的文件没有被解析，可能是因为它直接打开像 C:\programm files\dreamweaver\whatever\index.php 而不是

> h ttp://localhost/index.php

希望这对您有所帮助；）。

# jquery-ui - Jquery UI tag-it 小部件 - 禁用条目的最佳方法是什么？

> ID：12632706
> 
> 赞同：1
> 
> 时间：2012-09-28T02:16:11.207
> 
> 标签：jquery-ui, tag-it

对于 Jquery UI tag-it 小部件，我想禁用包含所有标签的 class="ui-widget-content ui-autocomplete-input" 文本框的文本输入。

我的目的是只允许某些人删除不适当的标签，但不允许任何人添加标签（这是自动生成的）。

对我来说最好的办法是编辑 tag-it .js 文件并为该字段添加 disable="disable" 吗？如果我这样做，那不会阻止提交该字段的内容吗？或者只要提交了相关的隐藏字段，这是否重要？

或者有没有更好的方法来做到这一点（一种压倒一切的风格？）而不修改 tag-it 文件本身？

谢谢，

道格

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T13:09:08.463

在 tag-it.js 我替换了这一行：

```
this._tagInput = $('<input type="text"').addClass('ui-widget-content'); 
```

有了这个：

```
this._tagInput = $('<input type="text" readonly="readonly"/>').addClass('ui-widget-content'); 
```

添加 readonly="readonly" 属性。这具有阻止输入但仍允许用户删除不适当的自动生成标签的预期效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-24T14:25:15.317

我有与原始操作相同的问题。但是由于问题已经存在 2 年半了，并且 tag-it 版本已更改。接受的答案需要更新为以下内容

> tag-it.js 在第 478 行附近：

从：

```
 if (this.options.readOnly){
            tag.addClass('tagit-choice-read-only');
        } 
```

至：

```
 if (this.options.readOnly){
            tag.addClass('tagit-choice-editable');
            // Button for removing the tag.
            var removeTagIcon = $('<span></span>')
                .addClass('ui-icon ui-icon-close');
            var removeTag = $('<a><span class="text-icon">\xd7</span></a>') // \xd7 is an X
                .addClass('tagit-close')
                .append(removeTagIcon)
                .click(function(e) {
                    // Removes a tag when the little 'x' is clicked.
                    that.removeTag(tag);
                });
            tag.append(removeTag);            
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-28T09:33:25.560

这是在 git 存储库的[文档](https://github.com/aehlke/tag-it)下，在 Properties 部分下：

> $("#myTags").data("ui-tagit").tagInput.addClass("fancy"); //显然，如果你想用类做某事......

这转化为下面的解决方案，以我个人的实现风格，可能是我可以让它工作的唯一方法：

```
 $("#myTags").data("ui-tagit").tagInput.prop('disabled' , true); 
```

这是如果我正确理解你的问题。注意：ReadOnly 不会使标签不可编辑。

至于通过标签，你可以使用 ..

```
var x = $("#myTags").tagit("assignedTags"); 
```

将其作为输入字段，并确保其“singleFieldNode”含义标签是`,`（逗号）分隔的。这样你就可以解析它（逗号（`,`）分割成一个对象，或者你想这样做）

PS：要应用上面的任何片段，只需更改包含 TagIt 的 HTML 元素的“id”，您的代码就会正常工作。jQuery TagIt v2.0

# javascript - 滚动时的双菜单（更具体地说是 YAML）

> ID：12632709
> 
> 赞同：2
> 
> 时间：2012-09-28T02:16:43.940
> 
> 标签：javascript, css, menu, scroll, yaml-css

这是我的第一篇 StackOverflow 帖子。所以我希望我的问题符合标准。

我正在使用 YAML CSS 框架创建自己的网站。（[http://www.yaml.de/docs/index.html](http://www.yaml.de/docs/index.html)）

在该页面上，当您滚动时，导航菜单会停留在屏幕顶部。当我下载框架时，我在他们的 domscript.js 文件中找到了以下代码。所以我知道他们添加了一个类，所以它会坚持下去。

我想做的是在它下面有一个相同类型的第二个菜单和不同的链接。我复制并粘贴了它正下方菜单的 html 代码，第二个确实出现了。但是当我向下滚动时，只有第一个保留。

关于如何让第二个留下来的任何想法？

```
if (hOffset < top) {
    if (nav.data(stickyClass) !== true) {
        nav.addClass(stickyClass).data(stickyClass,true);
    }
} else {
    if (nav.data(stickyClass) !== false) {
        nav.removeClass(stickyClass).data(stickyClass,false);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T14:45:55.830

是的，因为 an`ID`只能使用一次。如果您想要这种类型的菜单，您必须创建另一个 id 并复制 .js 文件并更改该`ID`.js 文件中的内容。我认为这会奏效。

# html - 如何创建粘性页脚 - 另一种粘性页脚？

> ID：12632710
> 
> 赞同：0
> 
> 时间：2012-09-28T02:16:45.273
> 
> 标签：html, css

我的意思是页脚将始终位于浏览窗口的底部，即使有很多内容并且通常页脚将不在视线范围内，而不是通常的“粘性页脚”，页脚总是在后面内容。

我可以使用框架来实现这一点，但是如何使用 CSS 以更简洁的方式做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T02:19:32.820

```
.the-other-kind-of-sticky-footer { position:fixed; bottom:0; } 
```

# parsing - DateTime.ParseExact 错误

> ID：12632711
> 
> 赞同：0
> 
> 时间：2012-09-28T02:16:48.460
> 
> 标签：parsing, datetime

如果我在文本字段中有如下日期 2012-09-27T11:41:16:587Z

我将如何做 ParseExact？

我想我很接近 DateTime convertDate = DateTime.ParseExact(date, "yyyy-MM-dd HH:mm:ss", System.Globalization.CultureInfo.InvariantCulture); 但它出错了......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T21:39:33.813

奇怪的是没有人回答这个问题。这将起作用：

```
DateTime.ParseExact(date, @"yyyy-MM-dd\THH:mm:ss:fff\Z",
    CultureInfo.InvariantCulture); 
```

与您的格式字符串相比，唯一的区别是我包含`"fff"`了毫秒，并且我在您的字符串中输入`@"\T"`并`@"\Z"`处理了字母 T 和 Z。`date`

# sml - 询问ML递归函数

> ID：12632713
> 
> 赞同：2
> 
> 时间：2012-09-28T02:16:57.987
> 
> 标签：sml, ml

我一直在使用 ml 函数并遇到了一些烦人的事情。

我将用简单的代码来解释它。例如，如果有一个 list(int*int) 并且我想检查是否有一些元组包含 3 的第一个元素。

```
L = [(1,2),(2,3),(3,5),(3,4)] 
```

所以在这个列表中，我想得到 5 和 4。但是，在 ML 中，函数是递归的，所以如果我写这样的代码。

```
fun a(list) = 
    if #1(hd(list)) = 3 then #2(hd(list))
    else a(tl(list)) 
```

在这个简单的函数中，它可以得到 5 但不能得到 4，因为一旦它检测到 (3,5) 满足条件，它就会返回 5 并且函数结束。

有什么办法也能拿到4吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T02:23:47.187

我不知道 ml 但基本上你需要这样做而不是做其他事情：

```
fun a(list) =
  if list = nil then nil 
  else
    if #1(hd(list)) = 3
    then 
      #2(hd(list)) :: a(tl(list))
    else 
      a(tl(list)) 
```

（随着我对 ML 的了解更多，我正在逐渐编辑此回复：）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T06:50:04.757

您忘记在条件成立的列表尾部递归调用该函数。

在 ML 中，您几乎从不使用`hd`，`tl`而是使用模式匹配。您可以对元组进行模式匹配以提高可读性：

```
fun filter [] = []
  | filter ((x, y)::xys) = if x = 3 
                           then y::(filter xys)
                           else filter xys 
```

[列表结构](http://www.standardml.org/Basis/list.html)上的高阶函数是另一种选择，以防您想使用它们。

# vb.net - 将对象分配给 button.tag

> ID：12632718
> 
> 赞同：0
> 
> 时间：2012-09-28T02:17:48.360
> 
> 标签：vb.net, button, handles

我创建了一个我想在每次单击两个按钮之一时运行的 Sub。我将两个按钮的句柄添加到子程序中，以便单击其中一个按钮将触发子程序。

我将listview对象A放在buttonA.tag中，将listview对象B放在buttonB中。

单击按钮时，我会尽力提取隐藏在按钮标签中的 listview 实例。问题是标签中没有实例。简直是“一无所有”。

```
Private Sub Execute(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnA.Click, btnB.Click

        Dim buttonSender As Button = Nothing

        buttonSender = CType(sender, Button)

        Dim btnListView As ListView = buttonSender.Tag

    End Sub 
```

-------------------**编辑-1**

```
Private Sub Form_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        Me.btnA.Tag = Me.lvA
        Me.btnB.Tag = Me.lvB
    End Sub 
```

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T02:19:18.940

尝试这个，

```
Dim buttonSender As Button = CType(sender, Button) 
```

# windows - Visual Studio for Windows 8 开发人员许可证弹出问题

> ID：12632720
> 
> 赞同：0
> 
> 时间：2012-09-28T02:17:50.807
> 
> 标签：windows, visual-studio-2012

我的问题是，当我在 Windows 8 Release Preview 上启动 Visual Studio 并且我“同意”更新我的开发人员许可证时，弹出的开发人员登录窗口是空白的（即没有任何登录控件）。这使得 VS 无法使用，所以我尝试卸载它（似乎无法从 RP 卸载它）并下载一个新副本。当我尝试下载新版本的 VS for Win8（通过 Dreamspark）时，弹出的安装程序也是空白的。

我很困惑这里的问题是什么？Visual Studio 还是我的 Windows 8？任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T02:27:40.770

Try `Show-WindowsDeveloperLicenseRegistration` in Powershell. Reference: [msdn](http://msdn.microsoft.com/en-us/library/windows/apps/hh974578.aspx#getting_a_developer_license_at_a_command_prompt)

# php - PHP 上的动态 bind_result

> ID：12632722
> 
> 赞同：0
> 
> 时间：2012-09-28T02:18:20.757
> 
> 标签：php

> **可能重复：**
> [动态绑定mysqli_stmt参数，然后绑定结果（PHP）](https://stackoverflow.com/questions/5300365/dynamically-bind-mysqli-stmt-parameters-and-then-bind-result-php)

任何人都可以帮助我如何在 PHP 上创建动态 bind_result。我的查询字段不知道有多少字段，因为它是动态创建的（例如，根据日期范围创建年份字段）。下面是我的脚本，并强调了问题出在哪里。

```
public function getMarketingReports($datefrom,$dateto)
    {
        $yearfrom = date("Y", strtotime($datefrom));
        $yearto = date("Y", strtotime($dateto));

        //create year fields
        $concatYear = "";
        for($year=$yearfrom;$year<=$yearto;$year++){
            $concatYear .= "SUM(IF(c.datecreated='".$year."',IF(LOWER(c.fullTimeEployeeType)='basic hour rate', c.fullTimeEployeeTypeAmount*2080 , c.fullTimeEployeeTypeAmount),0)) ".$year.",";
        }

        $reportdata = array();
        $db = Connection::Open();
        $stmt = $db->stmt_init();
        if($stmt->prepare("SELECT p.Code `PositionCode`,
                                  p.name `PositionName`,
                                  l.value `Location`,
                                  ".$concatYear."
                                  SUM(b.field205) `TotalEmployees`
                             FROM c1 c
                            INNER JOIN b1 b
                               ON c.registrationid=b.id
                            INNER JOIN positions p
                               ON c.positionid=p.id
                            INNER JOIN lookupvalues l
                               ON c.location=l.id
                            WHERE c.`status`!=2
                              AND c.datecreated BETWEEN ? AND ?
                            GROUP BY c.positionid,c.location,YEAR(c.datecreated)")){

            $datefrom = $datefrom." 00:00:00";
            $dateto = $dateto." 23:59:59";
            $stmt->bind_param("ss",$datefrom,$dateto);
            $stmt->execute();
            $stmt->bind_result
            (
                $positionCode,
                $positionName,
                $location,

                **//getting bind result data here for year fields**

                $totalEmployees
            );
            while($stmt->fetch())
            {
                $surveydata = array();
                $surveydata['positionCode'] = $positionCode;
                $surveydata['positionName'] = $positionName;
                $surveydata['location'] = $location;

                **//storing of data here for year fields**

                $surveydata['totalEmployees'] = $totalEmployees;
                array_push($reportdata,$surveydata);
            }
        }
        Connection::Close();
        return $reportdata;

    } 
```

可能吗？谁能帮我解决这个问题

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-28T02:32:04.653

首先，生成*年份*字段的代码有一个很好的语法错误：

```
"SUM(IF(c.datecreated='".$year."',IF(LOWER(c.fullTimeEployeeType)='basic hour rate', c.fullTimeEployeeTypeAmount*2080 , c.fullTimeEployeeTypeAmount),0) ".$year."," 
```

`SUM(`开场白缺少右括号。最重要的是，您有一个`".$year."`不属于任何封闭方法的浮动（尽管它可以用作别名；我不习惯在没有前面的情况下看到它`AS`- 所以这可能是我的错误）。猜测一下，我会说用 a 替换`".$year."`a`)`并且应该修复该部分：

```
$concatYear .= "SUM(IF(c.datecreated='".$year."',IF(LOWER(c.fullTimeEployeeType)='basic hour rate', c.fullTimeEployeeTypeAmount*2080 , c.fullTimeEployeeTypeAmount),0)),"; 
```

如果`$year`添加实际上是一个别名，您可以在它之前添加右括号以关闭该`SUM()`函数。

关于动态绑定变量，我理想的解决方案实际上来自关于 SO[的类似问题/答案](https://stackoverflow.com/questions/5300365/dynamically-bind-mysqli-stmt-parameters-and-then-bind-result-php)（这是直接复制/粘贴，我不相信它，但我确实喜欢它=P）：

```
 // Get metadata for field names
    $meta = $stmt->result_metadata();

    // This is the tricky bit dynamically creating an array of variables to use
    // to bind the results
    while ($field = $meta->fetch_field()) { 
        $var = $field->name; 
        $$var = null; 
        $fields[$var] = &$$var;
    }

    // Bind Results
    call_user_func_array(array($stmt,'bind_result'),$fields);

    // Fetch Results
    $i = 0;
    while ($stmt->fetch()) {
        $results[$i] = array();
        foreach($fields as $k => $v)
            $results[$i][$k] = $v;
        $i++;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T02:34:02.417

你必须[`call_user_func_array`](http://php.net/manual/en/function.call-user-func-array.php)：

```
call_user_func_array(array($stmt, "bind_result"), $argArray); 
```

你`$argArray`这样填写：

```
$years = array();

$concatYear = "";
for($year=$yearfrom;$year<=$yearto;$year++){
    $concatYear .= "SUM(IF(c.datecreated='".$year."',IF(LOWER(c.fullTimeEployeeType)='basic hour rate', c.fullTimeEployeeTypeAmount*2080 , c.fullTimeEployeeTypeAmount),0) ".$year.",";

    // track the years you need
    $years[] = $year;

}

...

//you prepare all the vars here
$argArray = array(
    $positionCode,
    $positionName,
    $location
);

//loop the years
foreach($years as $y)
{

    $argArray[] = ${$y};

}

$argArray[] = $annualSalary;
$argArray[] = $totalEmployees;
$argArray[] = $yearOfData; 
```

几年后你用这种方式做事：

```
...

foreach($years as $y)
{

$surveydata[$y] = ${$y};

} 
```

# matlab - 从matlab在谷歌地图中绘制数据

> ID：12632727
> 
> 赞同：1
> 
> 时间：2012-09-28T02:19:00.470
> 
> 标签：matlab, google-maps

无论如何在matlab的谷歌地图中绘制我的数据，包括纬度/经度和一些特征值。我有某些具有不同属性的数据点，基于我想在谷歌地图上显示具有不同颜色/大小的标记。那可能吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T11:20:11.363

Google 地图允许您以 KML 文件的形式导入数据。在线提供了各种教程，展示了如何执行此导入步骤（这是我刚刚快速找到的一个）[。](http://www.askdavetaylor.com/how_to_import_xml_kml_data_file_google_maps.html)此外，[这里](http://support.google.com/earth/bin/answer.py?hl=en&answer=148118)有一些来自谷歌的关于 KML 的基本信息。

因此，唯一的挑战就是将您的数据从 MATLAB 导出为 KML 形式。如果您有 MATLAB 的 Mapping Toolbox，那么这非常容易。只需使用[kmlwrite](http://www.mathworks.com/help/map/ref/kmlwrite.html)命令。

如果您还没有 Mapping Toolbox，那么如果您正在执行任何类型的复杂映射操作（当您尝试将圆形地球压平成地图时，事情会变得非常复杂），这可能是一个好主意。如果这只是一个一次性项目并且该工具箱是多余的，那么您可以通过从 MATLAB 编写 XML 手动创建 KML 文件（使用[xmlwrite](http://www.mathworks.com/help/matlab/ref/xmlwrite.html)或使用[fprintf进行](http://www.mathworks.com/help/matlab/ref/fprintf.html)**非常**手动的编写路径）。

此外，如果 Google 地图允许您以 CSV 文件的形式导入某些数据（尽管与 KML 相比，这可能有局限性），我不会感到太惊讶。如果是这样，您可以简单地使用 MATLAB 中的[csvwrite](http://www.mathworks.com/help/matlab/ref/csvwrite.html)来导出数据（不需要额外的工具箱）。

***==编辑==***

如果您想了解如何从 CSV 转换为 KML，[此](https://stackoverflow.com/questions/5858827/importing-csv-file-to-google-maps)之前的 SO 帖子可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T02:14:36.807

有不需要matlab Mapping Toolbox的KLM-Toolbox：

[http://www.mathworks.com/matlabcentral/fileexchange/34694](http://www.mathworks.com/matlabcentral/fileexchange/34694)

它应该完成这项工作。

# html - 根据子宽度动态调整html li的大小

> ID：12632729
> 
> 赞同：0
> 
> 时间：2012-09-28T02:19:11.387
> 
> 标签：html, css

我正在使用本教程： http: [//net.tutsplus.com/tutorials/html-css-techniques/how-to-create-a-drop-down-nav-menu-with-html5-css3-and-jquery /](http://net.tutsplus.com/tutorials/html-css-techniques/how-to-create-a-drop-down-nav-menu-with-html5-css3-and-jquery/)

这是我的网站：[http ://billcaffery.dnsd.me](http://billcaffery.dnsd.me)

我试图让“项目”选项卡足够大，以便在文本完成打印之前不会消失。有没有办法添加一个css规则来实现这一点而没有硬编码宽度等？

[https://github.com/billythakidd04/grown-kidd-site](https://github.com/billythakidd04/grown-kidd-site)上的所有代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T02:49:51.713

您需要将样式中的宽度更改为`nav ul ul`from`100%`到`auto`。100% 将其限制为其父容器的宽度，即导航栏项目的宽度，将其设置为 auto 将允许它扩展以包含内容。

# iis - 向现有 SSL SAN 证书添加新域时，它将如何影响使用 SAN 证书的站点

> ID：12632731
> 
> 赞同：-1
> 
> 时间：2012-09-28T02:19:26.810
> 
> 标签：iis, networking, ssl, certificate, san

向现有 SSL SAN 证书添加新域时，它将如何影响使用先前 SAN 证书的站点？

我的逻辑是告诉我它将能够处理 https 请求或发出安全警告，表明证书无效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T11:23:04.827

只要证书没有被吊销（或没有过期），它就会对为其颁发的所有 SAN 名称有效。如果为与先前证书中使用的主机重叠的一组主机颁发了另一个证书，则两者都将对其各自的主机有效。

CA 是否选择使其在同一帐户中为一组类似主机颁发的先前证书无效取决于其自己的策略，但原则上，无论如何，您都可以轻松地从不同 CA 获得相同主机的另一个证书。

话虽这么说，您似乎在多台机器上使用单个证书（和相同的私钥），用于看起来不相关的主机（至少在它们由不同的机器提供服务的意义上）。这通常被认为是不好的做法，因为如果其中一台机器遭到破坏，您将不得不更改所有机器上的证书。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T05:05:48.943

仅供参考，正如 Digicert 所建议的那样，将域添加到现有证书不会撤销证书，并且应该允许现有证书继续像以前一样运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T11:16:42.557

HTTPS:// 不支持您从证书中删除的所有 SAN 名称，它会导致 SSL 安全错误或已删除域名的警告。

# verilog - Verilog 随机数生成器

> ID：12632734
> 
> 赞同：-5
> 
> 时间：2012-09-28T02:19:48.797
> 
> 标签：verilog

我是 Verilog 的新手，我正在尝试创建一个 4 位二进制随机数生成器。该程序如下，有人可以通过提及错误来帮助我吗？

我最初尝试过这个：

```
module rng (d);
 inout[3:0]d;
 //wire[3:0]d;
 //input clk, rst;
 //wire [3:0] w;

 dff f1(a[0],clk,d[0],rst);
 dff f2(a[1],clk,d[1],rst);
 dff f3(a[2],clk,d[2],rst);
 dff f4(a[3],clk,d[3],rst);

 xorper p(d[0],d[1],d[2],d[3],a[0],a[1],a[2],a[3]);//permutations
 //dff f1(a,clk,q,rst);
 dff x(d,clk,q,rst);
endmodule 
```

我也试过这个：

```
module re(b,q,clk,rst);
 input [3:0]q;
 input clk,rst;
 wire [3:0]q,a;

 output [3:0]b;
 reg [3:0]b;

 rox f1(q[0],q[1],q[2],q[3],a[0],a[1],a[2],a[3]);//permutations
 rod f2(a,clk,b,rst);//dff
 always@(posedge clk) begin
 if (rst==1'b0) begin
  b[0]=q[0];
  b[1]=q[1];
  b[2]=q[2];
  b[3]=q[3];
 end else if(rst==1'b1)
  b[0]=1'bx;
  b[1]=1'bx;
  b[2]=1'bx;
  b[3]=1'bx;
 end

endmodule 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T07:27:10.233

我建议从[LFSR](http://en.wikipedia.org/wiki/Linear_feedback_shift_register)开始生成随机数。它们是一个直接的移位寄存器，通过点击返回到一个多位 XOR 以创建反馈位。

您对翻牌的实现可能会更好。
1) 将 negedge rst 添加到敏感度列表
2) 您不想分配 x
3) 使用非阻塞分配 (<=)

```
reg [3:0] b;

//LFSR feedback bit
wire feedback
assign feedback = b[0] ^ b[3];

// Add active low reset to sensitivity list
always@(posedge clk or negedge rst) begin
 if (rst==1'b0) begin
  b[3:0]<=4'hF;  //reset condition first
 end 
 else begin
  b[0]<=feedback;
  b[1]<=b[0];
  b[2]<=b[1];
  b[3]<=b[2];
  //Alternative Verilog might be
  // b = {b[2:0], feedback};
 end 
```

为 LFSR 搜索[最大长度 LFSR](http://www.ece.cmu.edu/~koopman/lfsr/index.html)选择分接点。一个最大的 LFSR 在重复给定长度的寄存器和抽头点之前将具有最长的数字序列。

# php - SimpleXML 返回 0 个元素

> ID：12632735
> 
> 赞同：1
> 
> 时间：2012-09-28T02:19:55.793
> 
> 标签：php, xml, simplexml

我从 Soap 请求中获取响应，并将其传递到新的 SimpleXML 构造中。

```
$response = $this->client->$method(array("Request" => $this->params));
$response_string = $this->client->__getLastResponse();
$this->response = new Classes_Result(new SimpleXMLElement($result)); 
```

如果我回显 $response_string，它会输出正确的 xml 字符串。这是一个片段，因为它很长。

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <soap:Body><GetClassesResponse xmlns="http://clients.mindbodyonline.com/api/0_5">      
    <GetClassesResult>
     <Status>Success</Status>
     <XMLDetail>Full</XMLDetail>
     <ResultCount>6</ResultCount>
     <CurrentPageIndex>0</CurrentPageIndex>
     <TotalPageCount>1</TotalPageCount>
     <Classes>
      <Class>
       <ClassScheduleID>4</ClassScheduleID>
       <Location>
        <SiteID>20853</SiteID>
  ....</soap:Envelope> 
```

但是，当我尝试使用此对象时，会出现错误，或者如果我转储它输出的对象：

```
object(SimpleXMLElement)#51 (0) 
```

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T02:45:35.230

您实际上并没有使用`$response_string`，并且您没有在`$result`任何地方设置，您已传递给`new SimpleXMLElement($result)`。

也许您打算用`$response_string`字符串 via构建一个 SimpleXML 对象[`simplexml_load_string()`](http://php.net/manual/en/function.simplexml-load-string.php)？

```
$response = $this->client->$method(array("Request" => $this->params));
$response_string = $this->client->__getLastResponse();
// Load XML via simplexml_load_string()
$this->response = new Classes_Result(simplexml_load_string($response_string));

// Or if you do expect a SimpleXMLElement(), pass in the string
$this->response = new Classes_Result(new SimpleXMLElement($response_string)); 
```

SOAP 响应的`<soap:Body>`元素以 ( `soap`) 命名。要使用 SimpleXML 循环它，您必须提供正确的命名空间：

```
// After creating new SimpleXMLElement()
var_dump($this->response->children("http://schemas.xmlsoap.org/soap/envelope/"));

// class SimpleXMLElement#2 (1) {
//   public $Body =>
//   class SimpleXMLElement#4 (0) {
//  }
// } 
```

在身体上循环：

```
foreach ($this->response->children("http://schemas.xmlsoap.org/soap/envelope/") as $b) {
  $body_nodes = $b->children();
  // Get somethign specific
  foreach ($body_nodes->GetClassesResponse->GetClassesResult as $bn) {
    echo $bn->ResultCount . ", ";
    echo $bn->TotalPageCount;
  }
}
// 6, 1 
```

# python - 在 Cypher / Python 中为 neo4j 优化 DBSCAN

> ID：12632736
> 
> 赞同：3
> 
> 时间：2012-09-28T02:20:01.633
> 
> 标签：python, cluster-analysis, neo4j, dbscan

嗨，我一直在尝试为 Neo4j 实现 DBSCAN 算法，但遇到了严重的性能瓶颈。我将描述实现，然后寻求帮助。

我对可能的 epsilon 值进行了离散化，并将每个节点的每个离散化下的邻居数计数，以便能够在一个查询中检索所有核心节点。

```
START a = node(*)
WHERE a.rel<cutoff threshold>! >= {minp}
RETURN a 
```

这部分很快，不快的部分是后续查询：

```
START a = node({i})
SET a.label<cutoff threshold>_<minpoints> = {clust}
WITH a
MATCH a -[:'|'.join(<valid distance relations>)]- (x)
WHERE not(has(x.label<cutoff threshold>_<minpoints>))
WITH x
SET x.label<cutoff threshold>_<minpoints>={clust}
RETURN x 
```

然后我选择一个核心节点开始，只要还有核心节点邻居，运行上面的查询来标记他们的邻居。

我认为问题在于我的图具有非常不同的稀疏度 - 从只有弱相似性开始，它几乎是完全连接的，在 ~10k 节点之间有 ~50M 关系，而在强相似性时，~10k 之间的关系只有 ~20k节点（或更少）。无论如何，它总是真的很慢。我处理这个问题的最佳方法是什么？是否对关系类型和起始节点进行索引？我还没有找到关于这个问题的任何资源，而且令人惊讶的是还没有实现，因为这是一个非常标准的图形算法。我可以使用 scikit.learn 但我将仅限于内存中的距离矩阵:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T15:31:20.800

你用什么版本的neo4j试过这个？

在 1.8 之前，性能一直不是 cypher（而是语言）的设计目标。看看最近的快照（[1.9-SNAP](http://neo4j.org/download/)）。

还要确保您的热数据集不只是从磁盘加载（否则您测量磁盘 io），以便您的[内存映射设置](http://docs.neo4j.org/chunked/milestone/embedded-configuration.html)和 JVM 堆足够大。

您可能还想查看 Neo4j 企业的 GCR 缓存，它具有较小的内存占用。

`count(x)`您的查询中的基数是什么？如果它太小，您有太多的小交易正在进行。取决于您运行的 python 嵌入式或 REST 是否使用更大的 tx-scope 或[REST-batch-operations](http://docs.neo4j.org/chunked/milestone/rest-api-batch-ops.html)

您已经在使用非常棒的参数。你的 rel 类型的可变性是什么？

有没有机会与我们（Neo4j）分享您的数据集/生成器和代码，以便我们进行性能测试？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T06:18:53.717

有一些使用索引的 DBSCAN 实现。我不了解[neo4j](/questions/tagged/neo4j "显示标记为“neo4j”的问题")，所以我无法确定您的方法是否有效。您可能需要预先计算的东西实际上是图的稀疏版本，只有在 epsilon 阈值内的边。

我想指出的是，显然您的数据集中有不同的密度，因此您可能想改用 OPTICS，它是 DBSCAN 的一种变体，它取消了 epsilon 参数（并且也不需要区分“核心”节点，因为每个节点都是某个 epsilon 的核心节点）。不要使用 Weka 版本（或浮动的受 weka 启发的 python 版本）。它们是一半 OPTICS 和一半 DBSCAN。

当您有可用的有效排序更新堆时，OPTICS 可以非常快。

# jquery-ui - 根据第一个更改第二个日期选择器的 minDate

> ID：12632738
> 
> 赞同：2
> 
> 时间：2012-09-28T02:20:20.620
> 
> 标签：jquery-ui, onselect

我在同一页面中有两个 datePicker，我想根据第一个更改第二个 datepicker 的 minDate。这是我的代码：

```
$("#datepickerDepart" ).datepicker({
        dateFormat: "mm-dd-yy", 
                minDate: 0,
        onSelect: function(dateText, inst) {
          var m = dateText.substring(0,2);
          var d = dateText.substring(3,5);
          var y = dateText.substring(6,10);
          console.log(d);
          console.log(m);
          console.log(y);
          var newDate = new Date(y,m-1,d);
          console.log(newDate);
          $('#datepickerReturn').val("");
                      $('#datepickerReturn').datepicker({
              dateFormat: "mm-dd-yy",
              minDate: newDate
          })
             }
}); 
```

但是我有一个问题，第一次在第一个datePicker中选择一个日期，第二个的minDate会按照这个设置，但是当我重新选择第一个时，第二个datePicker的minDate就不会再改变了，它会保持。我不知道为什么。请帮忙！！

我只是希望第二个的 minDate 只要第一个的选定日期发生变化就会改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T02:31:16.423

You are updating the second `datepicker` incorrectly. I am assuming you have already initialized the second one previously, although your code posted doesn't appear to. You need to use the option syntax when updating it, instead of the constructor.

[http://jqueryui.com/demos/datepicker/#option-minDate](http://jqueryui.com/demos/datepicker/#option-minDate)

```
$('#datepickerReturn').val("");
$('#datepickerReturn').datepicker({'option','minDate', newDate}); 
```

Full code:

```
$('#datepickerReturn').datepicker({
              dateFormat: "mm-dd-yy",
              minDate: 0
          });
$("#datepickerDepart" ).datepicker({
        dateFormat: "mm-dd-yy", 
                minDate: 0,
        onSelect: function(dateText, inst) {
          var m = dateText.substring(0,2);
          var d = dateText.substring(3,5);
          var y = dateText.substring(6,10);
          console.log(d);
          console.log(m);
          console.log(y);
          var newDate = new Date(y,m-1,d);
          console.log(newDate);
          $('#datepickerReturn').val("");
          $('#datepickerReturn').datepicker({'option','minDate', newDate});
      }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-19T07:20:16.943

You can update secodn datepicker's mindate with following code :

```
 $( "#ddate" ).datepicker({
showOn: "button",
buttonImage: base_path+"img/date_picker.png",
buttonImageOnly: true,
onSelect: function (selectedDate) {
                    $("#rdate").datepicker("option", "minDate", selectedDate);
                },
                minDate: 'today'

}); 
$( "#rdate" ).datepicker({
showOn: "button",
buttonImage: base_path+"img/date_picker.png",
buttonImageOnly: true,
  minDate: 'today'

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T02:40:55.127

```
$("#strStartDate").datepicker({ 
  dateFormat: 'dd/mm/yy', 
  constrainInput: true,
  firstDay: 1,
  hideIfNoPrevNext: true,
  onSelect: function(){
        if ($("#strStartDate").val() > $("#strEndDate").val()){
            $("#strEndDate").val($("#strStartDate").val());
        }
  } 
```

});

```
$("#strEndDate").datepicker({ 
  dateFormat: 'dd/mm/yy', 
  constrainInput: true,
  firstDay: 1,
  hideIfNoPrevNext: true,
  beforeShow: function (input, inst) {
        inst.settings.minDate = $("#strStartDate").val();
 } 
```

});

# svn - svn日志显示

> ID：12632743
> 
> 赞同：2
> 
> 时间：2012-09-28T02:20:44.060
> 
> 标签：svn

有没有办法结合`svn log -r 1:HEAD`和`svn log -r {2012-08-02}:{2012-09-03}`

我想列出两个日期之间的 svn 日志并按降序显示。

它适用于降序或两个日期。我想结合这两个选项 - 它应该显示两个日期之间的日志并按降序排列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T02:30:44.857

Switch the order of the dates:

```
svn log -r {2012-09-03}:{2012-08-02} 
```

Edit: I assume you already tried this. Perhaps this doesn't work in your version? I have

```
$ svn --version
svn, version 1.6.17 (r1128011)
... 
```

# c# - 从 Collection 元素到 Int64 的转换错误。指定的演员表无效

> ID：12632744
> 
> 赞同：2
> 
> 时间：2012-09-28T02:21:07.470
> 
> 标签：c#, .net, type-conversion

转换为 Int64 或任何大数字时，我在以下代码上遇到问题。任何帮助表示赞赏。

```
public static void GetDiskspace(string MachineName, string DriveLetter) 
{ 
  ConnectionOptions options = new ConnectionOptions(); 
  ManagementScope scope = new ManagementScope("\\\\" + MachineName + "\\root\\cimv2",  
  options); 
  scope.Connect(); 
  SelectQuery query1 = new SelectQuery("Select * from Win32_LogicalDisk"); 

  ManagementObjectSearcher searcher1 = new ManagementObjectSearcher(scope, query1); 
  ManagementObjectCollection queryCollection1 = searcher1.Get(); 

  foreach (ManagementObject mo in queryCollection1) 
  { 
      // Display Logical Disks information 

      if (mo["Name"].Equals(DriveLetter.ToUpper()+":"))
          if (((Int64)mo["FreeSpace"]) < (1024 * 1024 * 100)) //100GB  <<----HERE IS WHERE I GET THE ERROR
          {
              Console.WriteLine(MachineName + " ALERT. LOW SPACE ON DRIVE " + mo["Name"]);
              Console.WriteLine();
              Console.WriteLine("              Disk Name : {0}", mo["Name"]);
              Console.WriteLine("              Disk Size : {0}", mo["Size"]);
              Console.WriteLine("              FreeSpace : {0}", mo["FreeSpace"]);
              Console.WriteLine("          Disk DeviceID : {0}", mo["DeviceID"]);
              Console.WriteLine("        Disk VolumeName : {0}", mo["VolumeName"]);
              Console.WriteLine("        Disk SystemName : {0}", mo["SystemName"]);
              Console.WriteLine("Disk VolumeSerialNumber : {0}", mo["VolumeSerialNumber"]);
              Console.WriteLine();
          }
  } 
  string line; 
  line = Console.ReadLine();  
} 
```

编辑：将“大小”更改为“自由空间”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T02:25:45.060

它被`ulong`装箱了`object`。所以你只能将它拆箱到`ulong`（即`UInt64`）。

```
 if (((UInt64)mo["Size"]) < (1024 * 1024 * 100)) 
```

![在此处输入图像描述](../Images/cf5f8cd36ae42ad6cf763c407ae21a21.png)

看看[Win32_LogicalDisk 类](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394173%28v=vs.85%29.aspx)

```
class Win32_LogicalDisk : CIM_LogicalDisk
{
    ...
    uint64   Size;
    ...
}; 
```

`Win32_LogicalDisk`类属性描述的摘录：

**尺寸**

```
Data type: uint64 
Access type: Read-only Size of the disk drive.
This property is inherited from CIM_LogicalDisk. 
```

PS：

1）实际上，如果你确实需要`Int64`，你可以做以下演员：

```
(Int64)(UInt64)mo["Size"] 
```

2）您可以阅读[Eric Lippert 的这篇文章](http://blogs.msdn.com/b/ericlippert/archive/2009/03/19/representation-and-identity.aspx)，阐明所讨论异常的本质。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T02:25:34.297

改为**[`TryParse`](http://msdn.microsoft.com/en-us/library/zc2x2b1h.aspx)**检查该值是否为有效数字。

```
long number;
bool result = Int64.TryParse(mo["Size"], out number); 
```

# c++ - 强制派生类重载非抽象基类中的虚方法

> ID：12632747
> 
> 赞同：0
> 
> 时间：2012-09-28T02:21:23.397
> 
> 标签：c++, inheritance, abstract-class, virtual-functions

我正在使用简单的克隆模式编写一些代码，如果我能够强制派生类覆盖该克隆模式，但保留使用我的基类的能力，我会喜欢它。（所以我不想将克隆方法声明为纯虚拟的。）

无论如何在编译器级别强制执行此限制？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T02:32:46.027

不幸的是，没有办法在 C++ 中实现这一点。您不能强制在子类中重写非抽象方法。但是，我可能会注意到具体的基类在 C++ 中应该相当少见，您可能需要重新考虑您的设计。有了更多关于您的总体目标的信息，我们或许能够为您的精确需求提供更好的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T02:56:44.773

我接触 C++ 已经有一段时间了，但我记得你可以使用带有 body 的纯虚方法。

```
// in header
class YourBase {
public:
  virtual Foo bar() = 0;
};

// in source
Foo YourBase::bar() {
  // a default impl
} 
```

这应该强制子类覆盖 bar()，同时在 YourBase 中留下一个可用的 bar() impl

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T02:59:14.563

不幸的是，您不能在编译时强制一个类覆盖具体基类的方法，但是您可以简单地`assert`在每个`clone`函数实现中将该类型是该实现所在的类的类型，

```
assert( typeid( *this ) == typeid( ThisClass ) ); 
```

然后运行一个测试来练习每个类的克隆功能。

# symfony - Symfony2 验证将无效整数更改为 0

> ID：12632756
> 
> 赞同：2
> 
> 时间：2012-09-28T02:22:30.853
> 
> 标签：symfony

我向表单添加了验证，发现在某些情况下它会丢失我输入的无效数据并保存 0。底部的输出显示，如果我将纬度发布为 ' `zzzzzz`'，这显然不是数字，也不是介于 -90 和 90 之间，则表单被声明为有效并与 value 一起保存`0`。

鉴于我已声明输入必须是数字，这怎么可能发生？

ProxyType.php buildForm()：

```
$builder
        ->add('siteName', null, array('label' => 'Site name'))
        ....
        ->add('latitude', 'number', array('label' => 'Latitude'))
        ->add('longitude', 'number', array('label' => 'Longitude'))
        ....
    ; 
```

ProxyController.php 创建操作：

```
 ....
    $postData = $request->request->get('niwa_pictbundle_proxytype');
    $this->get('logger')->info('Posted latitude = '.$postData['latitude']);

    $form    = $this->createForm(new ProxyType(), $entity);
    $form->bindRequest($request);

    if ($form->isValid()) {
        $this->get('logger')->info('Form declared valid : latlong ('.$entity->getLatitude().','.$entity->getLongitude().')');
        .... 
```

验证.yml：

```
Acme\PictBundle\Entity\Proxy:
properties: 
    longitude:
        - Min: { limit: -180 }
        - Max: { limit: 180 }
    latitude:
        - Max: { limit: 90 }
        - Min: { limit: -90 } 
```

输出：

```
[2012-09-28 02:05:30] app.INFO: Posted latitude = zzzzzz [] []
[2012-09-28 02:05:30] app.INFO: Form declared valid : latlong (0,0) [] [] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T11:58:24.527

发生的事情是您没有使用数字验证，而是将表单字段绑定为数字，因此当您将请求绑定到表单时，它将字符串转换为数字（对于任何没有数字开头的字符串都会为 0)。作为数字的表单字段意味着它希望以数字形式出现，或者更确切地说，应该在此类事物的前端进行一些验证，或者前端不应该允许设置非数字。

我认为您似乎想要的是带有数字验证的文本类型的表单字段。

对于实际验证，请使用约束类型（除了您的最小值和最大值）。

[http://symfony.com/doc/current/book/validation.html](http://symfony.com/doc/current/book/validation.html)

[http://symfony.com/doc/current/reference/constraints/Type.html](http://symfony.com/doc/current/reference/constraints/Type.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-28T09:28:23.083

在您的 validation.yaml 中添加以下约束。然后只有它验证了这些字段。在您的表单类型中，您仅提及您需要的小部件类型（数量）。那还不够。所以尝试在你的

验证.yml

```
latitude
    - Type:
        type: integer
        message: latitude should be numeric
longitude
    - Type:
        type: integer
        message: longitude should be numeric 
```

希望这可以帮助。

# sql - SQL to LINQ Group 按转换

> ID：12632761
> 
> 赞同：1
> 
> 时间：2012-09-28T02:22:59.323
> 
> 标签：sql, linq

我有一条 SQL 语句，我想将它转换为 LINQ。现在的问题是我不知道如何在 LINQ 中对其进行分组。

这是代码。

在 SQL 中

```
select plp.ProspectsListID, p.Prospect_PII_Key 
from ProspectListProspect plp
join Prospects p
on p.ProspectsID = plp.ProspectsID
group by plp.ProspectsListID,p.Prospect_PII_Key 
```

在 LINQ 中

```
 var list1 = from plp in GetDataContext.SQLDataContext.GetTable<DataAccess.ProspectListProspect>()
                    join p in     GetDataContext.SQLDataContext.GetTable<DataAccess.Prospect>()
                        on plp.ProspectsID equals p.ProspectsID
                    select new
                    {
                        ProspectID = plp.ProspectsListID,
                        Prospect_PII_Key = p.Prospect_PII_Key
                    }; 
```

谢谢

杰森

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T06:48:13.747

提这个

```
var list1 = from item in
                (
                   from plp in GetDataContext.SQLDataContext.GetTable<DataAccess.ProspectListProspect>()
                join p in     GetDataContext.SQLDataContext.GetTable<DataAccess.Prospect>()
                    on plp.ProspectsID equals p.ProspectsID
                  select new
                  {
                      ProspectID = plp.ProspectsListID,
                      Prospect_PII_Key = p.Prospect_PII_Key
                   }
                )
                group item by new {item.ProspectID ,item.Prospect_PII_Key } into grp
                select new
                {
                    ProspectID = grp.ProspectsListID,
                    Prospect_PII_Key = grp.Prospect_PII_Key
                } 
```

;

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T03:13:31.513

检查这个

```
var list1 = from plp in GetDataContext.SQLDataContext.GetTable<DataAccess.ProspectListProspect>()
                    join p in     GetDataContext.SQLDataContext.GetTable<DataAccess.Prospect>()
                        on plp.ProspectsID equals p.ProspectsID
             Group By Key = New With {plp.ProspectsListID,p.Prospect_PII_Key} Into Group                       
             Select Group; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T06:41:53.367

```
var list1 = from plp in GetDataContext.SQLDataContext.GetTable<DataAccess.ProspectListProspect>()
            join p in  GetDataContext.SQLDataContext.GetTable<DataAccess.Prospect>()
                   on plp.ProspectsID equals p.ProspectsID
            group p by new {plp.ProspectsListID,p.Prospect_PII_Key} into g
            select new
                {
                    ProspectID = g.Key.ProspectsListID,
                    Prospect_PII_Key = g.Key.Prospect_PII_Key
                }; 
```

# android - Android – 如何加载共享库？

> ID：12632762
> 
> 赞同：11
> 
> 时间：2012-09-28T02:23:02.193
> 
> 标签：android, android-ndk, shared-libraries

我创建了最简单的 EXECUTABLE 和 SHARED_LIBRARY。不更改 LD_LIBRARY_PATH 就不会加载 SHARED_LIBRARY：

```
# ./hello
./hello
link_image[1995]: failed to link ./hello
CANNOT LINK EXECUTABLE

# LD_LIBRARY_PATH=.:$LD_LIBRARY_PATH ./hello
Hello, world! 
```

以下所有代码：

**第一个.h**

```
#ifndef FIRST_H
#define FIRST_H

extern int first(int x, int y);

#endif /* FIRST_H */ 
```

**第一个.c**

```
#include "first.h"

int first( int x, int y ) {
    return x + y;
} 
```

**你好ç**

```
#include <stdio.h>
#include "first.h"

int main( int argc, char **argv ) {
    printf( "Hello, world!\n" );
    first( 1000, 24 );
    return 0;
} 
```

**安卓.mk**

```
include $(CLEAR_VARS)
LOCAL_MODULE    := first
LOCAL_SRC_FILES := first.c
include $(BUILD_SHARED_LIBRARY)

include $(CLEAR_VARS)
LOCAL_MODULE := hello
LOCAL_SRC_FILES := hello.c
LOCAL_SHARED_LIBRARIES := first
LOCAL_LDFLAGS := -Wl,-rpath,. -Wl,-rpath,/data/data/testlib/lib
include $(BUILD_EXECUTABLE) 
```

**readelf——大家好**

```
...
Dynamic section at offset 0xef4 contains 25 entries:
Program Headers:
  Type           Offset   VirtAddr   PhysAddr   FileSiz MemSiz  Flg Align
  INTERP         0x000154 0x00008154 0x00008154 0x00013 0x00013 R   0x1
      [Requesting program interpreter: /system/bin/linker]
...
  Tag        Type                         Name/Value
 0x00000001 (NEEDED)                     Shared library: [libfirst.so]
 0x00000001 (NEEDED)                     Shared library: [libstdc++.so]
 0x00000001 (NEEDED)                     Shared library: [libm.so]
 0x00000001 (NEEDED)                     Shared library: [libc.so]
 0x00000001 (NEEDED)                     Shared library: [libdl.so]
 0x0000000f (RPATH)                      Library rpath: [.:/data/data/testlib/lib] 
```

RPATH 在这里，但链接器由于某种原因不使用它。

显然动态链接器在 Android 上工作得很好（使用 LD_LIBRARY_PATH 并且它也没有不同的 RPATH）

我做错了什么？

我错过了一些明显的东西吗？

在我的示例中，RPATH 有两个目录 (.:/data/data/testlib/lib)，一个 (.) 就足够了。

此示例中没有 Java。该项目不使用它，也不需要它。

基本上，我正在寻找一种**从“我的目录”加载共享库的标准方法，**而无需更改 LD_LIBRARY_PATH （有时这是不可能的）或使用包装器来 dlopen 所有必需的库。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-30T00:17:36.980

仿生链接器加载程序（AOSP 源代码中的 android/bionic/linker/linker.c，如果您想检查）似乎完全忽略了 ELF 中的 RPATH。它只考虑 LD_LIBRARY_PATH 和“/vendor/lib”和“/system/lib”的硬编码数组。

这是基于对我检查过的冰淇淋三明治树上的代码的粗略扫描。

这将解释您所看到的行为。

# objective-c - UIWebView 委托在 didFinish Handler 中间释放

> ID：12632763
> 
> 赞同：0
> 
> 时间：2012-09-28T02:23:06.487
> 
> 标签：objective-c, ios, uiwebview

我的 UIViewController 在委托回调的中间被释放。这是发生的事情：

1.  `UIWebView`开始加载
2.  用户按下取消
3.  `UIWebView`开始滑出
4.  请求完成，调用`didFinish`处理程序
5.  **在处理程序**的中间**`didFinish`（就像在两行代码之间）视图控制器运行 dealloc**
***   一切都被解除分配，委托被清除，网络请求停止*   处理程序以解除分配状态恢复，导致 BAD_ACCESS 异常**

 **我已经检查过 - 一切都在主线程上运行。

**如何确保在处理程序中间不调用 dealloc？**

*附带问题 - 这对所有代表来说都不是问题吗？这让我很害怕。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T03:18:48.710

> 如何确保在处理程序中间不调用 dealloc？

不要在回调中间释放它。我猜你正在设置`self.myWebView = nil`，它释放引用（除非它被声明`assign`），如果这是它的生命周期的结束，即将下降`retainCount`到 0，它会在回调中间立即释放。您可以通过`retain`在方法的开头（或至少在您将其设为 nil 之前）和`autorelease`在从回调返回之前 ing 来解决此问题。自动释放将等到回调完成后再处理释放。或者，您可以不将该属性设置为 nil，直到稍后您知道它是安全的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T03:26:29.590

在发布之前检查您的 webview 是否为零。

```
if(_webView !=nil){
  if (_webView.isLoading) {
    [_webView stopLoading];
  }
    [_webView removeFromSuperview];
    _webView.delegate = nil;
    [_webView release];
    _webView = nil;
} 
```**

# python - 从刷新和未刷新的缓冲区中读取

> ID：12632767
> 
> 赞同：1
> 
> 时间：2012-09-28T02:23:47.407
> 
> 标签：python, c, shell, ipc

我有一个脚本`parent.py`试图从`sub.py`Python 的子进程中读取标准输出。

家长`parent.py`：

```
#!/usr/bin/python
import subprocess
p = subprocess.Popen("sub.py", stdout=subprocess.PIPE)
print p.stdout.read(1) 
```

和子进程`sub.py`：

```
#!/usr/bin/python
print raw_input( "hello world!" ) 
```

我希望运行`parent.py`从“hello world！”打印“h”。实际上，它挂了。我只能通过添加`-u`到`sub.py`'s she-bang 行来获得我的预期行为。

这让我感到困惑，因为当直接从 shell 运行`-u`时，开关没有区别。`sub.py`与`parent.py`.

我的目标是将 C 程序作为子进程运行，因此我将无法控制它是否刷新标准输出。为什么 shell 比从 运行相同的东西的 Python 可以更好地访问进程的标准输出`subprocess.Popen`？我是否能够从不刷新其缓冲区的 C 程序中读取这样的标准输出流？

**编辑：**

这是基于 korylprince 评论的更新示例...

```
## capitalize.sh ##
#!/bin/sh

while [ 1 ]; do
    read s
    echo $s | tr '[:lower:]' '[:upper:]'
done

########################################

## parent.py ##
#!/usr/bin/python 
from subprocess import Popen, PIPE

# cmd = [ 'capitalize.sh' ] # This would work
cmd = [ 'script', '-q', '-f', '-c', 'capitalize.sh', '/dev/null']

p = Popen(cmd, stdin=PIPE)
p.stdin.write("some string\n")
p.wait() 
```

运行时`script`，我会稳定打印换行符（如果这是一个 Python 子进程，它会引发 EOFerror）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T02:33:43.160

另一种选择是

```
p = subprocess.Popen(["python", "-u", "sub.py"], stdout=subprocess.PIPE) 
```

或[这里](https://stackoverflow.com/questions/107705/python-output-buffering)的建议。

我的经验是，是的，您无需任何额外的努力就可以阅读大多数 C 程序。

Python 解释器需要额外的步骤来缓冲其输出，这就是它需要`-u`开关来禁用输出缓冲的原因。您的典型 C 程序不会这样做。

除了我期望工作并且不在子shell中的Python解释器之外，我没有遇到任何程序（C或其他）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T15:33:18.897

无论“-u”如何，shell 都可以立即读取输出的原因是因为您从 shell 启动的程序的输出连接到 TTY。当 stdout 连接到 TTY 时，它是无缓冲的（因为它由 TTY 来缓冲）。当你从 python 中启动 python 子进程时，你正在将 stdout 连接到一个管道，这意味着你可以在子进程想要的时候刷新它的输出。

如果您希望与子流程进行复杂的交互，请查看[本教程。](http://amoffat.github.com/sh/tutorials/2-interacting_with_processes.html)

# asp.net-mvc - 合并部分视图的输出

> ID：12632770
> 
> 赞同：1
> 
> 时间：2012-09-28T02:24:03.660
> 
> 标签：asp.net-mvc

我有部分视图，它采用客户对象并呈现 html。对于客户列表，如何在服务器端合并部分视图的输出，类似于在视图中使用渲染部分和 foreach 循环。

```
//how to write action method for below
foreach(var item in customerslist)
{
 //get html by calling the parview
 outputhtml += //output from new _partialviewCustomer(item);
}

return outputhtml; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T06:23:23.583

您可以使用以下扩展方法将部分呈现为字符串：

```
public static class HtmlExtensions
{
    public static string RenderPartialViewToString(this ControllerContext context, string viewName, object model)
    {
        if (string.IsNullOrEmpty(viewName))
        {
            viewName = context.RouteData.GetRequiredString("action");
        }

        context.Controller.ViewData.Model = model;

        using (var sw = new StringWriter())
        {
            var viewResult = ViewEngines.Engines.FindPartialView(context, viewName);
            var viewContext = new ViewContext(context, viewResult.View, context.Controller.ViewData, context.Controller.TempData, sw);
            viewResult.View.Render(viewContext, sw);

            return sw.GetStringBuilder().ToString();
        }
    }
} 
```

进而：

```
foreach(var item in customerslist)
{
 //get html by calling the parview
 outputhtml += ControllerContext.RenderPartialViewToString("~/Views/SomeController/_Customer.cshtml", item)
}

return outputhtml; 
```

# mysql - SQLite 多行导出

> ID：12632773
> 
> 赞同：2
> 
> 时间：2012-09-28T02:24:42.913
> 
> 标签：mysql, sqlite, dump

我将 SQLite 数据库转储到 .sql 文件中。但是，大约有 800 个插入，并且导入它需要很长时间。就像一两​​分钟。

有没有办法用多行插入转储数据，以便导入更快，类似于 mysql 扩展插入？

我必须使用 Windows sqlite3.exe 命令工具。

或者我需要一个更快的导入命令`sqlite3.exe db.dat < file.sql`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T02:47:18.937

编辑导出的 sql.file 并将 sql insert 语句包装到单个事务中。

开始

...（插入）...

犯罪

有关更多信息，请参阅[http://www.sqlite.org/faq.html#q19](http://www.sqlite.org/faq.html#q19)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T02:46:31.013

800插不是很多，两分钟听起来很多。

但是，SQLite 中慢速插入的最常见问题是您没有将它们包装在事务中，以便为每个插入生成隐式事务。这将 SQlite 从每秒可能 50,000 次插入减慢到每秒“几十次”。请参阅[此常见问题解答](http://www.sqlite.org/faq.html#q19)。

要解决此问题，请在 .sql 文件的开头添加 BEGIN 并在末尾添加 COMMIT。

# ios - IOS：AsyncSocket——readData方法的调用机制

> ID：12632774
> 
> 赞同：0
> 
> 时间：2012-09-28T02:24:49.513
> 
> 标签：ios, invoke, asyncsocket

事情是这样的：

我使用 AsyncSocket 连接服务器。当服务器向客户端发送一些字节时`at a time`，应用程序将调用 ( `onSocket: didReadData: withTag:`) 方法；有时，由于网络或其他原因，一些字节到达，其余字节稍后到达（这意味着一些字节被延迟）。（timeOut = -1）

====================================

`onSocket: didReadData: withTag:`问题：method( ) 调用了多少次？

1）只有一次——它会自动等待直到字节完成？</p>

2）2次或更多次-一些到达（调用），另一些到达（调用）、、、、、像这样？

====================================

哪些想法是正确的？请给我一些建议。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T06:23:05.877

好吧，也许就是这样。

在 TCP 上传输数据：当您一次发送 1000 个字节时，由于延迟或其他原因，您可能会先收到 900 个字节，但 TCP 套接字会自动等待剩下的 100 个字节。因此，如果我使用 asyncSocket 传输数据并设置超时，在这几秒钟内，我不需要处理滞后数据。

==========================

**编辑**

也许这个问题的标题不合适，没有人关心这个问题。

我改用了方法`-readDataToLength:`，先读取header.length的数据，解析，再读取body.length的数据；

# svm - Rapidminer 中的 Libsvm 模块

> ID：12632775
> 
> 赞同：1
> 
> 时间：2012-09-28T02:24:58.433
> 
> 标签：svm, libsvm, rapidminer

Rapidminer 有一个基于 libsvm 的 SVM 模块。我如何知道它使用的是哪个版本的 libsvm？

我使用 Rapidminer 中的 libsvm 模块和 Libsvm 本身针对相同的数据集测试了 SVM 分类器，即使它们使用相同的参数设置，得到的预测分数也不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-18T19:58:54.023

只需检查文件 CHANGES.txt（例如 RM_HOME/CHANGES.txt）中的 RapidMiner 根目录：

...

*   完全修订的树、聚类模型和相似性可视化

*   **最新版本的 LibSVM 集成 (2.84)**

*   最新版本的 xstream 集成 (1.2.2)

...

# java - 设置相交打印错误

> ID：12632783
> 
> 赞同：0
> 
> 时间：2012-09-28T02:25:38.807
> 
> 标签：java, printing, set

我正在尝试为自己构建一个 Set，仅使用 intersect、union 和 print 作为方法。

我的测试代码是

```
public static void main(String[] args)
{
    double[] a = {1,2,3,4,101.9};
    double[] b = {3,7,13,901,-29.1,0.0001};

    NumSet test;
    test = new NumSet(a);
    test.intersect(a, b);
    System.out.println("tried intersect [1,2,3,101.9], [3,7,13,901,-28.8,0.001]");
    test.print();
    System.out.println("tried test.print()");
    test.union(a,b);
    System.out.println("tried union [1,3,3,5,7,9], [3,5,7,13]");
} 
```

这给了我一个

```
tried intersect [1,2,3,101.9], [3,7,13,901,-28.8,0.001]
0.0,0.0,0.0,out of bounds 4 >= 4 or 4 < 0 
0.0tried test.print()
tried union [1,3,3,5,7,9], [3,5,7,13] 
```

这很奇怪，因为我的打印与打印第二个这样的句子无关。

```
public void print() 
{
    for (int i = 0; i < set.size() - 1; i++)
    {
        System.out.print(set.lookup(i) + ",");

    }
    System.out.print(set.lookup(set.size()));
} 
```

这是我的打印方法。并且由于该课程正在扩展另一个课程，

```
public class NumSet extends NumArrayList
{
NumList set;

    public NumSet(double[] sth)
    {
        set = new NumArrayList();
        for (int i = 0; i < sth.length; i++)
        {
            set.insert(i, sth[i]);

        }
        set.removeDuplicates();
    }

int numSet = 0;

public NumList intersect(double[] S1, double[] S2)
{
    for (int i = 0; i < S1.length; i++)
    {
        for(int j = 0; j < S2.length; j++)
        {
            if (S1[i] == S2[j])
                {
                set.insert(numSet, S1[i]);
                numSet++;           
                }
        }
    }

    set.removeDuplicates(); 
    return set;

}

public NumList union(double[] S1, double[] S2)
{
    for (int i = 0; i < S1.length; i++)
    {
        set.insert(1, S1[i]);
    }

    for (int i = 0; i < S2.length; i++)
    {
        set.insert(1, S2[i]); 
    }
    set.removeDuplicates();
    return set;
} 
```

我去那里检查了打印方法。

```
public void print()
{
    for (int i = 0; i < numItems - 1; i++)
    {
        System.out.println(items[i]+ ",");
    }
    System.out.println(items[numItems-1]);

} 
```

这让我傻眼了，为什么我的错误信息是这样的。

我的印刷品是指在哪里得到如此奇怪的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T02:00:18.490

您在`-1`上一条`print`语句中缺少 a ：

```
System.out.print(set.lookup(set.size())); 
```

应该：

```
System.out.print(set.lookup(set.size() - 1)); 
```

请记住，`lookup`索引是从零开始的，因此使用`set.size()`确实超出了界限。

# php - Htmlentities issue with form display

> ID：12632788
> 
> 赞同：0
> 
> 时间：2012-09-28T02:26:06.873
> 
> 标签：php

I am pulling data from a table in my database and inserting it into a form - therefore I can edit it and save it back to the table.

My current problem is my data in the table has HTML characters like

```
<br /><br /> 
```

which as we all know are line breaks - I don't want them to display like html characters though... In the textarea where I have outputted them to I would like them to just display as line breaks within the text area...

I have tried using htmlentities and htmlspecialchars with no luck.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T02:48:53.837

如果您只想转换换行符，请使用 phps nl2br() 函数。

让 textarea 呈现 html 标记的方法：这行不通。它根本不受支持。textarea 标签支持文本，而不是标记。那是不同的东西。您要么必须坚持使用纯文本，要么使用基于 js 的所见即所得编辑器之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T02:49:11.543

我想你知道如何从 mysql 表中获取这些数据，所以我将跳过它，只需添加以下内容：-

```
<textarea cols="20" rows="20" >
<?
echo "$name\n\n";
echo "$age";
?>
</textarea> 
```

# sql - 创建基本 sql 表时出错

> ID：12632790
> 
> 赞同：3
> 
> 时间：2012-09-28T02:26:27.557
> 
> 标签：sql

这是我用来创建表的代码：

```
CREATE TABLE product
(
ProductID int NOT NULL PRIMARY KEY,
ProductName varchar (50) NOT NULL,
Brand varchar (50) NOT NULL,
Price money NOT NULL,
Quantity int NOT NULL,
DateAdded date NOT NULL
) 
```

这是我要插入的内容：

```
INSERT INTO product
VALUE (100, 'Radio', 'Sony', 29.99, 30, '2012-08-22') 
```

我得到的错误是：

```
"Incorrect syntax near 'VALUE'." 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T02:28:00.263

它是`VALUES`而不是`VALUE`：

```
INSERT INTO product VALUES (100, 'Radio', 'Sony', 29.99, 30, '2012-08-22') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T02:28:36.697

`VALUES`在您的查询中使用，

```
INSERT INTO product 
VALUES (100, 'Radio', 'Sony', 29.99, 30, '2012-08-22') 
```

# jquery - jquery 如果每个为真

> ID：12632791
> 
> 赞同：0
> 
> 时间：2012-09-28T02:26:38.463
> 
> 标签：jquery, validation, if-statement, each

因此，在一个表格中，我有多项选择，因此我需要验证一系列答案。我对代码的尝试是这样的，但它只是返回未定义“i”（来自 .each() 行）：

```
function validTextAnswers(i, answer){
    var answer = $j(this) 
    // ^ may not be needed, but I was using it 
    // when I was not passing arguements
    if( (answer.val()=="") || (textAnswers.val()==null )){
        alert('Note: Please fill in all answers.'),
        answer.focus()
        return false;
    } 
    return true;
}

function validQuizCreate(){
    var course = $j('#course-selection .selected')
    var question = $j('textarea[name="question"]')
    var textAnswers = $j('div.answer:visible').children('input[type="text"]');

    if( (question.val()=="") || (question.val()==null) ){
        alert('You have to supply a question.'),
        question.focus()
        return false;
    }

if( !textAnswers.each(validTextAnswers(i, answer)) ){
    console.log('all seems good!')
    return false
} 
```

我已经玩了很多代码，只是当我这样做时它只是破坏了 jQuery。（注：假设 $j 为 $，这是为了避免与网站另一部分的原型发生冲突。）

**解决方案**：

```
// jQuery filter() can be used for this:
var validTextAnswers = textAnswers.filter(function(){
        return this.value != '';
    }).length == '4'; // four because the test is A though D.

// If all 4 multiple choice answers are not empty, it returns true.

// so to use it I can say:
    if(!validTextAnswers){
        alert('Please fill in all multiple choice options.')
        return false;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T02:32:22.450

`each`返回一个 jQuery 对象，它总是一个“真实的”值。

您可以使用`filter`：

```
var isValid = textAnswers.filter(function() {
    return this.value == "invalild"
}).length > 0;

if (!isValid) {
    alert('PROBLEM!!!');
}​ 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-09-28T02:29:20.867

`each`接受一个函数参数，您正在调用该函数并传递其返回值。

请参阅[jQuery 文档](http://api.jquery.com/each/)以`each()`了解正确用法。

# regex - Using perl Regular expressions I want to make sure a number comes in order

> ID：12632793
> 
> 赞同：0
> 
> 时间：2012-09-28T02:27:25.607
> 
> 标签：regex, perl

I want to use a regular expression to check a string to make sure 4 and 5 are in order. I thought I could do this by doing

```
'$string =~ m/.45./' 
```

I think I am going wrong somewhere. I am very new to Perl. I would honestly like to put it in an array and search through it and find out that way, but I'm assuming there is a much easier way to do it with regex.

```
print "input please:\n";
$input = <STDIN>;
chop($input);
if ($input =~ m/45/ and $input =~ m/5./) {
    print "works";
}
else {
    print "nata";
} 
```

EDIT: Added Info I just want 4 and 5 in order, but if 5 comes before at all say 322195458900023 is the number then where 545 is a problem 5 always have to come right after 4.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T02:46:31.607

假设您要匹配包含两位数字且第一位小于第二位的任何字符串：

有一个晦涩的功能称为“延迟正则表达式”。我们可以在正则表达式中包含代码

```
(??{CODE}) 
```

并且该代码的值被插入到正则表达式中。

特殊*动词* `(*FAIL)`确保匹配失败（实际上只有当前分支）。我们可以将其组合成以下单行：

```
perl -ne'print /(\d)(\d)(??{$1<$2 ? "" : "(*FAIL)"})/ ? "yes\n" :"no\n"' 
```

`yes`当当前行包含两位数字且第一位数字小于第二位数字时打印，`no`如果不是这种情况。

正则表达式解释：

```
m{
   (\d)   # match a number, save it in $1
   (\d)   # match another number, save it in $2
   (??{   # start postponed regex
      $1 < $2      # if $1 is smaller than $2
      ? ""         # then return the empty string (i.e. succeed)
      : "(*FAIL)"  # else return the *FAIL verb
   })     # close postponed regex
}x;       # /x modifier so I could use spaces and comments 
```

但是，这有点高级和自虐；使用数组（1）更容易理解，（2）无论如何可能更好。但是仍然可以只使用正则表达式。

* * *

### 编辑

这是一种确保 no`5`后跟 a 的方法`4`：

```
/^(?:[^5]+|5(?=[^4]|$))*$/ 
```

这读作： 字符串由任意数量（零个或多个）字符组成，这些字符*不是*5，或者 5 后跟一个不是 4 的字符，或者 5 是字符串的结尾。

这个正则表达式也是一种可能性：

```
/^(?:[^45]+|45)*$/ 
```

它允许字符串中不是`4`or`5`或序列的任何字符`45`。即，不允许使用单个`4`s 或`5`s。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T05:49:33.563

您只需要匹配所有 5 个并且搜索失败，其中前面不是 4：

```
if( $str =~ /(?<!4)5/ ) {
    #Fail
} 
```

# webview - Ice Cream Sandwich build-in FIND feature does not highlight text in WebView

> ID：12632796
> 
> 赞同：1
> 
> 时间：2012-09-28T02:28:01.567
> 
> 标签：webview, android-4.0-ice-cream-sandwich, textselection

To reproduce the problem do following steps in any Ice Cream Sandwich Android device:

1.  Create simple app with the only activity. Put `WebView` into activity layout and load any page inside `WebView`.

2.  Hold touch over text inside WebView until top "context" panel appears. Press "Find".

3.  You will NOT see highlighting inside `WebView`.

Do the same with any other app, which is NOT using WebView or with browser app and highlighting will appear correctly.

# java - Java does not recognize Comparator Interface

> ID：12632798
> 
> 赞同：-4
> 
> 时间：2012-09-28T02:28:23.097
> 
> 标签：java

Simply put, i have a Person class and I wish to implement the Comparator Interface. Whenever I do so, my compiler throws an error saying it cannot find that class. Why does this happen?

```
public class Person implements Comparator
{
    private final String firstName;
    private final String lastName;
    private int age;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T02:32:08.990

不要`Comparator`在这里使用，而是让你的类实现`Comparable<Person>`。您可以将 Comparator 用于单独的“帮助器”类，而不是用于数据类本身。如果您的 Person 类有一个字段可用于按“自然”顺序对其进行排序，那么您将执行此操作。另外，不要忘记为类提供接口规定的必要方法。您可能会收到错误，因为您还没有这样做，但是在我们看到错误消息之前，我们只能猜测。

# javascript - Inspecting Server-Sent Events

> ID：12632806
> 
> 赞同：2
> 
> 时间：2012-09-28T02:29:17.040
> 
> 标签：javascript, server-sent-events

What is the best way to inspect Server-Sent Events when the browser receives them. I've only seen implementations where you simply do `console.log(e)`, but that assumes your data is correct.

Is there a way to look at Server-Sent Events as you do with a 'View Source' type of inspection without using console.log?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T00:57:40.273

如果您想观看未经解析的原始数据，您可以使用 curl 连接到服务器发送事件流。

```
curl --no-buffer http://my.app/event_stream/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T21:24:29.660

[Firebug](http://www.getfirebug.com)将记录所有发送的事件并使其可实时检查。

# c# - constant string Alternative working with helper classes

> ID：12632810
> 
> 赞同：0
> 
> 时间：2012-09-28T02:29:44.230
> 
> 标签：c#, asp.net, string, class

When working with `switch` `case`, for example I could use

```
const string FirstFloor = "lvl1", SecondFloor = "lvl2", ThirdFloor = "lvl3"; 

string ElavaetTo= "lvl1";

switch(ElavaetTo)
{
  case FirstFloor:
  Response.Redirect(FirstFloor + "Page.aspx")
  break;

  case SecondFloor:
  Response.Redirect(SecondFloor + "Page.aspx")
  break;

  case ThirdFloor:
  Response.Redirect(ThirdFloor + "Page.aspx")
  break;       
} 
```

*   Edited :

this is only an example of where constant string wil not work if placed in another class this is not a function / method i am trying to correct so it will work. thanks for your time, i am trying to base my methods , my approach...

This **would** work fine placed in the current or same class of the project but when all variables are stored outside this class instead of simply instantiating the class and methods only once :

`fullClassName shrtNm = New fullClassName();`

then you would like to call it as with

`shrtNm.MethodName();`

You need to go the 'Long way around' specially if not including the Namespace via `using` statement

and you would have to call it like:

```
string strnm = MyNameOfNameSpace.fullClassName.ConstantntStrName; 
```

instead of:

```
string strnm = shrtNm.ConstantStrName; 
```

Is there an alternative to using any type that will represent string values inside the IntelliSense in an easy way ?

I have tried to use

```
public enum Elavation
{
    lvl1,
    lvl2,
    lvl3
} 
```

but then you need to declare it as in the long example plus a `.ToString()`

Is there any alternative at all?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T02:43:40.360

不是将变量声明为“const”，而是厌倦了将它们声明为“readonly”？这将使您能够仅将类实例化一次：

```
fullClassName shrtNm = New FullClassName(); 
```

那么您想将其称为

```
shrtNm.<VariableName>; 
```

从您列举的用例中猜测，我怀疑使用 const 和 readonly 之间的区别应该很重要......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T18:36:19.940

据我所知（只是因为添加方法对我来说很重要）我在[codeProjec 页面](http://www.codeproject.com/Articles/11130/String-Enumerations-in-C)中找到了一个关于使用字符串和字符串枚举的示例

这导致我使用这种方法，然后将我的课程变成静态课程

```
 public static class Qs
    {
        public sealed class Act
        {
            //private Act();
            public const string edit = "edit", add = "add", remove = "remove", replace = "replace";

        }
       public sealed class State
        {
           public const string addnewTableRow = "addnewTableRow", cancelInsert = "cancelInsert", loadpagefromlink="loadpagefromlink";
        }
       public sealed class Params
        {
             public const string state = "state";
             public const string custID = "custID";
             public const string recordID = "recordID";
        } 
```

}

使用`sealed class`通过其父 className.Itsname 访问它，例如

```
Qs.Act.edit 
```

编辑将在 IntelliSense 中显示

# cloud-foundry - Does it possible to deploying a none-web application on Cloud Foundry?

> ID：12632813
> 
> 赞同：1
> 
> 时间：2012-09-28T02:29:55.140
> 
> 标签：cloud-foundry

plz tell me... I want to deploy a pure java code like jar file, NOT web application, on Cloud Foundry. is it possible or not?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T08:14:46.717

是的。这称为“独立应用程序”，并在此处进行了描述：http: [//blog.cloudfoundry.com/2012/05/01/cloud-foundry-improves-support-for-background-processing/](http://blog.cloudfoundry.com/2012/05/01/cloud-foundry-improves-support-for-background-processing/)

只需在部署时选择那种框架。您需要为您的应用程序提供启动脚本，即生成 java 的命令

# html - Forcing browser to reload the history URLs when going back

> ID：12632816
> 
> 赞同：1
> 
> 时间：2012-09-28T02:30:40.460
> 
> 标签：html, browser-history

Is there a method of forcing browser to refresh what URLs to load while going back in the browser history?

In a nutshell: There is a (slow) item search. On top of this item search there are additional AJAX filters that replace the item results of this search (it's another item search with extra parameters in the URL). There is a multiple of those filters that can be applied to a search. Eventually the user clicks on an item they're interested in or adds it to the cart or whatever other action.

By default, if they click back in the browser, it will load the initial search without the additional AJAX filters applied. That's understandable.

To have a proper back behaviour, I've used the [jQuery.history.js](https://github.com/balupton/History.js) plugin. I can see very nicely the URLs in the address bar change properly, but it never "reloads" that URL, instead, it tries to force loading previous page and AJAXing the rest. At least that's my understanding.

So even though the address bar will show a correct search link, on which if I were to press enter the correct results would load, but the browser never refreshes that link.

Now, I'm sure I could call the AJAX filters again if I had to, but I'm hoping there is a way of forcing a refresh when the person clicks back in their browser.

I'm not even sure if what I'm asking for is possible.

# java - How do I reverse the numbers in a string?

> ID：12632820
> 
> 赞同：-2
> 
> 时间：2012-09-28T02:31:27.473
> 
> 标签：java, string, reverse

For example, if I have a string that contains 5, 4, 3, 2, 1, how do i make it so that a new string or how to print out 1, 2, 3, 4, 5? Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T02:39:37.023

做这样的事情：

```
StringBuilder builder = new StringBuilder("3, 2, 1");

 System.out.println(builder.reverse()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T06:44:42.873

你可以这样做：

```
String values = "5, 4, 3, 2, 1";
values = values.replace(", ", " ,");
StringBuilder sb = new StringBuilder(values);
values = sb.reverse().toString();
System.out.println(values); 
```

输出是：

```
1, 2, 3, 4, 5 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T02:34:13.200

如果您可以使用内置方法，这是最短的解决方案：

```
String input = "12345";
String output = new StringBuilder(input).reverse().toString(); 
```

如果您需要实现自己的解决方案，这是使用 a`char[]`并仅迭代一半输入字符串的有效答案：

```
String input = "12345";
char[] chars = input.toCharArray();
for (int i = 0, n = chars.length; i < n/2; i++) {
    char tmp = chars[i];
    chars[i] = chars[n-i-1];
    chars[n-i-1] = tmp;
}
String output = new String(chars); 
```

无论哪种方式，输入将被反转：

```
System.out.println(output);
> 54321 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T02:35:04.980

将字符串转换为字符数组。从字符数组的长度 -1 循环到 0 索引一次打印每个字符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T02:36:48.033

请参阅有关[将](https://stackoverflow.com/questions/6096845/adding-comma-separated-strings-to-an-arraylist-and-visa-versa)逗号分隔的字符串解析为数组的问题。反转数组，然后看到关于将数组转回逗号分隔字符串的相同问题。

您也可以使用[这个](https://stackoverflow.com/questions/2988699/how-to-reverse-the-order-of-words-in-query-or-c-sharp)c# 代码作为示例，它应该很容易移植。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-28T02:39:30.147

如果您只对反转 感兴趣，而不`String`关心自然顺序，则可以执行类似的操作

```
String word = "1, 2, 3, 4, 5";
word = word.replace(", ", "");

StringBuilder s = new StringBuilder();
for (int i = 0; i <= word.length() - 1; i++) {
    char c = word.charAt(word.length() - i - 1);
    if (s.length() > 0) {
        s.append(", ");
    }
    s.append(c);
} 
```

哪个输出`5, 4, 3, 2, 1`

当然，如果你对保持数字的自然顺序感兴趣，它会变得有点复杂......

```
//String value = "1, 2, 3, 4, 5";
String value = "1, 5, 4, 3, 2";
System.out.println("Start with " + value);
String parts[] = value.split(", ");

// We need to convert the String values to ints
List<Integer> listOfValues = new ArrayList<Integer>(5);
for (String part : parts) {
    listOfValues.add(Integer.parseInt(part));
}
// Allow the API to sort them...
Collections.sort(listOfValues);

StringBuilder sb = new StringBuilder(value.length());
for (Integer part : listOfValues) {
    if (sb.length() > 0) {
        sb.append(", ");
    }
    sb.append(part);
}

System.out.println(sb);

System.out.println(s.toString()); 
```

哪个输出

```
Start with 1, 5, 4, 3, 2
1, 2, 3, 4, 5 
```

# windows-7-x64 - Another RMySQL Windows 7 install issue

> ID：12632822
> 
> 赞同：2
> 
> 时间：2012-09-28T02:31:39.100
> 
> 标签：windows-7-x64, rmysql

I am trying to install RMySQL on my Windows 7 Professional x64 machine using R-2.15.1, RTools 2.16 (also tried 2.15), and MySQL 5.5.

I have copied libmysql.dll and libmysql.lib into mysql\lib\opt and \bin. I have also copied libmysql.dll into R-2.15.1\bin.

I have set Renviron.site properly as confirmed by `Sys.getenv('MYSQL_HOME')` using both the 8.3 nomenclature as well as non-8.3 nomenclature.

Sample output for `Sys.getenv('MYSQL_HOME')` is `"C:/Program Files/MySQL/MySQL Server 5.5/"` (quotes included). When I use 8.3 nomenclature it also is correct.

Here is the relevant part of my PATH:

> c:\Rtools\bin;c:\Rtools\gcc-4.6.3\bin;C:\Program Files\MySQL\MySQL Server 5.5\lib\opt;c:\program file\R\R-2.15.1\bin;

I have manually inserted it into the registry in the right location (because the MySQL 5.5 doesn't do that properly - it only puts it under the Wow6432Node) AND I inserted it into the system variables to deal with this error:

> Error in utils::readRegistry("SOFTWARE\MySQL AB", hive = "HLM", maxdepth = 2) :Registry key 'SOFTWARE\MySQL AB' not found

I even tried

```
Sys.setenv('MYSQL_HOME=C:/Program Files/MySQL/MySQL Server 5.5/') 
```

However, when I try to install RMySQL I get the following error:

```
checking for $MYSQL_HOME... not found... searching registry...

cygwin warning:
  MS-DOS style path detected: C:/PROGRA~1/R/R-215~1.1/bin/x64/Rscript
  Preferred POSIX equivalent is: /cygdrive/c/PROGRA~1/R/R-215~1.1/bin/x64/Rscript
  CYGWIN environment variable option "nodosfilewarning" turns off this warning.
  Consult the user's guide for more details about POSIX paths:
  http://cygwin.com/cygwin-ug-net/using.html#using-pathnames
Try setting MYSQL_HOME to one of the following (you may have to use the non-8dot3 file name):

ERROR: configuration failed for package 'RMySQL' 
```

If I am understanding the error properly, it can't find `MYSQL_HOME`, even though it calls it properly using `Sys.getenv`, is located in the proper location in the registry, AND is a system variable.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-17T20:35:03.873

我的 Windows 7 x64 安装也有类似的问题。

我认为问题与 MYSQL_HOME 无关，而与注册表有关。正如您在这里看到的： [https](https://dev.mysql.com/doc/refman/5.1/en/windows-install-wizard.html) ://dev.mysql.com/doc/refman/5.1/en/windows-install-wizard.html 注册的默认位置不是 SOFTWARE\MySQL AB 而是 SOFTWARE\Wow6432Node\MYSQL AB .

我相信答案就在这里： [http ://martin.von-gagern.net/howtos/20110728-rmysql/](http://martin.von-gagern.net/howtos/20110728-rmysql/)

# ruby - 为什么我的循环不起作用？

> ID：12632823
> 
> 赞同：0
> 
> 时间：2012-09-28T02:31:45.667
> 
> 标签：ruby, loops

我无法让该程序正确响应用户输入。无论用户输入什么，各种循环技术要么只运行一次块，要么无限运行块（我也尝试过`case`）`while`。这是我尝试过的最新方法：

```
work_summary = []
begin
  # code that runs a sprint and adds results to the work_summary array
  puts "Would you like to add a sprint, Y/N?"
  sprint = gets.to_s
end until sprint == "N"
print work_summary, "\n" 
```

Ruby 从不反对我使用各种方法的语法，但它也永远不会起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T02:33:59.937

你需要

```
sprint = gets.chomp 
```

获取返回带有尾随“\n”的字符串。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T02:33:56.433

[http://web.njit.edu/all_topics/Prog_Lang_Docs/html/ruby/syntax.html#begin](http://web.njit.edu/all_topics/Prog_Lang_Docs/html/ruby/syntax.html#begin)

Begin 通常用于异常处理。我想你正在寻找一个`while`循环。

这是一个示例 work_summary = []

```
while true
  puts "Would you like to add a sprint?"
  sprint = gets.chomp
  if sprint == "N"
    break
  elsif sprint == "Y"
    puts "What's your time?"
    time = gets.chomp
    work_summary << time
  else
    puts "I didn't understand your request. Enter Y or N"
  end
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-28T06:25:43.107

我在这里找到了两种适合你的可能性

第一个是

```
while true
  puts "Would you like to add a sprint?"
  sprint = gets.chomp
  if sprint == "N"
    break
  elsif sprint == "Y"
    puts "What's your time?"
    time = gets.chomp
    work_summary << time
  else
    puts "Wrong request. Enter Y or N"
  end
end 
```

这里 Lopp 会一直运行到 break 不会被执行

第二件事，您可以在代码中修改 1 行，即

```
sprint = gets.chomp 
```

这将提取由gets生成的字符串的最后一个特殊字符，并在您的情况下正常工作

# string - how to efficiently check if the Levenshtein edit distance between two string is 1

> ID：12632825
> 
> 赞同：0
> 
> 时间：2012-09-28T02:31:52.840
> 
> 标签：string, algorithm, edit-distance

please note that it doesn't require to really calculate Levenshtein edit distance. just check it's 1 or not.

The signature of the method may look like this:

```
bool Is1EditDistance(string s1, string s2). 
```

for example: 1\. "abc" and "ab" return true 2\. "abc" and "aebc" return true 3\. "abc" and "a" return false.

I've tried recursive approve, but it it not efficient.

* * *

update: got answer from a friend:

```
 for (int i = 0; i < s1.Length && i < s2.Length; i++)
        {
            if (s1[i] != s2[i])
            {
                return s1.Substring(i + 1) == s2.Substring(i + 1)   //case of change
                    || s1.Substring(i + 1) == s2.Substring(i)       //case of s1 has extra
                    || s1.Substring(i) == s2.Substring(i + 1);      //case of s2 has extra
            }
        }
        return Math.Abs(s1.Length - s2.Length) == 1; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-28T02:58:11.837

如果您只关心距离是否恰好为 1，则可以执行以下操作：

*   如果字符串的长度之差不是 0 或 1，则返回 false。
*   如果两个字符串都有长度`n`，则循环`i = 0..n`检查除一个之外`s1[i] == s2[i]`的所有字符串。`i`
*   如果字符串有长度`n`和`n+1`，让`i`最小的索引 where `s1[i] != s2[i]`，然后循环`j=i..n`检查`s1[j] == s2[j+1]`所有`j`。

# ruby-on-rails - Rails：如何在没有新的 HTTP 请求的情况下在上传后立即加载图像？

> ID：12632828
> 
> 赞同：0
> 
> 时间：2012-09-28T02:32:03.703
> 
> 标签：ruby-on-rails

我目前正在尝试使用 RoR 创建一个站点，您可以在其中上传图片并在上传图片后将它们加载到底部，而无需转到新页面。有人可以指导我如何做到这一点吗？

这有没有可能？由于上传需要一个表单，这更像是一个“新”控制器动作，而显示上传的图像更像是一个“显示”控制器动作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T02:50:35.657

你必须用ajax来做到这一点。看看[这篇](http://www.alfajango.com/blog/rails-3-remote-links-and-forms/)关于如何在 rails 3 中创建远程表单的文章。

要显示上传的图片，您必须：

1.  让 rails 响应请求（比如说创建操作）并返回一个 json 对象，其中包含指向刚刚添加的图像的链接
2.  向 javascript 响应处理程序添加一些逻辑，以将从 rails 返回的图像附加到页面

解释所有细节对于一个答案来说有点太多了，但我认为这基本上是你必须做的事情的骨架。

# xcode - 升级到 Xcode 4.5 后，theos 项目出现错误“ld 以信号 6 终止”

> ID：12632831
> 
> 赞同：3
> 
> 时间：2012-09-28T02:32:21.997
> 
> 标签：xcode, jailbreak

我正在使用[https://github.com/DHowett/theos](https://github.com/DHowett/theos)对越狱的 iphone 进行调整。我关注了[http://brandontreb.com/beginning-jailbroken-ios-development-getting-the-tools/](http://brandontreb.com/beginning-jailbroken-ios-development-getting-the-tools/)一切正常。然后我将我的 Xcode 升级到 4.5。然后在编译任何调整项目时，甚至是一个 hello world 项目，它都失败并出现以下错误：

```
 Making all for tweak PreferenceLoader...
    Preprocessing Tweak.xm...
    Compiling Tweak.xm...
    Linking tweak PreferenceLoader...
    collect2: ld terminated with signal 6 [Abort trap: 6]
    ld(8724,0x7fff78fd2960) malloc: *** error for object 0x7f89b35003f0: pointer being freed was not allocated
    *** set a breakpoint in mallocerror_break to debug
    make[2]: *** [obj/PreferenceLoader.dylib] Error 1
    make[1]: *** [internal-library-all] Error 2
    make: *** [PreferenceLoader.all.tweak.variables] Error 2 
```

我找到了这个[http://iphonesdkdev.blogspot.jp/2012/06/how-to-install-thoes-under-xcode-44.html](http://iphonesdkdev.blogspot.jp/2012/06/how-to-install-thoes-under-xcode-44.html)，遵循了所有步骤，但仍然没有运气。

关于链接工具崩溃的任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T06:22:44.070

从[https://github.com/DHowett/theos/issues/39得到反馈](https://github.com/DHowett/theos/issues/39)

Xcode 4.5 附带了同一个链接器的两个不同版本。gcc（已弃用）使用的那个在 armv6 输出上崩溃，而 clang 使用的那个不能生成 armv6 输出。当前无法在面向低于 4.3 的 iOS 版本或任何 armv6 平台时使用 6.0 SDK。如果您愿意接受这一点，请将以下内容添加到您的 Makefile 顶部：

导出ARCHS=armv7 导出目标=iphone:latest:4.3

（来自 theiostream 的注释）或者，可以使用较旧的 SDK 并为架构和较旧的部署目标（从 3.0 开始）构建。只需强制它们（如果它们存在于您的 Xcode Developer 目录中），如下所示：

导出 ARCHS = armv6 armv7 导出目标 = iphone::

# objective-c - 获取 xcode 4.5 以警告新的 API 调用

> ID：12632834
> 
> 赞同：10
> 
> 时间：2012-09-28T02:32:51.487
> 
> 标签：objective-c, ios, xcode, warnings

[这个问题](https://stackoverflow.com/questions/4676000/is-there-a-way-for-xcode-to-warn-about-new-api-calls)的答案似乎不适用于 xcode 4.5。总而言之，XCode 是否有办法警告仅在部署目标之后的版本才可用的类、方法和过程？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-28T03:44:39.130

您链接的问题中也有正确答案。通过一些实验，我想出了这个（来自 mattjgalloway 的回答）：

```
#define __AVAILABILITY_TOO_NEW __attribute__((deprecated("TOO NEW!"))) __attribute__((weak_import))

#if __IPHONE_OS_VERSION_MIN_REQUIRED < __IPHONE_6_0
#undef __AVAILABILITY_INTERNAL__IPHONE_6_0
#define __AVAILABILITY_INTERNAL__IPHONE_6_0 __AVAILABILITY_TOO_NEW
#endif 
```

然后重复所有有意义的版本（即 Xcode 4.5 的 4.3 及更高版本）。宏将`__IPHONE_OS_VERSION_MIN_REQUIRED`检查部署目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-11T04:58:13.357

这个工具可以在你的项目中找到新的 API 调用：http: [//www.deploymateapp.com/](http://www.deploymateapp.com/)

# eclipse - ctrl+shift+f 时所有空格都被制表符替换

> ID：12632835
> 
> 赞同：5
> 
> 时间：2012-09-28T02:33:21.223
> 
> 标签：eclipse, jsp

在eclipse中工作，当我输入'tab'时，它会插入4个空格，效果很好。但是在ctrl + shift + f格式化后，所有4个空格都将被tabs替换。如何停止它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-08T10:33:25.430

当前唯一可行的方法是在使用**Ctrl-Shift-F**之后在所有代码上使用**Ctrl-A Ctrl-X Ctrl-V**。这将用空格替换所有选项卡。

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-17T17:23:09.747

Window->Preferences->Java->Code Style->Formatter: Edit Active profile->Indentation->Tab Policy: Select Spaces

您无法更改默认配置文件，因此您必须提供新的配置文件名称，然后按应用按钮，然后按确定按钮。返回格式化程序屏幕后，按应用按钮可能会有所帮助。返回并再次查看选项卡策略以验证您的更改是否已保存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T04:04:21.367

包括上述建议，我建议搜索代码样式或样式以获取与用户请求代码格式一起应用的编码标准。代码样式可能使用制表符而不是空格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T02:45:16.333

Preferences 中的位置可能会有所不同，具体取决于您使用的 Eclipse 版本。如果您加载首选项窗口，您可以使用那里的搜索功能来查找“格式化程序”并为不同类型的文件设置您的首选项，或者一般情况下。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T02:42:32.770

不知道您使用的是哪个版本的 Eclipse，但对于 Eclipse 3.6（例如），您可以访问

`Window->Preferences->General->Editors->Text Editors->Insert spaces for tabs`

这会将 Eclipse 更改为使用空格而不是制表符**

# forms - 在 playframework 上提交表单 POST 太慢了

> ID：12632842
> 
> 赞同：0
> 
> 时间：2012-09-28T02:33:52.423
> 
> 标签：forms, scala, playframework

在我使用 scala 2.9.1 开发的 play 2.0 应用程序中，当我使用 POST 提交表单时速度太慢，有时页面不显示。但是对于 GET 方法，它工作正常。

我的路线配置

```
POST    /login                      controllers.Application.login 
```

从 html 调用时

```
<form action="/login" method="POST"> 
```

页面不显示。

请建议我缺少什么

# google-maps-api-3 - GMAP3 - 来自外部 url 的谷歌地图 API3 触发标记点击事件

> ID：12632856
> 
> 赞同：1
> 
> 时间：2012-09-28T02:35:20.157
> 
> 标签：google-maps-api-3, jquery-gmap3

使用 GMAP3 Google Map API 3 类。无法完全弄清楚如何通过 javascript 从外部链接触发标记上的点击事件。我尝试了 v3 api 语法，但怀疑我遗漏了与 GMAP3 库相关的内容。有人可以帮我吗？

我正在显示一个地图，其中包含来自 ajax 请求的标记和信息框数据以及生成的 JSON 数组。效果很好。我为标记分配了一个点击事件，它工作正常。我正在使用解析相同的 JSON 数组来填充数据表`<a href="#" id="link" arid="X">Click Me</a>`

X 实际上是我在构建 JSON 数组时使用的递增标记计数器，因此它将从 0 开始并构建为代表我所有标记的任何值。我期望使用这个值来告诉 GMAP3 我想将点击事件传递给哪个标记......如果这个过程是错误的，那么我真的很困惑。

我的 JSON 数组对象存储在标记列表中并传递给下面的函数......效果很好，但我似乎无法从我的数据表链接触发这些点击......（请参阅下面的我的 jquery 代码以获取这些点击并尝试传递它们沿着地图）

我的地图代码是：

```
 function display( markerlist ) {

$("#map").gmap3({action:'clear'});

$("#map").gmap3(
{action: 'init',
options:{
center:true,
zoom:13,
mapTypeId: google.maps.MapTypeId.ROADMAP,
mapTypeControl: true,
mapTypeControlOptions: {
style: google.maps.MapTypeControlStyle.DROPDOWN_MENU
},
navigationControl: true,
scrollwheel: true,
streetViewControl: true
}
},
{action: 'addMarkers',
radius:100,
markers: markerlist,
clusters:{
maxZoom: 10,
// This style will be used for clusters with more than 0 markers
20: {
content: '<div class="cluster cluster-1">CLUSTER_COUNT</div>',
width: 53,
height: 52
},
// This style will be used for clusters with more than 20 markers
50: {
content: '<div class="cluster cluster-2">CLUSTER_COUNT</div>',
width: 56,
height: 55
},
// This style will be used for clusters with more than 50 markers
100: {
content: '<div class="cluster cluster-3">CLUSTER_COUNT</div>',
width: 66,
height: 65
}

},
marker: {
options: {

clickable: true
},
events:{
click: function(marker,event,data) {
$(this).gmap3({action: 'clear', name : 'infowindow'});
$(this).gmap3({action: 'addinfowindow', anchor: marker, options: { content:
'<div class="text"><strong><div style="color:navy;">' + data.itype + '</strong><br/><div id="address" snum="' + data.streetnum + '" snam="' + data.streetnam + '" styp="' + data.streettyp + '">'+ data.iaddress +'</div><br/>' + data.inum + '<br/>'+ data.datetime +'</div><hr>'+data.notes+'</div>'} })
}, 
mouseover: function(marker, event, data){
$(this).gmap3(
{ action:'clear', name:'overlay'},
{ action:'addOverlay',
latLng: marker.getPosition(),
content:    '<div class="infobulle">' +
'<div class="bg"></div>' +
'<div class="text">' + data.itype +'</div>' +
'</div>' +
'<div class="arrow"></div>',
offset: {
x:-46,
y:-73
}
});
},
mouseout: function(){
$(this).gmap3({action:'clear', name:'overlay'});
}

}, //end events
callback: function(result){
if (result){
//not doing anything with a callback at this time
} else {
alert('Bad callback...');
}
} //end callbacks
} // end marker

}
,{action:"autofit"} //end action

);

$("a#link").live('click',function(markerlist){ // this works and I can get my arid ok, but the trigger won't work
var arid = $(this).attr('arid');
google.maps.event.trigger(markerlist[arid], 'click');
return false;
});

}; 
```

任何帮助将不胜感激，并且肯定对其他人有用！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T08:22:26.013

我认为问题是markerlist不是全局变量，它是你`display`函数的本地变量？如果您在`click`事件处理程序中将标记列表写入控制台，您会得到什么？

# python - xlrd / xlutils 重新排序电子表格行

> ID：12632858
> 
> 赞同：1
> 
> 时间：2012-09-28T02:35:34.520
> 
> 标签：python

所以我有一个 excel 电子表格，它有一个我想要对电子表格进行排序的特定列。该列有 3 种不同的起始字母组合，B、C、E。我想按 B 排序，然后按 E 排序，然后是所有以 C 开头的行。我确实需要从列中对整个表进行排序

任何人都知道如何在 Python 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T03:02:01.467

将您的工作表读入行列表`lst`，您的特定列的列索引是`index`。

```
import xlrd
wb = xlrd.open_workbook('myworkbook.xls')
sh = wb.sheet_by_index(0)
lst = [sh.row(n) for n in xrange(sh.nrows)]
searchdict = dict(B=1, E=2, C=3)
lst.sort(key=lambda row: searchdict.get(row[index][0], 4)) 
```

最后`[0]`一行中的 访问字段的第一个字符，然后在字典中查找该字符。参数中的默认值 4`dict.get`将所有不合适的行放在新列表的末尾。没有详细测试，但应该让你明白。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T02:59:21.500

您可以使用诸如[如何对 xls 文件列进行排序并使用 python 将其写入具有整行的另一个文件之类的方法？](https://stackoverflow.com/questions/9125465/how-to-sort-xls-file-column-wise-and-write-it-to-another-file-with-entire-row-us)

在您的排序功能（键）中，我会做这样的事情（未经测试，添加错误检查）进行比较。如果你想实现 __gt__ 和 __lt__ ，那么它们与 > 切换到 < 基本相同。

```
 order = ['B','E','C'] #Set the order for the first letter here
    def gt( a, b ):

        if a[0] == b[0]:
          return a > b   #Same letter, use normal sorting
        else:
          return order.index(a[0]) > order.index(b[0])   #Sort using first letter 
```

注意：如果您的问题不是要求对第一个字母进行排序，那么请选择另一个答案。

# ruby - 使用 Ruby 遏制执行 HTTP PATCH

> ID：12632859
> 
> 赞同：0
> 
> 时间：2012-09-28T02:35:39.770
> 
> 标签：ruby, rest, curl, curb

我正在尝试使用遏制做一个 HTTP PATCH。查看代码，似乎没有为此公开的方法。有什么办法可以使用遏制来做补丁？如果没有，Ruby 中还有哪些其他库或方法可以完成此任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T08:02:44.933

支持最新版本 (v0.8.1) `PATCH`，即使它在`Curl::Easy`界面中未明确提供（请参阅参考资料`lib/curl/easy.rb`）。

[您可以在此处](https://github.com/taf2/curb/blob/master/lib/curl.rb#L32)找到快捷方法：

```
# see lib/curl.rb
module Curl
  # ...
  def self.patch(url, params={}, &block)
    http :PATCH, url, postalize(params), nil, &block
  end
  # ...
end 
```

有了它，您可以执行`PATCH`如下请求：

```
curl = Curl.patch("http://www.example.com/baz", {:foo => "bar"}) 
```

在引擎盖下，`PATCH`动词只是简单地传递给简单的接口，如下所示：

```
curl = Curl::Easy.new(url)

# `http` is a method implemented within the C extensions of curb
# see `ruby_curl_easy_perform_verb_str`. It allows to set the HTTP
# verb by calling `curl_easy_setopt(curl, CURLOPT_CUSTOMREQUEST, verb)`
# and perform the request right after
curl.http(:PATCH) 
```

# javascript - 如何在 sharepoint 2010 中使用 javascript 在连接的 listviewer Web 部件中获取所选项目

> ID：12632861
> 
> 赞同：1
> 
> 时间：2012-09-28T02:36:00.487
> 
> 标签：javascript, jquery, sharepoint-2010

我在页面上有一组连接的 Web 部件。基本上这些都是开箱即用的 webparts 并且是连接的。提供者和消费者在用户名字段 (donmain\userName) 上连接。因此，从提供者 Web 部件中选择一个值会更新所有消费者 Web 部件数据。

现在我的问题是，我想从 webpart 中获取所选项目，所选项目有一个“img”标签，其“alt”文本为“已选择”，因此基于此我想获取下一个元素的所选文本.

这是我的标记，我希望从标记中返回值“domain\test.officer”，因为它是所选项目。

```
 <TABLE id={2E5002B0-EDC3-4541-A0ED-2A81797B459C}-{F1162455-D63E-481D-B13C-C1A4A59E5A34} class=ms-listviewtable border=0 cellSpacing=0 summary="Trainee " cellPadding=1 width="100%" xmlns:o="urn:schemas-microsoft-com:office:office" o:WebQuerySourceHref="http://test.app.domain.net/test/_vti_bin/owssvr.dll?CS=65001&amp;XMLDATA=1&amp;RowLimit=0&amp;View={F1162455-D63E-481D-B13C-C1A4A59E5A34}" handleDeleteInit="true"><TBODY>
            <TR class="ms-viewheadertr ms-vhltr" vAlign=top>
            <TH class=ms-vh-icon scope=col><INPUT class=s4-selectAllCbx title="Select or deselect all items" onclick=ToggleAllItems(event,this,159) value="" type=checkbox></TH>
            <TH class=ms-vh2 onmouseover=OnChildColumn(this) scope=col noWrap>
            <DIV class=ms-vh-div name="SelectTitle" SortFields="View={f1162455-d63e-481d-b13c-c1a4a59e5a34}&amp;SortField=SelectTitle&amp;SortDir=Asc" ResultType="" FieldType="Computed" DisplayName="Select" CTXNum="159" FilterDisableMessage="" Filterable="FALSE" FilterDisable="" SortDisable="" Sortable="FALSE">Select</DIV></TH>
            <TH class=ms-vh-icon onmouseover=OnChildColumn(this) scope=col noWrap>
            <DIV class=ms-vh-div name="Attachments" SortFields="View={f1162455-d63e-481d-b13c-c1a4a59e5a34}&amp;SortField=Attachments&amp;SortDir=Asc" ResultType="" FieldType="Attachments" DisplayName="Attachments" CTXNum="159" FilterDisableMessage="" Filterable="" FilterDisable="" SortDisable="" Sortable=""><A id=diidSortAttachments onfocus=OnFocusFilter(this) onclick="javascript:return OnClickFilter(this,event);" href="javascript: " SortingFields="View={f1162455-d63e-481d-b13c-c1a4a59e5a34}&amp;SortField=Attachments&amp;SortDir=Asc"><IMG border=0 src="/_layouts/images/attachhd.gif"><IMG class=ms-hidden border=0 alt="Use SHIFT+ENTER to open the menu (new window)." src="/_layouts/images/blank.gif" width=1 height=1></A><IMG border=0 alt="" src="/_layouts/images/blank.gif"><IMG border=0 alt="" src="/_layouts/images/blank.gif"></DIV>
            <DIV class=s4-ctx><SPAN>&nbsp;</SPAN><A onfocus="OnChildColumn(this.parentNode.parentNode); return false;" title="Open Menu" onclick="PopMenuFromChevron(event); return false;" href="javascript:;"></A><SPAN>&nbsp;</SPAN></DIV></TH>
            <TH class=ms-vh2 onmouseover=OnChildColumn(this) scope=col noWrap>
            <DIV class=ms-vh-div name="LinkTitle" SortFields="View={f1162455-d63e-481d-b13c-c1a4a59e5a34}&amp;SortField=LinkTitle&amp;SortDir=Asc" ResultType="" FieldType="Computed" DisplayName="Title" CTXNum="159" FilterDisableMessage="" Filterable="" FilterDisable="" SortDisable="" Sortable=""><A id=diidSortLinkTitle onfocus=OnFocusFilter(this) onclick="javascript:return OnClickFilter(this,event);" href="javascript: " SortingFields="View={f1162455-d63e-481d-b13c-c1a4a59e5a34}&amp;SortField=LinkTitle&amp;SortDir=Asc">Title<IMG class=ms-hidden border=0 alt="Use SHIFT+ENTER to open the menu (new window)." src="/_layouts/images/blank.gif" width=1 height=1></A><IMG border=0 alt="" src="/_layouts/images/blank.gif"><IMG border=0 alt="" src="/_layouts/images/blank.gif"></DIV>
            <DIV class=s4-ctx><SPAN>&nbsp;</SPAN><A onfocus="OnChildColumn(this.parentNode.parentNode); return false;" title="Open Menu" onclick="PopMenuFromChevron(event); return false;" href="javascript:;"></A><SPAN>&nbsp;</SPAN></DIV></TH></TR>
            <TR class=ms-itmhover iid="159,9,0" setEdgeBorder="true">
            <TD class="ms-vb-itmcbx ms-vb-firstCell"><INPUT class=s4-itm-cbx title="domain\test.user1&#13;&#10;  " value="" type=checkbox _setup="true"></TD>
            <TD class=ms-vb2><IMG style="CURSOR: hand" border=0 alt=Selected align=absMiddle src="/_layouts/images/rbsel.gif"></TD>
            <TD class=ms-vb2></TD>
            <TD class="ms-vb-title ms-vb-lastCell" onmouseover=OnChildItem(this) height="100%">
            <DIV id=9 class="ms-vb itx" onmouseover=OnItem(this) EventType="" Perm="0x7fffffffffffffff" Field="LinkTitle" CTXName="ctx159"><A onfocus=OnLink(this) onclick="EditLink2(this,159);return false;" href="http://test.app.domain.net/test/_layouts/listform.aspx?PageType=4&amp;ListId={2E5002B0-EDC3-4541-A0ED-2A81797B459C}&amp;ID=9&amp;ContentTypeID=0x0100801F054C4E00C243A9A49EC13FF778D7003293EF8DE37E144BAA8A5296D5E6CA8B" target=_self>domain\test.user1</A><IMG class=ms-newgif title=New alt=New src="/_layouts/1033/images/new.gif"></DIV>
            <DIV class=s4-ctx onmouseover="OnChildItem(this.parentNode); return false;"><SPAN>&nbsp;</SPAN><A onfocus="OnChildItem(this.parentNode.parentNode); return false;" title="Open Menu" onclick="PopMenuFromChevron(event); return false;" href="javascript:;"></A><SPAN>&nbsp;</SPAN></DIV></TD></TR>
            <TR class="ms-alternating ms-itmhover" iid="159,8,0" setEdgeBorder="true">
            <TD class="ms-vb-itmcbx ms-vb-firstCell"><INPUT class=s4-itm-cbx title="domain\test.officer&#13;&#10;  " value="" type=checkbox _setup="true"></TD>
            <TD class=ms-vb2><A onclick="SelectField('{F1162455-D63E-481D-B13C-C1A4A59E5A34}','8');return false;" href="javascript:SelectField('{F1162455-D63E-481D-B13C-C1A4A59E5A34}','8');return false;" target=_self><IMG style="CURSOR: hand" border=0 alt=Normal align=absMiddle src="/_layouts/images/rbunsel.gif"></A></TD>
            <TD class=ms-vb2></TD>
            <TD class="ms-vb-title ms-vb-lastCell" onmouseover=OnChildItem(this) height="100%">
            <DIV id=8 class="ms-vb itx" onmouseover=OnItem(this) EventType="" Perm="0x7fffffffffffffff" Field="LinkTitle" CTXName="ctx159"><A onfocus=OnLink(this) onclick="EditLink2(this,159);return false;" href="http://test.app.domain.net/test/_layouts/listform.aspx?PageType=4&amp;ListId={2E5002B0-EDC3-4541-A0ED-2A81797B459C}&amp;ID=8&amp;ContentTypeID=0x0100801F054C4E00C243A9A49EC13FF778D7003293EF8DE37E144BAA8A5296D5E6CA8B" target=_self>domain\test.officer</A><IMG class=ms-newgif title=New alt=New src="/_layouts/1033/images/new.gif"></DIV>
            <DIV class=s4-ctx onmouseover="OnChildItem(this.parentNode); return false;"><SPAN>&nbsp;</SPAN><A onfocus="OnChildItem(this.parentNode.parentNode); return false;" title="Open Menu" onclick="PopMenuFromChevron(event); return false;" href="javascript:;"></A><SPAN>&nbsp;</SPAN></DIV></TD></TR>
            <TR class=ms-itmhover iid="159,5,0" setEdgeBorder="true">
            <TD class="ms-vb-itmcbx ms-vb-firstCell"><INPUT class=s4-itm-cbx title="domain\n.test&#13;&#10;  " value="" type=checkbox _setup="true"></TD>
            <TD class=ms-vb2><A onclick="SelectField('{F1162455-D63E-481D-B13C-C1A4A59E5A34}','5');return false;" href="javascript:SelectField('{F1162455-D63E-481D-B13C-C1A4A59E5A34}','5');return false;" target=_self><IMG style="CURSOR: hand" border=0 alt=Normal align=absMiddle src="/_layouts/images/rbunsel.gif"></A></TD>
            <TD class=ms-vb2></TD>
            <TD class="ms-vb-title ms-vb-lastCell" onmouseover=OnChildItem(this) height="100%">
            <DIV id=5 class="ms-vb itx" onmouseover=OnItem(this) EventType="" Perm="0x7fffffffffffffff" Field="LinkTitle" CTXName="ctx159"><A onfocus=OnLink(this) onclick="EditLink2(this,159);return false;" href="http://test.app.domain.net/test/_layouts/listform.aspx?PageType=4&amp;ListId={2E5002B0-EDC3-4541-A0ED-2A81797B459C}&amp;ID=5&amp;ContentTypeID=0x0100801F054C4E00C243A9A49EC13FF778D7003293EF8DE37E144BAA8A5296D5E6CA8B" target=_self>domain\n.test</A><IMG class=ms-newgif title=New alt=New src="/_layouts/1033/images/new.gif"></DIV>
            <DIV class=s4-ctx onmouseover="OnChildItem(this.parentNode); return false;"><SPAN>&nbsp;</SPAN><A onfocus="OnChildItem(this.parentNode.parentNode); return false;" title="Open Menu" onclick="PopMenuFromChevron(event); return false;" href="javascript:;"></A><SPAN>&nbsp;</SPAN></DIV></TD></TR>
            <TR class="ms-alternating ms-itmhover" iid="159,3,0" setEdgeBorder="true">
            <TD class="ms-vb-itmcbx ms-vb-firstCell"><INPUT class=s4-itm-cbx title="domain\test1.user1&#13;&#10;  " value="" type=checkbox _setup="true"></TD>
            <TD class=ms-vb2><A onclick="SelectField('{F1162455-D63E-481D-B13C-C1A4A59E5A34}','3');return false;" href="javascript:SelectField('{F1162455-D63E-481D-B13C-C1A4A59E5A34}','3');return false;" target=_self><IMG style="CURSOR: hand" border=0 alt=Normal align=absMiddle src="/_layouts/images/rbunsel.gif"></A></TD>
            <TD class=ms-vb2></TD>
            <TD class="ms-vb-title ms-vb-lastCell" onmouseover=OnChildItem(this) height="100%">
            <DIV id=3 class="ms-vb itx" onmouseover=OnItem(this) EventType="" Perm="0x7fffffffffffffff" Field="LinkTitle" CTXName="ctx159"><A onfocus=OnLink(this) onclick="EditLink2(this,159);return false;" href="http://test.app.domain.net/test/_layouts/listform.aspx?PageType=4&amp;ListId={2E5002B0-EDC3-4541-A0ED-2A81797B459C}&amp;ID=3&amp;ContentTypeID=0x0100801F054C4E00C243A9A49EC13FF778D7003293EF8DE37E144BAA8A5296D5E6CA8B" target=_self>domain\test1.user1</A><IMG class=ms-newgif title=New alt=New src="/_layouts/1033/images/new.gif"></DIV>
            <DIV class=s4-ctx onmouseover="OnChildItem(this.parentNode); return false;"><SPAN>&nbsp;</SPAN><A onfocus="OnChildItem(this.parentNode.parentNode); return false;" title="Open Menu" onclick="PopMenuFromChevron(event); return false;" href="javascript:;"></A><SPAN>&nbsp;</SPAN></DIV></TD></TR>
            <TR class=ms-itmhover iid="159,2,0" setEdgeBorder="true">
            <TD class="ms-vb-itmcbx ms-vb-firstCell"><INPUT class=s4-itm-cbx title="domain\admin.user&#13;&#10;  " value="" type=checkbox _setup="true"></TD>
            <TD class=ms-vb2><A onclick="SelectField('{F1162455-D63E-481D-B13C-C1A4A59E5A34}','2');return false;" href="javascript:SelectField('{F1162455-D63E-481D-B13C-C1A4A59E5A34}','2');return false;" target=_self><IMG style="CURSOR: hand" border=0 alt=Normal align=absMiddle src="/_layouts/images/rbunsel.gif"></A></TD>
            <TD class=ms-vb2></TD>
            <TD class="ms-vb-title ms-vb-lastCell" onmouseover=OnChildItem(this) height="100%">
            <DIV id=2 class="ms-vb itx" onmouseover=OnItem(this) EventType="" Perm="0x7fffffffffffffff" Field="LinkTitle" CTXName="ctx159"><A onfocus=OnLink(this) onclick="EditLink2(this,159);return false;" href="http://test.app.domain.net/test/_layouts/listform.aspx?PageType=4&amp;ListId={2E5002B0-EDC3-4541-A0ED-2A81797B459C}&amp;ID=2&amp;ContentTypeID=0x0100801F054C4E00C243A9A49EC13FF778D7003293EF8DE37E144BAA8A5296D5E6CA8B" target=_self>domain\admin.user</A></DIV>
            <DIV class=s4-ctx onmouseover="OnChildItem(this.parentNode); return false;"><SPAN>&nbsp;</SPAN><A onfocus="OnChildItem(this.parentNode.parentNode); return false;" title="Open Menu" onclick="PopMenuFromChevron(event); return false;" href="javascript:;"></A><SPAN>&nbsp;</SPAN></DIV></TD></TR>
            <TR class="ms-alternating ms-itmhover" iid="159,1,0" setEdgeBorder="true">
            <TD class="ms-vb-itmcbx ms-vb-firstCell"><INPUT class=s4-itm-cbx title="domain\portal.user&#13;&#10;  " value="" type=checkbox _setup="true"></TD>
            <TD class=ms-vb2><A onclick="SelectField('{F1162455-D63E-481D-B13C-C1A4A59E5A34}','1');return false;" href="javascript:SelectField('{F1162455-D63E-481D-B13C-C1A4A59E5A34}','1');return false;" target=_self><IMG style="CURSOR: hand" border=0 alt=Normal align=absMiddle src="/_layouts/images/rbunsel.gif"></A></TD>
            <TD class=ms-vb2></TD>
            <TD class="ms-vb-title ms-vb-lastCell" onmouseover=OnChildItem(this) height="100%">
            <DIV id=1 class="ms-vb itx" onmouseover=OnItem(this) EventType="" Perm="0x7fffffffffffffff" Field="LinkTitle" CTXName="ctx159"><A onfocus=OnLink(this) onclick="EditLink2(this,159);return false;" href="http://test.app.domain.net/test/_layouts/listform.aspx?PageType=4&amp;ListId={2E5002B0-EDC3-4541-A0ED-2A81797B459C}&amp;ID=1&amp;ContentTypeID=0x0100801F054C4E00C243A9A49EC13FF778D7003293EF8DE37E144BAA8A5296D5E6CA8B" target=_self>domain\portal.user</A></DIV>
            <DIV class=s4-ctx onmouseover="OnChildItem(this.parentNode); return false;"><SPAN>&nbsp;</SPAN><A onfocus="OnChildItem(this.parentNode.parentNode); return false;" title="Open Menu" onclick="PopMenuFromChevron(event); return false;" href="javascript:;"></A><SPAN>&nbsp;</SPAN></DIV></TD></TR></TBODY></TABLE> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T07:59:32.703

您可以使用 SharePoint 2010 客户端对象模型方法“ [SP.ListOperation.Selection.getSelectedItems()](http://msdn.microsoft.com/en-us/library/ff409526.aspx) ”来获取所选项目。

在内容编辑器 Webpart 中尝试此脚本：

```
<script type="text/javascript">

 function ShowSelectedItems() {
  var ctx = SP.ClientContext.get_current();
  var selectedItems = SP.ListOperation.Selection.getSelectedItems(ctx);
  var key;
  for (key in selectedItems) {
   alert(selectedItems[key].id);
  }

 }</script>
 <input name="btnShowSelectedItems" id="btnShowSelectedItems" onclick="ShowSelectedItems();" type="button" value="Show Selected Items"/> 
```

我不会推荐这个，但如果你真的想用这个来使用 jQuery，你可以试试这个脚本：

```
var selectedImg$ = $('img[alt^="Selected"]');
var elemID = selectedImg$.closest('tr').attr('iid').split(',')[1];
var linkText = selectedImg$.closest('tr').find('div#'+elemID).find('a').text(); 
```

# django - 在 Django 中使用 UTF-8 编码的 JSON 夹具文件

> ID：12632862
> 
> 赞同：5
> 
> 时间：2012-09-28T02:36:04.130
> 
> 标签：django, json, unicode, utf-8, fixtures

我正在尝试编写一个 JSON 初始数据夹具，每次调用`syncdb`.

我在我的目录中放置了一个`initial_data.json`文件`mysite/myapp/fixtures`：

```
[
  {
    "model": "myapp.Person",
    "pk": 1,
    "fields": {
      "first_name": "Tom",
      "last_name": "Yam"
    }
  }
] 
```

当文件以 ASCII 编码时一切正常，但是当我以 UTF-8 编码保存它时（我需要使用非 ASCII 字符），我遇到以下错误：

```
Problem installing fixture 'initial_data.json': Traceback (most recent call last):
File "D:\Tom\DjangoEnv\Lib\site-packages\django\core\management\commands\loaddata.py", line 190, in handle
for obj in objects:
File "D:\Tom\DjangoEnv\Lib\site-packages\django\core\serializers\json.py", line 47, in Deserializer
raise DeserializationError(e)
DeserializationError: No JSON object could be decoded 
```

根据 Django[文档](https://docs.djangoproject.com/en/1.4/topics/serialization/#id2)，我需要`ensure_ascii=False`在使用非 ASCII 数据和 JSON 序列化程序时进行设置，但我不知道该怎么做（因为它是从`syncdb`函数调用的。

任何想法如何使用 UTF-8 编码的 JASON 文件作为夹具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T07:10:43.300

`load_data`不会将`ensure_ascii`选项传递给序列化程序，因此您有两个选择：

1.  在加载数据之前将数据转换为转义的 ascii unicode，即：

    ```
    import codecs
    encoded = codecs.open('/tmp/tst.txt', 'r', 'utf-8').read().encode(
                'ascii', 'backslashreplace')
    open('/tmp/tst-encoded.txt', 'w').write(encoded) 
    ```

2.  编写您自己的管理命令，该命令将通过`ensure_ascii`

希望这可以帮助。

# jquery - 如何通过jquery将输入类型隐藏或文本附加到您确切知道位置的单元格中

> ID：12632863
> 
> 赞同：-1
> 
> 时间：2012-09-28T02:36:07.553
> 
> 标签：jquery

我被我的表格卡住了

如何通过jquery将输入类型隐藏或文本附加到您确切知道位置的单元格中

示例我有 4 行 3 个单元格

我想将输入类型隐藏或文本附加到第 3 行单元格 2

我该怎么做？

感谢您的回答或建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T02:42:48.637

尝试这个：

```
var inputHidden = $('#yourinput');
$('table tr:eq(2) td:eq(1)').append(inputHidden); 
```

选择器 :eq 接收要选择的元素的索引作为参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T02:45:35.247

您可以使用 jQuery 附加[http://jsfiddle.net/RAf9k/](http://jsfiddle.net/RAf9k/)

```
$('table tr:eq(2) td:eq(1)').append('text');​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T02:54:52.460

试试这个[http://jsfiddle.net/yoku2010/VLwwP/](http://jsfiddle.net/yoku2010/VLwwP/)

```
​$(document.createElement("input")).attr("type","text").appendTo($("table tr:eq(2) td:eq(1)"));​​ 
```

# json - PostgreSQL 中 JSON 数据类型的大小限制

> ID：12632871
> 
> 赞同：67
> 
> 时间：2012-09-28T02:37:44.107
> 
> 标签：json, postgresql, postgresql-9.2

有谁知道 PostgreSQL 9.2 中 JSON 数据类型的大小限制是多少？

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-09-28T03:23:47.143

查看 PostgreSQL 9.2.1 的源代码：

```
Source: postgresql-9.2.1\src\backend\utils\adt\json.c:
/*
 * Input.
 */
Datum
json_in(PG_FUNCTION_ARGS)
{
    char       *text = PG_GETARG_CSTRING(0);

    json_validate_cstring(text);

    /* Internal representation is the same as text, for now */
    PG_RETURN_TEXT_P(cstring_to_text(text));
} 
```

PostgreSQL 9.3.5 更新：

函数中的代码发生了变化`json_in`，但是json内部表示还是文本：

```
Source: postgresql-9.3.5\src\backend\utils\adt\json.c:
/*
 * Input.
 */
Datum
json_in(PG_FUNCTION_ARGS)
{
    char       *json = PG_GETARG_CSTRING(0);
    text       *result = cstring_to_text(json);
    JsonLexContext *lex;

    /* validate it */
    lex = makeJsonLexContext(result, false);
    pg_parse_json(lex, &nullSemAction);

    /* Internal representation is the same as text, for now */
    PG_RETURN_TEXT_P(result);
} 
```

因此，至少目前看来，它与数据类型`json`相同，`text`但具有 JSON 验证。数据类型的`text`最大大小为[1GB](http://www.postgresql.org/docs/current/interactive/datatype-character.html)。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2020-02-04T13:57:48.383

对于`jsonb`字段，如果你查看源代码中的[jsonb.c](https://github.com/postgres/postgres/blob/REL_12_STABLE/src/backend/utils/adt/jsonb.c)，你会看到这个函数：

```
checkStringLen(size_t len)
{
    if (len > JENTRY_OFFLENMASK)
        ereport(ERROR,
                (errcode(ERRCODE_PROGRAM_LIMIT_EXCEEDED),
                 errmsg("string too long to represent as jsonb string"),
                 errdetail("Due to an implementation restriction, jsonb strings cannot exceed %d bytes.",
                           JENTRY_OFFLENMASK)));

    return len;
} 
```

错误代码说 jsonb 字符串不能超过`JENTRY_OFFLENMASK`字节。

在[jsonb.h](https://github.com/postgres/postgres/blob/REL_12_STABLE/src/include/utils/jsonb.h)中，该常量定义为：

```
#define JENTRY_OFFLENMASK       0x0FFFFFFF 
```

这是**255 MB**。

我在 PostgreSQL 9.4 到 13 的源代码中检查了这一点。

# javascript - 减去在 2 个文本字段中输入的时间并在另一个文本字段上显示答案

> ID：12632876
> 
> 赞同：-1
> 
> 时间：2012-09-28T02:38:12.783
> 
> 标签：javascript, html

SecondaryTime 的值 - PrimaryTime 的值

答案将放在 Sp 文本字段中。

时间格式为 HH:MM:SS

帮助！！:))

```
<SCRIPT language="javascript">

function calculate(time1,time2){

var diff = Math.abs(time1 - time2);

    document.form.Sp.value = diff;

}

</script>

<form name="form1" method="post" action="">
<label for="PrimaryTime"></label>
<input type="text" name="PrimaryTime" id="PrimaryTime">
<label for="SecondaryTime"></label>
<input type="text" name="SecondaryTime" id="SecondaryTime" onFocus = "calculate(this.form.SecondaryTime.value, this.form.PrimaryTime.value)>
<label for="Sp"></label>
<input name="Sp" type="text" id="Sp" readonly="readonly">
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T03:08:42.110

我没有改进东西，我只是让它们工作：

```
<SCRIPT language="javascript">

function calculate(time1,time2){

    time1_split = time1.split(":");
    time2_split = time2.split(":");

var diff = Math.abs(time1_split[0] - time2_split[0]) + ":" + Math.abs(time1_split[1] - time2_split[1]) + ":" + Math.abs(time1_split[2] - time2_split[2]);

    form1.Sp.value = diff;

}

</script>

<form name="form1" method="post" action="">
<label for="PrimaryTime"></label>
<input type="text" name="PrimaryTime" id="PrimaryTime">
<label for="SecondaryTime"></label>
<input type="text" name="SecondaryTime" id="SecondaryTime" onFocus = "calculate(this.form.SecondaryTime.value, this.form.PrimaryTime.value)">
<label for="Sp"></label>
<input name="Sp" type="text" id="Sp" readonly="readonly">
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T03:56:37.983

要正确进行计算，您需要将时间转换为某个常用单位（例如秒），减去两者，然后转换回 h:m:s，例如

```
// difference in time in format hh:mm:ss
function diffTime(t0, t1) {

  t0 = t0.split(':');
  t1 = t1.split(':');

  var diff = (+t0[0] - +t1[0])*3600 + (+t0[1] - +t1[1])*60 + +t0[2] - +t1[2];
  var sign = diff<0? '-':'';

  diff = Math.abs(diff);

  var h = diff/3600 | 0;
  var m = (diff%3600) / 60 | 0;
  var s = (diff%60);

  function addZ(n) {
    return (n<10? '0':'') + n;
  }

  return sign + addZ(h) + ':' + addZ(m) + ':' + addZ(s);
} 
```

# java - 在Java中增加一个变量

> ID：12632877
> 
> 赞同：-3
> 
> 时间：2012-09-28T02:38:24.390
> 
> 标签：java, andengine, counter, increment

我刚刚开始接触 Java。

我需要将一个变量从 0 增加到 13，然后当变量达到 13 时，它需要再次开始一直递减到 0，然后重新开始。

这是我的代码：

```
(arriba = false){ 
   x++; 
   Log.d("incr", "x :" + x + " " + arriba); 
    if (x > 9){ 
      arriba = true; 
      if (arriba = true) { 
         --x; 
         if (x < 0) { 
          arriba = false; 
                    } 
               } 
         }
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T02:48:10.080

ARS 的答案是缺少递减部分。

```
int i = 0;
int delta = 1;

if (i == 0) {
  delta = 1;
}
if (i == 13) {
  delta = -1;
}

i += delta; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T02:55:13.340

我也是新来的，这里的人通常不会为你编码。您应该先自己尝试，发布您制作的代码，以便人们对您的代码提出建议或更正。

无论如何，像我这样的新手程序员会这样做：

```
int x = 0;
int i = 1;
while(true){
    // print x

    // if x is 13
        // i = -1
    // else if x is 0
        // i = 1;

    // add i to x
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T02:58:07.097

怎么样

```
for (int i=0; i<27; i++)
{
    int j = (i<14 ? i : 26-i);
    // j will go 0,1,2,3...12,13,12,11,...0
    // do something with j
    ....
} 
```

或者

```
for (int i=-13; i<14; i++)
{
    int j = 13 - Math.abs(i);
    ....
} 
```

或者......好吧，你明白了。

# css - 为什么我的桌子搞砸了我的页面？

> ID：12632878
> 
> 赞同：0
> 
> 时间：2012-09-28T02:38:37.443
> 
> 标签：css, html, twitter-bootstrap

我正在使用 twitter 的引导程序（我是新手），并且在页面上有一个菜单和一个表格。菜单本身很好。没有数据（或只有几行）的表就可以了。问题是当我尝试在我的表格中放置很多行以便出现垂直滚动条时，它会弄乱格式并且滚动条会渗入标题中。这是我的[小提琴](http://jsfiddle.net/Ph7GZ/10)。我究竟做错了什么？

编辑：这是我目前得到的：

```
______________________
|_______header_____|*| <----the scrollbar bleeds into the header
|                  |*|
|   Container Div  |*|
|                  |*|
|                  |*|
|                  |*|
|                  |*|
|                  |*|
---------------------- 
```

这就是我想要的：

```
______________________
|_______header_______|
|                  |*|<--- scrollbar starts after the header
|   Container Div  |*|
|                  |*|
|                  |*|
|                  |*|
|                  |*|
|                  |*|
---------------------- 
```

[这个小提琴](http://jsfiddle.net/n9P3X/1/)解决了这个问题，但我似乎无法用 twitter bootstrap 实现同样的效果......滚动条仍然渗入标题。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T03:11:29.347

我相信滚动条与表格无关。它来自 .container div 上的宽度引导集。

看看你是否还能看到滚动条：http: [//jsfiddle.net/joplomacedo/Ph7GZ/3/](http://jsfiddle.net/joplomacedo/Ph7GZ/3/)

# javascript - 需要选中单选按钮

> ID：12632879
> 
> 赞同：0
> 
> 时间：2012-09-28T02:38:48.753
> 
> 标签：javascript, asp.net

> **可能重复：**
> [如何检查是否在 javascript 中选择了单选按钮？](https://stackoverflow.com/questions/1423777/how-can-i-check-if-a-radio-button-is-selected-in-javascript)

我正在尝试在单选按钮上实现客户端验证。例如，支付状态是已支付或未支付。如果他们没有选择任何内容，我希望它说“选择您的付款状态”。如果选中其中任何一个，它将已经通过服务器端验证显示在标签中。

```
<script language="javascript">
$document.ready function() {
valButton = function(btn) {
for (var i=btn.length-1; i > -1; i--) {
    if (btn[i].checked) return btn[i].value;
  }
  return null;
}

if (null === valButton (document.getElementsByName (document.getElementById('rdoPaid').name)) {
  message('Select a pay status.');
}
});
</script>

Pay Status
<input ID="rdoPaid" Text="Paid" />
<br />
<input ID="rdoUnpaid" Text="Unpaid" /> 
```

我真正使用的是 asp:RadioButton，而不是输入。

这就是我正在尝试的。谁能帮我让它正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T03:41:42.820

尝试这个

```
if(!document.getElementById('rdoPaid').checked){
    message('Select a pay status.');
} 
```

# facebook - facebook sdk 关于 opengraph

> ID：12632886
> 
> 赞同：0
> 
> 时间：2012-09-28T02:39:34.550
> 
> 标签：facebook, facebook-graph-api

我是接触ios初学者facebook sdk opengraph遇到一些问题，我用这个youtube网站学习opengraph看一些php编程语言

请问opengraph是否需要开发后台和服务器相互配合？

[http://www.youtube.com/watch?v=8x6T7-WFSBg](http://www.youtube.com/watch?v=8x6T7-WFSBg)

希望能给我一些建议和帮助，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T04:27:45.220

开始学习 Facebook iOS SDK 的最佳方法是从[Facebook 开发者网站](http://developers.facebook.com)。由于您将熟悉使用的命名约定，因此不难理解。

[从开发者网站下载](http://developers.facebook.com/ios/)SDK，它包含大部分示例代码。

要开始登录/注销，您可以通过[此](http://developers.facebook.com/docs/howtos/login-with-facebook-using-ios-sdk/).

# shell - 从目录中的某些文件递归地grep数据并将值返回到文件

> ID：12632890
> 
> 赞同：0
> 
> 时间：2012-09-28T02:40:03.753
> 
> 标签：shell, ubuntu

我正在制作一个简单的 shell 脚本，它将最大限度地减少我在搜索父目录下的所有目录和 grep 某些文件中的某些内容所花费的时间。这是我的脚本。

```
#!/bin/sh
MainDir=/var/opt/database/1227-1239/

cd "$MainDir"

for dir in $(ls); do

grep -i "STAGE,te_start_seq Starting" "$dir"/his_file | tail -1 >> /home/xtee/sst-logs.out

if [ -f "$dir"/sysconfig.out];
then
    grep -A 1 "Drive Model" "$dir"/sysconfig.out | tail -1 >> /home/xtee/sst-logs.out
else
    grep -m 1 "Physical memory size" "$dir"/node0/setupsys.out | tail -1 >> /home/xtee/sst-logs.out
fi

done 
```

`STAGE,te_start_seq Starting`该脚本应该对文件下的字符串进行 grep，`his_file`然后将其转储`sst-logs.out`。我的问题是`if`声明中的部分。该脚本应检查当前目录`sysconfig.out`，grep`drive model`并将其转储到（`sst-logs.out`如果存在），否则，将目录更改为`node0`然后 grep `physical memory size`from`setupsys.out`并将其转储到`sst-logs.out`. 我的问题是，该`if then else`语句似乎不起作用，因为它根本不转储任何数据，但如果我手动执行 grep，我确实有数据。

我的 shell 脚本有什么问题？有没有更有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T03:25:57.007

首先，当您说“将目录更改为 node0 然后 grep”时，您并没有在这里更改目录，您只是在使用不同的路径。您真的要更改目录吗？是“$dir/node0/”还是在“$dir”目录之外？

其次，/var/opt/database/1227-1239/ 有没有带空格的文件？你能显示ls的输出吗？

我不会在 $(ls); 中使用 'for dir 做'

[当您尝试解析 ls](http://mywiki.wooledge.org/ParsingLs)时，您将开始遇到很多陷阱

```
for dir in * ; do 
 if [[ -d "$dir" ]] ; then
  grep -i "STAGE,te_start_seq Starting" "$dir"/his_file | tail -1 >> /home/xtee/sst-logs.out
  if [ -f "$dir"/sysconfig.out]; then
   grep -A 1 "Drive Model" "$dir"/sysconfig.out | tail -1 >> /home/xtee/sst-logs.out
  else
   grep -m 1 "Physical memory size" "$dir"/node0/setupsys.out | tail -1 >> /home/xtee/sst-logs.out
  fi
 if
done 
```

如果你得到它，你也可以使用 find -maxdepth ，否则它会变成 .. -prune -o ..

我唯一的猜测是 $(ls) 有一些带有错误字符或空格的文件，所以当您手动处理这些文件时，一切正常，因为您正在转义这些字符？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T03:09:37.553

你为什么不使用类似的东西

```
find . -name "*" -print | xargs grep -i <text> 
```

搜索`text`当前目录下的所有文件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T03:18:17.253

你听说过 grep 的递归选项吗？

```
grep <text> -R . 
```

# ios - 无法在单例中向 NSMutableDictionary 添加条目

> ID：12632891
> 
> 赞同：2
> 
> 时间：2012-09-28T02:40:08.397
> 
> 标签：ios, singleton, ios6, nsmutabledictionary

我有一个带有 NSMutableDictionary 的单例。我想从我的一个视图中向该字典添加一个条目。由于我无法理解它不起作用并且我收到“NSDictionary setObject:forKey: unrecognized selector sent to instance”错误的原因。这似乎不应该那么难，但我找不到问题的答案。

所以我在我的.xib 中连接了一个按钮来调用createKey 方法和kablooey。我还进行了测试以确保字典存在并且确实存在。

这是我的单例标题：

```
#import <Foundation/Foundation.h>

@interface SharedAppData : NSObject <NSCoding>
{
    NSMutableDictionary *apiKeyDictionary;
}

+ (SharedAppData *)sharedStore;

@property (nonatomic, copy) NSMutableDictionary *apiKeyDictionary;

-(BOOL)saveChanges;

@end 
```

我的单例实现（重要部分）

```
 @interface SharedAppData()
    @end

    @implementation SharedAppData

    @synthesize apiKeyDictionary;

    static SharedAppData *sharedStore = nil;

+(SharedAppData*)sharedStore {

        @synchronized(self){
        if(sharedStore == nil){
            NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
            NSString *documentsDirectory = [paths objectAtIndex:0];
            NSString *testFile = [documentsDirectory stringByAppendingPathComponent:@"testfile.sav"];
            Boolean fileExists = [[NSFileManager defaultManager] fileExistsAtPath:testFile];

            if(fileExists) {
                sharedStore = [NSKeyedUnarchiver unarchiveObjectWithFile:testFile];
            }
            else{
                sharedStore = [[super allocWithZone:NULL] init];
            }

            [sharedStore setSaveFile:testFile];
        }

            return sharedStore;
        }
}

    - (id)init {
        if (self = [super init]) {
            apiKeyDictionary = [[NSMutableDictionary alloc] init];      
        }
        return self;
    } 
```

在我的视图控制器标题中......

```
#import <UIKit/UIKit.h>
#import "SharedAppData.h"

@interface AddKeyViewController : UIViewController <UITextFieldDelegate>
{
    UIButton *addKey;
}

@property (weak, nonatomic) IBOutlet UITextField *apiName;
@property (weak, nonatomic) IBOutlet UITextField *apiKey;

-(IBAction)createKey:(id)sender;

@end 
```

查看控制器实现：

```
#import "AddKeyViewController.h"
#import "SharedAppData.h"

@interface AddKeyViewController ()

@end

@implementation AddKeyViewController

@synthesize apiName, apiKey, toolbar;

-(IBAction)createKey:(id)sender {

    NSString *name = [apiName text];
    NSString *key = [apiKey text];

    [[[SharedAppData sharedStore] apiKeyDictionary] setObject:key forKey:name];
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T02:45:55.000

我怀疑问题在于您的财产是“复制”而不是“强”；当你设置它时，mutanle 字典被复制到一个不可变的字典中。尝试将您的属性更改为“强”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T02:46:13.777

您的`apiKeyDictionary`属性设置为`copy`。这会将`copy`消息发送到`NSMutableDictionary`您在`init`方法中创建的实例 - 返回不是一个，`NSMutableDictionary`而是一个`NSDictionary`. 将其更改为`strong`or `retain`。

# url - 如何正确屏蔽/重定向 apache httpd 中的 url？

> ID：12632893
> 
> 赞同：0
> 
> 时间：2012-09-28T02:40:44.153
> 
> 标签：url, apache

我有一个在主机名上运行的 apache httpd 服务器：

第一主机名

我在另一个主机名上运行另一个 apache httpd 服务器：

第二主机名

我想让它这样每当有人去：

第一个主机名，它重定向到第二个主机名。如果用户转到 firsthostname/something，用户实际看到的就像用户转到“secondhostname/something”一样，尽管“secondhostname”被屏蔽了

在“firsthostname”上安装的 httpd 上配置什么以及如何配置？我在 Windows 机器上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T03:07:20.643

您可以使用 apache rewrite 或 apache redirect

```
RewriteEngine  on
RewriteRule    ^/foo  /bar 
```

或者

```
Redirect /foo.html /bar.html 
```

查看此[文档](http://httpd.apache.org/docs/2.4/rewrite/remapping.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T03:12:35.307

您将需要一`DNS`台服务器。然后，您可以简单地设置`CNAME`要映射`firsthostname`到的记录`secondhostname`。

# python - 为什么 __getattr__ 不能与 __exit__ 一起使用？

> ID：12632894
> 
> 赞同：5
> 
> 时间：2012-09-28T02:40:46.730
> 
> 标签：python, attr, with-statement

在尝试解决另一个[问题](https://stackoverflow.com/questions/12627297/why-does-one-file-object-flush-but-the-other-one-doesnt)时，我感到有些意外。

这对我来说似乎非常奇怪，我认为值得提出这个问题。为什么似乎无法`__getattr__`使用`with`？

如果我制作这个对象：

```
class FileHolder(object):
    def __init__(self,*args,**kwargs):
        self.f= file(*args,**kwargs)

    def __getattr__(self,item):
        return getattr(self.f,item) 
```

并将其与`with`,

```
>>> a= FileHolder("a","w")
>>> a.write
<built-in method write of file object at 0x018D75F8>
>>> with a as f:
...   print f
...
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: __exit__
>>> a.__exit__
<built-in method __exit__ of file object at 0x018D75F8> 
```

为什么会这样？

## 编辑

```
>>> object.__exit__
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: type object 'object' has no attribute '__exit__' 
```

绝对不是继承`__exit__`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T02:51:34.883

`with`语句操作码`SETUP_WITH`查找`__exit__`为“特殊方法查找”，它忽略和`__getattr__`新式`__getattribute__`类（但不是旧式类）。有关更多信息，请参阅[此邮件列表线程](http://mail.python.org/pipermail/python-dev/2009-May/089535.html)，他们在其中讨论添加特殊方法查找语义`with`（他们最终会这样做）。另请参阅[新式类](http://docs.python.org/reference/datamodel.html#special-method-lookup-for-new-style-classes)的特殊方法查找，以详细讨论为什么以这种方式查找这些特殊方法。

特别是，特殊方法查找*也会*绕过`__getattr__`类型对象。因此，即使文档说该方法被查找为`type(mgr).__exit__`，此代码也不起作用：

```
class M(type):
    def __getattr__(*args): return lambda: 0

class X(object):
    __metaclass__ = M

x = X()
type(x).__exit__ # works, returns a lambda

with x: pass # fails, AttributeError 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-28T02:51:51.010

我不能肯定地说，但是在阅读了描述 with 语句的 PEP 之后：

[http://www.python.org/dev/peps/pep-0343/](http://www.python.org/dev/peps/pep-0343/)

这让我大吃一惊：

```
A new statement is proposed with the syntax:

    with EXPR as VAR:
        BLOCK

....

The translation of the above statement is:

    mgr = (EXPR)
    exit = type(mgr).__exit__  # Not calling it yet
    value = type(mgr).__enter__(mgr)

.... 
```

在那里。with 语句不会调用`__getattr__(__exit__)`，但会调用`type(a).__exit__`不存在的错误。

所以你只需要定义那些：

```
class FileHolder(object):                                                                                                                 
    def __init__(self,*args,**kwargs):
        self.f= file(*args,**kwargs)

    def __enter__(self,*args,**kwargs):
        return self.f.__enter__(*args,**kwargs)

    def __exit__(self,*args,**kwargs):
        self.f.__exit__(*args,**kwargs)

    def __getattr__(self,item):
        return getattr(self.f,item) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-10T03:56:52.307

`__getattr__`先前的答案已经解释了不适用于`__enter__`and的事实`__exit__`。我在这里给出我为什么它**不应该**工作的想法。

`__enter__`我们在对象上定义和方法的唯一原因`__exit__`是我们需要在`with`语句中使用它。这两个方法帮助我们隐式地获取和释放资源，所以我们通常这样定义它们：

```
class Resource(object):
    ...
    def __enter__(self):
        return self

    def __exit__(self, *exc):
        self.close() 
```

然后你可以写一些这样的代码：

```
with Resource() as resource:  # __enter__ is called and returns a value as `resource`
    do_something_with_resource()
    # `resource.__exit__` is called 
```

正如您所注意到的，我们获取和释放的资源正是我们定义的类的一个实例。

如果我们将资源作为属性并代理它的and`__enter__`怎么办？我们写一些这样的代码：`__exit__``__getattr__`

```
class ResourceProxy(object):
    def __init__(self):
        self._resource = Resource()

    def __getattr__(self, key):
        return getattr(self._resource, key) 
```

假设使用and`__getattr__`可以正常工作，以下是语句中会发生的情况：`__enter__``__exit__``with`

```
with ResourceProxy() as resource:  # proxied __enter__ is called
    # now `resource` is NOT a ResourceProxy instance, because what we called is `_resource.__enter__`
    do_something_with_resource()
    # `_resource.__exit__` is called and closed itself properly. 
    # Here is nothing to do with ResourceProxy, because it has never enter `with` context 
```

上面的行为很奇怪，可能与用户预期的不一样，原因如下：

1.  进入`with`上下文的资源不是我们发送的对象。
2.  退出`with`上下文时，`__exit__`调用代理对象的方法，而不是我们发送的外部对象。您可能认为如果我们`__exit__`在外部类上添加定义可能会有所帮助，但答案不是，因为外部类从未进入`with`语境。

To conclude, if we make `__getattr__` works with `__enter__` and `__exit__`, it will result in bad behaviors. It's not a good design.

# c# - mvc 3 - 自动转到 HttpPost

> ID：12632900
> 
> 赞同：0
> 
> 时间：2012-09-28T02:42:27.497
> 
> 标签：c#, asp.net, asp.net-mvc, http-post, actionmethod

我有一个动作如下：

```
 public ActionResult ChangeFeeCheck(string id)
    {

       ViewBag.id = id;
       return View();
    } 
```

在我看来，我有以下几点：

```
 @{
      ViewBag.Title = "CreateList";
     }

     Please enter first name <br /><br />

    @using (Html.BeginForm())
    {

    @Html.Textbox("firstname")

    <input type="button" id="SaveChanges" value="Save" />  
    } 
```

当我点击按钮时，我期待它如下

```
 [HttpPost]
public ActionResult ChangeFeeCheck(string firstname)
    {
      .....

    } 
```

我不确定 MVC 何时会自动转到 HttpPost，或者我何时需要手动将其放在那里。在上面，它不会直接去那里。我必须使用

```
 window.location.href 
```

并传递控制器/动作的 url。

意思是，不是默认的

```
 Html.BeginForm() 
```

HttpPost（与 HttpGet 同名）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T02:56:18.750

您需要按钮成为`submit`按钮：

改变：

```
<input type="button" id="SaveChanges" value="Save" />  
             ^^^^^^ 
```

到：

```
<input type="submit" id="SaveChanges" value="Save" />  
             ^^^^^^ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T06:29:28.283

如果您在此处遵循“约定优于配置”规则，那么您在此处创建的视图必须用于`ChangeFeeCheck`操作，并且`ChangeFeeCheck`此处看起来会使编译器混淆，因为没有重载、相同的名称、相同的签名。

然后当表单的方法是get时，它会转到第一个，而如果表单的方法是POST，它会调用装饰的那个`[HttpPost]`

而且因为您使用的是提交按钮，并且默认情况下生成的 HTML 表单使用 POST 操作，所以它调用`[HttpPost]`

您可以参考这篇文章（来自互联网档案，因为原始链接现已关闭）：[https ://web.archive.org/web/20120527133344/http://microsoftmentalist.com:80/2011/09/07/asp- net-mvc-difference-between-httpget-and-httppost-with-example/](https://web.archive.org/web/20120527133344/http://microsoftmentalist.com:80/2011/09/07/asp-net-mvc-difference-between-httpget-and-httppost-with-example/)

例如，参见如何重载`GET`和`POST`操作方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-18T04:12:31.557

首先，相同签名的同名方法不能在同一个控制器中编译，它会给你编译错误已经有相同参数类型的成员。

您必须通过不同的签名来区分这两种相似的名称方法。

关于 HttpPost 和 HttpGet，只要您必须检索数据或为该视图调用页面加载，就会调用您的 get 方法。

HttpPost 方法将被调用，要么您使用提交类型的按钮，要么您的输入类型是按钮，但使用 jquery，您在按钮单击时进行 ajax 调用，并且您的 ajax 类型是“Post”$.ajax({ url:“Action”类型： "发布" },succees: function(){alert('succeed');});

# php - 查看正则表达式中的组中是否存在值，然后在文本中对其进行操作

> ID：12632901
> 
> 赞同：1
> 
> 时间：2012-09-28T02:42:31.983
> 
> 标签：php, javascript

我正在尝试将 javascript 中的函数重写为 php，但它不起作用。也许这里有人可以告诉我哪里出错了？先感谢您。

Javascript ...（工作功能）

```
var match;
var chords = ['C','C#','D','D#','E','F','F#','G','G#','A','A#','B','C','Db','D','Eb','E','F','Gb','G','Ab','A','Bb','B','C'];
var chords2 = ['C','Db','D','Eb','E','F','Gb','G','Ab','A','Bb','B','C','C#','D','D#','E','F','F#','G','G#','A','A#','C'];
var chordRegex = /(?:C#|D#|F#|G#|A#|Db|Eb|Gb|Ab|Bb|C|D|E|F|G|A|B)/g;
var rec = /\{(.*?)\}/g; // gets all info between { and }

function transposeUp(){
    var html = $('.yui-editor-editable').contents().find('body'); //gets the contents
    var matches = $(html).html().match(rec);/////Gets all matches within the html
    var text = $(html).html(); // html of the html var
    for (var i = 0; i < matches.length; i++) { /////foreach match do
        ///// initializes variables /////
        var currentChord = String(matches[i]); //// sets current chord 
        currentChord = currentChord.substring(currentChord.indexOf("{") + 1, currentChord.indexOf("}")); //sets current chord cont.
        var output = "";
        var parts = currentChord.split(chordRegex); // splits currentChord into parts in the chordRegex
        var index = 0;
        /////////////////////////////////
        while (match = chordRegex.exec(currentChord)) { // while the match is equal to the currentChord do
            var chordIndex = chords2.indexOf(match[0]); // find the position of the matched chord within the chords2 array
            output += parts[index++] + chords[chordIndex + 1]; // build the output
        }
        output += parts[index];
        text = text.replace(matches[i], '{'+output+'}'); //replace the text with the new chords
    }
    $(html).html(text); // set the html value as the new text
} 
```

PHP...

```
function transposeUp($songchart){
$chords1 = array('C','C#','D','D#','E','F','F#','G','G#','A','A#','B','C','Db','D','Eb','E','F','Gb','G','Ab','A','Bb','B','C');
$chords2 = array('C','Db','D','Eb','E','F','Gb','G','Ab','A','Bb','B','C','C#','D','D#','E','F','F#','G','G#','A','A#','C');
$chordRegex = "/(?:C#|D#|F#|G#|A#|Db|Eb|Gb|Ab|Bb|C|D|E|F|G|A|B)/";

  $matches = preg_match_all('#{.*(.*)}#U', $songchart, $chords);
  $chord = $chords[1];
  foreach($chord as $key => $value){ 
    $output = '';
    $parts = preg_split($chordRegex, $value);
    $index = 0;
    while(preg_match($chordRegex, $value, $note)){
        $chordIndex = strpos($chords2, $note[0]);
        $output .= $parts[$index++] . $chords1[$chordIndex + 1];
    }
    $output .= $parts[$index];
    $songchart = preg_replace($value, $output, $songchart);
  }
return($songchart);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T03:38:51.460

```
$matches = preg_match_all('#{.*(.*)}#U', $songchart, $chords); 
```

应该：

```
$matches = preg_match_all('#\{(.*)\}#U', $songchart, $chords); 
```

在您的正则表达式中，第一个`.*`消耗了大括号内的所有内容，所以第二个什么都没有。

我不明白while循环。`$value`永远不会改变，那么循环将如何终止？

```
$chordIndex = strpos($chords2, $note[0]); 
```

应该：

```
$chordIndex = array_search($chords2, $note[0]); 
```

因为`strpos`用于搜索字符串，而不是数组。

```
$songchart = preg_replace($value, $output, $songchart); 
```

应该：

```
$songchart = str_replace($value, $output, $songchart); 
```

因为`$value`不是正则表达式。

我不确定这是做什么的，但我怀疑它可以通过使用来简化`preg_replace_callback`，或者甚至可以通过使用`str_replace`数组来简化搜索和替换参数。

# html - html - 如何在边框中点击？

> ID：12632904
> 
> 赞同：2
> 
> 时间：2012-09-28T02:42:51.157
> 
> 标签：html, css, button, click

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T03:40:36.760

除非您浮动元素并为其提供固定宽度，否则块将无法正常工作。我认为“内联块”会更好。

```
.myclass{
    display: inline-block;
    border: 2px solid #000;
    padding: 1em;
} 
```

你可以在这里看到它的实际效果：http: [//jsfiddle.net/2tmzL/](http://jsfiddle.net/2tmzL/)

浏览器对 inline-block 的支持非常好：[http ://caniuse.com/inline-block](http://caniuse.com/inline-block)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T02:46:52.030

将锚标记包裹在另一个容器元素周围

```
<a class=".." href=".."><div>Click here</div><a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T02:47:45.257

<a> 是一个内联，你必须把它转换成一个块，试试这个

```
.myclass:
{
  display:block;
  border: 2px solid #000;
  padding: 1em;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T02:47:54.247

您需要为您的 a 元素设置 css 属性 display: block 或 inline-block （取决于情况......）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T02:49:13.040

我似乎可以单击整个链接。确保在 .myclass 之后删除 :。此外，如果它仍然无法正常工作，您可能想尝试添加 display:block;

或者，在 html5 中，您可以将 a 标签包裹在块元素周围。这将适用于较旧的 html，尽管它不正确。

```
.myclass
{
    border: 2px solid #000;
    padding: 1em;
    display:block;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-28T02:50:38.140

问题是 a 是内联元素，并且填充不能像我们期望的内联元素那样工作。将 a's 更改为块级元素，一切都应该按您的预期工作（注意在 CSS 声明中删除了“：”，它不应该存在）：

```
.myclass {
   display: block;
   border: 2px solid #000;
   padding: 1em;
} 
```

# c# - double 是整数，难解析

> ID：12632905
> 
> 赞同：0
> 
> 时间：2012-09-28T02:42:52.547
> 
> 标签：c#, int, double

这完美地工作，除了当用户输入带小数的数字（例如`2.3`）时，它返回相同的语句（“数字必须是整数”）。

我想说它是否不是`int`OR a `double`。

代码：

```
while (true)
{
  Console.Write("Enter First Integer:");
  string line = Console.ReadLine();

  if (!int.TryParse(line, out firstNo)) //INT OR A DOUBLE
    Console.WriteLine("Number must be an integer. {0} is not an integer.", line);
  break;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T02:44:45.277

将其解析为`double`，它适用于整数和小数：

```
 double doubleVar;
   while (true)
   {
       Console.Write("Enter First number:");
       string line = Console.ReadLine();

       if (!double.TryParse(line, out doubleVar)) //PARSE INT OR DOUBLE
           Console.WriteLine("you must enter a number. {0} is not a number.", line);
       else
           break;
   } 
```

请记住，`.`或`,`分隔符可能因您当前的文化而异。

因此，如果您需要分离 int ans doubles，请执行以下操作：

```
 if (int.TryParse(line, out intVar)) //PARSE INT
    {
          //it's int
    }
    else if (double.TryParse(line, out doubleVar)) //PARSE DOUBLE
    {
          //it's double  
    }
    else
    {
         //it's not
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T02:44:54.757

由于所有整数都是双精度数，因此您只能将其解析为双精度数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T02:53:29.293

整数和分数是两个不同的实体。你不应该混淆。如果您正在寻找一种支持小数和整数输入的方法，请尝试以下方法

```
if (!double.TryParse(line, out firstNo)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T02:46:34.897

试试这个简单的技巧，

```
bool result = line.Constains("."); 
```

# jquery - 事件顺序 jQuery

> ID：12632908
> 
> 赞同：0
> 
> 时间：2012-09-28T02:43:29.640
> 
> 标签：jquery

我的页面上有一个 HTML 元素，并为元素添加了一些效果（动画）。我快完成了，但我不明白为什么动画由于某种原因执行无序......如果可能的话，请专注于第二个函数，因为我不想弄乱一个完美运行的代码

```
$(document).ready(function(){
$("aside, #top").hover(function(){
    $("aside").animate({width:100}, 700);
    $("#top").animate({width:100}, 700);
    $("#navigation").show();
});

$("aside, #top").mouseleave(function(){
    $("aside").animate({width:10}, 700);
    $("#top").animate({width:10}, 700);
    $("#navigation").hide();
}); 
```

最后一个

```
$("#navigation").hide(); 
```

在同一函数中的其他两个之前执行。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T02:45:12.317

使用回调：

```
$("#top").animate({width:10}, 700, function(){
    $("#navigation").hide();
}); 
```

关于为什么，一个简单的解释：这是因为前两行需要时间才能完成，而最后一行运行并在这两行完成之前立即完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T02:47:06.767

hide 'first' 执行的原因是所有三个都同时执行。要订购动画，您需要使用回调或链接。[http://api.jquery.com/animate/](http://api.jquery.com/animate/)

回调将在动画完成后运行。它似乎只首先运行，因为`.hide`根本不需要时间，但动画需要`700ms`运行。

如果您希望`.hide`在动画周期的特定点发生，您也可以使用超时。

```
$("aside, #top").mouseleave(function(){
    $("aside").animate({width:10}, 700);
    $("#top").animate({width:10}, 700, function(){
         $("#navigation").hide();
    });        
}); 
```

或者

```
$("aside, #top").mouseleave(function(){
    $("aside").animate({width:10}, 700);
    $("#top").animate({width:10}, 700);
    setTimeout(function(){
         $("#navigation").hide();
    }, 700);        
}); 
```

* * *

（psst。“附加”意味着更接近连接的东西，您不会将效果附加到元素，而是附加它们。动画操作不是事件，所以它不是事件顺序问题，而是执行顺序问题。干杯。）

# javascript - 使用jquery进行dom遍历

> ID：12632914
> 
> 赞同：0
> 
> 时间：2012-09-28T02:44:21.330
> 
> 标签：javascript, jquery, dom

我有这个 html 并想遍历 dom 并在具有

```
class="center" 
```

使用 jquery 加载页面后。我必须考虑到同一页面上的其他 html 具有与此相同的结构。唯一的区别是它们每个都有一个唯一的 td id。这是html：

```
<table>
 <tr>
 <td id="bankname">
  <div unselectable="on" style="-webkit-user-select: none; -webkit-tap-highlight-color:
   rgba(255, 255, 255, 0); width: 66px; " class=" select-area select-modify_select  
   select-focus ">
   <span class="left"></span>
   <span class="center">B.N.S.</span>
   <a class="select-opener"></a>
  </div>
 </td>
<tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T02:46:49.560

```
$(function(){
    $('#bankname span.center').text( theValueYouWant );
}); 
```

这样，您可以搜索在元素内具有类的`<span>`标签。`center``#bankname`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T02:47:56.847

```
$('#bankname span.center').text( newValue ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T03:35:23.863

```
$('#bankname span.center').text('Hello World!!'); 
```

我更喜欢这里的**.html()**，因为它比**.text()快一点**

```
$('#bankname span.center').html('Hello World!!'); 
```

# lucene - 如何使用 Lucene 或休眠搜索来索引和搜索自定义字段？

> ID：12632916
> 
> 赞同：0
> 
> 时间：2012-09-28T02:44:35.087
> 
> 标签：lucene, hibernate-search

如何使用 Lucene 或休眠搜索来索引和搜索自定义字段。我找不到索引自定义字段的方法。它们是动态的。

这里的“自定义字段”意味着它们可以由用户编辑，这些字段不是硬代码。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T22:10:16.207

**自定义字段查询**

只需使用投影 API：

```
FullTextQuery hibernateQuery = fullTextSession
     .createFullTextQuery(luceneQuery)
     .setProjection("myField1", "myField2");
List results = hibernateQuery.list(); 
```

使用投影，您可以读取任何已存储的字段。

如果它与您的索引实体的某些属性名称匹配，它将在转换为适当的类型后实现（如果您有 TwoWayFieldBridge）；如果不是，您将获得 String 值。

如果由于某种原因您需要绕过此转换，或者只是想在解码原始 Lucene 文档时获得乐趣，您可以直接[打开 IndexReader](http://docs.jboss.org/hibernate/search/4.2/reference/en-US/html_single/#IndexReaders)。

**索引自定义字段**

定义 FieldBridge 时，您可以向索引文档添加任意数量的字段，并且可以根据需要命名每个字段。方法参数*名称*是一个提示 - 例如用于限定字段名称 - 但您可以忽略它。

编写多个字段[的 FieldBridge 实现示例是文档中的 DateSplitBridge](http://docs.jboss.org/hibernate/search/4.1/reference/en-US/html_single/#example-field-bridge)。

# c++ - CImg 错误未处理异常堆栈溢出

> ID：12632921
> 
> 赞同：2
> 
> 时间：2012-09-28T02:45:06.130
> 
> 标签：c++, visual-studio-2010, cimg

当我在 Visual Studio 2010 上运行我的代码时，我得到：`Unhandled exception at 0x00b38767 in thesis.exe: 0xC00000FD: Stack overflow`.

我的代码如下：

```
#include "CImg.h"
#define cimg_use_jpg
using namespace cimg_library;
int main () {
CImg<int> image("C:\Users\Echo\Documents\Visual Studio 2010\Projects\thesis\thesissample\thesis\thesis\maze1.jpg");
CImgDisplay main_disp(image,"Image",0);

return 0;
} 
```

我找不到任何解释或教程可以让我克服这个问题。我也试过运行一个`png`文件，但我也得到了同样的错误。我在 64 位 Windows 7 Ultimate 上运行 Visual Studio 2010。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T03:15:47.587

我认为就像这样#define cimg_use_jpeg

# matplotlib - 0x025B8350 处的错误 matplotlib.lines.Line2D 对象

> ID：12632922
> 
> 赞同：1
> 
> 时间：2012-09-28T02:45:10.093
> 
> 标签：matplotlib, python-2.7

```
>>> import pylab as pl
>>> x = np.linspace(0,4*np.pi, 100)
>>> pl.plot(x, np.sin(x))
[<matplotlib.lines.Line2D object at 0x025B8350>] 
```

安装 numpy、scipy、sympy、matplotlib、ipython 后

```
---------------------------------------------------------------------------
TypeError                              Python 2.7.3: C:\Python27\python.exe
                                                   Fri Sep 28 09:59:01 2012
A problem occured executing Python code.  Here is the sequence of function
calls leading up to the error, with the most recent (innermost) call last.

C:\Python27\scripts\ipython.py in <module>()
     13 
     14 [or simply IPython.Shell.IPShell().mainloop(1) ]
     15 
     16 and IPython will be your working environment when you start python. The final
     17 sys.exit() call will make python exit transparently when IPython finishes, so
     18 you don't have an extra prompt to get out of.
     19 
     20 This is probably useful to developers who manage multiple Python versions and
     21 don't want to have correspondingly multiple IPython versions. Note that in
     22 this mode, there is no way to pass IPython any command-line options, as those
     23 are trapped first by Python itself.
     24 """
     25 
     26 import IPython.Shell
     27 
---> 28 IPython.Shell.start().mainloop()
        global IPython.Shell.start.mainloop = undefined
     29 
     30 
     31 
     32 
     33 
     34 
     35 
     36 
     37 
     38 
     39 
     40 
     41 
     42 
     43 

C:\Python27\lib\site-packages\IPython\Shell.pyc in start(user_ns=None)
   1244 
   1245         # New versions of pygtk don't need the brittle threaded support.
   1246         th_mode = check_gtk(th_mode)
   1247         return th_shell[th_mode]
   1248 
   1249 
   1250 # This is the one which should be called by external code.
   1251 def start(user_ns = None):
   1252     """Return a running shell instance, dealing with threading options.
   1253 
   1254     This is a factory function which will instantiate the proper IPython shell
   1255     based on the user's threading choice.  Such a selector is needed because
   1256     different GUI toolkits require different thread handling details."""
   1257 
   1258     shell = _select_shell(sys.argv)
-> 1259     return shell(user_ns = user_ns)
   1260 
   1261 # Some aliases for backwards compatibility
   1262 IPythonShell = IPShell
   1263 IPythonShellEmbed = IPShellEmbed
   1264 #************************ End of file <Shell.py> ***************************
   1265 
   1266 
   1267 
   1268 
   1269 
   1270 
   1271 
   1272 
   1273 
   1274 

C:\Python27\lib\site-packages\IPython\Shell.pyc in __init__(self=<IPython.Shell.IPShell instance>, argv=None, user_ns=None, user_global_ns=None, debug=1, shell_class=<class 'IPython.iplib.InteractiveShell'>)
     58 # Default timeout for waiting for multithreaded shells (in seconds)
     59 GUI_TIMEOUT = 10
     60 
     61 #-----------------------------------------------------------------------------
     62 # This class is trivial now, but I want to have it in to publish a clean
     63 # interface. Later when the internals are reorganized, code that uses this
     64 # shouldn't have to change.
     65 
     66 class IPShell:
     67     """Create an IPython instance."""
     68     
     69     def __init__(self,argv=None,user_ns=None,user_global_ns=None,
     70                  debug=1,shell_class=InteractiveShell):
     71         self.IP = make_IPython(argv,user_ns=user_ns,
     72                                user_global_ns=user_global_ns,
---> 73                                debug=debug,shell_class=shell_class)
        global For = undefined
        global more = undefined
        global details = undefined
        global see = undefined
        global the = undefined
        global __call__ = undefined
        global method = undefined
        global below. = undefined
     74 
     75     def mainloop(self,sys_exit=0,banner=None):
     76         self.IP.mainloop(banner)
     77         if sys_exit:
     78             sys.exit()
     79 
     80 #-----------------------------------------------------------------------------
     81 def kill_embedded(self,parameter_s=''):
     82     """%kill_embedded : deactivate for good the current embedded IPython.
     83 
     84     This function (after asking for confirmation) sets an internal flag so that
     85     an embedded IPython will never activate again.  This is useful to
     86     permanently disable a shell that is being called inside a loop: once you've
     87     figured out what you needed from it, you may then kill it and the program
     88     will then continue to run without the interactive shell interfering again.

C:\Python27\lib\site-packages\IPython\ipmaker.pyc in make_IPython(argv=[r'C:\Python27\scripts\ipython.py'], user_ns=None, user_global_ns=None, debug=1, rc_override=None, shell_class=<class 'IPython.iplib.InteractiveShell'>, embedded=False, **kw={})
    506     # tweaks. Basically options which affect other options. I guess this
    507     # should just be written so that options are fully orthogonal and we
    508     # wouldn't worry about this stuff!
    509 
    510     if IP_rc.classic:
    511         IP_rc.quick = 1
    512         IP_rc.cache_size = 0
    513         IP_rc.pprint = 0
    514         IP_rc.prompt_in1 = '>>> '
    515         IP_rc.prompt_in2 = '... '
    516         IP_rc.prompt_out = ''
    517         IP_rc.separate_in = IP_rc.separate_out = IP_rc.separate_out2 = '0'
    518         IP_rc.colors = 'NoColor'
    519         IP_rc.xmode = 'Plain'
    520 
--> 521     IP.pre_config_initialization()
    522     # configure readline
    523 
    524     # update exception handlers with rc file status
    525     otrap.trap_out()  # I don't want these messages ever.
    526     IP.magic_xmode(IP_rc.xmode)
    527     otrap.release_out()
    528 
    529     # activate logging if requested and not reloading a log
    530     if IP_rc.logplay:
    531         IP.magic_logstart(IP_rc.logplay + ' append')
    532     elif  IP_rc.logfile:
    533         IP.magic_logstart(IP_rc.logfile)
    534     elif IP_rc.log:
    535         IP.magic_logstart()
    536 

C:\Python27\lib\site-packages\IPython\iplib.pyc in pre_config_initialization(self=<IPython.iplib.InteractiveShell object>)
    820                           self.user_ns,  # globals
    821                           # Skip our own frame in searching for locals:
    822                           sys._getframe(depth+1).f_locals # locals
    823                           ))
    824 
    825     def pre_config_initialization(self):
    826         """Pre-configuration init method
    827 
    828         This is called before the configuration files are processed to
    829         prepare the services the config files might need.
    830         
    831         self.rc already has reasonable default values at this point.
    832         """
    833         rc = self.rc
    834         try:
--> 835             self.db = pickleshare.PickleShareDB(rc.ipythondir + "/db")
        global Optional = undefined
        global inputs = undefined
    836         except exceptions.UnicodeDecodeError:
    837             print "Your ipythondir can't be decoded to unicode!"
    838             print "Please set HOME environment variable to something that"
    839             print r"only has ASCII characters, e.g. c:\home"
    840             print "Now it is",rc.ipythondir
    841             sys.exit()
    842         self.shadowhist = IPython.history.ShadowHist(self.db)
    843 
    844     def post_config_initialization(self):
    845         """Post configuration init method
    846 
    847         This is called after the configuration files have been processed to
    848         'finalize' the initialization."""
    849 
    850         rc = self.rc

C:\Python27\lib\site-packages\IPython\Extensions\pickleshare.pyc in __init__(self=PickleShareDB('C:\Documents and Settings\martinhylee\_ipython\db'), root=u'C:\\Documents and Settings\\martinhylee\\_ipython/db')
     38 import cPickle as pickle
     39 import UserDict
     40 import warnings
     41 import glob
     42 
     43 def gethashfile(key):
     44     return ("%02x" % abs(hash(key) % 256))[-2:]
     45 
     46 _sentinel = object()
     47 
     48 class PickleShareDB(UserDict.DictMixin):
     49     """ The main 'connection' object for PickleShare database """
     50     def __init__(self,root):
     51         """ Return a db object that will manage the specied directory"""
     52         self.root = Path(root).expanduser().abspath()
---> 53         if not self.root.isdir():
     54             self.root.makedirs()
     55         # cache has { 'key' : (obj, orig_mod_time) }
     56         self.cache = {}
     57         
     58 
     59     def __getitem__(self,key):
     60         """ db['key'] reading """
     61         fil = self.root / key
     62         try:
     63             mtime = (fil.stat()[stat.ST_MTIME])
     64         except OSError:
     65             raise KeyError(key)
     66 
     67         if fil in self.cache and mtime == self.cache[fil][1]:
     68             return self.cache[fil][0]

TypeError: _isdir() takes exactly 1 argument (0 given)

**********************************************************************

Oops, IPython crashed. We do our best to make it stable, but...

A crash report was automatically generated with the following information:
  - A verbatim copy of the crash traceback.
  - A copy of your input history during this session.
  - Data on your current IPython configuration.

It was left in the file named:
    'C:\Documents and Settings\martinhylee\_ipython\IPython_crash_report.txt'
If you can email this file to the developers, the information in it will help
them in understanding and correcting the problem.

You can mail it to: Fernando Perez at fperez.net@gmail.com
with the subject 'IPython Crash Report'.

If you want to do it now, the following command will work (under Unix):
mail -s 'IPython Crash Report' fperez.net@gmail.com < C:\Documents and Settings\martinhylee\_ipython\IPython_crash_report.txt

To ensure accurate tracking of this issue, please file a report about it at:
https://bugs.launchpad.net/ipython/+filebug

Error in sys.excepthook:
Traceback (most recent call last):
  File "C:\Python27\lib\site-packages\IPython\CrashHandler.py", line 157, in __call__
    report.write(self.make_report(traceback))
  File "C:\Python27\lib\site-packages\IPython\CrashHandler.py", line 215, in make_report
    rpt_add('BZR revision   : %s \n\n' % Release.revision)
AttributeError: 'module' object has no attribute 'revision'

Original exception was:
Traceback (most recent call last):
  File "C:\Python27\scripts\ipython.py", line 28, in <module>
    IPython.Shell.start().mainloop()
  File "C:\Python27\lib\site-packages\IPython\Shell.py", line 1259, in start
    return shell(user_ns = user_ns)
  File "C:\Python27\lib\site-packages\IPython\Shell.py", line 73, in __init__
    debug=debug,shell_class=shell_class)
  File "C:\Python27\lib\site-packages\IPython\ipmaker.py", line 521, in make_IPython
    IP.pre_config_initialization()
  File "C:\Python27\lib\site-packages\IPython\iplib.py", line 835, in pre_config_initialization
    self.db = pickleshare.PickleShareDB(rc.ipythondir + "/db")
  File "C:\Python27\lib\site-packages\IPython\Extensions\pickleshare.py", line 53, in __init__
    if not self.root.isdir():
TypeError: _isdir() takes exactly 1 argument (0 given) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T11:26:50.297

尝试这个：

```
from pylab import *
x = np.linspace(0.4 * np.pi, 100)
plot(x, np.sin(x))
show() 
```

# image-processing - 有没有一个很好的库可以在静态照片中剪掉人物？

> ID：12632934
> 
> 赞同：0
> 
> 时间：2012-09-28T02:46:07.340
> 
> 标签：image-processing

是否有任何语言的库可以帮助识别和抓取静态照片中的人物图像？效果类似于 Kinect 隔离用户的方式。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T03:17:03.233

我认为这在很大程度上取决于设置（例如，具有良好照明条件的简单背景与具有随机照明的随机背景）。如果您可以让自己的生活更轻松并隔离一些更简单的用例，那就太好了。还有其他可用的方法，例如，看看围绕行人检测的大量研究。

我尝试过的一件事是梯度方向的直方图，它在[OpenCV 中作为 HoG 描述符](http://experienceopencv.blogspot.com/2011/02/hog-descriptor.html)实现，尽管计算量很大，但效果出奇的好。对于静态照片，这应该会产生不错的效果。您可以查看[OpenCV 示例](https://code.ros.org/trac/opencv/browser/trunk/opencv/samples/c/peopledetect.cpp?rev=2314)。我还建议您看看[Dramanan 的优秀论文](http://www.ics.uci.edu/~dramanan/papers/people_chapter.pdf)。

长话短说，感谢多年来对计算机视觉的启发性研究，那里有很多有趣的选择，这取决于您是否愿意详细介绍。尽管如此，无论算法多么聪明，我相信获得一个允许简单有效解决方案的体面设置比试图满足所有可能情况的复杂解决方案更为重要。祝你好运！

# asp.net - 如何通过仅在 LINQ 中的数据库中引用单个字段来获取两个字段中的不同值

> ID：12632942
> 
> 赞同：1
> 
> 时间：2012-09-28T02:46:58.750
> 
> 标签：asp.net, linq

如何通过**仅引用单个列**从数据库中获取不同的值。

例如，在下面的给定数据中，结果将是......请参见下面的示例。

给定数据

```
Prospect    Values
1            null
1            null
2            2.1
2            2.2
2            2.3
3            3.1
3            3.2
4            4.1
4            4.2 
```

结果

```
Prospect    Values
1            null
2            2.1
3            3.1
4            4.1 
```

不同的值是指**前景列**。这在 LINQ 中可行吗？

谢谢

RJ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T03:12:50.797

试试这个：（未经测试）

```
var q  = from row in rowList
         group row by row.Prospect into prospects
         select new { Prospect = prospects.Key, 
                      Value = prospects.First().Values }; 
```

假设`rowList`是某种`IEnumerable<Row>`，并且 Row 类型具有字段`Prospect`和`Values`，等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T03:26:49.837

这有效：

```
var results =
    values
        .ToLookup(x => x.Prospect, x => x.Value)
        .Select(x => new
        {
            Prospect = x.Key,
            Value = x.First()
        }); 
```

从此开始：

```
var values = new []
{
    new { Prospect = 1, Value = (double?)null },
    new { Prospect = 1, Value = (double?)null },
    new { Prospect = 2, Value = (double?)2.1 },
    new { Prospect = 2, Value = (double?)2.2 },
    new { Prospect = 2, Value = (double?)2.3 },
    new { Prospect = 3, Value = (double?)3.1 },
    new { Prospect = 3, Value = (double?)3.2 },
    new { Prospect = 4, Value = (double?)4.1 },
    new { Prospect = 4, Value = (double?)4.2 },
}; 
```

我得到这些结果：

![结果](../Images/436ba671e662446adc67d0e4f076f416.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T03:39:43.143

最好的方法是创建一个自定义`IComparer`并将其提供给`Distinct`方法。

我制作了一个通用版本，它采用 lambda 来实现比较。您还覆盖`GetHashValue`了首先检查的内容。在这种情况下，您可以只返回前景的比较。

# python - 在 python 中读取 ascii vtk 文件并将其转换为 numpy 数组

> ID：12632947
> 
> 赞同：2
> 
> 时间：2012-09-28T02:47:36.773
> 
> 标签：python, numpy, vtk

我有一个包含 UNSTRUCTURED POINTS 数据集的 vtk 文件。它内部有几个数据集（场、电流、密度）。

我想在 python 中加载这个文件并将每个数据集转换为 numpy 数组以使用 matplotlib 绘制它。这个怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T17:13:36.777

如果没有您的文件示例，很难给出准确的答案。但是根据我对 vtk 文件的了解，它们可以在 4 行标题之后包含 ASCII 或二进制数据。

如果 vtk 中的数据是 ASCII，那么

```
np.loadtxt(filename, skiplines=4) 
```

应该管用。同样，如果您有一堆不同的字段，您的文件结构可能会使这变得棘手。

如果数据是二进制的，你需要使用类似的东西

```
filename.read()
struct.unpack() 
```

或者

```
np.fromfile() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-04T20:50:23.457

解决方案由VTK 包中的**vtk_to_numpy函数给出。**根据网格格式（结构化或非结构化），它与 Vtk 网格阅读器一起使用：在您的情况下， **vtkXMLUnstructuredGridReader**是一个不错的选择。

示例代码如下所示：

```
from vtk import *
from vtk.util.numpy_support import vtk_to_numpy

# load a vtk file as input
reader = vtk.vtkXMLUnstructuredGridReader()
reader.SetFileName("my_input_data.vtk")
reader.Update()

#The "Temperature" field is the third scalar in my vtk file
temperature_vtk_array = reader.GetOutput().GetPointData().GetArray(3)

#Get the coordinates of the nodes and their temperatures
nodes_nummpy_array = vtk_to_numpy(nodes_vtk_array)
temperature_numpy_array = vtk_to_numpy(temperature_vtk_array)

x,y,z= nodes_nummpy_array[:,0] , 
       nodes_nummpy_array[:,1] , 
       nodes_nummpy_array[:,2]

(...continue with matplotlib) 
```

可以在此线程中找到带有 matplotib 绘图的更长版本：[VTK to Maplotlib using Numpy](https://stackoverflow.com/questions/23138112/vtk-to-maplotlib-using-numpy)

# javascript - 只有当句子中出现另一个单词时，您如何创建一个正则表达式来匹配一个单词？

> ID：12632955
> 
> 赞同：0
> 
> 时间：2012-09-28T02:48:20.587
> 
> 标签：javascript, regex, eclipse, aptana

我需要创建一个正则表达式（适用于 Eclipse 的搜索/替换），只有在同一个句子之前的任何地方出现不同的匹配时，它才会匹配一组字母。

具体来说，只有当**.css出现在包含****jsSrc**的同一行中时，我才需要匹配它。

Eclipse 不支持无限期的lookbehinds。

例子：

```
<link rel="stylesheet" type="text/css" href="<% { out.print( jsSrc( request, "/builder/builder.css" /> 
```

尝试的正则表达式：

```
\.css(?<=jsSrc) 
```

不产生匹配的**.css**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T02:52:17.983

您使用了`?<=`错误的方式向后看，这是书中的示例`Mastering Regular Expression`：如果您有 string `see Jeffs book`，并且替换`(?<=\b Jeff)(?=s\b)`为`'`，您将得到`see Jeff's book`

在您的情况下，无需使用lookbehind：

```
jsSrc.*\.css 
```

为我工作。
也许你只想用 替换`.css`部分`XXX`，那么你可以这样做：
在`Find:`字段中，输入`(jsSrc.*)\.css`和在`Replace with:`字段中，输入`\1XXX`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T02:52:24.963

你可以使用一个非常直接的正则表达式：

```
jsSrc.*\.css 
```

这将匹配`jsSrc`之前包含的任何行以及`.css`两者之间的文本。

虽然问题中没有指定，但如果您想匹配行中引号内的文件路径，您可以使用类似的东西：

```
jsSrc.*"([^"]*\.css)" 
```

# lotus-notes - 如何更新 Lotus Notes 文档？

> ID：12632956
> 
> 赞同：1
> 
> 时间：2012-09-28T02:48:37.000
> 
> 标签：lotus-notes, lotus-formula

1.  出于某种增强的原因，我在表单中添加了一些新字段。它具有默认值。
2.  但是现有文档没有使用新字段进行更新。
3.  我有成千上万的文件。我无法打开、编辑和保存。我试图从后端保存文档。我不敢相信，那也行不通。
4.  他们无论如何都要更新文件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T03:58:10.777

创建一个执行此命令的视图操作按钮：

[@Command[ToolsRefreshAllDocs])](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/index.jsp?topic=/com.ibm.designer.domino.main.doc/H_TOOLSREFRESHALLDOCS.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T08:44:37.927

如果您更喜欢使用后端类，则需要`notesDocument.ComputeWithForm( False, False )`在保存文档之前调用。

# java - 按顺序从单链表中删除重复项

> ID：12632959
> 
> 赞同：0
> 
> 时间：2012-09-28T02:49:05.720
> 
> 标签：java, list, linked-list, duplicates

所以我有一个 0.1,3.0,4.5,-1,3.0,-10.0,3.0,3.0 的列表我应该在下面的代码之后得到一个 0.1,3.0,4.5,-1.0,-10.0 的列表

```
public void removeDuplicates()
{
    if (head == null)
        return;

    Node iter = head;

    while (iter != null)
    {
        Node currNode = iter;
        while (currNode != null && currNode.next != null)
        {
            if (iter.value == currNode.next.value)
            {
                currNode.next = currNode.next.next;
                nItem--;
            }
            currNode = currNode.next;
        }
        iter = iter.next;
    }
} 
```

我什至有一段时间，直到我修复了一些东西并运行它，然后意识到这里也出了问题。

因为我现在得到 0.1,3.0,4.5,-1.0,-10.0,3.0。为什么最后一个 3.0 标记在一起？我首先认为它可能已经被循环/包裹，但意识到我没有做任何那样的事情。关于逻辑流程的建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T02:53:23.130

在您的代码中， `while (currNode != null && currNode.next != null)`

&& 运算符 has 之后的条件`currnode.next != null`，实际上将忽略检查最后一个节点，因此删除它。

**编辑 ：**

此外，你将不得不改变线路`if (iter.value == currNode.next.value)`

因为现在它会尝试检查最后一个节点`currNode.next = null`。因此，您必须将其更改为：

```
if (currNode.next != null && iter.value == currNode.next.value) 
```

总体而言，您应该从下一个节点开始检查，即：currNode = iter.next，保留前一个指针并更改检查相等性的条件，如下所示：

```
public void removeDuplicates()
{
    if (head == null)
        return;

    Node iter = head;

    while (iter != null)
    {
        Node prevNode = iter;
        Node currNode = iter.next;
        while (currNode != null)
        {
            if (iter.value == currNode.value)
            {
                prevNode.next = currNode.next;
                nItem--;
            } else {
                prevNode = currNode; //updating prevNode in case of not a match
            }
            currNode = currNode.next;
        }
        iter = iter.next;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T03:00:17.170

`Node currNode = iter;`=> `Node currNode = iter.next;`//检查从下一个节点开始

`while (currNode != null && currNode.next != null)`=> `while (currNode != null)`//不检查空节点

# ember.js - 如何在emberjs中使用rails资产管道图像？

> ID：12632966
> 
> 赞同：21
> 
> 时间：2012-09-28T02:50:34.730
> 
> 标签：ember.js, asset-pipeline

我正在使用带有导轨的余烬。我想在 rails 资产管道中获取图像路径。emberjs 是否有像 sass-rails 中的资产路径这样的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-11T05:07:22.913

这并不理想，但由于缺乏更好的解决方案，我一直在我的 css 中处理这个问题：

```
.logo{
   background-image: url(image_path('logo.png'))
 } 
```

这种方法通常很好，但也有缺点。在 Stackoverflow 中有一个关于使用 img 标签与背景图像的精彩[讨论](https://stackoverflow.com/questions/492809/when-to-use-img-vs-css-background-image)。

# php - 使用 .css 而不是 .php 与 content-type: text/css 有什么好处？

> ID：12632968
> 
> 赞同：1
> 
> 时间：2012-09-28T02:50:40.977
> 
> 标签：php, css

使用 CSS 外部样式表而不是设置为 的 php 文件有什么好处`content-type: text/css`？如果你把这个头文件放在 PHP 文件的顶部，我觉得你有更多的潜力：

```
<?php
    header("Content-type: text/css");

    if($query_string = "contact_us") {
        #nav {}
    }
?> 
```

（^ 那是一个 .php 文件）。[http://shapeshed.com/using_php_to_enhance_css/](http://shapeshed.com/using_php_to_enhance_css/)

如果没有失败（我检查了它们是如何缓存在 Chrome 的网络面板中的，我相信它是一样的），是不是有点像使用`.html`or `.php`？

感谢您的任何反馈。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T03:05:14.743

以下是一些区别：

*   与提供纯静态 CSS 相比，PHP 将产生额外的 CPU/内存开销。可能不是那么多，但仍然是一个考虑因素。显然，你做的处理越多，交易就越大。
*   您不能将 PHP 文件推送到 CDN
*   SASS 和 LESS 已被开发用于处理您可能需要的任何动态功能，因此 PHP 可能不是必需的
*   听起来您担心提供比某些页面所需的更多 CSS。实际上这不是问题，因为浏览器会在第一次下载后缓存 CSS。

额外的想法：

我编写了一个 UI 模板引擎，它将 JS 和 CSS 代码隔离到仅使用它们的特定视图。如果一个 CSS 或 JS 被多次使用，它会被推送到“厨房水槽级别”并被全局包含。这限制了选择器冲突，并最好地平衡了 HTTP 请求的数量和每个请求的总下载大小。将相关代码（即按钮事件侦听器或页面/元素特定样式）保持在一起有助于更快速的编程，尤其是对于非专家团队/开发人员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T02:53:41.097

在诸如[SASS](http://sass-lang.com/)或[LESS](http://lesscss.org/)之类的 CSS 预处理器之前，这可能会很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T02:53:52.087

动态 CSS 甚至不如动态 JavaScript 有用，更不用说动态 HTML。拥有一个包含所有规则的大文件比拥有一个规则更改的文件更有效，因为与后者相比，您可以更轻松地将前者缓存在客户端中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T02:56:41.133

现实情况是，这并没有太多好处……动态 CSS 没有很多有效的用例，而您所描述的肯定不是其中之一。如果您只是将所有 css 合并并缩小到一个文件中，它将缓存在客户端上，并且只有在您破坏缓存时才会下载。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T03:04:29.500

在模块化 CMS 中，这可能很有用。只要您的应用程序可以生成一个`.php`一致地生成完全相同的 CSS 用于缓存目的的 URL，您就可以显着减少要下载的 CSS 数量。例如，使用 1 个主题和 5 个模块（每个都提供 CSS）的页面可以返回该组合的 CSS，而不是 1 个主题和 50 个模块的 CSS。这可能是 50KB 的 CSS 和 500KB 之间的差异——对于较慢的连接来说是一个巨大的节省。

如果您的网站是手工制作的，例如在一个预先知道特定目标的网站中，那么确实没有像其他人回答的那样这样做的充分理由。

# windows-8 - 无法在 Windows 8 上使用 Windows Live 帐户使我的计算机成为“受信任的 PC”

> ID：12632980
> 
> 赞同：2
> 
> 时间：2012-09-28T02:52:56.440
> 
> 标签：windows-8, windows-store

几周前我升级到了 Windows 8 RTM，昨天我尝试使用我的 bizspark 令牌创建一个 Windows 应用商店帐户。我收到消息：“我们无法识别您正在使用的计算机”。

这是我一直在使用的同一台计算机。据我所知，我应该在升级时收到一封电子邮件，以确认这是一台新的受信任计算机。我从没干过。我有有效的电子邮件帐户和与我的 Windows Live 帐户相关联的电话号码。

在试图弄清楚我“删除”列出的受信任计算机时，这将在 30 天内发生，但如果我单击取消删除，我将被带到一个屏幕，上面写着：

“使用您现有的安全信息来帮助我们确保这就是您。我们如何联系您？”，唯一可用的选项是“使用我信任的 PC”。

我在某个论坛的某个地方看到了 Windows Essentials 应该提供的帮助，我下载了它并运行了 wlstartup.exe，如果我没记错的话，我可以选择让它成为一台受信任的 PC。没关系，我仍然不被信任。如果我重新运行 wlstartup，它只会给我一个对话框，上面写着“连接您最喜欢的服务”并带有一个 Linked In 徽标。我在没有其他应用程序运行并退出 Live 和 messenger 的情况下进行了尝试。wlstartup的文件版本为：16.4.3503.728

我试过 devices.live.com ，单击“添加这台计算机”链接，它会将我带到 Essentials 下载页面，如前所述，我已经下载并运行了该页面。

所以基本上，我需要让我的计算机受信任（再次），这样我才能获得一个 Windows Store 帐户，但不知道如何。

其他人有这个问题吗？

谢谢，克雷格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T04:43:45.303

您是否可能重新安装了 Windows 8。您需要从旧安装中信任新 PC，这是不可能的，因此令人沮丧的是，您必须等待 30 天才能删除旧安装并添加新的受信任 PC。

[http://www.windowsitpro.com/article/security/windows-live-trusted-computer-143668](http://www.windowsitpro.com/article/security/windows-live-trusted-computer-143668)

# hl7 - Mirth - 在查询数据之前等待来自服务器的消息

> ID：12632986
> 
> 赞同：1
> 
> 时间：2012-09-28T02:54:09.090
> 
> 标签：hl7, mirth

我是 Mirth 的新手（目前使用的是 2.2.1.56861 版本）

我需要配置一个客户端，以便它执行以下操作：

*   连接到服务器端口
*   等待消息 (ORU^R01)
*   向服务器发送 QRY^R02

这在 Mirth 中可能吗？

我已经设置了一个 LLP 发件人，但似乎建立了连接，发送了 QRY^R02 然后连接关闭

任何帮助将非常感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T11:26:24.820

如果我正确理解您的问题，您需要设置这样的频道：

资源：`LLP Listener`

*   等待服务器连接到它并发送`ORU^R01`消息。
*   其他消息类型可能会根据来源`Filter`标准被过滤掉。
*   可以使用`Transformer`步骤从消息中提取数据以在`ORU^R01`消息中使用`QRY^R02`。

目的地：`LLP Sender`

*   当`ORU^R01`从 接收到a 时`Source`，将相关`QRY^R02`消息发送到服务器。
*   `QRY^R02`使用对 a 进行操作的一系列`Transformer`步骤构造消息`Message Template`。
*   不需要发送到与`ORU^R01`接收消息相同的端口甚至相同的服务器。

# r - 捕获警告而不将其转换为错误

> ID：12632987
> 
> 赞同：0
> 
> 时间：2012-09-28T02:54:39.107
> 
> 标签：r

我需要在不干扰生成它们的混合模型的操作的情况下捕获警告（在 R 中）。到目前为止，我已经研究了两种变体。在一种情况下，当发生导致模型翻倒的错误时，我很高兴能够在模型运行成功时记录这些实例中的拟合对象，并散布故障记录：

```
storOutcomes<-lapply(1:50, function(i)tryCatch(CustomlmerFnctn(Datasets[[i]]),
error=function(e) NULL )) 
```

在第二种情况下，我可以使用 options(warn=2) 将警告更改为错误，并使用与上述类似的语法。但是，我看不到如何记录拟合对象和收敛状态，即至少出现两个警告

```
“In mer_finalize (ans) : singular convergence (7)” 
```

或者

```
“In mer_finalize (ans) : false convergence (8)“ 
```

我希望能够将收敛状态与模型参数联系起来。所以基本上我想知道如何捕获警告而不将它们转化为错误。我已经尝试将`options(warn=1)`,`suppressMessages`和`sink(…, type(“output”,”message”))`与`cat()`从模型函数生成迭代/数据集 ID 的语句结合使用，但这只会将连续 ID 写入文件，而在标准输出上留下警告。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T03:17:58.943

从您的复杂示例中很难分辨，但也许

```
warn <- NULL
value <- withCallingHandlers({
    warning("oops")
    1 + 2
}, warning = function(w) {
    warn <<- append(warn, conditionMessage(w))
    invokeRestart("muffleWarning")
}) 
```

导致

```
> warn
[1] "oops"
> value
[1] 3 
```

这也在`?withCallingHandlers`其附加文档中进行了说明`demo(error.catching)`。`muffleWarning`上提到`?warning`。

# c - 分段错误 - 套接字编程

> ID：12632991
> 
> 赞同：0
> 
> 时间：2012-09-28T02:54:57.780
> 
> 标签：c, sockets

我在运行一小段代码时遇到问题。这是关于 C 中的套接字编程。我想做的是让客户端在两个不同的端口上与服务器通信。但是当我试图编译客户端代码时，我得到了“分段错误”。我在这里给我的客户代码。请让我知道出了什么问题。

```
 #include<stdio.h>
    #include<stdbool.h>
    #include<string.h>
    #include<stdlib.h>
    #include<time.h>
    #include <sys/types.h>
    #include <sys/socket.h>
    #include <netinet/in.h>
    #include <netdb.h>

    int main(int argc,char *argv[])
    {
     int sockfd,newsockfd,sockfd_infinite,sockfd_kitchen,portno,portno1,n,no_of_tables;
     struct sockaddr_in serv_addr,kitchen_addr;
     struct hostent *server,*kitchen;
     struct timeval time_out;
     time_out.tv_sec = 15;    // 15 seconds
     time_out.tv_usec = 0;    // 0 milliseconds
    //       server=gethostbyname(argv[1]);
    //       char buffer[256];
     portno=atoi(argv[2]);
     portno1=atoi(argv[4]);
     sockfd=socket(AF_INET,SOCK_STREAM,0);
     if(sockfd==-1)
            error("\nError creating socket");
     server=gethostbyname(argv[1]);
     serv_addr.sin_family=AF_INET;
     serv_addr.sin_port=htons(portno);
     bcopy((char *)server->h_addr,
            (char *)&serv_addr.sin_addr.s_addr,
            server->h_length);

     sockfd_kitchen=socket(AF_INET,SOCK_STREAM,0);
     if(sockfd_kitchen==-1)
            error("\nError creating socket");
     kitchen=gethostbyname(argv[3]);
     kitchen_addr.sin_family=AF_INET;
     kitchen_addr.sin_port=htons(portno1);
     bcopy((char *)kitchen->h_addr,
            (char *)&kitchen_addr.sin_addr.s_addr,
            kitchen->h_length);

     n=connect(sockfd_kitchen,(struct sockaddr *)&kitchen_addr,sizeof(kitchen_addr));
     if(n==-1)
            error("\nError connecting to kitchen");
     n=connect(sockfd,(struct sockaddr *)&serv_addr,sizeof(serv_addr));
     if(n==-1)
            error("\nError connecting to server");
     return 0;
    } 
```

所以这段代码背后的想法是——有一个客户端和一个服务器。该客户端希望在两个不同的端口上与服务器通信，就好像客户端正在与两个不同的服务器通信一样。我在我的笔记本电脑上执行此操作，将服务器名称作为服务器名称和不同端口号的“localhost”提供。就像您在我的代码中看到的那样，我有两个用于两个服务器的指针变量，即 *server 和 *kitchen。

例如：./thiscode localhost 15535 localhost 12345

在我提到的示例中，这就是我编译客户端代码的方式。argv[1] 是第一个“localhost”（服务器名称），argv[2] 是第一个服务器的端口号。第二个“localhost”和“12345”是第二个服务器的名称和端口号。

就像我之前说过的，我试图让我的笔记本电脑上的三个窗口运行三种不同的代码（一个用于客户端，两个用于服务器）。我的两个服务器代码编译没有任何问题，但我的客户端代码出现了这个“分段”错误。请让我知道我哪里出错了。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T03:00:56.850

首先，您应该检查以下返回值`gethostbyname`：

> 如果发生错误，gethostbyname() 和 gethostbyaddr() 函数将返回 hostent 结构或 NULL 指针。出错时，h_errno 变量保存一个错误号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-24T09:04:50.657

似乎问题出在`bcopy()`函数调用中。

**在将内容复制到变量之前，您没有为变量声明空间，因此您看到了分段错误**。

在语句前输入以下代码`bcopy()`以删除 Seg-fault：

```
serv_addr.sin_addr.s_addr=malloc(sizeof(unsigned long)); 
```

# python - GridSearch 用于 OneVsRestClassifier 中的估计器

> ID：12632992
> 
> 赞同：46
> 
> 时间：2012-09-28T02:55:04.057
> 
> 标签：python, machine-learning, scikit-learn

我想在 SVC 模型中执行 GridSearchCV，但它使用一对多策略。对于后一部分，我可以这样做：

```
model_to_set = OneVsRestClassifier(SVC(kernel="poly")) 
```

我的问题是参数。假设我想尝试以下值：

```
parameters = {"C":[1,2,4,8], "kernel":["poly","rbf"],"degree":[1,2,3,4]} 
```

为了执行 GridSearchCV，我应该执行以下操作：

```
 cv_generator = StratifiedKFold(y, k=10)
 model_tunning = GridSearchCV(model_to_set, param_grid=parameters, score_func=f1_score, n_jobs=1, cv=cv_generator) 
```

但是，然后我执行它我得到：

```
Traceback (most recent call last):
  File "/.../main.py", line 66, in <module>
    argclass_sys.set_model_parameters(model_name="SVC", verbose=3, file_path=PATH_ROOT_MODELS)
  File "/.../base.py", line 187, in set_model_parameters
    model_tunning.fit(self.feature_encoder.transform(self.train_feats), self.label_encoder.transform(self.train_labels))
  File "/usr/local/lib/python2.7/dist-packages/sklearn/grid_search.py", line 354, in fit
    return self._fit(X, y)
  File "/usr/local/lib/python2.7/dist-packages/sklearn/grid_search.py", line 392, in _fit
    for clf_params in grid for train, test in cv)
  File "/usr/local/lib/python2.7/dist-packages/sklearn/externals/joblib/parallel.py", line 473, in __call__
    self.dispatch(function, args, kwargs)
  File "/usr/local/lib/python2.7/dist-packages/sklearn/externals/joblib/parallel.py", line 296, in dispatch
    job = ImmediateApply(func, args, kwargs)
  File "/usr/local/lib/python2.7/dist-packages/sklearn/externals/joblib/parallel.py", line 124, in __init__
    self.results = func(*args, **kwargs)
  File "/usr/local/lib/python2.7/dist-packages/sklearn/grid_search.py", line 85, in fit_grid_point
    clf.set_params(**clf_params)
  File "/usr/local/lib/python2.7/dist-packages/sklearn/base.py", line 241, in set_params
    % (key, self.__class__.__name__))
ValueError: Invalid parameter kernel for estimator OneVsRestClassifier 
```

基本上，由于 SVC 位于 OneVsRestClassifier 内，并且这是我发送到 GridSearchCV 的估计器，因此无法访问 SVC 的参数。

为了完成我想要的，我看到了两个解决方案：

1.  在创建 SVC 时，以某种方式告诉它不要使用一对一的策略，而是使用一对多的策略。
2.  以某种方式指示 GridSearchCV 参数对应于 OneVsRestClassifier 内的估计器。

我还没有找到一种方法来做任何提到的替代方案。你知道是否有办法做到这些吗？或者，也许您可​​以建议另一种方法来获得相同的结果？

谢谢！

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-09-28T09:44:20.717

当您使用带有网格搜索的嵌套估计器时，您可以将参数范围`__`用作分隔符。在这种情况下，SVC 模型存储为模型`estimator`内部命名的属性`OneVsRestClassifier`：

```
from sklearn.datasets import load_iris
from sklearn.multiclass import OneVsRestClassifier
from sklearn.svm import SVC
from sklearn.grid_search import GridSearchCV
from sklearn.metrics import f1_score

iris = load_iris()

model_to_set = OneVsRestClassifier(SVC(kernel="poly"))

parameters = {
    "estimator__C": [1,2,4,8],
    "estimator__kernel": ["poly","rbf"],
    "estimator__degree":[1, 2, 3, 4],
}

model_tunning = GridSearchCV(model_to_set, param_grid=parameters,
                             score_func=f1_score)

model_tunning.fit(iris.data, iris.target)

print model_tunning.best_score_
print model_tunning.best_params_ 
```

这会产生：

```
0.973290762737
{'estimator__kernel': 'poly', 'estimator__C': 1, 'estimator__degree': 2} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-11-30T09:13:46.747

```
param_grid  = {"estimator__alpha": [10**-5, 10**-3, 10**-1, 10**1, 10**2]}

clf = OneVsRestClassifier(SGDClassifier(loss='log',penalty='l1'))

model = GridSearchCV(clf,param_grid, scoring = 'f1_micro', cv=2,n_jobs=-1)

model.fit(x_train_multilabel, y_train) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-10-25T20:32:45.540

对于 Python 3，应使用以下代码

```
from sklearn.datasets import load_iris
from sklearn.multiclass import OneVsRestClassifier
from sklearn.svm import SVC
from sklearn.model_selection import GridSearchCV
from sklearn.metrics import f1_score

iris = load_iris()

model_to_set = OneVsRestClassifier(SVC(kernel="poly"))

parameters = {
    "estimator__C": [1,2,4,8],
    "estimator__kernel": ["poly","rbf"],
    "estimator__degree":[1, 2, 3, 4],
}

model_tunning = GridSearchCV(model_to_set, param_grid=parameters,
                             scoring='f1_weighted')

model_tunning.fit(iris.data, iris.target)

print(model_tunning.best_score_)
print(model_tunning.best_params_) 
```

# java - 带有 ServletContextListener 的线程池

> ID：12632996
> 
> 赞同：1
> 
> 时间：2012-09-28T02:56:11.340
> 
> 标签：java, multithreading

我想运行一些简单的后台进程计算，但我似乎无法弄清楚。不管我做什么，它都会阻塞。

```
public class WorkThreadManagerContextLoaderListener implements ServletContextListener {
    private Runnable runnable;
    private WorkManager workManager;

    @Override
    public void contextInitialized(ServletContextEvent event) {
        final WebApplicationContext springContext = WebApplicationContextUtils.getWebApplicationContext(event.getServletContext());
        workManager = (WorkManager) springContext.getBean("workThreadManager");

        runnable = new WorkThreadManagerStartUp(WorkManager);

        runnable.run();
    }

    @Override
    public void contextDestroyed(ServletContextEvent event) {
        workManager.shutDown();
    }
} 
```

WorkThreadManagerStartUp 存在的原因是因为我不希望它阻塞所以我将它设为 Runnable 类型，当调用 run() 时，它会启动一个 ExecutorService：

```
public class UnitOfWorkThreadManagerStartUp implements Runnable {
    private WorkManager workManager;

    public UnitOfWorkThreadManagerStartUp(WorkManager workManager) {
        this.workManager = workManager;
    }

    @Override
    public void run() {
        workManager.startUp();
    }
}

public class WorkThreadManager implements WorkManager {
    @Autowired
    private WorkService workService;

    private final int availableProcessors = Runtime.getRuntime().availableProcessors();
    private final ExecutorService executorService = Executors.newFixedThreadPool(4 * availableProcessors);

    @Override
    public void startUp() {
        // this method always blocks...
    }
} 
```

但我的解决方案没有按预期工作。我在 Tomcat 7.0.30 上运行。

我想弄清楚的是如何在不停止 Web 应用程序部署的情况下在后台启动线程池，因为目前由于 startUp() 总是阻塞，它永远无法完全联机。我想简化这个解决方案，如果不需要的话，可能会删除 WorkThreadManagerStartUp 类。

编辑：

我修改了启动类

```
public class WorkThreadManagerStartUp implements Runnable {
    private WorkManager workManager;

    public WorkThreadManagerStartUp(WorkManager workManager) {
        this.workManager = workManager;
    }

    @Override
    public void run() {
    try {
        while (true) {
                System.out.println("Hello World!");
                Thread.sleep(1000 * 10);
            }
        } catch(InterruptedException e) {
            System.out.println(e.getMessage());
        }
    }
} 
```

虽然这应该在它自己的线程上运行，Hello World！按预期显示多次，但不允许 Web 应用程序联机。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:00:07.240

查看您的来源，我没有看到实际创建的任何线程。通常，您会执行以下操作来分叉线程：

```
new Thread(new WorkThread(...)).start(); 
```

这将调用`WorkThread.run()`新线程中的方法。如果您使用的是`ExecutorService`（通常推荐使用的“手动”代码`Thread`），那么您将执行以下操作：

```
executorService.submit(new WorkThread(...));
...
// when done with the service you have to shut it down
executorService.shutdown(); 
```

如果您将您的`WorkManager`类注入到您的监听器类中，那么我只需`submit(...)`在管理器上添加一个方法，然后在监听器中执行以下操作：

```
workManager.submit(new WorkThread()); 
```

这意味着`WorkThreadManagerStartUp`该类是没有必要的。您将工作线程或工作单元提交给服务。

就 Spring 而言，我只是让你的`WorkManager`类实现`InitializingBean`，`DisposableBean`这样它就可以自己启动和停止它的服务。没有理由让另一个 bean 这样做。然后，您可以将管理器注入到任何想要`WorkThread`使用由管理器管理的类中运行的类`ExecutorService`。