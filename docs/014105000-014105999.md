# StackOverflow 问答 14105000-14105999

# javascript - 为什么正则表达式在我的 JavaScript 中占据主导地位，我如何坚持“这是一个字符串”？

> ID：14105006
> 
> 赞同：-7
> 
> 时间：2012-12-31T18:34:48.900
> 
> 标签：javascript, regex, parsing, google-chrome, firefox

我有 JavaScript 代码，例如：

```
 quotes = [];
 quotes[quotes.length] = "ABC quote";
 quotes[quotes.length] = "DEF quote";
 ... 
```

其中一条特别是：

```
quotes[quotes.length] = "Mark Twain said, &apos;The secret source of humor itself is not joy but sorrow.  There is no humor in Heaven.&apos;<br /><a href=\"/pain\/">Humor Delivers Pain</a>"; 
```

Chrome 抱怨那条线，超过一百行，我试图解决将撇号替换为'的问题。但是，它仍然在抱怨这一行，语法高亮显然没有看到开头的双引号，而只有正则表达式**/pain/">Humor Delivers Pain</**。

该表达式之前的所有内容都按预期突出显示为字符串，即使此类正则表达式字符串是样板子字符串；上一行，就像之前的那些：

```
quotes[quotes.length] = "The author was shaped by M.K. Gandhi. Here is why he is taking leave of Gandhi.<br /><a href=\"/gandhi/\">Farewell to Gandhi</a>"; 
```

即使这在引号内包含可能是正则表达式文字的内容，它也会被解释为预期的，作为包含转义引号的双引号字符串。

我正在尝试的页面是[http://JonathansCorner.com/firestorm/](http://JonathansCorner.com/firestorm/)。它旨在在页面顶部打印出通知，并更改链接。现在，它正在作为马克吐温的名言而崩溃。

Firefox 对 Twain 的引用提出了投诉，称声明前缺少分号。我不确定那是从哪里来的；这可能是更高报价造成的二次损害吗？

JavaScript 本身位于[http://jonathanscorner.com/include/deprecation_notice.js](http://jonathanscorner.com/include/deprecation_notice.js)。

- 编辑 -

@Lightness，问题表现为前一行的两行样本，然后是绘制错误的行。有同样的错误，在前面的脚本行中指出，在：

```
quotes = [];
quotes[quotes.length] = "The author was shaped by M.K. Gandhi. Here is why he is taking leave of Gandhi.<br /><a href=\"/gandhi/\">Farewell to Gandhi</a>";
quotes[quotes.length] = "Mark Twain said, &apos;The secret source of humor itself is not joy but sorrow.  There is no humor in Heaven.&apos;<br /><a href=\"/pain\/">Humor Delivers Pain</a>"; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T18:36:46.087

```
<a href=\"/pain\/"> 
```

第二个双引号没有转义。`\"`不是`/"`。

将这些引号存储在纯文本文件或数据库中并自动转义它们可能会更可靠。手动转义大量文本是一件苦差事。

# mysql - 如何在 MySQL 中搜索 date_format 字段

> ID：14105013
> 
> 赞同：4
> 
> 时间：2012-12-31T18:35:49.580
> 
> 标签：mysql, sql, date, select

我已经更改了字段的日期格式，但是它没有找到新日期模式的记录。

```
SELECT id, DATE_FORMAT(sale_date, "%d-%m-%Y") AS sale_date 
FROM sales 
WHERE sale_date = '31-12-2012'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T18:43:33.130

试试这个：

```
SELECT id, DATE_FORMAT(sale_date, "%d-%m-%Y") AS sale_date 
FROM sales 
WHERE sale_date = STR_TO_DATE('31-12-2012' , "%d-%m-%Y") ; 
```

**或者**

```
SELECT id, DATE_FORMAT(sale_date, "%d-%m-%Y") AS sale_date 
FROM sales 
WHERE DATE_FORMAT(sale_date, "%d-%m-%Y") = '31-12-2012'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T18:42:50.070

假设您为 column使用 a `timestamp`or格式，则必须指定日期，如 YYYY-MM-DD：`date``sale_date`

```
 WHERE sale_date = '2012-12-31'; 
```

# jquery - 无法动态更改文本来源

> ID：14105015
> 
> 赞同：1
> 
> 时间：2012-12-31T18:36:01.377
> 
> 标签：jquery, html, dynamic

```
<!DOCTYPE html>
<html>

    <head>
        <script src="jquery.js"></script>
        <script>
            $(document).ready(function (e) {
                e.preventDefault;
                $("a").click(function (event) {
                    var url = $(this).attr('href');
                    event.preventDefault();
                    $("#bg").slideDown(1000, function () {
                        $("#content").hide().load(url + ' #content', function () {
                            $("#bg").slideUp(1000);
                            $(this).show();
                        });
                    });
                });
            });
        </script>
        <style>
            nav ul li {
                display: inline;
                padding: 0px 20px;
                text-decoration: none;
            }
            #bg {
                position: fixed;
                top: 100px;
                transition: all 2s;
                background-color: gray;
                z-index:25;
                width: 100%;
                height: 500px;
                display: none;
            }
        </style>
    </head>

    <body>
        <div>
                <h2>DEMO</h2>

            <nav>
                <ul>
                    <li>
                        <a href="first.html#content">First</a>
                        <li>
                            <a href="second.html#content">Second</a>
                            <li>
                                <a href="third.html#content">Third</a>
                </ul>
            </nav>
            <div id="all">
                <div id="bg"></div>
                <p id="content">banna third Lorem ipsum dolor sit amet, consectetuer adipiscing elit,
                    sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam
                    erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation
                    ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat.
                    Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie
                    consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et
                    accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit
                    augue duis dolore te feugait nulla facilisi. Nam liber tempor cum soluta
                    nobis eleifend option congue nihil imperdiet doming id quod mazim placerat
                    facer possim assum. Typi non habent claritatem insitam; est usus legentis
                    in iis qui facit eorum claritatem. Investigationes demonstraverunt lectores
                    legere me lius quod ii legunt saepius. Claritas est etiam processus dynamicus,
                    qui sequitur mutationem consuetudium lectorum. Mirum est notare quam littera
                    gothica, quam nunc putamus parum claram, anteposuerit litterarum formas
                    humanitatis per seacula quarta decima et quinta decima. Eodem modo typi,
                    qui nunc nobis videntur parum clari, fiant sollemnes in futurum.</p>
            </div>
        </div>
    </body>

</html> 
```

我曾经发布过另一个问题

我解决了窗帘动画部分，但现在无法动态更改内容

我还有两个 html 文件 second.html 和 third.html

在内容改变之前，窗帘需要落下

窗帘隐藏文字后，内容必须改变

内容更改后，窗帘必须抬起以显示新内容

# c++ - OpenGL同时绘制2D和3D

> ID：14105017
> 
> 赞同：2
> 
> 时间：2012-12-31T18:36:22.590
> 
> 标签：c++, opengl, graphics, 3d, 2d

我有一个正在绘制的 3D 场景，我想为对话文本绘制一个矩形，该矩形将被拉伸到整个屏幕的宽度，考虑到性能，实现这一目标的最佳方法是什么？

我发现 glOrtho() 可以用于精确的像素放置，但由于它是一个矩阵乘法任务，在对话场景中我的应用程序不会感觉更重吗？如果是，我是否应该尝试找到一个数学解决方案来根据一些 Z 距离找到我的左窗口角的 X 位置并从那里绘制一个 QUAD？（这甚至可能吗？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T18:45:20.530

`glOrtho()`是要走的路。

在[OpenGL 的渲染 Pipeline](http://www.songho.ca/opengl/gl_pipeline.html)过程中，在 Primitive Assembly 阶段，每个顶点都会从眼睛坐标转换（投影）到剪辑坐标。无论您的投影矩阵是用于 3D 透视还是 2D 正交化，在光栅化开始之前，它仍然是每个顶点的一次矩阵乘法。

`glOrtho()`会将您的投影矩阵更改为正交矩阵，但矩阵只需要每帧生成一次，并且这样做所需的方程非常简单：

![在此处输入图像描述](../Images/7225f131d636cae81a8b68f9f9c8ce0f.png)

（[图片来源](http://msdn.microsoft.com/en-us/library/dd373965%28v=VS.85%29.aspx)：MSDN）

一旦你有了一个投影矩阵，不要让*矩阵乘法*的想法吓到你。这正是显卡的设计初衷，如今对于任何处理器或 GPU 来说，这几乎不是一项令人恐惧的任务。

# mysql - 生成一系列日期

> ID：14105018
> 
> 赞同：27
> 
> 时间：2012-12-31T18:36:30.030
> 
> 标签：mysql

mysql 在给定范围内生成一系列日期的最佳方法是什么？

我想到的应用程序是编写一个报告查询，它为每个日期返回一行，而不管是否有任何数据要报告。最简单的形式：

```
select dates.date, sum(sales.amount)
from <series of dates between X and Y> dates
left join sales on date(sales.created) = dates.date
group by 1 
```

我尝试过创建一个包含很多日期的表格，但这似乎是一个糟糕的解决方法。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2017-09-01T01:41:07.613

如果您处于像我这样**禁止创建临时表**并且**也不允许设置变量的情况**，但是您想**生成特定时期内的日期列表**，例如当前年份进行一些汇总，请使用此

```
select * from 
(select adddate('1970-01-01',t4*10000 + t3*1000 + t2*100 + t1*10 + t0) gen_date from
 (select 0 t0 union select 1 union select 2 union select 3 union select 4 union select 5 union select 6 union select 7 union select 8 union select 9) t0,
 (select 0 t1 union select 1 union select 2 union select 3 union select 4 union select 5 union select 6 union select 7 union select 8 union select 9) t1,
 (select 0 t2 union select 1 union select 2 union select 3 union select 4 union select 5 union select 6 union select 7 union select 8 union select 9) t2,
 (select 0 t3 union select 1 union select 2 union select 3 union select 4 union select 5 union select 6 union select 7 union select 8 union select 9) t3,
 (select 0 t4 union select 1 union select 2 union select 3 union select 4 union select 5 union select 6 union select 7 union select 8 union select 9) t4) v
where gen_date between '2017-01-01' and '2017-12-31' 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-12-31T18:43:09.430

我认为有一个**日历表**是个好主意。您可以获得大量报告和查询功能，尤其是在填充稀疏数据范围时。

我发现[这篇文章](http://www.brianshowalter.com/calendar_tables)似乎是一个很好的例子。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-12-31T18:40:44.720

您可以使用变量生成日期系列：

```
Set @i:=0;
SELECT DATE(DATE_ADD(X, 
INTERVAL @i:=@i+1 DAY) ) AS datesSeries
FROM yourtable, (SELECT @i:=0) r
where @i < DATEDIFF(now(), date Y) 
; 
```

*不确定这是否是您尝试过的:)。*

接下来使用上面生成的查询作为表`left join`：

```
set @i:=0;

select
d.dates,
sum(s.amount) as TotalAmount
from(
SELECT DATE(DATE_ADD(X, 
INTERVAL @i:=@i+1 DAY) ) AS dateSeries
FROM Sales, (SELECT @i:=0) r
where @i < DATEDIFF(now(), date Y) 
) dates d 
left join Sales s
on Date(s.Created) = Date(d.dateSeries)
group by 1
; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-01T12:38:42.220

您还可以使用临时表来生成日期系列。检查以下查询：

```
CREATE TEMPORARY TABLE daterange (dte DATE); 

SET @counter := -1;
WHILE (@counter < DATEDIFF(DATE(_todate), DATE(_fromdate))) DO 
    INSERT daterange VALUES (DATE_ADD(_fromdate, INTERVAL @counter:=@counter + 1 DAY));
END WHILE;

SELECT dates.dte, SUM(sales.amount)
FROM daterange dates
LEFT JOIN sales ON DATE(sales.created) = dates.date
GROUP BY dates.dte; 
```

# python - AttributeError：消息实例没有属性“包”

> ID：14105023
> 
> 赞同：2
> 
> 时间：2012-12-31T18:36:43.590
> 
> 标签：python, python-3.x, python-2.7, tkinter

我将 Tkinter 用于 GUI，但我有一个问题：我尝试制作一个消息小部件，当我编写时：

```
body = Message(top, bd = 2)
body.pack(side=RIGHT) 
```

我收到此错误：

```
body.pack(side=RIGHT)
AttributeError: Message instance has no attribute 'pack' 
```

我不明白这一点，因为我检查了一些指南并允许以这种方式使用“消息”，如示例中所示：[http ://www.tutorialspoint.com/python/tk_message.htm](http://www.tutorialspoint.com/python/tk_message.htm)

有没有另一种写法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T20:30:20.180

Tkinter中至少有两个`Message`类。其中一个来自`tkMessageBox.Message`，另一个来自`Tkinter.Message`。前者是`Dialog`from的子类`tkCommonDialog`，由于打包一个对话框是没有意义的，所以这种情况下没有`pack`方法。后者是一个名为 message 的 Tk 小部件，这是您想要的；作为一个小部件，打包它是有意义的。

您的完整代码大多像以下形式（Python 2）：

```
from Tkinter import *
from tkMessageBox import * 
```

第二个导入隐藏了`Message`第一个导入的类。要使用`Message`您所追求的课程，只需将上面的代码更改为：

```
from Tkinter import *
import tkMessageBox 
```

然后相应地调整您的代码。

# jqgrid - jqGrid - 按列的默认排序顺序

> ID：14105031
> 
> 赞同：5
> 
> 时间：2012-12-31T18:36:58.893
> 
> 标签：jqgrid, jqgrid-php

除夕快乐！

我希望能够将某些列的默认值设置为降序。因此，用户第一次单击该列时，它会按自然降序排序。

设置网格的默认排序字段和顺序没有问题。但这就是我找到的所有信息。

```
$grid->setGridOptions(array(

"caption"=>"Player Statistics",
"rowNum"=>200,
"rowList"=>array(50,200,1000),
"sortname"=>"percentOwned",
"sortorder" => 'desc',
"width" => 1000,
"height" => 400,
"hoverrows" => true,
"viewrecords" => false

)); 
```

如何将默认排序设置为按列降序排列？是否可以？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T20:01:30.633

尽管文档中没有，但 'firstsortorder' => 'desc' 可以解决问题。

```
$grid->setGridOptions(array(
'firstsortorder' => 'desc'
"caption"=>"Player Statistics",
"rowNum"=>200,
"rowList"=>array(50,200,1000),
"sortname"=>"percentOwned",
"sortorder" => 'desc',
"width" => 1000,
"height" => 400,
"hoverrows" => true,
"viewrecords" => false
)); 
```

# php - 修改数组中的最后一个元素

> ID：14105037
> 
> 赞同：26
> 
> 时间：2012-12-31T18:37:37.077
> 
> 标签：php, arrays

如何修改数组中的最后一个元素？

数组如下所示：

```
$fields = array("firstName = 'Bob', ",
                "lastName = 'Smith', ",
                "email = 'bob@example.com', ",
                "address = '123 anystreet', "); 
```

该数组由脚本生成，该脚本创建值并在每个字符串的末尾添加逗号/空格。我想仅从该数组中的最后一个元素中删除该逗号/空格。请记住，这些值实际上可能包含逗号/空格组合，因此只需删除最后一个元素和最后一个元素的最后两个字符。

我已经查看了该`end()`功能，但我认为这不会有帮助，因为它只是获得了价值。

**编辑**好的，所以我创建了这个函数/数组，这样我就只有一个 mysql 函数来更新用户。有点像检测更改功能，它只传回所需/更改的字段。我没有意识到这种方法存在问题。我认为由于我已经在旧函数中编写了 mysql 查询，因此这种方式应该没有问题。公众无法访问它所在的文件。我将使用对我有用的最佳答案，但我将寻找为什么这是有问题的，我会感谢评论/链接来说明这种方法有什么问题。谢谢。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-12-31T18:40:19.467

像这样！

```
end($array);
$key = key($array);
reset($array); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-31T18:40:55.000

有一种速记方法可以做到这一点，但如果将其分解成碎片，则更容易理解：

```
$index = count( $fields ) - 1;
$value = $fields[$index];
$fields[$index] = preg_replace( "/,\ $/", "", $value ); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-11-30T14:07:45.173

要更改最后一个数字元素的值：

```
$lastValue = array_pop($fields);
$fields[] = rtrim(', ',$lastValue); 
```

如果您正在为查询准备这些值，我建议将不带逗号的所有内容存储在数组中，然后在需要时在该数组上调用 implode 以防止尾随逗号问题

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-01-24T10:25:10.527

数组弹出和推送是基本数组最简单的方法。（我知道这在技术上不是问题，但很多人也会来这里寻找与简单数组相关的答案）。

```
<?php

function update_last(&$array, $value){
    array_pop($array);
    array_push($array, $value);     
}

?> 
```

然后你可以像这样使用函数：

```
<?php

$array = [1,2,3];

update_last($array, 4); //$array = [1,2,4];

?> 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-12-10T04:47:54.427

有几种方法：

1）对于关联数组，如果不知道最后一个元素键，最好先找到最后一个元素键，然后改变它的值。

```
$array[end((array_keys($array)))] .= ' additional text'; 
```

2）如果您不知道并且不关心键，您可以剪切最后一个元素并创建一个新元素。

```
$array[] = array_pop($array).' additional text'; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-12-26T16:39:20.717

[`array_pop()`](https://www.php.net/manual/en/function.array-pop.php)无论数组的索引方式如何，始终可以使用 检索数组的最后一个元素。它还将从数组中删除该元素，如果我们想修改然后再次添加它，这非常有用，因为您无法就地修改元素。

您尝试做的事情可以通过简单的单行代码来完成：

```
$fields[] = preg_replace("/, $/", "", array_pop($fields)); 
```

就是这样。这是它的作用：

*   [`preg_replace()`](https://www.php.net/manual/de/function.preg-replace.php)在字符串中搜索正则[表达式模式](https://blog.netwrix.com/2018/05/29/regular-expressions-for-beginners-how-to-get-started-discovering-sensitive-data/)，如果找到，则将匹配替换为替代字符串。

*   我们搜索的模式是`/, $/`，这意味着：匹配“，”（逗号+空格），但前提是它位于字符串的最后（`$`）。

*   替换字符串只是一个空字符串 ( `""`)，因此匹配项只是从字符串中删除。

*   我们要在 上执行替换的字符串是`array_pop($fields)`数组的最后一个元素`$fields`，它也从该数组中删除。

*   然后将修改后的字符串重新添加到最后的数组中（在`$fields[] =` 没有显式键的情况下将元素添加到数组中，并使其成为新的最后一个元素）。

让我们测试一下：

```
$fields = array(
    "firstName = 'Bob', ",
    "lastName = 'Smith', ",
    "email = 'bob@example.com', ",
    "address = '123 anystreet', ");

print "Before:\n\n";
print_r($fields);

$fields[] = preg_replace("/, $/", "", array_pop($fields));

print "\nAfter:\n\n";
print_r($fields); 
```

输出：

```
Before:

Array
(
    [0] => firstName = 'Bob', 
    [1] => lastName = 'Smith', 
    [2] => email = 'bob@example.com', 
    [3] => address = '123 anystreet', 
)

After:

Array
(
    [0] => firstName = 'Bob', 
    [1] => lastName = 'Smith', 
    [2] => email = 'bob@example.com', 
    [3] => address = '123 anystreet'
) 
```

注意最后一个逗号是怎么消失的？自己试试[吧](http://sandbox.onlinephpfunctions.com/code/8a180fef146fb5c5f59d4437cae8837b4021dc7c)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-16T15:14:08.460

今天偶然发现了这个。我认为最简单的非指针破坏方式是：

```
array_splice($array, -1, 1, strtolower(end(array_values($array))).'blah' ); 
```

当然，如果您不必关心指针，您可以删除 array_values。但我想知道这是否是一个好方法，因为拼接的提取-n-替换-东西可能比流行音乐或某事更苛刻？

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-12-31T18:45:37.860

我认为 PHP 的[Implode](http://php.net/manual/en/function.implode.php)函数可能是一个不错的选择，而不是自己生成逗号。

除此之外，您将不得不使用类似的东西：

```
$lastfield = $fields[count($fields)-1];
$lastfield = str_split($lastfield,strlen($lastfield)-2);
$fields[count($fields)-1] = $lastfield; 
```

包括第一行和第三行是为了使第二行更易于阅读，但这很容易复合成一行。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2019-02-19T21:50:11.017

我认为人们正在寻找这个：

```
@array[-1] =~ s/,$//g; 
```

也适用于换行符：

```
@array[-1] =~ s/\s$//g; 
```

# teamcity - TeamCity - 如何为构建设置参数以不运行其中一个步骤？

> ID：14105038
> 
> 赞同：7
> 
> 时间：2012-12-31T18:38:06.337
> 
> 标签：teamcity

我想做这样一个人可以开始构建但选择不运行构建的单元测试步骤。我的想法是用户在单击“运行”按钮旁边的小“...”按钮时会修改其中一个配置参数。如果他们可以从参数的下拉菜单中选择“真”或“假”，那就太好了。不知道如何对执行的构建步骤设置条件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T18:55:54.070

它还没有内置到 Teamcity 中。它有一个[空缺](http://youtrack.jetbrains.com/issue/TW-17939)的工作，但没有 ETA 的迹象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T17:09:57.050

您可以有两种不同的配置，一种运行所有配置，另一种跳过传递配置参数的单元测试。不完全是您所要求的，但至少您的用户可以选择他们想要运行的风味。

# java - Java、Windows、打开火狐

> ID：14105042
> 
> 赞同：0
> 
> 时间：2012-12-31T18:39:02.687
> 
> 标签：java, windows

我正在尝试从我的 java 程序中在 firefox（或只是一个新窗口）中打开一个新选项卡。我正在将代码从 Ubuntu 转移到 Windows 7。我正在做这样的事情，但它抛出了一个异常。

```
Runtime rt = null;
...
rt =  Runtime.getRuntime();
...
rt.exec("C:\\Program Files\\Mozilla Firefox\\firefox.exe"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T18:45:36.573

你可能想看看这个`java.awt.Desktop.browse(URI uri)`方法。这会在系统的默认浏览器中打开给定的 uri，并且它也可以在非 Windows 系统上运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T18:50:33.050

以下对我有用，可以打开 Firefox 和 google.com 的新标签

```
rt.exec("C:\\Program Files (x86)\\Mozilla Firefox\\firefox.exe google.com"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-06T06:56:02.183

打开浏览器有统一的方式：（至少它在我的桌面上就像一个魅力）

```
// Start browser
if (Desktop.isDesktopSupported()) {  
    Desktop dt = Desktop.getDesktop();  
    if (dt.isSupported(Desktop.Action.BROWSE)) {  
        File f = new File(filePath);
        dt.browse(f.toURI());  
    }  
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T18:44:58.943

对于 Windows，您可以尝试以下操作。

```
rt.exec("cmd /c C:/Program Files/Mozilla Firefox/firefox.exe"); 
```

或者

```
String[] commands = {"cmd", "/c", "C:/Program Files/Mozilla Firefox/firefox.exe"};  
rt.exec(commands); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-07T21:23:22.457

上面提出的解决方案对我不起作用（win 10），但是一个小操作解决了我的问题（在**/c**前面添加刚刚**开始**

 **```
rt.exec("cmd /c start firefox"); 
```**

# c# - HtmlHelper 扩展来包裹 ServiceStack Markdown Razor 的内容

> ID：14105044
> 
> 赞同：4
> 
> 时间：2012-12-31T18:39:08.757
> 
> 标签：c#, .net, razor, servicestack, razor-2

使用[ServiceStack Markdown Razor](https://github.com/ServiceStack/ServiceStack/wiki/Markdown-Razor)，我如何创建一个 HtmlHelper 扩展方法，其工作方式如下：

> 在您看来，您现在可以执行以下操作：

```
@{
    using (Html.BeginLink())
    { 
        @Html.Raw("Hello World")
    }
} 
```

> 产生结果：

```
<a>Hello World</a> 
```

来自[这个 StackOverflow 答案](https://stackoverflow.com/questions/10635063/mvc-3-htmlhelper-extension-method-to-wrap-around-content/10637767#10637767)

ServiceStack Markdown Razor 没有 的概念`ViewContext`，所以我不确定如何以与 SO Answer 中相同的方式获得 Writer。

* * *

**更新**

`StringBuilder`我可以直接从以下位置获取 ViewPage ：

```
@{ this.ViewPage.Builder } 
```

但这是访问它的预期方式吗？如果它打算直接访问StringBuilder，那么不会从代替ViewData（来自MVC）中`StringBuilder`暴露出来吗？`HtmlHelper`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-13T14:26:54.097

您可以执行以下操作：

```
public static class MyHelpers
{

    public static IHtmlString PrintHelloWorld(this HtmlHelper helper)
    {
        return helper.Raw("Hello World");
    }
} 
```

只需确保上面的类与 HtmlHelper 位于相同的命名空间中。

# jquery - 为包装内的项目添加类

> ID：14105046
> 
> 赞同：3
> 
> 时间：2012-12-31T18:39:13.017
> 
> 标签：jquery

我有这个代码：

```
$(".feed-item .field-content p").each(function(i) {
    $(this).addClass("item" + (i+1));
}); 
```

此代码帮助我在此标记内的段落中添加类：

```
<div class="feed-item">
  <div class="field-content">
    <p>This must be class item1</p>
    <p>This must be class item2</p>
  </div>
</div>
<div class="feed-item">
  <div class="field-content">
    <p>This must be class item1</p>
    <p>This must be class item2</p>
  </div>
</div> 
```

但我需要总是从数字 1 开始计数。我解释得好吗？现在我得到这个结果：

```
<div class="feed-item">
  <div class="field-content">
    <p class="item1">This must be class item1</p>
    <p class="item2">This must be class item2</p>
  </div>
</div>
<div class="feed-item">
  <div class="field-content">
    <p class="item3">This must be class item1</p>
    <p class="item4">This must be class item2</p>
  </div>
</div> 
```

这就是我需要的（注意区别在于与第二个字段内容 div 中的 p 标签关联的类）：

```
<div class="feed-item">
  <div class="field-content">
    <p class="item1">This must be class item1</p>
    <p class="item2">This must be class item2</p>
  </div>
</div>
<div class="feed-item">
  <div class="field-content">
    <p class="item1">This must be class item1</p>
    <p class="item2">This must be class item2</p>
  </div>
</div> 
```

我正在处理这个链接：http: [//jsfiddle.net/bosspetta/RJkP5/](http://jsfiddle.net/bosspetta/RJkP5/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T18:41:32.427

您可以将函数传递给`addClass`方法：

```
$(".feed-item .field-content").each(function() {
    $('p', this).addClass(function(i){
       return "item" + ++i
    });
}); 
```

[http://jsfiddle.net/wc4P3/](http://jsfiddle.net/wc4P3/)

# c# - 应用程序之间的 Windows 目录大小差异

> ID：14105049
> 
> 赞同：2
> 
> 时间：2012-12-31T18:39:28.407
> 
> 标签：c#, windows

我正在编写一个 32 位 c# 应用程序，它通过从 kernal32.dll FindFirstFile 获取文件信息来返回目录的整体大小。这战胜了以常规方式枚举每个目录，并且我能够将资源使用率保持在极低的水平。

其工作原理的快速概述如下：

*   第 1 步 - 枚举根目录获取所有子目录并使用 FindFirstFile 收集此目录中每个文件的大小信息。
*   第 2 步 - 生成子线程（最多 20 个）以针对子目录执行第 1 步
*   第 3 步 - 递归直到用尽目录并收集所有文件信息。

这可以在以下代码示例中看到，其中 FileSystem.GetFiles 是我的类，它利用 kernal32 方法获取文件信息。

```
 private static void recurseDirectories(string directoryA, bool paramInitialPass)
    {
        try
        {
            string[] currentDirs;
            if (paramInitialPass)
            {
                currentDirs = new string[1];
                currentDirs[0] = rootDirectory;
            }
            else
                currentDirs = Directory.GetDirectories(directoryA);

            for (int i = 0; i < currentDirs.Length; i++)
            {

                string threadInfo = currentDirs[i];
                numThreadsQueued++;
                ThreadPool.QueueUserWorkItem(new WaitCallback(getDirectoryFileInformation), (object)threadInfo);
                while (numThreadsQueued - directoriesProcessed > 20)
                {
                    Thread.Sleep(30);
                }
                if (paramInitialPass)
                    recurseDirectories(directoryA, false);
                else
                    recurseDirectories(currentDirs[i], false);
            }
        }
        catch
        {

        }
        return;
    }

    private static void getDirectoryFileInformation(object paramDirectoryFilePathA)
    {
        try
        {
            string directoryPathA = (string)paramDirectoryFilePathA;
            List<FileData> filesDirectoryA = new List<FileData>();
            if (Directory.Exists(directoryPathA))
            {
                    filesDirectoryA = FileSystem.GetFiles(directoryPathA);
            }
            foreach(FileData file in filesDirectoryA)
            {
                Interlocked.Add(ref sizeOfFiles, file.Size);
                Interlocked.Increment(ref numberOfFiles);
            }               
        }
        catch (Exception e)
        {

        }
        finally
        {
            Interlocked.Increment(ref directoriesProcessed);
        }
    } 
```

使用以下代码调用这两个方法：

```
 ThreadPool.SetMaxThreads(30, 500);
 Thread.CurrentThread.Priority = ThreadPriority.Normal;
 rootDirectory = share["Path"].ToString();
 recurseDirectories(share["Path"].ToString(), true);
 while (numThreadsQueued != directoriesProcessed)
 {
        Thread.Sleep(1000);
 } 
```

此代码在枚举大多数目录时表现完美。我能够递归 3TB 文件共享，在大约 8 分钟内获得总文件大小和文件数量，同时将 cpu 保持在 3% 以下并使用 15MB 内存。

现在问题来了...

在获取小目录（1-200 GB）的大小时，我看不到 Windows 在查看目录属性时所说的任何重大差异。但是，我注意到在获取大目录（2-3TB）的大小时存在一些主要差异。

例如：

假设我正在查看 DFSR 复制到另一台服务器的目录 D:\TestDir。Windows 说这个目录是 2,949,944,019,217 字节，或磁盘上的 2,974,186,774,528 字节（分别为 2.68 TB 或 2.70 TB）。我的程序说这个目录是 3,009,619,048,759 字节或 2.737 TB。FSRM 说同一目录上的配额设置有 2.71 TB 的使用量。

我知道差异部分是由于 Windows 的大小不包括隐藏文件，但是当我将目录中隐藏文件的总大小 (87GB) 添加到 Windows 值时，我得到 ~2.78 GB，这仍然与我的值不同。任何人都可以阐明我造成这些尺寸差异的其他原因吗？另外，有谁知道 FSRM 如何确定配额使用情况？

最终，我想用一个使用我的数据的监控系统替换 FSRM 配额，但如果我的数据与 Windows 所说的不相符，我可能会收到有关磁盘使用情况的错误警报。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T14:41:46.480

经过一些深入测试后，这最终成为 kernal32.dll FindFirstFile 方法的错误：

```
[DllImport("kernel32.dll", SetLastError = true, CharSet = CharSet.Auto)]
internal static extern SafeFindHandle FindFirstFile(string lpFileName, out WIN32_FIND_DATA lpFindFileData) 
```

此函数返回一个类“WIN32_FIND_DATA”，其中包含有关特定文件的信息，包括名称、大小、上次修改时间等。我运行了一个测试，将这个函数返回的大小与 System.IO.FileInfo 返回的大小进行比较类，并在非常小的一组文件上发现了一些明显的差异。当对包含约 150 万个文件的文件共享运行此程序时，两个文件的大小明显不同，如下所示：

文件 1
根据 FileInfo 的大小：18158717658 字节
根据 WIN32_FIND_DATA 的大小：978848478 字节

文件 2
根据 FileInfo 的大小：18211490304 字节
根据 WIN32_FIND_DATA 的大小：1031621124 字节

在这两种情况下，大小差异几乎正好是 16 GB。

为了解决这个问题，我仍将使用 Kernal32.dll 函数来获取文件路径，但使用 FileInfo 来获取大小。这似乎在不影响性能的情况下产生了良好的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T15:22:28.060

您提到您的应用程序被编译为 32 位。你是在 64 位系统上运行它吗？您可能会遇到文件系统重定向，例如，当 32 位应用程序尝试读取`C:\Windows\System32`您实际获取`C:\Windows\SysWOW64`的 . 您可能需要 p/invoke [`Wow64DisableWow64FsRedirection`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365743.aspx)。

因此，`FileInfo`可能会正确报告非常大文件的大小，但是尽管这可能会使您的答案保持一致，但它们仍然不正确。你为什么要使用 p/invoke 呢？

此外，NTFS 文件系统支持单个文件具有多个目录条目的硬链接。但它只为其内容使用磁盘空间一次。您可以通过读取“链接计数”元数据并将文件大小除以该字段来处理此问题。在这种情况下，您将需要 p/invoke Win32 API。您可能还想使用`GetFileInformationByHandleEx`（在使用查询权限打开文件后）而不是`WIN32_FIND_DATA`结构中的信息。

这个问题比看起来更难。

# python - Python SSL 套接字客户端身份验证

> ID：14105050
> 
> 赞同：4
> 
> 时间：2012-12-31T18:39:32.643
> 
> 标签：python, ssl, certificate

我正在尝试在 python 中设置服务器和客户端，其中服务器使用带有证书的 SSL 对客户端进行身份验证。网上有很多 SSL 证书的例子，但我发现的一切都是服务器向客户端提供证书，客户端检查它。我需要服务器确保客户端有权限连接到服务器。我了解如何生成和发送证书以及它们如何工作的基础知识。我会输入我的代码，但我的没有 SSL 的客户端/服务器工作正常，我一直在为 SSL 引用[它](http://docs.python.org/2/library/ssl.html)。该页面底部的客户端/服务器示例总结了我对 python 中 SSL 证书的理解。

我意识到这没什么好继续的，但是如果有人可以解释对该示例的基本修改以让服务器对客户端进行身份验证而不是相反，那就太棒了。或者，一个示例的链接甚至只是一些要研究的套接字方法将非常有帮助。如果需要更多信息，请告诉我。我并不是要含糊其辞，并保证我整个上午都在寻找自己的信息:)。

编辑：我试图坚持使用基本的 ssl 库。又名“导入 ssl”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T20:23:41.120

您将使用[SSLSocket.getpeercert](http://docs.python.org/2/library/ssl.html#ssl.SSLSocket.getpeercert)来获取证书。客户端在包装套接字时需要指定密钥和证书，就像服务器端一样。在服务器端，您还需要传递 ca_certs="path_to_ca_cert_file" 并且可能还想指定 cert_reqs=CERT_REQUIRED （请参阅 args for [ssl.wrap_socket](http://docs.python.org/2/library/ssl.html#ssl.wrap_socket)。

除此之外，听起来您可能正在寻找基于证书的客户端身份验证/授权？这是使用 getpeercert 获取客户端证书并访问证书中的字段以在正常身份验证路径中使用的简单问题（即 Common Name == User Id）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T18:50:56.403

不太确定您的问题指的是什么，但是您可以在 Python 中看到[SSL，在 Python](http://www.heikkitoivonen.net/blog/2008/10/14/ssl-in-python-26/)中查看 SSL 的[其他资源](http://bobthegnome.blogspot.ro/2007/08/making-ssl-connection-in-python.html)，[验证 SSL](http://techtonik.rainforce.org/2010/11/validating-ssl-server-certificate-with.html)，[获取 SSL 证书信息](http://phreakmonkey.com/index.php/archives/100)，并且您可能找到了其他好的链接。

# icons - 如何为自包含的 JavaFX2 应用程序设置启动器图标？

> ID：14105054
> 
> 赞同：0
> 
> 时间：2012-12-31T18:39:58.793
> 
> 标签：icons, javafx-2, native, launcher, self-contained

我已经成功地创建了一个本地部署 ant 脚本来从我的 JavaFX2 应用程序中创建一个 .deb。但是我似乎无法为其放置启动器图标。我遵循了两个步骤：

1.设置 ant-javafx 的类路径以包含当前目录，并将我的图标文件 Aurica.png ( classpath=".:/home/aureliantx/programs/java/lib/ant-javafx.罐子”）。但是，fx:deploy 的 ant 详细输出表明：

使用默认包资源[菜单图标]（将package/linux/Aurica.png添加到类路径中进行自定义）

2.Igor 在这里（https://blogs.oracle.com/talkingjavadeployment/entry/packaging_improvements_in_jdk_7#7）所述，我尝试在 fx:deploy 中设置 fx:icon，但结果是一样的。

```
<fx:info>
    <fx:icon href="Aurica.png" />
</fx:info> 
```

这可能是Linux上的错误，还是我在这里做错了什么？

问候， 奥勒良

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T02:55:23.427

我认为您需要在基本应用程序目录中创建一个“package”目录，在“package”目录中创建一个“linux”目录，最后将 Aurica.png 放在“linux”目录中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T09:07:35.243

我终于解决了这个问题……这是我的一个大错误。当我第一次安装 Ant 时，我还将 ant-javafx 库复制到了 Ant 的 lib 文件夹中。另外我通过taskdef在我的build.xml中重新定义它，所以我猜在类加载时，第一个jar被加载，结果我的设置（例如taskdef中的当前目录类路径）被忽略了。我为愚蠢道歉...

# java - Weblogic - 找不到属性的设置方法

> ID：14105057
> 
> 赞同：1
> 
> 时间：2012-12-31T18:40:35.637
> 
> 标签：java, jakarta-ee, weblogic

我在自定义 JSP 标记的标题中遇到异常。问题是，setter 方法是存在的。实际上，每个属性都有 2-3 个 setter 方法。一个接收对象，一个接收字符串，一个接收标记的 tld（通常是布尔值）中指定的值。

这个例外并不一致。我无法预测它何时会发生，也不知道它是如何解决的。我在服务器上部署了完全相同的应用程序，页面抛出了这个异常，但是当我使用 Eclipse 在本地运行应用程序时，这个完全相同的页面工作正常。

我曾经对某个标签发生的这个问题进行了“修复”。标签有一个属性

```
Booelan someAttribute = "true"; // Or something like that, the actual code is at work 
```

3个二传手是

```
public void setSomeAttribute(Object attr) { ... }
public void setSomeAttribute(String attr) { ... }
public void setSomeAttribute(Boolean attr) { ... } // The type of the attribute in the tld 
```

出于某种原因，它抛出了这个异常，所以我添加了第四个 setter

```
public void setsomeAttribute(Object attr) { ... } 
```

它解决了问题！没有其他标签需要这个奇怪的解决方案，该问题通过重新部署和从 SVN 存储库复制代码和其他非永久性解决方案得到解决。

我真的不知道是什么导致了这个问题或如何调查。我真的很感激任何想法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T02:33:59.153

为什么你不只有一种 setter 方法？为什么需要这 3 个 setter 方法？

如果您编写一个接受 Object 的 setter 方法，为什么要为 String 编写一个 setter 方法而为 Boolean 编写另一个？您只需一种方法即可处理所有这些情况：

```
setSomeAttribute(Object attr) 
```

# java - 如何设置自定义按钮状态背景颜色？

> ID：14105061
> 
> 赞同：8
> 
> 时间：2012-12-31T18:40:58.460
> 
> 标签：java, android, button, background

我有一个包含可绘制和文本的按钮。我希望按钮的背景与提供的正常背景不同（最好是纯色）。这很好用，我只需使用`android:background`XML 文件中的属性并相应地分配颜色。但是，我希望在选择或聚焦（状态选择器）时背景更改为不同的颜色。

我尝试在具有定义颜色的可绘制文件夹中创建一个选择器（在处理按钮文本时效果很好），如下所示：

```
 <selector xmlns:android="http://schemas.android.com/apk/res/android">
        <item android:state_focused="true" android:state_pressed="false" android:color="@color/green" />
        <item android:state_focused="true" android:state_pressed="true" android:color="@color/green" />
        <item android:state_focused="false" android:state_pressed="true" android:color="@color/green" />
        <item android:color="@color/white" />
    </selector> 
```

并将此 xml 设置为`android:background`属性，如下所示：

```
android:background="@drawable/button_state" 
```

但这会导致强制关闭说明：

```
 Caused by: android.content.res.Resources$NotFoundException: File res/drawable/button_state.xml from drawable resource ID #0x7f020070 
```

但资源在那里。不能自定义后台状态吗？如果可以，怎么做？或者我做错了什么？谢谢您的帮助！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-31T19:04:49.233

您发布的 xml 适用于[颜色状态列表](http://developer.android.com/guide/topics/resources/color-list-resource.html)，而不是可绘制的状态列表。试试这个：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_focused="true" android:state_pressed="false" >
        <shape><solid android:color="@color/green"/></shape>
    </item>
    . . .
</selector> 
```

或者，将现有文件放入`res/color`并像使用任何其他颜色一样使用它。但是，我不记得您是否可以直接使用颜色状态列表作为视图的背景。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-27T13:44:41.183

例子：

```
XML file saved at res/color/button_text.xml:

    <?xml version="1.0" encoding="utf-8"?>
    <selector xmlns:android="http://schemas.android.com/apk/res/android">
        <item android:state_pressed="true"
              android:color="#ffff0000"/> <!-- pressed -->
        <item android:state_focused="true"
              android:color="#ff0000ff"/> <!-- focused -->
        <item android:color="#ff000000"/> <!-- default -->
    </selector>
    This layout XML will apply the color list to a View:

    <Button
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/button_text"
        android:textColor="@color/button_text" /> 
```

**@color/button_text**

**res/color/button_text.xml**

这是 Google 在 ColorStateList 资源中提供的示例： [https ://developer.android.com/guide/topics/resources/color-list-resource.html](https://developer.android.com/guide/topics/resources/color-list-resource.html)

我认为 colorStateList 必须用于更改小部件的 textView 的颜色。

# jquery - 尝试添加嵌套 div 时，Jquery .append()/.html() 在本机移动浏览器上不起作用

> ID：14105063
> 
> 赞同：4
> 
> 时间：2012-12-31T18:41:07.513
> 
> 标签：jquery, html, mobile, append

我在原生 android 浏览器和黑莓浏览器上有一个非常奇怪的问题。我只是有一个 id 为“jobStream”的 div，并想将 html 附加到它。

HTML：

```
<div id="jobStream"></div> 
```

JavaScript"

```
$("#jobStream").append("<div>test</div>"); 
```

奇怪的是，如果我这样做：

```
$("#jobStream").append("test"); 
```

它工作正常，但使用 append 创建嵌套 div 似乎会导致问题。我也尝试了 .html() 和 .after() ，但我看到了同样的问题。即 $("#jobStream").html("test") 有效，但 $("#jobStream").append("test") 无效。

再次：这仅不适用于某些移动浏览器（我测试过的原生 android 浏览器 4.1.1 和黑莓浏览器）。

任何想法为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-04T05:25:51.823

好的，时间已经过去了，但也许有人仍在试图解决这个问题（就像我在找到答案之前所做的那样）。

根据[此博客](http://www.eccesignum.org/blog/solving-display-refreshredrawrepaint-issues-in-webkit-browsers)，您需要重新绘制父块元素，在这种情况下，您可以

```
$('#jobStream').hide();
$('#jobStream').get(0).offsetHeight;
$('#jobStream').show(); 
```

..在append()之后，所以新添加的元素被重新绘制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T18:57:46.353

没有把握。可能是您试图传递无效的 DOM 对象

也许尝试类似的东西；

```
$("#jobStream").append($("<div>test</div>"));   // <- html string wrapped in $() 
```

或者

```
$('<div/>').html('test').appendTo('#jobStream'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T16:20:00.263

你有没有尝试过这样的事情？

```
$("<div></div>").append($("#test")).html(); 
```

或者

```
$("#container").html($("#container").html() + html); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T17:34:37.193

事实证明，需要将 javascript 包含在外部 js 文件中并包含在内，而不是使用 . 荒谬的问题，但幸运的是现在解决了。

# html - 负边距导致内容在缩放期间移动

> ID：14105064
> 
> 赞同：3
> 
> 时间：2012-12-31T18:41:16.003
> 
> 标签：html, css, margin

我一生都找不到为什么我的信息`content2` `div`不断放大，我想这是由于使用了负边距。有没有办法解决？任何想法或修复？

**HTML**

```
<!DOCTYPE html>
<html>
<head>
<link href="index.css" rel="stylesheet" type="text/css" />
<title>Programs R Us</title>
</head>

<body>
<div id="body">
<div id="wrap">

<!--header starts-->
<div id="header">
<div id="name">
<h1>Programs <span>R</span> Us</h1>
</div><!--end name-->   
<div id="nav"><br>
    <ol>
        <li><a href="index.html">Home</a></li>
        <li><a href="about.html">About Us</a></li>
        <li><a href="contact.html">Contact Us</a></li>
        <li><a href="programs.html">Our Programs</a></li>
    </ol>
</div><!--end nav-->
</div><!--end header-->
<!--header ends-->

<!--content1 starts-->
<div id="content1">
<img src="images/placeholder.png" width="400" height="323" alt="logo"> 
<div id="imgright">
<h2>What We Do</h2>
<p>paragraph</p>
<div id="button"><a href=#>
<h4>Request A Program</h4></a>
</div><!--end button-->
</div><!--end imgright-->
</div><!--end content1-->
<!--content1 ends-->

<!--content2 starts-->
<div id="content2">
<div id="one">
<img src="images/arrow.png" width="70px" height="50px;" alt="arrow1">
  <h3>Contact Us</h3>
  <p>"Lorem ipsum dolor sit amet, 
    consectetur adipisicing elit, sed do 
    eiusmod tempor incididunt ut labore 
    et dolore magna aliqua. Ut enim ad 
    minim veniam"</p> 
</div><!--end one-->

<div id="two"> 
<img src="images/arrow.png" width="70px" height="50px;" alt="arrow1">
  <h3>About Us</h3>
  <p>"Lorem ipsum dolor sit amet, 
    consectetur adipisicing elit, sed do 
    eiusmod tempor incididunt ut labore 
    et dolore magna aliqua. Ut enim ad 
    minim veniam"</p>
</div><!--end two-->

<div id="three">
<img src="images/arrow.png" width="70px" height="50px;" alt="arrow1">
  <h3>View Our Programs</h3>
  <p>"Lorem ipsum dolor sit amet, 
    consectetur adipisicing elit, sed do 
    eiusmod tempor incididunt ut labore 
    et dolore magna aliqua. Ut enim ad 
    minim veniam"</p>
</div><!--end three-->  
</div><!--end content2-->
<!--content2 ends-->

<!--footer starts-->
<div id="footer">
<h5>Insert some footer information, copyright information also</h5>
</div><!--end footer-->
<!--footer ends-->

</div><!--end wrap-->
</div><!--end body-->
<div id="blue">
</div><!--end blue-->
</body>
</html> 
```

**CSS**

```
@charset "utf-8";
/* CSS Document */

html, body{
    margin:0;
    padding:0;
}

body{
    background-image:url(images/background.jpg);
    overflow: auto;
}

#body{
    margin-top:-25px;
    margin-bottom:25px;
    padding:0;
}

#wrap{
    width:1124px;
    height:100%;
    margin:0 auto;
    padding-top:5px;
}

#header h1{
    font-size:36px;
    font-family: Terminal, Verdana, Geneva, sans-serif;
    color: white;
}

#header span{
    font-size:100px;
    color:black;
    font-family:"brush script std", Verdana, Geneva, sans-serif;
}

#nav{
    margin-top:-90px;
    margin-bottom:75px;
    margin-right:40px;
    background-color:#2e3192;
    float:right;
    margin-left:-300px;
    border-radius:10px;
    -moz-border-radius:10px;
}

#nav ol {
    margin: 0;
    padding: 0;
    list-style: none;
    line-height: normal;
    background-color:#2e3192;
    margin-top:-10px;
}

#nav li {
    display: inline;
}

#nav a {
    display: block;
    float: left;
    margin-right: 3px;
    padding: 10px 20px;
    text-decoration: none;
    font: 24px "Trebuchet MS", Arial, Helvetica, sans-serif;
    color: white;
    padding-top:0px;
    padding-bottom:10px;
}

#nav a:hover { 
    text-decoration: none; 
    color: black;
}

#content1 img{
    margin-left:25px;
}

#imgright{
    margin-left:445px;
    margin-top:-389px;
}

#button h4{
    font-family:"Times New Roman", Times, serif;
    font-size:24px;
    color:white;
    padding-left:10px;
}

#button{
    margin-left:-400px;
    margin-top:-50px;
    margin-bottom:110px;
    border-radius:10px;
    -moz-border-radius:10px;
    background-color:#ff0000;
    width:220px;
}

#button a{
    text-decoration:none;
}

#button a:hover{
    text-decoration:underline;
    color:white;
}

h2{
    font-family:"Times New Roman", Times, serif;
    font-size:48px;
}

#imgright p{
    color: white;
    font-size:24px;
    font-family: "Times New Roman", Times, serif;
    margin-top:-30px;
    margin-left:20px;
}

#content2{
    background-color:#2e3192;
    overflow-x:visible;
    width:100%;
    height:100%;
}

#one, #two, #three{width:341.3px;}

#one img, #two img, #three img{padding-right:10px;}

#one h3, #two h3, #three h3{
    border-bottom-width:1px;
    border-bottom-style:solid;
    border-bottom-color:white;
    padding-bottom:2px;
    border-left-width:3px;
    border-left-style:solid;
    border-left-color:white;
    padding-left:6px;
    padding-top:4px;
}

#one h3{
    font-family:trajan pro, Verdana, Geneva, sans-serif;
    color:white;
    margin-left:80px;
    margin-top:-40px;
}
#one p{
    font-family:vijaya, Verdana, Geneva, sans-serif;
    color:white;
}

#two h3{
    font-family:trajan pro, Verdana, Geneva, sans-serif;
    color:white;
    margin-left:80px;
    margin-top:-46px;
}
#two p{
    font-family:vijaya, Verdana, Geneva, sans-serif;
    color:white;
}

#three h3{
    font-family:trajan pro, Verdana, Geneva, sans-serif;
    color:white;
    margin-left:80px;
    margin-top:-46px;
}

#three p{
    font-family:vijaya, Verdana, Geneva, sans-serif;
    color:white;
}

#one{
    margin-top:50px;
}

#two{
    margin-top:-270px;
    margin-left:360px;
}

#three{
    margin-top:-140px;
    margin-left:720px;
    margin-bottom:0px;        
}

#footer {
 clear: both;
 position: relative;
 z-index: 10;
 height: 3em;
 margin-top: 10px;
}

#footer h5{
    margin-left:300px;
}

#blue{
    position:absolute;
    top:619px;
    z-index:-1;
    background-color:#2e3192;
    height:100%;
    width:100%;
} 
```

**问题的图像** ![边距移动](../Images/57766251f0a2f3d5d886f00ea5cd20e0.png)

**问题的图像** ![jsfiddle，我想](../Images/4e1ea68bbaf82b9b729beff606edd453.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T21:19:04.857

1.  你需要清理你的 CSS。这是一团糟，难以导航，并且包含多余的定义。

2.  你的大部分 CSS 使用明确的宽度、位置、边距等值。尽量让你的样式在没有绝对值的情况下*工作*。尝试使用相对值；这使设计更易于管理，并且不易出现奇怪的渲染故障。

3.  最后，你的问题有点难以理解。是的，代码和图片很有帮助，但**提供一个工作示例会更好**。它使 SO 社区的故障排除变得更加容易。

* * *

无论如何，看看这是否有帮助。请务必清除当前的 CSS 定义`#one, #two, #three`。我在工作示例中做了一些小的改动，主要是为了让页面正确呈现。

**工作示例：http:** [//jsbin.com/olaxaj/1/](http://jsbin.com/olaxaj/1/)

**相关CSS**

```
#one, #two, #three {
  display:inline-block;
  padding:.5em;
} 
```

# visual-studio - 如何更改 VS2012 的 TFS 中的文件关联？

> ID：14105095
> 
> 赞同：4
> 
> 时间：2012-12-31T18:44:27.363
> 
> 标签：visual-studio, tfs, visual-studio-2012, ssms, file-association

当我在 VS2012 的 Source Explorer 中双击 .sql 文件时，它会在 Visual Studio 中打开。我怎样才能让它在 SQL Server Management Studio 中打开？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T18:55:03.280

从 VS 中更改 sql 扩展的选项。

![更改扩展名](../Images/3e3284a881a144e3ae0c636569960e47.png)

或右键单击并更改 .sql 文件的默认操作。

![在此处输入图像描述](../Images/620d83070438fdc6d00f17bf68bbb05d.png)

一开始我误解了你的问题。

转到：工具>>选项>>环境>>选项卡和窗口

然后取消选中“预览选项卡”部分中的“允许在预览选项卡中打开新文件”。

[堆栈交换类似问题](https://stackoverflow.com/questions/12431103/how-to-have-a-file-open-normally-in-resharper-instead-of-in-keep-open-mode)

您也可以右键单击文件并选择打开方式。您可能必须浏览到位于下方的 SSMS。

根据您安装的 SSMS 版本和操作系统，它将位于以下文件夹之一中：

*   在 x64 机器上：C:\Program Files (x86)\Microsoft SQL Server{your_version}\Tools\Binn\VSShell\Common7\IDE

*   在 x32 机器上：

    C:\Program Files\Microsoft SQL Server{your_version}\Tools\Binn\VSShell\Common7\IDE

# php - PHP xpath 搜索查询

> ID：14105096
> 
> 赞同：0
> 
> 时间：2012-12-31T18:44:31.667
> 
> 标签：php, xpath

在另一个问题的帮助下，我使用 xpath 从网站返回查询，但我需要它来搜索特定标题。

到目前为止，这是我的代码：

```
<?php
libxml_use_internal_errors(true);
$dom = new DomDocument;
$dom->loadHTMLFile("http://www.example.com");
$xpath = new DomXPath($dom);
$nodes = $xpath->query("//span[@class='newprodtext' and contains(translate(text(), 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 'abcdefghijklmnopqrstuvwxyz'), 'adidas')][1]");

foreach ($nodes as $i => $node) {

echo "Node($i): ", $node->nodeValue, "\n";
}

?> 
```

这是一个示例 HTML：

```
<td colspan="2" align="center">
  <a href="product.html" style="text-decoration:none">
   <span class="newprodtext">Nike Shoes</span>
  </a>
</td>
<td colspan="2" align="center">
  <a href="product.html" style="text-decoration:none">
   <span class="newprodtext">Nike T-Shirt</span>
  </a>
</td>
<td colspan="2" align="center">
  <a href="product.html" style="text-decoration:none">
   <span class="newprodtext">Adidas Shoes</span>
  </a>
</td> 
```

我需要搜索来查找两个单独的词，例如如果我在寻找“阿迪达斯鞋”我希望查询返回 TRUE，但如果它找到反向术语“阿迪达斯鞋”或小写“鞋”，我也希望它返回 TRUE adidas”而不是确切的字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T13:24:16.397

只需将您的 xpath 更改为以下内容：

`//span[@class='newprodtext' and contains(translate(text(), 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 'abcdefghijklmnopqrstuvwxyz'), 'adidas shoes')]`

如果你想要包含你的搜索词的节点，并且到这个

```
translate(//span[@class='newprodtext']/text(), 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 'abcdefghijklmnopqrstuvwxyz')='adidas shoes' or `translate(//span[@class='newprodtext']/text(), 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 'abcdefghijklmnopqrstuvwxyz')='shoes adidas' 
```

如果您想要 T/F 响应。这里有两种不同的方法，一种是 using `contains()`，一种是使用 just `translate()`。如果您想要精确匹配“阿迪达斯鞋”和“阿迪达斯鞋”，请使用后一种解决方案。如果您只是在寻找“阿迪达斯”，请使用第一个解决方案，如果您想要 T/F，则应用对后者所做的相同更改。

**更新：** 如果你*只*想要第一个带有“adidas”的节点，那么使用这个：

```
//span[@class='newprodtext' and contains(translate(text(), 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 'abcdefghijklmnopqrstuvwxyz'), 'adidas')][1] 
```

如果你想要它在 T/F 中环绕`boolean(//span[@class='newprodtext' and contains(translate(text(), 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 'abcdefghijklmnopqrstuvwxyz'), 'adidas')][1])`它。如果您确实需要额外的搜索词，请将 contains() 部分复制并粘贴回去，然后将 adidas 更改为该词。

# postgresql - PostgreSQL 返回 Select 的连接结果

> ID：14105101
> 
> 赞同：0
> 
> 时间：2012-12-31T18:45:17.393
> 
> 标签：postgresql, plpgsql

我正在学习 postgresql 并且想知道我是否可以将长选择放入存储过程中，例如应该从两个连接表中返回选择的存储过程：

```
CREATE OR REPLACE FUNCTION api.book_list()
RETURNS TABLE (
  id         BIGINT,
  published  DATE,
  category   VARCHAR,
  author     VARCHAR,
  name       VARCHAR
) AS $$
BEGIN
  SELECT
    b.id,
    b.published,
    c.name AS category,
    b.author,
    b.name
  FROM
    schemas.book AS b
  JOIN
    schemas.category AS c
  ON
    c.id = b.category_id;
END;
$$
LANGUAGE plpgsql; 
```

给出错误：

```
select * from api.book_list();
ERROR:  query has no destination for result data
HINT:  If you want to discard the results of a SELECT, use PERFORM instead.
CONTEXT:  PL/pgSQL function "book_list" line 3 at SQL statement 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T19:27:28.873

对于像这样的简单查询，我会使用一个`VIEW`或一个[**SQL 函数**](http://www.postgresql.org/docs/current/interactive/xfunc-sql.html)：

```
CREATE OR REPLACE FUNCTION api.book_list()
RETURNS TABLE (
  id         bigint,
  published  date,
  category   varchar,
  author     varchar,
  name       varchar) AS
$func$
  SELECT b.id
        ,b.published
        ,c.name -- AS category -- alias irrelevant and conflicts with OUT param
        ,b.author
        ,b.name
  FROM   schemas.book b
  JOIN   schemas.category c ON c.id = b.category_id
$func$
LANGUAGE sql; 
```

然后你不需要[`RETURN QUERY`](http://www.postgresql.org/docs/current/interactive/plpgsql-control-structures.html#PLPGSQL-STATEMENTS-RETURNING)，`BEGIN`或者`END`像你一样使用`plpgsql`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T18:59:35.423

尝试：

```
BEGIN
  return query
  SELECT
    b.id,
    b.published,
    c.name AS category,
    b.author,
    b.name
  FROM
    schemas.book AS b
  JOIN
    schemas.category AS c
  ON
    c.id = b.category_id;
END; 
```

# c# - 计算器除法和乘法没有给出预期的结果？

> ID：14105107
> 
> 赞同：-2
> 
> 时间：2012-12-31T18:45:46.460
> 
> 标签：c#, calculator

我的计算器代码有问题。加号和减号按预期工作，但是除法和乘法每次都得到零的答案。这是代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace Calculator
{
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {

    }

    private void btn1_Click(object sender, EventArgs e)
    {
        txtDisplay.Text = txtDisplay.Text + btn1.Text;
    }

    private void btn2_Click(object sender, EventArgs e)
    {
        txtDisplay.Text = txtDisplay.Text + btn2.Text;
    }

    private void btn3_Click(object sender, EventArgs e)
    {
        txtDisplay.Text = txtDisplay.Text + btn3.Text;
    }

    private void btn4_Click(object sender, EventArgs e)
    {
        txtDisplay.Text = txtDisplay.Text + btn4.Text;
    }

    private void btn5_Click(object sender, EventArgs e)
    {
        txtDisplay.Text = txtDisplay.Text + btn5.Text;
    }

    private void btn6_Click(object sender, EventArgs e)
    {
        txtDisplay.Text = txtDisplay.Text + btn6.Text;
    }

    private void btn7_Click(object sender, EventArgs e)
    {
        txtDisplay.Text = txtDisplay.Text + btn7.Text;
    }

    private void btn8_Click(object sender, EventArgs e)
    {
        txtDisplay.Text = txtDisplay.Text + btn8.Text;
    }

    private void btn9_Click(object sender, EventArgs e)
    {
        txtDisplay.Text = txtDisplay.Text + btn9.Text;
    }

    private void btn0_Click(object sender, EventArgs e)
    {
        txtDisplay.Text = txtDisplay.Text + btn0.Text;
    }

    private void btnClear_Click(object sender, EventArgs e)
    {
        txtDisplay.Clear();
    }

    Double total1 = 0;
    Double total2 = 0;
    bool minusButtonClicked = false;
    bool plusButtonClicked = false;
    bool divideButtonClicked = false;
    bool multiplyButtonClicked = false;

    private void btnPlus_Click(object sender, EventArgs e)
    {
        total1 = total1 + Double.Parse(txtDisplay.Text);
        txtDisplay.Clear();

        plusButtonClicked = true;
        minusButtonClicked = false;
        divideButtonClicked = false;
        multiplyButtonClicked = false;
    }

    private void btnMinus_Click(object sender, EventArgs e)
    {
        total1 = total1 - Double.Parse(txtDisplay.Text);
        txtDisplay.Clear();

        plusButtonClicked = false;
        minusButtonClicked = true;
        divideButtonClicked = false;
        multiplyButtonClicked = false;
    }

    private void btnDivide_Click(object sender, EventArgs e)
    {
        total1 = total1 / Double.Parse(txtDisplay.Text);
        txtDisplay.Clear();

        plusButtonClicked = false;
        minusButtonClicked = false;
        divideButtonClicked = true;
        multiplyButtonClicked = false;
    }

    private void btnMultiply_Click(object sender, EventArgs e)
    {
        total1 = total1 * Double.Parse(txtDisplay.Text);
        txtDisplay.Clear();

        plusButtonClicked = false;
        minusButtonClicked = false;
        divideButtonClicked = false;
        multiplyButtonClicked = true;
    }

    private void btnEquals_Click(object sender, EventArgs e)
    {
        if (plusButtonClicked == true)
        {
            total2 = total1 + Double.Parse(txtDisplay.Text);
        }
        else if (minusButtonClicked == true)
        {
            total2 = total1 - Double.Parse(txtDisplay.Text);
        }
        else if (divideButtonClicked == true)
        {
            total2 = total1 / Double.Parse(txtDisplay.Text);
        }
        else if (multiplyButtonClicked == true)
        {
            total2 = total1 * Double.Parse(txtDisplay.Text);
        }

        txtDisplay.Text = total2.ToString();
        total1 = 0;
    }

}
} 
```

是 if else 语句中的内容还是其他常见错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T18:51:38.613

您将 total1 和 total2 初始化为 0。

你的代码：

```
total1 = total1 * Double.Parse(txtDisplay.Text); 
```

总是给你 0 因为 0 * #anynumber# = 0。

除法相同：0 / #anynumber# = 0。

你可以组织你的代码不使用这么多布尔标志，但这不是你的问题，无论如何。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T18:52:30.757

正如 Dark Flacon 所说，您应该在按下等号按钮时进行计算。如果事实只是记住第一个数字，则不应调用`total1`总数：

```
Double lastNumber = 0;
Double total = 0;
bool minusButtonClicked = false;
bool plusButtonClicked = false;
bool divideButtonClicked = false;
bool multiplyButtonClicked = false;

private void btnPlus_Click(object sender, EventArgs e)
{
    lastNumber = Double.Parse(txtDisplay.Text);
    txtDisplay.Clear();

    plusButtonClicked = true;
    minusButtonClicked = false;
    divideButtonClicked = false;
    multiplyButtonClicked = false;
}

private void btnMinus_Click(object sender, EventArgs e)
{
    lastNumber = Double.Parse(txtDisplay.Text);
    txtDisplay.Clear();

    plusButtonClicked = false;
    minusButtonClicked = true;
    divideButtonClicked = false;
    multiplyButtonClicked = false;
}

private void btnDivide_Click(object sender, EventArgs e)
{
    lastNumber = Double.Parse(txtDisplay.Text);
    txtDisplay.Clear();

    plusButtonClicked = false;
    minusButtonClicked = false;
    divideButtonClicked = true;
    multiplyButtonClicked = false;
}

private void btnMultiply_Click(object sender, EventArgs e)
{
    lastNumber = Double.Parse(txtDisplay.Text);
    txtDisplay.Clear();

    plusButtonClicked = false;
    minusButtonClicked = false;
    divideButtonClicked = false;
    multiplyButtonClicked = true;
}

private void btnEquals_Click(object sender, EventArgs e)
{
    if (plusButtonClicked == true)
    {
        total = lastNumber + Double.Parse(txtDisplay.Text);
    }
    else if (minusButtonClicked == true)
    {
        total = lastNumber - Double.Parse(txtDisplay.Text);
    }
    else if (divideButtonClicked == true)
    {
        total = lastNumber / Double.Parse(txtDisplay.Text);
    }
    else if (multiplyButtonClicked == true)
    {
        total = lastNumber * Double.Parse(txtDisplay.Text);
    }

    txtDisplay.Text = total.ToString();
    lastNumber = 0;
} 
```

# c# - Server.MapPath 返回不正确的路径

> ID：14105108
> 
> 赞同：2
> 
> 时间：2012-12-31T18:45:50.673
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, iis

我有一个 MVC 应用程序并部署到服务器，我只有 ftp 访问权限，应用程序的名称是`test.foo.com`. 有一个后端，用户可以将图片上传到应用程序。一切都很好。代码如下：

```
//in web config this is the value
<add key="NewsImagesPath" value="~/App_Data/NewsImages/" />

// this is in controller
private static readonly string news_images_path = ConfigurationManager.AppSettings["NewsImagesPath"]; 

// in the method
String uploadedFile = fileUploadHelper.UploadFile(file, Server.MapPath(news_images_path)); 
```

这里是返回上传路径的fileuploadhelper：

```
public class FileUploadHelper
{
    public string UploadFile(HttpPostedFileBase file, string path)
    { 
        if (file != null && file.ContentLength > 0)
        { 
            FileInfo fileInfo = new FileInfo(file.FileName);
            string fileName = Guid.NewGuid() + fileInfo.Extension;
            var uploadPath = Path.Combine(path, fileName);

            file.SaveAs(uploadPath);
            return uploadPath;
        }

        return null;
    } 
} 
```

那么这段代码工作正常。

问题是这个应用程序何时部署到`foo.com`. 图片仍在上传到`test.foo.com`App_Data 文件夹。

即：我正在从 foo.com 上传图像，图像存储在：

```
c:\inetpub\wwwroot\test.foo.com\App_Data 
```

而它应该去

```
c:\inetpub\wwwroot\foo.com\App_Data 
```

为什么会这样？

我不知道如何配置服务器，IIS。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T23:06:28.570

`Server.MapPath("~")`指向配置运行 ASP.NET 应用程序的物理根文件夹。`test.foo.com`所以我猜想在 IIS 中有一些配置，因此两者`foo.com`实际上都指向同一个应用程序。如果您无法访问服务器来检查这一点，那么除了联系您的托管服务提供商并询问有关如何设置这些域以及它们映射到哪些应用程序的更多详细信息之外，您无能为力。

# wpf - 如何突出显示 IsSelected 的行

> ID：14105109
> 
> 赞同：1
> 
> 时间：2012-12-31T18:45:58.757
> 
> 标签：wpf, xaml, listview, background, itemcontainerstyle

当我从我的选择时，我想突出显示该行，`ListView`但我无法让它工作。谁能看看我所拥有的并告诉我我做错了什么？另一个问题是如何在我的 ViewModel 中拥有一个属性并`Background`根据 bool 值设置颜色，如何实现？

```
<ListView.ItemContainerStyle>
    <Style TargetType="{x:Type ListViewItem}">
        <Style.Triggers>
            <Trigger Property="IsSelected" Value="True">
                <Setter Property="Background" Value="Green" />
            </Trigger>

            <Trigger Property="IsMouseOver" Value="True">
                <Setter Property="Background" Value="Yellow" />
            </Trigger>
        </Style.Triggers>
    </Style>
</ListView.ItemContainerStyle> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T19:09:39.890

这里的问题是用于`ListView`自动添加画笔类型的“选定突出显示”的项目模板`SystemColors.HighlightBrushKey`- “真正的解决方案”是覆盖项目模板定义，但是你可以在这里获得你想要的东西的一种方法是这样的：

```
<ListView.ItemContainerStyle>
    <Style TargetType="{x:Type ListViewItem}">
        <Style.Resources>
            <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="Green"/>
        </Style.Resources>
        <Style.Triggers>
            <Trigger Property="IsMouseOver" Value="True">
                <Setter Property="Background" Value="Yellow" />
            </Trigger>
        </Style.Triggers>
    </Style>
</ListView.ItemContainerStyle> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T18:53:17.873

您可以使用名为 的接口将 Bool 值绑定到颜色画笔`IValueConverter`。

这是一篇相关文章：[IValueConverter 的最佳实践是什么？](https://stackoverflow.com/questions/4944553/what-is-best-practise-for-ivalueconverter)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T21:14:18.077

```
 <ListView  Name="listBox1" ItemsSource="{Binding Path=SimpleList}"
                      HorizontalAlignment="Left" VerticalAlignment="Top" Background="Olive">
                <ListView.ItemContainerStyle>
                    <Style TargetType="ListViewItem">
                        <EventSetter Event="MouseEnter" Handler="listBox1_ListBoxItem_MouseEnter"/>
                        <EventSetter Event="MouseLeave" Handler="listBox1_ListBoxItem_MouseLeave"/>
                        <Style.Resources>
                            <!-- Background of selected item when focussed -->
                            <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}"
                                Color="Green"/>
                            <!-- Background of selected item when not focussed -->
                            <SolidColorBrush x:Key="{x:Static SystemColors.ControlBrushKey}"
                                Color="Yellow" />
                        </Style.Resources>
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <!--<Setter Property="FontWeight" Value="Bold" />-->
                                <Setter Property="Background" Value="Orange" />
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </ListView.ItemContainerStyle>
            </ListView> 
```

# php - 为什么 extract() 与函数一起工作？

> ID：14105117
> 
> 赞同：5
> 
> 时间：2012-12-31T18:46:41.463
> 
> 标签：php, arrays, extract

`extract(some_function_that_returns_array());`

工作正常。

但是在 php.net 上它说第一个参数必须是一个引用变量：[http://php.net/manual/en/function.extract.php](http://php.net/manual/en/function.extract.php)。这是一个错误吗？

* * *

所以

```
function foo(&$array){}

function lol(){ $arr = array(); return $arr; }

foo(lol()); 
```

显示“严格标准：只有变量应该在...中通过引用传递”

提取物不会发生这种情况

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T18:51:57.727

文档有误或功能有误。老实说，我无法理解为什么 extract 需要通过引用传递一个数组，但是有人指出了 EXTR_REFS 提取类型标志。

查看我本地版本的 PHP 代码（5.3.2），我可以看到 for 的函数定义`extract()`并不表示通过引用传递。

```
function extract (array $var_array, $extract_type = null, $prefix = null) 
```

查看`sort()`定义确实显示通过引用传递：

```
function sort (array &$array, $sort_flags = null) 
```

这就是为什么我没有得到严格错误`extract()`并且我看到它的原因`sort()`。

我假设 php.net 上的文档已过时或完全错误。 `extract()`是一只老小狗......我不确定函数定义是否实际表明了这一天`&$var_array`。

另一个选项是函数定义在某些时候搞砸了，文档正确地指出了它应该是怎样的，基于有一个额外的类型标志 EXTR_REFS 这可能是这种情况（这个常量仍然存在）。

# ruby-on-rails - 如何在 Rails 中通过命名空间模型使用 has_many？

> ID：14105118
> 
> 赞同：1
> 
> 时间：2012-12-31T18:47:23.403
> 
> 标签：ruby-on-rails, activerecord, namespaces, associations

我有一个名为的名称间隔模型`Accounting::Invoice`

我也有一个模型叫`Contact`

An`Accounting::Invoice`通过另一种称为的模型拥有许多联系人`Contactable`——这是在发票被拆分到多个联系人的情况下。

但由于某种原因，我无法让`has_many through`协会运作。

我可以让它在一个方向上工作，例如：`Contact.first.accounting_invoices`，但另一方面，例如：`Accounting::Invoices.first.contacts`给我一个看起来像这样的错误：

`SQLite3::SQLException: no such column: contactables.invoice_id...`

有任何想法吗？我不确定 ActiveRecord 在哪里`contactabes.invoice_id`。我已经明确定义了我的表名和类名，以尊重地使用`accounting_invoices`表和类。`Accounting::Invoice`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T15:27:56.900

您可以使用该`:foreign_key => 'accounting_invoice_id`选项告诉 rails 使用哪个字段。查看文档以`has_many`获取更多信息 (http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_many)。

相关部分是：

```
:foreign_key
Specify the foreign key used for the association. By default this is guessed to be the name of this class in lower-case and “_id” suffixed. So a Person class that makes a has_many association will use “person_id” as the default :foreign_key. 
```

# statistics - 机器学习中的推理和决策理论之间有什么关系？

> ID：14105119
> 
> 赞同：1
> 
> 时间：2012-12-31T18:47:38.210
> 
> 标签：statistics, machine-learning, inference

我做了一个图表来说明我对推理和决策理论之间关系的理解。有人能指出图中的一些错误吗？ ![在此处输入图像描述](../Images/07c35c8e2d0a890053244b72b63b0350.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T17:38:23.697

不要费心试图“公平”并包括贝叶斯和常客解释。如果一个是有效的，另一个是废话。选择一个或另一个。当然，我的建议是选择贝叶斯解释。

我对贝叶斯决策理论方法的表述会有所不同。陈述目标并从那里倒退。

*   目标：计算错误分类的预期损失并选择预期损失最小的类别。
*   （选择类 k 的预期损失）=（类 j 的总和）（当实际类是类 j 时选择类 k 的成本）乘以（给定可观察量 x 类 j 的概率）
*   (错误分类成本) = 一个矩阵，使得对角线元素小于非对角线元素，即正确分类的成本低于错误分类
*   （给定 x 的类别 j 的概率）通过生成模型或判别模型计算
*   判别模型：直接计算（给定 x 的类 j 的概率）
*   生成模型：计算（给定类别 j 的 x 的概率）和（类别 j 的概率），然后使用贝叶斯定理

# objective-c - NSData 给出 NULL

> ID：14105125
> 
> 赞同：0
> 
> 时间：2012-12-31T18:48:27.067
> 
> 标签：objective-c, ios, cocoa-touch, base64

我用编码转换`UIImage`成，但数据结果为空。这是我的代码：`NSString``base64`

```
[Base64 initialize];
    NSString *imageString = [NSString stringWithFormat:@"img:%@", [Base64 encode:UIImagePNGRepresentation(shared.image)]];
    NSData *imageData = [NSData dataWithBase64EncodedString:imageString];
    [shared.outputStream write:[imageData bytes] maxLength:[imageData length]]; 
```

我不知道发生了什么！如果我使用 UTF-8 编码，它工作得很好，但`UIImage` `imageWithData`结果为空（这不是问题的一部分）。我究竟做错了什么？

* * *

作为背景，这里的目的是修改这个[Ray Wenderlich 演示](http://www.raywenderlich.com/3932/how-to-create-a-socket-based-iphone-app-and-server)，以便它也可以发送图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T18:51:04.110

您为 base64 字符串添加了前缀，`img:`因此使字符串无效 base64。`img:`如果要测试解码字符串，请删除。

```
NSString *imageString = [Base64 encode:UIImagePNGRepresentation(shared.image)];
//Data should not be nil anymore.
NSData *imageData = [NSData dataWithBase64EncodedString:imageString]; 
```

也没有理由将其从数据转换为字符串，然后再转换回相同的数据。我假设您希望将字符串字节写为`"img:<base64 string>"`.

```
NSString *imageString = [NSString stringWithFormat:@"img:%@", [Base64 encode:UIImagePNGRepresentation(shared.image)]];
NSData *b64ImageData = [imageString dataUsingEncoding:NSUTF8StringEncoding];
[shared.outputStream write:[b64ImageData bytes] maxLength:[b64ImageData length]]; 
```

# android - 带有编辑文本的水平滑动滚动视图

> ID：14105126
> 
> 赞同：0
> 
> 时间：2012-12-31T18:48:27.550
> 
> 标签：android, android-fragments, android-viewpager, horizontal-scrolling, horizontalscrollview

![碎片](../Images/56575289c2672d4239037b84cfb239bc.png)

我想在我的活动中创建两个片段。图像下部显示的一个用于显示内容的预览图像，内容是相同的详细视图。

详细视图应可水平滑动并居中锁定。我将通过数组列表提供数据，详细视图有一个编辑文本，应该能够更改数组列表中的数据。如果我使用 Horizo​​ntallScrollView，我将需要为每个细节视图添加一个细节布局，使用昂贵的 R... 在 for 循环中调用，我不知道如何更改数据集，因为我不知道我将如何知道编辑文本的位置。

我不知道实施 View pager 是否会提高性能或占用大量资源。还有如何获得编辑文本的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T06:24:28.070

我尝试了这两种方法，发现使用 ViewPager 效率更高，因为我的页面使用更多内存，而这些内存在水平滚动视图中没有被回收

# mongodb - 更好的 mongo db 模式来存储用户相关信息

> ID：14105130
> 
> 赞同：0
> 
> 时间：2012-12-31T18:48:50.637
> 
> 标签：mongodb, nosql

假设我必须在 mongoDB 中存储一些与特定用户帐户相关的数据（比如“状态”）。

执行此操作的更好选择是什么：集合状态：

1) {id: - 在用户集合中将是相同的，[状态数据]}

2) {id: - state 的一些唯一 id，userId - 来自用户集合的 id，[state data]}

那么什么是更好的设计决策呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T18:54:57.277

这完全取决于您将如何访问应用程序的数据。如果每次您需要访问状态，无论如何您都将获取用户数据，将其存储在用户集合中是有意义的。

想想博客及其评论，您永远不需要单独获取评论，您总是获取博客条目和相关评论。

**编辑：** 一些考虑：

1.  如果您所说的这些列表都是相互独立的，并且每个用户的列表之间不需要引用完整性，那么将它们存储在 Users 集合中是有意义的

2.  如果您认为用户文档将大于 16MB（当前最大文档大小），那么您可能必须考虑分离集合（即不将所有数据存储在一个位置，用户集合）

# java - 尝试从具有不同 ClassLoader 的类中读取受保护属性时出现 IllegalAccessException

> ID：14105136
> 
> 赞同：3
> 
> 时间：2012-12-31T18:49:50.500
> 
> 标签：java, classloader, protected

我有以下文件：

```
src/
 |- cltest/
 |   |- Main.class
 |   |- Test.class
 |   `- TestingClassLoader.class
 `- data (a class cltest.LoadedClass without an extension) 
```

主.java：

```
package cltest;

public class Main {
  protected static String field = "TestTestTest";
  public static void main(String[] args) throws Exception {
    Class.forName("cltest.Test");
    Class.forName("cltest.LoadedClass", true, new TestingClassLoader());
  }
} 
```

Test.java 和 /data

```
package cltest;

public class Test /* or LoadedClass for /data file */ {
  static {
    System.out.println(Main.field);
  }
} 
```

测试类加载器.java

```
package cltest;

import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.security.CodeSource;
import java.security.ProtectionDomain;

public class TestingClassLoader extends ClassLoader {
  public Class<?> findClass(String name) throws ClassNotFoundException {
    try {
      ByteArrayOutputStream baos = new ByteArrayOutputStream();
      InputStream is = this.getClass().getResourceAsStream("/data");
      byte[] buf = new byte[256]; int r;
      while ((r = is.read(buf)) != -1) baos.write(buf, 0, r);
      byte[] data = baos.toByteArray();

      return defineClass(null, data, 0, data.length);
    } catch (Exception e) {
      throw new ClassNotFoundException(name, e);
    }
  }
} 
```

这段代码在线给我一个错误`Class.forName("cltest.LoadedClass", true, new TestingClassLoader());`：

```
TestTestTest //  (output of 1st Class.forName() call)
Exception in thread "main" java.lang.IllegalAccessError: tried to access field cltest.Main.field from class cltest.LoadedClass
  at cltest.LoadedClass.<clinit>(LoadedClass.java:5)
  at java.lang.Class.forName0(Native Method)
  at java.lang.Class.forName(Unknown Source)
  at cltest.Main.main(Main.java:7) 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T22:29:27.843

唯一可行的方法是使 LoadedClass 和 Main 在同一个类加载器中（只有当它们具有相同的包名*和*类加载器时，类才真正在同一个包中）。

你谈论一个需要访问main的受保护方法的“插件”。对于插件系统来说，这是一个糟糕的设计。如果您控制这些类，则将必要的方法设为公开而不是受保护。

# javascript - Zotonic：如何创建包含 Javascript 的 HTML 页面？

> ID：14105141
> 
> 赞同：0
> 
> 时间：2012-12-31T18:50:29.600
> 
> 标签：javascript, html, zotonic

我正在探索 Zotonic，我正在尝试创建一个包含 HTML 和 Javascript（在 内）的页面。然而，当我保存我的页面时，Javascript 被删除而不是保存。

有没有办法用 Javascript 创建一个简单的 HTML 页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T10:54:16.820

您可以将 javascript 直接添加到模板中，也可以将其添加到 yoursite/lib/js/yourscript.js

如果您将它添加到您的站点 lib 目录中，您可以将它添加到您的模板中，如下所示：

```
{% lib "js/yourscript.js" %} 
```

[http://zotonic.com/docs/0.9/ref/tags/tag_lib.html?highlight=lib](http://zotonic.com/docs/0.9/ref/tags/tag_lib.html?highlight=lib)

无法从内容管理系统添加 javascript。

# javascript - JQuery Max Num + 随机化

> ID：14105144
> 
> 赞同：0
> 
> 时间：2012-12-31T18:50:41.113
> 
> 标签：javascript, jquery

```
function maxStyle() {
    var one = parseInt($("#num-one"));
    var two = parseInt($("#num-two"));
    var three = parseInt($("#num-three"));
} 
```

1.  找到最大的数并对其变量 +1。
2.  如果有多个变量等于最大值，则随机选择其中一个变量，并对其 +1。

我知道我可以使用 Math.max() - 但这只是返回一个数字所以我如何获取变量？

抱歉，我只在 JS/JQ 上呆了 4 天。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T19:06:31.213

你可以这样做：http: [//jsfiddle.net/zZpVq/1/](http://jsfiddle.net/zZpVq/1/)

```
var max = -Infinity; // variable to store max value;

var maxEle = $(".num").each(function() {
    if (+this.value > max) max = +this.value;  // find the max value
}).filter(function() {
    return this.value == max;  // filter elements to ones that share max value
});

if (maxEle.length > 1)   // get a random element with the max value
    maxEle = maxEle.eq(Math.floor(Math.random() * maxEle.length));

maxEle.css("border-color", "red");​ // do something with that element. 
```

编辑 - 将初始值更改`max`为`-Infinity`并强制`this.value`使用一元加号进行数字转换，因此这也适用于负值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T19:45:56.717

代码：

```
function maxStyle() {
    var one = parseInt($("#num-one").val()),
        two = parseInt($("#num-two").val()),
        three = parseInt($("#num-three").val()),
        four = parseInt($("#num-three").val()),
        five = parseInt($("#num-three").val());
        // ..etc.

    var arr = [one, two, three, four, five /*, etc. */],
        tempArr = [];

    arr.sort(function(a, b) {
        return (b - a)
    }); // now array is sorted with highest element on top

    arr[0] = arr[0] + 1; // increment the highest element by 1, per question

    var a = 0, b;
    for (b = 0; b < arr.length; b++ ) {
        if(arr[a] == arr[b]) {
            tempArr.push(arr[b]);
            a++; 
            // not incrementing outside the loop, 
            // since we don't want to compare other duplicates, 
            // but only the largest which is the first element
        }
    }

    // We now have an array of multiple items equal to the max 
```

> 如果有多个变量等于最大值，则随机
> 选择其中一个变量，并对其 +1。

```
 // Continue Code..
    // Generate a random between 1 and no. of items
    randomItem = Math.floor(Math.random() * arr.length) + 1;
    tempArr[randomItem] = tempArr[randomItem] + 1;

    return arr[0] > tempArr[randomItem] ? arr[0] : tempArr[randomItem];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T18:54:15.793

我相信这就是你想要做的......

```
function maxStyle() {
  var one = parseInt($("#num-one").val());
  var two = parseInt($("#num-two").val());
  var three = parseInt($("#num-three").val());
  var maxed = Math.max(one, Math.max(two, three)) + 1; // Max of all three plus 1
} 
```

该变量`maxed`将具有三个输入中最大值的值......假设它们是输入。

我不确定随机化的来源（来自您的问题标题）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T18:55:19.313

首要问题

```
parseInt($("#num-one")); 
```

您如何从 jQuery 对象中获取数字？

您应该使用 .val() 或 .text()

```
parseInt($("#num-one").val(),10); 
```

当您使用 parseInt 时，请使用基数。

现在对于其他问题，您需要使用一些 if 语句。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-31T19:05:41.370

我只需设置所有 id 的数组并将它们与存储的最大值进行比较。

```
var idArr = ['#num-one', '#num-two', '#num-three'];

function maxNum(idArr) {
  var max = 0;
  $.each( idArr, function( key, value ) {
    var curr = parseInt($(value).val(),10);
    if (curr > max) max = curr;
  });
  return max+1;
}

alert('Max :' + maxNum(idArr)); 
```

# ios - 核心动画：沿平面移动图层

> ID：14105150
> 
> 赞同：3
> 
> 时间：2012-12-31T18:51:26.513
> 
> 标签：ios, 3d, core-animation, calayer, perspective

我正在开发一种纸牌游戏，其中纸牌以透视的形式显示在桌子上。桌子和卡片都具有相同的 x 旋转 (45°)。

随着卡片离玩家越来越远（在桌子上“向上”移动），我希望它们变得更小。我认为只需修改它们的 z 平移（或 z 比例）就可以达到预期的效果，但事实并非如此。

我是否必须同时移动**和**缩放它，或者有没有办法改变 z 深度并让 Core Animation 为我处理一切？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-31T19:24:30.877

这是没有直接记录的内容，除了[*核心动画编程指南*](http://developer.apple.com/library/ios/#Documentation/Cocoa/Conceptual/CoreAnimation_guide/Articles/Layers.html#//apple_ref/doc/uid/TP40006082-SW14)[中“修改转换数据结构”](http://developer.apple.com/library/ios/#Documentation/Cocoa/Conceptual/CoreAnimation_guide/Articles/Layers.html#//apple_ref/doc/uid/TP40006082-SW14)*下的示例：*

 *> 清单 2 中的示例说明了如何将 a 配置`CATransform3D`为透视变换。
> 
> **清单 2** 直接修改 CATransform3D 数据结构
> 
> ```
>  CATransform3D aTransform = CATransform3DIdentity;
> // the value of zDistance affects the sharpness of the transform.
> zDistance = 850;
> aTransform.m34 = 1.0 / -zDistance; 
> ```

这里发生了什么？3D 变换矩阵是 4x4 矩阵（不是您可能期望的 3x3 矩阵）。第三行的第四列（从 1 开始计数，而不是从 0 开始）控制沿 Z 轴的透视变换。将其设置为从“相机”到 Z=0 平面（您可以将其视为屏幕）的距离的负倒数。

默认情况下，`m34`为零，这意味着从相机到屏幕的距离是无穷大。在无穷远处，每个（有限）点都与相机等距，因此没有透视。这称为“正交投影”。

当您将距离设置为较小的值（这会使值`m34`变大）时，您会获得越来越强的透视投影。你会想要发挥价值来找到你喜欢的。

大多数层将其子层展平为 Z=0 平面。这意味着您应用于图层的透视投影不会应用于其子图层，并且您必须设置每个子图层的变换。

如果您不需要用户能够点击特定卡片，则应将卡片图层添加为`CATransformLayer`. A`CATransformLayer` **不会将**其子层展平到 Z=0 平面中，因此您可以将透视投影变换仅应用于`CATransformLayer`，而不必担心将其应用于各个卡片层。但是， a`CATransformLayer`不支持`hitTest:`，因此您无法轻松确定触摸事件触摸了哪些卡片。

[*CATransformLayer 类参考*](https://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CATransformLayer_class/Reference/Reference.html)*

# c# - Winform自定义GridLayout？

> ID：14105151
> 
> 赞同：3
> 
> 时间：2012-12-31T18:51:26.340
> 
> 标签：c#, winforms, grid-layout

我正在尝试`GridLayout`为我的表格制作一个。每个单元格都需要在下面包含描述图片的图像和标签。

我想知道解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T19:39:30.490

将[TableLayoutPanel](http://msdn.microsoft.com/en-us/library/system.windows.forms.tablelayoutpanel.aspx)控件添加到您的表单。根据需要创建尽可能多的行和列。因为每个单元格只能包含一个控件，而您需要两个，所以在每个单元格中添加一个[SplitContainer](http://msdn.microsoft.com/en-us/library/h0w5ctby.aspx)控件 - 现在每个单元格可以有两个控件。设置它的[SplitContainer.Orientation](http://msdn.microsoft.com/en-us/library/system.windows.forms.splitcontainer.orientation.aspx) = Horizo​​ntal。将拆分器的大小调整为适用于您的情况的任何拆分。设置[SplitContainer.IsSplitterFixed](http://msdn.microsoft.com/en-us/library/system.windows.forms.splitcontainer.issplitterfixed.aspx) = True。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T20:18:19.373

要扩展 Neolisk 的答案，而不是使用拆分容器，而是创建一个单独的用户控件。在那里放一个图片框和标签。执行您需要执行的操作以在 Control 的 Load 方法中显示信息。

然后只需将控件添加到每个 TableLayoutPanel。

这将使一切都分开。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T19:38:55.903

您可以使用[TableLayoutPanel](http://msdn.microsoft.com/en-us/library/system.windows.forms.tablelayoutpanel.aspx)。

# java - 数组排序后项目消失

> ID：14105153
> 
> 赞同：1
> 
> 时间：2012-12-31T18:51:30.757
> 
> 标签：java, arrays, sorting

我最近学习了如何将整数数组按升序排序。我正在尝试编写游戏，其中一部分涉及创建分层纹理渲染器；但是，当两个对象的级别完全相同（y 位置相同）时，其中一个对象会由于排序过程而消失。

为什么是这样？这是我的代码：

```
public void sort() {
    int i = 0;
    while (i < yposCount) {
        order[i] = ypos[i];
        i++;
    }
    Arrays.sort(order);
    int j = 0;
    while (j < yposCount) {
        int k = 0;
        while (k < yposCount) {
            if (order[j] == ypos[k]) {
                finalOrder[j] = k;
            }
            k++;
        }
        j++;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T19:03:38.450

```
Arrays.sort(order);
int j = 0;
while (j < yposCount) {
    int k = 0;
    while (k < yposCount) {
        if (order[j] == ypos[k]) {
            finalOrder[j] = k;
        }
        k++;
    }
    j++;
} 
```

对于每个值，由于您在找到匹配项后`ypos`不这样做，因此您总是将每个与数组匹配的索引写入 index 。因此，仅记录最后一个匹配索引。`break;``k``finalOrder``j`

如果对于给定的`ypos`值`v`，存在带有 的`m`索引`ypos[k] == v`，则将这些索引中最大的`m`一次写入`finalOrder`，而其余的`m-1`索引总是被覆盖。因此相应的对象没有记录在`finalOrder`.

要解决此问题，`j`请在找到匹配项并且下一个元素`order`等于当前元素时增加索引。

```
Arrays.sort(order);
int j = 0;
while (j < yposCount) {
    int k = 0;
    while (k < yposCount) {
        if (order[j] == ypos[k]) {
            finalOrder[j] = k;
            // Now, if the next `order` is equal, continue looking for that value
            if ((j+1 < yposCount) && (order[j+1] == order[j])) {
                // more of the same ypos values to come
                j++;
            } else {
                // All these ypos values found, end inner loop
                break;
            }
        }
        k++;
    }
    j++;
} 
```

# angularjs - AngularJS 中的控制器无法使用动态生成的属性

> ID：14105156
> 
> 赞同：1
> 
> 时间：2012-12-31T18:51:45.513
> 
> 标签：angularjs

我完全被难住了。我开始以为我知道我在做什么，现在已经尝试了很多变化，我不知道问题可能是什么。

[http://jsfiddle.net/PCfZV/11/](http://jsfiddle.net/PCfZV/11/)

我正在创建一个名为“mylist”的指令，我想将一些数据交给（在本例中是一个数字）：

```
<span ng-repeat="node in [1,2,3,4,5]">
    <mylist counter="{{node}}"></mylist>
</span> 
```

到目前为止，一切都很好......创建我的指令工作正常。

```
var myApp = angular.module('myApp', []);
myApp.directive('mylist', function() {
    return {
        restrict: "E",
        template: "<P>You counted to: '{{inTemplate}}'.</P>",
        replace: true,
        controller: MyCtrl,
        scope: { inTemplate: "@counter" }
    }
}); 
```

现在，当我添加控制器时，我不知道在哪里可以找到`counter`(or `inTemplate`) 变量。

```
function MyCtrl($scope, $http, $attrs, $element) {
    $scope.inTemplate = "blah blah" + $attrs.counter;
}​ 
```

与往常一样，感谢任何见解。可能只是 Angular 对我来说太过分了 :)

非常感谢，

内特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T19:03:38.497

计数器是指令范围的一部分，您可以使用[batarang](https://github.com/angular/angularjs-batarang)详细了解这一点。

您应该可以通过 $scope.inTemplate 访问它。我插手了你的小提琴，并让它以三种方式工作：

使用属性[http://jsfiddle.net/PCfZV/46/](http://jsfiddle.net/PCfZV/46/)：

```
<mylist node="{{node}}"></mylist>

    template: "<P>You counted to: '{{countTo()}}'.</P>",
    replace: true,
    controller: MyCtrl,
    scope: {node: '@'}

function MyCtrl($scope, $http, $attrs, $element) {
    $scope.countTo = function(){return "blah blah" + $scope.node};
}​ 
```

通过链接到父范围[http://jsfiddle.net/PCfZV/47/](http://jsfiddle.net/PCfZV/47/)：

```
<mylist is-counter="node"></mylist>

    template: "<P>You counted to: '{{inTemplate}}'.</P>",
    replace: true,
    controller: MyCtrl,
    scope: {
        "isCounter": "="
    } 
```

使用表达式[http://jsfiddle.net/PCfZV/48/](http://jsfiddle.net/PCfZV/48/)：

```
<mylist is-counter="'bla bla' + node"></mylist>

    template: "<P>You counted to: '{{isCounter()}}'.</P>",
    scope: {
        "isCounter": "&"
    } 
```

还可以查看 console.log 以了解实例化控制器时属性的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T21:22:59.953

在您的帖子中，该指令创建了一个“隔离范围”——因为`scope: { ... }`. （隔离范围在原型上并不从其父范围继承。如果您想了解更多关于这意味着什么的信息，包括隔离范围与其父范围相关的图片，请参阅[范围原型/原型的细微差别是什么AngularJS 中的继承？](https://stackoverflow.com/questions/14049480/what-are-the-nuances-of-scope-prototypal-prototypical-inheritance-in-angularjs)，部分**指令**）。

在您的工作小提琴中（您在@iwein 的评论中提到），该指令不会创建新的范围，但它定义了一个控制器，因此控制器和指令使用相同的范围 - 所以它们都可以看到任何在范围上定义的属性。在你的小提琴中，`is-counter="{{node}}"`没有做任何事情，所以它可以被删除并且它仍然可以工作。

另外值得注意的是，对于每个数组项/节点，您正在创建一个单独的 MyCtrl 控制器（我不确定这是否是故意的。），因为指令有`controller: MyCtrl`. Angular 将`MyCtrl`其作为构造函数，并在每次遇到`mylist`HTML 中的指令时创建一个控制器（由于 ng-repeat，这是 5 次）。

通常，您需要指定控制器在 HTML 中的支配位置：

```
<div ng-controller="MyCtrl">
   <span ng-repeat="node in [1,2,7,6,5]">
   ...
   </span>
</div> 
```

（有时您可能希望为每个指令实例化一个控制器，但这不太常见。）

如果你使用 ng-controller，你不需要在你的指令中指定控制器——指令将（默认）使用父作用域——即与控制器相同的作用域。

我不确定您要在控制器中做什么，但我只想在控制器范围内定义一个属性来保存您的额外文本，

```
$scope.extraText= "blah blah"; 
```

然后在模板中使用它：

```
template: "<P>You counted to: {{extraText}} '{{node}}'.</P>", 
```

[小提琴](http://jsfiddle.net/mrajcok/AzGX5/)。

> 可能只是 Angular 对我来说太过分了 :)

对我来说，AngularJS 的学习曲线相当陡峭（我还在学习）。不要放弃它。我认为这是一个很棒的框架。

# shell - 在vbscript中自动关闭MsgBox？

> ID：14105157
> 
> 赞同：4
> 
> 时间：2012-12-31T18:51:49.413
> 
> 标签：shell, vbscript, wsh

我正在使用 VBScript 在 excel 上编写一些自动化代码。我`MsgBox()`在代码中有一个，并且正在寻找一种方法来关闭由自动创建的弹出窗口`MsgBox()`而无需人工干预。程序执行将从那里继续。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T20:20:49.823

纯 VBScript 解决方案是[.PopUp 方法](http://technet.microsoft.com/en-us/library/ee156593.aspx)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-31T19:07:53.887

我的评论为您提供了搜索和找出可行答案的提示。但是，为了节省您的时间，这里有一些见解。

*   这篇文章展示了如何[在 VB 中操作 MSGBOX](http://vbnet.mvps.org/index.html?code/hooks/messageboxhooktimer.htm)。

*   这是任何人都能想到的关于 VBA 的最佳方式。

    1.  创建表单
    2.  将其用作 MSGBOX
    3.  添加计时器
    4.  给定经过的时间（空闲）关闭表单。

--

*   另一种方法[参考](http://www.mrexcel.com/forum/general-excel-discussion-other-questions/143673-visual-basic-applications-msgbox-timer.html)。这使用一个`Pop-Up`盒子作为 MSGBOX。

代码：

```
Sub Test1()
 Dim AckTime As Integer, InfoBox As Object

 Set InfoBox = CreateObject("WScript.Shell")
 AckTime = 3
 Select Case InfoBox.Popup("Click OK or do nothing within 3 seconds.", _
 AckTime, "This is your Message Box", 0)

 Case 1, -1
  Exit Sub
 End Select
End Sub 
```

# ruby-on-rails-3 - Rails 嵌套循环遍历表

> ID：14105160
> 
> 赞同：0
> 
> 时间：2012-12-31T18:52:27.867
> 
> 标签：ruby-on-rails-3

我有 2 个表 = 任务和任务状态

在任务索引视图中，我想遍历任务状态并为每个任务状态显示关联的任务。

我正在尝试在一个名为 tasks/index3.html.erb 的文件中执行此操作

这是不起作用的索引代码：

```
<% @taskstatuses.each_with_index do |taskstatus, index| %> 
```

我尝试将此添加到任务控制器：

```
class TasksController < ApplicationController

# GET /taskstatuses
 def index
  @taskstatuses = Taskstatus.all
 end 
```

但是，我得到“你没想到有一个 nil 对象！评估 nil.each_with_index 时出错

当然会感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T18:59:31.673

您的索引操作没有被调用。很可能，当您要求渲染 index3 时，没有 index3 操作，但有一个 index3.html.erb，因此该视图在没有任何干预操作的情况下被渲染。

你可以做一些简单的事情，比如添加：

```
def index3
  @taskstatuses = Taskstatus.all
end 
```

可能有更好的方法，即

```
class TasksController < ApplicationController
  before_filter :loadtasks, :only=>[:index,:index3]
  def loadtasks
    @taskstatuses = Taskstatus.all
  end
end 
```

# android - 如何在不生根手机的情况下从错误报告 UI 中捕获 Android 崩溃堆栈跟踪？

> ID：14105164
> 
> 赞同：2
> 
> 时间：2012-12-31T18:52:53.910
> 
> 标签：android, crash-reports

我有一个崩溃的 Android 应用程序，我将其错误报告发送给开发人员，但我也想自己将堆栈跟踪捕获为文本。

我在 Play 商店中尝试了 LogCat 和 CrashLog 向自己发送错误报告内容，但前者需要 root 访问权限，而我无法让后者做任何事情。

理想情况下，我可以自己复制/粘贴堆栈跟踪文本（我可以很好地查看和截屏），但这似乎是不可能的。崩溃日志是否保存到 SD 卡的某处？任何其他提示（我使用的是 Android 4.2.1）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T18:57:38.513

Android 4.2 锁定了日志，因此应用只能访问自己的日志信息。此外，请记住，开发人员可能已经通过 Play 商店开发人员控制台或 ACRA 等附加库获取此崩溃日志

如果您是应用程序开发人员，您可以使用开发工具（例如，DDMS）查看完整的日志，并复制/粘贴日志以发送给您的开发人员。

如果您不是应用程序开发人员，请选择屏幕截图。

> 崩溃日志是否保存到 SD 卡的某处？

不，出于隐私和安全原因。

# alfresco - 使用 openCMIS 复制文档

> ID：14105171
> 
> 赞同：0
> 
> 时间：2012-12-31T18:53:54.277
> 
> 标签：alfresco, mule, cmis, opencmis

我正在使用 Mule 访问 Alfresco 服务器。我们通过 CMIS 连接器使用 OpenCMIS。我想在一个文件夹中制作文档副本并将其添加到另一个文件夹。或者只是复制整个文件夹。我需要副本独立于原件，以便副本是原件的静态副本。

我怀疑为了制作副本，我将不得不遍历整个文件夹，不仅要复制对象，还要复制它们的关系。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T18:19:58.837

Document 对象有一个 copy() 方法，可以让您在不同的文件夹中创建一个独立的副本。但是，文件夹层次结构没有复制方法。

# symfony - Symfony 验证丢失了 twig 参数

> ID：14105173
> 
> 赞同：0
> 
> 时间：2012-12-31T18:54:12.457
> 
> 标签：symfony

验证似乎会导致传递给树枝文件的信息丢失：

'变量“more_than_one”在第 15 行的 ormedormedBundle:Consent:new.html.twig 中不存在'

是否有在验证中保留此数据的设置？

BafflingPlayer（所有控制器使用的静态函数）：

```
 class BPCount extends Controller
    {
        public static function BafflingPlayers($ob, $id){
            $em = $ob->getDoctrine()->getManager();
            return $em->getRepository('lthrtlthrtBundle:BafflingProvider')
                                   ->numPlayers($id);

        }

        public static function numBP($ob, $id){
            return count(BPCount::BafflingPlayers($ob, $id));
        }
    } 
```

ConsentController.php（控制器）：

```
 public function newAction()
    {
        $em     = $this->getDoctrine()->getManager();
        $sc     = $this->get('security.context');
        $entity = new Consent();
        $usor   = $sc->getToken()->getUser();
        $form   = $this->createForm(new ConsentType()
           ,$entity
           ,array('attr'=>
               array('securitycontext' => $sc
                  ,'em'                => $em
        )));
        return $this->render('lthrtlthrtBundle:Consent:new.html.twig', array(
            'entity'         => $entity
            ,'form'          => $form->createView()
            ,'more_than_one' => BPCount::NumBP($this,$usor->getId()) > 1
        ));
    } 
```

Consent.php（实体）：

```
 public function isEndAfterBegin(){
        return ($this->consentEnd > $this->consentBegin);
    } 
```

树枝文件：

```
 {% extends "::layout.html.twig" %}

    {% block subtitle %}Consent{% endblock subtitle %}

    {% block body %}
    <h1>Consent Edit</h1>

    <form action="{{ path('consent_create') }}" method="post" {{ form_enctype(form) }}>
    <div class="span12">
        <span class="clear">
        </span>
    {#}
    {% if is_granted('ROLE_ADMIN') %}
    {#}
    {% if is_granted('ROLE_ADMIN') or more_than_one %}
        <span class="span12 clear">
          <span class="span2">
    {{form_label(form.Baffling_Player) }}
          </span>
          <span class="span6">
    {{form_widget(form.Baffling_Player) }}
          </span>
        </span>
    {% else %}
    {% endif %}
        <span class="span12 clear">
          <span class="span2">
    {{form_label(form.subject)}}
          </span>
          <span class="span6">
    {{form_widget(form.subject)}}
          </span>
        </span>
        <span class="span12 clear">
          <span class="span2">
    {{form_label(form.consentBegin) }}
          </span>
          <span class="span6">
    {{form_widget(form.consentBegin) }}
          </span>
        </span>
        <span class="span12 clear">
          <span class="span2">
    {{form_label(form.consentEnd) }}
          </span>
          <span class="span6">
    {{form_widget(form.consentEnd) }}
          </span>
        </span
    <span class="span12 clear">
          <span class="span2">
    {{form_label(form.given) }}
          </span>
          <span class="span6">
    {{form_widget(form.given) }}
          </span>
    </span>
    </div>
        {{ form_errors(form) }}
        {{ form_rest(form) }}
        <p>
            <button type="submit">Create</button>
        </p>
    </form>

    <ul class="record_actions">
        <li>
            <a href="{{ path('caseload') }}">
                Back to the list
            </a>
        </li>
    </ul>
    {% endblock body %} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T18:55:05.047

同事说：

您还需要将该变量传递给控制器​​中的创建操作。问题解决了。

# c# - 在预定义的时间高效运行数十万个函数

> ID：14105175
> 
> 赞同：3
> 
> 时间：2012-12-31T18:54:25.977
> 
> 标签：c#, .net, multithreading, optimization

我需要在预定义的时间以有效的方式运行数十万个函数，

我目前拥有的代码是这样的：

```
class myclass
{
    public DateTime NextTime = DateTime.Now;
    Random rand = new Random();

    public void DoStuff()
    {
        if (NeedToWork())
        {
            // do some complex stuff on a 2nd thread.
            NextTime = DateTime.Now.AddSeconds(rand.Next(60, 3600));
        }
    }

    public bool NeedToWork()
    {
        return DateTime.Now > NextTime;
    }

} 
```

从计时器运行的调用函数：

```
 static List<myclass> mylist = new List<myclass>();
    static void Activator()
    {
        foreach (var item in mylist)
        {
            item.DoStuff();
        }

    } 
```

我的问题是，当集合中有很多项目时，遍历所有项目需要很长时间，导致某些 DoStuff() 函数在某些情况下运行延迟超过一分钟。

目前从不同的线程同时调用“Activator”函数以使延迟时间尽可能低，（通过使用a来处理必要的线程同步`Mutex`）

我想到的2个解决方案：

1.  而不是有一个`List<myclass>`，我可以有一个像`Dictionary<DateTime, List<myclass>>`1 秒精度的字典，并且每秒运行适当的类对象，字典会将“nexttime”映射到“myclass”实例。
2.  创建两个`List<>`s 或`Queue<>`s 而不是一个列表，它们将被命名为 'fastqueue' 和 'slowqueue' ，slowqueue 将拥有所有对象，fastqueue 将拥有所有即将需要工作的项目，然后有一个专用线程循环通过慢队列，并检查剩余时间并将其放入快速队列。

笔记：

1.  真正的代码没有任何随机数据决定下一次运行时间，它实际上是基于一些计算，这只是一个示例。

2.  每个项目运行时间不超过几分之一秒，每个项目在一小时内最多运行 4 次。ram 和 cpu 功率不是问题，我已经测试并在不同区域进行了优化以使其适合，尽管此处并未显示所有代码。

3.  唯一浪费 cpu 时间的是返回 DateTime.Now > NextTime 的行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T19:02:57.280

我不能保证它可以解决您的问题，因为我不知道您有多少计算能力，但是您是否尝试过而不是从不同`Parallel.ForEach`的线程调用？`Activator`你可以这样做。

```
Parallel.ForEach(mylist, item =>
{
    item.DoStuff();
}); 
```

如果您想限制并发线程的数量，您可能还需要设置`MaxDegreeOfParallelism`调用时间。`Parallel.ForEach`如果我的回答不够清楚或不够详细，请发表评论。

编辑：正如评论正确指出的那样，`DoStuff()`在我的示例中将同步执行。使用`Task.Factory.StartNew()`或任何等效物来利用任务调度程序可能会有所帮助。然而，作者表示，大多数任务真的很小，并且在很短的时间内执行。出于这个原因，我认为实际的调度会导致不必要的开销，而不是在不同线程上串行执行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T22:29:51.740

您可能希望维护一个按运行时间排序的排序队列或工作树。

然后，您的常规间隔计时器循环运行队列中的前 N ​​个项目，当项目超出当前间隔时间时停止，因为无需进一步查看。

当生成要添加到队列的新工作时，使用排序的数据结构，插入应该正确放置以保持排序。

（您还需要担心在队列中添加和删除线程的安全性。）

（仅供参考，调度算法有很多变化。）

* * *

*作为另一个注意事项，虽然不确定它是否对您有用，但是在使用这些基于时间的公式时，您可能会考虑拍摄 DateTime.Now 的快照以使用多次，否则如果此线程您可以“松散”时间在调用 DateTime.Now 之间中断*

```
public void DoStuff(DateTime now)
{
    if (NeedToWork(now))
    {
        // do some complex stuff on a 2nd thread.
        NextTime = now.AddSeconds(rand.Next(60, 3600));
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T09:14:00.730

增量队列 - 按超时时间排序的列表，是处理大量长时间超时的常用方法。我使用一个线程来管理列表。它等待输入 BlockingCollection 队列，超时设置为现在和列表头部项目的超时时间之间的间隔。如果等待超时，它会弹出并触发队列头部的项目，获取新的头部对象，重新计算其等待时间并再次等待输入队列（如果列表为空，超时设置为 INFINITE）。新的超时项目被推送到输入队列，线程在恢复其超时活动之前插入它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T19:03:39.683

这取决于您尝试执行的任务的复杂性以及您拥有的硬件资源量，但我建议使用库来完成此类工作：[Quartz.net](http://quartznet.sourceforge.net/)可能很有用。

# jquery - 如何用 jquery ajax 请求部分替换 asp.net 页面？

> ID：14105176
> 
> 赞同：1
> 
> 时间：2012-12-31T18:54:25.873
> 
> 标签：jquery, asp.net, ajax, drop-down-menu

假设我在页面上有一个 Listview 控件。每个 Listview 项目有 2 个下拉列表和 1 个文本框。当第一个下拉列表的选定值更改时，第二个下拉列表应根据第一个下拉列表填充城市。最后，当为第二个下拉列表选择一个值时，文本框上应该出现一个成本。

```
<asp:ListView ID="_lsvCostFinder" runat="server">
    <LayoutTemplate>
        <table>
            <tr>
                <th>Country</th>
                <th>City</th>
                <th>Cost</th>
            </tr>
            <tr  runat="server" id="itemPlaceHolder">
            </tr>
        </table>
    </LayoutTemplate>
    <ItemTemplate>
        <tr>
            <td>
                <asp:DropDownList ID="_ddlCountry" runat="server" OnSelectedIndexChanged="ddlCountry_SelectedIndexChanged" AutoPostBack = "true">
                </asp:DropDownList>
            </td>
            <td>
                <asp:DropDownList ID="_ddlCity" runat="server" OnSelectedIndexChanged="ddlCity_SelectedIndexChanged" AutoPostBack = "true">
                </asp:DropDownList>
            </td>
            <td>
                <asp:TextBox ID="_txtCost" runat="server"></asp:TextBox>
            </td>
        </tr>
    </ItemTemplate>
</asp:ListView> 
```

现在，当用户为下拉列表选择不同的值时，我想使用 ajax

```
$('select').change(function () {
   $.ajax({
  type: "POST",
  url: "Default.aspx/DropDownList1_SelectedIndexChanged",
  data: "{}",
  success: function(msg) {
    // Replace the div's content with the page method's return.
    //
  }
 }); 
```

我只想替换整个**tr**元素。这些是我的问题：

1.  我应该发送什么数据？下拉列表的值？

2.  如何仅替换包含触发 ajax 调用的下拉列表的**行？**

# 编辑

所有方法都具有以下签名

```
protected void ddlCountry_SelectedIndexChanged(object sender, EventArgs e) 
```

这是一个非常长且复杂的页面。

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T19:06:08.917

首先，查看您发布的示例代码以及您计划如何进行 Ajax 调用，您需要`PageMethods`在页面中启用。[请参阅本教程](http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/)以了解如何执行该部分。

使用 jQuery 的实际 ajax 调用可以像这样简单：

```
$('select').change(function () {
     $.post('Default.aspx/MethodName',{selectedVal:$(this).val()}, function(data){
         //as far as placing the result in the input text field, I think this will do:
         $(this).parents('tr').find('input:text').val(data);
     });
}); 
```

现在，您的`MethodName`方法必须如下所示：

```
 [WebMethod]
  public static string MethodName(string selectedVal)
  {
     return "something";
  } 
```

[jsfiddle（减去 ajax 调用）。](http://jsfiddle.net/ESKtF/)

# 更新

抱歉，我误读了这个问题，OP 想要替换整个行。然后这样做：

```
 $(this).parents('tr').replaceWith('<tr><td colspan="3"><div>'+data+'</div></td></tr>'); 
```

完整的上下文：

```
$('select').change(function () {
         $.post('Default.aspx/MethodName',{selectedVal:$(this).val()}, function(data){
             //as far as replacing the row, this will do:
               $(this).parents('tr').replaceWith('<tr><td colspan="3"><div>'+$(this).val()+'</div></td></tr>');
         });
    }); 
```

# javascript - 如何查找页面上的所有单词，以及每个单词有多少个

> ID：14105192
> 
> 赞同：3
> 
> 时间：2012-12-31T18:57:12.320
> 
> 标签：javascript

我正在寻找一种方法来识别页面上的所有单词，并计算该页面上每个单词的每个实例的数量。我需要为此使用 JavaScript，而不是 jQuery。

**更新**

这是我到目前为止所拥有的，虽然它似乎正在工作，但我仍然遇到一些将 2 个或更多单词合并在一起的情况，有什么线索吗？

```
if(window.attachEvent) {
    window.attachEvent("onload", myFunc);
} else {
    if(window.onload) {
        var curronload = window.onload;
        var newonload = function() {
            curronload();
            myFunc();
        };
        window.onload = newonload;
    } else {
        window.onload = myFunc;
    }
}

function myFunc() {
    var words = document.body.innerText;  
    words = words.replace(/\n/g, " "); //Remove line breaks
    words = words.split(" ");
    var foundWords = new Array(); 
    var counts = new Array(); 
    words.forEach(function(s) { 
        s = s.replace(/^\s+|\s+$/g,''); //Trim
        s = s.toLowerCase(); //To lower case
        var index = foundWords.indexOf(s);
        if(s != \'\') { //If word not blank
            if(index < 0) {
                foundWords.push(s);
                var newindex = foundWords.indexOf(s);
                counts.push(1);
            } else {
                counts[index] += 1; 
            }
        }

    });

    //Cycle through all found words and log the index, word & count
    foundWords.forEach( function(s) { 
        var index = foundWords.indexOf(s);
        console.log(index+" "+s+" "+counts[index]);
    });
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-31T19:32:30.300

我必须承认我同意（有些讽刺的）评论者敦促首先对基本 JavaScript 进行一些研究。不过，我认为尝试一下会很有趣，所以这是我想出的第一件事。

它将单词的列表和频率输出到控制台。

当然，有人会想要过滤结果以使它们更好一点，但这是另一个问题。

[http://jsfiddle.net/E7qSb/](http://jsfiddle.net/E7qSb/)

```
var words = [];

var walkDOM = function (node, func) {
    func(node);
    node = node.firstChild;
    while(node) {
        walkDOM(node, func);
        node = node.nextSibling;
    }

};

walkDOM(document.body, function (node) {

    if (node.nodeName === '#text') {
        var text = node.textContent;

        text = text.replace(/[^A-Za-z]/g, ' ');

        text = text.split(' ');

        if (text.length) {

            for (var i = 0, length = text.length; i < length; i += 1) {
                var matched = false,
                    word = text[i];

                for (var j = 0, numberOfWords = words.length; j < numberOfWords; j += 1) {
                    if (words[j][0] === word) {
                        matched = true;
                        words[j][1] += 1;
                    }
                }

                if (!matched) {
                    words.push([word, 1]);
                }

            }
        }
    }
});

var displayWordList = function (words) {
    for (var i = 0, length = words.length; i < length; i += 1) {
        console.log(words[i][0], words[i][1]);
    }
};

displayWordList(words);
​ 
```

这使用了来自 JavaScript: The Good Parts 的 Douglas Crockford 的 walkDOM 示例。但我从其他人那里看到 document.body 有一个 innerText 属性？！那，嗯，更容易。

我留下这个答案是因为保持字数统计的方法可能对提问者有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T19:09:42.830

使用这样的正则表达式。

```
var words = document.body.textContent || document.body.innerText,
    matches = words.match(/word/gmi);

console.log(matches); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T19:14:18.860

你可以这样使用。

```
var findWord="What";
var totalCount = document.body.innerText.split(findWord).length - 1; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T19:20:47.250

您可以完善此解决方案：

```
<!DOCTYPE html>
<html>
<body>

<p id="demo">Click the button to display the matches.</p>

<button onclick="myFunction()">Try it</button>

<script>
function myFunction()
{
    var str="The rain in SPAIN stays mainly in the plain rain"; 
    var n=str.match(/\S+/g);

    document.getElementById("demo").innerHTML=n;

    for(i=0; i < n.length ; i++){
        r = str.match(new RegExp( n[i], 'g' ));
        document.getElementById("demo").innerHTML+= '<br>'+ n[i] +' = ' + r.length ;
    }
}
</script>

</body>
</html> 
```

# text - 一段时间后重复宏

> ID：14105193
> 
> 赞同：1
> 
> 时间：2012-12-31T18:57:17.387
> 
> 标签：text, macros, editor, text-editor

我需要一个能够在我设置的一段时间后重复宏的文本编辑器。是否有任何提供此功能的文本编辑器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T19:46:00.820

Ultraedit 具有此功能，如果您正在寻找 Windows 上的编辑器：

[http://www.ultraedit.com/](http://www.ultraedit.com/)

# windows - 面向 Windows XP 使用哪个 Windows SDK？（7.0a 或 7.1）

> ID：14105194
> 
> 赞同：1
> 
> 时间：2012-12-31T18:57:26.820
> 
> 标签：windows, visual-studio-2010, winapi

我将在一个新项目中以 Windows XP+ 为目标，我将使用 Visual Studio 2010 来完成这项任务。看看我看到 Visual Studio 随 Windows SDK 7.0a 一起提供的东西，但是有一个更新的版本也允许以 Windows XP 为目标，v7.1。

这是一个单独的产品，我显然必须以[特殊方式](http://blogs.msdn.com/b/heaths/archive/2011/04/01/visual-c-2010-sp1-compiler-update-for-the-windows-sdk-7-1.aspx)安装，但我想知道这是否真的有必要。我的意思是，7.0a 和 7.1 之间有什么区别（例如可用的编译器、头文件或库，...）？或者是否可以在没有 Windows SDK 7.1 的情况下使用 Visual Studio 2010 并获得相同的结果？

# ruby-on-rails - 你如何回滚到之前的 Gemfile.Lock？

> ID：14105201
> 
> 赞同：2
> 
> 时间：2012-12-31T18:58:14.237
> 
> 标签：ruby-on-rails, ruby-on-rails-3, git, version-control

我最近运行了“捆绑更新”，它把 Twitter-bootstrap-rails gem 更新到了最新版本。从那时起，标题大小发生了变化，我想为我的所有 gem 回滚到以前的 gem 版本。

我尝试回滚到我以前的 gemfile 和包更新，但问题是我没有在我的 gemfile 中指定版本，所以它不知道降级版本。我还尝试检查特定的先前版本并指定它，但我认为所有依赖项也发生了变化。

所以我需要找到一种方法来重新使用所有旧版本，这些旧版本似乎存储在 Gemfile.lock 文件中。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T19:39:44.053

您可以轻松地返回到您在 git 中跟踪的任何文件的版本

```
git checkout <some-ref> -- path/to/your/file 
```

some-ref 在哪里

```
HEAD^
HEAD~5
v1.2
some-branch 
```

ETC

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-21T12:17:59.013

如果您使用 git，一种方法如下

```
git checkout -- Gemfile.lock 
```

# asp.net - 如何在现实生活中实现业务逻辑层的良好实践asp.net

> ID：14105202
> 
> 赞同：3
> 
> 时间：2012-12-31T18:58:35.500
> 
> 标签：asp.net, business-logic-layer, bll

我通常将数据集创建为 DAL，并在原始项目中创建 BLL。

在学习了Entity Framework之后，我知道业务逻辑层通常是在单独的项目（类库）中创建的。

但是，ASP.NET 站点没有相应的教程。

出于这个原因，当我创建 BLL 时，尤其是在引用期间，我很困惑。

1.  为了完成 BLL 类，我应该像这样直接添加引用吗？

![在此处输入图像描述](../Images/1abf00a1a10151b436f3e6dbb702898f.png)

然后使用 USING 语句访问实体：

![在此处输入图像描述](../Images/08ff266da67588b02f157fe72038cf8a.png)

但是，访问 BLL 的主项目中的表示层可能需要引用回 BLL 项目。我看到一些示例将整个 BLL 项目的 DLL 文件放在主项目中。

引用 BLL 和 Main 项目的正确方法是什么，或者只是像上面那样引用？

有什么好的教程可以学习吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T19:30:35.537

我通常设置一个数据访问项目，设置一个引用数据访问项目的业务项目，以及一个同时引用数据访问和业务项目的 Web 项目。使用实体框架，所有生成的类都在数据访问层。我通常使用存储库模式，我所有的存储库都在业务层（也可以在数据访问层），并将实体框架实体返回给调用者，调用者是表示层中的一个对象（一个 MVC 控制器，或 MVP 演示者，或 asp.net Web 表单的代码隐藏，具体取决于您使用的内容）。

高温高压

# html - 为什么一个img会下推旁边的文字内容？

> ID：14105205
> 
> 赞同：5
> 
> 时间：2012-12-31T18:58:50.283
> 
> 标签：html, css

我有这段代码：

```
<p><img src="img/icon.png" />View</p> 
```

通过包含该 img 标签，文本“view”被下推。即使我尝试给 p 标签一个等于 img 高度的行高，它仍然看起来不平衡。

我错过了什么？jsfiddle 示例：http: [//jsfiddle.net/bLUL6/](http://jsfiddle.net/bLUL6/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-31T19:03:59.010

```
img {
    vertical-align: bottom;
}
​ 
```

[该博客](http://www.maxdesign.com.au/articles/vertical-align/)详细说明了如何`vertical-align`使用内联图像。

# gwt - 带有大文件的 GWT ExternalTextResource

> ID：14105209
> 
> 赞同：4
> 
> 时间：2012-12-31T18:59:19.213
> 
> 标签：gwt, resources

我正在尝试使用 ExternalTextResource 获取一个大的 html 文件：

```
public interface MyHtmlResources extends ClientBundle {

    public static final MyHtmlResources INSTANCE = GWT.create(MyHtmlResources.class);

    @Source("some.html")
    public ExternalTextResource getSomeHtml();
}

MyHtmlResources.INSTANCE.getSomeHtml().getText(new ResourceCallback<TextResource>() {
    public void onError(ResourceException e) { Window.alert(e.toString()); }
    public void onSuccess(TextResource r) {
        html.setHTML(r.getText());
    }
}); 
```

在 Firefox 上，onError 方法总是运行一条消息：`eval() returned null`而在 Chrome 上我得到`Uncaught RangeError: Maximum call stack size exceeded`.

你知道是否有办法处理大文件吗？我是否受限于每个浏览器的最大调用堆栈大小？

谢谢。

我的“解决方案”是使用 Italo 发布的问题中提到的 RequestBuilder 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T13:58:04.483

似乎 GWT 解析文件内容，当文件很大时，它在某些浏览器中失败。看看这个问题：[http ://code.google.com/p/google-web-toolkit/issues/detail?id=6248](http://code.google.com/p/google-web-toolkit/issues/detail?id=6248)

# java - 使用按位运算将 Unicode 转换为字符

> ID：14105210
> 
> 赞同：0
> 
> 时间：2012-12-31T18:59:20.460
> 
> 标签：java, javascript, unicode, character, bit-manipulation

[多亏了这个](https://stackoverflow.com/questions/5585919/creating-unicode-character-from-its-number)问题，我知道如何将 Unicode 转换为字符，但是当我对 Unicode 进行按位运算时，它的效果并不好。

这`.fromCharCode()`是一个 Javascript 函数，用于将 Unicode 转换为字符。我想知道它在 Java 中的等价物，能够将按位运算作为参数处理。

**此代码不会编译**

```
public String str2rstr_utf8(String input) {
  String output = "";
  int i = -1;
  int x, y;
  while (++i < input.length()) {
    /* Decode utf-16 surrogate pairs */
    x = Character.codePointAt(input, i);
    y = i + 1 < input.length() ? Character.codePointAt(input, i + 1) : 0;
    if (0xD800 <= x && x <= 0xDBFF && 0xDC00 <= y && y <= 0xDFFF) {
      x = 0x10000 + ((x & 0x03FF) << 10) + (y & 0x03FF);
      i++;
    }
    /* Encode output as utf-8 */
    if (x <= 0x7F) output += String.fromCharCode(x);
    else if (x <= 0x7FF) output += String.fromCharCode(0xC0 | ((x >>> 6) & 0x1F), 0x80 | (x & 0x3F));
    else if (x <= 0xFFFF) output += String.fromCharCode(0xE0 | ((x >>> 12) & 0x0F), 0x80 | ((x >>> 6) & 0x3F), 0x80 | (x & 0x3F));
    else if (x <= 0x1FFFFF) output += String.fromCharCode(0xF0 | ((x >>> 18) & 0x07), 0x80 | ((x >>> 12) & 0x3F), 0x80 | ((x >>> 6) & 0x3F), 0x80 | (x & 0x3F));
  }
  return output;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T19:32:16.700

如果我没记错的话，您正在尝试用 UTF-8 编码 Java 字符串。Java 直接支持它：

```
public byte[] str2rstr_utf8(String str)
{
    return str.getBytes(Charset.forName("UTF-8"));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T02:58:03.723

您实际上所做的是将 UTF-16 编码的输入字符串转换为 UTF-16 编码的输出字符串，其字符包含 UTF-8 编码字节的值。在 Unicode 编程中你几乎不需要这样做！但是，如果您确实需要（例如与需要这种格式奇怪的字符串的第三方 API 交互），那么您可以通过不手动处理按位操作来完成相同的事情，让 Java 来做为您工作：

```
public String str2rstr_utf8(String input)
{
    byte[] utf8 = input.getBytes(Charset.forName("UTF-8"));
    StringBuilder output = new StringBuilder(utf8.length);
    for (int i = 0; i < utf8.length; ++i)
        output.append((char)utf8[i]);
    return output.toString();
} 
```

# ruby-on-rails - 重定向到不同的子域后，rails 3 flash 未清除

> ID：14105214
> 
> 赞同：2
> 
> 时间：2012-12-31T18:59:39.507
> 
> 标签：ruby-on-rails, session, subdomain, cookiestore

所以，我有一个这样的控制器

```
class SomethingController < ApplicationController
  def show
    flash[:notice] = "TEST"
    redirect_to root_path(:subdomain => 'test')
  end
end 
```

此外，我的 config/initializers/session_store.rb 中有这一行

```
Foo::Application.config.session_store :cookie_store, :key => '_foo_session', :domain => :all 
```

我的问题如下。如果我转到[http://example.com/something](http://example.com/something)（导致上述控制器操作的路由），该操作会正确设置 flash 并重定向到适当的子域 url (http://test.example.com/)。该操作的视图正确显示了我在上一个操作中设置的闪光灯。但是，在此操作之后，flash 不会被清除 - 或者，就此而言，对相关子域的任何后续操作 - 并且会继续出现，直到我手动导航回根域 (example.com) 上的某个其他 URL，在哪一点闪存被重置并不再出现在任一域上。

如果我尝试使用

```
flash.now[:notice] = "TEST" 
```

代替

```
flash[:notice] = "TEST" 
```

重定向结束时的页面根本没有注册消息的存在，因此什么也不显示。

我怎样才能获得上面第一种情况中描述的功能，但它的行为应该像往常一样并在请求后清除闪存？

# java - 在 SBT 中，是否可以自动命名-修改私人使用的包？

> ID：14105215
> 
> 赞同：6
> 
> 时间：2012-12-31T18:59:48.650
> 
> 标签：java, scala, jar, versioning, sbt

考虑使用特定版本的 jar 来实现方法的常见情况，但不在公共或受保护的 API 中公开该 jar 中的任何类型（仅在私有方法的方法签名中）。

现在我想要的是通过名称修改原始包名称并将其替换为 SBT 中生成的代码来自动编译时链接此代码（再次：我想将插件添加到 SBT 或 build.sbt 中的设置对每个`sbt compile`) 执行此操作。

这样做的目的是避免具有相同包/类名的类的多个可能不兼容的版本出现类路径错误。注意：在我上面描述的情况下，内联或这种名称修改应该始终有效，并允许一个人避开版本地狱（以更大的罐子为代价）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T21:48:51.487

这听起来像是[ProGuard](http://proguard.sourceforge.net)能够做的事情。有一个[SBT ProGuard 插件](https://github.com/siasia/xsbt-proguard-plugin)，但它似乎没有得到积极维护。

如果我要解决这个问题，就个人而言，我会寻找自定义类加载器来寻求解决方案，而不是名称修改。

# regex - .htaccess 重写日期即 /2012/12/31

> ID：14105216
> 
> 赞同：1
> 
> 时间：2012-12-31T19:00:26.740
> 
> 标签：regex, .htaccess, mod-rewrite, clean-urls, multiple-value

我正在尝试创建一些重写规则，以通过 URL 以简短易读的方式按日期组织内容。

IE

```
http://mysite.com/post/index.php?a=Dave&b=2012&c=12&d=31&e=1
http://mysite.com/post/index.php?a=Dave&b=2012&c=12&d=31
http://mysite.com/post/index.php?a=Dave&b=2012&c=12
http://mysite.com/post/index.php?a=Dave&b=2012
http://mysite.com/post/index.php?a=Dave&b=all 
```

变成

```
http://mysite.com/post/Dave/2012/12/31/1
http://mysite.com/post/Dave/2012/12/31
http://mysite.com/post/Dave/2012/12
http://mysite.com/post/Dave/2012
http://mysite.com/post/Dave/all 
```

这是我在 //mysite.com/post/ 中的 .htaccess

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^([a-zA-Z0-9_-]+)/?([a-zA-Z0-9]+)/?([0-9]+)/?([0-9]+)/?([0-9]+)?$ index.php?a=$1&b=$2&c=$3&d=$4&e=$5 [L,NC,QSA]
RewriteRule ^([a-zA-Z0-9_-]+)/?([a-zA-Z0-9]+)/?([0-9]+)/?([0-9]+)/?([0-9]+)/?$ index.php?a=$1&b=$2&c=$3&d=$4&e=$5 [L,NC,QSA]

RewriteRule ^([a-zA-Z0-9_-]+)/?([a-zA-Z0-9]+)/?([0-9]+)/?([0-9]+)?$ index.php?a=$1&b=$2&c=$3&d=$4 [L,NC,QSA]
RewriteRule ^([a-zA-Z0-9_-]+)/?([a-zA-Z0-9]+)/?([0-9]+)/?([0-9]+)/?$ index.php?a=$1&b=$2&c=$3&d=$4 [L,NC,QSA]

RewriteRule ^([a-zA-Z0-9_-]+)/?([a-zA-Z0-9]+)/?([0-9]+)?$ index.php?a=$1&b=$2&c=$3 [L,NC,QSA]
RewriteRule ^([a-zA-Z0-9_-]+)/?([a-zA-Z0-9]+)/?([0-9]+)/?$ index.php?a=$1&b=$2&c=$3 [L,NC,QSA]

RewriteRule ^([a-zA-Z0-9_-]+)/?([a-zA-Z0-9]+)?$ index.php?a=$1&b=$2 [L,NC,QSA]
RewriteRule ^([a-zA-Z0-9_-]+)/?([a-zA-Z0-9]+)/?$ index.php?a=$1&b=$2 [L,NC,QSA]

RewriteRule ^([a-zA-Z0-9_-]+)$ index.php?a=$1 [L,NC,QSA]
RewriteRule ^([a-zA-Z0-9_-]+)/$ index.php?a=$1 [L,NC,QSA] 
```

现在的问题是某些 URL 不起作用。从上面的示例中，其中三个按预期工作。但其他人以这些方式输出：

```
URL: http://mysite.com/post/Dave/2012/12
OUTPUTS:
    a => Dave
    b => 2012
    c => 1
    d => 2
URL: http://mysite.com/post/Dave/2012
OUTPUTS:
    a => Dave
    b => 20
    c => 1
    d => 2 
```

这显然不是正确的值，显然将数字分成了其他变量。

为什么它会这样做，我必须做些什么来解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T19:07:17.187

不要`/?`到处说。这`?`意味着前面的表达式是可选的。这意味着`2012`match `([0-9]+)/?([0-9]+)/?([0-9]+)/?`，因为那些斜线不必在那里。您想要的是`([0-9]+)/([0-9]+)/([0-9]+)/?`，因为您希望*URL 末尾的*斜杠是可选的。

# android - 自动启动和广播接收器

> ID：14105219
> 
> 赞同：0
> 
> 时间：2012-12-31T19:00:49.707
> 
> 标签：android

我有这个在固定时间执行 AlarmReceiver 的类（在 android 启动后开始）。我添加了 sharedpreferences 来禁用和启用警报。如果我禁用并重新启用警报不会运行。我需要重启模拟器。我可以避免模拟器重启吗？谢谢！

```
public class AutoStart extends BroadcastReceiver {

SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(context);
    CheckboxPreference = prefs.getBoolean("checkboxPref", true);
Calendar cal4 = Calendar.getInstance(TimeZone.getDefault(), Locale.getDefault());
    cal4.set(Calendar.DATE,31);
    cal4.set(Calendar.MONTH,Calendar.DECEMBER); 
    cal4.set(Calendar.YEAR,2012);//year...
    cal4.set(Calendar.HOUR_OF_DAY, 23);  
    cal4.set(Calendar.MINUTE, 59);       
    cal4.set(Calendar.SECOND, 00);       

Intent intent2 = new Intent(context, AlarmReceiver.class);
    PendingIntent Alarm1 = PendingIntent.getBroadcast(context, 0, intent2, 0);

alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, cal4.getTimeInMillis(), DateUtils.DAY_IN_MILLIS, Alarm1); 
```

显现：

```
<receiver android:name="AutoStart">
        <intent-filter>
        <action
        android:name="android.intent.action.BOOT_COMPLETED" />
        <category android:name="android.intent.category.HOME" />
        </intent-filter>
        </receiver> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T20:09:45.320

您要做的第一件事是创建一个静态方法，使 Alarm 将其放入`AutoStart`：

```
public static modifyAlarm (Context context, boolean cancel)
{
  Calendar cal4 = Calendar.getInstance(TimeZone.getDefault(), Locale.getDefault());
  cal4.set(Calendar.DATE,31);
  cal4.set(Calendar.MONTH,Calendar.DECEMBER); 
  cal4.set(Calendar.YEAR,2012);//year...
  cal4.set(Calendar.HOUR_OF_DAY, 23);  
  cal4.set(Calendar.MINUTE, 59);       
  cal4.set(Calendar.SECOND, 00);       

  Intent intent2 = new Intent(context, AlarmReceiver.class);
  PendingIntent Alarm1 = PendingIntent.getBroadcast(context, 0, intent2, 0);

  AlarmManager alarmManager = (AlarmManager) context.getSystemService (Context.ALARM_SERVICE);
  if (cancel)
    alarmManager.cancel (Alarm1);
  else
    alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, cal4.getTimeInMillis(), DateUtils.DAY_IN_MILLIS, Alarm1);
} 
```

`AutoStart`像这样调用它`onReceive()`：

```
@Override
public void onReceive (Context context, Intent intent)
{
  SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(context);     
  makeAlarm (context, prefs.getBoolean("checkboxPref", true));
} 
```

现在，您的 Preference 必须是 some 的一部分`Activity`。为简单起见，我们将处理该 Activity 中的警报`onPause()`；

```
@Override
protected void onPause()
{
  SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
  boolean alarmEnabled = prefs.getBoolean("checkboxPref", true);
  AutoStart.modifyAlarm (this, alarmEnabled);
  super.onPause();
} 
```

现在，当用户取消您的警报或重新启用它时，您的代码会处理这些问题。如果你在 PendingIntent 上调用 cancel，如果它有效，它将取消它，否则不做任何事情，所以我们不必担心检查警报是否已经存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T19:10:10.217

```
<receiver android:name=".AutoStart">
        <intent-filter>
           <action android:name="android.intent.action.BOOT_COMPLETED" />
           <category android:name="android.intent.category.HOME" />
        </intent-filter>
</receiver> 
```

**更新：**

```
SharedPreferences yourPreferences = getSharedPreferences("prefName", MODE_PRIVATE);
if (!yourPreferences.getBoolean("prefName", false)) {
        Editor editor = yourPreferences.edit();
        editor.clear();
        // add your logic here
        //editor.putBoolean("prefName", false);
        //editor.putInt("userId", -1);
        editor.commit();
 } 
```

然后使用类似这样的代码

```
userId = yourPreferences.getBoolean("userId", -1); 
```

# java - Android Toast 已取消但未出队

> ID：14105222
> 
> 赞同：2
> 
> 时间：2012-12-31T19:01:20.063
> 
> 标签：java, android

我正在使用从多个方法访问的单个 Toast 对象。每个方法都会初始化 Toast 以显示不同的消息，并且每个方法都会取消屏幕上现有的 Toast 以便显示自己的。但是，在屏幕上的 Toast 被取消并消失后，在显示新的 Toast 之前会有一段延迟。

我发现这种延迟完全等同于原始 Toast 本身从屏幕上消失（而不是被取消）所花费的时间。这让我相信虽然 Toast 的 cancel() 方法将它从屏幕上移除，但它不会将它从系统中出列，导致其他 Toast 仍然需要等待才能显示。有没有办法解决？

# cordova - 什么是跨平台移动开发以及它将如何实现？

> ID：14105223
> 
> 赞同：0
> 
> 时间：2012-12-31T19:01:23.393
> 
> 标签：cordova, cross-platform

我在 Android 中开发了本机移动应用程序，但我想在多个平台上运行我的应用程序怎么做。听说关于PhoneGap 对跨平台移动开发有好处，PhoneGap 用什么语言开发移动应用，我可以在Phonegap 中开发“Hybrid Apps”吗，需要多少天才能学会。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T09:48:04.883

我强烈推荐[MoSync](http://www.mosync.com)用于开发跨平台的移动应用程序。我自己从使用 MoSyncin 开发的工业项目中获得了丰富的经验，我使用了丰富的本地用户界面、蓝牙/Wi-Fi 通信来获取实时数据等等。

使用 MoSync 进行开发时会使用 C、C++、HTML5、JavaScript、CSS。有关更多信息，请查看[此处](https://stackoverflow.com/questions/12750459/whats-idea-about-mosync/14234182#14234182)及其网站以查找[功能/平台支持](http://www.mosync.com/widepage/feature-platform-support)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T20:14:28.943

您可以在 PhoneGap 中开发混合应用程序。PhoneGap 应用程序主要是用 HTML、CSS 和 JavaScript 编写的。

学习所需的天数不是任何人都可以给你的。这将取决于您当前的技能、编码经验和学习能力。

# jquery - 计算 iFrame 在 jQuery 中重新加载的次数？

> ID：14105227
> 
> 赞同：1
> 
> 时间：2012-12-31T19:01:46.657
> 
> 标签：jquery

我的网站中有 5 个 iframe。这些 iframe 有一个不是我的第三方网站的来源。

我想知道 iframe 被重新加载了多少次。iFrame 可以根据用户需要多次重新加载。

这里有代码和 jsFiddle

```
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script>
var timesRefreshed = 0;
$("iframe").load(function(){
    if(timesRefreshed == 2){
        alert("HOLA");
    }
    timesRefreshed++; 
});​
</script>
</head>
<body>
<iframe id="iframe" src="http://www.miipodtouch.com"></iframe>​
</body>
</html> 
```

[http://jsfiddle.net/nCRDF/](http://jsfiddle.net/nCRDF/)

我不知道为什么它不起作用。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T19:15:06.913

你的脚本应该是这样的：

```
$(function() {

var timesRefreshed = 0;
$("iframe").load(function(){
    if(timesRefreshed == 2){
        alert("HOLA");
    }
    timesRefreshed++; 
});​

}); 
```

这意味着您应该将 jQuery 代码段包装在文档中。就绪函数，称为

```
$(function() {
  // code here
}); 
```

**或者**

```
$("document").ready(function() {
     // code here
}); 
```

# php - 为什么这段代码似乎过早死亡？

> ID：14105228
> 
> 赞同：0
> 
> 时间：2012-12-31T19:01:46.903
> 
> 标签：php

我有两个文件 - test.php 和 demo.php。

test.php 的内容：

```
<?php
// fails if allow_url_include = 0 (which it generally is by default)
if (!defined('INIT_NAMESPACES')) {
    define('INIT_NAMESPACES', true);
    $str = substr_replace(file_get_contents(__FILE__), ' namespace phpseclib;', 5, 0);
    include('data://text/plain;base64,' . base64_encode($str));
    return;
}

class test {
    function zz() { echo 'aaa'; }
}

echo "THIS FAR";
?> 
```

demo.php的内容：

```
<?php
ini_set('display_errors', 'on');
error_reporting(E_ALL);
include('test.php');

echo "ALL DONE";
?> 
```

运行 demo.php 会产生 THIS FAR 正在输出，但不是 ALL DONE。关于为什么的任何想法？

至于我想要做什么......虽然我认为这并不相关，但这是一个测试脚本，用于测试使用命名空间但在 PHP4 上没有它们也可以工作的代码的可行性。但是，我们不要让这分散我们对这个问题的注意力。我要问的问题不是关于命名空间或 PHP4 或类似的东西——而是关于为什么 ALL DONE 没有被显示。

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T19:53:28.307

实际上，代码有效。我是一个彻头彻尾的白痴并调用 test.php 而不是 demo.php 大声笑：O

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T19:11:33.000

在`test.php`替换`$str = ...`行中：

```
$handle = fopen(__FILE__, 'r');
$str = fread($handle, filesize(__FILE__));
fclose($handle);
$str = substr_replace($str, ' namespace phpseclib;', 5, 0); 
```

# r - r中的%in%的反义词是什么

> ID：14105229
> 
> 赞同：7
> 
> 时间：2012-12-31T19:01:51.190
> 
> 标签：r

> **可能重复：**
> [与 %in% 相反](https://stackoverflow.com/questions/5831794/opposite-of-in)

什么是相反的

```
matrix[matrix%in%1,]?

!%in% does not work. 
```

我想选择不包含特定数字的项目。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-31T19:19:06.513

如果您发现自己经常使用@Joshua 的建议，您可以轻松创建自己的`%notin%`运算符。

```
`%notin%` <- Negate(`%in%`)
'a' %notin% c('b', 'c')
# [1] TRUE 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-12-31T19:03:01.123

你要：

```
matrix[!matrix %in% 1,] 
```

为了清楚起见，我更喜欢这个，即使括号不是必需的。

```
matrix[!(matrix %in% 1),] 
```

另请注意，您需要了解[常见问题解答 7.31：为什么 R 认为这些数字不相等？](http://cran.r-project.org/doc/manuals/R-FAQ.html#Why-doesn_0027t-R-think-these-numbers-are-equal_003f).

# html - 无法使用 CSS 更改字体颜色？

> ID：14105233
> 
> 赞同：3
> 
> 时间：2012-12-31T19:02:35.047
> 
> 标签：html, css

我有以下 HTML

```
<div class = "left">
<div id = "links">
<a href = "none" style = "text-decoration: none"><b>About</b></a>
<br>
<a href = "none" style = "text-decoration: none"><b>Principals</b></a>
<br>
<a href = "none" style = "text-decoration: none"><b>Contact</b></a>    
<br>    
</div>
</div>​ 
```

和 CSS

```
.left {
       position: fixed;
       top: 0px;
       left: 0px;
       width: 30%;
       height: 100%;
       background-color: #8EE5EE;
       color: #000000;
      }
#links {
        position: relative;
        top: 40%;
        text-align: right;
        font-family: "Verdana", "Arial Black", sans-serif;
        font-size: 25px;
        color: #000000;
       }​ 
```

我的链接的颜色应该是黑色，但它们显示为深蓝色。这段代码有什么问题？

[JSFiddle在这里](http://jsfiddle.net/VHnnA/6/)

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-31T19:06:55.233

您遇到的问题是`a`元素具有不从父元素继承颜色的默认样式。强制继承`color`属性：

```
a {
    color: #000; /* for browsers that don't support 'inherit' as a color value */
    color: inherit;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-31T19:05:53.307

将此添加到您的CSS：

```
#links a:link{
    color: #000;
} 
```

然后，您可以添加诸如...

```
#links a:visited{
    color: #000;
}
#links a:hover{
    color: #000;
}
#links a:active{
    color: #000;
} 
```

...改变不同状态下链接的颜色。

这方面的一些阅读材料：[http ://www.w3schools.com/css/css_link.asp](http://www.w3schools.com/css/css_link.asp)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-31T19:06:22.990

添加`#links a { color: #000; }`到您的 CSS 以设置您的链接样式（或者`a { color: #000; }`如果您希望此颜色是全局的）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-31T19:06:00.543

试试这个

```
#links a:link, a:hover, a:visited, a:active {
   color: #000000;
} 
```

继承人一些[文档](http://www.w3schools.com/css/css_link.asp)。

# javascript - 有没有办法在 IntelliJ 中以不同方式格式化 JavaScript 对象和函数参数？

> ID：14105234
> 
> 赞同：1
> 
> 时间：2012-12-31T19:02:37.140
> 
> 标签：javascript, intellij-idea, code-formatting

我刚刚开始深入研究 Node.JS，并通过扩展 JavaScript，当参数可能是对象或函数时，我会花很多时间阅读代码。我目前正在使用 IntelliJ 的 IDEA 作为我的 IDE，那么 IDEA 中有没有办法独立编辑对象参数和函数参数的颜色/字体？

**编辑：添加示例**

我正在阅读 Manuael Kiessling (http://www.nodebeginner.org) 的 The Node Beginner Book，所以这些示例直接来自那里。

在 index.js 中有一个对象变量`handle`，它作为函数名称的 url 路径的关联数组，这样`handle`和`pathname`成为对象。

```
var server = require("./server");
var router = require("./router");
var requestHandlers = require("./requestHandler");

var handle = {};
handle['/'] = requestHandlers.start;
handle['/start'] = requestHandlers.start;
handle['/upload'] = requestHandlers.upload;

server.start(router.route, handle); 
```

在 router.js 中，有一个函数`route`用于将具有有效路径名的句柄引导到它们各自的函数，而将无效路径名引导到信息 404。

```
function route(handle, pathname, response) {
    console.log("About to route a request for " + pathname);
    if (typeof handle[pathname] === 'function') {
        handle[pathname](response);
    } else {
        console.log("No request handler found for " + pathname);
        response.writeHead(404, {"Content-Type": "text/plain"});
        respones.write("404 Not Found");
        response.end();
    }
}

exports.route = route; 
```

在 server.js 中有一个函数`start`使用`handle`(ala object) 和`route`(ala function) 作为参数来启动服务器。var http = require('http'); var url = 需要('url');

```
function start(route, handle) {
    function onRequest(request, response) {
        var pathname = url.parse(request.url).pathname;
        console.log('Request for ' + pathname + ' received.')

        route(handle, pathname, response)
    }

    http.createServer(onRequest).listen(8888);
    console.log('Server has started.');
}

exports.start = start; 
```

因此，对于函数来说，最好在参数（它本身是一个函数）和（它只是一个对象）`start`之间有一些视觉上的区别。`route``handle`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T20:00:08.040

所有的 JS 函数*都是*对象，所以我认为这是不可能的。

# visual-studio-2010 - 我的 CSS 水平菜单完美显示：block，但在子目录中看起来完全不同

> ID：14105235
> 
> 赞同：0
> 
> 时间：2012-12-31T19:02:39.547
> 
> 标签：visual-studio-2010, visual-studio, css, blogengine.net

我刚刚实现了启动新网站时出现的 VS 2010 的基本水平菜单。页面在我的根目录中看起来不错。

当我创建一个 /blog/ 应用程序 (blogengine.net) 时，我进行了一些更改……将我自己的徽标、favicon 等放在那里，并尝试将我的菜单放在那里。它似乎与任何其他样式表中的任何其他菜单类都没有冲突。我什至在代码和样式表中将类重命名为 topmenu 以确保。奇怪的是，它在设计模式下的 VS 中看起来不错。

所以我检查了三次，发现没有 .css 冲突，所以代码仍然是这样的：

```
 <div class="clear hideSkiplink">
            <asp:Menu ID="NavigationMenu" runat="server" CssClass="menu" EnableViewState="false"
                IncludeStyleBlock="false" Orientation="Horizontal">
                <Items>
                    <asp:MenuItem NavigateUrl="http://rtn.org/Default.aspx" Text="Home" />
                    <asp:MenuItem NavigateUrl="http://rtn.org/About.aspx" Text="About RTN" />
                    <asp:MenuItem NavigateUrl="http://rtn.org/resources.aspx" Text="RTN Resources" />
                    <asp:MenuItem NavigateUrl="http://rtn.org/advertise.aspx" Text="Advertise with RTN" />
                    <asp:MenuItem NavigateUrl="http://rtn.org/donate.aspx" Text="Donate to RTN" />
                </Items>
            </asp:Menu>
        </div> 
```

CSS看起来像这样：

```
div.hideSkiplink
{
background-color: #3a4f63;
width: 100%;
}

div.menu
{
padding: 4px 0px 4px 8px;
}

div.menu ul
{
list-style: none;
margin: 0px;
padding: 0px;
width: auto;
}

div.menu ul li a, div.menu ul li a:visited
{
background-color: #465c71;
border: 1px #4e667d solid;
color: #dde4ec;
display: block;
line-height: 1.35em;
padding: 4px 20px;
text-decoration: none;
white-space: nowrap;
}

div.menu ul li a:hover
{
background-color: #bfcbd6;
color: #465c71;
text-decoration: none;
}

div.menu ul li a:active
{
background-color: #465c71;
color: #cfdbe6;
text-decoration: none;
} 
```

但是正如您从这张图片中看到的那样，由于某种原因，在我的 /blog/ 子目录母版页中，无论出于何种原因，显示：块都无法正常工作，就像在我的根母版页中一样：

![菜单](../Images/f97835e44c9d96aac445e1709ff39261.png)

有人知道为什么会这样吗？同样，它在设计模式下的 VS 中看起来不错。只是当我上传它时， display:block 无法正常工作。我已经摆弄了几个小时，但无法在我的 /blog/ 子目录中重现该菜单。任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T20:07:59.553

几乎总是会发生这种情况，因为您的 CSS 的相对链接没有链接到正确的位置。在您的其他页面上，样式表显示正确，因为相对链接指向您正确的站点根目录。但是，在您的子域上，根最有可能**是该子域**，而不是您网站的实际根。

例如，如果您的链接通常是：

```
<link rel="stylesheet" type="text/css" href="css/mystyle.css"> 
```

该链接指向[http://yoursite.com/foo/css/style.css](http://yoursite.com/foo/css/style.css)。

但是，当您从博客链接时，即使相对链接相同，它现在也链接到[http://yoursite.com/blog/foo/css/style.css](http://yoursite.com/blog/foo/css/style.css)。

要修复它，请尝试放入绝对链接以确保这是问题所在：

```
 <link rel="stylesheet" type="text/css" href="http://yoursite.com/blog/foo/css/style.css"> 
```

如果在尝试之后它有效，请返回并确保这些相关链接到达正确的位置并且您足够具体。

# php - 在“开始”和“结束”日期自定义字段之间显示当前的 Wordpress 帖子

> ID：14105238
> 
> 赞同：1
> 
> 时间：2012-12-31T19:03:27.927
> 
> 标签：php, wordpress, events, date, custom-fields

因此，我试图仅显示介于开始日期 (st_date) 和结束日期 (end_date) 自定义字段之间的当前事件。目前，这对当前事件根本不起作用。

根据我的时区（东部）-5，我当前安装 Wordpress 的时间是正确的。

我试图更改我的 Wordpress 网站上的日期格式以匹配 Ymd，但是由于即将发生的和以前的事件都出现了，它显然没有帮助我。

是它正在工作的服务器时间吗？截至目前 12/31，它显示了一个开始日期为 12/30 的事件，而不是我创建的开始日期为 12/31 的事件。

这是我当前的代码。关于需要改变什么的任何想法？谢谢你的帮助！

```
 //FILER FOR SEPARATING UPCOMING, CURRENT AND PAST EVENTS
function event_where($where)
{
    global $wpdb,$wp_query;
    $current_term = $wp_query->get_queried_object();
    if((is_archive() || is_tag()) && ($current_term->taxonomy==CUSTOM_CATEGORY_TYPE1 || $current_term->taxonomy==CUSTOM_TAG_TYPE1))
    {
        if($current_term->taxonomy == CUSTOM_CATEGORY_TYPE1 || $current_term->taxonomy == CUSTOM_TAG_TYPE1)
        {
            if(@$_REQUEST['etype']=='')
            {
                $_REQUEST['etype']='current';
            }
            if(@$_REQUEST['etype']=='current')
            {
                $today = date('Y-m-d G:i:s');
                $where .= "  AND ($wpdb->posts.ID in (select $wpdb->postmeta.post_id from $wpdb->postmeta where $wpdb->postmeta.meta_key='st_date' and date_format($wpdb->postmeta.meta_value,'%Y-%m-%d %G:%i:%s') <='".$today."')) AND ($wpdb->posts.ID in (select $wpdb->postmeta.post_id from $wpdb->postmeta where $wpdb->postmeta.meta_key='end_date' and date_format($wpdb->postmeta.meta_value,'%Y-%m-%d %G:%i:%s') > '".$today."')) ";
            }
            elseif($_REQUEST['etype']=='upcoming')
            {
                $today = date('Y-m-d G:i:s');
                $where .= " AND ($wpdb->posts.ID in (select $wpdb->postmeta.post_id from $wpdb->postmeta where $wpdb->postmeta.meta_key='st_date' and date_format($wpdb->postmeta.meta_value,'%Y-%m-%d %G:%i:%s') >'".$today."' and $wpdb->posts.post_status = 'publish')) ";
            }
            elseif($_REQUEST['etype']=='past')
            {
                $today = date('Y-m-d G:i:s');
                $where .= " AND ($wpdb->posts.ID in (select $wpdb->postmeta.post_id from $wpdb->postmeta where $wpdb->postmeta.meta_key='end_date' and date_format($wpdb->postmeta.meta_value,'%Y-%m-%d %G:%i:%s') < '".$today."')) ";
            }
        }elseif(is_day() || is_month() || is_year())
        {
            $where = str_replace("'post'","'".CUSTOM_POST_TYPE1."'",$where); 
        }
    }
    return $where;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T22:33:42.113

我可以想到要检查的几件事：

如果您担心时区不正确，您可以随时让 MySQL 提供日期时间。您将更改这样的语句：

```
$today = date('Y-m-d G:i:s');
$where = "AND date_format($wpdb->postmeta.meta_value,'%Y-%m-%d %G:%i:%s') <='" . $today . "'))"; 
```

像这样：

```
$where = "AND date_format($wpdb->postmeta.meta_value,'%Y-%m-%d %G:%i:%s') <= NOW() ))"; 
```

[NOW()](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_now)是 MySQL 提供当前服务器日期时间的命令。

当您在自定义字段中输入开始日期和结束日期时，您使用的是日期还是日期和时间？如果您不使用时间，则诸如“2012-12-31”之类的日期将被解释为“2012-12-31 00:00:00”。这可能会导致问题，尤其是结束日期。考虑在这种情况的结束日期上增加一天（或 86,400 秒）。

如果您怀疑在正确解释日期时遇到问题，MySQL 有一个等效于 PHP 的 strtotime() 命令：[STR_TO_DATE](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_str-to-date)。您可以获取人类可读的字符串并将其转换为您想要的格式。

当使用 $wpdb 进行查询时，您可以尝试输出 $wpdb->last_query 以查看发送到 MySQL 的完整 SQL 的确切时间。尝试在你最喜欢的 MySQL 客户端中运行它，看看你会得到什么结果。

# c# - 如何将文本框条目放入while循环？C＃

> ID：14105243
> 
> 赞同：2
> 
> 时间：2012-12-31T19:03:49.343
> 
> 标签：c#, textbox, while-loop

这基本上就是我想要做的。我想允许某人输入他们想要运行特定程序多少次的数字。我不知道如何将数字 10 更改为 (textBox1.Text)。如果你有更好的方法请告诉我。我对编程很陌生。

```
int counter = 1;
while ( counter <= 10 )
{
    Process.Start("notepad.exe");
    counter = counter + 1;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T19:07:17.007

这显示了如何获取用户提供的输入并将其***安全地***转换为整数 (System.Int32) 并在您的计数器中使用它。

```
int counter = 1;
int UserSuppliedNumber = 0;

// use Int32.TryParse, assuming the user may enter a non-integer value in the textbox.  
// Never trust user input.
if(System.Int32.TryParse(TextBox1.Text, out UserSuppliedNumber)
{
   while ( counter <= UserSuppliedNumber)
   {
       Process.Start("notepad.exe");
       counter = counter + 1;  // Could also be written as counter++ or counter += 1 to shorten the code
   }
}
else
{
   MessageBox.Show("Invalid number entered.  Please enter a valid integer (whole number).");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T19:05:19.890

尝试`System.Int32.TryParse(textBox1.Text, out counterMax)`（[MSDN 上的文档](http://msdn.microsoft.com/en-us/library/system.int32.tryparse.aspx)）将字符串转换为数字。

如果转换成功，则返回 true；如果失败，则返回 false（即，用户输入的不是整数）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-31T19:07:07.643

textBox1.Text 将返回一个字符串。您需要将其转换为 int 并且由于它正在接受用户输入，因此您需要安全地这样做：

```
int max;
Int32.TryParse(value, out max);
if (max)
{
    while ( counter <= max ) {}
}
else
{
    //Error
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T20:27:01.063

我建议使用 MaskedTextBox 控件从用户那里获取输入，这将帮助我们确保只提供数字。它不会限制我们的`TryParse`功能。

像这样设置掩码：（可以使用“属性窗口”）

```
MaskedTextBox1.Mask = "00000";   // will support upto 5 digit numbers 
```

然后像这样使用：

```
int finalRange = int.Parse(MaskedTextBox1.Text);
int counter = 1;
while ( counter <= finalRange )
{
    Process.Start("notepad.exe");
    counter = counter + 1;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-31T20:49:01.500

使用 Try Catch body ，比如这个函数

```
bool ErrorTextBox(Control C)
    {
        try
        {
            Convert.ToInt32(C.Text);
            return true;
        }
        catch { return false; }
    } 
```

并使用

# ruby-on-rails - Rails 表单 - 迭代表单中的集合

> ID：14105246
> 
> 赞同：1
> 
> 时间：2012-12-31T19:04:10.047
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在我的表单中，我想遍历一个特定的集合并收集关于每个集合的相同信息。为简单起见，类似：

```
<%= form_tag :update_dog do %>
    <% @dogs.each do |dog| %>
        <%= text_field_tag :name, :class=>dog.id %>
    <% end %>
    <%= submit_tag "Add", :class => 'btn btn-success'%>
<%= end %> 
```

我想收集每只狗的名字以在控制器中进行操作（我希望能够遍历每个提交的狗名并访问它的 id）。我收藏的狗的潜在数量是可变的。做这个的最好方式是什么？上面的代码是我到目前为止所拥有的，但我不知道它是否正确，如果正确，如何在控制器中使用它。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T19:19:06.323

我会从一个过滤器开始。创建一个 before_filter 来创建你的狗

```
class KennelController < ApplicationController
  before_filter  :get_dogs , :only=>[:new,:edit]
  def get_dogs
     @dogs = Dog.all.map{|d| [d.name, d.id]}
  end
  ....
end 
```

然后在您的新视图或编辑视图中，您可以执行以下操作：

```
<%= select_tag :dog, options_for_select(@dogs) %> 
```

# ruby-on-rails - 在我的应用程序中使用 cancan 和 devise

> ID：14105247
> 
> 赞同：0
> 
> 时间：2012-12-31T19:04:10.900
> 
> 标签：ruby-on-rails, devise, cancan

我想使用`cancan`它来限制想要查看我的应用程序中某些页面的用户。

所以我尝试通过本教程来做到这一点： [http ://www.roberthuberdeau.com/articles/9-Blog-tutorial-part-3](http://www.roberthuberdeau.com/articles/9-Blog-tutorial-part-3)

我有两个角色：Admin 和 Worker，我有两个控制器：Tasksadmins 和 Workers。

我想定义下一件事：

1）Workers可以管理和查看Workerscontroller的所有东西。

2）管理员可以管理和查看Tasksadminscontroller的所有东西。

我不确定我是否正确定义了它：

```
class Ability
    include CanCan::Ability

    def initialize(user)
      user ||= User.new # guest user

      if user.role? :Admin
        can :manage, :tasksadmins
      elsif user.role? :Worker
        can :manage, :workers
      end
   end
end 
```

我认为我不需要实现的下一件事是：“def initialize user bit 是为来宾用户准备的。” 我强制用户登录：`before_filter :authenticate_user`

接下来是：开始根据用户角色限制对博客应用程序的访问：

我不知道我应该写什么以及在哪里写。

在示例中，他写道：

```
authorize! :edit, @article 
```

所以我尝试在 tasksadmins 控制器中编写以下内容：

```
authorize! :edit, @tasksadmins
authorize! :new, @tasksadmins
authorize! :index, @tasksadmins
authorize! :create, @tasksadmins
authorize! :show, @tasksadmins
authorize! :destroy, @tasksadmins 
```

但我得到一个错误：`undefined method 'authorize!' for TasksadminsController:Class`

请帮帮我，我在定义的末尾`cancan`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T20:42:50.990

这篇文章已经过时了，我建议查看 github 页面上的 CanCan 文档，尤其是[这个](https://github.com/ryanb/cancan/wiki/Controller-Authorization-Example)。这看起来像您想要做的，但如文档中所示，您不必`authorize`单独执行每个操作。此外，[这](https://github.com/ryanb/cancan/wiki/Devise)应该有助于您解决第二个设计问题。如果您要指定设计的版本，如文章中所示，我强烈建议您尽可能升级您的 gem。祝你好运！

# eclipse - 是否有适用于 Eclipse 的 IntelliJ Keymapping 插件？

> ID：14105249
> 
> 赞同：58
> 
> 时间：2012-12-31T19:04:22.280
> 
> 标签：eclipse, eclipse-plugin, intellij-idea, keyboard-shortcuts

我是 IntelliJ 的老用户，现在正在做一个需要 Eclipse 的项目。我不介意学习它们存在的 Eclipse 默认键盘快捷键，但是很多操作没有分配快捷键（grrrr！）

我想知道是否有任何插件可以自动将 IntelliJ 默认值分配给任何还没有映射的操作？

作为替代方案，我想我也可以使用一个插件来清除所有 Eclipse 默认值并用 IntelliJ 版本替换它们。

还是我必须去手动一一替换它们:(？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-12-31T19:35:47.660

IdeaKeyScheme[插件](https://code.google.com/p/ideakeyscheme/)是由一个想要同样东西的人开发的。源代码和二进制文件可用。我自己没有尝试过，但是很多人使用它并取得了巨大的成功。它似乎是唯一的东西。

如果您关心键盘映射，[Eclipse 的 Key Promoter 插件](https://marketplace.eclipse.org/content/mousefeed)（称为 MouseFeed）也会有很大帮助。还有一个[IntelliJ 版本](http://plugins.jetbrains.net/plugin?pr=webide&pluginId=4455)。我强烈推荐这个插件来提高生产力。

* * *

**安装和启用[IdeaKeyScheme 插件](https://code.google.com/p/ideakeyscheme/)**

1.  对于 Eclipse：将 jar 文件添加到`eclipse/dropins/plugins`文件夹。
2.  重新启动 Eclipse。
3.  打开*Window* → *Preferences* → *General* → *Keys*并选择方案*"Intellij Idea"*。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-04-20T15:00:25.010

我想要同样的东西，因为我主要使用 IntelliJ IDEA。在 eclipse 市场上找到了这个，到目前为止它具有相同的键映射。

通过转到： ***Window >> Preferences >> General >> Keys***来激活它：将方案更改为：IntelliJ IDEA

[https://marketplace.eclipse.org/content/intellij-idea-keymap-eclipse](https://marketplace.eclipse.org/content/intellij-idea-keymap-eclipse)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-15T12:11:25.227

打开你的eclipse软件 拖放`Installer`按钮从

> [https://marketplace.eclipse.org/content/intellij-idea-keymap-eclipse](https://marketplace.eclipse.org/content/intellij-idea-keymap-eclipse)

在你总是打开的日食中，仅此而已

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-22T11:01:39.400

您可以按此处所述添加键映射： [http ://www.jroller.com/santhosh/entry/intellij_idea_key_scheme_for](http://www.jroller.com/santhosh/entry/intellij_idea_key_scheme_for)

插件本身是：http: [//jroller.com/santhosh/resource/IdeaKeyScheme.jar](http://jroller.com/santhosh/resource/IdeaKeyScheme.jar)

您只需将 jar 文件放入 eclipse/plugins 并重新启动 IDE。它在 Luna 上运行得很好！

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2016-01-14T22:40:34.547

事实证明，在 IntelliJ 中，默认情况下您可以选择键盘映射方案。因此，您无需任何插件即可应用 Eclipse 快捷方式。只需按 CTRl + `

详细信息在这里 [http://zeroturnaround.com/rebellabs/getting-started-with-intellij-idea-as-an-eclipse-user/4/](http://zeroturnaround.com/rebellabs/getting-started-with-intellij-idea-as-an-eclipse-user/4/)

# c++ - 在 C++ 中具有传递引用的默认参数

> ID：14105257
> 
> 赞同：0
> 
> 时间：2012-12-31T19:05:09.530
> 
> 标签：c++, pass-by-reference, default-parameters

我有许多引用`typedef`'d 数据类型的函数，如下所示：

```
typedef std::map<string, string> dict;

union ret_t{
    int i;
    long l;
    double d;
};

ret_t func1(char* bytes, dict &d){
    //blah blah
}
ret_t func2(char* bytes, dict &d){
    //blah blah 2
} 
```

我还有一个处理函数的映射，使用`boost::function`如下定义：

```
std::map <int, boost::function< ret_t (char*, dict) > > handlers; 
```

我定义了这一点，以便使用我正在使用的 >100 个处理函数，我可以简单地读取一个键并调用`handlers[key](bytes, d);`并让我的函数执行，我的不同数据类型只需要 3 个 if/else（知道我需要的数据类型是另一个我不会涉及的问题。它与问题无关）。这按预期工作。

我的问题是少数函数不使用字典，并且在处理程序之外的上下文中很有用（例如，准备字节流并将其转换为 long int 的函数）。为了从我没有预定义字典的上下文中调用此函数，我要么必须创建一个从未使用过的无用字典：

```
dict d;
func1(bytes, d); 
```

或者我必须 pverride 函数：

```
//previous definition

ret_t func1(char* bytes){
    //same blah blah as before
} 
```

当我尝试使用默认参数（例如`NULL`空字典）定义它时，出现编译器错误：

```
default argument for 'dict& d' has type 'dict {aka std::map<std::basic_string<char>, std::basic_string<char> >}' 
```

有没有办法做我想做的事，而不必完全重写我的代码来传递指针而不是引用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T20:12:09.153

对于那些不需要字典的函数，创建两个版本。有一个不将字典作为参数，而另一个只是在没有字典的情况下调用另一个。将前者用于所有直接调用，而将后者用于像其他使用字典的函数一样进行调度。

# c# - 下拉列表数据源

> ID：14105265
> 
> 赞同：8
> 
> 时间：2012-12-31T19:06:00.483
> 
> 标签：c#, asp.net, .net, sql

大家好，我对下拉列表有疑问。我正在使用带有数据源的下拉列表。我怎样才能得到我选择的那个值？

```
// I need a if statement here because my programme doesn't know which value of dropdown list selected and I don't know how to use this with datasource.

if(//if I select quiz 1 from dropdown list ,quiz 1 should list questions.)

SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["RegConnectionString"].ConnectionString);

string chooce = "Select Quiz from tblQuiz where Quiz=1 ";
SqlCommand userExist = new SqlCommand(chooce, con);
con.Open();
int temp = Convert.ToInt32(userExist.ExecuteScalar().ToString());

if (temp == 1)
{
    if (rbList.Items[0].Selected == true)
    {
        string cmdStr = "Select Question from tblQuiz where ID=1";
        SqlCommand quest = new SqlCommand(cmdStr, con);
        lblque.Text = quest.ExecuteScalar().ToString();
        con.Close();
    } 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-12-31T19:59:10.023

您可以使用不同的方式绑定 DropDownList `List, Dictionary, Enum, DataSet DataTable`。
在绑定下拉列表的数据源时，主要您必须考虑三件事。

1.  DataSource - 数据集或数据表或您的数据源的名称
2.  DataValueField - 这些字段将被隐藏
3.  DataTextField - 这些字段将显示在 dropdwon 上。

您可以使用以下代码将下拉列表绑定到数据源`datatable`：

```
 SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["ConnString"].ConnectionString);

    SqlCommand cmd = new SqlCommand("Select * from tblQuiz", con);

    SqlDataAdapter da = new SqlDataAdapter(cmd);

    DataTable dt=new DataTable();
    da.Fill(dt);

    DropDownList1.DataTextField = "QUIZ_Name";
    DropDownList1.DataValueField = "QUIZ_ID"

    DropDownList1.DataSource = dt;
    DropDownList1.DataBind(); 
```

如果你想处理下拉列表的选择，那么你必须改变`AutoPostBack="true"`你可以使用`SelectedIndexChanged`事件来编写你的代码。

```
protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
{
    string strQUIZ_ID=DropDownList1.SelectedValue;
    string strQUIZ_Name=DropDownList1.SelectedItem.Text;
    // Your code..............
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-13T13:28:31.853

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
    {
        drpCategory.DataSource = CategoryHelper.Categories;
        drpCategory.DataTextField = "Name";
        drpCategory.DataValueField = "Id";
        drpCategory.DataBind();
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-01T03:19:03.410

请参阅此链接中的示例。它可能对你有帮助。

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.dropdownlist.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.dropdownlist.aspx)

```
void Page_Load(Object sender, EventArgs e)
  {

     // Load data for the DropDownList control only once, when the 
     // page is first loaded.
     if(!IsPostBack)
     {

        // Specify the data source and field names for the Text 
        // and Value properties of the items (ListItem objects) 
        // in the DropDownList control.
        ColorList.DataSource = CreateDataSource();
        ColorList.DataTextField = "ColorTextField";
        ColorList.DataValueField = "ColorValueField";

        // Bind the data to the control.
        ColorList.DataBind();

        // Set the default selected item, if desired.
        ColorList.SelectedIndex = 0;

     }

  }

void Selection_Change(Object sender, EventArgs e)
  {

     // Set the background color for days in the Calendar control
     // based on the value selected by the user from the 
     // DropDownList control.
     Calendar1.DayStyle.BackColor = 
         System.Drawing.Color.FromName(ColorList.SelectedItem.Value);

  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T19:09:02.580

这取决于您如何设置下拉菜单的默认值。使用选定的值，但您必须设置选定的值。例如，我使用表/列表的名称和 id 字段填充数据源。我将选定的值设置为 id 字段，并将显示设置为名称。当我选择时，我得到 id 字段。我用它来搜索关系表并找到实体/记录。

# wordpress - Wordpress NextPage 标签在主页上提供了不需要的帖子分页

> ID：14105270
> 
> 赞同：0
> 
> 时间：2012-12-31T19:06:23.740
> 
> 标签：wordpress, pagination

我正在私人测试服务器上基于他们的股票 21 主题构建一个 Wordpress 子主题。

我正在使用 <--nextpage--> 对长帖子进行分页，它在我的单个帖子页面上效果很好，但我的问题是它还在主页摘录上显示了分页帖子的分页，我没有不想要。即使 <--nextpage--> 标签在我的帖子中出现的时间晚于 <--more--> 标签，也会发生这种情况。

任何想法如何在我的单一帖子页面上保留我的主页上的帖子分页？

非常感谢，

多纳尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T22:41:57.907

我以前没有使用过 nextpage 快速标签，但是 - 至少据我所知 - 为了让给定的帖子了解需要将快速标签转换为页面链接，您需要在给定循环中的某处调用[wp_link_pages 。](http://codex.wordpress.org/Template_Tags/wp_link_pages)

如果是这种情况，那么您将需要创建一份二十一/内容-single.php 文件的副本并将其放在您的子主题中。

在第 24 行，您应该看到：

```
<?php wp_link_pages( array( 'before' => '<div class="page-link"><span>' . __( 'Pages:', 'twentyeleven' ) . '</span>', 'after' => '</div>' ) ); ?> 
```

尝试将其更改为：

```
<?php
if(!is_front_page())
    wp_link_pages( array( 'before' => '<div class="page-link"><span>' . __( 'Pages:', 'twentyeleven' ) . '</span>', 'after' => '</div>' ) );
?> 
```

这是未经测试的，老实说，我以前从未使用过下一页标签，所以我不确定这是否会达到你想要的效果。但是试一试，让我知道它是如何工作的。

# java - 在 java 中具有继承的流利的 setter

> ID：14105275
> 
> 赞同：18
> 
> 时间：2012-12-31T19:06:45.113
> 
> 标签：java

我最近看到了一些使用这种语法的代码（amazon hadoop 代码）

```
Foo bar = new Foo().setX(10).setY(11); 
```

我觉得这很甜蜜，所以我决定试一试。让我的`setX()`类型函数返回`Foo`而不是全部`void`放入。`return this;`这运作良好。直到我尝试使用继承，这产生了一些惊人的结果。

我将举一个具体的例子：我有两个类，一个`Location`类有两个字段，x 和 y。另一个类`Location3D`继承自`Location`并添加了第三个字段 z。所有字段都使用上述方法作为其设置器。

现在我想创建一个新的 location3D 实例并设置它的字段，会发生什么

```
new Location3D().setZ(7).setY(6).setX(5) 
```

工作时

```
new Location3D().setX(7).setY(6).setZ(5) 
```

没有。

by 不起作用我的意思是返回的`setY(6)`是一个`Location`对象而不是一个`location3D`对象，因此没有`setZ()`方法！

在这么长的介绍之后，我的问题是：这种形式的“setter stringing”是否可以在不强制调用者强制转换对象的情况下与继承一起使用？如果是这样怎么办？

我也确信有一个比“二传手穿线”更好的术语，它是什么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-31T19:15:36.300

正如您所指出的，`new Location3D().setX(7).setY(6).setZ(5)`不起作用的原因是因为`setX()`and返回and not`setY()`的实例。`Location``Location3D`

您可以通过向您的类添加泛型类型参数来使用泛型（尽管解决方案不是特别漂亮）来解决这个问题`Location`：

```
public class Location<T extends Location<T>> {
    protected int x, y;

    @SuppressWarnings("unchecked")
    public T setX(int x) {
        this.x = x;
        return (T) this;
    }

    @SuppressWarnings("unchecked")
    public T setY(int y) {
        this.y = y;
        return (T) this;
    }
} 
```

然后，您的子类`Location3D`会将自己设置为泛型类型参数，以便超类返回实例`Location3D`而不是`Location`：

```
public class Location3D extends Location<Location3D> {
    protected int z;

    public Location3D setZ(int z) {
        this.z = z;
        return this;
    }
} 
```

不幸的是，我知道没有办法避免超类产生的警告，因此是`@SuppressWarnings("unchecked")`注释。

还值得注意的是，如果您定义子类以使泛型类型参数是不同的类类型，那么您可能`ClassCastException`会以 .

最后，以您描述的方式将方法调用链接在一起通常称为[*方法链接*](http://en.wikipedia.org/wiki/Method_chaining)。您所描述的 setter 方法的风格与[builder 模式](http://en.wikipedia.org/wiki/Builder_pattern)密切相关。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-31T19:19:41.190

问题是 Location 返回 Location，因为 Location3D 将返回 Location3D。要解决此问题，请覆盖要在 Location3D 中使用的方法并更改返回类型：

```
public class Location {
    private int x;
    private int y;

    public Location setY(int y){
        this.y = y;
        return this;
    }

    public Location setX(int x){
        this.x = x;
        return this;
    }
} 
```

和 Location3D：

```
public class Location3D extends Location {

    private int z;

    public Location3D setY(int y){
        super.setY(y);
        return this;
    }

    public Location3D setX(int x){
        super.setX(x);
        return this;
    }

    public Location3D setZ(int z){
        this.z = z;
        return this;
    }
} 
```

**组合方法：**

```
public class Location {
    private int x;
    private int y;

    public Location setY(int y){
        this.y = y;
        return this;
    }

    public Location setX(int x){
        this.x = x;
        return this;
    }
} 
```

和 Location3D：

```
public class Location3D {

    private Location location = new Location();
    private int z;

    public Location3D setY(int y){
        location.setY(y);
        return this;
    }

    public Location3D setX(int x){
        location.setX(x);
        return this;
    }

    public Location3D setZ(int z){
        this.z = z;
        return this;
    }
} 
```

# flash - swf 文件在主文件夹中有效，但在子文件夹中无效

> ID：14105276
> 
> 赞同：2
> 
> 时间：2012-12-31T19:06:49.623
> 
> 标签：flash

在过去的几天里，我一直在为此绞尽脑汁，但我一无所获。我已经检查了所有可能的答案，但仍然没有解决方案。

这是我的问题：

我的网站是这样布局的：在“root”中，我有“index.htm”和根目录下的其他文件夹，其中一个是“pages”，它有eyes.htm。

我的“swf”文件位于根目录下的“media”文件夹中。

*   根（文件夹）-> index.htm
*   页面（文件夹）-> eye.htm
*   媒体（文件夹）--> shb_ticker.swf
*   脚本（文件夹）
*   css（文件夹）

在 index.htm 中，我在 div 中有一个 flash 对象，如下所示。

* * *

```
 <param name="movie" value="media/shb_ticker.swf" />
 <param name="quality" value="high" />
 <param name="wmode" value="opaque" />
 <param name="swfversion" value="7.0.70.0" />
 <!-- This param tag prompts users with Flash Player 6.0 r65 and higher to download the latest version of Flash Player. Delete it if you don’t want users to see the prompt. -->
 <param name="expressinstall" value="scripts/expressInstall.swf" />
 <!-- Next object tag is for non-IE browsers. So hide it from IE using IECC. -->
 <!--[if !IE]>-->
 <object type="application/x-shockwave-flash" data="media/shb_ticker.swf" width="970" height="28">
   <!--<![endif]-->
   <param name="quality" value="high" />
   <param name="wmode" value="opaque" />
   <param name="swfversion" value="7.0.70.0" />
   <param name="expressinstall" value="scripts/expressInstall.swf" />
   <!-- The browser displays the following alternative content for users with Flash Player 6.0 and older. -->
   <div>
     <h4>Content on this page requires a newer version of Adobe Flash Player.</h4>
     <p><a href="http://www.adobe.com/go/getflashplayer"><img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player" width="112" height="33" /></a></p>
   </div>
   <!--[if !IE]>-->
 </object>
 <!--<![endif]--> 
```

这在 index.htm 中运行良好。

当我在eyes.htm（下面的片段）中复制和修改子文件夹'pages'中的代码时，我什么也没得到！

* * *

```
 <param name="movie" value="**../media/shb_ticker.swf**" />
 <param name="quality" value="high" />
 <param name="wmode" value="opaque" />
 <param name="swfversion" value="7.0.70.0" />
 <!-- This param tag prompts users with Flash Player 6.0 r65 and higher to download the latest version of Flash Player. Delete it if you don’t want users to see the prompt. -->
 <param name="expressinstall" value="../scripts/expressInstall.swf" />
 <!-- Next object tag is for non-IE browsers. So hide it from IE using IECC. -->
 <!--[if !IE]>-->
 <object type="application/x-shockwave-flash" data="**../media/shb_ticker.swf**" width="970" height="28">
   <!--<![endif]-->
   <param name="quality" value="high" />
   <param name="wmode" value="opaque" />
   <param name="swfversion" value="7.0.70.0" />
   <param name="expressinstall" value="../scripts/expressInstall.swf" />
   <!-- The browser displays the following alternative content for users with Flash Player 6.0 and older. -->
   <div>
     <h4>Content on this page requires a newer version of Adobe Flash Player.</h4>
     <p><a href="http://www.adobe.com/go/getflashplayer"><img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player" width="112" height="33" /></a></p>
   </div>
   <!--[if !IE]>-->
 </object>
 <!--<![endif]--> 
```

我浏览了互联网，使用 html 文件的路径而不是 swf 等谈论相对路径、绝对路径和闪存，所有这些我都不明白。

提前感谢您的任何帮助。问候

桑杰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T14:16:08.437

我找到了答案——问题在于我用来创建 swf 文件的软件。我已经对其进行了排序，现在它工作正常。

道歉。

桑杰

# sql - 带参数和通配符的 SQL LIKE 运算符

> ID：14105280
> 
> 赞同：7
> 
> 时间：2012-12-31T19:07:07.640
> 
> 标签：sql, ms-access, parameters, wildcard, sql-like

我有一个查询，我想返回名称中有特定字符串的所有客户端，两边都有通配符。所以输入可能是“Smith”，我想返回所有的东西，比如“The John Smith Company”或“Smith and Bros”。我希望 [Client] 得到提示，所以我这样设置 SQL：

```
PARAMETERS Client Text ( 255 );
SELECT *
WHERE (((tbl_IncomingChecks.Client) Like'%' + [Client] + '%') 
ORDER BY tbl_IncomingChecks.Client; 
```

查询未返回任何结果。请帮忙

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T19:37:44.007

MS Access 使用 * 作为通配符而不是 %，因此您的查询将尝试匹配文字 '%' 字符。除非您使用 ADO，否则请改用 *。

[http://office.microsoft.com/en-us/access-help/like-operator-HP001032253.aspx](http://office.microsoft.com/en-us/access-help/like-operator-HP001032253.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T19:19:47.707

我觉得您的问题出在“+”运算符上，不应该读吗

```
WHERE ((tbl_IncomingChecks.Client) Like Concat('%',[Client],'%')) 
```

这让我进入了 DB2

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T19:14:49.693

`REGEXP`在 MYSQL 中使用函数怎么样？

```
SELECT *
WHERE tbl_IncomingChecks.Client REGEXP concat('%', @Client, '%') 
ORDER BY tbl_IncomingChecks.Client; 
```

或者只是简单地使用 @client 作为`REGEXP`查找包含此客户端名称的所有客户端：

```
SELECT *
WHERE tbl_IncomingChecks.Client REGEXP @Client
ORDER BY tbl_IncomingChecks.Client; 
```

*   [SQLFIDDLE 演示](http://sqlfiddle.com/#!2/69b18/4)。

* * *

## 根据 OP 在 RDBMS 上作为 MS ACCESS 的更新

如果您有更复杂的模式，您可以`Regexp`在 MS Access UDF 中使用对象。但是在当前情况下，您最好使用`LIKE Concat('*',@client,'*')`

```
'-- you may even send the pattern as a parameter 
'-- you may also send all the clients into the UDF itself for matching
'-- returning a set of matched names string

Function regexpFunc(ByRef strInput As String, ByRef clientName as String) As Boolean
   Dim myRegex As New RegExp
   Dim matchSet As MatchCollection  

   With myRegex  
     .MultiLine = False  
     .Global = True  
     .IgnoreCase = False  
   End With  

   myRegex.Pattern = clientName

   If myRegex.Test(strInput) Then  
     'matching values can be collected here
     '-- Set matchSet = myRegex.Execute(strInput)
     RegexFunc = True
   Else
     RegexFunc = False           
   End If  
End Function 
```

**以下是在查询中使用上述函数的方法：**

```
SELECT *
FROM MYTABLE
WHERE RegexpFunc(tbl_IncomingChecks.Client, "Smith") 
ORDER BY tbl_IncomingChecks.Client; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T19:22:16.677

您没有在声明中使用 from

```
PARAMETERS Client Text ( 255 );
SELECT * from table 
```

# actionscript-3 - Flash：播放其他音效时如何降低背景音乐？

> ID：14105282
> 
> 赞同：0
> 
> 时间：2012-12-31T19:07:14.800
> 
> 标签：actionscript-3, flash

*我正在使用库中的声音文件，而不是 URL。*

我正在制作一个音板，并有一个播放背景音乐的按钮。我有一个按钮而不是在加载时自动播放的原因是有几种不同的背景音乐可供选择，每个都有自己的按钮。

我还有其他几个播放声音的按钮。我希望在播放其他声音时背景音乐音量降低到 0.3 左右。我相信我需要创建一个像 soundCount 这样的变量，当声音播放时它会增加，当声音播放完毕时会减少（这样如果同时播放多个声音，背景音乐在计数之前不会恢复正常）为 0)。

设置它的最佳方法是什么？我创建了 soundCount 变量，但在音效播放完毕时创建事件侦听器时遇到问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T19:24:57.977

要在 AS3 中更改声音的音量，您需要使用`SoundChannel`和`SoundTransform`类：

```
var backgroundMusic:Sound = // Assuming you've loaded a sound

var myChannel:SoundChannel = new SoundChannel();
myChannel = backgroundMusic.play();

var myTransform = new SoundTransform();
myChannel.soundTransform = myTransform; 
```

通过在调用期间增加计数并在事件期间`play`减少计数来跟踪背景中的总声音。`SOUND_COMPLETE`将事件侦听器添加到其他声音的通道，以便他们可以修改`background`的音量：

```
var totalCurrentSounds:int = 0;

otherSoundChannel.addEventListener(Event.SOUND_COMPLETE, otherSoundComplete);
// Make sure this is on a SoundChannel, not the Sound itself. 
```

最后，在count为0时修改`SoundTransform`'成员：`volume`

```
function otherSoundComplete(e:Event):void {
    totalCurrentSounds--;
    if (totalCurrentSounds <= 0) 
        myTransform.volume = 0.5;
} 
```

# php - 无法使用 PHP 表单登录，但没有显示错误；清除字段

> ID：14105287
> 
> 赞同：2
> 
> 时间：2012-12-31T19:07:52.753
> 
> 标签：php, mysql

我开始怀疑Oreily出版社是否严重降低了标准或什么。我什至不打算讨论我从他们那里得到的前两本 PHP 书籍，但是这第三本似乎也很混乱。

无论如何，这就是问题所在。在我正在研究的书中的项目中，书中说要创建一个用户数据库，然后基于该数据库创建一个允许用户登录的程序。下面是应该完成此操作的代码：

创建用户数据库：

```
 <?php //setupusers.php
    require_once 'login.php';
    $db_server = mysql_connect($db_hostname, $db_username, $db_password);
    if (!$db_server) die("Unable to connect to MySQL: " . mysql_error());
    mysql_select_db($db_database)
        or die("Unable to select database: " . mysql_error());

    $query = "CREATE TABLE users (
                forename VARCHAR(32) NOT NULL,
                surname  VARCHAR(32) NOT NULL,
                username VARCHAR(32) NOT NULL UNIQUE,
                password VARCHAR(32) NOT NULL
            )";

    $result = mysql_query($query);
    if (!$result) die ("Database access failed: " . mysql_error());

    $salt1 = "qm&h*";
    $salt2 = "pg!@";

    $forename = 'Bill';
    $surname  = 'Smith';
    $username = 'bsmith';
    $password = 'mysecret';
    $token    = md5("$salt1$password$salt2");
    add_user($forename, $surname, $username, $token);

    $forename = 'Pauline';
    $surname  = 'Jones';
    $username = 'pjones';
    $password = 'acrobat';
    $token    = md5("$salt1$password$salt2");
    add_user($forename, $surname, $username, $token);

    function add_user($fn, $sn, $un, $pw)
    {
        $query = "INSERT INTO users VALUES('$fn', '$sn', '$un', '$pw')";
        $result = mysql_query($query);
        if (!$result) die ("Database access failed: " . mysql_error());
    }
    ?> 
```

允许用户登录

```
<?php // authenticate.php
require_once 'login.php';
$db_server = mysql_connect($db_hostname, $db_username, $db_password);
if (!$db_server) die("Unable to connect to MySQL: " . mysql_error());
mysql_select_db($db_database)
    or die("Unable to select database: " . mysql_error());

if (isset($_SERVER['PHP_AUTH_USER']) &&
    isset($_SERVER['PHP_AUTH_PW']))
{
    $un_temp = mysql_entities_fix_string($_SERVER['PHP_AUTH_USER']);
    $pw_temp = mysql_entities_fix_string($_SERVER['PHP_AUTH_PW']);

    $query = "SELECT * FROM users WHERE username='$un_temp'";
    $result = mysql_query($query);
    if (!$result) die("Database access failed: " . mysql_error());
    elseif (mysql_num_rows($result))
    {
        $row = mysql_fetch_row($result);
        $salt1 = "qm&h*";
        $salt2 = "pg!@";
        $token = md5("$salt1$pw_temp$salt2");

        if ($token == $row[3]) echo "$row[0] $row[1] : 
            Hi $row[0], you are now logged in as '$row[2]'";
        else die("Invalid username/password combination");
    }
    else die("Invalid username/password combination");
}
else
{
    header('WWW-Authenticate: Basic realm="Restricted Section"');
    header('HTTP/1.0 401 Unauthorized');
    die ("Please enter your username and password");
}

function mysql_entities_fix_string($string)
{
    return htmlentities(mysql_fix_string($string));
}   

function mysql_fix_string($string)
{
    if (get_magic_quotes_gpc()) $string = stripslashes($string);
    return mysql_real_escape_string($string);
}
?> 
```

问题是，我永远不会收到错误消息，也永远不允许登录。我可以在程序生成的弹出窗口中输入用户名和密码，但输入正确或不正确的任何内容都不会发生任何事情。当我点击“确定”时，用户名和密码字段就被清除了。

我怀疑它与这条线有关：

```
$query = "SELECT * FROM users WHERE username='$un_temp'"; 
```

但我不知道。

仅供参考，这里是一个包含用户代码的 sql 文件。

```
-- MySQL dump 10.13  Distrib 5.1.50, for Win32 (ia32)
--
-- Host: localhost    Database: publications
-- ------------------------------------------------------
-- Server version   5.1.50-community

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

--
-- Table structure for table `users`
--

DROP TABLE IF EXISTS `users`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `users` (
  `forename` varchar(32) NOT NULL,
  `surname` varchar(32) NOT NULL,
  `username` varchar(32) NOT NULL,
  `password` varchar(32) NOT NULL,
  UNIQUE KEY `username` (`username`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `users`
--

LOCK TABLES `users` WRITE;
/*!40000 ALTER TABLE `users` DISABLE KEYS */;
INSERT INTO `users` VALUES ('Bill','Smith','bsmith','be9d31ad4315b2ad9900a8526cd3edb1'),('Pauline','Jones','pjones','b1334d37914cf7561a006f656e27600c');
/*!40000 ALTER TABLE `users` ENABLE KEYS */;
UNLOCK TABLES;
/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;

-- Dump completed on 2012-12-31 11:38:10 
```

***是的，我知道这里的一些代码可能是“旧的”。***

请听我说完。如果您想推荐一本不使用“旧”代码的 PHP 书籍或教程，请这样做。我正在努力学习这种编程语言。

但是，如果您只是不知道如何解决其中的“旧”代码，请不要浪费我的时间告诉我它是“旧”作为“答案”。任何语言中都没有任何功能会因为某行代码“旧”或“未充分使用”而强制程序无法运行。这只在代码行实际上不再被识别时才重要。我想我最终必须学得更好，但现在我正试图首先学习 php！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T01:10:32.887

有问题的书（学习 PHP、MySQL、JavaScript 和 CSS）清楚地表明，并非在所有 Web 服务器上都启用了基本身份验证。这是有充分理由的；除非您的网站使用 https，否则它不可能不安全（一个简单的数据包嗅探器可以从会话中的任何 Web 请求中恢复纯文本用户名和密码）。

如果它在您的 Web 服务器上不可用，那么事情就会默默地失败。这是进行 Web 开发的挑战性（=== 痛苦）方面之一。

Web 安全很难做到正确，因此您可能需要考虑在称职的内容管理系统 (CMS) 之上构建系统，而不是创建自己的身份验证/授权包。这是一篇由 WordPress 开发人员撰写的有用文章，它可以让您了解该主题的一些微妙之处。

[http://markjaquith.wordpress.com/2006/06/02/wordpress-203-nonces/](http://markjaquith.wordpress.com/2006/06/02/wordpress-203-nonces/)

我想这对你未来的用户来说是件好事，这个例子对你不起作用。即使代码有效，它也有一个不安全的盐算法以及基本身份验证问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T19:41:00.550

不要只是盲目地复制/粘贴示例代码并期望它能够工作，请尝试以下操作：

1.  写几行。
2.  *测试一下*。
3.  修复任何出错的地方。
4.  *测试一下*。
5.  起泡，冲洗，重复直到完成。

这既是使用其他人的示例代码的最佳方式，也是编写自己的原始代码的最佳方式。

您应该在代码中检查一些事情：

*   *在向 mySQL 发送查询之前*，您应该回显该查询以确保它已由您的程序逻辑正确形成。
*   *运行查询后*，您应该查看结果集是否返回了预期值，或者在插入的情况下，预期值是否已正确插入。

你从人们那里得到如此多的吹嘘的原因是你似乎没有自己做过这个测试，这是我们大部分时间都在用我们自己的代码做的事情。对我来说，通常是 15% 的写作，75% 的测试，10% 的诅咒/饮酒。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T01:51:04.410

@David 我感到沮丧。我在没有事先创建数据库的情况下尝试了这个示例（例如，引用本地主机上的现有数据库）并且盐算法失败了。对我来说，有关的错误

```
 $token = md5($salt1$pw$salt2); 
```

也就是说，在哪里`$pw` 被称为“意外发生”。不是真的，但我几乎认为他们这样做是为了迫使我们学习 PDO。

# fluent-nhibernate - 通过多对多映射更新记录的问题

> ID：14105290
> 
> 赞同：0
> 
> 时间：2012-12-31T19:08:24.527
> 
> 标签：fluent-nhibernate, fluent-nhibernate-mapping

我有一个问题，我的表结构中有一个多对多映射，在尝试编辑简单记录时会让人头疼。

我遇到问题的示例布局：

```
Facilities Many-to-One Locations
Facilities One-to-Many Users
Users Many-to-Many Locations
Users One-to-Many PreviousPasswords 
```

如果我对设施记录进行更改（更改名称字段），我会在保存时收到以下错误：

集合 [Users.PreviousPasswords] 未由 flush() 处理

映射看起来像：

```
public FacilitiesMap()
{
    Table("Facilities");

    Id(x => x.ID);
    Map(x => x.Name);
    HasMany(x => x.Users).KeyColumn("FacilitiesID").Cascade.AllDeleteOrphan().Inverse();
    HasMany(x => x.Locations).KeyColumn("FacilitiesID").Cascade.AllDeleteOrphan().Inverse();
}

public UsersMap()
{
    Table("Users");
    Id(x => x.ID);
    Map(x => x.FirstName);
    Map(x => x.LastName);
    References(x => x.Facilities, "FacilitiesID").ForeignKey("ID");
    HasMany(x => x.PreviousPasswords).KeyColumn("UsersID").Cascade.AllDeleteOrphan().Inverse();
    HasManyToMany<Locations>(x => x.Locations)
         .Schema("Members")
         .Table("UsersToLocations")
         .ParentKeyColumn("UsersID")
         .ChildKeyColumn("LocationsID")
         .LazyLoad()
         .Cascade.SaveUpdate().Inverse();
}

public LocationsMap()
{
    Table("Locations");

    Id(x => x.ID);
    Map(x => x.Name);
    References(x => x.Facilities, "FacilitiesID").ForeignKey("ID");
    HasMany(x => x.Patients).KeyColumn("LocationsID").Cascade.AllDeleteOrphan().Inverse();
    HasManyToMany<Users>(x => x.Users)
         .Schema("Members")
         .Table("UsersToLocations")
         .ParentKeyColumn("LocationsID")
         .ChildKeyColumn("UsersID")
         .Cascade.SaveUpdate();
}

public PreviousPasswordsMap()
{
    Table("PreviousPasswords");

    Id(x => x.ID);
    Map(x => x.Password);
    Map(x => x.DateTime);

    References(x => x.Users, "UsersID").ForeignKey("ID");
} 
```

成功更新设施记录的唯一方法是在更改和保存记录之前使用以下函数获取记录：

```
public Facilities GetFacility(int id)
{
    return FluentSessionManager.GetSession()
        .CreateCriteria<Facilities>()
        .Add(Expression.Eq("ID", id))
        .SetFetchMode("Users", FetchMode.Eager)
        .SetFetchMode("Locations", FetchMode.Eager)
        .UniqueResult<Facilities>();
} 
```

此方法的问题在于，如果有 10,000 个用户，则处理此查询需要很长时间。或者更糟糕的是，如果我们也有 100 个位置，则需要大约 2 分钟来编辑一条设施记录。

我确信映射中存在某种问题。不知道如何修复，甚至不知道从哪里开始。对此的任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T08:12:49.737

您真的需要该设施的所有用户吗？当您只添加用户时，您可以使用

```
HasMany(x => x.Users).ExtraLazyLoad(); 
```

并在确实需要所有子集合时改进查询

```
public Facilities GetFacility(int id)
{
    var session = FluentSessionManager.GetSession();

    // ignore the result, we only want to cache the results in the session
    session.CreateCriteria<Facilities>()
        .Add(Expression.Eq("ID", id))
        .SetFetchMode("Users", FetchMode.Eager)
        .Future<Facilities>();

    return session.CreateCriteria<Facilities>()
        .Add(Expression.Eq("ID", id))
        .SetFetchMode("Locations", FetchMode.Eager)
        .FutureValue<Facilities>().Value;
} 
```

# .net - 如何在 .NET CF 3.5 中同时播放多个 wav 声音

> ID：14105291
> 
> 赞同：1
> 
> 时间：2012-12-31T19:08:32.600
> 
> 标签：.net, compact-framework, simultaneous, soundplayer

我正在尝试在 .NET Compact Framework 3.5 中为 Win CE 制作 WAV 声音播放器，但遇到了问题。我需要同时播放两个声音，但 System.Media.SoundPlayer 在第二个 SoundPlayer 开始播放时会中断执行。

是否有任何解决方案、一些库、框架或 API 调用来找到解决方案？

我正在尝试做类似的事情

```
SoundPlayer player1 = new SoundPlayer("ding.wav");
SoundPlayer player2 = new SoundPlayer("chimes.wav");
player1.PlayAsync();
player2.PlayAsync(); 
```

我遇到 player2 的情况破坏了 player1 的播放。我想同时玩两个。就那么简单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T14:49:25.453

SoundPlayer 用于简单的声音，我不必同时播放声音，但我必须 P/Invoke WaveOut API 才能完全按照我的意愿做事。您没有说您使用的是哪个操作系统（CE 版本），但请查看 WaveOut Windows API。

# php - 与团队一起开发 PHP 的最佳方式？

> ID：14105293
> 
> 赞同：2
> 
> 时间：2012-12-31T19:08:42.213
> 
> 标签：php, version-control

我正在与一组 4 人一起开发 PHP 项目。我想知道开发该项目的最佳方式是什么。

我们有一个版本控制系统。

我对每个开发人员如何编写和测试代码感到困惑。每个开发人员都应该有自己的测试环境吗？最好在本地拥有该测试环境吗？ETC..

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T19:11:28.377

每个开发人员都应该在他们的机器上拥有自己的本地环境来进行开发。一旦开发人员实现了特定功能，他应该将其提交给版本控制系统。

您应该使用持续集成工具将最新代码从版本控制系统自动构建到暂存环境中。我使用 beanstalk 进行版本控制和自动化部署。

一旦您对暂存环境中的代码感到满意，您就可以手动将其构建到生产环境中。

这是一个简单但灵活的系统，适合 4 人团队

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T19:38:18.367

以下是在团队中工作时要记住的事项列表（排名不分先后）：

1.  确保每个开发人员都有相同的本地开发环境。

2.  像 git 这样的版本控制系统是必须的。每个成员都应该定期推送提交。您不希望有人一次推送 10 次提交，而只会在其他人的本地设置上引起一些合并冲突。

    此外，请确保您有效地使用版本控制。维护`master`（或任何其他）作为您的生产分支，它始终是可部署的。在其他分支中工作以获取其他功能。

3.  在开始工作之前，彻底讨论应用程序架构。您甚至可能想研究[MVC](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)，以便代码的不同部分可以很好地分离并且工作分工更容易。

4.  为您开发的每个功能编写严格的单元测试。[测试驱动开发](http://www.agiledata.org/essays/tdd.html)通常是团队开发的最有效方法。

5.  另外，就像*@Telthien*指出的那样，维护一个通用的样式指南（[Github](https://github.com/styleguide)和[Google](http://code.google.com/p/google-styleguide/)供参考）。这涉及到使用空格/制表符进行缩进、以下划线开头的函数名、标题大小写的类名等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T19:13:59.173

两条忠告：

首先，每个人都应该了解组编码标准。通常，人们在大小写、下划线使用和变量命名方面存在差异；当与多人一起处理一个项目时，这通常会变得令人困惑。确保它是标准化的。

每个开发人员都应该在他们的本地环境中进行测试。如果测试有效，他们会提交详细说明更改的更改日志。如果你在一个两个以上的团队中工作，请确保每个人都提供详细的变更日志。否则，就无法弄清楚哪个版本改变了什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T19:11:57.917

答案完全取决于您的需求。

我通常在小团队中做的是为每个开发人员提供一个本地测试环境。更好的是，如果您有一个好的测试服务器的 VM 映像，可以定期更新并分发给每个开发人员进行测试，这样您的测试就可以与您的生产环境紧密匹配。

# python - 根据传递给函数的参数动态创建文件名

> ID：14105295
> 
> 赞同：-1
> 
> 时间：2012-12-31T19:09:07.500
> 
> 标签：python

> **可能重复：**
> [python获取函数中参数的变量名](https://stackoverflow.com/questions/11583526/python-obtain-variable-name-of-argument-in-a-function)

我有以下创建文件list.txt的代码，目前我将文件名硬编码为'list.txt'，有没有一种方法可以根据传递给函数Eg..list的参数名称动态创建文件名在本例中作为参数传递，所以文件名应该是 list.txt，如果参数是 list2.txt，文件名应该是 list2.txt .....

```
def filecreation(list):
    #print "list"
    with open('list.txt', 'w') as d:
        d.writelines(list)

def main():
    list=['206061\n', '202086\n', '206062\n']
    filecreation(list)

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-31T19:11:23.353

你能做类似的事情：

```
def filecreation(alist, filename):
    #print "alist"
    with open(filename, 'w') as d:
        d.writelines(alist) 
```

有了这个，你可以调用类似 filecreation(list, "testfile.txt") 的东西，它会将你的列表输出到 testfile.txt 中。如果我有误解，请告诉我，我会尽力解决它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-31T19:18:58.947

该函数无法知道作为参数传递的变量被调用了什么。这不是 Python 的工作方式。甚至可能不涉及**任何变量：**

```
filecreation(['206061\n', '202086\n', '206062\n']) # What is the argument "name"? 
```

最接近您想要的是 Ignacio Vazquez-Abrams 在评论中发布的[链接问题](https://stackoverflow.com/questions/11583526/python-obtain-variable-name-of-argument-in-a-function)，所以我建议您看一下。

# sms - 短信服务器/网关

> ID：14105296
> 
> 赞同：-2
> 
> 时间：2012-12-31T19:09:18.440
> 
> 标签：sms

我很想知道如何通过网络发送免费的批量短信。是否有任何免费服务，或者我可以在连接到互联网的机器上构建一个？
作为接收者，本地电话公司是否会对我发送信息征税？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T19:44:59.230

是的，可以免费发送 SMS 消息，事实证明，最近在几个国家/地区，移动网络运营商已经更新了他们的定价政策，以在某些数据计划中提供无限制的 SMS 消息。在某些情况下，不提供无限的消息，但他们不会对每月发送的前两三千条 SMS 消息收取任何费用。这些数据计划适用于标准手机订阅，但如果您在计算机上设置了[Ozeki NG SMS 网关](http://www.ozekisms.com/)系统，也可以使用它们。

您可以利用这个机会构建有趣的解决方案，例如，您可以从数据库或 Microsoft Excel、Outlook 等发送 SMS。查看以下文档：

1.  [从数据库发送 SMS](http://www.ozekisms.com/index.php?owpn=164)
2.  [Excel 短信](http://www.ozekisms.com/index.php?owpn=466)
3.  [展望短信](http://www.ozekisms.com/index.php?owpn=383)

# javascript - Javascript全局变量不起作用

> ID：14105297
> 
> 赞同：1
> 
> 时间：2012-12-31T19:09:26.903
> 
> 标签：javascript, global-variables, undefined

我在这里看到了这个问题的几个版本，但它们似乎都与我的问题不同，所以我想我会创建一个新问题。我必须在这里做一些非常愚蠢的事情，但对于我的生活，我无法发现它。

我将从上下文开始，尽管它不是特别相关：我正在延迟加载 jQuery 与 js 代码，这意味着我的代码文件都不能包含`$(document).ready(...)`调用，因为“$”在第一次传递时将是未定义的。相反，我将准备好的函数添加到“全局”数组中，并且在 jQuery 异步加载之后，我使用以下命令调用所有这些函数：

```
function FireLoadEvents() {
  while ( OnLoadEvents.length > 0 ) {
    var item = OnLoadEvents.splice(0,1);
    item[0].ready();
  }
} 
```

现在在我的任何页面组件中，我可以使用以下内容添加一个我希望在加载 jQuery 并且文档实际准备好时触发的事件：

```
OnLoadEvents.push( { ready: function() { ... } } ); 
```

我`OnLoadEvents`在头部模板的最顶部定义了变量：

```
<script language="text/javascript">
var OnLoadEvents = new Array();
</script> 
```

如您所见，它在任何函数范围之外，并且在引用之前也已声明。单独测试时，此设置运行良好，但由于某种原因，当它添加到我的实际页眉时，页面后面的脚本标签无法将项目添加到`OnLoadEvents`变量中。例如，以下内容由 php-include 服务器端拉入我的模板，并将这些行添加到我的页面正文中：

```
<script type='text/javascript'>
OnLoadEvents.push( { ready: function() {
  if ( $('.sponsor-link').length != 0 ) {
    ... 
  }
} } );
</script> 
```

当我在 Chrome 中点击此页面时，它会在上面的“推送”行中报告以下异常：

```
Uncaught ReferenceError: OnLoadEvents is not defined 
```

知道发生了什么吗？为什么 OnLoadEvents 会在我初始化它的几行之后未定义？我会注意到我也尝试过定义和引用`OnLoadEvents`为`window.OnLoadEvents`.

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-31T19:14:10.227

改变这个：

```
<script language="text/javascript"> 
```

对此：

```
<script> 
```

Web 浏览器无法识别`language`属性的值，因此不会执行代码。

**现场演示：http:** [//jsfiddle.net/gyhcM/2/](http://jsfiddle.net/gyhcM/2/)

您不需要该`language`属性，也不需要该`type`属性，因为 Web 浏览器默认采用 JavaScript。

# php - 如何确定 cURL 传输失败的原因？

> ID：14105302
> 
> 赞同：1
> 
> 时间：2012-12-31T19:10:06.350
> 
> 标签：php, curl

我一直在使用 cURL 来获取外部页面的输出，几个月来它运行良好，但突然停止工作。我的代码是这样的：

```
$ch = curl_init($URL);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$output = curl_exec($ch);
curl_close($ch); 
```

该 URL 有效，我检查它是否仍然有效，并且通过调试我发现`$output`变量的值为`false`，根据 PHP 手册，它是`curl_exec()`失败时返回的值。

因此，在工作了很长时间之后，并且没有对我的代码进行任何更改（据我所知），cURL 传输突然无法正常工作。

如何调试它为什么不起作用？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-31T19:11:17.540

我将从[curl_error()开始](http://php.net/curl_error)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T19:11:56.740

您可以使用[curl_error()](http://ca1.php.net/manual/en/function.curl-error.php)函数查看 curl 返回的错误。

# haskell - 在haskell中使用Data.Map的奇怪错误

> ID：14105309
> 
> 赞同：1
> 
> 时间：2012-12-31T19:11:34.430
> 
> 标签：haskell, map, ghc

我正在尝试编写一个非常简单的编辑器，例如“ed”。在这个程序中，我尝试使用映射来构建控件，该控件将字符串命令转换为要执行的操作。这是一段代码：

```
commands :: Map String ([Handle] -> IO ())
commands = fromAscList [
   ("o",\list -> print "Insert name of the file to be opened" >> getLine >>= \nomefile -> 
       openFile nomefile ReadWriteMode >>= \handle -> editor (handle:list)),
   ("i",\list -> case list of { [] -> print "No buffer open" ; handle:res -> write handle } >> editor list),
   ("q",\list -> if list == [] then return () else mapM_ hClose list >> return ())
]

editor :: [Handle] -> IO()
editor list = do
  command <- getLine
  let action = lookup command commands
  case action of
     Nothing  -> print  "Unknown command" >> editor list 
     Just act -> act list 
```

问题是当我在 ghci 或可执行文件中执行编辑器函数时，当我键入“o”时，我收到消息“未知命令”，而不是调用函数来打开文件。我使用关联列表而不是 Map 尝试了相同的代码，在这种情况下它可以工作。那么这里可能是什么问题呢？

更奇怪的是，如果我在 ghci 中调用映射命令上的键，它也会返回一个包含字符串“o”的列表。

我提前感谢任何帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T21:26:28.117

```
commands :: Map String ([Handle] -> IO ())
commands = fromAscList [
   ("o",_),
   ("i",_),
   ("q",_)
] 
```

但

```
ghci> Data.List.sort ["o","i","q"]
["i","o","q"] 
```

你在撒谎`Data.Map`，所以它构造了一个`Map`不满足所需不变量的 a。因此，在 中查找内容`Map`不起作用，因为请求被发送到错误的分支（有时）。

# android - Android IntentService 调用不会自行停止的 toast

> ID：14105310
> 
> 赞同：0
> 
> 时间：2012-12-31T19:11:54.293
> 
> 标签：android

我弄乱了android网站上有关服务的示例。该服务旨在祝酒。我使用按钮的 onClick 方法启动服务。它有效，但吐司永无止境！我认为 IntentService 在过程完成后会特别停止。

```
import android.app.IntentService;
import android.content.Intent;
import android.widget.Toast;

public class Enslaved extends IntentService {
     public Enslaved() {
        super("Enslaved");
     }

     @Override
     protected void onHandleIntent(Intent intent) {
         Toast.makeText(this, "Starting service", Toast.LENGTH_SHORT).show();
     }

 } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T19:32:19.313

我也做过一次，感觉很傻。。。

您可以保存对 Toast 的引用并在 中取消它`onDestroy()`。或者只是在如此短暂的服务中不与 UI 交互。

```
Toast toast;

@Override
protected void onHandleIntent(Intent intent) {
    toast = Toast.makeText(this, "Starting service", Toast.LENGTH_SHORT);
    toast.show();
}

@Override
public void onDestroy() {
    toast.cancel();
} 
```

# android - 数据库复制时显示进度条

> ID：14105315
> 
> 赞同：-1
> 
> 时间：2012-12-31T19:13:14.243
> 
> 标签：android, database, sqlite

在我的应用程序的第一次运行中，我必须将数据库文件复制到数据文件夹。大约需要 10 秒，在这段时间内，用户会看到黑屏。我想使用 AsynTask 技术来显示进度条。但它不起作用，我看到黑屏消失后的进度条......

使用此代码，我调用复制数据库类，也调用 AsynTsk 进程...

```
 new asyn().execute();
    try {
        myDbHelper.createDataBase();

    } catch (IOException ioe) {
        // throw new Error("Unable to create database");
    } 
```

这是我的 AsynTask 代码：

```
 public class asyn extends AsyncTask<String, Integer, String> {
      ProgressDialog dialog;  
      @Override
      protected void onPreExecute()
      {  
        //loading toast
            //final DataBaseHelper myDbHelper = new DataBaseHelper(this);
            String firstload2 = myDbHelper.getfirstload();
            if(firstload2.matches("1")) {
                 dialog=new ProgressDialog(DictionaryActivity.this);
                   dialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
                   dialog.setMax(100);
                   dialog.show();
                myDbHelper.changefirstload();
            }

      }  
      @Override
      protected String doInBackground(String... params) {
       // TODO Auto-generated method stub 
       // perform desired task in this doInBackground Block.
       for(int i=0;i<20;i++)
       {
        publishProgress(5);
        try {
         Thread.sleep(100);
        } catch (InterruptedException e) {
         // TODO Auto-generated catch block
         e.printStackTrace();
        }
       }

       return "";
      }
      @Override
      protected void onProgressUpdate(Integer... values) {
       // TODO Auto-generated method stub
       super.onProgressUpdate(values);
       dialog.incrementProgressBy(5);   
       }

      @Override
       protected void onPostExecute(String result)
      {
        dialog.dismiss();    
       AlertDialog.Builder a=new Builder(DictionaryActivity.this);
       a.setMessage("Successfully Done");
       a.setTitle("Try");
       a.setPositiveButton("OK",null);
       a.show();
          }  
     } 
```

我的错在哪里？我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T19:26:02.613

`myDbHelper.changefirstload();`应该在`doInBackground()`方法之内。`onPreExecute()`在 UI 线程上执行。

就进度条而言，这有点困难。就个人而言，我会做一个不确定的进度条（只是一个旋转图标或加载时的东西）。但是，如果您想要一个 % 栏，则需要将方法分解为多个方法，然后在它们之间更新您的进度。

# tsql - 如何在 SQL Server 2008R2 中将 SSN 替换为 9 位随机数？

> ID：14105318
> 
> 赞同：2
> 
> 时间：2012-12-31T19:13:34.953
> 
> 标签：tsql, sql-server-2008

为了满足安全要求，在将所述数据库提供给开发人员之前，我需要找到一种方法将[SSN替换为唯一的随机 9 位数字。](https://en.wikipedia.org/wiki/Social_Security_number)SSN 位于数据库表的列中。所述表中可能有数十万行。该数字不需要连字符。我是 SQL 和一般编程的初学者。

我一直无法找到满足我特定需求的解决方案。似乎没有什么是对的。但是，如果您知道我错过了一个线程，请告诉我。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-31T19:39:15.973

这是一种方法。

我假设您已经备份了真实数据，因为此更新不可逆。

下面我假设您的表名是**Person**，您的 ssn 列名为**SSN**。

```
UPDATE Person SET 
SSN = CAST(LEFT(CAST(ABS(CAST(CAST(NEWID() as BINARY(10)) as int)) as varchar(max)) + '00000000',9) as int) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T19:42:10.623

如果它们不必是随机的，您可以将它们替换为升序数值。否则，您将不得不生成一个随机数。您可能已经发现，RAND 函数只会为每个查询语句（选择、更新等）生成一个值；解决方法是 newid() 函数，该函数将为查询生成的每一行生成一个 GUID（运行`SELECT newid() from MyTable`以查看其工作原理）。将其包装在 checksum() 中以生成整数；模数乘以 1,000,00,000 以获得 SSN 范围内的值（0 到 999,999,999）；并且，假设您将其存储为 char(9) 前缀，并带有前导零。

下一个技巧是确保它对于表中的所有值都是唯一的。这变得很棘手，我会通过设置一个带有值的临时表，填充它，然后将它们复制过来来做到这一点。现在承租人……</p>

```
DECLARE @DummySSN as table
 (
   PrimaryKey  int      not null
  ,NewSSN      char(9)  not null
 )

--  Load initial values
INSERT @DummySSN 
 select
   UserId
  ,right('000000000' + cast(abs(checksum(newid()))%1000000000 as varchar(9)), 9)
 from Users

--  Check for dups
select NewSSN from @DummySSN group by NewSSN having count(*) > 1

--  Loop until values are unique
IF exists (SELECT 1 from @DummySSN group by NewSSN having count(*) > 1)
    UPDATE @DummySSN
     set NewSSN = right('000000000' + cast(abs(checksum(newid()))%1000000000 as varchar(9)), 9)
     where NewSSN in (select NewSSN from @DummySSN group by NewSSN having count(*) > 1)

--  Check for dups
select NewSSN from @DummySSN group by NewSSN having count(*) > 1 
```

这适用于我的一张小桌子，它应该适用于一张大桌子。我没有看到这会变成无限循环，但即便如此，您可能想要添加一个检查以在 10 次迭代后退出循环，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T20:03:04.520

我已经进行了几百万次测试，它似乎生成了随机 (URN) 9 位数字（没有前导零）。我想不出更有效的方法来做到这一点。

```
SELECT CAST(FLOOR(RAND(CHECKSUM(NEWID())) * 900000000 ) + 100000000 AS BIGINT) 
```

使用的测试；

```
;WITH Fn(N) AS
(
    SELECT CAST(FLOOR(RAND(CHECKSUM(NEWID())) * 900000000 ) + 100000000 AS BIGINT)
    UNION ALL
    SELECT CAST(FLOOR(RAND(CHECKSUM(NEWID())) * 900000000 ) + 100000000 AS BIGINT)
    FROM Fn
)
,Tester AS
(
    SELECT TOP 5000000 *
    FROM Fn
)
SELECT   LEN(MIN(N))
        ,LEN(MAX(N)) 
        ,MIN(N)
        ,MAX(N)
FROM Tester
OPTION (MAXRECURSION 0) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-16T13:28:04.407

不是那么快，但最简单...我添加了一些点...

```
DECLARE @tr NVARCHAR(40)
SET @tr = CAST(ROUND((888*RAND()+111),0) AS CHAR(3)) + '.' + 
    CAST(ROUND((8888*RAND()+1111),0) AS CHAR(4)) + '.' + CAST(ROUND((8888*RAND()+1111),0) AS
    CHAR(4)) + '.' + CAST(ROUND((88*RAND()+11),0) AS CHAR(2))
PRINT @tr 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-31T14:38:25.900

如果要求对数据库进行模糊处理，那么这将为任何表中的每个不同 SSN 返回相同的唯一值，从而在输出中保留参照完整性，而无需进行查找和翻译。

```
 SELECT CAST(RAND(SSN)*999999999 AS INT) 
```

# audio - 用于在 Windows 8 中操作音频输出的 API

> ID：14105323
> 
> 赞同：0
> 
> 时间：2012-12-31T19:14:37.683
> 
> 标签：audio, windows-8

我想在将音频输出数据发送到扬声器之前，为所有不同的正在运行的应用程序处理音频输出数据。调高或调低音量，过滤音频，诸如此类。

如何实时访问音频输出？

有没有办法不依赖音频驱动接口？

谢谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T08:30:40.130

Windows 应用商店应用程序允许您使用[WASAPI](http://msdn.microsoft.com/en-gb/library/windows/desktop/dd371455%28v=vs.85%29.aspx)。在 WASAPI 中，有一个“音频会话”的概念，其中每个发送到声卡的音频流都有一个。您可以[枚举](http://msdn.microsoft.com/en-gb/library/windows/desktop/dd368281%28v=vs.85%29.aspx)允许您访问[IAudioSessionControl](http://msdn.microsoft.com/en-gb/library/windows/desktop/dd368246%28v=vs.85%29.aspx)的音频会话。但是，这不会让您操纵音频，据我所知，WASAPI 根本不允许。最好的希望是为每个会话获取[ISimpleAudioVolume](http://msdn.microsoft.com/en-us/library/windows/desktop/dd316531%28v=vs.85%29.aspx)，但上次我尝试这样做时，我发现您无法获取为其他进程调整音量所需的会话 GUID。您可能能够获取[音频端点](http://msdn.microsoft.com/en-us/library/windows/desktop/dd370793%28v=vs.85%29.aspx)并调整声卡的主音量。

简而言之，WASAPI 是适用于 Windows 应用商店应用程序的最强大的音频 API，但不幸的是，我认为它不会让您完成您在这里所要求的工作。

# google-cloud-storage - Google Cloud Storage 是否在搜索中编入索引？

> ID：14105327
> 
> 赞同：5
> 
> 时间：2012-12-31T19:15:34.050
> 
> 标签：google-cloud-storage

如果文件被放入 Google Cloud 存储并公开，但该文件的 URL 不存在于另一个网页上，Google 是否会在其搜索结果中将其编入索引？有人知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T16:46:18.497

谷歌的搜索索引独立于其云存储。在云存储中公开文件不会自动在 Google 的搜索结果中将其编入索引。

但是，问这个问题让我相信您可能想知道是否可以公开文件并合理地确定任何人都无法访问该文件。如果文件对您或您的用户具有任何敏感性质，那么这不是正确的解决方案。

如果您在网站上使用 GCS 并希望安全地提供文件，您可能需要尝试[签名 URL](https://developers.google.com/storage/docs/accesscontrol#Signed-URLs)选项。如果只是要被索引，您可以将[robots.txt](http://en.wikipedia.org/wiki/Robots_exclusion_standard)文件添加到存储桶的根目录，以排除该文件被索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T20:05:25.947

如果您在 Google 的云存储中有一个公共文件，则必须对该文件的 URL 进行索引，否则服务器将无法找到它。

谷歌云端硬盘也会发生同样的事情。公共 URL 仍然被编入索引，并且在服务器的查找表中仍然可用，即使网络上的任何地方都不存在硬链接。

# android - 字符串输入分发到数组（Android）？

> ID：14105329
> 
> 赞同：1
> 
> 时间：2012-12-31T19:15:35.780
> 
> 标签：android, arrays, algorithm, stemming, porter-stemmer

我一直在寻找关于我的问题的答案，但我找不到一个，或者我可能不只是在搜索时使用了正确的术语。

我的问题是，如何将在 editText 中输入的字符串分配给数组？

这是关于我的 porter2 词干项目。我需要将在`EditText`字段中输入的字符串分配给一个数组，这样我就可以扫描`x`in是否`array[x]`是元音。

前任。字段中的字符串`EditText`= `"dog"`。

数组应该是：

```
array[0] = d
array[1] = o
array[2] = g 
```

很抱歉我不能给出代码，因为我真的不知道如何编写这个代码。谢谢大家！谢谢。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T19:17:42.237

您可以将 use[`.split()`](http://developer.android.com/reference/java/lang/String.html#split%28java.lang.String%29)与空 ( `""`) 字符串输入一起使用：

```
String text = yourEditText.getText().toString();
String[] letters = text.split(""); // Split by empty string to be in an array
// letters == { "", "d", "o", "g" }
//              ^ Note that this has an empty string element at the front; that's just a byproduct of how split() works. 
```

如果你想要一个`char`数组，它更容易使用[`.toCharArray()`](http://developer.android.com/reference/java/lang/String.html#toCharArray%28%29)：

```
String text = yourEditText.getText().toString();
char[] letters = text.toCharArray();
// letters == { 'd', 'o', 'g' }; 
```

我个人会使用第二个；`letter == 'a'`是一个比 快得多的操作`letter.equals("a")`。

# c++ - 我需要访问一个随机的 .txt 文件或 .txt 文件的随机行并将其输出到屏幕上

> ID：14105330
> 
> 赞同：1
> 
> 时间：2012-12-31T19:15:46.377
> 
> 标签：c++, random, char

我要做的是创建一个（看似）随机事实生成器，方法是选择一个包含事实的随机 .txt 文件并将其输出到屏幕上。这是代码：

```
#include <fstream>
#include <iomanip>
#include <iostream>
#include <cmath>
#include <ctime>
#include <string>
#include <vector>

#include "getQuestion.h"

using namespace std;

int main() {
    int mainMenuChoice;
    ifstream Bibliography;
    //string easyBib;
    char randomQuestion;
    string easyBib;
    string Questions /*[15]*/;
    string Answers /*[15]*/;
    ifstream inputFile;
    //char newline = '\n';
    //char chars;
    //int linenum = 1;
    string line;
    char randomQ;

    //cout << "%s by Noah" << endl;
    cout << "Quiz Menu\n\n";
    cout << "1\. Play Game!\n";
    cout << "2\. Bibliography\n";
    cout << "3\. Developer Info\n";
    //cout << "4\. Admin Menu\n";
    cout << "4\. Exit\n";
    cout << "Menu Choice: ";
    cin >> mainMenuChoice;

    switch (mainMenuChoice) {
    case 1: {
        srand ( time(NULL) );

        randomQuestion = rand() % 10 + 1;

        randomQ = '0' + randomQuestion;

        randomQ = randomQ + '.txt';

        inputFile.open(randomQ);

        getline(inputFile, line);

        vector<string> lines;
        for( string line; getline(inputFile,line); )
        {
            lines.push_back(line);
        }

        size_t iRandLine = rand() % lines.size();
        string randomLine = lines[iRandLine];
        cout << "Line " << (iRandLine+1) << ": " << randomLine << endl;

        break;
            }
    case 2: {
        inputFile.open("Bib.txt");
        //istream& getline (char* s, streamsize n, char \n )
        inputFile >> easyBib;
        cout << easyBib << endl;;

        return(0);
            }
    case 3: {
        cout << "Program made by: XXXX XXXXXXXX" << endl;
        cout << "Mrs. XXXXXXX's Period 4 Social Studies Class" << endl;
        break;
            }
    case 4: {
        cout << "Thank you for playing!" << endl;
        return(0);
            }
    default: {
        cout << "Sorry, Invalid Choice!\n";
        return(2);
             }

    }
    return(0);
} 
```

我也收到此编译器错误：

```
52: error: invalid conversion from 'char' to 'const char*'
52: error:   initializing argument 1 of 'void std::basic_ifstream<_CharT, _Traits>::open(const char*, std::_Ios_Openmode) [with _CharT = char, _Traits = std::char_traits<char>]' 
```

谢谢大家！谢谢。

如果适用，我使用的是 XCode 3.2.6，和 Mac OS X 10.6.8 请不要要求我升级或下载任何东西，这是一台学校笔记本电脑，我没有 sudo 权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T21:16:23.860

如果您知道任何脚本语言，例如 Python 或 Perl，那么您可能应该使用它们而不是 C++ 来做您想做的事情；它们为您想要做的事情提供了更直观的工具，并且语法更简洁。

如果您要坚持使用 C++，这就是您可能会考虑的；

*   将每个文本文件放在一个文件夹中（我们称之为`questions`），并将其文件名设置为整数（无扩展名）。
*   随机生成一个整数，可能具有最大值（取决于您如何对这些问题进行编号）。
*   如果存在`questions`以该整数命名的文件（即，如果您绘制 41，则如果`./questions/41`存在），请使用它。如果没有，请重新绘制。

顺便说一句，你不会碰巧在长岛上高中吧？如果是这样，我想我们可能去了同一所学校（虽然我毕业了）。

# 3d - 如何计算环境和漫反射闪电？

> ID：14105334
> 
> 赞同：0
> 
> 时间：2012-12-31T19:16:32.750
> 
> 标签：3d

我正在开发我的 3D 软件渲染应用程序并且完全卡在闪电上。我正在尝试做平面阴影。我知道：

```
a = polygonAmbient * lightSourceAmbient; //a=color of ambient
d = polygonDiffuse * lightSourceDiffuse * dot (polygonNormal , lightPosition ) ;
//d color of diffuse
    polygon->color= a+d; 
```

我需要使用什么`polygonAmbient`？`polygondiffuse`两者的RGB值是否相同？那么`lightSourceAmbient`和`lightSourceDiffuse.`呢？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T19:23:36.187

多边形环境和多边形漫反射不必是相同的值。例如，您可以有一个灰色物体，它在被照亮时会发出绿色光。这种东西的例子是现代汽车油漆（它有一个纯色基础，油漆斑点悬浮在透明大衣中。

光源环境和光源漫反射也可以是不同的颜色。例如，在日落时，您会从大气中获得环境蓝色照明 + 来自太阳的非常强烈的红色/橙色照明。

# vbscript - 静默 VB 脚本？

> ID：14105342
> 
> 赞同：0
> 
> 时间：2012-12-31T19:17:45.087
> 
> 标签：vbscript, background, automation, browser, background-process

我正在尝试编写一个在后台运行的脚本。这只是最终项目的早期阶段。但是我很难在不打开网络浏览器的情况下运行它。我怎样才能让它在后台运行，而不被用户注意到？

```
Option Explicit
Dim wsh
Set wsh=WScript.CreateObject("WScript.Shell")
wsh.Run "http://google.com" 
```

# asp.net - IIS 应用程序池、工作进程、应用程序域

> ID：14105345
> 
> 赞同：90
> 
> 时间：2012-12-31T19:18:17.323
> 
> 标签：asp.net, iis

谁能解释 IIS 中应用程序池、工作进程和应用程序域之间的区别？另外，它们是如何协同工作的？我已经阅读了几篇文章，但仍然有些混乱。

1.  在 IIS 中创建的每个网站都会成为应用程序吗？
2.  每个应用程序是否与一个工作进程相关联？
3.  应用程序域在哪里出现？

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2012-12-31T20:18:48.453

我试着用其他词来表达它们。

在服务器中，您可以拥有许多一起运行的 asp.net 站点。每个站点都是一个**应用程序域**。

您必须为他们每个人分配一个**应用程序池**。许多应用程序域（站点）可以具有相同的应用程序池，并且因为它们具有相同的应用程序池，所以它们在相同的进程和相同的帐户下运行 - 并且它们具有相同的池设置。如果此池重新启动，则该池下的所有站点都会重新启动。

现在每个池可以有一个或多个**工作进程**。每个工作进程都是运行您的站点的不同程序，有它们单独的静态变量，它们不同的启动停止调用等。不同的工作进程不会一起通信，交换数据的唯一方法是来自公共文件或公共数据库。如果您有多个工作进程并且其中一个进行长时间计算，那么另一个可以处理互联网呼叫并显示内容。

当您将许多工作进程分配给单个池时，您将创建所谓的**网络花园**，并且如果一台计算机是一台处理机器，您的站点就像从多台计算机上运行。

[![应用程序域，带有池和进程](../Images/3f6ec4b835c2efd95b7414146e6f0a43.png)](https://i.stack.imgur.com/y0gTZ.gif)

每个工作进程可以有许多线程。

更多工作进程对您的影响：
当您有**一个工作进程**时，一切都会变得更简单，在您的应用程序中，所有静态变量都是相同的，您可以使用[`lock`](http://msdn.microsoft.com/en-us/library/c5kehkcz.aspx)来同步它们。
当您分配**多个工作进程**时，您仍然继续使用`lock`静态变量，静态变量在您的站点的许多运行中没有什么不同，如果您有一些公共资源（例如在磁盘上创建缩略图）那么您需要将您的工作进程与[`Mutex`](http://msdn.microsoft.com/en-us/library/system.threading.mutex.aspx).

再来一注。听起来，当您创建**更多工作进程**时，您可能会有更流畅的异步页面加载。asp.net 的会话处理程序存在一个小问题，即锁定页面加载的整个过程——这取决于你是否知道并处理它——或者改变它。

因此，让我们只讨论一个具有许多工作进程的站点。在这里，您面临需要将公共资源更改与`Mutex`. 但是使用会话的页面/处理程序不是异步的，因为会话锁定了它们。这是一个很好的开始，因为您避免自己进行许多点的同步。

关于这个主题的一些问题：
[Web 应用程序在处理共享同一会话的另一个 Web 应用程序时被阻止](https://stackoverflow.com/questions/9426673/web-app-blocked-while-processing-another-web-app-on-sharing-same-session)
[对 Web 服务的 jQuery Ajax 调用似乎是同步的](https://stackoverflow.com/questions/9052401/jquery-ajax-calls-to-web-service-seem-to-be-synchronous)
[ASP.NET 服务器不会异步处理页面](https://stackoverflow.com/questions/12284530/asp-net-server-does-not-process-pages-asynchronously)
[完全替换 ASP.Net 的会话](https://stackoverflow.com/questions/8989648/replacing-asp-nets-session-entirely)

现在这个会话锁不会影响不同的站点。

在不同的站点中，更多的工作进程可以帮助一个站点不阻塞另一个运行时间较长的进程。
同样在不同的站点之间，更多的池也可以提供帮助，因为每个池至少有一个工作进程，但是请记住并使用进程资源管理器自己查看，每个工作进程占用您计算机的更多内存，以及一台具有 16G 内存的大型服务器并且一台 SQL 服务器不能有太多不同的工作进程——例如在有 100 个共享站点的服务器上，你不能有 100 个不同的池。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-04-18T20:14:01.613

*   一台 IIS 服务器可能有多个应用程序池。
*   一个 Web 应用程序绑定到一个应用程序池。
*   一个应用程序池可能有多个工作进程（启用 Web Garden 时）。
*   一个工作进程可以有多个应用程序域。一个应用程序域只存在于一个工作进程中。
*   一个应用程序域可能有多个线程。一个线程可以在不同的时间被不同的应用程序域共享。

对 ASP.NET 开发人员的意义：为了使您的网站具有可扩展性，不要使用进程内会话，也不要使用静态类变量锁进行同步。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-31T19:22:51.083

1.  是的，虽然不是每个应用程序都是一个网站。*您可以拥有一个嵌套在*网站下的应用程序。

2.  是的，每个应用程序都必须有一个工作进程（应用程序池），尽管一个应用程序池可以服务多个应用程序。可以分布式（网络花园/农场）单个 Web 应用程序，这意味着它将在多个进程中运行。

3.  每个进程都将在自己的应用程序域中运行（每个应用程序池都是一个单独的应用程序域）。

* * *

来自 MSDN。

[创建一个 Web 应用程序](http://technet.microsoft.com/en-us/library/cc772042%28v=ws.10%29.aspx)：

> 应用程序是网站根级别的一组内容或网站根目录下单独文件夹中的一组内容。

[应用程序池](http://www.iis.net/configreference/system.applicationhost/applicationpools)：

> 应用程序池定义一组一个或多个工作进程，并配置有通用设置，这些设置为分配给该应用程序池的一个或多个应用程序提供请求。因为应用程序池允许一组 Web 应用程序共享一个或多个类似配置的工作进程，所以它们提供了一种方便的方法来将一组 Web 应用程序与服务器计算机上的其他 Web 应用程序隔离开来。进程边界将每个工作进程分开；因此，一个应用程序池中的应用程序问题不会影响其他应用程序池中的网站或应用程序。应用程序池显着提高了 Web 基础架构的可靠性和可管理性。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-31T19:24:56.237

来自源链接：-http://weblogs.asp.net/owscott/archive/2007/09/02/application-vs-appdomain.aspx

> 应用程序是 IIS 术语，但它是 ASP.NET 使用的术语。本质上，它创建了一个沙箱或一组边界，以将不同的站点或站点的一部分与其他站点分开。
> 
> AppDomain 是一个 .NET 术语。（在 IIS7 中，AppDomains 在 IIS 中发挥更大的作用，但在大多数情况下，它是一个 ASP.NET 术语）

工作进程用于处理 Web 应用程序的请求。

# asp.net - Visual Studio / TFS 2010 - 如何发布所有文件 - 网站项目

> ID：14105347
> 
> 赞同：1
> 
> 时间：2012-12-31T19:19:04.320
> 
> 标签：asp.net, visual-studio-2010

谁能告诉我如何强制 Visual Studio 2010 发布所有文件（包括源文件）？如果这在 Visual Studio 中是不可能的，那么我是否可以在 TFS 2010 中在我的连续构建代理中完成此任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T07:49:34.753

在源代码控制文件夹中，您可以设置（更改集、签入和签出），您可以在本地映射您公司中的所有源代码。可以共享文件、代码和与我们的工作相关的东西。如果有帮助，请投票！

# sql-server - 文件的目录查找失败，操作系统错误 5（访问被拒绝。）

> ID：14105359
> 
> 赞同：4
> 
> 时间：2012-12-31T19:20:24.860
> 
> 标签：sql-server, database, sql-server-2008-r2

我有 SQL Server 2008 R2。我卸载了它并安装了 SQL Server 2012 - 现在我无法附加数据库或备份数据库，因为我有错误：

文件的目录查找失败，操作系统错误 5（访问被拒绝。）

我应该怎么办？:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-12T13:51:58.873

请检查进行备份和还原的目录路径。（某些文件夹可能会被删除）。另外解决方案是您可以**使用脚本**进行备份，并且可以通过提及备份或还原数据库的路径来避免此错误。

请参阅 [http://social.msdn.microsoft.com/Forums/en-US/sqlkjmanageability/thread/1d044ccd-9c16-4a60-819d-cf7f9125384c](http://social.msdn.microsoft.com/Forums/en-US/sqlkjmanageability/thread/1d044ccd-9c16-4a60-819d-cf7f9125384c)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-05T14:51:11.190

SQL Server 2012 使用您的用户帐户运行，因此如果您没有读取和权限访问权限，您将收到此错误，因此请授予您的帐户管理员权限或执行任务所需的适当权限。

# java - Java中带有对齐文本的多行标签/区域/窗格

> ID：14105362
> 
> 赞同：0
> 
> 时间：2012-12-31T19:20:55.580
> 
> 标签：java, swing, jlabel, jtextarea, jtextpane

我有一个有趣的任务。考虑`String content`长度未知的 a。我想`content`用[两端对齐](http://en.wikipedia.org/wiki/Justification_%28typesetting%29)`Font font`的文本显示。我需要知道如果我指定. 我想在屏幕中间显示此文本，但它的宽度必须为.`height``width``width`

因此，我想做如下的事情。

```
//create a JTextPane or JTextArea
pane.setText(content);
pane.setFont(font);
//set the width of the pane here
//get the height of the full text block if its justified
pane.setLocation(screenWidth/2 - width/2, screenHeight/2, height/2); 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T20:34:11.253

通常，证明是相反的。

文本具有固定高度，您可以通过以下方式之一调整文本宽度：

*   在单词之间添加空格。更容易，但在视觉上不吸引人。
*   在字母之间添加空格。这称为[字距调整](http://en.wikipedia.org/wiki/Kerning)。

如果您调整高度以使宽度正确，则文本中的每一行都会有不同的高度。

# c# - 在 linq to sql 中显示每日、每周、每月和每年的费用及其总和 - Windows Phone 7？

> ID：14105363
> 
> 赞同：0
> 
> 时间：2012-12-31T19:21:05.783
> 
> 标签：c#, windows-phone-7, linq-to-sql, windows-phone-7.1

我正在开发一个 Windows Phone 应用程序，它可以进行简单的费用跟踪。在我的应用程序中，用户通过项目名称、价格、评论和日期时间输入费用，并将详细信息存储在数据库中。

我的桌子有 4 列

1.  项目名称（字符串）
2.  价格（双倍）
3.  评论（字符串）
4.  日期（日期时间）

如何生成按今天、当周、当月和当年所产生的费用的报告？还有今天、当前周、月和年的价格总和？以下是我的数据上下文，目前我只能显示所有费用..请帮助...我是 windows phone 编程和 linq to sql 的新手..

```
 namespace ExpenseTracker
  {
[Table]
public class ExpensesTable
{
    [Column(IsPrimaryKey = true)]
    public string ItemName
    {
        get;
        set;
    }
    [Column(CanBeNull = false)]
    public double Price
    {
        get;
        set;
    }

    [Column(CanBeNull = true)]
    public string Notes
    {
        get;
        set;
    }

    [Column(CanBeNull = false)]
    public DateTime TodayDate
    {
        get;
        set;
    }
} 
```

}

和

```
 public IList<ExpensesTable> GetExpensesList()
    {

        IList<ExpensesTable> ExpensesList = null;
        using (ExpensesDataContext Expdb = new    ExpensesDataContext(strConnectionString))
        {
            IQueryable<ExpensesTable> ExpQuery = from Exp in Expdb.ExpensesInfo select Exp;
            ExpensesList = ExpQuery.ToList();
        }
        return ExpensesList;
    } 
```

您能否提供我可以解决上述问题的任何代码或链接？如果我做错了什么，请指导我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T12:42:51.327

看看这篇文章[http://www.codethinked.com/grouping-linq-aggregates-in-c](http://www.codethinked.com/grouping-linq-aggregates-in-c)解释 LINQ 中的聚合和分组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T12:51:25.083

只需按日期范围（周、月等）过滤费用：

```
 var query = from e in Expdb.ExpensesInfo 
             where e.Date >= beginDate && e.Date <= endDate
             select e; 
```

如果您需要计算总数：

```
 double total = query.Sum(e => e.Price); 
```

对于过滤今天的费用：

```
 var beginDate = DateTime.Today;
 var endDate = beginDate.AddDays(1).AddSeconds(-1); 
```

# crystal-reports-2010 - 在 Crystal Reports 中加载图像

> ID：14105366
> 
> 赞同：0
> 
> 时间：2012-12-31T19:21:19.207
> 
> 标签：crystal-reports-2010

请描述如何在运行时使用C#在水晶报表中添加图片

```
private void LoadImage(DataRow objDataRow, 
                              string strImageField, string FilePath) 
{
   FileStream fs = new FileStream(FilePath, 
                          System.IO.FileMode.Open,  System.IO.FileAccess.Read); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T06:46:08.423

用于`crystalrepoert.setdatasource(datatable)`加载水晶报表文件中的图片，数据表的图像列出现在报表中。

你也可以像这样使用运行时数据集： [http ://www.c-sharpcorner.com/UploadFile/saj/CrystalReports03192006090510AM/CrystalReports.aspx](http://www.c-sharpcorner.com/UploadFile/saj/CrystalReports03192006090510AM/CrystalReports.aspx)

# windows-8 - 覆盖特定 UserControl 的 Windows 8 应用程序主题

> ID：14105368
> 
> 赞同：7
> 
> 时间：2012-12-31T19:21:47.157
> 
> 标签：windows-8, winrt-xaml

我正在使用“深色”主题开发 Windows 应用商店应用，该主题适用于应用的主体。但是，对于设置弹出窗口，我想匹配系统提供的“权限”弹出窗口的外观，即白底黑字。

不幸的是，对于运行中的 Dark 主题的每个控件，这很难设置。

有没有一种方法可以使用“Light”主题，覆盖应用程序默认值，用于我用于我的设置窗格的 UserControl，或者是这样做的唯一方法来复制主题文件的所有相关块进入 UserControl 的资源？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T20:58:20.680

我遇到了同样的问题 - 使用深色主题，并使用浅色背景作为设置弹出窗口。我所做的研究也没有任何结果。我最终不得不对我的控件进行样式设置，以便它们可以正确显示在灯光设置弹出窗口中。

我的另一个想法是这样，虽然我没有走这条路 - 使用浅色主题作为默认主题，但更改我的应用程序样式，以便主要元素看起来很暗。这意味着不必重新设置弹出控件的样式。我想这取决于您使用了多少控件，以及哪个路径更容易。

如果你走第二条路，你的应用显然失去了动态改变主题的能力。

# batch-file - 路径正在扩展到单个元素？

> ID：14105371
> 
> 赞同：0
> 
> 时间：2012-12-31T19:22:06.737
> 
> 标签：batch-file, command, dos

我正在尝试创建一个批处理文件，以将我的 \iTunes\Movies\ 文件夹中的目录备份到外部驱动器（如果外部驱动器上尚不存在）：

```
@echo off 
cls
SetLocal EnableDelayedExpansion

for /f "delims=" %%F in ('dir /ad /b') do (
if not exist g:\movies\%%F      (
        echo Copying %%F to G:\Movies\%%F
rem         md G:\Movies\%%F
rem         copy M:\iTunes\Movies\%%F\*.* G:\Movies\%%F
    )
) 
```

这是输出：

```
Code:
Copying The Princess Bride to G:\Movies\The Princess Bride
Copying Green to G:\Movies\Green
Copying Red to G:\Movies\Red
Copying Princess to G:\Movies\Princess
Copying Bride to G:\Movies\Bride
Copying The Green Mile to G:\Movies\The Green Mile
Copying The Shawshank Redemption to G:\Movies\The Shawshank Redemption
Copying Grape to G:\Movies\Grape
Copying Roof to G:\Movies\Roof
Copying On to G:\Movies\On
Copying Fiddler On the Roof to G:\Movies\Fiddler On the Roof
Copying Brief to G:\Movies\Brief
Copying Number to G:\Movies\Number
Copying to to G:\Movies\to
Copying the to G:\Movies\the
Copying Gilbert Grape to G:\Movies\Gilbert Grape
Copying Torino to G:\Movies\Torino
Copying Sherlock Holmes to G:\Movies\Sherlock Holmes
Copying Gran Torino to G:\Movies\Gran Torino
Copying I Am Number Four to G:\Movies\I Am Number Four
Copying Too Big to Fail to G:\Movies\Too Big to Fail
Copying Pelican to G:\Movies\Pelican
Copying The Shunning to G:\Movies\The Shunning
Copying Inside Job to G:\Movies\Inside Job
Copying Shawshank to G:\Movies\Shawshank
Copying Holmes to G:\Movies\Holmes
Copying Four to G:\Movies\Four
Copying Am to G:\Movies\Am
Copying Big to G:\Movies\Big
Copying Job to G:\Movies\Job
Copying Mile to G:\Movies\Mile
Copying Fail to G:\Movies\Fail
Copying The Pelican Brief to G:\Movies\The Pelican Brief
Copying Shunning to G:\Movies\Shunning
Copying Redemption to G:\Movies\Redemption
Copying Labyrinth to G:\Movies\Labyrinth
Copying The Hunger Games to G:\Movies\The Hunger Games

M:\iTunes\Movies> 
```

它不仅正确地使用了完整的目录名称，比如“The Green Mile”，而且对于存在于 iTunes\Movies 文件夹中但不存在于外部驱动器。

我已经尝试过使用和不使用 EnableDelayedExpansion 并尝试了各种类型的变量分配无济于事。

我只是不明白，我已经编程了“delims =”并且我已经在 %%F 周围用双引号尝试过它，那么为什么它将表达式分解为单个元素呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T19:38:47.860

您需要在命令本身的名称周围加上引号，并且需要 tokens=* 部分（如此处所述“[在 FOR 循环中使用什么分隔符来读取行？](https://stackoverflow.com/questions/6721989/bat-script-what-delim-to-use-to-to-read-text-file-line-by-line) ”

```
@echo off 
cls
SetLocal EnableDelayedExpansion

for /f "tokens=*" %%F in ('dir /ad /b') do (
if not exist "g:\movies\%%F"      (
        echo Copying "%%F" to "G:\Movies\%%F"
rem         md "G:\Movies\%%F"
rem         copy "M:\iTunes\Movies\%%F\*.*" "G:\Movies\%%F"
    )
) 
```

只要您在 Windows 命令中有一个参数，该参数是从可能包含空格的批处理变量构建的（就像文件名一样），就需要引号

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T21:45:10.830

这是我的演绎。由于有一些增强功能将使您的脚本受益。不过，它唯一需要修复的是存在、md 和复制路径周围的一些引号。

1.  使用简单的目录进行循环。
2.  `~nx`如果命令行解析器决定更改它们返回值的方式，则使用选项删除周围的引号并仅使用文件夹的名称。（未来证明）
3.  添加`\`到存在和复制路径的末尾以指定它是一个目录并且不匹配任何可能具有相同名称的文件。
4.  放在`copy`后面的`md`意思`&&`是只有在成功创建目录时才会发生副本。

代码：

```
@echo off 
cls
SetLocal EnableDelayedExpansion

for /d %%D in (*) do if not exist "G:\Movies\%%~nxD\" (
    echo Copying %%~fD to G:\Movies\%%~nxD
    rem md "G:\Movies\%%~nxD" && copy "%%~fD\*.*" "G:\Movies\%%~nxD\"
) 
```

如果您需要更多选项，我还建议您查看`xcopy`and命令。`robocopy`

# asp.net - 如何让远程 JSON 与 ASP.NET 中的 Kendo 网格一起使用

> ID：14105372
> 
> 赞同：3
> 
> 时间：2012-12-31T19:22:08.330
> 
> 标签：asp.net, json, kendo-ui

我可以使用以下代码成功地对我的服务进行 AJAX 调用：

```
var serverData = { "ZoneParent": "123" };

        var request = $.ajax({
            type: "POST",
            url: "/./Services/Reports.svc/getZones",
            contentType: "application/json",
            dataType: "json",
            jsonp: null,
            jsonpCallback: null,
            data: JSON.stringify(serverData)
        });

        request.done(function (msg) {
            alert(JSON.stringify(msg));
        });

        request.fail(function (jqXHR, textStatus) {
            alert("Request failed: " + textStatus);
        }); 
```

但是，当我尝试用我的剑道网格实现相同的调用时，我得到一个错误

> 传入消息具有意外的消息格式“原始”。该操作的预期消息格式为“Xml”、“Json”

对于 getZones。我的服务调用适用于 DataTables，但我想潜在地切换到 Kendo。我已经搞砸了几天无济于事。该应用程序不是 MVC。这是我的剑道代码片段：

```
var dataSource = new kendo.data.DataSource({

        transport: {

            read: {

                url: "/./Services/Reports.svc/getZones",

                dataType: "JSON",

                data: { zoneParent: "123" },

                    type: "POST"
            },

            parameterMap: function (data, operation) {
                    return kendo.stringify(data);
                }
        },

            schema: {

                data: "d"
            }
    });

    var grid = $("#allGrids").kendoGrid({

        dataSource: dataSource,

        height: 200
    }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T12:35:23.930

由于**cfeduke**提出了类似的建议，您可以尝试将 contentType 添加到传输读取配置的读取对象中，就像您在**$.ajax**调用中所做的那样。

例如

```
var dataSource = new kendo.data.DataSource({

    transport: {

        read: {

            url: "/./Services/Reports.svc/getZones",

            dataType: "json",

            contentType: "application/json",

            data: { zoneParent: "123" },

                type: "POST"
        },

        parameterMap: function (data, operation) {
                return kendo.stringify(data);
            }
    }, 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T21:23:56.407

听起来服务器的回复“Content-type”标头不是预期的“application/json”。

您可以使用[cURL](http://curl.haxx.se/download.html)：

```
curl -v -H "Content-type:application/json" -H "Accept:application/json" \
http://localhost/Services/Reports.svc/getZones 
```

调用端点并检查返回的标头值（-v 很详细，没有它您将看不到标头）。

有时只需设置“Accept: application/json”标头就足以揭示问题——服务器将输出强制转换为 JSON，或者引发可以追踪的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-09T16:35:05.510

我正在调查是否有另一种解决方法。但似乎剑道有很多限制，这就是其中之一。Datables 不需要标头，只需要 JSON 格式。

这是您需要添加到发送数据的控制器的内容（以防其 ajax 调用）

> header("内容类型：应用程序/json");

我希望它不会是这样，但我相信剑道强迫它。我更喜欢数据表，更多的自由，你可以自定义更多。

# php - 我可以在 1 次通话中结合更新和插入不同的表（带索引）吗？

> ID：14105384
> 
> 赞同：1
> 
> 时间：2012-12-31T19:24:25.853
> 
> 标签：php, mysql

是否可以将值插入一个表并使用单个 mysql 调用更新另一个表？如果是，这是更快还是使用两个单独的调用更快？

例如：

表 1 - 汽车

> **id - 颜色 - 品牌**
> 
> 1 - 红色 - 奥迪
> 
> 2-蓝色-庞蒂亚克

表 2 - 人

> **id - 姓名 - 姓氏**
> 
> 1 - 戴夫 - 安
> 
> 2 - 贝丝 - 伊莱恩

表不相关

假设我想在更新 table1 汽车颜色的同时向人们添加另一行

那可能吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T19:32:51.863

使用存储过程...类似...

```
DROP PROCEDURE IF EXISTS insert_update $$
CREATE PROCEDURE insert_update
(
  IN id INT,
  IN color VARCHAR(10),
  IN name VARCHAR(20)
)
BEGIN
    -- do insert
THEN
    -- do update
END IF; 
```

**注意：**我没有为您编写查询，因为您本身没有提供有关您的表的任何令人信服的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T19:39:27.370

在语义方面，我认为您希望执行事务而不是单个查询。

如果您的所有数据都是 MyISAM，请在**此处停止。这是不可能的**。

如果您的所有数据都是 InnoDB，则可以设置两种范式：

# 范式#1

```
START TRANSACTION;
INSERT INTO people ...
INSERT INTO cars ...
COMMIT; 
```

# 范式#2

在数据库会话中执行以下操作：

```
SET autocommit = 0; 
```

然后做所有你想要的插入然后运行

```
COMMIT; 
```

如果关闭数据库连接，一切都会回滚。所以，试着经常提交。

# java - Java 等价于 IntPtr.ZERO？

> ID：14105392
> 
> 赞同：1
> 
> 时间：2012-12-31T19:25:28.847
> 
> 标签：java, intptr

> **可能重复：**
> [Java 中的 IntPtr (C#) 等价物是什么？](https://stackoverflow.com/questions/1448814/whats-the-equivalent-to-intptr-c-in-java)

是否有 C# 的*IntPtr.ZERO*的 Java 等价物？如果没有，是否有任何方法可以在传递给 JNA 库接口调用时实现相同的行为？

我使用这个片段来表示*IntPtr.ZERO*：

`private static final IntByReference ZERO = new IntByReference(0);`

传递到此*Kernel32* JNA 接口时，我会实现相同的行为吗？：

```
boolean CreateProcess(String lpApplicationName, String commandLine,
        int processAttributes, int threadAttributes,
        boolean inheritHandles, int creationFlags,
        IntByReference environment, String currentDirectory,
        STARTUPINFO startupInfo, PROCESS_INFORMATION processInformation); 
```

如此： `CreateProcess(target, null, 0, 0, false, 4, ZERO, null, sInfo, pInfo)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T21:10:51.310

我不是 C# 程序员，但如果我正确理解 IntPtr.ZERO，那么就没有 Java 等价物。Java 引用可以是空的，也可以是赋值的，没有像这样的第三种情况。

如果您向我们展示您想要完成的工作，您认为您需要这样做的地方，我们可能会为您指明正确的方向（不是双关语）。

* * *

编辑：回复@Jire 的评论：

很可能有一种方法可以直接做你想做的事，但这似乎是一条艰难的道路，尝试通过 JNA 将 NtDll 和 Kernel32 接口直接映射到 Java。正如你所发现的，它们是两个完全不同的世界，有很多东西不能直接翻译。

我建议编写您自己的 DLL，该 DLL 使用与 JNA 配合良好的更简单类型接受来自 java 应用程序的命令样式请求，然后调用适当的本机窗口调用。

有关 JNA可以在本机代码和 Java 之间映射的数据类型列表，请参阅[JNA - 映射类型。](http://en.wikipedia.org/wiki/Java_Native_Access#Mapping_types)

如果您决定必须在没有干预 dll 的情况下执行此操作，祝您好运，如果您成功了，请将代码发布给其他人查看。

# html - Chrome V23 支持 IndexDB 数据库中的 blob

> ID：14105396
> 
> 赞同：1
> 
> 时间：2012-12-31T19:26:23.920
> 
> 标签：html, google-chrome, google-chrome-extension

[**我试用了本文**](https://hacks.mozilla.org/2012/02/storing-images-and-files-in-indexeddb/)谈到的IndexDB中的图片博客存储[](https://hacks.mozilla.org/2012/02/storing-images-and-files-in-indexeddb/)

 **但是对于 Chrome V23，我收到了这个错误：

```
Uncaught Error: DataCloneError: DOM IDBDatabase Exception 25 base.js:52
    putElephantInDbbase.js:52
    (anonymous function) 
```

下面是代码片段：（blob 是一个 xhr.responseType = "blob" ，其中包含有大象.png（根据顶部的示例）。错误发生在最后一行。

```
var transaction = db.transaction(["elephants"], "readwrite");
var store = transaction.objectStore("elephants");
var req = store.put(blob, "image"); 
```

我假设二进制 blob PUT 尚不支持，对吗？（它确实适用于 FireFox 17 和 IE 10）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T12:59:05.383

我想你是对的，它（还）不受支持。这是处理此问题的错误/请求：[https ://code.google.com/p/chromium/issues/detail?id=108012](https://code.google.com/p/chromium/issues/detail?id=108012)**

# ios - 分段控制器中的垂直居中字体

> ID：14105405
> 
> 赞同：4
> 
> 时间：2012-12-31T19:28:37.357
> 
> 标签：ios

出于某种原因，我的分段控件中的字体不是垂直居中的。有没有办法将字体向上移动以垂直居中？

![截屏](../Images/86d88bbea2d1b8df67ef206617b8800b.png)

我对它们进行的唯一设置如下（声明活动/非活动/分隔符图像除外）：

```
NSDictionary *normalSegmentedControlAttributes = [NSDictionary dictionaryWithObjectsAndKeys:
                                  [UIColor blackColor], UITextAttributeTextColor,
                                  [UIColor clearColor], UITextAttributeTextShadowColor,
                                  [NSValue valueWithUIOffset:UIOffsetMake(0, 1)], UITextAttributeTextShadowOffset,
                                  [UIFont fontWithName:kFont size:kSegConFontSize], UITextAttributeFont,
                                  nil];
[[UISegmentedControl appearance] setTitleTextAttributes:normalSegmentedControlAttributes forState:UIControlStateNormal];

NSDictionary *selectedSegmentedControlAttributes = [NSDictionary dictionaryWithObjectsAndKeys:
                                    [UIColor whiteColor], UITextAttributeTextColor,
                                    [UIColor clearColor], UITextAttributeTextShadowColor,
                                    [NSValue valueWithUIOffset:UIOffsetMake(0, 1)], UITextAttributeTextShadowOffset,
                                    [UIFont fontWithName:kFont size:kSegConFontSize], UITextAttributeFont,
                                    nil];
[[UISegmentedControl appearance] setTitleTextAttributes:selectedSegmentedControlAttributes forState:UIControlStateSelected]; 
```

# asp.net - 如何强制刷新 GridView？

> ID：14105406
> 
> 赞同：1
> 
> 时间：2012-12-31T19:28:46.203
> 
> 标签：asp.net, gridview, checkbox

我想要的刷新类型本身并不处理数据。

这是场景：我有一个带有 3 列 A、B 和 C 的 gridview。用户可以单击复选框 a、b 和 c 以使相应的列可见或不可见。[*要清楚，这些复选框在 gridview 之外。]*

现在我希望在单击每个复选框后立即刷新网格视图，仅显示选定的列。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T19:41:21.990

假设您在表格（网格）中的每一列都有一个复选框，您可以在 jQuery 中编写如下内容：

```
$(function() {
    $('input:checkbox').change(function() {
        //get a reference to the corresponding table column
        var $col = $('<#%=grid.ClientID %>' + ' td:nth-child(' + $(this).val() + ')');
        if (this.checked) $col.hide();
        else $col.show();
    });
});​ 
```

并且相应的复选框具有为表中的列索引设置的值。例如：

```
<input type="checkbox" value="1" /><-- hides first column in grid-->
<input type="checkbox" value="2" /><-- hides second column in grid-->
<input type="checkbox" value="3" /><-- hides third column in grid--> 
```

一个更短/更简单的版本也可能适合您：

```
$(function() {
    $('input:checkbox').change(function() {
        var $col = $('table ' + 'td:nth-child(' + $(this).val() + ')');
        $col.toggle();
    });
});​ 
```

[jsfiddle。](http://jsfiddle.net/NLd5a/)

# 更新 - C# 版本

```
protected void Check_Clicked(Object sender, EventArgs e) 
  {
     CheckBox theOneClicked= (sender as CheckBox);
     if(theOneClicked.ID=="checkbox1")
         myGrid.Columns[0].Visible=false;
     else if(theOneClicked.ID=="checkbox2")
         myGrid.Columns[1].Visible=false;
     else if(theOneClicked.ID=="checkbox3")
         myGrid.Columns[2].Visible=false;
  } 
```

# if-statement - .IF 和 IF 在汇编中的区别

> ID：14105408
> 
> 赞同：0
> 
> 时间：2012-12-31T19:29:14.617
> 
> 标签：if-statement, assembly, masm, directive, masm32

.IF 和 IF 指令在汇编中有什么区别？在 .IF 的文档中：

```
.IF condition1 
      statements
   [[.ELSEIF condition2 
            statements]]
   [[.ELSE
            statements]]
      .ENDIF 
```

对于 IF ：

```
IF expression1
      ifstatements
   [[ELSEIF expression2
            elseifstatements]]
   [[ELSE
            elsestatements]]
   ENDIF 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T19:45:12.410

IF-ELSEIF-ELSE-ENDIF（不带点）是编译时指令。汇编器将测试条件，并根据结果，将只包括结果程序中的语句序列之一。它们的用途与 C 预处理器指令`#if`、`#elif`、`#else`和相同`#endif`。

.IF-.ELSEIF-.ELSE-.ENDIF（带点）是执行时指令。汇编器将生成比较和跳转指令。它们的用途与形式中的 C 语句相同`if (...) { ... } else if (...) { ... } else { ... }`。

* * *

**注意：**我不精通masm，因此这些示例的符号可能存在​​错误。

```
something EQU 1

somewhere:
    mov ax, 42
    IF something == 1
    xor bx, 10
    ELSE
    mov bx, 20
    ENDIF
    add ax, bx 
```

在编译的预处理阶段，编译器将测试`IF`和`ELSEIF`语句（不带点）中的条件，并选择将在程序中结束的代码块之一。上面的代码变成如下：

```
somewhere:
    mov ax, 42
    xor bx, 10
    add ax, bx 
```

另一个例子：

```
something EQU 1

somewhere:
    mov ax, 42
    mov dx, something
    .IF dx == 1
    xor bx, 10
    .ELSE
    mov bx, 20
    .ENDIF
    add ax, bx 
```

在编译的预处理阶段，编译器会将`.IF`-语句（带点）转换为汇编指令。上面的代码大概变成了下面这样：

```
something EQU 1

somewhere:
    mov ax, 42
    mov dx, 1
    cmp dx, 1
    jnz else_clause
    xor bx, 10
    jmp past_endif
else_clause:
    mov bx, 20
past_endif:
    add ax, bx 
```

条件实际上是在执行时检查的。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2016-12-20T09:17:35.463

**错误** 的“IF-ELSEIF-ELSE-ENDIF（不带点）是编译时指令。汇编器将测试条件，并根据结果，将只包括结果程序中的语句序列之一。它们服务于与 C 预处理器指令 #if、#elif、#else 和 #endif 的目的相同。

.IF-.ELSEIF-.ELSE-.ENDIF（带点）是执行时指令。汇编器将生成比较和跳转指令。它们与 if (...) { ... } else if (...) { ... } else { ... } 形式的 C 语句的用途相同。”

**真** .if 标记一段代码的开始，如果参数（必须是绝对表达式）非零，则该段代码仅被视为正在汇编的源程序的一部分。

参考： [http ://web.mit.edu/gnu/doc/html/as_toc.html#SEC65](http://web.mit.edu/gnu/doc/html/as_toc.html#SEC65)

# javascript - Three.js 不显示任何内容

> ID：14105410
> 
> 赞同：1
> 
> 时间：2012-12-31T19:29:50.307
> 
> 标签：javascript, webgl, three.js

我一直在用three.js做一些实验。但是，当我尝试做一个简单的测试时，我无法让它显示任何东西。这是我的代码。如果有人能告诉我我错过了什么，那将非常有帮助。

```
//Constant declaration
var RENDER_DIST = 1000,
    FOV = 75;

var WIDTH = window.innerWidth,
    HEIGHT= window.innerHeight;

//Create the scene
var scene = new THREE.Scene();

//Create the camera
var camera = new THREE.PerspectiveCamera(FOV, WIDTH / HEIGHT, 0.1, RENDER_DIST);

//Pull the camera back a bit
camera.z = 100;
//Then add it to the scene
scene.add(camera);

//Create a renderer
renderer = new THREE.WebGLRenderer();
renderer.setSize(WIDTH,HEIGHT);
renderer.domElement.className = "glMain";

//Container is a div
$("#container").html(renderer.domElement);

//Boilerplate done! Celebrate!
(function init() {
    var geometry = new THREE.SphereGeometry(50); 
    var material = new THREE.MeshBasicMaterial({color: 0xff0000}); 
    var sphere = new THREE.Mesh(geometry, material); 
    scene.add(sphere);

    //debugging
    console.log("Sphere at " + sphere.position.x + " " + sphere.position.y + " " + sphere.position.z);

})();

//Our main function
(function loopRun() {
    requestAnimationFrame(loopRun);

    console.log("rendered");
    renderer.render(scene, camera);
})(); 
```

在控制台日志上，我收到了所有`"rendered"`消息，但没有显示任何内容。我已经检查过画布的大小是否正确，所以我不知道出了什么问题。我尝试了几种不同的几何形状。

编辑：我正在使用 Chrome，在线 three.js 示例工作正常。控制台日志上没有错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-31T19:58:24.587

```
//Pull the camera back a bit
camera.position.z = 100;

//Container is a div
document.body.appendChild(renderer.domElement); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-03T17:26:14.567

你也可以试试：

```
$("#container").append(renderer.viewElement); 
```

# java - 存储输入后使用“.nextDouble”的目的是什么？

> ID：14105412
> 
> 赞同：1
> 
> 时间：2012-12-31T19:30:11.167
> 
> 标签：java, input, calculator

在用 C++ 编程几个月并达到中级水平后，我决定开始学习 Java。我在理解扫描仪变量的工作方式时遇到了一些麻烦。在 C++ 中，“cin>>”非常简单，因为它将输入的任何内容存储到先前声明的变量中。但是，在 Java 中，变量本身就是扫描器？这是如何运作的？此外，在告诉扫描仪将变量存储在哪里之后，使用“.nextDouble”的目的是什么？我是从教程中学到的，下面是我的代码。

```
import java.util.Scanner;
class calculator {
 public static void main(String args[]) {
     Scanner var = new Scanner(System.in);
     double fnum, snum, answer;
     System.out.println("Enter first number: ");
     fnum = var.nextDouble();
     System.out.println("Enter second number: ");
     snum = var.nextDouble();
     answer = fnum+snum;
     System.out.println(answer);

 }
     } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T19:33:46.090

```
 Scanner var = new Scanner(System.in); 
```

此时将不会读取值。假设这样在控制台和您的程序之间打开一个流（或）管道。

```
fnum = var.nextDouble(); 
```

告诉 JVM，现在`double`从名为`var`(java terminology, reference) 的流中获取下一个可用值并将该值存储到`fnum`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-31T19:33:40.690

`var`是对一个`Scanner` [对象](http://docs.oracle.com/javase/tutorial/java/concepts/object.html)的引用，该对象有助于抽象从源（在本例中为默认输入流[`System.in`](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#in)）读取标记化输入。

调用[`.nextDouble()`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#nextDouble%28%29)等待输入值（例如，从提示符或通过管道传输到标准输入）。一旦输入，该值将存储在分配的属性中（即`fnum`或`snum`）。

如果该值不可解析为 a `double`，`InputMismatchException`则会抛出 an 。

这是您的源代码的简要注释版本，它解释了正在发生的事情：

```
 // Create a new Scanner object that will read input from System.in (stdin).
 Scanner var = new Scanner(System.in);

 // Declare some variables. The scanner hasn't done anything significant yet.
 double fnum, snum, answer;

 // Print a line to stdout.
 System.out.println("Enter first number: ");

 // Block until the scanner (i.e. stdin) receives a token. By default, the
 // Scanner will use whitespace to tokenize anything that comes in on
 // System.in. nextDouble() will try to parse the first available token
 // into a double. If the parsing succeeds, assign the parsed value to fnum.
 fnum = var.nextDouble();

 // Same thing as above, but for snum.
 System.out.println("Enter second number: ");
 snum = var.nextDouble();

 ... 
```

通读 Scanner 的[类文档](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html)以帮助提供有关 Scanner 是什么以及它如何工作的一些上下文可能不会有什么坏处。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-31T19:34:21.643

调用`var.nextDouble()`会导致`double`从输入中读取下一个值并返回其值。然后，您需要将值存储在某处（或者不存储，如果您只想将其丢弃）。没有地方可以“告诉扫描仪存储变量的位置”。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-31T20:42:25.063

在“中级”了解 C++ 的人应该知道：`cin`是全局变量，`>>`是伪装成运算符的方法调用，“变量”是该方法调用的引用参数。

在 Java 中没有不合格的全局变量，方法调用遵循`object.method(params)`格式，也没有传递引用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-31T19:33:34.190

nextDouble() 是 Scanner 类的一个方法，它返回下一个扫描的双精度。基本上，类 Scanner 正在为您做 cin 类型的东西，但您看不到它的内部工作原理。就好像您在 C++ 中编写了一个类来为您处理 cin，而现在您只是在使用该类。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-10-08T13:31:40.143

在这里，作为初学者，您感到困惑是可以的。首先是我们为什么使用`scanner`?。我们`scanner class`在程序想要获取`user input`. 就像程序问你“你叫什么名字？” 你输入彼得。然后程序可以回复你“你好`Peter`！”。在那里你输入你的名字，这是一个字符串值，当你使用扫描仪时，你会得到用户输入，你需要变量来存储这些输入。您可以说“名称”是变量。因此，您输入的任何名称都将存储在名称变量中。现在系统如何接受您的特定答案？为此，我们使用了一些方法。`string`我们将使用, `var.next()`-- `double`> `var.nextDouble()`, `int`----> `nextInt()`,

扫描仪引用变量名称中的位置`var`。`Scanner var = new Scanner(System.in);`

在您的示例中，您期望双精度值作为用户输入，这就是您说`JVM`要获得下一个双精度值的原因。

# php - CodeIgniter 网站 + phonegap 实践

> ID：14105414
> 
> 赞同：1
> 
> 时间：2012-12-31T19:30:54.847
> 
> 标签：php, javascript, web-services, codeigniter, cordova

我已经使用 codeigniter 开发了网站，现在处于测试阶段，作为业务需求，我们需要一个功能有限的小版本，如移动应用 Iphone、Android 等

我做了一些小型研究，发现迄今为止最好的做法之一是在 codeigniter 中使用 RESTFUL webservice，所以我不会重写代码，我只是添加处理来自 PhoneGAP 应用程序请求的 API

但我不确定我将如何从 phonegap 进行通信，是像 Node.js 这样的 JAVASCRIPT 还是 PhoneGAP 支持哪种代码，

谢谢你的建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T20:22:21.770

您可以在 PhoneGap 中以与在浏览器应用程序中类似的方式发出 AJAX 请求。我在任何方面都没有使用过 node.js，所以我无法评论那个特定的库，但我已经使用 jQuery 和 Dojo 来执行 AJAX 请求。您只需要确保您的应用程序已请求适当的权限以向您的域发出网络请求。看看这个来设置这些权限。

[http://docs.phonegap.com/en/2.2.0/guide_whitelist_index.md.html#Domain%20Whitelist%20Guide](http://docs.phonegap.com/en/2.2.0/guide_whitelist_index.md.html#Domain%20Whitelist%20Guide)

# iphone - 为什么 NSUserDefaults 无法保存 NSMutableDictionary？

> ID：14105415
> 
> 赞同：3
> 
> 时间：2012-12-31T19:31:04.330
> 
> 标签：iphone, ios, xcode, nsuserdefaults, nsmutabledictionary

我正在尝试保存一个`NSMutableDictionary`with `NSUserDefaults`。我在 stackoverflow 中阅读了许多关于该主题的帖子......我还找到了一个可行的选项；然而不幸的是它只工作了一次，然后它开始只保存（null）。有人有提示吗？

谢谢

要保存的代码：

```
[[NSUserDefaults standardUserDefaults] setObject:[NSKeyedArchiver archivedDataWithRootObject:dictionary] forKey:@"Key"];
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

要加载的代码：

```
NSMutableDictionary *dictionary = [[NSMutableDictionary alloc]init];
NSData *data = [[NSUserDefaults standardUserDefaults]objectForKey:@"Key"];
dictionary = [NSKeyedUnarchiver unarchiveObjectWithData:data]; 
```

将对象添加到的代码`NSMutableDictionary`：

```
[dictionary setObject:[NSNumber numberWithInt:0] forKey:@"Key 1"];
[dictionary setObject:[NSNumber numberWithInt:1] forKey:@"Key 2"];
[dictionary setObject:[NSNumber numberWithInt:2] forKey:@"Key 3"]; 
```

NSLog() 值的代码：

```
for (NSString * key in [dictionary allKeys]) {
    NSLog(@"key: %@, value: %i", key, [[dictionary objectForKey:key]integerValue]);
} 
```

而且键是（空）：

```
NSLog(@"%@"[dictionary allKeys]); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-31T19:35:47.540

来自 Apple 的文档`NSUserDefaults objectForKey`：
返回的对象是**不可变**的，即使您最初设置的值是可变的。

该行：

```
dictionary = [NSKeyedUnarchiver unarchiveObjectWithData:data]; 
```

丢弃先前创建的`NSMutableDictionary`并返回一个`NSDictionary`.

将加载更改为：

```
NSData *data = [[NSUserDefaults standardUserDefaults]objectForKey:@"Key"];
dictionary = [NSKeyedUnarchiver unarchiveObjectWithData:data]; 
```

`NSKeyedArchiver`完整的例子，在这个例子中也不需要使用：

```
NSDictionary *firstDictionary = @{@"Key 4":@4};
[[NSUserDefaults standardUserDefaults] setObject:firstDictionary forKey:@"Key"];

NSMutableDictionary *dictionary = [[[NSUserDefaults standardUserDefaults] objectForKey:@"Key"] mutableCopy];

dictionary[@"Key 1"] = @0;
dictionary[@"Key 2"] = @1;
dictionary[@"Key 3"] = @2;

for (NSString * key in [dictionary allKeys]) {
    NSLog(@"key: %@, value: %@", key, [dictionary objectForKey:key]);
} 
```

NSLog 输出：
key：Key 2，value：1
key：Key 1，value：0
key：Key 4，value：4
key：Key 3，value：2

# android - classes.dex 不存在

> ID：14105416
> 
> 赞同：2
> 
> 时间：2012-12-31T19:31:10.010
> 
> 标签：android, eclipse, compiler-errors, filenotfoundexception

在运行 Android 应用程序时抛出 FileNotFoundException，它说**classes.dex**文件不存在（在 Eclipse 的“问题”选项卡中）。

```
*Error:*
> Description   Resource    Path    Location    Type Error generating final
> archive: java.io.FileNotFoundException: D:\B040\Dec
> 31\AirTest\bin\classes.dex does not
> exist AirTestActivity     Unknown Android Packaging Problem 
```

自最近两天以来，我一直坚持这一点。包资源管理器没有给出任何错误（项目上有红叉）。所有其他项目工作正常。只有这个导入的项目 - **Airpush**示例没有运行。相同的代码在不同的系统上运行良好。在这方面需要帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-27T20:21:02.500

当我遇到这个问题时，我按照之前发帖人的建议删除 bin，执行“ant clean”，然后“ant debug”以使用命令行构建调试版本。通过查看输出，我发现我的问题是我没有在 MS Windows 下正确设置路径，因此找不到 java.exe：

```
-dex:
  [dex] Converting compiled files and external libraries into d:\Misc\aarddict-android\bin\classes.dex...
   [dx] 'SearchForJava' is not recognized as an internal or external command,
   [dx] operable program or batch file.
   [dx] 
   [dx] WARNING: Java not found in your path.
   [dx] Checking if Java is installed in C:\Program Files\Java.
   [dx] 
   [dx] ERROR: No suitable Java found. In order to properly use the Android Developer
   [dx] Tools, you need a suitable version of Java JDK installed on your system.
   [dx] We recommend that you install the JDK version of JavaSE, available here: 
```

修改路径然后为我解决了这个问题。

# java - Android，使可滚动视图向左而不是向右溢出？

> ID：14105417
> 
> 赞同：12
> 
> 时间：2012-12-31T19:31:29.860
> 
> 标签：java, android

建议我使用父视图在我的 TextView 中进行水平滚动：

```
<HorizontalScrollView android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <TextView android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:scrollHorizontally="true"
        android:gravity="center|right"
        android:text="123456789"/>

</HorizontalScrollView> 
```

水平滚动效果很好，但是当内容长于其父宽度时，它会使内容向右溢出：

```
-------
|123456|7
------- 
```

但是我正在研究一个包含数字的文本视图，并且由于数字通常向右对齐，我需要文本视图溢出到另一侧。（您必须向左滚动才能看到字符串的开头）。

```
 ------
1|4567|
 ------ 
```

我尝试了多种重力=“正确”和宽度的组合，但我无法做到。如何将文本向右对齐并使其溢出到左侧？

* * *

编辑：

当用户键入时，我尝试这样做：

```
calc.setText( newNumber );
HorizontalScrollView hsv = (HorizontalScrollView) findViewById(R.id.hsv);
hsv.scrollTo(hsv.getRight(), hsv.getTop()); 
```

每次用户输入数字时，它都会向右滚动，但是最新的数字总是被排除在屏幕之外（就像它滚动然后添加数字一样）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T21:06:19.527

受此[启发](https://stackoverflow.com/a/9507988/347565)

你可以让你自己的类派生自 Horizo​​ntalScrollView

```
public class RightAlignedHorizontalScrollView extends HorizontalScrollView {
    public RightAlignedHorizontalScrollView(Context context) {
        super(context);
    }

    public RightAlignedHorizontalScrollView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public RightAlignedHorizontalScrollView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    @Override
    protected void onLayout(boolean changed, int l, int t, int r, int b) {
        super.onLayout(changed, l, t, r, b);
        scrollTo(getChildAt(0).getMeasuredWidth(), 0);
    }
} 
```

[我在那里](https://github.com/MatthieuLJ/right_aligned_horizontalscrollview)发布了一个完整的简单项目

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T19:46:18.700

```
<HorizontalScrollView 
    android:id="@+id/hsv1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <TextView android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:scrollHorizontally="true"
        android:gravity="center|right"
        android:text="123456789"/>

</HorizontalScrollView> 
```

向 Horizo​​ntalScrollView 添加 id

```
HorizontalScrollView hsv = (HorizontalScrollView) findViewById(R.id.hsv1);
hsv.scrollTo(hsv.getRight(), hsv.getTop()); 
```

这是未经测试的，因为我是在飞行中完成的。告诉我进展如何。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T08:57:20.287

我认为您必须将`android:fillViewport="true"`属性用于滚动视图
[检查此](https://stackoverflow.com/a/2034666/1450401)和[此](http://tech.chitgoks.com/tag/androidfillviewport/)

[浏览教程](http://www.curious-creature.org/2010/08/15/scrollviews-handy-trick/)

```
 <ScrollView 
        android:fillViewport="true"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:id="@+id/scrollView"/> 
```

怀疑：滚动视图的容器布局在哪里？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T20:25:42.613

我已经测试了代码。所以有两种方法可以解决这个问题第一个使用 ScrollBars

```
new Handler().postDelayed(new Runnable(){   
@Override
public void run() {
    HorizontalScrollView hsv = (HorizontalScrollView) findViewById(R.id.hsv1);
        hsv.scrollTo(hsv.getRight(), hsv.getTop());
    }       

},100L); 
```

第二个没有滚动条

```
 <TextView 
 android:ellipsize="start"   //add this line
 ...
 /> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T11:28:10.493

您是否尝试将 ellipsize 参数分配给您的文本视图？

```
android:singleLine="true"
android:ellipsize="start" 
```

我希望这能解决你的问题。

设置文字不溢出时的重力，尝试设置

```
android:gravity="center_vertical|right" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-18T06:44:55.867

试试这个，这会正常工作，当你在线程之间跳转时不会给你任何延迟

```
hor = (HorizontalScrollView) findViewById(R.id.horizontalScrollView1);
    hor.postDelayed(new Runnable() {
        public void run() {
            hor.fullScroll(HorizontalScrollView.FOCUS_RIGHT);
        }
    }, 1L); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-10-08T08:58:30.387

我在这方面已经很晚了，但这是一种使用视图旋转的简单方法。

```
horizontal_layout_id.setRotationY(180f) 
```

上面的代码水平反转了整个水平布局，这使得文本从右边而不是左边开始。但是，这也使里面的文字倒转`textview`，这显然不好。

```
textview_inside_horizontal_layout_id.setRotationY(180f) 
```

因此，我们再次反转 textview 本身，这将再次镜像镜像文本！所以，你最终会得到这样的东西——

[![在此处输入图像描述](../Images/5cce315130b462c4403edeb772121caf.png)](https://i.stack.imgur.com/CBylu.png)

这将使文本向右而不是向左溢出！

# ruby - Ruby在同一页面上提交部分表单提交

> ID：14105419
> 
> 赞同：0
> 
> 时间：2012-12-31T19:31:46.237
> 
> 标签：ruby, ruby-on-rails-3, render

我试图在提交表单后呈现我在当前页面顶部制作的部分内容。这应该发生在控制器的 create 方法中，但我似乎无法弄清楚这是否可以在 Ruby 中完成，或者我是否应该使用 Javascript 来渲染它。

这是我到目前为止所尝试的：

*   在与 new.html.erb 相同的文件夹中创建了一个部分（称为 _lightbox.html.erb）
*   控制器渲染更改为：

* * *

```
def create
 @user = User.new(params[:user])
  respond_to do |format|
    if @user.save
      BackgroundJob.perform_async(@user.id)
      format.html { render :partial=>"lightbox", :layout=>false}
      format.json { render json: @user, status: :created, location: @user }
    else
      format.html { render action: "new" }
      format.json { render json: @user.errors, status: :unprocessable_entity }
    end
  end
end 
```

我已经阅读了渲染，但是使用 :partial 键它只是在新页面上渲染部分。我可能应该只是将表单更改为使用 :remote 并添加带有 ajax 成功的灯箱式内容，但是我很好奇这是否可以使用 Ruby on Rails 及其渲染功能来完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T21:29:05.717

您在此处显示的代码并不是真正的问题。一切尽在眼前。

您需要阻止表单提交的默认操作，即发布到表单 URL。如果浏览器发布到该 URL，它将呈现响应。阻止默认操作后，您需要自己使用 javascript 提交表单并设置回调来处理响应。该回调应该将 html 放在页面中您想要的位置。如果其中任何部分不清楚，我可以对其进行扩展。

# ios6 - 单击时动画文本框

> ID：14105420
> 
> 赞同：1
> 
> 时间：2012-12-31T19:31:46.950
> 
> 标签：ios6, uitextfield

我正在尝试从 iPad 应用程序的屏幕底部移动一个文本框，以便键盘不会覆盖它。

我有以下工作。

```
-(void) textViewDidBeginEditing:(UITextView *) observationComment
{
observationComment.frame=CGRectMake(190, 100, 700, 250);
} 
```

但是 1 - 我想为运动制作动画 - 这可能吗？

2 - 我收到警告

```
Local declaration of 'observationComment' hides instance variable 
```

有什么建议吗？也许这不是最好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T01:57:13.603

我之前[在这里找到了答案](https://stackoverflow.com/questions/8540803/how-to-get-keyboard-size-to-resize-uitextview-and-how-to-use-uikeyboardframeendu)，但我必须添加代码，以便当用户通过按下地球键 ( ![在此处输入图像描述](../Images/966f5d931894a0080b41b242c2c8e9f2.png)) 在键盘（如国际或表情符号）之间切换时，视图控制器的 view.frame 会进行调整。

在 YourViewController.h 中，将键盘的高度（仅在可见时）存储在实例变量中。

```
@interface YourViewController : UIViewController {
    CGFloat keyboardHeightIfShowing ;
} 
```

在 YourViewController.m 中，实现这些方法。

```
- (void) keyboardWillShow:(NSNotification*)notification {
    [self moveTextViewForKeyboard:notification up:YES] ;
}

- (void) keyboardWillHide:(NSNotification*)notification {
    [self moveTextViewForKeyboard:notification up:NO] ;
}

- (void) moveTextViewForKeyboard:(NSNotification*)notification up:(BOOL)up {
    NSDictionary* userInfo = [notification userInfo] ;
    UIViewAnimationCurve animationCurve ;
    NSTimeInterval animationDuration ;
    CGRect keyboardEndFrame ;

    [[userInfo objectForKey:UIKeyboardAnimationCurveUserInfoKey] getValue:&animationCurve] ;
    [[userInfo objectForKey:UIKeyboardAnimationDurationUserInfoKey] getValue:&animationDuration] ;
    [[userInfo objectForKey:UIKeyboardFrameEndUserInfoKey] getValue:&keyboardEndFrame] ;

    [UIView beginAnimations:nil context:nil] ;
    [UIView setAnimationDuration:animationDuration] ;
    [UIView setAnimationCurve:animationCurve] ;

    CGRect keyboardFrame = [self.view convertRect:keyboardEndFrame toView:nil] ;
    //Since I have a UITabBar, when the keyboard appears, self.view.frame.height should shrink by slightly less than if I did not have a UITabBar.
    keyboardFrame.size.height -= self.tabBarController.tabBar.frame.size.height ;
    CGRect newViewFrame = self.view.frame ;
    //UIKeyboardWillShowNotification can be triggered even when the keyboard is already showing, such as when switching between certain international keyboards. When this happens, before shrinking newViewFrame to accommodate keyboardFrame, enlarge newViewFrame so that it is the size it was before the previous keyboard appeared.
    if ( up && keyboardHeightIfShowing ) {
        NSLog(@"hiding keyboard with height %0.1f, showing keyboard with height %0.1f",keyboardHeightIfShowing, keyboardFrame.size.height) ;
        newViewFrame.size.height += keyboardHeightIfShowing ;
    }
    newViewFrame.size.height -= keyboardFrame.size.height * (up ? 1 : -1) ;
    keyboardHeightIfShowing = ( up ? keyboardFrame.size.height : 0 ) ;
    self.view.frame = newViewFrame ;

    [UIView commitAnimations] ;
} 
```

最后，在 YourViewController.m 中，建立`keyboardWillShow`并被`keyboardWillHide`UIKeyboardWillShow/Hide 调用的通知。

```
- (void) viewWillAppear:(BOOL)animated {
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillShow:) name:UIKeyboardWillShowNotification object:nil] ;
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillHide:) name:UIKeyboardWillHideNotification object:nil] ;
}

- (void) viewWillDisappear:(BOOL)animated {
    [[NSNotificationCenter defaultCenter] removeObserver:self name:UIKeyboardWillShowNotification object:nil] ;
    [[NSNotificationCenter defaultCenter] removeObserver:self name:UIKeyboardWillHideNotification object:nil] ;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T00:41:23.913

查看[本教程](http://www.iphonesampleapps.com/2009/12/adjust-uitextfield-hidden-behind-keyboard-with-uiscrollview/)或[此 stackoverflow.com 问题及其答案](https://stackoverflow.com/questions/1126726/how-to-make-a-uitextfield-move-up-when-keyboard-is-present?page=1&tab=active#tab-top)。这是一个复杂的问题，但这些应该让您更好地了解您需要做什么。

# f# - F# 的下划线：为什么不直接创建一个变量名？

> ID：14105422
> 
> 赞同：13
> 
> 时间：2012-12-31T19:32:13.630
> 
> 标签：f#

今天阅读 F#，我不清楚一件事：

来自：http: [//msdn.microsoft.com/en-us/library/dd233200.aspx](http://msdn.microsoft.com/en-us/library/dd233200.aspx)

> 您只需要元组的一个元素，可以使用通配符（下划线）来**避免为不需要的变量创建新名称**
> 
> 让 (a, _) = (1, 2)

我想不出我曾经处于这种情况的时间。为什么要避免创建变量名？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-31T19:34:30.487

因为你不需要价值。我经常用这个。它记录了一个值未使用的事实，并保存了命名变量`unused`等`dummy`。如果你问我，这是一个很棒的功能。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-04T00:37:55.923

有趣的问题。这里涉及许多权衡。

您与 Ruby 编程语言进行了比较，因此您应该考虑的第一个权衡可能是静态类型。如果您使用该模式`x, _, _`，则 F# 知道您指的是恰好三个元素的三元组的第一个元素，并将在编译时强制执行此约束。鲁比不能。F# 还检查模式的详尽性和冗余性。同样，Ruby 不能。

您的比较也只使用了平面模式。考虑模式`_, (x, _)`or `x, None | _, Some x`or`[] | [_]`等​​等。这些不是那么容易翻译的。

最后，我要提到的是，标准 ML 是一种与 F# 相关的编程语言，它确实提供了名为`#1`etc. 的运算符来提取具有任意数量元素的元组的第一个元素（请参阅[此处](http://www.cs.cornell.edu/courses/cs312/2004fa/lectures/lecture3.htm)），因此这个想法已经实现并被抛弃了几十年前。我相信这是因为 SML 的`#n`符号在类型系统的约束下最终导致难以理解的错误消息。例如，使用的函数`#n`没有明确元组的元组是什么，但函数不能在元组元组上是泛型的，因此这必须导致错误消息指出您必须提供更多类型信息，但许多用户发现这令人困惑。使用 CAML/OCaml/F# 方法就没有这种混淆。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-12-31T20:18:37.517

`let`您给出的-binding 是一种称为[模式匹配](http://msdn.microsoft.com/en-us/library/dd547125.aspx)的语言工具的示例，它可用于解构许多类型，而不仅仅是元组。在模式匹配中，下划线是表示您不会引用值的惯用方式。

直接访问元组的元素可能更简洁，但不太通用。模式匹配允许您查看某些数据的结构并分派到适当的处理案例。

```
match x with
| (x, _, 20) -> x
| (_, y, _)  -> y 
```

`x`仅当第三个元素是 时，此模式匹配才会返回第一项`20`。否则返回第二个元素。一旦你超越了琐碎的情况，下划线是一个重要的可读性帮助。将上述内容与以下内容进行比较：

```
match x with
| (x, y, 20) -> x
| (x, y, z)  -> y 
```

在第一个代码示例中，更容易分辨出您关心模式中的哪些绑定。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-31T19:34:37.630

有时一个方法会返回多个值，但您编写的代码只对其中的几个（或一个）感兴趣。您可以使用多个下划线实质上忽略您不需要的值，而不是让一堆变量在本地范围内徘徊。

# objective-c - 使Web View下的过度滚动区域透明？

> ID：14105426
> 
> 赞同：1
> 
> 时间：2012-12-31T19:32:41.537
> 
> 标签：objective-c, macos, webview

我有一个运行良好的 WebView。当我（向上或向下）滚动它的内容时，我看到网页“后面”有一个白色区域。（这里有一张图片，但由于是新的而无法发布）。

我想将过度滚动颜色设置为清除。

准确地说，我已经将 WebView 背景设置为透明，但这并没有达到预期的效果。这使整个页面清晰地显示在我的应用程序的背景中。如果用户滚动了窗口的内容，我只想查看应用程序背景。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T05:25:18.920

尝试这个：

```
yourwebviewname.opaque=NO; 
```

# netbeans-7 - 如何更改 Netbeans 7.1.2 中的默认源文件夹

> ID：14105431
> 
> 赞同：1
> 
> 时间：2012-12-31T19:33:29.470
> 
> 标签：netbeans-7

有谁知道如何更改 Netbeans 7.1.2 中的默认源文件夹

我查看了文件，但似乎无法找到默认目录的存储位置 - 我浏览过论坛，但找不到任何有用的东西..？

当前 C:\Users\wayne\Documents\NetBeansProjects\PhpProject7

我已经读过，如果您选择不同的目录，那么它将成为默认目录 - 我的安装不是这种情况

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T15:00:00.447

如果你使用的是 Windows 7 或 vista，你会在这里找到它`C:\Users\YourUserName\AppData\Roaming\NetBeans\7.1.2\config\Preferences\org\netbeans\modules\projectui.properties`。

但是，如果您使用的是 windowsXP，请记住`USERPROFILE`环境变量不是用户，而是文档和设置。环境变量会根据您使用的操作系统而变化。要知道`USERPROFILE`你的变量是什么，只需打开命令提示符窗口并键入`SET USERPROFILE`. 或者您可以简单地键入`%USERPROFILE%\AppData\Roaming\NetBeans\$ENTER_YOUR_NETBEANS_VERSION_NUMBER_HERE\config\Preferences\org\netbeans\modules\projectui.properties`，这会将您发送到正确的目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-07T17:37:08.783

其实很简单。

```
"C:\Users\wayne\.netbeans\7.1.2\config\Preferences\org\netbeans\modules there is a file called projectui" 
```

钱是对的，但他忘记了更改目录时需要牢记的一个细节。如果要将默认项目文件夹设置为（在我的情况下）：

```
"C:\Program Files\glassfish-3.1.2.2\glassfish\domains\domain1\docroot" 
```

那么你必须将斜线加倍。您必须输入以下链接，而不是上面的链接：

```
"C:\\Program Files\\glassfish-3.1.2.2\\glassfish\\domains\\domain1\\docroot" 
```

*没有空格。我最初是这样的，但它隐藏了它们中的每一个。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-04T14:54:34.223

在较新的版本中，在“项目”选项卡中右键单击要移动的项目，然后单击“移动”。这将允许您将项目移动到新目录。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-11-21T06:41:08.540

提示！我发现（在 Windows 7 上）AppData 文件夹是隐藏的，因此默认情况下不会出现在 Windows 资源管理器文件中。要使其可见，请如上所述为 USERPROFILE 目录打开一个窗口，然后使用

*   整理 ->
*   文件夹和搜索选项 ->
*   查看（选项卡）->
*   高级设置列表 ->
*   隐藏文件和文件夹单选按钮以显示它们。

（或者如果你输入正确，你可以通过搜索或运行打开它）我希望这可以节省你花费我几个小时的时间......

# jquery - JQuery 没有在 IE 上循环通过 XML

> ID：14105434
> 
> 赞同：1
> 
> 时间：2012-12-31T19:33:39.363
> 
> 标签：jquery, xml, internet-explorer

以下在 Chrome 和 Firefox 中运行良好，但在 IE 中不起作用。它在 IE 中获取数据（我可以在控制台中看到它） - 但它也没有循环`.each`：

```
function searchServing(which,choice){
var url = "search.asp?" + which + "=" + choice;

$.get(url, function(data){  
    console.log("data" + data);
    $.each($(data).find("company"),function(index, el) {
        loc = $(this).find('Location').text();
        console.log("loc: "+ loc);
    });
})//$.get(url, function(data){
.error(function() {

})//.error(function() {
.success(function(data) { 
        $.each($('company',data),function(index, el) {
            loc = $(this).find('Location').text();
            console.log("location: "+ loc);
        }
    }
} 
```

XML 采用这种格式：

```
 <company>
    <sql><%=sSQL%></sql>
    <uid><%=uid%></uid>
    <companyName><%=company%></companyName>
    <location><%=location%></location>
    <phone1><%=phone1%></phone1>
    <phone2><%=phone2%></phone2>
    <phone3><%=tollfree%></phone3>
    <serving><%=serving%></serving>
</company> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T19:44:28.890

首先，IE 并不总是喜欢 console.log，所以删除它。

其次，如果标记名是小写的，请在尝试查找时使用小写字母。

第三，使用`var`关键字，并且不要在循环内将变量声明为全局变量。

最后但同样重要的是，应该使用 解析 XML `$.parseXML`，如下所示：

```
function searchServing(which, choice) {
    var url = "search.asp?" + which + "=" + choice,
        loc = []; //use array if iterating several values
    $.get(url, function(xml) {
        var xmlDoc = $.parseXML(xml),
            $xml = $(xmlDoc);
        $.each($xml.find("company"), function(index, el) {
            loc.push($(el).find('location').text());
        });
    });
}​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T19:38:46.847

可能是因为`console.log()`

As`IE 8`和 under 默认没有控制台对象

您需要打开开发人员工具以使其工作或创建一个新的控制台对象。

# html - 如何呈现徽标和登录/搜索框是同一行

> ID：14105438
> 
> 赞同：3
> 
> 时间：2012-12-31T19:33:54.793
> 
> 标签：html, css, asp.net-mvc

下面的代码在下面的徽标中呈现搜索表单：

```
 LOGO IMAGE

Logon or register

Search: 
```

如何更改它以便在同一行中的徽标之后呈现登录/搜索：

```
 Logon or register
LOGO IMAGE        
               Search: 
```

site.master 包含：

```
<div id="header" style="margin: 0; background-color: white; width: 100%">
   <a href="http://mysite.com">
     <img alt='' style='width:30%' src='/Store/Logo' />
     </a>
   <div >
      <p class="accBoxUnloggedOther">
           <a href="/logon">Logon</a>
             or <a href="/register">
              Register</a></p>
      <br />
      <form action="/Store/Search" style="margin:0">
        <input class="searchfield" id="Search"  />
        <input class="button blue bigrounded" type="submit" value="Search... " />
        </form>
     </div>
.... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T19:42:08.923

`style="float:right;"`在内部 div 上使用。但是你应该尽量避免使用内联 CSS。它会导致维护噩梦。

[jsFiddle](http://jsfiddle.net/yyqca/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T21:07:22.420

您还可以将您想要的元素放在标签的同一行中`<div>`，将图像放在另一个标签中`<div>`

# perl - 使用 Perl 的 Try::Tiny 捕捉错误

> ID：14105439
> 
> 赞同：-2
> 
> 时间：2012-12-31T19:34:16.233
> 
> 标签：perl, try-catch

我有以下代码：

```
99      if($host =~ /R3|R6/) {
100         #task 1.2 3 points
101         try {
102             my $ns = "http://xml.juniper.net/junos/$ver/junos-interface";
103             my $out = $jnx->get_interface_information(interface_name => "ae10")->toString();
104             my @ex_path = (["up","//x:oper-status"],["up","//x:admin-status"]);
105             my $ret = Check->checkt($ns,$out,@ex_path);
106             for(@{$ret}) {
107                 my $feed;
108                 $tasks[2]->[3]=$tasks[2]->[2] if $_->[0] == 0;
109                 $feed = $_->[2] if $_->[2];
110                 $feed = "Not Set" unless $_->[2];
111                 push @{$tasks[2]},"$host AE10 is currently $feed" if $_->[0] == 0;
112             }
113             my $datax = XML::LibXML::XPathContext->new(XML::LibXML->load_xml(string => $out));
114             $datax->registerNs("x",$ns);
115             my $minlinks = $datax->findvalue("//x:minimum-links-in-aggregate");
116             if($minlinks < 2) {$tasks[2]->[3]=$tasks[2]->[2]; push @{$tasks[2]},"$host does not currently have the minimum links set";}
117      } catch {
118             $tasks[2]->[3]=$tasks[2]->[2];
119             push @{$tasks[2]},"$host AE10 is currently not available";
120      };
121      } 
```

我正在尝试捕获第 103 行产生的以下错误：

```
Can't call method "toString" on an undefined value at file.pm line 103, <> line 2. 
```

并跳过 try 块的其余部分，执行 catch 块并保持脚本继续运行，但即使在 try/catch 添加到脚本之后，它也不会这样做。

有谁知道我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T20:07:22.033

没关系这个。我在包定义上方声明了 Try::Tiny。我正在使用的供应商模块附带的 ssh 模块中存在一些错误问题。

# regex - Excel VBA 帮助 - 运行一系列正则表达式查找和替换

> ID：14105451
> 
> 赞同：0
> 
> 时间：2012-12-31T19:36:17.320
> 
> 标签：regex, excel, vba

我有一个变得非常复杂的工作表。在其上，有一张表格，用户将在其中粘贴大约每隔一天一次的数据。数据将始终采用相同的格式，并且仅以准确的方式提供给我们。粘贴后，我需要一种方法让非常普通的 excel 用户能够按下按钮（或组合键，或其他），并且 excel 将运行一系列大约 8-10 个正则表达式查找和替换。所有这些都将在数据的 A 列上。一旦这些都运行，一个简单的公式将在 C 列中的每个单元格 C2 及以下运行。这些列应减少 80% - =C2*.8

如果可能，这一切都应该以最少的用户输入来完成。

是否有更精通正则表达式或 excel 的人知道我寻找正确开始的更好方向？建议使用哪些资源来最好地实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T19:49:51.233

如果您乘以某个因素，那么正则表达式替换将是多余的。Excel 非常擅长将数字数组乘以 0.8。

搜索“Excel粘贴因子”，你会得到一个简单的解释，比如[这个](http://www.excelbanter.com/showthread.php?t=78512)。

我可能会为您经验不足的用户录制一个宏，并希望以前的用户将数字粘贴到绝对完美的地方。

# python - 在 Flask 应用程序中提交表单时出现错误请求错误的原因是什么？

> ID：14105452
> 
> 赞同：83
> 
> 时间：2012-12-31T19:36:26.167
> 
> 标签：python, forms, post, flask, bad-request

在阅读了许多类似的听起来问题和相关的 Flask 文档之后，我似乎无法弄清楚是什么在提交表单时产生了以下错误：

> 400 错误请求
> 
> 浏览器（或代理）发送了此服务器无法理解的请求。

虽然表单始终正确显示，但当我提交与以下任一功能相关的 HTML 表单时，会出现错误请求：

```
@app.route('/app/business', methods=['GET', 'POST'])
def apply_business():
    if request.method == 'POST':    
        new_account = Business(name=request.form['name_field'], email=request.form['email_field'], account_type="business", 
            q1=request.form['q1_field'], q2=request.form['q2_field'], q3=request.form['q3_field'], q4=request.form['q4_field'], 
            q5=request.form['q5_field'], q6=request.form['q6_field'], q7=request.form['q7_field'],
            account_status="pending", time=datetime.datetime.utcnow())
        db.session.add(new_account)
        db.session.commit()
        session['name'] = request.form['name_field']    
        return redirect(url_for('success'))
    return render_template('application.html', accounttype="business")          

@app.route('/app/student', methods=['GET', 'POST'])
def apply_student():    
    if request.method == 'POST':    
        new_account = Student(name=request.form['name_field'], email=request.form['email_field'], account_type="student", 
            q1=request.form['q1_field'], q2=request.form['q2_field'], q3=request.form['q3_field'], q4=request.form['q4_field'], 
            q5=request.form['q5_field'], q6=request.form['q6_field'], q7=request.form['q7_field'], q8=request.form['q8_field'], 
            q9=request.form['q9_field'], q10=request.form['q10_field'],
            account_status="pending", time=datetime.datetime.utcnow())
        db.session.add(new_account)
        db.session.commit()
        session['name'] = request.form['name_field']    
        return redirect(url_for('success')) 
    return render_template('application.html', accounttype="student") 
```

HTML的相关部分是

```
<html>
<head>
    <title>apply</title>
</head>
<body>
    {% if accounttype=="business" %}
    <form action="{{ url_for('apply_business') }}" method=post class="application_form">
    {% elif accounttype=="student" %}
    <form action="{{ url_for('apply_student') }}" method=post class="application_form">     
    {% endif %} 
    <p>Full Name:</p>
    <input name="name_field" placeholder="First and Last">
    <p>Email Address:</p>
    <input name="email_field" placeholder="your@email.com">
    ... 
```

大多数人的问题不是调用`GET`or `POST`，但我在这两个函数中都这样做了，我仔细检查以确保我导入了所有必要的东西，例如`from flask import request`. 我还查询了数据库并确认没有添加表单中的添加内容。

在 Flask 应用程序中，我请求的表单字段在 HTML 表单中的标记略有不同。保持名称一致是必须的。更多可以在这个问题中阅读[表单发送错误，烧瓶](https://stackoverflow.com/questions/8552675/form-sending-error-flask)

* * *

## 回答 #1

> 赞同：139
> 
> 时间：2013-01-01T20:28:22.360

解决方案很简单，并且在评论中没有发现。如本问题所述，[表单发送错误、Flask和](https://stackoverflow.com/questions/8552675/form-sending-error-flask)[Sean Vieira](https://stackoverflow.com/users/135978/sean-vieira)指出，

> ...问题是 Flask 在 args 和表单字典中找不到键时会引发 HTTP 错误。Flask 默认假设的是，如果您要求一个特定的密钥并且它不存在，那么请求中会遗漏一些东西并且整个请求是无效的。

换句话说，如果在 HTML 中找不到您在 Python 中请求的一个表单元素，则 POST 请求无效并出现错误，在我的情况下，回溯中没有任何违规行为。对我来说，拼写缺乏一致性：在 HTML 中，我标记了各种表单输入

```
<input name="question1_field" placeholder="question one"> 
```

在 Python 中，当调用 POST 时，我使用了一个不存在的表单

```
request.form['question1'] 
```

然而，为了与我的 HTML 表单名称保持一致，它需要是

```
request.form['question1_field'] 
```

我希望这有帮助。

# c++ - 使用 C++ 编译函数模板时出错

> ID：14105455
> 
> 赞同：2
> 
> 时间：2012-12-31T19:37:09.993
> 
> 标签：c++, c++11

> **可能重复：**
> [为什么模板只能在头文件中实现？](https://stackoverflow.com/questions/495021/why-can-templates-only-be-implemented-in-the-header-file)

我在 gcc 和 clang 中遇到了一些我不熟悉的错误。首先，这是有问题的代码。

航点树.h：

```
class WaypointTree {

 private:
  Waypoint *head = nullptr;
  Waypoint *current = nullptr;
  template<class Function>
    void each_recur(Waypoint *current, Function f);

 public:
  template<class Function>
    void foreach(Function f);
  void add(Waypoint *wp, Waypoint *parent = nullptr);
  bool isLast(Waypoint *wp);
  Waypoint *next();
  Waypoint *getHead() { return head; }
  void reverse() {}
}; 
```

航点树.cpp：

```
. . .

template<class Function>
void WaypointTree::foreach(Function f) {
  each_recur(head, f);
}

. . . 
```

群.cpp：

. . .

```
_waypoints->foreach([] (Waypoint *wp) {
        glPushMatrix(); {
          glTranslatef(wp->getX(), wp->getY(), wp->getZ());
          glutSolidSphere(0.02, 5, 5);
        } glPopMatrix();
      }); 
```

. . .

使用clang，我收到以下警告：

```
lib/WaypointTree.h:17:7: warning: function 'WaypointTree::foreach<<lambda at lib/Flock.cpp:128:22> >' has internal linkage but is not defined
        void foreach(Function f);
             ^
lib/Flock.cpp:128:14: note: used here
        _waypoints->foreach([] (Waypoint *wp) {
                    ^ 
```

随后出现以下链接器错误：

```
lib/Flock.cpp:128: error: undefined reference to 'void WaypointTree::foreach<Flock::render(std::vector<Boid*, std::allocator<Boid*> >)::$_3>(Flock::render(std::vector<Boid*, std::all
ocator<Boid*> >)::$_3)' 
```

使用 gcc 我只收到以下错误：

```
lib/WaypointTree.h:17:7: error: ‘void WaypointTree::foreach(Function) [with Function = Flock::render(std::vector<Boid*>)::<lambda(Waypoint*)>]’, declared using local type ‘Flock::ren
der(std::vector<Boid*>)::<lambda(Waypoint*)>’, is used but never defined [-fpermissive] 
```

我不确定从哪里开始调试它，但它似乎与模板和 lambdas 有关。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-31T19:39:25.397

您必须在 .h 文件中实现模板函数，而不是在 .cpp 中

[这里有一些进一步的阅读](https://stackoverflow.com/questions/495021/why-can-templates-only-be-implemented-in-the-header-file)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T19:40:51.577

编译器需要定义`WaypointTree.cpp`才能生成`_waypoints->foreach([] (Waypoint *wp)`. 因此，您必须同时包含您的 cpp 或`foreach`在头文件中定义。

# google-drive-api - 图片上传到驱动器不会立即创建 thumbnailLink

> ID：14105456
> 
> 赞同：0
> 
> 时间：2012-12-31T19:37:37.970
> 
> 标签：google-drive-api

我刚刚开始使用 google drive javascript api。

我注意到的是，当我使用请求上传图片时，回调成功触发；但返回的对象没有为我加载的图像提供“thumbnailLink”。当然，我确实获得了文件的 'id，并且可以并且确实使用 'id' 触发另一个调用（对文件/获取）以获取另一个正确给我 thumbnailLink 的对象。

我错过了什么吗？或者这是在上传后立即在客户端中获取缩略图链接的正确方法？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T19:11:34.663

是的，你是对的。缩略图生成是异步的，因此即时响应不知道缩略图 URL。抱歉，我知道这很痛苦，但该操作可能需要很长时间，这会严重影响文件创建调用。

# tomcat - 不支持的major.minor 版本要更改哪一个？

> ID：14105461
> 
> 赞同：0
> 
> 时间：2012-12-31T19:38:22.573
> 
> 标签：tomcat, servlets, version, java

我用`JDK 7`. 我使用 Tomcat 作为 servlet 容器。但它使用的是旧版本的`JVM 1.6`.

现在我有一个错误`Unsupported major.minor version`。

我必须改变哪一个？

*   Tomcat的JVM

或者

*   我的mac的JDK？如何更改 JDK 仅用于使用一个文件的 cmd-line 进行编译？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T19:42:14.680

运行 Tomcat 的 Java 版本应该是该版本的 Tomcat 支持的版本。检查上面的文档，或者只使用您正在使用的文档。

您用于编译的版本应该是相同的版本，至少对于相同的 major.minor 数字。

你真的应该使用相同的版本来运行 Tomcat 以及你所有的开发和测试以及构建和单元测试运行等等。它只是让一切变得更容易，并摆脱浪费你时间的微妙错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T19:40:06.160

这两种方法中的任何一种都可以。更改 tomcat`JAVA_HOME`会很简单，因为它不需要重新编译代码（假设您拥有的 Tomcat 与 Java 6 兼容）。

您可以简单地`JAVA_HOM`将您的 tomcat .bat 文件中的 E 指向您机器上的 Java 6 位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T21:26:16.057

在这两个选项中，降级运行 Tomcat 的 JVM 可能更容易（或者选择一个不同的选项，因为 Mac OS 允许多个并行 JVM 安装）。

另一种选择是使用“-target 1.6”重新编译代码，这将编译`.class`可由 Java 1.6 虚拟机运行的文件。这是一个更好的 IMO 解决方案，因为这样您以后的构建也将被 1.6 JVM 接受。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T20:17:46.817

使用 Java 1.6 重新编译，问题应该会消失。

# php - PHP cURL 爬虫不会获取所有数据

> ID：14105471
> 
> 赞同：1
> 
> 时间：2012-12-31T19:39:27.830
> 
> 标签：php, dom, xpath, curl, web-crawler

我正在尝试通过将 PHP 与 cURL 库一起使用来编写我的第一个爬虫。我的目标是系统地从一个站点获取数据，这意味着代码不会跟随给定站点上的所有超链接，而只会跟随特定链接。

我的代码的逻辑是转到主页并获取多个类别的链接并将它们存储在一个数组中。完成后，爬虫会转到页面上的这些类别站点，并查看该类别是否有多个页面。如果是这样，它也将子页面存储在另一个数组中。最后，我合并数组以获取需要抓取的站点的所有链接并开始获取所需的数据。

我调用下面的函数来启动一个 cURL 会话并将数据获取到一个变量，然后我将其传递给一个 DOM 对象并使用 Xpath 对其进行解析。我将 cURL total_time 和 http_code 存储在日志文件中。

问题是爬虫运行了 5-6 分钟然后停止并且没有获取子页面的所有必需链接。我打印数组的内容以检查结果。我在日志中看不到任何 http 错误，所有站点都提供 http 200 状态代码。即使我在本地主机上打开 PHP 调试，我也看不到任何与 PHP 相关的错误。

我假设由于请求太多，该站点在几分钟后阻止了我的爬虫，但我不确定。有没有办法得到更详细的调试？您是否认为 PHP 适合此类活动，因为我以后不想使用相同的机制从 100 多个其他站点获取内容？

我的 cURL 代码如下：

```
function get_url($url)
{
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 30);
    curl_setopt($ch, CURLOPT_URL, $url);
    $data = curl_exec($ch);
    $info = curl_getinfo($ch);  
    $logfile = fopen("crawler.log","a");
    echo fwrite($logfile,'Page ' . $info['url'] . ' fetched in ' . $info['total_time'] . ' seconds. Http status code: ' . $info['http_code'] . "\n");
    fclose($logfile);
    curl_close($ch);

    return $data;
}

// Start to crawle main page.

$site2crawl = 'http://www.site.com/';

$dom = new DOMDocument();
@$dom->loadHTML(get_url($site2crawl));
$xpath = new DomXpath($dom); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T12:12:15.673

使用[set_time_limit](http://php.net/manual/en/function.set-time-limit.php)延长脚本可以运行的时间。这就是您进入`Fatal error: Maximum execution time of 30 seconds exceeded`错误日志的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T21:15:52.983

你需要在服务器上运行它吗？如果没有，您应该尝试 cli 版本的 php - 它不受常见限制

# php - 循环遍历 2 个数组并获取一个值的开头并将其与第二个数组中的键匹配

> ID：14105477
> 
> 赞同：-1
> 
> 时间：2012-12-31T19:39:57.340
> 
> 标签：php, arrays, match

嘿伙计们，我有一个数组，例如

```
 $return = array(
    'GPPZ20'=>'5.00',
    'GPPZ45'=>'10.00',
    'GPPZ75'=>'15.00',
    'GPPZH20'=>'5.00',
); 
```

我也有一个数组

```
 [0] => Array
    (

        [main_company] => Marketing
        [code] => GPPZH20XSYDLDJ
        [company] => All Companies
    )

[1] => Array
    (

        [main_company] => Some Company
        [code] => XHJDOJSHHJYD
        [company] => All Companies

    ) 
```

等等

我需要做的是从第二个数组中获取代码值，并检查前几个字符中的任何一个是否与返回数组中的任何字符匹配，如果是，则从返回数组中获取值。

我可以指定前 5 个字符或 6 个字符，因为返回数组中的键可以是任意数字，但它们始终是代码的开头。

非常感谢任何想法或帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T20:09:26.073

所有你需要的是

```
foreach ( $data as $v ) {
    foreach ( $return as $k => $f ) {
        if (strpos($v['code'], $k) === 0) {
            printf("%s %s %f \n", $v['main_company'], $v['code'], $f);
        }
    }
} 
```

输出

```
Marketing GPPZH20XSYDLDJ 5.000000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T19:47:05.830

假设您已经从第二个数组中获得了一个代码值，请切断它的第一部分。

```
$code = $array[0]['code'];
$str = substr($code, 0, 5);

foreach($return as $key=>$element){
    if($key==$str){
         echo $element;
    }
} 
```

# mysql - mysql查询选择昨天、今天和明天

> ID：14105479
> 
> 赞同：1
> 
> 时间：2012-12-31T19:40:22.933
> 
> 标签：mysql, timestamp

我正在做一个项目，我必须从数据库中选择所有日期为昨天、今天和明天的条目。日期作为时间戳存储在数据库中。

到目前为止我有这个 PHP 代码

```
$hour = 12;
$today = strtotime("$hour:00:00");
$yesterday = strtotime('-1 day', $today);
$tomorrow = strtotime('+2 day', $today);
$today = get_date($today,"timestamp");

$result = $DB->query("SELECT product_id FROM " . DB_PREFIX . "expiry WHERE expiry_date BETWEEN $yesterday AND $tomorrow"); 
```

它不工作。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T19:47:55.817

试试这个

```
 $tomorrow = strtotime('+1 day', $today); 
```

和 th sql 更改为此

```
 BETWEEN '".$yesterday."' AND '".$tomorrow."' 
```

并确保

```
 `" . DB_PREFIX . "expiry` 
```

不是那样的

```
 `" . DB_PREFIX . "_expiry`
                    ^---------------did have this or something else like - 
```

# logging - 设置 Joomla 2.5 日志

> ID：14105481
> 
> 赞同：0
> 
> 时间：2012-12-31T19:40:37.980
> 
> 标签：logging, joomla2.5

我试图通过在 configuration.php 中指定日志文件夹的路径来配置 Joomla 2.5 日志。我有这个 Joomla 网站，我已经有一段时间无法登录到管理面板了。每次我尝试登录时，我都会收到“500 - 发生错误”。我配置了日志以查看我是否可以知道为什么会发生这种情况，但日志没有显示任何内容。

请问我怎么知道这个错误的原因？如果无法登录到管理员端，我怎么知道它到底来自哪里。

注意：网址是 65.98.61.98/~nnigeria/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T06:12:57.017

我检查了你网站的后端。尝试这些链接中描述的解决方案。 [http://www.joomlart.com/forums/showthread.php?77240-500-An-error-has-occurred](http://www.joomlart.com/forums/showthread.php?77240-500-An-error-has-occurred)。 [http://bikramkawan.com.np/solved-joomla-1-7-500-an-error-has-occurred-return-to-control-panel/](http://bikramkawan.com.np/solved-joomla-1-7-500-an-error-has-occurred-return-to-control-panel/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-03T17:48:57.373

好的，问题是密码是通过某种神秘的方式重置的。我重置它，我很高兴。无论如何感谢@Arunu的帮助

# c++ - C++动态初始化const静态向量

> ID：14105485
> 
> 赞同：3
> 
> 时间：2012-12-31T19:41:37.747
> 
> 标签：c++, vector, static, initialization, constants

我想根据下面的值将一个类`static const std::vector`初始化`Foo`为编译时已知的`{0, 1, 2, 3, ..., n}`位置。目标是包含枚举的所有值。`n``Last``enum``Foo::all``Fruit`

在`foo.h`：

```
enum Fruit { Apple, Orange, Banana, ..., Last };

class Foo {
public:
    static const vector<int> all;
}; 
```

在`foo.cpp`：

```
// initialization of Foo::all goes here. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T20:10:28.090

作为第三种选择：

```
namespace {
  std::vector<int> create();
}
const std::vector<int> Foo::all = create(); 
```

并且`create()`可以做任何它喜欢的事情，甚至使用`push_back()`每个元素，因为`vector`它创建的不是 const。

或者你可以`create()`使用`constexpr`[`<index_tuple.h>`](http://gitorious.org/redistd/redistd/blobs/master/include/redi/index_tuple.h)

```
#include <redi/index_tuple.h>

namespace {
  template<unsigned... I>
    constexpr std::initializer_list<int>
    create(redi::index_tuple<I...>)
    {
      return { I... };
    }
}

const std::vector<int> Foo::all = create(typename redi::make_index_tuple<Last>::type()); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-31T19:45:14.347

您可以使用`boost::irange`：

```
auto range = boost::irange(0, n + 1);
const vector<int> Foo::numbers(range.begin(), range.end()); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-31T19:44:16.970

如果您`n`足够小并且您使用支持`c++0x`or的编译器`c++11`，只需将其拼写出来

```
const std::vector<int> Foo::all{0, 1, 2, 3, ..., n}; 
```

根据@Jonathan 的解释修复。

# php - 根据顺序删除所有段落（在第 2、第 3 或第 4... 之后）

> ID：14105486
> 
> 赞同：0
> 
> 时间：2012-12-31T19:41:40.087
> 
> 标签：php, preg-replace, paragraph

我懂了

```
$description =  '<p>text1</p><p>text2</p><p>text3</p><p>text4</p><p>textn</p>' 
```

我只想删除之后的内容`<p>text3</p>`

我的结果是：

```
$description = '<p>text1</p><p>text2</p><p>text3</p>' 
```

我的猜测是我们需要使用`preg_replace`一些正则表达式，但我无法编写一个有效的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T20:53:40.660

你可以...

```
function str_occurance($needle, $haystack, $occurance) { 
$occurance += 2;
$arr = explode($needle, $haystack, $occurance);
unset($arr[0]);
$arr = array_values($arr);
$key = count($arr) - 1;
unset($arr[$key]);
$str = $needle . implode($needle, $arr);
return $str; 
} 
```

不是最漂亮的，但它有效。

编辑：使用：

```
$description =  '<p>text1</p><p>text2</p><p>text3</p><p>text4</p><p>textn</p>';
$split = '<p>';
$return = 3;
$new = str_occurance($needle, $description, $return);
echo $new; // returns <p>text1</p><p>text2</p><p>text3</p> 
```

# sql - 限制级联删除的 EF 5.0 查找表设计

> ID：14105493
> 
> 赞同：1
> 
> 时间：2012-12-31T19:42:47.510
> 
> 标签：sql, entity-framework-5

EF 5.0 Code First，SQL2012 localdb 我正在开发一个应用程序，该应用程序有许多查找表绑定到组合框以供输入。构建数据库时，EF 会找到所有关系并在适当的地方添加外键。所以现在，例如，我有一个表，其中有许多字段映射到查找表条目。如果我删除表中的条目，我不想级联删除查找表中的映射条目。如何保护查找表免受级联删除？我正在使用数据注释。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T20:30:58.147

外键的工作方式基本上与您认为它们的工作方式相反。如果删除 1:M 关系的“多”侧的一行，“一”侧的表（查找表）不会发生任何事情。

如果从“一”端（查找表）删除一行，则删除应该级联到“多”端的表。（只要这些表具有`ON DELETE CASCADE`作为其外键引用的一部分。）

# ruby-on-rails - 不接收带有 devise_invitable 的回调

> ID：14105497
> 
> 赞同：2
> 
> 时间：2012-12-31T19:43:34.250
> 
> 标签：ruby-on-rails, devise

我正在使用 devise_invitable 允许用户互相邀请。我想在创建邀请或接受邀请时为用户设置值。一种方法在这里

[使用 devise_invitable 将用户添加到 Ruby on Rails 中的组？](https://stackoverflow.com/questions/4159590/using-devise-invitable-for-adding-users-to-a-group-in-ruby-on-rails)

但这似乎有点矫枉过正。回调看起来像是一个完美的解决方案，但在我的 Rspec 测试期间它们似乎没有触发。

这是用户模型：

```
class User < ActiveRecord::Base
  belongs_to :company

  rolify
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :invitable, :database_authenticatable, :registerable, :confirmable,
         :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :role_ids, :as => :admin
  attr_accessible :name, :email, :password, :password_confirmation, :remember_me, :company
  validates :company, :presence => true

  after_invitation_accepted :email_invited_by
  before_invitation_accepted :email_invited_by

  private

    def email_invited_by
      # This is NEVER executed during tests, even when an invite is successfully accepted
       puts "Callback worked"
    end

end 
```

任何关于在哪里看的线索将不胜感激。我发现 devise_invitable 文档有点不透明。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T21:19:33.153

如果用户确实被邀请（即对象被持久化并且有一个邀请令牌集）并且对象（用户的对象）没有验证错误，则将触发 devise_invitable 回调。也就是说，我看到您在`company`没有任何条件的情况下验证存在，我认为这可能会导致验证错误。

如果是这种情况，您可以添加这样的条件

```
validates :company, :presence => true, :if => Proc.new { self.invitation_token.nil? } 
```

所以它不会导致验证错误并触发回调。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-16T05:59:48.013

对于那些仍在寻找答案的人来说，这对我有用。

问题不在于验证，因为在`devise_invitable`邀请时有一个要验证的配置，它默认为`false`：

```
# Flag that force a record to be valid before being actually invited
# Default: false
# config.validate_on_invite = true 
```

所以我的解决方案是使用提供的回调`devise_invitable`：

```
after_invitation_accepted :create_profile 
```

请注意，这需要在下面`devise :invitable`

# python - 在Python中压缩`x if x else y`语句

> ID：14105500
> 
> 赞同：38
> 
> 时间：2012-12-31T19:44:01.743
> 
> 标签：python, variable-assignment, ternary-operator, user-friendly

我对 Python 的三元运算符方法非常熟悉：

```
value = foo if something else bar 
```

我的问题很简单：在没有事先分配的情况下，是否可以`if ...`从返回操作数之一（`... if`或`else ...`）中引用（）中评估的术语？

这里的动机是，有时我使用的表达式`if ...`正是我想要的三元运算结果；虽然发生这种情况，对于小的表达式，重复它没有问题，但是对于更长的表达式，它会变得有些讨厌。以此为例：

```
value = info.findNext("b") if info.findNext("b") else "Oompa Loompa" 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-12-31T20:01:17.903

没有办法做到这一点，这是故意的。三元 if 只应该用于琐碎的情况。

如果你想使用两次计算的结果，把它放在一个临时变量中：

```
value = info.findNext("b")
value = value if value else "Oompa Loompa" 
```

一旦你这样做了，很明显你在做一些愚蠢的事情，实际上写这个的pythonic方式是：

```
value = info.findNext("b")
if not value:
    value = "Oompa Loompa" 
```

这实际上比您最初的尝试少了 5*次*击键。

如果你*真的*想保存击键，你可以这样做：

```
value = info.findNext("b") or "Oompa Loompa" 
```

但许多风格指南和 BDFL 都不鼓励这样做。

如果你只这样做一次，最好更明确一点。如果你这样做了六次，就像所有那些内置和 stdlib 函数一样，`findNext`使用可选的默认值 return 而不是更好：`None`

```
def findNext(self, needle, defvalue=None):
    # same code as before, but instead of return None or falling off the end,
    # just return defvalue. 
```

然后你可以这样做：

```
value = info.findNext("b", "Oompa Loompa") 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-12-31T19:46:15.017

根本不要使用`if ... else`。相反，请利用 Python 的合并运算符。

```
value = info.findNext("b") or "Oompa Loompa" 
```

# python - sqlalchemy：仅在一列上不同

> ID：14105503
> 
> 赞同：2
> 
> 时间：2012-12-31T19:44:22.257
> 
> 标签：python, database, sqlalchemy

我的表如下所示：

```
 title      |    slug
------------------------------
The Title      | the-title
Another Title  | another-title
another title  | another-title 
```

我想通过不同的 slug 进行选择，但也希望将标题作为结果的一部分返回。多个比赛返回哪个标题，我不在乎。

所以我的结果是这样的：

```
[('The Title', 'the-title'), ('Another Title', 'another-title')] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T20:04:10.977

您可能想要执行以下操作：

```
session.query(func.max(Table.title), Table.slug).group_by(Table.slug).all() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-31T20:12:11.130

`distinct`您应该使用`aggregate`带有`group by`子句的函数，而不是使用关键字。考虑以下 SQL 来解决您的需求：

```
SELECT MAX(title), slug
  FROM yourtable
GROUP BY slug 
```

该`group by`子句将导致查询为 slug 的每个不同值仅返回一行。该`max`函数是一个聚合函数，它将返回每个组中标题的最大值。这会给你一个标题，因为你不在乎哪一个，这应该是你所需要的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-11-03T21:38:23.727

您还可以通过以下方式解决此问题：

```
session.query(Table.title, Table.slug).distinct(Table.slug) 
```

`Table.id`这也允许您在同一个字段列表中返回其他字段（比如您想查看） `.query()`，而无需单独的子查询。

# android - Android：如何在背景上叠加这个关卡？

> ID：14105504
> 
> 赞同：0
> 
> 时间：2012-12-31T19:44:24.063
> 
> 标签：android, canvas

我正在尝试在背景上绘制一个级别，但我不确定该怎么做。我可以分别绘制每一块，但完全不知道如何在屏幕上绘制它们。我相信我可能不得不用不同的方法绘制背景，但我不知道这种方法。

到目前为止，这是我的代码：

```
public class DisplayMap extends Activity {

ImageView mapView;
String FILENAME = "World.tmx";

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //setContentView(R.layout.activity_main);
    setContentView(new TileBackground(this));
}

public void loadWorld(String path) {
    ImageView mapView;
    // Start the parser, get back TMX data object
    TileMapData t = TMXLoader.readTMX(FILENAME, this);

    mapView = (ImageView) findViewById(R.id.MapImage);

    // Create a Bitmap from the tilemap data
    Bitmap mapImage = TMXLoader.createBitmap(t, this, 0, t.layers.size());

    // Set the imageview to show the map, if we have one
    if (mapImage != null) {
        mapView.setImageBitmap(mapImage);
    }
    // Map loading problem, inform the user.
    else {
        Toast errorMessage = Toast.makeText(getApplicationContext(),
                "Map could not be loaded", Toast.LENGTH_LONG);
        errorMessage.show();
    }
}

class TileBackground extends View {
    Bitmap bg;

    public TileBackground(Context context) {
        super(context);

        try {
            AssetManager assetManager = context.getAssets();
            InputStream inputStream;
            inputStream = assetManager.open("Background.png");

            BitmapFactory.Options options = new BitmapFactory.Options();
            options.inPreferredConfig = Bitmap.Config.ARGB_4444;

            bg = BitmapFactory.decodeStream(inputStream, null, options);
            inputStream.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    @Override
    public void onDraw(Canvas canvas) {
        Display display = getWindowManager().getDefaultDisplay();
        Point size = new Point();
        display.getSize(size);
        int width = size.x;
        int height = size.y;
        int iWidth = bg.getWidth();
        int iHeight = bg.getHeight();

        for (int x = 0; x < width; x += iWidth) {
            for (int y = 0; y < height; y += iHeight)
                canvas.drawBitmap(bg, x, y, null);
        }
        loadWorld(FILENAME);
        invalidate();
    }
} 
```

activity_main.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <com.seanheiss.shovelshovel.DisplayMap.TileBackground
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:id="@+id/TileBackground" />

    <ImageView
        android:id="@+id/MapImage"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />

</RelativeLayout> 
```

通过评论一个 setContentView 而不是另一个我可以画一个，但我不知道如何画两个。我听说过一种叫做 ViewFlipper 的东西，但不确定我是否应该使用它；我不知道它是如何工作的。

非常感谢任何可以帮助我的人！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T19:56:13.203

您应该将自定义视图 (TileBackground) 添加到您的 activity_main.xml 布局文件中。当您在 activity_main 上使用 setContentView 时，应该可以正确绘制它。您可能希望它作为 RelativeLayout 父级下的第一个元素，以便在后台绘制。

在您的情况下，您应该将 RelativeLayout 作为您的第一个元素：

```
<com.YOUR_PACKAGE.TileBackground
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:id="@+id/TileBackground" /> 
```

# asp.net - 下拉列表没有在后面的代码中给出正确的选择

> ID：14105506
> 
> 赞同：0
> 
> 时间：2012-12-31T19:44:37.167
> 
> 标签：asp.net, drop-down-menu

以下代码是我页面的标记

```
<div id="addnewcontact">
    <fieldset style="width:70%;">
        <legend>Add New Contact Form</legend>
        <asp:panel runat="server" ID="custform" cssclass="contactform visible">
        "code removed for brevity"
            <asp:UpdatePanel ID="updtpanlCity" runat="server">
                <ContentTemplate>
                <!-- State dropdown selector area -->
                <asp:DropDownList ID="ddlStates" runat="server" AppendDataBoundItems="True"
                     AutoPostBack="True" CssClass="dropdowns" TabIndex="7" ToolTip="Select a state"
                    OnSelectedIndexChanged="ddlStates_SelectedIndexChanged">

                </asp:DropDownList>
                <asp:RequiredFieldValidator ID="rfvState" runat="server" ErrorMessage="[Required]"
                        ToolTip="Please select a state" ForeColor="#FF3300" ControlToValidate="ddlStates"
                        Display="Dynamic">
                </asp:RequiredFieldValidator>   
                <!-- End of State dropdown selector area -->
                <br /><p class="spacer"></p>
                <asp:DropDownList ID="ddlCity" runat="server" CssClass="dropdowns"
                        BorderColor="Black" BorderStyle="Solid" BorderWidth="2px"
                        TabIndex="8" ToolTip="Select a city here"
                        OnSelectedIndexChanged="ddlCity_SelectedIndexChanged"
                        AppendDataBoundItems="True" AutoPostBack="True">           
                        <asp:ListItem Value="" Text="Select a city"/>
                </asp:DropDownList>
                <br /><p class="spacer"></p>
                <asp:DropDownList ID="ddlPostalCode"  runat="server" TabIndex="9" 
                        CssClass="dropdowns" ToolTip="Select your postal code here."
                        AppendDataBoundItems="True" AutoPostBack="True">      
                        <asp:ListItem Value="" Text="Postal Code"/>
                </asp:DropDownList>&nbsp;&nbsp;
                <br />  

            </ContentTemplate>     
            <Triggers>
                <asp:AsyncPostBackTrigger ControlID="ddlStates" EventName="SelectedIndexChanged"/>
                <asp:AsyncPostBackTrigger ControlID="ddlCity" EventName="SelectedIndexChanged"/>
                <asp:AsyncPostBackTrigger ControlID="ddlPostalCode" EventName="SelectedIndexChanged"/>
            </Triggers>
            </asp:UpdatePanel>
            <br />

            <br /><p class="spacer"></p>
            <asp:Button ID="submit" runat="server" Text="Submit" CssClass="buttons" />

        </asp:panel> <%--end of custform panel--%>
    </fieldset>
</div> 
```

从州下拉选择器中选择州时，代码应检索城市列表以填充城市下拉列表。这是以前工作的，但我在更改数据库结构时重建了页面。问题是我放在事件处理程序中的 msgbox 行显示索引为 0 的选择总是从该事件返回，这是为什么呢？

```
Protected Sub ddlStates_SelectedIndexChanged(sender As Object, e As EventArgs) Handles ddlStates.SelectedIndexChanged
    If IsPostBack Then
        MsgBox("item: " & ddlStates.SelectedItem.ToString() & "    " & "index: " & ddlStates.SelectedIndex.ToString())
        Dim ctx As New enerteckwebEntities()
        'retrieve the list of cities based on state selected
        Dim citylist As List(Of String) = (From c In ctx.ziptaxes Where c.StateID = Convert.ToInt32(ddlStates.SelectedValue) Order By c.City Ascending Select c.City).ToList()
        With ddlCity
            .Items.Clear()
            .DataSource = citylist.Distinct()
            .DataBind()
            .Items.Insert(0, "Select a city")
            .SelectedIndex = 0
        End With
    End If
End Sub 
```

我在标记中将 autopostback、appenddatabounditems 和 enableviewstate 设置为 true

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T19:57:17.280

这是您可以尝试的一件事。

1.  确保在 page_load 方法的 if(!IsPostBack) 条件中对 States 下拉菜单进行数据绑定。这确保了当 Selected Index 更改事件被触发时，下拉列表不会再次被数据绑定。

# c# - 尝试使用 WebMatrix 从 sql server ce 数据库中动态删除行时出错

> ID：14105520
> 
> 赞同：2
> 
> 时间：2012-12-31T19:46:24.547
> 
> 标签：c#, sql-server, sql-server-ce, webmatrix

每当更新主键值时，我都试图从 sql-server-ce 数据库中删除旧行（基于主键值）。

目标是（一旦提供了新 ID）使用插入语句添加新条目，然后删除旧条目。重要的是要知道数据库本身的主键（城市标记号）的数据类型是 int，而 C# 变量 originalCTag 被声明为 var，但在声明时分配了“”（空字符串），然后分配所需目标主键值的字符串表示形式。

虽然这应该是一项简单的任务，但问题是：

为什么 sql 操作查询不起作用？在 WebMatrix 中使用 C#，这是我尝试过的：

```
db.Execute("DELETE FROM Vaccinations WHERE [City Tag Number] = " + originalCTag); 
```

^这表明在等号索引处解析查询时出错。

```
db.Execute("DELETE FROM Vaccinations WHERE [City Tag Number] = @0", originalCTag); 
```

^这表明输入字符串的格式不正确。

```
db.Execute("DELETE FROM Vaccinations WHERE [City Tag Number] = @0", int.Parse(originalCTag)); 
```

^这表明输入字符串的格式不正确。

```
db.Execute("DELETE FROM Vaccinations WHERE [City Tag Number] = @0", originalCTag.ToString()); 
```

^这（再次）表明输入字符串的格式不正确（我们可以不使用 DELETE 语句参数化查询）吗？

所以......最后，我尝试了：

```
db.Execute("DELETE FROM Vaccinations WHERE [City Tag Number] = '" + originalCTag + "'"); 
```

^这不会产生任何错误，但也不会做它应该做的（例如，删除行）。

在这一点上，我有点不知所措。我希望这些语句中至少有一个能够执行所需的功能，如果不是其中几个的话。

显然我在这里遗漏了一些东西（如果这很明显，我不会感到惊讶）。如果这些语句中的任何一个“应该起作用”，那么在 db.Execute 语句之前我的代码可能还有其他问题。

-------------------UPDATE----------------- 如果您想查看 db 声明语句：

```
var db = Database.Open("Vaccinations"); 
```

是的，疫苗接种是数据库的名称和该数据库中的（唯一）表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T20:10:33.167

合并的错误消息表明 originalCTag 保存的值不是数字。它很可能仍然是一个空字符串，因为这是您所说的您首先将其分配给的字符串。您应该检查用于为其分配有效值的代码是否符合您的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T20:17:34.760

VoidKing 这是你应该如何做/构建你的参数化查询，因为我之前问过你是否可以将一个部分的方法粘贴到你尝试删除的代码中。我希望这个例子可以帮助你您应该如何设置查询的 .. 还要注意我是如何使用`ExecuteNonQuery`vs Execute

```
using (SqlCeConnection sqlConn = new SqlCeConnection("Your ConnectionString"))
{
  sqlConn.Open();

  using (SqlCeCommand sqlComm = new SqlCeCommand("Vaccinations WHERE [City Tag Number] = (@CityTagNumber)", sqlConn))
  {
    sqlComm.Parameters.AddWithValue("@CityTagNumber", originalCTag);
    sqlComm.ExecuteNonQuery();
  }
} 
```

# scheme - SICP 练习 4.54

> ID：14105521
> 
> 赞同：2
> 
> 时间：2012-12-31T19:46:49.420
> 
> 标签：scheme, sicp

我对计算机程序的结构和解释第 4.3.3 节中的练习 4.54 有疑问 (http://mitpress.mit.edu/sicp/full-text/book/book-ZH-28.html#%_sec_4.3.3 ）。此练习涉及 Amb 评估器。

练习如下：

> 如果我们没有意识到`require`可以将其实现为使用`amb`, 由用户定义为非确定性程序的一部分的普通过程，我们将不得不将其实现为特殊形式。这将需要语法过程
> 
> `(define (require? exp) (tagged-list? exp 'require))`
> 
> `(define (require-predicate exp) (cadr exp))`
> 
> 和调度中的一个新条款`analyze`
> 
> `((require? exp) (analyze-require exp))`
> 
> 以及`analyze-require`处理`require`表达式的过程。完成以下 的定义`analyze-require`。
> 
> ```
> (define (analyze-require exp)
>   (let ((pproc (analyze (require-predicate exp))))
>     (lambda (env succeed fail)
>       (pproc env
>              (lambda (pred-value fail2)
>                (if <??>
>                    <??>
>                    (succeed 'ok fail2)))
>              fail)))) 
> ```

我完成如下：

```
(define (analyze-require exp)
  (let ((pproc (analyze (require-predicate exp))))
    (lambda (env succeed fail)
      (pproc env
             (lambda (pred-value fail2)
               (if (false? pred-value)
                   (fail2) ;; or (fail)
                   (succeed 'ok fail2)))
             fail)))) 
```

我的疑问如下：

我知道，在执行过程中，当谓词值为`pred-value`假时，`require`应该会失败；也就是说，它应该调用一个失败继续过程。但我对它是否应该调用`(fail)`或`(fail2)`. 哪一个是正确的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T23:20:43.310

`(fail2)`是正确的。该过程符合[continuation-passing style](http://en.wikipedia.org/wiki/Continuation-passing_style)，在这种情况下正确的 continuation 过程是`fail2`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-09T10:22:23.503

我认为`(fail)`是正确的。

Here we have got `pred-value`，这意味着`pproc`目前评估良好。但如果它是`false`价值，我们将其视为错误`pproc`评估。所以这里的延续`fail`不是`fail2`。

可以在这里找到一个测试：

*   [https://wizardbook.wordpress.com/2011/01/22/exercise-4-54/](https://wizardbook.wordpress.com/2011/01/22/exercise-4-54/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-29T12:16:05.783

`(fail2)`是正确的，好吧，大多数情况下，无论您选择哪个都无所谓，但对于以下条件：

1.谓词部分包含（amb）如

`(require (amb false true false true true))`

2.谓词部分包含 (set!<...> <...>)

你可以看看，这是因为除了以上两种进程外，大部分进程的失败延续与调用者的相同。虽然听起来有些荒谬。

# android - 相机意图不会返回到以前的活动

> ID：14105522
> 
> 赞同：0
> 
> 时间：2012-12-31T19:46:54.987
> 
> 标签：android, android-intent, camera, save, photo

我知道人们会抱怨以前有人问过这个问题。我发布它的原因是我看不出我的有什么不同，而且它不起作用。我已经花了 2 天多的时间查看其他帖子，但我只是没有看到它。

预期行为：我想启动相机，拍照，然后返回启动它的活动。

实际行为：相机启动并允许我拍照，但它只给了我重新拍照、取消照片和复选标记的选项。当我按下复选标记时，没有任何反应。它没有冻结，但它不允许我说“是的，我已经拍了照片，返回结果”。

进入我之前的活动的唯一方法是按下或取消。如果我按重拍照片，它会返回照片模式并允许我再拍一张照片。

这可能是什么原因造成的？

```
public void addPhotoEvent(View v) {
        IMAGEID = ((View) ((View) v.getParent()).getParent()).getId();
        holder = ((LinearLayout) ((View) v.getParent()).getParent());
        updated = false;

        Log.v(this.getClass().getSimpleName(), "Photo Event Launch");

        File folder=new File(getFilesDir(),"RedMango");
        File file = new File(folder,"photo"+IMAGEID+".PNG");

        if(!file.exists())
        {
            file.mkdir();
        }
        Uri uri= Uri.fromFile(file);

        Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
        intent.putExtra(MediaStore.EXTRA_OUTPUT, uri);
        startActivityForResult(intent, REQUEST_CODE);
    } 
```

原木猫

```
12-31 14:44:34.084: V/Page(23779): Photo Event Launch
12-31 14:44:34.084: I/ActivityManager(394): START {act=android.media.action.IMAGE_CAPTURE cmp=com.android.gallery3d/com.android.camera.Camera (has extras) u=0} from pid 23779
12-31 14:44:34.104: V/Page(23779): Saving Notes
12-31 14:44:34.104: V/Database(23779): Database Connection Open
12-31 14:44:34.104: V/Database(23779): Database Closed
12-31 14:44:34.104: V/Page(23779): Saved Notes
12-31 14:44:34.134: V/CameraHolder(23692): open camera 0
12-31 14:44:34.134: I/CameraService(154): Opening camera 0
12-31 14:44:34.134: I/NvOmxCamera(154): HAL_camera_device_open: open camera 0
12-31 14:44:34.174: V/StateManager(23692): startState class com.android.gallery3d.app.PhotoPage
12-31 14:44:34.184: D/OrientationManager(23692): lock orientation to portrait
12-31 14:44:34.194: E/(154): ioctl SetWhiteBalance failed: -1
12-31 14:44:34.194: E/NvOmxCameraSettingsParser(154): Param type 70 not supported
12-31 14:44:34.194: I/NvOmxCamera(154): HAL_camera_device_open: opened camera 0 (0x41010198)
12-31 14:44:34.194: I/AwesomePlayer(154): setDataSource_l('/system/media/audio/ui/camera_click.ogg')
12-31 14:44:34.214: I/AwesomePlayer(154): setDataSource_l('/system/media/audio/ui/VideoRecord.ogg')
12-31 14:44:34.244: V/camera(23692): mSceneMode auto
12-31 14:44:34.254: V/camera(23692): Color effect value =none
12-31 14:44:34.254: V/camera(23692): autoExposure value =center
12-31 14:44:34.254: V/camera(23692): antiBanding value =60hz
12-31 14:44:34.254: D/CameraSettings(23692): Parameters: [antibanding-values=off,auto,50hz,60hz, antibanding=60hz, auto-exposure-lock-supported=true, auto-exposure-lock-values=false,true, auto-exposure-lock=false, auto-whitebalance-lock-supported=true, auto-whitebalance-lock-values=false,true, auto-whitebalance-lock=false, camera-mode=0, effect-values=mono,negative,none,posterize,sepia,aqua,solarize,nv-vivid,nv-emboss, effect=none, exposure-compensation-step=0.1, exposure-compensation=0, focal-length=2.080, focus-distances=0.95,1.9,Infinity, focus-mode-values=fixed, focus-mode=fixed, horizontal-view-angle=72.600, jpeg-quality=100, jpeg-thumbnail-height=240, jpeg-thumbnail-quality=90, jpeg-thumbnail-size-values=0x0,320x240, jpeg-thumbnail-width=320, max-exposure-compensation=20, max-num-detected-faces-hw=0, max-num-focus-areas=0, max-num-metering-areas=0, max-zoom=28, metering-areas=(0,0,0,0,0), min-exposure-compensation=-20, nv-flip-preview-values=off,vertical,horizontal,both, nv-flip-preview=off, nv-flip-still-values=off,vertical,horizontal,both, nv-flip-still=off, picture-format-values=jpeg,jfif,exif, picture-format=jpeg, picture-size-values=320x240,480x480,640x480,800x600,1024x768,1280x720,1280x960, picture-size=1280x720, preferred-preview-size-for-video=720x576, preview-format-values=yuv420p,yuv420sp, preview-format=yuv420sp, preview-fps-range-values=(4000,60000), preview-fps-range=4000,60000, preview-frame-rate-values=5,8,10,15,20,24,25,30, preview-frame-rate=30, preview-size-values=176x144,320x240,352x288,480x480,640x480,704x576,720x408,720x480,720x576,768x432,800x448,960x720,1280x720, preview-size=1280x720, recording-hint-values=false,true, recording-hint=false, rotation-values=0,90,180,270, rotation=0, smooth-zoom-supported=true, vertical-view-angle=72.600, video-frame-format-values=yuv420p, video-frame-format=yuv420p, video-size-values=40x30,176x144,320x240,352x288,640x480,704x576,720x480,720x576,768x432,1280x720, video-size=1280x720, video-snapshot-supported=true, video-stabilization-supported=false, video-stabilization-values=false,true, video-stabilization=false, whitebalance-values=auto,incandescent,fluorescent,daylight, whitebalance=auto, zoom-ratios=100,125,150,175,200,225,250,275,300,325,350,375,400,425,450,475,500,525,550,575,600,625,650,675,700,725,750,775,800, zoom-supported=true, zoom=0]
12-31 14:44:34.254: V/camera(23692): mSceneMode auto
12-31 14:44:34.264: V/camera(23692): Color effect value =none
12-31 14:44:34.264: V/camera(23692): autoExposure value =center
12-31 14:44:34.264: V/camera(23692): antiBanding value =60hz
12-31 14:44:34.264: D/CameraSettings(23692): Parameters: [antibanding-values=off,auto,50hz,60hz, antibanding=60hz, auto-exposure-lock-supported=true, auto-exposure-lock-values=false,true, auto-exposure-lock=false, auto-whitebalance-lock-supported=true, auto-whitebalance-lock-values=false,true, auto-whitebalance-lock=false, camera-mode=0, effect-values=mono,negative,none,posterize,sepia,aqua,solarize,nv-vivid,nv-emboss, effect=none, exposure-compensation-step=0.1, exposure-compensation=0, focal-length=2.080, focus-distances=0.95,1.9,Infinity, focus-mode-values=fixed, focus-mode=fixed, horizontal-view-angle=72.600, jpeg-quality=100, jpeg-thumbnail-height=240, jpeg-thumbnail-quality=90, jpeg-thumbnail-size-values=0x0,320x240, jpeg-thumbnail-width=320, max-exposure-compensation=20, max-num-detected-faces-hw=0, max-num-focus-areas=0, max-num-metering-areas=0, max-zoom=28, metering-areas=(0,0,0,0,0), min-exposure-compensation=-20, nv-flip-preview-values=off,vertical,horizontal,both, nv-flip-preview=off, nv-flip-still-values=off,vertical,horizontal,both, nv-flip-still=off, picture-format-values=jpeg,jfif,exif, picture-format=jpeg, picture-size-values=320x240,480x480,640x480,800x600,1024x768,1280x720,1280x960, picture-size=1280x720, preferred-preview-size-for-video=720x576, preview-format-values=yuv420p,yuv420sp, preview-format=yuv420sp, preview-fps-range-values=(4000,60000), preview-fps-range=4000,60000, preview-frame-rate-values=5,8,10,15,20,24,25,30, preview-frame-rate=30, preview-size-values=176x144,320x240,352x288,480x480,640x480,704x576,720x408,720x480,720x576,768x432,800x448,960x720,1280x720, preview-size=1280x720, recording-hint-values=false,true, recording-hint=false, rotation-values=0,90,180,270, rotation=0, smooth-zoom-supported=true, vertical-view-angle=72.600, video-frame-format-values=yuv420p, video-frame-format=yuv420p, video-size-values=40x30,176x144,320x240,352x288,640x480,704x576,720x480,720x576,768x432,1280x720, video-size=1280x720, video-snapshot-supported=true, video-stabilization-supported=false, video-stabilization-values=false,true, video-stabilization=false, whitebalance-values=auto,incandescent,fluorescent,daylight, whitebalance=auto, zoom-ratios=100,125,150,175,200,225,250,275,300,325,350,375,400,425,450,475,500,525,550,575,600,625,650,675,700,725,750,775,800, zoom-supported=true, zoom=0]
12-31 14:44:34.264: V/camera(23692): startPreview
12-31 14:44:34.284: D/NvOsDebugPrintf(154): NvMMLiteBlockCreate : Block : BlockType = 1 
12-31 14:44:34.294: D/NvOsDebugPrintf(154): NvMMLiteJPEGEncGetBufferRequirements : BufferSize 1382400
12-31 14:44:34.324: D/(154): Camera fd open as: 141
12-31 14:44:34.534: D/CameraStorage(23692): External storage state=mounted 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T02:58:25.340

你的代码对我来说很合适。您指定的文件是否已创建？

# html - 添加指向对齐文本的链接

> ID：14105523
> 
> 赞同：0
> 
> 时间：2012-12-31T19:46:57.167
> 
> 标签：html, css, text, hyperlink

我想知道我是否可以无缝地添加一个指向合理文本的链接。我希望链接在文本中是合理的并保持其位置。所需的输出看起来像一个段落。到目前为止，我已经尝试了两种方法。

**一**

html：

```
<div>
  <p>This is a chunk of text. This is a chunkof  text. This is a chunk of text.</p>
  <a href="#"> This is a link.</a>
  <p>This is a chunk of text. This is a chunk of text. This is a chunk of text.</p>
</div> 
```

CSS：

```
* {
  margin: 0;
  padding: 0;
}
div {
  width: 200px;
}
p, a {
  position: relative;
  float: left;
  text-align: justify;
  display: inline;
} 
```

结果是：

一段文本，一个换行符，链接，一个换行符，然后是最后一段文本。

我想无缝地将链接添加到对齐的文本。仅使用 css 可能吗？

**二**

当我将链接放在段落中时，它似乎是在文本节点之间的实际位置附近随机插入的。可以将链接视为一个词吗？

html：

```
<div>
    <p>This is a chunk of text. This is a chunkof  text. link-><a href="#"> This is a link.</a><-link This is a chunk of text.</p>
    <p>This is a chunk of text. This is a chunk of text. This is a chunk of text.</p>
</div> 
```

在输出中，链接没有与“link-> <-link”对齐

我想如果这是两个选项中更好的一个，我只想知道为什么链接不会与文本节点的位置对齐。“链接->”、“<-链接”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T19:53:46.647

您的代码正在按应有的方式工作，`inline`但在您`css`的代码中

```
div {
    width: 200px;
} 
```

并且所有其他元素都在其中，`div`因此是您的 div 导致换行符，如果您设置`div`more 的宽度，那么它将显示在一行中，现在（内联）正在工作。

[**例子**](http://jsfiddle.net/3reY5/)。

**更新：** [你也可以试试这个](http://jsfiddle.net/3reY5/3/)

```
* {
    margin: 0;
    padding: 0;
  }
div {
  width: 200px;
  text-align: justify;
}
p{
    display: inline;
}
a{
  float:left;
} 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T19:52:03.260

就像赫拉提到的那样。

```
div {
width: 200px;
} 
```

导致换行符可能不够宽。你需要增加它。

如果您希望链接与文本对齐，则不要这样做。

```
<div>
<p>This is a chunk of text. This is a chunkof  text. This is a chunk of text.
<a href="#"> This is a link.</a></p>
<p>This is a chunk of text. This is a chunk of text. This is a chunk of text.</p>
</div> 
```

否则，您必须为链接和段落标签添加一个类，以使它们浮动并内联显示。只做上述方法会更简单。

如果您宁愿以其他方式进行操作，则应该可以

```
<div>
<p class="firstP">This is a chunk of text. This is a chunkof  text. This is a chunk of text.</p>
<a href="#"> This is a link.</a> 
<div class="breaker"></div>
<p>This is a chunk of text. This is a chunk of text. This is a chunk of text.</p>
</div>

p.firstP { 
float: left; 
display: inline-block; 
}

div a  { 
float: left; 
display: inline-block; 
} 

.breaker {
clear: both;
} 
```

# jquery-mobile - jQuery Mobile 事件从一个页面转移到另一个页面

> ID：14105526
> 
> 赞同：0
> 
> 时间：2012-12-31T19:47:42.587
> 
> 标签：jquery-mobile

嗨，我的 Android 应用程序使用 PhoneGap 和 JQM 具有以下 HTML 结构。

```
<body>

<div data-role="page" id="screen">

</div>

<div data-role="page" id="config" data-theme="a">

</div>

</body> 
```

我在#screen 上显示了一个计时器，并在#config 页面上显示了一些配置。触摸#screen 上的任意位置会停止计数器并显示#config 屏幕。'#config' 在单击时有一个'START' 按钮，它会再次显示#screen 并启动计数器。

为了处理这个我正在使用

```
$('#screen').bind('vmousedown', //code to show #config page);

$('#start_cycle').click(function(){
    $.mobile.changePage('#screen');
}); 
```

我的问题是，如果我在某个地方触摸#screen，#start_cycle 会出现在哪里，然后在我抬起拇指时执行 $('#start_cycle').click 功能。

似乎我的 vmouseup 事件正在开始按钮上执行单击事件，而无需等待我再次单击它。

我该如何防止这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T22:27:18.637

我还没有尝试过这个解决方案，只是通过 jQM 工作原理的理论，

```
$('#screen').bind('vmousedown', function(e){
     e.preventDefault();
     //code to change the page to counter page.
     return false;
}) 
```

jQM 说， v 之后是单击事件，在您触摸的同一点上延迟 300 毫秒。这可能是您的计时器在没有您手动启动计时器的情况下启动的原因。如果上述方法不起作用，请尝试使用原生 js 方法附加触摸事件。

# php - 为 PHP 5.4 编写 C++ 扩展，示例代码已过时

> ID：14105529
> 
> 赞同：9
> 
> 时间：2012-12-31T19:47:53.913
> 
> 标签：php, php-extension, php-internals

我正在尝试为 php5.4 编写一个扩展，它基本上在 CPP 中包装了一个非常简单的类。

这是出于教育目的。

我发现在 php5.4 中执行此操作的方法已从 php5.3 更改

我在哪里可以找到有关如何操作的文档？或者更好的是，代码示例，任何其他包装 CPP 类并在 php5.4 中工作的扩展

例如，以前有效，现在不再有效。取自[http://devzone.zend.com/1435/wrapping-c-classes-in-a-php-extension/](http://devzone.zend.com/1435/wrapping-c-classes-in-a-php-extension/)

```
zend_object_value car_create_handler(zend_class_entry *type TSRMLS_DC)
{
    zval *tmp;
    zend_object_value retval;

    car_object *obj = (car_object *)emalloc(sizeof(car_object));
    memset(obj, 0, sizeof(car_object));
    obj->std.ce = type;

    ALLOC_HASHTABLE(obj->std.properties);
    zend_hash_init(obj->std.properties, 0, NULL, ZVAL_PTR_DTOR, 0);
    zend_hash_copy(obj->std.properties, &type->default_properties,
        (copy_ctor_func_t)zval_add_ref, (void *)&tmp, sizeof(zval *));

    retval.handle = zend_objects_store_put(obj, NULL,
        car_free_storage, NULL TSRMLS_CC);
    retval.handlers = &car_object_handlers;

    return retval;
} 
```

该行将 `zend_hash_copy(obj->std.properties, &type->default_properties, (copy_ctor_func_t)zval_add_ref, (void *)&tmp, sizeof(zval *));` 失败，因为结构实例`type`（忘记它的定义）不再具有成员`default_properties`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T14:35:00.903

这个[PHP wiki](https://wiki.php.net/internals/engine/objects)页面上的信息有帮助吗？

具体来说，为了解决您的`zend_hash_copy(obj->std.properties, &type->default_properties, (copy_ctor_func_t)zval_add_ref, (void *)&tmp, sizeof(zval *));`示例，他们建议以下内容：

```
#if PHP_VERSION_ID < 50399
    zend_hash_copy(tobj->std.properties, &(class_type->default_properties),
        (copy_ctor_func_t) zval_add_ref, NULL, sizeof(zval*));
#else
    object_properties_init(&tobj->std, class_type);
#endif 
```

# android - 在 Android Google Maps API v2 中实现覆盖的建议方法是什么？

> ID：14105531
> 
> 赞同：9
> 
> 时间：2012-12-31T19:48:03.943
> 
> 标签：android, google-maps, google-maps-android-api-2

在 Android Google Maps API 的原始版本中，使用以下代码很容易实现覆盖：

```
List<Overlay> mapOverlays = mapView.getOverlays();
AlarmOverlay alarmOverlay = new AlarmOverlay();
mapOverlays.add(alarmOverlay); 
```

...然后可以覆盖覆盖的 draw() 方法并绘制矢量图形，覆盖覆盖的 onTouchEvent() 方法并提供自定义控件等。

我不知道如何在 v2 中构建类似的自定义控件，因为 API 参考中没有提到覆盖的用例（并且标记和多边形还不够）。有没有人建议在 v2 中实施？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T08:08:13.650

如果您需要将自己的图像放置在地球表面，请使用 GroundOverlay。[addGroundOverlay](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/GoogleMap#addGroundOverlay%28com.google.android.gms.maps.model.GroundOverlayOptions%29)方法添加这样的图像。它需要[GroundOverlayOptions](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/model/GroundOverlayOptions)允许指定图像大小和位置（以经纬度计）以及[BitmapDescriptor](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/model/BitmapDescriptor)，除其他选项外，它可以使用普通[位图](http://developer.android.com/reference/android/graphics/Bitmap.html)作为图像源。所以你可以创建一个新的位图，围绕这个位图创建[画布](http://developer.android.com/reference/android/graphics/Canvas.html)并在那里绘画。

如果您需要绘制一些非常复杂的东西，这似乎是一个好方法，多边形和标记是不够的。此外，在 Canvas 上绘制的旧代码可能可以重用。

在我们更新位图后，我还没有做足够的测试来更新地图。在最坏的情况下，可能需要[移除](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/model/GroundOverlay#remove%28%29)地面覆盖层并添加新的地面覆盖层。位图本身可能仍然可以重复使用。

将附加组件放在顶部可能会有问题，因为它必须支持缩放、四处移动，而且地图现在甚至是 3D。

# iphone - 单击单元格或其他 UI 元素后 UITableView 滚动中断

> ID：14105532
> 
> 赞同：-1
> 
> 时间：2012-12-31T19:48:06.000
> 
> 标签：iphone, objective-c, ios, ios6

我创建了一个视图控制器，并添加了一个表视图作为子视图来显示我从 Web 服务异步获取的数据。最初，视图显示一个空表。获取数据后，对其进行排序，然后存储在一个数组中，该数组包含表视图的数据。那时我在 tableView 上调用 reloadData，数据显示正确。此时，表格视图按预期运行（滚动按预期工作）。但是，当我单击一个单元格时，它会将我带到一个详细视图控制器（以模态方式呈现），当我返回时，表格视图已滚动到顶部，并且滚动被禁用（但内容仍会反弹）。数据仍然存在，如果我向上拖动表格单元格，则会显示更多数据，但一旦我松开，就会从屏幕上弹回。

使问题更加复杂的是我的自定义拆分视图控制器，用于更改表格视图中显示的内容。它通过手势显示和隐藏自己，按下其中的对象将重新获取主表视图中的数据。在服务完成加载数据并且表数据已刷新时，表会再次滚动，正如预期的那样。

该应用程序仅支持 iOS 6.0 及更高版本的手机设备类型。

下面是一些从 Web 服务中检索数据的代码：

```
- (BOOL) getPatientVisits {
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^{
    NSDictionary *response = [[HMWebServiceFacade defaultFacade] getVisitListingForPatientId:appDelegate.selectedPatientId withUserCredential:appDelegate.usernamePasswordHash];
    dispatch_async(dispatch_get_main_queue(), ^{
        if ([[response objectForKey:@"status"] isEqualToString:@"OK"])
        {
            patientVisits = [[HMCommonUtils commonUtils] sortedArrayOfVisits:[response objectForKey:@"visits"]];
        }
        else if ([response objectForKey:@"RequestError"])
        {
            [[HMCommonActions standardActions] displayErrorAlertMessage:[response objectForKey:@"RequestError"]];
        }
        else
        {
            [[HMCommonActions standardActions] displayErrorAlertMessage:@"There were no visits for your loved one." withTitle:@"Sorry"];
            patientVisits = nil;
        }

        [visitsTable reloadData];
        [self viewWillAppear:YES];
    });
});

return false;
} 
```

在 viewDidLoad 中，我调用`[self getPatientVisits];`了拆分视图中任何单击对象的回调函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T15:35:33.267

原来问题出在自动布局和 iOS 6 的表格视图标题上。使用约束`- (UIView *) tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section`会导致这种不稳定的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T21:57:27.357

可以在View的方法中设置`scrollEnabled`属性。`tableView``viewDidLoad`

# jquery - 通过jQuery旋转动态图像

> ID：14105536
> 
> 赞同：1
> 
> 时间：2012-12-31T19:48:58.907
> 
> 标签：jquery, json

我一直在尝试通过 jQuery 对图像队列进行动画处理。出于某种原因，它忽略了我的 jquery 函数。图像将通过 JSON 数据动态加载到文档中。到目前为止，我能够加载图像并将每个 div 推送为下一个图像加载，这并不顺利。容器 div 调用#stream。每个图像都处于 div 类调用状态。

我试图在加载（循环）后将每个图像向左移动 270 像素。

图像模板

```
 queue.next(function(status, step) {
 var div = document.createElement('div');

 // create DOM element
 var div = document.createElement('div');
 div.className = 'status';
 var photo = status.images.standard_resolution.url; 
 div.innerHTML = '<img src="'+photo+'"/>';

 // add div to the top of the stream element (each new status is newer)
 document.getElementById('stream').insertBefore(div,     document.getElementById('stream').firstChild);

setTimeout(step, 1000);

}); 
```

我正在尝试使用的 jQuery

```
 $(window).ready(function(){
    animateTheBox();
   }); 

 function animateTheBox() {
    $(".status").animate({"left": "+=270px"},"slow");
  } 
```

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T19:58:03.650

在这里，您在 doument 就绪事件上调用您的动画函数

```
 $(window).ready(function(){
    animateTheBox();
   }); 
```

您应该`animateTheBox();`在加载图像后调用函数。

即在调用`step`中提到的函数中`setTimeout(step, 1000);`

# php - POST参数数组中的变量将“0”插入数据库

> ID：14105538
> 
> 赞同：1
> 
> 时间：2012-12-31T19:49:19.157
> 
> 标签：php, arrays, codeigniter, post, insert

我正在构建一个使用[Phil Sturgeon 的 CodeIgniter 的 RESTful 服务器](https://github.com/philsturgeon/codeigniter-restserver)作为 RESTful API 的 android 应用程序。
当 android 应用程序发出 POST 请求以注册用户`facebook oauth data`时，当它到达服务器端时会调用以下方法。它可以工作，但如果其中一个或多个`optional params`为空，它会将 a 插入`0`到我的数据库中。
我该如何防止这种情况？我更喜欢它根本不输入任何内容或为空。

```
 function fb_register_post(){

        if($this->get_request_method() != "POST"){
                $this->response('',406);
            }

        $oauth_email = $this->input->post('OAUTH_EMAIL');       
        $oauth_uid = $this->input->post('OAUTH_UID');
        $oauth_provider = $this->input->post('OAUTH_PROVIDER');
        $first_name = $this->input->post('FIRST_NAME');
        $last_name = $this->input->post('LAST_NAME');

        if(!empty($oauth_provider) and !empty($oauth_uid) and !empty($oauth_email) and !empty($first_name) and !empty($last_name)){

            if(filter_var($oauth_email, FILTER_VALIDATE_EMAIL)){

                $new_member_insert_data = array(
                'first_name' => $first_name,
                'last_name' => $last_name,
                'email' => $oauth_email,
                'OAUTH_EMAIL' => $oauth_email,
                'OAUTH_PROVIDER' => $oauth_provider,
                'OAUTH_UID' => $oauth_uid,

                //OPTIONAL DATA
                'gender' => $this->post('GENDER'),
                'hometown' => $this->post('HOMETOWN'),
                'bio' => $this->post('BIO'),
                'birthday' => $this->post('BIRTHDAY')   
                );
                $this->load->model('membership_model');
                $data['user'] = $register = $this->membership_model->oauth_register($new_member_insert_data);

                $this->response($data, 200);

            }
        }else{
           $message = array('message' => 'FAIL');
           $this->response($message, 201); 
        }

        $message = array('message' => 'FAIL!');
        $this->response($message, 200); // 200 being the HTTP response code    

    } 
```

被调用的模型函数是：

```
 function oauth_register($new_member_insert_data)
 {
   $insert = $this->db->insert('users', $new_member_insert_data);
   if($insert){
     $UID = $new_member_insert_data['OAUTH_UID'];

     $q = $this->db->query("SELECT * FROM users WHERE OAUTH_UID = $UID LIMIT 1 ") or die(mysql_error());
     if($q->num_rows() > 0) 
     {
       foreach($q->result() as $row) 
       {
         $data[] = $row;
       }
       return $data;
     }
    }
    else
    {
      return false;
    }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T19:51:49.223

问题是您的 post 参数`''`为该值传递了一个空字符串（至少 $_POST 数组将看到它）。然后你尝试将它插入到一个数字列中，Mysql 神奇地将它转换为`0`——即使你设置了另一个默认值。

您可以做的最好的事情是在将参数添加到`$new_member_insert_data`数组之前检查参数是否为空（假设此数组用于构造插入语句）。下面是一个不设置具有空值的数组成员的显式示例：

```
 //assuming all non-optional details have values
$new_member_insert_data = array(       
                               'first_name' => $first_name,
                               'last_name' => $last_name,
                               'email' => $oauth_email,
                               'OAUTH_EMAIL' => $oauth_email,
                               'OAUTH_PROVIDER' => $oauth_provider,
                               'OAUTH_UID' => $oauth_uid
                               ) ;
   //OPTIONAL DATA
   $gender =  $this->post('GENDER')? $this->post('GENDER'):null;
   if(!empty($gender)){
          $new_member_insert_data['gender'] = $gender;
   }

   $hometown = $this->post('HOMETOWN')? $this->post('HOMETOWN'):null;
   if(!empty($hometown)){
          $new_member_insert_data['hometown'] = $hometown; 
   }

   ...etc... 
```

您也可以在客户端请求端防止这种情况，方法是不要将任何没有值的东西放入您的 post 参数中，但我总是在 web 服务端防止这种情况发生，而不仅仅是客户端 POST 请求端。

您还会看到日期和时间戳会发生这种情况......当您尝试将它们设置为`''`最终的`0000-00-00 00:00:00`.

您可以在 Mysql 中打开严格模式，当您尝试将空字符串填充到数字字段或其他非字符字段中时会导致插入失败（但我强烈建议不要这样做）。

# java - 覆盖具有透明度的 JButton paintComponent 不显示后面板颜色

> ID：14105542
> 
> 赞同：4
> 
> 时间：2012-12-31T19:50:05.757
> 
> 标签：java, swing, transparency, jbutton

这是我想要做的。我扩展了 JButton 并覆盖了 paintComponent 方法，创建了我想要的圆边按钮效果，以及当鼠标滚过按钮时的褪色效果。所有这些都很好。我的问题是 JButton 仍在绘制图像显示的白色矩形区域。

![图1](../Images/31a8a1e7a0d9008b411215d3e3920bf9.png) ![图1](../Images/4b892bf70b4d798232236d81f9e79b82.png)

我希望 1）白色角落消失，2）按钮的中心显示它后面的面板。这是我尝试过的：

1- 绘制按钮时使用 getParent().getBackground() 并首先绘制按钮。这适用于不透明面板。但是我希望这个按钮可以在部分或完全透明的面板上工作。使用透明面板，它会绘制颜色，但在白色背景上隐藏面板后面的任何内容（如图像）。

2- 我尝试了许多 setOpaque(false) 或 setContentAreaFilled(false) 的组合。我在调用 super.paintComponent(g) 而没有调用它时尝试过这个。这些似乎都不起作用。

3-当我不使用方法 g2.clearRect(0,0,width,height) （在绘画之前清除图形区域）时，按钮看起来正确，但是由于图形对象永远不会被覆盖，因此淡入淡出效果在之后停止工作一次翻转按钮。

4-我对文本使用 JLabel 并尝试将其设置为不透明或只是不使用它，但问题仍然存在。所以我认为这不是问题。

因为我只想影响 JButton 而不是其他摆动组件，所以我真的希望避免制作自己的 ButtonUI。

谢谢，我希望这是有道理的。下面是我的按钮的代码。

```
import javax.swing.*;
import javax.swing.Timer;
import java.awt.*;
import java.awt.event.*;

/**
 * WButton.java
 * 
 * An extension of JButton but with custom graphics
 *
 */

public class WButton extends JButton{

  private Timer timer;
  private float[] background = {.3f,.6f,.8f,0f};
  private boolean fadeUp = true;
  private boolean fadeDown = false;
  private JLabel label;

  /**
   * Default Constructor
   */
  public WButton(){
    super();
    label = new JLabel();
    setupButton();
  }

  /**
   * Text constructor
   */
  public WButton(String text){
    super(text);
    label = new JLabel(text);
    setupButton();
  }

  /**
   * common setup functions
   */
  private void setupButton(){
    timer = new Timer(24,new TimerAction(this));
    label.setLabelFor(this);
    add(label);
  }

  /**
   * Set the background color
   */
  @Override
  public void setBackground(Color bg){
    background = bg.getRGBComponents(background);
    background[3] = 0f;
    super.setBackground(new Color(background[0],background[1],
                                  background[2],background[3]));
    repaint();
  }

  /**
   * get background
   */
  @Override
  public Color getBackground(){
    if(background!=null)
      return new Color(background[0],background[1],background[2],background[3]);

    return new Color(.5f,.5f,.5f);
  }

  /**
   * Set the font of the button
   */
  @Override
  public void setFont(Font font){
    super.setFont(font);
    if(label!=null)
      label.setFont(font);
  }

  /**
   * Override the set text method
   */
  @Override
  public void setText(String t){
    super.setText(t);
    if(label!=null)
      label.setText(t);
  }

  /**
   * Paint the button
   */
  @Override
  public void paintComponent(Graphics g){
    super.paintComponent(g);
    int width = getWidth();
    int height = getHeight();

    Graphics2D g2 = (Graphics2D)g;
    g2.clearRect(0,0,width,height);
    g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING,
                        RenderingHints.VALUE_ANTIALIAS_ON);

    //Check Button Model state
    if(model.isPressed())
      paintPressedButton(g2,width,height);
    else{
      if(model.isRollover()){
        if(fadeUp){
          fadeUp = false;
          timer.start();
        }
      }
      else{
        if(fadeDown){
          fadeDown = false;
          timer.start();
        }
      }
      g2.setPaint(new Color(background[0],background[1],background[2],background[3]));
      g2.fillRoundRect(0,0,width-1,height-1,height,height);
    }
  }

  /**
   * Draw a pressed button
   */
  private void paintPressedButton(Graphics2D g2,int width,int height){

    float[] temp = new float[4];
    for(int i=0;i<background.length;i++)
      temp[i] = background[i]-.4f < 0f ? 0f : background[i]-.4f;

    g2.setPaint(new Color(temp[0],temp[1],temp[2],temp[3]));
    g2.fillRoundRect(0,0,width-1,height-1,height,height);

  }

  /**
   * paint the border
   */
  public void paintBorder(Graphics g){

    int width = getWidth();
    int height = getHeight();
    g.setColor(Color.BLACK);
    g.drawRoundRect(0,0,width-1,height-1,height,height);
  }

  /**
   * Inner action listener class
   */
  private class TimerAction implements ActionListener{

    private float alphaInc = .2f;
    WButton button;

    public TimerAction(WButton b){
      button = b;
    }

    public void actionPerformed(ActionEvent e){
      if(model.isRollover()){
        background[3] += alphaInc;
        if(background[3] > 1.0f){
          timer.stop();
          background[3] = 1.0f;
          fadeDown = true;
        }
      }
      else{
        background[3] -= alphaInc;
        if(background[3] < 0f){
          timer.stop();
          background[3] = 0f;
          fadeUp = true;
        }
      }
      button.repaint();
    }
  }
} 
```

**编辑 1**

aly 的建议让我更接近，但并不完全在那里。而不是 g2.clearRect() 我按照建议用透明颜色绘制了对象。白色的盒子不见了，但那里有不同的颜色。经调查是父面板的颜色，但没有透明度。以下是示例图片（面板的透明度为 70%）。第一张图片是程序启动的时候。第二张图片是在鼠标悬停 1 次之后。

![图3](../Images/3bac181c8be8698908f1b8e279d786d4.png) ![在此处输入图像描述](../Images/42facd43c23c26c5ca227601610a7a0e.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-31T20:01:21.580

您可以做的不是使用`clearRect()`, 用完全透明的颜色清除背景。

```
g2.setColor(new Color(0,0,0,0));
g2.drawRect(0,0,width,height); 
```

您仍然需要`setOpaque(false)`打开它，`JButton`这样一旦您将鼠标悬停在它上面一次，它就不会使用蓝色的翻转颜色作为背景。

编辑：看到你刚刚发布的内容后，我认为问题在于主框架没有重新粉刷。

尝试：

```
SwingUtilities.getWindowAncestor(this).repaint(); 
```

在paint方法中重新绘制框架，这可能会解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-29T05:08:41.423

这里的问题是，swing 使用`paintImmediately(x, y, width, height)`JButton 来重新绘制更改的区域。如果您查看该方法的内部，它会遍历父层次结构（如果 parent**不是 opaque**），直到找到一个不透明的组件。然后调用 repaint 就可以了。您可能会注意到，这种方法没有考虑**背景颜色中的 alpha 分量，**因为这些分量是不透明的（isOpaque = true）。

为了解决这个问题，您可以重写`paintImmediately()`JButton 中的方法，如下所示：

```
@Override
public void paintImmediately(int x, int y, int w, int h) {
    super.paintImmediately(x, y, w, h);

    Component component = this;

    boolean repaint = false;
    while (!component.isOpaque() || (component.getBackground() != null && component.getBackground().getAlpha() < 255)) {
        if (component.getBackground() != null && component.getBackground().getAlpha() < 255) {
            repaint = true;
        }

        if (component.getParent() == null) {
            break;
        }

        component = component.getParent();

        if (!(component instanceof JComponent)) {
            break;
        }
    }

    // There is no need to repaint if no component with an alpha component in
    // background is found and no parent component is found (implied by component != this)
    // since super.paintImmediately() should have handled the general case.
    if (repaint && component != this) {
        component.repaint();
    }
} 
```

此方法将检查不是不透明或具有透明背景的最顶层组件的父级并重新绘制它。从性能的角度来看，这比当前接受的答案要好得多（每次悬停/按下按钮时都会重绘整个窗口）。

# sass - 破译一个 sass mixin

> ID：14105543
> 
> 赞同：0
> 
> 时间：2012-12-31T19:50:29.867
> 
> 标签：sass

熟悉我即将加入的正在进行中的项目的代码库。我发现这个 mixin 经常被使用，我有几个问题。
1.这是一个相当标准的做法还是css成语，我只是不熟悉它？
2.看起来它在clearfix的伪元素之后添加了一个空格，但是为什么还要插入一个:before呢？

```
@mixin container
  &:before, &:after
  content: ""
  display: table
&:after
  clear: both
  *zoom: 1 
```

显然，当我加入时，我可以等待并询问团队，但我现在想知道 dangit！另外，如果这是我应该熟悉的成语，那么在那之前我可能需要进行一些谷歌搜索，哈哈。感谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T20:18:47.580

您正在查看 Nicolas Gallagher 的“micro clearfix”（请参阅​​：[http](http://nicolasgallagher.com/micro-clearfix-hack/) ://nicolasgallagher.com/micro-clearfix-hack/ ）。背后的解释`:before`如下：

> 这个“micro clearfix”生成伪元素并将它们的显示设置为表格。这会创建一个匿名表格单元格和一个新的块格式化上下文，这意味着 :before 伪元素可以防止上边距折叠。:after 伪元素用于清除浮动。因此，无需隐藏任何生成的内容，所需的代码总量也减少了。
> 
> 包括 :before 选择器不是清除浮动所必需的，但它可以防止上边距在现代浏览器中折叠。

# math - 为什么我无法使用 Clojure 代码访问我的 Leiningen 依赖项？

> ID：14105546
> 
> 赞同：1
> 
> 时间：2012-12-31T19:50:59.133
> 
> 标签：math, clojure, read-eval-print-loop, leiningen

在 Clojure 中，如果我想引入 clojure.inspector 函数，我可以这样：

```
(use `[clojure.math.numeric-tower :include (expt)]) 
```

从 REPL，我现在可以评估函数 expt。

但是，在我看来，应该（并且可能是）另一种方法来做到这一点 - 使用 Leiningen 依赖项拉入代码。

我将此行添加到我的 project.clj 中：

```
[org.clojure/math.numeric-tower "0.0.2"] 
```

然后我重新启动 REPL 以引入新的依赖项。为了安全起见，我什至做了“lein deps”（该命令没有输出）。当我尝试评估 expt 时，它给了我一个 RuntimeException，并说它无法解析符号。

如何仅使用 Leiningen 依赖项访问 expt 函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T21:16:23.610

你不能。它不是那样工作的。添加依赖项会将代码放在您的*classpath*上，这仅意味着它可供您使用。为了实际使用命名空间内的东西，您需要使用

```
(require '[the-namespace :refer [the things you want to use]]) 
```

或者

```
(require '[the-namespace :as tn])
(tn/somevar) 
```

或者在 ns 声明中做这些事情中的任何一个（当不在 REPL 中并使用文件时）

```
(ns foo
  (:require [the-namespace :as tn])) 
```

# java - Java：在 ArrayList 中搜索对象中的元素

> ID：14105547
> 
> 赞同：1
> 
> 时间：2012-12-31T19:51:25.527
> 
> 标签：java, object, arraylist, point, indexof

假设我有这个：

```
 // Create arrayList
    ArrayList<Point> pointList = new ArrayList<Point>();

    // Adding some objects
    pointList.add(new Point(1, 1);
    pointList.add(new Point(1, 2);
    pointList.add(new Point(3, 4); 
```

如何通过搜索其参数之一来获取对象的索引位置？~~我试过这个但没有用。~~

 ~~~~```
 pointList.indexOf(this.x(1)); 
```~~  ~~提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T19:54:05.693

您必须自己遍历列表：

```
int index = -1;

for (int i = 0; i < pointList.size(); i++)
    if (pointList.get(i).x == 1) {
        index = i;
        break;
    }

// now index is the location of the first element with x-val 1
// or -1 if no such element exists 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T19:54:47.060

您需要创建一个自定义循环来执行此操作。

```
public int getPointIndex(int xVal) {
    for(int i = 0; i < pointList.size(); i++) {
        if(pointList.get(i).x == xVal) return i;
    }
    return -1; //Or throw error if it wasn't found.
} 
```~~~~

# android - 如何从 Android 模拟器建立套接字连接到同一局域网上的另一台电脑

> ID：14105549
> 
> 赞同：0
> 
> 时间：2012-12-31T19:51:46.103
> 
> 标签：android, sockets, android-emulator

我对 Android 很陌生。我们的局域网正在使用 C 类 IP（192.168.1.x 系列）。我需要在 android 模拟器（服务器）和 java eclipse（eclipse-java-juno-SR1）之间建立套接字连接，它就像一个客户端。当我从“http://developer.android.com”网站获得信息时，每个 Android 模拟器默认都有 10.0.2.15（A 类 IP）。但是我们的局域网在 C 类工作。

用于 Android Emulator 的“PC-1”具有 192.168.1.50 IP，而用于 Eclipse-Java 的另一个“PC-2”具有 192.168.1.55。这是我的设置。

我的工作是，当我从 Android 模拟器（在 PC-1 上运行）向 Java 程序（在 PC-2 上运行）发送字符串命令（通过套接字）时，该 Java 程序应该通过套接字将连续的 jpg 照片发送到 Android 模拟器。

我尝试了很多，但是当我尝试使用套接字时，安装的 apk 应用程序正在关闭此错误：“不幸的是，活动名称>正在关闭”

请帮我解决这个问题......提前谢谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T20:19:47.923

您的应用程序是否具有

```
 <uses-permission android:name="android.permission.INTERNET"></uses-permission> 
```

在您的清单文件中？

您可以将上述行插入清单 xml，

或者你可以去“权限”添加“使用权限”，然后添加“互联网”一项。

我的模拟器使用此权限打开 Web 视图到互联网没有问题，我什至可以通过模拟器中的浏览器访问我网络中的路由器，该浏览器位于某个 192.168... 地址上。

亲切的问候和新年快乐，

卡尔海因茨

# jquery - 按标签和用户名过滤 instagram api 结果

> ID：14105551
> 
> 赞同：7
> 
> 时间：2012-12-31T19:51:52.860
> 
> 标签：jquery, json, api, instagram

我想创建一个从某个标签中提取图像的应用程序，但只能从某个用户名中提取。例如：我希望显示#skullcandysnow 图像，但只显示来自“skullcandy”帐户名称的图像。

这是我拉标签的方式：

```
 $(function() {

 $.ajax({
        type: "GET",
        dataType: "jsonp",
        cache: false,
        url: "https://api.instagram.com/v1/tags/skullcandysnow/media/recent?client_id=d1685ded02da4c5eb2b08632f1256119&access_token=fce470c159274e2b9482976f93fd3435",
        success: function(data) {

            for (var i = 0; i < 10; i++) {

        $(".SC-IG").append("<img class='SC-instagram-image' src='" + data.data[i].images.low_resolution.url +"' /><div class='counts'><img src='images/skullcandyad_04.jpg'><h3 class='ig-likescount'>" + data.data[i].likes.count +"</h3><h3 class='ig-commentscount'>" + data.data[i].comments.count +"</h3></div> ");   

        }
       }

    });
}); 
```

你可以在这里查看我正在做的事情：http: [//yobeat.com/zz_testing/yobeatinstagramwidget_v3.html](http://yobeat.com/zz_testing/yobeatinstagramwidget_v3.html)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-09T14:29:18.160

查看用户在他的“弄清楚”网站上提供的代码，解决方案如下：

```
imgLimit = 1000;
// Grab all TAGS of choice
$.ajax({
    type: "GET",
    dataType: "jsonp",
    cache: false,
    url: "https://api.instagram.com/v1/tags/TAG_OF_CHOICE/media/recent?client_id=CLIENT_ID&access_token=ACCESS_TOKEN",
    success: function(data) { 
    // Loop through the data and only add the images that match a certain user ID
        for (var i = 0; i < imgLimit; i++) {
            var usertag = data.data[i].user.id;
            if (usertag === "USER_ID_OF_CHOICE") {
                // Add image to page
                addImage(data.data[i]);
            }
       }
    }
}); 
```

# caching - 是否有减少内核之间交换延迟的最佳实践？

> ID：14105553
> 
> 赞同：1
> 
> 时间：2012-12-31T19:52:02.593
> 
> 标签：caching, synchronization, intel, cpu-cores

我们知道，在今天的英特尔处理器中，内核之间的共享是通过缓存 L3。L3 缓存部分之间的交换是在环总线上（修改后的 QPI），因此延迟越大，彼此的核心越远（在环上）。是否有减少内核之间交换延迟的最佳实践？

一个例子：我们在单个进程中组合了少量数据交换的线程。然后操作系统会将同一进程的所有线程放置在相邻的内核中。

# php - SVG XML 右对齐并拉伸以适合

> ID：14105555
> 
> 赞同：1
> 
> 时间：2012-12-31T19:52:52.840
> 
> 标签：php, svg

我正在使用 TCPDF，特别是 ImageSVG() 函数将一些文本放入框中。我试图使它正确，但我似乎无法正确。我还需要它来拉伸内部的文本，使其适合包含的矩形。到目前为止，我有这个代码：

```
$pdf->ImageSVG('@<svg width="'.$line4_w.'px" height="'.$line4_h.'px" version="1.1"
     viewBox="0 0 '.$line4_w.' '.$line4_h.'" preserveAspectRatio="none"
     xmlns="http://www.w3.org/2000/svg">
  <rect x="0" y="0" width="'.$line4_w.'" height="'.$line4_h.'" 
        fill="'.$bgcolor.'" />
  <!-- A text string that spans most of the viewport -->
  <text x="40" y="50" font-size="40" font-family="Verdana" style="fill:'.$color_select_text_main.'" >'.$content.'</text>
</svg>', $x=$line4_x+$text_x, $y=$line4_y, 0, 0, $svgLink = '', $svgAlign = 'R', $svgPalign = '', $svgBorder = 0, $svgFits = true); 
```

宽度和高度值是可变的，内容字符串也是如此。

我已使用此处的代码作为起点：

[http://www.w3.org/TR/SVG/coords.html#ExampleViewBox](http://www.w3.org/TR/SVG/coords.html#ExampleViewBox)

但是我的问题基本上是当我更改$content的字符串长度故意溢出容器时，文本根本没有缩小，剩下的文本只是被截断了。

关于理由，我尝试使用`text-anchor`（文本元素的）属性，将其设置为结束，它基本上似乎只是将它完全放在视口之外。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T16:36:38.223

我很确定我的解决方案不是最有效的，但我放弃了这种方法，用 ImageMagick 制作了图像，然后只使用了 TCPDF 的 Image() 功能。

ImageMagick 的转换和标签功能确实能够比我对文本定位和渲染所需的更多。不确定这个问题是否值得保留，但也许它会在未来帮助某人。

# php - cURL Paypal IPN 脚本不工作

> ID：14105560
> 
> 赞同：0
> 
> 时间：2012-12-31T19:53:29.657
> 
> 标签：php, curl, paypal, paypal-ipn

我一直在试图弄清楚我的 ipn 脚本有什么问题。我尝试了许多不同的方法，也尝试了 fsockopen，但我没有让它工作。现在我正在使用 cURL，但它仍然无法正常工作。我已经安装了 cURL，它应该可以正常工作。

我的脚本（只是一个简单的例子，我删除了一些仅用于测试的检查）：

```
<?php
$ACTIVE_CONNECTION = mysql_connect('127.0.0.1', 'mysqluser', 'mysqlpassword') or die("Could not connect to server.");
mysql_select_db('mysqldb', $ACTIVE_CONNECTION) or die("Could not connect to database.");

$tid = $_GET['tx'];
$auth_token = "aqiopfsawdaisytrgkl";

$url = "https://www.sandbox.paypal.com/cgi-bin/webscr";

$post_vars = "cmd=_notify-synch&tx=" . $tid . "&at=" . $auth_token;

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $post_vars);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($ch, CURLOPT_TIMEOUT, 15);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_HEADER, false);
curl_setopt($ch, CURLOPT_USERAGENT, 'cURL/PHP');

$fetched = curl_exec($ch);

$lines = explode("\n", $fetched);
$keyarray = array();
if (strcmp ($lines[0], "SUCCESS") == 0) {
for ($i=1; $i<count($lines);$i++){
list($key,$val) = explode("=", $lines[$i]);
$keyarray[urldecode($key)] = urldecode($val);
}
// check the payment_status is Completed
// check that txn_id has not been previously processed
// check that receiver_email is your Primary PayPal email
// check that payment_amount/payment_currency are correct
// process payment
$payment_amount = $keyarray['mc_gross'];
$payment_status = $keyarray['payment_status'];
$payment_currency = $keyarray['mc_currency'];
$txn_id = $keyarray['txn_id'];
$receiver_email = $keyarray['receiver_email'];
$payer_email = $keyarray['payer_email'];
$username = mysql_real_escape_string($keyarray['custom']);

    if ($payment_status == 'Completed'){
            mysql_query("UPDATE `users` SET vip = '1' WHERE `username` = '".$username."'");
        }
}
else if (strcmp ($lines[0], "FAIL") == 0) {
// manual investigation here
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T21:55:38.090

试试这个来测试 Sanbox IPN

[https://developer.paypal.com/cgi-bin/devscr?cmd=_ipn-link-session](https://developer.paypal.com/cgi-bin/devscr?cmd=_ipn-link-session)

和

代替

```
if (strcmp ($lines[0], "SUCCESS") == 0) { 
```

和

```
if (strcmp ($lines[0], "SUCCESS") == 0 || 1 == 1) { 
```

# c++ - 在 C++ 中使用 STL 创建邻接列表的有效方法是什么？

> ID：14105565
> 
> 赞同：2
> 
> 时间：2012-12-31T19:54:13.253
> 
> 标签：c++, list, graph, stl, vector

我目前使用如下向量的向量：

```
typedef pair<int, int> vertex;
vector < vector<vertex> > adj_list(n); // n is number of vertices

// Input graph
for (int i = 0; i < edges; i++ )
{
   cin >> source >> target >> weight;
   vertex v(target, weight);
   adj_list[source].push_back(v);
} 
```

是列表的向量，即。

```
vector < list<vertex> > adj_list(n); 
```

更好的选择？如果是，为什么？我主要关心的是有效地创建邻接列表，并能够快速读取连接到特定顶点的所有顶点，以实现 Dijkstra 算法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T20:15:48.523

您的需求是快速插入和快速迭代。`vector<vector<T> >`渐近地，和之间没有区别`vector<list<T> >`：

*   `list<T>`是一个双向链表，因此每次插入都需要`O(1)`时间，而迭代`O(1)`每个元素都需要时间。
*   `vector<T>`是一个数组，其实现方式是每次插入都需要`O(1)`（摊销）时间[1]，并且`O(1)`每个元素的迭代需要时间。

操作的常量可能不同，但这是您必须通过分析找出的。

然而，空间效率将有利于`vector<vector<T> >`，因为其中的每个元素`vector<list<T> >`也带有一个向前和向后指针。因此，您可能想要使用`vector<vector<T> >`，但要避免在常见情况下重新分配（以节省时间），但不要保留太多（以节省空间）。

对于外向量，你可以直接调用[`.reserve(n)`](http://www.cplusplus.com/reference/vector/vector/reserve/)它，其中`n`是图中的顶点数。

对于内部向量，它有点难，它实际上取决于您的数据如何输入到这个过程中。

* * *

[1] 的实现`vector<T>`每次重新分配时都应使其容量翻倍，因此重新分配所花费的时间为`O(1+2+4+...+n/4+n/2+n) = O(n(1/n+2/n+4/n+...+1/4+1/2+1)) <= O(1+1/2+1/4+...)) = O(2n)`. 如此分布在`n`元素上，插入需要`O(1)`（摊销）时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T20:10:21.703

为此，我将使用 std::deque<>，因为您很可能不需要从中间删除元素（这就是为什么有人想要使用 std::list<> 的原因）。它应该比 std::vector<> 或 std::list<> 更有效。拥有连续的内存（向量）和可移动的项目（列表）是有代价的——向量和指针取消引用/列表分散内存的代价高昂的调整。

另见：[http ://www.gotw.ca/gotw/054.htm](http://www.gotw.ca/gotw/054.htm)

请注意，如果您的目标是算法竞赛，您可能会惊讶于这种基于 STL 的数据结构可以占用多少内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-24T10:59:47.603

为图创建邻接列表的最佳方法是使用“前向列表”（考虑您的 C++ 语言）。如需更多参考，请访问[https://www.geeksforgeeks.org/forward-list-c-set-1-introduction-important-functions/](https://www.geeksforgeeks.org/forward-list-c-set-1-introduction-important-functions/)

请阅读以下代码以了解“转发列表”的说明注意：- 在阅读代码之前，请正确理解 STL 库为“转发列表”提供的实用函数。

```
/* The code has been designed to give output only if ENTER key is pressed, 
before that it'll keep 
recieving inputs from the user. So provide all your inputs in one line 
seperated by whitespaces. */

                      /* This is the implementation of DFS */

#include<iostream>
#include<forward_list>
using namespace std;

class graph{
    private:
        int noOfVertices;
        forward_list<int> *adj;
        void dfsUtil(int v, bool *visited);
    public:
        graph(int v);
        void addEdge(int s, int d);
        void dfs(int startVertex);
};

graph::graph(int v){
    noOfVertices = v;
    adj = new forward_list<int>[noOfVertices];
}

void graph::addEdge(int s, int d){
    adj[s].push_front(d);       
}

void graph::dfs(int startVertex){
    bool *visited = new bool[noOfVertices];

    for(int i = 0 ; i < noOfVertices ; i++){
        visited[i] = false;
        adj[i].reverse();
    }

    dfsUtil(startVertex, visited);
}

void graph::dfsUtil(int v, bool *visited){
    forward_list<int>::iterator i; 
    visited[v] = true;
    cout << v << " ";

    for(i = adj[v].begin() ; i != adj[v].end() ; i++){
        if(!visited[*i])
            dfsUtil(*i, visited);
    } 
}

int main(){
    int v, s, d;
    cin >> v;
    graph g(v);

    while(cin.peek() != '\n')
    {
        cin >> s >> d;
        g.addEdge(s, d);
    }

    g.dfs(2);
} 
```

# ios - 在 ios 应用程序中保存和查看图像

> ID：14105570
> 
> 赞同：0
> 
> 时间：2012-12-31T19:55:08.283
> 
> 标签：ios, xcode, image, ipad, sqlite

我刚开始开发一个 ios 应用程序，就像 Contact 一样。它包括姓名、生日、组（学校、工作）、血型、图像.. 等。

在那里，其他数据可以通过键入来插入。但是，图像可以来自拍照，从 facebook 下载.. 等。

将图像输入 xcode 是不可能的。Bcoz，另一个图像可以一次又一次地出现。

我应该怎么做？请给我建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-11T08:38:15.983

您只需将 libSqlite3.dylib 添加到 Linked FrameWork 和 Lilbraries 并在 .h 文件中声明数据库变量

```
 //Database Variables
   @property (strong, nonatomic) NSString *databasePath;
   @property (nonatomic)sqlite3 *contactDB; 
```

拖放 UIImageView 和名称...我声明为 imgView。

转到 .m 文件，您只需复制并粘贴该代码

```
- (void)viewDidLoad
 {
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.

NSString *docsDir;
NSArray *dirPaths;

// Get the documents directory
dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
docsDir = dirPaths[0];

// Build the path to the database file
_databasePath = [[NSString alloc] initWithString: [docsDir stringByAppendingPathComponent: @"images.db"]];
//docsDir   NSPathStore2 *  @"/Users/gayathiridevi/Library/Application Support/iPhone Simulator/7.0.3/Applications/B5D4D2AF-C613-45F1-B414-829F38344C2A/Documents"  0x0895e160
NSFileManager *filemgr = [NSFileManager defaultManager];

if ([filemgr fileExistsAtPath: _databasePath ] == NO)
{
    const char *dbpath = [_databasePath UTF8String];

    if (sqlite3_open(dbpath, &_contactDB) == SQLITE_OK)
    {
        char *errMsg;
        const char *sql_stmt = "CREATE TABLE IF NOT EXISTS IMAGETB (ID INTEGER PRIMARY KEY AUTOINCREMENT,URL TEXT UNIQUE, IMAGE BLOB)";

        if (sqlite3_exec(_contactDB, sql_stmt, NULL, NULL, &errMsg) != SQLITE_OK)
        {

            NSLog( @"User table Not Created Error: %s", errMsg);
        }
        else
        {
            NSLog( @"User table Created: ");
        }
        sqlite3_close(_contactDB);
    }

    else {

        NSLog( @"DB Not Created");
    }
 }
 [self saveImage];
 [self showImage];   
 }

- (void)saveImage
{

sqlite3_stmt    *statement;
const char *dbpath = [_databasePath UTF8String];

if (sqlite3_open(dbpath, &_contactDB) == SQLITE_OK)
{

    NSString *insertSQL=@"INSERT INTO IMAGETB(image) VALUES(?)";

    if(sqlite3_prepare_v2(_contactDB, [insertSQL cStringUsingEncoding:NSUTF8StringEncoding], -1, &statement, NULL)== SQLITE_OK)
    {

        UIImage *image = [[UIImage alloc] initWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:@"https://lh6.googleusercontent.com/-vJBBGUtpXxk/AAAAAAAAAAI/AAAAAAAAADQ/nfgVPX1n-Q8/photo.jpg"]]];
        NSData *imageData=UIImagePNGRepresentation(image);
        //sqlite3_bind_text(statement, 1, [@"" UTF8String], -1, SQLITE_TRANSIENT);
        sqlite3_bind_blob(statement, 1, [imageData bytes], [imageData length], SQLITE_TRANSIENT);
        NSLog(@"Length : %lu", (unsigned long)[imageData length]);

    }

    if (sqlite3_step(statement) == SQLITE_DONE)
    {
        NSLog( @"Insert into row id %lld",(sqlite3_last_insert_rowid(_contactDB)));
    }
    else {

        NSLog( @"Error IN INSERT" );
    }
    sqlite3_finalize(statement);
    sqlite3_close(_contactDB);
  }  
 }

- (void)showImage
{

sqlite3_stmt    *statement;
const char *dbpath = [_databasePath UTF8String];
int i = 1;
if(sqlite3_open(dbpath,&_contactDB)==SQLITE_OK)

{
    NSString *insertSQL = [NSString stringWithFormat:@"Select IMAGE FROM IMAGETB WHERE ID = %d",i];
    if(sqlite3_prepare_v2(_contactDB,[insertSQL cStringUsingEncoding:NSUTF8StringEncoding], -1, &statement, NULL) == SQLITE_OK) {
        while(sqlite3_step(statement) == SQLITE_ROW) {

            int length = sqlite3_column_bytes(statement, 0);
            NSData *imageData = [NSData dataWithBytes:sqlite3_column_blob(statement, 0) length:length];

            NSLog(@"Length : %lu", (unsigned long)[imageData length]);

            if(imageData == nil)
                NSLog(@"No image found.");
            else
                _imgView.image = [UIImage imageWithData:imageData];
            NSLog(@"image found.");
        }
    }
    sqlite3_finalize(statement);
}
sqlite3_close(_contactDB);
} 
```

它是我的代码。您可以通过更改 -(void)showImage 函数中的 i 值来修复后退和前进按钮以获取详细信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T20:08:20.240

关于拍照或从你的库中抓取，请参阅[UIImagePickerController 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html)和[iOS 的相机编程主题](http://developer.apple.com/library/ios/#documentation/AudioVideo/Conceptual/CameraAndPhotoLib_TopicsForIOS/Introduction/Introduction.html#//apple_ref/doc/uid/TP40010400)。要从 Facebook 抓取照片，您应该参考它的[API](https://developers.facebook.com/ios/)，因为那是完全不同的鱼。

# java - Mac 10.8 上的 Eclipse - 安装了 1.7.0 JRE / JDK，但 Eclipse 无法启动

> ID：14105575
> 
> 赞同：25
> 
> 时间：2012-12-31T19:55:37.813
> 
> 标签：java, eclipse, macos

*   从 Oracle 及其安装程序包安装 Java SE 1.7.0u10

*   下载并解压 Eclipse Juno (4.2.1)

*   双击 Eclipse 紫色图标并获得带有错误消息的 OS X 警报提示：

> 要打开“Eclipse”，您需要一个 Java SE 6 运行时。您现在要安装一个吗？

*   （在终端）`which java`-`/usr/bin/java`

*   `ls -l /usr/bin/java`-`/usr/bin/java -> /System/Library/Frameworks/JavaVM.framework/Versions/Current/Commands/java`

*   （在 Finder 中）双击 eclipse 别名（解压下载时包含） - 终端启动，`/Applications/Eclipse/Eclipse.app/Contents/MacOS/eclipse ; exit ;`并且 Exclipse 在没有 OS X 警报提示的情况下启动。

我尝试修改 Eclipse 应用程序包 plist 以将 -vm 键指向 /System/Library/Frameworks/JavaVM.frameworks/Versions/Current/Commands/java，但我觉得我可能不应该这样做。 `

我想知道如何通过双击应用程序包来启动 Eclipse。让我烦恼的是一件小事......：o）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-12-05T18:52:53.393

最好的答案是修复 Java 7 安装，如下所示： [https](https://stackoverflow.com/a/19594116)
://stackoverflow.com/a/19594116操作简单，我已经确认它适用于 Mavericks。通过此修复，您可以像往常一样从启动板启动您的应用程序。如果升级 JDK，则必须将修复重新应用于新安装。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-10-25T03:30:12.257

我安装了 JDK 7，我通过从终端而不是 finder 运行 eclipse 解决了 eclipse Kepler 的这个问题。

```
./eclipse 
```

只是想分享。

**更新 1**

为了完整起见，如果您也想从 Finder 运行它，您可以将 ./eclipse 命令包装到 .command 文件中并从 Finder 运行它（这样您就不必打开终端）

以下几行应该可以完成这项工作（不要忘记将“your-full-eclipse-path”替换为您机器上的 eclipse 路径）

```
#!/bin/sh
/your-full-eclipse-path/eclipse 
```

之后，给刚刚创建的 eclipse.command 文件赋予执行权限

```
chmod +x eclipse.command 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-02T21:29:26.953

我在[Ask Different上找到了答案](https://apple.stackexchange.com/a/58841)

这是一个丑陋的黑客，但完美无缺。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-05-07T08:41:32.717

发布在此页面上：[仅使用 Java 7 的 Mountain Lion](https://apple.stackexchange.com/questions/58203/mountain-lion-with-java-7-only/58841#58841)

要欺骗 OS X 接受 Java 7 而不是建议安装 Java 6，一个简单的符号链接就足够了：

> sudo mkdir /系统/库/Java/JavaVirtualMachines
> 
> sudo ln -s /Library/Java/JavaVirtualMachines/1.7.0.jdk /System/Library/Java/JavaVirtualMachines/1.6.0.jdk

大多数 Java 程序都可以在不需要安装 Java 6 的情况下运行这个小技巧。OS X 的 Java Preferences（可能还有其他一些）不会因为它似乎在启动时明确检查 JVM 的版本。

上面的脚本可以解决我的问题。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-12-31T20:58:52.440

希望您使用 64 位的 Java SE 1.7.0 并建议以下内容。

1.  转到 Eclipse->首选项...->Java->已安装的 JRE
2.  单击添加...
3.  选择标准虚拟机
4.  粘贴`/Library/Java/JavaVirtualMachines/1.7.0.jdk/Contents/Home`到**JRE 主页**
5.  将 JRE 名称更改为有用的名称，例如 Java SE 7
6.  点击完成
7.  选中新创建的 JRE 旁边的复选框。

您将需要重新启动。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-10-24T06:35:42.717

你能想象吗？即使您已经安装了 jdk 1.7，您也必须安装 JDK 1.6 才能正常运行 Eclipse，并正确设置 JAVA_HOME。

要解决您的问题，您只需要从[http://support.apple.com/kb/DL1572?viewlocale=en_US](http://support.apple.com/kb/DL1572?viewlocale=en_US)下载 jdk1.6并安装它，稍后您就可以运行 eclipse，您可以设置JAVA_HOME 到JDK1.7，你就可以从eclipse“Preferences”中找到JDK1.7。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-02-13T21:59:50.980

对于它的价值，Eclipse 团队似乎已经通过用基于 CFBundleCreate() 的方法替换他们基于 dlopen() 的方法来解决它：[https ://bugs.eclipse.org/bugs/show_bug.cgi?id= 411361](https://bugs.eclipse.org/bugs/show_bug.cgi?id=411361)

如果有人在启动 Java 的代码中遇到同样的问题并且不想诉诸 Apple 专用 API，我发现了一个更简单的解决方法：在 dlopen()ing $JRE_HOME/lib/server/libjvm.dylib 之前，使一定要打开 dlopen() $JRE_HOME/lib/jli/libjli.dylib。然后它不会要求安装 Java 6。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-03-14T01:59:42.080

所有这些黑客都不适用于 mac Mavericks，但是在[这里](https://stackoverflow.com/questions/19563766/eclipse-kepler-for-os-x-mavericks-request-java-se-6)找到了一个简单有效的解决方案， 它对我很有帮助。

**注意：**此解决方案的一个缺点是当您使用“java -version”命令检查您的 java 版本时，它将读取 Java 1.6

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-08-25T08:18:59.133

打开`/Library/Java/JavaVirtualMachines/jdkXXXXX.jdk/Contents/Info.plist`

设置（`<string>BundledApp</string>`很有用！）：

```
<key>JVMCapabilities</key>
<array>
　　<string>JNI</string>
　　<string>BundledApp</string>
　　<string>WebStart</string>
　　<string>Applets</string>
　　<string>CommandLine</string>
</array> 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-03-20T12:50:37.567

在设置新的 mac 并尝试运行仅安装 Java SE 7 的 eclipse 4.2.2（作为 JDK 7u17 的一部分）时，我收到了完全相同的消息。

为了能够成功启动 Eclipse，我必须先让 OSX 下载并安装 Apple 的 Java SE 6 运行时，然后再安装最新的 JDK。

安装JDK后，命令`java -version`正确显示：

```
java version "1.7.0_17"
Java(TM) SE Runtime Environment (build 1.7.0_17-b02)
Java HotSpot(TM) 64-Bit Server VM (build 23.7-b01, mixed mode) 
```

试图以相反的方式解决问题并没有奏效——即按照消息中的建议在安装 Java SE 6 之前先安装 JDK 7u17。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-02-23T16:24:52.660

几天前我遇到了完全相同的问题，今天我解决了。刚刚安装了这个[http://support.apple.com/kb/dl1572](http://support.apple.com/kb/dl1572)

之后，当我打开 Eclipse 时，OSX 安装了一些 java 更新并通过 Eclipse.app 打开 Eclipse 开始工作。

希望它也适用于你。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-06-05T14:30:07.667

如果您只想安装 Java 6 JDK（没有 Java 7 JDK/JRE，只有没有 Java 6 JRE），请安装 Apple OSX Java DMG（在撰写本文时，这是[http://adcdownload.apple.com/ Developer_Tools/java_for_os_x_2013003_developer_package/java_for_os_x_2013003_dp__11m4406.dmg](http://adcdownload.apple.com/Developer_Tools/java_for_os_x_2013003_developer_package/java_for_os_x_2013003_dp__11m4406.dmg)）。

您仍然无法启动 Eclipse。*在/System/Library/Java*下创建一个目录*JavaVirtualMachines*。然后在*/Library/Java/JavaVirtualMachines*处创建 java 版本文件夹的别名，并将别名重命名为*1.6.0.jdk*并将该别名复制到*/System/Library/Java/JavaVirtualMachines/*

 ***完成后，您将在 /System/Library/Java/JavaVirtualMachines/1.6.0.jdk 有一个别名*，*指向 */Library/Java/JavaVirtualMachines/1.6.0_XX-XXX-XXX.jdk* 的 Java 安装目录

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-10-25T19:44:28.003

1.  从 Sun 安装最新的 JDK，它安装到`/Library/Java/JavaVirtualMachines/`，例如`/Library/Java/JavaVirtualMachines/jdk1.7.0_40.jdk`

2.  `sudo mkdir /System/Library/Java/JavaVirtualMachines`

3.  `sudo ln -s /Library/Java/JavaVirtualMachines/jdk1.7.0_40.jdk/ /System/Library/Java/JavaVirtualMachines/1.6.0.jdk`

========= 这个技巧曾经在 Mountain Lion 上工作过，但在 Maverick 10.9 上却不行 ============

在 Maverick 上再试一次，它不再起作用了。我还尝试更改 eclipse app plist 和 eclipse.ini （通过添加 -vm 或 ），也不起作用。

有人认为这是由使用 Apple 1.6 appbundler 而不是 Oracle java7 appbundler 准备的 Eclipse 二进制文件引起的：[应用程序在 Mac OS X 上使用 Apple 的 Java 6 而不是 Oracle 的 Java 7？](https://stackoverflow.com/questions/14806709/application-is-using-java-6-from-apple-instead-of-java-7-from-oracle-on-mac-os-x/15271448#15271448)

现在，请从命令行键入 eclipse，它可以在 JAVA_HOME 设置为 Java 7 时正常工作（/usr/libexec/java_home 命令会告诉你）

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2013-10-29T21:43:26.763

# 如何让 Eclipse 在 OS X 10.9 Mavericks 上运行

在 Mavericks 升级后尝试启动各种 Eclipse 版本会弹出一个对话框，其中包含以下消息：

> 要打开“Eclipse.app”，您需要 Java SE 6 运行时。您现在要安装一个吗？

![在此处输入图像描述](../Images/3e7fc84f080985b8b9b36c2861ad04f9.png)

事实证明，Java 7 在 OS X 10.9 中默认被禁用。
这很容易验证如下：

```
$ java --version
No Java runtime present, requesting install. 
```

**解决方案**是从 Apple 支持安装支持的最新 Java 版本：[Java for OS X 2013-005](http://support.apple.com/kb/DL1572) ( [http://support.apple.com/kb/DL1572](http://support.apple.com/kb/DL1572) )
截至 2013 年 10 月 15 日，这将是 Java SE 6 1.6 .0_65。
发布日期：2013 年 10 月 15 日
文件大小：63.98 MB

安装后，Eclipse 将按预期从 Dock、Finder 或终端运行，无需任何技巧、黑客或变通方法。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2013-11-06T14:28:28.117

我想用 Java 7 运行 Eclipse。因为我有几个没有它就无法工作的插件。对我来说，这两种解决方案都不适用于 10.9，但我找到了一种解决方法。主要思想是您使用 java -jar**启动器**.jar 启动 eclipse 并提供一些神奇的属性，然后它就会启动。这个人在对我有用的评论中提供了命令行脚本：

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=411361#c25](https://bugs.eclipse.org/bugs/show_bug.cgi?id=411361#c25)

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2014-03-21T06:49:24.100

我发现了同样的问题（Mac OS X 10.9.2、Java 1.7.0_53b13、Eclipse Kepler）。解决方法很简单：

1.  在 Finder 中查找可执行文件（CMD+单击 Dock 中的 Eclipse 图标）
2.  从 Dock 中删除图标
3.  CTRL+单击 Finder 中的可执行文件
4.  ALT+Open（允许执行未签名的应用程序）
5.  Eclipse正常打开没有任何问题
6.  将程序重新拖到 Dock 上

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2015-02-16T20:31:47.290

我遇到了这个问题，发现我的 Mac 上没有安装 JDK。一旦我这样做了，Eclipse 就会正常启动。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2016-01-24T16:58:25.560

我有同样的问题。

首先 ; JDK（Java 开发工具包）和 JRE（Java 运行时环境）是不同的东西。被人搞糊涂了

为了安装 eclipse 哟应该安装最新的 JDK。所以

1.  访问 [http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html](http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html)

2.  为您的 Mac 下载合适的版本

3.  您现在可以检查您的版本；不再是 1.6

4.  尝试再次安装eclipse，看看它是否有效。

祝你好运！..***

# c++ - 使用 WinSock 计算延迟

> ID：14105579
> 
> 赞同：-1
> 
> 时间：2012-12-31T19:56:02.290
> 
> 标签：c++, winsock, latency

正如标题所说，如何使用 WinSock 2.2 以毫秒为单位计算客户端和服务器之间的延迟？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T21:26:31.000

我认为，实际上，您只能计算往返时间，除非您对两台服务器都有很好的控制。如果你能以某种方式让对方回复，你可以很容易地计算出从发送数据包 X 到收到数据包 X 的回复的时间。

由于在这种情况下，您可以控制“发送和接收”的时间，因此您不必担心发送具有必须与另一端匹配的时间信息的数据包。

# ruby - 通过瘦（sinatra）访问时，Datamapper 会擦除 sqlite db

> ID：14105580
> 
> 赞同：4
> 
> 时间：2012-12-31T19:56:07.187
> 
> 标签：ruby, sinatra, ruby-datamapper

我正在使用 sinatra + datamapper 构建一个小型 Web 应用程序。该应用程序基于一个 sqlite 数据库，该数据库在 table1 中包含大量记录，而在 table2 中没有任何记录。

我的目录结构如下：

```
total 32
-rw-r--r--   1 atma  staff  1895 31 Δεκ 21:35 application.rb
drwxr-xr-x   6 atma  staff   204 31 Δεκ 21:10 archive/
-rw-r--r--@  1 atma  staff    82 23 Δεκ 23:59 config.ru
drwxr-xr-x  10 atma  staff   340 31 Δεκ 21:38 lib/
drwxr-xr-x   4 atma  staff   136 27 Δεκ 20:01 public/
drwxr-xr-x   6 atma  staff   204 24 Δεκ 00:00 views/
ls -R lib
database.rb       db_scheme.rb      db_status.yaml    fileutils.rb      greek-dict.txt        greekcase.rb      rankmanager.rb    wodb_el_v0.0.1.db 
```

该数据库位于`lib/wodb_el_v0.0.1.db`. 所有这些文件都包含类。

当我通过添加以下行来调用类在 rankmanager.rb 或 database.rb 中运行测试时：

```
Class TestClass
[code goes here]
end
x = TestClass.new
x.test_class_method 
```

当我这样做时，一切都运行良好。当我删除执行测试的行（在其中创建对象并运行方法）并`require_relative`在我的 . 中时`application.rb`，**它会擦除​​数据库而不是使用它**。数据库由`db_scheme.rb`加载的处理`database.rb`。

我`db_scheme.rb`是[要点](https://gist.github.com/4422234)。

知道为什么 datamapper 会这样吗？

附言。我通过手动运行`database.rb`创建数据库的方法将数据加载到数据库。

最好的问候，并提前感谢您的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T20:55:14.093

在你的`db_scheme.rb`你有：

```
version = '0.0.1' # database version
db = 'wodb_el_v' + version + '.db' #db location

DataMapper.setup( :default, "sqlite3:///Users/atma/Dropbox/Programming/Projects/Local/HOWDB/lib/#{db}" )

...

if File.exists?(db)
    DataMapper.auto_upgrade!
else
    DataMapper.auto_migrate! # erases and creates the database. This needs run before any work is done with the database!
end 
```

该行`if File.exists?(db)`检查文件是否存在*于当前工作目录*中，即您启动程序的目录。当您启动 Thin 时，该目录将是父目录，*而不是*`lib`目录，因此将找不到该文件并将运行该文件，从而`auto_migrate!`擦除您的数据。

您应该确保始终处理数据库文件的绝对路径：

```
version = '0.0.1' # database version
db = File.expand_path('../wodb_el_v#{version}.db', __FILE__)

DataMapper.setup(:default, "sqlite3:///#{db}" )

if File.exists?(db) #db is now the absolute path
  # as before... 
```

# java - 如何找到一个数字X，如果我们将最后一位移动到第一位，将等于双倍X

> ID：14105590
> 
> 赞同：5
> 
> 时间：2012-12-31T19:57:59.897
> 
> 标签：java, numbers

“将最后一位移到第一位”的意思是：12345 --> 51234

有人告诉我，一定有答案。我认为它应该很简单，但即使有编码我也找不到任何 X。有人帮忙吗？

```
public static void main(String[] args) {
    for(int i=10; s<99999; i++){
        if(2*i==convertInt(i)){
            System.out.println(i);
        }
    }
}

private static int convertInt(int i) {
    String s = i+"";
    int index = s.length()-1;
    String newS = s.charAt(index) + s.substring(0, index);
    return Integer.parseInt(newS);
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-31T20:17:43.183

我使用了这个功能：

```
public static boolean isMultiple(int x) {
    String g = String.valueOf(x);
    g = g.substring(g.length()-1) + g.substring(0, g.length()-1);
    int y = Integer.parseInt(g);
    if(y == x * 2) return true;
    return false;
} 
```

在这个循环中：

```
int x = 10;
while(!isMultiple(x)) {
    System.out.println(x + ", " + isMultiple(x));
    x++;
} 
```

而且我没有得到高达6.5亿的真实价值。~~我有一种强烈的感觉，这实际上是不可能的。我的猜测是，没有任何数字可以解决这个问题，但我要让它继续运行。~~如果我找到一个，我会编辑这个。

编辑：似乎有这样的数字。往上看。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-31T21:00:11.753

[http://answers.yahoo.com/question/index?qid=20080207083949AAoBkqv](http://answers.yahoo.com/question/index?qid=20080207083949AAoBkqv)

```
Let's start with the number without the two. Call it n.

If you multiply this by 10 and add 2 you would have your first number:
10n + 2

Doubling this you'd have:
20n + 4

This should be equivalent to taking n and putting a two in the front.
n + 2 * 10^d

Here d represents the number of digits.
20n + 4 = n + 2* 10^d

19n + 4 = 2 * 10^d
n = (2 * 10^d - 4) / 19

If you try values of d = 1, 2, 3, etc. you eventually get to n = 17 that gives you an integer result:
n = (2 * 10^17 - 4) / 19
n = (200000000000000000 - 4) / 19
n = 199999999999999996 / 19
n = 10526315789473684

Just put a 2 at the end and you have your answer:

105263157894736842
x 2
---------------------------------
210526315789473684

Edit: I just read Joseph's method and I like it better.

2 / 2 = 1 remainder 0 (carry down 1 to the next division)
1 / 2 = 0 remainder 1 (carry down 10 to the next division)
10 / 2 = 5 remainder 0 (carry down 5 to the next division)
5 / 2 = 2 remainder 1 (carry down 12 to the next division)
12 / 2 = 6 remainder 0 (carry down 6 to the next division)
6 / 2 = 3 remainder 0 (carry down 3 to the next division)
3 / 2 = 1 remainder 1 (carry down 11 to the next division)
11 / 2 = 5 remainder 1 (carry down 15 to the next division)
15 / 2 = 7 remainder 1 (carry down 17 to the next division)
17 / 2 = 8 remainder 1 (carry down 18 to the next division)
18 / 2 = 9 remainder 0 (carry down 9 to the next division)
9 / 2 = 4 remainder 1 (carry down 14 to the next division)
14 / 2 = 7 remainder 0 (carry down 7 to the next division)
7 / 2 = 3 remainder 1 (carry down 13 to the next division)
13 / 2 = 6 remainder 1 (carry down 16 to the next division)
16 / 2 = 8 remainder 0 (carry down 8 to the next division)
8 / 2 = 4 remainder 0 (carry down 4 to the next division)
4 / 2 = 2 remainder 0

You can stop here because you have gotten to a 2\. Now read the digits going down:
105263157894736842

Note: technically you could repeat the process and get a larger number, but it would just be this sequence of digits repeated, e.g.:
105263157894736842 105263157894736842

One final note:
You could even do this the other direction and it might be easier:
The lowest digit is 2\. If you double this, you get 4.
..42
Then double the 4:
..842
Then double the 8 (remember the carry):
..(1)6842
Then double the 6 and add the carry (13), that gets you another carry:
..(1)36842
Double the 3 and add the carry (7)
..736842
Double the 7 (remember the carry)
..(1)4736842
Double the 4 and add the carry (9)
..94736842
Double the 9 and remember the carry
..(1)894736842
Double the 8 and add the carry (17), remember the new carry:
..(1)7894736842
etc.
..(1)57894736842
..(1)157894736842
..3157894736842
..63157894736842
..(1)263157894736842
..5263157894736842
..(1)05263157894736842
Now when you double you get back to the digit 2 so you are done:

Answer:
105263157894736842 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-31T22:13:34.463

比我聪明得多的人想出了这个问题的数学方程式：

[寄生数方程](http://mathforum.org/kb/message.jspa?messageID=380334)

...这为您提供了一种编写非暴力方法的好方法。

（其中 n = 位数，a = 偏移量）

```
txtResult.Text = string.Empty;
for (int n = 2; n <= 100; n++)
{
    if (((ulong)(Math.Pow(10, n)) - 2) % 19 == 0)
    {
        for (ulong a = 1; a <= 9; a++)
        {
            var omgwut = (ulong)((decimal)Math.Pow(10, n+1) / 19m) * a;

            txtResult.Text = string.Format("{0}, {1}", omgwut.ToString(), txtResult.Text);
        }
    }
} 
```

最终为您带来以下结果：

```
473684210526315789, 
421052631578947368, 
368421052631578947, 
315789473684210526, 
263157894736842105, 
210526315789473684, 
157894736842105263, 
105263157894736842, 
52631578947368421 
```

我决定向你提出这个问题的人是虐待狂。:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-13T08:34:25.257

你实际上是用一支铅笔和一张纸来做这件事的。你知道 18 位数字以 2 结尾。所以两倍大的数字必须以 4 结尾。因此，2 之后的数字是 4。下一个数字是 8。你需要知道如何乘以和保留几十个（8X2 = 16, 6X2+1= 13, 3X2+1=7），然后继续直到你得到 2 而上面没有任何 1 标记。这就是我同时找到 210526315789473684 和 105263157894736842 的方式

# jquery - 如何以 24 H 格式制作 JQuery UI TimePicker 格式时间？

> ID：14105598
> 
> 赞同：0
> 
> 时间：2012-12-31T19:58:42.130
> 
> 标签：jquery, jquery-ui, datetimepicker

我想以 24 小时格式格式化时间。在文档中，它说时间格式由`timeFormat, altTimeFormat, and pickerTimeFormat`. 我将以下几行放入`this._defaults`

```
 timeFormat: 'HH:mm',
        altTimeFormat: "HH:mm",
        pickerTimeFormat: "HH:mm" 
```

但是，时间仍以 12 H AM/PM 格式进行格式化，例如：

![](../Images/410a12b6ed2bbaad8f8bf5eae93679bc.png)

实际上，组件内部的时间显示正确，但文本字段中的时间输出不正确。

我用Firebug调试了脚本，发现问题出在下面方法调用的参数上：

```
$.datepicker.formatTime = function(format, time, options) { 
```

在这里，参数`format`的值为`h:mmtt`。

此方法由`_onTimeChange`函数调用：

```
this.formattedTime = $.datepicker.formatTime(o.timeFormat, this, o); 
```

在这里，变量`o`设置为：

```
o = this._defaults, 
```

我已经`timeFormat`在`this._defaults`. 但不知何故，这种情况发生了变化。不知道什么时候改的？

有人可以告诉我以 24 H 格式格式化时间的正确方法吗？

# jquery - 代替 在带有选择的 jQuery 自动完成中

> ID：14105599
> 
> 赞同：0
> 
> 时间：2012-12-31T19:59:01.620
> 
> 标签：jquery, autocomplete, html-lists, jquery-autocomplete, jquery-ui-autocomplete

我想从 jQuery 自动完成中删除 ul 并将其替换为 select-options （常规下拉菜单）。请注意，我想更换吸盘，而不是在其中嵌入下拉菜单，这是我在其他主题上看到的那种解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T21:21:08.133

您是在谈论 jQuery UI 的自动完成小部件吗？

如果是这样，它不支持以您想要的方式自定义输出元素。如果您查看源代码，您会发现其中的`<ul>`and`<li>`元素是非常硬编码的。任何解决方案都需要您试图避免的那种事后黑客攻击。

[https://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.autocomplete.js#L183](https://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.autocomplete.js#L183)

[https://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.autocomplete.js#L535](https://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.autocomplete.js#L535)

当然，你可以只 fork jQuery UI。

# javascript - 是否可以使用 javascript 从 gif（或一系列图像）创建视频？

> ID：14105601
> 
> 赞同：2
> 
> 时间：2012-12-31T19:59:09.327
> 
> 标签：javascript, html, video-processing

是否可以使用“javascript”或任何“网络客户端”方法从 gif（或一系列图像）和一些声音文件中编码视频？

具体来说，我想从一些源图像和声音文件在客户端动态创建一个视频文件。然后我想允许用户下载生成的视频。

我知道我可以使用 ffmpeg 和 PHP 在服务器端从图像和 mp3 创建视频，但我不想使用这种方法，因为这会导致大量服务器 CPU 使用和数据传输。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T21:08:57.413

要实现这一目标，您需要解决几个问题。

*   **获取 GIF 的原始像素。**

    `<canvas>`可能是最好的方法，但我认为它不能很好地与动画 GIF 一起播放。您当然可以阅读一系列图像。

*   **将帧转换为视频流。**

    虽然有[MPEG 音频编解码器的 JavaScript 实现](https://www.google.com/search?q=javascript+mpeg+codec)，但我不知道纯 JS 中的视频编解码器。您可以查看 ffmpeg 源代码并尝试移植它。

    除了实现视频压缩编解码器本身（例如 MPEG-1、-2、H.264 等）之外，您还必须写入某种容器格式（例如，[MPEG PS](http://en.wikipedia.org/wiki/MPEG_program_stream) . )

*   **处理二进制数据。**

    任何视频编解码器的输出都是二进制数据，而 JavaScript 本质上不能很好地处理原始二进制数据。最近的浏览器已经添加了[类型化数组](https://developer.mozilla.org/en-US/docs/JavaScript/Typed_arrays)，以一种内存有效的方式来解决这个缺点。

*   **将视频文件传送给用户。**

    我知道这听起来很傻，因为从技术上讲，以上所有内容都会发生在用户的计算机上，但它们会发生*在浏览器沙箱*中。您现在必须将数据从浏览器中取出并放入用户可以保存到其文件系统的文件中。

    其他人建议使用`data:`URI（base64 编码的数据），但从内存的角度来看，这是一个糟糕的主意，尤其是因为您将处理相对较大的视频数据。此时，您将拥有类型化数组中的视频流。从类型化数组创建一个新[`Blob`](https://developer.mozilla.org/en-US/docs/DOM/Blob)数组并将其传递`Blob`给[`window.URL.createObjectURL`](https://developer.mozilla.org/en-US/docs/DOM/window.URL.createObjectURL). 这样，数据就不需要在内存中重复了；相反，浏览器将从类型化数组“下载”到文件系统。

当然，所有这些都假设用户的机器有足够的内存（RAM）。与普通的视频压缩实现不同，您不能将输出数据流式传输到磁盘；您必须将整个文件保存在内存中。您可能会比您想象的更快地耗尽内存。

因此，虽然这在理论上可能是可行的，但这并不是一个好主意*。*如果它有效，它将非常慢并在对视频进行编码时冻结浏览器（因为 JS 和浏览器 UI 共享相同的单线程）。不过，我想你可以让网络工作者参与进来来解决这个问题。

此时，您几乎必须推出自己的服务器端解决方案或使用某种[服务](https://transloadit.com/)来为您完成繁重的工作。

* * *

或者，您可以在 Chrome 中利用 Google 的[NaCl（本机客户端）](https://developers.google.com/native-client/)来实际进行视频编码。NaCl 允许您在浏览器中运行本机 (C/C++) 代码。

看起来有一个[ffmpeg port](http://code.google.com/p/naclports/source/browse#svn%2Ftrunk%2Fsrc%2Flibraries%2Fffmpeg-0.5)，并且有[API 来做文件 I/O](https://developers.google.com/native-client/devguide/coding/FileIO)。

显然，这只适用于 Chrome。Firefox、Safari 和 IE 不支持 NaCl。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T20:01:01.767

当然。

用于[`setInterval`](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)按计划调用函数，将图像的来源依次更改为下一个。

您可能需要预加载图像，以便在图像源更改时无需等待。

* * *

更新：

您[可以仅使用 JavaScript 从一系列*图像*](https://stackoverflow.com/a/14106076/201952)创建视频文件，但这不太容易或效果很好。我建议您使用一些服务器端处理来生成这样的视频并将音频合并到其中（可能使用[ffmpeg](http://ffmpeg.org/)）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T20:33:25.773

您已经注意到，专门为此目的编写的 C 语言程序会消耗大量的 CPU 周期。是什么让您认为为其他目的而设计的脚本语言完全可以做到这一点？

*不，浏览器上的*Javascript不能直接访问单个像素，当然也不能创建二进制文件。如果您将帧作为单独的图像，则可以将它们加载到`canvas`标签中，以这种方式[访问​​像素](http://svgopen.org/2009/papers/12-Using_Canvas_in_SVG/#d4e152)，将 MPEG 版本计算为整数数组并将其发布回服务器（这会将数组转换为二进制文件），但是哇，那会很慢吗？至少比 ffmpeg 慢 1000 倍。

**编辑**

评论指出我实际上完全错了。尽管如此，我坚持我最初的结论，即这是一个糟糕的想法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-12T18:01:16.277

现在是 2014 年末，我不知道它是在什么时候成为可能的，但现在确实可以将视频变成 gif：http: [//jnordberg.github.io/gif.js/tests/video .html](http://jnordberg.github.io/gif.js/tests/video.html)

通过制作该演示的同一个人的图书馆：[https ://github.com/jnordberg/gif.js](https://github.com/jnordberg/gif.js)

在 Chrome 38 中运行良好，我相信任何其他支持 Web Workers、文件 API 和类型化数组的浏览器。

# python - 函数中对被调用函数所做的列表更改范围

> ID：14105603
> 
> 赞同：0
> 
> 时间：2012-12-31T19:59:59.720
> 
> 标签：python, list, scope

我有两个函数`foo()`和`bar()`，它们使用两个列表`l1`和`l2`。

`foo()``bar()`使用`l1`和`l2`作为参数进行函数调用。

`bar()`改变列表`l1`和`l2`. `foo()`需要知道对列表的这些更改，因此列表由`bar()`.

除了将列表作为参数传递并返回它们之外，还有更好的方法来更新列表`foo()`吗？

```
def bar(l1, l2):
     value=10
     l1.append(value)
     l2.append(value)
     return l1,l2

def foo() :
    list1=[]
    list2=[]
    list1, list2 = bar(list1,list2)

def main():
    foo()

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T20:09:21.543

正如其他人所提到的，因为您正在修改传入列表的内容 -**就地**- 您不需要返回任何内容

```
def func2 (list1,list2):
     value=10
     list1.append(value)
     list2.append(value)

listA = [1,2,3]
listB = [7,8,9]

func2(listA,listB)

print listA
print listB 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T20:16:07.820

从你的描述和评论来看，你的真实`func2`样子是这样的：

```
def func2(list1, list2):
    value = 'a'
    list1.append(value)
    list2.append(value)
    return list1,list2 
```

这会发生变化`list1`并`list2`就位，因此无论谁调用它，都会看到变化。它还返回and ，所以任何调用它的人都*可以*这样使用结果。`list``list2`

所以，在 func1 中：

```
def func1() :
    list1=[]
    list2=[]
    func2(list1, list2)
    print(list1, list2) 
```

您将看到这两个值都是`['a']`.

如果你这样做：

```
(list1,list2) = func2([],[])
print(list1, list2) 
```

您*还将*看到这两个值都是`['a']`.

您实际上不需要（或通常不希望）同时改变值*并*返回它们。只需做一个或另一个：

```
def mutating_func2(list1, list2):
    value = 'a'
    list1.append(value)
    list2.append(value)

def non_mutating_func2(list1, list2):
    value = 'a'
    return list1+[value], list2+[value] 
```

您可以`mutating_func2`在类似的代码中使用`func1`，它只传递两个列表并期望对其进行修改。您可以`non_mutating_func2`在代码中使用类似于顶级代码的代码，它传递两个列表并期望返回两个新列表。两者都是完全合理的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T20:18:23.480

查看您修改后的问题，无需返回列表，它们无论如何都是通过引用传递并将被修改：

```
def func2 (list1,list2):
     value=10
     list1.append(value)
     list2.append(value)

def func1() :
    list1=[]
    list2=[]
    func2(list1,list2)
    print "list1:",list1,"list2:",list2
    func2(list1,list2)
    print "list1:",list1,"list2:",list2
    func2(list1,list2)
    print "list1:",list1,"list2:",list2

def main():
    func1()

if __name__ == '__main__':
    main() 
```

给出：

```
list1: [10] list2: [10]
list1: [10, 10] list2: [10, 10]
list1: [10, 10, 10] list2: [10, 10, 10] 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-31T20:15:53.373

我已将您的代码修改如下：

```
def func2(list1, list2):
     value=10
     list1.append(value)
     list2.append(value)

def func1():
    list1=[]
    list2=[]
    func2(list1,list2) 
```

请注意，`func2`它不会返回任何内容。这不是问题，因为它使用`list.append`，它修改了列表**IN-PLACE**。这意味着当完成执行时，`func2`更改仍然存在。`list1``list2`

另一方面，如果您要 done ，那是在完成执行`list1 = list1 + [5]`后不会持续存在的更改。`func2`

因此，使用上面的代码，即使在执行完成之后，`func1`也会知道对两个列表所做的更改。`func2``func2`

```
In [13]: def func2(list1, list2):
   ....:     value = 'a'
   ....:     list1.append(value)
   ....:     list2.append(value)
   ....:     

In [14]: def func1():
   ....:     myList = []
   ....:     myOtherList = [1]
   ....:     print myList, myOtherList
   ....:     func2(myList, myOtherList)
   ....:     print myList, myOtherList
   ....:     

In [15]: func1()
[] [1]
['a'] [1, 'a']

In [16]: def otherfunc2(list1, list2):
   ....:     value = 'a'
   ....:     list1 = list1 + [value]
   ....:     list2 = list2 + [value]
   ....:     

In [17]: def func1():
   ....:     myList = []
   ....:     myOtherList = [1]
   ....:     print myList, myOtherList
   ....:     otherfunc2(myList, myOtherList)
   ....:     print myList, myOtherList
   ....:     

In [18]: func1()
[] [1]
[] [1] 
```

# java - java中的嵌套if语句

> ID：14105609
> 
> 赞同：-2
> 
> 时间：2012-12-31T20:00:35.997
> 
> 标签：java

我正在处理用户登录页面。我希望管理员可以访问管理员部分，但不能访问普通用户。以下代码有效，但如果管理员以外的用户登录，他们会收到错误的密码错误并被发送到正确的页面。如果允许否定答案和肯定答案，我认为嵌套有问题。对于此事，我将不胜感激。

```
 try {
        String sql="Select * from Users1";
        String host ="jdbc:derby://localhost:1527/Nash";
        String uName = "CON";
        String uPass = "smokes";
        Connection con = DriverManager.getConnection(host, uName, uPass);
        Statement stmt=con.createStatement();
        ResultSet rs = stmt.executeQuery(sql);
        String user= userName.getText();
        String pwd= password.getText();
        while(rs.next()) {
        String uname=rs.getString("User_name");
        String pass=rs.getString("Password");
        String admin1=rs.getString("admin");

if ((user.equals(uname)) && (pwd.equals(pass)))
    { 
    mainPanel.setVisible(true);
    blankContent.setVisible(true);
    adminButton.setEnabled(false);
    receiptContent.setVisible(false);
    memberContent.setVisible(false);
    securityPanel.setVisible(false);
    }

        if ((user.equals(uname)) && (pwd.equals(pass))&&(admin1.equals("y")))
        {
            mainPanel.setVisible(true);
            blankContent.setVisible(true);
            adminButton.setEnabled(true);
            receiptContent.setVisible(false);
            memberContent.setVisible(false);
            securityPanel.setVisible(false);
         }
else 
    {
            JOptionPane.showMessageDialog(null,  "User name and password do"
                    + " not match!","ALERT!", JOptionPane.ERROR_MESSAGE); 

            }   
}   } catch (SQLException ex) {
        Logger.getLogger(program.class.getName()).log(Level.SEVERE, null, ex);
    } 
```

**EDIT** 下面是编辑后的代码链接---> [新的修改后的代码链接](http://pastebin.com/DGg7SB2B)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T20:04:02.727

您需要将您`else`的水平移出一层。代码格式很难判断发生了什么，但 else 在 admin`if`语句中。像这样：

```
if ((user.equals(uname)) && (pwd.equals(pass)))
{ 
    if (admin1.equals("y"))
    {
        // ... admin
    }
    else
    {   
        // ... regular user
    }
}
else 
{
    JOptionPane.showMessageDialog(null,  "User name and password do"
           + " not match!","ALERT!", JOptionPane.ERROR_MESSAGE); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T20:21:50.663

做喜欢

```
if ((user.equals(uname)) && (pwd.equals(pass)))
    { 
    mainPanel.setVisible(true);
    blankContent.setVisible(true);
    receiptContent.setVisible(false);
    memberContent.setVisible(false);
    securityPanel.setVisible(false);
    adminButton.setEnabled(false);
          if(admin1.equals("y"))
                 adminButton.setEnabled(true);

    }

else 
    {
            JOptionPane.showMessageDialog(null,  "User name and password do"
                    + " not match!","ALERT!", JOptionPane.ERROR_MESSAGE); 

            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T21:27:13.037

你做的一切都是正确的，除了你错过了一个导致这个问题的小故障`(From your pastebin code in your comment)`。

您的 while 语句在这里是个大问题。它将继续检查数据库中的所有记录。

`break`获得所需用户后使用。

```
boolean isPass = false;
while(rs.next()){
    // Your user authentication 
    if ((user.equals(uname)) && (pwd.equals(pass)))
    { 
        if (admin1.equals("y")) {
            // do your admin operation
            break;
        } else {   
            // do your non admin operation
            break;
        }
    } else {
        // if authentication fails 
        isPass = true
    }
}
// Outside of while block
if(isPass){
    // if authentication fails show error message
    JOptionPane.showMessageDialog(null,  "User name and password do"
           + " not match!","ALERT!", JOptionPane.ERROR_MESSAGE); 
} 
```

我展示了这个代码片段来展示如何使用 break 并注意你也应该这样做`break`，`else part`否则它将继续为所有那些在身份验证中变为错误的记录显示错误消息`if`。

我会建议从另一种方法获取您的数据库值，并用另一种方法进行身份验证。

# html - IFrame 在 Safari 中不起作用

> ID：14105611
> 
> 赞同：5
> 
> 时间：2012-12-31T20:01:16.820
> 
> 标签：html, iframe, web, safari, mobile-safari

`iframe`我的网页中有一个。它在 FF 和 Chrome 中运行良好，但在 Safari 中运行不正常（我使用的是 Safari 6.0）

这是我的代码：

```
<html>  
    <head>  
        <title>Pengower</title>     
    </head>  
    <body>  
        <div id="container">  
            <iframe name="news" id="news"   
                src="http://www.penapplications.net/ImogenApps/?Pengower:CRM:Pengower_News">  
            </iframe>  
       </div><!--end container div-->  
    </body>  
</html> 
```

有趣的是，如果我访问`src`url 然后访问`iframe`页面，则`iframe`正确显示内容，但如果我只是访问`iframe`页面而不访问`src`url 页面，它不会显示内容。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T20:37:44.507

`iframe`似乎正在重定向到一个[中介页面（`penDummyLogon.aspx)`](https://www.penapplications.net/ImogenApps/penDummyLogon.aspx?qkfjllH)它试图自动将表单提交到最终[页面（`main.aspx`）](https://www.penapplications.net/ImogenApps/main.aspx)并设置一个 cookie。

由于这种设置 cookie 的方法在最近的 Safari 版本中似乎已被阻止，因此用户在没有 cookie 的情况下到达了最终页面。`main.aspx`似乎无法处理丢失的 cookie，因此无法加载其预期内容。

有关此主题的更多信息，请参阅[在 Safari 中的 iframe 中设置第三方 cookie 的技术是否仍然有效？](https://stackoverflow.com/questions/10060820/does-the-technique-for-setting-third-party-cookies-in-iframes-in-safari-still-wo)和[Safari 3rd 方 cookie iframe 技巧不再起作用？](https://stackoverflow.com/questions/9930671/safari-3rd-party-cookie-iframe-trick-no-longer-working/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T22:12:58.167

第三方 cookie 在 safari.but 中不起作用，但在 asp.net 中，您可以通过使用无 cookie 会话来实现这一点。

有关更多信息，请参阅此链接[http://msdn.microsoft.com/en-us/library/aa479314.aspx](http://msdn.microsoft.com/en-us/library/aa479314.aspx)

# c++ - 霍夫曼压缩/解压缩

> ID：14105616
> 
> 赞同：-3
> 
> 时间：2012-12-31T20:01:28.943
> 
> 标签：c++, compression

我正在使用 C++ 在 CPU 上编写 Huffman 压缩/解压缩算法。当我对代码进行计时时，鉴于我已经构建了 Huffman 树，我的代码需要 24 秒来解压缩 100 万个浮点数。我的硬件如下：

带英特尔酷睿 i5、6 GB 内存、64 位操作系统、5.5 Windows 体验指数、2.3GHz 时钟速度的笔记本电脑。

有一些压缩经验的人可以告诉我上面的值是正确的还是我的代码太慢了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T21:35:20.157

你的代码太慢了。即使我假设 8 字节浮点数和 1 的压缩比，这非常保守，几乎每个解码输入位有一千个周期。即使是逐位遍历二叉树，每位也只需要几条指令。还有比逐位更快的方法。

# c# - 在访问多维数组元素时消除临时变量的使用

> ID：14105618
> 
> 赞同：0
> 
> 时间：2012-12-31T20:01:56.213
> 
> 标签：c#, arrays, multidimensional-array, point, indices

有没有办法用一行的坐标来处理数组对象的字段？

我有这个数组：`Tile[,] Tiles`。每当我需要更改其中一个图块并且我事先知道索引时，我都会这样做`Tiles[1, 2] = new Tile(args);`：

但是当我必须计算它们时，它看起来像这样：

```
Point p = GetTargetTileIndices(args);
Tiles[p.X, p.Y].someField = 127; 
```

每次将磁贴的索引存储在临时变量中会让人感到困惑，有时甚至难以阅读。有没有办法让索引作为`Point`或其他东西并在一行中使用目标数组元素？

* * *

**UPD：**我现在很清楚这样做……</p>

```
var tile = GetTile(point);
tile.field = value; 
```

…不改变数组中的瓦片，但是…</p>

```
GetTile(point).field = value; 
```

…做！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T20:13:04.117

创建一个`GetTargetTile`辅助方法......就像你的`GetTargetTileIndices`但`Point`它返回实际的而不是`Tile`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T20:18:34.320

只需编写自己的方法：

```
public static class Extensions
{
    public static T GetValue<T>(this T[,] array, Point point)
    {
        return array[point.X, point.Y];
    }

    public static void SetValue<T>(this T[,] array, Point point, T value)
    {
        array[point.X, point.Y] = value;
    }
} 
```

请注意，如果这里`Tiles`是一个值类型（结构），那么您将从该方法中获取一个副本，因此修改它的一个属性将修改一个副本并且不会有帮助。

使用这种方法，你的代码就变成了：

```
Tiles.GetValue(GetTileIndices()).byte = 8; 
```

# django - django模型查询集

> ID：14105624
> 
> 赞同：0
> 
> 时间：2012-12-31T20:03:37.713
> 
> 标签：django, django-models, django-templates, django-views

模型：

```
class Program (models.Model):
    name = models.CharField(max_length=70)
    add = models.DateTimeField(auto_now=True)

class Subject (models.Model):
    s_name = models.CharField(max_length=50)
    program = models.ForeignKey(Program)
    s_add = models.DateTimeField(auto_now=True) 
```

在数据库中，我已经添加了相同的行，例如：

在 app_program 表中：

```
 id | name      |  add
 1  | Program1  |  some date
 2  | Program2  |  some date
 3  | Program3  |  some date 
```

在 app_subject 中：

```
 id | s_name    | program | add
 1  | subject1  | 1       | some date
 2  | subject2  | 2       | some date
 3  | subject3  | 1       | some date
 4  | subject4  | 2       | some date
 5  | subject5  | 3       | some date 
```

现在在我的模板中，我想在 for 循环中显示数据，如下所示：

```
 1\. Program1
     1\. subject1
     2\. subject3

 2\. Program2
     1\. subject2
     2\. subject4

 3\. Program3
     1\. subject5 
```

我不知道在我的视图和模板中放入什么。我试过了：

```
 from app.models import Program, Subject
    program_all = Program.objects.all()
    subject_all = Subject.objects.all() 
```

然后我将它作为上下文变量等传递给模板，当我在模板中使用它时：

```
 {% for field in program_all %}
      {{ forloop.counter }}. {{ field.name }}
      {% for field2 in subject_all %}
      {{ field2.s_name }}
      {% endfor %}
 {% endfor %} 
```

它只显示每个现有主题的所有程序，我只想看到一个与程序相关的主题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T20:10:31.757

你需要这个：

```
{% for field in program_all %}
  {{ forloop.counter }}.{{ field.name }}
  {% for subject in field.subject_set.all %}
     {{ forloop.counter }}. {{ subject.s_name }}
  {% endfor %}
{% endfor %} 
```

在模型中建立关系后，您也可以[向后跟踪它](https://docs.djangoproject.com/en/dev/topics/db/queries/#following-relationships-backward)。

在这种情况下，对于每个`program`，都有一个`subject_set`与该程序相关的所有主题。在您的视图或 django shell 中，它会是这样的：

```
for p in Program.objects.all():
   print 'The program {} has {} subjects:'.format(p,p.subject_set.count())
   for subject in p.subject_set.all():
       print subject 
```

# objective-c - 试图改变一个 NSString 的文本。不工作

> ID：14105625
> 
> 赞同：-4
> 
> 时间：2012-12-31T20:03:39.013
> 
> 标签：objective-c, xcode, nsstring

我正在尝试使另一个视图中的字符串等于是。我这样做了：

```
reset = @"Yes";
NSLog(@"resetString is %@", reset); 
```

**上面的 NSLog 等于 Yes。**

在我的第二种观点中，它应该检查它是否等于是并做一些事情。

```
ScoreViewController *svc = [[ScoreViewController alloc] init];
    if ([svc.reset isEqualToString:@"Yes"])
    {
        selectedQuestion.questionCompleteOrNot = @"No";
        NSLog(@"resetString is %@", svc.reset);
    }
    else
    {
        selectedQuestion.questionCompleteOrNot = @"Yes";
        NSLog(@"resetString is %@", svc.reset);
    } 
```

上面的两个 NSLog 等于 Null，当它们应该等于 Yes 时，它会对 selectedQuestion.questionCompleteOrNot 属性做一些事情。

有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T20:11:57.840

这将创建您的`ScoreViewController`类的一个新实例：

```
 ScoreViewController *svc = [[ScoreViewController alloc] init]; 
```

我的猜测，您实际上并没有为您的 property 设置默认值`reset`。因此，您可能需要在您`ScoreViewController`的`init:`方法中执行以下操作：

```
- (id)init
{
    self = [super init];
    if (self)
    {
        _reset = @"Yes";
       // set other default values here...
    }
    return self;
} 
```

另外，如果你需要复习 iOS 开发的基础知识，我强烈推荐 Ray Wenderlich 的网站，它有很多高质量的教程：

[http://www.raywenderlich.com/](http://www.raywenderlich.com/)

祝你好运！

**编辑**

顺便说一句，如果`ScoreViewController`实际上是 的子类`UIViewController`，则您可能使用了错误的 init 方法...相反，您可能应该使用`-(id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil`方法...这是`UIViewController`文档的链接，它也应该有所帮助：

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T21:10:37.003

检查您是否在不同的代码块中分配值。（代码块 = 以 {} 开头和结尾）如果您在不同的块中实例化变量或赋值，它将不起作用。

# delphi - 是否可以替换随 Delphi XE3 提供的 Indy 版本？

> ID：14105626
> 
> 赞同：4
> 
> 时间：2012-12-31T20:03:47.180
> 
> 标签：delphi, indy10, delphi-xe3

这在过去出现过，特别是关于 Delphi XE 的参考问题： [是否可以在 Delphi XE 和 DataSnap 中使用 Indy 10.5.8.0？](https://stackoverflow.com/questions/4567127/is-it-possible-to-use-indy-10-5-8-0-in-delphi-xe-and-datasnap) 是否可以使用新的[/不同版本的 Indy 重新编译 Delphi XE 中的 DataSnap 包？](https://stackoverflow.com/questions/6497201/is-it-possible-to-recompile-the-datasnap-packages-in-delphi-xe-with-a-new-differ)

我记得看到在这个问题上取得了一些进展。我现在正在使用 Delphi XE3 并想重新审视这个问题。现在是否可以卸载 XE3 提供的 Indy 版本并将其更新到可用的最新 Indy 版本，而不会弄乱 DataSnap 或 Delphi 附带的任何依赖 Indy 的东西？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-31T20:52:13.143

有关升级 Delphi 预装的 Indy 10 副本的信息，请访问 Indy 网站：

[Indy 10 安装说明](http://www.indyproject.org/Sockets/Docs/Indy10Installation.EN.aspx)

# apache - .htaccess 从 2.2 更改为 2.4，保护目录

> ID：14105628
> 
> 赞同：2
> 
> 时间：2012-12-31T20:04:03.870
> 
> 标签：apache, .htaccess, apache2

我有一台运行 Apache 2.2 的 Web 服务器，并且正在使用 Apache 2.4 启动一个新的服务器。
以下是我在新 2.4 机器上的虚拟主机：

```
<VirtualHost *:80>
        DocumentRoot /var/www/
        ErrorLog /var/log/apache2/error_log
        LogLevel info
        CustomLog /var/log/apache2/access_log combined
        <Directory /var/www/>
                AllowOverride All
                Order allow,deny
                allow from all
        </Directory>
</VirtualHost> 
```

2.2 机器使用默认的 Apache conf。我在2.2机器上成功使用的.htaccess文件如下：

```
AuthName "Htaccess"
AuthUserFile /var/www/.htpasswd
AuthType Basic
Satisfy Any
<Limit GET POST>
        Order Deny,Allow
        Deny from all
        Allow from officeip
        Require valid-user
</Limit> 
```

这使我们的办公室 IP 可以查看内容，其他所有人都必须输入用户名和密码。在 Apache 2.2 上，这按我想要的方式工作。如果您转到服务器地址或目录下的任何脚本，系统会提示您登录。但是，在 2.4 机器上，如果您转到特定脚本，它会要求您登录。

.htaccess 文件在 2.4 中的工作方式是否发生了变化，如果是这样，我怎样才能改变我的方式来做我想做的事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-17T10:38:12.447

根据手册（我在 Apache 网站上搜索`satisfy`并找到了这个链接：[http](http://httpd.apache.org/docs/trunk/upgrading.html#run-time) ://httpd.apache.org/docs/trunk/upgrading.html#run-time ）访问控制系统已经改变。

我相信你现在可以做到：

```
AuthType Basic
AuthName "Htaccess"
# Optional line:
AuthBasicProvider file
AuthUserFile /var/www/.htpasswd
<RequireAll>
    RequireMethod GET POST
    <RequireAny>
        Require ip officeip
        Require valid-user
    </RequireAny>
</RequireAll> 
```

资料来源：

*   [http://httpd.apache.org/docs/trunk/howto/auth.html](http://httpd.apache.org/docs/trunk/howto/auth.html)
*   [http://httpd.apache.org/docs/trunk/mod/mod_authz_core.html#logic](http://httpd.apache.org/docs/trunk/mod/mod_authz_core.html#logic)

# python - 在 django 管理员登录页面上预填用户名和密码输入字段

> ID：14105629
> 
> 赞同：1
> 
> 时间：2012-12-31T20:04:10.203
> 
> 标签：python, django, django-forms

我想为 admin/login.html 上的用户名和密码输入字段设置默认值。我想编辑 login.html 模板，但我不知道如何将默认值添加到来自数据库的输入字段 {{ form.username }} 和 {{ form.password }}。

```
<label for="id_username" class="required">{% trans 'Username:' %}</label> {{ form.username }}
<label for="id_password" class="required">{% trans 'Password:' %}</label> {{ form.password }} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T20:10:23.117

有些人使用 javascript 来放置默认值，但它可以在 django-forms 本身中完成。您可以使用[此处](http://www.djangobook.com/en/1.0/chapter07/)`_initial_`解释的内容。据我所知，有两种方法可以输入初始值......

1.  在调用表单构造函数时，您有两个选项可以填充值：

    `form = UserForm(initial={'username': 'please enter username', 'password':'enter password'})`

2.  在表单定义中设置值：

    `username = forms.CharField(initial='please enter username')`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-05-23T15:04:24.370

尝试这个。您需要做的就是：

```
User Name:{{ form.username }}<br>
Password:{{ form.password }} 
```

# android - 删除图像按钮填充 (Android)

> ID：14105631
> 
> 赞同：8
> 
> 时间：2012-12-31T20:04:24.057
> 
> 标签：android, image, button, padding

我的按钮看起来像横向的顶部图像：

[![截屏](../Images/b6ad5c3e53c74814f5286797bf7b187e.png)](https://i.stack.imgur.com/CkLY4.png)

我希望它看起来像底部图像。

这是我的这些按钮的 .xml 代码。

```
<TableRow
    android:id="@+id/tableRow7"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:weightSum="1.0" >

    <ImageButton
        android:id="@+id/appHome"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight=".5"
        android:background="@null"
        android:contentDescription="Home"
        android:cropToPadding="true"
        android:scaleType="fitEnd"
        android:src="@drawable/home_bar" />

    <ImageButton
        android:id="@+id/menuHome"
        android:layout_weight="0"
        android:background="@null"
        android:contentDescription="Menu"
        android:cropToPadding="true"
        android:scaleType="center"
        android:src="@drawable/menu_bar" />

    <ImageButton
        android:id="@+id/back"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight=".5"
        android:background="@null"
        android:contentDescription="Back"
        android:cropToPadding="true"
        android:scaleType="fitStart"
        android:src="@drawable/back_bar" />

</TableRow> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-31T20:46:30.050

您无法使用默认按钮执行此操作，按钮 9 个补丁中有一个填充（全息和全息前按钮）。[你可以在这里](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/drawable-hdpi/btn_default_focused_holo.9.png?raw=true)看到。

如果您想要没有填充的按钮，那么您必须修改 9 个补丁并创建自己的主题：

```
<style name="myTheme" parent="....">
    <item name="imageButtonStyle">@style/myImageButton</item>
</style> 
```

和你的 imageButtonStyle：

```
<style name="myImageButton" parent="Widget.ImageButton">
    <item name="android:background">@drawable/myCostomizedNinePatchSelectorWithoutPadding</item>
</style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-12T10:13:01.427

创建您自己的 9 个补丁图像以删除边距的更简单的替代方法是将背景设置为空。

例如，将以下内容添加到 res/styles.xml：

```
<style name="MarginlessImageButton" parent="android:Widget.ImageButton">
    <item name="android:background">@null</item>
</style>

<style name="AppTheme" parent="AppBaseTheme">
    <item name="android:imageButtonStyle">@style/MarginlessImageButton</item>
</style> 
```

您现在应该发现所有 ImageButton 的边距为零，无论是在 XML 中定义还是以编程方式创建。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T19:57:45.957

我最终通过将我的 TableLayout 切换到 LinearLayout 来解决这个问题。这是我的代码，除非其他人遇到这个问题：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal"
    android:orientation="vertical">

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:gravity="center" >

    <ImageButton
        android:id="@+id/appHome"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@null"
        android:contentDescription="Home"
        android:scaleType="fitEnd"
        android:src="@drawable/home_bar_grey" />

    <ImageButton
        android:id="@+id/menuHome"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@null"
        android:contentDescription="Menu"
        android:onClick="menuhome"
        android:scaleType="fitCenter"
        android:src="@drawable/menu_bar" />

    <ImageButton
        android:id="@+id/back"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@null"
        android:contentDescription="Back"
        android:scaleType="fitStart"
        android:src="@drawable/exit_bar" />
</LinearLayout> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T21:30:36.697

//删除`android:weightSum`使用宽度为`match_parent`

//给`android:layout_weight="1"`所有的imageButton

//`android:scaleType="fitXY"`用于所有人

```
<TableRow
    android:id="@+id/tableRow7"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    >

    <ImageButton
        android:id="@+id/appHome"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:background="@null"
        android:contentDescription="Home"
        android:cropToPadding="true"
        android:scaleType="fitXY"
        android:src="@drawable/home_bar" />

    <ImageButton
        android:id="@+id/menuHome"
        android:layout_weight="0"
        android:background="@null"
        android:contentDescription="Menu"
        android:layout_weight="1"
        android:cropToPadding="true"
        android:scaleType="fitXY"
        android:src="@drawable/menu_bar" />

    <ImageButton
        android:id="@+id/back"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
       android:layout_weight="1"
        android:background="@null"
        android:contentDescription="Back"
        android:cropToPadding="true"
       android:scaleType="fitXY"
        android:src="@drawable/back_bar" />

</TableRow> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-31T20:11:14.893

在 xml 中使用负填充`ImageButton`来缩小使用的填充。

```
android:paddingLeft="-5dip"
android:paddingRight="-5dip" 
```

请注意，以上只是一个示例……您需要弄乱数字以针对您的特定情况进行调整，以使事情看起来正确。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-09T13:01:25.610

使用`scaleType`属性，你可以看到相同大小的图标`ImageButton`

# haskell - 从完成的第一个线程获取结果

> ID：14105633
> 
> 赞同：6
> 
> 时间：2012-12-31T20:04:41.877
> 
> 标签：haskell

假设我想在 Haskell 的两个单独线程中计算两个长时间运行的进程。但是，我只关心第一个完成的结果。我该怎么做？

示例（伪代码）：

```
thread1 = spark $ long_running some_arg1
thread2 = spark $ long_running some_arg2
result = first_done thread1 thread2 -- Maybe even first_done [thread1, thread2]? 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-31T20:28:29.513

[async](http://hackage.haskell.org/package/async)包执行此操作，现在是[Haskell Platform](http://www.haskell.org/pipermail/haskell-cafe/2012-November/104352.html)的一部分。

```
import Control.Concurrent.Async
import Control.Concurrent (threadDelay)

main :: IO ()
main = do
  x <- async (threadDelay 2000000 >> return 1)
  y <- async (threadDelay 1000000 >> return 2)
  (_, res) <- waitAnyCancel [x, y]
  print (res :: Int) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-31T20:23:27.920

如果你想杀死更长的运行线程，你可以使用：[http ://hackage.haskell.org/package/unamb](http://hackage.haskell.org/package/unamb)

否则，您可以做与 unamb 相同的事情，但忽略 killThread。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-01T12:19:33.320

如果您使用`IO`线程，您还可以使用最新的[parallel-io](http://hackage.haskell.org/package/parallel-io-0.3.3)包，特别是[parallelFirst](http://hackage.haskell.org/packages/archive/parallel-io/0.3.3/doc/html/Control-Concurrent-ParallelIO-Global.html#v%3aparallelFirst)。

# process - TFTP - 在 JSPIN 中模拟数据包丢失，然后超时

> ID：14105635
> 
> 赞同：1
> 
> 时间：2012-12-31T20:05:00.417
> 
> 标签：process, ftp, parallel-processing

我是 SPIN 和 Promela 的初学者。我正在尝试使用 JSPIN 软件模拟 TFTP（普通文件传输协议）。我已经完成了大部分模拟。但是，我遇到了一个问题。对我来说，模拟丢包后发送方或接收方超时是很重要的。我可以通过使用关键字“超时”来模拟超时。但是，这次超时似乎没有像我预期的那样工作。只有在流程中没有其他选择要执行时，此超时才有效。但是，我希望在数据包丢失或数据包重复之后发生的特定时间段后超时工作。因此，我的问题是“如何模拟 SPIN 中的数据包丢失并在超时后跟随它？”

下面是我的代码。

```
mtype {MSG, ACK, RRQ, WRQ};
chan toS = [3] of {mtype, byte, short};
chan toR = [3] of {mtype, byte, short};
bool readRequest=1;
bool writeRequest=1;

proctype Receiver(chan IN,OUT)
{
byte recvbit;
short size;

do 

:: readRequest==1 -> 

atomic{
readRequest=0;
size=512;
OUT ! RRQ, recvbit, size;
}

:: IN ? WRQ, recvbit, size 
-> OUT ! ACK, recvbit, size;

:: IN ? MSG, recvbit, size 
-> 

response:
atomic {

OUT ! ACK, recvbit, size;

if 
  ::size<512 ->
    if
       ::timeout -> break;
       ::IN ? MSG, recvbit, size -> goto response;
     fi
  ::else
fi;
}

:: timeout -> OUT ! ACK, recvbit, size;

od
}

proctype Sender(chan IN,OUT)
{

byte recvbit;
short size=512;
int repeat=0;
do

:: IN ? RRQ, recvbit, size ->
atomic{

  recvbit=(recvbit+1)%8; 
  size= size - (repeat/2); //after 10 times it becomes 511;
  OUT ! MSG, recvbit,size;
  repeat++;
}

:: writeRequest==1 ->
atomic {
writeRequest=0;
size= size - (repeat/10);
OUT ! WRQ, recvbit,size;
repeat++;

}

:: IN ? ACK, recvbit, size -> 
atomic {

if 
  :: size < 512 -> break;
  :: else ->
  recvbit=(recvbit+1)%8; 
  size= size - (repeat/2); //after 10 times it becomes 511;
  OUT ! MSG, recvbit,size;
  repeat++;
fi

}

:: timeout -> 
atomic {
size= size - (repeat/10);
OUT ! MSG, recvbit,size;
repeat++;

}

od
}

init
{
run Sender(toS, toR);
run Receiver (toR, toS);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T18:39:01.130

以下示例使用该`Demon`过程来模拟“丢失”的消息：

```
chan sendChan = [1] of {bit};
chan replyChan = [1] of {bit};

active proctype Sender() {
  bit replyVal, value = 1;
  do
  :: sendChan ! value -> /*Send msg over sendChan*/
    if
      :: replyChan ? replyVal;  /*Wait for a reply*/
      :: timeout;              /*or timeout if none*/   
    fi
  od
}

active proctype Reciever() {
  bit msg;
  do
    :: sendChan ? msg -> replyChan ! 1; /*Reciever gets msg, sends reply*/
  od
}

active proctype Demon() {
  do
    :: sendChan ? _ ; /*Msg stolen from sendChan!*/
  od
} 
```

在此`Demon`过程中，`_`in`:: sendChan ? _ ;`将读取并丢弃通道中的任何消息。

或者，有一个[交替位协议](http://www.imit.kth.se/courses/2G1516/Docs05/Spin/PROMELA/Alternating.Bit.Protocol.promela)（第二个模型）的实现，它在 's do 循环中使用一个额外的选项`Reciever`来模拟消息丢失，而不是一个单独的过程。

# javascript - Javascript，从前到后移动数组中的元素

> ID：14105640
> 
> 赞同：3
> 
> 时间：2012-12-31T20:05:52.353
> 
> 标签：javascript

我有一个包含变量和函数的数组。该数组有 80 个元素长。前 20 个元素在 for 循环中一起使用。循环完成后，前 20 个元素被移到数组的后面，for 循环再次开始。

我正在以这种方式重建数组：

```
var a2=[the array with 80 elements];
run(a2);
function run(array){
  var n=array.slice(0,20); array.splice(0,20);
  var con=array.concat(n); a2=con;
  } 
```

所以我基本上是在索引（新）切片数组，在拼接之后重新索引（原始）数组，在 concat 之后索引一个（新）数组，并在我将其设置为等于 concat 时再次重新索引原始数组。这似乎效率太低了。有没有更成熟的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-31T20:11:28.777

你不需要`slice()`then `splice()`。`Splice()` **返回**删除的元素，所以你只需要这样做：

```
var n = array.splice(0, 20);
a2 = array.concat(n); 
```

* * *

完全清楚的是，JavaScript 的[`splice()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/splice)方法返回**已移除的元素**，而不是剩余的元素。

此外，使用全局变量通常不是一个好主意，但你也有点以一种奇怪的方式混合它们。如果您要保持变量全局，我会将原始变量作为参数传递并从函数返回结果：

```
var a2=[the array with 80 elements];
a2 = run(a2);

function run(array){
    var n = array.splice(0, 20);
    return array.concat(n);
} 
```

或者

根本不要传递它，只需从一开始就引用全局：

```
var a2=[the array with 80 elements];
run();

function run(){
    var n = a2.splice(0, 20);
    a2 = a2.concat(n);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T20:37:18.417

你想要效率，所以这里是：http: [//jsfiddle.net/Hvcbj/](http://jsfiddle.net/Hvcbj/)

```
//This is tightly coupled to work for the first 20 of an 80 length array
function swapTwenty( array )
{
 for( var i = 0, max = 20; i < max; i++ )
 {
  var temp = array[i];
  for( var n = 1, len = 4; n < len; n++)
  {
   var base = (i + 20 * (n - 1)) % 80;
   var tar = (i + 20 * n) % 80;
   array[base] = array[tar];
   array[tar] = temp;
  }
 }
} 
```

**编辑**

我曾假设通过就地交换而不是创建更多数组可以节省时间，但实际上我不这么认为。尽管这在内存上的占用空间可能较小，但它的运行速度并不比公认的答案快。这是一个显示差异的 jsperf：http: [//jsperf.com/array-modifications](http://jsperf.com/array-modifications)

# iphone - 如何在 Storyboard 应用程序中访问从一个场景到另一个场景的变量？

> ID：14105644
> 
> 赞同：1
> 
> 时间：2012-12-31T20:06:38.613
> 
> 标签：iphone, ios

我正在开发一个有 2 个场景的应用程序。在一个场景中，我有一些 UITextFields 来输入数据和一个设置按钮来将该数据分配给变量。一旦他们点击设置按钮，第二个场景就会出现。现在，我想访问从第一个场景到这个场景的变量。我的意思是从第一个视图控制器到第二个视图控制器（segue）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T20:44:28.607

所以你正在使用两个场景。让我们称它们为 ViewController1 和 ViewController2。如果您将数据从一发送到二，则在您的 Viewcontroller1.m 中添加 ViewController2.h。在 ViewController1.m 中，假设您正在获取字符串中的文本字段值`NSString *str;`（确保命名 segue。假设它的名称是“hello”）。在 ViewContoller2 中初始化另一个名为`NSString *str1;`. 您可以通过以下方法将变量传递给 ViewController2，

```
 - (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
    {
if ([[segue identifier] isEqualToString:@"hello"])
{
    NSString *str;
    ViewController2 *vc2 = [segue destinationViewController];
    vc2.str1 = str;
}
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T20:12:26.110

您可以通过覆盖第一个上的 prepareForSegue 将您需要的任何信息从第一个传递到第二个。可以通过 segue.destinationViewController 引用目标控制器。

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender 
```

# c - 是否可以在 C99 中创建“匿名”初始化程序？

> ID：14105645
> 
> 赞同：0
> 
> 时间：2012-12-31T20:06:44.583
> 
> 标签：c, initialization, c99

我正在使用嵌套结构在普通 C 中创建一种“结构继承”。例如，我有一些这样的结构：

```
struct a {
    obj_type type_id;
    int x;
    int y;
}

struct b {
    struct a super;
    char* str;
}

struct c {
    struct a super;
    int* data;
    bool flag;
} 
```

然后我创建一个枚举，如下所示：

```
typedef enum {
    OBJ_TYPE_A,
    OBJ_TYPE_B,
    OBJ_TYPE_C
} obj_type; 
```

这让我可以通过检查各种对象的结构来模拟继承`type_id`，然后转换为相应的结构。我的问题是我希望能够在不手动定义父结构的`x`and属性的情况下初始化这些“子”结构。`y`

基本上，我*可以*像这样初始化一个指针：

```
struct b obj_b = { OBJ_TYPE_B, 0, 0, "foo" };
struct b *ptr_b = malloc(sizeof(struct b));
memcpy(ptr_b, &obj_b, sizeof(struct b)); 
```

但是，我宁愿有一个函数来`a`为我做初始化，所以我可以做这样的事情：

```
struct b *ptr_b = object_create(OBJ_TYPE_B, { "foo" }, sizeof(struct b)); 
```

我已经创建了类似该函数的实现，如下所示：

```
const struct a DEFAULT_A = { OBJ_TYPE_A, 0, 0 };

struct a object_create(obj_type type, void* data_ptr, size_t size) {
    struct a new_obj = malloc(size);
    memcpy(new_obj, &DEFAULT_A, sizeof(struct a));
    memcpy(new_obj + sizeof(struct a), data_ptr, size - sizeof(struct a));
    return new_obj;
} 
```

但是，我不能真正使用它，因为我无法做这样的事情：

```
struct b *ptr_b = object_create(OBJ_TYPE_B, &{ "foo" }, sizeof(struct b)); 
```

有没有办法创建一种“匿名”数据块来传递给函数？还是我必须求助于宏之类的东西来完成这项工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T20:13:26.583

你想要的在 C99 中确实是可能的。例如，上面的工作，你只需要抛弃结构文字：

```
#include <stdio.h>

struct s {
    char *a;
};

void f(struct s *p)
{
    printf("%s\n", p->a);
}

int main()
{
    f(&(struct s){ "hello world" });
    return 0;
} 
```

[有关本文](http://www.drdobbs.com/the-new-c-compound-literals/184401404)主题的更多信息：

> 复合文字产生左值。这意味着您可以获取复合文字的地址，即复合文字声明的未命名对象的地址。只要复合文字没有 const 限定类型，就可以使用指针对其进行修改。

# c++ - std::flush 是如何工作的？

> ID：14105650
> 
> 赞同：97
> 
> 时间：2012-12-31T20:07:47.523
> 
> 标签：c++, stream

有人可以解释一下（最好用简单的英语）是如何`std::flush`工作的吗？

*   它是什么？
*   你什么时候刷新一个流？
*   它为什么如此重要？

谢谢你。

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2013-01-01T01:54:06.510

由于没有回答发生了*什么* `std::flush`，这里有一些关于它实际上是什么的细节。`std::flush`是一个*操纵器*，即具有特定签名的函数。开始简单，你可以考虑`std::flush`有签名

```
std::ostream& std::flush(std::ostream&); 
```

不过，实际情况要复杂一些（如果您有兴趣，下面也会解释）。

流类重载输出运算符采用这种形式的运算符，即有一个成员函数以操纵器为参数。输出运算符使用对象本身调用操纵器：

```
std::ostream& std::ostream::operator<< (std::ostream& (*manip)(std::ostream&)) {
    (*manip)(*this);
    return *this;
} 
```

也就是说，当你`std::flush`用 to an “输出”时`std::ostream`，它只是调用了相应的函数，即以下两条语句是等价的：

```
std::cout << std::flush;
std::flush(std::cout); 
```

现在，`std::flush()`它本身相当简单：它所做的只是调用`std::ostream::flush()`，也就是说，您可以设想它的实现看起来像这样：

```
std::ostream& std::flush(std::ostream& out) {
    out.flush();
    return out;
} 
```

该`std::ostream::flush()`函数在技术上调用`std::streambuf::pubsync()`与流相关联的流缓冲区（如果有）：流缓冲区负责缓冲字符，并在使用的缓冲区溢出或内部表示应与外部目的地，即何时刷新数据。在与外部目标同步的顺序流上，仅意味着立即发送任何缓冲的字符。也就是说， using`std::flush`会导致流缓冲区刷新其输出缓冲区。例如，当数据写入控制台时，刷新会导致字符出现在控制台上。

这可能会提出一个问题：为什么不立即写入字符？简单的答案是写字符通常相当慢。但是，编写合理数量的字符所花费的时间基本上与仅在其中编写一个字符所花费的时间相同。字符的数量取决于操作系统、文件系统等的许多特性，但通常多达 4k 个字符与一个字符几乎同时写入。因此，根据外部目标的详细信息，在发送字符之前使用缓冲区缓冲字符可以极大地提高性能。

以上应该回答你三个问题中的两个。剩下的问题是：什么时候刷新流？答案是：何时应该将字符写入外部目的地！这可能是在写入文件结束时（尽管关闭文件会隐式刷新缓冲区）或在要求用户输入之前（请注意，从as is 'd to`std::cout`读取时会自动刷新）。尽管在某些情况下您可能明确想要刷新流，但我发现它们相当罕见。`std::cin``std::cout``std::istream::tie()``std::cin`

最后，我承诺给出一个完整的`std::flush`实际情况：流是类模板，能够处理不同的字符类型（实际上它们与`char`and一起使用`wchar_t`；让它们与另一个字符一起使用是相当复杂的，但如果你真的下定决心是可行的）。为了能够`std::flush`与流的所有实例一起使用，它恰好是一个具有如下签名的函数模板：

```
template <typename cT, typename Traits>
std::basic_ostream<cT, Traits>& std::flush(std::basic_ostream<cT, Traits>&); 
```

当`std::flush`立即使用它的实例时`std::basic_ostream`并不重要：编译器会自动推导出模板参数。但是，如果没有提及此函数以及促进模板参数推导的东西，编译器将无法推导模板参数。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-12-31T20:11:19.903

默认情况下，`std::cout`是缓冲的，并且只有在缓冲区已满或发生其他一些刷新情况（例如流中的换行符）时才会打印实际输出。有时您想确保打印立即发生，您需要手动刷新。

例如，假设您想通过打印一个点来报告进度报告：

```
for (;;)
{
    perform_expensive_operation();
    std::cout << '.';
    std::flush(std::cout);
} 
```

如果没有冲洗，您将在很长一段时间内看不到输出。

请注意，`std::endl`将换行符插入流中并使其刷新。由于冲洗费用略高，`std::endl`如果不是特别需要冲洗，则不应过度使用。

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2016-06-30T00:23:40.787

这是一个简短的程序，您可以编写它来观察刷新正在做什么

```
#include <iostream>
#include <unistd.h>

using namespace std;

int main() {

    cout << "Line 1..." << flush;

    usleep(500000);

    cout << "\nLine 2" << endl;

    cout << "Line 3" << endl ;

    return 0;
} 
```

运行这个程序：你会注意到它打印第 1 行，暂停，然后打印第 2 行和第 3 行。现在删除刷新调用并再次运行程序 - 你会注意到程序暂停，然后打印所有 3 行同时。第一行在程序暂停之前被缓冲，但由于缓冲区从不刷新，所以直到第 2 行的 endl 调用才输出第 1 行。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-12-31T20:19:42.663

流与某物相连。在标准输出的情况下，它可以是控制台/屏幕，也可以重定向到管道或文件。在你的程序和存储文件的硬盘之间有很多代码。例如，操作系统正在处理任何文件，或者磁盘驱动器本身可能正在缓冲数据以便能够将其写入固定大小的块或只是为了提高效率。

当您刷新流时，它会告诉语言库、操作系统和硬件，您希望到目前为止输出的任何字符都被强制存储。从理论上讲，在“冲洗”之后，您可以将绳索踢出墙壁，并且这些字符仍然可以安全地存储。

我应该提一下，编写操作系统驱动程序的人或设计磁盘驱动器的人可能会随意使用“刷新”作为建议，他们可能不会真正写出字符。即使输出关闭，他们也可能会等待一段时间来保存它们。（请记住，操作系统一次会执行各种操作，等待一两秒来处理您的字节可能更有效。）

所以刷新是一种检查点。

再举一个例子：如果输出到控制台显示，则刷新将确保字符实际上一直到达用户可以看到的位置。当您期待键盘输入时，这是一件很重要的事情。如果你认为你已经向控制台写了一个问题并且它仍然停留在某个内部缓冲区中，那么用户不知道要输入什么答案。因此，这是冲洗很重要的情况。

# r - 在 R 中生成具有多个条件的列值

> ID：14105651
> 
> 赞同：5
> 
> 时间：2012-12-31T20:07:50.347
> 
> 标签：r, loops, multiple-columns

我有一个数据框`z`，我想根据两个旧列的值创建新列`z`。以下是过程：

```
>z<-cbind(x=1:10,y=11:20,t=21:30)
> z<-as.data.frame(z)
>z
    x  y  t
1   1 11 21
2   2 12 22
3   3 13 23
4   4 14 24
5   5 15 25
6   6 16 26
7   7 17 27
8   8 18 28
9   9 19 29
10 10 20 30 
```

# 生成`q`等于列`t`乘以 4 的值的列，如果`x=3`和对于其他值`x`，它等于列的值`t`。

```
for (i in 1:nrow(z)){
  z$q[i]=if (z$x[i]==4) 4*z$t[i] else z$t[i]} 
```

但是，我的问题是我想应用多个条件：

例如，我想得到这样的东西：

```
(If x=2, q=t*2; x=4, q=t*4; x=7, q=t*3; for other it is equal to t) 

> z
   x  y  t  q
1   1 11 21 21
2   2 12 22 44
3   3 13 23 23
4   4 14 24 96
5   5 15 25 25
6   6 16 26 26
7   7 17 27 81
8   8 18 28 28
9   9 19 29 29
10 10 20 30 30 
```

如何使用循环或任何其他方法获得第二个输出？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-05T03:08:50.193

通过递归构建嵌套`ifelse`函数，您可以获得迄今为止提供的两种解决方案的好处：`ifelse`速度快并且可以处理任何类型的数据，而@Matthew 的解决方案功能更强大，但仅限于整数并且可能很慢。

```
decode <- function(x, search, replace, default = NULL) {

   # build a nested ifelse function by recursion
   decode.fun <- function(search, replace, default = NULL)
      if (length(search) == 0) {
         function(x) if (is.null(default)) x else rep(default, length(x))
      } else {
         function(x) ifelse(x == search[1], replace[1],
                                            decode.fun(tail(search, -1),
                                                       tail(replace, -1),
                                                       default)(x))
      }

   return(decode.fun(search, replace, default)(x))
} 
```

请注意该`decode`函数是如何以 SQL 函数命名的。我希望像这样的函数可以用于基础 R 包......这里有几个例子说明了它的用法：

```
decode(x = 1:5, search = 3, replace = -1)
# [1]  1  2 -1  4  5
decode(x = 1:5, search = c(2, 4), replace = c(20, 40), default = 3)
# [1] 3 20  3  40  3 
```

对于您的特定问题：

```
transform(z, q = decode(x, search = c(2,4,7), replace = c(2,4,3), default = 1) * t)

#    x  y  t  q
# 1   1 11 21 21
# 2   2 12 22 44
# 3   3 13 23 23
# 4   4 14 24 96
# 5   5 15 25 25
# 6   6 16 26 26
# 7   7 17 27 81
# 8   8 18 28 28
# 9   9 19 29 29
# 10 10 20 30 30 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T10:13:05.613

这是一个简单的解决方案，只需一个`ifelse`命令：

计算 的乘数`t`：

```
ifelse(z$x == 7, 3, z$x ^ (z$x %in% c(2, 4))) 
```

完整的命令：

```
transform(z, q = t * ifelse(x == 7, 3, x ^ (x %in% c(2, 4))))

    x  y  t  q
1   1 11 21 21
2   2 12 22 44
3   3 13 23 23
4   4 14 24 96
5   5 15 25 25
6   6 16 26 26
7   7 17 27 81
8   8 18 28 28
9   9 19 29 29
10 10 20 30 30 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-31T20:15:56.850

生成一个多重向量：

```
tt <- rep(1, max(z$x))
tt[2] <- 2
tt[4] <- 4
tt[7] <- 3 
```

这是您的新专栏：

```
> z$t * tt[z$x]
 [1] 21 44 23 96 25 26 81 28 29 30

> z$q <- z$t * tt[z$x]
> z
    x  y  t  q
1   1 11 21 21
2   2 12 22 44
3   3 13 23 23
4   4 14 24 96
5   5 15 25 25
6   6 16 26 26
7   7 17 27 81
8   8 18 28 28
9   9 19 29 29
10 10 20 30 30 
```

如果 中有负值，这将不起作用`z$x`。

**已编辑**

这是上面的概括，其中一个函数用于生成乘数向量。实际上，我们根据参数创建了一个函数。

我们要转换以下值：

```
2 -> 2
4 -> 4
7 -> 3 
```

否则，将采用默认值 1。

这是一个生成所需函数的函数：

```
f <- function(default, x, y) {
  x.min <- min(x)
  x.max <- max(x)
  y.vals <- rep(default, x.max-x.min+1)
  y.vals[x-x.min+1] <- y

  function(z) {
    result <- rep(default, length(z))
    tmp <- z>=x.min & z<=x.max
    result[tmp] <- y.vals[z[tmp]-x.min+1]
    result
  }
} 
```

以下是我们如何使用它：

```
x <- c(2,4,7)
y <- c(2,4,3)

g <- f(1, x, y) 
```

`g`是我们想要的功能。应该清楚的是，任何映射都可以通过`x`和`y`参数提供给`f`。

```
g(z$x)
## [1] 1 2 1 4 1 1 3 1 1 1

g(z$x)*z$t
## [1] 21 44 23 96 25 26 81 28 29 30 
```

应该清楚这仅适用于整数值。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-01T15:38:18.917

根据 Señor 的建议：

```
> z$q <- ifelse(z$x == 2, z$t * 2,
         ifelse(z$x == 4, z$t * 4,
         ifelse(z$x == 7, z$t * 3,
                          z$t * 1)))
> z
    x  y  t  q
1   1 11 21 21
2   2 12 22 44
3   3 13 23 23
4   4 14 24 96
5   5 15 25 25
6   6 16 26 26
7   7 17 27 81
8   8 18 28 28
9   9 19 29 29
10 10 20 30 30 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-12T05:35:53.090

你可以在

*   碱基R
*   用一根线
*   其中映射非常清晰，可以在代码中阅读
*   没有辅助函数（好的，一个匿名函数）
*   方法适用于否定
*   方法适用于任何原子向量（实数、字符）

像这样：

```
> transform(z,q=t*sapply(as.character(x),function(x) switch(x,"2"=2,"4"=4,"7"=3,1)))
    x  y  t  q
1   1 11 21 21
2   2 12 22 44
3   3 13 23 23
4   4 14 24 96
5   5 15 25 25
6   6 16 26 26
7   7 17 27 81
8   8 18 28 28
9   9 19 29 29
10 10 20 30 30 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-07T16:45:40.810

我真的很喜欢在 florel 的博客上发布的“dinre”答案：

```
for (i in 1:length(data_Array)){
data_Array[i] <- switch(data_Array[i], banana="apple", orange="pineapple", "fig")
} 
```

带有关于`switch`仔细阅读帮助页面以了解整数参数的警告。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-11-19T06:20:58.440

这是`decode`R 中用于字符向量（未经因子测试）的 SQL 版本，其操作与 SQL 版本一样。即它需要任意数量的目标/替换对，以及作为默认值的可选最后一个参数（请注意，默认值不会覆盖 NA）。

我可以看到它与`dplyr`'`mutate`操作一起非常有用。

```
> x <- c("apple","apple","orange","pear","pear",NA)

> decode(x, apple, banana)
[1] "banana" "banana" "orange" "pear"   "pear"   NA      

> decode(x, apple, banana, fruit)
[1] "banana" "banana" "fruit"  "fruit"  "fruit"  NA      

> decode(x, apple, banana, pear, passionfruit)
[1] "banana"       "banana"       "orange"       "passionfruit" "passionfruit" NA            

> decode(x, apple, banana, pear, passionfruit, fruit)
[1] "banana"       "banana"       "fruit"        "passionfruit" "passionfruit" NA 
```

这是我正在使用的代码，我将在这里更新一个要点（[链接](https://gist.github.com/datalove/a002fb6b8375fc5af955#)）。

```
decode <- function(x, ...) {

  args <- as.character((eval(substitute(alist(...))))

  replacements <- args[1:length(args) %% 2 == 0]
  targets      <- args[1:length(args) %% 2 == 1][1:length(replacements)]

  if(length(args) %% 2 == 1)
    x[! x %in% targets & ! is.na(x)] <- tail(args,1)

  for(i in 1:length(targets))
    x <- ifelse(x == targets[i], replacements[i], x)

  return(x)

} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-01-07T08:45:52.957

您也可以使用 match 来执行此操作。在将 col、pch 和 cex 等参数分配给散点图中的点时，我倾向于经常使用它

```
searchfor<-c(2,4,7)
replacewith<-c(2,4,3)

# generate multiplier column
# q could also be an existing vector where you want to replace certain entries
q<-rep(1,nrow(z))
#
id<-match(z$x,searchfor)
id<-replacewith[id]
# Apply the matches to q
q[!is.na(id)]<-id[!is.na(id)]
# apply to t
z$q<-q*z$t 
```

# sublimetext - Sublime Text 2 的用户输入

> ID：14105652
> 
> 赞同：1
> 
> 时间：2012-12-31T20:07:53.047
> 
> 标签：sublimetext, eoferror

是否可以使用 Sublime Text 2 测试接受用户输入？例如，这个：

```
x = input()
print(x) 
```

吐出一个EOFError。我怎样才能让它接受用户输入？或者打开一个控制台窗口来接受用户输入？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T06:50:37.720

试试这个插件，SublimeREPL 提供了一个简单的 python 控制台：

[https://github.com/wuub/SublimeREPL](https://github.com/wuub/SublimeREPL)

# c++ - 如何将 int 字符串与消息框一起使用？

> ID：14105653
> 
> 赞同：1
> 
> 时间：2012-12-31T20:07:55.130
> 
> 标签：c++, winapi, casting

我试图通过将 int 转换为 const CHAR* 来获取消息框以显示变量的地址，我当前的功能失调尝试如下所示：

```
#include <cstdlib>
#include <iostream>
#include <windows.h>

int main()
{
 int *ip;
 int pointervalue = 1337;
 int thatvalue = 1;
 ip = &pointervalue;
 thatvalue = (int)ip;
 std::cout<<thatvalue<<std::endl;
 MessageBox (NULL, (const char*)thatvalue, NULL, NULL);
 return 0;
} 
```

dos 框打印 2293616，消息框打印“9|”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T20:16:27.257

如果你使用 C++11，你也可以使用[`to_string()`](http://en.cppreference.com/w/cpp/string/basic_string/to_string)：

```
MessageBox (NULL, std::to_string(thatvalue).c_str(), NULL, NULL); 
```

您当前的问题是您只是转换`thatvalue`为`const char*`，或者换句话说，获取`int`值并将其转换为*指针*，而不是*字符串*（C 样式或其他）。您在消息框中打印了垃圾，因为`const char*`指针指向无效的垃圾内存，而且它没有崩溃是一个不幸的奇迹。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-31T20:12:10.290

尝试改用 stringstream（包括 sstream）

```
int *ip;
int pointervalue = 1337;
int thatvalue = 1;
ip = &pointervalue;    
stringstream ss;
ss << hex << ip;
MessageBox (NULL, ss.str().c_str(), NULL, NULL); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T20:15:25.523

简单的铸造不会做这个工作。

看看 itoa 函数：[http ://www.cplusplus.com/reference/cstdlib/itoa/](http://www.cplusplus.com/reference/cstdlib/itoa/)

```
/* itoa example */
#include <stdio.h>
#include <stdlib.h>

int main ()
{
  int i;
  char buffer [33];
  printf ("Enter a number: ");
  scanf ("%d",&i);
  itoa (i,buffer,10);
  printf ("decimal: %s\n",buffer);
  itoa (i,buffer,16);
  printf ("hexadecimal: %s\n",buffer);
  itoa (i,buffer,2);
  printf ("binary: %s\n",buffer);
  return 0;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-31T20:21:06.830

转换为 const char * 不起作用，因为它会尝试将 int 解释为指针。

如果你想避免流，你可以像这样使用 snprintf

```
char buffer[20];
snprintf(buffer,20,"%d",thatValue);
MessageBox (NULL, (const char*)buffer, NULL, NULL); 
```

# php - 标记页面重定向到主页

> ID：14105658
> 
> 赞同：0
> 
> 时间：2012-12-31T20:08:30.417
> 
> 标签：php, wordpress, seo, blogs, tagging

我们的 Wordpress 网站上有一些帖子，我们想在底部添加标签，所以我使用了：

```
<p><?php the_tags(); ?></p> 
```

它确实奏效了。问题是它链接到例如：

[http://website.com/tag/foo](http://website.com/tag/foo)

但这只是显示主页（/tag/foo 不存在）。如何让我的标签列出带有该标签的文章/帖子或某种搜索/类别视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T20:14:35.320

您的主题中是否设置了标签页？听起来它默认为 index.php。看这里的顺序，#5 是 index.php：[http](http://codex.wordpress.org/Tag_Templates) ://codex.wordpress.org/Tag_Templates 。

你有 tag.php 文件吗？

# python - 使用 Django 选择不在另一个表中的值

> ID：14105660
> 
> 赞同：9
> 
> 时间：2012-12-31T20:09:05.820
> 
> 标签：python, sql, django, orm

如何将此 SQL 查询转换为 Django ORM 语句？

```
SELECT field1, field2, field3
FROM table1
WHERE field1 NOT IN 
(SELECT 2_field1 FROM table2); 
```

请帮忙！:)

ps
`table1`并且`table2`不受`ForeignKey`or限制`ManyToMany`

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-31T20:16:12.163

使用两个 QuerySet，如[文档](https://docs.djangoproject.com/en/dev/ref/models/querysets/#in)中所示。

```
inner_qs = table2.objects.all()
results = table1.objects.exclude(field1__in=inner_qs) 
```

# ruby-on-rails - 如何使服务器与主服务器和图像存储服务器分开？

> ID：14105665
> 
> 赞同：0
> 
> 时间：2012-12-31T20:09:54.233
> 
> 标签：ruby-on-rails, ruby-on-rails-3, paperclip

现在我正在尝试制作应用程序，用户可以在其中尽可能多地上传他们的图像。
问题是图像的数量。
我的应用程序几乎就像图片上传器一样，因此会有巨大的数据流量。

现在我正在使用名为“回形针”的 gem，并租用 1 个 VPS 服务器。
如果我要租用另一个 VPS 仅用于存储图像，我如何存档一个是普通应用程序，除了它只将图像数据传递给另一个 vps。
然后图像服务器如何从主服务器接收数据。

有人做过这种聚类吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T20:33:49.277

我不确定您使用的是哪个服务提供商，但您可能想查看[Fog](http://fog.io/storage/)，它非常适合许多提供商的远程存储，并且与 Paperclip 和 Carrierwave 集成得很好。至于设置，您必须按照您拥有的任何提供商的说明进行操作。祝你好运！

# ios - Xcode 4.5 - 尝试安装以前的模拟器时出错

> ID：14105671
> 
> 赞同：1
> 
> 时间：2012-12-31T20:10:27.407
> 
> 标签：ios, xcode, simulator

我想在我的机器上安装以前版本的 iOS 模拟器，这样我就可以支持 iOS 5 和 6。我去下拉菜单安装其他模拟器，但是当我尝试下载 5.1 和 5.0 的模拟器时，我得到错误：

```
Failed to install "iOS 5.1 Simulator"
CSSM_ERRCODE_INTERNAL_ERROR 
```

谁能告诉我发生了什么事？谢谢。

**编辑：** 现在我下载它时遇到问题，Xcode 给了我另一个错误，说

```
authentication is required to install these packages 
```

现在发生了什么事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T20:22:15.360

这看起来像是与密码问题相关的错误。当您尝试安装模拟器并询问您的管理员密码时，您可能输入错误。再试一次。

# php - 如何从svg文件中提取高度和宽度

> ID：14105684
> 
> 赞同：1
> 
> 时间：2012-12-31T20:12:07.090
> 
> 标签：php, svg, height, width

例子：

```
<svg width="23" height="22" xmlns="http://www.w3.org/2000/svg">
<!-- Created with SVG-edit - http://svg-edit.googlecode.com/ -->
<g>
<title>Layer 1</title>
<path fill-opacity="0" id="svg_1" d="m23,2-20,9.5l22,9" stroke-width="4" stroke="#000000" fill="#ffffff" />
</g>
</svg> 
```

我想提取svg文件的宽度和高度，这样我就可以用canvg做一些定位。

我知道它是xml，但我无法弄清楚。这可能是一件非常容易的事情，但这是一年中的最后一天，我无法弄清楚。

一直在尝试：

PHP SimpleXML

```
$xml = simplexml_load_file($imageright) or die("Error: Cannot create object");
print_r($xml->getDocNamespaces());echo '</br>'; 
```

给我数组（[] => [http://www.w3.org/2000/svg](http://www.w3.org/2000/svg)）

这也不起作用：

```
foreach($xml->svg[0]->attributes() as $a => $b)
  {
  echo $a,'="',$b,"\"</br>";
  } 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T20:17:11.860

所有你需要的是

```
$xml = simplexml_load_file($imageright);
$attr = $xml->attributes();
printf("%s x %s", $attr->width, $attr->height); 
```

输出

```
23 x 22 
```

[简单的在线演示](http://codepad.viper-7.com/TAkwJ2)

# c# - Cuda 特定错误：%s

> ID：14105686
> 
> 赞同：1
> 
> 时间：2012-12-31T20:12:08.683
> 
> 标签：c#, .net, cuda, gpgpu, microsoft-accelerator

我正在尝试使用 CUDA 目标对 Accelerator 进行编程，但出现以下异常：

> Cuda 特定错误：%s。

我的代码如下所示：

```
float[] input = { 0.5f, 2f, 5f, 0.1f, 4f, 0.4f };
FloatParallelArray fpa = new FloatParallelArray(input);
CUDATarget target = new CUDATarget();
float[] output = target.ToArray1D(fpa); 
```

在最后一行抛出异常。

我怎样才能解决这个问题？

我添加了对 Microsoft.Accelerator.dll 和 Microsoft.ParallelArrays.CUDATarget.dll 的引用，并将 Accelerator.dll 和 cudatarget.dll 复制到项目输出文件夹中。我在 Debug x86 中运行并以 .NET 4.5 为目标。我的显卡是 NVIDIA GeForce GTX 660M。我不知道这是否相关，但在 CUDA 安装过程中出现错误，说明无法安装驱动程序。

更新：我重新安装了，没有出现错误。示例 CUDA 项目似乎可以工作，但在使用 Accelerator 时我仍然遇到异常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T15:01:59.087

这适用于我的机器

1.  英伟达 Quadro 4000
2.  GTX 680

```
[Test]
public void KendallTest()
{
    float[] input = { 0.5f, 2f, 5f, 0.1f, 4f, 0.4f };
    FloatParallelArray fpa = new FloatParallelArray(input);
    CUDATarget target = new CUDATarget();
    float[] output = target.ToArray1D(fpa);
    Assert.IsTrue(input.SequenceEqual(output));
} 
```

# sql-server - 此数据库模型中的主/外键字段是什么？

> ID：14105689
> 
> 赞同：5
> 
> 时间：2012-12-31T20:12:21.683
> 
> 标签：sql-server, database-design

我正在查看这个数据库模型，我对某些表中的“PF”感到困惑。我的理解是 PF 是一个“主/外键”，也可以是一个复合键。我理解这种情况是多对多的关系，但是像`Menu_Courses`桌子这样的情况呢？主键显然是一个 int 类型的自动递增列，但是该`menu_id`字段呢？这将如何在 SQL Server 等数据库中实现？

作者还在此页面上解释了 PF 字段：[http ://www.databaseanswers.org/tutorial4_db_schema/tutorial_slide_5.htm](http://www.databaseanswers.org/tutorial4_db_schema/tutorial_slide_5.htm)

![http://www.databaseanswers.org/data_models/recipes/index.htm](../Images/46158961af4d882a318be50998d7eb62.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-31T20:17:07.137

我理解的方式是这些字段是定义它们的表上的主键，同时它们是其他表的外键。

`menu_courses`引用`suggested_menus`through`menu_id`和 combine with`course_number`是主键 - 即每个菜单/课程编号组合都是唯一的，并且唯一标识表中的一行。

您通常会将其实现为`suggested_menus`表上的外键字段。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T20:17:45.180

我想这只是意味着它是表中复合主键的一部分，但同时也是外键。在**menu_courses**中，`menu_id`引用的**Suggested_menus** AND 是表主键的一部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T20:20:46.593

PF 表示该列既是主键又是外键。作为主键，它是构成主键的多个列之一。这就是引用复合键的地方。

例如，在 table 中`Recipe_Steps`，`recipe_id`是表的外键`Recipe`。并且，`Step_Number`它与 一起构成表中的主键`Recipe`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T20:31:11.763

此处的描述具有误导性，当显示多个`PF`' 时，它们表示单个复合键。

如果只`PF`显示一个，`PK`则表的 是用来组成复合键的，在 中似乎是这种情况`Menu_Courses`。
它有自己的`PK`组合`PF`键，由自己表的 PK 和父表的 PK 组成。

# asp.net - Listview在小数点上对齐货币

> ID：14105692
> 
> 赞同：1
> 
> 时间：2012-12-31T20:12:28.793
> 
> 标签：asp.net

在 Asp.net 中，我有一个列表视图，其中有一个名为“金额”的列。负数显示为 (111.111)，正数显示为 111.11。如何右对齐十进制的数字？如果没有任何括号，那将很容易。但是，这是一个要求。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T21:53:10.787

当数字为非负数时，括号的颜色与背景相同。右对齐。

```
 <asp:ListView ID="MainListView" runat="server">
        <LayoutTemplate>
            <table style="text-align:right;">
                <tr id="ItemPlaceholder" runat="server" />
            </table>
        </LayoutTemplate>
        <ItemTemplate>
            <tr>
                <td>
                    <span runat="server" style='<%# GetStyle() %>'>(</span>
                    <%# Eval("Item") %>
                    <span runat="server" style='<%# GetStyle() %>'>)</span>
                </td>
            </tr>
        </ItemTemplate>
    </asp:ListView>

    protected void Page_Load(object sender, EventArgs e)
    {
        var values = new[] { 
            new { Item = 123.12},
            new { Item = -133.34}
        };

        MainListView.DataSource = values;
        MainListView.DataBind();
    }

    protected string GetStyle()
    {
        if ((double)Eval("Item") < 0)
            return string.Empty;
        else
            return "color: white;";
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T20:22:09.773

这将是棘手的。

我可以想到两种方法来解决这个问题。

1.  将值分成两列。右对齐包含小数点前任何内容的第一列。左对齐包含小数点和任何尾随数字的第二列。这样做的缺点是它位于两个不同的单元格中，这意味着您不能简单地双击内容来复制和粘贴它等。

2.  用于`Graphics.MeasureString`准确计算需要在列上放置多少像素的填充。

# sass - Symfony 2.1.6，Sass 和 Compass。如何启用 FireSass 支持？

> ID：14105697
> 
> 赞同：0
> 
> 时间：2012-12-31T20:13:06.100
> 
> 标签：sass, symfony-2.1

我有 Symfony 2.1.6、sass 和 compass 一起工作得很好。

如何让它生成 FireSass 信息？

似乎我需要给 sass 提供 --debug-info 开关，但我没有太多运气理解 Symfony 中的资产包配置。

我的 app/config/config.xml 包含以下内容

```
assetic:
    debug:          "%kernel.debug%"
    use_controller: false
    bundles:        [ ]
    #java: /usr/bin/java
    filters:
        cssrewrite: ~
        sass: ~
        compass: ~ 
```

这在没有任何其他配置的情况下工作。我已经安装了 sass 和 compass，因为我一直在 Drupal 中使用 Zen 主题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T22:07:31.820

我把它放在parameters.yml中让它工作了

```
assetic.filter.compass.debug: true 
```

我不确定这是否是最好的方法。

另外，如果我只是在没有 Compass 的情况下使用 Sass，我不知道该怎么做。assetic.filter.sass.debug: true 不起作用。

我仍然对任何其他信息感兴趣以澄清。

# php - PHP strpos 检查许多

> ID：14105699
> 
> 赞同：0
> 
> 时间：2012-12-31T20:13:31.027
> 
> 标签：php, strpos

我正在寻找用于`strpos`检查字符串中的许多字符，例如：

我想分别检查 $string 中的 chars `:`、`!`和`&`。如果在任何时候找到它们中的任何一个，则返回 false。

最有效的方法是什么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T20:17:48.723

利用[`preg_match`](http://php.net/manual/en/function.preg-match.php)

```
preg_match("/[:!&]/", $string) !== 1; 
```

例子：

```
var_dump(preg_match("/[:!&]/", "this is !a test string"));
> int(1)
var_dump(preg_match("/[:!&]/", "this is a test string"));
> int(0) 
```

> 如果模式匹配给定的主题，preg_match() 返回 1，如果不匹配，则返回 0，如果发生错误，则返回 FALSE。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T20:17:30.490

> 如果找到其中任何一个，则返回 false。

由于您不关心角色的实际位置，您可以使用正则表达式：

```
preg_match("/[:!&]/", $str); // 1 if found, 0 if none found 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T20:20:00.573

如果您的帖子是准确的，并且您尝试做的是在找到这些字符串时返回 FALSE，那么这`strpos()`不是正确的功能。`strpos()`是查找字符串中某些字符（或字符串）首先出现的位置。

如果您陈述的目标是准确的，您可能想要更多类似的东西：

```
if( preg_match( "/[\:\!&]/", $str ) > 0 ) { return false; } 
```

# jquery - 使用 ajax 的 Rails 嵌套路由

> ID：14105700
> 
> 赞同：0
> 
> 时间：2012-12-31T20:13:56.053
> 
> 标签：jquery, ruby-on-rails, ajax, nested-routes

假设我有一个这样的 URL：

```
http://domain.com/projects/14/phases/30 
```

但是我正在通过 :remote => true 链接将阶段#show 操作加载到我的项目#show 视图中的 div 中。

我希望用户能够访问`http://domain.com/projects/14/phases/30`并让 projects#show 视图渲染并将阶段/30 的视图自动加载到指定的 div 中。

我只需要朝着正确的方向轻推。我在网上找不到有关此问题的任何信息。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T20:34:31.460

您可以在页面加载时对该操作运行 ajax 请求

首先将当前 url 传递到 js 中（或者你可以使用另一种方法将数据传递到[本集中](http://railscasts.com/episodes/324-passing-data-to-javascript)的 js 中）。

```
-# app/views/phases/show.html.haml
#content{:"data-url" => project_phases_path(@project, @phase)} 
```

并对那个 url 运行请求。

```
// app/assets/javascripts/phases.js.coffee
jQuery ->
  $.ajax
    url: $("#content").data("url") 
```

# java - 从客户端向服务器请求来自两者的数据 struts 2中的元素和javascript

> ID：14105701
> 
> 赞同：1
> 
> 时间：2012-12-31T20:13:58.073
> 
> 标签：java, jsp, struts2

这是我的jsp文件

```
<script>
    var object = "I'm object";
</script>

<s:form action="requesting" method="post">
    <s:textfield name="name" key="label.name" />
    <s:submit method="execute" key="label.submit">
</s:form> 
```

我想在动作类中获取这些 javascript 对象（“对象”）并形成属性（“名称”）。怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T20:14:57.010

将其设置在某个隐藏字段中以包含在表单帖子中，或进行 ajax 调用

# c# - 附加以更新实体框架

> ID：14105702
> 
> 赞同：8
> 
> 时间：2012-12-31T20:14:02.707
> 
> 标签：c#, entity-framework, ado.net

我正在尝试使用附加的 EF 5.x 对表进行更新。此表具有其他必需的字段，但它是现有行。所以我试图在没有任何获取的情况下进行更新。userid 是表的主键。我正在尝试更新状态。但它会抛出一个 EntityValidationErrors 说密码是必需的，这是另一个必填字段，但不是主键。因为这是对现有行的更新，为什么需要提供更新所需的字段？

```
 var webUser = new WebUser() { UserId = webUserId, OnlineStatus = (sbyte)status };
    using (var dbxupdate = new xEntities())
    {
        try
        {
            dbxupdate.WebUsers.Attach(webUser);
dbxupdate.Entry(webUser).State = EntityState.Modified;
            dbxupdate.Entry(webUser).Property(x => x.OnlineStatus).IsModified = true;
            dbxupdate.SaveChanges();
        }
        catch (DbEntityValidationException dbEx)
        {
            foreach (var validationErrors in dbEx.EntityValidationErrors)
            {
                foreach (var validationError in validationErrors.ValidationErrors)
                {
                    Trace.TraceInformation("Property: {0} Error: {1}", validationError.PropertyName, validationError.ErrorMessage);
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-31T21:42:15.133

`.Attach()`实际上只对在这样的分离场景中更新实体有用：

```
User entity = null;

using (var db = new DbContext()) {
    entity = (from p in db.Users
              where p.Id == 1
              select p).FirstOrDefault();

    System.Diagnostics.Trace.WriteLine(entity.Name); //Outputs "Jane Doe"
}

entity.Name = "John Doe" //Modified while no longer connected to database

using (var db = new DbContext()) {
    db.Users.Attach(entity);
    db.Entry(entity).Property(a => a.Name).IsModified = true;
    db.SaveChanges();

    System.Diagnostics.Trace.WriteLine(entity.Name); //Now outputs "John Doe"
} 
```

在您的场景中，您正在创建的实体没有被其键检索，并且数据库将其视为一个全新的实体。我假设您的密码是一个不可为空的字段，这会导致 EF 在尝试保存您的更改时抛出错误。如果您没有任何此类错误，则 EF 将自动清除您未修改的任何字段，然后保存实体（这也不是您要查找的结果）。

为了进行您真正想要的更改，请尝试以下操作：

```
using (var db = new DbContext()) {
    db.Users
        .Single(a => (a.Id == 1))
        .OnlineStatus = ((sbyte)status);
    db.SaveChanges();
} 
```

然后添加您想要的任何其他错误处理/验证代码。或者，您可以将实体存储在变量中，以便一次更改多个字段。EF 应该自动确定哪些值已被更改，并且只生成进行这些更改所需的 SQL。这意味着如果你有类似的东西：

```
using (var db = new DbContext()) {
    foreach (var item in entityList) {
        var entity = db.Users.Single(a => (a.Id == item.Id));

        entity.Name = item.Name;
        entity.Address = item.Address;
    }

    db.SaveChanges();
} 
```

那么 EF 应该只更新实际受此代码影响的实体/字段。如果名称或地址保持不变，则 EF 在将更改保存到数据库时将跳过该实体的该字段。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T20:15:46.477

实体在保存时得到验证，无论它是附加的还是从数据库加载的。如果您使用验证属性或验证方法，实体必须通过验证才能保存。

如果您`[Required]`在密码字段上有一个属性，我认为您已经陷入困境。您可能必须加载实体，然后更新信息，而不仅仅是附加它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T20:28:51.777

试试这个：用（把它放在`using`语句中）替换第一行 代码继续......为了更新一个实体，你必须得到它的一个实例。否则，您将创建一个新的，其中未声明的属性将获得一个值。
`var wu = dbxupdate.webUsers.single(i=>i.id== webUserId);
wu.OnlineStatus = whatever;`
`null`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T20:35:26.700

在实体框架中，如果不为其他字段设置适当的值，您将无法更新字段。所以最好为你的工作使用存储过程。另一种方法是获取记录然后更新字段。

# zend-framework - 如何覆盖表单元素的所有错误消息？

> ID：14105703
> 
> 赞同：0
> 
> 时间：2012-12-31T20:14:05.093
> 
> 标签：zend-framework, zend-form, zend-form-element, zend-validate

我可以使用以下方法来覆盖 zend 表单元素的所有错误消息。

```
$name->setRequired( TRUE )
    ->setAttrib( 'id', 'fullname' )
    ->addErrorMessage( 'Please provide your name' ); 
```

但是，当我使用工厂模式创建表单元素时，我无法复制它。
'errorMessage' 键什么也不做。

```
$this->addElement('text', 'city', array(
        'placeholder'   => 'City*',
        'required'      => true,
        'filters'       => array('StringTrim', 'StripTags'),
        'errorMessage'  => 'TEST',
        'validators'    => array(
            array('StringLength', false,
                array(3, 50, 
                    /*'messages' => array(
                        Zend_Validate_StringLength::TOO_SHORT => 'too short'
                    )*/
               )
            )
        ),
        'decorators'    => array('ViewHelper','Errors'),
    )); 
```

我可以单独覆盖每个 Zend 错误消息（请参阅注释掉的代码），但这是一个非常乏味的过程。

使用工厂模式创建 ZF 表单元素时，有没有办法覆盖所有错误消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T20:46:36.913

我没有尝试过，但我认为你可以这样做：

```
'errorMessages'  => array('TEST'), 
```

请注意，它`errorMessages`是复数形式，并且您传递的是单元素数组而不是字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T09:25:47.180

如果要更改错误消息，则在验证器定义时定义类似..

```
'validators' => array(
                    'NotEmpty', 
                    true, 
                    array( 'messages' => array( 'isEmpty' => "Please provide your name.") ) 
```

当此字段为空时，错误消息将是“请提供您的姓名。”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T15:29:05.447

There is no way to override ALL error messages

# linker - 是否有允许我移动堆栈起始地址的链接器脚本指令？

> ID：14105727
> 
> 赞同：5
> 
> 时间：2012-12-31T20:17:13.920
> 
> 标签：linker, executable, elf, linker-scripts, executable-format

我正在尝试使用 x86_64 上的链接器脚本更改堆栈的起始位置。我可以使用以下方法移动我的可执行文件起始地址：

```
PROVIDE (__executable_start = SEGMENT_START("text-segment", 0x200000)); . = SEGMENT_START("text-segment", 0x200000) + SIZEOF_HEADERS; 
```

我像这样改变了我的全局变量：

```
 .data ALIGN(0x10000000)           :
{
*(.data .data.* .gnu.linkonce.d.*)
 SORT(CONSTRUCTORS)
} 
```

我尝试使用以下内容来移动堆栈区域：

```
. = 0x50000000;
.stack    :
{
 stack_start = .;

  PROVIDE( stack_start = . );
  *(.stack)
      . += 0x2000;
  stack_end = . ;
  PROVIDE( stack_end = . );
} 
```

但这并没有让我到任何地方。

这是我用来测试堆栈位置的测试程序：

```
 #include <stdio.h>
 #include <stdlib.h>

int global_var = 555;

void test()
{
   int local_test = 666;

   printf("address of global_var: %p\n", &global_var);
   printf("address of local_test: %p\n", &local_test);

}

int main()
{
   int local_main = 5;
   printf("address of local_main: %p\n", &local_main);
   printf("address of test(): %p\n", &test);
   printf("address of main(): %p\n", &main);
   test();
   return 0;
} 
```

这是我从 gcc 的默认链接器脚本的输出（没有修改）：

```
address of local_main: 0x7fffffffe26c  <---- I want to move local vars
address of test(): 0x40050c
address of main(): 0x400547
address of global_var: 0x600a10
address of local_test: 0x7fffffffe24c <----  I want to move local vars 
```

这是我的链接器脚本的输出：

```
address of local_main: 0x7fffffffe26c   <--- unchanged
address of test(): 0x2005ac
address of main(): 0x2005e7
address of global_var: 0x10000010
address of local_test: 0x7fffffffe24c   <--- unchanged 
```

由于 nm 输出新位置，我真的很困惑：

```
 $ nm -n test.out
             w _ITM_deregisterTMCloneTable
             w _ITM_registerTMCloneTable
             w _Jv_RegisterClasses
             w __gmon_start__
             U __libc_start_main@@GLIBC_2.2.5
             U printf@@GLIBC_2.2.5
0000000000200460 T _init
00000000002004a0 T _start
00000000002004cc t call_gmon_start
00000000002004f0 t deregister_tm_clones
0000000000200520 t register_tm_clones
0000000000200560 t __do_global_dtors_aux
0000000000200580 t frame_dummy
00000000002005ac T test
00000000002005e7 T main
0000000000200650 T __libc_csu_fini
0000000000200660 T __libc_csu_init
00000000002006ec T _fini
00000000002006f8 R _IO_stdin_used
0000000000200870 r __FRAME_END__
0000000000400878 t __frame_dummy_init_array_entry
0000000000400878 t __init_array_start
0000000000400880 t __do_global_dtors_aux_fini_array_entry
0000000000400880 t __init_array_end
0000000000400888 d __JCR_END__
0000000000400888 d __JCR_LIST__
0000000000400890 d _DYNAMIC
0000000000400a78 d _GLOBAL_OFFSET_TABLE_
0000000010000000 D __data_start
0000000010000000 W data_start
0000000010000008 D __dso_handle
0000000010000010 D global_var
0000000010000018 D __TMC_END__
0000000020000000 A __bss_start
0000000020000000 A _edata
0000000020000000 b completed.6092
0000000050000000 B stack_start
0000000050002000 A _end
0000000050002000 B stack_end 
```

虽然我什至不确定 stack_start 和 stack_end 在 x86_64 上是否有效，因为我从 arm online 的链接器脚本教程中得到了那部分。我的链接器脚本没有收到任何错误或警告，所以我不确定发生了什么。

如果您想知道为什么有人会这样做 - 它对安全研究有影响。

有没有办法使用链接器脚本做我想做的事？我简直不敢相信我可以移动我的 .text、.bss 和 .data 部分，但不能移动堆栈。

* * *

**更新：**这是从[http://www.lurklurk.org/linkers/linkers.html#os](http://www.lurklurk.org/linkers/linkers.html#os)获取的解释，说明为什么使用链接器无法做到这一点：

> “你可能已经注意到，到目前为止所有关于目标文件和链接器的讨论都只讨论了全局变量；没有提到前面提到的局部变量和动态分配的内存。这些数据不需要任何链接器参与，因为它们的生命周期只发生在程序运行时——在链接器完成其业务很久之后。”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T22:12:30.543

> 是否有允许我移动堆栈起始地址的链接器脚本指令？

在 Linux（您似乎正在使用）上：不。

Linux 上的堆栈位置由内核决定，当前的值是`ulimit -s`; 它*不会*以任何方式编码到主可执行文件中。

> 如果您想知道为什么有人会这样做 - 它对安全研究有影响。

如果要显式控制堆栈位置，则必须编写一个自定义`ELF`加载器，`mmap()`以内核的方式设置堆栈（以及 glibc 期望设置堆栈的方式），然后将控制权转移到`a.out`or `ld-linux`。

> 窗户呢？

很久没接触Windows了，但我相信那里的情况类似——内核决定堆栈位置。

# ruby-on-rails - heroku 的问题 - 应用程序崩溃

> ID：14105737
> 
> 赞同：0
> 
> 时间：2012-12-31T20:17:48.387
> 
> 标签：ruby-on-rails, heroku

```
Dec 31 12:11:39 starvingapp heroku/api:  Starting process with command `bundle exec rake db:migrate` by sabatsuk@gmail.com
Dec 31 12:11:46 starvingapp heroku/run.4464:  Starting process with command `bundle exec rake db:migrate`
Dec 31 12:11:46 starvingapp heroku/run.4464:  State changed from starting to up
Dec 31 12:12:03 starvingapp heroku/run.4464:  Client connection closed. Sending SIGHUP to all processes
Dec 31 12:12:04 starvingapp heroku/run.4464:  Process exited with status 0
Dec 31 12:12:04 starvingapp heroku/run.4464:  State changed from up to complete
Dec 31 12:12:12 starvingapp heroku/router:  at=error code=H10 desc="App crashed" method=GET path=/ host=starvingapp.herokuapp.com fwd=184.73.237.85 dyno= queue= wait= connect= service= status=503 bytes=
Dec 31 12:12:19 starvingapp heroku/router:  at=error code=H10 desc="App crashed" method=GET path=/ host=starvingapp.herokuapp.com fwd=204.93.223.151 dyno= queue= wait= connect= service= status=503 bytes=
Dec 31 12:12:21 starvingapp heroku/router:  at=error code=H10 desc="App crashed" method=GET path=/ host=starvingapp.herokuapp.com fwd=50.18.57.7 dyno= queue= wait= connect= service= status=503 bytes= 
```

给我这个错误。有人知道吗？

# java - Android兼容性，如何使用仅适用于较新版本的视图属性？

> ID：14105739
> 
> 赞同：0
> 
> 时间：2012-12-31T20:17:57.150
> 
> 标签：java, android

我确定这是一个“简单”的问题，但我对 android 和 java 完全陌生。基本上，某些属性在以后的版本中已更改，例如：

```
 android:configChanges="keyboardHidden|orientation" 
```

（老）

```
 android:configChanges="keyboardHidden|orientation|screenSize" 
```

（较新）

如果我使用第二个选项，旧版本会怎样？他们会正常工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T20:26:52.880

在旧版本的 android 中，该`screenSize`属性将被忽略。您可以`configChanges`在所有版本中使用第二个。

# objective-c - 如果我有两 (2) 个 UIDatePickers 和一 (1) 个 UIPickerView，我需要使用标签吗？

> ID：14105743
> 
> 赞同：0
> 
> 时间：2012-12-31T20:18:34.347
> 
> 标签：objective-c, uipickerview, xcode4.5

我有一个 iPad 应用程序，使用 XCode 4.5、Storyboards、ARC 和 iOS 6 构建。我有一个控制器，带有两个 UIDatePickers 和一个 UIPickerView。由于 UIDatePicker 是从 UIPickerView 派生的，我是否需要使用标签来引用**numberOfRowsInComponent**中的 UIPickerView ？

我问的原因是因为我得到了一个干净的构建，但是在它甚至达到**numberOfRowsInComponent** （设置断点；永远不会到达那里）之前出现运行时错误：

> 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[ClientSetupViewController pickerView:numberOfRowsInComponent:]: unrecognized selector sent to instance 0x8a89a10”

这是给我问题的代码（manArray.Count = 6）；

```
-(NSInteger)pvMan:(UIPickerView *)pvMan numberOfRowsInComponent:(NSInteger)component  {

    return manArray.count;  //set number of rows
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T20:28:24.793

看起来很期待

`-pickerView:numberOfRowsInComponent`

代替

`-pvMan:numberOfRowsInComponent`

除非你在其他地方定义了那个并且调用`-pvMan:numberOfRowsInComponent:`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T20:35:51.607

你得到那个例外是因为你没有实现`pickerView:numberOfRowsInComponent:`. 您已实施`pvMan:numberOfRowsInComponent:`. `UIPickerView` `dataSource`对您来说不幸的是，工具是否无关紧要`pvMan:numberOfRowsInComponent:`。它需要是：

```
-(NSInteger)pickerView:(UIPickerView *)pvMan numberOfRowsInComponent:(NSInteger)component  {
    return manArray.count;  //set number of rows
} 
```

您不需要区分不同的选择器，因为您只有一个选择`UIPickerView`器`dataSource`。此外，`UIDatePickers`子类`UIControl`. `UIDatePicker`确实有一个`UIPickerView`private `ivar`，但由于你不是（也永远不会是）它`dataSource`，这与你无关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T20:36:20.227

1) UIDatePicker 不是 UIPicker 的子类，根据 Apple Docs，“不继承自 UIPickerView。”

2）因此它不响应`pickerView:numberOfRowsInComponent`。`datePickerMode`您可以通过 @Property使用适当的格式在其上设置 NSDate 对象来设置其上的行。

3) 对于其他 UIPickers，您可以通过 UIPickerViewDataSource 协议设置它们的行数，并且您必须支持：

```
-(NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component 
```

并为关联的选取器提供正确的行数。如何将正确的行数与选择器关联起来是通过知道当时哪个选择器在询问。您将通过评估所`*pickerView`要求的来做到这一点。

# jenkins - Jenkins 中的随机测试失败

> ID：14105745
> 
> 赞同：2
> 
> 时间：2012-12-31T20:18:46.197
> 
> 标签：jenkins

我在 Python - Django 网站上工作。我使用 GIT 作为我的 VCS。对于持续集成，我使用 Jenkins CI。我使用 Python 设置了两个虚拟环境，一个用于开发，另一个用于预生产。

我的问题：我为网站编写了许多单元测试、回归和冒烟测试。我的开发和预生产 virtualenvs 都连接到 Jenkins CI。

最近，每当将代码更改推送给 Jenkins CI 中的两种环境时，测试都会随机失败。有时，测试随机失败，没有任何代码更改被推进。

已完成故障排除：

*   在本地运行测试，他们通过了。
*   在 Jenkins CI 中手动构建了一些（使用立即构建按钮）测试通过了。
*   单独运行失败的测试，它们仍然通过。

在早期版本中失败的测试在下一个版本中通过。一些在早期版本中通过的测试在下一个版本中失败了。有人可以建议我能做什么吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-31T20:31:49.213

您将必须确定导致测试随机失败的环境因素。

我看到的一些事情导致了这个：

*   内存 - CI 机器上运行着其他东西，它没有足够的内存来完成所有这些并构建你的东西
*   时间 - 您的代码中的某些内容会根据时间而失败。例如，我的代码会在 2 月 29 日失败。成功后，它让我们感到惊讶。如果只有一位数字，则可能类似于无法格式化秒数。
*   外部依赖项-您的测试依赖于其他一些服务器。如果它出现故障或变得非常忙碌，它不会响应您的测试代码并且测试失败。这可能是一个数据库服务器。
*   数据库内容 - 您可能没有为针对数据库运行的测试正确设置所有先决条件
*   并发性——有时多线程代码只会在条件正确（或错误）时才会失败。外部因素引入的一点随机延迟可能会使代码工作或失败。它很容易忽略多线程代码中的竞争条件。
*   服务器（或 CPU）- 如果测试在测试机器中的特定服务器或核心上运行，有时测试会失败。当然，如果你只有一台测试机，这是不可能发生的。但是，如果一台机器出现故障、连接性差（防火墙规则）、其他进程正在运行、内存更少（或更多），那么当您的测试被随机分配到该机器上运行时，它们可能会失败。
*   [在此处插入您的] - 还有一百万。

这些都是很难解决的问题。特别是如果他们无缘无故离开。它让你感到紧张，因为你怀疑它会在你急于修复生产系统中的一个讨厌的错误时回来。

# php - php如何获取文件夹中没有扩展名的文件数组

> ID：14105748
> 
> 赞同：0
> 
> 时间：2012-12-31T20:18:59.160
> 
> 标签：php, arrays, file, directory, scandir

我有一个“路径/到/文件夹”。获取没有文件名的文件数组的最佳方法是什么？

我可以使用`$files = scandir("path/to/folder/", 1);` ，但我必须删除扩展名和“。” 从那个数组。有没有更好的方法来获取文件数组？

**刚刚添加：** PS我需要“路径/到/文件夹”中的文件，该文件夹中没有子文件夹。因此，如果该文件夹中的文件`"ab.php, cd.php, 123.php, hello.php"`是

那么结果是：`$files =array('ab', 'cd', '123', 'hello');`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T20:23:30.350

```
$files = glob('path/to/files/*.*');
foreach($files as $file) {
    $file = pathinfo($file);
    echo $file['filename'];
} 
```

或者，使用更快的[DirectoryIterator类。](http://php.net/manual/en/class.directoryiterator.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T20:26:53.300

您可以尝试扩展`FilesystemIterator`您需要的所有内容：

```
echo new NoExtentionIterator(__DIR__); 
```

使用的类

```
class NoExtentionIterator extends FilesystemIterator {
    public function current() {
        return pathinfo(parent::current(), PATHINFO_FILENAME);
    }
    public function accept() {
        return parent::current()->isfile();
    }
    public function __toString() {
        return implode("\n", iterator_to_array($this));
    }
} 
```

# sql-server-2005 - mssql查询需要时间最终以套接字关闭异常结束

> ID：14105749
> 
> 赞同：0
> 
> 时间：2012-12-31T20:19:14.067
> 
> 标签：sql-server-2005, jdbc, connection-pooling

使用 log4jdbc 进行日志记录，日志显示以下异常：

```
341\. {call SOME_PROC('All','31/12/2012','31/12/2012',256,'',0,'All',-1)} 
 {FAILED after 203580 msec}
com.microsoft.sqlserver.jdbc.SQLServerException: socket closed 
```

然后对于之后执行的每个查询，打开的连接数不断增加

```
2012-12-31 16:05:02.713 open connections:  
209 285 287 288 289 290 291 297 302 304 305 306 
307 308 309 312 314 317 330 331 333 336 337 339 
345 346 350 351 357 358 359 360 361 362 363 364 365 (37) 
```

这一直持续到tomcat重新启动为什么套接字被关闭？解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T19:55:05.493

使用`BoneCP`解决了这个问题。

# google-bigquery - bigquery - 在右表中的最新记录上左连接而不超过左表的时间戳

> ID：14105762
> 
> 赞同：2
> 
> 时间：2012-12-31T20:21:03.020
> 
> 标签：google-bigquery

所以我有一张购买表：
user_id
purchase_time
amount

我有一个网站上的用户活动表：
user_id
location
browse_time

如何在不超过 purchase_time 的情况下将 purchase 表与活动表连接起来以获取最新的 browse_time 活动？

例如，如果我有购买表：

```
user_id     Purchase_time          amount
-------     -------------------    ------
1           2012-12-13 12:30:00    $20
2           2012-12-14 23:00:00    $50 
```

我有活动表：

```
user_id     browse_time            location
-------     -----------            ---------
1           2012-12-14 23:00:00    Product 3
1           2012-12-13 12:00:00    Product 1
1           2012-12-13 11:30:00    Product 2
2           2012-12-15 00:00:00    Product 5
2           2012-12-14 22:30:00    Product 7
2           2012-12-14 20:00:00    Product 6 
```

我想要以下输出：

```
user_id    purchase_time           browse_time           location     amount
-------    -----------------       ---------------       ----------   -------
1           2012-12-13 12:30:00    2012-12-13 12:00:00   Product 1    $20
2           2012-12-14 23:00:00    2012-12-14 22:30:00   Product 7    $50 
```

我尝试了mysql语法，但没有用。我知道 bigquery 不允许“<”或“>”用于“on”上的连接语句。那么在 Big Query 中是否可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T14:55:01.560

所以如果你做这样的事情，你会得到比你想要的更多的结果：

```
SELECT
    user_id
    purchase_time
    browse_time
    location
    amount
FROM
    purchases pur
JOIN
    user_activities uav
ON
    pur.user_id = uav.user_id 
```

您想要最近的 user_activities，所以让我们对连接的右侧进行子查询：

```
SELECT
    user_id
    purchase_time
    browse_time
    location
    amount
FROM
    (SELECT 
         user_id AS user_id 
         location AS location
         MAX(browse_time) AS browse_time 
     FROM
         purchases 
     GROUP BY user_id,location) pur
JOIN
    user_activities uav
ON
    pur.user_id = uav.user_id 
```

我希望这能帮助你解决问题。

# javascript - remove() 函数中的 jQuery 回调

> ID：14105766
> 
> 赞同：10
> 
> 时间：2012-12-31T20:21:29.123
> 
> 标签：javascript, jquery

从页面中删除 DIV 后，我需要调用一个函数。

我试过像这样添加回调，但没有运气。有什么建议么？

```
$(foo).remove( function() {
   stepb();
}); 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-31T20:27:48.347

试试这个

~~$.when($('#foo').remove()).then(stepb());~~ ~~[**示例 1** ][1] 和 [**示例**2 ][2]。~~

```
$('#foo').remove();
stepb(); 
```

​由于`remove`方法`jQuery`是同步的，完成`stepb()`后会被调用`remove()`。因此，无需使用`$.when().then()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T20:26:41.420

默认情况下，从 DOM 中删除某些内容时不会触发任何事件。

看看这个问题以获得一些好的解决方法： [jQuery - Trigger event when an element is removed from the DOM](https://stackoverflow.com/questions/2200494/jquery-trigger-event-when-an-element-is-removed-from-the-dom)

# python - 熊猫 NaT 到 -1？

> ID：14105774
> 
> 赞同：0
> 
> 时间：2012-12-31T20:22:16.857
> 
> 标签：python, timestamp, pandas

```
In [22]: ts
Out[22]:
<class 'pandas.tseries.index.DatetimeIndex'>
[NaT, ..., 2012-12-31 00:00:00]
Length: 11, Freq: None, Timezone: None

In [23]: ts.year
Out[23]: array([  -1, 2012, 2012, 2012, 2012, 2012, 2012, 2012, 2012, 2012, 2012]) 
```

使用 apply 时也会发生这种情况

```
ts.apply(lambda x: pd.Timestamp(x).year)

0       -1
1     2012
2     2012
3     2012
4     2012
5     2012
6     2012
7     2012
8     2012
9     2012
10    2012
Name: Dates 
```

NaT.year == -1 是一个错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T21:54:04.023

是什么让您认为这是一个错误，而不是定义的行为？

第一的：

```
In [16]: pandas.NaT.year
Out[16]: -1 
```

`DatetimeIndex`所以，它在;中没有什么奇怪的。总是这样`NaT`。

它在内部是完全一致的，并且与在`numpy`其他地方和其他地方使用 -1 作为（希望是无符号的）整数类型的特殊值的许多其他东西一致。

是的，-1 并不能真正用作 NaN，因为您可以用它进行算术运算并获得非 NaN（和不正确）结果，并且在其他一些情况下（尝试`pandas.NaT.isoformat()`）它会做奇怪的事情，但是还有什么其他选择? 只要`year`定义为某种`numpy`整数类型，它就必须返回一个整数值。那么，有哪些选择呢？

*   返回一个`int`或`None`。然后调用`year`返回一个`array(dtype=object)`.
*   返回一个浮点数，所以`NaT.year`可以`NaN`。
*   为自身引发异常`NaT.year`，或者在尝试在`array`.
*   返回一些特殊的整数值。如果不是 -1，你会使用什么值？

它们都以不同的方式吸吮，但最后一种似乎吸吮最少，并且与宇宙中的其他一切都最一致。理想的解决方案可能是在 中包含 integer-with-NaN 类型`numpy`，但这是一个更大的问题，即围绕`numpy` `datetime`s 设计包装器......</p>

顺便说一句，值得注意的是`numpy`1.6 没有 的 NaT 值`datetime64`，因此 a`pandas.NaT`实际上映射到`datetime64(-1)`，原因完全相同。现在`numpy`1.7 有了`np.datetime64('NaT')`，这可能会改变。但这仍然不能改变整数没有 NaN 的事实。

# mysql - 从两个时间间隔获取结果

> ID：14105778
> 
> 赞同：3
> 
> 时间：2012-12-31T20:22:35.677
> 
> 标签：mysql

有一个查询可以返回过去 7 天的销售数据。如何获得过去 30 天的销售额（查看过去 7 天和最后 30 天的销售额）？

```
SELECT 
  a.row_id,
  MAX(ad.new_value) - MIN(ad.new_value) AS sales7days 
FROM
  _audit a 
  LEFT JOIN _audit_data ad 
    ON a.audit_id = ad.audit_id 
WHERE ad.col = 'sales' 
  AND a.triggered_datetime > NOW() - INTERVAL 7 DAY 
GROUP BY a.row_id 
ORDER BY sales7days DESC; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T20:38:30.343

也许用一个`CASE`表达：

```
SELECT a.row_id
   ,  MAX(case when a.triggered_datetime > NOW() - INTERVAL 7 DAY 
               then ad.new_value else NULL end)
    - MIN(case when a.triggered_datetime > NOW() - INTERVAL 7 DAY
               then ad.new_value else NULL end) AS sales7days 
   ,  MAX(case when a.triggered_datetime > NOW() - INTERVAL 30 DAY 
               then ad.new_value else NULL end)
    - MIN(case when a.triggered_datetime > NOW() - INTERVAL 30 DAY
               then ad.new_value else NULL end) AS sales30days 
FROM  _audit a, _audit_data ad 
WHERE a.audit_id = ad.audit_id AND ad.col = 'sales' 
GROUP BY a.row_id; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T20:51:34.297

```
SELECT 
  d7.row_id,
  d7.salesdays, d30.salesdays
FROM
(
  Select a.row_id, MAX(ad.new_value) - MIN(ad.new_value) AS salesdays
  From _audit a 
  LEFT JOIN _audit_data ad ON a.audit_id = ad.audit_id 
WHERE ad.col = 'sales' AND a.triggered_datetime > NOW() - INTERVAL 7 DAY 
GROUP BY a.row_id 
) d7,
(
  Select a.row_id, MAX(ad.new_value) - MIN(ad.new_value) AS salesdays
  From       _audit a 
  LEFT JOIN _audit_data ad ON a.audit_id = ad.audit_id 
WHERE ad.col = 'sales' AND a.triggered_datetime > NOW() - INTERVAL 30 DAY 
GROUP BY a.row_id 
) d30

where d7.row_id = d30.row_id
ORDER BY sales7days DESC; 
```

假设您希望两者都使用相同的行 ID - 并且要显示任一值，您可能希望也可能不希望将其设置为内部或外部连接和/或 COALESCE 值字段（对数据了解不足）。

# ruby-on-rails - 从数组构建 ILIKE 子句

> ID：14105779
> 
> 赞同：0
> 
> 时间：2012-12-31T20:22:38.853
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我正在尝试一些概念（实际上是通过构建 1978 年数据库 WHATSIT 的 RoR 版本来玩和学习？）。

它基本上是一个 has_many :through 结构，主题 -> 标签 <- 值。我尝试通过使用查询文本字段输入命令来复制一些命令行结构。基本上是这样的：`What's steve's phone`.

无论如何，通过该界面，大多数搜索都使用 ILIKE。我想通过使用某种形式的数组允许 OR 条件来增强它。类似的东西`What's steve's [son,daugher]`。我通过直接创建 ILIKE 子句而不是字符串替换来让它工作。

```
def bracket_to_ilike(arrel,name,bracket)
  bracket_array = bracket.match(/\[([^\]]+)\]/)[1].split(',')
  like_clause = bracket_array.map {|i| "#{name} ILiKE '#{i}' "}.join(" OR ")
  arrel.where(like_clause)
 end 
```

`bracket_to_ilike(tags,'tags.name','[son,daughter]')`产生like子句`tags.name ILiKE 'son' OR tags.name ILiKE 'daughter'`

它得到了关系，但在所有关于使用表格的讨论中 `("tags.name ILiKE ? OR tags.name ? ",v1,v2,vN..)`，我想问是否有人对如何做到这一点有任何想法。

根据我的搜索，动态创建变量是可行的，但不赞成。我只是想知道是否有人尝试过创建可以添加具有可变编号参数的 where 子句的方法。我尝试将 where 子句发送到关系，但它不喜欢那样。

史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T20:55:04.093

在您的代码中需要注意的几件事......

*   当括号数组的元素之一包含单引号时会发生什么？
*   如果我更进一步并设置一个元素说“'; drop tables...”会发生什么？

我重构代码的第一个尝试是看看 Arel 是否可以做到。或者续集，或者这些天他们所谓的“metawhere”宝石。我的第二次刺是这样的：

```
arrel.where( [ bracket_array.size.times.map{"#{name} ILIKE ?"}.join(' OR '), *bracket_array ]) 
```

我没有测试它，但想法是使用bracket_array的大小来生成一串OR'd条件，然后使用splat运算符传入所有值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T23:20:55.557

感谢菲利普为我指明了正确的方向。

*   我不知道您可以将数组传递给 where 子句 - 这打开了一些选项
*   我使用了几次 splat 运算符，但它实际上创建了一个对象（变量）并没有让我感到震惊

[儿子，女儿] 的东西只是一个控制台练习，看看我能做什么，但不知道我会用它做什么。我最终采用了模型关联并从图片中创建了数组并实现了 OR 搜索。

```
def array_to_ilike(col_name,keys)
  ilike = [keys.map {|i| "#{col_name} ILiKE ? "}.join(" OR "), *keys ]
  #ilike = [keys.size.times.map{"#{col_name} ILIKE ?"}.join(' OR '), *keys ]
  #both work, guess its just what you are use to.
end 
```

然后我允许在我的主题、标签、值搜索中使用竖线（|）字符，所以这是一个 WHATSIT 风格的问题

*   `What's Steve's Phone Home|Work`=> 显示家庭和工作电话
*   `steve phone home|work`的东西只是为了展示
*   `steve son|daughter` => 显示孩子
*   `phone james%|lori%`=> 显示姓名以 james 或 lori 开头的任何人的电话号码
*   `james%|lori%` => 转储以 james 或 lori 开头的任何人的所有信息

然后查询解析命令，如果遇到 | 用任何一句话来说，它都会做这样的事情：

```
t_ilike = array_to_ilike('tags.name',name.split("|"))
# or I actually stored it off on the inital parse
t_ilike = @tuple[:tag][:ilike] ||= ['tags.name ilike ?',tag] 
```

同样，这只是创建一个非 CRUD 类来处理解析和搜索的学习练习。

史蒂夫

# android - Necessitas (Qt/Android NDK) qmake 路径

> ID：14105783
> 
> 赞同：1
> 
> 时间：2012-12-31T20:23:04.797
> 
> 标签：android, qt4, qt-necessitas, precompiling

我正在运行 openSUSE 12.2 64 位，试图在 Necessitas alpha 4.1 中编译应用程序。这是一个基本的应用程序，代码可能不是问题。在跟踪问题的过程中，我确保拥有所有依赖项和 tools.jar，这显然会导致类似的错误。编译时我得到：

```
Packaging Error: Command '/usr/bin/ant clean debug' failed.Exit code: 1
File not found: 
```

实际上没有列出任何文件。我从 Projects->Build Steps->qmake 复制/粘贴了这一行：

```
/home/mark/Software/necessitas/Android/Qt/482/armeabi-v7a/bin/qmake /home/mark/Dev/qt/myProject/myProject.pro -r -spec android-g++ CONFIG+=debug CONFIG+=declarative_debug 
```

然后我粘贴在一个终端窗口中，结果是：

```
sh: /home/mark/necessitas/android-ndk/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin/arm-linux-androideabi-gcc: No such file or directory 
```

这显然是不正确的，因为我的路径是 ~/Software/necessitas 而不是 ~/necessitas。我检查了 Tools->Options 的每个选项卡，但看不到任何引用错误文件夹的地方。任何线索这应该去哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-31T09:19:27.180

我昨晚有这个确切的错误。但是我注意到谷歌文档特别提到了 java-6-openjdk。所以我使用 synaptic 安装了旧的 JDK，然后运行：

```
sudo update-alternatives --config java 
```

我选择了版本 6 并重新运行了该过程。其中成功完成。

（公平地说，我使用的是 Qt 5.1 beta 1 并新下载了 NDK 和 SDK，ant 是来自存储库的 1.8.1）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T15:08:10.207

您是否能够同时解决您的问题？

这与 Java 环境变量有关，更准确地说与 JAVA_HOME 有关。您是否在尝试启动应用程序之前安装了 OpenJDK？我不确定 OpenJDK 在 OpenSUSE 中的安装位置，但在我的 ArchLinux 上，该变量必须设置为：

```
JAVA_HOME=/usr/lib/jvm/java-7-openjdk 
```

为了让 QtCreator 正确编译项目。

就我而言，我安装了 Oracle 的 JDK，所以在安装 OpenJDK 之后，注销并重新登录就可以根据需要更新我的环境变量。

还有一篇与您类似的帖子： [How to build my HelloWorld Android application with Necessitas (qt port)？](https://stackoverflow.com/questions/5422931/how-to-build-my-helloworld-android-application-with-necessitas-qt-port?lq=1)

你会在这里找到一个很好的 necessitas 入门视频：http: [//youtu.be/suPeZ7XC1xk](http://youtu.be/suPeZ7XC1xk)

# r - 将时间重新格式化为可操作的数据

> ID：14105791
> 
> 赞同：0
> 
> 时间：2012-12-31T20:24:08.627
> 
> 标签：r, time, formatting

我有一个数据集需要在格式上进行大量清理，并且在某些时候我想计算研究中人们钓鱼的时间。如果钓鱼开始和停止的时间采用正常格式，这将很容易，但由于某种原因，数据不是有用的十进制格式。例如，早上 10:45 记录为 10.45，而 11:10 记录为 11.10。

我已经尝试过要求 Excel 用冒号替换所有句点（它不会这样做，其他人已经尝试帮助我让 Excel 配合）。我可以想到在 R 中执行此操作的几种方法，但不确定如何继续进行。首先，如果有某种方法可以将小数点后的部分（仅）除以 60，那么十进制格式将是有意义的。那么，10.45 就是 10.75，减法就没有问题了。或者，也可以编写一些简单的代码来用冒号替换句点，然后（我在想？）使用类似 chron 包的东西来操作它。

我不知道您将如何对这些选项中的任何一个进行编码 - 有人有什么建议吗？我认为除以 60 可以通过在句点前后分解碎片的功能来完成（就像粘贴的相反），但我找不到这样的函数的名称。我想第一个也会更简单，尽管第二个实际上可能会阐明我在 R 中遇到的一个更大的问题，即试图弄清楚如何使命令可泛化。我了解如何强制它将所有 10.45 更改为 10:45，但希望我知道是否有一种格式只是说“取 XX.XX 并更改为 XX:XX”，无论实际数字是多少。但我想一次只做一件事。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T20:41:42.640

在没有示例的情况下，我`as.difftime`为此提出：

```
> d <- as.difftime('10.45', format='%H.%M')
> d
Time difference of 10.75 hours
> as.numeric(d)
[1] 10.75 
```

对于您的评论，您必须确保将时间值作为字符串读取。

```
Time.Start = c(9.10, 9.10, 9.10, 9.10, 9.10, 9.10)
Time.Stop = c(14.25, 14.25, 14.25, 14.25, 14.25, 14.25) 
```

把它们变成字符串。首先将它们作为字符串读取会更好，但我们可以使用 sprintf 将它们组合起来：

```
Time.Stop <- sprintf('%.2f', Time.Stop)
Time.Start <- sprintf('%.2f', Time.Start) 
```

然后解析并取差。 `-`正在返回 class 的对象`difftime`，类似于上面。

```
strptime(Time.Stop, format='%H.%M') - strptime(Time.Start, format='%H.%M')

## Time differences in hours
## [1] 5.25 5.25 5.25 5.25 5.25 5.25
## attr(,"tzone")
## [1] "" 
```

# c++ - 为什么不能在 Turbo C++ 的二进制文件中写入全长字符串 (char[])

> ID：14105793
> 
> 赞同：0
> 
> 时间：2012-12-31T20:24:27.790
> 
> 标签：c++, binaryfiles, file-handling, turbo-c++

在像我们这样的数组中，`int a[5]`我们可以存储从 a[0] 到 a[4] 的 5 个值。不是这个..？

我有一个`char mobile[10]`变量，我`class`在这个变量中存储了正好 10 个字符的长字符串。但是当我从文件中读取它时，下一个变量（在类中这个变量之后声明）的几个字符被附加到变量中`mobile`。调查出了什么问题需要几个小时。

我通过更改变量的顺序等尝试了一切。

**最后，我将大小设置`mobile`为 11 ( `char mobile[11]`)，然后将其存储到二进制文件中。然后一切顺利。**

在这里，我创建了一个演示程序，可以展示我的研究：

```
#include <iostream.h>
#include <conio.h>
#include <string.h>
#include <fstream.h>
#include <stdio.h>

class Test
{
    public:
    char mobile[10], address[30];
};

void main()
{
    clrscr();
    Test t;
    // uncoment below to write to file
    /*strcpy(t.mobile, "1234567890");
    strcpy(t.address, "Mumbai");

    fstream f("_test.bin", ios::binary | ios::out | ios::app);
    f.write((char*)&t, sizeof(t));*/

    // uncomment below to read from file
    /*fstream f("_test.bin", ios::binary | ios::in);
    f.read((char*)&t, sizeof(t));
    cout << t.mobile << "\t" << t.address;*/

    f.close();

    getch();
} 
```

**我的假设是否正确，即我不能像`char[n]`处理文件时那样在数组中存储 n 个字符，更具体地说是使用二进制文件..？**

我是否应该总是额外增加 1 个所需尺寸的尺寸..？？

我的编译器是 Turbo C++（可能是 3.0）。这是非常古老且已停产的产品。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T20:26:19.223

C 风格的字符串（字符数组）以空值结尾。您不需要将空终止符存储在文件中，但在打印字符串时需要它。

在您的示例中，您使用`strcpy`将 10 个字符的字符串复制到`char[10]`. 这是未定义的行为，因为`strcpy`将空终止符附加到目标字符串。您需要使用`char[11]`.

在您的示例中，您从文件中读取 10 个字符并使用`cout`. `cout`通过空终止符确定字符串的长度。由于您没有，`cout`请阅读字符串的末尾。这也是未定义的行为，但在大多数情况下，通过从结构中的下一个字段读取字符恰好可以工作。您需要在此数组上使用空终止符，这意味着您还需要将数组大小增加到 11。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T20:26:42.757

C/C++ 中的字符指针必须以空值结尾。这意味着您必须在末尾分配另一个值为 '\0' 的字符。

另请注意，`strcpy`函数将所有字符从一个字符串复制到另一个字符串，直到`\0`遇到，除非它是一个 const 字符串（例如“hello world”），它在编译期间存储为“hello world\0”。

试试这个代码：

```
#include <iostream.h>
#include <conio.h>
#include <string.h>
#include <fstream.h>
#include <stdio.h>

class Test
{
    public:
    char mobile[11], address[30];
};

void main()
{
    clrscr();
    Test t;
    // uncoment below to write to file
    strcpy(t.mobile, "1234567890");
    strcpy(t.address, "Mumbai");
    t.address[10] = '\0';
    fstream f("_test.bin", ios::binary | ios::out | ios::app);
    f.write((char*)&t, sizeof(t))

    // uncomment below to read from file
    fstream f("_test.bin", ios::binary | ios::in);
    f.read((char*)&t, sizeof(t));
    cout << t.mobile << "\t" << t.address;

    f.close();

    getch();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T21:19:01.567

字符串文字`"1234567890"`占用 11 个字节，而不是 10 个！

```
printf("%d", sizeof("1234567890"));
// 11 
```

这是因为编译器在字符串文字的末尾默默地添加了一个`\0`字符 - 字符串标记的结尾。此标记由各种字符串操作函数使用，包括`strcpy`.

现在，以下行：

```
strcpy(t.mobile, "1234567890"); 
```

尝试将字符串 - 10 个字符加上`\0`- 复制到`t.mobile`. 由于`t.mobile`10 字节长，`\0`会溢出到其他变量空间使用的空间（或更糟）。

在您的示例中：

*   `strcpy(t.mobile, "1234567890")`按预期复制字符串，但`\0`溢出到使用的空间`t.address`
*   `strcpy(t.address, "Mumbai")`按预期复制字符串，`\0`被覆盖
*   打印结果`t.mobile`应该是`"1234567890Mumbai"`

故事的寓意：`\0`在使用 C 字符串函数时始终考虑字节。不这样做会导致**意想不到的**问题，包括变量损坏、运行时错误或更糟（例如数据执行）。

# ios - 在 iphone 屏幕上获取 UI 元素的 X/Y 坐标 - 不是 UIView？

> ID：14105796
> 
> 赞同：0
> 
> 时间：2012-12-31T20:25:48.963
> 
> 标签：ios, screen

我知道为了获取 UI 元素的 x 或 y 坐标，您可以使用 button.center.y 或 self.view.frame.size.height 之类的东西来获取 UIView 的高度）。但是，如果我正确理解了这一切，那么所有这些都在 UIView 的范围内。

就 iPhone 屏幕本身而言，您如何获得相同的信息？

也许是这样的：

```
screen.view.frame.size.height 
```

提前致谢。

编辑：我的 UIElements 在 UIScrollView 上。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T20:50:39.537

将视图坐标系中的点转换为封闭窗口的坐标系，然后将该点从窗口转换为屏幕。使用[`-[UIView convertPoint:toView:]`](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/instm/UIView/convertPoint:toView:)和[`-[UIWindow convertPoint:toWindow:]`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIWindow_Class/UIWindowClassReference/UIWindowClassReference.html#//apple_ref/occ/instm/UIWindow/convertPoint:toWindow:)

```
 UIWindow* myWindow = myView.window;
 CGPoint pointInWindow = [myView convertPoint:pointInMyView toView:myWindow];
     // note: toView:nil also works
 CGPoint pointInScreen = [myWindow convertPoint:pointInWindow toWindow:nil]; 
```

顺便说一句，很重要的一点：视图属性[`center`](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/instp/UIView/center)与[`frame`](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/instp/UIView/frame)视图的*父视图的*坐标系相似。因此，要将视图的中心转换为屏幕：

```
 CGPoint pointInWindow = [myView.superview convertPoint:myView.center toView:nil];
 CGPoint pointInScreen = [myView.window convertPoint:pointInWindow toWindow:nil]; 
```

# matlab - matlab 中的 svmtrain - 约束不够严格。

> ID：14105799
> 
> 赞同：5
> 
> 时间：2012-12-31T20:26:00.953
> 
> 标签：matlab, kernel, svm

我在 matlab 中使用 svmtrain 和**MLP 内核**，如下所示：

```
mlp=svmtrain(train_data,train_label,'Kernel_Function','mlp','showplot',true); 
```

但我得到这个错误：

```
??? Error using ==> svmtrain at 470
Unable to solve the optimization problem:
Exiting: the solution is unbounded and at infinity;
the constraints are not restrictive enough. 
```

是什么原因？我尝试了其他内核，没有任何错误。即使我尝试了[svmtrain 的答案 - 无法解决优化问题](https://stackoverflow.com/questions/6560031/svmtrain-unable-to-solve-the-optimization-problem)如下：

```
options = optimset('maxiter',1000);
svmtrain(train_data,train_label,'Kernel_Function','mlp','Method','QP',...
'quadprog_opts',options); 
```

但我又遇到了同样的错误。我的训练集是一个简单的 2 类数据点的 45*2 数据集。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:50:30.823

The solution in [here](https://stackoverflow.com/questions/6560031/svmtrain-unable-to-solve-the-optimization-problem) doesn't really explain anything. The problem is that the Quadratic Programming method fails to converge on the optimisation problem. The normal course of action is to increase the number of iterations, but I have tested this on the same sized data, with 1,000,000 iterations, and it still fails to converge.

```
options = optimset('maxIter',1000000);

mlp = svmtrain(data,labels,'Kernel_Function','mlp','Method','QP',...
'quadprog_opts',options); 

??? Error using ==> svmtrain at 576
Unable to solve the optimization problem:
Exiting: the solution is unbounded and at infinity;
 the constraints are not restrictive enough. 
```

My question is: is there any reason you are using Quadratic Programming over SMO for your optimisation? Doing exactly the same thing using SMO works fine:

```
mlp = svmtrain(data,labels,'Kernel_Function','mlp','Method','SMO');

mlp = 

          SupportVectors: [40x2 double]
                   Alpha: [40x1 double]
                    Bias: 0.0404
          KernelFunction: @mlp_kernel
      KernelFunctionArgs: {}
              GroupNames: [45x1 double]
    SupportVectorIndices: [40x1 double]
               ScaleData: [1x1 struct]
           FigureHandles: [] 
```

# javascript - JavaScript Document.Write() 在空白页中显示（已删除 HTML）

> ID：14105800
> 
> 赞同：-2
> 
> 时间：2012-12-31T20:26:05.060
> 
> 标签：javascript, html

这是我的代码：

```
<html>
<head>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
</head>
<body>
<h1>Hello world!</h1>
<p>Here is a message: <span id="message"></span></p>
</body>
</html> 
```

​</p>

```
function nextMsg() {
    if (messages.length == 0) {
        document.write("Done");
    } else {
        $('#message').html(messages.pop()).fadeIn(500).delay(100).fadeOut(500, nextMsg);
    }
};

var messages = [
    "Hello!",
    "This is a website!",
].reverse();

$('#message').hide();
nextMsg();
​ 
```

javascript 简单地运行给定的文本字符串，完成后运行`document.write("Done");`

请注意，在 Hello! 之后，这是一个网站！显示时，`document.write("Done");`功能显示在一个单独的页面中删除所有的 HTML。

出现 Hello 和 Website 文本后如何显示永久文本..？感谢所有的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T20:44:34.310

我会这样做：

```
<h1>Hello world!</h1>
<p>Here is a message:</p>
<p id="message"></p>​ 
```

这是`window.onload`jsFiddle 处理的一个块：

```
var messages = ["Hello!","This is a website!"];

(function nextMsg() {
    $('#message')
        .fadeIn(1500)
        .delay(500)
        .fadeOut(1500, !messages.length || nextMsg)
        .html(messages.shift() || 'Done');
})();​ 
```

[http://jsfiddle.net/userdude/5s8y3/100/](http://jsfiddle.net/userdude/5s8y3/100/)

# mysql - 生成一系列数字

> ID：14105801
> 
> 赞同：0
> 
> 时间：2012-12-31T20:26:13.270
> 
> 标签：mysql

> **可能重复：**
> [生成一系列日期](https://stackoverflow.com/questions/14105018/generating-a-series-of-dates)

在mysql中生成给定范围内的一系列数字的最佳方法是什么？

我想到的应用程序是编写一个报告查询，它为每个数字返回一行，而不管是否有任何数据要报告。最简单形式的示例可能是：

```
SELECT numbers.num, COUNT(answers.id)
FROM <series of numbers between X and Y> numbers
     LEFT JOIN answers ON answers.selection_number = numbers.num
GROUP BY 1 
```

我曾尝试创建一个包含大量数字的表格，但这似乎是一个糟糕的解决方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T21:06:33.093

首先，创建一个名为 ints 的表，其中包含从 0 到 9 的每个数字的一​​条记录。

```
CREATE TABLE ints ( i tinyint ); 
```

然后用数据填充该表。

```
INSERT INTO ints VALUES (0),(1),(2),(3),(4),(5),(6),(7),(8),(9); 
```

现在您可以使用如下查询来生成数字序列。

```
SELECT generator.num, COUNT(answers.id)
FROM (
    SELECT a.i*10 + b.i AS num
    FROM ints a, ints b
    ORDER BY 1
) generator
LEFT JOIN answers ON answers.selection_number = generator.num
WHERE generator.num BETWEEN 18 AND 43 
```

要为生成的数字添加另一个位置值，只需添加更多 ints 表的连接并相应地调整计算。以下将生成三位数字：

```
SELECT generator.num, COUNT(answers.id)
FROM (
    SELECT a.i*100 + b.i*10 + c.i AS num
    FROM ints a, ints b, ints c
    ORDER BY 1
) generator
LEFT JOIN answers ON answers.selection_number = generator.num
WHERE generator.num BETWEEN 328 AND 643 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T20:51:50.603

您可以尝试 group by numbers.num 而不是 group by 1

```
SELECT numbers.num, COUNT(answers.id)
FROM numbers
     LEFT JOIN answers ON answers.selection_number = numbers.num
WHERE numbers.num between X and Y
GROUP BY numbers.num 
```

# vb.net - 为什么 Val(5d886) 或 Val(5e886) 会导致溢出异常？

> ID：14105808
> 
> 赞同：1
> 
> 时间：2012-12-31T20:27:00.400
> 
> 标签：vb.net, visual-studio-2010, vb.net-2010

示例代码：

```
Public Class Form1
    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        MessageBox.Show(Val(TextBox1.Text), "Val of text input")
    End Sub
End Class 
```

无论如何，出于简单的好奇心，我想知道为什么会这样？

从其他一些帖子和个人经验中，我知道不推荐使用 VAL(expression)，它只是 VB6 时代的遗留函数。我尝试了所有其他字母，但没有一个引起这个问题，我还尝试了几个变体，它出现在 d 或 e 之后的任何数字加上那么多零（似乎是它的乘法）。我知道该值可能会溢出放置它的数据类型 VAL。我看到 e 是子过程的默认变量，所以这可能就是原因，但我无法弄清楚 d 的任何逻辑。

请说明我对 VB.NET 非常陌生，刚刚完成了大学课程，还没有构建任何实际的应用程序。此外，我们的老师似乎没有教我们我非常感兴趣的错误处理，因为我目前的工作情况有一些相当老的应用程序有问题。还想要任何推荐的错误处理文章/读物

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T21:17:21.457

Val() 函数“将字符串中包含的数字作为适当类型的数值返回”（引自[http://msdn.microsoft.com/en-us/library/k7beh1x9(v=vs.71)。 .aspx](http://msdn.microsoft.com/en-us/library/k7beh1x9(v=vs.71).aspx)）。如果你设置一个像 5exxx 这样的字符串值，它意味着 5 * 10^xxx; 但请注意：该函数返回一个双精度，双精度大约从 ±5.0 x 10^-324 到 ±1.7 x 10^308；因此，例如，字符串 5e307 有效，但 5e308 无效，返回溢出。如果您使用其他一些字母“函数在第一个字符处停止读取字符串，它无法识别为数字的一部分”，因此它不会返回溢出。

我希望它是有帮助的。有一个美好的新年！

# ruby - 如何使用 Watir 从 HTML 中获取文本？

> ID：14105816
> 
> 赞同：3
> 
> 时间：2012-12-31T20:28:41.430
> 
> 标签：ruby, selenium, watir, watir-webdriver

我正在使用带有 Ruby 的 Watir (watir-webdriver) 来编写自动化测试脚本。

我试图`103QUL6M`从 HTML 中获取随机数的文本，在这种情况下是随机数。由于每次运行脚本时随机数文本都不同，因此我想确保我的代码每次都能正常工作。获得文本后，我想将其存储在变量中。

```
<div id="folio-main">
    <div id="main">
    <form action="/servlets/ProcessAction?identifier=orderConfirmationForm" method="post" name="orderConfirmationForm">
    <div id="header">
    <div id="info">
    <div id="OrderDetails" class="detailsLT">
    <h3>Order Details</h3>
    <table cellspacing="0" cellpadding="0" border="0">
    <tbody>
    <tr>
    <td class="tdLabel"> Order Number: </td>
    <td class="tdData">**103QUL6M**</td>
        </tr>
        <tr>
        </tbody>
        </table>
        <ul class="listLinkCol">
        <ul class="listLinkCol">
        <ul class="listLinkCol">
        </div>
        <div id="OrderHelp" class="detailsRT">
        </div>
        <div style="clear:both;"></div>
        <p>
        </form>
        </div>
        </div>
        </div>
        </div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T20:40:29.210

十分简单。

```
$browser.div(:id => "OrderDetails").table(:index => 0).rows[0].cells[1].text 
```

# python - 如何判断 Python 字典中是否存在非标量键

> ID：14105818
> 
> 赞同：0
> 
> 时间：2012-12-31T20:28:50.730
> 
> 标签：python

我尝试使用 'in' 和 has_key()，但如果键不是单个值，这些似乎不起作用：

```
 >>> aarr["x","y","z"]=1
 >>> aarr["x","y","z"]
 1
 >>> if "x","y","z" in aarr:
   File "<stdin>", line 1
     if "x","y","z" in aarr:
           ^
 SyntaxError: invalid syntax
 >>> aarr.has_key("x","y","z")
 Traceback (most recent call last):
  File "<stdin>', line 1, in <module>
 TypeError: has_key() takes exactly one argument (3 given) 
```

尝试`aarr.has_key(["x","y","z"])`或者如果`["x","y","z"] in aarr:`在这两种情况下都抱怨`unhashable type: 'list'`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T20:29:42.943

在表达式中使用逗号时，您正在创建一个*元组。*

使用元组进行测试：

```
if ("x","y","z") in aarr: 
```

你也可以看看`.keys()`学习这个：

```
>>> aarr = {}
>>> aarr["x","y","z"]=1
>>> if ("x","y","z") in aarr:
...     print 'success!'
... 
success!
>>> aarr.keys()
[('x', 'y', 'z')]
>>> aarr.keys()[0]
('x', 'y', 'z') 
```

# maven - “跳过执行肯定火，因为它已经为此配置运行”？

> ID：14105820
> 
> 赞同：5
> 
> 时间：2012-12-31T20:28:51.377
> 
> 标签：maven, command-line, automated-tests, testng, surefire

请原谅新手的问题 - 我的概念模型仍然很不完整......

我正在尝试使用 maven 和 surefire 从命令行重新执行 TestNG 测试。我的命令行如下所示：

```
D:\workspaces\workspace01\aptest>mvn clean install surefire:test -Dtests=myTestNGSuite test 
```

显然我没有得到它，因为我最终得到的输出包括：

```
[INFO] --- maven-surefire-plugin:2.10:test (default-test) @ aptest ---
[INFO] Skipping execution of surefire because it has already been run for this configuration 
```

如何清除配置以便我可以从命令行重新运行我的 TestNG 套件？有没有更好的方法从命令行运行 TestNG 套件？

TIA，-->亚伦

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T00:16:17.467

根据您给出的命令

```
mvn clean install surefire:test -Dtests=myTestNGSuite test 
```

顺便说一句：参数**测试**应该命名为*[test](http://maven.apache.org/surefire/maven-surefire-plugin/test-mojo.html#test)*

这意味着运行安装[生命周期](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#Lifecycle_Reference)e 意味着运行以下步骤：

*   证实
*   初始化，
*   生成源，
*   过程源，
*   生成资源，
*   流程资源，
*   编译，
*   进程类，
*   生成测试源，
*   过程测试源，
*   生成测试资源，
*   过程测试资源，
*   测试编译，
*   过程测试类，
*   测试，
*   准备包，
*   包裹，
*   预集成测试，
*   集成测试，
*   集成测试后，
*   核实，
*   安装

如您所见，在此生命周期内，*测试阶段*已经运行......换句话说，**surefire：test**没有意义，也没有像这样运行生命周期的**测试：**

*   证实
*   初始化，
*   生成源，
*   过程源，
*   生成资源，
*   流程资源，
*   编译，
*   进程类，
*   生成测试源，
*   过程测试源，
*   生成测试资源，
*   过程测试资源，
*   测试编译，
*   过程测试类，
*   测试，

所以要在 TestNG 中运行套件，像这样调用 Maven 就足够了：

```
mvn -Dtest=myTestNGSuite test 
```

或者如果您在此之前运行了测试生命周期，则可以缩短为：

```
mvn -Dtest=myTestNGSuite surefire:test 
```

此外，通常你不应该在 JUnit 和 TestNG 中使用测试套件，因为 maven-surefire-plugin 会自动识别正确位置（src/test/java）中的单元测试。所以没有必要编写测试套件。顺便说一句，您应该定义 maven-surefire-plugin 的更新版本（同时为 2.13）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T00:12:13.010

Surefire 插件的测试目标是在测试阶段自动运行，所以第一次运行

```
 mvn clean install -Dtest=MyTestNGTest 
```

然后如果你想重新运行做一个

```
mvn install -Dtest=MyTestNGTest 
```

请注意，我没有调用 clean 目标，因此只有您对测试用例或代码的更改会被重新编译，并且我不会调用 surefire 插件的测试目标。

# c# - 如何使用 start 和 limit 进行分页

> ID：14105824
> 
> 赞同：1
> 
> 时间：2012-12-31T20:29:02.407
> 
> 标签：c#, sql-server-2008, paging, extjs4.1

我正在尝试使用带有网格的分页。以下方法将表格中的所有内容都提供给网格。我如何考虑开始和限制，其中开始是页码，限制是每页的记录。基本上 extjs 工具栏会寻找我的方法来按需返回开始和限制。我尝试了很多解决方案，但似乎无法正常工作。这就是为什么我以简单的方式把它放在这里。

这是我的 C# 结束

```
public string myRecord(int start, int limit)
{
    List<gridPaging> result = new List<gridPaging>();
    using (SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["ApplicationServices2"].ConnectionString))
    {
        SqlCommand cmd = con.CreateCommand();

        cmd.CommandText = "SELECT * FROM myTable ORDER BY Q1";
        con.Open();
        SqlDataReader reader = cmd.ExecuteReader();
        while (reader.Read())
        {
            gridPaging gp = new gridPaging();

            gp.Column1 = reader["Column1"].ToString().Trim();
            gp.Column2 = reader["Column2"].ToString().Trim();
            gp.Column3 = reader["Column3"].ToString().Trim();
            gp.Column4 = reader["Column4"].ToString().Trim();
            result.Add(gp);
        }

        return JsonConvert.SerializeObject(result);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T20:36:20.783

如果这与您当前的实现类似，您可以修改您的 SQL 以利用`ROW_NUMBER`：T-SQL: [Paging with ROW_NUMBER()](http://blogs.x2line.com/al/archive/2005/11/18/1323.aspx)

或者，如果您有某种 LINQ 实现，则可以使用`.Skip()`和`.Take()`方法进行分页。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T20:37:27.567

在 T-SQL 中，您有两个内置函数可以帮助您；第一个是`Row_Number`函数，它根据特殊的 ORDER BY 子句为结果集的每一行分配一个唯一的递增序号，第二个是`TOP`关键字，它限制要返回的最大行数。

基本上，您的查询应如下所示：

```
SELECT TOP @limit * FROM myTable WHERE (ROW_NUMBER() OVER (ORDER BY Q1)) > @limit * @start ORDER BY Q1 
```

然后，使用 Command.CreateParameter 从 C# 代码中插入参数 @start 和 @limit 的值。例如，对于每页`start`15 个结果的结果的第三页（使用零索引值 2），这将计算为语句

```
SELECT TOP 15 * FROM myTable WHERE (ROW_NUMBER() OVER (ORDER BY Q1)) > 30 ORDER BY Q1 
```

...它提供了从 31 到 45 的整体查询的行，前两页的查询分别产生了 1-15 和 16-30 行。

# javascript - 循环故障的二进制转换器

> ID：14105828
> 
> 赞同：1
> 
> 时间：2012-12-31T20:29:50.140
> 
> 标签：javascript, string, for-loop, binary, converter

所以我正在为科学项目制作一个二进制转换器，但我遇到了一些困难。

到目前为止，我正在尝试编写一个 for 循环，将用户输入的每个单独变量都放入一个单独的变量中。

但是，我找不到只创建与提供的字符串长度相同数量的变量的方法，所以我只能使用 document.write，这不是我想要的。

谁能帮我弄清楚如何将字符串的每个字符存储到一个单独的变量中并在此处发布该解决方案？

感谢您的考虑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T20:36:46.553

字符串是类似数组的对象。它们公开一个`length`属性并支持数组索引器来访问字符串的各个字符。您可以简单地使用`for`循环来遍历字符。

```
var myString = "Hello World";
for(var i=0; i<myString.length; i++) {
    var character = myString[i];
    ...
} 
```

# python - 使用 max() 函数查找所有最大长度的字符串

> ID：14105829
> 
> 赞同：3
> 
> 时间：2012-12-31T20:29:55.023
> 
> 标签：python, max

> **可能重复：**
> [列表中最长的字符串](https://stackoverflow.com/questions/13964637/longest-strings-from-list)

```
lst = [str1, str2, str3, ...]
max(lst, key=len) 
```

这仅返回具有最大长度的字符串之一。有没有办法在不定义另一个程序的情况下做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T20:32:35.010

怎么样：

```
maxlen = len(max(l, key=len)) 
maxlist = [s for s in l if len(s) == maxlen] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-31T20:35:12.573

如果要获取最大长度的*所有*值，则可能需要按长度对列表进行排序；那么您只需要获取所有值，直到长度发生变化。`itertools`提供了多种方法来做到这一点——<code>takewhile,`groupby`等。例如：

```
>>> l = ['abc', 'd', 'ef', 'ghi', 'j']
>>> l2 = sorted(l, key=len, reverse=True)
>>> groups = itertools.groupby(len, l2)
>>> maxlen, maxvalues = next(groups)
>>> print(maxlen, list(maxvalues))
3, ['abc', 'ghi'] 
```

如果你想要一个单行：

```
>>> maxlen, maxvalues = next(itertools.groupby(len, sorted(l, key=len, reverse=True)))
>>> print(maxlen, list(maxvalues)) 
```

当然，如果您愿意，您总是可以只遍历列表两次——首先找到最大长度，然后找到所有匹配值：

```
>>> maxlen = len(max(l, key=len))
>>> maxvalues = (value for value in l if len(value) == maxlen)
>>> print(maxlen, list(maxvalues)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T20:36:08.640

只是为了完整起见，[`filter`](http://docs.python.org/2/library/functions.html#filter)也是一种选择：

```
maxlens = filter(lambda s: len(s)==max(myList, key=len), myList) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T21:43:30.810

这是一个一次性解决方案，收集迄今为止发现的最长的单词。

```
def findLongest(words):
    if not words:
        return []
    worditer = iter(words)
    ret = [next(worditer)]
    cur_len = len(ret[0])
    for wd in worditer:
        len_wd = len(wd)
        if len_wd > cur_len:
            ret = [wd]
            cur_len = len_wd
        else:
            if len_wd == cur_len:
                ret.append(wd)
    return ret 
```

以下是一些测试列表的结果：

```
tests = [
    [],
    "Four score and seven years ago".split(),
    "To be or not to be".split(),
    "Now is the winter of our discontent made glorious summer by this sun of York".split(),
    ]

for test in tests:
    print test
    print findLongest(test)
    print

[]
[]

['Four', 'score', 'and', 'seven', 'years', 'ago']
['score', 'seven', 'years']

['To', 'be', 'or', 'not', 'to', 'be']
['not']

['Now', 'is', 'the', 'winter', 'of', 'our', 'discontent', 'made', 'glorious', 'summer', 'by', 'this', 'sun', 'of', 'York']
['discontent'] 
```

# python - 使用nose2进行模块级设置和拆卸

> ID：14105836
> 
> 赞同：3
> 
> 时间：2012-12-31T20:31:36.647
> 
> 标签：python, installation, nose

如何使用nose2 指示模块级设置和拆卸方法？它似乎与鼻子不同，我找不到文档。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T20:46:56.143

引入的`layers`插件来组织装置和每个模块的设置。[https://nose2.readthedocs.org/en/latest/plugins/layers.html](https://nose2.readthedocs.org/en/latest/plugins/layers.html)

# android - 另一个“如何找到类名”

> ID：14105840
> 
> 赞同：2
> 
> 时间：2012-12-31T20:32:03.143
> 
> 标签：android, android-intent, broadcastreceiver, package, classname

我已经使用了搜索功能，并且我已经阅读并尝试了很多示例，但是我找不到我的问题的解决方案......所以，我们开始吧：

我只想将 Intents 发送到 1 个 BroadcastReceiver。因此我需要创建一个新的 Intent 并将其发送到 packageName 和 packageClass：

`intent.setComponent(new ComponentName(packageName, className));`

要找出 packageName 和 className 我使用以下代码：

```
String appInfo = list.get(myPlayer).activityInfo.toString();
Log.d("TAG", "app " + appInfo);

String packageName = list.get(myPlayer).activityInfo.packageName.toString();    
Log.d("TAG", "package " + packageName);

String className = list.get(myPlayer).activityInfo.getClass().getName().toString();
Log.d("TAG", "class " + className); 
```

从 logcat 我得到以下结果（播放音乐的示例）：

```
app ActivityInfo{417bd5e0 com.google.android.music.MediaButtonIntentReceiver}
package com.google.android.music
class android.content.pm.ActivityInfo 
```

这不是很奇怪吗？出于某种原因，我希望类日志只有“MediaButtonIntentReceiver”而不是“android.content.pm.ActivityInfo”！！！

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T10:43:05.583

如果您正在搜索`packageName`和`className`填充有序广播，我真的建议您检查您可能正在使用的[ResolveInfo对象的内容](http://developer.android.com/reference/android/content/pm/ResolveInfo.html)

*   ResolveInfo 包含[ActivityInfo](http://developer.android.com/reference/android/content/pm/ActivityInfo.html)对象
*   ActivityInfo 包含[ApplicationInfo](http://developer.android.com/reference/android/content/pm/ApplicationInfo.html)对象
*   ApplicationInfo 对象包含您需要的内容

所以在你的情况下，如果你需要完成意图的内容，我可能会建议

```
 ResolveInfo ri = ... // get where you need
    Intent intent = new Intent();
    intent.setComponent(new ComponentName(
        ri.activityInfo.applicationInfo.packageName,
        ri.activityInfo.applicationInfo.className)); 
```

这应该适合你的情况

**编辑：**在某些情况下，您为特定意图获得 ResolveInfo，`className`应该是`null`. 在这些情况下，我成功使用`ri.activityInfo.name`which 返回正确`className`，因为`activityInfo`它适用于一项特定活动

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T20:42:29.797

简单地说：`getClass()`没有做你期望它做的事情。
然而，使用你所拥有的，你可以得到你想要的东西：

```
String appInfo = list.get(myPlayer).activityInfo.toString();
String className = appInfo.substring(appInfo.lastIndexOf(".") + 1, appInfo.length() - 1);
Log.d("TAG", "class " + className); 
```

* * *

请注意，这`packageName`是 ActivityInfo 的一个字段，而不是一个方法。虽然[`getClass()`](http://developer.android.com/reference/java/lang/Object.html#getClass%28%29)是一种方法，但它是一种方法`Object`，来自它的文档：

> 返回表示此对象类的唯一 Class 实例。

因此，您要询问 的名称`activityInfo`，即（如您所知）`ActivityInfo`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T20:37:17.730

这一点都不奇怪。这里：

```
String className = list.get(myPlayer).activityInfo.getClass().getName().toString() 
```

你得到了`ActivityInfo`对象的类。我不确定你到底想做什么，但这就是为什么你看到你所看到的。

# winapi - GetRandomRgn 不排除工具提示

> ID：14105842
> 
> 赞同：2
> 
> 时间：2012-12-31T20:32:09.327
> 
> 标签：winapi, tooltip, gdi

`GetRandomRgn( hdc, hrgn, SYSRGN )`确定窗口的系统剪辑区域。当我的窗户被其他窗户部分覆盖时，我得到了正确的区域。

但是，如果覆盖我的窗口的窗口是工具提示，则不会从函数返回的区域中减去它。

知道为什么不排除工具提示窗口，我可以做些什么来排除它们而不自己枚举所有窗口，确定它们如何影响我的窗口等？

谢谢你。

更新：这是在禁用 Aero 的 Windows 7 上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T22:00:19.377

因为工具提示是分层的窗口。分层窗口不参与经典遮挡。（一个原因是它们有 alpha，所以遮挡不是一个二元概念。）你没有说为什么你需要这个信息，所以除了“是的”之外没有什么可以说的了。

# javascript - 使用 ng-style 设置样式后在悬停时更改背景颜色

> ID：14105845
> 
> 赞同：12
> 
> 时间：2012-12-31T20:33:05.983
> 
> 标签：javascript, angularjs

我有一个单词列表，每个单词都有一个数字（条纹）。我使用 AngularJS 的 ng 样式根据分配给它的数字设置每个单词的背景颜色。

html

```
 <ul class="unstyled">
     <li class="tHi" ng-repeat="item in items" ng-click="getEdit(item.word)" ng-style="bgstyle(item.streak)">
       <span>{{item.word}} {{item.streak}}</span>
     </li>
   </ul> 
```

从 ng 样式调用的 javascript。

```
$scope.bgstyle = function (streak) {
    var red = 255;
    var green = 255-streak;
    var blue = 255-streak;
    var rgb = blue | (green << 8) | (red << 16);
    var sColor = '#' + rgb.toString(16);
    return {backgroundColor: sColor};
} 
```

这可行，但是，我希望当鼠标悬停在一个单词上时突出显示背景。我添加了一个“tHi”类，它通常会在悬停时改变背景，但它被添加的样式覆盖。

这是一个演示此问题的[jsfiddle 。](http://jsfiddle.net/5rAyJ/)

有没有比 ng-style 更好的方法来设置背景，使其与分配给每个单词的数字相对应？或者有没有办法在用户将鼠标悬停在一个词上时突出显示？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-31T20:44:56.523

这是我实际上建议`!important`在 CSS 中使用的极少数情况之一：

```
.tHi:hover {
    cursor: pointer;
    background-color: #9f9 !important;
} 
```

[更新了 JS Fiddle 演示](http://jsfiddle.net/davidThomas/5rAyJ/1/)。

使用`!important`关键字本质上会导致应用规则而不管选择器的特殊性（当然，假设更具体的选择器也没有*关键字*）`!important`。但是，*如果*您或您的同事忘记使用`!important`.

参考：

*   [`!important`](http://www.w3.org/TR/CSS21/cascade.html#important-rules).

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-31T21:55:37.083

如果不想使用`!important`，可以使用[ng-mouseover](http://docs.angularjs.org/api/ng.directive:ngMouseover)动态添加类：

```
 <li ng-repeat="item in items" ng-click="getEdit(item.word)" 
    ng-style="bgstyle(item.streak)" ng-mouseover="hover($event)"> 
```

然后添加到您的控制器：

```
$scope.hover = function(e) {
    angular.element(e.srcElement).addClass('tHi')
} 
```

在控制器中操作 DOM 不是“最佳实践”。一个指令会更好。

**更新：**这是一个指令

```
myApp.directive('ngHover', function() {
  return {
    link: function(scope, element) {
       element.bind('mouseenter', function() {
          angular.element(element.children()[0]).addClass('tHi')
       })
    }
  }
}); 
```

`children()[0]`用于将class应用于span，而不是li，以免与ng-style冲突。

使用如下：

```
<li ng-repeat="item in items" ng-click="getEdit(item.word)"
  ng-style="bgstyle(item.streak)" ng-hover> 
```

[小提琴](http://jsfiddle.net/mrajcok/HYqgW/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-22T01:36:43.183

我发现通过指令是最简单的方法。

```
App.directive('attr', function(){
    return function(scope, element) {
        element.bind('mouseenter', function(){
            element.addClass('hover');
        }).bind('mouseleave', function(){
          element.removeClass('hover');
        })
    }
}) 
```

# objective-c - UIViewController 未调用 viewDidLoad 且未创建 UIView 导致崩溃

> ID：14105846
> 
> 赞同：1
> 
> 时间：2012-12-31T20:33:13.613
> 
> 标签：objective-c, ios, uitableview, uiview, uiviewcontroller

我已经在这里呆了几个小时了。我在这个项目中有几个视图控制器，没有一个会引起问题，但现在突然之间有了这个新的。我什至删除了它并制作了一个“测试”视图控制器，但没有骰子。我能说的最好的就是它实际上并没有创建它的视图，因此当引用该视图时，应用程序崩溃了。除了 -viewDidLoad 方法中的日志语句外，测试 VC 没有添加或删除代码。我没有覆盖-loadView。我尝试将视图添加到子视图，尝试将 VC 推入导航控制器，甚至尝试简单地记录 test.view。我曾尝试使用 NIB 创建 VC，但没有尝试过。绝对没有任何效果。任何帮助将不胜感激。

**在另一个 VC 内部创建 VC。日志语句导致崩溃。但是添加为子视图甚至推入导航控制器也是如此。**

```
 TestViewController *test = [[TestViewController alloc] init];
NSLog(@"test view = ", test.view); 
```

**TestViewController 的实现。**

```
 @implementation TestViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad {
    [super viewDidLoad];
    // Do any additional setup after loading the view.
    NSLog(@"view = %@", self.view);
}

- (void)didReceiveMemoryWarning {
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T22:23:02.840

我想说仔细检查视图中的所有连接。特别是如果它被复制或移动，因为它很容易与旧 VC 建立连接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T21:36:48.247

如果您没有在项目中使用 ARC，则不要检查 nib 文件的自动布局框。如果您使用的是 ARC，那么它与文件所有者的连接可能是唯一的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-29T05:32:40.963

如果您使用 xib，并且项目是从其他 xib 或故事板复制的，请确保根视图存在，然后拖动到文件的所有者。

# firefox-addon - 如何停用上下文菜单项（Mozilla 插件套件）

> ID：14105849
> 
> 赞同：0
> 
> 时间：2012-12-31T20:33:51.373
> 
> 标签：firefox-addon, firefox-addon-sdk, contextmenu

我想在某些情况下停用我的插件的所有顶级`context-menu`项目（例如，当用户禁用插件时）。
不知何故，除了完全销毁该物品外，我无法弄清楚这是如何完成的；但我更喜欢使用一种可以在停用和激活之间轻松切换的方法。
必须有某种方法可以解决缺少删除或停用方法的问题。对于不在顶层但属于子菜单的项目，这很`addItem()`容易`removeItem()`通过`parentMenu`.

* * *

编辑：
顶层的项目确实具有该属性`parentMenu`-`null`尽管如此。所以问题似乎是 context-menu.js 只为子菜单提供 removeItem/addItem 方法，但不为顶级项目的 parentNode 提供。

* * *

我仍然觉得`context-menu`-api 有点令人困惑。该项目没有 onClick 方法。在我看来，我需要为每个项目创建一个内容脚本，而不是（？）
另外，我还没有找到一种方法将项目放置在我想要的顶层（而不是被迫放在底部）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T23:47:05.353

Upcoming changes in the SDK's context-menu module due to ship at the end of the month should allow you to use addItem()/removeItem(). This re-written implementation of the context-menu module will ship in SDK 1.13\. Currently there is no way to 'deactivate' an item programmatically until this new version is available.

# asp.net - 如何在表格/网格中拖放列值？

> ID：14105850
> 
> 赞同：0
> 
> 时间：2012-12-31T20:33:51.990
> 
> 标签：asp.net, grid, drag

我有一个现有的 Silverlight 应用程序，它允许单击列单元格并在行中向左或向右拖动。完成此操作后，原始单元格中的值将被复制到“拖过”单元格中（可能不止一个）。同时，向服务器发送消息以触发数据库更新。

我现在需要将此应用程序移植到 ASP.Net 并使其对平板电脑友好。我已经搜索了高低，并查看了各种网格提供程序并通过 jquery 插件，但无法找到已经这样做的东西。关于现有解决方案的任何想法或如何开始？

谢谢！

![图片来自现有 Silverlight 应用程序](../Images/846f24b9ffa0fb9b9302b9b1bcd594dd.png)

# c - 函数是如何存储在内存中的？

> ID：14105856
> 
> 赞同：9
> 
> 时间：2012-12-31T20:34:36.443
> 
> 标签：c, linux, function, memory, objdump

我一直在深入研究 Linux 和 C，我很好奇函数是如何存储在内存中的。我有以下功能：

```
void test(){
    printf( "test\n" );
} 
```

很简单。当我在具有此功能的可执行文件上运行 objdump 时，我得到以下信息：

```
08048464 <test>:
 8048464:       55                      push   %ebp
 8048465:       89 e5                   mov    %esp,%ebp
 8048467:       83 ec 18                sub    $0x18,%esp
 804846a:       b8 20 86 04 08          mov    $0x8048620,%eax
 804846f:       89 04 24                mov    %eax,(%esp)
 8048472:       e8 11 ff ff ff          call   8048388 <printf@plt>
 8048477:       c9                      leave
 8048478:       c3                      ret 
```

这一切看起来都不错。有趣的部分是当我运行以下代码时：

```
int main( void ) {
    char data[20];
    int i;    
    memset( data, 0, sizeof( data ) );
    memcpy( data, test, 20 * sizeof( char ) );
    for( i = 0; i < 20; ++i ) {
        printf( "%x\n", data[i] );
    }
    return 0;
} 
```

我得到以下信息（这是不正确的）：

```
55
ffffff89
ffffffe5
ffffff83
ffffffec
18
ffffffc7
4
24
10
ffffff86
4
8
ffffffe8
22
ffffffff
ffffffff
ffffffff
ffffffc9
ffffffc3 
```

如果我选择省略 memset(data, 0, sizeof(data)); 行，则最右边的字节是正确的，但其中一些仍然具有前导 1。

有没有人解释为什么

A）使用 memset 清除我的数组会导致函数的不正确（编辑：不准确）表示，并且

解决方案：是由于使用了 memset(data, 0, sizeof(data))，而不是 memset(data, 0, 20 * sizeof(unsigned char))。内存没有完全设置，因为它只查看指针的大小而不是整个数组的大小。

B）这个字节存储在内存中是什么？整数？字符？我不太明白这里发生了什么。（澄清：我将使用什么类型的指针来遍历内存中的此类数据？）

解决方案：我很笨。我忘记了 unsigned 关键字，这就是整个问题的来源:(

任何帮助将不胜感激 - 我在四处搜索时找不到任何东西。

尼尔

PS：我的直接想法是，这是 x86 的指令不以字节或半字节边界结束的结果。但这并没有多大意义，也不应该引起任何问题。

感谢 Will 指出我的 char 类型错误。它应该是无符号字符。但是，我仍然对如何访问单个字节感到好奇。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T20:41:10.183

我相信您`chars`正在将*符号扩展*到整数的宽度。通过在打印时显式转换值，您可能会得到更接近您想要的结果。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-31T20:46:35.263

这是您尝试执行的代码的一个更简单的案例：

```
int main( void ) {
    unsigned char *data = (unsigned char *)test;
    int i;    
    for( i = 0; i < 20; ++i ) {
        printf( "%02x\n", data[i] );
    }
    return 0;
} 
```

我所做的更改是删除多余的缓冲区，而不是使用指针进行测试，使用 unsigned char 代替 char，并将 printf 更改为使用“%02x”，以便它始终打印两个字符 [它不会修复'负' 数字以 ffffff89 左右出现 - 这`unsigned`由数据指针上的 固定。

x86 中的所有指令都以字节边界结束，编译器通常会插入额外的“填充指令”以确保分支目标与 4、8 或 16 字节边界对齐以提高效率。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T20:41:02.330

回答 B) 字节作为字节存储在内存中。内存位置中包含恰好 1 个字节的内存位置。（一个字节是`unsigned char`）

提示：拿起一本关于计算机组织的好书（我最喜欢的是 Carl Hamachar 的书，并且非常了解内存是如何在内部表示的）

在您的代码中：

```
memset( data, 0, sizeof( data ) );// must be memset(data,0,20);
memcpy( data, test, 20 * sizeof( char ) ); 
for( i = 0; i < 20; ++i ) {
    printf( "%x\n", data[i] );// prints a CHARACTER up-casted to an INTEGER in HEX representation, hence the extra `0xFFFFFF`
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-31T20:42:42.130

问题出在您要打印的代码中。

从数据数组加载一个字节。（一个字节 == 一个字符）

字节被转换为“int”，因为这是编译器知道“printf”想要的。为此，它将字节扩展为 32 位双字。这就是打印为十六进制的内容。（这意味着高位为 1 的字节将转换为 32 位值，其中 8-31 位全部设置。这就是您看到的 ffffffxx 值。）

在这种情况下，我要做的是自己转换它：

```
 printf( "%x\n", ((int)data[i] && 0xFF) ); 
```

然后它将正确打印。（如果您正在加载 16 位值，您将使用 0xffff 进行 AND。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-31T20:45:59.127

打印看起来很奇怪，因为您正在打印带符号的值，因此它们正在被符号扩展。

但是，打印的功能也略有不同。看起来不是用字符串的地址加载 EAX，并将其填充到堆栈中，而是直接存储地址。

```
push        ebp  
mov         ebp,esp  
sub         esp,18h  
mov         dword ptr [esp],8048610h  
call        <printf>  
leave  
ret 
```

至于为什么当您在代码的其他地方进行看似良性的更改时它会发生变化 - 好吧，它是允许的。这就是为什么最好不要依赖未定义的行为。

# visual-studio - 代码图在 VS2012 中不起作用

> ID：14105857
> 
> 赞同：1
> 
> 时间：2012-12-31T20:34:47.637
> 
> 标签：visual-studio, visual-studio-2012, code-map

我尝试为我的解决方案生成一个代码映射，但它会说：`Unable to connect to the specified database`.

具体来说，它正在尝试连接到 (LocalDB)\v11.0

为什么它会爆炸，为什么需要连接到数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T23:20:58.597

不知何故未安装 LocalDb - 通常它与 VS 2012 一起安装。所以我安装了[SQL Server Data Tools for VS2012](http://msdn.microsoft.com/en-us/jj650015)，它也安装了 LocalDb

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-10T00:51:23.390

Visual Studio 使用代码索引数据库来帮助存储和创建代码映射。

# sql - 临时表到主表插入或更新与审计和日志记录

> ID：14105866
> 
> 赞同：4
> 
> 时间：2012-12-31T20:36:18.947
> 
> 标签：sql, sql-server, tsql

我必须从中选择记录`temptable`并插入或更新到`mastertable`. 如果更改了单个字段，那么我需要`history`使用以下内容更新我的表：

*   `RecordID`
*   `ColumnChanged`
*   `OldValue`
*   `NewValue`

`temptable`在执行从到的插入或更新`mastertable`时，由于外键违规（或任何其他错误）而发生的任何错误都应记录到`error`表中。

我需要更改历史记录和错误记录，以便如果单个记录失败，我可以再次重新运行该过程。

如何使用 T-SQL 做到这一点？任何代码片段都会有所帮助。

以下是我正在使用的表格列：

1.  **模板**
    COL1、COL2、COL3、COL4、COL5

2.  **可控制的COL1、COL2、**COL3****

***   **HISTORY**
    RecordID、ColumnChanged、OldValue、NewValue

    *   **ERROR 错误**
    代码、错误消息** 

 **我需要使用游标，因为在执行插入或更新时我需要遍历每条记录，并记录在插入或更新期间由于数据错误而发生的任何错误。

我需要将`flagcolumn`所有成功的插入或更新标记为“Y”，将所有失败的记录标记为“N”，以便在更正数据后重新加载它们。

我已经习惯`sqlbulkcopy`将数据加载到`temptable`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-06T15:24:24.107

试试这个——

**架构：**

```
CREATE TABLE dbo.HistoryTable
(
    HistoryTableID INT IDENTITY(1,1) PRIMARY KEY NOT NULL,
    PKRecordID INT NOT NULL,
    ColumnChanged VARCHAR(50) NOT NULL,
    OldValue VARCHAR(10) NOT NULL,
    NewValue VARCHAR(10) NOT NULL,
    ChangedDate DATETIME NOT NULL DEFAULT (GETDATE())
)
GO

CREATE TABLE dbo.ForeignKeyTableCOL2 (COL2 VARCHAR(10) PRIMARY KEY NOT NULL)
GO

CREATE TABLE dbo.ForeignKeyTableCOL1 (COL1 VARCHAR(10) PRIMARY KEY NOT NULL)
GO

CREATE TABLE dbo.ErrorTable
(
    ErrorTableID INT IDENTITY(1,1) PRIMARY KEY NOT NULL,
    PKRecordID INT NOT NULL,
    TableName VARCHAR(50) NOT NULL,
    TablePK INT NOT NULL,
    ErrorDateTime DATETIME NOT NULL DEFAULT (GETDATE()),
    ErrorCode INT NOT NULL,
    ErrorMsg VARCHAR(2000) NOT NULL
)
GO

CREATE TABLE dbo.TempTable
(
    TempTableID INT IDENTITY(1,1) NOT NULL,
    PKRecordID INT NOT NULL,
    COL1 VARCHAR(10) NOT NULL,
    COL2 VARCHAR(10) NOT NULL,
    COL3 VARCHAR(10) NOT NULL,
    COL4 VARCHAR(10) NOT NULL,
    COL5 VARCHAR(10) NOT NULL,
    Success CHAR(1) NOT NULL DEFAULT ('N')
)
GO

CREATE TABLE dbo.MasterTable
(
    PKRecordID INT NOT NULL,
    COL1 VARCHAR(10) NOT NULL,
    COL2 VARCHAR(10) NOT NULL,
    COL3 VARCHAR(10) NOT NULL,
    COL4 VARCHAR(10) NOT NULL,
    COL5 VARCHAR(10) NOT NULL
)
GO

ALTER TABLE dbo.MasterTable  WITH CHECK ADD  CONSTRAINT FK_MasterTable_ForeignKeyTableCOL1 FOREIGN KEY(COL1)
REFERENCES dbo.ForeignKeyTableCOL1 (COL1)

ALTER TABLE dbo.MasterTable CHECK CONSTRAINT FK_MasterTable_ForeignKeyTableCOL1

ALTER TABLE dbo.MasterTable  WITH CHECK ADD  CONSTRAINT FK_MasterTable_ForeignKeyTableCOL2 FOREIGN KEY(COL2)
REFERENCES dbo.ForeignKeyTableCOL2 (COL2)

ALTER TABLE dbo.MasterTable CHECK CONSTRAINT FK_MasterTable_ForeignKeyTableCOL2

INSERT dbo.ForeignKeyTableCOL1 (COL1) 
VALUES ('A'), ('B'), ('C')
INSERT dbo.ForeignKeyTableCOL2 (COL2)
VALUES ('A'), ('B'), ('C')

INSERT dbo.TempTable (PKRecordID, COL1, COL2, COL3, COL4, COL5)
VALUES 
    (1, 'A', 'A', 'A', 'A', 'A'),
    (2, 'B', 'B', 'B', 'B', 'B'),
    (3, 'C', 'C', 'C', 'C', 'C'),
    (1, 'D', 'A', 'A', 'A', 'A'),
    (1, 'A', 'D', 'A', 'A', 'A'),
    (1, 'D', 'D', 'A', 'A', 'A'),
    (2, 'A', 'B', 'B', 'B', 'B'),
    (3, 'A', 'B', 'C', 'C', 'C'),
    (4, 'D', 'D', 'D', 'D', 'D') 
```

**询问：**

```
SET NOCOUNT ON;

DECLARE 
      @PKRecordID INT
    , @COL1 VARCHAR(10)
    , @COL2 VARCHAR(10)
    , @COL3 VARCHAR(10)
    , @COL4 VARCHAR(10)
    , @COL5 VARCHAR(10)
    , @TempTableID INT
    , @New_Row XML
    , @Old_Row XML

DECLARE cur CURSOR LOCAL FAST_FORWARD READ_ONLY FOR
    SELECT 
          t.TempTableID
        , t.PKRecordID
        , t.COL1
        , t.COL2
        , t.COL3
        , t.COL4
        , t.COL5
        , New_Row = CAST('<r><s>' + t.COL1 + '</s><s>' + t.COL2 + '</s><s>' + t.COL3 + '</s><s>' + t.COL4 + '</s><s>' + t.COL5 + '</s></r>' AS XML)
        , Old_Row = CAST('<r><s>' + m.COL1 + '</s><s>' + m.COL2 + '</s><s>' + m.COL3 + '</s><s>' + m.COL4 + '</s><s>' + m.COL5 + '</s></r>' AS XML)  
    FROM dbo.TempTable t
    LEFT JOIN dbo.MasterTable m ON t.PKRecordID = m.PKRecordID

OPEN cur

FETCH NEXT FROM cur INTO 
      @TempTableID
    , @PKRecordID
    , @COL1
    , @COL2
    , @COL3
    , @COL4
    , @COL5
    , @New_Row
    , @Old_Row

WHILE @@FETCH_STATUS = 0 BEGIN

    BEGIN TRY

        IF @Old_Row IS NOT NULL BEGIN

            UPDATE dbo.MasterTable 
            SET 
                  COL1 = @COL1
                , COL2 = @COL2
                , COL3 = @COL3
                , COL4 = @COL4
                , COL5 = @COL5
            WHERE PKRecordID = @PKRecordID

            INSERT dbo.HistoryTable 
            (
                  PKRecordID
                , ColumnChanged
                , OldValue
                , NewValue
            )
            SELECT 
                  @PKRecordID
                , 'COL' + CAST(new_id AS VARCHAR(5))
                , old_value
                , new_value
            FROM (
                SELECT 
                      new_value = n.value('(.)1', 'VARCHAR(10)')
                    , new_id = 1 + n.value('for $i in . return count(../*. << $i)', 'int')
                    , old_value = o.value('(.)1', 'VARCHAR(10)')
                    , old_id = 1 + o.value('for $i in . return count(../*. << $i)', 'int')
                FROM (SELECT a = 1) d
                CROSS APPLY @New_Row.nodes('/r/s') t(n)
                CROSS APPLY @Old_Row.nodes('/r/s') k(o)
            ) data
            WHERE new_id = old_id
                AND NULLIF(new_value, '') != NULLIF(old_value, '')

            UPDATE dbo.TempTable 
            SET Success = 'Y'
            WHERE TempTableID = @TempTableID

        END
        ELSE BEGIN

            INSERT dbo.MasterTable 
            (
                  PKRecordID
                , COL1
                , COL2
                , COL3
                , COL4
                , COL5
            )
            SELECT 
                  @PKRecordID
                , @COL1
                , @COL2
                , @COL3
                , @COL4
                , @COL5           

            UPDATE dbo.TempTable 
            SET Success = 'Y'
            WHERE TempTableID = @TempTableID

        END

    END TRY
    BEGIN CATCH

        INSERT dbo.ErrorTable 
        (
              PKRecordID
            , TableName
            , TablePK
            , ErrorDateTime
            , ErrorCode
            , ErrorMsg
        )
        SELECT 
              @PKRecordID
            , 'TempTable'
            , @TempTableID
            , GETDATE()
            , ERROR_NUMBER()
            , ERROR_MESSAGE()

    END CATCH

    FETCH NEXT FROM cur INTO 
          @TempTableID
        , @PKRecordID
        , @COL1
        , @COL2
        , @COL3
        , @COL4
        , @COL5
        , @New_Row
        , @Old_Row

END

CLOSE cur
DEALLOCATE cur 
```

**这可能对您有所帮助：**

```
CREATE TRIGGER ...
   ON ...
   INSTEAD OF INSERT, UPDATE
AS
BEGIN

    SET NOCOUNT ON
    SET XACT_ABORT ON

    DECLARE @DocumentUID UNIQUEIDENTIFIER
    ...

    DECLARE cur CURSOR FORWARD_ONLY READ_ONLY LOCAL FOR
        SELECT DocumentUID, ...
        FROM INSERTED

    OPEN cur

    FETCH NEXT FROM cur INTO @DocumentUID, ...

    WHILE @@FETCH_STATUS = 0 BEGIN

        DECLARE 
              @BeforeChange NVARCHAR(MAX)
            , @AfterChange NVARCHAR(MAX)

        SELECT 
              @BeforeChange = (
                SELECT * 
                FROM DELETED 
                WHERE DocumentUID = @DocumentUID 
                FOR XML RAW, ROOT
              )
            , @AfterChange = (
                SELECT * 
                FROM INSERTED 
                WHERE DocumentUID = @DocumentUID 
                FOR XML RAW, ROOT
              )

        IF EXISTS(
            SELECT 1 
            FROM dbo.Documents 
            WHERE DocumentUID = @DocumentUID
        )
        BEGIN

            INSERT INTO ...
            SELECT @BeforeChange, @AfterChange

        END
        ELSE BEGIN

            ...

        END

        FETCH NEXT FROM cur INTO @DocumentUID, ...

    END

    CLOSE cur
    DEALLOCATE cur

END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-04T21:25:55.873

设置我们的模式和表进行测试

```
SET NOCOUNT ON

IF OBJECT_ID('TempTable', 'U') IS NOT NULL DROP TABLE TempTable;
IF OBJECT_ID('MasterTable', 'U') IS NOT NULL DROP TABLE MasterTable;
IF OBJECT_ID('ForeignKeyTableCOL1', 'U') IS NOT NULL DROP TABLE ForeignKeyTableCOL1;
IF OBJECT_ID('ForeignKeyTableCOL2', 'U') IS NOT NULL DROP TABLE ForeignKeyTableCOL2;
IF OBJECT_ID('HistoryTable', 'U') IS NOT NULL DROP TABLE HistoryTable;
IF OBJECT_ID('ErrorTable', 'U') IS NOT NULL DROP TABLE ErrorTable;

CREATE TABLE ForeignKeyTableCOL1 (COL1 varchar(10) PRIMARY KEY)
CREATE TABLE ForeignKeyTableCOL2 (COL2 varchar(10) PRIMARY KEY)
CREATE TABLE TempTable (TempTableID int IDENTITY(1,1), PKRecordID int, COL1 varchar(10), COL2 varchar(10), COL3 varchar(10), COL4 varchar(10), COL5 varchar(10), Success char(1))
CREATE TABLE MasterTable (PKRecordID int PRIMARY KEY, COL1 varchar(10), COL2 varchar(10), COL3 varchar(10), COL4 varchar(10), COL5 varchar(10))
ALTER TABLE MasterTable ADD CONSTRAINT FK_MasterTable_ForeignKeyTableCOL1 FOREIGN KEY (COL1) REFERENCES ForeignKeyTableCOL1 (COL1)
ALTER TABLE MasterTable ADD CONSTRAINT FK_MasterTable_ForeignKeyTableCOL2 FOREIGN KEY (COL2) REFERENCES ForeignKeyTableCOL2 (COL2)
CREATE TABLE HistoryTable (HistoryTableID int IDENTITY(1,1) PRIMARY KEY, PKRecordID int, ColumnChanged varchar(50), OldValue varchar(10), NewValue varchar(10))
CREATE TABLE ErrorTable (ErrorTableID int IDENTITY(1,1) PRIMARY KEY, PKRecordID int, TableName varchar(50), TablePK int, ErrorDateTime datetime, ErrorCode int, ErrorMsg nvarchar(4000))
GO

INSERT ForeignKeyTableCOL1 SELECT 'A' UNION SELECT 'B' UNION SELECT 'C'
INSERT ForeignKeyTableCOL2 SELECT 'A' UNION SELECT 'B' UNION SELECT 'C'

INSERT TempTable SELECT  1, 'A', 'A', 'A', 'A', 'A', 'N'
INSERT TempTable SELECT  2, 'B', 'B', 'B', 'B', 'B', 'N'
INSERT TempTable SELECT  3, 'C', 'C', 'C', 'C', 'C', 'N'
INSERT TempTable SELECT  1, 'D', 'A', 'A', 'A', 'A', 'N'
INSERT TempTable SELECT  1, 'A', 'D', 'A', 'A', 'A', 'N'
INSERT TempTable SELECT  1, 'D', 'D', 'A', 'A', 'A', 'N'
INSERT TempTable SELECT  2, 'A', 'B', 'B', 'B', 'B', 'N'
INSERT TempTable SELECT  3, 'A', 'B', 'C', 'C', 'C', 'N'
INSERT TempTable SELECT  4, 'D', 'D', 'D', 'D', 'D', 'N'

SET NOCOUNT OFF 
```

使用审计/错误日志执行`INSERTS`and`UPDATES`

```
DECLARE @PKRecordID int, @COL1 varchar(10), @COL2 varchar(10), @COL3 varchar(10), @COL4 varchar(10), @COL5 varchar(10), @TempTableID int
DECLARE @PKRecordID_OLD int, @COL1_OLD varchar(10), @COL2_OLD varchar(10), @COL3_OLD varchar(10), @COL4_OLD varchar(10), @COL5_OLD varchar(10)
DECLARE temp_cursor CURSOR FOR
 SELECT TempTableID, PKRecordID, COL1, COL2, COL3, COL4, COL5 
   FROM TempTable
  ORDER BY TempTableID;
OPEN temp_cursor

FETCH NEXT FROM temp_cursor
INTO @TempTableID, @PKRecordID, @COL1, @COL2, @COL3, @COL4, @COL5

WHILE @@FETCH_STATUS = 0
  BEGIN
    --SELECT @idx, @COL1, @COL2, @COL3, @COL4, @COL5

    BEGIN TRY
        IF EXISTS (SELECT * FROM MasterTable WHERE PKRecordID = @PKRecordID)
          BEGIN
            SELECT @COL1_OLD = COL1
                  ,@COL2_OLD = COL2
                  ,@COL3_OLD = COL3
                  ,@COL4_OLD = COL4
                  ,@COL5_OLD = COL5
              FROM MasterTable
             WHERE PKRecordID = @PKRecordID

            UPDATE MasterTable 
               SET COL1 = @COL1
                  ,COL2 = @COL2
                  ,COL3 = @COL3
                  ,COL4 = @COL4
                  ,COL5 = @COL5
             WHERE PKRecordID = @PKRecordID

            INSERT HistoryTable (PKRecordID, ColumnChanged, OldValue, NewValue)
            SELECT @PKRecordID, 'COL1', @COL1_OLD, @COL1
             WHERE EXISTS (SELECT @COL1 EXCEPT SELECT @COL1_OLD)

            INSERT HistoryTable (PKRecordID, ColumnChanged, OldValue, NewValue)
            SELECT @PKRecordID, 'COL2', @COL2_OLD, @COL2
             WHERE EXISTS (SELECT @COL2 EXCEPT SELECT @COL2_OLD)

            INSERT HistoryTable (PKRecordID, ColumnChanged, OldValue, NewValue)
            SELECT @PKRecordID, 'COL3', @COL3_OLD, @COL3
             WHERE EXISTS (SELECT @COL3 EXCEPT SELECT @COL3_OLD)

            INSERT HistoryTable (PKRecordID, ColumnChanged, OldValue, NewValue)
            SELECT @PKRecordID, 'COL4', @COL4_OLD, @COL4
             WHERE EXISTS (SELECT @COL4 EXCEPT SELECT @COL4_OLD)

            INSERT HistoryTable (PKRecordID, ColumnChanged, OldValue, NewValue)
            SELECT @PKRecordID, 'COL5', @COL5_OLD, @COL5
             WHERE EXISTS (SELECT @COL5 EXCEPT SELECT @COL5_OLD)

            UPDATE TempTable 
               SET Success = 'Y'
             WHERE TempTableID = @TempTableID

          END
        ELSE
          BEGIN
            INSERT MasterTable (PKRecordID, COL1, COL2, COL3, COL4, COL5)
            SELECT @PKRecordID, @COL1, @COL2, @COL3, @COL4, @COL5           

            UPDATE TempTable 
               SET Success = 'Y'
             WHERE TempTableID = @TempTableID 
        END
    END TRY
    BEGIN CATCH
        INSERT ErrorTable (PKRecordID, TableName, TablePK, ErrorDateTime, ErrorCode, ErrorMsg)
        SELECT @PKRecordID, 'TempTable', @TempTableID, GETDATE(), ERROR_NUMBER(), ERROR_MESSAGE()
    END CATCH

    FETCH NEXT FROM temp_cursor
    INTO @TempTableID, @PKRecordID, @COL1, @COL2, @COL3, @COL4, @COL5
END
CLOSE temp_cursor;
DEALLOCATE temp_cursor;

-- VIEW OUTPUT
SELECT * FROM MasterTable
SELECT * FROM ErrorTable
SELECT * FROM HistoryTable
SELECT * FROM TempTable 
```**

# ruby-on-rails - CarrierWave 文件夹结构最佳实践

> ID：14105870
> 
> 赞同：3
> 
> 时间：2012-12-31T20:37:02.277
> 
> 标签：ruby-on-rails, capistrano, carrierwave

我一直在搜索此站点，但似乎找不到为图像和文件上传构建文件夹/文件的最佳方式。我正在使用以下方法部署 Ruby on Rails 网站：

*   CarrierWave（上传）
*   Capistrano（部署）
*   亚马逊 S3（存储）
*   Capistrano（部署）

该站点允许用户设置他们将上传图像的配置文件。我想使用一种文件夹结构，可以很好地扩展到上传多张图像的数千（或数万）用户。

目前我正在使用默认的 CarrierWave 目录结构：

```
def store_dir
  "uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}"
end 
```

但我认为最好将 user_id 包含在文件夹名称中？将此文件夹移到文件夹之外更好`public/uploads`吗？我不应该为开发、生产和测试环境使用不同的文件夹吗？我想以最好的方式覆盖 store_dir 对于一个有数千用户上传每个配置文件大约 15 个文件（存储为完整大小、配置文件和缩略图大小）的站点的站点。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-31T21:05:24.170

正常的文件夹结构应该很好地支持帽子，主要是避免冲突并确保您用于整个站点的图像的关联是一致的。由于这些原因，您显然不想将所有图像存储在一个文件夹中。

**但我认为最好将 user_id 包含在文件夹名称中？**

我不会推荐这个，它可能会导致比它的价值更多的问题。使用模型类和您正在做的 id 应该足够了，并且上传者可能在映射图像时遇到问题，例如当不是上传者的用户尝试查看图像时。

**将此文件夹移到 public/uploads 文件夹之外是否更好？**

由于您使用的是 Amazon S3，因此您的图像实际上并未存储在项目的公共/上传文件中（如果您指的是该文件）。这应该只是 Carrierwave 在上传/调整文件大小时使用的临时文件。如果您担心空间/安全性，您可能需要查看一下[并](https://github.com/jnicklas/carrierwave/wiki/How-to:-Delete-cache-garbage-directories)在必要时根据您的需要进行调整。

**我不应该为开发、生产和测试环境使用不同的文件夹吗？**

如果您愿意，可以使用不同的文件夹：

```
def store_dir
  "#{Rails.env}/uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}"
end 
```

或者在 Amazon S3 上使用不同的存储桶（推荐）：

在`config/initializers/fog.rb`类似的东西：

```
CarrierWave.configure do |config|
  config.storage = :fog
  config.fog_credentials = {
    :provider              => <provider>,
    :aws_access_key_id     => <id>,
    :aws_secret_access_key => <key>
  }
  if Rails.env == "production"
    config.fog_directory = 'production'
  elsif Rails.env == "development"
    config.fog_directory = 'development'
  elsif ...
    config.fog_directory = '...'
  end
end 
```

或者您可以在单独的环境文件中执行类似的操作。

**我想以最好的方式覆盖 store_dir 对于一个有数千用户上传每个配置文件大约 15 个文件（存储为完整大小、配置文件和缩略图大小）的站点的站点。**

这个存储目录结构应该可以正常工作，就调整大小而言，您应该查看[指南](https://github.com/jnicklas/carrierwave#adding-versions)。

**更新：**

对于文件名，我绝对建议将其更改为随机字符串，这样您就可以避免文件夹本身内任何潜在的命名冲突。有人可以上传`me.jpg`2 个不同的文件并非不可能。话虽如此，这就是我的做法。

内`your_uploader.rb`

添加一个文件名方法，它将随机化当前文件名。

```
 def filename
   random_token = Digest::SHA2.hexdigest("#{Time.now.utc}--#{model.id.to_s}").first(20)
   ivar = "@#{mounted_as}_secure_token"
   token = model.instance_variable_get(ivar)
   token ||= model.instance_variable_set(ivar, random_token)
   "#{token}.jpg" if original_filename
  end 
```

这种特殊的安排可能有点矫枉过正，但对我来说已经足够了。

希望这可以帮助！

# qmake - 如何消除 qmake 的“WARNING: Failure to find:”？

> ID：14105877
> 
> 赞同：6
> 
> 时间：2012-12-31T20:38:05.000
> 
> 标签：qmake

我`PRE_TARGETDEPS`用于生成源文件，并将生成的源文件添加到`SOURCES`编译中。

我的生成器的输出在 qmake 运行时显然不存在，因此 qmake 输出`WARNING: Failure to find:`每个要创建的源文件。

`PRE_TARGETDEPS`既然我知道我将生成这些文件，我该如何消除这个警告？

或者，有没有更好的方法来使用 qmake 生成中间文件？

## 例子

`test.pro`这是一个显示问题的完整文件：

```
TEMPLATE = lib

preprocess.commands += cat test.cc.in | sed 's/a/0/g' > test.0.cc ;
preprocess.commands += cat test.cc.in | sed 's/a/1/g' > test.1.cc ;
preprocess.depends = test.cc.in
QMAKE_EXTRA_TARGETS += preprocess
PRE_TARGETDEPS += preprocess

SOURCES = test.0.cc test.1.cc 
```

将其放在一个空文件夹中，并创建一个空`test.cc.in`文件。运行`qmake`，您将看到以下警告：

```
WARNING: Failure to find: test.0.cc
WARNING: Failure to find: test.1.cc 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T15:26:13.487

**我怎样才能平息这个警告**

根据我对 qmake 代码的阅读，您可以：

*   *要么*让 qmake 忽略任何不存在的文件名 - 在这种情况下，它们将不会通过您的后续步骤构建
*   *或者*让它写下这些警告

我认为这些都不会让你满意。

* * *

`Failure to find`这是我的推理.... 我在必须手头的 Qt 发行版中寻找文本：qt4.8.1。

它在 中出现了 3 次`qmake/generators/makefile.cpp`。这两个代码块如下所示：

```
QStringList
MakefileGenerator::findFilesInVPATH(QStringList l, uchar flags, const QString &vpath_var)
{
....
                    debug_msg(1, "%s:%d Failure to find %s in vpath (%s)",
                              __FILE__, __LINE__,
                              val.toLatin1().constData(), vpath.join("::").toLatin1().constData());
                    if(flags & VPATH_RemoveMissingFiles)
                        remove_file = true;
                    else if(flags & VPATH_WarnMissingFiles)
                        warn_msg(WarnLogic, "Failure to find: %s", val.toLatin1().constData());
....
                else if(flags & VPATH_WarnMissingFiles)
                    warn_msg(WarnLogic, "Failure to find: %s", val.toLatin1().constData()); 
```

这被称为：

```
 l = findFilesInVPATH(l, (comp.flags & Compiler::CompilerRemoveNoExist) ?
                             VPATH_RemoveMissingFiles : VPATH_WarnMissingFiles, "VPATH_" + comp.variable_in); 
```

所以传入第一个块的标志参数将是`RemoveMissingFiles` 或`WarnMissingFiles`，具体取决于`comp.flags & Compiler::CompilerRemoveNoExist`。

* * *

**或者，有没有更好的方法来使用 qmake 生成中间文件？**

我不确定它是否更好——即它肯定很复杂——但这就是我工作的地方所做的......

在 .pro 文件中，完成了系统调用，即：

1.  生成所需的文件，
2.  然后将他们的名字写到标准输出。

这是 .pro 中的一个示例，以显示如何调用它：

```
SOURCES    += $$system( python my_script_name.py ) 
```

如果您愿意，您当然可以将参数传递给 python 脚本

注意事项/限制：

*   这意味着无论您何时运行，python 脚本都会运行`qmake`，但不会在单独`make`调用期间运行。
*   每次调用 python 确实减慢了我们的 qmake 步骤 - 大约是在不启动 python 的情况下运行 qmake 的两倍 - 但你总是可以使用不同的脚本语言

这将解决您的问题，因为当 qmake 处理该`SOURCES`值时，文件已由脚本创建。

# ruby-on-rails-3 - 防止 Rails 将保存的 html 转义到数据库

> ID：14105879
> 
> 赞同：0
> 
> 时间：2012-12-31T20:38:23.410
> 
> 标签：ruby-on-rails-3, sanitization, aloha-editor

我正在尝试将 textarea 中的以下内容保存到我的一个模型中：

```
<iframe width="560" height="315" src="http://www.youtube.com/watch?v=Ar7PxP76o28" frameborder="0" allowfullscreen></iframe> 
```

然而，这实际上是最终节省的：

```
&lt;iframe width=\"560\" \r\nheight=\"315\" src=\"http://www.youtube.com/watch?v=Ar7PxP76o28\" \r\nframeborder=\"0\" allowfullscreen&gt;&lt;/iframe&gt; 
```

有什么办法可以防止它转义html？我正在尝试使用以下代码在显示视图中呈现 youtube 嵌入视频：

```
= @foo.content.html_safe 
```

但是，`html_safe`如果 html 像这样转义，帮助器似乎不起作用。我还尝试用包装器替换 html_safe ，`raw`但这似乎也不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T20:56:46.700

正如 Zabba 所说，实际上是第三方导致了这个问题，而不是 Rails 本身。在我的情况下，我使用的是 Aloha WYSIWYG 编辑器，该编辑器正在清理未经我许可添加到表单中的任何自定义 HTML。

# dwolla - Dwolla结账不要求资金来源

> ID：14105881
> 
> 赞同：2
> 
> 时间：2012-12-31T20:38:55.647
> 
> 标签：dwolla

我正在尝试设置一个发布到[https://www.dwolla.com/payment/pay](https://www.dwolla.com/payment/pay)的表单以进行付款。此时我已经使用 REST API 为用户创建了一个 Dwolla 帐户，但是我正在使用此方法进行付款，因为 REST API 添加/验证funding_sources 调用还不起作用。所以基本上，此时，用户有一个帐户，但他们还没有资金来源。

在发布付款表格后，它将用户重定向到：[https](https://www.dwolla.com/payment/login?returnurl=%2fpayment%2fcheckout%2fsomeid) ://www.dwolla.com/payment/login?returnurl=%2fpayment%2fcheckout%2fsomeid并要求他们登录或进行访客结帐。他们选择使用他们的凭据登录，然后让他们输入他们的密码并结帐。之后它返回错误：“失败 - 资金不足，无法完成交易。”

显然资金不足，用户还没有添加资金来源。我希望它会提示用户在结帐过程中添加资金来源。在 API 问题和这个问题之间，我被阻止使用 Dwolla 作为让我的用户付款的可行解决方案，因为我不能只说“去 dwolla.com 并添加资金来源”，那将是一个糟糕的用户体验...

有没有办法配置付款结帐以提示用户添加资金来源？我已经设置了：

```
<input type="hidden" name="allowFundingSources" value="true" /> 
```

# c# - ASCIITools.StringToAscii 会做与 Encoding.ASCII.GetBytes 相同的工作吗

> ID：14105885
> 
> 赞同：0
> 
> 时间：2012-12-31T20:39:29.297
> 
> 标签：c#, character-encoding, windows-phone-8

> **可能重复：**
> [Windows Phone 7 中的 ASCIIEncoding](https://stackoverflow.com/questions/4022281/asciiencoding-in-windows-phone-7)

我正在使用 Windows Phone 8，我注意到 Encoding.ASCII 在 Windows Phone 的 .NET 中不存在，但有一个名为 ASCIITools 的类，其中包含一个名为 StringToAscii 的方法。它返回一个字节数组并接受一个字符串。

我问是因为我试图转换一些最初从这样的字符串中获取字符数组的代码：

```
char[] myCharArray = blah.Substring(aaa, bbb).ToCharArray(); 
```

然后通过将其传递给 GetBytes 方法从 char 数组中获取字节数组：

```
byte[] blah = Encoding.ASCII.GetBytes(myCharArray, 0, myCharArray.Length); 
```

看起来这个类将允许我直接从一个字符串转到一个字节数组，如下所示：

```
byte[] blah = ASCIITools.StringToAscii(blah.Substring(aaa, bbb)); 
```

这行得通吗？

# drupal - 使用 Drupal 的 CMS 而不是它的框架是否很常见？

> ID：14105888
> 
> 赞同：-1
> 
> 时间：2012-12-31T20:39:36.437
> 
> 标签：drupal

我创建了自己的网站。它包含一个 MySQL 数据库、一些 jQuery 和一堆 PHP 文件。我决定我需要一个 CMS，因为其他人将为该网站创建内容。我想过自己做，但当我考虑如何编写发布工作流程、用户角色等时，这似乎是一项艰巨的任务。所以我寻找了一个非常轻量级的 CMS，但我看到的所有内容都希望我创建页面模板，这我不想做。

所以最后，我安装了 Drupal，但我并没有在 Drupal 中重新创建我的网站，而是为保存创建内容（文章和博客）的两个页面创建了两种内容类型。然后我简单地重新编写了我的 SQL 查询，以从 Drupal MySQL 表而不是我最初创建的 MySQL 表中获取结果。它工作正常。

我喜欢这种方法，因为我不受 Drupal 框架的限制，而且我不必担心制作自己的 CMS。

我的问题：这是一种常用的方法吗？不知道其他开发者是怎么做的？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T20:52:39.480

“这是常用的方法吗？”

不它不是。你违反了封装原则。

1.  您可以将自己的代码与 Drupal 数据库一起使用。但最好使用该框架，因为它提供了许多有用的功能：表单创建和验证、数据库查询构建等。

2.  它经过了很好的测试，您的代码可能包含错误。

3.  如果您升级 Drupal 并且它更改了数据库结构中的任何内容 - 您的代码可能会中断。如果您使用标准函数，修改可能会隐藏在其中。

现在要小心 - 您对数据库的完整性负责！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T20:14:24.180

您的方法可能会奏效，如果您说您有一个复杂的现有站点并且您的时间非常有限 - 我会说您的方法很好。

但在我看来，情况并非如此。鉴于您的情况，我强烈建议您将现有代码集成到 Drupal。您应该这样做的主要原因有两个：

1.  现在您只需要文章编辑功能。但我敢肯定，在未来的某个地方，您至少会发现 Drupal 的另一个特性，它可以为您节省大量工作。

2.  将您现有的代码与 drupal 集成并不像您想象的那么难……

# winforms - Winform App 不同于 Win 7 与 Win 8

> ID：14105889
> 
> 赞同：4
> 
> 时间：2012-12-31T20:39:53.800
> 
> 标签：winforms, visual-studio-2010, windows-7, windows-8, visual-studio-2012

我在使用标准数据驱动的 Winform 应用程序时遇到了一个有趣的问题。

该应用程序最初是在 Windows 7 和 Visual Studio 2010 上开发的。然后我用 Windows 8 和 Visual Studio 2010 构建了一个新的开发机器。我发布了一个新版本的 Winform 应用程序，构建在 Windows 8 机器上。没有源代码更改，相同的 .NET 4.0 框架目标。在 Windows 7 上运行 Winform 应用程序的客户端 PC 现在会遇到表单呈现问题。在 Windows 7 上，控件似乎有些变形，在视觉上改变了表单，在某些情况下，渲染功能被破坏（由于渲染问题，控件在屏幕外）。

我已经升级到 VS2012，并以 .NET 4.5 为目标。同样的问题仍然存在。

我需要做些什么才能在 Windows 7 和 Windows 8 之间获得一致的表单呈现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-05T14:28:36.670

我有类似的问题。为了修复它，我检查了当前的 DPI 设置并在需要的地方水平和垂直缩放尺寸。这个帮助类提供水平和垂直比例：HDpiScale、VDpiScale。

用法：

```
MyControl.Height = (int) (MyControl.Height * util.VDpiScale);
MyControl.Width = (int) (MyControl.Width * util.HDpiScale); 
```

仅当字体大小为 x1.25 时才有意义

```
public class PresentationUtils : IPresentationUtils
{
    private double vDpiScale = -1;
    private double hDpiScale = -1;

    public double HDpiScale
    {
        get
        {
            if (hDpiScale < 0)
                SetDpiScales();
            return hDpiScale;
        }
    }

    public double VDpiScale
    {
        get
        {
            if (vDpiScale < 0)
                SetDpiScales();
            return vDpiScale;
        }
    }

    private void SetDpiScales()
    {
        vDpiScale = 1;
        hDpiScale = 1;

        IntPtr dc = GetDC(IntPtr.Zero);
        try
        {
            int hPixels = GetDeviceCaps(dc, (int) DeviceCap.LOGPIXELSX);
            int vPixels = GetDeviceCaps(dc, (int) DeviceCap.LOGPIXELSY);
            vDpiScale = vPixels/96.0;
            hDpiScale = hPixels/96.0;
        }
        finally
        {
            ReleaseDC(IntPtr.Zero, dc);
        }
    }

    [DllImport("gdi32.dll")]
    public static extern int GetDeviceCaps(IntPtr hdc, int nIndex);

    [DllImport("user32.dll", SetLastError = true)]
    public static extern IntPtr GetDC(IntPtr hWnd);

    [DllImport("user32.dll")]
    [return: MarshalAs(UnmanagedType.Bool)]
    public static extern bool ReleaseDC(IntPtr hWnd, IntPtr hDC);
}

public enum DeviceCap
{
    /// <summary>
    ///     Logical pixels inch in X
    /// </summary>
    LOGPIXELSX = 88,

    /// <summary>
    ///     Logical pixels inch in Y
    /// </summary>
    LOGPIXELSY = 90,
} 
```

# javascript - jHtmlArea 添加不需要的 BR 标签

> ID：14105890
> 
> 赞同：0
> 
> 时间：2012-12-31T20:40:17.850
> 
> 标签：javascript, jquery, iframe, jhtmlarea

我`jHtmlArea`在一个项目上使用该插件，它似乎`BR`在用户输入的任何内容的末尾添加了不需要的标签，但我看不出插件代码中的什么导致了这种情况发生。其他人在其他地方询问过添加`P`标签或`DIV`标签，但他们的问题没有得到回答。当然，我想找到一种方法来防止插入不需要的标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-08T17:29:54.003

在我的情况下， <br> 是在验证空字段时在验证测试之后添加的，所以我查看输入是否被不需要的
标签弄脏并将其重置为空。

```
if($("#post").val().trim() == "<br>") {
  $("#post").val("");
} 
```

它是一个肮脏的错误修复，但它确实完成了我需要的工作。也许您可以根据自己的目的对其进行修改:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T21:00:18.697

所见即所得的内容编辑器通常就是这种情况。我快速浏览了一下，在 jHtmlArea-0.7.5.js 文件中没有看到任何有用的东西。

快速修复将是添加样式`br {display:none;}`，但这不是最佳解决方案。

# javascript - Javascript：测试 ajax 请求

> ID：14105896
> 
> 赞同：5
> 
> 时间：2012-12-31T20:40:58.717
> 
> 标签：javascript

我目前正在开发一个处理大量 ajax 调用的重型客户端 Web 应用程序。我通常会检查他们的调用是否与 chrome 插件 Postman 一起正常工作，但此时它变得太多，无法检查它们是否正常工作。

无论如何都要测试一下电话是否成功返回，而不是一次检查一个电话？如果我的问题有点偏离，我是测试新手，很抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T21:15:23.717

有很多测试框架。有[Selenium](http://seleniumhq.org/)，但对于繁重的客户端处理（单页应用程序，...），我认为这不是最佳选择。如果您有 java 背景，它可能仍然是一个选项（尽管它也有其他语言的 api）。

Javascript 测试框架是一个更好的选择。有些用于单元测试，有些用于 e2e 测试。

*   [CasperJs](http://casperjs.org/)
*   [睾丸](http://vojtajina.github.com/testacular/)
*   [茉莉花](http://pivotal.github.com/jasmine/)
*   [QUnit](http://qunitjs.com/)
*   ...

这是一个[广泛的列表](https://stackoverflow.com/questions/300855/looking-for-a-better-javascript-unit-test-tool)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T22:31:00.677

如果您使用 jQuery：jQuery 已经有一个名为“ajaxError”的事件，只要 ajaxRequest 不成功就会触发该事件。

更多信息：[http ://api.jquery.com/ajaxError/](http://api.jquery.com/ajaxError/)

# vba - 为单元格位置创建变量

> ID：14105901
> 
> 赞同：2
> 
> 时间：2012-12-31T20:41:21.787
> 
> 标签：vba, excel

我需要为此单元格复制/粘贴的起始位置创建一个变量，以便可以将其用作其他数据的参考点。那可能吗？我不确定语法。

```
wbkCS.Worksheets("Cut Sheet").Range("S4:S2000").Copy

With wbkVer.Worksheets("Cutsheets")
   .Range("A" & .Rows.Count).End(xlUp).Offset(1).PasteSpecial xlPasteValues
End With 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-31T20:51:20.763

这是将这些范围保存为`Range`对象的语法。

```
dim firstRange as Range, secondRange as Range

set firstRange = wbkCS.Worksheets("Cut Sheet").Range("S4:S2000")

firstRange.copy

With wbkVer.Worksheets("Cutsheets")
    set secondRange = .Range("A" & .Rows.Count).End(xlUp).Offset(1)
    secondRange.PasteSpecial xlPasteValues
End With 
```

如果您想要其中一个范围的第一个单元格，它将是这样的：

`firstRange.Cells(1,1)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T13:48:22.433

您已经有了答案，但最好的办法是完全避免使用剪贴板，如下所示：

```
Sub WithoutClipboard()

'define the two ranges variables
Dim firstRange As Range
Dim secondRange As Range

'set the range variables to specific ranges
Set firstRange = wbkCS.Worksheets("Cut Sheet").Range("S4:S2000")
With wbkVer.Worksheets("Cutsheets")
    Set secondRange = .Range("A" & .Rows.Count).End(xlUp).Offset(1)
End With

'resize the second range so it exactly the same size as the first range
With firstRange
      Set secondRange = secondRange.Resize(.Rows.Count, .Columns.Count)
End With

'move the data without having to use copy/paste
secondRange.Value = firstRange.Value

End Sub 
```

# mysql - MySQL 错误：正在启动 pid-file 的 MySQL.Manager 而不更新 fi [FAILED]

> ID：14105904
> 
> 赞同：-1
> 
> 时间：2012-12-31T20:41:38.287
> 
> 标签：mysql, innodb

用 innodb 值更新 my.cnf 后，mysql 没有开始给出这个错误

```
Starting MySQL.Manager of pid-file quit without updating fi[FAILED] 
```

我检查了 Innodb 是否正在运行，如果我添加任何 Innodb var，我也会在 my.cnf 上添加以下值，我会遇到同样的错误。如果我删除所有 innodb 值 MySQL 启动并正常工作。

我已经添加了

```
innodb_additional_mem_pool_size = 512M
innodb_log_buffer_size = 256M
innodb_log_file_size = 256M
innodb_buffer_pool_size = 8GB 
```

也尝试添加这个

```
default-storage_engine = InnoDB 
```

我的服务器内存是 16GB，Centos 6.3 和 MySQL 5.1.65-cll

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T21:03:48.237

MySQL 初始化脚本经常给出关于“pid 文件管理器退出而不更新”的错误，但这是一个红鲱鱼。

在 MySQL 日志中查找真实信息。默认情况下，它应该在数据目录下，名为*hostname* .err。

鉴于您在上面列出的更改，我首先要检查的是您是否尝试将 innodb 日志文件大小更改为 256M，但您仍然有一个大小不同的现有日志文件。如果检测到物理文件大小与配置文件大小不匹配，InnoDB 将假定它无法执行崩溃恢复，因此它将自行停止，这可能导致 MySQL 无法启动。

解决方案是**彻底**关闭，然后物理`rm ib_logfile[01]`启动。InnoDB 将以配置文件中指定的大小创建新的日志文件。

只有在彻底关闭 mysqld 服务后才能删除这些日志文件，这一点非常重要，否则您*将*丢失数据。

PS：您的 innodb_log_buffer_size 不太可能需要为 256M。默认值为 8M，这对于大多数网站来说已经足够了。您可以监控`SHOW GLOBAL STATUS LIKE 'innodb_log_waits'`，如果该值频繁增加，我会将 innodb_log_buffer_size 增加 8M 增量，直到日志等待频率下降。

# c++ - 这是逗号运算符的可接受用法吗？

> ID：14105908
> 
> 赞同：6
> 
> 时间：2012-12-31T20:42:03.847
> 
> 标签：c++, operator-overloading

我在 Stack Overflow 上看到过其他帖子，这些帖子非常不鼓励逗号运算符的重载。我收到了一个带有逗号运算符重载的 Github 拉取请求，如下所示：

```
class Mylogger {
    public:
            template <typename T>
            Mylogger & operator,(const T & val) {
                    std::cout << val;
                    return * this;
            }
 };

 #define  Log(level,args...)  \
    do { Mylogger logv; logv,level, ":", ##args; } while (0) 
```

然后你可以按如下方式使用它：

```
 Log(2, "INFO: setting variable \", 1, "\"\n"); 
```

有人可以解释为什么这是一个好的或坏的用例吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T20:45:29.233

使用 << 会更有意义，逗号通常不表示流操作，会导致代码混乱

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-31T20:46:41.490

这是主观的，但我会说这不是一个好的用例，因为它传达了错误的语义。已经有一个用于输出的运算符，`<<`将是一个更好的选择。

该代码利用了可变参数宏和重载的逗号运算符，这很聪明，可能适用于特定情况。但是，如果在哪里创建一个`Mylogger`对象，那么重载的操作符会令人困惑并导致各种麻烦。

因此，至少，如果`Mylogger`它是一个实现细节，那么它*可能*是一个有效的用例。现在在带有*可变参数函数模板的**C++11*中，无需求助于这种扭曲的代码。

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-28T08:46:41.467

仅当使用对您的类的调用者/用户非常透明时，*才*应进行运算符重载。如有疑问，只需创建一个执行您想要的方法，并根据良好的命名约定对其进行命名。逗号通常没有标准化的用法，因此添加逗号运算符会让您班级的用户摸不着头脑。

最近，我成为了 Google 风格指南的粉丝，它不是 ANY 运算符重载的忠实粉丝。他们有一些非常好的理由，您可以在这里了解：http: [//google-styleguide.googlecode.com/svn/trunk/cppguide.xml#Operator_Overloading](http://google-styleguide.googlecode.com/svn/trunk/cppguide.xml#Operator_Overloading)*

# c - 如何使用矢量化循环复制数组？

> ID：14105912
> 
> 赞同：0
> 
> 时间：2012-12-31T20:42:26.310
> 
> 标签：c, optimization, vectorization

我想矢量化一个简单的数组副本。数组以 float* 形式提交，大小为 int。我事先检查大小，然后运行副本：

```
int i;
float *vec;
float *tab;

for(i = x->x_start; i < x->x_end; i++)
  vec[i] = tab[i]; 
```

我已经尝试过使用这个非常简单的语句，但我似乎无法让它自动矢量化。我试过`restrict`没有效果，并玩了`__builtin_assume_aligned(vec, 16)`

# php - 将 xml 从 URL 获取到变量中

> ID：14105922
> 
> 赞同：8
> 
> 时间：2012-12-31T20:44:08.783
> 
> 标签：php, xml, parsing, simplexml

我正在尝试从 url 获取 xml 提要

```
http://api.eve-central.com/api/marketstat?typeid=1230&regionlimit=10000002 
```

但似乎失败得很惨。我试过了

*   [`new SimpleXMLElement`](http://php.net/SimpleXMLElement),

*   [`file_get_contents`](http://php.net/file_get_contents)和

*   `http_get`

然而，当我使用`echo`或`print_r`. 最终目标是最终解析这些数据，但将其放入变量中肯定是一个不错的开始。

我在下面附上了我的代码。这包含在一个循环`$typeID`中，实际上确实给出了正确的 ID，如上所示

```
$url = 'http://api.eve-central.com/api/marketstat?typeid='.$typeID.'&regionlimit=10000002';
echo $url."<br />";
$xml = new SimpleXMLElement($url);
print_r($xml); 
```

我应该说明我看到的另一件奇怪的事情是，当我回显 $url 时，我得到

```
http://api.eve-central.com/api/marketstat?typeid=1230®ionlimit=10000002 
```

是`&reg`注册商标符号。我不确定这是我的浏览器中的“功能”，还是我的代码中的“功能”

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-31T20:53:41.867

尝试以下操作：

```
<?php
$typeID = 1230;
// set feed URL
$url = 'http://api.eve-central.com/api/marketstat?typeid='.$typeID.'&regionlimit=10000002';
echo $url."<br />";
// read feed into SimpleXML object
$sxml = simplexml_load_file($url);

// then you can do
var_dump($sxml);

// And now you'll be able to call `$sxml->marketstat->type->buy->volume` as well as other properties.
echo $sxml->marketstat->type->buy->volume;

// And if you want to fetch multiple IDs:
foreach($sxml->marketstat->type as $type){
    echo $type->buy->volume . "<br>";
}
?> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-31T20:57:23.400

您需要从 URL 中获取数据以创建 XML 对象。

```
$url = 'http://api.eve-central.com/api/marketstat?typeid='.$typeID.'&regionlimit=10000002';

$xml = new SimpleXMLElement(file_get_contents($url));

// pre tags to format nicely
echo '<pre>';
print_r($xml);
echo '</pre>'; 
```

# shopping-cart - Shopify Remote 添加到购物车 - 相同的变体 ID、不同的属性，但 Shopify 购物车认为它们相同

> ID：14105931
> 
> 赞同：2
> 
> 时间：2012-12-31T20:45:09.980
> 
> 标签：shopping-cart, shopify

我正在使用 Shopify 远程添加到购物车表单来传递一组定制产品。相同的 Shopify 产品（variant-id），不同的自定义设计（行项目属性）。表单调用将我添加到购物车的 3 个定制产品视为相同，即使它们具有不同的行项目。如果我将此推送到 Shopify 购物车，我将看到一个数量为 3 的产品。如果我为每个产品单独提交一个表单，那么它会将它们视为购物车中的唯一产品，这是我希望的行为。
这是我尝试使用的代码示例（请注意，“Customizer#”和“Your Design”对于每个产品都是唯一的）：

```
<form action="http://www.boardlams.com/cart/add" method="post"> 

  <input name="id[]" value="262542038" type="hidden">
  <input id="Customizer#" name="properties[Customizer#]" value="RTD-Design-1" type="hidden">
  <input id="YourDesign" name="properties[YourDesign]"   value="http://designer.realtimedesigner.com/orders2/153000/153500/153561/3/design_1.png?1355818798" type="hidden">
  <input name="id[]" value="262542038" type="hidden">
  <input id="Customizer#" name="properties[Customizer#]" value="RTD-Design-2" type="hidden">
  <input id="YourDesign" name="properties[YourDesign]" value="http://designer.realtimedesigner.com/orders2/153000/153500/153561/3/design_2.png?1355818798" type="hidden">
  <input name="id[]" value="262542038" type="hidden">
  <input id="Customizer#" name="properties[Customizer#]" value="RTD-Design-3" type="hidden">
  <input id="YourDesign" name="properties[YourDesign]" value="http://designer.realtimedesigner.com/orders2/153000/153500/153561/3/design_3.png?1355818798" type="hidden">
  <input name="return_to" value="/cart" type="hidden">
  <input value="Many Customized Products" type="submit">

</form> 
```

以这种方式提交表单时，有没有办法让 Shopify 购物车将每个产品视为购物车中的单独项目？在这种情况下，为每个定制项目发送远程添加到购物车表单不是一个好的解决方案，因为我们希望将所有产品作为一个组提交。我很感激任何见解！问候，约翰

# java - c3p0 挂在 awaitAvailable 与休眠

> ID：14105932
> 
> 赞同：6
> 
> 时间：2012-12-31T20:45:21.650
> 
> 标签：java, mysql, hibernate, jdbc, c3p0

我有在执行期间挂起的控制台应用程序。这是我的配置：

```
 cfg.setProperty("hibernate.connection.driver_class", "com.mysql.jdbc.Driver");
    cfg.setProperty("hibernate.connection.url", "jdbc:mysql://localhost:3306/db?user=db&password=db");
    cfg.setProperty("hibernate.connection.username", "db");
    cfg.setProperty("hibernate.connection.password", "db");
    cfg.setProperty("hibernate.connection.pool_size", "5");
    cfg.setProperty("hibernate.connection.autocommit", "false");
    cfg.setProperty("hibernate.c3p0.min_size", "5");
    cfg.setProperty("hibernate.c3p0.max_size", "20");
    cfg.setProperty("hibernate.c3p0.timeout", "300");
    cfg.setProperty("hibernate.c3p0.max_statements", "50");
    cfg.setProperty("hibernate.c3p0.idle_test_period", "3000"); 
```

这是我的堆栈跟踪：

```
"main" prio=10 tid=0x000000000168f800 nid=0x1c37 in Object.wait() [0x00007fa60d0ad000]
   java.lang.Thread.State: WAITING (on object monitor)
        at java.lang.Object.wait(Native Method)
        - waiting on <0x00000007400f4c68> (a com.mchange.v2.resourcepool.BasicResourcePool)
        at com.mchange.v2.resourcepool.BasicResourcePool.awaitAvailable(BasicResourcePool.java:1315)
        at com.mchange.v2.resourcepool.BasicResourcePool.prelimCheckoutResource(BasicResourcePool.java:557)
        - locked <0x00000007400f4c68> (a com.mchange.v2.resourcepool.BasicResourcePool)
        at com.mchange.v2.resourcepool.BasicResourcePool.checkoutResource(BasicResourcePool.java:477)
        at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool.checkoutPooledConnection(C3P0PooledConnectionPool.java:525)
        at com.mchange.v2.c3p0.impl.AbstractPoolBackedDataSource.getConnection(AbstractPoolBackedDataSource.java:128)
        at org.hibernate.service.jdbc.connections.internal.C3P0ConnectionProvider.getConnection(C3P0ConnectionProvider.java:84)
        at org.hibernate.internal.AbstractSessionImpl$NonContextualJdbcConnectionAccess.obtainConnection(AbstractSessionImpl.java:281)
        at org.hibernate.engine.jdbc.internal.LogicalConnectionImpl.obtainConnection(LogicalConnectionImpl.java:297)
        at org.hibernate.engine.jdbc.internal.LogicalConnectionImpl.getConnection(LogicalConnectionImpl.java:169)
        at org.hibernate.engine.transaction.internal.jdbc.JdbcTransaction.doBegin(JdbcTransaction.java:67)
        at org.hibernate.engine.transaction.spi.AbstractTransactionImpl.begin(AbstractTransactionImpl.java:160)
        at org.hibernate.internal.SessionImpl.beginTransaction(SessionImpl.java:1392)
        at org.kriyak.parser.IndexArchiveRapid.indexFile(IndexArchiveRapid.java:70)
        at org.kriyak.parser.IndexArchiveRapid.main(IndexArchiveRapid.java:53) 
```

我只打开一个连接，似乎没有泄漏它们。而且我也使用一个线程。除了内存使用，我没有调整任何 mysql 设置。Mysql 在控制台上工作正常。为什么会发生这种情况？这是 c3p0 错误吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-01T07:30:33.160

这会立即发生，还是在一段时间后发生？也就是说，结帐最初是否成功，但随后就这样挂起？如果是这样，它看起来像一个连接泄漏。请尝试设置 c3p0 参数 unreturnedConnectionTimeout 和 debugUnreturnedConnectionStackTraces 以查看是否存在泄漏。见 [http://www.mchange.com/projects/c3p0/#configuring_to_debug_and_workaround_broken_clients](http://www.mchange.com/projects/c3p0/#configuring_to_debug_and_workaround_broken_clients) , [http://www.mchange.com/projects/c3p0/#unreturnedConnectionTimeout](http://www.mchange.com/projects/c3p0/#unreturnedConnectionTimeout) , [http://www.mchange.com/projects/c3p0/# debugUnreturnedConnectionStackTraces](http://www.mchange.com/projects/c3p0/#debugUnreturnedConnectionStackTraces)。

如果这种情况立即发生，如果没有成功签出连接，问题是池是否成功获取连接。默认情况下，如果它从未成功，大约 30 秒后，您的线程应该会因失败而中断。（看起来您并没有这样做，但如果您将 acquireRetryAttempts 设置为零，c3p0 可能会无限期地挂起等待连接。）

要调试 c3p0 问题，捕获 c3p0 在池初始化时以 INFO 级别转储到日志的版本和配置信息会很有帮助。

祝你好运！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-26T05:57:12.623

此外，您似乎还没有初始化 c3p0 的 checkoutTime 参数，该参数指定客户端应等待从连接池获取连接的时间量。

见[http://www.mchange.com/projects/c3p0/#checkoutTimeout](http://www.mchange.com/projects/c3p0/#checkoutTimeout)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-28T16:11:04.217

您可能需要增加 c3p0.numHelperThreads。帮助线程负责创建新的数据库连接并将它们添加到池中。如果没有足够的线程来满足需求，那么应用程序线程将在 awaitAvailable() 中等待。要确认是这种情况，请查看所有 HelperThreads 并查看它们是否都在使用中以及是否在连接到数据库的过程中。

# mysql - 在 MySql 中使用 Max() 函数返回错误值

> ID：14105933
> 
> 赞同：0
> 
> 时间：2012-12-31T20:45:21.240
> 
> 标签：mysql, max

我有一个带有 SN 和标题的表在我做的第一个查询中：

```
create or replace view AB as
select wrote.serial_number as SN, count(wrote.serial_number) as NumOfPapers
from wrote
group by wrote.serial_number; 
```

我确实得到了一个带有 SN 的视图和每个 SN 的标题计数，而不是我想获得标题最多的 ROW（最大计数）为：ID | 最大（计数）所以我这样做：

```
select AB.SN, max(AB.NumOfPapers)
from AB 
```

但我得到了第一行人的 SN 的最大计数（不是拥有最多头衔的真实 SN）

我必须使用 max() ...感谢使用“order by”的建议，但它们在这里不相关

我究竟做错了什么 ？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T20:59:04.110

我想你想要这样的东西：

```
SELECT sn
FROM   ab
ORDER BY NumOfPapers DESC
LIMIT 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T21:04:36.543

您只获得第一行的 NumOfPapers 计数的原因是因为您还选择了 ab.serial 编号。所以，我认为这会给你你正在寻找的东西：

```
select AB.SN, AB.NumOfPapers FROM AB order by AB.NumOfPapers desc limit 1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T21:02:09.517

```
create or replace view AB as
select wrote.serial_number as SN, count(wrote.serial_number) as NumOfPapers
from wrote
group by wrote.serial_number 
ORDER by NumOfPapers DESC; 
```

和

```
select AB.SN, AB.NumOfPapers from AB LIMIT 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T21:03:08.503

你正在使用`NumOfPapers`哪个是计数`serial_number`

```
 select AB.SN, max(wrote.serial_number)

       from AB, wrote 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-31T21:39:31.203

我想我明白了：

```
create or replace view AB as
select wrote.serial_number as SN, count(wrote.serial_number) as NumOfPapers
from wrote
group by wrote.serial_number;

select AB.SN, AB.NumOfPapers
from AB
where AB.NumOfPapers = (select max(AB.NumOfPapers)
                        from AB) 
```

谢谢大家的帮助，你们真的指导了我！

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-31T20:55:44.820

我相信您的第二个查询向您的数据库询问来自 AB 的每个 AB.SN 和 max(AB.NumOfPapers) 您是否尝试过使用 where 语句？

```
select AB.SN, max(AB.NumOfPapers)
from AB
where AB.NumOfPapers = max(AB.NumOfPapers) 
```

（虽然我还没有测试过，可能需要一些调整）

# ruby - 为什么 Kernel#p 会在标准输出上复制我的文本？

> ID：14105935
> 
> 赞同：-1
> 
> 时间：2012-12-31T20:45:41.843
> 
> 标签：ruby, io

看看这段代码：

```
def hello
   p "Hey!"
end
p hello 
```

输出将是：

```
"Hey!"
"Hey!"
=> "Hey!" 
```

所以这是我的结论： puts 自身返回将在 Ruby 代码输出中发送的文本，否则它不会打印“嘿！” 再次。打印字符串时发生了什么？如果 puts 不直接将其发送到标准输出，谁负责，如何负责？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T21:06:23.873

### 所有方法都返回一个值

在 Ruby 中，几乎所有东西都会返回一个值，即使该值是*nil*。但是，在您的情况下，问题是[Kernel#p](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-p)和[Kernel#puts](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-puts)的返回值不同。

```
def hello
   # Print string literal, then return
   # the printed object.
   p "Hey!"
end

# Print the return value of main#hello.
p hello 
```

结果，字符串在方法内被打印一次，然后方法的返回值被传递给 Kernel#p 并再次打印。这是设计使然。

### 使用 Kernel#puts 避免重复输出

```
def hello
   # Print string; return nil.
   puts "Hey!"
end

# Calls main#hello, but prints nil (blank line).
puts hello 
```

这将导致在方法内部打印字符串文字，然后打印一个空行，因为该方法的返回值为 nil。

```
Hey!

=> nil 
```

### 正确的方式

如果要避免出现空行，请避免多次发送到标准输出。例如：

```
def hello
  'Hey!'
end

p hello 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T20:47:53.737

如果该`p`方法返回它给出的字符串，那么`hello`也将返回它，这意味着辅助`p`调用将重复它。

这可能是默认`puts`返回的原因。`nil`

# wordpress - 如何更改 Pods Framework 的 Date 和 TimePicker 组件中的日期和时间格式？

> ID：14105938
> 
> 赞同：3
> 
> 时间：2012-12-31T20:46:07.227
> 
> 标签：wordpress, datepicker, jquery-ui-datepicker, podscms

我正在[与](https://stackoverflow.com/questions/14105598/how-to-make-jquery-ui-timepicker-format-time-in-24-h-format)timepicker 的默认设置作斗争。默认设置以某种方式被覆盖。然后，我注意到它们实际上被 Pods Framework 的代码覆盖：

```
var pods_form_ui_pods_field_baslangic_tarihi_args = {"timeFormat":"h:mmtt","dateFormat":"mm\/dd\/yy","ampm":true}; 
```

我想更改日期和时间格式的默认设置。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T20:52:30.570

我找到了答案。

您需要`Edit Pod`进入页面并输入日期/时间字段，然后转到“其他字段选项”：

![](../Images/882a8553562e21278051a0e955954ef8.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-27T22:07:18.300

在日期格式字段中

*   `m` 将月份显示为 2 位数字`06`，即
*   `n` 将月份显示为 1 位数字`6`，即
*   `l`完整显示星期几，`Monday`即
*   `o`显示全年，`2018`即
*   `a`显示`am`或`pm`,
*   `A`显示`AM`或`PM`,
*   `F`显示完整的月份名称，即`June`
*   `S`显示日期数字后缀，例如`rd`or `th`in `23rd`or`4th`

# wordpress - 密码重置后的wordpress重定向

> ID：14105947
> 
> 赞同：0
> 
> 时间：2012-12-31T20:46:54.870
> 
> 标签：wordpress, redirect, passwords

我希望用户在完成密码重置过程后被重定向到主页。目前的流程如下：

1.  单击丢失密码。
2.  输入用户名或电子邮件，然后单击“获取新密码”。
3.  用户收到带有重置密码链接的电子邮件。
4.  用户单击链接并获取密码重置页面。
5.  用户输入新密码并单击“重置密码”。
6.  用户被发送到登录页面。
7.  输入用户名和密码，然后单击“登录”。

这是我希望他们被引导到主页的地方。相反，他们被定向到个人资料编辑页面。

我已经安装了 Theme My Login 和 Peter's Login Redirect”。我仍然在配置文件编辑页面结束。无论如何我都不希望他们去。我将在前端添加一个自定义配置文件编辑页面之后。

感谢任何人都可以提供的任何帮助。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2016-07-21T11:48:01.513

您不需要为重定向添加插件，只需添加 `wp_redirect(home_url();` 您提交操作的位置：

```
if( isset( $_POST['posteddata'] )){
    wp_redirect( home_url('/whatever_your_page')) );
    blablabla;
} 
```

# html - 文字和图片不对齐

> ID：14105951
> 
> 赞同：3
> 
> 时间：2012-12-31T20:47:53.870
> 
> 标签：html, css

我无法让我的文本和图像排在同一行。我有一个名为“contactbar”的容器，然后文本是 h1，图像就在 html 中。请帮助...我已经尝试了一切！CSS：

```
#contactbar {
  background-color: #2E2B1F;
  width: 203px;
  height: 35px;
  position: absolute;
  top: 19px;
  left: 0px;
}

h1 {
  color: #9A8478;
  font-size: 16px;
  display: inline;
  -webkit-margin-before: 0em;
  -webkit-margin-after: 0em;
  height: 56px;
  vertical-align: middle;
  line-height: 1.4em;
} 
```

这是html：

```
<div id= "contactbar">
  <h1>CONTACT</h1>
  <img src="images/contactarrow.png" vertical-align="middle" width="21" height="35"    
vertical-align="middle" alt="linkedin"/>
</div> 
```

这是我正在寻找的图像：http: [//www.flickr.com/photos/77703125@N07/8331407232/in/photostream](http://www.flickr.com/photos/77703125@N07/8331407232/in/photostream)

我也尝试过绝对定位，它有效，但在所有浏览器中都不一样......所以我想避开它。任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T20:55:06.400

将图像和标题设置为`vertical-align`对`middle`我来说似乎足够了：

```
h1 {
    display: inline;
    vertical-align: middle;
}

img {
    vertical-align: middle;
} 
```

其中，带有一些额外（非关键）样式，看起来像这样：

![在此处输入图像描述](../Images/01b69eea48d8465018dfc90a06bfc952.png)

小提琴：http: [//jsfiddle.net/pqggQ/5/](http://jsfiddle.net/pqggQ/5/)

# python - Weird syntax error in using beautifulsoup.find()

> ID：14105955
> 
> 赞同：10
> 
> 时间：2012-12-31T20:48:24.077
> 
> 标签：python, beautifulsoup

This may be entirely obvious, but I'm stumped (kinda new to python, sorry):

```
page = urllib2.urlopen("http://www.somerandompage.com")
soup = BeautifulSoup(page)
currentDate = soup.find("span", class="posted-on") 
```

I'm looking for the following element in the page:

```
<span class="posted-on">Posted on Friday, <br/>August 12th, 2011</span> 
```

I'm getting this syntax error instead:

```
"test.py", line 22
currentDate = soup.find("span", class="posted-on")
                                    ^
SyntaxError: invalid syntax 
```

The basic documentation online seems identical to me (obviously assuming find_parents() and find() work much the same way):

```
a_string.find_parent("p")
# <p class="story">Once upon a time there were three little sisters; and their names were
#  <a class="sister" href="http://example.com/elsie" id="link1">Elsie</a>,
#  <a class="sister" href="http://example.com/lacie" id="link2">Lacie</a> and
#  <a class="sister" href="http://example.com/tillie" id="link3">Tillie</a>;
#  and they lived at the bottom of a well.</p>

a_string.find_parents("p", class="title")
# [] 
```

So what am I doing wrong? I know class is a reserved Python keyword; is that what's messing this up somehow?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-31T20:51:21.740

You cannot use `class` as a keyword argument. Use `{'class': 'posted-on'}` instead:

```
currentDate = soup.find('span', {'class': 'posted-on'}) 
```

Alternatively, bs4 supports a [`class_` spelling](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#searching-by-css-class) too:

```
currentDate = soup.find('span', class_='posted-on') 
```

# ios - Apple的speakhere项目，不同的UI

> ID：14105956
> 
> 赞同：1
> 
> 时间：2012-12-31T20:48:34.870
> 
> 标签：ios, core-audio, avaudioplayer

我正在开发一个类似于苹果的语音项目的应用程序。该项目本身的 AQLevelMeter 显示了一个不错的 db 仪表，但我正在寻找一个显示 db 级别但作为图表的仪表，并随着记录的继续进行更新。任何人之前都这样做过，或者可以指出我正在寻找接近我正在寻找的样本项目？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T00:08:59.677

查看[核心情节](http://code.google.com/p/core-plot/)。它是一个静态库，可以制作出色的图表。他们有一个很棒的网站，上面有示例代码。您可能指的是他们的实时情节。希望这可以帮助。

# c - CUDA C 最佳实践：无符号与有符号优化

> ID：14105958
> 
> 赞同：9
> 
> 时间：2012-12-31T20:48:57.463
> 
> 标签：c, cuda

在[CUDA C 最佳实践指南](http://docs.nvidia.com/cuda/cuda-c-best-practices-guide/index.html)中有一小节关于使用有符号和无符号整数。

> 在 C 语言标准中，无符号整数溢出语义是明确定义的，而有符号整数溢出会导致未定义的结果。因此，编译器使用有符号算术可以比使用无符号算术更积极地优化。这对于循环计数器特别值得注意：由于循环计数器的值通常为正数，因此将计数器声明为无符号可能很诱人。然而，为了更好的性能，它们应该被声明为有符号的。
> 
> 例如，考虑以下代码：
> 
> ```
>     对于 (i = 0; i < n; i++) {  
>          out[i] = in[offset + stride*i];  
>     }
> 
> ```
> 
> 在这里，子表达式`stride*i`可能会溢出一个 32 位整数，因此如果 i 被声明为无符号，溢出语义会阻止编译器使用一些原本可能已经应用的优化，例如强度降低。相反，如果 i 被声明为有符号，其中溢出语义未定义，编译器就有更多的余地来使用这些优化。

尤其是前两句话让我感到困惑。如果无符号值的语义定义良好并且有符号值可以产生未定义的结果，那么编译器如何为后者生成更好的代码？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-31T21:27:05.213

文本显示了这个例子：

```
for (i = 0; i < n; i++) {  
     out[i] = in[offset + stride*i];  
} 
```

它还提到了“强度降低”。允许编译器将其替换为以下“伪优化 C”代码：

```
tmp = offset;
for (i = 0; i < n; i++) {  
     out[i] = in[tmp];
     tmp += stride;
} 
```

现在，想象一个只支持浮点数（和整数作为子集）的处理器。`tmp`将是“非常大的数字”类型。

现在，C 标准规定涉及无符号操作数的计算永远不会溢出，而是以最大值 + 1 为模减少。这意味着在无符号的情况下，`i`编译器必须这样做：

```
tmp = offset;
for (i = 0; i < n; i++) {  
     out[i] = in[tmp];
     tmp += stride;
     if (tmp > UINT_MAX)
     {
         tmp -= UINT_MAX + 1;
     }
} 
```

但是在有符号整数的情况下，编译器可以为所欲为。它不需要检查溢出 - 如果它确实溢出，那么它是开发人员的问题（它可能导致异常，或产生错误的值）。所以代码可以更快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T20:56:55.420

这是因为 C 的定义限制了编译器编写者在无符号整数的情况下可以做什么。当有符号整数溢出时，有更多的回旋余地来解决问题。可以这么说，编译器编写者有更多的活动空间。

我就是这样读的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T00:02:08.437

和之间的语义差异与`signed`不`unsigned`支持 C 定义的所有字长的处理器的性能相关。例如，假设您的 CPU 仅支持 32 位操作并具有 32 位寄存器，而您编写一个同时使用`int`（32 位）和`char`（8 位*）的 C 函数：

```
int test(char a) {
  char b = a * 100;
  return b;
} 
```

由于 CPU 只能存储`char`在 32 位的寄存器中，并且只能对 32 位的值进行算术运算，所以它会使用一个 32 位的寄存器来保存 b，以及一个 32 位的乘法运算。

因为 C 标准规定有符号整数溢出会导致未定义的结果，所以编译器可以为上述函数创建代码，该代码在`a`高于 2 时返回高于 127 的值。

但是，如果使用无符号值：

```
unsigned int test(unsigned char a) {
  unsigned char b = a * 100;
  return b;
} 
```

C 标准为无符号操作定义了溢出语义，因此，编译器必须添加一个屏蔽操作以确保该函数不会返回高于 255 的值，即使`a`高于 2。

* * *

* C 规范允许超过 8 位，但这会破坏许多程序，因此我们假设在此示例`char`中使用 8 位值的编译器。`char`

# php - 使用 PHP 将 HTML 表单值插入 ORacle 数据库

> ID：14105962
> 
> 赞同：1
> 
> 时间：2012-12-31T20:50:34.317
> 
> 标签：php, oracle, oracle10g

我有一个 PHP 页面，其中显示了一个 HTML 表单，一旦准备好提交表单，我想使用页面的 PHP 部分将其上传到 Oracle 数据库中，我在下面提供了该部分。

但是，我不确定我做错了什么，我检查了数据库并且没有加载任何数据，但我也没有在屏幕上看到任何错误。

任何人都可以通过向我展示如何使用 PHP 将 HTML 表单数据正确上传到 Oracle DB 来帮助我吗？

有人能指出什么会导致我的代码无法工作吗？

谢谢你。

```
<?php
require_once ("xmlrpc.inc");
require_once ("globals.php");
class form
{
    public static function run()
    {
      ini_set('display_errors', 'On');
      error_reporting(E_ALL | E_STRICT);

      $conn = oci_connect("username", "password", "path/to");
      if (!$conn) 
      {
        $m = oci_error();
        echo $m['message'], "\n";
        exit;
      }
      else 
      {
        //print "You are connected to the VTC database!<br/>";
      }

      $issueType = $_POST['issueType'];
      $summary = $_POST['summary'];
      $endPointName = $_POST['endPointName'];
      $contactFirstName = $_POST['contactFirstName'];
      $contactLastName = $_POST['contactLastName'];
      $contactEmail = $_POST['contactEmail'];
      $contactPhone = $_POST['contactPhone'];
      $description = $_POST['description'];
      $solution = $_POST['solution'];
      $ticketNumber = $_POST['ticketNumber'];
      $resolved = $_POST['resolved'];
      $agency = $_POST['agency'];

      $insert = 'INSERT INTO VTC_HELPDESK_ISSUES(ISSUE_TYPE,ISSUE_SHORT,ENDPOINT_NAME,CONTACT_FIRST_NAME,CONTACT_LAST_NAME,CONTACT_EMAIL,CONTACT_PHONE,ISSUE_DESC,SOLUTION,OTHER_COMPANY_TICKET_NUM,RESOLVED,AGENCY) '.
             'VALUES(:issueType, :summary, :endPointName, :contactFirstName, :contactLastName, :contactEmail, :contactPhone, :description, :solution, :ticketNumber, :resolved, :agency)';

      $send = oci_parse($conn, $insert);

      //Binding makes it harder to submit anything directly to the Oracle DB
      oci_bind_by_name($send, ':issueType', $issueType);
      oci_bind_by_name($send, ':summary', $summary);
      oci_bind_by_name($send, ':endPointName', $endPointName);
      oci_bind_by_name($send, ':contactFirstName', $contactFirstName);
      oci_bind_by_name($send, ':contactLastName', $contactLastName);
      oci_bind_by_name($send, ':contactEmail', $contactEmail);
      oci_bind_by_name($send, ':contactPhone', $contactPhone);
      oci_bind_by_name($send, ':description', $description);
      oci_bind_by_name($send, ':solution', $solution);
      oci_bind_by_name($send, ':ticketNumber', $ticketNumber);
      oci_bind_by_name($send, ':resolved', $resolved);
      oci_bind_by_name($send, ':agency', $agency);

      oci_execute($send);
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T13:57:46.797

您正在插入表中不允许的值，或者您在表或列名称中输入了拼写错误。就像 Mat 说的那样，如果 oci_execute 失败，则回显 oci_error

```
if (! oci_execute($send)) {
    var_dump(oci_error()); 
} 
```

# android - 如何实现用于比较多个位置结果的android文档代码？

> ID：14105966
> 
> 赞同：0
> 
> 时间：2012-12-31T20:50:48.320
> 
> 标签：android, geolocation, location, locationlistener

我正在开发一个位置感知应用程序，当我请求位置更新时，我偶尔会得到一个非常旧的位置（好像它没有更新），或者我收到多个位置通知。我开始深入研究这个问题，发现[这个博客](http://blog.doityourselfandroid.com/2010/12/25/understanding-locationlistener-android/)描述了 ANDROIDS 位置监听器的工作原理。

简而言之，我的解释是，当 you 时`requestLocationUpdates`，您不仅会获得一个位置对象，还会收到多个。因此，我开始尝试找出如何从多个位置对象中挑选出最佳位置对象，并在 Android[文档](http://developer.android.com/guide/topics/location/strategies.html)中找到了一个算法（在“维护当前最佳估计”部分下）

我对如何将该部分中的代码块实现到我自己的应用程序中感到困惑。代码块接受两个参数，`location`并`currentbestlocation`比较它们。

1.  您如何声明两个位置对象以供代码块进行比较？（代码示例或伪代码将不胜感激！）
2.  `locationlistener`我对提供多个位置对象的理解是否正确？
3.  如何在我的中实现 GOOGLES 代码？见下文：

我的代码如下：

```
public class MainActivity extends Activity {
    LocationManager lm;
    LocationListener ll;
    private Location previousLocation;

    public void onCreate(Context context, Intent intent) {    
        lm = (LocationManager)context.getSystemService(Context.LOCATION_SERVICE);
        ll = new myListener();
        lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 6000, 1000, ll);
    }

    private class myListener implements LocationListener {      
        public void onLocationChanged(Location loc) {
        if (previousLocation == null) {
               previousLocation = loc;
            } else {
                if (isBetterLocation(loc, previousLocation)) {
                //NOTIFICATION NEW LOCATION IS BETTER
                } else {
                //NOTIFICATION PREVIOUS LOCATION IS BETTER
                }
            }
        }
        public void onProviderDisabled(String provider) {
        }
        public void onProviderEnabled(String provider) {
        }
        public void onStatusChanged(String provider, int status, Bundle extras) {
        }
    }

    //GOOGLE ANDROID DOCUMENTATION CODE FOR MAINTAINING CURRENT BEST ESTIMATE
    private static final int TWO_MINUTES = 1000 * 60 * 2;

    protected boolean isBetterLocation(Location location, Location currentBestLocation) {
        if (currentBestLocation == null) {
            // A new location is always better than no location
            return true;
        }

        // Check whether the new location fix is newer or older
        long timeDelta = location.getTime() - currentBestLocation.getTime();
        boolean isSignificantlyNewer = timeDelta > TWO_MINUTES;
        boolean isSignificantlyOlder = timeDelta < -TWO_MINUTES;
        boolean isNewer = timeDelta > 0;

        // If it's been more than two minutes since the current location, use the new location
        // because the user has likely moved
        if (isSignificantlyNewer) {
            return true;
        // If the new location is more than two minutes older, it must be worse
        } else if (isSignificantlyOlder) {
            return false;
        }

        // Check whether the new location fix is more or less accurate
        int accuracyDelta = (int) (location.getAccuracy() - currentBestLocation.getAccuracy());
        boolean isLessAccurate = accuracyDelta > 0;
        boolean isMoreAccurate = accuracyDelta < 0;
        boolean isSignificantlyLessAccurate = accuracyDelta > 200;

        // Check if the old and new location are from the same provider
        boolean isFromSameProvider = isSameProvider(location.getProvider(), currentBestLocation.getProvider());

        // Determine location quality using a combination of timeliness and accuracy
        if (isMoreAccurate) {
            return true;
        } else if (isNewer && !isLessAccurate) {
            return true;
        } else if (isNewer && !isSignificantlyLessAccurate && isFromSameProvider) {
            return true;
        }
        return false;
    }

    private boolean isSameProvider(String provider1, String provider2) {
        if (provider1 == null) {
            return provider2 == null;
        }
            return provider1.equals(provider2);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T23:30:50.940

当您使用`LocationManager`请求位置更新时，它将继续为您提供更新，直到您告诉它停止或您的应用程序被终止。这样，您可以每隔一段时间监控设备的当前位置，以便知道它们何时移动。如果您只需要一次位置更新，则在收到足够准确的位置修复后，请致电`locationManager.removeUpdates(listener)`.

如果您只计划支持运行 Gingerbread 及更高版本的设备，您也可以使用该[`requestSingleUpdate(java.lang.String, android.location.LocationListener, android.os.Looper)`](http://developer.android.com/reference/android/location/LocationManager.html#requestSingleUpdate%28java.lang.String,%20android.location.LocationListener,%20android.os.Looper%29)方法。

首先要做的是声明您的位置侦听器并注册更新。这段代码应该让你开始：

```
public class MyActivity extends Activity implements LocationListener {
    /** Cache the last location fix received. */
    private Location mLastLocationReceived;

    @Override
    public void onResume() {
        super.onResume();

        // Register our location listener
        LocationManager lm = (LocationManager) getSystemService(LOCATION_SERVICE);
        lm.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 10000, 500, this);
    }

    @Override
    public void onPause() {
        super.onPause();

        // Unregister our location listener
        LocationManager lm = (LocationManager) getSystemService(LOCATION_SERVICE);
        lm.removeUpdates(this);
    }

    @Override
    public void onLocationChanged(Location location) {
        if (mLastLocationReceived == null) {
            mLastLocationReceived = location;
        } else {
            if (isBetterLocation(location, mLastLocationReceived)) {
                // New location fix is better!
            } else {
                // New location fix is not better!
            }
        }
    }

    @Override
    public void onProviderDisabled(String provider) {
        // Pass
    }

    @Override
    public void onProviderEnabled(String provider) {
        // Pass
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
        // Pass
    }

    private boolean isBetterLocation(Location newLocation,
            Location oldLocation) {

        // TODO: Implement the logic to determine if the new location is
        // of better quality than the old location. Your application's
        // business logic determines what this method should do.

        return false;
    }

} 
```

请注意，该`isBetterLocation`方法始终返回`false`，并由您提供实现。[这里](http://developer.android.com/guide/topics/location/strategies.html#BestEstimate)有一个很好的示例实现。另外，我没有测试这段代码，所以请原谅任何错误。

# algorithm - 具有顶点和边成本的最短路径算法

> ID：14105968
> 
> 赞同：3
> 
> 时间：2012-12-31T20:51:15.263
> 
> 标签：algorithm, graph

这是一个通用的算法问题。我想在无向图上运行一些最短路径算法，其中边和顶点都有与之相关的成本。大多数最短路径查找算法都没有考虑顶点成本。有什么方法可以弥补这个问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-31T21:41:04.777

通过将边连接的两个顶点的成本的一半添加到边的成本来增强图（称为边的增强成本）。

然后忽略顶点成本并在增广图上运行普通的最短路径算法。

对于每条路径

```
v_0 -e_1-> v_1 -e_2-> v_2 -e_2-> ... -e_n-> v_n 
```

增广图中的成本是

```
(1/2*C(v_0) + C(e_1) + 1/2*C(v_1)) + (1/2*C(v_1) + C(e_2) + 1/2*C(v_2)) + ... + (1/2*C(v_(n-1)) + C(e_n) + 1/2*C(v_n))
= C(v_0) + C(e_1) + C(v_1) + C(e_2) + ... + C(e_n) + C(v_n) - 1/2*(C(v_0 + C(v_n)) 
```

因此，两个顶点之间`a`和`b`增强图中的路径成本是原始图中相同路径的成本减去起点和终点的总成本的一半。

因此，一条路径是原始图中的最短路径当且仅它是增广图中的最短路径。

# iphone - NSXMLParser 可以用来解析 HTML

> ID：14105972
> 
> 赞同：3
> 
> 时间：2012-12-31T20:51:49.087
> 
> 标签：iphone, ios, xcode, nsxmlparser

> **可能重复：**
> [使用 NSXMLParser 解析 HTML](https://stackoverflow.com/questions/8866376/using-an-nsxmlparser-to-parse-html)

我曾经`NSXMLParser`解析 xml 文件和 RSS 提要。我感到困惑的是，是否`NSXMLParser`仅适用于 xml 或者我们也可以使用它来解析 html。通过在 Internet 上的一些搜索，我假设有些人使用它来解析 html。

`NSXMLParser`但是使用html有任何限制或缺点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T22:48:00.067

# c - 使用 GCC 的 -fms-extensions 是不是一个坏主意？

> ID：14105982
> 
> 赞同：12
> 
> 时间：2012-12-31T20:53:03.810
> 
> 标签：c, gcc

GCC 有一个选项，`-fms-extensions`允许使用匿名结构成员：

```
struct a {
    int x;
}

struct b {
    int y;
    struct a;
} 
```

这允许通过使用简单地访问`x`元素。这非常有用，但它似乎是 GCC 模拟的 Microsoft 扩展。`struct b``b.x`

使用此选项会降低我的代码的可移植性，还是认为它使用“安全”？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-31T20:54:26.200

如果您正在寻找兼容性，那么设置宽松的编译器选项绝不是一个好主意，更严格 - 更便携

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-31T23:43:53.023

考虑到在 2011 版标准 (C11) 中添加了一个看起来等效的功能，称为匿名结构和联合，我会说使用此功能并不是一个坏主意。MS 编译器支持它，GCC 和“GNU C”兼容的编译器支持它，并且符合现代标准的新编译器支持它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-31T20:56:36.760

标志 -fms-extensions 用于“接受 Microsoft 头文件中使用的一些非标准结构。”。GCC 很强大，因为它是为不同的标准创建的，所以我认为在适当的情况下使用它不是一个坏主意。

# c++ - KEY_WOW64_32KEY 未从 x64 应用程序重定向

> ID：14105984
> 
> 赞同：1
> 
> 时间：2012-12-31T20:53:36.183
> 
> 标签：c++, winapi, registry

我有一个在 x64 操作系统上运行的 x64 应用程序，我试图从 x86 注册表中读取数据。
这是我的代码：

```
RegOpenKeyEx(HKEY_CURRENT_USER, "Software\\Idontexist", 0, KEY_READ | KEY_WOW64_32KEY, &hKey); 
```

我想尝试打开**HKCU\Software\Wow6432Node\Idontexist**，但它正在打开**HKCU\Software\Idontexist**。

我在进程监视器中观看，如果我使用 KEY_WOW64_64KEY 或 KEY_WOW64_32KEY，两者都尝试读取**HKCU\Software\Idontexist**，而不是**HKCU\Software\Wow6432Node\Idontexist**。

编辑：操作系统是 Windows 7，如果这有什么不同的话。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T21:21:58.697

[此 MSDN 页面](http://msdn.microsoft.com/en-us/library/aa384253%28v=VS.85%29.aspx)中详细显示了在 Windows 7 上重定向和反映的键。太大而无法在此处重现，但您可以清楚地看到 HKCU\Software 键，而不是 Classes 子键，是*shared*，而不是重定向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T21:21:25.930

`Wow6432Node`暗示 WOW64 虚拟化。一个 64 位的进程可以直接打开一个 32 位的虚拟化密钥：

```
RegOpenKeyEx(HKEY_CURRENT_USER, "Software\\Wow6432Node\\Idontexist", 0, KEY_READ, &hKey); 
```

如果您需要在 32 位和 64 位上运行相同的代码并且都访问`Wow6432Node`密钥，则`IsWow64Process()`在 32 位代码中使用来检测 WOW64，然后相应地调整代码，例如：

```
#ifdef _WIN64
RegOpenKeyEx(HKEY_CURRENT_USER, "Software\\Wow6432Node\\Idontexist", 0, KEY_READ, &hKey);
#else
BOOL bIsWow64 = FALSE;
IsWow64Process(GetCurrentProcess(), &bIsWow64);
DWORD Wow64Flags = (bIsWow64) ? KEY_WOW64_32KEY : 0;
RegOpenKeyEx(HKEY_CURRENT_USER, "Software\\Idontexist", 0, KEY_READ | Wow64Flags, &hKey);
#endif 
```

但是，您真的不应该`Wow6432Node`直接访问。 `KEY_WOW64_32KEY`如果目标密钥被正确分成 32 位和 64 位视图，则应该可以正常工作：

```
DWORD Wow64Flags;
#ifdef _WIN64
Wow64Flags = KEY_WOW64_32KEY;
#else
BOOL bIsWow64 = FALSE;
IsWow64Process(GetCurrentProcess(), &bIsWow64);
Wow64Flags = (bIsWow64) ? KEY_WOW64_32KEY : 0;
#endif
RegOpenKeyEx(HKEY_CURRENT_USER, "Software\\Idontexist", 0, KEY_READ | Wow64Flags, &hKey); 
```

如果这不起作用，则意味着它`Software\\Wow6432Node\\Idontexist`最初不应该存在，并且可能是由未`KEY_WOW64_...`正确使用标志的 64 位进程错误地创建的。

# ios - 我相信这是一个通用错误，但我需要帮助来克服它。EXC_BAD_ACCESS 表视图，ios 内容

> ID：14105987
> 
> 赞同：1
> 
> 时间：2012-12-31T20:53:49.007
> 
> 标签：ios, objective-c, iphone, uitableview

我环顾四周，这个错误似乎与完全不同的问题有关。这是我的代码片段，如果您可能需要更多，请告诉我。这是使用 using 设置表格最后一个单元格的大小`UITableView`。

```
- (CGFloat)tableView:(UITableView *)tableView
 heightForRowAtIndexPath:(NSIndexPath *)indexPath
 {
     int returnValue = 44;
     int numRows = [tableView numberOfRowsInSection:[indexPath section]];
    if (!([indexPath row] ==  numRows - 1)) {
        returnValue = 60;
    }
    return returnValue;
 } 
```

我已经注释掉了代码中的所有行，以发现`[tableView numberOfRowsInSection:[indexPath section]]`抛出错误。有任何想法吗？

编辑：看起来每次您调用 tableView 时，它都会重绘所有调用此方法的单元格，该方法调用此方法令人作呕。我在该方法的文档中找到了这一点：

“每次显示表视图时，它`tableView:heightForRowAtIndexPath:`都会为其每一行调用委托，这可能会导致具有大量行（大约 1000 或更多）的表视图出现严重的性能问题。”

这是否意味着我不能调用这些方法？

**[编辑2：在这里](https://stackoverflow.com/questions/4823197/iphone-when-to-calculate-heightforrowatindexpath-for-a-tableview-when-each-cel)找到我的答案**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T01:10:21.813

希望您的代码中的问题是

```
int numRows = [tableView numberOfRowsInSection:[indexPath section]]; 
```

希望在部分中设置行数，您可能有一些数组，您正在返回一些静态值的计数。因此，要获取行数，请使用该数组计数或该静态值。希望它可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T21:30:57.163

您是否在 .h 文件中声明了 tableView 的任何属性。如果是这样，您可以尝试在函数中修改本地 UITableView 变量的名称。除此之外，我认为 Peter 关于 numberOfSectionsInTableView: 返回值可能是正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T21:05:22.187

该错误始终表明一件事：您的应用程序试图访问它无权访问的内存。这通常会转化为您的应用程序试图取消引用错误的指针。在这种情况下，坏指针是`tableView`or `indexPath`。检查它们是否为 NULL 或者它们是否已经被释放（打开 NSZombies 可以帮助查看它们是否已经被释放）。

# xamarin.android - MonoDroid & RestSharp，MethodMissingException

> ID：14105988
> 
> 赞同：1
> 
> 时间：2012-12-31T20:54:08.437
> 
> 标签：xamarin.android, restsharp

我正在尝试将 RestSharp 与 MonoDroid 一起使用，但遇到了一些问题。引发 MethodMissingException 并显示消息“未找到类型 EmPubLite.Android.Tweet[] 的默认构造函数。” 当我在 VS 调试器中检查任务时，我只能看到异常，它没有出现在 LogCat 中。我知道异常与 RestSharp 中的 JSON 反序列化有关。

链接器在 MonoDroid 选项中设置为“无”，我还尝试将 [Preserve] 属性添加到我的 DTO。

除了让它工作之外，为什么这个崩溃并没有出现在 LogCat 中？我希望任何因异常而失败的任务在我访问结果时重新引发异常。

```
[Activity(Label = "EmPubLite", MainLauncher = true, Icon = "@drawable/icon")]
public class EmPubLiteActivity : Activity
{
    protected override void OnCreate(Bundle bundle)
    {
        base.OnCreate(bundle);
        SetContentView(Resource.Layout.EmPubLight);

        var client = new TwitterClient();
        client.Search("bielema").ContinueWith(tweets =>
            {
                Debug.WriteLine("back");
                Debug.WriteLine(tweets.Result[0].Text); // Exception not showing up in LogCat
            });
    }
}

public class TwitterClient
{
    private RestClient client = new RestClient();

    public Task<Tweet[]> Search(string query)
    {
        var request = new RestRequest("http://search.twitter.com/search.json?rpp=5&include_entities=true&result_type=mixed&q={q}", Method.GET);
        request.AddUrlSegment("q", query);
        var taskCompletionSource = new TaskCompletionSource<Tweet[]>();
        client.ExecuteAsync<SearchResult>(request, response =>
        {
            if (response.ErrorException != null) taskCompletionSource.TrySetException(response.ErrorException);
            else taskCompletionSource.TrySetResult(response.Data.Results);

            // taskCompletionSource.TrySetResult(response.Data.Results);
        });
        return taskCompletionSource.Task;
    }
}

public class SearchResult
{
    public Tweet[] Results { get; set; }
}

public class Tweet
{
    public string Text { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T23:21:08.693

我通过使用 ServiceStack JSON 解析器而不是默认的 RestSharp JSON 解析器解决了这个问题。

# xml - XSLT 按复杂日期排序

> ID：14105991
> 
> 赞同：0
> 
> 时间：2012-12-31T20:54:37.383
> 
> 标签：xml, sorting, xslt

我正在尝试按日期和时间对此 xml 进行排序

```
<?xml version="1.0" encoding="utf-8"?>
<FormComments>
    <Comments EventName="Position Clearance">
        <Comment>
            <IsWindowsUser>
                <![CDATA[True]]>
            </IsWindowsUser>
            <UserName>
                <![CDATA[DOMAIN\userId]]>
            </UserName>
            <DisplayName>
                <![CDATA[DOMAIN\userId]]>
            </DisplayName>
            <DateTime>
                <![CDATA[12/21/2012 2:47 PM]]>
            </DateTime>
            <Body>
                <![CDATA[Clearance is obtained]]>
            </Body>
            <Action>
                <![CDATA[Clearance Obtained]]>
            </Action>
        </Comment>
        <Comment>
            <IsWindowsUser>
                <![CDATA[True]]>
            </IsWindowsUser>
            <UserName>
                <![CDATA[DOMAIN\userId]]>
            </UserName>
            <DisplayName>
                <![CDATA[DOMAIN\userId]]>
            </DisplayName>
            <DateTime>
                <![CDATA[12/21/2012 2:50 PM]]>
            </DateTime>
            <Body>
                <![CDATA[Clearance already obtained]]>
            </Body>
            <Action>
                <![CDATA[Clearance Obtained]]>
            </Action>
        </Comment>
    </Comments>
    <Comments EventName="Comp Advisor">
        <Comment>
            <IsWindowsUser>
                <![CDATA[True]]>
            </IsWindowsUser>
            <UserName>
                <![CDATA[DOMAIN\userId]]>
            </UserName>
            <DisplayName>
                <![CDATA[DOMAIN\userId]]>
            </DisplayName>
            <DateTime>
                <![CDATA[12/21/2012 2:48 PM]]>
            </DateTime>
            <Body>
                <![CDATA[This form needs modifications!!]]>
            </Body>
            <Action>
                <![CDATA[Modifications Needed]]>
            </Action>
        </Comment>
        <Comment>
            <IsWindowsUser>
                <![CDATA[True]]>
            </IsWindowsUser>
            <UserName>
                <![CDATA[DOMAIN\userId]]>
            </UserName>
            <DisplayName>
                <![CDATA[DOMAIN\userId]]>
            </DisplayName>
            <DateTime>
                <![CDATA[12/21/2012 2:51 PM]]>
            </DateTime>
            <Body>
                <![CDATA[Still not up to par!]]>
            </Body>
            <Action>
                <![CDATA[Deny]]>
            </Action>
        </Comment>
    </Comments>
    <Comments EventName="Modify">
        <Comment>
            <IsWindowsUser>
                <![CDATA[True]]>
            </IsWindowsUser>
            <UserName>
                <![CDATA[DOMAIN\userId]]>
            </UserName>
            <DisplayName>
                <![CDATA[DOMAIN\userId]]>
            </DisplayName>
            <DateTime>
                <![CDATA[12/21/2012 2:49 PM]]>
            </DateTime>
            <Body>
                <![CDATA[Done fixing the form]]>
            </Body>
            <Action>
                <![CDATA[Changes Made Resubmit]]>
            </Action>
        </Comment>
    </Comments>
    <Comments EventName="How to Proceed">
    <Comment>
        <IsWindowsUser>
            <![CDATA[True]]>
        </IsWindowsUser>
        <UserName>
            <![CDATA[DOMAIN\userId]]>
        </UserName>
        <DisplayName>
            <![CDATA[DOMAIN\userId]]>
        </DisplayName>
        <DateTime>
            <![CDATA[12/21/2012 2:52 PM]]>
        </DateTime>
        <Body>
            <![CDATA[Forget it!!!]]>
        </Body>
        <Action>
            <![CDATA[Stop]]>
        </Action>
     </Comment>
  </Comments>
</FormComments> 
```

我想出了这个

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="/">

    <STYLE TYPE="text/css">
        TD{
        font-family: Arial; font-size: 9pt;
        background color:"#939495";
        }

        TD.Center{
        text-align:"center";
        }

        TH{
        background color:"#B31B34";
        }

        caption{
        font-size:20pt;
        }
    </STYLE>

    <hr />

    <table cellpadding='8' border='1'>
        <caption>Workflow Information </caption>
        <th>Event</th>
        <th>Approver</th>
        <th>Action</th>
        <th>Comment</th>
        <th>Time</th>

        <xsl:for-each select="FormComments/Comments">
                      <!-- Sort by year -->
                      <xsl:sort select="substring-before(substring-after(substring-after(Comment/DateTime,'/'),'/'),' ')"/>
                      <!-- Sort by Month -->
                      <xsl:sort select="substring(normalize-space(Comment/DateTime),1,2)"/>
                      <!-- Sort by AM / PM -->
                      <xsl:sort select="substring-after(substring-after(normalize-space(Comment/DateTime), ' '),' ')"/>
                      <!-- Sort by hour -->
                      <xsl:sort select="substring-before(substring-after(substring-after(Comment/DateTime,' '),' '),':')"/>
                      <!-- Sort by minute -->
                      <xsl:sort select="substring-before(substring-after(normalize-space(Comment/DateTime), ':'),' ')"/>

                               <xsl:variable name="eventName">
                <xsl:value-of select="@EventName" />
            </xsl:variable>

            <xsl:for-each select="Comment">

                <xsl:variable name="User">
                    <xsl:value-of select="UserName" />
                </xsl:variable>

                <tr>
                    <td>
                        <xsl:copy-of select="$eventName" />
                    </td>
                    <td>
                        <xsl:copy-of select="substring-after($User,'\')" />
                    </td>
                    <td class="Center">
                        <xsl:value-of select="Action"/>
                    </td>
                    <td>
                        <xsl:value-of select="Body"/>
                    </td>
                    <td>
                        <xsl:value-of select="DateTime"/>
                    </td>

                </tr>
            </xsl:for-each>
        </xsl:for-each>
    </table>
</xsl:template>
</xsl:stylesheet> 
```

问题是它只在评论节点内排序，而不是在所有评论节点中排序。

我无法发布图片，因为我刚刚注册了这个网站......输出看起来像

```
Workflow Information  
Event              Approver  Action              Comment                Time 
Position Clearance tf114096  Clearance Obtained  Clearance is obtained  12/21/2012 2:47 PM  
Position Clearance rbg14096  Clearance Obtained  Clearance already obtained  12/21/2012 2:50 PM  
Comp Advisor       thy14096  Modifications Needed  This form needs modifications!!  12/21/2012 2:48 PM  
Comp Advisor       trw14096  Deny  Still not up to par!  12/21/2012 2:51 PM  
Modify             we214096  Changes Made Resubmit  Done fixing the form  12/21/2012 2:49 PM  
How to Proceed     cf414096  Stop  Forget it!!!  12/21/2012 2:52 PM 
```

请注意，发生两次的事件在该事件中排序，但不是针对所有其他事件。鉴于这种 XML 结构，有没有办法对此进行排序？

我一直在使用这个在线工具来测试我的 XSLT [http://www.w3schools.com/xsl/tryxslt.asp?xmlfile=cdcatalog&xsltfile=cdcatalog](http://www.w3schools.com/xsl/tryxslt.asp?xmlfile=cdcatalog&xsltfile=cdcatalog)

预期结果应如下所示

```
 Workflow Information  
 Event              Approver  Action              Comment                Time 
 Position Clearance tf114096  Clearance Obtained  Clearance is obtained  12/21/2012 2:47 PM 
 Comp Advisor       thy14096  Modifications Needed  This form needs modifications!!  12/21/2012 2:48 PM 
 Modify             we214096  Changes Made Resubmit  Done fixing the form  12/21/2012 2:49 PM 
 Position Clearance rbg14096  Clearance Obtained  Clearance already obtained  12/21/2012 2:50 PM  
 Comp Advisor       trw14096  Deny  Still not up to par!  12/21/2012 2:51 PM  
 How to Proceed     cf414096  Stop  Forget it!!!  12/21/2012 2:52 PM 
```

结果完全排序..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T22:13:36.880

这里的问题是您正在对**评论**元素进行排序，但**评论**元素中有多个**评论**元素，并且您只是按第一个日期对**评论元素进行排序。**

您实际上并不需要两个**xsl:for-each**语句。您可以直接迭代子**评论**元素，这将解决您的排序问题。

```
<xsl:for-each select="FormComments/Comments/Comment"> 
```

看起来您想先访问**Comments元素的****eventName**属性，然后再遍历子**Comment**元素。这仍然可以实现，只需在位于**Comment**元素上时使用父选择器

 ******```
<xsl:value-of select="../@EventName"/> 
```

尝试以下 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:template match="/">
        <table>
            <th>Event</th>
            <th>Approver</th>
            <th>Action</th>
            <th>Comment</th>
            <th>Time</th>
            <xsl:for-each select="FormComments/Comments/Comment"><!-- Sort by year -->
                <xsl:sort select="substring-before(substring-after(substring-after(DateTime,'/'),'/'),' ')"/><!-- Sort by Month -->
                <xsl:sort select="substring(normalize-space(DateTime),1,2)"/><!-- Sort by AM / PM -->
                <xsl:sort select="substring-after(substring-after(normalize-space(DateTime), ' '),' ')"/><!-- Sort by hour -->
                <xsl:sort select="substring-before(substring-after(substring-after(DateTime,' '),' '),':')"/><!-- Sort by minute -->
                <xsl:sort select="substring-before(substring-after(normalize-space(DateTime), ':'),' ')"/>
                <xsl:variable name="User">
                    <xsl:value-of select="UserName"/>
                </xsl:variable>
                <tr>
                    <td>
                        <xsl:value-of select="../@EventName"/>
                    </td>
                    <td>
                        <xsl:value-of select="substring($User,8)"/>
                    </td>
                    <td class="Center">
                        <xsl:value-of select="Action"/>
                    </td>
                    <td>
                        <xsl:value-of select="Body"/>
                    </td>
                    <td>
                        <xsl:value-of select="DateTime"/>
                    </td>
                </tr>
            </xsl:for-each>
        </table>
    </xsl:template>
</xsl:stylesheet> 
```

（为简洁起见，我删掉了一些行）

当应用于您的 XML 时，将输出以下内容

```
<table>
<th>Event</th>
<th>Approver</th>
<th>Action</th>
<th>Comment</th>
<th>Time</th>
<tr>
<td>Position Clearance</td>
<td>userId</td>
<td class="Center">Clearance Obtained</td>
<td>Clearance is obtained</td>
<td>12/21/2012 2:47 PM</td>
</tr>
<tr>
<td>Comp Advisor</td>
<td>userId</td>
<td class="Center">Modifications Needed</td>
<td>This form needs modifications!!</td>
<td>12/21/2012 2:48 PM</td>
</tr>
<tr>
<td>Modify</td>
<td>userId</td>
<td class="Center">Changes Made Resubmit</td>
<td>Done fixing the form</td>
<td>12/21/2012 2:49 PM</td>
</tr>
<tr>
<td>Position Clearance</td>
<td>userId</td>
<td class="Center">Clearance Obtained</td>
<td>Clearance already obtained</td>
<td>12/21/2012 2:50 PM</td>
</tr>
<tr>
<td>Comp Advisor</td>
<td>userId</td>
<td class="Center">Deny</td>
<td>Still not up to par!</td>
<td>12/21/2012 2:51 PM</td>
</tr>
<tr>
<td>How to Proceed</td>
<td>userId</td>
<td class="Center">Stop</td>
<td>Forget it!!!</td>
<td>12/21/2012 2:52 PM</td>
</tr>
</table> 
```******

# hadoop - Hadoop 和 Cassandra 按排序顺序处理行

> ID：14105992
> 
> 赞同：0
> 
> 时间：2012-12-31T20:54:40.403
> 
> 标签：hadoop, cassandra

我想用一个字符串列表填充 Cassandra 数据库，然后使用 Hadoop 处理这些字符串。我想要做的是使用 Hadoop 集群依次遍历所有字符串，并记录每个字符串之间有多少重叠，以便找到最长的公共子字符串。

我的问题是，InputFormat 对象是否允许我按排序顺序读出数据，或者我的字符串是否会在集群中的每台机器上“随机”读出（根据 Cassandra 决定分配它们的方式）？MapReduce 流程是否旨在自行处理每一行，而不会像我要求的那样连续查看两行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T22:14:52.180

首先，映射器将按照从 InputFormat 中获取数据的任何顺序读取数据。我不是 Cassandra 专家，但我不希望这会按顺序排列。

如果你想要排序顺序，你应该使用一个身份映射器（一个什么都不做），它的输出键是字符串本身。然后它们将在传递到reduce步骤之前进行排序。但它变得有点复杂，因为你可以拥有多个减速器。只有一个 reducer，所有东西都是全局排序的。如果有多个，每个 reducer 的输入都会被排序，但跨 reducer 的输入可能不会被排序。也就是说，相邻的字符串可能不会进入同一个 reducer。您需要一个自定义分区器来处理它。

最后，你提到你正在做最长的公共子串——你是在寻找每对字符串中最长的子串吗？在连续的字符串对中？在所有字符串中？这些可能性中的每一种都会影响您需要如何构建 MapReduce 作业。

# java - 如何旋转矩形？

> ID：14105993
> 
> 赞同：2
> 
> 时间：2012-12-31T20:54:40.927
> 
> 标签：java, graphics2d, rectangles, affinetransform

这是绘制我的角色左腿的示例：

```
g2d.fillRect(pX + (headW - bodyW)/2, pY + headH + bodyH, legW, legH); //left leg 
```

我知道如何用`AffineTransform`s 旋转图像，如下所示：

```
AffineTransform tr = g2d.getTransform();
tr.rotate(Math.toRadians(rotAmount));
g2d.drawImage(playerI, tr, null); 
```

如何用 旋转这个矩形`AffineTransform`？我不能做这样的事情：

```
g2d.rotate(Math.toRadians(rotAmount)); 
```

因为那会旋转我的整个人。我怎样才能只旋转腿？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T21:02:09.980

没关系，我发现了如何。

```
AffineTransform old = g2d.getTransform();
g2d.rotate(Math.toRadians(lLegRot));
g2d.fillRect(pX + (headW - bodyW)/2, pY + headH + bodyH, legW, legH); //left leg
g2d.setTransform(old);
g2d.rotate(Math.toRadians(rLegRot));
g2d.fillRect(pX + headW - legW - (headW - bodyW)/2, pY + headH + bodyH, legW, legH); //right leg 
```

较新的旋转会覆盖较旧的旋转，同时保持先前旋转的东西完好无损。要重置旋转，只需执行`g2d.setTransform(old);`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T21:04:59.850

如果你决定使用 java.awt.geom，你可以使用 rotate(someAngle) 方法。