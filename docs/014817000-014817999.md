# StackOverflow 问答 14817000-14817999

# android - Android Junit项目中的日志记录和Junit测试问题

> ID：14817002
> 
> 赞同：1
> 
> 时间：2013-02-11T17:00:36.680
> 
> 标签：android, logging, junit

我有一个 Android 项目，其中有一些活动以及一些常规的 java 代码，所有这些我都希望能够使用 Junit 进行测试。我在我的常规 android 项目旁边创建了一个 Android Junit 项目，并包含 Junit 4 库，以便我可以运行 android junit 测试和常规 junit 测试。

一切工作正常，即 Junit 测试正在运行并通过，直到我尝试使用 SLF4J for Android 将日志记录添加到我的主项目中。现在，每当我尝试运行 Junit 测试时，都会出现错误：

```
java.lang.NoClassDefFoundError: android/util/Log
...
Caused by: java.lang.ClassNotFoundException: android.util.Log 
```

有没有人知道为什么会发生这个错误？如果有更好的方法来设置我的项目以使 Junit 和 Android Junit 测试成为可能，我会全力以赴！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T19:48:26.907

如果您在主机的 JVM 上作为 JUnit 运行测试，您将无法访问 Android 类，例如`android.util.Log`. `android.jar`仅提供存根。

# r - ggplot 版本的charts.PerformanceSummary

> ID：14817006
> 
> 赞同：7
> 
> 时间：2013-02-11T17:00:47.550
> 
> 标签：r, ggplot2, performanceanalytics

我想`charts.PerformanceSummary`在`PerformanceAnalytics`包中提供基本功能的“ggplot 版本”，因为我认为 ggplot 通常更漂亮，理论上在编辑图像方面更强大。我已经相当接近了，但有一些问题需要一些帮助。即：

1.  减少图例占用的空间量，当上面有超过 10 行时，它会变得可怕/丑陋......（只需线条颜色和名称就足够了）
2.  增加 Daily_Returns 方面的大小以匹配图表的大小。PerformanceSummary 在`PerformanceAnalytics`
3.  有一个选项可以指定在 Daily_Returns 方面的每日回报系列中显示哪些资产，而不是总是使用第一列，这比发生在`charts.PerformanceSummary`

如果有更好的方法可以使用`gridExtra`而不是方面来做到这一点......我并不反对人们向我展示这看起来会更好......

这里的问题是美学，我想可能很容易操作，因为 PerformanceAnalytics 已经有一个很好的工作示例，我只是想让它更漂亮/更专业......

除了奖励积分之外，我还希望能够在每个资产的图表上方或下方或侧面的某处显示一些与之相关的性能统计数据......不太确定在哪里最好显示或显示此信息。

此外，如果有人对此提出建议，我并不反对那些建议清理我的代码的部分。

这是我的可重现示例...

首先生成返回数据：

```
require(xts)
X.stock.rtns <- xts(rnorm(1000,0.00001,0.0003), Sys.Date()-(1000:1))
Y.stock.rtns <- xts(rnorm(1000,0.00003,0.0004), Sys.Date()-(1000:1))
Z.stock.rtns <- xts(rnorm(1000,0.00005,0.0005), Sys.Date()-(1000:1))
rtn.obj <- merge(X.stock.rtns , Y.stock.rtns, Z.stock.rtns)
colnames(rtn.obj) <- c("x.stock.rtns","y.stock.rtns","z.stock.rtns") 
```

我想从以下结果中复制图像：

```
require(PerformanceAnalytics)
charts.PerformanceSummary(rtn.obj, geometric=TRUE) 
```

![目标](../Images/1a6cd729b2552fea35011303dcbf01a6.png)

这是我迄今为止的尝试......

```
gg.charts.PerformanceSummary <- function(rtn.obj, geometric=TRUE, main="",plot=TRUE){

    # load libraries
suppressPackageStartupMessages(require(ggplot2))
suppressPackageStartupMessages(require(scales))
suppressPackageStartupMessages(require(reshape))
suppressPackageStartupMessages(require(PerformanceAnalytics))
    # create function to clean returns if having NAs in data
    clean.rtn.xts <- function(univ.rtn.xts.obj,na.replace=0){
    univ.rtn.xts.obj[is.na(univ.rtn.xts.obj)]<- na.replace
    univ.rtn.xts.obj
}
    # Create cumulative return function
cum.rtn <- function(clean.xts.obj, g=TRUE){
    x <- clean.xts.obj
    if(g==TRUE){y <- cumprod(x+1)-1} else {y <- cumsum(x)}
    y
}
    # Create function to calculate drawdowns
dd.xts <- function(clean.xts.obj, g=TRUE){
    x <- clean.xts.obj
    if(g==TRUE){y <- Drawdowns(x)} else {y <- Drawdowns(x,geometric=FALSE)}
    y
}
    # create a function to create a dataframe to be usable in ggplot to replicate charts.PerformanceSummary
cps.df <- function(xts.obj,geometric){
    x <- clean.rtn.xts(xts.obj)
    series.name <- colnames(xts.obj)[1]
    tmp <- cum.rtn(x,geometric)
    tmp$rtn <- x
    tmp$dd <- dd.xts(x,geometric)
    colnames(tmp) <- c("Cumulative_Return","Daily_Return","Drawdown")
    tmp.df <- as.data.frame(coredata(tmp))
    tmp.df$Date <- as.POSIXct(index(tmp))
    tmp.df.long <- melt(tmp.df,id.var="Date")
    tmp.df.long$asset <- rep(series.name,nrow(tmp.df.long))
    tmp.df.long
}
# A conditional statement altering the plot according to the number of assets
if(ncol(rtn.obj)==1){
            # using the cps.df function
    df <- cps.df(rtn.obj,geometric)
            # adding in a title string if need be
    if(main==""){
        title.string <- paste0(df$asset[1]," Performance")
    } else {
        title.string <- main
    }
            # generating the ggplot output with all the added extras....
    gg.xts <- ggplot(df, aes_string(x="Date",y="value",group="variable"))+
                facet_grid(variable ~ ., scales="free", space="free")+
                geom_line(data=subset(df,variable=="Cumulative_Return"))+
                geom_bar(data=subset(df,variable=="Daily_Return"),stat="identity")+
                geom_line(data=subset(df,variable=="Drawdown"))+
                ylab("")+
                geom_abline(intercept=0,slope=0,alpha=0.3)+
                ggtitle(title.string)+
                theme(axis.text.x = element_text(angle = 45, hjust = 1))+
                scale_x_datetime(breaks = date_breaks("6 months"), labels = date_format("%d/%m/%Y"))

} else {
            # a few extra bits to deal with the added rtn columns
    no.of.assets <- ncol(rtn.obj)
    asset.names <- colnames(rtn.obj)
    df <- do.call(rbind,lapply(1:no.of.assets, function(x){cps.df(rtn.obj[,x],geometric)}))
    df$asset <- ordered(df$asset, levels=asset.names)
    if(main==""){
        title.string <- paste0(df$asset[1]," Performance")
    } else {
        title.string <- main
    }
    if(no.of.assets>5){legend.rows <- 5} else {legend.rows <- no.of.assets}
    gg.xts <- ggplot(df, aes_string(x="Date", y="value",group="asset"))+
      facet_grid(variable~.,scales="free",space="free")+
      geom_line(data=subset(df,variable=="Cumulative_Return"),aes(colour=factor(asset)))+
      geom_bar(data=subset(df,variable=="Daily_Return"),stat="identity",aes(fill=factor(asset),colour=factor(asset)),position="dodge")+
      geom_line(data=subset(df,variable=="Drawdown"),aes(colour=factor(asset)))+
      ylab("")+
      geom_abline(intercept=0,slope=0,alpha=0.3)+
      ggtitle(title.string)+
      theme(legend.title=element_blank(), legend.position=c(0,1), legend.justification=c(0,1),
            axis.text.x = element_text(angle = 45, hjust = 1))+
      guides(col=guide_legend(nrow=legend.rows))+
      scale_x_datetime(breaks = date_breaks("6 months"), labels = date_format("%d/%m/%Y"))

}

assign("gg.xts", gg.xts,envir=.GlobalEnv)
if(plot==TRUE){
    plot(gg.xts)
} else {}

}
# seeing the ggplot equivalent....
gg.charts.PerformanceSummary(rtn.obj, geometric=TRUE) 
```

![结果](../Images/37d9781f4984bfbc63e96b3aee4caf24.png)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-30T07:24:33.903

我就是在找那个。你已经很接近了。站在你的肩膀上，我能够解决一些问题。

**编辑（2015 年 5 月 9 日）：**`Drawdown()`现在可以通过三冒号运算符调用该函数， `PerformanceAnalytics:::Drawdown()`. 编辑下面的代码以反映此更改。**编辑（2018 年 4 月 22 日）：** `show_guide`已弃用并由`show.legend`.

```
require(xts)

X.stock.rtns <- xts(rnorm(1000,0.00001,0.0003), Sys.Date()-(1000:1))
Y.stock.rtns <- xts(rnorm(1000,0.00003,0.0004), Sys.Date()-(1000:1))
Z.stock.rtns <- xts(rnorm(1000,0.00005,0.0005), Sys.Date()-(1000:1))
rtn.obj <- merge(X.stock.rtns , Y.stock.rtns, Z.stock.rtns)
colnames(rtn.obj) <- c("x","y","z")

# advanced charts.PerforanceSummary based on ggplot
gg.charts.PerformanceSummary <- function(rtn.obj, geometric = TRUE, main = "", plot = TRUE)
{

    # load libraries
    suppressPackageStartupMessages(require(ggplot2))
    suppressPackageStartupMessages(require(scales))
    suppressPackageStartupMessages(require(reshape))
    suppressPackageStartupMessages(require(PerformanceAnalytics))

    # create function to clean returns if having NAs in data
    clean.rtn.xts <- function(univ.rtn.xts.obj,na.replace=0){
        univ.rtn.xts.obj[is.na(univ.rtn.xts.obj)]<- na.replace
        univ.rtn.xts.obj  
    }

    # Create cumulative return function
    cum.rtn <- function(clean.xts.obj, g = TRUE)
    {
        x <- clean.xts.obj
        if(g == TRUE){y <- cumprod(x+1)-1} else {y <- cumsum(x)}
        y
    }

    # Create function to calculate drawdowns
    dd.xts <- function(clean.xts.obj, g = TRUE)
    {
        x <- clean.xts.obj
        if(g == TRUE){y <- PerformanceAnalytics:::Drawdowns(x)} else {y <- PerformanceAnalytics:::Drawdowns(x,geometric = FALSE)}
        y
    }

    # create a function to create a dataframe to be usable in ggplot to replicate charts.PerformanceSummary
    cps.df <- function(xts.obj,geometric)
    {
        x <- clean.rtn.xts(xts.obj)
        series.name <- colnames(xts.obj)[1]
        tmp <- cum.rtn(x,geometric)
        tmp$rtn <- x
        tmp$dd <- dd.xts(x,geometric)
        colnames(tmp) <- c("Index","Return","Drawdown") # names with space
        tmp.df <- as.data.frame(coredata(tmp))
        tmp.df$Date <- as.POSIXct(index(tmp))
        tmp.df.long <- melt(tmp.df,id.var="Date")
        tmp.df.long$asset <- rep(series.name,nrow(tmp.df.long))
        tmp.df.long
    }

    # A conditional statement altering the plot according to the number of assets
    if(ncol(rtn.obj)==1)
    {
        # using the cps.df function
        df <- cps.df(rtn.obj,geometric)
        # adding in a title string if need be
        if(main == ""){
            title.string <- paste("Asset Performance")
        } else {
            title.string <- main
        }

        gg.xts <- ggplot(df, aes_string( x = "Date", y = "value", group = "variable" )) +
            facet_grid(variable ~ ., scales = "free_y", space = "fixed") +
            geom_line(data = subset(df, variable == "Index")) +
            geom_bar(data = subset(df, variable == "Return"), stat = "identity") +
            geom_line(data = subset(df, variable == "Drawdown")) +
            geom_hline(yintercept = 0, size = 0.5, colour = "black") +
            ggtitle(title.string) +
            theme(axis.text.x = element_text(angle = 0, hjust = 1)) +
            scale_x_datetime(breaks = date_breaks("6 months"), labels = date_format("%m/%Y")) +
            ylab("") +
            xlab("")

    } 
    else 
    {
        # a few extra bits to deal with the added rtn columns
        no.of.assets <- ncol(rtn.obj)
        asset.names <- colnames(rtn.obj)
        df <- do.call(rbind,lapply(1:no.of.assets, function(x){cps.df(rtn.obj[,x],geometric)}))
        df$asset <- ordered(df$asset, levels=asset.names)
        if(main == ""){
            title.string <- paste("Asset",asset.names[1],asset.names[2],asset.names[3],"Performance")
        } else {
            title.string <- main
        }

        if(no.of.assets>5){legend.rows <- 5} else {legend.rows <- no.of.assets}

        gg.xts <- ggplot(df, aes_string(x = "Date", y = "value" )) +

            # panel layout
            facet_grid(variable~., scales = "free_y", space = "fixed", shrink = TRUE, drop = TRUE, margin = 
                           , labeller = label_value) + # label_value is default

            # display points for Index and Drawdown, but not for Return
            geom_point(data = subset(df, variable == c("Index","Drawdown"))
                       , aes(colour = factor(asset), shape = factor(asset)), size = 1.2, show.legend = TRUE) + 

            # manually select shape of geom_point
            scale_shape_manual(values = c(1,2,3)) + 

            # line colours for the Index
            geom_line(data = subset(df, variable == "Index"), aes(colour = factor(asset)), show.legend = FALSE) +

            # bar colours for the Return
            geom_bar(data = subset(df,variable == "Return"), stat = "identity"
                     , aes(fill = factor(asset), colour = factor(asset)), position = "dodge", show.legend = FALSE) +

            # line colours for the Drawdown
            geom_line(data = subset(df, variable == "Drawdown"), aes(colour = factor(asset)), show.legend = FALSE) +

            # horizontal line to indicate zero values
            geom_hline(yintercept = 0, size = 0.5, colour = "black") +

            # horizontal ticks
            scale_x_datetime(breaks = date_breaks("6 months"), labels = date_format("%m/%Y")) +

            # main y-axis title
            ylab("") +

            # main x-axis title
            xlab("") +

            # main chart title
            ggtitle(title.string)

        # legend 

        gglegend <- guide_legend(override.aes = list(size = 3))

        gg.xts <- gg.xts + guides(colour = gglegend, size = "none") +

            # gglegend <- guide_legend(override.aes = list(size = 3), direction = "horizontal") # direction overwritten by legend.box?
            # gg.xts <- gg.xts + guides(colour = gglegend, size = "none", shape = gglegend) + # Warning: "Duplicated override.aes is ignored"

            theme( legend.title = element_blank()
                   , legend.position = c(0,1)
                   , legend.justification = c(0,1)
                   , legend.background = element_rect(colour = 'grey')
                   , legend.key = element_rect(fill = "white", colour = "white")
                   , axis.text.x = element_text(angle = 0, hjust = 1)
                   , strip.background = element_rect(fill = "white")
                   , panel.background = element_rect(fill = "white", colour = "white")
                   , panel.grid.major = element_line(colour = "grey", size = 0.5) 
                   , panel.grid.minor = element_line(colour = NA, size = 0.0)
            )

    }

    assign("gg.xts", gg.xts,envir=.GlobalEnv)
    if(plot == TRUE){
        plot(gg.xts)
    } else {}

}

# display chart
gg.charts.PerformanceSummary(rtn.obj, geometric = TRUE) 
```

面板大小的控制在 facet_grid 内部：facet_grid(variable ~ ., scales = "free_y", space = "fixed")。这些选项的作用在手册中进行了解释，引用：

> **scales**：尺度是否在所有方面共享（默认值，“固定”），或者它们是否在行（“free_x”）、列（“free_y”）或行和列（“free”）之间变化
> 
> **space**：如果“固定”，默认情况下，所有面板都具有相同的大小。如果“free_y”，它们的高度将与 y 刻度的长度成正比；如果“free_x”，它们的宽度将与 x 刻度的长度成正比；或者如果“免费”，高度和宽度都会有所不同。除非适当的比例也发生变化，否则此设置无效。

**更新：标签**

自定义标签可以通过以下函数获得：

```
# create a function to store fancy axis labels 

    my_labeller <- function(var, value){ # from the R Cookbook
        value <- as.character(value)
        if (var=="variable") 
        {
              value[value=="Index"] <- "Cumulative Returns"
              value[value=="Return"] <- "Daily Returns"
              value[value=="Drawdown"] <- "Drawdown"
        }
        return(value)
    } 
```

并将 labeller 选项设置为“labeller = my_labeller”

**更新：背景**

背景、网格线、颜色等的外观可以在 theme() 函数中进行控制：上面的代码已经更新以反映这些变化。

[![在此处输入图像描述](../Images/b7f4c9dee4432346a7fa3b4d6ae1cf58.png)](https://i.stack.imgur.com/SCAis.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T10:17:04.913

有关图例的大小，请参阅 ?theme。图例的大部分方面都可以通过那里进行调整...我想您要调整的是 legend.key.size 以及 legend.background 以删除每个图例周围的框...

刻面中每个面板的大小有点复杂。我有一个技巧，可让您在调用 facet_grid 时指定每个面板的相对大小，但它需要从源等安装...更好的解决方案是将您的绘图转换为 gtable 对象并修改它...假设您的绘图称为 p：

```
require(gtable)
require(grid)

pTable <- ggplot_gtable(ggplot_build(p))
pTable$heights[[4]] <- unit(2, 'null')

grid.newpage()
grid.draw(pTable) 
```

这将使顶部面板的高度成为其他面板大小的两倍......它是 pTable$heights[[4]] 而不是 pTable$heights[[1]] 的原因是分面面板不是情节中的顶级grobs。

我将避免比这更具体，因为您最好自己探索 gtable 的属性（而且因为我没有时间）

最好的

托马斯

# android - 在 Android 中以编程方式执行 shell 命令

> ID：14817008
> 
> 赞同：3
> 
> 时间：2013-02-11T17:00:51.523
> 
> 标签：android, shell, process

我有两个命令要执行并取回数据我的 .sh 文件作为两个命令，它看起来像这样

su dhcpcd eth0

当我尝试通过键入 sh filename.sh 在我的 Android 终端中执行 .sh 命令时，它没有给我输出，但是当我通过键入单独的行来执行它时，它可以工作。所以当我编程为

```
nativeProcess = Runtime.getRuntime().exec("su");
nativeProcess = Runtime.getRuntime().exec("dhcpcd eth0");
while ((line = br.readLine()) != null) 
{
    contents.append(line + "\n");
} 
```

这有什么问题？我得到的输出内容为空

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T17:06:17.990

我们可以像这样使用 Runtime 类来执行 shell 命令。

```
Runtime.getRuntime().exec("ls"); 
```

上面的代码将为给定的命令 ls 创建一个本地进程，将返回与 Process 对象相同的进程。

有关它的更多详细信息，[请在此处查看](http://developer.android.com/reference/java/lang/Runtime.html#exec%28java.lang.String%29)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T17:04:34.160

`exec`在 Java 中启动一个新进程。因此，第一行创建了一个新`su`进程，它将简单地坐在那里等待您的输入。第二行启动一个新`dhcpcd`进程，该进程没有特权，因此不会产生有用的输出。

你想要的是运行`dhcpcd`using `su`，通常是这样的：

```
exec("su -c dhcpcd eth0") 
```

# android - 从 ContentProvider 更新自定义片段

> ID：14817009
> 
> 赞同：1
> 
> 时间：2013-02-11T17:00:57.467
> 
> 标签：android, fragment, android-contentprovider, contentobserver, android-maps-v2

我正在实现两个片段以在从 ContentProvider 检索的同一个表上显示不同的视图： 1/ 扩展 ListFragment 以在列表中提供数据的类 2/ 自定义片段类，它本身包含 Google Maps v2 片段

列表片段是使用加载器和 SimpleContentAdapter 的标准实现，因此当在单独的活动中编辑列表项的名称时，更改会反映在列表中。

我想对我的自定义片段做类似的事情，以便随着数据的变化创建和更新地图标记。

这样做的最佳做法是什么？

使用 SimpleCursorAdapter 似乎不起作用，因为它返回 View 对象，而我需要创建/更新 Marker 对象，而这些对象不是从 View 派生的。我正在考虑创建自己的 CursorAdapter 类，在我的地图片段容器上实现 ContentObserver 并将其注册到 CursorAdapter。这是最佳实践吗？有谁知道任何演示最佳实践的示例代码？

抱歉，如果这是一个愚蠢的问题——我是 Android 编程的新手，所以对通知架构并不完全清楚——但我尝试阅读该主题但无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:47:22.060

好的，我已经想出了这个问题的答案。不需要 CursorAdapter 或 ContentObserver。步骤如下： 1/ 创建 Fragment 派生类（在我的情况下从 MapFragment 派生） 2/ 在此类上实现 LoaderCallbacks 3/ 在此类的 onCreate() 覆盖中调用 getLoaderManager.initLoader() 4/ 创建一个新的 CursorLoader () 在您的 LoaderCallbacks.onCreateLoader() 中覆盖 5/ 在 LoaderCallbacks.onLoadFinished() 中，调用代码以迭代光标并填充您的视图。但不要关闭光标，否则您将不会收到进一步的更新！！！

我的问题源于修改了一些示例代码，其中一旦填充了列表，就会调用 cursor.Close()。我想好的做法是将光标保存在私有数据成员中，并在调用 LoaderCallbacks.onLoaderReset() 时将其关闭。

# php - 当我尝试使用 US\Eastern 时区转换字符串时，strotime 返回 false，我应该使用哪个时区而不是那个时区？

> ID：14817010
> 
> 赞同：2
> 
> 时间：2013-02-11T17:01:03.473
> 
> 标签：php, timezone

如果我做

```
$time = strtotime( '2013-3-16 11:40:00 US/Eastern' );
echo $time; 
```

$time 是错误的。该字符串是以编程方式生成的，因此我可以将时区更改为支持的时区，我应该使用什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T17:05:40.233

我认为这应该有效：

```
$time = DateTime::createFromFormat('Y-n-j H:i:s', 
          '2013-3-16 11:40:00', new DateTimeZone('US/Eastern'));

print $time->getTimestamp(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T17:11:00.743

```
date_default_timezone_set('US/Eastern'); 
$time = strtotime( '2013-3-16 11:40:00' );
echo $time; 
```

与@One Trick Pony 相比，它产生相同的结果。 [演示](http://phpfiddle.org/main/code/fd0-eha)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T17:15:38.153

看到这个页面

[http://php.net/manual/en/datetime.settimezone.php](http://php.net/manual/en/datetime.settimezone.php)

帮助您设置时区

# api - Google Hangout API 控制台似乎已损坏

> ID：14817012
> 
> 赞同：0
> 
> 时间：2013-02-11T17:01:10.570
> 
> 标签：api, google-plus, hangout

直到昨天我还有一个可以工作的环聊应用程序 - 但现在我不能再在开发人员沙箱中启动该应用程序了。

在诊断问题的过程中，我回溯到只是尝试在开发人员沙箱中启动其中一个 Google 示例应用程序 ( [https://plushangoutstarter.appspot.com/static/simpleHangoutApp.xml](https://plushangoutstarter.appspot.com/static/simpleHangoutApp.xml) )。

这与我的应用程序失败的方式相同：环聊说正在加载应用程序以及可爱的动画，但从未加载。

我已经从不同的谷歌帐户和操作系统尝试过这个，但问题是一样的。

js控制台显示如下错误：

Uncaught SyntaxError: Unexpected token < login.corp.google.com/request?s=oz-autopush-full.plus.corp.google.com:443/u….google.com/js/api.js&maxAge=1200&authLevel=2000000&rpMode =v2&keyIds=Do0:2

有趣的是，我可以在沙盒之外启动环聊应用程序（我的和示例应用程序）。例如，[https://plus.google.com/hangouts/_/16fae425e33645b520c4b14f71adbdbba843f00d](https://plus.google.com/hangouts/_/16fae425e33645b520c4b14f71adbdbba843f00d)

在我看来，Google 似乎已经部署了一项重大更改，但我不敢相信 Twitter 或 google plus 开发人员组上不会有任何活动，如果他们有的话。

我的问题是：

1）任何人都可以在开发人员沙箱中启动应用程序 2）如果没有，任何人都知道问题出在哪里。

提前感谢您的帮助。在这些情况下，像往常一样，我计划在几天内向我的同事演示我的应用程序，向他们展示 Hangouts api 是多么酷:(

尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T15:48:14.647

上周末谷歌方面出现了问题，现已得到纠正。

# google-plus - 环聊开发者沙盒不会加载应用程序

> ID：14817015
> 
> 赞同：0
> 
> 时间：2013-02-11T17:01:16.460
> 
> 标签：google-plus, hangout

2 月 8 日星期五的某个时候，我注意到我的所有环聊应用程序都不会加载到开发人员沙箱中。

我收到一个 javascript 错误：`Uncaught SyntaxError: Unexpected token <`当环聊尝试加载[https://login.corp.google.com/request?s=oz-autopush-full.plus.corp.google.com:443/uberproxy/OaxXYqZ2rrY/&d= https://oz-autopush-full.plus.corp.google.com/js/api.js&maxAge=1200&authLevel=2000000&rpMode=v2&keyIds=Do0](https://login.corp.google.com/request?s=oz-autopush-full.plus.corp.google.com:443/uberproxy/OaxXYqZ2rrY/&d=https://oz-autopush-full.plus.corp.google.com/js/api.js&maxAge=1200&authLevel=2000000&rpMode=v2&keyIds=Do0)。

我的应用程序在此之前工作，现在它们卡在加载屏幕：[环聊应用卡在加载屏幕 http://skitch.ubermajestix.com/Google%2B_Hangouts-20130211-085412.jpg](http://skitch.ubermajestix.com/Google%2B_Hangouts-20130211-085412.jpg)。

即使使用 SimpleHangoutApp ( [https://plushangoutstarter.appspot.com/static/simpleHangoutApp.xml](https://plushangoutstarter.appspot.com/static/simpleHangoutApp.xml) ) 也会发生这种情况。我在这里遗漏了什么还是上面的 url 试图拉入 api.js 不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T20:24:54.183

周末沙盒出现问题，现在应该已修复。请重试并确认。

# ruby-on-rails - 以不同用户身份运行 capistrano 任务

> ID：14817018
> 
> 赞同：2
> 
> 时间：2013-02-11T17:01:17.823
> 
> 标签：ruby-on-rails, ruby, capistrano

我是 capistrano 的新手，几天来一直在努力解决这个问题，所以非常感谢一些帮助。

我们有一个烦人的安全设置，这意味着我无法以 ssh 用户身份在远程服务器上运行 capistrano 任务。[这是这个问题](https://stackoverflow.com/questions/6578520/run-deployment-task-as-different-users)的一个更简单的版本- 它似乎没有一个有效的答案。

编辑：进一步深入研究，我发现我可以做类似的事情：

```
run "su - newuser" do |channel, stream, data|

          channel.send_data("#{password}\n")

          channel.send_data("rm -rf #{release_path}\n")

        end } 
```

我可以使用它来覆盖默认的部署方法，并完成大部分我需要做的事情。我可以在服务器等上创建所需的目录，并以 ssh 用户的身份使用 ssh 转发从 git 中提取。这产生了我的下一个问题。我现在拥有 newuser 拥有的目录，其中包含 ssh_user 拥有的文件和目录。我确实有作为 newuser 的 sudo 权限，但不知道如何对文件进行 chmod。我尝试过类似的东西：

```
run "su - newuser" do |channel, stream, data

              channel.send_data("#{password}\n")

              channel.send_data("sudo chmod 775 #{cache_path}\n")

            end } 
```

但一切都挂起，似乎该块是在无限循环中执行的。显然这里有很多我不明白的地方，一些指针将不胜感激——即使只是为了阅读相关内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T17:58:26.887

[https://github.com/capistrano/capistrano/wiki/2.x-DSL-Action-Invocation-Run](https://github.com/capistrano/capistrano/wiki/2.x-DSL-Action-Invocation-Run) 向您显示运行的 :shell 选项，您可以将其设置为：

```
run "your cmd", :shell => "su - other_user -s bash" 
```

如果你使用预定义的任务，你最好重新定义 run 和 su 来合并 shell 选项。这假设您的 ssh 用户无需密码即可 su。如果不使用块发送密码：

```
run "your cmd", :shell => "su - other_user -s bash" do |channel, stream, data|
  channel.send_data("#{other_user_password}\n")
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T13:23:23.813

我最终想出的解决方案是将所有现有的部署任务放在一个新的命名空间中。然后，我使用新方法调用它们运行的​​脚本，具体取决于我需要以 newuser 还是 root 身份运行它们，虽然这与 Viktor 的解决方案不完全相同，但我接受了他的回答，即使它不太有效为了我

```
 def run_as(user, password, command, env)
      run "#{command}\n", :shell => "su - #{user}", :env => env do |channel, stream, data|   
        channel.send_data("#{password}\n")
      end
end 
```

# php - 重定向直接图像 urls 请求并在重定向中传递原始 url 值

> ID：14817030
> 
> 赞同：3
> 
> 时间：2013-02-11T17:02:49.043
> 
> 标签：php, .htaccess, url, redirect, post

假设我有人（或 Google 图片）试图访问

`http://null.com/uploads/someimage.jpg`（实际上 /uploads 文件夹中的任何图像）

我希望 htaccess 将用户重定向到

```
http://null.com/page/ 
```

但是，我需要将原始 url ( `http://null.com/uploads/someimage.jpg`) 作为 POST 字符串值传递给重定向目标页面，目标 php 页面可以使用它来处理它

有可能用htaccess实现吗？

更新 - 而且，只有当用户代理是人工操作的浏览器，而不是像谷歌机器人这样的机器人时，让这个工作很有趣，这样谷歌和其他搜索引擎可以在没有重定向的情况下适当地抓取图像

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T18:31:10.507

你可以试试这个：

```
Options +FollowSymlinks
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_URI} !page\.php           [NC]
RewriteCond %{REQUEST_URI} ^/uploads/([^/]+)/?  [NC]
RewriteRule .  page.php?url=uploads/%1 [L] 
```

静默地图

`http://null.com/uploads/someimage.jpg`带或不带斜杠

到：

`http://null.com/page.php?url=uploads/someimage.jpg`

假定字符串`uploads`是固定的，而`someimage.jpg`可以是任何名称。

脚本名称`page.php`是一个示例，也可以是任何名称。替换规则集中的所有实例。

对于永久和可见的重定向，替换`[L]`为`[R=301,L]`

这个答案是根据 OP 评论中的描述：

> “...将用户重定向到此页面并将以前的原始网址作为帖子值传递...”

`page`脚本在哪里。

注意：在替换 URL 中传递的参数可以使用 PHP 使用`$_GET`or `$_REQUEST`， not来捕获`$_POST`。

### 更新

这是另一个版本：

```
Options +FollowSymlinks
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_URI} !page\.php        [NC]
RewriteRule ^(.*)\.jpg   page.php?url=$1.jpg [L] 
```

静默地图

`http://null.com/any/number/of/folders/someimage.jpg`

到：

`http://null.com/page.php?url=any/number/of/folders/someimage.jpg`

仅当传入 URL 包含`jpg`路径末尾带有扩展名的文件时，才会应用重写规则。

# javascript - 骨干网获取失败通知

> ID：14817033
> 
> 赞同：0
> 
> 时间：2013-02-11T17:03:03.063
> 
> 标签：javascript, html, backbone.js

我们的主干应用程序有问题。我们希望在获取失败（超时或一般错误）时向用户提供通知，但我们希望在前一页的内容上显示一个对话框，而不是在新页面中显示错误消息（Facebook/LinkedIn 等如何做它）

要触发对新内容的请求，我们必须先导航到新 URL。如果不进行返工，我们就无法真正改变这一点，因此我们希望尽可能避免这种情况。我们需要做的是在连接错误时将用户返回到之前的 URL，这会导致路由触发，重新请求之前的内容。然而，我们真的想避免这样做。

我们知道我们可以在不触发路由的情况下使用导航将用户返回，但这会弄乱浏览器历史记录，在这种情况下使后退变为前进。我们也可以强制浏览器返回，正确保持历史记录，但这会强制重新获取内容。

我们还研究了设置某种标志，告诉我们的路由器不要在下一次路由更改时重新请求数据，但是当使用浏览器返回到上一个获取失败的屏幕时，这会导致问题。在这种情况下，我们需要在他们的旅程中向用户发送“转发”。据我们所知，使用浏览器的历史管理器是不可能的。

有什么方法可以按照我们想要的方式进行对话，还是我们必须像 Facebook/LinkedIn 和 co. 一样采用相同的方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:55:49.007

你有你的代码/你尝试过的例子吗？

离开你所说的，如果在你的 URL 更改后获取模型数据时出错，你可以使用路由器静默地将用户重定向回以前的 URL，例如：

```
window.product_v = Backbone.View.extend({
    render: function() {
        this.model.fetch({
            processData: true,
            data: this.model.attributes,
            success : function(d){
            },
            error : function(d) {
                MyRouter.previous();
            }
        })
    }
}); 
```

然后在您的路由器中可以保留您的历史记录数组，以便在重定向时不会“触发”路由。或简单地做：

```
Backbone.history.navigate(route, {trigger: false, replace: true}); 
```

以下问题/答案完美地描述了这一点：

[使用 Backbone.js 将 url 静默更改为以前的](https://stackoverflow.com/questions/8416074/silently-change-url-to-previous-using-backbone-js)

```
class MyRouter extends Backbone.Router
    constructor: (options) ->
        @on "all", @storeRoute
        @history = []
        super options

    storeRoute: ->
        @history.push Backbone.history.fragment

    previous: ->
        if @history.length > 1
            @navigate @history[@history.length-2], true 
```

# python - 计算和绘制 (Y) 总数列表中每个 (X) 项目的平均值

> ID：14817034
> 
> 赞同：3
> 
> 时间：2013-02-11T17:03:10.490
> 
> 标签：python, numpy, python-2.7, matplotlib

在发布此之前，我已经搜索并搜索了（4 天）。如果它太初级，我提前道歉，浪费你的时间。我已经使用 pyplot 和 matplotlib 通过使用他们的教程示例成功地生成了一些基本图，但对我需要完成的工作无济于事。

本质上：

*   我有一个存在于单个文件中的数字列表。
*   每行包含一个数字，对应于完成某个重复任务所需的毫秒数。
*   该文件中有超过一百万个条目，并且可以增长到更多。

20 的示例：

```
173
1685
1152
253
1623
390
84
40
319
86
54
991
1012
721
3074
4227
4927
181
4856
1415 
```

最终，我需要做的是计算一个范围内的单个总数（均匀分布在绝对条目总数上）——然后使用 python 的任何绘图库绘制这些平均值。我考虑过使用 pyplot 以方便使用。

*   X 轴将对应于已完成任务的总数，因为 Y 轴将表示完成任务所需的毫秒数（在此示例中，平均每 5 次完成所需的时间）。

IE：

```
Entries 1-5 = (plottedTotalA)
Entries 6-10 = (plottedTotalB)
Entries 11-15 = (plottedTotalC)
Entries 16-20 = (plottedTotalD) 
```

据我所知，我不需要无限期地存储变量的值，只需在处理它们时（按顺序）将它们传递给绘图仪。我已经尝试了以下示例来汇总上述 20 个列表中的 5 个条目（有效），但我不知道如何在完成之前一次动态传递 5 个条目，同时保留计算出的平均值最终将传递给 pyplot。

前任：

```
Python 2.7.3 (default, Jul 24 2012, 10:05:38) 
[GCC 4.7.0 20120507 (Red Hat 4.7.0-5)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> plottedTotalA = ['173', '1685', '1152', '253', '1623']
>>> sum(float(t) for t in plottedTotalA)
4886.0 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T17:37:35.730

假设您在名为 x 的列表中有 n 个值。然后将 x 重塑为一个 5 列的数组 A 并计算每行的平均值。然后你可以简单地绘制结果向量。

```
x = np.array(x)
n = x.size
A = x[:(n // 5) * 5].reshape(5, -1)
y = A.mean(axis = 0)
plot(y) 
```

编辑：根据 tacaswell 的评论更改了我的代码

但是，如果您实际上有超过一百万个条目，您可能会遇到内存问题。您也可以使用名称 x 而不是 A 和 y。这样，您将覆盖初始数据并节省一些内存。

我希望这有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T18:14:26.110

我认为问题是如何从文件生成的列表中获取 5 个项目。如你所说：

> 我不知道如何一次动态地传递 5 个直到完成，

我已经使用`/dev/random`它，因为它永无止境且随机，并模拟您的大文件并显示处理大文件而无需读取列表或类似的数据。

```
################################################################################
def bigfile():
    """Never ending list of random numbers"""
    import struct
    with open('/dev/random') as f:
        while True:
            yield  struct.unpack("H",f.read(2))[0]
################################################################################
def avg(l):
    """Noddy version"""
    return sum(l)/len(l)
################################################################################

bigfile_i = bigfile()

import itertools
## Grouper recipe @ itertools
by_5  = itertools.imap(None, *[iter(bigfile_i)]*5)

# Only take 5, 10 times.
for x in range(10):
    l = by_5.next()
    a = avg(l)
    print l, a ## PLOT ? 
```

* * *

**编辑**

其余部分发生的情况的详细信息。

如果我们假设文件有 11 行，我们每次取 5 行：

```
In [591]: list(itertools.izip_longest(*[iter(range(11))]*5))
Out[591]: [(0, 1, 2, 3, 4), (5, 6, 7, 8, 9), (10, None, None, None, None)]

In [592]: list(itertools.imap(None, *[iter(range(11))]*5))
Out[592]: [(0, 1, 2, 3, 4), (5, 6, 7, 8, 9)]

In [593]: list(itertools.izip(*[iter(range(11))]*5))
Out[593]: [(0, 1, 2, 3, 4), (5, 6, 7, 8, 9)] 
```

在一种情况下，将用while`izip_longest`填充剩余部分并截断。我可以想象 OP 可能会希望将其用于可选的填充值，尽管对于.`None``imap``izip``itertools.izip_longest(*iterables[,fillvalue])``None``No Values`

我希望这能说明其余部分会发生什么。

# java - java中字符串的==运算符和.equals如何相同？

> ID：14817035
> 
> 赞同：1
> 
> 时间：2013-02-11T17:03:14.780
> 
> 标签：java, string, if-statement

我是这个网站的新手，没有意识到还有其他问题可以回答我的问题。我已经想通了，我会尽快删除这篇文章。谢谢你。

我刚开始再次学习 java，我有一个简单的问题。

通常，使用 == 来比较字符串是行不通的，你必须使用 .equals 来代替。

但是现在在编码时，我发现他们在不应该做同样的事情时也在做同样的事情，我正试图找出原因。

这是代码。

```
String s = "Hello";
   String x = "Hello";

   if (x == s){
       System.out.println("It is working!");
   }//end if
   else {
       System.out.println("It is not working");
   }//end else

   if (x.equals(s)){
       System.out.println("Match");
   }//end if
   else {
       System.out.println("No match");
   }//end else 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T17:05:38.777

基本上你会看到字符串实习的结果。从[JLS 的第 15.28 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.28)：

> 使用 String.intern 方法，String 类型的编译时常量表达式始终是“内部”的，以便共享唯一的实例。

所以你的两个变量值实际上是指相同的字符串。如果您使用：

```
String s = new String("Hello");
String x = new String("Hello"); 
```

...然后你会看到你期望的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T17:05:06.240

原因是您的 vars x 和 s 具有相同的引用，因此`==`行为与`.equals`.

当 Java 编译器优化您的字符串值（文字）时，它会确定 x 和 s 具有相同的值，因此您只需要一个 String 对象。结果，x 和 s 都指向同一个 String 对象，并且节省了一些内存。这是安全的操作，因为 String 在 Java 中是不可变的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T17:05:25.403

好吧，在这种特殊情况下，只有一个**字符串对象被创建**并缓存在**字符串常量池中**，并且两个引用变量都引用了存储在字符串常量池中的同一个**字符串对象。**因此你`==`测试**通过**

字符串 s = "你好"; 第 1 行字符串 x = "Hello"; 2号线

执行第 1 行时，会创建一个字符串对象 (Hello)，并将其缓存在 String Constant pool 中。

```
**String Constant Pool:** {s--->"Hello"} 
```

执行第 2 行时，首先检查字符串常量池中是否存在具有相同值的对象，如果存在。它只是将引用指向池中已创建的对象。

```
**String Constant Pool:** {s,x--->"Hello"} 
```

# html - 如何确保字体在所有浏览器/平台（Cufon？图像？sIFR）中看起来都相同以进行 PDF 渲染

> ID：14817036
> 
> 赞同：2
> 
> 时间：2013-02-11T17:03:17.540
> 
> 标签：html, pdf-generation, font-face, sifr, cufon

我花了很多时间研究 RTL 语言的@font-face 问题、不同浏览器上的字体渲染、PDF 支持等等。

我的目标是在 HTML 文档上添加与 CSS 兼容的阿拉伯语（一种 RTL 语言）文本，该文本在呈现为 PDF 时，在 PDF 上的*外观*、*呈现*和*包装*与在 HTML 网页上完全相同，无论用户的浏览器或平台。

我一直在使用@font-face，但事实证明，Windows 机器呈现的字体比它们在 Mac 上的要宽一些，而 PDF 生成器是独立于浏览器的，并且看起来更像是 Mac 呈现的字体。所以发生的情况是 Windows 用户看到一行文本，而 PDF 最终将该行的最后一个单词包裹到下一行，因此 PDF 并不是 Windows 用户所期望的。

我曾一度认为 Cufon 可能是解决方案，因为显然它看起来是相同的跨浏览器 - 但我认为它不支持阿拉伯语？我尝试使用 wkhtmltodpf 和 PhantomJS 生成 PDF，但尽管是很棒的“虚拟”浏览器，但它们都使用 Webkit QT，它呈现的文本与 Windows 不同，所以生成的 PDF 再次具有不同的换行或文本宽度作为原始 HTML 文档。基本上，我的问题是：

1.  确保用户在浏览器上看到的文本与他们在 PDF 上看到的**完全一致的最佳方法是什么？**我真的不需要它是完全像素完美的，只要文本至少遵循相同的换行符，并且包含给定的宽度`div`。我认为我真正需要确保的唯一一件事是*字体提示*是统一的。或者这一切都归结为使用图像？
2.  顺便说一句，HTML5 是否有某种跨浏览器字体渲染？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-27T16:48:10.783

我可以建议你两件事：

使用 em´s 作为字体大小。em 是一个相对量度。

不要使用 sIFR 或任何基于 flash 渲染的东西，因为它不能在不支持 flash 的移动设备上工作。

没有办法在所有现有的网络浏览器上呈现完全相同的东西，就像在天堂一样。但由于我们不在那里，我建议你也减少一点字体，直到它适合你的目标。

问候。

# jquery - 在 jquery 1.9.1 中创建变量失败，在 1.8.3 中没有

> ID：14817039
> 
> 赞同：2
> 
> 时间：2013-02-11T17:03:24.943
> 
> 标签：jquery, html, jquery-1.8, jquery-1.9

我刚刚升级到 1.9.1 经过一些技术缺陷后所有工作除了：

```
var $newthumbs = $('                <div id=\"car-7\" class=\"thumbnail_car thumbnail span2\" data-sorting-top=\"2\" data-sorting-date=\"2013-01-12 16:47:31 UTC\"></div>'); 
```

如果我将此行放在 jquery 1.8.3 的控制台中，它将被接受，我可以使用 $newthumbs 检索它

在 1.9.1 中它失败了`Error: Syntax error, unrecognized expression:`

我已经阅读了[更新日志](http://blog.jquery.com/2013/02/04/jquery-1-9-1-released/)，我没有看到任何相关的内容应该打破这一点。我可能不太了解 jquery，但这种语法看起来很标准。

发生了什么变化？

**更新**

我确实在[这里找到了这个](http://blog.jquery.com/2013/01/31/jquery-migrate-1-1-0-released/)

> 带有前导空格的 HTML 字符串：出于安全原因，jQuery 1.9 限制了由 $() 处理的字符串。尽管我们建议您使用 $.parseHTML() 来处理任意 HTML，例如模板，但 1.1.0 版本的 Migrate 插件恢复了旧的行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T17:10:22.420

如果删除空格，它将起作用：

```
var $newthumbs = $('<div id=\"car-7\" class=\"thumbnail_car thumbnail span2\" data-sorting-top=\"2\" data-sorting-date=\"2013-01-12 16:47:31 UTC\"></div>'); 
```

演示：http: [//jsfiddle.net/dirtyd77/KFmMQ/1/](http://jsfiddle.net/dirtyd77/KFmMQ/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T17:11:31.273

您的问题是字符串开头的空格。我不知道为什么这是一个问题，但它显然是。

顺便说一句：您可以删除无意义的反斜杠：

```
var $newthumbs = $('<div id="car-7" class="thumbnail_car thumbnail span2" data-sorting-top="2" data-sorting-date="2013-01-12 16:47:31 UTC"></div>'); 
```

或者您可以对周围的字符串使用双引号：

```
var $newthumbs = $("<div id=\"car-7\" class=\"thumbnail_car thumbnail span2\" data-sorting-top=\"2\" data-sorting-date=\"2013-01-12 16:47:31 UTC\"></div>"); 
```

# asp.net - 用于遗留应用程序的奇怪流畅的 nhibernate 映射

> ID：14817043
> 
> 赞同：0
> 
> 时间：2013-02-11T17:03:42.033
> 
> 标签：asp.net, .net, oracle, fluent-nhibernate

我们有一个遗留的 ASP.Net 项目，我们目前正在使用 MVP 模式对其进行重构。对于后端，我们使用 Fluent NHibernate 和 oracle 数据库。以前的开发人员直接在数据库中进行了奇怪的本地化实现。而且我们很难用流畅的 nhibernate 映射它。

我们有以下表格，它们位于不同的数据库中。（甲骨文模式）

```
db1.Activity
(
  ID,               (pk)
  ID_LANGUAGENAME,  (fk)
  INPUT_DATE,
  and so on...
) 

db2.LanguageName
(
  ID,               (pk)
  ID_LANGUAGE,      (pk)
  NAME
)

db2.Language
(
  ID,
  LANGUAGE,
  LANGUAGE_SHORT
) 
```

ID_LANGUAGE 存储在 ASP.Net 会话变量中。我想映射实体，以便可以执行类似此查询的操作。

```
SELECT LN.NAME, A.INPUT_DATE FROM db1.Activity A
INNER JOIN db2.LanguageName LN ON A.ID_LANGUAGENAME = LN.ID
INNER JOIN db2.Language L ON LN.ID_LANGUAGE = L.ID
WHERE A.ID = :ACTIVITYID AND L.ID = :LANGUAGEID_FROM_SESSION_VARIABLE 
```

所以基本上我不想像这样的 Activity 实体：

```
public class Activity
{
    public virtual int Id { get; set; }
    public virtual string Name { get; set; }
    public virtual DateTime InputDate { get; set; }
} 
```

Activity 的名称会自动映射到数据库中正确的 LanguageName.Name 字段。NHibernate 甚至可以做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T19:17:28.483

我不确定这是否是最好的方法

```
<filter-def name="LanguageFilter">
  <filter-param name="activeLanguage" type="System.UInt32"/>
</filter-def>

<class name="Activity">
  <id name="Id"/>

  <many-to-one name="NameHolder" column="ID_LANGUAGENAME"/>

  <property name="InputDate"/>
</class>

<class name="ActivityName" tble="LanguageName">
  <id name="Id"/>

  <property name="Name"/>
  <filter name="LanguageFilter" condition=":activeLanguage = ID_LANGUAGE"/>
</class>

public class Activity
{
    public virtual int Id { get; set; }

    protected virtual ActivityName NameHolder { get; set; }
    public virtual string Name
    {
        get { return NameHolder.Name; }
        set { NameHolder.Name = value; }
    }

    public virtual DateTime InputDate { get; set; }
} 
```

并查询

```
// at the beginning of the request
s.EnableFilter("LanguageFilter").SetParameter("activeLanguage", Session["Language"]);

var activity = session.QueryOver<Activity>()
    .Where(a => a.Id == activityId)
    .Single();

Console.Writeline(activity.Name); 
```

# linux - 用于搜索文本文件的一部分并打印它的通用命令（使用 awk 或 sed）

> ID：14817044
> 
> 赞同：1
> 
> 时间：2013-02-11T17:03:43.593
> 
> 标签：linux, bash, sed, awk

我应该使用哪个命令来打印部分文本文件，知道这部分的开始和结束位置？

例如：

```
columnA columnB columnC
baba     bobo    bibi
caca     coco    cici  
.         .      .
.         .      .
zaza    zeze     zizi
EndA    EndB    EndC 
```

在我的所有文件中，columnA(columnB ...) 和 EndA(EndB ...) 的文本完全相同，我想做的是打印它们之间的内容，即 baba(bobo ...)每个文件都不同。

我正在使用 grep | 切 | 尾，但是每次我有一个新文件时我都必须编写（并找到）新模式，因为每个模式的行数都不同。我想有一种更智能（和通用）的方法可以使用 awk 或 sed 来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:20:32.673

在 sed 解决方案旁边，awk 也可以使用：

```
BEGIN {
  output=0;
}

$1 ~ /columnA/ || $1 ~ /endA/ {
  output=!output;
  next;
}

{ if(start_output) print $0 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T17:13:23.787

如果您要打印除第一行和最后一行之外的所有内容，您可以这样做

```
sed '1d; $d' file.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T17:10:57.797

sed 有范围：

```
 sed -ne '/^columnA/,/^EndA/p' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T01:23:59.537

你可以使用头部和尾部

```
head -n-1 temp.txt | tail -n +2 
```

输出

```
baba     bobo    bibi
caca     coco    cici
.         .      .
.         .      .
zaza    zeze     zizi 
```

# javascript - 为什么复选框更改了两次？

> ID：14817045
> 
> 赞同：1
> 
> 时间：2013-02-11T17:03:53.267
> 
> 标签：javascript, jquery, html

我这样做：

```
 $("input[type='checkbox']").each(function() {
    var current = $(this);
    $("label[for='" + current.attr("id") + "']").on('click', function() {
      current.change();
      alert('1');
    });
  });

  $("input[type='checkbox']").on("change", function() {
    alert('2');
  }); 
```

现在，当我单击标签时，复选框第一个 alert(1) 显示一次，但第二个 (2) 显示两次。你能告诉我为什么吗？（复选框被隐藏，似乎更改以某种方式发生了两次）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T17:07:08.067

您不必为`<label>`标签添加单独的事件处理程序。它将触发`<input>`.

你最好使用“单击”而不是“更改”（尤其是使用最新的 jQuery）。旧的（也许是新的）IE 版本在焦点改变之前不会触发复选框的“更改”。

*编辑*最新的 jQuery 让生活更美好的原因是它修复了库中一个长期存在的奇怪“功能”。以前，以编程方式触发“单击”将导致调用任何“单击”处理程序，其中元素处于单击效果发生*之前的状态。*也就是说，如果你打电话

```
$(myCheckbox).trigger("click"); 
```

并且元素已被检查，它将在对处理程序的调用中进行检查。然而，当*真正的*点击发生时，浏览器会在调用处理程序*之前*翻转“checked”属性的状态。这让生活变得很奇怪，但从 1.9 开始，我很确定这是固定的。

# c++ - 将指针的内存地址存储为整数

> ID：14817046
> 
> 赞同：0
> 
> 时间：2013-02-11T17:03:57.797
> 
> 标签：c++, pointers, visual-c++, assembly, inline-assembly

好的，我正在尝试使用一些内联程序集编写 outportb 函数。但是，VS2010 中的（内联）汇编将不接受 char 变量作为操作数。我想要做的是创建一个指向 char 输入的指针，然后将输入字符的内存地址作为整数传递，然后将数据从该地址复制到目标地址。如果我创建一个 char 指针并传递输入 char 变量的地址，如何将数据的内存地址提取为一个短整数以将其作为 asm 操作数传递？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T19:15:57.797

由于 unsigned char 数据类型使用 ASCII 码，处理器无法将其与无符号 8 位整数区分开来。所以我想出的方法是创建一个 char 指针并将输入参数的内存地址传递给指针，然后将 char 指针移动到一个 16 位寄存器，然后可以将其直接 MOVd 到内存中。内联汇编代码实际上绕过了 Windows 内存管理；这就是它的美妙之处。;-)

# iphone - 如何检测 UITableView 的拖动结束事件？

> ID：14817047
> 
> 赞同：5
> 
> 时间：2013-02-11T17:03:58.883
> 
> 标签：iphone, ios, uitableview

`UITableView`当我的拖拽结束时，我需要得到通知。

但我正在处理 UITableView 的类别，所以我不能用它`scrollViewDidEndDragging:willDecelerate:`来存档。

我尝试使用 KVO 在`dragging`Key Path 上进行观察：

```
[self addObserver:self forKeyPath:@"dragging" options:NSKeyValueObservingOptionNew context:nil]; 
```

但是`observeValueForKeyPath:ofObject:change:context:`没有被调用，因为 UITableView.dragging 没有和 setter 并且这个属性不符合 KVO。

有没有其他方法可以存档这个期望使用`scrollViewDidEndDragging:willDecelerate:`？

任何帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-11T17:44:18.457

**编辑：**我首先想到的解决方案是下面的解决方案，结果证明它相当老套，如果 Apple 决定更改`UIScrollView`课程的内部结构，使用起来可能不安全。请参阅 Mazyod 建议的[答案](https://stackoverflow.com/a/24358388/892696)，这应该更安全、更直接。

* * *

这是依赖于实现的，Apple 可能会在未来的 iOS 更新中对其进行更改，但目前`UIScrollView`的类似乎依赖于手势识别器来管理用户交互，并且`UITableView`作为滚动视图类的子类也是如此。

如果你转到 UIKit 框架的 UIScrollView.h，你会注意到一个可疑的`_pan`ivar，它有一个`id`类型，但实际上似乎是一个`UIPanGestureRecognizer`.

所以我试过这个，它似乎工作。

```
 [_tableView addObserver: self 
              forKeyPath: @"pan.state" 
                 options: NSKeyValueObservingOptionNew 
                 context: nil]; 
```

拖动表格视图时，`state`手势识别器会发生多次更改，当您停止拖动时，`state`会收到其对 值的最后一次更改`UIGestureRecognizerStateEnded`。

请注意，尽管这似乎可以解决问题，但其他一些问题可能会妨碍您。覆盖类别中现有的类方法通常不是一个好主意，因为在此之后原始实现变得不可访问。关于[`NSKeyValueObserving`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSKeyValueObserving_Protocol/Reference/Reference.html)非正式协议的文件指出

> NSObject 提供了 NSKeyValueObserving 协议的实现，该协议为所有对象提供自动观察能力。

因此，如果您`observeValueForKeyPath:ofObject:change:context:`在某个类别中覆盖，默认实现将无法访问（我们无法确定`UITableView`或`UIScrollView`不使用 KVO）。这可能会导致一些意外错误。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-06-23T04:28:27.190

Egor Chiglitsev 的回答提醒我，我可以观察到`panGestureRecognizer`已经暴露的属性`UIScrollView`。它应该比`pan`. 但是后来..我发现我可以将自己添加为目标！

```
[_scrollView.panGestureRecognizer addTarget:self action:@selector(gestureRecognizerUpdate:)]; 
```

这对我很有用！

# c++ - 如何在 C++ 中创建一个随机的 160 位素数？

> ID：14817049
> 
> 赞同：0
> 
> 时间：2013-02-11T17:04:04.537
> 
> 标签：c++

我正在学校做一个项目，我需要创建一个 160 位的值。我有一段时间没有编程了，所以我不知道如何实现它。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T17:09:16.460

您需要一个用于大整数的库（假设您不能只使用现成的加密库）。

首先，您创建一个随机的 160 位值，不一定是素数。根据平台的不同，您可以使用`/dev/random`、`CryptGenRandom`或其他一些熵源（可能有几个，组合在一起）。

然后你在一个循环中增加这个值，对每个候选者应用例如[Miller-Rabin（伪）素性测试](http://en.wikipedia.org/wiki/Miller%E2%80%93Rabin_primality_test)，直到你找到一个素数。

# java - 我是慢了还是所有项目都比预期花费了这么长时间和更长的时间是正常的？

> ID：14817050
> 
> 赞同：0
> 
> 时间：2013-02-11T17:04:09.647
> 
> 标签：java, eclipse

我是新来的。我已经学习 java 几个月了，我正在做我的第一个项目，我自己。

让我困惑的是，我写了几行，运行它，有时它可以工作，很多时候它没有。然后我必须谷歌它，找到一个解决方案，合并它。然后我尝试编写更多代码，有时它可以工作，而且我经常不得不重复整个过程，或者在 stackoverflow 上询问。

现在可能是因为我是新手，通过练习我不需要经常查找东西，但是，随着我的技能越来越好，我所承担的项目也会变得越来越难，所以我猜我仍然需要继续查找。就像我学会了如何通过 TCP/IP 发送数据，然后我必须查找如何对其进行加密，然后如何使用强加密进行加密，然后将这些数据存储在 derby datase 中，每次我都必须不断查找。

**所以问题：**

第 1 部分：这个过程会结束吗？当然必须，否则软件项目如何完成。程序员不能一直在查找东西吗？我只需要大量的编码时间吗？第 2 部分：似乎总是比我预期的要花更长的时间。如果我使用 GUI 编辑器设计一个表单并认为我可以在两天内完成（例如），那么总是会出错并且需要 2-3 倍的时间。如果我这么糟糕，我连工作都保不住了，我会在三天内被解雇:(

非常感谢有经验的人的任何帮助。谢谢

德顿王子

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T17:13:18.877

随着您的经验越来越丰富，您将不得不越来越少地查找事情。但是，我可以告诉你，你永远不会完全停止查找。我已经使用 Java 大约 8 年了，并且一直使用 Google 来查找代码片段和问题的答案。这没有什么可耻的，这只是作为程序员的一部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T17:17:42.720

**第 1部分：**我为大约 25 个 jars 编写程序，并且仍然使用 google 或在书籍中搜索来寻找解决方案 [它通常比想出自己的新东西要快]。更多的实践和对库、数据结构和算法的更好了解可以减少网络上的搜索量。

**Part2：**低估实现所需的时间是软件开发中的一个常见问题。您需要大量练习并查看花费比预期更长的时间的原因。似乎软件开发人员倾向于忽略所有在实施过程中会耗费大量时间的小问题。

我的建议：把你的问题分成小事，分别估计需要的时间。如果可能的话，将这些问题与您过去解决的问题进行比较，并记住它们花费了多少时间。并在项目结束时审查哪些估计完全错误，并试图找出原因。这有助于未来的估计。

有很多书试图帮助你解决时间估计问题。阅读其中一些也可能会提供线索，其中的陷阱是什么。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T17:28:10.793

我认为这是关于技能获取概念的更普遍的问题（因此可能更适合“工作场所”网站）。

关于这个主题有两个很好的布尔，Robert Greene 的“Mastery”和 Malcolm Gladwell 的“Outliers”，关于这个主题和获得门徒所需的 10,000 小时。

一个简短的回答：这是正常的：你正在做的这些事情还没有“连接”到你的大脑，这需要时间和尝试。在完成这些任务一段时间后，您将能够更快地“记住”，或者下意识地执行它们。此外，您将能够建立关联，以便您的大脑能够识别更多模式（或差异）等。“进入”您脑海的每一件事都将用更少的努力完成，因此您将能够更深入地思考和同时取得更多成就。

# git - 为什么 GitHub 将国外的提交称为“Pull Request”？

> ID：14817051
> 
> 赞同：62
> 
> 时间：2013-02-11T17:04:09.367
> 
> 标签：git, github, terminology

我很好奇为什么 GitHub 调用提交来合并，“拉取请求”。

据我了解，`git pull`会将所有更改从远程存储库中提取到当前工作分支中。然后将这些更改与`FETCH_HEAD`. ( [Git 拉取](http://www.kernel.org/pub/software/scm/git/docs/git-pull.html))

所以看看`git push`......推送实际上会将提交的更改推送到存储库。这不就是你对 Git repo 所做的吗？提交“请求”以合并您的代码？那么为什么不将其称为“推送请求”呢？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-02-11T17:09:18.280

术语“拉取请求”来自于有多少开源项目自己组织起来的分布式特性。而不是仅仅将您的更改推送到存储库（就像您对集中存储库所做的那样，例如使用 Subversion），您正在单独发布您的更改并要求维护人员*拉入*您的更改。然后维护人员可以查看更改并执行拉取操作。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-11T17:08:57.557

拉取请求是指没有对存储库的推送访问权限的贡献者想要提交代码以包含在项目中。例如，如果您在 github 上有一个项目，并且您是唯一拥有提交权限的人，而我想在您的项目中包含代码，我该怎么办？

我将 fork 你的 github 存储库并为我的工作创建一个新分支。一旦我对当前的实现感到满意，我就会向`git pull`我的分支发送一个请求到你的存储库中（因为我无权直接推送）。当您这样做时，`git pull`您可以选择要拉到哪个分支以及要拉到哪里。也许您不想直接拉入您的`master`分支，而是拉入其他分支来检查代码。

[git book](http://git-scm.com/book/ch5-2.html)中有一个很好的部分介绍了这样的不同工作流程。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-11T17:08:37.340

当您将补丁发送给其他人时，您希望该人将您的更改*合并到他的存储库中。*现在，[拉](http://www.kernel.org/pub/software/scm/git/docs/git-pull.html)取是提取和合并。所以，如果那个人拉你的变化，他也会合并它，这就是你想要的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-11T17:08:49.113

当您提交拉取请求时，您要求仓库的所有者在他们的本地仓库中拉取您的更改（即合并它们）。然后该回购将（通过`git push`）发布到公共回购，但这是隐含的。

您不能将此称为“推送请求”，因为没有人推送您的更改，而是拉取它们。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-11T17:09:11.063

您将提交从您的私有存储库推送到您的公共存储库。但是，您不能强制更改其他人的存储库，因此您要求他们从您的公共存储库中拉取到他们的存储库。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-13T03:49:14.123

如果你不是它的维护者，你不会直接推送到 git repo。

所以，当你想把代码放进去时，你创建一个分支，把它放在某个地方，然后说：

> 嘿，这是我的分支，请**把**它拉进主分支！

代替：

> 嘿，这是我的分支，请让我**推**！

命名的关键是，你不是做最后动作的人。维护者执行最后一步。所以是维护者**拉**入你的分支，而不是你直接**推送**你的分支。

# c# - 转置数据表

> ID：14817061
> 
> 赞同：1
> 
> 时间：2013-02-11T17:05:01.043
> 
> 标签：c#, datatable, transpose

我有下面的数据表。我想更改数据表以将数据表转换为旁边的数据表。我怎样才能做到这一点？

我想这样做的原因是因为 excel 文件将数据带入如图所示，然后我想在第 1 行对这些数据进行排序

当前表

```
 || Col 1 || Col 2 || Col 3
____________________________________    
Row 1 || 10    ||  20   || 30
Row 2 || 1     ||  2    || 3 
```

新数据表

```
 || Row 1 || Row 2 
Col 1 ||  10   ||   1
Col 2 ||  20   ||   2
Col 3 ||  30   ||   3 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-11T17:15:43.347

.NET 不包含转置数据表的方法。你必须自己做。[这个](http://www.eggheadcafe.com/tutorials/aspnet/5c5d810e-20e6-4d6c-a0a3-5277ba8de7e7/transpose-a-datatable-in.aspx)网站有一个关于示例转置方法的教程。我将复制并粘贴下面的代码片段：

```
private DataTable Transpose(DataTable dt)
{
    DataTable dtNew = new DataTable();

    //adding columns    
    for(int i=0; i<=dt.Rows.Count; i++)
    {
       dtNew.Columns.Add(i.ToString());
    }

    //Changing Column Captions: 
    dtNew.Columns[0].ColumnName = " ";

     for(int i=0; i<dt.Rows.Count; i++) 
     {
      //For dateTime columns use like below
       dtNew.Columns[i+1].ColumnName = Convert.ToDateTime(dt.Rows[i].ItemArray[0].ToString()).ToString("MM/dd/yyyy");
      //Else just assign the ItermArry[0] to the columnName prooperty
     }

    //Adding Row Data
    for(int k=1; k<dt.Columns.Count; k++)
    {
        DataRow r = dtNew.NewRow();
        r[0] = dt.Columns[k].ToString(); 
        for(int j=1; j<=dt.Rows.Count; j++)
        r[j] = dt.Rows[j-1][k];  
        dtNew.Rows.Add(r);
    }

 return dtNew;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T17:14:41.680

```
DataTable newDt = new DataTable();
//Select indexes
var indexes = dt.Rows.Cast<DataRow>().Select(row => dt.Rows.IndexOf(row));
//Select the columns
var newCols = indexes.Select(i => "Row" + i);
//Add columns
foreach(var newCol in newCols)
{
  newDt.Add(newCol);
}
//Select rows
var newRows = dt.Rows.Cast<DataColumn>().Select(col =>
                                                  {
                                                    row = newDt.NewRow();
                                                    foreach(int i in indexes)
                                                    {
                                                      row[i] = dt.Rows[i][col.Name];
                                                    }
                                                    return row;
                                                  });
//Add row to new datatable
foreach(var row in newRows)
{
  newDt.Add(row);
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-11T17:13:19.283

创建一个新表，其维度与之前的维度相反，并将之前的列分配给新行，将旧行分配给新列。

例如：

```
oldCol1 -> newRow1
oldCol2 -> newRow2
oldCol3 -> newRow3
oldCol4 -> newRow4
oldRow1 -> newCol1
oldCol2 -> newCol2
oldvar[a][b] -> newvar[b][a] 
```

并且清单还在继续，假设您来自

```
col1 || col2 || col3 || col4
row1 ||[a][b]||[c][d]||[e][f]
row2 ||[g][h]||[i][j]||[k][l] 
```

至

```
row1 || col1 || col2
row2 ||[a][b]||[g][h]
row3 ||[c][d]||[i][j]
row4 ||[e][f]||[k][l] 
```

# mysql - 如何仅从多个表中合并一列？

> ID：14817066
> 
> 赞同：3
> 
> 时间：2013-02-11T17:05:06.697
> 
> 标签：mysql, sql, union

我发现很难提出这个问题，所以我将展示我正在尝试做的事情。

```
Table1 (ID, Name, Score)  
1 Jane  10  
2 Jack  15  
3 Jill  12  
4 Jane  10  

Table2 (ID, Name, Score)  
1 John  11  
2 Jill  14  
3 Jack  16  
4 Jake  15 
```

我想要的结果是

```
Result (Name, Table1.Score, Table2.Score)  
Jane 20   NULL
Jack 15   16
Jill 12   14
John NULL 11
Jake NULL 15 
```

名称可以成为主键吗？请注意，Jane 在表 1 中出现了两次（也可能出现在表 2 中），我想对分数求和并使名称在给定表中唯一。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T17:09:26.013

这是使用`UNION`and的一种方法`SUM`：

```
SELECT T.Name, Sum(T.Score), Sum(T2.Score) Score2
FROM (SELECT Name, SUM(Score) score FROM Table1 GROUP BY Name)  t
  LEFT JOIN (SELECT Name, SUM(Score) score FROM Table2  GROUP BY Name) t2
ON t.Name = t2.Name
GROUP BY T.Name
UNION   
SELECT T.Name, Sum(T2.Score), Sum(T.Score) Score2
FROM (SELECT Name, SUM(Score) score FROM Table2 GROUP BY Name)  t
  LEFT JOIN (SELECT Name, SUM(Score) score FROM Table1  GROUP BY Name) t2
ON t.Name = t2.Name
GROUP BY T.Name 
```

这是[SQL Fiddle](http://sqlfiddle.com/#!2/08c48/1)。

祝你好运。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T18:15:43.810

尝试这个

```
 select  t1.name , sum(t1.score) as score1 ,sum(t2.score2) as score2 from Table1 as t1
 left JOIN 
 (select  name , score as score2 from Table2 )t2 
 on t1.name = t2.name 
 group by name

 union all

 select  t2.name , sum(t1.score1) as score1, sum(t2.score) as score2  from Table2 as t2
 left JOIN 
 (select  name , score as score1 from Table1 )t1 
 on t2.name = t1.name 
 where score1 is  null

 group by name
 ---- if you want use the order add this "order by name" here in the end 
```

这将输出：

```
 NAME |    SCORE1  |SCORE2
  Jack |     15     | 16
  Jane |     20     |(null)
  Jill |     12     | 14
  Jake |    (null)  | 15
  John |    (null)  | 11 
```

[**这里 SQLFIDDLE 演示**](http://sqlfiddle.com/#!2/64eb3/102)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T17:09:29.090

好吧，如果 MySQL 有`full outer join`，你会使用它。这是另一种方法：

```
select id, name, MAX(score1) as score1, MAX(score2) as score2
from ((select  id, name, score as score1, NULL as score2
       from table1
      ) union all
      (select  id, name, null as score1, score as score2
       from table1
      )
     ) t
group by id, name 
```

这个想法是从每个表中获取所有需要的信息，分数在不同的列中，通过使用`union all`并将分数分成两个单独的列。

决赛`group by`将他们聚集在一起，每个 id 一行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T21:49:42.657

尝试这个：

```
select 
name = Table1.name, 
sum(Table1.score) as score1,
sum(Table2.Score) as score2
from Table1
full outer join
Table2 
ON 
Table2.name = Table1.name
where Table1.name is not null
group by table1.name

UNION

select 
name = Table2.name, 
sum(Table1.score) as score1,
sum(Table2.Score) as score2
from Table1
full outer join
Table2 
ON 
Table2.name = Table1.name
where Table2.name is not null
group by table2.name

order by score1 desc, score2 
```

# java - 如何将 JSlider 的值分配给变量的值

> ID：14817068
> 
> 赞同：1
> 
> 时间：2013-02-11T17:05:09.880
> 
> 标签：java, jslider

我在另一个类中有一个滑块，我想在每次滑块的值发生变化时将它所具有的值分配给变量的值。我有这个代码

```
public double setSliderValue() {
    double myVariable;
    sliders.mySlider.addChangeListener(new ChangeListener() {
        public void stateChanged(ChangeEvent event) {
             myVariable = Sliders.variableSlider.getValue();
            System.out.println(myVariable); //returns 0 each time
        }
    });
    return myVariable;
} 
```

我错过了什么/我需要添加什么以便将当前滑块上的值分配给 myVariable？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T17:43:44.993

这可能不是最好的方法，但您可以为包含 JSlider 的类提供对外部类的引用。

```
import java.lang.Object;
import java.lang.String;
import java.lang.System;
import javax.swing.*;
import javax.swing.event.*; 
```

包含 JSlider 的类，例如：

```
class Window extends JFrame {
    private JSlider slider;
    // a reference to the other class needs to be final
    private final Test testClass;
    public Window(Test incomingReference) {
        // set the reference
        this.testClass = incomingReference;
        // JSlider stuff
        slider = new JSlider(JSlider.HORIZONTAL, 0, 100, 1);
        slider.addChangeListener(new ChangeListener() {
            @Override public void stateChanged(ChangeEvent e) {
                JSlider src = (JSlider) e.getSource();
                if (src.getValueIsAdjusting()) return;
                testClass.setSomeVariable(src.getValue());
                System.out.println(testClass.getSomeVariable());
            }
        });
        // window stuff
        JFrame window = new JFrame("JSlider Test");
        window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        window.setSize(800, 600);
        window.add(slider);
        window.setVisible(true);
    }
} 
```

“外层”：

```
public class Test extends Object {
    public int someVariable = 0;
    public void setSomeVariable(int value) { someVariable = value; }
    public int getSomeVariable() { return someVariable; }
    public static void main(String ... args) {
        // give the window a reference to this object
        Test foo = new Test();
        Window window = new Window(foo);
    }
} 
```

还要注意`ChangeListener`:中的行，`if (!src.getValueIsAdjusting()) return;`它不在您的代码段中。这可以防止在`ChangeListener`滑块运动时设置值。

# java - Java中的文件目标无效？

> ID：14817069
> 
> 赞同：-1
> 
> 时间：2013-02-11T17:05:11.270
> 
> 标签：java

```
 Scanner user = new Scanner(System.in);
    String word;

    System.out.println("Location of file: ");
    word = user.nextLine();

    FileReader fileOpen = new FileReader(word);
    BufferedReader fileRead = new BufferedReader(fileOpen); 
```

如果用户输入了错误的文件目标，我该如何进行错误检查？

我得到：

```
 java.io.FileNotFoundException: 
```

当输入了无效的文件目标时。

我想让程序说类似

```
System.out.println("Invalid directory"); 
```

当我尝试时，我收到方法 isDirectory() 和 exists() 的错误，告诉我它们对于 String 类型不存在：

```
if (word.exists())
{
  //do blah blah
}
else 
{
  //Print error
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T17:08:26.430

将您的话包含在 File 中，然后进行检查：

```
if (new File(word).exists())
{
  //do blah blah
}
else 
{
  //Print error
} 
```

或者，您可以在抛出异常时捕获它：

```
Scanner user = new Scanner(System.in);
String word;

System.out.println("Location of file: ");
word = user.nextLine();

try {
    FileReader fileOpen = new FileReader(word);
    BufferedReader fileRead = new BufferedReader(fileOpen);
} catch (FileNotFoundException fnf) {
    // print an error
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T17:08:37.163

创建一个“word”的文件实例，然后检查它是否存在。对于异常，用 try 和 catch 包围它，在 catch 中：如果它不存在，则放置要运行的代码。

# objective-c - 如果加载 dylib，垃圾收集工作队列会崩溃

> ID：14817070
> 
> 赞同：12
> 
> 时间：2013-02-11T17:05:11.273
> 
> 标签：objective-c, macos, garbage-collection, pthreads, osx-mountain-lion

我们正在将应用程序从 10.6 移植到 10.8。我正在查看我们在应用程序中加载的 dylib。我在**垃圾收集工作队列**中面临非常不寻常的崩溃，并显示以下消息。

```
malloc: Thread::suspend():  unable to suspend a thread:  err = 268435459, Thread 0x111000000: _pthread = 0x108129000, _thread = 0x8b07, _stack_base = 0x108129000, enlivening  on, 0 local blocks 
```

为应用程序`GCC_ENABLE_OBJC_GC = required`设置。如果我有`GCC_ENABLE_OBJC_GC = required`dylib 它仍然会崩溃。我无法在应用程序中关闭垃圾收集器。我必须从我的 dylib 中管理它崩溃。

崩溃的原因是垃圾收集器无法挂起线程。（正如它在日志中所说）。该线程是使用[thread_create()](http://web.mit.edu/darwin/src/modules/xnu/osfmk/man/thread_create.html)创建的。如果我在 dylib 的构造函数中放置一个无限期的 while 循环（带睡眠），我不会崩溃。当构造函数完成执行时，我会崩溃。

他们是一种告诉垃圾收集器不要尝试挂起线程的方法吗？或者增加线程的引用计数？或者我可以做的任何事情来阻止垃圾收集器不干扰我的 dylib 代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-06-22T13:19:30.040

```
It is expected. 
Starting with OSX 10.8, Garbage collection is deprecated. So CG is unable to suspend the threads to perform its duty. As a result you get all the issues you are facing.

If you want to develop for 10.8, you need to convert to ARC (best) or move back to manual reference counting. If you wish to move to arc, see Transitioning to ARC Release Notes 
```

来自 Apple 关于 10.8 的文档：

重要提示：从 OS X v10.8 开始，垃圾收集已被弃用。请改用 ARC（自动引用计数）。要了解有关 ARC 的更多信息，请参阅过渡到 ARC 发行说明。

[https://books.google.co.in/books?id=8nzwsciij20C&pg=PT431&lpg=PT431&dq=Crash+of+Garbage+Collection+Work+in+objective+c&source=bl&ots=xTjLETFMsO&sig=b33rLeXJVh1WtnAvcVJykfNtvOU&hl=en&sa=X&ved=0ahUKEwiyqZrC2rvNAhVKNI8KHZRdC7AQ6AEIKDAC# v=onepage&q=崩溃%20of%20Garbage%20Collection%20Work%20in%20objective%20c&f=false](https://books.google.co.in/books?id=8nzwsciij20C&pg=PT431&lpg=PT431&dq=Crash+of+Garbage+Collection+Work+in+objective+c&source=bl&ots=xTjLETFMsO&sig=b33rLeXJVh1WtnAvcVJykfNtvOU&hl=en&sa=X&ved=0ahUKEwiyqZrC2rvNAhVKNI8KHZRdC7AQ6AEIKDAC#v=onepage&q=Crash%20of%20Garbage%20Collection%20Work%20in%20objective%20c&f=false)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-06T12:58:29.953

> 我们正在将应用程序从 10.6 移植到 10.8。崩溃的原因是垃圾收集器无法挂起线程。

**这是预期的。**
从 OSX 10.8 开始，垃圾收集已被弃用。因此 CG 无法暂停线程来执行其职责。结果，您会遇到所有面临的问题。

如果要为 10.8 开发，则需要转换为 ARC（最佳）或返回手动引用计数。如果您希望迁移到 arc，请参阅[Transitioning to ARC Release Notes](https://developer.apple.com/library/mac/releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html#//apple_ref/doc/uid/TP40011226)

来自 Apple 关于 10.8 的文档：

> **重要提示：从 OS X v10.8 开始，垃圾收集已弃用**。请改用 ARC（自动引用计数）。要了解有关 ARC 的更多信息，请参阅过渡到 ARC 发行说明。

*资料来源：[OS X v10.8 Mountain Lion 的新增功能](https://developer.apple.com/library/mac/#releasenotes/MacOSX/WhatsNewInOSX/Articles/MacOSX10_8.html)*：

**答案：**

*   *他们是一种告诉垃圾收集器不要尝试挂起线程的方法吗？*

不，这就是它的工作原理。

*   *或者增加线程的引用计数？或者我可以做的任何事情来阻止垃圾收集器不干扰我的 dylib 代码。*

不。由于 GC 在 10.8 下已被弃用，因此如果您希望支持 10.8，则必须将其删除。

GC 在 MAC 平台上一直是一个非常短暂的技术。并因各种原因被ARC取代。

# static-analysis - 为什么有些静态分析工具不报告潜在的缓冲区溢出？

> ID：14817075
> 
> 赞同：3
> 
> 时间：2013-02-11T17:05:28.407
> 
> 标签：static-analysis, pvs-studio

我有一个似乎存在缓冲区溢出风险的 strcpy 命令示例，但 PVS-Studio 不会发出警告。在我的示例中，strcpy 用于将命令行参数复制到缓冲区中，而不检查命令行参数的大小。如果参数超过缓冲区的大小，这可能会导致缓冲区溢出。

代码示例：

```
char carg1[13];
int main(int argc, char* argv[])
{
// Get name from the 1st command line arg
       strcpy(carg1, argv[1]);
…
} 
```

在处理 carg1 之前不检查 argv[1] 的大小。这不应该引起警告吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T17:10:59.387

理论上不可能构建一个完美的静态分析工具（这是从停止问题的不确定性等结果得出的）。因此，所有静态分析工具充其量只是可以尝试检测某些类别的错误的启发式方法，即使这样也不一定能检测到所有这些错误。

所以是的，你上面的代码看起来有潜在的缓冲区溢出。老实说，我不知道为什么这个特定工具无法检测到错误，但我的猜测是分析器出于某种原因使用的内部启发式方法无法检测到它。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-13T16:30:01.810

有3个事实：

1) 如果您使用 Visual C++ 编译器，那么您将收到编译器警告 4996。

1>robust.cpp(529): 警告 C4996: 'strcpy': 这个函数或变量可能不安全。考虑改用 strcpy_s。要禁用弃用，请使用 _CRT_SECURE_NO_WARNINGS。详细信息请参见在线帮助。1> C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\include\string.h(110) ：参见“strcpy”的声明

2) PVS-Studio 最初只与 Visual Studio 一起工作。

3) PVS-Studio 策略是执行不重复编译器警告的诊断规则。

因此，PVS 不检查 Microsoft 编译器已经检查了很长时间的情况（从 VS2005 开始）似乎是合乎逻辑的。

更新：最终 PVS 实施了这样的诊断规则： [https ://www.viva64.com/en/w/V755/print/](https://www.viva64.com/en/w/V755/print/)

# android - 检测拨出电话android的状态

> ID：14817076
> 
> 赞同：1
> 
> 时间：2013-02-11T17:05:30.387
> 
> 标签：android

我已经搜索了两天，但没有找到

是否可以通过编程方式检测拨出电话的状态（已接听、占线或掉线）？谢谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:35:17.620

```
*// Add receiver to manifest file

public class OutgoingCallReceiver extends BroadcastReceiver {
    private static long timeStarted = -1L; // IMPORTANT!

    private static String number;
    private static boolean noCallListenerYet = true;

    @Override
    public void onReceive(final Context context, Intent intent) {
        PhoneCallListener phoneListener = new PhoneCallListener(context);
        TelephonyManager telephonyManager = (TelephonyManager) context
                .getSystemService(Context.TELEPHONY_SERVICE);
        telephonyManager.listen(phoneListener,
                PhoneStateListener.LISTEN_CALL_STATE);
    }

    private class PhoneCallListener extends PhoneStateListener {
        Context context;
        private boolean isPhoneCalling = false;

        public PhoneCallListener(Context context2) {
            // TODO Auto-generated constructor stub
            context=context2;
        }

        @Override
        public void onCallStateChanged(int state, String incomingNumber) {
            if (state == TelephonyManager.CALL_STATE_OFFHOOK) {
            //do something here
            }

            if (state == TelephonyManager.CALL_STATE_IDLE && timeStarted != -1L) {}
        }
    }
} 
```

# ant - 如何在ant中运行dbunit任务？

> ID：14817083
> 
> 赞同：0
> 
> 时间：2013-02-11T17:05:52.123
> 
> 标签：ant, junit, dbunit

它在 ant 中不起作用，我想运行一些扩展 DatabaseTestCase 的类

```
<path id="libs.dir">
                <fileset dir="lib" includes="**/*.jar" />
</path>
<taskdef name="dbunit" 
         classname="org.dbunit.ant.DbUnitTask"/>

<!-- run all tests in the source tree -->
<junit printsummary="yes" haltonfailure="yes">
  <formatter type="xml"/>
  <batchtest fork="yes" todir="${reports.tests}">
    <fileset dir="${src.tests}">
      <include name="**/*Test*.java"/>
    </fileset>
  </batchtest>
</junit> 
```

它说：

```
Buildfile: D:\kariakin\jdbc_task\build.xml

BUILD FAILED
D:\kariakin\jdbc_task\build.xml:15: taskdef class org.dbunit.ant.DbUnitTask cannot be found
 using the classloader AntClassLoader[] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T22:32:10.170

我认为问题在于您的 taskdef，它缺少包含 dbunit jar 的路径：

```
<taskdef name="dbunit" classname="org.dbunit.ant.DbUnitTask" classpathref="libs.dir"/> 
```

# delphi - Delphi 2010，安装需要JCL的包

> ID：14817089
> 
> 赞同：0
> 
> 时间：2013-02-11T17:06:07.080
> 
> 标签：delphi, packages, jedi-code-library

好的。所以我安装了 Delphi 2010。

它编译/构建 JCL/packages/d14/jcl.dpk 就好了

然后我有另一个需要 JCL 的 pakcage（不是 Jedi）。（我得到它需要那个包的错误。）

我尝试将 jcl140.bpl 的路径添加到其项目选项中，但这没有帮助。

（我最好避免再次运行 JCL/JVCL 安装程序，因为我在多台计算机上运行相同版本的源代码。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T19:21:59.573

我决定用另一种方式解决这个问题。我决定运行 Jedi JCL 安装程序。（然后将源切换回旧的。）这创建了否则丢失的 jcl140.dcp 文件（我只有 jcl140.dpk、jcl140.bpl 等，但无法创建/找到 .dcp 文件）这似乎有效.

# c# - 包含“{”字符的 WriteLine 字符串在 C# 中引发 FormatException

> ID：14817094
> 
> 赞同：4
> 
> 时间：2013-02-11T17:06:34.980
> 
> 标签：c#, .net-2.0

这会引发 FormatException：

`Console.WriteLine("strict digraph {0}\n{", project.ProjectName);`

但这很好：

`Console.WriteLine("strict digraph {0}\n", project.ProjectName);`

我需要结尾的 '{' 并且`\{`不是有效的转义码。我的代码到底有什么问题，我该如何让它工作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-11T17:07:38.143

您需要用另一个大括号来转义大括号：

```
Console.WriteLine("strict digraph {0}\n{{", project.ProjectName); 
```

有关更多信息，请查看相关的 MSDN 文章[Composite Formatting](http://msdn.microsoft.com/en-us/library/txafckwd%28v=vs.80%29.aspx)及其“Escaping Braces”部分。

是说

> 左大括号和右大括号被解释为格式项的开始和结束。因此，您必须使用转义序列来显示文字左大括号或右大括号。在固定文本中指定两个左大括号（“{{”）以显示一个左大括号（“{”），或两个右大括号（“}}”）以显示一个右大括号（“}”）。格式项中的大括号按照遇到的顺序依次解释。不支持解释嵌套大括号。

但请注意。这可能会导致意外行为：以格式字符串`{{{0:D}}}`为例。例如，它*应该*输出“{10}”，不是吗？它应该，但它没有。上面的 MSDN 文章链接指出

> 1.  前两个左大括号（“{{”）被转义并产生一个左大括号。
> 2.  接下来的三个字符（“{0:”）被解释为格式项的开始。
> 3.  下一个字符（“D”）将被解释为 Decimal 标准数字格式说明符，但接下来的两个转义大括号（“}}”）产生一个大括号。因为结果字符串 ("D}") 不是标准的数字格式说明符，所以结果字符串被解释为自定义格式字符串，这意味着显示文字字符串 "D}"。
> 4.  最后一个大括号 ("}") 被解释为格式项的结尾。
> 5.  显示的最终结果是文字字符串“{D}”。不显示要格式化的数值。

为了规避 MSDN 建议使用以下代码：

```
var result = string.Format("{0}{1:D}{2}", "{", 10, "}"); 
```

# java - Java/Scala 的开放媒体框架库

> ID：14817097
> 
> 赞同：1
> 
> 时间：2013-02-11T17:06:56.747
> 
> 标签：java, scala, audio, video, multimedia

有人知道`omf`用 Java 或 Scala 处理文件的任何库吗？

此格式对应于[Open Media Framework 交换](http://en.wikipedia.org/wiki/Open_Media_Framework_Interchange)文件。

# aop - AOP - 注入具有动态计算值的属性

> ID：14817098
> 
> 赞同：1
> 
> 时间：2013-02-11T17:06:57.383
> 
> 标签：aop, postsharp

（或“一起使用 LocationInterceptionAspect 和 IInstanceScopedAspect”）

使用 Postsharp 我正在尝试使用“IntroduceMember”将属性注入目标类，然后使用 LocationInterceptionAspect 的“OnGetValue”功能动态地为其提供检查值。

最初我认为我需要两个独立的方面，一个用于字段注入，一个用于位置拦截，但通过实现 IInstanceScopedAspect 接口并从 LocationInterceptionAspect 继承来设法将两者结合起来。

问题是，如果我设置断点，我将看到已注入的属性，但如果我在 OnGetValue 方法中设置另一个断点（为类上的每个属性触发），我看不到它......

这是一些示例代码：

```
[Serializable]
class DALDecoratorWrapper : LocationInterceptionAspect, IInstanceScopedAspect
{
    public override void OnGetValue(LocationInterceptionArgs args)
    {
        if (args.LocationName == "Type")
        {
            args.Value = "computed value here";
        }

        args.ProceedGetValue();
    }

    [IntroduceMember(OverrideAction = MemberOverrideAction.OverrideOrFail)]
    public String Type { get; set; } 
```

我也希望有一种比重写 OnGetValue 更好的方法，因为每个 getter 都需要这样做，而实际上我只想针对已注入的属性的 getter

干杯

# c# - 使用 Windows 桌面应用程序处理一次性依赖项

> ID：14817102
> 
> 赞同：2
> 
> 时间：2013-02-11T17:07:08.283
> 
> 标签：c#, .net, wpf, winforms, desktop-application

我们都知道一次性物品用完就应该扔掉。问题是：如果我有一个一次性对象（例如数据库上下文）在 Windows 桌面应用程序（例如 WPF 或 WinForms）的整个生命周期中使用：我是否应该在应用程序关闭事件中处理该对象（为什么，何时，什么时候不）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T17:16:51.257

通常，您应该避免在应用程序的整个生命周期中使用一次性对象。许多对象，例如数据库上下文，*不*应该在那个范围内使用。

但是，如果您确实需要这样做，则取决于对象是否“正确”实现了 IDisposable 模式。如果一次性对象实现了终结器，那么即使您不调用它，它也会在应用程序结束时被释放`Dispose`。如果对象没有实现终结器，您将需要在应用程序关闭时处理它，除非它会泄漏的资源不是问题。例如，如果它会泄漏将在进程结束时关闭的内存，则无需释放它，如果它只是取消订阅事件，则无需运行等。如果您不确定在方法中*究竟*发布了什么，`Dispose`那么你应该是安全的，无论如何都要调用它。

# spring-mvc - 我可以在 WebSphere 6.1 中使用什么版本的 spring 框架？

> ID：14817106
> 
> 赞同：2
> 
> 时间：2013-02-11T17:07:13.483
> 
> 标签：spring-mvc, websphere

当前环境：WebSphere 6.1 与 IBM java jdk 1.5 与 Struts 1.3 和某些版本的 Tiles。

我想用 Spring MVC 替换 Structs 1.3。我可以使用的最高 Spring Framework 版本是多少？幸运的是，**不需要 JPA 2.0 兼容性，**因为当前系统对所有数据库访问使用 REST 调用，而不是使用 Hibernate。我们最终会将 WebSphere 迁移到 8.5，但不会很快。

同样，我可以在 Websphere 6.1（使用 IBM jdk 1.5）上使用哪个版本的 Spring 框架？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T19:39:32.413

您可以将 spring 与最新的[3.2 版本](http://static.springsource.org/spring/docs/3.2.1.RELEASE/spring-framework-reference/html/new-in-3.0.html#new-in-3.0-intro)一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T18:03:37.600

我们今天在 WebSphere 6.1 中使用 Spring 3.0，我很确定我们没有理由不能使用 3.1。

# spring - Hibernate 表外键插入：@OneToMany/@ManyToOne 关系

> ID：14817108
> 
> 赞同：0
> 
> 时间：2013-02-11T17:07:27.177
> 
> 标签：spring, hibernate, tomcat

我正在使用 hibernate 4 和 Maven ：

```
package tn.onp.mvno.model;

@Entity
@Table(name="PERSON")
public class Person {

 private int id;
 private String name;
 private String surname;
 private String email;
 private String adresse;
 private String MobilePhone;

 /**
  * Get User Id
  *
  * @return int - User Id
  */
 @Id
 @GeneratedValue
 @Column(name="ID")
 public int getId() {
  return id;
 }

 /**
  * Set User Id
  *
  * @param int - User Id
  */
 public void setId(int id) {
  this.id = id;
 }

}

package tn.onp.mvno.model;

 @Entity
 @Inheritance(strategy= InheritanceType.TABLE_PER_CLASS)
 @Table(name="USER")
 public class User extends Person{

 private String SIMCardNumber;
 private String SIMCardValidityDate;
 private Collection<Call> calls; 
 private Collection<Credit> credits; 

 @Column(name="SIMCARDNUMBER", unique = true, nullable = false)
 public String getSIMCardNumber() {
return SIMCardNumber;
 }

 public void setSIMCardNumber(String sIMCardNumber) {
SIMCardNumber = sIMCardNumber;
 }

@Column(name="SIMCARDVALIDITYDATE", nullable = false)

 public String getSIMCardValidityDate() {
return SIMCardValidityDate;
}

 public void setSIMCardValidityDate(String sIMCardValidityDate) {
SIMCardValidityDate = sIMCardValidityDate;
   }

 @OneToMany(fetch = FetchType.LAZY, mappedBy = "user")
 public Collection<Call> getCalls() {
return calls;
 }

 public void setCalls(Collection<Call> calls) {
this.calls = calls;
 }
  } 
```

调用.java

```
 @Entity
 @Table(name="CALL")
 public class Call {

private String callId;
private String telNumber;
private String term;
private String duration;
private String direction;
private User user;
/** Get the callId
 * @return the callId
 */
 @Id
 @GeneratedValue
     @Column(name="CALLID")
 public String getCallId() {
    return callId;
}
/** Set the callId
 * @param callId the callId to set
 */
public void setCallId(String callId) {
    this.callId = callId;
}
/** Get the telNumber
 * @return the telNumber
 */
@Column(name="TELNUMBER")
public String getTelNumber() {
    return telNumber;
}
/** Set the telNumber
 * @param telNumber the telNumber to set
 */
public void setTelNumber(String telNumber) {
    this.telNumber = telNumber;
}
/** Get the term
 * @return the term
 */
@Column(name="TERM")
 public String getTerm() {
    return term;
}
/** Set the term
 * @param term the term to set
 */
public void setTerm(String term) {
    this.term = term;
}
/** Get the duration
 * @return the duration
 */
@Column(name="DURATION")
public String getDuration() {
    return duration;
}
/** Set the duration
 * @param duration the duration to set
 */
public void setDuration(String duration) {
    this.duration = duration;
}
/** Get the direction
 * @return the direction
 */
@Column(name="DIRECTION")
public String getDirection() {
    return direction;
}
/** Set the direction
 * @param direction the direction to set
 */
public void setDirection(String direction) {
    this.direction = direction;
}
/** Get the user
 * @return the user
 */
@ManyToOne(fetch = FetchType.LAZY)
@JoinColumn(name = "id")
public User getUser() {
    return user;
}
/** Set the user
 * @param user the user to set
 */
public void setUser(User user) {
    this.user = user;
} 
```

}

当我在 tomcat 服务器上部署应用程序并运行它时，我收到此错误：

```
INFO: HHH000227: Running hbm2ddl schema export
Hibernate: alter table CALL drop foreign key FK1F725EE04824FE
févr. 11, 2013 5:53:38 PM org.hibernate.tool.hbm2ddl.SchemaExport perform
ERROR: HHH000389: Unsuccessful: alter table CALL drop foreign key FK1F725EE04824FE
févr. 11, 2013 5:53:38 PM org.hibernate.tool.hbm2ddl.SchemaExport perform
ERROR: You have an error in your SQL syntax; check the manual that corresponds to your
MySQL server version for the right syntax to use near 'CALL drop foreign key  
FK1F725EE04824FE' at line 1
Hibernate: drop table if exists CALL

févr. 11, 2013 5:53:38 PM org.hibernate.tool.hbm2ddl.SchemaExport perform
ERROR: HHH000389: Unsuccessful: drop table if exists CALL
févr. 11, 2013 5:53:38 PM org.hibernate.tool.hbm2ddl.SchemaExport perform
ERROR: You have an error in your SQL syntax; check the manual that corresponds to your
MySQL server version for the right syntax to use near 'CALL' at line 1
Hibernate: drop table if exists CREDIT
Hibernate: drop table if exists PERSON
Hibernate: create table CALL (CALLID varchar(255) not null auto_increment, DIRECTION 
varchar(255), DURATION varchar(255), TELNUMBER varchar(255), TERM varchar(255), id   
integer, primary key (CALLID))
févr. 11, 2013 5:53:38 PM org.hibernate.tool.hbm2ddl.SchemaExport perform
ERROR: HHH000389: Unsuccessful: create table CALL (CALLID varchar(255) not null   
auto_increment, DIRECTION varchar(255), DURATION varchar(255), TELNUMBER varchar(255),
TERM varchar(255), id integer, primary key (CALLID))
févr. 11, 2013 5:53:38 PM org.hibernate.tool.hbm2ddl.SchemaExport perform
ERROR: You have an error in your SQL syntax; check the manual that corresponds to your 
MySQL server version for the right syntax to use near 'CALL (CALLID varchar(255) not 
null auto_increment, DIRECTION varchar(255), DURAT' at line 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:10:22.027

`CALL`是一个[保留字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)。选择另一个表名。

# asp.net-mvc - 在 MVC4 中为 ViewModel 设置默认值的适当方法？

> ID：14817114
> 
> 赞同：6
> 
> 时间：2013-02-11T17:07:40.267
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我有一个包含以下内容的 viewModel：

```
public class CreateCardViewModel
    {
        [HiddenInput(DisplayValue = false)]
        public int SetId { get; set; }

        [Required]
        public IList<Side> Sides { get; set; }

        [Required]
        public int Stage { get; set; }

        [Required]
        [DataType(DataType.Date)]
        [HiddenInput(DisplayValue = false)]
        public DateTime DateCreated { get; set; }

        [Required]
        public bool IsReady { get; set; }

    } 
```

模型如下：

```
public class Card
    {

        public virtual int CardId { get; set; }

        // belongs to a Set
        public virtual int SetId { get; set; }
        public virtual Set Set { get; set; }

        // has Sides
        public virtual IList<Side> Sides { get; set; }

        // is in a certain Stage
        public virtual int Stage { get; set; }

        // is ready to study
        public virtual bool IsReady { get; set; }

        public virtual DateTime DateCreated { get; set; }

    } 
```

如何为 DateCreated 设置默认值？

如果我想在创建卡片时将空白面插入面，方法会改变吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-11T17:10:41.053

您可以在构造函数中设置默认值：

```
public CreateCardViewModel()
{
    DateCreated = DateTime.Now;
    Sides = new List<Side> { new Side() };
} 
```

`DateTime.Now`警告：从单元测试的角度来看，使用存在问题。如果您正在对您的 ViewModel 创建进行单元测试，并且需要能够验证创建的日期是否设置为已知值，您可以查看为时间创建一个单独的概念，如[Ayende 的博客](http://ayende.com/blog/3408/dealing-with-time-in-tests)中所述。您基本上创建了一个静态函数，`SystemTime`您可以在测试中将其设置为已知值。如果你不设置它，它默认为`DateTime.Now`：

```
public static class SystemTime
{
    public static Func<DateTime> Now = () => DateTime.Now;
} 
```

然后您的构造函数代码变为：

```
public CreateCardViewModel()
{
    DateCreated = SystemTime.Now();
    Sides = new List<Side> { new Side() };
} 
```

如果您需要将时间实际设置为已知值，请执行以下操作：

```
SystemTime.Now = () => new DateTime(2013, 2, 11, 17, 41, 12); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T17:55:15.477

我同意 SystemTime 方法。

虽然，我个人不喜欢在构造函数上设置 CreatedDate，因为自实例化对象并将其持久化到数据库时可能会有很短的时间间隔。（在这里我假设你肯定是）

你可以让你的所有域对象都继承自这样的接口：

```
public interface ITimeStamped
{
    DateTime DateCreated { get; set; }
} 
```

然后在 Context 类的 Commit 方法上，我会做这样的事情来为所有实现接口的实体设置日期：

```
foreach (var entry in ChangeTracker.Entries<ITimeStamped>()
                .Where(entry => entry.State == EntityState.Added))
            {
                entry.Entity.DateCreated = SystemTime.Now();
            } 
```

通过这种方式，您可以完全确定实体在数据库中持久保存时使用正确的 DateTime 进行存储。

# qt - Qt 调试：查看向量？

> ID：14817118
> 
> 赞同：1
> 
> 时间：2013-02-11T17:08:05.497
> 
> 标签：qt, debugging, vector, clang

从 Qt Creator 调试时，有没有人有任何查看向量的提示？我已经构建了调试器助手，但我只能看到开始和结束节点。（我想这可能也适用于其他 STL 容器。）

这确实会拖累调试时间；有人知道修复吗？谢谢。

# haskell - Haskell 反转对

> ID：14817119
> 
> 赞同：6
> 
> 时间：2013-02-11T17:08:10.697
> 
> 标签：haskell

想知道我是否可以在编写这个函数时得到一些帮助。我正在尝试创建一个反转列表中每个“对”的函数。

```
module Invert where
invert :: [(a,b)] -> [(b,a)]
invert [(a,b)] = [(b,a)] 
```

当我进入时`invert [(3,1) (4,1) (5,1)]`......它应该给我`[(1,3) (1,4) (1,5)`......但它给了我......

* * *

```
*Invert> [(3,1) (4,1) (5,1)]

<interactive>:2:2:
    The function `(3, 1)' is applied to two arguments,
    but its type `(t0, t1)' has none
    In the expression: (3, 1) (4, 1) (5, 1)
    In the expression: [(3, 1) (4, 1) (5, 1)]
    In an equation for `it': it = [(3, 1) (4, 1) (5, 1)] 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-11T17:18:38.073

由于列表是递归数据结构，因此您必须递归处理列表以交换其所有元素，或者使用一些为您进行处理的更高阶函数。如果你定义

```
invert [(a,b)] = [(b,a)] 
```

它只会转换单元素列表，所有其他输入都将失败并出现错误！

试着想想输入`invert`得到：它要么是一个空列表，要么是一个非空列表。在非空列表的情况下，您可以交换第一个元素并递归转换其余元素。

（如果您不想反转`invert`自己，只需使用

```
invert = map swap 
```

从哪里来[`swap`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Tuple.html#v%3aswap)。`Data.Tuple`）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-11T17:14:33.330

因此，您想在 type 的列表上映射一个函数`(a, b) -> (b, a)`。该函数`(,)`具有类型`b -> a -> (b,a)`。所以如果我们翻转它，我们得到`a -> b -> (b, a)`. 现在，如果我们取消*它*，我们得到`(a, b) -> (b, a)`：

```
 invert = map (uncurry $ flip (,)) 
```

例如

```
 > map (uncurry $ flip (,)) [(1, "a"), (2, "b")]
 [("a",1),("b",2)] 
```

顺便说一句，您的模式匹配与您想要的不匹配。定义

```
invert [(a,b)] = [(b,a)] 
```

说*“匹配一个包含单个元组的列表”*。如果您有一个包含多个元组的列表，则匹配将失败。此外，正如 Josh Lee 所指出的，您需要在列表中的元组之间使用逗号。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-11T19:21:59.733

解决此问题的最佳方法：将其拆分为较小的问题，然后找到解决这些问题的库函数，或者编写自己的。我总是告诉初学者，这是一个比尝试只写一个函数更好的练习`invert`，因为你应该学习以下三件事：

1.  如何将问题拆分为可重复使用的小块。
2.  该语言提供的标准库函数。
3.  如何使用递归来编写小的、可重用的函数，如标准库中的函数。

在这种情况下，我们可以将问题拆分为：

1.  反转单个元组。
2.  将函数应用于列表的所有元素，并收集结果列表。

第二个只是`map`列表上的常用函数，它是标准库自带的。您可以尝试编写自己的版本；对于初学者来说，这种事情总是一个很好的练习：

```
map :: (a -> b) -> [a] -> [b]
map f []     = ...
map f (x:xs) = ... 
```

正如 Petr 所指出的，第一个是`swap`函数 from `Data.Tuple`。但是我们可以很容易地编写我们自己的：

```
swap :: (a, b) -> (b, a)
swap (a, b) = (b, a) 
```

现在，当然：

```
invert :: [(a, b)] -> [(b, a)]
invert = map swap 
```

# sorting - 对 20GB 文件进行排序，每行一个字符串

> ID：14817120
> 
> 赞同：6
> 
> 时间：2013-02-11T17:08:11.593
> 
> 标签：sorting

在 Gayle Laakman 的书《破解技术面试》的问题 11.5 中，

“假设你有一个 20GB 的文件，每行一个字符串。解释你将如何对文件进行排序”

我最初的反应正是她提出的解决方案——通过读取 X mb 的数据，对其进行排序，然后将其写入磁盘，将文件分成更小的块（兆字节）。最后，合并文件。

我决定不采用这种方法，因为最终合并将涉及保留主内存中的所有数据——我们假设这是不可能的。如果是这样的话，这个解决方案究竟是如何成立的？

我的另一种方法是假设我们有几乎无限的磁盘空间，或者至少足以容纳我们已有数据的 2 倍。我们可以读入 X mb 的数据，然后为它们生成哈希键——每个键对应于文件中的一行。我们将继续这样做，直到所有值都被散列。然后我们只需将该文件的值写入原始文件即可。

让我知道你的想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-21T08:17:14.697

[http://en.wikipedia.org/wiki/External_sorting](http://en.wikipedia.org/wiki/External_sorting)更详细地解释了外部排序的工作原理。它通过解释如何通过读取已排序块的块而不是同时读取所有已排序块来执行 N 个已排序块的最终合并，从而解决了您最终必须将整个 20gB 放入内存的担忧。

# sql - SQL Server distinct 未正确使用

> ID：14817121
> 
> 赞同：0
> 
> 时间：2013-02-11T17:08:12.577
> 
> 标签：sql, sql-server

我正在尝试使用 SQL Server 仅选择一个帐户，但出现以下错误：

> *错误：文本数据类型无法选择为 DISTINCT，因为它不可比较。错误代码：421*

带有以下声明：

```
select DISTINCT ad.*,
       acc.companyname,
       acc.accountnumber
from address ad 
join AddressLink al on al.AddressID = ad.id
join account acc on acc.ID = al.ParentID 
where acc.accountnumber like '11227' 
```

我做错了什么？

## 编辑：

新查询：

```
select address.ID,
       address.StreetAddress1,
       address.StreetAddress2,
       address.City,
       Address.State,
       Address.PostalCode,
       Address.ClassTypeID,
       account.companyname,
       account.accountnumber,
       addresslink.ID as addressLinkID,
       addresslink.addresstypeid
from address 
join AddressLink on address.id = addresslink.AddressID 
join account  on  addresslink.ParentID = account.ID 
where account.CompanyName like 'company name' 
```

![返回的记录](../Images/77ea46b41355b1400ba6a6469691e6c8.png)

我必须模糊的所有公司名称都是相同的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T17:19:47.037

“不同”，在你的上下文中，你试图在所有列上做不同的。也就是说，有些数据类型是不可转换的，例如 TEXT。因此，如果您的表存在一些非“可区分”列类型，那就是导致查询崩溃的原因。

但是，要解决此问题，如果您执行类似的操作

```
CONVERT( char(60), YourTextColumn ) as YourTextColumn, 
```

它应该为您提供...至少它现在认为最终列类型是“字符”角色并且可以对其进行比较。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T17:18:24.250

尝试：

```
select ad.*,
       l.companyname,
       l.accountnumber
from address ad 
join (select DISTINCT al.AddressID,
                      acc.companyname,
                      acc.accountnumber
      from account acc 
      join AddressLink al on acc.ID = al.ParentID 
      where acc.accountnumber like '11227') l
on l.AddressID = ad.id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T19:32:53.540

Mark B 接受的答案在 AddressLink.AddressId、Account.CompanyName 和 Account.AccountNumber 上显示了一个子查询（限制 DISTINCT 的域的好主意）。

让我问一下：AddressLink 是否允许多个记录在 ParentId 和 AddressId 字段中具有相同的值？

如果不是，并且假设 Mark B 的答案有效，那么只需删除 DISTINCT，因为您永远不会在该子查询中得到任何重复项。

保留 DISTINCT 会导致性能下降，因为数据库必须创建一个使用 btree 或哈希索引的临时表，并且它必须将子查询返回的每个值插入到该表中以检查它是否使唯一性约束无效这三个领域。请注意，“优化器”不知道不会有任何欺骗......如果你告诉它检查 DISTINCT，它会检查它......使用 btree 索引这将导致 O(n log n) 处理返回的行数；使用散列会导致 O(n) 工作，但谁知道常数因子相对于您正在做的其他工作有多大（它可能比您正在做的所有其他工作都大，这意味着这可能会使运行速度减半就像没有 DISTINCT 一样）。

所以我的答案是 Mark B 在子查询中没有 DISTINCT 的答案。让我知道 AddressLink 是否允许重复（无法想象为什么会这样）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T17:20:34.897

您应该检查表中列的数据类型`address`。我的猜测是其中一个或多个具有文本、ntext 或图像数据类型。

使用 text、ntext 或 image 数据类型的限制之一是这些数据类型定义的列不能用作包含 DISTINCT 子句的 SELECT 语句的一部分。

值得一提的是，有关[ntext、text 和 image (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms187993.aspx)的 MSDN 文章建议避免使用这些数据类型并改用 nvarchar(max)、varchar(max) 和 varbinary(max)。您可能需要考虑更改该表的定义方式。

# javascript - 在 HTML5 Canvas 中创建表格

> ID：14817122
> 
> 赞同：3
> 
> 时间：2013-02-11T17:08:15.303
> 
> 标签：javascript, jquery, html, canvas, html-table

我有一个项目，我需要将 html 表格元素保存为图像。似乎最好的方法是将表格中的数据转换为画布，然后调用 toDataURL 来获取图像。在搜索了[这里](http://www.jquery4u.com/plugins/30-amazing-jquery-tables/)提到的许多表格之后，看起来他们都只是在常规 html 表格周围放置了一个包装器，以使其看起来更漂亮。

1.  有没有简单的方法或库（这不是花哨的）在画布元素中以表格格式绘制数据？
2.  我是否缺少另一种将表格元素的内容保存到图像的方法？

由于这是一个 Rails 项目，我希望 JS 库使用 JQuery。

编辑

我忘了提到表中的一些条目是链接。显然这在普通的 html 表格中效果很好，但它也需要在画布版本中工作。

编辑 2

显然我在第一次编辑中并不清楚。向用户显示的版本（无论是表格还是画布）都需要有链接。显然，最终的图像不会。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-11T17:25:17.400

这是一个示例（修改自：[https](https://developer.mozilla.org/en-US/docs/HTML/Canvas/Drawing_DOM_objects_into_a_canvas) ://developer.mozilla.org/en-US/docs/HTML/Canvas/Drawing_DOM_objects_into_a_canvas ）

[http://jsfiddle.net/StEcW/1/](http://jsfiddle.net/StEcW/1/)

```
$(function() {
    var canvas = document.getElementById("canvas");
    var ctx = canvas.getContext("2d");
    var data = "<svg xmlns='http://www.w3.org/2000/svg' width='200' height='200'>" +
        "<foreignObject width='100%' height='100%'>" + $("#mytable").html() +
        "</foreignObject>" +
        "</svg>";
    var DOMURL = self.URL || self.webkitURL || self;
    var img = new Image();
    var svg = new Blob([data], {
        type: "image/svg+xml;charset=utf-8"
    });
    var url = DOMURL.createObjectURL(svg);
    img.onload = function() {
        ctx.drawImage(img, 0, 0);
        DOMURL.revokeObjectURL(url);
    };
    img.src = url;
});

<div id="mytable">
    <div xmlns="http://www.w3.org/1999/xhtml" style='font-size:12px'>      
        <table border=1 id="amytable">
            <tr>
                <td>Hello</td>
                <td>There</td>
            </tr>        
        </table>
    </div>
</div> 
```

这工作得很好，但是请参阅小提琴以了解可能无法正常工作的 CSS 的一些奇怪之处。至少，在 Chrome 中，对我来说，表格边框的显示方式不同。

*编辑*：当然，通过画布实际上并没有多大意义。画布只是绘制我们已经创建的图像。您需要做的就是在 DOM 中显示图像。

# performance - 如何使 R 中的以下“应用”功能更有效？

> ID：14817123
> 
> 赞同：0
> 
> 时间：2013-02-11T17:08:15.107
> 
> 标签：performance, r, apply

我正在尝试将某些功能分组。下面的data.frame（分组）是我的“关键”（想想Excel vlookup）：

```
 Original  Grouped
1         Features Constant
2     PhoneService Constant
3    PhoneServices Constant
4       Surcharges Constant
5     CallingPlans Constant
6            Taxes Constant
7          LDUsage    Noise
8    RegionalUsage    Noise
9       LocalUsage    Noise
10       Late fees    Noise
11 SpecialServices    Noise
12         TFUsage    Noise
13       VoipUsage    Noise
14         CCUsage    Noise
15         Credits  Credits
16         OneTime  OneTime 
```

然后我引用我的数据库，它有一个列 (BillSection)，它采用来自 grouped$Original 的特定值，我想根据 grouped$Grouped 对其进行分组。我正在使用 sapply 函数来执行此操作。然后我将结果输出绑定到我的原始data.frame。

```
grouper<-as.character(sapply(as.character(bill.data$BillSection[1:100]), # for the first 100 records of the data.frame bill.data
       function(x)grouped[grouped$Original==x,2])) # take the second column, i.e. Grouped, for the corresponding "TRUE" value in Original
cbind(bill.data[1:100,],as.data.frame(grouper)) 
```

上面的代码按预期工作，但是当我将它应用到超过 10,000,000 条唯一记录的整个数据库时速度很慢。这种方法有替代方法吗？我知道我可以使用 plyr，但它甚至比 sapply 还要慢（我认为）。我试图用 data.table 解决这个问题，但没有运气。任何的意见都将会有帮助。我愿意用 Python 编写这个代码，我是新手，但听说比 R 快得多，因为我经常处理大型数据集。我想知道 R 是否可以足够快地做到这一点以便有用。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T17:15:31.083

我不确定我是否理解您的问题，但是您可以使用`merge()`吗？即类似...

```
merge(big.df, group.names.df, by.x='orginal.column.in.big.df',
      by.y='original', all.x=T) 
```

注意。Plyr 有一个并行选项...

# javascript - 第三个下拉值取决于 jquery 的前两个下拉列表

> ID：14817128
> 
> 赞同：0
> 
> 时间：2013-02-11T17:08:33.133
> 
> 标签：javascript, jquery, wordpress, drop-down-menu

我有以下代码根据另一个（日期）更改一个下拉列表（模板）的值：

```
<select name="date" id="date">
<option value="11">11</option>
<option value="12">12</option>
<option value="13">13</option>
<option value="14">14</option>
</select>

<select name="time" id="time">
<option value="AM">AM</option>
<option value="PM">PM</option>
</select>

<select name="template" id="template">
<option value="A">Template A</option>
<option value="B">Template B</option>
<option value="C">Template C</option>
</select>

    <script type="text/javascript">
    var templateA = ["11","12"]; //dates that use template A
var templateB = ["13","14"]; //dates that use template B
    jQuery('#date').change(function() {
      if (jQuery.inArray(jQuery(this).val(), templateA) != -1) {
        jQuery("#template").val("A");
      } else if (jQuery.inArray(jQuery(this).val(), templateB) != -1) {
        jQuery("#template").val("B");
      } 
    });
    </script> 
```

我正在尝试为“时间”添加第三个下拉列表，因此模板取决于日期和时间。例如，如果日期 = 12 且时间 = 下午，则模板 = b，但如果日期 = 12 且时间 = 上午，则模板 = a。

这里有很多关于两个下拉列表的帖子，但我找不到三个。

“模板”下拉菜单将被隐藏，并且所有三个都在 wordpress 联系表单中传递。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T17:21:30.117

看看[这个 jsFiddle](http://jsfiddle.net/PVryF/)。总而言之，您使用一种方法来决定在给定日期和时间值的情况下选择哪个模板。然后，您只需拥有两个更改侦听器并使用适当的日期和时间调用该方法以更改模板值。

```
var templateA = ["11", "12"]; //dates that use template A
var templateB = ["13", "14"]; //dates that use template B

function calculateTemplate(date, time) {
    if (jQuery.inArray(date, templateA) != -1 && time === 'AM') {
        jQuery('#template').val('A');
    } else if (jQuery.inArray(date, templateA) != -1 && time === 'PM') {
        jQuery('#template').val('B');
    } else if (jQuery.inArray(date, templateB) != -1 && time === 'AM') {
        jQuery('#template').val('B');
    } else if (jQuery.inArray(date, templateB) != -1 && time === 'PM') {
        jQuery('#template').val('C');
    }
}

jQuery('#date').change(function () {
    calculateTemplate(jQuery(this).val(), jQuery('#time').val());
});

jQuery('#time').change(function () {
    calculateTemplate(jQuery('#date').val(), jQuery(this).val());
}); 
```

显然，我只是以你的情况为例。

# iphone - JSON 编码为 NSISOLatin1StringEncoding 的 AFJSONRequestOperation 崩溃

> ID：14817136
> 
> 赞同：0
> 
> 时间：2013-02-11T17:08:49.320
> 
> 标签：iphone, ios, objective-c, json, afnetworking

我想在项目中更具体地使用 AFNetworking AFJSONRequestOperation 以允许轻松的异步调用。我很快尝试使用来自[AFNetworking GitHub Page的示例代码](https://github.com/AFNetworking/AFNetworking)

```
NSURL *url = [NSURL URLWithString:@"https://alpha-api.app.net/stream/0/posts/stream/global"];
NSURLRequest *request = [NSURLRequest requestWithURL:url];

AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request 
    success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
        NSLog(@"App.net Global Stream: %@", JSON);
    } 
    failure:nil];
[operation start]; 
```

效果很好，但是当我使用 MetOffice Datapoint 的 URL 时它崩溃了，我相信这可能是因为 JSON 提要的编码类型`NSISOLatin1StringEncoding`导致了问题`NSJSONSerialization`

我目前处理的方式是

```
NSString *string = [NSString stringWithContentsOfURL:kMetOfficeAllSites encoding:NSISOLatin1StringEncoding error:&error];
NSData *metOfficeData = [string dataUsingEncoding:NSUTF8StringEncoding];
id jsonObject = [NSJSONSerialization JSONObjectWithData:metOfficeData options:kNilOptions error:&error] 
```

但是如何使用 AFJSONRequestOperation 处理这种情况？

提前致谢

# plone - zc.buildout 2.0.0 版本以某种方式最终破坏了 Plone buildouts

> ID：14817138
> 
> 赞同：4
> 
> 时间：2013-02-11T17:08:54.270
> 
> 标签：plone, buildout

我正在尝试运行旧的 Plone 3.3 buildout.cfg。在 [versions] 中，我将 buildout 确定如下：

```
cat buildout.cfg|grep -i zc.buildout
zc.buildout = 1.4.3 
```

然而，由于某种原因，bootstrap.py 生成的 bin/buildout 最终使用了最新的 2.0.0 版本：

```
cat bin/buildout|grep -i zc.buildout
  '/srv/plone/x/eggs/zc.buildout-2.0.0-py2.4.egg', 
```

尝试运行 bin/buildout 时失败：

```
 An internal error occured due to a bug in either zc.buildout or in a
recipe being used:
Traceback (most recent call last):
  File "/tmp/tmpjc_Zhu/zc.buildout-2.0.0-py2.4.egg/zc/buildout/buildout.py", line 1808, in main
  File "/tmp/tmpjc_Zhu/zc.buildout-2.0.0-py2.4.egg/zc/buildout/buildout.py", line 455, in install
  File "/tmp/tmpjc_Zhu/zc.buildout-2.0.0-py2.4.egg/zc/buildout/buildout.py", line 888, in _maybe_upgrade
  File "/tmp/tmpjc_Zhu/zc.buildout-2.0.0-py2.4.egg/zc/buildout/easy_install.py", line 759, in install
  File "/tmp/tmpjc_Zhu/zc.buildout-2.0.0-py2.4.egg/zc/buildout/easy_install.py", line 578, in install
TypeError: get_dist() takes exactly 4 arguments (3 given)
*********************************************
Overwriting versions.cfg 
```

如何构建以将自身引导为 1.4.3（兼容版本）？

这仅涉及此 buildout.cfg 的新运行。在我使用 zc.buildout 1.4.3 的旧系统上，我已经无法重复这个问题了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T17:17:02.840

看起来你需要使用这个`bootstrap.py`：

```
 http://downloads.buildout.org/1/bootstrap.py 
```

这个**不好**：

```
 http://svn.zope.org/repos/main/zc.buildout/trunk/bootstrap/bootstrap.py 
```

更多细节在这里：

[https://github.com/miohtama/senorita.plonetool/commit/75f54c818801e9eeb10c38962e5ccc58f8b2f031](https://github.com/miohtama/senorita.plonetool/commit/75f54c818801e9eeb10c38962e5ccc58f8b2f031)

# windows - 如何摆脱 Batch/Powershell 中的安全警告

> ID：14817141
> 
> 赞同：2
> 
> 时间：2013-02-11T17:09:02.393
> 
> 标签：windows, security, powershell, batch-file, execution

![在此处输入图像描述](../Images/ff99e1e29b0b736a210e1429de36f4c9.png)我正在尝试通过批处理文件执行 powershell 脚本并不断收到以下警告；

-> 执行策略设置为远程签名；我也用 Unrestricted 进行了测试，出现了同样的错误；如何摆脱这个？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-11T17:16:47.253

您的 ps1 脚本是否位于网络共享中？`set-executionpolicy bypass`您可以通过在管理员 powershell 控制台中键入来跳过所有安全过程

或者你可以调用你的脚本`powershell.exe -executionpolicy bypass -file \\servername\share\script.ps1`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-11T17:22:44.030

如果出现相同的错误，请确保您在正确的位置设置了执行策略。在 64 位系统上，将有适用于 64 位和 32 位版本的 Powershell 的执行策略。通常，它为控制台加载 64 位版本，但如果从 bat 文件调用，则使用 32 位版本。您需要启动 32 位版本，运行 elevated，并为其设置执行策略。

# ios - iOS 解析器分配断点

> ID：14817152
> 
> 赞同：0
> 
> 时间：2013-02-11T17:09:41.687
> 
> 标签：ios, parsing, asynchronous, rss, breakpoints

```
.h
@class HtmlParser
@interface ClassName : NSObject <UITableViewDataSource>
{
NSString *img;
HtmlParser *htmlParser;
} 
```

:)

```
.M
- (NSString*)img
{
 if (img!=nil) return img; 
   if (_description!=nil)
   { 
//    NSString* description = [NSString stringWithString:_description];
htmlParser = [[HtmlParser alloc] loadHtmlByString:(NSString*) _description];
   }
return img;
} 
```

我正在尝试使用描述的内容初始化 HtmlParser。“描述”是异步加载的 RSS html，在 tableViewController 中启动。

我得到一个有或没有 NSString* 描述的断点。'-[HtmlParser loadHtmlbyString:]: unrecognized selector sent to instance 0x75aa9b0'... 这就是我所知道的所有调试方法。为所有异常启用断点。

- .m 中的方法在 viewController 的 cellForRowAtIndexPath 中调用：

```
 ClassName *object = _objects[indexPath.row];

NSString *i = object.img;
    UIImage* iG = [UIImage imageWithData:
                [NSData dataWithContentsOfURL:[NSURL URLWithString:i]]];
cell.imageView.image = iG; 
```

它很乱，所以让我知道是否需要进一步澄清。

```
.h
@interface HtmlParser: NSObject <NSXMLParserDelegate>
{
ET Cetera
}
    - (id) loadHtmlByString:(NSString *)string; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:33:04.883

当您调用相关方法时：

```
htmlParser = [[HtmlParser alloc] loadHtmlbyString:(NSString*) _description]; 
```

它不应该有 (NSString *) 在那里。它应该是：

```
htmlParser = [[HtmlParser alloc] loadHtmlbyString: _description]; 
```

但是， loadHtmlbyString 是一个 init 方法吗？如果是这样，那么您应该以 init 开头名称，并且您还应该通过将名称中的所有单词（包括 By）大写来遵守命名约定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T17:38:37.850

'loadHtmlbyString `method is not a method of the`HtmlParser `class, it is a method of your`ClassName` 类。

您不会在此行收到编译器警告：

```
htmlParser = [[HtmlParser alloc] loadHtmlbyString:(NSString*) _description]; 
```

查看 HtmlParser 类的 .h 并查看为该类定义了哪些方法。

# java - 变量未传递到另一个类 Java

> ID：14817153
> 
> 赞同：-3
> 
> 时间：2013-02-11T17:09:42.073
> 
> 标签：java

有一个奇怪的，我有一个变量，`t`我在一个类中使用它，它发生了变化，（例如 1 变为 5）然后我从另一个类调用它以在该类中使用，问题是当它通过时 t 始终为 0，我究竟做错了什么

这是编辑它的班级中的 t

```
public int t = 1; //defualt value for amount of seconds in the future the job should wait untill sent

    public int getT() {
        return (t);
    }

    public void setT(int t) {
        this.t = t;
    } 
```

这是我正在使用的类，它从上述类中调用 t 来使用：

```
public class DealyTillPrint {

    public int t;

    public String CompletefileName;
    private String printerindx;
    private static int s;
    private static int x;
    public static int SecondsTillRelase;

    public void countDown() {
        System.out.println("Countdown called");
        s = 1; // interval 
        t = (t * 60); // number of seconds
        System.out.println("t is : " + t);
        while (t > 0) {
            System.out.println("Printing in : " + t);
            try {
                Thread.sleep(s * 1000);
            } catch (Exception e) {
            }
            t--;
        } 
```

这是我`t`使用微调器设置的地方

```
<p:spinner min="1" max="1000" value="#{printerSettings.t}"  size ="1">
                    <p:ajax update="NewTime"/>
                </p:spinner> 
```

我如何在传递的值不为零的地方调用 t

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:14:50.480

在`DealyTillPrint`你声明`public int t;` 这与你在第一个代码示例中声明的`t`不同。`t`由于您没有给它任何值，因此分配了默认值 0。您`t`在第一个示例`t`中与第二个示例中没有任何分享。

更改`t = (t * 60); // number of seconds`为`t = (printerSettings.getT() * 60);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T17:23:45.643

您需要`printerSettings`从网页中获取对象到您的`DealyTillPrint`对象中。查看您提交的代码，我无法告诉您如何做到这一点。

# mysql - 将 MySQL 数据集转换为字符串

> ID：14817156
> 
> 赞同：0
> 
> 时间：2013-02-11T17:09:56.513
> 
> 标签：mysql, vb.net

我想检查用户是管理员还是用户，并且我想将数据集更改为字符串，以便可以在 Label1 中使用它。

我尝试过使用“GetXML”，但它的格式很有趣，比如“Administrator”，这有点不同。我希望能够将 label1.text 的值用于我程序中的其他功能。

这是我的代码：

```
 Dim SQLConnection As MySqlConnection = New MySqlConnection
    Dim ServerString As String = "server=localhost;user id=root;password=;database=business elements"
    SQLConnection.ConnectionString = ServerString
    SQLConnection.Open()

    Dim ds As New DataSet()
    Dim cmd As New MySqlCommand("SELECT Level FROM users WHERE username = '" & UsernameTextBox.Text & "'", SQLConnection)
    Dim da As New MySqlDataAdapter(cmd)
    da.Fill(ds)
    Dim str As String = ds.GetXml
    ds.GetXml()
    Label1.Text = str 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:25:38.487

尝试这个

```
Dim str As String = ds.Tables(0).Rows(0).Item(0).ToString() 
```

# mysql - 树枝和截断文本

> ID：14817159
> 
> 赞同：0
> 
> 时间：2013-02-11T17:10:03.307
> 
> 标签：mysql, twig

我在 MAMP 的 localhost 上创建了这个简单的 Twig 页面：

```
 <html>
  <head>
    <style type="text/css">
      table {
        border-collapse: collapse;
      }        
      tr.heading {      
        font-weight: bolder;
      }        
      td {
        border: 0.5px solid black;
        padding: 0 0.5em;
      }    
    </style>  
  </head>
  <body>
    <h2>Automobiles</h2>
    <table>
      <tr class="heading">
        <td>Vehicle</td>
        <td>Model</td>
        <td>Price</td>
      </tr> 
      {% for d in data %}
      <tr>
        <td>{{ d.manufacturer|escape }}</td>
        <td>{{ d.model|escape }}</td>
        <td>{{ d.modelinfo|raw }}</td>
      </tr> 
      {% endfor %}
    </table>
  </body>
</html> 
```

这是它背后的代码：

```
 <?php
// include and register Twig auto-loader
include 'Twig/Autoloader.php';
Twig_Autoloader::register();

// attempt a connection
try {
  $dbh = new PDO('mysql:dbname=world;host=localhost', 'root', 'mypass');
} catch (PDOException $e) {
  echo "Error: Could not connect. " . $e->getMessage();
}

// set error mode
$dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

// attempt some queries
try {
  // execute SELECT query
  // store each row as an object
  $sql = "SELECT manufacturer, model, price FROM automobiles";
  $sth = $dbh->query($sql);
  while ($row = $sth->fetchObject()) {
    $data[] = $row;
  }

  // close connection, clean up
  unset($dbh); 

  // define template directory location
  $loader = new Twig_Loader_Filesystem('templates');

  // initialize Twig environment
  $twig = new Twig_Environment($loader);

  // load template
  $template = $twig->loadTemplate('cars.html');

  // set template variables
  // render template
  echo $template->render(array (
    'data' => $data
  ));

} catch (Exception $e) {
  die ('ERROR: ' . $e->getMessage());
}
?> 
```

但是，我打算截断 modelinfo 字段中的文本，我相信这可以在 MySQL 中使用 select LEFT 函数完成，但是我应该如何修改查询？

感谢所有帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T20:06:26.960

您可以像这样截断 Twig 模板中的文本：

```
{{ d.modelinfo[:10] }} 
```

那应该返回`d.modelinfo`.

查看[切片过滤器](http://twig.sensiolabs.org/doc/filters/slice.html)文档页面。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-13T13:54:13.567

Twig 有一个截断过滤器，但您必须通过将以下内容添加到您的 config.yml 文件来启用文本扩展。

```
services:
 twig.extension.text:
     class: Twig_Extensions_Extension_Text
     tags:
         - { name: twig.extension } 
```

然后在您的模板中，您可以使用截断过滤器并向其传递一个表示截断长度的整数。

```
{{ d.modelinfo|truncate(50) }} 
```

# wix - 如果未安装 Wix 安装程序，请安装 .net

> ID：14817166
> 
> 赞同：2
> 
> 时间：2013-02-11T17:10:28.747
> 
> 标签：wix, windows-installer, prerequisites

我偶然发现了这个文档。[http://wix.sourceforge.net/manual-wix3/wixnetfxextension.htm](http://wix.sourceforge.net/manual-wix3/wixnetfxextension.htm)。

我不知道如何在未安装时安装例如 .net4full。

目前我的 wix xml 看起来像这样：

```
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi"
     xmlns:netfx="http://schemas.microsoft.com/wix/NetFxExtension">
    <Product Id="*"
      .....
      .........
    >
        <PropertyRef Id="NETFRAMEWORK40FULL"/>
        <Condition Message="This application requires .NET Framework 4 FULL. Please install the .NET Framework then run this installer again.">
        <![CDATA[Installed OR NETFRAMEWORK40FULL]]>
        </Condition>
        .....
        .........
        ............
        .........
        ............
    </Product>

    .......................
    ..............................
    ................................
    .........................
</Wix> 
```

顺便说一句，我使用的是 wix 3.7！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:04:21.593

在 Wix 安装项目中，您可以检查 .net framework 4.0 的存在并向用户发送一条消息，例如您必须在安装此产品之前安装 .net framework 4.0。但是如果你想默默地做（检查.net framework 4.0是否存在......如果有的话，只安装你的产品，如果没有，先安装.net framework 4.0然后安装你的产品）你必须通过wix bootstrapper

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-07T09:14:05.273

示例 Bootstarpper 代码如下

```
 <?xml version="1.0" encoding="utf-8"?>
   <Wix xmlns="http://schemas.microsoft.com/wix/2006/wi"
        xmlns:util="http://schemas.microsoft.com/wix/UtilExtension"
          xmlns:bal="http://schemas.microsoft.com/wix/BalExtension">

   <Bundle
     Name="My Application" Version="1.0.0.0"  UpgradeCode="8DA460D6-B4CB-4ED0-A1FE- 44F269070647" Manufacturer="ABC">
<BootstrapperApplicationRef Id="WixStandardBootstrapperApplication.RtfLicense">
  <bal:WixStandardBootstrapperApplication LicenseFile="Agreement.rtf"
           LogoFile="App.ico"/>
</BootstrapperApplicationRef>
<Chain> 
<PackageGroupRef Id="Netfx45Xxx"/>
     <MsiPackage SourceFile="D\MySetup.msi" Compressed="yes" EnableFeatureSelection="yes" Vital="yes">
     <MsiProperty Name='INSTALLFOLDER' Value='[InstallFolder]'/>      
  </MsiPackage> 
</Chain>
 <Variable Name='InstallFolder' Value='[ProgramFilesFolder]MyApp' /> 
```

```
 <Fragment>
<PackageGroup Id="Netfx45Xxx" >
  <ExePackage Id="Netfx45Xxx" Cache="no" Compressed="no" PerMachine="yes" Permanent="yes" Vital="yes" InstallCommand="/q"
      SourceFile="dotnetfx45_full_x86_x64.exe"
      DetectCondition="(Netfx4FullVersion=&quot;4.5.50709&quot;) AND (NOT VersionNT64 OR (Netfx4x64FullVersion=&quot;4.5.50709&quot;))"
      InstallCondition="(VersionNT >= v6.0 OR VersionNT64 >= v6.0) AND (NOT (Netfx4FullVersion=&quot;4.5.50709&quot; OR Netfx4x64FullVersion=&quot;4.5.50709&quot;))"/>
</PackageGroup> 
```

此代码附加了 .net 版本。如果机器中没有 .net 4.5，它将在安装应用程序设置之前安装框架

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-24T17:06:14.730

对我来说，使用 .NET 5 的解决方案是将 [ApplicationName].runtimeconfig.json 包含在应用程序文件夹中。

# javascript - innerHTML 后绑定 onclick 事件失败

> ID：14817170
> 
> 赞同：1
> 
> 时间：2013-02-11T17:10:43.070
> 
> 标签：javascript, onclick

```
var gid = function (id) {
  return document.getElementById(id);
},
info = gid('info');

function out(str) {
  if ((info.innerHTML + '').trim() === '') {
    info.innerHTML += '<a id="cleanResult" href="javascript:;">clean</a><br />';
    gid('cleanResult').onclick = function () {
      info.innerHTML = '';
      return false;
    };
  }
  info.innerHTML += str;
}
out('1234'); 
```

为什么`a#cleanResult`绑定onclick事件失败？
我更改代码，添加`setTimeout`：

```
 setTimeout(function () {
   gid('cleanResult').onclick = function () {
    info.innerHTML = '';
    return false;
   };
 },1); 
```

它有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:39:11.307

当您更改 时`innerHTML`，这会导致浏览器完全重建 DOM。因此，在这种情况下，您的最终`info.innerHTML += str;`结果会导致重建**包含**子对象的 DOM。因此，您对的引用`cleanResult`会丢失。

但是，通过`onclick`在 a 中添加您的绑定`setTimeout`，您将在 DOM 被重建并因此正确绑定后被调用。因此，如果您不关心方法中之前发生的事情，您应该只附加到 innerHTML。您可以按如下方式解决您的问题：

```
var gid = function (id) {
    return document.getElementById(id);
};   

function out(str) {
    var info = gid('info');        
    if (info.innerHTML.trim() === '') {
        info.innerHTML += '<a id="cleanResult" href="javascript:;">clean</a><br />';
        info.innerHTML += str;
        gid('cleanResult').onclick = function () {
            info.innerHTML = '';
            return false;
        };
    } else {
        info.innerHTML += str;
    }
}
out('1234'); 
```

我还不得不说，你需要非常小心全局变量声明，例如`info`. 始终确保`var`在变量声明之前添加以防止范围错误。

# javascript - 为什么jQuery show() 参数在调用`complete` 函数之前没有延迟？

> ID：14817173
> 
> 赞同：1
> 
> 时间：2013-02-11T17:10:58.730
> 
> 标签：javascript, jquery

[jQuery API 文档`show()`](http://api.jquery.com/show/)指出，从 jQuery 1.4.3 开始，可以这样调用`.show()`：

```
.show( [duration ] [, easing ] [, complete ] ) 
```

论据是：

> *   `duration`（默认值：400）：一个字符串或数字，确定动画将运行多长时间。
> *   `easing`（默认值：swing）：一个字符串，指示用于过渡的缓动函数。
> *   `complete`：动画完成后调用的函数。

我不需要缓动，所以我只调用这个版本：

```
.show( [duration ] [, complete ] ) 
```

我有一个函数应该显示一个 div，等待 5 秒，然后在 500 毫秒内淡出。

我试过这个：

```
 $('#some_div').show( {
      duration: 5000,
      complete: function() { fadeOutHelper(500); }
  } ); 
```

还有这个：

```
$('#some_div').show(5000, function() { fadeOutHelper(500); } ); 
```

在这两种情况下，`show()`实际上都不会在调用辅助函数之前等待 5000 毫秒。

我在 StackOverflow 上找到了一种解决方法`setTimeout()`：[jQuery show for 5 seconds then hide](https://stackoverflow.com/questions/3428766/jquery-show-for-5-seconds-the-hide)

```
$('#some_div').show();
setTimeout(function() { fadeOutHelper(500); }, 5000); 
```

虽然我有一个解决方法，但我想了解我是如何误解 jQuery`show()`文档中一些非常简单的函数参数的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T17:14:04.830

> 我有一个函数应该显示一个 div，等待 5 秒，然后在 500 毫秒内淡出。

你想在 5 秒内显示一个 div，还是立即显示一个 div 然后等待 5 秒回调？如果是前者，那么第二次尝试就可以了，只是你有一个额外的`}`东西需要删除。使用一些额外的空白，很明显：

```
$('#some_div').show(5000, function() {
    fadeOutHelper(500);
}}); // oh noes, synax error 
```

如果是后者，那么您引用的“解决方法”是实现您想要的*正确方法。***`setTimeout`不是黑客。**对此没有任何“解决方法”：

```
$('#flash_helper').show();
setTimeout(function() { fadeOutHelper(500); }, 5000); 
```

# com - COM 可执行文件；如何创建代理/存根 DLL

> ID：14817177
> 
> 赞同：2
> 
> 时间：2013-02-11T17:11:05.180
> 
> 标签：com, arm, atl, windows-embedded-compact

我正在 iMX28 Armv5 板上为 Windows Embedded Compact 7 开发 COM 对象。

我已经通过 Platform Builder 构建了 OSDesign 并生成了 SDK。在针对我的 SDK 创建 ATL 智能设备 COM 项目时，当我选择将其创建为可执行文件时，它不会创建通常在将其构建为 Win32 可执行文件时创建的代理/存根 DLL。

我已尝试手动将 xxxPS.DLL 项目复制/编辑到解决方案并添加 ic、i_p.c、.def 和 dlldata.c，如[在 VS 2008 中构建代理/存根 dll 中](https://stackoverflow.com/questions/1047656/building-proxy-stub-dll-in-vs-2008)所述，但均未成功。

有什么想法可以让我的 COM EXE 生成代理/存根 dll 吗？

# c# - 包装 C++ 对象以与 C# PInvoke 一起使用时执行析构函数

> ID：14817178
> 
> 赞同：4
> 
> 时间：2013-02-11T17:11:13.570
> 
> 标签：c#, c++, memory, pinvoke, marshalling

我有一个要在 C# 中使用的 C++ 类。为此，我正在尝试编写另一个 C++ dll 来用可调用函数（使用“extern C 和 __declspec(dllexport)”）包装这个类（它是另一个库的一部分）。我的想法是保留一个指向我的对象的指针并将其发送到包装 dll 中的函数，然后从那里调用该对象的方法。这看起来很好，但是当对象具有解构函数时会出现问题。

这是我的 C++ 包装器代码：（设备是我的 C++ 类/对象）

```
__declspec(dllexport) Status Device_open(Device* di, const char* uri)
{
     Device dl;
     Status status = dl.open(uri);
     di = &dl;
     return status;
}
__declspec(dllexport) void Device_Close(Device* di)
{
     di->close();
} 
```

这是我的 C# 包装器代码：

```
 [DllImport("Wrapper.dll")]
    static extern Status Device_open(ref IntPtr objectHandler, IntPtr uri);
    public static Device Open(string uri)
    {
        IntPtr handle = IntPtr.Zero;
        Device_open(ref handle, Marshal.StringToHGlobalAnsi(uri));
        return new Device(handle);
    }
    [DllImport("Wrapper.dll")]
    static extern void Device_Close(IntPtr objectHandler);
    public void Close()
    {
        Device_Close(this.Handle);
    } 
```

这是 C# 应用程序中的测试代码：

```
 Device d = Device.Open(di.URI);
    d.Close(); 
```

一切都是好的。问题就在这里，当我请求打开一个新设备时，主 C++ 对象的解构器将被执行，所以我的关闭请求总是返回异常（因为它已经关闭或被破坏）；

我能做些什么来防止这种情况发生？！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T17:15:28.590

正在被破坏，`Device`因为它超出了`Device_open()`函数末尾的范围。要解决此问题，请使用 动态分配`Device`实例`new`，这可以控制`dl`您的生命周期。然后`delete dl;`在`Device_Close()`函数中。

请注意，C++ 函数将地址分配给函数的`Device*`本地地址，调用者不会看到它。要解决此问题，在 C++ 端，您可以通过引用传递指针：

```
__declspec(dllexport) Status Device_open(Device*& di, const char* uri) 
```

或者你可以通过一个`Device**`.

```
__declspec(dllexport) Status Device_open(Device** di, const char* uri) 
```

但是，我不确定这将如何影响 c# 方面。

为了防止任何内存泄漏，如果调用失败，请确保`new`实例`Device`为d：`delete``dl.open(url)`

```
__declspec(dllexport) Status Device_open(Device*& di, const char* uri)
{
    Status status;
    try
    {
        Device* dl = new Device();
        status = dl->open(uri);
        if (status != OK)
        {
            delete dl;
        }
        else
        {
            di = dl;
        }
    }
    catch (std::bad_alloc const&)
    {
        status = BAD_ALLOC; // Or equivalent failure reason.
    }
    return status;
}

__declspec(dllexport) void Device_Close(Device* di)
{
     // di->close(); Uncomment if destructor does not close().
     delete di;
} 
```

# html - 在 Firefox 中嵌入 PDF

> ID：14817179
> 
> 赞同：1
> 
> 时间：2013-02-11T17:11:17.403
> 
> 标签：html, css

我正在尝试嵌入 PDF 并使其在 Firefox 中可滚动（放大/缩小能力的奖励积分，但现在我只对简单的功能解决方案感到满意）。

基本上我的代码如下：

```
<div class="row-fluid align-center">
<div class="span12">
    <iframe style="float:none;display:inline;height:90%;" src="{{url}}" frameborder="0"></iframe>
    <br>
    </div>
</div>

<div class="row-fluid">
    <div class="span11">
        <button onclick = "history.go(-1);" class="pull-right btn btn-primary" type="submit">Go Back</button>
    </div>
    <br><br>
</div> 
```

但是，我在 Firefox 上注意到它只是提示我下载 PDF 文件而不是嵌入它。同时，我的用户说它嵌入在他们的浏览器中，但它的尺寸非常小。

如何让它在 Firefox 中全屏嵌入？

在 Safari/Chrome 上，没问题。在 iPad 上，它只显示 PDF 的第一页，而不是全屏显示。

![在此处输入图像描述](../Images/c894fe675b16b5b16d6fa97befa1b9c7.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T18:51:57.253

解决方案是我以绝对像素而不是百分比添加高度参数。

```
<div class="row-fluid align-center">
    <iframe class = "span12" style="float:none;display:inline;height:1200px;" src="{{url}}" frameborder="0"></iframe>
    <br>
</div> 
```

# javascript - 如何在使用 javascript 创建对象时执行函数？

> ID：14817180
> 
> 赞同：2
> 
> 时间：2013-02-11T17:11:23.130
> 
> 标签：javascript, jquery

如何在使用 javascript 创建对象时执行函数

运行以下代码

```
 var y = [] ;
 var x = [[1,2,3] , [4,5,6] , [7,8,9]]
 for (var i = 0 ; i < 3 ; i++){
     y.push({name :'MyName' , value:function(){return x[i]} }) ; 
 }

 console.log(y) ; 
```

将生成以下对象

```
{name : 'MyName' , value : function (){return x[i]} 
```

**问题**

我怎样才能执行这个具有这个的对象函数：

```
{name : 'MyName' , value : function (){return [1,2,3]} 
```

我试过`eval()`没用

这是我的[jsFiddle](http://jsfiddle.net/minagabriel/2Jb9D/)

对于那些问`WHY`你这样做的人吗？我这样做是因为 object 将按值复制，所以我最终会让我全部`object.Value`等于 X[2] ；

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T17:21:39.320

它是一个奇怪的代码。我不确定您要达到的目标。但是您遇到的问题`i`是在整个循环中都在递增。因此，当您最终调用该函数时，其值为`i`3，因此超出了`x`数组的范围。你可以像这样修复它：

```
var y = [] ;
var x = [[1,2,3] , [4,5,6] , [7,8,9]]
for (var i = 0 ; i < 3 ; i++){
    y.push({
        name :'MyName',
        index: i,
        value:function(){return x[this.index]; } 
    }) ; 
}

console.log(y[0].value()); 
```

或者，如果您不明确需要执行函数：

```
var y = [] ;
var x = [[1,2,3] , [4,5,6] , [7,8,9]]
for (var i = 0 ; i < 3 ; i++){
    y.push({
        name :'MyName',
        value: x[i]
    }) ; 
}

console.log(y[0].value); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T18:06:31.733

要成功地将这些对象添加到数组中，您需要在 y.push() 语句上创建一个闭包。闭包将确保变量 x[i] 在调用时可用于 value() 函数。

The code below defines the 'addItem()' function which closes over the 'value()' function of the object creating a self contained environment. This means the 'value()' function will still have access to the variables defined or passed within the 'addItem()' function even after the 'addItem()' function has finished.

```
var i = 0
var y = [] ;
var x = [[1,2,3] , [4,5,6] , [7,8,9]];

function addItem(item) {
    y.push({
        name: 'MyName', 
        value: function () {
            return item;
        }
    });
}

for ( ; i < 3 ; i++) {
    addItem(x[i]);
}

console.log(y);
/*
[ { name: 'MyName', value: [Function] },
  { name: 'MyName', value: [Function] },
  { name: 'MyName', value: [Function] } ]
*/
console.log(y[0].value()); // [1, 2, 3]
console.log(y[1].value()); // [4, 5, 6]
console.log(y[2].value()); // [7, 8, 9] 
```

You can also achieve the same thing using an anonymous function within the loop but I choose not to do this as that would have created a new function each time you went around the for loop.

# python - Django Celery ConnectionError：错过了太多心跳

> ID：14817181
> 
> 赞同：11
> 
> 时间：2013-02-11T17:11:24.427
> 
> 标签：python, django, heroku, celery, django-celery

# 问题

我该如何解决`ConnectionError: Too many heartbeats missed`来自芹菜的问题？

## 示例错误

```
[2013-02-11 15:15:38,513: ERROR/MainProcess] Error in timer: ConnectionError('Too many heartbeats missed', None, None, None, '')
Traceback (most recent call last):
  File "/app/.heroku/python/lib/python2.7/site-packages/celery/utils/timer2.py", line 97, in apply_entry
    entry()
  File "/app/.heroku/python/lib/python2.7/site-packages/celery/utils/timer2.py", line 51, in __call__
    return self.fun(*self.args, **self.kwargs)
  File "/app/.heroku/python/lib/python2.7/site-packages/celery/utils/timer2.py", line 153, in _reschedules
    return fun(*args, **kwargs)
  File "/app/.heroku/python/lib/python2.7/site-packages/kombu/connection.py", line 265, in heartbeat_check
    return self.transport.heartbeat_check(self.connection, rate=rate)
  File "/app/.heroku/python/lib/python2.7/site-packages/kombu/transport/pyamqp.py", line 134, in heartbeat_check
    return connection.heartbeat_tick(rate=rate)
  File "/app/.heroku/python/lib/python2.7/site-packages/amqp/connection.py", line 837, in heartbeat_tick
    raise ConnectionError('Too many heartbeats missed')
ConnectionError: Too many heartbeats missed 
```

## 应用概览

*   使用 celery 进行定期后台任务的 Django 应用程序
*   托管在 Heroku 上
*   通过设置/celerybeat 计划每 15 分钟运行一次的单个任务
*   通过 CloudAMQP 插件处理消息
*   运行的进程
    *   `web: newrelic-admin run-program gunicorn --workers=2 --worker-class=gevent someapp.wsgi:application`
    *   `scheduler: newrelic-admin run-program python manage.py celery worker -B -E --maxtasksperchild=1000 --loglevel=WARNING`

## 包版本

正是我认为相关的：

```
Django==1.4.3
amqp==1.0.8
billiard==2.7.3.20
celery==3.0.14
gevent==0.13.8
greenlet==0.4.0
kombu==2.5.6
raven==3.1.10 
```

## 到目前为止我尝试过的

*   将错误与活动相关联（似乎与用户访问的应用程序、调用的后台任务、应用程序空闲无关）
*   谷歌搜索/搜索，直到我的手指麻木
*   将软件包升级到最新版本
*   各种级别的日志记录
*   使用 Sentry 捕获异常（不出现在哨兵中）
*   无法在开发环境下本地重现错误，仅在 Heroku 上的生产中

## 可能的相关信息

*   我不确定这个错误第一次出现的确切时间（〜一个月前？）
*   可能以某种方式与以下更改有关（在此之前不要回忆错误，虽然不是 100% 肯定）
    *   `celery==3.0.13`至`celery==3.0.14`
    *   `amqplib`->`amqp`
    *   `kombu==2.4.8`至`kombu==2.5.4`
*   错误仅出现在日志中（不会被 New Relic 或 getsentry.com 发现）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-12T11:50:18.770

它多久发生一次？

在您的情况下，心跳监控可能无法正常工作。心跳支持是最近才引入的，因此可能存在错误。我无法在此处重现此内容，因此我需要更多数据来了解发生了什么。

您可以通过设置禁用心跳`BROKER_HEARTBEAT=0`。如果这是一个错误，那么工作程序应该可以正常运行，但它无法快速检测到断开的连接。无法检测到连接丢失只是某些环境中的问题（通常由特定的路由器/防火墙配置引起）

# java - 在java中使用正则表达式仅验证特定的电子邮件

> ID：14817182
> 
> 赞同：2
> 
> 时间：2013-02-11T17:11:28.560
> 
> 标签：java, regex, validation, email

我正在尝试验证电子邮件地址。我目前有：

```
private static final String EMAIL_PATTERN = 
    "^[_A-Za-z0-9-\\+]+(\\.[_A-Za-z0-9-]+)*@"
    + "[A-Za-z0-9-]+(\\.[A-Za-z0-9]+)*(\\.[A-Za-z]{2,})$"; 
```

这将验证任何电子邮件，但我正在尝试仅验证公司特定的电子邮件，例如

myname@specificemail.com

电子邮件将始终以 .com 结尾，但我希望能够在以后使用不同的特定字符串更改公司名称，例如 @anotheremail.com、@somethingelse.com

任何人都可以帮助语法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T17:17:40.507

您可以使用此正则表达式验证公司特定的电子邮件：

```
private static final String coDomain = "specificemail.com";
private static final String EMAIL_PATTERN = 
    "^[_A-Za-z0-9-\\+]+(\\.[_A-Za-z0-9-]+)*@"
    + Pattern.quote(coDomain) + "$"; 
```

稍后只需根据需要将 coDomain 变量的值更改为其他名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T17:18:29.373

也许是这样的：

```
public static Pattern getEmailValidator( String domain ) {
    return Pattern.compile( "^[_A-Za-z0-9-\\+]+(\\.[_A-Za-z0-9-]+)*@" + domain );
}

public void someMethodThatNeedsToValidatEmail( String domain, String email ) {
    return getEmailValidator( domain ).matches( email );
} 
```

*请注意，这是未经测试的代码...*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T17:17:12.090

```
// be careful with regex meta characters in the company name.
public static String emailFromCompanyPatternString(String company) {
    return "^[_A-Za-z0-9-\\+]+(\\.[_A-Za-z0-9-]+)*@"
    + company + (\\.[A-Za-z]{2,})$";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-19T18:05:52.907

我正在使用它用于特定的结束域。只需将您的结束域替换为“@gmail.com”

```
private static final String EMAIL_REGEX1 = 
"^[a-zA-Z0-9_+&*-]+(?:\\.[a-zA-Z0-9_+&*-]+)*@gmail.com";

private static final String EMAIL_REGEX1 = 
"^[a-zA-Z0-9_+&*-]+(?:\\.[a-zA-Z0-9_+&*-]+)*@somethingelse.com"; 
```

访问[https://ideone.com/UUTnky](https://ideone.com/UUTnky)以获取完整的正则表达式电子邮件验证 Java 实施。

# assembly - 如何在汇编中使用负数作为一？

> ID：14817184
> 
> 赞同：3
> 
> 时间：2013-02-11T17:11:32.950
> 
> 标签：assembly, tasm

我在汇编中有一个算术程序，但是当我加、减、乘负数时，它不会产生所需的输出。

例如

输入：

```
-1+2=66675 (should be 1)

-1-1=656745 (should be -2)

-1*-1=66757 (should be 1) 
```

**问题：**

*   我如何将 (-) 和 (1) 视为一个？

*   如何对有符号数进行算术运算？

任何建议请...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:28:42.013

我建议阅读 2 的赞美以及有符号整数和无符号整数之间的区别。您显示的值看起来很可疑，就像一个有符号的 int 负值被转换为一个无符号的 int 值而不进行转换。负整数的最高有效位设置为 1。如果您将该值推入无符号整数而不首先屏蔽，那么您会得到比预期大得多的数字。

8位表示的示例：

```
signed value = -1 
unsigned value = 255 
binary = 1111 1111

Take the twos compliment: 
       1111 1111
XOR    0000 0000
equals 0000 0000
add1   0000 0001
dec value = 1 
```

您可以在此处了解更多信息（他们有一个可以查看的两个恭维添加示例）：[http ://academic.evergreen.edu/projects/biophysics/technotes/program/2s_comp.htm](http://academic.evergreen.edu/projects/biophysics/technotes/program/2s_comp.htm)

# cuda - cudaMemcpy() 与 cudaMemcpyFromSymbol()

> ID：14817186
> 
> 赞同：9
> 
> 时间：2013-02-11T17:11:39.977
> 
> 标签：cuda

我试图弄清楚为什么`cudaMemcpyFromSymbol()`存在。似乎'symbol' func 可以做的一切，nonSymbol cmds 可以做。

符号 func 似乎使移动数组或索引的一部分变得容易，但这也可以使用 nonSymbol 函数轻松完成。我怀疑 nonSymbol 方法会运行得更快，因为不需要符号查找。（不清楚符号查找计算是在编译时还是运行时完成的。）

为什么我要使用`cudaMemcpyFromSymbol()`vs `cudaMemcpy(`)？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-11T17:46:21.217

`cudaMemcpyFromSymbol`是从设备内存中任何*静态*定义的变量复制的规范方法。

`cudaMemcpy`不能直接用于复制到静态定义的设备变量或从静态定义的设备变量复制，因为它需要设备指针，并且在运行时托管代码不知道。因此，需要一个可以查询设备上下文符号表的 API 调用。两种选择是，`cudaMemcpyFromSymbol`在一个操作中进行符号查找和复制，或者`cudaGetSymbolAddress`返回可以传递给的地址`cudaMemcpy`。如果您只想做一个副本，前者可能更有效，如果您想在主机代码中多次使用该地址，则后者可能更有效。

# c# - 为什么我的文字不打印？

> ID：14817187
> 
> 赞同：0
> 
> 时间：2013-02-11T17:11:46.877
> 
> 标签：c#, compact-framework, windows-ce, zebra-printers, opennetcf

意识到我应该使用行打印模式（而不是标签模式）将 CPCL 发送到 Zebra QL 220 带式打印机，我正在重构我的工作代码（[为什么所有内容都打印在同一行，即使我正在添加 crlfs?](https://stackoverflow.com/questions/14782786/why-does-everything-print-on-the-same-line-even-though-im-adding-crlfs/14815759#comment20754366_14815759) ) 到这个：

```
serialPort.Write("! 0 200 200 210 1\r\n"); 

serialPort.Write(string.Format("! U1 setvar {0} {1}", "device.languages", "line_print"));
serialPort.Write("Hallo die Welt\r\n\r\n"); //Bonjour le Monde --- Hola el Mundo --- Hallo die Welt

serialPort.Write("BARCODE-TEXT 7 0 5\r\n"); 
serialPort.Write(string.Format("BARCODE 128 1 1 50 150 130 {0}\r\n\r\n", barcode));
serialPort.Write("POSTFEED 120\r\n"); // empirical observation shows 120 is about the right amount of extra tape to expel after printing
serialPort.Write("PRINT\r\n"); 
```

这会打印条形码及其下方的人类可读数字（“barcode”中的值），但不会打印文本“Hallo die Welt”。为什么不？我需要在每行之后调用 Print 还是...？？？

## 更新

它仍然使用以下代码仅打印条形码（不是“Hallo die Welt”）：

```
serialPort.Write("! 0 200 200 210 1\r\n");
serialPort.Write("! U1 SETLP 7 0 24\r\n"); 
serialPort.Write("Hallo die Welt\r\n\r\n"); 
serialPort.Write("BARCODE-TEXT 7 0 5\r\n"); 
serialPort.Write(string.Format("BARCODE 128 1 1 50 150 130 {0}\r\n\r\n", barcode));
serialPort.Write("POSTFEED 120\r\n");
serialPort.Write("PRINT\r\n"); 
```

## 更新 2

这有效（标签模式）：

```
serialPort.Write("! 0 200 200 210 1\r\n");
serialPort.Write("TEXT 4 0 30 40 Hallo die Welt\r\n\r\n"); //Bonjour le Monde --- Hola el Mundo --- Hallo die Welt
serialPort.Write("BARCODE-TEXT 7 0 5\r\n"); 
serialPort.Write(string.Format("BARCODE 128 1 1 50 150 130 {0}\r\n\r\n", barcode));
serialPort.Write("POSTFEED 120\r\n"); 
serialPort.Write("PRINT\r\n"); 
```

它打印：

```
~~~~~~~~~~~~~~~~~~~~~~~
Hallo die Welt

<barcode as a barcode>
<barcode as a number>
~~~~~~~~~~~~~~~~~~~~~~~ 
```

...但这不起作用（行打印模式）：

```
serialPort.Write(string.Format("! U1 setvar {0} {1}", "device.languages", "line_print"));
serialPort.Write("! U1 SETLP 7 0 24\r\n");
serialPort.Write("Hallo die Welt\r\n\r\n");
serialPort.Write("! U1 BARCODE-TEXT 7 0 5\r\n");
serialPort.Write(string.Format("! U1 BARCODE 128 1 1 50 150 130 {0}\r\n\r\n", barcode));
serialPort.Write("! U1 SETLP 5 2 46"); 
serialPort.Write(barcode);
serialPort.Write("! U1 PRINT\r\n"); 
```

问题是，我需要使用行打印模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T18:13:54.960

在每个 SGD 命令之后还需要一个 \r\n （在这种情况下是你的 setvar ）

它应该是

> ！U1 setvar "device.languages" "line_print"\r\n

您还需要在 SETVAR 命令的 2 个参数周围加上双引号。

更新：

哦，顺便说一句，仅仅因为打印机处于 line_print 模式，并不意味着它不理解 CPCL 代码。因此，您示例中的上述代码是 CPCL 代码，而不仅仅是行打印。如果你把 TEXT 放在前面，它应该可以工作

# c# - 流畅的 NHibernate 和 NHibernate.Linq Mono

> ID：14817190
> 
> 赞同：0
> 
> 时间：2013-02-11T17:11:47.580
> 
> 标签：c#, asp.net-mvc-3, mono, fluent-nhibernate, monodevelop

我目前正在使用 Monodevelop、MVC3 和 FluentNhibernate 将项目迁移到 linux。我的问题是使用方法语法的 linq to Nhibernate：

```
var payment = session.Query<PaymentInfo>().Where(c => c.AccountId == newPayment.AccountId).FirstOrDefault(); 
```

Mono develop 似乎无法识别“c”的属性。这是正常行为吗？我对查询语法有同样的问题：

```
var payment = (from c in session.Query<PaymentInfo>()
             where c.AccountId == newPayment.AccountId
             select c).FirstOrDefault(); 
```

有什么我做错了吗？我有 Nhibernate.dll 和 System.Data* 库，但它似乎不想工作。我应该使用标准的吗？

**编辑：**实际上看起来映射没有被拾取。不支持 FluentNhibernate 吗？我不确定问题是 Mono 还是 Monodevelop 本身的问题，因为我希望能够在 Linux 中进行测试。任何指导将不胜感激。

# javascript - docment.body.innerHTML 不适用于 iframe

> ID：14817192
> 
> 赞同：1
> 
> 时间：2013-02-11T17:12:16.237
> 
> 标签：javascript, html, iframe

我有一个带有源代码的 html 文件

```
<html>
<head><Title>Hello!!</Title>
<script>

window.onload=function(){var bodyElement = document.body;
console.log(document.body.innerHTML);
document.body.innerHTML ='<iframe srcdoc='+document.body.innerHTML+'></iframe>' ;

}
</script>

</head>
<body><h1>Hello World
</h1></body>

<html> 
```

在控制台中显示

```
<h1>Hello World
</h1> 
```

但在浏览器中它只显示一个矩形框，里面什么都没有（期待

# 你好世界

在其中）为什么我得到一个空框以及如何将 document.body 放入 iframe 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:19:27.537

我想你只是错过了引号：

```
document.body.innerHTML ='<iframe srcdoc="'+document.body.innerHTML+'"></iframe>' ; 
```

# wcf - WCF 测试客户端和身份验证

> ID：14817195
> 
> 赞同：2
> 
> 时间：2013-02-11T17:12:26.547
> 
> 标签：wcf, windows-authentication, soapui, wcftestclient

我正在尝试使用 WCF 测试客户端调用 Web 服务，但该 Web 服务需要身份验证。

如何登录并通过 WCF 测试客户端调用它（我试图从浏览器中获取它然后调用但不起作用）。我可以使用 SOAP UI，但如果可能的话，我想用 WCF 测试客户端来做。也许改变 WCF 配置？

> 错误：无法从中获取元数据 如果这是您有权访问的 Windows (R) Communication Foundation 服务，请检查您是否已在指定地址启用元数据发布。有关启用元数据发布的帮助，请参阅位于 [http://go.microsoft.com/fwlink/?LinkId=65455.WS-Metadata](http://go.microsoft.com/fwlink/?LinkId=65455.WS-Metadata) Exchange 错误 URI 的 MSDN 文档：元数据包含无法解析的引用：“”。HTTP 请求未经客户端身份验证方案“匿名”授权。从服务器接收到的身份验证标头是“Basic realm=""'。远程服务器返回错误：(401) Unauthorized.HTTP GET Error URI:
> There was an error download ''。请求失败，HTTP 状态为 401：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:46:49.500

您的配置中是否指定了**[mex 端点](http://wcftutorial.net/Metadata-Exchange-Endpoint.aspx)**？

如果您遇到设置问题，我建议您通读**[Codeplex 应用程序场景](http://wcfsecurity.codeplex.com/wikipage?title=Application%20Scenarios&referringTitle=Home)**，以确保您已正确设置服务和 WCF 测试客户端。

如果您需要任何进一步的帮助，请发布配置和一些示例代码。

**编辑：**

这些链接可能会提供对该问题的一些见解：

[WCF - 无法获取元数据，但在删除 XML 端点时工作？](https://stackoverflow.com/questions/11627392/wcf-cannot-obtain-metadata-but-works-when-the-xml-endpoint-is-removed)

[使用 Microsoft WCF 测试客户端时无法从 WCF 服务获取元数据。](http://www.danderson.me/wcf/cannot-obtain-metadata-from-wcf-service-when-using-microsoft-wcf-test-client/)

# javascript - 我完全理解这个 javascript 滚动教程吗？

> ID：14817196
> 
> 赞同：0
> 
> 时间：2013-02-11T17:12:26.547
> 
> 标签：javascript, html, scroll

我在这里学习教程： [http ://tympanus.net/codrops/2010/06/02/smooth-vertical-or-horizo​​ntal-page-scrolling-with-jquery/](http://tympanus.net/codrops/2010/06/02/smooth-vertical-or-horizontal-page-scrolling-with-jquery/)

它展示了如何使用缓动从单个网页上的另一个部分/div 滚动。

这是代码：

```
<script type="text/javascript"       
src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script type="text/javascript" src="../newUI/jquery.easing.1.3.js"></script>
<script type="text/javascript">
         $(function() {
            $('ul.nav a').bind('click',function(event){
                var $anchor = $(this);
                $('html, body').stop().animate({
                    scrollLeft: $($anchor.attr('href')).offset().left
                }, 1000);
                event.preventDefault();
            });
        });
  </script> 
```

我的问题是，我是否正确理解了这段代码？

```
src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script type="text/javascript" src="../newUI/jquery.easing.1.3.js"></script> 
```

这些只是 javascript 库库。

```
 $(function() {
            $('ul.nav a').bind('click',function(event){ 
```

这是创建一个新的 jscript 函数，其中我有一个列表函数（？），我通过单击进行导航。

```
var $anchor = $(this); 
```

然后我创建一个变量，它只是我单击的列表的一个实例。

```
 $('html, body').stop().animate({
                    scrollLeft: $($anchor.attr('href')).offset().left
                }, 1000);
                event.preventDefault(); 
```

我不确定这部分。我不确定 .stop.animate 到底在做什么。我知道它会向左 1000 像素，但我不明白这个过程。

感谢任何可以解决这个问题的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T17:14:20.960

Stop() 只是意味着，如果它正在经历任何其他动画，它会停止它们然后执行那个动画。

它在 1000 毫秒或 1 秒的过程中进行动画处理。

它也水平滚动，使用 scrollLeft 函数并阻止默认事件，这意味着它将水平滚动，使用锚属性作为参考（即内容 1、2 或 3），而不是立即移动到内容（ event.防止默认）

请注意，每个 div 的 '.content' 类如何继承 4000 像素的宽度。

```
scrollLeft: $($anchor.attr('href')).offset().left 
```

**.offset().left**返回元素的左侧位置，以像素为单位

**$($anchor.attr('href'))**指的是 section#1 ， section#2 或 section #3，因为这些是 CSS 属性中声明的 href 属性

所以那行代码所做的就是向左滚动 X 个像素，具体取决于您单击的数字

# java - TOD 时钟时间为 java.util.Date 或毫秒

> ID：14817202
> 
> 赞同：2
> 
> 时间：2013-02-11T17:12:43.923
> 
> 标签：java, date, time, milliseconds

我有一个数据库表，其中填充了通过 ETL 来自大型机的数据。该表的一列称为“TOD”，如 Time-Of-Day。

此列存储以下值：“CAE7631DC43DC686”“CAE7631C4AC6DC0B”“CAE6216DF2BC0D04”“CAE621D8F9916E8E”

所有这些值都在 2013 年 2 月 10 日和 2013 年 2 月 11 日左右。现在，在大型机上，这是一个时间日期表示（TOD 时钟）。

它以宏秒（1/1 000 000 秒）表示从 01.01.1900 过去的时间。

我需要的是一个可以将这些字符串转换为 java.util.Date 的 java 库/方法/算法实现。

在网上找到这些网站： http: [//paul.saers.com/Tod_howto.html](http://paul.saers.com/Tod_howto.html) [http://www.longpelaexpertise.com.au/toolsTOD.php](http://www.longpelaexpertise.com.au/toolsTOD.php)

这个页面解释了如何计算它，但对我来说有点太多了。我确定我会在某处犯一些错误。

所以，我的问题是；你知道我可以使用的图书馆（Joda Time 吗？）？我需要将这些值转换为 java.util.Date 并将 Date 对象转换为字符串表示形式（如“CAE621D8F9916E8E”）。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-09-24T07:10:21.040

在我的用例中，我有一个 getter 方法，它直接将 8 字节 TOD 读取为字节数组并将其转换为 long，但这里要遵守海报：

```
BigInteger bi = new BigInteger    ("CAE7631DC43DC686", 16); //  no strip off of 686 
long tod = bi2.longValue(); 
```

我使用以下方法来避免 BigDecimal 计算开销：

```
tod = tod >>> 12;  // remove rightmost 3 bytes and replace with zeros
tod = tod - 2208988800000000l;  // substract 1970
tod = tod/1000; // make millis out of micros
// timeformatter and dateformatter without Joda
SimpleDateFormat timeFormatter = new SimpleDateFormat("HH:mm:ss.SS z Z", Locale.getDefault());
SimpleDateFormat dateFormatter = new SimpleDateFormat("dd.MM.yyyy", Locale.getDefault());
// Display
System.out.println(timeFormatter.format(new Date(tod)));
System.out.println(dateFormatter.format(new Date(tod))); 
```

输出将是：

22:59:46.420 欧洲中部时间 +0100

10.02.2013

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T18:08:22.280

一步一步，使用 Joda：

计算中使用的数据可以在[您引用的网站上找到您提供](http://paul.saers.com/Tod_7x.html)的[其他参考](http://www.longpelaexpertise.com.au/toolsTOD.php)说明 TOD 以 UTC 表示

```
// we start with your string minus the three last digits
// which are some internal z/Series cruft
BigInteger bi = new BigInteger    ("CAE7631DC43DC", 16); // 686 stripped off
// then, from tables the website we get the TOD value for start of epoch
// here also, minus the three last digits                                 
BigInteger startOfEpoch70 = new BigInteger ("7D91048BCA000", 16); // 000 stripped off
// using that we calculate the offset in microseconds in epoch
BigInteger microsinepoch = bi.subtract(startOfEpoch70);
// and reduce to millis
BigInteger millisinepoch = microsinepoch.divide(new BigInteger("1000"));
// which we convert to a long to feed to Joda
long millisinepochLong = millisinepoch.longValue();
// Et voila, the result in UTC
DateTime result = new DateTime(millisinepochLong).withZone(DateTimeZone.UTC);
// Now, if you want a result in some other timezone, that's equally easy
// with Joda:
DateTime result2 = result.toDateTime(DateTimeZone.forID("EET"));

System.out.println("The result is " + result + " or represented in timezone EET "
                   + result2); 
```

这给出了这个输出：

> 结果为 2013-02-10T21:59:46.420Z 或以 EET 时区 2013-02-10T23:59:46.420+02:00 表示

我所指的“cruft”解释如下：

> 我们跳过最后 12 位（通常，这些位中的一些位被 MVS 用来判断哪个处理器用于读取 TOD 时钟以及哪个 LPAR 处于活动状态）。

当然，与其从字符串中粗暴地剪掉这些字节，还可以这样做

```
bi = bi.divide(new BigInteger("1000", 16)); 
```

因为除以十六进制 1000 也会去掉最后 12 位。

编辑：正如 Mehmet 在评论中指出的那样，TOD 是 UTC，这意味着应该告诉生成的 DateTime。为方便起见，我还展示了如何将该 DateTime 转换为另一个时区（`EET`用作示例）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T17:31:34.127

使用 BigInteger 解析您的十六进制日期：

```
new BigInteger("CAE7631DC43DC686", 16); 
```

然后使用 BigInteger 提供的各种方法（乘法，...）对 Unix 纪元进行必要的转换。

# vb.net - 将 Excel 工作簿内容导入数据表 (Visual Basic .NET)

> ID：14817206
> 
> 赞同：0
> 
> 时间：2013-02-11T17:12:50.103
> 
> 标签：vb.net, excel, datatable

我正在尝试执行一个可能非常简单的操作，但由于在此之前我没有这样做的经验，我可能会遗漏一些东西。

我有一个 Excel 文件需要导入到 Visual Basic (.NET 2010) 中的数据表中。现在，我正在尝试作为数据表导入，这样我就可以灵活地使用数据并准备好按我想要的方式使用。

Excel 电子表格并不完全具有最有前途和最有价值的格式，这使得这种情况有点困难。列标题本身不在第一行，而是在第 5 行，这可能并非总是如此。列标题甚至可能出现在第 10 行甚至第一行 - 对此的任何帮助也会很棒。

工作表的名称也可以不同，因为我无法控制将使用该应用程序的最终用户。请问这里有什么建议或代码帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T17:25:24.493

您需要处理格式问题才能获得真正的成功。一致的输入是确保一致输出的唯一方法。否则，您将需要构建一个界面，允许您的用户随时映射字段。

一旦你处理好了，我建议使用 OpenXML SDK 来导入你的值 ( [http://msdn.microsoft.com/en-us/library/office/hh298534.aspx](http://msdn.microsoft.com/en-us/library/office/hh298534.aspx) )

# python - 使用 Tkinter 中的按钮导航到应用程序的不同页面？

> ID：14817210
> 
> 赞同：29
> 
> 时间：2013-02-11T17:13:03.507
> 
> 标签：python, user-interface, tkinter

我在这里有一个很简单的问题。在 Tkinter (python) 中，我想知道谁使用按钮来访问我的应用程序的不同页面，例如注册页面和登录页面。我知道 GUI 没有像网站那样的“页面”，我已经看到了几种不同的方法，但是链接到不同页面的最佳方法是什么？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-02-11T19:10:24.930

使每一页成为一个框架。然后，您需要做的所有按钮就是隐藏任何可见的内容，然后使所需的框架可见。

一种简单的方法是将框架堆叠在一起（这是`place`有意义的时候），然后`lift()`是您想要可见的框架。当所有页面大小相同时，此技术效果最佳；实际上，它要求您明确设置包含框架的大小。

下面是一个人为的例子。这不是解决问题的唯一方法，只是证明这不是一个特别难解决的问题：

```
import Tkinter as tk

class Page(tk.Frame):
    def __init__(self, *args, **kwargs):
        tk.Frame.__init__(self, *args, **kwargs)
    def show(self):
        self.lift()

class Page1(Page):
   def __init__(self, *args, **kwargs):
       Page.__init__(self, *args, **kwargs)
       label = tk.Label(self, text="This is page 1")
       label.pack(side="top", fill="both", expand=True)

class Page2(Page):
   def __init__(self, *args, **kwargs):
       Page.__init__(self, *args, **kwargs)
       label = tk.Label(self, text="This is page 2")
       label.pack(side="top", fill="both", expand=True)

class Page3(Page):
   def __init__(self, *args, **kwargs):
       Page.__init__(self, *args, **kwargs)
       label = tk.Label(self, text="This is page 3")
       label.pack(side="top", fill="both", expand=True)

class MainView(tk.Frame):
    def __init__(self, *args, **kwargs):
        tk.Frame.__init__(self, *args, **kwargs)
        p1 = Page1(self)
        p2 = Page2(self)
        p3 = Page3(self)

        buttonframe = tk.Frame(self)
        container = tk.Frame(self)
        buttonframe.pack(side="top", fill="x", expand=False)
        container.pack(side="top", fill="both", expand=True)

        p1.place(in_=container, x=0, y=0, relwidth=1, relheight=1)
        p2.place(in_=container, x=0, y=0, relwidth=1, relheight=1)
        p3.place(in_=container, x=0, y=0, relwidth=1, relheight=1)

        b1 = tk.Button(buttonframe, text="Page 1", command=p1.show)
        b2 = tk.Button(buttonframe, text="Page 2", command=p2.show)
        b3 = tk.Button(buttonframe, text="Page 3", command=p3.show)

        b1.pack(side="left")
        b2.pack(side="left")
        b3.pack(side="left")

        p1.show()

if __name__ == "__main__":
    root = tk.Tk()
    main = MainView(root)
    main.pack(side="top", fill="both", expand=True)
    root.wm_geometry("400x400")
    root.mainloop() 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-06-30T19:50:23.060

你能做这样的事情吗？

```
import tkinter

def page1():
    page2text.pack_forget()
    page1text.pack()

def page2():
    page1text.pack_forget()
    page2text.pack()

window = tkinter.Tk()

page1btn = tkinter.Button(window, text="Page 1", command=page1)
page2btn = tkinter.Button(window, text="Page 2", command=page2)

page1text = tkinter.Label(window, text="This is page 1")
page2text = tkinter.Label(window, text="This is page 2")

page1btn.pack()
page2btn.pack()
page1text.pack() 
```

对我来说似乎简单多了。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-12-10T12:01:22.053

```
import tkinter as tk
root=tk.Tk()
root.geometry("360x360")

frame=tk.Frame(root,bg='lightblue')
frame.place(relx=0.2,rely=0.2,relheight=0.6,relwidth=0.6)

def page1():
    label=tk.Label(frame,text='this is the page1')
    label.place(relx=0.3,rely=0.4)

def page2():
    label=tk.Label(frame,text='this is the page2')
    label.place(relx=0.3,rely=0.4)

def page3():
    label=tk.Label(frame,text='this is the page3')
    label.place(relx=0.3,rely=0.4)

bt=tk.Button(root,text='page1',command=page1)
bt.grid(column=0,row=0)

bt1=tk.Button(root,text='page2',command=page2)
bt1.grid(row=0,column=1)

bt2=tk.Button(root,text='page3',command=page3)
bt2.grid(row=0,column=2)

root.mainloop()` 
```

# jquery - 模态窗口打开后触发重新聚焦选项卡操作

> ID：14817217
> 
> 赞同：0
> 
> 时间：2013-02-11T17:13:24.613
> 
> 标签：jquery

打开模式对话框上的关闭按钮后，如何触发选项卡打开？这是我到目前为止的代码，它只向我显示纯文本的错误消息。

```
<script>
$(function() {
$( "#dialog-message" ).dialog({
    modal: true,
    buttons: {
    Ok: function() {
    $( this ).dialog( "close" );}}
    });
$("#tabs").tabs("select",1);
    return false;
        });
});
</script>
<div id="dialog-message" title="Incorrect password">
    The password you have provided is incorrect.<br>Please try again.
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:18:49.357

从[Hook 修改为对话框关闭事件](https://stackoverflow.com/questions/171928/hook-into-dialog-close-event)

```
 $('div#dialog-message').bind('dialogclose', function(event) {
    $("#tabs").tabs("select",1);
 }); 
```

或者试试这个：

```
$( "#dialog-message" ).dialog({
    modal: true,
    buttons: {
        Ok: function() {
        $( this ).dialog( "close" );
        }
    },
    close: function(){
        $("#tabs").tabs("select",1);
    }
}); 
```

# html - Google WebFont 无法在 Internet Explorer 9 中呈现

> ID：14817223
> 
> 赞同：1
> 
> 时间：2013-02-11T17:13:58.370
> 
> 标签：html, css, webfonts, google-webfonts

[我有一个网站](http://sergedenimes.com)。它的标题和正文使用 2 个 Google 网络字体。这些在 Chrome/IE/Safari（包括移动设备）上运行良好，但是当我在 Win7 上运行 IE9 的办公室计算机上查看该网站时，Google 字体不会加载并退回到无衬线字体。

这是我看到的：

**IE9：**

![在此处输入图像描述](../Images/2d4ac6afceeeba12c37c0fa8c9065d05.png)

**铬合金：**

![在此处输入图像描述](../Images/df9da9e00f8ad994ccfb366a44c0fb33.png)

我不知道为什么 IE 无法加载字体，因为我知道 Google 字体与 IE7+ 兼容。我认为这可能是一个安全设置，但无法深入了解它。有任何想法吗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:29:00.703

我不知道这是否是问题所在，但请尝试将您的请求更改为仅一个链接标签：

```
<link href='http://fonts.googleapis.com/css?family=Oswald|Lato' rel='stylesheet' type='text/css'> 
```

也许在两个不同的请求中加载两种字体会导致问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T21:05:28.750

在我的 IE9 上，它看起来和 Chrome 中的一样。按 F12 并确保您使用的是正确的浏览器和文档模式。

# php - MySQL 加入并创建新的列值

> ID：14817225
> 
> 赞同：3
> 
> 时间：2013-02-11T17:14:01.820
> 
> 标签：php, mysql, codeigniter

我有一个乐器清单和教师乐器清单。

我想获得带有 id 和 name 的完整仪器列表。

然后检查 Teachers_instrument 表中的乐器，以及特定教师是否在新列中添加了乐器`NULL`或值。`1`

然后我可以用它来循环 Codeigniter 中的一些仪器复选框，当我需要从数据库中提取数据但我正在努力编写查询时，这似乎更有意义。

```
teaching_instrument_list

- id
- instrument_name

 teachers_instruments

- id
- teacher_id
- teacher_instrument_id

 SELECT
  a.instrument,
  a.id
 FROM
   teaching_instrument_list a
 LEFT JOIN
 (
    SELECT teachers_instruments.teacher_instrument_id
    FROM teachers_instruments
    WHERE teacher_id = 170
 ) b ON a.id = b.teacher_instrument_id 
```

我的查询如下所示：

```
 instrument name    id   value
 ---------------    --   -----
 woodwinds          1    if the teacher has this instrument, set 1
 brass              2     0
 strings            3     1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T17:32:44.560

一种可能的方法：

```
 SELECT i.instrument_name, COUNT(ti.teacher_id) AS used_by 
      FROM teaching_instrument_list AS i
 LEFT JOIN teachers_instruments AS ti
        ON ti.teacher_instrument_id = i.id
  GROUP BY ti.teacher_instrument_id
  ORDER BY i.id; 
```

这是[**SQL Fiddle**](http://sqlfiddle.com/#!2/cc4be/3)（表的命名有点不同）。

说明：使用`LEFT JOIN`on`instrument_id`我们将为`teacher_id`每种乐器获得与使用它的教师一样多的值 - 或者只有一个`NULL`值，如果没有人使用它。下一步是使用`GROUP BY`并按`COUNT()`仪器对结果集进行分组并计算其用户（不包括 NULL 值行）。

如果你想要显示所有的乐器和一些标志来显示老师是否使用它，你需要另一个 LEFT JOIN：

```
 SELECT i.instrument_name, NOT ISNULL(teacher_id) AS in_use
      FROM teaching_instrument_list AS i
 LEFT JOIN teachers_instruments AS ti
        ON ti.teacher_instrument_id = i.id
       AND ti.teacher_id = :teacher_id; 
```

[**演示**](http://sqlfiddle.com/#!2/cc4be/9)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T18:04:01.860

那么这可以像这样实现

```
SELECT
  id,
  instrument_name,
  if(ti.teacher_instrument_id IS NULL,0,1) as `Value`
from teaching_instrument_list as til
  LEFT JOIN teachers_instruments as ti
    on ti.teacher_instrument_id = til.id 
```

添加一列并检查teacher_instrument_id。如果找到，则将 Value 设置为 1，否则设置为 0。

# quartz.net - 如何创建多个 Quartz.Net 调度程序实例？

> ID：14817231
> 
> 赞同：0
> 
> 时间：2013-02-11T17:14:31.283
> 
> 标签：quartz.net

运行quartz.net 调度程序的多个实例是否安全？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T18:32:16.677

您可以使用quartz_jobs.xml 配置作业并创建StatefulJobs，并使用作业链在一个线程调度程序中按顺序运行作业（指向RAMJobStore）；另一个指向数据存储的调度程序可以同时运行 [http://quartz-scheduler.org/documentation/faq#FAQ-chain](http://quartz-scheduler.org/documentation/faq#FAQ-chain)

如果您需要将所有作业持久化到单个数据库，您可以使用 2 个带有集群的调度程序，但您无法选择哪个作业在哪个调度程序上运行，因此您的作业将按顺序运行，但可能不会在单线程调度程序上运行。如果有 2 个具有不同前缀的石英表集不是问题，则可以运行 2 个调度程序。 [http://quartz-scheduler.org/documentation/quartz-1.x/cookbook/MultipleSchedulers](http://quartz-scheduler.org/documentation/quartz-1.x/cookbook/MultipleSchedulers)

# .htaccess - .htaccess 301 重定向数千个条目或 RewriteMap

> ID：14817232
> 
> 赞同：0
> 
> 时间：2013-02-11T17:14:32.817
> 
> 标签：.htaccess, mod-rewrite, redirect, http-status-code-301, rewritemap

我有一个包含数千个页面需要重定向的站点。我正在考虑在我的 .htaccess 中使用 301 重定向，但我只是担心这会非常低效。

如果 .htaccess 有数千行（没有办法有重写规则，它们必须一一映射），意味着每次有人访问我们的一个页面时，他们必须阅读整个 .访问？那是一件坏事？该坐席位于共享主机中。

我在这里看到了关于使用 RewriteMap 的先前答案。这与 301 重定向有何不同？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T19:09:31.160

对于简单的页面重定向，301 是最好的，而且速度非常快。RewriteMap 用于更复杂的重写功能或执行非常具体的重写任务。

在将您的页面服务器端列入黑名单之前，我会先尝试使用您的应用程序重新映射。

如果您使用 .htaccess 设置重定向，那么这些页面对 Google 来说将是死的，这当然可能是也可能不是坏事。基本上，一旦谷歌索引了这些重定向，就真的没有回头路了（SEO）。

简而言之，明智地重定向。

# sql - 如果未提供，则在 SQL Server 中生成新的 GUID

> ID：14817235
> 
> 赞同：12
> 
> 时间：2013-02-11T17:14:39.957
> 
> 标签：sql, sql-server

我正在更新我的数据库，以便为表中的每条记录提供一个 GUID 列。

此表由几个不同的来源填充，其中一些不会为新记录提供 GUID。

仅当没有为新记录传入值时，如何在数据库端使用 newid() 填充此列？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-11T17:27:37.613

不要我重复不要放置默认列`NEWID()`。如果您执行 GUID，您得到的将是完全随机的，如果您在此列上有任何类型的索引，它将毫无用处。如果要执行此操作，则要将列默认设置为`NEWSEQUENTIALID ( )`

Kimberly Tripp 有一篇关于这个主题的[好文章](http://www.sqlskills.com/blogs/kimberly/guids-as-primary-keys-andor-the-clustering-key/)和另一篇[好文章。](http://www.sqlskills.com/blogs/kimberly/disk-space-is-cheap/)

`NEWSEQUENTIALID ( )`作为默认实现：

```
CREATE TABLE foo
(unq_id UNIQUEIDENTIFIER DEFAULT NEWSEQUENTIALID(),
 cola varchar(10)); 
```

[完整的 SQL Fiddle 示例。](http://sqlfiddle.com/#!3/4e45b/1).

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-11T17:20:47.473

您可以将列的默认值设置为`NEWID()`。然后，仅当尚未创建 GUID 时才会创建和分配 GUID。

# google-maps - 谷歌静态地图瓦片服务 - 如何在像素和纬度/经度之间进行映射？

> ID：14817238
> 
> 赞同：3
> 
> 时间：2013-02-11T17:14:46.033
> 
> 标签：google-maps, maps

Google 提供静态地图瓦片服务。这些是那些 256x256 的静态地图图块。他们是否提供将纬度、经度映射到像素坐标的库，反之亦然？我在网上看到了一些实现，但想知道他们是否有可以使用的官方实现。

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-11T19:20:32.870

您可能需要检查方法“fromLatLngToDivPixel” [https://developers.google.com/maps/documentation/javascript/v2/reference#GMap2.fromLatLngToDivPixel](https://developers.google.com/maps/documentation/javascript/v2/reference#GMap2.fromLatLngToDivPixel)

它以 latlng:GLatLng 作为参数并返回 GPoint 引用。

# java - 如何在 Git / EGit 上进行简单的还原工作？

> ID：14817242
> 
> 赞同：47
> 
> 时间：2013-02-11T17:15:00.080
> 
> 标签：java, eclipse, git, egit

好的。简单的事情应该简单，所以我希望是。:)

我已经更改了一个文件，现在我想恢复到 git repo 中的最新版本，因为我的更改是废话，我想重新开始更改文件。

就我而言，您应该这样做：

`git checkout -- <NAME OF FILE>`

第一个问题：如何在 Eclipse 中使用 EGit 执行此操作？团队下没有结帐选项。:( :( :(

现在假设我在多个导演中修改了多个文件。我如何恢复所有这些以重新开始？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2013-02-11T17:25:07.817

在我的版本中，“替换为...”->“HEAD Revision”似乎就是这样做的...

我承认，它不在“团队”子菜单中，这有点令人困惑。

此外，这可能会有所帮助：[Eclipse git checkout (aka, revert)](https://stackoverflow.com/questions/1750997/eclipse-git-checkout-aka-revert/4104149#4104149)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-09-23T17:14:56.213

转到“同步”视图（如果您没有打开它，它在“窗口”/“显示视图”中），填充列表以防它未加载，右键单击要还原的文件并在上下文中菜单选择“覆盖”以恢复到 Git 服务器中的最新文件。

您还可以通过在上下文菜单中选择“在比较编辑器中打开”来检查要在还原之前丢弃的更改。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-11-25T08:01:24.700

您可以从“Git Staging”中获得“Replace with Head Revision”

![在此处输入图像描述](../Images/37e0ee65389d87d60f752faccaa75b4c.png)

# regex - 正则表达式在 Google Analytics 中排除文件夹

> ID：14817244
> 
> 赞同：0
> 
> 时间：2013-02-11T17:15:09.190
> 
> 标签：regex, google-analytics

我有一个包含多个子文件夹的网站（例如 /uk/ /australia/ /canada/ 等），还有根网站。

在 Google Analytics 中，我想使用正则表达式来过滤和排除子文件夹，这样我就可以只看到主域页面的统计信息（不包括 /uk/ /australia/ /canada/ 子文件夹中的页面）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T17:38:10.347

对 pagePath 使用以下正则表达式以排除所有子文件夹：

```
^/[^/]+$ 
```

要排除特定的子文件夹，请使用：

```
^(?!/(uk|australia|canada|etc...))/.*$ 
```

`(?!RE)`是[负前瞻](http://www.regular-expressions.info/lookaround.html)。

# sql-server-2008 - SQL Server 2008 LIKE 查询

> ID：14817249
> 
> 赞同：3
> 
> 时间：2013-02-11T17:15:18.877
> 
> 标签：sql-server-2008

我想使用`LIKE`查询来选择一些特定的词，就像`UU1`.

我用

```
SELECT UniID FROM MasterCustomer  where (UniID like '%uu1%' ) 
```

但它也返回包含`UU11`.

如何修改我的查询以仅选择`UU1`？

我的表包含像

```
UU1-UU7-UU5
UU2-UU1
UU3-UU1
UU31-UU14 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T17:18:22.323

试试这个：

```
SELECT UniID 
FROM MasterCustomer  
WHERE (UniID like '%uu1' ) OR (UniID like '%uu1-%' ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T17:18:11.837

`like '%uu1-%' or like '%uu1 %'`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T18:44:19.653

另一种选择：

```
WHERE UnitID + '-' LIKE '%uu1-%' 
```

# django - 如何保护 Django 站点

> ID：14817250
> 
> 赞同：3
> 
> 时间：2013-02-11T17:15:23.740
> 
> 标签：django

我有一个工作的 django 网站 - 正常运行，工作得很好。它使用 Django 的 contrib.auth 进行身份验证。它托管在 Heroku 上。我想为演示目的设置此站点的克隆，但想在站点周围添加一个额外的安全层，这将是一个非常简单的密码保护。不必是防弹或不可破解的 - 足以让“麻瓜”尝试。

此授权层不应以任何方式干扰站点身份验证本身。它只是一个外环（检查一次，在会话中存储访问权限）。因为该站点托管在 Heroku 上，所以我无法在 Web 服务器级别执行此操作 - 它必须是应用程序本身的一部分。

我的核选项是创建一个 django 应用程序（工作名称“周边”）来强制执行此操作，但如果有人知道另一种方法来做到这一点，我将不胜感激。

核心功能包括：

*   一些生成短令牌的机制（< 8 个字符）
*   针对电子邮件地址记录令牌的一些机制
*   在首次访问网站时提示用户输入令牌/电子邮件组合
*   此后不受限制地访问站点（标准身份验证模型在此时启动）

典型的用户旅程是：

*   Bob 要求网站所有者（我）访问演示网站
*   我为 Bob 生成了一个令牌并将其与站点 URL 一起发送给他
*   Bob 点击链接，被重定向到页面以输入他的电子邮件和令牌
*   如果令牌有效（在 X 小时/天后过期），则存储在会话中，让 Bob 进入。
*   如果令牌无效，则为 403 (/401)。

（您可能想知道为什么保护已经公开的网站副本有意义。这是因为该网站是仅限会员的网站，并且在演示版中它将是“自动注册”，以便人们可以看到它的样子在网站内部而无法访问真实数据。但是，我希望能够在其上跟踪用户。）

**[更新：替代]**

一个直截了当的替代方法是将令牌添加到我发送给 Bob 的 URL，忽略他的电子邮件，并简单地验证令牌本身。只要 Bob 始终使用电子邮件中的 URL，这将起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T08:56:48.197

我已经为此创建了自己的解决方案 - 满足[Django-Perimeter](https://github.com/hugorodgerbrown/django-perimeter)。

此应用程序尚未打包（尚未），因此您需要克隆源代码并将其手动添加到您自己的 django 站点，但它确实有效。它提供了生成访问令牌的能力，然后使用这些令牌保护对站点（整个站点，而不是其中的一部分）的访问。

**[更新]**

现在可以通过 PyPI - [http://pypi.python.org/pypi/django-perimeter](http://pypi.python.org/pypi/django-perimeter)

您可以使用安装`pip install django-perimeter`

# javascript - 使用 Javascript 的 HTML5 视频控制和浏览器检测

> ID：14817251
> 
> 赞同：0
> 
> 时间：2013-02-11T17:15:27.747
> 
> 标签：javascript, html, html5-video, browser-detection

我正在尝试修改允许我基于 Chrome 或 Firefox 浏览视频的脚本。

我注意到使用 offsetX 函数在 Chrome 中效果很好，但在 Firefox 中根本不行。在 Firefox 中使用“e.pageX-bar.offsetLeft”对我有用。因此，我需要一种方法来根据浏览器确定使用哪个。

```
function move(e){
    if (navigator.userAgent.search("Chrome") >= 0){
        if(!media.paused && !media.ended){
                var mouseX= e.offsetX;
                newTime=((mouseX*media.duration)/barSize);
                media.currentTime=newTime;
                progress.style.width=mouseX+'px';
            }
    }
    else if (navigator.userAgent.search("Firefox") >= 0){
        if(!media.paused && !media.ended){
                var mouseX= e.pageX-bar.offsetLeft;
                newTime=((mouseX*media.duration)/barSize);
                media.currentTime=newTime;
                progress.style.width=mouseX+'px';
            }
    }   
} 
```

# wcf - 如何将服务添加到 WCF 服务库。这个对吗？

> ID：14817254
> 
> 赞同：0
> 
> 时间：2013-02-11T17:15:37.520
> 
> 标签：wcf

我是 WCF 和 .Net 应用程序的新手。如果我问的是一些基本而愚蠢的问题，请原谅我。

基本上，我的项目是创建一个 WCF 服务，该服务将调用一个 Oracle 存储过程，该过程返回一组参数，然后将这些参数传递给 Exchange Server 以发送电子邮件。

到目前为止，我已经做了这样的事情：在 VS 2010 创建项目；视觉 C#；周转基金；选择 WCF 服务库。描述为“用于创建 WCF 服务类库 (.dll) 的项目”。Gives an app.config Debug 会自动启动 WCF 服务主机和 WCF 测试客户端。我最初遵循以下网站中给出的 MSDN 示例：

[http://msdn.microsoft.com/en-us/library/ms731835.aspx](http://msdn.microsoft.com/en-us/library/ms731835.aspx)

现在我在同一个解决方案中添加了另一个项目，并选择 WCF 服务应用程序在 IIS 主机中托管上述内容。这给了我 web.config 文件。

在我继续我的下一个问题之前，请让我知道最后一步是正确还是错误？为了进一步进行，我尝试在 web.config 文件中添加我的实现服务引用。

当我尝试调试时，我得到了一个单独运行的服务主机（我机器上的一个图标），并且 WCF 测试客户端也打开了。这个对吗？现在我该如何进一步进行？我不知道.. 现在我是否创建可以使用数据访问调用存储过程的方法？

我该如何进一步进行？我被困住了。请帮忙。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:23:37.307

您走在正确的道路上，您只需要调用您的存储过程，然后调用读取数据并调用方法并将其传递给客户端。
这是带有屏幕截图的完整示例以供您帮助

**SQL Server**
[http://www.codeproject.com/Tips/468354/WCF-example-for-inserting-and-displaying-data-from](http://www.codeproject.com/Tips/468354/WCF-example-for-inserting-and-displaying-data-from)

**用于 Oracle 数据库的 WCF 数据服务和 OData**
[http://download.oracle.com/oll/obe/EntityFrameworkWCF/WCFEntityFramework.htm](http://download.oracle.com/oll/obe/EntityFrameworkWCF/WCFEntityFramework.htm)

**在 Oracle 数据库 WCF 上调用操作**
[http://msdn.microsoft.com/en-us/library/dd788075%28v=bts.10%29.aspx](http://msdn.microsoft.com/en-us/library/dd788075%28v=bts.10%29.aspx)

# php - 如何创建指向数组中文件的超链接（分页文件）

> ID：14817258
> 
> 赞同：0
> 
> 时间：2013-02-11T17:15:46.653
> 
> 标签：php, html, dynamic, hyperlink, pagination

我一直在使用 php 中的数组进行分页。我有一系列帖子，我用它们将页面的内容分成更小的块。它可以按我的意愿工作并返回内容。

```
<?php
// let's paginate data from an array...
$posts = array(
// array of posts

"blog/posts/06-19-tues.php",
"blog/posts/06-16-sat.php",

"blog/posts/05-26-sat.php",
"blog/posts/05-23-wed.php",
"blog/posts/05-09-wed.php"

);

// how many records should be displayed on a page?
$records_per_page = 3;

// include the pagination class
require 'zebra/Zebra_Pagination.php';

// instantiate the pagination object
$pagination = new Zebra_Pagination();

// the number of total records is the number of records in the array
$pagination->records(count($posts));

// records per page
$pagination->records_per_page($records_per_page);

// here's the magick: we need to display *only* the records for the current page
$posts = array_slice(
    $posts,
    (($pagination->get_page() - 1) * $records_per_page),
    $records_per_page
);

?>

<?php foreach ($posts as $index => $post):?>
<?php include $post; ?>
<?php endforeach?>

<?php

// render the pagination links
$pagination->render();

?> 
```

我现在的问题是如何链接到网站其他地方的各个帖子。由于它们最终会从一个页面移动到另一个页面，因此直接链接到静态文件将不起作用。起初，我给每个帖子一个唯一的 id 并用它来链接到帖子，但现在这不起作用，因为链接会动态变化。

我看过 array_search() ，它看起来很有希望，但我不明白它足以让它产生一个超链接。

我不确定我是否已经很好地表达了这个问题。如果我没有多大意义，请道歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T19:33:37.187

如果我理解正确，我认为这样的事情会起作用：

```
if (isset($_REQUEST['page']) {
  $found = array_search($_REQUEST['page'], $posts);
  if ($found) {
    $pagination->set_page(floor($found/$records_per_page)+1);
  }
} 
```

然后你可以使用像这样的链接

```
$link = '<a href="yourpage.php?page=' . urlencode($posts[$i]) . '">whatever</a>'; 
```

# sql - 将数据从一个表复制到另一个 - Oracle

> ID：14817261
> 
> 赞同：1
> 
> 时间：2013-02-11T17:16:09.570
> 
> 标签：sql, oracle, plsql

我有两张桌子，即 PERSON 和 WIFE。我想让 WIFE 的数据在 PERSON 表中可用，同时保持 WIFE 的条目保持不变，同时针对妻子的数据添加一些 PERSON 的值。

**人表**

```
 PK   NAME      ADDRESS    IS_MARRIED
    1  John        ab city     Y        
    2  Varvatos    cd town     N
    3  Smith       ef town     Y
    4  Henry       gh city     Y
    5  Lynda       gh city     Y 
```

**老婆表**

```
 PK  PERSON_ID (FK)    NAME         
    1    1                 Alice
    2    3                 Rosy
    3    4                 Lynda 
```

现在我想像这个
**PERSON表一样将 WIFE 表的数据复制到 PERSON 表中**

```
 PK   NAME      ADDRESS    IS_MARRIED
   1  John        ab city     Y        
   2  Varvatos    cd town     N
   3  Smith       ef town     Y
   4  Henry       gh city     Y
   5  Lynda       gh city     Y
   6  Alice       ab city     Y
   7  Rosy        ef town     Y 
```

在给定的示例中，您可能已经注意到妻子的 ADDRESS 与她的配偶相同，并且 IS_MARRIED 列也是如此。而且，PK也不重复。如何解决这个问题？
********已编辑********
另一个重要因素是 Lynda 已经退出 PERSON 表，因此，我当然不想复制她的条目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T21:03:36.883

```
declare
newId number;
begin
select nvl(max(person.pk),0) + 1 into newId from person;
for x in (
    select w.Name, p.Address
    from wife w inner join Person p
    on w.Person_id = P.pk) loop
   insert into Person(pk, Name,Address,Is_Married) values (newId ,x.Name ,x.Address,'Y');
   newId := newId  +1;
end loop;
commit;
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T17:18:52.097

使用 CTAS-create table table_name 从两个表中选择您需要的任何内容。只需在 select 关键字上方编写一个连接并添加 create table as...。如果您更喜欢 Gordon 示例中的 insert 并且您的表很大，那么您可以在 insert 中添加一个 Append 提示...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T17:17:49.623

试试这个：

```
insert into Person(Name, Address, Is_Married)
    select w.name, p.address, 'Y'
    from wife w left outer join
         Person p
         on w.Person_id = person.pk 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T03:59:55.900

嗨，请尝试以下代码：这符合您的要求

```
declare PKId number;
begin
  select nvl(max(person.pk),0) + 1 into PKId 
  from person;

  for x in (select w.Name, p.Address
            from wife w 
            inner join Person p on w.Person_id = P.pk
           ) loop

     insert into Person(pk, Name,Address,Is_Married) 
     values (PKId ,x.Name ,x.Address,'Y');

     PKId := PKId  +1;
  end loop;
  commit;
end 
```

# knockout.js - componentone wijmo 网格微风js

> ID：14817273
> 
> 赞同：0
> 
> 时间：2013-02-11T17:17:07.900
> 
> 标签：knockout.js, breeze, componentone, wijmo

我正在尝试使用wijmogr​​id并使用breezejs对其进行数据绑定。

我在下面附上了我的代码，用于我拥有的 4 个文件、索引 html 页面和 3 个 javascript 文件。

索引页面中的 ul 运行良好并给了我预期的结果，所以我知道我的数据正在被返回。

然而，searchgrid 只显示 2 个列标题，但没有数据。有人可以向我解释我在 searchgrid 代码中的错误。

我正在尝试学习这些东西，并且一直在使用来自轻柔网站的 BreezyDevices 示例代码作为轻柔代码的基础。这一切似乎都在工作，但我无法弄清楚 wijmo 数据绑定部分。我确实认为我可以使用与 ul 类似的代码并对结果进行 foreach 并构建一个表格，然后如果需要的话将该表格变成一个 wijmogr​​id。

```
*** index.cshtml start ***

<ul data-bind="foreach: resultBPP">
        <li class="results">

            <form>
                <label for="fn">Field 1: </label>
                <input id="fn" type="text" data-bind="value: Field1" placeholder="first" />
                <label for="ln">Field 2: </label>
                <input id="ln" type="text" data-bind="value: Field2" placeholder="last" />

                <br />
            </form>

        </li>
    </ul>

   <table id="searchGrid" data-bind="
    wijgrid: {
        data: resultBPP,
        allowSorting: true,
        columns: [
        {dataKey: 'Field1', sortDirection: 'ascending', headerText: 'Field 1', width: 60 },
        {dataKey: 'Field2', sortDirection: 'ascending', headerText: 'Field 2', width: 60}
        ]
    }">
</table>

<!--3rd party library scripts -->
    <script src="/Scripts/jquery-1.9.0.min.js"></script>
    <script src="~/Scripts/jquery-ui-1.10.0.min.js"></script>
    <script src="/Scripts/knockout-2.2.1.js"></script>
    <script src="/Scripts/q.js"></script>
    <script src="/Scripts/breeze.debug.js"></script>

    <!-- wijmo CSS and scripts -->
    <link href="~/Content/themes/aristo/jquery-wijmo.css" rel="stylesheet" />
    <link href="~/Content/jquery.wijmo-complete.2.3.5.css" rel="stylesheet" />
    <script src="~/Scripts/jquery.wijmo-open.all.2.3.5.min.js"></script>
    <script src="~/Scripts/jquery.wijmo-complete.all.2.3.5.js"></script>
    <script src="~/Scripts/knockout.wijmo.js"></script>

    <!-- Application scripts -->
    <script src="/Scripts/app/logger.js"></script>
    <script src="/Scripts/app/dataservice.js"></script>
    <script src="/Scripts/app/bppViewModel.js"></script>
    <script src="/Scripts/app/main.js"></script>

***end of index.cshtml****

*** main.js start ****

((function (root) {
    var app = root.app;
    app.logger.info('Data is booting');
    ko.applyBindings(app.bppViewModel);
})(window));

*** end of main.js ***

*** dataservice.js start ***

var searchTable = 'SearchResults';
(function (root) {
    var breeze = root.breeze;
    var app = root.app;
    var logger = app.logger;
    var serviceName = 'api/BPP';
    var manager = new breeze.EntityManager(serviceName);
    var dataservice = {
        getSearchResults: getSearchResults
    };
    app.dataservice = dataservice;
    function getSearchResults(searchArray) {
        logger.info("querying for search results");
        var query = new breeze.EntityQuery().from('searchTable').where('searchfield', 'substringof', '1').orderBy('searchfield').take(10);
        return manager.executeQuery(query).then(function (data) {
            processResults(data, searchArray);
        }).fail(queryFailed);
    }
    ; ;
    function processResults(data, searchArray) {
        logger.success("queried all results");
        searchArray.removeAll();
        var searchResults = data.results;
        searchResults.forEach(function (searchResult) {
            searchArray.push(searchResult);
        });
    }
    function queryFailed(error) {
        logger.error("Query failed: " + error.message);
    }
})(window);

*** end of dataservice.js ****

*** viewmodel.js start ***
((function (root) {
    var app = root.app;
    var dataservice = app.dataservice;
    var vm = {
        resultBPP: ko.observableArray([]),
        hide: ko.observable(true)
    };
    getSearchResults().then(function () {
        vm.hide(false);
    });
    app.bppViewModel = vm;
    function getSearchResults() {
        return dataservice.getSearchResults(vm.resultBPP);
    }
})(window));

*** end of viewmodel.js *** 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T15:08:01.177

这实际上是 jQuery UI 的小部件工厂中的一个问题。工厂将递归地 $.extend 选项对象内的所有对象。因此，当将 Grid 的数据选项设置为 Breeze 数据源时，它将遍历其整个数据模型并扩展每个对象。这导致了 JS 中的堆栈溢出。我们必须真正破解我们的网格以在初始化期间删除数据选项，然后将其放回原处。

Wijmo 3.0.0b3（Beta 3）中已经提供了对微风的支持，您可以在此处阅读更多信息：[http](http://wijmo.com/wijmo-v3-beta-3-has-landed/) ://wijmo.com/wijmo-v3-beta-3-has-landed/此支持不仅包括网格修复。我们有一个数据 API 和一个微风适配器。因此，您可以轻松地将我们所有的小部件绑定到微风数据源。

# cocoa - Qt5。QMacNativeWidget。架构 x86_64 的未定义符号

> ID：14817278
> 
> 赞同：1
> 
> 时间：2013-02-11T17:17:21.583
> 
> 标签：cocoa, qt

Qt5文档中列出了**QMacNativeWidget**类，但是任何尝试使用嵌入式 Qt Widgets 创建 Cocoa 应用程序都会给我下一个错误：

```
Undefined symbols for architecture x86_64:
  "QMacNativeWidget::QMacNativeWidget(void*)", referenced from:
      -[AppDelegate loadUi] in AppDelegate.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

这是我的代码：

```
@interface AppDelegate : NSObject <NSApplicationDelegate>
{
    std::auto_ptr<QWidget> nativeWidget;
    ...
}
// Qt Widget will be attached to this view
@property (weak) IBOutlet NSView *view; 
@end

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification {
    [self initQtIfNeeded];
    [self loadUi];
}

-(void) initQtIfNeeded
{
    QApplication* app = qApp;
    if (app == 0)
    {
        puts("Creating new QApplication instance...");
        QApplication::setDesktopSettingsAware(true);
        QApplication::setAttribute(Qt::AA_MacPluginApplication, true);
        int argc = 0;
        app = new QApplication(argc, NULL);
        ...
    }
}

-(void)loadUi
{
    nativeWidget.reset(new QMacNativeWidget());
    ...

    // Casting pointer (x86_64 with ARC)
    void* winId = reinterpret_cast<void *>(nativeWidget->winId());
    NSView *nativeWidgetNSView = (__bridge NSView*)winId;

    // Attaching Qt Widget to NSView
    [self.view addSubview:nativeWidgetNSView positioned:NSWindowAbove relativeTo:nil];
    nativeWidget->setGeometry(0, 0, self.view.frame.size.width, self.view.frame.size.height);

    ...

    nativeWidget->show();
} 
```

当我使用 QWidget 而不是 QMacNativeWidget （即：）`nativeWidget.reset(new QWidget());`应用程序成功链接但在运行时创建了附加窗口。（

[截屏](http://i.stack.imgur.com/lUySd.png)

**我的问题：**我做错了什么还是 Qt 问题？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-18T01:26:55.717

这里同样的问题。我解决了将文件扩展名从“.cpp”更改为“.mm”的问题。我在一些 QtBug 描述中看到了这个技巧，为我尝试并工作（使用静态构建的 Qt 5.7）。.mm 扩展名用于 Objective-C++ 代码，它是 Objective-C 和 C++ 的混合体。使用 .cpp 扩展名出现“未定义符号”错误。

# c# - 推送通知未出现

> ID：14817280
> 
> 赞同：1
> 
> 时间：2013-02-11T17:17:30.733
> 
> 标签：c#, ios, apple-push-notifications, sspi, moonapns

我似乎无法让 MoonAPNS 工作。我知道在同一个问题上有几个问题，例如[这个](https://stackoverflow.com/questions/6707364/iphone-certificate-error-in-apns-sharp-a-call-to-sspi-failed)。我已按照有关创建 p12 证书的教程进行操作，并成功地将其与 php 脚本一起使用以向设备发送通知，但我不知道如何将其与 MoonAPNS 一起使用。我还在 Windows 中安装了证书。调试似乎表明正在发送通知，但 iPad 上没有显示任何内容。

这是我的代码：

```
[WebMethod]
public void PushNotificationAlert()
{
    var payload1 = new NotificationPayload("874b30056afc0ab4fc01ea1e3b51e8dc6ee7b1ea2e75083a17dec8e929a08112", "Message", 1, "default");
    payload1.AddCustom("RegionID", "IDQ10150");
    var p = new List<NotificationPayload> { payload1 };
    var push = new PushNotification(false, "C:\\myKey.p12", "password");
    var rejected = push.SendToApple(p);
    foreach (var item in rejected)
    {
        Console.WriteLine(item);
    }
    Console.ReadLine();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T16:41:25.083

原来我只需要更改`false`to`true`并且通知就到了。

# java - 使用自定义验证器时忽略弹簧验证注释

> ID：14817281
> 
> 赞同：1
> 
> 时间：2013-02-11T17:17:33.313
> 
> 标签：java, spring, validation, annotations

我正在尝试将带注释的验证规则与一些自定义验证结合起来。我有一个详细信息实体，如下所示：

```
public class DetailsEntity {    
    @NotEmpty(message = "Name is required")
    private String name;
    private String customField;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getCustomField() {
        return customField;
    }

    public void setCustomField(String customField) {
        this.customField = customField;
    }
} 
```

然后我有一个看起来像这样的控制器：

```
@Controller
public class EntityController {

    @RequestMapping(value = "/create", method = RequestMethod.POST)
    public @ResponseBody DetailsEntity create(@RequestBody @Valid
        DetailsEntity details) {
        //Do some creation work
    }
} 
```

这一切开箱即用。问题是当我尝试将自定义验证器与我的实体一起使用时。我的验证器如下所示：

```
@Component
public class EntityValidator implements Validator {

    @Override
    public boolean supports(Class<?> aClass) {
        return aClass.isAssignableFrom(DetailsEntity.class);
    }

    @Override
    public void validate(Object o, Errors errors) {
        DetailsEntity entity = (DetailsEntity) o;
        if (entity.getCustomField().equals("Some bad value")) {
            errors.reject("Bad custom value supplied");
        }
    }
} 
```

我试过两种方式注入我的验证器。一种是`@InitBinder`在控制器中使用 ，另一种是在 spring 配置中设置全局验证器（`<mvc:annotation-driven validator="entityValidator" />`）。无论哪种方式，自定义验证器都可以正常工作，但是我的`@NotEmpty`注释被忽略了。如何同时使用注释和自定义验证器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T17:44:22.747

用作`SpringValidatorAdapter`自定义验证器的基类并覆盖 validate() 方法：

```
public void validate(Object target, Errors errors) {
                // check JSR-303 Constraints
        super.validate(target, errors);
                // Add you custom validation here.

    } 
```

或者在您的自定义验证器中注入一个`LocalValidationFactoryBean`并在您的自定义验证之前或之后调用 validate(target, errors)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T05:23:16.410

@NotEmpty 是一个 JSR-303 注释，我们需要使用它的实现，如 HiberanteValidator，我们需要将 Hibernate-Validator jar 添加到您的 lib 目录。使用这个 jar，我们可以使用 @NotEmpty、@NotNull...所有 JSR 303 注释。

# c# - 如何确定哪个矩形相交更多 C# XNA

> ID：14817283
> 
> 赞同：0
> 
> 时间：2013-02-11T17:17:35.957
> 
> 标签：c#, xna, intersect

基本上我有一个矩形网格，每个 75x75，并排。我将一个对象放入这些矩形中，当我放置对象时，我需要找出它与 MOST 相交的矩形。

它很可能看起来像这样：

```
private Rectangle placeObject(Vector2 cursorPosition)
{
    Rectangle HolderRectangle;
    Rectangle r1 =  new Rectangle((int)cursorPosition.Position.X, (int)cursorPosition.Position.Y, 70, 70);    

    Foreach( Rectangle r in rectangles)
    {
        r2 = new Rectangle((int)r.Position.X, (int)r.Position.Y, 75,75)
        if( r1.Intersects(r2))
        {
            //Check how much it intersects
            //if it intersects more than the current holder Rectangle
            //set HolderRectangle = r2
        }
    }
    return HolderRectangle; 
} 
```

我要问的甚至可能吗？如果有怎么办？感谢所有回复=）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T17:24:50.213

如果所有矩形的大小相同，您可以只取它的中心，您要检查其交叉点的中心，测量两点之间的长度并对其他矩形执行相同的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T21:24:12.563

我相信您正在寻找的是重叠矩形的区域。

看到这个线程：

[什么是找到重叠矩形区域的有效算法](https://stackoverflow.com/questions/244452/what-is-an-efficient-algorithm-to-find-area-of-overlapping-rectangles)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T17:43:55.997

如果这只是为了放置在网格中，您当然不必遍历所有“矩形”

您知道网格组件的尺寸，在本例中为 75x75。如果您将 X 和 Y 位置除以 75，您就知道它属于哪个网格元素，如果您的相机可以滚动，则必须考虑偏移量。

考虑到您的示例仅显示了一个矩形列表，我猜您的 2D 地图实际上只是一个一维数组。您可以通过`[y * numRectsPerRow + x]`

我不知道你的项目的背景，但我猜你不想让你的网格长时间由一堆矩形表示。

# c# - 正则表达式性能下降

> ID：14817286
> 
> 赞同：6
> 
> 时间：2013-02-11T17:17:43.143
> 
> 标签：c#, regex, performance

我正在编写一个 C# 应用程序，它在很多（约 2500 万）字符串上运行多个正则表达式（约 10）。我确实尝试用谷歌搜索这个，但是任何搜索“减慢”的正则表达式都充满了关于反向引用等如何减慢正则表达式的教程。我假设这不是我的问题，因为我的正则表达式开始快而慢。

对于前一百万个左右的字符串，每 1000 个字符串大约需要 60 毫秒来运行正则表达式。到最后，它的速度减慢到大约需要 600 毫秒。有谁知道为什么？

情况更糟，但我通过使用实例`RegEx`而不是缓存版本并尽可能编译表达式来改进它。

我的一些正则表达式需要有所不同，例如取决于用户名，它可能是 `mike said (\w*)`或`john said (\w*)`

我的理解是不可能编译这些正则表达式并传入参数（例如`saidRegex.Match(inputString, userName)`）。

有没有人有什么建议？

[编辑以准确反映速度 - 每 1000 个字符串，而不是每字符串]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T23:26:19.653

这可能不是您关于 RegEx 性能下降的问题的直接答案——这有点令人着迷。但是 - 在阅读了上面的所有评论和讨论之后 - 我建议以下内容：

解析一次数据，将匹配的数据拆分到数据库表中。看起来您正在尝试捕获以下字段：

```
Player_Name | Monetary_Value 
```

如果您要创建每行包含这些值的数据库表，然后在创建时捕获每个新行 - 解析它 - 并附加到数据表 - 您可以轻松地对数据进行任何类型的分析/计算- 无需一次又一次地解析 25M 行（这是一种浪费）。

此外 - 在第一次运行时，如果您要将 25M 记录分解为 100,000 个记录块，然后运行算法 250 次（100,000 x 250 = 25,000,000） - 您可以享受您所描述的所有性能而不会减速，因为你把工作分块了。

换句话说 - 考虑以下几点：

1.  创建数据库表如下：

    ```
    CREATE TABLE PlayerActions (
        RowID          INT PRIMARY KEY IDENTITY,
        Player_Name    VARCHAR(50) NOT NULL,
        Monetary_Value MONEY       NOT NULL
    ) 
    ```

2.  创建一个算法，将 25m 行分解为 100k 块。使用 LINQ / EF5 作为假设的示例。

    ```
    public void ParseFullDataSet(IEnumerable<String> dataSource) {
        var rowCount = dataSource.Count();
        var setCount = Math.Floor(rowCount / 100000) + 1;

        if (rowCount % 100000 != 0)
            setCount++;

        for (int i = 0; i < setCount; i++) {
            var set = dataSource.Skip(i * 100000).Take(100000);
            ParseSet(set);
        }
    }

    public void ParseSet(IEnumerable<String> dataSource) {
        String playerName = String.Empty;
        decimal monetaryValue = 0.0m;

        // Assume here that the method reflects your RegEx generator.
        String regex = RegexFactory.Generate();

        for (String data in dataSource) {
            Match match = Regex.Match(data, regex);
            if (match.Success) {
                playerName = match.Groups[1].Value;

                // Might want to add error handling here.
                monetaryValue = Convert.ToDecimal(match.Groups[2].Value);

                db.PlayerActions.Add(new PlayerAction() {
                    // ID = ..., // Set at DB layer using Auto_Increment
                    Player_Name = playerName,
                    Monetary_Value = monetaryValue
                });
                db.SaveChanges();

                // If not using Entity Framework, use another method to insert
                // a row to your database table.
            }
        }
    } 
    ```

3.  运行上述一次以加载所有预先存在的数据。

4.  在某处创建一个钩子，允许您检测新行的添加。每次创建新行时，调用：

    ```
    ParseSet(new List<String>() { newValue }); 
    ```

    或者如果一次创建多个，请调用：

    ```
    ParseSet(newValues); // Where newValues is an IEnumerable<String> 
    ```

现在，您可以从数据中进行任何计算分析或数据挖掘，而不必担心超过 2500 万行的动态性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T11:48:09.777

正则表达式确实需要时间来计算。但是，U 可以使用一些技巧使其紧凑。您还可以在 C# 中使用字符串函数来避免正则表达式函数。

代码会很长，但可能会提高性能。String 有几个功能可以剪切和提取字符并根据需要进行模式匹配。例如：IndeOfAny、LastIndexOf、Contains....

```
string str= "mon";
string[] str2= new string[] {"mon","tue","wed"};

if(str2.IndexOfAny(str) >= 0)
{
  //success code//
} 
```

# python - 可以自行下载的 Python Web 应用程序

> ID：14817288
> 
> 赞同：1
> 
> 时间：2013-02-11T17:17:43.413
> 
> 标签：python, setuptools

我正在编写一个小型网络应用程序，我想包含下载自身的能力。理想的解决方案是让用户能够“pip install”整个应用程序，但应用程序的用户将能够下载它的一个版本以供自己使用（可能功能减少或没有一些不太重要的依赖项） .

我目前正在使用 Bottle，因为我想让一切都尽可能接近标准库。用户可能使用不同的平台或 Python 版本，这是尽量减少使用额外模块的其他原因。（尽管我假设无论平台如何，都将使用 2.7 或 3.3）。

我目前的想法是使用应用程序`__file__`或类似的应用程序并自行压缩。它还可以使用 setuptools/distribute 并`sdist`自行调用。然后，用户可以执行 zip 文件，或使用源代码分发安装应用程序。（理想情况下，我想提供这两个选项）。

该应用程序将包括积极的导入检查以回退到可用模块，Bottle 是唯一的要求（并将包含在下载的文件中）。

谁能想到提供此功能的强大方法？

更新：无法保证该应用程序的用户始终可以访问互联网，因此需要能够从以前安装该应用程序的人那里下载该应用程序的版本。也不能假设有 Python 经验，因此让用户运行`python -m myApp.zip`以运行他们自己的版本的想法。

更新二：由于 python 体验的水平也无法保证，我希望用户以最简单的方式获得应用程序的大部分工作版本。然后，有经验的用户可以通过安装他们自己选择的附加模块来自由“升级”应用程序。其中绝大多数将是从（CherryPy、Twisted 等）托管应用程序的不同服务器，因此严格来说不会被视为依赖项，而是“很高兴拥有”。

更新三：根据下面的答案，我将研究基于 PyPI/buildout 的解决方案，但仍然对上述方法是否有特定的解决方案感兴趣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T17:20:23.717

只需打包您的应用程序并将其放在 PyPI 上。试图自动打包服务器上运行的代码似乎是过度设计的。然后你可以让人们使用 pip 来安装你的应用程序。在您的应用程序中，提供指向 PyPI 页面的链接。

然后你也可以在 setup.py 中添加依赖，pip 会为你安装。您似乎正在尝试构建自己的打包基础架构，但并非必须这样做。使用现有的东西。

# javascript - 如何获取价格 x 和 y 之间的条目？

> ID：14817289
> 
> 赞同：0
> 
> 时间：2013-02-11T17:17:43.930
> 
> 标签：javascript, jquery, jquery-ui, underscore.js

我使用当前 jquery ui 滑块的范围：http: [//jqueryui.com/slider/#range](http://jqueryui.com/slider/#range)

和 underscore.js [http://underscorejs.org/](http://underscorejs.org/)

因此，在用户停止滑动到某个功能后，我发送了一个最小值和一个最大值：

```
currentSlide:function(){
    $('#slider').slider({
        range: true,
        min: min,
        max: max,
        values: [ vmin, vmax ],
        stop:$.proxy(this.afterSlide,this)
    });
},

afterSlide:function(event, ui) {
    console.log(ui.values[0]);
}, 
```

在 afterSlide 函数中，我正确地得到了最小值/最大值，但我不知道如何使用 underscore.js 来获取所有价格从这个最小值开始到最大值结束的条目。

示例数组：

```
var sample = {
    "response": {
        "things": [{
            "index": 0,
            "price": "10"
        },{
            "index": 1,
            "price": "15"
        },{
            "index": 2,
            "price": "60"
        },{
            "index": 3,
            "price": "10"
        },{
            "index": 4,
            "price": "100"
        }
        ]
    }
}; 
```

在我使用 Slider 之后，我得到了 min/max [12,61] 所以我想查看所有条目仅以 12 到 61 $ 之间的价格开始

```
var result = _.find(sample.response.things, min/max);?? 
```

我不正确理解 _.range() 函数以按我的需要使用它，或者使用.where */* .find() 函数创建正确的语句。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T17:23:23.130

我只是得到最大值和最小值，因为这看起来很简单，我只是迭代对象并检查相关值是否在范围内，并将其添加到一个新对象中，实际上不需要 _underscore，比如这个：

```
afterSlide:function(event, ui) {
   var min = ui.values[0],
       max = ui.values[1],
     items = {};

    $.each(sample.response.things[0], function(key, val) {
        if (val.price > min && val.price < max) {
            items[val.index] = val.price;
        }
    })
}, 
```

# python - 多个用户使用 python CGI 进行表单提交

> ID：14817290
> 
> 赞同：0
> 
> 时间：2013-02-11T17:17:45.260
> 
> 标签：python, cgi

我在 python 中有一个简单的 cgi 脚本，从通过 post 提交的表单字段中收集一个值。收集后，我将这些值转储到单个文本文件中。

现在，当多个用户同时提交时，我们该如何处理呢？

在 C\C++ 中，我们使用 semaphore\mutex\rwlocks 等？我们在 python 中有类似的东西吗？此外，对于每个用户请求，多次打开和关闭文件似乎不是一个好主意。

我们有我们产品的 C\C++ 代码库。我被要求为一些报告目的编写一个简单的 cgi 脚本，并且正在使用 python 和 cgi 进行谷歌搜索。

请告诉我。

谢谢！桑托什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:21:35.157

您可以使用许多基于 python 的服务器。这是一个：

[扭曲的](http://twistedmatrix.com/trac/)

> Twisted 是一个事件驱动的网络引擎，用 Python 编写并在开源下获得许可

```
from twisted.internet import protocol, reactor

class Echo(protocol.Protocol):
    def dataReceived(self, data):
        self.transport.write(data)

class EchoFactory(protocol.Factory):
    def buildProtocol(self, addr):
        return Echo()

reactor.listenTCP(1234, EchoFactory())
reactor.run() 
```

您可能希望将值放入数据库而不是文本文件。

但是线程是可用的，因此您可以使用它`lock()`来确保一次只有一个用户写入文件。

[http://effbot.org/zone/thread-synchronization.htm](http://effbot.org/zone/thread-synchronization.htm)

> 锁通常用于同步对共享资源的访问。对于每个共享资源，创建一个 Lock 对象。当需要访问资源时，调用acquire来持有锁（这会等待锁被释放，如果需要的话），然后调用release来释放它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T17:21:19.977

如果您担心多个用户，并考虑像互斥锁或信号量这样的复杂解决方案，您应该首先问自己为什么打算使用不合适的解决方案，如 CGI 和文本文件。您通过这样做节省的任何复杂性都将超过您为允许多个用户而设置的任何内容。

正确的做法是编写一个简单的 WSGI 应用程序——可能使用 Flask 之类的东西——它写入数据库，而不是文本文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T17:44:16.623

简单（而缓慢的方法）是获取文件上的锁（在 C 语言中你会使用flock），在其上写入并关闭它。如果您认为这可能是一个瓶颈，那么请使用数据库或类似的东西。

# android - 如何使用手指 ontouch 事件 android 为按钮设置动画？

> ID：14817292
> 
> 赞同：2
> 
> 时间：2013-02-11T17:17:56.377
> 
> 标签：android, animation, button

我想用手指在屏幕上移动一个按钮。但我找不到任何关于手指运动动画的帮助。我做了一个假电话应用程序，我想在其中进行如下图所示的来电布局。我如何在android中制作接收或拒绝按钮：

![在此处输入图像描述](../Images/405916c72d9edd87157bdd2f2187a8df.png)

我可以为这个动画使用触摸事件吗？

```
 if (event.getAction()==MotionEvent.ACTION_MOVE) {

                  x=event.getX();
                  RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(300, 60);
                  params.leftMargin = (int)x;

                  btnDeclinecall.setLayoutParams(params);

                           }

                return false;
            } 
```

我使用上面的代码，但它对我不起作用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T06:15:14.947

请参阅[Android 的 LockScreen Slider中的代码](http://grepcode.com/file_/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/com/android/internal/widget/SlidingTab.java/?v=source)

仅供参考：这不是我的代码，它来自 android froyo 源代码。我还使用上面位置的代码在我的应用程序中创建了滑块，但那是右滑块，所以我不能发布该代码，因为你需要左滑块。

所以只需从上面的链接复制左滑块部分并在不了解的情况下使用它。

`Note:`

上面的链接包含滑块的最佳和优化代码（但它包含左右滑块）。

所以不要在其他地方浪费时间，开始时可能看起来有点困难，但相信我，试着理解`private Slider mLeftSlider;`上面链接中的用法，这将引导你到达目的地。

# javascript - 文档片段和附加子项

> ID：14817294
> 
> 赞同：0
> 
> 时间：2013-02-11T17:18:00.617
> 
> 标签：javascript, dom, fragment, children

我是文档片段概念的新手，目前在弄清楚如何将子项附加到片段时遇到了一些麻烦。

这是我的html

```
<form>
  <ul id="tweets">
    <li><img src="tweetIcon.jpg"><span>This is my tweet</span></li>
  </ul>
</form> 
```

下面是我的脚本：

```
var tweets = [
    "When teaching math, it shouldn't just be: 'Answer this question:'. It should also be:      'Question this answer:'",
    "Another reason to choose ",
    " Excellent! I love the new APIs that came with it, as well as the new tags and attributes.",
    "That's great. I am really grateful for your program and will definitely continue to encourage folks to enroll in courses!"
    ];

  function init() {
  var ul = document.getElementById("tweets");
  var fragment = document.createDocumentFragment();
  for (var i = 0; i < tweets.length; i++) {
    var tweet = tweets[i];
    var li = document.createElement("li");
    var span = document.createElement("span");
    span.innerHTML = tweet;
    var img = document.createElement("img");
    img.setAttribute("src", "tweetIcon.jpg");
    li.appendChild(span);
    ul.appendChild(li);
    fragment.appendChild(img);
    fragment.appendChild(li);
    }
    ul.appendChild(fragment);
  } 
```

现在我只在列表顶部看到一次 img 和 span 元素。以下是正确显示为列表的推文的所有字符串。我需要将图像和 span 元素添加到每条推文。被注释掉的三行是我试图将图像添加到每个 li 元素作为孩子的地方，但这些行并没有真正做任何事情。有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T17:21:35.913

移动`document.createElement("img")`循环内部，否则您将重复移动和更改同一个图像对象。

# c# - 从 OpenGL 纹理中的矩形读取像素

> ID：14817296
> 
> 赞同：1
> 
> 时间：2013-02-11T17:18:03.680
> 
> 标签：c#, opengl, opentk

我知道`glGetTexImage`OpenGL 函数允许从整个纹理中读取像素。是否有一个OpenGL函数可以做同样的事情但允许传递一个矩形来限制读取的像素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T05:11:58.907

这是我最终在 OpenTK 中完成的方式（应该很容易转换为 C++ 或其他支持 OpenGL / OpenGL ES 的语言）：

```
public Bitmap GetBitmap()
{
    int fboId;
    GL.Ext.GenFramebuffers(1, out fboId);
    CheckGLError();
    GL.Ext.BindFramebuffer(FramebufferTarget.FramebufferExt, fboId);
    CheckGLError();
    GL.Ext.FramebufferTexture2D(FramebufferTarget.FramebufferExt, FramebufferAttachment.ColorAttachment0Ext, TextureTarget.Texture2D, TextureId, 0);
    CheckGLError();

    Bitmap b = new Bitmap(Width, Height);
    var bits = b.LockBits(new Rectangle(0, 0, Width, Height), ImageLockMode.WriteOnly, System.Drawing.Imaging.PixelFormat.Format32bppArgb);
    GL.ReadPixels(Rect.Left, Rect.Top, Width, Height, OpenTK.Graphics.OpenGL.PixelFormat.Bgra, PixelType.UnsignedByte, bits.Scan0);
    GL.Ext.BindFramebuffer(FramebufferTarget.FramebufferExt, 0);
    GL.Ext.DeleteFramebuffers(1, ref fboId);
    b.UnlockBits(bits);

    return b;
} 
```

# javascript - XMLHttpRequest 无法加载 *…* Origin : * 不允许 Access-Control-Allow-Origin - 在同一台服务器上

> ID：14817299
> 
> 赞同：0
> 
> 时间：2013-02-11T17:18:10.533
> 
> 标签：javascript, ajax

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T17:50:34.630

原点由以下因素确定：

*   协议
*   港口
*   主机名

这三个必须相同。

页面所在的服务器不相关（除了很少有两个不同服务器上的两个 URL 将共享相同的主机名）。

请注意，`example.com`和`www.example.com`是不同的主机名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T17:28:14.850

这两个页面在同一台服务器上的事实并不重要，它必须在同一个域上。

要绕过此限制，您必须在来自服务器的响应中设置标头“Access-Control-Allow-Origin”，其值为“*”（小心，它允许所有）或特定域名“ [http://myDomain .com](http://myDomain.com) ”。

我希望这有帮助。

# c# - 将派生类列表转换为基类列表仍然返回派生类的对象

> ID：14817306
> 
> 赞同：4
> 
> 时间：2013-02-11T17:18:24.117
> 
> 标签：c#, derived-class, base-class

我有以下代码：

```
public class BaseClass
{
    public string A { get; set; }
}

public class DerivedClass : BaseClass
{
    public string B { get; set; }
}

List<DerivedClass> _derivedClass = new List<DerivedClass>() 
                                       { 
                                           new DerivedClass() 
                                             { A = "test1",
                                               B = "test2"
                                             }
                                       }; 

List<BaseClass> _baseClass = _derivedClass.Cast<BaseClass>.ToList(); 
```

代码编译没有任何错误，但是，我希望`_baseClass`只包含属性`A`（类型的对象`BaseClass`），但它同时返回`A`和`B`属性（类型的对象`DerivedClass`）。我缺少什么以及将派生类列表转换为其基类列表的正确方法是什么？

谢谢你。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-11T17:21:29.213

> 我缺少什么以及将派生类列表转换为其基类列表的正确方法是什么？

该列表仍然包含 的实例`DerivedClass`，但它们被用作对 的引用`BaseClass`。

但是，此 API 的任何使用者都不会知道这一点，因此他们会将其视为`BaseClass`元素。

这是常见的，通常是正确的方法。如果您需要将实例实际*转换*为`BaseClass`实例（这可能不是必需的），则需要实际`BaseClass`从`DerivedClass`成员中创建新实例，即：

```
List<BaseClass> _baseClass = _derivedClass.Select(dc => new BaseClass {A = dc.A}).ToList(); 
```

这通常不是必需的，您当前的方法可能很好。[Liskov 替换原则](http://en.wikipedia.org/wiki/Liskov_substitution_principle)指出 any应该在任何情况下`DerivedClass`都可以用作 a `BaseClass`，这意味着只需像您一样返回列表就可以了。

# java - 如何避免来自 HttpURLConnection 的空 HTTP 响应出现 EOFException？

> ID：14817310
> 
> 赞同：1
> 
> 时间：2013-02-11T17:18:30.443
> 
> 标签：java, http, exception, inputstream, httpurlconnection

我正在向服务器发送一个 HTTP 请求，该请求合法地返回一个 HTTP 响应代码 = 200（OK）的空白响应。

但这会导致下面的标记行抛出一个`EOFException`：

```
InputStream responseStream = httpURLConnection.getInputStream();
final String contentEncoding = this.connection.getContentEncoding();
if ("gzip".equalsIgnoreCase(contentEncoding)) {
    responseStream = new GZIPInputStream(responseStream); // throws EOFException
} 
```

可能有一种明显的方法可以防止这种情况，但我找不到。我是否应该在创建 GZIPInputStream 之前`connection.getContentLength() > 0`或之前进行检查？`responseStream.available() > 0`这些似乎都不对，我在示例代码片段中没有遇到任何类似的东西......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T17:36:49.917

> 我是否应该检查类似 connection.getContentLength() > 0

是的。

> 或 responseStream.available() > 0

当然不。available() == 0 不是 EOF 的有效测试，Javadoc 明确说明了这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T17:31:11.857

我从您的问题中了解到，每次您`200`从服务器收到响应时，都会始终抛出此异常。

如果`responseStream.available() > 0`不是选项，则表示流实际上包含某些内容，但该流似乎不完整或以任何其他方式过早结束，因为`available`表明流中有可读字节。

* * *

*更新*

根据您的评论（并且`InputStream`出于纯粹的好奇心再次阅读 's 文档后），我也相信`connection.getContentLength() > 0`这是要走的路。如果您使用的是 Java 7，`connection.getContentLengthLong()`则较难使用，因为它`long`直接返回 a。

鉴于文档所说的[`InputStream#available`](http://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html#available%28%29)：

> InputStream 类的可用方法总是返回 0。

和

> 请注意，虽然 InputStream 的某些实现会返回流中的字节总数，但许多不会。使用此方法的返回值来分配旨在保存此流中所有数据的缓冲区是不正确的。

这将放弃该检查作为选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T17:28:09.360

您的服务器不应该返回 HTTP 代码 204（无内容）而不是 200 吗？除了 HEAD 请求之外。请参阅[Http 状态码定义](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)

除此之外，您确实可以检查以解决看起来不太兼容的服务器实现，或者捕获异常，然后根据您发送的请求类型确定正确的操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-09T16:25:37.883

除非我遗漏了某些东西，否则根据定义，内容编码“gzip”的响应不能为空。

# database - 跨多个服务器使用 Git 时处理 Drupal settings.php 文件

> ID：14817316
> 
> 赞同：0
> 
> 时间：2013-02-11T17:18:51.267
> 
> 标签：database, git, drupal, drupal-6, settings

我们的许多网站都使用 Drupal 6。我们正在将它们全部移入 Git 以进行版本控制。每个站点将有一个开发服务器、一个测试服务器和一个实时服务器。我想知道处理 settings.php 文件的最佳实践，因为数据库连接信息在服务器之间显然会有所不同。我见过从 switch 语句到包含文件的各种解决方案。此处说明的包含文件解决方案[http://drupaldork.com/2011/11/local-settings-development-sites](http://drupaldork.com/2011/11/local-settings-development-sites)似乎是一个很好的解决方案，但我想知道你最终在 ACTUAL settings.php 文件中留下了什么。换句话说，如果每个服务器都有一个“本地”设置文件，如 settings.local.php，其中包含该特定服务器的连接信息，您是否从真正的根 settings.php 中删除连接信息？还是你离开它？如果你离开它，你放在那里的是什么？这是否重要，因为它最终会被本地设置文件覆盖？主根 settings.php 中的连接信息应该是某种默认连接信息吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T18:27:39.620

其中一种方法，我宁愿不要将 settings.php 保留在 Git 中。 [https://help.github.com/articles/ignoring-files](https://help.github.com/articles/ignoring-files)

在我们的例子中，我们将代码库保存在 Git 下，但 settings.php 文件被忽略。这样 Prod、Sandbox 和本地环境将拥有自己的 settings.php 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T18:57:37.397

我们在 repo 中保留了 2 个 settings.php 文件，但不包含基本的 settings.php。

我用于生产的 settings.php 文件正常。只是数据库设置和默认的东西。对于开发，我的 settings.php 文件包含数据库设置和包含到存储在名为 settings.dev.php 的 repo 中的文件。

```
# Additional site configuration settings.
if (file_exists('/Users/User/Sites/site.com/sites/default/settings.dev.php')) {
  include_once('/Users/User/Sites/site.com/sites/default/settings.dev.php');
} 
```

Settings.dev.php 包括关闭缓存和设置环境指示器的开关：

```
// Secure Pages
$conf['securepages_enable'] = FALSE;

// Environment Indicator
$conf['environment_indicator_color'] = 'blue';
$conf['environment_indicator_enabled'] = TRUE;
$conf['environment_indicator_text'] = 'Development Server';

// Robots disable
$conf['robotstxt'] = 'User-agent: *
Disallow: /';

// Turn off Caching and such
$conf['cache'] = FALSE;
$conf['page_compression'] = FALSE;
$conf['preprocess_css'] = FALSE;
$conf['css_gzip'] = FALSE;
$conf['preprocess_js'] = FALSE;
$conf['javascript_aggregator_gzip'] = FALSE; 
```

在 repo 中忽略了 Settings.php，但包含了 settings.dev.php。我们还在 repo 中保留了一个 settings.stage.php。在 settings.php 文件中为 prod 设置值需要非常小心，因为它会干扰某些模块并阻止您在需要时快速更改设置。但是你可以用 settings.prod.php 做同样的事情。

# asp.net - 测试已发布的 Silverlight 应用程序时无法登录

> ID：14817323
> 
> 赞同：0
> 
> 时间：2013-02-11T17:19:15.137
> 
> 标签：asp.net, authentication, iis-7.5, silverlight-5.0

我创建了一个 Silverlight 业务应用程序并发布了它。

当我从 Internet Explorer 测试它时，它运行正常，但我无法使用 Silverlight 业务应用程序模板附带的预构建登录界面登录。

我在项目中包含了 ASPNETDB.mdf，因为发布时它没有在 iis 中生成（我从[http://sladapter.blogspot.com/2011/02/steps-to-deploy-silverlight-business.html](http://sladapter.blogspot.com/2011/02/steps-to-deploy-silverlight-business.html)得到这个想法)

我在查询登录时加载操作失败，但现在我收到此错误：

**使用默认的“MembershipProvider”时出错。确保它配置良好。由于模拟客户端失败，无法生成 SQL Server 的用户实例。连接将被关闭。Mensaje de InnerException：由于模拟客户端失败，无法生成 SQL Server 的用户实例。连接将被关闭。**

我没有篡改 Web.config，我只是创建应用程序、构建、发布等。我希望所有这些配置都是自动完成的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T12:43:31.327

1.  转到 SQL 配置管理器 > 使进程状态为正在运行。

2.  现在在 IIS7 中，单击`Application pools`> 如果它是默认池，则创建其他`new Application Pool`池并保持身份`LOCAL SYSTEM`而不是内置系统。

3.  查看您是否在自己创建的池而不是默认池上运行，是否在本地系统而不是内置池中运行。

看看有没有效果！！

# algorithm - 查找文本重复项 - 易于实现

> ID：14817324
> 
> 赞同：1
> 
> 时间：2013-02-11T17:19:17.480
> 
> 标签：algorithm, text, duplicates

我正在寻找一些易于实现的算法来查找我的 cms 中的重复文本。实际上，我正在将文本保存到删除空格的额外列中，并将所有字符设为小写，因此如果它们的空格和字母大小写不同，我可以找到重复项，但这还不够。

我如何处理两个文本相差几个字符并且我还希望它们被识别为重复的情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T19:40:39.237

解决此问题的简单方法是使用 Soundex 检查。您将每个单词转换为其 Soundex 等效项，消除小单词，如果记录相同，则匹配。粗鲁，但有效。

# django - 基于类的通用视图额外上下文

> ID：14817326
> 
> 赞同：14
> 
> 时间：2013-02-11T17:19:20.340
> 
> 标签：django

在基于类的视图之前，有一个可以在 urlsconf 中传递的 extra_context 关键字。 [https://docs.djangoproject.com/en/1.3/topics/generic-views/#adding-extra-context](https://docs.djangoproject.com/en/1.3/topics/generic-views/#adding-extra-context)

现在使用基于类的通用视图，如果我们想做同样的事情，我们必须子类化通用视图 [https://docs.djangoproject.com/en/1.3/topics/class-based-views/#adding-extra-context](https://docs.djangoproject.com/en/1.3/topics/class-based-views/#adding-extra-context)

如果我们想要一些简单的东西，我们正在使用通用的 CreateView 和 UpdateView。这种方法将强制对以前微不足道的东西进行子类化。更重要的是，我们必须打破 DRY 原则，做两次。

为什么会这样？为什么我们不能将额外的上下文直接传递给模板有什么原因吗？

谢谢

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-12T16:36:44.683

经过太多思考，唯一的答案是否定的，该功能已被删除。

并且文档没有提到“已删除的功能”，也没有解释为什么会这样。

但是为了让我的生活更轻松，我接受了@aidan 的建议并进行了一些修改

```
class ExtraContext(object):
    extra_context = {}

    def get_context_data(self, **kwargs):
        context = super(ExtraContext, self).get_context_data(**kwargs)
        context.update(self.extra_context)
        return context

class ExtraListView(ExtraContext, ListView):
    pass

class ExtraDetailView(ExtraContext, DetailView):
    pass

class ExtraUpdateView(ExtraContext, UpdateView):
    pass

class ExtraCreateView(ExtraContext, CreateView):
    pass 

class ExtraDeleteView(ExtraContext, DeleteView):
    pass

class ExtraCloneView(ExtraUpdateView):
    def post(self, request, *args, **kwargs):
       return ExtraCreateView.as_view(model=self.model,
                              template_name=self.template_name,
                              extra_context=self.extra_context)(request, *args, **kwargs) 
```

现在我有了可以直接在 URLSconf 中使用的半通用视图，并将 extra_context 字典传递给 as_view() 调用

```
url(r'^camera/(?P<pk>\d+)/$', 
    views.ExtraDetailView.as_view(model=models.Camera,
                               extra_context={'action_type': 'detail', 'mod_name' : 'camera'},
                               template_name='cameras/camera_detail.html'), 
    name='camera_detail'), 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-02-11T18:02:09.643

我想这不是那么简单，但它仍然只有 5 行代码 -

```
class MyView(CreateView):
    def get_context_data(self, *args, **kwargs):
        context = super(MyView, self).get_context_data(*args, **kwargs)
        context['my_additional_context'] = my_object
        return context 
```

如果你真的想要基于类的视图的功能，那么也许你可以扩展类来添加它 -

```
class MyCreateView(CreateView)
    additional_context = {}
    def get_context_data(self, *args, **kwargs):
        context = super(MyView, self).get_context_data(*args, **kwargs)
        context.append(self.additional_context)
        return context 
```

然后在您的 url_conf 中使用它 -

```
urlpatterns = patterns('',
    #....
    (r'^my_url/$', MyCreateView.as_view(additional_context={'my_addional_context': my_object})),
) 
```

您可以编写自己的 CreateView、DetailView、ListView 等并将它们导入到您所做的每个项目中。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-02-16T02:40:28.133

阅读上述答案，似乎这种方法在解决问题的同时，本质上是一种恢复旧功能的技巧。稍微用谷歌搜索一下，出现了[通用的基于类的视图页面](https://docs.djangoproject.com/en/1.7/topics/class-based-views/generic-display/#adding-extra-context)，其中包含一个标题为“[添加额外上下文](https://docs.djangoproject.com/en/1.7/topics/class-based-views/generic-display/#adding-extra-context)”的部分。在这里总结一下，解决方案只是实现您自己的版本，`get_context_data()`其中包含您要传递给模板的变量：

```
from django.views.generic import DetailView
from books.models import Publisher, Book

class PublisherDetail(DetailView):

    model = Publisher

    def get_context_data(self, **kwargs):
        # Call the base implementation first to get a context
        context = super(PublisherDetail, self).get_context_data(**kwargs)
        # Add in a QuerySet of all the books
        context['book_list'] = Book.objects.all()
        return context 
```

这里最大的好处是你不需要“破解”`urls.py`来包含各种上下文参数，你可以利用基于类的视图提供的所有功能，同时仍然提供自定义的上下文内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-07-28T21:28:14.807

只需使用`extra_context`，这是在 2017 年添加的（[https://github.com/django/django/pull/8671](https://github.com/django/django/pull/8671)）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-12T16:06:51.160

完全归功于 mogga 对已接受答案的评论：

> 2.0 带回了 extra_context docs.djangoproject.com/en/2.1/ref/class-based-views/… – mogga

所以获得它的方法是升级到 2.X，如果你还没有的话。

# charts - Google 图表工具提示仅适用于没有工具提示的第一行

> ID：14817330
> 
> 赞同：2
> 
> 时间：2013-02-11T17:19:39.033
> 
> 标签：charts, google-visualization

我正在尝试在谷歌条形图中使用工具提示，并且遇到了一个奇怪的问题，我的工具提示仅在我的数据表的第一行没有工具提示时才有效。

当我这样做时，图表不会呈现：

```
function drawVisualization() {
  // Create and populate the data table.
    var data = google.visualization.arrayToDataTable([
    ['Report','Ineffective', 'Developing', 'Effective', 'Highly Effective'],
    ['Growth Rating',{v:18, f:'tooltip text'},{v:12, f:'tooltip text'},{v:66, f:'tooltip text'},{v:4, f:'tooltip text'}],
    ['Composite Rating',{v:6, f:'tooltip text'},{v:12, f:'tooltip text'},{v:58, f:'tooltip text'},{v:25, f:'tooltip text'}]
  ]);

  // Create and draw the visualization.
     new google.visualization.BarChart(document.getElementById('chart_div')).
      draw(data,
       {title:"TITLE",
        colors: ['#638FBC','#FFE17C','#FFA87C','#204C7A'],
        hAxis: {title: "Percent of Educators", viewWindow:{max:105, min:0}, titleTextStyle: {italic: false}},
        chartArea: {width: "60%"},
       isStacked: true}
      );
} 
```

但如果我这样做，图表会很好

```
function drawVisualization() {
  // Create and populate the data table.
    var data = google.visualization.arrayToDataTable([
    ['Report','Ineffective', 'Developing', 'Effective', 'Highly Effective'],
    ['Empty', 0 ,   0 , 0   , 0   ],
    ['Growth Rating',{v:18, f:'tooltip text'},{v:12, f:'tooltip text'},{v:66, f:'tooltip text'},{v:4, f:'tooltip text'}],
    ['Composite Rating',{v:6, f:'tooltip text'},{v:12, f:'tooltip text'},{v:58, f:'tooltip text'},{v:25, f:'tooltip text'}]
  ]);

  // Create and draw the visualization.
     new google.visualization.BarChart(document.getElementById('chart_div')).
      draw(data,
       {title:"TITLE",
        colors: ['#638FBC','#FFE17C','#FFA87C','#204C7A'],
        hAxis: {title: "Percent of Educators", viewWindow:{max:105, min:0}, titleTextStyle: {italic: false}},
        chartArea: {width: "60%"},
       isStacked: true}
      ); 
```

我不知道为什么添加额外的行使它起作用。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-26T16:21:40.597

这是因为目前对 arrayToDataTable 中的 {v:,f:} 单元格的支持有点参差不齐。我们将在库的下一版本中发布对此的修复。同时，您可以像这样使用 google.visualization.DataTable 构造函数：

```
var data = new google.visualization.DataTable();
data.addColumn('string', 'Report');
data.addColumn('string', 'Developing');
data.addColumn('string', 'Effective');
data.addColumn('string', 'Highly Effective');
data.addRows([
  ['Growth Rating',{v:18, f:'tooltip text'},{v:12, f:'tooltip text'},{v:66, f:'tooltip text'},{v:4, f:'tooltip text'}],
  ['Composite Rating',{v:6, f:'tooltip text'},{v:12, f:'tooltip text'},{v:58, f:'tooltip text'},{v:25, f:'tooltip text'}]
]); 
```

# sql - 如何在同一个表中制作关系记录的副本？

> ID：14817331
> 
> 赞同：2
> 
> 时间：2013-02-11T17:19:42.010
> 
> 标签：sql, sql-server, tsql, relationship

我有三个相关的表 -**用户**有**组**，组有**项目**：

```
Id   UserName
1    Joe
2    Fred

Id   GroupName    UserId
1    TestGr1      1
2    TestGr2      1

Id   ItemName     GroupId   UserId
1    Item1        1         1
2    Item2        1         1
3    Item3        2         1
4    Item4        2         1 
```

我想给 Fred Joe 所拥有的一切，即复制 Groups 和 Items 中的所有相关数据。

我已经复制了组：

```
insert into Groups
select [GroupName], 2
from Groups
where UserId = 1 
```

我该如何处理物品？

**更新**
这就是我最终想要的：

```
Id   UserName
1    Joe
2    Fred

Id   GroupName    UserId
1    TestGr1      1
2    TestGr2      1
3    TestGr1      2
4    TestGr2      2

Id   ItemName     GroupId   UserId
1    Item1        1         1
2    Item2        1         1
3    Item3        2         1
4    Item4        2         1
5    Item1        3         2
6    Item2        3         2
7    Item3        4         2
8    Item4        4         2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T17:44:30.503

我想这可能对你有用....

```
--create variables to store the new users
declare @user_from int,
    @user_to int

set @user_from = 1
set @user_to = 2

--insert the new groups
insert into Groups (GroupName, UserId)
select GroupName, @user_to
from Groups
where UserId = @user_from

--insert the item values matching on the group names but using the new groups
insert into Items (ItemName,GroupId,UserId)
select i.ItemName, g2.Id, @user_to
from Items i
inner join Groups g on g.Id = i.GroupId
inner join Groups g2 on g2.GroupName = g.GroupName
                 and g2.UserId = @user_to
where i.UserId = @user_from 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T17:56:16.250

这是另一个版本

```
--insert items
insert into Groups      
select [GroupName], 2
from Groups
where UserId = 1

--insert groups
DECLARE @tblGroups Table(
NewGroupId int not null, 
OldGroupId int not null)
insert into @tblGroups
select ng.id, og.id
from Groups ng, groups og
where ng.groupname = og.groupname 
AND UserId = 1

insert into items
select i.itemname, t.newgroupid, 2
from items i, @tblgroups t
where t.oldgroupid = i.groupid 
and  i.userid = 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T19:09:31.300

我一直打算一起练习合并语句和输出语句。用您的表名替换所有临时表信息。我将@OldUserID 和@NewUserID 抽象出来，以便可以轻松地将其编写为存储过程。

干杯!

**声明：**

```
DECLARE @TempUsers TABLE (ID INT PRIMARY KEY NOT NULL IDENTITY(1,1),UserName VARCHAR(25));
DECLARE @TempGroups TABLE (ID INT PRIMARY KEY NOT NULL IDENTITY(1,1), GroupName VARCHAR(25),UserID INT);
DECLARE @TempItems TABLE (ID INT PRIMARY KEY NOT NULL IDENTITY(1,1),ItemName VARCHAR(25),GroupID INT, UserID INT);

INSERT INTO @TempUsers SELECT 'Joe' UNION SELECT 'Fred';
INSERT INTO @TempGroups SELECT 'TestGr1',1 UNION SELECT 'TestGr2',1;
INSERT INTO @TempItems SELECT 'Item1',1,1 UNION SELECT 'Item2',1,1;
INSERT INTO @TempItems SELECT 'Item3',2,1 UNION SELECT 'Item4',2,1;

SELECT 'OldUsers' AS TableName,* FROM @TempUsers
SELECT 'OldGroups' AS TableName,* FROM @TempGroups
SELECT 'OldItems' AS TableName,* FROM @TempItems

DECLARE @TempCorrelationTable TABLE (OldID INT, [NewID] INT);
DECLARE @OldUserID INT = 1;
DECLARE @NewUserID INT = 2; 
```

**解决方案：**

```
MERGE INTO @TempGroups AS T
USING (SELECT ID,GroupName FROM @TempGroups) AS S
ON 1=2
WHEN NOT MATCHED BY TARGET THEN INSERT VALUES (GroupName,@NewUserID)
OUTPUT S.ID, INSERTED.ID INTO @TempCorrelationTable;

MERGE INTO @TempItems AS T
USING (SELECT ItemName,[NewID] FROM @TempItems AS TI INNER JOIN @TempCorrelationTable AS TC ON (TI.GroupID = TC.OldID)) AS S
ON 1=2
WHEN NOT MATCHED BY TARGET THEN INSERT VALUES (ItemName,[NewID],@NewUserID); 
```

**结果：**

```
SELECT 'NewUsers' AS TableName,* FROM @TempUsers
SELECT 'NewGroups' AS TableName,* FROM @TempGroups
SELECT 'NewItems' AS TableName,* FROM @TempItems 
```

# javascript - 奇怪的（对我来说）编写 script.js/jquery 文件的方式

> ID：14817334
> 
> 赞同：3
> 
> 时间：2013-02-11T17:20:04.350
> 
> 标签：javascript, jquery

我被要求向这个文件添加一些新的 jQuery 功能，尽管我从来没有以这种方式编写过任何 jQuery（似乎是在一个名为“companyname”的变量下编写的函数负载）。所以目前我需要在这个文件中编辑一些新的 jQuery，它似乎是“菜单：”函数，它可以在接近结尾的代码的 JavaScript 部分中找到。所以我的问题是，这种 jQuery 的写作风格叫什么？是否有可能不向其中添加新部分。例如称为'newcode：'？或者你我需要做一些特别的事情来为这个庞大的变量添加代码吗？即使有人可以给我这个类型的名字，如果代码我可以寻找一些关于它的教程。

此外，我包含的另一段代码直接出现在主页上的 head 标记和脚本标记中，并且似乎直接调用菜单功能。为什么不需要在 head 标签中调用其他函数（我认为还有一个）可以在其他地方调用它们，比如在 A 标签或其他地方吗？

谢谢大家的阅读。

丹尼尔。

Ps 'init :' 似乎包含在所有/大多数功能中，这是为什么呢？它是干什么用的？

```
head.ready("main", function() {
    setTimeout(function () {//FF 3.6 Fix
        sonypro.menu.init();
    }, 500);
});

// JavaScript Document
(function( $ ){

var companyname =  {

    helper : {
        maxHeight : function(o) {

            var max = 0;

            $(o).each(function() {
                if (max < $(this).outerHeight()) {
                    max = $(this).outerHeight(true);
                }
            }); 

            return max;
        },
        maxValue: function(array){

            return Math.max.apply(Math,array);

        },
        isEmpty : function(o) {

            // For checking if a string is blank, null or undefined
            return (!o || /^\s*$/.test(o));

        },
        createElement : {
            script : function(source) {
                var script = document.createElement('script');
                script.type = 'text/javascript';
                script.src = source;
                document.body.appendChild(script);
            }
        }
    },

    article: {
        margin_fix: function() {
            if ($('.pge-article-detail').index()!=-1)
                $('.lte-ie8 .article-section p').css('margin-bottom',0);
        }
    },

    product: {
        slider : {
            init : function(options) {

                var settings = $.extend({
                    'visible' : 5,
                    'autoHeight' : false
                }, options),
                id = settings.id

                $('#'+id).jcarousel({
                    animation : 1000,
                    scroll: settings.visible,
                    initCallback: function(carousel) {
                        if(settings.autoHeight) {
                            _maxHeight = companyname.helper.maxHeight('#'+id+' > li');
                            $("#"+id+" .jcarousel-clip, #"+id+ " .jcarousel-item").css("height", _maxHeight);
                        }
                        $("#"+id).mousewheel(function(event, delta) {
                            if (delta > 0) {
                                carousel.prev();
                            }
                            else if (delta < 0) {
                                carousel.next();
                            }

                            return false; // prevent default
                        });
                    }
                });
            }
        },
        image_changer : {
            video: {
                is_set: false,
                timer: 0,
                clear_timer: function () {
                    clearTimeout(companyname.product.image_changer.video.timer);
                    companyname.product.image_changer.video.timer = 0;
                },
                play: function () {
                    companyname.product.image_changer.video.clear_timer();
                    companyname.product.image_changer.video.timer = setTimeout(function () {sublimevideo.play();},500);
                },
                pause: function () {
                    companyname.product.image_changer.video.clear_timer();
                    sublimevideo.pause();
                },
                stop: function () {
                    companyname.product.image_changer.video.clear_timer();
                    sublimevideo.stop();
                }
            },
            settings: {
                thumbs : 'a.thumbnail',
                sticky : 'div#main-visual',
                visual_wrapper_class : '.visual'
            },
            init: function(options) {
                this.settings = $.extend(this.settings,options);
                settings = this.settings,
                thumbnails = $(settings.thumbs),
                image = $(settings.image),
                visual_wrapper = $('.visual'),

                sticky = $(settings.sticky);

                thumbnails.on('mouseenter',function(){
                    var $this = $(this),
                    thumb_detail = visual_wrapper.children('.thumb-'+$this.index());
                    companyname.product.image_changer.load_img($this,thumb_detail);
                    companyname.product.image_changer.change_img(thumb_detail,true);
                    if (companyname.product.image_changer.video.is_set)
                        companyname.product.image_changer.video.pause();

                })
                .on('mouseleave',function(){
                    var $this = $(this),
                    thumb_detail = visual_wrapper.children('.thumb-'+$this.index());                        
                    companyname.product.image_changer.change_img(thumb_detail,false);
                    if (companyname.product.image_changer.video.is_set)
                        companyname.product.image_changer.video.play();
                })
                .on('focus',function(){
                    var $this = $(this),
                    thumb_detail = visual_wrapper.children('.thumb-'+$this.index());
                    companyname.product.image_changer.load_img($this,thumb_detail);
                    companyname.product.image_changer.change_img(thumb_detail,true);
                    if (companyname.product.image_changer.video.is_set)
                        companyname.product.image_changer.video.pause();
                })
                .on('blur',function(){
                    var $this = $(this),
                    thumb_detail = visual_wrapper.children('.thumb-'+$this.index());
                    companyname.product.image_changer.change_img(thumb_detail,false);
                    if (companyname.product.image_changer.video.is_set)
                        companyname.product.image_changer.video.play();
                })
                .on('click',function(e){
                    e.preventDefault();
                    if (companyname.product.image_changer.video.is_set)
                        companyname.product.image_changer.video.stop();
                    $('#image-gallery').click();
                })

            },
            change_img : function(thumb_detail,show) {
                if(show) {
                    sticky.hide();
                    thumb_detail.show();
                }
                else {
                    sticky.show();
                    thumb_detail.hide();
                }

            },
            load_img : function(thumb,thumb_detail){
                if(!thumb_detail.length) {
                    thumb_detail = $('<img />').attr({
                        'src' : thumb.attr('href'),
                        'class' : 'detail-image thumb-'+thumb.index()
                    }).appendTo(visual_wrapper);
                }
            }

        }
    },

    accordion: {
        settings : {
            'heading' : 'h1.expand-collapse-heading',
            'content' : 'div.expand-collapse-content',
            'collapsed_class' : 'collapsed',
            'collapse_toggle' : 'a#collapse-toggle',
            'accordion' : true,
            'animation' : true,
            'jScrollPane' : false
        },
        init : function(options) {
            this.settings = $.extend(this.settings,options);
            settings = this.settings,
            collapse_state = true,
            all_headings = $(settings.heading),
            all_contents = $(settings.content),
            collapse_toggle = $(settings.collapse_toggle),
            collapse_text = collapse_toggle.find('span');

            $('.lte-ie8 '+settings.heading).prepend('<div class="icon"></div>');

            if(settings.accordion) {
                collapse_toggle.hide();
            } else {
                collapse_text.eq(1).hide();
            }

            all_headings.not(':first').addClass(settings.collapsed_class);

            all_contents.not(':first').hide();

            all_headings.on('click',function(e){
                e.preventDefault();
                var $this = $(this),
                content = $this.next(settings.content),
                collapsed = settings.collapsed_class;

                if($this.hasClass(collapsed)) {
                    companyname.accordion.expand($this,content);

                    if(settings.accordion) {
                        companyname.accordion.collapse(all_headings.not($this),all_contents.not(content));
                    }
                } else {
                    companyname.accordion.collapse($this,content);
                }
                collapse_state = (all_headings.filter('.'+settings.collapsed_class).length == all_headings.length) ? companyname.accordion.collapse_toggle_state(true,collapse_text) : companyname.accordion.collapse_toggle_state(false,collapse_text);
            });

            collapse_toggle.on('click',function(e){
                e.preventDefault();
                if(collapse_state) {
                    companyname.accordion.collapse(all_headings,all_contents);

                } else {
                    companyname.accordion.expand(all_headings,all_contents);
                }

                collapse_state = companyname.accordion.collapse_toggle_state(collapse_state,collapse_text);
            });

        },
        collapse : function(heading,content) {
            if(this.settings.animation) {
                content.slideUp(function () {
                    if (companyname.accordion.settings.jScrollPane) {
                        $('.scroll-pane').data('jsp').reinitialise();
                        $(window).trigger('resize'); //webkit fix for weird behavior on scroll
                    }
                });
            }else {
                content.hide();
                if (companyname.accordion.settings.jScrollPane){
                    $('.scroll-pane').data('jsp').reinitialise();
                    $(window).trigger('resize');
                }
            } 
            heading.addClass(this.settings.collapsed_class);
        },
        expand : function(heading,content) {
            if(this.settings.animation) {
                content.slideDown(function () {
                    if (companyname.accordion.settings.jScrollPane){
                        $('.scroll-pane').data('jsp').reinitialise();
                        $(window).trigger('resize');
                    }
                });
            } else {
                content.show();
                if (companyname.accordion.settings.jScrollPane){
                    $('.scroll-pane').data('jsp').reinitialise();
                    $(window).trigger('resize');
                }
            }
            heading.removeClass(this.settings.collapsed_class);
        },
        collapse_toggle_state : function(state,collapse_text){
            collapse_text.hide();
            (state) ? collapse_text.eq(1).show() : collapse_text.eq(0).show();
            return !state;
        }
    },

    tabs : {
        settings : {
            'buttons' : 'li.tab',
            'button_area' : 'div.tab-buttons',
            'content' : 'div.tab-content',
            'selected_class' : 'selected',
            'animation' : true
        },
        init : function(options) {
            this.settings = $.extend(this.settings,options);
            var settings = this.settings,
            buttons = $(settings.button_area).find(settings.buttons),
            content = $(settings.content);
            buttons.on('click',function(e){
                e.preventDefault();
                $this = $(this);
                $this.siblings().removeClass(settings.selected_class).end().addClass(settings.selected_class);
                $.get($this.find('a').prop('href'),function(data){
                    content.html(data); 
                });
            });

        }
    },
    menu : {
        item: null,
        timer: null,
        closing_timer: null,
        closing_item: null,
        current: null,
        selectors: {
            main_navigation: '.main-navigation',
            expanded_navigation: 'div.expanded-nav',
            breadcrumb: '.bread-crumb',
            social_media: '.social-media',
            nav_with_separator: '.category-navigation.type-2',
            categories: '.category-wrapper',
            category_icon: '.category-thumb',
            category_content: '.category-content'
        },
        init : function(){

            var self = this,
                expanded_nav = $(self.selectors.expanded_navigation);

            $(self.selectors.nav_with_separator).each(function(){

                var self = $(this),
                    parent = self.parent();

                parent.css({'display':'block','visibility':'hidden'});

                var sep = self.find('.sep'),
                    cols = self.find('.col'),
                    cMax = [];

                // Alignment fix
                cols.each(function(){
                    var i = 1;
                    $(this).children(companyname.menu.selectors.categories).each(function() {
                        if (!cMax[i])
                            cMax[i] = [];
                        cMax[i].push($(this).height());
                        $(this).attr('data-row',i);
                        i++;
                    });
                });
                for (var j=1; j<cMax.length; j++) {
                    $(companyname.menu.selectors.categories + '[data-row=' + j + ']').css('height',companyname.helper.maxValue(cMax[j]));
                }

                // Define max height for columns has seperation
                var sMax = companyname.helper.maxHeight(sep);
                sep.each(function(){
                    $(this).css('height',sMax);
                });

                parent.css({'display':'none','visibility':'visible'});

            });

            //Menu size alignments
            var breadCrumbSpace = 960-$(self.selectors.social_media).width();
            $(self.selectors.breadcrumb).css('width', breadCrumbSpace);

            if ($(self.selectors.breadcrumb + ' > ul').height() > 35) {//Two line
                var totalWidth = 0;
                $(self.selectors.breadcrumb + ' > ul > li').each(function () {
                    totalWidth += $(this).outerWidth();
                    if (totalWidth > breadCrumbSpace) {
                        $(this).addClass('second-line');
                        return false;
                    }
                });
            }

            if (!Modernizr.touch) {

                expanded_nav.parents('li').hover(function(){
                    var parent = this;
                    self.item = $(this);

                    if (self.closing_item != null) {
                        if (self.closing_item.index() == self.item.index()) { //same item, do not hide
                            clearTimeout(self.closing_timer);
                        } else { //another item, hide previous item immediately
                            self.closing_item.find(self.selectors.expanded_navigation).stop(true, true).hide();
                            self.closing_item.removeClass('hover');
                        }
                    }

                    self.timer = setTimeout(function () {
                        self.item.addClass('hover');
                        if ($('.lte-ie8').index() == -1) {
                            self.item.find(self.selectors.expanded_navigation).stop(true, true).fadeIn(function(){
                                $(parent).find(self.selectors.expanded_navigation).find('a').eq(0).focus();
                            });
                        }
                        else {
                            // IE8 anti-aliasing font issue fix
                            self.item.find(self.selectors.expanded_navigation).fadeTo(400,0.99,function(){
                                $(parent).find(self.selectors.expanded_navigation).find('a').eq(0).focus();
                            });
                        }
                    },400);

                }, function () {
                    self.closing_item = $(this);

                    clearTimeout(self.timer);
                    self.closing_timer = setTimeout(function () {
                        self.closing_item.find(self.selectors.expanded_navigation).stop(true, true).fadeOut();
                        self.closing_item.removeClass('hover');
                    },800);
                });

                expanded_nav.parents('li').find('>a').on('focus',function(){
                    $(this).parents('li').addClass('hover');
                    $(this).parents('li').find(self.selectors.expanded_navigation).fadeIn();
                });

                expanded_nav.find('a:last').on('blur',function(){
                    $(this).parents('li').removeClass('hover');
                    expanded_nav.stop(true, true).fadeOut();
                });

                //Hyperlink highlighting
                $(self.selectors.expanded_navigation + ' ' +  self.selectors.categories).each(function() {
                    if ($(this).children(self.selectors.category_content).find('ul').index() != -1) { //category contains sublinks
                        $(this).children(self.selectors.category_icon).find('a').hover(function() {
                            $(this).closest(self.selectors.categories).children(companyname.menu.selectors.category_content).find('a:first').addClass('hover');
                        },function() {
                            $(this).closest(self.selectors.categories).find('a').removeClass('hover');
                        });
                    } else { //category contains description
                        $(this).find('a').hover(function() {
                            $(this).closest(self.selectors.categories).find('a').addClass('hover');
                        },function() {
                            $(this).closest(self.selectors.categories).find('a').removeClass('hover');
                        });
                    }
                });
            }

            else {
               // Trick to fix click event on iphone & ipad
               $("body").css("cursor","pointer");
                expanded_nav.bind("click",function(e){
                    e.stopPropagation();
                })
                expanded_nav.parents('li').find('> a').bind("click",function(e){
                    e.preventDefault();
                    e.stopPropagation();
                    self.item = $(this).parent();
                    if(self.current == this) {
                        if(!$(this).parents(self.selectors.breadcrumb).size()) {
                            self.item.removeClass('hover').find(self.selectors.expanded_navigation).fadeOut();
                            self.current = null;
                        }
                        else {
                            location.href = $(this).attr("href");
                        }
                    }
                    else {
                        self.current = this;
                        $(self.selectors.expanded_navigation+':visible').stop(true, true).fadeOut(function(){
                            $(this).parent('li').removeClass('hover');
                        });
                        self.item.addClass('hover').find(self.selectors.expanded_navigation).fadeIn();
                    }
                });

                $(document).bind("click",function(e){
                    $(self.selectors.expanded_navigation+':visible').stop(true, true).fadeOut(function(){
                        $(this).parent('li').removeClass('hover');
                        self.current = null;
                    });
                });
            }

        }
    },
    validate : {
        settings: {
            form : '#form',
            options : {}
        },
        init : function(options){
            this.settings = $.extend(true,this.settings,options);
            settings = this.settings;
            var _form = $(settings.form);

            _form.validate(settings.options);
            _form.find('a.button').not('.non-submit').on('click',function(e){
                e.preventDefault();
                _form.submit(); 
            });
            _form.find('.submitter').on('keypress',function(e) {
                e = e || window.event;
                keycode = e.keyCode || e.which;
                switch (keycode) {
                    // Enter
                    case 13:
                        _form.find('a.onclick').trigger('click');
                    break;
                }
            });

        }
    },
    form: {
        /*
         *  Helper functions for forms.
         *  
         *  toggle_all -> One checkbox to toggle all other checkbox.
         *  unit_change -> Helps to switch between unit types of a form group.
         *  input_styling -> Helps to improve visualization of radio buttons/checkboxes.
         *  
         */
        toggle_all: {
            selectors: {
                form_wrapper: '.toggler',
                switcher_input: '.toggle-all'
            },
            init: function (selectors) {
                companyname.form.toggle_all.selectors = $.extend(true,companyname.form.toggle_all.selectors,selectors);
                $(companyname.form.toggle_all.selectors.switcher_input).on('click',companyname.form.toggle_all.run);
            },
            run: function () {
                var inputs = $(this).parents(companyname.form.toggle_all.selectors.form_wrapper).find('input[type=checkbox]');
                if ($(this).is(':checked')) {
                    inputs.not(this).attr('checked', true);
                } else {
                    inputs.not(this).attr('checked', false);
                }
            }
        },
        unit_change: {
            selectors: {
                unit_changer: '.unit-changer',
                elements_to_change: '.unit-target',
                form_wrapper: '.unit-wrapper'
            },
            init: function (selectors) {
                companyname.form.unit_change.selectors = $.extend(true,companyname.form.unit_change.selectors,selectors);
                $(companyname.form.unit_change.selectors.unit_changer).on('click',companyname.form.unit_change.run);
            },
            run: function () {
                var _wrapper = $(this).parents(companyname.form.unit_change.selectors.form_wrapper);
                var _elements = _wrapper.find(companyname.form.unit_change.selectors.elements_to_change);
                var _unit_type = $('input[name='+$(companyname.form.unit_change.selectors.unit_changer).attr('name')+']:checked').val();
                _elements.each(function () {
                    $(this).text($(this).siblings('.'+_unit_type).val());
                });
            }
        }
    },
    image_gallery : {
        settings: {
            id : 'gallery-slider',
            thumb_class : 'gallery-thumb',
            selected_class : 'selected',
            show_image_class : 'big-image',
            loading_class : 'loading',
            full_size_class : 'full-size'
        },
        init : function(options){
            this.settings = $.extend(this.settings,options);
            settings = this.settings;

            var thumbs = $('.'+settings.thumb_class),
            big_image = $('.'+settings.show_image_class),
            full_size_link = $('.'+settings.full_size_class),
            first_image = thumbs.filter(':first');

            companyname.product.slider.init({
                id: settings.id
            }); 

            big_image.addClass(settings.loading_class);
            big_image.html($('<img />').attr('src',first_image.addClass(settings.selected_class).attr('href')));
            full_size_link.attr('href',first_image.attr('data-source'));

            thumbs.on('click',function(e){
                e.preventDefault();
                $this = $(this);
                thumbs.removeClass(settings.selected_class);
                $this.addClass(settings.selected_class);

                big_image.find('img').attr('src',$this.attr('href'));
                full_size_link.attr('href',$this.attr('data-source')); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T17:23:07.340

他们正在做的是在 JS 中实现命名空间。companyName 只是对大型匿名对象（您的应用程序范围）的引用

您可以随意将属性/方法添加到该对象的末尾。

[这是一个更明智的解释。](http://www.codeproject.com/Articles/320764/Quick-Tip-JavaScript-Namespaces)

调用的函数`init()`通常意味着在构造拥有对象后不久触发的事件。它发生一次，通常保留用于初始化过程。

```
head.ready("main", function() {
    setTimeout(function () {//FF 3.6 Fix
        sonypro.menu.init();
    }, 500);
}); 
```

^- 这个*有点*超出我的理解。jQuery 提供了一个就绪事件，您可以将处理程序绑定到该事件，但我看到的所有文档仅显示它支持单个参数，如果为真，则意味着这是在代码中其他地方实现的自定义处理程序。

通常，该函数的格式是这样的：

```
selector.ready(function(){
//do some stuff when the selected element is ready
}); 
```

ready 事件只是确保在您传递的函数中的代码执行之前，选择器中的所有内容都已完全加载（即：图像等）。无论如何，看起来您的代码在您的页面准备好后等待半秒，然后它正在调用`sonypro.menu.init();`

# extjs4 - 在视口面板中显示 TreeStore

> ID：14817336
> 
> 赞同：2
> 
> 时间：2013-02-11T17:20:10.963
> 
> 标签：extjs4

我是 ExtJS 的新手，我正在尝试在西部地区创建一个带有导航树的视口。我不明白为什么下面的代码呈现视口，而不是树；有人可以帮忙吗？

```
Ext.onReady(function() {

    var navTree = Ext.create('Ext.data.TreeStore', {
        root: {
            text: 'Root Node',
            expanded: true,
            children: [
                {
                    text: 'Child 1',
                    leaf: true
                },
                {
                    text: 'Child 2',
                    leaf: true
                }
            ]
        }
    });

    var vp = Ext.create('Ext.Viewport', {
        layout: 'border',
        defaults: {
            frame: true,
            split: true
        },
        items: [
            {
                id: 'titlePanel',
                height: 40,
                region: 'north'
            },
            {
                id: 'navPanel',
                store: navTree,
                width: 250,
                region: 'west',
                title: 'West Region',
                collapsible: true
            },
            {
                id: 'bodyPanel',
                region: 'center',
                title: 'Center Region'
            }
        ]
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:34:17.167

因为没有什么可以告诉西区它是由什么类型的组件构成的，所以你渲染的是 default `Ext.panel.Panel`，而不是`Ext.tree.Panel`.

包括`xtype: 'treepanel'`西面板的配置。

# snmp - 在 SNMP4J 中创建 TimeTicks 对象时出现 IllegalArgumentException

> ID：14817343
> 
> 赞同：1
> 
> 时间：2013-02-11T17:20:24.033
> 
> 标签：snmp, snmp4j

使用 SNMP4J，我想使用交换机供应商的专有 OID 在交换机中设置当前时间的时间。在交换机上执行 MIB walk（以及在使用交换机的 Web 界面设置时间时嗅探 SNMP 流量）显示参数的类型为 timeticks-value(3)。我认为这意味着我应该在 SNMP4J 中使用 TimeTicks 变量类型。我的问题是我根本无法为 TimeTicks 对象分配一个创建后的值。

TimeTicks 构造函数之一接受一个长参数；此构造函数未记录（！）并引发异常，因为参数不是 UnsignedInteger32 类型。还有一个 fromMilliseconds(long) 方法，它做的事情完全相同：抛出 IllegalArgumentException 因为参数不是 UnsignedInteger32 类型。

我的问题是，是否可以使用 SNMP4J 设置 TimeTicks 值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T16:38:19.750

我认为这是一个类型问题，但事实证明我的问题是由于使用了一个超出 unsigned int 范围的 long 值引起的；它适用于大于 0 且小于 4294967296 的值。

# twitter-bootstrap - 如何将 twitter bootstrap 警报连续居中？

> ID：14817344
> 
> 赞同：7
> 
> 时间：2013-02-11T17:20:24.837
> 
> 标签：twitter-bootstrap

代码如下所示：

```
<div class="row">
<div class="span4 alert alert-info">My Alert</div>
</div> 
```

这行不通。想法？

我正在寻找一种不涉及我在任何地方硬编码宽度的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T17:25:36.427

假设您使用默认的 12 列网格：

```
<div class="row">
    <div class="span4 offset4 alert alert-info">My Alert</div>
</div> 
```

请参阅文档[网格系统部分](http://twitter.github.com/bootstrap/scaffolding.html#gridSystem)的**偏移列。**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-10-05T07:40:07.360

在你的风格中添加这个。

```
.alert {
   width:40%; margin-left: 30%;
} 
```

**更新**

虽然上述技术有效（通过执行 100-40-30 保持 30% 正确）.. 使用以下技术更简单，因为不需要根据文本长度调整框大小与前面的示例不同。尽可能使用它：

```
.alert {
    margin: auto; display: table;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T17:24:19.843

最好让你的代码像这样：

```
<div class="row">
 <div class="span12">
  <div class="alert alert-info">My Alert</div>
 </div>
</div> 
```

然后您可以将警报设置为：

```
.alert {
    display: inline-block;
    margin: 0 auto;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-25T08:19:21.690

```
<div class="alert alert-info col-lg-2 col-lg-offset-10">My Alert</div> 
```

# jakarta-ee - Bean Validation (JSR 303) 和 Hibernate 验证在 EAR 内时不会触发

> ID：14817346
> 
> 赞同：2
> 
> 时间：2013-02-11T17:20:28.117
> 
> 标签：jakarta-ee, jsf-2, bean-validation, ear, hibernate-validator

我缺少一些非常基本的东西（与 EAR 或 EAR 配置中的类加载有关）。我想不通，为什么我的 JSR 303 验证和 Hibernate 验证不会从 EAR 内部触发……如果我创建一个新的 WAR 项目，它会触发。

我正在 Weblogic Server 10.3 上使用 Maven、JSF 2.0、Open-JPA、EJB 3.0 建立一个新项目。我使用 Maven 原型创建了所有项目。我有一个最终的 EAR 版本，其结构如下：

*   项目名称
    *   ejb
    *   网络
    *   库
    *   元信息

在 Web 中，我有一个与TestMPB 变量和具有依赖关系的 poms 映射 的`login.xhtml`with`userName`和字段：validation-api 1.0.0.GA、hibernate-validator 4.2.0.Final…</p>`Password`

页面支持 bean 的 (TestMPB) 变量具有`@Pattern`和`@NotEmpty`注释，但它们永远不会被 JSF 验证阶段触发。JSF 验证工作正常，但我想使用 JSR 303 和 Hibernate 验证。

`login.xhtml`包含以下提示行：

```
<h:messages layout="table" showDetail="false" showSummary="true"/>
<h:inputText class="textbox" id="userId" value="#{testMPB.userId}"></h:inputText>
<h:commandButton id="button" action="#{testMPB.login}" value="Login" ></h:commandButton> 
```

TestMPB 包含：

```
@Pattern(regexp = "^(?=.*[a-zA-Z])[a-zA-Z0-9_]{2,15}\\s*$", message = "userId invalid")
@NotEmpty(message = "userId empty")
private String userId = "";

public String login(){ System.out.println("User Login ::"+getUserId());
    return "/web/ui/s/home/home.xhtml";
} 
```

Application.xml 包含

```
<?xml version="1.0" encoding="UTF-8"?>
<application xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/application_5.xsd" version="5">
<display-name>ear</display-name>
  <module>
    <web>
      <web-uri>web</web-uri>
      <context-root>/NewAccountsWeb</context-root>
    </web>
  </module>
  <module>
    <ejb>ejb</ejb>
  </module>
  <library-directory>lib</library-directory>
</application> 
```

对于调试，我确保：

*   JSF 托管页面 bean (TestMPB) 在页面加载时初始化（通过在构造函数中添加 SOP）
*   在提交页面时，调用该方法并打印用户名值。
*   在 POM 中添加的 JAR 依赖项是正确的，并且它们存在于最终的 EAR 构建中。
*   `login.xhtml`当我创建 WAR 项目时，相同的 JSR 303 和 Hibernate 验证适用于相同的一组和 TestMPB.java。
*   创建一个阶段侦听器并打印所有阶段以确保调用阶段。
*   为了测试，我还添加了 JSF 验证 ( `required=true`)，它可以工作并在 h:message 中显示消息。

能想到什么可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T15:08:52.010

我能够自己解决这个问题......

我在我的项目类路径中添加了 slf4j-log4j12 1.6.4 jar 并且 bean 和 hibernate 字段级验证都开始工作...... jboss-logging-3.1.0.GA.jar 也可能工作...... Log4j jar 也是已经在类路径中。

看来，出于日志记录的目的，Hibernate Validator 使用了一些 Logging API，这是一个支持一些日志记录解决方案作为实现的抽象层。因此，如果您只是将受支持的日志库添加到类路径中，并且日志记录会将任何日志请求委托给该提供程序。

奇怪的是，我的服务器日志或编译时没有错误，Hibernate（或 Bean JSR 303）验证缺少日志依赖项......我浪费了 3 天时间，但很高兴它现在可以工作。 ..

# c# - 如何在c#上添加奇偶校验位

> ID：14817352
> 
> 赞同：-8
> 
> 时间：2013-02-11T17:20:44.623
> 
> 标签：c#, parity

请帮助我希望 c# 提出这个问题

请输入一个 7 位二进制数：

```
0010011 
```

您带有奇偶校验位的号码是：

```
00100111 
```

这是我想出的代码，它可能是错误的，请你纠正它，这样好吗？

```
{
   Console.WriteLine("Please enter a 7- bit binary number");

   string number = Console.ReadLine();

   int count1 = 0;
   int count2 = 0;

   for(int i = 0; i < number.Length; i++)
   {
      count1++;
   }
   else 
   {
       count2++;
   }

   if (count1 < count2) 
      Console.WriteLine("Your number with parity bit is "+ number+ "1");
}
else
{ 
    Console.WriteLine("Your number with parity bit is "+ number + "0");
}

    }
} 
```

}

提前谢谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:51:01.460

算法：

1.  将字符串转换为整数。
2.  找到奇偶校验位值。
3.  将奇偶校验位值“附加”到源整数 => 结果整数。
4.  将结果整数转换为字符串并将字符串写入输出。

源代码：

```
Console.Write("Please enter a 7-bit binary number: ");
string numberString = Console.ReadLine();

// Convert to integer representation.
int number = Convert.ToInt32(numberString, 2);

// Find parity bit value for the integer.
bool parity = false;
int tempNumber = number;
while (tempNumber > 0)
{
    parity ^= tempNumber % 2 != 0;
    tempNumber >>= 1;
}

// "Append" parity bit.
int numberWithParity = number << 1 | (parity ? 1 : 0);

// Convert the result to string representation.
numberString = Convert.ToString(numberWithParity, 2).PadLeft(8, '0');
Console.WriteLine("Your number with parity bit is {0}", numberString); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T17:31:03.550

这应该这样做：

```
Console.WriteLine("Please enter a 7- bit binary number");

string number = Console.ReadLine();

int count = 0;

for(int i = 0; i < number.Length; i++)
{
   if(number[i] == '1')
   {
      count++;
   }
}

Console.WriteLine("Your number with parity bit is "+ number + (count % 2).ToString()); 
```

我想这超出了您当前的水平，但这也应该有效：

```
Console.WriteLine("Please enter a 7- bit binary number");

string number = Console.ReadLine();

string parityBit = (number.Where(c => c == '1').Count() % 2).ToString();

Console.WriteLine("Your number with parity bit is "+ number + parityBit); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T17:35:26.170

因此，[奇偶校验位](http://en.wikipedia.org/wiki/Parity_bit)指示输入是否具有偶数个一位。所以如果你的输入字符串是二进制的（你通常不应该安全地假设，但我们现在将忽略它），你需要简单地计算`1`二进制字符串中 s 的数量。

按照您最初的想法（我认为？），您可以这样做：

```
int numberOfOnes = 0;
for (int i = 0; i < bitstring.length; i++)
{
    if (bitstring[i] == '1')
        numberOfOnes++;
}

if (numbersOfOnes % 2 == 0)
    // even number of ones
else
    // uneven number of ones 
```

请注意，奇偶校验位有两种不同的版本，具体取决于您是否具有`1`奇偶校验是否为偶数或`0`奇偶校验是否为偶数。你选择哪一个取决于你。

# python - 如何以不区分大小写的方式通过Python替换字符串中的多个单词？

> ID：14817354
> 
> 赞同：2
> 
> 时间：2013-02-11T17:20:47.623
> 
> 标签：python, regex, django, string, replace

例如，我有字符串：

```
s = 'Back in BLACK, I hit the sAck, I've been too LOng I'm glad to be back.' 
```

在上面的字符串中，我想用以下单词以不区分大小写的方式搜索和替换某些单词

黑色：b***

麻袋：s***

长：l***

高兴：g***

我希望得到的字符串是

```
s = 'Back in B****, I hit the s***, I've been too L*** I'm glad to be back.' 
```

基本上，上面的字符串保持了我要替换的单词的第一个字母的大小写。单词后面的字母将带有' *** '

我假设我需要列出某种替换列表。在 Django 中，我目前正在使用 replace_all() 函数，但它区分大小写。所以对于像 BLACK 和 sAck 这样的词来说，这是一项艰巨的任务，因为有很多组合！

我该怎么做呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T17:25:26.820

使用[re 模块](http://docs.python.org/2/library/re.html)，这里是“黑色”的一个简短示例：

```
>>> import re
>>> s = "Back in BLACK, I hit the sAck, I've been too LOng I'm glad to be back."
>>> regex = re.compile(r'black', flags=re.IGNORECASE)
>>> regex.sub('b***', s)
"Back in b***, I hit the sAck, I've been too LOng I'm glad to be back." 
```

要保留第一个字母的大小写，请捕获它并在替换中使用反向引用：

```
>>> regex = re.compile(r'(b)lack', flags=re.IGNORECASE)
>>> regex.sub(r'\1***', s)
"Back in B***, I hit the sAck, I've been too LOng I'm glad to be back." 
```

要一次性完成所有替换：

```
>>> regex = re.compile(r'(?=(.))(?:black|sack|long|glad)', flags=re.IGNORECASE)
>>> regex.sub(r'\1***', s)
"Back in B***, I hit the s***, I've been too L*** I'm g*** to be back." 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T17:32:27.223

这有点密集，但有效：

```
>>> re.sub(
        r"(?i)\b(black|sack|long|glad)\b", 
        lambda m: m.group()[0] + "*"*(len(m.group())-1), 
        s
        )
"Back in B****, I hit the s***, I've been too L*** I'm g*** to be back." 
```

# .htaccess - mod_rewrite 旧域规则到新域

> ID：14817355
> 
> 赞同：-1
> 
> 时间：2013-02-11T17:20:50.780
> 
> 标签：.htaccess, url, mod-rewrite, redirect, rewrite

我正在尝试将一些旧动态链接转发到新目标

旧的 Link 使用了 RewriteRule

```
http://www.olddomain.com/index.php?cms=blog&action=.. 
```

所以我会转发`cms=blog`到一个新的域`http://www.newdomain.com/blog`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T18:00:26.360

要匹配查询字符串，您可以使用`RewriteCond`指令。您需要在 www.olddomain.com/.htaccess 中放置的完整规则是：

```
RewriteEngine on
RewriteCond %{QUERY_STRING} (^|&)cms=blog(&|$)
RewriteRule ^index\.php$ http://www.newdomain.com/blog? [R=302,L] 
```

如有必要，将 302 更改为 301。

# java - 将文本文件中的信息制作成树 Java

> ID：14817356
> 
> 赞同：-2
> 
> 时间：2013-02-11T17:20:51.240
> 
> 标签：java, tree, treemap

好的，我要做的是从文本文件中获取信息并制作一个程序，以便在您运行它时，它会以正确的顺序在树或树图中显示来自文本文件的信息。使用我尝试过的编码，它似乎只映射文件或者没有在我的文本文件中读取信息。有没有人有任何提示可以让我朝着正确的方向前进？文本文件包含如下内容：

0:-1:BankSys
10:8:Balance
11:8:Transactions
12:9:Balance
13:9:Transactions
14:7:Transfer
15:7:Withdraw
16:7:Deposit
17:7:Loans
18:17:概览
19:17: 取新
1:0:自助服务
2:0:个人服务
3:0:断开连接
4:1:股市
5:4:买入
6:4:卖出
7:1:账户
8:7:当前
9 :7:节省

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T17:28:13.783

首先，看一下[DefaultTreeModel](http://docs.oracle.com/javase/6/docs/api/javax/swing/tree/DefaultTreeModel.html)。

其次，按第一个数字对文本文件进行排序。

第三，根据第二个数字将文本行作为节点插入 DefaultTreeModel。第二个数字告诉您叶子应该附加到哪个节点。

# marionette - Marionette - 有没有更好的方法来获取 CompositeView 的 itemViewContainer

> ID：14817357
> 
> 赞同：4
> 
> 时间：2013-02-11T17:20:56.820
> 
> 标签：marionette

我希望能够隐藏和显示复合视图的 itemViewContainer，但我觉得它可以做得更好。

这是我的代码：

```
MyCompView = Backbone.Marionette.CompositeView.extend({
    // ITEM VIEW
    itemView: MyView,

    // ITEM VIEW CONTAINER
    itemViewContainer: 'tbody',

    // EVENTS
    events: {
        'click #table-toggle': 'onToggleClick'
    },

    onToggleClick: function(event){
    event.preventDefault();
    this.toggle();
    },
    // Toggle
    toggle: function(){
        this.$(this.itemViewContainer).toggle();
    } 
```

这是 MyCompView 的模板

```
<script id='MyCompView-template' type='text/x-handlebars-template'>
<div>
    <span id='heading-container' style="font-weight:bold">Some name</span>
    <a id='table-toggle' href="#">[-]</a>
</div>

<table>
    <thead>
    </thead>

    <tbody>
    </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T15:00:22.890

另一个选项，在这个例子中并没有更好，是使用`ui`视图的配置：

```
 MyCompView = Backbone.Marionette.CompositeView.extend({
    // ITEM VIEW
    itemView: MyView,

    // ITEM VIEW CONTAINER
    itemViewContainer: 'tbody',

    // UI configuration to cache selectors
    // -----------------------------------
    ui: {
      table: "tbody"
    }

    // EVENTS
    events: {
        'click #table-toggle': 'onToggleClick'
    },

    onToggleClick: function(event){
    event.preventDefault();
    this.toggle();
    },
    // Toggle
    toggle: function(){
        this.ui.table.toggle();
    }
} 
```

如果您在代码中多次重复使用相同的选择器，这有助于减少重复。但是，在您的情况下，它直接复制了 itemViewContainer 的选择器，所以我并不认为它更好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-12T09:56:44.857

它是可用的，就像`el`/`$el`属性一样`this.$itemViewContainer`。但是，这似乎是某种竞争条件，即使`this.$itemViewContainer`在渲染完成后尝试访问有时也会失败。

现在回退到重新选择它。

# javascript - 在滑块图像上淡入淡出

> ID：14817358
> 
> 赞同：2
> 
> 时间：2013-02-11T17:21:03.450
> 
> 标签：javascript, jquery, slider, fading

我试图让滑块图像彼此淡入，而不是淡入背景，然后加载下一张图像。

滑块可以在[http://bit.ly/Vbfq2W看到](http://bit.ly/Vbfq2W)

这就是我所拥有的

```
$("#featured > ul").tabs({fx:{opacity: "toggle"}}).tabs("rotate", 5000, true);

<div id="featured" >
                    <ul class="ui-tabs-nav">
                        <li class="ui-tabs-nav-item" id="nav-fragment-1">
                        <a href="#fragment-1"><span>Cloud<br />Services</span></a>
                    </li>
                        <li class="ui-tabs-nav-item" id="nav-fragment-2">
                        <a href="#fragment-2"><span>IT &amp; Network<br />Support</span></a>
                    </li>
                        <li class="ui-tabs-nav-item" id="nav-fragment-3">
                        <a href="#fragment-3"><span>Security</span></a>
                    </li>
                        <li class="ui-tabs-nav-item" id="nav-fragment-4">
                        <a href="#fragment-4"><span>Service 4</span></a>
                    </li>
                    </ul>
            <!-- First Content -->
            <div id="fragment-1" class="ui-tabs-panel"><img src="<?php bloginfo('template_directory'); ?>/images/slider1.jpg" alt="Brash Concepts | Image Not Found" width="700" height="320" /> </div>
            <!-- Second Content -->
            <div id="fragment-2" class="ui-tabs-panel"><img src="<?php bloginfo('template_directory'); ?>/images/slider2.jpg" alt="Brash Concepts | Image Not Found" width="700" height="320"/> </div>
            <!-- Third Content -->
            <div id="fragment-3" class="ui-tabs-panel"><img src="<?php bloginfo('template_directory'); ?>/images/slider3.jpg" alt="Brash Concepts | Image Not Found" width="700" height="320"/> </div>
            <!-- Fourth Content -->
            <div id="fragment-4" class="ui-tabs-panel"><img src="<?php bloginfo('template_directory'); ?>/images/slider4.jpg" alt="Brash Concepts | Image Not Found" width="700" height="320"/> </div>
                </div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T16:46:16.750

您可以轻松地使用[FlexSlider 之](http://www.woothemes.com/flexslider/)类的工具来创建滑块。每张幻灯片都将被放置在另一张幻灯片上，这样当您更换幻灯片时，它们之间就会出现“交叉淡入淡出”。

这是您可以尝试的代码示例：

```
<!-- Place somewhere in the <body> of your page -->
<div class="flex-controls"></div>
<div class="flexslider">
  <ul class="slides">
    <li>
      <img src="<?php bloginfo('template_directory'); ?>/images/slider1.jpg" alt="Brash Concepts | Image Not Found" width="700" height="320" /> 
    </li>
    <li>
      <img src="<?php bloginfo('template_directory'); ?>/images/slider2.jpg" alt="Brash Concepts | Image Not Found" width="700" height="320" /> 
    </li>
    <li>
      <img src="<?php bloginfo('template_directory'); ?>/images/slider3.jpg" alt="Brash Concepts | Image Not Found" width="700" height="320" /> 
    </li>

    <li>
      <img src="<?php bloginfo('template_directory'); ?>/images/slider4.jpg" alt="Brash Concepts | Image Not Found" width="700" height="320" /> 
    </li>
  </ul>
</div>

<!-- Place in the <head>, after the three links -->
<script type="text/javascript" charset="utf-8">
  $(window).load(function() {
    $('.flexslider').flexslider(
        pauseOnAction: false,
        pauseOnHover: true, 
        slideshowSpeed: 5000,
        controlsContainer: '.flex-controls' //you could also use custom controls
    );
  });
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T14:48:35.373

a) 使用绝对定位和 z-index 将不同的幻灯片放在彼此的顶部，或
b) 将图像放在一个包装器中，每次将要显示下一张图像时，它都会将当前图像的 src 作为背景图像. 隐藏图像将没有视觉差异，加载新图像，一旦准备好，淡入

这基本上就是所有滑块的工作方式，例如 jquery cycle、flexslider、nivoslider 等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T17:25:24.510

为此做了一个插件。一个非常直接的基本滑块。“最后一个”列表项使用 fadeOut 进行动画处理，并在动画后使用 prependTo() 将项目重新定位到“第一个”位置

代码的核心：

```
cycle : function(slide) {
            var parent = $(slide).parent();
            $(slide).prependTo(parent)
            $(slide).css({
                display : 'block'
            });
        },
fadeToNext : function(obj, options) {
                $(obj).children().last().delay(options.delay).fadeOut(options.transitionTime, function() {
                methods.cycle(this);
                methods.fadeToNext(obj, options);
            });

        } 
```

我把它放在小提琴上，所以你可以玩弄它，看看它做了什么。 [http://jsfiddle.net/djwave28/mwPSB/18/](http://jsfiddle.net/djwave28/mwPSB/18/)

我还添加了一些设置注释，您可以更改这些设置，以显示动画期间列表实际发生的情况。

# ruby - Chef - Chef::Resource::Application 中的 NoMethodError

> ID：14817368
> 
> 赞同：2
> 
> 时间：2013-02-11T17:21:35.580
> 
> 标签：ruby, chef-infra, vagrant

我有一个工作的 Vagrant 实例，现在尝试将“应用程序”食谱与 Chef/Vagrant 一起使用，以便能够从 git 部署并收到以下错误消息：

```
FATAL: NoMethodError: undefined method `path' for
 Chef::Resource::Application 
```

自然，“路径”是“应用”配方中不可或缺的一部分。如果我将其注释掉，则会为下一个属性显示相同的消息。

我已确保 metadata.rb 包含以下行：

```
depends 'application' 
```

我还重新加载了 vagrant 实例以确保所有更改都能传播并运行“berks update”。我应该朝哪个方向寻找这个错误的原因？

Vagrantfile 非常标准，主要包括：

```
config.vm.provision :chef_solo do |chef|
    chef.json = {
      :mysql => {
        :server_root_password => 'rootpass',
        :server_debian_password => 'debpass',
        :server_repl_password => 'replpass'
      },
      :postgresql => {
        :password => {
          :postgres => "rootpass"
        }
      },
    }

    chef.run_list = [
      "recipe[iw-app::default]",
      "recipe[iw-app::db]",
      "recipe[iw-app::deploy]"
    ]
  end 
```

虽然部署配方包含

```
user "#{node[:ii][:user]}" do
  system true
end

application node[:ii][:app_name] do
  path        node[:ii][:deploy_to]
  owner       node[:ii][:user]
  group       node[:ii][:group]
  repository  node[:ii][:repo][:url]
  revision    node[:ii][:repo][:branch]
  deploy_key  node[:ii][:repo][:deploy_key]
  packages    ["git"]
end 
```

metadata.rb 只是：

```
depends 'apt'
depends 'python'
depends 'application'
depends 'application_python'
depends 'postgresql' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-12T04:58:50.343

I was having a very similar issue. In my case what solved it was to remove an incorrect variable that I was using inside the block that was throwing the exception.

For example the following was throwing:

```
ark "apachesolr-drupal" do
  url node['solri']['drupal']['url']
  version node['solr']['drupal']['version']
  path "/tmp"  
  action :put
end 
```

with...

```
NoMethodError
-------------
No resource or method named `ark' for `Chef::Recipe "drupal"' 
```

`node['solri']['drupal']['url']` is not set the following works:

```
ark "apachesolr-drupal" do
  url node['solr']['drupal']['url']
  version node['solr']['drupal']['version']
  path "/tmp"
  action :put
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-15T12:45:45.823

我遇到了一个非常相似的问题。就我而言，解决的方法是删除我在引发异常的块内使用的不正确变量。

检查厨师资源语法！

```
git "#{node['customscripts']['dir']}" do
  repository node['customscripts']['url']
  reference node['customscripts']['ref']
  action :sync
  user root
  group root
end 
```

通过向用户和组添加引号来修复：

```
git "#{node['customscripts']['dir']}" do
  ... 
  user "root"
  group "root"
end 
```

厨师版本是：

```
chef-client --version
Chef: 11.10.0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T09:31:21.073

听起来有些基本的东西是错误的，因为您已经开始的调试过程，即注释掉`path`命令并基本上得到相同的错误，没有多大意义。

我会检查你对 vagrant 和你的环境的假设——你的食谱目录中是否有正确的食谱结构和依赖项，你是否指定了正确的属性，在 chef-solo 的输出中是否有任何线索？我发现厨师输出中通常有一个微妙的迹象表明出了什么问题。

如果失败了，检查失败的配方的来源通常很有用。

# mysql - Visual Studio 2010 负载测试：MySQL 作为结果存储库

> ID：14817374
> 
> 赞同：1
> 
> 时间：2013-02-11T17:21:51.987
> 
> 标签：mysql, sql-server, load-testing

我使用 Microsoft Visual Studio 2010 进行了一些负载测试。我尝试将结果存储在 SQL Server Express 中，但它有数据库大小限制。有没有办法使用不同的数据库作为结果存储库，例如 MySQL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T08:35:48.893

**不**

因为负载测试结果存储库是一个 TSQL 脚本，位于此处 (C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE)。在负载测试期间，Visual Studio 或测试控制器将调用存储库中的存储过程。在负载测试之后，VS 也会执行 sp 来获取结果。所以，这是不可能的，因为 VSTS 不知道如何调用其他东西。

但是，Sql Server Express 2012 的限制是 10 GB 左右。你真的在你的测试中达到了极限吗？尝试限制收集的日志和计数器（更改采样间隔？）。有时，统计数据就足够了。

此外，您可以尝试[导出](http://msdn.microsoft.com/en-us/library/bb385895.aspx)结果进行备份。

# multithreading - 在不需要用户交互时处理 ContextSwitchDeadlock？

> ID：14817376
> 
> 赞同：0
> 
> 时间：2013-02-11T17:21:59.153
> 
> 标签：multithreading, com

[关于](https://stackoverflow.com/questions/334360/contextswitchdeadlock)这个有[几个](https://stackoverflow.com/questions/2797677/contextswitchdeadlock-was-detected-error-in-c-sharp) [问题](https://stackoverflow.com/questions/8106159/net-contextswitchdeadlock-was-detected) ，但我的情况有一个警告，没有 UI。有两个主要的解决方案，我都不喜欢。一个重复的答案说要在后台线程上卸载工作。我的应用程序由另一个程序使用命令行参数启动，并向特定文件夹生成报告。我相信它没有理由应该有一个未占用的主线程来响应它不希望接收并做任何事情的输入。用户甚至看不到该窗口进行交互。另一种解决方案是关闭警告，以免引起注意。这听起来太像无视火灾了。

我可以更改线程的 ApartmentState、Culture 或 Principal 以避免此错误吗？我必须承认我对这些事情都不太了解。

# mysql - 按类型/联系人 ID 计算不同的消息

> ID：14817380
> 
> 赞同：1
> 
> 时间：2013-02-11T17:22:22.610
> 
> 标签：mysql, sql

我有一个记录用户活动的表：

AccountID/ContactID/Message/Time/Date 都被记录下来。通常，消息将是一种颜色，红色，绿色等......

任何 AccountID 都可以有多个 ContactID

我想展示的是：

```
AccountID 红色 绿色 橙色
账户 1 4 5 0
账户2 3 4 1
帐户 3 5 2 1

```

它基本上计算了不同数量的消息我尝试的是：

```
select 
  AccountID, 
  count(distinct message where message = 'RED'), 
  count(distinct message where message = 'Green'), 
  count(distinct message where message = 'Orange') 
from
  activities 
where 
  date like '2013-01%'; 
```

但它返回错误 1064，我认为我`count(distinct....)`的甚至不接近有效，但我找不到任何示例，甚至找不到我应该使用的示例。任何帮助都会很棒，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T17:27:23.370

您可以通过将 CASE 语句与 SUM 聚合函数相结合来做到这一点。例子：

```
select 
  AccountID, 
  sum(case when message = 'red' then 1 else 0 end) red_msgs, 
  sum(case when message = 'green' then 1 else 0 end) green_msgs, 
  sum(case when message = 'orange' then 1 else 0 end) orange_msgs, 
from
  activities 
where 
  `date` like '2013-01%'
group by 
  AccountID; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T17:29:20.457

尝试使用`CASE`：

```
SELECT AccountID, 
  SUM(CASE message WHEN 'Red' THEN 1 ELSE 0 END) AS Red, 
  SUM(CASE message WHEN 'Green' THEN 1 ELSE 0 END) AS Green,
  SUM(CASE message WHEN 'Orange' THEN 1 ELSE 0 END) AS Orange,
FROM activities 
WHERE date like '2013-01%'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T17:57:40.503

这是替代伯尼的替代品。使用 if 可以更具可读性。

```
select 
  AccountID, 
  sum(if(message = 'red'),1,0) red_msgs, 
  sum(if(message = 'green',1,0)) green_msgs, 
  sum(if(message = 'orange',1,0) orange_msgs, 
from
  activities 
where 
  date like '2013-01%'
group by 
  AccountID; 
```

# java - 在数据库中存储日期时会丢失小时和秒

> ID：14817381
> 
> 赞同：-6
> 
> 时间：2013-02-11T17:22:36.610
> 
> 标签：java, mysql, sql, date, jdbc

我在存储之前将日期（java.util.date）存储在mysql数据库中

```
Mon Feb 11 18:17:41 CET 2013 
```

储存后：

```
2013-02-11 00:00:00.0 
```

数据库字段是这样声明的：

```
`DATE_CREATION` date DEFAULT NULL, 
```

我正在使用 InnoDB 引擎

我该怎么做才能避免浪费时间？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T17:24:02.347

[http://dev.mysql.com/doc/refman/5.1/en/datetime.html](http://dev.mysql.com/doc/refman/5.1/en/datetime.html) - 将 MySQl 中的数据类型更改为 DATETIME。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T17:23:58.263

使用`DATETIME`数据类型而不是`DATE`列定义。

# asp.net-mvc - 在 MVC4 EF CodeFirst 中创建关系时，为什么我们需要同时包含 Object 和 ObjectId？

> ID：14817382
> 
> 赞同：2
> 
> 时间：2013-02-11T17:22:40.653
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

例如，当将卡片与集合相关联时，我有：

```
public class Card
{

    public virtual int CardId { get; set; }

    // belongs to a Set
    public virtual int SetId { get; set; }
    public virtual Set Set { get; set; }
 } 
```

为什么我需要 Set 和 SetId？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T17:42:11.773

你不需要设置它。您可以将“Set”指定为虚拟对象，以便在运行时使用导航属性覆盖它。实体框架将自动在表上创建外键“SetId”，即使您无法从对象域模型访问它。

您不需要设置它，但我个人喜欢访问对象上的底层外键 id，因为我可以指定与 int 的关系，而不必实例化相关对象。

**编辑：添加示例代码**

具有以下课程：

```
public class Card
    {
        public virtual int CardId { get; set; }

        // belongs to a Set
        public virtual int SetId { get; set; }
        public virtual Set Set { get; set; }
    }

    public class Set
    {
        public int SetId { get; set; }
        public string SetName { get; set; }
    } 
```

我可以这样做：

```
 var context = new Context(); //Db Code-First Context

    var set = context.Sets.First(s => s.SetName == "Clubs"); //Get the "Clubs" set object

    //Assign the set to the card
    var newCard = new Card();
    newCard.Set = set; 

    //Save the object to the databae
    context.Cards.Add(newCard);
    context.SaveChanges(); 
```

或者做这样的事情：

```
//Assign the set ID to the card
var newCard = new Card();
newCard.SetId = 4; 

//Save the object to the databae
context.Cards.Add(newCard);
context.SaveChanges(); 
```

并且对象将以相同的方式存储。

想象一下，您正在将 ViewModel 发布到控制器。从视图上的下拉列表中传递选定的 Id 更容易，而不是整个对象。

# scala - 如何为 Scala 2.10 设置 Intellij

> ID：14817388
> 
> 赞同：12
> 
> 时间：2013-02-11T17:23:14.183
> 
> 标签：scala, intellij-idea, osx-lion

*   首先我安装了macports

*   然后我通过 macports 安装了 Scala 和 Play：为了确保安装正常，我在 Eclipse 上运行了一个“hello world”。有用！

*   但由于我的目标是使用 Intellij，我尝试按照[http://confluence.jetbrains.com/display/SCA/Getting+Started+with+IntelliJ+IDEA+Scala+Plugin上的说明进行操作](http://confluence.jetbrains.com/display/SCA/Getting+Started+with+IntelliJ+IDEA+Scala+Plugin)

*   在说明的第 3 步（第 3 部分`Creating a Project`）下`use scala distribution`，我不确定要输入什么。有人能告诉我要输入什么吗？我正在使用 mac os x 山狮。我不知道我的 scala 安装路径。

我很感激帮助。我已经查看[了 Scala 的 Intellij Idea 设置，需要澄清](https://stackoverflow.com/questions/13716420/intellij-idea-setup-for-scala-clarification-needed)。那里没有帮助。我的 Intellij 版本是`12.0.3`，我的 scala 安装是`2.10`.

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-10-13T14:32:03.880

只是为了澄清：您可以使用[Homebrew](http://brew.sh/)在 Mac OS X 中安装*scala* ，正如@JasonG 所提到的：

```
$ brew install scala --with-docs 
```

在这种情况下，所选的解决方案将不起作用，因为 IntelliJ 仍会抱怨。无论如何，如公式的注意事项中所述，您将拥有一个专为 IntelliJ 集成而设计的目录：

> ==> 注意事项 要与 IntelliJ 一起使用，请将 Scala 主页设置为：/usr/local/opt/scala/idea

使用这个目录会让 IntelliJ 开心。

**IntelliJ IDEA 13.x 用户更新**：这似乎不再需要了。只需使用基于 SBT 的项目，一切都会自动下载和配置（Scala 编译器和库）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-11T17:46:00.257

让现有工具为您做这类事情会为您提供更好的服务。

使用 SBT 定义您的项目。使用 PaulP (Paul Phillips) 的 SBT 启动器和`sbt-idea`提供 IDEA 项目和模块文件自动生成的插件。

有关详细信息，请参阅我[之前的答案](https://stackoverflow.com/questions/14719854/how-to-add-new-jvm-languages-e-g-scala-clojure-fantom-groovy-to-eclipse-ide/14720673#14720673)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-11T17:41:58.177

我不知道 OSX，但大概你可以打开一个终端，输入`ls -l `which scala``它，然后获取 scala 可执行文件的路径。

然后，您可以在没有结尾的情况下输入该路径，`/bin/scala`进入 intellij 对话。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-11T17:37:39.947

1.  在“Preference”->“Plugins”->“Browse repositories”->“Scala”中找到并安装 scala 插件
2.  打开项目和
3.  打开“项目结构”
4.  打开“面”
5.  按“添加”/“加号图标”
6.  选择“斯卡拉”

然后你可以选择scala版本和设置编译器

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-11T17:48:25.880

我实际上从 typesafe 下载了 scala 和 scala 文档，按照说明将它们解压缩到一个文件夹中，然后指向 intellij。也可以使用 sbt 插件——它让生活变得更好。

或者，您可以使用 brew 安装带有文档的 scala：

```
$ brew install scala --with-docs 
```

2.9.2 这里的说明应该可以工作。 [http://scalacookbook.blogspot.ca/2012/09/scala-for-intellij.html](http://scalacookbook.blogspot.ca/2012/09/scala-for-intellij.html)

作为第三种选择，您可以让 intellij 为您下载 scala。如果找不到，您可以点击下载按钮。我不确定它是否能得到文档。

# linker - 对库中明确存在的符号的未定义引用

> ID：14817392
> 
> 赞同：2
> 
> 时间：2013-02-11T17:23:34.677
> 
> 标签：linker, g++, arm

我已将 TinyXML 构建为静态库：libxmltiny.a

一个简单的测试程序：

```
#include <tinyxml/tinyxml.h>
void main()
{
    TiXmlDocument doc;
    doc.Parse("");
} 
```

两者都使用相同的 g++ 编译器编译，即： `arm-unknown-linux-uclibcgnueabi-g++ 4.6.2`

如果我删除库文件，链接器报告它找不到文件，所以我们知道它找到了文件（我们知道下面的 objdump 在同一个文件上）。

（几个中的第一个）友好错误是：

> test.cpp:(.text.startup+0x58): 未定义对 TiXmlDocument::TiXmlDocument() 的引用

如果我用以下方式抑制去杂化`-Xlinker --demangle=none`：

> test.cpp:(.text.startup+0x58): 未定义引用 _ZN13TiXmlDocumentC1Ev

像这样转储库文件：

> $ objdump -t libtinyxml.a | grep _ZN13TiXmlDocumentC1Ev

产生：

> 00002810 g F .text 000000ac _ZN13TiXmlDocumentC1Ev

所以符号显然存在于库文件中！

一些谷歌搜索建议我更改库顺序，但它是唯一链接到的库（当然除了运行时库）。

我已经为另一个项目构建并链接了这个库，该项目是 g++ 的 powerpc 版本。

我没有更多的猜测了。我可能在这里缺少什么？

# python - Python 中有计划的执行器服务吗？

> ID：14817396
> 
> 赞同：4
> 
> 时间：2013-02-11T17:23:38.163
> 
> 标签：python

一个python新手问题。python中是否有等效于Java的Scheduled executor服务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T23:21:11.457

[threading.timer](http://docs.python.org/2/library/threading.html?highlight=threading#timer-objects)不做你想做的事吗？

```
def hello():
    print "hello, world"

t = Timer(30.0, hello)
t.start() # after 30 seconds, "hello, world" will be printed 
```

**编辑**添加了可重复的示例。

```
import threading
import time

def repeat_every(n, func, *args, **kwargs):
    def and_again():
        func(*args, **kwargs)
        t = threading.Timer(n, and_again)
        t.daemon = True
        t.start()
    t = threading.Timer(n, and_again)
    t.daemon = True
    t.start()

def scheduled_task(msg='hello, world', **kwargs):
    print time.time(), "scheduled_task:", msg, kwargs

repeat_every(.5, scheduled_task )
repeat_every(1, scheduled_task, "Slow", name="Hand luke")

for x in range(5):
    print time.time(), "Main: busy as a bee."
    time.sleep(3) 
```

生成：

```
 1360662042.34 Main: busy as a bee.
1360662042.84 scheduled_task: hello, world {}
1360662043.34 scheduled_task: Slow {'name': 'Hand luke'}
1360662043.34 scheduled_task: hello, world {}
1360662043.84 scheduled_task: hello, world {}
1360662044.34 scheduled_task: Slow {'name': 'Hand luke'}
1360662044.34 scheduled_task: hello, world {}
1360662044.84 scheduled_task: hello, world {}
1360662045.34 Main: busy as a bee.
1360662045.34 scheduled_task: Slow {'name': 'Hand luke'}
1360662045.34 scheduled_task: hello, world {}
1360662045.85 scheduled_task: hello, world {}
1360662046.34 scheduled_task: Slow {'name': 'Hand luke'}
1360662046.35 scheduled_task: hello, world {}
1360662046.85 scheduled_task: hello, world {}
1360662047.34 scheduled_task: Slow {'name': 'Hand luke'}
1360662047.35 scheduled_task: hello, world {}
1360662047.85 scheduled_task: hello, world {}
1360662048.34 Main: busy as a bee.
1360662048.34 scheduled_task: Slow {'name': 'Hand luke'}
1360662048.35 scheduled_task: hello, world {}
1360662048.85 scheduled_task: hello, world {}
1360662049.35 scheduled_task: Slow {'name': 'Hand luke'}
1360662049.35 scheduled_task: hello, world {}
1360662049.86 scheduled_task: hello, world {}
1360662050.35 scheduled_task: Slow {'name': 'Hand luke'}
1360662050.36 scheduled_task: hello, world {}
1360662050.86 scheduled_task: hello, world {}
1360662051.34 Main: busy as a bee.
1360662051.35 scheduled_task: Slow {'name': 'Hand luke'}
1360662051.36 scheduled_task: hello, world {}
1360662051.86 scheduled_task: hello, world {}
1360662052.35 scheduled_task: Slow {'name': 'Hand luke'}
1360662052.36 scheduled_task: hello, world {}
1360662052.86 scheduled_task: hello, world {}
1360662053.35 scheduled_task: Slow {'name': 'Hand luke'}
1360662053.36 scheduled_task: hello, world {}
1360662053.86 scheduled_task: hello, world {}
1360662054.34 Main: busy as a bee.
1360662054.35 scheduled_task: Slow {'name': 'Hand luke'}
1360662054.37 scheduled_task: hello, world {}
1360662054.87 scheduled_task: hello, world {}
1360662055.36 scheduled_task: Slow {'name': 'Hand luke'}
1360662055.37 scheduled_task: hello, world {}
1360662055.87 scheduled_task: hello, world {}
1360662056.36 scheduled_task: Slow {'name': 'Hand luke'}
1360662056.37 scheduled_task: hello, world {}
1360662056.87 scheduled_task: hello, world {} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T19:04:45.767

我的快速研究表明，Java 的 Scheduled Executor 允许在延迟后或定期运行命令（[http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ScheduledExecutorService.html](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ScheduledExecutorService.html)）。

Python 在标准库中没有任何东西可以处理定期执行，但`sched`模块可以在指定的延迟后执行任务：http: [//docs.python.org/2/library/sched.html](http://docs.python.org/2/library/sched.html)

这里问了一个关于周期性事件的类似问题：[在 Python 3 中安排重复事件](https://stackoverflow.com/questions/2398661/schedule-a-repeating-event-in-python-3)（不过是 Python 3）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-28T08:16:02.103

有趣的是，在阅读您的问题前几分钟，我看到了这个 github 包：

[人类的 Python 作业调度。](https://github.com/dbader/schedule)

摘自自述文件的示例：

```
import schedule

def job():
    print("I'm working...")

schedule.every(10).minutes.do(job)
schedule.every().hour.do(job)
schedule.every().day.at("10:30").do(job)

while 1:
    schedule.run_pending()
    time.sleep(1) 
```

您可能想试一试：

```
$ pip install schedule 
```

# php - 添加多个下拉列表的总和

> ID：14817397
> 
> 赞同：0
> 
> 时间：2013-02-11T17:23:40.077
> 
> 标签：php, javascript, jquery, html

我正在尝试将下拉列表值的总和相加，以在底部给出总值...

这是我的 javascript：

```
<script src="js/jquery-1.9.1.min.js"></script>
        <script type="text/javascript">
$("#overtimehours").change(function() {
    var total = 0;
    $.each($(".overtimehours") ,function() {
        total += parseInt($(this).val());
    });
    $("#sum").val(total)
});
    </script> 
```

这是我的php：

```
print "<td><div align=\"center\"><select name=\"overtimehours["; echo $transnum; print "]\"><option value=\"$ot_hours\">$ot_hours</option>"; overtimehours_list(); 
print "</select></div></td>\n";

print "<td><div align=\"center\"><b><input id=\"sum\" type=\"text\"/></b></td></tr>\n"; //add up OT hrs 
```

**已解决 :: JSFIDDLE 演示修复：**http :** [//jsfiddle.net/st8Y3/6/](http://jsfiddle.net/st8Y3/6/)**

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:28:04.183

您同时引用`overtimehours`id 和类名，但您的输入既没有 id 也没有类名。我建议`overtimehours`为要计算的每个输入添加一个名为的类，并将您的选择器更改为`$('.overtimehours')`而不是`$('#overtimehours')`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T17:50:51.157

保持您的 PHP 不变并执行此操作...

```
$(document).on('change', 'select[name="overtimehours"]', function(){
    var total = 0;
    $('select[name="overtimehours"]').each(function() {
        total += parseInt($(this).val());
    });
    $('#sum').val(total)
}); 
```

* * *

编辑：

PHP：

```
print "<td><div align=\"center\"><select class=\"overtimehours\" name=\"overtimehours["; echo $transnum; print "]\"><option value=\"$ot_hours\">$ot_hours</option>"; overtimehours_list(); 
print "</select></div></td>\n";

print "<td><div align=\"center\"><b><input id=\"sum\" type=\"text\"/></b></td></tr>\n"; //add up OT hrs 
```

JAVASCRIPT：

```
$(document).on('change', '.overtimehours', function(){
    var total = 0;
    $('.overtimehours').each(function() {
        total += parseInt($(this).val());
    });
    $('#sum').val(total)
}); 
```

演示：http: [//jsfiddle.net/dirtyd77/st8Y3/3/](http://jsfiddle.net/dirtyd77/st8Y3/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T17:28:12.530

将类添加`overtimeshours`到您的选择声明中。

```
print "<td><div align=\"center\"><select class=\"overtimehours\" name=\"overtimehours["; echo $transnum; print "]\"><option value=\"$ot_hours\">$ot_hours</option>"; overtimehours_list(); 
```

将您的 jQuery 更改为：

```
$(".overtimehours").change(function() {
    var total = 0;
    $.each($(".overtimehours") ,function() {
        total += parseInt($(this).val());
    });
    $("#sum").val(total)
}); 
```

更多关于[类选择器](http://api.jquery.com/class-selector/)**

# knockout.js - 在淘汰赛js中订阅另一个视图模型的值

> ID：14817404
> 
> 赞同：1
> 
> 时间：2013-02-11T17:24:04.787
> 
> 标签：knockout.js, knockout-mapping-plugin

我正在尝试将我的视图模型拆分为多个可重用的视图模型。我有一个视图模型，其中包含几个下拉菜单和一个按钮。

```
 var TopView = function () {
       self.DropDownA = ko.observableArray();
       self.selectedDDA = ko.observable();
       self.DropDownB = ko.observableArray();
       self.selectedDDB = ko.observable();

       $.getJSON("someAPIurl", function (result) {
            ko.mapping.fromJS(result, {}, self);
        });  //this builds dropdownA

        $self.selectedDDA.subscribe(function(newValue) {
            $.getJSON("anotherAPI"+newValue, function (result) {
                ko.mapping.fromJS(result, {}, self);

            });
        };  // this builds dropdownB
        $self.buttonClicked = function() {
            alert("I clicked!");
        }
} 
```

我的主视图模型如下所示：

```
var MainView = function () {
   var self = this;
   var topView = ko.observable({ TopView: new TopView() });

   // How do i get the selected values from topView once the user clicks the button???
} 
```

如何从我的主视图订阅 DropDownA 和 DropDownB 选择的值？？？请帮忙！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:38:35.220

`TopView`只要您不想完全交换它，就不需要使其本身可观察。您只需将其创建为的属性`MainView`并像在绑定中一样访问它：

```
<button data-bind="click:topView.buttonClicked">click me, I&#39;m a button!</button> 
```

**TopView**保持原样（在您修复了使用`self`和`$self`未定义它们之后）

**MainView**看起来像这样：

```
var MainView = function () {
   var self = this;
   self.topView = new TopView();
} 
```

**[JSFiddle 示例](http://jsfiddle.net/VGbD2/1/)**

# git - gitweb 重定向到 https

> ID：14817405
> 
> 赞同：2
> 
> 时间：2013-02-11T17:24:03.957
> 
> 标签：git, redirect, https, apache2, gitweb

我是 Apache 菜鸟，正在尝试自动将 http://.com/gitweb 的请求重定向到 https://.com/gitweb

我已将以下内容设置为 /etc/apache2/conf.d/gitweb

```
Alias /gitweb /usr/share/gitweb
<Directory /usr/share/gitweb>
  Options FollowSymLinks +ExecCGI
  AddHandler cgi-script .cgi
  Redirect gitweb https://<myserver>.com/gitweb
  SSLRequireSSL
</Directory> 
```

但是我只是不断收到 403 禁止通知

```
Forbidden
You don't have permission to access /gitweb on this server.
Apache/2.2.22 (Ubuntu) Server at dndo-gamma Port 80 
```

我不希望此服务器托管的所有目录都重定向；只是对 gitweb 的请求。

我的 /etc/apache2/sites-enabled/000-default 从其默认值不变

```
<VirtualHost *:80>
    ServerAdmin webmaster@localhost

    DocumentRoot /var/www
    <Directory />
            Options FollowSymLinks
            AllowOverride None
    </Directory>
    <Directory /var/www/>
            Options Indexes FollowSymLinks MultiViews
            AllowOverride None
            Order allow,deny
            allow from all
    </Directory>

    ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
    <Directory "/usr/lib/cgi-bin">
            AllowOverride None
            Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
            Order allow,deny
            Allow from all
    </Directory>

    ErrorLog ${APACHE_LOG_DIR}/error.log

    # Possible values include: debug, info, notice, warn, error, crit,
    # alert, emerg.
    LogLevel warn

    CustomLog ${APACHE_LOG_DIR}/access.log combined

    Alias /doc/ "/usr/share/doc/"
    <Directory "/usr/share/doc/">
       Options Indexes MultiViews FollowSymLinks
       AllowOverride None
       Order deny,allow
       Deny from all
       Allow from 127.0.0.0/255.0.0.0 ::1/128
    </Directory>

</VirtualHost> 
```

文件 /etc/apache2/sites-enabled/default-ssl 也与默认的 ubuntu/apache2 安装保持不变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:30:38.050

通常我`mod_rewrite`用于这些类型的任务：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteLog "/var/log/apache2/rewrite_log"

    RewriteRule ^/gitweb/(.*) https://%{SERVER_NAME}/gitweb/%1 [R] 
```

但这不是编程，而是服务器配置；你可以考虑在[serverfault.com上问这个问题](http://serverfault.com)

# ruby-on-rails - Google Omniauth - 完成会话后记住用户授权

> ID：14817406
> 
> 赞同：1
> 
> 时间：2013-02-11T17:24:11.403
> 
> 标签：ruby-on-rails, omniauth

我正在使用omniauth进行登录，我想知道如何存储用户的凭据，以便在他们关闭浏览器并且会话结束或决定注销后->他们下次不需要“允许访问”尝试登录。

我正在使用 OmniAuth Google 和 Identity 的组合。我没有使用设计。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T00:17:35.353

在您的 omniauth 配置文件中，添加以下内容：

```
provider :google_oauth2, ENV['GOOGLE_KEY'], ENV['GOOGLE_SECRET'],
  {
    approval_prompt: 'auto'
  } 
```

**编辑：**

在新版本的`google_oauth2`gem 中，默认会记住用户授权。如果您希望用户始终必须授权登录，请使用新`prompt`选项：

```
provider :google_oauth2, ENV['GOOGLE_KEY'], ENV['GOOGLE_SECRET'],
  {
    prompt: 'consent'
  } 
```

有关更多信息，请阅读[文档](https://github.com/zquestz/omniauth-google-oauth2#configuration)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T17:31:08.480

您可以将其存储`user_id`为浏览器 cookie。当带有 cookie 的未登录用户访问您的站点时，查找该用户的身份验证提供程序（在本例中为 Google）并查询该提供程序以查看该用户是否已登录。

[或者，使用 Devise :) 它允许通过其Rememberable 模块](http://rubydoc.info/github/plataformatec/devise/master/Devise/Models/Rememberable)非常轻松地集成 OmniAuth 。

# .net - 用大小写访问查询和输入参数？

> ID：14817409
> 
> 赞同：-1
> 
> 时间：2013-02-11T17:24:30.043
> 
> 标签：.net, sql, ms-access

我想创建一个可以从允许传入参数的 .NET 应用程序调用的查询。参数是一个简单的整数，它将确定要运行的语句。所以我希望查询看起来像......

```
CASE
    WHEN myParam = 0 THEN
        SELECT blah FROM blah;
    ELSE
        SELECT blah FROM blah;
END 
```

我对 Access 不太熟悉，与 SQL Server 相比，我发现它很痛苦……我希望这是可能的，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-17T16:28:01.747

在单个查询里面，我相信是不可能实现的工作。您可以尝试以下方法之一：

*   为您想要的每个查询编写一个查询。之后，在 .NET 应用程序中，根据原始 myParam 决定调用哪个查询；
*   在 VBA 内部编写一个函数，并根据传递给函数的 de myParam 构造一个动态查询；查询写入临时表，.NET 应用程序首先需要执行该函数，然后查询临时表。

我希望这会有所帮助。

此致，

mpt

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-11T17:43:01.753

这可以做到

您可以加入字符串您的查询以满足条件

```
strQuery ="CASE
                WHEN " + myParam + " = 0 THEN
                   SELECT blah FROM blah;
                ELSE
                   SELECT blah FROM blah;
           END" 
```

在运行时，将评估表达式，例如：如果我将 myParam 作为 0 传递，它将执行为

```
CASE
    WHEN 0 = 0 THEN
        SELECT blah FROM blah;
    ELSE
        SELECT blah FROM blah;
END 
```

# android - android:showAsAction="ifRoom" 在使用 ActiobarSherlock 时不起作用

> ID：14817410
> 
> 赞同：3
> 
> 时间：2013-02-11T17:24:34.540
> 
> 标签：android, android-actionbar, actionbarsherlock

我有以下 menu.xml 结构：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
    <item
        android:id="@+id/menu_button_1"
        android:icon="@drawable/menu1"
        android:showAsAction="ifRoom"
        android:title="@string/s1"/>
    <item
        android:id="@+id/menu_button_2"
        android:icon="@drawable/menu2"
        android:showAsAction="ifRoom"
        android:title="@string/s1">
    </item>
</menu>
@Override
    public boolean onCreateOptionsMenu(com.actionbarsherlock.view.Menu menu) {
        // TODO Auto-generated method stub
        com.actionbarsherlock.view.MenuInflater inflater =getSupportMenuInflater();
        inflater.inflate(R.menu.main_menu, menu);
        return true;

    } 
```

如果操作栏标题太长，则菜单项不会隐藏，但 ActionBar 文本会变短。因此，ActionBarTitle 我得到了 ActionBarT 之类的东西...我尝试将 android:showAsAction="ifRoom" 添加到项目中，但什么也没有变化。如果 ActioBar 标题没有空间，如何强制隐藏菜单图标？谢谢

# alfresco - Alfresco CMIS 限制大小和时间查询

> ID：14817414
> 
> 赞同：1
> 
> 时间：2013-02-11T17:24:59.573
> 
> 标签：alfresco, cmis

我们正在开发与 Alfresco 集成的前端，我们正在使用 CMIS 协议对 Alfresco 的不同实例执行查询，但我们想设置查询可以给出的最大时间和最大结果的限制。这是否可以通过 CMIS 标准实现，还是只能通过 alfresco.global.properties 中的 acl 权限进行管理（阻止 lucene）？我们不想在 Alfresco 中触摸这些设置。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T00:42:09.413

CMIS 规范没有规定限制返回查询结果所需的最长时间。我所知道的 OpenCMIS 库也没有。

但是，您可以通过设置 maxItems 来限制返回的搜索结果的数量。如果您使用的是 OpenCMIS，您可以通过传入一个已调用 setMaxItemsPerPage 方法的[OperationContext来执行此操作。](http://chemistry.apache.org/java/0.8.0/maven/apidocs/org/apache/chemistry/opencmis/client/api/OperationContext.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T14:31:01.753

如果您直接通过 HTTP 使用 AtomPub 绑定并且您正在使用 HTTP GET，那么您可以将 URL 参数添加`maxItems`到查询 URL。

如果您使用 HTTP POST 进行查询，则必须将`maxItems`参数添加到有效负载。请参阅： [http ://docs.oasis-open.org/cmis/CMIS/v1.0/cs01/cmis-spec-v1.0.html#_Toc243905541](http://docs.oasis-open.org/cmis/CMIS/v1.0/cs01/cmis-spec-v1.0.html#_Toc243905541)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-05T08:05:28.487

您只需在位于 Alfresco\tomcat\webapps\alfresco\WEB-INF\classes\alfresco 的文件 repository.properties 中更改几个配置参数。这个参数是：

system.acl.maxPermissionChecks system.readpermissions.bulkfetchsize

您可以将它们设置为您想要的值。默认值设置为 1000。

# javascript - 为什么 Jquery 未定义？

> ID：14817417
> 
> 赞同：-1
> 
> 时间：2013-02-11T17:25:08.200
> 
> 标签：javascript, jquery, google-chrome, tampermonkey

我编写用户脚本，但在 Chrome 中遇到问题（带有 Greasemonkey 的 Firefox 可以）：我使用 Tampermonkey；这是代码：

```
// Header...

(function addjQuery() {
    var head = document.getElementsByTagName('head')[0] ;
    var jQuery = document.createElement('script');

    jQuery.type = 'text/javascript';
    jQuery.src = 'http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js';

    head.appendChild(jQuery);
    waitjQuery() ;
 })();

function waitjQuery(){
    typeof jQuery == 'undefined' ? setTimeout(waitjQuery, 50) : main() ;
} 
```

我的脚本在函数等待中循环并且`typeof jQuery`（或 $...）始终未定义。我已经使用控制台检查了页面 HTML 的头部，并且 jQuery 已正确加载...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T17:42:37.827

谷歌浏览器扩展是沙盒的。因此，您附加到 DOM 的 jQuery 对您的脚本不可用。如果你想在你的扩展中使用 jQuery，你需要在清单文件中定义它。如果你想在页面的域中运行你的脚本，那么你应该在页面中存在 jQuery 之后注入它。

因此，您不想检查 jQuery 是否存在，因为它永远不会，而是如果包含 jQuery 的脚本元素已被附加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T21:36:54.343

您的脚本在 Greasemonkey 中工作只是一个侥幸，一旦您尝试使用任何 Greasemonkey API，（`GM_`函数）它将停止工作。这是因为 Greasemonkey 现在愚蠢地在选择条件下关闭了沙箱，并且脚本代码混合了页面范围和脚本范围（一种危险的做法）。

Chrome 明智地不会关闭它的沙箱，因此代码在那里不起作用。但此外，对于 Tampermonkey，您不想以这种方式添加 jQuery！
您想使用`@require`. 这使您的脚本**更快**、更**安全**，并且**不太可能破坏**页面上的某些内容或被破坏。

[**在此答案**](https://stackoverflow.com/a/12751531/331508)`@require`的第二部分中可以找到一种用于添加 jQuery 的良好跨浏览器技术——在可用时使用。[](https://stackoverflow.com/a/12751531/331508)

# python - PySide 与 gobject.io_add_watch() 共存？

> ID：14817421
> 
> 赞同：0
> 
> 时间：2013-02-11T17:25:23.107
> 
> 标签：python, networking, pyside, gobject

我正在用 python 开发一个网络应用程序，它具有 zeroconf/avahi、双向 UDP 连接和 Qt 接口。对于我的双向通信，我编写了一个小类，它通过 UDP 连接到远程服务器并继续侦听该套接字，以防服务器想要回话。

我真正想要的是，我的网络组件有一个异步接收器，它只是在消息从对等方到达时运行并发出消息。最初我用于`SocketServer`此任务，但我很快发现，一旦我开始运行 GUI 的主循环，`SocketServer`它将停止调用我。`RequestHandler`

所以我研究了一下，发现[了这个](http://rox.sourceforge.net/desktop/node/413.html)，我适应了我的需要。

不幸的是，一旦数据从服务器到达，我的应用程序现在就会出现段错误。

这是一个暴露问题的小示例程序：

```
import sys
import gobject
import socket
from PySide.QtCore import *
from PySide.QtGui import *

def callback(socket, *args):
    data, address = socket.recvfrom(8192)
    print "data arrived", data
    return True

class Client:
    def __init__(self, host, port):
        self.socket = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
        self.remote = (host, port)
        gobject.io_add_watch(self.socket, gobject.IO_IN, callback)
    def send(self, data=[]):
        self.socket.sendto( data,  self.remote)

class Form(QDialog):
    def __init__(self, parent=None):
        super(Form, self).__init__(parent)
        # widget
        self.button = QPushButton("Hello World")
        self.button.clicked.connect(self.sayHello)
        layout = QVBoxLayout()
        layout.addWidget(self.button)
        self.setLayout(layout) 
        self.connection = Client('localhost', 7777)
    def sayHello(self):
        self.connection.send('hello')

if __name__ == '__main__':
    app = QApplication(sys.argv)
    form = Form()
    form.show()
    sys.exit(app.exec_()) 
```

我这样使用它：

*   开始`netcat -u -l -p 7777`
*   启动应用程序
*   点击按钮（netcat 会写 'hello'
*   在 netcat 控制台中输入一些内容并按 Enter
*   -> 应用程序崩溃

现在我想问题是，我正在混合 glib 和 qt，它们都提供类似的功能（就 mainloop 而言），并且`gobject.io_add_watch`依赖于正在运行的 glib-mainloop，但是有一个 Qt mainloop。

在 PySide/Qt 框架中获取异步接收 UDP 客户端的正确方法是什么？如果可能的话，我想避免我的网络代码依赖于 Qt/PySide，因为我想在嵌入式无头系统（beaglebone）上重用它，而 Qt 在这里似乎有点矫枉过正。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:34:45.470

似乎问题很简单：当使用非线程时`gobject`，必须显式地初始化它们。

**在' main** '函数的开头添加以下内容可以解决问题：

```
 gobject.threads_init() 
```

# jquery - JQuery - 添加 DOM 元素然后删除它

> ID：14817422
> 
> 赞同：2
> 
> 时间：2013-02-11T17:25:23.017
> 
> 标签：jquery

我需要在父 div 中添加一个子 div，然后在 x 秒内删除子 div。

可能有几个子 div 添加到父 div。

识别和删除子 div 的最佳方法是什么？

```
$("#parent_div").prepend("<div>"+msg+"</div>"); 
```

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T17:26:34.513

通过保留对它的引用：

```
function doTheChildDivThing() {
    var child = $("<div>" + msg + "</div>");
    $("#parent").prepend(child);
    setTimeout(function() {
        child.remove();
    }, 1000);
} 
```

* * *

在下面回复您的评论：

> 为什么延迟（）（而不是 setTimeout）在这种情况下不起作用？

[`delay`](http://api.jquery.com/delay)与效果队列一起使用。`remove`不是与效果相关的方法。不过，您当然可以使用`delay`其中一种[效果方法](http://api.jquery.com/category/effects/)，例如`slideUp`. 然后，您将在效果方法的完成回调中删除子项，如下所示：

```
function doTheChildDivThing() {
    var child = $("<div>" + msg + "</div>");
    $("#parent").prepend(child);
    child.delay(1000).slideUp(function() {
        child.remove();
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-11T17:11:35.310

试试这个方法：

```
$("<div/>", {

  // PROPERTIES HERE

  text: "Click me",

  id: "example",

  "class": "myDiv",      // ('class' is still better in quotes)

  css: {           
     color: "red",
     fontSize: "3em",
     cursor: "pointer"
  },

  on: {
    mouseenter: function() {
      console.log("PLEASE... "+ $(this).text());
    },
    click: function() {
      console.log("Hy! My ID is: "+ this.id);
    }
  },

  append: "<i>!!</i>",

  appendTo: "body"      // Finally, append to any selector

}); 

// And remove 

setTimeout(() => {
    $('.myDiv').remove();
}, 1000) 
```

# sql - TSQL-在代码中重新排列 sql 作业步骤顺序

> ID：14817424
> 
> 赞同：4
> 
> 时间：2013-02-11T17:25:24.397
> 
> 标签：sql, sql-server-2008, tsql, sql-server-2008-r2, database-administration

我有一些 SQL 维护作业，其中有超过 50 个作业步骤。有时，需要在这些可怕的 SQL 作业中添加一两个步骤。我遇到的问题是我更喜欢每个步骤都按字母顺序（如果可能的话），但要做到这一点，我需要无数次按下向上箭头并等待屏幕刷新。我查看了 sp_update 作业程序，他们似乎没有解决这个问题。

有没有办法可以在代码中完成？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-02T18:26:58.073

我在尝试重新排序步骤而不将它们全部清除并重新添加它们时发现了这个问题。

为了解决这种情况，我有一个三步流程：（假设只有一个步骤是乱序的，或者现有的步骤都是 alpha-order 的）

1) 如有必要，删除您要重新排序的步骤。（如果您需要任何现有值，您应该对 msdb.dbo.sysjobsteps 使用 select）

```
EXEC msdb.dbo.sp_delete_jobstep @job_id = @YOURJOBID, @step_id = @OUTOFORDERSTEPID 
```

2）使用比较来获得你的新步骤应该在的位置。

```
@newStepPosition = SELECT MIN(step_id) FROM msdb.dbo.sysjobsteps WHERE job_id = @YOURJOBID AND step_name > N'YOURNEWSTEPNAME' 
```

3) 只需添加作业步骤，指定位置。所有现有的步骤将随机排列。例如，在 3 处插入会将 3 推到 4、4 推到 5 等。

```
EXEC msdb.dbo.sp_add_jobstep @job_id=@YOURJOBID, @step_name=N'YOURNEWSTEPNAME',
  @step_id=@newStepPosition,
  etc... 
```

使用 MS SQL Server 2008 R2 测试。希望能帮助其他看到这个的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T17:55:12.950

SMO 中的 TSQL 或 API 中没有记录的过程来更改作业步骤的顺序。如果您在 SSMS 中重新排序作业步骤并生成操作脚本，您将看到它会删除并按新顺序重新创建所有作业步骤。

最明显的解决方案是开发您自己的脚本或工具，通过删除和重新创建步骤来重新排序步骤，即重新创建 SSMS 功能，但针对您自己的需要进行了优化。

最后的办法是更新`sysjobsteps.step_id`修改执行顺序，但绝对不建议直接修改系统表。

# java - 地图数组？整数字符串值对映射

> ID：14817426
> 
> 赞同：-4
> 
> 时间：2013-02-11T17:25:34.710
> 
> 标签：java, collections

我需要创建一个`Integer`和`String`配对，比如

```
(1,one)
(2,two)
(3,three) 
```

稍后我想迭代它并获取`String`特定`Integer`值，比如 if int `val == 2`，返回字符串。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T17:27:53.117

`Map<Integer,String> map = ...`

然后当你想遍历键时，使用

`map.keySet()`获取用作键的整数列表

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T17:28:11.443

您可以使用以下方法对这种配对关联进行建模[`Map`](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)：

```
Map m = new HashMap<Integer, String>();
m.put(1, "one");
m.put(2, "two");
m.put(3, "three");

// Iterate the keys in the map
for (Entry<Integer, String> entry : m.entrySet()){
    if (entry.getKey().equals(Integer.valueOf(2)){
        System.out.println(entry.getValue());
    }
} 
```

考虑到根据 的定义`Map`，给定的整数不能有两个不同的字符串。如果你想允许这样做，你应该使用 a`Map<Integer, List<String>>`代替。

请注意，java 不提供`Pair`类，但您可以自己实现一个：

```
public class Pair<X,Y> { 
    X value1;
    Y value2;
    public X getValue1() { return value1; }
    public Y getValue2() { return value2; }
    public void setValue1(X x) { value1 = x; }
    public void setValue2(Y y) { value2 = y; }
    // implement equals(), hashCode() as needeed
} 
```

然后使用`List<Pair<Integer,String>>`.

# c# - 如何停止线程？

> ID：14817427
> 
> 赞同：1
> 
> 时间：2013-02-11T17:25:35.510
> 
> 标签：c#, multithreading

大家好，我用这样的代码开始线程：

```
 Thread[] thr;
    private void button1_Click(object sender, EventArgs e)
    {
        decimal value = numericUpDown2.Value;
        int i = 0;
        threads_count = (int)(value);
        thr = new Thread[threads_count];
        for (; i < threads_count; i++)
        {
            thr[i] = new Thread(new ThreadStart(go));
            thr[i].IsBackground = true;
            thr[i].Start();
        }
    } 
```

如果我的情况变为真，如何阻止所有这些

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-11T17:52:41.837

许多答案说要中止线程。 **除非是紧急情况并且您要关闭应用程序，否则切勿中止线程**。

CLR 保证其内部数据结构不会被线程中止破坏。**这是 CLR 对线程中止做出的唯一 (*) 保证**。它特别不*保证*：

*   该线程实际上将中止。线程可以强化自己以防止被终止。
*   任何不在CLR 本身中的数据结构都*不会损坏。*在关键操作过程中线程中止可能会使 BCL 数据结构或用户数据结构处于任意不一致的状态。这可能会在以后神秘地使您的进程崩溃。
*   该锁将被释放。中止线程可能导致锁被永久持有，它可能导致死锁，等等。

如果我不清楚：*中止线程非常危险，*只有在所有替代方案都更糟时才应该这样做。

那么如果你想启动一个线程然后干净地关闭它呢？

首先，不要那样做。首先不要启动线程。以取消令牌开始 a `Task<T>`，当您想将其关闭时，发出其取消令牌的信号。

如果您确实必须启动一个线程，则启动该线程，以便有某种机制使主线程和工作线程可以干净而安全地通信“我希望您此时干净地关闭自己”。

如果您不知道如何做到这一点，那么请*停止编写多线程代码，直到您学会如何做到这一点。*

* * *

(*) 这是一个小小的谎言；CLR 还对线程中止和特殊代码区域（例如受约束的执行区域和 finally 块）的交互做出某些保证。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T17:27:50.203

残酷的方式（不推荐） - 使用[Thread.Abort](http://msdn.microsoft.com/en-us/library/system.threading.thread.abort.aspx)方法中止线程。此方法在线程上引发 ThreadAbortException。像这样：

```
foreach(Thread thread in thr)
    thread.Abort(); 
```

但更好的方法是通知线程取消并让它正确完成工作。您可以使用 .Net 4 任务简单地做到这一点：

```
Task[] thr = new Task[threads_count];
var source = new CancellationTokenSource();

for (int i = 0; i < threads_count; i++)
{
    thr[i] = Task.Factory.StartNew(go, source.Token);
}

// later, when condition is met
source.Cancel(); 
```

以下是取消的样子：

```
private static void go(object obj)
{
    CancellationToken token = (CancellationToken)obj;
    while (true)
    {
        if (token.IsCancellationRequested)
            return;

        // do some work
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T17:46:15.583

您可以使用 a`CancellationToken`来指示操作何时停止。

1.  创建一个`CancellationTokenSource`作为您在按钮单击处理程序中初始化的类型的实例字段。

2.  在您的后台方法中，定期检查令牌源中的`IsCancellationRequested`属性，或者如果您希望它在取消时抛出异常，则调用它。`Token``ThrowIfCancellationRequested()`

3.  当您想停止`Cancel`对令牌源的线程调用时。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-11T17:31:59.830

如果您想知道如何优雅地终止线程，我建议您查看[MSDN 上的以下示例](http://msdn.microsoft.com/en-us//library/7a2f3ay4%28v=vs.80%29.aspx#codeExampleSection)：

```
using System;
using System.Threading;

public class Worker
{
    public void DoWork()
    {
        while (!_shouldStop)
        {
            Console.WriteLine("worker thread: working...");
        }
        Console.WriteLine("worker thread: terminating gracefully.");
    }
    public void RequestStop()
    {
        _shouldStop = true;
    }
    // Volatile is used as hint to the compiler that this data
    // member will be accessed by multiple threads.
    private volatile bool _shouldStop;
}

public class WorkerThreadExample
{
    static void Main()
    {
        Worker workerObject = new Worker();
        Thread workerThread = new Thread(workerObject.DoWork);
        workerThread.Start();
        Console.WriteLine("main thread: Starting worker thread...");

        while (!workerThread.IsAlive); // Loop until worker thread activates

        // Put the main thread to sleep for 1 millisecond to
        // allow the worker thread to do some work:
        Thread.Sleep(1);

        workerObject.RequestStop();

        // Use the Join method to block the current thread 
        // until the object's thread terminates.
        workerThread.Join();
        Console.WriteLine("main thread: Worker thread has terminated.");
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-07T06:59:03.857

这是 Windows 窗体代码，其中：

*   1）点击开始按钮，主线程创建另一个线程
*   2）再次创建线程创建更多线程。
*   3）点击停止按钮，首先最后一个线程应该终止然后主线程创建的线程应该终止。

    ```
    namespace Thread_TerminateProblem
    {    
        public partial class Form1 : Form
        {     

        private static AutoResetEvent m_ResetEvent = null;                
        private static ManualResetEvent m_ResetEvent_Thread = new ManualResetEvent(false);
        enum ServiceState { Start, Stop };
        bool flag = false;
        int x = 0;
        ServiceState _state;
        public Form1()
        {
            InitializeComponent();
        }

        private void btnStart_Click(object sender, EventArgs e)
        {
            flag = true;
            _state = ServiceState.Start;
            m_ResetEvent = new AutoResetEvent(true);            
            Thread t1 = new Thread(fun_Thread1);
            t1.Start();
            t1.Name = "Thread1";            
        }

        private void btnStop_Click(object sender, EventArgs e)
        {
            _state = ServiceState.Stop;
            m_ResetEvent.Set();           
        }

        private void fun_Thread1()
        {
            while (true)
            {                               
                m_ResetEvent.WaitOne();                
                switch (_state)
                {
                    case ServiceState.Start:
                        {                            
                            Thread t = new Thread(fun_Thread2);
                            t.Start();
                            t.Name = "Thread2";
                            break;
                        }
                    case ServiceState.Stop:
                        {
                            m_ResetEvent_Thread.Set();
                            flag = true;
                            break;
                        }
                }
                // When the child Thread terminates, Then only this thread should terminate
                if (flag == true)
                {
                    // Waiting for notification from child Thread
                    notifyParent.WaitOne();
                    Thread.Sleep(100);
                    break;
                }                
                m_ResetEvent.Reset();                              
            }            
        }

        private static ManualResetEvent notifyParent = new ManualResetEvent(false);

        private void fun_Thread2()
        {
            while (true)
            {
                if (m_ResetEvent_Thread.WaitOne(1, false))
                {
                    notifyParent.Set();
                    break;
                }
                x++;                
            }
        }     
    } 
    ```

    }

* * *

## 回答 #6

> 赞同：-5
> 
> 时间：2013-02-11T17:30:37.323

简单的答案是使用线程 Abort() 方法，但是您的代码并没有真正说明什么条件，

什么循环测试与条件？为什么需要中止线程？我在问，因为可能有更好的方法来解决这个问题

# internet-explorer - 在 CRA 网站上使用 VBScript 在 IE 中单击按钮

> ID：14817436
> 
> 赞同：0
> 
> 时间：2013-02-11T17:25:56.350
> 
> 标签：internet-explorer, button, vbscript, getelementbyid

我对 VBScript 很陌生，我正在尝试通过 CRA 网站[http://www.cra-arc.gc.ca/esrvc-srvce/tx/bsnss/pdoc-eng.html](http://www.cra-arc.gc.ca/esrvc-srvce/tx/bsnss/pdoc-eng.html)在 excel中自动进行一些工资计算. 几天来我一直在试图解决这个问题，但没有运气。我想我的问题很简单：我试图点击上面网站页面底部的“我接受按钮”。

我编写的代码如下，但对于以下行，我不知道如何实际单击按钮。无论我尝试什么，我总是在这里遇到错误。

```
 objIE.Application.document.getElementById("??????").Click 
```

下面的 HTML 代码没有 ID。我还尝试了其他各种方法，例如 getElementByType、getElementByValue，但没有成功

VBScript

```
Sub test()

Set objIE = CreateObject("InternetExplorer.Application")

objIE.Application.Visible = True
objIE.Application.navigate "http://www.cra-arc.gc.ca/esrvc-srvce/tx/bsnss/pdoc-eng.html"

Do While objIE.Application.Busy Or _
    objIE.Application.readyState <> 4
    DoEvents
Loop

objIE.Application.document.getElementById("??????").Click

Do While objIE.Application.Busy Or _
    objIE.Application.readyState <> 4
    DoEvents
Loop

End Sub 
```

HTML 代码

```
<div class="alignCenter">
<input type="button" title="I accept - Begin the calculation" value="I accept" onclick="parent.location='https://apps.cra-arc.gc.ca/ebci/rhpd/startLanguage.do?lang=English'" />
<input type="button" title="I do not accept - Return to Payroll" value="I do not accept" onclick="parent.location='/tx/bsnss/tpcs/pyrll/menu-eng.html'" />
</div> 
```

我会很感激别人的帮助。

谢谢，

马修

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T00:07:46.983

请注意 VB/VBA`DoEvents`函数在 VBScript 中不可用。但是，这是工作代码。

```
Call test

Sub test()

    With CreateObject("InternetExplorer.Application")

        .Visible = True
        .Navigate "http://www.cra-arc.gc.ca/esrvc-srvce/tx/bsnss/pdoc-eng.html"

        Do While .Busy Or .readyState <> 4
            WScript.Sleep 50
        Loop

        Set oInputs = .Document.getElementsByTagName("input")

        For Each elm In oInputs
            If elm.Value = "I accept" Then
                elm.Click
                Exit For
            End If
        Next

        Do While .Busy Or .readyState <> 4
            WScript.Sleep 50
        Loop

        End With

End Sub 
```

# jquery - 如何将新数据 JSON 数据加载到 jqGrid 中？

> ID：14817437
> 
> 赞同：0
> 
> 时间：2013-02-11T17:26:02.490
> 
> 标签：jquery, jqgrid-asp.net

我有一个 ID 为“mylist”的下拉列表，当在下拉列表中选择一个项目时，我在控制器类中触发 GetNewGridData，该控制器类将我想要加载到网格中的 JSON 数据发送回，如何将这些新数据加载到网格中?

```
$("#mylist").change(function () {
           var value = $(this).val();
           alert(value);

           $.ajax({
               url: '<%= Url.Action("GetNewGridData`", "Billing") %>',
               success: function (data) {
                   alert(data);
                   jQuery("#BillingGrid").setGridData('postData', data).trigger('reloadGrid');                                
               }
           });
       }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T18:14:51.377

以下似乎已经完成了诀窍：`$('#BillingGrid').setGridParam({ url: '<%= Url.Action("GetGridData1", "Billing") %>' });`

* * *

```
$("#mylist").change(function () {
               var value = $(this).val();
               alert(value);

               $.ajax({
                   url: '<%= Url.Action("GetGridData1", "Billing") %>',
                   success: function (data) {
                       alert(data);
                       $('#BillingGrid').setGridParam({ url: '<%= Url.Action("GetGridData1", "Billing") %>' });
                       $('#BillingGrid').trigger('reloadGrid');

                   }
               });
           }); 
```

# jquery - 使用 jquery 在按钮单击时启用和禁用表单

> ID：14817440
> 
> 赞同：0
> 
> 时间：2013-02-11T17:26:07.817
> 
> 标签：jquery, jquery-mobile

我正在使用 jquery 和 jquery mobile，基本上我正在尝试创建一个编辑按钮。我有一个包含用户信息的表单，默认情况下全部设置为禁用。我想在单击编辑按钮时启用表单，然后在单击保存按钮时禁用表单。这是表格：

```
<div data-role="fieldcontain">
            <label for="first_name">First Name:</label>
            <input type="text" name="first_name" id="first_name" value="" placeholder="First Name" disabled />
        </div>

        <div data-role="fieldcontain">
            <label for="last_name">Last Name:</label>
            <input type="text" name="last_name" id="last_name" value="" placeholder="Last Name" disabled />
        </div>

        <div data-role="fieldcontain">
            <label for="user_name">User Name:</label>
            <input type="text" name="user_name" id="user_name" value="" placeholder="User Name" disabled />
        </div>

        <div data-role="fieldcontain">
            <label for="password">Password:</label>
            <input type="text" name="password" id="password" value="" placeholder="Password" disabled />
        </div>

        <div data-role="fieldcontain">
            <label for="email">Email Address:</label>
            <input type="text" name="email" id="email" value="" placeholder="Email Address" disabled="disabled" />
        </div> 
```

这是我的按钮：

```
 <button data-inline="true" id="edit">Edit</button>
 <button data-inline="true">Save</button> 
```

这是我一直在玩的jquery：

```
$(document).ready(function(){
    $('#input:edit').click(function)(){
        $('input:email').attr("disabled", false);
    }
}); 
```

我注意到的一件事（可能是问题的一部分）是，即使我将文本输入的代码从禁用更改为启用，即使在我刷新页面后它们仍保持禁用状态，我必须回到我的主页，刷新，然后导航到用户信息页面以启用它们。因此，如果页面正确更新，我尝试过的一些事情可能是正确的。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T17:28:51.780

这应该有效：

```
$(document).ready(function(){
    $('#input:edit').click(function)(){
        $('input:email').attr("disabled", "");
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T17:31:30.810

尝试

```
$(document).ready(function(){
$('#edit').click(function)(){
    $('#email').attr("disabled", false);
}
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T17:38:36.190

你应该使用`$('input:email').textinput('enable');`

[jQuery Mobile 文本输入方法](http://jquerymobile.com/demos/1.2.0/docs/forms/textinputs/methods.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T18:53:02.527

好的，想通了。将 jquery 代码更改为：

```
function edit() {
    alert("edit");
    $('#first_name').prop('disabled', false);
    $('#last_name').prop('disabled', false);
    $('#user_name').prop('disabled', false);
    $('#password').prop('disabled', false);
    $('#email').prop('disabled', false);
    location.reload();
} 
```

和按钮代码：

```
 <button data-inline="true" id="edit" onclick="edit()">Edit</button>
 <button data-inline="true" id="save" onclick="save()">Save</button> 
```

# svn - TortoiseSVN CLI 工具在更新后停止工作

> ID：14817441
> 
> 赞同：0
> 
> 时间：2013-02-11T17:26:12.377
> 
> 标签：svn, tortoisesvn

使用 TortoiseSVN 安装程序安装的命令行工具对我不起作用。他们在 1.7.x 中工作，但是当我从 1.7.x 升级到 1.7.11 时，他们停止工作。Windows 资源管理器 GUI 工作正常。更新、签入等都可以从 GUI 很好地工作。但是当我尝试使用命令行时，它说

> 路径 '。' 似乎是颠覆 1.7 或更高版本的工作副本。

它还显示一条消息，我可能需要将 Subversion 客户端更新为工作副本。我完全卸载了 TortoiseSVN 并使用最新版本重新安装了它，但命令行工具仍然无法工作。我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T17:37:33.763

看起来您没有执行`svn`与 TortoiseSVN 捆绑的命令。为确保，您可以使用完整路径，例如：

```
"%programfiles%\TortoiseSVN\bin\svn" status 
```

检查系统`PATH`变量：

```
echo %PATH% 
```

可能还有其他一些包含 SVN 二进制文件的目录。

# asp.net-mvc - 无需 UI 自动化的痛苦集成测试 MVC 应用程序

> ID：14817442
> 
> 赞同：4
> 
> 时间：2013-02-11T17:26:13.587
> 
> 标签：asp.net-mvc, integration-testing, mvccontrib

我正在开始开发一个主要使用 TDD 编写的新 MVC 应用程序。我想添加一些集成测试以确保完全连接的应用程序（我将 StructureMap 用于 IOC，NHibernate 用于持久性）按预期工作。

虽然我打算使用 Selenium 编写一些功能性冒烟测试，但出于可维护性的原因，我宁愿通过使用良好的旧 C# 在我的控制器上直接调用操作来完成大部分集成测试。

令人惊讶的是，关于如何实现这一点的指导很少，所以我尝试了一个攻击计划

1.  将所有引导代码从 Global.asax 中拉出并放入一个单独的类中
2.  尝试利用 MvcContrib-TestHelper 或类似工具来创建 ASP.NET 依赖项（上下文、请求等）

我已经完成了第 1 步，但真的不知道如何进行第 2 步。任何指导将不胜感激。

```
public class Bootstrapper
{              
    public static void Bootstrap()
    {
        DependencyResolverInitializer.Initialize();
        FilterConfig.RegisterFilters(GlobalFilters.Filters);
        RouteConfig.RegisterRoutes(RouteTable.Routes);
        ModelBinders.Binders.DefaultBinder = new SharpModelBinder();
    }           
}

public class DependencyResolverInitializer
{
    public static Container Initialize()
    {
        var container = new Container();
        container.Configure(x => x.Scan(y =>
        {
            y.Assembly(typeof(Webmin.UI.FilterConfig).Assembly);
            y.WithDefaultConventions();
            y.LookForRegistries();

        }));

        DependencyResolver.SetResolver(new StructureMapDependencyResolver(container));
        return container;
    }
}

public class StructureMapDependencyResolver : IDependencyResolver
{
    private readonly IContainer _container;

    public StructureMapDependencyResolver(IContainer container)
    {
        _container = container;
    }

    public object GetService(Type serviceType)
    {
        if (serviceType.IsAbstract || serviceType.IsInterface) {
            return _container.TryGetInstance(serviceType);
        }
        return _container.GetInstance(serviceType);
    }

    public IEnumerable<object> GetServices(Type serviceType)
    {
        return _container.GetAllInstances(serviceType).Cast<object>();
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T09:59:58.770

如果您想在不通过 UI 的情况下对 ASP.NET MVC 应用程序进行自动化*的端到端测试*，一种好方法是以编程方式将 HTTP 请求发送到不同的 URL，然后断言系统的状态。

您的集成测试基本上如下所示：

1.  **安排：**启动一个 Web 服务器来托管被测 Web 应用程序
2.  **Act：**向特定 URL 发送 HTTP 请求，该请求将由控制器操作处理
3.  **断言：**验证系统的状态（例如查找特定的数据库记录），或验证响应的内容（例如在返回的 HTML 中查找特定的字符串）

[您可以使用CassiniDev](https://nuget.org/packages/CassiniDev/4.0)*在进程内*Web 服务器中轻松托管 ASP.NET Web 应用程序。此外，以编程方式发送 HTTP 请求的一种方便方法是使用[Microsoft ASP.NET Web API 客户端库](https://nuget.org/packages/Microsoft.AspNet.WebApi.Client/4.0.20710.0)。

这是一个例子：

```
[TestFixture]
public class When_retrieving_a_customer
{
    private CassiniDevServer server;
    private HttpClient client;

    [SetUp]        
    public void Init()
    {
        // Arrange
        server = new CassiniDevServer();
        server.StartServer("..\relative\path\to\webapp", 80, "/", "localhost");
        client = new HttpClient { BaseAddress = "http://localhost" };
    }

    [TearDown]
    public void Cleanup()
    {
        server.StopServer();
        server.Dispose();
    }

    [Test]
    public void Should_return_a_view_containing_the_specified_customer_id()
    {
        // Act
        var response = client.GetAsync("customers/123").Result;

        // Assert
        Assert.Contains("123", response.Content.ReadAsStringAsync().Result);
    }
} 
```

如果您正在寻找该技术的更完整示例，您可以在我的[示例 MVC 4 Web 应用程序](https://github.com/ecampidoglio/gameoflife)中找到它，我在编写[自动化验收测试](https://github.com/ecampidoglio/gameoflife/tree/master/Src/AcceptanceTests/Steps)的上下文中对其进行了演示。

# android - 如何从 Fragment BackTrace 中清除 FragmentBreadCrumbs？

> ID：14817443
> 
> 赞同：2
> 
> 时间：2013-02-11T17:26:13.820
> 
> 标签：android, android-fragments, fragment, breadcrumbs

当我想设置**BreadCrumbTitle**时，我会这样做：

```
FragmentTransaction transaction_action = fragment_Mgr.beginTransaction();
...
transaction_action.setBreadCrumbTitle("BreadCrumbTitle"); 
```

但问题是面包屑一直留在那里，**我该如何去除它？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:39:52.503

不，你不能删除它。如果语言环境发生变化，即使它也无法更改，因此也不推荐。[它写在这里见 API Documentaion 为证明。](http://developer.android.com/reference/android/support/v4/app/FragmentTransaction.html#setBreadCrumbTitle%28java.lang.CharSequence%29)

# php - 在不编辑实际文件的情况下修改 php.ini

> ID：14817444
> 
> 赞同：0
> 
> 时间：2013-02-11T17:26:18.550
> 
> 标签：php, webserver

这甚至可能吗？.. OsCommerce 需要这些设置，

register_globals --> 开启 magic_quotes_gpc --> 关闭

但不幸的是，由于共享主机，我不允许编辑 php.ini 文件。还有其他方法吗？我只有 FTP 访问权限。

**编辑：**

**PHP 版本**5.2.17

**服务器 API** CGI/FastCGI

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T17:30:23.283

您可以尝试在 PHP 脚本的顶部使用“ini_set”。

ini_set 的文档在这里：[http ://www.php.net/ini_set](http://www.php.net/ini_set)

我不确定 OsCommerce 是如何工作的，但希望有一个主 index.php 文件，您只需要修改那个文件。

最坏的情况是到处都有大量的 PHP 文件需要修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T17:34:20.050

并非所有 ini 变量都可以通过 ini_set 进行更改。但有些变量可以在自定义 php.ini 中更改。

在这种情况下，您无法更改`magic_quotes_gpc`并`register_globals`通过，`ini_set()`但您可以更改 in `PHP_INI_PERDIR`，也就是说，如果您的服务器允许您创建自定义 php.ini，那么您可以在那里更改它。

# c++ - WinAPI 窗口消息似乎被插件窃取 - 如何修复？

> ID：14817446
> 
> 赞同：2
> 
> 时间：2013-02-11T17:26:26.737
> 
> 标签：c++, winapi, mfc, vst

首先，一些链接（对于那些想自己尝试的人）：我正在将[Proteus VX VST 插件](http://www.creative.com/emu/proteusvx/)加载到我的主机[OpenMPT](http://openmpt.org/)中。该插件工作得很好，但它似乎窃取了一些窗口消息，因此单击主机创建的菜单，甚至单击关闭按钮都没有效果。单击关闭按钮甚至不会触发其“按下按钮”动画，因此 Windows 可能不会收到任何有关窗口操作的消息。我知道像 Renoise 这样的其他 VST 主机没有这个问题（单击窗口的关闭按钮在那里工作得很好），所以必须有办法避免这种情况。

我怀疑 Proteus VX 安装了一个不符合要求的窗口 proc，它可能忘记调用 MFC 自己的窗口 proc（也可能不调用 DefWindowProc），但我不知道如何找到它，更不用说如何修复它了。我尝试在打开插件窗口之前保存原始的 GWL_WNDPROC，然后在显示编辑器后立即恢复此 proc，但这无济于事。

**编辑：**插件肯定做一些狡猾的事情；在允许它对我的窗口做任何事情之前，我使用存储原始 WindowProc

```
windowProc = GetWindowLongPtr(m_hWnd, GWL_WNDPROC); 
```

并在插件完成其窗口初始化业务后使用

```
SetWindowLongPtr(m_hWnd, GWL_WNDPROC, windowProc); 
```

这让我可以使用自己的菜单和窗口的 [x] 按钮，直到我在插件 GUI 中摆弄一下；我想插件一旦收到输入焦点就会**再次**覆盖窗口进程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-21T22:00:30.700

以防万一有人遇到这个问题，解决方案是不要将 VST GUI 放在我自己的窗口中。相反，我在该窗口中放置了一个静态标签，然后告诉 VST 将此标签用作父标签。

# django - 在 ModelForm 的构造函数中设置 FormField 值

> ID：14817447
> 
> 赞同：2
> 
> 时间：2013-02-11T17:26:33.660
> 
> 标签：django, django-forms

我在 Django ModelForm 中有一个额外的字段。这是一个布尔字段，如果模型中的另一个字段不为空，我希望将其设置为 true。由于我不想动态创建 ModelForm，如何更改 ModelForm 构造函数中字段的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T17:38:40.893

这样的事情可能对你有用：

```
class ModelFormClass(forms.ModelForm):

    boolean_field = forms.BooleanField()

    def __init__(*args, **kwargs):
        super(ModelFormClass, self).__init__(*args, **kwargs)
        if self.instance.pk and not self.instance.field:
            self.fields['boolean_field'].initial = True 
```

# java - JComboBox NullPointerException 错误

> ID：14817449
> 
> 赞同：-3
> 
> 时间：2013-02-11T17:26:37.143
> 
> 标签：java, swing

我正在尝试从 jComboBox1 更新其他 Jcomboboxes(With ItemStateChanged Event)。我发现很难知道为什么下面的代码会抛出 Null Pointer Exception 。（jComboBox5 已通过 jComboBox1 更新）当我尝试从 jComboBox1 中选择一个元素时，我得到 NPE 。

```
 private void jComboBox3ItemStateChanged(java.awt.event.ItemEvent evt) {                                            
        // TODO add your handling code here:
        try {
            System.out.println("Count" + jComboBox3.getItemCount());
            if(jComboBox3==null)
            {
                System.out.println("xczxzvzvvxzxzxc999");
            }
            if (jComboBox3.getItemCount() > 1) {
                System.out.println("Selected 3 element"+jComboBox3.getSelectedItem());
     /*Line 1136*/           if (jComboBox3.getSelectedItem().toString().equals("New Payment Term") == true) {
                    jComboBox3.setSelectedIndex(0);
                    ims.MainWindow.jDesktopPane1.add(new ims.Payment.PaymentTerms("Cust"), javax.swing.JLayeredPane.DEFAULT_LAYER);
                }
            }
        } catch (Exception x) {
            x.printStackTrace();
        }
    } 
```

下面是堆栈跟踪

```
java.lang.NullPointerException
    at ims.Customer.CustomerFrame.jComboBox3ItemStateChanged(CustomerFrame.java:1136)
    at ims.Customer.CustomerFrame.access$100(CustomerFrame.java:22)
    at ims.Customer.CustomerFrame$2.itemStateChanged(CustomerFrame.java:387)
    at javax.swing.JComboBox.fireItemStateChanged(JComboBox.java:1225)
    at javax.swing.JComboBox.selectedItemChanged(JComboBox.java:1273)
    at javax.swing.JComboBox.contentsChanged(JComboBox.java:1329) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:32:02.670

为了找到在`java.lang.NullPointerException`异常发生的行上放置断点的原因，在这种情况下为 1136，并调查该行上的变量。

我的猜测是`jComboBox3.getSelectedItem()`正在回归`null`。

# asp.net-mvc-4 - '去查看'，'添加视图'弹出菜单在 vs 2012 中不可用

> ID：14817451
> 
> 赞同：1
> 
> 时间：2013-02-11T17:26:58.860
> 
> 标签：asp.net-mvc-4, visual-studio-2012

我有一个带有 VS 2012 的 MVC 4 项目。对于所有控制器，只要我右键单击公共操作方法以转到视图或添加新的，我都看不到“转到视图”和“添加视图”之类的菜单项查看该操作。当我来自视图页面时，同样的问题，并尝试通过在该视图页面内右键单击返回其控制器。请指教。谢谢你。

我在 Windows 8 上使用 Visual Studio 2012。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-27T21:33:48.577

我也对此感到困惑……如果您在 API 控制器中，则无法获得该选项。对于常规控制器，选项在那里（与 win 7 上的 2012 pro 相比）

希望这可以帮助某人

# xpath - xmlstarlet sel 首先连接两个 - 是错误还是我在 CLI 中的错误

> ID：14817452
> 
> 赞同：0
> 
> 时间：2013-02-11T17:27:00.707
> 
> 标签：xpath, epub, xmlstarlet

我试图从[content.opf](http://idpf.org/epub/20/spec/OPF_2.0.1_draft.htm)文件的清单部分获取 bash 元素。

我确实使用 `xmlstarlet sel -N "dc=http://purl.org/dc/elements/1.1/" -N "opf=http://www.idpf.org/2007/opf" -t -v 'opf:package/opf:manifest/opf:item/@href' content.opf` 并将列表中的前两个结果连接为一个元素。

**是 xmlstarlet 的错误还是我的错？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T17:45:29.120

*我的错。当然。*

换成`-t -v 'opf:package/opf:manifest/opf:item/@href'`确实`-t -m 'opf:package/opf:manifest/opf:item' -v '@href' -n`解决了问题！

**提醒自己——RTFM。**任何对什么感兴趣的可以访问[我的脚本](https://bitbucket.org/Kacper_Perschke/epubpack)。

# mysql - sql错误：插入时“字段列表”中的未知列

> ID：14817455
> 
> 赞同：11
> 
> 时间：2013-02-11T17:27:25.567
> 
> 标签：mysql, sql, database, insert

我正在尝试使用 Java 在表中插入一个条目，它返回一个错误“'字段列表'中的未知列 XX”。

例如：我使用这一行创建了一个表：

```
CREATE  TABLE `dbcs`.`born in` (`person` VARCHAR(100) ,`year` INT ,`prob` FLOAT); 
```

该表已成功创建。

当我尝试向表中插入一些东西时，它会显示错误。例如，命令：

```
INSERT INTO `dbcs`.`born in` VALUES (`Alanis Morissette`,1974,1.0) 
```

将产生错误：

> “字段列表”中的未知列“Alanis Morissette”

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-11T17:28:22.890

字符串必须用引号括起来。您正在使用不正确的刻度。

```
INSERT INTO `dbcs`.`born in` VALUES ('Alanis Morissette',1974,1.0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T17:28:25.217

利用

```
INSERT INTO dbcs.born in VALUES ('Alanis Morissette',1974,1.0) 
```

# algorithm - 使用一组特定的规则将数组的元素归零？

> ID：14817457
> 
> 赞同：3
> 
> 时间：2013-02-11T17:27:32.760
> 
> 标签：algorithm

给定 n 个数字，您可以任意次数执行以下操作：选择数字的任何子集，其中没有一个为 0。将子集中的数字减 1，将不在子集中的数字增加 K。

是否可以执行使除其中一个之外的所有数字都变为 0 的操作？

输入：第一行包含测试用例 T 的数量。接下来是 2*T 行，每个用例 2 行。测试用例的第一行包含数字 n 和 K。下一行包含 n 个数字，a_1...a_n。

输出：输出T行，每个测试用例对应一个。对于测试用例，如果存在描述的操作序列，则输出“YES”，否则输出“NO”。

样本输入：

```
3
2 1
10 10
3 2
1 2 2
3 2
1 2 3 
```

样本输出：

```
YES
YES
NO 
```

约束：

```
1 <= T <= 1000
2 <= n <= 100
1 <= K <= 10
0 <= a_i <= 1000 
```

我已经通过以下算法接受了我的解决方案---

```
a[i] is value in ith cell
n[i] is number of times it is selected in subset
T is total number of times the operation is done

=> a[i] - n[i] + (T - n[i])*K = 0 for all except 1
=> a[i]= n[i] (K+1) -TK 
=> a[i] = (K+1)(n[i]-T) + T 
```

因此，除 1（将变为 0）和 T 除以 K+1 时，所有 a[i] 的余数都应该相同。我怀疑这个条件是必要的，但它是充分的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T19:17:13.560

## 步骤1

想象一个包含以下内容的动作：

1.  选择由所有数字组成的子集 A，其中 a[i]>=K+1
2.  选择由整个集合 K 次组成的子集

子集 A 中的数字将减少 K+1 倍，而集合 A 之外的数字将保持不变（增加 K，然后减少 K 倍）。

重复这个动作，直到所有数字都小于 K+1。

这一步会将数字更改为它们的余数模 K+1。

## 第2步

现在假设所有数字都相同（1 除外）。

我们现在可以选择由整个集合组成的子集（奇数除外）。

这会将所有数字减 1（奇数除外）。重复这个选择，直到我们一直减少到 0。

## 结论

因此，如果所有数字（除了一个）具有相同的余数模 K+1，我们可以使用步骤 1 将它们都降低到相同的级别，然后使用步骤 2 将公共级别降低到 0。

# javascript - 用于引导的 Css 智能感知

> ID：14817458
> 
> 赞同：1
> 
> 时间：2013-02-11T17:27:33.637
> 
> 标签：javascript, jquery, css, visual-studio

我刚刚在 Visual Studio 2012 中为我的项目下载了 twitter bootstrap。当我开始编码时，我并没有获得 bootstrap css 类的智能。我正在研究具有剃刀视图的 MVC-4。如何让 css intellisense 为 bootstrap 工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T17:36:25.560

我不使用 VS2012，所以我不能与那里的标准说话，但我很惊讶认为 CSS 的智能感知会拾取类之类的东西（我需要在这里更改 IDE 吗？）。您的[HTML 类](http://tantek.com/2012/353/b1/why-html-classes-css-class-selectors)通常用于选择器的 CSS 吗？

除非您使用 LESS 或 Sass 并试图让它与其中的独特属性一起使用？

# c# - 异常处理的通用方式

> ID：14817467
> 
> 赞同：-10
> 
> 时间：2013-02-11T17:27:56.997
> 
> 标签：c#, .net, vb.net, exception, exception-handling

```
catch(Exception ex) 
```

//发送到数据库表记录的代码是 -

> ex.ToString()

未发送参数。

```
private int GetAge (int ID)
{

}

private string GetName (int ID)
{

} 
```

我如何以通用方式编写，以便所有方法都可以将参数与异常（ex.ToString）连接起来？有没有通用的方法（对于winforms）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T17:48:28.687

这是正在记录的内容：

```
ex.ToString() 
```

大概是因为这就是您要记录的全部内容。我想，这样的东西是日志语句吗？：

```
catch (Exception ex)
{
    Logger.Log(ex.ToString());
} 
```

向正在记录的内容添加更多信息的方法是将其传递给记录器。像这样的东西：

```
catch (Exception ex)
{
    Logger.Log(string.Format("Failed to get a Name for the ID: {0} - Exception was: {1}", ID, ex.ToString()));
} 
```

这是假设您只记录字符串。您也许可以扩展它以包含更多强类型数据，也许将自定义异常直接传递给记录器本身。如果不了解更多有关记录器的功能，很难说。也许是带有泛型类型参数的自定义异常，它在内部将参数添加到其字符串表示中？同样，如果没有更多信息，在这个简单的示例中很难说。

至于使整个事物通用化，这实际上取决于您自己的设计。在您提供的两个方法签名中，只有一个参数。因此，自定义异常上的单个通用属性将适用于此。具有多个参数的方法呢？具有超出其自身参数的上下文的方法呢？（例如，方法类的实例属性。）

每个例外都可能有很大的不同。每个代码块都是域中自己的一段逻辑。并且提供带有错误的有意义的上下文（顺便说一句，这是一件*很棒*的事情）通常对这些代码块的逻辑差异非常主观。有时是强类型信息，有时是关于情况的人类可读上下文等。

使用遗留代码，一种可行的长期方法是识别需要额外信息的错误并修改错误处理代码以提供该信息。您通常可以在一次生产过程中捕捉到很多它们，但会有一些落后者。随着时间的推移，这个数字会减少。从管理层的角度来看，这不是最理想的方法，因为它通常需要两个生产版本来修复一个错误（一个版本添加更多日志记录，另一个版本在提供必要的运行时信息后实际修复错误）。但是，好吧，这就是这些新奇的坏代码所带来的技术债务：

```
catch (Exception ex)
{
    Logger.Log(ex.ToString());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T20:37:18.970

`GetAge`如果您的 Logger 暴露在与or相同的级别，@David 的方法很好`GetName`。但是，如果您的记录器处于较高级别（例如顶级异常处理程序）并且您想将上下文添加到较低级别的异常中，那么如果您想将上下文添加到错误中，您可能希望[包装异常](http://msdn.microsoft.com/en-us/library/vstudio/ms229049%28v=vs.100%29.aspx).

例如

```
private int GetAge (int ID)
{
   try 
   {
        GetAgeFromFile(ID)

   }
   catch {System.IO.Exception e }
   {
        throw new CommunctionError(
        string.Format("Cannot access age file ID:{0}.",ID) ,
        e);
   }

} 
```

请注意，异常过滤器将其限制为非常具体的错误。除了顶级异常处理程序之外，您应该始终将捕获限制在可以合理恢复的范围内。

# tsql - 从 SQLServer 中的表中获取 time(7) 字段的平均值

> ID：14817472
> 
> 赞同：1
> 
> 时间：2013-02-11T17:28:09.813
> 
> 标签：tsql, time

我在 SQLServer 数据库中有一个表，其中有一个名为“TimeTaken”的字段，其数据类型为 time(7)。我希望能够在报告中显示这些行的平均值，但迄今为止我的努力不断收到错误“不允许从数据类型时间到浮点数的显式转换”。

任何关于正确格式的想法都可以在这里使用，因为大多数在线示例似乎都与 DateTime 数据类型或获取 2 次之间的差异等有关，这不是我想要的。

```
AVG(CAST(s.TimeTaken AS FLOAT)) AS 'Average Time to Play Hole' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T17:40:24.470

**Time 是查找 Average 的无效数据类型**，因此请尝试如下...

```
Cast(DateAdd( ms,avg(DateDiff( ms, '00:00:00', s.TimeTaken)), '00:00:00' )  as time) as 'Average Time to Play Hole' 
```

# spring-mvc - 从类路径解析 spring MVC 视图

> ID：14817480
> 
> 赞同：4
> 
> 时间：2013-02-11T17:28:25.230
> 
> 标签：spring-mvc

我在 Spring MVC Web 应用程序的类路径上的 jar 中打包了一些 JSP 视图。如何在应用程序的 Spring XML 文件中设置视图解析器以将视图名称解析为这些类路径资源之一？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T01:24:08.280

JAR 文件结构可能很重要。[Java Servlet 3.0 规范的§10.5](http://download.oracle.com/otn-pub/jcp/servlet-3.0-fr-eval-oth-JSpec/servlet-3_0-final-spec.pdf)说：

> ...例如，对于在 Web 容器中具有上下文路径 /catalog 的 Web 应用程序，index.html 文件位于 Web 应用程序层次结构的基础或包含索引的 WEB-INF/lib 内的 JAR 文件中。 META-INF/resources 目录下的 html 可以满足来自 /catalog/index.html 的请求...

也许尝试以这种方式为您的 JSP 提供服务。如果它有效，那么您只需要一个简单的 Spring InternalResourceViewResolver 配置有正确的前缀/后缀。

# java - 即使显示是固定长度，如何确保始终看到 JLabel 值的结尾？

> ID：14817482
> 
> 赞同：-2
> 
> 时间：2013-02-11T17:28:28.373
> 
> 标签：java, swing

我有一个键=值格式`JLabel`的文本“ `OutputVariable1=5.34`”。这`JLabel`有一个固定的大小，可以比它包含的文本字符串短。发生这种情况时，`JLabel`这只显示文本“ `OutputVariab...`”。`JLabel`如果整个字符串太长，我需要确保始终显示该值并缩短键名，例如：“ `OutputVar...=5.34`”。文本字符串不是恒定的，所以我需要以编程方式执行此操作。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:34:11.857

您能否将其分成两个标签，一个包含“OutputVariable”，另一个包含“=5.34”，或者数字的精度是否不同（即在某些情况下您可以有 5.19382？）？

如果不是，请使用[`FontMetrics.stringWidth()`](http://docs.oracle.com/javase/6/docs/api/java/awt/FontMetrics.html#stringWidth%28java.lang.String%29)计算您的字符串的宽度，如果它太长，请插入“...”并继续在您想要的位置放置字母，直到它适合。

# java - InetAddress 类 getLocalHost() 如何返回“首选”IP 地址？

> ID：14817483
> 
> 赞同：0
> 
> 时间：2013-02-11T17:28:40.143
> 
> 标签：java, networking

我开始深入研究通过 Java 获取 IP 地址。我知道一台机器可以通过不同的网络接口拥有各种 IP，所以我对我发现的一些示例代码感到有些困惑，这些示例代码似乎返回了“首选”IP 地址（根据 Windows 7 命令行 ipconfig /all 首选）。

当我在本地计算机上运行以下代码时，会返回 26 个 NetworkInterface 对象，其中一些具有多个 InetAddress 对象（包括“首选”对象）：

```
Enumeration<NetworkInterface> eNI = null;
    NetworkInterface ni = null;

    Enumeration<InetAddress> eIA = null;
    InetAddress ia = null;

    try {
        eNI = NetworkInterface.getNetworkInterfaces();
    } catch (Exception e) {
    }

    while (eNI.hasMoreElements()) {

        ni = eNI.nextElement();
        System.out.println("NtwkIntfc name: " + ni.getName());
        System.out.println("NtwkIntfc disp name: " + ni.getDisplayName());

        try {
            System.out.println("NtwkIntfc hardware addr: " + Hex.encodeHexString(ni.getHardwareAddress()));
        } catch (Exception e) {
        }

        eIA = ni.getInetAddresses();

        while (eIA.hasMoreElements()) {

            ia = eIA.nextElement();

            System.out.println("InetAddress host address: " + ia.getHostAddress());
            System.out.println("InetAddress host name: " + ia.getHostName());

        }
    } 
```

然而，这个简单得多的代码只返回“首选”IPv4 地址：

```
try {
        InetAddress thisIp = InetAddress.getLocalHost();  
        System.out.println("IP:" + thisIp.getHostAddress());
    } catch (Exception e) {
        e.printStackTrace();
    } 
```

我似乎找不到将其标识为“首选”的 NetworkInterface（以及其中的 InetAddress）属性/方法，所以我想知道类方法 InetAddress.getLocalHost() 是如何做到的？此外，此首选 IP 是标准网络概念还是某种类型的 Windows 特定概念？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T17:32:53.473

查看网络设置中的指标。还可以查看 Windows 7 命令行下的“路由打印”。我认为指标越低，适配器就越“首选”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T17:33:55.167

查看[InetAddress.getLocalHost()](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/net/InetAddress.java#InetAddress.getLocalHost%28%29)的源代码。

简而言之，它获取绑定到主机名的 IP 地址，并从返回的 IP 地址数组中返回第一个条目。

除了它是映射到机器主机名的地址外，我没有看到任何特定于此的东西*（*请注意，一台机器也可以有多个名称）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T17:34:20.007

我认为“首选”可能以某种方式指代路由表中最通用的条目。谁知道那些 Windows 疯子在想什么。

但是，此地址也可能对应于最有可能是公共 IP/由 DHCP 分配的地址。如果您正在寻找最有可能公开/用于打开端口的地址的代码，这就是我用来获取 IPv4 地址的方法：

```
public static InetAddress getNetworkAddr() {
    InetAddress localAddr = null;

    // Find our public IP address
    Enumeration<NetworkInterface> netInterfaces;
    try {
        netInterfaces = NetworkInterface.getNetworkInterfaces();
        while (netInterfaces.hasMoreElements()) {               
            NetworkInterface ni = (NetworkInterface) netInterfaces.nextElement();               
            Enumeration<InetAddress> addresses = ni.getInetAddresses();             
            while( addresses.hasMoreElements() ) {
                InetAddress addr = addresses.nextElement();

                // System.out.println("Checking out " + ni.getName() + " with address " + addr.toString());

                if (!addr.isSiteLocalAddress() && 
                        !addr.isLoopbackAddress() && 
                        !addr.isLinkLocalAddress() &&
                        addr.getHostAddress().indexOf(":") == -1) { // MAC/IPv6 address detection
                    System.out.println("Interface " + ni.getName()
                            + " seems to be InternetInterface. I'll take address " + addr.toString());
                    System.out.println("Associated hostname: " + addr.getHostName());
                    localAddr = addr;
                    break;
                }
            }   
            if( localAddr != null ) break;
        }
    } catch( NoSuchElementException e) {
        System.out.println("Couldn't find a public address");
        localAddr = null;
    } catch (SocketException e) {
        e.printStackTrace();
        localAddr = null;
    }

    return localAddr;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T17:44:56.210

另一种与套接字一起使用的解决方案（不是最好的）

```
Socket socket = new Socket("www.somesite.com", 80); 
InetAddress localhost = socket.getLocalAddress(); 
System.out.println("Address of local host is " + localhost);
socket.close(); 
```

# java - 使用 minimax 和 AB 剪枝同时搜索博弈树。那可能吗？

> ID：14817497
> 
> 赞同：1
> 
> 时间：2013-02-11T17:29:31.227
> 
> 标签：java, concurrency, artificial-intelligence, minimax, alpha-beta-pruning

我将参加我学校的棋盘游戏 AI 比赛，并试图提出一些关于并发的想法以获得优势。我很可能会处于劣势，因为我将在 java 中实现它，而且我知道 c 或 c++ 会快得多。

似乎您不能将游戏树分成两半，因为移动顺序应该首先留下最好的移动，而且在给定深度传达当前的 alpha/beta 似乎很困难，甚至可能是不可能的. 我也将使用需要同步的转置表。

除了搜索之外，是否有第二个线程可以做的事情可以帮助搜索或提供某种类型的速度提升。每个 AI 将有 5 秒的时间进行移动，并且您的程序可以在对手思考的同时运行。

任何输入，无论多么晦涩，都将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T22:15:46.520

可以在国际象棋编程 Wiki 的[并行搜索文章](http://chessprogramming.wikispaces.com/Parallel+Search)中找到概述。即使您的实际游戏不是国际象棋，许多概念也将适用。该网站还涵盖了[共享换位表](http://chessprogramming.wikispaces.com/Shared+Hash+Table)的复杂解决方案。

但是，当您没有太多时间时，我不会从并行搜索开始。您是正确的，并行性可以增加搜索算法的强度。但是，要做到这一点非常困难，而且好处远低于人们的预期。

如果您想尝试并行性，请继续。这是一个有趣的话题。但是，如果您只想在有限的时间内获得最佳结果，我建议您坚持顺序搜索，而专注于移动顺序和正确性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T12:51:29.320

有可能的。您必须在线程之间进行通信才能获得 AB 修剪帮助。此外，必须调整移动顺序，如果一个线程具有最佳评价的移动来分析而其他线程没有，这将无济于事。

# php - PHP 会话变量返回空白

> ID：14817501
> 
> 赞同：1
> 
> 时间：2013-02-11T17:29:45.263
> 
> 标签：php, mysql

这是我的代码（为长度道歉）：

```
$companyid = $_SESSION["companyid"];

$_SESSION["youtubeurl"] = mysql_real_escape_string($_POST["youtubeurl"]);
$_SESSION["logourl"] = mysql_real_escape_string($_POST["logourl"]);

$_SESSION["plan1head"] = mysql_real_escape_string($_POST["plan1head"]);
$_SESSION["plan1description"] = mysql_real_escape_string($_POST["plan1description"]);
$_SESSION["plan1headline1"] = mysql_real_escape_string($_POST["plan1headline1"]);
$_SESSION["plan1price1"] = mysql_real_escape_string($_POST["plan1price1"]);
$_SESSION["plan1headline2"] = mysql_real_escape_string($_POST["plan1headline2"]);
$_SESSION["plan1price2"] = mysql_real_escape_string($_POST["plan1price2"]);

$_SESSION["plan2head"] = mysql_real_escape_string($_POST["plan2head"]);
$_SESSION["plan2description"] = mysql_real_escape_string($_POST["plan2description"]);
$_SESSION["plan2headline1"] = mysql_real_escape_string($_POST["plan2headline1"]);
$_SESSION["plan2price1"] = mysql_real_escape_string($_POST["plan2price1"]);
$_SESSION["plan2headline2"] = mysql_real_escape_string($_POST["plan2headline2"]);
$_SESSION["plan2price2"] = mysql_real_escape_string($_POST["plan2price2"]);

$_SESSION["plan3head"] = mysql_real_escape_string($_POST["plan3head"]);
$_SESSION["plan3description"] = mysql_real_escape_string($_POST["plan3description"]);
$_SESSION["plan3headline1"] = mysql_real_escape_string($_POST["plan3headline1"]);
$_SESSION["plan3price1"] = mysql_real_escape_string($_POST["plan3price1"]);
$_SESSION["plan3headline2"] = mysql_real_escape_string($_POST["plan3headline2"]);
$_SESSION["plan3price2"] = mysql_real_escape_string($_POST["plan3price2"]);

$_SESSION["plan1price1type"] = $_POST["plan1price1type"];
$_SESSION["plan1price2type"] = $_POST["plan1price2type"];
$_SESSION["plan2price1type"] = $_POST["plan2price1type"];
$_SESSION["plan2price2type"] = $_POST["plan2price2type"];
$_SESSION["plan3price1type"] = $_POST["plan3price1type"];
$_SESSION["plan3price2type"] = $_POST["plan3price2type"];

mysql_connect("localhost", "name", "password") or die(mysql_error());
mysql_select_db("database") or die(mysql_error());

$getstats = mysql_query("SELECT * FROM company WHERE companyid =   
'$companyid'");

$stats = mysql_fetch_array($getstats);

$calculaterating = $stats["ratingscore"] / $stats["ratingcount"];

if (!$calculaterating) {

$rating = "None";

} else {

$rating = $calculaterating;

}

$usage = $stats["usage"];

if(isset($_POST["submitpreview"])) {

$companyid = $_SESSION["companyid"];

$youtubeurl = $_SESSION["youtubeurl"];
$logourl = $_SESSION["logourl"];

$plan1head = $_SESSION["plan1head"];
$plan1description = $_SESSION["plan1description"];
$plan1headline1 = $_SESSION["plan1headline1"];
$plan1price1 = $_SESSION["plan1price1"];
$plan1headline2 = $_SESSION["plan1headline2"];
$plan1price2 = $_SESSION["plan1price2"];

$plan2head = $_SESSION["plan2head"];
$plan2description = $_SESSION["plan2description"];
$plan2headline1 = $_SESSION["plan2headline1"];
$plan2price1 = $_SESSION["plan2price1"];
$plan2headline2 = $_SESSION["plan2headline2"];
$plan2price2 = $_SESSION["plan2price2"];

$plan3head = $_SESSION["plan3head"];
$plan3description = $_SESSION["plan3description"];
$plan3headline1 = $_SESSION["plan3headline1"];
$plan3price1 = $_SESSION["plan3price1"];
$plan3headline2 = $_SESSION["plan3headline2"];
$plan3price2 = $_SESSION["plan3price2"];

$headlines = $_SESSION["headlines"];

$plan1price1type = $_SESSION["plan1price1type"];
$plan1price2type = $_SESSION["plan1price2type"];
$plan2price1type = $_SESSION["plan2price1type"];
$plan2price2type = $_SESSION["plan2price2type"];
$plan3price1type = $_SESSION["plan3price1type"];
$plan3price2type = $_SESSION["plan3price2type"];

mysql_connect("localhost", "name", "password") or die(mysql_error());
mysql_select_db("database") or die(mysql_error());

$islisted = mysql_query("SELECT * FROM companypage WHERE companyid = '$companyid'");

if ($islisted) {
mysql_query("UPDATE companypage SET
plan1head = '$plan1head',
plan1description = '$plan1description',
plan1price1type = '$plan1price1type',
plan1headline1 = '$plan1headline1',
plan1price1 = '$plan1price1',
plan1price2type = '$plan1price2type',
plan1headline2 = '$plan1headline2',
plan1price2 = '$plan1price2',
plan2head = '$plan2head', 
plan2description = '$plan2description',
plan2price1type = '$plan2price1type',
plan2headline1 = '$plan2headline1',
plan2price1 = '$plan2price1',
plan2price2type = '$plan2price2type',
plan2headline2 = '$plan2headline2',
plan2price2 = '$plan2price2',
plan3head = '$plan3head',
plan3description = '$plan3description',
plan3price1type = '$plan3price1type',
plan3headline1 = '$plan3headline1',
plan3price1 = '$plan3price1',
plan3price2type = '$plan3price2type',
plan3headline2 = '$plan3headline2',
plan3price2 = '$plan3price2',
logourl = '$logourl',
youtubeurl = '$youtubeurl',
headlines = '$headlines'
WHERE companyid='$companyid'") or die(mysql_error());

} else {

mysql_query("INSERT INTO companypage (
companyid,
    plan1head,
plan1description,
plan1price1type,
plan1headline1,
plan1price1,
plan1price2type,
plan1headline2,
plan1price2,
plan2head,
plan2description,
plan2price1type,
plan2headline1,
plan2price1,
plan2price2type,
plan2headline2,
plan2price2,
plan3head,
plan3description,
plan3price1type,
plan3headline1,
plan3price1,
plan3price2type,
plan3headline2,
plan3price2,
logourl,
youtubeurl,
headlines) 

VALUES(
    '$companyid',
'$plan1head',
'$plan1description',
'$plan1price1type',
'$plan1headline1',
'$plan1price1',
'$plan1price2type',
'$plan1headline2',
'$plan1price2',
'$plan2head',
'$plan2description',
'$plan2price1type',
'$plan2headline1',
'$plan2price1',
'$plan2price2type',
'$plan2headline2',
'$plan2price2',
'$plan3head',
'$plan3description',
'$plan3price1type',
'$plan3headline1',
'$plan3price1',
'$plan3price2type',
'$plan3headline2',
'$plan3price2',
'$logourl',
'$youtubeurl',
'$headlines')
") or die(mysql_error());

}

echo "<script>window.close();</script";

} 
```

本质上，这里发生的事情是用户有一个自己的页面，可以通过一系列表单、下拉菜单等进行更改。要创建或更新他们的页面，他们填写表单并点击预览按钮，这是一个 target_blank，然后会弹出一个新选项卡，预览他们的页面会是什么样子。上一页中的所有变量都首先插入会话中以供以后使用。“预览”页面上有一个更新按钮。如果他们喜欢他们看到的内容，他们会点击更新按钮（从而在 PHP 代码中执行“提交预览”）。然后 PHP 代码检查他们是否创建了页面，并将它们添加到表中或根据变量更新其当前表。

这是我的问题。首次加载预览页面时，所有变量（会话或 POST）都会正确显示。但是，当执行提交预览并将信息存储在数据库中时，会存储以下内容：companyid 存储为 0，其他所有内容在表中存储为空白（即使它不应该接受空值？） . 这适用于插入和更新。所以这显然让我觉得我的会话变量（从 $_POST 变量在页面的第一个加载，我知道这是正确的，因为它们显示在预览页面上）在某种程度上是错误的当我在执行提交预览时将它们传递回正常变量时传递错误。但真正让我难过的是 companyid 也没有被正确存储（存储为 0 而不是正确的 id），即使当我在其他地方回显它时它显示正确。我确定我在做的是一个简单的愚蠢错误，但我无法弄清楚。

感谢您的帮助，并对代码和问题的长度感到抱歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T17:30:27.990

你不见了

```
session_start(); 
```

这必须是您希望使用会话变量的任何文件的第一行。

请参阅有关该主题的[php.net 文档](http://php.net/manual/en/function.session-start.php)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T17:36:07.097

如果那是您的实际脚本，那么您在执行所有这些 mysql_real_escape_string() 调用时还没有连接到 MySQL。您**必须**连接才能使用此功能。现在它只会返回一长串布尔 FALSE 值来表示错误。

将您的数据库连接代码移动到脚本的开头，它应该开始更好地工作。但当然，您应该升级到 mysqli 或 PDO，因为 mysql_*() 已被弃用。

当然，**永远不要**假设数据库操作已经成功。始终检查返回值是否失败，例如：

```
$var = mysql_real_escape_string($_POST['var']) or die(mysql_error());
                                              ^^^^^^^^^^^^^^^^^^^^^^ 
```

会告诉你问题是什么。

# php - PHP 语法错误 T_Return

> ID：14817504
> 
> 赞同：-3
> 
> 时间：2013-02-11T17:29:48.813
> 
> 标签：php, wordpress, syntax

我在下面的代码中收到 T_Return 语法错误。有什么想法吗？

```
function wp_support_create_feature( $post ) {
  if ( defined('DOING_AUTOSAVE' && DOING_AUTOSAVE )
    return $post;

  if ( has_post_thumbnail( $post ) )
    return $post

  $first = get_children( array(
            'post_parent'    => $post->ID,
            'post_type'      => 'attachment',
            'post_mime_type' => 'image',
            'posts_per_page' => (int)1,
        ), ARRAY_A
   );
  set_post_thumbnail( $post->ID, $first[0]['ID'] );
}
add_action( 'save_post', 'wp_support_create_feature' ); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T17:32:22.650

```
if ( defined('DOING_AUTOSAVE' && DOING_AUTOSAVE ))
                                                 ^ 
```

你错过了一个右括号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T17:33:46.213

```
function wp_support_create_feature( $post ) {
   if ( defined('DOING_AUTOSAVE' && DOING_AUTOSAVE )) // closing parens
   return $post;

   if ( has_post_thumbnail( $post ) )
   return $post; // semi-colon

$first = get_children( array(
        'post_parent'    => $post->ID,
        'post_type'      => 'attachment',
        'post_mime_type' => 'image',
        'posts_per_page' => (int)1,
    ), ARRAY_A
);
set_post_thumbnail( $post->ID, $first[0]['ID'] );

} add_action( 'save_post', 'wp_support_create_feature' ); 
```

# macos - OS X 10.8.2 python 3导入sqlite错误

> ID：14817507
> 
> 赞同：1
> 
> 时间：2013-02-11T17:29:56.907
> 
> 标签：macos, sqlite, python-3.x

从 python3 shell 导入 sqlite 时，brew 安装了 python3 并使用 --enable-loadable-sqlite-extensions 手动编译了 python3 失败。请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T18:06:43.900

该模块被命名`sqlite3`，而不是`sqlite`：

```
import sqlite3 
```

[http://docs.python.org/3/library/sqlite3.html](http://docs.python.org/3/library/sqlite3.html)

更新：现在我们已经清除了模块名称，报告的问题：

```
ImportError: No module named '_sqlite3' 
```

意味着您的 Python 实例找不到 C 扩展模块，它是标准库`_sqlite3.so`中模块的一部分。`sqlite3`由于`dbapi2.py`回溯中的文件路径看起来合理，因此问题可能不是路径问题（`sys.path`）。扩展模块很可能`_sqlite3`无法构建或链接。检查 Python 构建的输出是否有错误。OS X 10.8 包含一个版本，`sqlite3`但出于安全原因，它不包含可选的可加载扩展功能。您的 Python 构建可能包含以下消息：

```
Failed to build these modules:
_sqlite3 
```

并且，早些时候，这个：

```
*** WARNING: renaming "_sqlite3" since importing it failed: dlopen(build/lib.macosx-10.8-x86_64-3.3-pydebug/_sqlite3.so, 2): Symbol not found: _sqlite3_enable_load_extension
  Referenced from: build/lib.macosx-10.8-x86_64-3.3-pydebug/_sqlite3.so
  Expected in: flat namespace
 in build/lib.macosx-10.8-x86_64-3.3-pydebug/_sqlite3.so 
```

解决方案是构建并安装使用可加载扩展功能构建的 sqlite3 的单独副本。如果您使用的是 Homebrew，则其带有[选项的](https://github.com/mxcl/homebrew/blob/master/Library/Formula/sqlite.rb)[`sqlite`配方`with-functions`](https://github.com/mxcl/homebrew/blob/master/Library/Formula/sqlite.rb)应该可以做到这一点。然后重建 Python。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T10:49:32.290

Homebrew 为 python3 提供 sqlite3 支持和可加载模块。

`brew install python3`会做正确的事情（和brew sqlite，也是）。

有一个错误，可能触动了您，但已[修复](https://github.com/mxcl/homebrew/commit/71a4d6038b34ebe16f7908380e4c790e9f6b36cc)

# actionscript-3 - 绘图应用撤消和重做功能动作脚本3

> ID：14817508
> 
> 赞同：0
> 
> 时间：2013-02-11T17:30:03.500
> 
> 标签：actionscript-3, function, undo, redo

谁能告诉我如何进行撤消和重做功能？所以这是我当前的动作脚本。我不知道该怎么做，我在一些网站上看到了一些例子，动作脚本很长，无法理解。请展示一个简单的方法，我可以使这项工作..

对不起语法不好...

```
var drawingLine:Shape=new Shape();
board.addChild(drawingLine);

var doDraw:Boolean=false;

var lineSize:Number=7;

var activeColor:uint = 0x000000;

function PencilTool(event:MouseEvent):void{
board.addEventListener(MouseEvent.MOUSE_DOWN, MouseDown);
board.addEventListener(MouseEvent.MOUSE_UP, MouseUp);
}

function MouseDown(e:MouseEvent):void{

doDraw=true;

drawingLine.graphics.moveTo(drawingLine.mouseX, drawingLine.mouseY);
drawingLine.graphics.lineStyle(lineSize, activeColor);
board.addEventListener(MouseEvent.MOUSE_MOVE, MouseMove);

}

function MouseMove(e:MouseEvent):void{
        var curX:Number=drawingLine.mouseX;
        var curY:Number=drawingLine.mouseY;

        if(doDraw && checkCoords(curX,curY)){

            if(active=="Line"){

                    clearTemp();

            temporaryDrawing.graphics.lineTo(curX,curY);

            }else{

            drawingLine.graphics.lineTo(curX,curY);

            }

            e.updateAfterEvent();
            }
}

function MouseUp(event:MouseEvent):void{

doDraw=false;

}

btn_Pencil.addEventListener(MouseEvent.MOUSE_UP, PencilTool); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:56:36.930

单击数组或向量后，您可以保存所有动作，然后如果要撤消，则重绘数组中除最后一个以外的所有动作。

可能是这样的：

```
var drawingLine:Shape=new Shape();
board.addChild(drawingLine);

// MOVEMENTS INFORMATION
var movements:Array = new Array();
var doDraw:Boolean = false;
var cacheIndex:int = 0;

var lineSize:Number=7;

var activeColor:uint = 0x000000;

function PencilTool(event:MouseEvent):void{
board.addEventListener(MouseEvent.MOUSE_DOWN, MouseDown);
board.addEventListener(MouseEvent.MOUSE_UP, MouseUp);
}

function MouseDown(e:MouseEvent):void{

function PencilTool(event:MouseEvent):void{
board.addEventListener(MouseEvent.MOUSE_DOWN, MouseDown);
board.addEventListener(MouseEvent.MOUSE_UP, MouseUp);
}

function MouseDown(e:MouseEvent):void{

    doDraw=true;

    drawingLine.graphics.moveTo(drawingLine.mouseX, drawingLine.mouseY);
    drawingLine.graphics.lineStyle(lineSize, activeColor);
    board.addEventListener(MouseEvent.MOUSE_MOVE, MouseMove);
    lastTracing = {
        mainPoint: {
            x:drawingLine.mouseX, 
            y:drawingLine.mouseY
        }, 
        lineSize: lineSize, 
        activeColor:activeColor, 
        points:new Array()
    }
    cacheIndex = 0;
    movements.splice(movements.length - cacheIndex, cacheIndex);
    movements.push(lastTracing );

}

function MouseMove(e:MouseEvent):void{
    var curX:Number=drawingLine.mouseX;
    var curY:Number=drawingLine.mouseY;

    if(doDraw && checkCoords(curX,curY)){
        if(active=="Line"){

            clearTemp();

            temporaryDrawing.graphics.lineTo(curX,curY);

        }else{

            drawingLine.graphics.lineTo(curX,curY);
            lastTracing.points.push({x:curX, y:curY});

        }

            e.updateAfterEvent();
    }
}

function MouseUp(event:MouseEvent):void{

doDraw=false;

}
function undoFunction(event:MouseEvent=null):void {
    if(cacheIndex+1 <= movements.length){
        cacheIndex++;
    }
    drawCache();
}
function redoFunction(event:MouseEvent = null):void {
    if(cacheIndex-1 >= 0){
        cacheIndex--;
    }
    drawCache();
}
function drawCache():void {
    for(var i:uint=0;i<(movements.length-cacheIndex);i++){
         var tracingInfo:Object = movements[i];

         drawingLine.graphics.clear();
         drawingLine.graphics.moveTo(tracingInfo.mainPoint.x, tracingInfo.mainPoint.y);
         drawingLine.graphics.lineStyle(tracingInfo.lineSize, tracingInfo.activeColor);

         for(var j:uint=0;j<tracingInfo.points.length;j++){
              drawingLine.graphics.lineTo(tracingInfo.points[j].x,tracingInfo.points[j].y);
         }
    }
}

btn_Pencil.addEventListener(MouseEvent.MOUSE_UP, PencilTool); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T21:57:07.760

这，o 使用两个图形，不会是要走的路

我解决这个问题的方法是创建一个 lineInfo 类（仅查看您如何使用线条），并拥有起点、终点、lineColour、lineWidth 和 lineAlpha 的信息。

然后创建一个数组或 Vector 并使用新的 LineInfo 类填充它，并使用线条更新图形。如果需要撤消，可以将最后一项的`use`值设置为false，从数组的指令中重新绘制图形。创建一个撤消步骤整数，用于跟踪应省略多少（从后面数）操作。

为了提高性能，您最多可以创建 25 条指令，并创建一个图形来缓存未在撤消列表中的项目。

# php - 如果满足条件，则删除运输选项

> ID：14817516
> 
> 赞同：0
> 
> 时间：2013-02-11T17:30:23.707
> 
> 标签：php, magento, shipping

`productmatrix_Standard`如果满足特定条件，我想从运输方式中删除标准运输选项。我相信我需要覆盖以下内容：

```
/**
 * One page checkout status
 *
 * @category   Mage
 * @category   Mage
 * @package    Mage_Checkout
 * @author      Magento Core Team <core@magentocommerce.com>
 */
class Mage_Checkout_Block_Onepage_Shipping_Method_Available extends Mage_Checkout_Block_Onepage_Abstract
{
    protected $_rates;
    protected $_address;

    public function getShippingRates()
    {

        if (empty($this->_rates)) {
            $this->getAddress()->collectShippingRates()->save();

            $groups = $this->getAddress()->getGroupedAllShippingRates();
            /*
            if (!empty($groups)) {
                $ratesFilter = new Varien_Filter_Object_Grid();
                $ratesFilter->addFilter(Mage::app()->getStore()->getPriceFilter(), 'price');

                foreach ($groups as $code => $groupItems) {
                    $groups[$code] = $ratesFilter->filter($groupItems);
                }
            }
            */

            return $this->_rates = $groups;
        }

        return $this->_rates;
    }
} 
```

如何从该集合中删除现有的运输方式，或将其清空并手动重新构建，跳过该`productmatrix_Standard`选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T18:08:57.177

您应该改写`function collectRates()`运输模型中的“”。
例如在里面 `/app/code/core/Mage/Shipping/Model/Carrier/Flatrate.php` 或 `/app/code/Mage/Usa/Model/Shipping/Carrier/Ups.php`

有关地址和购物车的所有详细信息当时`collectRates()`都在每个运营商上运行。这使得过滤特定费率或更改其`names/price.`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T18:25:11.620

我结束了

```
<?php

    public function getShippingRates() {

        if (empty($this->_rates)) {

            $this->getAddress()->collectShippingRates()->save();

            $groups = $this->getAddress()->getGroupedAllShippingRates();

            if ($this->someCondition()) {

                $badMethods = array('productmatrix_Standard');

                // Loop through groups (productmatrix)
                // pass by reference for unset later
                foreach ($groups as $code => &$groupItems) {

                    // Lopp through methods (standards, 2day)
                    foreach($groupItems as $key => $item) {

                        // Check for bad shipping methods
                        if (in_array($item->getCode(), $badMethods)) {

                            // Remove the method from the shipping groups
                            unset($groupItems[$key]);
                        }
                    }
                }
            }

            $this->_rates = $groups;
        }

        return $this->_rates;
    } 
```

# javascript - 我的滑块在特定于上下文时有效，但是当我尝试使其与上下文无关时，它会中断。我的代码有什么问题？

> ID：14817523
> 
> 赞同：-1
> 
> 时间：2013-02-11T17:30:47.677
> 
> 标签：javascript, jquery, html, css

这是我正在处理的 jQuery。当我输入正确的 id 等时，该`loop()`函数工作得非常好，但是现在我已经将它包装在`Slider()`函数中，它被破坏了。我不知道如何解决它。有什么帮助吗？（jsfiddle [http://jsfiddle.net/yramagicman/Uc8LW/8/](http://jsfiddle.net/yramagicman/Uc8LW/8/)）

```
$(document).ready(function () {
function Slider(wrapper, kids) {
    this.wrapper = wrapper;
    this.kids = kids;
this.loop = function(wrapper, kids) {
    var count = $(wrapper).children().length,
        fade = 1000,
        selector = [],
        delay = 1000;
        console.log(count); //logs 0
    for (var i = 1; i < count + 1; i++) {
        selector[i] = $(wrapper + ' ' + kids + ':nth-child(' + i + ')');
                        selector[i].addClass('hidden');
                        console.log(selector[i]);
    }
    var z =1;
    console.log(selector[z]); //logs undefined
    selector[z].each(function () { //uncaught type error
        $(this).addClass('visible').fadeIn(fade).delay(delay).fadeOut(fade, function () {
            $(this).hide().remove().appendTo(wrapper);
        }); //end callback
    });
};
$(wrapper).children().addClass('hidden');
//setInterval(loop, 1000); //commented out for debugging. Don't want a loop doing nothing.
loop();
}
Slider('#slider', 'li');
}); // end ready 
```

相关的html

```
<ul id="slider">
<li> item 1</li>
<li> item 2</li>
<li> item 3</li>
<li> item 4</li>
</ul> 
```

和CSS

```
.hidden{
position: absolute;
left: -10000px;
top: -10000px;
} 
.visible{
position: static;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T16:27:24.850

我想到了！这是代码。

```
$(document).ready(function () {
var loop = function (wrapper, kids, fade, delay) {
    var count = $(wrapper).children().length,
        selector = [];
    $(wrapper).children().fadeOut(0);
    for (var i = 1; i < count + 1; i++) {
        selector[i] = $(wrapper + ' ' + kids + ':nth-child(' + i + ')');
    }
    var z = 1;
    selector[z].each(function () {
        $(this).fadeIn(fade).delay(delay).fadeOut(fade, function () {
            $(this).remove().appendTo(wrapper);
        }); //end callback

    });

};

setInterval(function () {
    loop('#slider', 'li', 2000, 7000);
}, 0);
});
// end ready 
```

所有 HTML 都与问题中的相同。

# php - Magento - 添加新的 catalog_product 属性

> ID：14817524
> 
> 赞同：0
> 
> 时间：2013-02-11T17:30:50.983
> 
> 标签：php, magento, magento-1.5

我想添加一个新的产品属性并使用类似于以下的代码：

```
/**
 * @var $installer Mage_Catalog_Model_Resource_Eav_Mysql4_Setup
 */
$installer = $this;

$attribute = array(
    'label'             => 'New Attribute',
    'required'          => false,
    'type'              => 'varchar',
    'input'             => 'text'
);
$installer->addAttribute('catalog_product', 'new_attribute', $attribute); 
```

哪个工作正常。

但是，我想将此属性添加到特定属性集，并且仅添加到此特定属性集。

如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:51:22.830

假设你知道`$attributeSetId`，程序如下：

1.  获取 $attributeId
2.  获取属性集的属性组 ID（例如“常规”组）
3.  将属性添加到集合和组

例如

```
 $attributeId = $installer->getAttributeId(
            'catalog_product', 
            'new_attribute'
        );

        $attributeGroupId = $installer->getAttributeGroup(
            'catalog_product',
            $attributeSetId,
            'General'
        );

        $installer->addAttributeToSet(
            'catalog_product',
            $attributeSetId, 
            $attributeGroupId,
            $attributeId 
        ); 
```

# iphone - 如何传递参数 (void(^)(NSError*)) 错误

> ID：14817528
> 
> 赞同：0
> 
> 时间：2013-02-11T17:31:09.393
> 
> 标签：iphone, ipad

如何传递参数

```
-(void)errorValue:(void(^)(NSError*))error{

[self errMssg];
}

-(void)call{
(void(^)(NSError*))error;

 [self  errorValue ?];
} 
```

请让我知道如何将 (void(^)(NSError*))error 传递给该方法！

@All 提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T17:54:21.513

您需要先正确声明一个块变量。然后你只需像任何其他变量一样按名称传递它：

```
void(^myBlock)(NSError *) = ^(NSError* error) {
    // Do something
};
[self errorValue:myBlock]; 
```

或者，您可以直接传递块文字：

```
[self errorValue:^(NSError* error) {
    // Do something
}]; 
```

# c# - 使用 c# 创建了 txt 文件，但创建的文件转义了新行？

> ID：14817532
> 
> 赞同：0
> 
> 时间：2013-02-11T17:31:25.320
> 
> 标签：c#, text-files, filestream

在创建文本文件之后，它在我添加的richtextbox 中转义了“新行”，告诉我如何解决该问题 + 在创建具有大名称和大量数据的文件时，它会给出异常。

```
using System;
using System.Collections.Generic;
using System.Drawing;
using System.Windows.Forms;
using System.IO;

namespace Saver
{
    /// <summary>
    /// Description of MainForm.
    /// </summary>
    public partial class MainForm : Form
    {
    string path = "";

    public MainForm()
    {
        //
        // The InitializeComponent() call is required for Windows Forms designer            
        //
        InitializeComponent();

        //
        // TODO: Add constructor code after the InitializeComponent() call.
        //
    }

    void Button1Click(object sender, EventArgs e)
    {
        if((textBox1.Text != "")&&(richTextBox1.Text != ""))
        {
            if(radioButton1.Checked == true)
                path = @"C:\Users\M.Waqas\Desktop\Saver\Saver\Files\";

            path += textBox1.Text + ".txt";

            FileStream fs = new FileStream(path,FileMode.Create);
            StreamWriter wr = new StreamWriter(fs);
            wr.Write(richTextBox1.Text);
            MessageBox.Show("Your file create on :" + "\n" + path);
            textBox1.Clear();
            richTextBox1.Clear();
            wr.Close();
            fs.Close();

        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T17:49:11.967

使用 .NET 方法而不是重写它们怎么样？

```
void Button1Click(object sender, EventArgs e)
{
      try{
           if(!string.IsNullOrEmpty(textBox1.Text) && !string.IsNullOrEmpty(richTextBox1.Text))
           {
                if(radioButton1.Checked) 
                     path = @"C:\Users\M.Waqas\Desktop\Saver\Saver\Files\"; 

                path = System.IO.Path.Combine(path, textBox1.Text  ".txt");

                richTextBox1.SaveFile(path);  

           } else
                MessageBox.Show("No data");

      } catch (Exception x){
           MessageBox.Show("Error: "+x);
      }
} 
```

注意：路径是从 OP 复制过来的，应该使用 SaveFileDialog 而不是硬编码路径（更糟糕的是 - 与用户相关的硬编码路径）。对于未选中单选按钮的情况，路径代码可能不完整。

# xml - XML 转换是如何发生的

> ID：14817535
> 
> 赞同：1
> 
> 时间：2013-02-11T17:31:38.663
> 
> 标签：xml, xslt

在使用 xslt 转换 xml 时，我得到了结果，就像贾斯汀一样，有人可以解释下面标记为粗体的语句吗？

xsl:value-of select=" **//*[price='8.20']/@supplier** "

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<!-- Edited by XMLSpy® -->
<catalog>
    <cd>
        <title>Empire Burlesque</title>
        <artist>Bob Dylan</artist>
        <country>USA</country>
        <company>Columbia</company>
        <price>10.90</price>
        <year>1985</year>
    </cd>
        <cd supplier="justin">
        <title>Unchain my heart</title>
        <artist>Joe Cocker</artist>
        <country>USA</country>
        <company>EMI</company>
        <price>8.20</price>
        <year>1987</year>
    </cd>
</catalog> 
```

xslt：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<!-- Edited by XMLSpy® -->
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="/">
  <html>
  <body>
  <h2>My Supplier</h2>
    <table border="1">
    <xsl:value-of select="//*[price='8.20']/@supplier"/
    </table>
  </body>
  </html>
</xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T17:42:04.310

一般来说：

```
// - Traverse the whole document

//* - Any element in the document

//*[price = '8.20'] - Any element in the document that has a <price> child element
                      with the value 8.20

//*[price = '8.20']/@supplier - The @supplier attribute of any element in the document 
                                that has a <price> child element with the value 8.20 
```

由于文档中只有一个节点符合这些条件，并且它的值为“justin”，这就是输出为“justin”的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T17:46:30.063

`*`: 任何元素

`//`：在任何层次结构（另一种方法是指定特定的 XPath

`*[price='8.20']`: 任何有子元素的元素`price = '8.20'`

`//*[price='8.20']`：具有子元素的任何层次结构中的任何元素`price = '8.20'`

`@supplier`: name 的属性`supplier`

`//*/@supplier``supplier`:任何层次结构中任何元素下的名称属性。

`//*[price='8.20']/@supplier``supplier`：具有子元素的任何层次结构中的任何元素下的名称属性`price = '8.20'`..

# java - 查询 MediaPlayer.setDatasource(URL);

> ID：14817536
> 
> 赞同：1
> 
> 时间：2013-02-11T17:31:45.520
> 
> 标签：java, android, stream, media-player

我是 android 编程的初学者，我想编写 mp3 应用程序以从 URL 调用一些 mp3 文件，所以当我在 android 开发人员中显示“媒体播放器”时，我将 URL 放入其中`setDataSource`，它工作正常，但问题是Activity 需要很长时间才能显示出来，有时应用程序会崩溃。这是我的代码的一部分：

```
 file_url = Mp3_Linkes[num];

    //Set Source
    try {   
        mp.setDataSource(file_url); 
    } catch (Exception e) {

        Toast.makeText(this, "Source Error !!", Toast.LENGTH_LONG).show();
    }

    //Prepare
    try {
        mp.prepare();
    }catch(Exception e)
    {
        Toast.makeText(this, "Prepare Error !!", Toast.LENGTH_LONG).show();
    }

    //Start
    mp.start(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:57:02.523

您的活动正在阻塞，因为您正在主线程（UI 线程）上调用 prepare

相反，您可以使用 prepareAsynch 和 OnPreparedListener 在从远程源加载时专门启动：

代码 ：

```
try {

     mp.setDataSource(file_url);

    mp.setOnPreparedListener(new OnPreparedListener() {
         public void onPrepared(MediaPlayer player) {

                player.start();
        }
     });
    mp.prepareAsync(); 
```

# facebook - Facebook API 错误写在朋友墙上

> ID：14817539
> 
> 赞同：0
> 
> 时间：2013-02-11T17:31:52.687
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk, facebook-wall

我尝试使用 facebook API 在我的朋友墙上发帖。但我收到以下错误。我该如何解决这个问题？

```
013-02-12 12:31:57.951 sample[50506:907] Error: HTTP status code: 403
2013-02-12 12:31:57.959 sample[50506:907] Error: The operation couldn’t be completed. (com.facebook.sdk error 5.) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T18:13:42.713

从 2013 年 2 月 6 日起，Facebook 已取消使用 graph api 在朋友墙上发帖的功能。在此处查看官方文档[http://developers.facebook.com/roadmap/completed-changes/](http://developers.facebook.com/roadmap/completed-changes/)在2013 年 2 月 6 日更改**通过 Graph API 发布到朋友墙的**小节下

**更新**

您可以尝试的替代方案是

1.  您可以使用[提要对话框](https://developers.facebook.com/docs/reference/dialogs/feed/)在朋友墙上发布，这将提示您的用户，如果该用户确认，它将被发布在朋友墙上。
2.  如果您不想提示您的用户，那么您可以在您的用户墙上发帖，并在帖子中标记他们的朋友，然后假设朋友批准该标签，这些帖子也将出现在朋友墙上。

# ios - iOS 应用无法读取 info.plist

> ID：14817543
> 
> 赞同：1
> 
> 时间：2013-02-11T17:32:11.037
> 
> 标签：ios, info.plist

我复制了我的 app 文件夹并将其保存到桌面上的另一个目录中。现在，我的原始应用程序（或副本）无法运行，因为它说 info.plist 无法从中读取：

无法从“/Users/xxxxxxxx/Desktop/Development/Apps/EUS/EUS Calculator/EUS Calculator/EUS Calculator-Info.plist”读取数据：文件“EUS Calculator-Info.plist”无法打开，因为有是没有这样的文件。

但是，EUS Calculator-Info.plist 就在那个路径上。我浏览了 SO 和 Google，似乎找不到解决方案。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-08T18:23:29.363

选择您的目标，然后选择构建设置。里面有一个叫做“包装”的部分

编辑`Info.plist File`设置。它应该与您的项目文件相关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T20:28:25.823

Based on your comments

> I never moved it, I simply made a copy. The original is on my Desktop... Desktop/Development/Apps/...I made a copy, pasted that into Desktop/GIT/ and ever since then I have been getting this error

and your error says

```
could not read data from '/Users/xxxxxxxx/Desktop/Development/Apps/EUS/EUS Calculator/EUS Calculator/EUS Calculator-Info.plist': 
The file “EUS Calculator-Info.plist” couldn’t be opened because there is no such file. 
```

so it seems that the info.plist is pointing to the original one.

# git - 在两个松散分叉的 git 项目中恢复历史

> ID：14817544
> 
> 赞同：0
> 
> 时间：2013-02-11T17:32:12.543
> 
> 标签：git, git-merge

有 3 个项目，每个项目都有自己的 git repo：

*   **项目A**，独立于B的项目
*   **项目 B** , 一个独立于 A 的项目
*   **项目 AB**，一个使用一些 A 和一些 B 的项目。源、文件结构等的合并，并进行了一些修改以允许两者正确混合。

项目 A 和项目 B 大多已死，但在 AB 创建后确实收到了一些小补丁，其中一些后来被移植到 AB。AB 的 git 存储库是在没有来自 A 或 B 的历史的情况下创建的。我很容易分辨出哪个文件或目录来自 A，哪个来自 B，而且我知道每个初始文件来自哪个提交。

**假设 AB 中的所有文件都基于来自 A 或 B 的文件，我如何在初始化之前恢复 AB 的历史记录？**

请记住以下几点：

*   来自 A 的文件可能位于类似 B 的目录中，反之亦然，所以我应该能够处理移动
*   在某些时候，我想重新定位 AB 的移植补丁，以便将它们归因于 A 或 B 的合并。
*   我希望 A 或 B 能够合并 AB，尽管只有其中一个能够做到这一点是可以的，只要我可以控制哪一个。
*   大约有 30-50 个文件，所以我仍然可以为每个文件重新设置基准，如果我不必这样做，那将是首选。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T19:03:49.630

一般来说，您可能希望将 A 和 B 设置为根提交的父级。你可以在这里看到如何做到这一点：

[https://stackoverflow.com/a/4164767/758345](https://stackoverflow.com/a/4164767/758345)

Git 现在将了解这些文件的来源并处理重命名等。您现在应该能够从 A 和 B 合并到 AB。

您永远不能将 AB 合并到 A 或 B，因为 AB 还包含另一个项目。您也许可以使用樱桃采摘，但我也对此表示怀疑。如果您希望将 AB 的更改贡献给 A 和 B，您应该查看子模块和 git-subtree。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T18:02:17.743

`root-commit`要在您需要`rebase`整个`AB`repo之前创建提交。

也许引入这些旧提交的另一种方式是 [**孤儿分支**](https://stackoverflow.com/q/1384325/in-git-is-there-a-simple-way-of-introducing-an-unrelated-branch-to-a-repository)

```
git checkout --orphan project-a
git rm -rf .
git remote add upstream-a git://foo.org/project-a
git pull upstream-a master

git checkout --orphan project-b
git rm -rf .
git remote add upstream-b git://foo.org/project-b
git pull upstream-b master 
```

# perl - 在批处理文件中临时使用 perl

> ID：14817548
> 
> 赞同：0
> 
> 时间：2013-02-11T17:32:22.303
> 
> 标签：perl, batch-file

我想在批处理文件中使用 perl，然后退出 perl 并继续使用批处理代码。我想实现的一个小例子：

```
perl do something
echo hello
pause 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T17:37:37.853

```
@echo off
perl script.pl
echo hello
pause 
```

或者

```
@echo off
perl -e" ...code..."
echo hello
pause 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-11T17:38:44.783

如果安装了 Perl，应该没有问题：

```
perl -e "print $_ for 1 .. 10"
perl script.pl 
```

您可能需要指定 perl 和 script.pl 的完整路径。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T23:36:28.600

也许我只是读错了，但我将问题解释为询问如何将 perl 脚本直接嵌入到批处理文件中。

Activeperl 将其中的一堆添加为 .cmd 文件，并且 cpan 上有一个[工具](http://search.cpan.org/~nwclark/perl-5.8.9/win32/bin/pl2bat.pl)可以从您的 perl 脚本创建它们。

我还从快速搜索中找到了两个[示例](http://www.dostips.com/DtCodeInterfacing.php#Interfacing.Perl)，似乎扩展了这个想法。它们允许您将代码放入同一个文件并在 perl 调用之前和之后运行 dos 命令，这就是我认为您要问的。

这是其中一个例子：

```
@rem = 'Perl, ccperl will read this as an array of assignment & skip this block  
@CD /d "%~dp0"  
@perl -s "%~nx0" %*  
@FOR /L %%c in (4,-1,1) do @(TITLE %~nx0 - %%cs to close & ping -n 2 -w 1000 127.0.0.1 NUL)  
@TITLE Press any key to close the window&ECHO.&GOTO:EOF  
@rem ';

#perl script starts below here  
print 'Hi there!  DOS rocks!\n' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T18:59:32.580

您也可以反之亦然。即从perl调用批处理命令

```
my $cmd = 'some command';
if (system $cmd) {
    print "Error: $? for command $cmd"
} 
```

保存这个 perl 脚本。这也应该做你的工作。

# javascript - OpenLayers, Bing, 连续地图图层

> ID：14817550
> 
> 赞同：2
> 
> 时间：2013-02-11T17:32:23.843
> 
> 标签：javascript, openlayers, bing-maps

我试图让 Bing 层在 OpenLayers 中连续，但我找不到任何解决方案。正如我们在示例（[http://openlayers.org/dev/examples/bing.html](http://openlayers.org/dev/examples/bing.html)）中看到的，当我们水平或垂直滚动​​地图时，图层并不像谷歌地图那样连续（[http://openlayers.org /dev/examples/google.html](http://openlayers.org/dev/examples/google.html)）。当我们缩小地图并且地图不适合视口时，会在左侧和右侧留下空白的白色背景，这很奇怪。有任何想法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T12:10:27.583

这个例子展示了如何实现水平重复：

*   [http://openlayers.org/dev/examples/wrapDateLine.html](http://openlayers.org/dev/examples/wrapDateLine.html)

不知道缩小时如何解决白色背景，我认为 Openlayers 不支持这一点。

# android - Android SQLite 没有这样的表？

> ID：14817553
> 
> 赞同：0
> 
> 时间：2013-02-11T17:32:35.727
> 
> 标签：android, sql, database, sqlite

我创建了一个方法

```
public boolean addWord(Word w, String name) {
    try {
        ContentValues cv = new ContentValues();
        cv.put(COLUMN_NAME, name);
        cv.put(COLUMN_WORD_FOREIGN, w.getWordForeign());
        cv.put(COLUMN_WORD_ENGLISH, w.getWordEnglish());
        cv.put(COLUMN_CORRECT, w.getCorrect());
        database.insert(TABLE_VOCAB_WORDS, null, cv);
        return true;
    } catch (SQLiteException e) {
        System.out.println("SQL ERROR");
        return false;
    }
} 
```

但是每当我调用它时，我都会收到一个找不到表的错误。但是，我用来创建数据库的 SQL 语句如下：

```
private static final String CREATE_DB = "CREATE TABLE " + TABLE_VOCAB_INFO
        + "(" + COLUMN_NAME + " TEXT NOT NULL PRIMARY KEY," + COLUMN_URL
        + " TEXT NOT NULL," + COLUMN_DOWNLOADED
        + " TEXT NOT NULL); CREATE TABLE " + TABLE_VOCAB_WORDS + "("
        + COLUMN_NAME + " TEXT NOT NULL," + COLUMN_WORD_FOREIGN
        + " TEXT NOT NULL," + COLUMN_WORD_ENGLISH + " TEXT NOT NULL,"
        + COLUMN_CORRECT + " BYTE NOT NULL, PRIMARY KEY (" + COLUMN_NAME
        + "," + COLUMN_WORD_FOREIGN + "));"; 
```

当我清楚地创建表格时，我不太确定这里实际发生了什么错误？

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T17:57:17.813

我认为这不起作用的原因`;`是不允许使用此字符。所以试着用两个分开的来做`Strings`：

```
String create_vocal_table_info_query = "CREATE TABLE " + TABLE_VOCAB_INFO
        + "(" + COLUMN_NAME + " TEXT NOT NULL PRIMARY KEY,"
        + COLUMN_URL + " TEXT NOT NULL,"
        + COLUMN_DOWNLOADED + " TEXT NOT NULL)";

String create_vocal_table_words_query = "CREATE TABLE " + TABLE_VOCAB_WORDS + "("
        + COLUMN_NAME + " TEXT NOT NULL,"
        + COLUMN_WORD_FOREIGN + " TEXT NOT NULL,"
        + COLUMN_WORD_ENGLISH + " TEXT NOT NULL,"
        + COLUMN_CORRECT + " BYTE NOT NULL, PRIMARY KEY ("
        + COLUMN_NAME + "," + COLUMN_WORD_FOREIGN + "))"; 
```

# java - Solrj - 编码问题

> ID：14817564
> 
> 赞同：4
> 
> 时间：2013-02-11T17:33:14.207
> 
> 标签：java, solr, lucene, solrj, websolr

我有一个文档，其标题为具有价值的字段-Mörder（o 上有变音符号）。

当我使用以下方法在 java 中获取它时，两个打印命令中返回的值都是 Morder（在 r 上有一个变音符号）。奇怪的。

当我继续访问 Solr 提供的 Web UI 时，标题是 Mörder（o 上有一个变音符号）。

谁能告诉我出了什么问题？

```
 SolrQuery query = new SolrQuery();
    query.setParam("q", "<some query>");
    query.setStart(start);
    query.setRows(rows);
    query.setFacet(false);
    query.setFields("title");
    QueryResponse rsp = server.query(query);

    SolrDocumentList sdl = rsp.getResults();

    for (SolrDocument sdOl : sdl) {
        System.out.println(sdOl.getFieldValue("title"));
        System.out.println(new String(sdOl.getFieldValue("title").toString().getBytes, "UTF-8"));
    } 
```

**编辑**

我实际上是在比较来自 2 个核心的文档标题。一个返回正确的变音符号，但另一个总是将变音符号移动到下一个字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T18:20:39.683

Unicode 分解被大/小印度字节转换搞砸了？只是一个疯狂的（半开玩笑的）猜测。

实际上，没有答案，但我会放[Wireshark](https://www.wireshark.org/)看看客户端在问什么，服务器在回答什么。这将告诉您问题是在离开服务器还是到达客户端时出现。

我不知道您的客户端配置，但如果流量以二进制形式通过，则有一些客户端选项会将其切换为 XML。如果这本身就解决了问题，那么问题出在 javabin 格式上。如果没有，至少你有确切的查询和响应来工作。

# spring - Spring-Data-JPA 使用 XML 配置在 Spring STS 中导致 XSD 验证错误

> ID：14817565
> 
> 赞同：3
> 
> 时间：2013-02-11T17:33:14.843
> 
> 标签：spring, spring-data-jpa

Eclipse/STS 同时使用 Spring 3.2.1 和 Spring-data-jpa 报告错误。我有一些带有以下标头的 XML 配置文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:mvc="http://www.springframework.org/schema/mvc" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:aop="http://www.springframework.org/schema/aop" xmlns:p="http://www.springframework.org/schema/p"
xmlns:jpa="http://www.springframework.org/schema/data/jpa"
xsi:schemaLocation="
    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context.xsd
    http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans.xsd
    http://www.springframework.org/schema/mvc
    http://www.springframework.org/schema/mvc/spring-mvc.xsd
    http://www.springframework.org/schema/aop
    http://www.springframework.org/schema/aop/spring-aop.xsd
    http://www.springframework.org/schema/data/jpa
    http://www.springframework.org/schema/data/jpa/spring-jpa.xsd"> 
```

我正在使用 Spring 3.2.1 和 Spring-Data-JPA 1.3.0 并且 Eclipse/STS 报告了这一点：

> 引用的文件包含错误（[http://www.springframework.org/schema/data/jpa](http://www.springframework.org/schema/data/jpa)）

这发生在每个包含 data-jpa 模式的 XML 配置文件中。当我从 XML 配置中删除 JPA 时，一切都很好。

我的配置是错误的还是这里发生了什么？

谢谢！保罗

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-26T04:12:55.863

今天没有[http://www.springframework.org/schema/data/jpa/spring-jpa.xml](http://www.springframework.org/schema/data/jpa/spring-jpa.xml)文件所以你必须使用[http://www.springframework.org/schema/data/jpa/spring- jpa-1.3.xsd](http://www.springframework.org/schema/data/jpa/spring-jpa-1.3.xsd)，但此文件使用[http://www.springframework.org/schema/data/repository/spring-repository.xsd](http://www.springframework.org/schema/data/repository/spring-repository.xsd)也不存在，因此您必须在上下文文件中添加此架构的位置：

```
xsi:schemaLocation="http://www.springframework.org/schema/beans
                    http://www.springframework.org/schema/beans/spring-beans.xsd
                    http://www.springframework.org/schema/jdbc
                    http://www.springframework.org/schema/jdbc/spring-jdbc-3.2.xsd
                    http://www.springframework.org/schema/data/jpa
                    http://www.springframework.org/schema/data/jpa/spring-jpa-1.3.xsd
                    http://www.springframework.org/schema/data/repository
                    http://www.springframework.org/schema/data/repository/spring-repository-1.5.xsd
                    http://www.springframework.org/schema/jee
                    http://www.springframework.org/schema/jee/spring-jee-3.2.xsd" 
```

# c++ - 映射映射与 std::pair 作为键的优势是什么

> ID：14817569
> 
> 赞同：2
> 
> 时间：2013-02-11T17:33:31.857
> 
> 标签：c++, data-structures, map

以下制作旨在表示二维网格的地图的方法有哪些优点和缺点。网格应该能够在任何时候被填充，而无需为整个事物分配内存，这就是我不只使用二维数组的原因。

```
std::map<int, std::map<int, Tile*>* >* tiles;

std::map<std::pair<int, int>, Tile*>* tiles; 
```

或者，如果您有其他更好的想法，请告诉我。如果这是一个经常被问到的问题，我很抱歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T17:38:14.560

它（显然）是一种不同的数据结构，取决于您如何访问它。

第一个更像是一个 2 级树结构。再次将 x 坐标映射到几个 y 坐标到几个图块。这可能听起来有点不适合您的问题。

第二个不允许您获取特定 x 坐标的所有元素（或者您可以调用它）。你可能不需要那个吗？

如果您需要将 (x,y) 坐标映射到图块，则第二种方法可能没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T17:58:31.043

为什么不使用向量的向量 std::vector< std::vector > ？

除非你的网格是稀疏的（不是网格中的每个元素都有一个 Tile），并且你想节省内存，否则会更好。如果速度是问题，使用向量的访问时间会好得多，因为 std::map 使用 tres 作为底层结构。

# css - 链接、已访问、悬停、活动的 CSS 超链接颜色不一致

> ID：14817570
> 
> 赞同：1
> 
> 时间：2013-02-11T17:33:33.003
> 
> 标签：css, hyperlink, hover

我目前正在使用 CSS 来更改左侧导航中的超链接颜色，但似乎有些不一致。一些链接将采用我声明的正确属性，而其他链接将不接受它们。我已经`class nav`对所有链接声明了相同的内容。我知道这些链接没有任何覆盖，因为它是孤立的。

下面是左侧导航代码片段

这有效：

```
var context='<%=request.getContextPath()%>';
<%--    var sOrg = '<%=sOrg%>'; --%>
document.write("<div id=\"leftNav\">");
document.write("<div id=\"leftNavtext\"><a href=\"home.htm?sOrg="+'<%=sOrg%>'+"\" class=\"nav\" id=\"phome\" style=\"text-decoration:none\" >Home</a></div>"); 
```

然后这不起作用：

```
 <% if(roles.contains("PEIMSDataCompleter")) {  %>
document.write("<div id=\"leftNavtext\" ><a href=\"dataSubmissions.jsp\" class=\"nav\" id=\"dataSubmissions\" style=\"text-decoration:none\">Data Submissions</a></div>"); 
```

然后这个工作：

```
document.write("<div  style=\" padding-left: 20px;padding-top:5px;\"><a href=\"scheduleMonitor.htm\" class=\"nav\" id=\"scheduleMonitor\" style=\"text-decoration:none\">Monitor Data Loads</a></div>"); 
```

这是我的CSS：

```
#leftNav {
width:180px;
height:687px;
background-color:#E0F0F2;
margin-bottom:15px;
padding-left:10px;
text-decoration:none;
text-color: #0083cc;
}

#leftNavtext {
font-family: Arial, Helvetica, sans-serif; font-weight:800;
font-size:95%;
color:#0083cc;
width:auto;
padding: 20px 10px 3px 0px;

}

#noteBody{
font-family: Arial, Helvetica, sans-serif; font-weight:800;
font-size:95%;
width:960px;
margin:auto;

}

// Below is the code for getting the hyperlink text to be formatted correctly (ie link colors)
a.nav:link {color: #0083cc; text-decoration: none; }
a.nav:visited {color: #0083cc; text-decoration: none; }
a.nav:hover {color: orange; text-decoration: underline; }
a.nav:active {color: #0083cc; } 
```

据我所知，这两个链接之间没有区别。这些只是我在左侧导航中的众多链接中的一小部分，这是随机发生的。我目前使用的是 IE 9，这个浏览器是我的要求。

任何帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T18:05:41.277

您是否格式化了所有 :pseudo 声明的锚？

```
a, a:link, a:visited {some.css}
a:hover, a:visited:hover, a:active, a:focus {some-other.css} 
```

也许您正在查看特定于浏览器的样式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T18:27:53.263

首先，

*   `text-color`属性不存在；改为使用`color`。
*   如果您使用的是 ASP（似乎是），请在您的问题中添加适当的标签

接下来，问题不在于您的 CSS ；在这里看到这个小小的 JSFiddle：http: [//jsfiddle.net/j8ruV/2/](http://jsfiddle.net/j8ruV/2/)

事实是您正在使用 document.write() 方法向页面动态添加对象，但是此方法将您`divs`奇怪地添加到 DOM 中，因此 CSS 不考虑它们（内联对象除外）。通过简单地测试该`.innerHTML`属性，这似乎有效（参见小提琴）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T23:38:07.980

我最终不得不为链接放置内联代码：

`document.write("<div id=\"leftNavtext\" ><a href=\"dataSubmissions.jsp\" class=\"nav\" id=\"dataSubmissions\" style=\"text-decoration:none; color:#0083cc;\">Data Submissions</a></div>");`

# sql-server-2008 - 从其他数据库和表中的几个相同类型更新表中的单个 varchar 字段并与换行符结合

> ID：14817573
> 
> 赞同：0
> 
> 时间：2013-02-11T17:33:40.623
> 
> 标签：sql-server-2008

如果我的答案在另一篇文章中，我还没有找到。我认为可能有我的答案的帖子是“我想连接来自 2 个文本区域的 2 个字符串并将它们插入到我的表中的列中。”

我正在转换一些数据。其他数据库的文本存储在同一个表中，不同的字段。每个字段（x.description_plain_text 都有一个序列号，如脚本中所示。正如您在我的尝试中看到的那样，我想将两个文本行放入一个（varchar（8000））字段并用一行分隔或二. 我不知道是否允许我标记第二个目标，但是如果/在我将其他数据库中的这些单独的行放入新数据库的一个字段中之后，我希望能够在每个字段旁边放置一个标识符...正如我试图在第二张插图中展示的那样...

第一个插图

```
--select x.description_plain_text, x.SEQ_NO
update MIC.dbo.Item  set CustomerDocumentNote = 
case 
when x.SEQ_NO = 1 then cast(x.description_plain_text as varchar(8000))
when x.SEQ_NO = 2 then cast(x.description_plain_text as varchar(8000))
END
-- x.description_plain_text + CHAR(13) + CHAR(10) + cast(x.description_plain_text as varchar     (8000))
from MIC.dbo.Item a
inner join in_item_xdesc x on x.item_id = a.itemid
where (a.ItemNumber = '14661')--(IS_PRINT_ACKNOW = 'Y' and SEQ_NO = 2) 
```

第二个插图...需要一个 SQL 查询，它只会给我 P_A 的描述... P_A 只是一个标识符...可以是任何东西...只是一种说法 If P_A then print 但 IF P_PT_PO THEN print 。 ..

```
P_A - Heater with 1.5" OD flange at 2.5", 48" mica leads with 36" SS braid exiting 90° from sheath, single clip support. 800 Watts & 240 Volts.  For Gala pellitizer. 

+ CHAR(13) +

P_PT_PO - Stamp "MIC #14661" on OD of heater. Silicone over Cement at lead ends. 
```

# dll - 使用 MinGW 的 dlltool 为 dbghelp.dll 生成导入库

> ID：14817579
> 
> 赞同：0
> 
> 时间：2013-02-11T17:34:11.060
> 
> 标签：dll, mingw

[正如帖子“ Win32 API stack walk with MinGW/MSYS?](https://stackoverflow.com/questions/3318564/win32-api-stack-walk-with-mingw-msys) ”的第一个答案中提到的，dlltool 可用于为 MinGW 生成导入库。

但是下面的命令只是在屏幕上打印“创建进程”并生成一个 0KB 的 dbghelp.a 文件

```
dlltool -k -d libdbghelp.def -l dbghelp.a 
```

我使用了此处提供的 .def 文件：http: [//sourceforge.net/p/mingw/feature-requests/40/ ?limit=10&page=1#54a9](http://sourceforge.net/p/mingw/feature-requests/40/?limit=10&page=1#54a9)

.def 文件的前几行是

```
; File generated automatically from ./dbghelp.spec; do not edit!

LIBRARY dbghelp.dll

EXPORTS
  EnumDirTree@24 @3
  EnumDirTreeW@24 @4
  EnumerateLoadedModules@12 @5
  EnumerateLoadedModules64@12 @6 
```

我错过了什么吗？我目前正在使用 MinGW 版本 4.4.1

我看到头文件 dbghelp.h 在我找到 libdbghelp.def 的页面中也可用。这个应该放在哪里？

还有对必须运行此工具的位置的任何限制。我目前已将 .def 文件复制到与 dlltool 相同的目录并执行了命令。

问候， Shreyas

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T18:53:00.957

问题又出在 MinGW 4.4.1 上。如果我使用 4.6.1，它工作正常。

谢谢你。

# google-apps-script - 测试 GAS 中 X 的范围

> ID：14817588
> 
> 赞同：0
> 
> 时间：2013-02-11T17:34:26.117
> 
> 标签：google-apps-script

我有一张表格，用于预订多日举行的一系列演讲活动。当此范围内的某一天达到房间容量时，我正试图让它通过电子邮件发送给我。我正在测量一个单元格中的容量，该单元格为 FALSE，直到它达到容量然后变为 TRUE。

我的容量测试变量是

```
var sheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("counts");
var currentValue = sheet.getRange("D2:D13").getValues();
Logger.log('currentValue = '+currentValue) 
```

这在日志中返回，currentValue = false,false,false,false,false,false,false,false,false,false,false,false

我的脚本中有一行应该触发一封电子邮件，上面写着。

```
if (currentValue = "true") 
```

我已经尝试了这一行的各种组合。目前，每次有人提交预订时它都会发送电子邮件。:)

我的“if”语法应该是什么，以便只有在 currentValue 范围内的某个地方有“true”时才会发送电子邮件？

感谢您可以借给我的任何帮助。戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:39:30.120

要检查是否相等，您必须使用`==`运算符。使用单个等号意味着您正在尝试将“true”的值分配给变量`currentValue`。要检查它们是否相等，请使用`==`.

其次，您将需要遍历 的每个值`currentValue`以检查它们中的任何一个是否为真。所以要做到这一点：

```
//currentValue is a 2D array
var nRows = currentValue.length;
for(var i=0;i<nRows;i++) {
  if (currentValue[i][0]=="true") {
    //send email
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T21:51:44.497

当您调用 getValues() 时，它会返回一个 2D Object[][] 数组，因此当您记录 currentValue 时，您应该得到如下内容：

```
[[true], [true], [true], [true], [true], [true], [true], [false], [true], [false]] 
```

电子表格具有存储布尔值的能力，这就是为什么每当您输入 true 时，它​​都会将该值转换为大写并将该值解释为布尔值。因此，当您在脚本中检索该值时，您应该将其视为布尔值。

```
var sheet = SpreadsheetApp.getActiveSpreadsheet().getActiveSheet();
var currentValues = sheet.getRange("D2:D13").getValues();
for (var x in currentValues) {
  var value = currentValues[x][0];

  if (value) {
    Logger.log('True value');
    // Send email, but do you want to send an email every single time this script
    // is run??
  } else if (value == false) { // You can leave this as else instead of else if
    Logger.log('false value')
  }
} 
```

我假设您希望在用户提交表单时触发此脚本。您可以将 CellRange 存储在 scriptDB 中，并仅在 DB 中不存在 CellRange 时发送电子邮件，而不是每次脚本看到“true”值时发送电子邮件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T18:11:23.150

我正在为收到的答案添加额外的评论，并希望更详细地评论代码，以便像我这样的新手可以从答案中学到更多。我使用了 Phil 提供给我的代码，但一开始我将其部署在错误的位置。

```
function onFormSubmit(e) {
  var sheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("counts");
  var currentValue = sheet.getRange("D2:D13").getValues();
  //currentValue is a 2D array (think of it like a matrix). You can get an
  //individual element from it by calling currentValue[row#][col#]
  // for example: currentValue[3][0] will give you the item in the 4th row, 1st column
  //    NOTE: arrays are zero-based, so the first item is index 0.
  //you can also obtain a row of elements
  //  var rowThree = currentValue[2];
  //  rowThree is now a 1D array. get an element by calling rowThree[col#]

  var nRows = currentValue.length;
  //currentValue.length gives you the number of elements in the first dimension
  //of the 2D array. so in this case, it gives you the number of rows.

  for(var i=0;i<nRows;i++) {  
    //creates a new variable i, defines i is initially 0.
    //for every loop while i is less than nRows, run the loop, then increment i by 1
    //so this will run the following code once for every row number.

    Logger.log('row '+i+' col[0] = '+currentValue[i][0]); //log the value in the current row

    if (currentValue[i][0]=="true") //the double equals operator checks for equality
                                    //whereas a single equals would ASSIGN the value
                                    //"true" to the array at location [i][0]
    {
      MailApp.sendEmail("dave@davelalande.com","Talks Room Capacity  Reached","A date within the next round of Talks has reached capacity, " +
                 "\nplease check the sheet https://docs.google.com/spreadsheet/ccc?key=""#gid=1 and removed the date.");
    }
  }
} 
```

有关 Phil 提供的工作解决方案的更多信息。

我目前正在收到错误消息...

TypeError：无法从未定义中读取属性“0”。（第 38 行）

指的是这条线。

```
if (currentValue[i][0]=="true"); 
```

我当前唯一记录的是 Logger.log('row '+i+' col[0] = '+currentValue[i][0]);

这是输出这个...

```
row 0 col[0] = false
row 1 col[0] = false
row 2 col[0] = false
row 3 col[0] = false
row 4 col[0] = false
row 5 col[0] = false
row 6 col[0] = false
row 7 col[0] = false
row 8 col[0] = false
row 9 col[0] = false
row 10 col[0] = false
row 11 col[0] = false 
```

# xmlhttprequest - 尝试使用 XMLHttpRequest 在 CouchDb 中创建新文档时出现 400 错误消息

> ID：14817589
> 
> 赞同：0
> 
> 时间：2013-02-11T17:34:29.720
> 
> 标签：xmlhttprequest, couchdb

我正在尝试在 couchDB 数据库中创建一个新文档，但是使用以下代码我得到了“400 bad request”响应。我想创建一个不包含除_id（当然还有生成的_rev）之外的任何其他信息的文档。

```
 var xhrCreate = new XMLHttpRequest();
            xhrCreate.open('PUT','http://domainName:5984/dbName/docName/', true);
            xhrCreate.setRequestHeader("Content-type", "application/json");
            xhrCreate.send(); 
```

CouchDb 文档说 400 错误表示：

“错误的请求结构。错误可能表明请求 URL、路径或标头有错误。提供的 MD5 哈希和内容的差异也会触发此错误，因为这可能表明消息损坏。”

谁能指出我正确的方向？非常感谢提示和帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T11:40:08.793

CouchDB 需要一个空文档作为内容的一部分：

```
xhrCreate.send('{}'); 
```

# git - 如何仅将过去分支中已更改的文件合 并到 GIT 中的 master 中？

> ID：14817590
> 
> 赞同：0
> 
> 时间：2013-02-11T17:34:30.953
> 
> 标签：git, version-control, github, branching-and-merging

假设我创建了一个名为 fix_5109 的本地分支并对其进行处理。与此同时，主分支发生了变化，一些我没有编辑的文件通常也发生了变化（例如/controllers/AuthController.php）。如果我将更改推送到原点 fix_5109，如果一切顺利，首席开发人员希望将我的分支合并到主分支中。我的分支包含旧的 AuthController.php 来自 master 的新提交后面的旧提交。主分支中的文件会被我的文件版本覆盖，还是会拒绝我的该文件版本并仅更新我在推送的分支中编辑的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:38:41.307

`git`以某种方式起作用，如果已经应用了提交，则不会再次应用它（通过提交哈希的唯一性）。因此，对于您的情况，假设您在已经对 AuthController.php 进行更改的某个时间点与 master 分道扬镳，那么您不必担心。因为，git 不会重播现有的提交。

因此，即使您的潜在客户合并了您分支中的更改。他基本上都会有最新的代码。即）最后做了什么改变（没有分歧）。如果更改是单独进行的，那么 git 将尝试解析提交并一个接一个地应用它们。在这种情况下，如果存在冲突，那么您需要明确处理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T17:53:09.650

```
git checkout master
git pull origin master
git checkout fix_5109
git rebase master 
```

基本上，使用 master 的当前状态重新定位您的分支将解决您关心的问题。

# magento - 如何在 Magento 中添加条件产品选项

> ID：14817591
> 
> 赞同：0
> 
> 时间：2013-02-11T17:34:31.420
> 
> 标签：magento, e-commerce, categories, options, product

如果我有一个产品，并且想根据用户的“是/否”选择提供一部分产品（配件），那么最好的方法是什么？在一个简单的例子中，用户选择了一个电话，如果用户然后从“显示电话配件”下拉列表中选择“是”，那么我希望他们提供一组下拉列表，提供配件选择，例如皮肤、外壳等。 . 在那个页面上

这可以使用 magento 功能实现吗？还是我必须使用附加/扩展？

太感谢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T17:59:50.603

如果您的问题是可以使用现有的 Magento 功能来完成，那么答案是否定的。

您可以通过使用自定义 javascript 覆盖模板来使用一些库存功能来做到这一点。即“附件”下拉菜单始终显示，但在用户做某事之前隐藏。

# vba - 右侧的 Visio Dock Stencil 窗口

> ID：14817593
> 
> 赞同：1
> 
> 时间：2013-02-11T17:34:48.300
> 
> 标签：vba, visio

我正在尝试以编程方式将模板窗口停靠在屏幕右侧。我知道我可以将窗口的 WindowState 属性设置为 visWSDockedRight，但如果我已经将模板停靠在右侧，我尝试停靠的模板将获得自己的子窗口，而不仅仅是出现在其他模板堆栈上。

虽然这几乎是我需要做的，但它并不完全在那里。如果有某种方法可以将窗口添加到已经停靠的窗口中，那就更好了。

我在屏幕左侧有一组停靠的模板，在右侧有另一个。我可以使用 Documents.OpenEx 打开停靠的模板，但我无法指定要使用的停靠。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T18:53:58.067

你是如何打开模具的？如果你像这样打开它，它应该只是停靠在打开的模板堆栈中：

```
 Documents.OpenEx "stencil.vss", visOpenDocked 
```

# c# - 从串口读取有符号整数

> ID：14817597
> 
> 赞同：1
> 
> 时间：2013-02-11T17:35:06.367
> 
> 标签：c#, integer, serial-port, 16-bit

我使用 read 方法一次从串行端口读取 12 个字节。我正在正确接收字节形式的数据。但是，一旦我拥有这些字节，我就会尝试将它们转换为有符号整数。字节的顺序是（最低有效字节 1）、（最高有效字节 1）、（最低有效字节 2）、（最高有效字节 2）等。然后我尝试使用每个重新组装它们。

```
while ((intErg = serialPort1.Read(comBuffer, 0, comBuffer.Length)) > 0)
      {
          string strErg2 = "";          
          double vbatmsb = 0;
          double vbatlsb = 0;

          short imsb = 0;

          double vbattotal = 0.0;

          for (int i = 0; i < comBuffer.Length; i++)
          {

              switch (i)
              {
                  case 0:
                       imsb = (short)(comBuffer[i+1] << 8 + comBuffer[i]);
                       strErg2 += imsb.ToString()+ ", ";
                      break;                
                  case 2:
                       imsb = (short)(comBuffer[i+1] << 8 + comBuffer[i]);
                       strErg2 += imsb.ToString()+ ", ";
                      break;
                  case 4:
                       imsb = (short)(comBuffer[i+1] << 8 + comBuffer[i]);
                       strErg2 += imsb.ToString()+ ", ";
                      break;
                  case 6:
                      imsb = (short)(comBuffer[i] << 8 + comBuffer[i + 1]);
                       strErg2 += imsb.ToString()+ ", ";
                      break;                    
                  case 8:
                       imsb = (short)(comBuffer[i+1] << 8 + comBuffer[i]);
                       strErg2 += imsb.ToString()+ ", ";
                      break;

                  case 10:
                      vbatlsb = comBuffer[i];
                      break;
                  case 11:
                      strErg2 += ", ";
                      vbatmsb = comBuffer[i];
                      vbattotal = ((vbatmsb * 256.0 + vbatlsb) * 6.6) / 4095.0;
                      strErg2 += vbattotal.ToString();
                      break;

              }

          }

          this.BeginInvoke(new EventHandler(delegate
          {

              SetTheText(strErg2);

          }));

      } 
```

这`comBuffer`是一个由`serialPort1.Read`命令填充的字节数组。最后 2 个字节的处理方式不同，因为它们是无符号整数并且是正确的。然而，我尝试重新组装成有符号整数的前 10 个字节甚至不接近它们应该是的值。当我重新组装这些时，有人对我做错了什么有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T18:38:19.777

使用 BitConverter 将字节数组转换为其他类型。类似的东西

```
while....
{
  if (comBufferLength >= 2)
  {
     imsb1 = BitConverter.ToInt16(comBuffer, 0);
     if (comBufferLength >= 4)
       imsb2 = BitConverter.ToInt16(comBuffer, 2);
       .... 
```

# java - java.io.FileNotFoundException: C:\opt\apache-tomcat-6.0.36-ins2\logs\localhost.2013-02-11.log（访问被拒绝）

> ID：14817601
> 
> 赞同：0
> 
> 时间：2013-02-11T17:35:21.597
> 
> 标签：java, apache, tomcat

`C:\opt\apache-tomcat-6.0.36-ins2`是我的 tomcat 实例所在的位置。

当我今天启动 tomcat 实例时，我立即收到以下错误（在第一行）。直到今天，我一直能够在没有此类错误的情况下启动 tomcat。请问有没有办法解决这个问题？

> java.io.FileNotFoundException: C:\opt\apache-tomcat-6.0.36-ins2\logs\localhost.2013-02-11.log (访问被拒绝) 在 java.io.FileOutputStream.openAppend(Native Method) 在java.io.FileOutputStream.(FileOutputStream.java:192) at org.apache.juli.FileHandler.openWriter(FileHandler.java:374) at org.apache.juli.FileHandler.(FileHandler.java:99) at org.apache .juli.FileHandler.(FileHandler.java:90) 在 sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) 在 sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39) 在 sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl。 java:27) 在 java.lang.class 的 java.lang.reflect.Constructor.newInstance(Constructor.java:513)。newInstance0(Class.java:355) at java.lang.Class.newInstance(Class.java:308) at org.apache.juli.ClassLoaderLogManager.readConfiguration(ClassLoaderLogManager.java:515) at org.apache.juli.ClassLoaderLogManager.readConfiguration (ClassLoaderLogManager.java:460) 在 org.apache.juli.ClassLoaderLogManager.readConfiguration(ClassLoaderLogManager.java:286) 在 java.util.logging.LogManager$2.run(LogManager.java:267) 在 java.security.AccessController.doPrivileged （本机方法）在 java.util.logging.LogManager.readPrimordialConfiguration(LogManager.java:265) 在 java.util.logging.LogManager.getLogManager(LogManager.java:248) 在 java.util.logging.Logger.(Logger. java:225）在 java.util.logging.LogManager$RootLogger.(LogManager.java:1094) 在 java.util。logging.LogManager$RootLogger.(LogManager.java:1091) 在 java.util.logging.LogManager$1.run(LogManager.java:180) 在 java.security.AccessController.doPrivileged(Native Method) 在 java.util.logging。 LogManager.(LogManager.java:157) at java.util.logging.Logger.getLogger(Logger.java:287) at org.apache.juli.logging.DirectJDKLog.(DirectJDKLog.java:71) at org.apache.juli .logging.DirectJDKLog.getInstance(DirectJDKLog.java:178) 在 org.apache.juli.logging.LogFactory.getInstance(LogFactory.java:171) 在 org.apache.juli.logging.LogFactory.getInstance(LogFactory.java:243) ) 在 org.apache.juli.logging.LogFactory.getLog(LogFactory.java:298) 在 org.apache.catalina.startup.Bootstrap.(Bootstrap.java:55)logging.LogManager$1.run(LogManager.java:180) at java.security.AccessController.doPrivileged(Native Method) at java.util.logging.LogManager.(LogManager.java:157) at java.util.logging.Logger。 getLogger(Logger.java:287) 在 org.apache.juli.logging.DirectJDKLog.(DirectJDKLog.java:71) 在 org.apache.juli.logging.DirectJDKLog.getInstance(DirectJDKLog.java:178) 在 org.apache。 juli.logging.LogFactory.getInstance(LogFactory.java:171) 在 org.apache.juli.logging.LogFactory.getInstance(LogFactory.java:243) 在 org.apache.juli.logging.LogFactory.getLog(LogFactory.java: 298）在 org.apache.catalina.startup.Bootstrap.（Bootstrap.java:55）logging.LogManager$1.run(LogManager.java:180) at java.security.AccessController.doPrivileged(Native Method) at java.util.logging.LogManager.(LogManager.java:157) at java.util.logging.Logger。 getLogger(Logger.java:287) 在 org.apache.juli.logging.DirectJDKLog.(DirectJDKLog.java:71) 在 org.apache.juli.logging.DirectJDKLog.getInstance(DirectJDKLog.java:178) 在 org.apache。 juli.logging.LogFactory.getInstance(LogFactory.java:171) 在 org.apache.juli.logging.LogFactory.getInstance(LogFactory.java:243) 在 org.apache.juli.logging.LogFactory.getLog(LogFactory.java: 298）在 org.apache.catalina.startup.Bootstrap.（Bootstrap.java:55）LogManager.(LogManager.java:157) at java.util.logging.Logger.getLogger(Logger.java:287) at org.apache.juli.logging.DirectJDKLog.(DirectJDKLog.java:71) at org.apache.juli .logging.DirectJDKLog.getInstance(DirectJDKLog.java:178) 在 org.apache.juli.logging.LogFactory.getInstance(LogFactory.java:171) 在 org.apache.juli.logging.LogFactory.getInstance(LogFactory.java:243) ) 在 org.apache.juli.logging.LogFactory.getLog(LogFactory.java:298) 在 org.apache.catalina.startup.Bootstrap.(Bootstrap.java:55)LogManager.(LogManager.java:157) at java.util.logging.Logger.getLogger(Logger.java:287) at org.apache.juli.logging.DirectJDKLog.(DirectJDKLog.java:71) at org.apache.juli .logging.DirectJDKLog.getInstance(DirectJDKLog.java:178) 在 org.apache.juli.logging.LogFactory.getInstance(LogFactory.java:171) 在 org.apache.juli.logging.LogFactory.getInstance(LogFactory.java:243) ) 在 org.apache.juli.logging.LogFactory.getLog(LogFactory.java:298) 在 org.apache.catalina.startup.Bootstrap.(Bootstrap.java:55)LogFactory.getInstance(LogFactory.java:171) at org.apache.juli.logging.LogFactory.getInstance(LogFactory.java:243) at org.apache.juli.logging.LogFactory.getLog(LogFactory.java:298) at org .apache.catalina.startup.Bootstrap.(Bootstrap.java:55)LogFactory.getInstance(LogFactory.java:171) at org.apache.juli.logging.LogFactory.getInstance(LogFactory.java:243) at org.apache.juli.logging.LogFactory.getLog(LogFactory.java:298) at org .apache.catalina.startup.Bootstrap.(Bootstrap.java:55)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T18:00:47.197

在 Windows 中，在编辑器中打开日志文件会阻止其他进程写入其中。因此，请关闭所有打开日志文件的编辑器。

有时文件夹的权限也会不匹配——在这种情况下，清空日志文件夹/将现有日志移动到其他地方应该可以解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-05T05:40:53.277

即使我在启动tomcat6时也遇到了同样的异常，在我的情况下，这个问题是因为设置为日志文件夹的权限，最后通过将日志文件夹的读写权限设置为当前用户来解决。

现在Tomcat6启动成功了：）

# javascript - 使用 JSON 解析/字符串化处理数据

> ID：14817604
> 
> 赞同：0
> 
> 时间：2013-02-11T17:35:32.950
> 
> 标签：javascript, json

我有一个关于使用 Javascript 和 stringify/parse 操作 JSON 数据的问题。在下面的示例中，我创建了一个 JSON 字符串，然后使用 parse 将其转换回对象。之后，我想做的是删除具有特定 ID 的项目，而我能找到的唯一方法是循环整个数组并在找到匹配项后从数组中删除元素。这似乎不是很有效。有一个更好的方法吗？

```
var employees = [];

//build the array
for (var i=0; i < 10; i++) {
    var player = { "id": i, "salary": i*1000000 };
    employees.push(player);
}

json_employees = JSON.stringify({employees: employees}); //convert to json string
alert(json_employees); //display the new string

var obj = JSON.parse(json_employees); //convert back to a Javascript object

for (var j=0; j < obj.employees.length; j++) { // loop through the array
    if (obj.employees[j].id === 5) // is it the employee with id 5?
        obj.employees.splice(j, 1); // remove the fifth item
}

json_modified_employees = JSON.stringify({employees: obj.employees}); //convert back to json string
alert(json_modified_employees); //display the new string 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T17:39:23.820

您可以将员工存储在一个对象中，并使用他们的键`id`，如下所示：

```
// create a store object
var employees = {};

//build the array
for (var i=0; i < 10; i++) {
    var player = { "id": i, "salary": i*1000000 };
    // add item to store object with a key of 'pk' + i
    employees['pk' + i] = player;
}

json_employees = JSON.stringify({employees: employees}); //convert to json string
alert(json_employees); //display the new string

var obj = JSON.parse(json_employees); //convert back to a Javascript object

// remove the required item (in this case number 5)
delete obj.employees['pk' + 5];

json_modified_employees = JSON.stringify({employees: obj.employees}); //convert back to json string
alert(json_modified_employees); //display the new string 
```

如果你想迭代你的员工，你会

```
for (var key in employees) {
    if (employees.hasOwnProperty(key)) {
        alert(employees[key].id)
    }
} 
```

# ios - 核心数据吞没未捕获的异常

> ID：14817605
> 
> 赞同：4
> 
> 时间：2013-02-11T17:35:38.333
> 
> 标签：ios, exception, core-data

我遇到了一个令人不安/令人困惑的错误。Core Data 似乎正在吞下自己的例外！在使用（超级有用的）[CoreDataHelper](http://maybelost.com/2010/12/core-data-helper-revised)时，我编写了一个格式错误的 fetch，导致“未实现的谓词 SQL 生成”异常。这部分很简单，**真正**奇怪的是这个异常被某个地方捕获并吞下，这意味着我的代码只是跳过了该方法的其余部分，并在没有任何控制台消息的情况下返回到主循环。很气人。

最终，我能够将实际的 fetch 请求包装在 @try 语句中并 @catch 异常：

```
@try{
fetchResults = [managedObjectContext executeFetchRequest:request error:&error];
    NSLog(@"fetch successful");
}
@catch (NSException* exception) {
    NSLog(@"caught exception!\n\n%@\n\n%@\n\n%@",[exception name], [exception reason], [exception userInfo]);
} 
```

这让我弄清楚它是什么，但它仍然**没有意义**被某个地方抓住。除了测试之外，我没有在我的代码中的*任何其他地方*使用过@try/@catch 。

我还尝试创建一个空白的 Core Data 项目并使用没有 @try/@catch 语句的 CoreDataHelper 来尝试隔离问题，项目中没有其他内容，CoreDataHelper 可以正常工作，返回：

```
CoreDataTest[1044:11603] *** Terminating app due to uncaught exception   'NSInvalidArgumentException', reason: 'Unimplemented SQL generation for predicate ("test" LIKE attribute)' 
```

所以我的项目中的某些东西正在捕获并忽略这个异常，但这不是我，除非我可以在不使用@catch 的情况下以某种方式做到这一点。

会是什么呢？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T20:01:38.083

知道了！

我正在使用具有自己的库的外部附件（Linea Pro-4 条形码扫描仪/MSR），这就是捕获异常的原因，即使在其最新版本的框架中也是如此。

在运行相同的获取请求之前，我设置了我的空白测试项目以连接到附件，然后 bam！燕子例外！

# android - 根据 android 操作系统版本更改布局

> ID：14817608
> 
> 赞同：1
> 
> 时间：2013-02-11T17:35:47.967
> 
> 标签：android

为了避免我是否是 Jellybean 时必须手动检查每个活动并相应地选择布局（因为 ActionBar 比旧标题栏占用更多空间），是否有一种简单的方法可以通过 os 以相同的方式指定布局文件您可以通过命名文件夹来按屏幕大小指定布局文件吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T17:40:56.870

是的，有一个平台版本级别限定符。官方文档：http: [//developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources](http://developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources)

它看起来像`layout-v<API Level>`

一个例子：

```
layout-v11/  Honeycomb+
layout-v14/  ICS+ 
```

# java - 为什么 StringBuilder 表现得像通过引用传递

> ID：14817609
> 
> 赞同：5
> 
> 时间：2013-02-11T17:35:48.940
> 
> 标签：java, stringbuilder

检查此代码

```
 public class StringbuilderDoubt {

    public static void main(String args[]){
           new StringbuilderDoubt().methodTest();
    }

    public void methodTest(){
        String str=new String("Default");
        StringBuilder sb=new StringBuilder();
        sB1(str,sb);
        sB2(str,sb);
        System.out.println(str+".........."+sb);
    }
    private void sB1(String str1, StringBuilder sb1){
                    str1+="str1";
                    sb1.append("sB1");
    }

    private void sB2(String str2, StringBuilder sb2){
        str2+="str2";
        sb2.append("sB2");
    }
} 
```

输出是：`Default..........sB1sB2` 为什么 StringBuilder 像通过引用传递一样工作？在 methodTest 我传递了两个对象字符串和字符串生成器。String 是按值传递的，但 StringBuilder 看起来像是通过引用传递，而调用方法的 StringBuilder 对象发生了变化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T17:42:58.853

当您将 StringBuilder 实例传递给方法时，实例值是按值传递的。如您所见，您可以将字符附加到方法内部的 StringBuilder 实例，而无需返回实例值。

如果需要，您也可以返回 StringBuilder 实例值，但这不是必需的。它没有改变。

这种“通过引用传递”也适用于大多数 Collection 类（List、Map）以及您自己的具有 getter 和 setter 的类。

如果您不希望这种行为，则必须对您传递的实例进行深层复制。如果您从公共 API 返回 Collection 类，您会这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T07:44:21.777

因为它**是**通过引用传递的。对 的*引用*是按`StringBuilder`值传递的。您可以添加字符，它们将在方法返回后出现在实例中。同样的方式你可以传递一个集合并在调用方法中添加值 - 这些将被保留。您也可以调用 setter 或分配公共字段，这样的更改在返回后也会持续存在。

对的引用`String`也是按值传递的，因此在方法返回后为该引用分配新值无效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T17:42:29.303

我认为这里没有任何问题`StringBuilder`。

引用所引用的字符串没有任何反应`str`。在您的`sB1`方法中，您有一个本地参考`str1`。"+=" 运算符返回一个新字符串，但原始字符串是不可变的，不会更改。同样的事情发生在你的`sB2`方法中。

因此，您的变量`str`仍然只包含“默认”。

# php - 如何在一个循环中使行溢出

> ID：14817612
> 
> 赞同：2
> 
> 时间：2013-02-11T17:35:52.360
> 
> 标签：php, html, css

我需要图片出现在多行中。问题是我必须在一个大循环中完成所有操作并使用溢出：自动。无论如何我可以这样做吗？这是代码：

```
<div class="horizontal2">
              <ul>
                <li>
                  <?php for ($i=0; $i <60; $i++): ?>                             
                    {{ user:profile }}
                      <img class="picformatting" src="{{ profile_picture:image }}" />
                    {{ /user:profile }}                                   
                  <?php endfor;?>
                </li>
              </ul>
            </div> 
```

这是CSS（水平2）：

```
.horizontal2{
  list-style: none;
  width: 100%;
  overflow: auto;
  padding-left: 0;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T18:09:15.830

怎么样 ：

```
<?php
$max_img = 10;
?>
<?php for ($i=0; $i <60; $i++): ?>
    {{ user:profile }}
        <img class="picformatting" src="{{ profile_picture:image }}" />
        <?php if(fmod($i, $max_img) == 0) echo "<br/>"; ?>
    {{ /user:profile }}                                   
<?php endfor;?> 
```

当然，它不是在自动模式下，但可以是一个“解决方案”......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T17:40:15.470

```
li#container {
   width:400px;
   height:auto;
}
li#container img {
   display:inline-block;
   width:37px;
   height:37px;
   margin:3px;
} 
```

你可以只使用`display:inline-block`属性。它将进行调整，如果超过 10 个图像在一行中，那么它将强制它到另一行。

# java - Java NIO (java.nio.*) - 哪个版本？

> ID：14817615
> 
> 赞同：-1
> 
> 时间：2013-02-11T17:36:12.220
> 
> 标签：java, nio

我正在尝试[http://docs.oracle.com/javase/tutorial/essential/io/notification.html](http://docs.oracle.com/javase/tutorial/essential/io/notification.html)。我认为这将是一个使用“javac WatchDir.java”的简单编译 - 没有骰子。 [http://en.wikipedia.org/wiki/New_I/O](http://en.wikipedia.org/wiki/New_I/O)说 NIO 是在 J2SE 1.4 中引入的。我尝试了5和6，仍然没有快乐！？？？我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T17:40:08.473

该[`WatchDir`](http://docs.oracle.com/javase/tutorial/essential/io/examples/WatchDir.java)示例使用[`java.nio.file`](http://docs.oracle.com/javase/7/docs/api/java/nio/file/package-summary.html)包，该包仅在 Java 7 中可用。

# wpf - WPF：如何将 GIF 文件保存在字符串或来自 URL 的文件中？

> ID：14817616
> 
> 赞同：0
> 
> 时间：2013-02-11T17:36:13.913
> 
> 标签：wpf, string, save, uri, gif

我尝试将位于 URL 上的 .gif 的内容检索到字符串中 - 并最终将其保存到磁盘 - 使用 webbrowser 从 WPF 应用程序运行。在尝试了几十种解决方案之后，我并没有比昨天更进一步。我认为下面的代码可以完成这项工作，但保存的字符串 cGif 包含...... url 本身。从[http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.gifbitmapdecoder.aspx](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.gifbitmapdecoder.aspx)然后我认为我需要 GifBitmapEncoder，但示例表明这会创建一个空的 gif 而不是下载的一。

（PS：我基本上想做的是直接从 WPF 网络浏览器中检索 GIF 字节，但我也没有发现任何在那里工作的东西）

```
private void GifSave()
    {
        var uri = new Uri(@"http://www.archivearts.com/GIRAFFE2.gif");
        var Img = new GifBitmapDecoder(uri, BitmapCreateOptions.PreservePixelFormat, BitmapCacheOption.OnLoad);

        string cGif = Img.ToString();

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:54:37.617

根据 GifBitmapDecoder MSDN 页面上的示例修改：

```
// Open a Stream and decode a GIF image
var uri = new Uri(@"http://www.archivearts.com/GIRAFFE2.gif");
GifBitmapDecoder decoder = new GifBitmapDecoder(uri, BitmapCreateOptions.PreservePixelFormat, BitmapCacheOption.OnLoad);
BitmapSource bitmapSource = decoder.Frames[0]; 
```

然后使用`CopyPixels()`BitmapSource 的方法将像素数据复制到一个数组中。然后将数组转换成字符串？

我没有这样做，我只是看了一下 MSDN 以获得一些提示。

# html - 子域忽略链接样式表的边距？

> ID：14817618
> 
> 赞同：0
> 
> 时间：2013-02-11T17:36:28.783
> 
> 标签：html, css, margin, stylesheet

我遇到了一个我以前没有遇到过的问题。我正在网站[http://recruitingprocessanalytics.redbranchmedia.com](http://recruitingprocessanalytics.redbranchmedia.com)上工作，当用户单击登录时，它会重定向到子域[http://app.recruitingprocessanalytics.com/](http://app.recruitingprocessanalytics.com/)。子域使用来自主站点的样式表。问题是，它忽略了一些 CSS 规则，但不是全部。

例如，查看开发人员工具中子域上的 h1“Demo”。它应该有 10px 的边距顶部，我在开发人员工具中看到它，但它只是没有添加边距。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T18:03:32.170

margin-top 和 margin-bottom 仅适用于块元素，不适用于内联元素！

您将标题元素的通常行为更改为 display: inline; 在 common.css 文件中，防止显示边距。

[我猜http://recruitingprocessanalytics.redbranchmedia.com](http://recruitingprocessanalytics.redbranchmedia.com)上没有使用 common.css 文件。

将行为更改为 display: block;，然后将显示边距！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T17:57:40.790

尝试在 HTML 中添加 margin-top: 10px inline。像这样：

```
<h1 style="margin-top:10px">Title</h1> 
```

我建议这样做的原因是查看样式是否被应用。如果是这样，则您的问题是特异性问题，或者某些事情超出了您的 CSS。

检查样式表是否以不同的顺序链接。或者，如果您的 h1 标签中已经有内联样式？

如果是我尝试调试它，我将从内联样式开始。

希望这可以帮助！

# r - 如何按R中字符变量的字母顺序对数据框进行排序？

> ID：14817620
> 
> 赞同：28
> 
> 时间：2013-02-11T17:36:31.043
> 
> 标签：r

我想按 R 中字符变量的字母顺序对数据框进行排序。我尝试使用该`order()`函数来执行此操作，但它将我的数据框转换为列表。有人有线索吗？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-02-11T17:40:28.417

好吧，我在这里没有问题：

```
df <- data.frame(v=1:5, x=sample(LETTERS[1:5],5))
df

#   v x
# 1 1 D
# 2 2 A
# 3 3 B
# 4 4 C
# 5 5 E

df <- df[order(df$x),]
df

#   v x
# 2 2 A
# 3 3 B
# 4 4 C
# 1 1 D
# 5 5 E 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-11T17:41:39.940

```
#sort dataframe by col
sort.df <- with(df,  df[order(sortbythiscolumn) , ])

#can also sort by more than one variable: sort by col1 and then by col2
sort2.df <- with(df, df[order(col1, col2) , ])

#sort in reverse order
sort2.df <- with(df, df[order(col1, -col2) , ]) 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-02-11T17:59:02.317

包中的`arrange`函数`plyr`可以很容易地按多列排序。例如，要先按 排序`DF`，`ID`然后按 递减`num`，您可以写

```
plyr::arrange(DF, ID, desc(num)) 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-02-11T17:42:02.547

使用`order`功能：

```
set.seed(1)
DF <- data.frame(ID= sample(letters[1:26], 15, TRUE),
                 num = sample(1:100, 15, TRUE),
                 random = rnorm(15),
                 stringsAsFactors=FALSE)
DF[order(DF[,'ID']), ]
   ID num      random
10  b  27  0.61982575
12  e   2 -0.15579551
5   f  78  0.59390132
11  f  39 -0.05612874
1   g  50 -0.04493361
2   j  72 -0.01619026
14  j  87 -0.47815006
3   o 100  0.94383621
9   q  13 -1.98935170
8   r  66  0.07456498
13  r  39 -1.47075238
15  u  35  0.41794156
4   x  39  0.82122120
6   x  94  0.91897737
7   y  22  0.78213630 
```

另一种解决方案是使用`orderBy`doBy 包中的函数：

```
> library(doBy)
> orderBy(~ID, DF) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-09-08T15:46:18.113

这确实属于@Ramnath 的答案，但我无法发表评论，因为我还没有足够的声誉。您也可以像使用包一样使用包中的`arrange`功能。`dplyr``plyr`

```
library(dplyr)
arrange(DF, ID, desc(num)) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-31T13:10:27.040

`order()`当列具有级别或因子时，该函数将失败。`stringsAsFactors=FALSE`在 data.frame 创建中使用时它可以正常工作。

# c# - C# 中的充气城堡 PBEWITHSHA256AND256BITAES 加密

> ID：14817626
> 
> 赞同：1
> 
> 时间：2013-02-11T17:36:54.593
> 
> 标签：c#, bouncycastle

我正在尝试在 C# 中复制此 Java 代码。

```
 BASE64Decoder dec = new BASE64Decoder();
    byte[] salt = null;
    try {
        salt = dec.decodeBuffer(saltStr);
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    Security.insertProviderAt(new BouncyCastleProvider(), 1);
    String alg = "PBEWITHSHA256AND256BITAES-CBC-BC";
    int derivedKeyLength = 256;
    int iterations = 20000;
    KeySpec spec = new PBEKeySpec(password.toCharArray(), salt, iterations,
            derivedKeyLength);
    try {
        SecretKeyFactory f = SecretKeyFactory.getInstance(alg);
        byte[] result = f.generateSecret(spec).getEncoded();
        BASE64Encoder endecoder = new BASE64Encoder();
        System.out.println(endecoder.encode(result));
    } catch (NoSuchAlgorithmException e) {
        e.printStackTrace();
    } catch (InvalidKeySpecException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

这是我到目前为止所拥有的，但它失败了。我是加密世界的新手（所以可能有一种我不知道的更简单的方法）所以任何帮助将不胜感激。谢谢！

```
 var iterations = 20000;
        PbeParametersGenerator pGen = new Pkcs12ParametersGenerator(new Sha256Digest());
        pGen.Init(Encoding.ASCII.GetBytes(password), Convert.FromBase64String(salt), iterations);
        ICipherParameters par = pGen.GenerateDerivedParameters("AES256", 256);
        IBufferedCipher c = CipherUtilities.GetCipher("PBEWITHSHA256AND256BITAES-CBC-BC");
        Console.WriteLine(c.AlgorithmName);
        c.Init(true, par);
        byte[] enc = c.DoFinal(Convert.FromBase64String(salt));
        Console.WriteLine("The output is :");
        Console.WriteLine(Convert.ToBase64String(enc)); 
```

问题在于，在 Java 和 C# 中，使用相同的密码、相同的盐和相同的迭代次数时，加密的结果是不一样的。

**更新：**

问题是Java代码（不是我写的，没有进行密码加密）它只生成密钥参数。此代码将提供与 Java 代码相同的输出。

```
 var iterations = 20000;
        var sltBytes = Convert.FromBase64String(salt);
        byte[] byteSalt = Convert.FromBase64String(salt);
        byte[] pwdb = PbeParametersGenerator.Pkcs12PasswordToBytes(password.ToCharArray());
        PbeParametersGenerator pGen = new Pkcs12ParametersGenerator(new Sha256Digest());
        pGen.Init(pwdb, Convert.FromBase64String(salt), iterations);
        var par = (ParametersWithIV)pGen.GenerateDerivedParameters("AES256", 256, 128);
        var kpar = (KeyParameter)par.Parameters;
        byte[] by = kpar.GetKey();
        Console.WriteLine(Convert.ToBase64String(by)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T18:23:13.027

您的调用指定了与Java 中`GenerateDerivedParameters("AES256", 256)`不同的密钥长度。`derivedKeyLength`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T18:28:02.227

我认为这是你的问题：

在这里，您指定派生密钥长度为 128

```
int derivedKeyLength = 128;
...
KeySpec spec = new PBEKeySpec(password.toCharArray(), salt, iterations,
        derivedKeyLength); 
```

在这里您指定 256 的派生密钥长度

```
ICipherParameters par = pGen.GenerateDerivedParameters("AES256", 256); 
```

# java - 游戏中的服务器浏览器如何工作？

> ID：14817628
> 
> 赞同：0
> 
> 时间：2013-02-11T17:37:00.550
> 
> 标签：java, networking, broadcast

我写过各种聊天、游戏等网络程序，但用户总是要输入服务器的ip，很不寻常。我想实现一个你可能在普通游戏中知道的服务器浏览器，它可以自动定位局域网中的服务器。我想用Java来做。

我的问题是：

这种浏览是如何工作的？还例如 WiFi，只是自动找到另一方的所有内容。

将状态包一直广播到整个局域网是否有可能也是一种好方法？哪些时间间隔有用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T18:08:21.720

对于 WiFi，设备会监听某个频率范围并扫描该范围内的信号。这与电视用于接收电台的过程大致相同，或者人们可能会寻找当地广播电台。

对于互联网游戏服务器，您无法扫描整个互联网。通常，这些服务提供一个主服务器，该服务器被配置为在已知端口上发送服务器列表。通常它还允许服务器更新他们的信息。

对于本地游戏服务器，通常每隔几秒左右就会有一个数据包。实际上，即使在具有各种服务请求此类数据的空闲网络上也有相当多的流量（Apple 的发现协议 Bonjour 很常见，Windows 网络发现协议也是如此）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T14:26:17.717

对于互联网游戏，有一组中央服务器托管设置游戏所需的信息。过去，这通常只是游戏主机的 IP 地址和端口，以及任何游戏信息，例如名称、地图等。

如今，由于防火墙/NAT 问题和作弊问题，大多数网络游戏实际上也通过这些服务器发送数据。这样做很昂贵。

对于本地网络上的游戏，UDP 数据包被发送到广播地址，该子网中的所有设备都会接收到这些地址。托管游戏发送包含连接位置信息的数据包，加入的人接收这些数据包以了解游戏服务器的位置。然后他们直接连接到游戏服务器。

如果您在 IP 网络上并且您的地址是 192.168.1.100，子网掩码是 255.255.255.0，那么您的广播 IP 地址是 192.168.1.255。另见： [http ://en.wikipedia.org/wiki/Broadcast_address#IP_networking](http://en.wikipedia.org/wiki/Broadcast_address#IP_networking)

# cuda - cudaMemcpy 替换现有值？

> ID：14817631
> 
> 赞同：-2
> 
> 时间：2013-02-11T17:37:09.093
> 
> 标签：cuda

我正在 cuda 4.2 中制作一个程序，我遇到了这个问题......

我需要对 2 个图像执行相同的代码。所以我把代码放在一个`for`循环中，我`cudaMalloc`在 for 循环之前调用了一次。循环中的代码使用`cudaMemcpy(..,..,..,cudaMemcpyHostToDevice)`相同的设备数组指针。所以我认为新值（来自第一张图像）将在第二个循环中替换旧值（来自第二张图像）。但是`cudaMemcpy(..,..,..,cudaMemcpyHostToDevice)`失败了...

我必须使用其他功能吗？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-25T16:54:59.110

我有一个可能类似的问题，原来我在循环结束时在内部调用 cudaFree() 但 cudaMalloc() 在循环之前只调用了一次。这意味着当我在第一次不再分配内存后尝试将值复制到 GPU 上时，我最终确保 CudaMalloc 和 CudaFree 都在循环之外并且工作正常。

# jquery - 单击链接时使列表向下滑动

> ID：14817632
> 
> 赞同：2
> 
> 时间：2013-02-11T17:37:09.827
> 
> 标签：jquery, slidedown

我想要实现的目标非常简单，但由于某种原因我无法让它工作！我想要做的是，当您单击指向特定流派的链接之一时，我希望显示相应的歌曲标题列表，最好向下滑动。任何帮助，将不胜感激。到目前为止，这是我的html：

```
<p><a class="rock" href="">ROCK</a> / <a class="blues" href="">BLUES</a></p>

                    <section class="container">
                    <div class="leftcolumn">
                        <ul class="rock">
                            <li>AUTOHAZE</li>
                            <li>BASSHOLES</li>
                            <li>BEAT ANGELS</li>
                            <li>BONFIRE MADIGAN </li>
                            <li>BOOM</li>       
                        </ul>

                        <ul class="blues">
                            <li>20 MILES    </li>
                            <li>AARON MOORE </li>
                            <li>ALBERT AMMONS   </li>
                            <li>ARON BURTON </li>
                            <li>ARTHUR CRUDUP   </li>
                        </ul>
                    </div>
                    </section> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T19:36:31.103

```
<p><a class="rock" href="#">ROCK</a> / <a class="blues" href="#">BLUES</a></p>

                    <section class="container">
                    <div class="leftcolumn">
                        <ul class="rock" >
                            <li>AUTOHAZE</li>
                            <li>BASSHOLES</li>
                            <li>BEAT ANGELS</li>
                            <li>BONFIRE MADIGAN </li>
                            <li>BOOM</li>       
                        </ul>

                        <ul class="blues">
                            <li>20 MILES    </li>
                            <li>AARON MOORE </li>
                            <li>ALBERT AMMONS   </li>
                            <li>ARON BURTON </li>
                            <li>ARTHUR CRUDUP   </li>
                        </ul>
                    </div>
                    </section> 
```

添加以下CSS：

```
ul {

    display:none;

} 
```

jQuery：

```
$(function () {
    $('a').bind('click',function () {
        var Class = $(this).attr('class');

        var ulName = 'ul.' + Class;
        var Display=$(ulName).css('display');
        var Dis = $(ulName).css('display');

        $(ulName).siblings().hide();
        if (Dis == "block" || Dis == "undefined") {
            $(ulName).slideUp();
        }
        else {
            $(ulName).slideDown().show(1);
        }

    })
}); 
```

**[演示在这里](http://jsfiddle.net/jubair/7fHWT/3/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T17:55:46.747

```
<p><a class="rock" href="#">ROCK</a> / <a class="blues" href="#">BLUES</a></p>

                    <section class="container">
                    <div class="leftcolumn">
                        <ul class="rock" >
                            <li>AUTOHAZE</li>
                            <li>BASSHOLES</li>
                            <li>BEAT ANGELS</li>
                            <li>BONFIRE MADIGAN </li>
                            <li>BOOM</li>       
                        </ul>

                        <ul class="blues">
                            <li>20 MILES    </li>
                            <li>AARON MOORE </li>
                            <li>ALBERT AMMONS   </li>
                            <li>ARON BURTON </li>
                            <li>ARTHUR CRUDUP   </li>
                        </ul>
                    </div>
                    </section> 
```

jQuery：

```
$(function () {
    $('a').click(function () {
        var Class = $(this).attr('class');

        var ulName = 'ul.' + Class;
        $(ulName).hide();
        $(ulName).slideDown();
    });
}); 
```

我已经测试过它并且工作得很好。**[演示在这里](http://jsfiddle.net/jubair/33AXr/1/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T17:44:58.557

HTML

```
<p><a class="toggleBtn" data-id="rock" href="#">ROCK</a> / <a class="toggleBtn"
    data-id="blues" href="#">BLUES</a>
</p>
<section class="container">
    <div class="leftcolumn">
        <ul id="rock" class="toggleContainer">
            <li>AUTOHAZE</li>
            <li>BASSHOLES</li>
            <li>BEAT ANGELS</li>
            <li>BONFIRE MADIGAN</li>
            <li>BOOM</li>
        </ul>
        <ul id="blues" class="toggleContainer">
            <li>20 MILES</li>
            <li>AARON MOORE</li>
            <li>ALBERT AMMONS</li>
            <li>ARON BURTON</li>
            <li>ARTHUR CRUDUP</li>
        </ul>
    </div>
</section> 
```

CSS

```
.toggleContainer {display:none;} 
```

查询

```
$(function () {
    $(".toggleBtn").click(function () {
        $(".toggleContainer").hide();
        $("#" + $(this).attr("data-id")).slideDown();
    });
}); 
```

[演示 - JSFiddle](http://jsfiddle.net/ACWsP/2/)

# c - 在c中默认输入带空格

> ID：14817634
> 
> 赞同：1
> 
> 时间：2013-02-11T17:37:12.580
> 
> 标签：c

在下面的程序中，当我从键盘读取输入时，它只占用 2 个字符而不是 4 个字符，其余 2 个字符默认占用空格。为什么？？？

*通过指针获取字符输入的程序*/

```
int c,inc,arrysize;
char *revstring;
printf("enter the size of char arry:");
scanf("%d",&arrysize);
revstring = (char *)malloc(arrysize * sizeof(*revstring));
printf("%d",sizeof(revstring));
printf("enter the array elements:");
for(inc=0;inc<arrysize;inc++)
{
scanf("%c",&revstring[inc]);

}
for(inc =0;inc<arrysize;inc++)
    printf("%c",revstring[inc]);
getch();
return 0; 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T17:40:56.247

`scanf`读取格式化的输入。当您录制一个号码时，您录制了数字，然后按`<Enter>`。所以有一个剩余`\n`的 in `stdin`，在 next 中被读取`scanf`。如果您`<Enter>`在字符之间按，这同样适用。

一种解决方案是在每次输入后使用标准输入流中的字符，如下所示：

```
#include <stdio.h>

void
clean_stdin (void)
{
  int c;

  while ((c = getchar ()) != '\n' && c != EOF)
    ;
} 
```

另一个想法是用来`fgets`获取人工输入。`scanf`不适合这样的读数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T19:08:11.130

大多数时候`scanf`读取格式化的输入。对于大多数`%`格式，scanf 将首先读取并丢弃任何空格，然后解析指定的项目。因此，`scanf("%d", ...`它将毫无问题地接受带有初始空格（甚至是额外的换行符！）的输入。

然而，例外之一是`%c`。使用`%c`， scanf 读取下一个字符，无论它可能是什么。如果下一个字符是空格或换行符，那就是你得到的。

根据您到底想要什么，您可以只在格式字符串中使用空格：

```
scanf(" %c",&revstring[inc]); 
```

空格会导致`scanf`跳过输入中的任何空格，从而为您提供下一个读取的非空格字符。但是，这将导致无法输入包含空格的字符串（空格将被忽略）。或者，您可以`scanf(" ");`在循环之前跳过空格一次，或者`scanf("%*[^\n]"); scanf("%*c");`跳过所有内容到下一个换行符，然后跳过换行符。

# javascript - 根据第一个单词对对象数组进行排序

> ID：14817635
> 
> 赞同：0
> 
> 时间：2013-02-11T17:37:14.123
> 
> 标签：javascript, arrays, sorting

我希望能够根据字符串中的第一个单词对 JavaScript 中的对象数组进行排序。目前我使用的排序函数使用字符串中的所有单词。

JSON数据：

```
"awds": [
    {"awd":"adobe edge award"},
    {"awd":"besty"},
    {"awd":"c award"},
    {"awd":"awwward award"},
    {"awd":"desk award"},
    {"awd":"adobe edge award"},
    {"awd":"creative edge award"},
    {"awd":"snoogle edge award"},
    {"awd":"scuba edge award"},
    {"awd":"xidoe edge award"}
] 
```

JavaScript：

```
var compareNames = function(a, b) {
    var nameA = a.awd.toLowerCase();
    var nameB = b.awd.toLowerCase();
    if (nameA > nameB) { return 1; }
    return 0;
}; 
```

电流输出：

```
adobe edge award
besty
c award
awwward award
desk award
adobe edge award
creative edge award
snoogle edge award
scuba edge award
xidoe edge award 
```

期望的输出：

```
adobe edge award
adobe edge award
awwward award
c award
creative edge award
scuba edge award
snoogle edge award
xidoe edge award 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:50:06.207

```
var o = [
    {"awd":"adobe edge award"},
    {"awd":"besty"},
    {"awd":"c award"},
    {"awd":"awwward award"},
    {"awd":"desk award"},
    {"awd":"adobe edge award"},
    {"awd":"creative edge award"},
    {"awd":"snoogle edge award"},
    {"awd":"scuba edge award"},
    {"awd":"xidoe edge award"}
];

o.sort(function(a, b) {
    var nameA = a.awd.toLowerCase();
    var nameB = b.awd.toLowerCase(); 
    if(nameA === nameB) return 0; 
    return nameA > nameB ? 1 : -1;
});

console.log(o); 
```

[演示](http://jsfiddle.net/pRND7/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T17:45:03.020

1.  排序回调应返回负数、0、正数，具体取决于参数 1 是小于、等于还是大于参数 2
2.  排序是在原件上完成的，因此您不必“分配”结果
3.  您可以使用正则表达式提取第一个单词（我不明白您为什么要这样排序）

```
awds.sort(function (a, b) {
    var aword = a.awd.toLowerCase().match(/[^ ]+/)[0];
    var bword = b.awd.toLowerCase().match(/[^ ]+/)[0];
    return aword == bword ? 0 : (aword < bword ? -1 : 1);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T17:39:21.250

您可以使用`Array.sort`比较功能。请参阅[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T17:41:51.760

如果您在第一项不大于第二项时返回 -1，则您的方法将起作用-

```
 var compareNames = function(a, b) {    
    var nameA = a.awd.toLowerCase();
    var nameB = b.awd.toLowerCase();
    if(nameA==nameB) return 0;
    return (nameA > nameB)? 1:-1; 
}; 
```

# java - Jboss @QueryParam 和字符串 []

> ID：14817638
> 
> 赞同：0
> 
> 时间：2013-02-11T17:37:25.917
> 
> 标签：java, web-services, jboss, annotations

嗨，我在点击 URL 时发现了一件奇怪的事情。我的同事让我点击 URL 作为

```
https://yyyy.com/echo?modelID={aaa1,bbb2} 
```

将服务的输入值作为数组传递。但是下面的逻辑

```
@QueryParam ("modelID") String[] modelID 
```

只接受格式为

```
URL: https://xxxx.com/echo?modelID=aaa1&modelID=bbb2 
```

需要帮助来理解这一点以及如何更改逻辑以接受输入

```
https://yyyy.com/echo?modelID={aaa1,bbb2} 
```

# java - java位操作>>>移位

> ID：14817639
> 
> 赞同：8
> 
> 时间：2013-02-11T17:37:32.273
> 
> 标签：java, int, bits, operation

为什么如果

```
int x = -1 // binary: 11111111111111111111111111111111
x = x >>> 31; 
```

我们有 000000000000000000000000000000001

但如果

```
int x = -1
x = x >>> 32; 
```

我们有 11111111111111111111111111111111（再次-1）

但不是 00000000000000000000000000000000 吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-11T17:39:02.023

从[JLS 的第 15.19 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.19)：

> 如果左侧操作数的提升类型是 int，则只有**右侧操作数的五个最低位用作移位距离**。就好像右手操作数`&`使用掩码值进行按位逻辑与运算符（第 15.22.1 节）`0x1f (0b11111)`。因此，实际使用的移位距离总是在范围内`0 to 31`，包括在内。

强调我的。所以：

```
x >>> n 
```

相当于：

```
x >>> n & 0x1f  // or x >>> n % 32 
```

所以，`x >>> 32`相当于`x >>> 32 & 0x1f`<==> `x >>> 0`== `x`。

所以*经验法则*`32`是，每当你将一个数字移动( *`int`*is )的倍数时`32 bits`，你会得到相同的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T17:39:20.997

应用移位操作时，仅考虑右手操作数的最低 5 位。由于 32 === 0 // mod 32，结果是没有移位。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-16T23:20:11.763

花了一整天的时间来思考为什么 long l = i << 32 表现得很奇怪，然后写了一些基本的测试，有 WTF 时刻，然后改成 long l = (long) i << 32 让它工作。

我对 Rohit 回答的唯一补充就是为什么会这样。来自 IA-32 英特尔架构软件开发人员手册 3：

> 8086 不屏蔽移位计数。但是，所有其他 IA-32 处理器（从 Intel 286 处理器开始）都会将移位计数屏蔽为 5 位，从而导致最大计数为 31。此屏蔽在所有操作模式（包括虚拟 8086 模式）中完成以减少指令的最大执行时间

# winforms - Visual Studio ClickOnce 部署在 Windows 7 上失败

> ID：14817644
> 
> 赞同：0
> 
> 时间：2013-02-11T17:37:46.683
> 
> 标签：winforms, deployment, clickonce

我有一个[Windows 窗体](http://en.wikipedia.org/wiki/Windows_Forms)应用程序，我正在使用 ClickOnce 部署，当我尝试在 Windows XP 中发布时，一切都正常发布。当我在 Windows 7 中尝试相同的发布功能时，它会挂在发布步骤上。

我正在使用服务器的[UNC](http://en.wikipedia.org/wiki/Path_%28computing%29#Uniform_Naming_Convention)路径（文件共享）（带有[IIS](http://en.wikipedia.org/wiki/Internet_Information_Services) 7的[Windows Server 2008](http://en.wikipedia.org/wiki/Windows_Server_2008) R2 ）。为什么会发生这种情况？

我从未收到错误消息，并且无法取消该过程。我必须强制关闭 Visual Studio 并重新启动我的 Windows 7 PC，因为 Visual Studio 锁定了一些文件。

**更新：**

我能够在我的域 PC 的目标服务器上的文件夹上设置完全控制权限，然后我能够发布*一次*. 然后，每个后续部署都挂起。但是，我确实注意到它在尝试复制 Office 互操作文件时总是挂起。为什么会这样？

**更新（2）：**

这肯定与 Office 2010 PIA 文件有关。为什么不发布它们？同样，这在 Windows XP 上完美运行，但是当我在 Windows 7 上执行部署时，PIA 没有发布。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T15:09:03.863

可能是[UAC](http://en.wikipedia.org/wiki/User_Account_Control)问题。进行发布时尝试以管理员身份运行 Visual Studio。

# c# - 在 GridView 中访问行

> ID：14817657
> 
> 赞同：0
> 
> 时间：2013-02-11T17:38:29.233
> 
> 标签：c#, asp.net, webforms

我有以下 ASPX 代码：

```
<ItemTemplate>
    <asp:HyperLink ID="BRANCH_NAME" runat="server" 
          NavigateUrl='<%# "mailto:"+Eval("OWNERS_EMAIL") %>' 
          Text='<%# Eval("BRANCH_NAME") %>' 
          ToolTip='<%# GetBranchAddress() %> '> 
    </asp:HyperLink>
</ItemTemplate> 
```

后面代码中的函数：

```
protected string GetBranchAddress(DataRow row)
{
    return "<span style=\"text-decoration:underline;\">"+ 
               row["BRANCH_NAME"].ToString().Trim() + "</span><br />" + 
               row["OWNERS_FIRST_NAME"].ToString().Trim() + " " +
               row["OWNERS_LAST_NAME"].ToString().Trim() + "<br />" + 
               row["OWNERS_EMAIL"].ToString().Trim() + "<br />" + 
               row["OWNERS_OFFICE_PHONE"].ToString().Trim() + "<br />" + 
               row["OWNERS_FAX_PHONE"].ToString().Trim();

} 
```

我得到的错误是：

> 方法“GetBranchAddress”没有重载采用“0”参数

如何访问`row`我的 ASP GridView 以便我可以将它传递给我的函数？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T17:53:07.640

与其尝试将整个传递`DataRow`到函数中，不如利用 datakeys 指定要显示的字段，并传入行索引。

```
<asp:GridView ID="GridView1" runat="server" DataKeyNames="BRANCH_NAME, StreetAddress" ...> 
```

中的代码`ItemTemplate`如下所示：

```
<ItemTemplate>
    <asp:HyperLink ID="BRANCH_NAME" runat="server" 
          NavigateUrl='<%# "mailto:"+Eval("OWNERS_EMAIL") %>' 
          Text='<%# Eval("BRANCH_NAME") %>' 
          ToolTip='<%# GetBranchAddress(Container.DisplayIndex) %> '> 
    </asp:HyperLink>
</ItemTemplate> 
```

在您的函数中，您可以像这样访问 datakey 值：

```
protected string GetBranchAddress(int rowIndex)
{
    return GridView1.DataKeys[rowIndex]["BRANCH_NAME"].ToString();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T17:44:31.160

在您的标记中，您没有将任何参数传递给 GetBranchAddress，这就是您收到错误的原因。您应该将“this”传递给方法，其中“this”是当前操作的对象（DataRow）。例如，

```
ToolTip='<%# GetBranchAddress(this) %> ' 
```

# nhibernate - NHibernate：在 SQL 视图中映射一对多关系

> ID：14817658
> 
> 赞同：0
> 
> 时间：2013-02-11T17:38:30.537
> 
> 标签：nhibernate, nhibernate-mapping

我正在使用 SQL 视图，但我对 NHibernate、视图或数据库的了解还不够，无法知道我的问题出在哪里。我正在使用的视图曾经有一个字符串列“ExemptionCode”。现在，视图可能有许多豁免代码。这是新关系的 XML 映射：

```
<class name="LatestDocumentVersion" table="LatestDocumentVersion" mutable="false" schema-action="none">
    <id name="DocumentVersionID" type="Int32"/>        
    <property name="ContainerDocumentID" type="Int32"/>
    <!--<property name="ExemptionCode" length="10" />-->
    <set name="ExemptionCodes" cascade="all-delete-orphan" lazy="false" inverse="false">
      <key column="ContainerDocumentID"/>
      <one-to-many class="ContainerDocumentExemptions"/>
    </set>
    <--Properties omitted-->
</class> 
```

这是 ContainerDocumentExemptions 类的映射：

```
<class name ="ContainerDocumentExemptions" lazy ="false">
  <id name ="ContainerDocumentExemptionID" type="Int32">
    <generator class="identity"/>
  </id>
  <many-to-one name="ContainerDocumentID" class="ContainerDocuments" column="ContainerDocumentID" cascade="none"/>
  <property name="ExemptionCode" length="10"/>
</class> 
```

ContainerDocumentExemption 类实际上与 ContainerDocument 对象具有双向的一对多关系。这是另一端：

```
<class name="ContainerDocuments" lazy="false" table="ContainerDocuments">
    <id name="ContainerDocumentID" type="Int32">
        <generator class="identity"/>
    </id>
    <!--<property name="ExemptionCode" length="10" />-->
    <set name="Exemptions" cascade="all-delete-orphan" lazy="false" inverse="true">
      <key column="ContainerDocumentID"/>
      <one-to-many class="ContainerDocumentExemptions"/>
    </set>
    <--Properties omitted-->
</class> 
```

将此行添加到 ContainerDocuments 类后，ContainerDocuments 可以正确地写入和读取新的 ContainerDocumentExemptions 表：

```
public class ContainerDocuments {
    public virtual ISet<ContainerDocumentExemptions> Exemptions { get; set; }
    //Properties omitted
} 
```

因此，我将此代码添加到 LatestDocumentVersion 类：

```
public class LatestDocumentVersion {
    public virtual int ContainerDocumentID { get; set; }
    public virtual ISet<ContainerDocumentExemption ExemptionCodes { get; set; }
    //properties omitted
} 
```

LatestDocumentVersion 是一个视图，它在一堆不同的表上执行内部联接和外部联接，并从每个表中获取一堆不同的列。（创建视图的 SQL 非常复杂，希望它与手头的问题无关。）新添加的 LatestDocumentVersion.ContainerDocumentID，它是 ContainerDocumentExemptions 表的外键，总是正确填充。但是，ExemptionCodes 集合始终为空。

我有一种感觉，部分问题是 ContainerDocumentExemptions 类中的 ContainerDocument 反向引用。这会阻止我在 LatestDocumentVersion 类中使用相同的映射吗？我认为使 LatestDocumentVersion-ContainerDocumentExemptions 关系单向可以缓解这个问题，如果它是一个问题。那么如何填充 LatestDocumentVersion.ExemptionCodes 字段？谁能至少给我一些关于如何调试问题的提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:30:21.110

`ContainerDocumentID`是类上的 id，`ContainerDocument`但它不在`LatestDocumentVersion`类上，默认情况下，每个一对多加入到 id 上。添加`property-ref`到`LatestDocumentVersion`映射

```
<class name="LatestDocumentVersion" table="LatestDocumentVersion" mutable="false" schema-action="none">
    <id name="DocumentVersionID" />
    <property name="ContainerDocumentID"/>
    <set name="ExemptionCodes" cascade="all-delete-orphan" lazy="false" inverse="false">
      <key column="ContainerDocumentID" property-ref="ContainerDocumentID"/>
      <one-to-many class="ContainerDocumentExemptions"/>
    </set>
</class> 
```

# java - OrientDB 有类似@MappedSuperclass 的东西吗？

> ID：14817659
> 
> 赞同：1
> 
> 时间：2013-02-11T17:38:30.357
> 
> 标签：java, orientdb

我想为&字段创建一个`AbstractEntity`类，因此我不必在每个实体类中声明这些字段和访问器。就像是：`id``version`

```
public abstract class AbstractEntity {
    @Id private Object id;
    @Version private Integer version;

    public Object getId() { return id; }
    (...)

public class User extends AbstractEntity {
    private String login;
    private String password;
    (...) 
```

在 JPA 中，我可以使用 注释`AbstractEntity`，`@MappedSuperclass`因此它不会`AbstractEntity`在 db 上生成表。如何在 OrientDB 对象数据库 API 中实现相同的行为？我不想`AbstractEntity`在我的数据库中有一个类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T22:31:32.170

今天没有注释，但您必须在模式中将类声明为“抽象”。例子：

```
OClass abstractEntity = db.getMetadata().getSchema().createClass("AbstractEntity");
abstractEntity.setAbstract( true ); 
```

# java - Netbeans 工作目录错误

> ID：14817660
> 
> 赞同：1
> 
> 时间：2013-02-11T17:38:33.100
> 
> 标签：java, netbeans, working-directory

我是 NetBeans 新手，需要一些帮助。

我正在尝试开始我的家庭作业，但是，我遇到了一些问题。**请注意，我不是在为作业本身寻求帮助，也不是在要求任何人为我做作业。我只是想用 NetBeans 解决一个意想不到的问题。**

作业： [http ://www.cs.stonybrook.edu/~cse219/hw/HW2.html](http://www.cs.stonybrook.edu/~cse219/hw/HW2.html)

话虽如此，在我完成作业的第 9 步之前，一切似乎都正常工作。当我尝试运行应用程序时，GUI 无法加载，而是被下面链接中显示的一堆错误所困扰：

错误： http: [//pastebin.com/udA5rpE2](http://pastebin.com/udA5rpE2)

****** *** ** *** ** *** ** *** ** *** ******编辑****** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *******

 **查看错误消息，Netbeans 似乎将我的工作目录与我教授的工作目录混淆了。所以似乎假设他的目录在我的目录中。我只用我的目录编辑了 run.xml 文件，它工作正常。但是，我认为硬编码这样的目录并不是一个好主意。有替代方案吗？

我已经尝试了下面链接中的解决方案，它确实有效。但是，采用这种方法时，不会加载 JButton 上的图像。相反，我被小而空的按钮困住了。

建议的解决方案：[http ://forums.netbeans.org/ntopic45961.html](http://forums.netbeans.org/ntopic45961.html)

为了总结发生了什么，我制作了一个 YouTube 视频来说明这个问题。

[http://www.youtube.com/watch?v=9XcLmk5x5TM&feature=youtu.be](http://www.youtube.com/watch?v=9XcLmk5x5TM&feature=youtu.be)**

# python - 在pygal中创建一个组合图表？

> ID：14817665
> 
> 赞同：8
> 
> 时间：2013-02-11T17:38:39.897
> 
> 标签：python, pygal

是否可以创建具有线系列和条形系列的单个图表？

```
chart = pygal.Line()
chart.x_labels = 'Red', 'Blue', 'Green'
chart.y_labels = .0001, .0003, .0004, .00045, .0005
chart.add('line', [.0002, .0005, .00035]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-28T19:37:12.750

回应您从 pygal 的 github 问题跟踪器的查询：**否**

[https://github.com/Kozea/pygal/issues/46](https://github.com/Kozea/pygal/issues/46)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-02T10:49:28.867

可以在[http://www.pygal.org/en/stable/documentation/web.html](http://www.pygal.org/en/stable/documentation/web.html)的文档中找到答案。

```
<!DOCTYPE html>
<html>
  <head>
    <!-- ... -->
  </head>
  <body>
    <figure>
       <embed type="image/svg+xml" src="/mysvg.svg" />
    </figure>
  </body>
</html> 
```

复制`<figure>`标签中的线条可以让您垂直组合图表，在屏幕左侧对齐。使用 CSS，并定义两个图形标签，您可以水平对齐两个图形。

# django - 已删除视图和 url 的 Django NoReverseMatch 错误

> ID：14817675
> 
> 赞同：0
> 
> 时间：2013-02-11T17:39:17.710
> 
> 标签：django, django-views

当我为本地项目运行服务器时，浏览器显示以下内容：

""" NoReverseMatch 在 /

未找到带有参数“()”和关键字参数“{}”的“posts.views.showusers”的反向操作。

请求方法：GET """

请注意，“帖子”是一个应用程序。我已经删除了posts/views.py 和posts/urls.py 中与showusers 相关的所有内容。为什么我一直看到这条消息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T18:32:03.053

签入您没有使用`url`模板标签的模板`showusers`。

# c++ - 如何使用 KDevelop 查看在何处引用空指针？

> ID：14817679
> 
> 赞同：0
> 
> 时间：2013-02-11T17:39:27.577
> 
> 标签：c++, kdevelop, kdevelop4

我正在使用 KDevelop 进行 C++ 开发和调试。看起来我在某处取消引用 NULL 指针，因为我得到：

```
*** Program received signal SIGSEGV (Segmentation fault) *** 
```

我怎样才能知道它发生在哪里？我希望 KDevelop 打破这些信号和未处理的异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T01:29:59.327

您必须在调试器中运行应用程序。如果您已经有正确的启动配置，请按 KDevelop 中的*调试按钮。*

在 KDevelop 中，这将打开*调试*区域视图并在 GDB 中运行应用程序。崩溃后，按底部栏上的*Frame Stack工具视图。*

你去吧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T23:08:15.823

与 Python 等解释性语言以及不允许显式内存管理和使用自动垃圾收集的语言（如 Java 和 C#）不同，您所要求的对于使用任何编辑器的 C++ 来说基本上是不可能的。这样做的原因是当一个指针被创建时，它只是一个指向内存地址的指针。在实际尝试通过指针访问内存之前，不可能检查指向地址处的内存是否已正确分配并且是否可访问。一般来说，错误主要分为三类：

1）*语法*（这些也是下面第二个的子类）

2)*编译时间*

3）*运行时间*。

在第一种情况下，大多数现代 IDE 甚至在您尝试编译之前就能够捕捉到错误。这些是由不正确的语法引起的错误。

在第二种情况下，可以在编译时捕获这些错误（这些错误通常也是由不正确的语法引起的，但不仅如此；例如，访问超出范围的静态数组会产生此错误）。

在第三种情况下，这些是只能在程序运行时捕获的错误。您要问的是 C++ 中的这种类型。

因此，最好的办法是在调试模式下运行程序。KDevelop 附带的调试器是一个非常强大的调试器。您将能够明确跟踪内存分配/删除。有关更多信息，请参见此处：[http ://userbase.kde.org/KDevelop4/Manual/Debugging_programs](http://userbase.kde.org/KDevelop4/Manual/Debugging_programs)

# f# - F# 中的值限制

> ID：14817681
> 
> 赞同：1
> 
> 时间：2013-02-11T17:39:43.920
> 
> 标签：f#, value-restriction

我有一个 F# 任务，我正在尝试计算矩阵的转置。很简单，但我不断收到价值限制错误，我不知道为什么。我咨询了许多存在的 VR 错误问题，但我仍然一无所知。这是我的代码：

```
let transpose = function
    | [xs ; ys] -> 
                let rec transpose_helper = function
                    | [],[] -> []
                    | x::xs , y::ys -> [x;y] :: transpose_helper (xs,ys)
                    | _ -> failwith "The matrix is not a square matrix"
                transpose_helper(xs,ys)
    | _ -> failwith "Incorrectly formatted input"

transpose ([[1;2;3];[2;3;4]]);; 
```

我认为该错误部分是由于列表为空，但我所做的似乎无济于事。任何指针将不胜感激。

编辑：以下版本的代码有效。谁能解释*为什么*？

```
let transpose zs =
    match zs with 
    | [xs;ys] -> 
                let rec transpose_helper (xs, ys) = 
                    match (xs,ys) with
                    | ([],[]) -> []
                    | (x::xs , y::ys) -> [x;y] :: transpose_helper (xs,ys)
                    | _ -> failwith "The matrix is not a square matrix"
                transpose_helper(xs,ys)
    | _ -> failwith "Incorrectly formatted input"

transpose ([[1;2;3];[2;3;4]]);;

val transpose : zs:'a list list -> 'a list list
val it : int list list = [[1; 2]; [2; 3]; [3; 4]] 
```

但是，编译器仍然抱怨上面的转置调用应该有一个单元类型，除非我使用 let 绑定它。谁能澄清这里发生了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T17:44:30.983

我的猜测是您最初编写了此`let rec transpose zs = match zs with ...`内容，后来将其更改为使用`function`，这消除了对显式参数的需要。由于`zs`仍然存在，您的函数接受两个参数，这意味着您只是部分应用它。由于`zs`未使用其类型未知，因此您的部分应用函数返回通用函数*值*（值限制）。删除`zs`，一切都很好。

# matlab - 如何使用 matlab eval 函数设置变量？

> ID：14817692
> 
> 赞同：2
> 
> 时间：2013-02-11T17:40:25.380
> 
> 标签：matlab, variables, set, eval

我想使用 matlab eval/feval 函数设置一个变量。可以将整个语句写为字符串并使用 = 符号，但我想将该值作为单独的参数（而不是字符串）传递。

matlab 中的算术运算符具有函数等价物，因此这些函数名的字符串可以在 eval 和 feval 函数中使用。= 运算符是否有等效的功能？

我正在寻找的机制是：

```
eval('set','x',5) 
```

我希望它将变量 x 的值设置为 5。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T08:13:56.573

好像您正在寻找类似的东西[`assignin`](http://www.mathworks.com/help/matlab/ref/assignin.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T17:46:59.627

既然您说“可以将整个语句写为字符串”，但是您希望将部分字符串作为变量传递，那么以下工作是否可行：

```
evalString = sprintf("most of the string with %s a placeholder", extraArg);
variableToSet = eval(evalString); 
```

通过这种方式，您可以从“变量组件”创建一个字符串。当然，如果`extraArg`不是字符串，您可以使用适当的格式将其转换为任何字符串。

# php - 如何在 ORM 中制作过滤器？

> ID：14817695
> 
> 赞同：0
> 
> 时间：2013-02-11T17:40:31.780
> 
> 标签：php, kohana, kohana-orm

例如我的`Model`has 方法`get_objects`，我通过以下来源搜索它们：

```
class Model_Object extends ORM {

public function get_objects($filters = array())
{

        if (!empty($filters['Role']))
            $role = $filters['Role'];
          else
        $role = NULL;

        $objects = ORM::factory('object')
                         ->where('RoleId','=',$role)
                         ->find_all();

       return $objects;
} 
```

因此，该代码仅在过滤器存在时才起作用，当过滤器中没有值时，我将没有任何记录而不是全部（我想要所有记录），如何使它更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T00:12:19.533

It sounds like you want to make the ORM where call dependent on the relevant filter key being present. The following code should do what you're looking for, it works for me, does it do what you want?

It would be neater if it didn't allow for the key-name/field-name distinction (`Role` vs. `RoleId`).

`application/classes/Model/Object`:

```
class Model_Object extends ORM {

    // Map from filter key names to model field names
    protected static $_filter_map = array(
        'Role' => 'RoleId',
        // ...
    );

    public static function get_objects($filters = array())
    {

        $objects = ORM::factory('object');

        foreach($filters as $key => $value)
        {
            if ($field = Arr::get(self::$_filter_map, $key))
            {
                $operator = (is_array($value)) ? 'IN' : '=';
                $objects->where($field, $operator, $value);
            } else {
                throw new Kohana_Exception(
                    'Unknown filter key :key',
                    array(':key' => $key)
                );
            }
        }

        return $objects->find_all();
    }
} 
```

Some examples, first all objects:

```
Model_Object::get_objects( array() ); 
```

All objects with RoleId equal to 2:

```
Model_Object::get_objects( array('Role' => 2) ); 
```

All objects with role_id in (2,3,5) AND user_id = 1:

```
Model_Object::get_objects( array(
    'Role' => array(2,3,5),
    'User' => 1
) ); 
```

Note that this last one requires you to have:

```
protected static $_filter_map = array(
    'Role' => 'role_id',
    'User' => 'user_id', // where `user_id` is a db field name
    // ...
); 
```

OR to change/simplify the `get_objects` function to

```
$objects = ORM::factory('object');

foreach($filters as $key => $value)
{
    $field = Arr::get(self::$_filter_map, $key, $key);
    $operator = is_array($value) ? 'IN' : '=';
    $objects->where($field, $operator, $value);
}

return $objects->find_all(); 
```

# machine-learning - ANN 训练集缩放

> ID：14817696
> 
> 赞同：1
> 
> 时间：2013-02-11T17:40:43.290
> 
> 标签：machine-learning, neural-network, backpropagation

我目前正在使用反向传播研究人工神经网络，用于分类任务。然而，我对规范化我正在使用的数据集有点困惑（我没有强大的统计/概率背景）。

数据示例如下所示：

```
5.1, 3.5, 1.4, 0.2, 1
5.2, 2.7, 3.9, 1.4, 2
5.9, 3.0, 5.1, 1.8, 3 
```

每个标记的最后一个标记是类。

现在，由于我使用的是 Sigmoid 传递函数，我的网络显然无法输出大于 1 的值，因此需要对数据进行归一化/缩放。

我的第一个问题；我需要同时扩展功能和类，还是只扩展类？

我的第二个问题，是否有任何“事实上的”或常用的方法来进行这种缩放？

问候， 杰克亨特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T18:21:53.637

通常建议同时扩展功能。缩放应该像 scaled_feature = (feature - min(featurearray))/(max(featurearray) - min(featurearray)) 一样简单。

所以对于第一个属性列，新数据将是：(5.1-5.1)/(5.9-5.1); (5.2-5.1)/(5.9-5.1)；(5.9-5.1)/(5.9-5.1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T19:24:01.900

实际上，缩放主题是采用机器学习算法，尤其是人工神经网络的最重要方面之一。

是的，(feature-min / max - min) 方法是一种可能性。

但是，还有一系列其他方法。例如，您可以使用 z 分数（根据与平均值的标准差）。或者，还有一种称为 z 轴归一化的技术，其中将一个额外的分量添加到归一化向量中。有时，绝对不需要缩放。

# c# - 向 C# 中的类添加否定运算符（？）

> ID：14817699
> 
> 赞同：10
> 
> 时间：2013-02-11T17:40:59.367
> 
> 标签：c#, operators

我可能在这里没有使用正确的词，这可能是我自己找不到答案的原因。我的班级中有一个 + & - 运算符，但我想添加一个否定运算符......我基本上能够做到这一点：

`myMethod(myClass, -myClass);`

如果您需要代码示例来帮助我，请告诉我，但我认为这应该是非常困难的......或者它无法完成。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-11T17:43:21.173

当然，一元运算`-`符[是可重载](http://msdn.microsoft.com/en-us/library/8edha89s%28v=vs.80%29.aspx)的：

```
public static MyClass operator -(MyClass myClass)
{
    ...
} 
```

注意不要滥用这些特性，因为消费者可能不知道这些运算符的语义——与方法不同（可以很好地命名），通常不是很明显类型上的自定义运算符的作用。希望您的类代表某种或类似的向量？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-11T17:46:51.793

```
public static YourClass operator -(YourClass value)
{
} 
```

# javascript - 如何在 JavaScript 中获取正确的引荐来源网址？

> ID：14817702
> 
> 赞同：0
> 
> 时间：2013-02-11T17:41:27.293
> 
> 标签：javascript

如果你去[http://jsfiddle.net](http://jsfiddle.net)然后来到 stackoverflow 然后打开控制台并输入：

```
console.log( document.referrer ); 
```

你得到

```
http://fiddle.jshell.net/_display/ 
```

代替

```
http://jsfiddle.net/ 
```

我怎样才能得到`http://jsfiddle.net/`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T17:43:42.857

你得到它是因为 jsfiddle 使用框架。改为使用`window.frames.top.document.referrer`。

# xcode - 有条件地中止发布版本

> ID：14817703
> 
> 赞同：2
> 
> 时间：2013-02-11T17:41:28.027
> 
> 标签：xcode, compilation

我希望 Xcode 在检测到`// FIXME:*`我放置在代码中的任意注释标签（*eg.）时中止发布版本。有没有人这样做或类似的事情？我想避免以不完整的状态发布应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T17:49:44.983

您可以使用以下命令，而不是使用注释：

```
#warning FIXME: this needs to be finished 
```

你可以在后面放任何你想要的东西`#warning`。当你编译时，编译器会吐出一个编译器警告，不管你放在什么后面`#warning`。如果您设置项目以便将警告视为错误（我只接受 100% 干净的构建），这将非常有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T18:39:07.440

使用以下内容：

```
#error Error message here. 
```

# makefile - 在另一个目录中调用 make

> ID：14817706
> 
> 赞同：0
> 
> 时间：2013-02-11T17:41:37.703
> 
> 标签：makefile

以下是我目前对我的问题的“解决方案”。我认为当在另一个目录中找不到依赖项的规则时，make 应该自动执行此操作，但我不知道为什么我会这么想。你知道更好的方法吗？

还有另一个目录`../a/`有一个 Makefile 要创建`../a/generated.h`。

```
.PHONY: FORCE

FORCE:

my.c: ../a/generated.h
    cp --preserve=timestamps $< $@

../a/generated.h: FORCE
    $(MAKE) -C $(dir $@) $(notdir $@) 
```

我确实有一个通用表格，可以用来避免为每个“外部”文件重复第二条规则，但正如我所说，我认为这都是不必要的。

```
define REMOTE
$(1): FORCE
    $$(MAKE) -C $$(dir $$@) $$(notdir $$@)
endef

$(eval $(call REMOTE,../a/generated.h))
$(eval $(call REMOTE,../a/anotherGeneratedFile.h)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T21:06:48.510

众所周知，make 的递归调用会破坏目标依赖项的直接无环图 (DAG)，这可能是您出现意外行为的原因。

[正如“Recursive Make Considered Harmful”](http://miller.emu.id.au/pmiller/books/rmch/)中所建议的，解决您的问题的一种可能方法是为您的项目使用一个 Makefile 。否则，您可能会“提高”构建系统的抽象级别，并转向类似`cmake`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T22:17:04.707

> 我认为当在另一个目录中找不到依赖项的规则时，make 应该自动执行此操作，但我不知道为什么我会这么想。

GNU Make 没有这样的内置规则。[查看隐式规则目录中的](http://www.gnu.org/software/make/manual/make.html#Catalogue-of-Rules)所有内置规则。

Your solution should work in a half-way. It doesn't have the dependencies of `../a/generated.h` (because you are using recursive make and those dependencies are only known to the makefile in that directory), so it won't rebuild it automatically. But it will build `../a/generated.h` if it does not exist.

# c++ - 重载 + 和 - 运算符，无法确定如何检查传入的“金额”是否为负

> ID：14817710
> 
> 赞同：1
> 
> 时间：2013-02-11T17:41:51.437
> 
> 标签：c++, linked-list, singly-linked-list

我已经重载了这些运算符来帮助我遍历一个双向链表，但是遇到了一个小错误，而且对于 c++ 来说还是新手，我被卡住了。我从来没有考虑过输入的“金额”是负数。所以我认为我需要在每个运算符中检查一个负数，因为它会极大地改变我遍历列表的方式，例如，如果我指向节点 5 并且我 +(-3) 我希望它移动向后三个节点，与 - 相同，5 - (-3) 将向前三个节点。逻辑似乎很简单，但语法令人困惑。以下是重载的运算符：

```
template <typename T>
typename doublyLinkedList<T>::iterator doublyLinkedList<T>::iterator::operator+(const int amount) const {
    doublyLinkedList<T>::iterator tempClone(*this);
    tempClone.pastBoundary=false;
    T i;

    for(i=0; i < amount; i++)
    {   
       if(tempClone.current->forward == NULL)
       {
          tempClone.pastBoundary =true;
       }else
       {
          ++tempClone;
       }
    }

    if(tempClone.pastBoundary == true)
    {
       return *this;
    }else
    {
        return tempClone;   
    }
}
template <typename T>
typename doublyLinkedList<T>::iterator doublyLinkedList<T>::iterator::operator-(const int amount) const {
    doublyLinkedList<T>::iterator tempClone(*this);
    tempClone.pastBoundary=false;
    T i;

    for(i=0; i < amount; i++)

       {    
        if(tempClone.current->backward == NULL)
       {
          tempClone.pastBoundary =true;
       }else
       {
          --tempClone;
       }
    }

    if(tempClone.pastBoundary == true)
    {
       return *this;
    }else
    {
        return tempClone;   
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:53:48.557

`if(amount = (-amount))`- 除非金额为 0，否则始终为真。

它需要在 for 循环之前进行。事实上，我可能会这样做：

```
if (amount < 0) return this->operator-(-amount); 
```

另一个操作员反之亦然。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T17:52:06.970

在 operator+ 的开头，添加：

```
if (amount <0) {
  operator-(-amount);
  return;
} 
```

同样在运算符中添加：

```
if (amount <0) {
  operator+(-amount);
  return;
} 
```

编辑：顺便说一句，要非常小心拼写错误，例如：

```
if(amount = (-amount)) 
```

它将 -amount 分配给数量，然后测试数量是否等于零！

# javascript - 检查选择框是否为空

> ID：14817714
> 
> 赞同：2
> 
> 时间：2013-02-11T17:41:59.940
> 
> 标签：javascript

如何使用纯 JavaScript 检查选择框是否为空并提醒用户“选择框包含 0 个项目”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T17:46:14.307

```
if (document.getElementById('select').options.length == 0) 
    alert('The selectbox contains 0 items'); 
```

[http://jsfiddle.net/Gf8QK/](http://jsfiddle.net/Gf8QK/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T17:46:11.977

采用：

```
if (selectObject.options.length == 0) {
    alert('The selectbox contains 0 items');
} 
```

见[http://www.w3schools.com/jsref/coll_select_options.asp](http://www.w3schools.com/jsref/coll_select_options.asp)

# algorithm - 双指数问题？

> ID：14817718
> 
> 赞同：6
> 
> 时间：2013-02-11T17:42:11.270
> 
> 标签：algorithm, np-complete, np

计算机科学中是否有任何重大问题只能在[双指数](https://en.wikipedia.org/wiki/Double_exponential_function)时间内解决？如果它们存在，那么它们属于哪一类问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-11T17:45:21.980

来自[维基百科](http://en.wikipedia.org/wiki/Double_exponential_function#Algorithmic_complexity)：

在计算复杂性理论中，一些算法需要双指数时间：

*   Presburger 算术的每个决策过程可证明至少需要双指数时间

*   计算场上的 Gröbner 基。在最坏的情况下，Gröbner 基可能有许多元素，这些元素的变量数量是双指数的。

*   找到一组完整的关联交换统一符

*   满足 CTL+（实际上是 2-EXPTIME-complete）

*   实封闭场上的量词消除需要双指数时间（请参阅圆柱代数分解）。

*   计算正则表达式的补码

# java - Java操作数不同的一致性

> ID：14817720
> 
> 赞同：1
> 
> 时间：2013-02-11T17:42:14.047
> 
> 标签：java, decimalformat

你知道关于不同表示之间可行的算术运算是否有任何规则声明可以遵循？例如：7

```
int a = 0342342;
int b = 0x1abcdef; 
int c = a +b;
System.out.println("It prints out : "+c); 
```

它打印出：28152529。

结果 (c) 是 2 个操作数 a 和 b 相加的十进制表示。

如果我希望结果采用不同于十进制格式的特定表示格式怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T17:48:06.580

数字`0342342`和`0x1abcdef`是 Java 为方便开发人员而支持的整数的文字表示形式。在 Java 中，该整数实际上只有一种表示形式，并且它存储在`int`类型中，不引用数字基数（如八进制或十六进制）。

默认情况下，当您打印 时`int`，它以十进制格式显示。

如果你想要其他格式，你应该使用[`System.out.printf`](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/PrintStream.html#printf%28java.lang.String,%20java.lang.Object...%29)：

```
System.out.printf("Decimal: %d",c);
System.out.printf("Octal: %o",c);
System.out.printf("Hexadecimal: %x",c); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T17:46:18.433

以十六进制打印这样做

```
System.out.printf("It prints out %x\n", c); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T17:46:09.577

您可以使用`System.out.format`以不同的格式表示。

您可以在这里找到更详细的答案：http: [//docs.oracle.com/javase/tutorial/essential/io/formatting.html](http://docs.oracle.com/javase/tutorial/essential/io/formatting.html)

# php - 在 php mysql 中建立登录注销会话时出现服务器错误

> ID：14817722
> 
> 赞同：0
> 
> 时间：2013-02-11T17:42:24.387
> 
> 标签：php, mysql

我从一个网站获得了帮助，并使用了他们的大部分代码。我理解了代码，但无法找出错误。

//main_login.php

```
<html>
<title>User Login Form</title>
<head></head>
<body>
<form name="form1" method="post" action="newcheckLogin.php">
<td>
<table width="100%" border="0" cellpadding="3" cellspacing="1" bgcolor="#FFFFFF">
<tr>
<td width="80">Username</td>
<td width="6">:</td>
<td width="300"><input name="myusername" type="text" id="myusername"></td>
</tr>
<tr>
<td>Password</td>
<td width="6">:</td>
<td><input name="mypassword" type="password" id="mypassword"></td>
</tr>
<tr>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td><input type="submit" name="Submit" value="Login"></td>
</tr>
</table>
</td>
</form> 
```

//newchecklogin.php- 这用于检查用户和查询数据库。

```
 <?php
    include("config.php");
    session_start();
    #echo "Check Login\n";
    ?>
    <html>
    <head><title></title>
    <form name="form2" method="post" action="Logout.php">
    <p align="right">
    <input type="submit" name="Logout" id=Logout" >
    </p>
    </form>
    </head>
    </html>
    <?php
    $myusername=stripslashes(mysql_real_escape_string($_POST['myusername']));
    $mypassword=md5(stripslashes(mysql_real_escape_string($_POST['mypassword'])));
    $sql="select jobid from jobs where userID='$myusername'";
    echo "Hey ".$myusername." ";
    $result=mysql_query($sql) or die(mysql_error());
    $row=mysql_fetch_array($result);
    $active=$row['active'];
    if(mysql_num_rows($result)==1){
            echo "Username and password found";
            session_register("myusername");            
            $_SESSION['login_user']=$myusername;           
            header("location:welcome.php");
    }
    else{
            $error="Your login Name or Password is invalid";
    }
    ?> 
```

//欢迎.php

```
<?php
include('lock.php');
include('newchecklogin.php');
?>
<body>
<h1>Hello <?php echo $login_session; ?></h1>
<?php
echo "<br>You have ".$mysql_num_rows($result)." jobs<br>";
echo "<table border=1 cellpadding=4><th>Job id</th><br>";
while ( $r = mysql_fetch_assoc($result) ) {
        echo "<tr><td>";
        echo $r['jobid']."</td></tr>";
}
echo "</table>";
?>
</body> 
```

//lock.php

```
<?php
include('config.php');
session_start();
$user_check=$_Session['login_user'];
$ses_sql=mysql_query("select userID from jobs where userID='$user_check'");
$row=mysql_fetch_array($ses_sql);
$login_session=$row['userID'];
if(!isset($login_session)){
        header("Location:login.php");
}
?> 
```

请帮忙，如果有人能再次向我解释如何设置会话，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T18:01:26.203

我认为问题在于，您已命名`lock.php`文件，并且`login.php`在尝试登录后尝试重定向。

# arrays - Powershell替换数组错误中的值

> ID：14817725
> 
> 赞同：1
> 
> 时间：2013-02-11T17:42:31.877
> 
> 标签：arrays, powershell

我一直在尝试替换数组中的值，目前我正在尝试清理一些值。我正在尝试通过使用数组来删除表格标签，或者也许有更好的方法来执行正则表达式？任何帮助，将不胜感激！谢谢。

```
$array = [regex]::matches($lines, "<td>(.*?)</td>")

    for($x = 0; $x -le $max; $x++){
        $array[$x] = $array[$x].value -replace "<td>", ""
    } 
```

不幸的是，我不断收到以下错误：

```
 [ : Unable to index into an object of type System.Text.RegularExpressions.MatchCollection. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T18:26:06.323

```
$array = $lines -replace '<td>(.*?)</td>','$1' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T17:50:54.070

```
$array = $lines | ? {$_ -match "<td>(.*?)</td>"} | % {$_.Replace("<td>", "").Replace("</td>", "") } 
```

如果您只想替换，而不是，只需省略第二个替换。

更好的是，如果您想同时替换两者：

```
$array = $lines | ? {$_ -match "<td>(.*?)</td>"} | % {$_ -replace "</?td>", ""} 
```

在回答您的评论时，这可能会更好：

```
$array = [regex]::matches($lines, "<td>(.*?)</td>") | Select -exp Value | % {$_ -replace "<td>(.*?)</td>", '$1'} 
```

我怀疑有更好的方法可以做到这一点，因为两次应用正则表达式似乎效率低下，但我认为它应该可以工作。

好吧，我想我明白了。试试这个：

```
$array = [regex]::matches($lines, "<td>(.*?)</td>") | % {$_.Result('$1')} 
```

# c++ - 访问 flex 扫描器的内部缓冲区、长度和令牌匹配位置

> ID：14817727
> 
> 赞同：1
> 
> 时间：2013-02-11T17:42:41.453
> 
> 标签：c++, flex-lexer

我正在编写一个带有 flex 的扫描仪来标记文本。为此，我定义了可以匹配术语、数字、电子邮件等的表达式，实际上是文本中可能出现的所有类型。

我试图找到一种方法来访问包含要解析的字符串、位置（匹配标记的第一个字符）和长度（将是`yyleng`）的内部扫描仪缓冲区。首先，我认为我可以用一些变量来处理它并使用 yyleng，将此值添加到一个变量中，以保持匹配的解析文本中的起始位置。但是，如果两个匹配项之间是一个很大的空格，那么这将不起作用，因为除了一些其他事件（如 html 标记或 html 实体等）之外，还会被忽略。

有什么办法可以解决吗？

例如，以下字符串：

```
I am a text,  tokenize   me.
^ ^  ^ ^   ^  ^          ^ ^
0 2  5 7   11 14         25 27   <-- pos in parsed string
0  2 1 4   1  8          2  1    <-- length of token 
```

每个单词，包括标点符号都将被匹配，所有空格都将被忽略。现在我希望能够获得字符串中每个匹配项的起始位置和长度。在我的标记器类中，我将实现一个*getNextToken*方法，并且每次调用该方法都会返回一个我喜欢的标记，以获取开始位置、标记长度和当前输入文本（作为字符缓冲区）。我想我可以定义一些函数来在词法分析器文件中获取这些值（作为一种 od 回调函数等）。

有什么办法可以使这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T18:00:41.307

`yytext`指向令牌的开头。如果您使用`yy_scan_buffer`（请参阅[flex 手册](http://westes.github.io/flex/manual/Multiple-Input-Buffers.html)），那么您 flex 将使用您提供的缓冲区而不复制它，因此`yytext`将指向您的缓冲区。

请注意，如果您使用接口，则必须在提供 flex 的缓冲区末尾放置*两个NUL 字节。*`yy_scan_buffer`此外，您必须自己处理令牌跨越两个输入缓冲区的情况。在您直接提供缓冲区的情况下，我不确定 flex 究竟如何处理跨越输入缓冲区的令牌，但是没有明显的方法可以在保留您提供的输入缓冲区的同时处理它。

# angularjs - 需要 AngularJS 输入表单中的选择用法示例

> ID：14817728
> 
> 赞同：24
> 
> 时间：2013-02-11T17:42:50.987
> 
> 标签：angularjs

我正在尝试使用一组对象

```
 (array = [{name: 'Moe', id:1}, {name: 'Larry', id:2}, {name: 'Curly', id:3}]) 
```

作为 AngularJS 输入表单中的下拉选择，我非常需要一个示例。谁能指点我一个可以启发我的jsFiddle？

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2013-02-11T18:51:14.633

我建议尽可能使用 ng-options。

```
<select ng-model="choice" ng-options="x.id as x.name for x in array"></select> 
```

因为检查一下：您可以使用它来选择*实际对象*：

```
app.controller('ExampleCtrl', function($scope) {
    $scope.items = [
        { id: 1, name: 'Foo' },
        { id: 2, name: 'Bar' }
    ];

    $scope.selectedItem = null;
}); 
```

```
<div ng-controller="ExampleCtrl">
    <select ng-model="selectedItem" 
            ng-options="item as item.name for item in items"></select>

    {{selectedItem | json}}
</div> 
```

在上面的示例中，当您从下拉列表中选择某些内容时，它实际上是在 selectedItem 上设置整个对象引用，而不仅仅是一个值类型。

注意：使用 ng-options 将您的`value=""`属性设置为集合中项目的索引，*这是设计使然*。

这确实是最好的方法。

**编辑：根据要求提供更多上下文。这里还有[一个 plunker 显示它正在使用中](http://plnkr.co/edit/6FAes1zgYYOSRCG4Jata)**

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-02-11T17:58:52.747

```
<select ng-model="choice">
    <option ng-repeat="obj in array" value="{{obj.id}}">{{obj.name}}</option>
</select> 
```

或使用'ng-options' - [http://docs.angularjs.org/api/ng.directive:select](http://docs.angularjs.org/api/ng.directive:select)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-29T11:07:40.960

```
<dropdown-multiselect pre-selected="member.roles" model="selected_items" options="roles"></dropdown-multiselect>

<pre>selected roles = {{selected_items | json}}</pre> 
```

# objective-c - 使 UIScrollView 成为第一响应者

> ID：14817735
> 
> 赞同：0
> 
> 时间：2013-02-11T17:43:13.810
> 
> 标签：objective-c, cocoa-touch, first-responder

我创建了一个准系统 iOS 应用程序，它向窗口添加了一个 UIScrollView（没有 ViewControllers 或 UIViews——我只是这样做是为了看看我是否能理解发生了什么。）

我想要的只是在摇晃设备时通知 UIScrollView。

我将 UIScrollView 子类化以实现 canBecomeFirstResponder 方法：

```
#import "SampleScrollView.h"

@implementation SampleScrollView

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
    }
    return self;
}

- (BOOL)canBecomeFirstResponder
{
    return YES;
} 
```

在我的 AppDelegate 中，我创建了一个 SampleScrollView 对象，添加到窗口中，然后尝试将其设置为第一响应者：

```
#import "SampleScrollView.h"

@implementation ResponderTestAppDelegate

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    // Override point for customization after application launch.

    CGRect thisFrame = [[self window] bounds];
    SampleScrollView *myScrollView = [[SampleScrollView alloc] initWithFrame:thisFrame];

    // Set scrollview to be the first responder
    BOOL success = [myScrollView becomeFirstResponder];
    if (success)
    {
        NSLog(@"myScrollView is first responder");
    }
    else
    {
        NSLog(@"Not first responder.");
    } 
```

这是一个高度简化的示例，但由于某种原因，我无法让应用程序将 SampleScrollView 对象报告为第一响应者。我确定我错过了一些非常简单的东西，对吧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T17:55:44.507

在您的示例中，您没有将滚动视图添加到任何超级视图。尝试`[self.window addSubview: myScrollView];`在调用之前添加此行`becomeFirstResponder`。

上的文件[`becomeFirstResponder`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIResponder_Class/Reference/Reference.html#//apple_ref/occ/instm/UIResponder/becomeFirstResponder)指出

> 您可以调用此方法以使响应者对象（例如视图）成为第一响应者。但是，**如果它是视图层次结构的一部分，您应该只在该视图上调用它**。如果视图的 window 属性包含一个 UIWindow 对象，则它已安装在视图层次结构中；如果它返回 nil，则视图与任何层次结构分离。

# salesforce - 将 Salesforce 文件自动上传到 Box.com 记录链接文件夹

> ID：14817736
> 
> 赞同：1
> 
> 时间：2013-02-11T17:43:21.420
> 
> 标签：salesforce, apex-code, box-api, force.com

我安装了一个 Box for Salesforce 集成应用程序，当用户手动将文件添加到 SFDC 记录时，它工作得很好。我有一个 Apex 类，它创建需要链接到 SFDC 记录的 PDF 文件。我可以通过 box-api 将记录上传到链接到记录的现有文件夹。但我无法找到一种自动创建链接到 SFDC 记录的文件夹的方法。

有没有人找到解决这种情况的方法？

谢谢，何塞

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T04:56:32.597

我们目前没有公共 API 来标记文件夹以使其链接到 Salesforce 记录。虽然我们在 V1 中有一个私有 API 方法来执行此操作，但我们不再共享它，因为它将在今年年底被弃用。我们希望尽快在公共文档中包含我们的 V2 API 的新版本。请留意这里：http: [//developers.box.com/](http://developers.box.com/)

# windows-phone-8 - WP8 应用程序使用传感器恢复

> ID：14817738
> 
> 赞同：4
> 
> 时间：2013-02-11T17:43:32.233
> 
> 标签：windows-phone-8, sensors, application-lifecycle

在我的 WP8 应用程序中，我使用所有传感器。加速度计、指南针（来自 Windows.Devices.Sensors 和 Microsoft.Devices.Sensors）和倾角计。一切正常，直到我按下**Windows**按钮，然后按下**后退**按钮。**我得到一个带有“正在恢复...”**消息的全黑屏，但没有任何反应。一旦我遇到异常（仅从 5 失败开始）：

```
{System.Runtime.InteropServices.SEHException: External component has thrown an exception.
   at Microsoft.Devices.Sensors.SensorBase`1.PauseSensor()
   at Microsoft.Devices.Sensors.SensorBase`1.<>c__DisplayClass7.<.ctor>b__4(Object sender, NotificationCallbackEventArgs args)
   at Microsoft.Devices.Sensors.SensorCallback.MS.Internal.Interop.INotificationCallback.Pausing(XPauseType pauseType)
   at MS.Internal.Interop.NotificationService.NotificationPausing(XPauseType pauseType)
   at MS.Internal.FrameworkCallbacks.NotificationPausing(UInt32 pauseType)} 
```

有人遇到过这个例外吗？

或者是否有在 wp8 应用程序生命周期中正确使用传感器的最佳实践？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T06:28:44.100

这个问题比我想象的要复杂。我在这方面做了很多工作。我分享我的发现，因为我认为我的经验也可以帮助以后的其他人。

我通过服务类使用传感器：这些类更新我的虚拟机，在虚拟机中我使用我的 DispatcherHelper 在 UI 上更新这些。我知道如果我想更新传感器的 valuechanged 事件中的 UI 绑定属性，我需要在事件处理程序中使用 dispatcherhelper 调用此更新，但我不知道如果它们与 VM 而不是 Views 通信时它们的行为如何。当我启动应用程序时，如果传感器具有新值，我在更新 UI 时没有任何问题。在这种情况下，我唯一的问题是，如果我想停用（按下 Windows 按钮）并激活（按下后退按钮）我的应用程序，我也不例外，我没有丢失调试会话，但只有一个带有“正在恢复”的黑页...”文本和运行进度条，什么也没发生。

我错过的是跨线程/访问异常。如果我使用 UI 绑定数据执行此操作，则会引发异常，但在这种情况下不会。

另一件事：加速度计（我有一个只与加速度计一起工作的版本）与模拟器一起工作，但在设备上却不行。我认为模拟器试图通过返回值来模拟加速器，但不是以正确的方式（没有线程问题）。

**解决方案**

如果我在 UI 线程的事件处理程序中更新（使用我自己的 DispatcherHelper）一切正常。这是一个很好的教训，在与传感器和其他层/线程（VM，V）交互时要始终注意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T00:51:13.157

这听起来确实像一个生命周期问题。

您是否尝试过在 App.Deactivated 事件上从 Microsoft.Devices.Sensors 的传感器上调用 SensorBase.Stop() 并在 App.Activated 事件上恢复使用 SensorBase.Start()？根据您的应用程序中有多少页面需要传感器访问，您甚至可以覆盖 OnNavigatedTo/OnNavigatedFrom 方法并使用它们。

您不必这样做，但根据您的应用程序，这可能是一个好主意。（您的应用程序是否支持锁屏空闲执行？它有后台代理吗？它是否在后台运行时尝试获取传感器读数？）

# math - 查找反向百分比

> ID：14817739
> 
> 赞同：-1
> 
> 时间：2013-02-11T17:43:37.710
> 
> 标签：math

我有一个函数可以根据在 div .days-due 中找到的数字设置引导进度条。它工作正常，但进度条与我想要的宽度相反。

如何反转 progBarValue 数字？

```
function daysUntil(year, month, day) {
  var now = new Date(),
      dateEnd = new Date(year, month - 1, day), // months are zero-based
      days = (dateEnd - now) / 1000/60/60/24;   // convert milliseconds to days

  return Math.round(days);
}

// find percentage to due date
$('#paging1 ul li').each(function () {

    var monthDue = $(this).find('.month').text();
    var dayDue = $(this).find('.day').text();
    var yearDue = $(this).find('.year').text();

    $(this).find('.days-due').text(daysUntil(yearDue, monthDue, dayDue));

    // progress bar
    // find number of days until due date
    var progBarValue = $(this).find('.days-due').text();
    // limit days due to no more than 100%
    progBarValue = progBarValue > 100 ? 100 : progBarValue;
    // set progress bar width
    $(this).find('.bar').width(progBarValue +"%");

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T17:45:17.727

嗯，`$(this).find('.bar').width((100 - progBarValue) +"%");`？

# java - 使用 Java、Ajax 和 json 通过 Web 服务发布数据不起作用

> ID：14817741
> 
> 赞同：0
> 
> 时间：2013-02-11T17:43:43.503
> 
> 标签：java, jquery, ajax, json, web-services

有人可以帮我解决这个问题。这总是出错，但没有错误消息，只是 console.log。有什么好的方法来调试这个，或者你能看看这有什么问题吗？

谢谢！萨米人

```
function foo(){

        alert('Button pressed');
        var user={"id":10,"firstName":" Ted","lastName":"TESTING","age":69,"freeText":"55555","weight":55};

        $.ajax({
        type: "POST",
        contentType: "application/json",
        url: "http://localhost:8080/testSoft/webresources/entity.user/",
        dataType: "json",
        data: user,

        success: function(data){alert(data);},
        error: function(data) {
        console.log('#####################error:################################'+data);                 
        alert('addUser error: ' + data.firstName);
        }
        });
        }; 
```

网络服务：

```
@POST
@Override
@Consumes({"application/xml", "application/json"})
public void create(User entity) {
    super.create(entity);
} 
```

用户

```
public class User implements Serializable {
private static final long serialVersionUID = 1L;
@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
@Basic(optional = false)
@Column(name = "id")
private Integer id;
@Size(max = 45)
@Column(name = "firstName")
private String firstName;
@Size(max = 45)
@Column(name = "lastName")
private String lastName;
@Column(name = "age")
private Integer age;
@Lob
@Size(max = 65535)
@Column(name = "freeText")
private String freeText;
@Column(name = "weight")
private Integer weight; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:20:02.310

PLS 告诉我为什么这在函数之外起作用？如果我像这样插入对按钮的函数调用，则它不起作用：

```
<button type="submit" class="btn btn-primary" id="btnAddUser" onclick="foo()">Register</button> 
```

但是当它在函数之外时它正在工作：

```
<script>
            var user={"id":10,"firstName":" Coka","lastName":"CocaCola","age":69,"freeText":"55555","weight":55};
            alert('user----->' +user.firstName);
            $.ajax({

            type: "POST",
            contentType: "application/json",
            url: "http://localhost:8080/testSoft/webresources/entity.user/",
            dataType: "json",
            data: JSON.stringify(user),

            success: function(data){alert(data);},
            error: function(data) {
            console.log('#####################error:################################'+data);                 
            alert('addUser error: ' + data.firstName);
            }
            });
        </script> 
```

我的 JS 很糟糕，我也讨厌它，现在更糟了:(

# asp.net-mvc - 在使用文档数据库时，您是存储复合持久视图模型，还是只存储对其他持久视图模型的引用？

> ID：14817742
> 
> 赞同：1
> 
> 时间：2013-02-11T17:43:43.797
> 
> 标签：asp.net-mvc, viewmodel, ravendb, soa

我们使用 RavenDB 作为持久的视图模型存储，并且我们正在研究如何构建我们的视图模型。

让我们以 OrderViewModel 为例。您通常会将 LineItemViewModels 保留在 OrderViewModel 文档中，还是将 LineItemViewModels 存储在单独的集合中，并在 OrderViewModel 文档中拥有 LineItem ID 列表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T20:06:22.440

[除非您只在极少数情况下需要订单项，否则请按照 Ayende http://ayende.com/blog/4546/modeling-hierarchical-structures-in-ravendb](http://ayende.com/blog/4546/modeling-hierarchical-structures-in-ravendb)的这篇文章将它们存储在一起

# python - 管理依赖于其他包的python包

> ID：14817747
> 
> 赞同：0
> 
> 时间：2013-02-11T17:43:51.560
> 
> 标签：python, python-2.7

我无法想象这是一个原始问题，但我似乎找不到答案。我一定是使用了错误的搜索词。

我们的团队正在开发一个 Python 实用程序包。我们将其称为“工具”。“工具”中的各种类需要其他包和模块。

“工具”有几个类，名称如下：

*   解析器
*   记录器
*   FooTester
*   酒吧测试仪

还有2个其他包。一个叫“foo”，另一个叫“bar”。有些团队只使用“foo”包，有些团队只使用“bar”包。要求只使用“foo”包的团队不要安装“bar”包。

“FooTester”类需要“foo”包，因为它有一个“import foo”。“BarTester”类需要“bar”包，因为它有一个“import bar”。

两个团队都希望将以下内容放在脚本的顶部：“导入工具”，然后使用各自的 Tester 类。

正如我们现在所拥有的，除非你安装了“bar”和“foo”包，否则你不能这样做。

这样做的标准方法是什么？在那儿？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T18:04:03.033

我认为这`FooTester`将是`foo`一揽子计划`BarTester`的一部分，也是`bar`一揽子计划的一部分。（或者也许每个都在自己的包/模块中。）

鉴于使用该`foo`软件包的团队不安装该`bar`软件包的要求，将两者的测试人员放在一个双方都使用的软件包中似乎很奇怪`tools`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-22T19:58:45.293

解决方案很少

# 选项全部：安装一切，忽略您的特殊要求

这不能回答您的问题，但可能是最有效的解决方案。除非您有一些软件包，由于任何原因难以安装，否则不值得为不同的团队分开安装。如果你计算实现它所需的时间，你会发现，这是不可行的。如果您担心安装软件包所需的时间，请参阅[相关的 SO 答案以了解 pip 配置](https://stackoverflow.com/a/18520729/346478)，即使对于需要编译的软件包，您的安装速度也会缩短到一两秒。

# Option Multi：将解决方案组织成多个多级包

您可以将解决方案拆分为包，例如

*   `tool.common`
*   `tool.teamA`
*   `tool.teamB`
*   `tool.teamB`

在这种情况下，工具是所谓的命名空间包，应该是空的。

任何包都可能需要安装其他包，通常这些包`tool.common`可能是所有其他包中所需包的一部分。

# `requirements.txt`选项 Pip：对文件使用 pip

还有其他常见的模式，使用`pip`和`requirements.txt`文件。

pip 允许安装在某些文本文件中声明的文件，通常称为`reuirements.txt`，但任何其他名称都可以。

而不是使用：

```
$ pip install tool.teamA 
```

人们会以某种方式使代码可以使用，例如：

```
$ git clone repo4tools 
```

在那个存储库中，会有文件

*   `requirements-teamA.txt`
*   `requirements-teamB.txt`
*   `requirements-teamC.txt`

以及其他需要的东西。

每个需求文件将仅包含给定团队所需的包。

然后人们会简单地调用：

```
$ cd repo4tools
$ pip install -r requirements-teamA.txt 
```

对于开发人员来说，最后一个选项变得非常流行，尤其是与 virtualenv 结合使用。有时每个团队甚至有多个需求文件，一个用于实际使用，另一个用于开发和测试等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T18:43:31.670

“工具”可以有条件地定义其类：

```
fooed = barred = False

try:
    import foo
    fooed = True
    class FooTester(object):
        pass # your class here...
except ImportError:
    pass

try:
    import bar
    barred = True
    class BarTester(object):
        pass # your class here...
except ImportError:
    pass

if not fooed or barred:
    raise RuntimeError("You are not fooed or barred") 
```

# c# - 如何复制 Orchard CMS 的脚本、样式和 cshtml 文件替代图像源？

> ID：14817749
> 
> 赞同：1
> 
> 时间：2013-02-11T17:43:56.743
> 
> 标签：c#, orchardcms

我知道 Orchard CMS 检查 css 文件、javascript 文件和 cshtml 文件的位置列表，并将使用其位置列表中的第一个文件。

当我们需要在我们网站的不同区域覆盖布局和样式时，我们已经使用它取得了很好的效果。

我们现在需要做的是为图像实现类似的东西。

例如，我们需要类似`@Html.AssetPath("picture.jpg")`or的东西`Asset.Include("picture.jpg")`来查看所有活动主题和模块的内容文件夹，直到找到具有该名称的图像并渲染它。

任何人都可以对此有所了解，甚至可以指出我正确的方向吗？

# servlets - EntityManagerFactory 没有被注入 - JPA

> ID：14817755
> 
> 赞同：1
> 
> 时间：2013-02-11T17:44:19.767
> 
> 标签：servlets, jpa

我是 JPA 的初学者，当我在 servlet 中使用 @PersistenceUnit 时遇到问题。EntityManagerFactory 没有被注入，我不知道为什么。

```
public class MyServlet extends HttpServlet
{   

  @PersistenceUnit
  private EntityManagerFactory emf = null; 

  public MyServlet ()
  {
    super();        
  }

  @Override
  public void init(ServletConfig config) throws ServletException
  {
    super.init(config);
  }

  protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    Writer w = response.getWriter();
    w.append("HELLO HELLO");
    w.close();
  }

} 
```

我已经像这样配置了 persistence.xml 文件（在 META-INF 目录中）：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="1.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd">
<persistence-unit name="MiddlewareExpedElectrModel" transaction-type="RESOURCE_LOCAL">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>     
    <non-jta-data-source>java:/OracleDS</non-jta-data-source>
    <class>com.ieci.mugeju.middleware.model.entities.FechaUltimaSolicitudProcesada</class>
    <properties>         
     <property name="hibernate.transaction.manager_lookup_class" value="org.hibernate.transaction.JBossTransactionManagerLookup"/>
     <property name="hibernate.show_sql" value="true"/>
     <property name="hibernate.dialect" value="org.hibernate.dialect.Oracle10gDialect"/>         
  </properties>     
</persistence-unit> 
```

为什么没有注入 EntityManagerFactory？

我正在使用 Jboss 4.2.3，并且我还使用 oracle-ds.xml 文件配置了一个数据源。

**更新：**

如果我尝试以编程方式获取 EntityManagerFactory，它运行良好：

```
 EntityManagerFactory emf = Persistence.createEntityManagerFactory("MiddlewareExpedElectrModel"); 
```

但我想通过注入获得一个 EntityManagerFactory 实例。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T19:02:25.597

你能试一下吗

```
public class MyServlet extends HttpServlet {
//this is thread-safe
@PersistenceUnit(unitName="MiddlewareExpedElectrModel")
private EntityManagerFactory emf; 
```

据我所知，EntityManager 接口中的方法不是线程安全的，可能不会在多个并发请求之间共享。因此，不要将 EntityManager 注入到 servlet 实例变量中。

这不是线程安全的，并避免它

```
@PersistenceContext(unitName="MiddlewareExpedElectrModel")
private EntityManager em; 
```

您仍然可以在 servlet 类类型级别注入 EntityManager，并在请求处理期间需要时进行查找。

```
@PersistenceContext(unitName="MiddlewareExpedElectrModel", name="persistence/em")
public class MyServlet extends HttpServlet {
protected void doGet(
HttpServletRequest request,
HttpServletResponse response)
throws ServletException, IOException {
try {
  InitialContext ic = new InitialContext();
  EntityManager em =
   (EntityManager) ic.lookup("java:comp/env/persistence/em");
  } catch (NamingException ex) {
    ...
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-06T10:23:28.433

我在 glassfish 服务器上的应用程序中遇到了同样的问题。在我从 web.xml 中删除 servlet 声明并使用注释声明 servlet 之前，entitymanager 工厂始终为空。

```
@WebServlet("/GetRevisioniServlet")  // <-- this annotation solved all my problems
public class GetRevisioniServlet extends HttpServlet {

@PersistenceUnit(unitName = "clerpPU")
private EntityManagerFactory entityManagerFactory;

    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {

        EntityManager em = null;
        em = entityManagerFactory.createEntityManager(); 
        .....
    }
 } 
```

# asp.net - 将注册用户控件连接到 ASP.NET 中的 SQL Server 数据库

> ID：14817763
> 
> 赞同：0
> 
> 时间：2013-02-11T17:44:38.780
> 
> 标签：asp.net, .net, sql-server

我真的很抱歉，这可能是真正的初级问题，但我是 asp.net 的新手，我搜索了很多，但找不到适合我的问题的解决方案。

我的问题是：我想将我的用户注册数据保存到 SQL Server 数据库中，并在创建用户按钮中编写了以下代码：

```
protected void RegisterUser_CreatedUser(object sender, EventArgs e)
{
   UserDTO user = new UserDTO();
   user.userName = RegisterUser.UserName;
   user.password = RegisterUser.Password;
   user.userType = "User";

   string continueUrl = RegisterUser.ContinueDestinationPageUrl;

   if (user.addUser())
   {
       continueUrl = "~/";
   }

   Response.Redirect(continueUrl);
} 
```

在`addUser()`我创建一个连接并尝试保存它们。但我发现在项目中有一个内置数据库，名为`App_Data`. 所以即使数据也没有保存到我的 SQL Server 数据库中，第二次它说用户名已经存在。这意味着我的用户名保存在`App_Data`数据库中。

**我的问题是：**

1.  我怎样才能删除这个`App_Data`？
2.  我可以看看这个`App_Data`表结构吗？
3.  或任何建议使用此用户控件将数据保存到 SQL Server 数据库中？

**编辑：** 我的配置文件如下：

```
 <configSections>
    <section name="DatabaseFactoryConfiguration" type="PatientMgt_DataLayer.DatabaseFactorySectionHandler, PatientMgt_DataLayer, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null"/>
  </configSections>

  <connectionStrings>
    <clear/>
    <add name="MyConnection1" providerName="MSSQL" connectionString="Data Source=pqr;Initial Catalog=HospitalMgt;User Id=sa;Password=abc" />
  </connectionStrings>

  <DatabaseFactoryConfiguration Name="PatientMgt_DataLayer.MsSqlDatabase" ConnectionStringName="MyConnection1"/>

  <system.web>
    <compilation debug="true" targetFramework="4.0" />

    <authentication mode="Forms">
      <forms loginUrl="~/Account/Login.aspx" timeout="2880" />
    </authentication>

    <membership defaultProvider="AspNetSqlMembershipProvider">
      <providers>
        <clear/>
        <add name="MyConnection1" type="System.Web.Security.SqlMembershipProvider" connectionStringName="MyConnection1"
             enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false"
             maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10"
             applicationName="/" />

      </providers>
    </membership> 
```

我收到的错误 -

> 说明：处理服务此请求所需的配置文件期间发生错误。请查看下面的具体错误详细信息并适当地修改您的配置文件。
> 
> 解析器错误消息：找不到默认成员资格提供程序。

**已编辑的问题**

问题是当用户通过该表单添加用户名和密码时，如果数据没有保存到数据库，为什么表单不允许再次添加相同的用户名？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T18:14:48.660

好的，有几件事：

*   `App_Data`是一个众所周知的 ASP.NET**文件夹**- 而不是数据库。
*   默认情况下，ASP.NET 成员资格提供程序会将其 SQL Server Express`ASPNETDB.MDF`数据文件放入该文件夹，并从那里使用它

所以你不需要删除`App_Data`或类似的东西——你只需要告诉 ASP.NET 成员系统使用你自己的 SQL Server 数据库。

要在您自己的数据库中拥有 ASP.NET 成员表，您需要：

1.  执行`aspnet_regsql`在您的 .NET 文件夹中找到的实用程序（通常类似于`C:\Windows\Microsoft.NET\Framework\v4.0.30319\`或您正在使用的任何版本的 .NET 框架）；运行该应用程序，您将获得一个对话框，指导您将 ASP.NET 成员资格安装到您自己的数据库中。

2.  那么您需要修改您的`web.config`以确保 ASP.NET 会员系统使用**您的数据库**，而不是默认的 SQL Server Express。

当您创建标准 ASP.NET 应用程序时，您的 web.config 中可能有类似的内容：

```
<connectionStrings>
    <add name="ApplicationServices" 
         connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnetdb.mdf;User Instance=true" providerName="System.Data.SqlClient" />
</connectionStrings>
<system.web>
   <membership defaultProvider="AspNetSqlMembershipProvider">
      <providers>
         <clear />
         <add name="AspNetSqlMembershipProvider" 
              type="System.Web.Security.SqlMembershipProvider" 
              connectionStringName="ApplicationServices" 
              enablePasswordRetrieval="false" enablePasswordReset="true" 
              requiresQuestionAndAnswer="false" requiresUniqueEmail="false" 
              maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" 
              minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" 
              applicationName="/" />
      </providers>
   </membership> 
```

最有可能的是，您已经有一些自己的连接字符串，用于您自己的数据库 - 对吧？

因此，您只需更改 ASP.NET`<membership>`标记即可使用**您的**连接字符串！

```
<system.web>
   <membership>
      <providers>
         <clear />
         <add name="PutYourDefaultDatabaseConnectionStringNameHere"  <<=== CHANGE THIS!
              type="System.Web.Security.SqlMembershipProvider" 
              ....... />
      </providers>
   </membership> 
```

# javascript - 通过输入字段中的天数更新 Datepicker 日期？

> ID：14817764
> 
> 赞同：1
> 
> 时间：2013-02-11T17:44:40.000
> 
> 标签：javascript, jquery, twitter-bootstrap, datepicker

我希望`id="datepicker_end"`根据输入字段的天数更改日期选择器的日期`id="totaldays"`。

输入字段`id="totaldays"`有2个功能

1）它计算2个日期选择器之间的天数（现在可以使用，请参阅JSFiddle [http://jsfiddle.net/Deif/KLpq7/211/](http://jsfiddle.net/Deif/KLpq7/211/)） - 我想保留这个功能。

2）如果用户决定直接在输入字段中输入天数，那么我希望第二个日期选择器`id="datepicker_end"`根据输入字段的天数进行更新。

这里的概念是用户可以输入他们想要的天数或在两个日期之间选择......

我的 JSFiddle 如下[http://jsfiddle.net/Deif/KLpq7/211/](http://jsfiddle.net/Deif/KLpq7/211/)

我找不到任何好的例子，所以希望我在上面解释得很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T18:55:58.043

你的意思是这样的吗？

```
function days() {
            var a = new Date($("#datepicker_start").val()),
                b = new Date($("#datepicker_end").val()),
                c = 24*60*60*1000,
                diffDays = Math.round(Math.abs((a - b)/(c)));
            $("#totaldays").val(diffDays);
}

function formatDate(_d){
     var d = new Date(_d);
    var curr_date = d.getDate();
    if(curr_date < 10)
        curr_date = "0" + curr_date;

    var curr_month = d.getMonth() + 1; //Months are zero based
    if(curr_month < 10)
        curr_month = "0" + curr_month;

    var curr_year = d.getFullYear();   
    return curr_month + '/' + curr_date + '/' + curr_year;
}

$('#totaldays').change(function(){        
    if($(this).val() != ''){
        var days = $(this).val();
        var start= new Date($("#datepicker_start").val());
        var newStart = start.setDate(start.getDate() + parseInt(days));    
        $("#datepicker_end").val(formatDate(newStart));
    }else{
        $("#datepicker_end").val($("#datepicker_start").val());
    }

});

$('.datepicker')
    .datepicker({format: 'mm/dd/yyyy'})
    .on('changeDate', function(ev){
        days();
        $(this).datepicker('hide').blur();
}); 
```

演示：

[http://jsfiddle.net/dirtyd77/KLpq7/218/](http://jsfiddle.net/dirtyd77/KLpq7/218/)

# c - 确定字符串相等比较失败的位置

> ID：14817765
> 
> 赞同：3
> 
> 时间：2013-02-11T17:44:45.017
> 
> 标签：c, c-strings

给定这些字符串

```
char * foo = "The Name of the Game";

char * boo = "The Name of the Rose" 
```

我想确定第一个不匹配字符的地址，以便提取公共标头（“ *The Name of the* ”）。

我知道手动编码的循环是微不足道的，但我很好奇是否有任何变体`strcmp()`或其他库函数可以自动为我执行此操作？C++ 中的答案有什么不同吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T20:55:59.373

### 没有。不存在这样的标准[`string.h`](http://linux.die.net/man/3/string)功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T18:01:10.983

我相信这个简单的功能会做你想做的事，使用`strncmp`.
*（轻微测试...）*

```
int find_mismatch(const char* foo, const char* boo) 
{
    int n = 0;
    while (!strncmp(foo,boo,n)) { ++n; }
    return n-1;
}

int main(void)
{
    char * foo = "The Name of the Game";
    char * boo = "The Name of the Rose";
    int n = find_mismatch(foo,bar);

    printf("The strings differ at position %d (%c vs. %c)\n", n, foo[n], boo[n]);
} 
```

**输出**
`The string differ at position 16 (G vs. R)`

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-11T18:07:30.467

我相信您可以使用 strspn(str1, str2) 返回 str1 的初始部分的长度，该部分仅由 str2 的部分组成。

```
char *foo = "The Name of the Game";
char *boo = "The Name of the Rose";
size_t len = strspn(foo, boo);

printf("The strings differ after %u characters", (unsigned int)len); 
```

# php - 如何使用 PHP 查找工作日前？

> ID：14817767
> 
> 赞同：0
> 
> 时间：2013-02-11T17:44:50.423
> 
> 标签：php, date, datetime

假设今天是 2/11/13。我想在 5 个工作日前找到 - 所以，那将是第 4 个工作日。

但是使用这段代码：

```
echo date("n/j/Y",strtotime("-5 weekdays")); 
```

我得到了 2013 年 2 月 2 日。但是，当输入“-4 weekdays”时，我得到 2/5/2013，这没有意义。

平日包括MF

# css - 更改最近 Tumblr 帖子的样式

> ID：14817783
> 
> 赞同：0
> 
> 时间：2013-02-11T17:45:31.983
> 
> 标签：css, themes, tumblr

好的，我已经用谷歌搜索了几个小时，但没有运气。我希望你能帮助并感谢你这样做。我正在为 tumblr 开发网格主题。我希望最新帖子的格式与其他帖子不同。即，我希望它是全页宽度并具有不同的背景颜色和边框属性。本质上，创建一个不断更新到最新帖子的媒体标题。

一个类似的例子是 Digg.com。他们的顶帖是 3 个整页宽度，其余的“顶帖”位于 3 列网格中。

我对 html 和 css 非常胜任，但对 js （还）还没有。我正在开发的网站是 Adventuresportlife.tumblr.com

再次感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T18:20:02.827

您可以使用[`:nth-child(1)`](https://developer.mozilla.org/en-US/docs/CSS/%3anth-child)(CSS3) 或[`:first-child`](https://developer.mozilla.org/en-US/docs/CSS/%3afirst-child)(CSS 2) 伪类。在这种情况下，例如：

```
.masonry-brick:first-child {
    background-color: red;
    border: 2px solid black;
} 
```

你的第一个元素现在已经有了一个唯一的 ID，它有自己的内联样式元素的 CSS 规则：

```
#toppost {
    background-color: white;
    border-bottom: 1px solid green;
    width: auto;
} 
```

编辑：但请注意，IE7 和 IE8 支持 CSS2 伪类，而 CSS3 伪类不支持（来源：[caniuse.com](http://caniuse.com/#search=selectors)）。既然`:first-child`做了这项工作，最好坚持这样做以获得最大的兼容性。

# javascript - 是否可以将 Javascript 函数参数的属性扩展到本地范围？

> ID：14817784
> 
> 赞同：1
> 
> 时间：2013-02-11T17:45:37.230
> 
> 标签：javascript, scope, requirejs

是否可以将函数参数的属性扩展到函数的本地范围？采取以下代码：

```
function foo(a, b) {
  // apply some magic here to extend arguments' properties into local scope
  assert(bar == 'hello')
  assert(baz == 'world')
  assert(qux == 1234)
}

foo({bar: 'hello', baz: 'world'}, {qux: 1234}) 
```

假设我无法控制如何`foo`被调用并且我只能控制它的实现，有没有什么我可以做的事情`foo`使得不需要前缀，比如`bar`as `a.bar`？

我意识到在这样一个人为的例子中这可能看起来很疯狂，所以让我解释一下我的总体目标。我想以这样的方式使用*requirejs*，我不必在导入模块的成员前面加上模块名称。例如：

```
requirejs(['mod'], function(mod) {
  assert(mod.blah()) // OK, normal
  assert(blah())     // needs magic to work
}) 
```

我尝试完成此操作的原因是，我认为我有几个文件在逻辑上属于一个模块，但出于开发方便的原因，不能很好地混合在同一个源文件中——例如，生产代码和测试代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T18:21:34.523

> 我试图做到这一点的原因是我有几个文件在我看来逻辑上属于一个模块

啊，我们遇到了一个 XY 问题 :-) 由于在 js 中没有这样的魔法（除了让所有模块属性成为全局变量——当然不是你想要的），你将需要另一个解决方案。

通过使用一种方法`a`，将其混合`b`到单个模块中很简单。`extend`使用 jQuery，它可能看起来像

```
var c = $.extend({}, a, b); 
```

但是你也可以用一个简单的 for-in-loop 来做到这一点。你甚至可以将它声明为一个自己的 requirejs 模块，这取决于 a 和 b 并返回 c；所以你只需要请求c。

> 出于方便开发的原因，不要在同一个源文件中很好地混合

通过使用将多个开发文件组合成一个（巨大的）生产文件的构建工具，可能还有其他可能性。不确定这是否适用于您的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T00:21:28.650

已经有一段时间了，但我发现了一种方法来做到这一点。`with`可以使用 JavaScript关键字将对象扩展到本地范围。但是，`with`根据 MDN ( [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/with](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/with) )，不鼓励使用。但是，如果一个人真的想扩展本地范围，这就是它的样子。

```
function foo(a, b) {
  with (a) {
    with(b) {
      assert(bar == 'hello')
      assert(baz == 'world')
      assert(qux == 1234)
    }
  }
}

foo({bar: 'hello', baz: 'world'}, {qux: 1234}) 
```

# javascript - 基于 Javascript 中的用户输入自动更新表格单元格

> ID：14817786
> 
> 赞同：0
> 
> 时间：2013-02-11T17:45:46.480
> 
> 标签：javascript, html-table, cell, auto-update, onkeypress

我正在尝试根据另一个表格单元格中的更改自动更新表格单元格。用户有名字、姓氏和用户名。用户名由首字母+姓氏组成。我目前的代码是：

```
<html>
  <head>
    <script type = "text/javascript">
      function updateUsername(){
        var firstname = document.getElementById("tdFirstname").firstChild.firstChild.nodeValue;
        var lastname = document.getElementById("tdLastname").firstChild.firstChild.nodeValue;
        var username = document.getElementById("tdUsername").innerHTML = firstname + lastname;
      }
    </script>
  </head>
  <body>
    <table id = 'confirm'>
      <tr>
        <th>Firstname</th>
        <td id = 'tdFirstname'>
          <div onkeypress = 'updateUsername()' contentEditable>
            Johnny
          </div>
        </td>
      </tr>
      <tr>
        <th>Lastname</th>
        <td id = 'tdLastname'>
          <div onkeypress = 'updateUsername()' contentEditable>
            Sppleseed
          </div>
        </td>
      </tr>
      <tr>
        <th>Username</th>
        <td id = 'tdUsername'>
          JSPPLESEED
        </td>
      </tr>
    </table>
  </body>
</html> 
```

该代码有效（只是将名字和姓氏放在一起，而不是担心第一个首字母），但它后面有一个字母。输入新字符后它不会更新，这意味着如果我将姓氏更新为 Appleseed（应该是这样），只需更改一个字母就没有效果（用户名仍然是 Sppleseed），但是当按下第二个键时，它会换成苹果籽。我的代码有问题吗？还是我错过了在输入/删除新字符后我应该更新的内容。这非常令人沮丧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T17:50:11.977

尝试使用`onkeyup`而不是`onkeypress`.

keyup 事件被触发“当用户释放一个键，在该键的默认操作已经执行之后”。

[http://www.quirksmode.org/dom/events/keys.html](http://www.quirksmode.org/dom/events/keys.html)

# python - 带有模块名称的 Python 回溯

> ID：14817788
> 
> 赞同：4
> 
> 时间：2013-02-11T17:45:58.333
> 
> 标签：python

Python 中的堆栈跟踪显示文件路径。有没有办法让他们显示完全限定的函数名？

例子：

```
class Foo(object):
    def bar(self):
        raise Exception, "Some error."

def inner():
    return Foo().bar()

def outer():
    return inner() 
```

我希望我的输出看起来像这样：

```
In __main__.Foo.bar ("scratchpad.py", line 3)
   __main__.inner ("scratchpad.py", line 6)
   __main__.outer ("scratchpad.py", line 9)
Exception: Some error. 
```

如果它有任何改变，我使用的是 Python 2.7。

* * *

这是我到目前为止所拥有的：

```
import sys

class Foo(object):
    def bar(self):
        raise Exception, "Dummy value."

def inner():
    "Inner function..."
    return Foo().bar()

def outer():
    return inner()

try:
    outer()
except Exception, error:
    traceback = sys.exc_info()[2]
    while traceback is not None:
        frame = traceback.tb_frame
        print 'Name', frame.f_globals['__name__']+'.'+frame.f_code.co_name
        docs = frame.f_code.co_consts[0]
        if docs and docs != -1: # docs can be None or -1.
            print 'Docs "%s"' % docs
        print 'Args', frame.f_code.co_argcount
        print 'File "%s", line %d' % (frame.f_code.co_filename, frame.f_lineno)
        print
        traceback = traceback.tb_next 
```

当我运行它时，它会打印

```
$ python pretty-stack.py
Name __main__.<module>
Args 0
File "pretty-stack.py", line 28

Name __main__.outer
Args 0
File "pretty-stack.py", line 14

Name __main__.inner
Docs "Inner function..."
Args 0
File "pretty-stack.py", line 11

Name __main__.bar
Args 1
File "pretty-stack.py", line 7 
```

它几乎就在那里，但我在重要的用例上遇到了麻烦。例如，我无法`Foo`获取`Foo.bar()`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T21:39:37.850

没有直接的方法可以从回溯中访问符号，因为只有“代码对象”是可访问的，正如[代码对象上的 Python 文档](http://docs.python.org/2/reference/datamodel.html)所说：

> 与函数对象不同，代码对象是不可变的，并且不包含对可变对象的引用（直接或间接）。

似乎要检索回溯中涉及的模块、函数和类，我们需要搜索它们。

* * *

我有一个似乎可以工作的实验版本。此实现基于遍历代码对象引用的模块以找到引用相关代码对象的函数或方法。

```
from collections import namedtuple
import inspect
import sys

from nested.external import Foo

def inner(a, b='qux'):
    "Inner function..."
    return Foo().bar()

def outer(a, *args, **kwds):
    return inner(a)

def resolve_signature(function):
    """Get a formatted string that looks like the function's signature."""
    prgs, vrgs, kwds, defs = inspect.getargspec(function)
    arguments = []
    if defs:
        for name in prgs[:len(defs)-1]:
            arguments.append(name)
        for i,name in enumerate(prgs[len(defs)-1]):
            arguments.append('%s=%r'%(name,defs[i]))
    else:
        arguments.extend(prgs)
    if vrgs:
        arguments.append('*'+vrgs)
    if kwds:
        arguments.append('**'+kwds)
    return '('+', '.join(arguments)+')'

def resolve_scope(module_name, code):
    """Resolve the scope name for a code object provided its module name."""
    # Resolve module.
    module = sys.modules.get(module_name, None)
    if not module:
        return '<hidden-module>' + '.' + code.co_name + '(?)'

    # Check module's functions.
    symbols = inspect.getmembers(module, inspect.isfunction)
    for symbol_name,symbol_info in symbols:
        if symbol_info.func_code is code:
            scope = module_name + '.'
            return scope + code.co_name + resolve_signature(symbol_info)

    # Check module's classes.
    symbols = inspect.getmembers(module, inspect.isclass)
    for symbol_name,symbol_info in symbols:
        # Check class' methods.
        members = inspect.getmembers(symbol_info, inspect.ismethod)
        for method_name,method_info in members:
            if method_info.__func__.func_code is code:
                scope = module_name + '.' + symbol_name + '.'
                return scope + code.co_name + resolve_signature(method_info)

    # Default to the thing's name.  This usually happens
    # when resolving the stack frame for module-level code.
    return code.co_name

Frame = namedtuple('Frame', ['call', 'file', 'line', 'help'])

def pretty_stack(traceback=None):
    """Returns a simple stack frame."""
    frames = []
    if traceback is None:
        traceback = sys.exc_info()[2]
    while traceback is not None:
        frame = traceback.tb_frame
        call = resolve_scope(frame.f_globals['__name__'], frame.f_code)
        path = frame.f_code.co_filename.replace('\\', '/')
        line = frame.f_lineno
        docs = frame.f_code.co_consts[0]
        if docs == -1:
            docs = None
        frames.append(Frame(call, path, line, docs))
        traceback = traceback.tb_next
    return frames

try:
    outer(1)
except Exception, error:
    frames = pretty_stack()
    for frame in frames:
        print frame.call
        print '  -> "%s", line %d.' % (frame.file, frame.line)
        if frame.help:
            print frame.help
        print 
```

当我运行它时，我得到类似的东西：

```
$ python pretty-stack.py
<module>
  -> "pretty-stack.py", line 84.

__main__.outer(a, *args, **kwds)
  -> "pretty-stack.py", line 14.

__main__.inner(a='qux')
  -> "pretty-stack.py", line 11.
Inner function...

nested.external.Foo.bar(self)
  -> "C:/Users/acaron/Desktop/nested/external.py", line 3. 
```

请注意，这甚至会打印函数签名和文档字符串，这可能有助于调试。

在存在描述符之类的情况下，它可能无法按预期工作，我没有尝试过非常复杂的用例。如果您发现它不起作用的情况，请告诉我，我会尝试修补它。

# ajax - 如何使用ajax将数组发送到servlet

> ID：14817790
> 
> 赞同：1
> 
> 时间：2013-02-11T17:46:02.180
> 
> 标签：ajax, arrays, servlets, send

必须使用 ajax 将数组发送到 servlet，如下所示

```
// My array "mapTest"
var mapTest = {key1: ["a1", "a2", "a3"], key2: ["b1", "b2"]};
$.ajax({
    type: "POST",
    url: "assembles-query",
    data: {
    "mapList[]" : mapTest
  },
    error:function(){
    console.log("ERROR");
  },
    success:function(responseText){
    $("textarea[id=assembleQuery]").text(responseText);
  }
}); 
```

在 servlet 中尝试接收数组中包含的值，如下所示

```
String[] mapList = request.getParameterValues("mapList[]"); 
```

当我滚动浏览数组中包含的值时，总是返回**java.lang.NullPointerException**

```
for (int i = 0; i < mapaList.length; i++) {
     System.out.println(mapList[i]);
} 
```

我应该怎么做才能解决这个问题？既然已经感谢大家的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T18:35:33.770

在开发这个时，您似乎考虑到了 PHP。您似乎混淆了将带有大括号`[]`后缀的请求参数名称透明转换为数组的特定于 PHP 的功能，因为它是特定于标准 HTTP 的东西。因此这是绝对不正确的。HTTP 没有这样的概念。紧密构建在 HTTP 之上的 Servlet API 根本不支持这个 PHP 特有的特性。

在您的特定构造中，这些值可用作：

```
String[] key1values = request.getParameterValues("mapList[][key1][]");
String[] key2values = request.getParameterValues("mapList[][key2][]"); 
```

请注意，如果您摆脱笨拙的`mapList[]`包装器会更好：

```
data: mapTest 
```

这将使值可用：

```
String[] key1values = request.getParameterValues("key1[]");
String[] key2values = request.getParameterValues("key2[]"); 
```

# javascript - 在jquery中淡入淡出循环图像数组

> ID：14817796
> 
> 赞同：0
> 
> 时间：2013-02-11T17:46:13.710
> 
> 标签：javascript, jquery

我有一组背景图像，我想将它们作为简单的淡入淡出效果循环播放。这很容易使用图像 html 标记完成，但我需要将它们设置为样式的背景图像。背景图像是使用 cms 动态拉出的。

这是链接，因此您可以在主页上看到我正在处理的内容（当前图像只是在 css n page-top div 中设置的背景图像）：

[关联](http://conceptfiresec.limegreentangerine.net)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T18:00:33.750

这个效果可以通过[Cycle](http://jquery.malsup.com/cycle/) jquery 插件轻松实现：

一个例子：

**HTML：**

```
<div class="pics"> 
    <img src="images/image1.jpg" width="normal height" height="normal height" /> 
    <img src="images/image2.jpg" width="normal height" height="normal height" /> 
    <img src="images/image3.jpg" width="normal height" height="normal height" /> 
</div> 
```

**JS：**

```
$(".pics").cycle({
   ,options,
}); 
```

您应该将图片的宽度和高度设置`div`为与页面的宽度和高度相同，并**隐藏溢出**以防止图像溢出。

这是一个示例：h [ttp://bazar-restaurant.somee.com](http://bazar-restaurant.somee.com)

# c# - 在列表中彼此重叠呈现的图像

> ID：14817808
> 
> 赞同：0
> 
> 时间：2013-02-11T17:46:48.220
> 
> 标签：c#, xamarin.ios

我正在创建一个基于 Monotouch 元素的元素。这样做的结果是创建一个列表（如 Twitter 时间线），每个单元格中都有主题、域名和 Fav-Icon。问题是这样的：列表的第一个和最后一个收藏图标显示了两次，因此它们彼此重叠。

下面是代码。谁能看到我犯了什么错误？/罗伯特

```
public override void Draw (RectangleF rect)
{
    const int padright = 12;//21;
    var ctx = UIGraphics.GetCurrentContext ();
    bool highlighted = (Superview.Superview as UITableViewCell).Highlighted;

                var bounds = Bounds;
                var midx = bounds.Width/2;
                if (highlighted){
                    UIColor.FromRGB (4, 0x79, 0xef).SetColor ();
                    ctx.FillRect (bounds);
                    //Images.MenuShadow.Draw (bounds, CGBlendMode.Normal, 0.5f);
                    //textColor = UIColor.White;
                } else {
                    UIColor.White.SetColor ();
                    ctx.FillRect (bounds);
                    ctx.DrawLinearGradient (bottomGradient, new PointF (midx, bounds.Height-17), new PointF (midx, bounds.Height), 0);
                    ctx.DrawLinearGradient (topGradient, new PointF (midx, 1), new PointF (midx, 3), 0);
                }

        float boxWidth;
        float boxHeight = Bounds.Height;
        boxWidth = 0;
        //SizeF ssize;
        //string label;
        //label = Date;
        //ssize = StringSize (label, SubjectFont);
        //float dateSize = ssize.Width + padright + 5;
        //DrawString (label, new RectangleF (Bounds.Width-dateSize-5, 5, dateSize, 14), DateFont, UILineBreakMode.Clip, UITextAlignment.Right);

        const int offset = 46; //33;
        float bw = Bounds.Width-offset;
        UIColor.Black.SetColor ();

        //Extracting the domain name that I get.
        string domainName = new Uri(Sender).DnsSafeHost;
        if(domainName.StartsWith("www"))
        {
            domainName = domainName.Substring(4, domainName.Length-4);
        }

        //Checking to see if there is any subdomain.
        //If so, I start at the first dot to get the domainname "clean".
        int countDots = domainName.Split('.').Length - 1;
        if(countDots > 1)
        {
        Console.WriteLine("Dots: " + countDots);
        int i = domainName.IndexOf('.') + 1;
        Console.WriteLine("Position: " + i);
            domainName = domainName.Substring(i).Trim();
            Console.WriteLine("Domain: " + domainName);
        }

        DrawString (Subject, new RectangleF (offset, 6, bw-boxWidth-5, 24), SubjectFont, UILineBreakMode.TailTruncation, UITextAlignment.Left);
        DrawString (domainName, new PointF (offset, 28), bw/*-dateSize*/, SenderFont, UILineBreakMode.TailTruncation);

        //Getting the fav icon from the domainname and posting it to g.etfv.co.
        string favUrl = "http://www."+domainName;
        Console.WriteLine("Fav icon: " + favUrl);
        Uri imageBackground = null;
        imageBackground = new Uri ("http://g.etfv.co/"+ favUrl);
        var avatar = ImageLoader.DefaultRequestImage (imageBackground, this);
        var imageRect = new RectangleF(15f, 10f, 16f, 16f); 
        using (var myImage = new UIImageView(imageRect))
        {
            if(avatar == null)
            {
                //A local avatar if something goes wrong
                string localAvatar = "Images/avatar.png";
                myImage.Image = UIImage.FromFile(localAvatar);
            }
            else
            {myImage.Image = avatar;}
            AddSubview(myImage);
        }
        avatar = null;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T18:19:47.503

> 谁能看到我犯了什么错误？

### 第1部分...

您的描述“因此它们彼此重叠”并不完全清楚。

但我猜这个问题可能隐藏在这个方法的背后？

```
 var avatar = ImageLoader.DefaultRequestImage (imageBackground, this); 
```

如果这异步请求头像，那么您需要确保当异步方法返回时，该单元格没有被重用于不同的位置。

在 TweetStation 中，这是在`void IImageUpdated.UpdatedImage (long onId)`回调中的这些行中完成的：

```
 // Discard notifications that might have been queued for an old cell
    if (tweet == null || (tweet.UserId != onId && tweet.RetweeterId != onId))
        return; 
```

您的回调中是否有类似的行？

* * *

> 谁能看到我犯了什么错误？

### 第2部分...

我会说你犯了一个错误，就是把一种方法写得太长，以至于你都看不懂。

考虑使用诸如“提取方法”之类的[重构工具](http://monodevelop.com/Documentation/Feature_List/Refactoring)，以便将其分解为更小的有意义的函数。看

这都是正常重构的一部分——在一个函数中编写代码，然后将其重构为更小的部分，因为它变得太长且笨重......

...而且很多人会说我写的方法太小了...

...所以无论您做什么，都会找到适合您和您的代码的东西:)

# php - PHP删除特定字符后的所有空格

> ID：14817813
> 
> 赞同：1
> 
> 时间：2013-02-11T17:47:11.153
> 
> 标签：php

我有一个看起来像这样的文本文件：

```
What word is on page 9, 4 words from the left on line 15?   account
What word is on page 11, 2 words from the left on line 5?   always 
```

有没有办法可以删除“？”之后的所有空格？所以它看起来像这样（整个实际文本文件中的空间量都不同）：

```
What word is on page 9, 4 words from the left on line 15?account
What word is on page 11, 2 words from the left on line 5?always 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T17:51:24.330

使用正则表达式：

```
$str = 'What word is on page 9, 4 words from the left on line 15?   account';
echo preg_replace('/\?\s+/', '?', $str); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T17:52:19.307

```
$input = 'What word is on page 9, 4 words from the left on line 15?   account';
echo preg_replace('/\?\s+/', '?', $input); 
```

[看到它在行动](http://codepad.viper-7.com/Rgu3tb)

# javascript - 如何使用一个按钮将 CSS 样式应用于具有相同 ID 的所有元素？

> ID：14817816
> 
> 赞同：0
> 
> 时间：2013-02-11T17:47:22.190
> 
> 标签：javascript, jquery, html

我的想法是创建一个按钮来隐藏/显示所有隐藏的文本（通过以黑色突出显示文本来隐藏，通过使文本的背景颜色透明来显示）。但是如下所示的代码仅适用于具有给定 ID（“p2”）的第一个元素。

Javascript：

```
function change()
{
    var test = document.getElementById("button1");
    if (test.value=="Hide Spoiler") 
    {  
        test.value = "Open Spoiler"; 
        document.getElementById("p2").style.backgroundColor="black";  
    }
    else  
    {  
        test.value = "Hide Spoiler"; 
        document.getElementById("p2").style.color="black";
        document.getElementById("p2").style.backgroundColor="transparent";  
    }
} 
```

HTML：

```
<input onclick="change()" type="button" value="Open Curtain" id="button1"></input>
<br>
<span id="p2">Hidden text</span> Test for more <span id="p2">Hidden text</span> test again. <span id="p2">Hidden text</span> 
```

我如何使所有具有相似 ID 的元素仅使用 1 个按钮来更改其 CSS 样式？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T17:55:30.677

您的代码只会更新一个元素，因为`getElementById`只会返回一个元素（因为，正如我们所说，`id`应该是唯一的）。如果您需要将多个元素标记为相关，请使用 a`class`代替。这是一个使用JavaScript[的工作示例：`class`](http://jsfiddle.net/robertc/Dn9cX/)

```
function change() {
    var test = document.getElementById("button1");
    var els = document.getElementsByClassName("p2");
    if (test.value == "Hide Spoiler") {
        test.value = "Open Spoiler";
        for (var i=0; i<els.length; i++) {
            els[i].style.backgroundColor = "black";
        }
    } else {
        test.value = "Hide Spoiler";
        for (var i=0; i<els.length; i++) {
            els[i].style.color = "black";
            els[i].style.backgroundColor = "transparent";
        }
    }
} 
```

HTML：

```
<input onclick="change()" type="button" value="Hide Spoiler" id="button1"></input>
<br>
<span class="p2">Hidden text</span> Test for more <span class="p2">Hidden text</span> test again. <span class="p2">Hidden text</span> 
```

如果您需要它在太旧的浏览器中工作`getElementsByClassName`，请尝试使用[jQuery](http://jquery.com/)。它使这类事情变得容易得多

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T17:50:14.133

使用 a`class`而不是`id`. 然后使用`document.getElementsByClassName("p2")`which 将返回匹配元素的数组并循环它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T17:53:31.427

id 是唯一的，因此拥有多个实例是无效的 [ [http://www.tizag.com/cssT/cssid.php]](http://www.tizag.com/cssT/cssid.php]) - 但是您可以使用一个类，然后使用 $(".className") 选择所有实例（假设 jQuery）。这个答案[How to getElementByClass instead of GetElementById with Javascript?](https://stackoverflow.com/questions/1933602/how-to-getelementbyclass-instead-of-getelementbyid-with-javascript) 包含很多有用的指针

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T17:58:00.083

正如其他人所说，不要在一个页面上多次使用相同的 id。相反，使用类名或数据属性。既然你用 jQuery 标记了你的问题：

```
function change()
{
    var test = document.getElementById("button1");
    if (test.value=="Hide Spoiler") 
    {
        test.value = "Open Spoiler"; 
        $('.className').css('background-color','transparent');
    }
    else 
    {
        test.value = "Hide Spoiler"; 
        $('.className').css('background-color','transparent');
        $('.className').css('color','black');
    }
} 
```

如果您要使用 jQuery，我还建议您使用按钮的单击事件，如下所示：

```
$('#button1').click(function() {
  ...
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-11T18:09:34.467

我反对相同 ID 的概念......但尝试如下将是您问题的答案......

小提琴示例：http: [//jsfiddle.net/RYh7U/65/](http://jsfiddle.net/RYh7U/65/)

**CSS**

```
.mask
{
color : red;
} 
```

**Javascript：**

```
function change()
{
 var elements = document.getElementById("p2").parentNode.getElementsByTagName("span");
    for(var i=0; i<elements.length; i++)
      elements[i].className = "mask";
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-11T18:39:57.907

```
<input onclick="change()" type="button" value="Open Curtain" id="button1"/>
<br/>
<span class="p2">Hidden text</span> Test for more <span class="p2">Hidden text</span> test again. <span class="p2">Hidden text</span> 
```

然后是jQuery：

```
function change() {
    var test = document.getElementById("button1");
    if (test.value == "Hide Spoiler") {
        test.value = "Open Spoiler";
        $('.p2').css('background-color','black')

    }
    else {
        test.value = "Hide Spoiler";
        $('.p2').css('background-color', 'transparent')

    }
} 
```

我已经测试过了

# symfony - Symfony KnpPaginator 使用表单字段中的自定义过滤器查询？

> ID：14817817
> 
> 赞同：0
> 
> 时间：2013-02-11T17:47:23.317
> 
> 标签：symfony, knppaginator

我正在创建一个修改 KnpPaginatorBundle 查询的表单，以显示过滤后的分页结果。

要做到这一点。当表单有效时，我使用所需字段构建查询字符串（连接）以进行过滤。我使用自定义查询设置了 $filteredDql 变量。问题是它的价值只保留在第一页。当我更改页面时，它变为 NULL。并且分页重置...

我认为，问题可能是我在块上下文中设置了 $filteredDql 变量（仅当表单有效时）。

如何为整个操作或应用程序范围设置 $filteredDql 变量？也许使用参数？我尝试使用控制器中的容器但未成功使用：

```
$this->container->setParameter('key', value);
$this->container->getParameter('key');
$this->container->HasParameter('key'); 
```

但这样我得到**500 Internal Server Error**

这是代码：

```
public function indexAction(Request $request, $page)
{
    $filters = new Filters();

    $form = $this->createForm(new FiltersType(), $filters);

    $dql = "SELECT a FROM ViciousAmateurBundle:Post a WHERE a.is_active = true";

    if ($request->isMethod('POST')) {
        $form->bind($request);

        if ($form->isValid()) {
            $country = $filters->getCountry();
            $city = $filters->getCity();
            $gender = $filters->getGender();
            $sexualOrientation = $filters->getSexualOrientation();

            if (isset($country)) {
                $dql .= " AND a.country = '" . $filters->getCountry() . "'";
            }
            if (isset($city)) {
                $dql .= " AND a.city = '" . $filters->getCity() . "'";
            }
            if (isset($gender)) {
                $dql .= " AND a.gender = '" . $filters->getGender() . "'";
            }
            if (isset($sexualOrientation)) {
                $dql .= " AND a.sexual_orientation = '" . $filters->getSexualOrientation() . "'";
            }
            $filteredDql = $dql;
        }
    }

    $em = $this->get('doctrine.orm.entity_manager');

    if (isset($filteredDql)) {
        $query = $em->createQuery($filteredDql);
    } else {
        $query = $em->createQuery($dql);
    }

    $paginator = $this->get('knp_paginator');
    $pagination = $paginator->paginate(
        $query,
        $this->get('request')->query->get('page', $page),
        5
    );

    return $this->render('ViciousAmateurBundle:Default:index.html.twig', array(
        'form' => $form->createView(),
        'pagination' => $pagination
        )
    );
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-13T12:27:11.173

最后使用会话变量来存储当前过滤器来解决它。会话是应用程序范围的或无状态的。我对这种方法很满意：D

虽然，遗憾的是，当数据来自表单验证时，KnpPaginatorBundle 无法记住自定义查询“过滤器”（WHERE，GROUP BY，...），默认情况下通过分页：S 并且只是通过使用可排序函数来支持它来建立链接以 asc 或 desc 排序，这是一种耻辱......

这是代码：

```
/**
 * @Route("/{page}", defaults={"page" = 1}, name="homepage")
 * @Route("/")
 * @Template()
 */
public function indexAction(Request $request, $page)
{
    $filters = new Filters();

    $form = $this->createForm(new FiltersType(), $filters);

    $session = $this->getRequest()->getSession();

    if ($session->get('dql') == null) {
        $session->set('dql', "SELECT a FROM ViciousAmateurBundle:Post a WHERE a.is_active = true");
    }

    if ($request->isMethod('POST')) {
        $form->bind($request);

        if ($form->isValid()) {
            $dql = "SELECT a FROM ViciousAmateurBundle:Post a WHERE a.is_active = true";
            $country = $filters->getCountry();
            $city = $filters->getCity();
            $gender = $filters->getGender();
            $sexualOrientation = $filters->getSexualOrientation();

            if (isset($country)) {
                $dql .= " AND a.country = '" . $filters->getCountry() . "'";
            }
            if (isset($city)) {
                $dql .= " AND a.city = '" . $filters->getCity() . "'";
            }
            if (isset($gender)) {
                $dql .= " AND a.gender = '" . $filters->getGender() . "'";
            }
            if (isset($sexualOrientation)) {
                $dql .= " AND a.sexual_orientation = '" . $filters->getSexualOrientation() . "'";
            }

            $session->set('dql', $dql);
        }
    }

    $em = $this->get('doctrine.orm.entity_manager');

    $query = $em->createQuery($session->get('dql'));

    $paginator = $this->get('knp_paginator');
    $pagination = $paginator->paginate(
        $query,
        $this->get('request')->query->get('page', $page),
        5
    );

    return $this->render('ViciousAmateurBundle:Default:index.html.twig', array(
        'form' => $form->createView(),
        'pagination' => $pagination
        )
    );
} 
```

# python - 在 Django 中，如何将 manage.py 测试的结果放入文件中？

> ID：14817818
> 
> 赞同：2
> 
> 时间：2013-02-11T17:47:25.803
> 
> 标签：python, django, unit-testing

如何将 manage.py test 的结果打印到文件中？我试过了：

```
manage.py test > test.log 
```

但由于某种原因，这只会填充文件

```
Creating test database for alias 'default'...
Destroying test database for alias 'default'... 
```

并没有给我的一部分

```
........
----------------------
Ran 8 tests in 0.148s 
```

这就是我想要的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T17:52:30.340

`stdout`原因是和之间的差异`stderr`。在您的示例中，您仅重定向了`stdout`. 要重定向两者，您可以在现代 shell 中使用它：

```
./manage.py test &> test.log 
```

或者在较旧的 shell 中，您可以使用：

```
./manage.py test > test.log 2> test.log 
```

# ios - 网站图片到 UIImageView

> ID：14817820
> 
> 赞同：1
> 
> 时间：2013-02-11T17:47:32.057
> 
> 标签：ios, objective-c, xcode, uiimageview, uilabel

我是 Xcode 的新手，所以请耐心等待。

我想从网站（不仅仅是图片的 URL）中获取图片和文本并将其连接到 UIImageWiev。例如：这是一个 ebay 项目的 URL：

[http://www.ebay.com/itm/Apple-iPod-touch-4th-Generation-Black-8-GB-ipod-4-/300858009687?pt=Other_MP3_Players&hash=item460c88e857](http://www.ebay.com/itm/Apple-iPod-touch-4th-Generation-Black-8-GB-ipod-4-/300858009687?pt=Other_MP3_Players&hash=item460c88e857)

假设我想拍摄显示该项目的图片并将其添加到 UIImageView，并获取标题（Apple iPod touch 第 4 代黑色 (8 GB) ipod 4）并将其添加到标签。我该怎么做？

图片的 URL 可以在页面的源代码中找到，但我不知道如何访问它并仅提取图片的 URL。

我希望能够对任何 ebay 项目执行此操作。

希望你能理解我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T18:11:07.977

```
NSURL *url = [NSURL URLWithString:@"http://img.abc.com/noPhoto4530.gif"];
NSData *data = [NSData dataWithContentsOfURL:url];
UIImage *image = [UIImage imageWithData:data];
UIImageView *imageView = [[UIImageView alloc] initWithImage:image]; 
```

# java - Collections.binarySearch 不工作

> ID：14817821
> 
> 赞同：0
> 
> 时间：2013-02-11T17:47:35.610
> 
> 标签：java, collections, binary-search, comparable

我必须制作一个预测文本程序，其中一种方法是使用 ArrayList 和方法 Collections.binarySearch。有人告诉我们，我们必须使用类似的方法将字典中的所有单词及其相应的数字签名添加到 ArrayList 中，即：-

```
public class WordSig implements Comparable<WordSig> {
private String word;
private String signature;

public WordSig(String word){
    this.word = word;
    this.signature = ListDictionary.wordToSignature(word);  
}

public String getSignature(){
    return signature;
}

public String toString() {
    return signature + ", " + word;
}

@Override
public int compareTo(WordSig ws){

    return signature.compareTo(((WordSig)ws).signature);

}

} 
```

这样做之后，我对我的方法进行了排序，然后实现了一个名为 signatureToWords 的方法，该方法采用给定的数字签名并尝试找到找到该签名的索引，但它一直返回 -1。signatureToWords 方法如下所示：-

```
public static Set<String> signatureToWords(String signature) {

    int index = Collections.binarySearch(listOfDictionary, 
            new WordSig(signature));

    System.out.println(index);
    return null;

} 
```

你能在我的代码中看到什么错误吗？我真的很感激帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T17:56:09.343

我不会为你做作业，但请确保你没有混淆单词和签名；）

# java - json 到 java 对象（使用映射）？

> ID：14817825
> 
> 赞同：0
> 
> 时间：2013-02-11T17:48:13.957
> 
> 标签：java, json, object-object-mapping

```
 ObjectMapper mapper=new ObjectMapper();
 String response1=client.execute(request1, responseHandler);
 Map jsonObject=mapper.readValue(response1, Map.class);
 jsonObject.get("docs"); 
```

我从字符串名称 response1 中的 url 获取 json 字符串并尝试映射它。我的 response1 字符串如下所示。

```
{"response":
 {"numFound":5,
  "start":0,
  "docs":[
   {"id":1},
   {"id":2},
   {"id":3},
   {"id":4},
   {"id":5}
   ]
  }
 } 
```

从这个字符串我想制作所有ID的数组。我怎样才能做到这一点？我很想做 jsonObject.get("docs") 但它什么也没做，它说（没有明确的返回值）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T18:09:17.820

**编辑**
使用我的 GSON 示例中的数据模型。现在你可以这样做：

```
String response = "{\"response\":{\"numFound\":5,\"start\":0,\"docs\":[{\"id\":1},{\"id\":2},{\"id\":3},{\"id\":4},{\"id\":5}]}}";
ObjectMapper mapper = new ObjectMapper();
ObjectReader objectReader = mapper.reader(Body.class);
Body body = (Body) objectReader.readValue(response);
System.out.println(body.getResponse().getDocs()); 
```

**GSON 示例**
您应该使用[GSON](http://code.google.com/p/google-gson/)到 JSON 解析。创建可帮助您使用“响应”字符串的数据模型。看我的例子：

```
import java.util.Arrays;
import java.util.List;

import com.google.gson.Gson;
import com.google.gson.GsonBuilder;

public class SourceCodeProgram {

    public static void main(String[] args) throws Exception {
        String response = "{\"response\":{\"numFound\":5,\"start\":0,\"docs\":[{\"id\":1},{\"id\":2},{\"id\":3},{\"id\":4},{\"id\":5}]}}";
        Gson gson = new GsonBuilder().serializeNulls().create();

        System.out.println("To JSON");
        System.out.println(gson.toJson(createTestBody()));
        System.out.println("From JSON");
        System.out.println(gson.fromJson(response, Body.class));
    }

    private static Body createTestBody() {
        Response response = new Response();
        response.setNumFound(5);
        response.setStart(0);
        response.setDocs(Arrays.asList(new Doc(1), new Doc(2), new Doc(3),
                new Doc(4), new Doc(5)));

        Body body = new Body();
        body.setResponse(response);
        return body;
    }
}

class Body {

    private Response response;

    public Response getResponse() {
        return response;
    }

    public void setResponse(Response response) {
        this.response = response;
    }

    @Override
    public String toString() {
        return "Body [response=" + response + "]";
    }
}

class Response {

    private int numFound;
    private int start;
    private List<Doc> docs;

    public int getNumFound() {
        return numFound;
    }

    public void setNumFound(int numFound) {
        this.numFound = numFound;
    }

    public int getStart() {
        return start;
    }

    public void setStart(int start) {
        this.start = start;
    }

    public List<Doc> getDocs() {
        return docs;
    }

    public void setDocs(List<Doc> docs) {
        this.docs = docs;
    }

    @Override
    public String toString() {
        return "Response [numFound=" + numFound + ", start=" + start
                + ", docs=" + docs + "]";
    }
}

class Doc {

    private int id;

    public Doc() {
    }

    public Doc(int id) {
        this.id = id;
    }

    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    @Override
    public String toString() {
        return Integer.toString(id);
    }
} 
```

输出：

```
To JSON
{"response":{"numFound":5,"start":0,"docs":[{"id":1},{"id":2},{"id":3},{"id":4},{"id":5}]}}
From JSON
Body [response=Response [numFound=5, start=0, docs=[1, 2, 3, 4, 5]]] 
```

您可以通过以下方式检索“文档”：

```
Body body = gson.fromJson(response, Body.class);
System.out.println(body.getResponse().getDocs()); 
```

# javascript - 对象与其原型之间的区别

> ID：14817826
> 
> 赞同：0
> 
> 时间：2013-02-11T17:48:16.100
> 
> 标签：javascript, object, prototype

为什么：

```
console.log(Object.hasOwnProperty("hasOwnProperty")); 
```

返回一个错误，但是：

```
console.log(Object.prototype.hasOwnProperty("hasOwnProperty")); 
```

返回一个真实的陈述？

我意识到 hasOwnProperty 是 Object 中的预构建方法，但我想我的问题是 Object 和 Object 的原型之间有什么区别。
他们不是一回事吗？
当我们在第一行代码中引用 Object 时，我们不是在上面第二行代码中引用同一行代码吗？

**编辑：固定以上两行代码：**

```
console.log(Object.hasOwnProperty); 
```

**和：**

```
console.log(Object.prototype.hasOwnProperty); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:53:03.160

两者都`Object.hasOwnProperty`引用`Object.prototype.hasOwnProperty`相同的*函数*。`Object.prototype`包含该函数作为*自己的*属性，而`Object`包含它作为*继承*的属性。

因此，换句话说，函数是在对象`hasOwnProperty`上定义的（作为方法） 。`Object.prototype`然后，`Object`构造函数（与几乎所有其他本地对象一样）从`Object.prototype`.

顺便说一句，继承链（原型链）`Object`是：

```
Object -> Function.prototype -> Object.prototype -> null 
```

因此，`Object`继承了`Function.prototype`, 和的所有方法`Object.prototype`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T17:55:07.080

> 我意识到 hasOwnProperty 是 Object 中的预构建方法。

*实际上，它是所有*JavaScript 对象都继承自该对象的不可枚举属性的函数。这包括`Object`函数对象。

> 但我想我的问题是对象和对象的原型有什么区别。他们不是一回事吗？

No, they're definitely not. The [section on Objects](http://es5.github.com/#x4.2.1) in the *Language Overview* of the EcmaScript specification describes it pretty well I think. Each object has a hidden *[[prototype]]* link to the object it inherits from (until `null`) - building the "prototype chain" in which properties are looked up. The public `prototype` property of functions is different from that - it points to the object from which all instances that are constructed by the function will inherit.

# eclipse - 上传/与开发服务器同步

> ID：14817832
> 
> 赞同：1
> 
> 时间：2013-02-11T17:48:33.247
> 
> 标签：eclipse, sync, development-environment

我正在使用 eclipse 在 Windows 机器上工作，我想自动上传与我的虚拟服务器同步更改的文件（使用 linux）。我使用了 unison，但每次更改都必须输入密码很乏味。

你会使用什么工具？

# wordpress - Wordpress - 将图标添加到可视化编辑器工具栏

> ID：14817834
> 
> 赞同：1
> 
> 时间：2013-02-11T17:48:37.567
> 
> 标签：wordpress

当我在 wordpress 中设置新页面时，我可以在 html 和可视化编辑器之间切换。如何更改可视化编辑器工具栏中显示的图标/功能？我想编写一个插件，为可视化编辑器工具栏添加功能......我不是指媒体内容的“上传/插入”工具栏，我指的是“上传/插入”工具栏之外的工具栏......

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T23:25:38.250

您正在寻找[**`TinyMCE`**](http://codex.wordpress.org/TinyMCE)：

> [WordPress 与Moxiecode Systems, AB](http://moxiecode.com/)的开源 HTML WYSIWYG 编辑器[TinyMCE](http://tinymce.moxiecode.com/)捆绑在一起。

* * *

使用此插件，您可以重新排列、添加和删除按钮：

> ### [TinyMCE 高级](http://wordpress.org/extend/plugins/tinymce-advanced/)
> 
> 启用 WordPress 所见即所得编辑器 TinyMCE 的高级功能。

* * *

在这个 WordPress Answers Q&A 中，你会发现如何自己做：

> ### [如何向 TinyMCE 编辑器添加简码按钮？](https://wordpress.stackexchange.com/q/72394/12615)
> 
> 要将我们的按钮添加到 TinyMCE 编辑器，我们需要做几件事：
> 
> 1.  将我们的按钮添加到工具栏
> 2.  注册一个 TinyMCE 插件
> 3.  创建 TinyMCE 插件，它告诉 TinyMCE 在我们的按钮被点击时要做什么。

# c# - Java建议自动完成？

> ID：14817836
> 
> 赞同：-4
> 
> 时间：2013-02-11T17:48:50.133
> 
> 标签：c#, java, swing

我正在用java开发一个应用程序，我在c#中看到了windows表单中的自动完成建议，这正是我所需要的。java中是否有任何等价物？类似这样。 ![时间：2019-04-10 标签：c#autocompleteSuggestimage](../Images/5f2f1b43b1882118bc44f3a08e727826.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:51:52.580

我认为您的问题的答案在另一个 Stack Overflow 线程中：[如何使用 Swing 实现自动完成？](https://stackoverflow.com/questions/485530/how-could-i-implement-autocompletion-using-swing)

请注意，被接受为答案的答案没有得到那么多的选票：

> 您可能想在 SwingLabs 试用免费的 AutoComplete 组件。
> 
> [http://swinglabs.org](http://swinglabs.org)
> 
> 有一个示例如何在以下位置实现此代码：
> 
> [http://javadesktop.org/swinglabs/build/weekly/latest/swingx-HEAD/javadoc/org/jdesktop/swingx/autocomplete/package-summary.html](http://javadesktop.org/swinglabs/build/weekly/latest/swingx-HEAD/javadoc/org/jdesktop/swingx/autocomplete/package-summary.html)

# java - @implicit Lang 在升级到 2.1.0 后无法在模板中工作

> ID：14817838
> 
> 赞同：0
> 
> 时间：2013-02-11T17:48:55.990
> 
> 标签：java, playframework-2.0

这在 play 2.0.2 中对我有用，但是在升级到 2.1.0 后，我得到了默认语言的所有字符串：

```
@(licenseRequestForm: Form[LicenseRequest], generatedLicense: nl.avisi.langur.license.License, lang: String)
@implicitLang = @{ new Lang(lang) }

<h2>@Messages("license.form.title")</h2> 
```

知道为什么在 2.1.0 版中没有使用implicitLang 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T08:25:14.320

这似乎是一种回归。

唯一的临时解决方法是将 lang 显式传递给 Messages，即`<h2>@Messages("license.form.title")(implicitLang)</h2>`.

# java - 如何进行此 Java (Android) 字符串替换？

> ID：14817839
> 
> 赞同：2
> 
> 时间：2013-02-11T17:49:01.560
> 
> 标签：java, android, string, substitution, string-substitution

我不明白为什么这不起作用：（方法取自[HERE](https://stackoverflow.com/questions/3758606/how-to-convert-byte-size-into-human-readable-format-in-java) on SO）。

```
private String MakeSizeHumanReadable(int bytes, boolean si) {
    int unit = si ? 1000 : 1024;
    if (bytes < unit) return bytes + " B";
    int exp = (int) (Math.log(bytes) / Math.log(unit));
    String pre = (si ? "kMGTPE" : "KMGTPE").charAt(exp-1) + (si ? "" : "i");
    String hr = String.format("%.1f %sB", bytes / Math.pow(unit, exp), pre);
    hr = hr.replace("-1 B", "n.a.");
    return hr;
} 
```

也不是这个：-

```
private String MakeSizeHumanReadable(int bytes, boolean si) {
    int unit = si ? 1000 : 1024;
    if (bytes < unit) return bytes + " B";
    int exp = (int) (Math.log(bytes) / Math.log(unit));
    String pre = (si ? "kMGTPE" : "KMGTPE").charAt(exp-1) + (si ? "" : "i");
    String hr = String.format("%.1f %sB", bytes / Math.pow(unit, exp), pre);

    Pattern minusPattern = Pattern.compile("-1 B");
    Matcher minusMatcher = minusPattern.matcher(hr);
    if (minusMatcher.find()) {
        return "n.a.";
    } else {
        return hr;
    }
} 
```

我不时`-1 B`从请求中得到（这是正常的），这永远不会改变`n.a.`（....我的问题）。

有人有想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T18:22:14.477

这是你的问题：

```
if (bytes < unit) return bytes + " B"; 
```

当`bytes`等于 -1（在任何一种情况下都小于`unit`）时，它会返回`-1 B`而不会到达 line `hr = hr.replace("-1 B", "n.a.");`。

最好`return`在末尾有一个语句，在 中赋值`String hr = bytes + " B"`，并在接下来的三行周围`if`添加一个块。`else`然后在该块之后，`hr.replace()`调用将以任一方式执行，然后返回值。

# c# - 如何引用引用类型字典键的属性？

> ID：14817847
> 
> 赞同：4
> 
> 时间：2013-02-11T17:49:22.067
> 
> 标签：c#, dictionary, key

我正在开发一个国际象棋引擎，我目前正在实施换位表（一组已经评估过的棋盘位置从过去的动作）。一般的想法是，当进行移动时，我会检查换位表中的匹配位置。如果存在，我会跳过代价高昂的评估过程，只从转置表中提取先前计算的结果。如果它不存在，我会进行所需的计算，然后将其添加到转置表中以供将来参考。

对我来说，这听起来像是哈希集或字典的工作。我决定用字典。我希望 key 是代表我的董事会的类，而 value 是遇到该位置的次数的 int 计数。计数的原因是能够检测到三次重复平局。如果相同的位置出现了 3 次或更多次，玩家可以选择平局。使用字典而不是哈希集，我可以通过将它与我的转置表结合起来，大大简化对三重重复绘制的检测。

为了做到这一点，我创建了代表棋盘状态的类覆盖 Equals() 和 GetHashCode()。它工作得很好，我现在能够跟踪游戏之前遇到的所有历史状态。

我的问题是我需要能够访问字典中关键对象的属性。我可以查看是否存在匹配项（通过使用 .ContainsKey(...) 方法和我的 Equals()/GetHashCode() 逻辑），但现在我需要提取前面提到的计算值（存储为我的板的公共属性状态对象）从键。

我能够想出：

```
BoardState board = TranspositionTable.Keys.FirstOrDefault(tt => tt.GetHashCode() == this.GetHashCode()); 
```

这行得通，但对我来说感觉很笨拙。转置表的重点是加速数百万个连续棋盘状态的递归搜索。为每个匹配查询字典听起来很违反直觉。有一个更好的方法吗？

编辑：

正如已经指出的那样，由于有效的棋盘状态数量巨大，我的哈希值并不完美。我的 Equals() 覆盖检查第二个替代生成的哈希以减少冲突的可能性。我上面的“解决方案”是有缺陷的，因为它依赖于不完美的哈希。我应该使用：

```
BoardState board = TranspositionTable.Keys.FirstOrDefault(tt => tt.Equals(this)); 
```

我的一个愚蠢的疏忽。不过，我不喜欢查询字典。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T17:57:54.950

一种选择是只保留对字典值中键的引用，以及字典的*实际*值，如下所示：

```
Dictionary<BoardState, Tuple<BoardState, int>> 
```

然后，每当您添加对象时，将与键相同的对象添加到值中：

```
Dictionary<BoardState, Tuple<BoardState, int>> boards = 
    new Dictionary<BoardState,Tuple<BoardState,int>>();
BoardState board = new BoardState();
boards.Add(board, Tuple.Create(board, 1)); 
```

另一种选择（这可能是更好的设计）是将您的电路板状态对象分解为两种不同的类型。有一个确实只代表板子的状态（这应该是不可变的），另一个包含有关该状态的其他信息，包括它发生的时间和可能适用于您的特定应用程序的任何其他*可变属性。*这将阻止您需要访问字典键。

# html - 带圆角和内部滚动条的 DIV

> ID：14817848
> 
> 赞同：14
> 
> 时间：2013-02-11T17:49:33.613
> 
> 标签：html, css

我正在尝试实现 DIV 具有内部滚动条和圆角的场景。我的第一次尝试导致了这个：

![在此处输入图像描述](../Images/b59c96620d92ea853720b5f88eb7bfc8.png)

由于滚动条，右边的角落变成了方形。

接下来，我添加了一个带有一些顶部和底部填充的内部 div，以便向下推动滚动条并保持计数的条数。结果是这样的：

![在此处输入图像描述](../Images/0fb26fc8713a0a2dc33056092ea14764.png)

我想要一个混合，其中滚动条是 div 的全长，但不要使角落变成正方形。这可能吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-11T18:30:15.823

您可以使用滚动条 ( )`border-radius`的周围容器 ( )。`scrollbar-track``scrollbar-thumb`

**例子：**

```
::-webkit-scrollbar {
    width: 12px;
}

::-webkit-scrollbar-track {
    -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3); 
    border-radius: 10px;
}

::-webkit-scrollbar-thumb {
    border-radius: 10px;
    -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.5); 
} 
```

**jsfiddle：http: [//jsfiddle.net/p2bWf/](http://jsfiddle.net/p2bWf/)**

**来源：[http ://css-tricks.com/custom-scrollbars-in-webkit/](http://css-tricks.com/custom-scrollbars-in-webkit/)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T18:04:17.350

您应该尝试自定义滚动条。在您的屏幕截图上，您使用的是 OS X 系统，但使用 IE (Windows) 会很糟糕。

看看[这个 stackoverflow 问题](https://stackoverflow.com/questions/9945547/how-to-create-a-custom-scrollbar-on-a-div)。

# javascript - 事件处理程序和函数

> ID：14817849
> 
> 赞同：0
> 
> 时间：2013-02-11T17:49:40.810
> 
> 标签：javascript, function, handler

我是 Javascript 编程的新手，事件处理程序和函数有什么区别？他们都一样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:52:21.427

函数是当“某人”调用它时将执行的代码块：

```
function functionname()
{
some code to be executed
}

function(); // calling the function 
```

事件是在发生某些事情时执行 JavaScript 的代码，例如按下按钮、将鼠标移到链接上、提交表单等。这些事件处理程序的基本语法是：

```
name_of_handler="JavaScript code here" 
```

例如：

```
<a href="http://google.com" onClick="alert('hello!')">Google</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T17:51:45.680

事件处理程序是在触发事件时调用的函数。所以基本上你的问题的答案是事件处理程序是函数有时会填补的角色。

```
ele.addEventListener("click",function(){/*This function is your event handler*/}, false); 
```

# vb.net - 每当他显示时，如何使表单运行代码

> ID：14817855
> 
> 赞同：0
> 
> 时间：2013-02-11T17:50:04.420
> 
> 标签：vb.net, vb.net-2010

我有一个包含控件的表单，我们称之为 form `Form1`。控件在`Form1`加载时生成。每当我按下一个控件时，它都会引导我进入另一个表单，`Form2`并**隐藏** `Form1`这个简单的代码，该代码位于`Form1`

```
 Me.hide() 
   Form2.show() 
```

Form2 包含一些控件。其中之一是允许用户删除记录的控件。每当用户使用以下代码删除记录、`Form2`关闭并出现时：`Form1`

```
 'Deletes record here
    Me.close() 
    Form1.Show() 
```

问题是，我删除的项目`Form2`仍然出现，`Form1`直到我关闭`Form1`并再次运行它。

问题是，我不想关闭，`Form1`因为`Form1`关闭时，它会做另一件事。

填充的函数`Form1`称为`Initialize()`. 每当我这样做时，如何使此功能运行`Form1.show()`？我尝试将此功能放在**显示**的事件中`Form1`，但没有帮助。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T18:11:19.393

I have found a solution!

In order to run a code to be executed whenever you do `Form1.show()` just place the code you want to execute in the **VisibleChanged** event.

Hope it will help others!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T17:57:00.987

如果您需要`Form1`使用对 所做更改的更新数据进行刷新`Form2`，请尝试重新查询`Form1`的数据源。不过，实际上，我认为您应该有一个包含实例的外部进程，`Form1`而`Form2`不是使用全局实例。

如果您想在`initialize`before 再次调用 () `Form1.show`，您可以，但请考虑将代码从该 sub 中取出并放入您自己的自定义 sub 中，然后从`initialize`() 和 before中调用它`form1.show`。假设你调用了你的图片加载子`loadPics`（）。你会`loadpics`在 () 内部`initialize`和之前调用 () `Form1.show`。

# c++ - C++ 隐式数据类型从无符号到有符号的转换

> ID：14817857
> 
> 赞同：3
> 
> 时间：2013-02-11T17:50:06.473
> 
> 标签：c++, types

我知道较低的数据类型会转换为较高的数据类型（例如 int -> unsigned int -> float -> 等），但我不确定以下内容：

```
int var = 5u - 10; // var = -5
auto var = 5u - 10; // var = 4294967291 
```

5u 是无符号的，但在第一种情况下，为什么 -10 （有符号整数）不转换为无符号值，而在第二种情况下呢？在第一种情况下，有符号值不会转换为无符号值，这对我来说很奇怪

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T18:24:25.577

没有“有符号整数文字”：`5u - 10`实际上是从 5u 中减去 10。

（减法）的结果是无符号的，并且会溢出，结果是“比溢出的 0 少 5 个数字”（4294967291 = 2 ^(32) -5）

第一条语句初始化 a `int`，因此无符号编译时间常数被重新解释为 int。结果是正确的 (-5)，因为您的硬件使用 2s 补码算法。（-5 和 4294967291 是相同的 32 位模式）

第二条语句初始化一个变量，其类型由文字推断。它是`unsigned`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T18:30:21.067

*您的两个*示例的右侧都完全在*无符号*类型的域中工作。即您的两个表达式的`5u - 10`行为相同，这并不奇怪，因为它们是相同的。在任何一种情况下，表达式中都没有转换为`int`（您似乎错误地假设） 。`5u - 10`

表达式`5u - 10`总是在无符号类型的域中计算并产生等于的无符号结果`UINT_MAX + 1 - 5`。在第一次初始化中，您尝试将该值强制转换为 type 的变量`int`，这会导致实现定义的行为溢出。在您的情况下，您的实现表现得如此`var`获得了 value `-5`。换句话说，您最终得到的事实`-5`在`var`抽象 C++ 语言领域没有明确的解释。您观察到的结果只是编译器的一个怪癖。在其他一些编译器中，第一次初始化可能会在`var`.

在第二种情况下，表达式的类型（也就是`unsigned`）变成了变量的类型，变量用无符号值初始化，没有任何溢出。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T18:22:37.327

首先，因为您使用`auto`，编译器将`unsigned`在您的第二个示例中选择。

有符号和无符号数字在内部以相同的方式存储。这只是数字在打印时的解释方式会有所不同[在比较中，因为“负”有符号数字低于 0，其中无符号数字不能小于零] - 检查有符号数字如果它们是“负数”，则打印为减号和否定的原始数字。无符号数字仅被视为打印时内部表示的任何内容。

因此，您看到的值只是同一数字的两种不同表示形式——分别是有符号和无符号。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-11T18:31:53.640

在 C 和 C++ 中，在绝大多数情况下，表达式的类型由表达式本身决定，而不考虑它出现的上下文。

```
int var = 5u - 10; 
```

`5u`是类型`unsigned int`；`10`是类型`int`。`-`运算符的规则使`int`参数转换为`unsigned int`，使表达式等效于`5u - 10u`。结果是`UINT_MAX + 1 - 10`，一个非常大的数字。初始化隐式地将 this 从 转换`unsigned int`为`signed int`。由于该值（几乎可以肯定）不能表示为`int`，因此转换的结果是实现定义的。在几乎所有现有实现中，转换只是将无符号表示重新解释为有符号值，从而导致`-5`. （这适用于使用二进制补码表示负值的系统；有符号/无符号转换的简单性是二进制补码如此广泛使用的原因之一。）

请注意，不可能`var`拥有 value `4294967291`; an 可以在您的系统上保存的最大值`int`是（可能）`2147483647`。

```
auto var = 5u - 10; 
```

`5u - 10`以与以前相同的方式进行评估，导致, 或在您的系统上的`unsigned int`结果。采用表达式类型的均值，因此不执行转换。（在具有 16 位 的系统上，结果将是。）`UINT_MAX + 1 - 5``4294967291``auto``var``unsigned int``int``65531`

在回答您的问题时，在这两种情况下，常量`10` *都会*从转换`int`为`unsigned int`。

# http - 以安全的方式将新密码传递给 HTTP REST API 端点

> ID：14817862
> 
> 赞同：0
> 
> 时间：2013-02-11T17:50:31.797
> 
> 标签：http, rest, password-protection

我有一个应用程序，它有一个由 WCF 开发的 REST API。它工作得很好。它使用 http 基本身份验证来对用户进行身份验证，并使用 https 来保护数据传输。

现在我应该开发一个 API 功能，可以更改用户的密码。我害怕通过 URI 传递新密码，我觉得它不安全。

那么，将新密码传递给 API 端点的安全选项是什么？它有一些“标准”方式吗？还是在 URI 中传递它是安全的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T17:58:28.137

我建议您阅读[有关](https://stackoverflow.com/questions/198462/is-either-get-or-post-more-secure-than-the-other)POST 与 GET 的安全性的问题。但是，如果您希望它是安全的，请确保一切都通过 HTTPS（基本身份验证和更改密码的请求）。

# javascript - JavaScript：For-Loop 不运行？

> ID：14817863
> 
> 赞同：0
> 
> 时间：2013-02-11T17:50:31.677
> 
> 标签：javascript, for-loop

为什么for循环不运行？

*   错误控制台为空
*   该函数`countfiles`返回一个整数
*   `parseInt(countfiles())`也不行

这是我的代码：

```
function set_default_value() {
    var element = document.getElementsByName('fields');
    for (var i = countfields(); i < element.length; ++i) {
        element[i].value = "default";
    }
} 
```

为什么不运行？

**编辑：**

*   Countfields 小于 element.length
*   函数正在运行
*   Countfield 返回一个数字，例如 0, 1, 2, 3, ...

这是功能`countfields`

```
function countfields() {
    var field_counter = 0;
    for (var i = 0; i < 50; i++) {
        if (typeof document.getElementsByName('other_fields')[i] != "undefined") {
        var field_counter = field_counter + 1; 
        }
    }
    return field_counter; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T18:21:49.760

@varunachar 在他的一条评论中谈到了这个问题：

> [countfields 返回的数字可能大于 element.length](https://stackoverflow.com/questions/14817863/javascript-for-loop-does-not-run#comment20757041_14817863)

在这一行：

```
for (var i = countfields(); i < element.length; ++i) 
```

将此读`i < element.length`作*“只要`i`小于`element.length`，就做事”*。或者，如果`countfields()`等于或大于，则什么也不会发生。

1 `other_fields`：http : [//jsfiddle.net/D5ZHV/](http://jsfiddle.net/D5ZHV/)有效
6 `other_fields`：**http :** [//jsfiddle.net/Ay6BN/](http://jsfiddle.net/Ay6BN/)无效

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T18:05:23.737

改变

```
 var field_counter = field_counter + 1; 
```

到

```
 field_counter = field_counter + 1; 
```

在`countfields()`功能上。您`field_counter`在 for 循环中声明这是错误的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T18:08:36.370

```
function countfields() {
    var field_counter = 0;
    for(var i = 0; i < 50; i++) {
        if(typeof document.getElementsByName('other_fields')[i] != "undefined") {
        var field_counter = field_counter + 1; } }
    return field_counter; } 
```

var 总是定义变量的范围。在`var field_counter`if 语句内部将创建一个在 if 语句内具有作用域的变量。

你应该写成

```
field_counter = field_counter + 1; 
```

如果你测试你的 countfields() 它应该总是返回 0；

也尝试做`console.log(elements)`**

# .net - ORing LINQ 查询，使用表达式树构建

> ID：14817865
> 
> 赞同：3
> 
> 时间：2013-02-11T17:50:39.147
> 
> 标签：.net, linq, expression-trees

所以，这相当复杂。

我在一个集合中有一组规则，一个规则包含这三个属性。

```
Field, Op, and Data (all strings) 
```

所以规则可能看起来像“State”、“eq”、“CA”

我的一般规则是所有规则都被 AND 在一起。但是，需要注意的是，如果它们具有相同的 Field 值，则它们都是 ORed。这允许我们说“State”、“eq”、“CA”、或“State”、“eq”、“TX”和“FirstName”、“eq”、“John”。

问题是我当前应用规则的方式行不通，因为它只是使用每个规则不断构建 linq 表达式以使其越来越明确。

```
var result = rules.Aggregate(_repository.All, (current, rule) => current.ExtendQuery(rule)) 
```

`ExtendQuery`是我写的一个扩展方法，它使用 ExpressionTrees，生成一个新的查询，将当前规则应用于传入的查询。（有效地将它们全部放在一起）

现在我不难修改`.Aggregate`行以按字段对规则进行分组，然后为每个字段生成一个唯一的查询，但是我如何将它们“或”在一起而不是“与”？

然后对于这些查询中的每一个，我将如何将它们“与”在一起？联盟？

ExtendQuery 看起来像这样

```
 public static IQueryable<T> ExtendQuery<T>(this IQueryable<T> query, QueryableRequestMessage.WhereClause.Rule rule) where T : class
    {
        var parameter = Expression.Parameter(typeof(T), "x");
        Expression property = Expression.Property(parameter, rule.Field);
        var type = property.Type;

        ConstantExpression constant;
        if (type.IsEnum)
        {
            var enumeration = Enum.Parse(type, rule.Data);
            var intValue = (int)enumeration;
            constant = Expression.Constant(intValue);
            type = typeof(int);
            //Add "Id" by convention, this is all because enum support is lacking at this point in Entity Framework
            property = Expression.Property(parameter, rule.Field + "Id");
        }
        else if(type == typeof(DateTime))
        {
            constant = Expression.Constant(DateTime.ParseExact(rule.Data, "dd/MM/yyyy", CultureInfo.CurrentCulture));
        }
        else if (type.IsGenericType && type.GetGenericTypeDefinition() == typeof(Nullable<>))
        {
            //This will convert rule.Data to the baseType, not a nullable type (because that won't work)
            var converter = TypeDescriptor.GetConverter(type);
            var value = converter.ConvertFrom(rule.Data);
            constant = Expression.Constant(value);

            //We change the type of property to get converted to it's base type
            //This is because Expression.GreaterThanOrEqual can't compare a decimal with a Nullable<decimal>
            var baseType = type.GetTypeOfNullable();
            property = Expression.Convert(property, baseType);
        }
        else
        {
            constant = Expression.Constant(Convert.ChangeType(rule.Data, type));
        }

        switch (rule.Op)
        {
            case "eq": //Equals
            case "ne": //NotEquals
                {
                    var condition = rule.Op.Equals("eq")
                                        ? Expression.Equal(property, constant)
                                        : Expression.NotEqual(property, constant);
                    var lambda = Expression.Lambda(condition, parameter);
                    var call = Expression.Call(typeof(Queryable), "Where", new[] { query.ElementType }, query.Expression, lambda);
                    query = query.Provider.CreateQuery<T>(call);
                    break;
                }
            case "lt": //Less Than
                    query = type == typeof (String) 
                        ? QueryExpressionString(query, Expression.LessThan, type, property, constant, parameter)
                        : QueryExpression(query, Expression.LessThan, property, constant, parameter); break;
            case "le": //Less Than or Equal To
                query = type == typeof (String)
                        ? QueryExpressionString(query, Expression.LessThanOrEqual, type, property, constant, parameter)
                        : QueryExpression(query, Expression.LessThanOrEqual, property, constant, parameter); break;
            case "gt": //Greater Than
                query = type == typeof (String)
                        ? QueryExpressionString(query, Expression.GreaterThan, type, property, constant, parameter)
                        : QueryExpression(query, Expression.GreaterThan, property, constant, parameter); break;
            case "ge": //Greater Than or Equal To 
                query = type == typeof (String)
                        ? QueryExpressionString(query, Expression.GreaterThanOrEqual, type, property, constant, parameter)
                        : QueryExpression(query, Expression.GreaterThanOrEqual, property, constant, parameter); break;
            case "bw": //Begins With
            case "bn": //Does Not Begin With
                query = QueryMethod(query, rule, type, "StartsWith", property, constant, "bw", parameter); break;
            case "ew": //Ends With
            case "en": //Does Not End With
                query = QueryMethod(query, rule, type, "EndsWith", property, constant, "cn", parameter); break;
            case "cn": //Contains
            case "nc": //Does Not Contain
                query = QueryMethod(query, rule, type, "Contains", property, constant, "cn", parameter); break;
            case "nu": //TODO: Null
            case "nn": //TODO: Not Null
                break;
        }

        return query;
    }

    private static IQueryable<T> QueryExpression<T>(
        IQueryable<T> query,
        Func<Expression, Expression, BinaryExpression> expression,
        Expression property,
        Expression value,
        ParameterExpression parameter
    ) where T : class
    {
        var condition = expression(property, value);
        var lambda = Expression.Lambda(condition, parameter);
        var call = Expression.Call(typeof(Queryable), "Where", new[] { query.ElementType }, query.Expression, lambda);
        query = query.Provider.CreateQuery<T>(call);
        return query;
    }

    private static IQueryable<T> QueryExpressionString<T>(
        IQueryable<T> query,
        Func<Expression, Expression, BinaryExpression> expression,
        Type type, 
        Expression property, 
        Expression value, 
        ParameterExpression parameter)
    {
        var containsmethod = type.GetMethod("CompareTo", new[] { type });
        var callContains = Expression.Call(property, containsmethod, value);
        var call = expression(callContains, Expression.Constant(0, typeof(int)));
        return query.Where(Expression.Lambda<Func<T, bool>>(call, parameter));
    }

    private static IQueryable<T> QueryMethod<T>(
        IQueryable<T> query,
        QueryableRequestMessage.WhereClause.Rule rule,
        Type type,
        string methodName,
        Expression property,
        Expression value,
        string op,
        ParameterExpression parameter
    ) where T : class
    {
        var containsmethod = type.GetMethod(methodName, new[] { type });
        var call = Expression.Call(property, containsmethod, value);
        var expression = rule.Op.Equals(op)
                             ? Expression.Lambda<Func<T, bool>>(call, parameter)
                             : Expression.Lambda<Func<T, bool>>(Expression.IsFalse(call), parameter);
        query = query.Where(expression);
        return query;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T19:18:16.753

您可以使用[`PredicateBuilder`LINQKit](http://www.albahari.com/nutshell/predicatebuilder.aspx)来执行此操作。如果`Expression`为每个规则创建一个，则可以使用`And()`and`Or()`方法来组合它们（可能使用`PredicateBuilder.True()`and`False()`作为基本案例）。最后，调用`Expand()`，以便查询采用您的查询提供者可以理解的形式。

假设您更改`ExtendQuery()`为 return an`Expression`并将其重命名为`CreateRuleQuery()`，您的代码可能如下所示：

```
static IQueryable<T> ApplyRules<T>(
    this IQueryable<T> source, IEnumerable<Rule> rules)
{
    var predicate = PredicateBuilder.True<T>();

    var groups = rules.GroupBy(r => r.Field);

    foreach (var group in groups)
    {
        var groupPredicate = PredicateBuilder.False<T>();

        foreach (var rule in group)
        {
            groupPredicate = groupPredicate.Or(CreateRuleQuery(rule));
        }

        predicate = predicate.And(groupPredicate);
    }

    return source.Where(predicate.Expand());
} 
```

用法类似于：

```
IQueryable<Person> source = …;

IQueryable<Person> result = source.ApplyRules(rules); 
```

如果您在这些规则上使用它：

```
Name, eq, Peter
Name, eq, Paul
Age, ge, 18 
```

然后谓词的主体将是（来自谓词的调试视图）：

```
True && (False || $f.Name == "Peter" || $f.Name == "Paul") && (False || $f.Age >= 18) 
```

所有这些`True`s 和s 不应该是一个问题，但你可以通过稍微复杂一些`False`来摆脱它们。`ApplyRules()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T19:40:13.940

所以实际上很容易。

现在，您的代码会为每个规则生成一个 where，而您需要的是一个条件有点复杂的 where，因此需要对代码进行一些修改：

```
private static Expression GetComparisonExpression(this Rule rule, ParameterExpression parameter)
    {
        Expression property = Expression.Property(parameter, rule.Field);
        ConstantExpression constant = Expression.Constant(4);

        /* the code that generates constant and does some other stuff */

        switch (rule.Op)
        {
            case "eq": //Equals
            case "ne": //NotEquals
                {
                    var condition = rule.Op.Equals("eq")
                                        ? Expression.Equal(property, constant)
                                        : Expression.NotEqual(property, constant);
                    return condition;
                }

            default:
                throw new NotImplementedException();
        }
    } 
```

这是原始代码所需内容的片段。此方法不会包装查询，而只是在给定参数上生成比较表达式与您的`rule`.

现在从生成查询的语句开始：

```
 var result = rules.Generate(_repository.All); 
```

Generate 方法按属性名称对规则进行`Field`分组，并为每个组生成`and also`（这只是`&&`运算符）条件表达式：

```
(group1Comparision) && (group2Comparison) && so on

public static IQueryable<T> Generate<T>(this  IEnumerable<Rule> rules, IQueryable<T> query) where T : class
{
    if (rules.Count() == 0)
        return query;

    var groups = rules.GroupBy(x => x.Field).ToArray();

    var parameter = Expression.Parameter(typeof(T));
    var comparison = groups.First().GetComparisonForGroup(parameter);

    foreach (var group in groups.Skip(1))
    {
        var otherComparions = group.GetComparisonForGroup(parameter);
        comparison = Expression.AndAlso(comparison, otherComparions);
    }

    var lambda = Expression.Lambda(comparison, parameter);
    var call = Expression.Call(typeof(Queryable), "Where", new[] { query.ElementType }, query.Expression, lambda);
    return query.Provider.CreateQuery<T>(call);

} 
```

请注意，按属性名称分组会使规则的原始顺序无关紧要。

最后一件事是为组创建比较`||`操作符：

```
public static Expression GetComparisonForGroup(this IEnumerable<Rule> group, ParameterExpression parameter)
{
        var comparison = group.Select((rule) => rule.GetComparisonExpression(parameter)).ToArray();

        return comparison.Skip(1).Aggregate(comparison.First(),
            (left, right) => Expression.OrElse(left, right));
} 
```

因此，对于给定的规则列表，不需要外部库：

```
var rules = new Rule[]
            {
                new Rule{ Field = "A", Data = "4", Op="ne"},
                new Rule{ Field = "B", Data = "4", Op="eq"},
                new Rule{ Field = "A", Data = "4", Op="eq"},
                new Rule{ Field = "C", Data = "4", Op="ne"},
                new Rule{ Field = "A", Data = "4", Op="eq"},
                new Rule{ Field = "C", Data = "4", Op="eq"},
            }; 
```

我生成了这样的条件，该条件被引入到`Where`对您的查询的单次调用中：

```
($var1.A != 4 || $var1.A == 4 || $var1.A == 4) && $var1.B == 4 && ($var1.C != 4 || $var1.C == 4) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T20:09:15.960

避免需要的 LINQKit 的替代方法`.AsExpandable()`是我`ExpressionBuilder`下面的课程。它`Expression<Func<T,bool>>`通过使用 And 或 Or 组合两个来创建一个新的 Expression 并使用纯`Expression`代码（没有 .Compile() 或类似的代码）来完成它。 *我不记得其中一些想法的原始来源，但如果有人知道它们，我很乐意添加它们。*

```
using System;
using System.Linq;
using System.Linq.Expressions;
using System.Collections.Generic;

public static class ExpressionBuilder
{
    public static Expression<Func<T, bool>> True<T>() { return f => true; }
    public static Expression<Func<T, bool>> False<T>() { return f => false; }

    public static Expression<T> Compose<T>(this Expression<T> first, 
         Expression<T> second, 
         Func<Expression, Expression, Expression> merge)
    {
        // build parameter map (from parameters of second to parameters of first)
        var map = first.Parameters
                     .Select((f, i) => new { f, s = second.Parameters[i] })
                     .ToDictionary(p => p.s, p => p.f);

        // replace parameters in the second lambda expression with parameters from 
        // the first
        var secondBody = ParameterRebinder.ReplaceParameters(map, second.Body);

        // apply composition of lambda expression bodies to parameters from 
        // the first expression 
        return Expression.Lambda<T>(merge(first.Body, secondBody), first.Parameters);
    }

    public static Expression<Func<T, bool>> And<T>(
        this Expression<Func<T, bool>> first,
        Expression<Func<T, bool>> second)
    {
        return first.Compose(second, Expression.And);
    }

    public static Expression<Func<T, bool>> Or<T>(
        this Expression<Func<T, bool>> first,
        Expression<Func<T, bool>> second)
    {
        return first.Compose(second, Expression.Or);
    }

    public class ParameterRebinder : ExpressionVisitor
    {
        private readonly Dictionary<ParameterExpression, ParameterExpression> map;

        public ParameterRebinder(
            Dictionary<ParameterExpression, 
            ParameterExpression> map)
        {
            this.map = map??new Dictionary<ParameterExpression,ParameterExpression>();
        }

        public static Expression ReplaceParameters(
            Dictionary<ParameterExpression, 
            ParameterExpression> map, 
            Expression exp)
        {
            return new ParameterRebinder(map).Visit(exp);
        }

        protected override Expression VisitParameter(ParameterExpression p)
        {
            ParameterExpression replacement;
            if (map.TryGetValue(p, out replacement))
            {
                p = replacement;
            }
            return base.VisitParameter(p);
        }
    }
} 
```

# mysql - 如何更改选择语句中的列值

> ID：14817867
> 
> 赞同：3
> 
> 时间：2013-02-11T17:50:44.430
> 
> 标签：mysql, sql

我在 mysql 表中有一个选择，结果如下：

```
topic user weight  
"hello" 324  3  
"hello" 21   1  
"second thread" 34 1  
"second thread" 21 1  
"second thread" 32 1  
"second thread" 3  3  
"hello" 23   1 
```

我想将第一列“主题”变成数字，以简化事情。是否可以将一列变成这样的数字：

```
topic user weight  
1     324  3  
1     21   1  
2     34   1  
2     21   1  
2     32   1  
2      3   3  
1     23   1 
```

非常感谢您的帮助！

最好的问候，西蒙娜

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:57:07.197

也许使用临时表？

```
CREATE TABLE temp2 (
  id int AUTO_INCREMENT PRIMARY KEY,
  topic varchar(20));

INSERT INTO temp2 (topic)
SELECT DISTINCT topic FROM temp;

SELECT b.id, a.user, a.weight
FROM temp a
INNER JOIN temp2 b ON b.topic = a.topic 
```

**结果**

```
| 身份证 | 用户 | 重量 |
----------------------
| 1 | 324 | 3 |
| 1 | 21 | 1 |
| 2 | 34 | 1 |
| 2 | 21 | 1 |
| 2 | 32 | 1 |
| 2 | 3 | 3 |
| 1 | 23 | 1 |
```

## [查看演示](http://sqlfiddle.com/#!2/7da6a/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T17:58:36.453

这是一种获取`DISTINCT`主题列表并分配要加入的行号的方法。这使得在一个查询中加上一个变量成为可能：

**编辑**：重构以初始化子句`rownum`中的变量`FROM`，这看起来更整洁，并且不会`n*2`为行号生成值。

```
SELECT id, yourtable.*
FROM 
  yourtable
  JOIN (
    /* Suquery gets row rank per distinct topic */
    SELECT topic, @rownum:=@rownum+1 AS id
    FROM (
      /* Variable initialized in FROM clause */
      SELECT @rownum:=0
    ) sr JOIN (
      SELECT DISTINCT topic FROM yourtable
    ) t
  ) topicids ON yourtable.topic = topicids.topic 
```

[http://sqlfiddle.com/#!2/58d53/14](http://sqlfiddle.com/#!2/58d53/14)

```
ID  TOPIC    USER   WEIGHT
1   "hello"  324    3
1   "hello"  21     1
2   "second" 34     1
2   "second" 21     1
2   "second" 32     1
2   "second" 3      3
1   "hello"  23     1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T18:02:06.597

你也可以试试

```
SELECT
   topic, 
   (SELECT COUNT(topic) FROM yourtable where topic = outer_table.topic),
   user, 
   weight  
FROM 
   yourtable  outer_table 
```

# openjpa - TomEE + OpenJPA - 无法注入 EntityManagerFactory PersistenceUnit

> ID：14817868
> 
> 赞同：1
> 
> 时间：2013-02-11T17:50:50.357
> 
> 标签：openjpa, openejb, persistence.xml, apache-tomee

我有一个注入的无状态 EJB

```
@PersistenceUnit 
private EntityManagerFactory factory 
```

我的persistence.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
    <persistence-unit name="ejbPU-ro" transaction-type="RESOURCE_LOCAL">
        <provider>org.apache.openjpa.persistence.PersistenceProviderImpl</provider>
        <non-jta-data-source>mySQLDataSource</non-jta-data-source>
        <exclude-unlisted-classes>false</exclude-unlisted-classes>
        <properties>
            <property name="openjpa.jdbc.DBDictionary" value="mysql"/>
            <property name="openjpa.jdbc.SynchronizeMappings" value="buildSchema(foreignKeys=true"/>
            <property name="openjpa.jdbc.SchemaFactory" value="native(foreignKeys=true)"/>
            <property name="openjpa.Log" value="DefaultLevel=INFO,SQL=INFO"/>
        </properties>
    </persistence-unit>
</persistence> 
```

当我使用单元测试时：

```
Properties p = new Properties();
p.setProperty(Context.INITIAL_CONTEXT_FACTORY, "org.apache.openejb.core.LocalInitialContextFactory");
p.setProperty(Context.PROVIDER_URL, "http://127.0.0.1:4204/openejb/ejb");
InitialContext initialContext = new InitialContext(p); 
```

还定义了`openejb.home`VM arg 和单元测试完美运行。

部署到 TomEE 时，我在`my.war/WEB-INF/lib/my.jar/META-INF`.

在`conf/tomee.xml`我有：

```
<JndiProvider id="prov" type="javax.naming.InitialContext">
    java.naming.factory.initial = org.apache.openejb.core.LocalInitialContextFactory
    java.naming.provider.url = http://127.0.0.1:4204/openejb/ejb
</JndiProvider> 
```

和：

```
<Resource id="mySQLDataSource" type="DataSource">
    JdbcDriver          com.mysql.jdbc.Driver
    JdbcUrl             jdbc:mysql://127.0.0.1:3306/mydb
    UserName            root
    Password        
        JtaManaged      false
        DefaultAutoCommit   false
</Resource> 
```

日志看起来不错，但是当我运行代码时，注入的工厂为空。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T20:40:32.347

几样东西：

1）您的初始上下文：

```
p.setProperty(Context.INITIAL_CONTEXT_FACTORY,"org.apache.openejb.core.LocalInitialContextFactory");
p.setProperty(Context.PROVIDER_URL, "http://127.0.0.1:4204/openejb/ejb"); <- useless since you are in embedded mode 
```

2）你的 web.xml 有 metadata-complete=true 所以扫描被禁止（删除它）

3）你通常不需要 org.apache.cxf.jaxrs.servlet.CXFNonSpringJaxrsServlet （见[http://svn.apache.org/repos/asf/tomee/tomee/trunk/examples/rest-example-with-application /](http://svn.apache.org/repos/asf/tomee/tomee/trunk/examples/rest-example-with-application/) ) - 或使用 JAXRS 技巧通过 web.xml 声明它（IIRC javax.ws.rs.Application 作为 init 参数）

4）不确定您的 ajax url 是否正确（在 tomee@ 上提供的示例中）

终于得到了一个不为空的电动势（因为它在这里，所以在主干上测试过；）

# javascript - 动画javascript滚动

> ID：14817874
> 
> 赞同：2
> 
> 时间：2013-02-11T17:51:18.967
> 
> 标签：javascript

我有一个下一个按钮，单击该按钮时，我希望它向下滚动页面 517px。

使用以下代码（我在另一个站点上找到）我制作了一个按钮，但我希​​望它以流畅的动画方式滚动。我需要添加什么来做到这一点？

我使用的代码如下：

```
function scrollByPixels(x, y)
{
  window.scrollBy(x, y);
} 
```

以及实际按钮上的以下内容：

```
onclick="javascript:scrollByPixels(0, 517)" 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T17:59:16.640

```
function scrollByPixels(x, y) {
  $('html,body').stop().animate({
    scrollLeft: '+=' + x,
    scrollTop: '+=' + y
  });
} 
```

...或者作为一个简单的插件：

```
$.fn.scrollBy = function(x, y){
    return this.animate({
        scrollLeft: '+=' + x,
        scrollTop: '+=' + y
    });
}; 
```

**[演示](http://fiddle.jshell.net/ZVdbG/2)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-06T19:08:21.130

如果您发现自己在这里是因为您正在寻找一个健壮但没有 jQuery 的解决方案。你可以从这里开始；

[原始 Stackoverflow 问题和答案在这里](https://stackoverflow.com/questions/22644902/make-repeated-scrollby-smoother-like-jquerys-animate-scrolltop/27805014#27805014)

```
scrollByAnimated = function(scrollY, duration){
  //gist here https://gist.github.com/loadedsith/857540fd76fe9c0609c7
  var startTime = new Date().getTime();

  var startY = window.scrollY;
  var endY = startY + scrollY;
  var currentY = startY;
  var directionY = scrollY > 0 ? 'down' : 'up';

  var animationComplete;
  var count = 0;

  var animationId;

  if(duration === undefined){
    duration = 250;//ms
  }

  //grab scroll events from the browser
  var mousewheelevt=(/Firefox/i.test(navigator.userAgent))? "DOMMouseScroll" : "mousewheel" //FF doesn't recognize mousewheel as of FF3.x

  //stop the current animation if its still going on an input from the user
  var cancelAnimation = function () {
    if(animationId!==undefined){
      window.cancelAnimationFrame(animationId)
      animationId=undefined;
    }

  }

  if (document.attachEvent) {
    //if IE (and Opera depending on user setting)
    document.attachEvent("on"+mousewheelevt, cancelAnimation)
  } else if (document.addEventListener) {
    //WC3 browsers
    document.addEventListener(mousewheelevt, cancelAnimation, false)
  }

  var step = function (a,b,c) {
    var now = new Date().getTime();
    var completeness = (now - startTime) / duration;
    window.scrollTo(0, Math.round(startY + completeness * scrollY));
    currentY = window.scrollY;
    if(directionY === 'up') {
      if (currentY === 0){
        animationComplete = true;
      }else{
        animationComplete = currentY<=endY;
      }
    } 
    if(directionY === 'down') {
      /*limitY is cross browser, we want the largest of these values*/ 
      var limitY = Math.max( document.body.scrollHeight, document.body.offsetHeight, document.documentElement.clientHeight, document.documentElement.scrollHeight, document.documentElement.offsetHeight );
      if(currentY + window.innerHeight === limitY){
        animationComplete = true;
      }else{
        animationComplete = currentY>=endY;
      }
    } 

    if(animationComplete===true){
      /*Stop animation*/
      return;
    }else{
      /*repeat animation*/
      if(count > 500){
        return;
      }else{
        count++;
        animationId = window.requestAnimationFrame(step);
      }

    }
  };
  /*start animation*/  
  step();
};

scrollByAnimated(100, 250);// change in scroll Y, duration in ms 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T17:59:12.207

滚动整个窗口：

```
var value = $("#scrollToHere").offset().top;

$('html, body').animate({
        scrollTop: value
    }, 800); 
```

来源： [http ://blog.alaabadran.com/2009/03/26/scroll-window-smoothly-in-jquery/](http://blog.alaabadran.com/2009/03/26/scroll-window-smoothly-in-jquery/)

# ios - 创建一个使用 NSJSONSerialization dataWithJSONObject:options:error 的对象：

> ID：14817881
> 
> 赞同：4
> 
> 时间：2013-02-11T17:51:33.243
> 
> 标签：ios, objective-c, nsobject, nsjsonserialization

目前，为了使用此功能，我正在将我的对象“转换”为字典。即属性名称成为键，属性值成为值。

有没有办法正确地做到这一点，以便对象可以使用这个函数？

即类似于`encodeWithCoder`并`initWithCoder`用于`NSUserDefaults`.

我想做...

```
NSData *data = [NSJSONSerialization dataWithJSONObject:myObject options:0 error:nil]; 
```

目前我正在做类似的事情......

```
NSData *data = [NSJSONSerialization dataWithJSONObject:[myObject dictionaryRepresentation] options:0 error:nil]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T21:59:55.647

看看[JSONCoding](https://github.com/ontometrics/JSONCoding)，它建立在 NSJSONSerialization 之上，带有一个 NSCoding 接口。

# windows-8 - Win8 Metro - 重置漫游和本地设置？

> ID：14817883
> 
> 赞同：3
> 
> 时间：2013-02-11T17:51:39.083
> 
> 标签：windows-8, visual-studio-2012, microsoft-metro, winjs

我正在尝试找到一种快速解决方案来清理/重置漫游设置。我必须在代码中手动执行此操作，并且必须运行开发环境。

有复位开关吗？

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T19:42:58.810

数据本地存储在`%localappdata%\Packages\<packageID>`. 您可以直接从那里将其从客户端中删除。有关详细信息，请参阅[访问应用程序数据](http://msdn.microsoft.com/en-us/library/windows/apps/hh464917.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-07T22:45:54.973

迟到最好不要迟到，但是：

您可以通过在解决方案资源管理器中右键单击您的应用程序，选择“属性”，导航到“调试”选项卡，然后单击“卸载然后重新安装我的包”来执行此操作。

这至少应该从 LocalSettings 中删除内容，但我认为它不会影响 Roaming 内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-07T23:16:02.607

这就是`[ApplicationData.current.clearAsync()][1]`函数的用途——它会刷新所有这些。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T23:31:12.907

看起来 Visual Studio 内部没有任何方法可以执行此操作，但有一种方法可以检测调试模式，也可以直接从 Windows 资源管理器访问文件。因此，您有以下选择：

*   保留您的代码会重置数据存储，但通过在启动应用程序时检查[Debug.debuggerEnabled属性来检测调试模式。](http://msdn.microsoft.com/en-us/library/ie/hh969516%28v=vs.94%29.aspx)如果您想清除所有内容，我建议您检查该`clearAsync`功能，该功能将清除应用程序的整个本地数据存储。有关更多信息，请参阅[此链接](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.applicationdata.clearasync.aspx)。
*   @JPAlioto 选项建议手动清除文件夹。您可以很容易地将其作为构建步骤来完成。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-16T23:30:06.387

假设您要清除保存在 localSettings 中的“someSetting”。您可以使用：

var localSettings = Windows.Storage.ApplicationData.current.localSettings; localSettings.values.remove("someSetting");

我猜漫游设置也是如此。

# asp.net - ASP.NET WebApi 会话与静态变量

> ID：14817886
> 
> 赞同：8
> 
> 时间：2013-02-11T17:51:50.053
> 
> 标签：asp.net, asp.net-web-api

在 IIS 7 中托管的 ASP.NET WebApi 中，它是否有权访问会话？它似乎`Session`在`HttpContext.Current`.

这两者用于存储全局变量有什么区别？

```
private static Dictionary<string, string> ConnectionStrings
    {
        get
        {
            if (HttpContext.Current.Session["ConnectionStrings"] == null)
                HttpContext.Current.Session["ConnectionStrings"] = new Dictionary<string, string>();

            return HttpContext.Current.Session["ConnectionStrings"] as Dictionary<string, string>;
        }
    } 
```

和

```
private static Dictionary<string, string> connectionStrings = new Dictionary<string, string>(); 
```

我应该使用会话变量还是静态变量来存储动态生成的连接字符串（长篇大论）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T17:58:14.637

好吧，会话变量是针对*每个*用户的。静态变量是将在*所有*用户之间共享的变量。所以，我不知道为什么要为*每个*用户存储一个连接字符串，但如果你需要这样做，你就不能使用一个静态变量。现在，您可以使用静态变量并将其设置为字典，其中键是用户，值是您要存储的任何内容。那肯定会奏效。

说了这么多，您可以使用 cookie 模拟会话（这最终是会话使用的东西（通常））：请参阅：[使用 ASP.NET Web API 访问会话](https://stackoverflow.com/questions/9594229/accessing-session-using-asp-net-web-api)

# php - 无法删除和更新我的购物车中的项目会话有问题

> ID：14817890
> 
> 赞同：0
> 
> 时间：2013-02-11T17:51:54.610
> 
> 标签：php, session, shopping-cart

我有购物车，当我将商品添加到购物车中时，当我想更改数量或删除任何商品时，它给了我空的购物车。这是购物车的代码，开头：

编辑：

```
<?php 
session_start();
require "C:/xampp/...../DButils.php";
require "C:/xampp/..../functions.php";
$msg = '';
if(isset($_REQUEST['command']) && isset($_REQUEST['pid'])>0)
 {
    remove_product($_REQUEST['pid']);
}
else if(isset($_REQUEST['command']) && $_REQUEST['command'] == 'clear'){
    unset($_SESSION['cart']);
}
else if(isset($_REQUEST['command']) && $_REQUEST['command'] == 'update'){
    $max=count($_SESSION['cart']);
    for($i=0;$i<$max;$i++){
        $pid=$_SESSION['cart'][$i]['productid'];
        $q=intval($_REQUEST['product'.$pid]);
        if($q>0 && $q<=999){
            $_SESSION['cart'][$i]['qty']=$q;
        }
        else{
            $msg='Some proudcts not updated!, quantity must be a number between 1 and 999';
        }
    }
}

 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T18:12:19.767

```
if(isset($_REQUEST['command']) && $_REQUEST['command']=='add' && $_REQUEST['productid']>0)
{
    remove_product($_REQUEST['pid']);
} 
```

It looks like you're trying to remove the product when you want to be adding one.

Also, as @cillosis mentioned

```
else if(isset($_REQUEST['command'])=='update'){ 
```

will ALWAYS evaluate to false. This is because isset() only ever returns a BOOLEAN value (true, false, 1, 0) and you're evaluation the condition: "If 'true/false' equals 'update'" and since true and false are both not equal to the string 'update' the test will fail every time.

It may make it easier to give you answer to your question if you update the code in your question to remove the errors as they're pointed out. As it's currently written it is fairly hard to decipher.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T23:00:36.803

尝试这个

```
 if($_REQUEST['command']=='delete' && $_REQUEST['id']>0){
 remove_product($_REQUEST['id']);
 }
 else if($_REQUEST['command']=='clear'){
 unset($_SESSION['cart']);
 }
 else if($_REQUEST['command']=='update'){
 $max=count($_SESSION['cart']);
 for($i=0;$i<$max;$i++){
 $id=$_SESSION['cart'][$i]['id'];
 q=intval($_REQUEST['qty'.$id]);
 if($q>0 && $q<=999){
 $_SESSION['cart'][$i]['qty']=$q;
 }
 else{
 $msg='Some proudcts not updated!, quantity must be a number between 1 and 999';
 }
 }
 } 
```

在表单按钮应该是这样的

```
 <a href="javascript:del(<?php echo $id?>)">
 <input type="button" class="button5" value="Remove" /></a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T17:56:42.227

您没有`isset()`正确使用该功能。这将返回一个布尔值 true 或 false，而不是值的字符串。您可能打算做的是：

```
else if(isset($_REQUEST['command']) && $_REQUEST['command'] == 'clear'){ 
```

...和...

```
else if(isset($_REQUEST['command']) && $_REQUEST['command'] == 'update'){ 
```

如果没有这些更改，您将永远无法执行这些代码块，因为真/假永远不会等于“清除”或“更新”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-30T11:41:25.047

据我所知，服务器语言（php）不理解给定的目录，尝试有一个像 require 这样的有效目录，`projectName/functions.php;`希望它也会有所帮助。

# eclipse - 获取 ClassNotFoundException：StreamingDataHandler

> ID：14817891
> 
> 赞同：1
> 
> 时间：2013-02-11T17:51:54.787
> 
> 标签：eclipse, jax-ws, jboss7.x, mtom

我正在开发 MTOM 流式 Web 服务并遇到以下问题。我的网络服务实现类中有以下代码：

```
@Override
public void fileUpload(String name, DataHandler data) 
{
    System.out.println("INVOKING FILE UPLOAD!");

    try
    {
           StreamingDataHandler dh = (StreamingDataHandler) data;
           File file = File.createTempFile("result.txt", "");
           dh.moveTo(file);
           dh.close();
           System.out.println("TEMP FILE WITH DATA: " + file.getAbsolutePath());
    } 
    catch(Exception e) 
    {
           throw new WebServiceException(e);
    } 
```

}

问题是 Eclipse 提示我按以下方式导入 StreamingDataHandler（编译和部署 - ok）：

```
import com.sun.xml.internal.ws.developer.StreamingDataHandler; 
```

但是，我在运行时收到 ClassNotFoundException。你能告诉我应该导出什么以便它简单地工作吗？我尝试将 jaxws-ri.jar 和 stax-ex.jar (v 2.2.7) 包含到我的模块中，但没有任何运气（出现其他错误）。StreamingDataHandler 类也位于其中的不同包下（与 Eclipse 提示的相同，但没有“内部”）。我的项目方面是：Dynamic Web-Module 3.0、Java 1.7、Javascript 1.0、JBoss Web Services Core，服务器运行时是 JBoss 7.1.1。我该如何解决这种困惑？谢谢。

**更新：（解决方案）**

使用此代码写入数据：

```
InputStream is = data.getInputStream(); // DataHandler
File file = File.createTempFile("result.txt", "");
OutputStream os = new FileOutputStream(file.getAbsolutePath());

byte[] buffer = new byte[1024];
int bytesRead;
while ((bytesRead = is.read(buffer)) != -1)
{
    os.write(buffer, 0, bytesRead);
}
os.flush();
os.close(); 
```

刚刚在两台主机之间发送了 5.9Gb 数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T10:33:52.320

班级`com.sun.xml.internal.ws.developer.StreamingDataHandler`在`rt.jar`.

无论如何，您不应该在您的应用程序中使用`sun`或`com.sun`打包。

这篇 Oracle 文章说明了原因：[为什么开发人员不应该编写调用“sun”包的程序](http://www.oracle.com/technetwork/java/faq-sun-packages-142232.html)。

这些包不是官方和受支持的 Java 规范的一部分。使用它们可能会导致不同版本的 Java 或不同实现（IBM 和 HP 等专有实现）之间的不兼容。实际上，您不确定您在一个实现中获得的 sun 类是否会成为另一个实现的一部分。

# java - Java位比较，位集？

> ID：14817892
> 
> 赞同：0
> 
> 时间：2013-02-11T17:51:56.673
> 
> 标签：java, hex, logic, bits, bitset

作为解决问题的方法，我脑子里一直有“bitset”这个词，但我想我可能会让自己感到困惑。

我有一个指示某些条件的十六进制值列表，例如：

```
0x0001 = Outside
0x20000000 = Blah... 
```

现在我正在读取一个 int，我基本上想将 int 与所有现有的十六进制条件进行比较，以查看它与哪个匹配。它可以匹配零个、一个或多个。

bitset 实际上是我想要的，还是有更简单的方法？

问这个我觉得有点傻，但我不记得这该死的东西叫什么了！:)

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:59:00.850

不清楚您想要什么，但 Java SDK 确实提供了一个[BitSet](http://docs.oracle.com/javase/6/docs/api/java/util/BitSet.html)，以及许多使用 BitSet 的有用方法。在您的情况下， and() 和 intersects() 方法可能有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T17:59:11.027

我认为您所追求的词是“位掩码”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T18:01:09.910

您在寻找位掩码吗？这就是 an 中的每个位`int`表示一个布尔值，设置（1，表示真）和未设置（0，表示假）。例如：

```
public class MaskingExample {

    private static final int OUTSIDE_MASK = 1; // Right-most bit
    private static final int HEATED_MASK = 1 << 1; // Second-to-right-most bit
    private static final int WET_MASK = 1 << 2; // Third-to-right-most bit

    private int value = 0;

    public boolean isOutside() {
        return isBitSet(OUTSIDE_MASK, value);
    }

    public void setOutside(boolean outside) {
        value = outside ? setBit(OUTSIDE_MASK, value) : unsetBit(OUTSIDE_MASK, value);
    }

    // Other setters and getters

    private static int setBit(int mask, int value) {
        return value | mask;
    }

    private static int unsetBit(int mask, int value) {
        return value & ~mask;
    }

    private static boolean isBitSet(int mask, int value) {
        return (value & mask) == mask;
    }
} 
```

如果您需要超过 32 个条件，请使用`long`所有掩码 和，并为每个要移动的值`value`添加一个，您最多可以有 64 个条件，如下所示：`L``1`

```
private static final long OUTSIDE_MASK = 1L; // Right-most bit
private static final long HEATED_MASK = 1L << 1; // Second-to-right-most bit
private static final long WET_MASK = 1L << 2; // Third-to-right-most bit

private long value = 0; 
```

顺便说一下，您也可以一次设置多个位。您可以使用以下方式将遮罩组合成一个遮罩`&`：

```
public void setOutsideAndRaining(boolean outsideAndRaining) {
    int comboMask = OUTSIDE_MASK & WET_MASK;
    value = outsideAndRaining ? setBit(comboMask, value) : unsetBit(comboMask, value);
} 
```

**编辑：**在看到下面 kaliatech 的答案后，您也可以使用[`BitSet`](http://docs.oracle.com/javase/6/docs/api/java/util/BitSet.html). 解决方案非常相似，但数学逻辑封装在`BitSet`对象中，它允许任意数量的位，因此您不仅限于 64。

```
public class MaskingExample {

    private static final int OUTSIDE_POSITION = 0;
    private static final int HEATED_POSITION = 1;
    private static final int WET_POSITION = 2;
    private static final int TOTAL_CONDITIONS = 3;

    private BitSet bitSet = new BitSet(TOTAL_CONDITIONS);

    public boolean isOutside() {
        return bitSet.get(OUTSIDE_POSITION);
    }

    public void setOutside(boolean outside) {
        bitSet.set(OUTSIDE_POSITION, outside);
    }

    // Other setters and getters
} 
```

# android - 使用 DexClassLoader 动态启动活动

> ID：14817893
> 
> 赞同：5
> 
> 时间：2013-02-11T17:52:02.037
> 
> 标签：android, android-activity, dex

我想编写一个应用程序，单击其中的按钮运行来自另一个 apk 文件（未安装在系统上）的活动。因此，假设我有项目 A，其中包含活动 A，项目 B 中包含活动 B。我希望活动 A 在运行时动态加载活动 B（假设项目 B 的 APK 文件位于项目 A 的资产目录中，并且项目 A 知道它必须在该 APK 文件中查找哪个类。

我知道[DexClassLoader](http://developer.android.com/reference/dalvik/system/DexClassLoader.html)允许您从不同的 DEX 文件动态加载类（这里有一个示例[）](http://code.google.com/p/android-custom-class-loading-sample/)，但是我可以对也有资源的 APK 文件做同样的事情吗？基本上以在系统中启动新活动的方式修改动态类加载器示例？

希望我的解释清楚。对此的任何意见都非常感谢。

干杯

# java - 解析具有整数值的字符串到日期

> ID：14817898
> 
> 赞同：1
> 
> 时间：2013-02-11T17:52:19.883
> 
> 标签：java, parsing, date

我有一个具有此值的字符串，例如：“20130211154717”我希望它像“2013-02-11 15:47:17”。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-11T17:54:26.580

您可以使用两种[SimpleDateFormat](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)：一种用于解析输入，另一种用于生成输出：

```
String input =  "20130211154717";
Date d = new SimpleDateFormat("yyyyMMddhhmmss").parse(input);
String output = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss").format(d);
System.out.println("output = " + output); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T17:54:19.337

您可以为此使用正则表达式：

```
String formattedDate = plainDate.replaceFirst(
        "(\\d{4})(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{2})",
        "$1-$2-$3 $4:$5:$6"); 
```

不过，我更喜欢 assylias 的`SimpleDateFormat`回答。:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T17:55:03.890

您要为此使用的是[SimpleDateFormat](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)。它有一个名为[parse()的方法](http://docs.oracle.com/javase/6/docs/api/java/text/DateFormat.html#parse%28java.lang.String%29)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T17:55:07.503

您可以使用该`substring()`方法来获得您想要的：

```
String data = "20130211154717";
String year = data.substring(0, 4);
String month = data.substring(4, 2);
// etc. 
```

然后将它们串在一起：

```
String formatted = year + "-" + month + "-" + . . . 
```

# php - 使用jquery解析带有html标签的文本

> ID：14817899
> 
> 赞同：1
> 
> 时间：2013-02-11T17:52:21.100
> 
> 标签：php, javascript, jquery, html

单击提交后解析要使用的html元素，我使用这种方法

```
 $panel = $('.box').html();
 $("#page").append('<form  name="sampleForm" method="post" action="ticket.form.php"><input type="hidden" name="ConfirmationPanel" value=""></form>');

    document.sampleForm.ConfirmationPanel.value = $panel;
    document.forms["sampleForm"].submit(); 
```

然后在提交点击后，我请求 POST 变量，并将 POST 变量的内容文本插入页面：

```
 var $_POST = <?php echo json_encode($_POST); ?>;
if($_POST["ConfirmationPanel"].length > 0)
{
$('#tabspanel').before($_POST['ConfirmationPanel']);
} 
```

我可以成功访问变量并使用它，一切都很好，一个问题是，jquery像文本一样插入POST变量的内容，像这样（“ `<div><h1>Test</h1></div>`”），我想要的是像这样插入它( `<div><h1>Test</h1></div>`) 没有 ( " " ) ，因此成为页面 html 元素之一

否则：我从 POST 变量之前插入文本`$('#tabspanel')`，jquery 将其插入为这样的文本：`<div id="tabspanel" >"<div><h1>Test</h1></div>"</div>`，我希望 jquery 将其作为 html 元素插入，直到我可以看到 (div) 和 (h1)，所以就像这样：`<div id="tabspanel" ><div><h1>Test</h1></div></div>`——</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T18:00:02.127

您需要从不同的 PHP 页面访问 post 变量。例如，将表单结果ajax 到另一个PHP 页面，然后将其成功/失败作为纯文本返回并在当前页面中对其进行测试。

# sql-server-2008 - 在主键中存储大整数

> ID：14817901
> 
> 赞同：1
> 
> 时间：2013-02-11T17:52:30.303
> 
> 标签：sql-server-2008

我们有一个名为 Parts 的数据库表。每一行都是系统中的一个部分。该表的主键称为 ID，它是身份种子，是整数数据类型。我们正在向该表添加新部件。

我的用户给了我大约 1000 行来添加。我注意到他们希望 ID 从 1000000 一直到 14230004。所以我将通过设置身份插入来添加新行。此外，应用程序有时会在其他表中引用添加的行。这些行也以树形视图的形式呈现在 Web 应用程序中。

我的问题是，在我的情况下，从 1000000 开始你的 ID 的主键不是一个坏习惯，我可以从 1 开始。从 1 开始是否有助于更好地索引表，从而加快检索时间？据我所知，从如此大的整数开始 ID 并没有真正的业务需求。我只是想就是否应该按用户从 1 开始 ID 获得意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:57:46.767

没关系。SQL 中的 int 将占用与任何其他 int 一样多的空间。它们都使用 4 个字节的存储空间。索引不会关心数字是什么。

但是，您将更快地浏览所有可用的 ID。应该不是问题，因为 ms sql int 最大值为 2,147,483,647 (2^31-1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T17:59:18.530

好的 - 所以从 100 万而不是 1 开始 - 你手头有 2.04 行而不是 21.4 亿行。

如果您从 100 万开始使用，并且您**每秒**、全天候、全天、一年中的每一天都`INT IDENTITY`插入一行- 那么您需要**63.4 年**（而不是 66.5 年）才能达到 20 亿的限制...... .

 ****你够了吗？？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T17:59:50.820

> 我的问题是，在我的情况下，从 1000000 开始你的 ID 的主键不是一个坏习惯，我可以从 1 开始。

通常，当你看到这样的事情时，是有原因的。

> 从 1 开始是否有助于更好地索引表，从而加快检索时间？

不。当存储整数时，1000000 占用的空间不超过 1。在给定相同数量和分布的行以及相同且无偏的索引的情况下，dbms 可以找到 1000000 的速度与找到 1 的速度一样快。

> 我只是想就是否应该按用户从 1 开始 ID 获得意见。

不，您不应该强迫用户从 1 开始。您应该尝试找出为什么其他人（可能知道您不知道的事情）让他们从不同的数字开始。****

# php - 使用正则表达式和 PHP 从字符串中查找第一个匹配项？

> ID：14817908
> 
> 赞同：1
> 
> 时间：2013-02-11T17:52:51.630
> 
> 标签：php, regex

我正在尝试从正文中找到所有独特的整个单词。目前这是我正在使用的，但它似乎没有工作：

```
$textDump = "cat dog monkey cat snake horse"
$wholeWord = "/[\w]*/";
$uniqueWords = (preg_match($wholeWord, $textDump, $matches)); 
```

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T17:56:07.920

```
array_unique(
    str_word_count($textDump,1)
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T17:56:10.073

您可以使用 str_word_count

```
$textDump = "cat dog monkey cat snake horse";
$uniqueWords = (str_word_count($textDump, 1); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T18:23:42.077

到目前为止给出的答案都假设，“找到所有唯一的整个单词”你的真正意思是“删除重复项”。实际上你的问题不是很清楚，因为你没有在你的例子中指定你想要的输出是什么，但我会相信你的话并为“找到所有唯一的完整单词”提供一个解决方案。

**这意味着，对于输入：**

```
"cat dog monkey cat snake horse" 
```

**你会得到输出：**

```
"dog monkey snake horse" 
```

实际上，[`str_word_count`](http://php.net/str-word-count)与 一起对此也很有用[`array_count_values`](http://php.net/array-count-values)，它实际上*计算*了不同的*值*：

```
$wordCount = array_count_values(str_word_count($textDump,1)); 
```

`$wordCount`就是现在：

```
array(5) {
  ["cat"]    => int(2)
  ["dog"]    => int(1)
  ["monkey"] => int(1)
  ["snake"]  => int(1)
  ["horse"]  => int(1)
} 
```

接下来，删除字数大于 1 的单词（注意，实际的单词是数组键，所以我们`array_keys`用来获取它们：

```
$uniqueWords = array_keys(
    array_filter(
        $wordCount,
        function($count) {
            return $count === 1;
        }
    )
); 
```

`$uniqueWords`就是现在：

```
array(4) {
  [0] => string(3) "dog"
  [1] => string(6) "monkey"
  [2] => string(5) "snake"
  [3] => string(5) "horse"
} 
```

**完整代码：**

```
$textDump = "cat dog monkey cat snake horse";
$wordCount = array_count_values(str_word_count($textDump,1));
$uniqueWords = array_keys(
    array_filter(
        $wordCount,
        function($count) {
            return $count === 1;
        }
    )
);
echo join(' ', $uniqueWords);
//dog monkey snake horse 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-11T17:57:31.277

在这种情况下，为什么不使用`explode();`and来实现这`array_unique();`一点？

```
$text = "cat dog monkey cat snake horse";

$foo = explode(" ", $text);
print_r(array_unique($foo)); 
```

# ruby-on-rails - 开发数据和用户模型 :: 工具/最佳实践/方法

> ID：14817918
> 
> 赞同：0
> 
> 时间：2013-02-11T17:53:21.510
> 
> 标签：ruby-on-rails, model-view-controller, database-design, model

我发现有时很难清楚地表达我想要创建的特定模型 - 特别是随着项目变得越来越大，我必须围绕所有事物之间的关系展开思考。

您如何组织数据和用户模型？你会在纸上画出它们吗？也许网上有一个简洁的工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T18:34:19.620

是的，我相信好的旧铅笔和纸是用于此目的的工具。请记住，最终您的模型将通过对象*关系*映射器访问数据库，您应该考虑关系。

大多数情况下，值得先考虑关系，然后为模型找出名称。考虑以下情况，您需要存储以下内容的内容：

*   帖子需要存储
*   评论需要保存
*   用户必须被存储

现在，在您考虑如何命名它们之前，请先考虑它们之间的关系。我发现主要通过这样做，您将直观地选择正确的名称：

一个帖子属于一个用户，一个用户有很多帖子，一个评论属于一个帖子，一个帖子有很多评论，一个用户有很多评论，一个评论属于一个用户。

在最后一个相当直观的句子中，您拥有所需的一切：名称和关系。Rails 支持这种直觉，因为它非常地道。

就规划数据库和模型而言，如果您有一个现有的应用程序并且需要弄清楚模型的关系，我建议使用名为[railroady的 UML（](https://github.com/preston/railroady)[统一建模语言](http://de.wikipedia.org/wiki/Unified_Modeling_Language)）gem ，它会自动创建一个漂亮的图形概览您的应用程序的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T18:49:43.917

我发现可视化对建立数据模型和处理数据流图等有很大帮助。铅笔和纸对我来说从来没有用过，因为我对整洁非常着迷，讨厌做出改变和重做事情，而且我也不想通过在屏幕上移动小盒子来分散注意力，让它们看起来不错，因为它打破了“创意流程”。

出于多种原因，我过去曾为此使用过 GraphViz [http://www.graphviz.org/ 。](http://www.graphviz.org/)

首先，我为很多公司工作过，这些公司的成本太低，无法在任何可能意外帮助软件开发的软件上花钱。

其次，文本输入不会让人分心——它可以让您专注于内容而不会分心。文本输入也可以由代码生成，因此它非常适合（半）自动代码和模式可视化。

第三，可以将输入文本添加到源代码存储库并进行注释和更改跟踪。

我最近发现了[http://graphviz-dev.appspot.com/](http://graphviz-dev.appspot.com/)这使它变得更加容易——不要忘记点击它们的广告链接。

# c# - 使用默认的Required选项嵌套事务和不做这一切有什么区别？

> ID：14817920
> 
> 赞同：0
> 
> 时间：2013-02-11T17:53:33.910
> 
> 标签：c#, transactionscope

我见过这样的代码示例，其中 TransactionScope 嵌套在另一个[内部](http://msdn.microsoft.com/en-us/library/ms172152.aspx)

```
using(TransactionScope scope1 = new TransactionScope())
{
     try
     {
          //Start of non-transactional section 
          using(TransactionScope scope2 = new
             TransactionScope(TransactionScopeOption.Suppress))
          {
               //Do non-transactional work here
          }
          //Restores ambient transaction here
   }
     catch
     {}
   //Rest of scope1
} 
```

我可以理解这里的使用，`Supress`但据我所知`Required`，它只是与外部事务合并，所以如果有什么失败，整个事情都会失败，那有什么意义呢？我在这里错过了什么吗？

**编辑：** 为了清楚起见，我想强调我（认为我 :-)）理解的 Suppress 选项，这在 MSDN 文档中进行了解释。我的问题是关于默认的**必填**选项；也许我不完全理解，但是如果事务 B 嵌套在事务 A 中，那么如果 A 失败**或**B 失败，那么 A**和**B 都将回滚，如果我一开始就没有将 B 放入事务中，这也是一样的.

所以改写的问题是'*用默认的Required选项嵌套事务有什么区别，而不是全部做？*'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T19:07:39.230

想一想：

```
using(TransactionScope scope1 = new TransactionScope())
{
     //i insert some records in tabe A
     try
     {              
          using(TransactionScope scope2 = new
             TransactionScope(TransactionScopeOption.Suppress))
          {                  
               // I insert some records in table B
               scope2.Complete() 
          }
          //I insert some records in table C
   }
     catch
     {}
   //I Update some records in table D
   //I Delete some records of table E
   // Here we have an exception being thrown                       
 scope1.Complete() 
} 
```

运行代码后，
**对表 A、C、D、E 的所有更改都将回滚，**
**对表 B 的所有更改都将被提交**

[TrnsactionScop 向下侧](https://stackoverflow.com/questions/5760570/downside-of-using-transactionscope-requiresnew)

# c - 如何通过 C 获得当前的 Linux 本地化？

> ID：14817923
> 
> 赞同：0
> 
> 时间：2013-02-11T17:54:04.787
> 
> 标签：c, linux, locale

如何通过 C 获得 Linux 的当前本地化（ru-RU、en-US、en-GB 等）？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T17:59:51.300

在符合 POSIX 的系统上，`setlocale(LC_CTYPE, NULL);`将返回当前为 category 选择的语言环境的名称`LC_CTYPE`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T18:02:18.230

查看[nl_langinfo](http://linux.die.net/man/3/nl_langinfo)和 [localeconv](http://linux.die.net/man/3/localeconv)手册页。

如何在 Unix 系统上搜索子程序和/或系统调用：

*   通过 apropos 查询。例如：`apropos locale`
*   查找引用 man 第 2 节（系统调用）或 man 第 3 节（子例程）的结果。例如在 mac 上：

    > ```
    > querylocale(3)           - Get locale name for a specified category
    > setlocale(3)             - natural language formatting for C 
    > ```

*   看看手册页

# java - 传输 sendMessage 不会抛出异常

> ID：14817924
> 
> 赞同：0
> 
> 时间：2013-02-11T17:54:16.957
> 
> 标签：java, jakarta-mail, sendmail, transport

我向无效的电子邮件地址发送消息，但我没有收到任何异常。它就像一切都很好，在调试器中它显示一切正常。

```
private MailService() {
    Properties props = new Properties();
    props.put("mail.transport.protocol", "smtps");
    props.put("mail.smtps.host", HOST);
    props.put("mail.smtps.auth", "true");
    props.put("mail.smtp.from", FROM);
    props.put("mail.smtps.quitwait", "false");

    mailSession = Session.getDefaultInstance(props);
    mailSession.setDebug(true);
}

public static void sendMessage(String recipient, String subject,
        String message) throws MessagingException {

    if (mailService == null) {
        mailService = new MailService();
    }

    MimeMessage mimeMessage = new MimeMessage(mailSession);

    mimeMessage.setFrom(new InternetAddress(FROM));
    mimeMessage.setSender(new InternetAddress(FROM));
    mimeMessage.setSubject(subject);
    mimeMessage.setContent(message, "text/plain");

    mimeMessage.addRecipient(Message.RecipientType.TO, new InternetAddress(recipient));

    Transport transport = mailSession.getTransport("smtps");
    transport.connect(HOST, PORT, USER, PASSWORD);

    transport.sendMessage(mimeMessage,
            mimeMessage.getRecipients(Message.RecipientType.TO));
    transport.close();

} 
```

我尝试了不同的电子邮件地址，但它并没有抛出异常。我错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T19:21:42.627

TransportListener 不会告诉您任何信息，而只会告诉您异常。您的问题的真正答案在[JavaMail FAQ](http://www.oracle.com/technetwork/java/javamail/faq/index.html#badaddr)中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T19:07:08.747

您需要的是一个 TransportListener，它附加到您的传输实例：
**添加 TransportListener**

```
transport.addTransportListener(new MyTransportListener()); 
```

**MyTransportListener.java**

```
public class MyTransportListener implements TransportListener{

    @Override
    public void messageDelivered(TransportEvent te) {
        System.out.println("Everything went fine!");
    }

    @Override
    public void messageNotDelivered(TransportEvent te) {
        System.out.println("ERROR: " + te.getMessage());
        Address[] invalidAddresses = te.getInvalidAddresses();
        Address[] validUnsentAddresses = te.getValidUnsentAddresses();
        //make something happen
    }

    @Override
    public void messagePartiallyDelivered(TransportEvent te) {
        messageNotDelivered(te);
    }

} 
```

我还没有尝试这个（还），但我认为这正是你需要的......
**编辑**
我错了，这对你的问题没有帮助

# windows - 来自 cmd 行的 phpmyadmin

> ID：14817925
> 
> 赞同：0
> 
> 时间：2013-02-11T17:54:16.840
> 
> 标签：windows, phpmyadmin

有没有办法从 Windows 的命令行查询 phpMyAdmin 中的数据库而不使用 Web 界面？就像从命令行导出数据库而不是去 Web 界面那样，

我们正在尝试提供某种自动化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T17:58:25.240

phpMyAdmin 是一个只能通过浏览器访问的 Web 界面。然而，这只是 MySQL 服务器的前端。

`mysql`命令行客户端是最有用的，但提供了导出数据库的`mysqldump`命令行版本。因为`mysql`您可以传递查询而不是获取 shell 会话 -`mysqldump`只是一个接受命令行参数的实用程序。两者都适用于“某种自动化”。

# ruby-on-rails - Rails 导出 csv，包括连接表属性

> ID：14817931
> 
> 赞同：1
> 
> 时间：2013-02-11T17:54:34.250
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

我的应用程序中有 3 个模型 + 关联的连接表：

评级集：

```
class RatingSet < ActiveRecord::Base
  has_many :product_rating_sets, :dependent => :destroy
  has_many :products, :through => :product_rating_sets
end 
```

产品：

```
class Product < ActiveRecord::Base
  has_many :product_recommendations, :dependent => :destroy
  has_many :recommendations, :through => :product_recommendations
  has_many :product_rating_sets, :dependent => :destroy
  has_many :rating_sets, :through => :product_rating_sets  
end 
```

建议：

```
class Recommendation < ActiveRecord::Base
  has_many :product_recommendations, :dependent => :destroy
  has_many :products, :through => :product_recommendations
end 
```

我正在尝试将导出添加到 csv 函数。

到目前为止我的方法：

```
def self.as_csv
    CSV.generate do |csv|
      csv << ["set_id", "time", "item_id", "related_item_id", "rating"]
      set_id = ['1','2','3']
      time = ['10:40am', "11:30pm", "14:40am"]
      item_id = ["123456","123456765", "123456543"]
      related_item_id = ["1234565432345","109876532", "564783920"]
      rating = ["12.3", "13.2", "132.2"]

      all.each do |item|
        csv << item.attributes.values_at(*column_names)#lost here
      end
    end
  end 
```

我计划添加范围以查找 set_id、time、item_id、related_item_id 和 rating，但为了测试，我使用上面的值。如何遍历每个数组，并将值添加到各自标题下的导出 csv 文件中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T04:38:44.683

将以下方法添加到 lib 文件中，并在我的每个控制器中调用它。基本上必须一次遍历一个模型，在获得我需要的所有属性后，我将其附加到 csv 对象。

```
def self.as_csv(rating_id)
        CSV.generate do |csv|
          csv << ["set_id","item_id", "related_item_id", "rating", "time"]
          product_ids = RatingSet.find(rating_id).products
          product_ids.each do |product|
           recommendation_ids = Recommendation.find(:all, :joins => :products, :conditions => ["product_id = ?", product.id])
            recommendation_ids.each do |recommendation|
              recommendation.ratings.each do |ratings|
               time_updated = (ratings.updated_at)
                csv <<  [rating_id, product.id, recommendation.id, ratings.rating, time_updated]
              end
            end
          end
        end
      end 
```

# python - 从多对多列中检索对象并放入新表中

> ID：14817933
> 
> 赞同：0
> 
> 时间：2013-02-11T17:54:52.230
> 
> 标签：python, django, django-models, many-to-many

我有一个活动表，可容纳 2 种类型的与会者：学生和教职员工。我将如何检索那些在学生列（多对多）中的人并将它们放入自己的表中？

```
class Event(models.Model):
    ...
    students = models.ManyToManyField(StudentProfile, null=True, blank=True)
    staff = models.ManyToManyField(StaffProfile, null=True, blank=True)
    ... 
```

新表：？

```
class StudentAttendees(models.Model):
    profile = models.ManyToManyField(StudentProfile, through='Event')
    event = models.ForeignKey(Event)
    created = models.DateTimeField(auto_now_add=True) 
```

返回：

```
django.core.management.base.CommandError: One or more models did not validate:
profiles.studentattendees: 'profile' is a manually-defined m2m relation through model Event, which does not have foreign keys to StudentProfile and StudentAttendees 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T18:12:46.557

Something like this might work:

```
for some_event in Event.objects.all():
    student_attendees_object = StudentAttendees.objects.create(event=some_event)
    for student in some_event.students_set.all():
        student_attendees_objects.profile.add(student) 
```

I don't know what you're trying to accomplish, but if you need extra info on the student attendees, you might wanna look into an intermediate table with the `through` parameter. Check out the [documentation](https://docs.djangoproject.com/en/dev/topics/db/models/#extra-fields-on-many-to-many-relationships) on this.

# html - 如果 padding 在里面，为什么 div 会用 padding 变宽？

> ID：14817934
> 
> 赞同：4
> 
> 时间：2013-02-11T17:54:53.970
> 
> 标签：html, css, padding

我在 CSS 上有这个 div：

```
#bodycontent {
    max-width:980px;
    margin:auto; 
}

#navleft {
    width:18%;   
    border:0px;
    float:left;
}

#rightcontent {
    max-width:80%;
    border:0px;
    float:right;
} 
```

在 HTML 上：

```
<div id="bodycontent">
    <div id="navleft">
        some stuff
    </div>
    <div id="rightcontent">
        some stuff
    </div>
</div> 
```

现在我有两个问题：

1.  如果我将 div 设置为 20% 和 80%，我将不会并排显示 div，而是一个上一个下一个
2.  我想在 rightcontent div 上有 25px 的 padding-left 但是，如果我再次设置填充，div 会低于另一个。

为什么？填充物不在里面？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T17:57:19.090

该`width`属性[（在 CSS 2 中）定义](http://www.w3.org/TR/CSS21/box.html#box-dimensions)为*内容的宽度*，而不是边框​​之间的空间。填充在边界内，而不是在宽度内。

在 CSS 3 中，您可以使用[`box-sizing`属性](http://www.w3.org/TR/css3-ui/#box-sizing)更改它，但它的[支持有限](http://caniuse.com/#search=box-sizing)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-11T17:59:49.377

您面临的问题是由于盒子模型。您声明的宽度是内容的宽度，而不是元素的真实宽度。

了解有关[盒子模型的更多信息](http://www.w3.org/TR/CSS2/box.html)

要更改此设置，以便边框和填充都是元素宽度的一部分，您可以使用`border-box`

```
#your-element { 
    -moz-box-sizing: border-box; 
    -webkit-box-sizing: 
     border-box; box-sizing: border-box; 
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T17:58:14.287

阅读有关[css 盒模型](http://www.w3schools.com/css/css_boxmodel.asp)的信息。

你的内容是最里面的盒子，它会有`width`你指定的。填充、边框和边距都添加到此宽度。填充将在边框内，但不在内容宽度内。

# memory - nunit大项目集成测试，内存不足异常

> ID：14817935
> 
> 赞同：1
> 
> 时间：2013-02-11T17:54:53.870
> 
> 标签：memory, nunit, out-of-memory, red-gate-ants

我正在使用 nunit 为一个包含 600 多个测试的大型项目运行集成测试（每个测试通过 nhibernate 与数据库交互）。问题是在 10-15 分钟后 nunit 抛出内存不足异常。我使用 redgate ants 内存分析器来查看为什么 nunit 在测试之间没有释放内存。似乎它试图在每个测试中重新创建权限对象，并且内存不断增长，最终它抛出内存异常。

我对一个集成测试类进行了快照，但您可以看到内存在一段时间后不断增长。我没有找到任何要求 nunit 强制释放内存或解决此信任问题的调用或设置。

我真的很感激任何帮助。

```
<NamedPermissionSets><PermissionSet class=\\"System.Security.NamedPermissionSet\\"version=\\"1\\" Unrestricted=\\"true\\" Name=\\"Full ... 
```

蚂蚁快照：

[http://www.tinyuploads.com/images/IXwb8Q.jpg](http://www.tinyuploads.com/images/IXwb8Q.jpg)

[http://www.tinyuploads.com/images/3R2VbB.png](http://www.tinyuploads.com/images/3R2VbB.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-05T14:28:58.270

我不知道您使用的是哪个版本，但您的问题可能已在 NUnit 2.6.3 中修复。有关错误报告，请参见[此处](https://bugs.launchpad.net/nunit-3.0/+bug/1069666)。

# c# - 如何确定控制台应用程序是否从批处理文件中执行？

> ID：14817943
> 
> 赞同：0
> 
> 时间：2013-02-11T17:55:22.303
> 
> 标签：c#, batch-file

我有一个控制台应用程序，我需要在其中检测它是否是从命令行执行的，而不是从批处理文件中执行的。我要保护

```
 Console.Write ( "Press any key to exit" );
            Console.ReadKey ( true );
            Console.WriteLine ( ); 
```

从批处理文件中执行应用程序时执行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T17:57:17.220

你可以做一些疯狂的事情（比如获取父进程，看看它得到了什么参数等），但是如果你控制应用程序只需添加一个命令行参数，称之为“批处理模式”或其他任何东西，当用它调用程序时让它非交互式的。

# ios - UICollectionView、分页和clipsToBounds

> ID：14817960
> 
> 赞同：3
> 
> 时间：2013-02-11T17:56:17.603
> 
> 标签：ios, objective-c, uikit, uicollectionview

我有一个集合视图，其内容水平滚动，需要在设备的整个宽度上可见。集合视图已`clipsToBounds`设置为`NO`，它的框架很`600`宽，`pagingEnabled`设置为`YES`。

我正在寻找的效果是内容似乎会在另一个视图下滑动，但是当单元格滚动到集合视图的框架之外时，它会被删除以便可以重复使用。

任何人都知道我怎样才能让它发挥作用，或达到类似的效果？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T22:24:09.610

下面是我发现获得这种效果的最简单方法。它涉及您的收藏视图和一个额外的秘密滚动视图。

**设置您的收藏视图**

*   设置您的集合视图及其所有数据源方法。
*   框架集合视图；它应该跨越您希望可见的整个宽度。
*   设置集合视图的`contentInset`：

    ```
    _collectionView.contentInset = UIEdgeInsetsMake(0, (self.view.frame.size.width-pageSize)/2, 0, (self.view.frame.size.width-pageSize)/2); 
    ```

这有助于正确偏移单元格。

**设置你的秘密滚动视图**

*   创建一个滚动视图，将其放置在您喜欢的任何位置。`hidden`如果您愿意，可以将其设置为。
*   将滚动视图边界的大小设置为页面所需的大小。
*   将自己设置为滚动视图的代表。
*   将其设置`contentSize`为集合视图的预期内容大小。

**移动手势识别器**

*   将秘密滚动视图的手势识别器添加到集合视图中，并禁用集合视图的手势识别器：

    ```
    [_collectionView addGestureRecognizer:_secretScrollView.panGestureRecognizer];
    _collectionView.panGestureRecognizer.enabled = NO; 
    ```

**代表**

```
- (void) scrollViewDidScroll:(UIScrollView *)scrollView {
    CGPoint contentOffset = scrollView.contentOffset;
    contentOffset.x = contentOffset.x - _collectionView.contentInset.left;
    _collectionView.contentOffset = contentOffset;
} 
```

随着滚动视图的移动，获取它的偏移量并将其设置为集合视图的偏移量。

我在这里写了关于这个的博客，所以请查看此链接以获取更新： http: [//khanlou.com/2013/04/paging-a-overflowing-collection-view/](http://khanlou.com/2013/04/paging-a-overflowing-collection-view/)

# jquery - 如何在 Yii ECHMultiSelect 小部件中启用过滤器插件选项？

> ID：14817965
> 
> 赞同：1
> 
> 时间：2013-02-11T17:56:52.580
> 
> 标签：jquery, yii, multi-select, yii-extensions

我有以下代码在 Yii 中生成一个 jquery ech 多选菜单小部件。（埃里克·海因兹多选）。不幸`filter => true`的是，似乎没有启用过滤器。

如何为此启用过滤器？似乎 filter true 开关应该这样做。

当前代码：

```
$this->widget('ext.echMultiSelect.EchMultiSelect', array(
 'model' => $model,
 'dropDownAttribute' => 'isolates',     
 'data' => $data,
 'dropDownHtmlOptions'=> array(
      'style'=>'',
      'id'=>'isolates_select'
 ),
 'options'=> array(
      'header'=> false,
      'height'=>175,
      'minWidth'=>350,
      'position'=>array('my'=>'left top', 'at'=>'left top'),
      'selectedText' =>Yii::t('application','# selected'),
      'selectedList'=>1,
      'show'=>'',
      'hide'=>'',
      'autoOpen'=>false,
      'noneSelectedText'=>'-- select --',
      'multiple'=>true,
      'classes'=>'',
      'filter'=>true,
 ),  
 'filterOptions'=> array(
      'width'=>150,
 ),
)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T20:22:54.303

弄清楚了。标头也必须设置为 true。

```
 'header'=> true, 
```

# jquery - 使用 JQuery 为具有相同名称的多个选择分配不同的值

> ID：14817967
> 
> 赞同：0
> 
> 时间：2013-02-11T17:56:59.917
> 
> 标签：jquery, select

这是我关心的问题，更改值以选择具有相同名称的表单的最佳方法是什么。这是代码，我无法更改 html 结构：

```
<div id="SelectTable">
    <div class="SelectClass">
        <label class="SelectLabel>Title</label>
        <div class="SelectOption>
            <select name="cat[]">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
            </select>
        </div>
    </div>
    <div class="SelectClass">
        <label class="SelectLabel>Title</label>
        <div class="SelectOption>
            <select name="cat[]">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
            </select>
        </div>
    </div>
    <div class="SelectClass">
        <label class="SelectLabel>Title</label>
        <div class="SelectOption>
            <select name="cat[]">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
            </select>
        </div>
    </div>
</div> 
```

选择它们以将不同的值 (.val()) 分配给它们的最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T18:00:37.767

```
$('select[name^="cat"]').each(function(index,element){
//do stuff to each individually.
element.val(index); //sets the val to the index of the element, which, you know, is useless
}); 
```

这应该选择名称以 cat 开头的每个元素（名称后的方括号让我害怕。）然后遍历它们以便您独立更改它们的 val。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T18:00:51.897

像这样[`eq()`](http://api.jquery.com/eq/)精确定位每个`select`：

```
$('select[name="cat[]"]').eq(0).val(3);  // first select
$('select[name="cat[]"]').eq(1).val(2);  // second select
$('select[name="cat[]"]').eq(2).val(1);  // third select 
```

`$('select[name="cat[]"]')`返回所有匹配的元素（在您的情况下为 3 个）然后`.eq()`用于

> 将匹配元素集减少到指定索引处的元素

[这里的工作示例](http://jsfiddle.net/MCU2V/)

# java - 将项目添加到现有的 svg 图像

> ID：14817972
> 
> 赞同：1
> 
> 时间：2013-02-11T17:57:07.967
> 
> 标签：java, svg, batik, plantuml

大家下午好;

我目前正在开发一个 Java 项目，尝试创建一个桌面工具。我的问题是我现在正在使用框架（plantuml）来获取 svg 格式的图形。但是，我想更改 svg 输出中的现有项目（或我们可以说的组件）并以另一种方式显示它（例如添加细节）。我对此进行了一些研究，发现两个框架可以帮助我实现目标；

1.) [http://xmlgraphics.apache.org/batik/](http://xmlgraphics.apache.org/batik/) 2.) [http://svgsalamander.java.net/](http://svgsalamander.java.net/)

问题; 有没有其他框架可以帮助我操纵现有的 svg？我应该使用哪一个，我应该如何使用我有点迷茫。我不知道从哪里开始。

假设是：我无法改变有关植物的任何事情。所以我只有一个 .svg 格式的图像。

问候 ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T18:04:57.953

我听说过蜡染，我知道它很受欢迎，但我从未使用过它。过去，我不得不在我的程序中以编程方式生成/更改 SVG 几次，无论是在 Java、Javascript 还是 C++ 中。我总是用手做，这意味着：

*   使用 Java 的标准 org.w3c.dom 或其他一些 DOM 库；
*   使用 Java 的标准 org.xml.sax 或其他一些 SAX 库。

SVG 是一个 XML 应用程序，因此使用上面列出的两个通用 XML API 非常容易操作。您基本上加载 SVG 文件并通过调用 API 的适当方法开始添加/删除/更改元素。

这是一个使用 SAX for Java 的小例子。我意识到我有点生疏了；该代码似乎可以工作，但欢迎 SAX/XML/Java 大师进行清理。它对使用 Inkscape（矢量编辑程序）生成的 SVG 文件进行操作，但这里讨论的概念适用于任何 SVG（甚至一般的 XML）文档。基本上，它通过改变 XML 元素流来工作；它在图形中的每个对象附近插入一个渐进式标签。

SAX 是基于事件的；在 XML 解析期间引发事件。该代码处理 3 个不同的事件：

*   **startDocument**在 XML 文档的开头引发；我们使用这个事件来重置累进计数器。
*   **startElement**在 XML 元素的开头引发；如果元素是**路径**（在 SVG 中描述形状的常用元素），我们会记下它的位置（**cx**，**cy**；限定词**sodipodi**是 Inkscape 的旧名称）。
*   **endElement**在 XML 元素的末尾引发；如果元素是**路径**，我们*会引发*导致标签生成的事件。我们使用 SVG 元素**文本**将标签添加到文档中。

    ```
    import java.io.File;
    import java.io.FileInputStream;

    import javax.xml.transform.Result;
    import javax.xml.transform.sax.SAXTransformerFactory;
    import javax.xml.transform.sax.TransformerHandler;
    import javax.xml.transform.stream.StreamResult;

    import org.xml.sax.Attributes;
    import org.xml.sax.InputSource;
    import org.xml.sax.SAXException;
    import org.xml.sax.XMLFilter;
    import org.xml.sax.XMLReader;
    import org.xml.sax.helpers.AttributesImpl;
    import org.xml.sax.helpers.XMLFilterImpl;
    import org.xml.sax.helpers.XMLReaderFactory;

    public class SVGMod {

      public static void main(String argv[]) {

        try {
            SAXTransformerFactory factory = (SAXTransformerFactory)SAXTransformerFactory.newInstance();
            TransformerHandler serializer = factory.newTransformerHandler();
            Result result = new StreamResult(new File("Output.svg"));
            serializer.setResult(result);

            XMLReader reader = XMLReaderFactory.createXMLReader();
            reader.setFeature("http://xml.org/sax/features/namespaces", true);
            reader.setFeature("http://xml.org/sax/features/namespace-prefixes", true);

            XMLFilter filter = new XMLFilterImpl() {

                private int x;
                private int y;
                private int cnt;

                @Override
                public void startDocument() throws SAXException {
                    super.startDocument();

                    cnt = 0;
                }

                @Override
                public void startElement(String uri, String localName,
                        String qName, Attributes atts) throws SAXException {
                    super.startElement(uri, localName, qName, atts);

                    if (qName.equals("path")) {
                        int xIndex = atts.getIndex("sodipodi:cx");
                        int yIndex = atts.getIndex("sodipodi:cy");

                        if (xIndex != -1 && yIndex != -1) {
                            x = (int)Float.parseFloat(atts.getValue(xIndex));
                            y = (int)Float.parseFloat(atts.getValue(yIndex));
                            ++cnt;
                        }
                    }
                }

                @Override
                public void endElement(String uri, String localName,
                        String qName) throws SAXException {
                    super.endElement(uri, localName, qName);

                    if (qName.equals("path")) {
                        AttributesImpl atts = new AttributesImpl();
                        atts.addAttribute(uri, "", "x", "CDATA", new Integer(x).toString());
                        atts.addAttribute(uri, "", "y", "CDATA", new Integer(y).toString());
                        atts.addAttribute(uri, "", "fill", "CDATA", "red");
                        super.startElement(uri, "", "text", atts);
                        char[] chars = ("Object #: " + cnt).toCharArray();
                        super.characters(chars, 0, chars.length);
                        super.endElement(uri, "", "text");
                    }
                }
            };
            filter.setContentHandler(serializer);
            filter.setParent(reader);

            filter.parse(new InputSource(new FileInputStream("Input.svg")));
        } catch (Exception e) {
            e.printStackTrace();
        }
      } 
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-28T08:47:49.603

无论如何，您可能想要修改 PlantUML 路线。在 PlantUML 论坛 * [http://sourceforge.net/apps/phpbb/plantuml/viewforum.php?f=1](http://sourceforge.net/apps/phpbb/plantuml/viewforum.php?f=1) 中，您可以要求一个插件架构，该架构允许按照 PlantUML 修改 svg。这样一来，您的更改将与 PlantUML 所做的相比更加“兼容”，而不是您只进行自己的修改方法。

# iphone - 允许通用 iOS 版本在 iPad1 上运行，但不能在 iPod touch 3G 上运行

> ID：14817977
> 
> 赞同：3
> 
> 时间：2013-02-11T17:57:20.723
> 
> 标签：iphone, ipad, ipod-touch, info.plist

据我所知，您无法指定任何“性能”标准来通过 info.plist 排除特定的 iOS 设备。

是否有可能通过 info.plist 允许通用应用程序在 iPad1 上运行，但不能在 iPhone 3GS/3G 上运行？现在我使用陀螺仪要求（我的应用程序确实使用了）作为仅支持 iPhone 4+ 和 iPad 2+ 的拐杖。

明确地说，我想让应用程序在 iPad1 上的 App Store 中可供下载，而不是在 iPhone 3GS 上。这个问题与代码中设备的运行时查询无关。

我最好/唯一的选择是创建多个二进制文件，并从 iPad 构建（通常称为“HD”构建）中删除陀螺仪构建，但将其留在那里用于 iPhone/iPod touch？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T23:54:55.290

看这个问题： [Determine device (iPhone, iPod Touch) with iPhone SDK](https://stackoverflow.com/questions/448162/determine-device-iphone-ipod-touch-with-iphone-sdk)

它涵盖了不同 iOS 设备的确定。因此，您可以明确支持（或不支持）某些特定模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T21:00:14.080

要求 armv7 将丢弃所有 <3gs，但仍包括 ipad1。这是我看到的最接近的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T19:14:46.940

简短的回答似乎是“不”。

从好的方面来说，iPad1 只有 256Mb 内存，所以无论如何你都需要让你的应用程序适合 256Mb，所以它应该可以在 3GS 上运行。CPU速度的差异是显着的。

# javascript - Nivo Slider：更改图像后控制导航拇指松动光标指针属性

> ID：14817978
> 
> 赞同：0
> 
> 时间：2013-02-11T17:57:30.490
> 
> 标签：javascript, jquery, slider, carousel, nivo-slider

我被这个困住了。希望您能够帮助我。我正在为一个站点调整 Nivo Slider（我必须使用 jquery 1.5.1）。一切都很好，但现在的问题是，当图像更改时，控件导航拇指会失去其光标指针属性。我的意思是，单击仅在幻灯片第一次运行时起作用，但是当图像更改时，拇指中的控件不允许单击。

在这里你可以看到滑块：
[http ://www.sixplus1.com.mx/stackoverflow/carrusel_stack.html](http://www.sixplus1.com.mx/stackoverflow/carrusel_stack.html)

nivo 滑块脚本：
[http ://www.sixplus1.com.mx/stackoverflow/js/jquery_kfu.nivo.slider.pack.js.js](http://www.sixplus1.com.mx/stackoverflow/js/jquery_kfu.nivo.slider.pack.js.js)

我一直在挖掘脚本以找到原因，大约在第 175 行到第 201 行，特别是第 193 行是将类添加到缩略图导航控制器的函数，

```
`$('.nivo-controlNav a:eq('+vars.currentSlide+')',slider).addClass('active');
$('.nivo-controlNav a',slider).live('click',function(){
if(vars.running)return false;
if($(this).hasClass('active'))return false;
clearInterval(timer);
timer='';]` 
```

但我找不到任何有帮助的东西。我将“光标：指针”属性设置为拇指的所有状态（在 css 上）。它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T18:07:07.270

这样做的原因是因为你`.nivo-slice`越过你的`.nivo-controlNav`所以当你将它悬停时，你实际上是在切片的顶部而不是`.nivo-controlNav`.

要解决这个问题，通过查看您的代码，您只需添加一个`z-index`

```
.nivo-controlNav {
 z-index:10;
} 
```

在您的情况下，您需要一个高于 5`.nivo-slice`的 z-index，因为 z-index 为 5。

# vb.net - VB.net 连接到嵌入式数据库

> ID：14817983
> 
> 赞同：1
> 
> 时间：2013-02-11T17:57:36.637
> 
> 标签：vb.net, database-connection

我有一个用 VB.NET 编写的独立 Windows 窗体应用程序，该应用程序当前连接到本地 Access DB（.mdb 文件）并使用多个表中的数据。它从不写入也不修改数据库。我试图弄清楚如何保护这个数据库，这样用户就无法访问它。我认为最好的方法是将数据库存储为项目中的嵌入式资源。但是，我不知道如何使这项工作。

我已将 .mdb 文件添加到项目资源中，并将其属性设置为“嵌入式资源”和“请勿复制”。但是现在我如何引用数据库来创建连接？

在我使用连接字符串“Provider=Microsoft.Jet.OLEDB.4.0; Data Source=MyDatabase.mdb”之前

现在如何参考嵌入式资源编写连接字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T22:32:26.693

“我认为最好的方法是将数据库存储为项目中的嵌入式资源。”

这通常与旧的 skool 安全性有关，在过去，使用 Access dBs 作为后端的 DotNetNuke 开发人员实际上将 .mdb 重命名为 .resources，因为您无法从 Web 下载资源文件。

“将数据库导出到 xml 或类似的东西然后使用流阅读器而不是数据库连接会更好吗？”

不可以。[您无法从流中读取 Access 文件，](https://stackoverflow.com/a/14555011/495455)而且 XML dB 的并发支持比 Access 数据库还要少。

**如果您确实需要保护数据，那么您绝对选择了错误的数据存储。**

@JohnBus​​tos 写道“远程存储数据库并让程序通过互联网访问它。”

请不要这样做。如果有任何东西将其放在网络共享上并限制访问。然后看看将访问 dB 升级到 SQL Server。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T11:08:57.113

是的，我遇到了同样的问题，我将数据库转换为 XML 甚至是嵌入的 TXT 文件。它工作得很好！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-03T18:27:34.387

对不起，我从来没有关闭过这个。

我的解决方案甚至比那些建议的更简单。您可以将 .mdb 文件添加到项目本身，而不会弄乱整个“资源”业务。然后将文件的复制到输出属性设置为“不复制”。因此 .mdb 被编译到应用程序中，但文件本身对用户不可用。

# xaml - Rad Mask TextBox：将文本更改为上部并将光标定位在文本的末尾。

> ID：14817987
> 
> 赞同：0
> 
> 时间：2013-02-11T17:57:45.373
> 
> 标签：xaml, silverlight-4.0, telerik, radmaskedtextbox

我有 Rad Mask 文本框和一个按钮。因此用户可以在文本框中输入任何大小写。单击按钮时，我正在根据文本和事件获取一些记录，我必须将文本更改为上部，修剪并将插入符号定位到结束。

我注意到，如果输入大写字母，我会得到所有场景，但是当输入小写字母时，光标的位置会指向开头。

这就是我尝试过的。

```
 txtSearch.MaskedText = txtSearch.MaskedText.ToUpperInvariant().Trim();
        txtSearch.SelectionOnFocus = SelectionOnFocus.CaretToEnd; 
```

我真的很感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T00:02:18.520

SelectionStart 解决了这个需求。

```
 Dispatcher.BeginInvoke(() =>
        {
            if (txtSearch.MaskedText != null)
            {
                txtSearch.MaskedText = txtSearch.MaskedText.ToUpper();
                txtSearch.SelectionStart = txtSearch.MaskedText.Length;
                txtSearch.Focus();
            }
        }); 
```

# bash - 如何在 bash 中设置两级重定向？

> ID：14817988
> 
> 赞同：2
> 
> 时间：2013-02-11T17:57:46.340
> 
> 标签：bash, io-redirection

在 bash 脚本中，我想：

1.  将每个日志输出到一个文件中（`loglowlevel.txt`），
2.  但在终端（高级）中**只使它们中的少数可见，**
3.  比如说，我有 20 个高级日志和 60 个低级日志。因此，我想保持低级日志“重定向命令”免费，并且只将重定向内容重定向到高级日志。

## 拿 1

`stdout`我写了一个重定向到`sterr`FD的基本脚本3.`loglowlevel.txt`被正确填充。但我坚持为高级日志指定选项。

```
#!/bin/bash - 

# create fd 3
exec 3<> loglowlevel.txt
# redirect stdout and stderr to fd 3
exec 1>&3
exec 2>&3

# high-level logs' redirection below is wrong
echo "high-level comment" 3>&1

# low-level logs should remain redirection-free, as below
echo "low-level comment"
ls notafile

# close fd 3
3>&- 
```

这是它的作用：

```
$ redirect.sh
$ cat loglowlevel.txt 
low-level comment
ls: cannot access notafile: No such file or directory 
```

我希望`high-level comment`也能在终端上打印。

## 拿 2

第二个脚本，不同的策略：

```
#!/bin/bash - 

function echolowlevel() {
    echo $1 &>loglowlevel.txt
}

function echohighlevel() {
    echo $1 |& tee loglowlevel.txt
}

echohighlevel "high-level comment 1"
echolowlevel "low-level comment 1"
echohighlevel "high-level comment 2"
ls notafile 
```

这是它的作用：

```
$ redirect.sh 
high-level comment 1
high-level comment 2
ls: cannot access notafile: No such file or directory
$ cat loglowlevel.txt 
high-level comment 2 
```

这里有两个问题：

1.  来自的错误消息`ls`打印在终端中，而我只需要在`loglowlevel.txt`.
2.  `high-level comment 1`已经被吃掉了`loglowlevel.txt`。

## 问题

**我更喜欢Take 1**背后的想法。但是如何在保留这两个命令`high-level comment`的同时将其输出到标准输出？`exec`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T18:10:58.997

```
#!/bin/sh

FIFO=/tmp/fifo.$$  # or use tmpfile, or some other mechanism to get unique name
trap 'rm -f $FIFO' 0
mkfifo $FIFO
tee -a loglowlevel.txt < $FIFO &

exec >> loglowlevel.txt
exec 3> $FIFO

echo high-level >&3  # Appears on original stdout and in loglowlevel.txt
echo low-level       # Appears only in loglowlevel.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T19:29:13.320

对于支持进程替换的 shell 和操作系统，William Pursell 的答案的较短版本：

```
exec 3>> >(tee -a loglowlevel.txt)
exec >> loglowlevel.txt

echo high-level >&3  # Appears on original stdout and in loglowlevel.txt
echo low-level       # Appears only in loglowlevel.txt 
```

在此示例中，写入文件描述符 3 会有效地写入`tee`附加到文件“loglowlevel.txt”的后台进程的标准输入。

对此功能的支持各不相同。它不是 POSIX 标准的一部分，但至少由`bash`、`ksh`和`zsh`. 每个 shell 都需要一定数量的操作系统支持。`bash`例如，该版本需要命名管道（ `mkfifo`William 的解决方案中创建的对象）的可用性或通过`/dev/fd`.

# android - 如何使用 android 4.0 中的代码启动屏幕截图服务

> ID：14817999
> 
> 赞同：1
> 
> 时间：2013-02-11T17:58:10.450
> 
> 标签：android, android-service

我想知道如何使用代码在 android 4.0 中启动屏幕截图服务。我知道我可以使用电源按钮截取屏幕截图。但我想知道如何使用代码来做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T18:01:24.070

这是不可能的，除非有根设备用户。出于明显的隐私和安全原因，应用程序无法截取其他应用程序的屏幕截图。