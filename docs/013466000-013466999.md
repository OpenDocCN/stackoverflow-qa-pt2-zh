# StackOverflow 问答 13466000-13466999

# javascript - socket.io 应用结构

> ID：13466005
> 
> 赞同：1
> 
> 时间：2012-11-20T03:08:11.520
> 
> 标签：javascript, node.js, model-view-controller, socket.io

任何人都可以为 socket.io 应用程序推荐客户端 MVC 框架吗？小、轻、紧是我唯一的要求。

我在几个与工作相关的项目中使用了backbone.js，它很棒，虽然主要是为REST接口而不是WebSockets构建的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T05:03:42.487

如果您已经了解骨干网，没有理由不继续使用它！

[如何将backbone.js 与websockets/socket-io/nowjs 一起使用](https://stackoverflow.com/questions/6657968/how-to-use-backbone-js-with-websockets-socket-io-nowjs)

# java - 如何战争文件在命令提示符下执行 Jetty-runner

> ID：13466009
> 
> 赞同：0
> 
> 时间：2012-11-20T03:08:19.283
> 
> 标签：java, jetty, command-prompt

我正在将 java 类文件转换为 War 文件，所以我想通过命令提示符执行 war 文件。任何人都可以向我建议如何通过命令提示符成功运行。

当我通过命令提示符运行时，我的 Eclipse 控制台中显示错误。

```
D:\> java -jar c:\Jetty-runner.jar --port 8080 C:\firstsample.war 
```

现在正在部署我的war文件，但它会出错--找不到事务管理器如果您的webapp需要一个，请配置一个，我遇到了这种类型的错误......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T08:11:57.227

只需检查您的选择

```
D:\> java -jar c:\Jetty-runner.jar -port 8080 -C:\ mysample.war 
```

它应该像

```
 D:\>java -jar C:\Jetty-runner.jar --port 8080 C:\mysample.war 
```

最好保留在`jetty-runner`同`mysample.war`一个目录中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T15:34:26.077

这是因为 jetty-runner 总是在生产模式下运行它，所以你必须指定数据库，并确保在 database.yml 文件中你有正确的生产模式数据库配置，例如

```
$java -Ddb=/Users/gouravtiwari/rubyapps/myapp/db/development.sqlite3 -jar jetty-runner.jar myapp.war 
```

还有你的 database.yml：

```
development:
  adapter: sqlite3
  database: db/development.sqlite3

test: &test
  adapter: sqlite3
  database: db/test.sqlite3

production:
  adapter: sqlite3
  database: <%= java.lang.System.getProperty('db') %> 
```

# java - 在 Scala 中使用 Java API 查询 Couchbase 中的视图会引发超时异常

> ID：13466010
> 
> 赞同：1
> 
> 时间：2012-11-20T03:08:24.087
> 
> 标签：java, couchbase

编辑：请注意，这在 java 1.6 中完美运行，但在 java 1.7 中失败。

我一直在努力让 Couchbase 2.0 java API 与视图一起工作。它非常适合获取密钥并将其放入存储桶中。

当我使用 Java 1.7 运行下面的 scala 代码时，出现以下异常：

```
scala> ERROR com.couchbase.client.ViewNode$EventLogger:  Connection timed out: [localhost/127.0.0.1:8092(closed)] 
```

我也尝试在连接构建器中设置超时无济于事。

```
 import java.net.URI
    import com.couchbase.client.CouchbaseClient
    import scala.collection.JavaConversions._
    val uris = List(URI.create("http://127.0.0.1:8091/pools"))
    val client = new CouchbaseClient(uris, "test", "")
    val view = client.asyncGetView("date", "dates") 
```

但是，下面的 python 代码运行良好，连接到视图，并具有正确的输出：

```
 from couchbase.client import Couchbase
    client = Couchbase("localhost:8091", "username", "password")
    bucket = client["test"]
    view = bucket.view("_design/date/_view/dates")
    count = 0
    for row in view:
        count = count + 1
    print(count) 
```

任何想法如何正确连接？我试图在我的代码中完全复制他们的示例。不幸的是，使用 python 不是这个项目的选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T07:21:51.897

我们知道这个问题（http://www.couchbase.com/issues/browse/JCBC-151）。

这不是你的错或 scalas，只是我们的客户端目前在连接 java 7 时遇到了一些问题。如果这个问题得到解决，我相信你的代码会按预期工作。

# ruby-on-rails - Rails：显示错误消息 [bootstrap-sass，formtastic]

> ID：13466014
> 
> 赞同：0
> 
> 时间：2012-11-20T03:09:29.653
> 
> 标签：ruby-on-rails, forms, formtastic

我正在使用 Bootstrap-Sass 和 Formstatic。我认为应该在带有 Formstatic 的字段旁边自动显示一条错误消息，如下图所示：（[来源：][[asciicasts.com](http://asciicasts.com/system/photos/227/original/E185I06.png)][）][![这里](../Images/d7a33f77a542db4266a950d4f89de362.png)](https://i.stack.imgur.com/a7Qxs.png)

但即使用户输入了无效输入，我的应用程序也不会显示错误消息。这似乎是一个简单的问题，但我无法弄清楚背后的原因。

**后控制器**

```
# POST /posts
# POST /posts.json
  def create
@post = Post.new(params[:post])
@post.view = 0
@post.like = 0
@post.hate = 0

respond_to do |format| 
  if @post.save
    @posts = Post.paginate(:page => params[:page], order: 'like desc', per_page: 10) 
    format.html { redirect_to posts_path }
    format.json { render json: @post, status: :created, location: @post }
  else
    format.html { render action: "new" }
    format.json { render json: @post.errors, status: :unprocessable_entity }
  end
end 
```

结尾

**后模型**

```
 validates :name,  :presence => true
  validates :content, :presence => true,
                      :length => { :minimum => 10, :maximum => 300} 
```

**_form（发布）**

```
<% @post = Post.new %>
<%= semantic_form_for @post do |f| %>
<%= f.semantic_errors :name %>
<%= f.inputs do %>
     <%= f.input :name, :label => 'name' %>
     <%= f.input :content, :label => 'body' %>
<% end %>
<%= f.actions do %>
    <%= f.action :submit, :button_html => { :class => "btn btn-primary" }, :as => :button  %>
    <%= f.action :cancel, :as => :link %>
<% end %> 
```

**更新：**在 PostController 中，我删除了以下两行

```
 #format.html { render action: "new" }
    #format.json { render json: @post.errors, status: :unprocessable_entity } 
```

并添加

```
 render @post.errors 
```

然后，我得到了

```
@messages={:name=>["can't be blank"], :content=>["can't be blank", "is too short (minimum is 10 characters)"]}> 
```

**所以问题是我渲染json的方式是错误的。有人可以帮我解决它吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T04:37:16.627

您在内容中传递存在验证`name`和`content`长度验证，这意味着如果您未在其中输入任何值，`name`否则`content`它将给出错误`can't be blank`，如果`content`值长度小于 10 且大于 300，那么它将给出错误。

如果要通过无效输入的验证，则必须通过[validates_format_of](http://apidock.com/rails/v2.3.8/ActiveModel/Validations/ClassMethods/validates_format_of)验证。

您在名称或内容中输入了无效输入？你能提供你输入的无效输入吗？

**更新**

```
 # in /config/initializers/formtastic_config.rb. 

 Formtastic::SemanticFormBuilder.inline_errors = :sentence 
```

**见视频**：[http ://railscasts.com/episodes/185-formtastic-part-2](http://railscasts.com/episodes/185-formtastic-part-2)

**获取代码** ：[https ://github.com/ryanb/railscasts-episodes/tree/master/episode-185](https://github.com/ryanb/railscasts-episodes/tree/master/episode-185)

# php - 支付货币价值（PHP）

> ID：13466015
> 
> 赞同：0
> 
> 时间：2012-11-20T03:09:38.657
> 
> 标签：php, math, division

首先我认为这是一个愚蠢的问题，我应该做一些搜索，这很容易解决。但我怕我什么也去不了！

我需要做的事情很简单。我有一个 U$ 值，我想将它除以 12。就是这样。

嗯，问题是这个值是由一个函数输出的，并且回显 ok，看：

```
<?php 
$preconormal = wpsc_the_product_price(); // it echoes like 99.90

$precoja = str_replace (".", "", $preconormal); 

echo $precoja; //echo ok -> 9990

$quantas = '12';

$parcela = $precoja/$quantas; // ok, so divide 9990 by 12, right?

echo $parcela; //no!!!!! it echoes 0 :(

?> 
```

我真的希望你能帮助我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T03:13:22.753

您正在尝试划分字符串，如果您使用数字说

$量子 = 12; $precoja = 9990;

发生什么了？

它应该修复除法，在这种情况下，在数学之前，将你的变量转换为整数

```
 $quantas = intval($quantas);
 $precoja = intval($precoja);
 //your manipulation here..l 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T03:15:45.773

去掉引号...

```
$quantas = '12'; 
```

到

```
$quantas = 12; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T03:15:57.530

```
$precoja = floatval($preconormal)*100;
$preconormal = $precoja / 12; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T03:16:06.220

我会通过删除单引号和/或第 6 行来更改您的第 5 行，`$parcela = (int)$precoja / (int)$quantas;`因为一旦您使用该函数，`str_replace`那么 $precoja 就会变成一个字符串。前面还有单引号 `= '12'`也是一个字符串，该除法返回 0。

# php - 为 PHP 编写 C/C++ 绑定和库

> ID：13466022
> 
> 赞同：2
> 
> 时间：2012-11-20T03:10:46.633
> 
> 标签：php, c++, c, bind

我正在寻找有关为 PHP 环境编写 c/c++ 库/绑定的示例和更多信息？如果有人可以推荐一个好的起点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T03:14:40.863

基本上，您可以编写一个 PHP 扩展来执行此操作。

按照这里的教程：http: [//devzone.zend.com/303/extension-writing-part-i-introduction-to-php-and-zend/](http://devzone.zend.com/303/extension-writing-part-i-introduction-to-php-and-zend/)

还有一个SO话题：[How to make a PHP extension](https://stackoverflow.com/questions/3632160/how-to-make-a-php-extension)

# .net - 如何循环遍历datagridview 1并将循环结果以不同的形式和数据库表复制到datagridview2

> ID：13466028
> 
> 赞同：1
> 
> 时间：2012-11-20T03:11:13.737
> 
> 标签：.net, mysql, vb.net, winforms, datagridview

我需要这方面的帮助，我会尽可能详细地解释它。

假设`Form1`我有一个与`Datagridview1 (DGV1)`columns相关的内容。`DataBound``Table1``TransactionNumber(Double), FormName (varchar), Description(varchar), Posted(text)`

在`Form2`，我有另一个`DGV2`是`DataBound`与`Table2`列`TransactionNumber(Double), Formname(VarChar), Description(VarChar), Quantity(Double)`。

在`Form1`我必须`Textboxes`将数据添加到 Columns in`DGV1`和 2 Buttons `Add and Post`。当我单击时，`Post`我想遍历`DGV1`并找到给定的所有数据`TransactionNumber`，然后将这些数据复制到`DGV2`in `Form2`。

我真的需要帮助。任何提示或帮助将不胜感激。谢谢，麻烦您了！

我仍然没有按钮帖子的代码，因为我仍在试图弄清楚如何做到这一点......我将尽快用代码更新这篇文章..

PS还在学习

**新问题，但仍与原始问题相关**

**我调整了你的代码，它现在添加了数据。**

我也可以以 mdi 形式使用它吗？

```
Dim occurences As New Dictionary(Of String, Double)

For Each DGVR As DataGridViewRow In Datagridview1.Rows

    If (Not DGVR.IsNewRow) Then

        If (occurences.ContainsKey(DGVR.Cells(1).Value.ToString())) Then

            occurences(DGVR.Cells(1).Value.ToString()) = Double.Parse(occurences(DGVR.Cells(1).Value.ToString()).ToString()) + Double.Parse(DGVR.Cells(4).Value.ToString())

        Else

            occurences.Add(DGVR.Cells(1).Value.ToString(), Double.Parse(DGVR.Cells(4).Value.ToString()))
        End If

    End If

Next

For Each KVP As KeyValuePair(Of String, Double) In occurences

    DataGridView2.Rows.Add(New Object() {KVP.Key, KVP.Value})

Next 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T17:00:58.940

不要为此讨厌我，因为这是我在这么短的时间内能做的最好的事情：

[http://www.fileswap.com/dl/KusycS0QTC/](http://www.fileswap.com/dl/KusycS0QTC/)

基本上它是一个具有 MDI 父窗体和两个子窗体的项目。我每个人都有一个 DGV，我将信息从一种形式转移到另一种形式。您必须进行必要的编辑以说明您的设置，但这应该足以让您了解如何去做您所追求的。

编辑：

可能的变化：

```
 Dim _Name As String = ""
     Dim _Last As String = ""

      For Each xRow In MasterForm.oTransferRows
            _Name = xRow.Cells("GVName").Value.ToString()
            _Last = xRow.Cells("GVLast").Value.ToString() 
```

**'应该插入下一行吗？**

```
 Dim _sqlInsert As String = String.Format("Insert testing(Name, LastName) Values  (@iName, @iLast)")
            Using conn As New SqlClient.SqlConnection("Server = localhost; Username= root; Password =; Database = test")
                Using cmd
                    With cmd
                        MsgBox("Connection Established")
                        .Connection = conn
                        .Parameters.Clear()
                        'Create Insert Query
                        .CommandText = _sqlInsert

                        .Parameters.Add(New SqlParameter("@iName", _Name))
                        .Parameters.Add(New SqlParameter("@iLast", _Last))
                    End With
                    Try
                        conn.Open()
                        Me.Validate()
                        cmd.ExecuteNonQuery()
                    Catch ex As Exception
                        MsgBox(ex.Message.ToString())
                    End Try
                End Using
            End Using

        Next 
```

* * *

![在此处输入图像描述](../Images/c9da0151a584b8ef7118414917594805.png)

# ios - 在后台启用接近传感器

> ID：13466033
> 
> 赞同：3
> 
> 时间：2012-11-20T03:11:40.820
> 
> 标签：ios, background, voip, proximity

我正在开发一个 VoIP 应用程序。我想像本地调用一样使用接近传感器。来电时启用接近传感器。当呼叫在前台时它工作正常；但是当我把它放到后台时，接近传感器似乎无法工作。我能做些什么来改善这一点吗？

# java - 从桌面应用程序访问 Web 上的 SQLite 数据库

> ID：13466041
> 
> 赞同：1
> 
> 时间：2012-11-20T03:12:49.233
> 
> 标签：java, database, sqlite

我在网络服务器上有一个 SQLite 数据库。我想从典型的 Java 桌面应用程序访问数据库。目前，我正在做这件事... 将数据库文件下载到本地目录，根据需要执行查询。

但是，我无法对此执行任何更新查询。我怎样才能做到这一点。[关于实际数据库]

另一个问题是，在 java 中直接从 web 访问数据库（这可能吗），进行直接查询，更新任何内容等。

我怎样才能实现这种类型？

如果 db 文件在本地目录中，我已经编写了将 Java 连接到 SQLite 的代码，并且工作得很好。我必须做哪些更改或任何操作才能在网络服务器上建立指向文件的链接，而无需下载数据库文件。？

提前致谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T08:31:31.333

CL。说得对，如果您需要从桌面应用程序访问 Web 数据库，SQLite 不是一个合适的选择。

在小型网站中使用 SQLite 很好，这些应用程序必须从网站本身访问您的数据；但是，如果您需要从桌面访问数据，而无需下载数据文件，则无法使用 SQLite 和 HTTP 来实现。

您的 Web 应用程序的合适选择是[MySQL](http://dev.mysql.com/)或其他客户端/服务器数据库，这样您就可以从 Web 应用程序以外的任何地方连接到数据库服务，前提是服务器访问规则集允许（例如防火墙、授予认证等）。

在您的使用场景中，您将面临几个问题。

## 1) 安全

您将被迫违反安全原则，即必须保护数据库文件免受网络直接暴露；实际上，要从桌面访问您的 Web SQLite 数据库文件，您将被迫直接公开它，这是错误的，因为任何人都可以下载它并访问您的数据，根据定义，这些数据必须只能由您访问。

## 2) 无需下载即可更新

使用 HTTP 访问数据库文件只能导致请求的资源下载，因为 HTTP 是一种[无状态协议](http://en.wikipedia.org/wiki/Stateless_protocol)，所以当您请求 GET 甚至 POST 访问数据库时，Web 服务器会在一个解决方案中提供给您，句号。在极端合成中，没有机会直接将更改写回数据库文件。

## 3) 下载可更新性

您可以使用 HTTP GET 请求下载文件、读取数据、进行更改等等，但是如果您的在线数据库同时发生更改怎么办？数据一致性很容易受到影响。

## 可能有办法

如果您放弃使用 HTTP 为您的桌面应用程序访问数据库，那么您可以选择 FTP（前提是您具有访问资源的凭据）。FTP 允许您从文件读取数据和向文件写入数据，因此 - 在 Linux 上 - 您可以使用 FUSE 挂载远程 FTP 共享并像连接到本地文件系统一样访问它（例如，[请参阅本文](http://linux.byexamples.com/archives/344/mounting-ftp-host-to-local-directory-on-top-of-fuse/)）。

在综合中，您：

*   为 FTP 共享创建挂载点（即本地目录）
*   用于`curlftpfs`将远程 FTP 资源链接到您的挂载点
*   从您的应用程序访问此目录，就像它是一个常规目录一样

通过这种方式，您可以保持安全性，防止数据库文件暴露在 Web 上，并且您可以从桌面应用程序访问它。

也就是说，请考虑多个进程（桌面应用程序 + 网络服务器实例）对单个数据库文件的并发访问可能会导致问题（请参阅[此 SO 帖子](https://stackoverflow.com/questions/4060772/sqlite3-concurrent-access)以了解想法）。在构建您的解决方案之前请记住这一点。

最后，在您的使用场景中，我的建议是编写一些服务器端 Web 服务或 REST 接口，在身份验证下，让您与执行所需关键操作的数据库文件进行交互。

它安全、可靠且“可塑”，足以让您为所欲为。

* * *

## 编辑：

MySQL 被广泛用于网站或 Web 应用程序，因为它速度快、可扩展性强且相当可靠。在 StackOverflow 上激活 MySQL 服务器有点过时，而且报告起来很冗长，但在这种情况下，您可以在谷歌上搜索大量文章，讨论您选择的操作系统的此类主题。

然后使用 MySQL JDBC 驱动程序从 Java 桌面应用程序访问数据库。

但是，如果您的想法是坚持使用 SQLite，您基本上可以准备四个 Web 端点：

1.  [http://yourwebsite.com/select](http://yourwebsite.com/select)
2.  [http://yourwebsite.com/insert](http://yourwebsite.com/insert)
3.  [http://yourwebsite.com/update](http://yourwebsite.com/update)
4.  [http://yourwebsite.com/delete](http://yourwebsite.com/delete)

（注意我指定了“http”，但您可以考虑转移到 SSL 加密的 http 连接，也就是“https”，在[此处](http://en.wikipedia.org/wiki/HTTPS)和[此处](http://en.wikipedia.org/wiki/Secure_Sockets_Layer)查找详细信息。我不知道您正在运行哪个网络服务器，但仍然可以通过谷歌搜索一点点应该指出您一个很好的资源来正确配置 https。）

显然，您可以为任何类型的操作添加任何您喜欢的端点，甚至是更通用的`execute`，但只玩一会儿我的游戏。

对这些端点的请求是 POST，每个端点都会收到适当的参数，例如：

*   表名
*   字段
*   where 子句

...等等，但最重要的是安全性，所以你必须记住两件事：

**1\. 签署每个请求。**您可以定义一个秘密操作密钥（您的客户端和服务器都知道但从不以明文形式传播的字符串），并在散列函数中使用它来生成一个摘要，该摘要与其他参数一起作为无可争议的参数发送向服务器证明它收到的请求来自真实来源。这避免了您在每个请求中发送用户名和密码，如果您不使用 https，这将引入密码加密问题，并且涉及服务器必须能够使用相同的算法为相同的请求重建相同的签名. （我以 400Mph 的速度飞过这个东西，但是这个话题太大了，无法在这里正确处理。无论如何，我希望这可以为你指明正确的方向。）

**2\. Properly escape request parameters.** "Sanitize" parameters someone calls it, and I think the metaphor is correct. Generally speaking this process involves some filtering operations performed by the server's endpoint, but it basically could be written as "use prepared statements for your queries". If you don't it could be likely that some malicious attacker injects SQL code in requests to exploit your server in some manner.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T07:39:29.337

SQLite 是一个嵌入式数据库，并假定数据库文件可以直接访问。您的应用程序不[适合使用 SQLite](http://www.sqlite.org/whentouse.html)。

您应该使用客户端/服务器数据库。

在任何情况下，您都不应该在 Internet 上直接访问数据库；数据应该通过网络服务。

# php - 如果不执行，则与数组空值相交

> ID：13466045
> 
> 赞同：2
> 
> 时间：2012-11-20T03:13:36.997
> 
> 标签：php, arrays, array-intersect

如果数组 $same_white_pemasang 或 $same_black_pemasang 为空值，那么返回值会被忽略吗？

对于 $implodeWhiteJenisPemasang

```
$inputWhiteJenisPemasang = $verifikator['whiteJenisPemasang'];
$dataWhiteJenisPemasang = array();
foreach ($inputWhiteJenisPemasang as $bacaDataWhiteJenisPemasang) {
    if ($bacaDataWhiteJenisPemasang != "") { //jika inputnya kosong maka tidak akan dieksekusi
        $dataWhiteJenisPemasang[] = $bacaDataWhiteJenisPemasang;
    }
}
$implodeWhiteJenisPemasang = implode(", ", $dataWhiteJenisPemasang); 
```

对于 $implodeBlackJenisPemasang

```
$inputBlackJenisPemasang = $verifikator['blackJenisPemasang'];
$dataBlackJenisPemasang = array();
foreach ($inputBlackJenisPemasang as $bacaDataBlackJenisPemasang) {
    if ($bacaDataBlackJenisPemasang != "") { //jika inputnya kosong maka tidak akan dieksekusi
        $dataBlackJenisPemasang[] = $bacaDataBlackJenisPemasang;
    }
}
$implodeBlackJenisPemasang = implode(", ", $dataBlackJenisPemasang); 
```

数组相交

```
$same_white_pemasang = explode(', ', $implodeWhiteJenisPemasang);
$same_black_pemasang = explode(', ', $implodeBlackJenisPemasang);
if ($same_white_pemasang != "" && $same_black_pemasang != null) {
    $cekPemasang = array_intersect($same_black_pemasang, $same_white_pemasang);
} 
```

# playframework-2.0 - play framework 2.1 - 调度异步任务

> ID：13466047
> 
> 赞同：13
> 
> 时间：2012-11-20T03:13:42.247
> 
> 标签：playframework-2.0, scheduled-tasks, akka, playframework-2.1

在 play 的 2.0.x 文档中，您可以看到如何安排异步任务：

[http://www.playframework.org/documentation/2.0.4/ScalaAkka](http://www.playframework.org/documentation/2.0.4/ScalaAkka)

```
Akka.system.scheduler.schedule(0 seconds, 30 minutes, testActor, "tick") 
```

你怎么能用最近发布的 Play 2.1 实现同样的目标？？？

整个akka API似乎已经改变了......

我检查过：

[https://github.com/playframework/Play20/wiki/Highlights](https://github.com/playframework/Play20/wiki/Highlights) https://github.com/playframework/Play20/wiki/Migration 以及 [http://doc.akka.io/docs/akka/2.1.0- RC1/project/migration-guide-2.0.x-2.1.x.html](http://doc.akka.io/docs/akka/2.1.0-RC1/project/migration-guide-2.0.x-2.1.x.html)

还在这里问：[https ://groups.google.com/d/topic/play-framework/7VcwNea6QlM/discussion](https://groups.google.com/d/topic/play-framework/7VcwNea6QlM/discussion)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-20T08:38:13.690

使用[示例代码](https://github.com/playframework/Play20/blob/2.1-RC1/samples/scala/websocket-chat/app/models/ChatRoom.scala)和[Akka API](http://doc.akka.io/docs/akka/2.0.4/scala/scheduler.html)我进行了快速测试，对我有用。

比较 2.0.4 和 2.1RC1 之间的代码，我可以看到调度程序只有两个变化：

1.  替换进口

    ```
    // import akka.util.duration._
    import scala.concurrent.duration._ 
    ```

2.  添加导入：

    ```
    import play.api.libs.concurrent.Execution.Implicits._ 
    ```

`app/controllers/Application.scala`

```
package controllers

import play.api._
import play.api.mvc._
import play.libs.Akka

import akka.actor._
import scala.concurrent.duration._
import play.api.libs.concurrent.Execution.Implicits._

object Application extends Controller {

  def index = Action {

    // say hello
    Logger.info("hello, index action started")

    val Tick = "tick"
    val Tack = "tack"

    val tickActor = Akka.system.actorOf(Props(new Actor {
      def receive = {
        case Tick => Logger.info("that still ticks!")
        case Tack => Logger.warn("... 7 seconds after start, only once")
      }
    }))

    // Repeat every 5 seconds, start 5 seconds after start
    Akka.system.scheduler.schedule(
      5 seconds,
      5 seconds,
      tickActor,
      Tick
    )

    // do only once, 7 seconds after start
    Akka.system.scheduler.scheduleOnce(7 seconds, tickActor, Tack)

    Ok(views.html.index("Your new application is ready."))
  }

} 
```

**编辑**

Nota bene，正如我从 Julien 在该组的帖子中看到的那样，`defaultContext`仅导入就足够了：

```
import play.api.libs.concurrent.Execution.Implicits.defaultContext 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-05-16T16:00:14.813

[biesior的回答](https://stackoverflow.com/a/13469308/11236)很棒

但是，如果您不想，则*不必*通过演员。这是使用 good old 的相同答案`java.lang.Runnable`：

```
Akka.system.scheduler.schedule(5 minutes, 5 minutes, new Runnable {
  def run() {
    Logger.info("that still ticks!")
  }
})
Akka.system.scheduler.scheduleOnce(7 minutes, new Runnable {
  def run() {
    Logger.warn("... 7 seconds after start, only once")
  }
}) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-13T11:14:12.757

例如，在 java 中每周六上午 15 点运行一个任务：

```
DateTime now = new DateTime();

DateTime plannedStart = new DateTime()
    .withDayOfWeek(DateTimeConstants.SATURDAY)
    .withHourOfDay(15)
    .withMinuteOfHour(0)
    .withSecondOfMinute(0)
    .withMillisOfSecond(0);

DateTime nextRun = (now.isAfter(plannedStart))
    ? plannedStart.plusDays(7)
    : plannedStart;

Long nextRunInSeconds = (long) secondsBetween(now, nextRun).getSeconds();

Akka.system().scheduler().schedule(
    Duration.create(nextRunInSeconds, TimeUnit.SECONDS),
    Duration.create(7, TimeUnit.DAYS) ,
    new Runnable() {
        public void run() {
            Logger.info("-------------------------scheduler start : " + new DateTime());
        }
    },
    Akka.system().dispatcher()
); 
```

# sql - 插入子句中的 SQL 更新

> ID：13466052
> 
> 赞同：0
> 
> 时间：2012-11-20T03:14:10.880
> 
> 标签：sql, sql-server-2008, tsql

我有一个查询，只要这些记录在表中不存在，我就插入一些记录，但我真正想做的是更新该记录在另一个表中的字段（如果存在），否则将其插入现在正在做。我将不胜感激任何帮助或建议。可以做到吗？

```
 -- Insert into my my Toys table if record not already there (but would like to also update one of its fields)
    INSERT INTO Toys (Date, ToyId)
    SELECT inv.Date, inv.Id
    FROM Inventory inv 
    JOIN InventoryStats invSt ON inv.Id = invSt.InventoryId
WHERE (invSt.IsFixed = 1 AND invSt.IsSent = 0 AND invSt.Date >= '01/01/2012 12:00 PM') AND (inv.Id NOT IN (SELECT ToyId FROM Toys)) 
```

基本上，如果 inv.Id 已经在 Toys 表中，我不想再次插入它，但我想在这个过程中更新它的一个标志，比如

```
UPDATE Toys SET NewShipDate = inv.Date WHERE ToyId = Inv.Id 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T03:20:26.570

您正在寻找[MERGE 语句](http://msdn.microsoft.com/en-us/library/bb510625%28v=sql.100%29.aspx)- 如果记录不存在则插入记录，如果存在则更新。

# python - 所有 python windows 服务都无法启动{error 1053}

> ID：13466053
> 
> 赞同：12
> 
> 时间：2012-11-20T03:14:11.663
> 
> 标签：python, windows-services

**所有**python代码服务都可以安装但无法启动

`Error 1053: The service did not respond to the start or control request in a timely fashion".`

因为我的服务*可以在我的服务器中安装和启动*。我认为我的代码没有问题。

但我仍然想知道是否有一个解决方案可以解决代码中的这个错误

我的服务：

```
import win32serviceutil
import win32service
import win32event

import time
import traceback
import os

import ConfigParser
import time
import traceback
import os
import utils_func
from memcache_synchronizer import *

class MyService(win32serviceutil.ServiceFramework):
    """Windows Service."""
    os.chdir(os.path.dirname(__file__))
    conf_file_name = "memcache_sync_service.ini"
    conf_parser = ConfigParser.SafeConfigParser()
    conf_parser.read(conf_file_name)
    _svc_name_, _svc_display_name_, _svc_description_ = utils_func.get_win_service(conf_parser)

    def __init__(self, args):
        if os.path.dirname(__file__):
            os.chdir(os.path.dirname(__file__))
        win32serviceutil.ServiceFramework.__init__(self, args)

        # create an event that SvcDoRun can wait on and SvcStop can set.
        self.stop_event = win32event.CreateEvent(None, 0, 0, None)

    def SvcDoRun(self):
        self.Run()
        win32event.WaitForSingleObject(self.stop_event, win32event.INFINITE)

    def SvcStop(self):
        self.ReportServiceStatus(win32service.SERVICE_STOP_PENDING)
        win32event.SetEvent(self.stop_event)
        LoggerInstance.log("memcache_sync service is stopped")
        self.ReportServiceStatus(win32service.SERVICE_STOPPED)
        sys.exit()

    def Run(self):
        try:
            LoggerInstance.log("\n******\n\memcache_sync_service is running, configuration: %s\n******" % (self.conf_file_name,))
            if ((not self.conf_parser.has_section('Memcache')) or
                (not self.conf_parser.has_option('Memcache', 'check_interval'))):
                LoggerInstance.log('memcache_sync_service : no Memcache service parameters')
                self.SvcStop()

            # set configuration parameters from ini configuration
            self.check_interval = self.conf_parser.getint('Memcache', 'check_interval')

            ms = MemcacheSynchronizer()
            while 1:
                ms.Sync()
                time.sleep(self.check_interval)
        except:
            LoggerInstance.log("Unhandled Exception \n\t%s" % (traceback.format_exc(),))

if __name__ == '__main__':
    win32serviceutil.HandleCommandLine(MyService) 
```

“sc query [name]” cmd 的执行结果：

> SERVICE_NAME：NewsMonitoringMemcacheSynchronizer
> 
> ```
>  TYPE               : 10  WIN32_OWN_PROCESS 
>    STATE              : 1  STOPPED 
>                            (NOT_STOPPABLE,NOT_PAUSABLE,IGNORES_SHUTDOWN)
>    WIN32_EXIT_CODE    : 0 (0x0)
>    SERVICE_EXIT_CODE  : 0 (0x0)
>    CHECKPOINT         : 0x0
>    WAIT_HINT          : 0x0 
> ```

**更新：**

我可以使用调试模式运行此服务，cmd：

```
memcache_syn_service.py debug 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2017-03-15T13:48:30.050

使用 pypiwin32（版本：220）和 python（版本：3.6）也有同样的问题。我不得不复制：

```
"\Python36-32\Lib\site-packages\pypiwin32_system32\pywintypes36.dll" 
```

到

```
"\Python36-32\Lib\site-packages\win32" 
```

服务启动（在调试模式下工作）

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2018-07-11T10:12:32.060

如果：

*   `python your_service.py debug`工作，同时
*   `python your_service.py install`+ 将其作为服务启动失败并出现错误 1053，

这个命令可能会有所帮助`python C:\Python27\Scripts\pywin32_postinstall.py`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-13T09:53:33.637

我所有的 python 编码的 windows 服务都无法在我的计算机上运行。

但是它们都可以从我们的开发服务器开始，这意味着我的代码是正确的。

但我找到了一个替代解决方案，运行`debug mode`：

```
any_service.py debug 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-10-09T09:22:14.360

确保使用与默认本地系统用户不同的用户运行应用程序。将其替换为您能够成功运行调试命令的用户。

*   要替换用户，请转到 Windows 服务 ( `start > services.msc`)
*   右键单击您创建的服务 > 属性 > 登录
*   取消选中本地系统帐户并输入您自己的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-12-01T13:21:20.467

所有已知的修复都让我失望了，这个有效：

在服务窗口中：

1.  右键单击您已安装的服务；
2.  转到**登录**选项卡；
3.  选择“**此账户**”并输入您的用户名并通过；
4.  重启电脑。

与我被解释的Windows权限有关......

如果没有为 Windows 用户设置密码，该方法将不起作用。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-12-10T03:19:56.643

就我而言，问题出在`python37.dll`不在`C:\Python37-x64\Lib\site-packages\win32`。

复制到那里就可以解决问题了

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-29T10:22:44.063

我在 python 服务中遇到了类似的问题，发现它缺少 DLL，因为“系统路径”（不是用户路径）不完整。检查您的开发服务器中的路径以及它是否与您计算机上的路径匹配（如果服务安装为 LocalSystem 服务，则为系统路径）。对我来说，我错过了 python dll 的路径 c:\python27 (windows)。

# bison - Bison Parser 中的单字符文字

> ID：13466054
> 
> 赞同：-1
> 
> 时间：2012-11-20T03:14:23.357
> 
> 标签：bison

我正在尝试在野牛中制作一个解析器，当我在解析器中使用某些单字符终端时，它给了我非常奇怪的编译错误。

这有效：

```
nonterminal1: 'a' nonterminal2 'b'; 
```

但这不会编译：

```
nonterminal1: '{' nonterminal2 '}'; 
```

我应该以某种方式逃避这些角色吗？我已经尝试了很多 Google 搜索并浏览了 O'Reilly 的 flex & bison 书，但找不到任何关于此的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T04:18:20.737

反例证明：

```
%%
nonterminal1: 'a' nonterminal2 'b';
nonterminal1: '{' nonterminal2 '}';
nonterminal2: '.' | '!'; 
```

野牛毫无怨言地编译了它。我尝试了 Yacc 的 3 个其他变体；所有人都毫无怨言地编译了它。它也可以在没有 a/b 行的情况下编译。我只测试`bison`了在文件上运行；我没有在上面测试 C 编译器，但是如果 Bison 生成的代码无效，那将是令人惊讶的。

问题并不像您将其简化为那样简单。因此，请提供对您不起作用的实际 SSCCE（[简短、自包含、正确示例](http://sscce.org/)）以及 Bison 的错误消息。如果有您指定的选项`bison`，也请告诉我们这些选项。`bison`如果问题是将（C 文件）的输出编译到目标文件中，您也应该说明这一点。

（据记录，Bison 的版本是 2.3，在 Mac OS X 10.7.5 上运行。）

请注意，如果您使用某些非编程编辑器，则引号字符可能会被转换为 ASCII `'`（39；Unicode U+0027）以外的其他内容。这会把事情扔掉。但是，尚不清楚为什么一条线被删除而另一条没有。您必须向我们显示错误消息，我们才能提供帮助。

# actionscript-3 - 外部加载的影片剪辑不会停止（）

> ID：13466057
> 
> 赞同：0
> 
> 时间：2012-11-20T03:14:41.927
> 
> 标签：actionscript-3, flash

我从外部加载了一个 .swf 资产，它是一个带有时间线的动画角色。我按如下方式加载剪辑：

```
m_loader.contentLoaderInfo.addEventListener(Event.COMPLETE, LoaderComplete);
m_loader.load(new URLRequest("test.swf"));

private function LoaderComplete(e:Event):void 
{
var movie:MovieClip = m_loader.content as MovieClip;
stage.addChild(movie);
movie.gotoAndStop(1);
} 
```

但动画只是继续播放。Stop() 也不起作用。我不确定我在这里做错了什么，我觉得这与外部加载的 .swf 文件有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T03:40:25.640

如果您有在舞台上但有自己的时间线的库对象，则需要确保所有这些对象都已停止。当您发布movie.swf 时会发生什么- 它会继续运行吗？

# c# - 如何使用 Active Directory 组保护 Web 应用程序？

> ID：13466058
> 
> 赞同：0
> 
> 时间：2012-11-20T03:14:42.570
> 
> 标签：c#, asp.net-mvc, formsauthentication

很抱歉这个基本问题，第一次在 C# 中使用 Web MVC4 ...

我正在为我用 C#/SQL 编写的应用程序创建一个 Web 界面。我已经能够将 MVC4 框架附加到 SQL DB。现在我想根据 AD 中的组成员身份来确保人们可以做什么。我的 web.config 中的身份验证设置为“Windows”，它正确显示了我登录时使用的 User.Identity.Name。所以我知道它正在拉起当前登录的用户。此外，对于 android 或 ipad 设备，我需要能够验证活动目录域之外的用户。不过，我还没有走那么远……在大多数情况下，如果可能，我想自动验证登录用户，然后提示输入用户名/密码（如果不存在）。

好的，我也已经知道如何在 AD 中为用户提取组成员身份。但是我需要运行该 AD 查询并将该信息存储在可以在每个页面上访问的某个位置。然后在每个页面上我如何访问该变量？

例如，如果他们无权访问菜单选项，我不想显示它，因此需要使用变量来显示或不显示受保护的菜单选项。另外，我认为我还需要在网页上添加该安全性，这样如果有人试图手动访问那里，他们就无法访问。

我假设出于安全原因我不想使用会话变量..

在过去使用 Adob​​e Flex 时，我使用单例来管理会话状态。我在那里进行了搜索，人们说这在 C# 中可能不是一个好主意。反正这样的例子不多。。。

你在做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T17:33:14.207

这是我推荐的。开始寻找[ActiveDirectoryMembershipProvider 类](http://msdn.microsoft.com/en-us/library/system.web.security.activedirectorymembershipprovider.aspx)的示例。这个 MembershipProvider 与[Forms Authentication](http://www.asp.net/mvc/tutorials/older-versions/security/authenticating-users-with-forms-authentication-cs)相结合将为您提供一个安全的系统来验证用户。

[一旦通过身份验证，您需要通过将Active Directory 角色提供程序 (ADRP)](https://stackoverflow.com/questions/8010461/asp-net-active-directory-role-provider-via-web-config)（用于确定用户组）与[保护 MVC 应用程序](http://blogs.msdn.com/b/rickandy/archive/2012/03/23/securing-your-asp-net-mvc-4-app-and-the-new-allowanonymous-attribute.aspx)的标准方法相结合来授权您的用户访问资源。

为了让您开始，我创建了这些简单的扩展方法，您可以扩展以使用 ADRP（因为我没有使用 ADRP）。

```
public static class IPrincipalExtensions
{
        private static _adminName = "Administrator";

    public static bool IsAnonymous(this IPrincipal instance)
    {
        return (instance == null);
    }

    public static bool IsAdminOrInRole(this IPrincipal instance, string role)
    {
        if (instance == null
            || instance.Identity == null
            || !instance.Identity.IsAuthenticated)
        {
            return false;
        }

        bool result = instance.IsInRole(role)
                      || instance.IsInRole(IPrincipalExtensions._adminName));

        return result;
    }

} 
```

然后我还扩展了默认的[AuthorizeAttibute](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute(v=vs.108).aspx)给我一个只能用于管理员的属性：

```
public class AuthorizeAdministratorAttribute : AuthorizeAttribute
{
    protected override bool AuthorizeCore(HttpContextBase httpContext)
    {
        if (httpContext == null)
        {
            throw new ArgumentNullException("httpContext");
        }

        bool result = false;
        IPrincipal user = httpContext.User;

        if (user.Identity.IsAuthenticated)
        {
            result = user.IsAdmin();
        }

        return result;
    }
} 
```

这使用了我提供的相同的扩展方法，`IPrincipalExtensions`所以我不再重复自己。有些人可能会觉得这有点矫枉过正，因为以下两行是相等的：

```
[Authorize("Administrator")]
[AuthorizeAdministrator] 
```

但是，由于第一个示例使用的是字符串，因此一个简单的错误类型会拒绝访问，如果我决定将角色/组名称更改为“Admins”，则变得更加困难。因此，如果组更改，使用第二个（我可以说是强类型），我只需要在一个位置更改名称。

# ibm-mq - 如何在 where 过滤子句中使用运算符？

> ID：13466060
> 
> 赞同：1
> 
> 时间：2012-11-20T03:14:48.457
> 
> 标签：ibm-mq, mq

我知道我们可以利用`where filter`来帮助在运行**runmqsc**期间获得更具体的结果。我对那些像`LT、GT、EQ、NE、LE and GE`. 但是，与 一样`LK、NL`，它总是失败。请参阅以下详细信息：

```
dis chl(SERVER.C01)
27 : dis chl(SERVER.C01)
AMQ8414: 显示通道细节。
 CHANNEL(SERVER.C01)                     CHLTYPE(SVRCONN)
 ALTDATE(2012-08-27)                     ALTTIME(16.05.40)
 COMPHDR(NONE)                           COMPMSG(NONE)
 DESCR( )                                HBINT(300)
 KAINT(AUTO)                             MAXINST(999999999)
 MAXINSTC(999999999)                     MAXMSGL(4194304)
 MCAUSER( )                              MONCHL(QMGR)
 RCVDATA( )                              RCVEXIT( )
 SCYDATA( )                              SCYEXIT( )
 SENDDATA( )                             SENDEXIT( )
 SHARECNV(10)                            SSLCAUTH(REQUIRED)
 SSLCIPH( )                              SSLPEER( )
 TRPTYPE(TCP)
dis chl(*) where(type lk SVRC*)
  28 : dis chl(*) where(chltype lk SVRC*)
 AMQ8569: 过滤器规范中的错误
 dis chl(*) where(chltype lk SVRC*

 AMQ8427: MQSC 命令的有效语法为：

 DISPLAY display_cmd
 WHERE( filter_keyword operator filter_value )

 operator := [ LT | GT | EQ | NE | LE | GE | CT | EX | LK | NL | CTG | EXG ] 
```

另外，怎么样`CT and EX`？请帮帮我

```
WebSphere MQ
7.0.1.9 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T04:25:53.993

目前尚不清楚其他对象类型是否存在此问题，但对于通道，不允许基于通道类型进行过滤。这可能是因为始终支持按类型选择。只需在显示命令中指定`TYPE`或：`CHLTYPE`

```
dis chl(*) chltype(svrconn)
     1 : dis chl(*) chltype(svrconn)
AMQ8414: Display Channel details.
   CHANNEL(SYSTEM.AUTO.SVRCONN)            CHLTYPE(SVRCONN)
AMQ8414: Display Channel details.
   CHANNEL(SYSTEM.DEF.SVRCONN)             CHLTYPE(SVRCONN)
dis chl(*) type(svrconn)
     2 : dis chl(*) type(svrconn)
AMQ8414: Display Channel details.
   CHANNEL(SYSTEM.AUTO.SVRCONN)            CHLTYPE(SVRCONN)
AMQ8414: Display Channel details.
   CHANNEL(SYSTEM.DEF.SVRCONN)             CHLTYPE(SVRCONN) 
```

状态信息中心页面[`DISPLAY CHANNEL`](http://pic.dhe.ibm.com/infocenter/wmqv7/v7r5/topic/com.ibm.mq.doc/sc11770_.htm)：

> 几乎所有可用于显示此 DISPLAY 命令属性的参数。但是，您不能将 CMDSCOPE、QSGDISP 或 MCANAME 参数用作过滤器关键字。如果 TYPE（或 CHLTYPE）也用于选择通道，则不能使用它。

我不确定您如何使用`TYPE`或选择频道，我已要求对页面`CHLTYPE` *进行*澄清以解释这一点。同时，请注意使用该子句不支持在`TYPE`or上进行选择。除了渠道之外，还有其他情况让您遇到问题吗？`CHLTYPE``WHERE``LK``NK`

**更新**
回应评论，有两件事要注意。首先，根据信息中心，“您不能将通用过滤器值用于具有数值或一组值之一的参数。” 例如，这意味着指定是无效的，`DIS CHL(*) WHERE(MCATYPE LK P*)`因为它是`MCATYPE`由一组值中的一个指定的。它只能是`PROCESS`或`THREAD`。指定也无效，`DIS CHL(*) WHERE(LONGTMR LK 1*)`因为`LONGTMR`它采用数值。

感兴趣的第二项是`WHERE`子句中引用的语法。与所有`MQSC`参数一样，该`WHERE`子句将不带引号的值折叠为大写。由于 WebSphere MQ 以区分大小写的方式评估这些，因此类似`DIS Q(*) WHERE(DESCR LK W*)`的方法之所以有效，是因为许多队列都有一个以开头的描述`WebSphere`并且大写`W`匹配。但是，`DIS Q(*) WHERE(DESCR LK We*)`失败是因为小写`e`被折叠成大写，然后与描述字段中的值不匹配。在这里起作用`DIS Q(*) WHERE(DESCR LK 'We*')`的是字符串说明符被单引号引起来的地方。

因此，您看到的问题可能是由于对`LK`作为枚举一部分的字符串值使用运算符，或者可能是由于区分大小写无法匹配未加引号的过滤器值。

当过滤器关键字是列表时，`CT`and和它们的补语是要使用的运算符。`CTG`例如，在`NAMELIST`对象中，属性`NAMES`包含值列表。类似的东西`WHERE(NAMES LK SYS*)`会模棱两可，因为它`LK`是在一元值上运行的。因此`CT`和`CTG`作为在集合上工作的运算符提供。演示此语法的几个示例将是：

```
DIS NAMELIST(*) WHERE(NAMES CT SYSTEM.BROKER.DEFAULT.STREAM)
DIS NAMELIST(*) WHERE(NAMES CTG SYS*) 
```

第一个显示属性`NAMELIST`中的一个条目`NAMES`完全匹配的任何对象。第二个允许基于通用字符串前缀的类似匹配。如果预期值不是全部大写，或者该值包含嵌入空格，请务必引用。

# networking - 输入/输出带宽是否共享相同的网卡限制？

> ID：13466061
> 
> 赞同：4
> 
> 时间：2012-11-20T03:15:01.047
> 
> 标签：networking, bandwidth

这可能是一个非常菜鸟的问题。假设我有一个带宽限制为 100MB/s 的网卡，那么输入/输出带宽是否有可能同时达到该**限制**？或者我在任何时候都会有这个不等式：`in bandwidth`+ `out bandwidth`<= 100MB/s

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T04:15:59.933

首先，您的网卡可能是 100Mb/sec 而不是 100MB/sec。以太网是迄今为止最常见的有线网络类型，通常以每秒10、100、1000 兆**比特的速度出现。**一个 100 兆比特/秒的以太网接口大约能够达到每秒 12.5 兆字节。

如果您插入以太网**交换机**，您很可能会以全双工模式进行连接。这允许两端同时相互通话，而不会影响彼此的性能。

但是，您永远无法完全达到宣传的全部速度，千兆网络接口（1000Mb/秒）通常能够毫无问题地在每个方向上以 900 的速度传输。有一些事情会导致开销阻止您达到全速。此外，许多低端网卡或计算机都难以达到全速，因此您并不总是能够达到这个速度。

如果您插入以太网**集线器**，则一次只能通话一端。在那里，in + out 不能高于链接速度，并且由于碰撞而通常要低得多。除非您真的很努力，否则您真的不太可能再找到集线器了，交换机几乎是您现在除了奇异应用程序之外唯一可以购买的东西。

**TL;DR**：您几乎总是使用全双工模式，它允许同时在两个方向上达到（但通常低于）宣传的链接速度。

# java - 基元的默认值

> ID：13466062
> 
> 赞同：8
> 
> 时间：2012-11-20T03:15:03.687
> 
> 标签：java, initialization

在 Java 中，如果没有初始化类型的变量会`int`保留什么（我知道如果我在初始化之前直接使用它不会让我编译`x`）？

说，如果我这样做：

```
int x; 
```

怎么样

```
int[] x; 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-20T03:20:55.463

实例变量将默认为“合理”值。局部变量将包含垃圾。

[在此处](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)阅读该主题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-20T03:21:37.830

`int x`默认值为`0`

对于原始类型，请参阅此[链接](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)

而对于`int[] x`将是`null`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-20T03:18:22.933

"int x" 中的 x 自动初始化为 0；"int [] x" 中的 x 自动初始化为 null，因为 x 实际上是一个引用

但编译器会提示初始化变量：

```
Exception in thread "main" java.lang.Error: Unresolved compilation problems: 
    The local variable a may not have been initialized
    The local variable a may not have been initialized

    at initialization.main(initialization.java:6) 
```

# iphone - 为什么我的动画不起作用？

> ID：13466063
> 
> 赞同：0
> 
> 时间：2012-11-20T03:15:08.800
> 
> 标签：iphone, ios, animation, uiview

我有一个蓝色的小圆圈，在用户触摸屏幕之前淡入淡出到两个不同的位置。然后我希望圆圈在它所在的位置淡出。

```
- (void)fadePowerUpOut {

    [UIView animateWithDuration:.5 delay:2 options:UIViewAnimationOptionCurveLinear animations:^{//the power up will stay in its position until after 2 seconds it will fade out which is because of the delay
        self.powerUp.alpha=0;
    } completion:^(BOOL finished) {
        if (finished) {//I put if finished here because i don't want this method to be ran if the user touches the screen within the 2 second delay
            if (self.powerUp.frame.origin.x==self.rectPowerUp.origin.x) {//if its in the first location go to the second
                self.powerUp.frame=self.rectPowerUp2;

            }else{//if its in the second location go to the first 
                self.powerUp.frame=self.rectPowerUp;
            }
            [self fadePowerUpIn];
        }
    }];
}

- (void)fadePowerUpIn {
    [UIView animateWithDuration:.5 delay:0 options:UIViewAnimationOptionCurveLinear animations:^{
        self.powerUp.alpha=1;
    } completion:^(BOOL finished) {
        if (finished) {
              [self FadePowerUpOut];
        }   
    }];
}

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

     [UIView animateWithDuration:.5 delay:0 options:UIViewAnimationCurveLinear|UIViewAnimationOptionBeginFromCurrentState animations:^(){ self.powerUp.alpha=0;} completion:^(BOOL completion){
  }];
} 
```

发生的事情是，当用户触摸屏幕时，圆圈不会淡出，而只会在 2 秒后淡出（我在 fadePowerUpOut 方法上设置的延迟）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T06:07:28.617

正如 ACB 所指出的，首先要做的是将延迟设置为零。为了能够开始延迟淡出，我建议使用计时器。

# ruby-on-rails - 由于“需要”，Rspec突然停止工作：没有要加载的文件

> ID：13466065
> 
> 赞同：3
> 
> 时间：2012-11-20T03:15:16.097
> 
> 标签：ruby-on-rails, ruby, git, testing, rspec

Rspec 已经运行了一段时间，但是在运行任何 rspec 测试时我突然遇到了这个问题：

```
/Users/joseph/.rvm/gems/ruby-1.9.2-p180/gems/rspec-core-2.11.1/lib/rspec/core/configuration.rb:437:in `require': no such file to load -- rspec/instafail (LoadError)
from /Users/joseph/.rvm/gems/ruby-1.9.2-p180/gems/rspec-core-2.11.1/lib/rspec/core/configuration.rb:437:in `block in requires='
from /Users/joseph/.rvm/gems/ruby-1.9.2-p180/gems/rspec-core-2.11.1/lib/rspec/core/configuration.rb:435:in `map'
from /Users/joseph/.rvm/gems/ruby-1.9.2-p180/gems/rspec-core-2.11.1/lib/rspec/core/configuration.rb:435:in `requires='
from /Users/joseph/.rvm/gems/ruby-1.9.2-p180/gems/rspec-core-2.11.1/lib/rspec/core/configuration_options.rb:20:in `block in configure'
from /Users/joseph/.rvm/gems/ruby-1.9.2-p180/gems/rspec-core-2.11.1/lib/rspec/core/configuration_options.rb:19:in `each'
from /Users/joseph/.rvm/gems/ruby-1.9.2-p180/gems/rspec-core-2.11.1/lib/rspec/core/configuration_options.rb:19:in `configure'
from /Users/joseph/.rvm/gems/ruby-1.9.2-p180/gems/rspec-core-2.11.1/lib/rspec/core/command_line.rb:21:in `run'
from /Users/joseph/.rvm/gems/ruby-1.9.2-p180/gems/rspec-core-2.11.1/lib/rspec/core/runner.rb:66:in `rescue in run'
from /Users/joseph/.rvm/gems/ruby-1.9.2-p180/gems/rspec-core-2.11.1/lib/rspec/core/runner.rb:62:in `run'
from /Users/joseph/.rvm/gems/ruby-1.9.2-p180/gems/rspec-core-2.11.1/lib/rspec/core/runner.rb:8:in `block in autorun' 
```

我通常对我的项目进行几次检查（即 git clone 两次到不同的目录中）。出于某种原因，即使使用相同版本的代码，rspec 只会在我的一个结帐中遇到此问题，而在另一个结帐中则不会。我最终通过创建另一个克隆来规避这个问题。由于某种原因，这个问题再次出现，我不想继续创建克隆来避免这个问题。有谁知道可能是什么根本原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T03:31:48.053

原来问题是像 rspec-instafail 这样的 gem 被归类为开发 gem。在过去的某个时候，我运行过“bundle install --without development”，显然后续的捆绑安装是使用该选项自动完成的。结果，这些宝石不在我的 $LOAD_PATH 上。

为了解决这个问题，我只运行了 'bundle install --without asdf' 并且由于没有 'asdf' 组，它安装了所有的 gem。可能有一个更合适的选项来重新添加这些组，但这对我有用。

# android - Android应用程序中网格视图的透明布局

> ID：13466067
> 
> 赞同：2
> 
> 时间：2012-11-20T03:15:30.387
> 
> 标签：android, gridview

我正在研究 android 中的示例网格视图。有人可以指导我如何创建透明的网格视图。我需要为每个网格项目提供 3d 效果，还需要使网格视图布局透明。我必须能够通过这个网格视图查看背景。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T03:28:06.770

您可以通过以下方式设置 alpha`gridview.setAlpha(alpha)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T03:52:50.287

如果您在 xml 中定义网格视图，请将背景颜色设置为 #00000000

# javascript - 在 Javascript 对象属性中添加 HTML 的简洁方法

> ID：13466069
> 
> 赞同：1
> 
> 时间：2012-11-20T03:15:42.713
> 
> 标签：javascript, jquery, html, asp.net-mvc-3

这是我用来在我的网站上创建小部件的一些 Javascript：

```
var boxText = document.createElement("div");
boxText.class = "infobox-custom";
boxText.style.cssText = "margin-top: -215px; margin-left: -500px; border-radius: 10px; background-color:#438BC0; padding: 5px; height: 400px; width: 600px;";

// Notice this:
boxText.innerHTML = '<p>Some text.</p>'; 
```

很简单。我需要将其设置为`.innerHTML`更复杂的东西，并且只是将其放入 Javascript 中的单行中感觉不对。它闻起来——至少对我来说是这样。

我在这里有什么选择？

我可以有一个 PartialView 并将它从我的控制器返回到一个 jQuery POST 请求吗？

你有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T03:25:31.920

老实说，考虑到您目前所掌握的情况，呈现 HTML 并将其放入单行似乎是最简单的选择。

如果您想更认真地通过 JavaScript 使 UI 动态化，您应该考虑使用 JavaScript 来呈现模板，并简单地从后端 (ASP) 提供数据 (JSON)。

一些模板选项：

*   [underscore.js 的内置选项](http://underscorejs.org/#template)
*   [车把.js](http://handlebarsjs.com)
*   [jquery-tmpl](http://api.jquery.com/category/plugins/templates/) (~弃用)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T03:25:53.573

为了使用 jQuery 创建和使用模板，您必须使用插件。这是 jQuery 团队曾经正在开发但似乎不再是的一个：[模板](http://api.jquery.com/category/plugins/templates/)。

> 注意：jQuery 团队决定不让这个插件超过 beta。它不再被积极开发或维护。文档暂时保留在这里（供参考），直到准备好合适的替换模板插件。

# asp.net - 网格视图行内的asp.net formview

> ID：13466070
> 
> 赞同：0
> 
> 时间：2012-11-20T03:15:45.893
> 
> 标签：asp.net, datagridview, formview

我需要一个gridview，这样当我单击一行进行编辑时，数据会显示在该行内的formview中。然后用户可以在表单视图中进行更新。我无法找到一个合适的例子来做这样的事情。有人可以请我指出一个合适的例子来做到这一点。

请注意，我使用的是 ASP.NET。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T03:20:16.030

这是来自 Kendo 的示例，您可以在有限的支持下免费下载和使用他们的工具。

[用于 ASP.Net 的 Kendo 内联编辑网格](http://demos.kendoui.com/web/grid/editing-inline.html)

# python - 在python中将2个UI组合为一个主应用程序窗口

> ID：13466072
> 
> 赞同：1
> 
> 时间：2012-11-20T03:15:48.093
> 
> 标签：python, pyqt4

我创建了一个带有 mdiArea 的主应用程序，用于使用 Qt Designer *.ui 加载地图图形，并在 python 中使用 uic.loadUi() 使用 pyQt4 进行编码。我还创建了一个单独的 *.ui 文件，并在单独的 python 脚本文件中成功测试了 dockWidget。我希望将这 2 个 UI 结合起来，以便 main_app 窗口在左侧有 mdiArea 小部件，而在右侧将 dockWidget 作为 info_panel。

我试图在主应用程序 python 中加载 *.ui 文件，但在 show() 时将 dockWidget 作为一个单独的窗口结束。

有什么建议可以解决这个问题吗？我希望我不必使用 Qt Designer 将 mdiArea main_app UI 与 dockWidget info_panel 结合起来并将它们作为单个 UI 加载。;P

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T09:45:30.773

我在一些软件上工作过，其中每个不同的窗格都是单独完成的。ui 文件，以便它们可以独立更改而无需合并。它工作得很好。你能把地图和停靠部分变成小部件，然后制作一个新的“主窗口”ui，然后给它一个布局并将另外两个作为子小部件添加到它吗？

# ajax - 您是否需要使用框架来 Ajaxify 您的 Java Web 应用程序？

> ID：13466075
> 
> 赞同：0
> 
> 时间：2012-11-20T03:15:59.720
> 
> 标签：ajax, hibernate, jsf, jakarta-ee

我目前正在为一个项目学习带有 Hibernate 的 Java EE。在我正在创建的 Web 应用程序中，我计划 Ajaxify 页面内容和站点范围的音频播放器（我认为这将使用 AJAX 实现）。

我正在使用基于 JSP 的 MVC，没有框架，只有 Java EE 和 Hibernate。而且我听说我需要使用像 JSF 这样的框架才能 AJaxify 可能的 web-app。这有多真实？我真的需要学习 JSF 或其他框架才能 Ajaxify 我的 Web 应用程序吗？我现在尽可能不想学习一个新框架，因为它是一个很大的学习曲线。但是如果没有其他方法来 Ajaxify 我的 Web 应用程序，我将研究一个框架。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T08:42:31.557

您不必采用**任何**框架来使用部分页面更新等，您可以使用 JavaScript “手动”构造和发送请求，但这比使用 JSF 之类的框架要繁琐**得多**，可能还要加上诸如 primefaces 之类的组件库.

[编辑：您可以在primefaces 展示](http://www.primefaces.org/showcase/ui/home.jsf)中找到大量 ajax 功能示例。Primefaces 在内部使用 JQuery。

EDIT2：我找到了一些关于如何从 JSP 页面使用 JQuery 调度 ajax 请求的资源（我认为使用 JSP 几乎等于不使用框架；））：[here](http://soundcrisis.wordpress.com/2009/04/19/jsp-javaserver-pages-and-jquery-ajax/)和[here](http://www.programming-free.com/2012/08/ajax-with-jsp-and-servlet-using-jquery.html)。我希望这就是你要找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T11:46:03.227

要添加@Kostja 的答案——
我完全同意他的观点，使用 Ajax 你只需要一个 servlet 来处理 HTTP 请求和适当的 JavaScript 代码。
除了 JSF，我还会考虑看看 Apache Wicket - 你可以[在这里](http://java.dzone.com/news/interview-how-wicket-does-ajax)阅读Wicket 如何处理 Ajax。
我建议 Wicket 的原因是，对于一些开发人员来说，使用更“面向组件”（类似 Swing）的框架会更舒服。

# c# - 从字符串创建开放构造类型

> ID：13466078
> 
> 赞同：4
> 
> 时间：2012-11-20T03:16:27.660
> 
> 标签：c#, system.reflection

假设我有以下课程。

```
MyClass<T>
{
    public void MyMethod(T a, List<T> b, List<Tuple<T, string>> c) {}
} 
```

我可以得到方法的参数类型如下

```
Type testType = typeof(MyClass<>);
MethodInfo myMethodInfo = testType.GetMethod("MyMethod");
Type[] paramTypes = myMethodInfo.GetParameters().Select(pi => pi.ParameterType); 
```

如何手动创建一个包含与字符串相同的**开放类型的数组？**`paramTypes`对于前

```
var typesAsStr = new string[] {"T", "List`1[T]", "List`1[Tuple`2[T, string]]"}; 
```

**如果**我有，我可以为每个参数`MyClass<int>`做类似的事情，**但**在这里我想保留通用参数 T：`Type.GetType(fullQualifiedNameOfArg)`

 ***   我不能创造“a”：我不能`Type.GetType("T")`
*   我几乎可以创建“b”：我可以`Type.GetType("List` ``1")`，但“T”上的信息尚不存在
*   我不知道如何创建“c”

在将 Mono.Cecil 类型转换为 .net 类型时，我最终需要这个：Cecil 为我提供了有关以`"MyMethod"`arguments`"T"`和. 然后我想使用反射来获取该方法（如果有多个具有相同名称和参数编号的方法，我必须检查 args 以知道它是哪一个），这就是为什么我想要一种方法来转换什么Cecil 告诉我 .Net 知道什么，以便能够与 .Net 中的内容进行比较。`"List<T>"``"List<Tuple<T, string>>"``paramTypes`

我还看到其他几个人询问如何将 Mono.Cecil 类型转换为 .Net 类型，所以这也是我想尝试的原因。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T18:36:42.637

您可以`T`使用字符串，您可以通过使用`GetType`字符串名称调用`MyClass`然后获取结果类型的通用参数来做到这一点。从那里您可以使用`MakeGenericType`. 您必须首先构建嵌套最多的类型，从内到外进行工作。要跨不同的方法自动执行此操作，需要进行一些字符串解析以获取嵌套类型。为了将 .Net 方法与 Cecil 方法进行比较，@Tengiz 可能有更好的方法。

要运行代码，请更新字符串名称，`MyClass`使其具有适合您环境的正确命名空间。

```
private static void Main(string[] args) {
    // change 'yournamespace'
    Type testType = Type.GetType("yournamespace.MyClass`1");
    Type[] testTypeGenericArgs = testType.GetGenericArguments();

    // Get T type from MyClass generic args
    Type tType = testTypeGenericArgs[0];

    Type genericListType = Type.GetType("System.Collections.Generic.List`1");

    // create type List<T>
    Type openListType = genericListType.MakeGenericType(testTypeGenericArgs[0]);
    Type genericTuple = Type.GetType("System.Tuple`2");
    Type stringType = Type.GetType("System.String");

    // create type Tuple<T, string>
    Type openTuple = genericTuple.MakeGenericType(new[] { tType, stringType });

    // create type List<Tuple<T, string>>
    Type openListOfTuple = genericListType.MakeGenericType(openTuple);

    Type[] typesFromStrings = new[] { tType, openListType, openListOfTuple };

    // get method parameters per example
    Type myClassType = typeof(MyClass<>);
    MethodInfo myMethodInfo = myClassType.GetMethod("MyMethod");
    Type[] paramTypes = myMethodInfo.GetParameters().Select(pi => pi.ParameterType).ToArray();

    // compare type created from strings against types
    // retrieved by reflection
    for (int i = 0; i < typesFromStrings.Length; i++) {
        Console.WriteLine(typesFromStrings[i].Equals(paramTypes[i]));
    }

    Console.ReadLine();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T07:20:37.640

我发现这很有趣，我必须自己创造一些东西，然后把它呈现给世界……经过几个小时的探索，这就是我得到的……

## 类型的扩展方法：GetMethodByString

这很简单：获取一个类型，然后调用该方法，传递一个表示您想要的方法的字符串：

```
var type = typeof(MyType<>);
type.GetMethodByString("MyMethod(T, List`1[T], List`1[Tuple`2[T, String]])") 
```

**示例程序**

```
class Program
{
    public static void Main()
    {
        var t1 = typeof(MyType<>);
        var mi11 = t1.GetMethodByString("MyMethod(T, List`1[T], List`1[Tuple`2[T, String]])");
        var mi12 = t1.GetMethodByString("Method[X](X, T)");
        var mi13 = t1.GetMethodByString("Method(List`1[T], Int32 ByRef)");
        var t2 = typeof(MyType);
        var mi21 = t2.GetMethodByString("Method[X, T](List`1[X], Tuple`2[X, List`1[T]])");
    }

    class MyType<T>
    {
        public void MyMethod(T a, List<T> b, List<Tuple<T, string>> c) { }
        public void Method(List<T> t, out int i) { i = 0; }
        public void Method<X>(X x, T t) { }
    }

    class MyType
    {
        public int Method<X, T>(List<X> x, Tuple<X, List<T>> tuple)
        {
            return 1;
        }
    }
} 
```

**类型扩展**

```
public static class TypeExtensions
{
    public static MethodInfo GetMethodByString(
        this Type type, string methodString)
    {
        return type.GetMethods()
            .Where(mi => MethodToString(mi) == methodString)
            .SingleOrDefault();
    }

    public static string MethodToString(MethodInfo mi)
    {
        var b = new StringBuilder();
        b.Append(mi.Name);
        if (mi.IsGenericMethodDefinition)
            b.AppendFormat("[{0}]",
                string.Join(", ", mi.GetGenericArguments()
                .Select(TypeToString)));
        b.AppendFormat("({0})", string.Join(", ", mi.GetParameters()
            .Select(ParamToString)));
        return b.ToString();
    }

    public static string TypeToString(Type t)
    {
        var b = new StringBuilder();
        b.AppendFormat("{0}", t.Name);
        if (t.IsGenericType)
            b.AppendFormat("[{0}]",
                string.Join(", ", t.GetGenericArguments()
                .Select(TypeToString)));
        return b.ToString();
    }

    public static string ParamToString(ParameterInfo pi)
    {
        return TypeToString(pi.ParameterType).Replace("&", " ByRef");
    }
} 
```

## 为什么我没有尝试按名称获取类型

不幸的是，我找不到给定字符串的类型，除非您对所表示的类型有很多猜测......所以，这是完全不可能的。

这就解释了为什么我做了一个方法来找到方法。它更精确......但它最终可能会失败，在非常罕见和奇怪的情况下：

*   如果您创建自己的列表，然后对同一方法进行两次重载，一个采用 .Net 列表，另一个采用您创建的列表......然后它会失败

## 为什么不解析输入字符串

我发现为了查找一个方法，有一个固定的语法字符串就足够了，这样我就可以从方法中生成它并比较......有一些限制：

*   必须使用类型的名称，因此 C# 别名不起作用（`string`必须命名为“String”，`int`必须命名为“Int32”而不是“int”）

**编辑**

## 表现

这个解决方案的性能不是很好，但没有什么是缓存无法解决的。该方法可以使用字典，同时使用类型和字符串作为复合键，并在尝试通过构建大量字符串并比较所有字符串来查找方法之前先查看那里。

如果您需要缓存字典上的线程安全，请使用`ConcurrentDictionary<TKey, TValue>`...非常好的类。

**编辑 2：创建了一个缓存版本**

```
static ConcurrentDictionary<Type, Dictionary<string, MethodInfo>> cacheOfGetMethodByString
    = new ConcurrentDictionary<Type, Dictionary<string, MethodInfo>>();

public static MethodInfo GetMethodByString(
    this Type type, string methodString)
{
    var typeData = cacheOfGetMethodByString
        .GetOrAdd(type, CreateTypeData);
    MethodInfo mi;
    typeData.TryGetValue(methodString, out mi);
    return mi;
}

public static Dictionary<string, MethodInfo> CreateTypeData(Type type)
{
    var dic = new Dictionary<string, MethodInfo>();
    foreach (var eachMi in type.GetMethods())
        dic.Add(MethodToString(eachMi), eachMi);
    return dic;
} 
```

希望这有帮助！=)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T18:04:11.833

我不认为 .NET 允许您*创建*类型“T”，其中 T 是类型参数，**尚未指定**。因此，`Type`无法创建来自输入字符串数组的 (s) 数组。

但是，在您问题的第二部分中，我读到您想*确定*将这些类型作为字符串给出的方法。该任务可以通过迭代参数来解决，创建另一个描述方法参数的字符串数组，然后比较结果数组和输入数组，如下所示：

```
 class MyClass<T>
    {
        public void MyMethod(T a, List<T> b, List<Tuple<T, string>> c) { }
    }

    class Program
    {
        static void Main(string[] args)
        {
            //input.
            var typesAsStr = new string[] { "T", "List`1[T]", "List`1[Tuple`2[T, string]]" };

            //type to find a method.
            Type testType = typeof(MyClass<>);
            //possibly iterate through methods instead?
            MethodInfo myMethodInfo = testType.GetMethod("MyMethod");
            //get array of strings describing MyMethod's arguments.
            string[] paramTypes = myMethodInfo.GetParameters().Select(pi => TypeToString(pi.ParameterType)).ToArray();

            //compare arrays of strings (can be improved).
            var index = -1;
            Console.WriteLine("Method found: {0}", typesAsStr.All(str => { index++; return index < paramTypes.Length && str == paramTypes[index]; }));

            Console.ReadLine();
        }

        private static CSharpCodeProvider compiler = new CSharpCodeProvider();
        private static string TypeToString(Type type)
        {
            if (type.IsGenericType) {
                return type.Name + "[" + string.Join(", ", type.GetGenericArguments().Select(ga => TypeToString(ga))) + "]";
            }
            else if (type.IsGenericParameter) {
                return type.Name;
            }

            //next line gives "string" (lower case for System.String).
            //additional type name translations can be applied if output is not what we neeed.
            return compiler.GetTypeOutput(new CodeTypeReference(type));
        }
    } 
```

在 [console] 输出中，我看到您的输入字符串**与**函数匹配。

顺便说一句，如果您遇到性能问题，可以对这段代码进行很多优化，例如处理字符串的有效方式，`CSharpCodeProvider`可能释放实例等。但是代码足以解决所质疑的给定任务。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T20:34:25.467

你不能做你想做的事，但是有一种相对简单的方法可以通过从不同的方向进入来达到相同的结果

### 字符串不唯一标识类型

这是将字符串转换为类型的基本问题：当您看到 a 时`T`，您不知道它是从哪里来的。以下是一个有效的类定义：

```
class Simple<T> {
    public T Make(T blah) {
        return blah;
    }
    public T Make<T>(T blah) {
        return blah;
    }
} 
```

的两个重载`Make`具有看起来相同的参数，但它们的比较并不相等。此外，如果不首先获得`T`泛型，就绝对无法获得泛型的—— 循环依赖。`Make<T>``MethodInfo``Make<T>`

### 你能做什么？

您可以构建一个*匹配器*来告诉您一个类型的实例（包括无界泛型类型）是否匹配给定的字符串表示，而不是进行不可能的`string`->转换：`Type`

 *```
static bool MatchType(string str, Type type) 
```

使用此方法，您可以浏览所有具有特定名称的可用方法，并根据字符串数组中的字符串逐一检查其参数列表的类型：

```
var typesAsStr = new [] {"T", "List`1[T]", "List`1[Tuple`2[T, string]]"};
var myMethod = typeof (Simple<>)
    .GetMethods()
    .SingleOrDefault(m => m.Name == "MyMethod" &&
        typesAsStr
            .Zip(m.GetParameters(), (s, t) => new {s, t})
            .All(p => MatchType(p.s, p.t.ParameterType))
    ); 
```

### 你如何实现该`MatchType`方法？

您可以使用类似于[*Recursive Descent Parsing*](http://en.wikipedia.org/wiki/Recursive_descent_parser)的技术：标记您的字符串，然后在遍历标记链时匹配您类型的元素。当一个类被参数化时，获取泛型参数并递归匹配它们。您需要注意数组类型，但这也相对简单。看一看：

```
public static bool MatchType(string str, Type type) {
    var queue = new Queue<Token>(Tokenize(str));
    return MatchRecursive(queue, type) && (queue.Count == 0);
}
private static bool MatchRecursive(Queue<Token> tokens, Type type) {
    string baseName;
    if (!ReadToken(tokens, TokenType.Identifier, out baseName)) return false;
    var ranks = new List<int>();
    while (type.IsArray) {
        ranks.Add(type.GetArrayRank());
        type = type.GetElementType();
    }
    if (type.IsGenericType) {
        if (!type.Name.StartsWith(baseName+"`") || !DropToken(tokens, TokenType.Tick)) return false;
        string numStr;
        int num;
        if (!ReadToken(tokens, TokenType.Number, out numStr)
        ||  !int.TryParse(numStr, out num)
        ||  !DropToken(tokens, TokenType.OpenBraket)) return false;
        var genParams = type.GetGenericArguments();
        if (genParams.Length != num) return false;
        for (var i = 0 ; i < num ; i++) {
            if (i != 0 && !DropToken(tokens, TokenType.Comma)) return false;
            if (!MatchRecursive(tokens, genParams[i])) return false;
        }
        if (!DropToken(tokens, TokenType.CloseBraket)) return false;
    }
    foreach (var rank in ranks) {
        if (!DropToken(tokens, TokenType.OpenBraket)) return false;
        for (var i = 0 ; i != rank-1 ; i++) {
            if (!DropToken(tokens, TokenType.Comma)) return false;
        }
        if (!DropToken(tokens, TokenType.CloseBraket)) return false;
    }
    return type.IsGenericType || Aliases.Contains(new Tuple<string, Type>(baseName, type)) || type.Name == baseName;
}

private static readonly ISet<Tuple<string,Type>> Aliases = new HashSet<Tuple<string, Type>> {
    new Tuple<string, Type>("bool", typeof(bool)),
    new Tuple<string, Type>("byte", typeof(byte)),
    new Tuple<string, Type>("sbyte", typeof(sbyte)),
    new Tuple<string, Type>("char", typeof(char)),
    new Tuple<string, Type>("string", typeof(string)),
    new Tuple<string, Type>("short", typeof(short)),
    new Tuple<string, Type>("ushort", typeof(ushort)),
    new Tuple<string, Type>("int", typeof(int)),
    new Tuple<string, Type>("uint", typeof(uint)),
    new Tuple<string, Type>("long", typeof(long)),
    new Tuple<string, Type>("ulong", typeof(ulong)),
    new Tuple<string, Type>("float", typeof(float)),
    new Tuple<string, Type>("double", typeof(double)),
    new Tuple<string, Type>("decimal", typeof(decimal)),
    new Tuple<string, Type>("void", typeof(void)),
    new Tuple<string, Type>("object", typeof(object))
};
private enum TokenType {
    OpenBraket,
    CloseBraket,
    Comma,
    Tick,
    Identifier,
    Number
}
private class Token {
    public TokenType Type { get; private set; }
    public string Text { get; private set; }
    public Token(TokenType type, string text) {
        Type = type;
        Text = text;
    }
    public override string ToString() {
        return string.Format("{0}:{1}", Enum.GetName(typeof(TokenType), Type), Text);
    }
}
private static bool DropToken(Queue<Token> tokens, TokenType expected) {
    return (tokens.Count != 0) && (tokens.Dequeue().Type == expected);
}
private static bool ReadToken(Queue<Token> tokens, TokenType expected, out string text) {
    var res = (tokens.Count != 0) && (tokens.Peek().Type == expected);
    text = res ? tokens.Dequeue().Text : null;
    return res;
}
private static IEnumerable<Token> Tokenize(IEnumerable<char> str) {
    var res = new List<Token>();
    var text = new StringBuilder();
    foreach (var c in str) {
        var pos = "[],`".IndexOf(c);
        if ((pos != -1 || char.IsWhiteSpace(c)) && text.Length != 0) {
            res.Add(new Token(
                char.IsDigit(text[0]) ? TokenType.Number : TokenType.Identifier
            ,   text.ToString())
            );
            text.Clear();
        }
        if (pos != -1) {
            res.Add(new Token((TokenType)pos, c.ToString(CultureInfo.InvariantCulture)));
        } else if (!char.IsWhiteSpace(c)) {
            text.Append(c);
        }
    }
    if (text.Length != 0) {
        res.Add(new Token(
            char.IsDigit(text[0]) ? TokenType.Number : TokenType.Identifier
        ,   text.ToString())
        );
    }
    return res;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-20T04:51:05.633

我不太清楚你到底需要什么，但我相信你可以使用以下技术：

```
object[] parameters = CreateParameters(typeof(MyClass<>), "MyMethod", typeof(int));
Debug.Assert(parameters[0] is int);
Debug.Assert(parameters[1] is List<int>);
Debug.Assert(parameters[2] is List<Tuple<int, string>>);
//...
object[] CreateParameters(Type type, string methodName, Type genericArgument) {
    object[] parameters = null;
    MethodInfo mInfo = type.GetMethod(methodName);
    if(mInfo != null) {
        var pInfos = mInfo.GetParameters();
        parameters = new object[pInfos.Length];
        for(int i = 0; i < pInfos.Length; i++) {
            Type pType = pInfos[i].ParameterType;
            if(pType.IsGenericParameter)
                parameters[i] = Activator.CreateInstance(genericArgument);
            if(pType.IsGenericType) {
                var arguments = ResolveGenericArguments(pType, genericArgument);
                Type definition = pType.GetGenericTypeDefinition();
                Type actualizedType = definition.MakeGenericType(arguments);
                parameters[i] = Activator.CreateInstance(actualizedType);
            }
        }
    }
    return parameters;
}
Type[] ResolveGenericArguments(Type genericType, Type genericArgument) {
    Type[] arguments = genericType.GetGenericArguments();
    for(int i = 0; i < arguments.Length; i++) {
        if(arguments[i].IsGenericParameter)
            arguments[i] = genericArgument;
        if(arguments[i].IsGenericType) {
            var nestedArguments = ResolveGenericArguments(arguments[i], genericArgument);
            Type nestedDefinition = arguments[i].GetGenericTypeDefinition();
            arguments[i] = nestedDefinition.MakeGenericType(nestedArguments);
        }
    }
    return arguments;
} 
```***

# mongodb - 聚合框架不能使用索引

> ID：13466079
> 
> 赞同：6
> 
> 时间：2012-11-20T03:16:27.540
> 
> 标签：mongodb, indexing

我运行这个命令：

db.ads_view.aggregate({$group: {_id : "$campaign", "action" : {$sum: 1} }});

ads_view ：500 000 个文档。

这个查询需要 1.8s 。这是它的简介：[https ://gist.github.com/afecec63a994f8f7fd8a](https://gist.github.com/afecec63a994f8f7fd8a)

索引：db.ads_view.ensureIndex({campaign: 1});

但是 mongodb 不使用索引。任何人都知道是否可以聚合框架使用索引，如何索引这个查询。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2019-06-03T12:57:01.420

这是一个较晚的答案，但由于`$group`在 Mongo 4.0 版中仍然不会使用索引，它可能对其他人有帮助。

要显着加快聚合速度，请执行`$sort`before `$group`。

所以你的查询会变成：

```
db.ads_view.aggregate({$sort:{"campaign":1}},{$group: {_id : "$campaign", "action" : {$sum: 1} }}); 
```

这假定索引`campaign`应该是根据您的问题创建的。在 Mongo 4.0 中，使用`db.ads_view.createIndex({campaign:1})`.

我在一个包含 5.5+ Mio 的集合上对此进行了测试。文件。没有`$sort`，即使几个小时后聚合也不会完成；在`$sort`前面`$group`，聚合需要几秒钟。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-20T03:28:26.773

该`$group`运算符不是当前将使用索引的运算符之一。这样做的操作员列表（从 2.2 开始）是：

```
$match
$sort
$limit
$skip 
```

从这里：

[http://docs.mongodb.org/manual/applications/aggregation/#pipeline-operators-and-indexes](http://docs.mongodb.org/manual/applications/aggregation/#pipeline-operators-and-indexes)

根据 gist 中发生的产量数量，我假设您要么有一个非常活跃的实例，要么当您进行分组时，很多这些数据不在内存中（它通常也会在页面错误时产生），因此1.8s

请注意，即使`$group`可以使用索引，并且您的索引涵盖了所有被分组的内容，它仍然需要对索引进行完整扫描以进行分组，并且无论如何可能不会太快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-13T23:37:09.237

`$group`不使用索引，因为它不必。当您使用`$group`您的项目时，您实际上`$group`是在使用您`$group`的`_id`. 如果您使用了与`$group`'s匹配的索引`_id`，您仍然需要遍历索引中的所有文档，因此工作量相同。

# erlang - 可以通过 erlmc 和 memchache 1.3 协议从 erlang 访问 Couchbase 2.0 吗？

> ID：13466082
> 
> 赞同：1
> 
> 时间：2012-11-20T03:17:33.567
> 
> 标签：erlang, memcached, couchbase

我正在用 erlang/elixir 开发一个应用程序。我想从 erlang 访问 Couchbase 2.0。我找到了 erlmc 项目（https://github.com/JacobVorreuter/erlmc），它是一个二进制协议 memcached 客户端。注释说“您必须拥有 1.3 或更高版本的 memcached”。

我知道 Couchbase 2.0 使用 memcached 二进制协议来访问数据，我正在寻找从 erlang 中执行此操作的最佳方法。

该手册谈到了 8092 上的“Couchbase API 端口”，并将 11210（接近 11211 memcached 普通端口）称为“内部集群端口”。 [http://www.couchbase.com/docs/couchbase-manual-2.0/couchbase-network-ports.html](http://www.couchbase.com/docs/couchbase-manual-2.0/couchbase-network-ports.html)

所以，问题是这样的：

设置 erlmc 以在端口 8092 上与 Couchbase 2.0 对话是正确的方法吗？

Erlmc 讨论了它如何散列密钥以找到正确的服务器，这让我认为它可能是 memcached 协议的版本太旧（或者我应该连接到 couchbase 2.0 上的内置 MOXI 吗？如果是这样哪个港口？）

erlang 视图的端口是哪个？并且可能视图的 REST 接口不支持直接键查找，所以我也需要编写代码来访问它，对吧？

我热衷于使用纯 erlang 解决方案，因为 NIF 不是并发的，而且我会有一些未知数量的进程想要同时访问 Couchbase 2.0。

我上一次与 Couch 合作是 CouchDB，所以我试图在 Couch 和 Membase 合并后将它们拼凑起来。

如果我走错了路，请建议以高度并发的方式从 erlang 访问 Couchbase 2.0 的最佳方式。memcached 协议应该非常可靠，因此几年前的库应该可以工作，对吧？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T13:10:40.373

简短的回答是：是的，Couchbase 与 memcached 文本协议兼容。

但这里的重点是“memcached 文本协议”。由于 memcached 使用两种不同的协议类型（文本和二进制），您应该使用那些使用文本协议的客户端。

在 Mochi，我们将 merle 用于 memcached，看起来它应该适合您。最近，我的一位同事对其进行了分叉并进行了一些小的更正：[https ://github.com/twonds/merle](https://github.com/twonds/merle)

另外，请考虑查看[https://github.com/EchoTeam/mcd](https://github.com/EchoTeam/mcd)。该客户端可以使用一些重构，但也经过生产验证，甚至允许简单的分片。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T07:26:16.483

感谢 Xavier 的贡献，我重构了整个东西，添加了池，现在它构建并执行得很好。我还包括了一个 basho_bench 驱动程序，因此您可以自己对其进行基准测试。[你可以在这里](https://github.com/aliyakamercan/cberl)找到代码。我很确定这会比文本协议执行得更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T03:13:37.133

我们不使用带有 Erlang 的 Couchbase，而是使用 Python，它还需要连接一个 memcache 客户端。我不能专门与 Erlang 库交谈，但希望这些课程适用于这两种情况。

**Memcache 客户端限制**

Memcache 客户端只能访问 memcache 功能。您将无法使用未在 memcache 协议中指定的视图或任何其他功能。如果您想访问视图，则需要在端口 8092 ( [docs](http://www.couchbase.com/docs/couchbase-manual-2.0/couchbase-views-querying-rest-api.html) ) 上单独使用 REST 协议。

**使用 Vanilla Memcache 客户端连接到 Couchbase**

该页面上提到的端口要么在内部使用，要么由专门为 Couchbase 编写的“智能”客户端使用。默认情况下，memcache 客户端可以连接到 Couchbase 集群中任何节点上的普通 memcache 端口 11211。不要使用不是专门为 Couchbase 编写的任何 memcache 客户端的 memcache 集群功能；vanilla memcached 的常用分发方法与 Couchbase 不兼容。

**解释**

为了与 memcached 客户端连接，您需要直接连接到 Couchbase 存储桶的端口。当您设置一个新的存储桶时，您指定您希望该存储桶可以访问的端口。默认存储桶设置在端口 11211 上。每个存储桶就像一个独立的 memcached 实例，但在内部分布到集群中的所有节点。您可以连接到任何 Couchbase 服务器上的存储桶端口，并且您将访问相同的数据集。

这意味着您不应尝试使用 memcache 客户端的分布式 memcache 功能。这些功能专为 ad-hoc memcached 集群而设计。只需连接到 Couchbase 服务器上的适当端口，就好像它是单个 memcached 服务器一样。

这可能是因为有一个 Moxi 实例可以找到合适的 Couchbase 服务器来处理请求。这个 Moxi 实例自动为每个 Couchbase 服务器上的每个存储桶运行。即使您可能没有连接到具有您特定密钥的节点，Moxi 也会透明地将您的请求定向到适当的服务器。

通过这种方式，您可以使用普通的 Memcache 客户端与 Couchbase 通信，而无需任何额外的逻辑来跟踪集群拓扑。Moxi 会为你处理好这件事情。

**二进制协议**

我们确实让二进制协议在某一时刻工作，但是当我们尝试使用该`flush_all`命令时出现了问题。不过那是不久前的事了。我建议您自己试验一下，看看支持水平是否满足您的需求。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T20:24:58.287

到目前为止我唯一的答案是： [https ://github.com/chitika/cberl](https://github.com/chitika/cberl)

该项目基于 C++“官方”couchbase 客户端。

它似乎有两个可能的问题：

1）它可能会被放弃（最后一次活动是 3 个月前） 2）它使用 NIF，据我所知，它不能同时访问。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-04T16:40:21.520

我必须创建自己的基于 vbucket 的基于 erlmc 的 erlang couchbase 客户端。区别：
- 从 couchbase 检索 vbucket 映射的 http 连接
- 用 vbucket id 填充两个“保留”字节（例如，参见 python 客户端）
- 出于性能原因，一旦异步 tcp 连接处于活动状态

# java - 循环字符串替换

> ID：13466083
> 
> 赞同：0
> 
> 时间：2012-11-20T03:17:40.157
> 
> 标签：java, string

假设我有字符串“foo1bar2”，我想替换以与预期的“bar1foo2”输出并行执行以下替换。

```
foo => bar
bar => foo 
```

字符串不能被标记，因为子字符串可能出现在任何地方，任何次数。

一种天真的方法是像这样替换，但是它会失败，因为第二次替换会撤消第一次。

```
String output = input.replace("foo", "bar").replace("bar", "foo");
=> foo1foo2 
```

或者

```
String output = input.replace("bar", "foo").replace("foo", "bar");
=> bar1bar2 
```

我不确定正则表达式也可以在这里帮助我吗？顺便说一句，这不是功课，只是极客的兴趣。我试过用谷歌搜索，但不确定如何描述这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T03:52:59.270

我实际上更喜欢 Code-Guru 的回答，但既然你说这只是一种好奇心，这里有一个递归解决方案。这个想法是只隔离您要替换的字符串的一部分并在其余部分上递归，这样我们就不会意外替换我们已经做过的东西。现在，如果您的两个规则有一个共同的前缀，您可能需要对规则进行一些排序才能获得所需的结果，但这里是：

```
public class ParallelReplace
{
    public String replace(String s, Rule... rules)
    {
        return runRule(s, 0, rules);
    }

    private String runRule(String s, int curRule, Rule... rules)
    {
        if (curRule == rules.length)
        {
            return s;
        }
        else
        {
            Rule r = rules[curRule];
            int index = s.indexOf(r.lhs);

            if (index != -1)
            {
                return runRule(s.substring(0, index), curRule + 1, rules) + r.rhs
                        + runRule(s.substring(index + r.rhs.length()), curRule + 1, rules);
            }
            else
            {
                return runRule(s, curRule + 1, rules);
            }
        }
    }

    public static class Rule
    {
        public String lhs;
        public String rhs;

        public Rule(String lhs, String rhs)
        {
            this.lhs = lhs;
            this.rhs = rhs;
        }
    }

    public static void main(String[] args)
    {
        String s = "foo1bar2";
        ParallelReplace pr = new ParallelReplace();

        System.out.println(pr.replace(s, new Rule("foo", "bar"), new Rule("bar", "foo")));
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T03:20:20.750

首先尝试将“foo”替换为字符串中其他任何地方都不会出现的其他内容。然后用“foo”替换“bar”，然后用“bar”替换第 1 步中的临时替换。

# php - 启用 PDO 后 - 错误 2002 getaddrinfo failed: Name or service not known

> ID：13466088
> 
> 赞同：2
> 
> 时间：2012-11-20T03:18:12.130
> 
> 标签：php, pdo, lamp, bitnami

我最近了解了 PDO，所以我更改了我的 php 文件以适应格式，现在我收到了这个回复：

`ERROR: SQLSTATE[HY000] [2002] php_network_getaddresses: getaddrinfo failed: Name or service not known`

我没有更改连接变量，只是更改了适合 PDO 的格式。我正在运行 Bitnami Lampstack (5.3.16-0) 并按照文档中的说明操作，在 php.ini 文件中使用 mysql 取消注释 PDO 行。我想知道它是否与我的大小为 0 的 mysql.sock 文件有关。

我的 PDO 连接看起来像这样（我添加了 unix_socket 和端口部分，因为在与此错误相关的另一个问题中提到了它们，但它们似乎没有帮助）：

`$dbConnection = new PDO('mysql:unix_socket=/opt/lampstack-5.3.16-0/mysql/tmp/mysql.sock;host=$dbhost;port=3306;dbname=$dbname;', $user, $pass);`

apache、mysql、httpd 等都在我的服务器上运行良好，这只是在启用 PDO 后出现的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T03:21:21.093

首先，您的示例中的连接字符串是单引号，因此变量替换不起作用。如果您打算使用变量 $dbhost 的内容，请使用双引号。

其次，您不应同时指定本地套接字和主机/端口。选择一个或另一个。我从你的帖子中猜测套接字不是最初的意图。

试试这个：

```
 $dbConnection = new PDO("mysql:host=$dbhost;port=3306;dbname=$dbhost", $user, $pass); 
```

此外，您的示例将 dbname 指向 $dbhost 变量。这是一个错字吗？

套接字都是 0 字节。它们只是可以读取和写入的命名管道，但它们本身没有内容。如果您想使用它，只需验证套接字是否存在。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-17T07:27:11.847

"mysql:host='localhost';dbname='data';charset=utf8" 你的 DSN 格式错误，它不应该有那些引号。这是正确的格式

//$con=new PDO($dsn, $user, $password); $con=new PDO('mysql:dbname=testdb;host=127.0.0.1','root','');

# java - 这个位移操作在 Java RegularEnumSet 实现中意味着什么？

> ID：13466092
> 
> 赞同：2
> 
> 时间：2012-11-20T03:18:41.100
> 
> 标签：java, enumset

在`RegularEnumSet`实现中，有一段代码：

```
elements = -1L >>> -universe.lengh 
```

它使用 Long 类型的整数来实现高效的 EnumSet。

值得注意的是， 的右手操作数`>>>`是**负数**。

我已经测试并发现

```
int i = -1;
i >>> -3 
```

与

```
int i = 1;
i << 3; 
```

那么为什么要费心写这种模棱两可的形式呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T03:42:54.067

摘自《Java 语言规范》第 15.19 节，关于移位“如果左侧操作数的提升类型为长，则仅使用右侧操作数的最低六位作为移位距离。它是就好像右操作数与掩码值为 0x3f 的按位逻辑 AND 运算符 & 一样。因此，实际使用的移位距离是 0 到 64，包括 0 到 64。

因此，`>>> -3`具有与`>>> 61`和`-1L >>> -n`等价的效果`-1L >>> (0x3f&-n)`

实际上，这似乎是在`1s`长整数的最低 n 位中产生连续的最有效方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T03:34:04.283

首先，请注意您引用的代码使用-1L，而不是-1。Long 是无符号的，因此 -1L 相当于设置 long 上的所有位，或获得可能的最高 long 数。

> >>> -3 与 << 3 具有等效的效果

它没有。无符号右移运算符 (>>>) 将零移入符号位，同时`>>`保留`<<`被移位值的符号，相应地移位 1 或 0。这就是为什么`-1L >>> -3`是 7 (0111b) 和`1L << 3`是 8 (1000b)。

# c++ - 我应该使用静态还是内联？

> ID：13466095
> 
> 赞同：1
> 
> 时间：2012-11-20T03:19:14.430
> 
> 标签：c++, c, static, inline

我正在编写一个仅包含标头的库，在声明我提供给用户的函数`static`或`inline`. 在这种情况下，有什么理由让我更喜欢其中一个吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T03:23:10.147

它们都提供不同的功能。

`inline`使用关键字（§ 7.1.3/4）有两个含义：

1.  它*提示*编译器在调用点替换函数体优于通常的函数调用机制。
2.  即使省略了内联替换，也会遵循内联的其他规则（尤其是*一个定义规则*）。

函数上的`static`关键字强制`inline`函数具有内部链接（*内联函数具有外部链接*）此类函数的每个实例都被视为单独的函数（*每个函数的地址不同*）并且这些函数的每个实例都有自己的副本静态局部变量和字符串文字（*内联函数只有一个副本*）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-20T03:50:16.267

注意：此答案适用于 C++。对于 C，请参阅[caf 的答案](https://stackoverflow.com/a/13466170/464581)。两种语言不同。

`static`有两个相关的含义：

*   对于命名空间范围内`static`的函数，给出函数*内部链接*，这实际上意味着该名称对链接器不可见。`static`也可以以这种方式用于数据，但对于数据，这种用法在 C++03 中已弃用（C++03 附件 D 中的§D.2，规范性）。尽管如此，默认情况下常量具有内部链接（明确表示不是一个好主意，因为不推荐使用数据）。

*   对于类中的函数，`static`删除隐式`this`参数，以便在没有类对象的情况下调用*函数。*

在头文件中，通常**不会对函数使用内部链接**，因为不希望在包含头文件的每个编译单元中都复制一个函数。

**`detail`**一个常见的约定是，当需要不属于公共模块接口的类或函数并希望减少对普通名称空间的污染（即，减少名称冲突的可能性）时，改为使用名为 的嵌套名称空间。Boost 库使用此约定。与包含保护符号一样，此约定表示当前 C++ 中缺乏模块支持，在这种情况下，基本上只能通过约定来模拟一些关键的语言特性。

这个词`inline`也有两个相关的含义：

*   对于命名空间范围内的函数，它告诉编译器该函数的*定义*是有意在每个使用它的编译单元中提供的。实际上，这使得链接器忽略函数的多个定义，并且可以在头文件中定义非模板函数。数据没有对应的语言特性，虽然模板可以用来模拟`inline`数据的效果。

*   不幸的是，它还给编译器一个强烈的*提示*，即对函数的调用最好在机器代码中“内联”扩展。

第一个含义是 的唯一保证含义`inline`。

通常，适用`inline`于头文件中的每个函数定义。有一个例外，即直接在类定义中定义的函数。这样的函数是自动声明的`inline`（即，在不显式添加单词的情况下避免链接器抗议`inline`，因此在此上下文中的一个实际用法是应用于`inline`类中的函数声明，以告诉读者该函数的定义稍后跟随在头文件中）。

因此，尽管您似乎对`static`and的含义有些困惑，`inline`但它们不可互换！- 你基本上是对的，`static`并且`inline`以某种方式连接。将（自由）函数从类中移出到命名空间范围，您将更改`static`→ `inline`，将函数从命名空间范围移到类中，您将更改`inline`→ `static`。虽然这不是一件常见的事情，但我发现在重构仅标头代码时它并不少见。

加起来：

*   用于`inline`标头中定义的每个命名空间范围函数。特别是`inline`用于函数模板的特化，因为函数模板只能是完全特化的，而完全特化是一个普通函数。未能`inline`在头文件中应用函数模板特化，通常会导致链接错误。

*   使用一些特殊的嵌套命名空间，例如调用`detail`以避免内部实现细节名称的污染。

*   用于`static`静态类成员。

*   不要`static`用来明确表示常量具有内部链接，因为`static`在 C++03 中不推荐使用这种使用（即使显然在 C++11 中已删除了弃用）。

*   请记住，虽然`inline`不能应用于数据，但可以通过使用模板来实现几乎相同的（实践中）效果。但是，如果您确实需要在标头中实现的大量共享常量数据，我建议您通过`inline`函数生成对数据的引用。编写代码要容易得多，对于代码的读者来说也更容易理解。:-)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-20T03:21:56.053

`static`并且`inline`是正交的。换句话说，你可以有一个或两个或一个都没有。每个都有自己独立的用途，决定是否使用它们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-20T03:22:50.297

如果该函数不共享类状态：`static`. 使函数`static`可以从在任何地方调用中受益。

如果功能比较小而且清晰：`inline`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-20T03:29:12.850

（此答案基于 C99 规则；您的问题同时标记为 C 和 C++，C++ 中的规则可能会有所不同）

如果将函数声明为 just `inline`，则函数的定义是*内联定义*。编译器不需要对翻译单元中函数的所有调用使用内联定义 - 允许假设在另一个翻译单元中提供了相同函数的外部定义，并将其用于部分或所有调用. 在仅头文件库的情况下，*不会*有这样的外部定义，因此使用它的程序可能会在链接时因缺少定义而失败。

另一方面，您可以将函数声明为`inline` *和* `static`。在这种情况下，编译器必须使用您为翻译单元中对函数的所有调用提供的定义，无论它是否实际上内联它们。`inline static`这适用于仅包含头文件的库（尽管编译器对于声明的函数的行为可能与仅声明的函数的行为完全相同`static`，但在这两种情况下都内联了它认为有益的地方，因此在实践中可能几乎没有只是被超越`static`）。

# mysql - 无法在 windows Server 2008 R2 EC2 机器中启动 MySQL 服务器

> ID：13466096
> 
> 赞同：0
> 
> 时间：2012-11-20T03:19:35.527
> 
> 标签：mysql, sql-server-2008, amazon-ec2, windows-server-2008

我在亚马逊 EC2 中创建了一个 Windows 2008 r2 服务器实例。我下载了 MySQL 安装程序，但我在配置中遇到了问题。我之前已经成功安装和配置了 MySQL，但是在 Win7 上，我没有做任何特殊设置。我不知道在 2008 服务器的当前情况下我需要做什么。以下是该问题的屏幕截图。

![在此处输入图像描述](../Images/1a9f90fcb3ba4e8108562d5df455d6bd.png)

细节：

![在此处输入图像描述](../Images/02794c0fe805994320c2b4eda6e980ef.png)

# php - $_POST 没有从选择字段的表单帖子中获取价值

> ID：13466101
> 
> 赞同：1
> 
> 时间：2012-11-20T03:20:23.837
> 
> 标签：php, sql, forms

我已经为此困扰了将近一天，我无法弄清楚这里有什么问题。我需要`$_POST['brand']`在这里的 SQL 语句，我得到一个空白。

```
// sql for getting nearby stores
$sql = "SELECT *, ( 3959 * ACOS( COS( RADIANS(".$_POST['lat'].") ) * COS( RADIANS( latitude ) ) * COS( RADIANS( longitude ) - RADIANS(".$_POST['lng'].") ) + SIN( RADIANS(".$_POST['lat'].") ) * SIN( RADIANS( latitude ) ) ) ) AS distance
FROM stores
WHERE brand='".$_POST['brand']."'
HAVING distance <= ".$_POST['distance']."
ORDER BY distance"; 
```

这是 PHP 文件中的表单。

```
<form method="post" action="./index.php" id="store_locator">
    <fieldset>
        <legend>Store Locator</legend>
        <div class="input">
            <label>Address/Postcode: <span class="required">*</span></label>
            <input type="text" class="texta" name="address" id="address" value="<?php if(isset($_POST['address'])){ echo $_POST['address'];} ?>" />
            <span>e.g: "Sydney", "Magill Road"</span>
        </div>
        <div class="input">
            <label>Brand: <span class="required">*</span></label>
            <select name="brand" id="brand">
                <option selected="selected" value="bmw">BMW</option>
                <option value="fiat">Fiat</option>
                <option value="ford">Ford</option> 
            </select>

            <label>Distance: <span class="required">*</span></label>
            <select name="distance" id="distance">
                <?php
                // populate selected option
                $selected = 1;
                if(isset($_POST['distance'])) {
                        $selected = $_POST['distance'];
                }
                ?>
                <?php foreach($distances as $k=>$v): ?>
                <option value="<?php echo $k; ?>" <?php if($selected == $k){ echo 'selected="selected"';} ?>><?php echo $v; ?></option>
                <?php endforeach; ?>
            </select>
        </div>
        <div class="input buttons">
            <button type="submit" name="find" id="find">Find</button>
        </div>
        </br>
        <input type="button" value="Reset Map" onclick="reset2();" />
    </fieldset>
</form> 
```

我在这里想念什么？奇怪`$_POST['distance']`的是获得价值。请帮忙。如果我回显`brand =''`在 SQL 语句中看到的 SQL。

这是正在执行的 SQL 代码：

```
SELECT *, ( 3959 * ACOS( COS( RADIANS(-31.9530044) ) * COS( RADIANS( latitude ) ) * COS( RADIANS( longitude ) - RADIANS(115.85746930000005) ) + SIN( RADIANS(-31.9530044) ) * SIN( RADIANS( latitude ) ) ) ) AS distance FROM stores WHERE brand='' HAVING distance <= 30 ORDER BY distance 
```

**$_POST 的内容**

```
array(5) {
    ["ajax"]=> string(1) "1"
    ["action"]=> string(17) "get_nearby_stores"
    ["distance"]=> string(1) "5"
    ["lat"]=> string(11) "-31.9530044"
    ["lng"]=> string(18) "115.85746930000005"
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T04:09:06.187

该评论线程变得太长了。

> ["ajax"]=> 字符串(1) "1"

您似乎正在使用 ajax 发布。我们需要查看您连接到提交按钮的 javascript。

您可能忘记告诉 jQuery（或您正在使用的任何函数）序列化`brand`选择。

# android - Android USB Host模式服务-基于USB_DEVICE_ATTACHED启动

> ID：13466103
> 
> 赞同：6
> 
> 时间：2012-11-20T03:20:26.087
> 
> 标签：android, usb, host

我想在 Android 中编写一个基于 USB_DEVICE_ATTACHED 意图启动的服务。所以，基本上我的服务应该在连接特定的 USB 设备（FT232C - VID:PID 0403:6010）时启动，并在断开该 USB 设备时停止。是否可以这样做，或者我是否应该始终有一个启动该服务的活动，以防它尚未启动？该服务的最终目的是根据该 USB 设备提供的位置，使用 TEST_PROVIDER 更新 LocationProvider 上的位置。

我已经尝试在 AndroidManifest.xml 中使用此配置创建服务

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="com.testlocservice"
        android:versionCode="1"
        android:versionName="1.0">

        <uses-sdk android:minSdkVersion="12" android:targetSdkVersion="15" />
        <uses-feature android:name="android.hardware.usb.host"/>
        <supports-screens android:resizeable="true" android:smallScreens="true" android:anyDensity="true" android:largeScreens="true" android:xlargeScreens="true" android:normalScreens="true"/>
        <uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION"/>
        <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
        <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
        <uses-permission android:name="android.permission.READ_PHONE_STATE"/>

        <application android:label="@string/app_name"
            android:icon="@drawable/ic_launcher"
            android:theme="@style/AppTheme">
                <service android:name="com.testlocservice.LocationService"         android:process=":LocService" android:enabled="true" android:exported="true">
                    <intent-filter>
                        <action         android:name="android.hardware.usb.action.USB_DEVICE_ATTACHED" />
                    </intent-filter>
                    <meta-data android:name="android.hardware.usb.action.USB_DEVICE_ATTACHED"
                android:resource="@xml/device_filter" />                
                </service>
        </application>
    </manifest> 
```

xml/device_filter.xml 包含这个

```
 <?xml version="1.0" encoding="utf-8"?>
    <resources>
            <usb-device vendor-id="0403" product-id="6010"/>
    </resources> 
```

我的 LocationService 类已覆盖处理 USB_DEVICE_ATTACHED 意图的 onStartCommand()

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-10T23:41:13.273

根据我的经验， <service> 无法接收 USB 意图。我通过创建一个隐藏的活动来接收意图并重新广播它来克服这个问题。当然这个活动也可以处理启动/停止你的服务。

我已经在这里放置了一些工作代码：
[https](https://stackoverflow.com/a/15151075/588476)
://stackoverflow.com/a/15151075/588476 您只需要更改它，它就会自动启动和停止您的服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-19T17:02:48.503

我认为主要问题是供应商和产品 ID 的数量基础。设备过滤器 xml 中的格式应为十进制，因此 vendor-id="1025" 和 product-id="24592"。

除此之外，它绝对应该是 USB_DEVICE_ATTACHED，而不是 UMS_CONNECTED（后者根本不是 USB 主机模式）。

关于服务是否可以接收广播意图，或者您是否必须为此使用活动，我没有权威的答案，但似乎 Wayne Uroda 对这个问题有很好的经验。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T03:25:23.733

是的，很可能，很抱歉，您在 AndroidManifest.xml 的接收者标签中使用了错误的意图过滤器。让我指导你

AndroidManifest.xml

```
.
.
.
<receiver android:name=".DetactUSB">
   <intent-filter>
        <action android:name="android.intent.action.UMS_CONNECTED" />
        <action android:name="android.intent.action.UMS_DISCONNECTED" />
   </intent-filter>
</receiver> 
```

广播接收器文件

```
public class DetactUSB extends BroadcastReceiver
{ 
    private static final String TAG = "DetactUSB";
    @Override
    public void onReceive(Context context, Intent intent) 
    {
        // TODO Auto-generated method stub
        if (intent.getAction().equalsIgnoreCase( "android.intent.action.UMS_CONNECTED"))
        {
                // Fire your Intent to start Activity
                Log.i(TAG,"USB connected..");
        }
        if (intent.getAction().equalsIgnoreCase( "android.intent.action.UMS_DISCONNECTED"))
        {
        }
    } 
} 
```

# java - 使用 JsonOjbect 解析 json 与使用 GSon 映射到实体

> ID：13466109
> 
> 赞同：0
> 
> 时间：2012-11-20T03:21:20.163
> 
> 标签：java, json, gson

我正在寻找使用 GSon 库解析 json 的正确方法。到目前为止，我已经知道了两种方法：
假设我有一个这样的 json 字符串：

```
 {
   'Events' : [{
       'name' : 'exp',
       'date' : '10-10-2010',
       'tags' : ["tag 1", "tag2", "tag3"]
    },...more events...],
       'Contacts' : [{
       'name' : 'John Smith',
       'date' : '10-10-2010',
       'tags' : ["tag 1", "tag2", "tag3"]
    },...more contacts...],
 } 
```

1.  使用 JSONOjbect 按名称获取字段：

    ```
    JsonElement jelement = new JsonParser().parse(jsonLine);
    JsonObject  jobject = jelement.getAsJsonObject();
    jobject = jobject.getAsJsonArray("Events");
    JsonArray jarray = jobject.getAsJsonArray("Contacts");
    jobject = jarray.get(0).getAsJsonObject(); 
    ```

2.  使用 Gson 映射到实体

    ```
    public class Container{
       List<Event> Events;
        List<Contact> Contacts;
    }

    Container c = new GSon().fromJSon(jsonString,Container.class); 
    ```

你能告诉我什么时候应该使用第一种方式或第二种方式吗？
我有一个 Web 服务可以返回多种复杂的 json 字符串，我需要从中获取数据。我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T03:27:40.773

根据[基准](https://sites.google.com/site/gson/gson-performance)，第一种方法 ( `GSON_DOM`) 更快。这很可能是因为使用 DOM 方法您只是反序列化部分 JSON 字符串。如果您想要更高的性能，您可以切换到`GSON_STREAM`似乎在基准测试中表现最好的方法。

实际上，第二种方法使代码更简单。如果我发现 JSON 反序列化需要大量时间，我可能会先使用该方法，然后切换到其他方法之一。

# javascript - 将 JSON 数据填充到 YUI DataTable 时“没有数据可显示”

> ID：13466115
> 
> 赞同：1
> 
> 时间：2012-11-20T03:22:10.247
> 
> 标签：javascript, json, yui

我是 YUI 的新手，找不到解决此问题的方法。我正在使用 YUI 示例中的代码并尝试使其适用于我的 json url。

```
<div id="pizza" class="yui3-skin-sam dt-example"></div>
<script>
YUI().use("datasource-get", "datasource-jsonschema", "datatable-base-deprecated", "datatable-datasource-deprecated", function (Y) {

var url = "http://api.geonames.org/citiesJSON?north=44.1&south=-9.9&east=-22.4&west=55.2&lang=de&username=demo",
dataSource,
table;

dataSource = new Y.DataSource.Get({ source: url });

dataSource.plug(Y.Plugin.DataSourceJSONSchema, {
schema: {
    resultListLocator: "geonames",
    resultFields: ["fcodeName", "toponymName", "countrycode", "fcl", "fclName", "name", "wikipedia", "lng", "fcode", "geonameId", "lat", "population"]
}
});

table = new Y.DataTable.Base({
columnset: ["fcodeName", "toponymName", "countrycode", "fcl", "fclName", "name", "wikipedia", "lng", "fcode", "geonameId", "lat", "population"]    });

table.plug(Y.Plugin.DataTableDataSource, { datasource: dataSource });

table.render("#pizza");

table.datasource.load({ request: url });
});
</script> 
```

我的json响应是

```
{"geonames":[{"fcodeName":"capital of a political entity","toponymName":"Mexico City","countrycode":"MX","fcl":"P","fclName":"city, village,...","name":"Mexiko-Stadt","wikipedia":"","lng":-99.12766456604,"fcode":"PPLC","geonameId":3530597,"lat":19.428472427036,"population":12294193}, same pattern....]} 
```

我想我缺少一些基本概念。如果这个问题没有意义，我很抱歉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T11:43:21.230

这是您需要的 Javascript 代码。您可以使用此小提琴对其进行测试：http: [//jsfiddle.net/tppiotrowski/pfHAm/](http://jsfiddle.net/tppiotrowski/pfHAm/)

```
YUI().use("datasource-get", "datasource-jsonschema", "datatable-base-deprecated", "datatable-datasource-deprecated", function (Y) {

var url = "http://api.geonames.org/citiesJSON?",
    query = "north=44.1&south=-9.9&east=-22.4&west=55.2&lang=de&username=test1",
    dataSource,
    table;

dataSource = new Y.DataSource.Get({ source: url });

dataSource.plug(Y.Plugin.DataSourceJSONSchema, {
    schema: {
        resultListLocator: "geonames",
        resultFields: ["fcodeName", "toponymName", "countrycode", "fcl", "fclName", "name", "wikipedia", "lng", "fcode", "geonameId", "lat", "population"]
    }
});

table = new Y.DataTable.Base({
    columnset: ["fcodeName", "toponymName", "countrycode", "fcl", "fclName", "name", "wikipedia", "lng", "fcode", "geonameId", "lat", "population"]    
});

table.plug(Y.Plugin.DataTableDataSource, { datasource: dataSource });

table.render("#pizza");

table.datasource.load({ request: query });
});​ 
```

# mysql - 从静态 JOIN TABLE 转移到使用 SELECT 执行 JOIN

> ID：13466116
> 
> 赞同：0
> 
> 时间：2012-11-20T03:22:15.857
> 
> 标签：mysql, select, join, syntax

我有两张表，一张用于评论（id、title、cover_art、text、rating、updated），另一张用于艺术家（id、artist_name）。

我在评论表中有一个艺术家 ID 列。

直到今天早些时候，我只是访问了一个连接两个表的表，但事实证明这会导致未来出现问题。

下面是一个 JOIN 代码需要去哪里的例子：

```
mysql_select_db($database_em, $em);
$query_getDisplay = "SELECT news.title, news.cover_art, news.blog_entry, news.rating, DATE_FORMAT(news.updated, '%M %e, %Y') AS formatted FROM news ORDER BY news.updated DESC     LIMIT 1"; 
$getDisplay = mysql_query($query_getDisplay, $em) or die(mysql_error());
$row_getDisplay = mysql_fetch_assoc($getDisplay);
$totalRows_getDisplay = mysql_num_rows($getDisplay); 
```

这是我想加入的 JOIN：

```
artists.artists_name
FROM   news JOIN artists ON artists.id = news.artistid 
```

但是无论我把它放在我认为它应该去的地方（在 news.rating 和 DATE_FORMAT 之间用逗号跟在它后面），分页符都会出现这个错误：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(news.updated, '%M %e, %Y') AS formatted FROM news ORDER BY news.updated DESC LI' at line 2 
```

这是整个代码减去我在标题中的 sql 注入开关代码。我已经尝试在 news.rating 的每个实例之间添加 JOIN 代码，以及 DATE_FORMAT 和各种其他想法，以及查看 stackoverflow 的知识库（顺便说一句，这是基于我在 David Powers 教程中使用的代码，所以其中大部分甚至可能多余）

```
mysql_select_db($database_em, $em);
$query_getArchives = "SELECT DISTINCT DATE_FORMAT(news.updated, '%M %Y') AS archive,     DATE_FORMAT(news.updated, '%Y-%m') AS link FROM news ORDER BY news.updated DESC";
$getArchives = mysql_query($query_getArchives, $em) or die(mysql_error());
$row_getArchives = mysql_fetch_assoc($getArchives);
$totalRows_getArchives = mysql_num_rows($getArchives);

mysql_select_db($database_em, $em);
$query_getRecent = "SELECT news.post_id, news.title FROM news ORDER BY news.updated DESC LIMIT 20";
$getRecent = mysql_query($query_getRecent, $em) or die(mysql_error());
$row_getRecent = mysql_fetch_assoc($getRecent);
$totalRows_getRecent = mysql_num_rows($getRecent);

mysql_select_db($database_em, $em);
$query_getDisplay = "SELECT news.title, news.cover_art, news.blog_entry, news.rating, artists.artists_name
FROM   news JOIN artists ON artists.id = news.artistid, DATE_FORMAT(news.updated, '%M %e, %Y') AS formatted FROM news ORDER BY news.updated DESC LIMIT 1"; 
$getDisplay = mysql_query($query_getDisplay, $em) or die(mysql_error());
$row_getDisplay = mysql_fetch_assoc($getDisplay);
$totalRows_getDisplay = mysql_num_rows($getDisplay);

$var1_getDisplay2 = "-1";
if (isset($_GET['archive'])) {
$var1_getDisplay2 = $_GET['archive'];
$query_getDisplay = sprintf("SELECT news.blog_entry, news.cover_art, news.rating, DATE_FORMAT(news.updated, '%%M %%e, %%Y') AS formatted FROM news WHERE DATE_FORMAT(news.updated, '%%Y-%%m') = %s ORDER BY news.updated DESC", GetSQLValueString($var1_getDisplay2, "text"));
} elseif (isset($_GET['post_id'])) {
$var2_getDisplay3 = $_GET['post_id'];
$query_getDisplay = sprintf("SELECT news.title, news.cover_art, news.blog_entry, news.rating, DATE_FORMAT(news.updated, '%%M %%e, %%Y') AS formatted FROM news WHERE news.post_id = %s", GetSQLValueString($var2_getDisplay3, "int"));
} else {
$query_getDisplay = "SELECT news.title, news.cover_art, news.blog_entry, news.rating, DATE_FORMAT(news.updated, '%M %e, %Y') AS formatted FROM news ORDER BY news.updated DESC LIMIT 3";
}
$getDisplay = mysql_query($query_getDisplay, $em) or die(mysql_error());
$row_getDisplay = mysql_fetch_assoc($getDisplay);
$totalRows_getDisplay = mysql_num_rows($getDisplay);
?> 
```

顺便说一句，这是实际页面中的代码：

```
<!-- start center column include -->
<div class="center_column">
<div class="center_column_title">
    <?php echo date('H:i:s'); ?> GMT
</div>
<div id="blog_posts">
  <?php do { ?>
    <h2><?php echo $row_getDisplay['title']; ?></h2>
    <h3><?php echo $row_getDisplay['artists_name']; ?></h3>
    <p class="cover_art"><img src="<?php echo $row_getDisplay['cover_art']; ?>" /></p>
    <p class="updated">Updated <?php echo $row_getDisplay['formatted']; ?></p>
    <p class="blog_entry"><?php echo nl2br($row_getDisplay['blog_entry']); ?></p>
    <p class="blog_rating">Rating - <?php echo $row_getDisplay['rating']; ?> (out of a possible 1,000,000)</p>
    <?php } while ($row_getDisplay = mysql_fetch_assoc($getDisplay)); ?>
</div>
<p>&nbsp;</p>
</div>
<!-- end center column include --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T03:33:37.320

我建议如果您的表是关系表，则使用其他表主键的外键，以便您可以使用查询连接表....

但你仍然可以加入表...

$query = "SELECT * FROM Review LEFT OUTER JOIN Artist"; 无论如何，让我看看这个网站... :D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T03:36:39.667

您在这里有 2 个 FROM 子句：

```
mysql_select_db($database_em, $em);
$query_getDisplay = "SELECT news.title, news.cover_art, news.blog_entry, news.rating, artists.artists_name
FROM   news JOIN artists ON artists.id = news.artistid, DATE_FORMAT(news.updated, '%M %e, %Y') AS formatted FROM news ORDER BY news.updated DESC LIMIT 1"; 
```

将其更改为：

```
mysql_select_db($database_em, $em);
$query_getDisplay = "SELECT news.title, news.cover_art, news.blog_entry, news.rating, artists.artists_name, DATE_FORMAT(news.updated, '%M %e, %Y') AS formatted
FROM   news JOIN artists ON artists.id = news.artistid ORDER BY news.updated DESC LIMIT 1"; 
```

# c# - 缺少 /Shared/EditorTemplates

> ID：13466117
> 
> 赞同：0
> 
> 时间：2012-11-20T03:22:16.027
> 
> 标签：c#, asp.net-mvc-3

我需要编辑 Views/Shared/EditorTemplates/Boolean.cshtml

在我的 c# 程序中的文件以将布尔值显示为是或否，而不是真或假。但是这个文件和文件夹（EditorTemplates/Boolean.cshtml）丢失了。

我正在使用 Visual Studio 2010 mvc3，但它不会为我创建此文件夹或文件。

默认情况下，我的共享文件夹中只有 _layout.csthml、_logonPartial.cshtml 和 Error.cshtml

如何让 Visual Studio 构建这些文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T03:44:33.830

您可以自己添加文件夹并覆盖默认的布尔编辑器模板。请务必命名文件`Boolean.cshtml`并声明适当的模型：

```
@model Boolean

// Your html/code for your editor template 
```

# mysql - 为什么我必须修剪一个浮点数才能匹配它？

> ID：13466118
> 
> 赞同：1
> 
> 时间：2012-11-20T03:22:29.023
> 
> 标签：mysql

我在数据库中有一些值，在我想要搜索的 FLOAT 列中。

奇怪的是，运行此命令时 2.5 的值又回来了：

```
SELECT * from `prices` WHERE `price` = 2.5 
```

但是当我在 4.8 上搜索时没有返回任何内容，除非我在比较之前对列进行了修剪，如下所示：

```
SELECT * from `prices` WHERE trim(`price`) = 4.8 
```

任何人都知道这可能是什么原因，我认为因为它是一个 FLOAT 字段，所以不应该有任何需要修剪的前导或尾随空格。我假设 4.8 的数字没什么特别的，但它仍然很有趣。

浏览数据库时，我可以看到它是一个普通的 4.8，没有前导或尾随字符。

我有点难为为什么会发生这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T03:31:19.380

这是因为 4.8 不能用浮点数表示。您可以获得非常接近它的值，但不是确切的值。

我不完全确定 trim 对它做了什么（我找不到任何指定行为的东西，可能它实际上没有定义），但我知道它正在改变值，所以你可以获得匹配。如果您对浮动的行为有进一步的兴趣，请阅读此[http://dev.mysql.com/doc/refman/5.0/en/problems-with-float.html](http://dev.mysql.com/doc/refman/5.0/en/problems-with-float.html)（尽管它不会告诉您有关 trim 的任何信息给他们）。

# facebook - 如何使 html 页面上的内容仅对按下该页面上的“赞”按钮的用户可见？

> ID：13466126
> 
> 赞同：2
> 
> 时间：2012-11-20T03:23:30.670
> 
> 标签：facebook, facebook-like, facebook-social-plugins

在我的网站上，我希望访问者只能在他们通过按“赞”按钮在 Facebook 上分享我的网站后才能访问某些内容。我想知道如何使内容仅对按下“赞”按钮的用户可见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T05:26:02.400

有几种方法可以实现这种方法，但都不能让你 100% 得到你想要的。

## 边缘创建

您可以`edge.create`通过[FB.Event.subscribe](https://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/)监听事件。当它被触发时，您可以从一个或类似的元素中删除一个`display:none`属性。`div`不利的一面是，查看源代码的任何人仍然可以看到您隐藏的内容。

该`edge.create`事件的另一个选项是您可以通过 AJAX 拉入内容，这将使其远离您的源，直到事件被触发。

整个`edge.create`事件的问题在于，一旦有人重新访问您的页面，该`edge.create`事件将不会检测到该人已经喜欢您的网站，因此隐藏的内容不会被显示。

## 用户喜欢

解决方法是请求`user_likes`许可。一旦你有了它，你就可以`/me/likes/<your_page_id>`使用 JS-SDK 调用。如果我们返回一个空数组，他们不喜欢该页面并且您不会加载内容。如果他们这样做，我们将在页面上返回数据，以便您显示它。

这种方法的问题是您需要使用 Facebook 登录。一般来说，这没有错，但权衡是转化率的下降，仅仅隐藏一些内容可能不值得，但这取决于你。

# c++ - 将迭代器取消引用到自定义结构字段

> ID：13466127
> 
> 赞同：0
> 
> 时间：2012-11-20T03:23:47.373
> 
> 标签：c++, struct, iterator, dereference

我有一个矢量播放器，我想对其进行迭代。“玩家”结构如下所示：

`struct player { string name; int rating; };`

我在 for 循环中使用迭代器来查看是否有任何“玩家”的名称为“玩家名称”（一个字符串）。

`for (vector<player>::iterator itr = players.begin(); itr != players.end(); ++itr) { if (playerName.compare(*itr->name) == 0) return true; } return false;`

不幸的是，我一直遇到一个错误：“错误 C2100：非法间接”（visual C++ 2008）。我相信我不正确地取消引用迭代器；有更好的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T03:43:28.070

`*itr->name`相当于`(*itr)->name`。

在您的代码中，类型`(*itr)`is `player`， not `player*`，因此编译器基本上是在告诉您您正在尝试取消引用不是指针的东西。

这样做的正确方法是`(*itr).name`or `itr->name`，两者都表示“取消引用 itr 然后访问名称”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T03:25:47.410

我相信我不正确地取消引用迭代器；

请参阅更正的代码：

```
if (playerName.compare(itr->name) == 0) 
```

或者

```
if (playerName.compare((*itr).name) == 0) 
```

# elasticsearch - Elasticsearch：有没有像mongodb findOne这样的功能

> ID：13466132
> 
> 赞同：3
> 
> 时间：2012-11-20T03:24:23.680
> 
> 标签：elasticsearch

当我通过 findOne / find 在 Mongodb 中使用相同的查询词进行搜索时，findOne 比 find 快得多。

在我的搜索案例中，我只需要知道它是否存在，所以我希望搜索引擎选择一个并返回，然后快速运行我的搜索查询。

当我在 ElasticSearch 中搜索任何内容时，我总能得到搜索结果的总数，它不是很慢，但没有我预期的那么快。

仅供参考，我的 elasticsearch 存储大约 200 万个文档，一些搜索词提示超过 20 万个文档，这可能需要 500 多毫秒。

我正在寻找像 Mongodb 的 findOne 这样的函数，它可以将我的查询时间减慢到不到 100 毫秒。

或者还有其他解决方案吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T22:54:08.167

尝试任一计数 api：

[http://www.elasticsearch.org/guide/reference/api/count.html](http://www.elasticsearch.org/guide/reference/api/count.html)

或 search_type=count：

[http://www.elasticsearch.org/guide/reference/api/search/search-type.html](http://www.elasticsearch.org/guide/reference/api/search/search-type.html)

如果您不需要任何命中数据，则两者都应该更有效，尽管它们仍会计算总文档数。

# forms - 如何有条件地要求使用 AngularJS 进行表单输入？

> ID：13466133
> 
> 赞同：235
> 
> 时间：2012-11-20T03:24:40.180
> 
> 标签：forms, validation, angularjs

假设我们正在使用 AngularJS 构建一个地址簿应用程序（人为的示例）。

我们有一个联系人表单，其中包含电子邮件和电话号码的输入，我们希望需要**其中一个**，但**不能同时要求两者**：我们只希望在输入为空或无效时才需要`email`输入`phone`，反之亦然。

Angular 有一个`required`指令，但从文档中不清楚在这种情况下如何使用它。那么我们如何有条件地需要一个表单域呢？编写自定义指令？

* * *

## 回答 #1

> 赞同：468
> 
> 时间：2012-11-20T03:24:40.180

无需编写自定义指令。Angular 的文档很好，但并不完整。[事实上](https://github.com/angular/angular.js/issues/1202)，有一个指令叫做`ngRequired`，它接受一个 Angular 表达式。

```
<input type='email'
       name='email'
       ng-model='contact.email' 
       placeholder='your@email.com'
       ng-required='!contact.phone' />

<input type='text'
       ng-model='contact.phone'             
       placeholder='(xxx) xxx-xxxx'
       ng-required='!contact.email' /> 
```

这是一个更完整的示例：http: [//jsfiddle.net/uptnx/1/](http://jsfiddle.net/uptnx/1/)

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2015-08-20T14:42:24.720

如果您想输入所需的输入（如果写入了其他输入）：

```
 <input type='text'
   name='name'
   ng-model='person.name'/>

   <input type='text'
   ng-model='person.lastname'             
   ng-required='person.name' /> 
```

问候。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2018-01-19T06:45:22.847

对于 Angular2

```
<input type='email' 
    [(ngModel)]='contact.email'
    [required]='!contact.phone' > 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2017-07-19T12:44:01.083

很简单，您可以使用角度验证，例如：

```
 <input type='text'
   name='name'
   ng-model='person.name'
   ng-required='!person.lastname'/>

   <input type='text'
   name='lastname'
   ng-model='person.lastname'             
   ng-required='!person.name' /> 
```

您现在只能在一个文本字段中填写值。您可以填写姓名或姓氏。这样你就可以在AngularJs中使用条件必填。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-26T06:09:29.017

在 AngularJS（版本 1.x）中，有一个内置指令`ngRequired`

```
<input type='email'
       name='email'
       ng-model='user.email' 
       placeholder='your@email.com'
       ng-required='!user.phone' />

<input type='text'
       ng-model='user.phone'             
       placeholder='(xxx) xxx-xxxx'
       ng-required='!user.email' /> 
```

在Angular2或以上

```
<input type='email'
       name='email'
       [(ngModel)]='user.email' 
       placeholder='your@email.com'
       [required]='!user.phone' />

<input type='text'
       [(ngModel)]='user.phone'             
       placeholder='(xxx) xxx-xxxx'
       [required]='!user.email' /> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-13T13:41:50.183

**对于角 2**

```
<input [(ngModel)]='email' [required]='!phone' />
<input [(ngModel)]='phone' [required]='!email' /> 
```

# css - 造型附加 标签？

> ID：13466136
> 
> 赞同：9
> 
> 时间：2012-11-20T03:25:13.050
> 
> 标签：css, styling

我希望`<hr>`在我的网站上为我的侧边栏设计一个额外的标签。

如果我已经定义了 hr，我怎么能做到这一点？

```
hr { border: solid #ddd; border-width: 1px 0 0; clear: both; margin: 22px 0 21px; height: 0; } 
```

我可以添加样式吗？

```
hr.side { border: solid #ddd; border-width: 1px 0 0; clear: both; margin: 22px 0 21px; height: 0; } 
```

所以html会

`<hr class="side">`?

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-20T03:29:35.480

采用

```
hr.side { border: solid #ddd; border-width: 1px 0 0; clear: both; margin: 22px 0 21px; height: 0; } 
```

然后

```
<hr class="side"> 
```

在 css`.`中指的是一个类和 `#`id

编辑：

如果你真的很想用它做内联样式，`style=""`那么它看起来像这样

```
<hr style="border: solid #ddd; border-width: 1px 0 0; clear: both; margin: 22px 0 21px; height: 0;"> 
```

最后一种方法并不是真正推荐的方法，但如果您想覆盖所有 css 样式表并覆盖`<style> </style>` HTML 页面中嵌入的任何标签，则效果很好

# php - php简单错误

> ID：13466144
> 
> 赞同：1
> 
> 时间：2012-11-20T03:25:57.503
> 
> 标签：php, mysql, sql

我正在尝试通过 php 将数据插入数据库。很容易（我想）。我无法弄清楚我做错了什么。这是我的代码：

```
$DB_HostName = "localhost:8888";
$DB_Name = "Sample";
$DB_User = "root";
$DB_Pass = "root";
$DB_Table = "Check";

$con = mysql_connect($DB_HostName,$DB_User,$DB_Pass) or die(mysql_error()); 
mysql_select_db($DB_Name,$con) or die(mysql_error()); 

$sql =  "INSERT INTO $DB_Table (name) VALUES ('Sally') ";
mysql_query($sql) or die ("Error with Result");

mysql_close($con); 
```

它给了我一个错误，说“结果错误”。这意味着它必须正确连接到数据库，并且除了结束部分之外一切正常。我错过了什么？如果我说 (msql_error()) 它也会告诉我检查 $sql. 我无法弄清楚我输入错误的内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T03:27:19.353

用反引号转义您的数据库名称

```
$sql =  "INSERT INTO `$DB_Table` (name) VALUES ('Sally') "; 
```

或者

```
$sql =  "INSERT INTO `" . $DB_Table . "` (name) VALUES ('Sally') "; 
```

`CHECK`是 MySQL 保留关键字。

*   [MySQL 保留关键字列表](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)
*   [如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T03:33:00.007

我不能强调这一点，不要使用 mysql_ 函数，那个时间已经过去了。使用[mysqli](http://php.net/manual/en/book.mysqli.php)或[PDO](http://php.net/manual/en/book.pdo.php)。

检查 SQL 查询有什么问题的一种简单方法是在 die 语句的末尾添加一个错误标志`mysql_query($sql) or die ("Error with Result<br>".mysql_error());`

在您的情况下，它似乎`check`是一个约束，用于限制可以放置在列中的值范围。您需要使用“`”识别它是一个表：

```
$sql =  "INSERT INTO `$DB_Table` (name) VALUES ('Sally') "; 
```

# c++ - 检查 C++03 上是否为 const

> ID：13466146
> 
> 赞同：9
> 
> 时间：2012-11-20T03:26:23.863
> 
> 标签：c++, c++03

如何检查一个对象是否是没有 C++11 的 const `std::is_const`？据我所知，我不应该是`const_cast`一个被**声明为**const的对象

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-20T03:33:19.143

[在cppreference](http://en.cppreference.com/w/cpp/types/is_const)`is_const`上给出了 C++11 的示例实现，它看起来像这样：

```
template<class T> struct is_const          : false_type {};
template<class T> struct is_const<const T> : true_type {}; 
```

如果你把这个定义放在你的 C++03 代码中，你也可以`is_const`在那里使用，如果你为`false_type`and添加定义`true_type`（感谢 mfonantini 指出缺少的`true_type`and `false_type`）。如果您将它们定义如下，您将非常接近 C++11 中使用的定义：

```
struct true_type {
  static const bool value = true;
  typedef bool value_type;
  typedef true_type type;
  operator value_type() const { return value; }
};

struct false_type {
  static const bool value = false;
  typedef bool value_type;
  typedef false_type type;
  operator value_type() const { return value; }
}; 
```

唯一的区别是 static`value`只是一个`const`，而不是`constexpr`，但请注意，它仍然是一个常量表达式，可以用作模板参数。因此，出于所有实际目的，上面的定义应该在 C++03 中有效。

关于您问题的最后一部分：将非常量类型转换为 const 实际上没有问题。（但是，非法情况可能会出现在指向指针的指针或对指针的引用中，例如`T**`不能强制转换为`const T**`.）

# c# - 按属性值分组并编写组成员

> ID：13466151
> 
> 赞同：1
> 
> 时间：2012-11-20T03:27:04.587
> 
> 标签：c#, .net, linq, group-by, linq-to-objects

我需要按部门值对以下列表进行分组，但 LINQ 语法有问题。这是我的对象列表：

```
 var people = new List<Person>
 { 
    new Person { name = "John", department = new List<fields> {new fields { name = "department", value = "IT"}}}, 
    new Person { name = "Sally", department = new List<fields> {new fields { name = "department", value = "IT"}}},
    new Person { name = "Bob", department = new List<fields> {new fields { name = "department", value = "Finance"}}},
    new Person { name = "Wanda", department = new List<fields> {new fields { name = "department", value = "Finance"}}},
 }; 
```

我玩弄了分组。这是据我所知：

```
var query = from p in people
            from field in p.department
            where field.name == "department"
            group p by field.value into departments
            select new
            {
                Department = departments.Key,
                Name = departments
            }; 
```

因此可以遍历组，但不确定如何列出人员名称 -

```
foreach (var department in query)
{
    Console.WriteLine("Department: {0}", department.Department);
    foreach (var foo in department.Department)
    {
        // ??
    }
} 
```

关于如何做得更好或如何列出相关部门的名称有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T03:52:19.363

啊，应该是：

```
foreach (Person p in department.Name) Console.WriteLine(p.name); 
```

谢谢你的眼睛，Fyodor！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T03:42:08.950

您的`department`属性似乎是一个尴尬的实现，特别是如果您想按部门分组。使用 List 作为键进行分组会导致大量复杂性，而且这是不必要的，因为您只关心 List 中的一个元素。

另外，您似乎已经创建了`fields`该类作为模拟动态/匿名类型或仅模拟该类的一种方式`Dictionary<string, string>`，我真的不知道。我建议不要这样做；C# 已经内置了这些类型，解决它们只会效率低下，并且会阻止您使用 Intellisense。不管是什么导致你这样做，可能有一种更好、更 C# 风格的方法。此外——这是关键——你的代码看起来你可以忘记所有这些并制作`department`一个简单的字符串。

如果您可以控制数据结构，我建议重新组织它：

```
var people = new List<Person> { 
    new Person { name = "John", department = "IT"}, 
    new Person { name = "Sally", department = "IT"},
    new Person { name = "Bob", department = "Finance"},
    new Person { name = "Wanda", department = "Finance"},
}; 
```

突然之间，将所有内容分组变得简单：

```
var departments = from p in people
                  group p by p.department into dept
                  select dept;

foreach (var dept in departments)
{
    Console.WriteLine("Department: {0}", dept.Key);
    foreach (var person in dept)
    {
        Console.WriteLine("Person: {0}", person.name);
    }
} 
```

## 如果你*必须*保持数据结构不变，你可以试试这个：

```
from p in people
from field in p.department
where field.name equals "department"
group p by field.value into dept
select dept; 
```

这应该适用于上述嵌套循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T03:35:30.417

每个部门的人员列表可以通过 访问`department.Name`。简单地迭代它：

```
 foreach( var person in department.Name ) Console.WriteLine( person.name ); 
```

`department.Department`另一方面，的值属于 类型`string`。此值来自`departments.Key`，而后者又来自`field.value`- 因为这是您分组的关键。

foreach 语句`department.Department`仍然编译得很好，因为`string`实现了`IEnumerable<char>`. 因此，您的`foo`变量的类型为`char`.

# python - Python（Pygame）控制淡入的持续时间

> ID：13466154
> 
> 赞同：1
> 
> 时间：2012-11-20T03:27:21.070
> 
> 标签：python, pygame

我想在 2 秒内将一个矩形从 alpha = 0 淡化到 alpha = 255。使用以下代码，我可以让矩形淡入，但我不知道让持续时间准确（尽可能准确）2 秒。

```
pygame.init()

#frames per second setting
FPS = 30
fpsClock = pygame.time.Clock()

#Set up window
screen = pygame.display.set_mode((1280,800))
shape = screen.convert_alpha()

#Colors
alpha = 0
WHITE = (255, 255, 255,alpha)
BLACK = (0,0,0)

#Stimuli
stimulus = pygame.Rect(100,250,100,100)

def fade():
    """Fades in stimulus"""
    global alpha
    alpha = alpha + 5   <--- (Do I change this increment?)
    #Draw on surface object
    screen.fill(BLACK)
    shape.fill(BLACK)
    pygame.draw.rect(shape,(255, 255, 255,alpha),stimulus)
    screen.blit(shape,(0,0))
    pygame.display.update(stimulus)
    fpsClock.tick(FPS)

while True:
    fade() 
```

此外，如果我使用全屏，我应该使用标志 HWSURFACE 和 DOUBLEBUF 吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T03:50:38.320

我会尝试测量自操作开始以来经过的实际时间，并`alpha`与剩余时间成正比。

类似的东西：

```
import time

def fade():
    DURATION = 2.0 # seconds
    start_time = time.clock()
    ratio = 0.0 # alpha as a float [0.0 .. 1.0]
    while ratio < 1.0:
        current_time = time.clock()
        ratio = (current_time - start_time) / DURATION
        if ratio > 1.0: # we're a bit late
            ratio = 1.0
        # all your drawing details go in the following call
        drawRectangle(coordinates, alpha = 255 * ratio)
        fpsClock.tick(FPS) 
```

这样，如果`tick`工作不完美（确实如此），您的 alpha 会遵循其缺陷，而不是累积错误。当 2 秒结束时，您可以保证绘制了一个完全不透明的矩形。

# c# - XAML 数据绑定和动态字符串格式

> ID：13466158
> 
> 赞同：0
> 
> 时间：2012-11-20T03:28:08.923
> 
> 标签：c#, xaml, binding, string-formatting

只是在数据绑定时格式化显示的字符串时遇到了一些麻烦。

假设我有一个属性大小：

```
 /// <summary>
    /// Size information
    /// </summary>
    private long _size;
    public long Size
    {
        get
        {
            return _size;
        }
        set
        {
            if (value != _size)
            {
                _size = value;
                NotifyPropertyChanged("Size");
            }
        }
    } 
```

而这个大小是一个代表字节数的整数。我想根据整数的大小显示一个表示大小的值。例如：

```
Size = 1 byte
Size = 1 kilobyte
Size = 100 megabytes 
```

这是我的 TextBlock 的 XAML：

```
<TextBlock Text="{Binding Size, StringFormat='Size: {0}'}" TextWrapping="Wrap" Margin="12,110,0,0" Style="{StaticResource PhoneTextSubtleStyle}" Visibility="{Binding Visible}" FontSize="14" Height="20" VerticalAlignment="Top" HorizontalAlignment="Left" Width="200"/> 
```

截至目前，它只显示“大小：50”，意思是 50 个字节，但我希望它显示“大小：50 字节/千字节/兆字节”（无论哪个合适），否则我会得到“大小：50000000000000”和巨大的像这样的数字。

我将如何“动态”更改字符串格式？

请记住，文本块被封装在由 ObservableCollection 限制的 LongListSelector 中，因此如果您知道我的意思，那么简单地获取文本块并更改文本将不起作用，因为会有大量使用文本块格式的对象。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T03:45:01.173

就我而言，我使用了一些技巧。我将视图绑定到一个 viewModel，其中包含一个包含格式化值的附加字符串属性。例如，像这样：

```
//using short scale: http://en.wikipedia.org/wiki/Long_and_short_scales#Comparison
const decimal HundredThousand = 100 * 1000;
const decimal Million = HundredThousand * 10;
const decimal Billion = Million * 1000; //short scale
const decimal Trillion = Billion * 1000; //short scale

const string NumberFormatKilo = "{0:##,#,.## K;- ##,#,.## K;0}";
const string NumberFormatMillion = "{0:##,#,,.## M;- ##,#,,.## M;0}";
const string NumberFormatBillion = "{0:##,#,,,.## B;- ##,#,,,.## B;0}";
const string NumberFormatTrillion = "{0:##,#,,,,.## T;- ##,#,,,,.## T;0}";

public decimal Size 
{
    get; set;
}

public string SizeFormatted 
{
    get 
    {
        var format = GetUpdatedNumberFormat(Size);
        return string.Format(format, Size);
    }
}

private static string GetUpdatedNumberFormat(decimal value)
{
    string format = NumberFormat;
    if (Math.Abs(value) >= Constants.Trillion)
        format = NumberFormatTrillion;
    else if (Math.Abs(value) >= Constants.Billion)
        format = NumberFormatBillion;
    else if (Math.Abs(value) >= Constants.Million)
        format = NumberFormatMillion;
    else if (Math.Abs(value) >= Constants.HundredThousand)
        format = NumberFormatKilo;
    return format;
} 
```

现在，将视图绑定到此`SizeFormatted`属性：

```
<TextBlock Text="{Binding SizeFormatted}" ... 
```

# powershell - 写进度显示在控制台缓冲区之外

> ID：13466160
> 
> 赞同：1
> 
> 时间：2012-11-20T03:28:16.547
> 
> 标签：powershell

我有一个脚本，它为目录中的每个文件调用一个外部程序（[SoX](http://sox.sourceforge.net/)）。我[`Write-Progress`](http://technet.microsoft.com/en-us/library/hh849902.aspx)在每次调用 SoX 之前调用，但是进度条被 SoX 的输出推离控制台缓冲区的顶部（不管控制台的大小）。我能做些什么来避免这种情况吗？

这是脚本：

```
$audioFiles = ls -Exclude *.ps1 | ? { !$_.PSIsContainer } 
foreach ($audioFile in $audioFiles)
{
    $i++
    Write-Progress -Activity "Transforming Audio" -Status $audioFile.Name -PercentComplete (($i / @($audioFiles).length) * 100)
    & 'C:\Program Files (x86)\sox-14-4-0\sox.exe' "$audioFile" ('Fast/' + $audioFile.Name) -S -G tempo -s 1.3 
}

Write-Progress -Activity "Transforming Audio" -PercentComplete 100 -Completed

[void] [Reflection.Assembly]::LoadWithPartialName(“System.Windows.Forms”) 
[windows.forms.messagebox]::show(“All done!”) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T07:48:47.193

也许您可以在 sox 输出之前设置相同的控制台光标位置？请试试

```
$audioFiles = ls -Exclude *.ps1 | ? { !$_.PSIsContainer } 
foreach ($audioFile in $audioFiles){
    $i++
    Write-Progress -Activity "Transforming Audio" -Status $audioFile.Name -PercentComplete (($i / @($audioFiles).length) * 100)

    # get windows height 
    $y=[int]($host.ui.rawui.WindowSize.Height -5)
    # will set cursor position to bottom of the screen 
    $Host.UI.RawUI.CursorPosition = New-Object System.Management.Automation.Host.Coordinates 2,$y 
    #clear current line
    $sbOut = new-object System.Text.Stringbuilder
    (0.. $Host.UI.RawUI.WindowSize.Width)|%{$sbOut.append(' ')} |out-Null
    write-Host $sbOut.toString() -NoNewline

    & 'C:\Program Files (x86)\sox-14-4-0\sox.exe' "$audioFile" ('Fast/' + $audioFile.Name) -S -G tempo -s 1.3 
    }
Write-Progress -Activity "Transforming Audio" -PercentComplete 100 -Completed
[void] [Reflection.Assembly]::LoadWithPartialName(“System.Windows.Forms”) 
[windows.forms.messagebox]::show(“All done!”) 
```

您还可以将 sox 输出重定向到文件，或者如果您不关心 sox 输出，只需将其重定向到 out-null ：

```
& 'C:\Program Files (x86)\sox-14-4-0\sox.exe' "$audioFile" ('Fast/' + $audioFile.Name) -S -G tempo -s 1.3 | out-null 
```

# java - 使用流/对象方法将 JSON 解析为 Jackson

> ID：13466166
> 
> 赞同：10
> 
> 时间：2012-11-20T03:28:42.573
> 
> 标签：java, json, parsing, jackson

我有一个可以有多种类型的 JSON 文件。

例如：

```
{
    "dog": {
        "owner" : "John Smith",
        "name" : "Rex",
        "toys" : {
            "chewtoy" : "5",
            "bone" : "1"
        }
    },
    "person": {
        "name" : "John Doe",
        "address" : "23 Somewhere Lane"
    }
    // Further examples of dogs and people, and a few other types.
} 
```

我想将这些解析为对象。IE。我想创建一个具有所有者/名称/玩具属性的 Dog 对象，以及具有名称/地址属性的人，并使用 Jackson 来读取并从中创建对象。

排序很重要——例如，我需要知道 Rex 在 John Doe 之前出现。我更喜欢使用类似流的方法（即读取 Rex 并将其解析为 Dog 对象，对其进行处理，然后丢弃它，然后转到 John Doe）。所以我需要一种基于流的方法。

我不知道如何同时使用流读取 API（按顺序通过）和 ObjectMapper 接口（以便从 JSON 创建 Java 对象）来完成此操作。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-20T04:46:38.853

为此，您需要在工厂中使用对象映射器

```
import org.codehaus.jackson.JsonFactory;
import org.codehaus.jackson.JsonParser;
import org.codehaus.jackson.JsonProcessingException;
import org.codehaus.jackson.map.ObjectMapper;
...
private static ObjectMapper mapper = new ObjectMapper();
private static JsonFactory factory = mapper.getJsonFactory(); 
```

然后为输入创建一个解析器。

```
JsonParser parser = factory.createJsonParser(in); 
```

现在您可以混合调用*parser.nextToken()*和调用*parser.readValueAs(Class c)*。这是一个从地图中获取类的示例：

```
Map<String, Class<?>> classMap = new HashMap<String, Class<?>>();
classMap.put("dog", Dog.class);
classMap.put("person", Person.class);

InputStream in = null;
JsonParser parser = null;
List<Object> results = new ArrayList<Object>();
try {
  in = this.getClass().getResourceAsStream("input.json");
  parser = factory.createJsonParser(in);
  parser.nextToken();// JsonToken.START_OBJECT
  JsonToken token = null;
  while( (token = parser.nextToken()) == JsonToken.FIELD_NAME ) {
    String name = parser.getText();
    parser.nextToken(); // JsonToken.START_OBJECT
    results.add(parser.readValueAs(classMap.get(name)));
  }
  // ASSERT: token = JsonToken.END_OBJECT
}
finally {
  IOUtils.closeQuietly(in);
  try {
    parser.close();
  }
  catch( Exception e ) {}
} 
```

# asp.net-mvc - 链接到站点地图的 DevExpress 菜单

> ID：13466167
> 
> 赞同：0
> 
> 时间：2012-11-20T03:29:04.533
> 
> 标签：asp.net-mvc, razor, devexpress, sitemap

我的 _Layout 页面上有一个带有站点地图和 devexpress 菜单项的 MVC4 项目。我的站点地图中有一个用于 InwardsGoods 的部分和一个索引页面，用户可以在其中查询交付。QueryDeliveries 与 InwardsGoods 主页（索引）页面相同。

```
<siteMapNode url="InwardsGoods/Index" title="Stock and Deliveries"  description="">
  <siteMapNode url="InwardsGoods/Index" title="Query Deliveries"  description=""/>
</siteMapNode> 
```

当我尝试运行它时，它抱怨“ConfigurationErrorsException 未被用户代码处理”然后“站点地图文件无效”

我不明白的是，当我在没有 url 的情况下运行 siteMap 时，它可以正常运行菜单，但很明显，Query Deliveries 的链接不会去任何地方。

```
<siteMapNode url="InwardsGoods/Index" title="Stock and Deliveries"  description="">
  <siteMapNode url="" title="Query Deliveries"  description=""/>
</siteMapNode> 
```

如何编辑站点地图以允许两个站点地图节点工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T05:40:01.717

您不能在多个站点地图注释中复制 URL“InwardsGoods/Index”。将其更改为“InwardsGoods/Queries”或站点地图中嵌套链接中的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T01:25:02.740

我设法通过将 url 更改为 InwardsGoods/Queries 并在控制器中添加一个操作结果来解决这个问题

# c# - Backgroundworker，不运行进度条

> ID：13466169
> 
> 赞同：3
> 
> 时间：2012-11-20T03:29:06.550
> 
> 标签：c#, progress-bar, backgroundworker

我该如何解决这个问题？

我希望进度条在过程中加载，直到完成

这是我的代码：

```
private void btnProcess_Click(object sender, EventArgs e)
    {
        backgroundWorker.WorkerReportsProgress = true;
        backgroundWorker.ProgressChanged += backgroundWorker_ProgressChanged;
        backgroundWorker.DoWork += backgroundWorker_DoWork;

        backgroundWorker.RunWorkerAsync();
    }

    private void backgroundWorker_DoWork(object sender, DoWorkEventArgs e)
    {
        //start transaction
        DoTransaction();
    }

    private void backgroundWorker_ProgressChanged(object sender, ProgressChangedEventArgs e)
    {
        progressBar.Value = e.ProgressPercentage;
    } 
```

我的交易功能：

```
private void DoTransaction()
    {
        string pathIdentifier;
        pathIdentifier = func.checkthePathFile();
        if (pathIdentifier == null)
        {
            MessageBox.Show("Path has no yet been specified!");
        }
        else
        {
            //create xml base from user inputs
            XElement transactXML = new XElement("Transaction",
                new XElement("CardNumber", txtCardNum.Text.Trim()),
                new XElement("ExpireDate", txtExpDate.Text.Trim()),
                new XElement("Cardtype", txtCardType.Text.Trim())
                );

            //save xml to a file
            transactXML.Save(pathIdentifier + "/sample.xml");
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T03:33:01.340

运行时应该如何知道您的流程有多远？

您需要通过`backgroundWorker.ReportProgress`从后台操作调用来告诉它。这里没有魔法。

MSDN：http: [//msdn.microsoft.com/en-us/library/ka89zff4.aspx](http://msdn.microsoft.com/en-us/library/ka89zff4.aspx)

将您的流程分解为有意义的块，并在有意义的`ReportProgress`时候这样做。

```
public void DoTransaction()
{
    part1();
    backgroundWorker.ReportProgress(25);

    part2();
    backgroundWorker.ReportProgress(50);

    part3();
    backgroundWorker.ReportProgress(75);

    part4();
    backgroundWorker.ReportProgress(100);
} 
```

**基于 Transaction() 函数的发布进行编辑**

如果你对编写多线程程序没有信心，那么不要尝试编写多线程程序，即使在 BackgroundWorker 的帮助下，它试图从你那里抽象出一些细节。

几个问题：

您提供`Transaction()`的方法尝试从后台线程启动`MessageBox`并读取`Text`各种控件的属性。这将导致问题，因为当从创建它们的线程之外的线程访问 UI 元素时，运行时通常会引发异常。

如果您真的想在 中保存 XML `BackgroundWorker`，您应该验证文件名和目录，并将`Text`属性保存到中间对象，然后再设置`BackgroundWorker`和调用`RunWorkerAsync`.

此外，在我看来，您的`Transaction`方法不会耗费足够的时间来真正保证后台线程。即使是相对较旧的 PC 也能够以比眨眼更快的速度创建和保存 15 元素的 XML 文件。运行时可能会浪费更多时间在线程之间编组数据，而不是简单地将文件写入磁盘。只需在按钮单击事件处理程序中完成您的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T03:34:39.787

需要对 BackgroundWorker 实例的一些引用。在实例化它时传递对类的引用。
像这样实例化

```
BackgroundWorker worker = sender as BackgroundWorker; 
```

然后像这样打电话

```
`worker.ReportProgress(...)` 
```

# php - 重写查询字符串的 url

> ID：13466175
> 
> 赞同：0
> 
> 时间：2012-11-20T03:29:55.260
> 
> 标签：php, mysql, .htaccess, get, query-string

嗨，我想问一下如何 使用 .htaccess mod_write将[http://abc.tk/comments.php?post_referrel_id=16](http://abc.tk/comments.php?post_referrel_id=16)转换 为 [http://abc.tk/comments.php?post_referrel_id/16](http://abc.tk/comments.php?post_referrel_id/16)

```
 RewriteBase /
                Options +FollowSymlinks -MultiViews
                RewriteEngine On
                RewriteRule ^comments\.php\?post_referrel_id/([^/]*)$  /comments.php?post_referrel_id=$1 [L,QSA] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T03:50:33.677

看一下这个。

```
RewriteEngine On
RewriteBase /
RewriteRule ^comments\.php\?post_referal_id/([^/]*)$ /comments.php?post_referrel_id=$1 [L,QSA] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T03:40:46.940

在这种情况下，URL 重写无关紧要，因为您仍在使用查询字符串。将 Query 字符串与以下内容一起消除会产生更多效果：

```
http://abc.tk/comments.php/post_referrel_id/16 
```

不过，这可以使用 .htaccess 来实现

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteRule comments.php?post_referral_id/(.*)$ /comments.php?post_referral_id=$1 [L]
</IfModule> 
```

它仍将使用相同的代码，但会被不同的 URL 识别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T03:38:22.457

```
RewriteEngine on
RewriteRule comments.php?(.*)/(.*)/$  /comments.php?$1=$2 [L] 
```

# c# - IL Merged 后控制台应用程序不再有控制台

> ID：13466176
> 
> 赞同：9
> 
> 时间：2012-11-20T03:30:23.480
> 
> 标签：c#, ilmerge

我正在使用***ILMerge***合并控制台应用程序的使用库。合并后，生成的 exe 在一秒钟内完成执行并在后台运行（不显示其输出`Console.WriteLine`）。
我该怎么做才能将它作为控制台应用程序实际运行？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-20T04:31:04.783

使用命令行选项运行 ILMerge`/target:exe`

# gtk - GTK，如何让应用程序使用修改后的 libgtk？

> ID：13466177
> 
> 赞同：0
> 
> 时间：2012-11-20T03:30:39.680
> 
> 标签：gtk, ld

在`/opt`中，我解压了一个 GTK 压缩包，以较小的方式修改了几个`.c`文件，运行`./configure`（没有任何选项）和`make`（但不进行安装），然后运行 ​​GTK 的一个测试以确认我的更改已实现。他们是。

我重命名了 linux 发行版的`libgtk`in`/usr`来备份它。在它的地方，我创建了一个符号链接，指向具有我的 mod的`libgtk`in 。`/opt`

我已经为 2.0 和 3.0 版本执行了此操作。

然而，应用程序，例如 Firefox，似乎仍在使用该发行版的默认库。

我错过了哪些步骤？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T09:27:58.990

我将在*ergosys*中添加关于运行的评论`ldconfig`，您可能想要做的是将路径添加到您的自定义版本库目录（类似于`/opt/gtk-2.xx-customized/lib`或`/opt/gtk-3.xx-customized/lib`使用正确的版本号）在`/etc/ld.so.conf`. 通过`ldconfig`之后以 root 身份运行，它应该更新链接器缓存。但是，需要在系统路径之前指定自定义版本的路径。这样，更改是系统范围的，并且您不会弄乱您的发行版创建的文件，这将使您的包管理器满意。原始版本和定制版本将位于不同的目录中，便于维护。使用这样的`--prefix`选项：`./configure --prefix /opt/gtk-2.xx-customized`指定安装您构建的软件的位置。请记住之前创建该目录，并授予您的用户相应的写入权限。

请阅读`man ldconfig`以获取更多信息。

如果您出于某种原因只想偶尔运行一次使用原始库集的应用程序，只需使用`LD_LIBRARY_PATH`environment var 指向您要在所有其他已知的目录之前检查的目录`ld`，这一次是你原来的图书馆在哪里。语法是`LD_LIBRARY_PATH="/usr/lib" name-of-your-application`. 不要忘记在 64 位系统上，库目录可能被命名为 lib64。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T06:07:51.037

我想我已经解决了。我通过在其名称上附加点来备份原始的 libgtk。例如，

`libgtk-x11-2.0.so.0.2400.10`

重命名为

`libgtk-x11-2.0.so.0.2400.10.original`

现在，我将点更改为破折号：`.original`to `-original`... 并且 ldconfig 现在似乎忽略了备份副本，这很好。

以下对 ldconfig 是健壮的：

```
lrwxrwxrwx  libgtk-3.so -> libgtk-3.so.0
lrwxrwxrwx  libgtk-3.so.0 -> libgtk-3.so.0.400.2.alt
lrwxrwxrwx  libgtk-3.so.0.400.2 -> libgtk-3.so.0.400.2.alt
-rw-r--r--  libgtk-3.so.0.400.2-original
lrwxrwxrwx  libgtk-3.so.0.400.2.alt -> /opt/gtk/gtk+-3.4.2/gtk/.libs/libgtk-3.so.0.400.2

lrwxrwxrwx  libgtk-x11-2.0.so -> libgtk-x11-2.0.so.0
lrwxrwxrwx  libgtk-x11-2.0.so.0 -> libgtk-x11-2.0.so.0.2400.10.alt
lrwxrwxrwx  libgtk-x11-2.0.so.0.2400.10 -> libgtk-x11-2.0.so.0.2400.10.alt
-rw-r--r--  libgtk-x11-2.0.so.0.2400.10-original
lrwxrwxrwx  libgtk-x11-2.0.so.0.2400.10.alt -> /opt/gtk/gtk+-2.24.10/gtk/.libs/libgtk-x11-2.0.so.0.2400.10 
```

# django - Django 中的消息（从 1.2 更新到 1.4）

> ID：13466179
> 
> 赞同：2
> 
> 时间：2012-11-20T03:30:54.420
> 
> 标签：django

我最近从 1.2 更新到 Django 1.4。

在过渡期间，不推荐使用 set_messages，现在消息 API 已更改为 add_message。基于[此页面](https://docs.djangoproject.com/en/dev/ref/contrib/messages/)，我应该使用以下格式：

`messages.add_message(request, messages.INFO, 'Hello world.')`

但是，我得到了错误`global name 'request' is not defined`。有谁知道为什么？

这是我的代码（导致问题的行以粗体显示）

```
class InviteFriendForm(UserForm):

to_user = forms.CharField(widget=forms.HiddenInput)
message = forms.CharField(label="Message", required=False, widget=forms.Textarea(attrs = {'cols': '20', 'rows': '5'}))

    def clean_to_user(self):
        to_username = self.cleaned_data["to_user"]
        try:
            User.objects.get(username=to_username)
        except User.DoesNotExist:
            raise forms.ValidationError(u"Unknown user.")

        return self.cleaned_data["to_user"]

    def clean(self):
        to_user = User.objects.get(username=self.cleaned_data["to_user"])
        previous_invitations_to = FriendshipInvitation.objects.invitations(to_user=to_user, from_user=self.user)
        if previous_invitations_to.count() > 0:
            raise forms.ValidationError(u"Already requested friendship with %s" % to_user.username)
        # check inverse
        previous_invitations_from = FriendshipInvitation.objects.invitations(to_user=self.user, from_user=to_user)
        if previous_invitations_from.count() > 0:
            raise forms.ValidationError(u"%s has already requested friendship with you" % to_user.username)
        return self.cleaned_data

    def save(self):
        to_user = User.objects.get(username=self.cleaned_data["to_user"])
        message = self.cleaned_data["message"]
        invitation = FriendshipInvitation(from_user=self.user, to_user=to_user, message=message, status="2")
        invitation.save()
        if notification:
            notification.send([to_user], "friends_invite", {"invitation": invitation})
            notification.send([self.user], "friends_invite_sent", {"invitation": invitation})
            **messages.add_message(request, messages.SUCCESS, "Friendship requested with %s" % to_user.username)**
        return invitation 
```

追溯：

```
Traceback:
File "/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/Users/nb/Desktop/nutstore/apps/profiles/views.py" in profile
  125\.                     invite_form.save()
File "/Users/nb/Desktop/nutstore/apps/friends/forms.py" in save
  81\.             messages.add_message(request, messages.SUCCESS, "Friendship requested with %s" % to_user.username)

Exception Type: NameError at /profiles/profile/test/
Exception Value: global name 'request' is not defined 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T03:38:48.853

Django 表单无权访问当前请求。这是一个有意的设计决策，以减少组件之间的耦合，但以便利为代价。

因此，您得到 a`NameError`因为*在 scope 中没有请求变量*。如果您想在 中使用请求`save()`，则需要在某个时候将其传入，例如

```
class InviteFriendForm(forms.Form):
    def save(self, request):
        # ...

# view
form.save(request) 
```

# printing - Drupal 7：使用 dompdf 打印 pdf

> ID：13466180
> 
> 赞同：4
> 
> 时间：2012-11-20T03:31:07.623
> 
> 标签：printing, drupal-7, dompdf

我需要安装 dompdf 的帮助。我应该将提取的 zip 文件放在目录中的什么位置？我遵循了 INSTALL.txt，它说“将下载的包的内容提取到支持的路径之一中”。这是否意味着放入“模块”文件夹？如果是这样，请求“.info”时会发生错误。而且它没有提供。请帮忙，我很困惑！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-01T19:20:19.477

这是我加载它的方式

*   我将文件夹 dompdf-0.5.1 移至`/sites/all/libraries`文件夹
*   `DOMPDF_autoload()`我通过将函数替换为以下内容来编辑 dompdf_config.inc.php ：

代码：

```
function DOMPDF_autoload($class) {
  /* Add this checking - START */
  if (mb_strtolower($class)== 'firephp'){
    return;
  }
  /* Add this checking - END */

  $filename = mb_strtolower($class) . ".cls.php";
  require_once(DOMPDF_INC_DIR . "/$filename");
}
if ( !function_exists("__autoload") ) {
  /**
   * Default __autoload() function
   *
   * @param string $class
   */
  function __autoload($class) {
    DOMPDF_autoload($class);
  }
} 
```

*   现在你应该可以在任何其他模块中使用它了

代码：

```
 require_once(realpath('.')."/sites/all/libraries/dompdf-0.5.1/dompdf_config.inc.php");
    spl_autoload_register('DOMPDF_autoload'); 

    $obj = new DOMPDF(); 
```

这有效，我能够使用 DOMPDF 对象/类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T04:21:52.787

install.txt 文件中列出了支持的路径：

```
supported paths:
  * print module lib directory (usually sites/all/modules/print/lib)
  * libraries directory (sites/all/libraries) 
```

我更喜欢第二个选项，它可以让你在每次更新模块时都不必这样做。

换句话说，它应该看起来像这样`sites/all/libraries/dompdf`

# jquery - jquery 帮助（在淘汰赛中使用主干 $.el）

> ID：13466185
> 
> 赞同：0
> 
> 时间：2012-11-20T03:31:53.417
> 
> 标签：jquery, backbone.js, knockout.js

嗨，我正在尝试将此代码从骨干网转移到淘汰赛。我猜它更像是一个 jQuery 问题，因为主干使用 $el 作为助手？

主干中的代码是

```
//this.el is the root element of Backbone.View. By default, it is a div.    
//$el is cached jQuery object for the view's element.
//append the compiled template into view div container

  this.$el.append(***some html***); 
```

所以 console.log (this.$el) 返回一个对象

我努力了

```
console.log($(** some html **)) 
```

但这只是返回第一次潜水的名称而不是对象...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T03:46:01.107

`var el`在 javascript 中通常是指您尝试获取/设置的任何元素。

例如，在 jQuery 中，一些常见的事情是：

`$('this')`

或者在 Javascript 中它可能是：

`getElementById('your element e.g: my-awesome-id')`

对于这种情况，我认为它实际上应该被解读为：

`this.('div').append('<span>we append something here</span>')`

而不是`console.log($(** some html **))`尝试使用`console.log(this.$el)`

我希望这对您有所帮助，干杯！

# objective-c - 我应该在 viewDidLoad 还是 viewWillLayoutSubviews 上初始化我的 viewController

> ID：13466189
> 
> 赞同：5
> 
> 时间：2012-11-20T03:32:02.060
> 
> 标签：objective-c, xcode4.5

我注意到有时在 viewDidLoad 上我的视图大小是正确的。有时我不会。

例如

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.pullToRefreshController = [self.pullToRefreshController initWithDelegate:self];
    PO(self.view);
    PO(self.view.superview);
    PO(self.view.superview.superview);
    PO(self.view.superview.superview.superview);

    while(false);
}
-(void)viewWillLayoutSubviews
{
    PO(self.view);
    PO(self.view.superview);
    PO(self.view.superview.superview);
    PO(self.view.superview.superview.superview);
    while (false);
} 
```

在 viewDidLoad 处 self.view 的大小仍然是 320 到 480。在已修复的 viewWillLayoutSubviews 处。

我想知道两者之间会发生什么，我应该在哪里初始化东西？或者 viewDidLoad 中应该包含哪些内容，viewWillLayoutSubviews 中应该包含哪些内容？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-20T03:42:46.757

`viewDidLoad`是创建和初始化要添加到主视图的子视图的好地方。这也是进一步自定义主视图的好地方。它也是初始化数据结构的好地方，因为在调用它时应该已经在视图控制器上设置了任何属性。这通常只需要执行*一次*。

`viewWillLayoutSubviews`如果需要，您可以在其中定位和布局子视图。这将在旋转或其他事件导致视图控制器的视图被调整大小后调用。这可能在视图控制器的生命周期中发生*多次*。您应该只在此处布局视图。

# sql - SQL SELECT 多列合二为一

> ID：13466190
> 
> 赞同：8
> 
> 时间：2012-11-20T03:32:06.337
> 
> 标签：sql, sql-server-2008, select

我在 SQL Server 2008 中有这个查询：

```
SELECT Id, Year, Manufacturer, Model  
FROM Table 
```

我需要这样的东西......

```
SELECT Id, (Year + [space] + Manufacturer + [space] + Model) AS MyColumn 
FROM Table 
```

我怎样才能得到这个结果？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-20T07:20:26.943

我认为您需要转换为字符串数据类型的所有整数或数字数据类型。何时可以创建新列。

询问：

```
SELECT Id, (Cast([Year] as varchar(4)) + ' ' + Manufacturer + ' ' + Model) AS MyColumn 
FROM   Tablename 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-20T03:33:00.440

只需使用`' '`

```
SELECT Id, ([Year] + ' ' + Manufacturer + ' ' + Model) AS MyColumn 
FROM   Tablename 
```

# spring - org.springframework.beans.factory.BeanCreationException 来自 [applicationContext-mytutorial.xml]

> ID：13466191
> 
> 赞同：1
> 
> 时间：2012-11-20T03:32:26.477
> 
> 标签：spring, hibernate

我正在做与 spring、hibernate 和 maven 相关的教程。并收到`org.springframework.beans.factory.BeanCreationException`错误消息。这是教程的链接：

[http://www.lulu.com/shop/arulkumaran-kumaraswamipillai-and-sivayini-arulkumaran/tutorial-java-maven-2-eclipse-jsf/ebook/product-1603040.html;jsessionid=0C532C55C373D3DDB01AC49ACE23A5E2](http://www.lulu.com/shop/arulkumaran-kumaraswamipillai-and-sivayini-arulkumaran/tutorial-java-maven-2-eclipse-jsf/ebook/product-1603040.html;jsessionid=0C532C55C373D3DDB01AC49ACE23A5E2)

在我将 hibernateTemplate 的内容放入代码之后，当我阅读本教程时。

我完全按照教程所说的做了。

但我不断收到此错误。即使我遇到错误，我也会继续将其余代码写入 Eclipse。

```
Exception in thread "main" org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'courseService' defined in class path resource [applicationContext-mytutorial.xml]: Cannot resolve reference to bean 'transactionManager' while setting bean property 'transactionManager'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManager' defined in class path resource [applicationContext-mytutorial.xml]: Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [applicationContext-mytutorial.xml]: Invocation of init method failed; nested exception is org.hibernate.service.spi.ServiceException: Unable to create requested service [org.hibernate.engine.transaction.spi.TransactionFactory]
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:275)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:104)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1245)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1010)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:472)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory$1.run(AbstractAutowireCapableBeanFactory.java:409)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:380)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:264)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:261)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:185)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:164)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:423)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:728)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:380)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:83)
    at com.mytutorial.App.main(App.java:13)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManager' defined in class path resource [applicationContext-mytutorial.xml]: Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [applicationContext-mytutorial.xml]: Invocation of init method failed; nested exception is org.hibernate.service.spi.ServiceException: Unable to create requested service [org.hibernate.engine.transaction.spi.TransactionFactory]
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:275)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:104)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1245)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1010)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:472)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory$1.run(AbstractAutowireCapableBeanFactory.java:409)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:380)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:264)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:261)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:185)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:164)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:269)
    ... 18 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [applicationContext-mytutorial.xml]: Invocation of init method failed; nested exception is org.hibernate.service.spi.ServiceException: Unable to create requested service [org.hibernate.engine.transaction.spi.TransactionFactory]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1338)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:473)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory$1.run(AbstractAutowireCapableBeanFactory.java:409)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:380)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:264)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:261)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:185)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:164)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:269)
    ... 31 more
Caused by: org.hibernate.service.spi.ServiceException: Unable to create requested service [org.hibernate.engine.transaction.spi.TransactionFactory]
    at org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:186)
    at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:150)
    at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:131)
    at org.hibernate.cfg.SettingsFactory.buildSettings(SettingsFactory.java:169)
    at org.hibernate.cfg.Configuration.buildSettingsInternal(Configuration.java:2283)
    at org.hibernate.cfg.Configuration.buildSettings(Configuration.java:2279)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1748)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1788)
    at org.springframework.orm.hibernate3.LocalSessionFactoryBean.newSessionFactory(LocalSessionFactoryBean.java:814)
    at org.springframework.orm.hibernate3.LocalSessionFactoryBean.buildSessionFactory(LocalSessionFactoryBean.java:732)
    at org.springframework.orm.hibernate3.AbstractSessionFactoryBean.afterPropertiesSet(AbstractSessionFactoryBean.java:211)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1369)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1335)
    ... 41 more
Caused by: org.hibernate.HibernateException: Unable to instantiate specified TransactionFactory class [org.springframework.orm.hibernate3.SpringTransactionFactory]
    at org.hibernate.engine.transaction.internal.TransactionFactoryInitiator.initiateService(TransactionFactoryInitiator.java:80)
    at org.hibernate.engine.transaction.internal.TransactionFactoryInitiator.initiateService(TransactionFactoryInitiator.java:47)
    at org.hibernate.service.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:69)
    at org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:176)
    ... 53 more
Caused by: java.lang.ClassCastException: org.springframework.orm.hibernate3.SpringTransactionFactory cannot be cast to org.hibernate.engine.transaction.spi.TransactionFactory
    at org.hibernate.engine.transaction.internal.TransactionFactoryInitiator.initiateService(TransactionFactoryInitiator.java:77)
    ... 56 more 
```

这是我的 applicationContext-mytutorial.xml。

```
<beans xmlns="http://www.springframework.org/schema/beans" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:util="http://www.springframework.org/schema/util" 
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
    http://www.springframework.org/schema/beans/spring-beans-2.0.xsd 
    http://www.springframework.org/schema/util 
    http://www.springframework.org/schema/util/spring-util-2.0.xsd">

    <bean id="courseService" parent="txnProxyTemplate">
        <property name="target">
            <bean class="com.mytutorial.CourseServiceImpl" scope="prototype">
                <property name="courseDao" ref="courseDao" />
            </bean> 
        </property>

    <property name="preInterceptors"> 
        <list>
            <ref bean="traceBeforeAdvisor" /> 
        </list>
    </property>
    </bean>

    <bean id="courseDao" class="com.mytutorial.CourseDaoImpl" scope="prototype"> 
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>

    <bean id="transactionManager" 
        class="org.springframework.orm.hibernate3.HibernateTransactionManager">
        <property name="sessionFactory"> 
            <ref bean="sessionFactory" />
        </property> 
    </bean>

    <bean id="txnProxyTemplate" abstract="true" 
        class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean">
            <property name="transactionManager"> 
                <ref bean="transactionManager" />
            </property>
            <property name="transactionAttributes">
                <props>
                    <prop key="*">PROPAGATION_REQUIRED</prop>
                </props> 
            </property>
    </bean>

    <bean id="sessionFactory" 
        class="org.springframework.orm.hibernate3.LocalSessionFactoryBean" 
        scope="singleton">
        <property name="configLocation" value="classpath:hibernate.cfg.xml" /> 
    </bean>

    <!-- Advice classes -->
    <bean id="tracingBeforeAdvice" class="com.mytutorial.TracingBeforeAdvice" />

    <!-- Advisor: way to associate advice beans with pointcuts --> 
    <!-- pointcut definition for before method call advice --> 
    <bean id="traceBeforeAdvisor"
            class="org.springframework.aop.support.RegexpMethodPointcutAdvisor"> 
            <property name="advice">
                <ref local="tracingBeforeAdvice" /> 
            </property>
            <property name="pattern"> 
                <value>.*\.process.*</value>
            </property> 
    </bean>
</beans> 
```

这是我的 CourseServiceImpl.java

```
package com.mytutorial;

import java.util.List;

public class CourseServiceImpl implements CourseService {

    private CourseDao courseDao;

    public CourseDao getCourseDao(){
        return courseDao;
    }

    public void setCourseDao(CourseDao courseDao){
        this.courseDao = courseDao;
    }

    @Override
    public void processCourse(List<Course> courses) {
        // TODO Auto-generated method stub
        //CourseDao dao = new CourseDaoImpl();
        courseDao.create(courses);
        List<Course> list = getCourseDao().findAll(); 
        System.out.println("The saved courses are --> " + list);
        } 
} 
```

这是我的 CourseDaoImpl.java

```
package com.mytutorial;

import java.util.List;

import org.springframework.orm.hibernate3.HibernateTemplate;
import org.springframework.orm.hibernate3.support.HibernateDaoSupport;

public class CourseDaoImpl extends HibernateDaoSupport implements CourseDao {

    @Override
    public void create(List<Course> listCourses) {
        HibernateTemplate ht = getHibernateTemplate();

        for (Course course : listCourses) {
            ht.save(course);        
        } 

    }

    @Override
    public List findAll() {
        // TODO Auto-generated method stub
        HibernateTemplate ht = getHibernateTemplate(); 
        return ht.find("From Course");  
    }
} 
```

这是我的 hibernate.cfg.xml

```
<?xml version='1.0' encoding='utf-8'?> 
<!DOCTYPE hibernate-configuration PUBLIC
"-//Hibernate/Hibernate Configuration DTD 3.0//EN" 
"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">

<hibernate-configuration> 

    <session-factory>
        <!-- Database connection settings -->
        <property name="connection.driver_class">org.hsqldb.jdbcDriver</property> 
        <property name="connection.url">jdbc:hsqldb:hsql://localhost</property> 
        <property name="connection.username">SA</property>
        <property name="connection.password"></property>

        <!-- JDBC connection pool (use the built-in) --> 
        <property name="connection.pool_size">2</property>

        <!-- SQL dialect -->
        <property name="dialect">org.hibernate.dialect.HSQLDialect</property>

        <!-- Drop and re-create the database schema on start-up, also try with “update” to keep the previous values -->
        <property name="hbm2ddl.auto">create</property> 

        <!-- Echo all executed SQL to stdout -->
        <property name="show_sql">true</property>
        <mapping resource="com/mytutorial/Course.hbm.xml"/> 
    </session-factory>
</hibernate-configuration> 
```

这是我的 App.java

```
package com.mytutorial;

import java.util.ArrayList; 
import java.util.List;

import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class App {

    public static void main(String[] args) {

        ApplicationContext ctx = new ClassPathXmlApplicationContext("applicationContext-mytutorial.xml");

        List<Course> courses = new ArrayList<Course>(10);

        Course c1 = new Course(); 
        c1.setName("John"); 
        c1.setCourse("Java");

        courses.add(c1);

        Course c2 = new Course(); 
        c2.setName("Peter"); 
        c2.setCourse("Hibernate");

        courses.add(c2);

        //CourseService service = new CourseServiceImpl(); // tightly coupled 
        CourseService service = (CourseService) ctx.getBean("courseService");
        service.processCourse(courses);
    }
} 
```

# c++ - C++ 可拖动无边框窗口问题

> ID：13466196
> 
> 赞同：3
> 
> 时间：2012-11-20T03:33:09.270
> 
> 标签：c++, winapi, visual-studio-2012

我正在设计一个自定义窗口边框，并在顶部放置一个位图作为拖动条。这可行，但是当我尝试拖动窗口时，它会将自身置于两个不同的区域并在两者之间闪烁。这是一个视频：

[http://dl.dropbox.com/u/85700751/capture-1.avi](http://dl.dropbox.com/u/85700751/capture-1.avi)

当窗口闪烁时，我正在尝试拖动它（由于某种原因它没有显示我的光标）。这是我的拖动代码：

```
case WM_LBUTTONDOWN: {
    int posX = LOWORD(lParam);
    int posY = HIWORD(lParam);
    if((isDragging==false)&&(posX>4)&&(posX<470)&&(posY>4)&&(posY<24))
        {
            isDragging = true;
            ClipCursor(rect);
            oldCursorX = posX;
            oldCursorY = posY;
        }
    }
    break;
case WM_LBUTTONUP: {
    isDragging = false;
    ClipCursor(NULL);
    }
    break;
case WM_MOUSEMOVE: {
        if(isDragging)  {
            SetWindowPos(hWnd, NULL, LOWORD(lParam)-oldCursorX, HIWORD(lParam)-oldCursorY, 500, 500, NULL);
        }
    }
    break; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T18:44:55.047

It's generally easiest to simply resond to WM_NCHITTEST. For that message, the LPARAM will have the mouse hit X and Y coordinates (same as WM_LBUTTONDOWN). If they're within your draggable area just return HTCAPTION. The system will then automatically handle all the drag logic for you.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T07:31:05.650

传递给 WM_MOUSEMOVE 的光标坐标是相对于窗口位置的。但是每次收到 WM_MOUSEMOVE 时，您都会不断更改窗口位置。

使用 ::ClientToScreen() 将坐标转换为屏幕坐标。

# windows-phone-7 - Windows Phone 7.5 Text To Speech 的简单实现？

> ID：13466200
> 
> 赞同：0
> 
> 时间：2012-11-20T03:33:41.053
> 
> 标签：windows-phone-7, text-to-speech

这似乎不存在。我想要的只是一个关于如何在 Windows Phone 7.5 上使用 TTS 功能的简单、最新的教程或指南。

微软最近在 WP8 中发布了一个教程，它更容易实现。

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj207057%28v=vs.105%29.aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj207057%28v=vs.105%29.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T07:46:51.503

您不能在 Windows Phone 7.5 中使用 TTS 语音，因为它之前并未直接针对 Windows Phone 7 设备公开。但是你可以使用这个夏威夷研究项目

[http://research.microsoft.com/en-us/projects/hawaii/default.aspx](http://research.microsoft.com/en-us/projects/hawaii/default.aspx)

# android - Json解析的数据需要存储在android中的sqlite数据库中

> ID：13466201
> 
> 赞同：2
> 
> 时间：2012-11-20T03:33:40.390
> 
> 标签：android, sqlite, android-sqlite

我已经解析了 URL，我得到了 JSON 对象，我需要将其存储到数据库中的字符串值。我的问题是：

**插入这些 JSON 对象的最佳方法是什么？**

我正在存储每个字符串值。还有其他有用的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T07:41:54.510

您*可以*将整个 JSON 存储在一个大文本字段中，但如果您想单独访问这些值，则需要将它们存储在单独的列中。

# git - 尝试推送到服务器时在 netbeans 中获取 REJECTED_NONFASTFORWARD

> ID：13466205
> 
> 赞同：26
> 
> 时间：2012-11-20T03:34:04.580
> 
> 标签：git, netbeans

我是一个新的 git 用户。

我在 bitbucket 上有一个存储库，我想将它导入到我在实时共享主机 Web 服务器（我安装了 git）上创建的 .git 文件夹中。我可以通过 SSH 发出命令。我正在按照[http://joemaller.com/990/a-web-focused-git-workflow/中的说明进行操作](http://joemaller.com/990/a-web-focused-git-workflow/)

如文章中所述，我已经能够在服务器上设置 2 个存储库。我也有 post update 和 post commit hooks。我正在尝试通过将更新推送到服务器来测试系统。我正在使用 netbeans 7.3 beta git 支持。但是，当给出命令时：

```
push ( in netbeans ) to ssh://****.com/home/******/site_hub.git 
```

输出是：

```
==[IDE]== Nov 19, 2012 10:28:15 PM Pushing
git push ssh://***.com/home/***/site_hub.git +refs/heads/master:refs/heads/master
Repository Updates
Branch : master
Old Id : 0121897bdd7cf3caad9e18717fc27a7a08***
New Id : 837c194c70fb41dc7de3be7841c946ca***
Result : REJECTED_NONFASTFORWARD

Local Repository Updates
No update
==[IDE]== Nov 19, 2012 10:28:18 PM Pushing finished. 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-11-20T04:11:46.873

非快进推送意味着您尝试推送的分支与当前分支所在的点不同。换句话说，你的遥控器中有新的提交，你必须合并它们才能推送。

为了实现这一点，您可以`git pull`合并两个分支，然后推送结果，或者您可以先执行一个`git fetch`然后执行一个`git rebase origin/master`（或您放在远程和 HEAD 分支的任何名称），以便将您的提交应用到远程之上分支。然后你可以推动结果，这将是一个快进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-22T00:46:43.257

就我而言，执行以下操作似乎可以解决问题

```
git checkout master

git pull 
```

就我而言，当我切换回大师时，我得到了这个

> 您的分支在 8 次提交之后位于“origin/master”之后，并且可以快进。（使用“git pull”来更新你的本地分支）

我认为这可能与 mgarciaisaia 回答的内容相同，但我想发布以防万一它可能对某人有所帮助。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-12-03T18:41:34.553

这是我对非快速问题的报告

本地存储库更新 ==[IDE]== 2017 年 12 月 3 日上午 11:53:22 推送 - Mycology Pro 已完成。==[IDE]== 2017 年 12 月 3 日上午 11:54:19 创建分支 git branch --track Master_v2.0 master 分支创建名称：Master_v2.0 来自：master Id：1dac54d97af9be9e2d4e78ed1550ed486d26a76f git show conflict git checkout Master_v2.0 ==[IDE]== 2017 年 12 月 3 日上午 11:54:19 创建分支完成。==[IDE]== 2017 年 12 月 3 日上午 11:54:58 获取 - Mycology Pro git remote -v 设置远程：origin git fetch [https://larry-mintz@github.com/larry-mintz/MycoForms .git](https://larry-mintz@github.com/larry-mintz/MycoForms.git) +refs/heads/master:refs/remotes/origin/master 无更新 ==[IDE]== 2017 年 12 月 3 日上午 11:54:59 获取 - Mycology Pro 已完成。==[IDE]== 2017 年 12 月 3 日上午 11:55:27 推送 - Mycology Pro git branch git remote -v 设置远程：origin git submodule status git push[https://larry-mintz@github.com/larry-mintz/MycoForms.git](https://larry-mintz@github.com/larry-mintz/MycoForms.git) refs/heads/master:refs/heads/master

远程存储库更新分支更新：master 旧 ID：d3c98e3ac615861a1747759639f878ba8f235f38 新 ID：1dac54d97af9be9e2d4e78ed1550ed486d26a76f 结果：REJECTED_NONFASTFORWARD

我尝试了一切。最后我做到了：

远程存储库更新分支添加：Master_v2.0 Id：1dac54d97af9be9e2d4e78ed1550ed486d26a76f 结果：OK

本地存储库更新分支添加：origin/Master_v2.0 Id：1dac54d97af9be9e2d4e78ed1550ed486d26a76f 结果：新

==[IDE]== 2017 年 12 月 3 日上午 11:57:17 设置跟踪分支 ==[IDE]== 2017 年 12 月 3 日上午 11:57:17 推送 - Mycology Pro 已完成。git branch --set-upstream-to origin/Master_v2.0 Master_v2.0 分支“Master_v2.0”标记为跟踪分支“origin/Master_v2.0”==[IDE]== 2017 年 12 月 3 日 11:57： 17 AM 设置跟踪分支完成。

# c - 计算上限和下限时出现奇怪的错误

> ID：13466206
> 
> 赞同：3
> 
> 时间：2012-11-20T03:34:05.597
> 
> 标签：c, math

我的程序是多线程的。每个线程负责一定的数据块。我正在做的是计算下限和上限，然后通过结构将它们传递给线程函数。lower_bound 和 upper_bound 都是无符号整数。

主线程具有以下下限和上限。

```
lower_bound: 3;
upper_bound: (NUM/num_threads) - 1; 
```

其他工作线程具有以下下限和上限。

```
lower_bound = (NUM * (i + 1))/(num_threads);
upper_bound = (NUM * (i + 2))/(num_threads) - 1; 
```

NUM 是我的程序中定义的常量。我注意到该程序可以正常工作到某个数量级。10^8 工作正常，但 10^9 不行。为了调试我的程序，我让工作线程打印出它们的输出。

10 个线程的输出高达 10^8。

```
lower_bound: 10000000    upper_bound: 19999999
lower_bound: 20000000    upper_bound: 29999999
lower_bound: 30000000    upper_bound: 39999999
lower_bound: 60000000    upper_bound: 69999999
lower_bound: 70000000    upper_bound: 79999999
lower_bound: 50000000    upper_bound: 59999999
lower_bound: 80000000    upper_bound: 89999999
lower_bound: 40000000    upper_bound: 49999999
lower_bound: 90000000    upper_bound: 99999999 
```

10 个线程的输出高达 10^9。

```
lower_bound: 100000000   upper_bound: 199999999
lower_bound: 200000000   upper_bound: 299999999
lower_bound: 300000000   upper_bound: 399999999
lower_bound: 70503270    upper_bound: 170503269
lower_bound: 170503270   upper_bound: 270503269
lower_bound: 270503270   upper_bound: 370503269
lower_bound: 370503270   upper_bound: 41006539
lower_bound: 41006540    upper_bound: 141006539
lower_bound: 400000000   upper_bound: 70503269 
```

世界上到底发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T03:42:07.687

整数溢出。你有一个无符号的 32 位整数，最大值略高于 40 亿。之后它会四处走动并再次从零开始。

改为使用 64 位整数（`uint64_t`或`unsigned long long`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T03:51:16.403

你得到一个 32 位整数溢出。4 * 10^9 略小于 2^32，但 5 * 10^9 更大。(5 * 10^9 - 2^32) = 705032704。除以 10 并丢弃余数，得到 70503270。减去 1 得到 70503269，您可以在结果中看到。

# watin - Watin：当没有任何东西可以识别它们时如何迭代表行

> ID：13466208
> 
> 赞同：0
> 
> 时间：2012-11-20T03:34:21.183
> 
> 标签：watin

我尝试了不同的解决方案来获取表节点，我可以将其识别为现有 dom 中文本节点的下一个兄弟节点。

我使用了以下代码，但 nextsibling 始终为空。

```
 var element = browser.Element(Find.ByText(t => t.Contains("Individual Notices")));

                        if (element != null)
                        {
                           var table = element.NextSibling as Table;
                        } 
```

如果有人能指导我如何遍历节点“个人通知”旁边的表中的行，将不胜感激

谢谢 ![在此处输入图像描述](../Images/11e141c2326d6f2674150f8b93bd321c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T19:05:59.013

您遇到了麻烦，因为`Contains`最终找不到您想要的元素。在变量声明/赋值之后放在`Console.WriteLine("START" + element.Text+ "END");`那里，我敢打赌你会看到除了“个人通知”之外的大量文本输出。

如果您只需要的 Dom 元素具有文本“个人通知”文本，只需删除 lambda 调用并拥有`Find.ByText("Individual Notices")`然后`table`将拥有您的表格。

如果这不是一个选项，因为文本不是已知值，您可能能够搜索特定的元素类型（例如：Div），以便在 lambda 包含结果时不会返回父节点。

**编辑**：

由于浏览器的怪异，有时通过文本搜索单个元素会出现问题。由于添加或删除了空格，有时向用户显示的文本值不一定等于 DOM 看到的文本值。基本上您可能认为您有“个人通知”，但 WatiN 可能会看到“个人通知”<-请参阅末尾的空格。在用尽简单/明显的方法后，我无法找到特定元素的运行方式是通过搜索我*认为*应该找到它的内容，然后闪烁找到的元素和/或写入WatiN 代码中的元素来迭代安慰。如果没有找到，请扩大搜索范围。根据需要重复。

# javascript - 如何在 jQuery Mobile 中等待弹出窗口关闭？

> ID：13466209
> 
> 赞同：5
> 
> 时间：2012-11-20T03:34:24.530
> 
> 标签：javascript, jquery, jquery-mobile, callback, popup

在 jQuery Mobile 1.2.0 中，我使用了新的弹出窗口小部件。

```
$('#my_popup').popup('close');
$('#my_popup').popup('open'); 
```

我显然想等到弹出窗口完全关闭，然后再打开它。close 方法不提供回调函数选项。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T04:14:06.690

您可以使用 popupafterclose 事件，下面是有关如何执行此操作的片段。

有关更多信息，您可以查看[jQuery-Mobile 文档](http://jquerymobile.com/test/docs/pages/popup/events.html)

```
$( "#my_popup" ).bind({
   popupafterclose: function(event, ui) { ... }
}); 
```

# windows - 如何使用 C WinAPI 按名称和位置终止进程？

> ID：13466211
> 
> 赞同：0
> 
> 时间：2012-11-20T03:34:38.610
> 
> 标签：windows, winapi

我搜索并找到了一种仅按名称​​终止进程的方法：

```
void KillProcessByName(TCHAR *szPName) 
{ 
    HANDLE hSnapShot = CreateToolhelp32Snapshot(TH32CS_SNAPALL, NULL); 
    PROCESSENTRY32 pEntry; 
    pEntry.dwSize = sizeof (pEntry); 
    BOOL hRes = Process32First(hSnapShot, &pEntry); 
    while(hRes) 
    { 
        if(!_tcsicmp(pEntry.szExeFile, szPName)) 
        { 
            HANDLE hProcess = OpenProcess(PROCESS_TERMINATE, 0, 
                                          (DWORD) pEntry.th32ProcessID); 
            if (hProcess != NULL) 
            { 
                TerminateProcess(hProcess, 9); 
                CloseHandle(hProcess); 
            } 
        } 
        hRes = Process32Next(hSnapShot, &pEntry); 
    } 
    CloseHandle(hSnapShot); 
} 
```

但是，我在 PROCESSENTRY32 结构中找不到名为 szLocation 或类似名称的成员。我需要区分两个名称相同但位置不同的进程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T18:17:51.577

您可以简单地`szExeFile`从[`PROCESSENTRY32`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684839.aspx).

或者，您可以使用[`GetModuleFileNameEx`](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms683198.aspx)返回与进程句柄关联的可执行文件的完整路径。

# javascript - 如何防止有序列表的编号 调整以适应隐藏/取消隐藏元素

> ID：13466215
> 
> 赞同：3
> 
> 时间：2012-11-20T03:36:06.873
> 
> 标签：javascript, html, html-lists

我有一个有序列表，默认情况下，某些列表项`<li>`通过 css 隐藏。然而，这些可以根据用户行为（通过 JavaScript）显示出来。

如果它们被显示，整个列表会重新排序，以便它们按顺序排列，而当它们被隐藏时，列表没有顺序中断。

我希望列表的每个元素（即使是开始隐藏的元素）在列表中都有固定的数字，即使这意味着在页面加载时列表会有间隙（1\. 2\. 4\. 5\. 等）

在这种情况下，如果所有元素都显示出来，则列表只会按数字显示一个完整的元素列表。

**这是一个 jsfiddle 说明我的问题** [http://jsfiddle.net/hesxT/1/](http://jsfiddle.net/hesxT/1/)

任何想法将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T04:00:18.843

[http://jsfiddle.net/hesxT/6/](http://jsfiddle.net/hesxT/6/)

采用...

```
visibility: hidden;
height: 0; 
```

隐藏项目。然后删除这些属性以使项目可见。

并且，正如其他人指出的那样，去掉`<div>`包装`<li>`，不需要它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T03:53:25.557

li 元素有一个属性“value”，可用于设置数字列表项的值。

```
<ol>
    <li value='1'>Item 1</li>
    <li value='3'>Item 3</li>
    <li value='4'>Item 4 </li>
    <li value='5'>Item 5</li>
</ol> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T03:43:44.630

我对你的代码做了一些修改。看一下这个，

[http://jsfiddle.net/hesxT/2/](http://jsfiddle.net/hesxT/2/)

**代码：**

```
$('li').each(function(i){
    $(this).html((i+1)+'. '+$(this).html());
});
$('#myform').change(function() {
    if ($('#reveal').attr('checked')){
        $('#hide').show();
    } else {
        $('#hide').hide();
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T03:51:24.207

我没有看到您在 Firefox 16 中描述的问题。但它显然发生在早期版本的 Firefox 和 IE 中（我只测试了 IE 7）。

所以这就是你需要的跨浏览器工作：

```
.hidden {
    position: absolute;
    height: 0;
    width: 0;
    overflow: hidden;
} 
```

在 IE 中，使用其他建议的答案将阻止隐藏元素的子元素在通过脚本删除隐藏类时正确显示。

此外，屏幕阅读器可能会或可能不会按您的预期显示隐藏内容，但这可能不是问题。

`li`注意：将元素包装在元素中是无效的`div`。对于那些有兴趣的人，请参阅[有关修复该问题](https://stackoverflow.com/questions/13480092/styling-html-li-elements-avoiding-an-invalid-parent-div/)的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-20T04:19:45.957

这是一种使用 CSS 和 toggleClass 的方法，它在列表中使用自动编号：

```
.hidden {
    height: 0px;
    overflow: hidden;
} 
```

[http://jsfiddle.net/AMvp8/](http://jsfiddle.net/AMvp8/)

# android - 将照片上传到 picasa 时获取相册 ID

> ID：13466216
> 
> 赞同：2
> 
> 时间：2012-11-20T03:36:14.833
> 
> 标签：android, picasa

我编写了一个 android 应用程序来将照片上传到特定相册。假设我已经创建了一个专辑名称“学校”。但是，picasa rest api (https://picasaweb.google.com/data/feed/api/user/userID/albumid/albumID) 需要专辑 ID。

在该相册中发布新照片之前，我是否需要查询所有相册并将相册 ID 与给定名称匹配？我不愿在手机中本地维护相册 ID，因为相册名称可能会从桌面网络浏览器更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-22T13:50:14.900

“相册 ID”不是我在 Picasa 网络相册网站上所知道的任何地方使用的术语。
他们想要网络相册的 URL 吗？

即使您更改专辑名称，专辑网址也保持不变。

所以您可以使用您的应用程序保存专辑网址（不会更改）。

或遍历所有专辑。这是使用 API 创建相册后 url 的样子

`https://picasaweb.google.com/data/entry/api/user/here_is_ur_user_id/albumid/here_is_ur_album_id`

让我知道我是否可以提供更多帮助？

谢谢

# jquery - 隐藏/显示标记类别 Google Maps API

> ID：13466217
> 
> 赞同：0
> 
> 时间：2012-11-20T03:36:23.347
> 
> 标签：jquery, google-maps-api-3, google-maps-markers

因此，经过这里用户的一些出色帮助后，我现在有了一个按钮来隐藏我网站上的所有地图标记。但是我需要能够根据它们的类别隐藏标记。

下面的代码将结果从 Google 传递到标记数组

```
 function createMarker(place) {
    var iconType = {};
    iconType['atm'] = "http://maps.google.com/mapfiles/ms/micons/dollar.png";
    iconType['bus_station'] = "http://maps.google.com/mapfiles/ms/micons/bus.png";
    //iconType['restaurant'] = "http://maps.google.com/mapfiles/ms/micons/restaurant.png";
    iconType['parking'] = "http://maps.google.com/mapfiles/ms/micons/parkinglot.png";
    var placeLoc = place.geometry.location;
    var marker = new google.maps.Marker({
      map : map,
      icon : iconType[place.types[0]],
      position : place.geometry.location,
      category : category
    });

    google.maps.event.addListener(marker, 'click', function() {
      infowindow.setContent(place.name);
      infowindow.open(map, this);
    });

    return marker;
  } 
```

我认为现在应该用谷歌的响应填充类别属性，我现在遇到的问题是当我调用我的函数来隐藏标记时选择这些结果（特定类别），我不知道如何访问数组数据类别，我在这里搜索了多个线程，但他们的代码与我的大不相同。我隐藏标记的代码在这里。

```
 function onRemoveBtn_Clicked() {
    var i;
    for (i = 0; i < markers.length; i++) {
      markers[i].setMap(null);
    }
  } 
```

非常感谢任何帮助。哦，用于获取结果的代码是。

```
service = new google.maps.places.PlacesService(map);
service.nearbySearch(request, callback);
  function callback(results, status) {
    if (status == google.maps.places.PlacesServiceStatus.OK) {
      for (var i = 0; i < results.length; i++) {
        var place = results[i];
        markers.push(createMarker(results[i]));
      }
    }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T03:48:30.747

您可以像这样获取标记的类别：

```
function onRemoveBtn_Clicked() {
    var i;
    for (i = 0; i < markers.length; i++) {
      if (markers[i].get("category") != selected_category) {
        markers[i].setMap(null);
      }
    }
  } 
```

# hadoop - 调试hadoop流程序

> ID：13466219
> 
> 赞同：0
> 
> 时间：2012-11-20T03:36:35.803
> 
> 标签：hadoop, hadoop-streaming

我有表格中的数据

```
 id,    movieid      , date,    time
 3710100, 13502, 2012-09-10, 12:39:38.000 
```

现在基本上我想做的是这个..

我想知道，某部电影在上午 7 点到 11 点之间以 30 分钟的间隔观看了多少次

所以基本上..

电影之间看过多少次

```
 6 and 6:30
  6:30 and 7
   7 and 7:30
   ...
   10:30-11 
```

所以我写了mapper和reducer来实现这个。

```
mapper.py

#!/usr/bin/env python

import sys

# input comes from STDIN (standard input)
for line in sys.stdin:
    # remove leading and trailing whitespace
    line = line.strip()
    # split the line into words
    line = line.split(",")
    #print line

    print '%s\t%s' % (line[1], line) 
```

减速器.py

```
#!/usr/bin/env python

import sys
import datetime
from collections import defaultdict

def convert_str_to_date(time_str):
    try:
        timestamp =   datetime.datetime.strptime(time_str, '%Y-%m-%d:%H:%M:%S.000')  #00:23:51.000

        return timestamp

    except Exception,inst:

        pass

def is_between(time, time1,time2):
    return True if time1 <= time < time2 else False

def increment_dict(data_dict, se10,date_time):
    start_time = datetime.datetime(date_time.year,date_time.month,date_time.day, 07,00,00)
    times = [start_time]
    for i in range(8):
        start_time += datetime.timedelta(minutes = 30 )
        times.append(start_time)
    for i in range(len(times) -1 ):
        if is_between(date_time, times[i], times[i+1]):
            data_dict[se10][i] += 1

keys = [0,1,2,3,4,5,6,7]

data_dict = defaultdict(dict)

# input comes from STDIN
def initialize_entry(se10):
    for key in keys:
        data_dict[se10][key] = 0

for line in sys.stdin:
    # remove leading and trailing whitespace
    line = line.strip()

    # parse the input we got from mapper.py

    se10, orig_data = line.split('\t')
    initialize_entry(se10)
    parse_line = orig_data.split(",")

    datestr = parse_line[2].replace(" ","").replace("'","")
    timestr = parse_line[3].replace(" ","").replace("'","")

    date_time = datestr + ":" + timestr

    time_stamp = convert_str_to_date(date_time)

    increment_dict(data_dict, se10,time_stamp)

for key, secondary_key in data_dict.items():
    for skey, freq in secondary_key.items():
        print key,"," ,skey,",",freq 
```

如果我这样做，上面的代码运行得很好

```
 cat input.txt | python mapper.py | sort | python reducer.py 
```

但是当我将它部署在集群上时。它没有说工作已被杀死..这个原因是未知的。

请帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T01:06:37.217

好的，我想通了这件事..

主要问题是我的工作本地机器是基于 Windows 的.. 而集群是基于 linux 的..

所以我不得不将用dos编写的文件转换为unix格式..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-03T13:21:16.220

通读 JobHistory 中的日志通常是个好主意，如[https://stackoverflow.com/a/24509826/1237813](https://stackoverflow.com/a/24509826/1237813)中所述。它应该为您提供更多详细信息，为什么作业失败。

关于行尾，Hadoop Streaming 默认使用的分割行的类是[TextInputFormat](https://hadoop.apache.org/docs/current/api/org/apache/hadoop/mapred/TextInputFormat.html)。它[曾经](https://issues.apache.org/jira/browse/HADOOP-473)与 Windows 换行符中断，但自 2006 年以来它应该可以正常工作。

这使您的映射器和减速器脚本成为问题的可能来源。Python 3 使用了一种叫做[通用换行符](https://docs.python.org/release/3.2/library/functions.html#open)的东西，它应该对 Unix 和 Windows 换行符都开箱即用。在 Python 2.7 中，您需要显式打开它。

在 Linux 和 Mac OS X 上，您可以像这样启用通用换行符重新打开标准输入`sys.stdin = open('/dev/stdin', 'U')`。我手头没有可以尝试的 Windows 计算机，但以下内容应该适用于所有三个系统：

```
import os
import sys

# reopen sys.stdin
os.fdopen(sys.stdin.fileno(), 'U')

for line in sys.stdin:
    … 
```

# c#-4.0 - 如何将字符串转换为日期时间格式，如 MM/dd/yyyy

> ID：13466220
> 
> 赞同：0
> 
> 时间：2012-11-20T03:36:35.047
> 
> 标签：c#-4.0, datetime

我得到像 01/05/2012(MM/dd/yyyy) 这样的字符串值，现在我必须转换成日期时间

```
string s="01/05/2012";
datetime dt=convert.todatetime(s); 
```

现在 dt 值是 2012 年 1 月 5 日，但我必须得到 dt 值 01/05/2012，如何获得值，请给我任何想法。

谢谢赫曼思

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T04:02:02.803

您正在`DateTime`正确地创建对象，您只是在查看 DateTime 的内部表示。它的输出方式取决于您为其提供[`ToString`](http://msdn.microsoft.com/en-us/library/zdtaw1bw.aspx)方法的格式字符串。IE：

```
class Program
{
    static void Main(string[] args)
    {
        string s = "01/05/2012";
        DateTime dt = Convert.ToDateTime(s);
        Console.WriteLine(dt.ToString("MM/dd/yyyy"));
        Console.ReadLine();
    }
} 
```

* * *

[如果您在DateTime Structure](http://msdn.microsoft.com/en-us/library/03ybds8y.aspx)上查看此 MSDN 页面

从上面的链接突出显示我的

> DateTime 值及其字符串表示形式
> 
> 在内部，所有 DateTime 值都表示为自 0001 年 1 月 1 日午夜 12:00:00 以来经过的滴答数（100 纳秒间隔的数量）。实际的 DateTime 值与该值的方式无关当显示在用户界面元素中或写入文件时出现。**DateTime 值的出现是格式化操作的结果。**格式化是将值转换为其字符串表示形式的过程。
> 
> 由于日期和时间值的外观取决于文化、国际标准、应用程序要求和个人偏好等因素，**DateTime 结构通过其 ToString 方法的重载在格式化日期和时间值方面提供了极大的灵活性。**默认的 DateTime.ToString() 方法使用当前区域性的短日期和长时间模式返回日期和时间值的字符串表示形式。

# node.js - NodeJS - 单例 + 事件

> ID：13466227
> 
> 赞同：6
> 
> 时间：2012-11-20T03:37:51.197
> 
> 标签：node.js, events, singleton

我将如何在实现单例设计模式的模块上继承 events.EventEmitter 方法？

```
var EventEmitter = require('events').EventEmitter;

var Singleton = {};
util.inherits(Singleton, EventEmitter);

Singleton.createClient = function(options) {
    this.url = options.url || null;

    if(this.url === null) {
        this.emit('error', 'Invalid url');
    } else {
        this.emit('created', true);
    }
}

module.exports = Singleton; 
```

这会导致错误：`TypeError: Object #<Object> has no method 'emit'`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-20T04:12:33.653

我在您的问题中看不到单例模式。你的意思是这样的？

```
var util = require("util")
  , EventEmitter = process.EventEmitter
  , instance;

function Singleton() {
  EventEmitter.call(this);
}

util.inherits(Singleton, EventEmitter);

module.exports = {
  // call it getInstance, createClient, whatever you're doing
  getInstance: function() {
    return instance || (instance = new Singleton());
  }
}; 
```

它会像这样使用：

```
var Singleton = require('./singleton')
  , a = Singleton.getInstance()
  , b = Singleton.getInstance();

console.log(a === b) // yep, that's true

a.on('foo', function(x) { console.log('foo', x); });

Singleton.getInstance().emit('foo', 'bar'); // prints "foo bar" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-07T05:31:59.307

我设法使用以下单例事件发射器类实现了这一点。arguments.callee._singletonInstance 是在 javascript 中执行单例的首选方式：[http ://code.google.com/p/jslibs/wiki/JavascriptTips#Singleton_pattern](http://code.google.com/p/jslibs/wiki/JavascriptTips#Singleton_pattern)

```
var events = require('events'),
    EventEmitter = events.EventEmitter;

var emitter = function() {
    if ( arguments.callee._singletonInstance )
        return arguments.callee._singletonInstance;
    arguments.callee._singletonInstance = this;  
    EventEmitter.call(this);
};

emitter.prototype.__proto__ = EventEmitter.prototype;

module.exports = new emitter(); 
```

然后，您可以使用以下命令访问任何模块中的事件发射器

模块 A：

```
var emitter = require('<path_to_your_emitter>');

emitter.emit('myCustomEvent', arg1, arg2, ....) 
```

模块 B：

```
var emitter = require('<path_to_your_emitter>');

emitter.on('myCustomEvent', function(arg1, arg2, ...) {
   . . . this will execute when the event is fired in module A
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-14T13:30:52.917

为了方便起见，我创建了一个 npm 包：[central-event](https://github.com/aymen-mouelhi/central-event)

您要做的是在第一个模块中：

```
// Say Something
var emitter = require('central-event');
emitter.emit('talk', 'hello world');
```

模块 B

```
// Say Something
var emitter = require('central-event');
emitter.on('talk', function(value){
  console.log(value);
  // This will pring hello world
 });
```

# java - 如何将 EDT 的结果传递回不同的线程？

> ID：13466229
> 
> 赞同：8
> 
> 时间：2012-11-20T03:38:16.857
> 
> 标签：java, swing, event-dispatch-thread

我有以下用例：

我在线程 A（不是 EDT）中执行代码。然后我想问用户一个问题，但这必须在 EDT 上完成，因为它涉及 Swing 代码（打开对话框等）。最后，我想将用户的答案传递回线程 A，以便它可以继续。

我正在努力寻找一种将用户的答案传回线程 A 的好方法。你是如何做到的？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-20T03:49:03.997

```
FutureTask<Integer> dialogTask = new FutureTask<Integer>(new Callable<Integer>() {
  @Override public Integer call() {
    return JOptionPane.showConfirmDialog(...);
  }
});
SwingUtilities.invokeLater(dialogTask);
int result = dialogTask.get(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T06:26:29.617

我编写了以下便捷方法来添加到 jtahlborn 的答案中。它添加了一个检查以避免阻塞 EDT，并提供了一个很好的流线型异常处理：

```
/**
 * executes the given callable on the EDT, blocking and returning the result of the callable.call() method.
 * 
 * If call() throws an exception, it is rethrown on the the current thread if the exception is either a RuntimeException, or the
 * class that is assignable to exceptionClass. Otherwise, it is wrapped in a RuntimeException and thrown on the current thread.
 * 
 * @param exceptionClass The class of any exception that may be thrown by the callable.call() method, which will now be thrown
 *            directly by this method (ie, not wrapped in an ExecutionException)
 */
public static <T, E extends Exception> T invokeAndWaitAndReturn(Callable<T> callable, Class<E> exceptionClass)
        throws InterruptedException, E {
    if (SwingUtilities.isEventDispatchThread()) {
        try {
            return callable.call();
        }
        catch (Exception e) {
            throw throwException(exceptionClass, e);
        }
    }
    else {
        FutureTask<T> task = new FutureTask<T>(callable);
        SwingUtilities.invokeLater(task);

        try {
            return task.get();
        }
        catch (ExecutionException ee) {
            throw throwException(exceptionClass, ee.getCause());
        }
    }
}

@SuppressWarnings("unchecked")
private static <E extends Exception> E throwException(Class<E> exceptionClass, Throwable t) {
    if (exceptionClass.isAssignableFrom(t.getClass())) {
        return (E) t;
    }
    else if (t instanceof RuntimeException) {
        throw (RuntimeException) t;
    }
    else {
        throw new RuntimeException(t);
    }
} 
```

您可以这样称呼它，不必担心您当前是否在 EDT 上执行：

```
try {
    Integer result = invokeAndWaitAndReturn(new Callable<Integer>() {
        public Integer call() throws MyException {
            // do EDT stuff here to produce the result
        }
    }, MyException.class);
} catch(InterruptedException ie) {
    Thread.currentThread().interrupt();
} catch(MyException me) {
    // handle the "expected" Exception here
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-20T03:46:57.490

在线程 A 中，您可以使用 SwingUtilities.invokeAndWait(Runnable) 在 EDT 上执行用户提示。这将阻塞线程 A，直到您的可运行文件完成（即，直到用户提交结果并且您将其存储在某处）。一旦线程 A 重新获得控制权，就可以编写您的可运行文件以将结果存储在线程 A 可以访问它的某个位置。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-20T03:47:46.223

基本上，您需要使用`EventQueue#invokeAndWait`(AKA `SwingUtilities#invokeAndWait`)。这将阻塞当前线程，直到 run 方法返回。

真正的诀窍是尝试对其进行设置，以便您可以获得返回值；）

```
public class TestOptionPane03 {

    public static void main(String[] args) {
        new Thread(new Runnable() {
            @Override
            public void run() {
                String choice = ask("Chocolate", "Strewberry", "Vanilla");
                System.out.println("You choose " + choice);
            }
        }).start();
    }

    public static String ask(final String... values) {

        String result = null;

        if (EventQueue.isDispatchThread()) {

            JPanel panel = new JPanel();
            panel.add(new JLabel("Please make a selection:"));
            DefaultComboBoxModel model = new DefaultComboBoxModel();
            for (String value : values) {
                model.addElement(value);
            }
            JComboBox comboBox = new JComboBox(model);
            panel.add(comboBox);

            int iResult = JOptionPane.showConfirmDialog(null, panel, "Flavor", JOptionPane.OK_CANCEL_OPTION, JOptionPane.QUESTION_MESSAGE);
            switch (iResult) {
                case JOptionPane.OK_OPTION:
                    result = (String) comboBox.getSelectedItem();
                    break;
            }

        } else {

            Response response = new Response(values);
            try {
                SwingUtilities.invokeAndWait(response);
                result = response.getResponse();
            } catch (InterruptedException | InvocationTargetException ex) {
                ex.printStackTrace();
            }

        }

        return result;

    }

    public static class Response implements Runnable {

        private String[] values;
        private String response;

        public Response(String... values) {
            this.values = values;
        }

        @Override
        public void run() {
            response = ask(values);
        }

        public String getResponse() {
            return response;
        }
    }
} 
```

在这个例子中，我基本上创建了自己的查询对象，`Runnable`并可以存储来自用户的响应

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-01-28T10:01:50.520

这个 util 方法在一个单独的 swing 线程中执行供应商中的操作，并等待响应。如果存在以下情况，它也会引发异常：

```
public class InvokeAndGet {

public static <T> T execute(Supplier<T> supplier, long timeout) throws InterruptedException, SyncException {
    AtomicReference<T> atomicRef = new AtomicReference<>();
    AtomicReference<Exception> atomicException = new AtomicReference<>();
    CountDownLatch latch = new CountDownLatch(1);
    SwingUtilities.invokeLater(() -> {
        try {
            atomicRef.set(supplier.get());
        }catch(Exception e){
            atomicException.set(e);
        }finally {
            latch.countDown();
        }
    });
    latch.await(timeout, TimeUnit.MILLISECONDS);
    if(atomicException.get() != null) {
        throw new SyncException(atomicException.get());
    }else {
        return atomicRef.get();
    }
}

@SuppressWarnings("serial")
public static class SyncException extends Exception {
    public SyncException(Throwable arg0) {
        super(arg0);
    }
}

} 
```

这里有两个测试，所以你可以看到如何使用它：

```
@Test
public void execute() throws InterruptedException, SyncException {
    Integer result = InvokeAndGet.execute(() -> 1+1, 5000);
    assertEquals(2, result.intValue());
}

@Test(expected = SyncException.class)
public void executeException() throws InterruptedException, SyncException {
    InvokeAndGet.execute(() -> 1/0, 5000);
} 
```

它仍有改进的空间以使其更通用，因为此实现在 SwingUtilities 中中继，有时您希望使用 ThreadExecutor。

# r - 向charts.PerformanceSummary() 添加第二个时间序列

> ID：13466230
> 
> 赞同：0
> 
> 时间：2012-11-20T03:38:19.797
> 
> 标签：r, xts, performanceanalytics

我正在使用`charts.PerformanceSummary()`Performance Analytics 的功能展示我的回测策略。我想在顶部图表上添加第二张图表，以查看我的回测策略与基准相比如何。因此，例如，我当前的代码是：

```
library(PerformanceAnalytics)
library(quantmod)

myEnv <- new.env()
getSymbols(c("AAPL","GOOG"), src = "yahoo", from = "2004-04-01", to = "2012-09-30", env = myEnv)
index <- do.call(merge, c(eapply(myEnv, Ad), all=TRUE))

index.ret <- (index / lag(index,1) - 1)[-1,]

charts.PerformanceSummary(index.ret[,1]) 
```

我想将`index.ret[,2]`系列添加到“累积收益”图表，但保留“每日收益”和“回撤”图表`index.ret[,1]`。`points()`根据基本绘图功能，我正在考虑类似的东西。

# c# - 以编程方式向 DropDownList 添加选项

> ID：13466235
> 
> 赞同：0
> 
> 时间：2012-11-20T03:38:53.443
> 
> 标签：c#, asp.net, drop-down-menu, visual-web-developer

我在 ASP.NET 中的网站上工作并遇到了问题。当在另一个下拉列表中选择新选项时，我希望网站将选项添加到一个下拉列表中。为此，我使用第二个下拉列表的 SelectedIndexChanged 事件。当我通过将此行添加到此事件中来测试代码时：

```
DropDownSubject.Items.Add("TEST"); 
```

第一个下拉列表没有任何反应。是因为这个下拉列表在编辑器中自动写了“未绑定”字样吗？我该如何解决这个问题？

这是第一个下拉列表的标记，我想在其中添加项目：

```
<asp:DropDownList ID="DropDownClasses" runat="server" 
                > 
```

第二个，我正在使用该事件：

```
<asp:DropDownList ID="DropDownSubject" runat="server" 
                onselectedindexchanged="DropDownSubject_SelectedIndexChanged">
                <asp:ListItem>Mathematics</asp:ListItem>
                <asp:ListItem>Foreign Language</asp:ListItem>
                <asp:ListItem>Science</asp:ListItem>
                <asp:ListItem>Social Studies</asp:ListItem>
                <asp:ListItem>English</asp:ListItem>
            </asp:DropDownList> 
```

非常感谢所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T03:57:33.083

**详细信息：**听起来您没有为第一个下拉列表设置 AutoPostBack。下面的例子

```
 <asp:DropDownList ID="DropDownList1" runat="server" OnSelectedIndexChanged="DropDownList1_SelectedIndexChanged" 
    AutoPostBack="true">
        <asp:ListItem>Cat</asp:ListItem>
        <asp:ListItem>Dog</asp:ListItem>
  </asp:DropDownList>

<asp:DropDownList ID="DropDownList2" runat="server"></asp:DropDownList> 
```

**代码背后**

```
protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
{
    DropDownList2.Items.Add(DropDownList1.SelectedItem.Text);
} 
```

# google-app-engine - GWT APP如何获得免费域名？

> ID：13466238
> 
> 赞同：0
> 
> 时间：2012-11-20T03:39:17.707
> 
> 标签：google-app-engine, gwt

我正在尝试使用[http://my.dot.tk/registration](http://my.dot.tk/registration)为 GWT 添加免费域，Appengine 托管网站。免费域注册站点要求 A 记录，特别是 IP 地址，但我不认为 GWT 或 appgengine正在提供任何 IP 地址。我的出路是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T03:41:34.460

您可以[使用 Google Apps 注册域](https://www.google.com/a/cpanel/standard/new3)，然后按照他们提供的步骤操作。一旦注册，你可以去`Domain Settings > Domain Names > Redirect your naked domain`，他们会提供你的IP来输入你的A记录。

然后，您可以通过 App Engine 信息中心将您的 App Engine 应用程序与您的域相关联。

# java - 卷曲发送空白标头（测试 Java Web 服务器）

> ID：13466239
> 
> 赞同：0
> 
> 时间：2012-11-20T03:39:21.207
> 
> 标签：java, curl

我正在通过从 cURL 发送请求来测试我的 Web 服务器。当我发送此命令时：

```
curl -H "_ADD_CLASS*21112*ab*https://somewebsite" 127.0.0.1:12345 
```

到我的服务器，我在我的 Java Socket 中得到这个

```
GET / HTTP/1.1
User-Agent: curl/7.24.0 (x86_64-apple-darwin12.0) libcurl/7.24.0 OpenSSL/0.9.8r zlib/1.2.5
Host: 127.0.0.1:12345
Accept: */*
_ADD_CLASS*21112*ab*https://somewebsite 
```

这是我所期待的。

但是，当我使用 cURL 将此请求发送到我的服务器时，由于某种原因它不会发送标头：

```
curl -H "REMOVE_CLASS*21111*a" 127.0.0.1:12345

GET / HTTP/1.1
User-Agent: curl/7.24.0 (x86_64-apple-darwin12.0) libcurl/7.24.0 OpenSSL/0.9.8r zlib/1.2.5
Host: 127.0.0.1:12345
Accept: */*
"" (as shown in java) 
```

知道为什么第二个请求显示为“”吗？这是一些代码：

```
private static void handleRequest(Socket socket) throws IOException {
    BufferedReader br = new BufferedReader(new InputStreamReader(socket.getInputStream()));
    String socketData = null;
    String[] commands;
    while (br.ready()) {
        socketData = br.readLine();
        //parse command
        if (socketData.compareTo("") == 0) {
            //Log error
            break;
        }else {
            if (socketData.charAt(0) != '_') continue;
            commands = socketData.split("\\*");
            if (commands[0].compareTo("_ADD_CLASS") == 0) {
                //syntax is ADD_CLASS*CRN*TOKEN*WEB_ADDRESS
                socket.close();
                addClass(commands[1], commands[2], commands[3]);
                break;
            }else if(commands[0].compareTo("_REMOVE_CLASS") == 0) {
                //syntax is REMOVE_CLASS*CRN*TOKEN
                socket.close();
                removeClass(commands[1], commands[2]);
                break;
            }else if(commands[0].compareTo("_UPDATE_TOKEN") == 0) {
                //syntax is UPDATE_TOKEN*OLD_TOKEN*NEW_TOKEN
                socket.close();
                updateDeviceToken(commands[1], commands[2]);
                break;
            }else {
                //log error
            }
    }
    }
    socket.close();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T03:54:47.800

根据[HTTP Spec](http://www.w3.org/Protocols/rfc2616/rfc2616-sec4.html#sec4.2)，标头中必须有一个冒号，并且您没有指定一个冒号。我还会将您指向[cURL 手册页](http://curl.haxx.se/docs/manpage.html#-H)：

> -H, --header ... 如果您发送无值的自定义标头，则其标头必须以分号结尾，例如 -H "X-Custom-Header;" 发送“X-Custom-Header:”。

[话虽如此，您为什么要尝试使用 HTTP 标头而不是采用REST](http://en.wikipedia.org/wiki/Representational_state_transfer)样式来发明自己的方法？使用 JAX-RS 实现并让它为您处理细节问题不是更容易吗？或者至少你可以使用 Servlets / Filters。

# java - 按列名或标题查找列# - JTable

> ID：13466240
> 
> 赞同：6
> 
> 时间：2012-11-20T03:39:34.480
> 
> 标签：java, swing, jtable, tablecolumn

我想为我的 jtables 以不同的形式实现一个通用的验证类来检查 qty 列，因为不同形式的不同表中的 qty 列 No 是不同的。为此，我想在 C# 或 VB 中类似地按列名称获取列值。

我的要求如下。

```
 int qty=jtable.getValueAt(rowNo,"columnName"); 
```

现在我正在使用

```
 int qty=jtable.getValueAt(rowNo,colNo); 
```

有什么方法可以按列名或 JTable 的标题查找列#？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-12-04T19:14:22.587

你应该尝试使用这个：

```
int qty = jtable.getValueAt( rowNo, jtable.getColumn("columnName").getModelIndex() ); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-20T03:51:04.753

您可能应该问的是`TableModel`，而不是`JTable`，它的列可能会重新排列。一种方法是让您`TableModel`实现一个合适的接口，例如，

```
public interface Quantifiable {
    public int getQuantity(int row);
} 
```

附录：*请告诉如何实现这个接口*。

很大程度上取决于现有`TableModel`类之间的关系。假设*所有列中**都有*一个数字量。如果`quantityCol`模型索引是具有 type 的列，则`Number`可以执行以下操作：

```
public class QuantifiableTableModel
        extends AbstractTableModel implements Quantifiable {

    private int quantityCol;

    public QuantifiableTableModel(int quantityCol) {
        this.quantityCol = quantityCol;
    }

    @Override
    public int getQuantity(int row) {
        Number n = (Number) getValueAt(row, quantityCol);
        return n.intValue();
    }
    ...
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-09-23T12:39:05.570

嗨，这是对您的问题的简单回答：

```
int qty=jtable.getValueAt(rowNo,jtable.convertColumnIndexToView(jtable.getColumn("columnName").getModelIndex())); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-20T08:21:01.250

我在代码中使用三元运算符完成了我的任务

```
 int colNo = ((tbl.getModel().getColumnName(tcl.getColumn()).equalsIgnoreCase("Qty"))
||  (tbl.getModel().getColumnName(tcl.getColumn()).equalsIgnoreCase("Weight"))
|| (tbl.getModel().getColumnName(tcl.getColumn()).equalsIgnoreCase("Wt"))
 ? tcl.getColumn() : -1); 
```

[我使用Bob Camick 的表格单元格编辑器的](http://tips4java.wordpress.com/2009/06/07/table-cell-listener/)通用表格单元格侦听器的完整代码） ！

```
final JTable table = (JTable) jComp.get(a);
tbl.getTableHeader().setReorderingAllowed(false); 

 Action actionProd = new AbstractAction() {

    public void actionPerformed(ActionEvent e) {

        Utility util = new Utility("GoldNew");

        TableCellListener tcl = (TableCellListener) e.getSource();
        System.out.println("Row   : " + tcl.getRow());
        System.out.println("Column: " + tcl.getColumn());
        System.out.println("Old   : " + tcl.getOldValue());
        System.out.println("New   : " + tcl.getNewValue());
        int colNo = ((table.getModel().getColumnName(tcl.getColumn()).equalsIgnoreCase("Qty"))
                || (table.getModel().getColumnName(tcl.getColumn()).equalsIgnoreCase("Weight"))
                || (table.getModel().getColumnName(tcl.getColumn()).equalsIgnoreCase("Wt"))
                ? tcl.getColumn() : -1);

        if (tcl.getColumn() == colNo) {
            int wt = 0;
            Object qtyO = tcl.getNewValue();
            try {
                qtyO = tcl.getNewValue();
                if (qtyO != null) {
                    wt = Integer.parseInt(qtyO.toString());
                }

                if (wt < 0) {
                    table.getModel().setValueAt(tcl.getOldValue(), tcl.getRow(), colNo);
                }

            } catch (Exception ex) {
                util.ShowMessage("Please enter the Numbers only", "Error!");
                table.getModel().setValueAt(tcl.getOldValue(), tcl.getRow(), colNo);
                ex.printStackTrace();
            }

        }

    }
};
TableCellListener tclProd = new TableCellListener(table, actionProd); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-11-12T18:48:46.623

我面临着同样的问题。这是我的实现：

```
int nameColNo = getColumnIndex(table, "Name");
String name = (String)table.getValueAt(rowNo, nameColNo);

private int getColumnIndex (JTable table, String header) {
    for (int i=0; i < table.getColumnCount(); i++) {
        if (table.getColumnName(i).equals(header)) return i;
    }
    return -1;
} 
```

当然，如果是您创建了预期永远不会返回的表头`-1`，否则您可能会相应地对待它。

# java - android获取自定义联系人类型标签名称

> ID：13466247
> 
> 赞同：2
> 
> 时间：2012-11-20T03:40:37.533
> 
> 标签：java, android, contacts

我无法找出如何查询自定义电话号码类型。就像您进入联系人编辑联系人并将其中一个电话号码更改为自定义标签一样。有没有办法将名称输入到自定义类型标签中？
我努力了

> “android.content.res.Resources.getSystem().getStringArray(android.R.array.phoneTypes)”

但它似乎只是让应用程序崩溃，我认为它适用于旧版本的 android。
而且我也试过

> cursor.getString（curser.getColumnIndex（ContactsContract.CommonDataKinds.Phone .LABEL）”。

如果有人有一个想法，将不胜感激，或者如果存在一个副本，我可能会指出我找不到一个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T10:44:05.157

现在我一直在做同样的事情，在确保你的查询是正确的（我正在查询 ContactsContract.CommonDataKinds.Phone.CONTENT_URI）（确保你的投影是正确的等）之后，你可以做类似下面的事情，我猜您面临的困难是选择预设标签与自定义标签。预设标签在 TYPE 列中表示为整数，而如果 TYPE == TYPE_CUSTOM，则 LABEL 字段将包含您要查找的数据。

从 TYPE 中的数字移动到字符串是使用提供的方法。我不确定本地化，但我认为已经处理了。

```
Cursor curse = mContext.getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, new String[]{ContactsContract.CommonDataKinds.Phone.TYPE, ContactsContract.CommonDataKinds.Phone.LABEL}, 
                        ContactsContract.CommonDataKinds.Phone.NUMBER + " = ?", new String[]{numnum}, null);
                int colIndex = curse.getColumnIndex(ContactsContract.CommonDataKinds.Phone.TYPE);
                int lblIndex = curse.getColumnIndex(ContactsContract.CommonDataKinds.Phone.LABEL);
                ArrayList<String> numbers = new ArrayList<String>();
                String cur = "";
                while(curse.moveToNext())
                {
                    int labelType = curse.getInt(colIndex);
                    if(labelType == ContactsContract.CommonDataKinds.Phone.TYPE_CUSTOM)
                    {
                        cur = curse.getString(lblIndex);
                    }
                    else
                    {
                        CharSequence seq = ContactsContract.CommonDataKinds.Phone.getTypeLabel(mContext.getResources(), labelType, "Mobile");
                        cur = seq.toString();
                    }
                    numbers.add(cur);
                }
                curse.close(); 
```

在此代码段的末尾，您将得到一个字符串数组列表，其中填充了用于此电话号码的标签。请注意，电话号码需要非常精确地匹配，因此 444-4444 不会与 4444444 匹配，反之亦然。

就个人而言，我还没有时间尝试将“Mobile”或“”放在 getTypeLabel 的最后一个变量上之间的区别，尽管它似乎还没有产生任何影响。

希望这个答案还不算太晚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-08T16:54:53.647

这是我的代码。

首先，获取类型和标签。

并使用 getTypeLabel 函数获取标签。

```
fun getPhoneNumbers(contactId: String): ArrayList<ContactNumber> {
        val result = ArrayList<ContactNumber>()

/*///////////////////////////get type and custom label*/

        val phoneFetchCursor = contentResolver.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
                arrayOf(ContactsContract.CommonDataKinds.Phone.NUMBER, ContactsContract.CommonDataKinds.Phone.TYPE,ContactsContract.CommonDataKinds.Phone.LABEL),
                ContactsContract.CommonDataKinds.Phone.RAW_CONTACT_ID + "=" + contactId, null, null)

        while (phoneFetchCursor.moveToNext()) {
            val num = phoneFetchCursor.getString(phoneFetchCursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER))
            val typ = phoneFetchCursor.getInt(phoneFetchCursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.TYPE))
            val label = phoneFetchCursor.getString(phoneFetchCursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.LABEL))

 /*///////////////////////////getTypeLabel's third parameter is custom label. 
when it is null then it returns localized default label.*////////////////////////
            val typName = ContactsContract.CommonDataKinds.Phone.getTypeLabel(context.resources, typ!!, label).toString()

            var contactNumber = ContactNumber(contactId, num, typ,typName)
            result.add(contactNumber)
        }
        phoneFetchCursor.close()

        return result
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-01T16:55:43.660

这样，`typeName`您将获得标准或自定义标签。（`crPhones`是迭代与单个联系人关联的数字的光标）：

```
String label = crPhones.getString(crPhones.
        getColumnIndex(ContactsContract.CommonDataKinds.Phone.LABEL));
int type = crPhones.getInt(crPhones.
        getColumnIndex(ContactsContract.CommonDataKinds.Phone.TYPE));
String typeName = ContactsContract.CommonDataKinds.Phone.
        getTypeLabel(context.getResources(), type, label).toString(); 
```

# iphone - 在 iOS 中维护登录凭据的最佳方法是什么？

> ID：13466249
> 
> 赞同：11
> 
> 时间：2012-11-20T03:41:08.737
> 
> 标签：iphone, objective-c, ios, credentials

我需要在整个应用程序中维护我的登录凭据，因此，我有 3 个选项来维护我的登录凭据...

```
1 key chain
2 NSUserDefaults
3 plist 
```

哪一个是最好的选择？还有其他方法可以存储登录凭据吗？

提前致谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-20T04:00:23.013

由于它提供的安全功能，我建议使用钥匙串来存储登录凭据。iOS 上的钥匙串服务提供了一种安全存储密码、密钥、证书等内容的方法。

密码和密钥等敏感数据应存储在钥匙串中。Apple 的[钥匙串服务编程指南](http://developer.apple.com/library/ios/#documentation/Security/Conceptual/keychainServConcepts/02concepts/concepts.html#//apple_ref/doc/uid/TP30000897-CH204-TP9)指出

> “钥匙串是一个加密的容器，其中包含多个应用程序和安全服务的密码。钥匙串是安全存储容器，这意味着当钥匙串被锁定时，没有人可以访问其受保护的内容”。

这里有两个很好的教程给你。

1.  [如何不在 iOS 中存储密码](http://software-security.sans.org/blog/2011/01/05/using-keychain-to-store-passwords-ios-iphone-ipad)
2.  [使用钥匙串存储用户名和密码](http://iosdevelopertips.com/core-services/using-keychain-to-store-username-and-password.html)
3.  [如何保护用户数据](https://www.raywenderlich.com/92667/securing-ios-data-keychain-touch-id-1password)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-18T05:52:28.787

此[链接](https://github.com/carlbrown/PDKeychainBindingsController)旨在使使用 Mac OSX 和 iOS 钥匙串像 NSUserDefaults 一样简单。

它是一个围绕 Mac OSX 和 iOS 钥匙串的 KVO 兼容 Cocoa 包装器，这个包装器的模型是 NSUserDefaults，因此目的是对于您通常想要调用的常见情况：

```
[NSUserDefaultsController sharedUserDefaultsController] 
```

你应该可以打电话

```
[PDKeychainBindingsController sharedKeychainBindingsController] 
```

对于您通常会调用的常见情况：

```
[NSUserDefaults standardUserDefaults] 
```

你应该可以打电话

```
[PDKeychainBindings sharedKeychainBindings] 
```

实现之间存在一些差异。首先，这个类只对字符串有效，因为这是 Keychain 接受的，所以类中省略了接受非字符串对象（如数组和字典等）的方法。其次，现在只实现了“立即模式”，所以你不能设置一堆值然后调用“保存”只做一次写入，并且没有“恢复到保存的值”功能）。

# ios - 无法显示星期几

> ID：13466252
> 
> 赞同：2
> 
> 时间：2012-11-20T03:41:24.663
> 
> 标签：ios, xcode, date, nsdate

> **可能重复：**
> [如何在 Objective-C 中获取星期几？](https://stackoverflow.com/questions/4269093/how-do-i-get-the-day-of-the-week-in-objective-c)

我有一个连接到 nsstring 的 uilabel。但是，我正在尝试将 nsstring 设置为星期几（星期一、星期二等）。但每次我运行它时，它什么也没给我。我有一种感觉，这是因为我没有从我的 nsdate 中获得价值。但是，我是 xcode 的新手，所以我真的不知道我做错了什么。

```
-(void)viewDidLoad {
     NSDate *today = [[NSDate alloc] init];
        NSCalendar *gregorian = [[NSCalendar alloc]
                                 initWithCalendarIdentifier:NSGregorianCalendar];

        // Get the weekday component of the current date
        NSDateComponents *weekdayComponents = [gregorian components:NSWeekdayCalendarUnit
                                                           fromDate:today];

       NSString *dateString = weekdayComponents;
        _label.text = dateString;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T03:49:11.137

试试这个代码：

```
-(void)viewDidLoad {
    NSDateFormatter *formatter = [[NSDateFormatter alloc] init] ;
    [formatter setDateFormat:@"EEEE"];
    _label.text = [formatter stringFromDate:[NSDate date]];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T03:56:17.130

一个主要问题是您试图将`NSDateComponents`对象分配给`NSString`变量。

@JShapiro 给出的答案很好。但是如果你想使用`NSDateComponents`你可以这样做：

```
NSDateComponents *weekdayComponents = [gregorian components:NSWeekdayCalendarUnit fromDate:[NSDate date]];
NSInteger weekday = [weekdayComponents weekday];
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
NSArray *weekdayNames = [formatter weekdaySymbols];

_label.text = weekdayNames[weekday]; 
```

# php - 使用 PHP 对 SQL 结果进行双重排序

> ID：13466253
> 
> 赞同：0
> 
> 时间：2012-11-20T03:41:26.033
> 
> 标签：php, mysql, sql, sorting

我正在使用 LEFT JOIN 获得排名靠前的帖子（排名在一个表中，在另一个表中发布信息）以获得过去两周发布的排名前 4 位的帖子。我能够获得这些信息的方式只是按最高排名排序。但是，我希望我的前 4 个结果不按排名顺序 (voting.vote)，而是按发布日期 (entries.id) 顺序显示。我不确定这样做的最佳方法是什么。下面是我的 SQL 语句，目前用于显示时间范围内排名前 4 的项目。

```
$result = mysql_query("SELECT entries.permalink, entries.title, voting.vote FROM entries LEFT JOIN voting ON voting.id = entries.id WHERE date>='$twoweeks' ORDER BY voting.vote DESC LIMIT 4"); 
```

有没有一种方法可以让 4 行结果按 entry.id 排序，还是我需要在 php 外部使用数组等进行此操作？

下面的编辑是从评论中提取的信息的解决方案。

```
SELECT *
FROM
(
SELECT 
  entries.permalink, 
  entries.title, 
  voting.vote,
  entries.id
FROM entries 
LEFT JOIN voting ON voting.id = entries.id 
WHERE date>='$twoweeks' 
ORDER BY voting.vote DESC 
LIMIT 4
) t
ORDER BY id; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T03:44:05.697

> 但是，我希望我的前 4 个结果不按排名顺序 (voting.vote)，而是按发布日期 (entries.id) 顺序显示。

尝试这个：

```
SELECT *
FROM
(
    SELECT 
      entries.permalink, 
      entries.title, 
      voting.vote 
    FROM entries 
    LEFT JOIN voting ON voting.id = entries.id 
    WHERE date>='$twoweeks' 
    ORDER BY voting.vote DESC 
    LIMIT 4
) t
ORDER BY entries.id; 
-- Or ORDER BY entries.published date; 
```

# c++ - 将函数结果作为“输出参数”返回是什么意思？

> ID：13466254
> 
> 赞同：0
> 
> 时间：2012-11-20T03:41:33.133
> 
> 标签：c++, function, vocabulary

嗨，我希望我能更好地理解有关 C++ 的一些事情。我们正在学习函数，我错过了一节课，我认为这是错过的错误课程，因为我很困惑。关于清晰简洁的方向和对术语的理解，我有两个问题。这是我的第一个：

a) 编写一个名为“product”的 C++ 函数，计算传递给它的两个整数值的乘积。该函数将接受两个输入参数并将计算得到的答案作为函数的输出参数返回。b) 编写一行代码来调用（调用）这个函数。

这是第二个： a) 编写一个名为“product”的 C++ 函数，计算传递给它的两个整数值的乘积。该函数将接受两个输入参数并返回产品答案作为函数执行的结果。b) 编写一行代码来调用（调用）这个函数。

所以我的猜测是第二个应该是这样的：

```
 int product(int a, int b)
 { return a*b; } 
```

和部分 b 作为 cout << "你的两个数字的乘积是 " << product(a,b);

首先，我是对的，无论哪种方式，将答案作为输出参数都意味着什么。当我在并且你觉得可怜我时，你能告诉我应该使用 void 而不是 int 吗？最后有人可以更好地解释通过引用返回究竟是什么。我得到了关于它的整个方面需要在参数的末尾有一个 & 并且“技术上”它允许我改变它而不是仅仅返回它，但我希望有更深入的东西？很抱歉这么需要，但任何帮助将不胜感激。谢谢琳达

PS我会标记为作业，但它已被弃用。对不起！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T03:52:39.540

输出参数是从函数发回数据的另一种方式。本质上，您不会返回该值，而是向函数发送一个框，答案将在其中。将答案放入框中修改它，并且可以在函数运行后从中获取答案。

“标准”返回值（就像您所做的那样）：

```
int product(int a, int b)
{ return a*b; } 
```

调用标准函数：

```
int answer = product(10, 5);
cout << answer << endl; 
```

一个“输出参数”：不是`answer`作为实际值（如 5 或 3）传递，而是发送一个框到答案应该去的地方；更改此框的内容也会更改`main`函数中变量的值（用`int & answer`来表示`int answer`）。

```
void product_output_parameter(int a, int b, int & answer)
{ answer = a*b; } 
```

调用函数：

```
int answer;
// send answer in as a place to put the answer
product_output_parameter(10, 5, answer);
// the value stored in answer has changed
cout << answer << endl; 
```

如果函数是这样定义的：

```
void product_output_parameter(int a, int b, int answer)
{ answer = a*b; } 
```

的更改`answer`只会发生在函数内部，因此它不起作用。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T03:53:58.933

您编写的函数计算产品并调用产品函数。你也可以像这样调用它。

int productOfAandB = 产品(a,b);

引用允许将调用者范围内的变量更改为被调用者。典型的例子是让 Bob 去更衣室换 PE，在这个过程中 Bob 只是去更衣室换衣服，然后告诉 Bob 这样做的过程继续使用改变后的 Bob。如果将 Bob 复制到更衣室，然后从更衣室返回，替换原来的 Bob，它的行为更像是一个返回值函数。

1.  按值传递，按值返回 BOB = changForPE(BOB);// 这有效地将 BOB 替换为全新的 BOB
2.  Pass by Reference changeForPE(&BOB);// 这个函数有能力对存储在 BOB 的变量做一些事情 // 但它似乎没有覆盖 BOB 变量

# google-chrome - 在 chrome 中查看元素时如何隐藏标尺？

> ID：13466256
> 
> 赞同：11
> 
> 时间：2012-11-20T03:41:40.030
> 
> 标签：google-chrome

新的 chrome 在查看元素时有标尺，我想隐藏它。有什么设置可以帮助吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-21T10:20:43.680

Chrome 团队在 11 月 8 日的代码中引入了一个选项[http://trac.webkit.org/changeset/133885](http://trac.webkit.org/changeset/133885)
它还没有出现

**更新：** 终于来了，开发者工具->设置->常规选项卡->元素下的“显示标尺”复选框。

我的 Chrome 版本是 24.0.1312.52 m

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-11-09T11:23:24.463

如果您使用的是最新版本的 Chrome，请通过以下方式找到它。

开发人员工具 > 设置（在更多选项菜单下）> 首选项 > 元素 > 显示规则（最后一个选项）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-20T05:40:28.723

右键单击屏幕上的任意位置，“检查元素”，左下角 (Windows) 或右下角 (Mac) 的齿轮，“常规”选项卡，在底部的“显示标尺”处向下滚动。根据喜好检查它的开/关。

# redmine - Redmine v2 是否有任何可用的待办事项插件？

> ID：13466257
> 
> 赞同：3
> 
> 时间：2012-11-20T03:41:41.870
> 
> 标签：redmine, todo

Redmine 1.x 有几个很棒的 todo 插件。但是，它们都不再适用于 v2x 系列。我环顾四周，找不到任何与 Redmine v2 相关的更新或新的 todo 插件。

我想知道是否有人知道或拥有与 Redmine v2x 一起使用的修改后的 todo 插件？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:48:52.173

检查：[https](https://github.com/ande3577/redmine-stuff-to-do-plugin) ://github.com/ande3577/redmine-stuff-to-do-plugin （或 Github 上的其他分支）

# java - Java 类只能包含实现接口的对象？

> ID：13466261
> 
> 赞同：0
> 
> 时间：2012-11-20T03:42:16.750
> 
> 标签：java, generics

我需要的是定义一个可以键入的类来保存特定类型的对象。持有的对象还需要有对包含类的引用。

我不确定我是否找错了树，或者我是否接近解决方案，而不是关于类型安全的 Eclipse 警告。

界面看起来像（这似乎定义正确）：

```
public interface ItemInterface {
    public ItemOwner<? extends ItemInterface> getOwner();
    public void setOwner(ItemOwner<? extends ItemInterface> owner);
} 
```

所有者类看起来像（这也看起来很简单）：

```
public class ItemOwner <T extends ItemInterface> {

    private NavigableSet<T> items = new TreeSet<T>();

    public Set<T> getItems() {
        return Collections.unmodifiableSet(items);
    }   

    public void addItem(T item) {
        // if we are passed a null, throw an ILA error
        if (item == null)
            throw new IllegalArgumentException("Argument was null.");

        // check whether already is a member
        if (items.contains(item))
            throw new IllegalArgumentException("Already a member.");

        items.add(item);
        item.setOwner(this);
    }

    public void removeNode(T item) {
        // if we are passed a null, throw an ILA error
        if (item == null)
            throw new IllegalArgumentException("Argument was null.");

        // check whether node already is a member
        if (!items.contains(item))
            throw new IllegalArgumentException("Not a member.");

        items.remove(item);
    }
} 
```

可以拥有的物品如下：

```
public class Item implements ItemInterface {

    private ItemOwner<? extends ItemInterface> owner;

    public ItemOwner<? extends ItemInterface> getOwner() {
        return owner;
    }

    public void setOwner(ItemOwner<? extends ItemInterface> owner) {
        // if we are passed a null, throw an ILA error
        if (owner== null)
            throw new IllegalArgumentException("Argument was null.");

        this.owner = owner;
    }
} 
```

我在 Eclipse 中遇到的错误是 getOwner() 上的警告：“ItemOwner 类型的表达式需要未经检查的转换才能符合 ItemOwner”。

# windows-services - 远程启动服务

> ID：13466262
> 
> 赞同：0
> 
> 时间：2012-11-20T03:42:43.397
> 
> 标签：windows-services, cruisecontrol.net, nant, remote-server

我正在尝试在远程机器上使用 CCNEt 和 nant 启动一些服务。我的 nant 语句是这样的：构建成功，根据 nant 结果，所有服务都已启动。但是，当我查看远程机器的服务管理器时，有些服务还没有启动。关于为什么远程机器上的某些服务没有启动的任何建议？

# java - 如果 x 在 (x++) 之后递增，y 会打印出 = 还是会打印出 +1？

> ID：13466267
> 
> 赞同：-5
> 
> 时间：2012-11-20T03:42:55.893
> 
> 标签：java

```
x = 2; 
y = x++; 
System.out.println(y) 
```

如果 x 之后增加，y 会打印出 2 还是会打印出 3，为什么？如果这是前缀，它会只打印出 3 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T03:48:20.543

它将打印 2 并且它发生的原因是

```
y=x++; 
```

第1步：

```
assign x value to y 
```

第2步：（增加x值）

```
x= x+1; 
```

这就是它发生的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T03:44:53.777

它首先将值分配给`y`& 然后`x`增加`1`.
这是一个`post increment`。
这首先将值赋给 & 的左侧变量，`=`然后将右侧变量`x`增加 1。
这里`y=2`，但是`x=3`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T03:52:25.557

由于加号位于变量之后，因此称为后增量。如果在变量之前，它将被称为预增量。使用预增量 y 将被分配 x+1。与后增量一样，y 将被分配 x，然后 x 将增加 1，之后为 3，但 y 将为 2。

x = 2; y = x++;

y 为 2，x 为 3。

x = 2; y = ++x;

x,y 都是 3。

# php - PHP 中的 FOR 循环性能

> ID：13466268
> 
> 赞同：13
> 
> 时间：2012-11-20T03:42:56.093
> 
> 标签：php, performance, loops, for-loop

由于我的研究使我相信`for`循环是 PHP 中最快的迭代构造......为了更清楚，您认为以下哪个会更快？

### 示例一

```
for ($i = 0; $i < count($myLargeArray); $i++ ) {
    echo myLargeArray[$i];
} 
```

### 示例二

```
$count = count($myLargeArray);
for ($i = 0; $i < $count; $i++ ) {
    echo myLargeArray[$i];
} 
```

我的逻辑是，在示例中的每次迭代中，在每次迭代中访问 myLargeArray 的长度比访问示例二中的简单整数值的计算成本更高。那是对的吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-20T04:52:39.330

第一种方法较慢，因为`count()`必须在循环的每次迭代中调用该函数。该`count()`方法本身非常快，但是调用该函数仍然存在一些开销。通过将它移到循环之外，您正在执行所谓的“[循环不变代码运动](https://en.wikipedia.org/wiki/Loop-invariant_code_motion)”，或者有时是“提升”。

有一系列像这样[的优化](http://en.wikipedia.org/wiki/Compiler_optimization)很有趣。

说了这么多，很少强调这一点。在您的示例中，回显输出的 I/O 可能是您通过“优化”节省的 10 倍。如果你在循环中做任何其他事情，你的优化意味着越来越少。

我讨厌成为一个湿毯子，但是对于您 90% 以上的代码，性能不是问题。尤其是当您谈论 Web 应用程序时，它们一开始就超过 90% 的 I/O。

尽管如此，当您认为应该归咎于您的代码时，您应该：

1.  确定需要优化的用例
2.  衡量你的代码性能
3.  找到瓶颈
4.  确定您可以改进的领域，并决定是否值得您花时间改进它们。
5.  进行代码更改
6.  返回第 2 步

您几乎总是会发现您需要改进缓存策略和数据库优化（这只是通过另一种方式进行的 I/O 优化），而不是玩弄代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T03:48:05.117

示例 2\. 不要每次迭代都计算元素。

更新：我刚刚被告知该值是预先计算的： `nNumOfElements specifies how many values are currently stored in the array. This is also the number that`count($array)`returns.`

在我看来，这个函数`count()`除了浪费一些微秒和时钟周期（对于那些了解汇编程序的人来说）之外，实际上什么也没做。

在这里阅读：*[了解 PHP 的内部数组实现（PHP 的 PHP 开发人员源代码 - 第 4 部分）](http://nikic.github.com/2012/03/28/Understanding-PHPs-internal-array-implementation.html)*。

也许您可以尝试`foreach range`：

```
foreach (range(0, (count(array)) as $number) {
    echo $number;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-20T04:46:55.343

在这种情况下，最快的构造实际上是 foreach 循环：

```
foreach($myLargeArray as $element) {
    echo $element;
} 
```

foreach() 也很好，因为它总是会终止，而当你使用 for() 时，拼写错误可能会给你留下一个无限循环。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T03:48:42.253

显然，示例一较慢。每次迭代都会评估条件`$i < count($myLargeArray)`，从而多次计算数组。

[在http://www.phpbench.com/](http://www.phpbench.com/)上检查这个和其他基准

编辑：他们查找了[源代码](https://stackoverflow.com/questions/5835241/phps-count-o1-or-on-for-arrays)，并且它是预先计算的。

但是，处理时间被浪费在那些多个函数调用上。这就是性能下降的原因。该数组被“计数”多次。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-20T05:12:51.927

最快的循环是展开循环。一些代码编辑器，但不是任何 PHP 编辑器，通过特殊的宏支持这一点，因此您无需复制和粘贴。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-20T05:56:56.397

所以我决定实际量化一些事情，以获得一些真实的数字。这是基线代码，一个循环构建一个包含 100000 个整数的大数组。

```
$x = array();
for ($idx=0; $idx<100000; $idx++)
    $x[] = $idx; 
```

平均执行时间：85 毫秒。这包括启动 PHP、解析程序、运行程序和退出的时间。现在，我添加另一个循环遍历数组：

```
for ($idx=0; $idx<count($x); $idx++) { 
    ;
} 
```

平均执行时间：105 毫秒。当您减去 85 毫秒的设置时间时，您可以看到迭代 100,000 个成员数组只需要 20 毫秒。

现在我们添加循环不变代码运动：

```
$m = count($x);
for($idx=0; $idx<$m; $idx++) { 
    ;
} 
```

平均执行时间：90 毫秒。

一方面，这种节省是**巨大的**。那是 5 毫秒的循环迭代时间，而不是 20 毫秒。所以你可以说这是节省了 75%！

另一方面，它是 15 毫秒。比大多数人在一个荒谬的大阵列上注意到的时间要少。

但这是一个**什么都不**做的数组。让我们看看当我们输出一些数据时会发生什么：

```
$m = count($x);
for ($idx=0; $idx<$m; $idx++) { 
    echo $idx;
} 
```

现在执行时间是 200 毫秒。哦，看，我只打印了循环索引。我什至没有输出数组的内容。

这很愚蠢。让我们再次更改程序以回显数组的内容，而不仅仅是查看计数器：

```
$m = count($x);
for ($idx=0; $idx<$m; $idx++)
    echo $x[$idx]; 
```

新的执行时间是 212 毫秒。因此，访问和回显数组内容比回显循环计数器要长 5%。

让我们接受某人先前的建议并展开循环。过去我在 C/C++ 中使用过这个效果很好：

```
$m = count($x);
for ($idx=0; $idx<$m; $idx+=5) {
    echo $x[$idx];
    echo $x[$idx+1];
    echo $x[$idx+2];
    echo $x[$idx+3];
    echo $x[$idx+4];
} 
```

现在我们在说话！我们降至 206 毫秒。哦，等等，对于一些不好玩的代码来说，这大约是 3% 的改进。输出看起来很糟糕。它只是一串没有空格或任何东西的数字。

让我们摆脱循环展开，让输出更好一点：

```
$m = count($x);
for ($idx=0; $idx<$m; $idx++)
    echo "{$x[$idx]}\n"; 
```

执行时间为 400 毫秒。嗯。这需要很多额外的时间（相对而言）只是为了获得一些格式。也许使用字符串替换会让我们付出一些代价。让我们尝试字符串连接：

```
$m = count($x);
for ($idx=0; $idx<$m; $idx++)
    echo $x[$idx] . "\n"; 
```

新时间为 390 毫秒。好一点。让我们尝试用空格而不是换行符分隔数字：

```
$m = count($x);
for ($idx=0; $idx<$m; $idx++)
    echo $x[$idx] . " "; 
```

哇哦，我们又回到了 224 毫秒。对了！但是发生了什么？好吧，我在我的 Unix 终端上运行所有这些，并且在单独的行上输出数字比在换行的一行上输出它们要慢得多。

换句话说，终端程序的**滚动**速度比我们所做的任何事情都具有更大的影响。

# arduino - Arduino红外串行通信纠错

> ID：13466269
> 
> 赞同：0
> 
> 时间：2012-11-20T03:43:00.660
> 
> 标签：arduino, serial-communication, infrared

最好的方法是什么，以便在通过红外线使用二进制发送消息时不会出错。目前，我通过将它们编码为二进制 ascii 值来发送消息，然后让两个带有红外灯和传感器的 Arduinos 检查起始位光，然后通过检查红外灯是否以 3 毫秒间隔打开或关闭来读取消息。

我需要做到这一点，以便无论发生什么（即来自遥控器或其他 Arduinos 的干扰），仍然会发送正确的消息。

我还想这样做，即使两个 Arduino 都尝试同时发送消息，他们也会互相收到消息。

我正在通过 Arduino IDE 的串行监视器发送和接收消息。

PS：我遇到一个问题，如果我一次发送很多信件，它们在一定数量的字符后开始变得混乱。即，如果我输入 1 - 30，数字之间有空格，我会得到结果：`1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 14 15 a s ....`在 17 之后，数字会变得混乱。

如果您对可能出现的问题有任何想法，我将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T04:52:05.627

使用 IR 不出错将很难。问题是如果它错过了一次眨眼，它就会全部转移，然后你就搞砸了。一次发送 2 个也很困难，因为 arduino 不进行并行处理。

我会推荐一个不同的协议。IR 不适用于大量信息。如果您不需要无线，串行超级简单，如果需要，请使用蓝牙，例如 2 个 blueSMIRF。您必须将其设置为主机，但这就像串行通信一样。

做一些谷歌搜索，但我认为 IR 不会解决整个消息。1 或 2 个数字，当然，但一个完整的句子或其他东西不会很好地工作。

尝试的一件事是发送消息 2 或 3 次，然后比较它们是否相同。如果是，则很可能是正确的，但如果不同，您可以要求重新发送。

如果可以的话，您可能还想放慢速度，并使用更长的脉冲和暂停，这将给它更多的时间来注册，这意味着它应该更准确。

祝你好运！

# php - PHP 中 if( $x=1 || $y=1) 和 if( $x=1 | $y=1) 有什么区别

> ID：13466271
> 
> 赞同：3
> 
> 时间：2012-11-20T03:43:23.983
> 
> 标签：php, html

> **可能重复：**
> [参考 - 这个符号在 PHP 中是什么意思？](https://stackoverflow.com/questions/3737139/reference-what-does-this-symbol-mean-in-php)

这两者在php中有什么区别？

```
 if( $x==1 || $y==1)   if( $x==1 && $y==1) 
```

与（分别）

```
 if( $x==1 | $y==1)    if( $x==1 & $y==1) 
```

据我所知，它们的工作方式相同| 与 || 在 php.ini 中。但是必须有区别！！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T03:51:25.317

`||`并且`&&`是布尔运算符，它们接受 2 个参数，将每个参数转换为布尔值，然后返回`true`or `false`。

`|`并且`&`是*位运算*符。他们将参数转换为*二进制*并比较每一位。他们返回一个二进制数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T03:45:25.227

一种是使用条件*or* and *and*，另一种是使用按位*or* and *and*。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T03:46:26.337

`||`这是条件`OR`
`|`这有点明智`or`

1.  `$a | $b` `Or`（包括或）设置`$a`或`$b`设置的位
2.  `$a & $b` `And` 在两者中设置`$a`并`$b`设置的位。

.

```
 if( $x==1 || $y=1)             if( $x==1 && $y==1)

  if body --> if one of them is true            both is true 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T03:46:24.493

首先：`if( $x=1 || $y=1)`将 $x 设置为 1，将 $y 设置为 1。

正确的语法是：

`if( $x==1 || $y==1)`

用文字可以更好地表达差异：

`if( $x==1 OR $y==1)` ``if( $x==1 AND $y==1)`

双与号和双管道被称为逻辑运算符。[在这里查看更多](http://php.net/manual/en/language.operators.logical.php)

单与号和单管道是按位语句。[在这里查看更多](http://php.net/manual/en/language.operators.bitwise.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-20T04:17:11.570

文档是你的朋友。`&&`并且`||`是逻辑运算符。[你可以在这里](http://php.net/manual/en/language.operators.logical.php)阅读更多关于它们的信息。

我强烈建议您阅读[运算符优先级](http://www.php.net/manual/en/language.operators.precedence.php)并了解为什么`&&`vs`and`和`||`vs`or`不同。了解什么时候一个比另一个更合适。本质`=`上具有高于`and`and的优先级`or`，但低于`&&`and的优先级`||`。[逻辑运算符](http://php.net/manual/en/language.operators.logical.php)部分的示例 #1很好地解释了这一点。

对于其他语言，您只有`&&`and `||`，而不是`and`and `or`。

`&`并且`|`是位运算符。[您可以在此处](http://php.net/manual/en/language.operators.bitwise.php)阅读有关它们的信息。

位运算符的典型用法是标志。一种常见用途是 PHP 的[error_reporting 设置](http://us3.php.net/manual/en/errorfunc.configuration.php#ini.error-reporting)。

# ruby-on-rails - 使用nested_for时如何显示不同的标签

> ID：13466278
> 
> 赞同：1
> 
> 时间：2012-11-20T03:44:06.563
> 
> 标签：ruby-on-rails, ruby-on-rails-3, nested-attributes

[https://github.com/railscasts/196-nested-model-form-part-1/blob/master/surveysays/app/views/surveys/_question_fields.html.erb](https://github.com/railscasts/196-nested-model-form-part-1/blob/master/surveysays/app/views/surveys/_question_fields.html.erb)

在上面的代码片段中，我们显示了相同的标签（例如问题），但如果我想创建 3 个不同的行，我需要显示类似 Question1、Question2、Question3 的内容。

呈现标签的逻辑将成为问题本身的一部分，作为问题数据模型的一部分。我们还想在渲染问题本身之前初始化几个字段，我应该怎么做？

```
class Question < ActiveRecord::Base {
  content
  foo_id
  bar_id
} 
```

在上述情况下，除了内容我想初始化 foo_id, bar_id 对于不同的问题会有所不同

```
e..g Question1 ("Who is the president of US?", 1, 2)
e..g Question2 ("Who is the president of Spain?", 2, 4)
e..g Question3 ("Who is the president of Germany?", 3, 6) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T06:34:52.153

您可以在视图中使用 Embedded Ruby 来显示您正在使用的 Form Builder 对象的属性。例如，在我的 HAML 视图中，通过调用`.object`on `contract`，我可以访问该对象的属性。

```
= form_for @contract do [contract]
  %fieldset
    %legend="Enter Details for Contract #{contract.object.id}"
      = contract.label :name 
```

# java - JScrollPane - 只有垂直滚动？

> ID：13466279
> 
> 赞同：3
> 
> 时间：2012-11-20T03:44:14.750
> 
> 标签：java, swing, jscrollpane, jsplitpane, jscrollbar

我有以下代码行：

```
JSplitPane VPane = new JSplitPane(JSplitPane.VERTICAL_SPLIT,(new class1()),new JScrollPane(new class2())); 
```

我希望 class2 只有垂直滚动吗？因为我的布局会落到其他地方。我正在使用 GridBagLayout，现在更改布局为时已晚。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-20T04:10:28.220

+1 垃圾神评论。

> 它似乎不起作用-我只是收到错误=[

为了说明这一点：

```
JScrollPane js=...; //Create a variable reference to the an instance of scrollpane

JSPlitPane jsp;

js.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);//set the horizontal scrollbar to never appear

jsp=new JSplitPane(..,js);//create the splitpane with the jscrollpane etc 
```

**更新**

我建议创建对变量/组件的引用，尤其是因为您可能希望稍后动态修改它们。

# r - 如何使用 read.xport 传输标签

> ID：13466290
> 
> 赞同：0
> 
> 时间：2012-11-20T03:45:08.027
> 
> 标签：r, sas

我正在将 SAS 数据集 test.xpt 导入**R**，但标签未传输。

```
library("SASxport")
here <- getwd()
setwd('E:/')
test <- lookup.xport("test.xpt") 
```

输出：

```
> test

$DATA

$DATA$headpad

[1] 25440

$DATA$type

...

$DATA$width

...
...
...

$DATA$label
... 
```

有标签。但是当我使用 read.xport 时，标签就消失了。

```
test.data <- read.xport("eos91fin.xpt")
label(test.data) 
```

都是空白的“”。我应该怎么办？

# css - CSS 导航四舍五入最后一个孩子

> ID：13466292
> 
> 赞同：1
> 
> 时间：2012-11-20T03:45:27.647
> 
> 标签：css, html-lists, nav, css-selectors

好的，这很奇怪。我的水平导航中的最后一个孩子有圆形边缘。使用 nav ul li:last-child a:hover，我能够让最后一个孩子的悬停状态也具有圆角边缘。但是，它是一个下拉菜单。当我向下移动到它的子菜单时，父子菜单失去了它的圆边，这个子菜单的子菜单现在有圆边（他们不应该这样做）。

看看我在说什么。

```
nav ul li:last-child, nav ul li:last-child a:hover {
    border-radius:0 10px 10px 0;
    -webkit-border-radius:0 10px 10px 0;
} 
```

试试 jsFiddle

将鼠标悬停在 VIP 旅行上

[http://jsfiddle.net/XBUzw/](http://jsfiddle.net/XBUzw/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T04:08:40.473

***[演示](http://jsfiddle.net/XBUzw/5/)***

嗨，现在替换为这个

```
 nav ul li:last-child, nav ul li:last-child a:hover{
// here style 
} 
```

**进入这个**

```
 nav ul li:last-child, nav ul li:last-child a{
//  here style 
} 
```

***[现场演示](http://jsfiddle.net/XBUzw/5/)***

## ----------------------

***[更新的演示](http://jsfiddle.net/XBUzw/6/)***我想你想要这个

## ------------

## ------------

**下拉样式*****[的Updated-of-Drop-](http://jsfiddle.net/XBUzw/10/)*** Down

 ****如果您的要求，只需添加此**

```
nav ul > li > ul > li {
    display: block;
    width: 100%;
}
nav ul > li > ul li a {
    -moz-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
    display: block;
    width: 100%;
}

nav ul > li > ul > li a:hover{
border-radius:0;
    -webkit-border-radius:0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T03:51:44.933

只需使用更具体的规则，例如使用子选择器而不是后代。

```
nav > ul > li:last-child, nav > ul > li:last-child > a:hover {
    border-radius:0 10px 10px 0;
    -webkit-border-radius:0 10px 10px 0;
} 
```

[http://jsfiddle.net/mowglisanu/XBUzw/3/](http://jsfiddle.net/mowglisanu/XBUzw/3/)**

# php - PHP 中的迭代（循环）性能

> ID：13466298
> 
> 赞同：0
> 
> 时间：2012-11-20T03:46:04.993
> 
> 标签：php, performance, loops

FOR 循环的性能与 PHP 中的 FOREACH / WHILE / DO WHILE itation 构造相比如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T03:48:05.130

这不是你应该知道的。优化你的算法，而不是基本的语言结构。

除非您在单个脚本运行中进行数亿次迭代 - 您使用哪一个并不重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T03:50:13.293

即使有任何差异，差异也会很小，根本无关紧要。

例如，如果您有一个对数据库的查询，那么与循环迭代结果相比，for 与 foreach 与 while 与 do 的永恒争论不会改变任何事情 - 至少如果您有合理数量的数据。

所以，使用：

*   随你喜欢
*   任何符合您的编程标准的东西
*   最适合您的代码/应用程序的任何东西

在考虑这种微优化之前，您可以/应该优化许多其他事情。

如果你真的想要一些数字（即使只是为了好玩），你可以做一些基准测试并在实践中查看结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T08:15:51.400

有些人试图替补：http: [//juliusbeckmann.de/blog/php-foreach-vs-while-vs-for-the-loop-battle.html](http://juliusbeckmann.de/blog/php-foreach-vs-while-vs-for-the-loop-battle.html)

> 0.344 秒 - foreach()
> 
> 0.506 秒 - while()
> 
> 0.530 秒 - for()

就他而言，Foreach 似乎赢了。

# iphone - xcode geolocation：在加载视图之前获取坐标

> ID：13466299
> 
> 赞同：1
> 
> 时间：2012-11-20T03:46:05.683
> 
> 标签：iphone, objective-c, ios, xcode, geolocation

我正在尝试获取手机的当前位置，然后将坐标发送到我的网络服务器以处理数据以将一些结果返回到我的应用程序中。

我现在面临的问题是视图首先加载，然后才获得坐标。

如何首先获取坐标，以便我可以将它们发送到我的网络服务器以处理和发回数据，以便我可以显示在我的视图中？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T03:58:00.117

如果您的视图控制器在呈现之前确实需要位置信息，它可以让呈现视图控制器在转换之前执行位置服务。如果没有呈现视图控制器（即需要位置的视图控制器当前是根视图控制器），您可以引入一个新的根视图控制器，它将在转换到主视图控制器之前执行位置服务。

这个呈现视图控制器应该（根据位置感知编程指南）应该创建`CLLocationManager`、启动位置服务，并且在接收到适当`didUpdateLocations`的 时`CLLocationManagerDelegate`，它可以停止位置服务并转换到主视图控制器。`default.png`也许这个中间视图控制器还应该显示一些漂亮的“请稍候”屏幕或图像副本，`UIActivityIndicatorView`同时执行定位服务。

但实际上，您不一定需要引入这个中间视图控制器。你可以用你的主视图控制器来做这一切。您可以使用异步事件驱动的编码模式。因此，您可以将 Web 服务的性能推迟到满足位置服务之后，而不是在呈现视图之前要求位置。例如，[这个简单的测试项目](https://github.com/robertmryan/ios-wunderground-demo)调用位置服务，并在完成后向天气服务提交 Web 请求，并解析 JSON 响应。不需要中间视图控制器。

但是请注意，Apple 不赞成（即很可能会拒绝）仅在定位服务成功时才有效的应用程序，因此您可能需要考虑如果您的应用程序根本无法使用定位服务应该做什么。您必须优雅地处理这种情况，也许使用最后一个已知位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T04:31:34.877

那么为什么你不能在之前的视图中找到当前位置，以便在推送到该地图位置时我们可以传递这些坐标并调用网络服务，以便我们可以显示数据，我认为然后我们会得到你想要的

# r - 计算 R 中的 Hardy Weinberg 平衡——向量问题

> ID：13466306
> 
> 赞同：3
> 
> 时间：2012-11-20T03:46:41.733
> 
> 标签：r, bioinformatics

我有一个 csv 文件，它在三列中有基因型计数。我正在使用 read.table() 导入 csv，并使用另一个变量专门从这些列中提取数据：

数据示例：

```
SNP, Allele, CC, CT, TT
1, .329, 12, 3, 4
2, .231, 3, 2, 6
3, .214, 5, 4, 5 
```

代码：

```
library(HardyWeinberg)
x = read.table("SNPs.csv", header=T, sep = ",")
y = c(x$CC, x$CT, x$TT)
HW.test = HWExact(y, verbose=TRUE) 
```

问题是 HW.test 正在向下读取列而不是跨行，因此使用上述数据，它将计算 12、3 和 5 的 HWE，而不是 12、3、4。

如何确保它被水平读取？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T04:11:30.630

看`?HWExact`，它似乎只设计为采用长度为 3 的向量（即，对一组 HW 基因型进行计算。

它看起来也像是`?HWExactMat`专为您想做的事情而设计的。在`HWExactMat`中，第一个参数是一个 3 列的矩阵（显示的示例看起来像您要执行的操作）。所以试试：

```
HWExactMat(as.matrix(x[,3:5]), verbose=T) 
```

# postgresql - 在 INSERT 语句中使用 'LIKE' 来描述来自 dblink'ed SELECT 语句的记录

> ID：13466307
> 
> 赞同：0
> 
> 时间：2012-11-20T03:46:44.200
> 
> 标签：postgresql

我正在尝试简化以下最终陈述：

```
DROP TABLE asdf;

CREATE TABLE asdf (LIKE calibrations);

INSERT INTO asdf (rid, pid, status, cal_date, project_name, username,
  sensor_type, serial_number, var_name, dsm_name, cal_type, channel,
  gainbplr, ads_file_name, set_times, set_points, averages, stddevs, cal,
  temperature, comment)
  SELECT * FROM dblink(
    'host=remoteserv user=auser password=hello dbname=cals',
    'SELECT * FROM calibrations WHERE username=\'JAM\'') AS
      t(rid character varying(20), pid character varying(20),
        status character(3), cal_date timestamp,
        project_name character varying(32), username character varying(32),
        sensor_type character varying(20), sn character varying(20),
        var_name character varying(20), dsm_name character varying(16),
        cal_type character varying(16), channel character(1),
        gainbplr character(2), ads_file_name character varying(40),
        set_times timestamp[], set_points double precision[],
        averages double precision[], stddevs double precision[],
        cal double precision[], temperature double precision,
        comment character varying(256)); 
```

我能够像这样简化最后一条语句：

```
INSERT INTO asdf 
  SELECT * FROM dblink(
    'host=remoteserv user=auser password=hello dbname=cals',
    'SELECT * FROM calibrations WHERE username=\'JAM\'') AS
      t(rid character varying(20), pid character varying(20),
        status character(3), cal_date timestamp,
        project_name character varying(32), username character varying(32),
        sensor_type character varying(20), sn character varying(20),
        var_name character varying(20), dsm_name character varying(16),
        cal_type character varying(16), channel character(1),
        gainbplr character(2), ads_file_name character varying(40),
        set_times timestamp[], set_points double precision[],
        averages double precision[], stddevs double precision[],
        cal double precision[], temperature double precision,
        comment character varying(256)); 
```

是否可以将最后一条语句写成这样？

```
INSERT INTO asdf 
  SELECT * FROM dblink(
    'host=remoteserv user=auser password=hello dbname=cals',
    'SELECT * FROM calibrations WHERE username=\'JAM\'') AS
      t(LIKE calibrations); 
```

- 约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T06:37:50.960

不，dblink() 函数返回`setof record`并且数据库需要知道列列表。这在 dblink 文档中提到：

> 该函数返回查询产生的行。由于 dblink 可用于任何查询，因此声明它返回记录，而不是指定任何特定的列集。这意味着您必须在调用查询中指定预期的列集——否则 PostgreSQL 将不知道会发生什么。

`FROM`语句子句的定义`SELECT`如下：

```
where from_item can be one of:

    [ ONLY ] table_name [ * ] [ [ AS ] alias [ ( column_alias [, ...] ) ] ]
    ( select ) [ AS ] alias [ ( column_alias [, ...] ) ]
    with_query_name [ [ AS ] alias [ ( column_alias [, ...] ) ] ]
    function_name ( [ argument [, ...] ] ) [ AS ] alias [ ( column_alias [, ...] | column_definition [, ...] ) ]
    function_name ( [ argument [, ...] ] ) AS ( column_definition [, ...] )
    from_item [ NATURAL ] join_type from_item [ ON join_condition | USING ( join_column [, ...] ) ] 
```

# android - 纵向单列ListView但横向两列？

> ID：13466310
> 
> 赞同：1
> 
> 时间：2012-11-20T03:47:11.430
> 
> 标签：android, listview

我正在制作一个显示电话联系人的列表。它可以工作，但在横向方向上看起来不太好，因为它只是伸展开来。

所以我决定*在 Landscape 中将其设为两列，*在*Portrait 中设为一列*。我似乎无法通过谷歌搜索找到任何参考。

有什么办法吗？如果我只需要将自定义 XML 放在`layout-land`文件夹中，那就太好了

谢谢

[更新]

在肖像中它将是这样的：

```
name 1
name 2
name 3
name 4 
```

在横向：

```
name 1    name 2
name 3    name 4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T03:52:08.227

查看[http://developer.android.com/training/basics/fragments/index.html](http://developer.android.com/training/basics/fragments/index.html)`Fragment` _

基本上你会有两个布局文件夹，就像你建议的那样。

*   res/layout/main.xml（用于portiat）
*   res/layout-land/main.xml（用于横向）

您将把您的界面构建成`Fragment`s，并将其中两个放在横向，一个放在纵向。例如

```
public class ContactListFragment extends Fragment {
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        // Inflate the layout for this fragment
        View view = inflater.inflate(R.layout.contact_list, container, false);
        // do your work
        return view;
    }
}

public class MainActivity extends FragmentActivity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        // configure your fragments here.
    }
} 
```

**资源\布局\main.xml**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <fragment android:name="com.example.android.fragments.ContactListFragment"
              android:id="@+id/contact_list_fragment"
              android:layout_width="match_parent"
              android:layout_height="match_parent" />

</LinearLayout> 
```

**res\layout-land\main.xml**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <fragment android:name="com.example.android.fragments.ContactListFragment"
              android:id="@+id/contact_list_fragment1"
              android:layout_weight="1"
              android:layout_width="0dp"
              android:layout_height="match_parent" />

    <fragment android:name="com.example.android.fragments.ContactListFragment"
              android:id="@+id/contact_list_fragment2"
              android:layout_weight="1"
              android:layout_width="0dp"
              android:layout_height="match_parent" />

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-03T20:58:48.867

您应该使用过 GridView。根据方向将 numColumns 字段更改为 1 或 2。

# couchdb - CouchDB 过滤器如何“在幕后”工作？

> ID：13466311
> 
> 赞同：2
> 
> 时间：2012-11-20T03:47:16.590
> 
> 标签：couchdb

[*CouchDB：权威指南*](http://guide.couchdb.org/)非常适合理解 CouchDB 的大多数功能和组件的内部工作原理。它详细介绍了视图的使用，并很好地解释了它们是如何在 CouchDB 中实现的。话虽如此，该指南不包含任何关于 _changes 过滤实际*工作原理*的可靠文档。

_changes[部分](http://guide.couchdb.org/draft/notifications.html)似乎应该包含该信息，但它神秘地不存在。

CouchDB 过滤器是如何“在后台”实现的？

# ruby - 防止在控制台上打印日志

> ID：13466313
> 
> 赞同：1
> 
> 时间：2012-11-20T03:47:22.527
> 
> 标签：ruby, selenium-webdriver

我正在使用 Ruby Selenium-webdriver 编写脚本。运行脚本后，我在控制台上收到以下日志 -

```
 LOG addons.manager: Application has been upgraded
 LOG addons.xpi: startup
 LOG addons.xpi: Skipping unavailable install location app-system-local
 LOG addons.xpi: Skipping unavailable install location app-system-share
 LOG addons.xpi: checkForChanges
 LOG addons.xpi-utils: Opening database
 LOG addons.xpi-utils: Creating database schema
 LOG addons.xpi: New add-on fxdriver@googlecode.com installed in app-profile
 LOG addons.xpi: New add-on {972ce4c6-7e08-4474-a285-3208198ce6fd} installed in app-global
 LOG addons.xpi: New add-on {BBDA0591-3099-440a-AA10-41764D9DB4DB} installed in winreg-app-global
 LOG addons.xpi: New add-on fiddlerhook@fiddler2.com installed in winreg-app-global
 LOG addons.xpi: Updating database with changes to installed add-ons
 LOG addons.xpi-utils: Updating add-on states
 LOG addons.xpi-utils: Writing add-ons list
 LOG addons.xpi: shutdown
 LOG addons.xpi-utils: shutdown
 LOG addons.xpi-utils: Database closed
 LOG addons.xpi: startup
 LOG addons.xpi: Skipping unavailable install location app-system-local
 LOG addons.xpi: Skipping unavailable install location app-system-share
 LOG addons.xpi: checkForChanges
 LOG addons.xpi: No changes found 
```

我不希望将这些日志打印在控制台上，我只想将我的程序返回到 STDOUT 的任何内容打印在控制台上。有什么办法可以阻止 Ruby 中的这些日志？在 Python 中，我们可以使用以下方法执行此操作 -

```
import traceback
Settings.ActionLogs=False
Settings.InfoLogs=False
Settings.DebugLogs=False 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T07:05:07.793

首先在控制台中运行此命令，然后运行您的代码：

```
ActiveRecord::Base.logger = nil 
```

这将在控制台中工作。

# sql - 如何在sql中按行显示数据？

> ID：13466321
> 
> 赞同：1
> 
> 时间：2012-11-20T03:48:04.517
> 
> 标签：sql, sql-server, sql-server-2008, pivot, unpivot

```
Select * from Table1 
```

输出

```
Alias(Auto generate no)   ShortName       LongName         IssuerID       TypeName
 1                         ABC           ABC Pvt Ltd.         23            Current
 2                         DEF           DEF Pvt Ltd.         34            Provisional
 3                         GHI           GHI Pvt Ltd.         50            Legacy 
```

我想按行查看

预期产出

```
Fields        Current           Provisional      Legacy

Alias          1                   2              3
ShortName      ABC                DEF            GHI
LongName       ABC Pvt Ltd.      DEF Pvt Ltd.   GHI Pvt Ltd.
IssuerID       23                 34              50 
```

如何对上述条件进行选择查询？

我努力了：

```
select *
from Table1
pivot
(
   avg(IssuerID) for TypeName in
   (
      [Fields],[Current],[Provisional],[Legacy]
   )
) as TypeName 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T10:16:15.160

这种类型的数据转换可以通过同时应用SQL Server 中的`UNPIVOT`和 then函数来完成。`PIVOT`

该`UNPIVOT`函数获取您的 columns `Alias`、`ShortName`和`LongName`并将`IssuerID`它们转换为行值。但是，为了使`UNPIVOT`这些值的数据类型起作用，这些值必须相同：

```
select typename, value, fields
from
(
  select cast(alias as varchar(20)) alias,
    shortname,
    longname,
    cast(issuerid as varchar(20)) issuerid,
    typename
  from Table1
) u
unpivot
(
  value
  for fields in (Alias, ShortName, LongName, IssuerId)
) unpiv 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/b7419/1)

编辑数据`UNPIVOT`后，您可以将该`PIVOT`函数应用于`Typename`列值：

```
select fields, [current], [provisional], [legacy]
from
(
  select typename, value, fields
  from
  (
    select cast(alias as varchar(20)) alias,
      shortname,
      longname,
      cast(issuerid as varchar(20)) issuerid,
      typename
    from Table1
  ) u
  unpivot
  (
    value
    for fields in (Alias, ShortName, LongName, IssuerId)
  ) unpiv
) src
pivot
(
  max(value)
  for typename in([current], [provisional], [legacy])
) piv 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/44abf/5)

查询的结果是：

```
|    FIELDS |      CURRENT |  PROVISIONAL |       LEGACY |
----------------------------------------------------------
|     alias |            1 |            2 |            3 |
|  issuerid |           23 |           34 |           50 |
|  longname | ABC Pvt Ltd. | DEF Pvt Ltd. | GHI Pvt Ltd. |
| shortname |          ABC |          DEF |          GHI | 
```

如果您无权访问`UNPIVOT`and`PIVOT`函数，那么您可以使用`UNION ALL`查询来复制 the `UNPIVOT`，然后使用带有 a 的聚合函数`CASE`来复制 a `PIVOT`：

```
select fields,
  max(case when typename = 'current' then value end) [current],
  max(case when typename = 'provisional' then value end) provisional,
  max(case when typename = 'legacy' then value end) legacy
from
(
  select typename, cast(alias as varchar(20)) value, 'alias' fields
  from Table1 
  union all
  select typename, shortname value, 'shortname' fields
  from Table1 
  union all
  select typename, longname value, 'longname' fields
  from Table1 
  union all
  select typename, cast(issuerid as varchar(20)) value, 'issuerid' fields
  from Table1 
) src
group by fields 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/b7419/5)

结果将与两个版本相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T06:21:35.277

您需要的并不简单，对于`PIVOT`.

这是此类传输[的类似问题和可能的解决方案。](https://stackoverflow.com/questions/13454132/pivot-query-to-return-multiple-repeating-groups/13454667#13454667)

首先，如果你检查你想要的输出，你甚至必须“混合”列的类型。因此，为此，您肯定也必须将整数或其他数字列转换或转换为 varchar 类型。（一列只有一种类型）

而对于`PIVOT`，您只能使用一个聚合。有时想想如何欺骗它简直太麻烦了，有时更简单但更长的解决方案可能会更好。

您可以尝试这样的代码：（这是一个[SQL Fiddle 演示](http://www.sqlfiddle.com/#!3/3e707/4)来展示它。）

```
WITH CTE_DATA
AS (
  SELECT  DISTINCT
  CAST([Current].Alias as varchar(64)) AS Alias_Current,
  [Current].ShortName AS ShortName_Current,
  [Current].LongName AS LongName_Current,
  CAST([Current].IssuerID as varchar(64)) AS IssuerID_Current,
  CAST(Provisional.Alias as varchar(64)) AS Alias_Provisional,
  Provisional.ShortName AS ShortName_Provisional,
  Provisional.LongName AS LongName_Provisional,
  CAST(Provisional.IssuerID as varchar(64)) AS IssuerID_Provisional,
  CAST(Legacy.Alias as varchar(64)) AS Alias_Legacy,
  Legacy.ShortName AS ShortName_Legacy,
  Legacy.LongName AS LongName_Legacy,
  CAST(Legacy.IssuerID as varchar(64)) AS IssuerID_Legacy
  FROM 
  (SELECT * FROM Data WHERE TypeName = 'Current') As [Current]
  CROSS JOIN (SELECT * FROM Data WHERE TypeName = 'Provisional') As Provisional
  CROSS JOIN (SELECT * FROM Data WHERE TypeName = 'Legacy') AS Legacy
  )
SELECT 'Alias' AS Fields, Alias_Current AS [Current], 
Alias_Provisional AS Provisional, Alias_Legacy AS Legacy
    FROM CTE_DATA
    UNION ALL
SELECT 'ShortName' AS Fields, ShortName_Current AS [Current], 
ShortName_Provisional AS Provisional, ShortName_Legacy AS Legacy
    FROM CTE_DATA
    UNION ALL
SELECT 'LongName' AS Fields, LongName_Current AS [Current], 
LongName_Provisional AS Provisional, LongName_Legacy AS Legacy
    FROM CTE_DATA
    UNION ALL
SELECT 'IssuerID' AS Fields, IssuerID_Current AS [Current], 
IssuerID_Provisional AS Provisional, IssuerID_Legacy AS Legacy
    FROM CTE_DATA 
```

# delphi - 如何将像 '20/11/2012 7:05:14 PM' 这样的字符串转换为 TDateTime？

> ID：13466322
> 
> 赞同：0
> 
> 时间：2012-11-20T03:48:15.463
> 
> 标签：delphi

`SysUtils.StrToDate('20/11/2012 7:05:14 PM')`抛出异常。我如何`TDateTime`从那个字符串中得到一个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T04:09:52.177

为避免此类问题，您必须使用[`StrToDateTime`](http://docwiki.embarcadero.com/Libraries/XE3/en/System.SysUtils.StrToDateTime)传递[`TFormatSettings`](http://docwiki.embarcadero.com/Libraries/XE3/en/System.SysUtils.TFormatSettings)值的方法以及要转换的字符串格式的设置。

```
var
  AFormatSettings: TFormatSettings;
  LDateTime : TDateTime;
begin
   AFormatSettings:=TFormatSettings.Create;
   AFormatSettings.ShortDateFormat:='dd/mm/yyyy';
   AFormatSettings.DateSeparator:='/';
   LDateTime:=  StrToDateTime('20/11/2012 7:05:14 PM', AFormatSettings); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T03:56:37.453

如果您尝试同时解析日期和时间，则可能应该改用该[`SysUtils.StrToDateTime`](http://docs.embarcadero.com/products/rad_studio/delphiAndcpp2009/HelpUpdate2/EN/html/delphivclwin32/SysUtils_StrToDateTime@string.html)方法。

否则，如果您从字符串中删除时间，它应该可以工作并只给您日期。

# wolfram-mathematica - Mathematica 8.0 中的 CUDA Mathlink 未安装

> ID：13466328
> 
> 赞同：0
> 
> 时间：2012-11-20T03:48:46.100
> 
> 标签：wolfram-mathematica, mathlink

我根据此处的网站为 CUDA 和 Mathlink 创建了一个简单的示例：

[http://hpc.nomad-labs.com/archives/3](http://hpc.nomad-labs.com/archives/3)

当我尝试使用“Install[...]”在 Mathematica 中安装该函数时，Mathematica 永远不会完成该函数的安装。我创建并测试了一个简单的 C 函数，我可以在没有函数的情况下将其安装在 Mathematica 中。

即使文件中没有 CUDA 函数，当我在 CUDA 库中链接时似乎也会发生错误。

澄清一下，我不想使用包 CUDALink。我想将 CUDA 函数加载为 Mathematica 中的 C 函数。我有一个使用 CUDALink 的程序的工作版本，但我无法使用 CUDALink 控制堆栈和堆大小。通过创建一个 C 程序并使用命令“Install[...]”，我可以控制堆栈大小和堆大小。

我在这里错过了什么吗？

我正在使用带有 CUDA 4.2 的 Ubuntu 12.04。

有人在 Mathematica 8.0 中有 CUDA 和 Mathlink 的工作示例吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T09:56:33.193

首先，您需要安装`CUDAResource`. `paclet`从[这里](http://www.wolfram.com/CUDA/CUDAResources.html)下载正确的 LINUX 。随后，打开mathematica 并使用以下mathematica 命令安装数据包：

```
CUDAResourcesInstall["/path/to/CUDAResources-Lin64-8.0.4.1.paclet", Update->True] 
```

然后，运行以下命令在mathematica的命令行导入CUDA实用程序：

```
Needs["CUDALink`"] 
```

现在按照[本手册编译您的代码](http://reference.wolfram.com/mathematica/CUDALink/tutorial/Setup.html)或[查看可用的内置实用程序列表](http://reference.wolfram.com/mathematica/CUDALink/guide/CUDALink.html)。

# shader - 计算着色器，它们在管道中的什么位置？

> ID：13466331
> 
> 赞同：5
> 
> 时间：2012-11-20T03:49:09.100
> 
> 标签：shader, hlsl, directx-11

我整天都在做这件事，并开始放弃它。我找不到很多关于计算机着色器的信息。最佳来源是“使用 Direct3D 11 进行实用渲染和计算”，不幸的是它并没有太多帮助。它帮助我理解了一些理论，但我仍然不知道如何实现任何东西。

我正在研究类似于那本书中创建的粒子系统的东西。除了我的粒子系统基本上只有在 3d 网格中显示的粒子（不像重力/力/等等）。这是出于教育目的，如果我得到这个工作，我将能够计算出我假设的其余部分。

我不明白的是计算着色器如何适应管道。我想我明白我需要做什么，但我不知道我应该如何让它工作。

我需要以某种方式为计算着色器播种一个填充了所有粒子位置的缓冲区。（比如说，一个 1024x1024x1 的缓冲区）。然后我需要这个计算着色器将每个位置作为顶点输出到我的顶点着色器，之后管道的其余部分是标准的（顶点着色器进行所有转换，我的几何着色器将顶点扩展为四边形，我的像素着色器渲染它）。

我什至不知道这是否正确，但听起来是正确的。即使是这样，我也不知道我将如何去做。如何将计算着色器的输出提供给顶点着色器？我最初将如何为计算着色器播种？如何确保计算着色器不会丢弃粒子缓冲区？（否则，我必须每次都提供粒子，这将破坏（最终）使用粒子四处移动的粒子系统等的目的，因为我必须在 CPU 上完成所有这些工作）

有很多未知数，感觉就像我应该知道这一切，甚至开始编写这些着色器。我找不到任何垫脚石。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T10:47:40.760

计算着色器不是图形管道的一部分。它是一个简单的 GPGPU 工具，因此您可以以更简单的方式将图形设备的计算能力用于非渲染目的，如粒子运动。如果要将其用于粒子系统，则应首先使用计算着色器计算粒子位置。然后将普通代码中的输出填充到顶点缓冲区中进行渲染。AFAIK 没有直接的方法将输出传输到渲染管道，但我对计算着色器不太熟悉。对您来说有趣的链接可能是那里的[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ff476331%28v=vs.85%29.aspx)和[示例](http://msdn.microsoft.com/en-us/library/windows/desktop/ff476330%28v=vs.85%29.aspx)。图形管道显示在此[页面上](http://msdn.microsoft.com/en-us/library/windows/desktop/ff476882%28v=vs.85%29.aspx)。

# jquery - Ajax 使用瓦片调用 WebFlow

> ID：13466336
> 
> 赞同：2
> 
> 时间：2012-11-20T03:49:50.663
> 
> 标签：jquery, ajax, spring-webflow, tiles

我正在关注您的示例“对 WebFlow 的 Ajax 调用”，但我没有让它工作。您能否分享您的示例。我的问题是我想从页面进行 ajax 调用并渲染它的某些部分，但我从成功函数中得到的是整个页面内容。

这就是我所拥有的。

这是在我的**xxx-flow.xml**

```
 <on-entry>
        <evaluate
            expression="requirementService.getRequirementDetailsForEdit(flowRequestContext)"
            result="flowScope.editableRequirement" />
    </on-entry>
    <transition on="addEmptySkillRequirements">
        <evaluate expression="requirementService.addEmptySkillRequirementForEdit(flowRequestContext)" 
        result="flowScope.content123"/>
    </transition>

    <transition on="continue" to="listRequirements" />
</view-state> 
```

**这是我的 *.jsp 调用**

```
<form id="myForm" method="post" action="${flowExecutionUrl}&_eventId=addEmptySkillRequirements&ajaxSource=true&fragments=content">
     <input type="submit" value="Insert111" name="_eventId_addEmptySkillRequirements" id="submitMyForm" onclick="insertData12()"/>
</form> 
```

**在同一个jsp中，这是我的ajax调用**

```
function insertData12() {

    $.ajax({
                type : "POST",
                url : '${flowExecutionUrl}&_eventId=addEmptySkillRequirements&ajaxSource=true&fragments=content',
                data : $("#myForm").serialize(),
                dataType: "text",
                accepts: "text/html",

                success : function(content) {
                    alert("success" + content);
                     $('#content').html(content);

                },
                error : function(data) {
                    alert('fail' );

                }
            });
    return false;
}; 
```

**这是我的tiles.xml**

```
<definition name="editRequirement" extends="base.definition">
    <put-attribute name="title" value="Requirement List" />
    <put-attribute name="content" value="/pages/requirements/editReqDetails.jsp"  />
</definition> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T03:49:03.560

如果您仍然遇到问题，请使用 &ajaxSource=insert_data，其中 'insert_data' 是您的按钮的 ID。详情请看我更新的帖子：

[对 WebFlow 的 Ajax 调用](https://stackoverflow.com/questions/13052106/ajax-call-to-webflow?rq=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T14:45:01.600

如果您只想呈现片段“内容”，则必须放入
`<render fragments="content"/>`您的流程定义：

```
<transition on="addEmptySkillRequirements">
    <evaluate expression="requirementService.addEmptySkillRequirementForEdit(flowRequestContext)" 
    result="flowScope.content123"/>
    <render fragments="content"/>
</transition> 
```

# c# - 如何实现基于传递的类型返回对象的方法

> ID：13466337
> 
> 赞同：1
> 
> 时间：2012-11-20T03:49:50.103
> 
> 标签：c#, generics

我需要实现一个方法，该方法返回一个基于类型的对象。

```
 public interface IBase
{ 
}
public class Base1 : IBase { }
public class Base2 : IBase { }
public class Base3 : IBase { }
public class MyClass
{
    public IBase GetObject<T>() where T:IBase
    {
        // should return the object based on type.
        return null;
    }

} 
```

我需要像在 GetObject 方法中那样维护字典吗？

```
 Dictionary<Type, IBase> test = new Dictionary<Type, IBase>(); 
```

有没有更好的方法？

[编辑]： - 我不想每次都创建对象。我需要将它保存在内存中以及有电话时。我想从那里返回对象。除了字典还有其他方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T03:52:19.960

```
public class MyClass {
    public IBase GetObject<T>() where T:IBase, new() // EDIT: Added new constraint 
    {
        // should return the object based on type.
        return new T();
    }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T06:18:19.713

在您的情况下，您有两种方法：

1）创建自己的收藏并自己维护（类似这样）

```
public interface IBase {}
public class Base1 : IBase { public int x; }
public class Base2 : IBase { public int y; }
public class Base3 : IBase { public int z; }

public class MyClass
{
    Dictionary<Type, IBase> m_typesCollection;

    public MyClass()
    {
        // for example
        m_typesCollection = new Dictionary<Type, IBase>();
        m_typesCollection.Add(typeof(Base1), new Base1());
        m_typesCollection.Add(typeof(Base2), new Base2());
    }

    public IBase GetObject<T>()
        where T : IBase, new()
    {
        if (m_typesCollection.ContainsKey(typeof(T)))
            return m_typesCollection[typeof(T)];
        m_typesCollection.Add(typeof(T), new T());
        return m_typesCollection[typeof(T)];
    }
} 
```

2) - 使用依赖注入容器作为你的类型的集合

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-20T03:56:01.980

您可以将`new()`约束添加到泛型类型参数。请阅读[类型参数的约束（C# 编程指南）](http://msdn.microsoft.com/en-us/library/d5x73970.aspx)。然后它看起来有点像这样：

```
public T GetObject<T>() where T : IBase, new()
{
    return new T();
} 
```

并使用它

```
IBase b = GetObject<Base1>(); 
```

* * *

实际上，有一个基于类型创建对象的内置方法，即[Activator.CreateInstance 方法](http://msdn.microsoft.com/en-us/library/0hcyx2kd.aspx)

```
IBase b = Activator.CreateInstance<Base1>(); 
```

# button - Arduino斜坡映射值

> ID：13466338
> 
> 赞同：1
> 
> 时间：2012-11-20T03:50:10.640
> 
> 标签：button, map, arduino

我正在做一个项目，我需要根据开关位置调整映射值，但是我想在编写新的模拟数据时对其进行斜坡调整。

举个例子，假设我们想让一个按钮输出不同的电压（串行机器人控制器）。据我所知，它看起来像这样：

```
 if( adjenpos == 1) {
boostbtnout = map(boostbtnin, 0, 1023, 0, 51);
}
else if( adjenpos == 2) {
boostbtnout = map(boostbtnin, 0, 1023, 0, 102);
}
else if( adjenpos == 3) {
boostbtnout = map(boostbtnin, 0, 1023, 0, 153);
}
else if( adjenpos == 4) {
boostbtnout = map(boostbtnin, 0, 1023, 0, 204);
}
else if( adjenpos == 5) {
boostbtnout = map(boostbtnin, 0, 1023, 0, 255);
} 
```

现在使用选项 3，选择一个开/关值为 0 或 153 的按钮，我想将值 0 增加到 153 超过规定的速率，而不仅仅是开或关。

我的假设是在循环中做类似的事情：

```
boostramp = 1
boostbtnvalue = analogRead(boostbtnout)
 analogWrite(boostbtn, boostbtnvalue);
 if ( boostpwr <= boostbtnout){
 boostpwr = boostpwr + boostramp; 
```

我知道这是不正确的，但是如何将新的映射值注入到斜坡类型的函数中？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T04:45:05.933

所以，如果我是正确的，你想增加每个开关位置的电压，但是慢慢地增加电压，这样你的设备就不会飞到它上面。假设这是正确的，你想要这样的东西：

首先我会创建一个函数来获取变量（pos）的位置，然后你可以使用它来完成剩下的工作

```
int pos;
int target;
int currentPower = 0;

if(pos == 0){ target = 100
}
else if(pos == 1){target =200
}
else if(pos == 2){ target = 300
}
if(target > currentPower){
while(currentPower < target){
currentPower++;
delay(10); //tweak to change ramp speed
}
}
if(target < currentPower){
while(currentPower > target){
currentPower--;
delay(10);
}
} 
```

显然将值更改为您需要的值，但这就是想法。首先通过任何方式将位置设置为 0，然后确定目标，然后使用 while 循环来增加它。

# c++ - 简单 Python 客户端和 C++ 服务器的示例

> ID：13466341
> 
> 赞同：2
> 
> 时间：2012-11-20T03:50:21.327
> 
> 标签：c++, python

你好——我需要一个简单的例子来帮助我理解如何编写 Python 客户端和 C++ 服务器。有人可以帮我找到一个如何`hello world`从运行 C++ 的服务器发送到 Python 客户端的示例吗？我尝试在 Google 和其他网站上搜索了几个小时，但找不到一个关于如何通过 tcp/ip 发送参数的示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T04:46:51.867

看看这个[http://www.cs.utah.edu/~swalton/listings/sockets/programs/part2/chap6/simple-server.c](http://www.cs.utah.edu/~swalton/listings/sockets/programs/part2/chap6/simple-server.c)，它是一个简单的回显服务器，接受端口 9999 上的连接并回显收到的消息。

对于 python 方面，这不是很难，看这个例子：

```
import socket, time

client = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
client.connect(('localhost', 9999))
print client.send('Hello world!'), 'bytes sent.'
time.sleep(0.2)
print 'Received message:', client.recv(1024) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T05:36:13.013

使用 zeromq 库... 服务器和客户端的“hello_world”的 c++ 示例位于：

[http://zguide.zeromq.org/cpp:hwserver](http://zguide.zeromq.org/cpp%3ahwserver) , [http://zguide.zeromq.org/cpp:hwclient](http://zguide.zeromq.org/cpp%3ahwclient)
..

在蟒蛇中...... 研究 github 上提供的示例...... [https://github.com/zeromq/pyzmq/tree/master/examples](https://github.com/zeromq/pyzmq/tree/master/examples)

好吧，出于我自己的目的，我在两端都使用 python .. 另外有关更多教程，请观看此 pycon 视频
[http://blip.tv/pycon-us-videos-2009-2010-2011/pycon-2011-advanced-network -architectures-with-zeromq-4896861](http://blip.tv/pycon-us-videos-2009-2010-2011/pycon-2011-advanced-network-architectures-with-zeromq-4896861) 还有另一个很好的教程在[http://blog.pythonisito.com/2012/08/distributed-systems-with-zeromq.html](http://blog.pythonisito.com/2012/08/distributed-systems-with-zeromq.html)

# java - 将数据打包到 byte[]

> ID：13466342
> 
> 赞同：2
> 
> 时间：2012-11-20T03:50:33.800
> 
> 标签：java, python, bytearray, marshalling

对于 Java 项目，我需要类似于 Python 的 struct 模块的东西。我想将整数（也许还有浮点数和双精度数）打包成字节数组。此外，我想选择字节顺序，并且通常可以完全控制如何完成，因为我需要将此数据发送到一些硬件，这些硬件将以另一种语言运行代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T04:44:46.353

从这里：[将 4 个字节转换为 int](https://stackoverflow.com/questions/2383265/convert-4-bytes-to-int)，您可以使用[java.nio.ByteBuffer](http://docs.oracle.com/javase/1.5.0/docs/api/java/nio/ByteBuffer.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T04:48:08.540

对于 int var，您可以获取 int 的每个字节并放入数组中。像那样：

```
int info = 123456789;
byte [] data = new byte[100];
data[0] = (byte) ((info>>24) & 0xff);
data[1] = (byte) ((info>>16) & 0xff);
data[2] = (byte) ((info>>8)  & 0xff);
data[3] = (byte) ((info)     & 0xff);
int out = 0;
out = ((data[0]&0xff)<<24) | ((data[1]&0xff)<<16) | ((data[2]&0xff)<<8) | data[3]&0xff);
System.out.println("info " + info);
System.out.println("out  " + out); 
```

对于浮点数或双精度数，您不能直接这样做。有必要将您的 var 转换为 int。可以使用[Float.floatToRawIntBits()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Float.html#floatToRawIntBits%28float%29)或[Double.doubleToRawLongBits()](http://docs.oracle.com/javase/6/docs/api/java/lang/Double.html#doubleToRawLongBits%28double%29)方法来完成。

# hadoop - 如何以其他 Linux 用户的身份提交 hadoop 作业

> ID：13466346
> 
> 赞同：7
> 
> 时间：2012-11-20T03:50:52.190
> 
> 标签：hadoop

用户“hadoop”在集群上运行了 jobtracker 和 tasktracker，但是如果其他 Linux 用户想要提交他们的作业怎么办？

我已经按照这个文档，[http://hadoop.apache.org/docs/r1.0.4/service_level_auth.html#Hadoop+Services+and+Configuration+Properties](http://hadoop.apache.org/docs/r1.0.4/service_level_auth.html#Hadoop+Services+and+Configuration+Properties) 将以下内容添加到“core-site.xml”中：

```
 <property>
            <name>hadoop.security.authorization</name>
            <value>true</value>
    </property> 
```

对于conf文件“hadoop-policy.xml”，我将“hadoopGroup”添加到“security.job.submission.protocol.acl”，我的帐户“qingya.shu”属于这个组。但是当我以 qingya.shu 运行 hadoop 时，遇到如下错误：

```
12/11/09 12:57:29 INFO util.NativeCodeLoader: Loaded the native-hadoop library
12/11/09 12:57:29 INFO input.FileInputFormat: Total input paths to process : 1
12/11/09 12:57:29 WARN snappy.LoadSnappy: Snappy native library not loaded
12/11/09 12:57:29 INFO mapred.JobClient: Cleaning up the staging area file:/lustre/hadoop/user/qingya.shu/.staging/job_201211082024_0008
12/11/09 12:57:29 ERROR security.UserGroupInformation: PriviledgedActionException as:qingya.shu cause:org.apache.hadoop.ipc.RemoteException: java.io.IOException: java.io.FileNotFoundException: File file:/lustre/hadoop/user/qingya.shu/.staging/job_201211082024_0008/job.xml does not exist.
    at org.apache.hadoop.mapred.JobTracker.submitJob(JobTracker.java:3943)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:563)
    at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1388)
    at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1384)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:415)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1121)
    at org.apache.hadoop.ipc.Server$Handler.run(Server.java:1382)
Caused by: java.io.FileNotFoundException: File file:/lustre/hadoop/user/qingya.shu/.staging/job_201211082024_0008/job.xml does not exist.
    at org.apache.hadoop.fs.RawLocalFileSystem.getFileStatus(RawLocalFileSystem.java:397)
    at org.apache.hadoop.fs.FilterFileSystem.getFileStatus(FilterFileSystem.java:251)
    at org.apache.hadoop.mapred.JobInProgress.<init>(JobInProgress.java:406)
    at org.apache.hadoop.mapred.JobTracker.submitJob(JobTracker.java:3941)
    ... 11 more

org.apache.hadoop.ipc.RemoteException: java.io.IOException: java.io.FileNotFoundException: File file:/lustre/hadoop/user/qingya.shu/.staging/job_201211082024_0008/job.xml does not exist.
    at org.apache.hadoop.mapred.JobTracker.submitJob(JobTracker.java:3943)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:563)
    at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1388)
    at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1384)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:415)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1121)
    at org.apache.hadoop.ipc.Server$Handler.run(Server.java:1382)
Caused by: java.io.FileNotFoundException: File file:/lustre/hadoop/user/qingya.shu/.staging/job_201211082024_0008/job.xml does not exist.
    at org.apache.hadoop.fs.RawLocalFileSystem.getFileStatus(RawLocalFileSystem.java:397)
    at org.apache.hadoop.fs.FilterFileSystem.getFileStatus(FilterFileSystem.java:251)
    at org.apache.hadoop.mapred.JobInProgress.<init>(JobInProgress.java:406)
    at org.apache.hadoop.mapred.JobTracker.submitJob(JobTracker.java:3941)
    ... 11 more

    at org.apache.hadoop.ipc.Client.call(Client.java:1070)
    at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:225)
    at org.apache.hadoop.mapred.$Proxy1.submitJob(Unknown Source)
    at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:921)
    at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:850)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:415)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1121)
    at org.apache.hadoop.mapred.JobClient.submitJobInternal(JobClient.java:850)
    at org.apache.hadoop.mapreduce.Job.submit(Job.java:500)
    at org.apache.hadoop.mapreduce.Job.waitForCompletion(Job.java:530)
    at org.apache.hadoop.examples.WordCount.main(WordCount.java:67)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.hadoop.util.ProgramDriver$ProgramDescription.invoke(ProgramDriver.java:68)
    at org.apache.hadoop.util.ProgramDriver.driver(ProgramDriver.java:139)
    at org.apache.hadoop.examples.ExampleDriver.main(ExampleDriver.java:64)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.hadoop.util.RunJar.main(RunJar.java:156) 
```

请注意，lustre 被用作分布式文件系统而不是 HDFS。

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-12T06:30:44.180

尝试这个：

```
 <property>
    <name>hadoop.security.authorization</name>
    <value>simple</value>
  </property> 
```

# db2 - How to AUTO_INCREMENT in db2?

> ID：13466347
> 
> 赞同：40
> 
> 时间：2012-11-20T03:51:02.227
> 
> 标签：db2, auto-increment

I thought this would be simple, but I can't seem to use AUTO_INCREMENT in my db2 database. I did some searching and people seem to be using "Generated by Default", but this doesn't work for me.

If it helps, here's the table I want to create with the sid being auto incremented.

```
 create table student(
      sid integer NOT NULL <auto increment?>
      sname varchar(30),
      PRIMARY KEY (sid)
      ); 
```

Any pointers are appreciated.

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-11-20T06:14:53.097

You're looking for is called an IDENTITY column:

```
create table student (
   sid integer not null GENERATED ALWAYS AS IDENTITY (START WITH 1 INCREMENT BY 1)
  ,sname varchar(30)
  ,PRIMARY KEY (sid)
); 
```

A sequence is another option for doing this, but you need to [determine which one is proper](http://pic.dhe.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.admin.dbobj.doc/doc/c0004994.html) for your particular situation. Read this for more information [comparing sequences to identity columns](http://pic.dhe.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.admin.dbobj.doc/doc/c0007010.html).

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-20T04:02:46.973

You will have to create an auto-increment field with the sequence object (this object generates a number sequence).

Use the following CREATE SEQUENCE syntax:

```
 CREATE SEQUENCE seq_person
  MINVALUE 1
  START WITH 1
  INCREMENT BY 1
  CACHE 10 
```

The code above creates a sequence object called seq_person, that starts with 1 and will increment by 1\. It will also cache up to 10 values for performance. The cache option specifies how many sequence values will be stored in memory for faster access.

To insert a new record into the "Persons" table, we will have to use the nextval function (this function retrieves the next value from seq_person sequence):

```
 INSERT INTO Persons (P_Id,FirstName,LastName)
  VALUES (seq_person.nextval,'Lars','Monsen') 
```

The SQL statement above would insert a new record into the "Persons" table. The "P_Id" column would be assigned the next number from the seq_person sequence. The "FirstName" column would be set to "Lars" and the "LastName" column would be set to "Monsen".

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T12:18:47.457

Added a few optional parameters for creating "future safe" sequences.

```
CREATE SEQUENCE <NAME>
  START WITH 1
  INCREMENT BY 1
  NO MAXVALUE
  NO CYCLE
  CACHE 10; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-14T12:20:51.297

hi If you are still not able to make column as AUTO_INCREMENT while creating table. As a work around first create table that is:

> create table student( sid integer NOT NULL sname varchar(30), PRIMARY KEY (sid) );

and then explicitly try to alter column bu using the following

> alter table student alter column sid set GENERATED BY DEFAULT AS IDENTITY
> 
> Or
> 
> alter table student alter column sid set GENERATED BY DEFAULT AS IDENTITY (start with 100)

# c# - 未使用单选按钮将对象引用设置为对象的实例

> ID：13466361
> 
> 赞同：-2
> 
> 时间：2012-11-20T03:52:20.600
> 
> 标签：c#, asp.net, radio-button

我收到此错误，我认为它来自单选按钮。关于如何解决这个问题的任何想法？

这是aspx：

```
 <asp:RadioButton ID="radL" runat="server" GroupName="Gender" Checked="false" Text="L" AutoPostBack="true" />
   <asp:RadioButton ID="radP" runat="server" GroupName="Gender" Checked="false" Text="P" AutoPostBack="true" /> 
```

后面的代码：

```
 RadioButton radL = (RadioButton)editedItem.FindControl("radL");
   RadioButton radP = (RadioButton)editedItem.FindControl("radP");
   RadioButton JAN = (RadioButton)editedItem.FindControl("JAN");

   if (radL.Checked == true)
   {
       JAN = radL;
   }
   else
   {
       JAN = radP;
   }
   SqlConnection conn1 = BusinessTier.getConnection();
   conn1.Open();
   int flg = BusinessTier.SavePersonalInfo(conn1, 1, txtEmpNo.Text.ToString().Trim(), txtJobTitle.Text.ToString().Trim(), Convert.ToInt32(txtKod.Text.ToString().Trim()), txtJenis.Text.ToString().Trim(),
   txtNama.Text.ToString().Trim(), txtNokp.Text.ToString().Trim(), TLAHIR.SelectedDate.Value, Convert.ToInt32(txtUmur.Text.ToString().Trim()), JAN.Text.ToString().Trim(), txtRas.Text.ToString().Trim(), txtBadge.Text.ToString().Trim(), txtKerja.Text.ToString().Trim(),
   txtKodclin.Text.ToString().Trim(), txtKc.Text.ToString().Trim(), txtAdd1.Text.ToString().Trim(), txtAdd2.Text.ToString().Trim(), txtAdd3.Text.ToString().Trim(), txtAlgr.Text.ToString().Trim(), Session["sesUserID"].ToString(), "N");
   BusinessTier.DisposeConnection(conn1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T07:07:04.193

您应该在转换 FindControl() 语句的结果之前检查 null

例如这条线

```
RadioButton JAN = (RadioButton)editedItem.FindControl("JAN"); 
```

应该改为

```
RadioButton JAN;
if(editedItem.FindControl("JAN") != null)
{
   RadioButton JAN = (RadioButton)editedItem.FindControl("JAN");
} 
```

# sql - 差异。日期之间 - SQL plus

> ID：13466362
> 
> 赞同：0
> 
> 时间：2012-11-20T03:52:23.457
> 
> 标签：sql, oracle

> **可能重复：**
> [DateDiff 函数](https://stackoverflow.com/questions/13257968/datediff-function)

我试图找出 SQL 中日期之间的差异。给出查询时必须显示天数的差异。我收到一条错误消息，指出 DATEDIFF 是无效标识符。有任何想法吗？

这是表格：-

```
Create table auctions(
item varchar2(50),
datebought date,
datesold date,
days number
);

Insert into auctions values (‘Radio’,’12-MAY-2001’,’21-MAY-2001’);

Select item,datebought,datesold,DATEDIFF(dd ,datebought,datesold )”days”
from auctions; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T06:15:15.663

问题的标题包括“SQL plus”，这对我来说意味着 Oracle。

Oracle 没有 DATEDIFF 函数。使用 Oracle 确定两个日期之间的天数的最简单方法是从另一个日期中减去一个日期。

```
Select item, datebought, datesold, datesold-datebought as days from auctions; 
```

Oracle 将日期和时间信息都存储在日期字段中。如果您不关心时间，通常的做法是在 Oracle 的日期字段中存储截断为午夜的日期。

如果您的日期已经被截断到午夜，那么计算的值将是一个整数。

但是，如果您存储的日期包括时间信息，那么您可能需要截断该值以获得一个整数值。我怀疑你会想在减法之前截断每个日期，这样如果在一天购买，那么第二天的任何时间都将计为 1 天。Oracle 将日期截断到午夜。

```
select item, datebought, datesold, trunc(datesold)-trunc(datebought) as days from auctions; 
```

我同意 WarrenT 的观点，即您的表格不应包含非规范化的天数列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T05:03:51.637

试试这个，它对我有用

```
 Create table auctions(
  item varchar(50),
  datebought date,
  datesold date,
  days int
   )

 Insert into auctions(item,datebought,datesold) 
  values ('Radio','12-MAY-2001','21-MAY-2001')

 Select item,datebought,datesold,DATEDIFF(dd ,datebought,datesold )as days
  from auctions; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T05:31:09.843

在规范化的数据库设计中，您不希望定义一个可以从一个或多个其他列计算其值的表列。您最好在 SELECT 或 VIEW 中定义日期。

* * *

如果您使用的是 DB2，您可以将持有的天数计算为`DAYS(DATESOLD) - DAYS(DATEBOUGHT)`

# joomla2.5 - 为 Joomla 中的每个不同页面添加自定义元标记

> ID：13466364
> 
> 赞同：4
> 
> 时间：2012-11-20T03:52:28.070
> 
> 标签：joomla2.5, meta-tags

我使用 Joomla 2.5。我想为我网站中的每个页面（文章）设置一个名为“com.silverpop.pagename”的元标记属性。例如，我的主页将有：

```
<meta name="com.silverpop.pagename" content="Home Page" /> 
```

我的博客将有：

```
<meta name="com.silverpop.pagename" content="Blog" /> 
```

我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-16T12:04:02.930

当我不得不在我的 Joomla 项目中添加 Facebook Open graph META 标签时，我遇到了同样的问题。

```
<meta property="og:type" content="article"/>; 
```

我已经在我的 Joomla 模板中包含了这段代码，它对我有用，请看一下：

```
# add Facebook tags
$doc = JFactory::getDocument();
$doc->addCustomTag("<meta property='og:type' content='article'/>"); 
```

您也可以参考此[**链接**](http://www.robertwent.com/blog/joomla/69-adding-facebook-opengraph-meta-tags-to-a-joomla-3-template)。

希望它会帮助别人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T09:39:04.703

您需要修改标题。这可以完成编辑

> JOOMLA_ROOT\libraries\joomla\document\html\renderer\head.php

在这里您可以更改标头的行为

# javascript - 如何在 iframe 上捕获类似 facebook 按钮的事件？

> ID：13466367
> 
> 赞同：0
> 
> 时间：2012-11-20T03:52:45.667
> 
> 标签：javascript, facebook

我开发了以下 ling： http: [//www.mandanemedia.com/freelancer/](http://www.mandanemedia.com/freelancer/)

```
<iframe id="targetFrame" src="//www.facebook.com/plugins/likebox.php?href=http%3A%2F%2Fwww.facebook.com%2Fpages/MandaneMediacom/275554465891715&width=300&colorscheme=light&show_faces=true&border_color=%23ffffff&stream=false&header=false&height=258" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:300px; height:258px;" allowtransparency="true"></iframe> 
```

它是一个 iframe，在 2 秒后向人们显示 facebook like 按钮。现在的问题是，当用户按下喜欢按钮时，客户端希望关闭这个 iframe。

在这种情况下，我如何捕捉火灾事件。我可以通过 facebook 事件捕获它，或者我可以通过 javascript 捕获它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T04:12:57.210

如果您使用社交插件的 iframe 版本，则无法跟踪事件。您需要使用 HTML5 或 FBML（推荐使用 HTML5）

你必须在你的身体标签之后包括这个：

```
 <div id="fb-root"></div>
<script>
  window.fbAsyncInit = function() {
    FB.init({appId:'YOURAPPID',channelUrl : '//YOURDOMAIN/channel.html',status:true,cookie: true, xfbml: true });
    FB.Event.subscribe('edge.create',
          function(response) {
            $('#floating-box').hide();
        }
    );
  };

  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/es_ES/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));
</script> 
```

你的 div 应该是这样的：

```
 <div id="floating-box">
    <div class="fb-like-box" data-href="https://www.facebook.com/pages/MandaneMediacom/275554465891715" data-width="300" data-height="258" data-show-faces="true" data-stream="true" data-header="true"></div>
</div> 
```

**来源：** [https ://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/](https://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/)

# codeigniter - 如何在datamapper orm中迭代一对多关系的集合

> ID：13466369
> 
> 赞同：0
> 
> 时间：2012-11-20T03:52:48.927
> 
> 标签：codeigniter, orm, datamapper

我有两节课

```
class Product extends DataMapper {
    var $has_one = array('category');
}
class Category extends DataMapper {
    var $has_many = array('product');
} 
```

我需要获取该类别及其子类别的所有产品。有什么建议么。

类别表如下所示：

```
id - int(11), parent - int(11), name - varchar(100), slug - varchar(100) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T04:38:56.397

我在[这里](https://stackoverflow.com/questions/10498943/datamapper-self-relation-model "这里")找到了解决方案。基本上这是一个一对多的关系，可以通过实现自我关系来实现。

无论如何谢谢..！！

# c++ - 移动速度计算问题

> ID：13466373
> 
> 赞同：0
> 
> 时间：2012-11-20T03:52:59.333
> 
> 标签：c++

这是在 C++ 中，我使用的是 VC++ 2010。

我正在创建一个基于图块的游戏，每个图块是 32 像素。如果给您一定的时间，并且在那段时间内您想将图像沿一个方向移动 32 像素，我将如何计算每帧移动的量？帧速率不是固定的，我可以访问帧增量时间。

如果您需要更多信息，请询问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T04:49:15.783

您需要计算它的基本公式是：

*P 像素/S 秒 * 增量 T 秒/帧 = X 像素/帧*

例如，我们将使用您的图块大小并在 1 秒内移动它，当前帧速率为 30 fps。

*32 像素/1 秒 * .033 秒/帧 = 1.056 像素/帧*

```
int P = 32;
double S = 1.0;
double T = getFrameTime();
double X = P / S * T; 
```

# ajax - 只有在第一个请求完成后才允许另一个相同的 ajax 请求

> ID：13466375
> 
> 赞同：0
> 
> 时间：2012-11-20T03:53:18.753
> 
> 标签：ajax, asynchronous

我正在使用prototype.js，并拥有如下代码..

```
 new Ajax.Request('url', {
            asynchronous: true,
            method: "get",
            onSuccess: Succeeded,
            onFailure: Error
        }); 
```

如果第一个请求完成并发出下一个相同的请求，则会出现问题。

除非调用“成功”，否则如何防止发出具有相同 URL 的请求？

当然，我可以通过更改“异步：假”来解决问题，但是在这种情况下，异步方法是否仍然适用？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T04:09:16.273

我总是使用异步请求，因为同步请求很少是你想要的。

我很好奇为什么可以多次执行相同的请求。通常我只是在错误回调中重复请求并在成功回调中表示成功。我使用中止超时，所以我不会永远等待（默认 HTTP 超时通常为 2 分钟）。

如果请求是用户发起的，因此可能发生不止一次，您必须手动执行此检查（在某处设置“inProgress”布尔值）。

# jquery - 我想请解释一下这个 jquery ui 代码

> ID：13466376
> 
> 赞同：2
> 
> 时间：2012-11-20T03:53:24.403
> 
> 标签：jquery, jquery-ui, draggable

我正在阅读此代码（[http://jqueryui.com/droppable/#photo-manager](http://jqueryui.com/droppable/#photo-manager)），但无法理解某一特定行

```
var $gallery = $( "#gallery" ),
    $trash = $( "#trash" ); 

$( "li", $gallery ).draggable({ //This is the line a I can't understand well
        cancel: "a.ui-icon", 
        revert: "invalid", 
        containment: "document",
        helper: "clone",
        cursor: "move"
}); 
```

为什么 $gallery 在那里？它没有使 $gallery 可拖动，只是`<li>`可拖动。

似乎只能拖动`<li>`内部`#gallery`，但这很容易完成`$("#gallery li")`or`$("#gallery > li")`

那么有什么不同呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T03:57:46.747

函数的第二个参数`$()`是`context`. 它相当于：

```
$gallery.find('li'); 
```

是的，在这种情况下，您也可以这样做：`$("#gallery li")`，但是`context`当您只是传递一个 DOM 元素或 jQuery 对象并且不知道它的选择器时，该选项很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T04:07:10.567

根据 jQuery 文档：“`$("> elem", context)`选择器将在未来的版本中被弃用。因此不鼓励使用它来代替使用替代选择器。”

当它被弃用时，他们可能会调整照片管理器中的代码。我看不出用法上有任何差异，它只是看起来“更少 jQuery”。

# python - 将标准输出重定向到文件不起作用

> ID：13466379
> 
> 赞同：11
> 
> 时间：2012-11-20T03:53:40.537
> 
> 标签：python, linux, bash, io-redirection

我有一个使用子进程来获取 HTML 的脚本：

```
misha@misha-K42Jr:~/git/domain_classifier$ python webkit_retrieve.py error-cut.txt html/error -N 5
http://kurabo.co.jp HostNotFoundError
http://monarch.com HostNotFoundError
http://nssmgmt.com HostNotFoundError
http://sbcglobal.net HostNotFoundError
http://dynamixcorp.com SslHandshakeFailedError
http://groupe-synox.com RemoteHostClosedError
QFont::setPixelSize: Pixel size <= 0 (0)
http://www.cnn.com NoError
http://pacbell.net TimeoutError 
```

如果我运行相同的脚本，但将输出重定向到一个文件，我在输出中什么也得不到：

```
misha@misha-K42Jr:~/git/domain_classifier$ python webkit_retrieve.py error-cut.txt html/error -N 5 > stdout.txt
QFont::setPixelSize: Pixel size <= 0 (0)
misha@misha-K42Jr:~/git/domain_classifier$ cat stdout.txt
misha@misha-K42Jr:~/git/domain_classifier$ 
```

为什么输出是空的？它不应该包含在第一种情况下打印到标准输出的相同内容吗？

**问题不是关于合并标准输出和标准错误，而是为什么重定向标准输出会产生一个空文件**

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-20T08:18:43.117

用于`&>`重定向，这应该重定向`stdout`到`stderr`指定文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T03:59:25.367

您已将标准输出发送到该文件，但您的程序正在报告错误，这些错误会发送到标准错误。要设置 stderr 的重定向，请使用`2>`语法。

此链接可能会有所帮助： [http ://www.tldp.org/LDP/abs/html/io-redirection.html](http://www.tldp.org/LDP/abs/html/io-redirection.html)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-20T04:00:08.813

您的输出将输出到 stderror。尝试使用以下命令重定向 stderror 和 stdout：

```
<command> 2>&1 <file> 
```

# layout - 如何在布局中添加分隔符

> ID：13466382
> 
> 赞同：0
> 
> 时间：2012-11-20T03:53:57.037
> 
> 标签：layout, gtk, separator

我想`vseparator`在 GTK 2.0 中添加布局。

就像工具栏一样。

这是部分代码：

```
GtkWidget *layout, vsparator;
layout = gtk_layout_new(NULL, NULL);
vseparator = gtk_separator_menu_item_new();
gtk_layout_put(GTK_LAYOUT(layout), vseparator, 150, 0); 
```

但是，我不明白为什么它没有被显示。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T09:04:24.657

如果分隔菜单项的任一侧都没有菜单项，则不显示分隔菜单项。无论如何，在菜单之外使用分隔菜单项是没有意义的。

改为使用[`GtkVSeparator`](http://developer.gnome.org/gtk/stable/GtkVSeparator.html)。

# excel - 运行时错误“6”溢出（Excel VBA）

> ID：13466385
> 
> 赞同：2
> 
> 时间：2012-11-20T03:54:11.890
> 
> 标签：excel, overflow, vba

我遇到了这个错误，我要加载数千个 csv 文件，每次只能加载大约一百个文件。谁能告诉我错误在哪里？

```
Option Explicit

Function ImportData()

    Dim wkbCrntWorkBook As Workbook
    Dim wkbSourceBook   As Workbook
    Dim rngSourceRange1  As Range
    Dim rngSourceRange2 As Range
    Dim rngDestination1  As Range
    Dim rngDestination2  As Range
    Dim intColumnCount  As Integer

    Set wkbCrntWorkBook = ActiveWorkbook

    Dim SelectedItemNumber As Integer

    Dim YesOrNoAnswerToMessageBox As String

    Dim Highest As Double
    Highest = 0

    Dim counter As Integer
    Dim h1 As Integer
    Dim h2 As Integer

    h1 = 1
    h2 = 7

    Do

    SelectedItemNumber = SelectedItemNumber + 1

    With Application.FileDialog(msoFileDialogOpen)
        .Filters.Clear
        .Filters.Add "Command Separated Values", "*.csv", 1
        '.Filters.Add "Excel 2007", "*.xlsx; *.xlsm; *.xlsa", 2
        '.Filters.Add "Excel 2002-03", "*.xls", 3
        .AllowMultiSelect = True
        .Show

    For SelectedItemNumber = 1 To .SelectedItems.Count

        If .SelectedItems.Count > 0 Then
            Workbooks.Open .SelectedItems(SelectedItemNumber)
            Set wkbSourceBook = ActiveWorkbook
            Set rngSourceRange1 = ActiveCell.Offset(1, 0)
            Set rngSourceRange2 = ActiveCell.Offset(1, 6)

            For counter = 0 To 300

            Columns("H:H").NumberFormat = "0.00"

            'Highest = Application.WorksheetFunction.Max(Range("H1:H300"))

                If Highest <= ActiveCell.Offset(h1, h2).Value Then
                    Highest = ActiveCell.Offset(h1, h2).Value
                End If

                h1 = h1 + 1

            Next

            wkbCrntWorkBook.Activate

            Set rngDestination1 = ActiveCell.Offset(1, 0)
            Set rngDestination2 = ActiveCell.Offset(1, 1)

            ActiveCell.Offset(1, 2).Value = Highest

            For intColumnCount = 1 To rngSourceRange1.Columns.Count

                If intColumnCount = 1 Then
                    rngSourceRange1.Columns(intColumnCount).Copy rngDestination1
                Else
                    rngSourceRange1.Columns(intColumnCount).Copy rngDestination1.End(xlDown).End(xlDown).End(xlUp).Offset(1)
                End If
            Next

            For intColumnCount = 1 To rngSourceRange2.Columns.Count

                If intColumnCount = 1 Then
                    rngSourceRange2.Columns(intColumnCount).Copy rngDestination2
                Else
                    rngSourceRange2.Columns(intColumnCount).Copy rngDestination2.End(xlDown).End(xlDown).End(xlUp).Offset(1)
                End If
            Next

            ActiveCell.Offset(1, 0).Select

            wkbSourceBook.Close False
        End If

    Next SelectedItemNumber

    End With

    YesOrNoAnswerToMessageBox = MsgBox("Continue?", vbYesNo)

    Loop While YesOrNoAnswerToMessageBox = vbYes

    Set wkbCrntWorkBook = Nothing
    Set wkbSourceBook = Nothing
    Set rngSourceRange1 = Nothing
    Set rngSourceRange2 = Nothing
    Set rngDestination1 = Nothing
    Set rngDestination2 = Nothing
    YesOrNoAnswerToMessageBox = Empty
    SelectedItemNumber = Empty
    Highest = Empty
    counter = Empty
    h1 = Empty
    h2 = Empty
    intColumnCount = Empty

End Function 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T06:50:17.687

为了从未回答的问题列表中删除这个问题，我将以“社区 wiki”的方式回答这个问题，以避免将其他人的工作归功于他人。

正如 Tim Williams 在评论中回答的那样，部分答案是使用`Long`变量而不是`Integer`变量来确保在运行大量迭代时不会超过允许的变量值。

答案的另一部分，正如 user1828786 的最后一条评论所阐明的那样，是扫描您的代码以查找逻辑错误，以确保您的计数器变量正在为您创建的每个循环重置。

# magento - Magento 定制产品价格表

> ID：13466392
> 
> 赞同：2
> 
> 时间：2012-11-20T03:55:34.850
> 
> 标签：magento

如何将magento产品价格保存在自定义表而不是catalog_product_enitity_decimal表中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T11:52:12.680

我不确定为什么需要将产品价格保存在自定义表中，但您可以创建一个观察者来监听事件“catalog_product_save_after”。然后您可以 getFinalPrice() 并将其保存到您的自定义表中。

# php - 如何在php中识别数组中的修改元素

> ID：13466393
> 
> 赞同：1
> 
> 时间：2012-11-20T03:55:50.167
> 
> 标签：php, arrays, loops

这是我的第一个数组

```
$old = array(
1,2,3,4,5
);

$new(
2,4,5,6
); 
```

我可以通过使用`foreach`命令然后与两个数组进行比较。但问题是我必须区分哪些数字是新添加的，哪些数字是删除的。

并且两个数组都可以动态更改

**编辑：**

我创建了一个函数

```
function get_diff($old,$new){
$small_arr = $large_arr = array();

if( count($old) > count($new) ){
    $small_arr = $new;
    $large_arr = $old;
}else{
    $small_arr = $old;
    $large_arr = $new;
}

$arr = array_diff($large_arr, $small_arr);

return $arr;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T03:57:40.967

**试试这个 ：**

```
<?php
$array1 = array("a" => "green", "red", "blue", "red");
$array2 = array("b" => "green", "yellow", "red");
$result = array_diff($array1, $array2);

print_r($result);
?> 
```

$array1 中的多次出现都以相同的方式处理。这将输出：

```
Array
(
    [1] => blue
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T04:10:52.660

```
$old = array(
1,2,3,4,5
);
print_r($old);

$new = array(
2,4,5,6
);
print_r($new);
$removed = array_diff($old, $new);
print_r($removed);

$added = array_diff($new,$old);
print_r($added); 
```

基本上使用数组差异

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T04:04:53.747

还要检查这些功能：

[http://www.php.net/manual/en/function.array-diff-assoc.php](http://www.php.net/manual/en/function.array-diff-assoc.php)

[http://www.php.net/manual/en/function.array-intersect.php](http://www.php.net/manual/en/function.array-intersect.php)

[http://www.php.net/manual/en/function.array-intersect-assoc.php](http://www.php.net/manual/en/function.array-intersect-assoc.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T04:15:49.450

```
<?php

function get_diff($old,$new){
$small_arr = $large_arr = array();

if( count($old) > count($new) ){
    $small_arr = $new;
    $large_arr = $old;
}else{
    $small_arr = $old;
    $large_arr = $new;
}

    $arr = array_diff($large_arr, $small_arr);
    $values = "New values = ";
    foreach($arr as $arr_values){
        $values.=$arr_values.",";
    }
    $values.="<br/>";
    $same_arr = array_intersect($large_arr,$small_arr);
    $values.= "Earlier values = ";
    foreach($same_arr as $same_values){
        $values.=$same_values.",";
    }
return $values;

}
$old = array(1,2,3,4,5);

$new= array(2,4,5,6);
echo get_diff($old,$new);
?> 
```

[演示](http://phpfiddle.org/main/code/wfm-jit)

# java - 将参数传递给在 Java 方法中定义的方法

> ID：13466395
> 
> 赞同：0
> 
> 时间：2012-11-20T03:56:07.873
> 
> 标签：java, methods, abstract, overriding

所以情况是这样的：

```
private void myMethod()
{
    System.out.println("Hello World"); //some code

    System.out.println("Some Other Stuff"); 

    System.out.println("Hello World"); //the same code. 

} 
```

我们不想重复我们的代码。

[这里](http://www.velocityreviews.com/forums/t373066-why-i-cannot-have-a-method-inside-another-method.html)描述的技术效果很好：

```
private void myMethod()
{
    final Runnable innerMethod = new Runnable()
    {
        public void run()
        {
            System.out.println("Hello World"); 
        }
    };

    innerMethod.run();
    System.out.println("Some other stuff"); 
    innerMethod.run(); 
} 
```

但是，如果我想将参数传递给该内部方法怎么办？

例如。

```
private void myMethod()
{
    final Runnable innerMethod = new Runnable()
    {

        public void run(int value)
        {
            System.out.println("Hello World" + Integer.toString(value)); 
        }
    };

    innerMethod.run(1);
    System.out.println("Some other stuff"); 
    innerMethod.run(2); 
} 
```

给我：`The type new Runnable(){} must implement the inherited abstract method Runnable.run()`

尽管

```
private void myMethod()
{
    final Runnable innerMethod = new Runnable()
    {
        public void run()
        {
            //do nothing
        }

        public void run(int value)
        {
            System.out.println("Hello World" + Integer.toString(value)); 
        }
    };

    innerMethod.run(1);
    System.out.println("Some other stuff"); 
    innerMethod.run(2); 
} 
```

给我`The method run() in the type Runnable is not applicable for the arguments (int)`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T03:57:34.670

不，这不是一个方法，而是一个匿名对象。您可以为该对象创建一个额外的方法。

```
 Thread thread = new Thread(  new Runnable()
    {
      int i,j;
      public void init(int i, int j)
      {
        this.i = i;
        this.j=j;
      }
    });
thread.init(2,3);
thread.start(); 
```

并将runnable包装在一个线程中，然后调用start！不是`run()`。因为你不能调用匿名类的构造函数，正如@HoverCraft 所指出的，你可以扩展一个实现的命名类`Runnable`。

```
public class SomeClass implements Runnable
{
   public SomeClass(int i){ }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T04:07:58.390

看起来你只想要内部方法。Java 不允许您拥有它们，因此`Runnable`您描述的 hack 可以让您在某种程度上声明一个内部方法。

但是既然你想要更多地控制它，为什么不定义你自己的：

```
interface Inner<A, B> {
    public B apply(A a);
} 
```

然后你可以说：

```
private void myMethod(..){ 
    final Inner<Integer, Integer> inner = new Inner<Integer, Integer>() {
        public Integer apply(Integer i) {
            // whatever you want
        }
    };

    // then go:
    inner.apply(1);
    inner.apply(2); 
```

}

或者使用一些提供`functor`对象的库。应该有很多。Apache Commons 有一个可以使用的 Functor。

# java - 这会返回指向值的指针还是复制值？

> ID：13466405
> 
> 赞同：2
> 
> 时间：2012-11-20T03:57:04.533
> 
> 标签：java, object, servlets, pointers, copy

好吧，我很困惑。我相信它会返回指向原始地图的指针？

```
 private HttpServletRequest originalRequest;
    Map params = originalRequest.getParameterMap();
      params.remove("parameter-to-remove");
      params.put("parameter-to-add", "<a value>"); 
```

现在 originalRequest 中的参数会在这些操作之后发生变化吗？还是它只是将值复制到参数中，而我对它们做什么并不重要，而 originalRequest 中的任何内容都不会改变？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T03:58:15.763

返回的地图是不可变的地图，这可能是您没有看到反映的更改的原因。

根据 getParameterMap [javadoc](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getParameterMap%28%29)

> 一个不可变的 java.util.Map 包含参数名称作为键和参数值作为映射值。参数映射中的键是字符串类型。参数映射中的值是字符串数组类型。

如果你想为请求设置一些值，你应该使用[setAttribute](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#setAttribute%28java.lang.String,%20java.lang.Object%29)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T04:15:32.163

不可以，您不得删除或添加任何请求参数到请求对象。它们必须保留（当它们到达服务器时），直到请求对象超出范围（在请求处理周期结束之后）。

从逻辑上讲，如果您被允许做类似的事情，那么请求对象将不再代表原始请求。在整个请求处理周期中，我们要处理的是客户端发出的请求，而不是被篡改的请求。

您应该改用的方法是[`void setAttribute(java.lang.String name, java.lang.Object o)`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#setAttribute%28java.lang.String,%20java.lang.Object%29).

# c# - Ninject WithConstructorArgument : 没有匹配的绑定可用，并且类型不是自绑定的

> ID：13466406
> 
> 赞同：23
> 
> 时间：2012-11-20T03:57:09.850
> 
> 标签：c#, exception-handling, dependency-injection, ninject, ninject-2

我对 WithConstructorArgument 的理解可能是错误的，因为以下内容不起作用：

我有一个服务，我们称之为 MyService，它的构造函数采用多个对象，以及一个名为 testEmail 的字符串参数。对于这个字符串参数，我添加了以下 Ninject 绑定：

```
string testEmail = "test@example.com";
kernel.Bind<IMyService>().To<MyService>().WithConstructorArgument("testEmail", testEmail); 
```

但是，在执行以下代码行时，出现异常：

```
var myService = kernel.Get<MyService>(); 
```

这是我得到的例外：

> 激活字符串时出错 没有匹配的绑定可用，并且类型不是自绑定的。激活路径：
> 2）将依赖字符串注入MyService类型的构造函数的参数testEmail
> 1）请求MyService
> 
> 建议：
> 1) 确保您已为字符串定义绑定。
> 2) 如果绑定是在模块中定义的，请确保该模块已加载到内核中。
> 3) 确保您没有意外创建多个内核。
> 4) 如果您使用构造函数参数，请确保参数名称与构造函数参数名称匹配。
> 5) 如果您使用自动模块加载，请确保搜索路径和过滤器正确。

我在这里做错了什么？

**更新**：

这是 MyService 构造函数：

```
[Ninject.Inject]
public MyService(IMyRepository myRepository, IMyEventService myEventService, 
                 IUnitOfWork unitOfWork, ILoggingService log,
         IEmailService emailService, IConfigurationManager config,
         HttpContextBase httpContext, string testEmail)
{
    this.myRepository = myRepository;
    this.myEventService = myEventService;
    this.unitOfWork = unitOfWork;
    this.log = log;
    this.emailService = emailService;
    this.config = config;
    this.httpContext = httpContext;
    this.testEmail = testEmail;
} 
```

我对所有构造函数参数类型都有标准绑定。只有 'string' 没有绑定，而 HttpContextBase 的绑定有点不同：

```
kernel.Bind<HttpContextBase>().ToMethod(context => new HttpContextWrapper(new HttpContext(new MyHttpRequest("", "", "", null, new StringWriter())))); 
```

MyHttpRequest 定义如下：

```
public class MyHttpRequest : SimpleWorkerRequest
{
    public string UserHostAddress;
    public string RawUrl;

    public MyHttpRequest(string appVirtualDir, string appPhysicalDir, string page, string query, TextWriter output)
    : base(appVirtualDir, appPhysicalDir, page, query, output)
    {
        this.UserHostAddress = "127.0.0.1";
        this.RawUrl = null;
    }
} 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-11-20T16:41:22.703

随着声明：

```
var myService = kernel.Get<MyService>(); 
```

您正在尝试解析`MyService`，因为该`MyService`类型未在内核中注册，Ninject 会将其视为自绑定类型。

所以它不会使用你`WithConstructorArgument`来解决，`"testEmail"`因为它只会用于`Bind<IMyService>()`这就是你得到异常的原因。

因此，如果您已注册`MyService`：

```
string testEmail = "test@example.com";
kernel.Bind<IMyService>().To<MyService>()
      .WithConstructorArgument("testEmail", testEmail); 
```

那么你应该通过注册的接口（`IMyService`）来解决它：

```
var myService = kernel.Get<IMyService>(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-19T18:57:54.523

虽然 nemesv 有正确的响应，但我遇到了同样的错误，我的解决方案是 /bin 中的恶意 DLL。我已经重构并删除/移动了一些仍然存在于我的旧 DLL 中的类。解决方案 - 删除旧的 DLL。

# java - 如何通过 ssh 运行 Java 框架

> ID：13466415
> 
> 赞同：1
> 
> 时间：2012-11-20T03:58:19.287
> 
> 标签：java, ssh, applet, frame

我必须运行一个 java 程序，它在 Frame 中嵌入了一个小程序。我这样做是因为我想将小程序作为应用程序运行。

当我在本地机器上运行它时效果很好，但当我想在远程机器上运行它时却不行。该程序似乎正在运行我的 main ()，但我无法看到该窗口。

我试过 ssh -X 和 ssh -t 但没用。

这是测试代码

```
公共静态无效主要（字符串参数[]）{

        final DatingGUI 小程序 = new DatingGUI();
        小程序.init();
        小程序.start();

        Frame frame = new Frame("RKY-约会游戏小程序");
        frame.addWindowListener(new WindowAdapter()
        {
            公共无效窗口关闭（WindowEvent e）
            {
                System.exit(0);
            }
        });

        框架。添加（小程序）；
        frame.setSize(IDEAL_WIDTH,IDEAL_HEIGHT);
        frame.setVisible(true);
}

```

任何帮助表示赞赏。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:23:53.557

嗯，我想通了。我的 Mac 中缺少插件 x11。我安装了它，问题得到了解决。

# vb.net - 简单的 VB 代码没有运行

> ID：13466417
> 
> 赞同：0
> 
> 时间：2012-11-20T03:58:31.290
> 
> 标签：vb.net, mono, monodevelop, il, invalidprogramexception

我在 VB.net 中做了一个简单的例子，编译它并运行它：

```
Public Class Application
    Sub calc1()
        Dim sq as Integer
        'uncommenting this loop keeps it from compiling for some reason
        'For i as Integer = 1 to 1000
        '   sq = i*i
        'End For
        Console.WriteLine("calculated squares")
    End Sub

    Public Shared Sub Main()
        Dim startTime as DateTime
        Dim endTime as DateTime
        System.Console.WriteLine("Hello world!")
        startTime = Now
        calc1()
        endTime = Now
        Console.WriteLine(endTime.Subtract(startTime).TotalSeconds.ToString("0.0000"))

    End Sub
End Class 
```

虽然它编译得很好，但它在运行时给出了一个奇怪的错误：

```
Unhandled Exception: System.InvalidProgramException: Invalid IL code in ThreadTest.Application:Main (): IL_0018: ldarg.0   

[ERROR] FATAL UNHANDLED EXCEPTION: System.InvalidProgramException: Invalid IL code in ThreadTest.Application:Main (): IL_0018: ldarg.0 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T10:45:45.393

运行时错误是因为您从共享函数 (Main) 调用实例函数 (calc1)。

较新版本的 vbnc（Mono 的 VB 编译器）会给你这个错误：

```
test.vb (16,15) : error VBNC30369: Cannot refer to an instance member of a class from within a shared method or shared member initializer without an explicit instance of the class. 
```

此更正的代码有效：

```
Public Class Application
    Shared Sub calc1()
        Dim sq as Integer
        For i as Integer = 1 to 1000
            sq = i*i
        Next
        Console.WriteLine("calculated squares")
    End Sub

    Public Shared Sub Main()
        Dim startTime as DateTime
        Dim endTime as DateTime
        System.Console.WriteLine("Hello world!")
        startTime = Now
        calc1()
        endTime = Now
        Console.WriteLine(endTime.Subtract(startTime).TotalSeconds.ToString("0.0000"))
    End Sub
End Class 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T04:42:21.867

而不是`End For`在您的注释循环中，您需要使用`Next`.

它的另一部分是*编译器*错误，而不是你的错。单声道 vb 编译器仍然需要一些工作。如果我不得不猜测，我会说这里的问题要么是它看到你的方法没有真正的工作，并试图对你对 Datetime.Now 的两次使用进行糟糕的优化，要么它对 DateTime 使用了错误的重载.减去电话......但同样，这些只是猜测。

但是，您应该做的是使用 System.Diagnostics.Stopwatch 类而不是 Datetime 值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T04:36:14.190

```
Main function is required in file like as below :

     Public Class Application
            Public Shared Sub calc1()
                Dim sq As Integer
                'uncommenting this loop keeps it from compiling for some reason
                'For i as Integer = 1 to 1000
                '   sq = i*i
                'End For
                Console.WriteLine("calculated squares")
            End Sub
        End Class

        Sub Main()
            Dim startTime As DateTime
            Dim endTime As DateTime
            System.Console.WriteLine("Hello world!")
            startTime = Now
            Application.calc1()
            endTime = Now
            Console.WriteLine(endTime.Subtract(startTime).TotalSeconds.ToString("0.0000"))
            Dim inputFromConsole As String
            Dim outputToConsole As String
            Console.WriteLine("Type in a sentence and hit Enter:")
            inputFromConsole = Console.ReadLine()
            Console.WriteLine(outputToConsole)

        End Sub 
```

# javascript - d3.js 中用户选择节点集的设计选项强制有向图

> ID：13466419
> 
> 赞同：3
> 
> 时间：2012-11-20T03:58:50.207
> 
> 标签：javascript, graph, d3.js, selection, force-layout

我正在使用 d3.js 强制导向布局进行交互式图形可视化。我希望用户能够通过逐个单击来选择节点集。我有一组计算，我将允许用户在选定的集合上执行。例如，用户可以选择两个不同的节点，然后要求系统计算它们之间的最短路径（如果有的话）。

所以，问题是如何表示选定的节点集，以便我可以 (a) 允许用户从集合中添加和删除节点，(b) 可视化选定的节点（例如，通过突出显示它们），以及 (c ) 在节点上执行计算。

我看到一些不同的选项在 d3 管道的不同点起作用。

一种是在数据本身上有一个标志，指示是否选择了一个节点。突出显示节点很容易：各种样式和属性函数查看 d.selected 标志。不过，我不确定处理选择和取消选择节点的最佳策略是什么。我是否设置数据值，然后重新运行整个 d3.selectAll.data.enter.. 混乱？

另一种选择是保留一个单独的选定节点数组作为全局变量。这使得查找节点集变得容易。要实现突出显示样式/属性函数，将查看给定节点是否在集合中。同样，我不确定在从集合中添加或删除节点时如何更改可视化。

最后一个选项是在单击每个节点时立即更改每个节点的样式/属性。但是，我如何确定选定节点的集合？

任何建议将不胜感激！

# ruby-on-rails-3 - 使用 Rails 进行后台视频处理

> ID：13466420
> 
> 赞同：2
> 
> 时间：2012-11-20T03:58:53.047
> 
> 标签：ruby-on-rails-3, ffmpeg, paperclip, aasm

我试图让上传的视频在后台转换，运行窗口。我正在使用的一些东西：

```
gem 'paperclip'
gem 'delayed_job_active_record'
gem 'ffmpeg' 
```

我已经编辑了注册表以允许从任何地方运行 ffmpeg 命令，我得到一个我认为是 ffmpeg 的弹出窗口，因为它消失得太快了，猜测命令是错误的，所以如果有人知道它有什么问题，请告诉我。但真正的问题是它只是挂在那里，它说：

```
[2012-12-09 22:47:03] ERROR invalid body size.
[2012-12-09 22:47:03] ERROR Errno::ECONNABORTED: An established connection was a
borted by the software in your host machine.
        C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/webrick/httpresponse.rb:396:i
n `write'
        C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/webrick/httpresponse.rb:396:i
n `<<'
        C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/webrick/httpresponse.rb:396:i
n `_write_data'
        C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/webrick/httpresponse.rb:368:i
n `send_body_string'
        C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/webrick/httpresponse.rb:249:i
n `send_body'
        C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/webrick/httpresponse.rb:152:i
n `send_response'
        C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/webrick/httpserver.rb:110:in
`run'
        C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/webrick/server.rb:191:in `blo
ck in start_thread' 
```

有谁知道如何正确地让它工作？我已经阅读了一些教程，其中包含我需要的一些零碎的东西，但我无法让它们一起工作。这是我到目前为止所拥有的，如果您需要更多，请告诉我：

模型：

```
class Video < ActiveRecord::Base

  belongs_to :user
  has_many :comments, dependent: :destroy
  attr_accessible :video, :user_id, :video_file_name, :title, :public, :description, :views

  has_attached_file :video, url: "/users/:user_id/videos/:id/:basename_:style.:extension"

  #process_in_background :video #causes death

  validates :video, presence: true
  validates :description, presence: true, length: { minimum: 5, maximum: 100}
  validates :title, presence: true, length: { minimum: 1, maximum: 15 }

  validates_attachment_size :video, less_than: 1.gigabytes
  validates_attachment :video, presence: true

  default_scope order: 'created_at DESC'

  Paperclip.interpolates :user_id do |attachment, style|attachment.instance.user_id
  end

  #before_post_process do |video|
   # false if video.status == "converting"
  #end

  def perform
    command = <<-end_command
      start ffmpeg -i #{ '/public/users/:user_id/videos/:id/:basename_:style.:extension' }  -ar 22050 -ab 32 -s 1280x720 -vcodec webm -r 25 -qscale 8 -f webm -y #{ '/public/users/:user_id/videos/:id/:basename_.webm' }

    end_command
    success = system(command)
    logger.debug 'Converting File: ' + success.to_s
    if success && $?.exitstatus.to_i == 0
      #self.converted!
      self.status = "converted"
    else
      #self.failure!
      self.status = "failed"
    end
  end

  handle_asynchronously :perform

  def self.search(search)
    if search
      find(:all, conditions: ["public = 't' AND title LIKE ?", "%#{search}%"], order: "created_at DESC")
    else
      find(:all, conditions: ["public = 't'"], order: "created_at DESC")
    end
  end

  def self.admin_search(search)
    if search
      find(:all, conditions: ['title LIKE ?', "%#{search}%"], order: "created_at DESC")
    else
      find(:all, order: "created_at DESC")
    end
  end

  private

    # This updates the stored filename with the new flash video file
    def set_new_filename
      #update_attribute(:filename, "#{filename}.#{id}.webm")
      update_attribute(:content_type, "video/x-webm")
    end

end 
```

控制器：

```
class VideosController < ApplicationController
    before_filter :signed_in_user, only: [:upload, :update, :destroy]
    before_filter :admin_user, only: :admin_index

    def upload
        @video = Video.new
        # generate a unique id for the upload
        @uuid = (0..29).to_a.map {|x| rand(10)}
    end

    def create
        @video = Video.new(params[:video])
        @video.user_id = current_user.id

        if @video.save
            @video.delay.perform
            flash[:success] = "Uploaded Succefully!"
            redirect_to @video.user
            Delayed::Worker.new.start
        else
            render 'upload'
        end
    end

    def show
        @video = Video.find(params[:id])
        @comments = @video.comments.paginate(page: params[:page], per_page: 6)
        if !@video.public
            if !signed_in? || current_user.id != @video.user_id  && !current_user.admin && !current_user.approved?(@video.user)
            flash[:notice] = "Video is private"
            redirect_to root_path
        end
    end
    end

    def update
        @video = Video.find(params[:id])
        if @video.update_attributes(params[:video])
      flash[:success] = "Video preferences saved"
    else
        flash[:fail] = "Failed to update video preferences"
    end
    redirect_to :back
  end

    def destroy
        @video = Video.find(params[:id])
        @video.destroy
        flash[:deleted] = "Deleted Succefully!"
        redirect_to :back
    end

    def index
        @videos = Video.paginate(page: params[:page], per_page: 6).search(params[:search])
    end

    def admin_index
        @videos = Video.paginate(page: params[:page], per_page: 6).admin_search(params[:search])
    end

    def ajax_video_comments
        @video = Video.find(params[:id])
        @comments = @video.comments.paginate(page: params[:page], per_page: 6)

        respond_to do |format|
        format.js   { render partial: 'shared/comments', content_type: 'text/html' }
    end
    end

    def ajax_video_watched
        @video = Video.find(params[:id])
        @video.views += 1
        @video.save
    end

    private

    def signed_in_user
        redirect_to root_path, notice: "Please Login." unless signed_in?
    end

    def admin_user
        redirect_to(root_path) unless current_user.admin?
    end

end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T02:41:12.790

您的表应该有这些列：

*   视频文件名
*   视频内容类型
*   视频文件大小
*   video_updated_at
*   video_meta

我为您的模型添加了一些额外的回形针魔术，显然您可以调整 ffmpeg 的设置。这不是所有的原始代码，但我不记得我在哪里找到了零碎的代码，所以如果有人认出它，请随意称赞。

```
class Video < ActiveRecord::Base

  belongs_to :user
  has_many :comments, dependent: :destroy
  attr_accessible :video, :user_id, :video_file_name, 
                  :title, :public, :description, :views

  has_attached_file :video, 
    url: "/users/:user_id/videos/:id/:basename_:style.:extension"
    styles: {
             :original => { :geometry => "1280x720", :format => 'mp4', :streaming => true, :convert_options => { :input => {}, :output => {'c:v' => 'libx264', vprofile: 'high', preset: 'medium', 'b:v' => '1250k', maxrate: '1250k', bufsize: '2500k', pix_fmt: 'yuv420p', flags: '+mv4+aic', threads: 'auto', 'b:a' => '128k', strict: '-2'}} },
             :medium => { :geometry => "854x480", :format => 'mp4', :streaming => true,                 :convert_options => { :input => {}, :output => {'c:v' => 'libx264', vprofile: 'high', preset: 'medium', 'b:v' => '750k', maxrate: '750k', bufsize: '1500k', pix_fmt: 'yuv420p', flags: '+mv4+aic', threads: 'auto', 'b:a' => '128k', strict: '-2'}} },
             :small => { :geometry => '640x360', :format => 'mp4', :streaming => true, :convert_options => { :input => {}, :output => {'c:v' => 'libx264', vprofile: 'high', preset: 'medium', 'b:v' => '250k', maxrate: '250k', bufsize: '500k', pix_fmt: 'yuv420p', flags: '+mv4+aic', threads: 'auto', 'b:a' => '128k', strict: '-2'}} },
             :thumb => { :geometry => "160x90", :format => 'jpg', :time => 10 }
            }, 
    processors: [:ffmpeg, :qtfaststart]

  validates :video, presence: true
  validates :description, presence: true, length: { minimum: 5, maximum: 100}
  validates :title, presence: true, length: { minimum: 1, maximum: 15 }

  validates_attachment_size :video, less_than: 1.gigabytes
  validates_attachment :video, presence: true

  default_scope order: 'created_at DESC'

  # cancel post-processing now, and set flag...

  before_post_process do |video|
    if video.status == nil
      video.status = "queuing"
      false # halts processing
    end
  end

  # ...and perform after save in background
  after_commit do |video| 
    if video.status == "queuing"
      Delayed::Job.enqueue VideoJob.new(video.id), :queue => 'video'
      video.status == "queued"
      video.save(validations: false)
    end
  end

  # generate styles (downloads original first)
  def regenerate_styles!
    self.video.reprocess!
  end

  # detect if our source file has changed
  def video_changed?
    self.video_file_size_changed? || 
    self.video_file_name_changed? ||
    self.video_content_type_changed? || 
    self.video_updated_at_changed?
  end

  # Class to perform with delayed jobs
  class VideoJob < Struct.new(:video_id)

    def perform
      video = Video.find(self.video_id)
      video.status = "processing"
      video.save(validations: false)
      video.regenerate_styles!
    end

    def success(job)
      video = Video.find(self.video_id)
      video.status = "complete"   
      video.save(:validate => false)
    end

    def error(job, exception)
      video = Video.find(self.video_id)
      video.status = "error"   
      video.save(:validate => false)
    end
  end
end 
```

回形针处理器 (/lib/paperclip_processors/ffmpeg.rb)：

```
module Paperclip
  class Ffmpeg < Processor
    attr_accessor :geometry, :format, :whiny, :convert_options

    # Creates a Video object set to work on the +file+ given. It
    # will attempt to transcode the video into one defined by +target_geometry+
    # which is a "WxH"-style string. +format+ should be specified.
    # Video transcoding will raise no errors unless
    # +whiny+ is true (which it is, by default. If +convert_options+ is
    # set, the options will be appended to the convert command upon video transcoding.
    def initialize file, options = {}, attachment = nil
      @convert_options = {
        :input => {},
        :output => { :y => nil }
      }
      unless options[:convert_options].nil? || options[:convert_options].class != Hash
        unless options[:convert_options][:input].nil? || options[:convert_options][:input].class != Hash
          @convert_options[:input].reverse_merge! options[:convert_options][:input]
        end
        unless options[:convert_options][:output].nil? || options[:convert_options][:output].class != Hash
          @convert_options[:output].reverse_merge! options[:convert_options][:output]
        end
      end

      @geometry        = options[:geometry]
      @file            = file
      @keep_aspect     = !@geometry.nil? && @geometry[-1,1] != '!'
      @pad_only        = @keep_aspect    && @geometry[-1,1] == '#'
      @enlarge_only    = @keep_aspect    && @geometry[-1,1] == '<'
      @shrink_only     = @keep_aspect    && @geometry[-1,1] == '>'
      @whiny           = options[:whiny].nil? ? true : options[:whiny]
      @format          = options[:format]
      @time            = options[:time].nil? ? 3 : options[:time]
      @current_format  = File.extname(@file.path)
      @basename        = File.basename(@file.path, @current_format)
      @meta            = identify
      @pad_color       = options[:pad_color].nil? ? "black" : options[:pad_color]
      attachment.instance_write(:meta, @meta)
    end
    # Performs the transcoding of the +file+ into a thumbnail/video. Returns the Tempfile
    # that contains the new image/video.
    def make
      src = @file
      dst = Tempfile.new([@basename, @format ? ".#{@format}" : ''])
      dst.binmode

      parameters = []
      # Add geometry
      if @geometry
        # Extract target dimensions
        if @geometry =~ /(\d*)x(\d*)/
          target_width = $1
          target_height = $2
        end
        # Only calculate target dimensions if we have current dimensions
        unless @meta[:size].nil?
          current_geometry = @meta[:size].split('x')
          # Current width and height
          current_width = current_geometry[0]
          current_height = current_geometry[1]
          if @keep_aspect
            if @enlarge_only
              if current_width.to_i < target_width.to_i
                # Keep aspect ratio
                width = target_width.to_i
                height = (width.to_f / (@meta[:aspect].to_f)).to_i
                @convert_options[:output][:s] = "#{width.to_i/2*2}x#{height.to_i/2*2}"
              else
                return nil
              end
            elsif @shrink_only
              if current_width.to_i > target_width.to_i
                # Keep aspect ratio
                width = target_width.to_i
                height = (width.to_f / (@meta[:aspect].to_f)).to_i
                @convert_options[:output][:s] = "#{width.to_i/2*2}x#{height.to_i/2*2}"
              else
                return nil
              end
            elsif @pad_only
              # Keep aspect ratio
              width = target_width.to_i
              height = (width.to_f / (@meta[:aspect].to_f)).to_i
              # We should add half the delta as a padding offset Y
              pad_y = (target_height.to_f - height.to_f) / 2
              if pad_y > 0
                @convert_options[:output][:vf] = "scale=#{width}:-1,pad=#{width.to_i}:#{target_height.to_i}:0:#{pad_y}:#@pad_color"
              else
                @convert_options[:output][:vf] = "scale=#{width}:-1,crop=#{width.to_i}:#{height.to_i}"
              end
            else
              # Keep aspect ratio
              width = target_width.to_i
              height = (width.to_f / (@meta[:aspect].to_f)).to_i
              @convert_options[:output][:s] = "#{width.to_i/2*2}x#{height.to_i/2*2}"
            end
          else
            # Do not keep aspect ratio
            @convert_options[:output][:s] = "#{target_width.to_i/2*2}x#{target_height.to_i/2*2}"
          end
        end
      end
      # Add format
      case @format
      when 'jpg', 'jpeg', 'png', 'gif' # Images
        @convert_options[:input][:ss] = @time
        @convert_options[:output][:vframes] = 1
        @convert_options[:output][:f] = 'image2'
      end

      # Add source
      parameters << @convert_options[:input].map { |k,v| "-#{k.to_s} #{v} "}
      parameters << "-i ':source'"
      parameters << @convert_options[:output].map { |k,v| "-#{k.to_s} #{v} "}
      parameters << "':dest'"

      parameters = parameters.flatten.compact.join(" ").strip.squeeze(" ")

      begin
        success = Paperclip.run("ffmpeg", parameters, :source => "#{File.expand_path(src.path)}", :dest => File.expand_path(dst.path))
      rescue Cocaine::ExitStatusError => e
        raise Paperclip::Error, "error while processing video for #{@basename}: #{e}" if @whiny
      end

      dst
    end

    def identify
      meta = {}
      command = "ffmpeg -i \"#{File.expand_path(@file.path)}\" 2>&1"
      ffmpeg = IO.popen(command)
      ffmpeg.each("\r") do |line|
        # Matching lines like:
        # Video: h264, yuvj420p, 640x480 [PAR 72:72 DAR 4:3], 10301 kb/s, 30 fps, 30 tbr, 600 tbn, 600 tbc
        if line.include?(' Video: ')
          start = line.index('Video:')
          items = line[start, 150].split(',')
          size = items[2].strip!.split(' ').first
          meta[:size] = size.to_s
          meta[:aspect] = size.split('x').first.to_f / size.split('x').last.to_f
        end
        # Matching Duration: 00:01:31.66, start: 0.000000, bitrate: 10404 kb/s
        if line =~ /Duration:(\s.?(\d*):(\d*):(\d*\.\d*))/
          meta[:length] = $2.to_s + ":" + $3.to_s + ":" + $4.to_s
        end
      end
      meta
    end
  end

  class Attachment
    def meta
      instance_read(:meta)
    end
  end
end 
```

回形针处理器 (/lib/paperclip_processors/qtfaststart.rb)：

```
module Paperclip
  class Qtfaststart < Processor
    attr_accessor :streaming, :format, :whiny

    # Creates a Video object set to work on the +file+ given. It
    # will attempt to reposition the moov atom in the video given
    # if +streaming+ is set.
    def initialize file, options = {}, attachment = nil
      @streaming      = options[:streaming]
      @file            = file
      @whiny           = options[:whiny].nil? ? true : options[:whiny]
      @format          = options[:format]
      @current_format  = File.extname(@file.path)
      @basename        = File.basename(@file.path, @current_format)
      @meta            = attachment.meta
      attachment.instance_write(:meta, @meta)
    end

    # Performs the atom repositioning on +file+.
    # Returns the Tempfile that contains the new video or the original
    # file if +streaming+ wasn't set. 
    def make
      return @file unless @streaming

      src = @file
      dst = Tempfile.new([@basename, @format ? ".#{@format}" : ''])
      dst.binmode

      parameters = []
      # Add source
      parameters << ":source"
      # Add destination
      parameters << ":dest"

      parameters = parameters.flatten.compact.join(" ").strip.squeeze(" ")

      Paperclip.log("[qtfaststart] #{parameters}")
      begin
        success = Paperclip.run("qt-faststart", parameters, :source => "#{File.expand_path(src.path)}", :dest => File.expand_path(dst.path))
      rescue Cocaine::ExitStatusError => e
        raise PaperclipError, "error while processing video for #{@basename}: #{e}" if @whiny
      end
      dst
    end
  end

  class Attachment
    def meta
      instance_read(:meta)
    end
  end
end 
```

您的控制器可以使用更多清洁，但我只是进行了调整以使其与我的其他更改一起使用。

```
class VideosController < ApplicationController
    before_filter :signed_in_user, only: [:upload, :update, :destroy]
    before_filter :admin_user, only: :admin_index

    def upload
        @video = Video.new
        # generate a unique id for the upload
        @uuid = (0..29).to_a.map {|x| rand(10)}
    end

    def create
        @video = Video.new(params[:video])
        @video.user_id = current_user.id

        if @video.save
            flash[:success] = "Uploaded Succefully!"
            redirect_to @video.user
        else
            render 'upload'
        end
    end

    def show
        @video = Video.find(params[:id])
        @comments = @video.comments.paginate(page: params[:page], per_page: 6)
        if !@video.public
            if !signed_in? || current_user.id != @video.user_id  && !current_user.admin && !current_user.approved?(@video.user)
            flash[:notice] = "Video is private"
            redirect_to root_path
        end
    end
    end

    def update
        @video = Video.find(params[:id])
        if @video.update_attributes(params[:video])
      flash[:success] = "Video preferences saved"
    else
        flash[:fail] = "Failed to update video preferences"
    end
    redirect_to :back
  end

    def destroy
        @video = Video.find(params[:id])
        @video.destroy
        flash[:deleted] = "Deleted Succefully!"
        redirect_to :back
    end

    def index
        @videos = Video.paginate(page: params[:page], per_page: 6).search(params[:search])
    end

    def admin_index
        @videos = Video.paginate(page: params[:page], per_page: 6).admin_search(params[:search])
    end

    def ajax_video_comments
        @video = Video.find(params[:id])
        @comments = @video.comments.paginate(page: params[:page], per_page: 6)

        respond_to do |format|
        format.js   { render partial: 'shared/comments', content_type: 'text/html' }
    end
    end

    def ajax_video_watched
        @video = Video.find(params[:id])
        @video.views += 1
        @video.save
    end

    private

    def signed_in_user
        redirect_to root_path, notice: "Please Login." unless signed_in?
    end

    def admin_user
        redirect_to(root_path) unless current_user.admin?
    end

end 
```

你可以运行一个 delay_jobs 工作线程，不管怎样最适合你。我可能在这里犯了一些错误，但我试图使我的方法适应您当前的模型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-23T10:07:33.873

有点晚了，但我们使用[回形针-ffmeg](https://github.com/owahab/paperclip-ffmpeg) gem - 你可能想看看

您需要做的就是将它们放入您`gemfile`的`:ffmpeg`.

这是我们代码中的一个实时示例：

```
class Attachment < ActiveRecord::Base

        has_attached_file :attachment,
                styles:          lambda { |a| a.instance.is_image? ? {:small => "x200>", :medium => "x300>", :large => "x400>"}  : {:thumb => { :geometry => "100x100#", :format => 'jpg', :time => 10}, :medium => { :geometry => "300x300#", :format => 'jpg', :time => 10}}},
                :processors => lambda { |a| a.is_video? ? [ :ffmpeg ] : [ :thumbnail ] }

        def is_video?
                attachment.instance.attachment_content_type =~ %r(video)
        end

        def is_image?
                attachment.instance.attachment_content_type =~ %r(image)
        end

end 
```

# node.js - NodeJS中以postgres为例进行异步调用

> ID：13466421
> 
> 赞同：3
> 
> 时间：2012-11-20T03:58:55.587
> 
> 标签：node.js

实现此代码时（直接取自[https://github.com/brianc/node-postgres](https://github.com/brianc/node-postgres)的示例）：

```
var pg = require('pg'); 

var conString = "tcp://postgres:1234@localhost/postgres";

pg.connect(conString, function(err, client) {
  client.query("SELECT NOW() as when", function(err, result) {
      console.log("Row count: %d",result.rows.length);  // 1
      console.log("Current year: %d", result.rows[0].when.getFullYear());
      //Code halts here
  });
}); 
```

在最后一个之后`console.log`，节点挂起。我认为这是因为异步性质，我怀疑在这一点上，应该调用一个回调函数。

我有两个问题：

1.  我的想法正确吗？
2.  如果我的想法是正确的，那么机制是如何工作的。我知道 NodeJS 正在使用一个事件循环，但是是什么让这个事件循环在这一点上停止了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T04:43:30.140

它似乎挂起，因为与 Postgres 的连接仍处于打开状态。直到它关闭或“结束”......

```
client.end(); // Code halts here 
```

节点将继续空闲等待将另一个事件添加到队列中。

* * *

1.  不完全的。这是 Node 的细节`node-postgres`及其依赖关系，而不是 Node 或其“*异步性质*”的一般细节。

2.  空闲是由于并[记录了](https://github.com/coopernurse/node-pool#step-3---drain-pool-during-shutdown-optional)使用的[`generic-pool`模块](https://npmjs.org/package/generic-pool)`node-postgres`：

    > 如果您要关闭一个长期存在的进程，您可能会注意到节点未能退出 30 秒左右。这是 idleTimeoutMillis 行为的副作用——池在事件循环队列中注册了一个 setTimeout() 调用，因此节点不会终止，直到所有资源都超时，并且池停止尝试管理它们。

    而且，正如它在[Draining](https://github.com/coopernurse/node-pool#draining)下解释的那样：

    > 如果您知道想要在达到超时之前终止池中的所有资源，您可以`destroyAllNow()`结合使用`drain()`：
    > 
    > ```
    > pool.drain(function() {
    >     pool.destroyAllNow();
    > }); 
    > ```
    > 
    > 调用的一个副作用`drain()`是后续调用`acquire()`将引发错误。

    如果您打算在串行应用程序结束时退出，例如单元测试或您给定的代码段，那么[这](https://github.com/brianc/node-postgres/blob/v0.8.7/lib/index.js#L21-L28)就是[并且`pg.end()`](https://github.com/brianc/node-postgres/blob/v0.8.7/lib/index.js#L21-L28)肯定[可以完成](https://github.com/brianc/node-postgres/pull/214)[*的事情。*](https://github.com/brianc/node-postgres/pull/214)

# r - 将响应变量和解释变量作为计数的泊松回归

> ID：13466424
> 
> 赞同：1
> 
> 时间：2012-11-20T03:59:32.223
> 
> 标签：r, glm

我有以下变量：

回应：渔民租用（进出）的配额单位数量。

解释：渔民拥有的配额单位数量。

我安装了 GLM（泊松），但考虑到解释变量也是计数的，我不完全确定它是否正确。我发现泊松回归的例子只有分类和连续的解释变量，而不是计数变量。

所以：

1.  我对我的数据使用泊松是否正确？如果不是这样，我还有什么选择？
2.  我的模型的残差方差不均匀。我知道泊松回归允许面对这个问题，还是我应该关注这个问题并解决它（例如使用权重）？

任何帮助将不胜感激，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T04:43:14.217

这个问题似乎可以用泊松回归很好地建模。剩余方差不应该是“均匀的”。泊松模型假设方差与均值成正比。如果违反该假设，您可以选择。也可以使用准二项式和负二项式模型，它们允许对色散参数估计进行一些放宽。

如果渔民拥有的配额单位数量设置了使用数量的上限，那么我认为不应将其用作解释变量，但最好将其输入为 offset=log(quota_units)。它将改变对估计的解释，使它们成为对数（usage_rate）的估计。

# algorithm - 搜索字符串而不考虑空格

> ID：13466433
> 
> 赞同：0
> 
> 时间：2012-11-20T04:00:35.363
> 
> 标签：algorithm

我有一个包含`"a"`, `"b"`, `"ab"`, `"ab c"`,的短语的 ArrayList `"ab cd"`。输入可能是`"ab c"`或`"ab    c"`。在任何一种情况下，它都应该与`"ab c"`ArrayList 匹配。我需要一个算法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T04:14:25.737

你真正要问的是如何用一个空格替换多个空格。这可能是您需要的：[请参阅此问题。](https://stackoverflow.com/questions/206717/how-do-i-replace-multiple-spaces-with-a-single-space-in-c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T04:37:43.080

我不知道您使用的是什么语言，但最简单的伪代码是：

```
f(string inString, ArrayList<string> list):
    string s = inString.removeAllWhitespace();
    foreach (string s2 in list):
        string lString = s2.removeAllWhitespace();
        if (s.equals(lString))
            return true

    return false 
```

如果您希望它更快，请尝试以下操作：

```
f(string inString, ArrayList<string> list):
    foreach (string s in list):
        i1 = 0
        i2 = 0
        while (i1 < inString.length && i2 < s.length):
            if (iswhitespace(inString[i1])):
                i1++
            else if (iswhitespace(s[i2])):
                i2++
            else if (inString[i1] == s[i2]):
                i1++
                i2++
            else:
                continue foreach

        # account for trailing whitespace in both strings
        while (i1 < inString.length):
            if (!iswhitespace(inString[i1])):
                break
            i1++
        while (i2 < s.length):
            if (!iswhitespace(s[i2])):
                break
            i2++

        # strings are equal if we reached the end of both without
        # finding different characters (ignoring whitespace)
        if (i1 == inString.length && i2 == s2.length):
            return true
    return false 
```

这将遍历具有唯一索引的每个字符串，当找到空格或匹配时递增。如果字符不匹配，则拒绝字符串并继续外循环。

这个伪代码未经测试，但应该让你知道如何去做。我建议使用删除空格路线。这是更简单的代码，不会太慢，并且可以为读者提供非常明显的线索，让他们知道你正在尝试做什么。

在大多数语言中，字符串是不可变的，因此这种替换不会影响 ArrayList 中的字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T04:58:59.347

```
bool hacked_compare(const string& s, const string& t){
    string::const_iterator si = s.begin(), ti = t.begin();
    while (si != s.end() && ti != t.end() && (isspace(*si) || isspace(*ti))){
        // ignore all spaces leading to next char.
        while (si != s.end() && isspace(*si))
            si++;
        while (ti != t.end() && isspace(*ti))
            ti++;
        // check for equality of two chars.
        if (*si != *ti)
            return false;
        // keep going through both strings.
        si++;
        ti++;
    }
    //if we got this far then the strings were "equivalent" or empty.
    return true;
} 
```

# android - 有没有办法让 html5 视频（youtube、vimeo 等）自动在本机视频播放器中播放？

> ID：13466434
> 
> 赞同：2
> 
> 时间：2012-11-20T04:00:42.120
> 
> 标签：android, youtube, html5-video, android-videoview, vimeo

我想直接在原生 android 视频播放器中播放 HTML5 视频给用户。

我当前的设置需要花费太多精力才能进入本机视频播放器：目前我有一个带有嵌入式 HTML5 视频的 WebView（例如 Youtube 或 Vimeo HTML5，而不是 Flash，嵌入）。用户必须在视频上点击播放，然后点击全屏按钮（在下图中的最右侧）

![在此处输入图像描述](../Images/48686f8d11c2a1e9a5101f9bafa2e69d.png)

然后它在本地播放器中打开，如下所示：

![在此处输入图像描述](../Images/b57b37f73362d0d7bfc0a3dba547e1bf.png)

原生播放器是一个 View 是一个更好的视频播放体验。（我相信它是一个 VideoView？虽然它可能在较新版本的 Android 中有所不同。它是我的 Activity 中的一个视图，因此提供了额外的控制。有关更多信息，[请参阅这篇文章](https://stackoverflow.com/questions/4989738/how-to-play-a-video-in-a-webview-with-android)。）

我正在寻找一种直接启动这种体验的优雅方式，而不必将嵌入加载到 WebView 中，然后让用户点击全屏按钮。

有任何想法吗？

谢谢！

# java - MentaBean：使用 OR 而不是 AND 加载 bean 列表

> ID：13466435
> 
> 赞同：1
> 
> 时间：2012-11-20T04:00:59.407
> 
> 标签：java, hibernate, orm, mybatis, ebean

我正在加载属于城市 235 的男性用户列表。好的，这很容易。但是现在如何加载属于城市 235 或 236 的男性用户列表？

```
BeanManager beanManager = new BeanManager();
User userProps = PropertiesProxy.create(User.class);
BeanConfig userConfig = new BeanConfig(User.class, "Users")
   .pk(userProps.getId(), DBTypes.AUTOINCREMENT)
   .field(userProps.getUsername(), DBTypes.STRING)
   .field(userProps.getGender(), DBTypes.ENUMID.from(Gender.class))
   .field(userProps.getCity().getId(), "city_id", DBTypes.INTEGER);
beanManager.addBeanConfig(userConfig);

BeanSession session = new MySQLBeanSession(beanManager, conn);
User u = new User();
u.setGender(Gender.MALE);
u.setCity(new City(235));

List<User> users = session.loadList(u, lim(250));

System.out.println("Found: " + users.size()); 
```

但现在我想在 where 子句中添加一个 OR 条件！我怎么做？

我正在使用[这个框架](http://mentabean.soliveirajr.com)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T12:35:14.263

使用任何 ORM，最终您都必须编写查询。就像具有分组依据、子查询、左连接等的查询一样，没有 SQL 就无法做你想做的事。有关示例，请参阅[JOINS 。](http://mentabean.soliveirajr.com/mtw/Page/TableJoins/en/mentabean-table-joins)下面是您将如何进行查询：

```
PreparedStatement stmt = null;
ResultSet rset = null;

try {

    StringBuilder sql = new StringBuilder(1024);
    sql.append("select ");
    sql.append(session.buildSelect(User.class));
    sql.append(" from Users");
    sql.append(" where gender = ? and (city_id = ? or city_id = ?)");

    stmt = prepare(conn, sql.toString(), Gender.MALE.getId(), 235, 236); // varargs for params (from SQLUtils)

    rset = stmt.executeQuery();

    List<User> users = new LinkedList<User>();

    while(rset.next()) {
        User u = new User();
        session.populateBean(rset, u);
        users.add(u);
    }

    System.out.println("Number of users loaded: " + users.size());

} finally {
    close(rset, stmt, conn); // from SQLUtils
} 
```

注意：您的代码中缺少性别列的映射，所以我假设它是一个[ENUMID](http://mentabean.soliveirajr.com/mtw/Page/Mapping/en/mentabean-mapping)并且 Gender 枚举有一个 getId() 方法。否则，如果您使用 ENUMVALUE，请更改`Gender.MALE.getId()`为`Gender.MALE.toString()`.

# ios - 如何在 Parse 中更新静态数据？

> ID：13466436
> 
> 赞同：0
> 
> 时间：2012-11-20T04:01:03.227
> 
> 标签：ios, rest, parse-platform

我刚刚开始使用 Parse API，除此之外，我将使用它来存储一些我的 iOS 应用程序偶尔会下载的静态数据。但是，我确实需要偶尔更新此静态数据，但 Parse 并不清楚如何在最初上传数据后更新该数据。

Parse 的 API 文档向您展示了如何在不覆盖现有数据的情况下上传同名文件，但在这种情况下，这正是我想要做的。 **如何将更新上传到同一个文件？**

在这种情况下，我使用 REST API 上传内容。我获取 URL 以访问内容，但我无法通过简单地发布到它返回的 URL 来更新它。我收到 405 拒绝。我尝试将 HTTP 方法更改为 PUT，但这会导致 403 Unauthorized。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T18:24:58.393

事实证明，您无法更新静态资源，而是上传新资源。结果是四个 API 调用：

1.  上传资源
2.  获取文件对象
3.  更新指针
4.  删除旧资源

然后对于客户：

1.  获取文件对象
2.  下载静态资源

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T05:32:40.857

您可以上传新文件，然后使用对新文件的引用更新 Parse 对象。每个文件都有自己独特的永久链接，因此它们不能用新内容“更新”。

但是，您可以更新任何对象以指向新文件。

# c# - 从 asp.net mvc 调用 exe

> ID：13466439
> 
> 赞同：0
> 
> 时间：2012-11-20T04:01:41.760
> 
> 标签：c#, asp.net-mvc, timer

我有一个用 C# 编写的应用程序。基本上它是一个exe。此应用程序每隔 3 秒扫描一次网络，并使用网络信息填充数据库。

我想从 asp.net mvc 运行这个应用程序几秒钟，然后停止它，然后再次启动和停止。

我需要在单击开始按钮时启动 exe，并且需要在单击停止按钮时停止它。该 exe 将持续运行，直到我在它被调用后单击停止按钮。

是否可以从 asp.net mvc 框架调用这个 exe？

如果是，怎么做？我需要一些指示。请提供给我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T05:12:18.900

您将需要命名空间 System.Diagnostics 和 System.Timers。然后按照以下步骤操作。

```
 static System.Timers.Timer tTimer;
    const Int32 iInterval = 30;
    static Boolean IsProcessRunning = false;
    static Int32 iProcessID = 0;

    static Int32 SetTimerInterval(Int32 minute)
    {
        if (minute <= 0)
            minute = 60;
        DateTime now = DateTime.Now;

        DateTime next = now.AddMinutes((minute - (now.Minute % minute))).AddSeconds(now.Second * -1).AddMilliseconds(now.Millisecond * -1);

        TimeSpan interval = next - now;

        return (Int32)interval.TotalMilliseconds;
    }

    static void timer_Elapsed(object sender, EventArgs e)
    {   
        if (!IsProcessRunning)
        {   
            ProcessStartInfo objStartInfo = new ProcessStartInfo();
            objStartInfo.FileName = "C:\\Windows\\notepad.exe";

            Process objProcess = new Process();
            objProcess.StartInfo = objStartInfo;
            objProcess.Start();

            iProcessID = objProcess.Id;
            IsProcessRunning = true;
        }
        else
        {
            Process objProcess = Process.GetProcessById(iProcessID);
            objProcess.Kill();
            IsProcessRunning = false;
        }

        tTimer.Interval = SetTimerInterval(iInterval);
    } 
```

然后在您的开始按钮上单击...

```
 tTimer = new System.Timers.Timer();
    tTimer.Interval = SetTimerInterval(iInterval);
    tTimer.Elapsed += new System.Timers.ElapsedEventHandler(timer_Elapsed);
    tTimer.Start(); 
```

您可以随时通过...停止此操作

```
 tTimer.Stop(); 
```

你准备好了……

# rest - 使用有效的 API 密钥获取 403 错误 - 私有应用程序

> ID：13466448
> 
> 赞同：1
> 
> 时间：2012-11-20T04:03:16.810
> 
> 标签：rest, shopify

我创建了一个私有应用程序（获得了 API 密钥、密码和秘密），但由于某种原因它不允许我访问。我发出没有任何参数的 GET 请求……我应该在请求中使用某些东西吗？谢谢！乔什

```
{"response":
  "Error message:
    GET
    https://58b135637023de04edb493880e25XXXX:2d6982192cdc0ea753ba6a729c9dXXXX@ellabing-com.myshopify.com/admin/products.json? returned a response status of 401 Unauthorized

  "Server response": {
      "errors":"[API] Invalid API key or access token (unrecognized login or wrong password)"
  },
  "remoteServiceStatus":1,
  "success":false
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T14:15:13.293

[嗯……您能否使用诸如Charles](http://www.charlesproxy.com/)或[Fiddler](https://fiddler2.com/fiddler2/)之类的 Web 调试代理检查来自您的计算机的请求，并查看请求中是否真的传递了 Authorization 标头？

该格式`https://58b135637023de04edb493880e25XXXX:2d6982192cdc0ea753ba6a729c9dXXXX@ellabing-com.myshopify.com/admin/products.json`适用于浏览器和某些客户端，但它是一种非官方的速记，并不总是受支持。

# r - SharpeRatio.annualized() 不工作性能分析

> ID：13466449
> 
> 赞同：0
> 
> 时间：2012-11-20T04:03:40.160
> 
> 标签：r, xts, performanceanalytics

已经使用 Performance Analytics 中的 SharpeRatio.annualized() 函数一段时间了，没有任何问题。最近，我一直收到错误

```
Error in xts(rep(Rf, length(indexseries)), order.by = indexseries) : 
  order.by requires an appropriate time-based object 
```

当我运行这个：

```
library(PerformanceAnalytics)
library(quantmod)

myEnv <- new.env()
getSymbols(c("AAPL","GOOG"), src = "yahoo", from = "2004-04-01", to = "2012-09-30", env = myEnv)
index <- do.call(merge, c(eapply(myEnv, Ad), all=TRUE))

index.ret <- (index / lag(index,1) - 1)[-1,]

SharpeRatio.annualized(index.ret[,1]) 
```

我运行没有问题，`Return.annualized(index.ret[,1])`并且`sd.annualized(index.ret[,1])`. 其他人有这个问题或知道我做错了什么吗？

### 编辑 - 会话信息

```
> sessionInfo()
R version 2.15.1 (2012-06-22)
Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)

locale:
[1] en_GB.UTF-8/en_GB.UTF-8/en_GB.UTF-8/C/en_GB.UTF-8/en_GB.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] quantmod_0.3-17              TTR_0.21-1                   Defaults_1.1-1               PerformanceAnalytics_1.0.4.4
[5] xts_0.8-8                    zoo_1.7-9                   

loaded via a namespace (and not attached):
[1] digest_0.5.2    evaluate_0.4.2  formatR_0.6     grid_2.15.1     knitr_0.8       lattice_0.20-10 plyr_1.7.1     
[8] stringr_0.6.1   tools_2.15.1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T05:14:18.633

我加载了[系统投资者工具箱](http://systematicinvestor.wordpress.com/systematic-investor-toolbox/ "系统投资者工具箱")，这就是问题的原因。

# ember.js - 动态创建视图

> ID：13466454
> 
> 赞同：0
> 
> 时间：2012-11-20T04:04:29.253
> 
> 标签：ember.js

我正在生成客户端应在服务器上循环浏览的视图列表。服务器返回一个列表，如“App.AView”、“App.BView”、“App.CView”、...等，它们引用客户端上的视图和模板。

我想动态创建这些视图，换掉以前的视图，并包含新视图。我的第一个想法是用这个动态视图名称编译一个车把模板，ala：

```
App.QuestionView = Em.View.extend({
    template: function() {
         return Ember.Handlebars.compile("{{view " + this.get("view_name') + "}}");
    }
}); 
```

哪个可行，但看起来很难看 - 有没有办法在 Ember.JS 中创建一个带有视图名称字符串的视图，并用该视图替换父视图中的现有视图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T05:06:02.817

您想查看 Ember.ContainerView，它可以让您以编程方式管理一组子视图。Container View 的文档非常好，查看：[http ://emberjs.com/api/classes/Ember.ContainerView.html](http://emberjs.com/api/classes/Ember.ContainerView.html)

由于听起来您一次只希望显示一个视图，因此您可以专注于该`currentView`属性，它将自动维护您的`childViews`数组以显示单个视图。

这里还有一个例子：[http ://www.emberplay.com/#/workspace/2792969430](http://www.emberplay.com/#/workspace/2792969430)

# java - 删除intelliJ中点周围的所有空格和制表符？

> ID：13466456
> 
> 赞同：3
> 
> 时间：2012-11-20T04:05:18.113
> 
> 标签：java, ide, intellij-idea, pycharm

在 emacs 中，有一个被称为`just-one-space`绑定到`Meta+Space`.

它用于

> 删除点周围的所有空格和制表符，留下一个空格（或 N 个空格）。

我在 emacs 中经常使用这个动作，它对我来说非常有用。

我想知道在intelliJ中是否也有这样的动作？

（用例是这样的：

```
 Line1
      Line2 
```

当我`Ctrl+k`在 Line1 的末尾使用两次时，文本变为：

```
 Line1                Line2 
```

我需要几个动作来删除空格，使它像这样：

```
 Line1 Line2 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T08:41:40.780

IntelliJ 可以使用正则表达式，所以

```
Search: \b\s+\b
Replace: <space> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T16:41:43.527

刚刚发现这`Join Lines`可能是我需要的。

# c# - C#中的嵌套命名空间

> ID：13466460
> 
> 赞同：2
> 
> 时间：2012-11-20T04:05:51.500
> 
> 标签：c#

我需要在命名空间下包含一组静态字符串属性，例如：

```
namespace1 N1 {
  namespace N2 {
      public const string A = "a";
  }
  public const string B = "c";
  namespace N3 {
      public const string A = "a";
  }
} 
```

是否可以在 C# 中使用嵌套命名空间？更好的设计方法是什么？在这种情况下使用静态类还是使用命名空间？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-20T04:08:35.627

是的，在 C# 中可以有嵌套的命名空间。

但是，不可能在命名空间内直接有一个常量。你必须把它放到一个类中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T04:13:15.463

是的，可以创建嵌套命名空间。但是，我相信这样的首选方法是[创建一个资源文件](http://msdn.microsoft.com/en-us/library/xbx3z216.aspx)

这为您带来了额外的好处，即无需更改代码即可进行更改，并支持多种语言。

# php - 来自连接的 mysql 查询的多维数组

> ID：13466466
> 
> 赞同：0
> 
> 时间：2012-11-20T04:07:19.933
> 
> 标签：php, mysql, multidimensional-array

所以这让我有点恼火。稍微解释一下，我有 2 张桌子 - 设备和 ehours。本质上，设备保持静态并转移到项目中，然后每天跟踪其使用情况。`equipment.eid`是设备的唯一标识符，然后在每个 ehours 条目中使用。

以下是我用来创建输出的查询。我得到的输出排序正确，但无法弄清楚如何正确输出。

```
SELECT e.cid, e.eid, h.pid, h.hdate, e.eqid, e.name, e.make, e.model, h.hours, e.uid
FROM equipment e
LEFT JOIN ehours h on h.eid = e.eid
AND MONTH(h.hdate) = $data[month] AND YEAR(h.hdate) = $data[year]
ORDER BY cid ASC, eid ASC, pid ASC, hdate ASC 
```

我遇到的问题是，在给定的一个月内，一台设备可能在 2 个单独的项目中。查询显示以下...

```
cid | eid | pid  | hdate      | eqid | name     | make        | model | hours | uid
4   | 55  | 1    | 2012-11-01 | E8   | Forklift | Clark CGP25 |       | 5     | 1
4   | 55  | 1    | 2012-11-07 | E8   | Forklift | Clark CGP25 |       | 5     | 1
4   | 55  | 1    | 2012-11-10 | E8   | Forklift | Clark CGP25 |       | 2     | 1
4   | 55  | 1    | 2012-11-13 | E8   | Forklift | Clark CGP25 |       | 3     | 1
4   | 55  | 4    | 2012-11-13 | E8   | Forklift | Clark CGP25 |       | 2     | 1 
```

输出需要具有日期的第二维，该日期将在该月的适当日期输出。最终显示将显示该月的所有日期。例如，第一个`eid`将在 1 的一行上输出，`pid`并且`hours`在该月的正确日期具有 。然后它会在之后有一条线，使用相同的设备，但 a`pid`为 4。

所以，无论如何，我需要以某种方式将日期创建到数组的第二维中，当我输出每一行时，我可以遍历它。或者也许是第三维度来捕捉与每个日期相关的时间？我已经查看了几种 php 方法来尝试这样做，但到目前为止都没有成功。任何帮助是极大的赞赏。哇——这变成了一本小说。

**编辑：**

以下是应该是什么输出......

```
pid | eqid | name     | make        | 11-01 | 11-02 | ... | 11-07 | ... | 11-10 | ... | 11-13
1   | E8   | Forklift | Clark CGP25 | 5     | 0     | ... | 5     | ... | 2     | ... | 3
4   | E8   | Forklift | Clark CGP25 | 0     | 0     | ... | 0     | ... | 0     | ... | 2 
```

还必须考虑 NULL 值`pid`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T04:30:54.793

假设我了解您的目标，您可以为每个 PID 创建一个关联数组，其中包含每个 PID 的日期行，如下所示：

```
while ($row = mysql_fetch_assoc($res))
{
  $output[$row['pid']][] = $row;
} 
```

那么你需要检查新数组

```
foreach ($output as $job)
{
  foreach ($job as $line)
  {
    // do some formatiign here
    print_r($line)
  }
  echo "<hr>"; // this is the line or whatever seperator you need
} 
```

希望这可以帮助 ：）

# java - 识别用户角色和权限的最佳实践？

> ID：13466468
> 
> 赞同：0
> 
> 时间：2012-11-20T04:07:40.797
> 
> 标签：java, hibernate

在定义具有不同角色/权限的用户（例如具有受限访问权限的普通用户和具有完全访问权限的管理员）时，有哪些最佳实践？

我的用户类看起来像这样：

```
@Entity
@Table(name = "users")
public class User {
    @Id
    @Column(name = "userID")
    @GeneratedValue(generator = "increment")
    @GenericGenerator(name = "increment", strategy = "increment")
    private Long userID;

    public Long getUserID() {
        return userID;
    }

    @ManyToOne(fetch = FetchType.LAZY)
    @Column(nullable = false)
    private Role role;

    @Column(nullable = false)
    private boolean isActive;

    @Column(nullable = false, unique = true)
    private String email;

    @Column(nullable = false)
    private String password;    

    @Column
    @Temporal(TemporalType.TIMESTAMP)
    private Calendar lastLoggedIn;

    @Column(nullable = false)
    @Temporal(TemporalType.TIMESTAMP)
    private Calendar createdDate;

    @Version
    private Integer version;
} 
```

我的角色类是：

```
@Entity
@Table(name = "roles")
public class Role {
    @Id
    @Column(name = "roleID")
    @GeneratedValue(generator = "increment")
    @GenericGenerator(name = "increment", strategy = "increment")
    private Long roleID;

    @Column(nullable = false)
    private String roleName;

    @Column(nullable = false)
    private String rolePermissions;
} 
```

假设我的应用程序需要检索用户及其角色的列表，用户实例是否应该持有对角色实例（或代理）的引用？如果我的应用程序必须查找特定角色的所有用户怎么办，角色是否必须具有用户列表？设计和实施这种关系的一些尝试和真实的方法是什么？

另外，我是否使用 JPA 正确进行映射？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T04:42:45.760

你应该使用，

```
@CollectionOfElements
@JoinTable(name = "ROLE_PERMISSIONS", joinColumns = @JoinColumn(name = "roleID"))
@Column(name = "Permission")
private List<String> rolePermissions; 
```

代替，

```
@Column(nullable = false)
private String rolePermissions; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T04:14:42.020

我建议使用

```
@role=Admin 
```

对于所有管理员级别的功能

并使用

```
@role=User 
```

适用于普通用户，如有必要，可提供更多注释

# .net - 适用于 Oracle 云的 .NET 数据适配器

> ID：13466469
> 
> 赞同：1
> 
> 时间：2012-11-20T04:07:55.933
> 
> 标签：.net, oracle, c#-4.0, cloud, oracle-cloud-infrastructure

大家好，

我将使用 Oracle Cloud 测试我的 .NET 应用程序，它在 Oracle 11g R2 上运行良好，但我不知道 Oracle Cloud 是否存在 .NET 数据适配器。

有人知道答案吗？

提前致谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-07T00:40:12.780

没办法：我们必须使用 Java 或 Web 服务，但不能使用 .NET（目前）：

[http://docs.oracle.com/cloud/CSDBU/develop.htm#CSDBU195](http://docs.oracle.com/cloud/CSDBU/develop.htm#CSDBU195)

[http://docs.oracle.com/cloud/CSJSU/intro.htm#CSJSU7053](http://docs.oracle.com/cloud/CSJSU/intro.htm#CSJSU7053)

# c# - 异步写入错误日志文件

> ID：13466472
> 
> 赞同：1
> 
> 时间：2012-11-20T04:08:10.653
> 
> 标签：c#, asp.net, logging, file-io, asynchronous

我正在创建一个面向公众的网站，其中一项要求是将所有错误/警告写入日志文件。

我到处都有 try catch 块，也可以在应用程序错误事件中捕获错误。

作为一个面向公众的网站，我担心日志文件可能会成倍增长（即使我每天都创建新文件）并且可能会降低网站性能。有什么办法可以异步写入错误文件，这样不会对用户产生任何影响吗？

任何样本或指南都非常适用。

我的网站采用 ASP.NET Web 表单和 c#。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T04:12:19.443

**建议：** Tippu 我强烈建议您改用 ELMAH。它设置起来尽可能简单，并且会让您的生活变得更加轻松（您将永远不会再编写自己的日志记录程序）。它甚至可以捕获未处理的异常！

查看以下网站，了解它是什么以及设置的容易程度

[埃尔玛](http://www.hanselman.com/blog/ELMAHErrorLoggingModulesAndHandlersForASPNETAndMVCToo.aspx)

**安全性：**您必须注意的唯一一件事是您必须保护 ELMAH，否则您的会话可能会被劫持。但是，很容易保护它。请查看以下网站，了解安全问题以及如何保护它。

[ASP.NET 会话劫持](http://www.troyhunt.com/2012/01/aspnet-session-hijacking-with-google.html)

**5-10 分钟的设置步骤**

1.  转到 Nuget，搜索“ELMAH SQL”并安装“ELMAH on MS SQL Server”。

2.  在您的“App_Readme”文件夹中将有一个“Elmah.SQLServer.sql”文件，它安装了一个表和 3 个存储过程。在您想要连接的数据库中运行它。（您必须在实时服务器中设置存储过程的权限，以便它可以读取和写入它）

3.  转到您的网络配置（您会注意到 ELMAH 已自动为您更新）。Find ，如果您不想进行远程访问，请保持原样，我相信它会受到保护。

如果您想允许远程访问，以便您可以在任何需要将其设置为 true 的地方查看错误日志网站。然后你必须保护它。下面将为管理员保护它并拒绝所有其他用户。查看此网站以获取更多信息[安全 ELMAH](http://code.google.com/p/elmah/wiki/SecuringErrorLogPages)

```
<location path="elmah.axd">  
    <system.web>
       <httpHandlers>
            <add verb="POST,GET,HEAD" 
                path="elmah.axd" 
                type="Elmah.ErrorLogPageFactory, Elmah" />
       </httpHandlers>
     <authorization>
        <allow roles="admin" />  
        <deny users="*" />
     </authorization>  
   </system.web>
   <system.webServer>
     <handlers>
         <add name="ELMAH" 
             verb="POST,GET,HEAD"
             path="elmah.axd" 
             type="Elmah.ErrorLogPageFactory, Elmah"
             preCondition="integratedMode" />
     </handlers>
   </system.webServer> 
```

1.  转到您的连接字符串并将“elmah-sqlserver”连接字符串指向您的特定数据库。

2.  转到您的尝试捕获并在捕获部分添加“ErrorSignal.FromCurrentContext().Raise(ex);”

3.  您的应用程序现在将捕获已处理和未处理的异常并将错误写入 SQL Server 表。要查看错误，请打开浏览器并转到“yourwebsite/elmah.axd”

4.  您也可以对其进行设置，以便将错误发送给您。查看以下网站以了解如何执行此操作：[设置 ELMAH 电子邮件](http://scottonwriting.net/sowblog/archive/2011/01/06/customizing-elmah-s-error-emails.aspx)

**忽略上面的数字排序**

# asp.net-mvc-3 - 更改 NuGet 包的依赖项

> ID：13466473
> 
> 赞同：1
> 
> 时间：2012-11-20T04:08:12.913
> 
> 标签：asp.net-mvc-3, nuget-package, combres

我最近尝试将我的 log4net 升级到新的 2.0.0 版本。但我无法这样做，因为我有另一个库（combres.mvc），它依赖于 log4net 1.2.11

```
Install failed. Rolling back...
Updating 'log4net  1.2.11' to 'log4net 2.0.0' failed. Unable to find a version of 'combres' that is compatible with 'log4net 2.0.0'. 
```

现在，combres 是开源的，我可以在这里下载[http://combres.codeplex.com/](http://combres.codeplex.com/) 有谁知道我该如何解决这个问题，combres 库将支持 log4net 2.0.0 或任何其他可能出现的未来版本出去？

我确实试图在没有帮助的情况下联系出版商，看来他不再支持这个库了......

# grails - grails requestmap（spring security plugin）中的url不区分大小写吗？

> ID：13466474
> 
> 赞同：0
> 
> 时间：2012-11-20T04:08:32.573
> 
> 标签：grails, spring-security

我被分配了一个错误，它可能处理 Spring Security 中的 requestmap 表。我不允许自己更改 requestmap 表。所以，我需要知道这一点：

grails requestmap（spring security plugin）中的url不区分大小写吗？

例如：如果 /dashBoard 和 /dashboard 具有不同的角色，这会产生问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T08:28:58.710

没问题。网址映射是区分大小写的广告，我认为 spring 安全映射器基于此[AntPathMatcher](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/util/AntPathMatcher.html)

# java - 从 C 套接字服务器向 Java 套接字客户端接收数据时遇到问题

> ID：13466477
> 
> 赞同：2
> 
> 时间：2012-11-20T04:08:42.523
> 
> 标签：java, c, sockets

我在尝试在简单的 Java 套接字客户端和简单的 C 套接字服务器之间来回发送字符串时遇到问题。

它的工作原理如下：

Java客户端发送`msg`到C服务器

```
 out.writeBytes(msg); 
```

C服务器接收到msg并放入`buf`

```
 if ((numbytes = recv(new_fd, buf, MAXDATASIZE-1, 0)) == -1) {
        perror("recv");
        exit(1);
    } 
```

C 服务器将消息发送回 Java 客户端

```
 if ((len = send(new_fd, buf, numbytes, 0)) == -1)
        perror("send"); 
```

但是 Java 客户端无法从 C 服务器接收消息，我尝试使用`DataInputStream`, `BufferedReader`, 读入`char[]`, `byte[]`, 转换为`string`但无法获取接收到的消息。当试图读入客户端的数组时，有时我只得到第一个字符，这让我相信这是一个阻塞问题？

任何帮助，将不胜感激

代码：

C服务器主循环

```
while(1) {  // main accept() loop
    sin_size = sizeof their_addr;
    new_fd = accept(sockfd, (struct sockaddr *)&their_addr, &sin_size);
    if (new_fd == -1) {
        perror("accept");
        continue;
    }

    inet_ntop(their_addr.ss_family,
        get_in_addr((struct sockaddr *)&their_addr),
        s, sizeof s);
    printf("server: got connection from %s\n", s);

    if ((numbytes = recv(new_fd, buf, MAXDATASIZE-1, 0)) == -1) {
        perror("recv");
        exit(1);
    }

    buf[numbytes] = '\0';

    printf("msg size: '%d' bytes\n",numbytes);
    printf("received msg: %s\n",buf);
    char* array = (char*)buf;
    printf("as char array: %s\n", array);

    if (!fork()) { // this is the child process
        close(sockfd); // child doesn't need the listener
        int len = 0;
        if ((len = send(new_fd, buf, numbytes, 0)) == -1)
            perror("send");
        printf("sent %d bytes\n", len);
        close(new_fd);
        exit(0);
    }
    close(new_fd);  // parent doesn't need this
} 
```

Java 客户端

```
public void send(String text){
    Socket sock = null;
    DataInputStream in = null;
    DataOutputStream out = null;
    BufferedReader inReader = null;

    try {
        sock = new Socket(HOST, PORT);
        System.out.println("Connected");
        in = new DataInputStream(sock.getInputStream());
        out = new DataOutputStream(sock.getOutputStream());

        out.writeBytes(text + "\n");

        String res = "";

        //get msg from c server and store into res

        System.out.println("Response: " + res);
    } catch (UnknownHostException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        try {
            sock.close();
            //in.close();
            out.close();
        } catch (IOException e) {
            e.printStackTrace();
        }

    }
} 
```

# javascript - 在 HTML 页面中的 PDF 文档上添加触摸目标

> ID：13466479
> 
> 赞同：2
> 
> 时间：2012-11-20T04:09:10.990
> 
> 标签：javascript, html, pdf

我希望为我拥有的一组 PDF 文件添加一定程度的交互性，并希望将 PDF 文档嵌入网页中，然后覆盖触摸目标，以便我可以在它们上弹出一个弹出窗口。

实现这一目标的最佳方法是什么？我简要地研究了 Mozilla 的[pdf.js](http://mozilla.github.com/pdf.js/)，但那更专注于成为一个完整的 PDF 阅读器，并且在平板电脑上表现不佳。

是否有任何可靠的 PDF 到 HTML 库/转换器可以帮助我？PDF是相当基本的。或多或少只是网格中的一堆图像（可在 PDF 中单独选择）。

目前我正在 Photoshop 中打开 PDF，将其切片，然后将其导出为 HTML 表格，但我希望做一些更容易做的事情

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T18:29:01.917

我看不到解决服务器端解决方案的方法。下面是我在 PHP 中使用 ImageMagick 的方法：

```
<?php
$someFile = $_GET['pdf'];
try
{
    // Saving every page of a PDF separately as a JPG thumbnail
    $images = new Imagick($someFile);
    foreach($images as $i=>$image) {
        $desiredWidth = 1024;
        $image->thumbnailImage($desiredWidth,0);
        // Save the file to disk
        //$image->writeImage("page".$i.".jpg");
        // Or display it from this script:
        header('Content-Type: image/jpg');
        echo $image;
    }
    $images->clear();
}
catch(Exception $e)
{
    echo $e->getMessage();
}
?> 
```

如果您的 PDF 是单页，那么该脚本只会创建一个文件，或者如果您回显 $image，那么它只会将该页面显示为 JPG（或 PNG 或任何您想要的）。然后，您可以通过将脚本包含为 IMG 来根据需要在其周围标记 HTML：

```
<img src="myscript.php?pdf=somefile.pdf"/> 
```

现在，您可以在 PDF 上和周围使用任何您想要的 HTML 作为图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T14:16:42.350

几年前，我实现了一个名为 PDFWebViewer.NET 的商业解决方案来在浏览器中查看 PDF。它使用服务器端图像渲染 (.NET)，只使用 HTML 和 javascript 客户端。

我认为这与在没有任何插件的情况下在浏览器中查看 PDF 一样接近。由于它都是 HTML，因此您可以使用 div 覆盖页面并使用 javascript 将操作连接到该页面。事实上，这就是产品在 PDF 文档中呈现链接的方式。

这非常有效，因为通过使用相对定位，您可以确保在平移文档时链接保持在正确的位置。

该项目最近是开源的，但仍然依赖于商业组件。用开源 PDF 组件替换它应该不是很多工作。

该项目托管在 codeplex 上。[PDFWebViewer 1](http://pdfwebviewer1.codeplex.com/)是第一代，[WebViewer 2](http://webviewer2.codeplex.com/)是最新版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T12:29:24.740

我建议您使用[wkhtmltopdf](http://code.google.com/p/wkhtmltopdf/)。它允许您通过拍摄“屏幕快照”（简单解释）来处理任何动态转换为 pdf 格式的 Web 内容。例如，您可以像在任何网站上一样编写自己的 html 模板，然后用自定义数据填充它。您可以使用它生成例如发票。我现在使用它几个月了，没有任何问题。

它使用 webkit 渲染引擎和 qt 将 html 转换为 pdf 的简单 shell 实用程序。当然它的开源！

例子：

```
wkhtmltopdf www.myhomepage.com myhomepage.pdf 
```

# android - 通过 build.xml 和 ant.properties 中的更改生成 android 代码覆盖率

> ID：13466482
> 
> 赞同：2
> 
> 时间：2012-11-20T04:09:47.327
> 
> 标签：android, build, code-coverage, emma

我一直在尝试为我的 android 测试项目生成 android 代码覆盖率，该项目测试一个包含外部 jar 的 android 项目。当我运行命令时

`ant emma install debug test`

它仅显示了 android 项目的覆盖范围，但不包括包含的外部 jar 的包和功能。根据我的研究，我发现应该在`ant.properties`文件和`emma report tag`.`build.xml`

任何建议都非常受欢迎。

[编辑]

在进一步研究中，我浏览了一个博客，上面写着输入变量

```
tested.android.library.source.dir="path to external jars" in ant.properties 
```

并且应该在报告源路径中添加相同的变量

```
<emma>
                    <report sourcepath="${tested.project.source.absolute.dir}:${tested.project.lib.source.path.value}:${tested.android.library.source.dir}" verbosity="${verbosity}">
                        <!-- TODO: report.dir or something like should be introduced if necessary -->
                        <infileset file="${out.absolute.dir}/coverage.ec" />
                        <infileset file="${tested.project.out.absolute.dir}/coverage.em" />
                        <!-- TODO: reports in other, indicated by user formats -->
                        <html outfile="${out.absolute.dir}/coverage.html" />
                   </report>
  </emma> 
```

但仍然没有显示外部 jar 的功能和包。

我想知道我的 jar 不在 android 测试项目中，而是在被测试的 android 项目中。那么如何为`ant.properties`测试项目中的那些外部 jar 提供路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T10:51:48.967

经过大量搜索和尝试，终于在我的主项目中获得了我的外部 jar 包。刚刚在ant.properties和build.xml中输入了tested.android.library.source.dir

> ant.properties：tested.android.library.source.dir="jar 所在的主项目的 libs 文件夹路径" Build.xml：在报告标签中的 emma 标签下添加此变量，用冒号分隔。

现在转到命令提示符并运行

> 在主项目中：android 更新项目 -p。在测试项目中： android update test-project -m "Path of main project" -p 。

现在从 build.xml (sdk/tools/ant/build.xml) 复制测试目标并将其粘贴到测试项目的 build.xml 行上方

```
 <import file="${sdk.dir}/tools/ant/build.xml" /> 
```

不要忘记将版本标签更改为

现在再次打开命令提示符并运行：

> 在主项目中：ant emma debug install 在测试项目中：ant emma debug install test

您生成的代码覆盖率报告将包含外部 jar 的包

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T10:03:24.690

很长一段时间以来，我也在做同样的事情。请参阅[库项目的代码覆盖率报告](http://code.google.com/p/android/issues/detail?id=32421)

外部 jar 覆盖支持在 ADT-r20 中。我只能指出我工作的方向。我正在修改 ant 内部的 build.xml：

```
 <!-- This is macro that enable passing variable list of external jar files to ApkBuilder
     Example of use:
     <package-helper>
         <extra-jars>
            <jarfolder path="my_jars" />
            <jarfile path="foo/bar.jar" />
            <jarfolder path="your_jars" />
         </extra-jars>
     </package-helper> -->
<macrodef name="package-helper">
    <element name="extra-jars" optional="yes" />
    <sequential>
        <apkbuilder
                outfolder="${out.absolute.dir}"
                resourcefile="${resource.package.file.name}"
                apkfilepath="${out.packaged.file}"
                debugpackaging="${build.is.packaging.debug}"
                debugsigning="${build.is.signing.debug}"
                verbose="${verbose}"
                hascode="${manifest.hasCode}"
                previousBuildType="${build.last.is.packaging.debug}/${build.last.is.signing.debug}"
                buildType="${build.is.packaging.debug}/${build.is.signing.debug}">
            <dex path="${intermediate.dex.file}"/>
            <sourcefolder path="${source.absolute.dir}"/>
            <jarfile refid="project.all.jars.path" />
            <nativefolder path="${native.libs.absolute.dir}" />
            <nativefolder refid="project.library.native.folder.path" />
            <extra-jars/>
        </apkbuilder>
    </sequential>
</macrodef> 
```

我还没有运气。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-24T06:27:01.707

我为此苦苦挣扎了 2 天，最终弄明白了。第一篇文章中的代码片段仅从 emma 元数据文件和运行时覆盖文件生成仪器报告，但不对 jar 执行仪器。要检测代码，您将不得不操作字节码，就像 android ant build.xml 目标是如何做到的。看一下嵌套在 <-compile> 中的元素，您会看到评论，就像它只是检测类文件一样。为了检测罐子，向罐子中添加一个类路径之类的元素以及类的路径。

艾玛文档： [http ://emma.sourceforge.net/reference/ch02s03s02.html](http://emma.sourceforge.net/reference/ch02s03s02.html)

```
<emma enabled="${emma.enabled}" >
  <instr mode="fullcopy"
         outdir="${out.instr.dir}"
         merge="no"
         filter="${emma.filter}">
    <instrpath>
      <fileset dir="${out.dir}" includes="**/*.jar" />
    </instrpath>
  </instr>
</emma> 
```

在 Android 的 build.xml 中。只需删除 instrpath 属性并使其看起来像上面的示例。

```
 756                     <emma enabled="true">
 757                         <instr verbosity="${verbosity}"
 758                                mode="overwrite"
 759                                instrpath="${out.absolute.dir}/classes"
 760                                outdir="${out.absolute.dir}/classes"
 761                                metadatafile="${emma.coverage.absolute.file}">
 762                             <filter excludes="${emma.default.filter}" />
 763                             <filter value="${emma.filter}" />
 764                         </instr>
 765                     </emma> 
```

所以是这样的：（请原谅#s）

```
 756                     <emma enabled="true">
 757                         <instr verbosity="${verbosity}"
 758                                mode="overwrite"
 760                                outdir="${out.absolute.dir}/classes"
 761                                metadatafile="${emma.coverage.absolute.file}">
 759                                <instrpath>
 759                                     <pathelement path="${out.absolute.dir}/classes"/>
 759                                     <fileset dir="${you-class-path}"/>
 759                                          <include name="**/*.jar"/>
 759                                     </fileset>
 759                                </instrpath>
 762                             <filter excludes="${emma.default.filter}" />
 763                             <filter value="${emma.filter}" />
 764                         </instr>
 765                     </emma> 
```

# twitter - Twitter REST Api 1.1 发布友谊/创建

> ID：13466487
> 
> 赞同：2
> 
> 时间：2012-11-20T04:10:53.833
> 
> 标签：twitter, access-token

我试图通过使用 REST Api 1.1 和 PHP来实现 Twitter[友谊/创建。](https://dev.twitter.com/docs/api/1.1/post/friendships/create)但无论我如何尝试它都会返回

```
stdClass Object
(
    [errors] => Array
        (
            [0] => stdClass Object
                (
                    [message] => Bad Authentication data
                    [code] => 215
                )
        )
) 
```

我的代码是（使用 Abraham 库并将 twitterauth 更改为 v1.1）

```
$twitteroauth = new TwitterOAuth( $this->consumer_key, $this->consumer_secret, $oauth_token,     $oauth_token_secret);

$test_create = $twitteroauth->post('friendships/create',array('follow'=>true,'user_id'=>'2529416xx'));

print_r($test_create);exit; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:38:58.493

我不是专家（我遇到了同样的问题），但我认为你不应该更改 oauth 版本，因为它仍然是 1.0a。可以在此处找到更多信息[https://dev.twitter.com/docs/api/1.1/overview#Authentication_required_on_all_endpoints](https://dev.twitter.com/docs/api/1.1/overview#Authentication_required_on_all_endpoints)和此处[https://dev.twitter.com/docs/auth/authorizing-request](https://dev.twitter.com/docs/auth/authorizing-request) 更改仅在请求的 URL，例如：

`https://api.twitter.com/1.1/statuses/mentions_timeline.json`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-12T12:07:26.277

我也遇到了和你一样的问题。解决方案很简单：不要更改版本号（仍然是 1.0）并将主机更改为 $host = " [https://api.twitter.com/1.1/](https://api.twitter.com/1.1/) ";

那解决了我的问题！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-10T06:58:57.870

您可以尝试此代码在这里 your_screen_name 您需要传递您的 screen_name 而不是 your_user_id 您需要传递您的用户 ID

```
$connection = new TwitterOAuth(CONSUMER_KEY, CONSUMER_SECRET, $_SESSION['token'] , $_SESSION['token_secret']);

$connection->post('friendships/create', array('screen_name'=>'your_screen_name','user_id'=>'your_user_id','follow'=>'true')); 
```

# javascript - 用户删除离线数据时保留 Firefox 插件 localStorage

> ID：13466488
> 
> 赞同：2
> 
> 时间：2012-11-20T04:11:14.920
> 
> 标签：javascript, firefox-addon, local-storage

我以这种方式在我的 Firefox 插件中使用 localStorage：

```
var ioService = Components.classes['@mozilla.org/network/io-service;1'].getService(Components.interfaces.nsIIOService);
var scriptSecManager = Components.classes['@mozilla.org/scriptsecuritymanager;1'].getService(Components.interfaces.nsIScriptSecurityManager);
var domStorageManager = Components.classes['@mozilla.org/dom/storagemanager;1'].getService(Components.interfaces.nsIDOMStorageManager);
var uri = ioService.newURI('http://example.com/addon/', null, null);
var principal = scriptSecManager.getNoAppCodebasePrincipal ? scriptSecManager.getNoAppCodebasePrincipal(uri) : scriptSecManager.getCodebasePrincipal(uri);
var localStorage = domStorageManager.getLocalStorageForPrincipal(principal, ''); 
```

一切正常，但是当用户删除“离线数据”时，存储被清除。我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T07:53:55.160

使用首选项服务将数据存储在用户的配置文件中。

```
var prefService = Cc["@mozilla.org/preferences-service;1"].getService(Ci.nsIPrefService),
    prefs = prefService.getBranch("extensions.YOUREXTENSIONABBREVIATIONHERE.");

var stringValue = "My Name",
    booleanValue = true,
    numberValue = 55;

prefs.setCharPref("stringParam", stringValue);
prefs.setBoolPref("booleanParam", booleanValue);
prefs.setCharPref("numberParam", ''+numberValue);

prefService.savePrefFile(null);   // only to force an immediate save

stringValue = prefs.getCharPref("stringParam");
booleanValue = prefs.getBoolPref("booleanParam");
numberValue = parseInt(prefs.getCharPref("numberParam"), 10); 
```

将 defaults.js 文件放入您的 defaults/preferences 文件夹并为新用户初始化首选项。如果您尝试检索不存在的首选项并且无法检查它是否存在，则会收到错误消息。

看这里：

[https://developer.mozilla.org/en-US/docs/Adding_preferences_to_an_extension](https://developer.mozilla.org/en-US/docs/Adding_preferences_to_an_extension)

# android - 如何正确应用语言？

> ID：13466491
> 
> 赞同：1
> 
> 时间：2012-11-20T04:11:43.743
> 
> 标签：android

我在 android 2.2 上使用多种语言。我在每个活动的 onCreate 中更改语言，如下所示：

```
 Locale locale = new Locale("nl");
    Locale.setDefault(locale);
    Configuration config = new Configuration();
    config.locale = locale;
    getBaseContext().getResources().updateConfiguration(config,getBaseContext().getResources().getDisplayMetrics()); 
```

当然，我在调用 setContentView 并将 android:configChanges="locale" 添加到清单之前放置​​了这些代码。但是，当第一次显示启动器活动时，有些单词会正确更改为我想要的语言，但有些单词会保持英语。其他活动（不是启动器活动）更改的语言是可以的。当我从其他活动切换回启动器活动时，它现在将所有单词正确更改为我想要的语言。我不知道为什么启动器第一次启动器活动中有一些单词没有正确更改为我想要的语言。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T09:38:08.453

你为什么不让它更简单呢？

您可以在您的应用程序中创建不同的语言值目录（res/values-en、res/values-fr、res/values-nl 等），您将在其中存储与字符串键关联的语言值。

因此，一旦您的目录“values-en”创建完成，右键单击它，添加一个 Android xml 值文件，将其命名为 language.xml，然后单击下一步，然后在显示屏幕的左侧面板中选择配置“语言””然后点击完成。

然后在这个最近创建的文件中，为要翻译的每个字符串创建所有键值对。完成后，将您的 language.xml 文件复制到另一个其他 values-xx 目录中，并更改所有字符串的值。

因此，您在 values-en 中的 language.xml 文件将包含：

```
<string name="hello">Hello</string> 
```

values-fr 中的 language.xml 文件将是：

```
<string name="hello">Bonjour</string> 
```

然后要在您的活动中获取这些字符串值，只需调用

String helloString = getResources().getString(R.String.hello);

应用程序将根据设备语言配置自动加载正确的字符串资源

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T07:57:49.157

最后我找到了一个完全解决我的问题的解决方案。我发现语言环境是由系统自动重置的（或任何有能力改变语言环境的东西），这就是为什么我设置了默认语言环境但它不能正常工作。这是我的解决方案，您应该创建一个扩展应用程序的类，然后重写该方法，如下所示：

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
    // TODO Auto-generated method stub
    Locale locale = new Locale(YourDesired_langCode);
    newConfig.locale = locale;
    super.onConfigurationChanged(newConfig);

    Locale.setDefault(locale);
    getBaseContext().getResources().updateConfiguration(newConfig,getBaseContext().getResources().getDisplayMetrics());
} 
```

因此，每次在您的应用程序之外重置默认区域设置时，都会调用此方法，并且它将使用您所需的语言再次重置默认区域设置。现在它工作得很好。

# ember.js - 将类绑定到 TextField

> ID：13466493
> 
> 赞同：1
> 
> 时间：2012-11-20T04:12:04.283
> 
> 标签：ember.js

当其中的值无效时，我想自动突出显示 Ember.TextField。

我现在在我的模板中有这样的东西，但很丑：

```
{{#if view.fieldInvalid}}
    {{view Ember.TextField valueBinding="view.fieldValue" classNames="span1p5 highlight"}}
{{else}}
    {{view Ember.TextField valueBinding="view.fieldValue" classnames="span1p5"}}
{{/if}} 
```

有没有办法在 Ember.JS 中使用像 Ember.TextField 这样的内置视图来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T07:04:27.513

一种方法是添加具有计算属性的类名绑定

```
//First extend Ember.TextField in your view
validatingTextField = Ember.TextField.extend({
  //Now if isInvalid is true CSS class "highlight" is applied to text field
  /* other ways include 
     isValid::error-class error-class will be applied when isValid is false
     isValid:normal-class:error-class, normal-class is applied when isValid is true else error-class is applied
  */ 
  classNameBindings: ['isInvalid:highlight',':span1p5'],
  //If you have static classes you define them as :my-class-name
  isInvalid: function(){
    if(this.get('value').trim() === ""){
      return true;
    }else{
      return false;
    }
  }.property('value')
}) 
```

现在使用您的车把中定义的上述内容

```
{{view view.validatingTextField valueBinding="view.fieldValue"}} 
```

**重要** 上面的代码可能会满足您的需要，但如果有很多文本字段，可能会减慢您的应用程序，因为计算属性会针对值的每一次更改执行，最好有一个保存按钮操作，单击时可能会应用文本字段的 CSS 类如下

```
validatingTextField = Ember.TextField.extend({
  classNameBindings: ['isInvalid:highlight',':span1p5']
})

save: function(){
  //your code for save
  if(this.get('validatingTextField.value').trim()===""){
    this.get('validatingTextField').set('isInvalid', true);
  }
} 
```

# css - 将标签与按钮对齐

> ID：13466499
> 
> 赞同：5
> 
> 时间：2012-11-20T04:12:48.273
> 
> 标签：css, twitter-bootstrap

用小提琴更容易解释我需要什么：http: [//jsfiddle.net/mZrYG/1/](http://jsfiddle.net/mZrYG/1/)

如您所见，当输出屏幕完全展开时，登录按钮位于标签下方的行上。我试图让复选框左对齐，按钮右对齐在同一行。我的css有什么问题？

为了繁荣：

```
<div class="row">
   <div class="span3">
      <form class="signin" method="POST">
         <input type="text" placeholder="Username" name="username" />
         <input type="password" placeholder="Password" name="password" />
         <label class="checkbox">
         <input type="checkbox" name="form[remember]" /> Remember me
         </label>
         <button class="btn btn-mini btn-primary pull-right" type="submit">Sign in</button>
      </form>
   </div>
</div>​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T04:19:51.933

***[演示](http://jsfiddle.net/mZrYG/7/embedded/result/)***

你好现在习惯`display:inline-block`在你的**标签**

像这样

```
label {
    display: inline-block;
    margin-bottom: 5px;
    vertical-align: top;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T04:43:38.753

最左边的元素应该先写，所以我把它重新排列为 1\. 复选框/记住我 2\. 输入框 3\. 登录

您还必须确保所有框的宽度加起来小于 span12，因此我在上面的每个 1/2/3 项中添加了 span 类。

```
 <form class="signin" method="POST">
      <label class="checkbox span2">
     <input type="checkbox" name="form[remember]" /> Remember me
     </label>
     <input type="text" placeholder="Username" name="username" class="span3"/>
     <input type="password" placeholder="Password" name="password" class="span3"/>
      <button class="btn btn-mini btn-primary" type="submit">Sign in</button>
  </form> 
```

​​​​​​​​​​​​​​​</p>

因此，上面的框现在位于同一行，但您必须在每个 css 类（即复选框和 2 个输入）中使用“line-height”参数，以确保它们完全对齐。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T04:17:07.213

你可以这样做`float:left;`输入，标签，按钮

或添加类`fleft`

```
.fleft{
   float:left;
} 
```

或者如果你只想要这个

> ![在此处输入图像描述](../Images/63915039bca71ba4281ab3662173cbe0.png)

比尝试

```
<label style="float:left;" class="checkbox"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T09:46:17.167

选项1：

```
<label class="checkbox">
<input type="checkbox" name="form[remember]" /> Remember me 
<button class="btn btn-mini btn-primary" type="submit">Sign in</button>
</label> 
```

选项 2：

```
<label class="checkbox">
<input type="checkbox" name="form[remember]" /> Remember me 
<button class="btn btn-mini btn-primary pull-right" type="submit">Sign in</button>
</label> 
```

# php - 是否有任何服务器端标记聚类解决方案？

> ID：13466502
> 
> 赞同：0
> 
> 时间：2012-11-20T04:13:04.680
> 
> 标签：php, google-maps

我正在使用谷歌地图来显示很多标记。太多了，其实。我需要显示至少 20000 个标记，这使得包含所有这些标记（每个标记只有纬度、经度和 ID）的 JSON 相当庞大。为了避免向客户端发送这么多数据，我正在考虑某种形式的标记聚类。客户端有很多标记聚类库。但我需要的是服务器上的标记聚类，以减少服务器和客户端之间的流量。是否有任何可用的库，最好是 PHP 库？

* * *

我也听说过`FusionTablesLayer`Google Maps API 提供的 ，但我还没有从文档中弄清楚它是否只有助于减少加载时间或流量。它可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T04:48:22.620

虽然有点老文章，但此页面帮助您使用 FusionTables 和 FusionTablesLayer。 [https://developers.google.com/fusiontables/docs/articles/](https://developers.google.com/fusiontables/docs/articles/)

# c++ - C++ 程序为某些输入抛出正确的答案，而为其他输入抛出错误的答案。我怀疑数据类型溢出

> ID：13466508
> 
> 赞同：0
> 
> 时间：2012-11-20T04:13:33.047
> 
> 标签：c++, python, algorithm, dynamic-programming

我一直在尝试解决涉及组合学和动态编程的编程挑战。

[点击这里阅读问题](http://pastebin.com/KUtgpzGc)

好消息是我已经解决了它，但是对于某些输入，程序会抛出错误的答案。

该程序将两个数字作为输入。让`w = argv[1]`,`h = argv[2]`

我将以伪数学方式编写它以便于表示

例如下面的“公式”表示我的程序接受两个参数：w和h，输出为`x`

`T(w,h) = x`

我将用 表示理论结果，用 表示`T(w,h)`我的程序的结果`R(w, h)`。我 100% 确定这`T(w, h)`将永远是正确的答案。

我们走吧：

`T(10, 10) = 2` `R(10, 10) = 2`

`T(11, 10) = 2` `R(11, 10) = 288`**结果不同**

`T(12, 10) = 4` `R(12, 10) = 4`

`T(13, 10) = 4` `R(13, 10) = 4`

`T(14, 10) = 66` `R(14, 10) = 66`

`T(15, 10) = 290` `R(15, 10) = 290`

`T(20, 10) = 9594` `R(20, 10) = 98826` **结果不同**

`T(25, 10) = 419854` `R(25, 10) = 419854`

`T(30, 10) = 94082988` `R(30, 10) = 94082988`

`T(35, 10) = 5578404294` `R(35, 10) = 1283436998` **从这一点开始，结果总是不同的**

`T(36, 10) = 19730715436` `R(36, 10) = 18446744071965430572` **数据类型溢出？**

`T(37, 10) = 19730715436` `R(37, 10) = 18446744071965430572`

`T(38, 10) = 73368404198` `R(38, 10) = 393345822` **这个结果比上一个小，应该比上一个大。**

`T(39, 10) = 287780277370` `R(39, 10) = 17468538`

`T(40, 10) = 287780277370` `R(40, 10) = 17468538`

`T(41, 10) = 1095232487336` `R(41, 10) = 15826856`

`T(42, 10) = 4013757692218` `R(42, 10) = 18446744071672822074` **再次上升。花费大量时间进行计算**

我想这对于黑盒测试来说已经足够了，现在让我们看一下算法和实际代码。

第一个参数乘以 2，除以 3 并转换为整数。

例如

1.  argv [1](http://pastebin.com/KUtgpzGc) = 20

2.  20*2 = 40

3.  40/3 = 13**整数除法**

该值被传递给给我带来问题的函数。

让它`iNormalizedWidth`成为那个值。

如果`iNormalizedWidth`是奇数，程序会一直给我一个错误的答案。只给我以下数字的错误答案：

11、20、25、29、35-48。

（48 是我的程序将处理的最大值）。

这是我写的函数：

```
typedef long long int int64; 
#define BLOCK_A = 2;
#define BLOCK_B = 3;

/* main function, more macros, prototypes of other functions and
   irrelevant information for the scope of my question */

vector< vector<int64> > iTileBricks(int iWidth) {
    int iK, i, j, iMaxIterations, iEvenWidth, iOffset;
    vector<int64> viBrickRange;
    vector< vector<int64> > viBrickWall;    
    vector< vector<int64> > viResult;
    iEvenWidth = iWidth % 2;
    iK = (int)(iWidth/2);                                   // The amount of all possible combinations that follow the pattern nCr(iN-i,2i)
    iMaxIterations = iK/3 + 1;                              // By dividing all the possible combinations by 3, I am finding out how the maximum amount of iterations
    for(i = 0; i < iMaxIterations; i++) {
            iOffset = 2*i + iEvenWidth;    
            vector<bool> vAux(iK-i);                        // Creating a iK - i long vector. Test Case:
                                                            // Let  dOriginalPanelWidth = 48
                                                            //      iPanelWidth = 32
                                                            //      iK = iPanelWidth/2 = 16
                                                            //      iMaxIterations = iK/3  ~= 5
                                                            //      iK - i = 16 - i Where 1 <= i <= 5
                                                            //      For the first iteration of i the value of vAux will be: 
            if(iOffset <= iK-i) { 
                    fill(vAux.begin() + iOffset, vAux.end(), true); //      For the first iteration of i the value of vAux will be: 
            }   
                                                            //      vAux = [0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
            do {                                            // In this block of code I'm generating all the possible layouts of bricks that can build
                    for(j = 0; j < iK-i; j++) {             // a wall of 48" (or any value of width where  3 <= width <= 48 and (width % 1/2) == 0). 
                            if(vAux[j] == false) {
                                    viBrickRange.push_back(j);      // Generating n-tuples with all possible combinations
                            }   
                    }   
                    viBrickWall.push_back(viBrickRange);
                    viBrickRange.clear();
            } while(next_permutation(vAux.begin(), vAux.end()));

            for(unsigned int a=0; a < viBrickWall.size(); a++) {
                    vector<int64> viTmp(iK-i);
                    fill(viTmp.begin(), viTmp.end(), BLOCK_A);
                    for(unsigned int b = 0; b < viBrickWall[a].size(); b++) {
                            viTmp[viBrickWall[a][b]] = BLOCK_B;
                    }   
                    viResult.push_back(viTmp);
                    viTmp.clear();

            }   
            viBrickWall.clear();
            vAux.clear();
    }   
    return viResult; 
```

}

我找到了一个用python编写的程序，后一个函数只不过是从python函数到C++的一个端口。如果有帮助，仅供参考：

```
def all_single_rows(width):
    result = []
    n = width / 2 
    width_parity = width % 2 
    for i in range(n/3 + 1): 
            for bits in combinations(range(n-i), 2*i + width_parity):
                    s = [2] * (n-i)
                    for bit in bits:
                            s[bit] = 3 
                    result.append(s)
    return result 
```

这是一个相当大的功能（和问题），但我整天都在尝试调试它，但我一直无法提出解决方案。

生成最终值的计算更多，但这是导致其他函数失败的函数。

我想知道关于为什么某些输入的任何理论，答案飙升，然后又回来了。

当我将我的函数与用 python 编写的函数并排比较某些输入时，输出是相同的，而对于其他一些（如上所示）输出是不同的。

任何帮助将不胜感激。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T18:18:03.820

我已经解决了这个问题，答案很简单，对条件进行了细微的修改。

基本上，我正在生成一组额外的可能组合，为了摆脱它，我需要扩展我的初始条件。

基本上，紧随其后：

`vector<bool> vAux(iK-i);`

我需要将以下所有说明包含在以下条件中：

`if(iOffset <= iK-i)`

这解决了我的问题。

谢谢大家看我的问题！

# c++ - 继承和 C++ 的奇怪行为

> ID：13466511
> 
> 赞同：1
> 
> 时间：2012-11-20T04:14:04.723
> 
> 标签：c++, inheritance, virtual, subclass, superclass

所以我在尝试制作的一些类层次结构中出现了一些奇怪的行为。我正在实现图表，我正在通过制作一个将由 AdjacencyMatrixGraph 和 AdjacencyListGraph 实现的 Graph 类来做到这一点，因此它们可以被任何东西用作图表想要使用它们。

我在 Graph 中有一个纯虚函数，它被 AdjacencyMatrixGraph 中的函数覆盖，但是我有一个同名的非虚函数，但在 Graph 中有不同的签名。访问 AdjacencyMatrix 类时，我无法调用 Graph 类的非虚拟方法，但是当我重命名非虚拟方法时，它可以正常工作。

像这样：

当课程看起来像这样

```
class Graph
{
public:
   virtual void addVertex(Vertex vert, bool bidirectional)=0;
   void addVertex(unsigned int from, unsigned int to, double weight, bool bidirectional)
}

class AdjacencyMatrixGraph : public Graph
{
...
}

AdjacencyMatrixGraph test;
Vertex vert;
test.addVertex(vert,false);   //this statement compiles and works fine
test.addVertex(0,0,10.f,false)  //this statement fails to compile and says cadidates are addVertex(Vertex, bool) 
```

但是，如果我像这样重命名非虚拟方法

```
class Graph
{
public:
   virtual void addVertex(Vertex vert, bool bidirectional)=0;
   void addVert(unsigned int from, unsigned int to, double weight, bool bidirectional)
}

AdjacencyMatrixGraph test;
Vertex vert;
test.addVertex(vert,false);   //this statement compiles and works fine
test.addVert(0,0,10.f,false)  //this statement compiles and works fine 
```

这对我来说毫无意义，因为我认为编译器将 addVertex(Vertex, bool) 和 addVertex(unsigned int,unsigned int, double, bool) 视为两个完全不同的符号。所以一个不应该被继承覆盖，即使它不应该是可能的，因为符号采用不同的参数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T04:18:57.757

派生类中的定义*隐藏*了基类重载声明。

要将它们带入派生类的范围，请使用`using`声明，例如

```
using Graph::addVertex; 
```

在派生类中。

顺便说一句，这是一个[常见问题解答](http://www.parashift.com/c++-faq/hiding-rule.html)。在询问之前检查常见问题解答通常是个好主意。甚至只是一般情况下。:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T05:23:58.123

在这种情况下`AdjacencyMatrixGraph`隐藏`Graph::addVertex(unsigned int from, unsigned int to, double weight, bool bidirectional)`. 要将函数带入范围使用`using`声明，如下所示：

```
class A
{
public:
virtual void foo(int) = 0;
virtual void foo(std::string) { std::cout << "foo(string)" << std::endl; }
};

class B : public A
{
public:
using A::foo; //this unhides A::foo(std::string)
virtual void foo(int) { std::cout << "foo(int)" << std::endl; }
};

int main()
{
B b;
b.foo(1);
b.foo("hello");
} 
```

# android - 如何在 Facebook 墙上显示默认文本？

> ID：13466516
> 
> 赞同：0
> 
> 时间：2012-11-20T04:15:13.320
> 
> 标签：android, facebook, android-intent

我正在开发一个应用程序。在其中，我显示所有默认共享选项，例如`Bluetooth, E-Mail, Drive, Facebook, Twitter, Yahoo, FreeSMS`. 我在`All except Facebook`. 如何在 Facebook 墙上设置默认文本。请帮我解决这个问题。

我的代码如下：

```
public class MainActivity extends Activity implements OnClickListener {

private Button btn_share;
// private Dialog mdialog = null;
private String TAG = "This Message is from HardenUp.Thank You.";

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.activity_main);

    getInit();
}

private void getInit() {
    btn_share = (Button) findViewById(R.id.btn_share);
    btn_share.setOnClickListener(this);
}

public void onClick(View v) {
    if (v == btn_share) {
        // showDialog();

        Intent sharingIntent = new Intent(
                android.content.Intent.ACTION_SEND);

        sharingIntent.setType("text/plain");
        sharingIntent.putExtra(Intent.EXTRA_TEXT, TAG);
        sharingIntent.putExtra(Intent.EXTRA_SUBJECT, "HardenUp");
        startActivity(Intent.createChooser(sharingIntent, "Share Using"));
    }

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T05:06:03.117

```
public void postOnWall(String msg) {
        Log.d("Tests", "Testing graph API wall post");
         try {
                String response = mFacebook.request("me");
                Bundle parameters = new Bundle();
                //Here what you want to pass message
                parameters.putString("message", msg);
                //Here what you want to pass message
                parameters.putString("description", "test test test");
                response = mFacebook.request("me/feed", parameters, 
                        "POST");
                Log.d("Tests", "got response: " + response);
                if (response == null || response.equals("") || 
                        response.equals("false")) {
                   Log.v("Error", "Blank response");
                }
         } catch(Exception e) {
             e.printStackTrace();
         }
    } 
```

# c - C UDP套接字，在recvfrom检索之前将数据包存储在哪里？

> ID：13466519
> 
> 赞同：1
> 
> 时间：2012-11-20T04:15:45.617
> 
> 标签：c, sockets, udp, storage

我正在使用 UDP 套接字在 C 中创建一个小应用程序，并且我正在使用以下 recvfrom 函数：

```
int recvfrom(int s, void *buf, int len, unsigned int flags struct sockaddr *from, socklen_t *fromlen); 
```

我实际上想知道这个函数从哪里检索数据，因为在我的应用程序中，我收到不同的数据包，一旦我确定我收到了所有数据包，我就会使用循环来检索几个数据包。

它似乎有效（也许我很幸运；）但我真的不明白我的数据包之前存储在哪里，以便在我的循环中通过多次调用 recvfrom 来检索。

提前感谢您的帮助，祝您有美好的一天！亚历克斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T04:17:30.213

它们保存在内核中的某个内部缓冲区中。如果缓冲区填满（即如果您的应用程序停止调用`recvfrom`），内核将开始丢弃数据报。

重要的是要意识到两者`sendto`都`recvfrom`只是花哨`memcpy`的呼叫-它们实际上都没有“发送”或“接收”任何东西。Sendto 将数据复制到内核，*然后*内核尝试将其实际放入数据包中，依此类推。同样，在您调用`recvfrom`时，数据已经被接收，并且`recvfrom`仅**将其复制到您的用户空间缓冲区**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T05:52:59.950

所有接收到的数据包都存储在内核队列中。这是一个固定长度的队列。如果应用程序没有收到数据包，它将覆盖旧的。并更新其队列。因此，每当您调用 receivefrom 时，可用的旧数据包就会交付给您。

# javascript - jQuery插件同位素没有正确重新排列项目

> ID：13466521
> 
> 赞同：1
> 
> 时间：2012-11-20T04:15:49.807
> 
> 标签：javascript, jquery, jquery-isotope

我在我的一个项目中使用同位素，由于某种奇怪的原因，我无法让它像[演示](http://isotope.metafizzy.co/demos/elements-complete.html)一样工作（单击元素#26 Iron，你会注意到#30 Zinc 如何向上移动以填充大的空白空间块会离开）。

这是[我在哪里的 jsfiddle](http://jsfiddle.net/LBHHK/1/)。请注意，当您单击类别 2 时，类别 3 和 4 应该有两个黑色空间。

这是我的同位素js：

```
$(document).ready(function() {
  var $iContainer = $('#ls-container');

  $iContainer.isotope({
    itemSelector : '.ls-item',
    layoutMode : 'masonry',
    masonry : {
      columnWidth : 170
    }
  });

  $iContainer.delegate( '.ls-item', 'click', function() {
    $(this).addClass('large-item').siblings().removeClass('large-item');
    $iContainer.isotope('reLayout');

  });

});​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T12:10:40.150

您看到的差距正是 Masonry 布局算法的工作原理。[参见砌体问题 #141](https://github.com/desandro/masonry/issues/141)。

但是我们可以通过使用排序来解决这个问题。看到[这个小提琴](http://jsfiddle.net/desandro/LBHHK/5/)。该技术类似于[本文](http://metafizzy.co/blog/isotope-fixed-container/)

```
$iContainer.isotope({
  itemSelector : '.ls-item',
  layoutMode : 'masonry',
  masonry : {
    columnWidth : 170
  },
  getSortData: {
    largeFirst: function( $elem ) {
      var isLarge = $elem.hasClass('large-item');
      var index = $elem.index();
      return isLarge ? index - index % 3 - 0.5: index;
    }
  }
});

$iContainer.delegate( '.ls-item', 'click', function() {
  $(this).addClass('large-item').siblings().removeClass('large-item');
  // update sortData for all items
  $iContainer.isotope( 'updateSortData', $iItem )
        .isotope({ sortBy: 'largeFirst' });

}); 
```

# javascript - jQuery弹出框

> ID：13466523
> 
> 赞同：1
> 
> 时间：2012-11-20T04:16:02.880
> 
> 标签：javascript, jquery, html, css, popup

我是 JavaScript 和 Jquery 的新手。我在网上搜索了 Jquery 弹出示例。我希望消息说“我们的网站尚未完成，但请随意浏览我们拥有的内容。” 我将包含我找到的代码示例，但它看起来很奇怪。我不确定函数的名称是什么以及如何使用 window.onload = function(); 执行它 代码。我还想要一个关闭文本框的“关闭”按钮。这是它应该是什么样子：[http ://demo.tutorialzine.com/2010/12/better-confirm-box-jquery-css3/](http://demo.tutorialzine.com/2010/12/better-confirm-box-jquery-css3/)

这是第一部分：

```
 (function($){

    $.confirm = function(params){

        if($('#confirmOverlay').length){
            // A confirm is already shown on the page:
            return false;
        }

        var buttonHTML = '';
        $.each(params.buttons,function(name,obj){

            // Generating the markup for the buttons:

            buttonHTML += '<a href="#" class="button '+obj['class']+'">'+name+'<span></span></a>';

            if(!obj.action){
                obj.action = function(){};
            }
        });

        var markup = [
            '<div id="confirmOverlay">',
            '<div id="confirmBox">',
            '<h1>',params.title,'</h1>',
            '<p>',params.message,'</p>',
            '<div id="confirmButtons">',
            buttonHTML,
            '</div></div></div>'
        ].join('');

        $(markup).hide().appendTo('body').fadeIn();

        var buttons = $('#confirmBox .button'),
            i = 0;

        $.each(params.buttons,function(name,obj){
            buttons.eq(i++).click(function(){

                // Calling the action attribute when a
                // click occurs, and hiding the confirm.

                obj.action();
                $.confirm.hide();
                return false;
            });
        });
    }

    $.confirm.hide = function(){
        $('#confirmOverlay').fadeOut(function(){
            $(this).remove();
        });
    }

})(jQuery); 
```

这是第二部分：

```
$(document).ready(function(){

    $('.item .delete').click(function(){

        var elem = $(this).closest('.item');

        $.confirm({
            'title'     : 'Delete Confirmation',
            'message'   : 'You are about to delete this item. <br />It cannot be restored at a later time! Continue?',
            'buttons'   : {
                'Yes'   : {
                    'class' : 'blue',
                    'action': function(){
                        elem.slideUp();
                    }
                },
                'No'    : {
                    'class' : 'gray',
                    'action': function(){}  // Nothing to do in this case. You can as well omit the action property.
                }
            }
        });

    });

});

            $(markup).hide().appendTo('body').fadeIn();

            var buttons = $('#confirmBox .button'),
                i = 0;

            $.each(params.buttons,function(name,obj){
                buttons.eq(i++).click(function(){

                    // Calling the action attribute when a
                    // click occurs, and hiding the confirm.

                    obj.action();
                    $.confirm.hide();
                    return false;
                });
            });
        }

        $.confirm.hide = function(){
            $('#confirmOverlay').fadeOut(function(){
                $(this).remove();
            });
        }

    })(jQuery); 
```

编辑：我收到消息显示在加载。我将第二部分中的代码更改为

> $('.item .delete').ready(function(){

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T04:32:10.280

像对话框一样的窗口，请看这张图：

![在此处输入图像描述](../Images/b633afd6bd01086a64634f3eca0af0b4.png)

请检查这个例子：[http ://www.ericmmartin.com/projects/simplemodal/](http://www.ericmmartin.com/projects/simplemodal/)

有各种类型的流行模型：[http ://www.ericmmartin.com/projects/](http://www.ericmmartin.com/projects/)

和编码示例：[http ://www.ericmmartin.com/projects/simplemodal/#examples](http://www.ericmmartin.com/projects/simplemodal/#examples)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T04:35:25.267

把它放在页面上。

确保`first part`您的问题也包括在内。

它将在页面中心创建一个带有消息和关闭按钮的对话框。

您也可以更改标题，我只是添加了一个占位符。

```
$(document).ready(function(){
  $.confirm({
    'title'     : 'Heading Goes Here',
    'message'   : 'Our website is not yet complete, '
                  + 'but feel free to browse what we have.',
    'buttons'   : {
        'Close'   : {
          'class' : 'blue',
          'action': function(){}  // Nothing to do in this case.
        }
    {
  });

}); 
```

# iphone - 使用 xib 和通过代码添加的区别 - iPhone

> ID：13466524
> 
> 赞同：3
> 
> 时间：2012-11-20T04:16:06.610
> 
> 标签：iphone, ios, xib

使用 xib 和通过代码添加页面元素有什么区别？

如果我使用的是 xib，如何分配内存？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T07:53:36.063

> 使用 xib 和通过代码添加页面元素有什么区别？

我所知道的唯一真正的区别是使用代码非常棒，建议初学者使用，以便他们了解 UIKit 的工作原理。

> 如果我使用的是 xib，如何分配内存？

就像您手动创建对象一样，除了例如，执行的不是您的视图控制器`[[UIImageView alloc] init]`而是 UIKit 中的默认工厂类（很可能是 的一些私有子类`NSCoder`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T08:02:01.523

使用 XIB 与使用代码创建/布局对象之间有一个主要的非明显区别：Interface Builder 并不为每个接口类类型的每个属性提供设置——对于某些属性，您只需要使用代码。

有些事情在界面构建器中是困难/繁琐甚至不可能完成的，但在代码中却是微不足道的。至少在 ios3/4 时代，设置导航控制器以及在界面构建器中自定义其标题栏是一件非常痛苦的事情——我一直为此使用代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T07:37:14.763

由于 XIB 仅由序列化对象组成，因此在分配对象后，使用 Interface Builder 或在代码中实现接口对象不会对内存使用产生影响。每种方法都有其优点和缺点。首先，您可能会发现通过在代码中创建界面对象可以更好地控制界面的行为和外观。而使用 Interface Builder 可以使布局对象的任务更容易，因为它的图形界面。

# java - 无法从 android 中的 tomcat 服务器访问我的 WSDL 文件

> ID：13466525
> 
> 赞同：0
> 
> 时间：2012-11-20T04:16:15.203
> 
> 标签：java, android, apache, tomcat, android-ksoap2

我必须开发一个 android 应用程序。该应用程序执行从 mysql 数据库中检索数据并显示在 android 模拟器和 android 设备上。

首先，我必须在 localhost 上设置 tomcat 服务器并在 localhost 上运行这些 wsdl 文件，这意味着检索数据已成功显示在模拟器和 android 设备上。

另外我必须在远程设置tomcat服务器。在这里我上传了我的war文件并获取了wsdl文件。现在我必须放置这些wsdl URL意味着在我的模拟器和android设备上都出现黑屏。

我的控制台窗口显示以下错误：

```
11-19 19:43:26.331: W/System.err(6323): java.lang.ClassCastException: org.ksoap2.serialization.SoapObject
11-19 19:43:26.341: W/System.err(6323):     at com.retailer.client.RetailerActivity.onCreate(RetailerActivity.java:36)
11-19 19:43:26.341: W/System.err(6323):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
11-19 19:43:26.341: W/System.err(6323):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
11-19 19:43:26.341: W/System.err(6323):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
11-19 19:43:26.341: W/System.err(6323):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
11-19 19:43:26.341: W/System.err(6323):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
11-19 19:43:26.341: W/System.err(6323):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-19 19:43:26.341: W/System.err(6323):     at android.os.Looper.loop(Looper.java:123)
11-19 19:43:26.341: W/System.err(6323):     at android.app.ActivityThread.main(ActivityThread.java:4627)
11-19 19:43:26.341: W/System.err(6323):     at java.lang.reflect.Method.invokeNative(Native Method)
11-19 19:43:26.341: W/System.err(6323):     at java.lang.reflect.Method.invoke(Method.java:521)
11-19 19:43:26.341: W/System.err(6323):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
11-19 19:43:26.341: W/System.err(6323):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
11-19 19:43:26.341: W/System.err(6323):     at dalvik.system.NativeStart.main(Native Method) 
```

我该如何解决这个错误。请帮助我。

这是我的代码：

```
 public class RetailerActivity extends Activity {
private static final String SOAP_ACTION = "http://ws.testprops.com/customerData";
private static final String METHOD_NAME = "customerData";
private static final String NAMESPACE = "http://ws.testprops.com";
   //private static final String URL = "http://10.0.0.133:8089/TestPrompts/services/Fetch?wsdl";
private static final String URL = "http://87.76.29.180:8080/TestPrompts/services/Fetch?wsdl";
/*
private static final String SOAP_ACTION = "http://xcart.com/customerData";
private static final String METHOD_NAME = "customerData";
private static final String NAMESPACE = "http://xcart.com";
private static final String URL = "http://10.0.0.133:8089/XcartLogin/services/Fetch?wsdl";*/

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME); 
    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.setOutputSoapObject(request);
    HttpTransportSE ht = new HttpTransportSE(URL);
    try {
        ht.call(SOAP_ACTION, envelope);
        SoapPrimitive response = (SoapPrimitive)envelope.getResponse();
        SoapPrimitive s = response;
        String str = s.toString();
        String resultArr[] = str.split("&");//Result string will split & store in an array 
        TextView tv = new TextView(this);
        for(int i = 0; i<resultArr.length;i++){ 
        tv.append(resultArr[i]+"\n\n"); 
       }
        setContentView(tv);
} catch (Exception e) {
    //Log.e("Error : " , "Error on soapPrimitiveData() " + e.getMessage());
        e.printStackTrace();
}
    }
} 
```

这是我的第 36 行：

```
 SoapPrimitive response = (SoapPrimitive)envelope.getResponse(); 
```

我必须把这个网址

`private static final String URL = "10.0.0.133:8089/TestPrompts/services/Fetch?wsdl";`

意味着正在检索数据。这个 wsdl 文件**在 localhost 的 Tomcat 服务器上**运行。

但我必须把这些网址的意思

`private static final String URL = "87.76.29.180:8080/TestPrompts/services/Fetch?wsdl";`

这次只是在错误之上。这个 wsdl 文件**在远程的 Tomcat 服务器上**运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T08:13:34.823

尝试使用 AndroidHttpTransportSE 代替 HttpTransportSE 并在创建信封后添加此语句。信封.dotNet=真；

为了获得更好的结果，请查看本[教程](https://stackoverflow.com/questions/8767389/how-to-send-soap-request-and-parse-soap-response-in-xml-format-in-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T05:14:24.517

我相信你没有得到原始类型。尝试这个：

`SoapObject response = (SoapObject)envelope.getResponse();`

请参阅：[尝试构建正确的 SOAP 请求](https://stackoverflow.com/questions/11763092/trying-to-build-a-correct-soap-request/13088110#13088110)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T07:23:52.790

我得到了解决方案。因为我的数据库只有静态权限..我必须授予访问数据库全局权限意味着它运行良好。

# windows - 将图像数据写入文本文件以创建 BMP 文件

> ID：13466527
> 
> 赞同：0
> 
> 时间：2012-11-20T04:16:37.433
> 
> 标签：windows, image, text, rgb, bmp

我在 BMP 中有 1x1 像素图像。我在记事本中打开它。选择 ALL 并将整个数据粘贴到串行端口监视器上，以查看文件中的确切字符..whatever... 我只需复制在记事本中打开的 BMP 文件的数据并将其粘贴到另一个文本文件中，将其另存为 . BMP 扩展。但是没有形成图像。作为无效的 BMP 文件。当我通过右键单击检查两个图像（原始图像和通过将数据复制到新文件创建的图像）的属性时，预先信息存在差异。有什么问题？我怎样才能做到这一点。我的控制器中有图像数据，想将其作为 bmp 图像保存在 SD 卡上......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T04:22:36.217

`cp ./image.bmp ./image-copy.bmp`

这将允许您将位图复制到另一个文件，该文件包含类 Unix 操作系统上原始位图的有效副本。在 Windows 中，使用`copy file.bmp file-copy.bmp`.

如果您想查看文件的实际二进制数据，您正在寻找的是一个十六进制编辑器。记事本将某些不可打印的字符表示为完全不同的可打印字符。当您在记事本中打开任何二进制数据文件并将其内容复制到剪贴板时，您实际上并没有复制二进制数据。您正在复制 Notepad 将不可打印数据转换为可查看数据的尝试。

# r - igraph 半径和直径

> ID：13466530
> 
> 赞同：0
> 
> 时间：2012-11-20T04:17:01.720
> 
> 标签：r, igraph

我对 igraph 函数有一个奇怪的问题

我有一个密度非常高（0.4）的无向图（N=423）。为了测试我从 igraph 获得的值，我正在使用 Gephi。

我已经检查过 Gephi，它们报告的度数和直径都相同，但 igraph 报告的半径和偏心率完全错误，它们应该是更高的值。另外，半径总是小于直径，对吧？这里更大:)

```
> sg <- simplify(graph.edgelist(edges, directed=F))
> radius(sg)
[1] 8
> diameter(sg)
[1] 3
head(eccentricity(sg))
[1] 10 11 10 12 11 14
> str(sg)
IGRAPH U--- 423 41064 -- 
+ edges:
1 --   3   4   6   8   9  15  25  26  28  30  37  38  41  42  47  48  49  50  53  58  63  66  68  69  71  72  76  81  83  87  88  90  95
....etc...
....etc... 
```

Gephies 偏心率值都是 2s 和 3s，这是预期的，因为直径是 3 :)

我不明白我做错了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T08:41:57.957

似乎是`eccentricity`例程中的一个错误（`radius`只是调用`eccentricity`，所以这两个问题可能是相关的）。作为一种解决方法，您可以使用`shortest.paths`（这似乎工作正常）然后取行最大值来获得偏心率分数。半径只是最小的偏心率。

**更新：您可以在**[此处](https://bugs.launchpad.net/igraph/+bug/1081021)跟踪错误报告的进度。

# c# - 何时在 C# 中释放线程局部变量

> ID：13466533
> 
> 赞同：4
> 
> 时间：2012-11-20T04:17:21.863
> 
> 标签：c#

在以下代码中：

```
public void f() 
{
    List l1<int> = new List<int>();
    List l2<int> = new List<int>();
    //.. populate l1 and l2
    ThreadPool.QueueUserWorkItem(new WaitCallback(delegate(object state)
    {
       // use l1 and l2
       // force gc.collect l1 and l2?
    }));
    //..
} 
```

l1 和 l2 是线程本地非常大的列表。他们什么时候有资格进行垃圾收集？当线程完成执行块时，它们是否符合条件？

线程完成后强制对 l1 和 l2 进行垃圾收集是个好主意吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T04:21:44.693

首先，调用 GC.Collect 只会安排垃圾收集。如果某些东西仍在被引用，那么它仍然不会被收集。

至于您的回答，我相信一旦不再引用它们就会收集这些，这将要求完成委托并且不再引用它们。

所以，如果它是一个简单的用法，我相信委托完成后会被清理，这将允许清理列表

但是，您可能会陷入未清理匿名委托的陷阱，但我认为 ThreadPool 应该处理这个问题。如果没有，那么您可能对[这个 SO 感兴趣，尤其是 Rory 的回答](https://stackoverflow.com/questions/371109/garbage-collection-when-using-anonymous-delegates-for-event-handling)

# java - ScrollPane Java Swing 中的 GridbagLayout

> ID：13466540
> 
> 赞同：0
> 
> 时间：2012-11-20T04:18:50.313
> 
> 标签：java, swing, jscrollpane, gridbaglayout

我刚刚在 GridBagLayout 中为拆分窗格制作了一个布局。工作完美，看起来不错。

然后我只需要垂直添加一个滚动条。因此，我现在已经这样做了。然而，布局不像以前那样“调整大小”。它现在延伸到显示的窗格区域。

```
JSplitPane VPane = new JSplitPane(JSplitPane.VERTICAL_SPLIT,(new class1()),new JScrollPane(new class2(),ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS,ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER)); 
```

我需要让它看起来像以前一样。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T05:03:11.250

您所做的只是“隐藏”水平滚动条。这对管理组件的视口没有影响。

尝试将现有布局包装在`Scrollable`界面中。如果您不想自己实现一个，则可以改用包装容器...

```
public class ScrollableWrapper extends JPanel implements Scrollable {

    private Component wrapper;

    public ScrollableWrapper(Component wrapper) {
        setLayout(new BorderLayout());
        add(wrapper);
        this.wrapper = wrapper;
    }

    @Override
    public Dimension getPreferredScrollableViewportSize() {
        return wrapper.getPreferredSize();
    }

    @Override
    public int getScrollableUnitIncrement(Rectangle visibleRect, int orientation, int direction) {
        return 64;
    }

    @Override
    public int getScrollableBlockIncrement(Rectangle visibleRect, int orientation, int direction) {
        return 64;
    }

    @Override
    public boolean getScrollableTracksViewportWidth() {
        return true;
    }

    @Override
    public boolean getScrollableTracksViewportHeight() {
        return false;
    }

} 
```

然后，我们将其添加到滚动窗格中...

```
JSplitPane VPane = new JSplitPane(JSplitPane.VERTICAL_SPLIT,new class1(),new JScrollPane(new ScrollableWrapper(class2()))); 
```

# php - 异步数据加载后获取网页的来源

> ID：13466542
> 
> 赞同：0
> 
> 时间：2012-11-20T04:18:53.353
> 
> 标签：php, javascript

我正在尝试在加载异步收集的内容后检索另一个域上页面的页面源。

我试过 PHP 的**file_get_contents**，但是在加载异步数据后这并没有获取源代码。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T04:24:25.420

使用 PHP`file_get_contents`甚至使用`cURL`. 您必须考虑其他选择。

比如，PHP 的 V8js 模块：[http ://php.net/manual/en/book.v8js.php](http://php.net/manual/en/book.v8js.php)

或者您可以尝试使用[Selenium](http://seleniumhq.org/)。

您正在寻找的基本上是一种在 php.ini 中执行 JavaScript 的方法。

当然你可以随时查看页面上的异步请求，也可以提出自己的请求！

# php - 无论如何要使用 php 获取 Web 浏览器窗口句柄？

> ID：13466551
> 
> 赞同：1
> 
> 时间：2012-11-20T04:19:32.373
> 
> 标签：php, hwnd

我想知道是否有一种方法可以使用 php 获取当前的 Web 浏览器窗口句柄（HWND），就像获取浏览器信息一样。

我不想使用 COM 类获得这样的浏览器句柄

```
$Browser = new COM("InternetExplorer.Application");
$Browserhandle = $Browser->HWND; 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-20T08:24:34.360

尝试使用`get_browser()`. [在这里查看](http://php.net/manual/en/function.get-browser.php)。

# c++ - 如何在 Windows 和 linux 之间移植的 Visual Studio C++ 中进行串口编程？

> ID：13466555
> 
> 赞同：0
> 
> 时间：2012-11-20T04:19:54.417
> 
> 标签：c++, linux, embedded, visual-studio-2012, serial-port

我正在编写一个需要访问串口的测试程序。我现在在 Visual Studio 2012 中做，但我想稍后移植到 Linux。（用于我的 Pandaboard）
你能建议我一种访问在 Win 和 Linux 之间具有几乎相同接口的串行端口的方法吗？
我以前在 Labview 做，但现在我想转向 C++
非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T05:03:42.697

[Boost.ASIO](http://www.boost.org/libs/asio/)文档齐全，测试良好，经过数千人同行评审，全面支持跨平台方式的串口通信。具体的文档可以在[这里](http://www.boost.org/doc/html/boost_asio/overview/serial_ports.html)找到。

话虽如此，它确实假设现代 C++ 的技能水平适中，所以如果您是该语言的新手，那么学习曲线可能会有点陡峭。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T04:28:36.280

串行端口接口没有太多...您应该能够将所有实现细节包装在它下面。

```
class ISerialPort
{
public:
   void open(const std::string &serialPortName) = 0;
   void close() = 0;

   void write(const vector<char> &data) = 0;
   vector<char> read(size_t bytesToRead) = 0;
} 
```

尽管它不是一个“接口”，因为它是两个不同平台将实现的通用标头。

编辑：Linux下的串行端口通过打开设备节点来访问。如 /dev/ttyS0（串行端口 0）。在 Windows 中，您正在做同样的事情，但不是打开设备节点，而是打开文件（COM 端口）。如COM1。

在 linux 中，您正在深入研究与平台相关的问题，例如打开设备节点。在 Linux 中，它将打开文件（COM 端口）。

谷歌 c++ windows/linux 串口并返回一个更具体的问题。您刚刚询问了一个界面；）

# c++ - 对齐存储和严格别名

> ID：13466556
> 
> 赞同：29
> 
> 时间：2012-11-20T04:20:19.587
> 
> 标签：c++, undefined-behavior, language-lawyer, strict-aliasing, type-punning

我目前正在使用aligned_storage 来实现类似于boost::optional 的“可选”类型。为了做到这一点，我有一个像这样的班级成员：

```
typename std::aligned_storage<sizeof(T), std::alignment_of<T>::value>::type t_; 
```

我使用placement new 来创建对象，但是我没有将返回的指针存储在任何地方。相反，我在我的所有成员函数中访问对象的底层类型（显然，通过也存储在我的 Optional 类型中的布尔标志进行检查以确保对象有效）：

```
T const* operator->() const {
    return static_cast<T const*>(static_cast<void const*>(&t_));
} 
```

我的问题是这是否安全。我的理解是，我对放置 new 的使用改变了对象的“动态类型”，只要我继续使用该类型访问内存就可以了。但是，我不清楚是否必须保留从放置 new 返回的指针，或者是否允许我在需要访问它时只转换为基础类型。我已经阅读了 C++11 标准的第 3.10 节，但是我的标准语不够流利，无法确定。

如果可能的话，如果您能在回答中参考标准，我会感觉更好（它可以帮助我晚上睡觉：P）。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-28T07:25:18.593

ABICT 您的使用是安全的。

*   类型 T 的对象的放置 new 将创建一个从传入的地址开始的对象。

§5.3.4/10 说：

> new 表达式将请求的空间量作为 std::size_t 类型的第一个参数传递给分配函数。该参数不应小于正在创建的对象的大小；只有当对象是一个数组时，它才可能大于正在创建的对象的大小。

对于非数组对象，分配的大小不能大于对象的大小，因此对象表示必须从分配内存的开头开始才能适合。

Placement new 返回传入的指针（参见第 18.6.1.3/2 节）作为“分配”的结果，因此构造对象的对象表示将从该地址开始。

*   `static_cast<>``T*`如果对象是完整对象，则类型之间的隐式转换以及`void*`指向对象的指针和指向其存储的指针之间的转换。

§4.10/2 说：

> “指向 cv T 的指针”类型的纯右值，其中 T 是对象类型，可以转换为“指向 cv void 的指针”类型的纯右值。将“指向 cv T 的指针”转换为“指向 cv void 的指针”的结果指向类型 T 的对象所在的存储位置的开始，就好像该对象是类型 T 的最派生对象 (1.8) [...]

这将隐式转换定义为按说明进行转换。进一步的 §5.2.9[expr.static.cast]/4 定义`static_cast<>`了显式转换，其中存在隐式转换与隐式转换具有相同的效果：

> 否则，对于某些发明的临时变量（8.5） ，如果声明 格式正确，则表达式`e`可以`T` 使用`static_cast`形式的 a 显式转换为类型。这种显式转换的效果与执行声明和初始化，然后使用临时变量作为转换的结果相同。[...]`static_cast<T>(e)``T t(e);``t`

对于逆`static_cast<>`（从`void*`到`T*`），第 5.2.9/13 节规定：

> “指向 cv1 void 的指针”类型的纯右值可以转换为“指向 cv2 T 的指针”类型的纯右值，其中 T 是对象类型，而 cv2 与 cv1 具有相同的 cv 限定或大于 cv1 的 cv 限定。[...] 类型指针的值转换为“指向 cv void 的指针”并返回，可能具有不同的 cv 限定，应具有其原始值。

因此，如果您有一个`void*`指向`T`对象存储的指针（这是从 a`T*`到对象的隐式转换产生的指针值，那么 a`static_cast`到 a`T*`将产生一个指向该对象的有效指针。

回到你的问题，前面的几点暗示如果你有

```
typename std::aligned_storage<sizeof(T), std::alignment_of<T>::value>::type t_;
void * pvt_ = &t_;

T* pT = new (&t_) T(args...);
void * pvT = pT; 
```

然后

*   的存储`*pT`正好覆盖 的存储的第一个 size(T) 字节`t_`，因此`pvT == pvt_`
*   `pvt_ == static_cast<void*>(&t_)`
*   `static_cast<T*>(pvT) == pT`
*   合起来产生`static_cast<T*>(static_cast<void*>(&t_)) == pT`

# .net - ado 连接池连接与断开连接

> ID：13466561
> 
> 赞同：0
> 
> 时间：2012-11-20T04:21:36.213
> 
> 标签：.net, ado.net, dataset, sqldatareader

在开枪并标记重复之前，我搜索了一个没有明确答案的运气。

背景：
我和一位同事在数据阅读器方面与我讨论了数据阅读器与数据集。

归根结底，我喜欢数据阅读器，因为它轻量级，而我的同事喜欢数据集，因为它没有连接。

他的理由是，由于数据集断开连接，.net 将填充数据集并将连接释放回池中（我们的服务器每天获得数百万次点击）。

他还表示，即使我将 sqlconnection 和 datareader 包装在 using 语句中，连接也不会立即释放，因为 using 语句最终只是在执行 try catch 并调用 connection.close 和 dispose，这很糟糕因为我们必须等待垃圾收集器运行，谁知道这需要多长时间。同时，连接不会返回到池中。

我的问题：
他是对的吗？并且使用数据读取器会导致池中的连接收缩，直到垃圾收集运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T06:35:11.140

他所说的实际上是有道理的，因为我在我公司目前正在运行的一个项目中体验过它，虽然开发人员已经编写了关闭连接的代码，但连接仍然是打开的，而且很多时候我们得到了连接池这就是我们开始在所有新项目中使用断开连接架构的原因。

# iphone - 奇怪的 __NSCFString 错误

> ID：13466565
> 
> 赞同：0
> 
> 时间：2012-11-20T04:22:13.443
> 
> 标签：iphone, objective-c, ios, nsstring, nscfstring

我收到了一些有关此错误的报告：

```
-[__NSCFString replaceOccurrencesOfString:withString:options:range:]: nil argument 
```

我在我的代码中搜索了这种方法，但我并没有全部使用它。我的假设是另一种方法在内部使用**replaceOccurrencesOfString:withString:options:range:**。我对么？哪些方法可能对此负责？

请注意，我无法提供完整的堆栈跟踪，因为此错误发生在异常处理程序中。我也无法重现此问题。

# java - Eclipse android sdk bundle 无法打开 Android SDK Manager

> ID：13466572
> 
> 赞同：5
> 
> 时间：2012-11-20T04:22:58.933
> 
> 标签：java, android, eclipse, eclipse-plugin

我在我的新笔记本（Window 7 64 位）中下载了新的 Android 和 Eclipse 包，然后我打开了以前在 PC 上工作的旧文件。当我打开时，它显示了一些关于版本 API 的错误，我应该在 SDK 中修复它管理器，但是当我尝试打开 SDK 管理器时，它不会运行并在控制台中显示此错误。

```
[2555-11-20 10:27:27 - Dex Loader] SecurityException: Unable to find field for dex.jar
[2555-11-20 10:36:02 - SDK Manager] [SDK Manager] Failed to convert path to a short DOS path: C:\Windows\system32\java.exe 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-20T04:31:35.103

里面有`android_sdk\tools\lib`一个名为`find_java.bat`. 它调用`find_java.exe -s`以查找潜在 Java 位置的列表。像这样运行`exe`文件会返回我一直看到的错误：

```
Failed to convert path to short DOS path: c:\windows\system32\java.exe 
```

`-s`简称。在没有导致 find_java.exe 工作的情况下运行它`-s`，导致 find_java.bat 工作，导致其他所有工作。所以修复是编辑 find_java.bat，并删除`-s`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-18T03:48:15.173

试试这个：

1.  转到 adt-bundle-windows\sdk\tools

2.  右键单击`android.bat`并说“以管理员身份运行”

它将打开 sdk 管理器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T08:37:42.217

删除了所有现有的 eclipse 和 android 版本

我下载了最新版本的 eclipse 和最新的 android SDK ..并安装了它们..

即使尝试了各种博客和链接中提到的所有程序，我也花了 30 分钟，这比坚持超过 3 天要好...

尝试以上作为最后一个选项

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-13T02:44:09.673

需要 SDK 的帮助，它会启动，但 dos 会快速打开和关闭。我在我的 Windows 32 位桌面上安装了 7.1 79 Java。我安装了 Android 和 Eclipse 包。我尝试`android.bat`由管理员运行。我在 Windows 上试过这个。

您需要创建一个名为的环境变量`JAVA_HOME`并将其设置为您的 JDK 安装目录。

首先，记下您的 JDK 安装目录。默认值为`c:\Program Files\Java\jdk1.8.0_{xx}`，其中 {xx} 是最新的升级号。在继续之前，通过计算机验证您的 JDK 安装目录非常重要。

启动 CMD shell，并发出命令`set JAVA_HOME`检查变量`JAVA_HOME`是否已设置：

```
> set JAVA_HOME 
```

`JAVA_HOME`未定义环境变量如果`JAVA_HOME`设置了，请检查它是否正确设置为您的 JDK 安装目录。否则，进入下一步。

`JAVA_HOME`在 Windows 2000/XP/Vista/7/8 中设置环境变量：

按钮`Start`⇒控制面板⇒系统⇒（Vista / 7/8）高级系统设置⇒切换到“高级”选项卡⇒环境变量⇒系统变量⇒“新建”（或“编辑”进行修改）⇒在“变量名”中，输入“JAVA_HOME” ⇒ 在“变量值”中，输入您的 JDK 安装目录（例如，“c:\Program Files\Java\jdk1.8.0_{xx}”）。

要验证，请重新启动 CMD shell（需要刷新环境）并发出：

```
set JAVA_HOME 
```

我还尝试打开 android.bat 并使用我的 java 7.1.79 对其进行编辑。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-13T17:42:20.963

如果您加载了 Android Studio，它会杀死 ~/android.bat 的内容以及 SDKManager 需要运行的 sdk 目录中的大多数其他文件。我必须在二级目录中安装 Android SDK，然后将内容复制到我的实际 SDK 目录中。这允许 Eclipse 中的 SDKManager 再次运行并保持您的 SDK 更新。如果在安装 Android Studio 后安装 Eclipse，则不会出现此问题。

# javascript - node-waf 配置干净构建错误

> ID：13466575
> 
> 赞同：2
> 
> 时间：2012-11-20T04:23:22.877
> 
> 标签：javascript, node.js, pcap

我正在尝试`node_pcap`在我的 Windows 机器上安装，但运行后我不断收到以下错误`npm install pcap`

```
node-waf configure clean build
node-waf is not recognized as an internal or external command. 
```

node 和 npm 都是最新的。有谁知道如何解决这个问题？

# ruby-on-rails - 如何使用 Rspec 存根 File 对象

> ID：13466577
> 
> 赞同：1
> 
> 时间：2012-11-20T04:24:02.233
> 
> 标签：ruby-on-rails, rspec, stub

我在规范中有以下内容：

```
before do 
  @item = Item.new( title: "Lorem ipsum", 
    image: File.new(Rails.root.join('app', 'assets', 'images', 'rails.png')))
end 
```

相关的规范需要大约 30 秒才能运行，但是当我`image: File.new()`从哈希中删除时，我的测试在 1 秒内运行！

因此`File.new()`，在我的规范中增加了负载，如果可能的话，我想将其存根，但是当我尝试这样做时：

```
image: File.stub(Rails.root.join('app', 'assets', 'images', 'rails.png'))) 
```

我在测试输出中看到以下错误：

```
 Failure/Error: image: File.stub(Rails.root.join('app', 'assets', 'images', 'rails.png'))) }
 NoMethodError:
   undefined method `to_sym' for #<Pathname:0xae767d8> 
```

我会很感激这里的任何建议。FWIW，图像上传由回形针处理。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T10:22:30.210

我会做这样的事情：

```
@item = Item.new( title: "Lorem ipsum")
file = double('file', :size => 0.5.megabytes, :content_type => 'png', :original_filename => 'rails')
@item.stub(image).and_return(file) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T13:44:36.240

看看 Rails API 中的 fixture_file_upload：

[http://apidock.com/rails/ActionDispatch/TestProcess/fixture_file_upload](http://apidock.com/rails/ActionDispatch/TestProcess/fixture_file_upload)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T12:47:10.270

也可以像这样存根附件：将其添加到规范/支持中

```
module PaperclipStub
  def stub_paperclip_attachment(model, attachment)
    model.any_instance.stub(attachment.to_sym).and_return File.join(Rails.root, 'spec', 'fixtures', 'file.png')
    model.any_instance.stub("#{attachment}_file_name".to_sym).and_return File.join(Rails.root, 'spec', 'fixtures', 'file.png')
  end
end 
```

在 spec_helper.rb

```
config.include PaperclipStub # Include custom paperclip_attachment stub 
```

并在规格中使用它：

```
it "should be valid" do
    stub_paperclip_attachment(Image, :image)
    Image.new.should be_valid
  end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-26T16:06:48.543

对不起，但这不是在模拟文件。你想制造一个对象并将一个真实的文件附加到它上面——这不是一个模拟，这些解决方案都没有模拟一个文件对象。

您绝对应该使用宝石来制造测试数据，例如[工厂女孩铁轨](https://github.com/thoughtbot/factory_girl_rails)或[制造](http://www.fabricationgem.org/)。

..当你这样做时，Tom L 的答案是最好的：使用`fixture_file_upload`

# asp.net-mvc - 单元测试中的重定向

> ID：13466583
> 
> 赞同：2
> 
> 时间：2012-11-20T04:25:10.583
> 
> 标签：asp.net-mvc, unit-testing, nunit

如何对 MVC 重定向进行单元测试？

```
public ActionResult Create(Product product)
{

    _productTask.Save(product);

    return RedirectToAction("Index",new {id = product.Id});

}

public ActionResult Index(int id)
{

    return View();
} 
```

在这里，我使用单元测试语句作为

```
 var result = controller.CreateGroup(group) as RedirectToRouteResult;
    //// Assert 
    Assert.That(result, Is.Not.Null); 
```

但它失败了结果返回空值任何人都可以帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T04:31:24.497

```
// Arrange
var product = new Product(){Id=1};

// Act
var result = controller.Create(product);

// Assert
result.AssertActionRedirect()
                .ToController("thisControllerName")
                .ToAction("Index"); 
```

# localization - 韩语分词器

> ID：13466584
> 
> 赞同：6
> 
> 时间：2012-11-20T04:25:16.640
> 
> 标签：localization, solr, nlp, tokenize

处理韩语的最佳标记器是什么？

我在 Solr4.0 中尝试***[过](http://lucene.apache.org/core/old_versioned_docs/versions/2_9_0/api/all/org/apache/lucene/analysis/cjk/CJKTokenizer.html)CJKTokenizer***。它正在进行标记化，但准确性非常低。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T00:51:56.203

[POSTECH/K](http://nlp.postech.ac.kr/publication/software.html)是一款韩国形态分析仪，能够毫不费力地对韩国数据进行标记和 POS 标记。该软件在其训练和测试的语料库上报告了 90.7%（参见[http://nlp.postech.ac.kr/download/postag_k/9908_cljournal_gblee.pdf](http://nlp.postech.ac.kr/download/postag_k/9908_cljournal_gblee.pdf)）。

POS 标记在我一直从事的[多语言语料库项目](http://www.aclweb.org/anthology/Y11-1038)的韩语数据上达到了 81% 。

但是，有一个问题，您必须使用 Windows 来运行该软件。但我有一个脚本可以绕过这个限制，这是脚本：

```
#!/bin/bash -x
###############################################################################
## Sejong-Shell is a script to call POSTAG/SEJONG tagger on Unix Machine
## because POSTAG/Sejong is only usable in Korean Microsoft Windows environment
## the original POSTAG/Sejong can be downloaded from
## http://isoft.postech.ac.kr/Course/CS730b/2005/index.html
##
## Sejong-Shell is dependent on WINdows Emulator.
## The WINE program can be downloaded from
## http://www.winehq.org/download/
##
## The shell scripts accepts the input files from one directory and
## outputs the tagged files into another while retaining the filename
###############################################################################

cd <source-file_dir>
#<source_-ile_dir> is the directory that saves the textfiles that needs tagging
for file in `dir -d *`
do
    echo $file
    sudo cp <source-file_dir>/"$file" <POSTAG-Sejong_dir>/input.txt
    # <POSTAG-Sejong_dir> refers to the directory where the pos-tagger is saved
    wine start /Unix "$HOME/postagsejong/sjTaggerInteg.exe"
    sleep 30
    # This is necessary so that the file from the current loop won't be
    # overlapping with the next, do increase the time for sleep if the file
    # is large and needs more than 30 sec for POSTAG/Sejong to tag.
    sudo cp <POSTAG-Sejong_dir>/output.txt <target-file_dir>/"$file"
    # <target-file_dir> is where you want the output files to be stored
done

# Instead of the sleep command to prevent the overlap:
#   $sleep 30
# Alternatively, you can manually continue a loop with the following 
# command that continues a loop after a keystroke input:
#   $read -p "Press any key to continue…" 
```

请注意，POSTECH/K 的编码是`euc-kr`，所以如果是`utf8`. 您可以使用以下脚本将 utf8 转换为 euc-kr。

```
#!/usr/bin/python # -*- coding: utf-8 -*-

'''
pre-sejong clean
'''

import codecs
import nltk
import os, sys, re, glob
from nltk.tokenize import RegexpTokenizer

reload(sys)
sys.setdefaultencoding('utf-8')

cwd = './gizaclean_ko' #os.getcwd()
wrd = './presejong_ko'

kr_sent_tokenizer = nltk.RegexpTokenizer(u'[^！？.?!]*[！？."www.*"]')

for infile in glob.glob(os.path.join(cwd, '*.txt')):
#   if infile == './extract_ko/singapore-sling.txt': continue
#   if infile == './extract_ko/ion-orchard.txt': continue
        print infile
        (PATH, FILENAME) = os.path.split(infile)
        reader = open(infile)
        writer = open(os.path.join(wrd, FILENAME).encode('euc-kr'),'w')
        for line in reader:
                para = []urlread = lambda url: urllib.urlopen(url).read()
                para.append (kr_sent_tokenizer.tokenize(unicode(line,'utf-8').strip()))
                for sent in para[0]:
            newsent = sent.replace(u'\xa0', ' '.encode('utf-8'))
            newsent2 = newsent.replace(u'\xe7', 'c'.encode('utf-8'))
            newsent3 = newsent2.replace(u'\xe9', 'e'.encode('utf-8'))
            newsent4 = newsent3.replace(u'\u2013', '-')
            newsent5 = newsent4.replace(u'\xa9', '(c)')
            newsent6 = newsent5.encode('euc-kr').strip()
            print newsent6
            writer.write(newsent6+'\n') 
```

（**sejong-shell 的来源**：Liling Tan。2011。为南洋理工大学建立基础文本 - 多语言语料库 (NTU-MC)。最后一年的项目。新加坡：南洋理工大学。第 44 页。）

# mercurial - 如何忽略目录中具有相同扩展名的所有文件

> ID：13466586
> 
> 赞同：0
> 
> 时间：2012-11-20T04:25:37.320
> 
> 标签：mercurial, hgignore

我需要修复我的这部分`.hgignore`

```
win/*.opensdf
win/*.sdf
win/*.suo
win/*.filters
win/*.user
win/*.db3 
```

似乎它不像这里写的那样工作。

胜利是根本。甚至`*.db3`对我不起作用，只有`(?i).db3`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T04:29:16.530

胜利是你的根源吗？否则你将需要`*/win/*.ext`

# ruby - 为数组添加后缀并在字符串中搜索子字符串

> ID：13466590
> 
> 赞同：0
> 
> 时间：2012-11-20T04:26:13.667
> 
> 标签：ruby, string, algorithm, full-text-search, suffix-array

我在 Ruby 中找到了后缀数组的实现并对其进行了一些更改。这是我所拥有的：

```
class SuffixArray
    def initialize(str)
        @string = str
        @suffix_array = []
        (0...str.length).each do |i|
            substring = @string[i...str.length]
            @suffix_array << {:suffix=>substring, :index => i}
        end

        @sorted_suffix_array = @suffix_array.sort {|x,y| x[:suffix] <=> y[:suffix]}
    end

    def print_sorted
      @sorted_suffix_array.each {|item| puts "#{item[:index]}=>#{item[:suffix]}"}
      puts "total=>#{@sorted_suffix_array.size()}"
    end

    def print_unsorted
      @suffix_array.each {|item| puts "#{item[:index]}=>#{item[:suffix]}"}
      puts "total=>#{@suffix_array.size()}"
    end

    def find_substring(substring)
        low = 0
        high = @sorted_suffix_array.length
        while(low <= high) do
            mid = (low + high) / 2
            comparison = @sorted_suffix_array[mid][:suffix]#[0..substring.length]
      if comparison > substring
        high = mid - 1
      elsif comparison < substring
        low = mid + 1
      else 
        return @sorted_suffix_array[mid][:index]
      end
        end
    end

end 
```

它工作得很好，但它没有找到我想要的所有子字符串。例如

```
a = SuffixArray.new("there is a man who likes dogs")
puts a.find_substring("man") #won't be found
puts a.find_substring("who likes dogs") #will be found
puts a.find_substring("o likes dogs") #will be found 
```

如何更改算法以使其找到我想要的所有子字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T06:47:14.213

您的代码几乎是正确的。我做了一些小的修改，它可以工作。

```
def find_substring(substring)
  low = 0
  high = @sorted_suffix_array.length-1
  while(low <= high) do
    mid = (low + high) / 2
    comparison = @sorted_suffix_array[mid][:suffix][0...substring.length]
    if comparison > substring
      high = mid - 1
    elsif comparison < substring
      low = mid + 1
    else 
      return @sorted_suffix_array[mid][:index]
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T04:27:00.310

为他人; 参考，这是一个没有将子字符串保存在哈希中的

要点：[https ://gist.github.com/bluetwin/5268722](https://gist.github.com/bluetwin/5268722)

```
class SuffixArray

  attr_reader :suf, :string

  def initialize(string)
    @string = string
    @suf = (0..string.size-1).sort_by{|i|@string[i..-1]}
  end

  def substring(idx)
    @string[@suf[idx]..@string.size-1]
  end

  def bsearch(str)
    low = 0
    high = @suf.length-1
    found = nil
    while(low <= high) do
      mid = (low + high) / 2
      comp = substring(mid)
      if comp > str
        high = mid - 1
      elsif comp < str
        low = mid + 1
      else
       found = comp
       low = high + 1
      end
    end
    found
  end

end 
```

# android - Android - 如何知道设备是否仅限 WiFi？

> ID：13466591
> 
> 赞同：5
> 
> 时间：2012-11-20T04:26:18.017
> 
> 标签：android, android-wifi

无论如何我们可以检查Android设备是否仅是WiFi？例如 Nexus 7 有 WiFi-Only 设备和 WiFi&3G 设备。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-20T04:48:36.477

我认为[getPhoneType()](http://developer.android.com/reference/android/telephony/TelephonyManager.html#getPhoneType%28%29)会帮助你。

或者

您可以查询应用程序中的系统功能，看看是否有效

```
PackageManager pm = getPackageManager(); boolean isAPhone = pm.hasSystemFeature(PackageManager.FEATURE_TELEPHONY); 
```

如果您关心 GSM/CDMA，请使用更具体的`FEATURE_TELEPHONY_GSM`或`FEATURE_TELEPHONY_CDMA`.

如果设备在说谎，那么您当然无能为力。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T04:38:05.730

如果您想检查 wifi 是否已连接，请查看以下问题：
[如何在 Android 上查看 Wi-Fi 是否已连接？](https://stackoverflow.com/questions/3841317/how-to-see-if-wifi-is-connected-in-android)

如果你想检查网络类型而不是看到这个问题：
[如何检查 wifi 或 3g 网络在 android 设备上可用](https://stackoverflow.com/questions/3262781/how-to-check-wifi-or-3g-network-is-available-on-android-device)

# java - 如何处理服务器上的文件上传块（Plupload/Spring MVC）？

> ID：13466596
> 
> 赞同：9
> 
> 时间：2012-11-20T04:27:50.273
> 
> 标签：java, spring, file-upload, plupload, chunking

在我们的客户端上，可以上传大文件。我们想使用分块来减少请求的大小。我们正在使用[Plupload](http://www.plupload.com/)，因此很容易以块的形式发送文件。但是，我不确定如何处理这些块。我们在服务器上使用 Spring MVC，我的控制器方法目前有以下内容：`uploadMedia(@RequestBody MultipartFile file)`where `MultipartFile`is `org.springframework.web.multipart.MultipartFile`. 这在不进行分块时工作得很好。当我在客户端打开分块时，它仍然可以很好地进入这个方法，但是我没有看到传入的文件中有任何东西可以识别块是哪个文件的一部分。希望我只是错过了一些东西。

这似乎是一个常见的工作流程，但我似乎找不到任何关于如何在服务器端完成此操作的好例子。只有 Spring 的解决方案会很棒，但如果需要另一个库，那也很好。我查看了一些[Apache Commons FileUpload](http://commons.apache.org/fileupload/index.html)，但我在那里找不到任何关于分块的信息。对此的任何帮助都会很棒。谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-20T06:22:22.843

我对此进行了更多调试，并`HttpServletRequest`在我的控制器方法中添加了一个，以查看那里是否有任何可用的东西。我发现我收到的请求是 a `org.springframework.web.multipart.support.DefaultMultipartHttpServletRequest`，其中有一个名为`multipartParameters`which is just a的字段`HashMap`。我发现这张地图的键是`name`、`chunks`和`chunk`。所以，我决定尝试以下作为我的签名：

```
uploadMedia(@RequestBody MultipartFile file, @RequestParam String name, @RequestParam int chunks, @RequestParam int chunk) 
```

果然，这些`@RequestParam`参数分别填充了文件名、块数和块号（从零开始）。为每个请求提供此信息将使将块组装到最终文件中变得非常容易。

还要知道的一件事是，如果文件不需要分块（文件大小小于块大小），则不会发送`chunks`and参数。`chunk`所以，我的最终签名最终看起来像这样：

```
uploadMedia(@RequestBody MultipartFile file, @RequestParam String name, @RequestParam(required=false, defaultValue="-1") int chunks, @RequestParam(required=false, defaultValue="-1") int chunk) 
```

然后我可以检查 -1 看看我是否需要担心分块。

所以，在控制器方法本身我有这样的事情：

```
Media media = new Media();
//set stuff on my Media object for storing info about the file in the DB
//....
if (chunks > 0 && chunk > 0)
{
    //Need to append the bytes in this chunk
    mediaRepository.appendBytes(media, file.getBytes());
    if (chunk == chunks - 1)
    {
        //last chunk, upload is done
        onUploadFinished(media);
    }
}
else
{
    //Write out the first set of bytes
    mediaRepository.saveBytes(media, file.getBytes());
    if (chunks <= 0)
    {
        //no chunks were needed, all the bytes have been written out, upload is done
        onUploadFinished(media);
    }
} 
```

# jquery - 带有动态输入框的 Jquery 自动完成功能。？

> ID：13466599
> 
> 赞同：0
> 
> 时间：2012-11-20T04:28:52.783
> 
> 标签：jquery, asp.net-mvc-3, autocomplete

我为 Jquery Auto 完成了很多研发工作，我找到了一些结果，但没有我需要的那么多。我给你的代码是我目前正在使用的。

```
 <ul>
         @foreach (var items in Model)
            {
             <li class="@items.ShortDesc" id="@items.ShortDesc">
                <div class="test0">             
                @Html.TextBox(@items.ShortDesc, @items.SfldDefault, new { @class = "catalog inputcatalog txtbox" })          
                                </div>  
                        </li>

                    }
                </ul> This  input  box will  created  by  Dynamic using forloop 
```

//我的jQuery代码

```
 $(function () {
    $("#Subject").autocomplete({
        source: '/Cataloging/Bib/GetSubject',
        minLength: 1,
        select: function (event, ui) {
            // Do something with "ui.item.Id" or "ui.item.Name" or any of the other properties you selected to return from the action
        }
    });
}); 
```

// 我的动作方法

```
 public ActionResult GetSubject(string term)
    {
         term = term.Substring(2, term.Length-2);

        return Json(db.BibContents.Where(city => city.Value.StartsWith(term)).Select(city => city.Value), JsonRequestBehavior.AllowGet);
    } 
```

// 我的代码使用静态输入运行，但是在创建动态时我需要使用实时事件，但我不知道如何使用此代码使用实时事件。

注意：我在渲染操作后使用输入“|a”的静态值，我正在删除前两个字符以从数据库中进行正确搜索。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T04:48:09.910

更改此项以为所有 txtboxes 创建相同的类

```
 <li class="ShortDesc" id="@items.ShortDesc"> 
```

.

```
$(document).ready(function () { 
    $('.ShortDesc').each(function () { 
            $(this).autocomplete({ 
                source: '/Cataloging/Bib/GetSubject',
                minLength: 1,
                select: function (event, ui) {
            // Do something with "ui.item.Id" or "ui.item.Name" or any of the other properties you selected to return from the action
        }
    });
}); 
```

`$(Document).ready()`应该在所有 Razor 命令完成后发生

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T04:52:17.543

每次动态创建输入后调用一个函数

```
 create_dynaically(id); 
```

这个功能

```
function create_dynaically(id)
{

$("#"+id).autocomplete({   //this line
        source: '/Cataloging/Bib/GetSubject',
        minLength: 1,
        select: function (event, ui) {
            // Do something with "ui.item.Id" or "ui.item.Name" or any of the other properties you selected to return from the action
        }
    });

} 
```

# parsing - 我将如何实现一个简单的基于堆栈的编程语言

> ID：13466600
> 
> 赞同：8
> 
> 时间：2012-11-20T04:29:08.047
> 
> 标签：parsing, lexer, stack-based

我有兴趣通过实现基于堆栈的编程语言来扩展我的计算机编程知识。我正在寻求关于从哪里开始的建议，因为我打算让它具有像“ `pushint 1`”这样的函数，它将一个值为 1 的整数推到堆栈的顶部，并通过像“ `L01: jump L01:`”这样的标签进行流控制。

到目前为止，我已经实现了我希望我的语言行为的 C# 实现（想要链接到它，但 IDEOne 被阻止），但它非常混乱，需要优化。它将输入转换为 XML，然后对其进行解析。我的目标是使用较低级别的语言（可能是 C/C++），但我的问题是实现一个可以容纳各种数据类型并且没有固定大小的堆栈。

最终我还想实现数组和函数。此外，我认为我需要一个更好的 Lexer，我想知道解析树对于这种简单化的语言是否是一个好主意。

欢迎任何建议/批评，并请考虑到我对编程仍然相当陌生（我刚刚完成了 AP CompSci I）。此外，欢迎提供基于开源堆栈的语言的链接。

这是一个我想尝试解释/编译的基本程序（其中`[this is a comment]`）：

```
[Hello World!]
pushchar    '\n'
pushstring  "Hello World!"
print
[Count to 5 and then count down!]
pushint     1
setlocal    0
L01:
pushchar    '\n'
getlocal    0
print           [print x + '\n']
getlocal    0
increment
setlocal    0   [x = x + 1]
pushint     5
getlocal    0
lessthan        [x < 5]
iftrue      L01
L02:
pushchar    '\n'
getlocal    0
print           [print x + '\n']
getlocal    0
decrement
setlocal    0   [x = x - 1]
pushint     0
getlocal    0
greaterthan     [x > 0]
iftrue      L02 
```

预期的输出将是：

```
Hello World!
1
2
3
4
5
4
3
2
1 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-13T02:36:20.283

基于堆栈的语言（例如[Factor](http://factorcode.org/ "因子编程语言")）具有以下语法：

```
2 3 + 5 - print 
```

这等效于以下 C 样式代码：

```
print(2 + 3 - 5); 
```

使用基于堆栈的语言的优点是易于实现。此外，如果该语言使用[反向波兰表示法](http://en.wikipedia.org/wiki/Reverse_Polish_notation "逆波兰表示法 - 维基百科，免费的百科全书")，就像大多数基于堆栈的语言一样，那么您语言[前端](http://en.wikipedia.org/wiki/Compiler#Front_end "编译器 - 维基百科，免费的百科全书")所需要的只是一个词法分析器。您不需要将标记解析为语法树，因为只有一种方法可以解码标记流。

您要创建的不是基于堆栈的编程语言，而是基于堆栈的[虚拟机](http://en.wikipedia.org/wiki/Comparison_of_application_virtual_machines "应用程序虚拟机的比较 - 维基百科，免费的百科全书")。应用程序虚拟机可以[基于堆栈](http://en.wikipedia.org/wiki/Stack_machine "堆栈机 - 维基百科，免费的百科全书")或基于[寄存器](http://en.wikipedia.org/wiki/Register_machine "注册机 - 维基百科，免费的百科全书")。例如，[Java 虚拟机](http://en.wikipedia.org/wiki/Java_Virtual_Machine "Java 虚拟机 - 维基百科，免费的百科全书")是基于堆栈的。它执行[Java 字节码](http://en.wikipedia.org/wiki/Java_bytecode "Java 字节码 - 维基百科，免费的百科全书")（这是您正在创建的 - 虚拟机的字节码）。然而，编译成这个字节码的编程语言（例如 Java、Erlang、Groovy 等）不是基于堆栈的。

您尝试创建的内容就像您自己的虚拟机的汇编级语言，它恰好是基于堆栈的。话虽如此，这样做相当容易——基于堆栈的虚拟机更容易实现基于寄存器的虚拟机。同样，您只需要一个词法分析器，例如[flex](http://github.com/westes/flex "flex：快速词法分析器")。这是一个在 JavaScript 中使用名为[lexer](https://github.com/aaditmshah/lexer "aaditmshah/词法分析器")的小示例：

```
var program = "[print(2 + 3)]";
program += "\n push 2";
program += "\n push 3";
program += "\n add";
program += "\n print";

lexer.setInput(program);

var token;
var stack = [];
var push = false;

while (token = lexer.lex()) {
    switch (token) {
    case "NUMBER":
        if (push) stack.push(lexer.yytext);
        else alert("Unexpected number.");
        break;
    case "ADD":
        if (push) alert("Expected number.");
        else stack.push(stack.pop() + stack.pop());
        break;
    case "PRINT":
        if (push) alert("Expected number.");
        else alert(stack.pop());
        break;
    }

    push = token === "PUSH";
}
```

```
<script src="https://rawgit.com/aaditmshah/lexer/master/lexer.js"></script>
<script>
var lexer = new Lexer;

lexer.addRule(/\s+/, function () {
    // matched whitespace - discard it
});

lexer.addRule(/\[.*\]/, function () {
    // matched a comment - discard it
});

lexer.addRule(/\d+/, function (lexeme) {
    this.yytext = parseInt(lexeme);
    return "NUMBER";
});

lexer.addRule(/push/, function () {
    return "PUSH";
});

lexer.addRule(/add/, function () {
    return "ADD";
});

lexer.addRule(/print/, function () {
    return "PRINT";
});
</script>
```

这真的很简单。您可以摆弄程序并根据需要对其进行修改。祝你好运。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T04:05:25.500

我想你会发现一篇关于“MetaII”的论文真的很有启发性。它在 10 个简短但令人费解的页面中展示了如何定义下推堆栈编译器机器及其编译器。看到这个答案：[https](https://stackoverflow.com/a/1005680/120163) ://stackoverflow.com/a/1005680/120163 一旦你理解了这一点，编写下推堆栈解释器将永远很容易。

# javascript - 如何使用数组在 javascript 中创建图像？

> ID：13466602
> 
> 赞同：0
> 
> 时间：2012-11-20T04:29:37.770
> 
> 标签：javascript, arrays, image, document.write

我想使用数组来创建一些图像，并为每个图像附加一个函数。我是 javascript 新手，可能有很多语法错误，我们将不胜感激。下面是我的代码。我和我的助教为此工作了几个小时，但仍然无法成功，有人知道吗？

```
function changeImage() {
    var i = 0;
    element = document.getElementById(myimage[i]); // here I want it call every id or content in that array.
    if (element.src.match("bulbon")) {
        element.src = "pic_bulboff.gif";
    }
    else {
        element.src = "pic_bulbon.gif";
    }
}

var myimage = new Array();
myimage[0] = 0;
myimage[1] = 1;
myimage[2] = 2;

for (var i = 0; i < myimage.length;) {
    document.write("<img id=\"myimage[i]\" src=\"pic_bulboff.gif\" onmouseover=\"changeImage()\" width=\"20\" height=\"36\" />");
    i++; //in the img id=myimage[i] part, I want give each image I created a unique id, so my function can work on each image.
}​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T05:04:14.677

您的图像根本不需要 id 属性来使用`changeImage()`您显示的功能，因为它似乎只是试图交换具有`mouseover`事件的图像的图像源。您可以改为使用`this`关键字来获取对“当前”图像的引用。

```
for (var i = 0; i < 400; i++) {
    document.write("<img src=\"pic_bulboff.gif\" onmouseover=\"changeImage(this)\" width=\"20\" height=\"36\" />");
}​

function changeImage(element) {
    if (element.src.indexOf("bulbon")!=-1) {
        element.src = "pic_bulboff.gif";
    }
    else {
        element.src = "pic_bulbon.gif";
    }
} 
```

请注意，该[`.match()`方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/match)通常与正则表达式一起使用，以返回与正则表达式匹配的源字符串部分的数组，但如果您只想测试您的字符串是否与正则表达式匹配，而不担心究竟匹配的是什么，那么您应该使用`.test()`- 或者在你的情况下，因为你根本没有使用正则表达式，所以使用[`.indexOf()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/indexOf).

如果你想让一个函数能够处理你*所有*的图像，你应该给它们一个公共类，然后使用[`.getElementsByClassName()`方法](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByClassName)：

```
for (var i = 0; i < 400; i++) {
    document.write('<img class="someClass" src="pic_bulboff.gif" onmouseover="changeImage(this)" width="20" height="36" />');
}​

function someFunction() {
    var elements = document.getElementsByClassName("someClass");
    for (var i = 0; i < elements.length; i++) {
        // do something with elements[i]
    }
} 
```

请注意，如果字符串是用单引号引起来的，则不需要用反斜杠转义字符串文字中的所有双引号。

**编辑 - 回应评论：**

上面的代码绝对有效，你可以在这里看到：http: [//jsfiddle.net/E5TGy/](http://jsfiddle.net/E5TGy/)

关于使其与数组一起使用的“正确”方法，整个概念不适合这个问题。有一个数组没有意义，其中存储在索引中的值`i` *就是* `i`你的方式 - 如果查找`myimage[7]`给你`7`有什么意义？最接近你的代码的东西是这样的：

```
document.write('<img id="' + myimage[i] +
               '" src="pic_bulboff.gif" onmouseover="changeImage(' + myimage[i] + 
               ')" width="20" height="36" />'); 
```

...然后您的功能将是：

```
function changeImage(elementID) {
    var element = document.getElementById(elementID);
    if (element.src.match("bulbon")) {
        element.src = "pic_bulboff.gif";
    }
    else {
        element.src = "pic_bulbon.gif";
    }
} 
```

如图所示：http: [//jsfiddle.net/qKksU/](http://jsfiddle.net/qKksU/)

# gdb - Eclipse CDT 控制台故障

> ID：13466605
> 
> 赞同：3
> 
> 时间：2012-11-20T04:30:18.570
> 
> 标签：gdb, eclipse-cdt

我将 Eclipse CDT 与 Cygwin 一起使用。我有一个用 Eclipse 编译的基本 Hello World 程序。当我手动启动 .exe 时，它​​工作正常。

当我在 Eclipse 中点击调试按钮时，它会一直运行到第一个`cin`. 我键入响应，按回车，但没有任何反应。我可以继续输入响应，它永远不会超过那条线。

如果我然后切换到 gdb 控制台并键入任何内容并按 Enter 键，它最终会从`cin`调用中返回我输入的第一个字符串，并运行到下一个提示，程序终止。

以前，它似乎在做一些奇怪的事情，比如从 gdb 控制台读取字符串。

如果我把

```
set new-console on 
```

在 GDB 命令文件中（在 Debug Configurations -> Debugger 下），它会打开一个新控制台并且运行良好。我只是好奇我在做什么会导致其他问题，因为这种解决方法并不理想。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-06T19:58:03.100

对于任何人来说，这实际上是 Windows 上 Eclipse 中的一个错误。

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=173732](https://bugs.eclipse.org/bugs/show_bug.cgi?id=173732)

# testing - QC10 与 Windows7 和 VAPI-XP 脚本

> ID：13466606
> 
> 赞同：0
> 
> 时间：2012-11-20T04:30:47.063
> 
> 标签：testing, jar, hp-quality-center

我目前正在尝试在 Windows7 PC 上通过 QC10 执行 VAPI-XP 脚本并遇到问题，由于 Error:Unexpected 语句，我无法执行它们，此外，我无法在没有 QC10 资源管理器冻结的情况下打开测试脚本选项卡。分钟，然后显示“！！！错误：意外语句”而不是 VBSCRIPT 代码。

在其他 PC 上不会出现此问题，我可以通过测试计划树正确访问它们，查看 + 下的测试脚本选项卡，通过测试实验室将它们作为 .jar 文件执行。

我已经进行了广泛的研究，其中一些结果包含我尝试过的 DCOM 注册表文件的删除，但这样做之后又出现了另一个错误。QC10 Patch 12 上的发行说明解释说，在 Windows 7 上通过 QC10 执行 VAPI-XP 脚本被破坏了，但是我们目前正在运行补丁 22 ......我相信它目前是补丁 29 但这不是一个选项，因为更新它需要更新工作中所有计算机上的 QC。

最初，我认为这只是 Windows 7 的 QC10 兼容性问题，但奇怪的是它已经过测试并在另一台具有 QC10（相同补丁）和 Windows 7 的 PC 上运行 - 它能够访问和查看测试脚本测试计划树下的选项卡以及在测试实验室下执行它。但不是在我正在使用的 PC 上。

任何人都可以就如何解决这个不包括更新 QC10 补丁的问题提出解决方案或想法吗？

谢谢，非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T15:16:09.820

检查以确保您已在相关 PC 上安装了 Connectivity 插件。它在服务器的加载项页面上可用。

# sql - java应用程序中独立于数据库的Sql Query

> ID：13466609
> 
> 赞同：0
> 
> 时间：2012-11-20T04:30:53.980
> 
> 标签：sql, database, hibernate

我只想知道是否有任何方法可以编写适用于所有数据库的 sql 查询，例如如果我从 Oracle 切换到 My sql 或其他一些数据库，我不需要更改我的 Sql 查询，

Hibernate 在这种情况下会有所帮助，如果它会帮助如何？我对休眠一无所知，请解释一下它会有什么帮助。

谢谢苏达山

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T04:40:17.360

Hibernate 使用对象关系映射。因此，您无需更改代码或查询使用 hibernate。仅需要在关系映射 xml 和实体中仅定义表关系。

但它不会在所有地方都有效。如果您有复杂的关系查询意味着您可以在单独的 xml 中写入，并且可以从 xml 中读取查询。但是当您切换数据库时，您需要根据 Sql 语法修改 xml 查询，您不需要更改代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T11:54:19.750

ORM 是您的解决方案，它将在数据库上创建一个单独的层。该层将与您的数据库交互。如果要将数据库从 Oracle 更改为 MySql，只需更改 XML 文件即可。

试试这个教程：绝对会帮助你很多：[http ://www.youtube.com/watch?v=GINvxAaXDbY](http://www.youtube.com/watch?v=GINvxAaXDbY)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T04:33:24.873

Hibernate create and Object Relational Mapping. That is it considers tables as objects. So we use HQL to query the objects and not on the database. Hibernate takes care of all that.

One another option is to have you queries in a external file. So that depending on the database you can switch the files and no code changes are required. This is not a widely accepted solution

# php - 用于购物车的 PHP 电子邮件未被循环填充

> ID：13466613
> 
> 赞同：0
> 
> 时间：2012-11-20T04:31:12.207
> 
> 标签：php, function, email, foreach

我想要做的是从一个站点生成一个购物车，然后通过电子邮件发送它。当我运行我的代码时，该功能在页面上运行并且不通过电子邮件发送，但它显示正确。我无法将函数的输出存储到可以在电子邮件中使用的变量中。这是我的代码...

```
function emailcartview() {
$total=0;
$totalvalue=0;
foreach($_SESSION as $name => $value) {
    if ($value>0){
        if (substr($name, 0, 5)=='cart_'){
            $id = substr($name, 5, (strlen($name)-5));
            $get = mysql_query('SELECT id, name, cost, item_number FROM mydbname WHERE id='.mysql_real_escape_string((int)$id));

            $cart = array();
            while ($get_row = mysql_fetch_assoc($get)) {
                $cart[] = array(
                'hsid' => $get_row['id'],
                'cost' => $get_row['cost'],
            $cost = $get_row['cost'],
                'itemno' => $get_row['item_number'],
                'name' => $get_row['name'],
                'value' => $value,
                $sub = $value*$cost,
                $total += $sub,
                $totalvalue = $value,
                'realsub' => number_format($sub, 2),
                );

                }
                foreach($cart as $index => $record){
                    global $emailcart;
                    $emailcart = "Item: {$record['itemno']} - {$record['name']} | Qty: {$record['value']} | Cost: {$record['cost']} x {$record['value']} = {$record['realsub']} <br>";
                    echo $emailcart;

            }

        }

    }

}
echo "Total : $".number_format($total, 2);
 }

$emailSubject = 'Invoice Submission';
$webMaster = 'my_email@blahblah.com';

$companyName = $_POST['companyname'];
$contactName = $_POST['contactname'];
$contactEmail = $_POST['contactemail'];
$teleNumber = $_POST['telenumber'];
$billAddr = $_POST['billaddr'];
$shipAddr = $_POST['shipaddr'];
$neededBy = $_POST['neededby'];
$cartprint .= emailcartview();

$body = "
<br><hr><br>
Company Name: $companyName <br>
Contact Name: $contactName <br>
Contact Email: $contactEmail <br>
Telephone Number: $teleNumber <br>
Billing Address: $billAddr <br>
Shipping Address: $shipAddr <br>
Date Needed: $neededBy <br> <br>
<br><hr><br>
$cartprint";

$headers = "From: ordersubmission@blahblah.com\r\n";
$headers .= "Content-type: text/html\r\n";
$success = mail($webMaster, $emailSubject, $body, $headers);

 ?> 
```

我尝试过但没有奏效的奇怪东西可能有很多残余物，而不是最干净的。任何帮助将不胜感激！！

泰勒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T04:38:19.923

在函数 emailcartview 中，您需要生成字符串而不是 echo 语句，并且在函数结束时您应该返回该字符串。

检查以下代码：

```
function emailcartview() {
$total=0;
$totalvalue=0;
$str = '';
foreach($_SESSION as $name => $value) {
    if ($value>0){
        if (substr($name, 0, 5)=='cart_'){
            $id = substr($name, 5, (strlen($name)-5));
            $get = mysql_query('SELECT id, name, cost, item_number FROM mydbname WHERE id='.mysql_real_escape_string((int)$id));

            $cart = array();
            while ($get_row = mysql_fetch_assoc($get)) {
                $cart[] = array(
                'hsid' => $get_row['id'],
                'cost' => $get_row['cost'],
            $cost = $get_row['cost'],
                'itemno' => $get_row['item_number'],
                'name' => $get_row['name'],
                'value' => $value,
                $sub = $value*$cost,
                $total += $sub,
                $totalvalue = $value,
                'realsub' => number_format($sub, 2),
                );

                }
                foreach($cart as $index => $record){
                    global $emailcart;
                    $str. = "Item: {$record['itemno']} - {$record['name']} | Qty: {$record['value']} | Cost: {$record['cost']} x {$record['value']} = {$record['realsub']} <br>";

            }

        }

    }

}
$str. = "Total : $".number_format($total, 2);
return $str;
 }

$emailSubject = 'Invoice Submission';
$webMaster = 'my_email@blahblah.com';

$companyName = $_POST['companyname'];
$contactName = $_POST['contactname'];
$contactEmail = $_POST['contactemail'];
$teleNumber = $_POST['telenumber'];
$billAddr = $_POST['billaddr'];
$shipAddr = $_POST['shipaddr'];
$neededBy = $_POST['neededby'];
$cartprint .= emailcartview();

$body = "
<br><hr><br>
Company Name: $companyName <br>
Contact Name: $contactName <br>
Contact Email: $contactEmail <br>
Telephone Number: $teleNumber <br>
Billing Address: $billAddr <br>
Shipping Address: $shipAddr <br>
Date Needed: $neededBy <br> <br>
<br><hr><br>
".emailcartview();

$headers = "From: ordersubmission@blahblah.com\r\n";
$headers .= "Content-type: text/html\r\n";
$success = mail($webMaster, $emailSubject, $body, $headers);

 ?> 
```

# c - 如何从C中的数据包头数据中获取参与ARP的机器的MAC和IP地址？

> ID：13466614
> 
> 赞同：0
> 
> 时间：2012-11-20T04:31:22.333
> 
> 标签：c, packet-capture, arp

谢谢阅读，

我正在进行一项家庭作业，除其他外，我需要根据我所捕获的数据包确定远程机器的 MAC 和 IP 地址。使用 pcap_loop 函数，我需要找到正确的结构（提供此信息的 ARP 标头）相对于指向数据包开头的指针（在我的回调函数中以 u_char* 给出）的位置。

我无法在线找到有关如何获取与数据包相关的结构的信息，例如具有地址的 ether_arp。如果您能指出正确的方向，那将非常有帮助 - 正如我所提到的，这是家庭作业，所以我不是在寻找完整的答案。

再次感谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T05:30:08.293

这篇文章“http://en.wikipedia.org/wiki/Address_Resolution_Protocol”讲述了 ARP 消息的布局。您不需要结构，只需使用偏移量。

# php - 带有 codeigniter 的 RESTFul Web 服务

> ID：13466616
> 
> 赞同：0
> 
> 时间：2012-11-20T04:31:26.107
> 
> 标签：php, codeigniter, rest

我可以用户发布创建和更新的方法吗？

我已经尝试过“PUT”方法来更新资源，但我没有在服务器端获取参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T05:00:17.887

PUT 不是通过 PHP（即 $_PUT）或 CodeIgniter 本地处理的。有两件事情要做：1) 自己获取 PUT 变量，或者 2) 使用 Phil Sturgeon 的 REST 库。

```
//put an associative array into $post_vars variable
parse_str(file_get_contents("php://input"),$post_vars); 
```

资料来源：[http ://www.lornajane.net/posts/2008/accessing-incoming-put-data-from-php](http://www.lornajane.net/posts/2008/accessing-incoming-put-data-from-php)

但是，由于您正在使用 CodeIgniter，因此如果您找不到真正的不这样做的理由，您应该使用 Phil Sturgeon 的库。它经过验证、验证和测试，可以处理所有 HTTP 动词。

[https://github.com/philsturgeon/codeigniter-restserver](https://github.com/philsturgeon/codeigniter-restserver)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T05:05:55.203

是的。由于 PUT 或 DELETE 方法缺乏一致的客户端实现，标准做法是发送 POST 请求，然后 A）使用查询字符串参数（即`?_method=PUT`）或 B）发送`X-METHOD-OVERRIDE`标头。

（快速谷歌搜索返回：[http](http://www.endurasoft.com/Blog/post/X-HTTP-Method-Override.aspx) ://www.endurasoft.com/Blog/post/X-HTTP-Method-Override.aspx ）

您可能需要扩展 CI_Input 类以了解创建操作和更新之间的区别。

# c - 将方程转换为位移运算

> ID：13466620
> 
> 赞同：7
> 
> 时间：2012-11-20T04:31:46.187
> 
> 标签：c, optimization, bit-shift, performance

**是否有任何标准方法可以将（任何）方程转换为位移运算？**

我的意思是把任何不是 + 或 - 的东西转换成位移，所以结束方程只包含操作数**<<、>>、+ 和 -**。这是为了减少公式的处理器密集度。

显然，这些结果方程只是近似值，考虑的阶数越多（一阶、二阶等），精度越高。

我已经在网上搜索了有关此的任何信息，但找不到任何信息，除了特定公式（sin、cos、inv 等）的内容。

我正在设想类似多项式或泰勒展开过程的东西，然后将其转换为位移运算。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T04:43:20.113

仅仅因为您将某些内容简化为*更简单*的指令，并不意味着它们会以某种方式执行得更快或更少密集。虽然您可能能够将许多事情简化为操作的简化子集，但您可能需要更多的操作来完成相同的任务。处理器每秒只能执行这么多操作，而您将首先遇到该操作。

通常，当尝试在低级别优化某些东西时，您会尝试使用更复杂的操作码，以便您需要更少的操作码。例如，您可以通过执行许多 ADD 指令来执行乘法。但是，除了最微不足道的例子之外，它所花费的 ADD 比单个 MUL 操作码要多得多，并且执行时间要长得多。

回到您的实际问题...完全忽略效率，只要您拥有的指令集是*Turing Complete* ，您就可以计算任何东西。如果您小心选择该指令，您实际上可以使用[单个指令](http://en.wikipedia.org/wiki/One_instruction_set_computer)计算任何内容。我不相信有任何通用的方式可以说“将任意算法转换为仅使用这些指令”，这通常是编译器编写者的工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T04:44:44.133

一般不会。

在大多数 CPU 上，乘法并不比其他算术运算慢很多，因此尝试将乘法转换为位移运算没有什么意义，除了乘以 2 的恒定幂。

就除法而言，有一些众所周知的方法可以将除以常数转换为乘以倒数，这些方法非常有效。请参阅[http://www.flounder.com/multiplicative_inverse.htm](http://www.flounder.com/multiplicative_inverse.htm)了解如何操作。但是，除以非常量值并不能真正优化。

当然，将 2 的幂（或一个数除以 2 的幂）很容易转换为位移。但是，其他指数不容易转换。

大多数超越函数不能在位级别上合理地表示。无论如何，大多数都没有在整数上定义，这无济于事。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T04:59:07.080

具有按位运算的软件乘法不太可能在现代 CPU 上击败硬件乘法。

如果允许避免 1) 循环，通常进行按位操作可以产生更好的性能；2) 分支。

[一本很好的在线黑客食谱](http://graphics.stanford.edu/~seander/bithacks.html)。否则会有[黑客的喜悦](https://rads.stackoverflow.com/amzn/click/com/0201914654)。

# ios - UIWebView 显示用于加载的 UIActivityIndi cator，但在页面初始加载后忽略其他加载请求（例如，javascript 加载的广告）

> ID：13466621
> 
> 赞同：3
> 
> 时间：2012-11-20T04:31:49.400
> 
> 标签：ios, uiwebview, loading, uiactivityindicatorview

这是一个问答帖。为了通知我在浏览 StackOverflow 的数据库时看到的许多其他用户在这个问题上苦苦挣扎。这些用户都没有得到一个可靠的答案（而且他们中的大多数人几年前就提出了这个问题，所以我不打算碰这个帖子）。

* * *

许多人苦苦挣扎的问题如下：

当您尝试在 UIWebView 中加载页面，然后该页面可能通过 iFrame 加载另一个页面或通过 javascript 加载广告时，您最终会再次调用页面加载函数，如果您使用的是 UIActivityIndi​​cator，它将再次被调用以及惹恼您的用户。

解决此问题的方法是存储以前的 MainURL 并检查尝试加载的新 MainURL，如果它们匹配则忽略加载函数。（下面我的答案中的示例代码）

`webViewDidStartLoad`**在网页已经*真正*加载后将再次调用该方法的网页示例是：www.speakeasy.net/speedtest/

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T04:31:49.400

```
//Define the NSStrings "lastURL" & "currentURL" in the .h file.
//Define the int "falsepositive" in the .h file. (You could use booleans if you want)
//Define your UIWebView's delegate (either in the xib file or in your code `<UIWebViewDelegate>` in .h and `webView.delegate = self;` in .m viewDidLoad)

- (void)webViewDidFinishLoad:(UIWebView *)webView {
    lastURL = [NSString stringWithFormat:@"%@", webView.request.mainDocumentURL];
    if (falsepositive != 1) {
        NSLog(@"Loaded");
        //hide UIActivityIndicator
    } else {
        NSLog(@"Extra content junk (i.e. advertisements) that the page loaded with javascript has finished loading");
        //This method may be a good way to prevent ads from loading hehe, but we won't do that
    }
}

-(BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType; {
    NSURL *requestURL = [request mainDocumentURL];
    currentURL = [NSString stringWithFormat:@"%@", requestURL]; //not sure if "%@" should be used for an NSURL but it worked..., could cast `(NSString *)` if we *really* wanted to...
    return YES;
}

- (void)webViewDidStartLoad:(UIWebView *)webView {
    if ([currentURL isEqualToString:lastURL]) {
        falsepositive = 1;
        NSLog(@"The page is loading extra content with javascript or something, ignore this");
    } else {
        falsepositive = 0;
        NSLog(@"Loading");
        //show UIActiviyIndicator
    }
}

//make sure you read the //comments// at the top of this code snippet so that you properly define your .h variables O:) Thanks!

// 
```

# c - 如何从固定大小的查找表中查找不同频率的正弦波？

> ID：13466623
> 
> 赞同：10
> 
> 时间：2012-11-20T04:31:50.190
> 
> 标签：c, embedded, signal-processing, lookup-tables, trigonometry

我正在以 48 kHz 采样正弦波，我的正弦波的频率范围可以从 0 到 20000 Hz 变化，步长约为 100 Hz。我正在使用查找表方法。因此，我为 4096 个不同相位的正弦波生成 4096 个样本。我认为这背后的一般想法是增加步长并为不同的频率使用不同的步长。所以我做了以下（伪代码）。但我不确定步长与我想要生成正弦波样本的频率有什么关系？例如，如果我的频率是 15000 Hz，我必须遍历的步长是多少？我的样本量（4096）是否太低了？

```
 // Pseudocode
 uint16_t audio_sample[4096] = {...};
 NSTEP = freq; //???How is the step size going to be related to the freq here

 for(int i = 0; i < 4096; i = i+NSTEP)
 {
     sine_f(i) = audio_sample[i];
 } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-20T05:51:17.577

你在正确的轨道上 - 首先我们需要生成一个正弦波 LUT：

```
const int Fs = 48000;       // sample rate (Hz)
const int LUT_SIZE = 1024;  // lookup table size

int16_t LUT[LUT_SIZE];      // our sine wave LUT

for (int i = 0; i < LUT_SIZE; ++i)
{
    LUT[i] = (int16_t)roundf(SHRT_MAX * sinf(2.0f * M_PI * (float)i / LUT_SIZE));
}                           // fill LUT with 16 bit sine wave sample values 
```

请注意，我们只需要生成此 LUT 一次，例如在初始化期间。

现在我们有了一个正弦波 LUT，我们可以使用它来生成我们希望使用*相位累加器*的任何频率：

```
const int BUFF_SIZE = 4096;  // size of output buffer (samples)
int16_t buff[BUFF_SIZE];     // output buffer

const int f = 1000;          // frequency we want to generate (Hz)

const float delta_phi = (float) f / Fs * LUT_SIZE;
                             // phase increment

float phase = 0.0f;          // phase accumulator

// generate buffer of output
for (int i = 0; i < BUFF_SIZE; ++i)
{
    int phase_i = (int)phase;        // get integer part of our phase
    buff[i] = LUT[phase_i];          // get sample value from LUT
    phase += delta_phi;              // increment phase
    if (phase >= (float)LUT_SIZE)    // handle wraparound
        phase -= (float)LUT_SIZE;
} 
```

`phase_i`注意：为了获得更高质量的输出，您可以在和处的 LUT 值之间使用线性插值`phase_i + 1`，但上述方法对于大多数音频应用来说已经足够了。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-20T06:50:17.890

通过查找表方法，人们可能希望有效地使用内存并仅存储正弦波的第一象限。

```
Then second quadrant = sin[180 - angle]  ; // for angles 90..180 degrees
third quadrant = -sin[angle-180];          // for 180..270
fourth quadrant = -sin[-angle+360]         // for 270..360 
```

我会推荐线性插值，但也有基于矢量旋转的正弦生成方法（同时产生正弦和余弦）

```
x_0 = 1, y_0 = 0;
x_n+1 = x_n * cos(alpha) - y_n * sin(alpha)
y_n+1 = x_n * sin(alpha) + y_n * cos(alpha), 
```

其中 alpha=*频率的相位差*== 2pi*fHz/Ts，fHz 是要产生的频率（以赫兹为单位），Ts 是采样时间（或 1/Ts = 采样频率，例如 44100 Hz）。

这导致了*谐振反馈滤波器*方法，其传递函数 f(z) 在单位圆 (z=e^jomegaT) 处具有两个共轭极点。

```
y[n] = y[n-1] - 2*cos(alpha) * y[n-2], with
y[0] = 0,
y[1] = sin(alpha) 
```

有趣的部分是可以随时更改 alpha (cos(alpha))。这种 IIR 滤波器方法的缺点是根据定义它是不稳定的。浮点，尤其是定点的不准确性累积并导致指数衰减或数量级的指数增长。然而，这可以通过允许轻微的相位失真来解决。

而不是在[CORDIC](http://www.dspguru.com/dsp/faqs/cordic)旋转中具有已知的每次迭代放大因子：

```
K = sqrt(1+sin(alpha)^2);

x' = x - y*sin(alpha);
y' = y + x*sin(alpha);

one can do

x' = x - y * sin(alpha);
y'' = y + x' * sin(alpha); 
```

它不会为 (x', y'') 产生完美的圆，但即使使用定点算法也会产生稳定的椭圆。（请注意，这假设 alpha 值相对较小，也意味着频率相对较低。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-20T17:11:04.770

If you want high precision, you can use a trig identities to have both a small LUT, and clean sine waves.

```
static float gTrigSinHi[256], gTrigSinLo[256];
static float gTrigCosHi[256], gTrigCosLo[256];

////////////////////////////////////////
// Sets up the fast trig functions
void FastTrigInit()
{
    unsigned i;
    for(i = 0; i < 256; ++i)
    {
        gTrigSinHi[i] = sin(2.0 * M_PI / 0xFFFF * (i << 8));
        gTrigSinLo[i] = sin(2.0 * M_PI / 0xFFFF * (i << 0));
        gTrigCosHi[i] = cos(2.0 * M_PI / 0xFFFF * (i << 8));
        gTrigCosLo[i] = cos(2.0 * M_PI / 0xFFFF * (i << 0));
    }
}

////////////////////////////////////////
// Implements sin as
//      sin(u+v) = sin(u)*cos(v) + cos(u)*sin(v)
float FastSin(unsigned short val)
{
    unsigned char hi = (val >> 8);
    unsigned char lo = (val & 0xFF);
    return gTrigSinHi[hi] * gTrigCosLo[lo]
        + gTrigCosHi[hi] * gTrigSinLo[lo];
}

////////////////////////////////////////
// Implements cos as
//      cos(u+v) = cos(u)*cos(v) - sin(u)*sin(v)
float FastCos(unsigned short val)
{
    unsigned char hi = (val >> 8);
    unsigned char lo = (val & 0xFF);
    return gTrigCosHi[hi] * gTrigCosLo[lo]
        - gTrigSinHi[hi] * gTrigSinLo[lo];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-24T21:10:28.380

很好的答案，这是经典软件DDS。这些天面临同样的问题。不需要使用浮点数

```
 UInt16 f = 400; // Hz, up to 16384 :)
        UInt16 delta = (UInt16)(((UInt32)f * LUT_SIZE ) / fmt_SamplesPerSec);
        UInt16 phase = 0;

        for (int i = 0; i < BUFF_SIZE; ++i)
        {
            buff[i] = LUT[phase];
            phase += delta;
            phase &= LUT_SIZE-1;
        } 
```

让相位环绕 LUT 大小作为掩码。并且不关心使用象限，因为出于我的目的，我已经有一个巨大的 MIPS 来满足这个要求。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-20T05:23:38.913

根据“http://en.wikipedia.org/wiki/X86_instruction_listings”，如果您有 x80387 或更新版本，则有一条正弦指令，所以直接调用它即可。您只需要弄清楚如何将一些内联汇编语言添加到您的程序中。这样，如果您的输入值与表中的值不完全匹配，您就不必担心。

# asp.net - “最近使用的项目”用户界面控件，如 Kindle Fire。

> ID：13466628
> 
> 赞同：0
> 
> 时间：2012-11-20T04:32:32.700
> 
> 标签：asp.net, asp.net-mvc, user-interface, kindle-fire

我使用 Kindle Fire，我喜欢他们的“最近使用的物品”用户界面（就在最喜欢的书架上方）。我想在 ASP.NET Web 应用程序中实现这种控件。

可能吗？如果是怎么办？

我正在尝试使某些东西与 Slider 一起使用，但它并不漂亮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T16:48:50.260

我建议考虑将每个“使用过的项目”的详细信息放在 cookie 或 localStorage 中，然后在页面加载时从中加载/读取。

# vb.net - 在 vb.net 中显示当前日期

> ID：13466629
> 
> 赞同：2
> 
> 时间：2012-11-20T04:32:39.547
> 
> 标签：vb.net, datetime-format

我正在使用 vb.net。我想如何显示从当前日期开始的接下来六天的日期。

```
 lblDate.Text = System.DateTime.Now.ToString("dd MMMM yyyy") 
```

此代码显示当前日期。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T06:41:03.090

您可以使用`AddDays`方法来提前当前日期的天数，并使用[String.Format](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)对其进行格式化。像这样的东西：

```
 lblDate.Text = String.Format("{0:dd MMMM yyyy}", Now.AddDays(6)) 
```

您还可以使用其他一些[DateTime](http://msdn.microsoft.com/en-us/library/497a406b.aspx)方法，例如**AddHours**、**AddMinutes**等，但这里最适合使用**AddDays**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T04:35:13.367

```
dim sixDaysfromNow as DateTime = Now.AddDays(6) 
```

参考：http: [//msdn.microsoft.com/en-us/library/system.datetime.adddays.aspx](http://msdn.microsoft.com/en-us/library/system.datetime.adddays.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T04:39:28.767

```
lblDate.Text = System.DateTime.Now.AddDays(6).ToString("dd MMMM yyyy") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T04:35:07.517

昏暗 6DaysFromNow = Now.AddDays(6).ToString("dd MMMM yyyy")

# iphone - Insert statement executed in run time but data not inserted in database in iPhone

> ID：13466632
> 
> 赞同：-1
> 
> 时间：2012-11-20T04:32:53.683
> 
> 标签：iphone, objective-c, cocoa-touch, sqlite

I tried to implement to insert data to `sqlite` database in many ways. In run time, the code executed returns the id that is inserted but when I check the database, nothing is inserted. Does anyone know what is the problem? Many thanks in advance. The code I implemented here:

```
sqlite3 *database;
sqlite3_stmt *addStmt;
NSFileManager *fileMgr = [NSFileManager defaultManager];
NSString *dbPath = [[[NSBundle mainBundle] resourcePath]stringByAppendingPathComponent:@"MoviePlayerMgmt.rdb"];
BOOL success =[fileMgr fileExistsAtPath:dbPath];
if(!success)
{
    NSLog(@"Cannot locate file %@",dbPath);

}
else{
    NSLog(@"__________Open the file__________ %@",dbPath);

    if(!(sqlite3_open([dbPath UTF8String], &database)==SQLITE_OK))
    {
        NSLog(@"An error has occured: %@",[NSString stringWithUTF8String:(char *) sqlite3_errmsg(database)]);
    }
    else{
        NSLog(@"Open database");
        NSString *strName = txtName.text;
                              NSLog(@"Computer name is %@",strName);
                             NSString *strIP = txtIP.text;
                             NSString *strPort = txtPort.text;
        NSString *insertStatement = [NSString stringWithFormat:@"INSERT INTO COMPUTER (computerName, IPAddress, portNumber) VALUES (\"%@\", \"%@\", \"%@\")", strName, strIP, strPort];

        char *error;
        if ( sqlite3_exec(database, [insertStatement UTF8String], NULL, NULL, &error) == SQLITE_OK)
        {
            int computerID = sqlite3_last_insert_rowid(database);

              NSLog(@"A computer inserted. %d",computerID);
              sqlite3_close(database);
        }
        else
        {
            NSLog(@"Error: %s", error);
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T04:44:18.533

应用程序的资源包是只读的（至少在真实的 iOS 设备上）。您无法写入应用程序资源包中的数据库。

第一次运行您的应用程序时，您需要将初始数据库从应用程序包复制到应用程序沙箱中的另一个可写目录。然后你总是用这个副本来阅读和写作。

编辑：

您还应该更改对`sqlite3_open`to的使用`sqlite3_open_v2`。这给了你更多的控制权。

此外，不要使用字符串格式创建类似于插入语句的查询。您应该使用 ? 每个变量的符号。然后使用适当的`sqlite3_bind_xxx`函数将适当的值绑定到语句。这将确保正确转义值。

# c++ - C++ 最小字符串宽度

> ID：13466638
> 
> 赞同：2
> 
> 时间：2012-11-20T04:33:40.217
> 
> 标签：c++, iostream

假设我有

```
string a = "foo"; 
```

如何使用确保最小宽度（例如 10）打印`a`到控制台？`printf`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-20T04:36:30.700

您可以使用*操纵器*设置输出的宽度，如下所示：[`setw`](http://www.cplusplus.com/reference/iostream/manipulators/setw/)

 *```
cout << setw(10) << a << endl; 
```

`iomanip`需要包含头文件才能编译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T04:35:31.007

您可以使用：

```
printf("%10s\n", a.c_str()); 
```

以上将右对齐字段中的字符串。如果您想要左对齐，请`%-10s`改用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T04:35:55.737

`printf("%10s", a.c_str());`

[填料]*

# c# - Why is Socket.Receive timing out on a half-closed connection when timeout is set to infinite?

> ID：13466639
> 
> 赞同：6
> 
> 时间：2012-11-20T04:33:54.977
> 
> 标签：c#, sockets, winsock

Below is a C# program demonstrating the problem.

The server starts listening on a socket. The client connects to the server, sends a message, uses Shutdown(SocketShutdown.Send) to close its send half of the connection to let the server know where the end of the message is, and waits for a response from the server. The server reads the message, does some lengthy computation (simulated here with a sleep call), sends a message to the client, and closes the connection.

On Windows, the client's Receive call always fails after exactly 2 minutes with "A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond" even though the timeout is set to infinite.

If I run the program in Linux with Mono, the timeout does not occur even if I set the "lengthy operation" to 10 minutes, but it happens in Windows whether I run it with Mono or .NET. If I set the timeout to 1 second, it times out after 1 second. In other words, it times out in the timeout I set or 2 minutes, whichever is less.

A similar sample program in which the server sends a message to the client, with no message from client to server and no half-close, works as expected with no timeout.

I can get around this by modifying my protocol to use some other method of indicating to the server when a message is complete (perhaps prefixing the message with the length of the message). But I want to know what's going on here. Why does Socket.Receive time out on a half-closed connection when the timeout is set to infinite?

From what I understand, a connection with only its send half closed should be able to continue receiving data indefinitely. It seems unlikely that there would be a bug in such a fundamental part of Windows. Am I doing something wrong?

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading;
using System.Net.Sockets;
using System.Net;
using System.Threading.Tasks;
using System.Diagnostics;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            // Start server thread
            Thread serverThread = new Thread(ServerStart);
            serverThread.IsBackground = true;
            serverThread.Start();

            // Give the server some time to start listening
            Thread.Sleep(2000);

            ClientStart();
        }

        static int PortNumber = 8181;

        static void ServerStart()
        {
            TcpListener listener = new TcpListener(new IPEndPoint(IPAddress.Any, PortNumber));
            listener.Start();
            while (true)
            {
                TcpClient client = listener.AcceptTcpClient();
                Task connectionHandlerTask = new Task(ConnectionEntryPoint, client);
                connectionHandlerTask.Start();
            }
            listener.Stop();
        }

        static void ConnectionEntryPoint(object clientObj)
        {
            using (TcpClient client = (TcpClient)clientObj)
            using (NetworkStream stream = client.GetStream())
            {
                // Read from client until client closes its send half.
                byte[] requestBytes = new byte[65536];
                int bufferPos = 0;
                int lastReadSize = -1;
                while (lastReadSize != 0)
                {
                    lastReadSize = stream.Read(requestBytes, bufferPos, 65536 - bufferPos);
                    bufferPos += lastReadSize; 
                }
                client.Client.Shutdown(SocketShutdown.Receive);
                string message = Encoding.UTF8.GetString(requestBytes, 0, bufferPos);

                // Sleep for 2 minutes, 30 seconds to simulate a long-running calculation, then echo the client's message back
                byte[] responseBytes = Encoding.UTF8.GetBytes(message);
                Console.WriteLine("Waiting 2 minutes 30 seconds.");
                Thread.Sleep(150000);

                try
                {
                    stream.Write(responseBytes, 0, responseBytes.Length);
                }
                catch (SocketException ex)
                {
                    Console.WriteLine("Socket exception in server: {0}", ex.Message);
                }
            }
        }

        static void ClientStart()
        {
            using (Socket socket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp))
            {
                // Set receive timeout to infinite.
                socket.ReceiveTimeout = -1;

                // Connect to server
                socket.Connect(IPAddress.Loopback, PortNumber);

                // Send a message to the server, then close the send half of the client's connection
                // to let the server know it has the entire message.
                string requestMessage = "Hello";
                byte[] requestBytes = Encoding.UTF8.GetBytes(requestMessage);
                socket.Send(requestBytes);
                socket.Shutdown(SocketShutdown.Send);

                // Read the server's response. The response is done when the server closes the connection.
                byte[] responseBytes = new byte[65536];
                int bufferPos = 0;
                int lastReadSize = -1;

                Stopwatch timer = Stopwatch.StartNew();
                try
                {
                    while (lastReadSize != 0)
                    {
                        lastReadSize = socket.Receive(responseBytes, bufferPos, 65536 - bufferPos, SocketFlags.None);
                        bufferPos += lastReadSize;
                    }

                    string responseMessage = Encoding.UTF8.GetString(responseBytes, 0, bufferPos);
                    Console.WriteLine(responseMessage);
                }
                catch (SocketException ex)
                {
                    // Timeout always occurs after 2 minutes. Why?
                    timer.Stop();
                    Console.WriteLine("Socket exception in client after {0}: {1}", timer.Elapsed, ex.Message);
                }
            }
        }
    }
} 
```

The following program prefixes messages with a 4-byte message length rather than using socket.Shutdown(SocketShutdown.Send) to signal end of message. The timeout does **not** occur in this program.

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Net.Sockets;
using System.Net;
using System.Threading.Tasks;
using System.Diagnostics;
using System.Threading;

namespace WithoutShutdown
{
    class Program
    {
        static void Main(string[] args)
        {
            // Start server thread
            Thread serverThread = new Thread(ServerStart);
            serverThread.IsBackground = true;
            serverThread.Start();

            // Give the server some time to start listening
            Thread.Sleep(2000);

            ClientStart();
        }

        static int PortNumber = 8181;

        static void ServerStart()
        {
            TcpListener listener = new TcpListener(new IPEndPoint(IPAddress.Any, PortNumber));
            listener.Start();
            while (true)
            {
                TcpClient client = listener.AcceptTcpClient();
                Task connectionHandlerTask = new Task(ConnectionEntryPoint, client);
                connectionHandlerTask.Start();
            }
            listener.Stop();
        }

        static void SendMessage(Socket socket, byte[] message)
        {
            // Send a 4-byte message length followed by the message itself
            int messageLength = message.Length;
            byte[] messageLengthBytes = BitConverter.GetBytes(messageLength);
            socket.Send(messageLengthBytes);
            socket.Send(message);
        }

        static byte[] ReceiveMessage(Socket socket)
        {
            // Read 4-byte message length from the client
            byte[] messageLengthBytes = new byte[4];
            int bufferPos = 0;
            int lastReadSize = -1;
            while (bufferPos < 4)
            {
                lastReadSize = socket.Receive(messageLengthBytes, bufferPos, 4 - bufferPos, SocketFlags.None);
                bufferPos += lastReadSize;
            }
            int messageLength = BitConverter.ToInt32(messageLengthBytes, 0);

            // Read the message
            byte[] messageBytes = new byte[messageLength];
            bufferPos = 0;
            lastReadSize = -1;
            while (bufferPos < messageLength)
            {
                lastReadSize = socket.Receive(messageBytes, bufferPos, messageLength - bufferPos, SocketFlags.None);
                bufferPos += lastReadSize;
            }

            return messageBytes;
        }

        static void ConnectionEntryPoint(object clientObj)
        {
            using (TcpClient client = (TcpClient)clientObj)
            {
                byte[] requestBytes = ReceiveMessage(client.Client);
                string message = Encoding.UTF8.GetString(requestBytes);

                // Sleep for 2 minutes, 30 seconds to simulate a long-running calculation, then echo the client's message back
                byte[] responseBytes = Encoding.UTF8.GetBytes(message);
                Console.WriteLine("Waiting 2 minutes 30 seconds.");
                Thread.Sleep(150000);

                try
                {
                    SendMessage(client.Client, responseBytes);
                }
                catch (SocketException ex)
                {
                    Console.WriteLine("Socket exception in server: {0}", ex.Message);
                }
            }
        }

        static void ClientStart()
        {
            using (Socket socket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp))
            {
                // Set receive timeout to infinite.
                socket.ReceiveTimeout = -1;

                // Connect to server
                socket.Connect(IPAddress.Loopback, PortNumber);

                // Send a message to the server
                string requestMessage = "Hello";
                byte[] requestBytes = Encoding.UTF8.GetBytes(requestMessage);
                SendMessage(socket, requestBytes);

                // Read the server's response.
                Stopwatch timer = Stopwatch.StartNew();
                try
                {
                    byte[] responseBytes = ReceiveMessage(socket);
                    string responseMessage = Encoding.UTF8.GetString(responseBytes);
                    Console.WriteLine(responseMessage);
                }
                catch (SocketException ex)
                {
                    // Timeout does not occur in this program because it does not call socket.Shutdown(SocketShutdown.Send)
                    timer.Stop();
                    Console.WriteLine("Socket exception in client after {0}: {1}", timer.Elapsed, ex.Message);
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T04:38:59.247

此行为是设计使然。当客户端在连接上关闭了它的一半并且服务器确认关闭时，客户端处于 FIN_WAIT_2 状态，等待服务器关闭连接。[http://support.microsoft.com/kb/923200](http://support.microsoft.com/kb/923200)声明有 2 分钟的 FIN_WAIT_2 超时。如果连接处于 FIN_WAIT_2 状态时，2 分钟内没有收到数据，客户端会强制关闭连接（带有 RST）。

> 默认情况下，在 Windows Server 2003 中，TCP 连接必须在 TCP 连接状态设置为 FIN_WAIT_2 两分钟后关闭。

[这篇旧的 Apache 文章](http://httpd.apache.org/docs/2.0/misc/fin_wait_2.html)提出了超时的原因：恶意或行为不端的应用程序可以通过永不关闭连接端来无限期地将连接的另一端保持在 FIN_WAIT_2 中，从而占用操作系统资源。

[Linux显然也有超时](http://manpages.ubuntu.com/manpages/precise/man7/tcp.7.html)你可以用

$ cat /proc/sys/net/ipv4/tcp_fin_timeout

我不确定为什么我在 Linux 上没有发生超时。也许是因为它是一个环回连接，因此 DoS 攻击不是问题，或者环回连接使用不使用 tcp_fin_timeout 设置的不同代码？

底线：操作系统有充分的理由使连接超时。避免使用 Shutdown 作为应用层信号机制，而是使用实际的应用层方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T10:09:40.707

`Socket.Receive``ReceiveTimeout`似乎有两分钟的上限。据说这是在注册表中指定的内容，尽管我找不到任何具体证据证明此内容的真实性或要修改的密钥。这可能解释了 Linux 与 Windows 上的不同行为。

我为此研究了各种解决方案，但最简单的（也是唯一有效的）可能是让服务器端每隔几秒发送一次心跳。从本质上讲，这只是确保您永远不会遇到两分钟的超时。

```
string boundary = string.Format("--{0}--", Guid.NewGuid());
byte[] boundaryBytes = Encoding.ASCII.GetBytes(boundary);

//Every 15 seconds write a byte to the stream.
for (int i = 0; i < 10; i++)
{
    stream.WriteByte(0);
    Thread.Sleep(15000);
}

//Indicate where the end of the heartbeat bytes is.
stream.Write(boundaryBytes, 0, boundaryBytes.Length);

//Same code as before.
try
{
    stream.Write(responseBytes, 0, responseBytes.Length);
}
catch (SocketException ex)
{
    Console.WriteLine("Socket exception in server: {0}", ex.Message);
} 
```

我在这里所做的是模拟一个长时间运行的任务（它总共会休眠 2.5 分钟），但是每 15 秒它会向流中写入一个字节以防止超时。

这样做的问题是你在响应开始时会遇到一堆不需要的垃圾。这就是它的`boundaryBytes`用武之地：有了这些，您可以清楚地将不需要的位与实际结果区分开来。重要的是客户**必须**预先知道边界是什么。

**编辑：**

我从您下面的评论中看到，删除`socket.Shutdown(SocketShutdown.Send)`似乎可以解决问题。我自己也想过这个问题，但并没有真正研究它。

我不明白的是为什么调用这个方法会有它的效果。进行一些反编译，该`Shutdown`方法基本上`shutdown`通过 pinvoke 调用底层 WinSock 库（ws2_32.dll）中的方法，进行一些错误处理，然后将套接字设置为断开连接。在没有任何其他信息的情况下，这表明 2 分钟问题是在该 WinSock 调用中创建的。

我试图通过在事件查看器中[启用 WinSock 日志记录](http://msdn.microsoft.com/en-us/library/windows/desktop/bb892100(v=vs.85).aspx)来诊断这一点，但似乎没有任何明显的迹象表明为什么会发生这种情况。

在 WinSock 级别进行更多研究会发现以下问题：

[Winsock recv 关机后不工作](https://stackoverflow.com/questions/9846165/winsock-recv-not-working-after-shutdown)

[使用 Winsock2 将 Send() 和 Recv() 相乘](https://stackoverflow.com/questions/3322538/multipe-sends-and-recvs-using-winsock2?rq=1)

[当客户端仅关闭发送的一半连接时，为什么 HTTP 服务器会关闭连接？](https://stackoverflow.com/questions/13150910/why-http-server-close-the-connection-when-client-close-only-the-send-half-of-the?lq=1)

[为什么 .Net Socket.Disconnect 需要两分钟？](https://stackoverflow.com/questions/4346120/why-does-net-socket-disconnect-take-two-minutes)

共同的主题似乎是，`socket.Shutdown(SocketShutdown.Send)`如果您打算在之后使用套接字进行接收，这不是一个好主意。此方法将属性设置为 false 的事实`socket.Connected`可能很能说明问题。

上面列表中的最后一个链接在 2 分钟的情况下似乎相当接近标记，尽管 OP 指的是注册表设置，但没有说明它们是什么。

# php - How to break a line after some word length in php

> ID：13466640
> 
> 赞同：0
> 
> 时间：2012-11-20T04:33:59.860
> 
> 标签：php, javascript, codeigniter

I am retrieving data and print it as paragraph. I am facing a problem that paragraph width is default by system. I want to break the line (like br property). I have used css property 'break all' but it is not working in some version of mozila. I have used fixed width and many html css property, but in old version of mozila it is not running well. May you tell me how can we this problem in java script or php. I am zonked.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T07:59:38.413

计算要打印的数据长度。

您可以使用以下代码计算数据长度：

```
 strlen($data); 
```

假设数据长度为 200。您想在 100 个字符后换行，请尝试以下代码：

```
<?php
 echo substr($data,0,100);echo"<br>";
 echo substr($data,101,200);
 ?> 
```

希望它对你有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T04:47:49.897

如果您想以特定的最大字符数换行，那么我相信您可以实现该代码。当您必须在自己的代码中执行时，在字数上换行通常会变得更加复杂，因为有许多例外情况，例如已经连字符的单词（在连字符处换行）或不应跨行换行的短语。一些很长的单词应该用代码连字符并在连字符上断开。如果您想做好工作，这将成为排版问题而不是简单的脚本。否则，坚持使用 css 和 html 标签，以不涉及艰苦工作的一致方式完成工作。我想如果您发布您当前的 html 和 css 并让我们知道什么版本的 mozilla，我们可以尝试提供帮助。如果您寻找它，我确定那里有 javascript 或 php 换行代码。

# html - Extracting a class from the section attribute using xsl

> ID：13466641
> 
> 赞同：1
> 
> 时间：2012-11-20T04:34:15.030
> 
> 标签：html, xml, xslt, xpath

I have a XSLT question which follows on from the question I asked last week. [XSL for Xml: Inserting specific classes using XSL](https://stackoverflow.com/questions/13353255/xsl-for-xml-inserting-specific-classes-using-xsl)

The challenge is to insert classes according to the section attribute. I have an example XSLT solution from my previous question provided by @Kirill Polishchuk, but I can not this solution if I have very large data set.

I just need to extract the text after the underscore in the section attribute and use it as a class in the output xml. I'm puzzled at the moment.

Please note I'm working with XSLT 1.0\. Any advice or guidance will be much appreciate.

Thank You JJ.

Input:

```
<root>
  <page number="1" section="Arsenal_Stadium">Arsenal_Stadium</page> 
  <page number="2" section="Arsenal_Stadium">Arsenal_Stadium</page> 
  <page number="3" section="Arsenal_Stadium">Arsenal_Stadium</page> 
  <page number="4" section="Arsenal_Stadium">Arsenal_Stadium</page> 
  <page number="5" section="Arsenal_Stadium">Arsenal_Stadium</page> 
  <page number="6" section="Arsenal_Stadium">Arsenal_Stadium</page> 
  <page number="7" section="Arsenal_Stadium">Arsenal_Stadium</page> 
  <page number="8" section="Arsenal_Crowds">Arsenal_Crowds</page> 
  <page number="9" section="Arsenal_Crowds">Arsenal_Crowds</page> 
  <page number="10" section="Arsenal_Crowds">Arsenal_Crowds</page> 
  <page number="11" section="Arsenal_Crowds">Arsenal_Crowds</page> 
  <page number="12" section="Arsenal_Crowds">Arsenal_Crowds</page> 
  <page number="13" section="Arsenal_Finances">Arsenal_Finances</page> 
  <page number="14" section="Arsenal_Finances">Arsenal_Finances</page> 
  <page number="15" section="Arsenal_Finances">Arsenal_Finances</page> 
  <page number="16" section="Arsenal_Finances">Arsenal_Finances</page> 
  <page number="17" section="Arsenal_Finances">Arsenal_Finances</page> 
  <page number="18" section="Arsenal_Finances">Arsenal_Finances</page> 
  <page number="19" section="Arsenal_Finances">Arsenal_Finances</page> 
  <page number="20" section="Arsenal_Outlook">Arsenal_Outlook</page> 
  <page number="21" section="Arsenal_Outlook">Arsenal_Outlook</page> 
  <page number="22" section="Arsenal_Outlook">Arsenal_Outlook</page> 
  <page number="23" section="Arsenal_Outlook">Arsenal_Outlook</page> 
  <page number="24" section="Arsenal_Outlook">Arsenal_Outlook</page> 
 </root> 
```

Output:

```
<table>
<tr>
<td class="Stadium">Arsenal_Stadium</td>
<td></td>
<td class="Crowds">Arsenal_Crowds</td>
<td></td>
<td class="Finances">Arsenal_Finances</td>
<td></td>
<td class="Outlook">Arsenal_Outlook</td>
<td></td>
</tr>
<tr>
<td>1</td>
<td>7</td>
<td>8</td>
<td>12</td>
<td>13</td>
<td>19</td>
<td>20</td>
<td>24</td>
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T04:49:01.767

从我的回答中稍微修改了 XSLT：[https](https://stackoverflow.com/a/13225163/787016) ://stackoverflow.com/a/13225163/787016 。它添加`class`属性并使用`substring-after`函数来提取属性的正确部分`section`。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" omit-xml-declaration="yes" indent="yes"/>

  <xsl:key name="k" match="page" use="@section"/>

  <xsl:template match="/root">
    <table>
      <tr>
        <xsl:apply-templates select="page[generate-id() = generate-id(key('k', @section))]"/>
      </tr>
      <tr>
        <xsl:apply-templates select="page[generate-id() = generate-id(key('k', @section))]" mode="page"/>
      </tr>
    </table>
  </xsl:template>

  <xsl:template match="page">
    <td class="{substring-after(@section, '_')}">
      <xsl:value-of select="."/>
    </td>
    <td></td>
  </xsl:template>

  <xsl:template match="page" mode="page">
    <td>
      <xsl:value-of select="@number"/>
    </td>
    <td>
      <xsl:value-of select="key('k', @section)[last()]/@number"/>
    </td>
  </xsl:template>

</xsl:stylesheet> 
```

# firefox - Firefox 中的按钮高度呈现不一致 - 为什么输入元素更高？

> ID：13466643
> 
> 赞同：2
> 
> 时间：2012-11-20T04:34:16.410
> 
> 标签：firefox, button, height

考虑以下两个元素：

```
<button type="submit" class="button">Test</button>
<a href="#" class="button">Test 2</a> 
```

...使用以下样式定义：

```
.button {
    background-color: yellow;
    color: white;
    border: 1px solid orange;
    display: inline-block;
    font-size: 24pt;
    padding: 2px 16px;
    text-decoration: none;
} 
```

这会在 Chrome 中产生两个并排且高度相等的按钮。但是，Firefox 将左侧的按钮呈现为`1px`比右侧的按钮（`<a>`）更大的高度：

![在此处输入图像描述](../Images/cb46d8621640012d9f90caf25123ece7.png)

  ^(（我将上面的图像放大了 2 倍。）)

我需要做什么才能使两个按钮具有相同的高度？似乎`font-size`是导致问题的原因-但我需要该属性。

* * *

小提琴：http: [//jsfiddle.net/FfRPY/](http://jsfiddle.net/FfRPY/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T06:25:24.347

**尤里卡！**

[此答案](https://stackoverflow.com/a/10274054/193619)中的解决方案完全消除了高度差：

```
.button::-moz-focus-inner {
  border: 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T04:56:04.733

使用此代码：

```
.button {
    background-color: yellow;
    border: 1px solid orange;
    color: white;
    display: inline-block;
    font-family: arial;
    font-size: 24pt;
    line-height: 40px;
    overflow: visible;
    padding: 2px 16px;
    text-decoration: none;
    vertical-align: top;
}

<a href="#" class="button">Test 2</a>
<input type="submit" class="button" value="Test 2"/> 
```

# asp.net - 如何在继承的 Web 表单中使用 request.form[]

> ID：13466646
> 
> 赞同：0
> 
> 时间：2012-11-20T04:34:41.930
> 
> 标签：asp.net, webforms, master-pages, request.form

我有一个母版页和一个从该母版页继承的 Web 表单，

标签位于母版页中，其中包含内容占位符

```
Master Page:
    <form runat="server">
        <asp:ContentPlaceHolder ID="MainContent" runat="server" />
    </form> 
```

Web 表单实现该内容占位符。

```
WebForm.aspx:
    <asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
        <asp:TextBox ID="tbAmount" runat="server" />
    </asp:content> 
```

在 Web 表单背后的代码中，我想使用 Request.Form["tbAmount"] 来获取 TextBox 的文本。

我知道在这种情况下使用 TextBox.Text 将是最简单的方法，但不要问我为什么，因为这需要几个小时来解释。

假设我在 aspx.cs 而不是 aspx 中创建了一个 TextBox。

回发后如何使用 Request.Form["tbAmount"] 获取其文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T06:16:45.990

您将无法直接使用 Request.Form["tbAmount"]，您必须使用文本框的 clientid

```
Request.Form[tbAmount.ClientId] 
```

这是因为asp.net控件的ID和对应的HTML控件的ID不相同，必须使用ClientId属性才能访问。

# mysql - update on duplicate key update

> ID：13466647
> 
> 赞同：8
> 
> 时间：2012-11-20T04:34:50.467
> 
> 标签：mysql, sql-update, on-duplicate-key

I have a table `playerspoints` that contains a shop id and a player's id, and a player's points.

```
 SHOP_ID   |     PLAYER_ID     |  POINTS
  ----------------------------------------
      1     |        7          |     66
      2     |        4          |     33 
```

What I want to do is transfer points from a shop to the other.

*   Problem: shop id and players id form a unique index.
*   What I want to do is on duplicate key update, instead of let it fail, to add the points of one entry to the other and delete the "from" entry.

Something like:

```
UPDATE `playerspoints`
SET `boardId`=$to
WHERE `boardId`=$from
ON DUPLICATE KEY UPDATE `points`=.... 
```

Do you get the idea?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T04:45:36.517

您只能在该`ON DUPLICATE KEY`区域的一个冲突行的上下文中进行更改。此外，据我所知，这是该[`INSERT`](http://dev.mysql.com/doc/refman/5.5/en/insert-on-duplicate.html)语句的一个属性。

您需要的是一个简单的分类帐，您可以在其中记录余额中的加减，然后手动或使用触发器将它们制成表格。

例如，最简单的方法是：

```
INSERT INTO points_adjustments (boardId_from, boardId_to, points)
  VALUES (?, ?, ?) 
```

这可能更容易表示为一对条目：

```
INSERT INTO points_adjustments (boardId, points)
  VALUES (?, ?) 
```

您将为 +n 点添加一个条目，并为 -n 添加一个匹配的条目。您可以随时使用`SUM(points)`. 您可以将其包装在 a`VIEW`中以使检索更容易，或者如果您愿意，可以使用触发器将总和非规范化到另一个表的列中。

一个简单的触发器将为每个受影响的 发出以下语句`boardId`：

```
INSERT INTO balances (boardId, points) VALUES (?, ?)
  ON DUPLICATE KEY SET points=points+VALUES(points) 
```

这首先避免了关键冲突，并提供了已发生交易的可审计记录。

无论如何，要自动完成所有这些操作，您可能必须使用触发器。

### 第三方编辑

来自文档 [INSERT ... ON DUPLICATE KEY UPDATE 语句](https://dev.mysql.com/doc/refman/8.0/en/insert-on-duplicate.html#docs-body)

> 通常，您应该尽量避免对具有多个唯一索引的表使用 ON DUPLICATE KEY UPDATE 子句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T04:46:40.867

不可以。您不能在 MySQL 中违反约束时删除记录。您可能会执行更新前触发器来检查即将发生的约束违规，但即便如此（从 5.1 开始）您也无法修改同一个表的数据（在这种情况下这可能会导致无限循环）。

塔德曼回答前只完成了一半。我个人喜欢他的想法。

# java - 线程状态之间的差异

> ID：13466648
> 
> 赞同：0
> 
> 时间：2012-11-20T04:34:53.193
> 
> 标签：java, multithreading, synchronized, thread-sleep, thread-synchronization

在 java 中，线程可以通过两种方式由**用户**（通过调用 sleep 或 wait）或由**同步块**停止。当线程尝试进入同步块时（如果其他线程获得了相同的锁），线程停止工作或被阻塞（等待其他线程释放锁）。

所以我想知道被同步块阻塞的线程状态（状态是指线程变量、上下文等）和java中的睡眠等用户方法是否有任何差异。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T04:52:23.267

**-**当线程正在执行`IO`操作或执行`sychronized`块时，它**不能被中断。**

**-**当a`thread`试图访问一个已经被其他线程占用的对象块时，这个试图访问同步块的线程将**进入**`synchronized`状态。**`key``block`**

# javascript - 耦合异步脚本

> ID：13466656
> 
> 赞同：0
> 
> 时间：2012-11-20T04:35:49.153
> 
> 标签：javascript

请帮我解决检测异步脚本何时加载的问题。实际上，我的网站上有一个异步加载的实时聊天按钮，这个小部件的脚本被混淆了。加载此脚本后，我需要在聊天按钮上设置一个事件监听器。Window.onload 在聊天按钮出现之前触发。请指教。

代码：

```
_shcp = [];
_shcp.push({
    widget_id: xxxxxx,
    widget: "Chat",
    side: "left",
    position: "center",
    template: "orange",
    title: "Live help",
    text_layout: "trans",
    track: 1
});
(function () {
    var hcc = document.createElement("script");
    hcc.type = "text/javascript";
    hcc.async = true;
    hcc.src = ("https:" == document.location.protocol ? "https" : "http") + "://widget.siteheart.com/apps/js/sh.js";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hcc, s.nextSibling);
})(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T06:27:58.510

最好的选择是，如果您的聊天按钮有一个 API，您可以在加载时附加一个回调。这就是大多数其他库（如谷歌地图、YUI 和 jQuery）处理元素动态加载的方式。

但如果这不可用，您的下一个最佳选择是轮询该元素的存在：

```
setTimeout(function checkChatButton (){
    var button = document.getElementById(chat_button_id);
    if (button) {
        /* Button is loaded!
         *
         * Do what you need to do here
         */
    }
    else {
        setTimeout(checkChatButton,500);
    }
},500); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T06:50:23.223

在底部块内部，即脚本加载块，向脚本添加一个侦听器。

```
hcc.onload = function () {
    var button = document.getElementById("the_button");
    button.onclick = function () { doStuff(); };
}; 
```

在文件被附加到 DOM`.onload` ***之前***设置。
安全的方法是将它放在为 AJAX 调用或图像加载（在`src`设置之前）设置侦听器的相同位置。
如果您想记住它，脚本直到您将它们添加到页面后才会真正开始加载，而图像会在您设置`.src`-- 每次设置源之前设置您的侦听器后立即加载，这样您就不必记住这个。

有更好、更多的 DOM-3.0 方法可以做到这一点，但这很好也很简单。

如果需要支持 IE7 或更低版本，则需要改为监听`.onreadystatechange`：

```
hcc.onreadystatechange = function () {
    if (hcc.readyState === "loaded" || hcc.readyState === "complete") {
        var button = document.getElementById("the_button");
        button.onclick = function () { doStuff(); };
    }
} 
```

将它们放在页面上有点难看，但知道脚本何时加载并完成运行是一个非常简单的修复。

# c# - Visual Studio 2010 和安装 Silverlight 小工具

> ID：13466660
> 
> 赞同：-1
> 
> 时间：2012-11-20T04:36:21.800
> 
> 标签：c#, silverlight

我下载了 Silverlight 小工具扩展并创建了一个新项目并对其进行了调试。很好很好，但是我如何在其他项目中使用这个小工具呢？也就是说，我应该如何发布一个新创建的小工具？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T07:52:48.103

调试 Silverlight 项目后，新创建的小工具将在“ `Project1\SilverlightGadgetDebugger\bin\Debug\Gadgets\SilverlightSidebarGadget\Publish`”目录中。您可以安装此小工具并显示您新创建的小工具。

# asp.net - 如何使用asp.net c#限制标签中的文本

> ID：13466662
> 
> 赞同：1
> 
> 时间：2012-11-20T04:36:38.417
> 
> 标签：asp.net

我正在从数据库中获取文本到转发器中的标签。数据库中的文本很大。我希望它限制为只有 3 行...

```
<asp:Label Text='<%# Eval("JobDescription")%>' runat="server"></asp:Label> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T05:04:16.583

你可以试试这个

```
<asp:Label CssClass="ShortDesc" Text='<%# Eval("JobDescription")%>' runat="server"></asp:Label> 
```

CSS

```
.ShortDesc
{
   height:50px;
   Overflow:hidden;
} 
```

或限制为 200 或 N 个字符

```
<asp:Label CssClass="ShortDesc" Text='<%# Eval("JobDescription").ToString().SubString(0,Math.Min(200,Eval("JobDescription").ToString().Length)) %>' runat="server"></asp:Label> 
```

或从您的数据库返回简短描述

```
SELECT substring(JobDescription,1,200)+'...' AS ShortJobDescription, JobDescription From Jobs 
```

并在你的中继器中使用它

```
<asp:Label CssClass="ShortDesc" Text='<%# Eval("ShortJobDescription")%>' runat="server"></asp:Label> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T04:39:04.573

使用 CSS 设置标签样式。限制元素的高度并将溢出设置为无。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T05:18:11.853

您可以从数据库中获取一些特定数量的字符，如果您使用 sql server 作为数据库，例如 25 个字符而不破坏句子，则使用 sql 查询，如下所示：

```
 SELECT LEFT(LEFT(column_name, 25), LEN(LEFT(column_name, 25)) - CHARINDEX(' ', REVERSE(LEFT(column_name, 25)))) FROM tbl_Name 
```

上面的查询将返回前 25 个字符而不会中断句子。您可以通过替换 25 个字符来修改查询，该字符与您想为标签分配文本的字符一样多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-29T14:06:20.123

```
 {
  <asp:TemplateField HeaderText="Name">
  <ItemTemplate>
    <asp:Label ID="fileName" runat="server" ToolTip='<%# Eval("fileName") %>' Text='<%# Eval("fileName") %>' ></asp:Label>
  </ ItemTemplate >
  <ItemStyle Width="35%" CssClass="fontWeight limitWidth"/>
 }

Inn .css
.limitWidth {
 white-space: nowrap;     
 max-width: 100px;
 text-overflow: ellipsis;
 overflow-x: hidden;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-27T14:51:58.087

我必须将标签包装在 div 中并应用 css：

```
 <div class="labelLimit">
     <asp:Label  runat="server" Text='<%#Eval("Body") %>' ></asp:Label>
   </div>

.labelLimit{
   height:120px;
   Overflow:hidden;    
 text-overflow: ellipsis;
 overflow-x: hidden;
} 
```

# windows-phone-7 - 在 Windows Phone 7.5 中获取发件人的 IP 地址

> ID：13466665
> 
> 赞同：-2
> 
> 时间：2012-11-20T04:37:16.587
> 
> 标签：windows-phone-7, windows-phone

我的架构涉及连接到 Windows Phone（运行 7.5 版本）的多部手机。我想获取发送请求的电话的 IP 地址。我看过各种论坛，但无法获得足够的信息。

你能告诉我如何找到发件人的IP地址吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T07:43:41.510

Kishan，您需要发出http请求才能在Windows Phone 7中获取当前用户的IP，因为WP7中没有直接的方法或API来获取客户端IP。这是有关如何获取用户IP的详细帖子。

[http://compiledexperience.com/windows-phone/tutorials/my-ip](http://compiledexperience.com/windows-phone/tutorials/my-ip)

# java - 国际象棋棋子移动问题

> ID：13466671
> 
> 赞同：2
> 
> 时间：2012-11-20T04:37:52.607
> 
> 标签：java, chess

我正在用Java制作国际象棋游戏，而棋子给我带来了麻烦。老实说，我不知道为什么，因为他们的动作是最简单的。这是 Piece 声明和 Pawn（扩展 Piece）声明。运动类定义了一个简单的 x;y 对象，我用它来标记板上可能的运动目标。我有一个 GameHandler 类，以后会根据游戏规则清除所有不可能的运动。但是 Pawn 的移动数组似乎很干净；所有其他作品的动作都像奇迹一样工作！提前致谢！

件类

```
public abstract class Piece{
    protected int x, y;
    protected boolean isWhite;
    protected ArrayList<Movement> moves;
    public Piece(int x, int y, boolean isWhite) {
        this.x=x;
        this.y=y;
        this.isWhite = isWhite;
        moves = new ArrayList<Movement>();
    }
    public abstract ArrayList<Movement> getMoves();
    //obvious methods
    public int getX()
    public int getY()
    public boolean isWhite()
    //end obvious methods
    public void setCoordinates(int x, int y){
        this.x=x;
        this.y=y;
    }   
} 
```

典当类

```
public class Pawn extends Piece{
    public Pawn(int x, int y, boolean isWhite){
        super(x,y,isWhite);
    }
    public ArrayList<Movement> getMoves() {
        moves.clear();
        if(isWhite){
            if(y>0) moves.add(new Movement(x, y-1));
            if(y==7) moves.add(new Movement(x, y-2));
        }else{
            if(y<7) moves.add(new Movement(x, y+1));
            if(y==0) moves.add(new Movement(x, y+2));
        }
        return moves;
    }
} 
```

编辑：添加 King 类作为参考

```
public class King extends Piece{
    public King(int x, int y, boolean isWhite){
        super(x,y,isWhite);
    }
    public ArrayList<Movement> getMoves() {
        moves.clear();
        if(y-1>=0 && x-1>=0) moves.add(new Movement (x-1, y-1));
        if(y-1>=0 && x+1<8) moves.add(new Movement (x+1, y-1));
        if(y+1<8 && x+1<8) moves.add(new Movement (x+1, y+1));
        if(y+1<8 && x-1>=0) moves.add(new Movement (x-1, y+1));
        if(y-1>=0) moves.add(new Movement (x, y-1));
        if(y+1<8) moves.add(new Movement (x, y+1));
        if(x+1<8) moves.add(new Movement (x+1, y));
        if(x-1>=0) moves.add(new Movement (x-1, y));
        return moves;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T17:14:14.133

我认为这行有一个错误：

```
if(isWhite){
        if(y>0) moves.add(new Movement(x, y-1));
        ... 
```

应该：

```
if(!isWhite) {
   if(y> ... 
```

（所以当它向前移动时，黑棋而不是白棋棋子的等级会降低）。

如前所述，棋子移动是最难编码的 - 它可以从起始位置向前移动 2 个方格（但前提是前面没有其他棋子），它沿对角线捕获，它可以提升到其他 4 个中的一个件类型。另外，考虑这个位置：

[![国际象棋图](../Images/43bacb83ebaf84546ff732abf94be9a5.png)](https://i.stack.imgur.com/pX3dD.jpg)

在这里（假设白方要移动）白棋根本没有合法的移动，因为它被黑主教钉住了。但是，如果黑方的最后一步是 c7-c5，那么白棋可以捕获黑棋并移动到 c6（[“过路”规则](https://en.wikipedia.org/wiki/En_passant)）。

`x`您可以通过分别重命名和`y`as`file`和来提高代码的可读性`rank`。我也会考虑引入一个

```
enum PieceColour {
   WHITE, BLACK
} 
```

并使用`PieceColour pieceColour`and`if (pieceColour == PieceColour.BLACK)`代替`boolean isWhite`and `if(!isWhite)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T05:29:08.777

好的一个想法。

看看你的 if 语句。

尝试

```
if(this.isWhite) 
```

或者

```
if(isWhite()) 
```

同样对于棋盘，我认为您应该检查位置是否等于 1 或 6。不是 0 或 7。

# ruby-on-rails-3 - Rails：通过 ID 访问记录

> ID：13466672
> 
> 赞同：0
> 
> 时间：2012-11-20T04:37:57.097
> 
> 标签：ruby-on-rails-3, activerecord

我试图通过简单地引用它的 ID 来访问记录，因此：

```
def article_by_id(a)
  @article = Article.where(:id => a)
end 
```

它拒绝工作。我需要在 Rails 中做些什么才能以这种方式使用 ID 吗？我试过把它放在那个模型的`attr_accessible`列表和 nada 中。

而且，是的，当我编辑该记录本身时，该 ID 显然存在，尽管它没有显示在`schema.rb`文件中。

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T04:41:43.973

为什么不使用 Article.find()

# ios - iPad App：自定义默认导航控制器

> ID：13466677
> 
> 赞同：1
> 
> 时间：2012-11-20T04:38:10.887
> 
> 标签：ios, xcode, ipad, uinavigationcontroller

嗯，我不确定标题应该是什么。

我正在开发一个 iPad 应用程序。我的应用程序将具有以下层次结构。

![在此处输入图像描述](../Images/1c8108f779bc368e11d61771fa3e9dd7.png)

“首页”只是供用户选择语言的页面（视图控制器）。选择语言后，将显示“菜单页面”视图控制器。

从下面的菜单页面和所有视图控制器（VC）开始，页面布局是这样的。

![在此处输入图像描述](../Images/c37a13f84235f945da27a16c421f15af.png)

如您所见，有顶部菜单和底部菜单。单击按钮，应用程序将快速跳转到相应的视图控制器（树中的第 3 级，VC1、VC2、VC3 等）。对于每个视图，每个页面上都有一个 BACK 按钮，单击该按钮将返回到父视图控制器。

我正在考虑通过使用标签栏视图控制器和导航视图控制器来实现这一点，但我仍然不清楚如何实现这一点。

或者也许我应该只使用导航视图控制器并隐藏除后退按钮之外的顶部工具栏，并显示一个覆盖 UIView 作为菜单，它位于所有其他 UIView 之上。

有人可以帮助我吗？谢谢。

由于这是我的应用程序的最外层容器，我希望在开始时正确执行它..

对不起我的长问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T05:09:03.097

这取决于您要使用哪种视图转换以及如何更新顶部和底部栏中的按钮。

如果你想要通用的导航转换，你可以在根目录下使用 navigationController。对于底部栏中的按钮，您可以使用工具栏。

但是，如果您想继续使用 tabbarController，强烈建议不要将 navigationController 用作 root 并推送不同的 tabbarController。换句话说，修改视图控制器树以将 tabbarController 保留为根。

您应该做出的最重要的决定是您想将哪种容器控制器用作根控制器。根据我的经验，navigationController 最灵活地实现您的工作流程。

如果您愿意，您可以创建自己的容器控制器：http: [//developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/CreatingCustomContainerViewControllers/CreatingCustomContainerViewControllers.html](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/CreatingCustomContainerViewControllers/CreatingCustomContainerViewControllers.html)

这并不像看起来那么难，除非你想避免实现视图转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T04:43:24.480

我会建议您将导航栏隐藏起来，并使用带有自定义按钮的工具栏

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T05:16:37.037

最后我决定编写自己的容器视图控制器，它类似于默认的导航控制器，顶部和底部都有自定义工具栏。

我花了一整夜的时间阅读了关于 UIViewController 的官方 IOS 指南，并且对如何编写它有了一个非常清晰的了解。

[http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ViewLoadingandUnloading/ViewLoadingandUnloading.html](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ViewLoadingandUnloading/ViewLoadingandUnloading.html)

事实证明，实现它并没有那么难

# ruby - 除非允许，否则替换所有 URL

> ID：13466682
> 
> 赞同：0
> 
> 时间：2012-11-20T04:38:58.967
> 
> 标签：ruby, regex, gsub

我有一个正则表达式，它替换了给定字符串中的所有 URL：

```
my_string = "www.example.com test www.mysite.com"
my_string.gsub!(/[a-zA-Z0-9\-\.]+\.(com|net|de|org|uk|biz|info|co.uk|es|de)(\/\S*)?/i,'(site hidden)') 
```

作为上述结果，我得到：**“（隐藏站点）测试（隐藏站点）”**

我怎么能改变正则表达式不替换 www.mysite.com ???

这意味着替换应该输出**“(site hidden) test www.mysite.com”**

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T04:48:59.883

蛮力呢？:)

```
my_string = "www.example.com test www.mysite.com"

regex = /[a-zA-Z0-9\-\.]+\.(com|net|de|org|uk|biz|info|co.uk|es|de)(\/\S*)?/i

uniq  = rand(2**1024).to_s

p my_string.gsub('mysite.com', uniq).gsub(regex, '(site hidden)').gsub(uniq, 'mysite.com') 
```

### 在此处查看[现场演示](http://cibox.org/slivu/stackoverflow?lang=ruby&file=replace-all-url-unless-it-is-allowed.rb&run=true)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T05:06:11.723

您可以使用块来生成替换，如果它在允许的条目列表中，则使用原始文本：

```
my_string = "www.example.com test www.mysite.com"
allowed = %w(www.mysite.com)
re = %r/[a-zA-Z0-9\-\.]+\.(com|net|de|org|uk|biz|info|co.uk|es|de)(\/\S*)?/i
my_string.gsub!(re) do
  |m| allowed.include?(m) ? m : '(site hidden)'
end
puts my_string 
```

# c - C输出需要解释

> ID：13466684
> 
> 赞同：0
> 
> 时间：2012-11-20T04:39:18.737
> 
> 标签：c, pointers

> **可能重复：**
> [char a[] = “string”; 之间有什么区别？和 char *p = “字符串”；](https://stackoverflow.com/questions/9460260/what-is-the-difference-between-char-a-string-and-char-p-string)

```
int main() {
 char *p="ayqm";
 char c;
 c=++*p;
 printf("%c",c);
 return 0;
} 
```

它的输出是`a`。见[http://codepad.org/cbNOPuWt](http://codepad.org/cbNOPuWt)但我觉得输出应该是`b`since `c = ++*p`. 任何人都可以解释输出的原因吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T04:41:04.987

当然，这是**未定义的行为**。任何事情都有可能发生。

您正在尝试修改字符串文字，这是非法的。

如果你这样做，例如

```
char c = *p;
++c; 
```

你会看到正确的输出。

的实际类型`p`应该是`const char*`，在这种情况下你会得到一个编译器错误。

# vbscript - VBS 卸载应用程序

> ID：13466685
> 
> 赞同：0
> 
> 时间：2012-11-20T04:39:23.893
> 
> 标签：vbscript, wmi, wmic

我正在尝试将 VBS 脚本一起用作启动脚本以卸载 Silverlight（如果它的版本低于 5），但我的代码在尝试比较值时不断给我一个类型不匹配。

版本为 5.1.10411.0。如何将此值与整数值进行比较？

```
strComputer = "." 
Set objWMIService = GetObject("winmgmts:\\" & strComputer & "\root\CIMV2") 
Set colItems = objWMIService.ExecQuery("SELECT * FROM Win32_Product WHERE Caption = 'Microsoft Silverlight'") 
Dim item
For each item in colItems
    prodVer = item.Version
Next
If prodVer < 5 Then
    set WshShell = CreateObject("WScript.Shell")
        set oExec = WshShell.Exec("wmic product where caption='Microsoft Silverlight' call uninstall")
End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T11:05:53.497

版本值是一个字符串，因此要将其与整数进行比较，您首先需要提取可以转换为整数的内容。

例如提取第一个句点之前的数字；

```
prodVer = "5.1.10411.0"

if (prodVer <> "") then
    prodVer = clng(left(prodVer, instr(prodVer , ".") - 1))

    msgbox prodVer < 5
end if 
```

# android - 如何使列表项选中？

> ID：13466686
> 
> 赞同：1
> 
> 时间：2012-11-20T04:39:25.703
> 
> 标签：android, listview

我喜欢创建一个`ListView`可以检查其列表项的项目，但我已经创建了自己的布局以供显示，但`ListView`我不知道如何使它们成为可检查的。那么，有人可以给点建议吗？下面的代码将更清楚地解释我的问题。下面显示的代码如果我们想让列表项可以选中，我们把这个：

```
setListAdapter(new ArrayAdapter<String>(this,android.R.layout.simple_list_item_checked,presidents)); 
```

但是如果我的代码是这样的呢？里面还有其他布局：

```
ArrayAdapter<String> list = new ArrayAdapter<String>(NotificationView.this,R.layout.friendlist_item, R.id.friend_name,people);
lv.setAdapter(list); 
```

谢谢..

这里是friendlist_item.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TextView android:id="@+id/friend_name"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:padding="10dip"
    android:textSize="20dip"
    android:textStyle="bold"/>  

</LinearLayout> 
```

和 view.xml 这里：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:background="#ffffff">

<ListView android:id="@android:id/list" 
  android:layout_width="wrap_content" 
  android:layout_height="wrap_content" 
  android:layout_weight="1">
</ListView>

<FrameLayout android:id="@+id/FrameLayout01" 
  android:layout_width="fill_parent" 
  android:layout_height="wrap_content">

  <LinearLayout
      xmlns:android="http://schemas.android.com/apk/res/android"
      android:layout_width="match_parent"
      android:layout_height="fill_parent"
      android:background="#ffffff"
      android:orientation="horizontal" >

      <Button
          android:id="@+id/acceptbtn"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:layout_gravity="center_horizontal"
          android:layout_weight="0.46"
          android:text="Accept" />

      <Button
          android:id="@+id/closebtn"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:layout_weight="0.49"
          android:text="Close" />

  </LinearLayout>

 </FrameLayout>

 </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T05:03:51.530

`ListView`您可以使用 Adapter 类来布局每一行：

首先，创建一个将膨胀到每一行的布局（list_adapter.xml）：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <CheckBox
        android:id="@+id/checkBox1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:focusable="false"
        android:text="CheckBox" />

    <TextView
        android:id="@+id/tvName"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_marginBottom="5dp"
        android:layout_marginRight="15dp"
        android:layout_marginTop="5dp"
        android:gravity="right|center_horizontal"
        android:text="ghg"
        android:textAppearance="?android:attr/textAppearanceLarge"
        tools:ignore="HardcodedText" />

</LinearLayout> 
```

注意 的`android:focusable`属性`Checkbox`。

然后，创建一个扩展类`BaseAdapter`（ListAdapter.java）：

```
 public class ListAdapter extends BaseAdapter {

    private LayoutInflater myInflater;

    public ListAdapter(Context context) {
        super();
        myInflater = LayoutInflater.from(context);

    }

    static class ViewHolder {
        TextView tvName;
    }

    @Override
    public int getCount() {

        return 0;
    }

    @Override
    public Object getItem(int position) {

        return null;
    }

    @Override
    public long getItemId(int position) {

        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder;

        if (convertView == null) {
            convertView = myInflater.inflate(R.layout.list_adapter, parent,
                    false);
            holder = new ViewHolder();
            holder.tvName = (TextView) convertView.findViewById(R.id.tvName);

            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }

        holder.tvName.setTag(list.get(position).getId());
        holder.tvName.setText(list.get(position).getName());
        // Log.d("Ganjoor", "Adapter: " + list.get(position).getName());

        if (position % 2 == 0) {
            convertView.setBackgroundResource(R.drawable.grad_blue);
        } else {
            convertView.setBackgroundResource(R.drawable.row_style);
        }

        return convertView;
    }

} 
```

在您的活动中，创建一个新实例`ListAdapter`并将其分配给`ListView`：

```
 public class MainActivity extends Activity {

    ListView listView;
    private ListAdapter adapter;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        adapter = new ListAdapter(this);

        listView = (ListView) findViewById(R.id.listView1);
        listView.setAdapter(adapter);
        listView.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View v,
                    int position, long id) {

            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T05:02:06.647

您`friendlist_item.xml`目前只有一个`TextView`小部件可以显示在每个列表项中。

如果你想要一个复选框，你应该替换（或添加）一个[CheckBox 小部件](http://developer.android.com/guide/topics/ui/controls/checkbox.html)。他们的示例的一部分，以及对您的代码的快速改编如下：

```
<!-- language: lang-java  -->
<CheckBox android:id="@+id/checkbox_meat"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/meat"
    android:onClick="onCheckboxClicked"/>

<CheckBox android:id="@+id/friend_name"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:padding="10dip"
    android:textSize="20dip"
    android:textStyle="bold"/> 
```

# iphone - 带动画的图库

> ID：13466690
> 
> 赞同：-2
> 
> 时间：2012-11-20T04:39:58.013
> 
> 标签：iphone, objective-c, ios, ipad, image-gallery

> **可能重复：**
> [iPhone Coverflow](https://stackoverflow.com/questions/767048/iphone-coverflow)

我需要创建一个像[https://itunes.apple.com/us/app/retailmenot-coupons/id521207075?ls=1&mt=8](https://itunes.apple.com/us/app/retailmenot-coupons/id521207075?ls=1&mt=8)这样的相册。有谁知道这个动画效果的名称，或者相同的示例代码。没有名字我无法搜索

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T05:00:03.380

这种类型的图像代表画廊称为 Coverflow，这是此类动画照片库的演示，请从此链接下载演示[http://www.chaosinmotion.com/flowcover.html](http://www.chaosinmotion.com/flowcover.html)希望对您有所帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T05:30:52.043

这个动画被称为覆盖流动画你想使用 API 来使用更多的覆盖流效果然后查看这个链接[https://github.com/nicklockwood/iCarousel](https://github.com/nicklockwood/iCarousel)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T05:33:21.947

是的，应用程序中使用的动画类型是**Coverflow**动画，此动画有两种类型。这两个和更多都可以在[iCarousel](https://github.com/nicklockwood/iCarousel)找到。

这是一款适用于 iOS 的开源控件。

作者说

> iCarousel 是一个类，旨在简化 iPhone、iPad 和 Mac OS 上各种类型的轮播（分页、滚动视图）的实现。iCarousel 实现了许多常见的效果，例如圆柱形、扁平和“CoverFlow”风格的轮播，并提供了挂钩来实现您自己的定制效果。与许多其他“CoverFlow”库不同，iCarousel 可以处理任何类型的视图，而不仅仅是图像，因此它非常适合在您的应用程序中以流畅且令人印象深刻的方式呈现分页数据。它还可以通过最少的代码更改在不同的轮播效果之间轻松切换。
> 
> **支持的操作系统和 SDK 版本**
> 
> 支持的构建目标 - iOS 5.1 / Mac OS 10.7（Xcode 4.4.1，Apple LLVM 编译器 4.0）
> 最早支持的部署目标 - iOS 4.3 / Mac OS 10.7
> 最早兼容的部署目标 - iOS 3.2 / Mac OS 10.6

还有更多支持，并且随着时间的推移不断改进。

覆盖流/覆盖流2：

![CF2](../Images/444e256c6e87aa28c6aff3b289090913.png) ![CF](../Images/3e8c23745a439f375cff03383dd21e8c.png)

其他支持的动画：

![列表](../Images/e989dc5d1b564c27ec20e79754d7738d.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-20T05:33:46.683

有一个名为 Tapku 的开源库用于做覆盖流效果。

这是下载项目的[github链接](https://github.com/devinross/tapkulibrary)。

这是一个很好的实现coverflow的[教程。](http://www.applausible.com/blog/?p=657)

屏幕将如下所示：

![Cover Flow功能](../Images/abcc7ba006faece19eaf8b9d4cfa8ca3.png)

# oracle - 甲骨文：更新语句

> ID：13466691
> 
> 赞同：0
> 
> 时间：2012-11-20T04:40:13.303
> 
> 标签：oracle, sql-update

我有以下简单的更新

```
 UPDATE INVOICE
    SET INV_SUBTOTAL = V_SUBTOTAL
    WHERE INV_ID = I_INV_ID; 
```

我如何声明`i_inv_id`like 将其添加为别名，因为我将它与另一个名为 bookings 的表相关联。就像是;

```
UPDATE INVOICE
        SET INV_SUBTOTAL = V_SUBTOTAL
        WHERE INVOICE.INV_ID = BOOKINGS.INV_ID; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T04:43:43.880

我认为你可以使用这样的构造：

UPDATE INVOICE SET INV_SUBTOTAL = V_SUBTOTAL WHERE INVOICE.INV_ID IN (SELECT B.INV_ID FROM BOOKINGS V WHERE ....)；

# javascript - 重复功能直到为真

> ID：13466693
> 
> 赞同：3
> 
> 时间：2012-11-20T04:40:20.590
> 
> 标签：javascript

我正在尝试调用一个 ajax 请求，直到它返回一个真值。我已经尝试了以下代码，但它没有返回任何结果，并且控制台中没有错误。知道我做错了什么吗？

```
function getUserData() {
var xhr = new XMLHttpRequest();
xhr.open("GET", "http://api.example.com/data.json", true);
xhr.onreadystatechange = function() {
  if (xhr.readyState == 4) {
    var resp = JSON.parse(xhr.responseText);
    return resp.status;
  }
}
xhr.send();
}

setInterval(function () {
if (getUserData() === "true") {
   alert("true");
}
}, 10000); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T04:46:47.543

`getUserData`在内部调用一个异步函数，所以它在 AJAX 调用实际完成之前很久就返回了。

`getUserData`而不是在 setInterval 循环中执行此操作，您可能希望在失败情况下再次尝试调用。例如：

```
function getUserData() {
    var xhr = new XMLHttpRequest();

    xhr.open("GET", "http://api.example.com/data.json", true);
    xhr.onreadystatechange = function() {
        if (xhr.readyState == 4) {
            var resp = JSON.parse(xhr.responseText);
            if (resp.status) {
                alert("true");
            } else {
                setTimeout(getUserData, 10000);
            }
        }
    }
    xhr.send();
}

getUserData(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T04:47:14.177

由于您将其称为异步，因此您无法从函数返回值。尝试这个：

```
function getUserData() {
var xhr = new XMLHttpRequest();
xhr.open("GET", "http://api.example.com/data.json", true);
xhr.onreadystatechange = function() {
  if (xhr.readyState == 4) {
    var resp = JSON.parse(xhr.responseText);
    if (resp === "true")
        alert("true");
    else
        getUserData();
  }
}
xhr.send();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T04:49:23.327

是的，您的函数将立即返回，但总是返回未定义。

由于操作是异步的，您需要将其重写为基于回调。

```
function getUserData(callback) {
var xhr = new XMLHttpRequest();
xhr.open("GET", "http://api.example.com/data.json", true);
xhr.onreadystatechange = function() {
  if (xhr.readyState == 4) {
    var resp = JSON.parse(xhr.responseText);
    callback(resp.status);
  }
}
xhr.send();
}

setInterval(function () {
var isTrue = "false";

while(isTrue !== "true"){
   getUserData(function(result){ isTrue = result });
}

}, 10000); 
```

# iphone - MPMoviePlayerController 停止 iPod 音乐播放

> ID：13466696
> 
> 赞同：0
> 
> 时间：2012-11-20T04:40:41.630
> 
> 标签：iphone, ios, mpmovieplayercontroller

在我的应用程序中，我使用 MPMoviePlayerController 在屏幕上播放循环视频，并使用 MPMusicPlayerController 播放音乐。当我开始播放视频时，音乐停止。我不确定我做错了什么。我尝试在我的应用程序委托中设置 AudioSesion，但它似乎不起作用。

```
[[AVAudioSession sharedInstance] setCategory: AVAudioSessionCategoryAmbient error: nil]; 
```

这是我的代码：

```
self.musicPlayer = [MPMusicPlayerController iPodMusicPlayer];
MPMediaQuery* query = [MPMediaQuery songsQuery];
[query addFilterPredicate:[MPMediaPropertyPredicate predicateWithValue:@"Lost" forProperty:MPMediaItemPropertyTitle comparisonType:MPMediaPredicateComparisonEqualTo]];
[query setGroupingType:MPMediaGroupingAlbum];

//Pass the query to the player
[self.musicPlayer setQueueWithQuery:query];
[self.musicPlayer play];

NSBundle *bundle = [NSBundle mainBundle];

NSString *moviePath = [bundle pathForResource:@"movie" ofType:@"mp4"];
NSURL *movieURL = [NSURL fileURLWithPath:moviePath];
self.moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:movieURL];

// Play the movie.
[self.moviePlayer setRepeatMode:MPMovieRepeatModeOne]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T05:34:45.370

詹姆斯先生。当我从我的应用程序播放音频文件时，我也遇到了这个问题。`I was worked on AVAudioPlayer to play song from my application`. 当我从我的应用程序播放歌曲时，如果 iPod 播放歌曲已停止并且不再暂停或播放。所以我在我的应用程序中使用了下面的代码，它很有魅力。

我不知道这会解决你的问题。试试这个，让我知道你的意见。

```
 musicPlayer = [MPMusicPlayerController iPodMusicPlayer];
 if (musicPlayer.playbackState == MPMusicPlaybackStatePlaying) 
  {
       NSLog(@"Music Playing now");
       musicPlayerPaused = YES; //BOOL
       [musicPlayer pause]; // Here am pausing the iPod Music from here..
  } 

 // Playing the message sound here using the AVAudioPlayer...
 [sendMessageSound play]; 
```

在**AVAudioPlayer**代表再次恢复 iPodMusic，

```
-(void) audioPlayerDidFinishPlaying:(AVAudioPlayer *)player successfully:(BOOL)flag
{
    if (flag == YES) 
    {
        // IF the iPod song paused by us... we have to play it again after our Sound plays successfully...
        if (musicPlayerPaused == YES) 
        {
            musicPlayerPaused = NO;
            [musicPlayer play];
        }

    }
} 
```

请试试这个，让我知道你的意见。谢谢。一切顺利。

# powershell - 在注册表子项中查找值并删除它们

> ID：13466698
> 
> 赞同：4
> 
> 时间：2012-11-20T04:41:13.240
> 
> 标签：powershell

我正在尝试在 PowerShell 中编写一个简单的脚本（试图将其保持在一行），它将：

*   递归列出注册表项中的所有子项
*   找到一个具有特定价值的人
*   删除在上一步中找到的子键的不同值

到目前为止，这是我的代码：

```
Get-ChildItem "HKLM:\Software\Microsoft\KeyToQuery" -Recurse | Where-Object {$_.ValueA -eq "True"} 
```

“KeyToQuery”下面是几个包含相同值的随机名称子键。

第一部分有效，但 Where-Object 语句永远不会计算为真。我也试过 -match 和 -like 无济于事。

我哪里错了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-20T06:43:26.703

试试这个：

```
Get-ChildItem "HKLM:\Software\Microsoft\KeyToQuery" -Recurse |
ForEach-Object { Get-ItemProperty $_.pspath } |
Where-Object {$_.ValueA -eq "True"} 
```

# ios - 单例设计潜在泄漏

> ID：13466704
> 
> 赞同：0
> 
> 时间：2012-11-20T04:42:14.513
> 
> 标签：ios, singleton, memory-leaks, analyzer

我从 github 下载了一个库，并注意到在该库的主单例中，这段代码可能存在泄漏：

```
+(DDGameKitHelper*) sharedGameKitHelper
{
    @synchronized(self)
    {
        if (instanceOfGameKitHelper == nil)
        {
            [[DDGameKitHelper alloc] init];
        }

        return instanceOfGameKitHelper;
    }

    return nil;
} 
```

现在显然在任何地方都没有发布或自动发布，所以我必须这样做，但是如何以及以何种方式正确？我查看了 Internet 上的各种 Singleton 设计模式，他们只是将 instanceOfGameKitHelper 分配给 alloc 和 init 行。

无论如何，我将如何正确解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T04:44:13.073

根据定义，单例只创建一次，并且永远不会被释放。把它想象成一个全局变量。

查看来自 Apple 的文档： [Cocoa Core Competencies - Singleton](http://developer.apple.com/library/mac/#documentation/General/Conceptual/DevPedia-CocoaCore/Singleton.html)以了解更多详细信息。

或者他们的例子（在页面底部）：http: [//developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CocoaFundamentals/CocoaObjects/CocoaObjects.html#//apple_ref/doc/uid/TP40002974 -CH4-SW32](http://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CocoaFundamentals/CocoaObjects/CocoaObjects.html#//apple_ref/doc/uid/TP40002974-CH4-SW32)

不过我通常使用@rmaddy 的方法。当然，即使这样，您仍然在分配变量并且永远不会释放它，因为它仍然是单例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T04:51:51.773

一种更现代的设置单例的方法是这样的：

```
+ (DDGameKitHelper *)sharedGameKitHelper {
    static DDGameKitHelper *instance = nil;
    static dispatch_once_t predicate;

    dispatch_once(&predicate, ^{ instance = [self new]; });

    return instance;
} 
```

# javascript - 带有键 # 的文本区域并显示标签框

> ID：13466717
> 
> 赞同：1
> 
> 时间：2012-11-20T04:43:26.637
> 
> 标签：javascript, jquery, html

```
<textarea name="text" id="text"></textarea> 
```

当我使用 # 输入 textarea 时，我想要。例如#happy、#2012等。提交后会显示div标签框。使用这个 css ：

```
.div_box
{
padding: 5px;
background: #c0c0c0;
} 
```

有可能实现吗？
让我知道，如果你有一个想法？感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T05:01:27.697

您可以在加载文档时检查它。

仅使用 Javascript：

```
 window.onload = function(){
        if(document.getElementById('text').innerHTML.indexOf('#') != -1){
            document.getElementById('text').setAttribute('class','div_box');
        }
        else{
            document.getElementById('text').setAttribute('class','');
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T05:24:29.950

我想我们无法更改文本区域中特定文本的类别。我们只能改变一个元素的类。为此，我们可以使用已经制作的“富文本编辑器”并手动执行此操作。

如果有其他方法。请告诉我

# ipad - Ipad 网站每次点击奇怪的黑色方块

> ID：13466720
> 
> 赞同：0
> 
> 时间：2012-11-20T04:43:39.687
> 
> 标签：ipad, hyperlink, web, click, flicker

我正在为 ipad 制作一个网站，当我点击我网站上的任何链接或 javascript 按钮时，总是会出现一个黑色方块，一个黑色方块会在按钮周围闪烁并闪烁 0.7-1 秒，任何人都有同样的问题，如果我的按钮很大，黑色方块很明显。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T05:23:22.990

```
 -webkit-tap-highlight-color:rgba(255,0,0,0); 
```

这将正确禁用黑色方块

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T04:48:24.003

您应该能够使用`-webkit-tap-highlight-color`. 如果您希望完全禁用链接上的可见反馈，请使用`-webkit-touch-callout: none`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T06:22:31.123

我在我的代码中发现了导致问题的原因，虽然我不知道为什么会这样，但我必须在我的代码中删除 'overflow-y:scroll' 和 overflow-x:hidden 以防止捏缩放闪烁问题。我使用overflow-x hidden，因为如果用户将网页的大小调整得非常小，元素会突破我的容器div，并使用触摸板水平滚动，会看到元素突破和空白区域，现在我不能使用overflow-x hidden coz奇怪的愚蠢捏变焦闪烁

```
 #viewport{
      display:block;
      position:absolute;
      width:100%;
      height:100%;
      overflow-y:scroll;
     -webkit-overflow-scrolling: touch;
    }
   #wrapper{
    width:100%;
    overflow-x:hidden;
   } 
```

# java - 如何将我在 java 类中创建的 ID 生成到 r.java

> ID：13466723
> 
> 赞同：0
> 
> 时间：2012-11-20T04:43:44.683
> 
> 标签：java, android, android-layout

我是 android 编程新手。

我想知道是否可以将我在 java 类中创建的 ID 生成到 r.java

我要生成的 ID 是 nBtnLayoutlist。

```
public class classABC extends Activity {
    private int nBtnLayoutlist = 20;

    private OnClickListener onClick() {
        return new OnClickListener() {

            public void onClick(View v) {

            nBtnLayout = (LinearLayout)findViewById(R.id.nBtnLayoutList);

            }
        };
    }

    private LinearLayout newBtnLayout(){
    LinearLayout nBtnLayout = new LinearLayout(this);
    final LayoutParams lparams = new LayoutParams(LayoutParams.MATCH_PARENT,       LayoutParams.WRAP_CONTENT);
    nBtnLayout.setOrientation(LinearLayout.VERTICAL);
    nBtnLayout.setLayoutParams(lparams); 
    nBtnLayout.setWeightSum(100);
    nBtnLayout.setId(nBtnLayoutList);
    return nBtnLayout;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T04:50:01.090

R.java 中的 id 是在构建时从您的 .xml 文件的内容生成的。R.java 不能手动修改，也不能在运行时修改。

如果需要，可以通过在某个文件中声明它来定义一个[id 资源](http://developer.android.com/guide/topics/resources/more-resources.html#Id)`res/values`（该文件可以具有任何名称）：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <item
        type="id"
        name="id_name" />
</resources> 
```

您始终可以通过调用`setId(int)`（正如您已经在做的那样）在布局中设置视图的 id。

编辑：如果您想在调用中使用常量，例如

```
nBtnLayout.setId(nBtnLayoutList); 
```

那么您需要在调用中使用相同的常量，例如

```
nBtnLayout = (LinearLayout)findViewById(nBtnLayoutList); // NOT R.id.nBtnLayoutList 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T04:48:37.103

**-** `nBtnLayoutList`是对 LinearLayout 的引用。

**-**您可以通过在方法`LinearLayout`中传递整数来将 id 设置为。`setId()`

**例如：**

```
nBtnLayout.setId(1); 
```

# parsing - 使用 scala 解析器组合器解析基于缩进的语言

> ID：13466727
> 
> 赞同：7
> 
> 时间：2012-11-20T04:44:24.430
> 
> 标签：parsing, scala, indentation, parser-combinators

有没有一种方便的方法可以使用 Scala 的解析器组合器来解析缩进很重要的语言？（例如 Python）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T10:35:19.400

假设我们有一个非常简单的语言，这是一个有效的程序

```
block
  inside
  the
  block 
```

我们想将其解析为 a `List[String]`，块内的每一行都为 one `String`。

我们首先定义一个方法，该方法采用最小缩进级别并返回具有该缩进级别的行的解析器。

```
def line(minIndent:Int):Parser[String] = 
  repN(minIndent + 1,"\\s".r) ~ ".*".r ^^ {case s ~ r => s.mkString + r} 
```

然后我们通过在行之间使用合适的分隔符重复行解析器来定义具有最小缩进级别的块。

```
def lines(minIndent:Int):Parser[List[String]] =
  rep1sep(line(minIndent), "[\n\r]|(\n\r)".r) 
```

现在我们可以为我们的小语言定义一个解析器，如下所示：

```
val block:Parser[List[String]] =
  (("\\s*".r <~ "block\\n".r) ^^ { _.size }) >> lines 
```

它首先确定当前缩进级别，然后将其作为最小值传递给行解析器。让我们测试一下：

```
val s =
"""block
    inside
    the
    block
outside
the
block"""

println(block(new CharSequenceReader(s))) 
```

我们得到

```
[4.10] parsed: List(    inside,     the,     block) 
```

要编译所有这些，您需要这些导入

```
import scala.util.parsing.combinator.RegexParsers
import scala.util.parsing.input.CharSequenceReader 
```

你需要把所有东西都放到一个`RegexParsers`像这样扩展的对象中

```
object MyParsers extends RegexParsers {
  override def skipWhitespace = false
  .... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T12:18:50.783

据我所知，不，Scala 解析器组合器不支持这种开箱即用的东西。您当然可以通过以有意义的方式解析空白来做到这一点，但是您会遇到一些问题，因为您需要某种形式的状态机来跟踪缩进堆栈。

我建议做一个预处理步骤。这是一个小预处理器，它为单独的缩进块添加标记：

```
object Preprocessor {

    val BlockStartToken = "{"
    val BlockEndToken = "}"

    val TabSize = 4 //how many spaces does a tab take

    def preProcess(text: String): String = {
        val lines = text.split('\n').toList.filterNot(_.forall(isWhiteChar))
        val processedLines = BlockStartToken :: insertTokens(lines, List(0))
        processedLines.mkString("\n")
    }

    def insertTokens(lines: List[String], stack: List[Int]): List[String] = lines match {
        case List() => List.fill(stack.length) { BlockEndToken } //closing all opened blocks
        case line :: rest => {
            (computeIndentation(line), stack) match {
                case (indentation, top :: stackRest) if indentation > top => {
                    BlockStartToken :: line :: insertTokens(rest,  indentation :: stack)
                }
                case (indentation, top :: stackRest) if indentation == top =>
                    line :: insertTokens(rest, stack)
                case (indentation, top :: stackRest) if indentation < top => {
                    BlockEndToken :: insertTokens(lines, stackRest)
                }
                case _ => throw new IllegalStateException("Invalid algorithm")
            }
        }
    }

    private def computeIndentation(line: String): Int = {
        val whiteSpace = line takeWhile isWhiteChar
        (whiteSpace map {
            case ' ' => 1
            case '\t' => TabSize
        }).sum
    }

    private def isWhiteChar(ch: Char) = ch == ' ' || ch == '\t'
} 
```

执行此文本给出：

```
val text =
    """
      |line1
      |line2
      |    line3
      |    line4
      |    line5
      |        line6
      |        line7
      |  line8
      |  line9
      |line10
      |   line11
      |   line12
      |   line13
    """.stripMargin
println(Preprocessor.preProcess(text)) 
```

...以下结果

```
{
line1
line2
{
    line3
    line4
    line5
{
        line6
        line7
}
}
{
  line8
  line9
}
line10
{
   line11
   line12
   line13
}
} 
```

之后，您可以使用组合器库以更简单的方式进行解析。

希望这可以帮助

# android - 如何从数据库中获取海量数据？

> ID：13466728
> 
> 赞同：0
> 
> 时间：2012-11-20T04:44:26.050
> 
> 标签：android, iphone, mysql, json

在我的数据库中有大量数据（兆字节数据）。它们都是图像（url）。我们如何在手机（android，iPhone）中显示这些数据。获取该数据的更好方法是什么？我的意思是如何在显示所有数据的同时提高性能？

请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T05:44:49.170

如果您只从数据库中获取图像 URL 而不是使用 NSThread 调用手机中的其他函数，它将在后台加载图像，您的应用程序将为您提供更好的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T05:02:35.680

我从您的问题中了解到，该数据库仅包含图像 URL**而不是**实际的图像二进制数据。正确的？

如果是这种情况，我会假设您想从数据库中检索图像 URL，然后从 Internet 获取实际图像。

考虑缓存用户最有可能查看的图像，甚至可以在后台服务中预取它们。

显示它们时，您肯定需要一个专用线程，以便您的应用程序保持响应。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T04:58:29.780

解决方案取决于您的数据库是静态的还是动态的。如果整个数据是静态的，我会将其压缩到 Android 的 Assets 文件夹中并直接从那里使用它，从而避免任何网络问题。

如果这是动态的，您将不得不创建 Web 服务，它只获取在特定视图中可见的那些数据，或者在开始时获取所有数据，然后只进行增量同步。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T04:51:42.690

人们说不要将大型二进制对象放入数据库的原因有很多，这就是其中之一。

数据库不是，也永远不会是文件系统。它用于存储关系数据，而不是二进制数据。还有其他数据库平台可用作文档存储，这正是您在这里所需要的。

在某些时候，您将需要备份您的数据库，如果它是数百 GB 的大小，这将被证明是困难的和 CPU 密集型的。恢复将需要更长的时间。`rsync`如果它们都是普通文件，这种事情将是微不足道的，并且需要编写一些脚本。

我的建议是要么利用 Amazon S3 之类的现有解决方案，要么将文件路径存储在数据库中，并像处理任何其他静态文件一样提供文件，只需让它们在公共 URL 上可用即可。如果您需要一定程度的安全性，通常通过使 URL 充分随机化来隔离该内容就足够了，因为大多数移动应用程序不能有效地使用会话或 cookie。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-20T05:22:38.010

您已经完成了一项正确的工作，只需将所需的 URL 存储在 DB 中，而无需使用图像二进制文件使 DB 过载。除此之外，如果您想提高性能，您可以执行

1) 索引——索引只是一种数据结构，它根据一个或多个列（索引键）中的值提供对表中行的快速访问路径。这允许使用快速搜索技术来查找值，而不必逐行扫描整个表，从而加快数据检索速度。这可以在您的环境中大大提高性能，减少运行 SELECT 查询和取回数据所需的时间。

2) 在像 Amazon S3 这样的平台上托管您的图像将导致更快的加载时间，这肯定会提高性能。

# sql - 唯一标识符和长整数比较作为主键

> ID：13466731
> 
> 赞同：1
> 
> 时间：2012-11-20T04:44:51.803
> 
> 标签：sql, sql-server, primary-key, sqldatatypes

我已经多次看到两种数据类型唯一标识符和长整数作为数据表的主键。哪一个更好？请分享您的意见。两者各有优劣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T04:48:07.757

```
if you don't have a specific reason to use GUIDs, use INTs. 
```

GUID的优势：

*   唯一标识符更好，因为`guaranteed to always return a unique value across space and time`

*   我不知道创建 GUID 的全部机制，但我似乎记得它与网卡上的 MAC 地址和系统时间有关。

*   如果您是，这会派上用场`consolidating records from multiple SQL Servers into one table`，例如在数据仓库的情况下。

    SQL Server 复制还大量使用 GUID 来跟踪分布在多个 SQL Server 中的行。

    `DISADVANTAGEOUS OF GUID:`

*   无法确定生成 uniqueidentifier 值的顺序。它们不适合依赖于连续增加键值的现有应用程序

*   使用 GUID 作为键值的主要缺点是它们很大。基于 GUID 构建的索引将比基于 IDENTITY 列构建的索引更大且更慢

*   由于高随机性，GUID 作为集群键存在问题

# android - 机器人空指针异常

> ID：13466736
> 
> 赞同：1
> 
> 时间：2012-11-20T04:45:43.440
> 
> 标签：android, robotium

我设置了一个测试项目来测试另一个 Android 项目。一切正常。我可以打电话给 solo.clickOnView 并且测试会运行良好。当我尝试更新视图时会出现问题，例如，我想通过调用 solo.enterText 来更新 EditText。

机器人 3.6 版

```
String hello="Hello world"
solo.enterText(myEditText, hello); 
```

我确定 myEditText 是一个非空对象。运行测试，将出现以下消息

# 错误信息

```
java.lang.NullPointerException
at android.app.Instrumentation.runOnMainSync(Instrumentation.java:338)
at com.jayway.android.robotium.solo.TextEnterer.setEditText(TextEnterer.java:52)
at com.jayway.android.robotium.solo.Solo.enterText(Solo.java:1404)
at com.darakok.test.TestMain.testDisplayBlackBox(TestMain.java:30)
at java.lang.reflect.Method.invokeNative(Native Method)
at android.test.InstrumentationTestCase.runMethod(InstrumentationTestCase.java:204)
at android.test.InstrumentationTestCase.runTest(InstrumentationTestCase.java:194)
at android.test.ActivityInstrumentationTestCase2.runTest(ActivityInstrumentationTestCase2.java:186)
at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:169)
at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:154)
at android.test.InstrumentationTestRunner.onStart(InstrumentationTestRunner.java:520)
at android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1447) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T20:05:56.713

请参阅 API 文档，此方法仅适用于元素的索引。所以如果你想使用id：

```
String hello="Hello world";
solo.typeText(myEditText, hello); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-02T13:04:00.400

在执行代码之前尝试做一个额外的检查：

```
solo.enterText(myEditText, hello);  // your code 
```

您可以编写以下快照代码：

```
ArrayList<View> views = solo.getViews();
for (View view : views) {
    // check if your view is on the views arraylist, use a break point o whatever
} 
```

也许当您尝试修改视图时，它没有附加到布局上，或者它可能不可编辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T06:20:02.317

您可能尚未初始化对象。只需确保您正在使用的对象已被 **初始化**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T03:05:51.723

也许 myEditText 实际上并没有分配给正确的 EditText？

```
String hello = "Hello world";    

//Based on the ID of the EditText you've given via the layout XML: 
EditText myEditText = (EditText) tester.getView(R.id.my_edit_text);
solo.enterText(myEditText, hello); 
```

发生这种情况的另一个可能原因是在`myEditText`整个 Activity（甚至只是 EditText 本身）正确加载之前执行的块。在这些情况下，我建议`assertCurrentActivity(), sleep() or waitForView()`

# java - 枚举、类、反射和泛型转换

> ID：13466737
> 
> 赞同：3
> 
> 时间：2012-11-20T04:45:46.843
> 
> 标签：java, reflection, casting, enums, type-safety

考虑一下我有一个 interface`com.mycompany.SomeInterface`和一个 enum `com.mycompany.SomeEnum implements SomeInterface`。`SomeInterface`我想在运行时使用反射 API获取此类的所有枚举常量——作为实例。

目前，我的代码（在类中`EnumConstantGetter`）是这样的：

```
Class<?> clazz = EnumConstantGetter.class.getClassLoader().
  loadClass("com.mycompany.SomeEnum");

if (!(SomeInterface.class.isAssignableFrom(clazz)) {
    throw new Exception("the class doesn't implement SomeInterface");
}

if (!(clazz.isEnum()) {
    throw new Exception("not an enum");
} 

Class<? extends Enum<? extends SomeInterface>> castClass =
  (Class<? extends Enum<? extends SomeInterface>>) clazz; // cast #1
ArrayList<SomeInterface> vals = new ArrayList<SomeInterface>();
for (Enum<? extends SomeInterface> enumConstant :
  castClass.getEnumConstants()) {
    vals.add((SomeInterface) enumConstant); // cast #2
} 
```

上面的代码似乎可以工作，但我在创建`castClass`.

那么，我的问题是：根据我的检查，代码中注明的两种类型转换（类的类型转换和常量上的类型转换）都一定有效吗？

换句话说，每个成员都`Enum<? extends T>`保证执行`T`吗？

如果答案是“是的，强制转换是安全的”，那么为什么编译器会给我这个警告呢？

如果不是，为什么不呢？或者，在什么情况下例程会失败？

**编辑：**由于我上面的代码显然令人困惑，这是我对*应该*发生的事情的解释：

1.  加载`SomeEnum`包中命名的类`com.mycompany`并将其`Class`对象存储在变量中。
2.  确保引用的类实现了`SomeInterface`接口。
3.  确保引用的类是枚举。
4.  正如我们所知，它是一个 enum 实现`SomeInterface`，将其转换为`Class<? extends Enum<? extends SomeInterface>>` **- cast #1**
5.  循环遍历所有枚举常量。
6.  对于每个常量，将其转换为`SomeInterface` **- cast #2 -**并将其添加到常量列表中。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T00:52:12.510

您可以执行以下操作：

```
Class<?> clazz = ...;
Class<? extends SomeInterface> someInterfaceClass;
try {
    someInterfaceClass = clazz.asSubclass(SomeInterface.class);
}
catch (ClassCastException cce) {
    throw new IllegalStateException("Specified type doesn't implement SomeInterface", cce);
}
SomeInterface[] enumConstants = someInterfaceClass.getEnumConstants();
if (enumConstants == null) {
    throw new IllegalStateException("Specified type is not an enum.");
}

//use constants 
```

这避免了警告，因为如果对象“不代表枚举类型” [`asSubclass`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#asSubclass%28java.lang.Class%29)，则会检查并[`getEnumConstants`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getEnumConstants%28%29)返回。`null``Class`

# parsing - antlr 识别出错误的解析器

> ID：13466739
> 
> 赞同：0
> 
> 时间：2012-11-20T04:46:09.357
> 
> 标签：parsing, antlr

我正在使用 antlr 3.4 编写解析器语法，如下所示：

```
var : VAR_LEFT_PART  atom_var VAR_RIGHT_PART ;
atom_var : ID |   VAR_LEFT_PART ID VAR_RIGHT_PART ;

VAR_LEFT_PART : '{{';
VAR_RIGHT_PART : '}}';
ID : ('a'..'z' | 'A'..'Z' | '_') ('a'..'z' | 'A'..'Z' | '0'..'9' | '_')* ;
INT :   ('1'..'9')('0'..'9')* ;
NEWLINE:'\r'? '\n' ;
WS  :   (' '|'\t')+ { $channel = HIDDEN;} ; 
```

当我在下面测试一个案例时：

![在此处输入图像描述](../Images/15963623479f28ead078c872970ee42f.png)

问题是我的字符串“{{ {test} }}”不正确，但是解析器将ID识别为错误的令牌，有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T10:34:08.183

我用 ANTLR 3.4 试过，它似乎工作正常。eclipse 插件的解释器绘制了与您的帖子中相同的错误树，但已知它存在错误。

# php - URL 开发和 mod_rewrite

> ID：13466745
> 
> 赞同：0
> 
> 时间：2012-11-20T04:46:52.147
> 
> 标签：php, url, mod-rewrite

我的网站由主页和多个子目录组成，都在同一个域下。

我的 URLS 目前是 ..................| 理想的干净版本：

* * *

*   **`mysite.com`**
    *   `mysite.com/?content=content1`......................|`mysite.com/content1/`
    *   `mysite.com/?content=content2&page=4`........|`mysite.com/content2/4/`
    *   `mysite.com/?content=content3`......................|`mysite.com/content3/`
    *   `mysite.com/?content=content4`......................|`mysite.com/content4/`
    *   `mysite.com/?content=article&id=34`…………|`mysite.com/article/34/`

* * *

那么子目录基本相同：

*   **`mysite.com/subdir`**, **`mysite.com/subdir2`**,**`mysite.com/subdir3`**等
    *   `mysite.com/subdir/?content=content1`....................|`mysite.com/subdir/content1/`
    *   `mysite.com/subdir/?content=content2&page=4`.....|`mysite.com/subdir/content2/4/`
    *   `mysite.com/subdir/?content=content3`....................|`mysite.com/subdir/content3/`
    *   `mysite.com/subdir/?content=content4`....................|`mysite.com/subdir/content4/`
    *   `mysite.com/subdir/?content=article&id=34`.........|`mysite.com/subdir/article/34/`

* * *

我已经简单地使用了 mod_rewrite，但我不确定如何处理这些多个变量。另外，我将如何区分实际的子文件夹和内容变量。这样可以防止将“subdir”或“subdir2”作为根站点的内容变量插入。

我玩过很多代码片段，但我已经把我的 .htaccess*石板*擦干净了，并与大家联系以帮助我重新填充它。您的意见将不胜感激。

* * *

**注意：** 页面查询字符串需要的唯一时间是 'content' == 'content2'

`?content=content2&page=4`

**文章/id 关系共享相同的规则，所有其他“内容”值都应该是动态的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T05:01:51.173

会为你工作。

```
RewriteEngine On
RewriteBase /

RewriteRule ^([^/]*)/$ /?content=$1 [L,QSL] 
RewriteRule ^([^/]*)/([^/]*)/$ /?content=$1&page=$2 [L,QSL] 
RewriteRule ^([^/]*)/id/([^/]*)/$ /?content=$1&id=$2 [L,QSL] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T04:55:32.337

您可以在主目录和子目录中复制类似的内容：

```
RewriteRule  ^(content\d+)(?:/(\d+))?/?$  ?content=$1&page=$2 
```

或者，如果您不想要一个空的 &page= 参数，您可以将其拆分为两个不同的 RewriteRules。

```
RewriteRule  ^(content\d+)/?$             ?content=$1
RewriteRule  ^(content\d+)/(\d+)/?$       ?content=$1&page=$2 
```

方法相同`article`。

# xaml - 绑定到 XAML 中的 Window.Current.Bounds.Width

> ID：13466747
> 
> 赞同：4
> 
> 时间：2012-11-20T04:46:55.207
> 
> 标签：xaml, microsoft-metro, windows-runtime, winrt-xaml

我在 LayoutAware 页面上有一个弹出控件。

我真正想要的是让弹出窗口填满屏幕。

我认为解决方案是使用 Window.Current.Bounds.Height/Width 在弹出控件内的网格​​上设置相应的属性。

我不想使用文件后面的代码来设置这些属性。我希望能够绑定到 XAML 中的 Window.Current.Bounds.Height。

我可以这样做吗？

有没有更好的方法让弹出窗口填满屏幕？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T11:06:08.390

您可以通过编写高度和宽度的转换器来做到这一点。

```
public class WidthConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, string language)
    {
        return Window.Current.Bounds.Width;
    }

    public object ConvertBack(object value, Type targetType, object parameter, string language)
    {
        throw new NotImplementedException();
    }
}

public class HeightConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, string language)
    {
        return Window.Current.Bounds.Height;
    }

    public object ConvertBack(object value, Type targetType, object parameter, string language)
    {
        throw new NotImplementedException();
    }
} 
```

将此添加到您的页面资源部分 -

```
 <common:WidthConverter x:Key="wc" />
    <common:HeightConverter x:Key="hc" /> 
```

将它们用于您的弹出窗口 -

```
 <Popup x:Name="myPopup"  >
            <Grid  Background="#FFE5E5E5" Height="{Binding Converter={StaticResource hc}}" Width="{Binding Converter={StaticResource wc}}" />
        </Popup> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-20T12:41:31.117

您可以使用转换器（请参阅 Typist）或使用静态类。

在您的 App.xaml 中：

```
<datamodel:Foo x:Name="FooClass" />
xmlns:datamodel="using:MyProject.Foo.DataModel" 
```

在你的 xaml 中：

```
Source="{Binding Source={StaticResource FooClass}, Path=Width}" 
```

其中 Width 是类中的一个属性，它返回 Window.Current.Bounds.Width。

样本 ：`public double Width{get{return Window.Current.Bounds.Width;}}`

问候。

# php - ID 位于 slug 末尾的 CakePHP 路由

> ID：13466748
> 
> 赞同：0
> 
> 时间：2012-11-20T04:46:56.827
> 
> 标签：php, cakephp, cakephp-1.3

我想要一个匹配任何在其末尾具有特定正则表达式的 URL 的路由。我原以为这会起作用：

`Router::connect("/*/:id",array('controller'=>'GeneralPages','action'=>'urlrewrite'),array('id'=>'[a-zA-Z0-9]{11}[=]'));`

这将匹配 site.com/pages/page/sidoeido212=

但它没有经过这条路线？在开始时使用通配符是否有问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T12:15:34.323

你应该试试这个：

```
Router::connect("/*/:id", 
array('controller'=> 'GeneralPages','action' => 'urlrewrite'),
array('pass'=> array('id'), 'id' => '[a-zA-Z0-9]{11}[=]')); 
```

# html - 社交插件

> ID：13466752
> 
> 赞同：0
> 
> 时间：2012-11-20T04:47:41.380
> 
> 标签：html, wordpress, css

我为我的 wordpress 博客网站使用了社交插件。它工作正常。但我注意到一个问题。![在此处输入图像描述](../Images/3cd3bfcac202ba1fe053d4db3c2abb25.png)

通常linkedin分享按钮不显示计数器气泡。如果我单击按钮，计数器将显示。

![在此处输入图像描述](../Images/3f49680a9da16dec6b56ae287364e4db.png)

我通常希望气泡显示为 0 计数。

![在此处输入图像描述](../Images/cee5ee2e03594481f5fbf79d9a554e10.png)

我找到了这段代码：

```
data-showZero="true" 
```

但我不知道把这段代码放在任何地方。请你帮助我好吗。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T05:25:32.957

不幸的是，该插件似乎没有该选项。data-showZero="true" 是 LinkedIn 用来生成按钮的脚本标签的属性。

所以代码看起来像这样：

```
<script src="//platform.linkedin.com/in.js" type="text/javascript"></script>
<script type="IN/Share" data-url="<?php the_permalink(); ?>" data-counter="right"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T11:03:51.133

检查一下，也许这会对你有所帮助。 [http://webmodelling.com/webbits/socialmedia/default.aspx](http://webmodelling.com/webbits/socialmedia/default.aspx)

# asp.net-mvc - 部分视图上的 Jquery 自动完成结果

> ID：13466753
> 
> 赞同：0
> 
> 时间：2012-11-20T04:47:46.667
> 
> 标签：asp.net-mvc, jquery-ui

是否可以在部分视图上显示 Jquery 自动完成的结果？这就是我现在的显示方式，我希望在局部视图上显示结果，以便我有更多的控制权来设置结果的样式。

```
 $(document).ready(function () {
        $('*[data-autocomplete-url]')
            .each(function () {
                $(this).autocomplete({
                    source: $(this).data("autocomplete-url"),
                    minLength: 2,
                    messages: {
                        noResults: "",
                        results: function () { }
                    },
                    select: function (event, ui) {
                        return false;
                    },
                });
            }).data("autocomplete")._renderItem = function (ul, item) {
                return $("<li></li>")
                    .data("item.autocomplete", item)
                  )
.append('<table><tr><td valign="top"><img style="width:30px;height:30px;" src="' + "/Images/Image.jpg" + '" /></td><td valign="top">' + item.FirstName + item.LastName + '</td></tr></table>')
                                       .appendTo(ul);
            }
    }); 
```

另外，当用户从结果中选择一个项目时，我想通过传递 id 来调用控制器操作，有人可以为此提供代码示例吗？

我正在使用 Asp.net MVC 4，

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T11:05:36.627

您不能仅使用 jQuery 呈现局部视图。但是，您可以调用一个方法（操作）来为您呈现局部视图并使用 jQuery/AJAX 将其添加到页面中。当用户选择一个项目或悬停一个项目时，只需使用 jquery 函数并使用 ajax 将 id 传递给服务器并返回 Parttail View。

```
$.get( '<%= Url.Action("details","user", new { id = Model.ID } %>', function(data) {
    $('#detailsDiv').replaceWith(data);
}); 
```

剃刀

```
$.get( '@Url.Action("details","user", new { id = Model.ID } )', function(data) {
    $('#detailsDiv').replaceWith(data);
}); 
```

其中用户控制器有一个名为 details 的操作，它执行以下操作：

```
public ActionResult Details( int id )
{
    var model = ...get user from db using id...

    return Partial( "UserDetails", model );
} 
```

参考这些链接，你会得到一个更好的主意。 [在 ASP.NET MVC 中使用 jQuery 渲染部分视图](https://stackoverflow.com/questions/1570127/render-partial-view-using-jquery-in-asp-net-mvc)， [http://www.codeproject.com/Articles/41828/JQuery-AJAX-with-ASP-NET-MVC，ASP.NET](http://www.codeproject.com/Articles/41828/JQuery-AJAX-with-ASP-NET-MVC) MVC [AJAX 与 jQuery](https://stackoverflow.com/questions/578443/asp-net-mvc-ajax-with-jquery)

谢谢。希望这对您有所帮助。

# c - 返回链表上的多个节点

> ID：13466765
> 
> 赞同：0
> 
> 时间：2012-11-20T04:48:47.397
> 
> 标签：c, list, linked-list

所以我有一个链表实现，结构看起来像这样：

```
typedef struct channel_db{

    unsigned int channel_id;                //Channel ID
    unsigned int node_id;                   //Node ID
    unsigned int channel_size;              //Channel data size (bytes)
    unsigned int channel_period;            //Channel data period (ms)
    double actual_bw;
    double required_bw;
    unsigned int compression;

    struct channel_db *next;
    struct channel_db *previous;

}CHANNEL_DB; 
```

在我的代码中的某个时刻，我需要搜索列表中满足特定要求的所有节点，例如高于特定阈值的actual_bw 并返回满足该要求的所有channel_id。有没有一种简单的方法可以做到这一点，或者我应该为了这些目的创建另一个链接列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T05:18:38.007

C 语言最好的地方在于它小而简单。C 语言最糟糕的地方在于它小而简单。

没有“内置”的方式来做你想做的事。

当然，您可以定义整数的链接列表，但是您必须在不再需要列表后处理释放它，这可能比听起来更难。而这样的列表将有 100% 的指针空间开销。对于大多数应用程序来说不是问题，但需要考虑一些问题。

更好的选择是使用您自己的类似矢量的容器，该容器根据需要调整自身大小，“模拟”C++ 矢量。 [这是基本思想。](https://stackoverflow.com/questions/3536153/c-dynamically-growing-array)注意：此代码省略了错误处理。

或者正如另一个建议所说，在一次通过中实施计数，准确分配计数的整数数量，然后在第二次通过累积结果。非常吝啬内存，但显然是运行时间损失。对于小列表来说也没什么大不了的。

或者，您可以采用[这项出色的工作来为 C 构建容器库](http://www.cs.virginia.edu/~lcc-win32/ccl/ccl.html)。

最后，您可以通过提供一个接受回调函数的映射原语来完全回避返回列表：

```
typedef int (*CHANNEL_DB_MAPPED_FUNCTION)(CHANNEL_DB *db, void *env);

int map_onto_channel_db(CHANNEL_DB *db, CHANNEL_DB_MAPPED_FUNCTION *f, void *env)
{
   CHANNEL_DB *p;

   // Assumes null terminated list. Adjust for circular lists if that's what you're using
   for (p = db; p; p = p->next)  {
     int rtn = f(p, env);
     if (rtn != 0) return rtn;
   }
   return 0;
} 
```

该函数可以做任何您喜欢的事情，并将结果累积到通过`void`指针提供的记录中`env`。特别是它可以做任何你可能对返回的整数列表所做的事情。当然，这没有返回值那么灵活。

# java - 使用 webdriver 的 testng 一个一个地运行测试类

> ID：13466767
> 
> 赞同：0
> 
> 时间：2012-11-20T04:48:57.930
> 
> 标签：java, maven, selenium, webdriver, testng

我已经编写了几个测试类来使用 testng 测试 Web 应用程序。每个测试类都是独立的。（我使用 Java、maven 和 selenium webdriver）

我在 testng.xml 中定义了我的测试类和测试组，如下所示。

```
<test name="generalTest">
        <groups>
            <run>
                <include name="login"  />
                <include name="signUp"  />
                <include name="profileCreation"  />

            </run>
        </groups>

        <classes>
            <class name="my.test.Test_1_LoginTestCases"/>
            <class name="my.test.Test_2_SignUpTestCases"/>
            <class name="my.test.Test_3_CreatePeopleProfileTestCases"/>

        </classes>
    </test> 
```

我在命令行中运行这个命令来运行测试类。

```
mvn test -DsuiteXmlFile=/src/testng.xml -Dgroups=login,signUp,profileCreation 
```

我已经使用 testng “priority” 标签来定义在测试类中运行测试用例的顺序。

但问题是当我使用上述命令运行 testng.xml 时，它会同时（并行）运行所有测试类。如果有 10 个测试类，那么它会同时打开 10 个 Web 浏览器实例并尝试同时运行每个测试类。

我需要的是运行第一个测试类，当它完成时，然后使用上面的 maven 命令开始运行第二个测试类。

谁能帮我做到这一点？我真的很感激帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T04:59:13.760

只需在您的 xml 中添加一个属性 parallel="false"，如下所示：

```
<test name="generalTest" parallel="false"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T05:23:50.190

我解决了这个问题！:) 我在所有测试类上都设置了相同的优先级范围。例如：在每个测试类中，我都设置了优先级 1。然后它尝试同时运行优先级 1 的测试用例。

使固定：

根据我们需要作为一个整体运行测试套件的顺序，在每个测试类中使用不同的优先级范围。例如：由于我需要运行第一个测试类并在完成后运行第二个测试类，因此我将第一个测试类的优先级范围设置为 1 到 50，然后

# matlab - Matlab“内存不足”解决方案？

> ID：13466770
> 
> 赞同：2
> 
> 时间：2012-11-20T04:49:09.383
> 
> 标签：matlab, memory

```
fname = dir('*sir');
[tmp, head] = loadsir(fname(1).name);
dayH = zeros(length(fname),size(tmp,1),size(tmp,2));

% use temporary array to simplify 3d array creation
for i=1:1
  tmp = loadsir(fname(i).name);
  dayH(i,:,:) = tmp;
end 
```

我上面有这段代码，但我得到的是：

```
Error using zeros
Out of memory
Error in dataAnalysis (line 4)
dayH = zeros(length(fname),size(tmp,1),size(tmp,2)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T14:20:23.437

Matlab 中的数组存储在连续的内存块中。您可能内存不足，因为您的计算机没有足够大的连续内存块来存储整个矩阵。

你需要：

1.  减小矩阵的大小，或
2.  使用允许将内存保存在不连续块中的变量类型。

如果您不打算填充整个矩阵，请尝试`sparse matrix`按照@Dennis Jaheruddin 的建议使用 a 减小其大小

如果您打算填充矩阵，请考虑将其拆分为单元格。

```
zeroMat = zeros( size(tmp,1), size(tmp,2) );
daysH = repmat( {zeroMat}, [length(fname), 1] ); 
```

每个单独的单元格仍然需要足够的内存来存储大小为 的矩阵`size(tmp,1) x size(tmp2)`。除非这些数字很大，否则您应该没问题。

# java - Java MongoTemplate：Upserts 不生成 ObjectId

> ID：13466773
> 
> 赞同：6
> 
> 时间：2012-11-20T04:49:23.350
> 
> 标签：java, mongodb, spring-mongo

我一直在开发一个使用 MongoDB 作为存储形式的 Java 应用程序，但是我遇到了一个问题。当用户在我的应用程序中添加评论时，它会将文档添加到评论集合中，然后对统计数据进行更新插入。但是， upsert 只添加第一次（更新或插入新数据后没有调用）。以下是相关代码：

```
public class CommentDAO implements ICommentDAO {

    @Autowired
    @Qualifier(value = "mongoDB")
    MongoTemplate mongoTemplate;

    public UserComment addComment(UserComment userComment) {
        updateStats(userComment, 1L);
        mongoTemplate.save(userComment);
        return userComment;
    }

    public void updateStats(UserComment userComment, Long offset) {
        Update update = new Update();
        update.inc("total", offset);
        Query query = query(where("entity").is(userComment.getEntity()));

        WriteResult wr = mongoTemplate.upsert(query, update, CommentStat.class);
    }
} 
```

这是我的评论集合中的结果示例：

```
{ 
    "_id" : ObjectId( "50ab0566e4b0ea8f74b82d48" ),
    "_class" : "com.test.models.comment.UserComment",
    "userId" : 4,
    "ownerId" : 3,
    "comment" : "Test comment",
    "type" : "ART",
    "entity" : "759446489112216656",
    "date" : Date( 1353385318079 ) 
},
{ 
    "_id" : ObjectId( "50ab0691e4b0775cf7daacad" ),
    "_class" : "com.test.models.comment.UserComment",
    "userId" : 4,
    "ownerId" : 3,
    "comment" : "Another test",
    "type" : "ART",
    "entity" : "759446489112216656",
    "date" : Date( 1353385617619 ) 
} 
```

……还有我单身、孤独的状态……

```
{ 
    "entity" : "759446489112216656",
    "total" : 1 
} 
```

请注意 stat 集合中缺少的“_id”和“_class”。我的 mongo 或 tomcat 日志中没有任何错误。有没有人遇到过这个问题或知道交易是什么？谢谢你的帮助！

**注意：** 如果我删除 upsert 并正常添加统计信息，一切都会很好（当然，这会为单个实体添加多个统计信息，这是不可取的）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T16:37:29.293

我认为您可以尝试用`@Document(collection = "colName")`- 我今天遇到同样的问题来注释您的课程。Upserts 的工作有时真的很奇怪：我仍然无法找到始终如一地获取错误的方法。

实际上我所做的是创建了一个解决方法（临时，只是“让它工作”），我必须检查对象中是否存在“_id”，如果它为空，我使用保存，如果不是 - 我使用更新。是的，这很奇怪，但它起作用了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-12T15:36:14.363

我遇到了一个问题，我正在更新一个已经有 id 的对象，所以 _id 被保留了。但是，_class 没有保存。我的解决方法是向我的班级添加一个成员，以确保 _class 数据始终存在：

```
@Field("_class")
protected String _class = Foo.class.getName(); 
```

# java - jni.h：没有这样的文件或目录

> ID：13466777
> 
> 赞同：30
> 
> 时间：2012-11-20T04:50:18.663
> 
> 标签：java, java-native-interface, codeblocks

我在 Windows 中使用 Code::Blocks。

我创建了一个 dll 项目试图获得一些 JNI 实践。

**在我的javah生成的.h文件中，有#include jni.h，但是当我尝试编译它时，它一直说jni.h：没有这样的文件或目录。**

我认为它与类路径有关，但我不知道它是什么！这可能是我必须在 Code::Blocks 中更改的设置

有人可以帮我解决它吗？非常感谢

```
/* DO NOT EDIT THIS FILE - it is machine generated */
#include <jni.h>
/* Header for class Vector3D */

#ifndef _Included_Vector3D
#define _Included_Vector3D
#ifdef __cplusplus
extern "C" {
#endif
/*
 * Class:     Vector3D
 * Method:    magnitude
 * Signature: ()D
 */
JNIEXPORT jdouble JNICALL Java_Vector3D_magnitude
  (JNIEnv *, jobject);

/*
  * Class:     Vector3D
 * Method:    mult
 * Signature: (LVector3D;I)LVector3D;
 */
JNIEXPORT jobject JNICALL Java_Vector3D_mult
  (JNIEnv *, jobject, jobject, jint);

/*
 * Class:     Vector3D
 * Method:    equals
 * Signature: (LVector3D;)Z
 */
JNIEXPORT jboolean JNICALL Java_Vector3D_equals
  (JNIEnv *, jobject, jobject);

/*
 * Class:     Vector3D
 * Method:    dotProduct
 * Signature: (LVector3D;LVector3D;)D
 */
JNIEXPORT jdouble JNICALL Java_Vector3D_dotProduct
  (JNIEnv *, jclass, jobject, jobject);

/*
 * Class:     Vector3D
 * Method:    makeNormalized
 * Signature: (LVector3D;)LVector3D;
 */
JNIEXPORT jobject JNICALL Java_Vector3D_makeNormalized
  (JNIEnv *, jclass, jobject);

/*
 * Class:     Vector3D
 * Method:    crossProduct
 * Signature: (LVector3D;LVector3D;)LVector3D;
 */
JNIEXPORT jobject JNICALL Java_Vector3D_crossProduct
  (JNIEnv *, jclass, jobject, jobject);

#ifdef __cplusplus
}
#endif
#endif 
```

**编辑：**
所以我做了设置-->编译器和调试器-->搜索目录-->并在编译器下添加了“$(JAVA_HOME)\include”和“$(JAVA_HOME)\include\win32”，它能够找到它！

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-11-20T05:23:37.843

您必须将 JDK 路径添加到包含路径，以便编译器知道文件的位置。

视窗：

```
/I "$(JAVA_HOME)\include" /I "$(JAVA_HOME)\include\win32" 
```

Linux：

```
-I"${JAVA_HOME}/include" -I"${JAVA_HOME}/include/linux" 
```

苹果电脑：

```
-I"${JAVA_HOME}/include" -I"${JAVA_HOME}/include/darwin" 
```

# javascript - 使用 Javascript 动态创建触发弹出窗口的链接

> ID：13466781
> 
> 赞同：0
> 
> 时间：2012-11-20T04:51:01.293
> 
> 标签：javascript, popup

我搜索了高低，但无法找到我想要做的事情的解决方案。

我正在添加动态行，并通过元素 id 执行此操作，使用如下代码：

```
 var cellRight = row.insertCell(1);
  var el = document.createElement('input');
  el.type = '';
  el.name = 'description' + iteration;
  el.id = 'description' + iteration;
  el.size = 55;
  cellRight.appendChild(el); 
```

我有一个字段，我想在其中添加一个文本链接，并让它打开一个新大小的窗口。一个弹出窗口，基本上。我已经尝试了许多不同的代码片段，但没有一个能做到这一点。我最接近的是整页中的新标签。

```
 var cellRight = row.insertCell(3);
  var el = document.createElement("td"); 
  var cell=document.createElement('td');
  var link=document.createElement('a');
  link.setAttribute('href','http://www.domain.com/page.php');
  link.setAttribute('target','_blank');
  link.setAttribute('height','400');
  link.setAttribute('width','500');
  link.appendChild(document.createTextNode('Page'));
  cell.appendChild(link);
  el.appendChild(cell);
  cellRight.appendChild(el); 
```

我也尝试过类似的东西：

```
link.onclick(window.open('http://www.domain.com/page.php','popUpWindow','height=400,width=500,left=10,top=10,resizable=yes,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no,status=yes') 
```

和

```
el.html('<a href="JavaScript:newPopup(\'http://www.domain.com/page.php\');">Page</a>'); 
```

我可以使用此代码使其在常规 javascript 中工作，但我在输入的第一“行”中使用它，并且元素 ID 用于创建后续动态行。

```
<script type="text/javascript">
    function newPopup(url) {
    popupWindow = window.open(
url,'popUpWindow','height=400,width=500,left=10,top=10,resizable=yes,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no,status=yes')
}
</script>
<a href="JavaScript:newPopup('http://www.domain.com/page.php');">Page</a></td> 
```

我希望有人可以提供链接或示例来帮助我完成这项工作。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T05:08:46.057

实现您需要的正确方法是[事件委托](http://davidwalsh.name/event-delegate)。也就是说，您将事件处理程序分配给父元素（如`<body>`），并检查其中的事件目标。

例如，您可能有以下 HTML：

```
<div id="container">
  <a href="http://www.domain.com/page.php">Page 1</a>
  <a href="http://www.domain.com/page2.php">Page 2</a>
</div>

<button id="addBtn">Add a new link</button> 
```

请注意，每个链接都有一个适当的`href`属性，将用于弹出窗口。它也将作为禁用 Javascript 的情况下的后备。

并且（简化的 - 我不检查元素类型，也不检查 href 属性的存在）脚本将是：

```
var container = document.getElementById('container');

container.addEventListener('click', function (e) {
   if (e.preventDefault) {
     e.preventDefault();
   } else {
     e.returnValue = false; // For IE
   }

   var target = e.target;
   var popupWindow = window.open(target.href,'popUpWindow',
       'height=400,
       width=500,
       left=10,
       top=10,
       resizable=yes,
       scrollbars=yes,
       toolbar=yes,
       menubar=no,
       location=no,
       directories=no,
       status=yes'
   );  
});

// The following code creates links dynamically upon clicking the button
document.getElementById('addBtn').addEventListener('click', function (e) {
    var index = container.getElementsByTagName('a').length + 1;
    var newLink = '<a href="http://www.domain.com/page' + index +'.php">Page ' + index +'</a>';

    container.innerHTML += newLink;
}); 
```

请参阅此处的示例：http: [//jsfiddle.net/C53cd/3/](http://jsfiddle.net/C53cd/3/)。在 FF16 和 Chrome 中为我工作。请注意，您可能需要为事件绑定实现一个简单的 polyfill 才能在 IE 中工作（[MSIE 和 Javascript 中的 addEventListener 问题？](https://stackoverflow.com/questions/1695376/msie-and-addeventlistener-problem-in-javascript)）。或者，您可以将 jQuery 用于相同目的。

**UPD：**为 IE 添加了默认操作预防。

**UPD 2：**添加了动态创建新链接的代码。

# ios - 状态恢复iOS时播放声音

> ID：13466783
> 
> 赞同：0
> 
> 时间：2012-11-20T04:51:07.047
> 
> 标签：ios

我有一个 ios 应用程序，它在第一次打开时会播放声音。我已将状态恢复代码添加到我的应用程序委托中，并在我的故事板中的视图控制器中设置恢复 ID。我的应用程序似乎恢复到正确的视图控制器，但随后跳回到第二个视图控制器并再次播放声音，即使它没有打开到启动声音的视图控制器。我尝试为声音添加计数，这样它只会播放一次，但似乎不起作用。如何让声音不再播放？感谢你们。

编辑：我应该提到声音是通过我的初始视图控制器中的 AVPlayer 播放的。

***经过进一步检查，如果我绕过我的第一个视图控制器，一切正常。

然后我在我的第二个视图控制器中添加了一个计时器，并使用计时器呈现了我的第一个视图控制器。在我的动画块中，我使用完成处理程序来关闭第一个视图控制器，然后一切似乎都正常工作。现在唯一的问题是，当应用程序被杀死并重新打开时，它会再次显示第一个视图控制器，但至少当它现在关闭它时，它实际上是你离开的地方，而不是跳回第二个视图控制器并且只播放声音从第一个视图控制器。我可能会保持这种方式，因为它是一个有趣的小动画，并且只有在应用程序被杀死时才会播放，但我只是不明白它为什么这样做。我查看了我所有的连接、代码和 IB 设置，似乎没有任何东西能引起我的注意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T05:12:25.853

使该计数变量静态。像这样声明它：

```
static int count = 0;
  if(count == 0) {
   //then play the sound here
   //insert code here
  }
//the increment it here
count++; 
```

# java - 有效地确定列表中的元素应该被删除

> ID：13466786
> 
> 赞同：0
> 
> 时间：2012-11-20T04:51:33.713
> 
> 标签：java, android, algorithm

我正在 Android 上制作一个聊天室应用程序。在应用程序中，每隔 5 秒，它会发送一个请求以获取已连接用户的列表，并将它们作为`Button`s 放到面板中。如何有效地确定用户是否已断开连接（是否应从列表中删除）？

尝试1：

> 有2个列表，一个存储在线列表的当前间隔，两个存储在线列表的下一个间隔。然后比较 .... O(n^2) 比较和 2n 内存；

尝试2：

> 有 1 个列表，每个间隔删除`Button`面板中的所有内容，并在每个间隔重新创建它们。

它们似乎都是一个丑陋的解决方案。有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T05:59:11.153

如果两个列表已排序，我们可以在 O(n) 时间内比较它们。因此，我建议您先对列表进行排序（在 O(nlogn) 时间内），然后再进行比较。希望服务器按顺序返回列表（可能在用户登录时），您可以只进行比较而不进行排序。

# jquery - 如何使用 ubuntu 将 jeditable 导入 django 模板

> ID：13466793
> 
> 赞同：0
> 
> 时间：2012-11-20T04:52:33.167
> 
> 标签：jquery, django, jeditable

根据主题，我是 Web 开发的新手，并且在尝试在 Django 模板中使用 jeditable 时遇到问题。

具体来说，我已将 jeditable.js 复制到本地文件路径中。

它说 /users/funnynode/doyourwork/jeditable.js

但是，当我尝试在 django 模板上添加源代码时，它不起作用

![在此处输入图像描述](../Images/af8680dbfea78ab545e4622b5bc7ecbc.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T06:09:01.093

您实际上需要研究在 django 中提供静态文件

[https://docs.djangoproject.com/en/dev/howto/static-files/](https://docs.djangoproject.com/en/dev/howto/static-files/)

您还可以在此处找到示例[图像不在 Django 运行服务器上以 HTML 呈现，但 HTML 在浏览器中工作](https://stackoverflow.com/questions/13020816/images-not-rendering-in-html-on-django-runserver-but-html-works-in-browser/13020912#13020912)

# android - 如何在不裁剪阴影的情况下裁剪 canvas.drawCircle()？

> ID：13466797
> 
> 赞同：3
> 
> 时间：2012-11-20T04:53:23.343
> 
> 标签：android, graphics, clipping

这是我的代码的简化版本：

```
Paint p = new Paint();

p.setShader(borderShader); //use a bitmap as a texture to paint with
p.setFilterBitmap(true);
p.setShadowLayer(20, 20, 20, Color.BLACK);

canvas.clipRect(10,0,width-10,height);
canvas.drawCircle(width/2,height/2,1000/2,p); 
```

所以图像看起来像这样：

![在此处输入图像描述](../Images/f3f488119f63550654c1bc2afc873efe.png)

两边都夹住的圆圈。

问题是，因为阴影向下偏移了 20 个像素，向右偏移了 20 个像素。阴影的右侧部分被 clipRect 剪裁，不会显示。

我必须使用 clipRect 而不是简单地绘制一个白色矩形来裁剪圆圈，因为圆圈的左右两侧需要透明才能在下面显示背景。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T03:41:45.867

我最终使用 Path 通过使用两条弧线和两条线段来绘制形状，而不是在圆上使用矩形剪切区域。

后来进行了大量的三角函数和数学运算，它完美地工作。

编辑：

根据请求，这是我最终使用的代码示例。请注意，这是为我的应用程序量身定制的，并且可以绘制出与我的问题完全相同的形状。

```
private void setupBorderShadow()
{
    //Set up variables
    int h = SUI.WIDTH / 2; // x component of the center of the circle 
    int k = SUI.HEIGHT_CENTER; // y component of the center of the circle

    int x = SUI.WIDTH / 2 - 4 * SUI.CIRCLE_RADIUS_DIFFERENCE - SUI.BORDER_WIDTH; //left side of the rectangle
    int r = 6 * SUI.CIRCLE_RADIUS_DIFFERENCE + SUI.BORDER_WIDTH; //radius of circle

    //define a rectangle that circumscribes the circle
    RectF circle = new RectF(h - r, k - r, h + r, k + r);

    Path p = new Path();
    //draw a line that goes from the bottom left to the top left of the shape
    p.moveTo(x, (float) (k + Math.sqrt(-(h * h) + 2 * h * x + r * r - (x * x))));
    p.lineTo(x, (float) (k - Math.sqrt(-(h * h) + 2 * h * x + r * r - (x * x))));

    //calculate the angle that the top left of the shape represents in the circle
    float angle = (float) Math.toDegrees(Math.atan(Math.sqrt(-(h * h) + 2 * h * x + r * r
            - (x * x))
            / (h - x)));

    //draw an arc from the top left of shape to top right of shape 
    p.arcTo(circle, 180 + angle, (180 - angle * 2));

    // the x component of the right side of the shape
    x = SUI.WIDTH / 2 + 4 * SUI.CIRCLE_RADIUS_DIFFERENCE + SUI.BORDER_WIDTH;

    //draw line from top right to bottom right
    p.lineTo(x, (float) (k + Math.sqrt(-(h * h) + 2 * h * x + r * r - (x * x))));

    //draw arc back from bottom right to bottom left. 
    p.arcTo(circle, angle, (180 - angle * 2));

    //draw the path onto the canvas
    _borderCanvas.drawPath(p, SUI.borderShadowPaint);
} 
```

请注意，我使用的某些变量（例如“CIRCLE_RADIUS_DIFFERENCE”）可能没有意义。忽略这些，它们是应用程序特定的常量。在几何计算中实际产生影响的所有变量都被标记。

# binary-tree - 如何以非递归方式获取二叉树中的叶节点数？

> ID：13466800
> 
> 赞同：0
> 
> 时间：2012-11-20T04:54:04.843
> 
> 标签：binary-tree, nodes, non-recursive

我有一个练习问题让我很困惑 - 在不使用递归的情况下获取二叉树中叶节点的数量。我已经环顾四周寻找想法，我已经看到了一些诸如将节点传递给堆栈的方法，但是当有多个分支时，我不知道该怎么做。任何人都可以提供指针吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T23:02:33.457

```
NumberOfLeafNodes(root);
int NumberOfLeafNodes(NODE *p)
{
    NODE *nodestack[50];
    int top=-1;
    int count=0;
    if(p==NULL)
        return 0;
    nodestack[++top]=p;
    while(top!=-1)
    {
        p=nodestack[top--];
        while(p!=NULL)
        {
            if(p->leftchild==NULL && p->rightchild==NULL)
                count++;
            if(p->rightchild!=NULL)
                nodestack[++top]=p->rightchild;
            p=p->leftchild;      
        }
    }
return count;
} 
```

# javascript - 如何准确地获取 typeof 是 object/array/null..？

> ID：13466803
> 
> 赞同：5
> 
> 时间：2012-11-20T04:54:28.230
> 
> 标签：javascript, jquery, arrays, object

```
var obj = {},ar = [],nothing=null,empty=undefined,word ='string',headorTail = true;

console.log(typeof obj) //object
console.log(typeof ar)//object
console.log(typeof nothing)//object
console.log(typeof empty)//undefined
console.log(typeof word)//string
console.log(typeof headorTail)//boolean 
```

但是我怎样才能得到 obj,ar,nothing 的类型`"object, array,null"`- 实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T04:56:08.780

如果你使用 jQuery，你可以使用[`jQuery.type`](http://api.jquery.com/jQuery.type/)：

```
jQuery.type(true) === "boolean"
jQuery.type(3) === "number"
jQuery.type("test") === "string"
jQuery.type(function(){}) === "function"
jQuery.type([]) === "array"
jQuery.type(new Date()) === "date"
jQuery.type(/test/) === "regexp" 
```

其他所有内容都`"object"`作为其类型返回。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T05:08:32.237

您可以尝试提取构造函数名称，并且不需要 JQuery：

```
function safeConstructorGet(obj) {
  try {
    console.log(obj.constructor.name) //object        
  } catch (e) {
    console.log(obj)
  }
}

safeConstructorGet(obj); //Object
safeConstructorGet(ar);  //Array
safeConstructorGet(nothing);  //null
safeConstructorGet(empty);  //undefined
safeConstructorGet(word);  //String
safeConstructorGet(headorTail); //Boolean 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-20T05:13:55.507

```
function getType(obj) {
    // Object.toString returns something like "[object Type]"
    var objectName = Object.prototype.toString.call(obj);
    // Match the "Type" part in the first capture group
    var match = /\[object (\w+)\]/.exec(objectName);

    return match[1].toLowerCase();
}

// Test it!
var arr = [null, undefined, {}, [], 42, "abc"];
arr.forEach(function(e){ console.log(getType(e)); }); 
```

请参阅 MDN 上的[Object.toString](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/toString)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-20T05:18:03.417

这也太好了！

```
function getType(v) {
    return (v === null) ? 'null' : (v instanceof Array) ? 'array' : typeof v;
}

var myArr = [1,2,3];
var myNull = null;
var myUndefined;
var myBool = false;
var myObj = {};
var myNum = 0;
var myStr = 'hi'; 
```

# google-maps - Google Maps API 点击点标记（非自定义）

> ID：13466805
> 
> 赞同：2
> 
> 时间：2012-11-20T04:55:01.367
> 
> 标签：google-maps, google-maps-api-3

当我渲染一个谷歌地图对象时，我看到一堆“标记”，旁边有地名。它们中的大多数是方点，但有时它们为酒吧提供酒杯或为星巴克提供一杯咖啡。

这些点叫什么？

如何检测它们何时被点击？如果单击这些点之一，则不会运行 Map 对象上的“单击”侦听器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T05:08:28.927

它们是“兴趣点”（poi）。

您无法检测到它们何时被单击，但您可以“设置”地图以不显示它们。

有关详细信息，请参阅Google Maps API v3 goup 中的[此线程](https://groups.google.com/group/google-maps-js-api-v3/browse_frm/thread/a5c3b4a73ef5cd8/89ae0edaed5b0be0?lnk=gst&q=hide+poi#89ae0edaed5b0be0)。

[高级请求](https://code.google.com/p/gmaps-api-issues/issues/detail?id=4797)

# php - 确定同一个 MySQL 表中两个值的时间戳差异

> ID：13466807
> 
> 赞同：1
> 
> 时间：2012-11-20T04:55:35.800
> 
> 标签：php, mysql

我对 PHP 编程比较陌生，所以如果这是一个相当简单的问题，我深表歉意。

我有一个名为 MachineReports 的 MySQL 数据库表，其中包含以下值：ReportNum(primary key, auto increment)、MachineID 和 Timestamp

以下是一些示例数据：

```
|ReportNum | MachineID |     Timestamp      |
|1         | AD3203     | 2012-11-18 06:32:28|
|2         | AD3203     | 2012-11-19 04:00:15|
|3         | BC4300     | 2012-11-19 04:00:15| 
```

我试图做的是通过迭代每个行集来找到每个机器 ID 的时间戳差异（以秒为单位）。然而，我被困在最好的方法上。这是我到目前为止编写的代码：

```
<?php
include '../dbconnect/dbconnect.php';
      $machineID=[];

//Get a list of all MachineIDs in the database      
foreach($dbh->query('SELECT DISTINCT(MachineID) FROM MachineReports') as $row) {
        array_push($machineID, $row[0]);
   }

  for($i=0;$i<count($machineID);$i++){
    foreach($dbh->query("SELECT MachineID FROM MachineReports WHERE MachineID='$machineID[$i]' ORDER BY MachineID") as $row) {

    //code to associate each machineID with two time stamps goes here
 }
  } 
```

?> 这段代码只是逐行列出表格的内容。**我的最终目标是找到某个 MachineID 的时间戳差异。**我考虑过的一件事是在 php 中使用多维数组 - 使用 $machineID 作为键，然后将时间戳存储在键指向的数组中。

但是，我不确定如何做到这一点，因为我的查询逐行解析。

我有很多问题。

1）这是最有效的方法吗？我怀疑我的数据库表设计可能不是最好的。2）确定某个机器ID的时间戳差异的最佳方法是什么？

即使只是指向一个可以促使我以不同方式思考这个问题的话题也会有所帮助——我不害怕做研究。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T05:23:08.390

该解决方案假设您希望每台机器有 1 行，所以这可能是一个很大的假设！您可以针对 ts 的最大值使用 now() 函数。如果您列出您期望的示例输出，我们可以调整答案。

您可以使用 machineid 和 maxts 以及之前的 ts 创建一个临时表。最后两列为空。为每个不同的 machineid 插入一行。然后将每一行的 maxts 更新为其 ts 的最大值。更新每一行的priorts 是maxts 之前的最大ts 行。然后你有你的数据

```
CREATE TABLE t1 (
reportnum int not null AUTO_INCREMENT PRIMARY KEY,
machineid char(10) not null,
ts TIMESTAMP
);
 insert into t1 (machineid,ts) select 'AD3203','2012-11-18 06:32:28';
 insert into t1 (machineid,ts) select 'AD3203','2012-11-19 04:00:15';
 insert into t1 (machineid,ts) select 'BC4300','2012-11-19 04:00:15';

CREATE TABLE temp_rpt (
machineid char(10) not null,
maxts TIMESTAMP null,
priorts TIMESTAMP null
);

  insert into temp_rpt (machineid,maxts,priorts)
 select distinct machineid,null,null from t1;

UPDATE temp_rpt
SET maxts = 
  ( SELECT MAX(ts) 
    FROM t1
    WHERE machineid = temp_rpt.machineid
  )

UPDATE temp_rpt
SET priorts = 
  ( SELECT MAX(ts) 
    FROM t1
    WHERE machineid = temp_rpt.machineid
    and ts<temp_rpt.maxts
  )

 select * from temp_rpt;
+-----------+---------------------+---------------------+
| machineid | maxts               | priorts             |
+-----------+---------------------+---------------------+
| AD3203    | 2012-11-19 04:00:15 | 2012-11-18 06:32:28 |
| BC4300    | 2012-11-19 04:00:15 | NULL                |
+-----------+---------------------+---------------------+ 
```

然后做你的约会数学

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T06:29:30.257

不确定我完全理解您要做什么，但是如果您要计算 MachineID 相同的表的每一行之间的时间差，我相信类似以下的内容应该可以满足您的需要。

注意：这会找到每行之间的时间差（对于相同的 MachineID，它会随着每个新的 MachineID 重置为 00:00:00）。如果您想要第一行和最后一行之间的总数，则必须对 TimestampDiff 值求和。

```
DROP TABLE IF EXISTS tMachineReportsTest;
CREATE TABLE tMachineReportsTest (
    ReportNum INT UNSIGNED NOT NULL AUTO_INCREMENT,
    MachineID VARCHAR(6) NOT NULL,
    Timestamp DATETIME NOT NULL,
    PRIMARY KEY (ReportNum),
    UNIQUE KEY (MachineId, Timestamp)
);

INSERT INTO tMachineReportsTest VALUES
(NULL,'AD3203','2012-11-18 06:32:28'),
(NULL,'AD3203','2012-11-18 10:45:13'),
(NULL,'BC4300','2012-11-19 04:00:15'),
(NULL,'AD3203','2012-11-19 11:19:23'),
(NULL,'BC4300','2012-11-20 06:08:01'),
(NULL,'AD3203','2012-11-20 18:04:45')
;

SET @machineId     := NULL;
SET @lastMachineId := NULL;
SET @lastTimestamp := NULL;

SELECT x.ReportNum, x.MachineId, x.Timestamp, x.TimestampDiff FROM (
    SELECT
        tMRT.ReportNum,
        tMRT.MachineId,
        tMRT.Timestamp,
        @lastMachineId := @machineId AS _lastMachineId,
        @machineId     := tMRT.machineId AS _machineId,
        CASE WHEN @lastMachineId IS NULL OR @lastMachineId = @machineId THEN TIMEDIFF(tMRT.Timestamp, IFNULL(@lastTimestamp, tMRT.Timestamp)) ELSE '00:00:00' END TimestampDiff,
        @lastTimestamp := tMRT.Timestamp lastTimestamp
    FROM
        tMachineReportsTest tMRT
    ORDER BY
        tMRT.MachineId, tMRT.Timestamp
) x
; 
```

结果查询的输出如下所示：

```
+-----------+-----------+---------------------+---------------+
| ReportNum | MachineId | Timestamp           | TimestampDiff |
+-----------+-----------+---------------------+---------------+
|         1 | AD3203    | 2012-11-18 06:32:28 | 00:00:00      |
|         2 | AD3203    | 2012-11-18 10:45:13 | 04:12:45      |
|         4 | AD3203    | 2012-11-19 11:19:23 | 24:34:10      |
|         6 | AD3203    | 2012-11-20 18:04:45 | 30:45:22      |
|         3 | BC4300    | 2012-11-19 04:00:15 | 00:00:00      |
|         5 | BC4300    | 2012-11-20 06:08:01 | 26:07:46      |
+-----------+-----------+---------------------+---------------+
6 rows in set (0.01 sec) 
```

# android - 选定的 ImageView 位置更改为在图库视图中单击时居中

> ID：13466808
> 
> 赞同：0
> 
> 时间：2012-11-20T04:55:38.747
> 
> 标签：android, android-gallery

我使用了画廊视图，我在其中动态放置了多个图像视图，但是在单击图像视图时它位于中心，第二个问题是如何从屏幕左侧开始第一个图像视图。

在用户用手指水平滚动之前，我不想更改位置。有什么办法可以做到这一点。请帮忙。。

```
private  class ImageAdapter extends BaseAdapter{

     public ImageAdapter() {
        //To set blank at bottom and make visible
        TextView textView = (TextView)findViewById(R.id.textView2);
        textView.setVisibility(View.VISIBLE);

        //To set the visibility visible of gallery
        myGallery.setVisibility(View.VISIBLE);
     }

     public int getCount() {
         return ProductItemArray.Image_URL.length;
     }

     public Object getItem(int position) {
         return null;
     }

     public long getItemId(int position) {
         return 0;
     }

     public View getView(int position, View arg1, ViewGroup arg2) {
         ImageView bottomImageView = new ImageView(context);

         if(Helper.isTablet(context))
             bottomImageView.setLayoutParams(new Gallery.LayoutParams(VirtualMirrorActivity.convertDpToPixel(100, context), VirtualMirrorActivity.convertDpToPixel(100, context)));
         else
             bottomImageView.setLayoutParams(new Gallery.LayoutParams(VirtualMirrorActivity.convertDpToPixel(80, context), VirtualMirrorActivity.convertDpToPixel(80, context)));

         UrlImageViewHelper.setUrlDrawable(bottomImageView, ProductItemArray.Image_URL[position]);
         bottomImageView.setBackgroundResource(R.layout.border);

         return bottomImageView;
     }

}

myGallery.setAdapter(new ImageAdapter());
myGallery.setSelection(1);
myGallery.setOnItemClickListener(new OnItemClickListener()
{
    @Override
    public void onItemClick(AdapterView<?> parent, View view, final int position, long arg3)
    {
        linearLayout.removeView(frameImageView);
        Thread newThread = new Thread(new Runnable() {
            public void run() {
                URL url_1 = null;
                try {
                    isAlreadyExistInWishlist = false;
                    VMProductListPaging.productUrl = ProductItemArray.Image_small_URL[position];
                    VMProductListPaging.productId = ProductItemArray.productId[position];
                    VMProductListPaging.productName = ProductItemArray.product_Name[position];

                    url_1 = new URL(ProductItemArray.Image_small_URL[position]);
                    bmp = BitmapFactory.decodeStream(url_1.openConnection().getInputStream());
                    isExecuted = true;
                    bitmapHandler.sendMessage(bitmapHandler.obtainMessage());
                }
                catch (Exception e) {
                    //Toast.makeText(context,"Sorry!! This link appears to be broken",Toast.LENGTH_LONG).show();
                }
            }
        });
        newThread.start();
    }
}); 
```

布局.xml

```
<Gallery android:id="@+id/galleryView"  android:layout_width="fill_parent" android:layout_height="wrap_content"  
    android:spacing="5dp" android:layout_below="@+id/sendPhoto" android:layout_marginTop="10dp" android:visibility="gone"/> `enter code here` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T12:44:27.117

这个画廊小部件锁定在视图的左侧而不是中心。

[https://github.com/TheLevelUp/android-left-locked-gallery](https://github.com/TheLevelUp/android-left-locked-gallery)

# javascript - 尝试解析 AJAX 响应时“getElementById 不是函数”？

> ID：13466812
> 
> 赞同：1
> 
> 时间：2012-11-20T04:56:16.117
> 
> 标签：javascript, xmlhttprequest, greasemonkey, getelementbyid, gm-xmlhttprequest

我正在运行`GM_xmlhttpRequest`（在 Greasemonkey 脚本中）并将其存储`responseText`到新创建的 HTML 元素中：

```
var responseHTML = document.createElement('HTML');
...
onload: function() { responseHTML.innerHTML = response.responseText; } 
```

然后我试图找到一个元素`responseHTML`：

```
console.log(responseHTML.getElementsByTagName('div'));
console.log(responseHTML.getElementById('result_0')); 
```

第一个工作正常，但不是第二个。有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-20T05:53:08.213

用于[`DOMParser()`](https://developer.mozilla.org/en-US/docs/DOM/DOMParser)转换`responseText`为可搜索的 DOM 树。
此外，您尝试搜索/使用从`responseText`, 派生的任何内容都必须发生在`onload`函数内部。

使用这样的代码：

```
GM_xmlhttpRequest ( {
    ...
    onload:     parseAJAX_ResponseHTML,
    ...
} );

function parseAJAX_ResponseHTML (respObject) {
    var parser      = new DOMParser ();
    var responseDoc = parser.parseFromString (respObject.responseText, "text/html");

    console.log (responseDoc.getElementsByTagName('div'));
    console.log (responseDoc.getElementById('result_0'));
} 
```

当然，还要验证一个带有 id 的节点`result_0`实际上是否在返回的 HTML 中。（使用 Firebug、Wireshark 等）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-20T06:21:05.350

`getElementById`不是 HTML 元素的方法。它是文档节点的一种方法。因此你不能这样做：

```
div.getElementById('foo'); // invalid code 
```

您可以实现自己的函数来通过递归遍历 DOM 来搜索`children`. 在较新的浏览器上，您甚至可以使用该`querySelector`方法。对于最小的开发，您可以使用 jQuery 或 sizzle.js（jQuery 背后的查询引擎）之类的库。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-03-08T06:21:13.770

无需将响应存储在元素中，也无需使用 DOMParser()

只需将 responseType 设置为'document'，响应将被自动解析并存储在 responseXML

例子：

```
var ajax = new XMLHttpRequest();
ajax.open('get','http://www.taringa.net');
ajax.responseType = 'document';
ajax.onload = function(){
    console.log(ajax.responseXML); //And this is a document which may execute getElementById
};
ajax.send(); 
```

# html - 如何将项目与灵活框布局列中的最底部对齐？

> ID：13466815
> 
> 赞同：-1
> 
> 时间：2012-11-20T04:56:38.440
> 
> 标签：html, css, flexbox

到目前为止，我将三列放在一个垂直框中（还不能发布图片，所以这里有一个链接）：http: [//imgur.com/4Y34c](http://imgur.com/4Y34c)

```
<div id="vbox">
<div id="blck1"></div>
<div id="blck2"></div>
<div id="blck3"><div id="yellow"></div><div id="blue"></div></div>
</div> 
```

css

```
 #vbox{
 display: box;
 box-orient: vertical;
 }
 #vbox > div {
 box-flex: 1;
 } 
```

问题是我不知道如何让蓝色框与第三列的底部对齐。我尝试了所有对齐属性，我一定做错了。有任何想法吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T05:15:35.947

首先，您应该使用新的 CSS Flexible Box Module 语法（现在称为“Flex”而不是“Box”）。请参阅此处的规范：http: [//www.w3.org/TR/css3-flexbox/](http://www.w3.org/TR/css3-flexbox/)

这是您尝试完成的示例（在 Chrome/Safari 中）：http: [//jsfiddle.net/PU2AV/](http://jsfiddle.net/PU2AV/)

在你的第三个`<div>`我已经设置：

```
-webkit-justify-content: space-between; 
```

这会在两个元素之间创建空间（如果添加更多元素，它将平均划分所有元素之间的空间）。

或者，您可以`<div>`在 #yellow 和 #blue 之间添加三分之一并给出：

```
-webkit-flex: 1 1 auto; 
```

这将导致它在#yellow 和#blue（具有静态高度）之间“弯曲”，将#blue 一直向下推。如果您将其保留为透明背景，它将具有相同的效果。有时您可能会发现将灵活空间作为实际元素很有用。

# c# - 将重复代码转换为方法

> ID：13466816
> 
> 赞同：0
> 
> 时间：2012-11-20T04:57:15.913
> 
> 标签：c#

在我的项目中，我将 ComboBox、Text、Link 标签添加到我的 DataGridView 中`dgvMain`。我为不同的单元格模板创建了不同的方法，如下所示：（*下面的代码有效*）

**gridLnklbl（字符串标题名称）**

```
 DataGridViewLinkColumn col = new DataGridViewLinkColumn();
   col.HeaderText = headerName;     //
   col.Name = "col" + headerName;   // same code repeating to all the methods
   dgvMain.Columns.Add(col);        // 
```

**gridCmb（字符串标题名称）**

```
 DataGridViewComboBoxColumn col = new DataGridViewComboBoxColumn();
   col.HeaderText = headerName;
   col.Name = "col" + headerName;
   dgvMain.Columns.Add(col); 
```

**gridText（字符串标题名称）**

```
 DataGridViewTextBoxColumn col = new DataGridViewTextBoxColumn();
   col.HeaderText = headerName;
   col.Name = "col" + headerName;
   dgvMain.Columns.Add(col); 
```

如您所见，除了对象的声明外，每个方法的代码都是重复的。只是想知道，可以将重复代码转换为单一方法吗？我不知道该怎么做.. 它不是关于 3 行代码，我已经写了更多可以与这些方法通用的行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T05:02:22.453

您的所有列类型都派生自[DataGridViewColumn](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewcolumn.aspx)，它具有 HeaderText 和 Name 属性。您可以创建一个采用此基本类型的方法，并设置值：

```
public void AddColumnHeader(DataGridViewColumn column, string headerName)
{
    column.HeaderText = headerName;
    column.Name = "col" + headerName;
    dgvMain.Columns.Add(column);
} 
```

用法然后变成

```
DataGridViewTextBoxColumn col = new DataGridViewTextBoxColumn();

AddColumnHeader(col, "Header name"); 
```

Jonathon Reinhart 有一个使用扩展方法的更清洁的解决方案，我建议使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T05:02:22.970

我会在以下位置使用[通用](http://msdn.microsoft.com/en-us/library/512aeb7t.aspx) [**扩展方法**](http://msdn.microsoft.com/en-us/library/vstudio/bb383977.aspx)[`DataGridView`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.aspx)：

```
public static class ExtensionMethods {

    public static void AddColumn<TCol>(this DataGridView dgv, string headerName) 
        where TCol : DataGridViewColumn, new()
    {
       var col = new TCol {
           HeaderText = headerName,
           Name = "col" + headerName,
       };
       dgv.Columns.Add(col); 
    }
} 
```

有一个[约束](http://msdn.microsoft.com/en-us/library/d5x73970.aspx)`TCol`确保它是`DataGridViewColumn`.

像这样调用*扩展方法* ：

```
dgvMain.AddColumn<DataGridViewLinkColumn>(headerName); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T05:02:35.747

假设所有这些类共享一个接口或超类（看起来他们可能这样做），您可以编写如下内容：

```
void AddColumns(params ColumnSuperType[] columns) {
    for...
} 
```

其中“ColumnSuperType”是相关的父类型或接口。

然后你可以做

```
AddColumns(new DataGridViewTextBoxColumn(), new DataGridViewComboBoxColumn(), etc) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T05:03:05.137

你所有的列对象都是从 DataGridViewColumn 派生的，试试这样的：

```
private void yourMethode(DataGridViewColumn col)
{
   col.HeaderText = headerName;     
   col.Name = "col" + headerName;   
   dgvMain.Columns.Add(col);   
} 
```

# python - 为什么使用 psycopg2 use_native_unicode 的 SQLAlchemy 性能不佳？

> ID：13466818
> 
> 赞同：1
> 
> 时间：2012-11-20T04:57:31.213
> 
> 标签：python, postgresql, sqlalchemy, psycopg2

我很难弄清楚为什么一个简单的 SELECT 查询在使用原始 SQL 的 sqlalchemy 中需要这么长时间（我得到 14600 行/秒，但是当没有 sqlalchemy 通过 psycopg2 运行相同的查询时，我得到了38421 行/秒）。

经过一番摸索，我意识到在 create_engine 调用中切换 sqlalchemy 的 use_native_unicode 参数实际上会产生巨大的差异。

此查询需要 0.5 秒来检索 7300 行：

```
from sqlalchemy import create_engine

engine = create_engine("postgresql+psycopg2://localhost...",
                       use_native_unicode=True)
r = engine.execute("SELECT * FROM logtable")
fetched_results = r.fetchall() 
```

此查询需要 0.19 秒来检索相同的 7300 行：

```
engine = create_engine("postgresql+psycopg2://localhost...",
                       use_native_unicode=False)
r = engine.execute("SELECT * FROM logtable")
fetched_results = r.fetchall() 
```

两个查询之间的唯一区别是 use_native_unicode。但是 sqlalchemy 自己的文档声明最好保持 use_native_unicode=True (http://docs.sqlalchemy.org/en/latest/dialects/postgresql.html)。

有谁知道为什么 use_native_unicode 会产生如此大的性能差异？关闭 use_native_unicode 的后果是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T21:47:20.380

这个问题是您需要根据您要处理的非 ASCII 数据量来决定的。psycopg2 解码 unicode 的方法比 SQLAlchemy 的方法更快，假设 SQLA 的 C 扩展未在使用中，但与不进行任何类型的 unicode 转换相比，仍然会增加结果集的延迟。在上面的代码中，没有使用 SQLAlchemy 的 unicode 工具；这些仅在列映射到 Unicode 或 String 类型时使用，仅当您使用 text()、select() 或 ORM 级别的等效项时才会发生这种情况，其中 Unicode 类型映射到这些结果集列使用表元数据 text() 的“typemap”参数。

Psycopg2 的本机 unicode 工具 OTOH 在光标级别生效，因此始终有效，并且显然总体上增加了一些延迟。

下面是一系列说明不同方法如何工作的插图。最后一个是与 SQLAlchemy 最相似的，虽然当使用 SQLAlchemy 的 C 扩展时，我们可能只是 psycopg2 的快：

```
import psycopg2
from psycopg2 import extensions

conn = psycopg2.connect(user='scott', password='tiger', host='localhost', database='test')

cursor = conn.cursor()
cursor.execute("""
create table data (
    id SERIAL primary key,
    data varchar(500)
)
""")

cursor.executemany("insert into data (data) values (%(data)s)", [
        {"data":"abcdefghij" * 50} for i in xrange(10000)
    ])
cursor.close()

def one(conn):
    cursor = conn.cursor()
    cursor.execute("SELECT data FROM data")
    for row in cursor:
        row[0]

def two(conn):
    cursor = conn.cursor()
    extensions.register_type(extensions.UNICODE, cursor)
    cursor.execute("SELECT data FROM data")
    for row in cursor:
        row[0]

def three(conn):
    cursor = conn.cursor()
    cursor.execute("SELECT data FROM data")
    for row in cursor:
        row[0].decode('utf-8')

def four(conn):
    cursor = conn.cursor()
    def conv_unicode(value):
        return value.decode('utf-8')
    cursor.execute("SELECT data FROM data")
    for row in cursor:
        conv_unicode(row[0])

import timeit

print "no unicode:", timeit.timeit("one(conn)", "from __main__ import conn, one", number=100)

print "native unicode:", timeit.timeit("two(conn)", "from __main__ import conn, two", number=100)

print "in Python unicode:", timeit.timeit("three(conn)", "from __main__ import conn, three", number=100)

print "more like SQLA's unicode:", timeit.timeit("four(conn)", "from __main__ import conn, four", number=100) 
```

我得到的时间：

```
no unicode: 2.10434007645
native unicode: 4.52875208855
in Python unicode: 4.77912807465
more like SQLA's unicode: 4.88325881958 
```

所以这里有趣的是，如果我们使用 C 扩展，SQLA 的方法实际上可能是比 psycopg2 的本机方法更好的选择，如果事实上你没有大量使用 Unicode 类型和你的大部分字符串值只是纯 ASCII。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-20T17:34:02.377

tl; 博士：最近在 psycopg2 的 unicode 处理方面有一些性能改进——试试 2.7 版本。

我注意到了和你一样的事情，并向@zzzeek 发送了一些时间。这是他在邮件列表中的回复。 [https://groups.google.com/d/msg/sqlalchemy/TtIel3LTGMY/Ta5oDkNdCwAJ](https://groups.google.com/d/msg/sqlalchemy/TtIel3LTGMY/Ta5oDkNdCwAJ)

但是，基本上归结为 sqlalchemy 中的 c-extension unicode 处理似乎比 psycopg2 更有效。我通知了 psycopg2 邮件列表并打开了一个问题并得到了很好的响应（[https://github.com/psycopg/psycopg2/issues/473](https://github.com/psycopg/psycopg2/issues/473)）。

# c++ - 在 C# 中加载非托管 C++。错误试图读取或写入受保护的内存

> ID：13466819
> 
> 赞同：0
> 
> 时间：2012-11-20T04:57:39.250
> 
> 标签：c++, visual-c++-2010

我有一个看起来像这样的 C++ 函数

```
 __declspec(dllexport) int ___stdcall RegisterPerson(char const * const szName)
    {
        std::string copyName( szName );
        // Assign name to a google protocol buffer object
        // Psuedo code follows..
        Protobuf::Person person;
        person.set_name(copyName);
        // Error Occurs here...
        std::cerr << person->DebugString() << std::endl;
    } 
```

对应的 C# 代码如下所示...

```
 [DllImport(@"MyLibrary.dll", SetLastError = true)]
    public static unsafe extern int RegisterPerson([MarshalAs(UnmanagedType.LPTStr)]string szName) 
```

不知道为什么这不起作用。我的 C++ 库被编译为具有多字节编码的多线程 DLL。

任何帮助，将不胜感激。我在网上看到这是一个常见问题，但没有答案让我找到解决问题的方法。

我能够使用与我的 DLL 导出的函数参数相同的函数参数成功调用另一个导出函数，并且该函数运行良好。这个“注册人”功能比其他导出的功能长一点，但由于某种原因不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T06:21:29.577

首先，C++ 函数的定义漏掉了`extern "C"`，如果没有指定，Pinvoke 会因为 C++ 名称混杂而找不到函数。

正如C#中定义的那样，指定UnmanagedType.LPTStr，默认为宽字符，但C++函数RegisterPerson的参数为char，应改为UnmanagedType.LPStr。

更多详细信息[可以在 MSDN 库中找到](http://msdn.microsoft.com/en-us/library/s9ts558h%28v=vs.110%29.aspx)。

# ruby-on-rails - Rails - 如何将 Helper 连接到控制器模块

> ID：13466821
> 
> 赞同：0
> 
> 时间：2012-11-20T04:57:52.330
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有帮手：

```
module BreadcrumbsHelper
  def breadcrumbs_cache_wrap(key, options, &block)
    ...
  end
end 
```

我将控制器的一部分提取到模块：

```
module ApplicationController::Breadcrumbs

  def default_breadcrumbs
  ...
end

class ApplicationController < ActionController::Base
  include ApplicationController::Breadcrumbs

  ...
end 
```

现在我想将 Helper 连接到 Controller。我可以这样做：

```
class ApplicationController
  include ApplicationController::Breadcrumbs
  helper :breadcrumbs

  ...
end 
```

它正在工作。**问题是如何封装与面包屑模块​​的连接？**

```
module ApplicationController::Breadcrumbs     
  helper :breadcrumbs

  ...
end 
```

不幸的是，此代码无法正常工作“未定义的方法 `helper'”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T04:13:06.653

我确实找到了如何将助手连接到控制器模块：

```
module ApplicationController::Breadcrumbs     
  included { helper :breadcrumbs }

  ...
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T06:35:49.173

首先`ApplicationController`是继承`ActionController::Base`，这就是为什么要继承`ApplicationController`辅助方法。
现在`'ApplicationController::Breadcrumbs'`，您正在使用的模块没有“助手”方法。因此，您必须在模块中包含辅助`'ApplicationController::Breadcrumbs'`模块才能访问辅助方法。

尝试下面给出的代码：

```
module BreadcrumbsHelper
  def breadcrumbs_cache_wrap(key, options, &block)
    ...
  end
end

module ApplicationController::Breadcrumbs
  include BreadcrumbsHelper  
  def default_breadcrumbs
  ...
end 
```

# ruby-on-rails-3 - f.collection_select 不工作 rails 3 (has_many/belongs_to)

> ID：13466825
> 
> 赞同：2
> 
> 时间：2012-11-20T04:58:23.100
> 
> 标签：ruby-on-rails-3, form-for, form-helpers

我有两个模型：用户和公司。一个用户属于一个公司，一个公司有_许多用户。

当用户在表单上注册时，我希望有一个用户可以从中选择的公司列表，并且在创建用户时创建与公司的关联。

我认为 collection_select 将是这个问题的答案，它确实用公司名称填充下拉框，我可以选择它们，但它没有传递到 User 表并创建关联，Company_id 列（外键）保持空白.

如果我把 f.collection_select 我得到错误： undefined method `merge' for :company_name:Symbol

经过大约一两个星期的工作后，我无法弄清楚如何让它工作，而且我找不到太多关于此的文档。请帮忙！（如果需要更多代码，请告诉我！）

报名表：

```
<%= form_for(@user) do |f| %>
    <%= render 'shared/error_messages', object: f.object %>
<%= f.label :company, :class => 'col-left' %>
<%= f.collection_select(:user, :company_id, Company.all, :id, :company_name, {:include_blank => true}) %>
     <%= f.label :email, :class => 'col-left' %>
     <%= f.text_field :email, :class => 'col-right' %>
     <%= f.label :name, :class => 'col-left' %>
     <%= f.text_field :name %>
     <%= f.label :password, :class => 'col-left' %>
     <%= f.password_field :password %>
     <%= f.label :password_confirmation, "Confirm Password", :class => 'col-left' %>
     <%= f.password_field :password_confirmation %>
     <%= image_submit_tag "/assets/create-account.png" %>
     <% end %> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T07:13:52.423

在 <%= f.collection_select(:user, ...) %> 中，"f" 是你的用户 => form_for( **@user** ) do |f|

你试过这个吗？

```
<%= f.collection_select(:company_id, Company.all, :id, :company_name, {:include_blank => true}) %> 
```

# java - 打印没有全 0 的因子的数组

> ID：13466831
> 
> 赞同：0
> 
> 时间：2012-11-20T04:58:43.553
> 
> 标签：java, arrays, sorting

我在尝试让 testperfect 方法输出的数组正确打印时遇到问题，我知道我需要更改我的打印语句，但不确定如何（此语句在最后一个方法 printFactors 中）我需要它来打印因子在数组 testperfect 中，但我不希望它打印 0。我必须使用一个数组，并且该数组的大小为 100。

```
import java.util.Scanner;
public class name_perfect
{
 public static void main ( String args [] )
 {
  int gN;
  int gP = getPerfect();
  int [] array = new int[100];
  boolean tP = testPerfect(gP, array);
  printFactors(gP, array, tP);
  //System.out.println(Arrays.toString(array));
}

public static int getNum() //asks for how many numbers to test
{
 Scanner input = new Scanner ( System.in );
 System.out.print( "How many numbers would you like to test? " );
 int count = input.nextInt();
 int perfect = 1;
 boolean vN = validateNum(count, perfect);
 while(!vN)
 {
  System.out.print (" How many numbers would you like to test? ");
  count = input.nextInt();
  vN = validateNum(count, perfect);
 }
 return count;
 } 

public static boolean validateNum( int count, int perfect  ) //Checks if numbers input are valid
{
 if (( count <= 0) || ( perfect <= 0))

 { 
  System.out.print( "Non-positive numbers are not allowed.\n");
 }

 else 
 {
  return true;
 }
 return false;

}
public static int getPerfect() //asks for the numbers to test
{
 Scanner input = new Scanner ( System.in );
 int perfect = -1;
 int count = getNum();
 System.out.print("Please enter a perfect number: " );
 perfect = input.nextInt(); 
 boolean vN = validateNum(perfect, count);
 while (!vN) 
 {
  System.out.print("Please enter a perfect number: ");
  perfect = input.nextInt();
  vN=validateNum(perfect, count);
 }
 return perfect;
 }

public static boolean testPerfect( int perfect, int[] array ) //tests the numbers that were input 

{
 //testPerfect(perfect, array);
 int limit = perfect;
 int index = 0;
 for ( int i = 1; i < limit ; i++)
 {
  if ( perfect % i == 0)
   { array[i]=i;}
 }

 array[index] = perfect;

 int sum = 0;
 for ( int i = 1; i < limit; i++)
 {
  sum = sum + array[i];
 }

 if ( sum == perfect)
 {
  //Something has to change the array here.
  return true;  
 }

 else
 {
 return false;
 }

}

public static void printFactors(int perfect, int [] array, boolean tP )
 {
 if ( tP == true)
 {
 System.out.println (perfect + ":" + (Arrays.toString(array)));
 }
 else
 {
 System.out.println (perfect + ":" + "NOT PERFECT");
 }

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T05:07:32.657

为此，您可以有两种解决方案。

1.使用任何排序技术或使用集合框架排序方法对该数组进行排序，然后遍历数组，如果元素为“0”，则不要打印。

```
 for(int i=0;i<array.length;i++){
       if(array[i]==0)
         continue;
    else
       System.out.println(array[i]);
    } 
```

2.使用数组列表。它使用灵活。将完美的数字添加到这个 ArrayList 并打印出来。它将仅包含添加的元素。

```
 for(int i=0;arrayList.size();i++)
 {
     System.out.println(arrayList.get(i));
 } 
```

ArrayList 是最可取的，因为，

不需要初始化你想要多少元素。它使用灵活。添加元素时它会扩展。无需担心大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T06:11:06.213

我认为以下程序适用于您的情况。

```
import java.util.ArrayList;
import java.util.Arrays;

public class TestArray {

    private static void print(Integer[] array)
    {
        for(Integer el:array)
            System.out.print(el + " ");
        System.out.println("");
    }

    public static void main(String[] args) {

        // Constructing an Integer array. You can use input-reader to fill the array
        Integer[] array =  new Integer[]{0,1,123,456,-89,0,-1,567,0,23,231,987,0,987654,0};

        // printing the unsorted content 
        print(array);

        // sorting the array
        Arrays.sort(array);

        // printing the sorted content, with '0' values in it 
        print(array);

        //Converts the integer[] to ArrayList, so that i can easily remove elements with value '0' 
        ArrayList<Integer> arrayList = new ArrayList<Integer>(Arrays.asList(array));

        // prints the arraylist
        System.out.println(arrayList);

        //removes the elements with value '0' 
        while(arrayList.contains(new Integer(0)))
            arrayList.remove(new Integer(0));
        System.out.println(arrayList);

        // converting back to Integer[]
        array = arrayList.toArray(new Integer[]{});

        // prints to see that the final array is sorted and conatins no '0' values
        print(array);
    }
} 
```

请测试并让我知道状态:)

和输出

```
0 1 123 456 -89 0 -1 567 0 23 231 987 0 987654 0 
-89 -1 0 0 0 0 0 1 23 123 231 456 567 987 987654 
[-89, -1, 0, 0, 0, 0, 0, 1, 23, 123, 231, 456, 567, 987, 987654]
[-89, -1, 1, 23, 123, 231, 456, 567, 987, 987654]
-89 -1 1 23 123 231 456 567 987 987654 
```

**编辑**

我解决了你的问题。这是另一个仅使用`int[]`并从中删除`0`元素的示例。

```
import java.util.Arrays;

public class TestArray {

    private static void print(int[] array)
    {
        for(int el:array)
            System.out.print(el + " ");
        System.out.println("");
    }

    public static void main(String[] args) {

        // Constructing an Integer array. You can use input-reader to fill the array
        int[] array =  new int[]{0,1,123,456,-89,0,-1,567,0,23,231,987,0,987654,0};
//      int[] array =  new int[]{1,123,456,-89,-1,567,23,231,987,987654};
//      int[] array =  new int[]{1,123,456,-89,-1,567,23,231,987,987654,0};
//      int[] array =  new int[]{1,123,456,567,23,231,987,987654};

        // printing the unsorted content 
        print(array);

        // sorting the array
        Arrays.sort(array);

        // printing the sorted content, with '0' values in it 
        print(array);

        // finds the starting and ending position of '0' elements in the sorted array
        int startPos = -1;
        int endPos = -1;
        for(int i=0;i<array.length;i++)
        {
            if(array[i]==0 && startPos == -1) startPos = i;
            if(array[i]==0) endPos = i;
        }
        System.out.println("startPos : " + startPos + " endPos : " + endPos);

        int[] newArray = null;
        if(startPos!=-1) // there are '0' elements in the array
        {
            // creates another array with new length. 
            int newArrayLength = array.length - (endPos-startPos+1);
            System.out.println("array.length : "+array.length);
            System.out.println("newArrayLength : "+newArrayLength);

            newArray = new int[newArrayLength];
            // copy the contents from original array till start of first '0' value
            System.arraycopy(array, 0, newArray, 0, startPos);
            // copy the remaining contents from original array after end of last '0' value
            System.arraycopy(array, endPos+1, newArray, startPos , newArrayLength-startPos);
        }
        else // no '0' values present in array
        {
            // just copy the original array to new array
            int newArrayLength = array.length ;
            newArray = new int[newArrayLength];
            System.arraycopy(array, 0, newArray, 0 , newArrayLength);
        }

        // prints to see that the final array is sorted and conatins no '0' values
        print(newArray);
    }
} 
```

和输出

```
0 1 123 456 -89 0 -1 567 0 23 231 987 0 987654 0 
-89 -1 0 0 0 0 0 1 23 123 231 456 567 987 987654 
startPos : 2 endPos : 6
array.length : 15
newArrayLength : 10
-89 -1 1 23 123 231 456 567 987 987654 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T06:38:47.610

```
 import java.util.*;
  public class TestPerfect {
public static void main(String a[]){
    ArrayList<Integer> perfectNos = new ArrayList<Integer>();
    System.out.println("Enter the perfect number");
    Scanner sc = new Scanner(System.in);
    int per = sc.nextInt();
    int perflag = 0;
    int sum = 0;
    for(int i=1;i<per;i++){
        if(per % i == 0)
            sum =sum+i;
    }
    if(sum == per){
        for(int i=1;i<per;i++)
            if(per % i == 0){
                perfectNos.add(i);
            }
        System.out.print(per+":");
        for(int i=0;i<perfectNos.size();i++)
            System.out.print(perfectNos.get(i)+" ");
    }
    else
        System.out.println(per+": NOT PERFECT");
} 
```

}

这将解决您的问题。

# java - 使用网格包布局设计java框架

> ID：13466832
> 
> 赞同：1
> 
> 时间：2012-11-20T04:58:44.277
> 
> 标签：java, swing, awt, grid-layout, gridbaglayout

我必须使用网格包布局在 JFrame 中设计按钮。以便所有系统的定位可能相同。我正在使用以下代码，但我想对按钮进行分组。
我想设计按钮，以便可以创建三组，每组 4 个按钮。

```
 import java.awt.GridLayout;

   import javax.swing.JButton;
   import javax.swing.JFrame;

   public class GridLayoutTest {

   public static void main(String[] args) {
   JFrame.setDefaultLookAndFeelDecorated(true);
   JFrame frame = new JFrame("GridLayout Test");
   frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
   frame.setLayout(new GridLayout(3, 2));
   frame.add(new JButton("Button 1"));
   frame.add(new JButton("Button 2"));
   frame.add(new JButton("Button 3"));
   frame.add(new JButton("Button 4"));
   frame.add(new JButton("Button 5"));
   frame.add(new JButton("Button 6"));
   frame.add(new JButton("Button 7"));
   frame.add(new JButton("Button 8"));
   frame.pack();
   frame.setVisible(true);
   }
  } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T05:14:08.183

所以，像...

![在此处输入图像描述](../Images/e38e718a880ade525a17cd36c28a533e.png)

```
public class BadLayout04 {

    public static void main(String[] args) {
        new BadLayout04();
    }

    public BadLayout04() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new ButtonsPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class ButtonsPane extends JPanel {

        public ButtonsPane() {

            JPanel group1 = createGroup(1);
            JPanel group2 = createGroup(5);
            JPanel group3 = createGroup(9);

            setLayout(new GridBagLayout());
            GridBagConstraints gbc = new GridBagConstraints();
            gbc.gridx = 0;
            gbc.gridy = 0;
            add(group1, gbc);
            gbc.gridx = 1;
            add(group2, gbc);
            gbc.gridx = 0;
            gbc.gridy++;
            gbc.gridwidth = GridBagConstraints.REMAINDER;
            add(group3, gbc);

        }

        public JPanel createGroup(int index) {

            JPanel group = new JPanel(new GridBagLayout());
            group.setBorder(new EmptyBorder(4, 4, 4, 4));
            GridBagConstraints gbc = new GridBagConstraints();
            gbc.fill = GridBagConstraints.BOTH;
            for (int loop = 0; loop < 4; loop++) {
                group.add(new JButton("Button " + (index++)), gbc);
            }

            return group;

        }

    }

} 
```

# php - 重新加载时更改内容

> ID：13466834
> 
> 赞同：-2
> 
> 时间：2012-11-20T04:58:51.043
> 
> 标签：php, javascript, jquery, html, css

> **可能重复：**
> [随机图像显示](https://stackoverflow.com/questions/10911452/random-images-display)

当我们重新加载页面时，是否有人看到随机更改的图像或其他内容？那是什么？你能告诉我该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T05:10:26.470

猜猜，这样的事情会奏效。

```
/* div for your future image */
<div id="img"></div>
<script>

    window.onload = function(){

        /* array of urls to your images and random integer number between 0 and array's length-1 */
        var imgurls = [url1,url2,url3,...,urlN],
            randn = Math.floor(Math.random()*imgurls.length);

        /* create an HTML tag <img src="urlN"> in your div */
        document.getElementById('img').innerHTML = '<img src=' + imgurls[randn] + '>';
    }

</script> 
```

# javascript - 添加一个 CSS 属性

> ID：13466835
> 
> 赞同：1
> 
> 时间：2012-11-20T04:58:51.807
> 
> 标签：javascript, jquery, css

我想添加到这样的 CSS 属性中

[CSS]

```
.someclass some
{ 
///
} 
```

[jQuery]

```
$('.someclass some').css('behavior','url(path/something/someclass.htc)'); 
```

这将返回一条错误消息`"TypeError:Object Expected"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T05:01:24.187

向您的 CSS 文件添加一个类，然后在您的 JavaScript 中切换它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T05:00:07.020

尝试这个：

```
 $('.someclass some').css({'behavior' : 'path/something/someclass.htc' }); 
```

只是复制你的行为属性代码 - 你知道它应该看起来像这样......

```
 $('.someclass some').css({'behavior' : 'url (path/something/someclass.htc)' }); 
```

如果您想实际更改 css 文件，此代码会将 css 属性添加到您的 DOM 中的选择器 - 您不能这样做，但您可以这样做

```
 $('.yourClass').addClass('behavior'); 
```

您放入 css 中的类`.behavior`- 这将具有额外的属性，并且您将此类动态添加到您想要拥有它的元素中

# json - Web 控制台说我的 JSON 无效

> ID：13466837
> 
> 赞同：0
> 
> 时间：2012-11-20T04:59:02.260
> 
> 标签：json

我正在使用 Raphael.js、JavaScript 和 JSON 进行数据可视化。数据存储在一个 JSON 文件中，Firefox 在第一行一直说该文件无效。我在两个验证器中检查了 JSON 文件，每次 Firefox 都说第一行不正确。JSON 由一个带有对象的数组和一个嵌套数组组成。以下是代码示例：

```
{ "XXXXXX" : [ { "abbrev" : "XXX",
    "XXX" : "XXXXXXX",
    "XXX" : [ { "XXX" : "XXXXX",
          "XXX" : "XXXXX",
          "XXX" : "XXXXXXX"
        },
        { "XXX" : "XXXX",
          "XXX" : "XXXXXXX%XXXXXXX",
          "XXXX" : "XXXXX"
        },
        { "XXX" : "XXXXX",
          "XXX" : "XXX%XXXXXXXX",
          "XXXX" : "XXXXXX"
        }
      ]
  }
] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T05:08:30.633

使用此代码：

```
var jsonId ={ "XXXXXX" : [ { "abbrev" : "XXX",
        "XXX" : "XXXXXXX",
        "XXX" : [ { "XXX" : "XXXXX",
              "XXX" : "XXXXX",
              "XXX" : "XXXXXXX"
            },
            { "XXX" : "XXXX",
              "XXX" : "XXXXXXX%XXXXXXX",
              "XXXX" : "XXXXX"
            },
            { "XXX" : "XXXXX",
              "XXX" : "XXX%XXXXXXXX",
              "XXXX" : "XXXXXX"
            }
          ]
      }
    ]} 
```

# android - 使用 ti.draggable 时隐藏的错误

> ID：13466841
> 
> 赞同：0
> 
> 时间：2012-11-20T04:59:34.950
> 
> 标签：android, mobile, titanium, drag

这是 Appcelerator Titanium Mobile 应用程序的简单代码，它几乎可以正常工作，但是...

```
var drag = require('ti.draggable');

var win = Ti.UI.createWindow({exitOnClose: true, backgroundColor: 'black', navBarHidden: true});

var view1 = Ti.UI.createView({
    left: 0,
    width: '50%',
    height: '100%',
    backgroundColor: '#9966cc'
});

win.add(view1);

var dragView = drag.createView({
    backgroundColor: '#99cc33',
    left: 50, top: 50,
    width: 50,
    height: 50,
    zIndex: 5    
});

dragView.addEventListener('start', function(e){
    var p = {x: e.source.left, y: e.source.top};
    var tp = e.source.parent.convertPointToView(p, win);
    e.source.parent.remove(e.source);
    e.source.left = tp.x;
    e.source.top = tp.y;
    win.add(e.source);
});

dragView.addEventListener('end', function(e){
    var p = {x: e.left, y: e.top};
    var tp = win.convertPointToView(p, view2); 

    if(tp.x < 0){
        tp = win.convertPointToView(p, view1);
        e.source.parent.remove(e.source);
        e.source.left = tp.x;
        e.source.top = tp.y;
        view1.add(e.source);    
    }else{
        e.source.parent.remove(e.source);
        e.source.left = tp.x;
        e.source.top = tp.y;
        view2.add(e.source);    
    }
});

view1.add(dragView);

var view2 = Ti.UI.createView({
    left: '50%',
    width: '50%',
    height: '100%',
    backgroundColor: '#cc6699'
});

win.add(view2);

win.open(); 
```

如果我的dragView从view1拖到view2，并且dragView.left = 100，dragView.top = 100，那么当我再次尝试拖动它时，它会在win时跳转到相同的坐标。这是为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T23:01:26.407

经过大量研究，我发现这不是一个错误。原因是在“结束”事件中，您更改了视图的坐标和父级。这很好，因为视图停止移动。问题在于“开始”。您从父级删除视图并将其重新附加到其他地方，这工作正常。什么不起作用，是坐标的重置，因为在源代码内部，它们不断被更改，并且事后在 JS 中所做的更改根本不会影响它，直到手指抬起屏幕

我构建这个模块的原因是为了让 Titanium 中的可拖动视图平滑，但它可以很容易地在 JS 中实现。

您应该考虑以下两种选择之一；全部在 JS 中构建，或使用 maxLeft、minLeft、minTop、maxTop 属性来阻止视图移动到另一个“外部”，但将视图附加到窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T07:39:45.270

非常感谢您的回答。我设法在不使用您的模块的情况下做到了。这是源代码：

```
var win = Ti.UI.createWindow({
    exitOnClose: true,
    backgroundColor: 'black',
    navBarHidden: true  
});

var view1 = Ti.UI.createView({
    left: 0,
    width: '50%',
    height: '100%',
    backgroundColor: '#9966cc'
});

win.add(view1);

var dragView = Ti.UI.createView({
    backgroundColor: '#99cc33',
    left: 50, top: 50,
    width: 50,
    height: 50,
    zIndex: 5,
    startDragx: 0,
    startSragy: 0,
    dragCoef: 0    
});

dragView.addEventListener('touchstart', function(e){
    var p = {x: e.source.left, y: e.source.top};
    var tp = e.source.parent.convertPointToView(p, win);

    e.source.dragCoef = 0;

    e.source.parent.remove(e.source);
    e.source.left = tp.x;
    e.source.top = tp.y;
    win.add(e.source);

    e.source.startDragx = e.x;
    e.source.startDragy = e.y;
});

dragView.addEventListener('touchmove', function(e){
    if ((++e.source.dragCoef % 2) == 0){
        e.source.left += e.x - e.source.startDragx;
        e.source.top += e.y - e.source.startDragy;
        e.source.startDragx = e.x;
        e.source.startDragy = e.y;
        e.source.dragCoef = 0;
    }
});

dragView.addEventListener('touchend', function(e){
    var p = {x: e.source.left, y: e.source.top};
    var tp = win.convertPointToView(p, view2); 

    if(tp.x < 0){
        tp = win.convertPointToView(p, view1);
        e.source.parent.remove(e.source);
        e.source.left = tp.x;
        e.source.top = tp.y;
        view1.add(e.source);    
    }else{
        e.source.parent.remove(e.source);
        e.source.left = tp.x;
        e.source.top = tp.y;
        view2.add(e.source);    
    }
});

var view2 = Ti.UI.createView({
    left: '50%',
    width: '50%',
    height: '100%',
    backgroundColor: '#cc6699'
});

view2.add(dragView);

win.add(view2);

win.open(); 
```

但不会发生“touchend”事件。我试图添加事件侦听器来取胜，而不是 dragView，但这是同一个故事，'touchend' 事件从未触发。问题出在哪里？我只在安卓模拟器上启动它。

# c# - XNA 仅使用 1 个内核执行 4 个 ThreadPool 任务？

> ID：13466842
> 
> 赞同：1
> 
> 时间：2012-11-20T04:59:36.913
> 
> 标签：c#, multithreading, concurrency, xna, threadpool

我正在创建一个物理模拟，这意味着它是真实的，我让它正常工作，但帧率下降得很快。

我正在遍历每个对象，然后再遍历每个对象。

我不确定为什么会这样，因为每帧中的操作数保持不变。我唯一能想到的是线程是问题所在。我将迭代分为四个部分，并且我有四分之一的列表是在 4 个单独的线程上计算的，但是当我检查任务管理器时，我实际上只使用了一个内核。

以下是相关代码：

```
private void Update(GameTime gameTime)
{
    for (int i = 0; i < Bodies.Count; i++)
    {
        Bodies[i].Update(gameTime);
    }

    ThreadPool.QueueUserWorkItem(new WaitCallback(CalculatePhysics0));
    ThreadPool.QueueUserWorkItem(new WaitCallback(CalculatePhysics1));
    ThreadPool.QueueUserWorkItem(new WaitCallback(CalculatePhysics2));
    ThreadPool.QueueUserWorkItem(new WaitCallback(CalculatePhysics3));
}

private void CalculatePhysics0(object o)
{
    for (int i = 0; i < Bodies.Count/4; i++)
    {
        Body body = Bodies[i];
        g.ApplyTo(ref body, Bodies);
    }
}

// 3 other methods exactly the same, but iterating their portion of the list 
```

我对多线程不是很有经验。不过，我*可以*处理因使用它而产生的问题。我可以看到问题可能是这`ThreadPool`不是实现我想要的效果的好方法，即在线程之间同时遍历列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T05:09:06.477

您可以使用[Task Parallel Library](http://msdn.microsoft.com/en-us/library/dd537609.aspx)，这有助于使大部分工作变得更容易。这应该在 XNA 4.0+ 中可用

```
Task.Factory.StartNew(()=>CalculatePhysics0); 
```

我相信默认行为应该有效，但您可以指定[TaskCreationOption](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskcreationoptions.aspx)

如果这不起作用，那么您可以使用[TaskScheduler](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskscheduler.aspx)：

```
var scheduler = new TaskScheduler{MaximumConcurrencyLevel=4};
Task.Factory.StartNew(()=>CalculatePhysics0, null, TaskCreationOptions.None, scheduler); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T07:01:46.753

关于您在另一个答案上留下的评论：更多线程！=性能提升。您可能会惊讶有多少事情实际上在串行而不是并行中表现得更好。当然，这并不意味着您的代码不能从不同内核上的多个线程中受益，只是您不应该假设添加更多线程会神奇地导致您的处理吞吐量增加。

很难说什么可以帮助您的代码更好地执行，而无法查看更多内容。首先，了解一点 .NET 中的线程模型会很有帮助。我建议你阅读它，因为我不能在这里详细介绍。.NET 中的线程不一定是本机线程。也就是说，当您将第三个物理方法排入队列时，第一个物理方法`ThreadPool`可能已经完成，因此它只会使用已经创建的线程。当然，有时您会在另一个任务完成之前将一个任务排队，并且必须创建一个额外的（昂贵的）本机线程。在这种情况下，更少的线程可能会更好。

当您查看任务并行库时，抽象的想法会更进一步，其中每个任务可能看起来像一个线程，但实际上离它更远。许多任务最终可以在同一个线程上运行。你可以通过暗示`TaskFactory`这是一个长时间运行的任务来解决这个问题，即`Task.Factory.StartNew(() => DoWork(), TaskCreationOptions.LongRunning)`，这会导致调度程序在一个新线程上启动这个任务（同样，这可能并不比让运行时为你安排它更好）。

话虽如此，如果你的工作需要足够的时间来处理，*如果*你用`ThreadPool`. 但是，如果工作进行得足够快，则似乎只使用了一个线程或一个内核。

*   是什么让你得出你只使用一个核心的结论？
*   它只是您从任务管理器中看到的吗？这几乎不是一个决定性的结果。
*   您是否尝试在线程的任务管理器详细信息选项卡中添加一列，并实际检查您的代码是否产生了额外的线程？
*   我还看到您正在迭代数组`Bodies`两次，是否有任何特殊原因您不能同时更新主体`GameTime`（可能是 XNA 中的一些限制）？

不过，以上所有这些都只是在黑暗中拍摄。如果你*真的*，我的意思是**真的**想知道任何性能问题出在哪里，你会用一个像样的分析器来分析你的代码，比如[RedGate 的 Ants](http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/)，[JetBrains 的 dotTrace](http://www.jetbrains.com/profiler/)，或者如果你有 Visual Studio 的高级版或更高版本，分析仪内置在您的 IDE 中。

我不确定您的问题是否在您认为的位置，根据我的经验，它很少出现。我希望我上面的一些脑筋急转弯可以对你有所帮助。

# android - 说没有使用导入。现在声音不起作用

> ID：13466844
> 
> 赞同：1
> 
> 时间：2012-11-20T04:59:57.020
> 
> 标签：android

Android Dev 和本网站的新手。我创建了一个应用程序并且基础工作正常。我添加了一个声音按钮，它起作用了。我为早期版本的 android 创建了一个新应用程序，并且不小心将我的 Main Activity 文件拖到了新应用程序中，而不是复制它。当我把它拖回来时，它说我的进口没有使用。现在，我必须为其执行“导入”声明的声音不起作用。这是代码。

```
package com.offthericta.wiferemote;

import android.media.MediaPlayer;
import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.Toast;
import com.offthericta.wiferemote.R;
import com.offthericta.wiferemote.R.id;
import com.offthericta.wiferemote.R.layout;
import com.offthericta.wiferemote.R.menu;
import com.offthericta.wiferemote.R.raw;

public class MainActivity extends Activity {

    private static final String TAG = "MyActivity";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Log.v(TAG, "Initializing sounds...");
        final MediaPlayer mp = MediaPlayer.create(this, R.raw.blah);

        Button Button03 = (Button)this.findViewById(R.id.Button03);
        Button03.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                Log.v(TAG, "Playing sound...");
                mp.start();
            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public void onClick(View v){}

    public void disclaimerBTN (View v){
        Toast.makeText(this, "FAILED:   The remote object is not responding to this     command",Toast.LENGTH_LONG).show();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T05:03:48.770

我认为你主要关心的是这些陈述..

```
import com.offthericta.wiferemote.R;
import com.offthericta.wiferemote.R.id;
import com.offthericta.wiferemote.R.layout;
import com.offthericta.wiferemote.R.menu;
import com.offthericta.wiferemote.R.raw; 
```

**您正在访问当前应用程序包中的其他应用程序包的资源。**

只需使用您当前应用程序的资源文件。

删除上面的导入语句，在您当前项目的资源目录中添加必要的资源。并再次编译并运行..

# asp.net - 如何在按钮单击事件上访问页脚文本框的值（按钮在 Gridview 之外）

> ID：13466845
> 
> 赞同：0
> 
> 时间：2012-11-20T04:59:56.927
> 
> 标签：asp.net

如何在按钮单击事件上访问页脚文本框的值（按钮在 Gridview 之外）......页脚文本框在动态 GridView 中动态生成......页脚文本框可能非常依赖于表中的列![在此处输入图像描述](../Images/d9c4884ca87a809eb529050344c8ec5d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T06:11:57.223

如果你给你的文本框提供了 id，你可以在你的 button_click 处理程序中使用下面的代码来访问它们。

```
TextBox txt = (TextBox) this.GridView1.FooterRow.FindControl("textbox1"); 
```

# php - 使用 JQuery 更改 Div 类背景颜色的问题

> ID：13466850
> 
> 赞同：0
> 
> 时间：2012-11-20T05:00:15.440
> 
> 标签：php, jquery, html

我正在尝试使用 php for 循环来生成大量 div，这些 div 可以通过 JQuery 对其 css 的更改进行更改。我现在要解决的谜题是生成一个棋盘格，一系列黑色和白色的方形 div，单击它们会交换颜色。我无法思考 onClick 事件是如何看待这种情况的。

这是我卡住的地方

```
<!DOCTYPE html>
<html>
<head>
<style>
  .yes { background: black; 
        height: 50px;
        width: 50px;
        float: left;
        }
  .no { background: white; 
        height: 50px;
        width: 50px;
        float: left;
        }  

  </style>
  <script src="http://code.jquery.com/jquery-latest.js"></script>

</head>
<body>
    <?php 
        $j = 0;
    for($i = 0; $i < 100; $i++){
        if ($j == 0){
                echo "<div class = 'yes'>yes</div>";
                $j++;
            }
            if ($j == 1){
                echo "<div class = 'no'>no</div>";
                $j--;
            }
    }
  ?>

<script>
  var bw = 0;
  $(".no, .yes").one( "click", function () {
    if (bw == 0){
        $(".no" ).css( "background-color","black" );
        $( ".yes" ).css( "background-color","white" );
        bw++;
    }
        else {
        $(".no" ).css( "background-color","white" );
        $( ".yes" ).css( "background-color","black" );
        bw--;
        }

   });
    </script>

  </body>
  </html> 
```

一些奇怪的转变正在发生，点击一些 div 会触发颜色变化，而其他则不会。如果你们有任何有趣的想法，请分享。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T05:09:16.273

尝试

```
 <script type="text/javascript">

       $(document).ready(function(){

          var bw = 0;
          $(".no, .yes").click(function () {
            if (bw == 0){
                $(".no" ).css( "background-color","black" );
                $( ".yes" ).css( "background-color","white" );
                bw++;
            }
                else {
                $(".no" ).css( "background-color","white" );
                $( ".yes" ).css( "background-color","black" );
                bw--;
                }

            }); 
         });

  </script> 
```

当你使用`one()`

**将处理程序附加到元素的事件。每个元素最多执行一次处理程序**

[http://api.jquery.com/one/](http://api.jquery.com/one/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T05:21:24.603

```
$(document).ready(function(){   
$('div').click(function()
{ 
    $('div').each(function()
        {
                if($(this).hasClass('yes'))
                   $(this).addClass('no').removeClass('yes'); 
                else
                   $(this).addClass('yes').removeClass('no');   
         });
    });
}); 
```

**也检查一下**

# php - Fangate 不再工作了，是 facebook 更改 SDK 吗？

> ID：13466852
> 
> 赞同：0
> 
> 时间：2012-11-20T05:00:20.730
> 
> 标签：php, facebook, sdk

我有很多 facebook 应用程序在工作，但 3-4 天前不再工作了，它们是一个简单的 fangate，这里是代码 od one：

`require_once "SDK/facebook.php";` `define('FB_APP_ID', 'xxxxxxxxxxxxxxxx');` `define('FB_SECRET_KEY', 'xxxxxxxxxxxxxxxxxxxxxxxxxxx');`

`$facebook = new Facebook(array(` `'appId' => FB_APP_ID,` `'secret' => FB_SECRET_KEY` `));`

如果您知道 facebook 是否进行了一些更改，您能帮我修复它吗？

区域有新的方法来做到这一点？

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:32:43.600

```
include_once "facebook.php";

$facebook = new Facebook(array(
    'appId' => $this->config['appid'], 
    'secret' => $this->config['secret'],
    'cookie' => true
));

$data = $facebook->getSignedRequest();

$liked = $data['page']['liked'];

if ($liked == "1") {
   return true;
} else {
   return false;
} 
```

这对我有用...

如果不起作用，你能告诉我是什么给了 var_dump($data); ?

# android - 代理服务器后面的Android Soap Web服务错误

> ID：13466859
> 
> 赞同：0
> 
> 时间：2012-11-20T05:01:28.427
> 
> 标签：android, web-services, android-ksoap2

我编写了一个与 Web 服务通信并获取响应值的程序。但是当我调试程序时，我以 requestDump=null 结束 有人`androidHttpTransport.call(SOAP_ACTION, envelope);`能告诉我错误的原因吗？我该怎么办？

```
public class WebService extends Activity {
       private final String NAMESPACE = "http://tempuri.org/";
       private final String URL = "http://www.w3schools.com/webservices/tempconvert.asmx";
       private final String SOAP_ACTION = "http://tempuri.org/CelsiusToFahrenheit";
       private final String METHOD_NAME = "CelsiusToFahrenheit";
    String celsius;
    Button b;
    TextView tv;
    EditText et;
    String res,resultval;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_web_service);
        et=(EditText)findViewById(R.id.editText1);

        tv=(TextView)findViewById(R.id.Result);
        b=(Button)findViewById(R.id.button1);
        b.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
            //String result=getFarenheit(et.getText().toString());
            //tv.setText(result+"°F");
            new service().execute();
            }
        });
    }
    private class service extends AsyncTask<Void, Void, String>{

        @Override
        protected String doInBackground(Void... arg0) {
             celsius=et.getText().toString();
            SoapObject request= new SoapObject(NAMESPACE, METHOD_NAME);
            PropertyInfo celsuiusPI= new PropertyInfo();
            celsuiusPI.setName("Celsius");
            celsuiusPI.setValue(celsius);
            celsuiusPI.setType(String.class);
            request.addProperty("XMLMarks",celsuiusPI);
            SoapSerializationEnvelope envelope=new SoapSerializationEnvelope (SoapEnvelope.VER11);
            envelope.dotNet=true;
            envelope.implicitTypes = true;
            envelope.enc = SoapSerializationEnvelope.ENC2003;
            envelope.xsd = SoapEnvelope.XSD;
            envelope.xsi = SoapEnvelope.XSI;
            envelope.setOutputSoapObject(request);
            envelope.setAddAdornments(false);
            SoapPrimitive response; 

            HttpTransportSE androidHttpTransport=new HttpTransportSE(URL);
            try{
                androidHttpTransport.setXmlVersionTag("<?xml version=\"1.0\" encoding=\"utf-8\"?>");
                androidHttpTransport.debug = true;
                androidHttpTransport.call(SOAP_ACTION, envelope);
                String dump= androidHttpTransport.requestDump.toString();
                response=(SoapPrimitive)envelope.getResponse();
                Toast.makeText(WebService.this, response.toString(), 20).show();
                Log.i("WebService output", response.toString());
                System.out.println("WebService Response"+response.toString());
                Object res= response.toString();
                resultval=(String) res;
            }
            catch(Exception e){
                e.printStackTrace();
            }

            return res;

        }
         protected void onPostExecute(String h){
             String result=h;

                tv.setText(result+"°F");

    }

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T05:55:36.677

只需将您的服务 AsyncTask 替换为这个新服务并查看结果：

代码：

```
private class service extends AsyncTask<Void, Void, String> {

    @Override
    protected String doInBackground(Void... arg0) {
        System.out.println("In DoIn Background");

        // Initialize soap request + add parameters
        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

        // Use this to add parameters
        request.addProperty("Celsius", txtCel.getText().toString());

        // Declare the version of the SOAP request
        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                SoapEnvelope.VER11);

        envelope.setOutputSoapObject(request);
        envelope.dotNet = true;

        try {
            HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

            // this is the actual part that will call the webservice
            androidHttpTransport.call(SOAP_ACTION, envelope);

            // Get the SoapResult from the envelope body.
            SoapObject result = (SoapObject) envelope.bodyIn;

            if (result != null) {
                // Get the first property and change the label text
                // txtFar.setText(result.getProperty(0).toString());
                res = result.getProperty(0).toString();
            } else {
                Toast.makeText(getApplicationContext(), "No Response",
                        Toast.LENGTH_LONG).show();
            }
        } catch (Exception e) {
            e.printStackTrace();
        }

        return res;

    }

    protected void onPostExecute(String h) {
        String result = h;

        tv.setText(result + "°F");

    }

} 
```

# javascript - 如何使用 iframe 连接到其他页面？

> ID：13466864
> 
> 赞同：0
> 
> 时间：2012-11-20T05:02:09.267
> 
> 标签：javascript, html, bugzilla

是否可以从我们自己的 openlayers 地图中提供指向 buzilla 登录页面的链接？像使用 iframe 按钮一样可以链接吗？

```
var html = "<div class=iframelink ><iframe id=bugfile style='display:none' src='https://bugzilla.mozilla.org/enter_bug.cgi'></iframe></div>";
$(html).appendTo(body); 
```

这段代码正确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T08:05:13.457

不，这是不可能的。如果您查看该页面的响应标头，您会看到这样的标头：`X-frame-options:SAMEORIGIN`这意味着它不能在位于另一个网站的 iframe 中使用。

细节：

[https://developer.mozilla.org/en-US/docs/The_X-FRAME-OPTIONS_response_header](https://developer.mozilla.org/en-US/docs/The_X-FRAME-OPTIONS_response_header)

# scons - scons：多个文件作为目标

> ID：13466872
> 
> 赞同：4
> 
> 时间：2012-11-20T05:02:47.033
> 
> 标签：scons

我有一个脚本，比如说“foo.py”，它依赖于某个文件，比如说“dep.par”，我将它们称为

```
python foo.py --parameters=dep.par 
```

如果 foo.py 只写入一个输出文件“bar.dat”，我会说：

```
env=Environment()
env.Command("bar.dat", "dep.par", "python foo.py --parameters=dep.par") 
```

但是，我需要 foo.py 输出多个文件的情况，比如说“bar1.dat, bar2.dat, ..., barN.dat”。

我很茫然，任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T06:15:34.233

目标（和/或源）可以是目标列表，如下所示：

```
env=Environment()
env.Command(["bar1.dat", "bar2.dat"], "dep.par", "python foo.py --parameters=dep.par") 
```

# limit - Opencart如何在一列中仅显示5个子类别

> ID：13466873
> 
> 赞同：0
> 
> 时间：2012-11-20T05:03:00.270
> 
> 标签：limit, categories, opencart

我是opencart的新手。我正在使用类别模块在左侧边栏中显示类别。我正在尝试添加与[ebay.in](http://ebay.in)左侧类别相同的子类别限制（例如一列中的 5 个）。

我的`.../module/category.php`文件是

```
<?php class ControllerModuleCategory extends Controller {
protected function index($setting) {
    $this->language->load('module/category');

    $this->data['heading_title'] = $this->language->get('heading_title');

    if (isset($this->request->get['path'])) {
        $parts = explode('_', (string)$this->request->get['path']);
    } else {
        $parts = array();
    }

    if (isset($parts[0])) {
        $this->data['category_id'] = $parts[0];
    } else {
        $this->data['category_id'] = 0;
    }

    if (isset($parts[1])) {
        $this->data['child_id'] = $parts[1];
    } else {
        $this->data['child_id'] = 0;
    }

     if (isset($parts[2])) {
     $this->data['sisters_id'] = $parts[2];
  } else {
     $this->data['sisters_id'] = 0;
  }

    $this->load->model('catalog/category');

    $this->load->model('catalog/product');

    $this->data['categories'] = array();

    $categories = $this->model_catalog_category->getCategories(0);

    foreach ($categories as $category) {

     $children_data = array();

     $children = $this->model_catalog_category->getCategories($category['category_id']);

     foreach ($children as $child) {            
        $sister_data = array();
        $sisters = $this->model_catalog_category->getCategories($child['category_id']);
        if(count($sisters) > 1) {
           foreach ($sisters as $sisterMember) {
              $sister_data[] = array(
                 'category_id' =>$sisterMember['category_id'],
                 'name'        => $sisterMember['name'],
                 'href'        => $this->url->link('product/category', 'path=' . $category['category_id'] . '_' . $child['category_id']. '_' . $sisterMember['category_id'])   
              );                     

           }
           $children_data[] = array(
                 'category_id' => $child['category_id'],
                 'sister_id'   => $sister_data,
                 'name'        => $child['name'],
                 'href'        => $this->url->link('product/category', 'path=' . $category['category_id'] . '_' . $child['category_id'])   
              );   
        }else{                     
           $children_data[] = array(
              'category_id' => $child['category_id'],
              'sister_id'    =>'',
              'name'        => $child['name'],
              'href'        => $this->url->link('product/category', 'path=' . $category['category_id'] . '_' . $child['category_id'])   
           );   
        }
     }         
     $data = array(
        'filter_category_id'  => $category['category_id'],
        'filter_sub_category' => true   
     );      

     $product_total = $this->model_catalog_product->getTotalProducts($data);
     $this->load->model('tool/image'); 
     $this->data['categories'][] = array(
        'category_id' => $category['category_id'],
        'name'        => $category['name'],
        'children'    => $children_data,
        'sister'    => $sister_data,
        'category_image' => $this->model_tool_image->resize($category['image'], 20, 20),
        'href'        => $this->url->link('product/category', 'path=' . $category['category_id'])
     );
  }

    if (file_exists(DIR_TEMPLATE . $this->config->get('config_template') . '/template/module/category.tpl')) {
        $this->template = $this->config->get('config_template') . '/template/module/category.tpl';
    } else {
        $this->template = 'default/template/module/category.tpl';
    }

    $this->render();
}}?> 
```

我的`...module/category.tpl`文件是

```
<div id="menu_box">
  <div class="box-heading"><?php echo $heading_title; ?></div>
      <ul>
        <?php foreach ($categories as $category) { ?>
        <li>
          <?php if ($category['category_id'] == $category_id) { ?>
          <a href="<?php echo $category['href']; ?>" class="active"><?php echo $category['name']; ?></a>          
          <?php } else { ?>
          <a href="<?php echo $category['href']; ?>"><?php echo $category['name']; ?></a>
          <span style="float:right; font-weight:bold;">»</span>
          <a class="menuimg" ><img src="<?php echo $category['category_image']; ?> " /></a>
          <?php } ?>
          <?php if ($category['children']) { ?>
          <ul class="second-level" style="position: absolute;left: 166px;top:-2px;padding: 5px;margin: 0px;width:350px; background-color: whitesmoke; border:1px solid#ececec; z-index:10;">
            <?php foreach ($category['children'] as $child) { ?>
            <li id="second-li">
              <?php if ($child['category_id'] == $child_id) { ?>
              <a style="border-bottom:1px solid #5d5d5d;" href="<?php echo $child['href']; ?>" class="active"> <?php echo $child['name']; ?></a>
              <?php } else { ?>
              <a style="border-bottom:1px solid #5d5d5d;" href="<?php echo $child['href']; ?>"> <?php echo $child['name']; ?></a>
              <?php } ?>              
                <?php if($child['sister_id']){ ?>
                     <ul>
                    <?php foreach($child['sister_id'] as $sisters) { ?>
                        <li>
         <?php if ($sisters['category_id'] == $sisters_id) { ?>   

<a href="<?php echo $sisters['href']; ?>" class="active"><?php echo $sisters['name']; ?></a>
<?php } else { ?>
<a href="<?php echo $sisters['href']; ?>"><?php echo $sisters['name']; ?></a>
<?php } ?>
</li>
                    <?php } ?>
                     </ul>
                 <?php } ?>
            </li>
            <?php } ?>
          </ul>
          <?php } ?>
        </li>

        <?php } ?>
      </ul>
    </div> 
```

非常感谢任何建议这样做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T05:16:19.953

**对于主要类别**

**丑陋/快速修复**

您可以添加此行

```
$categories = array_slice($categories, 0, 5); 
```

略低于

```
$categories = $this->model_catalog_category->getCategories(0); 
```

在`catalog/controller/module/category.php`

**更好的解决方案**

在`catalog/model/catalog/category.php`复制该函数`getCategories($parent_id = 0)`并向其添加第二个参数`limit`。在查询中使用这个参数来限制返回的结果

**限制子类别/子类别中的结果**

**丑陋的修复**

添加这一行

```
$children = array_slice($children, 0, 5); 
```

略低于

```
$children = $this->model_catalog_category->getCategories($category['category_id']); 
```

在`catalog/controller/module/category.php`

**更好的解决方案**

复制 中的函数`getCategoriesByParentId($category_id)`，为其`catalog/model/catalog/category.php`添加第二个参数`limit`，在 SQL 查询中使用此参数。

希望有帮助！

# c - 存储预处理器常量值，然后通过 undef/define '覆盖'

> ID：13466876
> 
> 赞同：1
> 
> 时间：2012-11-20T05:03:16.310
> 
> 标签：c, c-preprocessor

我正在尝试存储预处理器常量的值，然后“覆盖”它。

**我的问题：**下面的代码尝试将预处理器常量的值存储在变量“A”中，然后代码取消定义该变量，然后重新定义它，使其具有新值。问题是变量“A”具有新定义的值而不是旧值，如果这有意义的话。我可以存储预处理器常量值而不是它的引用（这似乎正在发生）？

```
#ifdef CUSTOM_EVENT_CALLBACK_DEFINED
  #define SUB_CUSTOM_EVENT_CALLBACK_DEFINED CUSTOM_EVENT_CALLBACK_DEFINED
  #undef CUSTOM_EVENT_CALLBACK_DEFINED
#endif
#define CUSTOM_EVENT_CALLBACK_DEFINED "def"

int main()
{
    printf(CUSTOM_EVENT_CALLBACK_DEFINED);     // prints out "def". 
    printf("\n");
    printf(SUB_CUSTOM_EVENT_CALLBACK_DEFINED); // prints out "def". I was hoping this would be "abc"
    printf("\n");

    system("PAUSE");
    return 0;
}

// Usage: where the function def is a callback function for a window in a civil engineering program that runs ontop of windows
int def(int id, int cmd, int type)
{
    #ifdef SUB_CUSTOM_EVENT_CALLBACK_DEFINED
      SUB_CUSTOM_EVENT_CALLBACK_DEFINED(id, cmd, type);
    #endif

    // perform my custom code here
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T05:05:57.873

简短的回答 - 不，这是不可能的。宏不能那样工作。

但我怀疑你真的需要这样做。例如，一种解决方法是在覆盖之前将值存储在变量中：

```
#ifdef CUSTOM_EVENT_CALLBACK_DEFINED
  std::string SUB_CUSTOM_EVENT_CALLBACK_DEFINED = CUSTOM_EVENT_CALLBACK_DEFINED;
  #undef CUSTOM_EVENT_CALLBACK_DEFINED
#else
  std::string SUB_CUSTOM_EVENT_CALLBACK_DEFINED = "";
#endif

#define CUSTOM_EVENT_CALLBACK_DEFINED "def"

int main()
{
    printf(CUSTOM_EVENT_CALLBACK_DEFINED);     // prints out "def". 
    printf("\n");
    printf(SUB_CUSTOM_EVENT_CALLBACK_DEFINED); // prints out "def". I was hoping this would be "abc"
    printf("\n");

    system("PAUSE");
    return 0;
} 
```

或者根本不为此目的使用宏。

# git - origin/, remotes/origin/ Git 混淆

> ID：13466877
> 
> 赞同：5
> 
> 时间：2012-11-20T05:03:19.453
> 
> 标签：git, repository, branch

我刚刚克隆了一个 repo 并在 Git 中启动了一个新分支。我已经这样做了很多次，没有遇到任何问题。今晚当我尝试使用`git branch --set-upstream develop origin/develop`设置上游位置时，我收到了这个错误：

```
fatal: Ambiguous object name: 'origin/develop'. 
```

四处阅读表明，这是由于在原点和远程/原点中都存在相同的分支名称。我不明白这两者之间的区别，以及为什么它们会以这种方式发生冲突。我输入`git branch -a`了 ，这是输出：

```
* develop
  master
  origin/develop
  remotes/origin/HEAD -> origin/master
  remotes/origin/develop
  remotes/origin/master 
```

我对 和 之间的区别`origin/develop`以及`remotes/origin/develop`为什么会导致`fatal: Ambiguous object name: 'origin/develop'.`错误感到困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T05:27:46.880

我认为，也许是错误地，您有一个名为`origin/master`. 尝试运行`git branch`。如果那里`origin/master`列出了一个分支，就是这样。

看看你是否应该删除那个分支。如果您不能或不想这样做，请`git branch --set-upstream develop remotes/origin/develop`改为运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T07:28:12.117

我确认 `origin/develop`是*本地*分支的名称，而不是对*远程*分支的引用（例如`remotes/origin/develop`）

并且分支可以在其名称中包含“/”：它们被称为“分层分支名称”（请参阅​​“[在 Git 分支名称中使用斜杠字符](https://stackoverflow.com/a/2527436/6309)”）。
如[该线程](http://git.661346.n2.nabble.com/Branch-names-with-slashes-td7092954.html)中所述，这会阻止您选择“开发”作为分支名称。你需要重命名它

```
 git branch -m origin/develop develop
 git branch --set-upstream develop origin/develop 
```

# adfs - ADFS 2.0 供用户通过 Intranet 和 inetrnet 访问

> ID：13466880
> 
> 赞同：1
> 
> 时间：2012-11-20T05:03:38.970
> 
> 标签：adfs

我正在开发一个 ASP.NET Web 应用程序，应该可供可以从 Intranet 和 Internet 访问的用户访问。您能否建议使用 ADFS 2.0 实现此功能的方法。要求是当用户在 Intranet 中登录时，应用程序的身份验证应该是无缝的，无需提供用户 ID 和密码。而对于相同的用户，如果他们访问外部 Intranet，则应将电子邮件 ID 和密码作为信用并进行身份验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T19:08:47.057

您可以为默认使用表单的外部用户在 ADFS 前面放置一个 ADFS 代理。

内部用户将获得 Windows 身份验证。

ADFS 开箱即用仅允许使用用户名进行身份验证。

您必须进行一些自定义开发 - 请参阅[调整 ADFS 中的 Home Realm Discovery 页面以支持电子邮件地址](http://www.syfuhs.net/post/2011/07/12/Adjusting-the-Home-Realm-Discovery-page-in-ADFS-to-support-Email-Addresses.aspx)。

# python - 使用 Tkinter 和 python 顺序运行外部独立进程

> ID：13466881
> 
> 赞同：1
> 
> 时间：2012-11-20T05:03:40.267
> 
> 标签：python, tkinter, subprocess

**背景：**
*我正在使用 Tkinter（便携式 PYscripter，python v2.7.3）创建批量模拟作业选择器 + 调度器
*此程序将用作商业求解器程序的前端
*该程序需要允许用户选择一堆文件，一个接一个地依次模拟。
*它还需要能够从现有/正在运行的作业列表中修改（添加/删除）作业。
*每次模拟肯定会运行几个小时。
*模拟的输出将在单独的程序上查看，我不需要任何管道连接到输出。需要时，将从 GUI 调用外部查看器。

***我有一个主 GUI 窗口，它允许用户：
选择作业文件、提交作业、查看提交日志、停止运行作业（一个接一个）
上面的效果很好。

**问题：**
*如果我使用 subprocess.Popen("command") ：所有模拟输入文件同时启动。它必须是连续的（由于许可证和内存限制）

*如果我使用 subprocess.call(" ") 或 wait() 方法，那么 GUI 挂起并且没有范围来停止/添加/修改作业列表。即使“作业提交”命令位于独立窗口上，两个父窗口也会挂起，直到作业完成。

**问题 1：**
*如何按顺序启动模拟作业（如 subprocess.call）并允许主 GUI 窗口运行以修改作业列表或停止作业？
这些作业在一个列表中，使用“askopenfilenames”获取，然后使用 For 循环运行。

守则的相关部分：

```
cfx5solvepath=r"c:\XXXX"
def file_chooser_default(): 
    global flist1
    flist1=askopenfilename(parent = root2, filetypes =[('.def', '*.def'),('All', '*.*'),('.res', '*.res')], title ="Select Simulation run files...", multiple = True)[1:-1].split('} {')

def ext_process():
    o=list(flist1)
    p=list(flist1)
    q=list(flist1)
    i=0
    while i < len(flist1):
        p[i]='"%s" -def "%s"'%(cfx5solvepath,flist1[i])
        i+=1
    i=0
    while i < len(p):
        q[i]=subprocess.call(p[i])
        i+=1

root2 = Tk()
root2.minsize(300,300)
root2.geometry("500x300")
root2.title("NEW WINDOW")
frame21=Frame(root2, borderwidth=3, relief="solid").pack()
w21= Button(root2,fg="blue", text="Choose files to submit",command=file_chooser_default).pack()
w2a1=Button(root2,fg="white", text= 'Display chosen file names and order', command=lambda:print_var(flist1)).pack()
w2b1= Button (root2,fg="white", bg="red", text="S U B M I T", command=ext_process).pack()
root2.mainloop() 
```

如果您需要其他任何东西，请告诉我。期待您的帮助。

******编辑 ******
在合并@Tim 建议的更改时，GUI 是免费的。由于有一个与主求解器程序关联的特定子程序来停止作业，因此我可以使用正确的命令停止作业。

一旦当前正在运行的作业停止，列表中的下一个作业就会自动启动，正如我所希望的那样。

这是用于停止作业的代码：

```
def  stop_select(): #Choose the currently running files which are to be stopped
    global flist3
    flist3=askdirectory().split('} {')

def sim_stop(): #STOP the chosen simulation
    st=list(flist3)
    os.chdir("%s"%flist3[0])
    st= subprocess.call('"%s" -directory "%s"'%(defcfx5stoppath,flist3[0]))
    ret1=tkMessageBox.showinfo("INFO","Chosen simulation stopped successfully")
    os.chdir("%s" %currentwd) 
```

**问题 2：** *一旦完成上述作业，使用 start_new_thread，GUI 没有响应。GUI 在作业在后台运行时工作。但是[start_new_thread](http://docs.python.org/2/library/thread.html#thread.start_new_thread)文档说线程应该在函数返回时静默退出。

*此外，我有一个 HTML 日志文件，在每个作业完成时都会写入/更新。当我使用 start_new_thread 时，日志文件内容只有在所有作业完成后才可见。然而，内容以及时间戳是正确的。在不使用 start_new_thread 的情况下，我能够刷新 HTML 文件以获取更新的提交日志。

***在使用任务管理器多次退出GUI程序时，我突然无法使用start_new_thread函数！我也尝试过重新安装 PYscripter 并重新启动计算机。我无法从回溯中找出任何合理的东西，即：

```
Traceback (most recent call last):
File "<string>", line 532, in write
File "C:\Portable Python 2.7.3.1\App\lib\site-packages\rpyc\core\protocol.py", line 439, in _async_request
seq = self._send_request(handler, args)
File "C:\Portable Python 2.7.3.1\App\lib\site-packages\rpyc\core\protocol.py", line 229, in _send_request
self._send(consts.MSG_REQUEST, seq, (handler, self._box(args)))
File "C:\Portable Python 2.7.3.1\App\lib\site-packages\rpyc\core\protocol.py", line 244, in _box
if brine.dumpable(obj):
File "C:\Portable Python 2.7.3.1\App\lib\site-packages\rpyc\core\brine.py", line 369, in dumpable
return all(dumpable(item) for item in obj)
File "C:\Portable Python 2.7.3.1\App\lib\site-packages\rpyc\core\brine.py", line 369, in <genexpr>
return all(dumpable(item) for item in obj)
File "C:\Portable Python 2.7.3.1\App\lib\site-packages\rpyc\core\brine.py", line 369, in dumpable
return all(dumpable(item) for item in obj)
File "C:\Portable Python 2.7.3.1\App\lib\site-packages\rpyc\core\brine.py", line 369, in <genexpr>
return all(dumpable(item) for item in obj)
File "C:\Portable Python 2.7.3.1\App\Python_Working_folder\v350.py", line 138, in ext_process
q[i]=subprocess.call(p[i])
File "C:\Portable Python 2.7.3.1\App\lib\subprocess.py", line 493, in call
return Popen(*popenargs, **kwargs).wait()
File "C:\Portable Python 2.7.3.1\App\lib\subprocess.py", line 679, in __init__
errread, errwrite)
File "C:\Portable Python 2.7.3.1\App\lib\subprocess.py", line 896, in _execute_child
startupinfo)
WindowsError: [Error 2] The system cannot find the file specified 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T06:04:44.943

我建议使用单独的线程来启动作业。最简单的方法是使用模块中的[`start_new_thread`](http://docs.python.org/2/library/thread.html#thread.start_new_thread)方法`thread`。

将提交按钮的命令更改为`command=lambda:thread.start_new_thread(ext_process, ())`

您可能希望在单击按钮时禁用它，并在启动完成时启用它。这可以在里面完成`ext_process`。

如果您想允许用户取消作业，它会变得更加复杂。该解决方案无法处理。

# c# - 如何知道用户编辑 WPF DataGrid 单元格时为空？

> ID：13466889
> 
> 赞同：0
> 
> 时间：2012-11-20T05:03:52.243
> 
> 标签：c#, wpf, datagrid

我有一个`WPF` `DataGrid`. 用户可以编辑 中的数据`cell`。我想要一个`event`我想检查是否`cell`是的 in `empty`。用户可以使用`Del` `Backspace` `Cut`选项等清空数据。

给我一个`event`然后`event handler`去做。我已经尝试过了`OnCellEditEnding` `event`，但这只会在编辑完成后触发。我想在`cell`每次 user 时动态检查是否为空`inputs`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T05:31:37.877

每个 datagridcell 在编辑模式下都有一个文本框作为其内容。您可以在按键按下时检查该文本框中写入的文本长度（通过处​​理*onKeyDown*或*onPreviewKeyDown*事件）

编辑：

使用 PreparingCellForEdit 事件，像这样：

```
void MainDataGrid_PreparingCellForEdit(object sender, DataGridPreparingCellForEditEventArgs e)
{
   TextBox tb = e.Column.GetCellContent(e.Row) as TextBox;
   tb.TextChanged+=new TextChangedEventHandler(tb_TextChanged); 
}

void tb_TextChanged(object sender, TextChangedEventArgs e)
{
   //here, something changed the cell's text. you can do what is neccesary
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T06:01:27.960

使用[数据绑定](http://msdn.microsoft.com/en-us/library/ms750612.aspx)：

```
 <DataGrid AutoGenerateColumns="False" ItemsSource="{Binding}">
        <DataGrid.Columns>
            <DataGridTextColumn Header="First Name" Binding="{Binding FirstName, UpdateSourceTrigger=PropertyChanged}"/>
            <DataGridTextColumn Header="Last Name" Binding="{Binding LastName, UpdateSourceTrigger=PropertyChanged}"/>
        </DataGrid.Columns>
    </DataGrid> 
```

其中 items source 是一系列对象，如下所示：

```
public class Customer : INotifyPropertyChanged
{
    public string FirstName
    {
        get { return firstName; }
        set
        {
            if (string.IsNullOrEmpty(value))
            {
                // oops!
            }

            if (firstName != value)
            {
                firstName = value;
                OnPropertyChanged("FirstName"); // raises INotifyPropertyChanged.PropertyChanged
            }
        }
    }
    private string firstName;

    public string LastName { /* ... */}
} 
```

# python - pyserial 和 wxpython matplotlib 读取方法在线程中失败

> ID：13466890
> 
> 赞同：0
> 
> 时间：2012-11-20T05:03:53.697
> 
> 标签：python, matplotlib, wxpython, pyserial

我正在尝试构建一个 gui 并从串行端口接收数据并显示在图中（使用 matplotlib）。但是当我打开端口时， read() 失败了。我只是想不通为什么。有人可以给我一些建议吗？这将不胜感激！这是我的代码的一部分：`

```
class PlotFigure(wx.Frame):
    """Matplotlib wxFrame with animation effect"""
    def __init__(self):
        wx.Frame.__init__(self, None, wx.ID_ANY, title="Figure for figures", size=(1200, 1200))
        # Matplotlib Figure
        self.fig = Figure((6, 4), 100)
        # bind the Figure to the backend specific canvas
        self.canvas = FigureCanvas(self, wx.ID_ANY, self.fig)
        # add a subplot
        self.ax = self.fig.add_subplot(111)
        # limit the X and Y axes dimensions
        self.ax.set_ylim([-180, 180])
        self.ax.set_xlim([0, POINTS])

        self.ax.set_autoscale_on(False)
        self.ax.set_xticks([])
        # we want a tick every 10 point on Y (101 is to have 10
        self.ax.set_yticks(range(-180, 180, 50))
        # disable autoscale, since we don't want the Axes to ad
        # draw a grid (it will be only for Y)
        self.ax.grid(True)
        # generates first "empty" plots
        self.user1=self.user2=self.user3 = [None] * POINTS
        self.l_user1,=self.ax.plot(range(POINTS),self.user1,label='data1')
    self.l_user2,=self.ax.plot(range(POINTS),self.user2,label='data2')
    self.l_user3,=self.ax.plot(range(POINTS),self.user3,label='data3')

        # add the legend
        self.ax.legend(loc='upper center',
                           ncol=4,
                           prop=font_manager.FontProperties(size=10))
        # force a draw on the canvas()
        # trick to show the grid and the legend
        self.canvas.draw()
        # save the clean background - everything but the line
        # is drawn and saved in the pixel buffer background
        self.bg = self.canvas.copy_from_bbox(self.ax.bbox)
        # bind events coming from timer with id = TIMER_ID
        # to the onTimer callback function
        wx.EVT_TIMER(self, TIMER_ID, self.onTimer)

    #for serial
    self.ser=serial.Serial('COM1', 115200)
    #print self.ser

    def onTimer(self, evt):
    print 'onTimer....'
        """callback function for timer events"""
        # restore the clean background, saved at the beginning
        self.canvas.restore_region(self.bg)
        # update the data
    time.sleep(1)
        self.ser.flushInput()
        print 'before the read method....'
    data=self.ser.read(12)
        print 'after the read method... just cant reach here...'
    t = struct.unpack('3f', data)
        temp1 = t[0]
    temp2 = t[1]
    temp3 = t[2]
        self.user1 = self.user1[1:] + [temp1]
    print temp2
    self.user2 = self.user2[1:] + [temp2]
    self.user3 = self.user3[1:] + [temp3]
        # update the plots
        self.l_user1.set_ydata(self.user1)
    self.l_user2.set_ydata(self.user2)
    self.l_user3.set_ydata(self.user3)
        # just draw the "animated" objects
        self.ax.draw_artist(self.l_user1)
    self.ax.draw_artist(self.l_user2)
    self.ax.draw_artist(self.l_user3)# It is used to efficiently update Axes data (axis ticks, labels, etc are not updated)
        self.canvas.blit(self.ax.bbox)
    print 'onTimer ends'
    def __del__(self):
    self.ser.close()
    t.Stop()

if __name__ == '__main__':
    app = wx.PySimpleApp()
    frame = PlotFigure()
    t = wx.Timer(frame, TIMER_ID)
    t.Start(1)
    print 'new test'
    frame.Show()
    print 'after frame show '
    app.MainLoop() 
```

`I wonder if it is the thread problem.so I do an another test: Here is part of my code:`

```
ser =serial.Serial(port='COM1',baudrate=115200,xonxoff=0)
def reading(ser):
    flag = 1
    print 'threading'
    while True:
            print ser.readable() #true
            print 'before the read method.'
        data = ser.read(12)
        print 'after the read method... cant reach here.'
        time.sleep(1)

if __name__ == '__main__':
    threading.Thread(target=reading,args=(ser,)).start()
    print 'main process1' 
```

` **读取方法失败！**

然后是另一个简单的测试，我摆脱了线程并且它工作正常！这是我的部分代码：`

```
ser = serial.Serial('COM1', 115200)
num=0
try:
    while True:

        data = ser.read(12)
        print num
        time.sleep(1)    
        ser.flushInput()

finally:
    ser.close() 
```

`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-10T15:00:44.680

```
#
# The following is an example of an application I have running using the 
# serial port.  Although the baud is lower, it should not matter.  This application
# will capture each byte and append them into a buffer before processing.  All bytes 
# are captured including non-printable characters.  The terminator in my application
# is the RETURN character (0x0A) or the (0x0D) denoting end of line.
# I think your port is hung waiting on the full twelve (12) bytes that you are 
# expecting on the read.  The hang condition is because only a portion of 
# the 12 bytes have occurred.  I suggest you add a timeout value of 1 second 
# to the serial read, then test for the length of what was read to validate 
# what you think you just read.  If zero, you have a serial cable or problem 
# at the other end of the cable.  If greater than zero, then the device is 
# not sending what you think it should.

import serial
import string
import binascii
import threading
import thread
import fileinput
import datetime
import time
import sys

from configobj import ConfigObj

# Insert following code at top in the import area of your application
# 
hdrFile  = 'AppName.ini'
config   = ConfigObj(hdrFile)
hdrVal   = 'COM'
comport  = int(config[hdrVal])
hdrBaud  = 'Baudrate'
baudrate = config[hdrBaud]

print "Com Config = ",config
print "Com Port   = ",comport

boolSerOnline = False
bool_IsALIVE  = False      # thread has active serial port

class myThread( threading.Thread ):
    def __init__(self, intThreadID, strName, intCountVal ):
        # --------------------------------------- Constructor
        threading.Thread.__init__(self)    # <<-- MUST be first in Init
        self.threadID = intThreadID
        self.threadName = strName
        self.intStartCounter = intCountVal
    def run(self):
        # --------------------------------------- Tooltalk
        # Thread to Listen to the RS-232 RX Port
        # ------------------------------- TOOLTALK ()
        # ------------------------------- THREAD
        global bool_IsALIVE, boolThreadRun
        #
        #
        inbuf  = []          # Clear Buffer
        buffer = ""          # Clear Buffer
        strFirstByte = ""
        boolWriteCRLF = 0
        #
        print "\n*** Starting %s: %s" % ( self.threadName, time.ctime(time.time()))
        print "\n"
        #
        bool_IsALIVE = False
        #
        # ----------------------------------- Start of Thread Loop
        while ( boolThreadRun ):
            # ----------------------------- THREAD is Running

            try:
                # ------------ Read 1 byte at a time in thread
                # Note: reads all characters, Even non-printable characters
                strByte = str(ser.read( 1 ))
                #
                intLength = len( strByte )
                #
                if ( intLength > 0 ):
                    bool_IsALIVE = True          # Indicate connected
                    # Process byte
                    #
                    if (strFirstByte == ""):
                        boolWriteCRLF  = 0
                        #
                        if ( strByte == '\r' ):
                            strByte = ''          # Skip until we have first byte
                        elif ( strByte == '\n' ):
                            strByte = ''          # Skip until we have first byte
                        elif ( strByte == '0' ):
                            inbuf = []                     # Clear buffer first
                            inbuf.append( strByte )        # Add to inbuf
                            buffer = ''.join(inbuf)        # join the two buffers
                            strFirstByte = strByte
                            boolWriteCRLF  = 1
                        elif ( strByte == 'S' ):
                            inbuf = []                     # Clear buffer first
                            inbuf.append( strByte )        # Add to inbuf
                            buffer = ''.join(inbuf)        # join the two buffers
                            strFirstByte = strByte
                            boolWriteCRLF  = 1
                        elif ( strByte == 'C' ):
                            inbuf = []                     # Clear buffer first
                            inbuf.append( strByte )        # Add to inbuf
                            buffer = ''.join(inbuf)        # join the two buffers
                            strFirstByte = strByte
                            boolWriteCRLF  = 1
                        elif ( strByte == '*' ):
                            inbuf = []                     # Clear buffer first
                            inbuf.append( strByte )        # Add to inbuf
                            buffer = ''.join(inbuf)        # join the two buffers
                            strFirstByte = strByte     # save first byte of string
                            boolWriteCRLF  = 1
                        elif ( strByte == '>' ):
                            inbuf = []                     # Clear buffer first
                            inbuf.append( strByte )        # Add to inbuf
                            buffer = ''.join(inbuf)        # join the two buffers
                            strFirstByte = strByte     # save first byte of string
                            boolWriteCRLF  = 1
                        elif ( strByte == 'M' ):
                            inbuf = []                     # Clear buffer first
                            inbuf.append( strByte )        # Add to inbuf
                            buffer = ''.join(inbuf)        # join the two buffers
                            strFirstByte = strByte     # save first byte of string
                            boolWriteCRLF  = 1
                        else:
                            pass
                    else:
                        inbuf.append( strByte )        # Add to inbuf
                        buffer = ''.join(inbuf)        # join the two buffers
                else:
                    # serial driver timed out producing No byte 
                    # print "SKIP - NO BYTE (NO POWER?)"
                    pass
            except:
                bool_IsALIVE = False
                print "[Tooltalk] Error reading Serial Port"

if __name__ == "__main__":
    try:
        # *** +++++++++++++ Notice the 1 second timeout ...
        ser = serial.Serial(comport,baudrate,8,'N',1,timeout=1)
        boolSerOnline = True
    except:
        print "[Main] Serial Port NOT Connected\n"
        boolSerOnline = False

    boolThreadRun = True        # Flag indicating "Tooltalk" to Run
    #
    thread1 = myThread(1, "Tooltalk-1", 1)   # Init Thread
    thread1.start()        # Start Tooltalk Thread 
```

# jpa-2.0 - 新持久化实体中未设置鉴别器列

> ID：13466891
> 
> 赞同：4
> 
> 时间：2012-11-20T05:03:53.680
> 
> 标签：jpa-2.0, eclipselink

我有一个看起来像这样的基类实体：

```
@Entity
@Inheritance(strategy = InheritanceType.JOINED)
@DiscriminatorColumn(name = "IDTYPE",
    discriminatorType = DiscriminatorType.STRING,
    length = 12)
public class ProtoObject implements Serializable {

  private static final long serialVersionUID = 1L;
  @Id
  @GeneratedValue(strategy = GenerationType.IDENTITY)
  private Long id;

  @Column
  private String              idtype;

  // more columns 
```

我有许多我构建和坚持的子类。但是我发现，即使**idtype**列设置为我在数据库中所期望的（使用单独的 DB 浏览器工具检查），Java 对象的**idtype** *属性*也不会为 EntityManager 在其缓存中的那些对象设置。

如果我通过 EntityManager 查找对象，则最近保存的对象的**idtype**似乎为空白！如果我关闭应用程序并重新打开它，数据显示正常。

这是一个使用 EclipseLink 2.3.2.v20111125-r1046 的 JSF 2 应用程序。

这是一个已知问题吗？任何人都可以提出解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-26T17:03:35.593

您可以在持久化后更新缓存：

```
 this.entityManager.persist(protoObject);
    this.entityManager.flush();
    this.entityManager.refresh(protoObject); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T13:20:26.863

您在创建对象时没有设置属性以反映您想要推送到数据库的内容。您需要设置该字段以使其在缓存中保持一致，因为 JPA 实体被视为常规 java 对象并且不会为您解决问题。或者在持久化之后，您可以刷新更改它们刷新对象以使用数据库中的内容填充字段

# php - 使用 Curl 将库存文件上传到亚马逊

> ID：13466895
> 
> 赞同：0
> 
> 时间：2012-11-20T05:04:15.097
> 
> 标签：php, file-upload, curl, amazon

我正在尝试使用 Curl 将库存文件上传到亚马逊。我能够登录到我的帐户并进入库存上传页面，但似乎无法设置正确的路径，因为每次上传文件时，它都会指示从此上传处理的记录数 - 零。我想我走错了路。我正在使用“@/home/path-to-file/file-name.txt”我做错了什么？上传成功，但系统似乎找不到文件。

```
<?php

$URL = 'https://sellercentral.amazon.com/gp/item-manager/ezdpc/uploadInventory.html/ref=ag_invfile_mmap_home';

$ch  = curl_init();

curl_setopt($ch, CURLOPT_URL, $URL);
curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.2.13) Gecko/20101206 Ubuntu/10.10 (maverick) Firefox/3.6.13');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_HEADER, 1);        
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);

$page = curl_exec($ch);

$postFields['uploadType']    = 'PriceAndQty';
$postFields['uploadFileName']    = '@/home/path_to_file/inventory_file.txt';

$post = '';

foreach($postFields as $key => $value) {
    $post .= $key . '=' . urlencode($value) . '&';
}

$post = substr($post, 0, -1);

curl_setopt($ch, CURLOPT_REFERER, $URL);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $post);

$page = curl_exec($ch); // make request 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T17:47:21.393

据我所知，排队

```
curl_setopt($ch, CURLOPT_POSTFIELDS, $post); 
```

`$post`如果要附加文件，则需要是一个数组。数组或字符串 - 生成不同的表单内容类型。

[您可以在PHP 文档](http://www.php.net/manual/en/function.curl-setopt.php)中找到详细信息：

> 从 PHP 5.2.0 开始，如果文件以 @ 前缀传递给此选项，则 value 必须是数组。

# mongodb - 我应该如何构建一个评论模型来让用户使用 mongoDB/mongoid 来评论产品？

> ID：13466897
> 
> 赞同：2
> 
> 时间：2012-11-20T05:04:25.070
> 
> 标签：mongodb, mongoid

我对 mongodb/mongoid 非常陌生，并且想知道构建一个使用户能够审查产品的系统的最佳方法。User 和 Product 将是单独的集合。但是他们都需要访问 Review 模型来显示他们在用户和产品页面上所做的评论。我应该使用嵌入的 1（用户）- 1（评论）关系创建链接的 1（产品）-N（评论）关系吗？这是正确的方法吗？

用户模型

```
class User
  include Mongoid::Document

  field :name, type: String
  field :email, type: String

  embeds_many :reviews, cascade_callbacks: true
end 
```

产品型号

```
class Product
  include Mongoid::Document

  field :name, type: String
  field :price, type: Float

  has_many :reviews, dependent: :destroy
end 
```

审查模型

```
class Review
  include Mongoid::Document

  field :rating, type: Integer

  belongs_to :product
  embedded_in :user
end 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T06:52:54.200

它不是定义模型结构的正确方法，因为您无法直接访问嵌入式文档，并且您将无法在产品和评论之间创建参考关系。正确的结构将是

用户模型

```
class User
  include Mongoid::Document

  field :name, type: String
  field :email, type: String

  has_many :reviews, dependent: :destroy
end 
```

产品型号

```
class Product
  include Mongoid::Document

  field :name, type: String
  field :price, type: Float

  has_many :reviews, dependent: :destroy
end 
```

审查模型

```
class Review
  include Mongoid::Document

  field :rating, type: Integer

  belongs_to :product
  belongs_to :user
end 
```

# php - woocommerce 变体

> ID：13466898
> 
> 赞同：26
> 
> 时间：2012-11-20T05:04:40.373
> 
> 标签：php, wordpress, woocommerce

我正在创建一个 woocommerce 主题，并且我有产品变体，即显示在产品详细信息页面上的尺寸，但问题是我想通过使用产品 ID 在我的自定义 php 页面中获取所有变体，任何人都可以帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-11-20T06:11:33.660

您可以使用：`$available_variations = $product->get_available_variations();`

如果这是单个样式模板，请确保`global $product;`在顶部附近添加。

从那里，您可以遍历变化并按照您的意愿行事......因为您没有任何特定的输出，我希望这能让您走上正确的轨道。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2016-12-07T11:02:33.367

您可以使用以下代码：

```
global $woocommerce, $product, $post;
// test if product is variable
if ($product->is_type( 'variable' )) 
{
    $available_variations = $product->get_available_variations();
    foreach ($available_variations as $key => $value) 
    { 
        //get values HERE  
    }
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-03-03T07:23:12.337

以下代码：

```
$variations = $product->get_available_variations(); 
```

将返回产品的所有变体

这个函数放在你显示所有变化的地方：

```
\wp-content\plugins\woocommerce\templates\single-product\add-to-cart\variable.php 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-11-23T01:14:48.170

一个常见问题通常始于更改单个产品的“有货”或“缺货”标签。那里的解决方案很少，您需要更改 functions.php 文件并添加新过滤器。

当您需要针对产品变化进行修改时，问题会变得更加复杂。

这可能是您的解决方案： http: [//bucketpress.com/changeing-stock-availability-text-for-product-variations](http://bucketpress.com/changing-stock-availability-text-for-product-variations)

为了显示产品的可用变体，您需要修改 variable.php 文件，该文件位于 /wp-content/plugins/woocommerce/templates/single-product/add-to-cart/

找到这个：

```
<form class="variations_form cart" method="post" enctype='multipart/form-data' data-product_id="<?php echo absint( $product->id ); ?>" data-product_variations="<?php echo htmlspecialchars( json_encode( $available_variations ) ) ?>"> 
```

在标记之前粘贴此代码：

```
foreach( $available_variations as $i => $variation ) {
//check if variation has stock or not 
if ( $variation['is_in_stock'] ) {
    // Get max qty that user can purchase
    $max_qty = $variation['max_qty'];

    // Prepare availability html for stock available instance
    $availability_html = '<p class="stock in-stock">' . $max_qty . ' units available for your purchase.' . '</p>';
} else {
    // Prepare availability html for out of stock instance
    $availability_html = '<p class="stock out-of-stock">Oops, we have no stock left.</p>';
}
$available_variations[$i]['availability_html'] = $availability_html; } 
```

不要忘记从这一行移动 php 结束标记“？>”

```
do_action( 'woocommerce_before_add_to_cart_form' ); ?> 
```

在你的新代码之后。

所以完整的 variable.php 文件应该像这样（WooCommerce 3.2.4）：

```
<?php
/**
 * Variable product add to cart
 *
 * This template can be overridden by copying it to yourtheme/woocommerce/single-product/add-to-cart/variable.php.
 *
 * HOWEVER, on occasion WooCommerce will need to update template files and you
 * (the theme developer) will need to copy the new files to your theme to
 * maintain compatibility. We try to do this as little as possible, but it does
 * happen. When this occurs the version of the template file will be bumped and
 * the readme will list any important changes.
 *
 * @see     https://docs.woocommerce.com/document/template-structure/
 * @author  WooThemes
 * @package WooCommerce/Templates
 * @version 3.0.0
 */
if ( ! defined( 'ABSPATH' ) ) {
    exit;
}

global $product;

$attribute_keys = array_keys( $attributes );

do_action( 'woocommerce_before_add_to_cart_form' ); 

// Your New Code goes here:
foreach( $available_variations as $i => $variation ) {
    // check if variation has stock or not 
    if ( $variation['is_in_stock'] ) {
        // Get max qty that user can purchase
        $max_qty = $variation['max_qty'];

        // Prepare availability html for stock available instance
        $availability_html = '<p class="stock in-stock">Available: ' . $max_qty . '</p>';
    } else {
        // Prepare availability html for out of stock instance
        $availability_html = '<p class="stock out-of-stock">Out of stock!</p>';
    }
    $available_variations[$i]['availability_html'] = $availability_html;
} ?>

<form class="variations_form cart" method="post" enctype='multipart/form-data' data-product_id="<?php echo absint( $product->get_id() ); ?>" data-product_variations="<?php echo htmlspecialchars( wp_json_encode( $available_variations ) ) ?>">
    <?php do_action( 'woocommerce_before_variations_form' ); ?>

    <?php if ( empty( $available_variations ) && false !== $available_variations ) : ?>
        <p class="stock out-of-stock"><?php _e( 'This product is currently out of stock and unavailable.', 'woocommerce' ); ?></p>
    <?php else : ?>
        <table class="variations" cellspacing="0">
            <tbody>
                <?php foreach ( $attributes as $attribute_name => $options ) : ?>
                    <tr>
                        <td class="label"><label for="<?php echo sanitize_title( $attribute_name ); ?>"><?php echo wc_attribute_label( $attribute_name ); ?></label></td>
                        <td class="value">
                            <?php
                                $selected = isset( $_REQUEST[ 'attribute_' . sanitize_title( $attribute_name ) ] ) ? wc_clean( stripslashes( urldecode( $_REQUEST[ 'attribute_' . sanitize_title( $attribute_name ) ] ) ) ) : $product->get_variation_default_attribute( $attribute_name );
                                wc_dropdown_variation_attribute_options( array( 'options' => $options, 'attribute' => $attribute_name, 'product' => $product, 'selected' => $selected ) );
                                echo end( $attribute_keys ) === $attribute_name ? apply_filters( 'woocommerce_reset_variations_link', '<a class="reset_variations" href="#">' . esc_html__( 'Clear', 'woocommerce' ) . '</a>' ) : '';
                            ?>
                        </td>
                    </tr>
                <?php endforeach;?>
            </tbody>
        </table>

        <?php do_action( 'woocommerce_before_add_to_cart_button' ); ?>

        <div class="single_variation_wrap">
            <?php
                /**
                 * woocommerce_before_single_variation Hook.
                 */
                do_action( 'woocommerce_before_single_variation' );

                /**
                 * woocommerce_single_variation hook. Used to output the cart button and placeholder for variation data.
                 * @since 2.4.0
                 * @hooked woocommerce_single_variation - 10 Empty div for variation data.
                 * @hooked woocommerce_single_variation_add_to_cart_button - 20 Qty and cart button.
                 */
                do_action( 'woocommerce_single_variation' );

                /**
                 * woocommerce_after_single_variation Hook.
                 */
                do_action( 'woocommerce_after_single_variation' );
            ?>
        </div>

        <?php do_action( 'woocommerce_after_add_to_cart_button' ); ?>
    <?php endif; ?>

    <?php do_action( 'woocommerce_after_variations_form' ); ?>
</form>

<?php
do_action( 'woocommerce_after_add_to_cart_form' ); 
```

“Kevin”的所有学分来自：[http ://bucketpress.com/author/base-admin](http://bucketpress.com/author/base-admin)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-20T06:09:32.870

尝试这个，

```
<?php
$name_size = get_post_meta($_GET['pr_id'],'product_size', true);
$t_shirt_sizes_array = wp_get_post_terms($_GET['pr_id'],'pa_size');
$t_shirt_size = array();
$t_shirt_price = array();
for($scnt = 0; $scnt < count($t_shirt_sizes_array); $scnt++){
$t_shirt_size[] = $t_shirt_sizes_array[$scnt]->name;
$t_shirt_price[] = $t_shirt_sizes_array[$scnt]->slug;
$t_shirt_size_id[] = $t_shirt_sizes_array[$scnt]->term_id;
}
$cnt = 1;
for($i = 0; $i < count($t_shirt_size); $i++){
$name_size = $t_shirt_size[$i];

$result = $wpdb->get_col( "SELECT slug FROM {$wpdb->prefix}terms WHERE name = 
'".$t_shirt_size[$i]."'" );
$term_slug = ( !empty( $result ) ) ? $result[0] : $term;
 $query = "SELECT postmeta.post_id AS product_id
    FROM {$wpdb->prefix}postmeta AS postmeta
LEFT JOIN {$wpdb->prefix}posts AS products ON ( products.ID = postmeta.post_id )
    WHERE postmeta.meta_key LIKE 'attribute_%'
        AND postmeta.meta_value = '$term_slug'
        AND products.post_parent = ".$_GET['pr_id'];    
$variation_id = $wpdb->get_col( $query );

$parent = wp_get_post_parent_id( $variation_id[0] );
if ( $parent > 0 ) {                    
    echo $name_size;
    $_product = new WC_Product_Variation( $variation_id[0] );
    echo $_product->get_price();
}
$price = $t_shirt_price[$i];
$cnt++;
}
?> 
```

# java - 在这种情况下对生成的 BufferedImages 使用缓存？

> ID：13466900
> 
> 赞同：0
> 
> 时间：2012-11-20T05:04:48.313
> 
> 标签：java, swing, caching, jscrollpane, bufferedimage

我正在实现一个棋盘游戏，其中每个玩家都有几个单位，每个单位都使用我使用以下方法从文件中读取的公共图像显示给用户。我在应用程序启动时阅读了这张图片，稍后将使用它。

```
 private static BufferedImage readBufferedImage (String imagePath) {
        try {
            InputStream is = IconManager.class.getClassLoader().getResourceAsStream(imagePath);
            BufferedImage bimage = ImageIO.read(is);
            is.close();
            return bimage;
        } catch (Exception e) {
            return null;
        }
    } 
```

**单位与位于该共同图像顶部的各种彩色标记不同。**

在我只是将几个 commonImages 添加到 JPanel 之前，令牌是使用浮动在 commonImage 顶部的 JLabels 实现的

```
 //at startup
    ImageIcon commonImage = new ImageIcon(readBufferedImage("image.png"));
    ...
    JPanel panel = new JPanel();
    panel.add(commonImage);
    panel.add(commonImage);

    //located JLabels with token on the top of each commonImage 
```

但是，现在我想使用 JScrollPane 而不是 JPanel，所以我认为在将每个 commonImage 显示给用户之前，对每个 commonImage 使用 drawString() 和 drawImage() 是一种更好的方法。

我估计大约有 20 个单元。因此，现在每个单元的每一轮我都需要使用各种令牌配置即时生成单独的 BufferedImage。

**问题是我是否应该根据令牌配置缓存已经生成的 BufferedImages 以从缓存中提取，如果之前已经使用相同的配置生成了图像？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T21:56:17.940

您提出的问题取决于几个因素：

1.  从头开始生成图像需要多长时间
2.  检查图像是否之前生成需要多长时间
3.  每张图片有多大
4.  图片被重复使用的概率

因此，如果对您的应用程序没有很好的了解，没有人能够针对每种情况为您提供准确的答案。

一般来说，如果你只是在移动标记，应该很快地实现你的绘图面板`update`的`paintComponent`方法。如果您保存基本图像、令牌图像和当前生成的图像（基本上是您建议的），我预计不会出现性能问题。关键是在自定义`update`方法中更新图像，并始终在方法中绘制当前结果图像`paintComponent`。

**更新**

例如，您可以使用类似于以下的代码缓存当前显示：

```
private BufferedImage cachedImage;
...

@Override
public void paintComponent(Graphics g){
    //If the image needs to be refreshed draw it to the cache first
    if(cachedImage == null){
        cachedImage = new BufferedImage(getWidth(), getHeight(), BufferedImage.TYPE_4BYTE_ABGR);
        super.paintComponent(cachedImage.getGraphics());
    }

    //Draw the image from cache
    g.drawImage(cachedImage, 0, 0, this);
} 
```

当您想清除缓存时，在执行更新的方法中，您将设置`cachedImage = null;`

但在你的情况下，

*   您遇到的任何 200x200 尺寸的性能问题都与您正在绘制的绘图数量有关。由于我猜您不关心帧/秒速率，因此我怀疑您会遇到性能问题（您可以收集时间以准确查看绘制需要多长时间 - 我猜不到 100 毫秒）
*   最简单的做法是缓存标记及其字符串的图像（我假设它们很少更改），但仍然动态创建标记的布局。（在您的情况下，任何其他性能提升都不会那么容易）。
*   缓存之前的屏幕渲染实际上会破坏摆动显示模型（使用它没有多大意义 - 只需自己进行布局）。这实际上适用于几乎所有的容器缓存。

# php - php mysql注册与图像

> ID：13466901
> 
> 赞同：0
> 
> 时间：2012-11-20T05:04:49.513
> 
> 标签：php, image, registration

好的，我知道我刚刚问了一个关于这个的问题，但是现在我让它将图像上传到数据库并尝试重新做一些事情来让文本进入那里我将所有内容都添加回了名字，但它似乎没有能够返回任何帮助都会很棒，谢谢顺便说一句，这个社区很棒。

```
 <html>
    <head>
    <title>Upload an image</title>
</head>
<body>
<form action="UploadContent.php" method="POST" enctype="multipart/form-data">
<p>FirstName:</p><input type="FirstName" name"FirstName"/>

<p>File:</p><input type="file" name="image"> 

<input type="submit" value="Upload">
</form>
<?php

// connect to database
include"config.php";

// file properties
$FirstName = $_POST['FirstName'];

$file = $_FILES['image']['tmp_name'];

if (!isset($file))
echo "Please select a profile pic";
else
{
$image = addslashes(file_get_contents($_FILES['image']['tmp_name']));
$image_name = addslashes($FILES['image']['name']);
$image_size = getimagesize($_FILES['image']['tmp_name']);

if ($image_size==FALSE)
echo "That isn't a image.";
else
{
$insert = mysql_query("INSERT INTO content VALUES     ('".$FirstName."','','','','','','','','','$image_name','$image')");
}
}
?>
</body>
</html> 
```

我改变了我的插入代码如下

```
$insert = mysql_query("INSERT INTO content (FirstName, LastName, Gender, City, State, BirthMonth, BirthDay, BirthYear, ProfileUrl, ProfilePicName, ProfilePic) VALUES ('".$FirstName."','".$LastName."','".$Gender."','".$City."','".$State."','".$BirthMonth."','".$BirthDay."','".$BirthYear."','".$ProfielUrl."','$image_name','$image')"); 
```

因为我试图让这个 youtube 视频提供帮助，但仍然没有运气

[http://www.youtube.com/watch?v=xAkunfiZwYQ](http://www.youtube.com/watch?v=xAkunfiZwYQ)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T05:18:16.197

Well, whether you get your answer or not but i am not agree with your approach of storing images into database, you may (not may have to) store them in a file system, and the path in database, that will be the correct way to do. here is an good stack post to read [Storing images](https://stackoverflow.com/questions/3748/storing-images-in-db-yea-or-nay)

# css - CSS选择器：如何选择非元素兄弟节点？

> ID：13466903
> 
> 赞同：12
> 
> 时间：2012-11-20T05:05:26.133
> 
> 标签：css, css-selectors

根据这里的规范：http: [//www.w3.org/TR/CSS21/selector.html#adjacent-selectors](http://www.w3.org/TR/CSS21/selector.html#adjacent-selectors)

> 相邻兄弟选择器的语法如下：E1 + E2，其中 E2 是选择器的主题。如果 E1 和 E2 在文档树中共享相同的父级并且 E1 紧接在 E2 之前，则选择器匹配，**忽略非元素节点**（例如文本节点和注释）。

那么我们如何才能选择非元素兄弟节点。例如：在下面的html中，如何选择“非元素文本”文本？

```
<div><label>Some text here</label> Non-element text</div> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-20T05:06:51.100

你不能。CSS 选择器只能选择元素节点。这就是为什么相邻的兄弟组合器如所描述的那样工作的原因。

如果您需要应用样式，请尝试将它们应用到`div`并在`label`. 当然，这确实取决于您应用的样式，因为某些样式无法撤消或需要继承。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T05:09:18.613

如前所述，CSS 选择器只能选择元素节点。

要解决您的问题，您可以将文本节点包装在一个元素中，然后在该元素上应用样式，或者在容器元素上应用样式，然后在标签元素中覆盖它。

# ios - self.navigationcontroller popviewcontrolleranimated 是的，终止我的应用程序

> ID：13466906
> 
> 赞同：0
> 
> 时间：2012-11-20T05:05:39.000
> 
> 标签：ios

我有导航应用程序。我在 appdelegate 的应用程序 didFinishLaunchingWithOptions 中创建了一个 UINavigationController。self.initialviewcontroller = [[InitialViewController alloc] initWithNibName:@"InitialViewController" bundle:nil]; UINavigationController *myNavController = [[UINavigationController alloc] initWithRootViewController:self.initialviewcontroller];

self.window.rootViewController = myNavController; [self.window makeKeyAndVisible];

在 InitialViewController 我有将导航到 SecondViewController 的按钮。因此，在按钮的 IBAction 中，我按下 SecondViewController 如下，

```
if(self.secondView != nil)
  self.secondView = nil;
self.secondView = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];
self.navigationController pushViewController:self.secondView animated:YES]; 
```

情况：导航工作正常，我可以在 InitialViewController 和 SecondViewController 之间导航。当我在 SecondViewController 中并按下设备的主页按钮时，应用程序进入后台，当我重新打开应用程序时，它会从我关闭的位置打开应用程序（即 SecondViewController）。现在，如果我按后退按钮转到 InitialViewController，应用程序就会崩溃。

它在 ios 模拟器中运行良好，但在设备上发生崩溃。

我不明白我犯了什么错误。请让我知道任何想法。提前致谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T05:22:04.333

尝试使用关闭您的视图控制器

[自我dismissModalViewControllerAnimated：是]；

这个对我有用。即使对于 iOS 6。

# java - 在Android中创建一个字节数组的ArrayList

> ID：13466908
> 
> 赞同：2
> 
> 时间：2012-11-20T05:05:48.497
> 
> 标签：java, android, arraylist, bytearray, byte

我想将来自服务器的 httpresponse 中的字节连续读取到一个数组中。

我正在创建一个最大大小为 2048 的字节数组。

所以，我想创建一个动态增加的数组，我发现 ArrayList 是解决方案。

我该如何克服这个解决方案？

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T05:08:13.777

您可以在从服务器读取字节时使用 a[`ByteArrayOutputStream`](http://developer.android.com/reference/java/io/ByteArrayOutputStream.html)来累积字节。我不会使用 an ，`ArrayList<Byte>`因为它需要将 a 中的每个字节值装箱`Byte`。

当您想要访问已累积的字节时，只需调用`toByteArray()`.`ByteArrayOutputStream`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T05:07:57.330

**你可以有一个字节数组，如：**

`List<Byte> arrays = new ArrayList<Byte>();`

**将其转换回数组**

`Byte[] soundBytes = arrays.toArray(new Byte[arrays.size()]);`

**-**您也可以使用`ByteArrayInputStream`和`ByteArrayOutputStream`。

**例如：**

```
InputStream inputStream = socket.getInputStream();  

// read from the stream  
ByteArrayOutputStream baos = new ByteArrayOutputStream();  
byte[] content = new byte[ 2048 ];  
int bytesRead = -1;  
while( ( bytesRead = inputStream.read( content ) ) != -1 ) {  
    baos.write( content, 0, bytesRead );  
} // while  

// now, as you have baos in hand, I don't think you still need a bais instance  
// but, to make it complete,
// now you can generate byte array input stream as below    
ByteArrayInputStream bais = new ByteArrayInputStream( baos.toByteArray() ); 
```

# c# - XNA RenderTarget2D 大小限制

> ID：13466919
> 
> 赞同：0
> 
> 时间：2012-11-20T05:07:03.733
> 
> 标签：c#, xna, resolution

我一直在使用 XNA 制作 PC 游戏，我正在使用 RenderTarget2D 进行照明，方法是在一个中绘制世界的东西，然后在另一个中绘制 lightmask 的东西。无论如何，我一开始使用我的 1920x1080 显示器并没有遇到任何问题，但我刚刚升级到 27" 2560x1440 S-IPS 显示器，现在我遇到了一个错误，因为我的显示器分辨率设置为高于 2048，这显然是纹理可以是最大尺寸。

它正在尝试绘制大小为 2560 x 1440 的纹理，因此我需要找到解决该限制的方法。我想对于大屏幕，我可以以某种方式将其拆分为多个 RenderTarget2D。我的问题是我如何通过光罩：

```
drawMain();
drawLightMask();

ScreenManager.SpriteBatch.Begin(SpriteSortMode.Immediate, BlendState.AlphaBlend);
lightingEffect.Parameters["lightMask"].SetValue(lightMask);
lightingEffect.CurrentTechnique.Passes[0].Apply();
ScreenManager.SpriteBatch.Draw(mainScene, new Vector2(0, 0), Color.White);
ScreenManager.SpriteBatch.End(); 
```

我确定其他人不得不处理这个问题，所以也许有人对我如何解决这个 2048 限制有一些想法？

编辑：另一个想法..也许当我检测到分辨率很大时，我只是将其设置为较低而不是默认设置为当前分辨率。这样就真的不用担心了。这种方式的问题在于，在全屏模式下，它会改变屏幕的分辨率，所以当他们退出游戏时，它必须再次改变分辨率，而且有点混乱。然后在无边框窗口模式下，窗口更小，但似乎并没有改变你的分辨率。

# php - 提高并发 AJAX 文件上传性能

> ID：13466921
> 
> 赞同：1
> 
> 时间：2012-11-20T05:07:18.697
> 
> 标签：php, jquery, file-upload, ajax-upload

我的网站上有 AJAX 文件上传，在并发文件上传的情况下速度非常慢。您可以在此处查看详细信息，[Concurent AJAX 文件上传限制](https://stackoverflow.com/questions/13455196/concurent-ajax-file-upload-limit)。所以我正在寻找在第一次上传完成后，但在其他操作完成之前开始我的第二个 AJAX 请求的方法（比如将文件移动到 S3、创建示例、数据库操作等）。因为我认为发布的文件只会使浏览器过载（因为正常的 AJAX 请求在比较时非常快）。那么，我的想法是否正确，有没有办法在 AJAX 请求完成之前找到上传完成的时间？

或者 Javascript 中是否有任何方法可以找到浏览器是否已经超载？提前致谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-20T05:42:41.140

你可以在异步模式下使用 ajax false

```
$.ajax({
    async: false,
    // ...

}); 
```

这将防止在 ajax 请求结束之前触发下一行

更好的是，您可以在成功选项中包含一些操作：

```
$.ajax({
  url: 'ajax/test.html',
 async: false,
  success: function(data) {
    // do somethings after you receive the post results (data)
  } 
```

});

# java - 如何为下面的类编写 JUnit 测试用例？

> ID：13466931
> 
> 赞同：-4
> 
> 时间：2012-11-20T05:08:10.237
> 
> 标签：java, junit

由于我是junit初学者，请帮助为以下课程编写测试用例

我的程序如下：

```
 public class One
    {
    public void caseOne()   
    {
        int max=0, 
        cardNo=0;
        System.out.println("Name:");
                    String name=br.readLine();
                    System.out.println("Amount:");

                  int amount=Integer.parseInt(br.readLine());
                   int max=0;
                    for(Customer c :custList)
                    {
                        if(c.getCardNo()>max)
                        {
                            max=c.cardNo;
                        }

                    }
                    System.out.println("Your card no:"+(max+1));
                    Customer newCust=new Customer(name,amount,max+1);
                    custList.add(newCust);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T11:57:10.053

单元测试不测试代码，它**根据规范测试实现**。你没有包括你的代码应该做什么。并且说“*好好看看代码*”是没有意义的，因为这已经假设它遵循规范，因此不需要单元测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T05:52:40.833

通常，具有`void`返回类型的方法很难测试。

现在你的类有一个方法有 3-4 个职责：

1.  解析输入
2.  创造客户
3.  管理客户列表
4.  (?) 记录输出

如果它们的职责对应用程序至关重要，请考虑将上述内容转换为自己的类。

例如，也许您的解析器只将文件转换为`List<Map<String, String>>`or `List<Customer>`，而您`CustomerRepository`的工作只是管理`Customer`对象的集合。

# jcl - GDG文件和DB2表的排序和连接

> ID：13466937
> 
> 赞同：1
> 
> 时间：2012-11-20T05:08:34.417
> 
> 标签：jcl

我有一个 GDG 文件和 DB2 表。我想将 GDG 文件中的值（第 45-52 列）与 DB2 表中的列之一进行比较。是否可以在 JCL 中比较和连接文件和表。如果是这样，请给我一个示例代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T12:42:57.920

关于“在 JCL 中”，请阅读[此](https://stackoverflow.com/questions/11076078/jcl-get-count-of-non-space-chars-in-a-given-area-mainframe/11076336#11076336)内容。

在回答你的问题时，是的，它可以做到。您必须使用商店提供的任何实用程序（SyncSort、DSNTEP4 等）将 DB2 数据卸载到平面文件中。然后您可以使用 SORT 实用程序（SyncSort JOINKEYS、DFSORT JOINKEYS）将该平面文件与 GDG 连接起来。

# python - 在不访问编译器或二进制文件的情况下安装（和使用）numpy

> ID：13466939
> 
> 赞同：2
> 
> 时间：2012-11-20T05:08:40.677
> 
> 标签：python, numpy

假设性能不是问题，有没有办法在编译器不可用且无法安装预构建二进制文件的环境中部署 numpy？

或者，是否有纯 python numpy 实现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T05:26:14.237

> 编译器不可用，并且无法安装预构建的二进制文件

这...使 numpy 成为不可能。如果您无法安装 numpy 二进制文件，并且无法编译 numpy 源代码，那么您将别无选择。

# linux - 在Linux内核中，为什么不能在下半部分获取互斥锁？

> ID：13466941
> 
> 赞同：7
> 
> 时间：2012-11-20T05:09:02.530
> 
> 标签：linux, linux-kernel, synchronization, mutex

我正在阅读*Linux Kernel Development*并且对互斥量和信号量之间的差异感到困惑。

作者说：

> 中断处理程序或下半部分无法获取互斥锁

我知道互斥锁可能会导致睡眠，并且中断处理程序未在任何特定的进程上下文中运行，因此不允许使用互斥锁或信号量。但是下半部分可以通过工作队列实现并且可以休眠。

那么，为什么不能在下半部分获取互斥锁呢？这里关注的是简单性和效率还是其他？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T10:42:26.780

互斥锁/信号量锁定可以休眠，但 BH 被设计为不休眠。Softirq 在许多地方被异步检查执行。例如，它们可以在您每次恢复 BH 时执行（如 spin_unlock_bh）。使此类代码在互斥锁上休眠是一个非常糟糕的主意。如果您在持有 BH 自旋锁的同时休眠，您可能会导致其他 BH 代码休眠，甚至可能使整个系统死锁。

从这个角度来看，工作队列**不**被认为是 BH，它们在可以自由休眠的内核线程的上下文中运行。因此，互斥锁适用于工作队列，但不适用于小任务。

BH 是一个模糊的术语，我发现将 linux 内核视为具有三个执行上下文会很有帮助：用户（包括内核线程）、softirq 和 hardirq。这些中的每一个的抢占可以通过 preempt_count 中的一组位来控制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T06:42:06.017

创建互斥锁的主要动机是简单和高效。由于下半部分的同步可能很复杂，因此建议在下半部分避免互斥锁。下半部分的设计不适合互斥体。例如。**互斥锁应该在相同的上下文中被锁定/解锁**- 这在下半部分的情况下很难遵循。

从理论上讲，您可以决定实施不同的整个中断处理，其中使用互斥锁是合理的。就像“线程”中断处理程序一样。[http://lwn.net/Articles/380931/](http://lwn.net/Articles/380931/)

# javascript - for循环中的Sqlite和jquery变量设置为最后一个值

> ID：13466947
> 
> 赞同：2
> 
> 时间：2012-11-20T05:09:32.447
> 
> 标签：javascript, jquery, sqlite, variables, for-loop

我正在尝试遍历我的 Sqlite DB 中的所有表并将它们发送到服务器 DB。一切正常，除了当我到达通过 $.get() 发送信息的部分时，tbl_name 变量已经设置为最后一个值...... IE 所有 $.get() 调用都使用相同的值tbl_name，最后一个表名。

```
 var submissionID=10;
        var varStr;

        DEMODB.transaction(function (transaction) {
            transaction.executeSql("SELECT name FROM sqlite_master WHERE type='table';", [], function(transaction, results) {
                for (var i = 0; i < results.rows.length; i++) {
                    var tables = results.rows.item(i);
                    var tbl_name=tables['name'];

                    if (tbl_name=="__WebKitDatabaseInfoTable__" || tbl_name=="Submission") { continue; }

                    transaction.executeSql("SELECT * FROM " + tbl_name + " WHERE submissionID=?;", [ID], function(transaction, results) {
                        varStr="";
                        for (var i = 0; i < results.rows.length; i++) {
                            var row = results.rows.item(i);

                            for (col in row) {
                                if (col=="submissionID" || col=="ID") { continue; }
                                varStr += col + "=" + row[col] + '&';
                            }
                        }
                        varStr += 'submissionID=' + submissionID + "&table=" + tbl_name + "&num=" + i;
                        $.get("script/to/process.aspx",varStr);
                    }, errorHandler);
                }
            }, errorHandler);
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T05:31:49.083

```
DEMODB.transaction(function (transaction) {
  transaction.executeSql("SELECT name FROM sqlite_master WHERE type='table';", [], function(transaction, results) {
    for (var i = 0; i < results.rows.length; i++) {
      var tables = results.rows.item(i);
      handleTable(tables['name'], transaction);
    }
  }, errorHandler);
});

function handleTable(tbl_name, transaction) {

  if (tbl_name=="__WebKitDatabaseInfoTable__" || tbl_name=="Submission") { return; }

  transaction.executeSql("SELECT * FROM " + tbl_name + " WHERE submissionID=?;", [ID], function(transaction, results) {
    varStr="";
    for (var i = 0; i < results.rows.length; i++) {
      var row = results.rows.item(i);

      for (col in row) {
        if (col=="submissionID" || col=="ID") { continue; }
        varStr += col + "=" + row[col] + '&';
      }
    }
    varStr += 'submissionID=' + submissionID + "&table=" + tbl_name + "&num=" + i;
    $.get("script/to/process.aspx",varStr);
  }, errorHandler);
} 
```

# ios - 如何使用 ios 中的滑块更改条形图值

> ID：13466948
> 
> 赞同：1
> 
> 时间：2012-11-20T05:10:08.190
> 
> 标签：ios, slider, uislider, bar-chart

我在 iOS 中的条形图应用程序有问题。我使用[DSBarChart](http://dhilipsiva.com/DSBarChart/)和滑块控件创建了一个条形图。我希望图表在更改滑块时动态更改。我怎么做？这是我到目前为止所做的示例代码。

```
- (void)sliderValueDidChange:(UISlider *)sender {
    if((int)slider.value % 10 == 0) {
        positionLabel.text = [NSString stringWithFormat:@"%d",(int)slider.value];
        myValue =  (int)slider.value;
    }

    NSDictionary *dict =[NSDictionary dictionaryWithObjectsAndKeys:
                         [NSNumber numberWithInt:10], @"0",
                         [NSNumber numberWithInt:20], @"1",
                         [NSNumber numberWithInt:15], @"2",
                         [NSNumber numberWithInt:25], @"3",
                         [NSNumber numberWithInt:30], @"4",
                         [NSNumber numberWithInt:20], @"5",
                         [NSNumber numberWithInt:15], @"6",
                         nil];

    DSBarChart *chrt = [[DSBarChart alloc] initWithFrame:ChartView.bounds
                        color:[UIColor greenColor]
                        andDictionary:dict];
    chrt.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
    chrt.bounds = ChartView.bounds;
    [ChartView addSubview:chrt];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T06:27:01.277

[DSBarChart](http://dhilipsiva.com/DSBarChart/)还没有动态绑定到控件！但是有一个解决方法。当滑块的值更改被触发时，您可以从视图中删除现有的 DSBarchart 实例，使用更改的值创建一个新图表并将其再次添加到视图中。目前，DSBarChart 处于 pre-alpha 状态。它没有多大作用。有时间我会扩展功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T06:56:54.287

您可以做的一件事是在 barChart 上创建自定义视图。

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event

{

if (lineView) {
    [lineView removeFromSuperview];

    NSSet *allTouchesSet = [event allTouches]; 
    NSArray *allTouches = [NSArray arrayWithArray:[allTouchesSet allObjects]];   
    int count = [allTouches count];

    if (count  == 1) {

        UITouch *touch = [[event allTouches] anyObject];
        tapPoint = [touch locationInView:self];
        NSLog(@"tapPoint: %@",NSStringFromCGPoint(tapPoint));

        UIView *lineView = [[UIView alloc] initWithFrame:CGRectMake(tapPoint.x, 0.0, 1, 320.0)];
        lineView.backgroundColor = [UIColor whiteColor];
        [parentView addSubview:lineView];

    }
}

} 
```

# php - PHP 会话安全漏洞？

> ID：13466949
> 
> 赞同：2
> 
> 时间：2012-11-20T05:10:19.457
> 
> 标签：php, security, session

我是 php 编码的新手，基本上我正在创建一个用户面板，用户可以在其中登录并从那里访问他们的仪表板，让他们做事。

我正在使用 php 会话来执行此操作，并且基本上在我放置的仪表板的顶部：

```
session_start();
if(!session_is_registered(myusername)){
header("location:index.php"); 
```

这使得未登录的用户被重定向到 index.php。

问题是用户可以从仪表板执行某些命令，例如：/dashboard.php?reset=true

由于某种原因，执行这些命令不需要活动会话。任何人都可以转到 /dashboard.php?reset=true 并重置所有内容，而无需活动会话！

有谁知道如何修复这个允许人们这样做的安全漏洞？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T05:33:49.620

**快速回答：** 您可以将相同的代码放在 /dashboard.php 中吗？文件

**如果用户是管理员，**最好通过声明会话变量来验证。****

 **在重定向之前登录时：

```
session_start();
$_SESSION['is_admin']="yes" ; 
```

在“执行文件”中：

```
if(isset() && $_SESSION['is_admin'] == "yes")
{
  //do your thing
}
else
{
   echo : "you are not allowed to do that";
} 
```

更多安全提示：[链接](http://www.phpeveryday.com/articles/CHAPTER-5-SESSION-SECURITY-P804.html) 它将为您指出一些安全问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T05:26:28.053

可能是您使用的是 php 5.4.x

`session_is_registered`自 PHP 5.3.0 起已弃用，自 PHP 5.4.0 起已移除。

使用`isset($_SESSION['myusername'])`代替`session_is_registered`

**编辑**

`exit`应始终在从标头重定向之后放置，`die`也可以使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T05:17:13.900

I guess that by `reset` you mean password. Just get that part to ask them for the old password as well as the new old. And to stop robots use summat like CAPTCHA,

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T05:20:24.093

您需要在通话 后使用`die`或`exit`或其他方式终止。不会停止执行，所以即使它正在发送 Location: 重定向，它也会继续通过你的代码。`header()``header()`**

# mysql - mysql表记录的总和

> ID：13466950
> 
> 赞同：0
> 
> 时间：2012-11-20T05:10:22.403
> 
> 标签：mysql, sql, mysqli

我有一个名为的表`tbl_Question`和一个名为的列`INT_MARK`，它们对不同的问题有不同的标记。像这样：

```
VH_QUESTION     INT_MARK
-----------     --------
Q1              2
Q2              4 
```

我的问题是：如何获得总分为 50 的随机 20 题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T05:23:01.687

```
select VH_QUESTION, sum(INT_MARK) from tbl_Question
 group by VH_QUESTION
having sum(INT_MARK) > 50 
order by rand() limit 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T05:55:31.063

快速回答

```
SELECT * ,SUM(INT_MARK) as total_mark FROM tbl_Question  
GROUP BY VH_QUESTION
HAVING total_mark="50"
ORDER BY RAND()
LIMIT 5 
```

当没有答案时它返回 0 行，但每次找到一个问题都是随机的。

**您可以检查基准以查看是否可以更快地查询大型表。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T05:22:29.610

我认为[这个问题](https://stackoverflow.com/questions/9335184/find-combinations-that-meet-a-ranged-criteria)可能会对您有所帮助 - 似乎是一个非常相似的问题。

如果这不起作用，我会尝试将问题分为两部分：首先，您对您的问题进行组合。然后，您通过它的点总和过滤它们。

但是，我找不到如何生成表格的所有组合。我不知道那会有多难。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T05:24:52.913

```
select VH_QUESTION, sum(INT_MARK) from tbl_Question
group by VH_QUESTION
having sum(INT_MARK) >= 50 
order by rand() limit 20 
```

# wordpress - Wordpress：在搜索结果中包含 custom_fields（书籍作者）

> ID：13466951
> 
> 赞同：0
> 
> 时间：2012-11-20T05:10:26.017
> 
> 标签：wordpress

我使用 TwentyEleven 作为我的基本主题，我已经皮肤了。在我的 Content.php 文件中，搜索结果看起来像这样

```
<?php if ( is_search() ) : // Only display Excerpts for Search ?>
    <div class="entry-summary">
        <?php the_excerpt(); ?>
    </div><!-- .entry-summary -->
    <?php else : ?>
    <div class="entry-content">
        <?php the_content( __( 'Continue reading <span class="meta-nav">&rarr;</span>', 'twentyeleven' ) ); ?>
        <?php wp_link_pages( array( 'before' => '<div class="page-link"><span>' . __( 'Pages:', 'twentyeleven' ) . '</span>', 'after' => '</div>' ) ); ?>
    </div><!-- .entry-content -->
    <?php endif; ?> 
```

我正在尝试将“作者”元键/值对与帖子标题和帖子内容一起返回到我的搜索结果中，如下所示：

```
<?php if ( is_search() ) : // Only display Excerpts for Search ?>
    <div class="entry-summary">
        <?php the_excerpt(); ?>
    </div><!-- .entry-summary -->
    <?php else : ?>
    <div class="entry-content">
        <?php the_content( __( 'Continue reading <span class="meta-nav">&rarr;</span>', 'twentyeleven' ) ); ?>
        <?php get_post_meta(get_the_ID(), _wpsc_author, true); ?>
        <?php wp_link_pages( array( 'before' => '<div class="page-link"><span>' . __( 'Pages:', 'twentyeleven' ) . '</span>', 'after' => '</div>' ) ); ?>
    </div><!-- .entry-content -->
    <?php endif; ?> 
```

注意这一行：

```
<?php get_post_meta(get_the_ID(), _wpsc_author, true); ?> 
```

然而，这没有任何回报？

我已经阅读了大量关于 the_meta()、get_post_custom() 等主题的文章，但我尝试的任何方法似乎都没有奏效。

会欣赏一些见解吗？

**编辑：** 抱歉，我对“作者”部分不太清楚。作者是 post_meta 表中的自定义字段，以及“书籍类型”、书籍条件“出版年份”等。它不是文章作者。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T06:11:03.763

做一件事，只是在函数之前添加 echo 它将显示结果，如果函数的最后一个参数设置为 false ，它将为您提供一个数组，如果设置为 true 则为您提供一个字符串，因此请根据您的要求进行更改

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T06:15:42.573

你试过`the_author_meta();`吗？

你可以像这样使用它：`the_author_meta('user_email')`

请注意，此功能仅在循环内有效......但有一些方法可以解决它，但它们很糟糕。

可用键：

```
user_login
user_pass
user_nicename
user_email
user_url
user_registered
user_activation_key
user_status
display_name
nickname
first_name
last_name
description
jabber
aim
yim
user_level
user_firstname
user_lastname
user_description
rich_editing
comment_shortcuts
admin_color
plugins_per_page
plugins_last_view
ID 
```

# arrays - 如何评估多维数组的一部分与另一部分？foreach 和 in_array？

> ID：13466953
> 
> 赞同：1
> 
> 时间：2012-11-20T05:10:47.580
> 
> 标签：arrays, multidimensional-array, foreach, evaluation, scoring

对 PHP 的总 n00b 但非常感兴趣。现在正在努力使用深度多维数组作为单一形式的 php 测验的一部分，其中多维数组必须包含测验中每个问题的选项和答案。

这是数组的第一部分，我特别关注：

```
$quizquestions = array  ("question1" => array ("type" => "checkbox",
                                                    "text" => "question text goes here",
                                                    "options" => array ([1] => "option 1 goes here",
                                                                        [2] => "option 2 goes here",
                                                                        [3] => "option 3 goes here",
                                                                        [4] => "options 4 goes here",
                                                                        [5] => "option 5 goes here",
                                                                        [6] => "option 6 goes here"

                                                                        ), //end of options array
                                                    "answers" => array  ([1] => " right answer one here",
                                                                         [3] => "right answer 2",
                                                                         [6] => "right answer 3 here"
                                                                        ), //end of  answers array
                                                    "feedback" => "text that is returned after user answers"                                                    
                                                ), //end of question 1 array... question 2 begins, etc... 
```

在上面的示例中，问题 1 是一个复选框，有 3 个可能的答案被认为是正确的（1、3 和 6）。我一直在尝试嵌套的 foreach 循环来获取我的问题的选项，但似乎无法正确使用语法，或者弄清楚我需要使用什么函数来评估答案数组 - 你可以使用`in_array`on你已经通过几个`foreach`陈述喂养了一些东西；在多维数组上？

我一直希望在列表中打印出响应，在用户提交的响应旁边带有检查或 X，具体取决于它们是否在 answers 数组中。

这是我到目前为止一直在尝试的，但它没有返回任何东西。我已经尝试了一百万种变化，但可能只是在错误的轨道上......

```
foreach ($quizquestions as $question => $description) {
            foreach ($description as $option => $response) {
            if (in_array($option, $response['question1']['answers'])) {
    print "<li class='correct'>$options</li><br />\n";
    $score++;
    } else {
    print "<li class='incorrect'>$options</li><br />\n";
    } //end of if(in_array() ) 
    } //end of description foreach
} //end of quizquestion foreach 
```

有什么想法吗？请帮助一个新手！

# java - 如何存储具有可变数量属性的java对象

> ID：13466954
> 
> 赞同：3
> 
> 时间：2012-11-20T05:10:56.363
> 
> 标签：java, database

我看过[How to store data with dynamic number of attributes in a database](https://stackoverflow.com/questions/1444462/how-to-store-data-with-dynamic-number-of-attributes-in-a-database)，但它并没有完全回答我的问题。我正在实现的系统相当大，所以我会坚持我关心的对象：项目和类别。一个项目具有可变数量的属性，具体取决于它所属的类别。例如，属于“T-shirt”类别的项目将具有大小属性​​，而属于“汽车”类别的项目将具有模型属性。以管理员身份登录系统的人可以创建具有全新属性的新类别。在我的 Java 代码和数据库中构建它以使其工作的最佳方法是什么？

如果类别不是动态创建的，我会使用继承，这样我就有一个填充了特定属性的 TShirtItem 对象。但由于它是动态的，我很困惑。我看到了一个类似的问题，建议使用 Map 数据结构，但我不确定它是如何工作的......

我在顶部提到的问题会在数据库端建议我将有一个类别表、属性表和关系表，这些表将哪些属性与哪些类别相关联。这是有道理的。但是在考虑 Item 对象时，我又被绊倒了。我可以将唯一的 Category_ID 存储在 Item 表中，但是我将在哪里存储每个 Item 的属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T05:56:22.437

如果您受限于使用 SQL 数据库，并且需要对属性进行有效的类型感知（不仅仅是字符串）查询（例如列出所有尺寸在 4 到 8 之间的衬衫类别的项目），那么数据库的结构是困难的部分。Java 将随之而来。如果我理解正确，您将需要这样的东西：

```
categories:
  id : integer (pk)
  name : varchar

attributes:
  id : integer (pk)
  of_category : integer (fk -> categories.id)
  name : varchar
  type : char(1) // 'N' for number, 'S' for string, etc.

items:
  id : integer (pk)
  of_category : integer (fk -> categories.id)

number_values:
  value : number
  of_item : integer (pk, fk -> items.id)
  of_attribute : integer (pk, fk -> attributes.id)

string_values:
  value : varchar
  of_item : integer (pk, fk -> items.id)
  of_attribute : integer (pk, fk -> attributes.id)

... additional table for each attribute type 
```

现在对于示例查询：

```
select * from categories c, items i, attributes a, number_values v
where c.name = 'shirt' and
      a.of_category = c.id and
      a.name = 'size' and
      a.id = v.of_attribute and
      i.id = v.of_item and
      v.value between 4 and 8 
```

毛茸茸的多重连接是为运行时定义的属性付出的代价。

一旦您拥有正确的表格，将它们建模为 Java 地图就很简单了。上述结构中存在冗余：例如属性行中的字符“类型”字段。考虑使用触发器进行一致性检查。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T05:26:03.827

这是一个简单的java方法来做到这一点。在设计大型系统时，我总是建议着眼于更大的图景。这里的问题是动态改变属性。这并不容易，但是是的，这很有趣。

您的项目类的结构必须如下所示：

```
class Item{
   private String itemName; // I assume all items will have a name.
   private Map<ItemAttibuteName , Object> attributeMap ; // this will be a dynamic map.

   public Map<ItemAttibuteName, Object> getAttributeMap(){//getter for attribute map
       if( null == attributeMap)
          return new HashMap<String, Object>(); 
       return attributeMap ;

   }
   // you can synchronize this if needed
   public void setAttribute(ItemAttibuteName name, Object value){ 
       attributeMap.put(name, value);
   }

   public Object getAttribute(ItemAttibuteName name){ 
       return attributeMap.get(name);
   }
}

public enum ItemAttibuteName{
    SIZE,
    COLOUR        
} 
```

这种方法适合您的需求，此外，您可以使用工厂模式根据类别实例化项目并使其成为优雅的代码。

如果您仍有疑问，请返回。

**编辑：** 现在将有一种复杂的方法在编程时获取代码中元素的所有属性，因为您没有属性的 getter 或 setter。好吧，如果您可以在 Item 类中维护添加到 Item 的一组属性，或者您可以查询 item 类的 attributeMap 属性的 keySet，则该方法将有所帮助。

```
private Set<ItemAttibuteName> attributes; 
```

或者

```
attributeMap.keySet(); 
```

很高兴能帮助你

达拉姆

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T06:16:09.643

而不是Java，它更多的是设计级别的问题。您必须弄清楚定义数据库表的方法，这将帮助您找到 Java 对象......

让我们从类别开始......一个类别可能包含很多项目，一个项目将只属于一个类别（虽然我在实际场景中这不是一个正确的假设）。

所以在 DATABASE 中有一个名为 Category 的表。如果你想根据类别定义属性，那么有另一个名为 Category_attribute 的表，它将保存属性的默认值。

现在让我们移动到一个项目。一个项目属于一个类别，因此项目表将具有 category_key 以具有项目 n 类别的映射...项目将具有其存储在 ITEM_Attribute 表中的属性...

DB对象的简单形式必须有点如下所述

```
Category
C_Id
Name

Category_Attribute
CA_ID
Name
Default_value
Category_Id(FK)

Item
I_ID
Name
C_ID(FK)

Item_attribute
IA_ID
Ca_ID(FK from category_attribute table)
I_ID(FK from item table)
Value 
```

因此，每当您创建一个类别时，您都会要求用户为该类别定义相关属性。

在创建项目时，您将其映射到类别...并且与类别关联的属性应该使用默认值复制并映射到项目...

因此，您将能够轻松地创建 Java 对象...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T06:30:50.493

我想您可以通过在表中定义所有对象类型然后使用以下方法来构建您的数据。

你可以定义如下表：

*   OBJECT_TYPE

*   对象

*   OBJ_PROPERTY_DEF

*   OBJ_PROP_VALUES

例如。
在 OBJECT_TYPE 此处定义所有对象类型

object_type_code(pk) obj_name

```
4                              car
5                              t-shirt 
```

在对象

obj_code(pk) object_type_code(fk) obj_name

* * *

```
1           4       BMW  
2           4       Maruti  
3           4       Honda  

4           5       levis  
5           5       polo  
6           5       reebock 
```

在 OBJ_PROPERTY_DEF

定义与此表中的对象对应的所有属性。

注意：使用常量文件来定义属性类型会避免另一个表。希望当您更早地了解数据类型时。

obj_prop_code(pk) obj_code(fk) property_type property_name

------------- -------- ------------- -------------

```
12          6       8 (Integer)     size  
13          6       9 (String)      color  
14          6       10 (float)      weight  
15          6       11 (Boolean)        is_coloured  
16          6       9 (String)      comments  

17          3       9 (String)      model  
18          3       8 (Integer)     version  
19          3       9 (String)      color  
20          3       9 (String)      comments 
```

在 OBJ_PROP_VALUES U 中可以插入上述指定属性的值

obj_prop_val_code(pk) obj_prop_code(fk) obj_prop_value(VARCHAR) prop_value_sufix

----- ------------- -------------- ------ ------------

```
101             12          30              -  
102             13          green           -  
103             14          126            gms  
104             15          0               -
105             16          looks cool      -  

106             17          c532            -  
107             18          3.22            -  
108             19          black           -  
109             20          awesome car     - 
```

Reg Java 分类：

定义具有相应属性的所有类。例如：

*   对象类型数据

*   对象数据

*   对象属性定义数据

*   对象属性值数据

在 ObjectData.java 中

```
private ObjectTypeData          objType;//specifies the type
private List<ObjectPropertyValueData>   listProps; //will have all property values

//setter & getters and other req props 
```

* * *

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-13T07:28:04.447

我认为有些属性是主要的（尺寸，颜色......），有些是次要的（材料，重量......）。我将为此描述简化的[JDL](https://start.jhipster.tech/jdl-studio/)模式（当然存在另一个 Stock 实体，它存储具有颜色、大小的确切项目 - 用条形码标识 - 但为简单起见而省略）。这种设计将有所帮助，而不是硬编码对物品分类很重要的属性的某些部分。

### 使用此设计添加数据

1.  在此设计中创建数据 => 您正在使用它的属性、尺寸类型创建一些类别（例如鞋子 => 39,40,41...（选项）；Tshirt => S,M,L..., Iphone 7,8,X...) => 在此类别中的特定文章 - Iphone（在您的电子商务系统上以这种方式存在 Iphone）

2.  您将特定的 Iphone X（尺寸） - 颜色黑色添加到您的仓库或库存中，并带有额外的类别相关属性 => 材料、重量 .... 和系统为您生成的条形码。通过这种方式，您可以轻松地指定 Iphone 的大小和颜色（无需额外的 sql - 使用纯 ORM）（即使有额外的属性）

```
 enum CategoryTarget{
    F, M, K
}

entity Category{
    name String,
    imageUrl String,
    showHomepage Boolean,
    target CategoryTarget,
    accOrder Integer,
    isLastNode Boolean
}

entity Article{
    status Integer,
    name String,
    code String,
    rating Double,
    imageUrl String,
    isPopular Boolean
}

relationship ManyToOne{
    Category{parent} to Category,
    Article{category} to Category{article},
    Category{sizeType} to SizeType
}

relationship ManyToMany{
    Category{attribute} to Attribute{category}
}

entity Attribute{
    name String
}

entity AttributeOption{
    name String
}

relationship OneToMany{
    Attribute{attributeOption} to AttributeOption{attribute}
}

entity SizeType{
    name String
}

entity ArticleSize{
    name String,
    accOrder Integer
}

relationship OneToMany{
    SizeType{articleSize} to ArticleSize{sizeType}
}

relationship ManyToMany{
    Article{attributeOption} to AttributeOption{article}
} 
```

# msbuild - 对于 F# 类型提供程序，如何使相对路径作为静态参数工作？

> ID：13466957
> 
> 赞同：1
> 
> 时间：2012-11-20T05:11:23.300
> 
> 标签：msbuild, f#, type-providers

有没有一种好方法可以在编程时为类型提供程序和在构建时为 msbuild 使用相对路径？

```
//type AddressBookProto = Froto.Gen.ProtoGen< @"test\addressbook1.proto"> // VS GUI
//type AddressBookProto = Froto.Gen.ProtoGen< @"..\test\addressbook1.proto"> // Build
type AddressBookProto = Froto.Gen.ProtoGen< @"C:\Users\taggartc\froto\froto\test\addressbook1.proto"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T05:20:23.847

你可以使用`#if`

```
#if DEBUG //or similar constant
    type AddressBookProto = Froto.Gen.ProtoGen< @"test\addressbook1.proto">
#else
    type AddressBookProto = Froto.Gen.ProtoGen< @"..\test\addressbook1.proto">
#endif 
```

现在您只需要定义适当的条件。

# javascript - 我们可以将 hoverintent 插件两次应用到同一个元素吗？(jQuery)

> ID：13466959
> 
> 赞同：1
> 
> 时间：2012-11-20T05:11:36.300
> 
> 标签：javascript, jquery, jquery-ui, hoverintent

我在“a”标签上使用hoverintent插件，其中包含图像。

我想使用它两次，因为当一个悬停在“a”标签上但间隔不同时，有两件事要做。

```
//HoverIntent1
$("a.classname").hoverIntent({   
 sensitivity: 4, 
 interval: 300, 
 over: functionName,   
 timeout: 300,
 out: functionName
})

//HoverIntent2
$("a.classname").hoverIntent({   
  sensitivity: 3, 
  interval: 10, 
  over: functionName, 
  timeout: 10,
  out: functionName
}) 
```

当我运行它时，它只在一个悬停意图中执行功能，而不是两者，我试图在网上找到，但找不到令人满意的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T11:18:36.493

将“a”标签包装在另一个元素中，例如 Div 或 Span，然后绑定到该元素。

# android - 互联网操作 httpclient 或 HttpURLConnection 期间应用程序冻结

> ID：13466960
> 
> 赞同：0
> 
> 时间：2012-11-20T05:11:44.617
> 
> 标签：android, httpclient, httpurlconnection

我的应用程序有一个小部件。我使用 HttpURLConnection 下载内容（每 15 分钟自动下载一次）。下载内容通常需要 10 秒。

问题是当应用程序在使用中时，它会在后台进行更新操作时冻结/挂起。我正在使用我的小部件类中 updateAppWidget 方法的 handler.postDelayed 。即使我使用的是后台线程，应用程序也会暂时冻结。我想也许 httpConn.connect(); 可能是问题并使用了 DefaultHttpClient。还是一样的冻结效果。

有人可以对这个问题提供一些见解吗？

谢谢...

从使用此处理程序的小部件类...

处理程序处理程序 = 新处理程序（）；

handler.postDelayed(new Runnable() {

```
 public void run() {

    //download and update widget UI here.....   

   } 
```

}, 1000);

```
private String download1(String urlString) {

InputStream in = null;
byte[] data = null;
URLConnection conn = null;
try
 {
    URL url = new URL(urlString);
    conn = url.openConnection();

    if ((conn instanceof HttpURLConnection))
    {
        HttpURLConnection httpConn = (HttpURLConnection) conn;
        httpConn.setConnectTimeout(30000);
        httpConn.setReadTimeout(30000);
        httpConn.setAllowUserInteraction(false);
        httpConn.setInstanceFollowRedirects(true);
        httpConn.setRequestMethod("GET");
        httpConn.connect();

        if (httpConn.getResponseCode() == HttpURLConnection.HTTP_OK)
        {
            in = httpConn.getInputStream();
            ByteArrayOutputStream baos = new ByteArrayOutputStream();
            int c;
            while((c = in.read()) > -1){
                        baos.write(c);
        }
                    data = baos.toByteArray();
                    baos.close();
                    in.close();
                    String str = new String(data);
                    System.out.println(str);
                    httpConn.disconnect();
                    ((HttpURLConnection) conn).disconnect();
                    return str;
        }
        else
            {
                    httpConn.disconnect();
                    ((HttpURLConnection) conn).disconnect();
            return("Error: Invalid data");
    }

    }
}
catch (Exception ex)
{
    Log.e("TAG",ex.getMessage().toString());
    return("Error: No connection");
}
finally
{
    try
    {
        if (conn != null)
        {
            conn = null;
        }
        if (in != null)
        {
            in.close();
            in = null;
        }

    }catch(IOException ex)
    {
        return("Error: "+ex.getMessage());
    }
}
return null; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T05:23:35.927

当您使用`handler.postDelayed`时`Runnable`，您发布的 将在 UI 线程上运行。您需要创建一个`Thread`（或一个`AsyncTask`，或一个`ScheduledThreadPoolExecutor`等）以使网络活动脱离 UI 线程。

如果没有看到您的代码，很难就如何重构它提供具体建议。关键是 a`Handler`不会*将*工作移出 UI 线程。事实上，它通常用于完全相反的情况：作为后台线程在 UI 线程上运行某些东西的一种方式。

# android - 在将事件添加到 Android 日历之前检查事件是否存在

> ID：13466963
> 
> 赞同：3
> 
> 时间：2012-11-20T05:12:30.473
> 
> 标签：android, events, calendar, android-4.0-ice-cream-sandwich, querying

我的应用程序中有一个事件列表。侧面的按钮可让用户将事件日期和时间添加到他/她的日历中。我使用日历意图将用户重定向到相应日期和时间的 android 日历。现在，在用户将事件添加到他的日历后，我想禁用与他/她已经添加的事件相对应的“添加事件”按钮（因此用户避免再次添加相同的事件）。我怎样才能做到这一点？我已经完成了 android 4.0 的新日历 API，但我无法实现我想要的。

基本上我想要的是避免在用户日历中重复输入同一事件。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-20T11:00:16.503

您应该测试是否存在此事件的实例。请参阅[Android 的 CalendarContract.Instances 类的文档](https://developer.android.com/reference/android/provider/CalendarContract.Instances.html)。

在这种情况下，尤其是[第二种查询方法](https://developer.android.com/reference/android/provider/CalendarContract.Instances.html#query%28android.content.ContentResolver,%20java.lang.String%5B%5D,%20long,%20long,%20java.lang.String%29)应该会有所帮助。

这个示例是一些代码，我在我的[博客文章中发布了有关 CalendarContract 提供程序的内容](http://www.grokkingandroid.com/androids-calendarcontract-provider/)- 根据您的需要稍作修改：

```
long begin = // starting time in milliseconds
long end = // ending time in milliseconds
String[] proj = 
      new String[]{
            Instances._ID, 
            Instances.BEGIN, 
            Instances.END, 
            Instances.EVENT_ID};
Cursor cursor = 
      Instances.query(getContentResolver(), proj, begin, end, "\"Your event title\"");
if (cursor.getCount() > 0) {
   // deal with conflict
} 
```

请注意：自纪元以来，时间始终以 UTC 毫秒为单位。因此，您可能必须根据用户的时区进行调整。

最后一个参数应该包含您添加到日历中的事件的标题。保留引号 - 否则 Android 会查找“您的”或“事件”或“标题”！

并且不要忘记包含必要的权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-07-11T20:42:31.120

Instances.query 不建议在 UI 线程上运行，但可以通过确保最小化开始和结束持续时间来有效地完成。

搜索字符串将搜索所有值，而不仅仅是标题，因此需要添加一个循环来检查确切的字段值。

```
public boolean eventExistsOnCalendar(String eventTitle, long startTimeMs, long endTimeMs) {
  if (eventTitle == null || "".equals(eventTitle)) {
    return false;
  }
  if (ActivityCompat.checkSelfPermission(this, Manifest.permission.READ_CALENDAR) != PackageManager.PERMISSION_GRANTED) {
    return false;
  }
  // If no end time, use start + 1 hour or = 1 day. Query is slow if searching a huge time range
  if (endTimeMs <= 0) {
    endTimeMs = startTimeMs + 1000 * 60 * 60; // + 1 hour
  }

  final ContentResolver resolver = mContext.getContentResolver();
  final String[] duplicateProjection = {CalendarContract.Events.TITLE}; // Can change to whatever unique param you are searching for
  Cursor cursor =
      CalendarContract.Instances.query(
          resolver,
          duplicateProjection,
          startTimeMs,
          endTimeMs,
          '"' + eventTitle + '"');

  if (cursor == null) {
    return false;
  }
  if (cursor.getCount() == 0) {
    cursor.close();
    return false;
  }

  while (cursor.moveToNext()) {
    String title = cursor.getString(0);
    if (eventTitle.equals(title)) {
      cursor.close();
      return true;
    }
  }

  cursor.close();
  return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-07T04:42:59.283

我已经使用以下方法来检查它......我传递 event_id 来检查它是否在日历中......

```
public boolean isEventInCal(Context context, String cal_meeting_id) {

     Cursor cursor = context.getContentResolver().query(
     Uri.parse("content://com.android.calendar/events"),
       new String[] { "_id" }, " _id = ? ",
       new String[] { cal_meeting_id }, null);

           if (cursor.moveToFirst()) {
                   //Yes Event Exist...
      return true;
     }
     return false;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-03T22:26:36.223

请检查一下，这可能会有所帮助：

```
private static boolean isEventInCalendar(Context context, String titleText, long dtStart, long dtEnd) {

    final String[] projection = new String[]{CalendarContract.Instances.BEGIN, CalendarContract.Instances.END, CalendarContract.Instances.TITLE};
    Cursor cursor = CalendarContract.Instances.query(context.getContentResolver(), projection, dtStart, dtEnd);
    return cursor != null && cursor.moveToFirst() && cursor.getString(cursor.getColumnIndex(CalendarContract.Instances.TITLE)).equalsIgnoreCase(titleText);
} 
```

# objective-c - 在 Objective-C 中格式化字符串

> ID：13466965
> 
> 赞同：0
> 
> 时间：2012-11-20T05:13:11.787
> 
> 标签：objective-c, ios5, nsstring

我收到来自 web 服务的响应，如下所示的字符串 -

> 品牌=公司%%samsung@@modelnumber=webmodel%%GT1910@@Sim=Single%%SingleSim@@3g=yes%%Yes@@wifi=yes%%yes（最高2.1 mbps）

我很困惑将我的回复格式化如下 -

```
brand=samsung
modelnumber=GT1910
Sim=SingleSim
3g=Yes
wifi=(2.1 mbps upto) 
```

我试图删除特殊字符`(@@ and %%)`

```
specialString = [specialString stringByReplacingOccurrencesOfString:@"@@" withString:@"\n"];
specialString = [specialString stringByReplacingOccurrencesOfString:@"%%" withString:@"\n"];
specialString= [specialString stringByReplacingOccurrencesOfString:@" " withString:@""]; 
```

我的输出是 -

```
brand=company
samsung
modelnumber=webmodel
GT1910
Sim=Single
SingleSim
3g=yes
Yes
wifi=yes
(2.1 mbps upto) 
```

如何删除不需要的单词。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T05:28:35.603

您不能使用简单的查找和替换，因为您不需要原始字符串的某些部分。

未经测试，但这可能会起作用：

```
NSArray *parts = [specialstring componentsSeparatedByString:@"@@"];
NSMutableArray *result = [[NSMutableArray alloc] init];
for(NSString *piece in parts) {
    NSArray *pairs = [piece componentsSeparatedByString:@"="];
    if([pairs count] > 1) {
        NSString *key = [pairs objectAtIndex:0];
        NSString *values = [pairs objectAtIndex:1];
        NSArray *avalues = [values componentsSeparatedByString:@"%%"];
        [result addObject:[NSString stringWithFormat:@"%@=%@", key, [avalues lastObject]]];
    }
}

NSLog(@"%@", [result componentsJoinedByString:@"\n"]);
// [result release]; // Uncomment if ARC is turned off 
```

首先拆分`@@`并迭代数组。然后拆分`=`以获取左侧的键（索引 0）。取右侧（索引 1）并拆分`%%`并使用最后一个值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T05:45:12.540

像下面这样修剪它会起作用

```
NSString *strRes = @"brand=company%%samsung@@modelnumber=webmodel%%GT1910@@Sim=Single%%SingleSim@@3g=yes%%Yes@@wifi=yes%%yes(2.1 mbps upto)";
strRes = [strRes stringByReplacingOccurrencesOfString:@"=" withString:@"--"];
strRes = [strRes stringByReplacingOccurrencesOfString:@"@@" withString:@"\n"];
NSRange rangeForTrim;
while ((rangeForTrim = [strRes rangeOfString:@"--[^%%]+%%" options:NSRegularExpressionSearch]).location != NSNotFound)
    strRes = [strRes stringByReplacingCharactersInRange:rangeForTrim withString:@"="];

NSLog(@"%@",strRes); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T05:21:26.963

好吧，我不能马上写代码，但这是你必须做的：

*   全部替换`%%`为`(space)`
*   全部替换`@@`为`\n`
*   `=`删除和之间的所有单词`(space)`

# java - 此视频中使用了哪些 IntelliJ 插件（提示跳转到特定行）？

> ID：13466967
> 
> 赞同：-1
> 
> 时间：2012-11-20T05:13:38.963
> 
> 标签：java, intellij-idea, ide, editor

视频可以在以下位置观看：

[http://www.youtube.com/watch?v=wCVwdvufTds](http://www.youtube.com/watch?v=wCVwdvufTds)

我想知道视频中使用了什么插件来启用`hint`每一行，以便他可以一键跳转到任何一行。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-20T05:22:11.703

[在这里](http://plugins.intellij.net/plugin?pr=idea&pluginId=6311)，来自上传视频的同一个人。

# css-float - 如何使用 css 使表格与其他内容并排显示

> ID：13466971
> 
> 赞同：0
> 
> 时间：2012-11-20T05:14:21.053
> 
> 标签：css-float

我是这方面的新手，所以请任何帮助将不胜感激。我想要一个像 www.bimslivinggardens.com 这样的页面，左边是图片幻灯片，右边是信息。请问我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:34:58.203

阅读[http://www.vanseodesign.com/css/3-column-layout-code/](http://www.vanseodesign.com/css/3-column-layout-code/) 它将解释如何正确设置 3 列布局。

但是，我会将 p 更改为 div，因为我觉得 p 在那里被滥用。

# oracle - 将 oracle 查询转换为 nhibernate

> ID：13466976
> 
> 赞同：0
> 
> 时间：2012-11-20T05:14:44.840
> 
> 标签：oracle, nhibernate

**甲骨文查询：**

select col1,col2 from table1 where col1=12345 order by col2 desc nulls last;

我正在使用流利的nhibernate。所以我有table1的映射类。我正在使用类似这样的代码来使用 nhibernate 进行排序。

```
criteria
.AddOrder(Order.Desc(
Projections.Cast(
             NHibernateUtil.Decimal, 
             Projections.Property("col1")))); 
```

我必须在上面的 nibhernate 排序代码中**最后添加空值。**有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T12:30:00.807

这是一些解决方法的已知限制： [https ://nhibernate.jira.com/browse/NH-1743](https://nhibernate.jira.com/browse/NH-1743)

与 Hibernate 类似： [https ://hibernate.onjira.com/browse/HHH-465](https://hibernate.onjira.com/browse/HHH-465)

# android - 单独签署apk（eclipse或命令行）-（不是直接来自eclipse项目）

> ID：13466977
> 
> 赞同：0
> 
> 时间：2012-11-20T05:14:55.433
> 
> 标签：android

我正在 eclipse 中做我的 android 项目。我可以使用 Eclipse 轻松地使用我的密钥库对应用程序进行签名。但是，如果我将未签名的 APK（不是项目，只是 apk）和密钥库导出到另一台计算机，他能否使用 eclipse 或命令行对其进行签名。我尝试使用命令行：

```
 $ jarsigner -verbose -sigalg MD5withRSA -digestalg SHA1 -keystore my-release-key.keystore my_application.apk alias_name 
```

但是我收到了一些像这样的 zip 大小错误：

```
 jarsigner: unable to sign jar: java.util.zip.ZipException: invalid entry compressed size (expected 7395 but got 7498 bytes) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T05:35:39.440

[jarsigner：无法签名 jar：java.util.zip.ZipException：无效的条目压缩大小（预期为 463 但得到 465 字节）](https://stackoverflow.com/q/5089042/1321873)为我工作：

这是你应该做的

将 .apk 文件重命名为 .zip 解压 .zip 文件并删除 META-INF 文件夹 再次压缩文件夹并将其重命名为 .apk 对 apk 签名：

# mysql - 一台主机上有多个从属实例的mysql复制，中继箱不断变化

> ID：13466979
> 
> 赞同：2
> 
> 时间：2012-11-20T05:14:59.457
> 
> 标签：mysql, replication, master-slave

我有 2 个从属 mysql 实例在主机上运行，​​它从不同主机上的主机复制数据。所有实例都是mysql 5.6。从属实例的中继箱日志不断变化，即使主实例没有变化。以下是`show slave status\G`slave1的：

```
 Slave_IO_State: Waiting for master to send event
          Master_Log_File: mysql-bin.000008
      Read_Master_Log_Pos: 210424
           Relay_Log_File: mysqld1-relay-bin.000878
            Relay_Log_Pos: 354
    Relay_Master_Log_File: mysql-bin.000008
         Slave_IO_Running: Yes
        Slave_SQL_Running: Yes
                     ... : ... 
```

过了一会儿，slave1 的 Relay_Log_File 发生了变化，

```
 Slave_IO_State: Waiting for master to send event
          Master_Log_File: mysql-bin.000008
      Read_Master_Log_Pos: 210424
           Relay_Log_File: mysqld1-relay-bin.001374
            Relay_Log_Pos: 354
    Relay_Master_Log_File: mysql-bin.000008
         Slave_IO_Running: Yes
        Slave_SQL_Running: Yes
                     ... : ... 
```

但没有对 master、slave1 或 slave2 进行任何更改。slave2 也发生了同样的事情。我怀疑这两个从站以某种方式共享了他们不应该共享的配置/设置，但我无法确定出了什么问题。my.cnf 文件有

```
# The MySQL server mysqld1
[mysqld1]
user            = mysql
port            = 3301
pid-file        = /usr/local/mysql1/data/mysqld1.pid
socket          = /tmp/mysql1.sock
datadir         = /usr/local/mysql1/data
log-bin=mysql-bin
binlog_format=mixed
gtid-mode=on
disable-gtid-unsafe-statements=true
log-slave-updates=true # needed to enable gtid
sync-master-info = 1
master-info-repository=TABLE
relay-log-info-repository=TABLE
server-id       = 2
innodb_data_home_dir = /usr/local/mysql1/data
innodb_log_group_home_dir = /usr/local/mysql1/data
innodb_flush_log_at_trx_commit = 1
sync_binlog=1

[mysqld2]
user            = mysql
port            = 3302
pid-file        = /usr/local/mysql2/data/mysqld2.pid
socket          = /tmp/mysql2.sock
datadir         = /usr/local/mysql2/data
log-bin=mysql-bin
binlog_format=mixed
gtid-mode=on
disable-gtid-unsafe-statements=true
log-slave-updates=true # needed to enable gtid
sync-master-info = 1
master-info-repository=TABLE
relay-log-info-repository=TABLE
server-id       = 3
innodb_data_home_dir = /usr/local/mysql2/data
innodb_log_group_home_dir = /usr/local/mysql2/data
innodb_flush_log_at_trx_commit = 1
sync_binlog=1 
```

有没有人遇到过这样的事情？以这种方式运行多个实例是否需要自定义命名中继日志？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T17:59:18.453

事实证明，两个从站的 log-bin 名称需要不同。我已经把它们从

```
[mysqld1]
log-bin=mysql-bin
[mysqld2]
log-bin=mysql-bin 
```

至

```
[mysqld1]
log-bin=slave1-bin
[mysqld2]
log-bin-slave2-bin 
```

[使用 MySQL Utilities 轻松实现复制和自动故障转移](http://www.clusterdb.com/mysql/replication-and-auto-failover-made-easy-with-mysql-utilities/)的示例配置提供了有关此方面的提示。

# html - 两个 CSS 问题 - 删除 wordpress 上的 H1 换行符

> ID：13466981
> 
> 赞同：1
> 
> 时间：2012-11-20T05:15:30.660
> 
> 标签：html, css, wordpress

这是我的 h1 问题：[链接已删除] 我需要 h1 完美地融入段落以实现 seo 目的。标签在长岛附近。

我将 css 设置为 h1{display: inline;padding:0;margin:0;font-weight:normal;font-size:17px;} 仍然打破......之前。我尝试在“< p >”中添加类似的东西，但它完全消除了所有的休息时间，我仍然需要一些休息时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T06:26:39.897

H1 和 P 都是块级元素。为了得到你想要的效果，P 和 H1 都需要将它们的样式设置为`display: inline;`.

尝试：

CSS：

```
.inline { display: inline; } 
```

HTML：

```
<p class="inline"> Welcome! My name is Nancy Lewis and I’m from </p>
<h1 class="inline"> Long Island </h1>
<p class="inline"> , New York. </p> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T06:36:23.550

你可以只使用H1。使用跨度在 h1 中设置特定单词的样式。

```
<h1>Welcome! My name is Nancy Lewis and I’m from <span>Long Island</span></h1> 
```

然后你可以随心所欲地设计长岛这个词

```
h1 span {font-weight:700} /*or whatever you like*/ 
```

对于第二个示例，尝试为您的身体设置边距

```
body {margin:0} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T02:19:56.310

因此，您需要将`h1`其紧随其后的`p`元素内联。简单的！

`h1`: _

```
h1 {
    display: inline;
} 
```

紧随其后的是`p`：

```
h1 + p {
    display: inline;
} 
```

上面有什么`+`？它是[相邻的兄弟选择器](http://www.w3.org/TR/CSS2/selector.html#adjacent-selectors) `+`。来吧，点击链接。

就是这样！但是，当然，没有必要重复自己。将两者结合在一起，您将得到：

```
h1,
h1 + p {
    display: inline;
} 
```

这是一个小提琴（实际上是一个“tinkerbin”）：[http ://tinkerbin.com/jy3uoWX9](http://tinkerbin.com/jy3uoWX9)

# wordpress - 如何在wordpress中为帖子创建模板

> ID：13466984
> 
> 赞同：3
> 
> 时间：2012-11-20T05:15:37.103
> 
> 标签：wordpress, custom-post-type

我知道如何为特定的 wordpress 页面创建自定义模板。但是，我想为特定的自定义帖子类型创建一个模板。这可能吗？如果可能，我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T05:45:45.470

要为自定义帖子类型添加自定义模板，您可以使用`single-{posttype}.php`模板。您可以查看[模板层次结构](http://codex.wordpress.org/File%3aTemplate_Hierarchy.png)图以获取更多详细信息。

例如，如果您的帖子类型称为`books`，则模板的文件名应为`single-books.php`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T05:57:48.593

## **如果您创建了自定义帖子类型**

如果您已经创建了自定义帖子类型，那么您需要创建一个模板，该模板的名称将与自定义帖子类型相呼应，例如，如果您创建了自定义帖子类型“产品”，那么您将创建一个名为 product.php 的模板您的主题目录并显示 [您的自定义帖子类型的特定帖子您将创建另一个名为 single-product.php 的](http://codex.wordpress.org/Post_Types#Single_template)模板此模板将用于显示您的自定义帖子并记住您创建的任何自定义帖子将使用相同的名称命名您的自定义帖子类型模板，不要忘记在开头添加单个。

## 特定帖子或特定类别帖子的模板

并且要在不同的模板中显示特定的帖子并使用不同的模板来显示特定类别的帖子，您可以[点击此链接](http://www.wpbeginner.com/wp-themes/create-custom-single-post-templates-for-specific-posts-or-sections-in-wordpress/)。

# qml - 根据用户在 Qt/QML 中提供的输入对列表框项目进行排序

> ID：13466986
> 
> 赞同：4
> 
> 时间：2012-11-20T05:15:41.033
> 
> 标签：qml

我正在尝试根据用户提供的输入对 QML 列表视图中的项目列表进行排序。我已经编写了排序逻辑，但无法设置排序模型。似乎排序后的模型没有分配给原始 ListView 使用的实际模型。请查看代码，如果我做错了什么，请告诉我。

//main.qml

```
import QtQuick 1.1
Rectangle {
     id: page
     width: 500; height: 400
     color: "#edecec"
     ModifiedForSorting {
         id: search; focus: true
     }
 } 
```

//ModifiedForSorting.qml

```
import QtQuick 1.1

FocusScope {
    id: focusScope
    width: 250; height: 28
    Text {
        id: typeSomething
        anchors.fill: parent; anchors.leftMargin: 8
        verticalAlignment: Text.AlignVCenter
        text: "Type here..."
        color: "gray"
        font.italic: true
    }

    MouseArea {
        anchors.fill: parent
        onClicked: { focusScope.focus = true; textInput.openSoftwareInputPanel(); }
    }

    TextInput {
        id: textInput
        anchors { left: parent.left; leftMargin: 8;rightMargin: 8; verticalCenter: parent.verticalCenter }
        focus: true
        selectByMouse: true

        onTextChanged: {
            //update list as per input from user
            container.getSortedItems(textInput.text);
            color = "red"
        }
    }
    states: State {
        name: "hasText"; when: textInput.text != ''
        PropertyChanges { target: typeSomething; opacity: 0 }
    }

    transitions: [
        Transition {
            from: ""; to: "hasText"
            NumberAnimation { exclude: typeSomething; properties: "opacity" }
        },
        Transition {
            from: "hasText"; to: ""
            NumberAnimation { properties: "opacity" }
        }
    ]

    Rectangle {
        id: container
        width: 500; height: 400
        color: "#343434"
        anchors.top: textInput.bottom
        ListModel {
            id: namesModel

            ListElement {
                title: "Mumbai"
            }
            ListElement {
                title: "Pune"
            }
            ListElement {
                title: "Bangalore"
            }
            ListElement {
                title: "Kolkata"
            }
            ListElement {
                title: "Hyderabad"
            }
            ListElement {
                title: "Nagpur"
            }
            ListElement {
                title: "Thane"
            }
        }

        // The delegate for each item in the model:
        Component {
            id: listDelegate

            Item {
                id: delegateItem
                width: listView.width; height: 55
                clip: true

                Row {
                    anchors.verticalCenter: parent.verticalCenter
                    spacing: 10
                    Column {
                        anchors.verticalCenter: parent.verticalCenter

                        Text {
                            text: title
                            font.pixelSize: 15
                            color: "white"
                        }
                    }
                }
            }
        }

        function showAll() {
            var filteredItems = "";
            for (var i = 0; i < namesModel.count; i++) {

                filteredItems = filteredItems + namesModel.get(i).title;
            }
            listView.model = filteredItems;
            //namesModel = filteredItems;
        }

        function getSortedItems(searchTerm) {
            var filteredItems = "";
            if (searchTerm === "") {
                showAll();
                return;
            }

            for (var i = 0; i < namesModel.count; i++) {
                if (namesModel.get(i).title.indexOf(searchTerm) === 0) {
                    filteredItems = filteredItems + namesModel.get(i).title;
                }
            }
            listView.model = filteredItems;
            //namesModel = filteredItems;
        }

        // The ListView:
        ListView {
            id: listView
            anchors.fill: parent; anchors.margins: 20
            model: namesModel
            delegate: listDelegate
        }
    }
} 
```

如上所示，我猜排序后的模型没有重新分配给 ListView。我不确定。请帮帮我。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T14:43:59.000

看看你的代码，我猜你的意思是**过滤**项目，而不是**排序**。

在您的函数中，您尝试为属性分配一个*字符串*值。您可能会在应用程序日志中收到明确的错误。`filteredItems``listView.model`

要解决此错误，您可以使用辅助`ListModel`工具并仅使用适合您过滤器的项目填充它。尝试将`listDelegate`组件下方的所有代码替换为：

```
 ListModel{ id: filteredModel }

    function getSortedItems(searchTerm) {

        // Clear the aux model
        filteredModel.clear();

        // Add fitting items to the aux model
        for (var i = 0; i < namesModel.count; i++) {
            if (searchTerm === "" || namesModel.get(i).title.indexOf(searchTerm) === 0) {
                filteredModel.append(namesModel.get(i));
            }
        }

    }

    // The ListView:
    ListView {
        id: listView
        anchors.fill: parent; anchors.margins: 20
        model: filteredModel
        delegate: listDelegate
    } 
```

# php - yii“试图获取非对象的属性”在服务器上但不在我的机器上

> ID：13466988
> 
> 赞同：0
> 
> 时间：2012-11-20T05:15:51.257
> 
> 标签：php, yii, wampserver

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T06:14:38.413

如果变量未初始化，或者对象未创建并尝试获取对象的属性错误将同时显示在服务器和本地机器上。用于在访问对象集的属性之前进行防御性编码透视检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T06:12:36.903

除非在您的开发系统上禁用了错误报告，否则在使用未初始化的变量时应该会收到错误消息。
检查错误报告没有被禁用，或者**@**没有被使用；如果不是这种情况，则该变量可能在被调用之前已在单独的文件中初始化；验证所需的所有文件都托管在服务器上。

希望能帮助到你。

顺便说一句，如果您使用 PHP 和 MySQL，那么使用 Linux（任何风格）作为您的操作系统，并使用 Apache 作为您的 Web 服务器是很有意义的；它们经过构建和优化，可与 PHP 和 MySQL 完美搭配。

# java - How To Scale Canvas In Android

> ID：13466989
> 
> 赞同：0
> 
> 时间：2012-11-20T05:15:54.247
> 
> 标签：java, android, android-canvas

I am writing a android game using Canvas as the way to draw everything, the problem is that when i run it on different android phones the canvas dosn't change size i tried using canvas.scale() but that didn't make a i difference. The code i use for drawing is ...

```
public void draw( Canvas c, int score )
{   
    Obstical2[] obstmp = Queue.toArray(this.o);
    Coin[] cointmp = QueueC.toArray(this.c);

    for( int i = 0; i < obstmp.length; i++ )
    {
        obstmp[i].draw(c);
    }

    for( int i = 0; i < cointmp.length; i++ )
    {
        cointmp[i].draw(c);
    }
    c.drawText(String.format("%d", score ), 20, 50, textPaint);

    if( isWon && isStarted ) c.drawText("YOU WON", 20, 400, resPaint);
    else if( isLost && isStarted ) c.drawText("YOU LOST", 20, 400, resPaint);
} 
```

The function above calls the draw functions for the entity's on the screen, theses function are as follows

Draw Function For Obstical :

```
public void draw( Canvas c )
{
    Log.i("D", "COIN");
    coin.draw(c);
} 
```

Draw Function For Coin :

```
public void draw( Canvas c )
{
    obstical.draw(c);
} 
```

How could i make the canvas re-size to it would look the same on any screen ?

Cheers Daniel

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T05:31:48.263

覆盖 onMeasure() 函数并计算屏幕宽度和屏幕高度，然后计算比例。

```
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {     
        super.onMeasure(widthMeasureSpec, heightMeasureSpec);
        screen_width = MeasureSpec.getSize(widthMeasureSpec);
        screen_height= MeasureSpec.getSize(heightMeasureSpec);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T05:41:39.477

试试这个，这给了你改变的屏幕尺寸

```
@Override
protected void onSizeChanged(int w, int h, int oldw, int oldh) {
    // TODO Auto-generated method stub
      super.onSizeChanged(w, h, oldw, oldh);
      screen_width = w;
      screen_height= h;
} 
```

# c# - 使用反射记录错误的最佳方法

> ID：13466991
> 
> 赞同：1
> 
> 时间：2012-11-20T05:16:02.740
> 
> 标签：c#, visual-studio-2010, .net-4.0

```
Log ( MethodBase.GetCurrentMethod().DeclaringType.Name + MethodBase.GetCurrentMethod.Name + "blah blah..."  ); 
```

返回类似的东西

> MyClass.ThisMethod ：错误是胡说八道..

现在，

1)`MethodBase.GetCurrentMethod().DeclaringType.Name`能够投掷`NullReferenceException`. 如何避免这种情况？或者知道当前方法所在的类的好方法是什么？

2）有没有其他方法可以达到同样的效果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-12T01:59:52.960

对于错误事件日志，甚至对于应用程序函数或方法完成日志，反射调用的性能通常不是问题。特别是因为通常最好使用反射调用而不是在每个类和方法中都有一个命名字符串。

对 MethodBase 的调用不应用于任何性能关键部分。在这些情况下，反射值应该在使用之前缓存，如果可能的话，或者使用替代对象，例如前面提到的命名字符串。

例如。日志（m_zClassName，zMethodName，“方法 Wizbot 完成。”）；

**基准**

在我的 i7-2600k 的基准测试中，每次调用 MethodBase.GetCurrentMethod() 大约需要 1600 纳秒（0.0016 毫秒）。

**改进**

话虽如此，OP 发布的代码可以通过*不*调用 MethodBase.GetCurrentMethod()*两次*来显着提高性能，因为我们想要的是同一个对象的两个成员。

两个 MethodBase.GetCurrentMethod() 调用中的 OP 代码（带有一些格式）= ~3200ns：

```
Log(String.Concat(MethodBase.GetCurrentMethod().DeclaringType.Name, ".", MethodBase.GetCurrentMethod().Name, " : Error is blah blah"); 
```

只需在一次 MethodBase.GetCurrentMethod() 调用中将 MethodBase 对象的引用传递给事件日志写入方法 = ~1600ns，它的执行速度就可以提高一倍：

```
EventLogWrite(MethodBase.GetCurrentMethod(), "Error is blah blah"); 
```

以及事件日志的写法：

```
public static void EventLogWrite(MethodBase methodBase, string zErrorMessage)
{
    string classname = methodBase.DeclaringType.Name;
    string methodname = methodBase.Name;

    string logmessage = String.Concat(classname, ".", methodname, " : ", zErrorMessage);

    // ... write message to event log file
} 
```

此外，通过这种设计，您无需在调用事件日志写入方法的每个实例中都键入所有 String.Concat 和字段分隔符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T15:56:13.393

我们可以使用堆栈跟踪

```
Using System.Diagnostics;
// get call stack
StackTrace stackTrace = new StackTrace();

// get calling method name
Console.WriteLine(stackTrace.GetFrame(1).GetMethod().Name); 
```

从[如何找到调用当前方法的方法？](https://stackoverflow.com/questions/171970/how-can-i-find-the-method-that-called-the-current-method)

# jquery - 尝试使用 place 属性在 Google Maps API 中显示/隐藏标记

> ID：13466992
> 
> 赞同：0
> 
> 时间：2012-11-20T05:16:02.467
> 
> 标签：jquery, google-maps-api-3, google-maps-markers

好的，几乎解决了。我正在尝试使用来自附近搜索的地点属性（如下所示）

```
var request = {
  location: pyrmont,
  radius: '500',
  types: ['atm','bus_station','parking']
};
infowindow = new google.maps.InfoWindow();
service = new google.maps.places.PlacesService(map);
service.nearbySearch(request, callback); 
```

标记存储在一个数组中（如下）

```
 function createMarker(place) {
      var iconType = {};
      iconType['atm'] = "http://maps.google.com/mapfiles/ms/micons/dollar.png";
      iconType['bus_station'] = "http://maps.google.com/mapfiles/ms/micons/bus.png";
      //iconType['restaurant'] = "http://maps.google.com/mapfiles/ms/micons/restaurant.png";
      iconType['parking'] = "http://maps.google.com/mapfiles/ms/micons/parkinglot.png";
      var placeLoc = place.geometry.location;
      var marker = new google.maps.Marker({
      map : map,
      icon : iconType[place.types[0]],
      position : place.geometry.location,
      types : place.types
    });

    google.maps.event.addListener(marker, 'click', function() {
      infowindow.setContent(place.name);
      infowindow.open(map, this);
    });

    return marker;
  } 
```

现在的问题是，下面的“if”语句与数组中的位置不匹配，我输入的字符串，我不确定语句本身是否错误，或者我是否没有正确检索 place.types 属性谷歌请求。

```
 function onRemoveBtn_Clicked() {
    var i;
    for (i = 0; i < markers.length; i++) {
      if (markers[i].get("types") != ATM) {
      markers[i].setMap(null);
    }
  } 
```

到目前为止，我在这个问题上得到了很大的帮助，并感谢所有花时间帮助我的人，这是我最后一次打扰你了 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T05:27:27.560

如果将类型数组设置为标记，则 marker.get("types") 返回该数组。所以代码应该是这样的：

```
function onRemoveBtn_Clicked() {
  var i, j, isHit, types;
  for (i = 0; i < markers.length; i++) {
    types = markers[i].get("types");
    if (types) {
      isHit = false;
      for (j = 0; j < types.length; j++) {
        if (types[j] == "atm") {
          isHit = true;
          break;
        }
      }
      if (isHit) {
        markers[i].setMap(null);
      }
    }
  }
} 
```

# iphone - How are extra device provisioning profiles removed from the iPhone Configuration Utility Library?

> ID：13466993
> 
> 赞同：0
> 
> 时间：2012-11-20T05:16:04.860
> 
> 标签：iphone, xcode, configuration, profile, provisioning

I've managed to get 3 identically-named provisioning profiles into the iphone configuration utility, to be used for distribution.

It's due to editing the provisioning profile but keeping the name the same, then importing it after downloading it. So 3 distribution provision profiles with the same name, same application identifier, different profile identifier.

They're not on any devices yet, but they seem STUCK in iPhone Configuration Utility's library.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T01:17:14.053

删除额外配置文件的步骤：

1.  选择要删除的配置文件
2.  单击编辑，然后单击删除（或直接按 Delete 键）
3.  确认您要删除选定的配置文件

这适用于我使用 3.5 版

# c# - 简化数据库连接 - 对吗？

> ID：13466994
> 
> 赞同：1
> 
> 时间：2012-11-20T05:16:12.777
> 
> 标签：c#, sql-server-2008

我正在尝试自学 C#，并找到了有关连接到 MSSQL 数据库的各种示例。我所做的似乎是最简单的方法，但似乎仍然过于复杂。

有没有更好的办法？

这是我的代码：

```
static void dbcon()
{
    List<int> familyID = new List<int>();
    String connString = "Server=[myServer]\\[myInstance];Database=[dbName];User Id=[userID};Password=[password];";
    using (var sqlconn = new SqlConnection(connString))
    {
        using (var cmd = sqlconn.CreateCommand())
        {
            try
            {
                sqlconn.Open();
                cmd.CommandText = "SELECT id FROM family";
                using (var reader = cmd.ExecuteReader())
                {

                    while (reader.Read())
                    {
                        familyID.Add(Convert.ToInt32(reader["id"].ToString()));
                    }
                }
                foreach (int tempy in familyID)
                {
                    Console.WriteLine("id: " + tempy);
                }
            }
            catch (Exception ex)
            {
                Console.WriteLine(ex);
            }                   
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T05:22:55.773

这对于只运行一条 sql 语句的应用程序来说很好，但您不希望每次需要新数据时都使用所有这些代码。

您要做的是将创建连接的代码、获取和运行 sql 的代码与处理结果的代码分开。

这样，连接代码（也可能是数据展示代码）可以编写一次，每次你想执行不同的sql时调用，你只需要专注于如何编写获取你想要的数据的代码。

hth

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T06:49:36.423

**详细信息：**首先欢迎来到 Stackoverflow。下面只是一些提示

像这样对连接字符串进行硬编码是不好的做法。你应该总是把它放在你的 App.config 中（或者 Web.config 如果它是一个 Web 应用程序）。原因是，如果您对其进行了硬编码并且您的老板要求您更改应用程序数据库连接字符串，您将需要重新编译整个应用程序。如果你在 App.config 文件中有它，你只需要更改它（用记事本打开它）并保存它。

有关如何将其添加到 app.config 的示例

```
<configuration>
   <connectionStrings>
         <add name="myConnectionString" 
           connectionString="Data Source=localhost;Initial Catalog=MySQLServerDB; 
           Integrated Security=true" providerName="System.Data.SqlClient" />
   </connectionStrings>
</configuration> 
```

然后在您的代码中访问它（您需要添加对 System.Configuration 的引用以及使用 System.Configuration 添加；）

```
string connString = ConfigurationManager.ConnectionStrings["myConnectionString"].ConnectionString; 
```

关于您的其他代码，我将更改您的异常捕获以首先包含 Sql 异常，然后回退到任何其他异常。

```
 catch (SqlException ex)
  {
      // Handle the Sql Exception code
  }
  catch (Exception ex)
  {
      // Handle the Normal Exception code
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T07:41:52.453

[SqlConnectionStringBuilder](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnectionstringbuilder.aspx)文档中包含的示例非常容易理解和理解为替代方式。

```
System.Data.SqlClient.SqlConnectionStringBuilder builder =
  new System.Data.SqlClient.SqlConnectionStringBuilder();
builder["Data Source"] = "(local)";
builder["integrated Security"] = true;
builder["Initial Catalog"] = "AdventureWorks;NewValue=Bad";
Console.WriteLine(builder.ConnectionString); 
```

**编辑：**

实际上，我在上面复制的示例向您展示了 SqlConnectionStringBuilder 类如何以安全的方式处理“...无效值”。哎呀。至少它让你了解它是如何工作的。

有关在 ADO.NET 中获取、存储和构造连接字符串的各种方法的更多信息，请查看[MSDN 文档中的连接字符串](http://msdn.microsoft.com/en-us/library/ms254978%28v=vs.90%29.aspx)

# javascript - How to test for multiple features in Modernizr

> ID：13466997
> 
> 赞同：2
> 
> 时间：2012-11-20T05:16:21.217
> 
> 标签：javascript, jquery, detect, modernizr

I was wondering how you could test for multiple features in modernizr. I know you can do:

```
if(Modernizr.websockets) { // has websockets } else { // no websockets } 
```

But I was wondering how to test for *multiple* features. I have tried many common JavaScript syntaxes and I've also google'd it and cannot seem to find an answer. The reason I'm asking is because what I think would normally work, isn't working.

Here's what I'm currently doing:

```
if((Modernizr.cssgradients)|(Modernizr.fontface)|(Modernizr.rgba)) { var pass = true; } 
```

Any ideas on what I am doing wrong?