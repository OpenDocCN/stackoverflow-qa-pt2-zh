# StackOverflow 问答 13586000-13586999

# jakarta-ee - 如何在 JSF 视图和 CDI Bean 中使用 @Produces 列表

> ID：13586000
> 
> 赞同：1
> 
> 时间：2012-11-27T14:07:05.057
> 
> 标签：jakarta-ee, jpa, jpa-2.0, cdi

我有一个基于 CDI 的 Web 应用程序，它在数据表中显示在我的 ProducerBean 中生成的工单列表：

```
@Produces
@Named
public List<Tickets> getTickets() {     
   return tickets;
}

<h:dataTable var="tickets" value="#{tickets}" >
    . . . 
</h:dataTable> 
```

这非常有效，但是我需要在 JSF EL 之外使用这个票证列表（“票证”）。

同一页面中引用的另一个 CDI Bean 使用：

```
@Inject
private List <Tickets> tickets; 
```

但是，注入的票证列表是空的。我仍然可以通过 JPA 再次查询门票，但是我想重用我制作的那个列表。有可能吗？
非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T14:16:57.420

我想在注入时，`tickets`第一个 bean 的字段是空的。注入是在 bean 实例化时执行的，因此请确保在第一个 bean`tickets`的方法中正确实例化该字段。`@PostConstruct`

# java - 使用 ESAPI 时看不到程序的日志消息

> ID：13586002
> 
> 赞同：2
> 
> 时间：2012-11-27T14:07:14.600
> 
> 标签：java, security, logging, esapi

我是 ESAPI 的新用户，我正确创建了 ESAPI 属性（我认为），加密和解密工作。

但是，我不再看到原始代码的日志消息（它是一个 map/reduce 程序）。这是 ESAPI.properties 中的属性：

```
ESAPI.Logger=org.owasp.esapi.reference.Log4JLogFactory 
```

记录器是 slf4j，但我尝试将其更改为 log4j。

我考虑过使用 org.owasp.esapi.reference.Log4JLogFactory，但它与安全相关，我的代码显然不仅仅是安全事件要记录的内容。

我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-12T18:10:48.133

正如你[在这里](http://grepcode.com/file/repo1.maven.org/maven2/org.owasp.esapi/esapi/2.1.0/org/owasp/esapi/reference/Log4JLogFactory.java#Log4JLogFactory)看到的：

```
 //Note that you must specify the LogFactory in either log4j.properties:
 //log4j.loggerFactory=org.owasp.esapi.reference.Log4JLoggerFactory 

 //log4j.xml: <loggerFactory class="org.owasp.esapi.reference.Log4JLoggerFactory"/> 
```

您需要您的 log4j 实现专门引入 esapi 日志工厂，以使其按预期工作。

# mono - 如何在 GTK+/GTK# 中切换全屏模式#

> ID：13586006
> 
> 赞同：2
> 
> 时间：2012-11-27T14:07:43.130
> 
> 标签：mono, gtk, gtk#, gtk3

我正在构建我的第一个 GTK 应用程序。我正在使用 GTK# 绑定在 Mono C# 中编写我的应用程序。不过，我会很高兴收到 GTK+ 的解释并弄清楚 GTK# 的实现。该应用程序由一个顶级窗口组成，我希望以与 Chrome 使用 F11 键相同的方式打开和关闭全屏模式。我可以通过在窗口对象上执行**GdkWindow.Fullscreen ()**方法轻松地进入全屏模式。但是，我不知道如何切换回“正常”模式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T14:20:23.293

首先，尝试调用[`Unfullscreen`](http://docs.go-mono.com/?link=M%3aGtk.Window.Unfullscreen)方法（但效果取决于 WM）。

请注意，可以通过[`Widget.WindowStateEvent`](http://docs.go-mono.com/?link=E%3aGtk.Widget.WindowStateEvent)事件跟踪全屏状态。

# javascript - javascript每9秒循环一次？

> ID：13586008
> 
> 赞同：7
> 
> 时间：2012-11-27T14:07:59.110
> 
> 标签：javascript, jquery

我正在开发一个 html5 应用程序，我希望在 8 秒后写入随机位置，如果你赢了或没有赢一秒钟，它会写，然后它会从创建一个新的随机开始，我已经尝试过 for 但它似乎没有做任何事情，如果我写 while(true) 浏览器崩溃。

有什么办法可以解决吗？

```
jQuery(document).ready(function(){
    ImageClicked = false;
    for (var i=0;i<8;i++){
        var XYScore = 0;
        var RandomPlace=Math.floor((Math.random()*10)+1);
        var Place;
        var WantedXPr;
        var WantedYPr;

        switch(RandomPlace){
            case 1:
                Place="Berlin";
                WantedYPr=790;
                WantedXPr=4300;
                break;
            case 2:
                Place="New York";
                WantedYPr=1061;
                WantedXPr=2345;
                break;
            case 3:
                Place="barcelona";
                WantedYPr=1049;
                WantedXPr=4046;
                break;
            case 4:
                Place="Johannesburg";
                WantedYPr=2546;
                WantedXPr=4618;
                break;
            case 5:
                Place="shanghai";
                WantedYPr=1272;
                WantedXPr=6664;
                break;
            case 6:
                Place="Moskau";
                WantedYPr=732;
                WantedXPr=4800;
                break;
            case 7:
                Place="kahir";
                WantedYPr=4690;
                WantedXPr=1310;
                break;
            case 8:
                Place="Delhi";
                WantedYPr=1323;
                WantedXPr=5707;
                break;
            case 9:
                Place="rio de genero";
                WantedYPr=2478;
                WantedXPr=3050;
                break;
            case 10:
                Place="Tokyo";
                WantedYPr=1180;
                WantedXPr=7102;
                break;
        }

        setTimeout(function(){
            if (ImageClicked==false){
                $('#HeaderAfterWrite').html(", all the people were killed");
                $('#HeaderWrite').html("No one helped ");}
            else if(XYScore>69)
                $('#HeaderWrite').html("Youv'e succesful recover the city ");
            else if(XYScore>39)
                $('#HeaderWrite').html("The Parvars are not all of ");
            else {$('#HeaderAfterWrite').html("is full destroyed now!");
                $('#HeaderWrite').html(" ");}
        }, 8000);
        $('#Place').html(Place);
    }
}); 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-27T14:11:42.237

您可以为此目的使用 setInterval

[参考](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)

```
time=setInterval(function(){
//your code
},9000); 
```

你可以通过

```
clearInterval(time); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-08-23T00:40:38.697

这更优雅。

```
(function loop() {
  setTimeout(function () {
    // execute script
    loop()
  }, 9000);
}()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T14:12:34.420

是的，有办法解决它。

做一个超时的函数。

```
function setTimeoutAgain()
{
   var t = setTimeout(function()
   {
        setTimeoutAgain();
   },8000);
} 
```

# php - 在 sql 中多次使用相同的预处理语句参数

> ID：13586012
> 
> 赞同：4
> 
> 时间：2012-11-27T14:08:04.010
> 
> 标签：php, sql, prepared-statement

我试图在我的 sql 中使用相同的参数，但它只识别第一个。看我的代码：

```
$stmt = $dbh->prepare("SELECT
    (SELECT SUM(oq.value)
    FROM operations_quotas AS oq
        JOIN operations AS o ON oq.operation = o.id
    WHERE o.user = :user AND o.type = 1 AND oq.status = 1
    ) AS total_incomes_open,

    (SELECT SUM(oq.value)
    FROM operations_quotas AS oq
        JOIN operations AS o ON oq.operation = o.id
    WHERE o.user = :user AND o.type = 1 AND oq.status = 2
    ) AS total_incomes_wroteoff");

$stmt->bindParam(":user", $this->getId());
$stmt->execute(); 
```

那可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T14:14:56.853

不可能重用这样的参数。您必须制作独特的参数：

```
$stmt = $dbh->prepare("SELECT
    (SELECT SUM(oq.value)
    FROM operations_quotas AS oq
        JOIN operations AS o ON oq.operation = o.id
    WHERE o.user = :user_a AND o.type = 1 AND oq.status = 1
    ) AS total_incomes_open,

    (SELECT COUNT(oq.id)
    FROM operations_quotas AS oq
        JOIN operations AS o ON oq.operation = o.id
    WHERE o.user = :user_b AND o.type = 1 AND oq.status = 2
    ) AS total_incomes_wroteoff");

$stmt->bindParam(":user_a", $this->getId());
$stmt->bindParam(":user_b", $this->getId());
$stmt->execute(); 
```

从[手册](http://php.net/manual/en/pdo.prepare.php)：

> 当您调用 PDOStatement::execute() 时，您必须为希望传递给语句的每个值包含一个唯一的参数标记。您不能在准备好的语句中两次使用同名的命名参数标记。您不能将多个值绑定到单个命名参数，例如 SQL 语句的 IN() 子句。

# postgresql - 显示在触发器 postgres 中启动的查询

> ID：13586013
> 
> 赞同：0
> 
> 时间：2012-11-27T14:08:05.973
> 
> 标签：postgresql, logging, triggers

我正在寻找一种方法来记录在触发过程中启动的查询。设置后：log_statement = 'mod' in config 我可以看到应用程序启动的查询，但在日志文件中不提供 select 的插入和在触发器过程中启动的其他查询。有什么办法可以显示这些查询

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T14:25:01.353

试试这个[http://www.postgresql.org/docs/current/static/pgstatstatements.html](http://www.postgresql.org/docs/current/static/pgstatstatements.html) 它创建一个包含所有查询的特殊表，服务器执行。

您将需要`pg_stat_statements.track ('all')`.

如果您只需要跟踪触发器的语句，请考虑在将调用触发器的查询之前设置`pg_stat_statements.track ('none')`然后。再次触发后。`pg_stat_statements.track ('all')``pg_stat_statements.track ('none')`

# r - 填写缺失数据，并在 R 中复制其他数据

> ID：13586014
> 
> 赞同：0
> 
> 时间：2012-11-27T14:08:08.217
> 
> 标签：r, duplicates

我的数据以年为单位，并非所有集群都有从 1990 年到 2010 年所有年份的数据，所以首先我想填补所有 id 的缺失年份。然后我想填写我添加了年份的其余字段，并`NA`为我想要预测的其他字段创建值。我怎样才能在**R**中解决这个问题？

```
LAT        LONG    Cluster_ID year
13.5330 -15.4180   1            1990
13.5330 -15.4180   1            1992
13.5330 -15.4180   1            1995
13.5330 -15.4180   1            2010
13.5330 -15.4170   2            1995
13.5330 -15.4170   2            1997
13.5330 -15.4170   2             2005
13.5340 -14.9350   3             2005
13.5340 -14.9350   3             2006
13.5340 -15.9170   4             2010
13.3670 -14.6190   5             2006 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T14:20:30.163

您只需创建一个包含所有可能组合的额外数据框，如下所示：

```
mycomb <- expand.grid(Cluster_ID = unique(mydat$Cluster_ID),
          year = 1990:2010) 
```

有了那个，您可以进行合并：

```
merge(mydat,mycomb,all=TRUE) 
```

以获得想要的结果。另见`?expand.grid`和`?merge`。

* * *

测试代码：

```
zz <- textConnection('LAT        LONG    Cluster_ID year
13.5330 -15.4180   1            1990
13.5330 -15.4180   1            1992
13.5330 -15.4180   1            1995
13.5330 -15.4180   1            2010
13.5330 -15.4170   2            1995
13.5330 -15.4170   2            1997
13.5330 -15.4170   2             2005
13.5340 -14.9350   3             2005
13.5340 -14.9350   3             2006
13.5340 -15.9170   4             2010
13.3670 -14.6190   5             2006')

mydat <- read.table(zz,header=TRUE) 
```

# iphone - 是否可以将图像从 iPhone 上的 Safari 上传到网站？

> ID：13586015
> 
> 赞同：0
> 
> 时间：2012-11-27T14:08:09.453
> 
> 标签：iphone

我正在尝试将照片从我的 iPhone 上传到网站。但是，显示选择文件对话框的浏览按钮被禁用。通常这在我的 HTC Mobile 和所有 Android 手机上都可以正常工作。我应该能够选择要从 iPhone 上的 Safari 上传的图像文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T14:23:12.927

这在 iOS 6 之前不可用。从 iOS 6 开始，选择文件按钮将打开典型的从库中选择/拍照或视频视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T14:29:18.237

我检查了一些网站，它似乎只允许您上传存储在照片库中的文件（为此我正在运行 iOS 6）。iOS 的问题是没有通常在 Windows 和 Android 环境中发现的文件系统类型行为。因此，这就解释了为什么您可以在 HTC 上而不是在 iPhone 上执行此操作。

如果您需要更多信息，这里的[博客](http://www.idownloadblog.com/2012/06/13/ios-6-safari-media-uploads/)解释了 iOS 6 如何处理文件上传。

# android - Adobe Native Extension Android 布局 xml 无法访问

> ID：13586017
> 
> 赞同：1
> 
> 时间：2012-11-27T14:08:13.993
> 
> 标签：android, adobe, air-native-extension

为 Android 构建一个原生扩展，我正在尝试集成谷歌地图视图，当我尝试从布局访问属性时，它运行良好。错误出现在扩展地图视图的活动类中：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    //Remove title bar
    this.requestWindowFeature(Window.FEATURE_NO_TITLE);

    setContentView(R.layout.activity_map);

    mapView = (MapView)findViewById(R.id.mapview);
    mapView.setBuiltInZoomControls(true); // <- this crashes, same for textview etc. 
```

加载的 xml 如下所示：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:orientation="vertical"  >

<TextView
    android:id="@+id/textfield1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginTop="0dp"
    android:text="@string/hello_world"
    android:textColor="#ff0000"  />

<com.google.android.maps.MapView 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mapview"
    android:layout_width="300dp"
    android:layout_height="300dp"
    android:clickable="true" 
    android:apiKey="0cy94dNyuBcfF0aNZhB_JKpF4dQtxgDWhCXppRw" />

<Button
    android:id="@+id/button_clear"
    android:layout_marginTop="20dp"
    android:layout_marginLeft="20dp"
    android:layout_width="100dp"
    android:layout_height="40dp"
    android:background="@android:color/black"
    android:text="@string/clear"
    android:textColor="@android:color/white" />

<Button
    android:id="@+id/button_add"
    android:layout_marginTop="20dp"
    android:layout_marginLeft="20dp"
    android:layout_width="100dp"
    android:layout_height="40dp"
    android:background="@android:color/black"
    android:text="@string/add"
    android:textColor="@android:color/white" /> 
```

到目前为止我发现并检查了什么：

*   扩展正确加载，因为 xml 布局中的地图视图正确显示
*   res-文件夹被复制并编译到 ANE（解压缩检查）以及 APK（解压缩检查）
*   所有布局元素都存在问题，应用程序在访问 textview 时也会崩溃。所以这不是特定于地图的问题
*   项目在独立运行时工作正常，所以它必须与扩展有关

我已经阅读了一些关于使用 getRessourceId 的帖子，但这意味着需要将 FREContext 注入到活动中，这对我来说听起来很奇怪。

任何提示都非常感谢！谢谢，M.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T07:54:15.970

想通了第一部分。实际上，您的活动中有一个静态 FREContext。在您的扩展函数中，将此上下文设置为一个，您将获得：

```
 @Override
    public FREObject call(FREContext context, FREObject[] args) {

         MyActivity.freContext = context; 
```

在您的活动中，您通过它的 resourceId 设置布局：

```
 setContentView( freContext.getResourceId("layout.my_layout_xml")); 
```

希望这可以帮助某人。

# mysql - MySQL 不带回数据

> ID：13586018
> 
> 赞同：2
> 
> 时间：2012-11-27T14:08:14.213
> 
> 标签：mysql, null, rows

我有以下代码：

```
SELECT q1, COUNT(q1) as Responses, 
(SELECT COUNT(q1) FROM `acme` WHERE q1 >= 1) AS Total, 
(COUNT(q1) / (SELECT COUNT(q1) FROM `acme` WHERE q1 >= 1 )) *100 AS Percentage
FROM `acme` WHERE q1  >= 1 GROUP BY q1 DESC 
```

很简单，字段中只能有四个响应`q1`——它们是 1,2,3 或 4

请参阅下面的输出：

```
q1  Responses   Total   percentage
4   109         362     30.1105
3   224         362     61.8785
2   25          362     6.9061
1   4           362     1.1050 
```

现在，如果选项 1、2、3 或 4 在`q1`BUT 中，这是一种享受，我遇到的问题是如果`4's`Q1 中没有 - 代码将返回 3,2 和 1 而不是 4 的行（我猜是实际上是正确的）。

所以，如果没有 4，我需要它来产生这样的东西......

```
q1  Responses   Total   percentage
4   0           253     0
3   224         253     88.53754
2   25          253     9.88142
1   4           253     1.58102 
```

希望这是有道理的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T14:52:55.087

试试这个：

```
select * from (SELECT q1, COUNT(q1) as Responses, 
(SELECT COUNT(q1) FROM `acme` WHERE q1 >= 1) AS Total, 
(COUNT(q1) / (SELECT COUNT(q1) FROM `acme` WHERE q1 >= 1 )) *100 AS Percentage
FROM `acme` WHERE q1  >= 1 GROUP BY q1 DESC
union
select 1,0,0,0 from dual
union
select 2,0,0,0 from dual
union
select 3,0,0,0 from dual
union
select 4,0,0,0 from dual) as t group by q1 
```

[http://www.sqlfiddle.com/#!2/84b31/6](http://www.sqlfiddle.com/#!2/84b31/6)

或者您可以尝试不使用`DUAL`

```
select * from (SELECT q1, COUNT(q1) as Responses, 
(SELECT COUNT(q1) FROM `acme` WHERE q1 >= 1) AS Total, 
(COUNT(q1) / (SELECT COUNT(q1) FROM `acme` WHERE q1 >= 1 )) *100 AS Percentage
FROM `acme` WHERE q1  >= 1 GROUP BY q1 DESC
union
select 1,0,0,0
union
select 2,0,0,0
union
select 3,0,0,0
union
select 4,0,0,0) as t group by q1; 
```

[http://www.sqlfiddle.com/#!2/97031/19](http://www.sqlfiddle.com/#!2/97031/19)

# biztalk - BizTalk - 如何应用编排接收形状的过滤器表达式

> ID：13586020
> 
> 赞同：0
> 
> 时间：2012-11-27T14:08:20.763
> 
> 标签：biztalk, biztalk-deployment

我正在使用 BizTalk 2010。我有一个带有激活接收形状的业务流程。这包含一个针对消息上下文属性的过滤器表达式，该属性应构成订阅的一部分。我的问题是部署应用程序后，订阅中缺少过滤器表达式。

有谁知道 BizTalk 用于将筛选器分配给订阅的过程？据我所知，它不是来自绑定文件，所以我猜它必须来自反映编排程序集？

任何关于我在这里遗漏的想法将不胜感激。目前我可以在部署后手动添加过滤器，但这对我的自动构建/部署/测试过程来说不是好消息！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T15:05:13.423

一个简单的测试可以是创建一个具有相同过滤器表达式的发送端口。如果您看到消息流经发送端口，那么您的编排过滤器表达式中有问题。需要注意的一点是：编排接收端口上的过滤器表达式用双引号括起来，而在发送端口中它没有双引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T15:28:24.557

对不起，伙计们，两个很好的建议，但我一直是个傻瓜。我的构建脚本出现故障，这意味着新的编排程序集实际上并没有被部署——以前的版本没有过滤器！

# java - 如何停止或终止或终止ExecutorService中的单个线程或线程中运行的作业？

> ID：13586022
> 
> 赞同：-1
> 
> 时间：2012-11-27T14:08:28.413
> 
> 标签：java, threadpool, quartz-scheduler

一个。如何停止或杀死或终止单个线程`ExecutorService`？

湾。如何停止或终止或终止`Job`正在运行`ExecutorService`的线程，而不是持有工作的线程？

谢谢， 凯瑟尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T14:20:40.127

这取决于您在工作中到底在做什么（= 在您的`Runnable`/ `Callable`-实现中）。如果您正在处理项目列表，则可以检查其间的取消标志（应声明为 volatile）。

您也可以在您的未来对象上使用 cancel(true)（当您提交可调用时），但这也需要您`Thread.currentThread().isInterrupted()`在工作内部进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-09T02:01:16.617

我们还通过套接字编程跟踪线程。

假设已从 Web 应用程序向第三方应用程序发起呼叫。

使用套接字编程通过线程发起请求

每当用户想要杀死线程时，我们可以在套接字编程中做到这一点，因为它拥有确切的线程。

在 Quartz 中，我们无法杀死正在运行的线程。

# c# - String.Replace 方法忽略特殊字符的大小写。

> ID：13586026
> 
> 赞同：1
> 
> 时间：2012-11-27T14:08:42.750
> 
> 标签：c#, regex, string, replace

我有一个包含服务器文件路径 ($\MyPath\Quotas\ExactPath\MyFile.txt) 和本地文件系统路径 (C:\MyLocalPath\Quotas\ExactPath) 的字符串。我想用本地系统路径替换服务器文件路径。

我目前有一个确切的替换：

```
String fPath = @"$\MyPath\Quotas\ExactPath\MyFile.txt";
String sPath = @"$\MyPath\Quotas\ExactPath\";
String lPath = @"C:\MyLocalPath\Quotas\ExactPath\";

String newPath = fPath.Replace(sPath, lPath); 
```

但我希望这是一个不区分大小写的替换，这样它也可以用 lPath 替换 $\MyPath\quotas\Exactpath\。

我遇到了正则表达式的使用，如下所示：

```
var regex = new Regex( sPath, RegexOptions.IgnoreCase );
var newFPath = regex.Replace( fPath, lPath ); 
```

但是如何处理特殊字符（$、\、/、:），使其不被解释为正则表达式特殊字符？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T14:11:38.313

您可以使用[Regex.Escape](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.escape.aspx)：

```
var regex = new Regex(Regex.Escape(sPath), RegexOptions.IgnoreCase);
var newFPath = regex.Replace(fPath, lPath); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T14:11:40.780

只需使用[`Regex.Escape`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.escape.aspx)：

```
fPath = Regex.Escape(fPath); 
```

这会转义所有元字符并将它们转换为文字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T14:30:50.587

由于您只是在 case sensetivity 设置之后，而不是任何正则表达式匹配，因此您应该使用`String.Replace`而不是`Regex.Replace`. 令人惊讶的是，没有`Replace`采用任何文化或比较设置的方法重载，但可以使用扩展方法修复：

```
public static class StringExtensions {

  public static string Replace(this string str, string match, string replacement, StringComparison comparison) {
    int index = 0, newIndex;
    StringBuilder result = new StringBuilder();
    while ((newIndex = str.IndexOf(match, index, comparison)) != -1) {
      result.Append(str.Substring(index, newIndex - index)).Append(replacement);
      index = newIndex + match.Length;
    }
    return index > 0 ? result.Append(str.Substring(index)).ToString() : str;
  }

} 
```

用法：

```
String newPath = fPath.Replace(sPath, lPath, StringComparison.OrdinalIgnoreCase); 
```

测试性能，这表明比使用`Regex.Replace`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T17:19:41.067

我建议根本不要使用替换。使用 System.IO 中的**Path**类：

```
string fPath = @"$\MyPath\Quotas\ExactPath\MyFile.txt";
string lPath = @"C:\MyLocalPath\Quotas\ExactPath\";

string newPath = Path.Combine(lPath, Path.GetFileName(fPath)); 
```

# jquery - jQuery AJAX throwedError=未知

> ID：13586028
> 
> 赞同：0
> 
> 时间：2012-11-27T14:08:45.287
> 
> 标签：jquery

在下面的代码中：

```
$("document").ajaxError(function(e, jqxhr, settings, exception) {
    // error handling
}); 
```

“未知”是什么意思`exception`？

我正在使用 IE9 和 jQuery 1.7.1

**编辑：**更多信息-

*   statusText = "未知"
*   响应文本 = ""
*   就绪状态 = 4

我还用 FF 和 IE8 进行了测试，在这两种情况下我都得到了 exception="timeout" （在这种特定情况下这是合理的）。我猜“未知”只是一个 IE9 问题。

# clearcase - 查找 ClearCase 主机列表

> ID：13586030
> 
> 赞同：1
> 
> 时间：2012-11-27T14:08:46.797
> 
> 标签：clearcase

如何找到可用作输入的 ClearCase 主机列表`clearmake`？我搜索了一个可以列出主机但找不到的命令。我也尝试过询问我的系统管理员，但尚未收到答复。是否有任何命令可以让我找到 ClearCase 主机列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T16:27:33.943

根据我的发现，没有完美的解决方案可以为您提供主机列表。这取决于您拥有的工作区的配置方式。如果您的 IT 服务有管理员，请联系该人以了解可用的主机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T14:36:15.040

对于“客户端”（通常），该[`cleartool lsclients`](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/ct_lsclients.htm)命令将查询 ClearCase 注册服务器主机，该主机运行`albd_server`维护当前客户端主机列表的进程。
（它基于[文件](http://www-01.ibm.com/support/docview.wss?uid=swg21135901)[中服务器上列出`client_list.db`](http://www-01.ibm.com/support/docview.wss?uid=swg21135901)的信息）

您需要提供帽子注册服务器的（固定）主机名，以便该命令返回 ClearCase 客户端列表。

请注意，它仅列出最近的客户端：
如果客户端 30 天未访问服务器，则应将其从列表中删除。

但是，这并不假定这些 ClearCase 客户端是否适合`clearmake`.
据我所知，ClearCase 客户端没有与其他客户端在`clearmake`.

唯一[`clearmake`](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/clearmake.htm)可以使用主机名的参数是`–B bldhost-file`.

# jquery - 在浏览器中播放音频的正确方法？

> ID：13586035
> 
> 赞同：1
> 
> 时间：2012-11-27T14:09:18.350
> 
> 标签：jquery, html, audio

我在浏览器中创建了简单的音频播放器，但遇到了一些麻烦。例如，我的 html 代码中有 20 个音频标签。

```
 <audio class="tr_audio">
               <source src="track1.mp3" type="audio/mpeg">
               <source src="ogg/track1.ogg" type="audio/ogg">
            </audio>
         <audio class="tr_audio">
               <source src="track2.mp3" type="audio/mpeg">
               <source src="ogg/track2.ogg" type="audio/ogg">
            </audio>
         <audio class="tr_audio">
               <source src="track3.mp3" type="audio/mpeg">
               <source src="ogg/track3.ogg" type="audio/ogg">
            </audio>
           ...
         <audio class="tr_audio">
               <source src="track20.mp3" type="audio/mpeg">
               <source src="ogg/track20.ogg" type="audio/ogg">
            </audio> 
```

并有 20 个项目的列表。一个项目一个轨道。我在点击事件上播放它。麻烦的是，当页面加载缓存中的所有 20 个轨道时，对吗？并且某些曲目可能根本无法加载或部分加载。因此，尝试播放此类曲目将失败。（例如 track17 没有加载，如果我点击 item17 歌曲将不会播放）。另外，我像这样停止上一首歌

```
$('.'+part+'_audio')[song_number].currentTime = 0;
    $('.' part '_audio')[song_number].pause(); 
```

因此，如果上一个曲目没有完全加载或部分加载，则此字符串

```
`$('.'+part+'_audio')[song_number].currentTime = 0;` 
```

将返回错误 Uncaught Error: INVALID_STATE_ERR: DOM Exception 11。所以我必须多次重新加载页面 - 然后所有 20 首歌曲将加载到我的缓存中，并且播放将不会出现错误。但这是错误的方式。请告诉我正确的。谢谢！

你可以在这里看到我的播放器（不是广告）：[http ://www.pompeya-for.me](http://www.pompeya-for.me)

我刚开始学习 jQuery 并创建这个播放器进行练习 - 请不要对“印度代码”感到震惊。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T14:59:58.290

我以前从未构建过音乐播放器，但我会这样做：

像您一样开始，但只有第一首具有所有音频格式的歌曲：

```
<audio class="tr_audio">
    <source src="track1.mp3" type="audio/mpeg">
    <source src="ogg/track1.ogg" type="audio/ogg">
    .....
</audio> 
```

您有播放列表导航，每个链接都指向歌曲的网址。使用 jQuery，您现在可以使用单击的歌曲更改音频 src。您可以使用“canPlayType”来检查要使用的文件格式。

```
<ul>
    <li><a href="track2.mp3">Track 2</a></li> 
```

jQuery 可能看起来像这样：

```
$('ul > li > a').on('click', function (e) {
    e.preventDefault();
    var src = $(this).attr('href'),
        filetype = src.split('.').pop(),
        player   = $('audio'),
        newSrc   = $("<source>").attr("src", src); //Need to modify src with help off canPlayType

     player.empty();
     player.append(newSrc);

     player[0].load();
     player[0].play();
}); 
```

未经测试，但你明白了。您还应该将 codecs 属性添加到我们的新源中。

# java - android 应用程序使用 java 作为使用 intelliJ IDE 的语言

> ID：13586036
> 
> 赞同：0
> 
> 时间：2012-11-27T14:09:18.953
> 
> 标签：java, android, android-layout, intellij-idea

对于我的程序 Itax，除了 main.xml 之外，我还有几个布局。我在 main.xml 中有 3 个按钮和一个

1.  btn_info - 单击时打开 basicinfo.xml

2.  btn_tutorial - 单击时打开 tutorial.xml

3.  btn_calc - 点击时打开calculator.xml

我在 Main.java 中的这些按钮的代码是（这有效！）：

```
package com.example.ITax;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

public class MyActivity extends Activity {
    private Button btn1, btn2, btn3;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

         btn1 = (Button) findViewById(R.id.btn_info);
         btn2 = (Button) findViewById(R.id.btn_tutorial);
         btn3 = (Button) findViewById(R.id.btn_calc);

          btn1.setOnClickListener(i);
          btn2.setOnClickListener(i);
          btn3.setOnClickListener(i);

public View.OnClickListener i = new View.OnClickListener()
    {
        @Override
        public void onClick(View v)
        {
            if (v == btn1)
            {
                setContentView(R.layout.basic_info);
            }

            else if (v == btn2)
            {
                setContentView(R.layout.tutorial);
            }

            else if (v == btn3)
            {
                setContentView(R.layout.calcu);
            }

        }
    } ; 
```

但是..当我包含来自 calcu.xml 的按钮时，例如：

1.  btn_back_from_calcu - 单击时返回 main.xml

这是我的新代码不起作用（每当我在模拟器中运行我的应用程序时，它都会显示“不幸的是，ITax 停止了。”

```
package com.example.ITax;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

public class MyActivity extends Activity {
    private Button btn1, btn2, btn3, btn4;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

         btn1 = (Button) findViewById(R.id.btn_info);
         btn2 = (Button) findViewById(R.id.btn_tutorial);
         btn3 = (Button) findViewById(R.id.btn_calc);
         btn4 = (Button) findViewById(R.id.btn_back_from_calcu);

          btn1.setOnClickListener(i);
          btn2.setOnClickListener(i);
          btn3.setOnClickListener(i);
          btn4.setOnClickListener(i);
}
}

public View.OnClickListener i = new View.OnClickListener()
    {
        @Override
        public void onClick(View v)
        {
            if (v == btn1)
            {
                setContentView(R.layout.basic_info);
            }

            else if (v == btn2)
            {
                setContentView(R.layout.tutorial);
            }

            else if (v == btn3)
            {
                setContentView(R.layout.calcu);
            }

             else if (v == btn4)
            {
                setContentView(R.layout.main);
            }
        }
    } ; 
```

似乎有什么问题？！:'((

# ruby-on-rails - Rails 控制器命名约定 postComments 或 postComments

> ID：13586039
> 
> 赞同：3
> 
> 时间：2012-11-27T14:09:25.943
> 
> 标签：ruby-on-rails, ruby-on-rails-3, controller, naming, convention

如果我想为属于帖子的评论生成一个控制器，该帖子又属于用户，我应该命名这个吗

```
rails g controller postsComments 
```

或者

```
rails g controller postComments 
```

或者

```
rails g controller postcomments 
```

要不就

```
rails g controller comments 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-27T14:16:08.327

如果你键入，

```
 rails g controller 
```

您将获得详细说明以及如何正确执行此操作的示例。基本上，您可以使用`CamelCase`or`under_scored`并且结果将是相同的。`under_scores`在文件名和`CamelCase`类名中。

至于名称，我个人会使用`Comments`，除非您打算在您的应用程序中添加另一种类型的评论并希望为它们使用不同的类名。

最后是你是否应该使用`PostsComments`或`PostComments`更多关于英语而不是 Rails 的问题。我认为更正确的方法是`PostComments`，但我不是母语人士:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-27T14:14:44.817

我会使用`rails g controller PostComments`命令，单数化，因为 Post has_many Comments & Comment has_one Post。

# android - 如何使用我的应用程序打开其他活动应用程序？

> ID：13586045
> 
> 赞同：1
> 
> 时间：2012-11-27T14:09:54.433
> 
> 标签：android, android-intent, podcast

我想知道如何从我的应用程序中打开 MixCLoud 应用程序 ( -> [LINK](https://play.google.com/store/apps/details?id=com.mixcloud.player) )。您可能知道，这是一个类似于 deezer 的应用程序，播放音频播客。我有一个来自 MixCLoud 网站的播客的 URL“URL”，我想从我的应用程序中打开带有该 URL 的 MixCLoud，播放该播客而不在应用程序中搜索它。

我的代码是这样的：

```
Intent i = getPackageManager().getLaunchIntentForPackage("com.mixcloud.player"); // mixcloud package
            Uri u = Uri.parse(URL);
            i.setData(u);
            i.addCategory(Intent.CATEGORY_LAUNCHER);
            startActivity(i); 
```

当然，它会在主页上打开 Mixcloud。如果有人知道如何直接在播客上打开 MixCloud 应用程序，我需要你的帮助！

谢谢！

PS：抱歉语言错误，英语不是我的母语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T14:20:48.127

我认为您无法启动特定意图，因为`packageManager`它将仅返回具有`intent-filter` `CATEGORY_LAUNCH`. 参考这个[线程](https://stackoverflow.com/questions/6303793/android-possible-to-start-any-activity-of-other-apps-from-my-own)

相反，要从您的应用程序启动应用程序，请尝试以下操作：

```
protected void startAppFromPackageName(String packageName) {
        Intent mIntent = getPackageManager().getLaunchIntentForPackage(packageName);
        if (mIntent != null) {
            try {
                startActivity(mIntent);
            } catch (ActivityNotFoundException err) {
                Log.i(TAG, "the App : " + packageName + " is not installed");
            }
        }
        else {
            Log.i(TAG, "the App : " + packageName + " is not installed");
        }
    } 
```

并这样称呼它：

```
startAppFromPackageName("com.mixcloud.player"); 
```

# javascript - jQuery解析后获取未定义的JSON

> ID：13586048
> 
> 赞同：2
> 
> 时间：2012-11-27T14:10:15.323
> 
> 标签：javascript, jquery, json, parsing

这是 JSON 字符串的示例：

```
 {
      "table": {
         "tfoot": "Footer",
         "tr0": [
                  {
                  "form": "formData",
                  "td": "Content"
                  }
                ]
       }
     } 
```

以及我用来解析它的 jQuery 代码：

```
$.ajax({ 
    type: 'GET', 
    url: source, 
    dataType: 'json',
    success: function (data) { 

            $.each(data, function() {
              $.each(this, function(key, value) {
                switch (key) {
                    case "tfoot":
                        alert(value) // access to this node works fine                      
                    break;

                    default: 
                        alert(value.td) // this is undefined
                    break;
                }       
              });
            });
        }
    }); 
```

我用 Chrome 尝试了 Console.log，我可以看到每个节点并且数据没问题。任何人都知道我如何访问“form”或“td”节点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T14:18:41.623

对象值是一个数组，因此您无法访问它的 td 属性。如果您想访问数组 td 属性中的第一项，您需要执行以下操作：

```
value[0].td 
```

完整代码：

```
$.each(t, function() {
  $.each(this, function(key, value) {
    switch (key) {
      case "tfoot":
        console.log(value) // access to this node works fine                      
      break;

      default: 
        console.log(value[0].td) // this now prints "Content"
      break;
    }       
  });
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T14:13:57.837

值.table.tr0[0].td

是你正在寻找的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T14:15:46.123

在 json { } 定义一个 json 对象， [ ] 定义一个 json Array。

因此，由于之后`"tr0"`出现了 [ ] （数组），因此您需要使用索引来访问它。 `value.table.tr0[0].td`应该管用

# php - PHP 致命错误：无法在第 0 行的 Unknown 中读取类 MongoId 的属性 $id

> ID：13586049
> 
> 赞同：2
> 
> 时间：2012-11-27T14:10:15.980
> 
> 标签：php, mongodb

我在 Apache 错误日志中收到很多消息“ **PHP Fatal error: Property $id of class MongoId cannot be read in Unknown on line 0 ”。**

我不知道它什么时候开始发生并且无法得到这个错误的原因。当我访问我们网站的带有“tail -f error.log”的页面时，该错误不会发生。当我在控制台中收到此消息时，我转到页面，其中一些用户刚刚遇到致命错误并且没有错误。

我试图在谷歌中找到任何答案，但没有发现任何提到这样的问题。

任何人都可以建议，问题出在哪里？

更多细节：

*   操作系统：Debian Linux（挤压）
*   PHP：5.3.3
*   MongoDB：2.2.1
*   MongoDB PHP 扩展：1.2.12

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:18:00.883

您可以尝试禁用此问题，将设置添加`zend.enable_gc = Off`到您的 php.ini。不要问为什么，但它似乎是一个 php 错误......

# javascript - 将灰尘模板编译成一个 javascript 文件

> ID：13586057
> 
> 赞同：1
> 
> 时间：2012-11-27T14:10:48.663
> 
> 标签：javascript, templating, dust.js

我正在使用`dustc`随附的`dustjs-linkedin`来编译我的模板。但是，它一次只允许我编译一个模板。所以我保留了两个目录，`templates/`并`js/templates/`使用以下脚本一次性编译它们：

```
#!/bin/bash
for name in `ls templates/ | grep -o -P '^[^.]+'`; do
  dustc --name=$name templates/$name.html js/templates/$name.js
done 
```

但是，这样一来，模板就在不同的 JS 文件中了。它们都采用相同的模式：

```
(function(){dust.register("xxx",body_0);function body_0(chk,ctx){...}return body_0;})(); 
```

这可能会导致浏览器下载大量不必要的字节。所以我希望将模板编译成一个JS文件，或者将编译好的JS文件组合在一起。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T23:44:56.533

不确定确切的问题是什么，但如果您只想合并文件，那么使用像 sprockets 这样的依赖管理器或 require.js 的优化器工具就可以了。

将它们带入同一个文件时它们处于相同模式的事实并没有做任何事情 - 它们都包含在匿名自执行函数中以保护命名空间。

另一方面，如果您试图通过删除重复模式来优化代码，那么我建议使用 uglifyjs 或 google 的闭包编译器自动执行此操作。

合并和最小化代码根本不应该是一个问题 - 它会很好地工作:) 希望这会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T10:35:43.597

您可以使用[Duster.js](https://github.com/dmix/dusterjs)（node.js 的自动除尘和预编译）和[r.js](http://requirejs.org/docs/optimization.html)合并到一个文件中。

# php - PHP：Unicode 强调字符和变音符号

> ID：13586060
> 
> 赞同：9
> 
> 时间：2012-11-27T14:10:58.733
> 
> 标签：php, unicode, encoding, tinymce

在我们的网站上，一些 Mac 用户在将文本从 PDF 文件复制粘贴到 TextArea（由 TinyMCE 处理）时遇到问题。所有重读字符都已损坏，例如变成`e?`a `é`、`i?`a`î`等。我无法在 Windows 计算机上重现此问题。

当我将 TextArea 的内容写入文件时（在将其插入数据库之前），我刚刚发现首字母`é`在视觉上与传统的不同`é`（在 Vim 上，见下文）。

![问题的视觉示例](../Images/ec6395d30af8b97dabf777d8053375df.png)

确实 ：

```
// the corrupted é - first line of the screenshot
echo bin2hex($char); // display 65cc81

// traditionnal é
echo bin2hex('é');   // display c3a9 
```

经过大量搜索，我在这里：Mac OS 似乎将 Unicode 重音字符复制为两个字符的组合：在我们的示例中，**`e + ́`**. 到目前为止，我还没有找到任何解决方案来用`é`真实的替换损坏的，以避免`e?`在数据库中。

我有点绝望。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-27T14:17:42.023

将[表示规范化为一种或另一种形式的](http://en.wikipedia.org/wiki/Unicode_normalization)过程称为规范化。在 PHP 中有这样的[`Normalizer`类](http://php.net/normalizer)，通过它发送所有输入是个好主意：

```
$input = Normalizer::normalize($input); 
```

您可能想要规范化以形成 C，规范分解，然后是规范组合。

如果该类在您的系统上不可用，则可以使用[Patchwork UTF-8 library](https://github.com/nicolas-grekas/Patchwork-UTF8)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-27T14:42:50.840

这只是@deceze 已经回答的内容的补充。Unicode 中有多种方法可以指定相同的（在等价意义上）字符。

你有一个常见的例子：

```
65cc81 
```

这是 Utf-8 编码中的两个 Unicode 代码点。 `65`是`e` *拉丁小写字母 E* (U+0065) 并且`cc81`是`&#x301;` *COMBINING ACUTE ACCENT* (U+0301) （它不能由您的浏览器单独显示，所以我取了 HTML 实体）。

在 Unicode 中，这称为*组合序列*。但是由于某种原因，您的数据库不支持它。可能是因为列的编码不是 UTF-8 或者数据库连接有问题。

它规范地等价于

```
c3a9 
```

那是 Utf-8 编码中的单个 Unicode 代码点。`c3a9`是带有锐音的拉丁文小写字母`é` *E* (U+00E9)。看起来您的数据库处理它没有问题，可能是因为它被数据库连接成功重新编码为Latin-1 / ISO-8859-1。

因此，我想到了两种处理数据的方法。它要么是数据重新编码的问题，要么是存储数据的问题。

只要您对组合的 unicode 代码点序列的分解感兴趣，您就应该采用[Deceze 的回答](https://stackoverflow.com/a/13586187/367456)中概述的规范化器。

您还可以允许将 UTF-8 存储到数据库中，这样您也应该没有问题。

此外，您可能无论如何都应该进行规范化，以便对数据库或程序中的数据进行排序和比较可以更好地工作。如您所见，二进制序列不同，这可能会导致在二进制级别上进行比较的所有内容出现问题。

当然，您可以节省一些流量 :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T14:33:44.103

有一个 tinymce 配置参数，可让您定义一个函数以在插入编辑器之前处理粘贴的内容：[paste_preprocessing](http://www.tinymce.com/wiki.php/Plugin%3apaste)

使用该功能，您可以用所需的形式替换特殊字符

```
tinyMCE.init({
        ...
        paste_preprocess : function(pl, o) {
            // Content string containing the HTML from the clipboard
            o.content = o.content.replace(/\u2020/, 'x'); // example
        },
        paste_postprocess : function(pl, o) {
            ...
        },
        ...
}); 
```

# java - Objectify GAE/J Google App Engine：了解异步加载

> ID：13586067
> 
> 赞同：2
> 
> 时间：2012-11-27T14:11:15.143
> 
> 标签：java, database, google-app-engine, asynchronous, objectify

我是 Objectify 的新手，我不明白一些事情（一件愚蠢的事情）。我正在构建一个 Restful Web 服务（带有 restlet）并且我正在创建一个 JSON 响应。所以：

```
Party party;
    for(Ref<Game> jref : party.games)
    {
        JSONObject object = new JSONObject();

        try{
            Game gAux = jref.get(); //If the value ref is not load, the excetion throws
        }
        catch(IllegalStateException e)
        {
        //Is asynchronous
            jref = ObjectifyService.ofy().load().ref(jref);
        }

        serializeGame(jref.get(), object);
    } 
```

好的，代码很简单，我得到一个 Game 对象，然后将其序列化为 JSON 对象，然后发送响应。但我不明白异步是如何`load()`工作的。

如果`load().ref(jref)`是异步的：

1.  它返回什么？因此，如果`load().ref()`返回一个空对象 oa“未来”对象：
2.  当我使用对象时发生了什么？（我使用一个空值对象？，一个“仍在等待”的对象）？
3.  我怎么知道对象准备好了？（一些听众，处理程序？）使用它？
4.  额外：如果没有任何方法可以知道对象何时准备好，我如何加载 ref 同步？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T18:22:58.900

这是在这里回答的：

[https://groups.google.com/forum/?fromgroups=#!topic/objectify-appengine/8dLAbSWJVB4](https://groups.google.com/forum/?fromgroups=#!topic/objectify-appengine/8dLAbSWJVB4)

“简短的回答”是 Ref/Map/List 是异步外观，当您尝试物化 POJO 时会同步阻塞。就像未来一样。

# c# - 可以使用 Interlocked.CompareExchange 吗？

> ID：13586075
> 
> 赞同：2
> 
> 时间：2012-11-27T14:11:36.603
> 
> 标签：c#, arrays, multithreading, task-parallel-library, interlocked

我有一个整数数组，用于跟踪 10,000 个并发任务的完成情况，其中值为 1 或 0。我认为如果这个数组是一个位数组并且每个并发线程使用 interlocked.CompareExchange（或类似的) 改变一个位。

如果 Interlocked 没有“位”过载，我应该如何处理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T14:25:45.280

你可以在一个循环中伪造它`Interlocked.CompareExchange(ref int, int, int)`，但我认为它不会更有效：

```
private static void SetBit(ref int valueToUpdate, int bitToSet)
{
   while (true)
   {
      int oldValue = valueToUpdate;
      int newValue = oldValue | bitToSet;
      int result = Interlocked.CompareExchange(ref valueToUpdate, newValue, oldValue);
      if (result == oldValue) break;
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T14:21:07.957

我不认为您可以使用`Interlocked`. 我相信你必须切换到一个数组`ints`，以便每一位都在它自己的`int`.

`Interlocked.CompareExchange`仅比较相等性，而您只需要比较一个位，除非您使用其他一些并发策略来保护该位所在的`int`其他更改，否则您无法做到这一点。`int`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T14:25:38.433

您需要线程安全的构造来跟踪并发任务的完成情况。因此，互锁结构总是比锁快（因为它们不需要锁），您*应该*`Interlocked`使用带有整数的 -class 中的静态方法（例如，0 等效于`false`1 `true`，例如 1）。

Jeffrey Richter 所做的与他在他的书“CLR via C#”第 28 章“原始线程同步构造”中所描述的相同。他还在他的 Wintellect.PowerThreading 库中介绍了基于 Interlocked 构造的自己的锁实现，并对他自己的实现和 .net 框架中包含的实现进行了出色的解释和时间比较。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-27T18:55:09.450

首先，不，所有互锁功能都在内存地址上工作，并且个别位不可寻址。

那么该怎么做呢？

我会调查两个选项：

*   根本不用担心数组：有一个简单的计数器，`InterlockedIncrement`每次任务完成时都会用到它。要查看是否所有任务都已完成，只需检查该值是否已达到 10,000。
*   或者，使用数组，以最小化（错误）数据共享。但是，您不应该尝试将其密集包装。走相反的路。确保每个条目都位于单独的 CPU 缓存行上，以便并行运行的任务不会争夺相同的缓存行。（然后，由于任务都写入不同的位置，它们甚至不必使用昂贵的互锁操作来设置它们的“完成”标志。）

我不知道哪个最快。如果性能很重要，请对其进行基准测试。:)

# bdd - 在前面的步骤失败时运行 Jbehave 故事中的后续步骤

> ID：13586079
> 
> 赞同：1
> 
> 时间：2012-11-27T14:11:42.263
> 
> 标签：bdd, jbehave

我有以下脚本输出：

```
Scenario: Continue after failed assert

Given value is 1
When value is added 1
Then new value is 2 (FAILED)
(java.lang.AssertionError: expected:<2> but was:<3>)
Then run after failed assert (NOT PERFORMED) 
```

即使上一步失败，是否可以使标记为“未执行”的步骤仍然运行？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T05:53:39.330

如果单个步骤失败，有一些方法可以运行其他故事（请参阅[忽略故事中的失败](http://jbehave.org/reference/stable/running-stories.html)部分）。然而，我用 JBehave 编写的大多数测试都依赖于应用程序处于正确的状态。因此，由于步骤失败而导致整个故事失败是必要的，因为如果任何步骤意外失败，我无法真正预测系统将处于什么状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T08:50:18.733

我认为不可能在该特定示例中运行额外的步骤。如果您之后有其他场景想要运行，无论之前的失败如何，请按照下面帖子答案中的步骤操作。

[JBehave：如何在场景中忽略失败](https://stackoverflow.com/questions/12192539/how-do-i-make-jbehave-ignore-failed-scenarios?rq=1)

# entity-framework - EF 代码首先不会创建新数据库

> ID：13586080
> 
> 赞同：0
> 
> 时间：2012-11-27T14:11:44.157
> 
> 标签：entity-framework, ef-code-first

我需要你的帮助！我在 Visual Studio 2010 中工作，尝试在 EF CodeFirst 的帮助下生成全新的 SQLEXPRESS DB 时没有任何错误，但没有新的自动生成的 DB。可能有什么问题？我正在编写数据模型类，然后添加一个 DBContext 类，并编写逻辑来创建一个新的 DataBaseEntry，然后我开始调试并且没有生成任何数据库

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T14:36:36.240

EF-Code First 中的数据库是在您首次访问数据时自动生成的（无需创建 DatabaseEntry）（在发送查询之前什么都不做）

您还可以通过从 DropCreateDatabaseIfModelChanges 或 DropCreateDatabaseAlways 继承（名称不言自明）并实现 Seed 方法来创建种子类。

然后，您必须将此类设置为初始化程序：

```
 Database.SetInitializer<MyContext>(new MySeedClass()) 
```

EF 第一次尝试访问您的数据库时，将调用您的种子类（如果需要）

更多信息：http: [//www.codeguru.com/csharp/article.php/c19999/Understanding-Database-Initializers-in-Entity-Framework-Code-First.htm](http://www.codeguru.com/csharp/article.php/c19999/Understanding-Database-Initializers-in-Entity-Framework-Code-First.htm)

# android - 如何使用 Android 浏览器启动 Skype

> ID：13586082
> 
> 赞同：1
> 
> 时间：2012-11-27T14:11:44.560
> 
> 标签：android, skype

作为标题，我在“a”标签的 href 属性中添加了“skype:name?call”。然后尝试用我的android(4.0)浏览器访问这个页面，但是点击这个链接后没有调用Skype客户端。

顺便说一句，它在 iPhone 上运行良好。

不知道原因并提前感谢。

# javascript - id 搜索仅适用于第一个元素

> ID：13586084
> 
> 赞同：0
> 
> 时间：2012-11-27T14:11:51.003
> 
> 标签：javascript, jquery

我有一个块：

```
<div class="col-1-4 local_links">
<table>
            <tr>
                <td>
                    <a href="#user_profile">User Profile</a><div class="arrow-selected"></div>
                </td>
            </tr>
            <tr>
                <td>
                    <a href="#dashboard">Dashboard</a>                  </td>
            </tr>
            <tr>
                <td>
                    <a href="#change_password">Change Password</a> 
                </td>
            </tr>
        </table>
 </div> 
```

[...一些代码....]

```
<div class="col-3-4 local_responses">
   <div class="content full" id="user_profile" style="display: block;">
     <h2>settings :: User Profile</h2>
   </div>
   <div class="content full" id="dashboard">
     <h2>settings :: Dashboard</h2>
   </div>
   <div class="content full" id="change_password">
     <h2>settings :: Change Password</h2>
   </div>
</div> 
```

和下面的一些js：

```
var local_links = $(".local_links");
var local_responses = $(".local_responses");

$(("a"),local_links).on("click", function(e){
    e.preventDefault();
    var id = $(this).attr("href");
    local_links.find("div.arrow-selected").remove();
    $(this).parent().append('<div class="arrow-selected"></div>');
    $(".content", local_responses).animate({opacity: 0});
    $(id, local_responses).animate({opacity: 1});
}); 
```

如果我执行 console.log(id) ...它会很好地显示 ID ...但它仅适用于第一个元素。我知道我错过了一些微不足道的东西。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T14:39:13.120

我很确定一切都可以与您的 jQuery 一起正常工作，但是仅动画`opacity`并不会神奇地将`display`样式从`none`to`block`或任何元素的值更改。我很确定您为`.content`to have设置了样式`display: none;`。当您为不透明度设置动画时，对于 div，它们`display`保持为`none`，除了第一个，因为默认情况下，它被覆盖`block`。您是否有任何理由制作动画`opacity`而不使用`fadeIn()`and之类的东西`fadeOut`？

此外，由于您将 an 存储`id`在 中`href`，因此无需执行诸如`$(id, local_responses)`...just use之类的操作`$(id)`。看看这个：

[http://jsfiddle.net/SgwyM/](http://jsfiddle.net/SgwyM/)

```
var local_links = $(".local_links");
var local_responses = $(".local_responses");

$(local_links).on("click", "a", function(e){
    e.preventDefault();
    var id = $(this).attr("href");
    local_links.find("div.arrow-selected").remove();
    $(this).parent().append('<div class="arrow-selected"></div>');
    $(".content", local_responses).fadeOut(400);
    $(id).delay(400).fadeIn(400);
}); 
```

需要注意的是，我更改了`on`绑定，因为这样，它不会为每个`<a>`找到的事件创建一个事件处理程序——它为 中的每个项目创建一个`local_links`，但只为选择器执行`"a"`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T14:59:16.640

我不确定您到底在寻找什么行为，但是将您的代码原封不动地发布到[http://jsfiddle.net/CrossEye/hApgg/](http://jsfiddle.net/CrossEye/hApgg/)，我似乎让它在所有三个链接上都能正常工作。

我不知道你为什么写括号来包装`"a"`下面的内容：

```
$(("a"),local_links).on("click", function(e){ //... 
```

这同样适用：

```
$("a", local_links).on("click", function(e){ // ... 
```

但他们也没有伤害任何东西。

那么这个小提琴会重复你的问题吗？如果不是，那么问题出在您发布的代码以外的代码中。

# php - chrome 扩展图标下的数字

> ID：13586091
> 
> 赞同：0
> 
> 时间：2012-11-27T14:12:05.607
> 
> 标签：php, javascript, google-chrome-extension, icons

有人可以告诉我如何将函数 chrome.browserAction.setBadgeText 在 chrome 扩展中的图标下显示数字。该数字需要从 php 文件中的变量中获取，但它可以在 chrome.php 之外的另一个文件中。我的文件：

清单.json：

```
{
  "name": "Mysite",
  "version": "0.9.1",
  "manifest_version": 2,
  "description": "My Description.",
  "browser_action": {
      "default_icon": "icon.png",
      "default_popup": "chrome.html"
  },
  "permissions": [
    "http://www.mysite.com/",
    "tabs"
  ]
} 
```

铬.html：

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>MySite</title>
<script src="ajax.js"></script>
<link rel="stylesheet" href="styles.css" type="text/css" media="all">
</head>
<body>
<div id="resultado" style="font-family: Arial;"></div>
</body>
</html> 
```

ajax.js：

```
window.onload = function() {
var XHR = new XMLHttpRequest;
chrome.tabs.query({
 active: true,
 currentWindow: true
}, function(tab) {

tabUrl = tab[0].url;
XHR.open('GET', 'http://www.mysite.com/chrome/chrome.php?tab=' + tabUrl + '', true);
XHR.onreadystatechange = function() {
  if(4 == this.readyState) {
    var status = this.status;
    if(400 > status) {
      var responseText = this.responseText;
      if(responseText) {
        document.getElementById('resultado').innerHTML = responseText;

      }
    }
  }
};
XHR.send();
});
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T11:40:21.160

> “权限”：[ **“http://www.mysite.com/”**，“标签”]

匹配模式不正确。请改用*“http://www.mysite.com/”**。查看[https://developer.chrome.com/extensions/match_patterns.html](https://developer.chrome.com/extensions/match_patterns.html)了解更多信息。

# javascript - jQuery 等高和动态内容

> ID：13586092
> 
> 赞同：0
> 
> 时间：2012-11-27T14:12:11.730
> 
> 标签：javascript, jquery, html, height, equals

我找到了以下 jQuery，它非常适用于当您在标签之间单击时在页面上加载的网格中没有动态内容的页面。默认情况下，网格的一个选项卡部分将使用下面的 jQuery 正确调整相等高度，但是当用户然后单击其他选项卡之一以将其他内容加载到网格中时（其中网格是更多内容)，等高jQuery不调整，导致网格中的内容超出页脚或网格之外和下方的其他内容。

有人可以用提供的 jQuery 帮助我，以便动态调整相等的高度吗？

谢谢！

```
$(document).ready(function () {
    $('.content').each(function () {
        var highestBox = 0;
        $('.equalcontentcolumn', this).each(function () {
            if ($(this).height() > highestBox)
                highestBox = $(this).height();
        });

        $('.equalcontentcolumn', this).height(highestBox);
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T14:15:02.117

您应该将此代码/功能添加到更改选项卡事件中。因为此代码只会在加载时运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T14:17:25.910

如果将`$('.content).each`块包装在函数中，则可以在需要时调用该函数以重新应用高度均衡，例如单击选项卡时，例如

```
$(document).ready(function () {

    function equaliseIt() {
        $('.content').each(function () {
            var highestBox = 0;
            $('.equalcontentcolumn', this).each(function () {
                if ($(this).height() > highestBox)
                    highestBox = $(this).height();
            });

            $('.equalcontentcolumn', this).height(highestBox);
        });
    }

    //call the function at page load
    equaliseIt();  
}); 
```

你如何改变标签？您是使用插件还是手动操作？

如果使用插件，您可能有权访问一个`tabchange`事件或类似事件，该事件将在选项卡更改后触发，因此您可以使用它来调用`equaliseIt()`函数

如果您要手动更改选项卡，只需在更改选项卡后调用该函数

# java - 今天jpql日期比较

> ID：13586098
> 
> 赞同：13
> 
> 时间：2012-11-27T14:12:51.033
> 
> 标签：java, jpa, jpql

我需要一个 jpql 查询来查找所有 FinishDate 大于当前日期（从 00:00:00 开始）的 LoadFileHistory。例如大于 27/11/2012 00:00:00。

我已经有了这个“从 LoadFileHistory o 中选择 o，其中 o.finishDate = CURRENT_DATE”，但什么也没得到。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-27T14:20:09.423

你应该得到今天的查询日期，就像[这里](https://stackoverflow.com/questions/829510/getting-todays-date-in-java-ive-tried-the-regular-ways)详述的那样（java.util.Date 也有小时、分钟、秒......）

您应该将其提供给您的查询：

```
Query q = em.createQuery("select o from LoadFileHistory o where o.finishDate > :today ");
q.setParameter("today",todaysDateObject,TemporalType.DATE);
q.getResultList(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-08-23T08:45:23.313

如果您正在寻找带有日期的时间级别过滤。这对我有用。

```
Date now = DateUtils.addMinutes(new Date(), -15);
Query q = em.createQuery("Select u From Users u Where u.dateCreated > :today");
q.setParameter("today",now,TemporalType.TIMESTAMP); 
```

DateUtils 是 apache 常见的。

# list - Erlang：lists:keyfind/3 vs dict:from_list/1 + dict:fetch/2 或 dict:find/2

> ID：13586099
> 
> 赞同：1
> 
> 时间：2012-11-27T14:12:50.710
> 
> 标签：list, dictionary, erlang

如果我有一个键值元组列表，例如 List = [{key1, value1}, {key2, value2}] 最好使用

列表：keyfind(Key, N, TupleList) 例如列表：keyfind(key1, 1, List)

找到一个给定的值或

dict:from_list(列表)

把它变成一个字典，然后用 dict:fetch/2 或 dict:find/2 查找？

使用 dict 对我来说更具可读性，因为它直接返回值，所以我可以内联使用它，但是我想知道哪个更有效？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T15:45:19.437

您还可以选择使用 proplists:lookup()，它是 stdlib 的一部分，并且务实地是表达您正在做的事情的最惯用的方式。您将以原始形式操纵结构，您的程序员同行会为此感谢您。从下面的链接中可以看出，就效率而言，遍历列表直到找到匹配项，任何进一步出现的键都将被忽略。

[proplists.erl](https://github.com/erlang/otp/blob/maint/lib/stdlib/src/proplists.erl#149)

列表的使用：keyfind() 是另一个不太习惯的选项，因此在我看来，在保持与使用结构作为 proplist 的一致性方面失去了观点。lists:keyfind() 是一个 BIF，它只告诉我们用 C 实现并不一定是因为效率，而是很有可能。

最后，在我看来，使用列表来 dict 并没有让您利用可读性，并且在最初构思数据结构的方式方面您将失去一致性，与其他两个相比可能效率较低，因为您遍历列表把它变成一个字典，然后你用字典接口查找结构，所以在我看来你是在失去而不是得到。

我的两分钱！

# .net - .net 休息服务的 JSON 日期时间格式问题

> ID：13586113
> 
> 赞同：0
> 
> 时间：2012-11-27T14:13:30.490
> 
> 标签：.net, json, web-services, rest

我的客户正在向 .net rest 服务发布一个对象。在对象中，一个属性是日期时间。客户将日期时间值发布为

> 2012-11-16T17:30:53.000Z

因此，我收到了 400 个错误请求。当我捕获 json 对象并将日期时间格式更改为

> /日期（928164000000-0400）/

我得到200好。

我不想修复客户，因为我的选择有限。.net rest 服务中是否有任何标准方式来接收日期时间作为字符串，如上所示。Web 上的大多数示例都使用 HTTP GET，因此客户端在收到客户端的日期时间后稍后对其进行格式化。

# java - 仅选择查询的第一个和最后一个结果的有效条件查询？

> ID：13586114
> 
> 赞同：1
> 
> 时间：2012-11-27T14:13:30.817
> 
> 标签：java, hibernate, hibernate-criteria

我有一个按顺序查询的大型数据集。我只对第一行和最后一行感兴趣。很容易得到第一个结果（使用`Criteria.setMaxResult()`），我可以通过颠倒顺序得到最后一个结果。

但是，要同时获得它们似乎需要两个查询，这对数据库可能不是很有效。由于这很容易用 SQL 实现，我想知道如何制定一个高级标准查询，可以一次获得它们？

请不要建议检索所有这些并获取列表的第一个和最后一个元素，因为数据集非常大，从数据库中读取所有这些元素需要几分钟。

我希望这个查询可以独立于数据库，但如果这并不容易，那么假设目标数据库是 Oracle。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T21:07:59.590

您可以尝试使用[`ScrollableResults`](http://docs.jboss.org/hibernate/orm/3.6/javadocs/org/hibernate/ScrollableResults.html)：

```
Criteria criteria = ...;
ScrollableResults scroll = criteria.scroll();
Object[] firstRow = scroll.get();  // or use other methods for getting the data
scroll.last();
Object[] lastRow = scroll.get(); 
```

请注意，这可能需要比运行两个查询[更长的时间。](https://stackoverflow.com/questions/2826319/using-hibernates-scrollableresults-to-slowly-read-90-million-records)但这取决于您使用的数据库。

# css - 响应式网站的 Retina 照片支持

> ID：13586117
> 
> 赞同：2
> 
> 时间：2012-11-27T14:13:43.457
> 
> 标签：css, responsive-design, image

我遇到了一些将视网膜照片提供给具有 2 倍像素密度的设备的脚本：

*   [Retina.js](http://retinajs.com) — 似乎显示背景，而不是内联图像：寻找`@2x`文件名。
*   [Retinise.js](http://dahliacreative.com/retinisejs/) — 使用`data-src`，那是什么？浏览器支持如何？
*   [自动条件视网膜图像](http://shauninman.com/tmp/retina/)- 使用 .htaccess`mod_rewrite`和简单的 JS。

（我在这里忽略了 CSS 背景图像，**只关注`img`照片元素**——忽略图形，因为我试图将它们作为 SVG 提供。）

我想确保支持视网膜图像的设备得到完整的说明，而低带宽（即小屏幕）的设备没有（这样他们就不必同时下载两者）。

**哪种解决方案遵循移动优先和语义方法的最佳实践？**

* * *

似乎响应式图像仍然没有一致的最佳解决方案（关于带宽等），并且将其与视网膜图像相结合会使它变得更加复杂......

我之所以问，是因为 Retina.js 文档似乎暗示因为它使用`data-src`了 ，所以只下载了所需的图像——这是否意味着因为 Retina.js 使用`src`了它，所以两者都下载了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T08:48:11.103

我编写了 retinise.js，因为那里的许多视网膜解决方案实际上都提供了这两个图像，这意味着用户需要大量带宽，通过使用自定义数据属性，您可以停止浏览器下载原始图像。

然而，我的插件没有考虑用户的连接类型，例如 3g 与 WiFi，因为目前除了进行简单的速度测试之外没有其他方法可以检测到这一点，您可以修改我的插件以包含它。

我已经在我现在创作的几个网站上使用了这个项目，结果都很好:)

至于较旧的浏览器支持，只要启用 JS，它就可以工作，因为 data-src 被替换为 src 属性。

要支持非 JS 浏览器，您可以只使用 no script 标签，如文档中所述。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T14:46:27.803

我不确定响应式图像没有最佳解决方案，`max-width:100%`对我来说总是足够好。

`data-``rel`属性是 HTML5 的新特性，允许您在不滥用属性的情况下向元素添加任何自定义数据。Bootstrap 大量使用`data-`属性，jQuery Mobile 也是如此。

是的，我认为 Retina.js 确实（或至少曾经）为设备提供两种尺寸的图像，但只显示了一种。如果 Retinise 克服了这一点，我会说这是一个巨大的好处

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-19T22:32:55.010

我刚刚开始使用 ZURB Foundation Interchange，到目前为止我真的很喜欢它。 [http://foundation.zurb.com/docs/components/interchange.html](http://foundation.zurb.com/docs/components/interchange.html)

您使用带有空 src 标记的数据交换属性，然后交换写入基于内置或自定义 @media 查询的正确 src 位置。

这是一个例子：

```
<img data-interchange="[/path/to/default.jpg, (default)], [/path/to/bigger-image.jpg, (large)]"> 
```

# ios - 反转Segue时如何将信息传回iOS？

> ID：13586123
> 
> 赞同：5
> 
> 时间：2012-11-27T14:13:56.530
> 
> 标签：ios, xcode, navigation

我有两个视图控制器，一个和两个。我从 VC 1 转到 VC 2。在 VC 2 上，我选择了一些存储在数组中的数据。当我按下导航栏上的“返回”按钮时，我想将该数组发送回 VC One。

最好的方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-27T14:46:28.197

为什么不在您的第二个视图控制器上设置第一个可以注册的委托属性。那么当信息存储到数组时，也可以传回给它的delegate？

为了实现这个

在您的第二个视图控制器 .h 文件的顶部，您需要声明`@protocol`第一个视图控制器可以实现的。协议类似于其他语言的接口。这是一种确保对象实现某些方法的方法，而无需具体了解该对象是什么（在本例中为视图控制器 1）。

```
@protocol MyDataDelegate

- (void)recieveData:(NSArray *)theData

@end 
```

并且还为委托声明一个属性，第一个视图控制器可以像在呈现第二个视图控制器之前一样设置它自己

```
@interface SecondViewController

@property (nonatomic, weak) id<MyDataDelegate> delegate; 
```

然后在你的第一个视图控制器`.h`文件中，像这样实现协议

在`.h`文件中

```
#import SecondViewController.h

@interface FirstViewController <MyDataDelegate>

//..... 
```

并在 中`.m`，实现协议中声明的方法

```
@implementation

//.... usual methods

- (void)recieveData:(NSArray *)theData {

    //Do something with data here
} 
```

为了将第一个视图控制器设置为委托，您需要使用 UIStoryBoardDelegate 方法在它发生之前拦截它。将此添加到第一个视图控制器

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

    //Get a handle on the view controller about be presented
    SecondViewController *secondViewController = segue.destinationViewController;

    if ([secondViewController isKindOfClass:[SecondViewController class]]) {
        secondViewController.delegate = self;
    }
} 
```

现在你有一个从第二个视图控制器指向第一个视图控制器的指针，并且可以通过在第二个视图控制器中调用以下方法来调用方法并传回数据

`[self.delegate recieveData:theArrayData];`

如果需要，您还可以向协议添加另一个方法来通知委托第二个视图控制器正在被解除。或使用其他答案中的一些建议

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-28T09:59:54.563

如果您使用的是 iOS 6，您可以使用 UnwindSegues 将信息返回到堆栈中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T14:23:05.503

可能最简单的方法是使用`NSNotification`. 在您`prepareForSegue:`的 VC 1 中，收听来自 VC 2 的自定义通知。当 VC 2 想要发送数组时——也许在它的数组中`viewWillDisappear`——它会发布该通知并将数组作为通知对象传递。VC One 收到通知，此时停止侦听并使用阵列。

# python - “int”对象不是可迭代的 GIS 脚本

> ID：13586125
> 
> 赞同：3
> 
> 时间：2012-11-27T14:14:02.477
> 
> 标签：python, object, int, iterable

我是python的新手。我正在尝试使用一些 arcpy 函数在 python 中运行脚本（ArcGIS 在 arc 站点上没有乐趣），但它返回 object is not iterable 消息。该脚本应该逐步遍历光栅图像上的移动窗口过滤器，从而为每个过滤器大小（例如 3 像素、4 像素等）生成图像。

我想逐步移动窗口大小，直到使用邻域过滤器达到一个范围内的定义数量（在本例中范围是 3 - 10）。因此 NbrCircle(3, "CELL") 中的值 3 使用脚本中的 for 和 if 语句逐步遍历范围。任何人都知道我可以如何克服这个问题？

这是导致问题的脚本部分：

**变量**

```
radius = 3

it_1 = range(3, 10, 1)

neighborhood = NbrCircle(radius, "CELL") 
```

**执行焦点统计**

```
outFocalStatistics1 = FocalStatistics(outSlope, neighborhood, "MEAN" 
                                  "") 
```

**循环根据变量 it_1 逐步移动窗口大小**

```
for num in radius:
    if it_1 > 3:
        radius = num + radius 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T18:54:32.533

自从您发布此内容以来已经有一段时间了。你还在寻找答案吗？如果你想：从radius=3开始；然后将半径增加到 4, 5, 6...10 以循环遍历 neighbor=NbrCircle(radius, "CELL") 尝试：

```
for num in range(3, 10):
    neighborhood=NbrCircle(num, "CELL") 
```

如果这不是您需要的，请告诉我“半径”数应该如何增加——就像第一次迭代的例子一样。

# c# - 在 C# 中从共享网络驱动器加载 dll

> ID：13586128
> 
> 赞同：4
> 
> 时间：2012-11-27T14:14:21.240
> 
> 标签：c#, dll

我可以使用这种形式加载 dll -

```
System.Reflection.Assembly assembly =
System.Reflection.Assembly.LoadFile(@"C:\Users\amit.pandey\Documents\Visual Studio 2010\Projects\bin\Release\EUtility.dll"); 
```

但是我需要通过以下方式从共享网络驱动器加载 dll -

```
System.Reflection.Assembly assembly =
System.Reflection.Assembly.LoadFile(@"\\falmumapp20\EUtility.dll"); 
```

我知道这是由于信任问题引起的。我尝试了各种可用的代码，但无法正常工作。有人可以帮我提供从网络驱动器加载 dll 的示例代码吗？

我想在代码本身中执行此操作，而不更改任何配置文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T14:32:28.017

您需要告诉机器信任该位置。

您可以使用[caspol](http://blogs.msdn.com/b/shawnfa/archive/2004/12/30/344554.aspx)实用程序执行此操作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-10-10T08:18:28.297

您可以使用 Assembly.UnsafeLoadFrom，而不是加载二进制内容。请参阅[http://msdn.microsoft.com/en-us/library/system.reflection.assembly.unsafeloadfrom%28v=vs.110%29.aspx](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.unsafeloadfrom%28v=vs.110%29.aspx)

这对我来说在所有方面都很好。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-09-21T04:26:23.090

或者，从磁盘加载文件并调用`Assembly.Load`字节数组似乎可以工作（框架 4）：

```
 string Share = @"R:\Test\TestAssembly.dll";
        byte[] AssmBytes = File.ReadAllBytes(Share);
        Assembly a = Assembly.Load(AssmBytes);

        //Invoking a method from the loaded assembly
        var obj = a.CreateInstance("TestAssembly.Class1");
        obj.GetType().InvokeMember("HelloWorld", BindingFlags.InvokeMethod, null, obj, null); 
```

由于 MS 阻止网络加载`LoadFrom()`，这表明这样做可能不是最佳实践。但是，这与将程序集作为资源嵌入 EXE 中经常使用的过程类似。

# c# - 朝着它面对的方向前进

> ID：13586132
> 
> 赞同：0
> 
> 时间：2012-11-27T14:14:32.320
> 
> 标签：c#, math, object, xna, rotation

我的问题是我有一个对象我想朝它所面对的方向前进，现在我可以旋转它，但无法让它前进。谁能告诉我如何解决这个问题？部分代码（注释是瑞典语，但函数的作用应该可以理解）

**游戏代码：**

```
namespace MultiPlayerTanks
{
    public class Game1 : Microsoft.Xna.Framework.Game
    {
        GraphicsDeviceManager graphics;
        SpriteBatch spriteBatch;

        Tank Player1, Player2; //skapa två spelare/tanks
        GameObj Bana; //Skapa ett GameObj som ska användas som bana
        SpriteFont font; //Spritefont för utskrift
        Meter PowerMeter,PowerMeter2, Player1LifeMeter, Player2LifeMeter; //Mätare för liv och kraft

        List<Shot> allShots = new List<Shot>();
        List<Shot> allShots2 = new List<Shot>();//Ny lista för alla skott(-objekt)
        Texture2D shot1Gfx; //Grafik till skotten

        List<Explosion> allExplosions = new List<Explosion>();
        List<Explosion> allExplosions2 = new List<Explosion>();//Ny lista för alla explosioner
        Texture2D explosionGfx; //Grafik till explosionen
        string displayMessage = ""; //Text som skalman skrivas ut

        public Game1()
        {
            graphics = new GraphicsDeviceManager(this);
            Content.RootDirectory = "Content";

            // Change of resolution.
            this.graphics.PreferredBackBufferWidth = 800;
            this.graphics.PreferredBackBufferHeight = 600;

            //this.graphics.IsFullScreen = true;
        }

        protected override void Initialize()
        {
            base.Initialize();
        }

        protected override void LoadContent()
        {
            spriteBatch = new SpriteBatch(GraphicsDevice);

            //Ladar in grafiken
            Texture2D greenTankGfx = Content.Load<Texture2D>("green_tank");
            Texture2D redTankGfx = Content.Load<Texture2D>("red_tank");
            Texture2D level1Gfx = Content.Load<Texture2D>("level");
            Texture2D redMeterGfx = Content.Load<Texture2D>("meter");
            Texture2D lifeMeterGfx = Content.Load<Texture2D>("life_meter");
            shot1Gfx = Content.Load<Texture2D>("shot");
            explosionGfx = Content.Load<Texture2D>("explosion");
            //Load basic texture to make it recognizable :)

            //Skapa Objekt
            //Tilldelning av properties direkt.. slipper skriva konstruktorer
            Player1 = new Tank()
            {
                Gfx = greenTankGfx,
                Position = new Vector2(400, 300),
                Speed = 0,
                Direction = new Vector2(0, -1),
                Enemy = false
            };
            Player2 = new Tank()
            {
                Gfx = redTankGfx,
                Position = new Vector2(400, 300),
                Speed = 0,
                Direction = new Vector2(0, -1),
                Enemy = true
            };
            Bana = new GameObj() { Gfx = level1Gfx, Position = new Vector2(0, 0), Angle = 0 };
            PowerMeter = new Meter() { Gfx = redMeterGfx, Position = new Vector2 (Player1.Position.X,Player1.Position.Y) };
            PowerMeter2 = new Meter() { Gfx = redMeterGfx, Position = new Vector2(Player2.Position.X,Player2.Position.Y) };
            Player1LifeMeter = new Meter() { Gfx = lifeMeterGfx, Position = new Vector2(50, 50) };
            Player2LifeMeter = new Meter() { Gfx = lifeMeterGfx, Position = new Vector2(250, 50) };
            font = Content.Load<SpriteFont>("SpriteFont1");
        }

        protected override void UnloadContent()
        {
        }

        protected override void Update(GameTime gameTime)
        {
            Player1.Update(gameTime);   //Uppdatera spelare1
            Player2.Update(gameTime);
            //Sätter Kraftmätarens värde till vår spelares "skottkraft"
            PowerMeter2.Value = Player2.ShotPower;
            PowerMeter.Value = Player1.ShotPower;
            //Sätter Livmätarnas värde till resp. spelares liv-värde
            Player1LifeMeter.Value = Player1.Life;
            Player2LifeMeter.Value = Player2.Life;

            #region player 2 shotfired
            if (Player2.ShotFired) //Ifall ett skott avfyrats
            {
                //Lägger till ett nytt skott i listan
                allShots2.Add(new Shot()
                {
                    Gfx = shot1Gfx,
                    Position = Player2.Position + (Player2.Direction * (Player2.Gfx.Height) / 2) +
                                (Player2.Direction * shot1Gfx.Height / 2),
                    Angle = Player2.Angle,
                    Speed = 5.0F + Player2.Speed,
                    Power = Player2.ShotPower,
                    Direction = Player2.Direction
                });
                Player2.ShotPower = 0;
                Player2.ShotFired = false;
            }
            for (int i = 0; i < allShots2.Count; i++) //Loopar igenom alla skott
            {
                allShots2[i].Update(gameTime); //uppdaterar skott
                if (allShots2[i].Power < 0) //Är skottets "kraft" slut?
                {
                    //Lägg till en ny Explosion
                    allExplosions2.Add(new Explosion() { Gfx = explosionGfx, Position = allShots2[i].Position });
                    allShots2.RemoveAt(i); //Tar bort skottet
                }
            }
            for (int i = 0; i < allExplosions2.Count; i++) //Loopa igenom alla explosioner
            {
                allExplosions2[i].Update(gameTime); //Uppdatera explosion
                //Ta bort "färdiga" explosioner
                if (allExplosions2[i].Active == false) allExplosions2.RemoveAt(i);
            }

            #endregion
            if (Player1.ShotFired) //Ifall ett skott avfyrats
            {
                //Lägger till ett nytt skott i listan
                allShots.Add(new Shot()
                {
                    Gfx = shot1Gfx,
                    Position = Player1.Position + (Player1.Direction * (Player1.Gfx.Height) / 2) +
                                (Player1.Direction * shot1Gfx.Height / 2),
                    Angle = Player1.Angle,
                    Speed = 5.0F + Player1.Speed,
                    Power = Player1.ShotPower,
                    Direction = Player1.Direction
                });
                Player1.ShotPower = 0;
                Player1.ShotFired = false;
            }
            for (int i = 0; i < allShots.Count; i++) //Loopar igenom alla skott
            {
                allShots[i].Update(gameTime); //uppdaterar skott
                if (allShots[i].Power < 0) //Är skottets "kraft" slut?
                {
                    //Lägg till en ny Explosion
                    allExplosions.Add(new Explosion() { Gfx = explosionGfx, Position = allShots[i].Position });
                    allShots.RemoveAt(i); //Tar bort skottet
                }
            }
            for (int i = 0; i < allExplosions.Count; i++) //Loopa igenom alla explosioner
            {
                allExplosions[i].Update(gameTime); //Uppdatera explosion
                //Ta bort "färdiga" explosioner
                if (allExplosions[i].Active == false) allExplosions.RemoveAt(i);
            }
        }
        protected override void Draw(GameTime gameTime)
        {
            GraphicsDevice.Clear(Color.Black);

            spriteBatch.Begin();
            //Ritar ut bana, spelare och mätare
            Bana.Draw(spriteBatch, new Vector2(0,0));
            PowerMeter.Draw(spriteBatch, Player1.Position);
            PowerMeter2.Draw(spriteBatch, Player2.Position);
            Player1.Draw(spriteBatch, Player1.Position);
            Player2.Draw(spriteBatch, Player2.Position);
            Player1LifeMeter.Draw(spriteBatch, new Vector2(0, 0));
            Player2LifeMeter.Draw(spriteBatch, new Vector2(0, 0));

            //Loopar igenom alla skott och ritar ut dem
            for (int i = 0; i < allShots.Count; i++)
            {
                allShots[i].Draw(spriteBatch, Player1.Position);
            }

            //Loopar igenom alla explosioner och ritar ut dem
            for (int i = 0; i < allExplosions.Count; i++)
            {
                allExplosions[i].Draw(spriteBatch, Player1.Position);
            }
            ///////////////////////////////////////////////////
            for (int i = 0; i < allShots2.Count; i++)
            {
                allShots2[i].Draw(spriteBatch, Player2.Position);
            }

            //Loopar igenom alla explosioner och ritar ut dem
            for (int i = 0; i < allExplosions2.Count; i++)
            {
                allExplosions2[i].Draw(spriteBatch, Player2.Position);
            }

            //Skriver ut spelarnas namn och liv mm..
            string nameFormat = "{0}\nLife: {1}%\n\nKills: {2}";
            displayMessage = string.Format(nameFormat, "Player1", Player1.Life, Player1.Kills);
            spriteBatch.DrawString(font, displayMessage, new Vector2(51, 4), Color.Black);
            spriteBatch.DrawString(font, displayMessage, new Vector2(50, 5), Color.White);
            displayMessage = string.Format(nameFormat, "Player2", Player2.Life, Player2.Kills);
            spriteBatch.DrawString(font, displayMessage, new Vector2(251, 4), Color.Black);
            spriteBatch.DrawString(font, displayMessage, new Vector2(250, 5), Color.White);
            spriteBatch.End();

            base.Draw(gameTime);
        }
    }
} 
```

**游戏对象代码：**

```
namespace MultiPlayerTanks
{
    class GameObj
    {
        public Vector2 Position //Objektets position
        {
            get;
            set;

        }

        public Texture2D Gfx //Objektets grafik
        {
            get;
            set;
        }
        public float Angle //Objektets vinkel
        {
            get;
            set;
        }
        public virtual void Draw(SpriteBatch spriteBatch, Vector2 DrawOffset)
        {
            spriteBatch.Draw(Gfx,
                Position - DrawOffset + new Vector2(400, 300), null,
                Color.White, Angle + (float)Math.PI / 2,
                new Vector2(Gfx.Width / 2, Gfx.Height / 2), 1.0f,
                SpriteEffects.None, 0);
        }
    }
} 
```

**移动游戏对象代码：**

```
namespace MultiPlayerTanks
{
    class MovingGameObj : GameObj
    {
        public Vector2 Direction //Riktning 
        {
            get;
            set;
        }
        public float spriterotation //Hastighet
        {
            get;
            set;
        }
        public float Speed //Hastighet
        {
            get;
            set;
        }

        public virtual void Update(GameTime gameTime)
        {

            Position += Direction * Speed;
        }
    }
} 
```

**坦克代码：**

```
namespace MultiPlayerTanks
{
    class Tank : MovingGameObj
    {
        public Tank()
        {
            MaxSpeed = 2.5F;
            ShotPower = 0;
            prevKs = Keyboard.GetState();
            prevKs2 = Keyboard.GetState();
            Life = 100F;
            Kills = 0;
            Angle = -(float)(Math.PI / 2);

        }

        public bool Enemy
        {
            get;
            set;
        }
        public float MaxSpeed
        {
            get;
            set;
        }
        public float ShotPower
        {
            get;
            set;
        }
        public int WeaponType
        {
            get;
            set;
        }
        public bool ShotFired
        {
            get;
            set;
        }
        public float Life
        {
            get;
            set;
        }
        public int Kills
        {
            get;
            set;
        }
        protected KeyboardState prevKs;

        protected KeyboardState prevKs2;
        public void Respawn()
        {
            Life = 100F;
            Random randomerare = new Random();
            Position = new Vector2(randomerare.Next(1000), randomerare.Next(1000));
            Angle = 0;

        }
        public override void Update(GameTime gameTime)
        {

            KeyboardState ks = Keyboard.GetState();
            KeyboardState ks2 = Keyboard.GetState();
            #region Player 1
            if (Enemy == false)
            {
                if (ks.IsKeyDown(Keys.Up))
                {
                    if (Speed < 0) Speed = 0;
                    if (Speed < MaxSpeed) Speed = Speed * 1.005F + 0.01F;
                    else Speed = MaxSpeed;

                }
                if (ks.IsKeyDown(Keys.Down))
                {
                    if (Speed > -1.0F) Speed -= 0.04F;
                    else Speed = -1.0F;
                }
                if (ks.IsKeyUp(Keys.Down) && ks.IsKeyUp(Keys.Up) && Speed > 0)
                {
                    Speed -= 0.01F;
                    if (Speed <= 0) Speed = 0;
                }
                if (ks.IsKeyUp(Keys.Down) && ks.IsKeyUp(Keys.Up) && Speed < 0)
                {
                    Speed += 0.01F;
                    if (Speed >= 0) Speed = 0;
                }

                if (ks.IsKeyUp(Keys.Left))
                {
                    Angle += 0.02F;
                }
                if (ks.IsKeyUp(Keys.Right))
                {
                    Angle -= 0.02F;
                }
                if (ks.IsKeyDown(Keys.Space))
                {
                    if (ShotPower < 100)
                        ShotPower += 0.5F;
                    else
                        ShotPower = 100;
                }

                if (ks.IsKeyUp(Keys.Space) && prevKs.IsKeyDown(Keys.Space))
                {
                    //ShotPower = 0;
                    ShotFired = true;
                }
            }
            #endregion

            prevKs = ks;
            Direction = new Vector2((float)Math.Cos(Angle), (float)Math.Sin(Angle));

            base.Update(gameTime);
        }
    }
} 
```

我尝试了很多不同的东西，但似乎没有任何效果。我想要的是，当我按下 W 时，“坦克”会朝其面对的方向前进。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T14:22:08.920

我没有深入检查您的代码，但通常它很简单

```
position = position + directionVector * velocity * deltaTime; 
```

请记住，您可以使用调试器来定位问题，在 中添加一个`breakpoint`以`if(Enemy == false)`查看您认为哪些条件有效而哪些条件无效。

此外，在这样的代码中，始终`deltaTime`在递增/递减值时使用 your

**编辑**：虽然你的代码对我来说看起来“功能性”，但请记住，**前进**/**后退**映射在**向上**和**向下**箭头上......**不像**你在问题中问的那样，这是唯一不起作用的东西吗？如果是这样，只需替换`Keys.Up`为`Keys.W`...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T14:28:02.810

已经很晚了，我很累，所以这是您想要使用的答案。

你有一个名为“角度”的旋转，偏移量为“PI / 2”，我将把它称为“r”来表示旋转，所以：

```
float r = Angle + (float)Math.PI / 2 
```

你需要做的是旋转一个前向矢量来匹配它，当我需要一个快速前向矢量时，我就是这样做的。首先，我们需要一个标准的前向向量，它是 r = 0 的坦克的前向向量，即：

```
Vector2 v = new Vector2(0, -1) 
```

这是一个直接在屏幕上的向量。如果我们将它旋转 r，那么我们就有了前向向量。我将使用四元数来做到这一点。

```
Quaternion q = Quaternion.CreateFromAxisAngle(new Vector3(0, 0, 1), r);

v = Vector2.Transform(v, q) 
```

这将返回一个旋转矢量，该矢量将是坦克的前部。

你可能需要用一个偏移角度来调整它，已经很晚了，我很累，不应该发帖……

# android - 主屏幕小部件中的自动调整文本大小

> ID：13586133
> 
> 赞同：2
> 
> 时间：2012-11-27T14:14:32.690
> 
> 标签：android, android-widget, widget, textview, android-appwidget

试图让 TextView 中的文本自动调整到主屏幕小部件的大小。有一些非常好的类可以扩展 TextView，但我似乎无法让这些类与 RemoteViews 一起使用。（不确定是否有可能）。

使用可调整大小的小部件，我觉得奇怪的是没有标准的方法来调整文本大小以适应小部件的大小。

谢谢。

# sublimetext2 - Sublime 不想打开隐藏文件夹

> ID：13586134
> 
> 赞同：0
> 
> 时间：2012-11-27T14:14:33.067
> 
> 标签：sublimetext2, finder

我是 Sublime Text 的新用户。今天，我写了我的第一个片段，当我试图保存他时，Sublime 将我发送到我的用户文件夹。然后我试图找到“库”文件夹，但 Sublime 没有看到它。我尝试从快速保存中打开“Packages”文件夹（在“另存为”附近向下箭头，然后是第二行，“位置”），但它没有打开。Finder 可以看到所有文件夹，当然也包括隐藏的。非常感谢任何有关如何识别/解决问题的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T14:50:59.820

当您创建和保存一个片段时，ST2 的默认设置是提示您将其保存在您的`User`文件夹中，即

`~/Library/Application Support/Sublime Text 2/Packages/User`，而不是您的`home`目录，这似乎是您问题的症结所在。

将您的代码段保存在 中`~/Library/Application Support/Sublime Text 2/Packages/User`，或在其中创建一个代码段文件夹，即

`~/Library/Application Support/Sublime Text 2/Packages/User/my_snippets`

默认情况下，ST2**显示**隐藏目录。默认情况下隐藏的唯一目录是

`folder_exclude_patterns": [".svn", ".git", ".hg", "CVS"]`

# c++ - 链表查找函数 C++

> ID：13586135
> 
> 赞同：0
> 
> 时间：2012-11-27T14:14:33.803
> 
> 标签：c++

您将如何在非模板化 C++ 链表中实现查找函数？

remove 函数的实现方式如下：

```
 bool LinkedList::remove(Node* n)
 {
      Node *temp = front, *prev = 0;

      for(int i = 0;i < size; i++)
      {
           if (temp == n) 
           {
                if (temp == front)
                {
                     front = n->next;
                } 
                else 
                {
                     prev->next = temp->next;
                }

               delete temp;
               size --;
               return true;
          }
          prev = temp;
          temp = temp->next;
     }
     return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T14:20:58.493

这里有一个提示：该`remove()`函数已经完成了几乎所有`find()`需要做的事情。您只需要弄清楚要保留哪些位以及要摆脱哪些位。如果有的话，您需要添加的东西将是最少的。它将取决于`find()`您未指定的 API。

# html - html之前的标签不能正常工作

> ID：13586150
> 
> 赞同：0
> 
> 时间：2012-11-27T14:15:12.520
> 
> 标签：html, css

我有导航 div，有按钮，例如只有 img 而不是链接，我想在 ant 之前，在此图像之后添加行：我尝试：

```
#nav{                   
    height: 50px;
    width: auto;
    margin: 0 auto;
    margin-top: 30px;
    padding: 0;}

#nav ul li img{
    padding: 0; margin: 0;} 
```

html:

```
<li><img src="./img/dot.gif" alt=""/></li> 
```

我将这些代码添加到 css 以添加 after 和 bofore 图像行：

```
#nav ul li img:before{
  background: url('./img/orange-pixel.gif') repeat-x 50% 50%; 
  width: 40px; 
  height: 3px; 
  float: left; 
  padding-top: 45px;} 
#nav ul li img:after{
  background: url('./img/orange-pixel.gif') repeat-x 50% 50%; 
  width: 40px; 
  height: 3px; 
  float: left; 
  padding-top: 45px;} 
```

但不显示线条。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T14:32:56.263

根据[这篇](http://lildude.co.uk/after-css-property-for-img-tag)文章，大多数浏览器不会为标签计算`:before`/ 。无论如何，为了帮助你：你为什么不通过为图像添加边框来设置线条。或者在标签上使用/ ？`:after``img``:before``:after``li`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T14:46:36.447

你可以加

```
content:".";
text-indent:-9999em;
display:block 
```

到你的：之前和：之后。所有这一切都是给它一些“抓住”的东西，它应该可以工作。

如果它们是基本线条，为什么不在 li 的一侧添加边框？:before 和 :after 在旧版浏览器中不起作用，因此如果有必要，它会提供更一致的体验。

# c# - 将嵌套 XML 中的父对象获取到 Linq

> ID：13586152
> 
> 赞同：2
> 
> 时间：2012-11-27T14:15:24.517
> 
> 标签：c#, linq, linq-to-xml, nested-class

假设两个类，简化

```
Class Room {
    String Name {get; set;}
    String Type {get;set;}
    List<Employee> Employees {get; set;}
}
Class Employee {
    Int64 ID {get;set;}
    Room Parent {get; set;}
} 
```

我从数据库中获取 XML 数据并使用 LINQ 将此 XML 读入对象：

```
List<Room> rooms = new List<Room>();
rooms = 
    (
        from r in XDocument.Load(reader).Root.Elements("Room") select new Room {
            Name = r.Attribute("name").Value,
            Type = r.Attribute("type").Value,
            Employees = 
                (
                    from e in r.Elements("Employee") select new Employee {
                    ID = (Int64)e.Attribute("hrid"),
                    Parent = ?????
                }
            ).ToList()
        }
    ).ToList(); 
```

注意?????? 在上面？这就是问题所在。如何在 Employee 中创建对父 Room 的引用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T14:23:20.273

这不是最佳做法，但您可以为父级设置 null 或先丢弃。创建列表后，您可以遍历房间并设置员工父母。

```
foreach (var room in rooms)
{
    for (int i = 0; i < room.Employees.Count; i++)
    {
        room.Employees[i].Parent = room;
    }
} 
```

# java - Youtube 分析和谷歌服务帐户

> ID：13586153
> 
> 赞同：2
> 
> 时间：2012-11-27T14:15:29.557
> 
> 标签：java, youtube, oauth-2.0, youtube-api, service-accounts

**目标：** 实现一个程序（java 或 python）来从我在我的 Youtube 频道上发布的视频中检索数据。该程序将每天（凌晨 1:00）启动。

**解决方案：** 要检索 Youtube 数据，包括每天的观看次数，我认为 YouTube Analytics API 是最好的解决方案。我使用 Google 帐户服务（“GoogleCredential”）对我进行身份验证：

```
static {
    // Build service account credential.
    try {

        // Create a listener for automatic refresh OAuthAccessToken
        List<CredentialRefreshListener> list = new ArrayList<CredentialRefreshListener>();
        list.add(new CredentialRefreshListener() {

            public void onTokenResponse(Credential credential,
                    TokenResponse tokenResponse) throws IOException {
                System.out.println(tokenResponse.toPrettyString());

            }

            public void onTokenErrorResponse(Credential credential,
                    TokenErrorResponse tokenErrorResponse)
                    throws IOException {
                System.err.println("Error: "
                        + tokenErrorResponse.toPrettyString());
            }
        });

        // Create a GoogleCredential for authenticate with ServiceAccount
        // service
        credential = new GoogleCredential.Builder()
                .setTransport(HTTP_TRANSPORT)
                .setJsonFactory(JSON_FACTORY)
                .setServiceAccountId(SERVICE_ACCOUNT_EMAIL)
                .setServiceAccountScopes(SCOPES)
                .setClock(Clock.SYSTEM)
                .setServiceAccountPrivateKeyFromP12File(
                        new File("key.p12"))
                .setRefreshListeners(list).build();

        credential.refreshToken();

    } catch (GeneralSecurityException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

我执行 Youtube Analytics 查询：

```
YoutubeAnalytics youtubeAnalytics = new YoutubeAnalytics.Builder(HTTP_TRANSPORT, JSON_FACTORY, credential)
        .setApplicationName("Test-YouTube-Analytics/1.0").build();

    // Create request
    credential.refreshToken();
    YoutubeAnalyticsRequest<?> request = youtubeAnalytics.reports()
            .query("channel==" + channelId, "2012-10-01", "2012-12-01", "views")
            .setAlt("json")
            .setKey(API_KEY)
            .setDimensions("month")
            .setPrettyPrint(true);
    System.out.println(request.buildHttpRequest().getUrl().toString());
    ResultTable first = (ResultTable) request.execute();
} 
```

但我收到以下错误：

```
com.google.api.client.googleapis.json.GoogleJsonResponseException: 500 Internal Server Error
{
  "code" : 500,
  "errors" : [ {
    "domain" : "global",
    "message" : "Unknown error occurred on the server.",
    "reason" : "internalError"
  } ],
  "message" : "Unknown error occurred on the server."
} 
```

感谢您的洞察力！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T17:08:07.797

发出 YouTube Analytics API 请求时，您不能使用服务帐户。您需要使用一个帐户，该帐户要么是 YouTube 频道的所有者，要么是与该频道关联的内容所有者，我不认为服务帐户可以是其中任何一种。请在以拥有 YouTube 频道的 Google 帐户的身份登录时完成一次 OAuth 2 流程，然后可以在将来重复使用保存的 OAuth 2 刷新令牌来获取可用于运行报告的新访问令牌。

您能否解决该问题，然后再次尝试运行您的报告？

# java - 进行字符串替换时的临时占位符...（Java，但通用解决方案会很有用）

> ID：13586155
> 
> 赞同：2
> 
> 时间：2012-11-27T14:15:45.733
> 
> 标签：java, string

这可能是在其他地方问过的 - 不幸的是，谷歌搜索是一件相当困难的事情。

经常在编程时，我发现自己使用表单的构造（我特别在寻找 Java 答案，但我会对通用解决方案着迷）

```
String a = getStringFromPlace();
a=processStringInSomeWay(a);
sendStringToSomePlace(a); 
```

我的问题是 processStringInSomeWay(a) 如果给定某个特定字符“£”就会中断，所以我最终写了这个......

```
String a = getStringFromPlace();
a=a.replace("£","replacevalue");
a=processStringInSomeWay(a);
a=a.replace("replacevalue","£");
sendStringToSomePlace(a); 
```

但是，如果“replacevalue”恰好在输入中，这当然会中断。我可以选择一个荒谬的“replacevalue”值，但这*显然*不是一个好习惯。在这种情况下，最佳做法是什么？

编辑 - 这是在一个无法控制“processStringInSomeWay()”方法的特殊情况下。而且我也对必须作为一个单元处理，不能拆分的情况感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T14:22:21.797

从某种意义上说，您的问题非常笼统，在不知道您需要对这些字符串做什么的情况下，几乎不可能给出一个准确的答案。

我看到的解决方案是：

*   直接删除该方法不应处理的字符（例如`replaceAll("£","")`）
*   更改处理方法以跳过当前版本中未处理的字符
*   每当找到不需要的字符时拆分字符串并分别处理它们
*   只需为每个非托管符号放置一个始终相同的转义序列（例如`replaceAll("£",escape+"£")`）

这个问题在很多情况下都很常见，从我所看到的情况来看，你通常只是决定你有一个不能自然使用的序列，因为它被用作转义序列。在压缩协议、网络协议和许多其他情况下都是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T14:21:21.250

恕我直言，最佳做法是进行修复`processStringInSomeWay(a);`，以免损坏。即所以你不需要这个工作。

假设您必须使用变通方法，您可以使用几乎 65536 个可能的字符，因此您可以选择其中一个（或组合）

注意：有两个非字符`\uFFFE`，`\uFFFF`它们被定义为“非字符”。您可以假设这些永远不会出现在有效文本中。[http://en.wikipedia.org/wiki/Mapping_of_Unicode_characters](http://en.wikipedia.org/wiki/Mapping_of_Unicode_characters)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T14:28:11.947

如果要替换，请使用当前未在 Unicode 中定义的字符。

但是，我会更改或重载 processStringInSomeWay 以获取 String[]，在要替换的字符处拆分，然后再连接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T15:22:17.150

我对 java 不是 100% 确定，但你能做这样的事情吗：

```
a=processStringInSomeWay(a.replace("£","")); 
```

它会从传递给 process 函数的字符串中删除 £ 而不会更改`a`

# c - malloc() 中的奇怪分段错误 - C

> ID：13586159
> 
> 赞同：0
> 
> 时间：2012-11-27T14:15:59.710
> 
> 标签：c, linux, segmentation-fault, malloc

您好，我正在编写一个程序，并且我以这种方式声明了一个字符串：

```
char *string=malloc(sizeof(char)); 
```

在我的笔记本电脑中，我使用的是 64 位 Mint OS，一切正常。但是在 32 位 Debian 机器中，我在那行代码中出现分段错误。如果我声明没有 malloc 的字符串，如下所示：char string[100]该程序运行良好。当我使用 GDB 运行程序时，它显示 malloc.c not found 或类似的东西。这种行为合乎逻辑吗？如果有人以前遇到过同样的问题，请解释一下为什么会发生？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T14:19:49.687

您只为字符串分配 1 个字节，因此您可能正在覆盖其他变量或 malloc 堆结构。

改变：

```
char *string=malloc(sizeof(char)); 
```

到更现实的尺寸，例如：

```
char *string=malloc(256); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T14:25:30.510

添加到另一个答案，我试图解释为什么它在 32 位上失败，但在 64 位上成功：

最有可能的是，您的内存管理器以一定的粒度工作，这取决于您系统的字长。也许在 32 位系统上是 4 个字节，在 64 位系统上是 8 个字节。（但是，我不确定这是否正确。）

如果分配 1 个字节，则有 3 个字节。7 个字节未使用。因此，尽管您不允许使用它们，但什么都不会发生。

如果您使用超过 3 个但最多 7 个字节，则在 64 位系统上不会发生任何事情，但在 32 位系统上，程序会崩溃。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T14:27:30.897

要分配 100 个字符的字符串，您必须分配 101 个字符，+1 是结束字符`'\0'`，因此：

```
char *string = malloc(sizeof(char) * 101); 
```

允许创建与您的操作系统兼容的`sizeof(char)`字符（65/32 位）；
char 在 64 位系统或 32 位系统中始终具有相同的大小，但是对于其他类型，`int`或者`long`它们在 32 位或 64 位系统上具有不同的大小！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T15:27:36.263

来自 malloc 上的 POSIX：

```
The pointer returned if the allocation succeeds shall be suitably aligned so that it may be assigned to a pointer to any type of object and then used to access such an object in the space allocated (until the space is explicitly freed or reallocated). 
```

这是未定义的行为，但解释在于“适当对齐”这个短语。这是完全实现定义的，但对于大多数架构来说，它至少必须在字边界上。

假设这是真的，那么一个字的大小可以决定下一个可能的“适当对齐”的内存位置在哪里：距离分配的 1 字节缓冲区的开头 4 字节或 8 字节。

因此，除了此代码存在问题之外，似乎解释是该实现允许写入超出 malloc 末尾的某些字节，其中“某些字节”是 wordsize 的函数。

# android - 随机输出非预期图像

> ID：13586162
> 
> 赞同：1
> 
> 时间：2012-11-27T14:16:22.500
> 
> 标签：android

我似乎遇到了一个可能很容易解决的烦恼，但我就是不知道如何解决。目标是在打开应用程序时随机输出两个不同的图像（图像：mario.png 和 logo.png）。它工作了很长时间，直到我尝试在清单中将应用程序图标（图片：ic_launcher.png）从默认图标更改为新图标（图片：smoke.png）。当我这样做时，应用程序只会输出 logo.png 和 ic_luancher.png。我尝试将清单更改回 ic_luancher.png 但无济于事。有任何想法吗？

```
public class MainActivity extends Activity {

private String[] Fact;
private static final Random rgenerator = new Random();
private int[] picArray = {
    R.drawable.logo,  //This actually outputs
    R.drawable.mario, //This one outputs the defualt app icon although it is not the one I want.
};

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    getWindow().setBackgroundDrawable(new ColorDrawable(Color.rgb(225, 151, 51)));
    setContentView(R.layout.activity_main);

    Resources res = getResources();
    Fact = res.getStringArray(R.array.Facts);
    String q = Fact[rgenerator.nextInt(Fact.length)];
    TextView tv = (TextView) findViewById(R.id.daily);
    tv.setText(q);

    Drawable d = getResources().getDrawable(picArray[rgenerator.nextInt(picArray.length)]);
    ImageView ptv = (ImageView) findViewById(R.id.imageView1);
    ptv.setImageDrawable(d);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
} 
```

}

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:background="@drawable/background"
android:orientation="vertical" >

<TextView
    android:id="@+id/edit_message"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="50sp"
    android:layout_marginTop="20sp"
    android:text="@string/edit_message"
    android:textColor="#000000"
    android:textSize="30sp" >
</TextView>

<TextView
    android:id="@+id/daily"
    android:layout_width="233dp"
    android:layout_height="wrap_content"
    android:layout_marginLeft="50sp"
    android:layout_marginTop="30sp"
    android:maxLines="2"
    android:maxWidth="350sp"
    android:text="@string/daily"
    android:textColor="#000000"
    android:textSize="30sp" />

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="50sp"/> 
```

# objective-c - 网络活动指示器放置问题

> ID：13586166
> 
> 赞同：0
> 
> 时间：2012-11-27T14:16:50.353
> 
> 标签：objective-c, ios, xcode

我有一个应用程序，它检索一个`XML`文件，解析它，然后在`UITableView`. 当应用程序加载时一切正常。当您点击另一个选项卡时，`tabViewController`它会暂停片刻并加载下一个视图。我需要在`NetworkActivityIndicator`发生这种情况时开始制作动画，但我在放置代码的位置时遇到了一些麻烦。

我已经尝试在其他任何事情开始发生之前将它放在`viewDidLoad`方法中，但结果是活动指示器在视图已经完全加载后开始动画。如果我将一条`NSLog`语句放在相同的位置，它会在点击选项卡时立即出现在调试器控制台中。为什么活动指示器也没有立即动画？任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T14:28:21.913

听起来您正在主线程上加载文件。运行循环仅在每个循环上更改 UI，因此如果您在加载时冻结主线程，则在完成之前不会发生任何变化。您应该考虑异步加载...

解决这个问题的一个稍微笨拙的方法是在将网络指示器设置为可见后立即执行循环：

```
[UIApplication sharedApplication].networkActivityIndicatorVisible = YES;
[[NSRunLoop mainRunLoop] runUntilDate:[NSDate dateWithTimeIntervalSinceNow:0.1]]; 
```

# javascript - 添加链接到我的网站

> ID：13586168
> 
> 赞同：-4
> 
> 时间：2012-11-27T14:16:54.723
> 
> 标签：javascript, html

我是 Web 开发的新手，我正在创建一个 Intranet 集线器。我需要使用 html、javascript 或 jquery 在我的网站中创建链接。

我需要在我所在的 div 里面写。如果我打开贷款、汽车贷款、新车，我将在 div 中显示：贷款 -> 汽车贷款 -> 新车

如何使用简单的 html 方法来实现这一点？

```
 <a href=""> Loans </a>  ->  <a href=""> Car Loans </a> -> <a href=""> new cars 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T14:28:50.323

由于您在没有上下文指示的情况下询问如何做到这一点，我不得不说您可能最好坚持使用纯 html。

```
 <div style="white-space:nowrap;">
          <a href="link1">Link1</a> &gt;
          <a href="link2">Link2</a> &gt;
          <a href="link3">Link3</a> &gt;
          <a href="link4">Link4</a> &gt;
          <a href="link5">Link5</a>
    </div> 
```

`&gt;`是 > 的 html 实体

您可以`&gt;`用您喜欢的任何 html 实体替换

上面的输出将如下所示： Link1 > Link2 > Link3 > Link4 > Link5

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T14:25:58.903

***如果***我正确理解了您的问题，您需要一个包含链接的 div（或 div 等效项），并且在单击时，生成的 HTML 会显示*在该元素内*。如果是这种情况，您最好考虑使用`<iframe>`.

例如

```
<iframe src="panel.html">
</iframe> 
```

让它指向一个包含 3 个链接的 html 文件：

```
<a href="abc.html"> Loans </a>
<a href="xyz.html"> Car Loans </a>
<a href="123.html"> New cars </a> 
```

现在单击这些链接中的任何一个都将打开元素内的相关页面。

请参阅[此处](http://www.w3schools.com/tags/tag_iframe.asp)了解更多信息。

# css - CSS 垂直对齐：文本底部；

> ID：13586171
> 
> 赞同：43
> 
> 时间：2012-11-27T14:16:57.257
> 
> 标签：css

您好，我正在尝试将文本定位到`<div>`. 既不`vertical-align:text-bottom;`或`vertical-align:bottom;`

问题在于它的下方是我的导航按钮，如果我按下它，它们就会失去对齐。

有没有办法用我的 CSS 解决这个问题？

```
a:link {color:#452809}
a:hover {text-decoration:underline;color:#f00}
a:visited {color:#3886e0}
.fleft {float:left}
.fright {float:right}
.clear {clear:both}
* {border:0;margin:0}
**body {font:12px Tahoma,Arial,Helvetica,sans-serif;color:#666;background:#3cb40d}
#main {margin:0 auto;width:780px;background:#fff url(images/vitalbodyhealth.gif) no-repeat center top}
#header {width:780px;margin:10px; height:210px}
#logo {padding-right:10px;text-align:right;padding-bottom:9px;height:150px;vertical-align:text-bottom} 
#logo a {text-decoration:none;text-transform:lowercase;font-style:italic;font-size:16px;color:#fff;font-weight:bold}
#logo H2 a {font-size:10px}
#buttons {padding-top:0px;height:40px;width:780px}
#buttons li {display:inline}
#buttons a {display:block;float:left;width:80px;height:26px;text-align:center;text-decoration:none;color:#fff;font-weight:bold;font-size:14px;padding-top:0px;margin-left:12px}
#buttons a:hover {width:80px;height:36px;text-decoration:underline}
#content {width:720px;margin:0 auto;padding:20px}**
.inner_copy {border:0;color:#f00;float:right;width:50%!important;margin:-100% 0 0 0;overflow:hidden;line-height:0;padding:0;font-size:11px}
#left {width:450px;padding:10px; background:#EFEFEF}
#left H1, #left H2 {color:#3cb40d;margin:0}
#left H1 {font-size:24px;padding:0}
#left H2 {font-size:18px;padding-top:10px}
#left a {color:#3886e0}
#left a:hover {text-decoration:none;color:#f00}
#left a:visited {color:#3886e0}
#right {float:right;width:240px; background:#EFEFEF}
#sidebar {width:240px;background:#EFEFEF}
#sidebar ul {margin:0;padding:0;list-style:none}
#sidebar li {margin-bottom:15px}
#sidebar li ul {padding:10px;border-top:none}
#sidebar li li {margin:0;padding:3px 0}
#sidebar li h2 {height:36px;margin:0;padding:10px 0 0 20px;background:#47872B;font-size:18px;color:#fff}
#sidebar a:link, #sidebar a:visited {text-decoration:none}
#sidebar a:hover {text-decoration:underline}
#sidebar li a {padding-left:10px;background:url(images/img09.gif) no-repeat 1px 5px}
#footer {background:#452809;height:47px;width:780px;margin:0 auto;font-size:10px;color:#fff;padding-top:23px;text-align:center;}
#footer div {padding:10px 38px}
#footer a {color:#fff;font-size:10px;text-decoration:none}
.padding {padding:10px;color:#f00;font-weight:bold} 
```

任何帮助将不胜感激。

:)

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-09-23T16:31:47.770

## 现代解决方案

Flexbox 正是针对这些问题而创建的：

```
#container {
    height: 150px;/*Only for the demo.*/
    background-color:green;/*Only for the demo.*/
    display: flex;
    justify-content: center;
    align-items: flex-end;
}
```

```
<div id="container">
    <span>Text align to center bottom.</span>
</div>
```

## 老派解决方案

如果您不想弄乱表格显示，那么您可以`<div>`在相对定位的父容器内创建一个，将其放置在绝对定位的底部，然后将其设置为 100% 宽，这样您就可以`text-align`将其置于中心：

```
#container {
    height: 150px;/*Only for the demo.*/
    background-color:green;/*Only for the demo.*/
    position: relative;
}

#text {
    position: absolute;
    bottom: 0;
    width: 100%;
    text-align: center;
}
```

```
<div id="container">
    <span id="text">Text align to center bottom.</span>
</div>
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-11-27T14:23:07.523

要`vertical-align`正确使用，您应该在`table`标签上执行此操作。但是有一种方法可以让其他 html 标签表现得像一个表格，方法是将它们分配`display:table`给你的父母和`display:table-cell`你的孩子的 css。然后`vertical-align:bottom`将对那个孩子起作用。

HTML：

```
​​​​​​&lt;div class="parent">
    <div class="child">
        This text is vertically aligned to bottom.    
    </div>
</div>​​​​​​​​​​​​​​​​​​​​​​​​ 
```

CSS：

```
​.parent {
    width: 300px;
    height: 50px;
    display:​ table;
    border: 1px solid red;
}
.child { 
    display: table-cell;
    vertical-align: bottom;
}​ 
```

这是一个现场示例：[链接演示](http://jsbin.com/ozenoj/1/)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-27T14:20:36.367

如果你的文本没有溢出两行，那么你可以`line-height: ;`在你的 CSS 中做，你给的 line-height 越多，它将容纳的容器越低。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-27T14:19:55.140

垂直对齐仅在某些特定情况下有效。使其起作用的最简单方法是`display: table`在父元素的 CSS 和`display: table-cell;`子元素中设置，然后应用您的垂直对齐属性。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-11-06T23:18:19.817

有时您可以使用填充和边距顶部，添加行高等。

见[小提琴](http://jsfiddle.net/Gloak/7amYM/)。

从@aspirinemaga 派生的样式和文本

```
.parent
{
    width:300px;
    line-height:30px;
    border:1px solid red;
    padding-top:20px;
} 
```

# blackberry - MDS 和 Windows 8

> ID：13586175
> 
> 赞同：1
> 
> 时间：2012-11-27T14:17:03.990
> 
> 标签：blackberry, blackberry-simulator

MDS 在 Windows 7 中运行良好，但在我将操作系统升级到 Windows 8 后，MDS 停止工作。当我单击 MDS 图标时，会弹出一个 cmd 窗口，然后消失，模拟器无法连接到互联网。

注意：Java 目录文件夹没有改变，它仍然在相同的路径中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T16:17:34.373

我重新安装了 MDS，现在它可以正常工作了。

# php - HTML/PHP 允许输入文件以允许上传目录

> ID：13586179
> 
> 赞同：0
> 
> 时间：2012-11-27T14:17:16.837
> 
> 标签：php, html, file-io

嗨，我制作了一个基于 php 的文件上传器，使我的网站更像一个 ftp 服务器，但是人们不能上传文件夹或应用程序等，因为当他们点击左下方的打开时，它只会将应用程序作为文件夹打开（类似to o mac "Show Package Contents" 并且不允许上传实际的应用程序。有解决方法吗？

```
<label for="file">Select a file:</label> <input type="file" name="userfile" id="file" class="button"> <br />
<button class="button">Upload File</button>
<hr />
<?php
    $count = 0;
    if ($handle = opendir('files')) {
        while (false !== ($file = readdir($handle))) {
            if ($file != "." && $file != ".." && $file != ".DS_Store") {
                $count++;
                print("<a href=\"files/".$file."\">".$file."</a><br />\n");
            }
        }
        closedir($handle);
    }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T14:34:36.437

HTML 标签 input[type=file] 并不适合上传多个文件。然而，HTML5 可以选择在同一输入中选择多个文件。这可能会解决所有使用现代浏览器的用户的问题，但服务器永远不会收到有关子文件夹或文件夹结构的信息，只会收到大小和名称作为元数据的文件。

```
<label for="file">Select a file:</label> <input type="file" name="userfile" id="file" class="button" multiple="multiple"> <br />
<button class="button">Upload File</button> 
```

Chrome 现在有一个上传目录的新功能，如果所有用户都使用 Chrome/Webkit，你可以使用：

```
<input type="file" id="file_input" webkitdirectory="" directory=""> 
```

参考： [如何在我自己的代码中使用 Google Chrome 11 的上传文件夹功能？](https://stackoverflow.com/questions/5826286/how-do-i-use-google-chrome-11s-upload-folder-feature-in-my-own-code)

# cocoa - 从 NSToolbar 过滤字体面板

> ID：13586181
> 
> 赞同：1
> 
> 时间：2012-11-27T14:17:27.523
> 
> 标签：cocoa, nstoolbar, nstoolbaritem, nsfont, nsfontpanel

我有`NSToolbar`字体项目。是否可以在字体表中设置字体过滤器？例如，我不想在字体系列表中使用*Arial*。

或者第二种方式 - 是否可以在 Fonts as Collection 中创建自己的组？谢谢 4 回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T11:01:40.763

您可以使用[字体管理器](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSFontManager_Class/Reference/Reference.html#//apple_ref/occ/cl/NSFontManager)委托过滤字体面板中显示的字体，并实现[过滤](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/FontPanel/FontPanel.html#//apple_ref/doc/uid/10000116i)字体面板显示的字体。[`fontManager:willIncludeFont:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSFontManager_Class/Reference/Reference.html#//apple_ref/occ/instm/NSObject/fontManager:willIncludeFont:)

您可能会在此处找到其他信息：
[在 Cocoa 中使用 NSFontPanel](https://stackoverflow.com/questions/1415716/using-nsfontpanel-in-cocoa)

# android - 在通用图像加载器中访问受保护的图像

> ID：13586183
> 
> 赞同：5
> 
> 时间：2012-11-27T14:17:33.583
> 
> 标签：android, universal-image-loader

我在需要从授权来源获取图像的应用程序中使用通用图像加载器。

到目前为止，我已经用我自己的类扩展了 URLConnectionImageDownloader 类，并用我自己的实现覆盖了 getStreamFromNetwork 方法，该实现在 URLConnection 对象中设置了授权标头，如下所示：

```
public class authURLConnectionImageDownloader extends URLConnectionImageDownloader {

@Override
public InputStream getStreamFromNetwork(URI imageUri) throws IOException {

    String auth = Base64.encodeToString(("username" + ":"+"psswd").getBytes(), Base64.NO_WRAP);

    URLConnection conn = imageUri.toURL().openConnection();
    conn.setRequestProperty("Authorization", "Basic " + auth);

    conn.setConnectTimeout(DEFAULT_HTTP_CONNECT_TIMEOUT);
    conn.setReadTimeout(DEFAULT_HTTP_READ_TIMEOUT);

    return new FlushedInputStream(new BufferedInputStream(conn.getInputStream(), BUFFER_SIZE));     
} 
```

并设置我的 ImageLoader...

```
imageLoader = ImageLoader.getInstance();

ImageLoaderConfiguration config =  new ImageLoaderConfiguration.Builder(MainActivity.this)
        .imageDownloader(new authURLConnectionImageDownloader())
        .build();

imageLoader.init(config); 
```

到目前为止，我无法让它工作。图像未下载。但更重要的是，我在 getStreamFromNetwork() 中设置了一个断点，它永远不会被击中？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-03-24T13:31:15.413

我是这样实现的：

```
 byte[] toEncrypt = (username + ":" + password).getBytes();
        String encryptedCredentials = Base64.encodeToString(toEncrypt, Base64.DEFAULT);
        Map<String, String> headers = new HashMap();
        headers.put("Authorization","Basic "+encryptedCredentials);

    DisplayImageOptions defaultOptions = new DisplayImageOptions.Builder()
            ...
            .extraForDownloader(headers)
            .build(); 
```

创建自己的 ImageDownloader：

```
public class AuthDownloader extends BaseImageDownloader {

    public AuthDownloader(Context context){
        super(context);
    }

    @Override
    protected HttpURLConnection createConnection(String url, Object extra) throws IOException {
        HttpURLConnection conn = super.createConnection(url, extra);
        Map<String, String> headers = (Map<String, String>) extra;
        if (headers != null) {
            for (Map.Entry<String, String> header : headers.entrySet()) {
                conn.setRequestProperty(header.getKey(), header.getValue());
            }
        }
        return conn;
    }
} 
```

并将其设置为配置：

```
 ImageLoaderConfiguration config = new ImageLoaderConfiguration.Builder(getApplicationContext())
            .defaultDisplayImageOptions(defaultOptions)
            .discCacheExtraOptions(600, 600, CompressFormat.PNG, 75, null)
            .imageDownloader(new AuthDownloader(getApplicationContext()))
            .build();

    ImageLoader.getInstance().init(config); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-27T16:01:45.083

我设法让它最终工作......

我使用了示例附带的库 .jar 和源代码，并对其进行了调试。我看到它从来没有访问我的 URLConnectionImageDownloader 派生类并且总是使用父类。

所以查看了我的代码，发现我正在使用默认 URLConnectionImageDownloader 类的先前活动中设置另一个图像加载器。

现在我已经创建了一个应用程序类并设置了我的 ImageLoader 一次（如在示例应用程序中），并将配置设置为使用我的新 authURLConnectionImageDownloader 类。现在我所有的活动都使用这个 ImageLoader 并且它可以工作。

# ssis - SSIS 包，可在一台服务器上运行，而不能在另一台服务器上运行。登录被拒绝

> ID：13586185
> 
> 赞同：0
> 
> 时间：2012-11-27T14:17:33.497
> 
> 标签：ssis

我有一个 SSIS 包，它从 Oracle 收集数据并将其放入 SQL 中。这个包在当前服务器上运行良好。但是，当我在另一台服务器上运行导出到文件系统的同一个包时，它失败并出现错误 ORA-1005 - null password given；登录被拒绝。

我可以从服务器连接到 Oracle，也可以连接到 SQL。奇怪的是，如果我使用 Windows 资源管理器从旧服务器导航到新服务器并运行包它工作正常。它仅在从新服务器执行时失败，从旧服务器执行时工作正常，即使文件在新服务器上也是如此。

请有人帮忙，因为这让我发疯！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T14:41:54.570

因此，从我们的小聊天中，我猜测 SSIS 打包丢失了服务器中连接的密码。您需要为连接字符串属性使用配置文件（包括用户名和密码），它可能会起作用。

在你的 SSIS 包中

1.  SSIS->包配置标记启用
2.  添加->下一步->指定conf设置直接选择配置文件的位置和名称->保存
3.  在选项卡对象中找到您的连接并展开->属性_>标记“连接字符串”、“名称”、“密码”
4.  下一个 下一个

有时配置文件也不保存密码。所以在创建配置文件后，用记事本打开它。当您输入您的通行证并保存时，**这应该在包裹关闭时完成**。

配置文件示例（请勿复制创建自己的）：

```
<?xml version="1.0"?><DTSConfiguration><DTSConfigurationHeading>
<DTSConfigurationFileInfo GeneratedBy="dasdsa\dasdsa" 
GeneratedFromPackageName="Package" 
GeneratedFromPackageID="{53B24B50-B43F-4D51-AD15-44FC92896BCA}"
 GeneratedDate="27.11.2012 19:07:35"/></DTSConfigurationHeading>
<Configuration ConfiguredType="Property" 
Path="\Package.Connections[Oracle].Properties[Name]" ValueType="String">
<ConfiguredValue>YourName
</ConfiguredValue></Configuration><Configuration 
ConfiguredType="Property" Path="\Package.Connections
[Oracle].Properties[Password]"
 ValueType="String"><ConfiguredValue>**ENTERHEREPASS**</ConfiguredValue>
</Configuration></DTSConfiguration> 
```

**2.部分。为什么代理作业无法执行包** 从一台服务器传输到另一台服务器时可能有几个问题：

1.  需要设置正确的执行模式 64 或 32 位[http://www.bidn.com/blogs/ShawnHarrison/ssis/2362/ssis-basics-running-a-package-in-32-bit-mode](http://www.bidn.com/blogs/ShawnHarrison/ssis/2362/ssis-basics-running-a-package-in-32-bit-mode)
2.  包“ProtectionLevel”上的安全设置可能会做坏事
3.  Sql server Agent Job 在**没有权限**的 Owner 权限下运行。

# multithreading - 如何获得我创建的所有线程的 IdTCPClients 列表？

> ID：13586188
> 
> 赞同：0
> 
> 时间：2012-11-27T14:17:41.197
> 
> 标签：multithreading, delphi, thread-safety, delphi-xe3

我创建一个线程

```
type 
  ss_thread = class;

  ss_thread = class(TThread)
  protected
    Fff_id : string;
    Fff_cmd : string;
    Fff_host : string;
    Fff_port : TIdPort;
    procedure Execute; override;
  public
    constructor Create(const ff_id, ff_cmd: string; ff_host: string; ff_port: TIdPort);
  end;

constructor ss_thread.Create(const ff_id, ff_cmd: string; ff_host: string; ff_port: TIdPort);
begin
  inherited Create(False);
  Fff_id   := ff_id;
  Fff_cmd  := ff_cmd;
  Fff_host := ff_host;
  Fff_port := ff_port;
end;

...
id := 123; // dynamic
...

nst_ss_thread.Create(id, cmd, host, port); 
```

并做某事

```
procedure ss_thread.Execute;
var
  ws : TIdTCPClient;
  data : TIdBytes;
  i : integer;
  list : TList;
begin
      ws := TIdTCPClient.Create(nil);
      ws.Host := Fff_host;
      ws.Port := Fff_port;
.... 
```

我有主线程，它从其他源接收数据，我需要将所有数据转发到我的线程，我收到的 ID 是“ws”IdTCPClient。

如何获得我创建的所有线程的 IdTCPClients 列表？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T14:25:53.990

将它们存储在线程列表中。

```
ClientList: TThreadList<TIdTCPClient>; 
```

在创建任何客户端之前创建这些对象之一。

```
ClientList := TThreadList<TIdTCPClient>.Create; 
```

每当您创建客户端时，添加它：

```
procedure ss_thread.Execute;
var
  List: TList<TIdTCPClient>;
....
ws := TIdTCPClient.Create(nil);
List := ClientList.LockList;
try
  List.Add(ws);
finally
  ClientList.UnlockList;
end; 
```

每当您需要迭代客户端时，您可以这样做：

```
var
  List: TList<TIdTCPClient>;
  Client: TIdTCPClient;
....
List := ClientList.LockList;
try
  for Client in List do
    // do something with Client
finally
  ClientList.UnlockList;
end; 
```

在线程的析构函数中，您还需要从列表中删除客户端。

# android - 如何在android报警时从待处理的意图中获取requestCode

> ID：13586190
> 
> 赞同：6
> 
> 时间：2012-11-27T14:17:46.410
> 
> 标签：android, android-intent, alarmmanager, alarm, android-pendingintent

在 Receiver 类或 Activity 类中是否可以在意图时获取 requestCode？

这是我未决的意图

```
alarmMgr= (AlarmManager)getSystemService(Context.ALARM_SERVICE);
                Intent intent = new Intent(this, BroadcastReceiver_Class.class);
                /*intent.putExtra("alarm_time_minutes", minutes);*/
                pendingIntent = PendingIntent.getBroadcast(this, requestCode, intent,requestCode);
                alarmMgr.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), pendingIntent); 
```

提前致谢..

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-27T14:31:26.917

您可以将`requestCode`更多内容添加到您的意图中。如下：

```
intent.putExtra("requestCode", requestCode); 
```

然后您可以通过以下方式在 Activity 类中获取它：

```
int requestCode = received_intent.getExtras().getInt("requestCode"); 
```

# ios - sdk ios6 libxml2 预期';'

> ID：13586192
> 
> 赞同：0
> 
> 时间：2012-11-27T14:17:54.350
> 
> 标签：ios, compiler-errors, libxml2

升级到最新的 xcode sdk ios6 后，我无法构建我的项目；我有问题，`libxml`无法解决

这段代码：

```
typedef void (XMLCDECL *warningSAXFunc) (void *ctx,
                const char *msg, ...) LIBXML_ATTR_FORMAT(2,3); 
```

生成：

> 预期的 ';' 顶级声明后

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:23:54.757

我已经添加了：

```
${SDKROOT} 
```

到“标题搜索路径”，它是：

```
${SDKROOT}/usr/include/libxml2 
```

# rtc - 使用“scm登录”时如何隐藏密码

> ID：13586193
> 
> 赞同：3
> 
> 时间：2012-11-27T14:17:53.037
> 
> 标签：rtc

[使用http://pic.dhe.ibm.com/infocenter/rtc/v1r0m0/index.jsp?topic=%2Fcom.ibm.team.scm](http://pic.dhe.ibm.com/infocenter/rtc/v1r0m0/index.jsp?topic=%2Fcom.ibm.team.scm.doc%2Ftopics%2Fc_scm_cli.html)中所述的“scm login”命令时如何隐藏密码。 [doc%2Ftopics%2Fc_scm_cli.html](http://pic.dhe.ibm.com/infocenter/rtc/v1r0m0/index.jsp?topic=%2Fcom.ibm.team.scm.doc%2Ftopics%2Fc_scm_cli.html)

我正在将命令作为脚本的一部分运行，它存在潜在的安全风险，允许将密码输出到命令窗口。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T15:12:43.763

如果您可以使用[`lscm`](https://jazz.net/forum/questions/77813/what-is-the-diff-between-lscm-and-scm)，如[该线程](https://jazz.net/forum/questions/64097/lscm-command?redirect=/forum/questions/64097/lscm-command)中所述，您可以缓存凭据以供所有后续 scm 运行。
但是（如此[处所述](https://jazz.net/forum/questions/64097/lscm-command?redirect=/forum/questions/64097/lscm-command)）

> `lscm`将启动一个守护进程，并且`scm`是一次性交易。
> 守护程序将加载 SCM 文件并将在后续调用中重用它们。这就是它在自动化环境中表现不佳的原因。
> 如果您同时使用许多命令并决定使用`lscm`，请确保在脚本末尾清理守护进程。
> 这将确保环境干净，以便下次运行。

或者：如果您至少使用 登录一次`scm`，如此处[详述](https://jazz.net/forum/questions/65727/using-quotscm-loginquot-command-with-c-option-cache-pw)，使用`-c`选项（在提示时缓存密码）：

> 缓存的密码位于 ~/.jazz-scm/repositories.txt 中。
> 
> 缓存的密码受文件系统权限保护，并使用加密算法进行了混淆。

# xml - 使用 Perl 脚本创建和填充复杂的 XML

> ID：13586194
> 
> 赞同：2
> 
> 时间：2012-11-27T14:17:54.717
> 
> 标签：xml, perl

我有以下要创建并使用 Perl 脚本填充的 XML 文件模板。XML 属性的所有值都来自不同查询的 SQL 数据库。我的 XML 包含很少的属性集合类型。

我发现我应该使用哪个 perl 模块很困难，因为 CPAN 上有很多可用的替代方案。另外，我想知道我应该如何解决这个问题。

任何帮助是极大的赞赏。

`

```
<TumorDetails>
    <personUpi>String</personUpi>
    <ageAtDiagnosis>3.14159E0</ageAtDiagnosis>
    <biopsyPathologyReportSummary>String</biopsyPathologyReportSummary>
    <primarySiteCollection>
        <tissueSite>
            <description>String</description>
            <name>String</name>
        </tissueSite>
    </primarySiteCollection>
    <distantMetastasisSite>
        <description>String</description>
        <name>String</name>
    </distantMetastasisSite>
    <siteGroup>
        <description>String</description>
        <name>String</name>
    </siteGroup>
    <tmStaging>
        <clinicalDescriptor>String</clinicalDescriptor>
        <clinicalMStage>String</clinicalMStage>
        <siteGroupEdition5>
            <description>String</description>
            <name>String</name>
        </siteGroupEdition5>
        <siteGroupEdition6>
            <description>String</description>
            <name>String</name>
        </siteGroupEdition6>
    </tmStaging>
    <pediatricStaging>
        <doneBy>String</doneBy>
        <group>String</group>
    </pediatricStaging>
    <histologicTypeCollection>
        <histologicType>
            <description>String</description>
            <system>String</system>
            <value>String</value>
        </histologicType>
    </histologicTypeCollection>
    <histologicGradeCollection>
        <histologicGrade>
            <gradeOrDifferentiation>String</gradeOrDifferentiation>
        </histologicGrade>
    </histologicGradeCollection>
    <familyHistoryCollection>
        <familyHistory>
            <otherCancerDiagnosed>String</otherCancerDiagnosed>
            <sameCancerDiagnosed>String</sameCancerDiagnosed>
        </familyHistory>
    </familyHistoryCollection>
    <comorbidityOrComplicationCollection>
        <comorbidityOrComplication>
            <value>String</value>
        </comorbidityOrComplication>
    </comorbidityOrComplicationCollection>
    <tumorBiomarkerTest>
        <her2NeuDerived>String</her2NeuDerived>
        <her2NeuFish>String</her2NeuFish>
    </tumorBiomarkerTest>
    <patientHistoryCollection>
        <patientHistory>
            <cancerSite>String</cancerSite>
            <sequence>2147483647</sequence>
        </patientHistory>
    </patientHistoryCollection>
    <tumorHistory>
        <cancerStatus>String</cancerStatus>
        <cancerStatusFollowUpDate>1967-08-13</cancerStatusFollowUpDate>
        <cancerStatusFollowUpType>String</cancerStatusFollowUpType>
        <qualityOfSurvival>String</qualityOfSurvival>
    </tumorHistory>
    <placeOfDiagnosis>
        <initials>String</initials>
    </placeOfDiagnosis>
    <followUp>
        <dateFollowUpChanged>String</dateFollowUpChanged>
        <dateOfLastCancerStatus>1967-08-13</dateOfLastCancerStatus>
        <nextFollowUpHospital>
            <initials>String</initials>
        </nextFollowUpHospital>
        <lastFollowUpHospital>
            <initials>String</initials>
        </lastFollowUpHospital>
        <tumorFollowUpBiomarkerTest>
            <her2NeuDerived>String</her2NeuDerived>
            <her2NeuFish>String</her2NeuFish>
        </tumorFollowUpBiomarkerTest>
    </followUp>
</TumorDetails> 
```

`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T00:50:34.160

首先，非常非常重要的概念：没有“XML 模板”这样的东西！使用 XML 的全部意义在于能够根据某种*模式*读取/写入数据。如果您有一个（一致的）XML 示例但没有架构定义 (XSD)，请使用[trang](http://www.thaiopensource.com/relaxng/trang.html)找出它：

```
java -jar trang.jar sample.xml sample.xsd 
```

对于提供的示例，生成的 XSD 文件如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified">
  <xs:element name="TumorDetails">
    <xs:complexType>
      <xs:sequence>
        <xs:element ref="personUpi"/>
        <xs:element ref="ageAtDiagnosis"/>
        <xs:element ref="biopsyPathologyReportSummary"/>
        <xs:element ref="primarySiteCollection"/>
        <xs:element ref="distantMetastasisSite"/>
        <xs:element ref="siteGroup"/>
        <xs:element ref="tmStaging"/>
        <xs:element ref="pediatricStaging"/>
        <xs:element ref="histologicTypeCollection"/>
        <xs:element ref="histologicGradeCollection"/>
        <xs:element ref="familyHistoryCollection"/>
        <xs:element ref="comorbidityOrComplicationCollection"/>
        <xs:element ref="tumorBiomarkerTest"/>
        <xs:element ref="patientHistoryCollection"/>
        <xs:element ref="tumorHistory"/>
        <xs:element ref="placeOfDiagnosis"/>
        <xs:element ref="followUp"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
...
</xs:schema> 
```

现在，最好的部分称为[XML::Compile](https://metacpan.org/module/XML%3a%3aCompile)。它采用您的 XSD 模式，对其进行编译并拟合/验证本机 Perl 结构，生成 XML 作为输出：

```
#!/usr/bin/env perl
use strict;
use warnings;
use XML::Compile::Schema;

my $node = {
    personUpi                    => 'String',
    ageAtDiagnosis               => '3.14159E0',
    biopsyPathologyReportSummary => 'String',
    primarySiteCollection        => {
        tissueSite => {
            description => 'String',
            name        => 'String',
        },
    },
    ...
};

my $schema = XML::Compile::Schema->new('sample.xsd');
my $writer = $schema->compile(WRITER => 'TumorDetails');
my $doc = XML::LibXML::Document->new(q(1.0), q(UTF-8));

print $writer->($doc, $node)->toString; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T16:22:06.067

很大程度上取决于您已经熟悉的内容。如果您习惯于使用 Document Object Model 导航 XML 文档，那么[`XML::DOM`](https://metacpan.org/module/XML%3a%3aDOM)，[`XML::LibXML`](https://metacpan.org/module/XML%3a%3aLibXML)或者[`XML::Twig`](https://metacpan.org/module/XML%3a%3aTwig)很好，while[`XML::TreeBuilder`](https://metacpan.org/module/XML%3a%3aTreeBuilder)是一个具有自己 API 的类似模块，您将通过尝试发现它是否适合您。

然而，所有这些模块主要用于导航和访问现有的 XML 数据，并且它们对于从头开始创建新的 XML 只是部分有用。相反，模块 和 专门为此目的而设计，并且都具有相似的接口[`XML::Generator`](https://metacpan.org/module/XML%3a%3aGenerator)。 我的偏好以及我对您的建议是，它具有最灵活的界面，应该很适合您的目的。[`XML::Writer`](https://metacpan.org/module/XML%3a%3aWriter)[`XML::API`](https://metacpan.org/module/XML%3a%3aAPI)`XML::API`

使用`XML::API`，生成给定 XML 文档的代码与生成的 XML 具有一一对应的关系。每个语句对应于单个 XML 元素或标记，并且标记和属性名称和文本值可以在运行时派生，例如使用来自数据库的信息。

该程序重新创建您的示例 XML。请注意，子部分可以单独编码并打包成子例程，将`XML::API`对象传递给每个子例程。也可以以非线性方式生成 XML，因为每个方法都返回一个对所创建元素的引用，并且有一个`_goto`方法采用这种引用并设置后续添加的位置。实际上，该`_close`方法并没有写入任何数据，而是`_goto`对当前元素的父元素执行 a。

```
use strict;
use warnings;

use XML::API;

my $xml = XML::API->new(doctype => 'xhtml');

$xml->_open('TumorDetails');

  $xml->_element('personUpi', 'String');
  $xml->_element('ageAtDiagnosis', '3.14159E0');
  $xml->_element('biopsyPathologyReportSummary', 'String');

  $xml->_open('primarySiteCollection');
    $xml->_open('tissueSite');
      $xml->_element('description', 'String');
      $xml->_element('name', 'String');
    $xml->_close('tissueSite');
  $xml->_close('primarySiteCollection');

  $xml->_open('distantMetastasisSite');
    $xml->_element('description', 'String');
    $xml->_element('name', 'String');
  $xml->_close('distantMetastasisSite');

  $xml->_open('siteGroup');
    $xml->_element('description', 'String');
    $xml->_element('name', 'String');
  $xml->_close('siteGroup');

  $xml->_open('tmStaging');
    $xml->_element('clinicalDescriptor', 'String');
    $xml->_element('clinicalMStage', 'String');
    $xml->_open('siteGroupEdition5');
      $xml->_element('description', 'String');
      $xml->_element('name', 'String');
    $xml->_close('siteGroupEdition5');
    $xml->_open('siteGroupEdition6');
      $xml->_element('description', 'String');
      $xml->_element('name', 'String');
    $xml->_close('siteGroupEdition6');
  $xml->_close('tmStaging');

  $xml->_open('pediatricStaging');
    $xml->_element('doneBy', 'String');
    $xml->_element('group', 'String');
  $xml->_close('pediatricStaging');

  $xml->_open('histologicTypeCollection');
    $xml->_open('histologicType');
      $xml->_element('description', 'String');
      $xml->_element('system', 'String');
      $xml->_element('value', 'String');
    $xml->_close('histologicType');
  $xml->_close('histologicTypeCollection');

  $xml->_open('histologicGradeCollection');
    $xml->_open('histologicGrade');
      $xml->_element('gradeOrDifferentiation', 'String');
    $xml->_close('histologicGrade');
  $xml->_close('histologicGradeCollection');

  $xml->_open('familyHistoryCollection');
    $xml->_open('familyHistory');
      $xml->_element('otherCancerDiagnosed', 'String');
      $xml->_element('sameCancerDiagnosed', 'String');
    $xml->_close('familyHistory');
  $xml->_close('familyHistoryCollection');

  $xml->_open('comorbidityOrComplicationCollection');
    $xml->_open('comorbidityOrComplication');
      $xml->_element('value', 'String');
    $xml->_close('comorbidityOrComplication');
  $xml->_close('comorbidityOrComplicationCollection');

  $xml->_open('tumorBiomarkerTest');
    $xml->_element('her2NeuDerived', 'String');
    $xml->_element('her2NeuFish', 'String');
  $xml->_close('tumorBiomarkerTest');

  $xml->_open('patientHistoryCollection');
    $xml->_open('patientHistory');
      $xml->_element('cancerSite', 'String');
      $xml->_element('sequence', '2147483647');
    $xml->_close('patientHistory');
  $xml->_close('patientHistoryCollection');

  $xml->_open('tumorHistory');
    $xml->_element('cancerStatus', 'String');
    $xml->_element('cancerStatusFollowUpDate', '1967-08-13');
    $xml->_element('cancerStatusFollowUpType', 'String');
    $xml->_element('qualityOfSurvival', 'String');
  $xml->_close('tumorHistory');

  $xml->_open('placeOfDiagnosis');
    $xml->_element('initials', 'String');
  $xml->_close('placeOfDiagnosis');

  $xml->_open('followUp');
    $xml->_element('dateFollowUpChanged', 'String');
    $xml->_element('dateOfLastCancerStatus', '1967-08-13');
    $xml->_open('nextFollowUpHospital');
      $xml->_element('initials', 'String');
    $xml->_close('nextFollowUpHospital');
    $xml->_open('lastFollowUpHospital');
      $xml->_element('initials', 'String');
    $xml->_close('lastFollowUpHospital');
    $xml->_open('tumorFollowUpBiomarkerTest');
      $xml->_element('her2NeuDerived', 'String');
      $xml->_element('her2NeuFish', 'String');
    $xml->_close('tumorFollowUpBiomarkerTest');
  $xml->_close('followUp');

$xml->_close('TumorDetails');

print $xml; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T16:32:20.527

If the data will always be identical then ddoxey's TemplateToolkit solution is a good one, however, if some of the tags are sometimes not present then you'll need to build up the XML from scratch each time.

I've recently done some work with XML and was very happy with [`XML::Writer`](http://search.cpan.org/~josephw/XML-Writer-0.615/Writer.pm).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T15:04:13.483

我有点偏爱模板工具包。看：

*   [http://metacpan.org/pod/Template](http://metacpan.org/pod/Template)
*   [http://metacpan.org/pod/Template::手册](http://metacpan.org/pod/Template%3a%3aManual)

```
#!/usr/bin/perl -Tw

use strict;
use warnings;
use Template;

my $tmpl = get_template();
my $rec  = get_record();
my $xml;

my $template = Template->new();

$template->process( \$tmpl, $rec, \$xml )
    || die $template->error();

print "$xml";

# ...

sub get_record {

    return {
        personUpi                    => 'String',
        ageAtDiagnosis               => '3.14159E0',
        biopsyPathologyReportSummary => 'String',
        primarySiteCollection        => {
            tissueSite => {
                description => 'String',
                name        => 'String',
            },
        },
        distantMetastasisSite => {
            description => 'String',
            name        => 'String',
        },
        siteGroup => {
            description => 'String',
            name        => 'String',
        },
        tmStaging => {
            clinicalDescriptor => 'String',
            clinicalMStage     => 'String',
            siteGroupEdition5  => {
                description => 'String',
                name        => 'String',
            },
            siteGroupEdition6 => {
                description => 'String',
                name        => 'String',
            },
        },
        pediatricStaging => {
            doneBy => 'String',
            group  => 'String',
        },
        histologicTypeCollection => {
            histologicType => {
                description => 'String',
                system      => 'String',
                value       => 'String',
            },
        },
        histologicGradeCollection => {
            histologicGrade => { gradeOrDifferentiation => 'String', }, },
        familyHistoryCollection => {
            familyHistory => {
                otherCancerDiagnosed => 'String',
                sameCancerDiagnosed  => 'String',
            },
        },
        comorbidityOrComplicationCollection => {
            comorbidityOrComplicationCollection => { value => 'String', },
        },
        tumorBiomarkerTest => {
            her2NeuDerived => 'String',
            her2NeuFish    => 'String',
        },
        patientHistoryCollection => {
            patientHistory => {
                cancerSite => 'String',
                sequence   => '2147483647',
            },
        },
        tumorHistory => {
            cancerStatus             => 'String',
            cancerStatusFollowUpDate => '1967-08-13',
            cancerStatusFollowUpType => 'String',
            qualityOfSurvival        => 'String',
        },
        placeOfDiagnosis => { initials => 'String', },
        followUp         => {
            dateFollowUpChanged        => 'String',
            dateOfLastCancerStatus     => '1967-08-13',
            nextFollowUpHospital       => { initials => 'String', },
            lastFollowUpHospital       => { initials => 'String', },
            tumorFollowUpBiomarkerTest => {
                her2NeuDerived => 'String',
                her2NeuFish    => 'String',
            },
        },
    };
}

sub get_template {

    return <<'END_TEMPL';
<TumorDetails>
    <personUpi>[% personUpi %]</personUpi>
    <ageAtDiagnosis>[% ageAtDiagnosis %]</ageAtDiagnosis>
    <biopsyPathologyReportSummary>[% biopsyPathologyReportSummary %]</biopsyPathologyReportSummary>
    <primarySiteCollection>
        <tissueSite>
            <description>[% primarySiteCollection.tissueSite.description %]</description>
            <name>[% primarySiteCollection.tissueSite.name %]</name>
        </tissueSite>
    </primarySiteCollection>
    <distantMetastasisSite>
        <description>[% distantMetastasisSite.description %]</description>
        <name>[% distantMetastasisSite.name %]</name>
    </distantMetastasisSite>
    <siteGroup>
        <description>[% siteGroup.description %]</description>
        <name>[% siteGroup.name %]</name>
    </siteGroup>
    <tmStaging>
        <clinicalDescriptor>[% tmStaging.clinicalDescriptor %]</clinicalDescriptor>
        <clinicalMStage>[% tmStaging.clinicalMStage %]</clinicalMStage>
        <siteGroupEdition5>
            <description>[% tmStaging.siteGroupEdition5.description %]</description>
            <name>[% tmStaging.siteGroupEdition5.name %]</name>
        </siteGroupEdition5>
        <siteGroupEdition6>
            <description>[% tmStaging.siteGroupEdition6.description %]</description>
            <name>[% tmStaging.siteGroupEdition6.name %]</name>
        </siteGroupEdition6>
    </tmStaging>
    <pediatricStaging>
        <doneBy>[% pediatricStaging.doneBy %]</doneBy>
        <group>[% pediatricStaging.group %]</group>
    </pediatricStaging>
    <histologicTypeCollection>
        <histologicType>
            <description>[% histologicTypeCollection.histologicType.description %]</description>
            <system>[% histologicTypeCollection.histologicType.system %]</system>
            <value>[% histologicTypeCollection.histologicType.value %]</value>
        </histologicType>
    </histologicTypeCollection>
    <histologicGradeCollection>
        <histologicGrade>
            <gradeOrDifferentiation>[% histologicGradeCollection.histologicGrade.gradeOrDifferentiation %]</gradeOrDifferentiation>
        </histologicGrade>
    </histologicGradeCollection>
    <familyHistoryCollection>
        <familyHistory>
            <otherCancerDiagnosed>[% familyHistoryCollection.familyHistory.otherCancerDiagnosed %]</otherCancerDiagnosed>
            <sameCancerDiagnosed>[% familyHistoryCollection.familyHistory.sameCancerDiagnosed %]</sameCancerDiagnosed>
        </familyHistory>
    </familyHistoryCollection>
    <comorbidityOrComplicationCollection>
        <comorbidityOrComplication>
            <value>[% comorbidityOrComplicationCollection.comorbidityOrComplicationCollection.value %]</value>
        </comorbidityOrComplication>
    </comorbidityOrComplicationCollection>
    <tumorBiomarkerTest>
        <her2NeuDerived>[% tumorBiomarkerTest.her2NeuDerived %]</her2NeuDerived>
        <her2NeuFish>[% tumorBiomarkerTest.her2NeuFish %]</her2NeuFish>
    </tumorBiomarkerTest>
    <patientHistoryCollection>
        <patientHistory>
            <cancerSite>[% patientHistoryCollection.patientHistory.cancerSite %]</cancerSite>
            <sequence>[% patientHistoryCollection.patientHistory.sequence %]</sequence>
        </patientHistory>
    </patientHistoryCollection>
    <tumorHistory>
        <cancerStatus>[% tumorHistory.cancerStatus %]</cancerStatus>
        <cancerStatusFollowUpDate>[% tumorHistory.cancerStatusFollowUpDate %]</cancerStatusFollowUpDate>
        <cancerStatusFollowUpType>[% tumorHistory.cancerStatusFollowUpType %]</cancerStatusFollowUpType>
        <qualityOfSurvival>[% tumorHistory.qualityOfSurvival %]</qualityOfSurvival>
    </tumorHistory>
    <placeOfDiagnosis>
        <initials>[% placeOfDiagnosis.initials %]</initials>
    </placeOfDiagnosis>
    <followUp>
        <dateFollowUpChanged>[% followUp.dateFollowUpChanged %]</dateFollowUpChanged>
        <dateOfLastCancerStatus>[% followUp.dateOfLastCancerStatus %]</dateOfLastCancerStatus>
        <nextFollowUpHospital>
            <initials>[% followUp.nextFollowUpHospital.initials %]</initials>
        </nextFollowUpHospital>
        <lastFollowUpHospital>
            <initials>[% followUp.nextFollowUpHospital.initials %]</initials>
        </lastFollowUpHospital>
        <tumorFollowUpBiomarkerTest>
            <her2NeuDerived>[% followUp.tumorFollowUpBiomarkerTest.her2NeuDerived %]</her2NeuDerived>
            <her2NeuFish>[% followUp.tumorFollowUpBiomarkerTest.her2NeuFish %]</her2NeuFish>
        </tumorFollowUpBiomarkerTest>
    </followUp>
</TumorDetails>
END_TEMPL
}

__END__ 
```

# qt - 带有 QT 应用程序的 Windows 7 Jumplist

> ID：13586203
> 
> 赞同：1
> 
> 时间：2012-11-27T14:18:23.193
> 
> 标签：qt, windows-7, jump-list

我正在尝试使用 QT 应用程序开发 Windows 7 Jumplist。我创建了一个跳转列表任务“退出”。单击此跳转列表任务“退出”后，我想关闭我的应用程序。这个怎么做？？

```
IShellLink* CreateShellLink(QString title, QString description,
QString app_path, QString app_args,
QString icon_path, int app_index)  {
IShellLink* shell_link = NULL;
IPropertyStore* prop_store = NULL;
bool is_not_separator = (app_path.length() > 0);

HRESULT hr = CoCreateInstance(CLSID_ShellLink, NULL, CLSCTX_INPROC_SERVER, IID_IShellLink,
reinterpret_cast<void**> (&(shell_link)));

if(SUCCEEDED(hr)) {

if (is_not_separator) {
// Set the path and file name of the shell link object
shell_link->SetPath(app_path.toStdWString().c_str());
// Set the command-line arguments for the shell link object
shell_link->SetArguments(app_args.toStdWString().c_str());
shell_link->SetIconLocation(icon_path.toStdWString().c_str(), app_index);
shell_link->SetDescription(description.toStdWString().c_str());

//shell_link->
}

// Set the name of the shell link object
hr = shell_link->QueryInterface(IID_IPropertyStore, reinterpret_cast<void**> (&(prop_store)));

if (SUCCEEDED(hr)) {
PROPVARIANT pv;

if (is_not_separator) {
hr = InitPropVariantFromString(title.toStdWString().c_str(), &pv);

if (SUCCEEDED(hr)) {
hr = prop_store->SetValue(PKEY_Title, pv);
}
} else {
hr = InitPropVariantFromBoolean(TRUE, &pv);

if (SUCCEEDED(hr)) {
hr = prop_store->SetValue(PKEY_AppUserModel_IsDestListSeparator, pv);
}
}

//Save the changes we made to the property store
prop_store->Commit();
prop_store->Release();

PropVariantClear(&pv);
}
}

return shell_link;
}

void AddTasksToList(ICustomDestinationList* destinationList) {
IObjectArray* object_array;
IObjectCollection* obj_collection;

// Creating a new category on Browser's Jump List
CoCreateInstance(CLSID_EnumerableObjectCollection, NULL,
CLSCTX_INPROC, IID_IObjectCollection, reinterpret_cast<void**> (&(obj_collection)));

obj_collection->QueryInterface(IID_IObjectArray, reinterpret_cast<void**> (&(object_array)));

QString icons_source("C:\\windows\\explorer.exe");
QString app_path = qApp->applicationFilePath();

obj_collection->AddObject(CreateShellLink("Quit", "Description Task 1",
app_path, "-auto",
icons_source, 20));

// Add the specified user task to the Task category of a Jump List
destinationList->AddUserTasks(object_array);

object_array->Release();
obj_collection->Release();
}

void SetupJumpList() {
UINT max_count = 0;
IObjectArray* objectArray;
ICustomDestinationList* destinationList;

//create the custom jump list object
CoCreateInstance(CLSID_DestinationList, NULL, CLSCTX_INPROC_SERVER, IID_ICustomDestinationList,
reinterpret_cast<void**> (&(destinationList)));

//initialize list
destinationList->BeginList(&max_count, IID_IObjectArray, reinterpret_cast<void**> (&(objectArray)));
AddTasksToList(destinationList);

//commit list
destinationList->CommitList();
objectArray->Release();
destinationList->Release();
} 
```

# vb.net - 其他机器出错但我的机器没有错误（索引超出了数组的范围）

> ID：13586207
> 
> 赞同：0
> 
> 时间：2012-11-27T14:18:39.897
> 
> 标签：vb.net, visual-studio-2010

我正在开发一个工具来将 dcmfiles 中的更改导出到 excel 文件..

我有这个错误发生在其他机器上但不是我的

（指数数组的边界之外）

以下是故障描述：

```
See the end of this message for details on invoking 
just-in-time (JIT) debugging instead of this dialog box.

************** Exception Text **************
System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at WindowsApplication1.Mdl_GetDifference.compareParsedDCMTotalRepo(DCMStruct[] myDCMs, Worksheet& xlSheetRev, Int32& FileRow, Int32 SvnNo, String FName, String baseline)
   at WindowsApplication1.ToExcel.GenTotalReport(Worksheet& xlSheetRev, String baseline)
   at WindowsApplication1.ToExcel.ExportToExcel(String baseline)
   at WindowsApplication1.Home.GenRop_Click(Object sender, EventArgs e)
   at System.Windows.Forms.Control.OnClick(EventArgs e)
   at System.Windows.Forms.Button.OnClick(EventArgs e)
   at System.Windows.Forms.Button.OnMouseUp(MouseEventArgs mevent)
   at System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32 clicks)
   at System.Windows.Forms.Control.WndProc(Message& m)
   at System.Windows.Forms.ButtonBase.WndProc(Message& m)
   at System.Windows.Forms.Button.WndProc(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
   at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)

************** Loaded Assemblies **************
mscorlib
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.3634 (GDR.050727-3600)
    CodeBase: file:///C:/WINNT/Microsoft.NET/Framework/v2.0.50727/mscorlib.dll
----------------------------------------
AdvertTest
    Assembly Version: 1.0.0.0
    Win32 Version: 1.0.0.0
    CodeBase: file://bosch.com/dfsrb/DfsDE/DIV/BEG/EC/Common/Arbeitshilfen/Tools/Advert/00_temp/BetaTest_Version/AdvertTest.exe
----------------------------------------
Microsoft.VisualBasic
    Assembly Version: 8.0.0.0
    Win32 Version: 8.0.50727.3053 (netfxsp.050727-3000)
    CodeBase: file:///C:/WINNT/assembly/GAC_MSIL/Microsoft.VisualBasic/8.0.0.0__b03f5f7f11d50a3a/Microsoft.VisualBasic.dll
----------------------------------------
System
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.3634 (GDR.050727-3600)
    CodeBase: file:///C:/WINNT/assembly/GAC_MSIL/System/2.0.0.0__b77a5c561934e089/System.dll
----------------------------------------
System.Windows.Forms
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.3637 (GDR.050727-3600)
    CodeBase: file:///C:/WINNT/assembly/GAC_MSIL/System.Windows.Forms/2.0.0.0__b77a5c561934e089/System.Windows.Forms.dll
----------------------------------------
System.Drawing
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.3639 (GDR.050727-3600)
    CodeBase: file:///C:/WINNT/assembly/GAC_MSIL/System.Drawing/2.0.0.0__b03f5f7f11d50a3a/System.Drawing.dll
----------------------------------------
System.Configuration
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.3053 (netfxsp.050727-3000)
    CodeBase: file:///C:/WINNT/assembly/GAC_MSIL/System.Configuration/2.0.0.0__b03f5f7f11d50a3a/System.Configuration.dll
----------------------------------------
System.Xml
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.3053 (netfxsp.050727-3000)
    CodeBase: file:///C:/WINNT/assembly/GAC_MSIL/System.Xml/2.0.0.0__b77a5c561934e089/System.Xml.dll
----------------------------------------
System.Runtime.Remoting
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.3053 (netfxsp.050727-3000)
    CodeBase: file:///C:/WINNT/assembly/GAC_MSIL/System.Runtime.Remoting/2.0.0.0__b77a5c561934e089/System.Runtime.Remoting.dll
----------------------------------------
Interop.PushOkSvn
    Assembly Version: 1.3.0.0
    Win32 Version: 1.3.0.0
    CodeBase: file://bosch.com/dfsrb/DfsDE/DIV/BEG/EC/Common/Arbeitshilfen/Tools/Advert/00_temp/BetaTest_Version/Interop.PushOkSvn.DLL
----------------------------------------
Microsoft.Office.Interop.Excel
    Assembly Version: 12.0.0.0
    Win32 Version: 12.0.6600.1000
    CodeBase: file:///C:/WINNT/assembly/GAC/Microsoft.Office.Interop.Excel/12.0.0.0__71e9bce111e9429c/Microsoft.Office.Interop.Excel.dll
----------------------------------------

************** JIT Debugging **************
To enable just-in-time (JIT) debugging, the .config file for this
application or computer (machine.config) must have the
jitDebugging value set in the system.windows.forms section.
The application must also be compiled with debugging
enabled.

For example:

<configuration>
    <system.windows.forms jitDebugging="true" />
</configuration>

When JIT debugging is enabled, any unhandled exception
will be sent to the JIT debugger registered on the computer
rather than be handled by this dialog box. 
```

如果需要，我可以添加更多信息.. 请任何帮助将不胜感激

```
 Public Sub compareParsedDCMTotalRepo(ByVal myDCMs() As DCMStruct, ByRef xlSheetRev As Worksheet, ByRef FileRow As Integer, ByVal SvnNo As Integer, ByVal FName As String, ByVal baseline As String)

    ' is completly the same with function compareparsedDCM but just writing into excel is different, here we added few more coloums to excel

    Dim myVal1, myVal2, myVal1X, myVal2X, myVal1Y, myVal2Y, index2 As String
    Dim myName1 As String '= ""
    Dim k, l, m
    Dim FileCol As Integer = 1
    Dim ParameterCol As Integer = 2
    Dim ParTypeCol As Integer = 3
    Dim OldValCol As Integer = 4
    Dim NewValCol As Integer = 5
    Dim ChgByCol As Integer = 6
    Dim CommCol As Integer = 7
    Dim RevCol As Integer = 8
    Dim GenCommCol As Integer = 12
    Dim TcmInfoCol As Integer = 13
    Dim BaselineCol As Integer = 14

    FName = FName.Substring(FName.LastIndexOf("/") + 1)

    CommColl.Clear()

    loadCommColl(SvnData(SvnNo).CommitComment)

    '''''''''''''''''''''''''''''''''''''''' The following handles with the Festwert part.''''''''''''''''''''''''''''''
    ' checking all the festwert values of old file and new file
    For k = LBound(myDCMs(0).FESTWERT) To UBound(myDCMs(0).FESTWERT)

        If myDCMs(0).FestwCount < 1 Then
            Exit For
        End If
        myName1 = myDCMs(0).FESTWERT(k).Name
        myVal1 = myDCMs(0).FESTWERT(k).Value

        index2 = -1  ' index2 is used to find if name of the Parameter in old DCM also exists in the new one.
        ' This step checks, whether this Festwert is changed in the new DCM file by looking for its name in the FESTWERTMap.
        If myDCMs(1).FESTWERTMap.Contains(myName1) Then
            index2 = myDCMs(1).FESTWERTMap(myName1)
        End If

        If index2 < 0 Then
            ' if index is <0 means its not there that is removed from the file
            ' so, we are writing the same into excel file
            xlSheetRev.Cells(FileRow, FileCol) = FName
            xlSheetRev.Cells(FileRow, ParameterCol) = myName1
            xlSheetRev.Cells(FileRow, ParTypeCol) = "Festwert"
            xlSheetRev.Cells(FileRow, OldValCol) = myVal1
            xlSheetRev.Cells(FileRow, NewValCol) = "Removed"
            xlSheetRev.Cells(FileRow, ChgByCol) = ParamAuthor.Item(FName & ";" & myName1)
            xlSheetRev.Cells(FileRow, CommCol) = ParamCommTotal(SvnNo, FName, myName1)
            If SvnData(SvnNo).RevNo <> 0 Then
                xlSheetRev.Cells(FileRow, RevCol) = SvnData(SvnNo).RevNo
            End If
            xlSheetRev.Cells(FileRow, GenCommCol) = getGenComment()
            xlSheetRev.Cells(FileRow, TcmInfoCol) = myName1 & ":" & myVal1 & "-->" & "Removed"
            xlSheetRev.Cells(FileRow, BaselineCol) = baseline
            FileRow = FileRow + 1
            findInfoHRevParam(SvnNo, FName, myName1)
        Else ' if the FW exists, check if it was changed
            myVal2 = myDCMs(1).FESTWERT(index2).Value ' get the new valua.
            If diffValue(myVal1, myVal2) Then
                ' comparing the oldvalues and newvalues, if they are not equal then chaged. Has to be written in Excel.
                xlSheetRev.Cells(FileRow, FileCol) = FName
                xlSheetRev.Cells(FileRow, ParameterCol) = myName1
                xlSheetRev.Cells(FileRow, ParTypeCol) = "Festwert"
                xlSheetRev.Cells(FileRow, OldValCol) = myVal1
                xlSheetRev.Cells(FileRow, NewValCol) = myVal2
                xlSheetRev.Cells(FileRow, ChgByCol) = ParamAuthor.Item(FName & ";" & myName1)
                xlSheetRev.Cells(FileRow, CommCol) = ParamCommTotal(SvnNo, FName, myName1)
                If SvnData(SvnNo).RevNo <> 0 Then
                    xlSheetRev.Cells(FileRow, RevCol) = SvnData(SvnNo).RevNo
                End If
                xlSheetRev.Cells(FileRow, GenCommCol) = getGenComment()
                xlSheetRev.Cells(FileRow, TcmInfoCol) = myName1 & ":" & myVal1 & "-->" & myVal2
                xlSheetRev.Cells(FileRow, BaselineCol) = baseline
                FileRow = FileRow + 1
                findInfoHRevParam(SvnNo, FName, myName1)
            End If
        End If
    Next k

    ' If there is newly added FW.
    For k = LBound(myDCMs(1).FESTWERT) To UBound(myDCMs(1).FESTWERT)
        If myDCMs(1).FestwCount < 1 Then
            Exit For
        End If
        myName1 = myDCMs(1).FESTWERT(k).Name
        If myDCMs(0).FESTWERTMap.Contains(myName1) = False Then
            xlSheetRev.Cells(FileRow, FileCol) = FName
            xlSheetRev.Cells(FileRow, ParameterCol) = myName1
            xlSheetRev.Cells(FileRow, ParTypeCol) = "Festwert"
            xlSheetRev.Cells(FileRow, OldValCol) = "Added"
            xlSheetRev.Cells(FileRow, NewValCol) = myDCMs(1).FESTWERT(k).Value
            xlSheetRev.Cells(FileRow, ChgByCol) = ParamAuthor.Item(FName & ";" & myName1)
            xlSheetRev.Cells(FileRow, CommCol) = ParamCommTotal(SvnNo, FName, myName1)
            If SvnData(SvnNo).RevNo <> 0 Then
                xlSheetRev.Cells(FileRow, RevCol) = SvnData(SvnNo).RevNo
            End If
            xlSheetRev.Cells(FileRow, GenCommCol) = getGenComment()
            xlSheetRev.Cells(FileRow, TcmInfoCol) = myName1 & ":" & "Added-->" & myDCMs(1).FESTWERT(k).Value
            xlSheetRev.Cells(FileRow, BaselineCol) = baseline
            FileRow = FileRow + 1
            findInfoHRevParam(SvnNo, FName, myName1)
        End If
    Next 
```

结束子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T14:53:11.897

确保同时发送 .pdb 文件，因为它们包含显示在异常堆栈跟踪中的行号信息。

> System.IndexOutOfRangeException：索引超出了数组的范围。
>   在 WindowsApplication1.Mdl_GetDifference.compareParsedDCMTotalRepo(DCMStruct[] myDCMs, Worksheet& xlSheetRev, Int32& FileRow, Int32 SvnNo, String FName, String baseline) **:line 20**
>   at WindowsApplication1.ToExcel.GenTotalReport(Worksheet& xlSheetRev, String baseline) **:line 35**
> ...

（我使用的数字只是示例）

然后，您将知道在哪个代码行上引发了异常。

# html - “不透明”元素的“不透明”边框

> ID：13586211
> 
> 赞同：7
> 
> 时间：2012-11-27T14:18:59.033
> 
> 标签：html, css

鉴于此 html

```
 <div id="my_div">   
    </div> 
```

css

```
 #my_div {
            width: 100px;
            height: 100px; 
            background-color: #0f0;
            opacity: 0.4; 
            border: 3px solid #ff0000;
         } 
```

我想要那个自己的 div 标签`opacity`，但也不需要边框。

css可以为“不透明”元素制作“不透明”边框吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T14:23:32.773

没有`non-opacity`属性，但您可以使用 RGBA 设置该 div 的背景颜色。这允许您从本质上指定不透明度，但仅用于背景（因此它不会影响边框）

```
background: rgba(0, 255, 0, 0.4); 
```

这将实现你想要的，一个带有透明背景的红色边框。[演示在这里](http://jsfiddle.net/B3aHG/)。但是，这不会使内部内容（例如图像或文本）透明。虽然您可以自由设置这些元素的不透明度，而不必担心父元素的边界。

[您可以在此处](http://deepubalan.com/blog/2010/03/29/rgba-vs-opacity-the-difference-explained/)和[此处](http://www.css3.info/introduction-opacity-rgba/)找到详细介绍不透明度和 RGBA 之间区别的好文章

应该注意的是，正如预期的那样，[IE8 及以下版本不支持 RGBA](http://caniuse.com/#feat=css3-colors)，尽管它可以被[CSS3 PIE](http://css3pie.com/) “破解” 。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-27T14:22:50.970

使用 CSS3 `rgba`，它是 CSS，所以跨浏览器将是一个问题，但对于 IE，你可以使用 CSS3 [Pie](http://css3pie.com/documentation/supported-css3-features/)

```
#my_div {
     width: 100px;
     height: 100px; 
     background-color: rgba(R, G, B, A);
     border: 3px solid #ff0000;
} 
```

[**演示**](http://jsfiddle.net/SgQEf/)

此外，使用`rgba()`不透明容器不会使您的文本像`opacity: .7`以前那样不透明...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-27T14:24:49.890

请参阅此问题的公认答案：[https ://stackoverflow.com/a/4062032/1068266](https://stackoverflow.com/a/4062032/1068266)

它指出您可以使用 RGBA 格式作为边框颜色，并且通过设置“A”值可以设置边框的不透明度。然而，正如评论中所述， opacity CSS 属性设置整个对象的不透明度，包括边框。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-27T14:27:47.533

不幸的是，当您将不透明度应用于元素时，它也会应用于应用于元素的任何边距、填充或边框。

最好的解决方案是使用 rgba（如先前发布的）并使用 1x1 不透明 png 作为旧版浏览器的后备（如果您支持它们）并将其用作元素的背景图像。

使用 opacity 属性的一个缺点是，如果您的 #my_div 包含任何内容（文本或图像），则内容本身也将具有该不透明度，并且可能会导致不需要的样式。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-27T14:22:55.400

~~恐怕唯一的方法是用另一个有边框的 div 包装你的 div：~~ 其中一种方法是这样的（保持所有内部元素的不透明度）：

```
<div class="border">
    <div id="my_div">   
    </div>
</div> 
```

CSS：

```
.border{
   border: 3px solid #ff0000;
   width: 100px;
   height: 100px; 
}
#my_div {
   width: 100px;
   height: 100px; 
   background-color: #0f0;
   opacity: 0.4;                 
} 
```

或者像其他人所说的那样： rgba 用于背景颜色，但在这种情况下，所有内部内容都将保持不透明

# xslt - 如何在 XSL 中显示垂直文本

> ID：13586212
> 
> 赞同：0
> 
> 时间：2012-11-27T14:19:02.490
> 
> 标签：xslt

我有一些 XSL 用作描述 PDF/Letter 布局的表示。要求之一是在其右侧垂直向下显示一些文本。我已经搜索过这个主题，但还没有真正找到明确或明确的答案。

我试图附上一张图片将有助于展示我想要实现的目标，但因为我是新来的，所以不会让我这样做。这是我到目前为止所得到的，但到目前为止我还没有让它工作（甚至显示文本！）

```
 <fo:block-container writing-mode="tb-lr">
                    <fo:block intrusion-displace="line">        
                      <fo:float float="start">
                          <fo:block text-align="center" border="1pt solid gray" font="bold italic 9pt Helvetica">               
                              <fo:block>
                                Floaty Vertical Text
                              </fo:block>
                        </fo:block>
                      </fo:float>            
                    </fo:block>
                </fo:block-container> 
```

你们有没有聪明人能告诉我如何做到这一点？帮助将不胜感激。

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T10:18:41.133

我通过进一步阅读设法解决了这个问题，我需要做的主要事情是了解 XSL-FO 基础知识，这反过来又使我能够更清楚地了解需要什么。这是一个片段，显示了我如何解决我的问题：

```
 <fo:layout-master-set>

            <fo:simple-page-master master-name="simpleA4"  page-height="29.7cm" page-width="21cm" margin-top="1.27cm" margin-bottom="1.27cm" margin-left="1.75cm">
                <fo:region-body margin-top="1mm" margin-bottom="1mm" /> 
                <fo:region-before region-name="header-normal" extent="0mm" />
                <fo:region-after region-name="footer-normal" extent="0mm" />
                <fo:region-end region-name="right-sidebar" writing-mode="tb-rl" extent="10mm" />                    
            </fo:simple-page-master>

        </fo:layout-master-set>

        <fo:page-sequence master-reference="simpleA4" font-family="sans-serif">

        <!-- Output the BARR string -->
            <fo:static-content flow-name="right-sidebar" font-size="4pt">                           
                <fo:block padding-before="4pt"text-align="left">
                    <xsl:value-of select="$BARRstring" />
                </fo:block>                 
            </fo:static-content> 
```

一旦你知道怎么做，就非常直接！只需要创建一个新的 region-end 并将 write-mode 设置为 tb-rl，然后在 page-sequence 中引用该区域。

希望这可以帮助其他尝试做同样事情的人。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-04T19:16:50.623

您的解决方案是可行的，但作为替代方法，您可以将`reference-orientation`相应`fo:static-content`元素的 设置为适当的值。例如，如果您希望文本从上到下流动，您可以将属性的值设置为`270`：

```
<fo:static-content flow-name="right-sidebar" font-size="4pt" reference-orientation="270">
<!-- Put content here -->
</fo:static-content> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-10T19:33:08.340

采用`reference-orientation="90"`

```
<fo:block-container reference-orientation="90" display-align="center" inline-progression-dimension="6cm">
                                                    <fo:block>barra</fo:block>
                                                    <fo:block font-weight="bold">91219934073AA1123</fo:block>
                                                </fo:block-container> 
```

# java - 如何在 Java 中执行 VBS 脚本？

> ID：13586213
> 
> 赞同：2
> 
> 时间：2012-11-27T14:19:05.887
> 
> 标签：java, vbscript

如何在 Java 中执行 VBS 脚本？他首选的方式是什么？我在网上找到了*很多*建议，所以我不知道什么更好......

1.

```
 Runtime.getRuntime().exec("cscript //NoLogo " + file.getPath()); 
```

2.

```
Runtime.getRuntime().exec("wscript.exe " + file.getPath()) 
```

3.

```
String script = "C:\\work\\selenium\\chrome\\test.vbs";
String executable = "C:\\windows\\...\\vbs.exe"; 
String cmdArr [] = {executable, script};
Runtime.getRuntime ().exec (cmdArr); 
```

4.

`Runtime.getRuntime().exec("cmd /c a.vbs");`

5.

```
Desktop#open(new File("c:/a.vbs")); 
```

这还不是全部。

**这个选什么好？我需要执行以下脚本：**

```
If Not IsObject(application) Then
Set application = SapGuiAuto.GetScriptingEngine
End If
If Not IsObject(connection) Then
Set connection = application.Children(0)
End If
If Not IsObject(session) Then
Set session = connection.Children(0)
End If
If IsObject(WScript) Then
WScript.ConnectObject session, "on"
WScript.ConnectObject application, "on" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T14:27:13.643

VB 脚本通常使用名为`cscript`. 我不记得这个实用程序的位置，但它肯定在路径中，所以你可以直接运行它，就像`cscript yourscript.vbs`. 现在只需使用`Runtime.exec()`or `ProcessBuilder`from java。

为了您的方便，请避免在 java 代码中使用反斜杠。请改用正斜杠。它可以在 Windows 中完美运行，并且不需要像`\\`.

# c++ - Visual Studio TDD 项目的代码覆盖率工具

> ID：13586214
> 
> 赞同：7
> 
> 时间：2012-11-27T14:19:11.777
> 
> 标签：c++, visual-studio, tdd, code-coverage, googletest

我的代码是通过测试驱动开发生成的。我的工具是 Visual Studio 2010 express、Google Test、C++98 和最新版本的 boost。我写了自己的 Mock 并且没有使用 Google Mock。

您会向我推荐哪些开源工具，以便我建立代码覆盖率？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T21:21:05.480

我正在使用 gcov。

现在我的设置相当复杂，我不得不考虑描述它：
我使用了 stl 的 MinGW 发行版，可在[nuwen.net](http://nuwen.net/)上获得 gcc (g++) 和 gcov。这给了我一定程度的便携性。
我使用 scons 和一个批处理文件构建我的测试应用程序来构建和运行它以检查它是否通过。

然后我将代码提交给版本控制，并且在我自己的机器上运行的 Jenkins CI 服务器拾取它，并且仍然使用 scons，编译它，但这次使用`--coverage`标志。它运行测试应用程序，这次输出 *.gc?? 文件。然后我运行 gcov 一次，但告诉它所有文件在哪里，这会产生大量 *.gcov 文件。我过去使用过 python 脚本`gcovr.py`，但后来我编写了自己的脚本来扫描所有 *.gcov 文件并打印所有未覆盖的行。

我不确定所有这些作品的开源状态，但我知道它们是免费的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T14:35:16.100

看看 Sonar with c++ Plugin。该工具不仅可以帮助您查看代码覆盖率，还可以帮助您分析重复和代码质量、设计质量等。

[http://www.sonarsource.org/](http://www.sonarsource.org/)和[插件](http://www.supertom.com/code/sonar-cxx-plugin.html)

# c# - 为什么 DataGridTemplateColumn Visibility Hidden 不为列分配空间？

> ID：13586215
> 
> 赞同：2
> 
> 时间：2012-11-27T14:19:11.800
> 
> 标签：c#, wpf, visibility, datagridtemplatecolumn

我有以下 DataGridTemplateColumn：

```
 <DataGrid.>
      <DataGrid.Columns>
           <DataGridTemplateColumn x:Name="DeleteColumn" Header="" HeaderStyle="{StaticResource DeleteColumnHeaderStyle}" 
                                   Width="25" Visibility="Hidden" IsReadOnly="False" />
      </DataGrid.Columns>
 </DataGrid> 
```

这样做的问题是它没有为宽度分配“25”空间，并且似乎提供了与使用 Visiblity.Collapsed 相同的行为。

我如何才能分配空间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T17:01:43.657

它必须与`VisualTree`布局有关，因为`DataGridColumns`它不位于`DataGrid`. 我不确定，但作为一种解决方法，您可以使用`CellTemplate`该列来保留以下 XAML 的空间 -

```
 <DataGrid>
        <DataGrid.Columns>
            <DataGridTemplateColumn Width="100">
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <TextBlock Visibility="Hidden"/>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>
        </DataGrid.Columns>
    </DataGrid> 
```

# c# - C# 浏览器缩放

> ID：13586216
> 
> 赞同：8
> 
> 时间：2012-11-27T14:19:12.603
> 
> 标签：c#, winforms, browser

我正在构建一个 C# 应用程序并使用 Visual Studio 工具包中的 Web 浏览器。在浏览平板电脑上使用的大图像/pdf 时，是否可以启用此浏览器进行缩放等操作？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-10T15:06:22.727

您可以通过设置属性来做到这一点`body` `zoom`：

```
private void Form1_Load(object sender, EventArgs e)
        {
            webBrowser1.Navigate("http://google.com");
        }
    private void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
    {
        webBrowser1.Document.Body.Style = "zoom:300%;";
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-04T15:24:43.720

我意识到这是一个旧线程，但我发现了一些似乎工作得很好的东西。使用 Document.Body 缩放方法的问题是您的页面不会在浏览器面板中居中。这是我正在使用的，它只是使用 CONTROL + 来放大。

```
private void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
{
    SendKeys.Send("^{+}");
} 
```

对于每个 SendKeys.Send("^{+}"); 它会将页面缩放 25%（125%、150% 等...）

只要记住将 DocumentCompleted 操作设置为 webBrowser1_DocumentCompleted 就可以了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-06-18T03:47:51.827

在即，如果使用固定位置，css 缩放不起作用。在这种情况下，您必须使用浏览器缩放。

```
SHDocVw.InternetExplorer IE = new SHDocVw.InternetExplorer();
public Form1()
{
    InitializeComponent();

    IE.DownloadComplete += new DWebBrowserEvents2_DownloadCompleteEventHandler(IE_DownloadComplete);

    object URL = "wcms.hankookilbo.com";

    IE.Visible = true;

    IE.Navigate2(ref URL);

    this.Visible = false;
}

private void IE_DownloadComplete()
{
    IE.ExecWB(OLECMDID.OLECMDID_OPTICAL_ZOOM, OLECMDEXECOPT.OLECMDEXECOPT_DONTPROMPTUSER, 200, 0);

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T14:22:27.847

据我所知，Web 浏览器控件是 Internet Explorer 的嵌入式实例。

我想如果 IE（或 adobe 插件）支持在您的平板电脑上进行捏合和缩放，那么您的应用程序也会自动获得该功能。

当然，我无权访问您的特定硬件和操作系统配置，这是我能提供的最好的信息，无需更多信息。

# ios - 从 prefix.pch 中读取 Info.plist

> ID：13586218
> 
> 赞同：0
> 
> 时间：2012-11-27T14:19:34.047
> 
> 标签：ios, xcode, cocoa-touch, plist, info.plist

是否可以在 prefix.pch 文件中从我的 Info.plist 文件中读取一个值并根据该值设置一个宏？

例如，如果我在 Info.plist 中有一个名为的布尔属性，如果该属性的值为 YES，`UseSomeResource`我想创建一个。`#define USE_SOME_RESOURCE 1`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T18:21:11.800

理论上是的，尽管我不认为 .pch 是放置它的最佳位置。我建议将此宏放在`Macros.h`您在 .pch 中导入的 .pch 或类似机制中

```
#define USE_SOME_RESOURCE ([[[[NSBundle mainBundle] infoDictionary] objectForKey:@"UseSomeResource"] boolValue]) 
```

[可以在此处阅读有关 .pch 的更多信息](http://www.cimgf.com/2010/05/02/my-current-prefix-pch-file/)

值得注意的是，这仍然会在运行时确定值，而不是在编译时。如果您希望它在编译时运行，您可能需要编写一个脚本作为构建阶段之一的一部分，该脚本读取 Info.plist，并创建一个头文件，然后将其作为项目的一部分包含在内。这似乎是一种迂回的方法，因此我强烈建议使用运行时替代方案。

# c# - 更改列表框中的列表颜色

> ID：13586219
> 
> 赞同：0
> 
> 时间：2012-11-27T14:19:35.700
> 
> 标签：c#, winforms, list, listboxitem

**C#** 我目前有一个 win 表单，我可以显示我在 Listbox 中的两个列表，但是由于这两个列表是合并的，因此数据看起来可能有点混乱。无论如何，我可以将列表 1 的项目颜色设置为蓝色，将列表 2 的项目颜色设置为红色吗？

```
private void updatesum()
{
  listBox.Items.Clear();
  List<String> listOfDels = theDatabase.listDeliveries();
  List<String> listofPicks = theDatabase.listPickups();

  listBox.Items.AddRange(listOfDels.ToArray());
  listBox.Items.AddRange(listofPicks.ToArray());
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T14:48:23.997

您必须订阅 ListBox 的 DrawItem 并为自己绘制 BackColor：

```
listBox.DrawItem += new DrawItemEventHandler(listBox_DrawItem); 
```

我认为您的活动应该是这样的：

```
private void listBox_DrawItem(object sender, DrawItemEventArgs e)
{
    e.DrawBackground();
    Graphics g = e.Graphics;

    g.FillRectangle(new SolidBrush(Color.Blue), e.Bounds);

    g.DrawString(listBox.Items[e.Index].ToString(), 
        e.Font, Brushes.Black, e.Bounds, StringFormat.GenericDefault);

    e.DrawFocusRectangle();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T14:25:02.943

[在此处](https://stackoverflow.com/questions/2554609/c-sharp-changing-listbox-row-color)和[此处](https://stackoverflow.com/questions/91747/background-color-of-a-listbox-item-winforms)查看类似问题的其他一些答案。我以前从未这样做过，但它们似乎符合要求。希望能帮助到你。

# sql-server - 消息 8169，级别 16，状态 2，第 3 行从字符串转换为唯一标识符时转换失败。（使用令牌时）

> ID：13586229
> 
> 赞同：1
> 
> 时间：2012-11-27T14:20:12.713
> 
> 标签：sql-server, tsql, token, jobs

我在作业步骤中有此代码，存储过程运行良好，问题在于获取作业名称。

```
declare @jobName varchar(100)

set @jobName = (select name from msdb..sysjobs where job_id = '$(ESCAPE_SQUOTE(JOBID))')

EXEC spSendSuccessEmail @jobName 
```

我错过了什么吗？

我要做的就是将步骤所在的作业ID传递给存储过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T14:23:17.503

您显然在使用 varchar ，其中需要唯一标识符。理想情况下，您想修复打字，但演员也可以解决问题。如果 sp 需要一个 uniqueidentifier，请在执行 sp 之前尝试将 @jobName 强制转换为 uniqueidentifier

# xml - 带排序的 XML 到 HTML 转换

> ID：13586232
> 
> 赞同：2
> 
> 时间：2012-11-27T14:20:21.263
> 
> 标签：xml, xslt

以下是我需要转换的原始 XML 文件。这是一个音乐专辑记录列表，我必须将其转换为 HTML 表格，其中专辑按发行年份升序排序，我需要与每个单独的记录元素中包含的流派和记录标签元素建立联系一个 id 参考并将它们输出到表中以及每个专辑。

在第二个转换中，我需要做基本相同的事情，但在这种情况下，输出应该只包括来自摇滚和流行流派的专辑。

```
 <?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="zadacha1.xsl" ?>
<record_collection>
    <genres>
        <genre id="1">Rock</genre>
        <genre id="2">Pop</genre>
        <genre id="3">Disco</genre>
        <genre id="4">Rap</genre>
        <genre id="5">Electronic</genre>
        <genre id="6">Country</genre>
    </genres>

    <record_labels>
        <record_label id="1">DGC Records</record_label>
        <record_label id="2">Atlantic</record_label>
        <record_label id="3">Epic</record_label>
        <record_label id="4">Warner Bros.</record_label>
        <record_label id="5">EMI</record_label>
        <record_label id="6">Columbia</record_label>
    </record_labels>

    <records>
        <record>
            <artist>Nirvana</artist>
            <genreID>1</genreID>
            <album>Nevermind</album>
            <year_of_issue>1992</year_of_issue>
            <record_labelID>1</record_labelID>
        </record>

        <record>
            <artist>Twisted Sister</artist>
            <genreID>1</genreID>
            <album>Stay Hungry</album>
            <year_of_issue>1984</year_of_issue>
            <record_labelID>2</record_labelID>
        </record>   

        <record>
            <artist>Michael Jackson</artist>
            <genreID>2</genreID>
            <album>Thriller</album>
            <year_of_issue>1982</year_of_issue>
            <record_labelID>3</record_labelID>
        </record>   

        <record>
            <artist>Bee Gees</artist>
            <genreID>3</genreID>
            <album>Spirits Having Flown</album>
            <year_of_issue>1979</year_of_issue>
            <record_labelID>4</record_labelID>
        </record>   

        <record>
            <artist>Ice-T</artist>
            <genreID>4</genreID>
            <album>O.G. Original Gangster</album>
            <year_of_issue>1991</year_of_issue>
            <record_labelID>4</record_labelID>
        </record>

        <record>
            <artist>Kraftwerk</artist>
            <genreID>5</genreID>
            <album>Computer World</album>
            <year_of_issue>1981</year_of_issue>
            <record_labelID>5</record_labelID>
        </record>

        <record>
            <artist>Johnny Cash</artist>
            <genreID>6</genreID>
            <album>Man in Black</album>
            <year_of_issue>1971</year_of_issue>
            <record_labelID>6</record_labelID>
        </record>

    </records>
</record_collection> 
```

我可以管理的是输出一个没有流派和记录标签元素的未排序表，因为它们通过每个单独记录中的 id 链接，我不知道如何到达 id 并输出 id 后面的文本。这就是我到目前为止所拥有的 XSLT 转换。

```
<?xml version="1.0"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:template match="/record_collection/records">
        <html>
         <head>
            <title>Records Collection</title>
         </head>
         <body>
            <h1>Records Collection</h1>
            <table border="1">
                <tr>
                    <th>Genre</th>
                    <th>Artist</th>
                    <th>Album</th>
                    <th>Year</th>
                    <th>Label</th>
                </tr>

                <xsl:apply-templates select="record" />
            </table>
            <xsl:call-template name="footer" />
         </body>
        </html>
    </xsl:template>

    <xsl:template match="record">
        <tr>
            <td>?</td>
            <td><xsl:value-of select="artist" /></td>
            <td><xsl:value-of select="album" /></td>
            <td><xsl:value-of select="year_of_issue" /></td>
            <td>?</td>
        </tr>
    </xsl:template>

    <xsl:template name="footer">
        <div style="margin: 20px 0; padding: 10px; background-color: #efefef; ">
            Record Collection
        </div>
    </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T15:12:10.720

你只需要使用：

```
<xsl:apply-templates select="record">
    <xsl:sort select="year_of_issue" order="ascending" data-type="number"/>
</xsl:apply-templates> 
```

代替

```
<xsl:apply-templates select="record"/> 
```

该表将按发行年份升序排列

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T14:49:34.357

`xsl:key`这是查找您的流派和唱片公司的好地方

```
<?xml version="1.0"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:template match="/">
        <xsl:apply-templates select="/record_collection/records"></xsl:apply-templates>
    </xsl:template>

    <xsl:key name="genre-lookup" match="/record_collection/genres/genre" use="@id"/>
    <xsl:key name="record_label" match="/record_collection/record_labels/record_label" use="@id"/>

    <xsl:template match="records">
        <html>
            <head>
                <title>Records Collection</title>
            </head>
            <body>
                <h1>Records Collection</h1>
                <table border="1">
                    <tr>
                        <th>Genre</th>
                        <th>Artist</th>
                        <th>Album</th>
                        <th>Year</th>
                        <th>Label</th>
                    </tr>

                    <xsl:apply-templates select="record" />
                </table>
                <xsl:call-template name="footer" />
            </body>
        </html>
    </xsl:template>

    <xsl:template match="record">
        <tr>
            <td>
                <xsl:value-of select="key('genre-lookup',genreID)" />
            </td>
            <td>
                <xsl:value-of select="artist" />
            </td>
            <td>
                <xsl:value-of select="album" />
            </td>
            <td>
                <xsl:value-of select="year_of_issue" />
            </td>
            <td>
                <xsl:value-of select="key('record_label',record_labelID)" />
            </td>
        </tr>
    </xsl:template>

    <xsl:template name="footer">
        <div style="margin: 20px 0; padding: 10px; background-color: #efefef; ">
            Record Collection
        </div>
    </xsl:template>

</xsl:stylesheet> 
```

如果您只想按摇滚或流行音乐进行过滤，请调整您`apply-templates`的过滤方式`genreId = 1 / 2`：

```
<xsl:apply-templates select="record[genreID=1 or genreID=2]" /> 
```

对原始 xslt 的一项小改动是捕获根目录，以防止将默认处理指令应用于文档。

# php - PHP - 两个页面，两个会话，相同的值

> ID：13586235
> 
> 赞同：0
> 
> 时间：2012-11-27T14:20:23.143
> 
> 标签：php, session, session-variables

如果两个网站使用相同的会话变量（它们共享我编写的相同代码）并且我在同一个浏览器中打开它们（在两个选项卡中），则 SiteA 的会话与 SiteB 的值混淆，反之亦然。例如，如果我`$_SESSION['var1']=1`在 SiteA 中设置，然后在同一浏览器中打开 SiteB 并执行`array_dump($_SESSION)`然后我`var1`在转储中看到。

我该怎么做才能让一组会话变量保持在一个站点的“范围”内？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T14:27:50.180

我想这些会话在同一个域下，并且都使用相同的会话 cookie 名称。`session_name`使用（在您运行之前）更改此会话的名称`session_start`。

[http://de1.php.net/manual/en/function.session-name.php](http://de1.php.net/manual/en/function.session-name.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T14:22:59.313

也许为您的会话变量添加一些前缀以区分另一个？

**例如**

```
siteA_loggedIn
siteB_loggedIn 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T14:26:09.413

如果您在同一个域名上运行两个单独的站点，则默认情况下它们确实会共享会话数据，但您可以更改它。会话 cookie 的名称设置`php.ini`为`session.name`指令（默认情况下，它是`PHPSESSID`），但您可以用`session_name()`.

您要做的是改为在一个站点上调用会话 cookie `SessionSiteA`（注意，会话名称[必须是字母数字，并且必须至少包含一个字母](http://ie1.php.net/manual/en/function.session-name.php)）。

因此，您的选择是 (a)`php.ini`每个站点都有不同的文件；(b) 覆盖其中的值`.htaccess`（这对于某些但不是全部`php.ini`设置是允许的，我目前无法弄清楚如何做到这一点`session.name`：这可能是不可能的）；或 (c)`session_name()`在设置或读取任何会话之前调用其中一个站点中的函数。请注意，它的[计算成本](http://ie1.php.net/manual/en/function.session-name.php#103472)`session_name()`可能很高，因此请谨慎使用（可能仅在其中一个站点上，让繁忙的站点使用默认值）。`PHPSESSID`

**注意：**另一个选项可能是将每个站点的会话保存在不同的位置，`ini_set('session.save_path', ...)`在每个站点上使用不同的方式。如上所述，这必须在设置或使用任何会话之前集中完成。

# c# - 在 Visual Studio 中识别 .tcc 文件？

> ID：13586242
> 
> 赞同：6
> 
> 时间：2012-11-27T14:20:48.470
> 
> 标签：c#, c++, .net, vb.net, visual-studio

我最近偶然发现了 .tcc 文件格式，据我了解，这是在用 c++ 编写模板类时将接口与实现分开的一种方法

但是，Visual Studio 似乎并没有以不进行任何“漂亮打印”的方式识别这种格式，也就是说将关键字设为蓝色、类型为浅蓝色等。

有没有办法让 Visual Studio 识别这种格式并让智能感知可用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-27T14:22:52.877

跟着这些步骤：

1.  从**工具**菜单中，单击**选项**。

2.  展开**Text Editor**节点并选择**File Extension**。

3.  **在Extension**文本框中输入“<strong>tcc” ，然后从 Editor 列表中选择**Microsoft Visual Studio 2012 ，单击****Apply**，然后单击**Ok**。

* * *

**编辑：**在回复您的评论时，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/ms165326%28v=vs.80%29.aspx)中关于设置编辑器选项的这篇文档。

# batch-file - 选择以相同四个字符开头的文件

> ID：13586243
> 
> 赞同：1
> 
> 时间：2012-11-27T14:20:52.027
> 
> 标签：batch-file, filenames, batch-processing

我正在学习编写批处理文件。我想为以相同四个字符开头的文件运行 qc.exe。

例如在一个文件夹中，有这些文件：

> APUZ123.120
> 
> APUZ124.120
> 
> APUZ125.120
> 
> APUZ125.120
> 
> BCIX123.120
> 
> BCIX124.120
> 
> DSET123.120
> 
> DSET124.120

有些文件以相同的前 4 个字符开头，例如 APUZ、BCIX、DSET。

我怎样才能让程序选择所有只有 APUZ 字符的文件？

我知道如何通过扩展名进行过滤，例如 .12o、.txt：

```
for %%f in (.12o) do teqc +qc %%f 
```

或者

```
for %%f in (APUZ123.120) do teqc +qc %%f 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T14:40:46.997

我想这可能会对你有所帮助。

`for %%f in (APUZ*) do teqc +qc %%f`

`*`匹配 0 个或多个字符。

# cakephp - 使用提取检索多个数组值

> ID：13586244
> 
> 赞同：14
> 
> 时间：2012-11-27T14:20:54.990
> 
> 标签：cakephp

```
array(
    [0]=>
        [index1]=>something
        [index2]=>something else
        [index3]=>something more
    [1]=>
        [index1]=>something
        [index2]=>something else
        [index3]=>something more
    [2]=>
        [index1]=>something
        [index2]=>something else
        [index3]=>something more
) 
```

编辑：所以我想检索以下内容：

```
array(
    [0]=>
        [index1]=>something
        [index2]=>something else
    [1]=>
        [index1]=>something
        [index2]=>something else
    [2]=>
        [index1]=>something
        [index2]=>something else
) 
```

如何使用 cakephp 中的 Set::extract 函数获取数组的多个索引？

这会检索一个值：

```
Set::extract($array, '{n}.index1'); 
```

但我想获得多个值……比如 index1 和 index2。

我尝试了以下语句，但无济于事。

```
Set::extract($array, '[{n}.index1, {n}.index2']); 
```

**编辑**

```
 $__pages = Hash::merge(
                    Hash::extract($pages, 'pages.{n}.id'),
                    Hash::extract($pages, 'pages.{n}.title')
                    );
    pr($__pages); 
```

输出：

```
Array
(
    [0] => 2
    [1] => 4
    [2] => 104
    [3] => Sample Page
    [4] => about us
    [5] => Services
) 
```

这并没有真正帮助我，因为我仍然需要这样的关联：

```
Array(
   [2] => Sample Page
   [4] => About us
   [104] => Services
) 
```

我什至会很高兴：

```
Array(
   Array(id => 2, title => Sample Page)
   Array(id => 4, title => About Us)
   Array(id => 104, title => Services)
) 
```

**回答** codeparadox 的回答适用于我提供的测试代码。这是现实生活中的代码，以防有人在这里绊倒。在书中它指出，“除了 {n} 和 {s} 之外的任何括在括号中的字符串文字都被解释为正则表达式。” 这条线似乎是隐藏的，不是很明显。所以知道了这一点，我只是使用正则表达式规则来检索我需要的数据。我有一个从 api 中提取 wordpress 帖子的数组，我需要将结果缩小到`id, title`.

```
array(
   posts=>
      0=>
         id => 3
         slug => sample-page
         type => page
         title => Sample Page
         //...and so on 

      1=>
         id => 7
         slug => sample-page-2
         type => page
         title => Sample Page 2
         //...and so on 
```

为了仅检索 id 和标题，我添加了以下行。

```
pr(Set::classicExtract($pages, 'pages.{n}.{(id|title)}')); 
```

这给了我：

```
array(
   posts=>
      0=>
         id => 3
         title => Sample Page

      1=>
         id => 7
         title => Sample Page 2 
```

文件：[书](http://book.cakephp.org/2.0/en/core-utility-libraries/set.html#Set::extract "书")

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-15T18:24:02.323

```
$arr = array(
            array(
                'index1'=>'something',
                'index2'=>'something else',
                'index3'=>'something more',
            ),
            array(
                'index1'=>'something',
                'index2'=>'something else',
                'index3'=>'something more',
            ),
            array(
                'index1'=>'something',
                'index2'=>'something else',
                'index3'=>'something more',
            )
        );

$output = Set::classicExtract($arr, '{n}.{index[1-2]}');

print_r($output);

// output

Array
(
    [0] => Array
        (
            [index1] => something
            [index2] => something else
        )

    [1] => Array
        (
            [index1] => something
            [index2] => something else
        )

    [2] => Array
        (
            [index1] => something
            [index2] => something else
        )

) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T23:09:23.990

一种方法（如果您只想保留一些结果）：

```
Hash::merge(
    Hash::extract($array, '{n}.index1'),
    Hash::extract($array, '{n}.index2')
); 
```

另一种方式（如果您只想删除一些）：

```
Hash::remove($array, '{n}.index3'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T14:51:06.023

你试过 Set::extract($array, '{n}.{s}'); ?

编辑：如果您的数组维度与您的答案完全相同，您可以尝试 array_keys(Set::extract($array, '{n}.{s}'));

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-09T13:41:21.823

我不知道你为什么要坚持`Set`上课？如果它不适合您的需要，您为什么要绝对使用它而不创建自己的功能？您在其中一条评论中说要避免`foreach`循环。但是`Set`类方法本身就充满了`foreach`循环。我可能会错过重点...

Personnaly 我会简单地使用这样的功能来做到这一点：

```
function filter_fields($array_to_filter, $fields_to_keep)
{
    foreach($array_to_filter as $i => $sub_array)
    {
        foreach($sub_array as $field => $value)
        {
            if(!in_array($field, $fields_to_keep))
            {
                unset($array_to_filter[$i][$field]);
            }
        }
    }

    return $array_to_filter;
} 
```

这是它将返回的示例：

```
print_r($array_to_filter);
/*
Array
(
    [0] => Array
        (
            [index1] => abc
            [index2] => def
            [index3] => ghi
        )

    [1] => Array
        (
            [index1] => jkl
            [index2] => mno
            [index3] => poq
        )
)
*/

$filtered_array = filter_fields($array_to_filter, array('index1', 'index3'));

print_r($filtered_array);
/*
Array
(
    [0] => Array
        (
            [index1] => abc
            [index3] => ghi
        )

    [1] => Array
        (
            [index1] => jkl
            [index3] => poq
        )
)
*/ 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-10T21:46:36.107

套装太棒了！您不能直接使用 Set::extract 执行此操作，但您可以使用 Set::combine 构建两个数组索引的关联数组：

```
Set::combine($myArray, '{n}.index1', '{n}.index2') 
```

一个工作示例如下所示：

```
$myArray = array(
    array('index1'=>'something 1', 'index2'=>'something else 1', 'index3'=>'something more 1'),
    array('index1'=>'something 2', 'index2'=>'something else 2', 'index3'=>'something more 2'),
    array('index1'=>'something 3', 'index2'=>'something else 3', 'index3'=>'something more 3'),
);

debug(Set::combine($myArray, '{n}.index1', '{n}.index2')); 
```

这将采用您提到的数组：

```
array(
[0]=>
    [index1]=>something 1
    [index2]=>something else 1
    [index3]=>something more 1
[1]=>
    [index1]=>something 2
    [index2]=>something else 2
    [index3]=>something more 2
[2]=>
    [index1]=>something 3
    [index2]=>something else 3
    [index3]=>something more 3 
```

)

并将其变成这样：

```
Array (
    [something1] => something else 1
    [something2] => something else 2
    [something3] => something else 3
) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-16T09:19:52.700

[+10] 在这篇文章中向我展示了 classicExtract 方法。

示例数组：

```
$params = array(
  'key-1'=>array('subkey'=>array('x'), 'junk'), 
  'key-2'=>array('subkey'=>array('y'), 'otherkey'=>'more junk')
); 
```

我遇到的问题：

基本键被转换为 int。

```
 eg. array(0=>array('x'), 1=>array('y')) 
```

解决方案：

```
$array = Hash::filter(Set::classicExtract($params, '{[a-zA-Z0-9-_.]}.subkey')); 
```

返回：

```
eg. array('key-1'=>array('x'), 'key-2'=>array('y')) 
```

根据需要修改键中的正则表达式。

刚写了这个函数

它将提供通过使用 {a) 而不是 {s} 来解析数组的能力

{a} 为基础的关联键。

像这样调用： static::extract($array, '{a}.subkey');

```
 public static function extract($array, $path, $filter=true){
    $path = str_replace("{a}", "{[a-zA-Z0-9-_.]}", $path);
    if(is_array($array)){
      $return = Set::classicExtract($array, $path);
      if($filter){
        if(is_array($return)){
          $return = Hash::filter($return);
        }
      }
      return $return;
    }
  } 
```

**[[蛋糕3更新]]**

**如果您使用此功能，我看到 cakephp 刚刚删除了 set 类。您可以通过将 classicExtract 方法添加到您的类来使其再次工作**

```
use Cake\Utility\Hash;

public static function classicExtract($data, $path = null)
{
    if (empty($path)) {
        return $data;
    }
    if (is_object($data)) {
        if (!($data instanceof \ArrayAccess || $data instanceof \Traversable)) {
            $data = get_object_vars($data);
        }
    }
    if (empty($data)) {
        return null;
    }
    if (is_string($path) && strpos($path, '{') !== false) {
        $path = \Cake\Utility\String::tokenize($path, '.', '{', '}');
    } elseif (is_string($path)) {
        $path = explode('.', $path);
    }
    $tmp = array();

    if (empty($path)) {
        return null;
    }

    foreach($path as $i => $key) {
        if (is_numeric($key) && intval($key) > 0 || $key === '0') {
            if (isset($data[$key])) {
                $data = $data[$key];
            } else {
                return null;
            }
        } elseif ($key === '{n}') {
            foreach($data as $j => $val) {
                if (is_int($j)) {
                    $tmpPath = array_slice($path, $i + 1);
                    if (empty($tmpPath)) {
                        $tmp[] = $val;
                    } else {
                        $tmp[] = static::classicExtract($val, $tmpPath);
                    }
                }
            }
            return $tmp;
        } elseif ($key === '{s}') {
            foreach($data as $j => $val) {
                if (is_string($j)) {
                    $tmpPath = array_slice($path, $i + 1);
                    if (empty($tmpPath)) {
                        $tmp[] = $val;
                    } else {
                        $tmp[] = static::classicExtract($val, $tmpPath);
                    }
                }
            }
            return $tmp;
        } elseif (strpos($key, '{') !== false && strpos($key, '}') !== false) {
            $pattern = substr($key, 1, -1);

            foreach($data as $j => $val) {
                if (preg_match('/^'.$pattern.'/s', $j) !== 0) {
                    $tmpPath = array_slice($path, $i + 1);
                    if (empty($tmpPath)) {
                        $tmp[$j] = $val;
                    } else {
                        $tmp[$j] = static::classicExtract($val, $tmpPath);
                    }
                }
            }
            return $tmp;
        } else {
            if (isset($data[$key])) {
                $data = $data[$key];
            } else {
                return null;
            }
        }
    }
    return $data;
}

//CAKEPHP METHODS
public static function extract($array, $path, $filter = true)
{
    $return = [];
    if (is_array($array)) {
        if (stristr($path, '{a}')) {
            $return = static::classicExtract($array, str_replace("{a}", "{[a-zA-Z0-9-_. ]}", $path));
        } else {
            $return = Hash::extract($array, $path);
        }
    }
    if ($filter && is_array($return)) {
        $return = Hash::filter($return);
    }
    return $return;
} 
```

# sql - 无法在具有唯一索引“uc1MSmerge_tombstone”的对象 dbo.msmerge_tombstone 中插入重复的键行

> ID：13586247
> 
> 赞同：1
> 
> 时间：2012-11-27T14:20:57.753
> 
> 标签：sql, sql-server, replication, database-replication, merge-replication

我在服务器中有一个合并复制设置。我备份了订阅者数据库并将其恢复到另一台服务器中并保持复制（我在没有设置复制的整个不同服务器中恢复它）。

当我尝试将批量数据插入到这个恢复的数据库中时，我收到了类似的错误

> 无法在对象 dbo.msmerge_tombstone 中插入具有唯一索引“uc1MSmerge_tombstone”的重复键行。重复键值为 (3674005,67607BE2-A12C-E211-8F84-3860777B763D)。语句已终止。

为什么会出现这个错误？我怎么能解决这个问题？

# matlab - scatter3 - 以某种方式显示 x、y、z

> ID：13586252
> 
> 赞同：0
> 
> 时间：2012-11-27T14:21:02.407
> 
> 标签：matlab, plot, octave

我想像这样显示 x、y、z 轴（连同散点数据）：

[3D 坐标。系统](http://en.wikipedia.org/wiki/File%3aCoord_system_CA_0.svg)

我尝试使用 GUI 编辑图形（例如尝试移动 y 轴）。我有什么办法可以做到这一点？

我的基本代码：

```
M = csvread('H:\Bla.csv', 1);

figure1 = figure;

% Create axes
axes1 = axes('Parent',figure1,'YAxisLocation','right','XAxisLocation','top',...
    'MinorGridLineStyle','none',...
    'GridLineStyle','-');
view(axes1,[-65.5 36]);
grid(axes1,'on');
hold(axes1,'all');

% Create scatter3
scatter3(M(:,1),M(:,2),M(:,3));

% Create xlabel
xlabel('X');

% Create ylabel
ylabel('Y');

% Create zlabel
zlabel('Z'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T14:27:40.043

您可以手动执行类似的操作（您仍然需要添加箭头）：

```
x = line([0 100],[0,0],[0,0],'color','r');
y = line([0 0],[0,100],[0,0],'color','g');
z = line([0 0],[0,0],[0,100],'color','b']); 
```

或者使用一些可用的 FEX 贡献：

*   [小轴](http://www.mathworks.com/matlabcentral/fileexchange/32168)
*   [轴](http://www.mathworks.com/matlabcentral/fileexchange/30018)

# solr - 用于文档的廉价字符串存储

> ID：13586257
> 
> 赞同：1
> 
> 时间：2012-11-27T14:21:17.023
> 
> 标签：solr

我想将标签添加到现有文档。该`tags`字段已存储但未编入索引，但我希望在没有（软）提交开销的情况下查看**最新值。**`tags`例如`q=christmas&fl=text,tags`将在提交之前返回最新的标签。

我知道 Solr 4.0 有部分文档更新，但它仍然需要重新索引文档才能看到该更改。

有没有办法在不进行昂贵的重新索引的情况下获得最新价值？比如NRT？

* * *

我更喜欢旧查询处理程序附带的结果。

在 NRT 的情况下，我不介意延迟几秒钟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T14:43:36.713

您可以考虑在 Solr 中使用[ExternalFileField 。](http://lucene.apache.org/solr/api-4_0_0-ALPHA/org/apache/solr/schema/ExternalFileField.html)这可能是获取未直接存储在索引中的值的唯一方法。但是，每次更新文件时都必须重新加载，因此这可能是一个潜在的性能问题 - 请参阅[Solr 邮件列表中的 ExternalFileField 最佳实践](http://lucene.472066.n3.nabble.com/ExternalFileField-best-practices-td1379672.html)。

此外，如果您决定这样做，这里是如何[在 Solr 中使用 ExternalFileField 的一个很好的演练。](http://www.findwise.com/blog/externalfilefield-in-solr/)

**更新：**

我建议使用Solr 4.0 附带的[RealTime Get](http://java.dzone.com/articles/solr-40-realtime-get) via 。`/get`这提供了您正在寻找的确切功能。然后，您可以将其与文档更新结合起来，无需每次都更新整个文档。

**更新 2：RealTimeGetComponent**

所以我查看了处理程序源代码，并且有一个[RealTimeGetComponent](http://lucene.apache.org/solr/4_0_0/solr-core/org/apache/solr/handler/component/RealTimeGetComponent.html)。我在默认处理程序上启用了它，`/select`如下所示。主要项目是设置`&get=true`参数并使其成为最后一个组件。

```
<!-- RealTimeGet Component-->
<searchComponent name="realtimeGet" class="solr.RealTimeGetComponent"/>

<requestHandler name="/select" class="solr.SearchHandler">
   <lst name="defaults">
     <str name="echoParams">explicit</str>
     <int name="rows">10</int>
     <str name="df">text</str>
     <bool name="get">true</bool>
   </lst>
   <arr name="last-components">
     <str>realtimeGet</str>
   </arr>
</requestHandler> 
```

查询 -`/select?q=id%3Amydoc2&wt=xml&id=mydoc2` 将产生以下输出：

```
 <response>
       <lst name="responseHeader">
         <int name="status">0</int>
         <int name="QTime">2</int>
         <lst name="params">
           <str name="id">mydoc2</str>
           <str name="wt">xml</str>
           <str name="q">id:mydoc2</str>
         </lst>
      </lst>
      <result name="response" numFound="1" start="0">
        <doc>
          <str name="id">mydoc2</str>
          <arr name="title">
            <str>realtime-get updated3</str>
          </arr>
          <long name="_version_">1419891443321798656</long>
        </doc>
      </result>
      <doc name="doc">
        <str name="id">mydoc2</str>
        <arr name="title">
          <str>realtime-get updated - new</str>
        </arr>
        <long name="_version_">1419892263820984320</long>
      </doc>
    </response> 
```

所以在这个例子中，它查询项目，`id=mydoc2`然后获取项目的最新版本，并显示和值`id=mydoc2`的差异。`_version_``title`

但是，为了获得此信息，您需要传递文档的 id 或 id 以获取更新版本。该组件似乎没有被编码为能够为正在使用它的 requestHandler 中执行的查询提取更新的文档。这将是一个很好的未来功能。

# javascript - 如何在 Objective-C 中下载网页数据并等待 JavaScript 执行？

> ID：13586260
> 
> 赞同：0
> 
> 时间：2012-11-27T14:21:33.447
> 
> 标签：javascript, html, objective-c

我尝试一些这样的：

```
NSString *url = @"http://www.example.com";
NSURL *urlRequest = [NSURL URLWithString:url];
NSError *err = nil;

NSString *html = [NSString stringWithContentsOfURL:urlrequest encoding:NSUTF8StringEncoding error:&err]; 
```

这会将 html 完美地返回给我，但它不会返回从 JavaScript 创建的数据，例如图形和内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T14:25:50.493

Javascript由浏览器而不是服务器执行。当您向服务器请求文档时，它会处理该请求并返回与该页面相关的 html/js/css。然后浏览器在本地执行 javascript 来做它应该做的任何事情，即创建图像、加载 ajax 数据等。

您的 C 代码正在从服务器中提取原始 html/js。这就是为什么你没有得到你期望的图像等。

# android - SQLiteOpenHelper 与 ContentProvider

> ID：13586262
> 
> 赞同：16
> 
> 时间：2012-11-27T14:21:41.507
> 
> 标签：android, sqlite, sqliteopenhelper

我是 Android 开发的新手。我正在尝试创建一个从内部数据库（SQLite）读取并在列表中列出所有数据的应用程序（我正在使用`listView`）。

到目前为止，我得到了一个名为`DatabaseHandler`extends的类`SQLiteOpenHelper`，它正在执行所有数据库操作（选择数据、插入数据、删除数据……）。

但是现在我想列出这些值，我在一些网站上阅读我必须使用 a`Loader`而不是`Cursor`，因此是 a `ContentProvider`。到目前为止，我了解它`ContentProvider`提供了对数据库的受控访问。

我的问题是：`ContentProvider`做的一样`SQLiteOpenHelper`吗？

另外，我使用的是 API 级别 8，并且`ContentProvider`仅在 API 级别 11 上可用。解决此问题的最佳方法是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-27T14:35:57.510

> 我的问题是：ContentProvider 是否与 SQLiteOpenHelper 一样？

`ContentProvider`如果他或她允许其他开发人员在他们的应用程序中访问应用程序的数据库，则由应用程序的开发人员实现 - 只是为了*共享*。它就像某个数据库的服务器，它的客户端是`ContentResolver`谁知道它的`ContentProvider`权限。例如，如果您需要从设备中获取一些联系人，那么您应该使用`ContentProvider`Contacts 数据库，更具体地说，它是[Contract 类](http://developer.android.com/reference/android/provider/ContactsContract.html)。

如果您知道适当的权限，`ContentProvider`您可以使用`ContentResolver`对象与它通信。

[`android.database`](http://developer.android.com/reference/android/database/package-summary.html)在其他情况下，您应该通过由和[`android.database.sqlite`](http://developer.android.com/reference/android/database/sqlite/package-summary.html)类表示的 SQL 抽象模型与数据库进行交互。

而且 -`ContentProvider`可从主要 API 级别作为应用程序的主要组件之一使用。

# 更新

来自官方文档：

> 在开始构建提供程序之前，请执行以下操作：
> 
> > 确定您是否需要内容提供者。如果要提供以下一项或多项功能，则需要构建内容提供程序：
> > 
> > *   您想向其他应用程序提供复杂的数据或文件。*   您希望允许用户将复杂数据从您的应用程序复制到其他应用程序。*   您想使用搜索框架提供自定义搜索建议。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-27T14:58:11.200

`SQLiteOpenHelper`用于管理数据库的创建和打开。它只是 sqlite 数据库的辅助类，可以在任何有 db 操作的地方使用。

`ContentProvider`是 android 的 4 个基本组件之一，其他 3 个是`Activity`,`Service`和`Broadcast`. `ContentProvider`用于管理对任何结构化数据集的访问，包括 sqlite 数据库。的数据源`ContentProvider`可以是数据库，但不一定是。

`ContentProvider`通常用于向其他应用程序提供自己的数据，就像`ContactsProvider`和一样`CalendarProvider`。`ContentProvider`并且使用 提供一些指定的接口比直接提供数据库更安全。

# php - Windows中的PHP exec octave sh

> ID：13586263
> 
> 赞同：0
> 
> 时间：2012-11-27T14:21:50.700
> 
> 标签：php, octave

我正在尝试使用在 Windows 2008 中运行的 exec 命令在 php 中执行以下 octave sh 文件。此命令在 Unix 中有效，但我不知道为什么它在 Windows 中无效。好像 Octave 的工作目录是 C:\Windows\system32\config\systemprofile 请指教。

```
exec("octave ./d_test.sh"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:53:25.413

已解决 :) 我在 'c:\software\Octave\Octave3.6.2_gcc4.6.2\share\octave\site\m\startup' 中编辑了 octaverc

```
addpath("C:\\Program Files (x86)\\Apache Software Foundation\\Apache2.2\\htdocs\\test");
addpath("C:\\Windows\\system32\\config\\systemprofile")
##cd(getenv('USERPROFILE')) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-28T15:38:54.807

你最好只弄清楚八度音程的位置并使用该绝对路径调用它，例如。`exec("C:\Octave-3.6.1\bin\octave.exe ./d_test.sh");`.

# iphone - 在 Appcelerator.Titanium 上点击按钮时添加页面卷曲动画以查看

> ID：13586268
> 
> 赞同：0
> 
> 时间：2012-11-27T14:22:15.757
> 
> 标签：iphone, animation, titanium, appcelerator, page-curl

我是 appcelerator.titanium 的新手。我从今天开始开发。

我的问题是，当在我的一个视图上点击按钮时，我想显示页面卷曲过渡效果。

我使用以下代码来执行此操作。但是应用程序崩溃了。我在 SO 和钛文档中进行了很多搜索。但找不到解决办法。

```
//This function returns a window

function ApplicationWindow()
{
    //load component dependencies
    var FirstView = require('ui/common/FirstView');

    //create component instance
    var self = Ti.UI.createWindow({
        backgroundColor:'#ffffff'
    });

    //construct UI
    var firstView = new FirstView();
    self.add(firstView);

    //Adding button for displaying view 2
    var button1 = Ti.UI.createButton({
        height  : '50',
        width   : '50%',
        top     : '70%',
        title : 'Add Child'
    });

    //Adding event listner for button
    button1.addEventListener('click',function(e){
        var view = createView();
        win.add(view);
    });
    self.add(button1);

    //creating second view
    function createView()
    {
        var view = Ti.UI.createView({
            backgroundColor : '#aabbcc'
        });

            //creating button for view 2
        var button2 = Ti.UI.createButton({
        height  : '50',
        width   : '50%',
        top     : '70%',
        title   : 'Show Curl'
    });

    //Adding event listner for button
    button2.addEventListener('click',function(e)
    {
            //creating animation
        var animation = Titanium.UI.createAnimation({
        transition :  Ti.UI.iPhone.AnimationStyle.CURL_UP
            });
        animation.backgroundColor = 'black';
        animation.duration = 1000;
        var animationHandler = function() {
             animation.removeEventListener('complete',animationHandler);
             animation.backgroundColor = 'orange';
             view.animate(animation);
        };
        animation.delay = 5000
        animation.addEventListener('complete',animationHandler);
        view.animate(animation);
     });

     view.add(button2);
     return view;
    }
    return self;
}

//creating window and opening
var win = ApplicationWindow();
win.open(); 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T16:21:52.597

请改用此模块：http: [//support.appcelerator.com/kb/119/tickets](http://support.appcelerator.com/kb/119/tickets)

这一切都为你完成了。。

# c++ - Windows 堆损坏 C++\C

> ID：13586270
> 
> 赞同：1
> 
> 时间：2012-11-27T14:22:18.520
> 
> 标签：c++, c, windows, memory, heap-memory

我在 C\C++ 中创建无锁队列，队列工作正常，但出现错误，Visual Studio 显示它是免费操作，并且它在此函数上崩溃

> extern "C" _CRTIMP int __cdecl _CrtIsValidHeapPointer( const void * pUserData)

当有很多阅读线程（使用免费的线程）时，就会发生这种情况，如果我删除 free 它适用于任意数量的线程，或者如果我放置简单的 printf("random stuff"); （它明显减慢了一点）它适用于任意数量的线程。所以我只是不知道该怎么做:(看起来如果很多线程试图释放内存窗口无法处理它，这可能是问题吗？当变量地址变为“魔术”时，我也会遇到访问冲突(0xABABABAB, 0xCDCDCDCD..)，我发现这些也和堆有关..

在 linux 中，Posix 线程没有任何问题，适用于任意数量的线程。

那么问题来了，为什么减慢线程会有所帮助（或者这是巧合？）以及如何在不减慢速度的情况下摆脱堆问题？欢迎任何关于堆内存的建议。

来源： [queue.c](http://pastebin.com/0LJjBHSy) [queue.h](http://pastebin.com/nc90j8me)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T14:32:03.273

当我尝试从 MFC gui 调用我的一个 dll 时，我遇到了类似的问题。

如果您通过静态链接和其他 dll/exe 作为针对 MSVC 运行时的动态链接制作其中一个 dll，您可能会遇到此类问题。

似乎针对 MSVC 运行时的静态链接 dll 与针对 MSVC 运行时的动态链接 dll 在不同的上下文中运行，即使它们在同一应用程序中使用也是如此。

基本上，如果您释放或返回从两个不同上下文创建的指针，则会发生堆损坏。如果你在 VS 中调试程序，它不会显示任何错误。但是如果你运行它，它会在退出返回上下文后显示堆损坏错误。

**一种可能的解决方案是将所有 dll 动态链接到 MSVC 运行时。**

希望这可以帮助，

问候

# php - json成功函数未执行

> ID：13586273
> 
> 赞同：0
> 
> 时间：2012-11-27T14:22:24.423
> 
> 标签：php, html, jquery

我正在尝试发布输入框的值和选中的单选按钮的获取值，并根据选中的单选按钮执行查询......但我的成功功能没有执行......

**html格式：**

```
 <form class="form-inline" id="myForm">
     <label class="radio">
        <input type="radio" id="title1" name="title" value="title"> 
    Title
    </label>

    <label class="radio">
    <input type="radio" id="author" name="title" value="author">
    Author
    </label>

    <label class="radio">
    <input type="radio" id="subject" name="title" value="subject"> 
    Subject
    </label><br>

    <input type="text" name="input"> </input>

    <button class="btn btn-inverse" id="download"  >Go</button>
    </form> 
```

**jQuery :**

```
$('document').ready(function(){
$('input[name=title]:first').attr('checked', true);

$('#download').click(function(){
    value = $('input[name=title]:checked', '#myForm').val();
    alert(value);

    var input = $('#input').attr('value');
    dataString = 'title='+ value +'&input='+input;
    wurl = "downloadE.php";
    $.ajax({url: wurl, type: "POST",dataType: "json",data:dataString ,success: function(data){

        alert("success");

        }
    })
})
}); 
```

**php代码：**

```
$value = $_POST['title'];
$output = $_POST['input'];
if($value=="title")
{
$query = " select * from library where Title = '$output'; ";
}
else if($value=="author")
{
$query = " select * from library where Author = '$output'; ";
}
else if($value=="subject")
{
$query = " select * from library where Subject = '$output'; ";
}

$result = mysql_query($query);

$ret = array();
while($info = mysql_fetch_array( $result )){
$ret[] = $info;
}
echo json_encode($ret); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T14:26:26.517

当我遇到这些类型的问题时，我会添加一个错误函数并将详细信息输出到控制台日志，以便帮助找出错误。像这样：

```
,success: function(data){
    alert("success");
},error: function(e){
    console.log(e);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T14:29:22.693

尝试这个

```
var callback = function( resp ) {
  alert(123);
}

$.post(url, data, callback, "json"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T14:37:48.457

`<input type="text" name="input"> </input>`

是错误的，而且您缺少我认为的 ID：

`<input type="text" name="input" id="input" />`

您还需要检查您的脚本是否正在执行。如果您的 JavaScript 没有返回任何内容，则意味着脚本在服务器端失败。

# html - HTML5/CSS3 模态框与 IE 的兼容性

> ID：13586274
> 
> 赞同：3
> 
> 时间：2012-11-27T14:22:25.303
> 
> 标签：html, internet-explorer, css, cross-browser

我第一次使用 HTML5/CSS3，并且在我的一个页面上使用了一个不错的链接到对话框（模式）显示。

这在 Chrome/Firefox 中就像一个梦想，但在 IE 中却不是（可能不是一个巨大的惊喜）。

在 IE (9) 中，当试图点击链接时，页面实际上完全冻结了。

谁能准确指出 CSS 的哪一部分不兼容以及是否有可用的修复程序？

代码在下面找到，在此先感谢。

**HTML**

```
 <td><a href="#Code1">Get Date / Without Time</a></td>

 <div id="Code1" class="modalDialog">

 <div>

<a href="#close" title="Close" class="close">X</a>
<h2>TITLE</h2>
<p>TEXT</p>
        </div>
        </div> 
```

**CSS**

```
.modalDialog {
        position: fixed;
        font-family: "Trebuchet MS", Helvetica, sans-serif;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        overflow: auto;
        background: rgba(0,0,0,0.8);
        z-index: 99999;
        opacity:0;
        -webkit-transition: opacity 400ms ease-in;
        -moz-transition: opacity 400ms ease-in;
        transition: opacity 400ms ease-in;
        pointer-events: none;
    }

    .modalDialog:target {
        opacity:1;
        pointer-events: auto;
    }

    .modalDialog > div {
        width: 40%;
        height: auto;
        position: relative;
        margin: 10% auto;
        padding: 5px 20px 13px 20px;
        border-radius: 10px;
        background: #FFFFFF;
        background: -moz-linear-gradient(#FFFFFF, #999999);
        background: -webkit-linear-gradient(#FFFFFF, #999999);
        background: -o-linear-gradient(#FFFFFF, #999999);
    }

    .close {
        background: #285C82;
        color: #FFFFFF;
        line-height: 25px;
        position: absolute;
        right: -12px;
        text-align: center;
        top: -10px;
        width: 24px;
        text-decoration: none;
        font-weight: bold;
        -webkit-border-radius: 12px;
        -moz-border-radius: 12px;
        border-radius: 12px;
        -moz-box-shadow: 1px 1px 3px #000;
        -webkit-box-shadow: 1px 1px 3px #000;
        box-shadow: 1px 1px 3px #000;
    }

    .close:hover { color: #285C82; background: #FFFFFF; } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T14:51:18.930

在您写 -webkit-、-moz- 或 -o- 的所有标签中，您没有写 -ms- 这是 Internet Explorer 的前缀。过渡在 Internet Explorer 中根本不起作用，您可以在[w3schools中看到 Internet Explorer 支持](http://www.w3schools.com/cssref/css3_browsersupport.asp)

波阿斯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T14:59:02.710

IE9[不支持](http://caniuse.com/#search=pointer-events)CSS `pointer-events`。在所有浏览器中，对话框以不可见（不透明）的方式呈现在整个页面上，但在 IE9 中，指针事件*不会*被忽略，因此对话框会阻止锚点上的单击事件。

[*可能有一种更简洁的方法来解决这个问题，但作为一种解决方法，您可以使用条件注释*](http://www.quirksmode.org/css/condcom.html)在 IE 的单独样式表中添加以下属性。

```
.modalDialog {
    display:none;
}

.modalDialog:target {
    display:block;
} 
```

另一种解决方法是给出`<a>`对话框的位置和 z-index > z-index。

`transition` [此外，IE9不支持](http://caniuse.com/#search=transition)CSS ，因此您可能需要寻找替代方案，也许[IE < 9 CSS3 过渡效果秘籍？](https://stackoverflow.com/questions/7933062/ie-9-css3-transition-effect-cheats)会有所帮助。

# visual-studio - ActiveQt 示例 - COM 应用程序 - 类命名

> ID：13586278
> 
> 赞同：0
> 
> 时间：2012-11-27T14:22:45.930
> 
> 标签：visual-studio, qt, activeqt

我正在尝试将 OLE 支持添加到我的程序中。我首先编译了一个 Qt 示例： [http ://doc.qt.digia.com/stable/activeqt-comapp.html](http://doc.qt.digia.com/stable/activeqt-comapp.html)

此示例导出 1 个类和 2 个类型：

```
QAXCLASS(Application)
QAXTYPE(Document)
QAXTYPE(DocumentList) 
```

为了测试，我在 Microsft Visual C++ 中导入（add class, MFC class from Typelib） 问题是，导入后，我的类改名了：

```
CApplication
CDocument
CDocumentList 
```

所以当我调用**CApplication::Getdocuments()**它返回一个**DocumentList***并且这个类是未知的！我究竟做错了什么？

编辑：在 VB 项目中测试，它工作正常！所以在VC++中导入tlb的时候肯定有问题

# javascript - 将rails参数传递给链接的js文件

> ID：13586279
> 
> 赞同：0
> 
> 时间：2012-11-27T14:22:47.270
> 
> 标签：javascript, jquery, ruby-on-rails, scope

我有一个附加的 js.erb 文件的视图，我试图用它来自动链接到一些 ajax 内容。当它包含在视图页面中时，我的代码可以正常工作：

```
<script>
$(document).ready(function(){ 
  //auto opening a phase
  <% if params[:phase] %>
    auto_phase = <%= params[:phase] %>;
    //open the specified phase
      var a_id = "phase_" + auto_phase;
      $('a#'+a_id).click();
  <% else %>
    //auto open first phase
      $('a.phase_status_0').first().click(); 
  <% end %>
})
</script> 
```

但是当我将代码移动到通过以下方式链接的 js.erb 文件时：

```
<% content_for :javascript_includes do %>
  <%= javascript_include_tag "projects.js.erb" %>
<% end %> 
```

我收到以下错误：

```
undefined local variable or method `params' for #<#<Class:0x299454c>:0x450185c> 
```

有没有一种简单的方法可以让 js.erb 文件从视图的 url 访问参数？（例如：www.site.com/projects/16?phase=18）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T15:07:43.147

`javascript_include_tag`唯一允许您包含 vanilla JavaScript 文件。

您可能正在寻找的是将您的代码放入`_projects.js.erb`其中，然后将其呈现为部分：

```
<% render 'projects.js', :locals => { :project_phase => params[:phase] } %> 
```

然后在你的 js.erb 文件中替换`params[:phase]`为。`:project_phase`

*边注：*

这一行：

```
auto_phase = <%= params[:phase] %>; 
```

缺少引号，因此在新文件中将如下所示：

```
auto_phase = "<%= :project_phase %>"; 
```

# coffeescript - 将 IcedCoffeeScript 关键字添加到 Webstorm Intellisense

> ID：13586280
> 
> 赞同：4
> 
> 时间：2012-11-27T14:22:49.560
> 
> 标签：coffeescript, webstorm, iced-coffeescript

我想添加一些 IcedCoffeeScript 关键字来突出显示 CoffeeScript 文件，但是对于 CoffeeScript 文件类型，编辑按钮是灰色的。有没有办法可以复制列表中已经存在的文件类型并添加关键字？或者，是否有一种简单的方法可以将关键字添加到现有文件类型？为什么 CoffeeScript 文件的编辑文件类型显示为灰色，而其他文件则没有？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T12:11:28.050

不——您不能通过添加自己的关键字来扩展现有语言，因为原始支持是通过基于 Java 的插件完成的（对于适当的语言支持：语法、检查、验证、代码完成、重构等）。

JetBrains 问题跟踪器上的实际票证：http: [//youtrack.jetbrains.com/issue/RUBY-11996](http://youtrack.jetbrains.com/issue/RUBY-11996)

# jquery - 动态生成表单

> ID：13586282
> 
> 赞同：1
> 
> 时间：2012-11-27T14:22:50.623
> 
> 标签：jquery, forms, spring, web-applications

我附上了我需要在我的 Web 应用程序中构建的多个表单中的两个的原始图像：

![形式](../Images/6c0701ef7787b6ce660620475efbb161.png)

如果我考虑一般形式，它具有以下要素：

1.  复选框
2.  日期
3.  约会时间
4.  文件
5.  图片
6.  密码
7.  单选按钮
8.  文本框
9.  标签
10.  文本区
11.  时间
12.  关联

我想知道是否有一种方法可以将所有表单的结构/元数据存储在某处（配置文件、数据库等），并根据某些操作即时生成表单元数据 - 用户只需输入值。我经历了几个像[this](https://stackoverflow.com/questions/4636098/dynamic-form-in-spring-3)和[this这样](https://stackoverflow.com/questions/890250/better-way-for-dynamic-forms-with-spring)的话题，但找不到答案。假设有可能，如何构造存储的元素以便它们在生成的页面/表单中正确呈现，如何存储组合框的值，如何使文本框成为只读以及类似的查询已添加到我的困惑。

请注意，虽然*我仅限于使用 JQuery 和 Spring*，但我也想知道其他技术和方法，当然，实现相同！

谢谢并恭祝安康 ！

*第一次编辑开始

虽然 pbibergal 提供的解决方案似乎解决了我的问题，但我仍然期待一些基于 Spring/纯 JQuery 的解决方案来实现相同的目标 - 我不确定是否允许我探索和使用JS模板引擎！

*第一次编辑结束

*第二次编辑开始

这是我尝试使用 doT.js 呈现表单的单个页面 - 我是否在某处遗漏了一些 HTML 标记以传递给它可以呈现表单的 js 代码？

```
 <html>
    <script src="../../jquery1.8.3/jquery-1.8.3.js"></script>

    <script src="https://raw.github.com/olado/doT/master/doT.js">
    </script>

    <script id="form-tmpl" type="text/x-dot-template">
        {{~it.form :value:index}}
            <{{=value.element}} id="input_{{=value.index}}" type="{{=value.type}}" value="{{=value.value}}">
        {{~}}
    </script>

    <script>
    var json =  "{fileState:"Processed",reason:"",cancel:"Cancel"}";

    $(document).ready(function(){
        var tmpl = doT.template(document.getElementById('form-tmpl').text);
        $('body').append(tmpl(json));
    });
    </script>

    <body>
    </body>

    </html> 
```

*第二次编辑结束

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T15:12:10.893

您可以使用 Javascript 对象来存储数据。例如。

```
var json = {"form": [
{
    "type": "text", "element": "input", "value": "some text"
},
{
    "type": "button", "element": "input", "value": "Click here"
}
]} 
```

将您的数据保存在 Mozilla IndexedDB 或 WebSQL 等本地数据库中。另一种方法是保存在本地存储中。然后使用 javascript 模板引擎构建您的表单。doT.js 对此有好处：http: [//olado.github.com/doT/](http://olado.github.com/doT/)

在 HTML 文件中：

```
<script id="form-tmpl" type="text/x-dot-template">
    {{~it.form :value:index}}
        <{{=value.element}} id="input_{{=value.index}}" type="{{=value.type}}" value="{{=value.value}}">
    {{~}}
<script/> 
```

在 JS 文件中：

```
$(document).ready(function(){
    var tmpl = doT.template(document.getElementById('form-tmpl').text);
    $('body').append(tmpl(json));
}); 
```

# android - Android：从Activity设置windowIsTranslucent

> ID：13586284
> 
> 赞同：1
> 
> 时间：2012-11-27T14:22:51.730
> 
> 标签：android, window, transparent

我正在开发一个库，我必须以编程方式设置窗口背景，并且不能使用自定义样式 XML。这个想法是实现库的用户可以设置他想要的任何主题 - 我只需要使背景透明。所以小部件的所有样式都将保持不变。

我尝试了一些窗口标志，例如`WindowManager.LayoutParams.FLAG_DIM_BEHIND`and `WindowManager.LayoutParams.FLAG_BLUR_BEHIND`，但它们都不起作用。

我找到的每个解决方案都基于样式 xml 文件。

有没有办法直接从代码中设置 windowIsTranslucent ？

在此先感谢，罗马

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T14:34:58.250

不，这是不可能的。

只能`windowIsTranslucent`在您的主题中设置。

建议; 创建您自己的主题，其他人可以覆盖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-10T01:18:59.363

`android:windowIsTranslucent`, `android:windowIsFloating`, 和`android:windowNoDisplay`都只读取一次，甚至在您的活动开始之前。因此，当您运行自己的代码时，为时已晚。

[http://osxr.org:8080/android/source/frameworks/base/services/java/com/android/server/am/ActivityRecord.java#0399](http://osxr.org:8080/android/source/frameworks/base/services/java/com/android/server/am/ActivityRecord.java#0399)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-19T02:31:55.127

我用这个

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    processSetTheme(this);
    getWindow().requestFeature(Window.FEATURE_NO_TITLE);
    getWindow().setBackgroundDrawableResource(R.color.realTranslucent);
    if (Build.VERSION.SDK_INT>=19){
        getWindow().addFlags(WindowManager.LayoutParams.FLAG_TRANSLUCENT_NAVIGATION);
        getWindow().addFlags(WindowManager.LayoutParams.FLAG_TRANSLUCENT_STATUS);
    }
    super.onCreate(savedInstanceState);

<color name="realTranslucent">#00000000</color> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-02-28T09:58:45.847

这是诀窍：首先你使用半透明活动。然后您可以设置活动布局文件顶部布局的背景。

# git - GitHub 应用程序和 Heroku — 致命：参考的格式无效：'refs/remotes/heroku/master'

> ID：13586290
> 
> 赞同：1
> 
> 时间：2012-11-27T14:23:00.490
> 
> 标签：git, heroku, github-for-mac

我正在使用 Git 应用程序，每次打开某个存储库时都会收到此错误：

[http://cl.ly/image/271p2h283j1g](http://cl.ly/image/271p2h283j1g)

任何帮助都会很棒。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T14:34:17.933

您肯定在使用 Dropbox 在多台计算机之间同步您的项目。在执行同步时，该工具检测到两个文件之间存在冲突，并创建了一个后缀为`(COMPUTER_NAME's conflicted copy DATE)`.

不幸的是，冲突文件是一个引用，根据 Git 命名约定，引用的名称不能包含空格。有关描述如何命名引用的规则的更多信息，请参阅**[git check-ref-format 手册页。](http://git-scm.com/docs/git-check-ref-format.html)**

由于引用只是包含指向提交 Sha 或其他引用的指针的文本文件，因此修复这个问题并不复杂。

**为了解决此问题，应遵循以下步骤：**

*   在您的项目目录中，在文本编辑器中打开`.git/refs/remotes/heroku/master`和`.git/refs/remotes/heroku/master (Richard Burton's conflicted copy 2012-11-24)`文件，并确定哪些内容是最新的（即，这是 Heroku 上远程 master 分支的真正提示）。
*   复制正确的 SHA 并将其粘贴到名为`.git/refs/remotes/heroku/master`
*   放下`.git/refs/remotes/heroku/master (Richard Burton's conflicted copy 2012-11-24)`文件。

**注意：**您可能有其他文件冲突。为了彻底，在您的项目中启动递归搜索名称包含的文件`conflicted copy`

**注意 2：** `git ls-remote --heads heroku`在这种情况下可能会很方便，因为它会向远程存储库请求其已知分支。

# symfony - 如何查询包含产品的所有子类别（直接在子类别中，或在类别树下的任何位置，例如在子子类别中）？

> ID：13586291
> 
> 赞同：0
> 
> 时间：2012-11-27T14:23:03.950
> 
> 标签：symfony, doctrine-orm, dql, nested-sets, query-builder

### 架构：

> **类别 [** `id` , `parent`, `children`, `left`, `right`, `level`, `root`, `products` **]**
> 
> **产品 [** `id` , `category`, `marketSegments` **]**
> 
> **市场细分 [** `id` **]**
> 
> *此外，每个实体都有 , 之类的字段* *，*`name`*但* *这些与我的问题无关。*`description` *`slug`*

 **### 示例数据

传奇：

`c`- 类别，`p`- 产品

标有 * 的产品标有“出口到美国”的细分市场

```
Food                                [c, id: 1, level: 0]
---> Vegetables                       [c, id: 2, level: 1]
--------------> Potato                  [p, id: 1]
--------------> Carrot                  [p, id: 2]
---> Fruits                           [c, id: 3, level: 1]
--------------> Berries                 [c, id: 5, level: 2]
---------------------------> Grapes       [p, id: 3]
--------------> Hesperidiums            [c, id: 6, level: 2]
---------------------------> Orange*      [p, id: 4]
---> Meat                             [c, id: 4, level: 1]
--------------> Beef*                   [p, id: 5] 
```

### 预期查询结果：

对于给定的数据和**$category** = *Food*，**$marketSegment** = *Export to USA*的预期结果将是：

`$filteredCategories = [Fruits, Meat]`

为什么？

*   `Meat`因为它包含`Beef`标有*出口到美国的产品*
*   `Fruits``Hesperidiums`因为它包含包含标记产品的类别。

包含标记产品的类别在嵌套树中的深度无关紧要。

这个：

```
Sports [c]
-----> Individual [c]
----------------> Fight [c]
----------------------> MMA [c]
--------------------------> Boxing gloves* [p] 
```

对于**$category** = *Sports*应返回：[ `Individual`]。

对于**$category** = *Fight*应该返回：[ `MMA`]。

* * *

### 我的（不工作的）DQL 方法：

```
SELECT DISTINCT cat FROM Avocode\CatalogBundle\Entity\Category cat 
WHERE cat.parent = :parent_id 
AND (EXISTS(
        SELECT sub FROM Avocode\CatalogBundle\Entity\Category sub 
        LEFT JOIN sub.products prod 
        LEFT JOIN prod.marketSegments seg 
        WHERE sub.left > cat.left 
        AND sub.right < cat.right 
        AND seg.id = :segment_id
)) 
ORDER BY cat.root, cat.left ASC 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T00:00:58.123

`NestedTreeRepository`Gedmo NestedSet 行为扩展附带的有一个方法`getChildrenQueryBuilder()`，允许您查询给定父节点的子节点，并有一个参数用于查询层次结构中深几层的节点。您应该调查随附的方法和选项，`NestedTreeRepository`以便不需要手动构建 DQL。

我不完全确定您的所有代码是如何设置的，因此我无法提供确切的解决方案，但我认为您可以弄清楚:)

NestedSet 文档：[http ://www.gediminasm.org/article/tree-nestedset-behavior-extension-for-doctrine-2](http://www.gediminasm.org/article/tree-nestedset-behavior-extension-for-doctrine-2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T12:45:58.227

谢谢约翰！使用 NestedTreeRepository 我想出了解决方案：

我为扩展 NestedTreeRepository 的 Category 类创建了自己的 Repository 并创建了一个自定义方法

> 公共函数 findSubcategoriesFilteredByMarketSegment (Category $parentNode, MarketSegment $segment)
> 
> {
> 
> ```
>  // get DIRECT CHILDREN for $parentNode
>    $qb = $this->getChildrenQueryBuilder($parentNode, true);
>    $qb->leftJoin($qb->getRootAlias().'.products', 'prod')
>       ->leftJoin('prod.marketSegments', 'seg');    
> 
>    // subquery -> get all children (direct and indirect) 
>    // for DIRECT CHILD from main query
>    $sqb = $this->_em->getRepository('AvocodeCatalogBundle:Category')->createQueryBuilder('sub');
> 
>    // join products and market segments
>    $sqb->leftJoin($sqb->getRootAlias().'.products', 'sub_prod')
>        ->leftJoin('sub_prod.marketSegments', 'sub_seg');
> 
>    // to match children of main query's DIRECT CHILD
>    // they need to have left and right values between DIRECT CHILD's left and right
>    $sqb->where(
>             $sqb->expr()->andX(
>                $sqb->expr()->gt('sub.lft', $qb->getRootAlias().'.lft'),
>                $sqb->expr()->lt('sub.rgt', $qb->getRootAlias().'.rgt'),
>                $sqb->expr()->eq('sub.root', $qb->getRootAlias().'.root')
>         ));
> 
>    // match only children with products related to $segment
>    $sqb->andWhere($sqb->expr()->eq('sub_seg.id', ':segment_id'));
> 
>    // BACK TO MAIN QUERY
>    // select only parentNode children THAT
>    $qb->andWhere(
>          $qb->expr()->orX(
>              // contain product with related segment
>              $qb->expr()->eq('seg.id', ':segment_id'),
>              // or 
>              // have a child (direct or indirect) that does contain such product
>              $qb->expr()->exists($sqb->getDQL())       
>      ))
>      ->setParameter('segment_id', $segment->getId());
> 
>    return $qb->getQuery()->getResult(); 
> ```
> 
> }**

# jquery - 这个 jQuery Dropdown 脚本可以简化吗？

> ID：13586298
> 
> 赞同：2
> 
> 时间：2012-11-27T14:23:20.040
> 
> 标签：jquery, compression, simplify

我有两个脚本，我已经创建了。一个用于桌面多级下拉导航，第二个用于响应式。有没有办法简化/压缩这个我没有看到的脚本？

这是我的简化版。

```
$(document).ready(function () {
$('ul.primary li').click(function () {
    var a = this;
    if ($('ul', this).is(':visible')) {
        $('ul', this).slideUp(function () {
            $(a).removeClass('active')
        })
    } else {
        $('ul.drop').slideUp();
        $('ul.primary li').removeClass('active');
        $('ul', this).slideDown();
        $(a).addClass('active')
    }
});
$('body').click(function (a) {
    if (!$(a.target).is('a')) {
        $('ul.drop').slideUp();
        $('ul.primary li').removeClass('active')
    }
});
$(function () {
    $('.mobile-nav').click(function (e) {
        $('.primary').slideToggle(150, "swing");
        e.stopPropagation()
    });
    $(window).resize(function() {
        $('ul.drop').slideUp();
        $('ul.primary li').removeClass('active')
    });
})
}); 
```

这是标记：

```
<div class="nav">
    <div class="mobile-nav">Navigation</div>
        <ul class="primary">
            <li><a href="#link">Link</a></li>
            <li><a class="has-drop">Link w/ Children <span></span></a>
            <ul class="drop">
                <li><a href="#link">Link</a></li>
                <li><a href="#link">Link</a></li>
                <li><a href="#link">Link</a></li>
                <li><a href="#link">Link</a></li>
                <li><a href="#link">Link</a></li>
            </ul>
            </li>
            <li><a class="has-drop" href="#link">Link w/ Children <span></span></a>
            <ul class="drop">
                <li><a href="#link">Link</a></li>
                <li><a href="#link">Link</a></li>
                <li><a href="#link">Link</a></li>
                <li><a href="#link">Link</a></li>
                <li><a href="#link">Link</a></li>
            </ul>
            </li>
            <li><a href="#link">Link</a></li>
            <li><a href="#link">Link</a></li>
        </ul>
        <div class="clear"></div>
    </div>
</div> 
```

我现在遇到的问题是 window.Resize 函数并没有一直触发。我正在寻求在调整窗口大小时关闭所有打开的 ul.drop。

此外，当我的浏览器重新调整为桌面宽度时，我的 ul.drops 似乎被切断，并且在我刷新之前不会滑过包含的元素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T14:26:32.320

[http://dean.edwards.name/packer/](http://dean.edwards.name/packer/)是一个自己压缩的好地方。
非常不言自明如何使用:)

# linux - Linux - 在内核代码中映射用户空间内存

> ID：13586301
> 
> 赞同：3
> 
> 时间：2012-11-27T14:23:46.737
> 
> 标签：linux, memory-management, linux-kernel, memory-mapping, mmu

我正在编写一段代码，该代码需要在 SOC 关闭之前存储位于特定物理地址的 10k 内存。

我的问题是这个物理地址不是内核空间的一部分，所以我必须创建一个临时内存映射，这样我才能访问这个内存空间。

我尝试使用 io-remap 但它（显然）不适用于非内核空间。

是否有任何 API 可以做到这一点？我应该使用 kmap 吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T17:24:01.983

听起来像内存映射外围设备。为了紧密绑定到您的内核中，它会在 initdata 中添加条目，该条目会转到 iotable_init()。例如arch/arm/mach-vexpress/ct-ca9x4.c ct_ca9x4_io_desc[]。这会创建虚拟到物理的映射。然后内核代码可以使用带有虚拟地址的 writel 在那里写入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T14:04:17.093

找到了答案

关键是使用为给定页表创建映射的 vmap 函数。问题是如何将页表结构初始化为某个物理地址，但似乎也存在一个 API

这是分配单个页面的示例

```
void *virt_addr_ptr
struct page **my_page = kmalloc(sizeof (*my_page), GFP_KERNEL);
my_page = phys_to_page(phys_addr_ptr);
virt_addr_ptr = vmap(my_page, 1, VM_MAP, PAGE_KERNEL);

/*now its possible to access this space */
memcpy(store_buffer, virt_addr_ptr, store_size); 
```

# c++ - 在 Qt 组合框中设置项目

> ID：13586303
> 
> 赞同：7
> 
> 时间：2012-11-27T14:23:55.637
> 
> 标签：c++, qt, combobox

我对 Qt 很陌生。我正在关注本教程[http://sector.ynet.sk/qt4-tutorial/my-first-qt-gui-application.html](http://sector.ynet.sk/qt4-tutorial/my-first-qt-gui-application.html)。本教程有一个小错误。虽然它添加了一个组合框条目，但没有设置文本。有人可以告诉我如何正确初始化组合框。

另外，如果有更好的 Qt 学习教程，有人可以指出我吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-27T15:41:06.297

终于，我得到了正确的答案。我在下面提供了它，希望它对其他初学者有用：

```
QStringList list=(QStringList()<<"red"<<"yellow"<<"blue");
comboBox->addItems(list); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-11-21T09:52:48.983

当您在 Qt Designer 中时，您只需双击 QComboBox，就会出现一个 EditComboBox 屏幕。在那里，您只需单击加号或减号即可轻松地将项目添加到对象列表中。希望这会有所帮助。这样您就不必使用代码来完成了。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-27T14:34:04.540

本教程是为 Qt 4.2 制作的，我们现在使用的是 Qt 4.8。你应该在这里找到你正在寻找的东西[http://qt-project.org/doc/qt-4.8/how-to-learn-qt.html](http://qt-project.org/doc/qt-4.8/how-to-learn-qt.html)

一点建议，尽量不要使用 Qt creator 来设计你的 Gui，直到你了解如何用代码来做，你会少犯错误（并且知道当你这样做时要寻找什么）。

# c# - 使用 linq 或其他 C# 函数展平列表列表

> ID：13586305
> 
> 赞同：2
> 
> 时间：2012-11-27T14:24:01.663
> 
> 标签：c#, .net, linq

我有一堂课：

```
 public class ChartData
    {        
      public Decimal? Value { get; set; }        
      public DateTime Date { get; set; }        
    } 
```

我也有

```
 List<List<ChartData>> chartData = List<List<ChartData>>(); 
```

chartData 可以包含任意数量的列表，可以是一个，也可以是十个列表。

我需要把这个结构弄平。例如，如果我在 chartData 中有两个列表，我需要获取每个对象包含字段的对象列表：

```
 {
      Decimal? Value0
      Decimal? Value1
      DateTime Date
    } 
```

如果我有十个列表，我需要获取每个对象包含字段的对象列表：

```
 {
      Decimal? Value0
      Decimal? Value1
      .
      .
      .
      Decimal? Value9
      DateTime Date
    } 
```

是否可以使用 linq 或其他 C# 函数来做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T14:26:01.430

如果`chartData`真的可以包含*任意*数量的列表，那么您就不走运了，因为您无法在 .NET 类中动态创建字段。一个类的确切结构必须在编译时知道，即使它是一个匿名类。

您可以考虑使用

```
{
    List<Decimal?> Values,
    DateTime Date
} 
```

或者

```
{
    Decimal?[] Values,
    DateTime Date
} 
```

相反，它们都可以通过 LINQ 轻松创建。如果您详细说明*为什么*需要将它们作为单独的字段*（可能是某种序列化要求？如果是，哪种格式？）*，SO 社区可能会提出替代解决方案。此外，您应该指定应该使用哪个*Date*值（如果它们不同）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T14:42:56.203

您可以使用 4.0 版中引入的 C# 的动态可能性。

[请参阅有关财产袋](https://stackoverflow.com/a/9653052/880990)的这篇SO 文章。

但是请注意，您会丢失任何编译时检查！在你这样做之前，请考虑两次。

# java - HTML 到 Textile Java 库

> ID：13586309
> 
> 赞同：1
> 
> 时间：2012-11-27T14:24:26.327
> 
> 标签：java, html, textile

我需要将 String 从 HTML 解析为[Textile](http://en.wikipedia.org/wiki/Textile_%28markup_language%29)。

我一直在关注 Textile4J、Textile-J、JTextile、PLextile。但到目前为止，它们都没有提供我正在寻找的功能。它们确实提供了反向功能（Textile to HTML）。

最坏的情况，我可以使用另一种编程语言，但我还没有真正研究过。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T09:10:41.257

目前，我不相信我想要的功能在任何 java Textile 库中都可用。如果情况发生变化，我会尝试更新这篇文章。

基于上面提到的库，我创建了自己的（有限的）功能。

python / ruby​​ 中也有几种可用的解决方案。

# objective-c - 如何初始化数字数组中的所有位置？

> ID：13586313
> 
> 赞同：1
> 
> 时间：2012-11-27T14:24:47.050
> 
> 标签：objective-c, ios6

我想在一个数组中存储相同的数字 100 次。这些数字稍后会改变，但我想编写一个 if 语句，使用一个计数器来填充所有 100 个插槽，最初的值为 0。有没有简单的方法可以做到这一点？

像*这样*，“block01”需要更改为“block02”、“block03”等：

```
int block01 = 0;

NSMutableDictionary* myDict = [[NSMutableDictionary alloc] init];

if(myDict)
{
    [myDict setObject:block01 forKey:@"block01stored"];

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentPath = [paths objectAtIndex:0];
    NSString *path = [documentPath stringByAppendingPathComponent:@"blocks.save"];

    BOOL successfulWrite = [myDict writeToFile: path atomically: YES];
    if(successfulWrite == NO)
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T14:34:21.590

您可以创建 NSNumber（它是一个对象，但 int 不是），然后将其存储到 NSMutableDictionary：

```
NSNumber* num = [NSNumber numberWithInt:0];

for (int i = 1; i<=100; i++) {
   [myDict setObject:num forKey:[NSString stringWithFormat:@"block%dstored",i]];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T14:45:57.420

这应该可以帮助你。这是一个将执行 99 次 (1 - 100) 的循环，添加零作为格式化为包含当前数字的键的对象。

```
NSMutableDictionary* myDict = [[NSMutableDictionary alloc] init];
for (int i = 1; i <= 100; i ++) {
    if(myDict)
    {
        [myDict setObject:[NSNumber numberWithInt:0] forKey:[NSString stringWithFormat:@"block%.3istored",i]];
    }
}
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentPath = [paths objectAtIndex:0];
NSString *path = [documentPath stringByAppendingPathComponent:@"blocks.save"];
BOOL successfulWrite = [myDict writeToFile: path atomically: YES];
if(successfulWrite == NO) 
```

**编辑：**要获取某个键的值，您可以使用以下命令：

```
int myInt = [[myDict objectForKey:@"block050stored"] intValue]; 
```

如果你想用某个键替换对象，它很简单：

```
[myDict setObject:[NSNumber numberWithInt:1] forKey:@"block020stored"]; 
```

现在，`%.3i`告诉字符串添加一个数字 (i)，其格式始终为三位数。(000, 001, 010, 099, 100)

```
[NSString stringWithFormat:@"block%.3istored",i] 
```

所以上面的行基本上意味着，创建一个带有单词“block”和“stored”的字符串，用三位数字表示int“i”的当前值在它们之间。

# rubymotion - Rubymotion 在子文件夹中组织资源

> ID：13586315
> 
> 赞同：1
> 
> 时间：2012-11-27T14:24:51.977
> 
> 标签：rubymotion

当我在 ./resources 目录中使用子文件夹时，我无法访问它们。正确组织资源的正确方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-27T22:53:24.093

确保在代码中引用子文件夹。如果您的图像是`./resources/subfolder/imagename.png`，请执行以下操作：

```
image = UIImage.imageNamed("subfolder/imagename") 
```

这对我来说很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-08T09:12:59.383

对于 OSX 应用程序，接受的答案对我不起作用。什么有效：

```
# Rakefile
Motion::Project::App.setup do |app|
  app.resources_dirs << ['resources/icons']
end 
```

访问文件

```
image = UIImage.imageNamed("imagename") # icons subfolder not needed 
```

# javascript - 在页面中的任何位置的javascript中的鼠标指针下找到一个单词

> ID：13586317
> 
> 赞同：2
> 
> 时间：2012-11-27T14:24:54.263
> 
> 标签：javascript, jquery

我可以使用此代码找到元素的文本。但是如果鼠标悬停在该单词上一段时间，我想在页面中的任何位置找到一个单词。

```
$(document).bind("mouseover", function (e) {
    var event = e;
    setTimeout(function () { $(event.target).contents().each(function(index, elem) {
        if( elem.nodeType === 3 && $.trim(elem.nodeValue).length ) {
            var text = $.trim(elem.nodeValue);
            text = text.split(" ");
            console.log($.trim(elem.nodeValue));
            //alert($.trim(elem.nodeValue));
            return false;
         }
      });
   }, 5000); 
```

});

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T15:56:20.070

这可能不是有史以来最好的代码，但它可能会让你走上正确的轨道，脱离 andyb 的评论。

就像是

```
$(".first").on("hover",function(){

  var words = $(this).text().split(" ");

  var fullText = "";

  for(i=0;i<words.length;i++){
    words[i] = "<span>"+words[i]+"</span> "; 
    fullText += words[i];
  }  

  $(this).text("").append(fullText);

  $(this).children("span").on("hover", function(){
    $(".second").text($(this).text());
  });

}); 
```

尽管查看[工作示例](http://jsbin.com/enuqov/2)是您的最佳选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T08:43:01.223

```
 $(document).bind("mouseover", function (e) {
      var event = e;
      setTimeout(function () { $(event.target).contents().each(function(index, elem) {
      if( elem.nodeType === 3 && $.trim(elem.nodeValue).length ) {
      var text = $.trim(elem.nodeValue);
      text = text.split(" ");
      var words = (elem.nodeValue).split(" ");

      var fullText = "";

      for(i=0;i<words.length;i++){
          words[i] = "<span>"+words[i]+"</span> ";
          fullText += words[i];
      }

      $(event.target).html("").append(fullText);

      $(event.target).children("span").on("hover", function(){
          //$(".second").text($(this).text());
          console.log($(this).text());
       });
          console.log($(event.target).html());

          return false;
       } //alert($(event.target).text()+$(event.target).html());
   });}, 
```

10000); });

现在我的代码是这样的......并且运行良好。但问题是现在，如果一个锚标签或

标签在一些文本之后有chailds标签或span标签，它只是拾取文本解析它并忽略子节点.......：（....我想选择这些子节点......放置span标签对于每个单词，而不是外部文本

# c# - 使用 LINQ 分页？

> ID：13586318
> 
> 赞同：2
> 
> 时间：2012-11-27T14:24:55.597
> 
> 标签：c#, .net, linq, pagination

好的，现在我得到了这个语句并且它运行良好（注意我已经在执行这个语句之前对列表进行了排序，所以`Reverse`只是让我弹出最后一页）：

```
return results.Take(pageSize * pageIndex).Reverse().Take(pageSize); 
```

但是必须有一种更有效的方法......有人可以告诉我方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T14:26:16.220

有一个 Skip 运算符。

> 绕过序列中指定数量的元素，然后返回剩余的元素。 [http://msdn.microsoft.com/en-us/library/bb358985.aspx](http://msdn.microsoft.com/en-us/library/bb358985.aspx)

例如：

```
return results.Skip(pageSize * pageIndex).Take(pageSize); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T14:26:38.593

您可能应该使用**Skip**

```
return results.Skip(pageSize * pageIndex).Take(pageSize); 
```

# c# - 用于初始化列表列表的简洁语法

> ID：13586325
> 
> 赞同：1
> 
> 时间：2012-11-27T14:25:11.587
> 
> 标签：c#

是否有用于在 C# 中初始化列表列表的简洁语法？

我试过

```
new List<List<int>>{
    {1,2,3},
    {4,5},
    {6,7,8,9}
}; 
```

但我收到一个错误“方法 'Add' 没有重载需要 3 个参数”

* * *

编辑：我知道长语法

```
 new List<List<int>>{
    new List<int>           {1,2,3},
    new List<int>           {4,5},
    new List<int>           {6,7,8,9}
}; 
```

我只是在寻找更简洁的东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T14:27:40.507

不，您需要`new List<int>`每个：

```
var lists = new List<List<int>>() { 
    new List<int>{1,2,3},
    new List<int>{4,5},
    new List<int>{6,7,8,9}
}; 
```

# ios - UIImage 转换/缩放问题

> ID：13586329
> 
> 赞同：1
> 
> 时间：2012-11-27T14:25:30.153
> 
> 标签：ios, uiimageview, uiimage, cgaffinetransform

*最后，我有理由问一些问题，而不是在 Stack Overflow 上寻找无尽的乐趣。*

这是我的情况：我有一个**UIImageView** ，里面有一个**UIImage 。**我正在通过**CGAffineTranforms转换整个****UIImageView**，以按高度缩放并将其保持在特定角度。我通过两个 CGPoints 向它提供这个变换数据，所以它本质上只是计算这两个点之间的角度和比例并进行变换。

 **现在，转换就像一个魅力，但我最近遇到了**UIImage**方法**resizableImageWithCapInsets**，如果您手动设置图像的框架（即使用框架缩放），它就可以正常工作，但似乎使用转换会覆盖这个，我想这是可以预料的，因为它是**Core Graphics**做的事情。

我的问题是，**我将如何处理 a) 在转换图像后添加 cap insets 或 b) 通过框架进行角度和缩放？**

请注意，提供数据的两个点是接触点，因此它们可能会有很大差异，这就是为什么以特定角度创建缩放矩形充其量是棘手的。

为了让您对代码饥渴的天才们感到高兴，这是我处理缩放的当前方式的片段（仅在创建 UIImage 时进行上限插入）：

```
float xDiff = (PointB.x - PointA.x) / 2;
float yDiff = (PointB.y - PointA.y) / 2;

float angle = [self getRotatingAngle:PointA secondPoint:PointB];

CGPoint pDiff = CGPointMake(PointA.x + xDiff, PointA.y + yDiff);

self.center = pDiff;

// Setup a new transform
// Set it up with a scale and an angle
double distance = sqrt(pow((PointB.x - PointA.x), 2.0) + pow((PointB.y - PointA.y), 2.0));
float scale = 1.0 * (distance / self.image.size.height);
CGAffineTransform transformer = self.transform;
transformer = CGAffineTransformConcat(CGAffineTransformMakeScale(1.0, scale), CGAffineTransformMakeRotation(angle));

// Apply the transformer
self.transform = transformer; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-01T21:42:06.270

对此添加正确的答案。问题的答案可以在[这里](https://stackoverflow.com/questions/17002331/point-inside-a-rotated-cgrect)找到。**

# codeigniter-2 - 动态 id 到文本框

> ID：13586333
> 
> 赞同：0
> 
> 时间：2012-11-27T14:25:40.230
> 
> 标签：codeigniter-2

我正在通过 foreach 循环在 codeigniter 视图页面中创建动态文本框和按钮。然后我想在**按钮**单击时检索这些**文本框的值。**请帮我。谢谢你。

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T06:11:05.327

添加一个计数器并将计数器附加到文本框名称的末尾，以便动态创建的文本框具有 textbox1、textbox2 等名称。在控制器的提交函数中再次运行循环并获取值。

问候

iijb**

# c - If 语句中使用的字符串指针不起作用

> ID：13586336
> 
> 赞同：2
> 
> 时间：2012-11-27T14:25:44.567
> 
> 标签：c, string, pointers, strtok

使用 strtok 解析字符串，现在我的 IF 语句遇到困难。怀疑我使用了错误的案例（值与地址），但我已经没有想法了。任何帮助将不胜感激。

**我使用了一系列 printf 来确认 strtok 正确填充了“hldType”。再次感谢任何帮助。我已经坚持了好几天了。**

缩写代码如下。完整的代码源也包括在内。

```
char *hldType;                        /* Parsing holding field */
static const char *REQTYPE = "0";     /* Comparison */

hldType = strtok(echoBuffer, ".");    /* Parse the string */
if (strcmp(hldType,REQTYPE)  == 0)    /* NOT WORKING */
    printf("REQTYPE myString: %s\n", REQTYPE); 
```

代码：

```
#include <stdio.h>      /* for printf() and fprintf() */
#include <sys/socket.h> /* for socket() and bind() */
#include <arpa/inet.h>  /* for sockaddr_in and inet_ntoa() */
#include <stdlib.h>     /* for atoi() and exit() */
#include <string.h>     /* for memset() */
#include <unistd.h>     /* for close() */
#include <time.h>       /* Display time */

#define ECHOMAX 255     /* Longest string to echo */

void DieWithError(char *errorMessage);  /* External error handling function */
/* User Defined type */
typedef struct _ServerMessage{
    enum {New, Old, No_Message} messageType;    /* same size as an unsigned int */
    unsigned int SenderId;      /* unique client identifier */
    unsigned int RecipientId;       /* unique client identifier */
    char message[100];        /* text message */
} ServerMessage;       /* an unsigned int is 32 bits = 4 bytes */ 

int main(int argc, char *argv[])
{
    int sock;                        /* Socket */
    struct sockaddr_in echoServAddr; /* Local address */
    struct sockaddr_in echoClntAddr; /* Client address */
    unsigned int cliAddrLen;         /* Length of incoming message */
    char echoBuffer[ECHOMAX];        /* Buffer for echo string */
    unsigned short echoServPort;     /* Server port */
    int recvMsgSize;                 /* Size of received message */
    char *hldType;                   /* Parsing holding field */
    char *hldSend;                   /* Parsing holding field */
    char *hldRecip;                  /* Parsing holding field */
    char *hldMsg;                    /* Parsing holding field */
    char tmpType[1];                    /* Type of action requested by client,   where     0 is Send and 1 is Received */
    static const char *REQTYPE = "0";

    /* Test Struct */
    /*ServerMessage ServerMessage_new = {No_Message, 1234,5678,"Hello Server World -     No   Message"}; */
    ServerMessage ServerMessage_new[100];
    /* printf("Message Type: %d\n", ServerMessage_new.messageType);
    printf("Message SenderID: %04d\n", ServerMessage_new.SenderId);
    printf("Message RecipentID: %04d\n", ServerMessage_new.RecipientId);
    printf("Message Content: %s\n", ServerMessage_new.message); */

    if (argc != 2)         /* Test for correct number of parameters */
    {
        fprintf(stderr,"Usage:  %s <UDP SERVER PORT>\n", argv[0]);
        exit(1);
    }

    echoServPort = atoi(argv[1]);  /* First arg:  local port */

    /* Create socket for sending/receiving datagrams */
    if ((sock = socket(PF_INET, SOCK_DGRAM, IPPROTO_UDP)) < 0)
        DieWithError("socket() failed");

    /* Construct local address structure */
    memset(&echoServAddr, 0, sizeof(echoServAddr));   /* Zero out structure */
    echoServAddr.sin_family = AF_INET;                /* Internet address family */
    echoServAddr.sin_addr.s_addr = htonl(INADDR_ANY); /* Any incoming interface */
    echoServAddr.sin_port = htons(echoServPort);      /* Local port */

    /* Bind to the local address */
    if (bind(sock, (struct sockaddr *) &echoServAddr, sizeof(echoServAddr)) < 0)
        DieWithError("bind() failed");

    for (;;) /* Run forever */
    {
        /* Set the size of the in-out parameter */
        cliAddrLen = sizeof(echoClntAddr);

        /* Block until receive message from a client */
        if ((recvMsgSize = recvfrom(sock, echoBuffer, ECHOMAX, 0,
            (struct sockaddr *) &echoClntAddr, &cliAddrLen)) < 0)
            DieWithError("recvfrom() failed");

        printf("Handling client %s\n", inet_ntoa(echoClntAddr.sin_addr));

        /* Parse string from client */
        printf("echoBuffer Content: %s\n", echoBuffer);
        hldType = strtok(echoBuffer, ".");
        hldSend = strtok(NULL, "."); 
        hldRecip = strtok(NULL, "."); 
        hldMsg = strtok(NULL, ".");
        printf("value of hldType: %s\n", hldType);  /* Validated that it prints "0" */
        /* Store message sent from client */

        time_t now;
        time(&now);
        printf("%s", ctime(&now));

        if (strcmp(hldType,REQTYPE)  == 0)    /* NOT WORKING */
            printf("REQTYPE myString: %s\n", REQTYPE);

        ServerMessage_new[0].messageType = atoi(hldType);
        printf("hldType Content: %d\n", ServerMessage_new[0].messageType);
        ServerMessage_new[0].SenderId = atoi(hldSend);
        printf("hldSend Content: %04d\n", ServerMessage_new[0].SenderId);
        ServerMessage_new[0].RecipientId = atoi(hldRecip);
        printf("hldRecip Content: %04d\n", ServerMessage_new[0].RecipientId);       
        strncpy(ServerMessage_new[0].message, hldMsg, 40);
        printf("hldMsg Content: %s\n", ServerMessage_new[0].message);

        /* Send received datagram back to the client */
        if (sendto(sock, echoBuffer, recvMsgSize, 0, 
             (struct sockaddr *) &echoClntAddr, sizeof(echoClntAddr)) != recvMsgSize)
            DieWithError("sendto() sent a different number of bytes than expected");
    }
    /* NOT REACHED */
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:12:19.557

试试这个：

```
 printf( "comparing [%s] to [%s]\n", hldType, REQTYPE);
    if (strcmp(hldType,REQTYPE)  == 0)    /* NOT WORKING */
        printf("REQTYPE myString: %s\n", REQTYPE); 
```

您可能会在其中一个字符串中找到额外的空格。您还可以打印调用的返回值`strcmp()`。

如果`hldType`and `REQTYPE`are both `"0"`，则`strcmp()`应该返回`0`（相等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T14:31:06.463

我认为 strtok 没有找到任何可解析的标记。我的意思是，没有“。” 在输入字符串中。核实。

# ios5 - CLLocationManager 如何根据 iOS 版本调用正确的委托方法

> ID：13586341
> 
> 赞同：0
> 
> 时间：2012-11-27T14:25:52.947
> 
> 标签：ios5, ios6, cllocationmanager

在 iOS 5 中，委托方法是

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation 
```

在 iOS 6 中的方法是

```
- (void)locationManager:(CLLocationManager *)manager didUpdateLocations:(NSArray *)locations 
```

我的应用程序支持这两个版本。CLLocation 管理如何知道它应该调用哪个方法？我需要添加一些 #if def 吗？如果是的话，谁能告诉我我该怎么写这个。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:55:27.453

您可以使用

`- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation;`

您可以使用 iOS 6 SDK 构建并将部署目标设置为也支持 iOS 5。如果它不起作用，您可以尝试实现此方法并`- (void)locationManager:(CLLocationManager *)manager didUpdateLocations:(NSArray *)locations` 在其中调用（您也可以实现此 iOS 6 方法，以便在 iOS 6 的情况下直接调用此方法）。您可以从 newLocation 和 oldLocation 创建一个数组并传递给它。但我不认为这将是必要的。您可以在两种设备上进行测试。

# objective-c - 从 Array 中提取所有数据并求和？

> ID：13586345
> 
> 赞同：0
> 
> 时间：2012-11-27T14:25:57.763
> 
> 标签：objective-c

我在 myMutableArray 中添加了一些数据：

```
- (void)calculate {

    DataObject* pObj = [DataObject objStart:(dataStart) 
                                     objEnd:(dataEnd) 
                                     objDay:(day)];

    [self.myMutableArray addObject:pObj];
} 
```

我只需要提取 day (int) 并对所有值求和。我在想这样的事情，但我想念如何只提取一天......

```
 for(id *tObj in self.myMutableArray) {
    // day = day + day
 } 
```

DataObject 在这里实现：

```
 @implementation DataObject

+ (id)objStart:(NSDate*)objStart objEnd:(NSDate*)objEnd objDay:(int)objDay {

DataObject *dataObject = [[self alloc] init];
dataObject.objStart = objStart;
dataObject.objEnd = objEnd;
dataObject.objDay = objDay;
return dataObject;
}
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T14:41:12.823

你想要这个吗 ？（我必须做出很多自我假设）

```
NSUInteger totalDay;
for(id tObj in self.myMutableArray) {
    // day = day + day
  totalDay+=tObj.objDay;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T19:05:47.443

可可通过键值编码提供了一种优雅且非常好的解决方案。您可以查看[http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/KeyValueCoding/Articles/CollectionOperators.html](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/KeyValueCoding/Articles/CollectionOperators.html)了解更多详情。

我不太了解您的模型，但我会假设我自己的模型可以为您提供解决方案，希望您觉得它很有趣。

假设我有一个名为**Data**的模型，如下所示；

```
@interface Data:NSObject
  @property(nonatomic, strong) NSString *name;
  @property(nonatomic) int day;
@end
@implementation Data
  @synthesize name, day;
@end 
```

Now, in your some classes you create instances of data object and add it to an array.

```
NSMutableArray *myArray = [NSMutableArray array];
Data *data =[ [Data alloc] init];
data.name = @"First Name";
data.day = 10;
[myArray addObject:data];
data = [[Data alloc] init];
data.name = @"Second Name";
data.day = 20;
[myArray addObject:data]; 
```

Now, with this array you can play kvc game.

```
[myArray valueForKey:@"name"] 
```

gives a new array as;

```
(First Name, Last Name) 
```

`[myArray valueForKey:@"day"]` gives;

```
(10, 20 ) 
```

And for sum of all the days, you would just do,

`[myArray valueForKeyPath:@"@sum.day"]` and that would provide you with 30.

That's it. Hope I understood your question well. ;)

# android-sqlite - SQLite 数据库由于语法错误而强制关闭

> ID：13586347
> 
> 赞同：1
> 
> 时间：2012-11-27T14:26:01.697
> 
> 标签：android-sqlite

我正在尝试插入 SQLite 数据库，但每次我在模拟器上运行程序时它都会强制关闭。我认为这与我的数据库创建语法有关，但我已经三重检查了它并且找不到我的错误。我唯一能想到的另一件事是，如果我必须在清单中添加一些东西才能正确运行 SQlite 数据库。

下面是我的助手类的代码。

```
public class dbhelper extends SQLiteOpenHelper {

    public static final String DATABASE_NAME = "swimmers";
    public static final String TABLE_SWIMMERS = "sfd table";

    public static final String C_ID = "id";
    public static final String NAME = "name";
    public static final String TEAM = "team";
    public static final String NOTES = "notes";

    public static final int VERSION = 1;

    public dbhelper(Context context)
    {
        super(context, DATABASE_NAME, null, VERSION);
    }

    @Override
    public void onCreate (SQLiteDatabase db) 
    {
        String createdb = "create table " + TABLE_SWIMMERS + "(" + C_ID + " integer primary key autoincrement, " + NAME + " text, " + TEAM + " text, " + NOTES + " text); ";
        db.execSQL(createdb);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) 
    {
        db.execSQL("drop table " + TABLE_SWIMMERS);
        onCreate(db);
    }

    //add new entry
    void addSwimmer(Swimmer swimmer){

        SQLiteDatabase db = this.getWritableDatabase();
        ContentValues values = new ContentValues();

        values.put(NAME, swimmer.getname());
        values.put(TEAM, swimmer.getteam());
        values.put(NOTES, swimmer.getnotes());

        db.insert(TABLE_SWIMMERS, null, values);
        db.close();
    }

    //Getting single swimmer
    Swimmer getSwimmer(int id){
        SQLiteDatabase db = this.getReadableDatabase();

        Cursor cursor = db.query(TABLE_SWIMMERS, new String[] { C_ID, NAME, TEAM, NOTES}, C_ID + "=?", new String[] { String.valueOf(id) }, null, null, null, null);
        if (cursor !=null)
            cursor.moveToFirst();

        Swimmer swimmer = new Swimmer (Integer.parseInt(cursor.getString(0)), cursor.getString(1), cursor.getString(2), null);
        return swimmer;
    }

    public int updateSwimmer(Swimmer swimmer){
        SQLiteDatabase db = this.getWritableDatabase();
        ContentValues values = new ContentValues();

        values.put(NAME, swimmer.getname());
        values.put(TEAM, swimmer.getteam());
        values.put(NOTES, swimmer.getnotes());

        return db.update(TABLE_SWIMMERS, values, C_ID + " = ?", new String[] { String.valueOf(swimmer.getID()) });        
    }

    //delete single contact
    public void deleteSwimmer(Swimmer swimmer){
        SQLiteDatabase db = this.getWritableDatabase();
        db.delete(TABLE_SWIMMERS, C_ID + " = ?", new String[] { String.valueOf(swimmer.getID()) });        
        db.close();
    }

    //get contacts count
    public int getSwimmersCount(){
        String countQuery = "SELECT  * FROM " + TABLE_SWIMMERS;
        SQLiteDatabase db = this.getReadableDatabase();
        Cursor cursor = db.rawQuery(countQuery, null);
        cursor.close();
        return cursor.getCount();
    }

} 
```

下面是我制作的游泳者课程，我正在尝试将游泳者插入数据库。

```
public class Swimmer {

//private variables
int _id;
String _name;
String _team;
String _notes;

public Swimmer(int id, String name, String team, String notes){
    this._id = id;
    this._name = name;
    this._team = team;
    this._notes = notes;
}

public Swimmer(String name, String team, String notes){
    this._name = name;
    this._team = team;
    this._notes = notes;
}

public int getID(){
    return this._id;
}

public void setID(int id){
    this._id = id;
}

public String getname(){
    return this._name;
}

public void setname(String name){
    this._name = name;
}

public String getteam(){
    return this._team;
}

public void setteam(String team){
    this._team = team;
}

public String getnotes(){
    return this._notes;
}

public void setnotes(String notes){
    this._notes = notes;
}
} 
```

这是我打开并插入数据库的代码。

```
public class CreateNewSwimmerProfile extends Activity {

private dbhelper db;

private final String TAG = "Create New Profile";

@Override
public boolean onCreateOptionsMenu(Menu menu) 
{       
        getMenuInflater().inflate(R.menu.activity_sfdmain, menu);
        return true;
    }

@Override

public void onCreate (Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    Log.i("createProfileActivity", "Intent Text");

    setContentView(R.layout.createprofile);
    Intent createprofileintent = getIntent();
    db = new dbhelper(this);
}

public void btn_CLICK_addswimmer (View w)
{   
    Log.i("Insert: ", "Inserting ..");      

    String name,team,notes;

    EditText nameIn = (EditText) findViewById(R.id.editText_name);
    EditText teamIn = (EditText) findViewById(R.id.editText_team);
    EditText notesIn = (EditText) findViewById(R.id.editText_notes);

    name = nameIn.getText().toString();
    team = teamIn.getText().toString();
    notes = notesIn.getText().toString();

    Swimmer test = new Swimmer(name, team, notes);
    db.addSwimmer(test);
}

public void btn_CLICK_cancel (View b)
{
        Log.i(TAG, "start create new profile activity");
        Intent intent = new Intent(this, SFDMain.class);
        startActivity(intent);
}

} 
```

这是我尝试插入游泳者时的错误。

```
11-27 08:58:36.150: E/AndroidRuntime(643): FATAL EXCEPTION: main
11-27 08:58:36.150: E/AndroidRuntime(643): java.lang.IllegalStateException: Could not     execute method of the activity
11-27 08:58:36.150: E/AndroidRuntime(643):  at android.view.View$1.onClick(View.java:3591)
11-27 08:58:36.150: E/AndroidRuntime(643):  at android.view.View.performClick(View.java:4084)
11-27 08:58:36.150: E/AndroidRuntime(643):  at android.view.View$PerformClick.run(View.java:16966)
11-27 08:58:36.150: E/AndroidRuntime(643):  at android.os.Handler.handleCallback(Handler.java:615)
11-27 08:58:36.150: E/AndroidRuntime(643):  at android.os.Handler.dispatchMessage(Handler.java:92)
11-27 08:58:36.150: E/AndroidRuntime(643):  at android.os.Looper.loop(Looper.java:137)
11-27 08:58:36.150: E/AndroidRuntime(643):  at android.app.ActivityThread.main(ActivityThread.java:4745)
11-27 08:58:36.150: E/AndroidRuntime(643):  at                                                                         java.lang.reflect.Method.invokeNative(Native Method)
11-27 08:58:36.150: E/AndroidRuntime(643):  at java.lang.reflect.Method.invoke(Method.java:511)
11-27 08:58:36.150: E/AndroidRuntime(643):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
11-27 08:58:36.150: E/AndroidRuntime(643):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
11-27 08:58:36.150: E/AndroidRuntime(643):  at dalvik.system.NativeStart.main(Native Method)
11-27 08:58:36.150: E/AndroidRuntime(643): Caused by: java.lang.reflect.InvocationTargetException
11-27 08:58:36.150: E/AndroidRuntime(643):  at java.lang.reflect.Method.invokeNative(Native Method)
11-27 08:58:36.150: E/AndroidRuntime(643):  at java.lang.reflect.Method.invoke(Method.java:511)
11-27 08:58:36.150: E/AndroidRuntime(643):  at android.view.View$1.onClick(View.java:3586)
11-27 08:58:36.150: E/AndroidRuntime(643):  ... 11 more
11-27 08:58:36.150: E/AndroidRuntime(643): Caused by: android.database.sqlite.SQLiteException: near "table": syntax error (code 1): , while compiling: create table sfd table(id integer primary key autoincrement, name text, team text, notes text);
11-27 08:58:36.150: E/AndroidRuntime(643):  at android.database.sqlite.SQLiteConnection.nativePrepareStatement(Native Method)
11-27 08:58:36.150: E/AndroidRuntime(643):  at android.database.sqlite.SQLiteConnection.acquirePreparedStatement(SQLiteConnection.java:882)
11-27 08:58:36.150: E/AndroidRuntime(643):  at android.database.sqlite.SQLiteConnection.prepare(SQLiteConnection.java:493)
11-27 08:58:36.150: E/AndroidRuntime(643):  at android.database.sqlite.SQLiteSession.prepare(SQLiteSession.java:588)
11-27 08:58:36.150: E/AndroidRuntime(643):  at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:58)
11-27 08:58:36.150: E/AndroidRuntime(643):  at android.database.sqlite.SQLiteStatement.<init>(SQLiteStatement.java:31)
11-27 08:58:36.150: E/AndroidRuntime(643):  at android.database.sqlite.SQLiteDatabase.executeSql(SQLiteDatabase.java:1663)
11-27 08:58:36.150: E/AndroidRuntime(643):  at android.database.sqlite.SQLiteDatabase.execSQL(SQLiteDatabase.java:1594)
11-27 08:58:36.150: E/AndroidRuntime(643):  at com.sfd.swimming.feedback.display.system.dbhelper.onCreate(dbhelper.java:35)
11-27 08:58:36.150: E/AndroidRuntime(643):  at android.database.sqlite.SQLiteOpenHelper.getDatabaseLocked(SQLiteOpenHelper.java:252)
11-27 08:58:36.150: E/AndroidRuntime(643):  at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:164)
11-27 08:58:36.150: E/AndroidRuntime(643):  at com.sfd.swimming.feedback.display.system.dbhelper.addSwimmer(dbhelper.java:48)
11-27 08:58:36.150: E/AndroidRuntime(643):  at com.sfd.swimming.feedback.display.system.CreateNewSwimmerProfile.btn_CLICK_addswimmer(CreateNewSwimmerProfile.java:50)
11-27 08:58:36.150: E/AndroidRuntime(643):  ... 14 more
11-27 08:58:36.420: D/dalvikvm(643): GC_CONCURRENT freed 207K, 4% free 8241K/8519K, paused 22ms+33ms, total 304ms
11-27 08:58:38.680: I/Process(643): Sending signal. PID: 643 SIG: 9 
```

任何帮助是极大的赞赏！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T14:34:21.727

table 是 SQLite 的关键字。尝试将您的变量 TABLE_SWIMMERS 从更改`TABLE_SWIMMERS = "sfd table";`为`TABLE_SWIMMERS = "sfd";`，它将起作用。

# c++ - 与外循环具有相同变量名的内循环

> ID：13586348
> 
> 赞同：4
> 
> 时间：2012-11-27T14:26:01.633
> 
> 标签：c++, nested-loops

假设以下简单代码：

```
for(int i=0; i < 1000; i++)
{
  cout << "Outer i: " << i << endl;
  for(int i=0; i < 12; i++)
  {
    cout << "Inner i:" << i << endl;
  }
} 
```

效果很好。两个循环中使用了相同的变量名，并且输出很好。

我是否正确理解这两个变量都是在堆栈上创建的，并且当外循环进入新的内循环时，会创建一个新的“命名空间”（可能是错误的名称..）？但是为什么会被覆盖？如果我为内部循环中的变量选择另一个名称，我也可以 `i`从外部循环访问。

我有点困惑。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T14:27:50.890

“命名空间”有点接近..但更多的是关于**范围**。内部 i**隐藏/压制**外部 i。你可以想到另一个例子：

```
{ 
 int i=0; //outer scope i.
 {
   int i =0; //this hides the outer scope i.. I can't use outer i here

 }
  i =1 ; //inner i is out of scope.. outer i is set to 1
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T14:27:35.910

你的理解是正确的。该代码在技术上是有效的。然而，这种做法有很多问题，因此是一个坏主意。

每个循环都有一个与之关联`for`的单独*范围。*在内循环中*声明*的变量会影响在外循环中声明的变量。没有办法`i`从内部循环访问外部。

# linux - 如何在文件中每一行的开头添加一个字符串？

> ID：13586349
> 
> 赞同：31
> 
> 时间：2012-11-27T14:26:05.440
> 
> 标签：linux, bash, sed

我有以下 bash 代码，它逐行循环遍历文本文件..我试图为每一行添加前缀工作“前缀”，但收到此错误：

```
rob@laptop:~/Desktop$ ./appendToFile.sh stusers.txt kp
stusers.txt
kp
./appendToFile.sh: line 11: /bin/sed: Argument list too long
115000_210org@house.com,passw0rd 
```

这是bash脚本..

```
#!/bin/bash

file=$1
string=$2

echo "$file"
echo "$string"

for line in `cat $file`
do
    sed -e 's/^/prefix/' $line
    echo "$line"
done < $file 
```

我在这里做错了什么？

更新：执行文件头将所有行转储到终端的一行，可能相关？

```
rob@laptop:~/Desktop$ head stusers.txt
rob@laptop:~/Desktop$ ouse.com,passw0rd 
```

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-11-27T15:27:56.940

单行 awk 命令也可以解决问题：

```
awk '{print "prefix" $0}' file 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-11-27T16:19:51.423

关于您的原始错误：

> ./appendToFile.sh：第 11 行：/bin/sed：参数列表太长

问题在于这行代码：

```
sed -e 's/^/prefix/' $line 
```

`$line`在这种情况下是sed*正在*运行的**文件名。**要更正您的代码，您应该这样修复这一行：

 *```
echo $line | sed -e 's/^/prefix/' 
```

`< $file`（另请注意，您的原始代码末尾不应有。）

William Pursell 在他的两个建议中都正确地解决了这个问题。

但是，我相信您已经正确识别出您的原始文本文件存在问题。 `dos2unix`不会更正此问题，因为它只会去除行尾的回车符。（但是，如果您尝试在 Windows 中读取 Linux 文件，您会得到一个没有返回的庞大行。）

假设文本文件中的行尾字符不是问题，William Pursell、Andy Lester 或 nullrevolution 的答案将起作用。

建议的变体`while read...`：

```
while read -r line; do  echo "PREFIX " $line; done < $file 
```

这可以直接从 shell 运行（不需要批处理/脚本文件）：

```
while read -r line; do echo "kp" $line; done < stusers.txt 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-11-29T15:40:57.430

整个循环可以替换为对整个文件进行操作的单个 sed 命令：

```
sed -e 's/^/prefix/' $file 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-27T14:29:11.110

代替 for 循环，使用更合适`while read...`：

```
while read -r line; do
do
    echo "$line" | sed -e 's/^/prefix/'
done < $file 
```

但是使用更简单的方法会更好：

```
sed -e 's/^/prefix/' $file 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-11-27T14:47:29.163

Perl 的方法是：

```
perl -p -e's/^/prefix' filename 
```

或者

```
perl -p -e'$_ = "prefix $_"' filename 
```

在任何一种情况下，它都会读取`filename`前缀行并将其打印到 STDOUT。

如果您添加一个`-i`标志，那么 Perl 将修改该文件。你也可以指定多个文件名，Perl 会神奇地完成所有这些。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-08-05T17:04:12.383

使用 sed。只是换个词`prefix`。

```
sed -e 's/^/prefix/' file.ext 
```

如果要将输出保存在另一个文件中

```
sed -e 's/^/prefix/' file.ext > file_new.ext 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-27T16:04:11.800

你不需要 sed，只需在 echo 命令中连接字符串

```
while IFS= read -r line; do
    echo "prefix$line"
done < filename 
```

您的循环遍历文件中的每个**单词**：

```
for line in `cat file`; ... 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-11-13T00:15:25.177

```
sed -i '1a\
Your Text' file1 file2 file3 
```*

# jquery - jQuery使用滚动调整大小

> ID：13586353
> 
> 赞同：-4
> 
> 时间：2012-11-27T14:26:26.580
> 
> 标签：jquery, jquery-ui

是否可以实现通过在元素内部滚动（悬停在元素上然后滚动）触发的 jQuery 可调整大小（DOM）元素。

[http://jqueryui.com/resizable/#default](http://jqueryui.com/resizable/#default)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T15:05:15.687

当然，但是实施是创造力的问题。这是我的快速解决方案，您应该对其进行一些工作以满足您的确切需求。

```
var resizing = false;
var lastScroll = 0;
$("#resizable").hover(function(){ resizing = true; }, function(){ resizing = false; })
.scroll(function(e){
   var currentScroll = $(this).scrollTop();
   if(tempScrollTop < currentScrollTop) {
      // the user is scrolling down
      $(this).height("+=10"); // or whatever
   }
   lastScroll = currentScroll;
}); 
```

# android - Android在不丢失光标的情况下从EditText隐藏软键盘

> ID：13586354
> 
> 赞同：24
> 
> 时间：2012-11-27T14:26:28.387
> 
> 标签：android, android-edittext, android-softkeyboard

我已经走到了这一步，[这](https://stackoverflow.com/questions/7665685/how-do-i-prevent-the-software-keyboard-from-popping-up)让我走到了一半，但并不完全。我有一个拨号器`Fragment`，它有所有常用`Button`的 s 来输入包括退格在内的数字，所以我不需要软键盘。我还想让用户能够粘贴文本（长按...默认情况下工作正常），以及编辑输入的内容，所以我需要光标。

我发现确保在用户单击内部时不会弹出软键盘的最简单方法`EditText`是将 设置`inputType`为 null - 但这也会杀死光标。

那么，无论用户尝试什么，我如何声明我的`EditText`以及我应该启动什么样的命令以使我的字段永远不会显示软键盘，但仍保留粘贴功能和光标？`EditText`

我也在`android:windowSoftInputMode="stateAlwaysHidden"`我的清单中尝试过，但无济于事。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-12-20T15:19:46.693

这对我有用：

```
 // Update the EditText so it won't popup Android's own keyboard, since I have my own.
    EditText editText = (EditText)findViewById(R.id.edit_mine);
    editText.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            v.onTouchEvent(event);
            InputMethodManager imm = (InputMethodManager)v.getContext().getSystemService(Context.INPUT_METHOD_SERVICE);
            if (imm != null) {
                imm.hideSoftInputFromWindow(v.getWindowToken(), 0);
            }                
            return true;
        }
    }); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-08T21:59:22.930

I have finally found a (for me) working solution to this.

First part (in onCreate):

```
// Set to TYPE_NULL on all Android API versions
mText.setInputType(InputType.TYPE_NULL);
// for later than GB only
if (android.os.Build.VERSION.SDK_INT >= 11) {
    // this fakes the TextView (which actually handles cursor drawing)
    // into drawing the cursor even though you've disabled soft input
    // with TYPE_NULL
    mText.setRawInputType(InputType.TYPE_CLASS_TEXT);
} 
```

In addition, android:textIsSelectable needs to be set to true (or set in onCreate) and the EditText must not be focused on initialization. If your EditText is the first focusable View (which it was in my case), you can work around this by putting this just above it:

```
<LinearLayout
  android:layout_width="0px"
  android:layout_height="0px"
  android:focusable="true"
  android:focusableInTouchMode="true" >
    <requestFocus />
</LinearLayout> 
```

You can see the results of this in the Grapher application, free and available in Google Play.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-05-12T09:00:55.373

将标志 textIsSelectable 设置为 true 会禁用软键盘。

您可以像这样在 xml 布局中设置它：

```
<EditText
    android:id="@+id/editText"
    ...
    android:textIsSelectable="true"/> 
```

或以编程方式，如下所示：

```
EditText editText = (EditText) findViewById(R.id.editText);
editText.setTextIsSelectable(true); 
```

光标仍然存在，您将能够选择/复制/剪切/粘贴，但软键盘永远不会显示。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-04-08T08:20:58.720

@Lupsaa 的最佳解决方案在[这里](https://stackoverflow.com/questions/4841476/hiding-the-android-keyboard-for-edittext/10399125#10399125)：

将标志 textIsSelectable 设置为 true 会禁用软键盘。

您可以像这样在 xml 布局中设置它：

```
<EditText
android:id="@+id/editText"
...
android:textIsSelectable="true"/> 
```

或以编程方式，如下所示：

```
EditText editText = (EditText) findViewById(R.id.editText); 
```

editText.setTextIsSelectable(true);

光标仍然存在，您将能够选择/复制/剪切/粘贴，但软键盘永远不会显示。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-11T11:15:23.870

利用

```
android:windowSoftInputMode="stateHidden" 
```

在您的清单文件中，而不是`android:windowSoftInputMode="stateAlwaysHidden"`

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-11-18T13:02:37.100

这就是我所做的。一、在manifest里面的activity

```
android:windowSoftInputMode="stateAlwaysHidden|adjustNothing" 
```

二、在`onCreate`if inside activity 或者`onActivityCreated`if inside fragment

```
editText.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            hideSoftKeyboard(v);
        }
    }); 
```

不要忘记向editText请求焦点

```
editText.requestFocus(); 
```

然后添加与`hideSoftKeyboard(v)`其他答案相同的方法。

```
private void hideSoftKeyboard(View v){
    InputMethodManager inputMethodManager = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
    inputMethodManager.hideSoftInputFromWindow(v.getWindowToken(), 0);
} 
```

这里的关键是在单击 EditText 之前请求焦点。如果没有焦点，第一次单击将使键盘出现（我的经验）。但是，如果您在活动中有一个 EditText，则会应用此方法。有了这个，您仍然可以使用自定义键盘（如果有）键入，可以复制和粘贴，并且光标仍然可见。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-02-11T19:21:52.190

您需要的确切功能是通过将`textIsSelectable`EditText 中的标志设置为**true**来提供的。这样，***光标仍然存在，您将能够选择/复制/剪切/粘贴，但 SoftKeyboard 将永远不会显示***. 需要 API 11 及更高版本。

您可以像这样在 xml 布局中设置它：

```
<EditText
    android:textIsSelectable="true"
    ...
/> 
```

或以编程方式，如下所示：

```
EditText editText = (EditText) findViewById(R.id.editText);
editText.setTextIsSelectable(true); 
```

对于使用 API 10 及以下版本的任何人，此处提供了 hack： [https ://stackoverflow.com/a/20173020/7550472](https://stackoverflow.com/a/20173020/7550472)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2019-09-05T07:03:47.743

如果您的最小 SDK 为 21，您可以从 java 代码中使用此方法：

```
editText.setShowSoftInputOnFocus(false); 
```

致[陈苏文章](https://medium.com/@martinsuchen3557/android-force-hide-system-keyboard-while-retaining-edittexts-focus-9d3fd8dbed32)。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-04-23T09:26:42.127

这在两个步骤中完美（对我来说）：

1.  `<activity... android:windowSoftInputMode="stateHidden">`在清单文件中

2.  在您的 editText XML 代码中添加这些属性

    ```
    android:focusable="true"
    android:focusableInTouchMode="true 
    ```

您必须同时输入 1 和 2，只有这样它才会起作用。

干杯

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-07-13T16:09:43.217

```
 EditText text = (EditText) findViewById(R.id.text);
    if (Build.VERSION.SDK_INT >= 11) {
        text.setRawInputType(InputType.TYPE_CLASS_TEXT);
        text.setTextIsSelectable(true);
    } else {
        text.setRawInputType(InputType.TYPE_NULL);
        text.setFocusable(true);
    } 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-06-20T14:14:27.090

我发现这个非常有用的代码，它就像魅力一样，它完全是键盘的头，但保持光标，你可以复制过去，移动光标......等等

使用 ：

```
hideSoftKeyboard(editText); 
```

方法：

```
 public void hideSoftKeyboard(EditText edit) {
           if (android.os.Build.VERSION.SDK_INT <= 10) {
               edit.setInputType(InputType.TYPE_NULL);
           } else {
               this.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN);
               try {
                   Class<EditText> cls = EditText.class;
                   Method setSoftInputShownOnFocus;
                   setSoftInputShownOnFocus = cls.getMethod("setShowSoftInputOnFocus", boolean.class);
                   setSoftInputShownOnFocus.setAccessible(true);
                   setSoftInputShownOnFocus.invoke(edit, false);
               } catch (Exception e) {
                   e.printStackTrace();
               }
           }
       } 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2018-04-24T15:28:56.123

首先`android:windowSoftInputMode="stateHidden"`在活动下添加清单文件。像这样

```
<activity... android:windowSoftInputMode="stateHidden"> 
```

在你的 xml 添加这个`android:textIsSelectable="true"`。这将使指针可见。

然后在活动的 onCreate 方法上，添加：

```
EditText editText = (EditText)findViewById(R.id.edit_text);
edit_text.setOnTouchListener(new OnTouchListener() {

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        v.onTouchEvent(event);
        InputMethodManager inputMethod = (InputMethodManager)v.getContext().getSystemService(Context.INPUT_METHOD_SERVICE);
        if (inputMethod!= null) {
            inputMethod.hideSoftInputFromWindow(v.getWindowToken(), 0);
        }                
        return true;
    }
}); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-09-29T12:56:55.520

您可以在活动的 onCreate 方法中使用以下代码行，以确保仅当用户单击或触摸 EditText 字段时才会弹出键盘。我尝试了很多来自stackoverflow的方法和代码，但没有任何效果，但这对我来说非常有效！试试这个.. :)`

```
 this.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-09-29T13:11:53.717

您可以在活动的 onCreate 方法中使用以下代码行，以确保仅当用户单击或触摸 EditText 字段时才会弹出键盘。我尝试了很多来自stackoverflow的方法和代码，但没有任何效果，但这对我来说非常有效！试试这个.. :)`

```
 this.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN); 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-07-20T07:51:24.073

EditText editText = (EditText)findViewById(R.id.edit_mine); editText.setOnTouchListener(new OnTouchListener() {

```
 @Override
    public boolean onTouch(View v, MotionEvent event) {
        v.onTouchEvent(event);
        InputMethodManager imm = (InputMethodManager)v.getContext().getSystemService(Context.INPUT_METHOD_SERVICE);
        if (imm != null) {
            imm.hideSoftInputFromWindow(v.getWindowToken(), 0);
        }                
        return true;
    }
}); 
```

哈……这是正确的做法……完成了这项工作……这会奏效！

# javascript - 特定于 IE8 的 JavaScript 错误？

> ID：13586357
> 
> 赞同：3
> 
> 时间：2012-11-27T14:26:31.697
> 
> 标签：javascript, jquery, internet-explorer-8

我在 IE8 中遇到问题：

```
function costructor(sectionId){
$('#nextG').ready(function(){
var counterBis = 0;
slider = '.slider0'+sectionId;
//sliderBox = $(slider).closest('.floatContent');
unitScrollBis = $(slider).find('.floatImg').eq(0).width();
maxImg = $(slider).find('.floatImg').length-2;
    /*problem*/
prev = "#" + $("#controller0" + sectionId).find(".controller").eq(0).attr("id");
next = "#" + $("#controller0" + sectionId).find(".controller").eq(0).attr("id");
    /*END*/
console.log(prev);
console.log(next);
makeMove(counterBis,unitScrollBis,prev,next,slider,maxImg);
function makeMove(counterBis,unitScrollBis,prev,next,slider,maxImg){
if(counterBis <= 0){
    $(prev).fadeOut("fast");
}
else if(counterBis >= maxImg){
    $(next).fadeOut("fast");
}
$(next).click(function(){
    if(counterBis <= maxImg){
        counterBis++;
        $(prev).fadeIn("fast");
        slide(counterBis);
        }
    else{
        $(next).fadeOut("fast");
    }
});
$(prev).click(function(){
    if(counterBis > 0){
        counterBis--;
        $(next).fadeIn("fast");
        slide(counterBis);
    }
    else{
        $(prev).fadeOut("fast");
    }
});
function slide(counterBis){
    $(slider).animate({
    marginLeft: '-' + (unitScrollBis*counterBis) + 'px'
},1000);
};
}; 
```

IE8 说：`SCRIPT438: Object doesn't support property or method`谁能帮助我？问题只在 IE8 中，我不明白为什么 IE 不能构建这个字符串。谢谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T14:29:37.053

您需要使用 var 关键字声明变量，否则旧版本的 IE 将无法识别它们并可能中断。

所以改变

```
prev = "#" + $("#controller0" + sectionId).find(".controller").eq(0).attr("id");
next = "#" + $("#controller0" + sectionId).find(".controller").eq(0).attr("id"); 
```

至

```
var prev = "#" + $("#controller0" + sectionId).find(".controller").eq(0).attr("id");
var next = "#" + $("#controller0" + sectionId).find(".controller").eq(0).attr("id"); 
```

并且一切都应该像在其他浏览器/IE9中一样工作

# netty - 如何实现handle heartbeat

> ID：13586359
> 
> 赞同：1
> 
> 时间：2012-11-27T14:26:31.400
> 
> 标签：netty

我想实现一个可以在链中的最终句柄处处理的心跳。它的目的是找出流量是否空闲并对其进行处理。以“netty”方式完成它的最佳方法是什么？或者只是在我的最终处理程序中添加一个计时器是要走的路？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T17:00:33.293

只需为此使用 IdleStateHandler 和 IdleStateAwareHandler 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T05:59:58.640

或者，您可以像这样安排定期任务：

```
ctx.executor().scheduleAtFixedRate(...); 
```

或者：

```
channel.eventLoop().scheduleAtFixedRate(...); 
```

但是它不知道连接空闲，所以需要你自己处理。

# c# - LocalDb 连接：登录失败

> ID：13586361
> 
> 赞同：2
> 
> 时间：2012-11-27T14:26:36.013
> 
> 标签：c#, winforms, entity-framework, ef-code-first

在 4.0 winforms 应用程序（基于 Win2008/VS2012/ClickOnce 构建）中，我使用 LocalDB 数据库和 Entity Framework 5 Code First（包括数据库初始化，无迁移）

有时，在构建/发布之后，应用程序无法连接到数据库（位于 c:\Admin[WindowsAccountName] 的默认路径中）：从 Visual Studio 或客户计算机上调试时。TryGetConnection 中的异常是 System.Data.SqlClient.SqlException，“登录失败”。

如果出现以下情况，我可以修复它：

1.  我删除了数据库文件（由 EF 重新创建）
2.  我更改了连接字符串中的数据库名称（同样，重新创建了数据库）
3.  我压缩了数据库文件（以保留 bakcup），删除它们（以检查解决方案 1），然后将它们解压缩到同一位置，并且它起作用了（很奇怪，但确实如此）
4.  在新电脑上，没有问题

我的连接字符串是：

```
<add name="SupplyChainContext" providerName="System.Data.SqlClient"
connectionString="Server=(localdb)\v11.0;Database=MySupplyChainDb;
Trusted_Connection=true;Integrated Security=True;MultipleActiveResultSets=True"/> 
```

昨天又发生了，我所做的代码更改与数据库无关：CodeFirst 对象没有更改，我能想到的唯一相关的是我删除了 app.config 中的用户设置（与数据库无关）

它让我想起了 Visual Basic 部署的黑暗日子，那时您永远无法确定安装是否能够正常工作

# spring - SimpleJdbcCall 调用 n 次 StoredProcedure 然后抛出错误

> ID：13586365
> 
> 赞同：0
> 
> 时间：2012-11-27T14:26:41.507
> 
> 标签：spring, sql-server-2005, jakarta-ee, stored-procedures, spring-jdbc

我有下一个错误：

```
[http-thread-pool-8080(5)] DEBUG o.s.jdbc.core.simple.SimpleJdbcCall - JdbcCall call not compiled before execution - invoking compile
[http-thread-pool-8080(5)] DEBUG o.s.jdbc.datasource.DataSourceUtils - Fetching JDBC Connection from DataSource
[http-thread-pool-8080(5)] DEBUG o.s.jdbc.datasource.DataSourceUtils - Registering transaction synchronization for JDBC Connection
[http-thread-pool-8080(5)] DEBUG o.s.j.c.m.CallMetaDataProviderFactory - Using org.springframework.jdbc.core.metadata.SqlServerCallMetaDataProvider
[http-thread-pool-8080(5)] DEBUG o.s.j.c.m.CallMetaDataProvider - Retrieving metadata for BATABASE/dbo/PA_INSERT
[http-thread-pool-8080(5)] WARN  o.s.j.c.m.CallMetaDataProvider - Error while retrieving metadata for procedure columns: com.microsoft.sqlserver.jdbc.SQLServerException: Could not find prepared statement with handle 41.
[http-thread-pool-8080(5)] DEBUG o.s.jdbc.core.simple.SimpleJdbcCall - Compiled stored procedure. Call string is [{call DATABASE.dbo.PA_INSERT()}]
[http-thread-pool-8080(5)] DEBUG o.s.jdbc.core.simple.SimpleJdbcCall - SqlCall for procedure [PA_ISolicitudDistincion] compiled
[http-thread-pool-8080(5)] DEBUG o.s.j.c.m.CallMetaDataContext - Matching [COLUMN1, COLUMN2, COLUMN3] with []
[http-thread-pool-8080(5)] DEBUG o.s.j.c.m.CallMetaDataContext - Found match for []
[http-thread-pool-8080(5)] DEBUG o.s.jdbc.core.simple.SimpleJdbcCall - The following parameters are used for call {call DATABASE.dbo.PA_INSERT()} with: {}
[http-thread-pool-8080(5)] DEBUG o.s.jdbc.core.JdbcTemplate - Calling stored procedure [{call DATABASE.dbo.PA_INSERT()}]
[http-thread-pool-8080(5)] INFO  o.s.b.f.xml.XmlBeanDefinitionReader - Loading XML bean definitions from class path resource [org/springframework/jdbc/support/sql-error-codes.xml]
[http-thread-pool-8080(5)] INFO  o.s.j.support.SQLErrorCodesFactory - SQLErrorCodes loaded: [DB2, Derby, H2, HSQL, Informix, MS-SQL, MySQL, Oracle, PostgreSQL, Sybase]
[http-thread-pool-8080(5)] DEBUG o.s.j.support.SQLErrorCodesFactory - Looking up default SQLErrorCodes for DataSource [com.sun.gjc.spi.jdbc40.DataSource40@12ea240]
[http-thread-pool-8080(5)] DEBUG o.s.j.support.SQLErrorCodesFactory - Database product name cached for DataSource [com.sun.gjc.spi.jdbc40.DataSource40@12ea240]: name is 'Microsoft SQL Server'
[http-thread-pool-8080(5)] DEBUG o.s.j.support.SQLErrorCodesFactory - SQL error codes for 'Microsoft SQL Server' found
[http-thread-pool-8080(5)] DEBUG o.s.j.s.SQLErrorCodeSQLExceptionTranslator - Unable to translate SQLException with Error code '201', will now try the fallback translator
[http-thread-pool-8080(5)] DEBUG o.s.j.s.SQLStateSQLExceptionTranslator - Extracted SQL state class 'S0' from value 'S0004'
[http-thread-pool-8080(5)] DEBUG o.s.jdbc.datasource.DataSourceUtils - Returning JDBC Connection to DataSource 
```

但是，这很奇怪，因为同一个 SP 工作时没有错误，但是当被调用 N 次时会抛出错误。我正在通过 Glassfish 3.1.2 使用带有池连接的 Spring。到 Sqlserver 2005 数据库。

这是java函数

```
public int registrar(Object1 p,
            Object2 d)
    {
        try
        {
            final SimpleJdbcCall jdbcCall = (SimpleJdbcCall) context
                    .getBean("insert");
            jdbcCall.setCatalogName("DATABASE");
            jdbcCall.setSchemaName("dbo");
            final MapSqlParameterSource params = new MapSqlParameterSource();
            params.addValue("COLUMN1", p.get1());
            params.addValue("COLUMN2", p.get1());
            params.addValue("COLUMN3", d.get2());
            final Map<String, Object> execute = jdbcCall.execute(params);
            return (Integer) execute.get("IDENTITY");
        }
        catch (DataAccessException e)
        {
            return null;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T14:36:29.017

看起来您正在线程之间共享您的“插入” - bean。尝试在您的插入 bean 上使用 scope="prototype"，以确保每次调用都获得一个新实例。

# c# - *.XmlSerializers.dll 我的应用程序看不到

> ID：13586366
> 
> 赞同：0
> 
> 时间：2012-11-27T14:26:51.973
> 
> 标签：c#, .net

最近我将构建机器从 Windows XP 上的 VS2010 迁移到 Windows 7 上的 VS2012。

我的构建步骤的一部分是调用 sgen.exe 为我的应用程序生成 XmlSerializer。这以前运行良好，但由于我是在新配置上构建的，所以我的应用程序不再看到 DLL。引发无法解析 XmlSerializer 的异常。

但是，DLL 仍在生成中，并且与我的应用程序可执行文件位于同一文件夹中。

有什么建议为什么在新情况下不能再加载它？

# android - 搅拌机和 Vuforia

> ID：13586367
> 
> 赞同：4
> 
> 时间：2012-11-27T14:27:00.233
> 
> 标签：android, augmented-reality, blender, qcar-sdk

有没有办法在搅拌机中打开 Vuforia AR 示例包。我知道 Vuforia AR 有一个用于 Unity 3d 的 sdk，但我目前正在使用 Blender，不想花 400 美元来获得 Unity 的 Android 许可证。对此的任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T18:28:24.493

Blender 是一个 3D 建模软件，而 Unity 3D 是一个游戏引擎。它们是完全不同的，并且是为不同的目的而制造的。如果您想通过自己的自定义来调整示例应用程序，我建议您使用 Vuforia SDK for Android。但这包括编码，而不是 Unity，后者只是简单应用程序的拖放操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T13:44:58.320

在这个方面比较晚，但我刚刚编写了一个 Wavefront OBJ 文件的解析器，以 Vuforia 的格式 - 与 thechrisberry 想要的相反。[感谢 stackoverflow doyen rodrigo-silveira](http://rodrigo-silveira.com/opengl-tutorial-parsing-obj-file-blender)提供了最初的想法。

Vuforia 示例具有基本简单的对象模型 - 立方体和茶壶 - 因此使用它们制作 OBJ 文件并将其导入 Blender 应该不难。您只需将 Vuforia 示例的顶点、法线、texCoords 和索引数组转换为 OBJ 文本格式（v、vn、vt 和 f 元素），并包含示例中的 PNG 纹理文件。

# java - 使用 Java 和 oracle 数据库的奇怪的唯一约束错误

> ID：13586370
> 
> 赞同：1
> 
> 时间：2012-11-27T14:27:02.090
> 
> 标签：java, oracle, jdbc, prepared-statement

我有一个名为 CUSTOMERS 的表，其中包含以下列：

**CUSTOMER_ID (NUMBER)、DAY(DATE)、REGISTERED_TO(NUMBER)**

表中有更多列，但这与我的问题无关，因为只有上述列一起定义为主键

在我们的应用程序中，我们对该表进行了大量插入，因此我们不使用**MERGE**，而是使用以下语句：

```
INSERT INTO CUSTOMERS  (CUSTOMER_ID , DAY, REGISTERED_TO)                      
                   SELECT ?, ?, ? 
                   FROM DUAL WHERE NOT EXISTS 
                            (SELECT NULL 
                             FROM CUSTOMERS
                             WHERE CUSTOMER_ID = ? 
                               AND DAY = ? 
                               AND REGISTERED_TO = ?
                              )"; 
```

我们使用一个`PreparedStatement`使用批处理功能的对象来插入通过每个客户的应用程序流收集的大量记录。

问题是有时我会收到以下错误：

> ORA-00001: 违反了唯一约束 (CUSTOMERS_PK)

奇怪的是，当我**不**使用批量插入并一一插入每条记录（通过简单地执行`pstmt.execute()`）时，没有错误。

插入语句有问题吗？jdbc 驱动程序？我没有正确使用批处理机制吗？

这是我的插入循环的半伪代码：

```
 pstmt = conn.prepareStatement(statement);
  pstmt.setQueryTimeout(90);

  for each customer :
     - pstmt.setObject(1, customer id);
     - pstmt.setObject(2, current day);
     - pstmt.setObject(3, registered to);
     - pstmt.addBatch();
  end for

  pstmt.executeBatch(); 
```

它全部包含在 try/catch/finally 块中，确保在此过程结束时关闭语句和连接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T14:49:12.050

我猜您正在并行使用多个线程或进程，每个线程或进程都进行插入。在这种情况下，Oracle 的事务隔离功能会阻止您进行合并的尝试，因为有时会发生以下情况：

*   会话 A 运行您的语句，插入一行 (x,y,z)
*   会话 B 运行相同的语句，尝试插入行 (x,y,z)，获取锁并等待
*   会话 A 提交
*   会话 B 收到“违反唯一约束”错误

这是因为在会话 A 提交之前，会话 B 看不到新行，因此它会尝试插入相同的行。

# javascript - 正则表达式：提取“键：值”（无分隔符）

> ID：13586371
> 
> 赞同：3
> 
> 时间：2012-11-27T14:27:05.563
> 
> 标签：javascript, regex, string

### 你能只用一个正则表达式提取这些*“键：值”对吗？*

```
"a: xyz   b:  pqr st  c: lm no p" 
```

我想要的结果：

```
"a" => "xyz"
"b" => "pqr st"
"c" => "lm no p" 
```

* * *

### 我的尝试（使用~~两个~~正则表达式）

```
var s = 'a: xyz   b:  pqr st  c: lm no p';
var r = /(?:.(?!(?:a|b|c):))+/g;
var m;

while ((m = r.exec(s))) {

    var s2 = m[0];
    var r2 = /(a|b|c):\s*(.+)/;
    var m2 = r2.exec(s2);

    console.log('"' + m2[1] + '" => "' + m2[2] + '"');
} 
```

我得到的结果：

```
"a" => "xyz  "
"b" => "pqr st "
"c" => "lm no p" 
```

*那么，这可以只用一个正则表达式来完成吗？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T14:31:57.793

 ~~使用正则表达式模式`/(\w+):\s*([^:]+)(?=\s|$)/g`

请参阅**[此演示](http://jsfiddle.net/qtsxN/)**。

 ~~要修剪空白字符，请使用周围使用正则表达式模式

 ~~~~```
/(\w+):\s*([^:]*\S)\s*(?=\w+:|$)/g 
```~~ 

请参阅**[此演示](http://jsfiddle.net/BLVed/)**。

 ~~```
/\b(\w+):\s*([^:]*\S)\b\s*(?=\w+:|$)/g 
```

请参阅**[此演示](http://jsfiddle.net/bhNvp/)**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T14:34:39.977

你可以试试这个

```
var s = 'a: xyz   b:  pqr st  c: lm no p';
var r = /(?:\s|^)(\w+):\s*(.*?)(?=\s+\w+:|$)/g;
var m;

while ((m = r.exec(s))) {
    console.log('"' + m[1] + '" => "' + m[2] + '"');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T14:34:45.880

正则表达式：

```
/(?:.(?!(?:a|b|c):))+\w/g 
```~~~~~~~~

# javascript - 从托管在某些网页上的 JavaScript 调用 Objective-C 函数

> ID：13586372
> 
> 赞同：2
> 
> 时间：2012-11-27T14:27:06.907
> 
> 标签：javascript, objective-c, ios

我有一个 IOS 应用程序，其中有一个 Web 浏览器。

显示此 Web 浏览器时，它会导航到 Internet 上的一个页面，例如[http://myexample.com/myiosapp](http://myexample.com/myiosapp)。

是否可以在这个网站上放置一个 javascript 代码，当下载到手机上时，它会与本机应用程序通信？它可以调用一个Objective-C方法，或者写一些东西到这个应用程序的存储空间吗？

前任。托管在 myexample.com/myios 应用程序上的代码：

```
function saveSomeString() {
    xcode.Save("somestring");
} 
```

应该调用一个名为 Save 的 Objective-C 函数，它将传入的字符串参数保存到本地存储。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T14:44:47.617

是的，你可以，但它有点hacky。

**在 Objective-C 方面：**

基本上，在 UIWebView 中，您将使用在 URL 请求开始之前调用的方法 shouldStartLoadWithRequest（来自 UIWebViewDelegate）：

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType 
```

**在 Javascript 方面：**

您的 javascript 代码将导航到您将根据上述方法过滤的“假” URL。就像是：

```
window.location = "js2objc://save:param"; 
```

**回到 Objective-C 方面：**

在我之前提到的方法中，您查找关键字 js2objc（或您选择的任何一个），然后提取信息并采取任何适当的操作：

```
if([[url scheme] isEqualToString:@"js2objc"]){
    // extract the parameters and save them, o do whatever action you need
    return NO;  // so the UIWebView doesn't actually follow the url
} 
```

# javascript - Uint8Array.buffer 数据的 Base 16 编码

> ID：13586376
> 
> 赞同：1
> 
> 时间：2012-11-27T14:27:14.883
> 
> 标签：javascript, encoding, binary

我正在使用 javascript Uint8Array 对象。我使用“.buffer”属性从中获取二进制数据。

由于某些原因，我想将二进制数据编码为 base16，但我还没有得到线索。在这方面的任何帮助都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T14:41:25.320

不确定这是否是您需要的

```
var b16 = "";
var u8 = [8,9,10,11]; // sample input

for(var x = 0; x < u8.length; x++) {
    b16 += pad2(u8[x].toString(16));
}

function pad2(str) {
    return (str.length < 2) ? "0"+str : str;
}

console.log(b16); // will return string "08090a0b" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T14:42:41.093

```
var a = new Uint8Array(4);

function pad(str ) {
    return str.length < 2 ? "0" + str : str;
}

[].map.call( a, function(v) {
    return pad(v.toString(16));
}).join(""); //00000000 
```

# matlab - MATLAB - 根据可比较的 z 值绘制不同颜色的线条

> ID：13586380
> 
> 赞同：1
> 
> 时间：2012-11-27T14:27:30.930
> 
> 标签：matlab, colors, plot, cell, octave

我正在使用一些 MATLAB 代码通过视频捕获来跟踪流体解决方案中的粒子。

所有跟踪的粒子都存储在一个单元格数组 ( `tr`) 中，每个单元格条目是一个不同的跟踪粒子。然后，该单元包含一个`N x 11`矩阵，其中每一行包含该特定帧的粒子参数（位置、大小、对比度等），N 是粒子已被跟踪的视频帧数。

每个单元格的第 1 列包含粒子 x 位置，每个单元格的第 2 列包含粒子 y 位置，每个单元格的第 11 列包含捕获的所有帧的粒子平均速度（忽略所有其他列）。

粒子单元的示例：

![典型粒子单元示例](../Images/8051118e919c03f24847427868488bac.png)

现在通常要在我捕获的视频的第一帧上绘制这些轨道，我使用以下代码：

```
image = read(mmreader([movie '.avi']), 1);  %Loads the first frame of the avi file
figure
imshow(image);
hold on
for i = 1:length(tr) % Or choose which particle you want to show
plot3(tr{i}(:,1),tr{i}(:,2),tr{i}(:,11),'r')
end 
```

但我更愿意做的是像使用上面的代码一样绘制粒子，但粒子轨迹的颜色取决于其平均速度的值（红色 - 快，蓝色 - 慢等）。我想也许最好的方法是将其绘制为 3D 并使用平均速度作为 Z 轴值？但是我仍然不确定如何将颜色添加到绘图中并保持相对，以便可以通过它们绘制的颜色来比较不同粒子的速度。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T15:42:14.127

您可能想看看 FEX 包[cline](http://www.mathworks.com/matlabcentral/fileexchange/14677-cline)。

考虑这个例子（2D 曲线，其颜色由其速度决定）

```
tt = 0:.1:5

x_v = sin(tt);y_v = tt.^2;                % // my curve

speed = sqrt( cos(tt).^2 + (2 * tt).^2 ); % // its local speed
figure
cline(x_v,y_v,speed); 
```

![在此处输入图像描述](../Images/064387e0a91a9ea2bf4cab65f0a1d41b.png)

它也适用于 3D，因此您可以`speed`按照您的想法放置第三个坐标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T14:51:24.687

我的建议是首先为每条轨道决定你想要的颜色范围。（例如计算每个轨道的速度）

在此之后，您可以`sort`跟踪以正确的顺序获取它们。

然后你可以使用 a`colormap`来确保每一行都得到正确的颜色。

# cocoa - NSCollectionViewItem，大小到内容

> ID：13586382
> 
> 赞同：0
> 
> 时间：2012-11-27T14:27:32.853
> 
> 标签：cocoa, interface-builder, appkit, nscollectionview, nscollectionviewitem

我有一个 NSCollectionView，我将它绑定到一个字符串集合。

我用于 NSCollectionViewItem 的视图非常简单，它只包含一个 NSTextField。

NSView - NSTextField

字符串的长度是可变的。有没有办法调整我的文本字段/视图的大小以考虑字符串的长度？

对于较小的字符串，文本在视图中很好地居中。但是对于较长的字符串，文本会被截断。

如果有帮助，集合中的所有字符串的长度都将大致相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:38:33.770

我解决这个问题的方法很简单。我的 NSCollectionView 中的字符串可以有不同的长度——阻止我预先创建正确大小的视图；但在一个集合中，所有字符串的长度都相同。

我创建了正确长度和字体样式的 NSAttributedString，然后获取它的 Size 属性。使用它，我可以在我的 NSCollectionView 上适当地设置 MinItemSize。

# visual-studio-2010 - 如何在升级时运行 MSI 安装程序操作

> ID：13586391
> 
> 赞同：0
> 
> 时间：2012-11-27T14:27:50.553
> 
> 标签：visual-studio-2010, windows-installer, upgrade

我们通过 System.ComponentModel.RunInstallerAttribute 注释在 C# 类中运行自定义安装程序逻辑。我们使用 VS2010 MSI 安装程序。

问题：当我们进行升级时，这个逻辑没有被执行。有没有办法为升级安装执行代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T07:20:19.970

您对自定义操作使用什么条件？如果您使用的是“未安装”，则应该运行。

另外，只是为了确保我正确理解了这个问题。当您进行升级时，自定义操作在新包中，即升级，而不是被删除？

# kineticjs - KineticJS - 显示在移动设备上的原始图像

> ID：13586395
> 
> 赞同：0
> 
> 时间：2012-11-27T14:28:07.573
> 
> 标签：kineticjs

从这里的例子：http: [//www.html5canvastutorials.com/labs/html5-canvas-drag-and-drop-multiple-images-with-kineticjs/](http://www.html5canvastutorials.com/labs/html5-canvas-drag-and-drop-multiple-images-with-kineticjs/)

我想在 PhoneGap 项目中将其用于某些测试目的。问题是，一旦图像被移动，就会有相同的图像卡在原始起始位置。就像图像已经创建了两次。从桌面查看时不会发生这种情况，有人知道这是如何发生的或为什么会发生吗？

```
function loadImages(sources, callback){
    var images = {};
    var loadedImages = 0;
    var numImages = 0;
    for (var src in sources) {
        numImages++;
    }
    for (var src in sources) {
        images[src] = new Image();
        images[src].onload = function(){
            if (++loadedImages >= numImages) {
                callback(images);
            }
        };
        images[src].src = sources[src];
    }
}

function initStage(images){

    var stage = new Kinetic.Stage("container", wW, wH);

    var layer = new Kinetic.Layer();

    var darthVaderImg = new Kinetic.Image({
        image: images.darthVader,
        x: 100,
        y: 40
    });

    darthVaderImg.draggable(true);

    darthVaderImg.on("dragstart", function(){
        this.moveToTop();
        stage.draw();
    });

    layer.add(darthVaderImg);

    // yoda
    var yodaImg = new Kinetic.Image({
        image: images.yoda,
        x: 350,
        y: 55,
    });

    yodaImg.draggable(true);

    yodaImg.on("dragstart", function(){
        this.moveToTop();
        stage.draw();
    });

    layer.add(yodaImg);

    stage.add(layer);

}

var wH = window.innerHeight,
    wW = window.innerWidth,
    mCanvas = document.getElementById('container'),
    app = {

    initialize: function() {
        this.bindEvents();
    },

    bindEvents: function() {
        document.addEventListener('deviceready', this.onDeviceReady, false);
    },

    onDeviceReady: function() {     
        app.receivedEvent('deviceready');
        var sources = {
            darthVader: "img/darth-vader.jpg",
            yoda: "img/yoda.jpg"
        };
        mCanvas.style.width = wW;
        mCanvas.style.height = wH;
        loadImages(sources, initStage);
    },

    receivedEvent: function(id) {

    }

};

if( typeof PhoneGap !== 'undefined' ) {
    app.initialize();
}else{
    window.onload = function(){
        app.onDeviceReady();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T22:11:37.613

我已经看到这个使用 Adob​​e Edge Inspect 测试我的页面。但它只发生在它的浏览器上。使用适用于 Android 的谷歌浏览器，它可以正常工作。

# c# - C# Twitterizer 流式获取用户

> ID：13586402
> 
> 赞同：0
> 
> 时间：2012-11-27T14:28:34.990
> 
> 标签：c#, api, twitter, twitterizer

如何使用 Twitterizer.Streaming.dll 获取实时推文？

（我只需要推文的内容，不需要用户）

我知道我必须这样做：

```
static void NewTweet(TwitterStatus tweet)
{
    Console.WriteLine(string.Format("New tweet: @{0}", tweet.Text));
} 
```

但是我必须在哪里调用“NewTweet”以及如何启动流？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:37:42.537

这是 Twitterizer 开发者的一个例子： [https ://gist.github.com/DigitallyBorn/3011921](https://gist.github.com/DigitallyBorn/3011921)

```
using System;
using Twitterizer;
using Twitterizer.Streaming;
using System.Collections.Generic;

namespace StreamingAPIExample
{
    class Program
    {
        static bool jsonView = false;

        static OAuthTokens tokens = new OAuthTokens()
        {
            ConsumerKey = "REMOVED",
            ConsumerSecret = "REMOVED",
            AccessToken = "REMOVED",
            AccessTokenSecret = "REMOVED"
        };

        static void Main(string[] args)
        {
            Console.BufferWidth = 100;
            Console.WindowWidth = 100;

            StreamOptions options = new StreamOptions();
            options.Track.Add("#tallycc");
            options.Track.Add("tallycc");
            options.Track.Add("#tallycodecamp");
            options.Track.Add("tallycodecamp");

            TwitterStream stream = new TwitterStream(
                tokens,
                "Tallahassee CodeCamp2001 Example Application",
                options);

            Console.WriteLine("The stream is starting ...");
            stream.StartUserStream(
                StreamInit, 
                StreamStopped, 
                NewTweet, 
                DeletedTweet, 
                NewDirectMessage, 
                DeletedDirectMessage, 
                OtherEvent, 
                RawJson); //optional

            Console.WriteLine("The stream has started. Press any key to stop.");
            Console.ReadKey();

            Console.WriteLine("Stopping the stream ...");
            stream.EndStream(StopReasons.StoppedByRequest, "I'm stopping the stream.");

            Console.WriteLine("Press any key to exit.");
            Console.ReadKey();
        }

        static void StreamInit(TwitterIdCollection friends)
        {
            if (!jsonView)
                Console.WriteLine(string.Format("{0} friends reported.", friends.Count));
        }

        static void StreamStopped(StopReasons reason)
        {
            if (!jsonView)
                Console.WriteLine(string.Format("The stream has stopped. Reason: {0}", reason.ToString()));
        }

        static void NewTweet(TwitterStatus tweet)
        {
            if (!jsonView)
                Console.WriteLine(string.Format("New tweet: @{0}: {1}", tweet.User.ScreenName, tweet.Text));
        }

        static void DeletedTweet(TwitterStreamDeletedEvent e)
        {
            if (!jsonView)
                Console.WriteLine(string.Format("Deleted tweet: Id: {0}; UserId: {1}", e.Id, e.UserId));
        }

        static void NewDirectMessage(TwitterDirectMessage message)
        {
            if (!jsonView)
                Console.WriteLine(string.Format("New message from {0}", message.SenderScreenName));
        }

        static void DeletedDirectMessage(TwitterStreamDeletedEvent e)
        {
            if (!jsonView)
                Console.WriteLine(string.Format("Deleted message: {0}", e.UserId));
        }

        static void OtherEvent(TwitterStreamEvent e)
        {
            if (!jsonView)
                Console.WriteLine(string.Format("Other event. Type: {0}; From: {1}; {2}", e.EventType, e.Source.ScreenName, e.TargetObject));
        }

        static void RawJson(string json)
        {
            if (jsonView)
                Console.WriteLine(json);
        }
    }
} 
```

# google-app-engine - 如何在 Google App Engine for Go 中设置数据夹具

> ID：13586405
> 
> 赞同：1
> 
> 时间：2012-11-27T14:28:39.993
> 
> 标签：google-app-engine, go, fixtures

我希望在部署我的 go 项目时将一些数据固定装置放入数据存储中，类似于在 Django 中可以完成的操作。是否可以？如果没有，是否有任何替代方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T21:24:54.147

如果您正在寻找一些配置来将数据放入数据存储区，那么答案是否定的。appengine的python和java版本也没有这样的功能。

我认为 appengine 的 django 框架正在做的事情和你可以做的一样。

只需将您需要的数据写入应用程序`init`方法内的数据存储区，同时`init`检查数据是否已写入。

然后每当应用程序启动时，他都会检查它是否应该将一些夹具数据写入数据存储区，并且您可以确定在处理第一个请求之前它就在那里。

# business-process-management - 在 XML 流程定义中初始化 Activiti 流程变量

> ID：13586407
> 
> 赞同：0
> 
> 时间：2012-11-27T14:28:48.253
> 
> 标签：business-process-management, activiti

目前我必须在执行流程之前定义每个流程变量并将其传递给`startProcessInstanceBy*`Activiti 的功能。我想知道是否可以在流程定义 XML 中使用默认值来定义这些？这样，如果我的进程需要新的变量来执行，我就可以避免更改 Java 代码。我能以某种方式实现这一目标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T20:25:53.560

您可以`script task`在开始事件之后使用 a 来设置这些变量

# iphone - 将网络应用程序添加到主屏幕时嵌入的 Youtube 视频不播放

> ID：13586410
> 
> 赞同：2
> 
> 时间：2012-11-27T14:29:00.830
> 
> 标签：iphone, web-applications, youtube, homescreen

我为客户制作了一个应用程序，该应用程序将视频上​​传到 youtube，然后通过电子邮件向他们发送指向页面的链接，当在 Safari 上打开该页面时，会显示视频，然后提示他们将该页面作为 Web 应用程序添加到他们的主屏幕。

出于某种原因，当应用程序在 Safari 中播放时，视频播放正常，但从主屏幕播放时，它不会通过扬声器播放声音，只能通过耳机播放。有人知道这可能发生的原因吗？

编辑：自己修复并发布到另一个答案 [http://www.shockoe.com/blog/embedded-youtube-videos-wont-play-sound-through-speakers-when-played-from-web-apps-added-到主屏幕修复/](http://www.shockoe.com/blog/embedded-youtube-videos-wont-play-sound-through-speakers-when-played-from-web-apps-added-to-homescreen-fix/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T18:09:36.557

回答了我自己的问题！需要使用对象嵌入而不是 iframe

[http://www.shockoe.com/blog/embedded-youtube-videos-wont-play-sound-through-speakers-when-played-from-web-apps-added-to-homescreen-fix/](http://www.shockoe.com/blog/embedded-youtube-videos-wont-play-sound-through-speakers-when-played-from-web-apps-added-to-homescreen-fix/)

# c# - 当从另一个线程抛出异常时写入堆栈跟踪

> ID：13586411
> 
> 赞同：5
> 
> 时间：2012-11-27T14:29:03.857
> 
> 标签：c#, .net

如何将未处理的异常（从任何线程抛出）的堆栈跟踪写入文件？

我需要它来帮助调试挂起的应用程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T14:31:09.040

看看[AppDomain.UnhandledException](http://msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception.aspx)事件。看来这正是您所需要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T15:00:02.830

谢谢大家，但是我已经看到，当我从 Visual Studio 运行程序时，当抛出来自任何线程的未处理异常时，由 .NET 写入控制台窗口的跟踪输出不会重定向到控制台窗口。

当我运行与 Visual Studio 分离的程序时，它只是被重定向。因此，这段代码非常适合查看来自任何抛出未处理异常的线程的所有堆栈跟踪

```
Trace.Listeners.Clear();

        TextWriterTraceListener twtl = new TextWriterTraceListener(Path.Combine(Environment.CurrentDirectory, "logfile.txt"));
        twtl.Name = "TextLogger";
        twtl.TraceOutputOptions = TraceOptions.ThreadId | TraceOptions.DateTime | TraceOptions.Callstack;

        ConsoleTraceListener ctl = new ConsoleTraceListener(false);
        ctl.TraceOutputOptions = TraceOptions.DateTime;

        Trace.Listeners.Add(twtl);
        Trace.Listeners.Add(ctl);
        Trace.AutoFlush = true; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T14:32:22.383

我相信你可以通过监听[AppDomain.UnhandledException](http://msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception.aspx)事件来做到这一点。在 WPF 的情况下，也值得一听[Application.Current.Dispatcher.UnhandledException](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.unhandledexception.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T14:51:17.160

您可以通过 ex.StackTrace 获取 catch 块中的堆栈跟踪，如下所示：

```
try
{
   //Your code;
}
catch(Exception ex)
{
    string innerException = ex.InnerException;
    string stackTrac = ex.StackTrace;
    //Write this stackTrac to any file where you want
} 
```

# compiler-construction - 如何更改make的默认行为

> ID：13586415
> 
> 赞同：1
> 
> 时间：2012-11-27T14:29:26.073
> 
> 标签：compiler-construction, compilation, makefile

嘿嘿，

我想更改“make”的默认行为。
我希望它在编译 ac 文件时运行以下命令：

**clang*文件*.c -std=c99 -Wall -Werror -fcolor-diagnostics -lcs50 -lm**

有没有“nooby”的方式来做到这一点？

提前谢谢，

汤姆

* * *

如果搜索论坛并尝试谷歌 - 什么都没有出现。但很有可能，我不知道到底要搜索什么......所以如果在其他地方得到回答，我真的很抱歉......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T15:43:05.533

将其放入您的 bash 启动脚本中：

```
export CC=clang CFLAGS="-std=c99 -Wall -Werror -fcolor-diagnostics" LDLIBS="-lcs50 -lm" 
```

更好的是把这些行放在你的`Makefile`（对于简单的情况，你不需要更多的东西，但你可能想要添加依赖行）：

```
CC=clang
CFLAGS=-std=c99 -Wall -Werror -fcolor-diagnostics
LDLIBS=-lcs50 -lm 
```

更好的是创建一个适当的`Makefile`，但以上内容将帮助您入门。

您可以`Makefile`使用任何文本编辑器创建一个。`make`在当前目录中查找`Makefile`（通常称为`Makefile`但也可以称为`makefile`）。只需将其放在与程序相同的目录中`C`即可。

# python - 如何使用 python 读取 facebook graph json 数据？

> ID：13586420
> 
> 赞同：0
> 
> 时间：2012-11-27T14:29:34.823
> 
> 标签：python, django, facebook, json, facebook-graph-api

当我在开发环境中打印“user_stream”时，会打印完整的字符串。但是，当我在生产环境中查看控制台中打印的内容时，不会打印“user_stream”的全部内容，我相信这会导致稍后在我拥有的附加代码中出现错误。

我的问题是：为什么在生产环境的控制台中没有打印“user_stream”的所有内容，我该如何解决这个问题？

```
instance = UserSocialAuth.objects.get(user=request.user, provider='facebook')
token = instance.tokens
user_url = "https://graph.facebook.com/me/friends?access_token=" + token['access_token']

u = urllib.urlopen(user_url);
user_stream = json.loads(u.read())

print user_stream 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T14:56:54.210

不知何故，您的 user_stream 中有错误。弄清楚它是什么的最好方法是打印字符串，或者直接打印错误消息。这些命令应该可以帮助您弄清楚发生了什么。

```
print u.read()
print user_stream['error'] 
```

我强烈怀疑您的访问令牌在某种程度上无效。也调查一下。您可能会从[Graph API Explorer](https://developers.facebook.com/tools/explorer/?method=GET&path=me/friends?access_token=AAACEdEose0cBAM0CipLFjIDZCysqmGyZCRJ6x4JsdSVkb177lM0UNMWqSYZA9BmBY0h3PbUiIJppQCbDZD)中看到的示例如下：

```
{
  "error": {
    "message": "Malformed access token AAACEdEose0cBAM0CipLFjIDZCysqmGyZCRJ6x4JsdSVkb177lM0UNMWqSYZA9BmBY0h3PbUiIJppQCbDZD",
    "type": "OAuthException",
    "code": 190
  } 
```

仔细阅读那里的信息，看看你是否能弄清楚如何纠正它。此外，尝试打印我们的完整 URL 并在 Graph API Explorer 中运行它。

# java - hadoop javacv代码上的图像处理（模板匹配）

> ID：13586422
> 
> 赞同：2
> 
> 时间：2012-11-27T14:29:41.190
> 
> 标签：java, opencv, hadoop

在hadoop上运行模板匹配的javacv代码但出现以下错误，请帮助

```
hduser@anuj-laptop:/usr/local/hadoop$ bin/hadoop dfs -rmr /user/hduser/out
Warning: $HADOOP_HOME is deprecated.

Deleted hdfs://master:54310/user/hduser/out
hduser@anuj-laptop:/usr/local/hadoop$ bin/hadoop jar back.jar back /user/hduser/in        /user/hduser/out
Warning: $HADOOP_HOME is deprecated.

12/11/27 19:42:47 WARN mapred.JobClient: Use GenericOptionsParser for parsing the      arguments. Applications should implement Tool for the same.
12/11/27 19:42:47 INFO util.NativeCodeLoader: Loaded the native-hadoop library
12/11/27 19:42:47 WARN snappy.LoadSnappy: Snappy native library not loaded
12/11/27 19:42:47 INFO mapred.FileInputFormat: Total input paths to process : 1
12/11/27 19:42:47 INFO mapred.JobClient: Running job: job_201211271649_0022
12/11/27 19:42:48 INFO mapred.JobClient:  map 0% reduce 0%
12/11/27 19:43:01 INFO mapred.JobClient: Task Id : attempt_201211271649_0022_m_000000_0, Status : FAILED
java.lang.RuntimeException: Error in configuring object
at org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:93)
at org.apache.hadoop.util.ReflectionUtils.setConf(ReflectionUtils.java:64)
at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:117)
at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:432)
at org.apache.hadoop.mapred.MapTask.run(MapTask.java:372)
at org.apache.hadoop.mapred.Child$4.run(Child.java:255)
at java.security.AccessController.doPrivileged(Native Method)
at javax.security.auth.Subject.doAs(Subject.java:396)
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1121)
at org.apache.hadoop.mapred.Child.main(Child.java:249)
    Caused by: java.lang.reflect.InvocationTargetException
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at   sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:88)
... 9 more
    Caused by: java.lang.NoClassDefFoundError: com/googlecode/javacv/cpp/opencv_core$CvArr
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:247)
at org.apache.hadoop.conf.Configuration.getClassByName(Configuration.java:820)
at org.apache.hadoop.conf.Configuration.getClass(Configuration.java:865)
at org.apache.hadoop.conf.Configuration.getClass(Configuration.java:891)
at org.apache.hadoop.mapred.JobConf.getMapperClass(JobConf.java:947)
at org.apache.hadoop.mapred.MapRunner.configure(MapRunner.java:34)
... 14 more
    Caused by: java.lang.ClassNotFoundException: com.googlecode.javacv.cpp.opencv_core$CvArr
at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
... 21 more

    12/11/27 19:43:02 INFO mapred.JobClient: Task Id : attempt_201211271649_0022_m_000001_0, Status : FAILED
    12/11/27 19:43:26 INFO mapred.JobClient: Job complete: job_201211271649_0022
    12/11/27 19:43:26 INFO mapred.JobClient: Counters: 7
    12/11/27 19:43:26 INFO mapred.JobClient:   Job Counters 
    12/11/27 19:43:26 INFO mapred.JobClient:     SLOTS_MILLIS_MAPS=42747
    12/11/27 19:43:26 INFO mapred.JobClient:     Total time spent by all reduces waiting after reserving slots (ms)=0
    12/11/27 19:43:26 INFO mapred.JobClient:     Total time spent by all maps waiting after reserving slots (ms)=0
    12/11/27 19:43:26 INFO mapred.JobClient:     Launched map tasks=8
    12/11/27 19:43:26 INFO mapred.JobClient:     Data-local map tasks=8
    12/11/27 19:43:26 INFO mapred.JobClient:     SLOTS_MILLIS_REDUCES=0
    12/11/27 19:43:26 INFO mapred.JobClient:     Failed map tasks=1
    12/11/27 19:43:26 INFO mapred.JobClient: Job Failed: # of failed Map Tasks exceeded allowed limit. FailedCount: 1\. LastFailedTask: task_201211271649_0022_m_000000
    Exception in thread "main" java.io.IOException: Job failed!
at org.apache.hadoop.mapred.JobClient.runJob(JobClient.java:1265)
at back.main(back.java:192)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.hadoop.util.RunJar.main(RunJar.java:156) 
```

我的 javacv 代码如下：

```
 import static com.googlecode.javacv.cpp.opencv_highgui.*;

  import java.io.File;
  import static com.googlecode.javacv.cpp.opencv_imgproc.*;

  import java.io.File;
  import java.io.IOException;
  import java.util.*;
  import org.apache.hadoop.fs.Path;
  import org.apache.hadoop.conf.*;
  import org.apache.hadoop.io.*;
  import org.apache.hadoop.mapred.*;
  import org.apache.hadoop.util.*;
  import java.awt.image.BufferedImage;
  import java.io.FileInputStream;
  import javax.imageio.ImageIO;
  import com.googlecode.javacv.*;
  import com.googlecode.javacv.cpp.opencv_core.CvPoint;
  import com.googlecode.javacv.cpp.opencv_core.CvSize;
  import com.googlecode.javacv.cpp.opencv_core.IplImage;
  import com.googlecode.javacv.cpp.opencv_imgproc.CvHistogram;

  import static com.googlecode.javacv.cpp.opencv_core.*;

  public class back {

//private static String[] testFiles = new String[] {"my.jpg","my1.jpg"};
 // private static String testFilespath = "/home/student/Desktop/images";
private static String testFilespath ="images";
public static class Map extends MapReduceBase implements Mapper<LongWritable, Text, Text, IntWritable> 
  {
   private Text image = new Text();
   private final static IntWritable one = new IntWritable(1);
   private final static IntWritable zero = new IntWritable(0);
   public void map(LongWritable key, Text value, OutputCollector<Text, IntWritable> output, Reporter reporter) throws IOException
     {  
        String line = value.toString();
     // for (String identifier : testFiles)
     //  {
    //  FileInputStream fis=new FileInputStream(testFilespath+"/"+"my.jpg");
 //Document doc = builder.createDocument(fis, identifier);
    //FileInputStream imageStream = new FileInputStream(testFilespath + "/" + identifier);
        //BufferedImage bimg = ImageIO.read(fis);
        String f=testFilespath+"/"+line;
        IplImage src_img = cvLoadImage (f, CV_LOAD_IMAGE_COLOR);
        f=testFilespath+"/"+"my1.jpg";
        IplImage tmp_img = cvLoadImage (f, CV_LOAD_IMAGE_COLOR);
        IplImage src_planes[]={null,null,null};
        IplImage src_hsv,tmp_hsv,dst_img;
        CvHistogram hist;
        int i, hist_size[] = {90};
      float h_ranges[] = { 0, 180 };
      float ranges[][] = { h_ranges };
      CvSize dst_size;
      CvPoint min_loc=new CvPoint();
      CvPoint max_loc=new CvPoint();
      //0,src_planes1,src_planes2;
        IplImage tmp_planes[]={null,null,null};
        for (i = 0; i < 3; i++) {
            src_planes[i]=cvCreateImage(cvGetSize (src_img), IPL_DEPTH_8U, 1);
            tmp_planes[i] = cvCreateImage (cvGetSize (tmp_img), IPL_DEPTH_8U, 1);
         //   src_planes1=cvCreateImage(cvGetSize (src_img), IPL_DEPTH_8U, 1);
          //  tmp_planes1 = cvCreateImage (cvGetSize (tmp_img), IPL_DEPTH_8U, 1);
           // src_planes2=cvCreateImage(cvGetSize (src_img), IPL_DEPTH_8U, 1);
          //  tmp_planes2 = cvCreateImage (cvGetSize (tmp_img), IPL_DEPTH_8U, 1);
          //cout<<"I"; 
            }
        src_hsv= cvCreateImage (cvGetSize (src_img), IPL_DEPTH_8U, 3);
      tmp_hsv = cvCreateImage (cvGetSize (tmp_img), IPL_DEPTH_8U, 3);
    //            CanvasFrame canvas1 = new CanvasFrame("sreeeee");
    //  canvas1.showImage(src_hsv);
      cvCvtColor (src_img, src_hsv, CV_BGR2HSV);
      cvCvtColor (tmp_img, tmp_hsv, CV_BGR2HSV);
    //  CanvasFrame canvas2 = new CanvasFrame("sczx");
    //  canvas2.showImage(src_hsv);
      cvSplit(src_hsv, src_planes[0], src_planes[1], src_planes[2], null);
      cvSplit(tmp_hsv, tmp_planes[0], tmp_planes[1], tmp_planes[2], null);
      //   f=testFilespath+"/"+"my1.jpg";
      //  IplImage tmp_img = cvLoadImage (f, CV_LOAD_IMAGE_COLOR);
 //     CanvasFrame canvas2 = new CanvasFrame("pix");
 //   canvas2.showImage(src_hsv);
  hist = cvCreateHist (1, hist_size, CV_HIST_ARRAY, ranges, 1);

 // IplImage.PointerByReference planesPointer = new IplImage.PointerByReference(tmp_planes);
  cvCalcHist(tmp_planes, hist, 0, null);
  // (5)探索画像全体に対して，テンプレートのヒストグラムとの距離（手法に依存）を計算します． 
  dst_size =
    cvSize (src_img.width() - tmp_img.width() + 1,
            src_img.height() - tmp_img.height() + 1);
  int n=src_img.width() - tmp_img.width() + 1;
  int g=src_img.height() - tmp_img.height() + 1;
//  System.out.println("dfsd"+n+"dfgdfgdf"+g);
  //- tmp_img.width() + 1);

 image.set(line);
 int flag=0;
  if(n>0 && g>0)
  {dst_img = cvCreateImage (dst_size, IPL_DEPTH_32F, 1);
//  CanvasFrame canvasr = new CanvasFrame("klkhj");
//  canvasr.showImage(dst_img);

  cvCalcBackProjectPatch (src_planes, dst_img, cvGetSize (tmp_img), hist,
                          CV_COMP_CORREL, 1.0);
 // CanvasFrame canvas3 = new CanvasFrame("pixkjhkjh");
 // canvas3.showImage(src_hsv);
  double[] min_val={0};
  double[] max_val={0};
//  min_loc.x()=10;

cvMinMaxLoc(dst_img, min_val, max_val, min_loc, max_loc, null);
  //    System.out.println("vxcvxc "+min_val[0]+"   "+max_val[0]);
  //    System.out.println("vxcvxc "+max_loc.x()+"   "+max_loc.y());
  //    System.out.println("vxcvxc "+min_loc.x()+"   "+min_loc.y());
  ***strong text***//   System.out.println("vxcvxc "+tmp_img.width()+"   "+tmp_img.height());
// (6)テンプレートに対応する位置に矩形を描画します． 

if(max_loc.x() !=0 && max_loc.y() !=0)
  { cvRectangle (src_img, max_loc,
               cvPoint (max_loc.x() + tmp_img.width(),
                        max_loc.y() + tmp_img.height()), CV_RGB (255, 0, 0), 3, 8, 0);
    flag=1;
  }
 // cvNamedWindow ("src", CV_WINDOW_AUTOSIZE);
 // cvNamedWindow ("dst", CV_WINDOW_AUTOSIZE);
   //     CanvasFrame canvas4 = new CanvasFrame("sad");
//  canvas4.showImage(src_img);
  //CanvasFrame canvas5 = new CanvasFrame("lkj");
  //canvas5.showImage(dst_img);
  //CanvasFrame canvas6 = new CanvasFrame("jkl");
  //canvas6.showImage(src_hsv);
//  cvWaitKey(0);

//  cvDestroyWindow("Image");

  cvReleaseImage(dst_img);
  cvReleaseImage(tmp_img);
  cvReleaseImage(src_hsv);
  cvReleaseImage(tmp_hsv);
  for(i=0; i<3; i++) {
    cvReleaseImage(src_planes[i]);
    cvReleaseImage(tmp_planes[i]);
//    cvReleaseImage(src_planes1);
//    cvReleaseImage(tmp_planes1);
//    cvReleaseImage(src_planes2);
//    cvReleaseImage(tmp_planes2);
  }

  }
  if(flag==1)
   {
    output.collect(image,one);
    line = "/user/hduser/output/"+line;
    cvSaveImage(line, src_img);
    cvReleaseImage(src_img);
   }
  else
   output.collect(image,zero);

  //System.out.println("key value pair   "+line);
      // }
     }
  }

public static class Reduce extends MapReduceBase implements Reducer<Text, IntWritable, Text, IntWritable> {
     public void reduce(Text key, Iterator<IntWritable> values, OutputCollector<Text, IntWritable> output, Reporter reporter) throws IOException {
       int sum = 0;
       while (values.hasNext()) {
         sum += values.next().get();
        // System.out.println("jkgj"+key+"nbnbmnbmnb"+sum+"jghgjhgjhg");
       }
       output.collect(key, new IntWritable(sum));
     }
   }

   public static void main(String[] args) throws Exception {
     JobConf conf = new JobConf(back.class);
     conf.setJobName("back");

     conf.setOutputKeyClass(Text.class);
     conf.setOutputValueClass(IntWritable.class);

     conf.setMapperClass(Map.class);
     conf.setCombinerClass(Reduce.class);
     conf.setReducerClass(Reduce.class);

     conf.setInputFormat(TextInputFormat.class);
     conf.setOutputFormat(TextOutputFormat.class);

     FileInputFormat.setInputPaths(conf, new Path(args[0]));
     FileOutputFormat.setOutputPath(conf, new Path(args[1]));

     JobClient.runJob(conf);
   }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T22:38:19.150

您遇到的错误看起来像您的 jar 文件不包含所有必需的依赖项 - 特别是 openCV jar。有两种方法可以解决此错误：

1.  将所需的 jar 放入分布式缓存中（请参阅[在我的 Map-Reduce 作业中包含第三方库（使用分布式缓存）](https://stackoverflow.com/questions/11463366/including-third-party-libraries-in-my-map-reduce-job-using-distributed-cache)）
2.  创建一个包含所有依赖项的 jar。第二种方法很容易用 maven 完成。Maven 还将帮助您解决所有依赖问题，然后才能让您做任何事情。这通常被误解为 maven 不是“只是工作”。问题是，如果 maven 不能“正常工作”，那么您的环境中就会存在您不了解的复杂性，这会在以后给您带来问题。

# jquery - jquery gmap3 - 计算多个动态生成的标记坐标的中心点和缩放 - google maps api 3

> ID：13586428
> 
> 赞同：4
> 
> 时间：2012-11-27T14:30:18.380
> 
> 标签：jquery, google-maps-api-3, jquery-gmap3

我基本上是在尝试如何为我的`#map_div`div 设置自动缩放和自动居中功能。但是因为我的标记是动态生成的，我不知何故需要缩放和中心自动工作，基于我的宽度和高度`#map_div`

但正如您在我的 gmap3 脚本中看到的那样，我必须手动确定缩放和居中，这并不酷。

我在下面找到了这个脚本片段，但看不到如何将它与我的`.gmap3`脚本集成。是否可以以某种方式将它与我的`.gmap3`jquery 插件脚本集成？

中心点计算变量...

```
// map: an instance of google.maps.Map object
// latlng: an array of google.maps.LatLng objects
var latlngbounds = new google.maps.LatLngBounds( );
for ( var i = 0; i < latlng.length; i++ ) {
  latlngbounds.extend( latlng[ i ] );
}
map.fitBounds( latlngbounds ); 
```

[在这里找到上面的脚本](http://911-need-code-help.blogspot.co.uk/2011/03/zoom-to-fit-all-markers-on-google-map.html)

我的`.gmap3`脚本如下...

```
jQuery(function($) {    

    $('#map_div').gmap3({
        action: 'init',
        options: {
            center: [50.799019, -1.132037],
            zoom: 5,
            scrollwheel: false
        }
    }, {
        action: 'addMarkers',
        markers: [{
            lat: 50.799019,
            lng: -1.132037,
            data: 'Test One'},
        {
            lat: 50.365162,
            lng: -4.712017,
            data: 'Test Two'},
        {
            lat: 54.518726,
            lng: -5.881054,
            data: 'Test Three'},
        {
            lat: 52.780964,
            lng: -1.211863,
            data: 'Test Four'},
        {
            lat: 51.433998,
            lng: -2.549690,
            data: 'Test Five'
        }],
        marker: {
            options: {
                draggable: false
            }
        }
    });
}); 
```

我通常会做一个 jsfiddle，但该网站已关闭。

对此的任何帮助将非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T15:06:52.873

您是否尝试过**自动调整**功能？

[http://gmap3.net/en/catalog/16-misc/autofit-58](http://gmap3.net/en/catalog/16-misc/autofit-58)

> 此函数扩展地图边界以包含添加的每个叠加层（标记、圆圈...）

```
$('#test').gmap3(
  { circle:{
      options: {
        center: [37.772323, -122.214897],
        radius : 2500000,
        fillColor : "#008BB2",
        strokeColor : "#005BB7"
      }
    }
  },
  "autofit"
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-17T06:34:41.277

我就是这样做的，您可以在“标记”的回调中访问标记的坐标，然后使用它们将地图居中并使用 fitBounds 自动缩放：

```
$('#map_canvas').gmap3({
map: {
  options: {
    zoom: 9,
    center: [view.lat, view.lng]
  },
   marker : {
      values : markersArray,
      options : {
        draggable : false
      },
  callback:function(m)
     { //m will be the array of markers
       var bounds=new google.maps.LatLngBounds();
       for(var i=0;i<m.length;++i)
       {
         bounds.extend(m[i].getPosition());
       }
       try{
            var map=$(this).gmap3('get');
                map.fitBounds(bounds);
                map.setCenter(bounds.getCenter())
           }catch(e){}
     }
  }
 }
}); 
```

# matlab - 如何在matlab的.mat文件中保存结构数组

> ID：13586429
> 
> 赞同：1
> 
> 时间：2012-11-27T14:30:18.543
> 
> 标签：matlab

如何`.mat`在 Matlab 文件中保存结构数组？是否可以？

```
p(1).x=0;
p(1).y=0;

p(2).x=1;
p(2).y=1;

save('matfilename','-struct','p');
% ??? Error using ==> save
% The argument to -STRUCT must be the name of a scalar structure variable. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T14:44:52.547

您可以`save`在没有`-struct`参数的情况下使用：

```
>> p(1).x = 0;
>> p(1).y = 0;
>> p(2).x = 1;
>> p(2).y = 1;
>> save('myvars.mat', 'p');
>> clear p;
>> load('myvars.mat');
>> p(1)

ans = 

    x: 0
    y: 0

>> p(2)

ans = 

    x: 1
    y: 1 
```

如果您想存储`x`和`y`作为单独的数组（就像`-store`是`p`一个标量结构一样），那么您需要自己做（您可以使用该`fieldnames`函数来收集结构中所有字段的名称）。

# openembedded - 如何检查实际执行的 bitbake 命令

> ID：13586432
> 
> 赞同：9
> 
> 时间：2012-11-27T14:30:25.633
> 
> 标签：openembedded, bitbake

bitbake 是否存储调用的 shell 命令（沿调用路径）？我可以在日志文件中找到 shell 命令输出，但想查看实际的命令行。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-27T21:44:27.040

简短的回答：是的。与`run.* log`文件位于同一目录中的`log.*`文件是由 bitbake 执行的实际脚本生成的。你需要的一切都在那里。它们不是微不足道的，因为环境的每个方面都设置好了，所以它们阅读起来很麻烦，但它都在那里。

玩得开心！

# php - 使用 PHP 5.3 将数据插入 MySQL 5.5

> ID：13586438
> 
> 赞同：0
> 
> 时间：2012-11-27T14:30:51.647
> 
> 标签：php

我在使用 PHP 5.3 将表单中的数据插入 MySQL 5.5 数据库时遇到问题我能够插入我的数据，但是我得到了重复的插入。

这是我的代码：

```
<?php
$host ="localhost";
$user ="root";
$password ="password";
$database ="database1";
$table ="users";

mysql_connect("$host","$user","$password")or die(mysql_error());
mysql_select_db("$database")or die(mysql_error());
$mysql = "INSERT INTO $table (username,password)
          VALUES('$_POST[username]','$_POST[password]')";
if(!mysql_query($mysql)) die(mysql_error());
echo"Data inserted";
mysql_close();
?> 
```

我得到的错误信息是

```
"undefined index:username" 
"undefined index:password" 
```

我的表字段是三个 id、用户名和密码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T14:34:29.307

你得到`notice`错误。

检查是否`$_POST['username']`存在

```
if(isset($_POST[username]) && isset($_POST[password])){
       $host ="localhost";
       $user ="root";
       $password ="password";
       $database ="database1";
       $table ="users";
       mysql_connect("$host","$user","$password")or die(mysql_error());
       mysql_select_db("$database")or die(mysql_error());
       $mysql = "INSERT INTO $table (username,password)
       VALUES('$_POST[username]','$_POST[password]')";
       if(!mysql_query($mysql)) die(mysql_error());
       echo"Data inserted";
       mysql_close();
} 
```

您正在重复插入，因为您没有检查用户名是否已存在于数据库中。在做之前`INSERT`检查用户名是否已经存在于数据库中，如果已经存在则不允许插入。

使用 mysqli 或 pdo 连接数据库。mysql_* 函数将很快被弃用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T14:43:33.117

记住在将数据插入数据库之前使用`mysqli_real_escape_string`或转义数据。`mysql_real_escape_string`

正如其他人所说，使用`mysqli_*`而不是`mysql_*`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-02T19:03:23.770

我记得5.5有点压力...试试这个

```
$user=_$POST['username'];
$pass=_$POST['password'];

$sql="INSERT INTO $table (username, password) VALUES ('$user', '$pass')";
$result = $conn->query($sql);

if ($result) 
{
echo "Entered data successfully";
}
else
{
echo "data not posted";
}
mysql_close($conn);
?> 
```

但是在 5.5 中，我的主要问题是在您的 _POST 语句中缺少用户名和密码......这很奇怪控制台不需要它，但大多数浏览器都需要......

# git - 每个用户的 Git 日志和控制

> ID：13586443
> 
> 赞同：3
> 
> 时间：2012-11-27T14:31:16.630
> 
> 标签：git, version-control, git-submodules

我正在研究使用 Git 为我的公司进行代码管理的可能性。在这方面我有两个问题：

1.  我们希望每个用户的每个“克隆”或“代码访问”都有大量日志。过去曾发生过第 3 方顾问试图访问公司 IP 的事件，但这些活动被记录下来。到目前为止，当我克隆一个 Git 存储库时，没有日志显示任何此类代码的访问权限。

    *   我必须从哪里获取此信息的日志？

    *   不仅如此，如果某个工程师克隆了 Git 存储库，如果有人试图从中克隆，我们还能获得进一步“克隆”的日志吗？

2.  在同一个 Git 存储库中，有没有办法控制对某些代码部分的访问？例如，考虑一个以`TOP_DIR`两个子目录命名的存储库，`TOP_DIR/DIR_GLOBAL`并且`TOP_DIR/DIR_SECURE`. 我只想为`DIR_SECURE`少数团队成员提供读/写访问权限，但对`DIR_GLOBAL`.

在这些方面的任何指示都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T14:35:49.907

git 本身完全没有权限管理。

您必须使用包装器。常见的是[gitolite](https://github.com/sitaramc/gitolite)，它基于 ssh 并使用私钥认证来认证用户。您可以根据每个存储库的密钥（即用户）分别授予权限。

通过修改在身份验证后 ssh 移交给 gitolite 时立即调用的可执行文件，可以很容易地扩展 gitolite（[触发器？ ）以记录所有未经授权的访问尝试。](http://sitaramc.github.com/gitolite/triggers.html)sshd/pam 会记录根本没有在 gitolite 注册的人的访问，因为登录时权限被拒绝。

如前所述，git 不进行任何身份验证或授权，因此如果您需要基于目录的访问控制，则必须使用子模块，它有时会表现得很痒，但它们会满足您的需求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T15:04:44.463

您可以使用 Git 挂钩在中央服务器上实现日志记录。Gitolite 有利于用户管理，并确保调用任何钩子。使用 gitolite，您可以控制谁可以访问哪些 repos，并且使用 hooks 可以记录用户事件。

您总是会遇到有人从另一个用户的回购副本克隆回购的问题。Git 是去中心化的，所以这不是一个万无一失的解决方案，但如果没有用户允许任何人复制他们的 repo，那么您可以确保每个人都使用中央服务器，这是一个开始。

如果钩子不够用，请查看[http://sitaramc.github.com/gitolite/triggers.html](http://sitaramc.github.com/gitolite/triggers.html) Gitolite 确实支持“触发器”，这将为您提供更多关于您可以记录的事情的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T05:49:32.793

感谢各种输入，这就是我最终做的事情：-- (1) 在服务器上，我创建了 3 种类型的帐户。(a) sudo 'ers 帐户 (b) 存储库管理员 - 控制存储库访问的 linux 组 (c) 带有 shell=/usr/bin/git-shell 的 git 用户帐户（因此他们无法直接登录）- 添加它们与同一个linux组。

密码已邮寄给每个团队成员。每当他们访问系统时，ssl 库都会在 /etc/log/auth_user.log 中记录他们的访问。这些日志还不够，但可以从某个地方开始。

为什么我没有选择 gitolite： gitolite 的目的是控制对存储库的选择性部分的访问。此外，该产品没有经过积极测试（因为我可以看到许多错误仍然存​​在），而且更重要的是，它不会记录访问，也无法区分黑白克隆或任何其他 API。我正在考虑更改 git 代码以使其更加冗长。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-26T20:42:15.027

您可以使用 git-measure 获取每个用户的统计信息。

# session - 使用 Silex SessionServiceProvider 时 PHPUnit 失败

> ID：13586447
> 
> 赞同：3
> 
> 时间：2012-11-27T14:31:28.673
> 
> 标签：session, header, phpunit, silex

我正在尝试为我的 Silex 应用程序创建一个单元测试。单元测试类看起来像这样：

```
class PageTest extends WebTestCase {

    public function createApplication() {
        $app = require __DIR__ . '/../../app/app.php';
        $app['debug'] = true;

        $app['session.storage'] = $app->share(function() {
            return new MockArraySessionStorage();
        });

        $app['session.test'] = true;

        unset($app['exception_handler']);
        return $app;
    }

    public function testIndex() {
        $client = $this->createClient();
        $client->request('GET', '/');
        $this->assertTrue($client->getResponse()->isOk());
    }

} 
```

它试图请求的 silex 路由看起来像这样：

```
$app->get('/', function() use($app) {
    $user     = $app['session']->get('loginUser');

    return $app['twig']->render('views/index.twig', array(
        'user'           => $user,
    ));
}); 
```

这会导致*RuntimeException: 无法启动会话，因为标头已发送。*在*\Symfony\Component\HttpFoundation\Session\Storage\NativeSessionStorage.php:142*中，回溯包含 $app['session']->get 路由中的行。

看起来在 NativeSessionStorage 中的会话开始尝试之前发生的输出实际上是 PHPUnit 输出信息，因为这是我在错误消息之前得到的唯一输出：

```
PHPUnit 3.7.8 by Sebastian Bergmann.

Configuration read from (PATH)\phpunit.xml

E....... 
```

我有点困惑，因为 phpunit 的这个错误输出发生在实际测试方法执行之前的输出中。我没有运行任何其他测试方法，所以它必须来自这个错误。

我应该如何让 PHPUnit 在使用会话变量的 silex 路由上工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-11-30T18:13:45.207

# 在下面的评论后编辑

好的，我遇到了同样的问题，在浏览网页一个小时后，我设法通过了测试。

在 Silex 2.0-dev 上，`$app['session.test'] = true`从`WebTestCase`类调用根本不起作用，它需要在引导程序中发生。

实现它的方法很多，这里有两个：

1/ 有`phpunit.xml.dist`

```
<?xml version="1.0" encoding="UTF-8"?>
<phpunit backupGlobals="false"
     backupStaticAttributes="false"
     colors="true"
     convertErrorsToExceptions="true"
     convertNoticesToExceptions="true"
     convertWarningsToExceptions="true"
     processIsolation="false"
     stopOnFailure="false"
     syntaxCheck="false"
     bootstrap="./app.php"
>
    <php>
        <env name="TEST" value="true" />          //-> This is the trick
    </php>
    <testsuites>
        <testsuite name="Your app Test Suite">
            <directory>./tests/</directory>
        </testsuite>
    </testsuites>
</phpunit> 
```

然后在引导程序中

```
$app = new \Silex\Application();

...

$app->register(new \Silex\Provider\SessionServiceProvider(), [
    'session.test' => false !== getenv('TEST')
]);

...

return $app; 
```

2/ 通过扩展`Silex\Application`，您可以将环境传递给构造函数

```
namespace Your\Namespace;

class YourApp extends \Silex\Application
{
    public function __construct($env, array $params = array())
    {
        $this['env'] = $env;

        parent::__construct($params);
    }
} 
```

然后在你的引导程序中

```
$env = // Your logic ...

$app = new \Your\Namespace\YourApp($env);

...

$app->register(new \Silex\Provider\SessionServiceProvider(), [
    'session.test' => 'test' === $app['env'],
]);

...

return $app; 
```

希望有帮助，加油！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T08:15:04.180

好的，我找到了答案。这似乎是 Silex 中的一个错误。

当我在注册标准 FormServiceProvider 之前注册树枝扩展时出现了问题。它不是由树枝扩展内部的任何东西引起的，如果我将整个扩展类剥离为空方法，仍然会发生错误。

因此，在 Silex 应用程序对象中注册 twig 扩展应始终在注册提供程序之后完成，至少在 FormServiceProvider 之后（直到修复错误）。

# shell - 指定用户登录到计算机的 Shell 脚本

> ID：13586450
> 
> 赞同：2
> 
> 时间：2012-11-27T14:31:37.923
> 
> 标签：shell

```
username=$1
freq=$2

checkuser()
{
  if who grep "$1"
  then
  sleep 60
  fi
}

if [ -n "$1" ]
then
echo "Enter username"
read username
checkuser
echo -e "$1 is logged on \a"
echo -e "$1 logged in at `date`">>LOG
checkuser
else
echo "User is not logged on"
fi 
```

我需要将第二个参数集成到我的代码中，它允许用户指定脚本应该在什么时间之后检查谁登录。我目前将它设置为 60 秒，这需要是默认频率。我尝试使用其他功能但无济于事。我想到了这样的事情......

```
if [ "$2" -ne 0 ]
then
freq=$2
else
freq=60 
```

感谢威廉，这非常有帮助！我稍微更改了代码并想出了这个。I now need to add a 3rd argument "X" which when selected just sends a message to the LOGFILE and not to the screen. 我做了尝试，但没有按预期进行。

```
 username=$1
 freq=${2:-10}
 X=$3

 checkuser()
 {
 whoami|grep "$1";
 }

 while checkuser "$username"
 do
 echo -e "$1 is logged on \a"
 echo "$1 logged in at `date`">>LOGFILE
 sleep $freq
 exit 0
 done
 echo "User is not logged in"

 if [ "$3" -ne 1 ]
 then
 echo "$1 logged in at `date`"LOGFILE
 fi 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T14:40:36.497

```
username=$1
freq=${2:-60} # Set a default frequency

checkuser(){ who | grep -q "$1"; }

while ! checkuser "$username"; do
    echo "User is not logged on"    
    sleep $freq
done
echo "$1 is logged on" 
```

另请注意，您可以简化用户名的设置：

```
username=${1:-$( echo "Enter username: "; read u; echo $u; )} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-26T04:36:22.193

一个简单的 shell 脚本，它将用户名作为输入并确定用户当前是否登录。

```
if [[ $# -eq 0 ]]; then
    echo "Usage: " $0 "username"
    exit 1
fi

result="$(who | grep $1 | wc -l)"

if [[ $result -gt 0 ]]; then
    echo "$1 is currently logged in"
else
    echo "$1 is not logged in"
fi

exit 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-28T14:50:05.200

```
echo 'Enter id'
read id
res=`who | grep "$id" | wc -l` 
if [ $res -eq 0 ]
then
    echo 'user is not logged in'
else
    echo 'user is logged in'
fi 
```

# c++ - 何时调用 atexit() 注册的函数

> ID：13586451
> 
> 赞同：11
> 
> 时间：2012-11-27T14:31:39.867
> 
> 标签：c++, destructor, atexit

我想知道注册的函数`atexit()`是在全局变量被销毁之前还是之后被调用的。这是由定义的标准或实现指定的吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-27T14:33:46.693

它是明确定义的，取决于所讨论的对象是在函数注册之前还是之后构造的`atexit()`：

> **3.6.3 终止**
> 
> **3.**如果具有静态存储持续时间的对象的初始化完成在调用之前排序`std::atexit`（参见`<cstdlib>`18.5），则对传递给的函数`std::atexit`的调用在调用对象的析构函数之前排序。如果在`std::atexit`具有静态存储持续时间的对象的初始化完成之前对 的调用进行排序，则对对象的析构函数的调用将在对传递给的函数的调用之前进行排序`std::atexit`。如果对 的调用`std::atexit`在另一个调用之前排序`std::atexit`，则传递给第二个`std::atexit`调用的函数调用将在传递给第一个`std::atexit`调用的函数调用之前排序。

我的外行对上述内容的解释是，在你调用*之前构建的东西在调用**之后*`atexit(handler)`被销毁，反之亦然。我确信有一些微妙之处，但这似乎是基本原则。 *`handler()`*

# infinite-scroll - 如何制作具有无限分页的 UICollectionView？

> ID：13586452
> 
> 赞同：4
> 
> 时间：2012-11-27T14:31:41.217
> 
> 标签：infinite-scroll, uicollectionview, scroll-paging

我有一个 UICollectionView，有 6 个页面，启用了分页，还有一个 UIPageControl。我想要的是，当我来到最后一页时，如果我向右拖动， UICollectionView 会无缝地从第一页重新加载。

```
- (void)scrollViewDidEndDecelerating:(UIScrollView *)sender
{

// The key is repositioning without animation
if (collectionView.contentOffset.x == 0) {
    // user is scrolling to the left from image 1 to image 10.
    // reposition offset to show image 10 that is on the right in the scroll view
    [collectionView scrollRectToVisible:CGRectMake(collectionView.frame.size.width*(pageControl.currentPage-1),0,collectionView.frame.size.width,collectionView.frame.size.height) animated:NO];
}
else if (collectionView.contentOffset.x == 1600) {
    // user is scrolling to the right from image 10 to image 1.
    // reposition offset to show image 1 that is on the left in the scroll view
    [collectionView scrollRectToVisible:CGRectMake(0,0,collectionView.frame.size.width,collectionView.frame.size.height) animated:NO];

}
pageControlUsed = NO;

} 
```

它不像我想要的那样工作。我能做些什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T14:27:36.600

这是我的 UICollectionView 的最终结果（像 UIPickerView 一样的水平滚动）：

```
@implementation UIInfiniteCollectionView

- (void) recenterIfNecessary {
    CGPoint currentOffset = [self contentOffset];
    CGFloat contentWidth = [self contentSize].width;
    // don't just snap to center, since this might be done in the middle of a drag and not aligned.  Make sure we account for that offset
    CGFloat offset = kCenterOffset - currentOffset.x;
    int delta = -round(offset / kCellSize);
    CGFloat shift = (offset + delta * kCellSize);
    offset += shift;
    CGFloat distanceFromCenter = fabs(offset);

    // don't always recenter, just if we get too far from the center.  Eliza recommends a quarter of the content width
    if (distanceFromCenter > (contentWidth / 4.0)) {
        self.contentOffset = CGPointMake(kCenterOffset, currentOffset.y);
        // move subviews back to make it appear to stay still
        for (UIView *subview in self.subviews) {
            CGPoint center = subview.center;
            center.x += offset;
            subview.center = center;
        }
        // add the offset to the index (unless offset is 0, in which case we'll assume this is the first launch and not a mid-scroll)
        if (currentOffset.x > 0) {
            int delta = -round(offset / kCellSize);
            // MODEL UPDATE GOES HERE
        }
    }
}

- (void) layoutSubviews { // called at every frame of scrolling
    [super layoutSubviews];
    [self recenterIfNecessary];
}

@end 
```

希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T01:31:43.720

我一直在使用 Street Scroller 示例为图像创建无限滚动条。这工作正常，直到我想`pagingEnabled = YES;` 围绕recenterIfNecessary 代码设置尝试调整并最终意识到它是contentOffset.x 必须匹配我希望在分页停止时可见的子视图的框架。这真的行不通，`recenterIfNecessary`因为你无法知道它会从`layoutSubviews`. 如果您确实对其进行了正确调整，则子视图可能会从您的手指下弹出。我在`scrollViewDidEndDecelerating`. 到目前为止，我还没有遇到快速滚动的问题。即使`pagingEnabled`是 NO，它也会工作并模拟分页，但如果是 YES，它看起来更自然。

```
- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView {
    [super scrollViewDidEndDecelerating:scrollView];

    CGPoint currentOffset = [self contentOffset];

    // find the subview that is the closest to the currentOffset.
    CGFloat closestOriginX = 999999;
    UIView *closestView = nil;
    for (UIView *v in self.visibleImageViews) {
        CGPoint origin = [self.imageContainerView convertPoint:v.frame.origin toView:self];
        CGFloat distanceToCurrentOffset = fabs(currentOffset.x - origin.x);
        if (distanceToCurrentOffset <= closestOriginX) {
            closestView = v;
            closestOriginX = distanceToCurrentOffset;
        }
    }

    // found the closest view, now find the correct offset
    CGPoint origin = [self.imageContainerView convertPoint:closestView.frame.origin toView:self];
    CGPoint center = [self.imageContainerView convertPoint:closestView.center toView:self];
    CGFloat offsetX = currentOffset.x - origin.x;

    // adjust the centers of the subviews
    [UIView animateWithDuration:0.1 animations:^{
        for (UIView *v in self.visibleImageViews) {
            v.center = [self convertPoint:CGPointMake(v.center.x+offsetX, center.y) toView:self.imageContainerView];
        }
    }];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T03:19:48.693

我没有使用 UICollectionView 进行无限滚动，但是在使用 UIScrollView 执行此操作时，您首先将内容偏移量（而不是使用 scrollRectToVisible）调整到您想要的位置。然后，您遍历滚动条中的每个子视图，并根据用户滚动的方向向右或向左调整它们的坐标。最后，如果任一端超出了您希望它们的范围，请将它们移到另一端。他们是来自苹果的关于如何进行无限滚动的非常好的 WWDC 视频，您可以在这里找到：http: [//developer.apple.com/videos/wwdc/2012/](http://developer.apple.com/videos/wwdc/2012/)

# c# - 如何将 kendoui 下拉列表的选定值绑定到我的模型？

> ID：13586453
> 
> 赞同：4
> 
> 时间：2012-11-27T14:31:49.343
> 
> 标签：c#, asp.net-mvc, kendo-ui, html.dropdownlistfor, cascadingdropdown

我有一个 KendoUI 下拉列表，如下所示：

```
@(Html.Kendo().DropDownList()
                                  .Name("DeviceInterfaces")
                                  .OptionLabel("Select interface...")
                                  .DataTextField("Name")
                                  .DataValueField("Id")
                                  .DataSource(source => source.Read(read => read.Action("GetCascadeDeviceInterfaces", "EventTriggers")))
                            ) 
```

这是一个级联下拉列表，如何将用户选择的任何内容设置为我的模型的属性？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-27T14:47:50.317

没关系，我知道怎么做。

我必须使用 DropDownListFor 而不是 DropDownList，而且 .Name 属性必须与模型的 Id 匹配。

```
@(Html.Kendo().DropDownListFor(m => m.EventTrigger.TriggerType)
.Name("EventTrigger.EventType") 
```

# wpf - WPF 处理丢失的 dll

> ID：13586455
> 
> 赞同：0
> 
> 时间：2012-11-27T14:31:53.863
> 
> 标签：wpf, .net-4.0

我注意到在某些情况下，我不分发应用程序所需的特定 dll，应用程序不提供任何错误，它只是不加载（显示在屏幕上）。它的行为就像你还没有开始它。

有谁知道为什么会这样？

**编辑：**重现步骤：

1.  使用 WPF 应用项目和类库项目 (ReferenceDll) 创建解决方案。
2.  将 WPF 应用程序项目中的引用添加到类库项目。
3.  在类库中，将此方法添加到 Class1

    public int Calculate(int a, int b) { return a + b; }

4.  将此代码放在 App.OnStartup 中：

    ```
    try
    {
        int result = new ReferenceDll.Class1().Calculate(2, 4);
    }
    catch (Exception ex)
    {
        File.WriteAllText(@"D:\Test\error.txt", ex.ToString());
    } 
    ```

5.  构建解决方案，然后从 bin 文件夹中删除 ReferenceDll。运行应用程序。

不会创建文件，不会显示应用程序。即使您在主视图中移动 Try catch 代码，在某些按钮单击事件中，Catch{} 也永远不会被触发并且它会显示非信息性消息

```
AppName has stopped working. 
```

并提供调试选项，这对最终用户没有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T14:40:04.573

如果您没有任何 Trace.WriteLine 语句，那么我建议您添加一些。添加一些到异常处理程序。您也可以使用以下免费工具来捕获跟踪并尝试以这种方式缩小范围。

[http://technet.microsoft.com/en-us/sysinternals/bb896647.aspx](http://technet.microsoft.com/en-us/sysinternals/bb896647.aspx)

您还可以覆盖 app.xaml.cs 中的 Onstartup 方法并从那里实例化您的应用程序并捕获任何异常并输出以进行跟踪。

**更新**

我已经尝试了您在更新中指出的步骤，并且加载的应用程序没有任何问题。我建议的下一件事是检查您已部署到的环境中的 .net 框架版本。如果您需要帮助，请查看此链接：

[http://msdn.microsoft.com/en-us/kb/kbarticle.aspx?id=318785](http://msdn.microsoft.com/en-us/kb/kbarticle.aspx?id=318785)

**更新**

将您的错误日志记录在一个处理程序中，如该问题的答案中的处理程序，您将看到错误。刚刚用你的例子试过这个，它奏效了。该错误会告诉您确切的问题：

System.IO.FileNotFoundException：无法加载文件或程序集“ReferenceDll，版本=1.0.0.0，Culture=neutral，PublicKeyToken=null”或其依赖项之一。该系统找不到指定的文件。文件名：System.Windows.Application 中 WPFApp.App.OnStartup(StartupEventArgs e) 中的“ReferenceDll，版本=1.0.0.0，Culture=neutral，PublicKeyToken=null”。<.ctor>b__1（未使用对象）在 System.Windows .Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs) 在 MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method, Object args, Int32 numArgs, Delegate catchHandler)

警告：程序集绑定日志记录已关闭。要启用程序集绑定失败日志记录，请将注册表值 [HKLM\Software\Microsoft\Fusion!EnableLog] (DWORD) 设置为 1。注意：与程序集绑定失败日志记录相关的一些性能损失。要关闭此功能，请删除注册表值 [HKLM\Software\Microsoft\Fusion!EnableLog

[WPF 窗口在启动时崩溃，或者它启动但挂起并且不呈现内容](https://stackoverflow.com/questions/9066930/wpf-window-crashes-on-startup-or-it-starts-but-hangs-and-does-not-render-conten)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T15:24:38.023

当在辅助线程上引发异常时，可能会发生这种情况。[请参阅此页面](http://msdn.microsoft.com/en-us/library/vstudio/bb625944%28v=vs.90%29.aspx)上的备注部分：

> 独立或浏览器托管的 WPF 应用程序使用 Application 类来检测未处理的异常（请参阅 DispatcherUnhandledException）。但是，Application 只能检测在 Application 类正在运行的同一线程上引发的未处理异常。通常，一个应用程序会有一个主用户界面 (UI) 线程，因此 Application 类的未处理异常检测行为就足够了。但是，主 UI 线程上的 Application 类不会自动检测在辅助线程上引发的未处理异常。

您可以尝试使用此事件来~~捕获~~检测异常并记录错误： [AppDomain.UnhandledException Event](http://msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception%28v=vs.100%29.aspx)

```
AppDomain currentDomain = AppDomain.CurrentDomain;
currentDomain.UnhandledException += new UnhandledExceptionEventHandler(MyHandler);

static void MyHandler(object sender, UnhandledExceptionEventArgs args) {
   Exception e = (Exception) args.ExceptionObject;
   Console.WriteLine("MyHandler caught : " + e.Message);
} 
```

## 更新：

除了线程问题之外，如果您将 try...catch 块放在错误的位置，它也可能是原因。考虑这个例子：

```
public partial class App : Application
{
    protected override void OnStartup(StartupEventArgs e)
    {
        base.OnStartup(e);

        Do();

    }

    private void Do()
    {
        try
        {
            int result = new ClassLibrary1.Class1().Calculate(2, 4);
        }
        catch (System.Exception ex)
        {
            Console.WriteLine("MyHandler caught by try...catch: " + ex.Message);
        }
    }
} 
```

这将导致调用 Do() 的行出现异常，因为此处的 CLR 尝试在此时解析程序集。未捕获异常并且应用程序终止。

但如果你试试这个：

```
public partial class App : Application
{
    protected override void OnStartup(StartupEventArgs e)
    {
        base.OnStartup(e);

        try
        {
            Do();
        }
        catch (System.Exception ex)
        {
            Console.WriteLine("MyHandler caught by try...catch: " + ex.Message);
        }
    }

    private void Do()
    {
        int result = new ClassLibrary1.Class1().Calculate(2, 4);
    }
} 
```

输出是：

> MyHandler 被 try...catch 捕获：无法加载文件或程序集 'ClassLibrary1，Version=1.0.0.0，Culture=neutral，PublicKeyToken=null' 或其依赖项之一。该系统找不到指定的文件。

请注意，当您在引用程序集的同一函数中订阅 UnhandledException 事件时，它不会被触发。这也有效：

```
 protected override void OnStartup(StartupEventArgs e)
    {
        base.OnStartup(e);

        AppDomain currentDomain = AppDomain.CurrentDomain;
        currentDomain.UnhandledException += new UnhandledExceptionEventHandler(
            (sender, args) =>
            {
                Exception ex = (Exception)args.ExceptionObject;
                Console.WriteLine("MyHandler caught by UnhandledException handler: " + ex.Message);
            });

        Do();
    }

    private void Do()
    {
        int result = new ClassLibrary1.Class1().Calculate(2, 4);
    } 
```

结果：

> MyHandler 被 UnhandledException 处理程序捕获：无法加载文件或程序集 'ClassLibrary1，Version=1.0.0.0，Culture=neutral，PublicKeyToken=null' 或其依赖项之一。该系统找不到指定的文件。

希望能帮助到你。

# android - 使用 sms 关键字为 android 启动警报

> ID：13586458
> 
> 赞同：0
> 
> 时间：2012-11-27T14:31:58.573
> 
> 标签：android, alarm

先生，我真的不知道如何让我的代码工作。它只是无法启动警报。它只是启动分配的活动并跳过警报部分。我究竟做错了什么。提前感谢您的帮助

```
public class EAlarmReceiver extends BroadcastReceiver {

public static String sender;
public void onReceive(Context context, Intent intent) {
    // TODO Auto-generated method stub
    Bundle bundle = intent.getExtras(); 
    Object[] pdusObj = (Object[]) bundle.get("pdus"); 
    SmsMessage[] messages = new SmsMessage[pdusObj.length]; 
    for (int i = 0; i<pdusObj.length; i++) 
    { 
            messages[i] = SmsMessage.createFromPdu ((byte[]) 
            pdusObj[i]); 
            sender = messages[i].getOriginatingAddress();
    } 

    for (SmsMessage msg : messages) {
        if (msg.getMessageBody().contains("firealert")) {

            Calendar cal = Calendar.getInstance();
            cal.add(Calendar.SECOND, 0);

            Intent i = new Intent(context, ReceiverInterface.class);
            PendingIntent pendingIntent = PendingIntent.getActivity(context,
                12345, i, PendingIntent.FLAG_CANCEL_CURRENT);
            AlarmManager am = 
                (AlarmManager)context.getSystemService(Activity.ALARM_SERVICE);
            am.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(),
                    pendingIntent);
        }//end if
    }//end for

}// end onreceive 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T14:40:04.757

活动开始应该让您了解正在发生的事情。除非正在触发警报，否则启动活动的代码没有意义。警报实际上正在被触发，但是由于您指定了当前时间 (cal.add(Calendar.SECOND, 0))，它会立即触发，启动相应的 PendingIntent。将所需时间添加到日历中，以便稍后触发警报。

# sitecore - Sitecore - WFFM 占位符设置无法从文件夹添加占位符

> ID：13586462
> 
> 赞同：1
> 
> 时间：2012-11-27T14:32:04.133
> 
> 标签：sitecore, sitecore6, web-forms-for-marketers

我正在研究 Sitecore 6.5（更新 5）解决方案。我在某些文件夹层次结构中有占位符（只是为了根据功能将它们分开），所有的内容和演示控件都可以在这个占位符文件夹中正常工作，WFFM 除外。

我将 WFFM 2.3 用于表单，当我尝试分配占位符时，设置未保存。如果我使用“占位符设置”（根）文件夹中的占位符，那么这些占位符将正确保存。如何从文件夹中添加占位符？我附上了屏幕截图以显示文件夹结构。

在图像中，内容是从根目录中选择的，但不保存其他占位符。

![在此处输入图像描述](../Images/aa4cdfe3ffce0e5ddfa9db10bf2f3cff.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T16:08:53.243

这似乎是 WFFM 模块中的一个错误。有一个 Sitecore 查询用于返回所有允许的占位符，并且此查询仅返回作为`Placeholder Settings`项目的直接子级的占位符，并且不会递归搜索有效占位符。

[我建议在http://support.sitecore.net](http://support.sitecore.net)下创建一个 Sitecore 票证，并希望有一个修补程序。

# couchdb - iriscouch 基本身份验证不起作用

> ID：13586464
> 
> 赞同：0
> 
> 时间：2012-11-27T14:32:11.650
> 
> 标签：couchdb

我的 iriscouch 设置中只有 1 个服务器管理员。

我可以通过 cookie auth 成功登录

```
> POST https://myserv.iriscouch.com/_session
      name=username&password=password

{"ok":true,"name":null,"roles":["_admin"]} 
```

但是基本身份验证不起作用

```
> PUT https://username:password@myserv.iriscouch.com/mynewdb

{"error":"unauthorized","reason":"You are not a server admin."} 
```

我不知道是 iriscouch 还是 couchdb 配置问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T14:53:24.520

正如 Dominic 在评论中建议的那样，我检查了我的客户原始请求并注意到`Authorization`标头未正确生成

# php - 在 NotORM 中使用 JOIN

> ID：13586467
> 
> 赞同：0
> 
> 时间：2012-11-27T14:32:23.860
> 
> 标签：php, sql, notorm

一直在尝试以下代码

```
$notorm->table()->select("table.*, table2.column, table2.table3.column2"); 
```

从[http://sql-cross-queries.freexit.eu/dibi/notorm](http://sql-cross-queries.freexit.eu/dibi/notorm)创建一个 JOIN 语句，但无济于事。我错过了什么吗？

我有报告（时间戳、事件 ID、位置 ID）、事件（事件 ID、事件描述、位置 ID）和位置（位置 ID、位置名称）。我试图通过加入报告、事件和位置来获取时间戳、事件名称和位置名称。所以我使用了以下语句：

```
$notorm->reports()->select("reports.*, incident.incident_id, incident.location.location_id"); 
```

但它没有返回任何东西。但是，以下声明：

```
$notorm->reports()->select("reports.*"); 
```

返回报告。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T15:15:23.967

试试这个，不是 100% 肯定，但值得一试。

```
$notorm->reports()->join("reports", "LEFT JOIN incident ON reports.incident_id = incident.incident_id")
->join("reports", "LEFT JOIN location ON reports.location_id = location.location_id")
->select("reports.timestamp, incident.incident_desc, location.location_name"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-06T02:44:03.857

在您的`table`定义中，必须存在一个字段`table2_id`名称

# c++ - C ++：出现一个挥之不去的“幽灵”窗口..？

> ID：13586472
> 
> 赞同：2
> 
> 时间：2012-11-27T14:32:31.560
> 
> 标签：c++, windows, winapi, user-interface, console

我的程序——除其他外——改变了控制台窗口的外观（主要是窗口大小和边框）。
现在在*我的*计算机上，目前一切正常，但是当我在*VirtualBox*或*另一*台计算机上运行应用程序时，我得到以下信息：

![怎么了](../Images/b212a26d002521b0333943589e90eee2.png)

图像左上角的窗口实际上并不是一个窗口。这是一个窗口的图像，您无法单击。（鼠标点击通过它）
您可以通过在桌面上拉伸选择矩形来摆脱它，或者如果您突出显示（例如）它下方的按钮。此外，您可以在其上移动一个窗口，使其完全消失。

图片右下角的黑色矩形是我的控制台窗口，显示正确。

我的问题是，如何用 C++ 摆脱“幽灵”窗口？
我试着用谷歌搜索了一下，但我能找到的是`ChangeDisplaySettings(0, 0);`，它在我的电脑上什么也没做（可能是因为我的电脑上什至没有这个问题），在 VirtualBox 中，它首先似乎暂时使控制台窗口全屏，然后回到原来的样子。（第一次运行应用程序时屏幕闪烁）
虽然它确实删除了幽灵窗口，但我不希望屏幕像那样闪烁，所以这不是我想要的。

编辑：
由于我无法真正弄清楚与此问题相关的代码是什么，因此我将转储几乎所有与在我的程序中更改窗口本身有关的代码。

```
CSBIEx.cbSize = sizeof(CONSOLE_SCREEN_BUFFER_INFOEX);
GetConsoleScreenBufferInfoEx(hCon, &CSBIEx);
CSBIEx.dwSize.X = 49;
CSBIEx.dwSize.Y = 21;
SetConsoleScreenBufferInfoEx(hCon, &CSBIEx);
srWnd.Bottom = 20;
srWnd.Left = 0;
srWnd.Right = 48;
srWnd.Top = 0;
SetConsoleWindowInfo(hCon, TRUE, &srWnd);
GetClientRect(hWnd, &rClnt);
rClnt.top += 1;
rClnt.bottom -= 2;
rClnt.right -= 1;
SetWindowLongPtr(hWnd, GWL_STYLE, WS_POPUP);
exStyle = GetWindowLongPtr(hWnd, GWL_EXSTYLE);
exStyle &= ~WS_EX_CLIENTEDGE;
SetWindowLongPtr(hWnd, GWL_EXSTYLE, exStyle);
BringWindowToTop(hWnd);
SetWindowPos(hWnd, HWND_TOPMOST, ((rScr.right / 2) - rClnt.right / 2) - 1, (rScr.bottom / 2) - rClnt.bottom / 2, 0, 0, SWP_FRAMECHANGED | SWP_DRAWFRAME | SWP_NOSIZE);
SetWindowRgn(hWnd, CreateRectRgnIndirect(&rClnt), 1);
ShowWindow(hWnd, SW_SHOWNORMAL);
//ChangeDisplaySettings(0, 0); 
```

第二次编辑：
我不知道它是否有任何帮助，但我注意到如果我使用它`ChangeDisplaySettings(NULL, 0);`而不是`ChangeDisplaySettings(0, 0);`它不会做任何事情。考虑到这`NULL`是`#define`d `0`..
如果没有人能弄清楚任何事情，我可能最终会使用`ChangeDisplaySettings(0, 0);`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T13:48:28.750

```
InvalidateRect(NULL, NULL, TRUE); 
```

是我一直在寻找的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T13:23:09.800

您是否在计算机上运行“Aero”主题？如果是这样，请切换到经典主题。Betcha，您将看到问题本身。我认为您的应用程序没有正确处理 WM_PAINT 消息。Aero 主题发送的 WM_PAINT 消息要少得多。操作系统使用它保存的位图进行绘画。

编辑：尝试使用新尺寸调用这些：

```
BOOL WINAPI SetConsoleDisplayMode(
    _In_       HANDLE hConsoleOutput,
    _In_       DWORD dwFlags,
    _Out_opt_  PCOORD lpNewScreenBufferDimensions
); 
```

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms686033%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686033%28v=vs.85%29.aspx)

```
BOOL WINAPI SetConsoleWindowInfo(
  _In_  HANDLE hConsoleOutput,
  _In_  BOOL bAbsolute,
  _In_  const SMALL_RECT *lpConsoleWindow
); 
```

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms686125%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686125%28v=vs.85%29.aspx)

您也可以尝试使用 DispatchMessage 向自己发送 WM_PAINT 消息。

# java - spring xml配置在两个单独的xml文件中？

> ID：13586474
> 
> 赞同：0
> 
> 时间：2012-11-27T14:32:41.280
> 
> 标签：java, spring

我正在尝试使用一个弹簧配置文件创建一个项目。但在配置文件中，所有 bean 都是没有任何实现的接口。我会再创建一个包含所有实现的项目。我也可以对第一个项目的所有 bean（接口）使用 abstract = true ，以便用户无法使用它们。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T14:37:41.237

我无法想象你想在 spring 配置文件中指定接口的情况。所以我认为你也没有必要。您可以使用它`abstract=true`来创建可重用或部分 bean 定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T14:39:34.103

你不能在你的 spring 配置中指定接口，因为它们不能被实例化。您到底要归档什么？

# eclipse - Eclipse似乎没有编译servlet，导致java.lang.ClassNotFoundException

> ID：13586475
> 
> 赞同：1
> 
> 时间：2012-11-27T14:32:53.567
> 
> 标签：eclipse, servlets, classnotfoundexception

目前我正在使用 Ubuntu 12.04LTS 、 Eclipse IDE 和 Apache Tomcat 7.0.27 并且我没有完成工作。

我在“WebContent/index.jsp”中创建了一个简单的 jsp 页面“index.jsp”。我制作了一个名为“EmployeeClass”的servlet，它位于“com.pack.web”包中。在 Jsp 页面中，我有一个带有 get 方法和一个操作的表单，如下所示：

```
<form method="GET" action="hidden.do"> 
```

在 web.xml 我也有：

```
<servlet>
    <servlet-name>Searcher</servlet-name>
    <servlet-class>com.pack.web.EmployeeClass</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>Searcher</servlet-name>
    <url-pattern>/hidden.do</url-pattern>
</servlet-mapping> 
```

我做了一个简单的servlet“EmployeeClass”，它在包中：

```
package com.pack.web; 
```

在这个 servlet 中，我有一个 doGet 方法：

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    PrintWriter out = response.getWriter();
    out.println("Something is happening");
} 
```

然后我终于运行了我的项目，在点击提交按钮后，砰我有这个：

```
javax.servlet.ServletException: Error instantiating servlet class com.pack.web.EmployeeClass
    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
    java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    java.lang.Thread.run(Thread.java:662) 
```

根本原因

```
java.lang.ClassNotFoundException: com.pack.web.EmployeeClass
    org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1711)
    org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556)
    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
    java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T02:49:46.237

终于在 2 周 15 小时 34 分钟后，我找到了解决方案。通过打开显然意外关闭的自动构建解决了该问题。

> 项目 -> 自动构建

# security - 为什么客户端hello是sslv2时握手协议是sslv3

> ID：13586476
> 
> 赞同：2
> 
> 时间：2012-11-27T14:32:54.300
> 
> 标签：security, http, ssl, https, handshake

我们在尝试使用 windows xp sp3（即 v6）上的 wininet 连接的客户端应用程序获得成功的 SSL 连接时遇到问题。客户端 hello 看着我，为什么 hello 将其版本声明为 SSL 2.0，然后将握手版本声明为 SSL 3.0？使用 wininet 的应用程序中是否存在错误编码？

```
SSLv2 Record Layer: Client Hello
    [Version: SSL 2.0 (0x0002)]  <---------------------
    Length: 76
    Handshake Message Type: Client Hello (1)
    Version: SSL 3.0 (0x0300)    <---------------------
    Cipher Spec Length: 51
    Session ID Length: 0
    Challenge Length: 16
    Cipher Specs (17 specs)
    Challenge 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T14:47:26.807

SSLv3 和 TLSv1.x 具有兼容模式，以防客户端也支持 v2 服务器，如[TLS 规范（*与 SSL 的向后兼容性*）](https://www.rfc-editor.org/rfc/rfc2246#appendix-E)中所述。

一些客户支持这一点。例如，Oracle/Sun Java 有一个`SSLv2Hello`伪协议，它使用 SSLv2 Hello，但实际上并不支持 SSLv2。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T12:08:19.347

我知道这个问题已经解决，但我会分享一些关于这个主题的更多信息，这可能对观众有用

“客户端发送一个 SSLv2 ClientHello，以便只理解 SSLv2 的服务器可以处理该消息，并继续进行 SSLv2 握手。但是 SSLv2 ClientHello 也说“顺便说一下，我知道 SSLv3，所以如果你也知道 SSLv3，让我们使用 SSLv3 而不是 SSLv2”，这通常会发生（现在只知道 SSLv2 的服务器极为罕见）。”

我从 Thomas Pornin 的评论中获取了它，链接 [https://security.stackexchange.com/questions/34827/why-clients-offer-handshaking-with-ssl-2-0-protocol](https://security.stackexchange.com/questions/34827/why-clients-offer-handshaking-with-ssl-2-0-protocol)

# php - 带有游标的存储过程以奇怪的方式执行

> ID：13586477
> 
> 赞同：4
> 
> 时间：2012-11-27T14:32:55.967
> 
> 标签：php, mysql, stored-procedures

我有一个存储过程，它应该使用游标处理表中的行。该过程大部分时间都有效，但有时它不能完全执行。我知道这一点是因为我有一个简单的调试工具，嵌入到代码中，它将特定的行和变量记录到专用的调试表中。最有趣的是，从 PHP 运行时总是会出现该问题。如果我使用 mysql 客户端，我从来没有遇到过这个问题。

该过程（此处以某种缩短的方式呈现）如下：

```
CREATE PROCEDURE findnextedge(IN lastid BIGINT)
findnext_context:BEGIN
  DECLARE stop BOOLEAN DEFAULT FALSE;
  DECLARE count INT DEFAULT 0;
  DECLARE cur_fid BIGINT DEFAULT 0;
  DECLARE cur_pid1 BIGINT DEFAULT 0;
  DECLARE cur_pid2 BIGINT DEFAULT 0;
  DECLARE cur CURSOR FOR SELECT fid, pid1, pid2 FROM edges WHERE pid1 = lastid;
  DECLARE CONTINUE HANDLER FOR NOT FOUND SET stop = TRUE;

  CALL debuglog(0, 'findnextedge', 'lastid', lastid, NULL, NULL, NULL, NULL);
  SELECT SQL_CALC_FOUND_ROWS fid FROM edges WHERE pid1 = lastid;
  SET count = FOUND_ROWS();
  CALL debuglog(1, 'findnextedge', 'count', count, NULL, NULL, NULL, NULL);
  IF count = 0 THEN
    DELETE FROM paths WHERE pid1 = lastid AND pid2 = 0;
    SELECT COUNT(*) INTO count FROM paths WHERE pid2 = 0;
    CALL debuglog(2, 'findnextedge', 'count', count, NULL, NULL, NULL, NULL);
    IF count = 0 THEN
      SET @count = 1;
    END IF;
    LEAVE findnext_context;
  END IF;

  DELETE FROM paths WHERE pid1 = lastid AND pid2 = 0 ORDER BY pid1 LIMIT 1;

  OPEN cur;
  CALL debuglog(6, 'findnextedge', 'open', TRUE, NULL, NULL, NULL, NULL);
  REPEAT
    FETCH cur INTO cur_fid, cur_pid1, cur_pid2;
    CALL debuglog(7, 'findnextedge', 'stop', stop, NULL, NULL, NULL, NULL);
    IF stop = FALSE THEN

      CALL debuglog(3, 'findnextedge', 'cur_fid', cur_fid, 'cur_pid1', cur_pid1, 'cur_pid2', cur_pid2);

      // DO MAIN JOB
      // ...

      CALL debuglog(5, 'findnextedge', NULL, NULL, NULL, NULL, NULL, NULL);

    END IF;
    CALL debuglog(8, 'findnextedge', 'stop', stop, NULL, NULL, NULL, NULL);
    UNTIL stop = TRUE
  END REPEAT;

  CLOSE cur;
END; 
```

出现问题时产生的整个输出：

```
point   context name1   value1  name2   value2  name3   value3  counter time
    0   findnext    lastid  0   NULL    NULL    NULL    NULL    0   2012-11-27 18:29:56
    1   findnext    count   1   NULL    NULL    NULL    NULL    1   2012-11-27 18:29:56
    6   findnext    open    1   NULL    NULL    NULL    NULL    2   2012-11-27 18:29:56
    7   findnext    stop    0   NULL    NULL    NULL    NULL    3   2012-11-27 18:29:56 
```

根据日志，在第 7 点，刚刚获取游标`stop`值为 false，但执行既没有到达第 3 点，也没有到达第 8 点。

看起来发生了一些内部错误，但我不确定如何捕获它。奇怪的是，这种情况有时会发生在相同的数据上，否则会起作用。

PS MySQL 版本 5.0.51b，PHP 5.2.6。

PSS 我设法找到了一个相关的问题 - [Calling a Stored Procedure Within a Cursor Loop, without Tripping the Continue Handler](https://stackoverflow.com/questions/10623588/calling-a-stored-procedure-within-a-cursor-loop-without-tripping-the-continue-h)。正如我的过程的名称所暗示的那样，它是从外部过程的循环内部调用的（顺便说一下，它有一个通过“路径”表的循环和另一个继续处理程序），所以它类似于那些情况，并且可能是有点重要。我已经尝试了链接问题的解决方案，但它也没有帮助。

**找到了解决方案，答案贴在下面**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T16:08:46.110

停止循环的处理程序，如：

```
 DECLARE CONTINUE HANDLER FOR NOT FOUND SET stop = TRUE; 
```

对整个过程是全局的。

结果，它很可能会捕获其他未找到的事件，而不是来自游标提取，并导致循环提前退出。

尝试在光标获取周围使用 begin end 块*，*并在那里声明一个处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T19:46:38.723

我已经解决了这个问题，尽管它的完成方式对我来说似乎很奇怪。

这些行：

```
SELECT SQL_CALC_FOUND_ROWS fid FROM edges WHERE pid1 = lastid;
SET count = FOUND_ROWS(); 
```

替换为简化：

```
SELECT COUNT(*) INTO count FROM edges WHERE pid1 = lastid; 
```

这没有缺陷。

相同的东西最初用 2 行编码的原因是我一开始没有调试表，我通过`SELECT`'s 控制执行流程。

似乎**存储过程不喜欢将某些东西`SELECT`编入（不可用）控制台**。在我的情况下，这导致了不一致的行为：在相同数据上的某些任意测试运行中，程序放弃了执行。如果有人可以阐明这种行为，我很乐意接受这个答案，而不是我的。

# c# - 一段时间后如何取消异步任务

> ID：13586479
> 
> 赞同：2
> 
> 时间：2012-11-27T14:32:57.097
> 
> 标签：c#, microsoft-metro, windows-runtime, async-await

在我的 Windows Store 应用程序中，我有一个方法

```
public async static Task InitAds()
{
    Debug.WriteLine("API: Loading Ad images");
    await Task.WhenAll(ads.Select(l => l.Value).Where(l=>l!=null).Select(l => l.StartRotation()));
 } 
```

我用来下载和初始化（下载，解析|项目中的广告。这个方法在调用时是等待的

```
...
await AdReader.InitAds()
... 
```

问题是广告服务器有时响应非常缓慢。我想要一个超时时间，比如说这个方法运行 10 秒。如果它没有在这个超时时间内完成，我希望它被杀死并且我的代码继续。

实现这一点的最佳方法是什么？我发现[如何在等待中取消任务？](https://stackoverflow.com/questions/10134310/how-to-cancel-a-task-in-await)但它使用TaskFactory，当我尝试这种方法并在Task.Run中调用我的方法时，它不会等待并且代码继续。

**编辑：**

StartRotation 也是一个异步方法调用另一个异步方法

```
public async Task StartRotation(CancellationToken ct)
{
        if (Images.Count == 1)
        {
            await Image.LoadAndSaveImage(ct);
        }

        if (Images.Count <2) return;

        foreach (var img in Images)
        {
            await img.LoadAndSaveImage(ct);
        }

        Delay = Image.Delay;
        DispatcherTimer dt = new DispatcherTimer();
        dt.Interval = TimeSpan.FromMilliseconds(Delay);
        dt.Tick += (s, e) =>
        {
            ++index;
            if (index > Images.Count - 1)
            {
                index = 0;
            }
            Image = Images[index];
        };
        dt.Start();
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T14:53:09.697

取消是合作的。你只需要传入`CancellationToken`你的`StartRotation`：

```
public async static Task InitAds(CancellationToken token)
{
  Debug.WriteLine("API: Loading Ad images");
  await Task.WhenAll(ads.Select(l => l.Value).Where(l=>l!=null).Select(l => l.StartRotation(token)));
} 
```

然后这样称呼它：

```
var cts = new CancellationTokenSource(TimeSpan.FromSeconds(10));
await InitAds(cts.Token); 
```

# php - yii：验证多个模型

> ID：13586489
> 
> 赞同：2
> 
> 时间：2012-11-27T14:33:48.200
> 
> 标签：php, validation, yii

我有一个 Competition 模型，里面有很多 Entry 模型。

[**编辑**]架构看起来（大致）像这样：

竞赛：

> 编号 INT(11)
> 
> 名称 VARCHAR(50)
> 
> 日期日期时间

入口：

> 编号 INT(11)
> 
> 竞争ID INT(11)
> 
> user_id INT(11)
> 
> 回答 VARCHAR(50)
> 
> isWinner INT(1)

在我`pickWinner`看来，我有一个循环遍历所有相关条目的表单 - 提供该`isWinner`字段以允许用户选择一个条目作为获胜者。保存相关模型等是非常标准的，并且一切正常。

我正在尝试验证表单，以便至少有一个 Entry 模型`isWinner`设置为 true（用户必须选择至少一个获胜者）。

我显然不能将验证规则应用于 Entry 模型——因为每个模型只知道自己而不知道其他模型的值。

只有一个 Entry 模型应设置为获胜者 - 如何向 Competition 添加验证规则，以便它可以检测到其子 Entry 模型之一已`isWinner`设置为 true？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T17:26:04.803

~~实现这一点的一种方法是添加与 Competition 模型的关系以检测它是否有获胜者，例如；~~

 ~~```
public function relations()
{
    return array(
        ...
        'winners' => array(self::STAT, 'Entry', 'competition_id', 'condition'=>'`t`.`isWinner` = true'),
        ...
    );
} 
```~~ 

然后以下应该返回给定比赛的获胜者人数：

```
$competition = Competition::model()->findByPk($id);
$winners = $competition->winners; 
```

~~未经测试，因此您可能需要稍作改动。~~

**编辑**

好的，要在保存之前获取此信息，您可以执行以下操作：例如，如果在您的`pickWinner`视图中，您有每个模型的字段并且它作为数组提交回来，例如`$_POST[Entry][$model->id]['isWinner']`每个模型，您可以不简单地循环通过那些确保一个设置为真？例如：

```
$winners = 0;
foreach(array_keys($_POST[Entry]) as $key)
{
    if($_POST[Entry][$key]['isWinner']=='true')
        $winners++;
}

if($winners==0)
{
    echo "You selected no winners.";
} else if($winners>1) {
    echo "You selected too many winners.";
} else if($winners==1) {
    echo "Woot, 1 winner!";
} 
```

同样，这取决于您的`pickWinner`表单的布局方式。

# c# - “握手”身份验证 WCF

> ID：13586491
> 
> 赞同：0
> 
> 时间：2012-11-27T14:33:57.793
> 
> 标签：c#, wcf, security

我想创建一个具有自定义身份验证的服务。我希望对用户进行身份验证的方式如下：

1.  客户端连接到服务。

2.  服务生成一个随机数让我们说 1234 并将该数字发送给客户端

3.  然后客户端应该添加数字（稍后我将使用更好的哈希）所以客户端发送 10

4.  服务器执行相同的哈希算法并期望收到 10

5.  服务器收到 10 然后它验证用户并且用户能够开始使用该服务。

不过，我有一些基本问题。如果我使用 security = "none" 那么消息会被加密吗？换句话说，如果我使用 security = "none" 我知道用户不必经过身份验证，但消息是否以纯文本形式发送到服务？**如何强制加密连接而无需对用户进行身份验证？**我想限制用户嗅探包。我不介意他们连接到服务。如果他们连接到该服务，我只想让他们看到他们发送的消息，而不是其他人的消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T14:53:13.883

对于与服务器的加密通信，无需验证用户身份，您可以使用传输或消息级别的安全性。

有关详细信息，请参阅以下文章：

1.  [模式和实践改进 Web 服务安全指南](http://wcfsecurityguide.codeplex.com/wikipage?title=Ch%2007%20-%20Message%20and%20Transport%20Security%20in%20WCF)
2.  [传输级安全](http://msdn.microsoft.com/en-us/library/vstudio/hh323709%28v=vs.100%29.aspx)
3.  [配置 HTTP 和 HTTPS](http://msdn.microsoft.com/en-us/library/ms733768.aspx)
4.  [绑定和安全](http://msdn.microsoft.com/en-us/library/ms731172.aspx)

一般建议：不要发明自己的授权/身份验证/加密协议，除非您是世界上最伟大的信息安全/密码学专家之一。使用市场上已有的协议。

您所描述的根本不是握手，因为它**仅**受这样一个事实的保护，即攻击者现在没有您的哈希函数。这种假设对于加密/身份验证协议来说是非常糟糕的基础。

# android - 修复了所有活动的操作栏

> ID：13586492
> 
> 赞同：0
> 
> 时间：2012-11-27T14:34:02.257
> 
> 标签：android, actionbarsherlock

如何在所有活动中保持我的操作栏固定？每当我启动一个新意图时，上面的操作栏都会刷新。当我浏览页面时如何保持它固定？（只有动作栏下方的那些会改变）我已经在 layout.xml 中声明了我的动作项，并为我的动作栏使用了 actionbarsherlock。

谢谢！

# java - 如何更改 JTextPane 的输入属性？

> ID：13586495
> 
> 赞同：2
> 
> 时间：2012-11-27T14:34:05.423
> 
> 标签：java, swing

我使用了一个 JButton，当单击该按钮时，运行这些代码：

```
StyledDocument doc = (StyledDocument) textPane.getDocument(); 
MutableAttributeSet attr = new SimpleAttributeSet(); 
int p0=textPane.getSelectionStart();
int p1=textPane.getSelectionEnd();
if(p0!=p1){
   StyleConstants.setForeground(attr, Color.RED); 
   doc.setCharacterAttributes(p0,p1-p0, attr,false);
}
textPane.getInputAttributes().addAttributes(attr); 
```

从 p0 到 p1 的字符确实变成了红色

但是我输入的字符仍然是黑色的，而不是红色的:(

例子：

我输入“12345”并选择“234”。

新的5仍然是黑色的。

![在此处输入图像描述](../Images/2717881f7507be0d62668d06bbcdc050.png)

但是如果我输入“1234”并选择“234”。

新的 5 将是红色的。

即使没有“textPane.getInputAttributes().addAttributes(attr);”

![在此处输入图像描述](../Images/3cd981ff536891d3920a039b38966d16.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T15:40:55.090

问题是 getInputAttribute 反映了当前插入符号位置的字符属性。

1.  您选择“234”（插入符号在 4 之后）--> InputAttributes 反映“234”的那些
2.  您在“234”和当前 InputAttributes （应该是相同的）上应用红色样式前景
3.  在 "5"-->InputAttributes 更新并反映 "5" 之后移动插入符号

现在，这里有一些代码可以让自己受到启发（这不是真正可操作的），您可能必须听取插入符号的移动（如果不知道您要实现什么就很难说出来）：

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JTextPane;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.text.MutableAttributeSet;
import javax.swing.text.SimpleAttributeSet;
import javax.swing.text.StyleConstants;
import javax.swing.text.StyledDocument;

public class TestTextPane {

    protected void initUI() {
        JFrame frame = new JFrame(TestTextPane.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        final JTextPane textPane2 = new JTextPane();
        textPane2.setText("12345");
        frame.add(textPane2);
        JButton button = new JButton("Make it red");
        button.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                final SimpleAttributeSet set = new SimpleAttributeSet();
                StyleConstants.setForeground(set, Color.RED);
                int p0 = textPane2.getSelectionStart();
                int p1 = textPane2.getSelectionEnd();
                if (p0 != p1) {
                    StyledDocument doc = textPane2.getStyledDocument();
                    doc.setCharacterAttributes(p0, p1 - p0, set, false);
                }
                SwingUtilities.invokeLater(new Runnable() {
                    @Override
                    public void run() {
                        textPane2.getCaret().setDot(textPane2.getText().length());
                        MutableAttributeSet inputAttributes = textPane2.getInputAttributes();
                        inputAttributes.addAttributes(set);
                    }
                });

            }
        });
        button.setFocusable(false);
        frame.add(button, BorderLayout.SOUTH);
        frame.setSize(600, 400);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        try {
            UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        } catch (ClassNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (InstantiationException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (UnsupportedLookAndFeelException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                TestTextPane t = new TestTextPane();
                t.initUI();
            }
        });
    }

} 
```

# c# - 允许公共数据类型为空/空值

> ID：13586497
> 
> 赞同：0
> 
> 时间：2012-11-27T14:34:10.513
> 
> 标签：c#, parsing, null

通过 Web 表单上传文件并将其内容解析到列表中如何在解析 C.MN、C.LN、C.Val 时允许 null 或空值这三个是这样声明的公共数据类型

```
Namespace datatypes

       Public class Uploads
  {

        Public long Mn  {get; set;}
        Public int LN     { get;set    }
         Public int Val    {Get;Set}
    }

  List<Uploads> CDU = new List<Uploads>();
                string[] fields;

                string data = read.ReadLine();
                while ((data = read.ReadLine()) != null)
                {
                    if (data.Length != 0)
                    {
                        Uploads C = new Uploads();
                        fields = data.Split(',');
                        C.LN = Convert.ToInt32(fields[0]);
                        C.MN = Convert.ToInt64(fields[1]);                           
                        C.Val = Convert.ToInt32(fields[2]);
                        CDU.Add(C); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T14:35:56.957

简而言之，您必须使用可为空的值类型，例如

```
public class Uploads
{
    public long? Mn { get; set; }
    public int? LN { get; set; }
    public int? Val { get; set; }
} 
```

当然，您需要确定是给它们一个值还是将它们保留为空，大概基于字符串是否为空。

例如：

```
C.LN = fields[0] == "" ? (int?) null : Convert.ToInt32(fields[0]); 
```

要不就：

```
if (fields[0] != "")
{
    C.LN = Convert.ToInt32(fields[0]);
} 
```

顺便说一句，这些名称是完全无法维护的。六个月后，您知道它们的含义吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T14:36:43.697

像这样使用可为空的类型：

```
public class Uploads
{
    public long? Mn { get; set; }
    public int? LN { get; set }
    public int? Val { get; set }
} 
```

有关将字符串解析为可为空值的信息，请参见[此处](https://stackoverflow.com/questions/45030/how-to-parse-a-string-into-a-nullable-int-in-c-sharp-net-3-5)。

# java - 如何使用 JGit 检查是否已经完成了 Git 克隆

> ID：13586502
> 
> 赞同：8
> 
> 时间：2012-11-27T14:34:21.477
> 
> 标签：java, git, git-clone, jgit

我学习 git 并使用 JGit 从 Java 代码访问 Git 存储库。Git 默认不允许克隆到非空目录。我们如何确定已经为本地机器中的特定 git repo 完成了 git clone，以便我们只能在随后执行 Git pull？

目前我正在使用这种方法：

```
 if a root folder is existing in the specified location
     clone has been done
     pull 
 else
     clone 
```

不确定这是否正确。有更好的想法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-28T14:03:03.487

这是我使用的方法，在 Jgit 邮件列表中指定：

检查 git 存储库是否存在：

```
if (RepositoryCache.FileKey.isGitRepository(new File(<path_to_repo>), FS.DETECTED)) {

     // Already cloned. Just need to open a repository here.
} else {

     // Not present or not a Git repository.
} 
```

但这不足以检查 git clone 是否“成功”。部分克隆可以使 isGitRepository() 评估为真。要检查 git clone 是否成功完成，至少需要检查一个引用是否不为空：

```
private static boolean hasAtLeastOneReference(Repository repo) {

    for (Ref ref : repo.getAllRefs().values()) {
        if (ref.getObjectId() == null)
            continue;
        return true;
    }

    return false;
} 
```

感谢肖恩皮尔斯的回答！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-06-10T17:10:18.867

另一种方法是使用 JGit FileRepositoryBuilder 类。

```
public boolean repositoryExists(File directory) {

    boolean gitDirExists = false;

    FileRepositoryBuilder repositoryBuilder = new FileRepositoryBuilder();
    repositoryBuilder.findGitDir(directory);

    if (repositoryBuilder.getGitDir() != null) {

        gitDirExists = true;
    }

    return gitDirExists;
} 
```

[此解决方案间接使用与接受的答案](https://stackoverflow.com/a/13606879/42962)相同的解决方案，但它删除了 RepositoryCache、FileKey 和 FS（文件系统）的直接使用。虽然这些类在范围内是公开的，但它们感觉相当低级，并且我个人觉得使用起来不太方便。

我不记得我们到底想出了这个解决方案。它可能来自[How to Access a Git Repository with JGit](https://www.javacodegeeks.com/2014/09/how-to-access-a-git-repository-with-jgit.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-26T09:35:33.777

@Izza 的回答中提到的技巧对我不起作用。我宁愿这样做：

Java 示例：

```
 import org.eclipse.jgit.api.Git
 import org.eclipse.jgit.lib.Repository
 boolean isRepo(String fileDir) {
    try {
      Git Git = Git.open(new File(fileDir));
      Repository repo = jGIt.getRepository();
      for (Ref ref : repo.getAllRefs().values()) {
            if (ref.getObjectId() == null)
                continue;
            return true;
     }
     return false;
    } catch(Exception e) {
     return false;
    }
 } 
```

# iphone - 在 Iphone 中捕获图像

> ID：13586506
> 
> 赞同：0
> 
> 时间：2012-11-27T14:34:30.847
> 
> 标签：iphone, objective-c, ios, xcode

我有一个空白屏幕，我在其中单击相机按钮并拍照，然后该照片在我的空白屏幕上显示为 a `UIVIew`，并且我正在将多个图像从相机添加到空白屏幕。问题是有时我可以在空白屏幕上添加多个图像，但有时当我捕获图像时，空白屏幕上的所有图像都会消失，只显示当前图像。

![在此处输入图像描述](../Images/a2422a8cd2bafdb8e09efb3bb5c04dc6.png)

```
- (IBAction)openCameraOnAddButton:(id)sender {
//NSLog(@"openCameraOnAddButton");
[AddImagesToCanvasView setHidden:YES];
UIImagePickerController *picker = [[UIImagePickerController alloc] init];  
picker.delegate = self; 
picker.sourceType = UIImagePickerControllerSourceTypeCamera;  
[self presentModalViewController:picker animated:YES]; 
```

}

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {
[picker dismissModalViewControllerAnimated:YES];
UIImage *image = [[info objectForKey:@"UIImagePickerControllerOriginalImage"] retain];

UIView *holderView;
if(image.size.width > image.size.height || image.size.width == image.size.height)
{
    holderView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 180, 160)];
}
else{
    holderView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 160, 240)];
}
UIImageView *imageview = [[UIImageView alloc] initWithFrame:[holderView frame]];
[imageview setImage:image];
NSLog(@"Tag By Default %d",(arc4random()%100)+10);
[holderView setTag:(int)objectDelegate.tagForHolderView];
[imageview setTag:((int)objectDelegate.tagForHolderView)+1];
[holderView addSubview:imageview];

UIPinchGestureRecognizer *pinchRecognizer = [[UIPinchGestureRecognizer alloc] initWithTarget:self action:@selector(scale:)];
[pinchRecognizer setDelegate:self];
[holderView addGestureRecognizer:pinchRecognizer];

 UIRotationGestureRecognizer *rotationRecognizer = [[UIRotationGestureRecognizer alloc] initWithTarget:self action:@selector(rotate:)];
 [rotationRecognizer setDelegate:self];
 [holderView addGestureRecognizer:rotationRecognizer];

UIPanGestureRecognizer *panRecognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(move:)];
[panRecognizer setMinimumNumberOfTouches:1];
[panRecognizer setMaximumNumberOfTouches:1];
[panRecognizer setDelegate:self];
[holderView addGestureRecognizer:panRecognizer];

UITapGestureRecognizer *tapRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tapped:)];
[tapRecognizer setNumberOfTapsRequired:1];
[tapRecognizer setDelegate:self];
[holderView addGestureRecognizer:tapRecognizer]; 

 UILongPressGestureRecognizer *gestureRecognizer = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(gestureHandler:)];
 [holderView addGestureRecognizer:gestureRecognizer];

[holderView.layer setBorderColor: [[UIColor whiteColor] CGColor]];
[holderView.layer setBorderWidth: 3.0];
[self.view addSubview:holderView];
objectDelegate.tagForHolderView+=2;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T15:58:16.920

不确定，但是当您执行所有操作时，**UIImagePickerCotroller 的**委托方法有时可能无法正常工作。

我在将图像存储在文档目录中时遇到了同样的问题，为了解决这个问题，我在**didFinishPickingMediaWithInfo**方法中创建了新线程并在该方法中移动了整个代码。然后它对我来说很好。尝试这样做。

# django - 如何通过多对多字段（精确匹配）中的对象过滤 django 模型？

> ID：13586507
> 
> 赞同：15
> 
> 时间：2012-11-27T14:34:31.417
> 
> 标签：django, django-models, many-to-many, django-orm

我的代码中有这个模型：

```
class Conversation(models.Model):
    participants = models.ManyToManyField(User, related_name="message_participants") 
```

我需要通过“参与者”多对多字段过滤这个“对话”模型对象。含义：例如，我有 3 个用户对象，所以我想检索在其“参与者”字段中具有这 3 个用户的唯一“对话”对象。

我试过这样做：

```
def get_exist_conv_or_none(sender,recipients):
    conv = Conversation.objects.filter(participants=sender)
    for rec in recipients:
        conv = conv.filter(participants=rec) 
```

其中 sender 是 User 对象，“recipients”是 User 对象的列表。它不会引发错误，但它给了我错误的对话对象。谢谢。

编辑：最近的一次尝试让我明白了这一点：

```
def get_exist_conv_or_none(sender,recipients):
    participants=recipients
    participants.append(sender)
    conv = Conversation.objects.filter(participants__in=participants)
    return conv 
```

基本上有同样的问题。它产生在列表中具有一个或多个“参与者”的对象。但我正在寻找的是多对多对象的精确匹配。意思是，一个具有精确“用户”的对象是多对多关系。

编辑2：我的最后一次尝试。仍然，不会工作。

```
def get_exist_conv_or_none(sender,recipients):
    recipients.append(sender)
    recipients = list(set(recipients))
    conv = Conversation.objects.annotate(count=Count('participants')).filter(participants=recipients[0])
    for participant in recipients[1:]:
        conv.filter(participants=participant)
    conv.filter(count=len(recipients))
    return conv 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-27T17:26:32.167

好的，所以我找到了答案：为了进行完全匹配，我必须对模型进行链式过滤，然后确保它具有所需的确切数量的参数，以便多对多字段包含在它是**所有**需要的对象，仅此而已。

我将使用注释检查对象编号：（[https://docs.djangoproject.com/en/dev/topics/db/aggregation/](https://docs.djangoproject.com/en/dev/topics/db/aggregation/)）

结束了这段代码：

```
def get_exist_conv_or_none(recipients):
    conv = Conversation.objects.annotate(count=Count('participants')).filter(participants=recipients[0])
    for participant in recipients[1:]:
        conv = conv.filter(participants=participant)
    conv = conv.filter(count=len(recipients))
    return conv 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-13T13:56:12.863

为了使用数据库索引进行快速搜索，我使用以下代码：

```
class YandexWordstatQueue(models.Model):
    regions = models.ManyToManyField(YandexRegion)
    regions_cached = models.CharField(max_length=10000, editable=False, db_index=True)
    phrase = models.ForeignKey(SearchPhrase, db_index=True)
    tstamp = models.DateTimeField(auto_now_add=True)

class YandexWordstatRecord(models.Model):
    regions = models.ManyToManyField(YandexRegion)
    regions_cached = models.CharField(max_length=10000, editable=False, db_index=True)
    phrase = models.ForeignKey(SearchPhrase, db_index=True)
    Shows = models.IntegerField()
    date = models.DateField(auto_now_add=True)

@receiver(m2m_changed, sender=YandexWordstatRecord.regions.through)
@receiver(m2m_changed, sender=YandexWordstatQueue.regions.through)
def yandexwordstat_regions_changed(sender, **kwargs):
    if kwargs.get('action') in ['post_add', 'post_remove']:
        instance = kwargs.get('instance')
        l = list(instance.regions.values_list('RegionID', flat=True))
        l.sort()
        instance.regions_cached = json.dumps(l)
        instance.save() 
```

这会在保存时增加开销，但现在我可以使用此代码段执行快速过滤：

```
region_ids = [1, 2, 3] # or list(some_queryset.values_list(...))
region_ids.sort()
regions_cahed = json.dumps(region_ids)
YandexWordstatQueue.objects.filter(regions_cached=regions_cached) 
```

# javascript - 退出for循环时出现javascript错误

> ID：13586510
> 
> 赞同：4
> 
> 时间：2012-11-27T14:34:38.350
> 
> 标签：javascript, for-loop, onchange

我创建了一个 jquery 实用程序，当您从下拉列表中选择一个状态时，它会自动显示状态。为了让用户体验更好，我添加了一些逻辑来将商店分为三列。这在除 IE 之外的所有浏览器中都能正常工作。

我不确定控制台中显示的错误是否与导致`.change()`事件在 IE 中不触发的错误相同，但我想我会提到它。我得到的控制台错误是：

> 未捕获的类型错误：无法读取未定义的属性“store_url”

这是代码：

```
else if (store_remainder === 0) {
   for(var i = 0; i < check; i++) {
      store_col_1.append("<li class='current_store'><a href='" +   data[i].store_url + "'>" + data[i].store_name + "</a></li>");
   }
   for(var i = check; i < (check * 2); i++) {
      store_col_2.append("<li class='current_store'><a href='" + data[i].store_url + "'>" + data[i].store_name + "</a></li>");
   }
   for(var i = (check * 2); i <= data.length; i++) {
      store_col_3.append("<li class='current_store'><a href='" + data[i].store_url + "'>" + data[i].store_name + "</a></li>");
   }    
} 
```

该错误仅出现在最后的“for”块中，这让我相信它试图运行最后一次迭代但没有得到值并返回为空。如果是这种情况，我该如何解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T14:36:24.600

这个：

```
for(var i = (check * 2); i <= data.length; i++) { 
```

一定是：

```
for(var i = (check * 2); i < data.length; i++) {
       //without '=' -------^ 
```

一如既往。`somearray[somearray.length]`_ **_** `undefined`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T14:36:54.850

在`for(var i = (check * 2); i<= data.length; i++)`

您的错误存在于`<=`. 将其更改为`<`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T14:38:04.350

在最后一个循环中，您应该使用：

```
for(var i = (check * 2); i < data.length; i++) 
```

因为 data[data.length] 未定义

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T14:38:16.800

你的最后一个不应该去**i < data.length**而不是**i <= data.length**吗？

# sql - 带有关系表的 SQL 视图

> ID：13586513
> 
> 赞同：0
> 
> 时间：2012-11-27T14:34:40.550
> 
> 标签：sql, sql-server-2008, tsql, linq-to-entities

我正在寻找为 2 个表创建一个视图页面，这些表是：

```
tbArticle:
    articleid
    name 

tbArticleMedia:
    articleid
    mediaid 
```

我正在寻找像这样创建视图表：

```
viewArticleMedia:
    ArticleId         (EG vale: 1)
    ArticleName       (EG vale: this is article)
    MultimediaId      (EG vale: 1,2,3,4,5) 
```

任何人请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T14:38:45.620

```
SELECT
     a.articleId, a.Name,
     STUFF(
         (SELECT ',' + CAST(mediaid as VARCHAR(10))
          FROM  tbArticleMedia
          WHERE articleid = a.articleid
          FOR XML PATH (''))
          , 1, 1, '')  AS MultimediaId
FROM tbArticle AS a
     INNER JOIN tbArticleMedia b
        ON a.articleid = b.articleid
GROUP BY a.articleId, a.Name 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!3/9c2cf/8)

# android - 片段实例化错误（......没有充分的理由）

> ID：13586518
> 
> 赞同：1
> 
> 时间：2012-11-27T14:35:10.390
> 
> 标签：android

我正在使用 V4 兼容库来使用片段。我有一个 Fragment ，它是一个**带有公共的空构造函数的顶级类**，但是，我的应用程序每隔一段时间就会崩溃，堆栈跟踪中有这个：

> android.support.v4.app.Fragment$InstantiationException：无法实例化片段 com.myapp.view.flows.fragment.MyFragment：确保类名存在，是公共的，并且有一个公共的空构造函数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T14:39:34.103

确保在构造函数上调用 super。如果您不需要对其进行任何更改，则最好不要覆盖它。

# java - 在编译阶段之前构建并运行 maven 模块

> ID：13586519
> 
> 赞同：0
> 
> 时间：2012-11-27T14:35:15.913
> 
> 标签：java, maven-2, preprocessor, maven-3

是否可以在编译阶段之前构建一个模块并运行它？这是详细信息。

我有一个具有此设置的项目：

```
<modules>
  <module>preprocessor</module>
  <module>module1</module>
  <module>module2</module>
  ... more ...
</module> 
```

*预处理器*模块包含一些将处理其他代码的代码：在其他模块中生成一些代码和数据。我正在使用'mvn exec：java'从终端运行它并且工作正常。

但是，我想自动化这件事，所以当其他开发人员想要编译/安装整个树时，maven 首先编译*预处理器*，使用一些参数执行它并继续编译阶段。

另外，在运行“mvn install”时，是否可以指示 maven 不安装此预处理器模块？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T20:18:12.533

看看 maven 插件[http://code.google.com/p/java-comment-preprocessor/](http://code.google.com/p/java-comment-preprocessor/)它允许对 Java 代码进行预处理

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T18:38:23.027

首先，如果您有一种听起来像这样的生成器..您需要在生成资源生命周期阶段运行它，或者如果它是需要在生成资源生命周期中编译的真正代码。一件非常重要的事情是在预处理器模块中进行本地生成，而不是将结果放入其他模块中。如果您需要在其他模块中使用生成的信息，则应将其放入资源文件夹中，该文件夹将自动作为可在构建过程中生成的 jar 的一部分使用。生成的 jar 可以被其他模块简单地用作依赖项。

# c# - 将 Func<> 传递给 Select

> ID：13586520
> 
> 赞同：2
> 
> 时间：2012-11-27T14:35:27.443
> 
> 标签：c#, linq, linq-to-sql

我从这个开始：

```
query
    .Take(20)
    .Select(item => new
    {
        id = item.SomeField,
        value = item.AnotherField
    })
    .AsEnumerable()
    .ToDictionary(item => item.id, item => item.value); 
```

现在，我想重用除`SomeField`and之外的所有内容`AnotherField`。

```
public static Dictionary<int, string> ReusableMethod<T>(
    this IQueryable<T> query,
    Func<T, int> key,
    Func<T, string> value)
{
    return query
        .Take(20)
        .Select(item => new
        {
            id = key(item),
            value = value(item)
        })
        .AsEnumerable()
        .ToDictionary(item => item.id, item => item.value);
}

query.ReusableMethod(item => item.SomeField, item => item.AnotherField); 
```

这可行，但数据库查询选择的数据比需要的多，所以我猜这意味着`ReusableMethod`使用 linq-to-objects。

是否可以在仅选择所需数据的同时执行此操作？我要补充一点， Func<> 对我来说仍然是魔法的一部分，所以我可能会遗漏一些明显的东西。

**澄清**以避免混淆：`Take(20)`很好，`Select()`不是。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T14:37:21.020

`Expression`用并删除`AsEnumerable`调用来包装你的函数。

```
 public static Dictionary<int, string> ReusableMethod<T>(
    this IQueryable<T> query,
    Expression<Func<T, int>> key, 
    Expression<Func<T, string>> value) 
```

另一种方法是只返回整行。`Expression`在这种情况下不需要。

```
return query
    .Take(20)
    .ToDictionary(key, value); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T15:56:45.977

最近我遇到了同样的问题，这就是我所做的：

1.  您有一些 DbEntity（由 LINQ to EF、SQL 生成），但您只想查询一些字段（我这样做是为了节省网络带宽）。您必须创建从 DbEntity 派生的类，因为您不能在表达式树中创建匿名类型，并且您不能在 select 语句中创建 DbEntity 的新实例。（无需添加任何字段、属性等）

    公共类 LocalEntity : DbEntity {}

2.  您需要定义一个方法来生成您的选择表达式树。它应该看起来像这样。这将生成类似于以下的表达式树： .Select(db => new LocalEntity() { Property1 = db.Property1, Proeprty2 = db.Property2})

    ```
    protected Expression<Func<DbEntity, LocalEntity>> getSelectExpression()
    {
        ParameterExpression paramExpr = Expression.Parameter(typeof(DbEntity), "dbRecord");
        var selectLambda = Expression.Lambda<Func<DbEntity, LocalEntity>>(
                            Expression.MemberInit(
                                Expression.New(typeof(LocalEntity)),
                                Expression.Bind(typeof(LocalEntity).GetProperty("DbEntityFieldName"), Expression.Property(paramExpr, "DbEntityFieldName"),
                                ....
                                ))
                            ),
                            paramExpr);

        return selectLambda;
    } 
    ```

3.  像这样使用它：

    query.Select(getSelectExpression()).ToDictionary();

将其视为伪代码而不是 C# 代码，因为我必须对其进行大量简化并且无法对其进行测试，但是如果 oyu 使其工作，它将仅从您在 getSelectedExpression 中定义的 DB 字段传输，而不是整行.

# c# - 在本地写入 cookie

> ID：13586523
> 
> 赞同：2
> 
> 时间：2012-11-27T14:35:46.537
> 
> 标签：c#

我让我的程序（c#）登录到网站，我得到了正确的缓冲 cookie 信息。然而，当我想检索登录后的正确数据时，我得到一个 401，会话超时。

所以我想，该网站一定无法检索该 cookie 信息。无法弄清楚如何存储它以便网站可以检索它。

```
 WebRequest req = WebRequest.Create(Url);
        req.ContentType = "application/x-www-form-urlencoded";
        req.Method = "POST";
        byte[] bytes = Encoding.ASCII.GetBytes(Gegevens);
        req.ContentLength = bytes.Length;
        using (Stream os = req.GetRequestStream())
        {
        os.Write(bytes, 0, bytes.Length);
        }
        WebResponse resp = req.GetResponse();
        cookieHeader = resp.Headers["Set-cookie"]; 
```

cookieHeader，包含正确的信息。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T15:24:19.660

您需要将 a 分配`CookieContainer`给您的 Web 请求，并将其`CookieContainer`用于以下请求。

请参阅[MSDN 以供参考](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.cookiecontainer.aspx#MtViewDropDownText)。

您可以（如果您想在关闭应用程序时保留 cookie）从中获取 Cookie 列表`CookieContainer`并对其进行序列化。打开应用程序后，您可以反序列化并重建`CookieContainer`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T15:33:53.243

根据您提供的评论，我将冒险猜测并说您没有正确地将登录 cookie 添加到您的下一个`WebRequest`. 使用对象处理 Cookie`WebRequest`有点困难，因此我建议使用`HttpWebRequest`内置`HttpWebResponse`cookie 解析的 cookie。您只需在这里和那里更改几行代码：

**构建请求**（在您的问题中使用相同的示例）

```
CookieContainer cookies = new CookieContainer();

// When using HttpWebRequest or HttpWebResponse, you need to cast for it to work properly
HttpWebRequest req = (HttpWebRequest)WebRequest.Create(url);
req.CookieContainer = cookies;
req.ContentType = "application/x-www-form-urlencoded";
req.Method = "POST";

byte[] bytes = Encoding.ASCII.GetBytes(Gegevens);
req.ContentLength = bytes.Length;
using (Stream os = req.GetRequestStream())
{
    os.Write(bytes, 0, bytes.Length);
}

// Cast here as well
using (HttpWebResponse resp = (HttpWebResponse)req.GetResponse())
{
    // Code related to the web response goes in here
} 
```

现在，您的 cookie 信息保存在`CookieContainer`对象中。稍后可以在您的代码中重复使用它来验证您的登录。如果不需要，则无需将此 cookie 信息写入磁盘。

**使用 cookie 信息构建请求** （与上面几乎相同，但您没有添加 POST 数据，而是使用 GET 请求）

```
HttpWebRequest req = (HttpWebRequest)WebRequest.Create(url);
req.CookieContainer = cookies; // This is where you add your login cookies to the current request
req.Method = "GET";

using (HttpWebResponse resp = (HttpWebResponse)req.GetResponse())
{
    // Code related to the web response goes here
} 
```

希望这会让你走上正确的轨道:)

# c# - 如何转置列表列表，用默认（T）填充空白？

> ID：13586524
> 
> 赞同：4
> 
> 时间：2012-11-27T14:35:47.933
> 
> 标签：c#, .net

如何转置列表列表？

`public List<List<T>> Transpose(List<List<T>> lists)`

如果内部列表的长度不同，我想用`default(T)`

所以转置

```
new List<List<int>>{
    new List<int>           {1,2,3},
    new List<int>           {4,5},
    new List<int>           {6,7,8,9}
}; 
```

将会

```
new List<List<int>>{
        new List<int>   {1,4,6},
        new List<int>   {2,5,7},
        new List<int>   {3,0,8},
        new List<int>   {0,0,9}
    }; 
```

如果你好奇我为什么不使用矩阵类——在我的实际用例中，内部类型是 PropertyDescriptor 或 String。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-27T14:41:32.973

很简单：

```
public static List<List<T>> Transpose<T>(List<List<T>> lists)
{
    var longest = lists.Any() ? lists.Max(l => l.Count) : 0;
    List<List<T>> outer = new List<List<T>>(longest);
    for (int i = 0; i < longest; i++)
        outer.Add(new List<T>(lists.Count));
    for (int j = 0; j < lists.Count; j++)
        for (int i = 0; i < longest; i++)
            outer[i].Add(lists[j].Count > i ? lists[j][i] : default(T));
    return outer;
} 
```

# sql - 在sql server中生成下一个序列号

> ID：13586527
> 
> 赞同：2
> 
> 时间：2012-11-27T14:35:50.810
> 
> 标签：sql, sql-server, sequence

我需要生成一个序列号用作主键（在遗留系统中）

我想知道以下解决方案在竞争条件下是否存在并发问题。

```
CREATE TABLE SequenceGenerator
(
    Sequence INT
)

INSERT INTO SequenceGenerator SELECT 0 
```

这是我需要下一个序列号时调用的存储过程

```
CREATE PROCEDURE GetNextSequence
AS
    SET NOCOUNT ON
    DECLARE @NextSequence INT
    UPDATE SequenceGenerator SET
    @NextSequence = Sequence,
    Sequence = Sequence + 1
    RETURN @NextSequence + 1 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T14:44:57.127

是的。

是否有某些原因您不能使用身份字段（即`identity(1,1)`：）？

如果你想使用上面的代码，你当然应该将它包装在一个可序列化的事务中并处理任何死锁情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T14:45:21.500

为什么不使用**Identity**列？

```
IDENTITY [ (seed ,increment) ] 
```

[身份（财产）](http://msdn.microsoft.com/en-us/library/aa933196%28v=sql.80%29.aspx)

例如。

```
CREATE TABLE SequenceGenerator
(
    Sequence INT IDENTITY(1,1)
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T13:55:23.657

这可以解决问题，您不会遇到并发问题。

```
CREATE TABLE SequenceGenerator(Sequence INT)
GO
INSERT INTO SequenceGenerator SELECT 0
GO

DECLARE @NextSequence INT

UPDATE SequenceGenerator 
SET @NextSequence = Sequence = Sequence + 1 
```

@NextSequence 将具有递增的值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T17:34:39.350

它并不漂亮，但多年来我在 SQL Server 2008 R2 中进行了以下工作，并且从未让我失望：

我有一个带有“名称”和“最后值”列的表：

```
CREATE PROCEDURE [dbo].[ReserveSequence]
@Name varchar(100),
@Count int,
@FirstValue bigint OUTPUT
AS 
BEGIN
SET NOCOUNT ON;

DECLARE @Results TABLE ([LastValue] bigint)

UPDATE [Sequences]
SET [LastValue] = [LastValue] + @Count
OUTPUT INSERTED.LastValue INTO @Results
WHERE [Name] = @Name;

SELECT TOP 1 @FirstValue = [LastValue] + 1 FROM @Results;
RETURN 0;
END 
```

也就是说，如果您的目标是 2012 年或更高版本，我将使用 SEQUENCE 对象。

# sql-server - 为什么 sql_variant 数据类型在开发中不常见？

> ID：13586546
> 
> 赞同：1
> 
> 时间：2012-11-27T14:36:45.340
> 
> 标签：sql-server, sqldatatypes, sql-variant

我正在查看系统表并查看`sql_variant`了某些列的数据类型。我从未`sql_variant`在生产数据库中看到任何具有数据类型的列。这有什么原因吗。

# maven - 为什么ant使用maven-ant-tasks,artifact:mvn下载依赖jar这么慢

> ID：13586552
> 
> 赞同：1
> 
> 时间：2012-11-27T14:37:11.567
> 
> 标签：maven, ant, maven-ant-tasks

看照片，我有一个名为“brandstore-repository.jar”的罐子

在我的 localRepository 中，我将其删除。

并且 artifact:mvn 会下载到私有服务器（10.8.12.100）

当我使用cmd时，使用“mvn install”命令，下载速度非常快！

但是我在ant building.xml中使用了“artifact:mvn”，感觉比较慢，需要等待大约10+秒/每次下载！！

![在此处输入图像描述](../Images/218848829241c02c89fc0163af1ae995.png)

我在“${user.home}/.m2”中的setting.xml，非常简单

```
<settings xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0
                      http://maven.apache.org/xsd/settings-1.0.0.xsd">

    <localRepository>D:\FeiLong Soft\Essential\Development\repository</localRepository>

    <profiles>
        <profile>
            <id>profile-baozun</id>
            <repositories>
                <repository>
                    <id>public</id>
                    <url>http://10.8.12.100/nexus/content/groups/public</url>
                    <releases>
                        <enabled>true</enabled>
                    </releases>
                    <snapshots>
                        <enabled>true</enabled>
                    </snapshots>
                </repository>
            </repositories>
        </profile>
    </profiles>

    <activeProfiles>
        <activeProfile>profile-baozun</activeProfile>
    </activeProfiles>
</settings> 
```

在我的 cmd 命令行中，我改用“mvn clean install”

```
E:\Workspaces\baozun\converseplatform\converse-repo>mvn clean install
[INFO] Scanning for projects...
[INFO] ------------------------------------------------------------------------
[INFO] Building converse-repo
[INFO]    task-segment: [clean, install]
[INFO] ------------------------------------------------------------------------
[INFO] [clean:clean {execution: default-clean}]
[INFO] Deleting directory E:\Workspaces\baozun\converseplatform\converse-repo\target
[INFO] [resources:resources {execution: default-resources}]
[WARNING] Using platform encoding (GBK actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] Copying 7 resources
Downloading: http://10.8.12.100/nexus/content/groups/public/com/jumbo/brandstore/brandstore-repository/4.0.0/brandstore-repository-4.0.0.pom
1K downloaded  (brandstore-repository-4.0.0.pom)
Downloading: http://10.8.12.100/nexus/content/groups/public/com/jumbo/brandstore/brandstore/4.0.0/brandstore-4.0.0.pom
17K downloaded  (brandstore-4.0.0.pom)
Downloading: http://10.8.12.100/nexus/content/groups/public/com/jumbo/brandstore/brandstore-repository/4.0.0/brandstore-repository-4.0.0.jar
913K downloaded  (brandstore-repository-4.0.0.jar)
[INFO] [compiler:compile {execution: default-compile}]
[INFO] Compiling 87 source files to E:\Workspaces\baozun\converseplatform\converse-repo\target\classes
[INFO] [native2ascii:native2ascii {execution: native2ascii}]
[INFO] Includes: [**/*.properties]
[INFO] Excludes: []
[INFO] [resources:testResources {execution: default-testResources}]
[WARNING] Using platform encoding (GBK actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] Copying 20 resources
[INFO] [compiler:testCompile {execution: default-testCompile}]
[INFO] Compiling 12 source files to E:\Workspaces\baozun\converseplatform\converse-repo\target\test-classes
[INFO] [surefire:test {execution: default-test}]
[INFO] Tests are skipped.
[INFO] [jar:jar {execution: default-jar}]
[INFO] Building jar: E:\Workspaces\baozun\converseplatform\converse-repo\target\converse-repo-4.0.0.jar
[INFO] [install:install {execution: default-install}]
[INFO] Installing E:\Workspaces\baozun\converseplatform\converse-repo\target\converse-repo-4.0.0.jar to D:\FeiLong Soft\Essential\Development\repository\com\jum
bo\converse\converse-repo\4.0.0\converse-repo-4.0.0.jar
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESSFUL
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 5 seconds
[INFO] Finished at: Wed Nov 28 11:03:17 CST 2012
[INFO] Final Memory: 39M/94M
[INFO] ------------------------------------------------------------------------
E:\Workspaces\baozun\converseplatform\converse-repo> 
```

非常快

我明白了，我只使用 artifact:dependencies ，也可以下载依赖jar，而且速度更快

```
<target name="maven-test">
    <artifact:pom id="feilongMaven" file="pom.xml" />

    <artifact:dependencies filesetId="feilong.maven.dependencies.fileset" pathid="feilong.maven.dependencies.runtime" useScope="runtime">
        <pom refid="feilongMaven" />
    </artifact:dependencies>
</target> 
```

结果：

```
maven-test:
[artifact:dependencies] Downloading: com/jumbo/brandstore/brandstore-repository/4.0.0/brandstore-repository-4.0.0.pom from repository public at http://10.8.12.100/nexus/content/groups/public
[artifact:dependencies] Transferring 2K from public
[artifact:dependencies] Downloading: com/jumbo/brandstore/brandstore/4.0.0/brandstore-4.0.0.pom from repository public at http://10.8.12.100/nexus/content/groups/public
[artifact:dependencies] Transferring 18K from public
[artifact:dependencies] Downloading: com/jumbo/brandstore/brandstore-repository/4.0.0/brandstore-repository-4.0.0.jar from repository public at http://10.8.12.100/nexus/content/groups/public
[artifact:dependencies] Transferring 914K from public
BUILD SUCCESSFUL
Total time: 1 second 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T16:16:56.510

如果没有更多详细信息，例如您的 settings.xml 和确切的命令行，我只能猜测，但一个可能的原因是您在这些情况下使用了不同的基础架构。

也就是说，例如：

*   调用 Maven 时，使用您的公司代理（nexus 或其他）
*   调用 Ant 时，使用了其他代理（或不使用），导致传输速度变慢

确保您始终使用与其中相同的`settings.xml`加号，`<mirrors>`这应该有助于您使传输路径保持一致。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T14:12:31.283

我在工件下载缓慢时遇到了同样的问题。我正在使用 maven-ant-tasks-2.1.3.jar。我假设您的“工件：mvn”与 maven-ant-tasks 相关联。也许这不是您想要的，但我通过将 artifact:mvn 更改为 exec 解决了这个问题：

```
<exec executable="C:/apache-maven-3.0.3/bin/mvn.bat" dir="my-project">
     <arg value="clean" />
     <arg value="install" />
</exec> 
```

# c# - 将 Guid 数组转换为 Object 数组

> ID：13586553
> 
> 赞同：2
> 
> 时间：2012-11-27T14:37:14.477
> 
> 标签：c#, .net

为什么

```
var value = new Guid[]{};
var b = (object[])value; 
```

结果是

```
Cannot cast 'value' (which has an actual type of 'System.Guid[]') to 'object[]' 
```

?

更新

对不起，不准确。真正的代码是：

```
 private void SetEditors(object value)
    {
        var array = value as object[];
        ...
    } 
```

如果值为 Guid 数组，则数组为空。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T14:38:49.270

```
var b = value.Cast<object>().ToArray(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T14:42:23.027

要回答“为什么”，只有部分引用类型的数组是协变的。

所以你可以写：

```
string[] x = new string[10];
object[] y = x; 
```

但是你不能写：

```
int[] x = new int[10];
object[] y = x; 
```

就我个人而言，我认为即使是第一个版本也被允许是一种耻辱，但这是一个不同的故事。

这在 C# 4 规范（隐式引用转换）的第 6.1.6 节中有详细说明：

> 隐式引用转换是：
> 
> *   ...
> *   从具有元素类型 S [E]的数组类型 S 到具有元素类型 T [E]的数组类型 T ，只要满足以下所有条件：
>     *   S 和 T 仅在元素类型上有所不同。换句话说，S 和 T 具有相同的维数。
>     *   S [E]和 T [E]都是引用类型。
>     *   [从 S E]到 T [E]存在隐式引用转换

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T14:38:51.923

`GUID`is `object`，但`GUID[]`is not `object[]`，您必须向上转换数组中的每个元素

# jquery - Jquery 文件上传新版本 (6.11) 无法在 IE 10 中间歇性工作（多文件上传）

> ID：13586555
> 
> 赞同：1
> 
> 时间：2012-11-27T14:37:27.807
> 
> 标签：jquery, file-upload

[我从https://github.com/blueimp/jQuery-File-Upload](https://github.com/blueimp/jQuery-File-Upload) (6.11)尝试了新版本的 Jquery File Upload 。我已经在 ASP.Net 中实现了 .ashx 处理程序，如代码[https://github.com/blueimp/jQuery-File-Upload/wiki](https://github.com/blueimp/jQuery-File-Upload/wiki)中给出的，带有新版本的 jquery 文件上传 js 文件。该代码与 FF、Chrome 完美配合。根据 wiki，新版本增加了对 IE 10 的多文件选择和拖放的支持。我面临的问题是，它在 IE 10 中无法正常工作。

如果我尝试一次上传多个文件，很少有请求永远处于挂起状态。并且组件发送没有任何文件的空请求（当尝试上传多个文件时，httpContext.Request.Current.PostedFiles.Copunt 为少数请求给出 0）。这只发生在 IE10 上，而不是 FireFox 或 Chrome。

# f# - 将整个整数列表添加到二叉树 F#

> ID：13586556
> 
> 赞同：1
> 
> 时间：2012-11-27T14:37:29.257
> 
> 标签：f#, tree

我有这个代码

```
type Tree<'T when 'T: comparison> = 
| Empty 
| Node of 'T * Tree<'T> * Tree<'T>

let rec insert value = function
| Empty -> Node(value, Empty, Empty)
| Node(v, left, right) when value < v -> Node(v, insert value left, right)
| Node(v, left, right) when value > v -> Node(v, left, insert value right)
| Node(_, _, _) as n -> n 
```

但我想添加一个整数列表，而不是添加一个整数。例子：

```
let tree = addList [5;2;1;6;7];; 
```

并且列表应该添加到树中

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T14:46:21.547

你可以简单地做这样的折叠

```
let tree = List.fold (fun tree x -> inser­t x tree)­ Empty­ [5;2;1;6;7];; 
```

在每个步骤中，您都会返回一个新树，在下一步中您将向其中添加下一个元素。`Empty`您可以使用要向其添加元素列表的任何现有树来代替。

# java - Java Applet 未在网页上加载

> ID：13586562
> 
> 赞同：0
> 
> 时间：2012-11-27T14:37:45.807
> 
> 标签：java, html, upload, japplet

我正在尝试将 Java 小程序上传到我的博客。我已将`.class`文件上传到 Skydrive 服务器。但是当我尝试打开页面时，出现错误，`Class not found`. 这是HTML代码，请看一下

```
<html>
<body>
<applet code="JappletGame.class" codebase="https://skydrive.live.com/?sc=documents&cid=4a7b1121c6f69308#cid=4A7B1121C6F69308&id=4A7B1121C6F69308%21106" width="640" height="480">
</applet>
</body>
</html> 
```

以下是错误的详细信息：

```
Java Plug-in 10.6.2.24
Using JRE version 1.7.0_06-b24 Java HotSpot(TM) Client VM
User home directory = C:\Users\Alfred
----------------------------------------------------
c:   clear console window
f:   finalize objects on finalization queue
g:   garbage collect
h:   display this help message
l:   dump classloader list
m:   print memory usage
o:   trigger logging
q:   hide console
r:   reload policy configuration
s:   dump system and deployment properties
t:   dump thread list
v:   dump thread stack
x:   clear classloader cache
0-5: set trace level to <n>
---------------------------------------------------- 
```

这是该页面的链接： [我的 Java Applet 链接](http://wingoku.blogspot.com/p/blog-page_27.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T14:52:07.967

您的代码库的 url 在 Skydrive 上，需要登录。确保可以直接从 Internet 调用您的小程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T14:45:59.510

将类打包为jar，然后重试

# svn - 调用 system() 函数，Vim 脚本

> ID：13586564
> 
> 赞同：1
> 
> 时间：2012-11-27T14:37:49.990
> 
> 标签：svn, vim

当我遇到问题时，我试图在 Vim 7.3 中自定义我的状态行。

我正在尝试将 SVN 信息放在状态行中，所以我做了这样的事情：

```
function! DrawStatusLine()
    let svn = system("svn info")
    let l:status = " "
    let l:status = l:status . svn
    let l:status = l:status . "%t"       "tail of the filename
    let l:status = l:status . "%*"
    let l:status = l:status . "[%{strlen(&fenc)?&fenc:'none'}," "file encoding
    let l:status = l:status . "%{&ff}]" "file format
    let l:status = l:status . "%h"      "help file flag
    let l:status = l:status . "%m"      "modified flag
    let l:status = l:status . "%r"      "read only flag
    let l:status = l:status . "%="      "left/right separator
    let l:status = l:status . "%c,"     "cursor column
    let l:status = l:status . "%l/%L"   "cursor line/total lines
    let l:status = l:status . "\ %P"    "percent through file
    return l:status
endfunction

set statusline=%!DrawStatusLine() 
```

但是在调用 sytem() 之后，光标移动得非常缓慢。`system`似乎每次我移动光标时都会被调用（实际上，它似乎每次在窗口中发生某些事情时都会被调用）。

你知道我为什么会出现这种行为吗？

这是我的其余部分`.vimrc`，我没有使用外来插件，而且我在 Cygwin (Windows XP) 下。

```
" When started as "evim", evim.vim will already have done these settings.
if v:progname =~? "evim"
    finish
endif

" Use Vim settings, rather than Vi settings (much better!).
" This must be first, because it changes other options as a side effect.
set nocompatible

" Management of console or GUI settings.
if has("gui_running")
    " We are in gVim
    " Linux
    if has("gui_gtk2")
        :set guifont=DejaVu\ Sans\ Mono\ 11
    " Windows
    elseif has("gui_win32")
        :set guifont=DejaVu_Sans_Mono:h11:cANSI:
    endif
else
    " We are in a console
    set background=dark
endif

" Manage colors.
if filereadable($VIMRUNTIME . "/colors/wombat256.vim") ||
            \ filereadable($VIM . "/vimfiles/colors/wombat256.vim") ||
            \ filereadable($HOME . "/.vim/colors/wombat256.vim")
    colorscheme wombat256
elseif filereadable($VIMRUNTIME . "/colors/wombat.vim") ||
            \ filereadable($VIM . "/vimfiles/colors/wombat.vim") ||
            \ filereadable($HOME . "/.vim/colors/wombat.vim")
    colorscheme wombat
else
    colorscheme desert
endif

" allow backspacing over everything in insert mode
set backspace=indent,eol,start
set history=50 " keep 50 lines of command line history
set ruler " show the cursor position all the time
set showcmd " display incomplete commands
set incsearch " do incremental searching

" For Win32 GUI: remove 't' flag from 'guioptions': no tearoff menu entries
let &guioptions = substitute(&guioptions, "t", "", "g")

" In many terminal emulators the mouse works just fine, thus enable it.
if has('mouse')
    set mouse=a
endif

" Switch syntax highlighting on, when the terminal has colors
" Also switch on highlighting the last used search pattern.
if &t_Co > 2 || has("gui_running")
    syntax on
    set hlsearch
endif

" Only do this part when compiled with support for autocommands.
if has("autocmd")

    " Enable file type detection.
    " Use the default filetype settings, so that mail gets 'tw' set to 72,
    " 'cindent' is on in C files, etc.
    " Also load indent files, to automatically do language-dependent indenting.
    filetype plugin indent on

    " Put these in an autocmd group, so that we can delete them easily.
    augroup vimrcEx
        autocmd!

        " For all text files set 'textwidth' to 78 characters.
        autocmd FileType text setlocal textwidth=78

        " When editing a file, always jump to the last known cursor position.
        " Don't do it when the position is invalid or when inside an event handler
        " (happens when dropping a file on gvim).
        " Also don't do it when the mark is in the first line, that is the default
        " position when opening a file.
        autocmd BufReadPost *
                    \ if line("'\"") > 1 && line("'\"") <= line("$") |
                    \   exe "normal! g`\"" |
                    \ endif

    augroup END

else

    set autoindent " always set autoindenting on

endif " has("autocmd")

" Convenient command to see the difference between the current buffer and the
" file it was loaded from, thus the changes you made.
" Only define it when not defined already.
if !exists(":DiffOrig")
    command DiffOrig vert new | set bt=nofile | r # | 0d_ | diffthis
                \ | wincmd p | diffthis
endif

" Update the path with the dir where we opened Vim
set path=.,$PWD/**
" Now that we set the path to be recursive, disable
" the option that looking for completion in included files.
" Indeed, it can slow the process hard. We use tags instead.
set complete-=i

" Allow editing everywhere
set virtualedit=all

" No bells
set errorbells
set novisualbell
set vb t_vb=

" Show status bar
set laststatus=2
let loaded_matchparen = 1

" Draw the status line.
" Status line that rocks.
function! DrawStatusLine()
    let svn = system("svn info")
    let l:status = " "
    let l:status = l:status . "%t"       "tail of the filename
    let l:status = l:status . "%*"
    let l:status = l:status . "[%{strlen(&fenc)?&fenc:'none'}," "file encoding
    let l:status = l:status . "%{&ff}]" "file format
    let l:status = l:status . "%h"      "help file flag
    let l:status = l:status . "%m"      "modified flag
    let l:status = l:status . "%r"      "read only flag
    let l:status = l:status . "%="      "left/right separator
    let l:status = l:status . "%c,"     "cursor column
    let l:status = l:status . "%l/%L"   "cursor line/total lines
    let l:status = l:status . "\ %P"    "percent through file
    return l:status
endfunction

set statusline=%!DrawStatusLine()

" Highlight current line
set cursorline

" Add visible lines when start or end of the screen (3 lines)
set scrolloff=3

" Backup
set nobackup

" No preview in ins-completion.
set completeopt=menu

" Commands completion on status line.
set wildmenu

" Don't redraw while executing macros
set lazyredraw

" K = :help
set keywordprg=

" Diff always vertical
set diffopt+=vertical

" Use utf-8
set encoding=utf-8
set fileencoding=utf-8

" Remember buffer changes when jumping around.
set hidden

"""""""""""""""""
" Developpement "
"""""""""""""""""

" Line numbers
set nu

" Tabulation of 4 spaces
set expandtab
set smarttab
set shiftwidth=4
set softtabstop=4
set tabstop=4

" Show when a line exceeds 80 chars
highlight Overlength ctermbg=red ctermfg=white guibg=#592929

" Highlight Tabs and Spaces
" highlight Tab ctermbg=darkgray guibg=darkgray
" au BufWinEnter * let w:m2=matchadd('Tab', '/[^\t]\zs\t\+/', -1)
highlight Space ctermbg=darkblue guibg=darkblue
augroup matches
    autocmd!
    autocmd BufWinEnter * match Overlength /\%81v.*/
    autocmd BufWinEnter * let w:m3=matchadd('Space', '\s\+$\| \+\ze\t', -1)
    " Matches are memory greedy, shut them when the window is left
    " Mybe it is redondant.
    autocmd BufWinLeave * call clearmatches()
augroup END

set list listchars=tab:\ \ ,trail:.

" Redraw status line when saving.
" autocmd BufWritePost * set statusline=%!DrawStatusLine()

" Special indentation for switch / case
" Indentation when in unclosed (.
set cino=l1,(0

" Load Doxygen syntax
let g:load_doxygen_syntax=1

"""""""""""""""""
" Taglist
"""""""""""""""""
let Tlist_Use_Right_Window=1

"""""""""""""""""
" cscope
"""""""""""""""""
if has("cscope") && executable("cscope") && !has("gui_win32")
    set csto=0
    set cst
    set nocsverb
    " add any database in current directory
    if filereadable("cscope.out")
        cs add cscope.out
    endif
    " abbreviations
    cnoreabbrev csf cs find
    set csverb
endif

"""""""""""""
"  Mapping  "
"""""""""""""

" Don't use Ex mode, use Q for formatting
map Q gq

" CTRL-U in insert mode deletes a lot.  Use CTRL-G u to first break undo,
" so that you can undo CTRL-U after inserting a line break.
inoremap <C-U> <C-G>u<C-U>

" With a map leader it's possible to do extra key combinations
" like <leader>w saves the current file
let mapleader = ","
let g:mapleader = ","

" After repeating command, return where we were.
map . .`[

" Switch tab.
noremap <A-h> gT
noremap <A-l> gt
" For dummy terminals
noremap <Esc>h gT
noremap <Esc>l gt

" Remap the Esc command
inoremap kj <Esc>
inoremap lk <Esc>

" Better for wrapped lines
nnoremap j gj
nnoremap k gk

" omnicompletion : words
inoremap <leader>, <C-x><C-o>

" Turn off highlighting in search.
nmap <leader>/ :nohlsearch<CR>

" edit .vimrc
nmap <silent> <leader>ev :tabnew $HOME/.vimrc<CR>
" source .vimrc
nmap <silent> <leader>sv :so $HOME/.vimrc<CR>

nnoremap <silent><leader>dh :call SVNDiff()<CR>

" Build C symbols.
function! BuildSymbols()
    if has("cscope") && executable("cscope") && !has("gui_win32")
        " kill all connection.
        execute "cs kill -1"
        execute "!ctags -R && cscope -Rb"
        execute "cs add cscope.out"
    else
        execute "!ctags -R"
    endif
endfunction

" Run Vim diff on HEAD copy in SVN.
function! SVNDiff()
    let fn = expand("%:p")
    let newfn = fn .  ".HEAD"
    let catstat = system("svn cat " . fn . " > " . newfn)
    if catstat == 0
        execute 'diffsplit ' . newfn
        execute 'set filetype=c'
    else
        echo "*** ERROR: svn cat failed for ". fn . " (as " . newfn . ")"
    endif
endfunction

" Build symbols with F2.
nnoremap <F2> :call BuildSymbols()<CR>

" Taglist with F3
nnoremap <F3> :TlistToggle<CR>

" Open a explorer on a vertical split of 26.
nnoremap <F4> :26Vexplore<CR>

" When you forgot to open the file as sudo.
cmap w!! %!sudo tee > /dev/null % 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T15:01:30.607

该`'statusline'`值一直在评估，它怎么能显示光标位置之类的信息？！不要在那里做耗时的事情；即使是长的 Vimscript 片段也会显着减慢 Vim，`system()`这是你能做的最糟糕的事情。

相反，在状态行（例如）中包含一个（缓冲区本地）变量`%{exists('b:svn_info')?b:svn_info:''}`，并使用适当的自动命令来设置和更新它：

```
:autocmd BufRead * let b:svn_info = system('svn info') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T16:07:24.827

现有答案的一个补充：有些插件已经自己拥有缓存（如[aurum](https://bitbucket.org/ZyX_I/aurum)）或仅在 BufEnter 上完成一次工作（如[VCSCommand](http://repo.or.cz/w/vcscommand.git)）。提到的两个都能够替换您的`SVNDiff`功能。

VCSCommand 将提供文件状态（只有未知和新的）或（如果状态都不是）版本、存储库以及存储库中是否存在较新的版本。我必须在这里重复一遍，在您切换到另一个缓冲区然后再返回之前，它不会更新状态。

Aurum 更加灵活*，但除非您愿意每 N 秒经历一次输入延迟或切换到 mercurial，否则您将被迫仅使用文件状态和分支**（最后一个左侧是当前修订信息）。颠覆状态总是映射到八种变化无常的状态之一。除非您使用 +python 编译 vim，否则它会使用缓存方法（并且缓存失效会使您遭受延迟），但是使用 +python 情况有所不同：每 N 秒在一个单独的进程中获取状态，并且不会因任何延迟而打扰您除非你做了一些导致缓存失效的事情（目前使用 +python，你会在失效发生的那一刻遭受滞后，并且不会注意到它认为这是你的操作的一部分导致了失效，但是没有滞后被认为是发生的当状态行无效时）。

* 从文档中，我猜 VCSCommand 作者打算让用户自己编写更好的状态行，但我没有看到任何可以帮助他们的东西。也许我只是在寻找错误的位置。

** 此处的分支表示“存储库根 URL 中不存在的根目录 URL 的尾随部分”。根目录是嵌套最少的目录，其`.svn`子目录和存储库根 URL 等于当前目录（包含当前缓冲区的目录）之一。

即使您不愿意使用 aurum，也可以随意借用重复执行的命令或缓存实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T14:53:36.310

这是预期的行为：每次移动光标时都会更新整个状态行，因此`svn info`每次执行某些操作时都会执行。可能每秒多次。

这显然是一种浪费，因为当前文件的 svn 状态不会每秒改变 10 次。

`n`您应该缓存此信息，并且仅在写入时或每分钟或沿该行的某些时间检索它。

# php - 在 PHP 5.3 中执行 tar.gz 操作 - CLI 与 Phar？

> ID：13586571
> 
> 赞同：4
> 
> 时间：2012-11-27T14:38:08.640
> 
> 标签：php, gzip, phar

我需要在 Apache (php5.3) 上运行的 php 脚本中执行一些 tar gzip 操作。

过去，我使用过：

```
new PharData($archivePath . '.tar');
$p = $p->convertToExecutable(Phar::TAR, Phar::GZ);
$p->startBuffering(); 
```

但是在这种情况下，它可能必须处理**1GB+ 的文件**。所以我担心重载php/apache。

在那种情况下，最好依靠`shell_exec`&让操作系统承担负载？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T00:55:52.350

我同意 Marc B 的观点，我会想到的主要考虑因素是：

部署环境... 使用 Shell 将您绑定到可以运行 shell 命令并且可以访问 tar 的环境。使用 Phar 很好，因为如果安装了扩展，你应该很高兴。使用 shell，您现在也与 linux 绑定，除非您将逻辑也放入 Windows 中。

此外，安全问题...虽然绝对可以从 php 运行 shell 命令而不会引入漏洞，但它现在确实为恶意人员提供了一种运行命令的方法，如果您不小心没有足够好地清理数据。此外，如果你用完了谁知道什么的空间，tar 会死掉，而如果你使用 Phar，你应该从 php 中得到一个合理的错误消息来指示问题，而不仅仅是一个错误的返回码。

shell 的一个优点是，如果您异步运行命令并从 stdout 获取流，则可以监控进度。

无论哪种方式，半打一个，六个其他......

# r - gWidgets：点未出现在第二个屏幕中

> ID：13586572
> 
> 赞同：1
> 
> 时间：2012-11-27T14:38:14.233
> 
> 标签：r, gwidgets

我在 R 中使用 gWidgets。我希望在拆分屏幕后并排显示两个图。我无法弄清楚为什么第二个屏幕中没有数据点出现。

```
library(gWidgets)
win <- gwindow("Graphics example")  # Create a window.
# You will be prompted to select a GUI toolkit.
# Enter "1" for gWidgetsRGtk2
ggraphics(ps=6, container=win)
split.screen(c(1,2))  # Split screen into 2 halves
screen(1)
plot(c(1:10), rnorm(10))
screen(2)
plot(c(1:10), rnorm(10)) 
```

您应该看到第二个图出现了，但它不包含数据点。我在 32 位 Windows 笔记本电脑上使用 32 位 R 2.13.2。对此的任何帮助都非常感谢。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T23:52:37.133

窗口没有分配足够的初始空间来容纳图形也可能是一个问题。为避免这种情况，请尝试传递`visible=FALSE`给`gwindow`构造函数，并在添加所有组件后显示窗口`visible(win) <- TRUE`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T19:23:45.897

是刷新ggraphics的问题。我认为最好把它放在一个**ggroup**中。

例如，您可以这样做：

```
library(gWidgets)
options(guiToolkit="RGtk2") ## "Qt"
w <- gwindow("brush example", visible=FALSE)
g <- ggroup(container=w)
## I create 2 ggraphics , the container is ggroup
gg <- ggraphics(container=g)
gg1 <- ggraphics(container=g)
visible(w) <- TRUE
## Here we create 2 handlers to refresh the plot on the click
## See documentation of gWidgets for other handler
ID <- addHandlerChanged(gg, handler=function(h,...) {
  ## udpate graphic and data frame
  plot(c(1:10), rnorm(10))

})

ID1 <- addHandlerChanged(gg1, handler=function(h,...) {
  ## udpate graphic and data frame
  plot(c(1:10), rnorm(10))

}) 
```

![在此处输入图像描述](../Images/01471e6149f7ec688b131a098399a3f2.png)

# c - 外部结构和多个标题

> ID：13586574
> 
> 赞同：0
> 
> 时间：2012-11-27T14:38:24.000
> 
> 标签：c, struct, extern

我对外部结构感到困惑。我必须在一个文件中定义一个结构的全局实例，而不是定义该结构（作为一个 RAM 变量，我不知道它到底是什么）。

下面是一个 GCC 可以编译并且运行正确的示例，而 Code Composer Studio 给出了编译时错误。

我想了解问题出在哪里，GCC 如何编译，以及我应该在哪里/如何使用 extern 声明。

任何评论将不胜感激。

***人.h***

```
#ifndef PERSON_H
#define PERSON_H
struct person {
    int age;
};
typedef struct person PERSON;
void modifyPerson();
#endif // PERSON_H 
```

***人拉姆.h***

```
#ifndef PERSONRAM_H
#define PERSONRAM_H
#include "person.h"
PERSON p1;
#endif // PERSONRAM_H 
```

***修改人.c***

```
#include "person.h"
#include "personRam.h"
void modifyPerson() {
    p1.age = 10;
} 
```

***主程序***

```
#include <stdio.h>
#include "person.h"
#include "personRam.h"
int main() {
    modifyPerson();
    printf("%d", p1.age);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T14:44:43.577

你不应该得到一个编译器错误，而是一个链接器错误，说它`p1`被定义了多次。至少这就是我认为的问题所在。

原因是您在头文件中*定义变量，然后将其包含在多个源文件中。*这意味着定义在两个源文件中（预处理器`#include`指令实际上将头文件的内容放在包含“语句”的位置）。

如果您在头文件中*声明*变量，并在一个源文件中*定义*它应该可以工作。`extern`

 *所以在`personRam.h`

```
extern PERSON p1; 
```

在其中一个源文件中：

```
PERSON p1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T14:40:44.453

您在哪个操作系统上编译，针对哪个目标系统？

值得一提的是，Linux（和 Unix-es）和 Windows 具有不同的链接语义。阅读[Levine 的“链接器和加载器”](http://www.iecc.com/linker/)一书了解详细信息。*

# joomla - 从 1.5.21 升级到 1.5.25 时性能大幅提升

> ID：13586575
> 
> 赞同：0
> 
> 时间：2012-11-27T14:38:25.887
> 
> 标签：joomla, joomla1.5

在一次 pharma hack 攻击之后，我将我的网站从~~1.5.21~~ 1.5.22 升级到 25。但在此之后，我的共享主机帐户被禁用，我看到 cpu 图表中的性能大幅提升。以前我运行了大约 10 个站点，其流量超过 3500/天（总计包括我的预升级站点 = +7000/天）。

现在我在两个不同的托管帐户中管理站点。

可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T14:45:44.137

您现在应该从 1.5.25 升级到 1.5.26，因为它是 Joomla 1.5 系列的最新版本。

从 Joomla 1.5.21 升级到 .25 不会导致 CPU 图的性能提升。这可能是因为您在每台服务器上都有 5 个 Joomla 站点，并且活动量很大。我建议使用 VPS 服务器而不是使用 2 个共享主机帐户。

# java - 在操作系统级别的一个原子操作中创建和写入文件

> ID：13586586
> 
> 赞同：1
> 
> 时间：2012-11-27T14:39:03.000
> 
> 标签：java, file, io, atomic

所以我需要创建一个文件，然后写一行，这必须是原子的。这样在初始化时没有其他进程可以修改该文件。
我有一个想法，在持有锁的同时锁定不同的东西，执行操作然后释放锁以让对方进入。但这很乏味，也可能是错误的，因为创建锁并获取它可能是不是原子的（我猜）。没有别的办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T14:43:37.873

我建议您编写临时文件，然后将其*重命名*为您的文件。我不确定这个操作在java中实现为所有操作系统的原子，但至少在Unix上你有机会，因为我认为它使用与`mv`原子相同的调用。

我猜它在 Windows 上不会是真正的原子。对于大多数应用程序来说，它将是“几乎是原子的”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T14:45:38.737

如果您想要一些可以保护其他进程的东西，我建议您阅读[http://en.wikipedia.org/wiki/File_locking](http://en.wikipedia.org/wiki/File_locking)并利用 JNI 进入操作系统级别。

# mongodb - 以下 mongodb 查询是否等效？

> ID：13586590
> 
> 赞同：1
> 
> 时间：2012-11-27T14:39:15.793
> 
> 标签：mongodb

所以我有下面的查询，它不应该返回任何东西。

```
db.food.find({ingredient : {name : {$ne : "Kahlua"}}});  //empty data 
```

但是，我认为它的等价物确实输出了正确的信息：

```
db.food.find({"ingredient.name" : {$ne : "Kahlua"}});   //gives correct data 
```

我使用[BrowserShell](http://try.mongodb.org/)对上述 2 个查询进行了尝试，对于简单的函数和查询，它并没有给我带来太多问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T14:46:10.640

不，它们不一样。

```
db.food.find({"ingredient.name" : {$ne : "Kahlua"}}); 
```

正在说“查找成分名称不等于 Kahlua 的位置”，而...

```
db.food.find({ingredient : {name : {$ne : "Kahlua"}}}); 
```

正在说“查找成分子对象仅包含名称属性的位置，该名称不等于 Kahlua”。因此，在这种情况下，您实际上是在对整个主题执行搜索。

可能在这里更好地解释 -[点符号与子对象](http://www.mongodb.org/display/DOCS/Dot+Notation+%28Reaching+into+Objects%29#DotNotation%28ReachingintoObjects%29-DotNotationvs.Subobjects)

# python - “模块”对象在 pymongo 中没有属性“OrderedDict”错误

> ID：13586591
> 
> 赞同：2
> 
> 时间：2012-11-27T14:39:18.803
> 
> 标签：python, mongodb, collections, runtime-error, pymongo

我对 pymongo 很陌生。在下面的代码中，

```
db = MySQLdb.connect(DB_HOST,DB_USR,DB_PWD,DB_NAME)
cursor = db.cursor()
query = "SELECT * FROM %s WHERE userid = \"%s\"" % (table, userID) 
cursor.execute(query)
colNames = [i[0] for i in cursor.description]
rows = cursor.fetchall()
objects_list = []
# The below logic makes JSON objet based on fetch MySQL rows.
for row in rows:
    d = collections.OrderedDict()
    index = 0
    for col in colNames:
        d[col] = row[index]
        index = index + 1
    objects_list.append(d)
return objects_list 
```

我得到了错误，

```
trngl_advertise_perfm
trngl_advertise_activity
trngl_user_fblike
Traceback (most recent call last):
File "IngestDataToMongo.py", line 83, in <module>
userData = getData(user[0], TABLES[i]) # Get data of each user.
File "IngestDataToMongo.py", line 51, in getData
d = collections.OrderedDict()
AttributeError: 'module' object has no attribute 'OrderedDict' 
```

请告诉我，如何消除错误。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-27T14:41:03.233

您使用的是 Python 2.6 或更早版本。`OrderedDict`直到 2.7 版才被添加到 Python 中。

从[文档](http://docs.python.org/2/library/collections.html#collections.OrderedDict)中：

> *2.7 版中的新功能。*

您可以改用[此反向](http://code.activestate.com/recipes/576693-ordered-dictionary-for-py24/)端口（也可从[PyPI](http://pypi.python.org/pypi/ordereddict)获得），它将适用于 python 2.4 及更高版本，或者安装 python 2.7 并使用该版本运行您的脚本。

# php - 通过 GET 将 PHP 数组传递给 Javascript

> ID：13586592
> 
> 赞同：0
> 
> 时间：2012-11-27T14:39:20.767
> 
> 标签：php, javascript, mysql, ajax

在向 PHP 发送 GET 请求后，我试图将数组传递给 Javascript。发送和检索数据工作完美，但我找不到任何关于将数据作为数组传回的信息，如下所示：

```
<?php

$result = mysql_query('blablabla');

//converting $result to an array?

echo $result_as_javascript_array;

?>

<script>
$('result').innerHTML = httpGet.responseText
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T14:41:46.530

将您获得的数据转换`MySQL`为`JSON`. 首先像往常一样构建一个“正常”的 PHP 数组，然后将它传递给[`json_encode()`](http://www.php.net/manual/en/function.json-encode.php)函数并返回它。

在客户端，您必须将`JSON`字符串解析为 JS 数组或对象。有关详细信息，请参阅此 SO 问题：[Parse JSON in JavaScript?](https://stackoverflow.com/questions/4935632/how-to-parse-json-in-javascript)

请使用其他东西来访问 MySQL。您使用的扩展基本上已经过时：[http ://si1.php.net/manual/en/faq.databases.php#faq.databases.mysql.deprecated](http://si1.php.net/manual/en/faq.databases.php#faq.databases.mysql.deprecated)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T14:42:04.233

您正在寻找[`json_encode`](http://de1.php.net/manual/en/function.json-encode.php).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T14:43:09.940

像这样使用[json_encode](http://php.net/manual/en/function.json-encode.php)：

```
<?php

$result = mysql_query('blablabla');

//converting $result to an array?

echo json_encode($result);

?> 
```

您可能不希望将响应文本直接放入元素的 innerHTML 中，除非您想在元素中显示 json 文本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T14:43:23.420

```
$arr = array();
while ($row = mysql_fetch_array($result)) {
    $arr[] = $row;
}
echo $arr; 
```

但是，不推荐使用 mysql_，请改用 mysqli。

如果要将其作为 JSON 传递，请使用以下命令：

```
echo json_encode($arr); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T14:44:26.977

当直接将输出分配给javascript变量时，您应该使用效果很好的json_encode

```
<?php

$result = mysql_query('blablabla');

//first convert result to an associative array
$myarray = array();
while($fetch = mysql_fetch_assoc($result)){
    $myarray[]=$fetch;
}

//converting $result to an array?
echo "<script>";
echo "var myArray = ".json_encode($myarray).";";
echo "</script>";
?>

<script>
//now you can use myArray global javascript variable
$('result').innerHTML = myArray.join(",");
</script> 
```

# actionscript-3 - AS3 - 无痛简单动画？

> ID：13586594
> 
> 赞同：0
> 
> 时间：2012-11-27T14:39:28.587
> 
> 标签：actionscript-3, flash-builder, flash-cs6

我有两个电影剪辑，我希望在屏幕上移动（一个水平，另一个垂直）我理想的场景是这样的 android 类型动画......

```
TranslateAnimation moveDown;

if (isMainGuiVisible)
{
    moveDown = new TranslateAnimation(0, 0, 0, 150);
}
else
{
    moveDown = new TranslateAnimation(0, 0, 150, 0);
}

moveDown.setDuration(time);
moveDown.setFillAfter(true);

frmMainGUI_mc.startAnimation(moveDown); 
```

这是在哪里做的...

```
moveDown = new TranslateAnimation (fromXDelta, toXDelta, fromYDelta, toYDelta) 
```

编辑：我基本上需要一种方法来让 MovieClip 按照我告诉它的方向在屏幕上移动和移动。如果这就像上面我告诉它来回移动 150 像素的地方，它会在屏幕上或其他方式上移动它......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T15:00:18.390

使用补间库。[Greensock 的 TweenLite](https://www.greensock.com/tweenlite/)很受欢迎，但还有其他的（我通常使用[GTween](http://gskinner.com/libraries/gtween/)）。

TweenLite 页面的基本示例：

```
TweenLite.to(mc, 1, {x:65, y:117}); 
```

其中 mc 是补间的显示对象，1 是补间的持续时间，x 和 y 是新的 x 和 y 位置。

# android - 加载进度条时加载图像

> ID：13586602
> 
> 赞同：-1
> 
> 时间：2012-11-27T14:40:02.627
> 
> 标签：android, android-asynctask, gallery

我想要一个从可绘制文件夹加载图像的异步任务。如何在另一个 xml 中显示进度条？我想在画廊中显示图像。

我该怎么做呢？** 如果您使用 hello Gallery 代码会很有帮助**

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T20:00:21.543

如果要显示进度条，则必须创建一个全局变量来引用进度条。

```
ProgressDialog myProgressDialog; 
```

然后，在异步任务中使用默认方法来处理progressBar

```
@Override
protected void onPreExecute()
{
    //create the dialog
    progressDialog = ProgressDialog.show(getBaseContext(), "Tittle","Description");
};      
@Override
protected Void doInBackground(Void... params)
{   
    //load the image  
    return null;
}       
@Override
protected void onPostExecute(Void result)
{
    //dismiss te dialog
    progressDialog.dismiss();
}; 
```

如果您想使用百分比条，您也可以使用该方法

```
onProgressUpdate() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T15:02:51.257

在异步任务中

向异步任务的构造函数发送一个进度条（您要更新哪个），在方法 doBackground 中，加载您的图片并使用方法 publisProgress（可能命名为这个，只是 alt + /），最后，在此方法中更新您的进度条..

# qtp - 如何在 IE 中安装“BHOManager CLASS”插件

> ID：13586606
> 
> 赞同：1
> 
> 时间：2012-11-27T14:40:15.477
> 
> 标签：qtp

这个“BHOManager CLASS”插件是一个支持在IE浏览器上运行QTP脚本的插件。

此插件的发行商是 Mercury Interactive Corp。

由于我的机器中的一些问题，我已经卸载了现有的 IE 浏览器并重新安装了它。在此之后我无法运行 QTP 脚本，因为缺少“BHOmanager Class”附加组件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T20:32:12.460

好吧，重新安装是最简单的选择，但让我们试试这个：
你能在 IE 中看到 BHOManager 类吗？

```
Go to IE > Tools > Manage Add-ons, make sure BHOManager class 
(Browser Helper Object) from Mercury Interative Corporation is 
enabled. 
```

建议禁用其他加载项，例如第三方工具栏、反病毒公司的加载项等。这是为了确保没有任何东西阻止 QTP 连接到浏览器，但这不是主要问题我认为在你的情况下。

如果是这种情况，您重新注册 BHOManager，但可能您没有正确的权限。

```
Close IE and all iexplore.exe processes in the task manager
Close QTP (or restart your machine)
Go to Start > Run, unregister and register BHOManager.dll: 
    regsvr32 -u c:\WINDOWS\system32\BHOManager.dll 
    regsvr32 c:\WINDOWS\system32\BHOManager.dll 
```

# jquery - jQuery插件问题

> ID：13586611
> 
> 赞同：0
> 
> 时间：2012-11-27T14:40:34.797
> 
> 标签：jquery, jquery-plugins

好的，所以我不知道如何在 jquery 插件之间共享设置，无论我做什么，我的设置在循环槽元素时都会被覆盖。这是我的代码：

```
(function ( $ ) {
    var default_settings = { 
        auto_start: false,
        tools: {}
    };

    function test(settings){
        //here is the problem it gets wrong element
        settings.tools.progress_bar.animate({
            width: "100%"
        });
    }

    var methods = {
        init: function(element, options){
            var settings = $.extend({}, default_settings, options);

            settings.tools.progress_bar = $('<div class="test"></div>');

            $(element).append(
                settings.tools.progress_bar
            );

            if(settings.auto_start)
                test(settings);

            $.data(element, "settings", settings);
        },

        start: function(){
            var settings = $.data(this, "settings");

            test(settings);
        }
    }

    $.fn.ajaxupload = function(method, options){
        return this.each(function(){
            if(methods[method])
                return methods[method].apply(this, [options]);
            else if(typeof method === 'object' || !method)
                return methods.init(this, method);
        });
    }
})( jQuery); 
```

我需要能够循环多个元素，然后调用公共函数来启动一些操作或其他东西，如下所示：

```
$(".container").ajaxupload();

$(".container2").ajaxupload();

//even though I call for container it will run animation for container2
$(".container").ajaxupload("start"); 
```

我也制作了[**jsfiddle**](http://jsfiddle.net/jupSp/3/)，但至少目前对我来说它几乎不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T15:16:53.430

简单替换

```
var settings = $.extend({}, default_settings, options); 
```

和

```
var settings = $.extend(true, {},  default_settings, options); 
```

演示：http: [//jsfiddle.net/jupSp/12/](http://jsfiddle.net/jupSp/12/)

如果没有深层复制（第一个参数为真），它只会复制第一级对象，在您的情况下，它会导致 `settings.tools`指向`default_settings.tools`并调用`settings.tools.progress_bar = $('<div class="test"></div>');`您覆盖`default_settings.tools.progress_bar`，并且最后一个 progress_bar 附加到所有元素。

# javascript - 调用 twitter api 来检查用户名

> ID：13586613
> 
> 赞同：1
> 
> 时间：2012-11-27T14:40:38.237
> 
> 标签：javascript, twitter

由于我的脚本运行在与 twitter 不同的域上，而且我使用 ajax 调用下一个 url：“http://api.twitter.com/1/users/show.json?screen_name="+screenName, I必须将数据类型设置为“jsonp”。

问题是，根据[https://dev.twitter.com/docs/auth/authorizing-request](https://dev.twitter.com/docs/auth/authorizing-request)，您必须使用 oauth 详细信息设置 HTTP 标头，并且在使用设置数据类型“jsonp”时无法为 http 调用设置标头”。

您可以调用上面的 url 来检查屏幕名称，但它有一个速率限制，我想通过使用我创建的 twitter 应用程序来增加限制。

怎么做到呢 ？

# javascript - 无法使标签在可缩放的 d3 sunburst 上工作

> ID：13586619
> 
> 赞同：2
> 
> 时间：2012-11-27T14:40:48.917
> 
> 标签：javascript, d3.js, label, hierarchy, sunburst-diagram

现在摆弄了几个小时后，我仍然无法在我的 D3 Sunburst 布局中制作标签。这是它的样子：

[http://codepen.io/anon/pen/BcqFu](http://codepen.io/anon/pen/BcqFu)

![在此处输入图像描述](../Images/00258897cf2414ba6d8d02b97eea1507.png)

我尝试了几种可以在网上找到的方法，这是我尝试过的示例列表，不幸的是，我都失败了：

[由于新用户限制，无法发布链接列表]

当然还有咖啡风味轮：[http ://www.jasondavies.com/coffee-wheel/](http://www.jasondavies.com/coffee-wheel/)

目前我用标题标签填充切片，只是在将鼠标悬停在元素上时才显示它。为此，我正在使用以下代码：

```
 vis.selectAll("path")
   .append("title")
   .text(function(d) { return d.Batch; }); 
```

有没有类似的东西可以用来显示切片中的批号？

--

更多信息：Jason Davies 使用此代码选择和添加文本节点：

```
var text = vis.selectAll("text").data(nodes);
var textEnter = text.enter().append("text")
  .style(...)
  ... 
```

虽然他的轮子的选择返回了 97 个结果（等于路径标签的数量），但我只得到一个，因此只能显示一个标签（中间的那个）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T18:46:46.987

需要一些技巧，但让你开始的基本部分是：

```
 var labels = vis.selectAll("text.label")
      .data(partition.nodes)
    .enter().append("text")
      .attr("class", "label")
      .style("fill", "black")
      .attr("transform", function(d) { return "translate(" + arc.centroid(d) + ")"; })
      .text(function(d, i) { return d.Batch;} ); 
```

你可以[在这里看到](http://codepen.io/joe/pen/vBJzD)

诀窍在于，除了确保将文本节点附加到适当的数据之外，您还必须告诉它们去哪里（带有弧形计算机方便的质心功能的变换属性）。

请注意，我不需要 vis.data([json]) 因为 svg 元素已经附加了数据（当您附加路径时），但我仍然必须将文本选择与每个分区的节点相关联。

我还对文本元素进行了分类，这样它们就不会与您将来可能要添加的任何其他文本元素混淆。

# c# - asp_sessionid cookie 默认路径是应用程序特定的

> ID：13586624
> 
> 赞同：2
> 
> 时间：2012-11-27T14:41:02.270
> 
> 标签：c#

我有一个网站，出于安全原因，我必须在其中为 asp.netSessionId cookie 和 .ASPXAUTH cookie 设置默认路径，该路径通常显示为“/”，特定于应用程序，经过大量 RND 我能够做到这一点，但我有一个混乱和一个问题现在描述如下：

1.  困惑是：为了使 cookie 路径应用程序特定，我写了一个方法说“setcookiepath”来这样做，并从全局文件的 session_start 中调用该方法，但这不起作用，因为路径在某些点击后有时会被重置或生成了超过 1 个 cookie，其中一个具有默认路径，另一个具有应用程序特定路径。所以我继续从 global.asax 文件中的其他事件中一个一个地调用我的方法，最后从每个事件中调用，但它仍然只在某些时候有效。然后，我仅在第一次使用我在 application_start 中设置的标志调用应用程序时才在 Session_Start 中放弃会话，并在 session_start 中的会话放弃后重置。这次它工作得非常好。现在，

2.  问题是：虽然现在我的代码正在为该网站工作，但是有一个从该网站内的子文件夹调用的管理模块。对于这个管理子模块，我的代码不起作用，即我面临的问题是。我第一次点击 url 时能够登录到管理模块，并为 ASP.NetSessionId 生成 2 个 cookie，一个具有默认路径，另一个具有应用程序特定路径。只要我的浏览器处于打开状态，当我关闭浏览器并尝试重新登录时，这就会起作用，现在我以前的会话 cookie 已被删除，并且我一直被重定向到登录页面，因为当我从登录重定向时，用户会话在某处之间失效页面到管理模块的主页，主网站模块中不会出现此问题。此外，在从 global.asax 中删除路径重置逻辑之后。

请帮忙。

路径集的代码是：

```
public void setCookieApp()
        {
            if (HttpContext.Current != null)
            {
                /// only apply session cookie persistence to requests requiring session information   
                if (HttpContext.Current.Handler is IRequiresSessionState || HttpContext.Current.Handler is IReadOnlySessionState)
                {
                    SessionStateSection sessionState = (SessionStateSection)ConfigurationManager.GetSection("system.web/sessionState");
                    string cookieName = sessionState != null && !string.IsNullOrEmpty(sessionState.CookieName) ? sessionState.CookieName : "ASP.NET_SessionId";
                    string cookieName1 = sessionState != null && !string.IsNullOrEmpty(sessionState.CookieName) ? sessionState.CookieName : ".ASPXAUTH";
                    //System.TimeSpan timeout = sessionState != null ? sessionState.Timeout : TimeSpan.FromMinutes(20);
                    /// Ensure ASP.NET Session Cookies are accessible throughout the subdomains.     
                    if (HttpContext.Current.Request.Cookies[cookieName] != null)
                    {
                        //Response.Cookies[cookieName].Value = Session.SessionID;
                        HttpContext.Current.Response.Cookies[cookieName].Path = HttpContext.Current.Request.ApplicationPath;
                        //Response.Cookies[cookieName].Expires = DateTime.Now.Add(timeout);
                    }
                    if (HttpContext.Current.Request.Cookies[cookieName1] != null)
                    {
                        //Response.Cookies[cookieName].Value = Session.SessionID;
                        HttpContext.Current.Response.Cookies[cookieName1].Path = HttpContext.Current.Request.ApplicationPath;
                        //Response.Cookies[cookieName].Expires = DateTime.Now.Add(timeout);
                    }
                }

                foreach (string k in HttpContext.Current.Request.Cookies.AllKeys)
                {
                    if (k.ToString().Contains("ASP.NET_SessionId"))
                    {
                        HttpContext.Current.Response.Cookies["ASP.NET_SessionId"].Path = HttpContext.Current.Request.ApplicationPath;
                    }
                    else if (k.ToString().Contains(".ASPXAUTH"))
                    {
                        HttpContext.Current.Response.Cookies[".ASPXAUTH"].Path = HttpContext.Current.Request.ApplicationPath;
                    }
                }
            }
        } 
```

# javascript - 将表格单元格内容存储到js数组中

> ID：13586632
> 
> 赞同：1
> 
> 时间：2012-11-27T14:41:24.830
> 
> 标签：javascript

我需要使用 tr 和 td 索引将表格单元格内容存储到数组中，如下所示：

```
myArray[tr_idx][td_idx]='value'; 
```

不需要将所有单元格的数据存储在数组中，而只需要存储几个具有特殊内容的单元格，但是如果我使用索引作为数组的键，我将有许多空数组元素。

例如

```
myArray[2][3]='data1';
myArray[4][3]='data2';

alert (myArray.toSource()) -> [, , [, , , "data1"], , [, , , "data2"]] 
```

也许还有另一种合适的方式来存储这种类型的数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T14:47:51.783

为什么不将它们存储为单独的 2 项数组`[row,col]`？由于表格单元格已经可以通过 访问`tableElement.rows[].cells[]`，因此您可以使用 2 个索引从表格中访问它们。

```
var storedCells = [];
// Store row 2, column 3
storedCells.push([2,3]); 
```

访问：

```
// Table row:
storedCells[0][0]
// Table column
storedCells[0][1]

//As in :
tableElement.rows[storedCells[0][0]].cells[storedCells[0][1]].innerHTML = "New cell value!" 
```

甚至更简洁，如果您更喜欢使用对象而不是数组：

```
storedCells.push({row: 2, column: 3});
storedCells.push({row: 4, column: 6}); 
```

访问：

```
tableElement.rows[storedCells[0].row].cells[storedCells[0].column].innerHTML = "New cell value!"; 
```

最后，如果您实际上不需要行/列索引，而是需要 DOM 节点本身，只需将它们推送到您的数组中。

```
var storedCells = [];
// Save references to some individual <td> nodes
storedCells.push(tableElement.rows[1].cells[2]);
storedCells.push(tableElement.rows[4].cells[6]); 
```

然后对它们进行简单的修改：

```
// Set the value of the second element:
storedCells[1].innerHTML = "New content!"; 
```

### 评论后更新：

如果您需要能够将单元格坐标附加到后端的新值，一个好的解决方案是扩展`{}`上面的对象示例以包含一个`value`属性。服务器可以传回 JSON 中的新值。

```
storedCells.push({row: 2, column: 3, value: ""});
storedCells.push({row: 4, column: 6, value: ""}); 
```

您的后端应该将 JSON 响应发送回脚本，其中包含相同类型的对象数组，其中`value:`已填充了新的单元格值。然后，您可以将其传递回表中：

```
// Pass the value attribute received from JSON into the cell's contents
tableElement.rows[storedCells[0].row].cells[storedCells[0].column].innerHTML = storedCells[0].value; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T14:48:27.567

不确定这是否是正确的答案，但您可以尝试在将单元格推入数组之前检查它们是否为空。在循环中放置一个 if 语句，它将检查单元格的值并将其与您需要的值进行比较。这样，您最终应该只得到一个值数组并且没有空值。但是您可能还需要记录索引。

# python - 无法从子目录中的文件自动完成本机 python 库

> ID：13586635
> 
> 赞同：1
> 
> 时间：2012-11-27T14:41:45.913
> 
> 标签：python, eclipse, pydev

`import`尝试在子文件夹中的文件中使用语句时，我遇到了 Eclipse PyDev 自动完成问题。

我的文件夹结构是：

```
src
--data
--libs
  --__init__.py
  --myclass.py
--logs
mainscript.py 
```

当我`import`在 mainscript.py (ie `import re`) 中使用时，一切正常，但是当我尝试`import`在 myclass.py 中使用时，eclipse 不显示自动完成显示。

# c# - 从 Active Directory 生成楼层地图

> ID：13586637
> 
> 赞同：0
> 
> 时间：2012-11-27T14:41:51.570
> 
> 标签：c#, sharepoint, active-directory, maps, web-parts

这可能是不可能的，但我想创建一个交互式平面图，其中办公室是静态的，但人名不断变化。信息必须来自 Active Directory，并且地图必须显示在 SharePoint 上。

这可能吗？您建议解决问题的最佳方法是什么？我们是否需要开发完整的 SharePoint Web 部件？市场上有东西吗？

真正欢迎任何意见。感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:16:40.473

我以前见过与报告服务类似的东西，但不使用活动目录作为数据源，如果您可以将 AD 转储到数据库或类似地访问它，报告服务将不是一个糟糕的选择。您只需将空白地图的 jpg 设置为背景，并在每个单独的办公桌/办公室上放置一个带有值的“表格”，这非常耗时，但最终效果很好。而且我确信 MS 在报告服务和共享点之间进行了某种集成。

# android - 如何在android中使listview为空

> ID：13586643
> 
> 赞同：0
> 
> 时间：2012-11-27T14:42:08.893
> 
> 标签：android

我在我的应用程序中使用 pulltorefresh。在 onRefresh() 中，我尝试通过保留 listView.setAdapter(null); 来删除所有项目；

但我的 listView.getCount() 仍然返回 1。

```
 listView.setOnRefreshListener(new OnRefreshListener() {

//          @Override
            public void onRefresh() {
                // Your code to refresh the list contents goes here

                scroll=true;
                pic.clear();
                id.clear();
                name.clear();
                msg.clear();
                img.clear();
                profimg.clear();
                objid.clear();
                comment.clear();
                weburl.clear();
                adapter.clear();
                likes.clear();
                like_or_unlike.clear();
                 previousTotal = 0;
                 adapter.clear();

                j=0;
                 loading = true;
                    webserv="https://graph.facebook.com/me/home?access_token="+accesstoken;
//              listView.setAdapter(null);
                System.out.println(listView.getCount());
//               doInBack dob=new doInBack();
//                 dob.execute(); 
                System.out.println(listView.getCount());
                 doback(webserv);
                    Log.e("hi","doback called");

            }
        }); 
```

我的 pulltorefresh 课程是

```
 package com.beerbro.utils;

import android.content.Context;
import android.util.AttributeSet;
import android.util.Log;
import android.view.*;
import android.view.ViewTreeObserver.OnGlobalLayoutListener;
import android.view.animation.*;
import android.view.animation.Animation.AnimationListener;
import android.widget.*;

import java.text.SimpleDateFormat;
import java.util.Date;

/**
 * A generic, customizable Android ListView implementation that has 'Pull to Refresh' functionality.
 * <p/>
 * This ListView can be used in place of the normal Android android.widget.ListView class.
 * <p/>
 * Users of this class should implement OnRefreshListener and call setOnRefreshListener(..)
 * to get notified on refresh events. The using class should call onRefreshComplete() when
 * refreshing is finished.
 * <p/>
 * The using class can call setRefreshing() to set the state explicitly to refreshing. This
 * is useful when you want to show the spinner and 'Refreshing' text when the
 * refresh was not triggered by 'Pull to Refresh', for example on start.
 * <p/>
 * For more information, visit the project page:
 * https://github.com/erikwt/PullToRefresh-ListView
 *
 * @author Erik Wallentinsen <dev+ptr@erikw.eu>
 * @version 1.0.0
 */
public class PullToRefreshListView extends ListView{

    private static final float PULL_RESISTANCE                 = 1.7f;
    private static final int   BOUNCE_ANIMATION_DURATION       = 700;
    private static final int   BOUNCE_ANIMATION_DELAY          = 100;
    private static final float BOUNCE_OVERSHOOT_TENSION        = 1.4f;
    private static final int   ROTATE_ARROW_ANIMATION_DURATION = 250;

    private static enum State{
        PULL_TO_REFRESH,
        RELEASE_TO_REFRESH,
        REFRESHING
    }

    /**
     * Interface to implement when you want to get notified of 'pull to refresh'
     * events.
     * Call setOnRefreshListener(..) to activate an OnRefreshListener.
     */
    public interface OnRefreshListener{

        /**
         * Method to be called when a refresh is requested
         */
        public void onRefresh();
    }

    private static int measuredHeaderHeight;

    private boolean scrollbarEnabled;
    private boolean bounceBackHeader;
    private boolean lockScrollWhileRefreshing;
    private boolean showLastUpdatedText;
    private String  pullToRefreshText;
    private String  releaseToRefreshText;
    private String  refreshingText;
    private String  lastUpdatedText;
    private SimpleDateFormat lastUpdatedDateFormat = new SimpleDateFormat("dd/MM HH:mm");

    private float                   previousY;
    private int                     headerPadding;
    private boolean                 hasResetHeader;
    private long                    lastUpdated = -1;
    private State                   state;
    private LinearLayout            headerContainer;
    private RelativeLayout          header;
    private RotateAnimation         flipAnimation;
    private RotateAnimation         reverseFlipAnimation;
    private ImageView               image;
    private ProgressBar             spinner;
    private TextView                text;
    private TextView                lastUpdatedTextView;
    private OnItemClickListener     onItemClickListener;
    private OnItemLongClickListener onItemLongClickListener;
    private OnRefreshListener       onRefreshListener;

    public PullToRefreshListView(Context context){
        super(context);
        init();
    }

    public PullToRefreshListView(Context context, AttributeSet attrs){
        super(context, attrs);
        init();
    }

    public PullToRefreshListView(Context context, AttributeSet attrs, int defStyle){
        super(context, attrs, defStyle);
        init();
    }

    @Override
    public void setOnItemClickListener(OnItemClickListener onItemClickListener){
        this.onItemClickListener = onItemClickListener;
    }

    @Override
    public void setOnItemLongClickListener(OnItemLongClickListener onItemLongClickListener){
        this.onItemLongClickListener = onItemLongClickListener;
    }

    /**
     * Activate an OnRefreshListener to get notified on 'pull to refresh'
     * events.
     *
     * @param onRefreshListener The OnRefreshListener to get notified
     */
    public void setOnRefreshListener(OnRefreshListener onRefreshListener){
        this.onRefreshListener = onRefreshListener;
    }

    /**
     * @return If the list is in 'Refreshing' state
     */
    public boolean isRefreshing(){
        return state == State.REFRESHING;
    }

    /**
     * Default is false. When lockScrollWhileRefreshing is set to true, the list
     * cannot scroll when in 'refreshing' mode. It's 'locked' on refreshing.
     *
     * @param lockScrollWhileRefreshing
     */
    public void setLockScrollWhileRefreshing(boolean lockScrollWhileRefreshing){
        this.lockScrollWhileRefreshing = lockScrollWhileRefreshing;
    }

    /**
     * Default is false. Show the last-updated date/time in the 'Pull ro Refresh'
     * header. See 'setLastUpdatedDateFormat' to set the date/time formatting.
     *
     * @param showLastUpdatedText
     */
    public void setShowLastUpdatedText(boolean showLastUpdatedText){
        this.showLastUpdatedText = showLastUpdatedText;
        if(!showLastUpdatedText) lastUpdatedTextView.setVisibility(View.GONE);
    }

    /**
     * Default: "dd/MM HH:mm". Set the format in which the last-updated
     * date/time is shown. Meaningless if 'showLastUpdatedText == false (default)'.
     * See 'setShowLastUpdatedText'.
     *
     * @param lastUpdatedDateFormat
     */
    public void setLastUpdatedDateFormat(SimpleDateFormat lastUpdatedDateFormat){
        this.lastUpdatedDateFormat = lastUpdatedDateFormat;
    }

    /**
     * Explicitly set the state to refreshing. This
     * is useful when you want to show the spinner and 'Refreshing' text when
     * the refresh was not triggered by 'pull to refresh', for example on start.
     */
    public void setRefreshing(){
        state = State.REFRESHING;
        scrollTo(0, 0);
        setUiRefreshing();
        setHeaderPadding(0);
    }

    /**
     * Set the state back to 'pull to refresh'. Call this method when refreshing
     * the data is finished.
     */
    public void onRefreshComplete(){
        state = State.PULL_TO_REFRESH;
        resetHeader();
        lastUpdated = System.currentTimeMillis();
    }

    /**
     * Change the label text on state 'Pull to Refresh'
     *
     * @param pullToRefreshText Text
     */
    public void setTextPullToRefresh(String pullToRefreshText){
        this.pullToRefreshText = pullToRefreshText;
        if(state == State.PULL_TO_REFRESH){
            text.setText(pullToRefreshText);
        }
    }

    /**
     * Change the label text on state 'Release to Refresh'
     *
     * @param releaseToRefreshText Text
     */
    public void setTextReleaseToRefresh(String releaseToRefreshText){
        this.releaseToRefreshText = releaseToRefreshText;
        if(state == State.RELEASE_TO_REFRESH){
            text.setText(releaseToRefreshText);
        }
    }

    /**
     * Change the label text on state 'Refreshing'
     *
     * @param refreshingText Text
     */
    public void setTextRefreshing(String refreshingText){
        this.refreshingText = refreshingText;
        if(state == State.REFRESHING){
            text.setText(refreshingText);
        }
    }

    private void init(){
        setVerticalFadingEdgeEnabled(false);

        headerContainer = (LinearLayout) LayoutInflater.from(getContext()).inflate(R.layout.ptr_header, null);
        header = (RelativeLayout) headerContainer.findViewById(R.id.ptr_id_header);
        text = (TextView) header.findViewById(R.id.ptr_id_text);
        lastUpdatedTextView = (TextView) header.findViewById(R.id.ptr_id_last_updated);
        image = (ImageView) header.findViewById(R.id.ptr_id_image);
        spinner = (ProgressBar) header.findViewById(R.id.ptr_id_spinner);

        pullToRefreshText = getContext().getString(R.string.ptr_pull_to_refresh);
        releaseToRefreshText = getContext().getString(R.string.ptr_release_to_refresh);
        refreshingText = getContext().getString(R.string.ptr_refreshing);
        lastUpdatedText = getContext().getString(R.string.ptr_last_updated);

        flipAnimation = new RotateAnimation(0, -180, RotateAnimation.RELATIVE_TO_SELF, 0.5f, RotateAnimation.RELATIVE_TO_SELF, 0.5f);
        flipAnimation.setInterpolator(new LinearInterpolator());
        flipAnimation.setDuration(ROTATE_ARROW_ANIMATION_DURATION);
        flipAnimation.setFillAfter(true);

        reverseFlipAnimation = new RotateAnimation(-180, 0, RotateAnimation.RELATIVE_TO_SELF, 0.5f, RotateAnimation.RELATIVE_TO_SELF, 0.5f);
        reverseFlipAnimation.setInterpolator(new LinearInterpolator());
        reverseFlipAnimation.setDuration(ROTATE_ARROW_ANIMATION_DURATION);
        reverseFlipAnimation.setFillAfter(true);

        addHeaderView(headerContainer);
        setState(State.PULL_TO_REFRESH);
        scrollbarEnabled = isVerticalScrollBarEnabled();

        ViewTreeObserver vto = header.getViewTreeObserver();
        vto.addOnGlobalLayoutListener(new PTROnGlobalLayoutListener());

        super.setOnItemClickListener(new PTROnItemClickListener());
        super.setOnItemLongClickListener(new PTROnItemLongClickListener());
    }

    private void setHeaderPadding(int padding){
        headerPadding = padding;

        MarginLayoutParams mlp = (ViewGroup.MarginLayoutParams) header.getLayoutParams();
        mlp.setMargins(0, Math.round(padding), 0, 0);
        header.setLayoutParams(mlp);
    }

    @Override
    public boolean onTouchEvent(MotionEvent event){
        if(lockScrollWhileRefreshing
                && (state == State.REFRESHING || getAnimation() != null && !getAnimation().hasEnded())){
            return true;
        }

        switch(event.getAction()){
            case MotionEvent.ACTION_DOWN:
                if(getFirstVisiblePosition() == 0) previousY = event.getY();
                else previousY = -1;
                break;

            case MotionEvent.ACTION_UP:
                if(previousY != -1 && (state == State.RELEASE_TO_REFRESH || getFirstVisiblePosition() == 0)){
                    switch(state){
                        case RELEASE_TO_REFRESH:
                            setState(State.REFRESHING);
                            bounceBackHeader();

                            break;

                        case PULL_TO_REFRESH:
                            resetHeader();
                            break;
                    }
                }
                break;

            case MotionEvent.ACTION_MOVE:
                if(previousY != -1){
                    float y = event.getY();
                    float diff = y - previousY;
                    if(diff > 0) diff /= PULL_RESISTANCE;
                    previousY = y;

                    int newHeaderPadding = Math.max(Math.round(headerPadding + diff), -header.getHeight());

                    if(newHeaderPadding != headerPadding && state != State.REFRESHING){
                        setHeaderPadding(newHeaderPadding);

                        if(state == State.PULL_TO_REFRESH && headerPadding > 0){
                            setState(State.RELEASE_TO_REFRESH);

                            image.clearAnimation();
                            image.startAnimation(flipAnimation);
                        }else if(state == State.RELEASE_TO_REFRESH && headerPadding < 0){
                            setState(State.PULL_TO_REFRESH);

                            image.clearAnimation();
                            image.startAnimation(reverseFlipAnimation);
                        }

                        return true;
                    }
                }

                break;
        }

        return super.onTouchEvent(event);
    }

    private void bounceBackHeader(){
        int yTranslate = state == State.REFRESHING ?
                header.getHeight() - headerContainer.getHeight() :
                -headerContainer.getHeight() - headerContainer.getTop();

        TranslateAnimation bounceAnimation = new TranslateAnimation(
                TranslateAnimation.ABSOLUTE, 0,
                TranslateAnimation.ABSOLUTE, 0,
                TranslateAnimation.ABSOLUTE, 0,
                TranslateAnimation.ABSOLUTE, yTranslate);

        bounceAnimation.setDuration(BOUNCE_ANIMATION_DURATION);
        bounceAnimation.setFillEnabled(true);
        bounceAnimation.setFillAfter(false);
        bounceAnimation.setFillBefore(true);
        bounceAnimation.setInterpolator(new OvershootInterpolator(BOUNCE_OVERSHOOT_TENSION));
        bounceAnimation.setAnimationListener(new HeaderAnimationListener(yTranslate));

        startAnimation(bounceAnimation);
    }

    private void resetHeader(){
        if(getFirstVisiblePosition() > 0){
            setHeaderPadding(-header.getHeight());
            setState(State.PULL_TO_REFRESH);
            return;
        }

        if(getAnimation() != null && !getAnimation().hasEnded()){
            bounceBackHeader = true;
        }else{
            bounceBackHeader();
        }
    }

    private void setUiRefreshing(){
        spinner.setVisibility(View.VISIBLE);
        image.clearAnimation();
        image.setVisibility(View.INVISIBLE);
        text.setText(refreshingText);
    }

    private void setState(State state){
        this.state = state;
        switch(state){
            case PULL_TO_REFRESH:
                spinner.setVisibility(View.INVISIBLE);
                image.setVisibility(View.VISIBLE);
                text.setText(pullToRefreshText);

                if(showLastUpdatedText && lastUpdated != -1){
                    lastUpdatedTextView.setVisibility(View.VISIBLE);
                    lastUpdatedTextView.setText(String.format(lastUpdatedText, lastUpdatedDateFormat.format(new Date(lastUpdated))));
                }

                break;

            case RELEASE_TO_REFRESH:
                spinner.setVisibility(View.INVISIBLE);
                image.setVisibility(View.VISIBLE);
                text.setText(releaseToRefreshText);
                break;

            case REFRESHING:
                setUiRefreshing();

                lastUpdated = System.currentTimeMillis();
                if(onRefreshListener == null){
                    setState(State.PULL_TO_REFRESH);
                }else{
                    onRefreshListener.onRefresh();
                }

                break;
        }
    }

    @Override
    protected void onScrollChanged(int l, int t, int oldl, int oldt){
        super.onScrollChanged(l, t, oldl, oldt);

        if(!hasResetHeader){
            if(measuredHeaderHeight > 0 && state != State.REFRESHING){
                setHeaderPadding(-measuredHeaderHeight);
            }

            hasResetHeader = true;
        }
    }

    private class HeaderAnimationListener implements AnimationListener{

        private int height, translation;
        private State stateAtAnimationStart;

        public HeaderAnimationListener(int translation){
            this.translation = translation;
        }

        public void onAnimationStart(Animation animation){
            stateAtAnimationStart = state;

            android.view.ViewGroup.LayoutParams lp = getLayoutParams();
            height = lp.height;
            lp.height = getHeight() - translation;
            setLayoutParams(lp);

            if(scrollbarEnabled){
                setVerticalScrollBarEnabled(false);
            }
        }

//        @Override
        public void onAnimationEnd(Animation animation){
            setHeaderPadding(stateAtAnimationStart == State.REFRESHING ? 0 : -measuredHeaderHeight - headerContainer.getTop());
            setSelection(0);

            android.view.ViewGroup.LayoutParams lp = getLayoutParams();
            lp.height = height;
            setLayoutParams(lp);

            if(scrollbarEnabled){
                setVerticalScrollBarEnabled(true);
            }

            if(bounceBackHeader){
                bounceBackHeader = false;

                postDelayed(new Runnable(){

//                    @Override
                    public void run(){
                        resetHeader();
                    }
                }, BOUNCE_ANIMATION_DELAY);
            }else if(stateAtAnimationStart != State.REFRESHING){
                setState(State.PULL_TO_REFRESH);
            }
        }

//        @Override
        public void onAnimationRepeat(Animation animation){}
    }

    private class PTROnGlobalLayoutListener implements OnGlobalLayoutListener{

//        @Override
        public void onGlobalLayout(){
            int initialHeaderHeight = header.getHeight();

            if(initialHeaderHeight > 0){
                measuredHeaderHeight = initialHeaderHeight;

                if(measuredHeaderHeight > 0 && state != State.REFRESHING){
                    setHeaderPadding(-measuredHeaderHeight);
                    requestLayout();
                }
            }

            getViewTreeObserver().removeGlobalOnLayoutListener(this);
        }
    }

    private class PTROnItemClickListener implements OnItemClickListener{
//
//        @Override
        public void onItemClick(AdapterView<?> adapterView, View view, int position, long id){
            hasResetHeader = false;

            if(onItemClickListener != null && state == State.PULL_TO_REFRESH){
                // Passing up onItemClick. Correct position with the number of header views
                onItemClickListener.onItemClick(adapterView, view, position - getHeaderViewsCount(), id);
            }
        }
    }

    private class PTROnItemLongClickListener implements OnItemLongClickListener{

//        @Override
        public boolean onItemLongClick(AdapterView<?> adapterView, View view, int position, long id){
            hasResetHeader = false;

            if(onItemLongClickListener != null && state == State.PULL_TO_REFRESH){
                // Passing up onItemLongClick. Correct position with the number of header views
                return onItemLongClickListener.onItemLongClick(adapterView, view, position - getHeaderViewsCount(), id);
            }

            return false;
        }
    }

} 
```

我真的不明白为什么它返回 1 而不是 0。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T14:51:51.067

您是否尝试过清除列表并通知适配器？我的意思是，如果我使用字符串数组来制作列表：

```
ArrayList<String> names=new ArrayList<String>();
ArrayAdapter<String> adapter=new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, names);
ListView listView = (ListView) findViewById(android.R.id.list);
listView.setAdapter(adapter); 
```

如果我想清除它，我会：

```
names.clear();
adapter.notifyDataSetChanged(); 
```

# c# - SharePoint 2007 - 更新所有网站主页

> ID：13586648
> 
> 赞同：0
> 
> 时间：2012-11-27T14:42:27.313
> 
> 标签：c#, sharepoint-2007, web-parts, moss

我想知道是否有办法更新所有站点主页以显示新的自定义 Web 部件。

我有一个包含 100 多个子网站的网站集，并且我创建了一个自定义 Web 部件，我想在所有网站主页中显示它。你建议最好的方法是什么，因为手动执行此操作需要相当多的时间时间？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T15:11:00.190

首先编写代码以编程方式将 Web 部件添加到单个主页。具体如何执行此操作将根据您的主页的结构方式、是否为发布页面等而有所不同。这很可能，但实现可能会有所不同。你可能会使用类似的东西：

```
using(SPSite site = new SPSite("http://localhost"))
using(SPWeb web = site.RootWeb)
{
    web.AllowUnsafeUpdates = true;
    SPLimitedWebPartManager webParts = web.GetLimitedWebPartManager("Pagees/Home.aspx"
        , System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared);

    MyWebPart wp = new MyWebPart();      // your custom webpart
    wp.Title = "My WebPart";

    webParts.AddWebPart(wp, "Left", 0);
    webParts.SaveChanges(wp);
} 
```

在线搜索主题时有很多变化。

一旦你有了它，你可以创建一个控制台应用程序或一个要在顶级站点上执行的功能，打开每个子站点，然后执行上面的代码。

# tfs - 无法访问 TFS Web 访问 - 类未注册错误

> ID：13586651
> 
> 赞同：3
> 
> 时间：2012-11-27T14:42:37.987
> 
> 标签：tfs, visual-studio-2012, team-explorer

我已经将 Visual Studio 2012 与 Microsoft Team Foundation Server 一起使用了一段时间。

我今天注意到，当我在团队资源管理器中单击“Web 访问”时，它会抛出一个错误，显示“类未注册”。其他一切似乎都有效。

知道为什么我会看到这个错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:12:26.560

如果您转到“添加/删除程序”并为 Team Foundation Server 运行修复，则应该可以解决问题。

此外，您应该考虑安装可用于 TFS 的最新季度更新。 [http://www.microsoft.com/en-us/download/details.aspx?id=30658](http://www.microsoft.com/en-us/download/details.aspx?id=30658)

# c - 在 C 中重新分配内存时编译中断

> ID：13586655
> 
> 赞同：3
> 
> 时间：2012-11-27T14:42:45.407
> 
> 标签：c, memory, memory-management, malloc

我正在尝试一个例子

```
int main(){
    int count = 5;
    char *a = "JOSUA";
    char *c = "JANETALAE";
    char *b = NULL;
    char *d = NULL;
    b = (char *)malloc(sizeof(char)*5);
    b = a;
    if(b == NULL){
        printf("\n malloc failed");
    }
    printf("\nChar is:%s\n",b);
    d = (char *)realloc(b,sizeof(char) * 9);
    if(d == NULL){
        printf("\n realloc failed");
    }
    else{
        b = d;
        b = c;                                                                                                                                                                             
    }
    printf("\nChar is:%s\n",b);
    return 0;
} 
```

我正在尝试一个示例程序来分配和重新分配内存。但是我无法重新分配内存并获得编译中断，如下所示。

```
Char is:JOSUA
*** glibc detected *** ./realloc: realloc(): invalid pointer: 0x080485b4 ***
======= Backtrace: ========= /lib/libc.so.6[0x88ffd1] /lib/libc.so.6(realloc+0x2cf)[0x89613f] /lib/libc.so.6(realloc+0x2e7)[0x896157] ./realloc[0x80484aa] /lib/libc.so.6(__libc_start_main+0xe6)[0x836e16] ./realloc[0x8048391]
======= Memory map: ======== 007fc000-0081c000 r-xp 00000000 fd:00 659977     /lib/ld-2.12.90.so 0081c000-0081d000 r--p 0001f000 fd:00 659977     /lib/ld-2.12.90.so 0081d000-0081e000 rw-p 00020000 fd:00 659977     /lib/ld-2.12.90.so 00820000-009ad000 r-xp 00000000 fd:00 660018     /lib/libc-2.12.90.so 009ad000-009af000 r--p 0018c000 fd:00 660018     /lib/libc-2.12.90.so 009af000-009b0000 rw-p 0018e000 fd:00 660018     /lib/libc-2.12.90.so 009b0000-009b3000 rw-p 00000000 00:00 0  00a29000-00a45000 r-xp 00000000 fd:00 660039     /lib/libgcc_s-4.5.1-20100924.so.1 00a45000-00a46000 rw-p 0001b000 fd:00 660039     /lib/libgcc_s-4.5.1-20100924.so.1 00a84000-00a85000 r-xp 00000000 00:00 0          [vdso] 08048000-08049000 r-xp 00000000 fd:02 9440701    /home/user/beata/c_samples/realloc 08049000-0804a000 rw-p 00000000 fd:02 9440701    /home/user/beata/c_samples/realloc 092ac000-092cd000 rw-p 00000000 00:00 0          [heap] b78bc000-b78bd000 rw-p 00000000 00:00 0  b78d3000-b78d5000 rw-p 00000000 00:00 0  bfbd8000-bfbf9000 rw-p 00000000 00:00 0          [stack] Aborted (core dumped) 
```

无法理解为什么会发生编译中断。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T14:46:20.237

您不能在静态内存变量（实际上是 a）上使用 realloc：

```
b = (char *)malloc(sizeof(char)*5);
b = a; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T14:51:17.947

也许替换：

```
b=a; 
```

和：

```
strcpy(b,a); 
```

会让你朝着正确的方向前进。我想也许你认为那`b=a;`是实际在做什么？

但请确保您在堆上分配了足够的内存，即不要忘记字符串末尾隐含的 '\0'，例如

```
b = (char *)malloc(sizeof(char)*5); 
```

应该：

```
b = malloc(6); 
```

如果你想适应`"JOSUA"`它（`"JOSUA"`实际上是`"JOSUA\0"`）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T14:45:04.730

`realloc()`正如错误所说，您正在传递一个无效的指针。

它来自这一行：

```
b = a; 
```

`malloc()`用字符串文字的地址覆盖的返回值。您不能将其传递给`realloc()`.

你在这个程序中的整体逻辑非常糟糕；如果`malloc()`失败，则没有理由相信`realloc()`会成功（假设上面的行是一个编辑错误，不应该存在）。

此外，这是一个*运行时*错误，而不是您所说的“编译错误”。

此外，典型的错误适用：

1.  在 C 中，[不要强制转换`malloc()`](https://stackoverflow.com/a/605858/28169). 这也同样适用于`realloc()`。
2.  不要用`sizeof (char)`, 只是写 1 的一种很麻烦的方式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-27T14:45:11.840

```
 b = (char *)malloc(sizeof(char)*5);
 b = a; 
```

在那里，您刚刚丢失了返回的地址`malloc`。

如果您传递任何其他导致**未定义行为**的地址，则需要传递`malloc`to返回的地址，这就是您的代码所做的。`realloc`

 *** * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-27T14:45:38.613

您尝试重新分配尚未 malloc 的内存：

```
 9     b = (char *)malloc(sizeof(char)*5);
 10     b = a; 
```

你这里的第 9 行到第 10 行就变得无用了，并且 malloc 返回的地址丢失了。此外，[不要强制返回 malloc](https://stackoverflow.com/questions/605845)，因为这会隐藏其他错误。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-27T14:50:01.767

这是行：

```
10     b = a; 
```

在这里，您将指针 b 设置为存储在指针 a 中的地址。所以 b 现在指向字符串“JOSHUA”。

当您尝试重新分配 b 时，您正在向它提供该地址，该地址最初不是由 malloc 分配的。你想要做的是将字符串从a复制到b：

```
strcpy(b,a); 
```

但是，您将需要增加 b 指向的内存大小。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-27T16:40:29.663

**问题是** b = (char *) malloc(sizeof(char) * 5); 然后立即通过分配 a 指向的基地址来更改 b 指向的地址。即**b = a; /* 这是错误 */**。对于重新分配，您必须传递 malloc 返回的地址，而不是 a 指向的基地址。**

# c# - 如何编写与 Microsoft.VisualBasic.FileIO.TextFieldParser 兼容的 csv 格式？

> ID：13586656
> 
> 赞同：1
> 
> 时间：2012-11-27T14:42:44.967
> 
> 标签：c#, .net

我使用[Microsoft.VisualBasic.FileIO.TextFieldParser](http://msdn.microsoft.com/en-us/library/vstudio/microsoft.visualbasic.fileio.textfieldparser%28v=vs.100%29.aspx)来解析 csv 文件。

我现在想将一些数据导出为 csv 格式。为了在困难的 csv 行为（引用、转义等）上保持一致，我想使用相同的类或类似的类——最好是在标准库中，这样我就可以相信它是兼容的。

我怎样才能做到这一点？

* * *

编辑：我要导出的数据是`List<List<string>>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T14:45:20.797

`TextFieldParser`只能用于*读取*结构化文本文件，例如 CSV 文件。

为了写作，我建议使用[File Helpers](http://filehelpers.sourceforge.net/)，它也可以用来读取 CSV 文件（所以可以完全替代）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-07T13:32:20.047

在标准 CSV 中转义的字符是 Tab、CR、LF、双引号和逗号：

```
char[] chars = { '\t', '\r', '\n', '\"', ',' };

if (stringField.IndexOfAny(chars) >= 0)  
{
    stringField = '\"' + stringField.Replace("\"", "\"\"") + '\"'; // replace " with "" 
} 
```

它可以很容易地用 Excel 测试或从`DataGridView`控件中复制。

# azure - Windows Azure Solr 错误

> ID：13586660
> 
> 赞同：0
> 
> 时间：2012-11-27T14:42:52.907
> 
> 标签：azure, solr, lucene.net

我在我的本地机器上尝试[这个东西。](https://github.com/MSOpenTech/Windows-Azure-Solr/)我有 64bit win 8，并安装了 Visual Studio 2012 Ultimate。除此之外，我也有 JRE。当我尝试构建项目时，它的构建没有任何问题。但是当我尝试执行相同的操作时，我在下一行出现错误。

```
 var roleInstances = RoleEnvironment.Roles[bMaster ? "SolrMasterHostWorkerRole" : "SolrSlaveHostWorkerRole"].Instances; 
```

因为**角色发现数据不可用**

有没有人遇到过这种问题？以及如何克服它？我在某处读到

```
 <Runtime executionContext="elevated"> 
```

应添加到服务定义文件中。但它已经存在并且无法正常工作:(

提前致谢。

# reference - Drupal 7反向节点引用url效果

> ID：13586663
> 
> 赞同：0
> 
> 时间：2012-11-27T14:43:09.317
> 
> 标签：reference, drupal-7, nodes

我喜欢使用[Node Reference URL](http://drupal.org/project/nodereference_url)模块，但在我当前的项目中，我需要类似的东西，但效果略有不同。

我有一个名为**Event**的节点类型，它需要为我创建的每个事件准确引用 3 个 Web 表单。使用 node_reference_url 配置意味着我将在 webform 节点类型中设置节点引用字段，并选择我的事件类型作为目标。

**但是，我需要找到一种方法来扭转这种情况。我正在寻找代码提示（*或模块，如果它存在*），这将允许我配置事件类型，以便我可以在每个事件页面上创建链接，以创建总共 3 个网络表单及其 NID，以保存为参考父事件页面。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T15:20:48.020

我正在使用[实体引用](http://drupal.org/project/entityreference)来做这样的事情。它允许您向内容类型添加一个或多个参考字段。这些引用可以是节点、配置文件等。如果您将这些添加到您的**事件**中，您可能会从那里选择网络表单。

我知道这个插件还与视图集成（在高级 > 关系下），允许您访问引用内容的字段。（包括标题和指向节点选项的链接。）

*想要更进一步？*

看看[参考对话框](http://drupal.org/project/references_dialog)。此模块允许您构建与添加、编辑和删除按钮相结合的类似参考字段。如果您所指的内容尚未创建，您可以在叠加层中创建。

# blackberry-10 - 从 TabbedPane 推送屏幕

> ID：13586672
> 
> 赞同：1
> 
> 时间：2012-11-27T14:43:32.833
> 
> 标签：blackberry-10, blackberry-cascades

你怎么能把屏幕推到 TabbedPane 的顶部？

我知道这可以通过如下所示的 NavigationPane 实现：

```
NavigationPane {
id: navigationPane
Page {
    Container {
        Label { 
            text: "First page"
        }
    }

    actions: [
        ActionItem {
            title: "Next page"
            onTriggered: {
                var page = pageDefinition.createObject();
                navigationPane.push(page);
attachedObjects: ComponentDefinition {
id: pageDefinition;
source: "secondpage.qml"
    }
  }
 ]
}
... 
```

但是我在 TabbedPane 上尝试了同样的方法，但它失败了，因为 TabbedPanes 没有推送方法。

该场景是使用应用程序菜单推送关于屏幕。

帮助..？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T18:32:16.183

没有将 Tab 推到 TabbedPane 上的比喻。[如果选项卡已作为 TabbedPane 的子项存在，则可以通过调用](https://developer.blackberry.com/cascades/reference/bb__cascades__tabbedpane.html#setactivetab)使其成为活动选项卡 `setActiveTab()`

如果选项卡还不是 TabbedPane 的子项，则必须[`add()`](https://developer.blackberry.com/cascades/reference/bb__cascades__tabbedpane.html#add)首先使用它。

但听起来你真正想要的是一张[表格](https://developer.blackberry.com/cascades/reference/bb__cascades__sheet.html)

```
Page {
attachedObjects: [
    Sheet {
        id: mySheet
        content: Page {
            Button {
                text: "Close Sheet"
                onClicked: mySheet.close()
            }
        }
    }
]
actions: [
    ActionItem {
        title: "Show Sheet"
        ActionBar.placement: ActionBarPlacement.OnBar
        onTriggered: {
           mySheet.open();
        }
    }
]
} 
```

# mysql - MySQL 倒数搜索

> ID：13586677
> 
> 赞同：1
> 
> 时间：2012-11-27T14:43:44.677
> 
> 标签：mysql, graph, large-data

我有一个表，它存储有向图的边缘，如下所示：

```
Table EDGES
  FROM_NODE | TO_NODE | STRENGTH
  1         | 1       | 8
  1         | 2       | 5
  2         | 1       | 4
  1         | 3       | 2
  3         | 4       | 1 
```

而且我正在尝试搜索在两个方向上都支持强度 > 3 的边。在上面的示例中，1 -> 2 和 2 -> 1 都存在，但是，1 <-> 3 在两个方向上都不存在. 1 -> 1 不算数，原因很明显。

主要的复杂性是有超过 1,000,000 条边要搜索，并且到目前为止我尝试过的所有查询都失败了，然后我才能检查它们是否有效。

任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T14:55:24.473

对我来说，最直接的解决方案是：

```
select one.from_node, one.to_node 
from edges one 
join edges other on (one.to_node = other.from_node AND one.from_node = other.to_node)
where one.strength > 3 AND other.strength > 3
    AND one.from_node <> one.to_node 
```

如果您有大量数据，那么重新考虑表上的索引并提高执行限制可能是个好主意。

[这](http://sqlfiddle.com/#!2/84965/3)是一个用于检查查询的 sql fiddle。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T15:25:46.863

我认为你可以使用这样的东西：

```
select
  least(FROM_NODE, TO_NODE) as n1,
  greatest(FROM_NODE, TO_NODE) as n2
from
  edges
where FROM_NODE<>TO_NODE and nodes.strength>3
group by n1, n2
having count(*)=2 
```

# c++ - 如何使 C++ 日志记录更简洁

> ID：13586678
> 
> 赞同：0
> 
> 时间：2012-11-27T14:43:44.947
> 
> 标签：c++, logging, log4cxx

我正在使用 log4cxx 登录 C++ 项目。目前，我的日志调用看起来像

```
LOG4CXX_INFO(log4cxx::Logger::getRootLogger(), "parsed " << lc << " lines"); 
```

这仍然太冗长且难以记住。理想情况下，日志记录语句看起来类似于

```
log.debug("parsed %d lines", lc) 
```

a) 我能做些什么来获得更简洁的日志记录语句？b) 是否可以使用类似`printf`- 的语法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T14:53:01.997

您可以使用 Boost.Format 库[http://www.boost.org/doc/libs/1_52_0/libs/format/doc/format.html](http://www.boost.org/doc/libs/1_52_0/libs/format/doc/format.html)

PS。C++11 便捷函数示例：

```
#include <boost/format.hpp>
#include <iostream>

void
log (const boost::format &fmt)
{
  std::cout << fmt;
}

template<typename T, typename... Args>
void
log (boost::format &fmt, const T &v, Args... args)
{
  log (boost::format (fmt) % v, args ...);
}

template<typename... Args>
void
log (const char *fmt, Args... args)
{
  boost::format f (fmt);
  log (f, args ...);
}

int
main ()
{
  log ("some number %1% and some other %2%", 1, 3.5f);
} 
```

# php - 如何有效处理业务逻辑错误？

> ID：13586679
> 
> 赞同：1
> 
> 时间：2012-11-27T14:43:46.953
> 
> 标签：php, error-handling, business-logic

假设我们有一些通过组合构建的对象层次结构。是否有任何模式可以在内部对象中注册业务逻辑错误并将它们传递给上层对象？

我只是厌倦了所有这些*addErrors*，每个级别的*getErrors*，我觉得我做错了什么。

我知道异常，但我不介意在这种情况下如何使用它们。业务逻辑错误在技术上不是危急情况，应该会导致程序执行中断。实际上根本不应该中断，因为我们需要记录错误并继续前进。

*提前感谢您分享您的智慧和知识）*

小片段来说明问题：

```
class ErrorContainer {
    private $errors = array();
    function addError($error) { if (!is_array($error)) { $this->errors[] = $error;} else { $this->errors = array_merge($this->errors, $error); } }
    function getErrors() { return $this->errors[]; }
    function hasErrors() { return !empty($this->errors); }
}

class Processor extends ErrorContainer {
    function process($account_id, $orders) {
        $account = new Account();
        if (!$account->loadById($account_id)) { $this->addErrors($account->getErrors);}

        foreach ($orders as $order_id) {
            $order = new Order();
            if (!$order->loadById($order_id)) { $this->addErrors($order->getErrors);}
        }
    }

    return $this->hasErrors();
}

class Account extends ErrorContainer {
    function loadById($account_id) {
        $account = select_from_database($account_id);
        if (!$account) { $this->addError("Account is missing"); }
        if (!$account['active']) { $this->addError("Account is inactive"); }
        // and so on, some checks may add errors in a cycle

        return $this->hasErrors();
    }
}

class Order extends ErrorContainer {} // very similar to Account, but has its own checks

//Usage:

$errors = array();
$items = load_items_from_xml($xml);
foreach ($items as $item) {
    $processor = new Processor();
    if (!$processor->process($item['account_id'], $item['orders'])) {
        $errors = array_merge($errors, $processor->getErrors());
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T14:52:16.857

异常不仅仅在紧急情况下使用，但在您的情况下，使用您现在拥有的错误系统并不是一个坏主意。您可能会考虑使用常量而不是文本来表示错误，并在每个类中定义所有可能的错误常量。

```
class Account extends ErrorContainer {
    const ERR_ACC_MISSING = 0;
    const ERR_ACC_INACTIVE = 1;
    function loadById($account_id) {
        $account = select_from_database($account_id);
        if (!$account) { $this->addError(ERR_ACC_MISSING); }
        if (!$account['active']) { $this->addError(ERR_ACC_INACTIVE); }
        // and so on, some checks may add errors in a cycle

        return $this->hasErrors();
    }
} 
```

# javascript - 使用 JavaScript 对 JSON 对象进行排序

> ID：13586682
> 
> 赞同：0
> 
> 时间：2012-11-27T14:44:10.590
> 
> 标签：javascript, jquery, arrays, json

好的。

我有一个 JSON 对象，其中对象的每个项目都是顶级对象……没有嵌套关系。有些项目是嵌套的，但一切都是顶级的。

设置嵌套关系的方式是通过 ID 值。

*   项目 a = item_a
*   与 a 相关的项目 b = item_a.item_b
*   项目 c = item_c
*   与 c 相关的项目 d = item_c.item_d
*   与 d 相关的项目 e = item_c.item_d.item_e

我尝试`.`在整个 json 对象上拆分和循环并对它们进行排序。我已经尝试了 4 或 5 种我能想到的不同方法，但都没有正常工作。

我试图最终得到的是一个看起来像这样的单个对象。

```
Obj = [{
    item_a: {
        nestedItems: [{
            item_b: {}
        }]
    },
    item_c: {
        nestedItems: [{
            item_d: {
                nestedItems: {
                    item_e: {}
                }
            }
        }]
    }    
}]; 
```

我无法更改输出，所以我们不要问这个问题。这是我试图解决的问题。谁能帮我理解最好的排序方法？

这是我目前的状态......但它远未完成：

```
function getNestedAttributes(attrs) // attrs is the JSON object
{
    var nested = [];

    for ( var i=0; i<attrs.length; i++ )
    {
        var idLevels = splitId(attrs[i].id); // split on . return array

        if ( idLevels.length == 1 )
        {
            nested[idLevels[0]] = attrs[i];
            nested[idLevels[0]]['nestedAttributes'] = [];
        }

        if ( idLevels.length > 1 )
        {
            nested[idLevels[0]]['nestedAttributes'].push(attrs[i]);
        }

    }

    console.log(nested);

} 
```

以上工作在一定程度上。我把所有东西都变成了一个数组，这很好，但它只适用于嵌套了一层的对象。有些项目最多嵌套 4 层。

必须有更好的方法在 JS 中循环。

JSON：

```
attributes: [
{
    id: "item_a",
    name: "Item A Name",
    ...
},
{
    id: "item_a.item_b",
    name: "Item B Name",
    ...
},
{
    id: "item_a.item_c",
    name: "Item C Name",
    ...
},
{
    id: "item_d",
    name: "Item D Name",
    ...
},
{
    id: "item_d.item_e",
    name: "Item E Name",
    ...
},
{
    id: "item_d.item_e.item_f",
    name: "Item F Name",
    ...
}]; 
```

上面是一个非常基本的示例，但这就是输出的样子。

理想情况下，我会得到以下结果：

```
attributes: [
{
    id: "item_a",
    name: "Item A Name",
    nestedAttributes: [{
        id: "item_a.item_b"
        name: "Item B Name"
        ...
    },
    {
        id: "item_a.item_c"
        name: "Item C Name"
        ...
    }],
    ...
},
{
    id: "item_d",
    name: "Item D Name",
    nestedAttributes: [{
        id: "item_d.item_e"
        name: "Item E Name"
        nestedAttributes: [{
            id: "item_d.item_e.item_f",
            name: "Item F Name",
            ...
        }],
        ...
    }],
    ...
}]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T15:43:25.673

好吧，除了需要重新考虑整个结构并接近精神分裂症这一显而易见的事实之外，答案非常简单。

[这是一个有效的jsfiddle](http://jsfiddle.net/katowulf/qcqrW/2/)。本质上，您只想积累对象，在每个级别检查关键元素。

```
function build(attr) {
    var target, key, out = {},
        i = -1,
        len = attr.length;
    while (++i < len) {
        key = attr[i].id.split('.');
        target = makeOrFind(out, key);
        extend(target, attr[i]);
    }
    return out;
}

function makeOrFind(target, keyParts) {
    var key, i = -1, len = keyParts.length;
    while(++i < len) {
       key = keyParts[i];
        if( i > 0 ) {
           if( !target.nestedItems ) { target.nestedItems = {}; }
           target = target.nestedItems;
        }
       if( !target[key] ) { target[key] = {}; }
       target = target[key];
    }
    return target;
}

function extend(target, vals) {
   // this is an overly simple implementation of extend
   // it only works if your objects are exactly one level deep
   // but extend is a solved problem and not really in the scope of the question
    for( var key in vals ) {
        if( vals.hasOwnProperty(key) ) {
            target[key] = vals[key];   
        }
    }        
}

var out = build(attr);
console.log(out); 
```

​</p>

# python - 在Python中提取图像的外部轮廓或轮廓

> ID：13586686
> 
> 赞同：9
> 
> 时间：2012-11-27T14:44:13.483
> 
> 标签：python, image-processing, matplotlib

我想提取图像的轮廓，我正在尝试使用 MatplotLib 的轮廓函数来完成它。这是我的代码：

```
from PIL import Image
from pylab import *

# read image to array
im = array(Image.open('HOJA.jpg').convert('L'))

# create a new figure
figure()

# show contours with origin upper left corner
contour(im, origin='image')
axis('equal')

show() 
```

这是我的原图：

![原来的](../Images/afb286c891349ac87580ca6ce16caaca.png)

这是我的结果：

![轮廓](../Images/2b7e5317177993b74904702a9419da04.png)

但我只想展示外部轮廓，轮廓。只是这个例子中的读取行。

我该怎么做？我阅读了[轮廓](http://matplotlib.org/api/pyplot_api.html?highlight=contour#matplotlib.pyplot.contour)函数的文档，但我无法得到我想要的。

如果您知道在 Python 中执行此操作的更好方法，请告诉我！（MatplotLib、OpenCV 等）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-27T15:29:13.990

如果你想坚持你的轮廓方法，你可以简单地在白色背景和叶子之间添加一个带有“阈值”值的级别参数。

您可以使用直方图找到合适的值。但在这种情况下，任何略低于 255 的值都可以。

所以：

```
contour(im, levels=[245], colors='black', origin='image') 
```

![在此处输入图像描述](../Images/ea7023a9e8249335d72a26c28e02fc6e.png)

如果你想做一些严肃的图像处理，请务必检查 Scikit-Image。它包含几个边缘检测算法等。

[http://scikit-image.org/docs/dev/auto_examples/](http://scikit-image.org/docs/dev/auto_examples/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-09T08:39:37.907

对于那些想要 OpenCV 解决方案的人，这里是：

```
ret,thresh = cv2.threshold(image,245,255,0)
contours, hierarchy = cv2.findContours(thresh,cv2.RETR_EXTERNAL,cv2.CHAIN_APPROX_NONE)

tam = 0

for contorno in contours:
    if len(contorno) > tam:
        contornoGrande = contorno
        tam = len(contorno)

cv2.drawContours(image,contornoGrande.astype('int'),-1,(0,255,0),2)

cv2.imshow('My image',image)

cv2.waitKey()
cv2.destroyAllWindows() 
```

在这个例子中，我只画了最大的轮廓。请记住，“图像”必须是单通道数组。

您应该更改阈值函数、findContours 函数和 drawContours 函数的参数以获得您想要的。

*   [阈值文档](http://docs.opencv.org/modules/imgproc/doc/miscellaneous_transformations.html?highlight=threshold#cv2.threshold)
*   [findContours 文档](http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=findcontours#cv2.findContours)
*   [drawContours 文档](http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=drawcontours#cv2.drawContours)

我在 drawContours 函数中转换为“int”，因为 Open CV 2.4.3 版本中存在错误，如果不进行此转换，程序会中断。 [这是错误](http://code.opencv.org/issues/2505)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T16:42:07.327

我建议使用 OpenCV 来提高性能。它有一个[findContour](http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html#findcontours)函数，可以使用`cv2`绑定从 python 访问。该函数可以设置为只返回外部轮廓。

您还必须对图像进行阈值处理。

# postgresql - 尝试恢复备份时出错

> ID：13586688
> 
> 赞同：3
> 
> 时间：2012-11-27T14:44:18.067
> 
> 标签：postgresql, restore

这一行（518）：

```
COPY wp_commentmeta (meta_id, comment_id, meta_key, meta_value) FROM stdin;
\. 
```

给出这个错误：

`[ERROR ] 518.0: syntax error, unexpected character`

这是什么？

我以前用这个数据库做过备份，现在我只是想把所有的表恢复到数据库中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T15:28:26.717

错误：

```
ERROR:  syntax error at or near "\"
LINE 1: ...a (meta_id, comment_id, meta_key, meta_value) FROM stdin; \.
                                                                     ^

********** Error **********

ERROR: syntax error at or near "\"
SQL state: 42601
Character: 77 
```

指向中的 \ `\.`as 是问题。你确定你需要`\.`吗？

根据[文档](http://www.postgresql.org/docs/9.1/static/sql-copy.html)：

> 数据的结尾可以由仅包含反斜杠句点 (.) 的单行表示。**从文件中读取时不需要数据结束标记，因为文件结尾的服务非常好**；只有在使用 3.0 之前的客户端协议将数据复制到客户端应用程序或从客户端应用程序复制数据时才需要它。

尝试`\.`从行中删除您的副本，看看您的副本是否按预期工作。

# c# - 将线程应用程序转换为服务

> ID：13586690
> 
> 赞同：3
> 
> 时间：2012-11-27T14:44:28.393
> 
> 标签：c#, multithreading, windows-services

我目前有一个应用程序，它基本上是 ~10 "LongRunning"`Task`的包装器。每个线程都应该无限期地运行，但有时它们会锁定或崩溃，有时包装器应用程序会自发退出（我还没有能够追踪到它）。此外，包装应用程序当前只能为一个用户运行，并且该用户必须是重新启动线程或重新启动整个应用程序的用户。

我目前有一个监视器实用程序，可以让我知道线程何时停止工作，以便可以手动重新启动它们，但我想自动重新启动它们。我还希望每个人都可以使用包装器来检查线程的状态，并且即使没有包装器，线程也可以运行。

基于这些目标，我想我想将线程分离成一个 Windows 服务，并将包装器转换为可以连接到服务以检查其状态并对其进行操作的东西。

我该怎么做呢？这是一个合理的架构吗？我应该把每个线程变成一个单独的服务，还是应该有一个多线程服务？

**编辑：**所有任务都记录到同一组输出文件（通过 a `TextWriter.Synchronized(StreamWriter)`），我想保持这种行为。
他们目前也都共享相同的数据库连接，这意味着我需要让他们都同意在必要时同时关闭连接。但是，如果将它们分开，则它们可以各自使用自己的数据库连接，而我无需担心同步。我实际上怀疑这一步是当前的失败点之一，因此将其拆分是一件好事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T15:07:19.337

如果可能，我建议您留在一个多线程服务中。只需确保在触发服务停止时正确处理线程。将刹车标志放在需要大量执行时间的代码块中。这样，您将使您的服务响应停止事件。记录任何异常并确保等待所有线程退出，直到服务最终停止。这将阻止您在多个线程中运行相同的“任务”。

维护一项服务最终比多项服务更容易。

如果您需要一些可以运行或不相邻运行的单独功能，则拆分为多个服务是合理的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T15:01:17.970

我认为将线程移至 Windows 服务不会消除任何问题。服务仍然会随机崩溃，线程仍然会随机退出。

我假设您的长时间运行的任务实现了一种工作循环。将该循环的主体包装在 try-catch 中并记录所有异常。不要重新抛出它们，以免任务退出。检查日志以查找错误。

# google-chrome - 是否在 Netbeans 压缩或解压缩中包含 Javadoc？

> ID：13586692
> 
> 赞同：0
> 
> 时间：2012-11-27T14:44:28.897
> 
> 标签：google-chrome, javadoc, netbeans-7, osx-mountain-lion

在`Netbeans | Tools | Java Platforms`中，我包含了`javafx-apidocs`zip**文件**。

然后我想检查`Google Chrome`. 我从内部打开了链接`Netbeans`。URL 如下所示：

**http** // **127.0.0.1** :8082/resource/ **jar:file** :/Library/Java/JavaApiDocs/javafx-apidocs **.zip!/api** /javafx/scene/image/ImageView。**html**

但观点`Google Chrome`并不好，或者组织得很好。我是否必须解压缩然后将其包含在内`Netbeans`？

![在此处输入图像描述](../Images/8ee49025da197a7a03f4e9b65bbd60ad.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T17:52:26.427

解压缩后，我可以在浏览器上正确 查看*Javadoc 。*

# javascript - 具有宽度和高度输入字段的 Jquery 约束比例

> ID：13586695
> 
> 赞同：0
> 
> 时间：2012-11-27T14:44:49.017
> 
> 标签：javascript, jquery

我有一个带有宽度和高度输入字段的表单。我想听听用户在任何一个字段中所做的更改，并使用 Jquery 更改其他字段中的值以巧妙的约束比例。用户可以在键入时看到更改。

```
<form>
  <p>
    <label>Width</label><br />
    <input type="text" id="width" value="16" />
  </p>
  <p>
    <label>Height</label>
    <input type="text" id="height" value="9" />
  </p>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T14:56:49.537

这个怎么样。我将原始值存储在 data-value 属性中，用于重新计算比率

```
<form>
   <p>
      <label>Width</label><br />
      <input type="text" id="width" data-value="16" value="16" />
  </p>
  <p>
      <label>Height</label>
      <input type="text" id="height" data-value="9" value="9" />
  </p>
</form>​​​​​​​​​ 
```

这是改变宽度的监听器（你可以用同样的方式写一个高度）

```
​$("#width").bind("keyup", function(){
   var width = $(this).data("value")
     , newwidth = $(this).val()
     , $height = $("#height")
     , height = $height.val();

   $height.val(height*(newwidth/width));

})​ 
```

这是[小提琴](http://jsfiddle.net/nxtwrld/4ayNQ/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T14:57:46.160

尝试将事件附加到 .keypress( handler(eventObject) ) ，对于使用的每个按键，它都会执行您上面所说的操作。

# java - 使用 Maven + Java + Clojure 确保构建的良好安全性/代码签名

> ID：13586700
> 
> 赞同：3
> 
> 时间：2012-11-27T14:44:57.093
> 
> 标签：java, security, maven, clojure, code-signing

我有许多使用 Maven 构建并部署到公共存储库 (clojars.org) 的 Java 和 Clojure 开源项目。我使用 Eclipse 作为 IDE，使用 git / GitHub 进行源代码控制，使用 Windows 7 作为操作系统，使用 PuTTY / 选美作为我的密钥。

这很好用，但我想确保我遵循最佳实践并签署我的所有工件，以便其他人可以信任它们，并且我可以验证这些工件没有被篡改。

我应该采取哪些关键步骤来确保我的所有工件都得到正确签名和验证？理想情况下，我希望它能够很好地集成到 Maven 构建过程中，这样我就不必遵循额外的手动步骤。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T01:33:29.297

除了签名之外，您还需要在与 Maven 存储库不同的地方（例如您的网站）的某个地方提供签名和公钥。否则签名不会达到提高他人信任的目的，只有你自己。如果我不能确定工件上的签名是你的，我的信任度并没有提高。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T16:07:47.067

[Maven GPG 插件文档](http://maven.apache.org/plugins/maven-gpg-plugin/)是工件签名的良好起点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T19:53:35.080

顺便提一下（我知道你提到了 maven，但 leiningen 是 Clojure 的一个很好的替代品，它具有内置的 Clojars 支持）：

最新的 Leiningen 预览版支持使用 GPG 密钥进行自动签名，以及使用签名的 pom/jar 进行自动 clojars 部署。上周论坛上有一个帖子（有些人抱怨它有点坏）——我认为它很快就会准备好迎接黄金时段，如果你正在使用 leiningen，这可能是 Clojure 项目的最佳实践.

讨论中有几个分步指南。对于 Windows，您可能需要查看[http://www.gpg4win.org/](http://www.gpg4win.org/)以获得 gpg 支持，以生成密钥。

[https://groups.google.com/d/topic/clojure/AsPs9ZonRPQ/discussion](https://groups.google.com/d/topic/clojure/AsPs9ZonRPQ/discussion)

在 clojars 中配置好 GPG 公钥后， `lein deploy clojars`您只需进行部署即可。

# jsf - 如何为特定区域使用不同的 jQuery 主题？

> ID：13586709
> 
> 赞同：0
> 
> 时间：2012-11-27T14:45:33.683
> 
> 标签：jsf, primefaces, jquery-ui-theme

我目前正在做一个 Web 应用程序的菜单，我想为该菜单使用与我用于应用程序其余部分的主题不同的主题。我使用 PrimeFaces 的默认主题，尽管它稍后可能会更改，以及我使用 jQuery 主题滚轮 (http://jqueryui.com/themeroller) 制作的菜单的自定义主题我想将此主题应用于主仅限菜单，在 CSS 文件中定义：

```
#top {
position: relative;
background-color: #333367;
color: white;
padding: 2px;
margin: 0px 0px 2px 0px;
max-height: 60px;} 
```

我可以使用自定义主题应用到整个应用程序

```
<context-param>
    <param-name>primefaces.THEME</param-name>  
    <param-value>custom-theme</param-value>   
</context-param> 
```

但它不适用于特定区域菜单在我的模板中定义：

```
 <div id="top">
        <ui:insert name="menu">
            <ui:include src="../snippets/menu.xhtml"/>
        </ui:insert>
    </div> 
```

有没有人建议只为菜单使用自定义主题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T14:56:35.517

您确实希望将两个主题合并为一个（或部分合并两个主题）。您不能仅使用主题滚动器来执行此操作，但您可以提取自定义主题的相关部分并添加`#top`到选择器中。那么生成的主题可能在哪里

```
.ui-state-default a, .ui-state-default a:link, .ui-state-default a:visited {
    ... 
```

您将其编辑为

```
#top .ui-state-default a, #top .ui-state-default a:link, #top .ui-state-default a:visited {
    ... 
```

可能需要做很多工作并且效率不高，但是 jQuery UI 主题的设置方式，它们将相同的样式应用于*所有*元素

# wpf - 在 AutoCompleteBox 中禁用自动选择

> ID：13586710
> 
> 赞同：1
> 
> 时间：2012-11-27T14:45:35.230
> 
> 标签：wpf, windows-phone-7, windows-phone-7.1, windows-phone

我正在使用 AutoCompleteBox 在 Windows Phone 7 上创建一个应用程序。

里面有三个字：

*   是
*   振幅
*   放大器

当我输入 am 时，它会自动选择 AM。相反，它应该向我展示这 3 个可供选择的选项。

如何禁用自动选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T17:01:16.117

这是一个已报告的问题，从外观上看，这是一个未解决的问题：

[http://silverlight.codeplex.com/workitem/9558](http://silverlight.codeplex.com/workitem/9558)

# php - 无需用户干预即可刷新linkedin用户访问令牌

> ID：13586713
> 
> 赞同：2
> 
> 时间：2012-11-27T14:45:39.447
> 
> 标签：php, api, linkedin

有没有办法在没有他干预的情况下通过应用程序为经过身份验证的用户刷新 Linkedin 访问令牌？

提前致谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T15:05:15.530

只有当用户当前都登录到 LinkedIn 并且令牌尚未过期时，该过程才会“无缝”：

[https://developer.linkedin.com/blog/tips-and-tricks-refreshing-access-token](https://developer.linkedin.com/blog/tips-and-tricks-refreshing-access-token)

如果以上任何一个都不正确，则用户必须直接重新验证新令牌。

# javascript - 设置外部 Javascript 的过期时间

> ID：13586716
> 
> 赞同：1
> 
> 时间：2012-11-27T14:45:44.923
> 
> 标签：javascript, wordpress, pagespeed

我使用 Google Page Speed 检查了我网站的速度，它建议我为托管在某处的 java 脚本文件设置过期时间。我为服务器中的所有文件设置了过期时间，但我不知道如何将过期标头添加到不在我服务器上的脚本中。这是一个截图

![所有文件过期](../Images/8fea6186ef5254ac97b393f792a2e5bb.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T14:47:41.937

你不能。唯一的方法是从您自己的服务器上提供这些文件。

# c++ - gdb 在 Windows 中无法正常工作

> ID：13586718
> 
> 赞同：2
> 
> 时间：2012-11-27T14:45:53.433
> 
> 标签：c++, windows-7, gdb, g++, cygwin

`g++`我创建了一个简单的 cpp 文件，并在 Win7 中使用 cygwin 编译器对其进行了编译。我现在正在尝试在 gdb 中调试生成的可执行文件，但我无法让它按照我期望的方式运行。我无法放置断点，因为当我尝试执行时`b file.cpp:25`我回来了

```
No source file named file.cpp.
Make breakpoint pending on future shared library load? (y or [n]) 
```

我选择 y 并且它仍然没有在预期的点中断。我确实从这个来源编译。

我在某个点遇到段错误，`whe`实际上也没有显示行号。它似乎显示内存地址，这显然对我没有用。

gdb 是行为不端还是我只是希望它做它不能做的事情？如果它没有这种能力（虽然我以前做过这种事情），还有其他工具我可以使用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T15:16:30.993

为了在编译期间添加调试信息，您应该使用`-g`g++ 的标志。

# pdf - 将 PDF 文件旋转 n 度，其中 n 不是 90 的倍数

> ID：13586726
> 
> 赞同：7
> 
> 时间：2012-11-27T14:46:07.570
> 
> 标签：pdf

我面临的问题如下。我有一个源文档，src.pdf。

我需要将 src.pdf 的内容插入到 target.pdf 中，旋转*n*度，其中*n*不是 90 的倍数。

任何帮助将不胜感激，谢谢。

**编辑1：**

PDF 不包含注释。

我可以使用任何依赖实用程序的解决方案，或者编写我自己的代码，最好使用 C#/Python/Ruby/Perl，但不限于一种语言。

平台是 Windows Server 2008 R2，我更喜欢使用现有的服务器，但 Linux 也是一种选择。最新（稳定）的 GhostScript 和 pdftk 已安装。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-27T17:06:20.580

如果新语言不是问题，LateX 可能是一个选择。您可以将 pdf 作为图形包含在 tex 文件中，并且您将能够使用专用选项，例如重新缩放和旋转功能。然后，编译它以获得一个新的pdf。以下非常简单的代码对我有用：

```
\documentclass[a4paper]{article} 
\usepackage{graphicx}

\begin{document}

\includegraphics[scale=0.5,angle=10]{test.pdf} 

\end{document} 
```

从此pdf：

![字符串](../Images/4a5c2cb0925aa7a9c9aea4abaab0eab5.png)

我得到了这个新的：

![在此处输入图像描述](../Images/9f552b0b23163063423e315911e3f411.png)

然而，它需要一些手动调整才能得到你想要的……

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-03-17T02:29:05.900

你可以像这样使用 TexLive 做到这一点：

```
\documentclass{article}
\usepackage{pdfpages}

\begin{document}
  \includepdf[pages={-},angle=30]{main}
\end{document} 
```

它将旋转整个 pdf - 每页！

但是，我不是想出这一点的人-[检查此线程以获取原始解决方案](https://tex.stackexchange.com/questions/233513/how-to-rotate-a-pdf)（并给那个人一点！）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-27T16:08:08.507

由于您不必处理注释，因此您可以尝试使用您选择的任何 PDF 库来分解 PDF 字典和解码页面内容。获得页面内容后，可以在页面开头插入一个[变换矩阵： [ cos θ sin θ −sin θ cos θ 0 0 ]](http://en.wikipedia.org/wiki/Transformation_matrix)

我建议您查看 Adob​​e 的[PDF 参考文档](http://www.adobe.com/devnet/pdf/pdf_reference.html)，特别是有关转换矩阵的部分。

例如，如果您有以下页面内容对象 (40 0 obj)：

```
10 0 obj % Page object
<< /Type /Page
/Parent 5 0 R
/Resources 20 0 R
/Contents 40 0 R
>>
endobj 
40 0 obj % Page content
BT
/F1 1 Tf
12 0 0 12 100 600 Tm
(Hello) Tj
ET
endobj 
```

并且您想将整个页面旋转 45 度，假设 cos(45)=sin(45)=0.7，您生成的页面内容将是：

```
40 0 obj
0.7 0.7 -0.7 0.7 0 0 cm
BT
/F1 1 Tf
12 0 0 12 100 600 Tm
(Hello) Tj
ET
endobj 
```

添加完转换矩阵后，您可以重新编写 PDF 文件。然后，您选择的库应根据需要添加压缩过滤器和编码过滤器。

例如，iText 可以分解和重组 PDF 文件。有关详细信息，请参阅方法 PdfReader.getPageContent。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-11-28T09:11:36.493

这是一个示例，展示了如何使用 Java 和 iText 库来做到这一点。通过最小的更改，代码也应该可以与 C# 和 iTextSharp 一起使用，提供示例 @neo 无法在他的回答中短时间内提供。

该示例获取第一页`source.pdf`并将其插入到[`target.pdf`](http://i.stack.imgur.com/aHp9r.png)所有 30° 的倍数中，即 2*pi/12，但由于该角度在代码中明确给出，您可以旋转任意角度。

```
Document document = new Document();
PdfWriter writer = PdfWriter.getInstance(document, new FileOutputStream("target.pdf"));
document.open();

PdfReader origPdfReader = new PdfReader("source.pdf");
PdfImportedPage importedPage = writer.getImportedPage(origPdfReader, 1);

PdfContentByte canvas = writer.getDirectContent();
for (int i = 0; i < 12; i++)
{
    AffineTransform transform = AffineTransform.getRotateInstance(Math.PI * i / 6.0,
        importedPage.getWidth() / 2, importedPage.getHeight() / 2);
    canvas.addTemplate(importedPage, transform);
    document.newPage();
}
document.close(); 
```

根据您的用例，您可能不仅想要旋转（如您所要求的那样），而且还希望将其缩小以适合页面。在这种情况下，只需`transform.scale(scaleX, scaleY)`在使用`transform`.

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-11-27T15:36:52.267

我写了一些软件可以做到这一点：

cpdf -rotate-contents 45 in.pdf -o out.pdf

[商业](http://www.coherentpdf.com/)，我害怕。请参阅[手册](http://www.coherentpdf.com/cpdfmanual.pdf)第 3 章。

# java - 处置外壳而不处置显示器（父级）

> ID：13586728
> 
> 赞同：2
> 
> 时间：2012-11-27T14:46:10.003
> 
> 标签：java, swt

我对使用 SWT 库的 Java 项目有疑问。这是我第一次尝试使用 SWT，所以请不要向我扔石头。

环境：Eclipse - Juno

类和函数：

1º客户端->“主要”在哪里。创建“GUI_Creator”类的对象（我的）。

2º GUI_Creator -> 有 2 个功能，以便“设计”我的表单。

2.1 -> MakeLogIn -> Void 方法，将我需要的控件添加到我作为参数给他的 Shell 中。我用它来设计我向用户展示的第一个表单。

此函数还将此 shell 的按钮的“单击”事件与 GUI_Creator 类的第二个函数链接，该函数创建一个新的 shell。然后，这个外壳将打开，第一个外壳将关闭。

2.2 -> MakeClient -> 这个函数返回一个shell var。对我来说，这会返回我程序的第二个 shell，即使是设计等。

问题：

我在“main”的末尾使用了这段代码：

```
while (!Conexion.isDisposed())
{
   if (!ourDisplay.readAndDispatch())
      ourDisplay.sleep();
}

ourDisplay.dispose(); 
```

如果我没记错的话，当我尝试关闭我的第一个 shell，然后只打开第二个 shell 时，这段代码就会这样做，我的程序会完全关闭，因为我正在处理父显示。

但是，我不能删除这段代码，因为如果我这样做，当我运行我的程序时，它不会“等待”一个动作，而是执行所有“主要”代码，然后关闭 GUI，程序完成。

所以，我真的不知道我该怎么做才能解决这种情况。

谢谢，比特币

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T14:57:19.703

我不确定我是否解决了您的问题，但您可以尝试：

```
while (!(shell1.isDisposed() && shell2.isDisposed())) {
...
} 
```

# git - Git 不会自动检测远程拉取，也无法显示提交推送

> ID：13586735
> 
> 赞同：0
> 
> 时间：2012-11-27T14:46:26.037
> 
> 标签：git

通常当我这样做时`git pull`，`git status`它会自动从远程分支获取并合并数据，并显示可以在该分支上推送的本地提交。

在工作中创建了一个新分支，当我像往常一样做时，我有以下内容：

```
$ git st
# On branch mybranch-s48
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#   modified:   src/main/java/com/xxx/batch/bo/utils/DisplayTagUtils.java
#
no changes added to commit (use "git add" and/or "git commit -a")

$ git commit -am "Test git commit"
[mybranch-s48 28813a3] Test git commit
 1 files changed, 2 insertions(+), 0 deletions(-)

$ git st
# On branch mybranch-s48
nothing to commit (working directory clean)

$ git pull
You asked me to pull without telling me which branch you
want to merge with, and 'branch.mybranch-s48.merge' in
your configuration file does not tell me, either. Please
specify which branch you want to use on the command line and
try again (e.g. 'git pull <repository> <refspec>').
See git-pull(1) for details.

If you often merge with the same branch, you may want to
use something like the following in your configuration file:

    [branch "mybranch-s48"]
    remote = <nickname>
    merge = <remote-ref>

    [remote "<nickname>"]
    url = <url>
    fetch = <refspec> 
```

通常“拉”不需要任何东西，状态会告诉我我有 1 个提交提交。

我仍然可以使用`git pull origin mybranch-s48`or `git push origin mybranch-s48`。

此分支不在列表中，但在执行时`Local branches configured for 'git pull':`仅在列表中`Local refs configured for 'git push':``git remote show origin`

有人能帮助我吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T14:48:40.880

尝试设置上游分支：

```
git branch mybranch-s48 --set-upstream origin/mybranch-s48 
```

通常，当您检出存在于远程但不在本地存储库中的分支时，会制作一个本地副本以“跟踪”远程分支。如果您以其他方式创建了本地分支，并且 Git 还不知道它应该跟踪远程分支，那么您需要使用`--set-upstream`.

# eclipse - Eclipse 内置 maven 支持 vs M2Eclipse

> ID：13586741
> 
> 赞同：3
> 
> 时间：2012-11-27T14:46:33.310
> 
> 标签：eclipse, maven, m2eclipse

Eclipse 3.7.2 有内置的 Maven 支持吗？它与 m2eclipse 有何不同？

![mvn_builtin](../Images/1fc76a28ec081a4fd1600c48a701db61.png)

![平方米](../Images/dc36a8ed4d5f183e1953d17e523b232b.png)

**@编辑**

`m2e`基本版本与 Eclipse 3.7 Java（尚未与 Java EE）捆绑在一起。对于完整版本，必须`m2e`从其更新站点或市场安装。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T14:53:58.650

Indigo (Eclipse 3.7) 项目列表：http: [//www.eclipse.org/indigo/projects.php](http://www.eclipse.org/indigo/projects.php)

包括 Maven 支持 [新]： http: [//www.eclipse.org/m2e/](http://www.eclipse.org/m2e/)

正如您可以通过名称猜到的那样，它只是与发行版捆绑在一起的 m2e（并从外部来源提高了版本号）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T14:57:23.957

您可以从这里安装 Maven Eclipse - [http://download.eclipse.org/technology/m2e/releases/](http://download.eclipse.org/technology/m2e/releases/)

注意：Sonatype 为 eclipse 贡献了 m2e 插件。你可以在这里阅读它 [http://www.sonatype.com/people/2011/06/where-is-m2eclipse/](http://www.sonatype.com/people/2011/06/where-is-m2eclipse/)

# nhibernate - CodeConfig 等效于 tx:attribute-driven

> ID：13586744
> 
> 赞同：4
> 
> 时间：2012-11-27T14:46:37.240
> 
> 标签：nhibernate, spring.net

我使用 CodeConfig 而不是 Spring.NET 的 XML 文件，使用 Fluent NHibernate 读取/写入数据库。

但是对于事务管理，我仍然想在我的服务方法上使用 Spring 的 [Transaction] 属性。在 XML 我会做

```
<tx:attribute-driven/> 
```

我可以通过自己处理交易来解决这个问题

```
public WorkItem SaveWorkItem(WorkItem workItem)
{
    using (ITransaction tx = CurrentSession.BeginTransaction())
    {
        CurrentSession.SaveOrUpdate(workItem);
        tx.Commit();
    }
    return workItem;
} 
```

但是是否有一种仅 CodeConfig 的方式来允许使用属性而不是这样，如下所示：

```
[Transaction]
public WorkItem SaveWorkItem(WorkItem workItem)
{
    CurrentSession.SaveOrUpdate(workItem);
    return workItem;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-14T20:49:55.353

我在 github 上有一个用于 TransactionAttribute 的 spring 代码配置示例： [https ://github.com/gergroen/spring-net-getting-started-guide/blob/master/Spring.Net.GettingStarted/Config/ConfigurationOne.cs](https://github.com/gergroen/spring-net-getting-started-guide/blob/master/Spring.Net.GettingStarted/Config/ConfigurationOne.cs)

# c - libevent：在文件更改时引发事件

> ID：13586745
> 
> 赞同：2
> 
> 时间：2012-11-27T14:46:36.917
> 
> 标签：c, events, asynchronous, libevent

我有以下代码：

```
#include <stdio.h>
#include <unistd.h>
#include <stdlib.h>
#include <time.h>
#include <event.h>

void fd_cb(int fd,short event,void *arg){
        printf("changed\n");
}

int main(int argc, const char* argv[]){
        struct event eoh_ev;
        FILE *fp;
        int fd;
        fp=fopen("/var/log/syslog","rw");
        fd=fileno(fp);

        event_init();
        event_set(&eoh_ev,fd,EV_READ|EV_WRITE,fd_cb,NULL);
        event_add(&eoh_ev,NULL);
        event_dispatch();

        return 0;
} 
```

如您所见，当有内容写入 /var/log/syslog 时，我试图调用 fd_cb(...)。

问题是，“改变”永远不会被打印出来！

我以root身份运行代码。

提前谢谢了，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T15:04:47.933

`poll`Libevent 设计用于处理或`select`支持相同的文件描述符。这些系统调用并非旨在检查文件更改事件。它们旨在在文件描述符可以在不阻塞的情况下读取或写入时返回，这对常规文件没有多大意义（对常规文件的读取和写入永远不会阻塞或总是会阻塞，具体取决于您如何看待它） . 换句话说 - 除了套接字、管道和 fifo:s 之外的文件描述符上的 libevent 将不起作用。

还有其他检查文件是否已更改的机制，但这些机制不可移植。

# button - 如何将 X 放在文本字段中以清除 extjs 中的文本

> ID：13586749
> 
> 赞同：8
> 
> 时间：2012-11-27T14:46:47.473
> 
> 标签：button, extjs, textfield, extjs4.1

我想在文本字段（文本字段右侧的 x）内实现一个 X 按钮以清除输入的文本。我见过许多具有此功能的 extjs 应用程序。我该怎么做呢？任何建议或意见将不胜感激......谢谢

它看起来像这样......

![在此处输入图像描述](../Images/a073e03cef17ab26bd716a459c610939.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-27T17:29:27.873

您必须使用**[Ext.form.field.Trigger](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.field.Trigger)**。这是一个例子

```
Ext.define('Ext.ux.CustomTrigger', {
    extend: 'Ext.form.field.Trigger',
    alias: 'widget.customtrigger',
    initComponent: function () {
        var me = this;

        me.triggerCls = 'x-form-clear-trigger'; // native ExtJS class & icon

        me.callParent(arguments);
    },
    // override onTriggerClick
    onTriggerClick: function() {
        this.setRawValue('');
    }
});

Ext.create('Ext.form.FormPanel', {
    title: 'Form with TriggerField',
    bodyPadding: 5,
    width: 350,
    renderTo: Ext.getBody(),
    items:[{
        xtype: 'customtrigger',
        fieldLabel: 'Sample Trigger',
        emptyText: 'click the trigger'
    }]
}); 
```

为了便于测试，这里是一个**[JSFiddle](http://jsfiddle.net/Jp4nM/)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T18:37:16.863

这是对我有用的 CSS：

# CSS

```
 .x-form-clear {
        background-image: url('../../resources/themes/images/default/form/clear-trigger.gif');
        background-position: 0 0;
        width: 17px;
        height: 22px;
        border-bottom: 1px solid #b5b8c8;
        cursor: pointer;
        cursor: hand;
        overflow: hidden;
    }

    .x-form-clear-over {
        background-position: -17px 0;
        border-bottom-color: #7eadd9;
    }

    .x-form-clear-click {
        background-position: -68px 0;
        border-bottom-color: #737b8c;
    } 
```

# 班级

```
Ext.define('Ext.ux.form.field.Clear', {
    extend: 'Ext.form.field.Trigger',

    alias: 'widget.clearfield',

    triggerBaseCls: 'x-form-clear',

    onTriggerClick: function() {
        this.setValue();
    }
}); 
```

# 用法

```
Ext.create('Ext.container.Container', {
    renderTo: Ext.getBody(),
    items: [
        Ext.create('Ext.ux.form.field.Clear', {
            fieldLabel: 'Clear Field',
            cls: 'clear-trigger'
        })
    ]
}) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-21T17:45:52.073

或者使用这个“clearbutton”插件：[http ://www.eekboom.de/ClearButton.html](http://www.eekboom.de/ClearButton.html)

我喜欢它，因为它只是一个插件，一行，而不是需要自定义子类。

此外，它可以用于各种字段，而不仅仅是文本字段。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-12-21T19:28:12.643

您可以`Ext.form.field.Text`在 Extjs 5.0 及更高版本中使用 with 触发器，无需定义新类型。

```
var textfield = Ext.create('Ext.form.field.Text', {
    triggers: {
        clear: {
            cls: 'x-form-clear-trigger',
            handler: function () {
                this.setValue('');
            }
        }
   }
}); 
```

触发器的处理程序的范围是`Ext.form.field.Text`组件。

可以有多个触发器，也可以使用 MVVM 模型。例如：

```
var textfield = Ext.create('Ext.form.field.Text', {
    triggers: {
        clear: {
            cls: 'x-form-clear-trigger',
            handler: function () {
                this.setValue('');
            }
        },
        search: {
            cls: 'x-form-search-trigger',
            handler: 'onSearch'
        }
   }
}); 
```

`search`触发器使用处理函数，即，在具有对象`onSearch`的组件的控制器中定义。`Ext.form.field.Text`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-07-13T23:43:19.633

在 ExtJS 6+ 中，您还可以在您的上添加以下 2 个配置，`Ext.form.field.Text`并使用内置的更改侦听器显示/隐藏触发器

```
triggers: {
    clearText: {
        cls: 'clear-text-trigger-icon',
        handler: function() {
            this.setValue('');
        }
    }
},
listeners: {
    change: function(textField) {
        if (textField.getValue()) {
            textField.setHideTrigger(false);
        } else {
            textField.setHideTrigger(true);
        }
    }
} 
```

# c - 为什么在传入函数时字符串不为空终止？

> ID：13586751
> 
> 赞同：-2
> 
> 时间：2012-11-27T14:46:51.127
> 
> 标签：c

这是我的电话：

```
testFunc(0,0,"+++++A+++b+c++++d+e++++f+g+++++h+i","Abcdefghi"); 
```

到函数：

```
void testFunc(int isRight, int step, const char* str1, const char* str2)
{
    static int testNum = 1;
    printf("test%d: %d\n", testNum++, extendedSubStr(isRight, step, str1, str2));
} 
```

那叫：

```
 int extendedSubStr(int isRight, int gap, const char* str1, const char* str2)
{
// find location of the first char
        char * pch;
        char * firstOcur;
        pch=strchr(str1,str2[0]);
        firstOcur = pch;
        int i=0;
        while (pch!=NULL)
        {
            i++;
            // find next char from the remaining string
            pch=strchr(pch+1,str2[i]);
        }

    if(i==strlen(str2))
    {
                    // return position of the first char
        return firstOcur-str1;
    }
} 
```

当我尝试迭代`str1` using `strchr()`which 需要一个空终止的字符串时，我的问题就开始了。由于某种原因，它一直在循环。我宁愿不使用`memchr()`.

为什么`str1`并且`str2`没有被归零终止？我怎样才能终止它们？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T14:53:38.620

这两个字符串肯定是空终止的。**发生的情况是您的代码遍历空终止符。**

您需要在`str2[i]`达到时停止迭代`\0`：

```
 int i = 1;
    while (pch != NULL && str2[i] != 0)
    {
        pch = strchr(pch + 1, str2[i++]);
    } 
```

从`strchr`手册页：

> 终止空字符被认为是字符串的一部分；因此，如果 c 是`\0`，函数定位终止`\0`。

基本上，发生的情况是，一旦到达 中的空字符`str2`，就会匹配 中的空字符`str1`。在此之后，您的循环继续查找出现`str2`在内存末尾之后的字符`str1`。混乱随之而来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T14:56:46.593

采用

```
while (pch!=NULL && *(pch+1)!='\0' && str2[i]!='\0') 
```

代替

```
while (pch!=NULL) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T15:00:49.343

正如其他人已经提到的，C 风格的字符串以 '\0' 结尾。

你可能想看看[`strstr(s1, s2)`](http://linux.die.net/man/3/strstr). strstr 查找 s2 在 s1 中的位置。由于参数`isRight`和`gap`未使用，这将简化`extendedSubStr`

```
int extendedSubStr(int isRight, int gap, const char* str1, const char* str2)
{
    char *r = strstr(str1, str2);
    return r != NULL ? r - str1 : -1;
} 
```

# php - 0A 在使用 PHP 检索时添加到 BLOB

> ID：13586752
> 
> 赞同：2
> 
> 时间：2012-11-27T14:46:55.133
> 
> 标签：php, mysql, pdo, binary, blob

无论好坏，我将二进制信息存储在数据库表中并且在检索它时遇到问题。每个 BLOB 在检索时都有一个换行符，至少，我相信它是在检索时，因为表中的二进制对象与源文件的大小完全相同。

我搜索了一个与我类似的问题，我发现最接近的是[这个](https://stackoverflow.com/questions/5860086/mysql-blob-field-has-first-line-of-space-and-therefore-wont-play-file) 但是，我使用的是 PDO 而不是 mysql_* 并且我在打开之前检查了空行

这是存储在一个单独文件中的检索函数，我将其包含在我的测试中：

（在 raw.php 中）：

```
function return_raw_rawid($raw_id)  {
    $data = array();
    $aggregate_data = array();
    $sql = "SELECT * FROM `raw` WHERE `raw_id` = :rawid";

    try {
        $db_obj = dbCore::getInstance();
        $query = $db_obj->dbh->prepare($sql);
        $query->bindValue(':rawid', $raw_id);

        if ($query->execute()) {
            while($results = $query->fetch(PDO::FETCH_ASSOC))   {
                $data['raw_id']     = $results['raw_id'];
                $data['filename']   = $results['filename'];
                $data['mime_type']  = $results['mime_type'];
                $data['file_size']  = $results['file_size'];
                $data['file_data']  = $results['file_data'];
                $data['test_id']    = $results['test_id'];
                $data['user_id']    = $results['user_id'];
                $data['time']       = date('Y-m-d H:i:s', $results['time']);
                $aggregate_data[]   = $data;
            } // while
        }  // if
        $query->closeCursor();

        return $aggregate_data;

    } catch (PDOException $ex) {
        $errors[] = $ex;
    } // catch
} 
```

这是我在一个单独的文件中测试它的代码：

```
<?php 
include 'core/init.php'; // Contains protect_page() and includes for return_raw_rawid
protect_page();
$blob_id = 20;
$blob = return_raw_rawid($blob_id);
$data = ltrim($blob[0]['file_data']);
$name = ltrim($blob[0]['filename']);
$size = ltrim($blob[0]['file_size']);
$type = ltrim($blob[0]['mime_type']);
header("Content-type: $type");
header("Content-length: $size");
header("Content-disposition: attachment; filename=$name");
header("Content-Description: PHP Generated Data");
echo $data; 
```

当我在浏览器中加载此页面时，它会提示我下载由 blob_id 标识并具有正确文件名和类型的文件。但是，在下载并在 ghex 中打开后，我看到第一个字节是 '0A' 使用

```
cmp original_file 下载的_file
```

我确定唯一的区别是第一个字节。谷歌搜索让我找到了我（也许也是）在上面自由应用的 ltrim() 函数。

我不能确定这个问题是否不是在上传过程中引起的，但正如我之前所说，我不相信这是因为 phpmyadmin 中的“file_size”值与源文件完全相同。我不确定在检索函数中使用 aggregate_data 数组是否是罪魁祸首或什么。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T14:57:27.347

您确定这 4 个标题行正在正确执行吗？0x0A 是换行符。您可以在 core/init.php 触发输出中有一个换行符，并且标头永远不会执行。关闭 display_errors/error_reporting 后，您将永远不会看到有关“未发送标头 - 输出从第 X 行开始...”的警告。

# c# - 在 Microsoft Surface 上运行的 Windows 8 应用程序中获取地理坐标

> ID：13586753
> 
> 赞同：-1
> 
> 时间：2012-11-27T14:46:55.840
> 
> 标签：c#, gps, windows-runtime

我有一个 Windows 8 应用程序。这个应用程序需要检索用户的纬度/经度。这个应用程序在我的开发机器上运行良好。但是，我在其中一台 Microsoft Surface 设备上对其进行了测试，似乎没有检测到用户的纬度/经度。据我了解，Surface 没有 GPS 传感器。但是，似乎我应该能够估算出用户的纬度/经度。我注意到例如谷歌地图可以检测到我在哪里。

有谁知道如何在没有 GPS 的 Windows 8 设备上获取我的纬度/经度？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T15:38:18.180

对于应用程序来说，这是一个非常常见的问题。如果没有 GPS 传感器，您将无法获得……您的 GPS 坐标。

通过互联网连接，您可以在（少数）情况下近似它们，但通常它不够可靠（您可以获得几公里的位移！）。

只需将您的 GPS 功能设置为选项，或者如果他们的机器上没有可用的 GPS 传感器，则不要让用户启​​动您的应用程序。

# ios - iOS构建应用时下载资源

> ID：13586754
> 
> 赞同：-3
> 
> 时间：2012-11-27T14:47:02.390
> 
> 标签：ios, xcode

将应用程序构建到设备时是否可以下载一些资源？我不想在第一次运行它时这样做，因为那时互联网可能不可用。相反，我想在从应用商店下载应用程序本身时或在完成下载后立即下载这些资源。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T15:09:24.437

这是不可能的。您的应用程序只能在运行时执行任何操作，因此您必须等待第一次运行。正如 NikosM 所问的，为什么不把信息放在你的 app bundle 中呢？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T16:02:18.390

许多应用程序依赖于一些附加信息数据库，直到应用程序第一次运行时才下载这些信息。为什么不这样做 - 让您的应用程序在运行时自行下载信息，然后将其放在可以获取的地方？这是一个非常常见的策略。

# html - 如何在css中动态调整图像大小？

> ID：13586755
> 
> 赞同：4
> 
> 时间：2012-11-27T14:47:03.200
> 
> 标签：html, css, image, resize

我有一个简单的 html + css 页面，上面有 3 张图片。我正在尝试根据浏览器窗口的大小调整页面大小。现在，我在一个 div 中有 3 个图像，其高度设置为周围容器的百分比，图像设置为 height:100% 和 width:auto。现在，如果你调整整个窗口的大小，那效果很好——但如果你只改变宽度，它们当然不会调整大小，因为高度没有改变，它们最终被推下页面，这真的很难看。

我的第一个问题：是否有一种好方法可以调整图像大小，无论您是否仅使用 html/css 更改浏览器的高度或宽度？如果不是，我应该使用 jquery，如果是，你能指出我的好资源吗？

第二个问题：如果不可能，我如何至少阻止他们被撞到一条线上？我尝试将溢出隐藏或滚动，但它们仍然会碰到，然后要么切断你必须垂直滚动。

这是一个指向实时页面的链接：[http](http://carissalyn.com/Landing.html) ://carissalyn.com/Landing.html （是的，我意识到图像加载缓慢，我会在它上线之前对其进行压缩）。如果您需要任何其他信息，请告诉我。

这是相关的css（img容器在fadingtext里面，在body里面）：

```
body,html{
height:100%;
margin:0; padding:0;
}

#imgcontainer{
height: 100%;
width: 90%;
display: inline-block;
}

img { 
max-height:90%; 
width: auto;
}

#fading_text {
text-align: center;
height: 60%;
-webkit-animation: fade-text 20s 1;
-moz-animation: fade-text 20s 1;
} 
```

这是相关的 html，以澄清有 3 张图片：

```
<div id="fading_text">
<div id="imgcontainer">

<a href="" class="imghover"><img src="images/leaf.jpg" alt="portrait" class="border"></a>
<a href="" class="imghover"><img src="images/DSC_2280-Edit-Edit-Final.jpg"  alt="portrait" class="border"></a>
<a href="" class="imghover"><img src="images/DSC_2685.jpg" alt="blog" class="border">  </a>

</div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T14:58:42.650

尝试查找有关 ResponsiveUI 的文章 - 这将为您提供许多有用的信息。“自动缩放”可以用下一个代码完成：

```
<div class="wrapper">
 <img src="img.png">
</div>

    .wrapper img {
     width: 100%;
     max-width: 100%
     height: 100%;
    } 
```

# database - Servicemembers Civil Relief Act 网站上的多项记录请求

> ID：13586756
> 
> 赞同：0
> 
> 时间：2012-11-27T14:47:04.417
> 
> 标签：database

我是一个寻求帮助的非程序员。

我正在尝试在以下位置进行多记录 SCRA 搜索：[https ://www.dmdc.osd.mil/appj/scra/scraHome.do](https://www.dmdc.osd.mil/appj/scra/scraHome.do)

本质上，这是一次进行多次搜索的批量上传。用户指南要求我创建一个 .txt 文件，并使用固定宽度的列格式化文件，我也这样做了。

似乎按照这些指示，我继续获得“所有错误记录”的文件状态。此消息在用户指南中定义为“文件已处理，但没有记录需要进一步处理，因为所有记录都出错了”。

老实说，我迷路了。我已经输入了社会安全号码、出生日期和姓氏，但无济于事，但是在进行单次记录请求时我遇到了问题。

如果这超出了这里的问题范围，我深表歉意。

谢谢你的帮助，

诺亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:32:40.920

您需要包括现役状态日期。位置 92-99。这未列为必填字段，但确实如此。如果您没有要使用的重要日期，则可以使用当前日期。

# c# - Selenium WebDriver 实现之间的区别

> ID：13586757
> 
> 赞同：0
> 
> 时间：2012-11-27T14:47:06.307
> 
> 标签：c#, internet-explorer, google-chrome, firefox, selenium-webdriver

我最近使用 IE WebDriver 在 Selenium 中开发了一个示例测试，它在 IE 浏览器上运行良好。我想知道为什么只需将驱动程序更改为 Chrome 或 Firefox 驱动程序而不更改测试代码，相同的测试就可以在 Chrome 或 Firefox 上运行。测试没有像在 IE 上那样工作。

我想知道是否有人知道或可以指出一些显示 Web 驱动程序实现之间差异的链接？

我将更详细地解释我的测试。

我有一个带有 Dev Express AspxComboBox 的网站。这是一个预先输入组合框，这意味着它最初是空的，并且当用户输入输入时，组合框会查询数据库以获取包含输入文本的数据。它一次显示 10 个结果。如果用户向下滚动，则会检索更多结果并将其添加到组合框中。

我的测试

> 1）用给定的url打开浏览器
> 
> 2) 在组合框中输入“a”
> 
> 3) 检查 10 条记录是否已填充。
> 
> 4) 使用与组合框相同的查询并使用相同的过滤运行它。Blockquote 5) 将查询结果与组合框内容进行比较。
> 
> 6）选择列表中的第10个元素来模拟滚动并获得更多结果。

上述测试适用于 IE Web 驱动程序。

当我将其更改为 Chrome Web Driver 时，我遇到了时间问题。Chrome Driver 似乎比 IE Web Driver 更快。我使用了适当的等待语句，但它对我不起作用。例如，在文本之后，我在组合框中放置了一个等待输入，直到组合框有 10 个元素。即使此等待成功，Chrome 驱动程序也会将组合框中的第一项检索为空。我通过放置一个断点并让测试应用程序等待足够长的时间来解决这个问题，然后它工作了，但是单击列表中的最后一项就出现了问题。在 IE 中，我只能说单击第 10 项，但相同的代码在 Chrome Web 驱动程序中生成了异常。这是说点击不会出现在所需的元素上。

我所面临的上述挑战让我认为 Web Driver 实现之间存在差异。人们同意还是不同意？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T15:37:59.543

我最初在 ruby​​ 中为 Firefox 进行了测试，并在 chrome 中测试了相同的代码，并获得了相同的通过结果。我确实收到了一些额外的消息，我可以通过删除扩展来关闭它们。

为了在 chrome 中进行测试，您需要可以在此处获得的 chromedriver。

[https://code.google.com/p/chromedriver/downloads/list](https://code.google.com/p/chromedriver/downloads/list)

在你的系统路径中得到它之后，这只是选择你的毒药的问题；

```
driver = Selenium::WebDriver.for :firefox 
```

或者

```
driver = Selenium::WebDriver.for :chrome 
```

快乐编码！

# angularjs - AngularJS，当 $scope 模型从 API 调用获取数据时如何重新应用指令？

> ID：13586758
> 
> 赞同：0
> 
> 时间：2012-11-27T14:47:22.687
> 
> 标签：angularjs

这个指令对我来说效果很好：

```
 my1040pr.directive('myCurrency', function () {
    return {
        require: 'ngModel',
        restrict: 'A',
        link: function($scope, $element, $attrs) {
            $element.bind('change', function() {
                $element.formatCurrency({
                    roundToDecimalPlace: -2,
                    colorize: true
                });
            });
        }
    };
}); 
```

但是当我使用对 API 的 $resource 调用更新 Scope 模型时，模型会正确填充数据，但是应该在“更改”事件的指令中应用的货币掩码没有得到应用...任何帮助将不胜感激...

_e

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T17:42:37.827

而不是直接绑定`change`事件，您应该使用`$scope.$watch`. 您应该使用`ngModel`.

您当前的代码不起作用，因为回调在角度事件循环之外，因此数据绑定不会触发。您应该将该调用包装起来`formatCurrency`以`$scope.$apply`告知角度有关更改的信息。

# mongodb - 用于插入的自定义 Mongo ObjectId

> ID：13586762
> 
> 赞同：4
> 
> 时间：2012-11-27T14:47:31.283
> 
> 标签：mongodb, mongoid, elasticsearch, mongodb-.net-driver

**一些背景：**

我通过 mongo-elasticsearch 河将 MongoDB 与 ElasticSearch 结合使用。在 Elasticsearch 中，我希望我的文档结构如下所示：

```
{
    "_id": "SomeId-AnotherId",

    ... // all the other lovely denormalized data
} 
```

SomeId-AnotherId 是我在非规范化数据时创建的。我需要这种结构的原因是我需要能够说`http://elasticsearch/index/type/SomeId-AnotherId`检索文档。

我将我的数据（一个 C# 应用程序）非规范化，然后插入到 MongoDB 中（这些数据然后通过上述河流进入 ES）。当我插入 MongoDB 时，我目前的印象是我需要在我的模型上设置一个 BsonId，Mongo 使用它来索引文档。这可以是 ObjectId 或任何其他类型，例如 string 或 int 等，只要我添加 [BsonId] 属性即可。

我的模型如下所示：

```
public class Model {
    [BsonId]
    public string Id {get;set;}
} 
```

我这样设置：

```
model.Id = string.format("{0}-{1}", someId, anotherId); 
```

**问题**

目前，我看到约 1,500 个文档从约 10,000 个插入中进入 Mongo。我查看了为模型对象生成的 id，肯定有很多超过 12 个字节。mongo会拒绝那些而不写它们吗？

**Bson Id 是 12 字节 - 这是否意味着如果我创建自己的 ID（格式：“SomeId-AnotherId”）也应该只有 12 字节长？无论如何围绕这个？**

我不想对这些文档使用 mongos 默认 objectId，因为如上所述，一旦文档在 elasticsearch 中，我希望能够以特定方式获取文档（在 URI 中使用“SomeId-AnotherId”）。

**最后说明：**

我知道我可以将另一个 ID 属性添加到我的模型中，称为 ElasticId 之类的东西，然后配置 Elasticsearch 以查找此属性并将其用作 elasticsearch 文档的 _id。如果我这样做了，那么我可以使用 Mongos 默认 ID，一切都会好起来的。但是，我会牺牲弹性搜索性能，并且我还需要在弹性搜索中存储一个我不想要的额外字段。

对不起，顺便说一句，大量的大脑转储！:)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-27T15:33:48.613

`_id`MongoDB 文档的字段*可以*是 12 字节的 UUID，但不是必须的。根据[文档](http://www.mongodb.org/display/DOCS/Object+IDs#ObjectIDs-The%5CidField)，您可以使用任何非数组值作为`_id`，只要您可以确保它是唯一的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-28T13:31:13.290

好的，我现在已经解决了。回想起来，这有点明显，对我来说是一个巨大的疏忽。

我分批插入 10,000 条，但记录总数超过 4000 万条。我的 id 保证在每批的基础上都是唯一的 - 所以在其他批次中可能会有重复。

我打开了安全模式并开始看到我得到的异常——它们来自 mongo，它们是重复的关键异常。我发现 mongo csharp 客户端在收到重复键错误后会立即删除批处理中的所有剩余数据。所以我看到一批的前 1500 个进入，然后我收到一个重复的密钥错误，然后批次的其余部分没有被插入。这完全有道理。

所以现在我正在做单次插入，实际上几乎和批量插入一样快。当我收到重复键错误时，我会记录它，但会继续进行，因为我不关心我的场景中的重复项。

感谢@Philipp 的帮助。

# php - Facebook graph api $fb->api('/me') 不返回任何内容

> ID：13586763
> 
> 赞同：0
> 
> 时间：2012-11-27T14:47:40.580
> 
> 标签：php, facebook, facebook-graph-api

我有一个应用程序运行良好，直到今天，我注意到它`$fb->api('/me')` 没有返回任何东西，但`$fb->getUser()` 仍然返回`UID`.

我没有改变任何东西，$fb 对象是一个简单的对象：

```
$fb = new Facebook(array(
      'appId'  => $app_id,
      'secret' => $app_secret,
    )); 
```

也许是 Facebook 暂时的问题？谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T07:20:09.083

把 try and catch 并检查你得到的异常。

# javascript - 如何在鼠标移出时结束 .switchClass 事件？

> ID：13586765
> 
> 赞同：3
> 
> 时间：2012-11-27T14:47:42.487
> 
> 标签：javascript, jquery, html, css, jquery-ui

我目前正在一个页面顶部有一个主广告牌的网站上工作。在那个广告牌上，右边有 6 个缩略图，用于切换广告牌中显示的 div。它看起来像这样：

![在此处输入图像描述](../Images/2681e6ec106d0eac3adb9fbb1ec8e7ec.png)

当您将鼠标悬停在缩略图上时，它们会向左延伸以显示如下文本：

![在此处输入图像描述](../Images/ef126e8afd8d6f893f5c8865b0569bab.png)

我遇到的问题是：如果用户在 .hover mouse-in 处理程序的 .switchClass 动画完成之前将鼠标移出 div ，则 mouse-out 处理程序中的 .switchClass 事件要么触发得太早，要么完全没有，即使在用户将鼠标移出后，悬停效果仍然存在。基本上让缩略图像上图一样“打开”。

当用户鼠标移出时，有没有办法中断鼠标移入 .switchClass 动画？

我的代码如下：

HTML：

```
 <div id="bbTab1" class ="inactive" style="margin-top:30px">
                    <div class="rightBorder"></div>
                    <img class="tabImage" src="images/bbtab1.png" />
                    <div class="leftBorder"></div>
                </div><!--bbTab1-->

                <div id="bbTab2" class ="inactive" style="margin-top:95px">
                    <div class="rightBorder"></div>
                    <img class="tabImage" src="images/bbtab2.png" />
                    <div class="leftBorder"></div>
                </div><!--bbTab2-->

                <div id="bbTab3" class ="inactive" style="margin-top:160px">
                    <div class="rightBorder"></div>
                    <img class="tabImage" src="images/bbtab3.png" />
                    <div class="leftBorder"></div>
                </div><!--bbTab3-->

                <div id="bbTab4" class ="inactive" style="margin-top:225px">
                    <div class="rightBorder"></div>
                    <img class="tabImage" src="images/bbtab4.png" />
                    <div class="leftBorder"></div>
                </div><!--bbTab4-->

                <div id="bbTab5" class ="inactive" style="margin-top:290px">
                    <div class="rightBorder"></div>
                    <img class="tabImage" src="images/bbtab5.png" />
                    <span class="bText"> This is some text </span>
                    <div class="leftBorder"></div>
                </div><!--bbTab5-->

                <div id="bbTab6" class="inactive" style="margin-top:355px">
                    <div class="rightBorder"></div>
                    <img class="tabImage" src="images/bbtab6.png" />
                    <div class="leftBorder"></div>
                </div><!--bbTab6--> 
```

CSS：

```
 #billboard .inactive{
    width:53px;
    height:57px;
    border-bottom: 1px solid #ACACAC;
    border-top: 1px solid #ACACAC;
    background-color:#FFFFFF;
    position:absolute;
    z-index:5000;
    right:0;
}
#billboard .inactiveHover{
    width:180px; /*61px*/
    height:57px;
    background-color: white;
    border-bottom: 1px solid #FF9B15;
    border-top: 1px solid #FF9B15;
    z-index:5000;
    position:absolute;
    right:0;
}   
#billboard .active{
    width:61px; /*61px*/
    height:57px;
    background-color: white;
    border-bottom: 1px solid #FF9B15;
    border-top: 1px solid #FF9B15;
    z-index:5000;
    position:absolute;
    right:0;
} 
```

JS：使用 Jquery 1.8.2 和 Jquery UI 1.9.1

```
$(function() {
$(".inactive").hover(
    function () {
        if ($(this).hasClass("active")){return;}
        else{$(this).switchClass("inactive", "inactiveHover", 300, "easeOutQuint");}
    },
    function () {
        if($(this).hasClass("active")){
            $(this).removeClass("inactive").removeClass("inactiveHover");   
        }
        else{$(this).switchClass("inactiveHover", "inactive", 300, "easeOutQuint");}                    
}); 
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T18:25:03.400

听起来您应该使用该[`.stop()`事件](http://api.jquery.com/stop/)

本质上，在鼠标移入和鼠标移出事件中，do 都会`$(this).stop(true, true)`中断动画并跳转到动画的最终结果。

或者，如果您想让它停止而不跳转到最终动画，请执行`$(this).stop(true, false)`

# c# - 不使用 WMI、PsExec 或 TopShelf 远程安装服务？

> ID：13586769
> 
> 赞同：1
> 
> 时间：2012-11-27T14:47:56.497
> 
> 标签：c#, .net, service, remote-access

我需要通过 C# 代码在远程机器上安装/卸载服务。

由于防火墙问题，我无法使用 WMI。我不喜欢使用 PsExec 远程调用 SC.exe 或`SC.exe \\server create`在本地使用，因为这些选项需要对输出进行文本解析。

TopShelf 也不是一种选择。

对于启动/停止，我使用了带有模拟的[ServiceController类。](http://msdn.microsoft.com/en-us/library/system.serviceprocess.servicecontroller.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T16:24:14.277

您可以为安装/卸载过程创建一个批处理文件，并将其注册到计划任务中，以便在创建并启用它后每分钟运行一次。使用此库远程管理计划任务：

[http://taskscheduler.codeplex.com/](http://taskscheduler.codeplex.com/)

将您的任务设置为等待一分钟，检查退出代码，然后删除该作业。

# ios - 用于检测键盘按下/释放的 iOS API

> ID：13586771
> 
> 赞同：1
> 
> 时间：2012-11-27T14:48:06.163
> 
> 标签：ios, keyboard

所以 UITextField 可以接受键盘输入，但是有什么方法可以检测键盘上的特定按钮（特别是外部键盘）何时被按下/释放？

如果没有，是否可以直接连接到 iPad/iPhone 的蓝牙键盘并直接获取它们的信号？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T14:52:25.630

您可以使用 UITextField 进行用户输入并实现其委托方法以控制用户输入的内容。您可以实施

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string 
```

每次用户在文本字段中输入字符时都会调用它，并检查其中输入的字符。

# java - 空文本框中提示/消息的选定颜色

> ID：13586772
> 
> 赞同：1
> 
> 时间：2012-11-27T14:48:09.207
> 
> 标签：java, eclipse, swt

我想在文本框为空时创建带有提示的文本框。我使用[setMessage 方法](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/widgets/Text.html)，它工作正常。如何更改提示的默认颜色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T15:31:32.683

如果要更改提示的颜色，只需`Listener`在焦点事件中添加一个。

```
public class StackOverflow
{
    public static void main(String[] args)
    {
        final Display display = new Display();
        Shell shell = new Shell(display);
        shell.setText("StackOverflow");
        shell.setLayout(new GridLayout(1, true));

        final Text text = new Text(shell, SWT.BORDER | SWT.SEARCH);
        text.setForeground(display.getSystemColor(SWT.COLOR_RED));
        text.setText("Enter something");
        text.setLayoutData(new GridData(SWT.FILL, SWT.BEGINNING, true, true));

        text.addListener(SWT.FocusOut, new Listener()
        {
            @Override
            public void handleEvent(Event arg0)
            {
                if("".equals(text.getText()))
                {
                    text.setForeground(display.getSystemColor(SWT.COLOR_RED));
                    text.setText("Enter something");
                }
            }
        });

        text.addListener(SWT.FocusIn, new Listener()
        {
            @Override
            public void handleEvent(Event arg0)
            {

                if("Enter something".equals(text.getText()))
                {
                    text.setForeground(display.getSystemColor(SWT.COLOR_BLACK));
                    text.setText("");
                }
            }
        });

        Label label = new Label(shell, SWT.NONE);
        label.setFocus();
        label.forceFocus();

        shell.pack();
        shell.open();
        while (!shell.isDisposed())
        {
            if (!display.readAndDispatch())
                display.sleep();
        }
        display.dispose();
    }
} 
```

无焦点/空：

![在此处输入图像描述](../Images/bce925150e082643e8e61e52ff7db082.png)

专注/不空：

![在此处输入图像描述](../Images/f794260e1ec423f3daf4beeab0ee6e24.png)

如您所见，“提示”现在是红色的。

# javascript - 将 jQuery 元素保存到 var 是否会导致在使用时重新搜索该元素？

> ID：13586780
> 
> 赞同：9
> 
> 时间：2012-11-27T14:48:34.467
> 
> 标签：javascript, jquery, jquery-selectors

所以，我有一些看起来像这样的 JavaScript/jQuery：

```
var $foo = $('#bar');
$foo.hide(); 
```

我一直在假设 jQuery 对给定的选择器进行操作，并将生成的 DOM 元素保存到`var $foo`... 据我所知，这是真的。

但是，调用是否`$foo.hide()`会导致 jQuery 重新搜索`#bar`元素？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-27T14:52:02.080

不，不是，在调用 $(elem) 时会进行引用。这就是为什么`var`使用它来存储对元素的引用。存储引用始终是最佳实践，`var`因此下次使用代码时，将使用旧引用，并且无需再次搜索 DOM。

```
//reference
var a = $('#id');

//use
a.hide();

//same reference, use again
a.show(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T14:56:50.170

据我了解，将 jQuery 对象设置为 var 会缓存该对象，因此每次需要使用 jQuery 对象执行某些操作时它都不会重新构建它。

关于这个的一些文章，这[是我在谷歌上找到的第一篇](http://24ways.org/2011/your-jquery-now-with-less-suck/)

但是我认为`$('#bar')`直接引用 document.getElementById('bar') 所以，没有太多的构建，因此相当快，但是当你有一个对象数组时它会更快。`$('.class tagType')`

# filepicker.io - Filepicker.io - 限制文件数量

> ID：13586781
> 
> 赞同：5
> 
> 时间：2012-11-27T14:48:39.057
> 
> 标签：filepicker.io

我想知道 Filepicker.io 是否有能力限制用户可以选择/上传的文件*数量？*浏览[文档](https://developers.filepicker.io/docs/web/)我只能找到`maxSize`限制单个文件*大小*的文件。这目前可能吗？如果没有，将来有什么计划支持这个？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T19:15:52.977

Filepicker.io 目前不支持此功能，但这是一个合理的要求，我们将看看是否可以将其纳入我们的近期路线图

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-15T12:52:09.563

Maciej Witowski 听起来非常棒，谢谢。是否可以通过 Filepicker 小部件方式使用 maxFiles。

喜欢`data-fp-maxFiles="x"`？同时还在使用`data-fp-multiple="true"`

我在文档中找不到它，我试图测试代码。我猜是不是？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-01-12T09:51:12.380

我们刚刚添加了一个 max_files 选项来限制文件的数量。

示例：form.filepicker_field(:filepicker_url, max_files: 5)

干杯，

# java - Java 7 ForkJoin 在必须分叉时冻结

> ID：13586784
> 
> 赞同：1
> 
> 时间：2012-11-27T14:48:43.637
> 
> 标签：java, java-7, fork-join

**背景：**我正在模拟逃生恐慌，人们如何逃离房间、建筑物走廊等。对于大量人口，由于每个人都需要计算彼此之间的“社会力量”（即 2000 人），因此需要进行大量计算= 2000^2 次计算）

**代码：**我尝试实现一个分叉连接机制来拆分这个计算。“人”是“行人”类的数组列表。我的模拟中的每个人都是此类的一个实例。这是我实现 frok/join 的函数：

```
public static void timeSteppBridgeAllMulti() {
    counterIteration++;
    MultiThreading mt = new MultiThreading(0, people.size());
    ForkJoinPool pool = new ForkJoinPool();
    pool.invoke(mt);

}

static class MultiThreading extends RecursiveAction {

    int mStart = 0;
    int mLength = 0;

    MultiThreading(int start, int length) {
        mStart = start;
        mLength = length;
    }

    protected void computeDirectly() {
        for (int i = mStart; i < mStart + mLength; i++) {
            people.get(i).timeStepBridge();
        }
    }

    @Override
    protected void compute() {
        if (people.size() <= 300) {//do work directly
            computeDirectly();
            return;
        }

        int split = people.size() / 2;
        invokeAll(new MultiThreading(mStart, split), new MultiThreading(mStart + split, people.size()));
    }
} 
```

对于每个人 (people.get(i))，我调用 timeStepBridge 函数，该函数循环遍历所有其他人，读取他们的位置并计算距离和对他们的力。

**问题：**当人数小于阈值（这里是300）时，程序运行没有问题。但是，当人数超过阈值时，程序会抛出 java.lang.StackOverflowError。我增加了堆栈大小，然后程序只是冻结并且没有响应。

我已经玩了几天，但无法到达任何地方。如果有人有想法，我将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T15:22:19.970

您错误地将工作拆分为`RecursiveAction`.

您的`RecursiveAction`作品使用`people`长度切片`mLength`，它根本不应该调用`people.size()`：

```
@Override
protected void compute() {
    if (mLength <= 300) {//do work directly
        computeDirectly();
        return;
    }

    int split = mLength / 2;
    invokeAll(
        new MultiThreading(mStart, split), 
        new MultiThreading(mStart + split, mLength - split));
} 
```

# ios - 使用 NSURL 通过 ASIHTTPS 请求发布印地语字符

> ID：13586785
> 
> 赞同：1
> 
> 时间：2012-11-27T14:48:54.950
> 
> 标签：ios, unicode, asihttprequest

我一直在发送 Unicode 字符（印地语）作为 URL 中的参数。它在服务器上以不可接受的格式到达。它在控制台中正确打印，但是当使用方法 urlWithString: 转换为 NSURL 时，字符串转换为不可读的格式。值得注意的事实是，如果服务器直接从数据库的更改中发送它，我可以用印地语正确阅读。

编辑：（添加代码）

```
NSURL *url = [NSURL URLWithString:[completeURLString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
request = [ASIHTTPRequest requestWithURL:url];
[ASIHTTPRequest setDefaultUserAgentString:@"ipad"];
[request setAllowCompressedResponse:YES];
[request setShouldContinueWhenAppEntersBackground:YES];
request.requestMethod = requestType;
[request setTimeOutSeconds:180];
[request setCachePolicy:ASIUseDefaultCachePolicy];
[request addRequestHeader:@"Content-Type" value:@"text/json; charset=UTF-8"];
//request.responseEncoding = NSUTF8StringEncoding;
request.defaultResponseEncoding = NSUTF8StringEncoding;
[request setValidatesSecureCertificate:NO]; 
```

[请求开始同步];

# javascript - RegExp.test() 根据调用方式（在哪里？）为相同的 str 返回不同的结果

> ID：13586786
> 
> 赞同：12
> 
> 时间：2012-11-27T14:48:59.147
> 
> 标签：javascript, jquery, regex

我刚刚注意到一个奇怪的 JS 行为导致了一个烦人的错误..

基本上，我在 if 语句中使用 RegExp 对象（.test() 方法）测试 str 。对于相同的测试字符串，如果在我的代码中我只有一个 if，则 regexp.test() 返回 true，它可以很好地进入 if。

问题是如果我有一个 else （我需要它），出于某种原因，对于相同的 str 测试，regexp.test() 返回 false 并转到 else ...

这是什么行为？

我已经进行了许多测试...

TL/DR：对于在同一个 RegExp 上测试的同一个字符串，如果只有一个 IF 语句，则 regexp.test() 返回 true，但如果我有一个 else，它返回 false。

```
some code 
```

我忘了说所有单词都不会出现该错误..

[http://jsfiddle.net/zrwkU/13/](http://jsfiddle.net/zrwkU/13/)

在文本字段中输入单词“armoire”，然后按 Enter。这个 jsfiddle 有“else return false”，没有任何反应。

删除 searchDeeper 函数（ if (regexp.test(tested)){ ）中的“else return false”并再次进行测试。现在它进入 if 和 msgbox 弹出窗口。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-11-27T15:43:46.487

## /regex/g.lastIndex = 0

对于设置了全局`'g'`标志的模式，`RegExp`方法；`test()`并`exec()`跟踪它们匹配的最后一个位置，并将这个整数存储在 RegExp 对象的:`lastIndex`属性中。当每个匹配项应用于*任何*字符串时，此索引会自动推进。请注意，两者都`test()`以`exec()`这种方式行事。一旦任何匹配失败，最后一个索引属性将自动重置为零。您也可以自己手动将其重置为零，看起来这就是您需要在这里做的。添加一行进行重置`RegExp.lastIndex`，如下所示：

```
if (regexp != null){
    regexp.lastIndex = 0;
    if (regexp.test(tested)){
        alert('ok');
        regexp.lastIndex = 0;
        var res = regexp.exec(tested);
        tested = tested.replace(res, '<span class="underlined">' + res + '</span>');
    }else{
        return false;
    }
} 
```

这是另一个完全避免这个*最后索引问题的*解决方案。它使用以下`String.match()`方法：

## 另一种`String.match()`选择：

```
if (regexp != null){
    if (tested.match(regexp)){
        alert('ok');
        regexp.lastIndex = 0;
        var res = tested.match(regexp);
        tested = tested.replace(res, '<span class="underlined">' + res + '</span>');
    }else{
        return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T15:49:40.563

我认为唯一的问题是你有

```
}else{
    return false;
} 
```

你真正想要的是

```
}else{
   continue;
} 
```

为了继续外循环`for (var k in cats){`。

根据此更新：http: [//jsfiddle.net/zrwkU/14/](http://jsfiddle.net/zrwkU/14/)

通过解释-使用您的代码，一旦调用`test`失败，就是这样-超出您使用的方法`return false`。通过更改为 a `continue`，您也可以继续在其他类别中“更深入地搜索”。

# php - jQuery AJAX 调用崩溃 IE9

> ID：13586787
> 
> 赞同：1
> 
> 时间：2012-11-27T14:49:04.797
> 
> 标签：php, internet-explorer, jquery

我的应用程序通过 jQuery 对我的 PHP 文件进行了许多 AJAX 调用，这些文件从我的数据库中收集数据并将其返回。

在 Google Chrome 中测试应用程序时，一切正常，AJAX 调用***永远不会***失败/冻结/超时。但是，在 IE9 中进行测试时，AJAX 调用将***随机***失败大约 5-10% 的时间并冻结 IE 大约 30-45 秒。它最终“解冻”并成功完成呼叫或失败。

这是我的 jQuery：

```
var d = new Date();

$.ajax({
    url: 'forms/settings/scripts/get-client.php?_='+d.getTime(),
    dataType: 'json',
    timeout: 5000, 
    type: 'POST',
    async: false,
    success: function(data){ 
        // do something with data
    },
    error: function(x, textstatus, m){
        if(textstatus==="timeout") {
            alert("Error! Timed out in 5 seconds (forms/settings/scripts/get-client.php). Please try again.");
        }
        else {
            alert("Error! There was a problem contacting (/forms/settings/scripts/get-client.php) for processing. Contact Support! "+textstatus);
        }
    }
}); 
```

这是`get-client.php`上面的 AJAX 调用的内容：

```
<?php
define('INCLUDE_CHECK',true);
require '../../../php/db_pdo_connect.php';

// set JSON array to return
$jsonArr = array('errorsExist' => "N");

try {
    // Begin a transaction, turning off autocommit
    $PDO->beginTransaction();
    // Select Client ID Length into JSON Array
    $jsonArr["clientID_len"] = $PDO->query('SELECT clientID_len FROM tbl_global_settings WHERE id = 1')->fetchColumn();
    // commit the queries
    $PDO->commit();
} 
catch (PDOException $e) {
    // Echo back JSON
    echo '{"appError": "'.$e->getMessage().'", "errorsExist":"Y"}';
    // rollback the transaction
    $PDO->rollBack();
    // End all PHP processes
    exit();
} 

// Echo back JSON array
echo json_encode($jsonArr);

?> 
```

正如你所看到的，我设置了 5 秒的超时时间，当 IE 冻结时，它永远不会被击中。此外，我将日期/时间字符串附加到 URL 以防止 IE 缓存。

关于可能导致这种情况的任何想法？IE只是很烂还是我做错了什么？

# java - 集会：Java：无法向测试用例添加标签

> ID：13586791
> 
> 赞同：1
> 
> 时间：2012-11-27T14:49:12.750
> 
> 标签：java, tags, rally

大约一个月前，我编写了一个脚本，它可以成功创建标签并将它们添加到测试用例中。但是在过去的几天里，脚本无法为测试用例添加标签，但它仍然能够创建标签。这是我写的源代码：

```
 //Looks for a specific tag
public static void ChkTag(RallyRestApi r, String tagname) throws IOException{
    boolean tagfound = false;
    QueryRequest alltags = new QueryRequest("Tag");
    QueryResponse resp = r.query(alltags);
    if(resp.wasSuccessful()){
        //System.out.println("query for all tags was successful.");
        for(JsonElement result : resp.getResults()){
            JsonObject temp = result.getAsJsonObject();
            if(temp.get("Name").getAsString().equals(tagname)){
                tagfound =true;
            }
        }
    if(tagfound==false){
        System.out.println("Tag for this testcase is missing..creating now...");
        ExportTCtoRally_adk.createTag(r, tagname);
        }
    }
}

public static void createTag(RallyRestApi r, String name) throws IOException{
    //Create Tag
    JsonObject mytag = new JsonObject();
    mytag.addProperty("Name", name);
    CreateRequest mytagc = new CreateRequest("Tag", mytag);
    CreateResponse mytagcc = r.create(mytagc);
    String ref_tag = Ref.getRelativeRef(mytagcc.getObject().get("_ref").getAsString());

    if(mytagcc.wasSuccessful())
        System.out.println("Tag successfully created.");
    return;
} 
```

然后在创建测试用例时我运行以下代码：

```
//-----------------FOR TAGS----------------------
    boolean tagfound = false;
    if (creating1.wasSuccessful()){
        System.out.println("testcase created.");
        QueryRequest alltags = new QueryRequest("Tag");
        QueryResponse resp = r.query(alltags);
        JsonElement out = null;
        if(resp.wasSuccessful()){
            System.out.println("query for all tags was successful.");
            for(JsonElement result : resp.getResults()){
                JsonObject temp = result.getAsJsonObject();
                if(temp.get("Name").getAsString().equals(tagx)){
                    System.out.println("desired tag found.");
                    tagfound=true;
                    out=result;
                }
            }
            if(tagfound==false){
                System.out.println("Tag wasn't found.");
                ExportTCtoRally_adk.createTag(r, tagx);
                System.out.println("New Tag created.");
            }
            JsonArray tiger = new JsonArray();
            tiger.add(out);

            System.out.println("Updating testcase tags...");
            JsonObject updatedtesttag = new JsonObject();
            updatedtesttag.add("Tags", tiger);

            UpdateRequest updatetag = new UpdateRequest(ref_testcase, updatedtesttag);
            UpdateResponse updatetagresp = r.update(updatetag);

            if(updatetagresp.wasSuccessful())
                System.out.println("Tag succeccfully added to the test case");
            }
    //----------------------------------------------- 
```

我知道有些东西在这里运行了两次，但是由于它不会引起任何问题，所以我就这样离开了。

所以我的问题是我的代码有什么问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T16:02:05.710

您现在的工作区中是否有超过一页 (200) 的标签？（您可以通过查看响应中的 getTotalResultCount() 来检查）。默认情况下，查询只会返回一页数据。只添加一个过滤器来按名称搜索标签可能会更有效：

```
QueryRequest alltags = new QueryRequest("Tag");
alltags.setQueryFilter(new QueryFilter("Name", "=", tagx);
QueryResponse resp = r.query(alltags);
if(resp.wasSuccessful() && resp.getResults().size() == 1) {
    //tag is at index 0 in results
} 
```

# ios - 在 tableView 加载时我将如何运行一些代码？

> ID：13586802
> 
> 赞同：0
> 
> 时间：2012-11-27T14:49:51.810
> 
> 标签：ios, objective-c, uitableview, uiactivityindicatorview

在加载 tableView 时我将如何运行一些代码。这是我认为可能有效的方法：

```
while ([self.tableView reloadData]) {
    do something
} 
```

我想在表加载时运行 UIActivityIndi​​cator，然后在加载数据后消失。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T15:01:05.597

如果您只想在表加载时运行活动指示器：

```
[indicator startAnimating];
[self.tableView reloadData];
[indicator stopAnimating]; 
```

那是假设您有一个称为指示器的 UIActivityIndi​​cator，并且它的 hidesWhenStopped 属性设置为 YES。

如果您想做其他类型的工作，您很可能需要在单独的线程、调度队列等中完成这项工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T15:16:23.553

不完全确定，但看起来你可以这样做：

```
activityIndicator.hidesWhenStopped = true;
[activityIndicator startAnimating];

[tableView reloadData];

[self performSelector:@selector(updateFinished) withObject:nil afterDelay:0]; 
```

updateFinished 只是调用的地方

```
[activityIndicator stopAnimating]. 
```

如果我没记错的话，你正在主线程上做所有事情。每个线程都有它的运行循环，用户的方法、动画、输入处理、计时器和类似的东西在循环中执行。在您正在执行某些用户的代码时，调用 reloadData 安排表动画在方法结束后执行，而不是通过使用具有延迟 0 的 performSelector 来安排要结束的活动指示器动画。

# ios - IOS多对多核心数据

> ID：13586803
> 
> 赞同：0
> 
> 时间：2012-11-27T14:49:53.763
> 
> 标签：ios, core-data, many-to-many

再会！

我有一个正在开发的应用程序，它有两个类，ContactGroups 和 ContactPeople。

许多人可以在一个组中，并且许多组可以与一个人相关联。

我的好奇心在于，如何创建 NSManagedObjects，我猜这可能就像我的 Group 类，以人名或 ID 号作为主要值。

每次创建组时我会做一些事情，例如创建一个新的 managedObject 吗？然后我将整个托管对象保存到核心数据中？除了只有几个实体的基础知识之外，我对核心数据没有太多经验，而且它们之间并没有真正的关联。

我可以细读的任何主题可能会有所帮助？我已经四处寻找，但我可能没有问正确的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T15:35:14.837

听起来您的 Group 类可能有一些（即名称）或没有自己的属性，并且与 Contact 类存在多对多关系。

要创建一个新组，您将创建一个新的托管对象并通过以下方式建立关系： 1\. 在组对象的关系属性上添加多个联系人（联系人对象的 NSSet）或 2\. 将组对象添加到关系属性中以获取适当的接触物体。

您只需要设置关系的一侧，Core Data 会处理相反的情况。

这是关系的核心数据参考，有一个涵盖多对多的特定部分： [https ://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdRelationships.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdRelationships.html)

# c# - 列表中的 Linq 列表

> ID：13586806
> 
> 赞同：-2
> 
> 时间：2012-11-27T14:50:06.427
> 
> 标签：c#, linq, list

我在一个查询中组合两个列表时遇到问题：

```
public class Class1 {
    public int id { get; set; }
    public List<Class2> attr { get; set; }
}

public class Class2 {
    public int id { get; set; }
} 
```

我的查询如下所示：

```
var q = (from m in context.table
                 select new Class1
                 {
                     id = m.ID,
                     attr = (from t in context.table2
                                 where m.id == t.id
                                 select new Class2 { 
                                    id= t.id
                                 }).Take(5).ToList()
                 }).Take(1).ToList(); 
```

这个问题有什么解决方案吗？

**问题：** 我的问题是我的结果总是空的。如果我删除第二个查询

```
 attr = (from t in context.table2
                                 where m.id == t.id
                                 select new Class2 { 
                                    id= t.id
                                 }).Take(5).ToList() 
```

，我的查询有效！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T15:16:26.907

下面的代码完美运行（我`context`用我的自定义变量替换了你的变量），所以，在我看来，你最好检查你的`where`陈述

```
using System.Linq;
using System.Collections.Generic;

namespace ConsoleApplication1
{
    public class Class1
    {
        public int id { get; set; }
        public List<Class2> attr { get; set; }
    }

    public class Class2
    {
        public int id { get; set; }
    }

    class MyEntity
    {
        public int ID { get; set; }
        public MyEntity(int id)
        {
            ID = id;
        }
    }
    class MyContext : List<MyEntity>
    {
    }

    class Program
    {
        static void Main(string[] args)
        {

            var context = new MyContext();
            context.Add(new MyEntity(1));
            context.Add(new MyEntity(2));
            context.Add(new MyEntity(3));
            context.Add(new MyEntity(4));
            context.Add(new MyEntity(5));

            var q = (from m in context
                     select new Class1
                     {
                         id = m.ID,
                         attr = (from t in context
                                 where m.ID == t.ID
                                 select new Class2
                                 {
                                     id = t.ID
                                 }).Take(5).ToList()
                     }).Take(1).ToList();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T14:52:02.573

你可以尝试这样的事情： -

```
 var listAB = listA.Cast<object>().Union(listB.Cast<object>()).ToLookup(x => x is TypeA ? (x as TypeA).Key : (x as TypeB).Key)
            .Select(kv => {
                var a = kv.FirstOrDefault(x => x is TypeA) as TypeA;
                var b = kv.FirstOrDefault(x => x is TypeB) as TypeB;
                return new TypeAB() {
                    Key = kv.Key,
                    ValueA = a != null ? (int?)a.Value : null,
                    ValueB = b != null ? (int?)b.Value : null
                };
            }).ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T16:04:49.230

我找到了灵魂。而不是使用 List<> 我将其更改为 IQueryable<> 现在它可以工作了。

我记得我的错误消息：“linq to entity 无法识别方法列表...linq 此方法无法转换为商店表达式”

有人明白吗？

# javascript - javascript正则表达式（词尾）

> ID：13586810
> 
> 赞同：2
> 
> 时间：2012-11-27T14:50:24.340
> 
> 标签：javascript, regex

我想我的正则表达式有问题：我想要一个字符串，它可以包含第一个圆括号中的所有字符，最后是 [，最后是 ]。正则表达式如下：

```
 var pattern = /^(([a-zA-Z0-9\.\_\-\(\)\\'\xE0\xE8\xE9\xF9\xF2\xEC\x27\,\/]\s?)*\[?([a-zA-Z0-9\.\_\-\(\)\\'\xE0\xE8\xE9\xF9\xF2\xEC\x27\,\/]\s?)*\]?)+$/; 
```

问题是如果我尝试测试以下字符串 Maionese [dfvdfv]@ 我的程序将永远循环：-|

我用来测试的功能如下：

```
//the alert doesn't works
alert(checkSpecialIngredienti("Maionese [dfvdfv]@"));
function checkSpecialIngredienti(s) {

var pattern = /^(([a-zA-Z0-9\.\_\-\(\)\\'\xE0\xE8\xE9\xF9\xF2\xEC\x27\,\/]\s?)*\[?([a-zA-Z0-9\.\_\-\(\)\\'\xE0\xE8\xE9\xF9\xF2\xEC\x27\,\/]\s?)*\]?)+$/;
if (!pattern.test(s)) {
    alert("Attenzione, il campo "+s+"" +
            " che hai inserito non va bene!" +
            "\nIn questo campo puoi inserire " +
            "lettere, numeri, lettere accentate," +
            "punteggiatura classica, singoli spazi e" +
            "\nuna sola coppia di parentesi quadre." +
            "\nRiprova!");
    return (false);
} else
    return true;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T15:21:49.940

由于您有嵌套的量词 ( )，您将遇到[灾难性的回溯](http://www.regular-expressions.info/catastrophic.html)`((...)*)+`，并且当主题字符串无法匹配时，由此产生的组合爆炸将炸毁您的正则表达式引擎。

现在，如何解决这个问题？让我们首先简化您的正则表达式。那里有很多令人讨厌的东西 - 以下正则表达式与您的字符串完全匹配，但更容易阅读：

```
/^(([\w\s.,()\\\/'\xE0\xE8\xE9\xF9\xF2\xEC\x27-])*\[?([\w\s.,()\\\/'\xE0\xE8\xE9\xF9\xF2\xEC\x27-])*\]?)+$/ 
```

现在问题变得清晰了：`[]`s 都是可选的，并且`@`您的测试字符串中的 s 不是允许的字符范围的一部分。这意味着在遇到 时`@`，正则表达式引擎需要回溯到匹配中并检查是否有任何其他方法可以匹配前面的部分 - 而且它必须尝试很多方法。

根据您的规范，您根本不需要 final `+`，因为您似乎想要匹配一个字符串，该字符串包含任何允许的字符加上一个可选`[...]`的 - 结尾的相同字符的封闭字符串。在这种情况下，使用

```
/^([\w\s.,()\\\/'\xE0\xE8\xE9\xF9\xF2\xEC\x27-]*)(\[[\w\s.,()\\\/'\xE0\xE8\xE9\xF9\xF2\xEC\x27-]*\])?$/ 
```

# javascript - 在“表”错误中看到开始标记“div”并且 div 不显示任何内容

> ID：13586812
> 
> 赞同：1
> 
> 时间：2012-11-27T14:50:33.713
> 
> 标签：javascript, html

我真的是网络开发的新手。

当用户从下拉框中选择任何选项时，我正在尝试创建多个输入框（以便它是动态的）

但是，当我单击时，我只收到用于测试目的的弹出消息，但我没有看到任何输入框。此外，当我检查我的源页面时，我的 HTML 页面在我放置的位置有错误`<div>`（这是我的输入框应该显示的位置）。我收到的错误消息是在“表”错误中看到的开始标记“div”......我假设程序由于这个错误而无法显示输入框。我试图在谷歌中寻找答案，但我仍然无法解决这个问题......

请让我知道如何解决此错误....

任何帮助将不胜感激......提前致谢！

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
        <title>Run test Script</title>
        <script type="text/javascript">

        function createInputs() {
        alert('writing inputs'); //Test....this message shows...when i change
        var value = document.getElementById("test").value; // this gives you the selected value.
        var split = value.split;
        var splitsize = split.length;
        var code = '';
        for (var j=0; j<splitsize; j++){
            var a = "<input type = 'text' name = '" + split[j] + "' id = '" + split[j] + "'>";
            code += a;
        }
        document.getElementById("inputBox").innerHTML = code;
   }

        </script>
    <body>
        <form action="./runtest?host=11.111.11.11&envname=XP" method="post" name="testForm">  
        <table border="0">
        <tr style="font-weight: bold; font-size: 16px;">
            <td>Environment Name: </td>
            <td>XP</td>
        </tr> 
        <tr>
            <td>Select user name :</td>
            <td><select id="userName" name="userName">
                <option value="user">user</option>
                <option value="guest">guest</option>
                </select>
            </td>
         </tr>
         <tr>
            <td>Enter Password :</td>
            <td>                               

            <input id="pass" type="password" name="password">

         </tr>
         <tr>
            <td>Select test : </td>
            <td><select id="testname" name="testname" onchange="createInputs()">
                <option value="" name=""></option>
                <option value="size" name="startup">startup</option>

                <option value="size" name="Performance">Performance</option>

                <option value="" name="reboot">reboot</option>

                <option value="size,time" name="fetch event">fetch event</option>
                </select></td>
         </tr>
         <tr>
             <td></td>
             <div id = "inputBox"></div>   //*************Error message here ***********
        </tr>
         <tr>
                <td> Enter test User: </td>
                <td><input type="text" id="tuser"></td>
         </tr>
         <tr>
                <td> Enter Test Date: </td>
                <td><input type="text" id="tdate"></td>
         </tr>
          </table>
          <br>
          <input type="submit" value="Run" name="Run">&nbsp;&nbsp;
          <input type="button" value="Close" onclick="window.close()"> &nbsp;&nbsp;
          </form>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T15:05:35.143

解决此问题的最快方法是在执行此代码时打开谷歌浏览器并查看开发者工具和控制台。

问题一：document.getElementById("compname")为null，需要改成document.getElementById("testname")。

```
var value = document.getElementById("testname").value; 
```

问题2：split是一个方法，需要传入一个分隔符。所以，不是 value.split，而是 value.split(",")

```
var split = value.split(","); 
```

请注意，您的重新启动选项可能无法正常工作，因为您的值为空。

编辑：正如其他人所指出的，您还应该在[http://validator.w3.org/#validate_by_input验证您的 HTML](http://validator.w3.org/#validate_by_input)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T14:53:34.040

所以问题是你不能将一个`div`元素直接嵌套在一个`tr`元素内。事实上，我很确定您可以“正式”用作元素的直接子元素的唯一元素`tr`是`<th>`和`<td>`

尝试`div`用`td`元素包装元素......

```
<tr>
    <td></td>
    <td>
        <div id = "inputBox"></div>
    </td>
</tr> 
```

如果您尝试动态创建此`input`元素，那么您的 javascript 可能存在问题。您是否收到任何控制台输出错误？

* * *

此外，如果要捕获用户输入，请使用标签...

```
<tr>
    <td></td>
    <td>
        <input id="inputBox" type="text" />
    </td>
</tr> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T14:54:47.873

```
<tr>
   <td></td>
   <td>
   <div id = "inputBox"></div>   //*************Error message here ***********
   </td>
</tr> 
```

您需要在`<td></td>`标签中添加您的 div。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-27T14:56:32.830

你的脚本执行

```
document.getElementById("compname") 
```

..但我看不到带有 id 的元素`compname`。我看到一个带有`testname`.

# php - Symfony 安全防火墙和针对经过身份验证的用户或受信任 IP 地址的访问控制规则

> ID：13586819
> 
> 赞同：1
> 
> 时间：2012-11-27T14:51:06.117
> 
> 标签：php, security, symfony

我想将某些资源的访问权限限制为经过身份验证的用户或来自受信任 IP 地址的客户端。是否有一个开箱即用的解决方案，或者我需要为此创建一个自定义选民......？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T14:54:23.987

进入你的`security.yml`档案

```
security:
 #...
 access_control:
  - { path: ^/_internal, roles: IS_AUTHENTICATED_ANONYMOUSLY, ip: 127.0.0.1 } 
```

您还可以通过在文件中添加一些控件来保护整个应用程序`app.php`，但我想这不是您需要的

# android - 如何读取 InputStream 中存在的 ArrayList 数据？

> ID：13586826
> 
> 赞同：0
> 
> 时间：2012-11-27T14:51:44.873
> 
> 标签：android

我是android应用程序开发的新手。我正在开发一个与servlet交互的android应用程序。servlet以ArrayList的形式发回响应。

在我的 android 应用程序中，我使用输入流接收数组列表数据。

我的要求是如何从 InputStream 获取 ArrayList 数据

请帮助我前进。

谢谢你，再见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T14:55:13.497

尝试使用 Buffered Reader 接收它并将每一行添加到您创建的新 ArrayList 中。

# javascript - 输入捕获的特征检测=视频

> ID：13586831
> 
> 赞同：3
> 
> 时间：2012-11-27T14:52:01.200
> 
> 标签：javascript, jquery, html, video-capture, capture

我需要使用一个字段以使 Android 和 iOS 用户能够选择用他们的相机拍照，我用 jQuery 附加该输入字段，但我如何进行特征检测，所以我只向需要该方法的浏览器显示该字段而不是例如 flash 或 getUserMedia？

就像是，

```
if (navigator.captureFeature) {
 //append the input field
} else {
 //device does not support capture=camera
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-27T15:02:34.557

**编辑**：我发现了这个：

[https://github.com/addyosmani/getUserMedia.js](https://github.com/addyosmani/getUserMedia.js)

也许这有帮助？

> 这看起来像你想要的：
> 
> [http://www.html5rocks.com/en/tutorials/getusermedia/intro/](http://www.html5rocks.com/en/tutorials/getusermedia/intro/)
> 
> ```
> function hasGetUserMedia() {
>   // Note: Opera is unprefixed.
>   return !!(navigator.getUserMedia || navigator.webkitGetUserMedia ||
>             navigator.mozGetUserMedia || navigator.msGetUserMedia);
> }
> 
> if (hasGetUserMedia()) {
>   // Good to go!
> } else {
>   alert('getUserMedia() is not supported in your browser');
> } 
> ```

# ruby-on-rails - 不兼容的字符编码：Windows-1252 和 UTF-8 yml 文件

> ID：13586834
> 
> 赞同：1
> 
> 时间：2012-11-27T14:52:05.343
> 
> 标签：ruby-on-rails, ruby, utf8-decode

我正在使用 Apatana Studio 3.0。`ü`de.yml 和其他文件中提供了非 ASCII 字符，例如 。他们是否需要额外的编码值？我已经 `# encoding: utf-8`出现在特定的控制器中，它适用于除 index.html.erb 之外的所有页面。index.html.erb 引发错误：

```
Encoding::CompatibilityError in Home#index
    incompatible character encodings: Windows-1252 and UTF-8 
```

中的翻译字符串`de.yml`是：

```
de:
    display_eula: EULA für Applikation 
```

注意：上面的字符串在其他页面上正确呈现，它只是不适用于`index.html.erb`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T15:26:11.013

源脚本的字符编码与对从磁盘和其他源读取的文件执行的 I/O 之间存在差异。

神奇的线条`# encoding: utf-8`告诉 Ruby 源文件本身具有超出正常 ASCII 范围的 UTF-8 编码字符。这让 Ruby 可以正确解释源文件中的固定字符串和多字节字符。

对于 I/O 流，您需要告诉 Ruby 如何解释传入/传出数据。[`IO.new`](http://www.ruby-doc.org/core-1.9.3/IO.html#method-c-new)及其相关方法采用一个可选参数，说明传入/传出数据流编码是什么。

从磁盘、套接字或管道读取的 YAML、JSON、HTML、XML 和其他文件类型如果不是纯 ASCII，则容易出现编码问题。Ruby 有一套非常好的工具用于即时转换，或者在字符串进入内存后进行转换。如果你不告诉 Ruby 期望什么，或者不转换成它期望的，它会抱怨，就像你看到的那样。

James Gray 有一系列[文章](http://blog.grayproductions.net/categories/character_encodings)讨论在 Ruby 中处理 Unicode 和多字节字符集。它进入了一些深水，因为这不是一个简单的话题，但他在解释事情方面做得很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T14:48:26.967

问题在于来自 AWS-SimpleDB 的数据（需要将其更改为`string.encode("utf-8")`. 尽管如此，感谢您的努力。

# c# - 在 C# 中进行按位运算时，除了 x64 或 x86 之外，我还需要考虑 CPU 吗？

> ID：13586846
> 
> 赞同：2
> 
> 时间：2012-11-27T14:52:49.773
> 
> 标签：c#, .net, 64-bit, 32bit-64bit, micro-optimization

我正在考虑在 C# 中进行一些按位运算，并希望确保充分利用 CPU 和总线。我还想构建我的内存数据，这样它就不会产生不必要的负载（将数据与内存页面对齐）。

作为 .NET 开发人员，我能否针对内存数据结构和对齐方式实现硬件/CPU 特定优化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T17:37:00.393

对于位移（注释）之类的事情，只要您在标准数据边界上工作就没有关系 - CPU 将以尊重 CPU 字节顺序的方式进行移动。但是，如果您的数据“自然”是一个字节数组，并且您将它视为一个长数组作为通过“不安全”进行的优化，那么这很*重要*：左移一个 long 与左移 8 个字节非常不同独立。不过，“关于数据类型的谎言”可能是一个有用的优化：例如，web-sockets 屏蔽是作为一个 32 位 xor 应用于数据的，这是一个字节序列。通过一些技巧，可以通过减少数量的 64 位 xor 以及最多 7 个单独的 xor 来完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T23:02:58.127

[您可以使用FieldOffsetAttribute](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.fieldoffsetattribute.aspx)控制数据的内存表示。这是类/结构定义的一部分，因此它不能在运行时更改，尽管您可以针对 x86 优化一个，针对 x64 优化一个，并在运行时决定使用哪个。

不过，您的问题的标题提出了不同的问题。只要您通过内置操作执行按位操作，运行时就会负责将您的代码映射到语义等效的指令。我想说的是：

```
byte f(byte a, byte b){return a ^ b;} // or whatever 
```

必须在它运行的每个平台上表现相同。如果您这样做“不安全”，Marc Gravell 的评论确实适用。这可能是你打算做的 - 我有点不清楚。

# javascript - 避免在 IE 中使用 JSON2 库

> ID：13586854
> 
> 赞同：0
> 
> 时间：2012-11-27T14:53:11.123
> 
> 标签：javascript, json, internet-explorer, parsing

我应该在一个项目中为 IE（专门）设置 JSON 格式的数据解析，我知道[这个库](https://github.com/douglascrockford/JSON-js/blob/master/json2.js)，但数据传输将是一个重大问题，我想尽量减少移动的字节数。

我将使用的 JSON 对象非常小而且非常扁平，用*人类的术语来说*，最多 3 个深度级别可能有 30 行。

有没有更好的方法来解决这个问题？RegEx 产生的问题往往比它解决的问题多。关于如何挑选连接到名为*shabong*的节点的值（或一组值）的任何其他想法？

我已经习惯了`XDocument`C# 中的类，其中只需要指定后代的名称即可获取标签中包含的一堆信息。类似的解决方案将是可取的。（老狗，新花样，呵呵。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T15:02:52.477

*如果*你可以保证数据是安全的，那么你可以使用`eval`构造`Function`函数来解析数据。

这是因为 JSON 数据结构和值与 JavaScript 文字符号中的数据结构和值非常相似，因此您通常可以将数据评估为实际的 JavaScript 表达式。

* * *

使用`eval`：

```
var parsed = eval("(" + myjsondata + ")"); 
```

* * *

使用`Function`：

```
var parsed = (new Function("return " + myjsondata))(); 
```

* * *

同样，这只是在您绝对确定所传递数据的完整性的情况下。因为您将其视为程序的一部分，所以任何替换有效数据的恶意代码都将被执行。

该`Function`版本提供了一点点安全性，因为它是在全局范围内调用的，因此任何恶意代码都无法访问局部变量。总体而言，这应该不会带来什么舒适感。

* * *

除了上述解决方案之外，您始终可以创建自己的序列化来满足您的数据需求。如果数据足够简单，它可以为您提供为您的自定义序列化编写一个非常短且快速的解析器的能力。

# c# - 如何使 AuditTable 属性起作用？

> ID：13586856
> 
> 赞同：2
> 
> 时间：2012-11-27T14:53:13.790
> 
> 标签：c#, fluent-nhibernate, hibernate-envers

我正在尝试为我的 ASP.NET Web 应用程序设置 Nhibernate Envers。我正在使用 Fluent Nhibernate 并且有一个像下面这样的实体。我希望 Envers 使用该表`audUsers`进行审计，但它一直坚持使用`tblUsers_AUD`.

## 实体

```
[AuditTable("audUsers")]
public class User
{
   public virtual string Name {get; set;}
   public virtual string EmailAddress {get; set;}
} 
```

## 映射

```
public class UserMapping : ClassMap<User>
{
    public UserMapping()
    {
        Map(m => m.Name).Not.Nullable();
        Map(m => m.EmailAddress).Not.Nullable();
    }
} 
```

## 休眠配置

```
public static ISessionFactory BuildSessionFactory<T>() where T : ICurrentSessionContext
{
    var connectionString = ConfigurationManager.ConnectionStrings["myConnection"].ConnectionString;
    return Fluently
        .Configure()
        .Database(OracleDataClientConfiguration.Oracle10.ConnectionString(connectionString))
        .Mappings(m => m.FluentMappings.AddFromAssemblyOf<NHibernateConfiguration>()
            .Conventions.AddFromAssemblyOf<TableNameConvention>())
        .CurrentSessionContext<T>()
        .ExposeConfiguration(ConfigureEnvers)
        .BuildSessionFactory();
}

private static void ConfigureEnvers(NHibernate.Cfg.Configuration nhConf)
{
    var enversConf = new NHibernate.Envers.Configuration.Fluent.FluentConfiguration();
    enversConf.Audit<User>();
    nhConf.IntegrateWithEnvers(enversConf);
} 
```

而且，以防万一我设置的 nHibernate 约定很重要：

## 休眠约定

```
public class TableNameConvention : IClassConvention
{
    public void Apply(IClassInstance instance)
    {
        instance.Table(string.Format("tbl{0}s", instance.EntityType.Name));
    }
} 
```

我遇到的问题是 User 实体上的 AuditTable 属性实际上似乎没有做任何事情。Envers 仍然只是使用默认的审计表命名sticking 和_aud 后缀。我已经能够成功地配置它来更改前缀或后缀，但我真的宁愿完全更改名称，主要是由于 Oracle 强加的表名字符限制。否则，当附加前缀或后缀时，我会遇到字符限制过长的表名问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T15:37:17.087

NHibernate.Envers 支持两种配置，使用属性或在代码中配置 - 你不能混合使用这些。在您的 nhCfg.IntegrateWithEnvers 中，您传入您的 Envers 配置。此对象可以是 FluentConfiguration 或 AttributeConfiguration 对象。

您正在使用 FluentConfiguration，这意味着您的配置是在这个对象上的代码中进行的 - Envers 属性被忽略。

FluentConfiguration 的 AuditTable 属性的对应部分是

```
var enversCfg = new FluentConfiguration();
enversCfg.Audit<User>()
   .SetTableInfo(table => table.Value = "audUsers"); 
```

# php - Laravel 参数中的路由空间返回 404

> ID：13586857
> 
> 赞同：0
> 
> 时间：2012-11-27T14:53:18.300
> 
> 标签：php, routing, controllers, laravel

我的控制器（家庭）中有如下操作

```
public function action_test($keyword)
{
    echo $keyword;
} 
```

当我传递没有空格的参数时，它工作正常，如下所示

```
http://localhost/laravel/home/test/apple 
```

但是当我传递带有空格的参数时，它会给出 404 错误，如下所示

```
http://localhost/laravel/home/test/green apple 
```

当空间被编码时它甚至不起作用

```
http://localhost/shop/public/home/test/green+apple 
```

甚至不是这个

```
http://localhost/shop/public/home/test/green%20apple 
```

有人可以帮我吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T10:10:43.587

使用 (:all) 而不是 (:any) 注册您的路线。

来自[Laravel](http://www.laravel.com/docs/routing#wildcards)文档：

*   (:any) ：允许 URI 段是任何字母数字字符串
*   (:all) : 无限制地捕获剩余的 URI

您的路线可能看起来像这样：

```
Route::get('home/test/(:all?)', 'home@test'); 
```

更多关于 Laravel 论坛的主题在[这里](http://forums.laravel.com/viewtopic.php?id=1636)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T18:21:26.407

我不知道这种行为背后的想法，但是 (:any)、(:num) 和 (:any?) 不会接受带空格的字符串。如果您想将字符串传递给您的路线，您应该使用 (:all)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-28T09:29:24.217

[http://www.laravel.com/docs/routing#controller-routing](http://www.laravel.com/docs/routing#controller-routing) 你必须注册你的控制器的路由，比如：Route::controller('home'); 并检查您的控制器类名称是 Home_Controller，还要扩展 Controller 或 Base_Controller 类。

# python - Python：用于运行 Excel VBA 脚本的脚本未运行

> ID：13586861
> 
> 赞同：3
> 
> 时间：2012-11-27T14:53:33.697
> 
> 标签：python, excel, windows-7-x64, win32com, vba

我之所以写作，是因为在似乎搜索了一半的互联网之后，我无法弄清楚为什么这段简单的代码不起作用：

```
from win32com.client import Dispatch

def RunExcelMacro(name):
    myExcel = Dispatch('Excel.Application')
    myExcel.Visible = 0
    myExcel.Workbooks.Add('C:\AC_Software\TestDatei.xls')
    myExcel.Run(name)
    myExcel.DisplayAlerts = 0
    myExcel.Quit()

if __name__ == "__main__":
    RunExcelMacro('Makro_test') 
```

它应该运行 Excel 文件“TestDatei.xls”中包含的 vba 脚本“Makro_test”。我在办公室的 64 位 Windows 7 台式机上尝试了 Python 和 Java 版本（32 位和 64 位）的不同组合。我还在路径中尝试了不同的斜杠和反斜杠组合（反斜杠和正斜杠，简单，双）。不幸的是，错误消息是德语的。但如果你们中的一些人可以从中检测到任何东西，这里是：

```
Traceback (most recent call last):
  File "C:\Users\alloun\workspace\MyTestProject\root\nested\example.py", line 22, in <module>
    RunExcelMacro('Makro_test')
  File "C:\Users\alloun\workspace\MyTestProject\root\nested\example.py", line 16, in RunExcelMacro
    myExcel.Workbooks.Add('C:\AC_Software\TestDatei.xls')
  File "<COMObject <unknown>>", line 2, in Add
pywintypes.com_error: (-2147352567, 'Ausnahmefehler aufgetreten.', (0, u'Microsoft Excel', u"'TestDatei.xls' wurde nicht gefunden. \xdcberpr\xfcfen Sie die Rechtschreibung des Dateinamens, und \xfcberpr\xfcfen Sie, ob der Speicherort der Datei korrekt ist.\n\nWenn Sie versuchen, die Datei \xfcber die Liste der zuletzt ge\xf6ffneten Dateien zu \xf6ffnen, stellen Sie sicher, dass die Datei nicht umbenannt, verschoben oder gel\xf6scht wurde.", u'xlmain11.chm', 0, -2146827284), None) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T16:40:54.153

这是英文错误信息：

> pywintypes.com_error: (-2147352567, 'Exception occurred.', (0, u'Microsoft Excel', u"'TestDatei.xls' 找不到。检查文件名的拼写，并验证文件位置是正确。\n\n如果您尝试从最近使用的文件列表中打开该文件，请确保该文件未被重命名、移动或删除。", 'xlmain11.chm', 0, -2146827284) ， 没有任何）

确保路径正确，然后尝试使用原始字符串`r'C:\AC_Software\TestDatei.xls'`。我尝试了相同的代码，它适用于我拥有的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-20T23:51:17.237

请参阅下面使用 python 运行 Excel 宏的代码。您可以在本网站 - 链接中找到代码。

```
from __future__ import print_function
import unittest
import os.path
import win32com.client

class ExcelMacro(unittest.TestCase):
    def test_excel_macro(self):
        try:
            xlApp = win32com.client.DispatchEx('Excel.Application')
            xlsPath = os.path.expanduser('C:\test1\test2\test3\test4\MacroFile.xlsm')
            wb = xlApp.Workbooks.Open(Filename=xlsPath)
            xlApp.Run('macroName')
            wb.Save()
            xlApp.Quit()
            print("Macro ran successfully!")
        except:
            print("Error found while running the excel macro!")
            xlApp.Quit()
if __name__ == "__main__":
    unittest.main() 
```

# jquery - jQuery删除h1文本

> ID：13586863
> 
> 赞同：3
> 
> 时间：2012-11-27T14:53:35.327
> 
> 标签：jquery, text

我有这个 html 行：

```
<nobr title="New" class="testClass">
       <h1>ABC</h1>
</nobr> 
```

如何删除 h1 中的文本或删除整个 h1 标签？

我最后一次尝试：

```
$("nobr.testClass > h1").text(''); 
```

但这不起作用

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T14:54:23.617

以下删除`h1`元素：

```
$("nobr.testClass > h1").remove(); 
```

不过，您的代码应该可以正常工作。你的错误在别处。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-27T14:56:00.120

尝试这个：

```
 $(".testClass h1").text(''); 
```

并删除：

```
 $(".testClass h1").remove(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-27T14:56:23.983

删除标签

```
$("nobr.testClass > h1").remove(); 
```

清空标签

```
$("nobr.testClass > h1").empty(); 
```

# printing - 如何从 ZebraDesigner 标签中获取 ZPL 代码？

> ID：13586865
> 
> 赞同：36
> 
> 时间：2012-11-27T14:53:37.317
> 
> 标签：printing, barcode, zebra-printers, zpl

我正在使用 ZebraDesigner 2.2.2（内部版本 2728）。

有没有办法从 ZebraDesigner 中提取 ZPL 代码？我什至无法将其导出到 ZPL 文件，我唯一的选择是将其保存为`.lbl`.

![在此处输入图像描述](../Images/dd6eeed72af44955b90964d4d177aaa4.png)

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-05-22T07:00:33.760

不确定我是否在这里遗漏了什么，但从我使用 ZebraDesigner 2.2.3（Build 4271）的那个，我可以点击打印，勾选“打印到文件”复选框，输出到 *.prn 文件，打开该文件与记事本和代码就在那里。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-11-27T16:32:28.920

You can add a new ZebraDesigner ZPL driver to the system and use a file as the port. Then when you "Print" the document, it will write the ZPL code to the file.

Note that it might have some header information before the first `^XA` which you might not need.

**UPDATE : (How to add local port on a driver)**

1.  Go to `Printer Properties`
2.  Click on the `Ports` tab
3.  Click `Add Port`
4.  Select `Local Port` and click `New port`
5.  Enter a filename e.g. `C:\output.zpl`
6.  Make sure it is checked in the ports list
7.  Now all printing output should go to `C:\output.zpl`

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2014-05-20T10:19:06.047

我在“打印”弹出对话框中使用“打印到文件”复选框。它会生成一个包含 ZPL 的文本文件。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-07-29T12:30:18.400

如果要查看本机 ZPL 代码，则必须使用斑马字体。如果您不使用，您将看到如下 .GRF 代码：

> ^FT320,64^XG007.GRF,1,1^FS

并且不理解他们。之后点击打印，然后选择“打印到文件”。因此您可以看到清晰的 ZPL 代码。

# iphone - 对象（舞台）大小有什么问题 AIR 3.4 FOR IOS

> ID：13586869
> 
> 赞同：0
> 
> 时间：2012-11-27T14:54:03.977
> 
> 标签：iphone, ios, air, flash-builder

如果你跟踪 stage.stageHeight 你会得到 370 而不是 960

stageFullscreenHeight 将返回 960

在我的一个项目中存在这样一个错误，但后来在代码中似乎阶段修复了它自己

这适用于 flash builder 4.7 beta 2

在模拟器上的设备上通过模拟器调试这搞砸了所有定位

像 stage align 这样的东西也会产生奇怪的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T14:54:03.977

要解决这个问题：在您的类函数中添加 enterframe 事件侦听器 - 然后在它运行 1 次后将其删除（您可以在舞台宽度之前和之后放置跟踪） - 然后执行所有定位内容和 VOILA - 全部回到 960 或任何你定义。

希望这对一些人有帮助1

干杯!

# javascript - 多个播放器 - YouTube api

> ID：13586870
> 
> 赞同：1
> 
> 时间：2012-11-27T14:54:04.570
> 
> 标签：javascript, jquery, youtube, youtube-api, youtube-javascript-api

我正在使用 YouTube API 创建一个播放器实例，然后从链接列表加载和播放视频。每个链接都包含一个以视频 ID 作为其值的内联函数调用。然后 JS 获取 ID 并将该视频加载到指定的 div (#player') 中。

这工作正常，但我现在需要做的是允许创建多个#player 实例。通过重复空 div，JS 显然会因为重复的 ID 而停止。我尝试了许多不同的路线，因此它使用类而不是 ID，但我只能通过在 JS 中手动创建每个实例来开始工作。这太可怕了，而且造成了太多的重复。

这是代码片段

JS-

```
var tag = document.createElement('script');
tag.src = "http://www.youtube.com/player_api";
var firstScriptTag = document.getElementsByTagName('script')[0];
firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

var ytplayer;
function onYouTubePlayerAPIReady() {
    var first_vid = $('.media_controls:first').attr('id');
    ytplayer = new YT.Player('player', {
        height: '350',
        width: '600',
        videoId: first_vid,
        events: {
        "onStateChange": onPlayerStateChange
        }
        });
    }

-------------------- Other code to handle onPlayerStateChange --------------------

function load_video(id) {
    if (ytplayer) {
        ytplayer.loadVideoById(id);
    }
} 
```

'first_vid' 仅用于在页面加载时加载第一个视频。

HTML -

```
<div id="player"></div> 
<a class="play_button" href="#" onClick="load_video('5jJdo5wA2zA'); return false;">Play</a> 
```

此外，我正在为旧版本的 IE 使用另一个脚本，并且需要它来做同样的事情。这是用于那个的JS（相同的html）。

```
var first_vid = $('.media_controls:first').attr('id');
var params = { allowScriptAccess: "always" };
    var atts = { id: "myytplayer" };
    swfobject.embedSWF("http://www.youtube.com/v/"+first_vid+"?enablejsapi=1&playerapiid=ytplayer&version=3",
                       "player", "600", "350", "8", null, null, params, atts);

function onYouTubePlayerReady(playerId) {
  ytplayer = document.getElementById("myytplayer");
  ytplayer.addEventListener("onStateChange", "onPlayerStateChange");
}

-------------------- Other code to handle onPlayerStateChange --------------------

function load_video(id) {
    if (ytplayer) {
        ytplayer.loadVideoById(id);
    }
} 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T16:53:58.987

我不完全了解您想要做什么，但是要在同一页面中使用多个播放器，我认为示例“topic-explorer”的源代码非常有用：

[http://code.google.com/p/gdata-samples/source/browse/trunk/gdata/topic-explorer/app/scripts/controllers/main.js](http://code.google.com/p/gdata-samples/source/browse/trunk/gdata/topic-explorer/app/scripts/controllers/main.js)

```
$scope.videoClicked = function(target, videoId) {
    var container = target.parentElement;

    if (typeof(YT) != 'undefined' && typeof(YT.Player) != 'undefined') {
      playVideo(container, videoId);
    } else {
      $window.onYouTubeIframeAPIReady = function() {
        playVideo(container, videoId);
      };

      $http.jsonp(constants.IFRAME_API_URL);
    }
  };

function playVideo(container, videoId) {
    var width = container.offsetWidth;
    var height = container.offsetHeight;

    new YT.Player(container, {
      videoId: videoId,
      width: width,
      height: height,
      playerVars: {
        autoplay: 1,
        controls: 2,
        modestbranding: 1,
        rel: 0,
        showInfo: 0
      }
    });
  } 
```

和视图中的这段代码：

[http://code.google.com/p/gdata-samples/source/browse/trunk/gdata/topic-explorer/app/views/main.html](http://code.google.com/p/gdata-samples/source/browse/trunk/gdata/topic-explorer/app/views/main.html)

```
<div class="result-heading">Videos</div>
  <div class="flex-box-container-row">
    <div ng-repeat="videoResult in videoResults" class="result-container">
      <div class="player-container">
        <img ng-click="videoClicked($event.target, videoResult.id)" ng-src="{{videoResult.thumbnailUrl}}" class="thumbnail-image">
        <div class="title"><a ng-href="{{videoResult.href}}" target="_blank">{{videoResult.title}}</a></div>
      </div>
      <div ng-show="channelId" class="button-container">
        <button ng-click="addToList($event.target, 'likes', videoResult.id)">Like</button>
        <button ng-click="addToList($event.target, 'favorites', videoResult.id)">Favorite</button>
        <button ng-click="addToList($event.target, 'watchLater', videoResult.id)">Watch Later</button>
      </div>
    </div>
  </div> 
```

这个例子使用 AngularJS..

# javascript - 淘汰赛js应用绑定

> ID：13586882
> 
> 赞同：0
> 
> 时间：2012-11-27T14:54:38.957
> 
> 标签：javascript, knockout.js

在这里淘汰赛很新。

我从获取所有经销商的网络服务中获取 JSON 数据。我想将它绑定到 GUI，然后能够根据所选区域过滤数组，而无需从 Web 服务获取新数据并应用。现在看来，我需要 jquery.getJSON 函数中的过滤和 ko.applyBinding 功能（在单独的函数中，而不是在示例中的 page.ready 中）。我不希望这样，因为这意味着我必须从 Web 服务获取新数据并在每次用户想要过滤数组时运行应用绑定。

这段代码非常简化，但我希望你明白这一点：

```
function GridModel() {
    var self = this;
    self.Dealers = ko.observableArray();
}

var Grid_Model;    

$(document).ready(function () {  
    Grid_Model = new GridModel();  
    ko.applyBindings(Grid_Model); // If this line is here, no data is bound to the GUI at all
    jQuery.getJSON("URL", function (data) {
        Grid_Model.Dealers = ko.mapping.fromJS(data);
        // If I put the filter functionality here, it works
        // If I put ko.applyBindings(Grid_Model); here, it works.
    });
});

function filterDealers(string region) {
    Grid_Model.Dealers = ko.utils.arrayFilter(Grid_Model.Dealers(), function(dealer) {                
        return dealer.RegionName() == region;
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T14:57:41.537

您不需要每次都调用应用绑定。将您的代码更改为如下所示。

```
jQuery.getJSON("URL", function (data) {
    var dealerArray = ko.mapping.fromJS(data);
    // Filter the dealer array here
    Grid_Model.Dealers(filteredArray);
}); 
```

# javascript - 简单的模具辊应用问题

> ID：13586884
> 
> 赞同：-5
> 
> 时间：2012-11-27T14:54:43.523
> 
> 标签：javascript, html

我正在学习 javascript，并且我编写了一个简短的骰子应用程序，但是单击按钮时它不会运行。我看不出问题出在哪里。有人可以帮我解决这个问题。

```
 <!DOCTYPE HTML>
<html>
    <head>
        <script type=text/javascript>

        var face0= new Image() face0.src="d1.gif"
        var face1= new Image() face1.src="d2.gif"
        var face2= new Image() face2.src="d3.gif"
        var face3= new Image() face3.src="d4.gif"
        var face4= new Image() face4.src="d5.gif"
        var face5= new Image() face5.src="d6.gif"

        function rollDice(){
        var randomdice= Math.round(Math.random() *5)document.images["mydice"].src=eval("face" * randomdice+".src")
        }
        </script>
    </head>
    <body>
    <img src="d1.gif" name="mydice">
    <form>
    <input type="button" value="Roll" onclick="rollDice()">
    </form>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T14:59:44.443

分号不是可选的。浏览器会尽可能地尝试插入它们，但很多时候它可能是错误的。

此外，***使用 @!#$ 数组***！这就是他们的目的！

尝试这个：

```
(function() {
    var i, faces = [];
    for( i=0; i<6; i++) {
        (faces[i] = new Image()).src = "d"+(i+1)+".gif";
    }
    window.rollDice = function() {
        var side = Math.floor(Math.random()*6);
        document.getElementById('mydice').src = faces[side].src;
    }
})();

...

<img src="d1.gif" id="mydice" /> 
```

并删除表格。你没有提交任何东西，所以你不需要表格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T15:01:27.227

请不要使用`eval`. 而是做这样的事情：

```
var faces=[]
var numFaces=6;
for(var i=1;i<=numFaces;i++){
    var img=new Image();
    img.src='d'+i+'.gif';
    faces.push(img);
}
window.rollDice=function(){
    var randomdice= Math.floor(Math.random()*numFaces);
    document.images["mydice"].src=faces[randomdice].src;
} 
```

jsFiddle：http: [//jsfiddle.net/jdwire/fZY3u/](http://jsfiddle.net/jdwire/fZY3u/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T14:59:18.493

你快到了 - 你只需要`semi colons`在你的语句之间，你需要用'+'连接字符串，而不是'*'

**编辑**

正如 Kolink 指出的那样，`eval` [是危险的](https://stackoverflow.com/questions/197769/when-is-javascripts-eval-not-evil)。

您实际上根本不需要实例化`Image()`s - 鉴于骰子的侧面有 6 个 gif，您需要做的就是更改`src`图像上的文件名，如下所示：

```
 function rollDice(){
     var randomdice= Math.round(Math.random() *5) + 1; // +1 since your gifs are 1-6
     document.images["mydice"].src = "d" + randomdice.toString() + ".gif";
 } 
```

[在这里更新了小提琴](http://jsfiddle.net/sLPCd/3/)

**编辑**请注意以下几点指出的注意事项，即此答案不会预加载图像，这将在第一次触发每个骰子面 gif 时（在缓存之前）对性能造成影响。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-27T14:57:21.853

你错过了分号`;`

```
 var face0= new Image(); face0.src="d1.gif";
    var face1= new Image(); face1.src="d2.gif";
    var face2= new Image(); face2.src="d3.gif";
    var face3= new Image(); face3.src="d4.gif";
    var face4= new Image(); face4.src="d5.gif";
    var face5= new Image(); face5.src="d6.gif";

    function rollDice(){
       var randomdice= Math.round(Math.random() *5); 
       document.images["mydice"].src=eval("face" + randomdice+".src");
    } 
```

注意：始终整齐地格式化您的代码。不要将所有代码写在一行中，这会使您感到困惑。

# jquery - 循环轮播 jquery

> ID：13586890
> 
> 赞同：3
> 
> 时间：2012-11-27T14:55:09.903
> 
> 标签：jquery, loops, carousel, infinite

> **可能重复：**
> [我的轮播不起作用](https://stackoverflow.com/questions/13552242/my-carousel-does-not-work)

我有点疑惑！我正在创建这个旋转木马，我希望它循环播放。其他一切都很好，但是，当最后一张图像滑出时，我希望第一个在它之后做同样的事情，然后第二个......无限。我尝试了很多事情，比如将第一张图片附加到最后一张。我还尝试在最后一张之后显示图像（这个尝试但效果不佳）。

我需要展示我需要做哪些调整。非常感谢！

```
var images = $("#slideShow div");
var index = 0;
for (i = 0; i < images.length; i++) {
    $(images[i]).addClass("image-" + i);
}

setInterval(function() {
    $(".image-" + (index)).slideUp(1000);
    if (index < images.length - 1) {
        index += 1;
    }   
    else {
        index = 0;
    }    
}, 500);

  #slideShow {
height:20em;
width:80%;
float:right;

}

#slideShow div{
line-height:20em;
float:right;
}   

   #slideShow img{
vertical-align:middle;
border:solid 5px #A5A5A5;
border-radius:5px;
-moz-border-radius:5px;
-webkit-border-radius:5px;
}

        <div id="slideShow">
                    <?php

                            $dir = "carousel";
                        $dh = opendir($dir);
                        while($slide = readdir($dh)){
                                $items[] = $slide;
                            }

                            for($i=0; $i<sizeof($items); $i++){
                                                            if($items[$i] !=   "." && $items[$i] != ".."){
                                                   $imagePath = $dir."/".$items[$i];
                                                   $image = "<div>"."<img src = \"".$imagePath."\""." />"."</div>";
                                                    echo $image;

                                        }

                                }
                            closedir($dh);

                        ?>

            </div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T15:42:26.837

而不是切换你的图像，这将使代码不可读和充满 z-index 变化，**只是容器元素`animate`的`scrollTop`**

*   为 scrollTop 设置动画并在回调内部，重做循环函数并：
*   将 scrollTop 重置为 0 和
*   删除第一个元素，将其附加`after`到最后一个

```
var $slideShow = $('#slideshow');

function loop() {
  $slideShow.stop().animate({
    scrollTop: 200
  }, 800, 'linear', function() {
    $(this).scrollTop(0).find('div:last').after($('div:first', this));
    loop(); // Recursion
  });
}

loop(); // Start
```

```
#slideshow {
  width: 200px;
  height: 200px;
  position: relative;
  overflow: hidden;
}

#slideshow img {
  display: block;
}
```

```
<div id="slideshow">
  <div><img src="http://placehold.it/200x200/cf5&text=1" alt=""></div>
  <div><img src="http://placehold.it/200x200/f0f&text=2" alt=""></div>
  <div><img src="http://placehold.it/200x200/444&text=3" alt=""></div>
  <div><img src="http://placehold.it/200x200/f70&text=4" alt=""></div>
</div>

<script src="https://code.jquery.com/jquery-3.1.0.js"></script>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T15:07:39.800

您需要做的是制作图像的第二个副本，将它们粘贴在现有图像的末尾。这样，当您传递“最后一个”图像时，“第一个”图像是可见的。

诀窍是一旦复制的“第一个”图像到达可视区域的末尾，就重置整个批次的位置。

# c - 比较 strcpy() 的两种实现

> ID：13586892
> 
> 赞同：1
> 
> 时间：2012-11-27T14:55:14.700
> 
> 标签：c, arrays, pointers

我有这两个功能做同样的事情（`strcpy()`功能）：

**第一次实现：**

```
void strcpy(char* des_str, const char* src_str) 
{ 
   int j = 0; 
   while ((dest_str[j] = src_str[j])!= '\0')) 
   j++; 
} 
```

**第二种实现：**

```
void strcpy(char* des_str, const char* src_str) 
{ 
   while ((*dest_str = *src_str)!= '\0')) 
   { 
      src_str++;
      dest_str++; 
   } 
} 
```

`C`程序员通常更喜欢哪种风格/实现？“*数组”*方法还是*“指针”*方法？两种实现之间除了“美学”差异之外还有其他差异吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T15:00:14.980

我敢打赌，两者生成的机器代码将完全相同。（有优化）

因此，这只是可读性的问题：使用您和您的团队最熟悉的版本。这里最重要的是，当任何程序员看到这个源代码时，他/她不必浪费时间思考这个函数的作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T19:18:15.447

正如 Didier 所指定的，机器生成的代码看起来是一样的，并且在这种情况下的性能也将是相同的。但是，我建议

1) 使用 strncpy 而不是使用 strcpy。strncpy(des, src, noOfcharToCopy);

2) 更好地从 src 端复制到 des 端而不是从头开始；bcz 想一想，如果 src 从地址 105 开始，大小为 10，而 des 从地址 100 开始，则 src 数据将覆盖 des 的 105 地址。它说“des”应该拥有真正的价值，然后是src。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T14:58:03.090

这取决于我要说的程序员。主要区别在于在第一个实现中您创建一个新变量并只修改这个，在第二个实现中您修改两个现有变量。这是大小与速度的问题（但规模要小得多）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-27T16:29:20.073

第一个实现，即数组实现是正确的和首选的。但这取决于程序员。最佳做法是不要更改/更改指针，即应保留起始/基地址，不应递增或递减。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-11-27T14:58:58.620

据我所知，这个更常见：

```
void strcpy(char* des_str, const char* src_str) 
{ 
  while ((*dest_str = *src_str)!= '\0')) 
  { 
    src_str++;
    dest_str++; 
  } 
} 
```

我只能假设，因为它不需要分配任何内存（int），尽管更准确地说，我假设它通常实现为

```
++src_str
++dest_str 
```

因为后缀增量必须在增量之前创建一个新的 int 用作“先前值”

# tsql - 选择文字而不是列值时查询变慢

> ID：13586893
> 
> 赞同：0
> 
> 时间：2012-11-27T14:55:15.063
> 
> 标签：tsql, sql-server-2005, optimization

我正在做一些修改以提高 1000 年前编写的旧报表查询的性能。在修改它以执行 UNION ALL 的过程中，我已将其中一个列选择值替换为 NULL。一旦我这样做，查询就会从执行 1-2 秒变为执行 30 秒。我查看了这两个版本的实际执行计划，它们看起来相同。对我来说，选择文字 NULL 可能比读取行值慢，这对我来说毫无意义。我还尝试过将 NULL 显式转换为前一种类型（nvarchar）以及选择 '' 而不是 NULL 没有区别。

查询和模式非常复杂，因此这可能需要一些问答疑难解答。选择 NULL 时减慢速度的列是底部附近的“OtherComments”。您可以看到运行速度很快的原始版本，并在其上方进行了评论。只是为了让我们保持正轨，我只是想了解为什么更改该列会使其运行缓慢，而不是其他改进查询的方法（我知道有很多）。这是一个缩写版本：

```
SELECT @Date                                         Parameter,
   fml.FirstName + ' ' + fml.LastName                ParentName,
   (
           SELECT TOP 1 p.PhoneNum
           FROM   tbl_Phone p, tbl_PhoneTypes pt, tbl_FamilyPhone fp
           WHERE  p.fk_PhoneTypeID = pt.pk_PhoneTypeID
           AND    p.pk_PhoneID = fp.fk_PhoneID
           AND    fp.fk_FamilyID = fml.pk_familyID
           AND    pt.Type = 'home' 
           AND    fp.IsDeleted = 0
           ORDER BY fp.CreatedDate DESC
   )                                                 PhoneNo,
   fml.Comments                                      FamilyComments,
   std.FirstName + ' ' + std.LastName                StudentName,
   (
           SELECT
           ...
   )                                                 ClassDescription,

   (
           SELECT
           ...
   )                                                 TestClassDescription,
   CASE
      WHEN (sce.pk_StudentEnrollmentID IS NOT NULL) THEN
         (
         SELECT emp.FirstName + ' ' + emp.LastName
         ...
         )
      WHEN (st.pk_StudentTestID IS NOT NULL) THEN
         (
         SELECT emp.FirstName + ' ' + emp.LastName
         ...
         )
      ELSE
         NULL
   END                                               InstructorName,
        CASE
              WHEN (st.pk_StudentTestID IS NOT NULL) THEN
                 (
                 SELECT emp.FirstName + ' ' + emp.LastName
                 ...
                 )
              ELSE
                 NULL
               END                                       TestInstructorName,
   st.TestDate                                      TestDate,
   tr.Description                                    TestResult,
       CASE
          WHEN (
           SELECT COUNT(ClassDate)                                                  --Select absent attendances from yesterday
           ...
           ) >= 1 
          THEN
               CAST(1 AS BIT)
          ELSE 
               CAST(0 AS BIT)
       END
                                                         MissedYesterdaysClass,
   CASE
      WHEN (datediff(day, CONVERT(varchar(11),fml.InquiryDate,102), @Date) =3 and
           (fml.CurrentMembershipDate IS NULL) AND ((fml.WebCreated = 0) OR (fml.WebCreated = NULL)) AND
           ((
           SELECT count(*)
           ...
           ) <= 0) AND
           ((
           SELECT count(*)
           ...
           ) <= 0) AND
           ((
           SELECT count(*)
           ...
           ) <= 0) AND
           ((
           SELECT count(*)
           ...
           ) <= 0) AND
           ((
           SELECT count(*)
           ...
           ) <= 0)) THEN
         CAST(1 AS BIT)
      WHEN (((fml.InquiryDate + 3) = @Date) AND (std.pk_StudentID IS NULL)) THEN
         CAST(1 AS BIT)
      ELSE
         CAST(0 AS BIT)
   END                                               InquiredButDidnotSchedule,
   CASE
      WHEN --(((st.TestDate + 2) = @Date) AND
            (datediff(day, CONVERT(varchar(11),st.testdate,102), @Date) =2 and
           (tr.Description = 'Not Enrolled') AND
               (st.IsDeleted = 0) AND
           (st.IsCancelled = 0)) THEN
         CAST(1 AS BIT)
      ELSE
         CAST(0 AS BIT)
   END                                               AttendedButHavenotEnrolled,
   CASE
      WHEN --(((st.TestDate + 1) = @Date) AND
                (datediff(day, CONVERT(varchar(11),st.testdate,102), @Date) =1 and
           (tr.Description = 'No Show')  AND
               (st.IsDeleted = 0) AND
           (st.IsCancelled = 0)) THEN
         CAST(1 AS BIT)
      ELSE
         CAST(0 AS BIT)
   END                                               PeopleNoShowed,
   CASE
      WHEN ---(((st.TestDate - 1) = @Date) AND
            (datediff(day, CONVERT(varchar(11),st.testdate,102), @Date) =-1 and
           (tr.Description = 'Scheduled')  AND
               (st.IsDeleted = 0) AND
           (st.IsCancelled = 0)) THEN
         CAST(1 AS BIT)
      ELSE
         CAST(0 AS BIT)
   END                                               PeopleHaveTest,
       CAST(0 AS BIT)                                    ShowOtherComments,

CASE
          WHEN  
                ((   
                SELECT count(*)
                ...
                ) > 0) AND
                ((
                SELECT EventDate
                ...
                )
                    BETWEEN 
                    (
                        DateAdd(day, DateDiff(day, 0, @Date), 0)
                    )
                    AND
                    (
                        (DateAdd(day, DateDiff(day, 0, @Date), 0) + 6)
                    )
                )
                AND
                datename(weekday, @Date) = 'Wednesday'
                AND
                bb.IsDeleted = 0
                AND
                bb.IsCancelled = 0 THEN
             CAST(1 AS BIT)
          ELSE
             CAST(0 AS BIT)
       END                                               ShowUpcomingBookingss,
       (
       SELECT EventDate
       ...
       )                                                 BookingDate,
       bb.ChildTurningAge                                Age,
   std.pk_StudentID                                  StudentID,
       fml.pk_familyID                                   FamilyID,
       CASE
      WHEN (datediff(day, CONVERT(varchar(11),fml.InquiryDate,102), @Date) =1 and
           (fml.MembershipDate IS NULL) AND (fml.WebCreated = 1) AND
           ((
           SELECT count(*)
           ...
           ) <= 0) AND
           ((
           SELECT count(*)
           ...
           ) <= 0) AND
           ((
           SELECT count(*)
           ...
           ) <= 0) AND
           ((
           SELECT count(*)
           ...
           ) <= 0) AND
           ((
           SELECT count(*)
           ...
           ) <= 0)) THEN
         CAST(1 AS BIT)
      WHEN (((fml.InquiryDate + 1) = @Date) AND (std.pk_StudentID IS NULL)) THEN
         CAST(1 AS BIT)
      ELSE
         CAST(0 AS BIT)
   END                                               InquiredButDidnotScheduleOnline,

--     Commenting this out and replacing with NULL slows it down from 2 sec to 30 sec
--     fml.OtherComment                        OtherComments,
       NULL                       OtherComments,
    FROM   tbl_Family fml
    LEFT OUTER JOIN tbl_Student std on fml.pk_FamilyID = std.fk_FamilyID
    LEFT OUTER JOIN tbl_StudentEnrollment sce on std.pk_StudentID = sce.fk_StudentID
    LEFT OUTER JOIN tbl_StudentTest st on std.pk_StudentID = st.fk_StudentID
    LEFT OUTER JOIN tbl_Booking bb on std.pk_StudentID = bb.fk_StudentID
    LEFT JOIN tbl_TestResult tr on st.fk_TestResultID = tr.pk_TestResultID
    WHERE  fml.fk_FacilityID = @FacilityID
    AND    (fml.IsDeleted = 0 OR fml.IsDeleted IS NULL)
    AND    (std.IsDeleted = 0 OR std.IsDeleted IS NULL) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T18:34:09.083

我比较了查询计划的实际 XML，并注意到快速存储过程的内存授予高于慢存储过程。这在 MS 论坛中向我解释过，可能是因为当 fml.OtherComment 在查询中时，它期望更大的行大小。如果您在编写良好的查询时遇到此问题，我不知道解决方案，但在我的情况下，这个 spoc 效率非常低（以一轮左右的方式选择最终记录），我从头开始重写它，它是现在跑得很快。

# playframework - play framework 2.0中的多个字段构造函数

> ID：13586896
> 
> 赞同：3
> 
> 时间：2012-11-27T14:55:27.263
> 
> 标签：playframework, playframework-2.0

我正在使用 twitter 引导程序作为这样的字段构造函数

```
 @import helper.twitterBootstrap._
    @implicitFieldConstructor = @{ FieldConstructor(extra.twitterBootstrapInput.f) } 

```

我将如何添加/使用另一个字段构造函数？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T17:06:02.780

模板中只能有一个，尽管您可以破解它。

首先让我们了解一下代码。您展示的代码创建了一个`implicit`（名称以 Implicit 开头）`fieldConstructor`在生成的 Scala 代码中调用的变量。由于它具有类型`FieldConstructor` （从分配的值自动推断），它将用于`FieldConstructor`可能需要隐式的地方。

如果你在哪里以类似的方式声明另一个相同类型的 var，Scala 将不知道使用哪个隐式并会引发错误。

也就是说，您可以明确声明`FieldConstructor`如下：

```
 @input(field, args:_*)( Htmlcode)(implicitFieldConstructor) 
```

注意第三个参数是明确的。

这应该允许您创建更多的构造函数，如下所示：

```
 @implicitAnotherFieldConstructor = @{ FieldConstructor(anotherConstructor) } 
```

警告：我现在不能完全测试这个，但考虑到模板的行为方式，这似乎是你唯一的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T21:50:09.960

我想出解决此问题的另一种方法是在一个字段构造函数中添加 if else 语句，例如在您的表单中：

```
@inputFile(
     nsForm("plateFiles"),
 '_label -> "Upload files",
 'uploadwidget -> "Select file(s)"
) 
```

并在您的字段构造函数中：

```
@if(elements.args.contains('uploadwidget)){
    //Do something here
}else{
    //Do something else
} 
```

# php - 使用 Laravel 和 5.3 PHP 框架，CodeIgniter 是否仍然适用于 PHP 应用程序？

> ID：13586911
> 
> 赞同：0
> 
> 时间：2012-11-27T14:56:26.347
> 
> 标签：php, codeigniter, laravel

标题说明了一切...

我有 2 年的 CI 经验，并且有自己的助手、库和 Sparks/GitHub 的额外库，我发现它是一个很好的框架......

似乎每个人都跳槽到 Laravel，CodeIgniter 目前仍然适合应用程序开发还是已被弃用？

每个人都抨击它的部分原因是因为它不使用静态方法，并且代码到处都是 $this 和/或它不使用 5.3 功能吗？

我会很感激任何回复，因为我必须在下周开始开发一个新的应用程序......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T15:09:50.793

所有偏好。

我会说 99% 的主机允许 PHP 5.3+（可能接近 100% 的所有可靠主机），所以向后兼容旧版本的 PHP 是没有用的，并且可以被视为臃肿。

最终，没关系。较新的框架利用了自动加载器、命名空间、类重载，有些甚至还有 CRUD 生成器和数据库迁移工具。Codeigniter 是可靠的，仍在开发中，并将完成工作。

随着切换，由于学习其他框架的新库和标准，将有更长的开发周期。再说一次，学习一个新的框架必然会提高你作为程序员的技能。

就个人而言，我喜欢 Codeigniter 只是因为它是我工作的第一个框架，但在转向其他框架之后，Codeigniter 感觉缺乏，某些方面感觉格格不入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T15:11:01.113

CodeIgniter 适用于小型项目。不过你可以看看这个[框架](http://fuelphp.com/)。它有ORM，支持mongodb和redis等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T15:21:05.947

如果您觉得 CI 不再是正确的选择，我建议您查看[symfony2 。](http://symfony.com)

但是，如果您需要在下周开始开发，我假设您有一个截止日期，这使我建议您使用您最熟悉的框架。如果是 CI，我相信你会在 CI 中完成工作。

但老实说，这个问题太模糊了，无法回答。人们是否可以建议坚持 CI 或选择其他框架，这实际上取决于您的项目。

# javascript - 如何使用 datejs 计算大于 24 小时的小时数

> ID：13586913
> 
> 赞同：2
> 
> 时间：2012-11-27T14:56:26.003
> 
> 标签：javascript, time, datejs

在表中，我有字段类型 TIME，我在其中存储时间间隔，例如 92:30:00，我尝试使用 javascript（datejs）添加或删除例如 02:15:00 到/从 92:30:00 .

我可以在时间不大于 23:59 时做到这一点，但是当值超过 23:59 时如何做到这一点？

```
grab a from db //as 92:30
var b = Date.parse(a);
var c = Date.parse("02:15");

    d= new TimeSpan(b-c);
    e= (b).addHours(c);

console.log(d.toString("HH:mm")
console.log(e.toString("HH:mm") 
```

令我难过的是，如果您停留在 24 小时时间范围内，是否可以在更长的时间间隔内做同样的事情？

更新：（总结他们）

```
t = Date.today();
cc = Date.parse(c);
dd = Date.parse(d);

ccc = (cc - t)
ddd = (dd - t);

res = new TimeSpan(ccc+ddd);
console.log(res.toString()); //3.22:45:00 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T14:59:08.250

不错的尝试，但您忘记了**零**日期实际上是 1970 年 1 月 1 日（我认为）。因此，您需要牢记这一点来进行日期算术。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T20:51:25.517

我认为 Datejs 不会正确解析 >24 小时的时间值。我能想到的最简单的解决方法就是将字符串分成几个部分并添加到`Date.today()`.

这是一个演示整个场景的示例。

**例子**

```
var a = '92:30'.split(':');
var b = '02:15'.split(':');

var c = Date.today().addHours(+a[0]).addMinutes(+a[1]);
var d = Date.today().addHours(+b[0]).addMinutes(+b[1]);

var e = new TimeSpan(c - d);

console.log('days', e.days);  // 3
console.log('hours', e.hours);  // 18
console.log('minutes', e.minutes);  // 15 
```

我不是 100% 你想要的最终结果，但是一旦你有了`e`TimeSpan，你就有了减去两个原始值的乘积。

希望这可以帮助。

**编辑**：如果您只想对值进行简单的数学运算以计算小时值，则以下内容应该有效。

**例子**

```
var a = '92:30'.split(':');
var b = '02:15'.split(':');

var c = Date.today().addHours(+a[0]).addMinutes(+a[1]);
var d = Date.today().addHours(+b[0]).addMinutes(+b[1]);

var diff = (c - d) / (1000 * 60 * 60);

console.log(diff); // 90.25 
```

不过，您不应该要求 Datejs 这样做。只需使用本机 JavaScript Date API 即可，您可以从上述示例中删除任何 Datejs API。

# javascript - 单击第三层菜单项后如何关闭菜单

> ID：13586916
> 
> 赞同：3
> 
> 时间：2012-11-27T14:56:28.750
> 
> 标签：javascript, jquery, css, drop-down-menu

单击第三层菜单项后如何关闭以下 CSS+js 下拉菜单。现在，当我单击菜单外的任意位置时，它将关闭。我想点击第三层菜单关闭菜单。

这是一个[小提琴](http://jsfiddle.net/donli/panzd/7/)的例子。

html代码：

```
 <ul class="dropdown">
            <li><a href="#">Please select</a>
                <ul class="sub_menu">
                     <li>
                         <a href="#">Artificial Turf</a>
                         <ul>
                            <li><a href="#" class="subMenu">Indoor</a></li>
                            <li><a href="#" class="subMenu">Outdoor</a></li>
                        </ul>                    
                    </li>
                     <li>
                        <a href="#">Batting Cages</a>
                        <ul>
                            <li><a href="#" class="subMenu">Indoor</a></li>
                            <li><a href="#" class="subMenu">Outdoor</a></li>
                        </ul>
                     </li>
                </ul>
            </li>
        </ul​ 
```

CSS 代码：

```
/* 
    LEVEL ONE
*/
ul.dropdown                         { position: relative;color:#333;z-index: 9999; }
ul.dropdown li                      { font-weight: bold; float: left; zoom: 1; position: relative; }
ul.dropdown li a                    { display: block; padding: 8px 8px;color:#333;text-decoration:none;}
ul.dropdown li:last-child a         { border-right: none; } /* Doesn't work in IE */
ul.dropdown li.hover,ul.dropdown li:hover  { background: #CCC; position: relative; text-decoration: none;}

/* 
    LEVEL TWO
*/
ul.dropdown ul                         { width: 140px; visibility: hidden; position: absolute; top: 100%; left: 0px;margin-top:0px; font-size: 12px;margin:0px;border: 1px solid #999;}
ul.dropdown ul li                     { font-weight: normal; background: #E5E5E5; color: #000;border-bottom: 1px solid #ccc; float: none; margin:0px;padding:0px;padding-left:5px;}

                                    /* IE 6 & 7 Needs Inline Block */
ul.dropdown ul li a                    { border-right: none; width: 100%; display: inline-block;margin:0px; padding: 8px 0px;text-decoration:none;} 

/* 
    LEVEL THREE
*/
ul.dropdown ul ul                     { left: 100%; top: 0; max-height: 380px; overflow: auto;width:200px;} 
```

Javascript代码：

```
$(".dropdown li").click(function() { 
        $(this).parent().children("li").not(this).children("ul").css({ "visibility":"hidden" });
        $(this).children("ul").css({ "visibility":"visible" });
})

$('html').click(function() {
   $(".dropdown ul").css({ "visibility":"hidden" });
});

$('.dropdown').click(function(event){
     event.stopPropagation();
});

# this one not working
$('.subMenu').click(function(event) {
    $(".dropdown ul").css({ "visibility":"hidden" });
    event.preventDefault();
}); 
```

​</p>

​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T15:11:54.073

尝试添加此功能。

```
$('.dropdown ul ul li a').click(function(event) {
   $(".dropdown ul").css({ "visibility":"hidden" });
   event.stopPropagation();
}); 
```

单击第三层时它将关闭它，并且 event.stopPropagation() 将禁用再次重新打开它。

这是[更新的小提琴](http://jsfiddle.net/nxtwrld/panzd/12/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T15:28:39.843

除了`visibility:hidden`在你的 中使用`CSS`，你可以使用`display:hidden`，然后使用`hide()`和`show()`方法，`jQuery`如下所示：

**现场演示：**

[http://jsfiddle.net/oscarj24/panzd/13/](http://jsfiddle.net/oscarj24/panzd/13/)

然后，这只是唯一改变的部分......

```
$('.dropdown').on('click', '.subMenu', function(event) {
    $(".dropdown ul").hide();
    event.preventDefault();
}); 
```

# java - 如何在我的 Swing 应用程序中使用 Java 类调用并将参数传递给 Servlet？

> ID：13586917
> 
> 赞同：2
> 
> 时间：2012-11-27T14:56:28.810
> 
> 标签：java, swing, http, servlets

在我的 Swing 应用程序中，我需要使用登录页面将参数传递给 servlet 以验证用户身份。

在 Web 应用程序中，我们可以使用 Ajax 和 JavaScript 来做到这一点。

但是，如何在我的 Swing 应用程序中实现这一点？我的团队负责人让我在 Apache 中使用 HTTP 客户端。

请帮助我做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T15:00:20.003

您必须创建 HTTP 请求。HTTP 方法取决于您的 servlet。要创建基本的 HTTP 请求，您应该使用`HttpUrlConnection`. 如果您需要更复杂的东西，请查看 Apache `HttpClient`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T15:05:59.137

您的详细信息非常粗糙，但据我了解，您的团队负责人表示，适合这项工作的是 HTTP POST，而使用 apache 的 httpcomponents 可以更好地实现这一点。

一些示例代码可能如下所示：

```
 HttpClient client = new DefaultHttpClient();
 HttpPost post = new HttpPost(urlAsString);

 HttpResponse rsp = null;

    try {
        rsp = client.execute(post);
    } catch (IOException e) {
        //ha ha
    } finally {
        //close stuff
    } 
```

并且可能您需要从响应中获取一些令牌，以便稍后在登录时发出请求，但这是一个实现细节。

一个很好的例子可以在这里找到：[http ://www.vogella.com/articles/ApacheHttpClient/article.html](http://www.vogella.com/articles/ApacheHttpClient/article.html)

这是我的想法，希望对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T14:59:58.253

正如您的团队负责人所建议的那样，您可以使用 HTTP 客户端向您的 servlet 发出 HTTP 请求并传入所需的参数。见[http://hc.apache.org/](http://hc.apache.org/)

# ruby - 让一个类将数据发送到调用另一个类的引擎

> ID：13586920
> 
> 赞同：1
> 
> 时间：2012-11-27T14:56:35.137
> 
> 标签：ruby

我正在通过 Rails the Hardway 进行练习，并且要进行 45 次练习，其中涉及进行文本冒险，其中每个房间都是它自己的课程，并且有一个引擎课程可以将您从一个课程引导到另一个课程。此外，必须有多个文件。

我当前使用的代码将允许我在类或方法之外使用引擎，但如果我从第三个类调用 Engine 类，我会收到一条消息，指出 Falcon（类名）已单元化。

我的游戏基于《星球大战》，非常感谢你能提供的任何帮助——即使这意味着以不同的方式解决问题。

亚军.rb：

```
 module Motor
      def self.runner(class_to_use, method_to_use = nil) 
        if method_to_use.nil? == false 
          room = Object.const_get(class_to_use).new
          next_room.method(method_to_use).call()
        else
          room = Object.const_get(class_to_use).new
          puts room
        end
      end  
    end 
```

map.rb require_relative '跑步者' require_relative '字符'

```
 class Falcon

      def luke
        puts "It works!"
      end

      def obi_wan
        puts "this is just a test"
      end
    end 
```

字符.rb

```
 class Characters

      include Motor

      puts "You can play as Luke Skywalker or Obi-wan Kenobi"
      puts "Which would you like?"
      character = gets.chomp()

        if character == "Luke Skywalker"
          puts "The Force is strong with this one."
          Motor.runner(:Falcon, :luke)
        elsif character == "Obi Wan Kenobi"
          puts "It's been a long time old man."
          Motor.runner(:Falcon, :obi_wan)
        else 
          puts "I have no idea what you're saying."
        end
     end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T15:02:16.290

字符.rb

```
require 'map.rb' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T15:13:18.320

你可能没有朝着正确的方向前进。你不需要这个`Motor`模块，你不应该在类里面有`puts`and`get`调用`Character`。不确定您对编程了解多少，但解决方案包括一些基本的数据结构知识，例如构建房间的链接列表（以便每个房间都知道下一个房间）和在此列表上导航的递归。

首先创建一个`Room`基类：

```
class Room 
    attr_accessor :description, :next_room

    def initialize( description, next_room )
        @description = description
        @next_room = next_room
    end 

end 
```

然后是一个字符：

```
class Character 
    attr_accessor :title

    def initialize( title )
        @title = title
    end 

end 
```

然后您将构建地图：

```
first_room = Room.new( 'Some room', Room.new( 'Golden Room', Room.new( 'Black room', nil ) ) ) 
```

然后您应该创建另一个类，该类将从命令行读取并`Character`在房间之间移动。

# javascript - 在 javascript 中使用文件配置消息

> ID：13586921
> 
> 赞同：1
> 
> 时间：2012-11-27T14:56:38.810
> 
> 标签：javascript

我会使用消息文件来向用户发出各种警告，使用文件 msg.js

```
var mensaje = {
        DATOS_VACIOS : "Verifique los campos ...."
} 
```

称呼

```
alert(mensaje.DATOS_VACIOS); 
```

我想知道是否有人知道一种做得更好的方法，或者将这个对象放在内存中，如果它会降低性能。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T15:08:06.027

当然，这取决于客户端，但除非您有大量消息（1MB 或更多），否则将 msg.js 加载到内存中不会影响性能。最好按照您现在的方式进行操作，因为这些消息几乎可以立即提供给用户。如果你想保留更少的内存，你可以将 msg.js 拆分成更小的文件并异步加载它们，每次都销毁旧对象。这样做会减少浏览器的存储量，但会导致响应时间变慢。除非你的 msg.js 很大，否则不值得。

# java - 如何从具有依赖关系的 SVN 预提交挂钩运行 jar 文件，然后传递参数？

> ID：13586922
> 
> 赞同：2
> 
> 时间：2012-11-27T14:56:40.853
> 
> 标签：java, svn

我正在使用用 java 开发的预提交钩子。现在我需要在预提交中运行它。

*   项目清单

如何运行具有依赖关系的 jar 文件？我是否必须制作可执行的 jar 文件才能从预提交运行？如何将类路径和参数提供给 jar 文件？

目前，我在预提交中以这种方式运行，它工作正常。现在我需要将其移至生产环境

```
 /System/Library/Frameworks/JavaVM.framework/Versions/1.6/Home/bin/java -Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=11111 
 $JAVA_OPTS -Dfile.encoding=MacRoman 
-classpath 
 /System/Library/Frameworks/JavaVM.framework/Versions/1.6/Home/lib/deploy.jar:
 /System/Library/Frameworks/JavaVM.framework/Versions/1.6/Home/lib/dt.jar:
 /System/Library/Frameworks/JavaVM.framework/Versions/1.6/Home/lib/javaws.jar:
 /System/Library/Frameworks/JavaVM.framework/Versions/1.6/Home/lib/jce.jar:
 /System/Library/Frameworks/JavaVM.framework/Versions/1.6/Home/lib/jconsole.jar:
 /System/Library/Frameworks/JavaVM.framework/Versions/1.6/Home/lib/management-agent.jar:
 /System/Library/Frameworks/JavaVM.framework/Versions/1.6/Home/lib/plugin.jar:
/System/Library/Frameworks/JavaVM.framework/Versions/1.6/Home/lib/ext/sunjce_provider.jar:
 /System/Library/Frameworks/JavaVM.framework/Versions/1.6/Home/lib/ext/sunpkcs11.jar:
 /Users/testuser/Documents/Dev/projects/SCS/sc/SCS/SCS/SCSAPI/classes:
 /Users/testuser/Documents/Dev/projects/SCS/sc/g3/_lib/hibernate-tools.jar:
 /Users/testuser/Documents/Dev/projects/SCS/sc/g3/_lib/dom4j-1.4.jar:
 /Users/testuser/Documents/Dev/projects/SCS/sc/g3/_lib/commons-logging.jar:
 /Users/testuser/Documents/Dev/projects/SCS/sc/g3/_lib/commons-collections-2.1.1.jar:
 /Users/testuser/Documents/Dev/projects/SCS/sc/g3/_lib/mysql-connector-java-5.1.22-bin.jar:
 /Users/testuser/Documents/Dev/projects/SCS/sc/g3/_lib/hibernate2.jar:
 /Users/testuser/Documents/Dev/projects/SCS/sc/g3/_lib/ehcache-1.1.jar 
 com.ticoon.scs.SCSMain 
 pre-commit file -c /Users/testuser/Documents/Dev/projects/SCS/sc/SCS/SCS/config.xml -v -repos $REPOS -trxn $TXN 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T20:22:44.743

是的，它现在使用单个文件。谢谢@rlegendi 工作副本

```
 REPOS="$1"
 TXN="$2"
 java -jar /Users/testuser/Documents/SCS/SCS.jar pre-commit file -c /Users/testuser/Documents/SCSAPI/config.xml -repos $REPOS -trxn $TXN 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T16:45:00.117

**我必须制作一个可执行的 Jar 文件吗？**

您不需要创建可运行的 Jar，但建议这样做，因为它使事情变得更容易。

基本上，如果您运行 Jar 文件，则必须指定包含该`main()`方法的类：

```
java -jar myjar.jar x.y.z.Main 
```

如果你在文件中`Main-Class: x.y.z.Main`定义了一个属性`MANIFEST.MF`，你可以简单地运行 Jar 文件：

```
java -jar myjar.jar 
```

**如何为 Jar 文件提供类路径？**

当您使用该`java -jar ...`命令运行某些内容时，该`-classpath ...`属性将被删除。原因是安全性（Jar 文件可以进行数字签名以确保它们不会被修改，并且很容易让 java 加载具有相同内容但具有劫持功能的不同依赖项 Jar 文件）。

解决方案很简单：`Class-Path: ...`在文件中也包含属性，`MANIFEST.MF`就像使用`Main-Class: ...`.

**如何为 Jar 文件提供参数？**

正如您将参数提供给一个简单的 Java 程序（并且[手册指定](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/java.html)它）：

```
java -jar myjar.jar arg1 arg2 ... argN 
```

# python - 杀死由 spawnProcess 在扭曲中产生的子进程不起作用

> ID：13586929
> 
> 赞同：0
> 
> 时间：2012-11-27T14:56:50.913
> 
> 标签：python, process, twisted

全部

我使用 spawnProcess 启动一个进程，并希望在我的某个 Factory 停止时终止。

我写的这些

* * *

```
p = SomeProtocol(ProcessProtocol)

reactor.spawnProcess(p, 'twistd', ['twistd', '-y', 'anotherMain.py'], {}) 
```

* * *

```
class Factory(ServerFactory):
...

    def StopFactory(self):
        # which is the p above
        p.transport.signalProcess("KILL") 
```

我认为子进程将被杀死，但事实并非如此。

我尝试在其他地方使用 p.transport.signalProcess("KILL") ，它可以工作。

我的代码有什么问题？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T16:08:53.443

这可能是因为`twistd`守护进程`anotherMain.py`。之后`anotherMain.py`成为一个守护`twistd`进程退出。因此`anotherMain.py`，它实际上并不是您的主流程的子流程。

尝试添加`-n`选项：

```
reactor.spawnProcess(p, 'twistd', ['twistd', '-ny', 'anotherMain.py'], {}) 
```

# image - Magento，在自定义前端块上显示图像

> ID：13586933
> 
> 赞同：0
> 
> 时间：2012-11-27T14:57:11.683
> 
> 标签：image, magento, block, magento-1.7, frontend

我有一个模块正在运行。在后端，我可以上传具有多个属性的图像，并将图像路径和其他信息保存在自定义表中。在前端，我已经设法检测到何时需要显示这些图像。我使用了一个观察者，当在自定义创建的表上找到显示的产品时，它会添加一个新的布局句柄。然后在该布局句柄上，我调用一个 phtml 模板文件，并从这里调用一个块内的函数，该函数将负责执行所有检查以确保显示哪个图像。

我的问题是我找不到如何显示这些图像。我发现的所有内容都参考了如何在 phtml 文件上添加图像标签，对插入的 php 代码进行一些额外的验证。在我的情况下购买一切都在任何 phtml 文件之外的 php 代码上。

我的 phtml 文件代码：

```
<div>
    <h3><?php $this->showCampaign(); ?></h3>
</div> 
```

我现在的块代码：

```
<?php
class Dts_Banners_Block_Front extends Mage_Core_Block_Template {

    /**
     * Shows a campaign banner according to the current selected product
     * Seeks on main banners table to see if it is an image/html/product alone campaign
     * Once knows the campaign type search on needed table the needed fields
     */
    public function showCampaign() {
        //Zend_Debug::dump($this->getLayout()->getUpdate()->getHandles());

        $product = Mage::registry('current_product');
        $currentProdID = $product->getId();

        if (Mage::registry('campaign_data') && Mage::registry('campaign_data')->getId()) {
            $currentCampaign = Mage::registry('campaign_data');
        } else {
            return;
        }

        // get campaign type and show needed information  
        switch ($currentCampaign->getbanner_type()) {
            case 1: // image
                $myImgCollection = Mage::getModel('banners/bannersimg')->getCollection();
                $myImgCollection->addfieldtofilter('bannerid',$currentCampaign->getID());
                $currentImg = $myImgCollection->getFirstItem();
                $currentImgPath = $currentImg->getimg_path();
                //{{block type="catalog/product_new" product_id="16" template="catalog/product/view/your_new_page.phtml"}}
                break;
            case 2: // html
                echo "html";
                break;
            case 3: // plain product url
                echo "plain product url";
                break;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-27T15:28:42.680

像往常一样，几个小时寻找答案，当我发布问题时，找到了答案。以防万一有人需要它：就像在代码中创建图像 html 标记并将其返回到模板文件一样简单。示例代码：

```
<?php
class Dts_Banners_Block_Front extends Mage_Core_Block_Template {

    public function showCampaign() {
        ...
        $currentImgPath = $currentImg->getimg_path();

        //build html to output to the template  
        $html .= "<div class=\"visual\">";
        $html .= "<img src=\"" . $currentImgPath . "\" alt=\"\" />";
        $html .= "</div>";
        ....
        return $html;
    } 
```

和 phtml 文件代码：

```
<div class="visual">
    <?php echo $this->showCampaign(); ?>
</div> 
```

# c# - 重命名命名空间后的 .resx 文件无效

> ID：13586941
> 
> 赞同：4
> 
> 时间：2012-11-27T14:57:29.483
> 
> 标签：c#, winforms, visual-studio-2010, namespaces, resx

考虑以下情况：

*   在我的 Windows 窗体应用程序中，我有一个表单。
*   该表单有一个 .resx 文件。
*   该表单使用来自另一个程序集（“Other.dll”）的类（“OtherClass”）。
*   “Other.dll”构建在与主应用程序相同的 VisualStudio 2010 解决方案中（只是同一解决方案中的一个单独项目）。
*   在主项目（Windows 窗体应用程序）中，我已正确添加对“Other.dll”项目的引用。

一切正常（如预期的那样）。

现在我需要将“Other.dll”中包含的类型的命名空间从“Old.Namespace”更改为“New.Namespace”：

1.  在 VS2010 中，我调出“Other.dll”项目的属性窗口
2.  我将“默认命名空间”文本框中的命名空间从“Old.Namespace”更改为“New.Namespace”
3.  我相应地更改了相关 .cs 文件中的命名空间
4.  我重建了修改后的“Other.dll”项目。没有错误。修改后的“Other.dll”生成OK。

现在问题来了：

当我重建整个解决方案后，编译器停止并报告表单的 .resx 文件无效：

* * *

**“Resx 文件无效。无法加载 .RESX 文件中使用的类型*Old.Namespace.OtherType*、其他、版本 1.0.0.0、Culture=neutral、PublicKeyToken=null。确保已将必要的引用添加到您的项目中。线 1521，位置 5"**

* * *

显然，.resx 文件仍然从某处引用具有*旧命名空间的类型。*那个“某处”似乎来自 .resx 文件的二进制部分！

**问题：** 如何让 .resx 理解它现在必须引用新类型（具有更改的命名空间）？

请帮忙，我真的不知道如何在这里进行......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-21T05:06:28.067

我遇到了同样的问题，解决方案是从 resx 文件中删除数据部分

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-24T21:48:11.637

我也遇到了同样的问题，在尝试了其他几个选项后，我按照 Stefania Mereut 的[建议](https://stackoverflow.com/a/16662481/1084592)删除了 resx 文件中的数据部分。当我重新添加资源时，它显然正确地重写了数据部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-05-19T14:54:14.990

当我更新对新版本 dll 的引用时，我遇到了这个问题。在我的情况下，参考有​​选项“特定版本”= true。在这种情况下，无法在 res 文件中反序列化旧版本的类，因为它包含旧类的版本。我将我的裁判“特定版本”的选项从“true”更改为“false”，一切都恢复了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T15:04:49.507

您需要手动打开 resx 文件并将此二进制资源的类型名称更改为新的正确类型名称。我猜这是直接手动添加到 resx 文件的非标准（即不是字符串或图像）资源。

我相信这些只能在 ResX 编辑器的“其他”部分查看——它们不能通过它添加。

# ruby-on-rails - Rails，has_and_belongs_to_many，：HashWithIndifferentAccess 错误

> ID：13586955
> 
> 赞同：0
> 
> 时间：2012-11-27T14:58:15.093
> 
> 标签：ruby-on-rails, ruby, client-server, activeresource, has-and-belongs-to-many

在我的服务器上，我有两个模型：

**播送**

```
class Broadcast < ActiveRecord::Base

  validates_presence_of :content

  belongs_to :user

  has_and_belongs_to_many :feeds

  attr_accessible :content, :feeds, :feeds_attributes

end 
```

**喂养**

```
class Feed < ActiveRecord::Base
  has_and_belongs_to_many :broadcasts
  attr_accessible :name
end 
```

在我的客户端上，我有这些模型的基本 ActiveResource 类。

当我尝试使用给定的提要（来自客户端）创建新的广播时：

```
feed = Feed.find(3) <-succesful

broadcast = Broadcast.new
broadcast.attributes['feed'] ||= [] 
broadcast.feed << feed
broadcast.save 
```

在服务器上的 BroadcastController 中，我只是做

```
@broadcast = Broadcast.new(params[:broadcast]) 
```

它给出以下错误：

> ActiveRecord::AssociationTypeMismatch (Feed(#45931224) 预期，得到 ActiveSupport::HashWithIndifferentAccess(#25685616))：

我试着改变

```
broadcast.attributes['feed'] ||= [] 
```

到

```
broadcast.attributes['feed_attributes'] ||= [] 
```

但它给了我“未知属性错误”</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T18:44:58.647

没关系，我错过了：

```
accepts_nested_attributes_for :feeds 
```

在我的广播方法中。

无论如何，如果有人遇到这个问题，请注意：

```
broadcast.attributes['feed_attributes'] ||= [] 
```

是正确的，没有'_attributes'后缀仍然会出现HashWithIndifferentAccess错误。

# c++ - 使用 vcglib 示例时断言失败

> ID：13586957
> 
> 赞同：1
> 
> 时间：2012-11-27T14:58:26.927
> 
> 标签：c++, vcg

我想使用 vcglib 基于点云重建表面。但是每当我运行我的程序（也使用提供的示例，例如 /vcglib/apps/sample/trimesh_allocate）时，我都会得到以下输出：

> trimesh_allocate: ../../../vcg/simplex/vertex/component.h:50: int vcg::vertex::EmptyCore::cFlags() const [with TT = MyUsedTypes]: 断言‘0’失败。

任何想法如何解决这个问题？我在 Ubuntu 12.04 上使用 QT-Creator 2.4.1。我确实得到任何编译器或链接器错误。

非常感谢，米尔科

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-04T06:34:07.893

为了摆脱这样的错误，您通常需要更改顶点、边、面、网格定义的定义。我可以让这个例子工作使用：

```
class MyFace;
class MyVertex;

struct MyUsedTypes : public vcg::UsedTypes< vcg::Use<MyVertex>::AsVertexType,
vcg::Use<MyFace>::AsFaceType>{};

class MyVertex  : public vcg::Vertex< MyUsedTypes, vcg::vertex::Coord3f,  vcg::vertex::Normal3f, vcg::vertex::VFAdj, vcg::vertex::BitFlags, vcg::vertex::Mark>{};
class MyFace    : public vcg::Face  < MyUsedTypes, vcg::face::VertexRef,   vcg::face::Normal3f, vcg::face::FFAdj, vcg::face::Mark, vcg::face::VFAdj,  vcg::face::BitFlags > {};
class MyMesh    : public vcg::tri::TriMesh< std::vector<MyVertex>, std::vector<MyFace> > {}; 
```

我相信这些`vcg::xx::BitFlags`是您需要为顶点和面添加的。这可以从您遇到的关于 cFlags() 的错误中看出。

此外，在`trimesh_allocate.cpp`示例中，您需要注释掉以下部分：

```
// WRONG WAY of iterating: FN() != m.face.size() if there are deleted elements
/*for(int i=0;i<m.FN();++i)
{
 if(!fi->IsD())
   {
    MyMesh::CoordType b = vcg::Barycenter(*fi);
   }
}*/ 
```

# php - 用 .htacces 重写 url

> ID：13586960
> 
> 赞同：1
> 
> 时间：2012-11-27T14:58:37.050
> 
> 标签：php, .htaccess, url-rewriting

我有一个网站，我的链接是这样的：

```
a href="?lang=en&amp;p=3" 
```

我的网址是这样的：

```
http://www.mywebsite.com/?lang=en&p=3 
```

但我希望我的网址变成这样：

```
http://www.mywebsite.com/english/about-us 
```

我知道你有这样的事情：

```
Options +FollowSymLinks
RewriteEngine On
RewriteRule ^([a-zA-Z]+)/([0-9]+)/$ ?lang=$1&p=$2 
```

但它不工作......

有人可以帮我处理这个`.htaccess`文件吗？

我是否也必须更改我的href url？

提前致谢！

亲切的问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T15:10:43.927

尝试这样的事情：

```
RewriteCond %{QUERY_STRING} ^lang=([a-zA-Z]*)&p=(.*)$
RewriteRule ^(.*)$ /%1/%2? [R=301,L] 
```

这将使 301 重定向从：
[http](http://www.mywebsite.com/?lang=en&p=3)
://www.mywebsite.com/?lang=en&p=3 到：
[http ://www.mywebsite.com/en/3](http://www.mywebsite.com/en/3)

如果您想要一些其他重定向规则，请根据您的需要修改该规则，例如`RewriteCond`使用其规则制作更具体的此类列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T15:15:55.283

如果您的网站需要像 p=3 这样的参数，请将此与硬编码的页面名称一起使用

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteRule ^(.*)/about-us$ ./?lang=$1&p=3 [QSA]
RewriteRule ^(.*)/another-page$ ./?lang=$1&p=4 [QSA]
</IfModule> 
```

如果你修改你的网站，让它接受像 p=about-us 这样的参数，它会变得更简单：

（[http://www.mywebsite.com/?lang=en&p=about-us](http://www.mywebsite.com/?lang=en&p=about-us)）

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteRule ^(.*)/(.*)$ ./?lang=$1&p=$2 [QSA]
</IfModule> 
```

如果您不更改您的 href 网址，那么这一切都没有意义，因为即使它们有效，谷歌也不会看到纯文本网址（没有人会）。

# android - 带有图像的 Android ViewPager：内存泄漏/应用程序崩溃

> ID：13586963
> 
> 赞同：19
> 
> 时间：2012-11-27T14:58:44.270
> 
> 标签：android, memory-leaks, android-viewpager

我正在编写一个显示全景图片的应用程序，该图片最终有几个标记来显示有关某些点的信息。

由于大图像使应用程序崩溃（我在应用程序中还有另一个正在显示大地图的活动），我现在尝试使用 ViewPager 将全景图显示为一系列页面。

我已经设法以 6 位显示图片，我认为一切进展顺利，但现在由于内存耗尽，应用程序在几次滑动（大约 7 到 8 次）后崩溃。

我正在拉扯我的头发，为什么我认为我的物品一旦离开屏幕就会被摧毁？我是一个绝对的菜鸟，如果我浪费了时间，我很抱歉。我整天都在阅读和尝试来自这里和其他地方的解决方案，但我并不聪明。

这是我的代码：活动全景视图

```
public class PanoramaView extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.panorama);
    MyPagerAdapter adapter = new MyPagerAdapter();
    ViewPager myPager = (ViewPager) findViewById(R.id.mysixpanelpager);
    myPager.setAdapter(adapter);
    myPager.setCurrentItem(2);
}

} 
```

我的页面适配器

```
public class MyPagerAdapter extends PagerAdapter {
    public int getCount() {
        return 6;
    }
    public Object instantiateItem(View collection, int position) {
        LayoutInflater inflater = (LayoutInflater) collection.getContext()
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        int resId = 0;
        switch (position) {
        case 0:
            resId = R.layout.farleft;
            break;
        case 1:
            resId = R.layout.left;
            break;
        case 2:
            resId = R.layout.middle;
            break;
        case 3:
            resId = R.layout.right;
            break;
        case 4:
            resId = R.layout.farright;
            break;
        case 5:
            resId = R.layout.farfarright;
            break;
        }
        //ImageView imageView = new ImageView(getApplicationContext());
        //imageView.findViewById(R.id.imageView);
        //imageView.setImageBitmap(BitmapFactory.decodeResource(getResources(), ids[position]));

        View view = inflater.inflate(resId, null);
        ((ViewPager) collection).addView(view, 0);
        return view;
    }
    @Override
    public void destroyItem(View collection, int position, Object o) {
        View view = (View)o;
        ((ViewPager) collection).removeView(view);
        view = null;
    }

    @Override
    public boolean isViewFromObject(View arg0, Object arg1) {
        return arg0 == ((View) arg1);
    }
    @Override
    public Parcelable saveState() {
        return null;
    }
} 
```

我的主要布局文件

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent">
<android.support.v4.view.ViewPager
android:layout_width="match_parent"
android:layout_height="match_parent"
android:id="@+id/mysixpanelpager"/>
</LinearLayout> 
```

我保证从现在开始我将成为一个乐于助人的成员（或者，一旦我真正知道自己在做什么，就更是如此）。

编辑： - 在第一个活动中，我正在显示一个 552kb 的图像。- 我在此活动 (PanoramaView) 中显示的六张图像在 309 到 500kb 之间。- 我在 Eclipse 中使用了分配跟踪器，我所看到的只是内存已满，但我不清楚确切的数据 - 显示 7 或 8 张图像后发生崩溃（基本上在向后滑动和第四次滑动之后）

这是 farfarright.xml 的代码

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="wrap_content"
android:layout_height="wrap_content" >

<ImageView 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:id="@+id/imageView"
    android:src="@drawable/panorama6"
    android:adjustViewBounds="true"
    android:contentDescription="@string/panorama" >

</ImageView>
</LinearLayout> 
```

我尝试设置屏幕外页面限制，但没有帮助。

我在另一篇文章中找到[了这个](http://www.youtube.com/watch?v=_CruQY55HOk)关于内存管理的链接，今晚我会看一下。

编辑：这是 LogCat 输出

```
11-28 21:17:42.551: D/dalvikvm(328): GC_EXTERNAL_ALLOC freed 51K, 53% free 2558K/5379K, external 2002K/2137K, paused 65ms
11-28 21:17:43.261: D/dalvikvm(328): GC_EXTERNAL_ALLOC freed 1K, 53% free 2557K/5379K, external 3297K/4118K, paused 44ms
11-28 21:17:47.741: W/KeyCharacterMap(328): No keyboard for id 0
11-28 21:17:47.741: W/KeyCharacterMap(328): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
11-28 21:17:49.141: D/DFSAPP(328): my button id before is 2
11-28 21:17:49.691: D/dalvikvm(328): GC_EXTERNAL_ALLOC freed 36K, 52% free 2614K/5379K, external 15576K/15708K, paused 50ms
11-28 21:17:54.571: D/dalvikvm(328): GC_EXTERNAL_ALLOC freed 12K, 52% free 2616K/5379K, external 17386K/17735K, paused 39ms
11-28 21:17:54.661: D/dalvikvm(328): GC_EXTERNAL_ALLOC freed 0K, 52% free 2616K/5379K, external 17386K/17735K, paused 61ms
11-28 21:17:54.711: I/dalvikvm-heap(328): Clamp target GC heap from 25.629MB to 24.000MB
11-28 21:17:54.711: D/dalvikvm(328): GC_FOR_MALLOC freed <1K, 52% free 2616K/5379K, external 18975K/21023K, paused 42ms
11-28 21:18:03.751: D/dalvikvm(328): GC_EXTERNAL_ALLOC freed 6K, 52% free 2616K/5379K, external 18269K/20317K, paused 46ms
11-28 21:18:03.822: I/dalvikvm-heap(328): Clamp target GC heap from 25.628MB to 24.000MB
11-28 21:18:03.852: D/dalvikvm(328): GC_FOR_MALLOC freed <1K, 52% free 2615K/5379K, external 18975K/20317K, paused 32ms
11-28 21:18:04.131: D/dalvikvm(328): GC_EXTERNAL_ALLOC freed <1K, 52% free 2615K/5379K, external 17386K/19434K, paused 49ms
11-28 21:18:04.191: I/dalvikvm-heap(328): Clamp target GC heap from 25.628MB to 24.000MB
11-28 21:18:04.201: D/dalvikvm(328): GC_FOR_MALLOC freed 0K, 52% free 2615K/5379K, external 18975K/19434K, paused 34ms
11-28 21:18:07.301: D/dalvikvm(328): GC_EXTERNAL_ALLOC freed 1K, 52% free 2616K/5379K, external 18269K/19434K, paused 46ms
11-28 21:18:07.381: I/dalvikvm-heap(328): Clamp target GC heap from 25.801MB to 24.000MB
11-28 21:18:07.401: D/dalvikvm(328): GC_FOR_MALLOC freed <1K, 52% free 2616K/5379K, external 19152K/19434K, paused 38ms
11-28 21:18:07.611: D/dalvikvm(328): GC_EXTERNAL_ALLOC freed <1K, 52% free 2615K/5379K, external 18159K/19434K, paused 47ms
11-28 21:18:07.681: I/dalvikvm-heap(328): Clamp target GC heap from 25.801MB to 24.000MB
11-28 21:18:07.681: D/dalvikvm(328): GC_FOR_MALLOC freed 0K, 52% free 2615K/5379K, external 19152K/19434K, paused 36ms
11-28 21:18:18.901: D/dalvikvm(328): GC_EXTERNAL_ALLOC freed 5K, 52% free 2616K/5379K, external 18269K/19434K, paused 57ms
11-28 21:18:18.972: I/dalvikvm-heap(328): Clamp target GC heap from 25.802MB to 24.000MB
11-28 21:18:18.991: D/dalvikvm(328): GC_FOR_MALLOC freed <1K, 52% free 2616K/5379K, external 19152K/19434K, paused 33ms
11-28 21:18:19.181: D/dalvikvm(328): GC_EXTERNAL_ALLOC freed 1K, 52% free 2615K/5379K, external 18159K/19434K, paused 55ms
11-28 21:18:19.251: I/dalvikvm-heap(328): Clamp target GC heap from 25.801MB to 24.000MB
11-28 21:18:19.251: D/dalvikvm(328): GC_FOR_MALLOC freed 0K, 52% free 2615K/5379K, external 19152K/19434K, paused 33ms
11-28 21:18:21.551: D/dalvikvm(328): GC_EXTERNAL_ALLOC freed 1K, 52% free 2616K/5379K, external 18975K/19434K, paused 46ms
11-28 21:18:21.581: E/dalvikvm-heap(328): 1627200-byte external allocation too large for this process.
11-28 21:18:21.621: I/dalvikvm-heap(328): Clamp target GC heap from 25.629MB to 24.000MB
11-28 21:18:21.621: E/GraphicsJNI(328): VM won't let us allocate 1627200 bytes
11-28 21:18:21.631: D/dalvikvm(328): GC_FOR_MALLOC freed 0K, 52% free 2616K/5379K, external 18975K/19434K, paused 34ms
11-28 21:18:21.641: D/AndroidRuntime(328): Shutting down VM
11-28 21:18:21.641: W/dalvikvm(328): threadid=1: thread exiting with uncaught exception (group=0x40015560)
11-28 21:18:21.732: E/AndroidRuntime(328): FATAL EXCEPTION: main
11-28 21:18:21.732: E/AndroidRuntime(328): android.view.InflateException: Binary XML file line #7: Error inflating class <unknown>
11-28 21:18:21.732: E/AndroidRuntime(328):  at android.view.LayoutInflater.createView(LayoutInflater.java:518)
11-28 21:18:21.732: E/AndroidRuntime(328):  at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
11-28 21:18:21.732: E/AndroidRuntime(328):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:568)
11-28 21:18:21.732: E/AndroidRuntime(328):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
11-28 21:18:21.732: E/AndroidRuntime(328):  at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
11-28 21:18:21.732: E/AndroidRuntime(328):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
11-28 21:18:21.732: E/AndroidRuntime(328):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
11-28 21:18:21.732: E/AndroidRuntime(328):  at com.businesbike.dfp.MyPagerAdapter.instantiateItem(MyPagerAdapter.java:43)
11-28 21:18:21.732: E/AndroidRuntime(328):  at android.support.v4.view.ViewPager.addNewItem(ViewPager.java:692)
11-28 21:18:21.732: E/AndroidRuntime(328):  at android.support.v4.view.ViewPager.populate(ViewPager.java:849)
11-28 21:18:21.732: E/AndroidRuntime(328):  at android.support.v4.view.ViewPager.populate(ViewPager.java:772)
11-28 21:18:21.732: E/AndroidRuntime(328):  at android.support.v4.view.ViewPager.completeScroll(ViewPager.java:1539)
11-28 21:18:21.732: E/AndroidRuntime(328):  at android.support.v4.view.ViewPager.computeScroll(ViewPager.java:1422)
11-28 21:18:21.732: E/AndroidRuntime(328):  at android.view.ViewGroup.drawChild(ViewGroup.java:1562)
11-28 21:18:21.732: E/AndroidRuntime(328):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
11-28 21:18:21.732: E/AndroidRuntime(328):  at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
11-28 21:18:21.732: E/AndroidRuntime(328):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
11-28 21:18:21.732: E/AndroidRuntime(328):  at android.view.View.draw(View.java:6883)
11-28 21:18:21.732: E/AndroidRuntime(328):  at android.widget.FrameLayout.draw(FrameLayout.java:357)
11-28 21:18:21.732: E/AndroidRuntime(328):  at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
11-28 21:18:21.732: E/AndroidRuntime(328):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
11-28 21:18:21.732: E/AndroidRuntime(328):  at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
11-28 21:18:21.732: E/AndroidRuntime(328):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
11-28 21:18:21.732: E/AndroidRuntime(328):  at android.view.View.draw(View.java:6883)
11-28 21:18:21.732: E/AndroidRuntime(328):  at android.widget.FrameLayout.draw(FrameLayout.java:357)
11-28 21:18:21.732: E/AndroidRuntime(328):  at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:1862)
11-28 21:18:21.732: E/AndroidRuntime(328):  at android.view.ViewRoot.draw(ViewRoot.java:1522)
11-28 21:18:21.732: E/AndroidRuntime(328):  at android.view.ViewRoot.performTraversals(ViewRoot.java:1258)
11-28 21:18:21.732: E/AndroidRuntime(328):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1859)
11-28 21:18:21.732: E/AndroidRuntime(328):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-28 21:18:21.732: E/AndroidRuntime(328):  at android.os.Looper.loop(Looper.java:123)
11-28 21:18:21.732: E/AndroidRuntime(328):  at android.app.ActivityThread.main(ActivityThread.java:3683)
11-28 21:18:21.732: E/AndroidRuntime(328):  at java.lang.reflect.Method.invokeNative(Native Method)
11-28 21:18:21.732: E/AndroidRuntime(328):  at java.lang.reflect.Method.invoke(Method.java:507)
11-28 21:18:21.732: E/AndroidRuntime(328):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
11-28 21:18:21.732: E/AndroidRuntime(328):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
11-28 21:18:21.732: E/AndroidRuntime(328):  at dalvik.system.NativeStart.main(Native Method)
11-28 21:18:21.732: E/AndroidRuntime(328): Caused by: java.lang.reflect.InvocationTargetException
11-28 21:18:21.732: E/AndroidRuntime(328):  at java.lang.reflect.Constructor.constructNative(Native Method)
11-28 21:18:21.732: E/AndroidRuntime(328):  at java.lang.reflect.Constructor.newInstance(Constructor.java:415)
11-28 21:18:21.732: E/AndroidRuntime(328):  at android.view.LayoutInflater.createView(LayoutInflater.java:505)
11-28 21:18:21.732: E/AndroidRuntime(328):  ... 36 more
11-28 21:18:21.732: E/AndroidRuntime(328): Caused by: java.lang.OutOfMemoryError: bitmap size exceeds VM budget
11-28 21:18:21.732: E/AndroidRuntime(328):  at android.graphics.Bitmap.nativeCreate(Native Method)
11-28 21:18:21.732: E/AndroidRuntime(328):  at android.graphics.Bitmap.createBitmap(Bitmap.java:477)
11-28 21:18:21.732: E/AndroidRuntime(328):  at android.graphics.Bitmap.createBitmap(Bitmap.java:444)
11-28 21:18:21.732: E/AndroidRuntime(328):  at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:349)
11-28 21:18:21.732: E/AndroidRuntime(328):  at android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:498)
11-28 21:18:21.732: E/AndroidRuntime(328):  at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:473)
11-28 21:18:21.732: E/AndroidRuntime(328):  at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:336)
11-28 21:18:21.732: E/AndroidRuntime(328):  at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:697)
11-28 21:18:21.732: E/AndroidRuntime(328):  at android.content.res.Resources.loadDrawable(Resources.java:1709)
11-28 21:18:21.732: E/AndroidRuntime(328):  at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
11-28 21:18:21.732: E/AndroidRuntime(328):  at android.widget.ImageView.<init>(ImageView.java:118)
11-28 21:18:21.732: E/AndroidRuntime(328):  at android.widget.ImageView.<init>(ImageView.java:108)
11-28 21:18:21.732: E/AndroidRuntime(328):  ... 39 more 
```

如果有人看到这篇文章，这里似乎已经修复了它：我已将代码更改为下面答案中的代码，并且我还将我的全景图片切成更小的部分，因此每个图像现在都低于 300kb。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-02-21T09:15:01.517

答案有点晚了，但问题实际上很简单，我没有看到其他针​​对它的答案。

问题是，当您手动解码位图时（就像您在那些注释掉的行中所做的那样），**您必须** `.recycle()` **自己处理它们**。所以，回到你的代码，在你的适配器中你必须补充这个：

```
@Override
public Object instantiateItem(View collection, int position) {
    // ...
    View view = inflater.inflate(resId, null);
    ImageView imageView = (ImageView) view.findViewById(R.id.imageView);
    imageView.setImageBitmap(BitmapFactory.decodeResource(getResources(),
            ids[position]));
    ((ViewPager) collection).addView(view, 0);
    return view;
} 
```

有了这个 -`Bitmap`除了`View`从层次结构中删除之外，还可以回收：

```
@Override
public void destroyItem(View collection, int position, Object o) {
    View view = (View)o;
    ImageView imgView = (ImageView) view.findViewById(R.id.imageView);
    BitmapDrawable bmpDrawable = (BitmapDrawable) imgView.getDrawable();
    if (bmpDrawable != null && bmpDrawable.getBitmap() != null) {
            // This is the important part
            bmpDrawable.getBitmap().recycle();
    }
    ((ViewPager) collection).removeView(view);
    view = null;
} 
```

就这么简单，不需要使用单独的位图管理或任何东西。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-14T09:17:05.203

有据可查的问题，即使您似乎已经解决了它，这里还是有一些潜在有用的信息。

从您的 logcat 中，我检测到您正在 Gingerbread 上进行开发（或至少是测试）（因为 Honeycomb 之后的输出中不包含“外部”部分。这很重要，因为它突出了您的位图正在发生的事情。在 Gingerbread , 位图*数据*被放置在堆外的本机内存中。然后，*指向*该数据的指针以及其他一些引用信息被放置在堆内。删除对位图的每个引用都会释放*引用*信息（在某些时候，当`System.gc()`运行时）。但是，位图*数据*永远不会被释放，除非你的设备被小行星撞击——或者（不那么戏剧化）你调用`recycle()`该位图上的方法。应该注意的是，该调用确实释放了本机内存，因此您确实需要在再次需要时从头开始重新创建位图`ViewPager`（很可能在`instantiateItem`. Honeycomb 中，然后将位图*数据*放在堆栈，这稍微不那么烦人。只有当您使用该位图时，`data`它仍然会释放（因此您必须更深入地挖掘，使用以确定发生了什么 - 例如，我目前正在与 JB 上的相同问题作斗争，并且在 ICS 中，4.0.3 的行为与 4.0.4 不同，但我离题了）。`recycle()``DDMS`

这可能是矫枉过正，但我​​的解决方案是实现一个类来跟踪我的位图，并确保我已经回收了它们——在你的情况下，当你`destroyItem()`在 ViewPager 中时会发生这种情况。

这是我用来跟踪事物的（有点行人）类，fwiw。

```
public class BitmapManager {

private final String TAG = "DEBUG -- " + ClassUtils.getShortClassName(this.getClass());
Context mContext = null;

private class BitmapVectorEntry {
    public Bitmap bm = null;
    public String name = null;
}

Vector<BitmapVectorEntry> mBitmapVector = new Vector<BitmapVectorEntry>();

public BitmapManager( Context aContext ) {
    mContext = aContext;
}

public void setContext( Context aContext ) {
    mContext = aContext;
}

public void registerBitmap( String name, Bitmap b) {

    if(mBitmapVector == null) {
        mBitmapVector = new Vector<BitmapVectorEntry>();
    }
    if(b == null) {
        Log.e(TAG, "Bitmap is NULL!!  ");
        return;
    }
    // Log.d(TAG, "        ~~~~~~ Registering ["+name+"]  ["+b+"]");
    BitmapVectorEntry be = new BitmapVectorEntry();
    be.bm = b;
    be.name = name;
    mBitmapVector.add(be);
}

public void registerBitmapForBackgroundDrawable( String name, View v ) {
    if(v != null) {
        Drawable d = v.getBackground();
        if(d != null) {
            if(d instanceof BitmapDrawable) {
                Bitmap bm = ((BitmapDrawable) d).getBitmap();
                if(bm != null) {
                    // Log.w(TAG, "     ~~~~  Registering Background Bitmap [" + bm + "]");
                    registerBitmap(name, bm);
                }  else  {
                    Log.w(TAG, " ~~~~ Background does not have a bitmap in the BitmapDrawable (Probably, but not necessarily, and error)");
                }
            }  else  {
                Log.w(TAG, " ~~~~ Background does not have a BitmapDrawable (Might not be an error)");
            }
        }  else  {
            Log.w(TAG, " ~~~~~ Background is null, no drawable (Might not be an error)");
        }
    } else  {
        Log.e(TAG, "  ~~~~~ View is null, is there no background for this view?");
    }
}

// We cannot recycle certain bitmaps, like the background for the page which houses
    // the ViewPager, since the pager reuses it, so we just delete it from vector
public void clear(Bitmap bm) {
    removeBitmap(bm, false);
}

// In most cases, when we are done with a bitmap, we want to recycle it.  This is a
    // synchronous call that frees external heap (in 2.3.x) or internal heap (3.x < ).
    // And when I say 'synchronous' I mean 'slow' and 'should not be run on the UI Thread,
    // So be sure to throw this on an async thread
public void recycleBitmap(Bitmap bm) {
    removeBitmap(bm, true);
}

private void removeBitmap(Bitmap bm, boolean andRecycleToo) {

    if(bm == null) {
        Log.e(TAG, "(RECYCLE BITMAP)  !!!! Bitmap is NULL!!, cannot recycle");
        return;
    }
    if(mBitmapVector == null) {
        Log.e(TAG, "(RECYCLE BITMAP)  !!!! Bitmap Vector is NULL!!");
        return;
    }

    boolean foundIt = false;
    Bitmap targetBm = null;
    int i = (mBitmapVector.size() - 1);
    try {
        for(; i >= 0; i--)  {
            BitmapVectorEntry b = mBitmapVector.get(i);
            targetBm = b.bm;
            if(targetBm.equals(bm)) {
                foundIt = true;
                if(andRecycleToo) {
                    if(!targetBm.isRecycled()) {
                        targetBm.recycle();
                    }
                }
                mBitmapVector.removeElementAt(i);
                // Log.e(TAG, "       Recycling ["+targetBm.name+"]  ["+targetBm.bm+"]");
                break;
            }
        }
    }  catch(Exception e) {

        Log.e(TAG, "Exception during recycling bitmap position ["+i+"] ["+bm+"] ["+e+"]");

    }  finally {

        mBitmapVector.trimToSize();
        if(andRecycleToo) {
            if(!foundIt && targetBm != null) {
                if(!targetBm.isRecycled())  {
                    targetBm.recycle();
                } 
                Log.e(TAG, "(RECYCLE BITMAP)   ========================= !!! RECYCLING Bitmap ["+targetBm+"], was unregistered, recycled is ["+targetBm.isRecycled()+"]");
            }  else  {
                // Log.i(TAG, "(RECYCLE BITMAP)   ========================= !!! RECYCLING Bitmap ["+targBe.name+"] ["+targBe.bm+"], was registered");
            }
        }

    }

}

public void flush() {
    if(mBitmapVector == null) {
        // Log.e(TAG, "!!!! Bitmap Vector is NULL!!");
        return;
    }
    for(int i = 0; i < mBitmapVector.size(); i++) {
        BitmapVectorEntry bme = mBitmapVector.get(i);
        if(!bme.bm.isRecycled()) {
            // Log.e(TAG, "Flushing Bitmap ["+bme.name+"] ["+bme.bm+"]");
            bme.bm.recycle();
        }
    }
    mBitmapVector.clear();
    mBitmapVector.trimToSize();

}

public void dumpBitmaps() {
    if(mBitmapVector == null) {
        // Log.e(TAG, "!!!! Bitmap Vector is NULL!!");
        return;
    }
    boolean foundOne = false;
    for(int i = 0; i < mBitmapVector.size(); i++) {
        Bitmap bm0 = mBitmapVector.get(i).bm;
        if(!bm0.isRecycled()) {
            foundOne = true;
            break;
        }
    }
    if(mBitmapVector.size() > 0 && foundOne) {
        Log.e(TAG, " ========= Dumping Bitmap Vector === (Found a leaker) ===== ");
        Log.e(TAG, "            "+mBitmapVector.size()+" entries");
        for(BitmapVectorEntry b : mBitmapVector) {
            if(!b.bm.isRecycled()) {
                Log.e(TAG, "       ["+b.name+"]  ["+b.bm+"]  Recycled ["+b.bm.isRecycled()+"]");
            }
        }
        Log.e(TAG, " ========= End of Bitmap Dump    ======== ");
    }
}
} 
```

关键是`dumpBitmaps()`调用（至少对于您上面描述的问题）。如果认真地注册所有位图，那么`dumpBitmaps()`调用将暴露任何需要清理的地方。如果您不关心泄漏*在哪里*，只是希望它消失，那么您可以调用`flush()`which 将删除所有位图。

您将需要放置`registerBitmap()`在创建位图的任何位置。我在充气机做不可预测的事情时运气不好，所以我更喜欢这样的事情：

```
 public Drawable getPreformattedFile() {
    // Log.d(TAG, "Loading in Drawable ["+preformattedFileName()+"]");
    if( preformattedFileName() == null) {
        Log.e(TAG, "Formatted Filename is null");
        return(null);
    }

    Drawable ret = null;
    try {

        BitmapFactory.Options opts = new BitmapFactory.Options();
        opts.inScaled = false;
        opts.inPurgeable = true;

        Bitmap bm = BitmapFactory.decodeFile(preformattedFileName(), opts);
        if(bm == null) {
            return(null);
        }
        mBitmapManager.registerBitmap(mItem.name(), bm);
        ret = new BitmapDrawable(mContext.getResources(), bm);

        // Log.i(TAG, "         ~~~~~~~~~~~~~~~~~ JUST CHECKING ["+bm+"]  ["+((BitmapDrawable) ret).getBitmap()+"]");

    } catch( OutOfMemoryError e ) {
        // Log.e(TAG, " ============== Before gc ==== OOME  Thread ["+Thread.currentThread().getName()+"]  getPreformattedFile.Before GC Heap Available [[[ "+(Debug.getNativeHeapFreeSize()/1024)+"k ]]]");
        System.gc();
        // Log.e(TAG, " ============== After gc  ==== OOME  Thread ["+Thread.currentThread().getName()+"]  getPreformattedFile.Before GC Heap Available [[[ "+(Debug.getNativeHeapFreeSize()/1024)+"k ]]]");
        e.printStackTrace();
    } catch( Exception e) {
        Log.e(TAG, "Trouble reading PNG file ["+e+"]");
    }
    return(ret);
} 
```

我已经提到过几次异步处理，你提到你是 Android 的新手。为了完整起见，我应该提到我也不喜欢使用 AsyncTask，因为它对多线程有一些非常严格的限制，而且图像往往需要大量的多线程。因此，我改为使用`Executor`and 做这样的事情（你会注意到，它使用上面的方法来完成实际的工作）：

```
public Drawable getPreformattedFileAsync() {
    if(mItem == null) {
        Log.e(TAG, " -- ITEM is NULL!!");
        return(mErrorDrawable);
    }
    if(mFetchFileTask == null) {
        Log.e(TAG, " -- Task is Null!!, Need to start an executor");
        return(mErrorDrawable);
    }
    Runnable job = new Runnable() {
         public void run() {
             Thread.currentThread().setName("ImagePipeline");
             Thread.currentThread().setPriority(Thread.MIN_PRIORITY);
             Thread.currentThread().yield();
             if(mItemDelegate != null) {
                 Drawable retDrawable = getPreformattedFile();
                 if(showAllDebugInformation) {
                     Log.w(TAG, "   ^^^^ Getting preformatted file size ["+retDrawable.getIntrinsicWidth()+"] x ["+retDrawable.getIntrinsicHeight()+"]");
                 }
                 if(retDrawable != null) {
                     Bitmap bm = ((BitmapDrawable) retDrawable).getBitmap();
                     // Log.w(TAG, "       Size of Bitmap is ["+(bm.getRowBytes()*bm.getHeight())+"]");
                     mItemDelegate.onDrawableRequest(mItem, retDrawable);
                     if(mBitmapManager != null) {
                         if(mBusyDrawable != null) {
                             mBitmapManager.recycleBitmap(((BitmapDrawable) mBusyDrawable).getBitmap());
                         }
                         if(mErrorDrawable != null) {
                             mBitmapManager.recycleBitmap(((BitmapDrawable) mErrorDrawable).getBitmap());
                         }
                     }
                 }  else  {
                     mItemDelegate.onDrawableRequest(mItem, mErrorDrawable);
                 }
             }
             // Log.i(TAG, "  RUNNABLE - Set the background");
         }
     };
     mImagePipelineTask.execute(job);
     return(mBusyDrawable);
} 
```

当然，这需要一个 Executor：

```
 private ExecutorService mImagePipelineTask = null; 
```

可以这样创建：

```
 mImagePipelineTask = Executors.newSingleThreadExecutor(); 
```

（或者，如果你喜欢冒险，你可以使用多线程执行器，同样的一般想法）。

也许这有助于澄清。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-28T11:42:52.843

所以使用

1

```
@Override
public Object instantiateItem(ViewGroup collection, int position)
@Override
public void destroyItem(ViewGroup collection, int position, Object view) 
```

代替

```
 public Object instantiateItem(View collection, int position)
 public void destroyItem(View collection, int position, Object view) 
```

2 测试了 6 张大小为 400k 的图像，每张都可以正常工作

```
@Override
public Object instantiateItem(ViewGroup collection, int position)
{
    LayoutInflater inflater = (LayoutInflater) collection.getContext()
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    int resId = 0;
    switch (position) {
    case 0:
        resId = R.layout.farleft;
        break;
    case 1:
        resId = R.layout.left;
        break;
    case 2:
        resId = R.layout.middle;
        break;
    case 3:
        resId = R.layout.right;
        break;
    case 4:
        resId = R.layout.farright;
        break;
    case 5:
        resId = R.layout.farfarright;
        break;
    }

View view = (View) inflater.inflate(resId, null);

 //get Image view from layout   
//ImageView imageView = (ImageView) view.findViewById(resId);

//imageView.setImageResource(resId);

    collection.addView(view, 0);

    return view;
}

@Override
public void destroyItem(ViewGroup collection, int position, Object view)
{
    collection.removeView((View) view);
} 
```

3 有用的链接[PageAdapter](http://developer.android.com/reference/android/support/v4/view/PagerAdapter.html)

祝你好运

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-28T07:01:52.727

```
pager.setOffscreenPageLimit(MAX_PAGE);  //pager is the ViewPager instance 
```

这`MAX_PAGE`是可以保留在可见性之外的页数。这些附加的任何内容都将被销毁，并且只有在用户滑动回附近位置时才会重新创建。

# php - 使用'and'将mongodb转换为php

> ID：13586966
> 
> 赞同：0
> 
> 时间：2012-11-27T14:58:52.433
> 
> 标签：php, mongodb

我对 mongodb 有很长的查询。我想写在 php 查询看起来像

```
"department":"xxx","rank":"xxx",
 $and:[{"emails.email" :{$ne : ""}},{"emails.email":{$ne:null}}]; 
```

我想转换成php。

"部门"=>$xxx,"排名"=>$xxx..?? 转换'和'我不能上来。请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T15:02:50.533

使用 $ 修饰符的最佳方法是使用单引号，如下所示。它在语法上很接近，但是您需要仔细检查它，因为我确定可能有一个遗漏的括号。

```
array(
  'department'=>'', 
  'rank=>'', 
  '$and'=>array(
     'emails.email'=>array('$ne'=>''), 
     'emails.email'=>array('$ne'=>NULL)
  )
); 
```

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T15:23:42.763

您可以提交 @Frederico 编写的查询，但是此查询可以进行一些优化。这是一个建议：

```
array(
    'department' => '',
    'rank' => '',
    'emails.email' => array('$nin' => array('', null))
) 
```

`$and`如果没有和 两个单独的 ，那将同样出色地完成工作`$ne`。

# android - 获取mapView的像素距离（以米为单位）

> ID：13586973
> 
> 赞同：2
> 
> 时间：2012-11-27T14:59:13.413
> 
> 标签：android, android-mapview

我想知道在给定的缩放级别下，某个像素距离是多少米。

原因：我想知道mapView中圆的半径，以米为单位，它完全适合mapView->`radiusPixels = mapView.getWidth()/2;`

我找到了方法`mapView.getProjection().metersToEquatorPixels(radiusMeters)`，它与我需要的相反。但是这种方法或其他任何有用的方法都没有逆向。

我的（可能是幼稚的）解决方法如下：

```
private double getFittingRadiusInMeters() {
    return getMeters(mapView.getWidth() / 2);
}

private double getMeters(int pixels) {
    Projection proj = mapView.getProjection();
    Point mapCenterPixels = new Point(mapView.getWidth() / 2, mapView.getHeight() / 2);

    //create 2 geopoints which are at pixels distance
    GeoPoint centerGeoPoint = proj.fromPixels(mapCenterPixels.x, mapCenterPixels.y);
    GeoPoint otherGeoPoint = proj.fromPixels(mapCenterPixels.x + pixels, mapCenterPixels.y);

    Location loc = new Location("");
    loc.setLatitude(centerGeoPoint.getLatitudeE6() / 1E6);
    loc.setLongitude(centerGeoPoint.getLongitudeE6() / 1E6);

    Location loc2 = new Location("");
    loc2.setLatitude(otherGeoPoint.getLatitudeE6() / 1E6);
    loc2.setLongitude(otherGeoPoint.getLongitudeE6() / 1E6);

    return loc.distanceTo(loc2);
} 
```

但效果不好。我总是得到比 mapView 小得多的圆圈——半径太小。

我知道 distanceTo 方法说“近似”，但半径与预期大小有很大不同。不应该是近似值的影响。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T21:18:24.087

你的方法有一个小错误。

您正在计算屏幕中心水平的屏幕一半的值。找到的距离仅适用于以相同纬度值绘制圆圈（经度可能会毫无问题地改变）。

由于地球是球形的，因此在不同纬度级别计算相同数量的像素的距离会产生不同的结果。从 Equador 级别移动到更接近 Pole 级别的位置，相同数量的像素会导致更小的距离（以米为单位）。

但是，只有当您`getFittingRadiusInMeters()`使用地图定位在距离您绘制圆圈的地方非常遥远的纬度时，这才会引起注意。

否则，它应该可以正常工作。

**解决方案**

该方法`getMeters()`应接收`GeoPoint`用于计算距离的参数 a（或至少是纬度）。

问候。

# php - XML 使用 PHP 添加项目缩略图链接

> ID：13586978
> 
> 赞同：2
> 
> 时间：2012-11-27T14:59:24.133
> 
> 标签：php, xml

我有以下带有这种形式的 XML 文件：

```
<pages url_config="xml/configuration_book1.xml">
<item chapter_id="1" thumb="pages/000.jpg" titlePage="" visibleShadow="true"/>
<item chapter_id="1" thumb="pages/003.jpg" titlePage="" visibleShadow="true"/>
.
.
.</pages> 
```

如何`<item />`使用 PHP 添加/删除另一个“”？我可以使用 simpleXML，如果可以，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T12:59:25.957

[通过 simpleXML 添加孩子](http://php.net/manual/en/simplexmlelement.addchild.php)

[此链接将在XML 阅读/写作](http://php.net/manual/en/refs.xml.php)方面为您提供更多帮助

# ruby-on-rails-3 - 渲染部分 Rails3.x + coffeescript

> ID：13586979
> 
> 赞同：4
> 
> 时间：2012-11-27T14:59:32.400
> 
> 标签：ruby-on-rails-3, jquery, coffeescript

我有以下要求。我有一个“学校”下拉菜单，作为最后一个选项，我添加了新学校，所以如果用户选择该选项，我想通过 ajax 将 new_school 表单作为部分加载。

我上线了

```
gem 'rails', '3.2.9'
gem 'coffee-rails', '~> 3.2.1'
Jquery via gem 'jquery-rails' 
```

早些时候使用**rails < 3**和我曾经使用的原型

```
Ajax.Updater (aka Rails link_to_remote :update => 'some_div') 
```

并且使用我熟悉的**rails > 3 + JQuery**`*.js.erb`，并且有类似的东西

```
$("#school_form").html("<%= escape_javascript(render(:partial => "form"))%>"); 
```

但我是新手`coffeescript`，我不知道如何做到这一点`coffeescript`，有人可以帮助我:)，（因为我相信你不应该为此做一个服务器请求）

到目前为止，我已经完成了以下操作以捕获`select_tag`更改事件

```
$ ->
  $('#school_name_select').change ->
    unless $(this).val()
      $('school_name').html([I want to have the _new_school_form partial here]) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T00:39:08.457

**使用隐藏的 div。**

一般来说，您不想费心尝试混合 JS 和 HTML。由于跨站点脚本攻击的可能性，转义可能很复杂、容易出错并且非常危险。

只需将您的表单部分呈现在默认情况下不显示的 div 中。在 ERB 中：

```
<div id="school_name_form" style="display: none;">
  <%= render 'form' %>
</div> 
```

在您的 CoffeeScript 中：

```
$ ->
  $('#school_name_select').change ->
    if $(this).val()
      $('#school_name_form').slideUp()
    else
      $('#school_name_form').slideDown() 
```

我建议使用小而雅致的过渡，例如滑动或淡入淡出。它使您的应用程序更加精致。

不需要 AJAX。这种模式非常常见，以至于我定义了一个应用程序范围的样式，如下所示。

```
.not-displayed {
  display: none;
} 
```

然后使用 HAML（如果你喜欢的话），HTML 模板变得很简单：

```
#school_name_form.not-displayed
  = render 'form' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T15:54:39.353

您可以尝试将表单部分呈现在隐藏的 div 内（从语义的角度来看不太正确），或者将表单 html 作为`data`任何相关元素的属性，例如

```
f.select school_name, ... , data: {form: escape_javascript(render(:partial => "form"))} 
```

和咖啡脚本

```
$ ->
  $('#school_name_select').change ->
    unless $(this).val()
      $('school_name').html($('#school_name_select').data('form')) 
```

# javascript - 如何获得带有单个条的 ExtJS 4.1.X 条形图以正确显示该条的标签？

> ID：13586981
> 
> 赞同：27
> 
> 时间：2012-11-27T14:59:35.803
> 
> 标签：javascript, css, extjs, ria

如果您尝试以下文档中的实时代码示例：

[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.chart.series.Bar](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.chart.series.Bar)

不止一个标签看起来很漂亮：

![带有两个标签的条形图](../Images/870744f49179e192c5eedb6bf3ce1f58.png)

```
data: [
    { 'name': 'metric one',  'data':5 },
    { 'name': 'metric two',  'data':27 }
] 
```

但是，一旦您将数据集减少到一个标签，输出看起来很糟糕（请注意，条形图的标签出现在图表区域顶部的一半之外，而不是与要标注的条形垂直对齐）：

![带一个标签的条形图](../Images/7351ae4eed12bdd62ac1cf81a3d389d2.png)

这是 ExtJS 中的错误吗？我该如何解决这个问题？产生此输出的确切 ExtJS 代码：

```
var store = Ext.create('Ext.data.JsonStore', {
    fields: ['name', 'data'],
    data: [
        { 'name': 'metric one',  'data':5 }
    ]
});

Ext.create('Ext.chart.Chart', {
    renderTo: Ext.getBody(),
    width: 500,
    height: 300,
    animate: true,
    store: store,
    axes: [{
        type: 'Numeric',
        position: 'bottom',
        fields: ['data'],
        label: {
            renderer: Ext.util.Format.numberRenderer('0,0')
        },
        title: 'Sample Values',
        grid: true,
        minimum: 0
    }, {
        type: 'Category',
        position: 'left',
        fields: ['name'],
        title: 'Sample Metrics'
    }],
    series: [{
        type: 'bar',
        axis: 'bottom',
        highlight: true,
        tips: {
          trackMouse: true,
          width: 140,
          height: 28,
          renderer: function(storeItem, item) {
            this.setTitle(storeItem.get('name') + ': ' + storeItem.get('data') + ' views');
          }
        },
        label: {
            display: 'insideEnd',
            field: 'data',
            renderer: Ext.util.Format.numberRenderer('0'),
            orientation: 'horizontal',
            color: '#333',
            'text-anchor': 'middle'
        },
        xField: 'name',
        yField: 'data'
    }]
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T13:34:38.587

一种解决方案是更换

```
axisRange = to - from, 
```

在 ExtJS中*Axis.js的第**383*行

 *```
axisRange = to - from == 0 ? 1 : to - from, 
```

以防止将除以零分配给`y`轴标签的坐标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T16:38:02.967

如果看起来正确，只需将高度从 300 更改为 150 ：

```
Ext.create('Ext.chart.Chart', {
    renderTo: Ext.getBody(),
    width: 500,
    height: 150, 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T18:28:42.687

是的，当它只有一条记录时，默认渲染看起来确实很奇怪。
它可以修复或解决。

在概念上，覆盖系列渲染器以在单个记录的情况下修复高度和 y 点 -

```
 renderer: function(sprite, record, attr, index, store) {
    if (store.getCount() == 1) {
        attr.height = 80;
        attr.y = 75;
    }
    return attr;
} 
```

![在此处输入图像描述](../Images/aaafe2d72371105f30cf5879b8d66ba7.png)

您可以更改实际覆盖的值 ( `attr.height and attr.y`) 以满足您的视觉需求。

这是修改后的示例，使其看起来接近您的预期。

```
 var store = Ext.create('Ext.data.JsonStore', {
    fields: ['name', 'data'],
    data: [
        {'name': 'metric one','data': 5}
        //,{'name': 'metric two','data': 7}
    ]
});

Ext.create('Ext.chart.Chart', {
    renderTo: Ext.getBody(),
    width: 500,
    height: 300,
    animate: true,
    store: store,
    axes: [{
        type: 'Numeric',
        position: 'bottom',
        fields: ['data'],
        label: {
            renderer: Ext.util.Format.numberRenderer('0,0')
        },
        title: 'Sample Values',
        grid: true,
        minimum: 0},
    {
        type: 'Category',
        position: 'left',
        fields: ['name'],
        title: 'Sample Metrics'}],
    series: [{
        type: 'bar',
        axis: 'bottom',

        highlight: true,
        tips: {
            trackMouse: true,
            width: 140,
            height: 28,
            renderer: function(storeItem, item) {
                this.setTitle(storeItem.get('name') + ': ' + storeItem.get('data') + ' views');
            }
        },
        label: {
            display: 'insideEnd',
            field: 'data',
            renderer: Ext.util.Format.numberRenderer('0'),
            orientation: 'horizontal',
            color: '#333',
            'text-anchor': 'middle'
        },
        xField: 'name',
        yField: 'data',
        renderer: function(sprite, record, attr, index, store) {
            if (store.getCount() == 1) {
                attr.height = 80;
                attr.y = 75;
            }
            return attr;

        }}]
});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-23T18:55:16.097

问题不在一根柱子上，而是因为范围，所以如果你有一个很宽的范围并且一根柱子标签不会重复，很高兴听到它在 4.2 版中已修复，如果你尝试，请确认这一点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T15:07:48.963

更新到 ExtJS 4.2 应该可以解决这个问题。*

# iphone - 如何将 iOS 模拟器与 Flash CS6 一起使用

> ID：13586992
> 
> 赞同：1
> 
> 时间：2012-11-27T15:00:07.783
> 
> 标签：iphone, actionscript-3, ios-simulator, flash-cs6

正如我听说的那样，现在可以在 Flash CS 6 中使用 iPhone 模拟器，我真的很想为 iPhone 5 测试我的应用程序。

但老实说，我还没有弄清楚，这应该如何工作。所以我的问题是：如何将 iPhone 模拟器与 Flash CS6 一起使用？

我用谷歌搜索了很多，发现只有新闻，现在有可能。但没有教程或类似的。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T16:58:38.863

您必须将您的 Flash Professional CS6 更新到版本 12.0.2。

更新后，转到您的目标设置。您会发现可以配置 iOS Simulator SDK。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T15:05:11.617

您是否尝试过为 IOS 创建 AIR 项目？当您为 IOS 创建 AIR 时，它会在您调试电影时自动启动模拟器。希望有帮助！:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-06T15:59:26.313

确保您已安装 XCode 和更新版本的 AIR SDK

您需要为 iPhone 模拟器设置 SDK 位置： **/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk**

您可以在 AIR for iOS 设置的常规选项卡上执行此操作。

现在，为了定位 iPhone 模拟器，您需要设置以下内容： **Control > Test Movie > on iOS Simulator**

然后您将能够执行“CMD+Return”并将其发布到模拟器。该应用程序将像设备一样显示在第二个屏幕上。

更多信息在这里：[http ://forums.adobe.com/message/4923535](http://forums.adobe.com/message/4923535)

# python - 在python中比较和过滤列表元素

> ID：13586994
> 
> 赞同：1
> 
> 时间：2012-11-27T15:00:16.503
> 
> 标签：python, python-2.7

我正在寻找过滤列表中的元素。

比如说我有一个列表：

```
listA = ['banana', 'apple', 'appleRed', 'melon_01', 'appleGreen', 'Orange', 'melon_03']
listB = ['apple', 'melon'] 
```

现在我需要比较列表并生成一个仅包含以 listB 开头的元素名称的列表。

结果应该是：

```
listResult = ['apple', 'appleRed', 'melon_01', 'appleGreen', 'melon_03'] 
```

我可以在 2 for 循环中执行此操作并使用 if 循环比较。喜欢，

```
for item in listA:
    for fruit in listB:
        if item.startswith(fruit):
            listResult.append(item)
            break 
```

但是，我想知道是否有任何捷径可用于此操作，因为这可能需要更多时间进行大列表比较。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T15:05:20.393

使用列表推导和`any`生成器：

```
[item for item in listA if any(item.startswith(fruit) for fruit in listB)] 
```

或者，正如@DSM 正确建议的那样：

```
[item for item in listA if item.startswith(tuple(listB))] 
```

这比第一个解决方案快得多，并且几乎与@Iguananaut 提出的正则表达式解决方案一样快（但更紧凑和可读）：

```
In [1]: %timeit [item for item in listA if any(item.startswith(fruit) for fruit in listB)]
100000 loops, best of 3: 4.31 us per loop

In [2]: %timeit [item for item in listA if item.startswith(tuple(listB))]
1000000 loops, best of 3: 1.56 us per loop

In [3]: %timeit filter(regex.match, listA)
1000000 loops, best of 3: 1.39 us per loop 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T15:06:17.090

如果您的项目相对较少，您`listB`可以相当有效地将其转换为正则表达式：

```
import re
regex = re.compile(r'^(?:%s)' % '|'.join(listB))
filter(regex.match, listA) 
```

这是我想到的第一件事，但我认为其他人会有其他想法。

请注意，使用列表推导的其他答案当然非常好和合理。我以为你想知道是否有办法让它稍微快一点。再次强调，对于一般情况，这种解决方案可能并不总是更快，但在这种情况下，它会稍微快一点：

```
In [9]: %timeit [item for item in listA if any(item.startswith(fruit) for fruit in listB)]
100000 loops, best of 3: 8.17 us per loop

In [10]: %timeit filter(regex.match, listA)
100000 loops, best of 3: 2.62 us per loop 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T15:05:26.683

```
listResult = [ i for i in listA if any( i.startsWith( j ) for j in listB ) ] 
```

# c# - 编辑 ID - 存储更新、插入或删除语句影响了意外的行数 (0)

> ID：13586995
> 
> 赞同：2
> 
> 时间：2012-11-27T15:00:16.960
> 
> 标签：c#, asp.net-mvc, entity-framework, asp.net-mvc-4

所以我需要能够在我的编辑页面中连续编辑我的主键字段，我得到了错误

> 存储更新、插入或删除语句影响了意外数量的行 (0)。自加载实体后，实体可能已被修改或删除。刷新 ObjectStateManager 条目。

当我不更改主键字段时，我可以将所有其他更改保存到我的数据库中。

这是我的编辑功能。

```
//edit - post
[HttpPost]
public ActionResult ActiveCampaignsEdit(ActiveCampaign activecampaign)
{
  try
  {
    if (ModelState.IsValid)
    {
      db.Entry(activecampaign).State = EntityState.Modified;
      db.SaveChanges();
      return RedirectToAction("ActiveCampaigns");
    }
  }
  catch (DataException err)
  {
    //Log the error (add a variable name after DataException)
    ModelState.AddModelError(string.Empty, err.Message);
  }
  ViewBag.TypesList = new SelectList(db.Types, "TypeId", "TypeName");
  ViewBag.CaptureFormsList = new SelectList(db.CaptureForms, "Id", "Name");
  ViewBag.AssignedUsersList = new SelectList(db.Users, "Id", "Username");
  return View(activecampaign);
} 
```

我将如何编辑主键，或者我以错误的方式处理这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T15:46:02.877

当使用像实体框架这样的 ORM 时，UPDATE 命令的组成基本上是这样的：

```
UPDATE table 
SET ChangedCol = ChangedVal 
WHERE PrimaryKeyCol = PrimaryKeyValAtLoadTime 
```

然后它检查受影响的行数以匹配预期值。

因此，当您尝试更改 PK 时，更新命令将不更新任何行并且检查将失败。

真正的问题是：为什么要更改主键值？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T18:11:30.850

```
public void Save(object entity)
        {
            using (var transaction = Connection.BeginTransaction())
            {
            try
                    {
                        SaveChanges();
                        transaction.Commit();
                    }
                    catch (OptimisticConcurrencyException)
                    {
                        if (ObjectStateManager.GetObjectStateEntry(entity).State == EntityState.Deleted || ObjectStateManager.GetObjectStateEntry(entity).State == EntityState.Modified)
                            this.Refresh(RefreshMode.StoreWins, entity);
                        else if (ObjectStateManager.GetObjectStateEntry(entity).State == EntityState.Added)
                            Detach(entity);
                        AcceptAllChanges(); 
                        transaction.Commit();
                    }
            }
        } 
```

# javascript - 使用JS的两个值之间的色差/相似度%

> ID：13586999
> 
> 赞同：24
> 
> 时间：2012-11-27T15:00:26.113
> 
> 标签：javascript, colors

我需要计算两个十六进制颜色值之间的差异，因此输出是百分比值。我放弃的第一件事是将十六进制值转换为十进制值，因为第一个值比最后一个值要高得多。

第二个选项是计算每个 RGB 值之间的差异，然后将它们全部相加。`0, 0, 0`但是，和之间的差异`30, 30, 30`远小于 和 之间`0, 0, 0`的差异`90, 0, 0`。

[这个问题](https://stackoverflow.com/questions/5392061/algorithm-to-check-similarity-of-colors-based-on-rgb-values-or-maybe-hsv)建议使用[YUV](http://en.wikipedia.org/wiki/YUV)，但我不知道如何使用它来建立差异。

此外，[this other question](https://stackoverflow.com/questions/9820655/how-can-i-establish-the-difference-between-two-hex-colours)有一个很好的公式来计算差异并输出RGB值，但它并不完全存在。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2018-09-22T04:22:55.050

对于那些只想快速复制/粘贴的人，这里是[antimatter15 的这个 repo](https://github.com/antimatter15/rgb-lab)的代码（为了便于使用，做了一些调整）：

```
function deltaE(rgbA, rgbB) {
  let labA = rgb2lab(rgbA);
  let labB = rgb2lab(rgbB);
  let deltaL = labA[0] - labB[0];
  let deltaA = labA[1] - labB[1];
  let deltaB = labA[2] - labB[2];
  let c1 = Math.sqrt(labA[1] * labA[1] + labA[2] * labA[2]);
  let c2 = Math.sqrt(labB[1] * labB[1] + labB[2] * labB[2]);
  let deltaC = c1 - c2;
  let deltaH = deltaA * deltaA + deltaB * deltaB - deltaC * deltaC;
  deltaH = deltaH < 0 ? 0 : Math.sqrt(deltaH);
  let sc = 1.0 + 0.045 * c1;
  let sh = 1.0 + 0.015 * c1;
  let deltaLKlsl = deltaL / (1.0);
  let deltaCkcsc = deltaC / (sc);
  let deltaHkhsh = deltaH / (sh);
  let i = deltaLKlsl * deltaLKlsl + deltaCkcsc * deltaCkcsc + deltaHkhsh * deltaHkhsh;
  return i < 0 ? 0 : Math.sqrt(i);
}

function rgb2lab(rgb){
  let r = rgb[0] / 255, g = rgb[1] / 255, b = rgb[2] / 255, x, y, z;
  r = (r > 0.04045) ? Math.pow((r + 0.055) / 1.055, 2.4) : r / 12.92;
  g = (g > 0.04045) ? Math.pow((g + 0.055) / 1.055, 2.4) : g / 12.92;
  b = (b > 0.04045) ? Math.pow((b + 0.055) / 1.055, 2.4) : b / 12.92;
  x = (r * 0.4124 + g * 0.3576 + b * 0.1805) / 0.95047;
  y = (r * 0.2126 + g * 0.7152 + b * 0.0722) / 1.00000;
  z = (r * 0.0193 + g * 0.1192 + b * 0.9505) / 1.08883;
  x = (x > 0.008856) ? Math.pow(x, 1/3) : (7.787 * x) + 16/116;
  y = (y > 0.008856) ? Math.pow(y, 1/3) : (7.787 * y) + 16/116;
  z = (z > 0.008856) ? Math.pow(z, 1/3) : (7.787 * z) + 16/116;
  return [(116 * y) - 16, 500 * (x - y), 200 * (y - z)]
} 
```

要使用它，只需传入两个 rgb 数组：

```
deltaE([128, 0, 255], [128, 0, 255]); // 0
deltaE([128, 0, 255], [128, 0, 230]); // 3.175
deltaE([128, 0, 255], [128, 0, 230]); // 21.434
deltaE([0, 0, 255], [255, 0, 0]); // 61.24 
```

[![在此处输入图像描述](../Images/be9786677dace07578ad2460e10cd038.png)](https://i.stack.imgur.com/OXrne.png)

上表来自[这里](http://zschuessler.github.io/DeltaE/learn/)。上面的代码是基于 DeltaE 的 1994 版本。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-27T15:35:23.757

问题是你想要像 3 维世界上的距离，但 rgb 表示根本不直观：“近”颜色可能与“远”颜色有很大不同。

以两种灰度 c1 : (120,120,120) 和 c2 : (150,150,150) 和现在的 c3 : (160,140,​​140) 为例，它比 c1 更接近 c2，但它是紫色的，对于眼睛来说，深灰色更接近比紫色要灰。

我建议您使用 hsv ：颜色由“基础”颜色（色调）、饱和度和强度定义。色调相近的颜色确实非常接近。具有非常不同色调的颜色彼此不相关（expl：黄色和绿色），但可能看起来更接近（非常）低饱和度和（非常）低强度。
（晚上所有颜色都一样。）

由于色调分为 6 个块，因此 cyl = Math.floor( hue / 6 ) 为您提供了相似性评估的第一步：如果圆柱体的相同部分 -> 非常接近。如果它们不属于同一个圆柱体，如果 (h2-h1) 很小，它们可能仍然（非常）接近，将其与 (1/6) 进行比较。如果 (h2-h1) > 1/6，这可能只是颜色太不同了。

然后你可以更精确地使用 (s,v)。如果饱和度低/非常低和/或强度低，则颜色更接近。

使用支持 rgb 和 hsv 的颜色选择器，直到你知道你想要什么作为差异值。但请注意，您不能拥有“真正的”相似性度量。

你有一个 rgb --> hsv javascript 转换器：http: [//axonflux.com/handy-rgb-to-hsl-and-rgb-to-hsv-color-model-c](http://axonflux.com/handy-rgb-to-hsl-and-rgb-to-hsv-color-model-c)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-11-27T15:05:16.970

只需计算[欧几里得距离](http://en.wikipedia.org/wiki/Euclidean_distance)：

```
var c1 = [0, 0, 0],
    c2 = [30, 30, 30],
    c3 = [90, 0, 0],
    distance = function(v1, v2){
        var i,
            d = 0;

        for (i = 0; i < v1.length; i++) {
            d += (v1[i] - v2[i])*(v1[i] - v2[i]);
        }
        return Math.sqrt(d);
    };

console.log( distance(c1, c2), distance(c1, c3), distance(c2, c3) );
//will give you 51.96152422706632 90 73.48469228349535
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2015-03-25T03:39:27.737

我发布了一个 npm/Bower 包，用于计算三种 CIE 算法：de76、de94 和 de00。

它是公共领域，在 Github 上：

[http://zschuessler.github.io/DeltaE/](http://zschuessler.github.io/DeltaE/)

这是一个快速入门指南：

**通过 npm 安装**

```
npm install delta-e 
```

**用法**

```
// Include library
var DeltaE = require('delta-e');

// Create two test LAB color objects to compare!
var color1 = {L: 36, A: 60, B: 41};
var color2 = {L: 100, A: 40, B: 90};

// 1976 formula
console.log(DeltaE.getDeltaE76(color1, color2));

// 1994 formula
console.log(DeltaE.getDeltaE94(color1, color2));

// 2000 formula
console.log(DeltaE.getDeltaE00(color1, color2)); 
```

您需要转换为 LAB 颜色才能使用此库。d3.js 有一个很好的 API 可以做到这一点——我相信你也可以找到一些临时的东西。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-03T18:14:40.490

ColorWiki 上颜色比较的第三条规则是“永远不要尝试通过使用平均因子来转换由不同方程计算的颜色差异”。这是因为在数学上彼此接近的颜色并不总是在视觉上与我们人类相似。

您正在寻找的可能是[delta-e](http://www.colorwiki.com/wiki/Delta_E%3a_The_Color_Difference)，它是一个代表两种颜色之间“距离”的数字。

下面列出了最流行的算法，其中 CIE76（又名 CIE 1976 或 dE76）是最流行的。

*   [CIE76](http://www.colorwiki.com/wiki/Delta_E%3a_The_Color_Difference#Delta-E_1976)
*   [CMC l:c](http://www.colorwiki.com/wiki/Delta_E%3a_The_Color_Difference#CMC_l%3ac)
*   [dE94](http://www.colorwiki.com/wiki/Delta_E%3a_The_Color_Difference#dE94)
*   [dE2000](http://www.colorwiki.com/wiki/Delta_E%3a_The_Color_Difference#dE2000)

每个人都以不同的方式处理事情，但在大多数情况下，它们都要求您转换为比 RGB 更好（用于比较）的颜色模型。

维基百科有所有的公式：[http ://en.wikipedia.org/wiki/Color_difference](http://en.wikipedia.org/wiki/Color_difference)

您可以使用在线颜色计算器检查您的工作：

*   [CIE76](http://colormine.org/delta-e-calculator)
*   [CMC l:c](http://colormine.org/delta-e-calculator/cmc)

最后，它不是 javascript，但我开始使用一个开源 c# 库来进行一些转换和计算：[https ://github.com/THEjoezack/ColorMine](https://github.com/THEjoezack/ColorMine)