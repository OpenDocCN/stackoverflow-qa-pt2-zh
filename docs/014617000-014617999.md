# StackOverflow 问答 14617000-14617999

# java - 有没有一个java容器可以直接执行java源文件？

> ID：14617003
> 
> 赞同：-6
> 
> 时间：2013-01-31T01:30:22.420
> 
> 标签：java, command-line-interface

我觉得`compile`和`run`,很无聊

有没有可以自动完成编译工作的容器，这样我只需要保存java源代码和`run`？

解释？

```
0:  sipush        4711
3:  istore_0
4:  getstatic     java.lang.System.out Ljava/io/PrintStream;
7:  ldc           "Please enter a number> "
9:  invokevirtual java.io.PrintStream.print (Ljava/lang/String;)V
12: getstatic     Factorial.in Ljava/io/BufferedReader;
15: invokevirtual java.io.BufferedReader.readLine ()Ljava/lang/String;
18: invokestatic  java.lang.Integer.parseInt (Ljava/lang/String;)I
21: istore_0
22: goto          #44
25: astore_1
26: getstatic     java.lang.System.err Ljava/io/PrintStream;
29: aload_1
30: invokevirtual java.io.PrintStream.println (Ljava/lang/Object;)V
33: goto          #44
36: astore_1
37: getstatic     java.lang.System.err Ljava/io/PrintStream;
40: aload_1
41: invokevirtual java.io.PrintStream.println (Ljava/lang/Object;)V 
44: iload_0
45: ireturn 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T01:35:29.117

为什么不使用 Java 的“Eclipse”IDE？它是如此强大，并节省了很多工作。它带有增量编译器，您不需要单独编译，只需轻松运行您的程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T01:38:00.583

好吧..如果您想将 2 个命令合并为一个.. 您可以在 linux 命令行中轻松执行以下操作..

```
javac ...&& java .. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T01:39:29.477

这种方法——把所有东西都写在一个单一的java文件中——除了“玩具”应用程序之外是不可用的。对于任何复杂的事情，您都希望将您的逻辑分配给多个类，这时像 Eclipse 这样的 IDE 就变得有用了。

对于玩具应用程序，如果编译成功，您可以轻松创建一个`~/bin/javac-java`编译并执行的程序。

```
javac $1 && java `basename $1 .java` 
```

# php - HTML 将数据从服务器推送到客户端更新，无需轮询

> ID：14617004
> 
> 赞同：0
> 
> 时间：2013-01-31T01:30:28.330
> 
> 标签：php, javascript, html, ios, push

我需要编写一个显示在移动设备上的网页，但棘手的部分是内容需要是实时可更新的提要……想想即时通讯工具或聊天室风格的更新。

我快速浏览了 SSE，似乎首先在发生多个连接的 PHP 中正确执行此操作很棘手。其次，我什至不确定 iOS/Android/BB 中的 webview 是否会支持此功能，因为我还没有找到真正有效的教程。

[SSE基础教程](http://www.html5rocks.com/en/tutorials/eventsource/basics/)

[阅读这篇文章](https://stackoverflow.com/questions/12352341/server-send-push-notification-to-client-browser-without-using-polling)，似乎 websockets 是前进的方向，但有人有在 iOS/Android 上使用这些的经验吗？

理想情况下，我需要它，以便服务器上的更新在 5 秒内出现在移动设备/笔记本电脑上（立即会令人难以置信，但我认为不切实际）

*考虑并排除了几种方法。*

*   硬件推送通知到本机应用程序以标记更新可用是不可行的，因为它必须适用于没有此功能的设备。

*   由于可能有数千人同时使用它的带宽限制，短轮询可能不可行。

任何和所有想法都非常受欢迎，因为我不敢相信这是一个罕见的要求？

# machine-learning - weka J48 功能选择

> ID：14617009
> 
> 赞同：1
> 
> 时间：2013-01-31T01:31:01.963
> 
> 标签：machine-learning, classification, weka, decision-tree, j48

我正在使用 Weka 并应用 J48 来构建我的分类器。我有 40 个功能和 2000 个实例（700 个 a 类和 1300 个 b 类）。

J48 决策树只使用了 40 个特征中的 2 个！无论如何，是否允许 J48 使用所有功能，或者是否有任何其他算法允许使用所有功能？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T18:23:04.333

也许是因为J48不需要更多的属性。

您可以在选项卡中检查特征的相关性，并使用搜索方法和评估`Select attribute`器运行选择器。它将向您展示每个特征和每个类之间的关系，它还会告诉您哪些特征最能描述您的类。`Ranker``Principal Components`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T15:46:55.177

分类不需要所有 40 个特征。因为某些特征可能是冗余的（例如相关的）或不包含区分信息。

*您可以在之前从Weka Explorer*`Select attributes`的选项卡中运行功能选择，然后查看哪些功能很重要。

 *您还可以测试分类器，例如`SVM`（libSVM 或 SMO）、`Neural Network`（MultilayerPerceptron）和/或`Random Forest`因为它们通常会给出最好的分类结果（取决于问题）*

# bash - 用于在所有目录文件上将参数作为命令执行的脚本

> ID：14617010
> 
> 赞同：0
> 
> 时间：2013-01-31T01:31:08.267
> 
> 标签：bash

我想知道如何使这个脚本工作：

```
for f in *.php
do
    for c in seq 1 $#
    do
            eval `eval echo \$$c`
    done
done 
```

脚本 y 的主要思想是在每个文件上执行传递给脚本的所有命令，例如：

```
bash script.sh "grep text \$f" "echo \"Done!\"" 
```

应该与以下内容相同：

```
for f in *.php
do
     grep text $f
     echo "Done!"
done 
```

我认为这很简单，但我已经被困在这里很久了有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T01:38:21.923

你可以让它像这样工作：

```
for f in *.php
do
  for arg
  do
    eval "$arg"
  done
done 
```

一种更常见（和更安全）的方法是

```
find *.php -print0 | xargs -0 -I{} "$@" 
```

它可以作为 运行`./yourscript grep text {}`，但它不允许任意 shell 构造。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T03:27:41.793

bash 脚本中的以下简单配方应该可以工作。

```
for arg in "$@"
do
    find . -name '*.php' -print0 | xargs -n1 -0 -i $arg {}
done 
```

# ruby-on-rails - 工头没有找到 rake 任务；错误：rake 任务“未找到”

> ID：14617012
> 
> 赞同：0
> 
> 时间：2013-01-31T01:31:12.483
> 
> 标签：ruby-on-rails, jruby, foreman

在我的 Rails 应用程序上使用 Foreman 和 Ruby 1.9.3 就好了。切换到 JRuby，现在，例如，得到：

```
18:22:16 solr.1 | /home/scott/.rvm/gems/jruby-1.6.8@jruby168-unicon/gems/foreman-0.47.0/bin/foreman-runner: 32: exec: bundle exec rake sunspot:solr:run: not found 
```

当我`bundle exec rake sunspot:solr:run`在命令行上自行运行时，它运行得很好

**档案：**

```
web: puma
solr: bundle exec rake sunspot:solr:run
redis: redis-server ./config/redis.conf
sidekiq: bundle exec sidekiq -c $SIDEKIQ_CONCURRENCY -q report -q publish_item -q audio -q import -q email -q enrollment -q bugsnag
bunchball: bundle exec sidekiq -c 2 -q bunchball
sidekiq_solr: bundle exec sidekiq -c 1 -q solr 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T01:52:07.573

你已经`bundler`在 J​​ruby 中安装了。

```
gem install bundler 
```

# html - HTML 和 CSS 中的边距布局中的块

> ID：14617013
> 
> 赞同：1
> 
> 时间：2013-01-31T01:31:14.013
> 
> 标签：html, css

我的网页是对另一个文档的逐页讨论。我想遵循原始文档的结构（带有标题、子标题和段落），但页码（或页面范围）也出现在 120 像素的边距中，就在该页面第一段的左侧) 我正在讨论。

到目前为止，我大致有我想要的。主要讨论在 DIV 标签内，带有“描述”。页码边缘保存在具有“页面”类的 DIV 标记内。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML>
    <HEAD>
        <META HTTP-EQUIV="Content-Type" CONTENT="text/html; CHARSET=windows-1251">
        <TITLE>Blurble Blurble Blurble Blurble</TITLE>
        <STYLE>
        DIV.page            { border-style: solid; border-width:medium; float:left; position:relative; left:-100px; width:70px; padding:2px; }
        DIV.description     { position:relative; left:100px; }
        </STYLE>
    </HEAD>
    <BODY BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#FF0000" VLINK="#800000" ALINK="#FF00FF">
        <H1>Blurble Blurble Blurble Blurble Blurble</H1>
        <DIV CLASS="description">
            <H2>Blurble Blurble</H2>
            <P>
            Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble .
            </P>
            <P>
            Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble .
            </P>
            <H2>Blurble Blurble</H2>
            <DIV CLASS="page">Blurble 1</DIV>
            <P>
            Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble.
            </P>
            <P>
            Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble .
            </P>
            <H2>Blurble Blurble</H2>
            <DIV CLASS="page">Blurble 2</DIV>
            <P>
            Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble.
            </P>
            <P>
            Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble Blurble .
            </P>
        </DIV>
    </BODY>
</HTML> 
```

这里的问题是，无论页面 DIV 出现在哪里，该 DIV 元素和 P 元素的一部分之间都有一个间隙——一大块空白。似乎浏览器认为页面 DIV 元素应该位于该空间中，因此它将文本环绕在它认为 DIV 元素应该位于的位置。

除此之外，浏览器总是应该水平滚动条来滚动它认为应该添加到窗口的额外 100 像素的额外空间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T01:40:40.803

我很确定您必须将 .page 类的位置属性更改为绝对。

# c++ - 多个 Windows CMD

> ID：14617021
> 
> 赞同：0
> 
> 时间：2013-01-31T01:31:42.283
> 
> 标签：c++, c, windows, cmd

我正在使用`cmd`.

我想知道是否可以`cmd`在运行时分配另一个。

我想使用`cmd`来测量进程使用的时间，如果时间超过时间限制，则终止它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T01:59:20.437

由于这进展不快，我将给出一个标准的在 n 毫秒后退出的方式。它可以很容易地更改为任何时间单位，只需将其设为模板函子（请参阅`sleep_for`我的意思的声明）并为其提供`std::chrono`单位。

```
int main() {
   std::thread waiter([](unsigned long long milliseconds) {
      std::this_thread::sleep_for(std::chrono::milliseconds(milliseconds));
      std::exit(0);
   }, 5000);

   int i{};
   while (1) {
      std::this_thread::sleep_for(std::chrono::seconds(1));
      std::cout << i++ << '\n';
   }
} 
```

首先，我使用一个接受毫秒数的过程创建一个线程，并通过传递 5000 毫秒来启动它。我输入参数是为了便于转换到上述函子。它休眠了那么久，然后退出程序。同时，主线程每秒只输出一个计数。

有关演示，[请参见此处](http://liveworkspace.org/code/Fn3XQ%240)。这是输出：

> 0
> 1
> 2
> 3

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T01:33:38.820

要启动新的 cmd 窗口，您可以执行以下操作：

```
cmd.exe /c yourprogram.exe 
```

你也可以使用

```
start yourprogram.exe 
```

两者都将创建一个新的 cmd.exe 并运行您的程序。如果您的程序是控制台应用程序，第二个（启动）将创建 cmd，否则它将只运行它。

# scala - Scala中缺少多重集吗？

> ID：14617024
> 
> 赞同：9
> 
> 时间：2013-01-31T01:32:09.337
> 
> 标签：scala, set, multiset

我在 Scala 中尝试了 Facebook Hacker Cup 2013 资格问题，对于第三个问题，我觉得需要一个有序的 Multiset，但在 scala (2.10) 的集合中找不到。scala 的集合中是否缺少此数据结构。它会在未来的版本中实现吗？如果您已经实现了一个集合，那么 Multiset 是否真的不需要？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-04-21T17:21:20.307

多重集有时会非常有用。我经常发现自己`Map[K, List[V]]`手动编码。`Bag`Nicolas Stucki有一个很好的多重集实现，它在 Maven 上发布。

在此宣布：

> [https://groups.google.com/forum/#!topic/scala-internals/ceaEAiQPgK4](https://groups.google.com/forum/#!topic/scala-internals/ceaEAiQPgK4)

代码在这里：

> [https://github.com/nicolasstucki/multisets](https://github.com/nicolasstucki/multisets)

马文：

> [https://github.com/nicolasstucki/multisets/blob/master/MavenRepository.md](https://github.com/nicolasstucki/multisets/blob/master/MavenRepository.md)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T02:40:33.327

多重集是一种相当特殊且不常见的数据结构。例如，它也不是 Java 标准库的一部分。Guava 确实有，Boost 也有，但 Boost 基本上什么都有。

如果您只想计算元素的出现次数，则可以使用`SortedMap`from 元素来计数。另一方面，如果您要求元素是不同的、可检索的，但在排序规则下是等效的，您可以使用一个`SortedMap`from 元素（不重要哪个）到 a `Set`of distinct elements。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-07T19:01:50.143

`Seq`特质有`diff`，`intersect`甚至`union`。这应该可以帮助您解决很多多集问题。[http://www.scala-lang.org/api/2.11.7/index.html#scala.collection.Seq@diff(that:Seq[A]):Seq[A]](http://www.scala-lang.org/api/2.11.7/index.html#scala.collection.Seq@diff(that:Seq[A]):Seq[A])

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-22T09:12:01.590

如果您只需要平等并且不太关心性能，则可以使用排序列表。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-03T12:50:04.830

[https://github.com/scala/scala-collection-contrib](https://github.com/scala/scala-collection-contrib)中提供了可变和不可变的多重集

# html - 如何使用 CSS3 将背景颜色应用于复选框？

> ID：14617033
> 
> 赞同：0
> 
> 时间：2013-01-31T01:32:52.480
> 
> 标签：html, css, checkbox

几个小时以来，我一直在寻找解决此问题的方法，但没有任何运气。似乎每个人都使用背景图像来解决他们的问题，而我只想使用一种颜色，以便解决方案可以更好地扩展，而无需移动设备需要额外的 CSS。

我几乎有一个可行的解决方案，但 1）“复选框”不像标签的其余部分一样可点击；2）我似乎找不到任何方法在标签和“复选框”之间添加空格而不改变 HTML（我不想这样做，但如果没有可行的纯 CSS 或 JQuery 解决方案，我会尝试） .

这是HTML：

```
<div id="edit-field-school-education-und" class="form-checkboxes">
    <div class="form-item form-type-checkbox form-item-field-school-education-und-28">
        <input type="checkbox" id="edit-field-school-education-und-28" name="field_school_education[und][28]" value="28" checked="checked" class="form-checkbox">  
        <label class="option" for="edit-field-school-education-und-28">Evening Classes &amp; Distance Learning </label>
    </div>
     ......  Repeated for several checkboxes   .......
</div> 
```

到目前为止，这是我的 CSS：

```
.form-checkbox {display:none}
.form-checkbox + label:before {content: "\00a0\00a0\00a0\00a0"; height: 19px; width: 19px; border: 1px  solid black; cursor:pointer; }
input[type="checkbox"]:checked + label:before {background-color: #34c1ce;} 
```

我更喜欢 CSS3 解决方案，但可以使用**通用**HTML 或 JS 解决方案。我不能有基于 ID 等的解决方案，因为复选框列表可能随时增长。但是，我可能会想出一种方法来输出具有相同标签文本的 div。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T01:49:15.230

您不能将背景颜色设置为根据浏览器而不是 css 呈现的复选框，但是您可以在此处设置背景图像，这是一个方便的教程

[http://www.whatstyle.net/articles/18/pretty_form_controls_with_css](http://www.whatstyle.net/articles/18/pretty_form_controls_with_css)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T01:53:11.730

最好的选择是使用按钮和 JavaScript 或使用 JavaScript UI 创建您自己的复选框。然而，这意味着如果 JavaScript 未启用，则它不起作用，因此您可能希望创建一个回退（默认显示一个复选框并使用 JS 将其切换为自定义复选框）。

# php - SimpleXML，XPath：如何通过唯一 id 获取元素的内容？

> ID：14617034
> 
> 赞同：1
> 
> 时间：2013-01-31T01:32:52.003
> 
> 标签：php, xml, xpath, simplexml

一直尝试了几个小时，大脑搞砸了，需要帮助：

XML 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<testresult>
  <body>
    <itemset name="sc">
      <item name="1">1</item>
      <item name="2">3</item>
      <item name="3">0</item>
    </itemset>
  </body>
</testresult> 
```

现在我想将`0`具有唯一名称“3”的项目的内容（）检索到`$value`...

```
$value = $resultxml->xpath("//item[@name='$name']"); 
```

不幸的是不是......我需要做什么`$value`才能包含`0`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T02:36:50.697

```
$results = $xml->xpath("//item[@name='$name']");
$value = (int)$results[0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T01:41:01.590

如果要获取元素的内容，可以将其转换为字符串。

在您的情况下，如果您想获得`'0'`，请尝试：

```
var_dump((string)$value[0]); 
```

# .net - IIS 字体不适用

> ID：14617038
> 
> 赞同：1
> 
> 时间：2013-01-31T01:33:45.013
> 
> 标签：.net, iis, fonts, devexpress, barcode

我们遇到了 IIS 无法识别添加到系统中的字体的问题。通过 Visual Studio 运行我们的 web 服务可以正常工作，并且使用了字体。情况如下：

我们在 IIS 中托管了一个生成 DevExpress 报告的报告服务。在报告的设计中，我们为条形码编号分配了适当的字体。我们安装 3of9.ttf 条码字体，当通过 Visual Studios Dev Server 运行时，生成的报告显示条码正确。部署到同一台机器上的 IIS 后，生成的报告仅显示条码编号而不显示条码本身，因此未使用字体。

任何想法将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T07:44:42.600

这是一个常见的问题。3of9 ttf 条形码应安装在每台客户端计算机上。报告服务依赖于客户端机器字体来进行正确的可视化。尝试在一台客户端 PC 上安装字体并浏览到解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T17:08:25.337

好吧，我试着用我的 SUPERB 英语解释：

我对 DevXpress Richedit 控件和 Code128 字体有类似的问题....我知道你怎么受苦:)

相同的代码进入 Windows 窗体应用程序，运行正常，PDF 显示条形码，但在我的 WCF 服务中，它没有。您看过 PDF 属性吗？你有嵌入字体吗？如果是（正如我们所拥有的那样），那确实更奇怪。

您不能尝试使用 NeverEmbeddedFonts 属性，等等，但是，我认为所有这些：

*   这是由于iis asp池，可能是由于池的Windows帐户缺乏权限
*   确保字体已安装在客户端计算机中
*   **确保字体已安装在生成文件/报告的服务器中，而不是使用终端服务器会话。听起来很疯狂，但 Devxpress 对此有一些问题。**

祝你好运，我的朋友....

* * *

今天，我们客户的 IT-crow 已经“就地”安装了条码字体。现在它起作用了！

# macos - 如何在 OS X 上查看 $PATH 变量的当前值？

> ID：14617041
> 
> 赞同：116
> 
> 时间：2013-01-31T01:34:00.537
> 
> 标签：macos, bash, path, environment-variables, homebrew

> $ $路径

返回：

> -bash：/usr/local/share/npm/bin:/Library/Frameworks/Python.framework/Versions/2.7/bin:/usr/local/bin:/usr/local/sbin:~/bin:/Library/框架/Python.framework/Versions/Current/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/opt/X11/bin:/usr/local/git/bin ： 没有相应的文件和目录

这看起来很丑陋，并且可能[会给我](https://stackoverflow.com/questions/14616981/homebrew-install-issues)带来 Homebrew 启动和运行的问题。

* * *

## 回答 #1

> 赞同：179
> 
> 时间：2013-01-31T01:47:43.153

您需要使用该命令`echo $PATH`来显示 PATH 变量，或者您可以只执行`set`或`env`显示所有环境变量。

通过键入`$PATH`，您尝试将 PATH 变量内容作为命令名称运行。

Bash 以任何方式显示路径的内容。根据您的输出，将按以下顺序搜索以下目录：

```
/usr/local/share/npm/bin
/Library/Frameworks/Python.framework/Versions/2.7/bin
/usr/local/bin
/usr/local/sbin
~/bin
/Library/Frameworks/Python.framework/Versions/Current/bin
/usr/bin
/bin
/usr/sbin
/sbin
/usr/local/bin
/opt/X11/bin
/usr/local/git/bin 
```

对我来说，这份清单似乎是完整的。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2013-01-31T01:46:33.027

通过`$PATH`在命令提示符下自行输入，您正在尝试*运行*它。这不像 Windows，您只需键入即可获得路径输出`path`。

如果您想查看路径是什么，只需回显它：

```
echo $PATH 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2021-08-10T12:59:33.797

要将路径列为单独的行，您可以使用： `echo "${PATH//:/\n}"`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-08-06T14:16:41.280

使用命令：

```
 echo $PATH 
```

你会看到所有的路径：

> /Users/name/.rvm/gems/ruby-2.5.1@pe/bin:/Users/name/.rvm/gems/ruby-2.5.1@global/bin:/Users/sasha/.rvm/rubies/ ruby-2.5.1/bin:/Users/sasha/.rvm/bin:

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2018-10-19T09:29:22.970

对于 MacOS，请确保您知道 GO 的安装位置

```
export GOPATH=/usr/local/go
PATH=$PATH:$GOPATH/bin 
```

# iphone - 使用其他应用打开 pdf

> ID：14617042
> 
> 赞同：3
> 
> 时间：2013-01-31T01:34:07.713
> 
> 标签：iphone, ios, objective-c, pdf, ios-simulator

我在应用程序中显示 pdf 文件。我想在导航栏上显示“打开方式”选项，显示 iPhone 上安装的可以打开相同 pdf 的应用程序，如果用户选择任何应用程序（例如 pdf 查看器），则 pdf 应该使用 pdf 查看器应用程序打开。

我该怎么做呢？

请帮忙

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T01:47:18.097

要在设备上的可用应用程序中打开文件，请使用[UIDocumentInteractionController](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIDocumentInteractionController_class/Reference/Reference.html)类。

> 文档交互控制器以及委托对象为管理用户与本地系统中的文件的交互提供了应用内支持。例如，电子邮件程序可能使用此类来允许用户预览附件并在其他应用程序中打开它们。使用此类为预览、打开、复制或打印指定文件提供适当的用户界面。

如果您遇到困难，那么在 SO 上有*很多问题。*[UIDocumentInteractionController 的搜索结果](https://stackoverflow.com/search?q=UIDocumentInteractionController)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T16:38:38.503

此代码将显示您正在寻找的 OpenIn 交互。它适用于 iPhone 和 iPad。在 iPad 上，它在弹出窗口中。我正在生成 PDF，但如果您只使用一个，则不需要 writeToFile，只需提交 filePath。

```
// In your header. MyViewController.h
@interface MyViewController : UIViewController <UIDocumentInteractionControllerDelegate>
{
    UIDocumentInteractionController *docController;
}

// In your implementation. MyViewController.m Open Results is hooked up to a button.
- (void)openResults
{
    // Generate PDF Data.
    NSData *pdfData = [self makePDF];

    // Create a filePath for the pdf.
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *filePath = [documentsDirectory stringByAppendingPathComponent:@"Report.pdf"];

    // Save the PDF. UIDocumentInteractionController has to use a physical PDF, not just the data.
    [pdfData writeToFile:filePath atomically:YES];

    // Open the controller.
    docController = [UIDocumentInteractionController interactionControllerWithURL:[NSURL fileURLWithPath:filePath]];
    docController.delegate = self;
    docController.UTI = @"com.adobe.pdf";
    [docController presentOpenInMenuFromBarButtonItem:shareButton animated:YES];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T06:59:32.437

您可以使用“UIDocumentInteractionController”的Apple Default api进行检查。

下面是网址：

[http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIDocumentInteractionController_class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIDocumentInteractionController_class/Reference/Reference.html)

希望，它会解决你的问题。

干杯。

# java - DWR Servlet 异常：NumberFormatException

> ID：14617048
> 
> 赞同：0
> 
> 时间：2013-01-31T01:34:48.953
> 
> 标签：java, ajax, jakarta-ee, dwr

我按照快速步骤在我的 Web 应用程序 ( [http://directwebremoting.org/dwr/introduction/getting-started.html](http://directwebremoting.org/dwr/introduction/getting-started.html) ) 中配置 DWR。

当设置阶段结束并且我尝试访问我的“localhost:8080/[myAppPath]/dwr/”时，会引发 NumberFormatException：

```
javax.servlet.ServletException: java.lang.NumberFormatException: null
org.directwebremoting.servlet.DwrServlet.init(DwrServlet.java:77)
org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:395)
org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:250)
org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188)
org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:166)
org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
java.lang.Thread.run(Unknown Source)

root cause 
java.lang.NumberFormatException: null
java.lang.Integer.parseInt(Unknown Source)
java.lang.Integer.parseInt(Unknown Source)
org.directwebremoting.util.VersionUtil.loadProperties(VersionUtil.java:119)
org.directwebremoting.util.VersionUtil.getLabel(VersionUtil.java:99)
org.directwebremoting.impl.StartupUtil.logStartup(StartupUtil.java:157)
org.directwebremoting.servlet.DwrServlet.init(DwrServlet.java:62)
org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:395)
org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:250)
org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188)
org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:166)
org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
java.lang.Thread.run(Unknown Source) 
```

正如 DWR 教程所说的那样，我已经尝试过 youtube 教程、谷歌搜索，甚至在 stackoverflow 上，遇到同样问题的人没有得到答案。

这是我的 web.xml 上的 servlet 声明：

```
<servlet>
     <servlet-name>dwr-invoker</servlet-name>
     <servlet-class>org.directwebremoting.servlet.DwrServlet</servlet-class>
     <init-param>
        <param-name>config</param-name>
        <param-value>/WEB-INF/dwr.xml</param-value>     
     </init-param>

</servlet> 
```

这是我的 dwr.xml：

```
<dwr>
   <allow>
      <create creator="static" javascript="DWRManager">
           <param name="class" value="negocio.DWRManager"/>
      </create>
   </allow>
</dwr> 
```

**什么可能导致此异常？**

我已经下载了 DWR 3.0 并将 dwr.xml 放在与 web.xml (WEB-INF) 相同的文件夹中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T02:47:19.837

> org.directwebremoting.util.VersionUtil.loadProperties(VersionUtil.java:119)

它似乎是 org.directwebremoting.util.VersionUtil 类中的内部 DWR 错误：

```
major = Integer.parseInt(props.getProperty(KEY_MAJOR)); 
```

由于某种原因，无法解析“dwr-version.properties”文件中的值。

尝试使用他们网站上发布的最新稳定版本 2.0.10。似乎 DWR 3 还没有真正准备好广泛使用。

# ios - 检测 UIView/UILabel 何时重绘自身？

> ID：14617051
> 
> 赞同：2
> 
> 时间：2013-01-31T01:34:56.300
> 
> 标签：ios, uiview, calendar, uilabel

我有一个应用程序可以获取日历事件并向用户显示数据。尝试更新我的标签时，我遇到了一些奇怪的行为。

我可以很好地获取日历数据，但是当它完成后，我的问题是根据`NSLog`我的`label.text`属性已经改变了，但是在视图被重绘之前还有 4-8 秒。

因此，我试图检测标签何时重绘，而不是其`.text`属性更改时，因此我可以在标签中填充数据的同时隐藏进度视图。

**我已经尝试过和`setNeedsDisplay`标签本身。*在*标签的属性发生变化后 - 不起作用。`setNeedsLayout``self.view`*`.text`***

 *因此，除非我完全遗漏了有关使用 setNeedsDisplay 的某些内容（无论如何，我理解它只会在下一次重绘时更新），否则我的问题是，我如何检测`UILabel`和/或`UIView`重绘本身的时间？

我的应用程序是如何设置的：

![在此处输入图像描述](../Images/2a23b1371a3e1f3d1bc593abb2008beb.png)

我已经坚持了大约3周。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T01:43:56.167

确保`setNeedsDisplay`在主线程上被调用[`performSelectorOnMainThread:withObject:waitUntilDone:`](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/Reference/Reference.html#//apple_ref/occ/cl/NSObject)，例如：

```
[view performSelectorOnMainThread:@selector(setNeedsDisplay) 
                       withObject:nil 
                    waitUntilDone:NO]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T01:53:14.573

引用苹果开发文档：

> 直到下一个绘图周期才真正重绘视图，此时所有无效的视图都将更新。

也许你的主线程被其他事情阻塞了，比如处理许多复杂的计算

例如：

```
- (void)testMethod
{
    myLabel.mytext = @"aaaa";
    [myLabel setNeedsDisplay];
    // some complex calculations
    // the quickest ,  it will run finish the method then redraw.
} 
```*

# matlab - 在数组中查找多个最大值

> ID：14617056
> 
> 赞同：0
> 
> 时间：2013-01-31T01:35:45.630
> 
> 标签：matlab, max

我想使用 Matlab 从数组中找到多个最大值。

这是我的代码，它只返回一个最大值及其位置：

```
[peak, pos] = max(abs(coeffs)); 
```

问题是我想在数组中检测多个最大值。事实上，我需要检测前两个峰值及其在以下数组中的位置：

```
>> abs(coeffs())

ans =

    0.5442
    0.5465
    0.5545
    0.5674
    0.5862
    0.6115
    0.6438
    0.6836
    0.7333
    0.7941
    0.8689
    0.9608
    1.0751
    1.2188
    1.4027
    1.6441
    1.9701
    2.4299
    3.1178
    4.2428
    6.3792
   11.8611
   53.7537
   24.9119
   10.8982
    7.3470
    5.7768
    4.9340
    4.4489
    4.1772
    4.0564
    4.0622
    4.1949
    4.4801
    4.9825
    5.8496
    7.4614
   11.1087
   25.6071
   53.2831
   12.0029
    6.4743
    4.3096
    3.1648
    2.4631
    1.9918
    1.6558
    1.4054
    1.2129
    1.0608
    0.9379
    0.8371
    0.7532
    0.6827
    0.6224
    0.5702
    0.5255
    0.4861
    0.4517
    0.4212
    0.3941
    0.3698
    0.3481
    0.3282
    0.3105
    0.2946
    0.2796
    0.2665
    0.2541
    0.2429
    0.2326
    0.2230
    0.2141
    0.2057
    0.1986
    0.1914
    0.1848
    0.1787
    0.1729
    0.1677
    0.1627
    0.1579
    0.1537
    0.1494
    0.1456
    0.1420
    0.1385
    0.1353
    0.1323
    0.1293
    0.1267
    0.1239
    0.1216
    0.1192
    0.1172
    0.1151
    0.1132
    0.1113
    0.1096
    0.1080
    0.1064
    0.1048
    0.1038
    0.1024
    0.1011
    0.1000
    0.0987
    0.0978
    0.0967
    0.0961
    0.0951
    0.0943
    0.0936
    0.0930
    0.0924
    0.0917
    0.0913
    0.0908
    0.0902
    0.0899
    0.0894
    0.0892
    0.0889
    0.0888
    0.0885
    0.0883
    0.0882
    0.0883
    0.0882
    0.0883
    0.0882
    0.0883
    0.0885
    0.0888
    0.0889
    0.0892
    0.0894
    0.0899
    0.0902
    0.0908
    0.0913
    0.0917
    0.0924
    0.0930
    0.0936
    0.0943
    0.0951
    0.0961
    0.0967
    0.0978
    0.0987
    0.1000
    0.1011
    0.1024
    0.1038
    0.1048
    0.1064
    0.1080
    0.1096
    0.1113
    0.1132
    0.1151
    0.1172
    0.1192
    0.1216
    0.1239
    0.1267
    0.1293
    0.1323
    0.1353
    0.1385
    0.1420
    0.1456
    0.1494
    0.1537
    0.1579
    0.1627
    0.1677
    0.1729
    0.1787
    0.1848
    0.1914
    0.1986
    0.2057
    0.2141
    0.2230
    0.2326
    0.2429
    0.2541
    0.2665
    0.2796
    0.2946
    0.3105
    0.3282
    0.3481
    0.3698
    0.3941
    0.4212
    0.4517
    0.4861
    0.5255
    0.5702
    0.6224
    0.6827
    0.7532
    0.8371
    0.9379
    1.0608
    1.2129
    1.4054
    1.6558
    1.9918
    2.4631
    3.1648
    4.3096
    6.4743
   12.0029
   53.2831
   25.6071
   11.1087
    7.4614
    5.8496
    4.9825
    4.4801
    4.1949
    4.0622
    4.0564
    4.1772
    4.4489
    4.9340
    5.7768
    7.3470
   10.8982
   24.9119
   53.7537
   11.8611
    6.3792
    4.2428
    3.1178
    2.4299
    1.9701
    1.6441
    1.4027
    1.2188
    1.0751
    0.9608
    0.8689
    0.7941
    0.7333
    0.6836
    0.6438
    0.6115
    0.5862
    0.5674
    0.5545
    0.5465 
```

我只需要前两个最大值的原因是最后两个是快速傅立叶变换结果的前两个的反射。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T01:40:33.810

您可以使用许多峰值查找工具来做到这一点。以下是其中一些：

[查找峰](http://www.mathworks.com/help/signal/ref/findpeaks.html)

该函数返回输入数据中位置的`[pks,locs] = findpeaks(data)`局部最大值或峰值（从第一个到最后一个找到）。数据需要具有实值元素的行或列向量，其最小长度为 3。将数据的每个元素与其相邻值进行比较。如果数据元素大于其相邻元素或等于 Inf，则该元素是局部峰值。如果没有局部最大值，则 pks 是一个空向量。`pks``locs``findpeaks`

例如：

```
[pks,locs] = findpeaks(abs(coeffs))
plot(abs(coeffs)); hold on
plot(locs(1:2),pks(1:2),'ro'); 
```

![在此处输入图像描述](../Images/69e26d6a73c99a6dab6645e1d4cfd5aa.png)

[1D Non-derivative Peak Finder](http://www.mathworks.com/matlabcentral/fileexchange/30490-1d-non-derivative-peak-finder) - 一种 FEX 工具，无需使用一阶或二阶导数即可找到峰，而是使用给定数据集中的局部斜率特征。

[PeakFinder](http://www.mathworks.com/matlabcentral/fileexchange/25500-peakfinder) - 来自 nate yoder 的 FEX 的另一个峰值查找器。

FEX 中还有很多这样的...

# c# - 有没有办法在不使用 XAML 的情况下设置对象的 AutomationID？

> ID：14617061
> 
> 赞同：10
> 
> 时间：2013-01-31T01:36:10.177
> 
> 标签：c#, winforms, ui-automation

我需要自动化 Winform 应用程序。如何像[本文](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/jj150602.aspx)中的 XAML 一样设置`AutomationID`(or ) ？`AutomationName`

从这篇[堆栈溢出文章](https://stackoverflow.com/questions/9996145/is-there-any-unique-identifier-for-wpf-uielement/10814688#10814688)中，答案似乎是否定的，除非我将应用程序切换到 WPF 应用程序（这样我就可以使用 XAML 来定义控件）。

我尝试过这种天真的方法：

```
 AutomationElement formAutomation = AutomationElement.FromHandle(this.Handle);
  formAutomation.Current.Name = "SandboxResponseDialogName";
  formAutomation.Current.ClassName = "SandboxResponseDialogClassName";
  formAutomation.Current.AutomationId = "SandboxResponseDialogID; 
```

但此时在控件的构造函数中，这些自动化属性只有 getter；没有二传手。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-25T09:51:49.170

如果你想`UI Automation`在代码中设置任何相关的东西，你需要使用这个：

```
using System.Windows.Automation; 
```

在您的代码中：

```
YourObjectClass element = // just get your element.
element.SetValue(AutomationProperties.AutomationIdProperty, "elementAutomationID"); 
```

您还可以使用`AutomationProperties.NameProperty`UIAutomation 名称。`AutomationProperties`顾名思义，包含 UIAutomation 元素（setter 和 getter）的所有属性。

# use-case - 用例 - 如何处理来自多个步骤的备用流分支？

> ID：14617065
> 
> 赞同：2
> 
> 时间：2013-01-31T01:36:26.300
> 
> 标签：use-case

我正在尝试确定如何编号/编写此用例，但我遇到了一些麻烦。

简而言之：

主要场景

1.分析师选择订单

2.系统判断订单为人工排期

3.分析师选择一个行项目

4.系统检查请求的日期并确定是否可以满足日期

5.分析师接受发货日期

重复 3-5 直到所有订单项都安排好。

6.其余用例。

备选方案 #1 - 自动安排订单

2.系统通知用户订单可以自动排期。

2.1。分析师告诉系统自动安排订单

2.2\. - 2.4。与主要方案步骤 3-5 相同，但分析员被系统替换。

重复 2.2。通过 2.4。直到所有订单项都排期。

返回主场景，第 6 步。

替代方案 #2 - 无法满足要求的日期

在任何一种情况下，我都会遇到无法满足请求日期的情况。

十、系统判断无法满足要求的日期

X.1 系统确定第一个可用日期

X.2 分析师更改发货日期

X.3 返回... ???

对于这种情况，无论订单是手动还是自动计划，步骤都是相同的。但是，该场景可以从 2 个不同的节点（主节点 4 个，备用节点 2.3 个）分支到。我该如何处理？我应该如何对第二个替代方案中的步骤进行编号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:55:32.760

这听起来确实像是您可以以场景的形式以散文形式编写的内容（可能在您的流程中遵循角色）或放入活动/序列图中。用例并不意味着描述诸如“重复”、“返回”之类的东西。就个人而言，我会使用序列图来说明这种情况。

根据给定的描述，您可以做的是制定一个真正指出此工作流程的全部内容的用例。目前你需要阅读大约 15 行。分析师想要达到什么目标？

主要用例是“运送产品”，它可能包含两个`<<extend>>`用例，名为“安排发货”和“更改发货日期”。

顺便说一句：“分析师告诉系统自动安排订单”对我来说似乎是多余的。如果系统能够自动做到这一点，那么它应该。如果需要这样告知，则需要澄清为什么需要这样做。

# compiler-construction - 使用 llvm-prof 收集 LLVM 边缘分析

> ID：14617067
> 
> 赞同：6
> 
> 时间：2013-01-31T01:36:46.153
> 
> 标签：compiler-construction, profiling, llvm

我正在使用这些命令来编译下面的代码，以便在 trunk-llvm 中收集边缘/块分析：

```
clang -emit-llvm -c sort.c -o sort.bc
opt -insert-edge-profiling sort.bc -o sort_prof.bc
clang sort_prof.bc -lprofile_rt -L/llvms/lib -o sort_prof 
```

然后我运行程序并使用 llvm-prof sort_prof.bc 显示分析信息，结果是：

```
===-------------------------------------------------------------------------===
Function execution frequencies:

 ##   Frequency
  1\. 4.3e+05/708539 main
  2\. 2.8e+05/708539 quickSort

  NOTE: 2 functions were never executed!
..... 
```

我的问题是关于执行频率。main 执行 4.3e+05 次有意义吗？为什么这样？我正在编译的代码如下。

```
###################### sort.c ########################
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

const int MAX = 1000000;

void swap(int* a, int* b) {
  int tmp;
  tmp = *a;
  *a = *b;
  *b = tmp;
}

int partition(int vec[], int left, int right) {
  int i, j;

  i = left;
  for (j = left + 1; j <= right; ++j) {
    if (vec[j] < vec[left]) {
      ++i;
      swap(&vec[i], &vec[j]);
    }
  }
  swap(&vec[left], &vec[i]);

  return i;
}

void quickSort(int vec[], int left, int right) {
  int r;

  if (right > left) {
    r = partition(vec, left, right);
    quickSort(vec, left, r - 1);
    quickSort(vec, r + 1, right);
  }
}

int main(void) {

        int vet[MAX], i=0;

        srand(time(NULL));

        for (i=0; i<MAX; i++) {
                vet[i] = rand() % 654321;
        }

        quickSort(vet, 0, MAX-1);

        for (i=0; i<MAX; i++) {
                if ((rand() % 7) > 2) {
                        printf("Num$[%d] = %d\n", i, vet[i]);
                }
                else if ((rand() % 4) > 2) {
                        printf("Num@[%d] = %d\n", i, vet[i]);
                }
                else if ((rand() % 2) > 1) {
                        printf("Num#[%d] = %d\n", i, vet[i]);
                }
        }

        return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T14:57:00.587

问题是我将带有检测的位码文件传递给 llvm-prof，正确的是使用原始文件（没有检测）：

```
llvm-prof sort.bc 
```

与 llvm-prof 相关的另一个问题是，由于科学记数法，它正在舍入函数/块执行频率。我已经向 llvm 提交了一个补丁来纠正这个问题。

另一个提示是 llvm-prof 默认只显示前 20 个执行次数最多的基本块，它不为用户提供任何改变它的方法。我已经提交了另一个补丁，它添加了一个命令行参数，使用户能够在输出中设置他/她想要多少个基本块。

# php - 在我的网页顶部为首次访问者显示站点游览培训窗口

> ID：14617071
> 
> 赞同：0
> 
> 时间：2013-01-31T01:37:34.263
> 
> 标签：php, javascript, jquery, css, designer

我刚刚完成了一个从数据库中提取数据并将其显示到屏幕上并生成一些 csv 文件的应用程序。但我确实有很多用户必须填写的输入，我担心用户不会将正确的信息放在正确的位置，所以我的想法是在我的页面顶部显示一个培训教程当用户第一次访问该页面时[（我可以从用户 cookie 和/或数据库中提取该数据）](https://stackoverflow.com/questions/13739920/site-tour-for-first-time-user-for-all-pages)，例如 facebook 或 Youtube 在更改平台时显示的页面，该功能旁边的弹出窗口，当您关闭它时它会打开下一个。如果有人在过去做过类似的事情并且有想法或建议如何去做，或者使用什么库，那将不胜感激！

我检查了一个名为[Be Aware](http://notes.xoxco.com/post/36766728425/aware-js-make-your-site-reader-aware)的 JS 库，但我想和你们核实一下，我还有什么需要看的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T02:12:14.183

这听起来像您寻找的网络旅游插件：http: [//tympanus.net/codrops/2010/12/21/website-tour/](http://tympanus.net/codrops/2010/12/21/website-tour/)

这是它的实际[演示](http://tympanus.net/Development/WebsiteTour/)。

# python - 拟合 RandomForestClassifier 时内存使用量爆炸式增长

> ID：14617076
> 
> 赞同：2
> 
> 时间：2013-01-31T01:38:29.477
> 
> 标签：python, numpy, scikit-learn

我正在尝试用一个中等大小的 numpy 浮点数组来适应 Forest

```
In [3]: data.shape
Out[3]: (401125, 5)

[...]
forest = forest.fit(data[:,1:],data[:,0]) 
```

启动拟合后大约 10 秒后会出现此问题。在冻结我的机器之前，它最多需要 3.6 GB（3.8 GB）的内存，我必须终止该进程。

`n_jobs`我一直在研究，当您设置大于 1时，这个问题似乎很常见。但我使用的是 n_jobs 的默认值，即 1。

我还尝试`n_estimators`从我的初始值 100 更改为 5，只是为了看看是否发生了不同的事情，但一切都保持不变。

任何人都可以对此有所了解吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-30T17:20:09.797

哎呀。我实际上是在尝试进行回归，而不是分类。结束问题。

# java - 如何在测量性能时获取直方图数据

> ID：14617077
> 
> 赞同：0
> 
> 时间：2013-01-31T01:38:54.070
> 
> 标签：java, histogram

我正在尝试通过将数据放入 HashMap 中来衡量我们服务的性能，就像 在毫秒内`X`返回的调用数一样。`Y`下面是我的代码，非常简单。它将在点击服务之前设置计时器，在响应返回后，它将测量时间。

```
private static void serviceCall() {

    histogram = new HashMap<Long, Long>();
    keys = histogram.keySet();
    long total = 10;
    long runs = total;

    while (runs > 0) {

        long start_time = System.currentTimeMillis();

        // hitting the service      
        result = restTemplate
                .getForObject("Some URL",String.class);

        long difference = (System.currentTimeMillis() - start_time);

        Long count = histogram.get(difference);
        if (count != null) {
            count++;
            histogram.put(Long.valueOf(difference), count);
        } else {
            histogram.put(Long.valueOf(difference), Long.valueOf(1L));
        }
        runs--;
    }
    for (Long key : keys) {
        Long value = histogram.get(key);
        System.out.println("SERVICE MEASUREMENT, HG data, " + key + ":" + value);
    }
} 
```

目前我得到的输出是这样的 -

```
SERVICE MEASUREMENT, HG data, 166:1
SERVICE MEASUREMENT, HG data, 40:2
SERVICE MEASUREMENT, HG data, 41:4
SERVICE MEASUREMENT, HG data, 42:1
SERVICE MEASUREMENT, HG data, 43:1
SERVICE MEASUREMENT, HG data, 44:1 
```

这意味着 is `1 call came back in 166 ms`，`2 calls came back in 40 ms`并且与其他输出相同。

**问题陈述：-**

我现在正在寻找的是这样的东西。我应该有这样的范围设置-

```
X Number of calls came back in between 1 and 10 ms
Y Number of calls came back in between 11 and 20 ms
Z Number of calls came back in between 21 and 30 ms
P Number of calls came back in between 31 and 40 ms
T number of calls came back in between 41 and 50 ms

....
....

I number of calls came back in more than 100 ms 
```

以及任何配置范围的方式。假设将来我需要调整范围，我应该能够做到。我怎样才能在我目前的程序中实现这个目标？任何建议都会有很大帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T01:45:19.060

直方图是一组数据，它们排列成相同大小的“箱”。您应该将时间测量转换为 bin 并将该 bin 用作映射键。这可以简单地通过将您的时间值除以 bin 大小来完成。例如： `time / 10L`。

# c# - DotNetOpenAuth ClaimedIdentifier 更改？我应该在数据库中存储什么来识别用户

> ID：14617078
> 
> 赞同：1
> 
> 时间：2013-01-31T01:39:02.000
> 
> 标签：c#, asp.net, openid, dotnetopenauth

有很多这样的问题[，](https://stackoverflow.com/questions/11414824/dotnetopenauth-how-to-uniquely-identify-google-users/11433676#11433676%20%22here%22%27)所有[这些](https://stackoverflow.com/questions/8574557/what-should-i-store-as-username-from-dotnetopenauth)都声称`ClaimedIdentifier`应该用来唯一地识别每个用户。

成功登录后，我存储`ClaimedIndentifier`在数据库中。每当用户登录时，我都会遍历我的记录以查找`ClaimedIdentifier`. 但是我注意到情况`ClaimedIdentifiers`正在发生变化。我应该在数据库中存储什么来识别我的用户。我正在使用`Google`帐户。这就是我检索将其存储到数据库中的方式

```
OpenIdRelyingParty rp = new OpenIdRelyingParty();
IAuthenticationResponse r = rp.GetResponse();
UserController.addUser(new UserController.User(r.ClaimedIdentifier.ToString(), 0)); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T04:58:52.320

这不是 DotNetOpenAuth 独有的问题。这是谷歌的行为。Google 的 OpenID Provider 发布所谓的*成对唯一*标识符。*只要您的 OpenID 领域是恒定*的，它们对于给定用户将始终相同。

如果您在没有明确向 DotNetOpenAuth 的`OpenIdRelyingParty.CreateRequest`方法提供领域的情况下登录用户，DotNetOpenAuth 只会使用当前的 Web 应用程序根 URL。这是一个合理的默认值，但如果您的站点可以通过多种方式访问​​（例如 http 和 https，或者有和没有 www. 主机名），那么默认域将根据用户碰巧使用的 URL 而有所不同到达您的登录页面。当领域发生变化时，谷歌生成的声明标识符也会发生变化。

然后，解决方法是让您选择*一个*领域（如果可以的话，最好是带有 https 方案的领域）并将其显式提供给该`CreateRequest`方法。您还必须确保同一方法的 return_to 参数与您选择的领域共享一个公共根。例如，如果您选择的领域是： [https](https://www.mysite.com/) ://www.mysite.com/ 那么您必须确保您的 return_to 基于此。像： [https ://www.mysite.com/login.aspx](https://www.mysite.com/login.aspx)

如果用户浏览到[http://mysite.com/login.aspx](http://mysite.com/login.aspx)，那将是 return_to 的默认 URL，它与您选择的领域不匹配。

所以总的来说，它可能看起来像这样：

```
var request = relyingParty.CreateRequest(
    "https://www.google.com/accounts/o8/id",
    "https://www.mysite.com/",
    new Uri("https://www.mysite.com/login.aspx")); 
```

请注意，您的 return_to 不需要*与*领域一样与每个请求完全相同。因此，您可以有多个登录页面 URL，并且每个都指定自己的 URL 作为 return_to 参数。但所有 return_to URL 都必须基于领域 URL。

随着该更改始终应用于您允许用户登录的所有位置，您应该会看到来自 google 的一致声明标识符。不幸的是，您已经使用其他领域获得的声明标识符将与您在此修复后获得的标识符不匹配。如果您需要合并这些用户帐户，并且如果您有用户的电子邮件地址，则可以尝试基于此进行合并。但是要*非常*小心这一步。只有当您*确定*存档的电子邮件地址属于这些用户时，才能安全地完成此操作。如果您在用户登录时通过 OpenID 获得了这些电子邮件地址，并仔细检查了它来自您信任的 OpenID 提供商并验证了电子邮件，那么您可能没问题。请注意，只需将 Google OP Identifier 硬编码`CreateRequest`到*不*保证只有 Google 用户登录。为了确保这一点，您必须在肯定断言出现时检查`IAuthenticationResponse.Provider.Uri`属性是否匹配`https://www.google.com/accounts/o8/ud`。

# c++ - 如何在 c++0x 线程中使用 wait_for

> ID：14617082
> 
> 赞同：5
> 
> 时间：2013-01-31T01:39:28.647
> 
> 标签：c++, multithreading

在 gcc 4.4.6、RHEL 6.3 linux 上，我在线程头中看到了模板

```
template<typename _Rep, typename _Period>
  inline void
  sleep_for(const chrono::duration<_Rep, _Period>& __rtime) 
```

但是如果我尝试在我的应用程序中使用它，我会收到错误消息`sleep_for is not a member of std::this_thread`

我的应用程序很简单

```
#include <thread>
#include <chrono>

using namespace std;

int main()
{
  this_thread::sleep_for(chrono::seconds(1));
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T01:42:59.347

编译时将此参数添加到命令行：

```
-D_GLIBCXX_USE_NANOSLEEP 
```

所以像这样编译：

```
gcc -D_GLIBCXX_USE_NANOSLEEP test.cpp -o test 
```

如果使用 g++，你可以使用

```
g++ -std=gnu++0x -pthread test.cpp -o test 
```

# javascript - CSS - 沿角度环绕文本

> ID：14617084
> 
> 赞同：5
> 
> 时间：2013-01-31T01:39:31.423
> 
> 标签：javascript, html, css, word-wrap

我试图让文本沿一个角度换行。这说明了我想要做的比我能描述的更好的事情：

[http://bdub.ca/angle.png http://bdub.ca/angle.png](http://bdub.ca/angle.png)

我在[这里](http://www.csstextwrap.com/)找到了一个解决方案，但它使用了大量的空浮动 div 来创建效果。我需要在一个页面上多次执行此操作，因此最好有一个重量更轻的解决方案。如果我可以在页面加载时运行 JavaScript 以使 DOM 免受额外元素的重载，那么 JavaScript 是可以的。

我对 JS 解决方案的头脑风暴试图弄清楚如何将每一行包装在一个跨度中，并将跨度的左边距设置得越来越大。需要注意的是，文本是一个段落，将自动换行以适合容器 - 不幸的是，我不能要求我的客户从 Wordpress 插入换行符 - 所以将每一行换行将涉及以某种方式检测自动换行符使用 JavaScript。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T01:59:13.993

这非常棘手，因为您无法*合法地*（w3c 标准；监控屏幕分辨率大小和隐私）检测字符的实际宽度。您可以将字体大小设置为特定宽度，并在接近宽度时自行插入换行符。（在 b4 显示器中）

所以 css: .paraIncrement { 字体大小: 12pt; }

我对javascript有点生疏，所以让我们对这个进行伪编码：

```
outputstr[] = array();
int index = 0;
int startmax = 80;
int innerCount = 0;
for (int i = 0; paragraph.length; i++) {
   outputstr[index] += paragraph[i];
   innercount++;
   if (innercount == startmax) {
      startmax -= 5; // how much you want the indent to shrink progressively.
      innercount = 0;
      index++;
   }
}
for (int i = 0; i < output.length(); i++) {
   echo '<span style="margin-left: '+(indentValue*i)+';">'+output[i]+'</span>';
} 
```

本节期望开始的最大长度为 80 个字符，每次递减 5。此外，如果您想确保它不会提前中断，请确保将 css.overflow 设置为隐藏/可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T01:42:21.487

有一个空白图像（锯齿状的步骤）你想在段落的左侧内联应该这样做。

# php - codeigniter - 使用多个数据库提交表单时出现未定义的属性错误

> ID：14617088
> 
> 赞同：0
> 
> 时间：2013-01-31T01:39:55.790
> 
> 标签：php, mysql, codeigniter

当您使用多个数据库时，我无法在 codeigniter 中提交表单

出现的错误是......

未定义的属性

致命错误：在非对象上调用成员函数 insert()

这是我的代码

**控制器（site.php）**

```
 <?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

    class Site extends CI_controller {

        public function __construct()
        {
            parent::__construct();
            // Your own constructor code
            $this->load->model("site_model");

            //$cms_db = $this->load->database('cms', TRUE); /* database conection for write operation */
            $site_db = $this->load->database('default', TRUE);  
        } 

        public function index()
        {
        $this->load->helper('form');

        $data = $this->_initialize_data();
        $this->load->vars($data);
        $this->load->view('site/index');
        }

        public function learner()
        {
            $cms_db = $this->load->database('cms', TRUE); /* database conection for write operation */
            if(isset($_POST['submit_learner']))
                {
                    $fname = $this->input->post("fname");
                    $mname = $this->input->post("mname");
                    $lname = $this->input->post("lname");
                    $ename = $this->input->post("ename");
                    $bday = $this->input->post("bday");
                    $opt = $this->input->post("opt");
                    $educ = $this->input->post("educ");
                    $als = $this->input->post("als");
                    $brgy = $this->input->post("brgy");
                    $guardian = $this->input->post("guardian");
                    $relation = $this->input->post("relation");
                    $benefit = $this->input->post("benefit");

                    $newdata = array('first_name'=>$fname,
                                        'middle_name'=>$mname,
                                        'last_name'=>$lname,
                                        'extention_name'=>$ename,
                                        'bday'=>$bday,
                                        'gender'=>$opt,
                                        'education'=>$educ,
                                        'als'=>$als,
                                        'brgy'=>$brgy,
                                        'guardian'=>$guardian,
                                        'relationship'=>$relation,
                                        'added_by'=>'OTH',
                                        'added_id'=>''
                                        );

                    $this->cms_db->insert('records', $newdata); 

                    redirect(base_url() . "site/index");
                }
        } 
```

**配置（数据库.php）**

```
 $active_group = 'default';
    $active_record = TRUE;

    $db['default']['hostname'] = 'localhost';
    $db['default']['username'] = 'root';
    $db['default']['password'] = '';
    $db['default']['database'] = 'dbsite';
    $db['default']['dbdriver'] = 'mysql';
    $db['default']['dbprefix'] = '';
    $db['default']['pconnect'] = TRUE;
    $db['default']['db_debug'] = TRUE;
    $db['default']['cache_on'] = FALSE;
    $db['default']['cachedir'] = '';
    $db['default']['char_set'] = 'utf8';
    $db['default']['dbcollat'] = 'utf8_general_ci';
    $db['default']['swap_pre'] = '';
    $db['default']['autoinit'] = TRUE;
    $db['default']['stricton'] = FALSE;

    $db['cms']['hostname'] = 'localhost';
    $db['cms']['username'] = 'root';
    $db['cms']['password'] = '';
    $db['cms']['database'] = 'dbcms';
    $db['cms']['dbdriver'] = 'mysql';
    $db['cms']['dbprefix'] = '';
    $db['cms']['pconnect'] = FALSE;
    $db['cms']['db_debug'] = TRUE;
    $db['cms']['cache_on'] = FALSE;
    $db['cms']['cachedir'] = '';
    $db['cms']['char_set'] = 'utf8';
    $db['cms']['dbcollat'] = 'utf8_general_ci';
    $db['cms']['swap_pre'] = '';
    $db['cms']['autoinit'] = TRUE;
    $db['cms']['stricton'] = FALSE; 
```

似乎由于我的控制器（site.php）而发生错误

```
$this->cms_db->insert('records', $newdata); 
```

它说 cms_db 是一个未定义的属性

我也试过这样

```
$cms_db->insert('records',$newdata) 
```

但仍然出现同样的错误

我错过了什么吗？

谢谢

# uitableview - 在 Tableview ios 中搜索

> ID：14617092
> 
> 赞同：0
> 
> 时间：2013-01-31T01:40:15.693
> 
> 标签：uitableview, uisearchbar

我有以下字典

```
 enter {
    Image = "https://www.mysite.com/api/image/303";
    Title = "My App1";
    apptype = IPHONE;
    category = Productivity;
}

    {
    Image = "https://www.mysite.com/api/image/304";
    Title = "My App2";
    apptype = IPHONE;
    category = Productivity;
} 
```

我想使用 UItableviw 中的 Searchbar 使用标题和类别进行搜索。请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T22:33:55.363

您可以在[此处](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UISearchDisplayController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40008225)找到带有示例的文档。

请阅读并开始编码 - 当您有其他问题时，请返回更详细的问题。

# scheme - 如何在 Racket 中使用 append-map (Scheme)

> ID：14617095
> 
> 赞同：6
> 
> 时间：2013-01-31T01:40:31.810
> 
> 标签：scheme, racket, procedural-programming, procedures

我不完全了解 append-map 命令在球拍中的作用，也不了解如何使用它，而且我很难在网上找到一些可以理解的文档。有人可以演示该命令的确切作用以及它是如何工作的吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-31T02:10:45.493

该过程对于在将过程应用于每个子列表*后*`append-map`从子列表列表中创建单个列表很有用。换句话说，这段代码：

 *```
(append-map proc lst) 
```

...在语义上等同于：

```
(apply append (map proc lst)) 
```

... 或这个：

```
(append* (map proc lst)) 
```

Applying-append-to-a-list-of-sublists 习惯用法有时被称为*展平*子列表列表。让我们看一些例子，这个就[在](http://docs.racket-lang.org/reference/pairs.html#%28def._%28%28lib._racket%2Flist..rkt%29._append-map%29%29)文档中：

```
(append-map vector->list '(#(1) #(2 3) #(4)))
'(1 2 3 4) 
```

对于更有趣的示例，请查看 Rosetta Code 中的此[代码](http://rosettacode.org/wiki/Permutations#Scheme)，以查找列表的所有排列：

```
(define (insert l n e)
  (if (= 0 n)
      (cons e l)
      (cons (car l) 
            (insert (cdr l) (- n 1) e))))

(define (seq start end)
  (if (= start end)
      (list end)
      (cons start (seq (+ start 1) end))))

(define (permute l)
  (if (null? l)
      '(())
      (apply append (map (lambda (p)
                           (map (lambda (n)
                                  (insert p n (car l)))
                                (seq 0 (length p))))
                         (permute (cdr l)))))) 
```

最后一个过程可以用 更简洁地表示`append-map`：

```
(define (permute l)
  (if (null? l)
      '(())
      (append-map (lambda (p)
                    (map (lambda (n)
                           (insert p n (car l)))
                         (seq 0 (length p))))
                  (permute (cdr l))))) 
```

无论哪种方式，结果都符合预期：

```
(permute '(1 2 3))
=> '((1 2 3) (2 1 3) (2 3 1) (1 3 2) (3 1 2) (3 2 1)) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T06:36:04.693

在 Common Lisp 中，该函数被命名为“mapcan”，它有时用于将过滤与映射结合起来：

```
* (mapcan (lambda (n) (if (oddp n) (list (* n n)) '()))
        '(0 1 2 3 4 5 6 7))
(1 9 25 49) 
```

在球拍中，这将是：

```
> (append-map (lambda (n) (if (odd? n) (list (* n n)) '()))
            (range 8))
'(1 9 25 49) 
```

但最好这样做：

```
> (filter-map (lambda (n) (and (odd? n) (* n n))) (range 8))
'(1 9 25 49) 
```*

# firebird - Firebird - 数据库文件关闭错误消息

> ID：14617099
> 
> 赞同：8
> 
> 时间：2013-01-31T01:40:56.990
> 
> 标签：firebird, corrupt

我的 Firebird 数据库有问题。其中一个表的主键被之前实际删除的另一个表引用。因此，当我尝试对表数据进行任何更改时，来自不存在表的引用会导致错误。

因此，我进行了备份和还原，并且错误的引用消失了，但是现在当我尝试同时多次连接到我的数据库时，出现以下错误：

> 数据库 [文件路径] 关闭

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-31T08:43:58.017

您的数据库（文件，而不是服务器）已关闭，因此 Firebird 不接受此数据库的连接，直到它再次使用`gfix`.

命令是：

```
gfix -online <path-to-your-database> 
```

请参阅[Firebird 数据库管理实用程序手册](https://www.firebirdsql.org/file/documentation/html/en/firebirddocs/gfix/firebird-gfix.html)中的[数据库启动和关闭](https://www.firebirdsql.org/file/documentation/html/en/firebirddocs/gfix/firebird-gfix.html#gfix-dbstartstop)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-16T22:24:15.480

在线使用

```
gfix  -user "SYSDBA" -password "masterkey"  -online DATA.FDB 
```

使用数据库后重试

```
gfix  -user "SYSDBA" -password "masterkey"   -shut -force 0 DATA.FDB 
```

# php - PHP：切换奇怪的行为

> ID：14617101
> 
> 赞同：3
> 
> 时间：2013-01-31T01:41:08.693
> 
> 标签：php, logic

> **可能重复：**
> [PHP 将两个不同的字符串表示为相同](https://stackoverflow.com/questions/12598407/php-expresses-two-different-strings-to-be-the-same)

我很难理解是什么导致了 switch case 指令中这种奇怪的行为。

代码是这样的：

```
<?php
$myKey = "0E9";

switch ($myKey) {
    case "0E2":
        echo "The F Word";
        break;
    case "0E9":
        echo "This is the G";
        break;
    default:
        echo "Nothing here";
        break;
}
?> 
```

该指令的结果应该是**This is the G**

好吧，不是这样。总是返回**F 字**

如果我们把左边的**0E9**指令反转为开头并尝试找到值**0E2**

```
<?php
$myKey = "0E2";

switch ($myKey) {
    case "0E9":
        echo "The G String";
    break;
    case "0E2":
        echo "The F Word";
        break;       
    default:
        echo "Nothing here";
        break;
}
?> 
```

现在总是返回**This is the G**

**0E2**和**0E9**值不解释为文本？那些Values被保留？

有人可以解释这种行为吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T01:43:31.027

`"0E2" == "0E9"`是`true`因为它们是**数字字符串**。

注意：**开关使用松散比较**。

检查这个问题：[PHP 表示两个不同的字符串是相同的](https://stackoverflow.com/questions/12598407/php-expresses-two-different-strings-to-be-the-same)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T01:47:00.183

诸如此类的数字字符串彼此相等..总是。不幸的是，没有办法通过`switch`. 你只需要使用`if`：

```
if ($myKey === '0E9') {
   echo 'g';
}
else if ($myKey === '0E2') {
   echo 'f';
}
else {
   echo "Nothing here";
} 
```

我想你也可以修剪前导零。

# java - CodeCollaborator 错误：请参阅 'svn upgrade' 命令

> ID：14617102
> 
> 赞同：0
> 
> 时间：2013-01-31T01:41:10.077
> 
> 标签：java, svn, subversive

我想安装 CodeCollaborator 的工具来管理我开发中的代码，但是有一个安装错误我无法处理。

1.  我相信 CodeCollaborator 客户端安装成功。
2.  当我单击 CodeCollaborate 客户端中的添加按钮时，然后添加 CSM 配置成功。
3.  When chose the SCM Cofigration to Add Changes,it always show error as below:

    **初始化更改的文件时出错**

**原因：svn:E155036：请看 'svn upgarade' 命令**

**svn:E155036: 工作副本 'E:\woekplace\chunya' 太旧（格式 10，由 Subversion 1.6 创建）**

我认为错误是我的eclipse中**的Slik-Subversion-1.7.8-x64**和**Subersion**之间的版本导致的，但是无论我如何相互升级版本，错误一直存在。如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T01:56:17.660

`svn help upgrade`在 Windows 命令提示符（或Linux 终端）中键入会`svn --help upgrade`显示：

```
upgrade: Upgrade the metadata storage format for a working copy.
usage: upgrade [WCPATH...]

Local modifications are preserved.

Valid options:
  -q [--quiet]             : print nothing, or only summary information

Global options:
  --username ARG           : specify a username ARG
  --password ARG           : specify a password ARG
  --no-auth-cache          : do not cache authentication tokens
  --non-interactive        : do no interactive prompting
  --trust-server-cert      : accept SSL server certificates from unknown
                             certificate authorities without prompting (but only
                             with '--non-interactive')
  --config-dir ARG         : read user configuration files from directory ARG
  --config-option ARG      : set user configuration option in the format:
                                 FILE:SECTION:OPTION=[VALUE]
                             For example:
                                 servers:global:http-library=serf 
```

所以它告诉您需要升级**本地工作副本的元数据**，而不是升级 SVN 本身。您也可以从命令提示符或终端窗口执行此操作，使用`usage`上面示例中显示的语法。

# android - Galaxy Nexus 动画慢

> ID：14617108
> 
> 赞同：7
> 
> 时间：2013-01-31T01:42:11.517
> 
> 标签：android, android-4.0-ice-cream-sandwich

我已编辑[此代码](https://stackoverflow.com/questions/4938822/how-can-i-use-the-animation-framework-inside-the-canvas/4946893)以将 Rect 实例移出 onDraw 方法。我已经在几台设备上对其进行了测试。

```
public class BallBouncesActivity extends Activity {
    BallBounces ball;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        ball = new BallBounces(this);
        setContentView(ball);
    }
}

class BallBounces extends SurfaceView implements SurfaceHolder.Callback {
    GameThread thread;
    int screenW; //Device's screen width.
    int screenH; //Devices's screen height.
    int ballX; //Ball x position.
    int ballY; //Ball y position.
    int initialY ;
    float dY; //Ball vertical speed.
    int ballW;
    int ballH;
    int bgrW;
    int bgrH;
    int angle;
    int bgrScroll;
    int dBgrY; //Background scroll speed.
    float acc;
    Bitmap ball, bgr, bgrReverse;
    boolean reverseBackroundFirst;
    boolean ballFingerMove;

    Rect toRect1, fromRect1;
    Rect toRect2, fromRect2;

    //Measure frames per second.
    long now;
    int framesCount=0;
    int framesCountAvg=0;
    long framesTimer=0;
    Paint fpsPaint=new Paint();

    //Frame speed
    long timeNow;
    long timePrev = 0;
    long timePrevFrame = 0;
    long timeDelta;

    public BallBounces(Context context) {
        super(context);
        ball = BitmapFactory.decodeResource(getResources(), R.drawable.rocket); //Load a ball image.
        bgr = BitmapFactory.decodeResource(getResources(), R.drawable.sky_bgr); //Load a background.
        ballW = ball.getWidth();
        ballH = ball.getHeight();

        toRect1 = new Rect(0, 0, bgr.getWidth(), bgr.getHeight());
        fromRect1 = new Rect(0, 0, bgr.getWidth(), bgr.getHeight());
        toRect2 = new Rect(0, 0, bgr.getWidth(), bgr.getHeight());
        fromRect2 = new Rect(0, 0, bgr.getWidth(), bgr.getHeight());

        //Create a flag for the onDraw method to alternate background with its mirror image.
        reverseBackroundFirst = false;

        //Initialise animation variables.
        acc = 0.2f; //Acceleration
        dY = 0; //vertical speed
        initialY = 100; //Initial vertical position
        angle = 0; //Start value for the rotation angle
        bgrScroll = 0;  //Background scroll position
        dBgrY = 1; //Scrolling background speed

        fpsPaint.setTextSize(30);

        //Set thread
        getHolder().addCallback(this);

        setFocusable(true);
    }

    @Override
    public void onSizeChanged (int w, int h, int oldw, int oldh) {
        super.onSizeChanged(w, h, oldw, oldh);
        //This event-method provides the real dimensions of this custom view.
        screenW = w;
        screenH = h;

        bgr = Bitmap.createScaledBitmap(bgr, w, h, true); //Scale background to fit the screen.
        bgrW = bgr.getWidth();
        bgrH = bgr.getHeight();

        //Create a mirror image of the background (horizontal flip) - for a more circular background.
        Matrix matrix = new Matrix();  //Like a frame or mould for an image.
        matrix.setScale(-1, 1); //Horizontal mirror effect.
        bgrReverse = Bitmap.createBitmap(bgr, 0, 0, bgrW, bgrH, matrix, true); //Create a new mirrored bitmap by applying the matrix.

        ballX = (int) (screenW /2) - (ballW / 2) ; //Centre ball X into the centre of the screen.
        ballY = -50; //Centre ball height above the screen.
    }

    //***************************************
    //*************  TOUCH  *****************
    //***************************************
    @Override
    public synchronized boolean onTouchEvent(MotionEvent ev) {

        switch (ev.getAction()) {
            case MotionEvent.ACTION_DOWN: {
                ballX = (int) ev.getX() - ballW/2;
                ballY = (int) ev.getY() - ballH/2;

                ballFingerMove = true;
                break;
            }

            case MotionEvent.ACTION_MOVE: {
                ballX = (int) ev.getX() - ballW/2;
                ballY = (int) ev.getY() - ballH/2;

                break;
            }

            case MotionEvent.ACTION_UP:
                ballFingerMove = false;
                dY = 0;
                break;
            }
        return true;
    }

    @Override
    public void onDraw(Canvas canvas) {
        super.onDraw(canvas);

        //Draw scrolling background.
        fromRect1.set(0, 0, bgrW - bgrScroll, bgrH);
        toRect1.set(bgrScroll, 0, bgrW, bgrH);

        fromRect2.set(bgrW - bgrScroll, 0, bgrW, bgrH);
        toRect2.set(0, 0, bgrScroll, bgrH);

//        Rect fromRect1 = new Rect(0, 0, bgrW - bgrScroll, bgrH);
//        Rect toRect1 = new Rect(bgrScroll, 0, bgrW, bgrH);
//
//        Rect fromRect2 = new Rect(bgrW - bgrScroll, 0, bgrW, bgrH);
//        Rect toRect2 = new Rect(0, 0, bgrScroll, bgrH);

        if (!reverseBackroundFirst) {
            canvas.drawBitmap(bgr, fromRect1, toRect1, null);
            canvas.drawBitmap(bgrReverse, fromRect2, toRect2, null);
        }
        else{
            canvas.drawBitmap(bgr, fromRect2, toRect2, null);
            canvas.drawBitmap(bgrReverse, fromRect1, toRect1, null);
        }

        //Next value for the background's position.
        if ( (bgrScroll += dBgrY) >= bgrW) {
            bgrScroll = 0;
            reverseBackroundFirst = !reverseBackroundFirst;
        }

        //Compute roughly the ball's speed and location.
        if (!ballFingerMove) {
            ballY += (int) dY; //Increase or decrease vertical position.
            if (ballY > (screenH - ballH)) {
                dY=(-1)*dY; //Reverse speed when bottom hit.
            }
            dY+= acc; //Increase or decrease speed.
        }

        //Increase rotating angle
        if (angle++ >360)
            angle =0;

        //DRAW BALL
        //Rotate method one
        /*
        Matrix matrix = new Matrix();
        matrix.postRotate(angle, (ballW / 2), (ballH / 2)); //Rotate it.
        matrix.postTranslate(ballX, ballY); //Move it into x, y position.
        canvas.drawBitmap(ball, matrix, null); //Draw the ball with applied matrix.

        */// Rotate method two

        canvas.save(); //Save the position of the canvas matrix.
        canvas.rotate(angle, ballX + (ballW / 2), ballY + (ballH / 2)); //Rotate the canvas matrix.
        canvas.drawBitmap(ball, ballX, ballY, null); //Draw the ball by applying the canvas rotated matrix.
        canvas.restore(); //Rotate the canvas matrix back to its saved position - only the ball bitmap was rotated not all canvas.

        //*/

        //Measure frame rate (unit: frames per second).
         now=System.currentTimeMillis();
         canvas.drawText(framesCountAvg+" fps", 40, 70, fpsPaint);
         framesCount++;
         if(now-framesTimer>1000) {
                 framesTimer=now;
                 framesCountAvg=framesCount;
                 framesCount=0;
         }
    }

    @Override
    public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {
    }

    @Override
    public void surfaceCreated(SurfaceHolder holder) {
        thread = new GameThread(getHolder(), this);
        thread.setRunning(true);
        thread.start();
    }

    @Override
    public void surfaceDestroyed(SurfaceHolder holder) {
        boolean retry = true;
        thread.setRunning(false);
        while (retry) {
            try {
                thread.join();
                retry = false;
            } catch (InterruptedException e) {

            }
        }
    }

    class GameThread extends Thread {
        private SurfaceHolder surfaceHolder;
        private BallBounces gameView;
        private boolean run = false;

        public GameThread(SurfaceHolder surfaceHolder, BallBounces gameView) {
            this.surfaceHolder = surfaceHolder;
            this.gameView = gameView;
        }

        public void setRunning(boolean run) {
            this.run = run;
        }

        public SurfaceHolder getSurfaceHolder() {
            return surfaceHolder;
        }

        @Override
        public void run() {
            Canvas c;
            while (run) {
                c = null;

                //limit frame rate to max 60fps
                timeNow = System.currentTimeMillis();
                timeDelta = timeNow - timePrevFrame;
                if ( timeDelta < 16) {
                    try {
                        Thread.sleep(16 - timeDelta);
                    }
                    catch(InterruptedException e) {

                    }
                }
                timePrevFrame = System.currentTimeMillis();

                try {
                    c = surfaceHolder.lockCanvas(null);
                    synchronized (surfaceHolder) {
                       //call methods to draw and process next fame
                        gameView.onDraw(c);
                    }
                } finally {
                    if (c != null) {
                        surfaceHolder.unlockCanvasAndPost(c);
                    }
                }
            }
        }
    }
} 
```

如果您注意到，这里有测量帧速率的代码：

```
 now=System.currentTimeMillis();
     canvas.drawText(framesCountAvg+" fps", 40, 70, fpsPaint);
     framesCount++;
     if(now-framesTimer>1000) {
             framesTimer=now;
             framesCountAvg=framesCount;
             framesCount=0;
     } 
```

我在运行 Android 4.0 和 4.2 的两台 Galaxy Nexus 设备上都看到了这一点，大约是 22-24fps。在我运行 Android 2.2 的 HTC Desire 上，它更像是 60fps。

你还会注意到我没有在`onDraw`方法中分配任何东西。我也没有创建新`Paint`对象。我真的不明白这是如何运行的，所以，*在*我的 Galaxy Nexus 设备上运行速度要慢得多。有很多口吃，球移动得很慢。

有谁知道是否有我可以撤消的设置或在 Galaxy Nexus 上重新绘制的已知问题？这发生在运行 4.0 的 Galaxy Nexus*和*运行 4.2 的 Galaxy Nexus 上，所以我不确定它是否特定于操作系统。我已经在开发者选项中关闭了窗口和过渡动画。我是否强制进行 2D 加速并没有什么区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:37:29.300

您是否在应用程序中测试过 android:hardwareAccelerated="true|false" 标志？

Android 开发文档：http: [//developer.android.com/guide/topics/graphics/hardware-accel.html](http://developer.android.com/guide/topics/graphics/hardware-accel.html)

您可以在 setContentView 之前添加：

```
`if (android.os.Build.VERSION.SDK_INT >= 11) {
   getWindow().setFlags(WindowManager.LayoutParams.FLAG_HARDWARE_ACCELERATED, WindowManager.LayoutParams.FLAG_HARDWARE_ACCELERATED);
}`
```

* * *

 `## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T18:53:36.220

你的 targetSdk 设置是什么？

如果 targetSdk 设置为 8 (2.2)，但您在 4.x 设备 (15+) 上运行它，则 4.x 设备将以兼容模式运行，这意味着它将虚拟化所有调用以便它们返回就像它们在版本 8 设备上运行一样。

这种虚拟化可能解释了一些缓慢的原因。尝试将 targetSdk 更改为 17（对于您的 4.2 设备），看看它是否有所作为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T21:19:38.183

我一直在考虑这个问题，因为我在带有 Surfaceview 的 Nexus 10 上仍然存在性能问题，就像我之前所说的那样，我通过去除油漆对象的使用大大提高了我的性能，这是一个很长的镜头，因为你只是使用一个，但您可以尝试从 onDraw() 中删除文本绘图部分，看看它是否对您的绘图速度有任何影响。

除此之外，我认为这确实是一个试图确定问题的案例。

我注意到即使我从等式中完全删除了我的 onDraw 和 Logic 更新方法，有时仍然需要长达 25 毫秒才能锁定和解锁/发布画布！因此，问题实际上可能不在于 onDraw 方法 - 试一试，从 Run() 方法中注释 onDraw() 并查看您获得的速度（使用日志记录到 Logcat 来查看数字，记住具有讽刺意味的是，在屏幕上显示帧/时间计数可能会影响您正在测量的内容）。:-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-11T13:10:02.790

我在 Kindle Fire、Sony Xperia Z 和三星 S4（都使用 android 4.2）上经历过同样的事情。

修复方法是：在 App Manifest 文件中删除“android:supportsRtl="true"”。

希望它能节省您的时间。在得到它之前，我花了 4 个小时进行测试和合并。`

# node.js - yeoman 如何设置标题（.htaccess？）

> ID：14617111
> 
> 赞同：7
> 
> 时间：2013-01-31T01:42:39.157
> 
> 标签：node.js, yeoman, gruntjs

默认情况下，运行 *yeoman 服务器*似乎无法识别 .htaccess 文件。是否有额外的步骤可以读取 .htaccess 文件？

以下是我未注释的行，重启后对设置标题没有明显影响：

```
    #------------------------------------------------ ---------------------
    # 跨域 AJAX 请求
    #------------------------------------------------ ---------------------

    # 服务跨域 Ajax 请求，默认禁用。
    # enable-cors.org
    # code.google.com/p/html5security/wiki/CrossOriginRequestSecurity

    <IfModule mod_headers.c>
      标头集 Access-Control-Allow-Origin "*"
    </IfModule>

```

或者也许正确的问题是在运行 yeoman 服务器时如何设置标头？还有另一种选择，也许在 Gruntfile.js 中？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-31T10:09:04.290

`grunt server`只是一个 Node.js[连接](https://github.com/senchalabs/connect)服务器，不支持 .htaccess

虽然由于[grunt-contrib-connect](https://github.com/gruntjs/grunt-contrib-connect)支持自定义中间件，但您可以将其添加到 Gruntfile.js 中：

```
var corsMiddleware = function(req, res, next) {
  res.setHeader('Access-Control-Allow-Origin', '*');
  res.setHeader('Access-Control-Allow-Methods', 'GET,PUT,POST,DELETE');
  res.setHeader('Access-Control-Allow-Headers', 'Content-Type');
  next();
}

grunt.initConfig({
  connect: {
    server: {
      options: {
        middleware: function(connect, options) {
          return [
            // Serve static files
            connect.static(options.base),
            // Make empty directories browsable
            connect.directory(options.base),
            // CORS support
            corsMiddleware
          ];
        }
      }
    }
  }
}); 
```

# ios - 适用于 iOS 的 Google Maps SDK - 交付时间范围

> ID：14617112
> 
> 赞同：1
> 
> 时间：2013-01-31T01:42:47.333
> 
> 标签：ios, google-maps, google-maps-sdk-ios

我想知道是否有人请求并实际收到了 Google Maps iOS SDK 的 API 密钥。我在一个多月前提出了自己的请求，尽管有一个可以立即使用新 SDK 的发货应用程序（并且由于*Apple 的*地图不准确而收到一些负面反馈），但仍然没有。

是否有人获得了 Google iOS SDK 的 API 密钥，如果有，您需要等待多长时间以及您的应用程序的情况如何（即您是否已经部署了一个应用程序，它有多受欢迎等.)？

我希望，如果我们能够解开 Google 用来颁发这些密钥的标准，我们就可以让有待处理请求的人对他们的请求何时被批准 做出一个*大概的估计。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T06:44:11.680

[正如我在这个答案](https://stackoverflow.com/questions/14346018/how-long-does-google-process-requests-for-api-key-of-google-maps-sdk-for-ios)中提到的，我在 12 月 13 日申请了访问权限，然后收到一封电子邮件，说我在 12 月 17 日获得了批准。

我在应用商店有一个应用程序，它曾经使用谷歌地图，但是当 iOS 6 出来时我不得不删除地图。不知道这是否与它有关，或者我只是幸运，因为我碰巧在[谷歌宣布新的 SDK 后几乎立即听说了 SDK](http://googlegeodevelopers.blogspot.com.au/2012/12/a-new-way-to-add-google-maps-to-your.html)，我立即申请了访问权限。

当我收到一封说我已获得批准的电子邮件时，我被添加到了一个 google 组 - 这就是 Google 发送更新通知的方式。从外观上看，该组只有 77 名成员，所以如果这等于获得访问权限的人数，我猜谷歌推出访问权限的速度相当缓慢。

**更新：**

截至 2 月 21 日，SDK 似乎对所有人开放。

# objective-c - 从 MacRuby 中的自定义初始化程序调用不同的超类 init 方法

> ID：14617115
> 
> 赞同：3
> 
> 时间：2013-01-31T01:43:28.233
> 
> 标签：objective-c, initialization, macruby, rubymotion

在 Objective C 中，自定义的 init 方法必须调用超类的指定初始化程序。考虑以下用于 NSView 子类的自定义 init 方法：

```
- (void)initWithFrame:(CGRect)aFrame andName:(NSString *)aName {
    if(self = [super initWithFrame:aFrame]){
        //set up object
    }
} 
```

然而，MacRuby 只提供了`super`关键字，它只是尝试在超类中调用相同的方法。然而，由于这是一个自定义初始化程序，超类没有这样的方法。

解决这个问题的标准方法是什么？我确实看到了这个问题：[MacRuby custom initializers](https://stackoverflow.com/questions/4352575/macruby-custom-initializers)但我不能说我非常了解答案，它似乎也不是一些被广泛接受的解决方案。由于 MacRuby 现在比那篇文章写的时候早了几年，我希望现在有一个更清晰、标准的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T18:44:31.800

在 ruby​​motion 中（我认为 MacRuby 也有这种行为）有两种类型的类：纯 Ruby，使用`initialize`，以及派生自objective-c 类的类。最好不要将两者混用。如果你要继承一个objective-c 类，你应该使用一个`init`方法。你的`initialize`方法永远不会被调用！

这是因为`NSObject##new`方法调用`init`, 而不是`initialize`（实际上即使这是过于简单化了，但抽象是有效的）。

您上面的示例令人困惑，因为您正在调用`init`而不是`initWithFrame`. 您必须调用父类的指定初始化程序 - 在这种情况下，使用`super`.

如果您调用的初始化程序（在这种情况下，`init`, 调用*您的*初始化程序，那么您使用的是错误的初始化程序 - 在这种情况下无法逃避递归循环。

所以你不能完全选择调用父级的方法。但是，您可以使用自己的 init 方法：

```
def initWithTitle(title)
  initWithFrame(CGRectZero)
  @title = title
  return self
end 
```

我会这样写这个方法：

```
def initWithTitle(title)
  initWithFrame(CGRectZero).tap do
    @title = title
  end  # that way I never forget to return self
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T19:41:05.587

如果我理解正确，您想在 ruby​​motion 中创建自己的自定义初始化方法，但仍调用原始的 init 方法。

我经常做这样的事情：

```
#custom initializer
def initialize
 self.init # <--calls 'init' from parent

 #stuff happens here
end 
```

无需调用 super，只需调用 init 方法即可，因为您的对象在达到初始化时已被分配。如果你有变量要传递，那么将它们传递给任何被认为是初始化器的方法。

（编辑：可能需要自我。）

# jquery - jquery onclick 按钮按下了两次

> ID：14617131
> 
> 赞同：0
> 
> 时间：2013-01-31T01:46:01.580
> 
> 标签：jquery, jquery-ui

我有一个隐藏一个 div 并在下面显示另一个“点击”的按钮是伪代码，但希望足以解释问题。

问题是如果用户在幻灯片和动画完成之前按下按钮（比如快速按下它两次），它会显示旧的和新的 div。不知何故，我需要禁用点击，直到动画完成

谢谢你的帮助

```
$( '#edit-buttons' ).on("click", "div", function(event){

        $('#'+currentDiv).slideUp('fast', function() {
            $('#'+nextDiv).animate({ left: 'show', opacity: 'show' }, 'slow');
        });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T01:48:54.710

您可以使用布尔值来阻止函数调用。

```
var block = false;

$( '#edit-buttons' ).on("click", "div", function(event){
     if(!block){
        block = true;
        $('#'+currentDiv).slideUp('fast', function() {
            $('#'+nextDiv).animate({ left: 'show', opacity: 'show' }, 'slow',function(){
               block = false;
            });
        });
      }
}); 
```

# python - 为什么 pip 安装我的包的旧版本？

> ID：14617136
> 
> 赞同：98
> 
> 时间：2013-01-31T01:46:33.170
> 
> 标签：python, pip, setuptools

我刚刚将我的包的新版本上传到 PyPi (1.2.1.0-r4)：我可以下载 egg 文件并使用 easy_install 安装它，并且版本正确检查。但是当我尝试使用 pip 安装时，它会安装 1.1.0.0 版本。即使我明确指定要使用的版本`pip install -Iv tome==1.2.1.0-r4`，我也会收到以下消息：`Requested tome==1.2.1.0-r4, but installing version 1.1.0.0`，但我不明白为什么。

我仔细检查`parse_version`并确认 1.2.1 上的版本字符串大于 1.1.0 上的版本字符串，如下所示：

```
>>> from pkg_resources import parse_version as pv
>>> pv('1.1.0.0') < pv('1.2.1.0-r4')
True
>>> 
```

那么知道为什么它选择安装 1.1.0 吗？

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2013-06-17T18:09:27.747

这是一个很好的问题。我花了很长时间才弄清楚。这是对我有用的解决方案：

显然，如果`pip`可以找到包`pip`的本地版本，将更喜欢本地版本而不是远程版本。我什至断开了我的计算机与互联网的连接并再次尝试——当`pip`仍然成功安装包时，甚至没有抱怨，来源显然是本地的。

就我而言，真正令人困惑的部分是在[pypi](https://pypi.python.org/pypi)`pip`上找到了新版本，报告了它们，然后继续重新安装旧版本……啊。此外，它没有告诉我它在做什么，以及为什么。

那么我是如何解决这个问题的呢？

你可以`pip`使用`-v`标志给出详细的输出......但一个是不够的。我 RTFM 编辑了帮助，它说你可以做`-v`多次，最多 3 次，以获得更详细的输出。所以我做了：

```
pip install -vvv <my_package> 
```

然后我查看了输出。一行引起了我的注意：

> /tmp/pip-build-root/ 中的源代码版本为 0.0.11，满足要求 <my_package>

我删除了该目录，之后`pip`从 pypi 安装了最新版本。

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2017-05-16T18:18:53.403

尝试使用以下命令再次强制下载软件包：

```
pip install --no-cache-dir --upgrade <package> 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2013-08-07T14:22:25.823

感谢[Marcus Smith](https://github.com/qwcode)作为 pip 的维护者所做的出色工作，这已在 2013 年 7 月 23 日发布的 pip 1.4 版中得到修复。

此版本[更改日志](http://www.pip-installer.org/en/latest/news.html#changelog)中的相关信息

> 修复了一些与清理和不重用构建目录相关的问题（#413、#709、#634、#602 和 #939）。（拉#865、#948）

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2013-03-03T19:25:42.913

我在[这里](http://python.6.n6.nabble.com/using-pip-to-install-an-specific-older-version-td4679821.html)发现pip 中有一个已知的错误，如果有一个带有未打包源的构建目录，它不会检查版本。我已经在我的麻烦包上检查了这一点，并在从构建目录 pip 删除其源后安装了所需的版本。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2014-02-25T12:16:29.883

如果您使用的`pip`版本附带一些分发包（例如 Ubuntu python-pip），您可能需要安装更新的`pip`版本：

更新`pip`到最新版本：

```
sudo pip install -U pip 
```

如果是“virtualenv”，跳过“sudo”：

```
pip install -U pip 
```

如果您的 shell 在更新`-bash: /usr/bin/pip: No such file or directory`后报告类似内容，则可能需要以下命令：`pip`

```
hash -d pip 
```

现在像往常一样安装你的包：

```
pip install -U foo 
```

或者

```
pip install foo==package.version.here 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2013-02-22T16:40:24.620

将 pika 0.9.5 更新到 0.9.8 时遇到了同样的问题。唯一可行的方法是从 tarball 安装：`pip install https://pypi.python.org/packages/source/p/pika/pika-0.9.8.tar.gz`.

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-09-25T21:48:51.457

在我的情况下，使用的 python 版本（3.4）不满足 Django 2.1 依赖项要求（python >= 3.5）。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-10-26T23:02:37.683

对于我的情况，我必须删除`.pip`主目录中的文件夹，然后才能获得多个库的更高版本。请注意，这是在 linux 上。

```
pip --version
pip 18.1 from /usr/lib/python2.7/site-packages/pip (python 2.7)
virtualenv --version
15.1.0 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-12-26T17:06:27.977

以防万一其他人在升级**torchtext**（或可能任何其他`torch`库）时遇到麻烦：

尽管[https://pypi.org/project/torchtext/](https://pypi.org/project/torchtext/)声明您可以运行，但`pip install torchtext`我必须`torch`通过指定`--find-links`aka来类似地安装它`-f`：

```
pip install torchtext===0.8.1 -f https://download.pytorch.org/whl/torch_stable.html 
```

令我恼火的是 PyCharm 将我指向新版本，但在尝试升级到它时找不到它。我猜 PyCharm 使用它自己的机制来发现新版本。然后，在后台调用时`pip`，它没有找到没有`--find-links`选项的新版本。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-07-11T20:31:12.723

我发现如果您使用微版本，pip 似乎无法识别它们。例如，我们无法升级 1.9.9.1 版本。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-11-15T15:36:26.957

就我而言，我正在 pip 安装来自 Artifactory 的 .tar.gz 包，我对其进行了很多更新。为了覆盖我缓存的 Python 文件并始终获取/安装我能够运行的最新版本：

```
pip install --no-cache-dir --force-reinstall <path/to/tar.gz> 
```

您应该会看到重新下载任何必要的文件并安装这些文件，而不是使用本地缓存。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-04-03T05:13:03.643

在我的例子中，有人用 python2 发布了一个包的最新版本，所以试图`pip3 install`抓住一个用 python3 构建的旧*版本*。

调试时要检查的方便事项：

*   如果`pip install`声称无法找到版本，请查看是否`pip search`可以看到它。
*   看看 pypi repo 上的“下载文件”部分——文件名可能表明出了什么问题（在我的例子中，我看到`-py2-`那里很清楚）。
*   正如其他人所建议的那样，尝试运行`pip install --no-cache-dir`以防 pip 不打扰询问互联网，因为它已经在本地获得了您的答案。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-06-11T19:48:43.313

我在 PyCharm 的 Git 选项卡下隐藏了正在安装的未版本控制文件，`pip install .`即使我在其他任何地方都看不到这些文件。

花了很长时间才找到它，发布这个希望它会帮助其他人。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-09-23T17:17:55.137

如果您需要包裹的路径，请执行`pip -v list`. 使用 pip -e 时的示例见相关帖子 [为什么我的 python 库的旧版本的包是使用 pip -e 自行安装的？](https://stackoverflow.com/questions/69303363/why-is-an-old-version-of-a-package-of-my-python-library-installing-by-itself-wit/69304352#69304352)

# jsp - JSTL 选择标签无法正常工作

> ID：14617141
> 
> 赞同：1
> 
> 时间：2013-01-31T01:47:15.187
> 
> 标签：jsp, servlets, jstl

我有一个 servlet S，它从 JSP A 中捕获选择字段选项值的请求参数并将其存储在请求范围内。

```
String test = request.getParameter("option");
    request.setAttribute("select",test); 
```

现在这个 servlet S 在处理后再次将我重定向到同一个 JSP A，现在在 JSP AI 中有相同的选项字段，而且我有类似的代码，

```
 <select name="option">
     <c:choose>
      <c:when test="${select} == All">
      <option id="id" class="cl" value="All" selected>Items</option>                        
    </c:when>
    <c:otherwise>
     <option id="id" class="cl" value="All">All  Items</option>                        
    </c:otherwise>
     </c:choose>
   </select> 
```

但是由于某些原因，代码永远不会进入 c:when 并且它直接进入 else 部分。

虽然我广泛使用了 JSTL，但由于某些原因，我无法解决这个问题。我知道请求范围中存在价值，并且可以通过 c:out 标记看到它。我们是否有可能再次将帖子返回到同一页面并再次使用新值进行同一会话？已经在这个问题上花了一天时间，所以需要第三只眼来看看我是否错过了一些愚蠢的东西？欣赏是否有人可以看看。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T02:02:18.903

这是错误的。

```
<c:when test="${select} == All"> 
```

整个表达式必须进入内部`${}`，并且需要引用字符串。

```
<c:when test="${select == 'All'}"> 
```

### 也可以看看：

*   [我们的 EL 维基页面](https://stackoverflow.com/tags/el/info)
*   [Java EE 6 教程 - EL 表达式示例](http://docs.oracle.com/javaee/6/tutorial/doc/bnaim.html)

* * *

**与具体问题无关**，您的具体功能需求可以以更简单的方式解决，而 servlet 不需要复制参数：

```
<select name="option">
    <option id="id" class="cl" value="All" ${param.option == 'All' ? 'selected : ''}>All Items</option>                        
</select> 
```

### 也可以看看：

*   [将表单提交到 Servlet 后，如何在 JSP 中保留 HTML 表单字段值？](https://stackoverflow.com/questions/3937624/how-can-i-keep-jsp-form-fields-values-in-the-form-after-submitting-the-form/3937783#3937783)
*   [我们的 Servlets wiki 页面](https://stackoverflow.com/tags/servlets/info)

# r - Rpy2 - 数据框列表列表

> ID：14617147
> 
> 赞同：2
> 
> 时间：2013-01-31T01:48:13.463
> 
> 标签：r, python-2.7, rpy2

我试图弄清楚如何使用python将文件从XML文件解析为数据结构以传递给R。

我需要在 R 中创建的是数据框列表列表：

```
Nodes = data.frame()
Edges = data.frame()

NetworkCompListA = list()
NetworkCompListA[['Nodes']] = Nodes
NetworkCompListA[['Edges']] = Edges

Networks = list()
Networks[['NetA']] = NetworkCompListA
Networks[['NetB']] = NetworkCompListB 
```

我知道如何从 Rpy2 文档中的示例创建数据框。

```
import rpy2.rlike.container as rlc
od = rlc.OrdDict([('value', robjects.IntVector((1,2,3))),
                      ('letter', robjects.StrVector(('x', 'y', 'z')))])
df = robjects.DataFrame(od) 
```

如何将“df”插入到列表中，然后将该列表插入到 python 中的另一个列表中，然后将其写入 rdata 文件以加载到 R 的另一个实例中？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T03:19:19.567

该类`ListVector`需要一个实现的对象`iteritems()`（例如 a`dict`或 a `OrderedDict`）。请注意，在 R 中，data.frames 只是具有（松散）约束的列表，即所有元素都应该是相同长度的向量（或者可以接受具有匹配行数的矩阵），并且具有行名和列名（列表的名称是列名）。

```
from rpy2.robjects.vectors import ListVector, DataFrame

# rpy2's OrdDict was added because there was no ordered dict
# in Python's stdlib. It should be gone by rpy2-2.5
from collections import OrderedDict

od = OrderedDict((('a', 1), ('b', 2)))
df = DataFrame(od)

od_l = OrderedDict((('df', df),))
df_in_list = ListVector(od_l)
df_in_list_in_list = ListVector(OrderedDict((('df_in_list', df_in_list),)) 
```

# java - 我无法在 Eclipse 中运行这个 java 文件

> ID：14617148
> 
> 赞同：0
> 
> 时间：2013-01-31T01:48:15.980
> 
> 标签：java

每当我尝试在 Eclipse 中将其作为 Java 项目运行时，什么都没有发生，但如果我把它全部放在“public static void main(String[] args)”中，那么它可以工作，但在视频中不是这样我在学习

```
 package Indeed;

import static org.lwjgl.opengl.GL11.*;

import java.util.ArrayList;
import java.util.List;
import java.util.Random;

import org.lwjgl.opengl.*;
import org.lwjgl.*;
import org.lwjgl.input.Mouse;
import org.lwjgl.input.Keyboard;    

public class InputDemo {

public static void main(String[] args) {

}

List<Box> shapes = new ArrayList<Box>(16);

public InputDemo() {

    try {
        Display.setDisplayMode(new DisplayMode(640, 480));
        Display.setTitle("Hello, LWJGL!");
        Display.create();
    } 
    catch (LWJGLException e) 
    {

        e.printStackTrace();
    }

    shapes.add(new Box(15, 15));
    shapes.add(new Box(100, 150));

    //Initialization code OpenGL
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glOrtho(0, 640, 480, 0, 1, -1);
    glMatrixMode(GL_MODELVIEW);

    while(!Display.isCloseRequested())
    {
        //Render
        glClear(GL_ACCUM_BUFFER_BIT);

        if(Keyboard.isKeyDown(Keyboard.KEY_ESCAPE))
        {
            Display.destroy();
            System.exit(0);
        }

        for(Box box : shapes)
        {
            box.draw();
        }

        Display.update();
        Display.sync(60);
    }

    Display.destroy();
}

private static class Box
{
    public int x, y;
    private float red, blue, green;
    public boolean selected = false;

    Box (int x, int y)
    {
        this.x = x;
        this.y = y;

        Random rand = new Random();
        red = rand.nextFloat(); 
        blue = rand.nextFloat();
        green = rand.nextFloat();
    }

    void update(int dx, int dy)
    {
        x += dx;
        y += dy;
    }

    boolean inBounds(int mouseX, int mouseY)
    {
        if(mouseX > x && mouseX < x + 50 && mouseY > y && mouseY < y + 50)
        {
            return true;
        }
        else
        {
            return false;
        }

    }

    void RandomColor()
    {
        Random rand = new Random();
        red = rand.nextFloat(); 
        blue = rand.nextFloat();
        green = rand.nextFloat();
    }

    void draw()
    {
        glColor3f(red, green, blue);

        glBegin(GL_QUADS);
        glVertex2f(x, y);
        glVertex2f(x + 50, y);
        glVertex2f(x+ 50, y+ 50);
        glVertex2f(x, y + 50);
        glEnd();
    }
}

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T01:49:51.747

您不需要将其全部放入`main`函数中，但请注意，只有放入其中的代码才会运行。如果您的视频另有声明，那就是在**骗您**。

您可以从构造函数中调用所有代码。理想情况下，您会将其移至主要功能。如果您选择保持原样，则需要创建该类的一个实例才能执行它。所以你可以添加`InputDemo demo = new InputDemo();`到你的主要功能中，这可能就足够了..

# php - 在php联系表单中捕获用户的IP地址

> ID：14617156
> 
> 赞同：3
> 
> 时间：2013-01-31T01:49:06.360
> 
> 标签：php

我正在尝试从 php 联系表单中获取用户 IP 地址，我有以下代码，但我想知道以这种方式使用 clean_string 向自己发送 IP 地址是否有效？

```
<?php

session_start();

if(isset($_POST['fullname'])) {

include 'freecontact2formsettings.php';

function died($error) {
    echo "Sorry, but there were error(s) found with the form you submitted. ";
    echo "These errors appear below.<br /><br />";
    echo $error."<br /><br />";
    echo "Please go back and fix these errors.<br /><br />";
    die();
}

if(!isset($_POST['fullname']) ||
    !isset($_POST['Address1']) ||
    !isset($_POST['city']) ||   
    !isset($_POST['Postcode']) ||
    !isset($_POST['contactnum']) ||
    !isset($_POST['emailaddress'])

    ) {
    died('Sorry, there appears to be a problem with your form submission.');        
}
$ip = $_SERVER['HTTP_CLIENT_IP']; 
$ansb0_from = $_POST['fullname']; // required
$ansb1_from = $_POST['Address1']; // required
$ansb3_from = $_POST['city']; // required   
$ansb4_from = $_POST['Postcode']; // required
$ansb5_from = $_POST['contactnum']; // required
$ansb6_from = $_POST['emailaddress']; // required

$error_message = "";

$email_message = "PHP CONTACT FORM:\r\n";

function clean_string($string) {
  $bad = array("content-type","bcc:","to:","cc:");
  return str_replace($bad,"",$string);
}

$email_message .= "Forename: ".clean_string($ansb0_from)."\r\n";
$email_message .= "Address 1: ".clean_string($ansb1_from)."\r\n";
$email_message .= "City: ".clean_string($ansb3_from)."\r\n";
$email_message .= "Postcode: ".clean_string($ansb4_from)."\r\n";
$email_message .= "Contact Number: ".clean_string($ansb5_from)."\r\n";
$email_message .= "Email Address: ".clean_string($ansb6_from)."\r\n";
$email_message .="IP Address: ".clean_string($ip)."\n\n"; 

$headers = 'From: '.$email_from."\r\n".
'Reply-To: '.$email_from."\r\n" .
'X-Mailer: PHP/' . phpversion();
mail($email_to, $email_subject, $email_message, $headers);
header("Location: $thankyou");
?>
<script>location.replace('<?php echo $thankyou;?>')</script>
<?php
}
die();
?> 
```

还，

```
$ip = $_SERVER['HTTP_CLIENT_IP']; 
```

是在联系表单脚本页面上，而不是用户输入信息的实际 form.php，我认为这就是我出错的地方吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-31T01:52:23.437

您不希望表单本身包含 IP。这样它就可以被显示、编辑和弄乱。相反，只需使用以下命令在服务器端捕获它：

`$_SERVER['REMOTE_ADDR'];`

顺便说一句，谷歌搜索这个问题应该返回十亿个有效的结果。只是一个快速的提醒。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T01:53:33.077

您想同时检查`$_SERVER["REMOTE_ADDR"]`和`$_SERVER["HTTP_X_FORWARDED_FOR"]`，因为如果用户位于代理服务器后面，则后者可能是必需的。

您可以在此处阅读更多信息：[https ://stackoverflow.com/a/3003233/666468](https://stackoverflow.com/a/3003233/666468)

# python - 如何将 ddbmock 与 dynamodb-mapper 一起使用？

> ID：14617160
> 
> 赞同：3
> 
> 时间：2013-01-31T01:49:22.463
> 
> 标签：python, testing, mocking, boto, amazon-dynamodb

有人可以解释一下如何设置[dynamodb_mapper](http://pypi.python.org/pypi/dynamodb-mapper)（连同[boto](https://github.com/boto/boto)？）以使用带有 sqlite 后端的 ddbmock 作为[Amazon](http://pypi.python.org/pypi/ddbmock/1.0.1) [DynamoDB](http://aws.amazon.com/dynamodb/) -replacement 来进行功能测试吗？

现在，我已经尝试了“普通”boto，并通过在本地启动 ddbmock 服务器并使用 boto 连接，设法让它与 ddbmock（使用 sqlite）一起工作：

```
db = connect_boto_network(host='127.0.0.1', port=6543) 
```

..然后我使用 db 对象对数据库进行所有操作。但是，dynamodb_mapper 使用这种方式来获取数据库连接：

```
conn = ConnectionBorg() 
```

据我了解，它使用 boto 的默认方式连接（真正的）DynamoDB。所以基本上我想知道是否有一种（首选？）方法让 ConnectionBorg() 连接到我的本地 ddbmock 服务器，就像我在上面对 boto 所做的那样？感谢您的任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T17:12:40.400

## 图书馆模式

在库模式而不是服务器模式下：

```
import boto
from ddbmock import config
from ddbmock import connect_boto_patch

# switch to sqlite backend
config.STORAGE_ENGINE_NAME = 'sqlite'
# define the database path. defaults to 'dynamo.db'
config.STORAGE_SQLITE_FILE = '/tmp/my_database.sqlite'

# Wire-up boto and ddbmock together
db = connect_boto_patch() 
```

通过 boto 对 dynamodb 服务的任何访问都将在后台使用 ddbmock。

## 服务器模式

如果您仍然想在服务器模式下使用 ddbmock，我会尝试`ConnectionBorg._shared_state['_region']`在测试设置代码的真正开头进行更改：

```
ConnectionBorg._shared_state['_region'] = RegionInfo(name='ddbmock', endpoint="localhost:6543") 
```

据我了解，通过`ConnectionBorg`这些行之后的任何实例对 dynamodb 的任何访问都将使用 ddbmock 入口点。

这就是说，我从未测试过它。我会确保 ddbmock 的作者对此进行更新。

# sql - Oracle - 为什么这个分页代码不使用 stopkey 优化

> ID：14617161
> 
> 赞同：1
> 
> 时间：2013-01-31T01:49:25.217
> 
> 标签：sql, oracle, oracle11g, sql-execution-plan

我遇到了一个关于分页查询和 11G 上的 stopkey 优化的奇怪情况（我已经能够在完整的 11G 和 XE 安装上重现）。我正在使用alexa top 1M 站点作为测试数据库，其中（id，url，page）作为列，id 列被索引。以下查询：

```
SELECT * FROM (
  SELECT raw_sql_.*, rownum raw_rnum_
  FROM (select id, url, page from alexa_data order by id asc) raw_sql_
)
WHERE raw_rnum_ between 800001 and 800010; 
```

生成此执行计划：

![在此处输入图像描述](../Images/33eae2851336723db8bf2049f78a64ee.png)

虽然这个 SQL：

```
SELECT * FROM (
  SELECT raw_sql_.*, rownum raw_rnum_
  FROM (select id, url, page from alexa_data order by id asc) raw_sql_
)
WHERE raw_rnum_ >= 800001 and rownum <= 10; 
```

使用 STOPKEY 优化生成执行计划：

![在此处输入图像描述](../Images/92d8f0b2e42baf63dfd03be2387aee09.png)

两者之间的唯一区别是`WHERE raw_rnum_ between 800001 and 800010;` vs `WHERE raw_rnum_ >= 800001 and rownum <= 10`。

从我可以看到这些查询的行为完全相同。有谁知道为什么第一个查询中缺少 stopkey 优化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T02:09:26.183

我不会认为它是一个错误。

我会假设优化器无法将您`raw_rnum_ between 800001 and 800010`深入到子查询中，因为它会导致`where rownum >800001 and rownum < 800010`，这[显然](http://asktom.oracle.com/pls/apex/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:948366252775)没有任何意义。

因此，它将您`raw_rnum_`视为纯数字列，可能无法假设初始谓词 on`raw_rnum_`只会过滤掉 10 行。

# css - 锚背景图像 - 锚文本覆盖图像

> ID：14617162
> 
> 赞同：1
> 
> 时间：2013-01-31T01:49:28.140
> 
> 标签：css

我有以下 CSS，它在锚点中显示背景图像。问题是链接文本显示在图像上。有任何想法吗？

```
a.interactive {
background:url(../images/icons/icon_interactive.png) left center no-repeat;
padding-right:50px;
display:inline-block;    
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T02:19:57.970

我添加了 padding-left ，将文本移到了右边......

```
a.interactive {
background:url(../images/icons/icon_interactive.png) left center no-repeat;
padding-left:30px;
height:25px;
width:25px;
display:inline-block;    
text-decoration: none;
vertical-align:text-center;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T02:46:26.490

只需添加所需的 padding-left ？如果图像是 30 像素，则执行类似操作`padding-left:32px'`，它将文本推送到图像的右侧。

# javascript - 下拉菜单上的Javascript警报？

> ID：14617166
> 
> 赞同：0
> 
> 时间：2013-01-31T01:50:18.147
> 
> 标签：javascript, forms, drop-down-menu, alert

我的表单上有一个 javascript 警报 - [http://investing.uglyopportunities.com/opportunity/](http://investing.uglyopportunities.com/opportunity/)我的 javascript 函数在我的表单上正常工作。除了我还希望 javascript 在用户没有从两个下拉菜单中的任何一个中选择时发出警报。我真的没有太多使用 javascript 的经验，所以请记住这一点！这是我当前的代码。我真的很感激任何帮助

```
<script type="text/javascript">// <![CDATA[
function validateForm() {
    var a = document.forms["myform"]["inf_field_FirstName"].value;
    var b = document.forms["myform"]["inf_field_Email"].value;
    var c = document.forms["myform"]["inf_field_Phone1"].value;
    var e = document.forms["myform"]["inf_field_City"].value;
    var f = document.forms["myform"]["inf_field_State"].value;
    var g = document.forms["myform"]["inf_field_PostalCode"].value;

    if (a == null || a == "" || a == "First Name Here") {
        alert("Please enter your First Name!");
        return false;
    }
    if (c == null || c == '' || c == "Enter Your Phone Here" || c.length < 9) {
        alert("Please insert your phone number!");
        return false;
    }
if (e == null || e == '' ||e == "City") {
        alert("Please insert your city");
        return false;
    }

    if (f == null || f == '' || f == "State") {
        alert("Please insert your state ");
        return false;
    }

if (g == null || g == '' ||g == "Postal Code" || c.length < 5) {
        alert("Please insert your postal code");
        return false;
    }

    var emailRegEx = /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i;
    if (document.myform.inf_field_Email.value.search(emailRegEx) == -1) {
        alert("Please enter a valid email address.");
        return false;
    }
}
// ]]>
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T01:56:44.060

```
if(document.getElementById('inf_custom_LevelofInterest').value == '' || document.getElementById('inf_custom_Doyouhavemoneytoinvest').value == ''){
alert('please select ...');
return false;
} 
```

# highcharts - 在 IE7 上显示图表？

> ID：14617174
> 
> 赞同：0
> 
> 时间：2013-01-31T01:51:17.143
> 
> 标签：highcharts

我在 IE 7 上显示我由 Highstock 设计的图表时遇到了一些问题。

当我尝试设计图表并在 Chrome 上查看时，它没有任何问题。

这是我想看到的图表。

```
http://211.47.191.60/temp/Cap_origin_from_chrome 
```

但是，当我尝试在 IE 7 上查看它时，它显示如下。

```
http://211.47.191.60/temp/Cap_from_IE7 
```

这是我使用 Fiddle 设计的 javascript 源代码。

```
$(function () {
// Create the chart
window.chart = new Highcharts.StockChart({
    chart: {
        renderTo: 'container',
        type: 'areaspline',
        backgroundColor: '#FFFFFF',
        shadow: true
    },

    credits: {
        enabled: false
    },

    rangeSelector: {
        buttons: [{
            type: 'day',
            count: 1,
            text: '1D'
        }, {
            type: 'day',
            count: 15,
            text: '2W'
        }, {
            type: 'month',
            count: 1,
            text: '1M'
        }, {
            type: 'month',
            count: 3,
            text: '3M'
        }, {
            type: 'month',
            count: 6,
            text: '6M'
        }, {
            type: 'year',
            count: 1,
            text: '1Y'
        }, {
            type: 'all',
            text: '전체'
        }],
        inputStyle: {
            color: '#039'
        },
        labelStyle: {
            color: 'silver'
        },
        selected: 1
    },

    navigator: {
        enabled: false
    },

    xAxis: {
        //categories: ['1회차', '2회차', '3회차', '4회차', '5회차', '6회차', '7회차'], // 동적으로 늘려야 함
        showFirstLabel: false,
        showLastLabel: true,
        tickPixelInterval: 150,
        tickColor: 'green',
        tickLength: 10,
        tickWidth: 2,
        tickPosition: 'inside',
        //type: 'datetime',
        //dateTimeLabelFormats: {
        //  day: '%Y<br/>%m-%d',
        //  week: '%Y<br/>%m-%d',
        //  month: '%Y-%m',
        //  year: '%Y'
        //},
        labels: {
            rotation: -30,
            y: 10
        }
    },

    yAxis: {
        tickPixelInterval: 40,
        tickColor: 'gray',
        tickLength: 10,
        tickWidth: 2,
        tickPosition: 'inside',
        gridLineWidth: 1,
        gridLineDashStyle: 'longdash',
        minorGridLineColor: '#FFF0F0',
        minorGridLineWidth: 1,
        minorTickInterval: 'auto',
        min: 0,
        max: 100,
        plotLines: [{
            value: 90, // DB 에서 평가 기준 받아와 저장 필요
            width: 3,
            color: 'red',
            dashStyle: 'dash',
            label: {
                text: '평가기준',
                align: 'top',
                y: -4,
                x: 12
            }
        }],
        title: {
            align: 'high',
            offset: 0,
            text: '종합품질점수',
            rotation: 0,
            y: -10
        },
        labels: {
            formatter: function () {
                return this.value + ' 점';
            },
            x: -30
        }
    },

    plotOptions: {
        series: {
            marker: {
                enabled: true
            }
        }
    },

    scrollbar: {
        enabled: true,
        minWidth: 5,
        barBackgroundColor: 'gray',
        barBorderRadius: 7,
        barBorderWidth: 0,
        buttonBackgroundColor: 'gray',
        buttonBorderWidth: 0,
        buttonArrowColor: 'yellow',
        buttonBorderRadius: 7,
        rifleColor: 'yellow',
        trackBackgroundColor: 'white',
        trackBorderWidth: 1,
        trackBorderColor: 'silver',
        trackBorderRadius: 7
    },

    series: [{
        name: '종합품질점수',
        data: [{
            name: '1회차',
            color: 'red', //평가 기준 만족 시 blue, 불만족시 red
            events: {
                click: function () {
                    alert("!!!!");
                }
            },
            x: Date.UTC(2013, 0, 1),
            y: 32
        }, {
            name: '2회차',
            color: 'red', //평가 기준 만족 시 blue, 불만족시 red
            events: {
                click: function () {
                    alert("@@@@");
                }
            },
            x: Date.UTC(2013, 0, 2),
            y: 41
        }, {
            name: '3회차',
            color: 'red', //평가 기준 만족 시 blue, 불만족시 red
            events: {
                click: function () {
                    alert("####");
                }
            },
            x: Date.UTC(2013, 0, 3),
            y: 54
        }, {
            name: '4회차',
            color: 'red', //평가 기준 만족 시 blue, 불만족시 red
            events: {
                click: function () {
                    alert("$$$$");
                }
            },
            x: Date.UTC(2013, 0, 4),
            y: 67
        }, {
            name: '5회차',
            color: 'red', //평가 기준 만족 시 blue, 불만족시 red
            events: {
                click: function () {
                    alert("%%%%");
                }
            },
            x: Date.UTC(2013, 0, 5),
            y: 74
        }, {
            name: '6회차',
            color: 'blue', //평가 기준 만족 시 blue, 불만족시 red
            events: {
                click: function () {
                    alert("^^^^");
                }
            },
            x: Date.UTC(2013, 0, 6),
            y: 85
        }, {
            name: '7회차',
            color: 'blue', //평가 기준 만족 시 blue, 불만족시 red
            events: {
                click: function () {
                    alert("&&&&");
                }
            },
            x: Date.UTC(2013, 0, 7),
            y: 91
        }],

        type: 'area',
        pointStart: Date.UTC(2013, 0, 1),
        pointInterval: 24 * 3600 * 1000,
        showInLegend: true,
        threshold: null,
        tooltip: {
            valueDecimals: 2
        },
        fillColor: {
            linearGradient: {
                x1: 0,
                y1: 0,
                x2: 1,
                y2: 1
            },
            stops: [
                [0, Highcharts.getOptions().colors[0]],
                [1, 'rgba(0,0,0,0)']
            ]
        }
    }]
}); 
```

});

有一些韩国字符，请不要介意。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:35:17.830

据报道，它看起来像 Highcharts 中的 plotLines 错误：[https ://github.com/highslide-software/highcharts.com/issues/1478](https://github.com/highslide-software/highcharts.com/issues/1478)

可能的解决方法是在回调中添加 plotLine，参见示例：http: [//jsfiddle.net/f9aTL/12/](http://jsfiddle.net/f9aTL/12/)（仍然不是完美的解决方案）

打回来：

```
function (chart) {
    chart.yAxis[0].addPlotLine({
        value: 90, // DB 에서 평가 기준 받아와 저장 필요
        width: 3,
        color: 'red',
        dashStyle: 'Dash',
        label: {
            text: '평가기준',
            align: 'top',
            y: -4,
            x: 12
        }
    });
}); 
```

# c - 是/否 使用 getchar() 的用户提示

> ID：14617177
> 
> 赞同：0
> 
> 时间：2013-01-31T01:51:33.470
> 
> 标签：c, loops, getchar

我为一个程序编写了我的代码，该程序可以找到 1 到 2000 之间任何整数的素因子和不同的素因子。但是，现在我需要编写代码来循环程序并询问用户另一个数字，直到用户想要停止. 它看起来如下：

你想试试其他号码吗？Say Y(es) or N(o): y //然后它会要求一个介于 1 和 2000 之间的数字，然后程序就会运行。

你想试试其他号码吗？说 Y(es) 或 N(o)：n --->“感谢您使用我的程序。再见！：

我已经尝试为此编写代码，但是正如您所看到的，我在将注释代替代码的地方卡住了。我不知道如何循环它，所以程序会再次重复。这是我唯一觉得自己被困住的事情。我觉得我下面针对这个问题的代码是正确的，它只需要循环我不确定该怎么做的程序。希望你能帮忙。

```
int main()  {
  unsigned num;
  char response;

  printf("Please enter a positive integer greater than 1 and less than 2000:");
  scanf("%d", &num);
  if (num > 1 && num < 2000){
    printf("The distinctive prime facters are given below: \n");
    printDistinctPrimeFactors(num);
    printf("All of the prime factors are given below: \n");
    printPrimeFactors(num);
  }
  else {
    printf("Sorry that number does not fall within the given range.\n");
  }
  printf("Do you want to try another number? Say Y(es) or N(o): \n");
  response = getchar();
  if(response == 'Y' || answer == 'y')
  //then loop back through program
  //else print "Good Bye!"
  }
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T01:59:01.790

你想`do {...} while(condition)`在你的代码周围加上一个。条件是`response =='y' || response =='Y'`。当你离开循环并且你的好时打印'再见'。像这样的东西：

```
int main() {
    char response;
    do {
        //your code
    } while(response =='y' || response =='Y');
    printf("Goodbye");
    return 0;
} 
```

这与常规的 while 循环不同，因为它在第一次运行循环体后检查条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T01:57:43.960

基本思想是这样的：

```
char response = 'y';
do {
    workSomeMagic();
    response = getNextInput();
while ((response == 'y') || (response == 'Y')); 
```

显然，`workSomeMagic()`and`getNextInput()`需要充实，但它们与手头的问题无关，即在某个条件为真时如何执行循环。

`workSomeMagic()`基本上是您的数字输入和素数计算，同时`getNextInput()`从用户那里检索一个字符。

不过，我会谨慎使用`getchar()`它，因为如果您输入“y”，您将在输入流中同时获得`y`和`<newline>`，并且换行符将导致下一次迭代退出。

最好使用基于行的输入功能，例如[此处](https://stackoverflow.com/questions/4023895/how-to-read-string-entered-by-user-in-c/4023921#4023921)的优秀功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-04T05:55:24.123

```
int main()  
{
char response = 'y';
do {

 /*
  your 
  code
  here
*/
printf("Do you want to try another number? Say Y(es) or N(o): \n");
response = getch();

} while ((response == 'y') || (response == 'Y'));
 printf("Goodbye");
 return 0;
} 
```

# java - Java Spring：如何使用`@Value`注解注入`Environment`属性？

> ID：14617181
> 
> 赞同：46
> 
> 时间：2013-01-31T01:51:43.790
> 
> 标签：java, spring, dependency-injection

使用诸如

```
@Component
public class SomeClass {

    @Inject
    private Environment env;

    private String key;

    @PostConstruct
    private void init() {

        key = env.getProperty("SOME_KEY_PROPERTY");

    }

    ....
} 
```

可以为某些字段分配某些属性。

有没有更短、更简洁的形式来做到这一点？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-01-31T01:51:43.790

```
@Component
public class SomeClass {

    @Value("#{environment.SOME_KEY_PROPERTY}")
    private String key;

    ....
} 
```

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2013-01-31T02:04:38.573

您应该能够做到这一点（假设您已注册 PropertySourcesPlaceHolderConfigurer）

```
@Value("${SOME_KEY_PROPERTY}")
private String key; 
```

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2017-03-21T15:39:34.770

如果未定义变量，您可能还会发现提供***默认值***很有用：

```
@Value("${some_property:default_value}")
private String key; 
```

`some_property`否则，只要未定义，您就会得到异常。

`default_value`也可以为空，在这种情况下，它的行为就像`some_property`是可选的：

```
@Value("${some_property:}")
private String key; 
```

（注意冒号）

如果默认值包含特殊字符（点、冒号等），则将其包装在 SpEL 中，如下所示：

```
@Value("${some_property:#{'default_value'}}")
private String key; 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-04-27T17:57:27.863

如果您需要添加一个环境变量作为默认值。

```
@Value("${awsId:#{environment.AWS_ACCESS_KEY_ID}}")
@Value("${awsSecret:#{environment.AWS_SECRET_ACCESS_KEY}}") 
```

这是前面两个答案的组合。

# php - PHP/MySQL mysql_num_rows 不返回值

> ID：14617185
> 
> 赞同：2
> 
> 时间：2013-01-31T01:52:09.210
> 
> 标签：php, mysql

我是 PHP 和一般编程的新手，但我正在努力登录。我已经完成了注册页面，并且我的数据库很好地填充了记录。但是，当此代码得到输出时，它说我有 0 行来自 mysql_num_rows($result);... 当我输入正确的用户名/密码时，它应该成功显示 1 行。无论我是否输入了成功的用户/通行证组合，它的输出都是一样的。

感谢您提供的任何帮助，代码如下：

```
$SQL = "SELECT * FROM account WHERE username = $username AND password = md5($password)";
            $result = mysql_query($SQL);
            $num_rows = mysql_num_rows($result);
            echo $result;
            echo $num_rows;

            // CLOSE CONNECTION
            mysql_close($db_handle);

            // COMPARE $num_rows TO SEE IF A SUCCESSFUL LOGIN, THEN DIRECT TO MEMBERS PAGE

            if ($result) {
                if ($num_rows > 0) {
                    session_start();
                    $_SESSION['login'] = "1";
                    header ("Location: page1.php");
                }   
                    else {
                        $error_message = "Login failed.  Please try again.";
                        echo $num_rows; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T02:05:43.537

**编辑：完全重写**

尝试这个：

```
<?php

$host = "host";
$user = "user";
$password = "password";
$database = "database";

$username = 'jack'; /* Insert $_Post [''] here with username variable you pass. You could sanitize and validate with for example filter_var (), clean (), etc */
$password_user = 'password from jack'; // same here.

$link = mysqli_connect($host, $user, $password, $database);
        IF (!$link){
        echo ("Unable to connect to database!");
        }

        ELSE{
$query = "SELECT * FROM account WHERE username ='$username' AND password = md5('$password_user')";
            $result = mysqli_query($link, $query);
            $num_rows = mysqli_num_rows($result);
            $row = mysqli_fetch_array($result, MYSQLI_BOTH);

            // COMPARE $num_rows TO SEE IF A SUCCESSFUL LOGIN, THEN DIRECT TO MEMBERS PAGE

            if ($row) {
                    session_start();
                    $_SESSION['login'] = "1"; // pleae not that 1 is converted into a string value
                    $_SESSION['username'] = $username; // added username, just to test.
                    header ("Location: page1.php");
                }   
                    else {
                        $error_message = "Login failed.  Please try again.";
                        echo $error_message;
                    }
            // CLOSE CONNECTION
            mysqli_close($link);            
        }
?> 
```

样本数据：

```
CREATE TABLE account (
  id INT auto_increment primary key,
  username VARCHAR(30),
  password VARCHAR(50)
  );

INSERT INTO account(username, password)
VALUES 
("bob", md5('password from bob')), 
("jack", md5('password from jack')), 
('joe', md5('password from joe')); 
```

[SQL 小提琴演示](http://www.sqlfiddle.com/#!2/20099/1)

示例页面1

```
<?php
session_start();
$login = $_SESSION['login'];
$username = $_SESSION['username'];

echo '<h1>It WORKS, <i>'.$username.'</i>!!!</h1>';

?> 
```

需要注意的重要一点是，我使用的是 MYSQLI 库而不是 MYSQL 库。如果表中有多个列，则应选择每列的输出。例如，`$result['id']`。

我发现您没有在 SQL 语句中转义变量。我必须注意，我没有调试下面的部分 COMPARE $num_rows 以查看是否成功登录，然后直接发送给会员。我认为您可以自己管理。

WRT 净化和验证你必须做更多的工作。我不知道您的数据是如何通过用户登录表单过去的。假设您将使用 POST。在这种情况下，您可以从页面顶部开始，首先使用 $_POST 检索所有发布的变量。然后过滤它们以确保您的代码没有为 SQL 注入打开。例如 `$username = filter_var($_POST['username'], FILTER_SANITIZE_STRING);`

# php - 由 php 生成的页面在 iframe 中不显示 Google doc 内容，html 中的相同文本有效

> ID：14617186
> 
> 赞同：0
> 
> 时间：2013-01-31T01:52:09.587
> 
> 标签：php, html, iframe, google-docs

我的页面分为 4 个部分，每个部分由一个 php 对象的方法生成。
第一部分只显示一个文本并且效果很好，第二个和第四个什么都没有（到目前为止）。

我的问题在于应该显示嵌入式 Google 电子表格的第三部分。
php 页面创建了正确的 html 代码，实际上标题文本正确显示，但 iframe 显示来自 Google 的消息，指出请求的文件不存在。

然后我按Ctrl+U打开页面源（我用的是Firefox），复制文本，粘贴到新的test.html中，保存到服务器，在Firefox中打开新的test.html，现在谷歌喜欢它，并且 iframe 正确显示。

为什么我有两页具有相同来源的页面，但一个有效而另一个无效？

这是页面的完整 php 代码：

```
<?php
  $filename = "parameters-test.txt";
  $file_size = filesize($filename);
  $handle = fopen($filename, "r");
  $content = fread($handle, $file_size);
  fclose($handle);

  $content = str_replace('\"', '"', $content); // ??? why do I need this? And do I need only this? Isn't there some decode function?
  $alldata = json_decode($content);
  $pages = $alldata->page;
  $parameters = $alldata->parameters[0];

  $websiteTitle = $parameters->websiteTitle;

  $sheets = array();

  foreach($pages as $page) {
    $sheet = new Sheet();
    $sheet->load($page);
    array_push($sheets, $sheet);
  }

  if(isset($_GET["pageId"])) $currentSheet = $_GET["pageId"];
  else $currentSheet = 0; // this is the Welcome page

  class Sheet {
    public $definition = '';

    public function load($parameters) {
      $this->definition = $parameters;
    }

    public function showTitle() {
      echo '<h1>';
      echo $this->definition->title;
      echo '</h1>';
      echo "\n";
    }

    public function showHeader() {
      if($this->definition->heightHeader) {
        echo '<iframe width="';
        echo $this->definition->width;
        echo '" height="';
        echo $this->definition->heightHeader;
        echo '" frameborder="0" src="https://docs.google.com/spreadsheet/pub?key=';
        echo $this->definition->documentId;
        echo '&single=true&gid=';
        echo $this->definition->headerSheetId;
        echo '&output=html&widget=false&gridlines=false&range=';
        echo str_replace(':', '%3AD', $this->definition->rangeHeader);
        echo '"></iframe><br />';
        echo "\n";
      }
    }

    public function showBody() {
      echo '<iframe width="';
      echo $this->definition->width;
      echo '" height="';
      echo $this->definition->heightBody;
      echo '" frameborder="0" src="https://docs.google.com/spreadsheet/pub?key=';
      echo $this->definition->documentId;
      echo '&single=true&gid=';
      echo $this->definition->bodySheetId;
      echo '&output=html&widget=false&gridlines=false&range=';
      echo str_replace(':', '%3AD', $this->definition->rangeBody);
      echo '"></iframe><br />';
      echo "\n";
    }

    public function showLinks() {
    }
  }
?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link href="favicon.ico" rel="icon" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" href="index.css" />
    <title><?php echo $websiteTitle; ?></title>
  </head>
  <body>
    <?php
      $sheets[$currentSheet]->showTitle();
      $sheets[$currentSheet]->showHeader();
      $sheets[$currentSheet]->showBody();
      $sheets[$currentSheet]->showLinks();
    ?>
  </body>
</html> 
```

这是生成的 html，它仅在来自 test.html 而不是来自 test.php 时才有效：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link href="favicon.ico" rel="icon" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" href="index.css" />
    <title>this is the title</title>
  </head>
  <body>
    <h1>Hotshots pool league</h1>
<iframe width="500" height="300" frameborder="0" src="https://docs.google.com/spreadsheet/pub?key=0AqEyi7du69LQdHRJXzViMlhEdHVYY2E4X1hnZ21EQ2c&single=true&gid=12&output=html&widget=false&gridlines=false&range=A1%3ADZ999"></iframe><br />
  </body>
</html> 
```

# iphone - coredata 如何将默认 NSSet 更改为 NSMutableArray

> ID：14617194
> 
> 赞同：3
> 
> 时间：2013-01-31T01:53:42.357
> 
> 标签：iphone, core-data

CoreData 一对多默认生成`NSSet`，如何更改`NSSet`为`NSMutableArray`？我尝试手动更改，但报错：

```
 _NSFaultingMutableSet filteredArrayUsingPredicate:]: unrecognized selector sent to instance 0x1ed35e40' 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-31T01:58:27.263

`NSSet`有方法`allObjects`，它返回一个`NSArray`.

要获得一个，`NSMutableArray`你可以这样做：

```
NSMutableArray *array = [NSMutableArray arrayWithArray:myCoreDataObject.mySet.allObjects]; 
```

注意：不保证每次的顺序都相同（不订购套装）。如果订单对您很重要，请考虑`NSOrderedSet`改为。

另请参阅以下文档`NSSet`：

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSSet_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSSet_Class/Reference/Reference.html)

PS：

您收到错误消息的原因：

`NSSet`（或`_NSFaultingMutableSet`就此而言）没有名为`filteredArrayUsingPredicate`.

# jquery - 如何在随文本增长的输入字段中模拟回车

> ID：14617195
> 
> 赞同：0
> 
> 时间：2013-01-31T01:53:45.723
> 
> 标签：jquery, html, css

我有一个带有文本区域输入字段的基本 HTML 表单。

```
<form action="process.php" method="post">
    <textarea class="text-input" rows="1" cols="20" name="describe_your_project">
        <input type="submit" value="submit" />
    </textarea>
</form> 
```

当用户在此字段中键入该输入字段的空间末尾时，我希望`textarea`基本上像回车一样下拉一行而不显示默认滚动条。

我在 basecamp 和其他程序中看到过这个，但不确定这是一个 jQuery 函数还是 CSS3 值。任何见解都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T02:36:43.970

试试这个：

```
$('.text-input').bind('input keyup',growme);
function growme() {
    var $this=$(this);
    $this.data('lineheight',$this.data('lineheight')||$this.height());
    if (this.scrollHeight-1>$this.height()) $this.height($this.height()+$this.data('lineheight'));
} 
```

[演示](http://jsfiddle.net/oceog/FAH9H/)

或更简单

```
$('.text-input').bind('input keyup',growme);
function growme() {
    $(this).height(this.scrollHeight);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T18:24:05.833

感谢楼上大家的帖子。我尝试了上面的几个选项，不同的浏览器表现不同（Chrome 上面的选项有问题）。我做了更多的研究，发现了这个：

[https://github.com/jevin/Autogrow-Textarea](https://github.com/jevin/Autogrow-Textarea)

希望它对将来的某人有所帮助...感谢您为我指明正确的方向！

# compression - 压缩稍大的文件会导致更小的压缩文件？

> ID：14617196
> 
> 赞同：1
> 
> 时间：2013-01-31T01:53:47.810
> 
> 标签：compression, zip, 7zip

我首先压缩了一个 Visual Studio 项目文件夹，结果是 14,100 kb。

然后我意识到我需要在我的程序中添加一些东西，所以我插入了额外的 50 行并再次保存了项目。我再次压缩它，这次压缩文件是 14,087 kb。

现在我期望一个相等或更大的 zip 文件，而不是更小的一个。这里到底发生了什么，如何从较大的项目文件夹中获取较小的 zip 文件？我还第三次重新压缩了同一个项目文件夹，以确保它再次为 14,087 kb。

# javascript - javascript 在提交时关闭弹出窗口

> ID：14617199
> 
> 赞同：5
> 
> 时间：2013-01-31T01:54:34.240
> 
> 标签：javascript, popup, form-submit

行。我已经看到这个问题超过 10 年没有答案了。

您如何在一个按钮调用中提交和关闭弹出窗口。

建议就这样运行。

```
function saveNClose()
{
  document.form.submit();
  self.close();
}
this doesn't work because the submit has a redirect, and the self.close is never reached. 
```

* * *

```
function closeLaterNSaveNow();
{
  setTimeout("window.close()",5000);
  document.form.submit();
}
same problem..  the close is never called because the script for the page is gone. 
```

* * *

```
function closeNowNSubmit()
{
  self.close(); 
 document.form.submit();
}
the window closes, but nothing gets saved.  server doesn't even get notified of anything.. 
```

* * *

```
<input class='btn btn-success' disabled='disabled' id='SubmitFinal' onclick='closeWindow()' type='submit' value='Finish'>
Well then there's no validation of the data.  it submits before the function is called. 
```

有人解决这个问题吗？我找到了可以追溯到 2002 年的相同解决方案，其中一些最近在本月。我会继续看，但我希望有人已经确定了，并且有人在这里回答

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T02:39:07.370

一个典型的解决方案是输出一个 JS 片段，该片段将在提交后作为结果页面关闭窗口。

```
<script type="text/javascript">
    window.close();
</script> 
```

另一种解决方案是通过 AJAX 提交表单的数据，并在请求完成后关闭窗口。您可以为此使用[jQuery Form 插件](http://jquery.malsup.com/form/)：

```
$("#myForm").ajaxForm(function() { 
    window.close();
}) 
```

# css - 样式文本输入占位符

> ID：14617200
> 
> 赞同：14
> 
> 时间：2013-01-31T01:54:37.783
> 
> 标签：css

> **可能重复：**
> [使用 CSS 更改输入的 HTML5 占位符颜色](https://stackoverflow.com/questions/2610497/change-an-inputs-html5-placeholder-color-with-css)

无论如何在文本输入中设置占位符的颜色？现在我被无聊的默认灰色困住了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-31T02:03:51.213

你肯定可以[http://css-tricks.com/snippets/css/style-placeholder-text/](http://css-tricks.com/snippets/css/style-placeholder-text/)。

（来自上述文章）

```
::-webkit-input-placeholder {
    color: red;
}

:-moz-placeholder { /* Firefox 18- */
    color: red;  
}

::-moz-placeholder {  /* Firefox 19+ */
    color: red;  
}

:-ms-input-placeholder {  
   color: red;  
} 
```

或查看 MDN [https://developer.mozilla.org/en-US/docs/CSS/:-moz-placeholder](https://developer.mozilla.org/en-US/docs/CSS/:-moz-placeholder)

# android - 我需要在警报管理器中使用广播吗？

> ID：14617201
> 
> 赞同：2
> 
> 时间：2013-01-31T01:54:45.587
> 
> 标签：android, broadcastreceiver, alarmmanager, android-pendingintent

我正在创建一个警报应用程序，这是运行警报的方法：

```
public void startAlarm(int minuteToStart)
{

    Toast.makeText(context, "Alarm Start in " + formatTime(minuteToStart), Toast.LENGTH_SHORT).show();
    Calendar cal = Calendar.getInstance();
    cal.add(Calendar.MINUTE, minuteToStart);    
    Intent intent = new Intent(context, AlarmActivity.class);
    PendingIntent pendingIntent = PendingIntent.getActivity(context, idPendingIntent, intent, PendingIntent.FLAG_CANCEL_CURRENT);
    AlarmManager alarmManager = (AlarmManager)context.getSystemService(ALARM_SERVICE);
    alarmManager.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), pendingIntent);
} 
```

它在给定的特定时间后运行此活动：

```
public class AlarmActivity extends Activity {
......
} 
```

它有效，但我看到人们正在使用 BroadcastReceiver，我做错了吗？我也应该使用 BroadcastReceiver 吗？我一直在搜索 BroadcastReceiver，但我不知道它会对我的应用程序产生什么影响。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T02:03:16.223

在一般情况下，A--C 的答案是正确的。

但是，您使用`RTC_WAKEUP`的是警报类型。我们对警报的*唯一*保证是，*如果*我们使用，*那么*Android 将确保设备将保持唤醒足够长的时间以供我们执行。任何其他类型的活动或服务都无法保证，并且设备很可能在或实际发生之前重新入睡。`_WAKEUP`*`BroadcastReceiver`*`onReceive()``PendingIntent``startActivity()``startService()`**

 *** * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T01:58:27.390

您可以使用`AlarmManager`任何`PendingIntent`功能（活动、服务、接收器），但是，它*通常*与接收器一起使用 - 未来执行的任务通常很小并且不需要 Activity 来运行，因为用户不需要突然出现的东西。

Receiver 不是 Activity，因此它没有 UI，并且处理时间限制约为 10 秒，因此请确保速度快。如果您需要在特定时间显示 UI，请坚持使用`Activity`，但通常情况并非如此*，除非*它类似于用户**必须**看到的闹钟应用程序）。如果您有类似的小型幕后操作，请选择接收器。Receiver's`onReceive()`得到一个`Context`传递给它，所以它可以做任何事情`Context`。

请记住，`PendingIntent.getActivity()`如果它不是活动，则必须将调用更改为您决定使用的任何其他内容。

所以这一切都取决于你想做什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T02:00:33.733

您不必*使用*`BroadcastReceiver`. （在大多数情况下）通常不赞成在`Activity`没有用户交互的情况下窃取焦点并从后台启动。不过，肯定有有效的用例。如果您打算`Activity`立即启动，直接而不是 via`BroadcastReceiver`是完全有效的。**

# hadoop - Hadoop 和 PiggyBank 不兼容

> ID：14617204
> 
> 赞同：0
> 
> 时间：2013-01-31T01:55:12.153
> 
> 标签：hadoop, apache-pig

我正在尝试`org.apache.pig.piggybank.storage.MultiStorage`从`piggybank.jar`存档中使用。[我按照此处](https://cwiki.apache.org/confluence/display/PIG/PiggyBank)的说明下载`pig trunk`并构建了 piggybank.jar 。但是，当我使用 MultiStorage 类时，出现以下错误。

`Found interface org.apache.hadoop.mapreduce.TaskAttemptContext, but class was expected`

通过查看[here](http://grokbase.com/t/cloudera/cdh-user/12asc6jt1a/error-found-interface-org-apache-hadoop-mapreduce-taskattemptcontext-but-class-was-expected)，看起来piggybank 版本和hadoop 版本之间存在版本不兼容。但我无法解决这个问题。我真的很感谢这方面的任何帮助（已经在这方面花费了过多的时间）。

pig.hadoop.version：2.0.0-cdh4.1.0

> > hadoop 版本
> 
> Hadoop 2.0.0-cdh4.1.0 Subversion file:///data/1/jenkins/workspace/generic-package-ubuntu64-10-04/CDH4.1.0-Packaging-Hadoop-2012-09-29_10-56-25/ hadoop-2.0.0+541-1.cdh4.1.0.p0.27~lucid/src/hadoop-common-project/hadoop-common -r 5c0a0bddbc2aaff30a8624b5980cd4a2e1b68d18 由 jenkins 于 9 月 29 日星期六 11:26:31 PDT 2012 编译 来源校验和 95f5c7f30b4030f1f327758e7b2bd61f

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T20:43:19.917

虽然我无法弄清楚如何构建兼容的 piggybank.jar，但我发现兼容`piggybank.jar`的位于`/usr/lib/pig/`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-18T23:29:04.183

当我将 piggybank 版本 0.13 与 Hadoop 版本 Hadoop 2.4.0.2.1.5.0-695 一起使用时，我遇到了类似的问题。但是，当我在您提到的位置（/usr/lib/pig）中使用 piggybank jar 时，它起作用了。

我所做的额外观察是 /usr/lib/pig 中的 piggybank jar 非常旧，并且没有 XPath 和其他可用功能。我相信新的 piggy jar 依赖于以后的 Hadoop 版本。

# multidimensional-array - 乘以二维数组

> ID：14617205
> 
> 赞同：0
> 
> 时间：2013-01-31T01:55:21.223
> 
> 标签：multidimensional-array, matrix

嘿，我正在尝试将二维数组相乘，但我很困惑。我有这个代码，但它似乎不起作用..

```
 class MatrixMultiply {
    public static void main(String[] args) {
        int array[][] = { {1,2,-2,0}, {-3,4,7,2}, {6,0,3,1} };
        int array1[][] = { {-1,3}, {0,9}, {1,-11}, {4,-5} };
        int array2[][] = new int[2][3];
        int x= array.length;     
        int y= array1.length;

        for(int i = 0; i < x; i++) {
            for(int j = 0; j < y-1; j++) {
                for(int k = 0; k < y; k++){
                    array2[i][j] += array[i][k]*array1[k][j];
                }
            }  
        }

        System.out.println("After we multiply the two arrays: ");

        for(int i = 0; i < x; i++) {
            for(int j = 0; j < y-1; j++) {
                System.out.print(" "+array2[i][j]);
            }  

            System.out.println();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-31T05:17:23.927

修改使数组相乘的循环。

```
for (int i = 0; i < x-1; i++) {
  for (int j = 0; j < array1[0].length; j++) {
    for (int k = 0; k < array[0].length; k++) { 
      array2[i][j] += array[i][k] * array1[k][j];
    }
  }
} 
```

# java - 时间没有将纳秒转换为秒

> ID：14617206
> 
> 赞同：0
> 
> 时间：2013-01-31T01:55:26.973
> 
> 标签：java, performance

如果我的代码有任何问题，有人可以抓住吗？我正在尝试计算执行此阶乘并将其转换为秒所需的时间，但它似乎打印出错误的值。谢谢！！

```
 long startTime = System.nanoTime();
    BigInteger factorial_minute = doFactorial(50000);
    long endTime = System.nanoTime();

    String factorial_minute_str = factorial_minute.toString();
    System.out.println("Largest n! in one minute = " + factorial_minute);
    System.out.println("n! in one minute Amount of Digits: " + factorial_minute_str.length()); // Print the length also
    System.out.println("Total execution time: " + (int)((endTime - startTime)/1000000000 + " seconds") ); 
```

输出是

> 总执行时间：4秒

编辑，我将其更改为 1000000000，但似乎输出仍然错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T01:57:51.510

一纳秒是十亿分之一秒，而不是百万分之一。在除数上再添加三个零。

```
(endTime - startTime)/1000000000 
```

# javascript - 返回未定义值的简单 Javascript 函数

> ID：14617207
> 
> 赞同：0
> 
> 时间：2013-01-31T01:55:33.777
> 
> 标签：javascript, function, onclick

我有一个简单的`JavaScript`函数，我试图获取用于启动该函数的元素的 ID。我的元素很简单`DIV`：

```
<script type="text/javascript" >
    function updateProduct(prod_id,old_q){
        alert(jQuery(this).attr('id'));
    }   
</script>

<div id="button_container" style="float:left; margin-right:7px; margin-top:3px;  width:59px; height:20px; cursor:pointer;" onClick="updateProduct('19','3060');"> 
```

此页面上还有其他 HTML 元素（当然），但现在这是一个测试按钮，没有其他元素具有与我在这里称为`button_container`. 正如你所见，我`Script`的也是独立的。它不是更长的`Script`等等的一部分。我错过了一些超级简单的东西吗？警报返回“未定义”并且`Console`不报告任何警告或错误...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T01:58:23.047

您的`this`函数中的 是全局对象`window`。

您需要将其传递给函数。

```
function updateProduct(prod_id,old_q, element){
    alert(element.id);
}   

<div id="button_container"  onClick="updateProduct('19','3060', this);"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T02:00:34.797

您需要传递元素对象。

```
<script type="text/javascript" >
    function updateProduct(obj, prod_id,old_q){
      alert(jQuery(obj).attr('id'));
     }   
</script>
<div id="button_container" style="float:left; margin-right:7px; margin-top:3px;  width:59px; height:20px; cursor:pointer;" onClick="updateProduct(this, '19','3060');"> 
```

# java - 将字符串拆分为不同的数组索引Java？

> ID：14617209
> 
> 赞同：1
> 
> 时间：2013-01-31T01:55:38.113
> 
> 标签：java, arrays, string, java.util.scanner

我正在尝试将字符串拆分为不同的数组索引。该字符串来自用户输入（通过`java.util.Scanner`）并被加载到`String`变量中。如何将字符串中的输入拆分为不同的数组索引？

`DOB`另外，我怎样才能做一个隐含的数学函数`int`？

这是我的代码：

```
import java.util.Scanner;

public class main {
    public static void main(String args[]) {
        Scanner input = new Scanner(System.in);
        System.out.println("Enter date of birth (MM/DD/YYYY):");
        String DOB;
        DOB = input.next();
        int age = 0;
        age = 2013 - DOB - 1;
        int age2 = 0;
        age2  = age + 1;
        System.out.println("You are " + age + " or " + age2 + " years old");
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T02:00:35.653

```
String[] parts = DOB.split("/");
int months = Integer.parseInt(parts[0]);
int days = Integer.parseInt(parts[1]);
int years = Integer.parseInt(parts[2]); 
```

然后在你的计算中使用`years`而不是。`DOB`

更好的是，用于[`new Calendar()`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html#Calendar%28%29)获取今天的精确日期，并与之进行比较。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T02:01:07.230

使用将[日期字符串解析为某些 Java 对象](https://stackoverflow.com/a/8854858/1520364)中所示的[DateTimeFormat](http://joda-time.sourceforge.net/apidocs/org/joda/time/format/DateTimeFormat.html)将字符串解析为[DateTime](http://joda-time.sourceforge.net/apidocs/org/joda/time/DateTime.html)对象，然后访问成员。

```
DateTimeFormatter format = DateTimeFormat.forPattern("MM/dd/yyyy");
DateTime dateTime = format.parseDateTime(DOB); 
```

这使用[Joda Time 库](http://joda-time.sourceforge.net/)。

或者，您可以以类似的方式使用[SimpleDateFormat](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html#parse%28java.lang.String,%20java.text.ParsePosition%29)将其解析为[Date](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Date.html)对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T02:27:12.033

我注意到您正在使用键盘输入来识别字符串。如果用户没有输入您期望的内容，它将使您的程序崩溃。（如果您刚刚开始使用 Java，这很好；您可以再次运行它）

您也可以通过询问他们三次来使其更容易拆分，例如：

```
int dob[] = new Integer[3]; // integer array made from Integer class-wrapper
System.out.println("Input day");
dob[0] = Integer.parseInt(input.next()); 
System.out.println("Input month");
dob[1] = Integer.parseInt(input.next());
System.out.println("Input year");
dob[2] = Integer.parseInt(input.next()); 
```

您现在在一个数组中有三个整数，已拆分并准备好进行操作。

如果 Integer 无法将文本输入解析为数字，您将收到 NumberFormatException。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-26T15:25:16.093

```
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Date;
import java.util.Scanner;

public class main {
    public static void main(String args[]) {
        // Man you should look onto doing your
        // homework by yourself, ijs.
        // But here it goes, hope i make myself clear.
        Scanner input = new Scanner(System.in);
        System.out.println("Enter date of birth (MM/DD/YYYY):");
        String DOB;
        DOB = input.next();
        //
        int age;
        // You need to know when it is today. Its not 2013 forever.
        java.util.Calendar cal = java.util.Calendar.getInstance();
        // ^ The above gets a new Calendar object containing system time/date;
        int cur_year = cal.get(Calendar.YEAR);
        int cur_month = cal.get(Calendar.MONTH)+1; // 0-indexed field.
        // Cool we need this info. ill skip the day in month stuff,
        // you do that by your own, okay?
        SimpleDateFormat dfmt = new SimpleDateFormat("MM/dd/yyyy");
        int bir_year;
        int bir_month;
        try {
            // If you wanna program, you must know that not all functions
            // will exit as it's intended. Errors happen and YOU should deal with it.
            // not the user, not the environment. YOU.
            Date d = dfmt.parse(DOB); // This throws a parse exception.
            Calendar c = Calendar.getInstance();
            c.setTime(d);
            bir_year = c.get(Calendar.YEAR);
            bir_month = c.get(Calendar.MONTH)+1; // 0-indexed field;
            age = cur_year - bir_year;
            // Well, you cant be a programmer if you dont think on the logics.
            if(cur_month < bir_month ) {
                age -= 1;
                // If the current month is not yet your birth month or above...
                // means your birthday didnt happen yet in this year.
                // so you still have the age of the last year.
            }
            // If code reaches this point, no exceptions were thrown.
            // and so the code below wont execute.
            // And we have the variable age well defined in memory.
        } catch(ParseException e) {
            // But if the date entered by the user is invalid...
            System.out.println("The date you typed is broken bro.");
            System.out.println("Type a date in the correct format MM/DD/YYYY and retry.");
            return; // Got errors? tell the program to quit the function.
        }
        // Well now we can say to the user how old he is.
        // As if he/she didnt know it ^^'
        System.out.println(String.format("You are %d years old", age));

        // **Not tested.
    }
} 
```

# javascript - 检查标记图像是否有效

> ID：14617217
> 
> 赞同：1
> 
> 时间：2013-01-31T01:56:17.037
> 
> 标签：javascript, google-maps-api-3

我正在动态加载要在谷歌地图中使用的图像。

我用下面的代码这样做

```
var markerImage = new google.maps.MarkerImage('../myurl');
var marker = new google.maps.Marker({ position: latlng, map: map, icon: markerImage, title: values[2] }); 
```

问题是如果该 url 无效，则不会引发错误，也不会出现异常。我也无法检查值（null 或任何东西）。

如果网址无效，则图像不会显示。如果它是有效的，它会显示出来。我在标记上尝试了 get.Icon 方法，但这只是显示

锚点：未定义，原点：未定义，scaledSize：未定义，大小：未定义，url：“../myurl”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T02:03:33.027

尝试使用您的 url 加载图像`onload`并 `onerror`在将其传递给`google.maps.MarkerImage`构造函数之前进行侦听：

```
var img = new Image();
img.onload = function () {
    // sweet, let's do this!
}
img.onerror = function () {
    // oops, something went wrong!
}
img.src = 'yoururl/whatever.png'; 
```

# php - 对象克隆与序列化

> ID：14617219
> 
> 赞同：1
> 
> 时间：2013-01-31T01:56:29.177
> 
> 标签：php, serialization, clone

如果发现死锁，我的目标是以正确的方式重新启动 InnoDB 事务，有时，对象中的数据在执行时发生更改，我需要将其回滚到以前的状态。为此，我可能会使用对象克隆，但我对此不确定 %100，因为这些对象没有`__clone()`定义方法，我没有时间添加它们。从另一方面来看，这些对象内部包含对象的情况非常罕见。

这是我的代码：

```
protected function callAction() {

    $action = $this->Method.'Action';

    // Storing an Object
    $SavedPackageObject = clone $this->PackageObject;

    try {

        // First attempt
        $res = $this->PackageObject->$action();

    } catch(MySQLiDeadlockException $e) {

        $i = 0;

        do {

            // Restoring an Object
            $this->PackageObject = clone $SavedPackageObject;

            try {

                $res = $this->PackageObject->$action();

                // Success    
                break;

            } catch(MySQLiDeadlockException $e) {

                // Cancel iterations if limit is reached
                if($i > 9)
                    throw $e;

                usleep(100000);

                $i++;

            }

        } while(1);

    }

    return $res;

} 
```

对象复制还有另一种方法是深度克隆：

```
unserialize(serialize($Object)); 
```

我还考虑添加`__clone()`到所有这些包对象的父类：

```
// php.net example
function __clone(){ 
    foreach($this as $name => $value){ 
        if(gettype($value)=='object'){ 
            $this->$name= clone($this->$name); 
        } 
    } 
} 
```

**问题：**是否可以在父级中使用`clone`和定义`__clone()`，或者我可以序列化/反序列化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T02:52:32.060

对于您正在做`clone`的事情，最有意义并且应该是最有效的。我想不出将您的对象序列化为字符串的任何好处，只是为了取消序列化它以重新获得它的状态。

我假设如果你必须覆盖*，你必须覆盖*和（取决于你的对象）如果序列化？`_*clone*```_sleep``__wakeup``

# javascript - 需要将 .innerHTML 的结果转换为 javascript 上的数字

> ID：14617221
> 
> 赞同：5
> 
> 时间：2013-01-31T01:56:58.043
> 
> 标签：javascript, parsing

我有一个包含如下示例的表的 html

```
<td class="topiccell">
    <span class="topicnormal">
        <a class="value" href="/topic/?lang=en&action=viewtopic&topic=http%3A%2F%2Fwww.wandora.org%2Fsparql%2Fresultset%2Fliteral%2F40">
                 40
        </a>
    </span>
</td>
<td class="topiccell">
   <span class="topicnormal">
       <a class="value" href="/topic/?lang=en&action=viewtopic&topic=http%3A%2F%2Fwww.wandora.org%2Fsparql%2Fresultset%2Fliteral%2F40">
                 3
        </a>
   </span>
</td> 
```

我需要使用 . 解析 40、3 和另外 75 个数字`.innerHTML`。然后我想对所有 75 个数字求和。我使用了以下

```
var valuelements = document.getElementsByClassName("value");
var features = new Array(valuelements.length);
for (var i=0; i<=features.length; i++){ 
  var val = valuelements[i].innerHTML;
  var counter = counter + val;
}
document.write(counter); 
```

结果就像 40 3 等等....试过了`parseInt`，`parseFloat`但`.value`结果总是有`NaN.`任何建议吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-31T02:07:19.993

您需要`counter`使用起始编号进行初始化，否则您将在`undefined`.

```
var counter = 0; 
```

然后在循环中，使用`parseInt`,`parseFloat`或对`.innerHTML`值进行直接数字转换。

```
var counter = 0;

for (var i=0; i<features.length; i++){ 
  counter += parseFloat(valuelements[i].innerHTML);
} 
```

* * *

在现代浏览器中，您可以这样做：

```
var count = [].reduce.call(valueelements, function(c, v) {
    return c + parseFloat(v.innerHTML);
}, 0); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T02:12:27.673

尝试这样的事情，使用更实用的方法：

```
var sum = [].map.call(valuelements, function(v) {
  return +v.textContent; }).reduce(function(a, b) { return a + b; }); 
```

# actionscript-3 - AS3 循环不起作用

> ID：14617223
> 
> 赞同：1
> 
> 时间：2013-01-31T01:57:20.293
> 
> 标签：actionscript-3, loops, while-loop

我想在第三个计时器之后创建一个循环，直到程序结束，然后在第三个计时器处返回，但程序在最后一个计时器之后停止。我也尝试了“for”功能，但没有成功。

这是我的代码：

```
var i:Number = 0;

disco.visible = false;
palouki.visible = false;
konto.visible = false;
runner.visible = false;
mtext.visible = false;
container.visible = false;
atfa.visible = false;

var playert1: Timer = new Timer(1000, 1);
var playert2: Timer = new Timer(1500, 1);
var playert3: Timer = new Timer(2000, 1);
var playert4: Timer = new Timer(2500, 1);
var playert5: Timer = new Timer(3000, 1);
var playert6: Timer = new Timer(3500, 1);
var playert7: Timer = new Timer(5000, 1);

playert1.addEventListener(TimerEvent.TIMER, timert1F);
playert2.addEventListener(TimerEvent.TIMER, timert2F);
playert3.addEventListener(TimerEvent.TIMER, timert3F);
playert4.addEventListener(TimerEvent.TIMER, timert4F);
playert5.addEventListener(TimerEvent.TIMER, timert5F);
playert6.addEventListener(TimerEvent.TIMER, timert6F);
playert7.addEventListener(TimerEvent.TIMER, timert7F);

playert1.start();
playert2.start();
playert3.start();
playert4.start();
playert5.start();
playert6.start();
playert7.start();

function timert1F(e:TimerEvent):void{
    mtext.visible = true;
    TweenLite.from(mtext, 0.5, {alpha:0});

}

function timert2F(e:TimerEvent):void{
    container.visible = true;
    TweenLite.from(container, 0.5, {alpha:0});
}

while (i<100){

    function timert3F(e:TimerEvent):void{
        disco.visible = true;
        TweenLite.from(disco, 0.5, {alpha:0});
    }

    function timert4F(e:TimerEvent):void{
        runner.visible = true;
        TweenLite.from(runner, 0.5, {alpha:0});
    }
    function timert5F(e:TimerEvent):void{
        palouki.visible = true;
        TweenLite.from(palouki, 0.5, {alpha:0});
    }
    function timert6F(e:TimerEvent):void{
        konto.visible = true;
        TweenLite.from(konto, 0.5, {alpha:0});
    }

    function timert7F(e:TimerEvent):void{
        atfa.visible = true;
        TweenLite.from(atfa, 0.5, {alpha:0});
    }

trace(i);
i++;
}
stop(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T05:15:27.640

你的范围在这里完全搞砸了。

范围基础：

*   在函数或循环内声明的任何对象或函数只能从该函数或循环内访问
*   对于在类中声明的对象或函数也是如此，除非使用“private”以外的访问修饰符
*   在循环中声明的任何对象只能在循环的该迭代中访问。因此，在迭代 1 中声明的对象将永远无法在迭代 2-100 中访问。

因此，通过这些规则，我们可以指出您代码中的一个问题：您在循环中声明了一个函数，并试图从该循环外部访问它。当您附加这些事件侦听器时，这些功能在技术上并不存在。

现在到你的第二个问题。您在该循环中声明了一系列函数 100 次（这是一个巨大的内存问题，为了记录）。声明函数不是运行函数。因此，您创建了这些函数，但它们从未真正运行，这就是为什么这不能按照您期望的方式工作。

如果希望这些函数运行 100 次，则需要在全局空间中声明循环外的函数，然后调用循环内的函数。但是您在这些函数中使用了 Tween（通过 TweenLite）。您的循环将在不到一秒的时间内运行。所以调用它 100 次绝对不会做任何事情，因为它只会导致一个补间实际出现。

您确实需要对范围、循环和补间如何工作进行一些研究。您提供的代码目前是一团糟。

# android - 脚本中有 2 个 Log.i 语句。只有第二个出现

> ID：14617238
> 
> 赞同：0
> 
> 时间：2013-01-31T01:59:09.907
> 
> 标签：android

这是代码片段

```
 Log.i("poweruptcoach:aboutx000",MainActivity.pathtocoach);
    if(MainActivity.pathtocoach != null && !MainActivity.pathtocoach.isEmpty()){
        filespec = ServerFileSpec + MainActivity.pathtocoach;
    }
    topstuff = (RelativeLayout)findViewById(R.id.topstuff);
    Button coachesBtn = (Button)findViewById(R.id.coachesBtn);
    Button disclaimerBtn = (Button)findViewById(R.id.disclaimerBtn);
    Log.i("poweruptcoach:aboutx00","?" +MainActivity.pathtocoach+"?"); 
```

第一个 log-aboutx000，不会出现在 catlog 中，但第二个 log-aboutx00，会出现。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T02:09:07.353

好吧，因为他们使用不同的标签，这是我要检查的第一件事。

可能是您正在过滤标记名。您可以设置属性以指示每个标签允许记录的日志级别，并以编程方式使用`isLoggable()`.

只需将第一个标签上的标签更改为与第二个标签匹配，然后查看它是否出现，就应该很容易看出是否是这种情况。

* * *

> 除了幽默：我刚刚注意到`Log`该类包含一些`wtf()`方法，据说是“多么可怕的失败”。这不是一个非常可信的首字母缩略词，它类似于 Alex 将“The Daily WTF”重命名为“比失败更糟糕”的意思——我想我们*都*知道这真正代表什么 :-)

# c - mmap() 得到一个带偏移量的 64 位值

> ID：14617241
> 
> 赞同：1
> 
> 时间：2013-01-31T01:59:23.697
> 
> 标签：c, raspberry-pi

我被问到这个：

> 使用您的 RPi，编写一个读取自由运行系统计时器的 C 函数。系统计时器每微秒计数一次。将此函数的源文件放在它自己的文件中。自由运行定时器是一个位于物理内存地址 0x20003004 的 64 位值，但是，RPi 一次只能访问该内存区域中的 32 位。要访问这些内存位置，将对文件 /dev/mem 调用 mmap()。请务必始终检查错误并采取适当措施。要访问系统计时器： (a) 通过测试静态变量来检查计数器是否被映射。
> 
> (b) 如果计数器未映射，则
> 
> 一世。打开 /dev/men 只读。
> 
> ii. 获取系统页面大小
> 
> iii. 调用 mmap() 并将返回的地址（指向 32 位整数的指针）保存在静态变量中。通过允许 mmap() 设置地址映射来调用 mmap()。将长度设置为页面大小。将保护设置为只读。将标志设置为共享地图。接下来，传递 open() 返回的文件描述符，然后将偏移量设置为 0x20003000。请记住，对于这种情况，mmap() 只能对 __SC_PAGESIZE 字节的页面进行操作，因此不能直接映射地址 0x20003004 - 该地址必须与 __SC_PAGESIZE 对齐。
> 
> iv. 设置静态变量以指示已发生初始化。
> 
> v. 关闭打开的文件。
> 
> (c) 如果初始化成功，则将索引 1 处的 32 位值与索引 2 处的 32 位值组合返回一个 64 位数字。索引 1 处的 32 位值包含计数器的最低有效 32 位。索引 2 处的 32 位值包含计数器的最高有效 32 位。否则返回 0。

我能够获取第一个内存位置的计时器内容`0x20003000`：

```
int main(int argc, char * argv[])
{
    int temp;
    int page_size;
    int *map;

    temp = open("/dev/mem", O_RDONLY);
    page_size = sysconf(_SC_PAGESIZE);

    map = mmap(0, page_size, PROT_READ, MAP_SHARED, temp, 0x20003000);
    printf("%X \n", map);

    close(temp);
    return 0;
} 
```

我迷失在它要求我获取其他 32 位数字`0x20003004`并将其与原始数字结合的部分。欢迎任何帮助或指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T02:18:33.277

从您引用的描述中：

> 请记住，对于这种情况，mmap() 只能对 __SC_PAGESIZE 字节的页面进行操作，因此不能直接映射地址 0x20003004 - 该地址必须与 __SC_PAGESIZE 对齐。

这意味着`mmap()`只能映射到与 对齐的地址`__SC_PAGESIZE`。这也意味着返回的地址`mmap()`最多可以取消引用`page_size`。即，如果调用`mmap()`with`0x20003000`返回`0x20003000`，您可以取消引用`[0x20003000, 0x20003000 + page_size)`.

我会把剩下的留给读者作为练习。

# ruby - 我将如何修改此 rake 任务以启动支持本地调试的瘦服务器？

> ID：14617242
> 
> 赞同：1
> 
> 时间：2013-01-31T01:59:29.753
> 
> 标签：ruby, debugging, sinatra, rake

## 问题

我希望能够在我的本地计算机上调试由 Thin 托管的 Sinatra 网站，并且我希望能够通过使用`rake`.

*我无法接受建议使用不同技术（例如 Windows、Rails、Java）或其他服务器（例如 unicorn、passenger、puma）的答案；但是，如果我的要求是不可能的，那么我会接受这个答案。*

## 我试过的

我的当前`Rakefile`包含一个`:start`启动瘦服务器的任务，但是当它到达断点时，我的终端上没有显示任何输出。如果我直接从终端启动 Thin，那么`(rdb:1)`当它按预期到达断点时我会看到提示。在任何一种情况下，瘦服务器都在正确运行站点（通过注释掉断点来确认）。

### 宝石文件

```
source :rubygems
gem 'sinatra'
gem 'thin'
gem 'debugger-pry' 
```

### 耙文件

```
task :start do
  conf = File.expand_path('config.ru', File.dirname(__FILE__))
  `thin -e development -R #{conf} --debug start`
end 
```

### 配置.ru

```
require File.expand_path('app', File.dirname(__FILE__))

run ModularExample::App.new 
```

### 应用程序.rb

```
require 'sinatra'
require 'debugger/pry'

module ModularExample
  class App < Sinatra::Base
    get '/' do
      debugger
      "Hello, world"
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T02:49:36.240

您没有输出到 STDOUT。反引号执行命令并将输出作为字符串返回，这样您就可以执行类似的操作

```
puts `thin -e development -R #{conf} --debug start` 
```

但是您想将流程输出流式传输到 STDOUT，因此您实际上想要这样做：

```
task :start do
  conf = File.expand_path('config.ru', File.dirname(__FILE__))
  exec("thin -e development -R #{conf} --debug start")
end 
```

从此[问题](https://stackoverflow.com/questions/690151/getting-output-of-system-calls-in-ruby/690174#690174)了解有关调用命令行调用的更多信息。

# sas - 字段未作为字符串读取

> ID：14617243
> 
> 赞同：0
> 
> 时间：2013-01-31T01:59:32.413
> 
> 标签：sas

**解决了。见脚注。**

```
 /*check regex*/
            go = 1; 
            i = 1; 
            do while (go = 1);
                set braw.regex point = i;
                    if (upcase(fname) = upcase("&var.")) then do;

                        put format1 " one"; /*format1 is a field of braw.regex, properties says character length 30*/
                        if format1 = '/\d{8}/' then put 'hello world one'; else put 'good bye world one';
                        %check1(&data, format1, &var) 

                    end;
                    else i = i+1;  

            end;

      /*check1 passes regex, string, true false to check_format*/
%macro check_format(regex, string, truefalse);

    pattern = prxparse(&regex.);
    truefalse = prxmatch(pattern, &string); 
    put &regex " " &string " " &truefalse "post";
%mend; 
```

很抱歉缺少缩进 - 堆栈流似乎有问题或其他东西。

这输出

```
 /\d{8}/ one
good bye world one 
```

显然格式不是字符串。因此它会失败 prxparse，因为它正在寻找字符串输入。知道我做什么吗？

我在想我可以使用一个宏变量在它周围加上引号，也许使用：

```
call symput('mymacrovar', format1);
%let mymacrovar = "&mymacrovar"; 
```

但那个 symput 什么也没做。

**已解决：** 它被读取为字符串。在从中读取正则表达式数据集的 CSV 文件中，逗号之间有额外的空格，从而使字符串“/\d{8}/”成为 prxparse 不喜欢的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T22:14:48.887

它*被*读取为字符串。在从中读取正则表达式数据集的 CSV 文件中，逗号之间有额外的空格，使得字符串 '_/\d{8}/'（下划线表示空格），这是 prxparse 不喜欢的。

# android - 标题在 android chrome 浏览器上没有占满宽度

> ID：14617247
> 
> 赞同：0
> 
> 时间：2013-01-31T01:59:52.847
> 
> 标签：android, css

我对这段非常基本的代码的问题是它`top-header`没有在 android chrome 浏览器上占据整个宽度。

如果我删除宽度`page-width`，则`top-header`需要全宽......但我需要设置宽度！

我怎么做才能做到`top-header`全宽？

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
</head>
<body>

<!-- TOP HEADER -->
<div id="top-header">
    <div id="nav" class="page-width">
        test
    </div>
</div>

<!-- CONTAINER -->
<div id="container" class="page-width">
    test
</div>

</body>
</html>

/********** TOP-HEADER **********/
#top-header {background:#719bb5 url(../images/layout/bg_header.png) repeat-x left bottom; border-bottom: 1px #5E7D99 solid; height:59px;}

#container {background-color:red;}

/* classes */
.page-width {width:1000px; margin:0 auto; padding:0 10px;} 
```

编辑：

在我的 android chrome 浏览器上添加了它的样子

![在此处输入图像描述](../Images/9a1cc7c368b4bd19ca5d62e0b733505c.png)

# c# - 使用 ListBox 的“智能”SQL 更新

> ID：14617249
> 
> 赞同：1
> 
> 时间：2013-01-31T02:00:07.500
> 
> 标签：c#, sql-server, .net-4.0, listbox, sql-update

我正在开发一个项目，该项目通过 C# 访问 sql server 2012 中的数据库并对其执行 CRUD 修改。这是主要形式：

![在此处输入图像描述](../Images/f51c1b0bd4d2d93b9f80973ea17c512d.png)

右侧的两个列表框都用于处理包含在中间表（多对多关系）中的信息。以下是它们的工作原理：基本上，您从组合框中选择类型和能力，然后单击“添加”，它们将添加到相应的列表框中。要删除列表框中的项目，您只需选择一项，然后单击“删除”。这是另一个打印以消除任何疑问：

![在此处输入图像描述](../Images/756f70fd6c26204a1c3edebbd987d446.png)

在我在这里提供的第一张印刷品上，您将看到“Bulbasaur”数据。PokémonID​​ = 1 由“Bulbasaur”表示；TypeID = 1 和 12 分别是 'Grass' 和 'Poison'；并且 AbilityID = 1 是“过度生长”。

我试图使用 sql 查询（SqlCommand、SqlDataReader 等）创建一个更新函数（update_click），但**没有**删除神奇宝贝及其类型（和能力）的整个关联，然后重新添加它们，基于关于列表框的新修改。我想避免它，以便在某些神奇宝贝可能拥有数千种类型和能力的情况下节省一些内存......

可能吗？如有必要，我可以将我的 C# 项目发送给您以获取更多详细信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T02:09:26.090

从本质上讲，这听起来像您所说的您想做的只是将更改“发送”到数据库：

*   添加以前没有的任何能力；
*   删除数据库中已删除的所有能力

如果是这种情况，那么您需要做的是简单的集合操作：

*   设置联合
*   设置相交
*   设置差异

虽然您可以使用简单的数组或列表来执行这些操作，但使用实际的集合实现（例如通用 HashSet<>）效率更高。通过使用集合或哈希表的正确实现，您可以获得线性时间性能。

我希望这有助于为您指明正确的方向..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T02:17:17.000

我建议以下组合：

1）使用表值参数将所有数据（在列表框中的当前状态）一次发送到您的 T-SQL 查询或存储过程

2) 考虑使用[`EXCEPT`and/or`INTERSECT`](http://msdn.microsoft.com/en-us/library/ms188055.aspx)运算符（以及任何必要的 LEFT 或 RIGHT JOIN）将表值参数（本质上是表本身）的内容与基础表中当前的数据进行比较

3）相应地更新/删除/插入

# jquery - 如何在 jQuery 中更改拖放区

> ID：14617250
> 
> 赞同：2
> 
> 时间：2013-01-31T02:00:09.960
> 
> 标签：jquery, jquery-ui

所以，我有两个问题：

1.  为什么这是`});//]]>`在 jsfiddle 的页面顶部。

2.  其次，真正的问题，如何更改 jQuery 可排序对象的放置区域以反映鼠标所在的位置。所以我的意思是，从哪里拖动可排序对象（最左上角或右下角）并不重要，而是只依赖于鼠标是否悬停`tab1`或被`tab2`放下。

目前，可排序的中心必须超过`tab1`或`tab2`。

```
var $tab_items = $("ul:first li", $tabs).droppable({
    accept: ".connectedSortable li",
    hoverClass: "ui-state-hover",
    drop: function (event, ui) {
        var $item = $(this);
        var $list = $($item.find("a").attr("href"))
            .find(".connectedSortable");

        ui.draggable.hide("slow", function () {
            $tabs.tabs("select", $tab_items.index($item));
            $(this).appendTo($list).show("slow");
        });
    }
}); 
```

我对 JavaScript 和 jQuery 还很陌生。我认为这`drop: function( event, ui ) {`绝对是我应该寻找的地方。对此的任何见解将不胜感激。

[http://jsfiddle.net/justinmvail/LARnD/](http://jsfiddle.net/justinmvail/LARnD/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T02:07:39.210

```
$('selector').droppable({ tolerance: "pointer", ... 
```

[看到这个小提琴](http://jsfiddle.net/LARnD/2/)

您需要[`tolerance`](http://api.jqueryui.com/droppable/#option-tolerance)为`draggable`.

小提琴中的脚本标签导致了奇怪的字符。

# java - 如何从 Oracle PL/SQL 调用 Java jar 文件？

> ID：14617253
> 
> 赞同：2
> 
> 时间：2013-01-31T02:00:29.897
> 
> 标签：java, oracle11g, onejar

我的客户希望能够从 Oracle PL/SQL 调用 jar 文件。

Java 1.6、Oracle 11g R2

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T22:07:59.020

我对 loadjava（将类加载到 Oracle 中的程序）做了一些研究。听起来像是屁股疼。

所以我选择在 Oracle 之外运行我的 jar，但通过 PL/SQL 从 Oracle DBMS_SCHEDULER 调用。

就是这样：

```
BEGIN
DBMS_SCHEDULER.CREATE_PROGRAM (
program_name            => 'testjar',
program_type            => 'EXECUTABLE',
program_action          => 'C:\MYSTUFF\testjar.bat',
enabled                 => TRUE,
comments                => 'test testjar'
);
END;
/

begin  
dbms_scheduler.create_job  
 (job_name => 'testjar_job',  
  program_name=> 'testjar',    
  enabled=>true,  
  auto_drop=>false,  
  comments=>'Only run immediately by dbms_scheduler.run_job');  
end; 
/

begin  
    dbms_scheduler.run_job('testjar_job',TRUE);  
end;  
/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-04T16:46:13.680

在玩了之后，我发现模式 JAR_NAME.jar///ClassName.methodName(.... 有效。

例如：

```
Function do()
return String
AS
      LANGUAGE java
         NAME 'my_jar.jar///MyClass.myMethod() return oracle.sql.String'; 
```

请注意，似乎某些 jar 名称文件不起作用。例如，我在 jar 中遇到了“-”的问题。

# mongodb - MongoEngine：如何从引用文档中收集嵌入文档

> ID：14617254
> 
> 赞同：0
> 
> 时间：2013-01-31T02:00:33.533
> 
> 标签：mongodb, mongoengine

我有一个 Post 类，其中包含一个名为“comments”的嵌入式文档列表，在这里我要做的就是检索用户发布的所有帖子的最新评论。

我怎样才能做到这一点？我当前的代码，我只是遍历该用户的“发布”类并手动收集“评论”。但我也希望它按最近添加的排序，所以有排序功能来循环手动收集的评论并重新排序。

这似乎非常低效，所以寻求建议。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:53:44.353

首先，如果您`$push`通过更新进入列表，那么您将保持评论的顺序。
您可以使用`$slice`运算符返回最后的 x 评论，例如：

```
Post.objects(id=xxx).fields(slice__comments=-5) 
```

但是，模式可能效率不高，尤其是在您不断增加评论数量或评论可能未发布的情况下。在这种情况下，您可能希望将评论拆分为他们自己的文档模型并将评论链接到 Post by `id`。这将是数据库的两次往返，但提供了更大的灵活性 - 例如。您可以按日期过滤并发布。

# c# - 多线程控制台应用程序何时退出？

> ID：14617258
> 
> 赞同：7
> 
> 时间：2013-01-31T02:00:39.973
> 
> 标签：c#, multithreading

```
class Program
{
    public static void Main(String[] args)
    {
        var c = new C();
        var thread = new Thread(new ThreadStart(c.F));
        thread.Start();
        Console.WriteLine("Exiting main, but the program won't quit yet...");
    }
}
class C
{
    public void F()
    {
        for (int i = 0; i < 10; i++)
        {
            Console.WriteLine("Waiting {0}", i);
            Thread.Sleep(1000);
        }
        Console.WriteLine("Now the program will quit...");
    }
} 
```

控制台应用程序的底层发生了什么导致它在退出之前等待另一个线程完成（指向文档的指针很好）？

*注意：我知道这是一个基本问题——我之前总是设法等待线程完成，从未考虑过有一些基础设施为我做这件事......*

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-31T02:20:25.067

当所有前台线程终止时进程结束

来自[Thread.IsBackground](http://msdn.microsoft.com/en-us/library/system.threading.thread.isbackground.aspx)对前台线程与后台线程的评论：

> 线程要么是后台线程，要么是前台线程。后台线程与前台线程相同，只是后台线程不会阻止进程终止。一旦属于一个进程的所有前台线程都已终止，公共语言运行时就会结束该进程。任何剩余的后台线程都将停止并且不会完成。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-31T02:04:12.253

任何有运行线程的进程都不会退出，直到所有线程都退出。因此，当主线程退出时，它会运行另一个线程，并且当线程退出时，进程会终止。随时退出程序 Environment.Exit(0); 应该管用。该语句将终止所有的线程并且进程将被终止，虽然这是不优雅的方式

# java - 检查特殊字符和空格

> ID：14617261
> 
> 赞同：1
> 
> 时间：2013-01-31T02:00:55.607
> 
> 标签：java, special-characters

我有一个用java创建的刽子手游戏。我想创建一个简单的函数来检查输入的单词是否有空格和/或特殊字符。

我找到了函数 String.replaceAll()，但我无法挖掘出一个预制函数，该函数返回一个布尔值是否存在特殊字符和/或空格。

那里已经有功能了吗？或者至少是一种更简单的方法来指定没有空格或特殊字符，而不是执行以下操作？

```
public  void checkWord()
    {
        boolean flag = false;
        for(int i=0;i<wordArray.length;i++)
        {
            if(wordArray[i] == '1' || wordArray[i] == '2' || wordArray[i] == '3' || wordArray[i] == '4' || wordArray[i] == '5' || wordArray[i] == '6' || wordArray[i] == '7' || wordArray[i] == '8' || wordArray[i] == '9'  )
            {
                flag = true;
            }
        }
        if(flag == true)
        {
            System.out.println("Invalid characters used in the word");
            System.exit(0);
        }
    } 
```

函数越来越密集，我只介绍了数字。想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T02:04:00.467

您可以使用一个简单的正则表达式：

```
public boolean isValidWord(String w) {
    return w.matches("[A-Za-z]*");
} 
```

正则表达式的解释：

```
[A-Za-z] - capital or lowercase letter
*        - zero or more 
```

有关正则表达式的更多信息：[http ://www.regular-expressions.info/](http://www.regular-expressions.info/)

# asp.net-mvc - User.Identity.IsAuthenticated 在重定向和验证后返回 false

> ID：14617267
> 
> 赞同：-1
> 
> 时间：2013-01-31T02:01:55.980
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我遇到了 MVC4 用户授权问题。

`System.Web.Security.Membership.ValidateUser`返回`true.`

然后它开始了`FormsAuthentication.SetAuthCookie`，我在浏览器中看到了一个 cookie。

然后由于某种原因`User.Identity.IsAuthenticated`仍然评估为。`false`

```
User.Identity.IsAuthenticated 
```

仍在`false`重定向之后并保持不变`false.`

```
model.UserName 
```

不是`null or empty`我打电话的时候`SetAuthCookie`。它有正确的用户名。

表单身份验证在`web.config.`

```
[AllowAnonymous]
[HttpPost]
public ActionResult Login(LoginModel model, string returnUrl)
{
    if (ModelState.IsValid)
    {
        if (System.Web.Security.Membership.ValidateUser(model.UserName, model.Password))
        {
            FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);
            if (Url.IsLocalUrl(returnUrl))
            {
                return Redirect(returnUrl);
            }
            else
            {
                return RedirectToAction("Index", "Home");
            }
        }
        else
        {
            ModelState.AddModelError("", "The user name or password provided is incorrect.");
        }
    }

    // If we got this far, something failed, redisplay form
    return View(model);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T03:01:44.867

另请参见**System.Threading.Thread.CurrentPrincipal** 您应该看到

*   身份验证类型“表格”
*   IsAuthenticated true
*   名字“弗雷德”

您是否告诉 MVC/IIS 授权您的控制器？例如

```
[Authorize]
public class MyController : Controller 
```

如果 未设置**User.Identity** ，则表明缺少 WEB.CONFIG 或显式 AUTHORIZE 属性。

# hash - MSN XMPP JID 哈希是如何计算的？

> ID：14617270
> 
> 赞同：1
> 
> 时间：2013-01-31T02:02:48.683
> 
> 标签：hash, xmpp, msn-messenger

XMPP 上的 MSN messenger（windoze live connect 或他们现在所说的任何东西）不使用好友 JID 的实际电子邮件地址，但 somekindofhashes@messenger.live.com
可以使用 getjid 查找这些哈希，但我想知道是否有人知道它们实际上是如何计算的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:26:52.110

出于安全原因，无法计算它们。GetJid 是查找它们的唯一方法。

# javascript - 打开和关闭多个 div（几乎可以正常工作）

> ID：14617277
> 
> 赞同：1
> 
> 时间：2013-01-31T02:03:36.160
> 
> 标签：javascript, css, hide, toggle, show

我有这个：

```
function toggleCharts() {
var x, divArray = ["item_4746983", "item_4491867"];
for (x in divArray) {
    if (x) {
        document.getElementById(divArray[x]).style.display = 'block';
    }
}

<button onClick="toggleCharts();">Charts</button> 
```

和这个：

```
#item_4746983 {
    display:none;
}

#item_4491867 {
    display:none;
} 
```

`item_4746983`&`item_4491867`是我希望在您单击图表时显示或隐藏的缩略图

代码有效，当我单击按钮时它们会显示，但我无法通过再次单击它来找出隐藏它们的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T02:12:52.400

而不是按 id 设置样式，而是按类设置样式：

```
.hiddenThumbnail {
    display:none;
} 
```

`hiddenThumbnail`然后对这两个项目应用和删除类。这使您的 css 代码更小，并使一切通常更易于维护。有关如何修改类的指南，[请参阅这个出色的答案。](https://stackoverflow.com/a/196038/781965)

或者，使用像[YUI](http://yuilibrary.com/yui/docs/node/node-view.html)这样的库来完成它（我相信 jquery 也有类似的功能）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T02:11:53.200

检查 div 是否已显示并更改显示。以下代码应该可以工作。

```
var div = document.getElementById(divArray[x])
var shown = div.style.display;

if ("block" == shown) {
    div.style.display = none;
} else {
    div.style.display = block;
} 
```

这是一个链接，显示了做你想做的各种方式： [http ://www.dustindiaz.com/seven-togglers/](http://www.dustindiaz.com/seven-togglers/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T02:12:45.853

***[检查演示](http://jsfiddle.net/BDUXS/)***。

```
function toggleCharts() { 
    var divArray = ["item_4746983", "item_4491867"], i, ele;
    for (i=0; i < divArray.length; i++) {
        ele = document.getElementById(divArray[i]);
        ele.style.display = ele.style.display === 'block' ? 'none' : 'block';
    }
} 
```

# sql - 选择具有多个孩子的单亲到自定义实体

> ID：14617286
> 
> 赞同：4
> 
> 时间：2013-01-31T02:04:56.177
> 
> 标签：sql, linq, grouping, devart

我正在尝试使用涉及父/子关系 (1:n) 的表的选择语句来生成自定义实体。我尝试对选定的对象进行分组，但在想出解决方案时遇到了麻烦。

我的数据将是这种格式：

```
ParentTable
Userid | Col1 | Col2 | ... | Coln

ChildTable:
Id | Userid | Col1 | Col2 | ... | Coln 
```

我试图产生的结果对象是这样的：

```
Custom { UserID, IEnumerable<ChildTable> } 
```

我写了一个查询：

```
 from parent in db.ParentTable
    join child in db.ChildTable on new { Userid = parent.Id } equals new { Userid = child.Userid } into child_join
    from child in child_join.DefaultIfEmpty()
    where
         child.Col1 == Argument1 &&
         child.Col2 == Argument2
    select new {
         Username = parent.Username,
         child.Col1,
         child.Col2,
         child.Col3,
         child.Coln 
   } 
```

这将返回这个结果：

```
Username | Child Col1 | Child Col2 | Child Col3 | .. |Child Coln
asdf        1              11           22        ..     33
asdf        2              22           33        ..     44
asdf        3              33           44        ..     55
qwer        4              44           55        ..     66
qwer        5              55           66        ..     77
qwer        6              66           77        ..     88
zxcv        7              77           88        ..     99
zxcv        8              88           99        ..     00 
```

我想实现这一点：

```
Username | IEnumerable<Child>
asdf     |     {{1             11           22        ..     33}
         |      {2             22           33        ..     44}
         |      {3             33           44        ..     55}}
qwer     |     {{4             44           55        ..     66}
         |      {5             55           66        ..     77}
         |      {6             66           77        ..     88}}
zxcv     |     {{7             77           88        ..     99}
                {8             88           99        ..     00}} 
```

我正在尝试按用户名对项目进行分组，并以 Custom { UserID, IEnumerable } 的形式生成一个自定义对象，一旦完成，我就可以在其中序列化对象。任何帮助表示赞赏。编辑：关于数据结构，由于我正在连接到第 3 方系统，因此无法更改它，因此我正在使用给定的内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T02:30:18.713

我想也许你在这里寻找的是一个子查询。我会尝试这样的事情：

```
from parent in db.ParentTable
select new {
  Username = parent.Username,
  Children = (from child in db.ChildTable
              where child.UserId == parent.UserId
              select child)
} 
```

如果您只想从 groupby 查询中填充列表而不循环，您可以执行以下操作：

```
List<ResultDataClass> returnData = dataResult.GroupBy(item => new KeyValuePair<int, string>(item.UserID, item.UserName), item => item)
                            .Select(rdc => var newdata = new ResultDataClass(userData.Key.Key, userData.Key.Value, userData.Select(item => item.TrackData))).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-14T22:53:20.327

虽然这不是一个理想的解决方案，但我决定在执行查询之后、但在序列化数据之前对对象进行分组。我尝试应用 'group by' 子句，但我没有任何聚合可应用，因为我没有尝试找到子项的最大值或总和，而是直接组。我的（未优化的）解决方案看起来像这样，使用我的原始查询，但放置在自定义实体类中：

```
from parent in db.ParentTable
join child in db.ChildTable on new { Userid = parent.Id } equals new { Userid = child.Userid }
where
      child.Col1 == Argument1 &&
      child.Col2 == Argument2
select new ChildDataDomainModelClass {
      Username = parent.Username,
      child.Col1,
      child.Col2,
      child.Col3,
      child.Coln 
}

 //I had grouped the object like this, where the object type returned on the grouping is of type IEnumerable<IGrouping<KeyValuePair<int, string>, ChildDataDomainModelClass>>:

List<ResultDataClass> returnData= new List<ResultDataClass>();
var groupedByUserName = dataResult.GroupBy(item => new KeyValuePair<int, string>(item.UserID, item.UserName), item => item);
        foreach (var userData in groupedByUserName)
        {
             var newdata = new ResultDataClass(userData.Key.Key, userData.Key.Value, userData.Select(item => item.TrackData)); //TrackData is what I have named the Child Data that was returned
             returnData.Add(newdata);
        } 
```

我很欣赏所提供的意见。如果有人对此问题有更优雅的解决方案，我不必在创建自定义类之前遍历对象，请告诉我。理想情况下，我不必创建“ChildDataDomainModelClass”，通过我的查询，我会选择新的“ResultDataClass”。我希望这会帮助其他遇到此问题的人。如果我想出一个解决方案，我会相应地更新这篇文章。我感谢大家的意见。谢谢。

# google-chrome - 如何设置组件构建以构建铬？

> ID：14617287
> 
> 赞同：0
> 
> 时间：2013-01-31T02:04:57.763
> 
> 标签：google-chrome, build, chromium

我正在尝试构建 Chromium 并坚持涉及构建组件构建的步骤。

我已经尝试过[http://www.chromium.org/developers/how-tos/component-build](http://www.chromium.org/developers/how-tos/component-build)上的说明，但我很难让它们工作。

我在命令提示符中输入“python build\gyp_chromium -D”component=shared_library”并得到：

```
 C:\Users\username>python build\gyp_chromium -D"compoment=shared_library"
 C:\depot_tools\python_bin\python.exe: can't open file 'build\gyp_chromium': [Err
 no 2] No such file or directory 
```

我究竟做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-24T13:07:24.200

文件名为 gyp_chromium.py。你忘记了扩展名

# c# - 将工具提示绑定到 Content Presenter 内容

> ID：14617290
> 
> 赞同：4
> 
> 时间：2013-01-31T02:05:08.413
> 
> 标签：c#, wpf, xaml, tooltip

我正在设计一个 TreeViewItem。该项目有一个内容演示者，我希望显示一个工具提示：

```
<ContentPresenter x:Name="PART_Header"
             Cursor="Hand"
             Grid.Column="1"
             ContentSource="Header"
             HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}">
   <ContentPresenter.ToolTip>
       <ToolTip 
                 Placement="RelativePoint" 
                 VerticalOffset="-2" 
                 HasDropShadow="False"
                 BorderBrush="#767676" 
                 Background="#FFF" 
                 Padding="0,1,0,1"
                 VerticalAlignment="Center"
                 Content="{Binding RelativeSource={RelativeSource FindAncestor, 
                 AncestorType={x:Type ContentPresenter}}, Path=Content}"/>
   </ContentPresenter.ToolTip>
</ContentPresenter> 
```

这实际上是设置项目控件模板的较大设置器的一部分。但是，我似乎无法将工具提示的内容绑定到内容演示者的内容。它一直显示为空白（一个小黑框）。我是绑定和 WPF 的新手，所以请原谅。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T02:20:21.807

工具提示和其他弹出窗口存在于主视觉树之外，因此不能使用 RelativeSource 来获取父级。尝试使用 ToolTip 的 PlacementTarget 属性来访问其父 ContentPresenter：

```
Content="{Binding RelativeSource={RelativeSource Self}, Path=PlacementTarget.Content}" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-18T18:02:11.053

我不明白您为什么只将绑定添加到工具提示属性本身？

```
<ContentPresenter ToolTip="{Binding RelativeSource={RelativeSource Self}, Path=Content}"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-23T09:19:14.840

如果我的工具提示或弹出窗口是创建它们的控件的子级，我想使用绑定。在以前的答案中，我做不到。我为自定义工具提示编写示例，但您可以为弹出、使用行为或其他方式执行此操作 - 这很容易。我的自定义工具提示：

```
public class ToolTipEx : ToolTip
{
    private readonly FrameworkElement _coreParent;

    static ToolTipEx()
    {
        DefaultStyleKeyProperty.OverrideMetadata(typeof(ToolTipEx), new FrameworkPropertyMetadata(typeof(ToolTipEx)));
    }

    public ToolTipEx(FrameworkElement parent)
    {
        _coreParent = parent;
    }

    public override void OnApplyTemplate()
    {
        base.OnApplyTemplate();
        var method = typeof(FrameworkElement).GetMethod("AddLogicalChild", BindingFlags.Instance | BindingFlags.NonPublic);
        method.Invoke(_coreParent, new object[] { Parent });
    }
} 
```

之后，您可以使用正确的绑定：

```
<Style TargetType="{x:Type controls:ToolTipEx}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type ToolTip}">
                <Border Background="Black"
                        CornerRadius="3">
                    <TextBlock Text="{Binding RelativeSource={RelativeSource AncestorType={x:Type controls:MyControl}}, Path=MyProperty}"
                               Margin="1"
                               Foreground="#FFFFFF"
                               FontWeight="Bold"
                               TextTrimming="CharacterEllipsis"
                               TextWrapping="NoWrap"
                               TextAlignment="Center"/>
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

# uiviewcontroller - 单击返回时获取委托的价值？

> ID：14617292
> 
> 赞同：0
> 
> 时间：2013-01-31T02:05:19.933
> 
> 标签：uiviewcontroller, ios6, delegates, uinavigationcontroller, protocols

我有两个类文件。ViewController 和ChooseServerView。用户单击 ViewController 类中的一个单元格，该单元格将推送到 ChooseServerView。当用户在 ChooseServerView 中进行选择时，该单元格的值将传递给委托。现在，这两个视图位于导航控制器的前面，因此在 ChooseServerView 中有一个后退按钮。当用户单击返回时，我想使用委托的新值更新第一个视图中的单元格，这有意义吗？

视图控制器.h

```
#import <UIKit/UIKit.h>
#import "ChooseServerView.h"

@interface ViewController : UIViewController <UITableViewDataSource, UITableViewDelegate, serverUserChoice>

{
    NSString *testLocation;
}

@property (nonatomic, retain) NSString *testLocation;

@end 
```

查看控制器.m

```
#import "ViewController.h"
#import "ChooseServerView.h"
#import "AppDelegate.h"

@interface ViewController ()

@end

@implementation ViewController
@synthesize testLocation;

- (void)viewDidLoad
{

   NSUserDefaults *sharedPref = [NSUserDefaults standardUserDefaults];
   testLocation =[sharedPref stringForKey:@"defaultLocation"];

    NSLog(@"Location Chosen: %@",testLocation);

    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

#pragma mark - Table View Methods

- (void) userDidChoose:(NSString *) server {

    testLocation = server;
    NSLog(@"Test Location %@", server);

}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView;              // Default is 1 if not implemented
{
    return 2;
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section;    // fixed font style. use custom view (UILabel) if you want something different

{

    switch (section) {
        case 0:
            return @"Choose Test Location:";
            break;
        case 1:
             return @"Choose Test Type:";
        default:
            return @"Unknown";
            break;
    }

}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section;

{
    switch (section) {
        case 0:
            return 1;
            break;
        case 1:
            return 1;
        default:
            return 0;
            break;
    }

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath;

{

    UITableViewCell *serverLocCell = [tableView dequeueReusableCellWithIdentifier:@"serverLocation"];

    switch (indexPath.section) {
        case 0:
            serverLocCell.textLabel.text = testLocation;
            serverLocCell.detailTextLabel.text = @"Change";

            break;
        case 1:
            serverLocCell.textLabel.text = @"Speed Test";
            serverLocCell.detailTextLabel.text = @"Change";
            break;
        default:
            break;
    }

    return serverLocCell;

}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath

{
    switch (indexPath.section) {
        case 0:
       [self performSegueWithIdentifier:@"toServerChoice" sender:self];
            break;
        case 1:
           [self performSegueWithIdentifier:@"toTestType" sender:self];
            break;
        default:
            break;
    }

}
@end 
```

选择服务器视图.h

```
#import <UIKit/UIKit.h>

@class ViewController;

@protocol serverUserChoice <NSObject>
@optional

- (void)userDidChoose:(NSString *) server;

@end

@interface ChooseServerView : UIViewController <UITableViewDataSource, UITableViewDelegate, serverUserChoice>

{
    NSArray *serverSelection;
    NSArray *tqServerSelection;
}

@property (nonatomic, retain) NSArray *serverSelection;
@property (nonatomic, retain) NSArray *qServerSelection;
@property (weak, nonatomic) IBOutlet UITableView *tableView;
@property(retain) NSIndexPath* lastIndexPath;
@property (nonatomic, assign) id <serverUserChoice> serverDelegate;

@end 
```

选择服务器视图.m

```
#import "ChooseServerView.h"
#import "ViewController.h"
#import "AppDelegate.h"

#define totalSections 2
#define standardSection 0
#define qualitySection 1

@interface ChooseServerView ()

@end

@implementation ChooseServerView;
@synthesize serverSelection;
@synthesize qServerSelection;
@synthesize lastIndexPath;
@synthesize serverDelegate;

- (void)viewDidLoad
{

    serverSelection = [[NSArray alloc] initWithObjects:@"Chicgo, IL",@"London, UK",@"San Jose, CA",@"Washington, DC", nil];
    qServerSelection = [[NSArray alloc] initWithObjects:@"Chicgo, IL (Q)",@"London, UK (Q)",@"San Jose, CA (Q)",@"Washington, DC (Q)", nil];
    [super viewDidLoad];

}

#pragma mark - Table View Methods

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView;              // Default is 1 if not implemented
{
    return totalSections;
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section;    // fixed font style. use custom view (UILabel) if you want something different

{
    switch (section) {
        case standardSection:
            NSLog(@"Std Heading Set");
            return @"Standard Test Locations:";
            break;
        case qualitySection:
            NSLog(@"Qual Heading Set");
            return @"Quality Test Locations:";
            break;
        default:
            NSLog(@"Section Count Error");
           return @"Section Count Error";
            break;
    }

}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section;

{
    if (section == 0) {
        NSLog(@"Std Loc Set");
        return [serverSelection count];

    }
    else {
        NSLog(@"Quality Loc Set");
        return [qServerSelection count];

    }
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath;

{

    UITableViewCell *serverLoc = [tableView dequeueReusableCellWithIdentifier:@"serverSelection"];

    switch (indexPath.section) {
        case standardSection:
            serverLoc.textLabel.text = [self.serverSelection objectAtIndex:indexPath.row];

            break;
        case qualitySection:
            serverLoc.textLabel.text = [self.qServerSelection objectAtIndex:indexPath.row];
            break;
        default:
            break;
    }

    return serverLoc;

}

-(void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    NSString *cellvalue;

    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    cell.accessoryType = UITableViewCellAccessoryCheckmark;
    cellvalue = cell.textLabel.text;
    [serverDelegate userDidChoose:cellvalue];
    NSLog(@"Cell Selected is %@",cellvalue);
    [cell setSelected:FALSE animated:TRUE];

}
@end 
```

我可以看到正确的值被传递给了委托，我只是不知道在使用导航控制器实现的自动后退按钮返回时如何“调用”该委托/方法。

任何想法都会很棒。

根据下面的答案：

添加到我的 ViewController.h

```
@property (nonatomic, weak) IBOutlet UITableView *tableView; 
```

添加到我的 ViewController.m

```
-(void) viewWillAppear:(BOOL)animated {

    [super viewWillAppear:animated];
    [self.tableView reloadData];

} 
```

![出口](../Images/9af5121007a6ce065677295037518d21.png)

在这个阶段仍然没有快乐。按下导航控制器提供的后退按钮后，第一个单元格无法更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T02:18:42.000

看起来你快到了。

我认为问题在于您的 UITableView 没有被重新加载以表示 testLocation 的更新值。我没有看到对您的 ViewController 管理的 UITableView 的引用，首先向 ViewController.m 添加一个插座以指向此表视图。

然后，在 ViewController.m 中添加以下内容

-（无效）viewWillAppear：（BOOL）动画{

```
[super viewWillAppear:animated];
[self.tableView reloadData]; 
```

}

您还需要确保将 ViewController 设置为 ChooseServerViewController 的委托。（为了清楚起见，您应该将 ChooseServerView.m 重命名为 ChooseServerViewController.m，因为它是一个视图控制器子类——我在下面这样称呼它）

您可以通过在 ViewController.m 中添加 prepare for segue 方法来设置委托 - 类似于：

*   (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender { ChooseServerViewController *viewController = (ChooseServerViewController *)segue.destinationViewController; viewController.serverDelegate = self; }

我还会考虑将 UITableViewController 用于这两个控制器类，因为这似乎是您正在寻找的功能类型。

# module - ti.worker Titanium 模块的工作文件放在哪里？

> ID：14617298
> 
> 赞同：0
> 
> 时间：2013-01-31T02:05:44.820
> 
> 标签：module, titanium, worker

我已经安装了模块，但我无法确定我的 worker.js 文件应该放在项目中的哪个位置。这是一个合金项目，我尝试将文件放在几个不同的地方。

我将我的工人削减到这个进行测试：

```
worker.addEventListener('message', function(event){
   worker.postMessage('complete');
}); 
```

我不断收到此错误：

```
The application has crashed with an uncaught exception 'NSInvalidArgumentException'.
[DEBUG] Reason:
[DEBUG] *** -[NSURL initFileURLWithPath:]: nil string parameter
[DEBUG] Stack trace:
[DEBUG] 0   CoreFoundation                      0x03475012 __exceptionPreprocess + 178
[DEBUG] 1   libobjc.A.dylib                     0x03082e7e objc_exception_throw + 44
[DEBUG] 2   CoreFoundation                      0x03474deb +[NSException raise:format:] + 139
[DEBUG] 3   Foundation                          0x00cb0281 -[NSURL(NSURL) initFileURLWithPath:] + 94
[DEBUG] 4   Foundation                          0x00cb020b +[NSURL(NSURL) fileURLWithPath:] + 67
[DEBUG] 5   Swap-A-Doodle                       0x00046259 -[KrollBridge evalFileOnThread:context:] + 265
[DEBUG] 6   libobjc.A.dylib                     0x03096705 -[NSObject performSelector:withObject:withObject:] + 77
[DEBUG] 7   Swap-A-Doodle                       0x0004bbd1 -[KrollInvocation invoke:] + 145
[DEBUG] 8   Swap-A-Doodle                       0x0004e108 -[KrollContext invokeOnThread:method:withObject:callback:selector:] + 248
[DEBUG] 9   Swap-A-Doodle                       0x00046a9d -[KrollBridge evalFile:callback:selector:] + 125
[DEBUG] 10  Swap-A-Doodle                       0x000479b1 -[KrollBridge didStartNewContext:] + 2657
[DEBUG] 11  libobjc.A.dylib                     0x030966b0 -[NSObject performSelector:withObject:] + 70
[DEBUG] 12  Swap-A-Doodle                       0x0004f0ef -[KrollContext main] + 3199
[DEBUG] 13  Foundation                          0x00ce40d5 -[NSThread main] + 76
[DEBUG] 14  Foundation                          0x00ce4034 __NSThread__main__ + 1304
[DEBUG] 15  libsystem_c.dylib                   0x977a1ed9 _pthread_start + 335
[DEBUG] 16  libsystem_c.dylib                   0x977a56de thread_start + 34
[DEBUG] 2013-01-30 19:10:35.372 Swap-A-Doodle[24095:1da0b] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** -[NSURL initFileURLWithPath:]: nil string parameter'
[DEBUG] *** First throw call stack:
[DEBUG] (0x3475012 0x3082e7e 0x3474deb 0xcb0281 0xcb020b 0x46259 0x3096705 0x4bbd1 0x4e108 0x46a9d 0x479b1 0x30966b0 0x4f0ef 0xce40d5 0xce4034 0x977a1ed9 0x977a56de) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T18:48:30.930

这是 SDK 2.1+ 的问题，没有计划修复。[https://github.com/appcelerator-modules/ti.worker/issues/5](https://github.com/appcelerator-modules/ti.worker/issues/5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T04:05:20.480

把它放进去`app/lib`，里面的所有文件`app/lib`都将放在生成`Resources/`目录的基础上，这样你就可以在你用来实例化worker的任何控制器中像这样访问worker.js：

```
var worker = require('ti.worker');

// create a worker thread instance
var task = worker.createWorker('worker.js');
task.postMessage({
   msg:'Hello'
}); 
```

这*应该*将消息发布到您的 worker.js 文件中。不过还没有测试，祝你好运！

# ios - iPad 方向无法正常工作

> ID：14617299
> 
> 赞同：0
> 
> 时间：2013-01-31T02:05:45.760
> 
> 标签：ios, objective-c, xcode, ipad

我发布了一个应用程序，由于某种原因，只有一些人在使用该应用程序时遇到了方向问题。也就是说，它以纵向模式打开，并且从这里不可旋转，因为应用程序设置为仅允许在 LandscapeLeft 和 LandscapeRight 中使用。大多数人都没有遇到这个问题，但是我最近通过我们的支持页面收到了一些投诉。

有问题的人似乎在 iOs 5.1 和 iPad gen 1s 上，这是我的应用程序支持的最低操作系统。

这是处理旋转的代码：

```
 - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
   {
       if(interfaceOrientation == UIInterfaceOrientationLandscapeRight)
       {
           return YES;
       }
       else
       {
           return NO;
       }
   } 
```

这是.plist

[http://tinypic.com/r/nnvfhz/6](http://tinypic.com/r/nnvfhz/6)

任何建议都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T02:22:23.230

在 iOS5 中，您必须重写该`shouldAutorotateToInterfaceOrientation:`方法：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    // support all interface orientations
    return YES;
} 
```

从 iOS 6 开始，此方法已被弃用，您应该使用以下方法：

```
- (BOOL)shouldAutorotate {
    // return whether autorotation is supported
    return TRUE;
}
- (NSUInteger)supportedInterfaceOrientations {
    // return the mask that represents the supported interface orientations
    return UIInterfaceOrientationMaskAll;
} 
```

最后，我会提到这个方法，因为它经常适用：

```
- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation {
    // set the preferred orientation of view controllers presented in full-screen
    return UIInterfaceOrientationLandscapeRight;
} 
```

# java - 使用 Android 共享意图在 facebook 中共享文本

> ID：14617300
> 
> 赞同：5
> 
> 时间：2013-01-31T02:05:48.327
> 
> 标签：java, android, facebook, android-intent, facebook-android-sdk

> **可能重复：**
> [Facebook 的 Android 共享意图](https://stackoverflow.com/questions/7076717/android-share-intent-for-facebook)

我正在尝试在 facebook 中与 Android 中的共享 Intent 共享一些文本和链接，但它不起作用，这是我的代码

```
Intent sendIntent = new Intent();
sendIntent.setAction(Intent.ACTION_SEND);
sendIntent.setType("text/plain");
sendIntent.putExtra(Intent.EXTRA_TEXT, 
"some text here to share" + "https://maps.google.com/maps?saddr=-33.4429,+-70.6539");

startActivity(Intent.createChooser(sendIntent, getResources().getText(R.string.d_title))); 
```

但只是共享链接，文本丢失......在推特上它工作正常，但在脸书上不行。请帮忙 :S 谢谢

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2013-01-31T02:19:02.727

-- 这个答案已经改变 --

根据 OP，这实际上是不可能的。他找到了一个链接（他在下面评论了它）但又在这里：[https ://developers.facebook.com/bugs/332619626816423](https://developers.facebook.com/bugs/332619626816423)

由于隐私政策，显然（或当时）不允许预先填写用户的消息。

# selenium-webdriver - 服务器没有响应 url - Selenium WebDriver (C#)

> ID：14617301
> 
> 赞同：0
> 
> 时间：2013-01-31T02:05:51.873
> 
> 标签：selenium-webdriver

**更新：**

在更新到它的类似情况后，我遇到了同样的问题，`2.29`它非常不一致，这是令人沮丧的部分。

**更新结束：**

Selenium WebDriver 2.25 版本。浏览器：FF (17.0.1 版本) & IE (8)

最烦人/让我发疯的一件事是关于过时的元素，我仍然不确定我的测试用例如何一直运行通过；有时我的测试用例通过，有时失败，我正在使用 CSSSelector 查找元素，但仍然打开/关闭我的测试用例失败....

这是我用来查找元素的内容。

这是我在 C# 中的代码

```
public class WebDriverUtil
{
       public static IWebDriver driver = StartBrowser();
       private static FirefoxProfile _ffp;
       private static IWebDriver _driver;

        private static IWebDriver StartBrowser()
        { 
            switch (Common.BrowserSelected)
            {
                case "ff":
                    _ffp = new FirefoxProfile();
                    _ffp.AcceptUntrustedCertificates = true;
                    _driver = new FirefoxDriver(_ffp);
                    break;
                case "ie":                    
                    var options = new InternetExplorerOptions();
                    options.IntroduceInstabilityByIgnoringProtectedModeSettings = true;
                    _driver = new InternetExplorerDriver(options);
                    _driver.Manage().Timeouts().SetPageLoadTimeout(TimeSpan.FromSeconds(2));
                    break;
                case "chrome":
                    //_driver = new ChromeDriver();
                    break;
            } 
            return _driver;
        }    

        public static IWebElement WaitForElement(By by)
        {
            var wait = new WebDriverWait(driver, TimeSpan.FromSeconds(30));
            return wait.Until(drv => drv.FindElement(by));
        }
}

public class TestCaseEmployee: WebDriverUtil
{
   public static bool EmployeeCase()
   {
      //....
      WaitForElement(By.LinkText("Select All Employee")).Click(); //<<< see error below
   }
} 
```

//错误信息：

```
Test 'M:TestCases.TestCaseEmployee' failed: No response from server for url http://localhost:7056/hub/session/79b742cf-e1dc-4016-bdbb-c2de93cd8fa4/element
    OpenQA.Selenium.WebDriverException: No response from server for url http://localhost:7056/hub/session/79b742cf-e1dc-4016-bdbb-c2de93cd8fa4/element
    at OpenQA.Selenium.Support.UI.DefaultWait`1.PropagateExceptionIfNotIgnored(Exception e)
    at OpenQA.Selenium.Support.UI.DefaultWait`1.Until[TResult](Func`2 condition) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T21:05:36.307

我有同样的问题并以这种方式解决：

a) 避免使用诸如'do wity retry'之类的方法来操作 IWebElements，因为这样测试需要花费很多时间来运行，这是不必要的，并且测试会间歇性地失败。

b) 将 Firefox 版本降级到 5（可能从 FF 3.6 到 6 可以正常工作，但新版本的 FF 会引发间歇性异常，例如“集线器/会话无响应...”

c) 如果您需要在页面上处理通过 Ajax 加载的测试中的元素，请务必提供一个可以停止元素加载的 js 函数，因此您应该在 FindElement 之前从 WebDdriver 调用此函数并执行您想要的操作。

# javascript - 无法从 Rally wsapidatastore 访问数据

> ID：14617302
> 
> 赞同：1
> 
> 时间：2013-01-31T02:06:00.413
> 
> 标签：javascript, rally

当我创建 WsapiDataStore 时，store.data.items 和 store.data.keys 返回空数组，尽管我在执行 console.log(store.data) 时能够看到键和项

```
store = Ext.create('Rally.data.WsapiDataStore', {
    model: 'Defect',
    context: {
        project: '/project/xxxxxx'
    },
    autoLoad: true,
    fetch: ['Rank', 'FormattedID', 'Name']
}); 
```

console.log(store.data) 的输出：

```
constructor {items: Array[0], map: Object, keys: Array[0], length: 0, allowFunctions:   false…}
    allowFunctions: false
    events: Object
    generation: 8
    getKey: function (record) {
    hasListeners: HasListeners
    items: Array[7]
    keys: Array[7]
    length: 7
    map: Object
    sorters: constructor
    __proto__: TemplateClass 
```

注意第一行是如何说“items: Array[0]”和“keys: Array[0]”的，但是当展开它时会说“items: Array[7]”和“keys: Array[7]”。当我进一步扩展时，我也能够看到这 7 条记录。

当我添加负载侦听器并从侦听器函数访问数据时，一切都按预期工作（但我不想这样做）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T23:09:34.813

I think the best way is to process the data via two Rally.data.WsapiDataStore's. You'll need to chain the listeners for the two stores together in order to properly handle the asynchronous loads. Here's an example that illustrates the process:

```
<!DOCTYPE html>
<html>
<head>
    <title>MultipleModelExample</title>

    <script type="text/javascript" src="https://rally1.rallydev.com/apps/2.0p5/sdk.js"></script>

    <script type="text/javascript">
        Rally.onReady(function() {
            Ext.define('CustomApp', {
                extend: 'Rally.app.App',
                componentCls: 'app',

                // Combined Story/Defect Records
                dataRecords: null,

                launch: function() {
                    //Write app code here

                    this.dataRecords = [];

                    Rally.data.ModelFactory.getModels({
                        types: ['HierarchicalRequirement','Defect'],
                        scope: this,
                        success: function(models) {
                            this.myModels = models;

                            this.storyStore = Ext.create('Rally.data.WsapiDataStore', {
                                model: models.HierarchicalRequirement,
                                fetch: true,
                                autoLoad: true,
                                remoteSort: true,
                                sorters: [
                                    { property: 'FormattedID', direction: 'Asc' }
                                ],
                                listeners: {
                                    load: this._processStories,
                                    scope: this
                                }
                            });
                        }
                    });
                },

                _processStories: function(store, records, successful, opts) {

                    var storyRecords = [];

                    Ext.Array.each(records, function(record) {
                        //Perform custom actions with the data here
                        //Calculations, etc.
                        storyRecords.push({
                            FormattedID: record.get('FormattedID'),
                            Name: record.get('Name'),
                            Description: record.get('Description')
                        });
                    });

                    this.dataRecords = storyRecords;

                    this.defectStore = Ext.create('Rally.data.WsapiDataStore', {
                        model: this.myModels.Defect,
                        fetch: true,
                        autoLoad: true,
                        remoteSort: true,
                        sorters: [
                            { property: 'FormattedID', direction: 'Asc' }
                        ],
                        listeners: {
                            load: this._processDefects,
                            scope: this
                        }
                    });
                },

                _processDefects: function(store, records, successful, opts) {

                    var defectRecords = [];

                    Ext.Array.each(records, function(record) {
                        //Perform custom actions with the data here
                        //Calculations, etc.
                        defectRecords.push({
                            FormattedID: record.get('FormattedID'),
                            Name: record.get('Name'),
                            Description: record.get('Description')
                        });
                    });

                    var combinedRecords = defectRecords.concat(this.dataRecords);

                    this.add({
                        xtype: 'rallygrid',
                        store: Ext.create('Rally.data.custom.Store', {
                            data: combinedRecords,
                            pageSize: 25
                        }),
                        columnCfgs: [
                            {
                                text: 'FormattedID', dataIndex: 'FormattedID'
                            },
                            {
                                text: 'Name', dataIndex: 'Name', flex: 1
                            },
                            {
                                text: 'Description', dataIndex: 'Description', flex: 1
                            }
                        ]
                    });
                }

            });

            Rally.launchApp('CustomApp', {
                name: 'MultipleModelExample'
            });
        });
    </script>

    <style type="text/css">
        .app {
             /* Add app styles here */
        }
    </style>
</head>
<body></body>
</html> 
```

# php - 如何以本地时间格式显示 Unix 时间

> ID：14617305
> 
> 赞同：1
> 
> 时间：2013-01-31T02:06:08.337
> 
> 标签：php, javascript, datetime, timezone, unix-timestamp

我有一个 php 变量 say `$expTime`(它有一个 unixtime say-1359683953) 。我想在客户端显示这个变量（根据他的当地时间以适当的时间格式）。我对 UTC 、 GMT 、 DST 所有这些东西感到很困惑。任何人都可以建议使用 php 或 javascript 解决此问题。

当我使用`echo date('h:i M d/y',$expTime)`它时，它向我显示了错误的时间。

我如何将时间保存到数据库：
`var exp_day= parseInt($("#exp_day").val());`
`var exp_hrs= parseInt($("#exp_hrs").val());`
`var exp_min= parseInt($("#exp_min").val());`
`var exp_time = (exp_day*24*60*60) + (exp_hrs*60*60) + (exp_min*60) ;`
然后我使用 ajax 将 exp_time 发布到 php 文件中 -
`$expTime = time() + $_POST["exp_time"];`

我从数据库中检索的是 $expTime 。这个 $expTime 我想根据当地时区在所有客户端系统上显示它（也通过确保夏令时）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T02:08:17.813

将[DateTime](http://www.php.net/manual/en/class.datetime.php)与[时区](http://www.php.net/manual/en/class.datetimezone.php)一起使用：

```
$datetime = new DateTime('@1359683953');
echo $datetime->format('h:i M d/y') . "<br>";
$datetime->setTimezone(new DateTimeZone('America/Los_Angeles'));
echo $datetime->format('h:i M d/y'); 
```

[看到它在行动](http://codepad.viper-7.com/QWfGj0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T02:20:07.707

UNIX 时间值通常是自纪元以来的 UTC 秒数。Javascript[时间值](http://www.ecma-international.org/ecma-262/5.1/#sec-15.9.1.1)是自同一纪元以来的 UTC 毫秒。ECMA-262 [Date.prototype.toString](http://www.ecma-international.org/ecma-262/5.1/#sec-15.9.5.2)方法自动生成一个表示本地时间的字符串，并在适用时考虑夏令时。

您还可以使用[Date](http://www.ecma-international.org/ecma-262/5.1/#sec-15.9)方法创建自己的格式化字符串，它们还返回本地时间和日期值。如果您想在 UTC 中工作，也有 UTC 方法。

要在客户端上执行此操作，只需从服务器提供一个 UTC 时间值，然后您在 javascript 中需要的只是：

```
var timeValue = 1359683953;  // assume seconds
var date = new Date(timeValue * 1000);  // convert time value to milliseconds

alert(date); //  Fri 01 Feb 2013 11:59:13 GMT+1000 
```

# openssl - 如何从密钥对的现有公钥创建证书签名请求 (CSR)（假设私钥在其他地方的安全位置）？

> ID：14617306
> 
> 赞同：5
> 
> 时间：2013-01-31T02:06:19.667
> 
> 标签：openssl

我正在使用 OpenSSL。openSSL 的所有引用都集中在以下两个创建 CSR 的命令上；一个要求您输入一个已经存在的私钥（并派生公钥？？？），第二个将创建一个新的密钥对。我想使用我的公钥而不是创建一个新的。

创建 CSR 和私钥：

```
openssl req -newkey rsa:2048 -keyout my.key -out my.csr 
```

从现有私钥创建 CSR：

```
openssl req -key my.key -out my.csr 
```

对于第一个选项，我不明白为什么需要将私钥作为命令中的参数。我看到很多网站都说 CSR 是加密的，但这似乎不是真的。如果您将 CSR 放入 CSR 解码器（即[http://www.sslshopper.com/csr-decoder.html](http://www.sslshopper.com/csr-decoder.html)），则可以对其进行解析；因此我唯一的结论是它只是编码而不是加密。

为什么要在这些命令中输入私钥？甚至如何使用私钥？如果它正在加密某些东西，它在加密什么？

如果不使用，有人可以告诉我如何只用我的密钥对的公钥创建一个 CSR 吗？

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T02:10:32.967

CSR 使用私钥进行签名，以防止在传输到 CA 的过程中被篡改。因此，您需要私钥来创建一个。

可以创建没有签名的 CSR，但这种结构并不常见，并且 openssl 二进制文件本身没有创建它们的规定。

使用您首先列出的 openssl 命令生成新的 CSR+密钥对时，它不会加密 CSR（因为这不是可取的行为。CSR 是您提交的公共数据，而不是秘密信息），而是私钥。

# jquery - AddThis LIKE/+1 .live('click'.. jquery

> ID：14617308
> 
> 赞同：0
> 
> 时间：2013-01-31T02:06:51.760
> 
> 标签：jquery, facebook, click, google-plus-one, addthis

在单击我使用 AddThis 添加到我的网站的 facebook like 按钮后，我试图调用一个函数。问题是，如果它是一个like 按钮，则该函数不会调用。使用分享按钮，一切正常。这是代码：

```
<body>
<div class="addthis_toolbox addthis_default_style">
  <a class="addthis_button_facebook_like share_button" id="1"></a>    
</div>
</body>

$(function(){
    $('.share_button').live('click', function () {
    alert("hello");
    });     
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T08:14:54.207

您必须使用 edge.create fir like 按钮。[https://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/](https://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/)

# c# - 无法向 observablecollection 列表框添加新行？

> ID：14617310
> 
> 赞同：1
> 
> 时间：2013-01-31T02:07:01.710
> 
> 标签：c#, wpf, listbox, observablecollection, datacontext

在我的项目中，我有以下页面：

> 主窗口.xaml
> 
> Window1.xaml
> 
> 用户.cs
> 
> 应用程序.xaml

我声明了`Name`and`Age`属性，`User.cs`我`MainWindow.xaml`为 a 做了`ObservableCollection`a `ListBox`。`MainWindow`有一个`Button Add`。当我们点击`Add button`. 然后`Window1.xaml`显示表格。其中有两个`TextBoxes`名称和年龄以及一个按钮 ( `ADD Name`)。现在我想当我们单击时`Add Name button`，两个文本框中的详细信息都附加`ObservableCollection`到`Mainwindow.xaml.cs`.

请建议我想要我可以做什么：

```
public partial class Window1 : Window
{

    public Window1()
    {
        InitializeComponent();
    }

    private void OnInit(object sender, RoutedEventArgs e)
    {
        string textA=textBox1.Text;
        int textB=Convert.ToInt32(textBox2.Text);
        this.DataContext = new User(textA, textB);
    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        User user = (User)(this.DataContext);
        new MainWindow().observableCollection.Add(user);
        this.Close();
    }
} 
```

现在我运行了这段代码，我无法获取用户对象中的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T02:46:49.177

问题是您没有访问`MainWindow`CbservableCollection，您正在创建一个新的`MainWindow`.

如果这`Window1`是一个对话框，您有几个选项

1.  将 MainWindow 作为其所有者传递给 Window1
2.  将 Window1 用作对话框并在关闭时获取更改

我个人认为第二个选项是最好的，但这取决于你如何打电话`Window1`

示例 2：

主窗口类

```
public partial class MainWindow : Window
{
    private ObservableCollection<User> _myList = new ObservableCollection<User>();

    public MainWindow()
    {
        InitializeComponent();
    }

    public ObservableCollection<User> MyCollection
    {
        get { return _myList; }
        set { _myList = value; }
    }

    private void button1_Click_1(object sender, RoutedEventArgs e)
    {
        var dialog = new Window1();
        if (dialog.ShowDialog() == true)
        {
            MyCollection.Add(dialog.NewUser);
        }
    }
} 
```

主窗口xml

```
<Window x:Class="WpfApplication8.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="233" Width="405" Name="UI">
    <Grid DataContext="{Binding ElementName=UI}" >
        <ListBox ItemsSource="{Binding MyCollection}" DisplayMemberPath="TextA"  Margin="0,0,0,47" />
        <Button Content="Add" Height="23" HorizontalAlignment="Left" Margin="0,0,0,12" Name="button1" VerticalAlignment="Bottom" Width="75" Click="button1_Click_1" />
    </Grid>
</Window> 
```

Window1 xaml

```
<Window x:Class="WpfApplication8.Window1"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Window1" Height="119" Width="300" Name="UI">
    <StackPanel DataContext="{Binding ElementName=UI}">
        <TextBox Text="{Binding NewUser.TextA}" />
        <TextBox Text="{Binding NewUser.TextB}" />
        <Button Click="button1_Click" HorizontalAlignment="Right" Width="90" Height="30" Content="Add" />
    </StackPanel>
</Window> 
```

Window1 代码

```
public partial class Window1 : Window, INotifyPropertyChanged
{
    private User _newUser = new User();

    public Window1()
    {
        InitializeComponent();
    }

    public User NewUser
    {
        get { return _newUser; }
        set { _newUser = value; NotifyPropertyChanged("NewUser"); }
    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        DialogResult = true;
    }

    public event PropertyChangedEventHandler PropertyChanged;
    public void NotifyPropertyChanged(string property)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(property));
        }
    }
} 
```

用户类

```
public class User : INotifyPropertyChanged
{
    private string _textA;
    private string _textB;

    public string TextA
    {
        get { return _textA; }
        set { _textA = value; NotifyPropertyChanged("TextA"); }
    }

    public string TextB
    {
        get { return _textB; }
        set { _textB = value; NotifyPropertyChanged("TextB"); }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    public void NotifyPropertyChanged(string property)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(property));
        }
    }
} 
```

# ssl - SSL在主域下注册，我们可以用于子域吗？

> ID：14617316
> 
> 赞同：0
> 
> 时间：2013-01-31T02:08:12.910
> 
> 标签：ssl, https, ssl-certificate

我正在使用移动网站，我希望这个网站使用 https，所以我在这里有 2 个域：

```
www.youbeli.com (Main site)
m.youbeli.com (Mobile site) 
```

然后我`m.youbeli.com`用https设置，当我用我的手机（Android）浏览时，我发现错误弹出

```
Security Warning
There are problems with the security certificate for this site 
```

当我查看证书时（以下是信息），：

```
Issued to :
Common name:
www.youbeli.com

Organisational Unit:
GTxxxxxxxxxx 
```

所以，问题是我需要向 m.youbeli.com 注册 SSL 或者这是我的配置错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T02:15:11.677

证书旨在仅验证其中包含的域。您需要获得一个允许您指定的多个域的 SAN 证书，或者，因为这都在一个主域下，所以购买一个通配符证书 (*.youbeli.com)。

# php - 在 MySQL 中缩放递增计数器（用于跟踪页面浏览量）

> ID：14617321
> 
> 赞同：7
> 
> 时间：2013-01-31T02:08:46.557
> 
> 标签：php, mysql, performance, optimization, scalability

我有一个整数 MySQL 列，每次查看页面时都会递增。SQL 查询如下所示：

`UPDATE page SET views = views + 1 WHERE id = $id`

当同一页面（相同的 id）每秒被查看多次（记录将锁定在 MySQL 中）并且查询会使 MySQL 停止运行时，我们开始遇到扩展问题。为了解决这个问题，我们一直在使用以下策略：

每次页面加载时，我们都会在 Memcache 中增加一个计数器，并将作业放入队列（Gearman）中，该队列将在后台（在 3 个工作机器中）更新 MySQL 中的计数器。简化的代码如下所示：

在页面视图中：

```
$memcache->increment("page_view:$id");
$gearman->doBackground('page_view', json_encode(array('id' => $id))); 
```

在后台工作人员中：

```
$payload = json_decode($payload);
$views = $memcache->get("page_view:{$payload->id}");
if (!empty($views)) {
    $mysql->query("UPDATE page SET views = views + $views WHERE id = {$payload->id}");
    $memcache->delete("page_view:{$payload->id}");
} 
```

这运作良好。它允许我们减少对数据库的查询（因为我们在写入数据库之前在 memcache 中聚合视图）并且数据库写入发生在后台，而不是阻止页面加载。

不幸的是，我们又开始看到 MySQL 锁了。似乎非常活跃的页面仍在几乎同时运行，导致 MySQL 再次锁定。锁正在减慢写入速度并经常杀死我们的工人。这导致队列变得非常大，通常有 70k 多个“落后”作业

我的问题：下一步我们应该做什么来扩大规模？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T14:08:31.260

我对Gearman了解不多，所以我可能错了。

每次增加计数器时，您都在排队执行 gearman 任务。我想只有当结果`$memcache->increment`为 1 时才将任务排入队列会更好。我的理由是，当 gearman 任务清除后下一次更新到达时`page_view:$i`，你不会有很长的 gearman 任务队列急于更新这个新的数据库中的值。这应该使您的代码独立于您的更新率，并限制了 gearman 选择新任务的速度（希望这会足够慢）。在一个完美的世界里，你可以让 gearman 延迟这个任务~1s。这将确保您仅以 1 qps 的速率更新此计数器。

独立于 gearman，如果您可以接受较慢的 READ 并假设您使用的是 InnoDB，则可以对这个计数器进行分片。

为此，只需添加一个分片列并使其成为主键的一部分，例如

```
CREATE TABLE page (
     id INTEGER,
     shard INTEGER,
     views INTEGER,
     PRIMARY KEY (id, shard)
) 
```

当你更新这个计数器时，随机选择一个介于 1 - 10 之间的分片。当你读取它时，对`id`你想要读取的所有分片求和。这将使读取速度减慢 10 倍，但它允许您在写入时扩展 10 倍。（当然不需要是10，你可以选择任何你想要的数字。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T02:21:25.060

不确定您使用页数的目的以及记录所有页数的重要性。也许您可以将计数缓存在每台服务器的内存中，然后仅将它们保留在某个固定的时间表上。这样您就可以控制对数据库的访问次数。

当然，这显然不能保证在服务器因任何原因出现故障时计数会保持不变。因此，如果它用于任何重要的审计日志记录或任​​何丢失某些页面视图的问题，这将是行不通的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T02:11:41.287

使用 MySQL 的`INSERT DELAYED....`插入语句。它不会锁定，并会在可以写入时写入。

# machine-learning - Scikits NB 与 NLTK NB 的性能对比

> ID：14617326
> 
> 赞同：1
> 
> 时间：2013-01-31T02:09:43.470
> 
> 标签：machine-learning, nltk, scikit-learn, bayesian-networks, scikits

我通过绘制我的 3类问题。X 轴是训练数据集大小（忘记实际值），Y 是准确度。[这是](http://i50.tinypic.com/ddlwgl.png)我得到的。

这种性能差异有什么原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T10:12:59.137

NLTK 没有实现伯努利朴素贝叶斯。相反，它[`NaiveBayesClassifier`](https://github.com/nltk/nltk/blob/master/nltk/classify/naivebayes.py#L43)使用多项式 NB 决策规则和布尔特征。

虽然实际上有时会推荐这种多项式和伯努利 NB 部分的组合（例如，[Jurafsky 和 ​​Manning](https://www.coursera.org/course/nlp)用于情绪分析），但它通常代表两全其美，并且很可能是错误的结果。

# pdf - 字形边界框和字形原点之间的小间隙的合理性

> ID：14617327
> 
> 赞同：0
> 
> 时间：2013-01-31T02:10:07.793
> 
> 标签：pdf, fonts, coordinates, bounding-box, glyph

在[adobe 的 pdf 1.7 第 241 页](http://www.adobe.com/devnet/acrobat/pdfs/PDF32000_2008.pdf)中，您可以看到字形边界框和字形原点之间的细微差别。知道为什么会有这种差异吗？

这个问题与[另一个问题有关](https://stackoverflow.com/questions/14596106/text-rotation-in-pdf)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T08:58:14.490

关于*为什么存在这种差异*的任何想法 ---*字形边界框和字形原点之间*存在差异的原因可以从该图形正下方的文本中得出：

![字形指标](../Images/8f303027a60161978ae9d7609065fd5c.png)

> 字形原点是字形坐标系中的点 (0, 0)。Tj 和其他文本显示操作符应将要绘制的第一个字形的原点定位在文本空间的原点。
> 
> [...]
> 
> 字形位移是从字形原点到在绘制一行文本的连续字形时通常应放置下一个字形原点的点的距离。

（[图 39，ISO 32000-1 第 9.2.4 节](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/PDF32000_2008.pdf)）。

因此，如果您有连续的字形，则第二个将在该字形的原点之后设置第一个的宽度。如果边界框填满了所有这个宽度，则连续的字形可能会接触，这是不希望的。

因此，边界框无法填充所有宽度（也称为水平位移），需要一些差异。

此外，两个连续字形之间所需的间隙取决于两个字形；为了看起来不错，一个只填充了其边界框一侧的一小部分的字形可能比其边界框的那一侧完全填充的字形需要更少的间隙。所以无论是在左边还是在右边，字形都必须能够表达它对与相邻字形的距离的要求。

因此，差异不能仅集中在右侧（边界框之后）。

这意味着字形原点不能被强制位于边界框的左边界上。

顺便说一句，根据字体，甚至可能有重叠边界框的原因。因此，在某些情况下，您可能会遇到一个起源于边界框内部的字形......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T08:32:12.677

那不是 Adob​​e 的 PDF 参考，那是 ISO 参考，请小心区分两者。该图位于 Adob​​e PDF 参考手册 1.7 版的第 394 页。

对我来说，您认为问题出在哪里并不明显，边界框根本不是从 0,0 开始的。

差异由 llx - 0 给出，因为字形原点始终位于 0,0

# c# - 在 Unity3D 中使用 Zigfu：检查手臂是否抬起的方法

> ID：14617329
> 
> 赞同：0
> 
> 时间：2013-01-31T02:10:15.430
> 
> 标签：c#, unity3d

我是 Unity3D、C# 的初学者，尤其是 Kinect 编程的新手。我希望在我的项目中使用 Zigfu 对我有所帮助，但每次我认为我理解了某些东西时，我都错了。因为我实际上没有任何有意义的代码，所以我用伪代码编写。

我想要做的是检查用户是否举起手臂，如果是，则执行另一种方法。我正在使用 ZigSkeleton 脚本，并且已经连接了手、肘和肩的关节。然后我尝试在 ZigSkeleton 脚本中编写一个类似这样的方法；if (RightShoulder.Rotate(0, 90, -90) then return boolean ArmsRaised = true; 没有任何效果。然后我尝试了； if(RightElbow.Position > RightArm.Position) then boolean ArmsRaised = true;

我已经意识到我完全不知道我在做什么 atm，希望有人可以帮助我理解和/或解释我如何编写这样的方法。

附言; 我只需要一个研究项目的代码，所以我真的不需要了解 Kinect 编程的所有内容（尽管比我目前的知识多一点可能是个好主意：P）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-29T22:43:04.490

嘿，我几乎遇到了同样的问题，但检测到一条腿是否在踢球。我所做的是用对撞机创建一个空的游戏对象。像这样的东西：

```
private void OnTriggerEnter(Collider col)
{
    if (col.name != "HitZone")
        return;
    //Do whatever you want here
} 
```

# java - Java socket swingWorker 正在运行但没有接收或传输消息

> ID：14617331
> 
> 赞同：2
> 
> 时间：2013-01-31T02:10:35.773
> 
> 标签：java, concurrency, swingworker

几天前，我尝试创建一个服务器 - 客户端或客户端服务器作为实验来学习使用线程的套接字，但后来有人告诉我应该使用 swingWorker。我做了一些研究如何使用并在实践中实施它，但它仍然不起作用。即使我获得了连接并使用了.excute()，swingWorker 线程看起来也没有运行。如果你们能帮助找出我做错的地方，那就太好了。SwingWorker 类在 startSever() 和 startClient() 方法中。

```
 private void startServer() {
        SwingWorker <Void, String> runningServer = new SwingWorker<Void, String>(){
        protected Void doInBackground() {
            try {
                listeningSocket = new ServerSocket(port);
                System.out.println("waiting for connection");
                connection = listeningSocket.accept();
                connected = true;
                System.out.println("Connected");
                String incomeMessage =null;
                while(connected){
                inStream = connection.getInputStream();
                    inDataStream = new DataInputStream(inStream);
                    if (myMessage !=null){
                        outStream = connection.getOutputStream();
                        outDataStream = new DataOutputStream(outStream);
                    outDataStream.writeUTF(myMessage);
                    }

                    if((incomeMessage = inDataStream.readUTF())!=null){
                        clientMessage = incomeMessage;
                        publish(clientMessage);
                        incomeMessage =null;
                    }
                }
            } catch (IOException e) {
                clientMessage = "Connection Lost";
            }
        return null;
    }           
runningServer.execute();
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T02:47:46.300

这是一个非常基本的例子。

基本上，因为您的程序需要异步通信（也就是说，您需要能够同时从套接字读取和写入），您需要将每个流卸载到单独的线程。

这个例子的管理过程是不存在的。实际上，您应该有某种“连接”管理器，它能够干净地关闭输出和输入线程，例如，当用户键入“再见”时，输出线程将能够告诉连接管理器应该终止连接。然后它会告诉输入线程停止读取任何新消息并终止......

## 客户

```
public class Client {

    public static void main(String[] args) {

        try {
            Socket master = new Socket("localhost", 8900);
            new Thread(new InputHandler(master)).start();
            new Thread(new OuputHandler(master)).start();
        } catch (Exception ex) {
            ex.printStackTrace();
        }

    }

    public static class InputHandler implements Runnable {

        private Socket socket;

        public InputHandler(Socket socket) {
            this.socket = socket;
        }

        @Override
        public void run() {
            boolean commune = true;
            BufferedReader reader = null;
            try {
                reader = new BufferedReader(new InputStreamReader(socket.getInputStream()));
                while (commune) {
                    String text = reader.readLine();
                    System.out.println("\n<server> " + text);
                    if (text.toLowerCase().equals("bye")) {
                        commune = false;
                    }
                }
            } catch (Exception exp) {
                exp.printStackTrace();
            } finally {
                try {
                    reader.close();
                } catch (Exception e) {
                }
                try {
                    socket.close();
                } catch (Exception e) {
                }
            }
        }
    }

    public static class OuputHandler implements Runnable {

        private Socket socket;

        public OuputHandler(Socket socket) {
            this.socket = socket;
        }

        @Override
        public void run() {
            boolean commune = true;
            BufferedWriter writer = null;
            try {
                writer = new BufferedWriter(new OutputStreamWriter(socket.getOutputStream()));
                Scanner scanner = new Scanner(System.in);
                while (commune) {
                    System.out.print("> ");
                    String text = scanner.nextLine();
                    writer.write(text);
                    writer.newLine();
                    writer.flush();
                    if (text.equalsIgnoreCase("bye")) {
                        commune = false;
                    }
                }
            } catch (Exception exp) {
                exp.printStackTrace();
            } finally {
                try {
                    writer.close();
                } catch (Exception e) {
                }
                try {
                    socket.close();
                } catch (Exception e) {
                }
            }
        }
    }
} 
```

## 服务器

```
public class Server {

    public static void main(String[] args) {

        try {
            ServerSocket master = new ServerSocket(8900);
            Socket socket = master.accept();
            new Thread(new InputHandler(socket)).start();
            new Thread(new OuputHandler(socket)).start();
        } catch (Exception ex) {
            ex.printStackTrace();
        }

    }

    public static class InputHandler implements Runnable {

        private Socket socket;

        public InputHandler(Socket socket) {
            this.socket = socket;
        }

        @Override
        public void run() {
            boolean commune = true;
            BufferedReader reader = null;
            try {
                reader = new BufferedReader(new InputStreamReader(socket.getInputStream()));
                while (commune) {
                    String text = reader.readLine();
                    System.out.println("\n<client> " + text);
                    if (text.toLowerCase().equals("bye")) {
                        commune = false;
                    }
                }
            } catch (Exception exp) {
                exp.printStackTrace();
            } finally {
                try {
                    reader.close();
                } catch (Exception e) {
                }
                try {
                    socket.close();
                } catch (Exception e) {
                }
            }
        }
    }
    public static class OuputHandler implements Runnable {

        private Socket socket;

        public OuputHandler(Socket socket) {
            this.socket = socket;
        }

        @Override
        public void run() {
            boolean commune = true;
            BufferedWriter writer = null;
            try {
                writer = new BufferedWriter(new OutputStreamWriter(socket.getOutputStream()));
                Scanner scanner = new Scanner(System.in);
                while (commune) {
                    System.out.print("> ");
                    String text = scanner.next();
                    writer.write(text);
                    writer.newLine();
                    writer.flush();
                    if (text.equalsIgnoreCase("bye")) {
                        commune = false;
                    }
                }
            } catch (Exception exp) {
                exp.printStackTrace();
            } finally {
                try {
                    writer.close();
                } catch (Exception e) {
                }
                try {
                    socket.close();
                } catch (Exception e) {
                }
            }
        }
    }
} 
```

**更新（呜呜）**

虽然我面前有你的源代码......

应该非常、非常、很少需要做`textMessage.addKeyListener(this)`

因为您使用的是 a `JTextField`，所以您应该使用 a `ActionListener`。这有很多重要的原因，但对您来说，主要原因是“接受”操作依赖于外观和感觉这一事实。虽然大多数系统确实使用`Enter`了“接受”动作，但并不能保证。

查看[如何编写动作侦听器](http://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html)以获取更多信息

鉴于您尝试做的事情的一般复杂性，+1 表示整体良好的尝试！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-31T02:49:00.877

使用此[示例](https://stackoverflow.com/a/3245805/230513)，以下更改适用于单个 telnet 客户端。

```
private PrintWriter out;
...
public void keyPressed(KeyEvent e) {
    if (e.getKeyChar() == KeyEvent.VK_ENTER) {
        myMessage = friendLabel + textMessage.getText();
    if (out != null) {
        out.println(myMessage);
    }
    ...
}
...
protected Void doInBackground() {
    try {
        listeningSocket = new ServerSocket(port);
        System.out.println("Waiting for connection");
        connection = listeningSocket.accept();
        connected = true;
        System.out.println("Connected");
        Scanner in = new Scanner(connection.getInputStream());
        out = new PrintWriter(connection.getOutputStream(), true);
        publish("Connected");
        while (true) {
            publish(in.nextLine());
        }
    } catch (IOException e) {
        clientMessage = "Connection Lost";
        try {
            connection.close();
            System.out.println("Closed");
        } catch (IOException e1) {
            e1.printStackTrace();
            connected = false;
        }
    }
    return null;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-31T02:36:53.353

我看到你的服务器端口是 8900，你的客户端端口也是 8900。我不确定服务器和客户端是否在同一台机器上运行是否重要......

# fonts - 使用字形名称在 SVG 中绘制字形

> ID：14617332
> 
> 赞同：0
> 
> 时间：2013-01-31T02:10:44.640
> 
> 标签：fonts, svg

在下面的代码块中（取自[此处](http://www.w3.org/TR/SVGTiny12/fonts.html#GlyphElement)），字体嵌入在 SVG 文件中。然后使用以下行呈现文本：

```
<text x="40" y="50" font-family="larabie-anglepoise" font-size="70" fill="#933">SVG</text> 
```

在这一行中，字形由它们的 Unicode 值（S、V 和 G）引用。但是，并非所有字形都有 Unicode 值（替代、装饰性等）。如何通过引用字形名称或 ID 而不是 Unicode 值来呈现文本？

以下是完整代码供参考：

```
<?xml version="1.0" encoding="UTF-8"?>
<svg version="1.2" baseProfile="tiny" viewBox="0 0 160 70"  xmlns="http://www.w3.org/2000/svg"
    xmlns:xlink="http://www.w3.org/1999/xlink">
    <title>Font example</title>
    <defs>
        <font horiz-adv-x="313" xml:id="la">
            <metadata>Converted from Larabie Anglepoise by Batik ttf2svg
            See http://www.larabiefonts.com/ </metadata>
            <font-face font-family="larabie-anglepoise" units-per-em="1000" 
                panose-1="0 0 4 0 0 0 0 0 0 0" ascent="703" descent="-300" alphabetic="0"/>
            <missing-glyph horiz-adv-x="500" d="M63 0V700H438V0H63ZM125 63H375V638H125V63Z"/>
            <glyph unicode="S" glyph-name="S" horiz-adv-x="385" d="M371 1H29V144H264Q264 151 264
                166Q265 180 265 188Q265 212 249 212H132Q83 212 55 247Q29 279 29
                329V566H335V422H136V375Q136 360 144 356Q148 355 168 355H279Q327 355 352 309Q371 273
                371 221V1Z"/>
            <glyph unicode="V" glyph-name="V" horiz-adv-x="351" d="M365 563L183 -33L0 563H101L183
                296L270 563H365Z"/>
            <glyph unicode="G" glyph-name="G" horiz-adv-x="367" d="M355
                1H18V564H355V420H125V144H248V211H156V355H355V1Z"/>
            <hkern g1="V" g2="G" k="-40"/>
        </font>
    </defs>
    <text x="40" y="50" font-family="larabie-anglepoise" font-size="70" fill="#933">SVG</text>
    <rect x="00" y="00" width="160" height="70" stroke="#777" fill="none"/>
</svg> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:39:37.300

你会用[`<altGlyph>`](http://www.w3.org/TR/SVG11/text.html#AltGlyphElement). 一个简单的例子：

```
<text>
  <altGlyph xlink:href="#myFooGlyph">foo</altGlyph>
</text> 
```

如果您在用于呈现文本的字体中`<glyph>`有 id `myFooGlyph`，则将呈现该字形。如果不是，那么您将看到`foo`呈现的字符串（如果不支持 SVG 字体，也会发生这种情况）。

# c# - 垃圾收集和 GCHandle.Alloc

> ID：14617336
> 
> 赞同：2
> 
> 时间：2013-01-31T02:11:36.510
> 
> 标签：c#, garbage-collection

```
void Foo()
{
     System.Windows.Forms.Form f = new System.Windows.Forms.Form();
     f.Show();
} 
```

据我了解， f 包含对表格的引用。但是 f 是一个局部变量，当控件离开花括号时它将超出范围。但表格仍处于打开状态。我尝试调用 GC.Collect()，但表单仍然打开。

还有一种情况。

```
private void button2_Click(object sender, EventArgs e)
    {
        Timer t = new Timer();
        t.Enabled = true;
        t.Interval = 1000;
        t.Tick += new EventHandler(t_Tick);
    }

    void t_Tick(object sender, EventArgs e)
    {

    } 
```

在这种情况下， t 永远不会被垃圾收集。经过大量研究，我发现当我设置 t.Enabled = true 时，Timer 类使用 - GCHandle.Alloc 请求 GC 不收集。伙计们，这是内存泄漏的一大来源。除非我设置 t.Enabled = false，否则即使我们关闭表单，整个表单也会被泄露。

在第一个示例代码中，我无法理解为什么即使在我触发 GC.Collect() 之后表单也没有被垃圾收集。在反射器中，我看到 ControlNativeWindow 已在内部使用 GCHandle.Alloc 的 Form 中使用。是这个原因吗。。作为 .NET 库的用户，我始终相信，当一个引用无法访问时，它就会有机会进行垃圾收集。当然，垃圾收集和从内存中的实际释放是不确定的。但我的问题是——我对这两个例子的理解是否正确？如果有对象即使在无法访问后仍然可以生存，那么我将如何跟踪它以防止内存泄漏？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T02:27:52.403

Winforms 保留一个将句柄映射到控制实例的内部表。该表确保只要本机窗口处于活动状态，控件（在您的情况下为表单）就永远不会被垃圾收集。当窗口被销毁时，它会从该表中删除，无论是用户关闭表单还是您的代码处理它。

System.Timers.Timer 由 CLR 引用的 cookie 保持活动状态。该类是用 System.Threading.Timer 实现的，它有一个接受*状态*对象参数的构造函数。该*状态*对象是 cookie，CLR 使用 GCHandle.Alloc() 的等价物对其进行引用。禁用计时器会重置允许计时器被垃圾收集的cookie。

这些是框架防止这些对象过早收集垃圾的自然且必要的方法。您只能通过在处理表单时忘记禁用计时器来导致泄漏。这通常是非常不健康的，当表单死亡时，您不希望计时器继续滴答作响。将 Dispose 方法从 Designer.cs 文件移动到表单代码中或重写 OnFormClosed() 以禁用计时器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T02:28:13.823

您必须自己管理实例的生命`Form`周期`System.Windows.Forms.Timer`。你需要打电话`Dispose`来标记他们的生命结束，然后`GC`再收集他们。在内部关闭表单调用`Dispose`。如果您的计时器是使用设计器放置在表单上的，那么计时器将在表单关闭时被释放。这是通过设计器在表单构造函数中生成以下代码来实现的：

```
this.components = new System.ComponentModel.Container();
this.timer1 = new System.Windows.Forms.Timer(this.components); 
```

形式`Dispose`为：

```
protected override void Dispose(bool disposing)
{
    if (disposing && (components != null))
    {
        components.Dispose();
    }
    base.Dispose(disposing);
} 
```

因此，实际上只要您关闭表单而不只是隐藏它们，就没有内存泄漏。但是，如果您手动创建了计时器，那么您必须在表单关闭时自行处理它。

另一方面，`System.Threading.Timer`如果你没有对它的任何引用，即使你没有`Dispose`它，也会被垃圾收集。

# reflection - 在运行时使用 JDK 编译器时的内存泄漏

> ID：14617340
> 
> 赞同：8
> 
> 时间：2013-01-31T02:11:52.330
> 
> 标签：reflection, classloader, java

我正在尝试将 javaeditor 添加到我的程序中以在运行时扩展程序。一切正常，除非广泛使用该程序（我模拟了 1000-10000 次编译器执行）。内存使用率越来越高，看起来好像有内存泄漏。

在我的程序中，类被加载，构造函数被执行并且类被卸载（没有剩余的实例并且类加载器变得无效，因为我将指针设置为空）。我用 JConsole 分析了这个过程，当垃圾收集器被执行时，这些类被卸载了。

我做了一个 heapdum 在内存分析器中打开它，问题似乎出在 java.net.FactoryURLClassLoader 内部（在 com.sun.tools.javac.util.List 对象中）。由于 (com.sun.tools.javac) 是 JDK 的一部分，而不是 JRE 的一部分，并且 SystemToolClassLoader 是一个 FactoryURLClassLoader 对象，因此我会在某处找到泄漏。当我第一次执行编译器时，SystemToolClassLoader 中加载的类数从 1 增加到 521，但之后保持不变。

所以我不知道泄漏在哪里，有没有办法重置 SystemToolClassLoader？我怎样才能更准确地定位泄漏。

**编辑：好的，我发现它也出现在一个非常简单的例子中。所以它似乎是编译的一部分，我不需要加载类或实例化它：**

```
import java.io.File;
import java.io.IOException;
import java.util.Arrays;

import javax.tools.JavaCompiler;
import javax.tools.JavaFileObject;
import javax.tools.StandardJavaFileManager;
import javax.tools.ToolProvider;

public class Example {   

public static void main(String[] args)
{
    for (int i =0; i<10000;i++){
        try {
            System.out.println(i);
            compile();
        } catch (InstantiationException | IllegalAccessException
                | ClassNotFoundException | IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

}

public static void compile() throws IOException, InstantiationException, IllegalAccessException, ClassNotFoundException
{
    File source = new File( "src\\Example.java" ); // This File
    JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();
    StandardJavaFileManager fileManager = compiler.getStandardFileManager( null, null, null );
    Iterable<? extends JavaFileObject> units;
    units = fileManager.getJavaFileObjectsFromFiles( Arrays.asList( source ) );
    compiler.getTask( null, fileManager, null, null, null, units ).call();
    fileManager.close();
}

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T09:37:21.413

起初，我认为这是一个明确的内存泄漏；`SoftReference`但是，它与s 的工作方式直接相关。

**Oracle 的 JVM 只会在堆完全用完时尝试收集软引用。**似乎不可能强制以编程方式收集软引用。

为了确定问题，我在“无限”堆上使用了三个转储：

1.  启动应用程序并获取 Compiler 和 ScriptFileManager，然后执行 GC-finalize-GC。做一个转储。
2.  加载 500 个“脚本”。
3.  做一个 GC-finalize-GC。写统计。做一个转储。
4.  加载 500 个“脚本”。
5.  做一个 GC-finalize-GC。写统计。做一个转储。

明显的（双）实例计数增加：`Names`（500 -> 1k），`SharedNameTable`（500->1k），`SharedNameTable$NameImpl`（数十万）和`[LSharedNameTable$NameImpl`（500->1k）。

在使用 EMA 进行分析之后，很明显它`SharedNameTable`有一个对 a 的静态引用，`com.sun.tools.javac.util.List`这显然`SoftReference`是每个`SharedNameTable`曾经创建的文件（因此，对于您在运行时编译的每个源文件都有一个）。所有的`$NameImpl`s 都是你的源文件被分割成的标记。显然，所有的令牌都**永远不会**从堆中释放出来，并且会不断累积……或者是吗？

我决定测试是否真的是这样。知道软引用和弱引用的区别后，我决定使用一个小堆（-Xms32m -Xmx32m）。这样 JVM 被迫要么释放`SharedNameTable`s 要么失败`OutOfMemoryError`。结果不言自明：

-Xmx512m -Xms512m

```
Total memory: 477233152
Free memory: 331507232
Used memory: 138.97506713867188 MB
Loaded scripts: 500

Total memory: 489816064
Free memory: 203307408
Used memory: 273.23594665527344 MB
Loaded scripts: 1000

The classloader/component "java.net.FactoryURLClassLoader @ 0x8a8a748" occupies 279.709.192 (98,37%) bytes. 
```

-Xmx32m -Xms32m

```
Total memory: 29687808
Free memory: 25017112
Used memory: 4.454322814941406 MB
Loaded scripts: 500

Total memory: 29884416
Free memory: 24702728
Used memory: 4.941642761230469 MB
Loaded scripts: 1000

One instance of "com.sun.tools.javac.file.ZipFileIndex" loaded by "java.net.FactoryURLClassLoader @ 0x8aa4cc8" occupies 2.230.736 (47,16%) bytes. The instance is referenced by *.*.script.ScriptFileManager @ 0x8ac8230. 
```

（这只是一个指向 JDK 库的链接。）

脚本：

```
public class Avenger
{
    public Avenger()
    {
        JavaClassScriptCache.doNotCollect(this);
    }

    public static void main(String[] args)
    {
        // this method is called after compiling
        new Avenger();
    }
} 
```

不收集：

```
private static final int TO_LOAD = 1000;
private static final List<Object> _active = new ArrayList<Object>(TO_LOAD);

public static void doNotCollect(Object o)
{
    _active.add(o);
}

System.out.println("Loaded scripts: " + _active.size()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T02:37:32.247

> 当我将类加载器设置为空时，类定义被卸载。和垃圾收集。JConsole 还告诉我这些类已卸载。加载的总类恢复到初始值。

这是非常有说服力的证据，表明这不是经典的类加载器泄漏。

> eclipse 内存分析器也认为它是一个 com.sun.tools.javac.util.List 对象，它占用内存....所以它在堆上

下一步应该是确定对该 List 对象的引用（或引用）在哪里。运气好的话，您可以查看源代码以查找列表对象的用途，以及是否有某种方法可以将其清除。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-21T20:11:55.110

Java 7 引入了这个错误：为了加快编译速度，他们引入了 SharedNameTable，它使用软引用来避免重新分配，但不幸的是只会导致 JVM 膨胀失控，因为这些软引用在 JVM 之前**永远不会**被回收达到其`-Xmx`内存限制。据称它将在 Java 9 中修复。与此同时，有一个（未记录的）编译器选项可以禁用它：`-XDuseUnsharedTable`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-14T07:24:25.927

这不是内存泄漏，它就像“由于内存可用并且有一些有用的东西要保留，直到真的需要摆脱和释放内存，我会为你保留编译好的源代码”。--编译器说

基本上编译器工具（这里使用的内部编译器工具）保留对已编译源的引用，但它保留为软引用。这意味着如果 JVM 倾向于使用我们的内存，垃圾收集器将要求它保留的内存。尝试以最小的堆大小运行您的代码，您将看到正在清理的引用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-06-15T12:15:00.037

正如其他答案已经指出的那样，问题在于编译器将`SoftReference`s保持在`SharedNameTable`附近。

Chrispy 提到了`-XDuseUnsharedTable`javac 选项。所以最后缺少的一点是如何在使用 Java API 时启用此选项：

```
compiler.getTask(null, fileManager, null, Arrays.asList("-XDuseUnsharedTable"), null, units) 
```

# c++ - Qt - 帮助链接动态库

> ID：14617344
> 
> 赞同：1
> 
> 时间：2013-01-31T02:12:32.203
> 
> 标签：c++, qt, dll, linker, dynamic-linking

我在将 DLL 链接到我的 Qt 项目的简单任务中遇到了很多麻烦。

我的步骤：

1.  在 Qt 中，我转到“文件 -> 新文件或项目 -> 其他项目 -> C++ 库”
2.  **向mylibrary.h**添加一个`calc`方法。
***   **在mylibrary.cpp**中实现该`calc`方法。***   `.a`我编译，然后转到`.dll`创建文件的目录。*   我创建了一个新项目：“文件 -> 新文件或项目 -> Qt 小部件项目 -> Qt Gui 应用程序”*   我将所有头文件从 MyLibrary 复制并粘贴到、`C:/Users/Me/includes`以及`MyLibrary.dll`和。`libMyLibrary.a``C:/Users/Me/`*   然后我进入我的 Qt Widget Project 的项目文件（步骤 5）。****

 ****我添加了包含路径以及 DLL 路径：

```
INCLUDEPATH += "C:/Users/Me/includes"
LIBS += "C:/Users/Me/MyLibrary.dll" 
```

然后我进入我的`mainwindow.cpp`，并输入以下代码：

```
#include "mainwindow.h"
#include "ui_mainwindow.h"

#include <QDebug>
#include "mylibrary.h"

MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);

    MyLibrary myLib;
    qDebug() << myLib.calc();
}

MainWindow::~MainWindow()
{
    delete ui;
} 
```

当然，我得到未定义的错误：

```
C:\Users\Me\Desktop\TestInternals-Win\..\TestInternals\mainwindow.cpp:15: error: undefined reference to `_imp___ZN13MyLibrary4calcEv'

C:\Users\Me\Desktop\TestInternals-Win\..\TestInternals\mainwindow.cpp:15: error: undefined reference to `_imp___ZN13MyLibrary4calcEv'

:-1: error: collect2: ld returned 1 exit status 
```

* * *

## MyLibrary 文件内容

**mylibrary.h**内容：

```
#ifndef MYLIBRARY_H
#define MYLIBRARY_H

#include "MyLibrary_global.h"

class MYLIBRARYSHARED_EXPORT MyLibrary{
public:
    MyLibrary();
    int calc();
};

#endif // MYLIBRARY_H 
```

**mylibrary.cpp**内容：

```
#include "mylibrary.h"

MyLibrary::MyLibrary()
{
}

int calc()
{
    return 5;
} 
```

**我没有接触过Qt生成的MyLibrary_global.h文件**

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T02:22:37.073

您定义一个独立`calc`函数而不是`MyLibrary::calc`，请尝试：

图书馆.cpp

```
#include "mylibrary.h"

MyLibrary::MyLibrary()
{
}

int MyLibrary::calc()
{
    return 5;
} 
```****

# php - php/sql 查询返回错误的响应

> ID：14617349
> 
> 赞同：0
> 
> 时间：2013-01-31T02:12:53.840
> 
> 标签：php, mysql

好的，所以我正在运行一个重置密码脚本，它应该用 sha1 散列版本替换密码，`password01`如果成功，它应该返回成功消息，否则返回失败消息，但它返回失败消息天气它是否有效总是这样！有任何想法吗？我已插入以下代码：

```
<?php 
session_start();
$host= $_SESSION["dbhost"]; 
$username= $_SESSION["dbuser"]; 
$password= $_SESSION["dbpass"]; 
$db_name= $_SESSION["dbname"];
$tbl_name="users"; // Table name 

mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

$userid = $_POST['id'];
$password = 'password01';    
$hashpass = sha1($password);

//$result = mysql_query("SELECT password FROM $tbl_name WHERE id='$userid'");
$sql=mysql_query("UPDATE $tbl_name SET password='$hashpass' where id='$userid'"); 

if (mysql_query($sql)) {
echo "<ul id='breadcrumbs-one'>";
echo "<li><a href=''>Users</a></li>";
echo "<li><a href='' class='current'>Reset</a></li>";
echo "</ul>";
echo "<div class='tn-box tn-box-color-3 mcenterlow'>";
echo "<p>The Opperation was Sucessful!<br><a href='?users'>Add Another?</a></p>";
echo "<div class='tn-progress'></div>";
echo "</div>";
}
else {
echo "<ul id='breadcrumbs-one'>";
echo "<li><a href=''>Users</a></li>";
echo "<li><a href='' class='current'>Reset</a></li>";
echo "</ul>";
echo "<div class='tn-box tn-box-color-1 mcenterlow'>";
echo "<p>The Opperation was Not Sucessful!<br><a href='?users'>Try Again?</a></p>";
echo "<div class='tn-progress'></div>";
echo "</div>";
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T02:19:42.043

您的代码调用了 mysql_query() 两次，一次使用实际的 SQL 字符串，另一次使用第一次调用的返回结果值！因此，“if”检查的第二次调用总是失败；它不是有效的 SQL。

我想你想说的是

```
$sql = "UPDATE $tbl_name SET password='$hashpass' where id='$userid'";

if (mysql_query($sql)) {
    // etc. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T02:19:55.663

除了您问题下方的评论之外，您`if`失败的原因是您正在使用`mysql_query`另一个调用的结果`mysql_query`。

为了解决这个问题，您应该将您的条件更改为：

```
if ($sql) { 
```

（对于`UPDATE`查询，`mysql_query`返回`true`成功和`false`失败）

你真的应该使用准备好的语句和绑定变量切换到 PDO（或 mysqli），以摆脱你遇到的 sql 注入问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T02:21:23.700

您正在设置`$sql`等于 的结果`mysql_query("UPDATE $tbl_name SET password='$hashpass' where id='$userid'");`。在 UPDATE 语句上，`mysql_query`返回一个布尔值。`mysql_quert($sql)`你在`if`声明中被调用。这在逻辑上是不正确的，因为您检查了结果，`mysql_query(<bool>);`因为 $sql 是查询的结果。

任何一个：

```
$sql=mysql_query("UPDATE $tbl_name SET password='$hashpass' where id='$userid'"); 

if ($sql) { 
```

或者

```
$sql = "UPDATE $tbl_name SET password='$hashpass' where id='$userid'"; 

if (mysql_query($sql)) { 
```

马特

# php - 不起作用 - zf2 CRUD mongo

> ID：14617350
> 
> 赞同：0
> 
> 时间：2013-01-31T02:13:08.037
> 
> 标签：php, mongodb, doctrine-orm, zend-framework2

我正在尝试使用学说 2 和 zend 框架 2 使用 mongodb 构建 CRUD。

我遵循了一些教程，但仍然失败。

按照链接： http: [//www.bigwisu.com/2012/10/03/zend-framework-2-doctrine-odm](http://www.bigwisu.com/2012/10/03/zend-framework-2-doctrine-odm) [https://github.com/doctrine/DoctrineMongoODMModule](https://github.com/doctrine/DoctrineMongoODMModule)

以下是项目中使用的配置：

module.doctrine_mongodb.local.config.php

```
<?php
return array(
    'doctrine' => array(
        'connection' => array(
            'odm_default' => array(
                'server'    => 'localhost',
                'port'      => '27017',
                'dbname'    => 'teste',
                'options'   => array()
            ),
        ),
        'configuration' => array(
            'odm_default' => array(
                'metadata_cache'     => 'array',
                'driver'             => 'odm_default',
                'generate_proxies'   => true,
                'proxy_dir'          => 'data/DoctrineMongoODMModule/Proxy',
                'proxy_namespace'    => 'DoctrineMongoODMModule\Proxy',
                'generate_hydrators' => true,
                'hydrator_dir'       => 'data/DoctrineMongoODMModule/Hydrator',
                'hydrator_namespace' => 'DoctrineMongoODMModule\Hydrator',
                'default_db'         => 'teste',
                'filters'            => array()
            )
        ),

        'documentmanager' => array(
            'odm_default' => array(
            //    'connection'    => 'odm_default',
            //    'configuration' => 'odm_default',
            //    'eventmanager' => 'odm_default'
            )
        ),
        'eventmanager' => array(
            'odm_default' => array(
                'subscribers' => array()
            )
        ),
    ),
); 
```

module.config.php 添加

```
'doctrine' => array(
        'driver' => array(           
            __NAMESPACE__.'_driver' => array(
                'class' => 'Doctrine\ODM\MongoDB\Mapping\Driver\AnnotationDriver',         
                'paths' => array(__DIR__ . '/../src/' . __NAMESPACE__ . '/Document')
            ),
            'odm_default' => array(
                'drivers' => array(
                    __NAMESPACE__ . '\Document' => __NAMESPACE__.'_driver'
                )
            )                  
        )
    ) 
```

文档\Artigo.php

```
<?php
namespace Site\Document;
use Doctrine\ODM\MongoDB\Mapping\Annotations as ODM;

/** @ODM\Document(collection="artigo") */
class Artigo
{
    /** @ODM\Id */
    private $id;

    /** @ODM\Field(type="string") */
    private $nome;

    /**
     * @return the $id
     */
    public function getId() {
        return $this->id;
    }

    /**
     * @return the $nome
     */
    public function getNome() {
        return $this->nome;
    }

    /**
     * @param field_type $id
     */
    public function setId($id) {
        $this->id = $id;
    }

    /**
     * @param field_type $nome
     */
    public function setNome($nome) {
        $this->nome = $nome;
    }

} 
```

和控制器：

```
<?php

namespace Site\Controller;

use Zend\Mvc\Controller\AbstractActionController;
use Zend\View\Model\ViewModel;
use Site\Document\Artigo;

class IndexController extends AbstractActionController
{
    public function indexAction()
    {
        $dm = $this->getServiceLocator()->get('doctrine.documentmanager.odm_default'); 
        $artigo = new Artigo();
        $artigo>setNome("teste");
        $dm->persist($artigo);
        $dm->flush();

        return new ViewModel(array('teste'=>'acho que deu'));
    }
} 
```

没有错误发生，也没有插入记录。你知道可以是什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:34:10.650

我在 DoctrineMongoODMModule 上工作过，并且有自己的库可以帮助连接 zf2 学说和 mongo。如果您想为学说文档创建一个 json REST 端点，请按以下方法...

将以下内容添加到您的 composer.json：

```
 "superdweebie/doctrine-extensions-module": "dev-master" 
```

更新作曲家。

在你的注册这些模块`application.config.php`：

```
'modules' => array(
    'Sds\Zf2ExtensionsModule',
    'DoctrineModule',
    'DoctrineMongoODMModule',       
    'Sds\DoctrineExtensionsModule',       
), 
```

然后添加您的模块配置之一：

```
'sds' => [
    'doctrineExtensions' => [
        'doctrine' => [
            'driver' => 'odm_default',
            'eventmanager' => 'odm_default',
            'configuration' => 'odm_default',
            'documentManager' => 'doctrine.documentmanager.odm_default',
        ],
        'extensionConfigs' => [
            'Sds\DoctrineExtensions\Rest' => true,
        ],
    ],               
],

'router' => [
    'routes' => [
        'Sds\Zf2ExtensionsModule\RestRoute' => [
            'type' => 'Sds\Zf2ExtensionsModule\RestRoute',
            'options' => [
                'route' => '/rest',
                'defaults' => [
                    'controller' => 'Sds\DoctrineExtensionsModule\Controller\JsonRestfulController'
                ],
            ],
        ],
    ],
], 
```

然后将`@Sds\Rest`注释添加到您的文档中：

```
use Doctrine\ODM\MongoDB\Mapping\Annotations as ODM;
use Sds\DoctrineExtensions\Annotation\Annotations as Sds;

/**
 * @ODM\Document
 * @Sds\Rest
 */
class MyDocument{
    ...
} 
```

而已。

现在您可以像这样使用 REST 服务：

其余端点位于`http://mysite.com/rest/mydocument`

要从任何请求中获取 json，请包含`accept: "application/json"`标头。要使用任何请求发送 json，请包含`content-type: "application/json"`标头。

要读取单个项目，请发送`GET`带有 id 的请求：

```
http://mysite.com/rest/mydocument/itemid 
```

要阅读列表，请发送`GET`请求至：

```
http://mysite.com/rest/mydocument 
```

列出产品时，默认返回前 30 个。要改变这一点，请使用范围标头，例如：

```
range: items=5-10 
```

即使请求的项目超过 30 个，也最多返回 30 个。响应将具有以下标头，以指示已返回哪些项目以及总共有多少项目：

```
Content-Range: items 0-24/66 
```

可以使用查询字符串查询该列表。例如：

```
http://mysite.com/rest/mydocument?fieldA=filterValue 
```

可以使用查询字符串对列表进行排序。例如，将按类型排序，然后按名称降序：

```
http://mysite.com/rest/mydocument?sort(+type,-name) 
```

要创建，发送一个`POST`带有 json 内容的请求。例如：

```
request-
http://mysite.com/rest/mydocument

content-
{id: 1234, fieldA: 'abc'} 
```

要更新，请发送`PUT`带有 json 内容的请求到特定 id。例如：

```
request-
http://mysite.com/rest/mydocument/1234

content-
{fieldA: 'def'} 
```

`DELETE`要删除，请向特定 ID发送请求。例如：

```
http://mysite.com/rest/mydocument/1234 
```

这些模块的文档开头可以在[https://sds.readthedocs.org/en/latest/](https://sds.readthedocs.org/en/latest/)找到。还有其他这里没有描述的功能与dojo客户端框架、控件序列化和访问控制集成。

# c# - 对 HttpResponseMessage 包含所需响应的单元测试

> ID：14617353
> 
> 赞同：18
> 
> 时间：2013-01-31T02:13:14.697
> 
> 标签：c#, unit-testing, asp.net-web-api

我正在编写一个 Web API 控制器，现在我有以下代码：

```
public class PicklistsController : ApiController
{
    private readonly IPicklistRepository _repository;

    public PicklistsController(IPicklistRepository repository)
    {
        _repository = repository;
    }

    public HttpResponseMessage GetPicklistValues(string entityName, string fieldName)
    {
        if(_repository.Exists(entityName, fieldName))
            return Request.CreateResponse(HttpStatusCode.Accepted, _repository.Get(entityName, fieldName));

        return new HttpResponseMessage(HttpStatusCode.NotFound);
    }

} 
```

我正在尝试测试此方法，而我真正想做的就是在存储库找到此值组合时验证 HttpResponseMessage 是否包含 POCO PicklistItem 中的值。作为这个框架的新手，我不太了解 HttpResponseMessage 的内部工作原理，我在这个网站上找到的内容以及通过一般谷歌搜索告诉我对其内容使用各种 ReadAsync 方法，但我真的不想要如果可以避免，请使用异步。我真的只是想验证我填充到我返回的对象中的东西在我返回它时是否在对象中。这是我到目前为止的单元测试（使用 JustMock 设置存储库，Target 是 CUT）：

```
public void Returns_Picklist_Item_JSON_When_Results_Exist()
{
    Repository.Arrange(repo => repo.Exists(EntityName, FieldName)).Returns(true);

    const int value = 2;
    const string label = "asdf";
    var mynewPicklistItem = new PicklistItem() { Label = label, Value = value };
    Repository.Arrange(repo => repo.Get(EntityName, FieldName)).Returns(Enumerable.Repeat<PicklistItem>(mynewPicklistItem, 1));

    var response = Target.GetPicklistValues(EntityName, FieldName);
    //Assert.IsTrue(I don't know what to do here -- suggestions appreciated);
} 
```

对断言有什么想法吗？还是我在吠叫错误的树/从根本上误解了这应该如何工作？谢谢...

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-01-24T09:01:25.617

我正在使用 Web API 2.1，并且有一个名为`TryGetContentValue`：

```
[Test]
public void TheTestMethod()
{
    // arrange

    var ctrl = new MyController();

    ctrl.Request = Substitute.For<HttpRequestMessage>();  // using nSubstitute
    ctrl.Configuration = Substitute.For<HttpConfiguration>();

    // act

    HttpResponseMessage result = ctrl.Get();

    MyResponse typedresult;
    result.TryGetContentValue(out typedresult);     // <= this one

    // assert
} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-01-31T19:35:50.507

如果它`Content`是一个对象，那么尝试将其转换为`ObjectContent`- 该`Value`属性应包含您的对象。

如果是这样，`StreamContent`那么我不知道除了做之外的其他方法`ReadAsAsync`。您仍然可以阻止任务的结果以查看响应。

这是一个例子：

```
var response = Target.GetPicklistValues(EntityName, FieldName);
ObjectContent objContent = response.Content as ObjectContent;
PicklistItem picklistItem = objContent.Value as PicklistItem; 
```

# jquery - 如何在控制台中获取动态元素高度

> ID：14617354
> 
> 赞同：1
> 
> 时间：2013-01-31T02:13:48.683
> 
> 标签：jquery, console

我知道的愚蠢问题，但似乎无法使其正常工作。使用 Chrome 控制台，我需要获取某些元素的高度（可以使用检查器，但这已成为个人问题）

```
console.log$('#myDiv').height(); 
```

返回 TypeError: Object # has no method 'log$'

```
console.log $('#myDiv').height(); 
```

返回 SyntaxError：意外的标识符

我知道这很简单，我环顾四周，但此时看不到森林的森林。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T02:15:07.257

```
console.log( $('#myDiv').height() ) 
```

`console.log`是一个函数，所以你需要括号来调用它，作为参数传递你想要在控制台中输出的内容。

如果直接在控制台中直接输入，则可以省略`console.log`：

```
$('#myDiv').height() 
```

`console.log`控制台会自动将最后一个返回值返回到您的屏幕，因此您在使用控制台时不必这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T02:15:18.207

尝试：`console.log($('#myDiv').height());`

（你错过了括号）

# plugins - Python & PyQt4 - 一个带有插件的程序。无法将来自插件的信号连接到 UI

> ID：14617356
> 
> 赞同：2
> 
> 时间：2013-01-31T02:14:11.400
> 
> 标签：plugins, python-2.7, pyqt4

我正在用 Python 和 PyQt4 编写一个带有插件支持的程序。插件在启动时加载（使用`__import__`），向 UI 添加元素（即向选项卡小部件添加新选项卡，暴露主类的方法，此时一切正常）。我的问题是信号忽略，即：

```
from lib.plugin import Plugin
from plugins.dsc.ui import dsc_main

class DSC(Plugin):
    def __init__(self):
        Plugin.__init__(self)

        # Load ui
        self.dsc_widget = QTabWidget()
        self.dsc_ui = dsc_main.Ui_Form()
        self.dsc_ui.setupUi(self.dsc_widget)

        # QWidget form contains a QListWidget, so filling it with
        # something.
        for x in range(0, 100):
            self.dsc_ui.list_widget.addItem(str(x))

        # This isn't working
        self.dsc_ui.list_widget.currentItemChanged.connect(self.show_data)
        # This also isn't working
        self.dsc_ui.list_widget.itemClicked.connect(self.show_data)

    def show_data(self):
        print "WUT?" 
```

我也尝试过 qDebug 而不是 print，但在这里没有效果。我也尝试过通过主窗体线程从 dsc_ui 连接小部件（通过公开一个找到这个名称的子并将其连接到函数的方法），但这也没有效果。

这个问题类似于这个问题[，](https://stackoverflow.com/questions/3827013/pyqt4-signal-slot-problem-when-using-sub-directories)但答案中描述的所有内容都已经尝试过了。

有什么我错过的好方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T08:42:18.397

你的 Pugin 类是继承自的`QObject`吗？如果没有，您必须`DSC`从`QObject`first 继承并`QObject.__init__`在您的`__init__`方法中调用。

# ruby-on-rails - 从 RSpec 2.11 升级到 2.12

> ID：14617358
> 
> 赞同：2
> 
> 时间：2013-01-31T02:14:33.450
> 
> 标签：ruby-on-rails, rspec, capybara

我正在升级 RSpec，特别是遇到了 2 个元素的问题。我正在[关注本教程](http://ruby.railstutorial.org/chapters/updating-showing-and-deleting-users#top)，具体来说，我在使用该方法时遇到了问题

```
def sign_in(user)
  visit root_path
  fill_in "Email", with: user.email
  fill_in "Password", with: user.password
  click_button "Sign in"
  # Sign in when not using Capybara as well.
  cookies[:remember_token] = user.remember_token
end 
```

我在哪里出错

```
undefined local variable or method `cookies' for #<RSpec::Core::ExampleGroup::Nested_1::Nested_3::Nested_3::Nested_1:0x79b9c90> 
```

另外我还有另一个错误

```
before {put user_path(user)} 
```

给

```
undefined method `put' for #<RSpec::Core::ExampleGroup::Nested_1::Nested_3::Nested_1::Nested_2::Nested_3:0x7939830> 
```

首先，错误，我试图按照[RSpec 文档中的步骤](https://www.relishapp.com/rspec/rspec-rails/docs/controller-specs/cookies)操作，但我似乎无法弄清楚如何从 Capybara 页面获取 RSpec 响应对象（调用的结果`click_button`）。对于第二个错误，我真的很茫然。看起来 RSpec 刚刚删除了该`put`功能，我不知道如何取回它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T03:30:50.200

这不是 RSpec 问题，而是请求/集成与功能/控制器规范问题。

Capybara，或者更具体地说，“请求”或“集成”规范不提供对 put() 或 get() 等请求方法的访问 - 这些仅在实时规范/控制器/的控制器规范中。当您直接测试控制器时，cookie[] 哈希和[其他可用变量也是如此。](http://guides.rubyonrails.org/testing.html#the-four-hashes-of-the-apocalypse)

[有关解决方法，请参阅此要点](https://gist.github.com/484787)。

# android - 从原始创建不同颜色的位图，而不是即时创建

> ID：14617360
> 
> 赞同：0
> 
> 时间：2013-01-31T02:15:06.263
> 
> 标签：android, colors, bitmap, sprite

我有一个我正在创建的位图......

```
myBitmap=BitmapFactory.decodeResource(res, R.drawable.picture, options); 
```

然后我使用 Bitmap.createScaledBitmap 对其进行缩放

然后当我画它时，我会像这样重新着色它：

```
c.drawBitmap(myScaledBitmap, 0, 0, myPaint); 
```

这行得通，但是当我实时重新着色时，性能会受到很大影响。

我现在要做的是在循环开始运行之前创建一个不同的颜色位图，我认为这将是一件很简单的事情，但我无法解决它，并会感激任何指针。

唯一的另一种方法是让我实际创建不同的.png，但这会有点痛苦，所以必须有一种方法可以在代码中做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T02:28:18.687

它并不太复杂。你拥有大部分。在循环之外，您几乎可以只使用已有的代码。我认为这样的事情应该有效：

```
Bitmap coloredBitmap = Bitmap.createBitmap(myScaledBitmap.getWidth(), myScaledBitmap.getHeight(), Config.ARGB_8888);
Canvas canvas = new Canvas(coloredBitmap);
canvas.drawBitmap(myScaledBitmap, 0, 0, myPaint); 
```

现在只需`coloredBitmap`在循环中使用。

# c++ - 如何获取 QTextBlock 的行高？

> ID：14617365
> 
> 赞同：0
> 
> 时间：2013-01-31T02:15:32.310
> 
> 标签：c++, qt

Windows 7 SP1
MSVS 2010
Qt 4.8.4

鉴于此代码：

```
#include <QTGui>

int main(int argc, char *argv[])
{
    QTextDocument* text_document = new QTextDocument("testing");
    QTextBlock text_block = text_document->begin();
    qDebug() << text_block.text() << text_block.blockFormat().lineHeight()
             << text_block.blockFormat().lineHeightType();
} 
```

控制台显示：

```
"testing" 0 0 
```

**问题**：为什么 lineHeight 不返回“段落的 LineHeight 属性”？lineHeightType 设置为单个间距。

我显然不明白这一点。当我尝试在输出之前设置行高时，什么也没有发生（lineHeight() 仍然为零）：

```
text_block.blockFormat().setLineHeight(30,QTextBlockFormat::SingleHeight); 
```

需要明确的是，在我的应用程序中，输出到 GUI 窗口时没有任何反应。

甚至尝试：

```
 qDebug() << text_block.text() << text_block.layout()->boundingRect().height(); 
```

给我零。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T00:06:59.837

这是在小部件调用其 show() 函数之前还是之后完成的？IE，它们可见吗？我以前从未使用过 QTextBlock，但我发现直到一切都可见（或者可能直到事件循环启动），我不能相信 QWidgets 的大小。这在 main() 中是正确的。

出于调试目的，我会在应用程序运行后检查它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T20:38:02.450

我从来没有让 lineHeight 工作，但这确实：

```
int CalculateLineHeight(QTextBlock text_block)
{
    int max_ascent  = 0;
    int max_descent = 0;
    int max_leading = 0;

    // A fragment is a piece of the text block with the the same format, such as font.
    for (QTextBlock::Iterator fragment_it = text_block.begin(); !(fragment_it.atEnd()); ++fragment_it)
    {
        QTextFragment fragment = fragment_it.fragment();
        QTextCharFormat fragment_format = fragment.charFormat();
        QFont fragment_font = fragment_format.font();
        QFontMetrics fragment_font_metrics (fragment_font);
        max_ascent  = std::max(fragment_font_metrics.ascent(), max_ascent);
        max_descent = std::max(fragment_font_metrics.descent(),max_descent);
        // Find the leading of the font with the maximum height. If more than
        // one, then find the largest lead among them.
        if ( current_height > max_height )
        {
            max_height = current_height;
            max_leading = current_leading;
        }
        else if ( current_height == max_height && current_leading > max_leading )
        {
            max_leading = current_leading;
        }
    }
    return max_ascent + max_descent + max_leading + 1; // + 1 for the baseline
} 
```

您可能认为答案是 max height()，但具有相同高度的字体可能具有不同的上升、下降和前导。

# c# - 使用来自 cs 文件的控制 (wpf)

> ID：14617366
> 
> 赞同：0
> 
> 时间：2013-01-31T02:15:32.810
> 
> 标签：c#, wpf, user-controls

对不起，我是 C# 和 WPF 的新手。我尝试使用从 *.cs 文件下载的第 3 方控件：http: [//www.codeproject.com/Articles/75847/Virtualizing-WrapPanel](http://www.codeproject.com/Articles/75847/Virtualizing-WrapPanel)

文章描述的使用控件：

```
<ListBox ItemsSource="{StaticResource boundCollection}">
   <ListBox.ItemsPanel>
       <ItemsPanelTemplate>
            <VirtualizingWrapPanel Orientation="Vertical" /> 
       </ItemsPanelTemplate>
    </ListBox.ItemsPanel> 
</ListBox> 
```

我已将 cs 文件复制到我的项目文件夹中，并通过拖放将其添加到解决方案资源管理器，然后将命名空间更改为我项目的命名空间。但它显示以下错误：

```
Error   1   The tag 'VirtualizingWrapPanel' does not exist in XML namespace 'http://schemas.microsoft.com/winfx/2006/xaml/presentation'. Line 30 Position 22\.   C:\Users\mbp2011\Documents\Visual Studio 2010\Projects\@Experiment\ThumbnailsView\ThumbnailsView\MainWindow.xaml    30  22  ThumbnailsView 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T02:28:05.910

您必须在 Xaml 中添加引用，其类型与在 cs 文件中添加引用（使用）相同

例子：

```
<Window x:Class="WpfApplication8.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"

        // Add a reference to the namespace that contains VirtualizingWrapPanel 
        xmlns:controls="clr-namespace:the namespace of the VirtualizingWrapPanel"

        Title="MainWindow" Height="233" Width="405" Name="UI" WindowStyle="ToolWindow">
    <ListBox ItemsSource="{StaticResource boundCollection}">
        <ListBox.ItemsPanel>
            <ItemsPanelTemplate>

                // then use the namespace to access the VirtualizingWrapPanel 
                <controls:VirtualizingWrapPanel Orientation="Vertical" />
            </ItemsPanelTemplate>
        </ListBox.ItemsPanel>
    </ListBox>
</Window> 
```

# javascript - 无法使用“in”运算符搜索“_id”

> ID：14617367
> 
> 赞同：4
> 
> 时间：2013-01-31T02:15:55.900
> 
> 标签：javascript, node.js, express, coffeescript, mongoose

我正在尝试使用 mongoose 和 express 获取现有的用户文档，但我只得到这个：

```
/webroot/api.domain.com/production/node_modules/mongoose/lib/document.js:162
      if (obj && '_id' in obj) continue;
                          ^
TypeError: Cannot use 'in' operator to search for '_id' in Account
    at model.Document._buildDoc (/webroot/api.domain.com/production/node_modules/mongoose/lib/document.js:162:27)
    at model.Document (/webroot/api.domain.com/production/node_modules/mongoose/lib/document.js:67:20)
    at model.Model (/webroot/api.domain.com/production/node_modules/mongoose/lib/model.js:33:12)
    at new model (/webroot/api.domain.com/production/node_modules/mongoose/lib/model.js:1663:11)
    at Object.model (/webroot/api.domain.com/production/node_modules/mongoose/lib/model.js:1662:14)
    at Object.findOrCreateOneForTwitter (/webroot/api.domain.com/production/models/account.coffee:60:17)
    at module.exports.callback.error (/webroot/api.domain.com/production/endpoints/twitter.coffee:67:34)
    at Twitter.get (/webroot/api.domain.com/production/node_modules/ntwitter/lib/twitter.js:85:7)
    at passBackControl (/webroot/api.domain.com/production/node_modules/oauth/lib/oauth.js:361:11)
    at IncomingMessage.exports.OAuth._performSecureRequest.request.on.callbackCalled (/webroot/api.domain.com/production/node_modules/oauth/lib/oauth.js:380:9) 
```

有什么已知的解决方法吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T02:36:58.183

此错误并非特定于 Mongoose；它会显示 if`obj`不是一个对象，而是一个字符串，例如：

```
var obj = 'Account';
'id' in obj;
// TypeError: Cannot use 'in' operator to search for 'id' in Account 
```

假设这不是 Mongoose 问题，您会在这里寻找某个地方：

```
at Object.findOrCreateOneForTwitter 
    (/webroot/api.domain.com/production/models/account.coffee:60:17) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T04:05:50.487

`require`顺便说一句，如果您尝试加载 AMD 模块并使用而不是`define`定义模块，您将从 dojo 解析器中得到相同的错误。

# sql - 使用参数的 MS Access 选择查询失败

> ID：14617368
> 
> 赞同：0
> 
> 时间：2013-01-31T02:16:05.790
> 
> 标签：sql, ms-access, asp-classic

我正在使用 Access DB 作为经典 asp 网页的后端。我正在创建一个使用参数的已保存查询。我在 Access 2000 的查询生成器中进行测试。字段都是文本，默认值为 NULL，[in_b] 允许长度为零，其中有 9 个，分别命名为 B160、B80、B40、B30 等。

我的查询是：

```
 SELECT COUNT([in_b]) AS BCnt FROM tblScore 
 WHERE UCALL=[in_call] and NOT ISNULL([in_b]); 
```

这将返回给定 UCALL 的所有行的计数。如果我将 2[in_b] 中的任何一个更改为实际的列名，查询就会给我我想要的（在这种情况下为 0），但是我必须运行 9 个查询。

表格示例

```
Call  Zone B160   B80  B40
NF4L   1    NULL   X    NULL
NF4L   6    Null  Null  NULL
NF4L   20     X     X   Null
WA4B   2    NULL  NULL   X

If in_call is NF4L and in_b is B160, I expect 1
If in_call is NF4L and in_b is B80,  I expect 2
If in_call is NF4L and in_b is B40,  I expect 0 
```

目标是对给定调用的所有非空“B”列进行计数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:00:26.397

在这种情况下，您使用参数 ([in_b]) 作为对列的引用，而不是实际数据值。我认为您不会对这种设计走得太远。

除了构建 9 个不同的查询（不要这样做！）之外，您还可以尝试另外两个选项：

1.  将您的表格设计更改为更多的键值对
2.  根据提供的条件动态构建查询

对于选项 1，您可以将表更改为如下所示：

```
Call | Zone | BField | BFieldValue
NF4L | 1    | B80    | X
NF4L | 1    | B160   | NULL
NF4L | 1    | B40    | NULL
NF4L | 6    | B160   | NULL
NF4L | 6    | B80    | NULL
NF4L | 6    | B40    | NULL
NF4L | 20   | B160   | X
NF4L | 20   | B80    | X
NF4L | 20   | B40    | NULL
... 
```

您的查询可能如下所示：

```
SELECT BField, COUNT([BFieldValue]) AS BCnt 
FROM tblScore 
WHERE UCALL=[in_call] and [BFieldValue] IS NOT NULL
GROUP BY BField; 
```

此选项是两者中可扩展性更强的一个。如果您需要在某些时候添加额外的“BFields”，这样做是微不足道的，但代价是必须重新设计表格，如何将数据添加到表格中。

选项 2 是在运行时动态构建查询，以便您可以根据您概述的条件替换实际的列名。例如：

```
Dim SQL as String
Dim BField as String
Dim InCall as String

'These would typically be passed in, not hardcoded as they are here
Set InCall = "NF4L"
Set BField = "B160"

SET SQL = "SELECT Count([" & BField & "] FROM tblScore WHERE [Call] ='" & InCall & "' AND NOT ISNULL([" & BField & "]);"

'From here, either open up a recordset based on this SQL or create a new QueryDef object and execute it. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T14:12:32.713

我知道使用 SQL Server，您可以传递参数并使用`CASE`语句，如下所示：

```
SELECT COUNT(*) 
FROM Test
WHERE CASE 
   WHEN @col = 'col1'
   THEN col1 
   WHEN @col = 'col2' 
   THEN col2 END IS NOT NULL 
```

其中@col 是传入的参数。我认为您可以在 MS Access 中使用`IIF`-- 试一试：

```
SELECT COUNT(*) 
FROM Test
WHERE NOT ISNULL(IIF(@col = 'col1', col1, IIF(@col = 'col2', col2, ...)) 
```

或者，您可以使用动态 SQL 执行此服务器端，但请确保使用参数化查询。这是一个很好的例子：

```
Const ad_nVarChar = 202
Const ad_ParamInput = 1

strSQL = "SELECT Count(*) FROM tblScore WHERE [Call] = ? AND NOT ISNULL(?); "

Set cmd = Server.CreateObject("ADODB.Command")    
cmd.ActiveConnection = connStr
cmd.CommandText = strSQL
cmd.CommandType = adCmdText
cmd.Parameters(0) = "NF4L"
cmd.Parameters(1) = "B160"

Set rst = cmd.Execute() 
```

祝你好运。

# c# - 如何使用其他 Usercontrol 属性

> ID：14617369
> 
> 赞同：0
> 
> 时间：2013-01-31T02:16:48.147
> 
> 标签：c#, winforms, c#-4.0, user-controls

我怎么能使用其他属性让说，我在那个中`usercontrol`创建一个。然后我想从主用户控件到那个列表框。它们都不同。`listBox``usercontrol``manupulate``usercontrol`

到目前为止，我尝试这样做：

```
public VwLog refFromLog { get; set; } 
```

.

```
VwLog log = (VwLog)this.refFromLog; 
test = new Simple(log.listBox.Items); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T05:06:55.597

您可以在包含 ListBox 的用户控件中为 ListBox 创建事件、方法和属性。例如，在调用 listbox.add 的 UserControl 中创建一个 listboxadd 方法。然后，您可以从包含第一个用户控件的主用户控件 2 或表单访问这些公共事件、方法和属性。

# email - Unix 电子邮件命令不起作用

> ID：14617370
> 
> 赞同：1
> 
> 时间：2013-01-31T02:16:55.800
> 
> 标签：email, unix

我正在尝试从 unix 环境发送如下电子邮件。一旦我输入命令它什么都不做，我必须手动终止该进程。我在这里遗漏了什么吗？我相信身体是可选的。

```
mail -s "Testing" user@mail.com 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T02:22:00.447

是的，它似乎*什么*都不做，它正在等待您在发送之前输入电子邮件的正文。

从 BSD`mail`手册页（尽管它们都非常相似）：

> **发送邮件**
> 要向一个或多个人发送消息，可以使用参数调用邮件，这些参数是要向其发送邮件的人的姓名。然后，您需要输入您的消息，然后在一行的开头输入“control-D”。

所以只需使用文件结束输入序列`CTRL-D`（而不是`CTRL-C`中断序列）来结束输入并发送电子邮件。

或者，尝试：

```
echo '' | mail -x "Testing" user@mail.com 
```

或者：

```
mail -x "Testing" user@mail.com </dev/null 
```

其中提供空输入的两种方法有效地做同样的事情，而无需您输入任何内容。

# perl - 在 perl 中使用 web::scraper 提取特定信息

> ID：14617374
> 
> 赞同：2
> 
> 时间：2013-01-31T02:17:15.830
> 
> 标签：perl

我是网络抓取的新手。我想知道是否可以使用`web::scraper`perl 提取特定信息。例如，我的 html 如下所示（我从 URL 中提取了部分 html）：

```
 <table class="reference">
     <tr>
     <th width="23%" align="left">Property</th>
     <th width="71%" align="left">Description</th>
     <th style="text-align:center;">DOM</th>
     </tr>
     <tr>
        <td><a href="prop_node_attributes.asp">attributes</a></td>
        <td>Returns a collection of a node's attributes</td>
        <td style="text-align:center;">1</td>
     </tr>

     <tr>
        <td><a href="prop_node_baseuri.asp">baseURI</a></td>
        <td>Returns the absolute base URI of a node</td>
        <td style="text-align:center;">3</td>
     </tr>
     <tr>
        <td><a href="prop_node_childnodes.asp">childNodes</a></td>
        <td>Returns a NodeList of child nodes for a node</td>
        <td style="text-align:center;">1</td>
     </tr>
     <tr>
        <td><a href="prop_node_firstchild.asp">firstChild</a></td>
        <td>Returns the first child of a node</td>
        <td style="text-align:center;">1</td>
     </tr>
     <tr>
        <td><a href="prop_node_lastchild.asp">lastChild</a></td>
        <td>Returns the last child of a node</td>
        <td style="text-align:center;">1</td>
     </tr>
     <tr>
        <td><a href="prop_node_localname.asp">localName</a></td>
        <td>Returns the local part of the name of a node</td>
        <td style="text-align:center;">2</td>
     </tr>
     <tr>
        <td><a href="prop_node_namespaceuri.asp">namespaceURI</a></td>
        <td>Returns the namespace URI of a node</td>
        <td style="text-align:center;">2</td>
     </tr>
     <tr>
        <td><a href="prop_node_nextsibling.asp">nextSibling</a></td>
        <td>Returns the next node at the same node tree level</td>
        <td style="text-align:center;">1</td>
     </tr>
     <tr>
        <td><a href="prop_node_nodename.asp">nodeName</a></td>
        <td>Returns the name of a node, depending on its type</td>
        <td style="text-align:center;">1</td>
     </tr>
     <tr>
        <td><a href="prop_node_nodetype.asp">nodeType</a></td>
        <td>Returns the type of a node</td>
        <td style="text-align:center;">1</td>
     </tr>
     <tr>
        <td><a href="prop_node_nodevalue.asp">nodeValue</a></td>
        <td>Sets or returns the value of a node, depending on its 
        type</td>
        <td style="text-align:center;">1</td>
     </tr>
     <tr>
        <td><a href="prop_node_ownerdocument.asp">ownerDocument</a></td>
        <td>Returns the root element (document object) for a node</td>
        <td style="text-align:center;">2</td>
     </tr>
     <tr>
        <td><a href="prop_node_parentnode.asp">parentNode</a></td>
        <td>Returns the parent node of a node</td>
        <td style="text-align:center;">1</td>
     </tr>
     <tr>
        <td><a href="prop_node_prefix.asp">prefix</a></td>
        <td>Sets or returns the namespace prefix of a node</td>
        <td style="text-align:center;">2</td>
     </tr>
     <tr>
        <td><a href="prop_node_previoussibling.asp">previousSibling</a></td>
        <td>Returns the previous node at the same node tree level</td>
        <td style="text-align:center;">1</td>
     </tr>
     <tr>
        <td><a href="prop_node_textcontent.asp">textContent</a></td>
        <td>Sets or returns the textual content of a node and its 
        descendants</td>
        <td style="text-align:center;">3</td>
     </tr>
     </table> 
```

所以我的 perl 代码如下：

```
#!/usr/bin/perl
use warnings;
use strict;
use URI;
use Web::Scraper;

# website to scrape
my $urlToScrape = "http://www.w3schools.com/jsref/dom_obj_node.asp";

my $rennersdata = scraper {
 process "table.reference > tr > td", 'landrenner[]' => 'TEXT';
 };

my $res = $teamsdata->scrape(URI->new($urlToScrape));
for my $i (0 .. $#{$res->{landrenner}}) {

print $res->{landrenner}[$i];
print "\n";
} 
```

当我运行上面的代码时，我得到了`td`标签内的所有文本。即对于`$i=0`，输出为：

```
attributes
Returns a collection of a node's attributes
1 
```

是否有可能我只能得到输出：

```
Returns a collection of a node's attributes 
```

为了获得上述输出，我必须进行哪些更改？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T02:42:55.263

`td`通过调整 CSS 选择器告诉它你只想要第二个；而不是`"table.reference > tr > td"`做`"table.reference > tr > td:nth-of-type(2)"`

# php - 正确使用 php 命名空间

> ID：14617377
> 
> 赞同：1
> 
> 时间：2013-01-31T02:17:45.790
> 
> 标签：php, namespaces

我刚刚开始重建我使用命名空间制作的应用程序，以使未来的开发更容易，因此我们可以重用类名。

基本上我的代码如下。

```
<?php
session_start();

error_reporting(E_ALL);
ini_set('display_errors', 1);

use core\marketing as marketing;
use core\security as security;
use core\structure as structure;
use core\data as data;

include 'marketing\cleanurl.php';
?> 
```

一旦我运行它，我就会收到以下错误：

> 警告：include(marketing\cleanurl.php)：无法打开流：第 27 行 /var/www/index.php 中没有此类文件或目录警告：include()：无法打开“marketing\cleanurl.php”以包含(include_path='.:/usr/share/php:/usr/share/pear') 在 /var/www/index.php 第 27 行

我的目录结构与命名空间匹配，因为这是我在网上阅读的内容。

现在，如果我更改包含以匹配目录，即

```
include 'core/marketing/cleanurl.php'; 
```

我收到以下错误

> 解析错误：语法错误，意外的 T_CLASS，需要 T_NS_SEPARATOR 或 ';' 或第 4 行 /var/www/twiggled/core/marketing/cleanurl.php 中的“{”

当我只是使用 require_once 调用所有类时，这一切都奏效了，但发现系统的这种有限扩展并使更改更加耗时，并且想要使用命名空间，因为它们在我使用的其他语言中一直很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T03:28:20.867

由于 OP 要求它，这是使用自动加载的更新答案。

注意：当然，为了简化任务，不需要如此复杂的结构。然而，这只是一个例子（自动加载*、*需求、静态方法等）。

## 引导/自动加载

**/var/www/somedir/Twiggled/bootstrap.php**

```
<?php
namespace Twiggled;

require_once __DIR__ . '\Common\AutoLoader.php';

$autoloader = new \Twiggled\Common\AutoLoader(__NAMESPACE__, dirname(__DIR__));
$autoloader->register(); 
```

**/var/www/somedir/Twiggled/Common/AutoLoader.php**

```
<?php
namespace Twiggled\Common;

/**
 * PSR-0 Autoloader
 *
 * @package    Common
 */
class AutoLoader
{
    /**
     * @var string The namespace prefix for this instance.
     */
    protected $namespace = '';

    /**
     * @var string The filesystem prefix to use for this instance
     */
    protected $path = '';

    /**
     * Build the instance of the autoloader
     *
     * @param string $namespace The prefixed namespace this instance will load
     * @param string $path The filesystem path to the root of the namespace
     */
    public function __construct($namespace, $path)
    {
        $this->namespace = ltrim($namespace, '\\');
        $this->path      = rtrim($path, '/\\') . DIRECTORY_SEPARATOR;
    }

    /**
     * Try to load a class
     *
     * @param string $class The class name to load
     *
     * @return boolean If the loading was successful
     */
    public function load($class)
    {
        $class = ltrim($class, '\\');

        if (strpos($class, $this->namespace) === 0) {
            $nsparts   = explode('\\', $class);
            $class     = array_pop($nsparts);
            $nsparts[] = '';
            $path      = $this->path . implode(DIRECTORY_SEPARATOR, $nsparts);
            $path     .= str_replace('_', DIRECTORY_SEPARATOR, $class) . '.php';

            if (file_exists($path)) {
                require $path;
                return true;
            }
        }
        return false;
    }

    /**
     * Register the autoloader to PHP
     *
     * @return boolean The status of the registration
     */
    public function register()
    {
        return spl_autoload_register(array($this, 'load'));
    }

    /**
     * Unregister the autoloader to PHP
     *
     * @return boolean The status of the unregistration
     */
    public function unregister()
    {
        return spl_autoload_unregister(array($this, 'load'));
    }
} 
```

## 打包文件

**/var/www/somedir/Twiggled/Core/Helper/Strings.php**

```
<?php
namespace Twiggled\Core\Helper;

class Strings
{
    // Note: Eventhough the method use a global PHP function name,
    // there is no problem with it - thanks to namespace.
    public static function str_replace($str) 
    {
        $str = preg_replace('/\s/', '_', strtolower($str));
        return preg_replace('/[^a-zA-Z_]/', '', $str);
    }
} 
```

**/var/www/somedir/Twiggled/Core/Marketing/Cleanurl.php**

```
<?php
namespace Twiggled\Core\Marketing;

use \Twiggled\Core\Helper\Strings as HelperStrings;

class Cleanurl 
{
    const BASE_URL = 'http://example.com/';
    public $cleanPath;

    public function __construct($str) 
    {
        $this->cleanPath= HelperStrings::str_replace($str);
    }
} 
```

## 加载并使用它..

**/var/www/somedir/index.php**

```
<?php
error_reporting(E_ALL);
ini_set('display_errors', 1);
ini_set('date.timezone', 'Europe/Berlin');

// Bootstrap the package / register autoloader
require_once __DIR__ . '\Twiggled\bootstrap.php';

use \Twiggled\Core\Marketing as Marketing;

try {
    $obj = new Marketing\Cleanurl('$This w-ork5s!');

    // prints 'http://example.com/this_works'.
    echo Marketing\Cleanurl::BASE_URL . $obj->cleanPath; 
} 
catch (\Exception $e) { } 
```

# javascript - Mongoose / MongoDB：计算数组中的元素

> ID：14617379
> 
> 赞同：8
> 
> 时间：2013-01-31T02:17:55.133
> 
> 标签：javascript, mongodb, mapreduce, mongoose

我正在尝试使用 Mongoose 计算我的集合中数组中字符串的出现次数。我的“模式”如下所示：

```
var ThingSchema = new Schema({
  tokens: [ String ]
}); 
```

我的目标是在“Thing”集合中获得前 10 个“令牌”，每个文档可以包含多个值。例如：

```
var documentOne = {
    _id: ObjectId('50ff1299a6177ef9160007fa')
  , tokens: [ 'foo' ]
}

var documentTwo = {
    _id: ObjectId('50ff1299a6177ef9160007fb')
  , tokens: [ 'foo', 'bar' ]
}

var documentThree = {
    _id: ObjectId('50ff1299a6177ef9160007fc')
  , tokens: [ 'foo', 'bar', 'baz' ]
}

var documentFour = {
    _id: ObjectId('50ff1299a6177ef9160007fd')
  , tokens: [ 'foo', 'baz' ]
} 
```

...会给我数据结果：

```
[ foo: 4, bar: 2 baz: 2 ] 
```

我正在考虑为这个工具使用 MapReduce 和 Aggregate，但我不确定什么是最佳选择。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-05T19:58:14.823

啊哈，我找到了解决方案。MongoDB 的`aggregate`框架允许我们对集合执行一系列任务。特别值得注意的是`$unwind`，它将文档中的数组分解为*唯一的文档*，因此它们可以被分组/*整体*计数。

[MongooseJS](http://mongoosejs.com/)在模型上非常容易地公开了这一点。使用上面的示例，如下所示：

```
Thing.aggregate([
    { $match: { /* Query can go here, if you want to filter results. */ } } 
  , { $project: { tokens: 1 } } /* select the tokens field as something we want to "send" to the next command in the chain */
  , { $unwind: '$tokens' } /* this converts arrays into unique documents for counting */
  , { $group: { /* execute 'grouping' */
          _id: { token: '$tokens' } /* using the 'token' value as the _id */
        , count: { $sum: 1 } /* create a sum value */
      }
    }
], function(err, topTopics) {
  console.log(topTopics);
  // [ foo: 4, bar: 2 baz: 2 ]
}); 
```

在大约 200,000 条记录的初步测试中，它明显快于 MapReduce，因此扩展性可能更好，但这只是粗略一瞥。YMMV。

# javascript - 将布尔值从 rails 控制器传递到 javascript 以在条件下使用

> ID：14617380
> 
> 赞同：3
> 
> 时间：2013-01-31T02:18:00.737
> 
> 标签：javascript, ruby-on-rails-3, jquery, twitter-bootstrap-rails

我在使用 ajax 处理的引导模式中有一个表单。如果表单验证它会关闭模式或按预期显示验证错误。但是，如果基于控制器中保存的布尔值满足条件，我想在模态隐藏动画完成后重定向用户。虽然条件不会像写的那样工作，但它可以让你看到我想要完成的事情：

```
$(document).ready(function() {
  $('#modal-window').modal({remote: true});
  $('#modal-window').modal('show');
  $('#modal-window').on('hidden', function(){
    var saved = <%= @bool %>;
    if(saved == "true"){
      $(window.location.replace("<%= some_url %>"));}
    });
}) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T12:06:12.993

您正在设置保存为布尔值（可能 - 您的`@bool`var 中的任何内容）

```
var saved = <%= @bool %>; 
```

但然后与*字符串进行比较* `"true"`

```
if(saved == "true"){ 
```

所以，如果你用

```
if(saved){ 
```

它会工作的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T10:54:07.573

代替

```
var saved = <%= @bool %>; 
```

和

```
var saved = "<%= @bool %>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T02:55:19.290

您在哪里发布了此代码？如果您的表单`index.html.erb`在使用 时`remote: true`，您将需要一个`index.js.erb`文件来提供您希望在示例中运行的 javascript。另外，不要忘记使用`j`like转义返回 URL `<%=j some_url %>`。

# mysql - 我需要在表格中包含这个字段吗

> ID：14617382
> 
> 赞同：0
> 
> 时间：2013-01-31T02:18:24.293
> 
> 标签：mysql, sql, database

我有 5 个 db 表，但我遇到的问题是`Student_Answer`表，我不知道我是否应该`SessionId`在该表中包含该字段，因为我们将通过外键知道每个问题属于哪个会话。我想我不妨要求确保：

以下是表格：

会话表

```
SessionId (auto PK) SessionName
1                   DOEEO
2                   EFOEO
3                   EOEOW 
```

问题表：

```
QuestionId (Auto PK) QuestionNo  QuestionContent  SessionId (Fk)
1                    1           Question 1       1
2                    2           Question 2       1
3                    3           Question 3       2
4                    4           Question 4       2           
5                    5           Question 5       3 
```

答案表：

```
AnswerId (Auto PK)  Answer  QuestionId(Fk) 
1                   A       1
2                   C       1
3                   B       2
4                   C       3
5                   A       4
6                   D       5
7                   E       5 
```

学生表：

```
StudentId (Auto PK)  StudentForename   StudentSurname
1                    Joe               Price
2                    Kyle              May
3                    Mark              Knowles 
```

Student_Answer 表：

```
StudentAnswerId (auto PK) SessionId(FK) QuestionId (FK) StudentAnswer  StudentId (FK)
1                         1             1               C              1
2                         1             1               B              1
3                         1             1               A              2
4                         1             1               C              2
5                         1             2               C              1
6                         1             2               B              2
7                         2             3               A              1
8                         2             3               C              2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T02:23:02.187

您不仅不需要 StudentAnswer 表中的 SessionID 字段，也不需要 StudentAnswerId 字段。您只需要 QuestionID、StudentId 和 StudentAnswer。您的主键是 QuestionId 和 StudentId。

这称为多对多关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T02:28:33.140

如果你这样做了，那将违反规范化规则，所以严格来说答案是否定的。然而，这并不是说非规范化总是不好的。这样做的主要问题是，如果/当您忘记更新两个数字时，检测应用程序中的问题变得更加困难。

如果问题的会话编号一旦设置就不可能更改，那么这不是一个大问题，但是如果它可以更改并且您不在另一个表中更改它，那么这就是一个问题.. . 这就是为什么最好把它放在一个地方。

说了这么多，我想知道您是否将会议保持在最佳开始位置。你能解释一下为什么一个会话应该与问题而不是答案或学生相关联吗？在不了解您的系统的情况下，我的猜测是会话应该保存在学生表而不是问题表上。

编辑：不是将 SessionId 添加到学生答案表中，通常您要做的只是创建一个包含您需要的所有信息的视图。如果视图仅用于人类可读性，那么您甚至不需要包含 id 字段，而只需在视图中显示实际会话名称。但是，如果您只是想创建一些使编码更容易的东西，那么您也可以在视图中包含 id。

# c# - 如何使用线程池不会因为创建自己的线程而导致主机资源崩溃？

> ID：14617385
> 
> 赞同：0
> 
> 时间：2013-01-31T02:18:34.337
> 
> 标签：c#, .net, multithreading, threadpool

对于选择使用线程池而不是创建自己的线程，我仍然有点困惑。

我知道创建自己的线程的性能问题（为我创建的每个线程创建、执行垃圾收集器收集），所以不需要提出这个问题

关键是，如果我使用线程池抽象创建线程的数量，（我没有定义线程限制），CLR如何知道多少就足够了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T02:23:17.857

运行时有预定义数量的工作线程运行，我认为默认值为 10。它会将您的工作请求排队，直到池中有一个未占用的线程。这是一个非常简单且相当安全的多线程模型，但您可能需要研究“异步/等待”，因为它可以利用多个并发模型并抽象出丑陋。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T02:27:21.267

.NET 运行时会根据核心数和其他因素自动选择合理的最大线程数，但如果您有特殊需要，您可以自行设置此数字。

[http://msdn.microsoft.com/en-us/library/system.threading.threadpool.aspx](http://msdn.microsoft.com/en-us/library/system.threading.threadpool.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T02:55:17.813

如果系统将耗尽资源，线程池**不会崩溃。**线程池将等到下一个线程可用于运行您的请求（无论它可能是什么）。

但是要注意一个可以耗尽最大可用线程的代码是 99.5% 是写得不好或不正确。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T02:58:01.227

看看`QueueUserWorkItem`。这里的关键字是'**队列**'。

排队执行的方法。该方法在线程池线程**可用**时执行。

ThreadPool 提供了一个线程池，可用于执行任务、发布工作项、处理异步 I/O、代表其他线程等待以及处理计时器。

[http://msdn.microsoft.com/en-us/library/system.threading.threadpool.queueuserworkitem.aspx](http://msdn.microsoft.com/en-us/library/system.threading.threadpool.queueuserworkitem.aspx)

IE：`ThreadPool.QueueUserWorkItem((i)=> Console.WriteLine("Hello"));`

# ios - 在 MonoTouch 中检查 iOS 类（而不是方法）的可用性

> ID：14617386
> 
> 赞同：2
> 
> 时间：2013-01-31T02:18:35.413
> 
> 标签：ios, xamarin.ios, weak-linking

MonoTouch 公开了[RespondsToSelector](http://iosapi.xamarin.com/?link=M:MonoTouch.Foundation.NSObject.RespondsToSelector%28MonoTouch.ObjCRuntime.Selector%29)方法，用于检查跨 iOS 版本的方法的可用性。

但是，我似乎不知道如何对课程可用性进行类似的检查。
[Apple 在此处记录](http://developer.apple.com/library/ios/documentation/DeveloperTools/Conceptual/cross_development/Using/using.html)了在 iOS 4.2+ 中您应该尝试访问`class`所需类的静态选择器。例如：

```
if ([EKReminder class]) 
{
    ....
} 
```

然而，这似乎并没有暴露出来。我认为这与[我之前的问题](https://stackoverflow.com/questions/14534509)类似，因为要在 MT 中实现这一点，需要`Class`在每个 MT 类型上显式映射静态属性。

所以我想我的问题是，我应该只使用旧的 pre iOS 4.2 技术吗？IE：

```
Class cls = NSClassFromString (@"EKReminder");
if (cls) 
{
    ...
} 
```

我认为映射到：

```
var iosClass = Class.GetHandle("EKReminder");
if ( iosClass != null )
    ... 
```

[或者使用Messaging](http://docs.go-mono.com/?link=T:MonoTouch.ObjCRuntime.Messaging)中可用的互操作方法手动调用选择器？

还是我没有找到的其他方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T13:51:43.487

*安全*检查使用：

```
if (Class.GetHandle (typeof (EKReminder)) != IntPtr.Zero) {
    // we know we can use EKReminder
} 
```

但是它有点昂贵，因为它涉及反射。Objective-C 名称可以不同于 .NET 名称（例如`NSURL`，与`NSUrl`只能通过反映`Register`属性找到）。

如果您知道 Objective-C 名称，那么您可以使用非类型安全的重载来跳过反射。例如

```
// checking for NSUrl would not work
if (Class.GetHandle ("NSURL") != IntPtr.Zero) {
    // we know we can use NSUrl
} 
```

再次（并为每个人概括我的答案）通常最好/更容易/更快地使用 iOS 版本对非硬件功能进行运行时检查。

```
if (UIDevice.CurrentDevice.CheckSystemVersion (5,0)) {
    // we know feature X was added in 5.0
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T13:51:23.810

只需使用 iOS 4.2 之前的技术：

```
var iosClass = Class.GetHandle ("EKReminder");
if (iOSClass != null)
    ... 
```

Apple 推荐的方法似乎是 gcc/clang 的特例，在 MonoTouch 中不起作用。

# javascript - 使用 JS 更改值后对数据表进行排序

> ID：14617389
> 
> 赞同：2
> 
> 时间：2013-01-31T02:18:43.497
> 
> 标签：javascript, datatables

我一直在使用 DataTables 1.9.4，一切看起来都非常好，格式也很好，但是我在对列进行排序时遇到了一些问题。当页面加载时，我用数据填充表格，然后我使用 JS 更改了一些值。数据更改后，排序功能似乎不再正常工作。我进行了一些测试，并意识到输入的初始数据已保存，并且始终按此排序，而不是当前值。我想知道是否有任何方法可以让它保存新值并按这些值排序。

谢谢-瑞恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T05:02:04.780

我认为数据表不支持这种操作。但我发现这个我认为它很有帮助。虽然看起来有点复杂。请参考这个网址： [http](http://www.datatables.net/examples/plug-ins/dom_sort.html) ://www.datatables.net/examples/plug-ins/dom_sort.html 。

# mef - 如何在创建实例时使用 MEF 填充字段

> ID：14617391
> 
> 赞同：0
> 
> 时间：2013-01-31T02:18:58.310
> 
> 标签：mef

文档中的示例填充了一个计算器字段，该字段存在于正在调用的同一对象上

```
_container.ComposeParts(this); 
```

不过，我对这种`ComposeParts()`方法有点困惑。我猜这不是你应该在所有导入值的对象的构造函数中调用的东西，那么在实例化对象时让 MEF 填充对象字段的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T21:41:25.963

不，您不需要在每个构造函数中调用 ComposePart()。在合成 MEF 期间（在运行时），遍历所有目录并尝试将 Imports 与有效的 Exports 匹配。这绝对是一个陷阱——你必须让 MEF 实例化你的对象，你不要自己做（或告诉 WPF/Silverlight 去做）。它通过您的项目和类级联，将所有内容连接起来。

如果有些类确实有导入，但您需要动态创建它们的实例，那么您可以在构造函数中使用类似的东西——比如 CompositionInitializer.SatisfyImports()。

但如果你这样做，那么我认为推荐的做法是查看不同的容器，比如 Unity。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T11:34:29.537

如果您使用 MEF 在您的应用程序中实现 DI，那么您应该记住：组合应该只发生（最好）在组合根中（阅读 Mark Seemann 的文章：[http ://blog.ploeh.dk/2011/07 /28/CompositionRoot/](http://blog.ploeh.dk/2011/07/28/CompositionRoot/)）。

任何尝试使用任何 IoC 容器在稍后的运行时显式解析所需实例都是服务定位器的实践，这在 DI 世界中被视为反模式。

# c++ - 在 Windows 上使用 C 或 C++ 更改系统时间

> ID：14617393
> 
> 赞同：-2
> 
> 时间：2013-01-31T02:19:05.100
> 
> 标签：c++, c, windows

如何使用 C 或 C++ 在 Windows 上更改系统时间？

我搜索了互联网，但我找不到它。

按照这个链接： http: [//learnhacking.in/c-program-to-set-change-current-system-date/](http://learnhacking.in/c-program-to-set-change-current-system-date/)

但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T02:23:26.247

在 Windows 中，您可以通过[GetSystemTime](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724390%28v=vs.85%29.aspx)（以及一些不同的 C/C++ 标准库函数）获取时间，并通过[SetSystemTime设置时间](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms724942%28v=vs.85%29.aspx)

请注意，您需要在 Windows 中具有某些权限才能更改时间，因此如果您没有这些权限，则需要让管理员授予您更多权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T02:23:19.670

您可以通过包含 windows.h 标头并调用 SetSystemTime(...) 函数来设置它。

# php - 使用 Codeigniter，我如何向其他开发人员隐藏 Paypal 凭据？

> ID：14617394
> 
> 赞同：3
> 
> 时间：2013-01-31T02:19:11.140
> 
> 标签：php, mysql, git, codeigniter, paypal

在这里找不到很好的答案。

所以基本上我使用 bitbucket.org 作为我的 git 系统。我的应用程序使用 api 用户名、密码、签名等贝宝凭据。什么是最好和最安全的方法来向其他将检查并处理我的代码的开发人员隐藏这些凭据？

我使用 LAMP 堆栈。CodeIgniter 框架。

我正在考虑拥有一个不添加到 git 的序列化文件，将其也放在实时服务器上，然后对其进行反序列化并从中提取凭据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T03:51:25.930

您不必与处理数据库配置文件有任何不同的处理方式。

首先，创建`application/config/paypal.php`：

```
// Change this information to match your settings
//$config['paypal_seekrit'] = '';
// whatever else 
```

*请注意，就像*这样创建它，因为您最初将其作为存根进行跟踪。添加并提交：

```
git add application/config/paypal.php
git commit 
```

现在，将其添加到`.gitignore`本地不再对其进行跟踪。添加并提交`.gitignore`. 然后，在您的代码中，您需要执行以下操作以确保人们记得正确设置：

```
$this->load->config('paypal');
$seekrit = $this->config->item('paypal_seekrit');
if ($seekrit === FALSE) {
    // config->item returns FALSE by default if item doesn't exist
    log_message('error', 'You need to configure config/paypal.php!');
    // bail out, if appropriate
    show_error('Paypal keys have not been configured');
} 
```

这个时候就可以推了。现在每个人都有一个文件存根，任何人在他们最后做的任何事情都不会有被推回的危险。缺点是，如果您需要更改默认存根以添加或删除选项，您（和其他所有人）将需要合并。但是，这是一个微不足道的文件，我不认为这是一个问题。

然后，将您的密钥添加到文件中，而不必担心意外提交和推送它们。请注意，如果在库中使用它，您首先必须调用`get_instance()`以获取框架超级对象（单例），例如：

```
$CI = get_instance();
$CI->load->config('paypal');
$seekrit = $CI->config->item('paypal_seekrit');
... 
```

我在一个新的 CI 项目上做的第一件事就是提交`application/`，然后停止跟踪`application/config`.

您也可以只为覆盖所有先前加载的配置的站点特定设置创建一个捕获所有配置文件并将其粘贴在那里（类似于`config/appname.php`）。只要确保以配置/加载器类工作的方式进行，就像有人期望它们工作一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T02:38:34.173

将您的凭据存储在配置文件中。看看PHP的`parse_ini_file`函数： http: [//php.net/manual/en/function.parse-ini-file.php](http://php.net/manual/en/function.parse-ini-file.php)

由于您使用的是 codeigntor，您还可以使用：[http ://ellislab.com/codeigniter/user-guide/libraries/config.html](http://ellislab.com/codeigniter/user-guide/libraries/config.html)

然后，您可以拥有生成配置文件的各种构建脚本，或使用 PayPal 沙箱凭据（如果您想签入配置文件）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T02:22:17.177

你可以：

1）使用您在本地设置的环境变量，并且仅通过代码中的环境变量名称引用它们。

根据要求详细说明：您可以通过 .bashrc 等在本地设置环境变量，使用： `EXPORT PAYPALUSERNAME=mypaypalusername`

```
 `EXPORT PAYPALPASSWORD=mypaypalpassword`

     `EXPORT PAYPALSIGNATURE=mypaypalsignature` 
```

然后在您的代码中：

```
 $paypalusername = getenv(PAYPALUSERNAME); 
```

最后在你的自述文件中你会说：

```
 This code sets the username based on your PAYPALUSERNAME environment variable, please make sure to set it in your code 
```

2）使用某种配置语言（想到yml），设置你的api凭据，设置你的代码来读取/解析配置文件，而不是签入yml文件。

无论哪种情况，都需要 README 和/或注释，以便其他开发人员知道如何使用您的应用程序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T03:58:52.507

我通常会创建一些`config.example.ini.php`提交到 Git 存储库中的内容。安装应用程序时，我将此文件复制到`config.ini.php`并填写所有敏感数据。此外，`.gitignore`contains `config.ini.php`，因此该文件不会被意外提交。

扩展名`.ini.php`仅意味着它是包含`__halt_compiler();`在第一行注释中的 INI 文件，因此对该文件的直接请求将不会显示任何内容。要加载此文件，我使用`parse_ini_file()`函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T03:40:22.567

查看 CodeIgniter 环境。您可以在本地主机、开发等目录中设置任何配置/文件，git 忽略这些，然后将沙箱凭据放入可见的文件夹中

[http://ellislab.com/codeigniter/user-guide/general/environments.html](http://ellislab.com/codeigniter/user-guide/general/environments.html)

# asp.net - 迁移到 ASP.NET MVC 4 后授权中断

> ID：14617404
> 
> 赞同：0
> 
> 时间：2013-01-31T02:20:30.323
> 
> 标签：asp.net, .net, asp.net-mvc, asp.net-mvc-2, asp.net-mvc-4

我从 MVC 2 迁移到 MVC 4。我使用 Facebook Javascript API 进行身份验证，因此用户通过 Facebook 登录，而我只获得了他们的 Facebook ID。如果他们的 Facebook 登录尝试成功，在 MVC 2 中，我只是将他们登录到我的站点，以便他们可以访问具有 [Authorize] 属性的方法：

```
FormsService.SignIn(user.UserName, true); 
```

现在迁移到 MVC 4 后，我的 Facebook 登录过程仍然可以正常工作，但即使在执行 FormsService.SignIn 之后，用户似乎也没有通过身份验证。HttpContext.User.identity.IsAuthenticated 为假。因此，他们无法访问具有 [Authorize] 属性的方法。

我的 MVC 4 web.config 如下所示：

```
<profile defaultProvider="DefaultProfileProvider">
  <providers>
    <add name="DefaultProfileProvider" type="System.Web.Providers.DefaultProfileProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" applicationName="/" />
  </providers>
</profile>
<membership defaultProvider="UserMembershipProvider">
  <providers>
    <!--<add name="DefaultMembershipProvider" type="System.Web.Providers.DefaultMembershipProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/" />-->
    <add name="**UserMembershipProvider**" type="MyProject.Models.UserMembershipProvider" applicationName="/" />
  </providers>
</membership>
<roleManager defaultProvider="DefaultRoleProvider">
  <providers>
    <add name="DefaultRoleProvider" type="System.Web.Providers.DefaultRoleProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" applicationName="/" />
  </providers>
</roleManager>
<sessionState mode="InProc" customProvider="DefaultSessionProvider">
  <providers>
    <add name="DefaultSessionProvider" type="System.Web.Providers.DefaultSessionStateProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" />
  </providers>
</sessionState> 
```

如您所见，我在 MVC 2 中使用了一个名为“UserMembershipProvider”的自定义成员资格提供程序（尽管在我转移到 Facebook 身份验证后它并没有真正使用），并且我将相同的东西复制到 MVC 4。

我错过了什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T02:38:13.993

当您升级 web.config 中的表单身份验证部分时，是否有可能被删除/更新？

# r - 在 r 中制作地图的循环

> ID：14617405
> 
> 赞同：0
> 
> 时间：2013-01-31T02:20:34.130
> 
> 标签：r, loops, map, for-loop, maptools

我有一个数据框，其中包含 500 个物种和 25,000 个对各种物种的局部观测点。我想制作单个物种点图，地图上的每个点都是物种的一次出现。因为要制作的地图太多了，所以我需要循环执行此操作。这就是我到目前为止所拥有的。

```
#loop for making species map 1.1
species <- levels(raw$SpCode)
for(i in 1:length(species))  
            {
            #open the file for writing
             pdf(species[i], file=".pdf", width=5, height=4)
             plot (wrld_simpl, xlim=c(-100,-55), ylim=c(23,63), axes=TRUE, col='light grey')
             box() #adds box around map
             title(main=species[i]) #adds main title to map which should be the species name associated with the data
             points(raw, species[i]$longitude, species[i]$latittude, col='black', pch=21, bg="red", cex=0.85)
             dev.off()
             } 
```

我得到的主要错误输出是：

```
“Error in species[i]$longitude : $ operator is invalid for atomic vectors
In addition: Warning message:
‘mode(onefile)’ differs between new and previous==> NOT changing ‘onefile’" 
```

任何有关如何推进这方面的建议都会有所帮助。我正在使用 maptools 包来尝试制作这些地图。

干杯，以色列

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T23:13:25.657

# 循环制作物种地图1.2另存为pdf

感谢 Joran 帮我解决这个问题！:)

```
species <- levels(raw$SpCode)
for(i in 1:length(species))  
            {
            #open the file for writing
             pdf(paste0(species[i],".pdf"),width=5,height=4)
             plot (wrld_simpl, xlim=c(-100,-55), ylim=c(23,63), axes=TRUE, col='light grey')
             box() #adds box around map
             title(main=species[i]) #adds main title to map which should be the species name associated with the data
             points(raw$longitude[raw$SpCode == species[i]],raw$latitude[raw$SpCode == species[i]], col='black', pch=21, bg="red", cex=0.85)
             dev.off()
             } 
```

# vb.net - 在 ListBox 上显示 SQL SERVER 中的数据

> ID：14617406
> 
> 赞同：1
> 
> 时间：2013-01-31T02:20:38.313
> 
> 标签：vb.net, visual-studio-2010, sql-server-2008, sql-server-2005

我一直很难为我的问题找到解决方案，我想在我的 ListBox 中用 SQL 显示我的 DB 上的所有列......有人知道吗？请帮帮我？

这是我的代码：

```
Private Sub btnSearch_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnSearch.Click
        Try
            Dim thisConnection As New SqlConnection("Data Source=#####;Initial Catalog=####;Persist Security Info=True;User ID=#####;Password=#####") 
            thisConnection.Open()
            Dim sql As String = ("SELECT ControlNo,EmpNo,CheckOutDate,CheckOutTime,TaxiNo,PlateNo,Model,Make FROM dbo.ChkInOut WHERE ControlNo='" & txtsearch.Text & "'")
            Dim da As New SqlDataAdapter(sql, thisConnection)
            da.Fill(ds, "dbo.ChkInOut")
            Dim dt As DataTable = ds.Tables("dbo.ChkInOut")
            ListBox1.DataSource = dt
            ListBox1.DisplayMember = ("ControlNo")
            txtCtrlNo.DataBindings.Add("text", dt, "ControlNo")
            txtEmpNo.DataBindings.Add("text", dt, "EmpNo")
            txtCheckOutDate.DataBindings.Add("text", dt, "CheckOutDate")
            txtCheckOutTime.DataBindings.Add("text", dt, "CheckOutTime")
            txtTaxiUnitNo.DataBindings.Add("text", dt, "TaxiNo")
            txtPlateNo.DataBindings.Add("text", dt, "PlateNo")
            txtModel.DataBindings.Add("text", dt, "Model")
            txtMake.DataBindings.Add("text", dt, "Make")
            thisConnection.Close()
        Catch ex As Exception
        End Try
    End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T03:31:47.817

我认为您不能将多个列添加到单个列表框中。相反，我建议将您要显示的列 ( `DisplayMember`) 连接为单个列。

也许是这样的（假设所有列都是 varchar - 如果不是，您将需要使用`CAST`，`CONVERT`并且可能`COALESCE`：

```
SELECT ControlNo + ': ' + EmpNo + ': ' + CheckOutDate + ': ' + 
          CheckOutTime + ': ' + TaxiNo + ': ' + PlateNo + ': ' + 
          Model + ': ' + Make as DisplayColumn
FROM dbo.ChkInOut 
WHERE ControlNo='" & txtsearch.Text & "'" 
```

如果没有，您可以考虑使用 Gridview 或其他支持多列的控件。

顺便说一句——你没有设置一个`ValueMember`——你可能也需要根据你的需要这样做。

祝你好运。

# php - 连接表的 Mysql 子查询

> ID：14617408
> 
> 赞同：0
> 
> 时间：2013-01-31T02:20:48.203
> 
> 标签：php, mysql, sql, database, join

我的问题如下：

我有 3 个包含内容的表格：

```
tableA:|ID_A|field1|field2|field3| => base table

tableB:|ID_B | ID_C |ID_A| => Mapping Table

tableC:|ID_C |FieldToGet| => Additional info field table 
```

***重要假设：可能有多个 ID_C 值与同一个 ID_A 相关联，因此 tableB：具有以下结构：`

```
| ID_B | ID_C | ID_A|

|  24  |  81  |  23 |

|  25  |  11  |  23 |

|  26  | 82   |  23 |

|  27  | 42   |  24 |

|  28  | 113  | 33  | 
```

但是如果单个 ID_A 有多个 ID_B，它们将相互跟随。

现在，我正在编写一个 php 脚本来获取某个 ID_A 所需的字段，但它失败了，因为我的子查询返回了多行：

```
$q = $this->dao->prepare('SELECT FieldToGet FROM table3  WHERE ID_C = ( SELECT ID_C FROM table2 WHERE ID_A =$SOME_ID_A )'); 
```

我正在寻找一个仅从列 FieldToGet （我当前的尝试）获取结果的解决方案，或者一个将使用列 FieldToGet 加入整个基表的解决方案（不确定如何使用 JOIN 操作）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T02:23:03.870

加入看起来像这样，

```
SELECT  a.*, c.*   -- select the columns you want to get
FROM    tableA a
        INNER JOIN tableB b
            ON a.ID_A = b.ID_A
        INNER JOIN tableC c
            ON b.ID_C = c.ID_C 
```

要全面了解联接，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T02:43:07.493

不完全确定我了解您的需求。@JW 正确地向您展示了如何使用 INNER JOIN 将您的 3 个表连接在一起。

您的查询非常接近。而不是使用 WHERE ID_C =，您应该使用 WHERE ID_C IN ()。

```
SELECT FieldToGet 
FROM table3  
WHERE ID_C IN (SELECT ID_C FROM table2 WHERE ID_A =$SOME_ID_A) 
```

我个人更喜欢使用 JOIN 而不是 IN，但根据您的数据库结构，使用 IN 实际上可以更好地执行，因为使用 JOIN 可能会返回多个结果并需要使用 DISTINCT 或 GROUP BY。这是我读到的一篇很好的文章：

[http://explainextended.com/2009/06/16/in-vs-join-vs-exists/](http://explainextended.com/2009/06/16/in-vs-join-vs-exists/)

还有一个关于SO：

[https://stackoverflow.com/a/4755644/1073631](https://stackoverflow.com/a/4755644/1073631)

祝你好运。

# mantis - 螳螂删除问题

> ID：14617411
> 
> 赞同：1
> 
> 时间：2013-01-31T02:21:05.620
> 
> 标签：mantis

490 份报告中有 460 份未显示在“查看问题”中。另一方面，它们仍然显示在“摘要”下，并且所有报告看起来仍然可以访问。查看问题中仅显示 30 个问题。也可以通过输入数字并单击跳转来访问报告。

此外，即使我在单击摘要时得到 10 页结果（490 份报告），然后单击 365 天，我也可以单击问题编号来查看报告。但是当我单击 Excel 导出时，它只会将 30 个问题导出到 excel 文件中。

管理配置中没有任何更改，但流氓开发人员可能会删除所有这些。如果它们被删除，为什么它们仍显示在“摘要”和“我的视图”下？无论如何，有什么方法可以让所有报告再次开始显示在“查看问题”中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T05:45:51.213

我发现您只需要选择“重置过滤器”，因为过滤器以某种方式打开。

# perl - Perl - 为什么我得到“错误：括号中的参数不正确”？

> ID：14617415
> 
> 赞同：0
> 
> 时间：2013-01-31T02:21:23.083
> 
> 标签：perl, variables, arguments, package

基本上，我试图只使用变量/标量来调用包函数，但我无法弄清楚为什么我会得到“错误：括号中的参数不正确”。

这是示例下午：

```
package foo;

sub bar {

    my $request = @_[0];

    if ($request eq 'fubar') {

        my $response = 'definitely';
        return $response;

    else {

        my $response = 'definitely not';
        return $response;

    }

}

1; 
```

和样品pl

```
use strict;
use lib "/blah/blah/custom_modules";
use sample;

my $package = 'foo';
my $package_sub = 'bar';
my $package_sub_args = 'fubar';     
my $response = $package->$package_sub("$package_args");
print "$response\n"; 
```

然后我得到错误。

但是，使用以下任何变体都可以：

```
my $response = foo::bar('fubar');
my $response = foo::bar($package_sub_args); 
```

但我相信我不能在上面的 OO 符号类型中使用变量，必须使用 -> 符号。

无论如何，非常感谢帮助。

澄清 - 我遇到的问题是直到运行时才知道包、子或参数。当子不需要参数时，我可以使它工作。但是我有几个确实需要参数的潜艇，这就是我绊倒的地方......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T02:34:25.520

我假设您这样做是因为在运行时之前您不知道包名称或子例程名称。Perl Cookbook 的旧版本有这个使用符号引用的配方：

```
{
    no strict 'refs';
    $val  = ${ $packname . "::" . $varname }; # Scalar
    @vals = @{ $packname . "::" . $aryname }; # Array
    &{ $packname . "::" . $funcname }("args"); # Function Call 1
    ($packname . "::" . $funcname) -> ("args"); # Function Call 2
} 
```

在此示例中，该`no strict 'refs'`行用于阻止强加的符号引用限制`use strict;`（假设您正在使用它......并且您应该使用它）。然后，显示了访问标量、数组和两个子例程的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T03:15:56.467

这更简单：

```
my $package_sub_ref = \&{ $package . '::' . $package_sub };
my $response = $package_sub_ref->($package_sub_arg); 
```

工作严格。

# java - Android ListActivity 致命异常

> ID：14617419
> 
> 赞同：-1
> 
> 时间：2013-01-31T02:21:34.940
> 
> 标签：java, android, listview, exception, listactivity

每当我尝试开始此活动时，我都会收到此错误：

```
01-31 02:19:19.558: E/AndroidRuntime(1318): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.prva/com.example.prva.ListView}: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list' 
```

列表活动：

```
package com.example.prva;

import android.app.ListActivity;
import android.database.Cursor;
import android.os.Bundle;
import android.support.v4.widget.SimpleCursorAdapter;

public class ListView extends ListActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.listview);
        fillData();
        }

    private void fillData() {
        // Get all of the notes from the database and create the item list
        Cursor c = DatabaseManager.getAllData();
        startManagingCursor(c);

        String[] from = new String[] { DatabaseManager.TABLE_COLUMN_ONE };
        int[] to = new int[] { R.id.text1 };

        // Now create an array adapter and set it to display using our row
        SimpleCursorAdapter notes =
            new SimpleCursorAdapter(this, R.layout.notes_row, c, from, to);
        setListAdapter(notes);
    }
    } 
```

我的列表视图 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ListView
        android:id="@+id/list"
        android:layout_width="match_parent"
        android:layout_height="326dp" >
    </ListView>

</LinearLayout> 
```

我不明白这一点，因为我有一个列表视图，其中 id 是列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T02:25:16.973

您必须使用名称`android.R.id.list`下的默认值`@android:id`。`@+id`使用 name创建您*自己的*ID `list`。

所以，而不是：

```
android:id="@+id/list" 
```

使用以下内容：

```
android:id="@android:id/list" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T02:26:32.047

将您的 ListView id 更改`@android:id/list`为此将解决您的问题..List Activity 应该具有带有 `@android:id/list`..我希望这对您有所帮助

# asp.net-mvc - 在 ASP.net MVC 中将记录添加并保存到 DbContext 时出现 DbUpdateException

> ID：14617420
> 
> 赞同：1
> 
> 时间：2013-01-31T02:21:41.417
> 
> 标签：asp.net-mvc, entity-framework, dbcontext

我正在尝试将购物车记录添加到 DbConext 类型的类 ProjectConext 中。问题是，当我添加记录并尝试保存它时，我收到 CustomerID 字段不能为空（它不能）的错误，即使据我所见，我正在插入一个非空值为了它。这是我的模型代码：

```
 public class ShoppingCart
{
    ProjectContext _db = new ProjectContext();

    public void AddToCart(Video toAdd, Customer CurUser)
    {
        var CartItem = new Cart
        {
            CustomerID = CurUser.CustomerID,
            Item = toAdd.Title,
            Count = 1,
            Price = 1.00
        };
        _db.Carts.Add(CartItem);
        _db.SaveChanges();
    }
} 
```

我在 Add() 之后的行处插入了一个断点，我可以看到 CartItem 已填充所有字段，并且 _db.Cart 应该是 MVCProject.Model.Cart 。如果有人知道为什么没有正确添加记录，我们将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:13:58.013

我找到了答案，问题是因为 CustomerID 是 Cart 表中的一个标识列，它试图自动插入一个删除现有值的值。添加代码：`DatabaseGenerated(DatabaseGeneratedOption.None)`

如在

```
 public class Cart
{
    [Key, Required, DatabaseGenerated(DatabaseGeneratedOption.None)]
    public int CustomerID { get; set; }
    public string Item { get; set; }
    public int Count { get; set; }
    public double Price { get; set; }
} 
```

解决了这个问题。

# iphone - XCode 4.6：iOS 6.1 - 验证时出现 CFBundleVersion 和 CFBundleShortVersionString 错误

> ID：14617423
> 
> 赞同：3
> 
> 时间：2013-01-31T02:21:57.350
> 
> 标签：iphone, xcode, ios6, xcode4.6, ios6.1

![在此处输入图像描述](../Images/082df09781c5b02f57407ef7d260b35c.png)

我已经用所有不同的变体 1.2、1.201、2、1.2.1 等更改了“捆绑版本”和“捆绑版本字符串，短”值似乎一百次。此外，我已经更改了目标 > 摘要选项卡中的版本号。

在验证存档或尝试通过旧的应用程序加载器上传时，是否有人遇到过这个问题？对于“CFBundleVersion”，我也遇到了同样的错误。该应用程序的最后一次更新是 v1.13，所以我不确定为什么 1.2 会出现问题。这是 XCode 4.6 的错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T17:50:48.503

问题解决了，多亏了用户的评论和一些，好吧，问题解决了......

当我下载 XCode 4.6 时，我使用 SmartSVN/VisualSVN 来管理版本控制。当我将 SmartSVN 更新到最新版本时，我得到一个对话框说 XCode 不支持 SVN 版本（这是最新版本），所以我想在我更改 .plist 中的捆绑版本后提交。Blammo...捆绑验证并提交！

这是我学到的真正起到作用的东西。XCode 4.6 必须有新的版本控制要求，因为我第一次尝试时捆绑版本仍设置为 1.0。我已经提交了 1.0、1.1、1.12 和 1.13 版本……所以 XCode 一定只是在 TARGETS > Summary 选项卡中检查版本。那些总是设置为适当的版本。

关键是我不知道 XCode 看到 1.2 < 1.13。一旦我将 .plist 中的值和 TARGETS > Summary 选项卡中的值更改为“1.20”，捆绑包就成功验证为 1.20 > 1.2 和 1.20 > 1.13...感谢您的光辉。

注意：如果您使用的是版本控制器，如果您收到关于不支持 SVN 版本的 XCode 警报，请确保在构建之前提交。

# html - 如何以正确的方式旋转-90 单元格？

> ID：14617428
> 
> 赞同：0
> 
> 时间：2013-01-31T02:22:25.663
> 
> 标签：html, asp.net, css

我正在尝试旋转文本（从单元格旋转到标题列-90 度）。我正在使用以下代码：[CSS 旋转文本 - 复杂](https://stackoverflow.com/questions/6995645/css-rotate-text-complicated)

这是结果：

![在此处输入图像描述](../Images/6ca91a1410fe912f09d87c57eac58158.png) [http://contoso2.azurewebsites.net/Scores/ListScores](http://contoso2.azurewebsites.net/Scores/ListScores)

如您所见，当我旋转时不会重新调整，而且我希望所有文本都应该在同一行中，（EXAMENES CON FORMATO 1 应该只是一行，而不是两行）而且它有点超出我的边距猜测。

以正确的方式生产我缺少什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T02:31:21.763

要解决包装问题，请使用`white-space:nowrap`

要获得元素“调整大小”的旋转文本，请使用`writing-mode:tb-lr`- 这将导致文本从上到下阅读，因此可以选择添加`transform:rotate(180deg)`以使其从下到上。

# google-apps-script - 从 PHP 中的 HTML 模板谷歌应用脚 本中提取结果

> ID：14617431
> 
> 赞同：0
> 
> 时间：2013-01-31T02:22:37.550
> 
> 标签：google-apps-script, embed

我在 Google Apps 中制作了一个小脚本。使用

```
 function doGet (e) {
    return HtmlService.createTemplateFromFile('Agenda').evaluate();
    } 
```

使用创建带有几个 for 循环的表的模板。使用 URL 时，表格显示良好。

这是结果： [https ://script.google.com/macros/s/AKfycbzllGcNnzy6HkQwiL9TfZJdkNS9hqyEvT4NuoR2FuXwlBfdxGY/exec](https://script.google.com/macros/s/AKfycbzllGcNnzy6HkQwiL9TfZJdkNS9hqyEvT4NuoR2FuXwlBfdxGY/exec)

（无论如何它是公开的）。

我想使用这个简单的 HTML 表格并在 Wordpress 站点中使用它，并在外部对其进行样式设置。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:31:57.037

使用 JSONP 可能会对您有所帮助。

尝试创建一个 JSON 对象来保存你的表格，就像 HTML 一样`{myTable: "htmlCodeForTheTable"}`，然后使用 GAS HtmlService 将其作为 JSONP 提供。这样做，您将能够使用 javascript 在您的页面 DOM 中插入表格 HTML 代码。然后表格将根据站点的 CSS 设置样式。

请在以下位置找到[Cesar Anton](https://plus.google.com/105228553334612207418/posts)的一个简单但有效的示例：https: [//plus.google.com/105228553334612207418/posts/GefPWdx88F8](https://plus.google.com/105228553334612207418/posts/GefPWdx88F8)

# wcf - 支持 XSD 限制的 WCF 服务？

> ID：14617432
> 
> 赞同：1
> 
> 时间：2013-01-31T02:22:47.823
> 
> 标签：wcf, iis, xsd, xmlserializer, contract-first

过去一天，我一直在努力寻找一种方法来生成 WCF 服务，该服务实际上维护了原始 XSD 中定义的限制。基本问题是，如果我使用包含限制（例如模式）的 XSD 构建合同优先服务，则限制会从部署服务时输出的 WSDL/XSD 中删除。

这是其他人抱怨同样的问题： http: [//geekswithblogs.net/wojan/archive/2010/12/10/143086.aspx](http://geekswithblogs.net/wojan/archive/2010/12/10/143086.aspx)

我只剩下我认为的 2 个选项：

*   我可以替换 Web 服务器（IIS 或 IIS Express）上生成的服务 WSDL/XSD
*   我可以用另一个正确支持 XSD 限制的第 3 方序列化程序替换默认 XML 序列化程序吗？

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T21:25:44.833

[您可以按照这篇非常好的博客文章所做的](http://weblogs.thinktecture.com/cweyer/2007/05/improving-wcf-interoperability-flattening-your-wsdl.html)操作来替换内置的 WCF 生成的 WSDL 。该帖子显示了如何覆盖默认的 WCF 行为，即为 XSD 生成包含引用，而不是创建单个“平面”WSDL 文档。

我看到的问题是您需要一种方法来传达此过程的其他 XSD 限制。很高兴您知道您还需要替换内置的 XML 序列化程序以在肥皂反序列化过程中获得严格的 XSD 合规性，因为这是实现您想要的唯一方法。考虑到您需要对 WCF 进行的所有深度自定义，您实际上可能想要考虑滚动您自己的自定义 SOAP 堆栈。我不知道有任何其他 .NET 框架（Microsoft 或第 3 方）这样做。

# grails - 从下拉 grails 中获取选定值的值

> ID：14617439
> 
> 赞同：0
> 
> 时间：2013-01-31T02:23:41.550
> 
> 标签：grails

我有`g:select`这样的：

```
<g:select from="["A1 Negative(A1 -ve)","A1 Positive(A1 +ve)"]" noSelection ="${['null':'Please choose . . . ']}" name = "bloodGroups"
                            value="${donorDetailsInstance?.bloodGroups}" /> 
```

这是在一个表单中，当我尝试单击按钮并查找我得到的用户选择的值时`null`。

我正在尝试使用以下方法获取所选值：

```
params.bloodGroups 
```

在我的控制器中，但它总是返回`null`。

我在哪里犯错误？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T04:27:37.830

您没有将对象传递给 from

```
<g:select from="${["A1 Negative(A1 -ve)","A1 Positive(A1 +ve)"]}" noSelection="${['null':'Please choose . . . ']}" name="bloodGroups" value="${donorDetailsInstance?.bloodGroups}" /> 
```

# android - 需要 Button 声音来播放一个 Touch 不释放和 null android 默认声音

> ID：14617441
> 
> 赞同：0
> 
> 时间：2013-01-31T02:23:54.450
> 
> 标签：android, performance, android-widget

1）这是我的主要活动：

```
 package com.art.drumdrum;

import android.app.Activity;
import android.media.AudioManager;
import android.media.SoundPool;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

 public class MainActivity extends Activity {
SoundPool soundPool = null;
int kickId = 0;
int snareId = 0;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Button kick = (Button) findViewById(R.id.kick);
    Button snare = (Button) findViewById(R.id.snare);
    kick.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            if (kickId != 0)
                soundPool.play(kickId, 1, 1, 0, 0, 1);

        }
    });
    snare.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            if (snareId != 0)
                soundPool.play(snareId, 1, 1, 0, 0, 1);

        }
    });

}

protected void onResume() {
    super.onResume();
    if (soundPool == null) {
        soundPool = new SoundPool(5, AudioManager.STREAM_MUSIC, 0);
        kickId = soundPool.load(this, R.raw.kick, 1);
        snareId = soundPool.load(this, R.raw.snare, 1);
    }
}

protected void onPause() {
    super.onPause();
    if (soundPool != null) {
        soundPool.release();
        soundPool = null;
    }
}

} 
```

2）这是我的 xml 清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.art.drumdrum"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="10"
    android:targetSdkVersion="17" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.art.drumdrum.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

</application>

</manifest> 
```

3）这是我的主要 xml 布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="#000000"
tools:context=".MainActivity" >

<Button
    android:id="@+id/button2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/button3"
    android:layout_below="@+id/button9"
    android:layout_marginLeft="20dp"
    android:text="@string/button" />

<Button
    android:id="@+id/button5"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/button2"
    android:layout_marginTop="86dp"
    android:layout_toLeftOf="@+id/button3"
    android:text="@string/button" />

<Button
    android:id="@+id/kick"
    style="@style/style"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:text="@string/kick" />

<Button
    android:id="@+id/snare"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/button1"
    android:layout_marginTop="17dp"
    android:layout_toRightOf="@+id/kick"
    android:text="@string/snare" />

<Button
    android:id="@+id/button9"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/button3"
    android:layout_below="@+id/snare"
    android:text="@string/button" />

<Button
    android:id="@+id/button7"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/button5"
    android:layout_below="@+id/button2"
    android:layout_marginLeft="24dp"
    android:text="@string/button" />

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/snare"
    android:layout_alignParentTop="true"
    android:layout_marginTop="29dp"
    android:text="@string/button" />

<Button
    android:id="@+id/button3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/button5"
    android:layout_alignBottom="@+id/button5"
    android:layout_marginLeft="33dp"
    android:layout_toRightOf="@+id/snare"
    android:text="@string/button" />

<Button
    android:id="@+id/button4"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/button1"
    android:layout_alignBottom="@+id/button1"
    android:layout_alignLeft="@+id/button2"
    android:text="@string/button" />

</RelativeLayout> 
```

4）代码正在运行，但声音是在释放按钮时发出的，我希望它在您触摸它时立即启动......？有任何想法吗？还需要取出默认的安卓点击声音，这样我就可以让它只是我的声音。谢谢你签到

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T02:32:58.527

使用`.setOnTouchListener()`代替`.setOnClickListener()`

例子

```
button.setOnClickListener(new OnClickListener(){
    onTouch(View v, MotionEvent event){
        if (event.getAction()==MotionEvent.ACTION_DOWN){
            //Play the sound here
        }
    }
}
); 
```

这样，只有当事件是向下事件时才会播放声音。

# javascript - 使用 Firebug 将外部 javascript 文件的位置更改为 HTML 文件的较低位置

> ID：14617442
> 
> 赞同：0
> 
> 时间：2013-01-31T02:24:10.893
> 
> 标签：javascript, html, firebug

我正在尝试查找是否可以使用 Firebug 将 js 文件从其当前位置移动到 html 文件中更下方的位置。下面是我想做的一个通用示例。

```
<html>
<head>
<script src="external file.js"></script>
</head>
<body>
</body>
</html>

<html>
<head>
</head>
<body>
<script src="external file.js"></script>
</body>
</html> 
```

那么有没有办法使用 Firebug 将 javascript 文件从头部移动到正文？

感谢所有的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T02:34:26.483

当 Firebug 出现时，脚本已经被浏览器的引擎解析和执行了。Firebug 并不是为了这个目的。

实现您想要的另一种方法是安装[Fiddler2](http://www.fiddler2.com/fiddler2/)，它允许您在请求中设置断点（在本例中为 html 请求添加断点），然后编辑响应（从服务器发送的 html）。这发生在浏览器接收到页面之前。

# python - 开始使用 Django 时遇到问题 - ImportError: No module named management

> ID：14617447
> 
> 赞同：0
> 
> 时间：2013-01-31T02:24:58.610
> 
> 标签：python, django, windows, heroku, virtualenv

首先，我已经阅读了所有我能找到的标题相似的主题。这肯定是转贴，但我看过并没有找到。

其次，这是我的设置和我所做的。我在`Windows 7`。我正在关注以下网址的入门指南`Heroku`：[https](https://devcenter.heroku.com/articles/django) ://devcenter.heroku.com/articles/django 。我使用了他们提供的安装指南`Python`，`virtualenv`,`distribute`和`pip`( [http://docs.python-guide.org/en/latest/starting/install/win/](http://docs.python-guide.org/en/latest/starting/install/win/) )。我`Python 2.7`使用 Windows 安装程序安装了 ，但没有其他版本。然后，我`Heroku`完全按照指南中列出的步骤进行操作。我不得不使用替代方法进行安装`psycopg2`，但它似乎工作正常。

问题出现了，然后我到了我应该运行的步骤

```
django-admin.py startproject hellodjango . 
```

当我尝试运行命令时出现此错误：

```
(venv) C:\Users\myname\projectdir>django-admin.py startproject hellodjango .
Traceback (most recent call last):
  File "C:\Users\myname\projectdir\venv\Scripts\django-admin.py", line 2, in <module>
    from django.core import management
ImportError: No module named django.core 
```

我尝试在虚拟环境中手动运行 Python 并导入 django、django.core 和错误文本中指定的行，并且一切正常：

```
(venv) C:\Users\myname\projectdir>python
Python 2.7.3 (default, Apr 10 2012, 23:31:26) [MSC v.1500 32 bit (Intel)] on win
32
Type "help", "copyright", "credits" or "license" for more information.
>>> import django
>>> from django import core
>>> import django.core
>>> from django.core import management
>>> 
```

我尝试使用 pip 卸载所有内容，删除虚拟环境，删除项目文件夹，然后重新开始。发生了同样的错误。

这可能很简单，但我无法弄清楚我错过了什么。有任何想法吗？

编辑 - 另外，我尝试将命令更改为：

```
django-admin.py startproject projectdir . 
```

但这有相同的结果。

然后我尝试了：

```
python C:\Users\myname\projectdir\venv\Lib\site-packages\django\bindjango-admin.py startproject projectdir . 
```

但我得到了：

```
python: can't open file 'C:\Users\wtodom\hdj\venv\Lib\site-packages\django\bindj
ango-admin.py': [Errno 2] No such file or directory 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-05T10:05:50.157

（在问题编辑和评论中回答。转换为社区 wiki 答案。请参阅[没有答案的问题，但问题在评论中解决（或在聊天中扩展）](https://meta.stackoverflow.com/questions/251597/question-with-no-answers-but-issue-solved-in-the-comments)）

OP写道：

> 我输入了错误的路径（遗漏了一个`\`），但现在它可以工作了。如何避免`django-admin.py`每次都输入文件的整个文件路径？

@DanHoerst 写道：

> 查看此答案以了解如何在 Windows 上添加内容`PYTHONPATH`：[如何在 Windows 7 中添加到 pythonpath？](https://stackoverflow.com/questions/3701646/how-to-add-to-the-pythonpath-in-windows-7). 由于您可以`import django`从 shell 中进行操作，因此您的 app 文件夹中似乎至少有 django，`C:\Users\myname\projectdir`否则您会收到错误消息。如果从 venv 中的不同文件夹打开 shell，可以导入 django 吗？

OP写道：

> 添加到`PYTHONPATH`看起来它会起作用，但我还没有完成。就导入而言，我可以从 venv 中的其他文件夹导入。（我从项目根目录尝试过，然后我从不属于 Django 路径的子文件夹中尝试过。）

# java - 衡量服务性能的多线程程序

> ID：14617448
> 
> 赞同：0
> 
> 时间：2013-01-31T02:25:02.030
> 
> 标签：java, multithreading

我正在衡量我们服务的绩效。所以我有一个 URL 可以调用我们的服务。所以我所做的是，在调用服务之前，我记下时间，在服务返回响应后，我测量响应时间。我编写了一个程序来调用我的服务并通过将数字放入 HashMap 来测量性能-

```
 while (runs > 0) {

        long start_time = System.currentTimeMillis();
        result = restTemplate.getForObject("Some URL", String.class);
        long difference = (System.currentTimeMillis() - start_time);

        Long count = histogram.get(difference);
        if (count != null) {
            count++;
            histogram.put(Long.valueOf(difference), count);
        } else {
            histogram.put(Long.valueOf(difference), Long.valueOf(1L));
        }
        runs--;
    } 
```

所以我将从直方图中得到的输出将是 -`X number of calls came back in Y ms`

现在我在想什么，而不是一次进行一个调用，为什么不应该并行化对我们服务的调用，就像在我之前的程序中一样，我正在逐个访问服务。所以我在下面编写了一个多线程程序，它将同时调用我的服务。那么下面的程序是否能够准确地测量时差？

**就像一个线程花费这么多时间，第二个线程花费这么多时间，第三个线程花费这么多时间等等？是否有可能做到这一点？**

如果是的话，如果我的下面的程序不能很好地工作，谁能告诉我该怎么做？

```
public static void main(String[] args) {

    ExecutorService service = Executors.newFixedThreadPool(10);

    for (int i = 0; i < 1 * 2; i++) {
        service.submit(new ThreadTask(i));
    }
    service.shutdown();
    try {
        service.awaitTermination(Long.MAX_VALUE, TimeUnit.DAYS);
    } catch (InterruptedException e) {

    }
}

class ThreadTask implements Runnable {
    private int id;
    private RestTemplate restTemplate = new RestTemplate();
    private String result;
    private HashMap<Long, Long> histogram;

    public ThreadTask(int id) {
        this.id = id;
    }

    @Override
    public void run() {

        long start_time = System.currentTimeMillis();

        result = restTemplate.getForObject("Some URL",String.class);
        long difference = (System.currentTimeMillis() - start_time);

        Long count = histogram.get(difference);
        if (count != null) {
            count++;
            histogram.put(Long.valueOf(difference), count);
        } else {
            histogram.put(Long.valueOf(difference), Long.valueOf(1L));
        }

        System.out.println(histogram);
    }
} 
```

因为每当我运行程序时，我从这个多线程程序中得到的数字看起来很奇怪。

**我从非多线程程序得到的输出**

```
168=1
41=1
43=3 
```

`1 call came back in 168 ms`等等...

**我从多线程程序得到的输出**

```
{119=1}
{179=1}
{150=1}
{202=1}
{149=1} 
```

`1 call came back in 119 ms`等等......所以在多线程程序中，我猜它需要更多时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T02:36:32.677

我不明白你得到奇怪的数字是什么意思。我的疯狂猜测是，这是因为来自不同线程的输出被穿插了。

解决它的一种方法是根本不打印`histogram`from 该`run`方法。它已经是一个实例变量（尽管目前不需要），因此您可以：

1.  而不是提交未命名的实例，`ThreadTask`将它们存储在列表/数组中。

2.  创建一个`ThreadTask.report`打印的方法`histogram`

3.  在所有线程都完成后，*依次*`ThreadTask.report`调用每个线程。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-05T22:32:00.513

我认为您多次计算同一时间。如果您的线程未在同步块中执行这部分代码：

```
long start_time = System.currentTimeMillis();

result = restTemplate.getForObject("Some URL",String.class);
long difference = (System.currentTimeMillis() - start_time); 
```

那么有可能发生这种情况：

1.  Thread1: 长 start_time ...
2.  线程1：结果= ...
3.  Thread2: 长 start_time ...
4.  线程2：结果= ...
5.  Thread2：长差...
6.  Thread1：长差...

因此，您的会计将无法正常工作。您可以使用同步块或查看 Java 的[`java.lang.management`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/management/package-summary.html)（例如`ThreadMXBean`和`ThreadInfo`），以获得线程环境中的计时功能。

**更新：**

[另请参阅此相关 SO 问题](https://stackoverflow.com/questions/19800573/timing-a-remote-call-in-a-multithreaded-java-program)的答案，以获取有关该问题以及如何解决该问题的更多详细信息。*

# iphone - RedPark TTL 电缆 ReadBytesData - 无法获取任何数据

> ID：14617449
> 
> 赞同：0
> 
> 时间：2013-01-31T02:25:03.700
> 
> 标签：iphone, objective-c, serial-port

我有两个 UILabel，信息和接收。接收应该告诉我我实际上正在接收数据。但是，当它确实表明......我的信息 UILabel 没有相应地更新。它有时有效，有时无效..

那是怎么回事？

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
        [super viewDidLoad];

        receiving = [[UILabel alloc] initWithFrame: CGRectMake(30,50,255,100)];
        info = [[UILabel alloc] initWithFrame: CGRectMake(30,200,255,100)];

        info.backgroundColor = [UIColor orangeColor];
        receiving.backgroundColor = [UIColor orangeColor];
//        [self.view addSubview: toggleSwitch];

        receiving.text = @"Not Receiving...";

        [self.view addSubview: info];
        [self.view addSubview: receiving];
    }
    return self;
}

- (void) startCommThread:(id)object
{

//    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

    // initialize RscMgr on this thread
    // so it schedules delegate callbacks for this thread

    rcsMgr = [[RscMgr alloc] init];
    [rcsMgr setDelegate:self];

    // run the run loop
    [[NSRunLoop currentRunLoop] run];

//    [pool release];
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    // Create and start the comm thread.  We'll use this thread to manage the rscMgr so
    // we don't tie up the UI thread.
    if (commThread == nil)
    {
        commThread = [[NSThread alloc] initWithTarget:self
                                             selector:@selector(startCommThread:)
                                               object:nil];
        [commThread start];  // Actually create the thread
    }
}

- (void) readBytesAvailable:(UInt32)numBytes {

    receiving.text = @"Receiving...";
    NSString* str = [rcsMgr getStringFromBytesAvailable];
    if ( str ) receiving.text = @"I GOT SOMETHING!";
//    if ( numBytes ) receiving.text = numBytes;
    else receiving.text = @"Still Receiving...";
    info.text = str;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T21:08:56.180

这是我最好的答案，但需要注意的是我从未使用过 RedPark 的电缆或 SDK。我的预感是`-readBytesAvailable:`RscMgr 在用于设置它的同一后台线程上调用它。您不能在后台线程上使用 UIKit 对象。您需要将工作转移回主线程/队列，如下所示：

```
- (void)readBytesAvailable:(UInt32)numBytes 
{
    NSString* str = [rcsMgr getStringFromBytesAvailable];
    dispatch_async(dispatch_get_main_queue(), ^{
        if (str) {
            receiving.text = @"I GOT SOMETHING!";
        } else { 
            receiving.text = @"Still Receiving...";
        }
        info.text = str;
    });
} 
```

此外，您的 commThread 上应该有一个自动释放池。你为什么把它评论出来？

# oauth - 在 ServiceStack 客户端中使用 OAuth

> ID：14617450
> 
> 赞同：8
> 
> 时间：2013-01-31T02:25:15.573
> 
> 标签：oauth, servicestack

我很困惑尝试在客户端上使用 OAuth (facebook/twitter)，然后使用 ServiceStack 进行身份验证。我看到的所有在客户端进行身份验证的示例都使用基本身份验证，如下所示：

```
var response = _client.Send<AuthResponse>(new Auth
{
    provider = CredentialsAuthProvider.Name,
    UserName = model.Username,
    Password = model.Password,
    RememberMe = true
}); 
```

我需要做什么来使用 facebook 验证我的独立客户端？我调用 FB 并获取 UID、访问令牌、电子邮件等。然后调用服务堆栈进行身份验证是什么？

目前我的想法是在客户端使用 FB 进行身份验证，调用服务以检查用户是否存在（查看电子邮件地址）。如果他们没有注册并使用他们的一些数据的哈希作为密码登录。如果它们存在，请以相同的方式记录它们。这是合理/最佳做法吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T16:08:36.807

**我需要做什么来使用 facebook 验证我的独立客户端？那么对服务堆栈进行身份验证的调用是什么？**

您可以使用 FacebookAuthProvider ( [https://github.com/ServiceStack/ServiceStack/wiki/Authentication-and-authorization](https://github.com/ServiceStack/ServiceStack/wiki/Authentication-and-authorization) ) 处理对 ServiceStack 和 Facebook 的身份验证。将请求** 发布到“/auth/facebook”（ServiceStack 提供的端点）将针对 ServiceStack 和 Facebook 进行身份验证。在 ServiceStack 中，您可以使用`UserSession.GetOAuthTokens("facebook")`. 我认为您可以与您的客户共享这些令牌，或者让您的客户通过您的 ServiceStack 端点（您创建）来访问 Facebook。类似于 TwitterGateway ( [https://github.com/ServiceStack/SocialBootstrapApi/blob/master/src/SocialBootstrapApi/Logic/TwitterGateway.cs](https://github.com/ServiceStack/SocialBootstrapApi/blob/master/src/SocialBootstrapApi/Logic/TwitterGateway.cs) ) 在 SocialBootStrapApi 示例中的工作方式。

**`{"UserName":"yourname", "Password":"yourpassword", "RememberMe":true/false}`

# ios - 如何将文本字段添加到警报视图？Xcode 4.5 iOS6

> ID：14617455
> 
> 赞同：1
> 
> 时间：2013-01-31T02:26:05.247
> 
> 标签：ios, xcode, alertview

如何将文本字段添加到警报视图？我正在尝试做一个应用程序，在应用程序提交编辑之前，用户必须通过在所述警报视图上输入他/她的密码来进行第一次身份验证，但我该怎么做呢？我搜索的代码似乎不再起作用了。这里是：

```
 UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Log In" message:@"Please enter your Password" delegate:self cancelButtonTitle:@"Log In" otherButtonTitles:@"Cancel", nil];
    [alert addTextFieldWithValue:@"" label:@"Password"];
    UITextField *tf = [alert textFieldAtIndex:0];
    tf.clearButtonMode = UITextFieldViewModeWhileEditing;
    tf.keyboardType = UIKeyboardTypeAlphabet;
    tf.keyboardAppearance = UIKeyboardAppearanceAlert;
    tf.autocapitalizationType = UITextAutocapitalizationTypeWords;
    tf.autocapitalizationType = UITextAutocorrectionTypeNo; 
```

错误说

```
 "No visible @interface for 'UIAlertView' 
 declares the selector 'addTextFieldWithValue:label:'" 
 on the [alert addTextFieldWithValue:@"" label:@"Password"]; 
```

我还想问一下如何将代码放在警报视图的确认按钮上。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-31T02:32:58.153

```
alert.alertViewStyle = UIAlertViewStylePlainTextInput; 
```

或者如果您需要它是安全的（用于密码）

```
alert.alertViewStyle = UIAlertViewStyleSecureTextInput; 
```

编辑：

我不是 100% 确定您所说的“将代码放在确认按钮上”是什么意思，但如果您想知道他们是按确认还是取消，您只需要实施

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {
    //check the button index and do something if it's the right one.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-08T11:56:51.857

将 textField 添加到警报视图（Swift）中：

```
 let pincodeAlert:UIAlertController = UIAlertController(title: "Hello", message: "Enter a new passcode", preferredStyle: UIAlertControllerStyle.Alert)
           pincodeAlert.addTextFieldWithConfigurationHandler({ (pinCodeTextField:UITextField!) -> Void in
            pinCodeTextField.placeholder = "password"
            pinCodeTextField.secureTextEntry = true
           })
    //Add the textField       
    pincodeAlert.addTextFieldWithConfigurationHandler({ (pinCodeTextField2:UITextField!) -> Void in
            pinCodeTextField2.placeholder = "Confirm password"
            pinCodeTextField2.secureTextEntry = true
           })

    pincodeAlert.addAction(UIAlertAction(title: "OK", style: UIAlertActionStyle.Default, handler: { (action) -> Void in
                //check entered passcodes
                }))
                pincodeAlert.addAction(UIAlertAction(title: "Cancel", style: UIAlertActionStyle.Cancel, handler: nil))
                presentViewController(pincodeAlert, animated: true, completion: nil) 
```

要检查复选框中的数据，只需将其添加到您的“OK”操作处理程序中：

```
let passcodeEntered:String = (pincodeAlert.textFields?.first as UITextField).text 
```

# mysql - 大于运算符不在查询中工作

> ID：14617457
> 
> 赞同：0
> 
> 时间：2013-01-31T02:26:40.153
> 
> 标签：mysql, sql, operator-keyword

谁能建议为什么在这个 MySQL 查询中忽略大于运算符？

```
$sql = "SELECT *
FROM `items`
WHERE `short_description` LIKE '%".$term."%'
    OR `description` LIKE '%".$term."%'
    AND `quantity` > 0
ORDER BY year DESC, denomination ASC, description ASC $max"; 
```

我在同一个网站上有一个类似的查询

```
$sql = "SELECT *
FROM `items`
WHERE `category` = '".$cat_id."'
    AND `quantity` > 0
ORDER BY year DESC, denomination ASC, description ASC;"; 
```

一切都很好，除了第一次查询的数量比较，它让我很难过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T02:30:50.920

尝试

```
$sql = "SELECT *
FROM `items`
WHERE (`short_description` LIKE '%".$term."%'
    OR `description` LIKE '%".$term."%')
    AND `quantity` > 0
ORDER BY year DESC, denomination ASC, description ASC $max"; 
```

我认为你的`OR`陈述是问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T02:30:12.257

```
"SELECT * FROM items WHERE (short_description LIKE '%".$term."%' OR description LIKE 
'%".$term."%') 
AND quantity > 0 
ORDER BY year DESC, denomination ASC, description ASC $max"; 
```

试试看……你有一个或条件和一个和。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T02:33:27.147

它没有被忽视，只是你误解了它是如何应用的。表达方式：

```
WHERE `short_description` LIKE '%".$term."%' (call this XX,)
OR `description` LIKE '%".$term."%'          (          YY,)
AND `quantity` > 0                           (      and ZZ.) 
```

被解释为：

```
where XX or (YY and ZZ) 
```

而您可能想要的是：

```
where (XX or YY) and ZZ 
```

因此，您必须按如下方式覆盖默认解释：

```
WHERE (`short_description` LIKE '%".$term."%' OR
       `description` LIKE '%".$term."%')
  AND `quantity` > 0 
```

您的第二个查询没有这个问题的原因是因为您没有混合`AND`和`OR`.

* * *

此外，虽然与您的*具体*问题无关），但您应该*非常*警惕`like`诸如`like '%something%'`. 它们是体面大小的表的真正性能杀手，并且有一些方法可以显着提高性能。

在这种情况下，如果您的桌子很小，这可能并不重要，但请记住这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T02:28:50.423

您应该通过将它们括在括号中来对您的`OR`和条件进行分组，`AND`

```
$sql = "SELECT * FROM `items` 
         WHERE  (`short_description` LIKE '%".$term."%' OR 
                 `description` LIKE '%".$term."%')  AND 
                  `quantity` > 0 
          ORDER BY year DESC, denomination ASC, description ASC $max"; 
```

*后续问题：是`$max`包含`LIMIT`子句的变量吗？*

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果变量的值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

# ruby-on-rails-3 - 'ruby' 在捆绑器输出中是什么意思，如下所示：“在这台机器上可用的 gem 中找不到 gem 'gem_name (= 1.1.0) ruby '。”？

> ID：14617464
> 
> 赞同：1
> 
> 时间：2013-01-31T02:27:45.353
> 
> 标签：ruby-on-rails-3, rubygems, gem, bundler

因此，当 gem info 出现时，`gem list`输出如下：

```
gem_name (1.1.0 ruby) 
```

或在标题中的捆绑消息中：

> 在这台机器上可用的 gem 中找不到 gem 'gem_name (= 1.1.0) ruby​​'。

`ruby`版本后面的词是什么*意思*？

我也见过`x86`，`x86-mingw32`.. 这让我相信它表示 gem 的特定平台版本。

但我也见过`runtime`，所以不确定这如何符合这个理论，而且`ruby`它本身似乎并没有指定一个平台。

我目前正在使用 Linux 环境，我在其上构建并安装了一个自定义/私有 gem，它显示在`gem list --local`输出中：

```
gem_name (1.1.0) 
```

但我仍然得到捆绑器输出：

> 在这台机器上可用的 gem 中找不到 gem 'gem_name (= 1.1.0) **ruby**​​ '。

# javascript - 如何获取刚刚放置在此 USED 上的可拖动对象要放入的 div 的 ID？

> ID：14617466
> 
> 赞同：0
> 
> 时间：2013-01-31T02:27:52.157
> 
> 标签：javascript, jquery, jquery-ui, droppable

我需要这样的东西：

```
$('#dropZOne').droppable({
  drop: function(ui,event) 
        {
          $($(ui).getPreviousDropZone()).droppable('options',{disabled:false});
        }
}); 
```

我希望我的假方法足以说明我的需要！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T02:43:59.713

您可以记录拖动开始时或页面加载时的位置吗？很难说提供了什么，但这是我的建议。

IE - 页面加载...存储该项目所在的可放置项目（如果它在一个中）在每次放置时，检索“来自”信息，然后记录新的来自位置以进行下一次拖动，如果这是你想要的方式它工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T03:24:09.687

哥们，好像你用的是jquery的拖拽插件，如果你想得到拖拽的id，那么你可以使用参数：ui，就像你的假代码一样。如果你想获得 drop 的 id，绝对可以在代码中使用 $(this)。它是放置元素。

# c# - 如果将 HH:MM:SS 显示为 HH:MM，最好截断秒数或四舍五入到最接近的分钟数？

> ID：14617468
> 
> 赞同：0
> 
> 时间：2013-01-31T02:27:57.157
> 
> 标签：c#, sql, sql-server, datetime, datetime-format

`HH:MM`当源时间具有`HH:MM:SS`精度时，是否有标准或公认的最佳实践？秒应该被截断或四舍五入到最接近的分钟吗？

在社交方面，如果我看着一个数字时钟，发现它是 4:00:45，我永远不会告诉别人它是 4:01。但我不知道这个约定是否通用，或者它是否也适用于计算。

此外，四舍五入到最接近的分钟可能会产生意外行为，例如，如果四舍五入导致小时或日期发生变化。这不一定适用于我们今天处理的特定用例，但我可以很容易地想象另一个用例，其中“1 月份销售”列表中包含的销售`31-Jan 23:59:59`将显示为`1-Feb 00:00`

如果上下文与答案相关，则此用例是将 a 转换为 a 的 SQL Server 应用程序，`datetime`SQL `smalldatetime`Server 将[四舍五入](http://blog.sqlauthority.com/2010/06/01/sql-server-precision-of-smalldatetime-a-1-minute-precision/)到最接近的分钟。结果将显示为`HH:MM`C# Web 应用程序。转换发生在我们现在无法更改的遗留代码中，但我们可以强制截断秒数而不是四舍五入。

但我不确定我们*是否应该*这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T02:34:17.973

一般来说，日期和时间最好向下取整。

对我来说，“1 周前”意味着“至少 7 天，但不到 14 天”。类似的想法也适用于时代。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T02:33:10.947

除非它对父对象的排序至关重要，否则我真的不会打扰。如果您不需要秒数；它们可以被认为是低优先级的。我个人会舍入它，因为我喜欢精确度，即使是分形的。

如果您知道它可能会导致意外行为；任何解释数据的人都应该解释它 - 但是您可以通过在代码中添加一个注释来使它们更容易，这可能会导致这种情况，以便他们意识到这一点。

# python - xlrd 打印的 col 输出似乎是 xf 格式文本。我该如何摆脱这个？

> ID：14617477
> 
> 赞同：2
> 
> 时间：2013-01-31T02:29:05.753
> 
> 标签：python, xlrd

我正在使用 XLRD 尝试读取和操作封装在我的 excel 文档单元格中的字符串文本。我正在发布我的代码，以及当我选择打印某个列时返回的文本。

```
import xlrd
data = xlrd.open_workbook('data.xls')
sheetname = data.sheet_names()
employees = data.sheet_by_index(0)

print employees.col(2)

>>>[text:u'employee_first', text:u'\u201cRichard\u201d', text:u'\u201cCatesby\u201d', text:u'\u201cBrian\u201d'] 
```

我的意图是创建一个字典或使用 python 中的字符串引用 excel 文档。我想让我的程序中的一些函数在本地处理数据，然后在稍后的时间点（不在这个问题的范围内）输出到第二个 excel 文件。

我如何摆脱这些额外的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T19:10:57.773

如果您只对单元格的值感兴趣，那么您应该这样做：

`values = sheet.col_values(colx=2)`

代替：

```
cells = sheet.col(colx=2)
values = [c.value for c in cells] 
```

因为它更简洁、更高效（`Cell`对象是在请求时动态构建的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T04:00:25.153

`employees.col(2)`是`xlrd.sheet.Cell`实例列表。要从列中获取所有值（而不是`Cell`对象），您可以使用以下`col_values`方法：

```
values = employees.col_values(2) 
```

你也可以这样做（我原来的建议）：

```
values = [c.value for c in employees.col(2)] 
```

但这比使用`col_values`.

`\u201c`和`\u201d`分别是 unicode 左右双引号。如果你想摆脱这些，你可以使用 lstrip 和 rstrip 字符串方法。例如这样的：

```
values = [c.value.lstrip(u'\u201c').rstrip(u'\u201d') for c in employees.col(2)] 
```

# mysql - 用于存储指标的数据库架构/设计

> ID：14617479
> 
> 赞同：0
> 
> 时间：2013-01-31T02:29:27.100
> 
> 标签：mysql, database-design, project-management, relational-database, metrics

为了澄清起见，我不想将指标存储在数据库本身 - 相反，我想构建一个数据库来存储来自我们在我的组织中测量的各种控制的指标，以便于报告。一点背景知识：作为经理，我从各种应用程序中提取指标——我们的两个票务系统（是的，我知道）、我们的电话系统、来自我们的事件管理软件（即 Nagios）的警报等。我每周报告一次基础并保存一个带有历史数据的 Excel 电子表格。电子表格真的非常非常大而且不灵活。

我在编写 Web 应用程序方面并不陌生，但我对数据库设计领域还是很陌生。我想用一些很棒的人力车 javascript 图表编写一个应用程序，以获得一些很棒的历史数据（并用疯狂的颜色和交互性让高级管理团队惊叹）。

我从哪里开始使用数据库？我可以为所有指标创建一个表，但是如何将它们索引到各种类型中（例如，电话指标有放弃率、呼入呼叫总数、呼出呼叫总数、通话总时间、平均通话时间、平均保持时间、最长保持时间等）。那是一张杂乱无章的桌子。

我可以为每种类型（电话、票证、活动等）创建一个表，但这似乎很难在以后添加指标。

我希望这里有人有一些经验，可以给我一些关于我应该朝哪个方向前进的指示。

PS：它需要是 SQLite 或 MySQL，只是由于我目前可用的资源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T02:47:00.397

这种系统的 MySQL 设计可以考虑以下几点：

1.  每种类型的指标组的表，例如票证系统的实体可以是单个票证
2.  如果工单连接到单个用户，您可以在前一个工单表中包含用户名，否则为了保持灵活性，我会说为每个连接的元素创建一个表，例如工单被分配给员工并且有多个与之关联的电话，所以你需要电话表和员工表。
3.  为了映射多个项目，创建映射表，例如员工票和票证，以将员工与多个票和票与多个呼叫相关联

一旦你定义了这些实体，你就可以坐在 mySQL phpmyadmin 上并创建可以工作的表。

对于事物的图表方面，使用 D3.js 并吐出 json 并使用 javascript 或 json2 将其绑定到您的图表等。

# delphi - 在热敏纸上打印的正确字体是什么？

> ID：14617480
> 
> 赞同：12
> 
> 时间：2013-01-31T02:29:29.470
> 
> 标签：delphi, printing, fonts, report

我有一个程序可以打印每个客户的订单，比如餐馆的门票，但我是用 times new roman 完成的。结果不是高质量的打印。我相信字体对于这项技术来说并不是最好的，我必须说服我的客户所有者，因为他喜欢这种字体。

无衬线字体或类似字体会是更好的选择吗？

此外，无论制造商是什么，是否有直接打印到那些热敏打印机并选择内部字体的标准程序？

我正在使用 QuickReports 来创建打印。结果是模糊之王。一旦我把手放在扫描仪上，我就会把照片放在一起比较。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-31T08:55:55.233

选择最佳打印字体既是主观的又是技术性的。并非所有字体都适合小 dpi 媒体；一些字体在绘制字母时使用高度可变的线宽，并且在与容易弄脏的介质一起使用时很容易“弄脏”；我猜热敏打印机适合“小 dpi”和“容易弄脏”的区域。

在我看来，选择的字体应该是，基于优先级：

*   设备字体：不要在微型打印机上打印图形，使用板载字体并学习“转义”语言。结果将非常出色，并且有足够的灵活性也可以获得漂亮的结果。唯一一次我必须处理热敏打印机时，我使用了这种方法，结果真的*很棒*。该设备允许字体缩放、画线，几乎所有你需要的东西。但这是一项艰苦的工作，你会在“舒适区”之外。打印机驱动程序根本没有帮助您，您最终会编写特定于设备的例程。
*   下一个选项是 BITMAP 字体。也就是说，不要使用 True Type 字体。在今天的计算机上，位图字体只有一个目的：在小像素数方面看起来不错。这对于小 dpi 打印机来说是完美的。
*   投资数百万开发一种特殊用途的字体，该字体易于*在纸上*阅读，并且在任何设备上打印效果都很好。或者使用其他人花费数百万开发的字体：打开您喜欢的版本`Ms Word`，输入几个单词，看看使用的是什么字体。现在我明白了`Calibri`。
*   使用不需要大量像素来绘制或使污迹更明显的花哨笔触的字体。`Times New Roman`用非常大的字体写一些东西。看到花哨的线条、狭窄的部分、优雅的设计了吗？对于小 dpi、容易弄脏的打印机来说，这不是一个好的选择。现在对 Arial、Verdana、Tahoma 执行相同的操作。
*   让用户选择。这个决定只是部分技术性的，使用一件事或另一件事可能有主观原因。

# c# - Graphics 对象的翻译不影响 WM_PRINT 调用

> ID：14617487
> 
> 赞同：0
> 
> 时间：2013-01-31T02:30:27.920
> 
> 标签：c#, graphics, gdi+, sendmessage

我目前正在使用 WM_PRINT 调用将控件呈现到图形对象中：

```
GraphicsState backup = graphics.Save();
graphics.TranslateTransform(50, 50);

IntPtr destHdc = graphics.GetHdc();

const int flags = (int)(DrawingOptions.PRF_CHILDREN | DrawingOptions.PRF_CLIENT | DrawingOptions.PRF_NONCLIENT);
NativeMethods.SendMessage(srcControl.Handle, (Int32)WM.WM_PRINT, (IntPtr)destHdc, (IntPtr)flags);
graphics.ReleaseHdc(destHdc);
graphics.DrawLine(Pens.Blue, new Point(), new Point(srcControl.Width, srcControl.Height));

graphics.Restore(backup); 
```

我需要使用 WM_PRINT 命令而不是 control.DrawToBitmap()，因为 DrawToBitmap 方法不处理屏幕外的控件。

代码将正确地将蓝线的绘图转换 50,50，但控件呈现在左上角 (0,0)。有什么方法可以使用 WM_PRINT 命令打印到特定位置（50,50）？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-18T10:54:26.617

原因是`WM_PRINT`使用 the`Device context`而不是通过`graphics`，所以`translate transform`不受影响。它仅受在`graphics`. 这是一种解决方法：

```
GraphicsState backup = graphics.Save();
Bitmap bm = new Bitmap(srcControl.Width, srcControl.Height);
Graphics g = Graphics.FromImage(bm);
IntPtr destHdc = g.GetHdc();

const int flags = (int)(DrawingOptions.PRF_CHILDREN | DrawingOptions.PRF_CLIENT |     DrawingOptions.PRF_NONCLIENT);
NativeMethods.SendMessage(srcControl.Handle, (Int32)WM.WM_PRINT, destHdc,  (IntPtr)flags);
g.ReleaseHdc(destHdc);
graphics.DrawImage(bm, new Point(50,50));
graphics.DrawLine(Pens.Blue, new Point(), new Point(srcControl.Width, srcControl.Height));

graphics.Restore(backup); 
```

# c++ - 使用“使用命名空间”而不是将实体嵌套到括号中是否正确？

> ID：14617491
> 
> 赞同：2
> 
> 时间：2013-01-31T02:30:49.010
> 
> 标签：c++, namespaces

我和我的同事发生了争执。

我们有一个类，它是命名空间的成员（它是另一个命名空间的成员，但我认为这在这里并不重要）。在头文件中，我们将类块嵌套到命名空间块中，如下所示：

```
namespace NS {
    class A {
        void method();
        // ...
    };
} 
```

这是 .cpp 文件和我们论证的主题。我写：

```
using namespace NS;

void A::method() {
    // ...
} 
```

同事告诉我，我不正确地使用了 'using' 指令，我应该在这里使用与标题中相同的 NS { ... }。（他修改了代码并得到了一些编译器错误，他只能通过删除 using 指令并用 NS { ... } 包围代码来摆脱这些错误。）

我的观点是“使用”只会影响名称查找，因此在 NS 命名空间中查找 A，所以我的方法是正确的，他的编译器问题是由其他原因引起的，而不是由“使用”指令引起的。

谁是对的，为什么？

**补充：**伙计们，请不要像“我多次这样做（或那样）方式”那样回答，这没有多大用处。我们在这里需要理论：为什么这种或那种方法是对还是错。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T02:34:19.760

你的同事是正确的，你应该用命名空间包装 cpp，这意味着你在命名空间 NS 中定义你的功能。

```
namespace NS
{    
  void A::method() 
  {
    // ...
  }
} 
```

如果您有多个 A 可用，您可能会得到冲突名称查找。

这里发生的危险事情是 using 声明会`A::method`在遇到 using 声明时对命名空间 NS 中命名的任何实体进行快照。

阅读有关命名空间的[Google cpp 风格指南，以及](http://google-styleguide.googlecode.com/svn/trunk/cppguide.xml#Namespaces)[101 个 c++ 编码标准](https://rads.stackoverflow.com/amzn/click/com/0321113586)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T02:41:20.253

你们俩在不同的方面都是对的。你是对的， using 指令会让编译器解析`A`为`void A::method()`be `NS::A`，但他也是对的，在大多数情况下你最好打开命名空间。

原因是不会查找标题中命名空间中声明的所有内容，并且对于这些元素，您需要打开命名空间（或手动提供限定），因此提供统一的方法是有意义的。

一个常见的示例是应用于类型的运算符的定义：

```
// header
namespace NS {
   class A { ... };
   std::ostream& operator<<(std::ostream&,A const&);
}
// implementation file (incorrect):
using namespace NS;
std::ostream& operator<<(std::ostream& o, A const & a) {
   // do something
} 
```

这里的问题是函数定义（当函数名不是限定名时）是自我声明的。在标头中，运算符被声明为`::NS::operator<<`，但在实现文件中，它被定义为`std::ostream& ::operator<<(std::ostream&, NS::A const&)`. using 指令将允许`A`标识符的解析为`NS::A`，但它不会使该函数定义驻留在`NS`命名空间中。

`::NS::operator<<`这导致了一个微妙的问题，由于 ADL，该运算符的任何使用都会发现，但该运算符*未*在任何地方定义（尽管在不同的命名空间中有类似的运算符）

说了这么多，有一些编码约定（我现在工作的地方有这样的指导方针）要求所有类型的命名空间，并且自由函数定义应该在命名空间*之外*执行，并且总是有资格避免自我声明。在上面的示例中，操作符将在实现文件中定义为：

```
std::ostream& ::NS::operator<<(std::ostream& o, A const& a) { ... } 
```

但是除非你真的习惯了总是限定条件，否则如果你忘记了函数的限定条件，这很容易出错。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T02:34:24.540

```
namespace NS {
    class A {
        void method();
        // ...
    };
} 
```

一直都是这样...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-15T08:20:24.743

事实证明，这不仅仅是“编码风格的问题”。在头文件中定义和初始化声明为 extern 的变量时，使用命名空间 ... 会导致链接错误。看看我的问题中的例子。[cpp文件中命名空间内常量的定义](https://stackoverflow.com/questions/24698249/definition-of-constant-within-namespace-in-cpp-file)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T02:36:24.457

你是对的。我已经被这个咬过很多次了（也就是说，被认为`using`声明不会这样做而被咬过）。您可以通过三种方式编写此代码，并且都可以：

```
namespace NS
{
    void A::method()
    { }
} 
```

或者：

```
NS::A::method() { } 
```

或者：

```
using namespace NS;

A::method() { } 
```

但是，就风格而言，我建议第一个或第二个 -`using`当您有多个具有相同名称和方法的类时，声明可能会变得很麻烦。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-31T02:38:13.963

最好不要在代码声明或库中使用“使用命名空间”，但可以将它们用于实际程序的代码。

即：不要将它用于 Cpp 定义，但您可以在外部调用函数/类时使用它。

这只是良好的编码实践，除非其他人正在使用您的代码，否则您想要什么更重要。

最好将 cpp 代码放入 Namespace { ... } 以提高可读性

# python - 以编程方式更新 web2py auth_user 自定义字段

> ID：14617494
> 
> 赞同：0
> 
> 时间：2013-01-31T02:31:01.633
> 
> 标签：python, data-access-layer, web2py

我有一个与用户关联的自定义字段，该字段使用 auth.settings.extra_fields 将每个用户的分数存储在 auth_user 表中，其中 readable=False 和 writable=False。但我想以编程方式更新这个字段。

我尝试了以下方法：

auth.user.score.update(float(balance)-float(cost))

余额和成本都是明确定义的变量，我检查了单独返回它们，这很有效。我不得不尝试这个，因为我发现使用 DAL 访问 auth_user 表是不可能的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T03:05:55.487

确实可以使用 DAL 访问 auth_user 表。你有没有尝试过：

```
db(db.auth_user.id == auth.user_id).update(score=float(balance) - float(cost)) 
```

注意，`auth.user`是指存储在会话中的用户记录的副本，因此更改它不会影响数据库记录。

# selenium - Selenium Headless with Service

> ID：14617496
> 
> 赞同：0
> 
> 时间：2013-01-31T02:31:11.043
> 
> 标签：selenium

我知道您可以在 WebDriver 旁边运行无头 Selenium，但是有没有办法通过该服务来做到这一点？我正在尝试以下操作，它只是正常打开浏览器，似乎忽略了 Xvfb。如果发生这种情况，这是在 Mac 上。

```
from pyvirtualdisplay import Display
import selenium.webdriver as webdriver;
import selenium.webdriver.chrome.service as service

# ...

self.display = Display(visible=0, size=(1024, 768))
self.display.start()

self.service = service.Service('/path/to/chromedriver');
self.service.start();

# Various Chrome option stuff clipped

browser = webdriver.Remote(self.service.service_url, desired_capabilities=options.to_capabilities()); 
```

仅供参考 - 不是一个真正的解决方案，但目前，我正在使用 Chrome 的窗口大小和窗口位置标志来阻止硒，例如，

```
options = webdriver.ChromeOptions();
options.add_argument('--window-size=100,100')
options.add_argument('--window-position=100,1200')
browser = webdriver.Remote(service_url, desired_capabilities=options.to_capabilities()) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T06:02:58.757

也许，这就是你想要的：[generalredneck/headless-selenium](https://github.com/generalredneck/headless-selenium)

# c++ - 防止 AddString（某些进程）到组合框 MFC

> ID：14617497
> 
> 赞同：0
> 
> 时间：2013-01-31T02:31:13.777
> 
> 标签：c++, mfc, combobox

我有代码女巫将当前工作进程添加到组合框，我想排除所有名称为：svchost.exe 的进程

```
if (Process32First(hSnap, &proc))
{
    pComboBox->AddString(proc.szExeFile);
    while (Process32Next(hSnap, &proc)){
        if (proc.szExeFile != L"svchost.exe")
            pComboBox->AddString(proc.szExeFile);
    }
} 
```

我尝试了该代码，但它根本不起作用。

如何排除所有 svchost.exe 进程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T02:38:59.060

我认为你不能使用：

```
 if (proc.szExeFile != L"svchost.exe") {...} 
```

改用下面的：</p>

```
 if (0!=wcscmp(proc.szExeFile, L"svchost.exe")) {...} 
```

比较两个文字时，您不能使用二进制运算符 like `=`，它将比较两个文字的地址，显然它们的地址在大多数情况下会有所不同，在您的情况下，文字`L"svchost.exe"`存储在程序的某个静态数据部分中，这将不等于本地存储在堆栈中的进程名称。

# ajax - 使用 Symfony 的 HTTP 基础进行 Ajax 上传

> ID：14617500
> 
> 赞同：0
> 
> 时间：2013-01-31T02:31:43.093
> 
> 标签：ajax, symfony

我使用 symfony 的 HTTTP 基础作为我自己项目的一部分。但我找不到用它上传ajax的方法。

**如何使用 ajax 在 Symfony 的 HTTP Foundation 中上传文件？**是否有任何插件或插件或其他方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T06:11:20.043

您可能正在使用 jQuery Upload、Uploadify 等组件...您可能只会对此处描述的上传过程有任何问题 ( [http://symfony.com/doc/current/cookbook/doctrine/file_uploads.html](http://symfony.com/doc/current/cookbook/doctrine/file_uploads.html) ) 如果您在防火墙后面进行操作（例如，限制区域）。

整个问题是那些上传组件请求不存在会话 ID（通常存储在 cookie 中）。它是 Flash 的限制。使用本文中描述的过程（[http://www.elao.com/blog/symfony-2/symfony-2-loading-session-from-query-param.html](http://www.elao.com/blog/symfony-2/symfony-2-loading-session-from-query-param.html)），你应该没问题。

# php - 当我使用 addComplexType 函数时，如何定义嵌套数组结构？

> ID：14617503
> 
> 赞同：0
> 
> 时间：2013-01-31T02:32:35.097
> 
> 标签：php, nusoap

我搜索了很多例子。

但是我找不到如何定义嵌套数组结构，它不是 key=>value 类型。

客户端使用数组调用“hello”函数，数组不是键=>值类型。

我无法从客户端触摸输入参数。

客户端。

```
$client = new soapclient('http://localhost/Ex.php?wsdl', 'wsdl');

$ddd = array($id, $pw);
$parameter = array($aaa, $bbb, $ccc, $ddd);

// Call the SOAP method
$result = $client->call('hello',$parameter); 
```

服务器端。

```
$server->wsdl->addComplexType(
    'noKey',
    'complexType',
    'struct',
    'all',
    '',
array(
    '0'=>array( 'name'=> '0', 'type' => 'xsd:string'),
    '1'=>array( 'name'=> '1', 'type' => 'xsd:string')       
    //this definition occurred error.
    )
);

$server->register('hello', // method name
    array(
        'aaa' =>'xsd:string',
        'bbb' =>'xsd:string',
        'ccc' =>'xsd:string',
        'ddd' =>'tns:noKey'
    ), // input parameters

    array('return' => 'xsd:string'), // output parameters
    'urn:Exwsdl', // namespace
    false, // soapaction
    'rpc', // style
    'encoded', // use
    'Greet a person entering the sweepstakes' // documentation
 );

 function hello($aaa, $bbb, $ccc, $ddd) {
     return $aaa.", ".$bbb.", ".$ccc.", ".$ddd[0].", ".$ddd[1];
 } 
```

错误

```
Array
(
    [faultcode] => SOAP-ENV:Client
    [faultactor] => 
    [faultstring] => error in msg parsing:
    XML error parsing SOAP payload on line 1: XML_ERR_NAME_REQUIRED
    [detail] => 
) 
```

帮帮我TT

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T20:34:11.377

尝试不要在复杂类型的定义中使用数字作为数组元素的名称。

以下版本的代码对我来说很好：

```
$server->register('hello', // method name
    array(
        'aaa' =>'xsd:string',
        'bbb' =>'xsd:string',
        'ccc' =>'xsd:string',
        'ddd' =>'tns:noKey'
    ), // input parameters

    array('return' => 'xsd:string'), // output parameters
    'urn:Exwsdl', // namespace
    false, // soapaction
    'rpc', // style
    'encoded', // use
    'Greet a person entering the sweepstakes' // documentation
);

$server->wsdl->addComplexType(
    'noKey',
    'complexType',
    'struct',
    'all',
    '',
    array(
        'forename'=>array( 'name'=> 'forename', 'type' => 'xsd:string'),
        'surname'=>array( 'name'=> 'surname', 'type' => 'xsd:string')
        )
);

function hello($aaa, $bbb, $ccc, $ddd) {
    return $aaa.", ".$bbb.", ".$ccc.", ".$ddd['forename'].", ".$ddd['surname'];
} 
```

# actionscript-3 - As3 影片剪辑背景图像大小

> ID：14617508
> 
> 赞同：0
> 
> 时间：2013-01-31T02:33:04.793
> 
> 标签：actionscript-3, flash, actionscript, box2d

我正在使用 box2d，并生成一些可变大小的地面（所有矩形）。场地使用的图像是 500 像素 x 200 像素，但是，当我创建场地并调整其大小时，背景图像会拉伸以填充身体。我试图让它与左上角对齐，只是平铺而不调整大小，但我真的不确定如何控制它。

如果有帮助，我将图像作为影片剪辑导入到我的库中，并且还有一个基本的空类（EarthGround.as）。我一直在做一些研究，但实际上还没有找到任何关于操纵电影剪辑相关图像的明确信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T12:20:07.540

你必须具体说明这一点。也许屏幕截图会有所帮助。

在那之前，可能的原因可能是：

*   Box2D 使用 1 像素 = 1 米的真实世界值。您必须选择一个比例因子。

*   Box2d 使用任何对象的中心作为其注册点。您应该始终对您的 flash sprite/movieclip 做同样的事情，以保持简单。

# database - 我正在尝试在 ubuntu 12.10 中安装 DJonDB，并向我展示“djon: no se encontro la orden”..请帮帮我

> ID：14617512
> 
> 赞同：0
> 
> 时间：2013-01-31T02:33:31.210
> 
> 标签：database, installation, ubuntu-12.10

我正在尝试`DJonDB`在**Ubuntu 12.10**上安装。我正在按照这篇博文中的说明进行操作：

*   [http://crosstantine.blogspot.com/2013/01/preparacion-para-taller-de-nosql-con.html](http://crosstantine.blogspot.com/2013/01/preparacion-para-taller-de-nosql-con.html)

..但我收到以下错误：

```
% djondb -n
djon: no se encontro la orden 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:46:39.363

这是因为您应该使用“djondbd”而不是“djondb”，博客现在已修复。

# c - 如何检测程序虚拟空间的栈顶

> ID：14617515
> 
> 赞同：0
> 
> 时间：2013-01-31T02:34:10.227
> 
> 标签：c, memory-management, stack

我正在尝试估计我的程序堆栈范围的跨度。我的策略是假设由于堆栈向下增长，我可以为当前堆栈帧创建一个局部变量，然后使用它的地址作为参考。

```
 int main()
 {
   //Now we are in the main frame.
   //Define a local variable which would be lying in the top of the stack
    char a;
   //Now define another variable
    int b; //address should be lower assuming stack grows downwards

   //Now estimate the stack size by rlimit
   struct rlimit stack_size;
   getrlimit(RLIMIT_STACK,&stack_size);

   //A crude estimate would be stack goes from &a to &a - stack_size.rlim_cur

   printf("%p \n",&a);
   printf("%p \n",&b);
   printf("stack spans from %u to %u",&a,&a - stack_size.rlim_cur);
   return 0;
 } 
```

有趣的是，当我使用 gdb 调试 a 和 b 的值地址时，b 的地址比 a 的值更高。此外，堆栈指针始终保持在 .

```
 0xbfca65f4 
 0xbfca660f
 Stack spans from 0xbfca65f4 to 0xbbca65f4.

 ebx            0xb7faeff4  -1208291340
 esp            0xbffff670  0xbffff670 
```

有人能帮我理解我哪里出错了吗？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T03:13:02.423

这种方法最有效；你的错误只是在同一个调用框架中`a`检查两者。`b`编译器没有理由按照您期望的堆栈方式对自动变量进行排序。它可能会出于数据局部性或对齐目的选择它们的顺序。

如果您在单独的调用框架中比较一个自动对象的地址`main`和另一个在单独的调用框架中的地址（确保它不是可能被内联到的对象`main`！）那么您应该得到更接近您期望的结果。

# java - 编写 int 数组并返回元素数量的正确方法？

> ID：14617520
> 
> 赞同：0
> 
> 时间：2013-01-31T02:34:25.953
> 
> 标签：java, arrays, return

我有个问题。我正在尝试编写一个返回值的方法，该方法返回整数数组中的元素数。我已经编写了数组，并且返回语句有一半是正确的。我在这一点上迷路了。如何将数组中的元素数（即 9）转换为 int 形式并放入 return 语句？谢谢

```
public class ChapterEightCode 
{
  public static void main(String[] args) 
  {
      int eTotals = myArray();

      System.out.println(eTotals);
  }

  static int myArray()
  {
     int[] intArray = new int[] {1,2,3,4,5,6,7,8,9};

     for (int i=0; i<intArray.length; i++)
     {
        System.out.println(intArray[i]); 
     }

     int eTotals = 1000;
     return eTotals;
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T02:44:39.357

如果您只是在数组长度之后，不确定为什么要循环，试试这个：

```
return intArray.length; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T02:43:49.627

使用数组的长度字段：

```
return intArray.length; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T02:49:55.817

仔细观察这个方法：

您首先创建一个整数数组，然后从 0 到 length of 循环遍历每个元素，`intArray`逐个打印元素。然后你声明一个 integer `eTotals`，将其设置为`1000`然后 return `eTotals`，这意味着你一直在`1000` *返回*。

```
 static int myArray()
  {
     int[] intArray = new int[] {1,2,3,4,5,6,7,8,9};

     for (int i=0; i<intArray.length; i++)
     {
        System.out.println(intArray[i]); 
     }

     int eTotals = 1000;
     return eTotals; // instead `return intArray.length;`
  } 
```

为什么不只是`return intArray.length;`？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T02:46:15.833

如果你写一个“int eTotals = 1000; return eTotals;” 在函数 myArray() 的最后，我会觉得前面的代码没有意义。也许你可以尝试替换语句“int eTotals=1000;” 作为“int eTotals = intArray.length;”

# javascript - Requirejs + Backbone Uncaught TypeError：无法读取未定义的属性“模型”

> ID：14617523
> 
> 赞同：6
> 
> 时间：2013-01-31T02:34:26.920
> 
> 标签：javascript, backbone.js, requirejs

我一直从 Backbone 开始。我使用 Require 加载模块并收到此错误。谁能解释一下？在文件 user.js 中，当我尝试创建 Backbone.Model.extend 时，我遇到了这个错误。我使用了 Backbone.js 0.9.10、jQuery v1.9.0、RequireJS 2.1.4、Underscore 1.4.4。谢谢你。

索引.html

```
<!doctype html>
<html lang="en">
<head>
    <title></title>
    <!-- Load the script "js/main.js" as our entry point -->
    <script data-main="js/main.js" src="js/libs/require/require.js"></script>
    <link rel="stylesheet" type="text/css" href="stylesheets/style.css">
</head>

<body>

<div id="container">

    <div id="menu"></div>

    <div id="content"></div>

</div>
</body>
</html> 
```

main.js

```
require.config({
    paths:{
        jquery:'libs/jquery/jquery-min',
        underscore:'libs/underscore/underscore-min',
        backbone:'libs/backbone/backbone-min',
        templates:'../templates'
    }
});

require(['app'], function (App) {
    console.log('____main.js')
    App.initialize();
    console.log('main.js')
}); 
```

应用程序.js

```
define(['jquery', 'underscore', 'backbone', 'router'], function($, _, Backbone, Router) {
    var initialize = function(){
        Router.initialize();
        console.log('app.js');
    };

    return {
        initialize: initialize
    };
}); 
```

路由器.js

```
define([
    'jquery',
    'underscore',
    'backbone',
    'views/home/login'
    //'views/room',
//    'views/friend',
//    'views/play',
//    'views/money'
], function ($, _, Backbone, loginView) {
    console.log('router.js');
    var AppRouter = Backbone.Router.extend({
        routes:{
            '/home':'showHome',
            '*actions':'defaultAction'
        },
        showHome:function () {
            loginView.render();
        },
        defaultAction:function (actions) {
            console.log('No route:', actions);
        }
    });

    var initialize = function(){
        var app_router = new AppRouter;
        Backbone.history.start();
    };
    return {
        initialize: initialize
    };
}); 
```

login.js（主干视图）

```
define([
    'jquery',
    'underscore',
    'backbone',
    'collections/home/users',
    'text!templates/home/login.html'
], function($, _, Backbone, usersCollections, homeLoginTemplate){
    var loginView = Backbone.View.extend({
        el: $('container'),
        render: function(){
            var data = {};
            var compiledTemplate = _.template(homeLoginTemplate);
            this.el.append(compiledTemplate);
        }
    });
    console.log('login.js');
    return new loginView;
}); 
```

user.js（骨干模型）

```
define([
    'underscore',
    'backbone'
], function (_, Backbone) {
    console.log('user model');
    var userModel = Backbone.Model.extend({
        default:{
            username:"",
            password:""
        }
    });

    return userModel;
}); 
```

users.js（主干集合）

```
define(['underscore', 'backbone', 'models/user'], function (_, Backbone, userModel) {
    console.log('user collection');
    var usersCollection = Backbone.Collection.extend({
        model:userModel
    });
    return new usersCollection;
}); 
```

我不能发我的照片。但是您可以在此链接中看到[http://imageshack.us/photo/my-images/809/devi.jpg/](http://imageshack.us/photo/my-images/809/devi.jpg/)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T08:32:54.903

也许您的 main.js 文件中缺少一些 shim 配置，请在此处阅读：[http ://requirejs.org/docs/api.html#config-shim](http://requirejs.org/docs/api.html#config-shim)

您可以尝试添加：

```
shim: {
    'backbone': {
        deps: ['jquery','underscore'],
        exports: 'Backbone'
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-28T17:02:33.597

使用@Ingro 所说的，并在调用渲染模板时尝试使用默认的下划线标记。

例如：

main.js

```
require.config({
    paths:{
        jquery:'libs/jquery/jquery-min',
        underscore:'libs/underscore/underscore-min',
        backbone:'libs/backbone/backbone-min',
        templates:'../templates'
    },

    shim: {
        backbone: {
            deps: ['jquery','underscore'],
            exports: 'Backbone'
        }
    }
});
require(['app'], function (App) {
    console.log('____main.js')
    App.initialize();
    console.log('main.js')
}); 
```

并在您使用下划线模板的任何文件中，例如您的“login.js”使用此：

```
define([
    'backbone',
    'collections/home/users',
    'text!templates/home/login.html'
], function(Backbone, usersCollections, homeLoginTemplate){
    var loginView = Backbone.View.extend({
        el: $('container'),
        render: function(){
            var data = {};
            var compiledTemplate = _.template(homeLoginTemplate);
            this.el.append(compiledTemplate);
        }
    });
    console.log('login.js');
    return new loginView;
}); 
```

jquery 和 underscore 都默认在主干需要调用中使用。我希望这些对你有帮助。

# php - bcadding 非常小的浮点数给出 0

> ID：14617525
> 
> 赞同：0
> 
> 时间：2013-01-31T02:34:44.377
> 
> 标签：php, floating-point-precision, bc

感谢堆栈，我了解了浮点不精度，所以我转到了 bc 函数。

这在“普通”浮点数上效果很好，但是对于非常小的浮点数，比如`10^-10`类型，`bcadd`总是给出`0`.

有人可以告诉我我做错了什么来使这些小花车精确添加吗？

提前谢谢了！

* * *

**PHP**

```
$numerator = 1;
$denominator = 1000000000;
$quotientOne = $numerator / $denominator;

$numerator = 1;
$denominator = 1000000000000000;
$quotientTwo = $numerator / $denominator;

$smallSum = bcadd($quotientOne, $quotientTwo, 100);

echo $quotientOne . "<br>";
echo $quotientTwo . "<br>";
echo $smallSum . "<br>"; 
```

给

```
1.0E-9
1.0E-15
0.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T03:01:57.670

[`/`运算符](http://php.net/manual/en/language.operators.arithmetic.php)返回浮点数或整数[。](http://php.net/manual/en/language.operators.arithmetic.php)它干扰了您正确使用 bcadd() 的尝试。在 bcadd() 有机会展示它的东西之前，浮点算术的局限性就会出现。

```
echo gettype($numerator / $denominator);
double 
```

改为使用`bcdiv()`。请注意，bc*() 函数将字符串作为其参数，并且它们也返回一个字符串。

```
$ cat code/php/test.php
<?php
$num_1 = 1;
$denom_1 = 1000000000;

# Cast values to string type to be crystal clear about what you're doing.
$q_1 = bcdiv((string)$num_1, (string)$denom_1, strlen($denom_1));
printf("q_1: %s\n", $q_1);

$num_2 = 1;
$denom_2 = 1000000000000000;

# php will do an implicit conversion to string anyway, though.
$q_2 = bcdiv($num_2, $denom_2, strlen($denom_2));
printf("q_2: %s\n", $q_2);

printf("sum: %s\n", bcadd($q_1, $q_2, strlen($denom_2)));
?>

$ php code/php/test.php
q_1: 0.0000000010
q_2: 0.0000000000000010
sum: 0.0000000010000010 
```

任意精度算术本质上比浮点算术慢。这就是您为获得数十、数百或数千位精度所付出的代价。

# regex - Vim：为文件中的所有函数添加语句

> ID：14617532
> 
> 赞同：1
> 
> 时间：2013-01-31T02:35:43.803
> 
> 标签：regex, vim

我正在尝试使用 vim 向 python 脚本中的所有函数添加一个打印语句（尽管编程语言在这里无关紧要）。基本上我想改变这个：

```
def func1(a, b):
    pass 
```

进入这个：

```
def func1(a, b):
    print 'in func1'
    pass 
```

我在想类似的东西`:g/\vdef (\w+)\(/CMD`，但我的 vim 技能还不够好，无法想出`CMD`。有谁知道我可以用什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T02:58:24.840

您可以使用自己用来完成这项工作的任何东西，前缀为`:normal!`：

```
g/\vdef\ (\w+)\(/exe "normal!^wywoprint 'in \<C-r>0'" 
```

（注意：根据帮助，使用时必须转义空格`\v`：

> 使用 "\v" 意味着在它之后的模式中，除了 '0'-'9'、'a'-'z'、'A'-'Z' 和 '_' 之外的所有 ASCII 字符都有特殊含义。“很神奇”

. 你看，这里没有列出空格。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T07:58:22.067

这是仅使用一个替换的替代方法（基于 ZyX 模式）。

```
:%s/\v(def\ )(\w+)(\(.*\):)(\n\s*)/\1\2\3\4print "in \2"\4 
```

分解：

*   `(def\ )`是第一个捕获组，然后是
*   `(\w+)`，第二个捕获组，我们要重用的函数的名称，后跟
*   `(\(.*\):)`，第三个捕获组，其次是
*   `(\n\s*)`，我们将用来正确缩进新行的最后一个捕获组。
*   `\1\2\3\4`重新打印整个匹配，因为我们不想改变它，然后
*   `print "in \2"`是我们想要的新内容，后面是
*   `\4`保持`pass`线路完好无损。

可能有一种方法可以进行嵌套捕获组，但我没有走那么远。

请注意，您可以将其与`:global`：

```
:g/\v(def\ )(\w+)(\(.*\):)(\n\s*)/s//\1\2\3\4print "in \2"\4 
```

`:g`由于. _ `:s`_`//`

# java - Java 并发 - 发布不可变对象（Java 并发实践）

> ID：14617542
> 
> 赞同：3
> 
> 时间：2013-01-31T02:36:55.770
> 
> 标签：java, multithreading, concurrency, java-memory-model

在 Java Concurrency In Practice 中，作者指出

1.  不可变对象可以通过任何机制发布
2.  任何线程都可以安全地使用不可变对象，而无需额外的同步，即使不使用同步来发布它们也是如此。

这是否意味着以下成语可以安全地发布不可变对象？

```
public static List<ImmutableObject> list = new ArrayList<ImmutableObject>();

// thread A invokes this method first
public static void methodA () {
    list.add(new ImmutableObject());
}

// thread B invokes this method later
public static ImmutableObject methodB () {
    return list.get(0);
} 
```

会有数据竞赛吗？（这意味着线程 B 可能无法在线程 A 添加的列表中看到不可变对象）

非常感谢你。

* * *

此外，作者说如果 Resource 是不可变的，则以下代码是安全的。

```
@NotThreadSafe
public class UnsafeLazyInitialization {
    private static Resource resource;

    public static Resource getInstance() {
        if (resource == null)
            resource = new Resource();  // unsafe publication
        return resource;
    }
} 
```

> **第 16.3 节** 初始化安全的保证允许正确构造的不可变对象在线程之间安全共享而无需同步，无论它们如何发布，即使使用数据竞争发布。（这意味着`unsafeLazyInitialization`如果它是不可变的，它实际上是安全`Resource`的。）

**对于本题的第二部分，在另一个问题中详细讨论（点击[这里](https://stackoverflow.com/questions/14624365/immutability-and-reordering "链接到另一个问题")）**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T02:39:57.707

是的，你是对的，存在数据竞赛。

只有`ImmutableObject`是不可变的并且可以在线程之间安全共享`List`，但是您的 没有这些相同的保证，因此在添加`ImmutableObject`和检索它之间存在数据竞争。

在 JCIP 中，作者的意思是不可变对象可以安全地发布，因为您不必担心制作防御性副本之类的事情。

至于：

> 任何线程都可以安全地使用不可变对象，而无需额外的同步，即使不使用同步来发布它们也是如此。

这个声明意味着给定两个线程`A`，它们都通过任何方式获得了一个不可变对象，它们都可以使用对象`A`而不用担心线程安全问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T02:43:50.063

您的`List<ImmutableObject> list`容器对象不是不可变的。因此，对其添加和获取方法将不是线程安全的。这些方法需要同步才能从多个线程进行并发访问。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T03:19:27.243

您的问题表明您正在期待第 5.3 节 - 阻塞队列和生产者消费者模式。这是使用阻塞队列的类似内容：

```
public class Blocking
{
   private BlockingQueue<ImmutableObject> queue = new ArrayBlockingQueue<ImmutableObject>(10);

   public void methodA() {
      queue.add(new ImmutableObject());
   }

   public ImmutableObject methodB() throws InterruptedException
   {
      return queue.take();
   }
   static class ImmutableObject
   {

   }
} 
```

阻塞队列是高度可变的 - 但被设计为线程安全的，因此您可以在没有额外同步的情况下使用它。只要您传递的对象是不可变的，整个设计就是线程安全的。

在上面的示例中，methodB 使用“take”，它将阻塞，直到调用 methodA 将某些内容放入队列中。或者直到线程被中断，此时它将通过 InteruptedException 退出

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-14T17:58:03.333

是的，数据竞争肯定存在。这是一种情况：

虽然 Thread`A`在里面`methodA`，然后 Thread`B`将被执行`methodB`，但不能保证`methodA`之前已经返回`methodB`。如果不幸的是，`methodB`已经返回而`methodA`尚未返回，则很有可能获得`IndexOutOfBoundsException`：

```
// thread A invokes this method first
public static void methodA () {
    //assume control is taking time at this point, while thread B already returned!!!

    list.add(new ImmutableObject());
}

// thread B invokes this method later
public static ImmutableObject methodB () {
    return list.get(0);
} 
```

# javascript - 这是一个好的字符串消毒剂吗？

> ID：14617547
> 
> 赞同：1
> 
> 时间：2013-01-31T02:37:10.977
> 
> 标签：javascript, jquery, sanitize

> **可能重复：**
> [Javascript 中的 HtmlSpecialChars 等效项？](https://stackoverflow.com/questions/1787322/htmlspecialchars-equivalent-in-javascript)

我找不到可以在 HTML 中安全使用的良好字符串清理功能。我想知道这是否是一个好方法：

```
String.prototype.sanitize = function() {
  return $('<div></div>').text(this).html();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T02:42:26.193

对于 XSS 的清理，是的。对于清理 SQL 注入，没有。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T03:01:50.120

[删除jquery](/questions/tagged/jquery "显示标记为“jquery”的问题")要求会更好（而且仍然很容易） ：

```
String.prototype.htmlspecialchars = function() {
  var span = document.createElement('span'),
  txt = document.createTextNode(this);

  span.appendChild(txt);

  return span.innerHTML;
} 
```

与仍然的耦合`document`并不是那么糟糕，因为无论如何它都会被使用，但我更`String.replace()`喜欢在[这个答案](https://stackoverflow.com/a/4835406/1338292)中使用连续的。

# javascript - 沿路径、曲线和线条滚动

> ID：14617550
> 
> 赞同：0
> 
> 时间：2013-01-31T02:37:22.787
> 
> 标签：javascript, jquery, path, scroll, jquery-animate

有人知道一个更简单（不那么臃肿）的函数/插件来计算自定义滚动路径，比如来自 Joel Besada 的 jquery.scrollpath？

我需要的是一种让 DOM 节点沿预定义路径移动的方法。我知道 Math.cos 和 Math.sin（沿着曲线移动），但我并不是真正的数学天才。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T18:59:38.110

好的，我知道了！

```
// Shamelessly stolen and ported from https://github.com/weepy/jquery.path
$.fn.arc = function (options) {
    options = $.extend({}, {
        center: [0, 0],
        radius: 0,
        start: 0,
        end: 0,
        dir: 1,
        rotate: true
    }, options);

    while (options.start > options.end && options.dir > 0) {
        options.start -= 360;
    }

    while (options.start < options.end && options.dir < 0) {
        options.start += 360;
    }

    var css = {};
    return this.each(function(){
        var self = $(this),
            win = $(window),
            doc = $(document);

        win.scroll(function(){
            var now = 1 - (1 * win.scrollTop() / (doc.height() - win.height())),
                a = (options.start * (now) + options.end * (1 - (now))) * Math.PI / 180;

            css.left = (Math.sin(a) * options.radius + options.center[0] + 0.5) | 0;
            css.top = (Math.cos(a) * options.radius + options.center[1] + 0.5) | 0;

            if(options.rotate){
                css.transform = "rotate(" + Math.atan2(options.center[1] - css.top, options.center[0] - css.left) + "rad)";
            }
            self.css(css);
        });
    });
}; 
```

# mysql - 为时间序列应用程序优化 MySQL 数据检索

> ID：14617551
> 
> 赞同：0
> 
> 时间：2013-01-31T02:37:25.897
> 
> 标签：mysql, sql, performance

我正在开发一个 Web 应用程序来显示 MYSQL 数据库表中的一些分析数据。我希望最多从大约 10,000 个总用户那里收集数据。该表将有每个用户数百万条记录。

我正在考虑为每个用户提供自己的表格，但更重要的是我想弄清楚如何优化数据检索。

`SELECT COUNT`我使用特定日期的一系列查询从数据库表中获取数据。下面是一个例子：

```
SELECT * FROM
(SELECT COUNT(id) AS data_point_1 FROM my_table WHERE customer_id = '1' AND datetime_added LIKE '2013-01-20%' AND status_id = '1') AS col_1
CROSS JOIN
(SELECT COUNT(id) AS data_point_2 FROM my_table WHERE customer_id = '1' AND datetime_added LIKE '2013-01-20%' AND status_id = '0') AS col_2
CROSS JOIN ... 
```

当我想检索最近 30 天的数据时，查询将是上面的 30 倍；同样是 60 天，等等。用户将能够选择天数，例如 30、60、90 和自定义范围。

我需要时间序列图表的数据。需要明确的是，每天的数据可能从数千条记录到数百万条记录不等。

我的问题是：

1.  这是检索此数据的最高效方法，还是有更好的方法在一个 SQL 查询中获取我需要的所有时间序列数据？！当用户需要过去 2 年的数据（即可能超过 1000 行的 MySQL 查询）时，这将如何工作？！

2.  我是否应该考虑将检索到的数据（例如使用 memcache）缓存更长的时间，例如一个小时或更长时间，以减少服务器（因为这是分析数据，它确实应该是实时的，但我害怕超载即使没有更改，服务器也会查询相同的数据）？！

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T02:44:47.287

首先，您不应该将每个用户放在单独的表中。您还有其他选项几乎不会干扰您的应用程序。

您应该考虑对数据进行分区。根据您所说的，我将按时间（按天、按周或按月）和一个用户索引进行分区。您的查询应该看起来更像：

```
select date(datetime), count(*)
from t
where userid = 1 and datetime between DATE1 and DATE2
group by date(datetime) 
```

然后，您可以在外部查询或应用程序中对此进行透视。

我还建议您每天汇总数据，以便您的分析可以在汇总表上运行。这将使事情进展得更快。

# iphone - 关于 ipad 和模拟器上的不同结果

> ID：14617554
> 
> 赞同：1
> 
> 时间：2013-01-31T02:37:38.977
> 
> 标签：iphone, ios, xcode, ipad, ios-simulator

我想计算对称矩阵的特征向量。xcode 上的模拟器给出了正确的答案，但 ipad 没有。那个怎么样？我使用 dsyevd_ 来获取它们。特征值相同，但特征向量不完全相同，结果如下所示。

逐列

模拟器：

```
-0.009208  -0.404135  -0.210490  -0.312938   0.319550  -0.054404   0.737996   0.211291 
 0.169398   0.066748   0.379263  -0.370896  -0.250928  -0.437742  -0.118876   0.645547 
 0.110466   0.209999   0.326172   0.103889   0.123889   0.783749   0.136729   0.422151 
-0.104180  -0.116803  -0.608893  -0.361196  -0.518578   0.358588  -0.196926   0.194939 
 0.378676   0.302345  -0.023872  -0.680679   0.387809   0.109714  -0.193866  -0.318246 
-0.084033   0.817684  -0.351129   0.104907  -0.057308  -0.193755   0.367770   0.118133 
-0.418374   0.003169  -0.263900   0.056836   0.620621  -0.077634  -0.444729   0.403855 
 0.789095  -0.120198  -0.375779   0.381694   0.108631  -0.083484  -0.114602   0.209948 
```

ipad设备：

```
-0.188080  -0.329016  -0.541892   0.066310   0.206281  -0.231312   0.263823  -0.626635 
-0.043405   0.132373  -0.026365   0.363429   0.238327   0.861865   0.117671  -0.185366 
-0.061033   0.293438   0.013891   0.331374  -0.284734  -0.111909  -0.702862  -0.461036 
-0.104180  -0.116803  -0.608893  -0.361196  -0.518578   0.358588  -0.196926   0.194939 
 0.378676   0.302345  -0.023872  -0.680679   0.387809   0.109714  -0.193866  -0.318246 
-0.084033   0.817684  -0.351129   0.104907  -0.057308  -0.193755   0.367770   0.118133 
-0.418374   0.003169  -0.263900   0.056836   0.620621  -0.077634  -0.444729   0.403855 
 0.789095  -0.120198  -0.375779   0.381694   0.108631  -0.083484  -0.114602   0.209948 
```

前三个元素根本不一样，但其他五个元素完全相同。有人可以帮我吗？我试图弄清楚很多天。非常感谢。

添加使用 dsyevd_ 计算特征向量的代码

```
__CLPK_integer n = N, lda = LDA, info, lwork, liwork, iwkopt;
__CLPK_integer* iwork;
double wkopt;
double* work;
double s[N];
printf( " DSYEVD Example Program Results\n" );
lwork = -1;
liwork = -1;
dsyevd_( "Vectors", "U", &n, v, &lda, s, &wkopt, &lwork, &iwkopt, &liwork, &info );
lwork = (int)wkopt;
work = (double*)malloc( lwork*sizeof(double) );
liwork = iwkopt;
iwork = (__CLPK_integer*)malloc( liwork*sizeof(int) );
dsyevd_( "Vectors", "U", &n, v, &lda, s, work, &lwork, iwork, &liwork, &info );
if( info > 0 ) {
    printf( "The algorithm failed to compute eigenvalues.\n" );
    exit( 1 );
} 
```

# php - Drupal 6 表单迭代通过数据库查询

> ID：14617559
> 
> 赞同：0
> 
> 时间：2013-01-31T02:38:13.417
> 
> 标签：php, mysql, drupal, foreach, drupal-6

我正在尝试对从数据库查询中提取的数组运行 foreach，但由于某种原因它无法正常工作。这是一个简单的语法错误还是其他什么？

```
 global $user
  $ras = db_query("SELECT * FROM {table} WHERE id='%s'", $user->name); 
  $sas = db_fetch_array($ras);  
  $arr = array("one",2,3,"four",5);

  $form['questionnaire'] = array (
    '#type'=>'fieldset', 
    '#title'=> 'test', );

  foreach ($arr as $id => $value){ 
  $form['questionnaire']['fill'.$id] = array(
    '#type'=>'textfield',
    '#title'=> $value,
  );
  } 
```

但是，以下方法不起作用：

```
 foreach ($sas as $id => $value){ 
  $form['questionnaire']['fill'.$id] = array(
    '#type'=>'textfield',
    '#title'=> $value,
  );
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:07:54.057

除非您的查询返回一个结果，我怀疑这是因为您期望一个结果数组，否则您的语法会丢失一些东西。`db_fetch_array`只会获取一行。所以你需要做这样的事情。

```
$form['questionnaire'] = array(
  '#type' => 'fieldset',
  '#title' => 'test',
);

global $user;
$result = db_query("SELECT * FROM {table} WHERE id='%s'", $user->name);

// Remember that $row is an array where the key names map the column names in your table
// So if you have a column 'id' and another one 'value' you can access the
// value for one row like this $row['id] and $row['value']
while ($row = db_fetch_array($result)) {
  $form['questionnaire']['fill' . $row['id']] = array(
    '#type' => 'textfield',
    '#title' => $row['column_name'],
  );
} 
```

**07.02.2013 更新**：使用`foreach()`循环而不是`while()`

```
foreach (db_fetch_array ($row) as $row) {
    echo $row['name'];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T15:15:00.587

语法看起来正确，但显而易见的答案是查询没有返回任何数据。您是否可能忘记了全局 $user？开发模块可以帮助解决这个问题。

# c++ - 如何在多线程程序中安全地销毁共享对象？

> ID：14617560
> 
> 赞同：1
> 
> 时间：2013-01-31T02:38:13.410
> 
> 标签：c++

我设计了一些类。就像这样：

1.  该类`ClientEntity`可以有多个实例。
2.  创建`ClientEntity`对象时，它不会被修改，所以我不使用互斥锁。
3.  `ClientEntity`对象可以在不同的线程之间访问。
4.  `ClientEntity`对象在收到一些退出命令时将被销毁。
5.  `ClientEntity`某些线程可能会访问对象。

**我怎样才能安全地销毁这个对象？**

```
class ClientEntity
{
public:
    conference_info & conf_info (){return conf_info_;}
    void conf_info(const conference_info &ci){conf_info_ = ci;}

    user_info & usr_info(){return usr_info_;}
    void usr_info(const user_info &ui){usr_info_ = ui;}

private:
    web_conf_info *wci_;
    user_info usr_info_;
    conference_info conf_info_;

    // .....
};

class user_info
{
public:
    user_info & operator = (const user_info &ui)
    {   
        if (this != &ui){
            user_id = ui.user_id;
            user_name = ui.user_name;
            user_role = ui.user_role;
        }   

        return *this;
    }   
public:
    int user_id;
    int user_role;
    std::string user_name;
};

class conference_info
{
public:
    conference_info & operator = (const conference_info &conf)
    {   
        if (this != &conf){
            conf_id = conf.conf_id;
            dtsip_list = conf.dtsip_list;
            ctsip_list = conf.ctsip_list;
        }   

        return *this;
    }
public:
    int conf_id;
    std::list<std::string> dtsip_list;
    std::list<std::string> ctsip_list;
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T02:47:49.703

确定您可以（或不能）删除共享对象的典型方法是使用引用计数 - 通过使用“共享指针”或作为类本身中您自己的逻辑的一部分。您必须有某种由客户端代码使用的函数来表示“我想使用这个对象”，这会增加引用计数。当客户端完成时，它会调用“我不再对这个对象感兴趣”并且引用计数倒计时。如果引用计数变为零（并且由于其他原因不需要该对象），则可以将其删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T03:02:14.337

我使用了自己的类来进行引用计数。我搜索了一下，发现这个可以用：

[使用 shared_ptr 的示例？](https://stackoverflow.com/questions/3476938/example-to-use-shared-ptr)

[http://www.boost.org/doc/libs/1_52_0/libs/smart_ptr/shared_ptr.htm](http://www.boost.org/doc/libs/1_52_0/libs/smart_ptr/shared_ptr.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T02:54:55.883

我建议在创建`ClientEntity`对象时，你应该确保它被另一个对象正确拥有，比如一个全局对象，当全局对象被销毁时，删除`ClientEntity`.

当然你可以`ClientEntity`在多个线程之间随时删除，但是当你试图删除时`ClientEntity`，使用像临界区这样的同步对象。

访问的其他线程也`ClientEntity`应该使用临界区等，以防止对象在使用时被删除。

# jquery - 是否有不包括所有后代的 jQuery().text() 等价物？

> ID：14617564
> 
> 赞同：1
> 
> 时间：2013-01-31T02:38:24.990
> 
> 标签：jquery

例如，给定以下 HTML：

```
<a id="test" href="#">Text of A <span>(span text)</span></a> 
```

然后`jQuery('#test').text()`将返回`'Text of A (span text)'`，有没有办法获得`'Text of A '`（标签内的文本`<a>`而不是它的后代`<span>`标签）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T02:42:04.620

这是一个可以解决您的问题的对话的链接： [jQuery 不支持选择顶级节点文本？](https://stackoverflow.com/questions/2020931/select-top-level-nodetext-is-not-supported-with-jquery)

这是一段摘录：

```
$("#hello").clone().children().remove().end().text(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T04:16:40.950

通过制作一个简单的插件，这是一种可重用的方法：

**插入**

```
(function ($) {
    $.fn.directText = function () {
        var o = "";
        this.each(function () {
            var nodes = this.childNodes;
            for (var i = 0; i <= nodes.length - 1; i++) {
                if (nodes[i].nodeType == 3) o += nodes[i].nodeValue;
            }
        });
        return $.trim(o);
    };
})(jQuery); 
```

**用法**

```
$("#myElement").directText(); 
```

## *演示 ==>* [http://jsfiddle.net/ChrisMBarr/8X9LC/](http://jsfiddle.net/ChrisMBarr/8X9LC/)

# javascript - JQuery 添加到

> ID：14617565
> 
> 赞同：0
> 
> 时间：2013-01-31T02:38:31.193
> 
> 标签：javascript, jquery, dom

> **可能重复：**
> [将类添加到指定元素](https://stackoverflow.com/questions/11597489/add-class-to-the-specified-element)

假设我加载了一个代码中包含此内容的网站：

```
<span id="test"> 
```

假设我想创建一个 jQuery 脚本来查找特定的代码行并添加`class="voila"`，因此结果变为：

```
<span id="test" class="voila"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T02:40:25.100

```
$("#test").addClass('voila'); 
```

文档：[http ://api.jquery.com/addClass/](http://api.jquery.com/addClass/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T02:40:12.940

像这样：

```
$('span#test').addClass('voila'); 
```

`$('span#test')`这部分找到那行代码并 addClass('voila') 将类 voila 添加到跨度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T02:45:53.380

您必须使用 JQuery 将类添加到相应的跨度

```
 $("#test").addClass('voila'); 
```

`$("#test")`从`DOM`and`addClass()`方法中找到匹配的元素，将所需的类添加到匹配的元素或匹配的元素集合中。

如果你有另一个类`"bingo"`，并且你想将两个类都添加到跨度中，那么添加由空格分隔的类，你就完成了。

```
$("#test").addClass("voila bingo"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T03:53:23.667

添加类

```
$('#test').addClass('voila'); 
```

删除类

```
$('#test').removeClass('voila'); 
```

和切换类

```
$('#test').toggleClass('voila'); 
```

# python - 检查集合的任何成员是否以 Python 中的给定前缀字符串开头

> ID：14617569
> 
> 赞同：3
> 
> 时间：2013-01-31T02:38:47.620
> 
> 标签：python, set

在 Python 中，我有一个`set`文件名和一个给定的目录名（在循环中）。

集合中的文件名和给定的目录名都在同一个命名空间中，例如，我只是想看看**集合中是否有任何以给定字符串**/前缀开头的成员字符串。

什么是 Python 方法来查看集合中的任何文件名是否以给定的目录前缀开头？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T02:39:38.607

您可以使用内置[`any`](http://docs.python.org/2/library/functions.html#any)函数：

```
any(x.startswith(prefix) for x in your_set) 
```

这为您提供了一个简单的`True`或`False`-- 取决于是否有任何项目符合标准。如果您想知道哪个元素符合您的条件，那么您需要[`next`](http://docs.python.org/2/library/functions.html#next)：

```
next((x for x in your_set if x.startswith(prefix)),None) 
```

当然，这只返回符合您条件的 1 个元素——如果您需要所有这些元素，请查看[jsbueno 的答案](https://stackoverflow.com/a/14617595/748858)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T02:41:43.930

您必须遍历所有 set 元素 - 您只需执行以下操作即可获得这些名称的 lsit：

```
results = [element for element in your_set if element.startswith(your_prefix)] 
```

但是通过这样做，您会失去对元素的快速访问集 - 因为它是使用它存储的 strigns 的哈希来完成的。因此，没有使用纯集合的快速方法来快速检查其元素中的子字符串。

# ios - 目标 C：从网站获取实时信息到应用程序

> ID：14617571
> 
> 赞同：-1
> 
> 时间：2013-01-31T02:38:55.623
> 
> 标签：ios, objective-c, uiwebview

我正在尝试探索和拓宽我在为 iOS 开发应用程序方面的知识。现在，我正计划制作一个包含在线内容的应用程序，这是我第一次做这样的事情，因为我真的很喜欢离线应用程序。

我打算做的应用程序将向应用程序显示网站的“新功能”提要。我将如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T03:25:15.133

如果网站以 RSS、XML 或 JSON 的形式提供此提要，则非常简单。Foundation API 中有专门的类用于解析这些格式化数据（例如`NSXMLParser`或`NSJSONSerialization`）。RSS 是最有可能的选项，要解析这种类型的提要，您可以使用任何 XML 解析器，因为 RSS 只是某种模式的 XML）。这可能是`NSXMLParser`，但不一定。很多人觉得`NSXMLParser`难以理解，所以我建议使用基于 DOM 的解析器，例如[TBXML](http://www.tbxml.co.uk/TBXML/TBXML_Free.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T03:38:39.207

一个好的起点是查看[iOS SDK 文档](https://developer.apple.com/library/ios/navigation/index.html)中的几个示例代码：SeismicXML、LazyTableImages、TopSongs。

SeismicXML 从美国地质调查局读取 XML 提要数据。

LazyTableImages 展示了如何将下载的提要数据异步更新到表格视图中，从而在从网络下载内容时保证最大化的 UI 响应能力。

TopSongs 展示了如何使用 libxml 解析 XML 并将提要数据与 Core Data 存储集成。

# ios - 将信息推送到 TabBar 而不是 UINavigationController

> ID：14617575
> 
> 赞同：0
> 
> 时间：2013-01-31T02:39:09.507
> 
> 标签：ios, objective-c, uinavigationcontroller, uitabbarcontroller

当我通过 NavigationController 推送文件时，我可以下载文件并查看 ViewController 上的进度。但是我想在另一个 tabBar 上显示下载，因为我的模型是基于它的。

问题：当我选择查看有问题的 TabBar 时，我什么也得不到。

我试过了：`self.tabBarController.selectedIndex = 3;`但这显然只显示 ViewController 而不会将信息推送到它上面。

知道我需要如何更改底部代码以获得我想要的结果吗？

```
ASIHTTPRequest *request = [[ASIHTTPRequest alloc] initWithURL:url];
NSMutableDictionary *dictionary = [NSMutableDictionary dictionary];
[request setUserInfo:dictionary];
[downloadTableViewObj setDownloadDirectory:path];
[downloadTableViewObj addDownloadRequest:request];

[self.navigationController pushViewController:downloadTableViewObj animated:YES]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T02:53:41.500

我不确定您的架构，但`UITabBarController`有如下方法：

> viewControllers
> 标签栏界面显示的根视图控制器数组。
> @property(nonatomic, copy) NSArray *viewControllers

您可以在要向其发送消息的索引处访问正确的视图控制器，在 tabBar 更改其选择之前或之后。

另请注意，`UITabBarController`可以有一个`delegate`实现`UITabBarControllerDelegate`协议。这在某些情况下可能很有用，但我认为你的不是一个很好的候选人。

* * *

```
NSArray *ar = self.tabBarController.viewControllers;  
UINavigationController *nav = (UINavigationController *)ar[3];   
self.tabBarController.selectedIndex = 3;
[nav pushViewController:downloadTableViewObj animated:YES]; 
```

我没有尝试过那个特定的代码，但是具有这种逻辑的东西应该可以工作。

# qt - QAbstractItemModel——被重置？QItemDelegate::paint() 被频繁调用

> ID：14617583
> 
> 赞同：0
> 
> 时间：2013-01-31T02:40:05.393
> 
> 标签：qt, paint, qabstractitemmodel, qitemdelegate, qsortfilterproxymodel

这真让我抓狂。我有一个 QAbstractItemModel、QSortFilterProxyModel 和一个 QStyledItemDelegate。都是子类。在发出以下 dataChanged() 之后，应该只为这两个索引（0,0 和 0,1）调用 QStyledItemDelegate::paint()。但是，我已经确认所有可见单元格都调用了它。

```
void my_model_t::emit_data_changed()
{
    QModelIndex start_ix    = createIndex( 0, 0 );
    QModelIndex end_ix  = createIndex( 0, 1 );
    emit( dataChanged( start_ix, end_ix ) );
} 
```

可以肯定的是，我已经将一个插槽连接到我的模型和代理的 modelReset() 和 layoutChanged() 信号。它做了一个简单的 printf()。但是，它永远不会被调用。我很确定我没有对视图或委托做任何时髦的事情。但是，也不完全确定在哪里看。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T05:34:16.373

来自 Qt 论坛的双重帖子：

我稍微挖掘了调用堆栈，并开始捕获更多插槽。我正在捕捉我的 QTableView 的 dataChanged() 和 paintEvent() 的。基本上 QTableView::dataChanged() 正在破坏坐标。

它的行为显然符合预期。如果你问我，这绝对是可耻的文件。QAbstractItemModel::dataChanged() 信号和 QAbstractItemView::dataChanged() 插槽中缺少一个巨大的星号。

希望没有其他人有这个问题，如果他们有，他们可以找到这个线程。

[http://qt-project.org/forums/viewthread/14723](http://qt-project.org/forums/viewthread/14723)

# html - div 垂直浮动

> ID：14617584
> 
> 赞同：0
> 
> 时间：2013-01-31T02:40:07.743
> 
> 标签：html, css

我有以下内容：

```
<!-- BLUE BOX --!>
<div style="width:100%;position:relative;min-height:100%">
   <div style="position:absolute;left:1px;top:15px;">
            IMAGE GOES HERE
    </div>
    <div style="position:absolute;left:20px;top:0;background-color:#2b5797; color:#fff;width:80%;min-height:40px;border-radius:5px;padding:10px;">
            messages go here
    </div>
</div>
<!-- PINK BOX --!>
<div style="width:100%;position:relative;min-height:100%">
     <div style="position:absolute;right:1px;top:15px;">
       IMAGE HERE
      </div>
      <div style="position:absolute;right:20px;top:0;background-color:#b91d47; color:#fff;width:80%;border-radius:5px;padding:10px;min-height:40px">
            messages go here
      </div>
</div> 
```

这是 HTML 输出的图像： ![1](../Images/c141b2d8cfb25b708f42699b01cfbcae.png)

请帮助我按垂直顺序获取这些 div，我不希望它们相互浮动，我希望消息 div 也根据内容获得自动高度。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T02:48:55.393

您应该为此使用浮点数。float:left ， float:right 和 clear:both 介于两者之间：

```
<div style="width:100%;position:relative;min-height:100%;float:left">
    <div style="float:left">img</div>
    <div style="float:left;background-color:#2b5797; color:#fff;width:80%;min-height:40px;border-radius:5px;padding:10px;">First messages go here</div>
</div>
<div style="clear:both;width:100%;position:relative;min-height:100%">
    <div style="float:right">img</div>
    <div style="float:right;background-color:#b91d47; color:#fff;width:80%;border-radius:5px;padding:10px;min-height:40px">messages go here</div>
</div> 
```

你可以在这里看到它的实际效果：[jsfiddle](http://jsfiddle.net/basarat/y44NC/1/) ![来自 jsFiddle 的屏幕截图](../Images/06e747abb7dde59e93004c1539d1cd1d.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T02:45:40.263

从您的消息 DIV 中删除**绝对位置。**像这样写：

```
<div style="position:relative;">
   <div style="position:absolute;left:1px;top:15px;">
            IMAGE GOES HERE
    </div>
    <div style="margin-left:20px;margin-right:20%;background-color:#2b5797; color:#fff;min-height:40px;border-radius:5px;padding:10px;">
            messages go here
    </div>
</div>

<div style="position:relative;">
     <div style="position:absolute;right:1px;top:15px;">
       IMAGE HERE
      </div>
      <div style="margin-right:20px;margin-left:20%;background-color:#b91d47; color:#fff;border-radius:5px;padding:10px;min-height:40px">
            messages go here
      </div>
</div> 
```

检查这个[http://jsfiddle.net/y44NC/2/](http://jsfiddle.net/y44NC/2/)

# instagram - 通过脚本/在线/程序发布到 Instagram。什么都好，但手机

> ID：14617586
> 
> 赞同：4
> 
> 时间：2013-01-31T02:40:19.800
> 
> 标签：instagram

我只是想知道是否有一种方法可以在不使用 iOS / Android 的情况下将图像上传到 Instagram？

我真的很想找到一个解决方案，如果我找不到任何东西，我将不得不运行一个虚拟 android 设备或类似的东西（我有一个运行 Windows XP 24/7 的虚拟机）！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T02:53:58.623

Instagram 的官方 RESTful API 不允许上传照片，因为他们希望鼓励“生活在路上”。

然而，一些工作已经放在一起记录他们的 iPhone API，甚至还制作了一些非官方的客户端库。查看[https://github.com/mislav/instagram/wiki](https://github.com/mislav/instagram/wiki)

看来这是您目前唯一的选择。没有一个非官方库看起来很完整，因此您必须使用 wiki 中提供的逆向工程 API 规范手动发送请求。

# google-maps - Google Maps 和 RouteBoxer 不会显示多边形线

> ID：14617590
> 
> 赞同：0
> 
> 时间：2013-01-31T02:41:06.957
> 
> 标签：google-maps, google-maps-api-3, polygons

提前感谢您提供的任何帮助！我在 Google Maps API V3 中使用 RouteBoxer，但由于某种原因，我无法让线条出现。我担心该功能根本没有运行，这对于我的项目的下一步是必要的：传递 lat 和 long 以找到沿途的 pois。查看地图上的线条将帮助我确保它运行正常。

这是我的代码

```
<script>
        var directionsDisplay;
        var directionsService = new google.maps.DirectionsService();
        var map;
        var routeBoxer = null;
        var boxpolys = null;
        var rdistance = 20; // km

        function initialize() {
          //directionspanelstuff
          //directionsdisplaystuff
          //mapoptions
          map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
          directionsDisplay.setMap(map);
          routeBoxer = new RouteBoxer();
        }

        function calcRoute() {
          //startendwaypoints

          directionsService.route(request, function(response, status) {
            if (status == google.maps.DirectionsStatus.OK) {
              directionsDisplay.setDirections(response);
              var route = response.routes[0];
              var summaryPanel = document.getElementById("directions_panel");

              // Box the overview path of the first route
                var path = result.routes[0].overview_path;
                var boxes = routeBoxer.box(path, rdistance);
                clearBoxes();
                drawBoxes(boxes);

                for (var i = 0; i < boxes.length; i++) {
                  var bounds = box[i];
                  // Perform search over this bounds 
                }
            }
          });
        }

        // Draw the array of boxes as polylines on the map
        function drawBoxes(boxes) {
          boxpolys = new Array(boxes.length);
          for (var i = 0; i < boxes.length; i++) {
            boxpolys[i] = new google.maps.Rectangle({
              bounds: boxes[i],
              fillOpacity: 0,
              strokeOpacity: 1.0,
              strokeColor: '#000000',
              strokeWeight: 1,
              map: map
            });
          }
        }

        // Clear boxes currently on the map
        function clearBoxes() {
          if (boxpolys != null) {
            for (var i = 0; i < boxpolys.length; i++) {
              boxpolys[i].setMap(null);
            }
          }
          boxpolys = null;
        }
    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T04:06:29.783

javascript 控制台指出了 4 个 javascript 错误：

1.  mapOptions 未定义（可能不是真正的问题）
2.  方向显示为空（未初始化）
3.  结果未定义（错字，或剪切和粘贴错误）
4.  框未定义（错字）

[工作示例](http://www.geocodezip.com/v3_simpleMap_routeBoxer.html)

**代码片段：**

```
var directionsDisplay;
var directionsService = new google.maps.DirectionsService();
var map;
var routeBoxer = null;
var boxpolys = null;
var rdistance = 20; // km

function initialize() {
  //directionspanelstuff
  //directionsdisplaystuff
  //mapoptions
  map = new google.maps.Map(document.getElementById("map_canvas"), {
    zoom: 10,
    center: new google.maps.LatLng(41.084951, 29.016048),
    mapTypeId: google.maps.MapTypeId.ROADMAP
  });
  directionsDisplay = new google.maps.DirectionsRenderer();
  directionsDisplay.setMap(map);
  routeBoxer = new RouteBoxer();
  calcRoute();
}

function calcRoute() {
  var start = document.getElementById('start').value;
  var end = document.getElementById('end').value;
  var request = {
    origin: start,
    destination: end,
    travelMode: google.maps.DirectionsTravelMode.DRIVING
  };
  //startendwaypoints

  directionsService.route(request, function(response, status) {
    if (status == google.maps.DirectionsStatus.OK) {
      directionsDisplay.setDirections(response);
      var route = response.routes[0];
      var summaryPanel = document.getElementById("directions_panel");

      // Box the overview path of the first route
      var path = response.routes[0].overview_path;
      var boxes = routeBoxer.box(path, rdistance);
      clearBoxes();
      drawBoxes(boxes);

      for (var i = 0; i < boxes.length; i++) {
        var bounds = boxes[i];
        // Perform search over this bounds 
      }
    }
  });
}

// Draw the array of boxes as polylines on the map
function drawBoxes(boxes) {
  boxpolys = new Array(boxes.length);
  for (var i = 0; i < boxes.length; i++) {
    boxpolys[i] = new google.maps.Rectangle({
      bounds: boxes[i],
      fillOpacity: 0,
      strokeOpacity: 1.0,
      strokeColor: '#000000',
      strokeWeight: 1,
      map: map
    });
  }
}

// Clear boxes currently on the map
function clearBoxes() {
  if (boxpolys != null) {
    for (var i = 0; i < boxpolys.length; i++) {
      boxpolys[i].setMap(null);
    }
  }
  boxpolys = null;
}
google.maps.event.addDomListener(window, 'load', initialize);
```

```
html,
body,
#map_canvas {
  margin: 0;
  padding: 0;
  height: 100%;
}
```

```
<script src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
<script src="https://cdn.rawgit.com/googlemaps/v3-utility-library/master/routeboxer/src/RouteBoxer.js"></script>
<input id="start" type="text" onchange="calcRoute();" value="chicago, il"></input>

<input id="end" type="text" onchange="calcRoute();" value="st louis, mo"></input>

<div id="map_canvas" style="height: 400px; width:500px;"></div>
<div id="info"></div>
```

# bash - 更新原始文本文件中的数据记录

> ID：14617593
> 
> 赞同：0
> 
> 时间：2013-01-31T02:41:43.020
> 
> 标签：bash

我有一个仅包含 10 条记录的原始文本文件。

```
1|word01
2|word02
3|word03
4|word04
5|word05
6|word06
7|word07
8|word08
9|word09
10|word10 
```

如果添加一条显然不存在的新记录“word11”，它将保持在顶部，并且所有行都将被重新索引。由于该文件应仅存储 10 条记录，因此将删除最后一条。输出如下：

```
1|word11
2|word01
3|word02
4|word03
5|word04
6|word05
7|word06
8|word07
9|word08
10|word09 
```

如果添加一个已经存在的新记录，那么它应该被排序到顶部并重新索引所有。

```
1|word04
2|word11
3|word01
4|word02
5|word03
6|word05
7|word06
8|word07
9|word08
10|word09 
```

如何在脚本中实现这种操作？任何提示或帮助真的很感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T03:01:57.373

```
#!/bin/sh

usage ()
{
  echo usage: $0 RECORD FILE
  exit
}

[ $2 ] || usage
record=1
# print new record
echo "$record|$1" > k

# print other records
while IFS='|' read index value
do
  if [ ${value%$1} ]
  then
    (( record++ ))
    echo "$record|$value" >> k
  fi
done < "$2"

# trim to 10
head k > "$2"
rm k 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T03:30:26.060

```
#!/bin/bash
# command usage: cmd FILENAME NEWWORD
sed -i -e 's/[0-9]\+|\(.\+\)/\1/g' -e "/$2/d" $1
echo $2 > $1.tmp
cat $1 >> $1.tmp
nl -s '|' $1.tmp | head -10 | tr -d '[:blank:]' > $1 
```

# wordpress - htaccess 强制 ssl，RSS 提要除外

> ID：14617597
> 
> 赞同：0
> 
> 时间：2013-01-31T02:42:01.093
> 
> 标签：wordpress, apache, .htaccess, rss

我的网站目前在所有地方都强制使用 SSL。这是我想要的方式，只是它会导致我的 RSS 驱动的时事通讯和 feedburner 出现问题。因此，我需要对我的提要进行例外处理。

有人可以帮助制定正确的 htaccess 规则来解决这个问题吗？

我的提要是

```
/feed
/shop/feed
/forum/discussions/feed.rss 
```

这是我强制 SSL 的条件。除了强制所有 RSS 提要之外，此方法有效。

```
# Force SSL
RewriteCond %{SERVER_PORT} 80
RewriteCond %{REQUEST_URI} !^/forum [NC]
RewriteRule ^/?(.*)$ https://photoboothowners.com/$1 [R=301,QSA,L,NE] 
```

我尝试了以下方法，但似乎无法正常工作。

```
# Force SSL
RewriteCond %{SERVER_PORT} 80
RewriteCond %{REQUEST_URI} !^/forum [OR]
RewriteCond %{REQUEST_URI} !^/feed [OR]
RewriteCond %{REQUEST_URI} !^/shop/forum [NC]
RewriteRule ^/?(.*)$ https://photoboothowners.com/$1 [R=301,QSA,L,NE] 
```

非常感谢您的帮助！

* * *

更新：这是我服务器根目录中的当前 .htaccess 文件。这目前正在将[http://photoboothowners.com/feed](http://photoboothowners.com/feed)重定向到[https://photoboothowners.com](https://photoboothowners.com)（注意它正在删除 feed 目录）。

```
RewriteEngine on

# Use PHP5CGI as default
AddHandler fcgid-script .php

RewriteCond %{HTTP_HOST} ^buyaphotobooth\.net$ [OR]
RewriteCond %{HTTP_HOST} ^www\.buyaphotobooth\.net$
RewriteRule ^/?$ "https\:\/\/photoboothowners\.com\/starting\-a\-photo\-booth\-business\-build\-or\-buy" [R=301,L]

RewriteCond %{HTTP_HOST} ^photoboothforums\.com$ [OR]
RewriteCond %{HTTP_HOST} ^www\.photoboothforums\.com$
RewriteRule ^/?$ "https\:\/\/photoboothowners\.com\/forum" [R=301,L]

# Force SSL
RewriteCond %{HTTPS} !=on
RewriteCond %{REQUEST_URI} !^/forum [NC]
RewriteCond %{REQUEST_URI} !feed   [NC]
RewriteRule ^/?(.*)$ https://photoboothowners.com/$1 [R=301,QSA,L,NE]

RewriteCond %{HTTP_HOST} ^photoboothowners\.com$ [OR]
RewriteCond %{HTTP_HOST} ^www\.photoboothowners\.com$
RewriteRule ^how\-to\-use\-our\-premium\-print\-designs\-in\-breeze\-dslr\-remote\-pro\/?(.*)$ "https\:\/\/photoboothowners\.com\/how\-to\-use\-our\-photo\-booth\-template\-designs\-in\-breeze\-dslr\-remote\-pro$1" [R=301,L]

RewriteOptions inherit

# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress

RewriteCond %{HTTP_HOST} ^.*$
RewriteRule ^shop\/photo\-booth\-layouts\-and\-samples\.html$ "https\:\/\/photoboothowners\.com\/shop" [R=301,L]

<Files 403.shtml>
order allow,deny
allow from all
</Files> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T03:00:40.093

您的规则正在使用`OR`，因此它们读作：

`if server port is 80 and the request is not forum OR it is not feed OR it is not shop/forum`

这将匹配一切。摆脱这两个，`[OR]`以便匹配显示：

`if server port is 80 and the request is not forum AND it is not feed AND it is not shop/forum`

编辑：

根据您更新的问题，以下行缺少斜杠：

`RewriteCond %{REQUEST_URI} !feed [NC]`

应该

`RewriteCond %{REQUEST_URI} !/feed [NC]`

# jquery - 通过单击排序列表更改 div 中的图像？

> ID：14617599
> 
> 赞同：1
> 
> 时间：2013-01-31T02:42:10.577
> 
> 标签：jquery, html, image

我正在做一个包含大量 PHP、Jquery 的爱好 HTML 项目。我终于让我的分类工作了： [http](http://www.spisbilligt.nu/) ://www.spisbilligt.nu/ 。
现在，当我对列表进行排序并单击其余按钮之一时，我需要更改图片。

我在这里得到了我的代码：http: [//jsfiddle.net/6qNAt/1/](http://jsfiddle.net/6qNAt/1/)

```
 var itemInfo = { // Initialise the item information
  item1: ['item1.jpg', 'Description of item 1...'],
  item2: ['item2.jpg', 'Description of item 2...'],
  ...
  };

(function() {
  ('#items a').click(function() { // When an item is selected
        var id = $(this).attr('href').replace(/#/, ''); // Retrieve its ID
        ('#info img').attr('src', itemInfo[id][0]); // Set the image
        ('#info p').text(itemInfo[id][1]); // And text
        return false; // Prevent default behaviour
     }); 
```

});

要了解我的意思并感到饥饿，请看这里并查看纸杯蛋糕： [http ://www.georgetowncupcake.com/menu.html](http://www.georgetowncupcake.com/menu.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T02:57:56.090

我鼓励您将数据移动到`data-*`列表项本身的属性中：

```
<!-- Storing data on the element is cleaner, and more manageable -->
<ul id="items">
    <li data-src="pie_1.png" data-desc="Desc Item 1">Item 1</li>
    <li data-src="pie_2.png" data-desc="Desc Item 2">Item 2</li>
</ul> 
```

然后使用 event-delegation 来监听任何点击：

```
// Event Delegation is more efficient than many handlers
$("#items").on("click", "li", function () {

}); 
```

最后，将数据属性值设置为信息区域中的图像和文本：

```
$("#items").on("click", "li", function () {
    // Get the data from the clicked list item
    var data = $(this).data();
    // Use the data for our info elements
    $("#info")
        .find("img").attr("src", data.src).end()
        .find("p").html(data.desc);
}); 
```

小提琴：http: [//jsfiddle.net/6qNAt/3/](http://jsfiddle.net/6qNAt/3/)

# python - 在 Python 中实现 ngram

> ID：14617601
> 
> 赞同：0
> 
> 时间：2013-01-31T02:42:19.587
> 
> 标签：python

在 Python 中创建一个基本的 ngram 实现是一项个人挑战。从一元组开始到三元组：

```
def unigrams(text):
    uni = []
    for token in text:
        uni.append([token])
    return uni

def bigrams(text):
    bi = []
    token_address = 0
    for token in text[:len(text) - 1]:
        bi.append([token, text[token_address + 1]])
        token_address += 1
    return bi

def trigrams(text):
    tri = []
    token_address = 0
    for token in text[:len(text) - 2]:
        tri.append([token, text[token_address + 1], text[token_address + 2]])
        token_address += 1
    return tri 
```

现在有趣的部分，推广到 n-gram。概括我在这里的方法的主要问题是创建进入 append 方法的长度为 n 的列表。我最初认为 lambdas 可能是一种方法，但我不知道如何。

此外，我正在研究的其他实现采取了完全不同的策略（不足为奇），例如[here](https://stackoverflow.com/questions/2380394/simple-implementation-of-n-gram-tf-idf-and-cosine-similarity-in-python)和[here](https://stackoverflow.com/questions/7591258/fast-n-gram-calculation)，所以我开始怀疑我是否处于死胡同。

在我放弃这种方法之前，我很好奇：1）是否有一种以这种方式创建任意列表大小的单行或 Pythonic 方法？2）以这种方式解决问题的缺点是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T03:05:05.043

以下函数应该适用于一般的 n-gram 模型。

```
def ngram(text,grams):  
    model=[]
    # model will contain n-gram strings
    count=0
    for token in text[:len(text)-grams+1]:  
       model.append(text[count:count+grams])  
       count=count+1  
    return model 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-27T17:47:10.627

作为一个方便的单线：

```
def retrieve_ngrams(txt, n):
    return [txt[i:i+n] for i in range(len(txt)-(n-1))] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-16T10:38:15.307

尝试这个。

```
 def get_ngrams(wordlist,n):
      ngrams = []
      for i in range(len(wordlist)-(n-1)):
          ngrams.append(wordlist[i:i+n])
      return ngrams 
```

# java - 在 Python 和 Java 上使用括号会导致小数错误

> ID：14617604
> 
> 赞同：1
> 
> 时间：2013-01-31T02:42:53.543
> 
> 标签：java, math, python-2.7, rounding, parentheses

我最近在调试一个程序，该程序始终返回错误，只差几个小数点。事实证明，错误就在我认为我不需要检查的那一行：`999999 * (.18 / 12)`。

我知道括号不是必需的，因为从数学上讲，无论它们是否存在，表达式都应该评估为相同的答案，但我只是为了清楚起见将它们包括在内。然而，当我将语句输入 Python 解释器时，它返回`14999.98499999999`了 ，而正确的答案应该是`14999.985`. 当我删除括号并输入`999999 * .18 / 12`时，我得到了正确答案 ( `14999.985`)。只是为了确保它不仅仅是 Python 的东西，我也用 Java 尝试过，同样的答案。

为什么是这样？我知道计算机不能将分数存储为精确值，因此可以预料到一定程度的错误，但是计算机评估这两个语句的方式有什么区别？

TL；DR：给我一个与数学上`999999 * (.18 / 12)`不同的答案，它们都应该评估为. 为什么？`999999 * .18 / 12``14999.985`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T03:21:54.870

你最好在除法之前做一个乘法。由于与乘法期间发生的溢出相比，除法被正确表示的可能性较小。

# r - 连接一组线，另一组颜色

> ID：14617607
> 
> 赞同：2
> 
> 时间：2013-01-31T02:43:18.537
> 
> 标签：r, lattice

我的数据以两个变量为条件，一个主要条件，一个次要条件。我想要一个带有点和线 ( `xyplot`)的 ( )，在一个面板中，以便主要条件确定颜色，而次要条件用于绘制线条。`lattice``type='b'`

这是一个代表我的问题的示例（请参阅下面的代码以生成数据框）。 `d`是主要条件，`c`是次要条件。

```
> dat
     x          y c d
1    1  0.9645269 a A
2    2  1.4892217 a A
3    3  1.4848654 a A
....
10  10  2.4802803 a A
11   1  1.5606218 b A
12   2  1.5346806 b A
....
98   8  2.0381943 j B
99   9  2.0826099 j B
100 10  2.2799917 j B 
```

使连接线成为条件的`c`方法是`groups=c`在情节中使用。那么区分它们的方法是使用一个以 为条件的公式`d`：

```
xyplot(y~x|d, data=dat, type='b', groups=c) 
```

![在此处输入图像描述](../Images/398ae93e4e9f9d6ecf4d944e15b71e39.png)

但是，我想要在同一个面板中的情节。删除公式条件`d`会生成一个面板，但当`group=d`指定时，会绘制“回溯”线：

```
xyplot(y~x, data=dat, type='b', groups=d, auto.key=list(space='inside')) 
```

![在此处输入图像描述](../Images/6404b07c4a24fcc727009aa4cd49bf26.png)

我想要的看起来很像上面的情节，只是没有这些“回溯”线。

在此示例中可以显式设置颜色，因为我知道有五行类别“A”，然后是五行类别“B”，但这并不容易解决我的实际问题。此外，`auto.key`以这种方式设置颜色时也没用：

```
xyplot(y~x, data=dat, type='b', groups=c, col=rep(5:6, each=5)) 
```

![在此处输入图像描述](../Images/abf0eeffb0b48840647f1ff035ba6c08.png)

数据：

```
set.seed(1)
dat <- do.call(
  rbind,
  lapply(1:10,
         function(x) {
           firsthalf <- x < 6
           data.frame(x=1:10, y=log(1:10 + rnorm(10, .25) + 2 * firsthalf),
                                c=letters[x],
                                d=LETTERS[2-firsthalf]
                                )
         }
  )
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T15:20:42.593

默认图形参数是从`superpose.symbol`和获得的`superpose.line`。一种解决方案是使用`par.settings`参数设置它们。

```
## I compute the color by group 
col <-by(dat,dat$c,
                FUN=function(x){
                  v <- ifelse(x$d=='A','darkgreen','orange')
                  v[1]  ## I return one parameter , since I need one color
                  }
         )

 xyplot(y~x, data=dat, type='b', groups=c,
       auto.key = list(text =levels(dat$d),points=F),
       par.settings=
         list(superpose.line   = list(col = col),                 ## color of lines
              superpose.symbol = list(col=col),                   ## colors of points
              add.text = list(col=c('darkgreen','orange'))))      ## color of text in the legend 
```

![在此处输入图像描述](../Images/916d6aff14acfec7e81ec6d6c7c65567.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T08:03:20.320

必须是格子吗？在 ggplot 中相当简单：

```
library(ggplot2)

ggplot(dat, aes(x=x,y=y,colour=d)) + geom_line(aes(group=c),size=0.8) + geom_point(shape=1) 
```

这是一个快速而肮脏的例子。您可以自定义线条、图例、轴、背景的颜色...

![在此处输入图像描述](../Images/f2573a52180be31a267c253c7a343c16.png)

# javascript - 使用 javascript 在 HTML 中创建两个关联的下拉列表

> ID：14617614
> 
> 赞同：0
> 
> 时间：2013-01-31T02:43:55.210
> 
> 标签：javascript, html

我试图使用 javascript 在 HTML 中创建两个关联的下拉列表。这很有趣，但我遇到了障碍。希望有人可以在这里给出提示。保持简单，情况是第二个下拉列表的选项基于第一个下拉列表的选定值。因此，第二个下拉列表的选项将与第一个下拉列表的选定值不同。

我的想法是创建一个 javascript 函数来侦听第一个下拉列表的 onclick 操作并记录所选值。然后，第二个下拉列表可以取回存储的值并根据它显示相应的选项。但是，我不确定如何取回所选值，因为它属于第一个下拉列表的 javascript 函数。

# java - 检查一个节点在jsoup中有明文吗？

> ID：14617618
> 
> 赞同：3
> 
> 时间：2013-01-31T02:44:10.860
> 
> 标签：java, html, css, dom, jsoup

我知道 Element.hasText() 方法可以检查节点是否在 jsoup 上有文本但包含链接文本。我只是想检查它是否有纯文本？任何人都可以给我一些解决方案吗？非常感谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T13:52:51.907

您为此使用正则表达式，这是一个示例：

```
final String html = "<p><span>spantext</span></p>"; // p-tag with no own text, but a child which has one
Document doc = Jsoup.parse(html);

// Check if the 'p'-tag has own text
boolean hasText = doc.select("p").is("p:matchesOwn(^$)"); // --> true, p has no own text 
```

如果元素有一些文本，这将返回`false`：

```
final String html = "<p>owntext<span>spantext</span></p>";
Document doc = Jsoup.parse(html);

// Check if the 'p'-tag has own text
boolean hasText = doc.select("p").is("p:matchesOwn(^$)"); // --> false, p has some own text 
```

另一种解决方案：

```
public static boolean hasOwnText(Element element)
{
    return !element.ownText().isEmpty();
} 
```

使用上面的 html 和 doc：

```
boolean hasText = hasOwnText(doc.select("p").first()) 
```

# python - 如何理解这个python代码？

> ID：14617619
> 
> 赞同：0
> 
> 时间：2013-01-31T02:44:21.747
> 
> 标签：python

此代码来自《Learning python》一书，它用于对以逗号分隔的文本文件中的列进行求和。我真的无法理解第 7、8 和 9 行。谢谢您的帮助。这是代码：

```
filename='data.txt'
sums={}
for line in open(filename):
    cols=line.split(',')
    nums=[int(col) for col in cols]
    for(ix, num) in enumerate(nums):
        sums[ix]=sums.get(ix, 0)+num
for key in sorted(sums):
    print(key, '=', sums[key]) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T02:47:34.880

看起来输入文件包含逗号分隔的整数行。该程序打印出每列的总和。

您混淆了缩进，这改变了程序的含义，而且它一开始就写得不是很好。这里有很多评论：

```
filename='data.txt'    # name of the text file

sums = {}              # dictionary of { column: sum }
                       #   not initialized, because you don't know how many columns there are

# for each line in the input file,
for line in open(filename):
    # split the line by commas, resulting in a list of strings
    cols = line.split(',')
    # convert each string to an integer, resulting in a list of integers
    nums = [int(col) for col in cols]

    # Enumerating a list numbers the items - ie,
    #   enumerate([7,8,9]) -> [(0,7), (1,8), (2,9)]
    # It's used here to figure out which column each value gets added to
    for ix, num in enumerate(nums):
        # sums.get(index, defaultvalue) is the same as sums[index] IF sums already has a value for index
        # if not, sums[index] throws an error but .get returns defaultvalue
        # So this gets a running sum for the column if it exists, else 0;
        # then we add the new value and store it back to sums.
        sums[ix] = sums.get(ix, 0) + num

# Go through the sums in ascending order by column -
#   this is necessary because dictionaries have no inherent ordering
for key in sorted(sums):                    
    # and for each, print the column# and sum
    print(key, '=', sums[key]) 
```

我会写得有点不同；就像是

```
from collections import Counter
sums = Counter()

with open('data.txt') as inf:
    for line in inf:
        values = [int(v) for v in line.split(',')]
        sums.update(enumerate(values))

for col,sum in sorted(sums.iteritems()):
    print("{}: {}".format(col, sum)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T03:03:04.757

假设你理解第 1-6 行……</p>

第 7 行：

```
sums[ix]=sums.get(ix, 0)+num 
```

`sums.get(ix, 0)`与 相同`sums[ix]`，只是如果`ix not in sums`它返回`0`。所以，这就像`sums[ix] += num`，除了它首先将值设置为`0`if 这是你第一次看到`ix`。

因此，应该清楚的是，在这个循环结束时，`sums[ix]`将得到 column 中所有值的总和`ix`。

这是一种愚蠢的做法。正如 mgilson 指出的那样，您可以直接使用`defaultdict`，这样就不需要额外的逻辑。或者，更简单地说，您可以只使用 a`list`而不是 a `dict`，因为这（按连续的小数字索引）正是`list`s 的用途......</p>

第 8 行：

```
for key in sorted(sums): 
```

首先，您可以迭代任何对象`dict`，就好像它是 a`list`或其他可迭代对象一样，它与迭代 具有相同的效果`sums.keys()`。因此，如果`sums`看起来像`{ 0: 4, 1: 6, 2: 3 }`，您将迭代`0, 1, 2`.

除了`dict`s 没有任何固有的顺序。您可能会得到`0, 1, 2`，或者您可能会得到`1, 0, 2`，或任何其他命令。

因此，`sorted(sums)`只需按排序顺序返回键的副本`list`，保证您将按`0, 1, 2`该顺序获得。

再一次，这很愚蠢，因为如果你一开始就使用 a `list`，你就会把事情整理好。

第 9 行：

```
print(key, '=', sums[key]) 
```

这应该是显而易见的。如果`key`迭代`0, 1, 2`, 那么这将打印`0 = 4`, `1 = 6`, `2 = 3`.

因此，换句话说，它打印出每个列号，以及该列中所有值的总和。

# php - 使用 PHP 将自定义页面添加到 PDF

> ID：14617623
> 
> 赞同：0
> 
> 时间：2013-01-31T02:44:44.247
> 
> 标签：php, pdf, pdfbox

我有一个我过去使用过的应用程序，它使用 PD4ML 从模板生成 PDF，然后我会使用 PDFBox 在 PDF 的末尾添加一个包含相当大图像的自定义页面。

所以我会有 20 个左右的 A4 纵向页面，最后有 2 个页面是根据图像自定义大小的（有时是 2000x2000）。

现在我正在使用 PHP 进行一个非常相似的过程，我目前看到的一个问题是添加这些自定义页面。我正在使用 Smarty 和 DOMPDF 来模板/创建 PDF。但我没有看到任何表明 Smarty 可以使用自定义页面的信息。

是否有可以以类似方式使用的库？添加具有 (x) 宽度和 (y) 高度的 PDF 页面，然后允许重新渲染？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T03:00:51.383

在此处查看“TCPPDF”和大量模板：[http ://www.tcpdf.org/examples.php](http://www.tcpdf.org/examples.php)

试试这个代码：

```
$pdf = new CUSTOMPDF(PDF_PAGE_ORIENTATION, PDF_UNIT, PDF_PAGE_FORMAT, true, 'UTF-8',     false);  
//Add a custom size  
$width = 175;  
$height = 266; 
```

# apache - modrewrite 更改查询字符串的 1 个元素

> ID：14617627
> 
> 赞同：1
> 
> 时间：2013-01-31T02:45:06.407
> 
> 标签：apache, .htaccess, mod-rewrite

Flash 电影是基于`mypage.php`. `mypage.php`嵌入了 Flash 播放器。链接看起来像`mypage.php?moviefolder=folder1/folder2&swfTitle=sometitle.swf`。 `mypage.php`在每次链接点击时解析（每个 href）。 `Folder2`总是相同的，但是`movieTitle.swf`是动态的。有时子文件夹会被称为 ( `folder2/subfolder2/sometitle.swf`)。

mod_rewrite 可以允许查询字符串反映文件夹 2，而是静默服务`folder3`以及偶尔的子文件夹吗？我会将所有文件放在文件夹 3 中。目标是让用户不知道 swfs 在哪里。再次提前感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T02:54:27.887

使用 a`RewriteCond`来匹配查询字符串的内容（因为它们不是在`RewriteRule`指令中读取的，`swfTitle=sometitle.swf`您`folder1/folder3`可以`folder1/folder2`在`moviefolder`.

这将使用正则表达式模式`([^&]+)`将所有内容匹配到下一个`&`（表示另一个查询参数）。

```
# Capture everything after folder2 into %1
RewriteCond %{QUERY_STRING} moviefolder=folder1/folder2([^&]+) [NC]
# Capture everything in the swfTitle param into %2
# Both conditions must be matched...
RewriteCond %{QUERY_STRING} swfTitle=([^&]+) [NC]
# Then silently rewrite mypage.php to substitute folder3,
# and pass in the original swfTitle captured above
RewriteRule ^mypage\.php$ mypage.php?moviefolder=folder1/folder3%1&swfTitle=%2 [L] 
```

希望您不会出现重写循环，因为重写`folder1/folder3`后的第二次将不匹配。 `[NC]`允许不区分大小写的匹配。

我确实设法在[http://htaccess.madewithlove.be/](http://htaccess.madewithlove.be/)上成功地测试了这个，使用示例输入：

```
http://example.com/mypage.php?swfTitle=thetitle.swf&moviefolder=folder1/folder2/thing
---> http://example.com/mypage.php?moviefolder=folder1/folder3/thing&swfTitle=thetitle.swf

http://example.com/mypage.php?moviefolder=folder1/folder2/thing999zzz&swfTitle=thetitle.swf
---> http://example.com/mypage.php?moviefolder=folder1/folder3/thing999zzz&swfTitle=thetitle.swf 
```

# c++ - OpenGL检查是否启用或禁用某些东西

> ID：14617630
> 
> 赞同：6
> 
> 时间：2013-01-31T02:45:38.700
> 
> 标签：c++, opengl

是否有任何类似的功能`isEnabled(GL_LIGHTING);`或任何方法来检测是否启用或禁用了某些功能？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-31T02:52:48.977

[glGet](http://www.opengl.org/wiki/GLAPI/glGet) — 返回选定参数的一个或多个值。

```
glGetBooleanv(GL_LIGHTING,&status) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-09-14T10:03:16.443

对于全局照明，如何：

```
glIsEnabled(GL_LIGHTING) 
```

# android - 突出显示没有其他图像的图像按钮

> ID：14617631
> 
> 赞同：0
> 
> 时间：2013-01-31T02:45:38.980
> 
> 标签：android, imagebutton

我只是想知道是否有一种方法可以在按下时突出显示图像按钮而不使用另一个图像作为突出显示的图像。提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T05:20:03.530

尝试更改选定的背景。将视图的背景设置为@selected_background

# ruby-on-rails - CanCan - 指定角色可以修改模型

> ID：14617633
> 
> 赞同：0
> 
> 时间：2013-01-31T02:45:48.387
> 
> 标签：ruby-on-rails, ruby, cancan

这就是我的数据库的布局方式。

```
User (one) => many Computers (one) => many Accounts 
```

我正在尝试设置[CanCan](https://github.com/ryanb/cancan)，以便只有计算机所有者才能编辑帐户。这就是我到目前为止所拥有的。

```
user ||= User.new 
if user.admin?
    can :manage, :all
else
    can :manage, Computer, :user_id => user.id # <= works
    can :manage, Account, :computer => {:user_id => user.id} # <= doesnt work
end 
```

第二个可以不工作。我想要它，这样我就可以让用户能够编辑与他的所有计算机关联的所有帐户。关于为什么这不起作用的任何想法？我已经尝试实施[指南](https://github.com/ryanb/cancan/wiki/defining-abilities)所说的一些方法，但这些方法也不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T03:03:22.087

我有类似的情况，并且能够使它与：

```
can :manage, Account, computer_id: user.computers.collect(&:id) 
```

因此，基本上，用户可以管理具有与用户关联的 computer_ids 的帐户。

# php - php缩略图组织者

> ID：14617635
> 
> 赞同：-1
> 
> 时间：2013-01-31T02:46:01.450
> 
> 标签：php, organizer

好的，我有这段代码并且运行良好，但我需要图像的顺序在图像创建日期之前，有人可以帮我吗？

```
$images=array();
$dir = @opendir('.') or die("Unable to open $path");
$i=0;
while($file = readdir($dir)) {
    if(is_dir($file))
        continue;
    else if($file != '.' && $file != '..' && $file != 'index.php') {
        $images[$i]=$file;
        $i++;
    }
}
sort($images);
for($i=0; $i<sizeof($images); $i++) {
    echo "<a href=".chr(34).$path.$images[$i].chr(34)."><img style='border:1px solid #666666; width:200px; margin: 10px;' src='".$images[$i]."'/></a>";
}
closedir($dir); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T03:04:49.253

只需使用文件的时间戳作为索引，然后按键对数组进行排序。

此外，迭代目录中文件列表的正确方法是[`DirectoryIterator`](http://php.net/directoryiterator)：

```
$dir = new DirectoryIterator('.');
$images = array();

foreach ($dir as $file) {
    if ($file->isFile()) {
        $images[$file->getMTime()] = $file->getFilename();
    }
}

ksort($images); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T02:52:16.643

您对 $images 的索引是一个整数索引 - 为什么不将其设为时间戳？

# javascript - 使用 iframe 作为父窗口

> ID：14617638
> 
> 赞同：0
> 
> 时间：2013-01-31T02:46:17.607
> 
> 标签：javascript, jquery, html, iframe

我有一个 Iframe，其中加载了一个表单。当我单击提交按钮（在 iframe 中的表单中）时，我希望在父窗口中加载响应（使 iframe 作为父窗口）

关于如何使用它的任何想法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T02:51:55.910

将表单的目标设置为 _top。

```
<form target="_top" action="#" method="get"> 
```

表单提交将替换 iframe 的父级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T02:52:06.933

您可以通过“父”属性访问父窗口。如果你需要做一些特殊的脚本，并从那里调用函数。否则我更喜欢@epascarello 的解决方案。

# java - Android ListView 数据库异常

> ID：14617640
> 
> 赞同：0
> 
> 时间：2013-01-31T02:46:24.907
> 
> 标签：java, android, database, listactivity

我一直是个顽皮的男孩，我从 android 开发者网站的官方记事本应用程序中复制了一个方法，这是我的课：

```
package com.example.prva;

import android.app.ListActivity;
import android.database.Cursor;
import android.os.Bundle;
import android.support.v4.widget.SimpleCursorAdapter;

public class ListView extends ListActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.listview);
        fillData();
        }

    private void fillData() {
        // Get all of the notes from the database and create the item list
        Cursor c = DatabaseManager.getAllData();
        startManagingCursor(c);

        String[] from = new String[] { DatabaseManager.TABLE_COLUMN_ONE };
        int[] to = new int[] { R.id.text1 };

        // Now create an array adapter and set it to display using our row
        SimpleCursorAdapter notes =
            new SimpleCursorAdapter(this, R.layout.notes_row, c, from, to);
        setListAdapter(notes);
    }
    } 
```

当我尝试运行此 ListActivity 时，我收到此错误：

```
01-31 02:39:14.259: E/AndroidRuntime(1845): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.prva/com.example.prva.ListView}: java.lang.IllegalArgumentException: column '_id' does not exist 
```

现在我明白了，因为它是真的，我的数据库中没有 _id 列（记事本应用程序数据库有它并使用它，但我有自己的数据库），我只是不明白我的 ListActivity 中提到的那个列在哪里班级？它是从哪里调用的，所以它给出了错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T02:56:22.133

请参阅[CursorAdapter](http://developer.android.com/reference/android/widget/CursorAdapter.html)的文档：

> 游标必须包含一个名为 _id 的列，否则此类将不起作用。

在您的代码中，您使用 SimpleCursorAdapter，它是一个派生类，因此该语句似乎适用。

游标就像迭代器或指针，它们只包含一种用于传输数据的机制，它们本身不包含列。

从[另一个文档](http://developer.android.com/guide/topics/providers/content-provider-creating.html#ContentURI)中，您可以更好地理解上面的陈述：

> **处理内容 URI ID**
> 
> 按照惯例，提供者通过接受内容 URI 来提供对表中单行的访问，该内容 URI 具有 URI 末尾的行的 ID 值。同样按照惯例，提供者将 ID 值与表的 _ID 列匹配，并对匹配的行执行请求的访问。
> 
> 此约定有助于应用程序访问提供程序的通用设计模式。该应用程序对提供者进行查询，并使用 CursorAdapter 在 ListView 中显示结果游标。CursorAdapter 的定义要求 Cursor 中的列之一为 _ID。

解决问题的几种方法：

1.  在表中添加一列“_id”。

2.  使用别名获取光标。例如：

    SELECT someid as _id, name, number FROM TABLE1;

# c++ - 随着时间的推移，C++ 代码运行速度变慢

> ID：14617645
> 
> 赞同：3
> 
> 时间：2013-01-31T02:47:03.040
> 
> 标签：c++, runtime

我有一个很长的 C++ 程序，由数千行代码、几个类、函数等组成。该程序基本上从输入文件中读取信息，运行算法，并将结果写入输出文件。

今天我意识到程序的运行时间会不时发生巨大变化。所以我做了一个小测试，重新启动我的计算机，关闭所有其他可能的东西，并使用相同的输入文件连续运行代码 5 次。运行时间分别为 50、80、130、180、190 秒。

在这种情况下，我的第一个猜测是未删除的动态记忆。但是我在整个代码中只使用了两次动态数组，我确信我删除了这些数组。

你们对此有什么解释吗？我在 Windows 7 计算机上使用 Visual Studio 2010。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T03:08:15.847

请注意在 Visual Studio 调试器中运行程序，因为在这种情况下禁用了 LFH（低碎片堆）内存分配器。从 VS 外部尝试该软件。

我已经看到任务需要几秒钟才能完成的情况，通常只需从 Visual Studio 中运行就需要几个小时才能完成。

最重要的是，如果您仍然不知道分而治之的情况。检测应用程序以查看子系统的运行时间，或者只是将调试计时器放置在各个区域以查看执行时间在哪里发生了巨大变化并从那里向下钻取。如果是内存分配器问题，您通常会在释放数组时看到大量运行时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T03:50:14.570

您的代码在一个环境中运行，其中包括操作系统、磁盘、网络、时间、内存、启动的其他进程等的状态。

每次在相同的环境中执行相同的代码都会得到相同的结果。

现在，您会得到不同的结果（执行时间）。如果您重复运行相同的可执行文件，那么周围环境中就会发生一些变化。

现在，最明显的问题是：您的代码是否导致外部环境发生变化？一个简单的例子是：它读入一个文件，更改数据并将其写回同一个文件。

你知道你的代码。只需使用这种方法来隔离您的代码可能对其环境产生的任何影响，您就会找到原因。

# javascript - Javascript使用settimeout更改背景颜色

> ID：14617646
> 
> 赞同：0
> 
> 时间：2013-01-31T02:47:09.423
> 
> 标签：javascript, html, background, timer, settimeout

我正在设计一个鱼缸。页面的整个背景是水。我想设置一个功能，在 5000 毫秒后将水从蓝色变为棕色，然后暂停。然后，用户将单击一个按钮来“清洁水箱”，这将重置背景更改功能。

我能找到的唯一解决方案是不断将背景从蓝色变为绿色的循环。

```
var intPgColorIndex = 0;
var arrPgColor = new Array("#999966", "#00ffff" );
function SetPgColor()
{
var PgColor;
intPgColorIndex++;
if (intPgColorIndex >= arrPgColor.length)

{
intPgColorIndex = 0;
}
PgColor = arrPgColor[intPgColorIndex];
if (PgColor = "#999966" ) {
 document.body.style.backgroundColor = PgColor;
 setTimeout("SetPgColor()", 5000);
 }

  }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T03:07:54.403

阻止代码按预期运行的唯一部分是您正在使用`=`而不是`==`比较值。

但是，您的代码既丑陋又糟糕，所以这里有一个更好的版本：

```
setTimeout(function dirty() {
    document.body.style.backgroundColor = "#996";
    var btn = document.body.appendChild(document.createElement('button'));
    btn.appendChild(document.createTextNode("Clean the tank"));
    btn.onclick = function clean() {
        btn.parentNode.removeChild(btn);
        document.body.style.backgroundColor = "#0ff";
        setTimeout(dirty,5000);
    };
},5000); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-31T02:59:54.403

```
function clean() {
  clearTimeout(dirt);
  var dirt = setTimeout(dirt, 5000)
  //set color to blue
}
function dirt() {
  //set color to brown
} 
```

在程序开始时调用 clean ，并在用户单击按钮或其他东西时执行它。它将等待 5 秒（imo 有点短），然后运行污垢功能。直到用户单击清洁水箱的按钮，然后再次等待 5 秒钟，然后再次变脏之前，什么都不会发生。简单、干净、有效。:D

# guice - Guice 可以将绑定注释应用于注入的提供程序吗？

> ID：14617649
> 
> 赞同：1
> 
> 时间：2013-01-31T02:47:40.520
> 
> 标签：guice

我有一个单例范围的类，它需要访问一个文件名字符串，该字符串只能在更窄的范围内确定下游。通常的解决方案是将提供程序注入到单例范围的类中，并在实际需要获取更窄范围的对象时调用 provider.get()。然而，在这种情况下，范围更窄的对象只是一个字符串，这意味着我需要使用绑定注释来将其与其他所有字符串区分开来。两个问题：

1.  绑定注释可以像任何其他注入对象一样应用于注入的提供者吗？

2.  您是否同意最好只注入文件名字符串，这是单例作用域类真正需要了解的所有内容，还是我应该采取更简单的方法，即注入包含文件名字符串的对象（并且可通过吸气剂访问）？我不喜欢后一种方法的是单例类可以访问它不关心的各种东西，这似乎会让一些人哭泣。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T04:53:26.493

1.  是的，Providers 上的绑定注释应该可以工作。`Key`Guice 内部是一个 (annotation, type) 元组，无论是表示为`@Foo Bar`还是`@Foo Provider<Bar>`。

2.  如果可以选择，我可能只会注入 String 实例，因为这就是您所需要的。看到它可能有点奇怪，`@Filename Provider<String>`但只要你和你的共同维护者理解它，这是在 Guice 中表达这一点的最雄辩的方式。

请注意不要将设计从里到外翻转以适应 Guice。在将 a`@Filename Provider<String>`注入 a之前`@Singleton class FileSaver`，请确保根本不采用`FileSaver`范围狭窄的依赖项，并将文件名作为`save`or`load`方法的参数放入其中并不容易。:)

# python - Python 3 绑定方法订阅

> ID：14617659
> 
> 赞同：3
> 
> 时间：2013-01-31T02:48:35.423
> 
> 标签：python, events, methods, python-3.x, callback

一开始，我知道 Python 3 中不存在绑定方法属性（根据本主题：[Why does setattr fail on a bound method](https://stackoverflow.com/questions/7891277/why-does-setattr-fail-on-a-bound-method)）

我正在尝试编写一个伪“反应式”Python 框架。也许我错过了一些东西，也许，我正在尝试做的事情在某种程度上是可行的。让我们看一下代码：

```
from collections import defaultdict

class Event:
    def __init__(self):
        self.funcs = []

    def bind(self, func):
        self.funcs.append(func)

    def __call__(self, *args, **kwargs):
        for func in self.funcs:
            func(*args, **kwargs)

def bindable(func):
    events = defaultdict(Event)
    def wrapper(self, *args, **kwargs):
        func(self, *args, **kwargs)
        # I'm doing it this way, because we need event PER class instance
        events[self]()

    def bind(func):
        # Is it possible to somehow implement this method "in proper way"?
        # to capture "self" somehow - it has to be implemented in other way than now,
        # because now it is simple function not connected to an instance.
        print ('TODO')

    wrapper.bind = bind

    return wrapper

class X:
    # this method should be bindable - you should be able to attach callback to it
    @bindable
    def test(self):
        print('test')

# sample usage:

def f():
    print('calling f')

a = X()
b = X()

# binding callback
a.test.bind(f)

a.test() # should call f
b.test() # should NOT call f 
```

当然，`Event`对于这个例子，所有的类都被简化了。有没有办法修复这个代码工作？我只想能够使用`bindable`装饰器使方法（不是函数！）可绑定，并能够稍后将其“绑定”到回调 - 这样，如果有人调用该方法，回调将被自动调用.

Python 3 中有什么方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T03:57:59.480

噢耶！:D 我找到了答案 - 有点疯狂，但工作很快。如果有人有评论或更好的解决方案，我会非常有兴趣看到它。以下代码适用于方法和函数：

```
# ----- test classes -----    
class Event:
    def __init__(self):
        self.funcs = []

    def bind(self, func):
        self.funcs.append(func)

    def __call__(self, *args, **kwargs):
        message = type('EventMessage', (), kwargs)
        for func in self.funcs:
            func(message)

# ----- implementation -----

class BindFunction:
    def __init__(self, func):
        self.func = func
        self.event = Event()

    def __call__(self, *args, **kwargs):
        out = self.func(*args, **kwargs)
        self.event(source=None)
        return out

    def bind(self, func):
        self.event.bind(func)

class BindMethod(BindFunction):
    def __init__(self, instance, func):
        super().__init__(func)
        self.instance = instance

    def __call__(self, *args, **kwargs):
        out = self.func(self.instance, *args, **kwargs)
        self.event(source=self.instance)
        return out

class Descriptor(BindFunction):
    methods = {}

    def __get__(self, instance, owner):
        if not instance in Descriptor.methods:
            Descriptor.methods[instance] = BindMethod(instance, self.func)
        return Descriptor.methods[instance]

def bindable(func):
    return Descriptor(func)

# ----- usage -----
class list:
    def __init__(self, seq=()):
        self.__list = [el for el in seq]

    @bindable
    def append(self, p_object):
        self.__list.append(p_object)

    def __str__(self):
        return str(self.__list)

@bindable
def x():
    print('calling x')

# ----- tests -----

def f (event):
    print('calling f')
    print('source type: %s' % type(event.source))

def g (event):
    print('calling g')
    print('source type: %s' % type(event.source))

a = list()
b = list()

a.append.bind(f)
b.append.bind(g)

a.append(5)
print(a)

b.append(6)
print(b)

print('----')

x.bind(f)
x() 
```

和输出：

```
calling f
source type: <class '__main__.list'>
[5]
calling g
source type: <class '__main__.list'>
[6]
----
calling x
calling f
source type: <class 'NoneType'> 
```

诀窍是使用 Python 的描述符来存储当前实例指针。

因此，我们能够将回调绑定到任何 python 函数。执行开销并不太大——**空**函数执行比没有这个装饰器慢 5 - 6 倍。这种开销是由所需的函数链**和**事件处理引起的。

When using the "proper" event implementation (using weak references), like this one: [Signal slot implementation](http://code.activestate.com/recipes/577980-improved-signalsslots-implementation-in-python/), we are getting the overhead of 20 - 25 times the base function execution, which still is good.

EDIT: According to Hyperboreus question, I updated the code to be able to read from the callback methods the source object from whic the callbacks were called. They are now accessible by `event.source` variable.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T03:54:52.293

老实说，我对你的问题没有答案，只是另一个问题是返回：

猴子修补您的实例不会创建您想要的行为：

```
#! /usr/bin/python3.2

import types

class X:
    def __init__ (self, name): self.name = name
    def test (self): print (self.name, 'test')

def f (self): print (self.name, '!!!')

a = X ('A')
b = X ('B')

b.test = types.MethodType (f, b) #"binding"

a.test ()
b.test () 
```

# javascript - 如何使用 jquery 延迟对象检查元素是否在 DOM 中？

> ID：14617660
> 
> 赞同：5
> 
> 时间：2013-01-31T02:48:38.253
> 
> 标签：javascript, jquery, dom, deferred

我想知道是否可以使用 jQuery 延迟对象来测试元素是否在 DOM 中。

这是我的想法：

```
function chkDOM(selector) {
  if $(selector) {
    return deferred.promise();
  }
}

$.when(chkDOM(selector)).then(function() {
  // do something
}); 
```

我不完全知道如何编写代码来实现这一点，但我希望我的问题是有意义的。如果我能让这件作品正常工作，那么我基本上可以延迟某些 jquery 插件的调用，以便它们真正正常运行。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-31T02:59:21.830

我假设您正在运行一个循环来定期检查选择器的存在：

```
var dfd = $.Deferred();
var checkSelector = setInterval(function () {
    if ($("#selector").length) {
        dfd.resolve();
        clearInterval(checkSelector);
    }
}, 1000);

dfd.done(function () {
   console.log('it has been added');
}); 
```

请注意，这`$.when`不是必需的；您可以`.done`直接在延迟对象上使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T02:57:04.520

您可以使用以下内容检查元素是否存在。
您不必使用延迟。

```
if( jQuery(selector).length > 0 ) {
    // exists
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T03:50:15.197

要检查 DOM 中的元素，只需使用

```
if($(selector).length > 0) {
// do something

} 
```

$(selector) 返回一个匹配选择器条件的元素数组。

# linux - Linux 服务器的新手，关于使用可能不同版本的 MPI 执行二进制文件

> ID：14617661
> 
> 赞同：0
> 
> 时间：2013-01-31T02:48:45.500
> 
> 标签：linux, mpi, intel, hpc

我编写并编译了一些二进制文件并通过 SSH 将它们上传到在远程超级计算机上运行的 linux 服务器，如果二进制文件是用英特尔的 MPI 库编译的，但是如果远程 linux 服务器没有安装相应的 MPI 库在那里，如果我将所需的英特尔 MPI 动态链接库文件上传到 linux 服务器，二进制文件会正确执行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T02:57:21.493

我建议你在目标超级计算机上编译二进制文件（在你 SSH 之后）。这样你就可以保证至少所有的库在编译时都存在，如果你需要修改 LD_LIBRARY_PATH 来选择正确的库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-30T19:23:21.173

是的，它会起作用，请查看 Intel 的[Redistributing Libraries When Deploying Applications](http://software.intel.com/en-us/node/462704)文档。还要确保使用编译器的交叉编译选项来匹配超级计算机的 CPU 架构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T03:07:51.987

有时。

几点

1.  许多程序（例如 MATLAB）将允许用户指定自己的 MPI 库。闭源程序应该能够指定自己的 MPI。
2.  MPI针对集群进行了高度优化，它往往是集群的一个卖点。
3.  许多集群以 2 种模式运行，优化模式和[集群兼容模式](http://www.nersc.gov/users/computational-systems/hopper/cluster-compatibility-mode/)。前者只运行供应商 MPI，后者支持 OpenMPI 和其他 MPI。对于博学，在前者中，许多常见的`system()`调用可能会失败。

# javascript - JS 循环仅在匹配到数组中的最后一个元素时才有效

> ID：14617665
> 
> 赞同：1
> 
> 时间：2013-01-31T02:49:01.383
> 
> 标签：javascript

我无法让循​​环在我的简单 js 登录脚本中工作。当我尝试使用数组中最后一个（user3 和 pass3）以外的任何登录名登录时，它返回 false。

我究竟做错了什么？

我都试过了`==`和`===`。

```
var userLogins = [{user:"user1", password:"pass1"},{user:"user2", password:"pass2"},{user:"user3", password:"pass3"}]
var success = null;
function logon(user, pass) {
    userok = false;
    for (i = 0; i < userLogins.length; i++)
    { 
        if(pass == userLogins[i].password && user == userLogins[i].user )
        {
            success = true;
        }
        else
        {
            success = false;
        }
    }
    secret(success);
}

function getData() {
    var user = document.getElementById("userid").value;
    var password = document.getElementById("password").value;
    logon(user, password);
}

function secret(auth){
    if(auth)
    {
        show('success');
        hide('login');
    }
    else
    {
        show('error');
        hide('login');
    }
}

function show(show) {
    document.getElementById(show).className = "show";
}
function hide(hide) {
    document.getElementById(hide).className = "hide";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T02:51:10.917

`break`找到时使用。否则下一个循环会将成功设置为假。

```
for (var i = 0; i < userLogins.length; i++)
{ 
    if(pass == userLogins[i].password && user == userLogins[i].user )
    {
        success = true;
        break;
    }
    else
    {
        success = false;
    }
}
secret(success); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T03:23:44.240

```
for (i = 0; i < userLogins.length; i++)
{ 
    if(pass == userLogins[i].password && user == userLogins[i].user )
    {
        success = true;
    }
    else
    {
        success = false;
    }
} 
```

**您需要 a `break`in there**，否则您的`true`值 for只会在下一次迭代中`success`被覆盖...除了*最后可能的 credentials*，没有“下一次”迭代。`false`

 *完成此操作后，您实际上根本不需要`else`分支：

```
var success = false;
for (i = 0; i < userLogins.length; i++) { 
    if (pass == userLogins[i].password && user == userLogins[i].user) {
        success = true;
        break;
    }
} 
```*

# android - Ajax 缓存：PhoneGap 2.1 加载错误中的 false

> ID：14617666
> 
> 赞同：0
> 
> 时间：2013-01-31T02:49:12.200
> 
> 标签：android, jquery, ajax, caching, cordova

发现`cache: false`添加时出现ajax调用加载问题。我在三款手机上测试过：三星 Galaxy SIII (Android 4.1.2)、索尼 Xperia P (Android 4.0.4) 和 LG (Android 4.0.3)。只有SIII没有问题。调用 ajax 时，Sony 和 LG 手机只会继续加载。如何解决？以下代码是提到的 ajax 调用：

```
 $.ajax({
        url:  serviceURL ,
        async: true, 
        cache: false,
        type: 'POST',
        dataType: 'json',
        contentType: 'application/json',
        data: JSON.stringify({
             .......
        }),
        success: function(data) {
        ......
        }
    }); 
```

如果我删除`cache: false`了，三部手机正常运行ajax。该移动应用程序使用 PhoneGap 2.1、Backbone.js、Jquerymobile 1.2 和 Jquery 1.8.2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T04:47:33.677

使用 POST 获取的页面永远不会被缓存，因此 jQuery.ajaxSetup() 中的缓存和 ifModified 选项对这些请求没有影响。

# php - 使用javascript更新sql记录

> ID：14617667
> 
> 赞同：0
> 
> 时间：2013-01-31T02:49:17.237
> 
> 标签：php, javascript, forms

我之前有一个简单的表格：

```
<form method="post" action="firstbillsubmitbal.php?id=#COL1#"> 
    <input name="currentbal" type="text" id="currentbal" class="input-mini"  /> 
    <input type="submit" id="submit" value="Save" class="btn btn-success" />
</form> 
```

调用此页面来处理 firstbillsubmitbal.php

```
$dealID = $_GET["id"]; 
$currentbal = mysql_real_escape_string(stripslashes($_POST['currentbal']));
$sql = mysql_query("UPDATE deals SET 
        currentbal = '$currentbal',
        currentbalDone = 'Yes'
        WHERE deals.dealID = '$dealID'") or die (mysql_error()); 
```

它适用于单笔交易。但我需要对其进行一些编辑，因为我现在在表格中显示我的数据。我现在有这个 js 代码，当我点击每行表上的 btn 时，传递我的 row_id 和 currentbal calue，我得到了它的工作，但我想从这个 js 代码中知道如何处理我的表单？

```
function funcEdit(row_id){  
var currentbal = document.getElementById('currentbal' + row_id).value;
    var r=confirm("Are You Sure You Want To Proceed?");
    if(r==true) {
        alert("Record is saved");
    } else {
        alert("Cancelling Transaction");
    }   
} 
```

js代码目前只有两个变量，即

`row_id`= 这基本上是数据库行的 ID 和 `currentbal`= 这是我要上传到我的数据库的值

我的问题基本上是我如何调用我的`firstbillsubmitbal.php`文件以及我在我的 php 文件上编辑什么/如何编辑，以便我的 row_id 和`currentbal`上传到我的数据库，因为我不再使用 POST。

* * *

感谢您的答复。所以我浏览了一些我在谷歌上找到的 SO 答案和一些教程，这就是我的 js 代码发生的事情。

```
function funcEdit(row_id){  
var currentbal = document.getElementById('currentbal' + row_id).value;
var dealID = row_id;
//organize the data properly
var data = 'currentbal=' + currentbal.val() + '&dealID=' + dealID.val();

    //start the ajax
    $.ajax({
        url: "firstbillsubmitbal.php",  
        type: "GET",
        data: data,     
        cache: false,
        success: function() {  
        $('#message').html("<h2>Current balance has been updated!</h2>") 
        } 

    });             
} 
```

这就是我的 firstbillsubmitbal.php 页面发生的情况

```
$dealID = $_GET['dealID'] 
$currentbal = $_GET['currentbal']

$sql = mysql_query("UPDATE deals SET 
        currentbal = '$currentbal',
        currentbalDone = 'Yes'
        WHERE deals.dealID = '$dealID' LIMIT 1") or die (mysql_error()); 
```

但是当我单击按钮调用我的函数时，什么也没有发生。我错过了什么？

另外，这是我调用函数的方式。#COL1# 是我的行 ID 值。

```
<a href="javascript: funcEdit(#COL1#);" class="btn btn-success">Update</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T03:56:24.477

是否使用 row_id 数据正确调用了您的函数？
如果是这样，那么这可能会给你一个窍门，

```
function funcEdit(row_id){  
var currentbal = document.getElementById('currentbal' + row_id).value;
var dealID = row_id;
    //start the ajax
    $.ajax({
        url: "firstbillsubmitbal.php",  
        type: "GET",
          //pass data like this 
        data: {currentbal:currentbal.val(),dealID: dealID.val()},    
        cache: false,
        success: function(data) {  
        if (data=="1")
        $('#message').html("<h2>Current balance has been updated!</h2>") 
        } 

    });             
} 
```

并在 php 文件中

```
$dealID = $_GET['dealID'] 
$currentbal = $_GET['currentbal']

$sql = mysql_query("UPDATE deals SET 
        currentbal = '$currentbal',
        currentbalDone = 'Yes'
        WHERE deals.dealID = '$dealID' LIMIT 1") or die (mysql_error());

echo "1" ; // if update successful
else echo "0" // if update unsuccessful 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T04:02:29.423

HTML：

```
<form method="post" action="firstbillsubmitbal.php"> 
    <input name="currentbal" type="text" id="currentbal" class="input-mini"  />
    <a href="#" onclick="funcEdit(#COL1#); return false;" class="btn btn-success">Update</a>
</form> 
```

JS：

```
function funcEdit(row_id){  

    var currentbal = $("#currentbal").val();

    //organize the data properly
    var data = 'currentbal=' + currentbal + '&dealID=' + row_id;

    //start the ajax
    $.ajax({
        url: "firstbillsubmitbal.php",  
        type: "GET",
        data: data,     
        cache: false,
        success: function() {  
            $('#message').html("<h2>Current balance has been updated!</h2>") 
        } 

    });             
} 
```

希望对你有帮助！

# image - 发生不可恢复的错误。上传的文件可能超过了此服务器支持的最大文件大小 (2 MB)

> ID：14617674
> 
> 赞同：1
> 
> 时间：2013-01-31T02:50:28.643
> 
> 标签：image, drupal-7

好的，我得到了 Drupal 7.19，mySQL 5.1.66-cll PHP 5.3.21

现在我在上面的错误中搜索他并找到了不同年龄的各种答案，但是它没有解决我的问题。

我通过 php.ini settings.php 以及帐户设置（现在是 5000k）得到任何大于 100k 的文件的错误。并且最大帖子和最大文件要高得多。

该站点只有 2 个图像字段，一个是原始的，一个是另一个。在内容中使用哪一个并不重要，原始的字段设置从未更改，主题安装带有大于 500k 的图像。虽然目前我可以在上传之前调整图像大小，但这仍然是一种痛苦……我真的很感激任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T01:41:46.307

我有一个类似的问题，我通过`php.ini`文件以及 apache mod_security`user.conf`文件解决了。

我的 httpd 是 apache2，它启用了 mod_security，它也不允许我在 Drupal 中上传超过 100k 的图像文件。显然，这对于网络托管服务提供商（液体网络）来说是一个常见问题，因为解决问题的时间不超过 3 分钟。

首先，`php.ini`文件被更改（在 CentOS 上它位于`/usr/local/lib/`），其中包含以下行：

```
;upload_tmp_dir = /tmp  (yes it has a semi-colon at the start) 
```

还有这行：

```
session.save_path = "/tmp" 
```

第二个被更改的`modsec2.user.conf`文件是位于 (CentOS) 上的文件`/usr/local/apache/conf/`

（附加在文件底部的最后 2 行）：

```
SecUploadDir /tmp
SecTmpDir  /tmp 
```

然后`/etc/init.d/httpd restart`（或重新加载）apache，如果启用，您应该能够绕过 mod_apache 文件上传的此限制。祝你好运，请知道这是我在堆栈上的第一个答案，所以请体谅。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-06T22:42:59.550

只是您可以请求您的托管服务提供商将其添加到站点 whitelist.conf 文件中：

```
<IfModule mod_security2.c>
<LocationMatch .*>
SecRuleRemoveById 340147
</LocationMatch>
</IfModule> 
```

# mysql - MySql中的数据库复合键

> ID：14617677
> 
> 赞同：0
> 
> 时间：2013-01-31T02:50:46.583
> 
> 标签：mysql, database, database-design, composite-primary-key

条件是 每个操作员记录都有唯一的组码和产品码。某些组可能具有相同的产品代码。

# 主运算符表

```
 id           integer                  PK 
     name         varchar(100) 
```

# 产品组表

```
 code         integer                  PK
     opt_ID       integer                  PK + Ref. operator
     group        varchar(50) 
```

# 产品表

```
 code          integer                  PK
     opt_ID        integer                  PK   
     group_ID      integer                  Ref. Group table code field   
     name          carchar(50) 
```

问题是我应该从操作员表或产品表组中的产品表中引用什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T03:50:12.423

我认为你想要做的需要另一张桌子。

```
main operator table
  id           integer                  PK 
  name         varchar(100)             Ref. Product table code field unique
  product_code integer
product group table
  code         integer                  PK
  group        varchar(50)
product table
  code          integer                  PK
  group_ID      integer                  Ref. Group table code field   unique
  name          carchar(50) 
```

这应该允许您按产品或组查询运算符。这对你想做的事情有意义吗？如果不包括用例。

编辑。这将确保每个操作员都有一个唯一的产品/组元组......您可以通过加入产品表来访问 operator.group。

# mysql - MySQL：将 SHA1 哈希加载到 BINARY(20) 列中

> ID：14617678
> 
> 赞同：0
> 
> 时间：2013-01-31T02:51:09.937
> 
> 标签：mysql, binary, load, sha1

我将在 mySQL 表中加载十亿行，其中一列 - BINARY(20) - 是其他几个列的 SHA1 哈希值，连接在一起。副手我看不到如何使用 LOAD 命令加载二进制值，因为它似乎依赖于分隔符。

显然，速度在这里很重要，这就是我想使用 LOAD 的原因。有谁知道如何使用 LOAD 加载固定长度的二进制值？这可能是触发器的工作吗？（我以前从未使用过触发器。）或者我可以在 LOAD 命令中调用一个函数（例如 UNHEX）吗？

（因为这似乎是一个常见问题：不，我不想以 base64 或十六进制表示法存储它。BINARY(20) 是必需的。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T03:30:11.000

二进制数据又`LOAD DATA INFILE`不是朋友。文件格式说明符需要一个分隔符，并且任意二进制数据是长度分隔的，而不是字段分隔的。

你最好的选择是使用大型多`INSERT`语句并坚持下去。这些可以处理将十六进制编码的字符串解码并自动放入`BINARY`列中。

不过，我不确定为什么有人会希望自己遭受这种痛苦。与标准十六进制表示法相比，每行保存 20 个字节是不值得的。

如果你真的需要加载数以千计的行，也许 MySQL 不是最好的平台。您应该做的是将数据分片到多个表或数据库中，或者使用 NoSQL 存储更有效地将其拆分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T21:29:56.883

这似乎是一个合理的方法：使用 SET 形式的 LOAD，使用变量并调用诸如 UNHEX 和 CONCAT 之类的函数。

例如：

假设 mytable 有四列：

```
mysha1  BINARY(20)
a       VARCHAR(20)
b       VARCHAR(20)
c       VARCHAR(20) 
```

列 mysha1 是 a、b 和 c 的 sha1 哈希，并与 '|' 连接 作为分隔符。

并假设输入文件是三个字段的制表符分隔的文本行：

```
abel\tbaker\tcharlie\t\n
dog\teasy\tfor\t\n
etc\tetc\tetc\t\n 
```

这是我加载表格的方式

```
LOAD DATA INFILE '/foo/bar/input.txt' INTO TABLE mytable 
FIELDS TERMINATED BY '\t' ESCAPED BY '\\' LINES TERMINATED BY '\n' 
(@f1, @f2, @f3) SET mysha1 = UNHEX(SHA1(CONCAT_WS('|', @f1, @f2, @f3))), 
a=@f1, b=@f2, c=@f3; 
```

**更新**：在一般情况下，对于*无法*使用内置函数（如 SHA1）计算的任意二进制值，二进制值必须在 INFILE 中表示为可显示的十六进制字符串，读入@variable，然后用 UNHEX 函数转换成二进制。例如：

表：

```
mybin8    BINARY(8)
a         VARCHAR(20)
b         VARCHAR(20)
c         VARCHAR(20) 
```

输入文件：

```
abel\tbaker\tcharlie\t0123456789abcdef\n
dog\teasy\tfox\t2468ace13579bdf\n
etc\tetc\tetc\t0000000000000000\n 
```

加载命令：

```
LOAD DATA INFILE '/foo/bar/input.txt' INTO TABLE mytable 
FIELDS TERMINATED BY '\t' ESCAPED BY '\\' LINES TERMINATED BY '\n' 
(a, b, c, @myhex) SET mybin8 = UNHEX(@myhex); 
```

# c# - 读取文本文件

> ID：14617680
> 
> 赞同：0
> 
> 时间：2013-01-31T02:51:13.250
> 
> 标签：c#, xaml, file-io

我正在尝试在事件处理程序中读取 txt 文件

```
private void abc (object sender, routedEventArgs e)
{
     string [] x= File.ReadAllLinwes(path);
} 
```

我收到错误：当前内容中不存在名称 FILE

那么，如何从 xaml.cs 文件中的文本文件中读取？应该进口什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T02:56:08.900

[该类`File`位于](http://msdn.microsoft.com/en-us/library/system.io.file.aspx)命名空间中`System.IO`。因此，添加`using System.IO;`到 C# 文件的顶部很可能会解决问题。

# sentry - 如何停止哨兵服务器

> ID：14617681
> 
> 赞同：9
> 
> 时间：2013-01-31T02:51:45.073
> 
> 标签：sentry

我知道如何开始哨兵。

但是当我改变时`sentry.conf.py`，我怎样才能让它工作？

我运行哨兵帮助，但找不到哨兵停止或重新启动 commond。有没有办法重新启动哨兵服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-28T15:22:33.053

我自己也遇到了这个问题。我正在使用主管启动我的哨兵服务器，但由于某种原因，当我停止主管时它并没有杀死哨兵。为了解决这个问题，我跑去`sudo netstat -tulpn | grep 9000`寻找仍在运行的进程 ID。对我来说，这是独角兽。终止该进程，然后再次启动服务器，您的新设置应该会生效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-24T13:19:04.750

我正在使用 systemctl 来管理哨兵。

首先，创建一个可执行文件。`run_worker`

```
#!/bin/bash

source ~/.sentry/bin/activate
SENTRY_CONF=~/sentry sentry run worker>/var/log/sentry_worker.log 2>&1 
```

然后，创建服务文件。就像：

```
[Service]
ExecStart={YourPath}/sentry/run_worker
Restart=always
StartLimitInterval=0
[Install]
WantedBy=default.target 
```

同样创建 sentry_web.service sentry_cron.service 并使用

```
systemctl --user restart sentry_* 
```

重新启动。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-12-14T10:38:48.313

如果您使用主管运行您的工作人员，只需运行命令以重新启动所有工作人员：

```
supervisorctl
restart all 
```

或者，如果您想重新启动单个工作人员，请输入：

```
supervisorctl
status 
```

获取工人名单并使用：

```
restart worker_name 
```

它将重新启动哨兵进程并启用您的新配置。

# javascript - 如何从 iframe 中捕获“ESC”？

> ID：14617683
> 
> 赞同：1
> 
> 时间：2013-01-31T02:51:48.020
> 
> 标签：javascript, iframe

我需要捕获**esc**键来关闭我打开的 div。div 内容是 iframe。它在我打开 div 并很快按**esc**关闭它时起作用。但是当我单击 iframe 并按下键**esc**时，它对我来说不再有用了。因为它只捕获当前窗口（*此时将是 iframe 窗口*），我该如何解决？

这是我的父窗口的代码：

```
 window.onkeydown = function(e) {
           var e = e || window.event;
           if (e.keyCode === 27) {
               _this.closeDemo();
           }
       } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T03:05:50.883

如何`onkeydown`在 iframe 中添加处理程序：

```
window.onkeydown = function(e) {
    var e = e || window.event;
    if (e.keyCode === 27) {
        parent.closeDemo();
    }
} 
```

# heroku - Heroku 上带有自定义 rails 环境的 NewRelic 插件

> ID：14617684
> 
> 赞同：0
> 
> 时间：2013-01-31T02:51:51.853
> 
> 标签：heroku, newrelic

我在 Heroku 上运行的 Rails 3.2 应用程序中添加了标准的 newrelic 插件。我的应用程序的 RACK_ENV 称为 staging2。我将 newrelic.yml 文件添加到`config` 目录中。我更新了文件，在 yml 文件中添加了一个名为 staging2 的新部分。

```
staging2:
  <<: *default_settings
  monitor_mode: true 
```

部署后，我访问了 NewRelic UI。我看到以下消息：

```
Welcome, ! Thanks for taking advantage of our partnership with heroku.
Set up your app! 
```

由于自定义 RAILS_ENV 名称，我假设 NewRelic 没有检测到我的应用程序。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T21:01:28.643

问题是由于我的错误导致的，我没有将`newrelic_rpm`gem 添加到`Gemfile`. 过去当我使用`newrelic`Rails 2.x 时，我没有将 gem 添加到 Gemfile。

添加gem后问题就消失了。

# javascript - 我无法从 json 加载数据，我正在使用骨干网

> ID：14617685
> 
> 赞同：-2
> 
> 时间：2013-01-31T02:51:53.510
> 
> 标签：javascript, backbone.js

我正在尝试将内容加载到页面而不向我收费，可能是视图问题，因为如果我工作，模型会获得数据。骨干js不太了解，我正在寻找使用JSON示例在网站上显示内容。

请问你能帮帮我吗？

```
 <!DOCTYPE html>
  <html>
<head>
    <meta charset="utf-8"/>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <script src="http://documentcloud.github.com/underscore/underscore-min.js"></script>
    <script src="http://documentcloud.github.com/backbone/backbone-min.js"></script>
    <script>

        $(function() {  

            var Article = Backbone.Model.extend();

            var ArticleList = Backbone.Collection.extend({
                model: Article,
                url: 'https://support.mozilla.org/en/search?topics=hot&a=1&w=1&format=json&callback=?',
                parse: function(response) {
                    return response.results;
                }
            });               

            var articleView = Backbone.View.extend({
                initialize: function(){
                    this.render();
                },
                render: function(){                        
                    var tmpl = _.template( $("#articleTemplate").html(), {} );
                    var html = template.tmpl(this.model.toJSON());                       
                    this.$el.html( html );
                }
            });

            var articles = new ArticleList();

            var articlesView = new articleView({model: articles});

            articles.fetch();

            articles.bind('reset', function() {                   
               articlesView.render();
            });                

        });
    </script>
    <title>Fortified Studio</title>
</head>
<body>
    <div id="articles"></div>

    <script id="articleTemplate" type="text/template">

        <div class="results">
            <div class="search_summary">
                <%= search_summary %>
            </div>
        </div>

    </script>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T04:38:48.360

您的代码中有几个错误。请参阅下面（工作）代码中的注释：

```
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script src="http://documentcloud.github.com/underscore/underscore-min.js"></script>
<script src="http://documentcloud.github.com/backbone/backbone-min.js"></script>
<script>

    $(function() {  

        var Article = Backbone.Model.extend();

        var ArticleList = Backbone.Collection.extend({
            model: Article,
            url: 'https://support.mozilla.org/en/search?topics=hot&a=1&w=1&format=json&callback=?',
            parse: function(response) {
                return response.results;
            }
        });               

        var articleView = Backbone.View.extend({
            initialize: function(){
               // You haven't fetched your collection yet. So don't render. 
               //this.render();
            },
            render: function(){                        
                // Underscore.js template assumes data is sent into _.template(...)
                // You store a Collection of Models in this.model. Hence, wrap the Collection json into one json "results" attribute.
                var html = _.template( $("#articleTemplate").html(), {results: this.model.toJSON()} );
                //var html = template.tmpl(this.model.toJSON());                       
                this.$el.html( html );
                return this;
            }
        });

        var articles = new ArticleList();

        var articlesView = new articleView({model: articles});

        // Bind to the reset event before fetching. Fetch will raise "reset" event.
        // The render function should return this, and hence, you can use $el and append it to #articles.
        articles.bind('reset', function() {                   
           $("#articles").append(articlesView.render().$el);
        }); 

        // everything is wired up. Now fetch, will will start a chain reaction, i.e. render the view, and append to #articles
        articles.fetch();               

    });
</script>
<title>Fortified Studio</title>
</head>
<body>
<div id="articles"></div>

<script id="articleTemplate" type="text/template">

    <div class="results">
        <div class="search_summary">
            <ul>
            <% _.each(results, function(res) { %> <li><%= res.search_summary %></li> <% }); %>
            </ul>
        </div>
    </div>

</script>
</body>
</html> 
```

# php - php t_array 错误

> ID：14617690
> 
> 赞同：0
> 
> 时间：2013-01-31T02:52:28.393
> 
> 标签：php

> **可能重复：**
> [用于取消引用函数结果的 PHP 语法](https://stackoverflow.com/questions/742764/php-syntax-for-dereferencing-function-result)

我在 php 5.4 中编写了一些代码，而我的服务器只能运行 5.3，因此我需要修复一些语法错误。

当我到达该站点时，我收到此错误

```
 Parse error: syntax error, unexpected '[' in /home/content/51/6663351/html/application/controllers/admin.php on line 247 
```

第 247 行是

```
if(count($results->result()) > 0)
            {
 this here>>>   $data['data'] = $results->result()[0];
                $data['cats'] = $this->db->get('category')->result();
                $data['curCat'] = $this->db->get('products_categories',     array('product_id' => $id))->result()[0]; 
```

所以我尝试将代码更改为：

```
 $data = array();
 if(count($results->result()) > 0)
            {
                $data['data'] = $results->result()[0];
                $data['cats'] = $this->db->get('category')->result();
                $data['curCat'] = $this->db->get('products_categories', array('product_id' => $id))->result()[0]; 
```

如何添加 $data = array(); 没有解决任何问题。有谁知道出了什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T02:54:20.903

这`$results->result()[0]`称为数组解引用。它是 PHP 5.4 中的新功能，因此您无法在 5.3 中执行此操作。您需要先返回该数组元素，然后在代码中使用它。

从手册：

```
<?php
function getArray() {
    return array(1, 2, 3);
}

// on PHP 5.4
$secondElement = getArray()[1];

// previously
$tmp = getArray();
$secondElement = $tmp[1];

// or
list(, $secondElement) = getArray();
?> 
```

# r - OpenBUGS322 到 R 通信

> ID：14617691
> 
> 赞同：0
> 
> 时间：2013-01-31T02:52:29.537
> 
> 标签：r

我有一个关于尝试使用 R2OpenBUGS 使 OpenBUGS322 与 R 一起运行的基本问题。

运行多个试用脚本时（请参阅下面的一个示例），我收到一个错误

矩阵（，n.sims，n.parameters）中的错误：无效的'nrow'值（太大或NA）

通过搜索，我发现其他人使用 OpenBUGS322 和 OpenBUGS321 应该可以正常工作。但是，任何人都可以建议我在哪里可以找到旧版本。我需要 OpenBUGS321setup.exe，但在任何地方都找不到。

（我已经修复了其他几个问题，例如 dbus 配置，当 XQuartz 提示时，OpenBUGS 现在会打开）

这里有更多信息来了解我是否走在正确的道路上。

我正在运行版本：Mac OS X 10.5.8 Wine 1.4.1 XQuartz 2.6.3 OpenBUGS322

WinBUGS 教科书中的试用代码，添加了 WINE 和 OpenBUGS 的路径（不是 100% 确定是否正确）

非常感谢您的帮助。

脚本：

```
y10<-rnorm(n=10, mean=600, sd=30)
y1000<-rnorm(n=1000, mean=600, sd=30)
summary(lm(y1000~1))
library(R2OpenBUGS)

#setwd("/Users/Pavel/wine/ProgramFiles/OpenBUGS322")
setwd("/Users/Pavel/Documents/R/OpenBUGS")
sink("model.txt")
 cat("
model{
population.mean~dunif(0,5000)
precision<-1/population.variance
population.variance<-population.sd* population.sd
 population.sd~dunif(0,100)
for(i in 1:nobs){
 mass[i]~dnorm(population.mean, precision)
}
}
", fill=TRUE)
 sink()

WINE="/opt/local/bin/wine"
WINEPATH="/opt/local/bin/winepath"
OpenBUGS.pgm="/Users/Pavel/wine/ProgramFiles/OpenBUGS322/OpenBUGS.exe"

#Package the data to be handed to OpenBUGS
win.data<-list(mass=y1000, nobs=length(y1000))

#Function to generate starting values
inits<-function()
list(population.mean=rnorm(1,600), population.sd=runif(1,1,30))

#Parameters to be monitored
params<-c("population.mean", "population.sd", "population.variance")

#MCMC settings
nc<-3     #Number of chains
ni<-1000  #Number of draws for each chain
nb<-1     #number of draws to discard as burn -in
nt<-1     #Thinning rate

out<-bugs(data=win.data, inits=inits, parameters.to.save=params, model.file="model.txt",    n.thin=nt, n.chains=nc, n.burnin=nb, n.iter=ni, OpenBUGS.pgm=OpenBUGS.pgm, WINE=WINE,     WINEPATH=WINEPATH,useWINE=T) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T02:25:21.187

你可以`rjags`改用吗？语法几乎相同：

```
require(rjags)

modelstring <- "
    model {
        for(i in 1:nobs){
            mass[i] ~ dnorm(m, prec) # precision
        }
        m ~ dunif(0, 5000)
        prec <- 1/sqrt(SD) # convert to Std Deviation
        SD ~ dunif(0, 100)
    }
"
writeLines(modelstring,con="model.txt")

y1000 <- stats::rnorm(n=1000, mean=600, sd=30)

dataList <- list(
    mass = y1000,
    nobs = length(y1000)
    )

initsList <-  list(
    m = stats::rnorm(n=1, mean=600, sd=1),
    SD = stats::runif(n=1, min=1, max=30)
    )

parameters <- c("m","SD") # to be monitored.
adaptSteps <- 100         #  "tune" the samplers.
burnInSteps <- 100        #  "burn-in" the samplers.
nChains <- 3              # Number of chains to run.
numSavedSteps <-2000      # Total number of steps in chains to save.
thinSteps <- 1            # Number of steps to "thin" (1=keep every step).
nPerChain <- ceiling(( numSavedSteps * thinSteps ) / nChains) # Steps per chain

jagsModel <- rjags::jags.model(
    "model.txt", data=dataList,
    inits=initsList, n.chains=nChains,
    n.adapt=adaptSteps)

stats::update(jagsModel, n.iter=burnInSteps)

MCMC1 <- as.matrix(rjags::coda.samples(
    jagsModel, variable.names=parameters,
    n.iter=nPerChain, thin=thinSteps))

SDsample <- matrix(MCMC1[,grep("SD",colnames(MCMC1))],
                ncol=length(grep("SD",colnames(MCMC1)))) 
```

然后，您可以转换为方差：

```
SDsample^2 
```

如果您正在寻找 OpenBUGS321setup.exe，您应该可以在[此处](http://www.openbugs.info/w/Downloads)找到它。我注意到它在 WINE 下没有经过很好的测试。Linux模拟器有可能吗？

# sql - 自动改表SQL

> ID：14617695
> 
> 赞同：-3
> 
> 时间：2013-01-31T02:53:10.900
> 
> 标签：sql, sql-server, sql-server-2005

我有两个相互连接的表。我想要它，如果第一个表值更改它会自动更改第二个表的值。这个问题的任何**魔术代码**。
这是我的第一张桌子：

```
 First table:
      TIMESTAMP            Status
    1/29/2013 08:00          0
    1/29/2013 08:30          0
    1/29/2013 09:00          1

 Second table:
     Status                DATETIME_INPUT
        0                 1/29/2013 08:00
        0                 1/29/2013 08:30 
```

第一个表控制第二个表，我每次添加输入时也要第一个表，它也会自动更改第二个表。

例如，我在第一个表中添加最后一行，但它不会更改第二个表，我希望它自动更改

请给出一些解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T02:57:41.333

这是一个非常基本的触发器，用于在第二个表中插入数据，因为它被插入到第一个表中。

```
CREATE TRIGGER trig_Update_SecondTable
ON [FirstTable]
FOR INSERT
AS
Begin
    Insert into [SecondTable] (Status, DATETIME_INPUT) 
    Select Distinct i.Status, i.TIMESTAMP
    from Inserted i
End 
```

在这里查看一些其他信息：

[http://msdn.microsoft.com/en-us/library/ms189799.aspx](http://msdn.microsoft.com/en-us/library/ms189799.aspx)

祝你好运。

# dynamics-crm-2011 - MS CRM 2011 - 新 Polaris UI - 我如何获得它？

> ID：14617696
> 
> 赞同：2
> 
> 时间：2013-01-31T02:53:11.217
> 
> 标签：dynamics-crm-2011, dynamics-crm-online, dynamics-crm-2013

如何获得本应在 12 月发布的新 Polaris UI？我听说它被释放然后被召回。如何访问客户端演示的 beta 副本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T09:26:57.513

如果您指的是“本地”版本，那么它还没有发布。

对于客户演示，您可以注册[CRM Online 的 30 天免费试用](http://crm.dynamics.com/en-gb/trial-overview)（无需信用卡详细信息）。从 1 月中旬左右开始，所有 CRM Online 试用版都会自动预加载 Polaris 更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T23:54:25.430

由于错误，更新汇总 12 已发布并收回。

但是，如果您访问 crm.dynamics.com 并注册一个免费的 CRM On-line 帐户（在您需要付款之前将持续四个星期），您将得到您想要的。

据我了解，最大的变化是应该替代表单的流程驱动的 UI。还没有尝试过，但看起来很有趣。

坦率地说，我期待这个版本会有更多的视觉变化，所以我有点失望。但这绝对是朝着正确方向迈出的一步！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T15:50:23.190

CRM 2011 On-Premise 的 Rollup 12 (v2) 刚刚重新发布。一探究竟

[http://www.microsoft.com/en-us/download/details.aspx?id=36229](http://www.microsoft.com/en-us/download/details.aspx?id=36229)

# mysql - 以我在中提供 OR 语句的相同顺序订购 mysql 查询

> ID：14617697
> 
> 赞同：0
> 
> 时间：2013-01-31T02:53:14.620
> 
> 标签：mysql, sql

这是一个查询：

```
SELECT * 
  FROM table
 WHERE id = 1
    OR id = 100
    OR id = 50 
```

请注意，我按以下顺序提供了 ID：1,100,50。

我希望这些行按以下顺序返回：1,100,50。

目前，我回来了 1,50,100 - 基本上是按升序排列。假设表中的行也按升序插入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T03:15:38.227

使用 MySQL 特定的[FIND_IN_SET](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set)函数：

```
 SELECT t.* 
    FROM table t
   WHERE t.id IN (1, 100, 50)
ORDER BY FIND_IN_SET(CAST(t.id AS VARCHAR(8)), '1,100,50') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T03:01:29.553

解决此问题的另一种方法是将列表放在子查询中：

```
select table.*
from table join
     (select 1 as id, 1 as ordering union all
      select 100 as id, 2 as ordering union all
      select 50 as id, 3 as ordering
     ) list
     on table.id = list.id
order by list.ordering 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T02:54:24.173

你可以这样做`ORDER BY`：

```
ORDER BY
   id = 1 DESC, id = 100 DESC, id = 50 DESC 
```

`0``1`在之前`ORDER BY`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T03:03:05.113

试试这个

```
SELECT * 
FROM new
WHERE ID =1
OR ID =100
OR ID =50
ORDER BY ID=1 DESC,ID=100 DESC,ID=50 DESC ; 
```

[http://www.sqlfiddle.com/#!2/796e2/5](http://www.sqlfiddle.com/#!2/796e2/5)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T07:30:43.593

... WHERE id IN (x,y,x) ORDER BY FIELD (id,x,y,z)

# c++ - 子字符串给出看似随机的结果，即使它的参数看起来正确

> ID：14617700
> 
> 赞同：2
> 
> 时间：2013-01-31T02:53:34.627
> 
> 标签：c++, string, substring

我的代码应该读取两个或多个作者姓名，用逗号分隔，然后返回第一作者的姓氏。

```
cout << "INPUT AUTHOR: " << endl ;
getline(cin, authors, '\n') ;

int AuthorCommaLocation = authors.find(",",0) ;
int AuthorBlankLocation = authors.rfind(" ", AuthorCommaLocation) ;

string AuthorLast = authors.substr(AuthorBlankLocation+1, AuthorCommaLocation-1) ;
cout << AuthorLast << endl ; 
```

但是，当我尝试检索`AuthorLast`子字符串时，它返回的文本从三到一个字符过长。对我的错误有任何见解吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T02:54:55.880

C++`substr`方法不采用开始和结束位置。相反，它需要一个起始位置和许多要读取的字符。结果，您传入的参数告诉`substr`从位置开始`AuthorBlankLocation + 1`，然后`AuthorCommaLocation - 1`从该点向前读取字符，这可能是太多字符了。

如果要指定开始和结束位置，可以使用`string`构造函数的迭代器版本：

```
string AuthorLast(authors.begin() + (AuthorBlankLocation + 1),
                  authors.begin() + (AuthorCommaLocation - 1)); 
```

希望这可以帮助！

# combobox - 绑定选择的Angularjs默认值

> ID：14617705
> 
> 赞同：2
> 
> 时间：2013-01-31T02:54:11.103
> 
> 标签：combobox, angularjs

> **可能重复：**
> [如何为 AngularJS 生成的选择列表进行预选？](https://stackoverflow.com/questions/14297560/how-to-make-a-preselection-for-a-select-list-generated-by-angularjs)

在角度教程中，他们设置了一个 sortOrder 范围变量，该变量默认按选择排序为“最新”。

在我的[小提琴](http://jsfiddle.net/Vbahole22/WXLte/1/)中，我正在做类似的事情，但没有选择我的选择值。相反，我得到了空白条目，就好像我没有在范围内设置任何值一样。但是我可以看到我的排序顺序，并且我正在发出选择的值并且它是预设的。

```
 //set a default this way also, but not updating the dropdown
$scope.ddlFilter = {
    name: "All Open Events",//doesn't matter what this is, only cares about value
    value: "ALL"//"OPEN"
}; 
```

我知道我可以使用 ng-init 来设置默认值，但我也希望能够这样做。有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T03:49:56.707

尝试使用对象而不是对象数组。它将允许您通过字符串与数组位置（例如`scope.eventFilters[0]`.

```
$scope.eventFilters = {
    "OPEN": "All Open Events",
    "UNMAPPED": "All Un-Mapped Events",
    "MAPPED": "All Mapped Events",
    "CLOSED": "All Closed Events (past 8 hours)",
    "ALL": "All Events",
    "OTHER": "Other OpCenter Open Events"
}; 
```

然后将默认值定义为字符串（上面对象的键）：

```
$scope.ddlFilter = "MAPPED"; 
```

然后在页面上将您的选择更改为

```
<select ng-model="ddlFilter" ng-options="k as v for (k, v) in eventFilters"></select> 
```

并且您的过滤器不再需要 a `.value`，因此它将变为：

```
<tr ng:repeat="event in events  | myEventFilter:ddlFilter | orderBy:sort.column:sort.descending"> 
```

在此处查看您修改后的代码：http: [//jsfiddle.net/WXLte/2/](http://jsfiddle.net/WXLte/2/)

# xcode - 如何在 Xcode 中禁用静态框架的警告？

> ID：14617706
> 
> 赞同：6
> 
> 时间：2013-01-31T02:54:14.150
> 
> 标签：xcode, opencv, frameworks, warnings, clang

我想用`-Weverything`. 不幸的是，我的项目使用 opencv2.framework（作为 iOS 的静态框架构建），并且该框架的头文件不`-Weverything`干净。

从命令行使用 clang 时，我可以使用该`-isystem`标志来指定编译器警告应忽略的系统头文件。框架有类似的功能吗？如果是这样，如何从 Xcode 访问它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-03-19T22:44:59.213

对我来说，大多数警告都是由文档评论引起的。所以我去项目 - >构建设置并将文档注释值设置为否。它也隐藏了静态框架的所有警告。

# android - android Staticlayout 绘制文字模糊

> ID：14617707
> 
> 赞同：1
> 
> 时间：2013-01-31T02:54:17.907
> 
> 标签：android, text, draw

静态布局绘制文字，文字模糊，权重不均，不清楚。

我想绘制双字节字符的文本（如中文、日文等）

谁知道如何解决这个问题。以及如何在 StaticLayout 中设置字体

```
TextPaint textPaint = new TextPaint();
//  textPaint.setARGB(1, 0, 0, 0); 
textPaint.setFlags(TextPaint.FAKE_BOLD_TEXT_FLAG);
textPaint.setColor(Color.rgb(0, 0, 0));
textPaint.setFakeBoldText(true);
textPaint.setTextSize(16.0F);
StaticLayout layout = new StaticLayout(cityName,textPaint,w/WCOUNT-2-2,
                        Alignment.ALIGN_CENTER,1.0F,0.0F,true); 

int wh = layout.getHeight();
int offerseth = rect.height()/2-wh/2;
int ww = layout.getWidth();
int offersetw = rect.width()/2-ww/2;
canvas.translate(rect.left+offersetw,rect.top+offerseth); 
layout.draw(canvas);
canvas.translate(-(rect.left+offersetw),-(rect.top+offerseth)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-11-03T17:34:15.947

对于您较小的字体大小，我看到您没有这样做：

```
textPaint.setAntiAlias(true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T05:57:00.913

我找到了自己的答案。

使用的字体太小。更改字体大小以`20.0F`使文本看起来不错。

# sql - 查找由另一个表中的两列定义的范围（箱）中的值列表，并从第三列中获取相应的值

> ID：14617711
> 
> 赞同：1
> 
> 时间：2013-01-31T02:54:34.023
> 
> 标签：sql, join, hiveql

您好，我有两张桌子 T1 和 T2。T1 有一列整数值。并且 T2 具有由两列定义的范围和每个范围的相应值......像这样：

```
range_min range_max  corr_value
   5         10         1020
   11        15         5000 
```

假设我希望能够从 T2 中为 T1 的每个整数获取“值”，具体取决于整数值属于哪个范围。比如说，我在 T1 中有 6、7 和 12 个。那么，理想的结果应该是这样的：

```
integer_val  corr_value
     6          1020
     7          1020
     12         5000 
```

请注意，我没有什么可以加入的。我不知道如何使用 SQL 来做到这一点。我不知道它是否会有所作为，但我正在使用 HiveQL。

我真的很感谢你的帮助。谢谢！

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T03:02:16.660

您可以使用非等值连接。如果您的 SQL 支持`between`，请使用

```
select t1.integer_val, t2.corr_value
from t1
left outer join t2 on t1.integer_val between t2.range_min and t2.range_max 
```

否则，使用

```
select t1.integer_val, t2.corr_value
from t1
left outer join t2 on t1.integer_val >= t2.range_min and t1.integer_val <= t2.range_max 
```

[这是对 sqlfiddle 上的 mysql 演示的参考。](http://sqlfiddle.com/#!2/4d5b8/2)

仅当`t1`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T03:03:05.850

```
select integer_val, corr_value
from t1 join t2 on integer_val >= range_min
and integer_val >= range_max 
```

# d3.js - nvd3 图表中的单选按钮

> ID：14617713
> 
> 赞同：2
> 
> 时间：2013-01-31T02:54:34.237
> 
> 标签：d3.js, nvd3.js

我试图稍微改变 nvd3 水平图表的行为。

现在水平图表有一个图例，可以选择同时选择多个图例项。我只是想一次只显示一个项目，以便在选择一个系列时，取消选择其他系列。

```
var data = [
  {
    "key": "Series1",
    "color": "#d62728",
    "values": [
      { 
        "label" : "A" ,
        "value" : 1
      } , 
      { 
        "label" : "B" ,
        "value" : 8
      } , 
    ]
    },
    {
    "key": "Series2",
    "color": "#1f77b4",
    "values": [
      { 
        "label" : "C" ,
        "value" : 25
      } , 
      { 
        "label" : "D" ,
        "value" : 16
      } , 

    ]
  }
]

nv.addGraph(function() {
var chart = nv.models.multiBarHorizontalChart()
    .x(function(d) { return d.label })
    .y(function(d) { return d.value })
    .margin({top: 30, right: 20, bottom: 50, left: 175})
    .showValues(true)
    .tooltips(false)
    .showControls(false);

chart.yAxis
    .tickFormat(d3.format(',.2f'));

d3.select('#chart svg')
    .datum(data)
  .transition().duration(500)
    .call(chart);

nv.utils.windowResize(chart.update);

return chart;
}); 
```

我还在第 6264 到 6272 行修改了 nv.d3.js 的 multiBarHorizo​​ntalChart 部分：

```
//============================================================
// Event Handling/Dispatching (in chart's scope)
//------------------------------------------------------------
data.map(function(d,i){
  d.disabled= true;
  return d;
}); 
```

这使它的行为类似于单选按钮，但是当图表首次加载时，Series1 和 Series2 都是可见的。

所以我的问题是“你如何让只有一个系列可见？”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T05:55:25.940

我最终更换

```
var barsWrap = g.select('.nv-barsWrap').datum(data.filter(function(d, i) {return !d.disabled })) 
```

在 nv.d3.js 文件中包含以下内容：

```
 var all_undefined = true;
 for (var i=0; i < data.length; i++){  
   if (data[i].disabled === true || data[i].disabled === false){
     all_undefined = false;
   }
 }
  if (all_undefined){
    var barsWrap = g.select('.nv-barsWrap')
      .datum(data.filter(function(d, i) {
        if (i===0){
        wrap.selectAll('.nv-series').classed('disabled', true);
        wrap.select('.nv-series').classed("disabled", false);
        return !d.disabled
        }
      }))  
  }
  else{
    var barsWrap = g.select('.nv-barsWrap')
      .datum(data.filter(function(d, i) {return !d.disabled }))
  } 
```

不是一个非常优雅的解决方案，但它可以从水平条形图中的图例制作单选按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-01T05:58:25.297

我遇到了同样的问题，最终创建了一个补丁来解决这个问题，我相信，这是一种针对最新版本的更清洁的方法。您可以在此处关注问题和拉取请求：

[https://github.com/novus/nvd3/issues/168](https://github.com/novus/nvd3/issues/168)

# c# - 如何使用 VS Fakes 有条件地存根方法？

> ID：14617714
> 
> 赞同：3
> 
> 时间：2013-01-31T02:54:42.953
> 
> 标签：c#, unit-testing, moq, vs-unit-testing-framework

使用[moq](http://code.google.com/p/moq/)，您可以在不同的输入条件下多次调用同一方法上的 Setup：

```
// Arrange
Mock<IObject> stub = new Mock<IObject>();
stub.Setup(method => method.Foo(It.IsAny<int>())
    .Returns<int>(value => value);
stub.Setup(method => method.Foo(It.Is<int>(t => t == 100)
    .Returns<int>(value => value * 1.10);

var sut = new TestedObject(stub.Object);

// Act
var actual = sut.Bar();
... 
```

...等等。在这种情况下，Foo 方法采用一个整数，并根据传递的值确定该方法的实现。

有没有办法用 Visual Studio fakes 来完成这个？代码看起来像这样：

```
// Arrange
var stub = new StubIObject
{
    Foo = (value) => value,    // This covers the default case (It.IsAny<T>)
};

var sut = new TestedObject(stubIObject);

// Act
var actual = sut.Bar(); 
```

但是您将如何设置其他条件案例？

编辑：我应该提到我确实意识到这是一个奇怪的设置，通常你不会在一个单元测试中测试存根的不同实现。这是一个纯粹的学术问题 - 我不会将这种类型的代码放在单元测试中......可能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T12:14:47.187

因为使用 Fakes，您基本上可以提供委托来充当生成的存根方法的实现，您可以将任何条件逻辑放入该委托中。

在您的情况下，如果与 moq 示例等效，则以下设置：

```
var stub = new StubIObject
{
    Foo = (value) => 
       {
           if (value == 100)  
              // This covers the case (It.Is<int>(t => t == 100))
              return value * 1.10;
           return value;    // This covers the default case (It.IsAny<T>)
        }
}; 
```

# php - 在 php 中使用 wkhtmltoimage

> ID：14617720
> 
> 赞同：4
> 
> 时间：2013-01-31T02:55:38.337
> 
> 标签：php

当我在终端中使用 wkhtmltoimage 时，它​​运行良好。但是在php中使用时会出现一些问题。问题是：php代码：

```
<?php
  $command = './wkhtmltoimage --width 164 --height 105 --quality 100 --zoom 0.2 http://www.google.com file/test.jpg';
  ob_start();
  passthru($command);
  $content = ob_get_clean();
  echo $command;
  echo $content;
?> 
```

它有效。当我在终端中尝试相同的命令时，它也运行良好。

但是当我尝试其他链接时，它无法正常工作。

```
<?php
  $command = './wkhtmltoimage --width 164 --height 105 --quality 100 --zoom 0.2 http://codante.org/linux-php-screenshot file/test.jpg';
  ob_start();
  passthru($command);
  $content = ob_get_clean();
  echo $command;
  echo $content;
?> 
```

它确实有效。但是当我在终端中尝试相同的命令时。它有效！请帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T03:08:42.973

我猜出于安全原因，在用于 Web 服务器`passthru`的文件中禁用了它。`php.ini`尝试执行以下代码：

```
function passthru_enabled() {
    $disabled = explode(', ', ini_get('disable_functions'));
    return !in_array('exec', $disabled);
}
if (passthru_enabled()) {
    echo "passthru is enabled";
} else {
    echo "passthru is disabled";
} 
```

如果它被禁用，除非您可以编辑 php.ini 文件，否则您真的无能为力。

编辑：另外，请确保您在代码中启用错误报告，如果您尝试使用禁用的功能，它也应该显示某种警告。把它放在你的代码中：

```
error_reporting(-1);
ini_set('display_errors', 'On'); 
```

**编辑：**

如果`passthru`启用，那么我能想到命令应该由命令行而不是 PHP 正确执行的唯一原因是因为它没有正确传递到命令行。[尝试使用escapeshellarg](http://www.php.net/manual/en/function.escapeshellarg.php)在参数周围添加引号。

```
$url = escapeshellarg('http://codante.org/linux-php-screenshot');
$command = "./wkhtmltoimage --width 164 --height 105 --quality 100 --zoom 0.2 $url file/test.jpg"; 
```

您可能还想利用 的第二个参数`passthru`，它返回命令的退出状态。非零值表示存在错误。

```
passthru($command, $status);
if ($status != 0) {
    echo "There was an error executing the command. Died with exit code: $status";
} 
```

有关这些退出代码的列表以帮助您调试正在发生的事情，请参阅[具有特殊含义的退出代码](http://tldp.org/LDP/abs/html/exitcodes.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-01T21:47:11.873

我将 PHP exec 关键字与批处理文件一起使用。
它与 wkhtmltoimage 完美配合：
这里是：我创建了 1.html 和 1.bat 和 1.php 并将所有 3 个文件保存到 htdocs 中。

1.蝙蝠：

```
cd\
cd c:\program files\wkhtmltopdf\bin
wkhtmltoimage http://localhost/1.html C:\howzit.jpg
rem (you can write to C: but not write to htdocs folder.) 
```

1.php：

```
<?php
    exec("1.bat");
    echo "done c:\howzit.jpg";
?> 
```

PS由于本地主机内的安全设置，这些将不起作用：

```
<img src = "c:\howzit.jpg">
<img src = "file:///c:/howzit.jpg">
But you will find the new jpg file in your C: directory (WinXP) 
```

# python - Matplotlib 与 wxPython PopupMenu 合作

> ID：14617722
> 
> 赞同：2
> 
> 时间：2013-01-31T02:55:51.147
> 
> 标签：python, user-interface, matplotlib, wxpython, popupmenu

单击鼠标时，我想在窗口`matplotlib`内的图形上显示上下文菜单。`wxPython`

不幸的是，在它检测到点击后，该`PopupMenu`方法被调用，但它既不返回也不显示弹出窗口。（这是在带有 Windows 7 主机的 VirtualBox 内的 Ubuntu 12.10 中使用的股票 Python。）

到目前为止，这是我的代码；我错过了什么？即我如何让`PopupMenu`实际显示？

```
import wx
import numpy
import matplotlib
matplotlib.use('WXAgg')
from matplotlib.figure import Figure
from matplotlib.backends.backend_wxagg import FigureCanvasWxAgg as FigCanvas
from wxPython.wx import *

class MatplotlibContext(wx.Frame):
    def __init__(self):
        wx.Frame.__init__(self, None, -1, 'some title')
        self.panel = wx.Panel(self)
        self.fig = Figure()
        self.canvas = FigCanvas(self.panel, -1, self.fig)
        self.axes = self.fig.add_subplot(111)
        x = numpy.linspace(0, 6.28)
        y = numpy.sin(x)
        self.axes.plot(x, y)
        self.canvas.draw()
        self.canvas.mpl_connect('button_press_event', self.context_menu)        
        self.vbox = wx.BoxSizer(wx.VERTICAL)
        self.vbox.Add(self.canvas, 1, wx.LEFT | wx.TOP | wx.GROW)
        self.panel.SetSizer(self.vbox)
        self.vbox.Fit(self)

    def context_menu(self, event):
        print 'in context_menu callback: clicked at (%g, %g)' % (event.x, event.y)
        menu = wxMenu()
        item_id = wxNewId()
        menu.Append(item_id, 'item') 
        wx.EVT_MENU(menu, item_id, self.callback)
        self.PopupMenu(menu, wx.Point(event.x, event.y))
        menu.Destroy()

    def callback(self, event):
        print 'menu selection: %r' % event.GetId()

app = wx.PySimpleApp()
app.frame = MatplotlibContext()
app.frame.Show()
app.MainLoop() 
```

**编辑 2013-01-31**：更正了代码中的错字。修改后的问题：

上面的代码不适用于我在 VirtualBox 中运行 Ubuntu 12.10 或直接安装的 12.04 的两台不同的机器上，但主要适用于运行 12.10 的第四台机器。我不知道为什么会有差异。

否则，我想我现在的问题是：

*   如何解决上/下坐标问题？（如果我单击距窗口顶部一定距离，它会显示距底部的距离。）
*   如果我打开一个 PopupMenu（并可选择关闭它），那么当主窗口关闭时进程不会终止。我该如何解决？

**编辑 2013-10-02**：版本信息

对于其中一台不起作用的机器，我正在运行带有 Python 2.7.4、Matplotlib 1.2.1 和 wx 2.8.12.1 的 Ubuntu 13.04。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-01T04:30:05.713

我发现的一件事是，使用 wxpython/matplotlib 的某些组合（不确定是哪些组合），您可以通过显示来自 matplotlib 事件处理程序的模式窗口对象以某种方式锁定事件循环。问题是 matplotlib FigureCanvas 不会自动释放鼠标，因此当模式对话框尝试在鼠标释放事件触发**之前抓取输入时会发生损坏。**

似乎有一个简单的解决方案，至少对于我遇到的情况。插入：

```
event.guiEvent.GetEventObject().ReleaseMouse() 
```

在事件处理程序的开头。

# ios - NSFileManager 在文件夹中搜索图像文件

> ID：14617727
> 
> 赞同：0
> 
> 时间：2013-01-31T02:56:38.883
> 
> 标签：ios, objective-c, nsfilemanager

我正在使用 NSFileManager 搜索“index.png”文件。如果文件不存在，那么我正在尝试显示默认图像。我正在使用下面的代码，但它不起作用。我在这里做错了什么吗？

```
NSString *path;
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString path1 = [[paths objectAtIndex:0] stringByAppendingPathComponent:literature.localURL.path];
path = [path1 stringByAppendingPathComponent:@"index.PNG"];

    if ([[NSFileManager defaultManager] fileExistsAtPath:path]){
        cell.preview = [UIImage imageWithContentsOfFile:path1];
    }
    else {
        cell.preview = [UIImage imageNamed:@"Default-HTML5.PNG"];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T03:00:13.187

您正在设置路径等于两个不同的东西。例如，对其中一个使用不同的字符串

```
NSString *path1 = [[paths objectAtIndex:0] stringByAppendingPathComponent:literature.localURL.path]; 
```

并保持另一个相同

并制作“index.PNG”“index.png”。iOS 区分大小写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T03:00:36.433

```
cell.preview = [UIImage imageWithContentsOfFile: path]; 
```

引用苹果文件：

```
imageNamed:
Returns the image object associated with the specified filename.

+ (UIImage *)imageNamed:(NSString *)name
Parameters
name
The name of the file. If this is the first time the image is being loaded, the method looks for an image with the specified name in the application’s main bundle. 
```

您的 png 不在主包中，而是在您的文件夹中

```
imageWithContentsOfFile:
Creates and returns an image object by loading the image data from the file at the specified path. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T03:13:37.763

```
imageNamed: 
```

图像

> 该方法在应用程序的主包中查找具有指定名称的图像。

, 对于文档目录，您必须使用

```
[UIImage imageWithContentsOfFile: path]; 
```

如前所述`Guo Luchuan`_

# java - 使用pdfbox，为什么可以提取文本，但不能提取图像

> ID：14617728
> 
> 赞同：0
> 
> 时间：2013-01-31T02:56:51.350
> 
> 标签：java, pdf, pdfbox

我正在使用 pdfbox 从此[pdf](http://sdrv.ms/1193OSR)中提取图像和文本。我有以下用于提取文本的代码：

```
 PDFTextStripper p = new PDFTextStripper();
 String thistext=p.getText(document); 
```

哪个正确提取文本。但是，当我尝试使用`ExtractImages`类从同一个 pdf 中提取图像时，生成的图像都是 pdf 的所有页面，而不是实际的图像。那是因为pdf可能是扫描副本的原因吗？如果这是真的，那么文本是如何被提取的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T02:59:17.923

我相信它被扫描的事实是你的问题。虽然我看到扫描的 PDF 检测文本（并使其突出显示），但它仍然是图像。为了检验这个假设，我会尝试使用已知好的 PDF，例如[这个](http://www.selab.isti.cnr.it/ws-mate/example.pdf)。

# wordpress - WordPress 创建自定义功能

> ID：14617732
> 
> 赞同：7
> 
> 时间：2013-01-31T02:57:08.447
> 
> 标签：wordpress, user-roles, capability

我正在开发一个购物车插件，并计划为客户创建一个新的用户角色。

我的问题是如何创建自定义功能，以便我可以将这些自定义功能分配给新的用户角色，[这个答案](https://stackoverflow.com/questions/8198038/wordpress-capabilities-for-custom-post-type)提供了一种创建新功能的方法，但它只是原始功能的新名称。

谁能解释如何创建一个控制一些自定义功能的全新功能？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2018-02-15T16:28:00.367

您首先应该了解，Wordpress 用户角色就像一组功能一样简单。话虽如此，既然你说你正在创建一个插件，我想你对编码并不陌生，因此不害怕编写你的解决方案而不是为此使用另一个插件。

此代码应帮助您创建新用户角色并向其添加自定义功能。

```
<?php

// create a new user role

function wpeagles_example_role()
{
    add_role(
        'example_role',
        'example Role',
        [
            // list of capabilities for this role
            'read'         => true,
            'edit_posts'   => true,
            'upload_files' => true,
        ]
    );
}

// add the example_role
add_action('init', 'wpeagles_example_role'); 
```

要向此用户角色添加自定义功能，请使用以下代码：

```
//adding custom capability
<?php
function wpeagles_example_role_caps()
{
    // gets the example_role role object
    $role = get_role('example_role');

    // add a custom capability 
    // you can remove the 'edit_others-post' and add something else (your     own custom capability) which you can use in your code login along with the current_user_can( $capability ) hook.
    $role->add_cap('edit_others_posts', true);
}

// add example_role capabilities, priority must be after the initial role     definition
add_action('init', 'wpeagles_example_role_caps', 11); 
```

进一步参考：[https ://developer.wordpress.org/plugins/users/roles-and-capabilities/](https://developer.wordpress.org/plugins/users/roles-and-capabilities/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-04T04:13:21.577

您可以通过插件创建自定义角色和功能。自定义代码提供了两个选项，或者您可以使用现有插件。

对于自定义代码： [https ://wordpress.stackexchange.com/questions/35165/how-do-i-create-a-custom-role-capability](https://wordpress.stackexchange.com/questions/35165/how-do-i-create-a-custom-role-capability)

使用现有插件： [用户角色和功能](https://wordpress.org/plugins/user-roles-and-capabilities/)

# c# - 用逗号插入数值

> ID：14617733
> 
> 赞同：0
> 
> 时间：2013-01-31T02:57:08.997
> 
> 标签：c#, asp.net-mvc

我有一个`MVC`用 编写的应用程序，`C#`它将学生宿舍存储在数据库中。学生的 cote 可能是`20/20`, `11/20`,`12.3/20`

教师必须将此值写入表单输入，然后提交表单。

没有逗号的数字一切正常。但是每次我尝试在表单字段中插入 12.3 时，都会收到以下错误消息：

> “值 12.3 对 StudentCot 无效”

我改变了类型`StudentCot (decimal, float, double )`没有成功。

是否存在带有逗号的数字的表示法数据类型？任何想法？请帮忙，我想要这样的东西

```
 //...
  //[DataType(DataType.NumberWithComma)]
public float StudentCot{get;set;} 
```

表字段类型是真实的（sql server）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:42:16.553

验证使用`culture info`来自当前的`thread`. 这可能设置为逗号作为小数点符号。

如果您只接受点作为十进制符号，您可以将应用程序设置为在使用点作为十进制符号的文化下运行。

您可以在每个请求中使用一行代码来做到这一点

```
Thread.CurrentThread.CurrentCulture = CultureInfo.GetCultureInfo("en-US");
Thread.CurrentThread.CurrentUICulture = CultureInfo.GetCultureInfo("en-US"); 
```

或者你可以把它放在 web.config

```
<globalization uiCulture="en" culture="en-US" /> 
```

如果要允许使用点和逗号，则必须将字段设为字符串并在服务器上进行验证和转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T05:35:11.730

当前文化中似乎有“，”的用法/您可以尝试更改 Thread.CurrentThread.Culture 中的文化或更改“。” 到“，”之前发送它来解析

# android - Android Softkeyboard 在新活动上按下后退按钮也会关闭软键盘

> ID：14617737
> 
> 赞同：0
> 
> 时间：2013-01-31T02:57:55.340
> 
> 标签：android, android-softkeyboard

我正在使用 Android Google API 10 并在运行 Gingerbred 的真实设备上进行测试。从 SoftKeyboard 服务（来自示例），我正在调用一个关于按下键的帮助对话框：

```
Intent i = new Intent(this, About.class);
i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(i); 
```

它显示正常。但是，当用户按下后退按钮以关闭“关于”活动时，即使是软键盘也会消失（如果在撰写视图中已经没有任何内容，例如在消息中，它会在新消息处返回）。

注意：我可以使用 onBackPressed() 禁用 About.class 上的后键，但这不是我想要的。类似地，无法在 SoftKeyboard 类中禁用后键，但这不是我想要实现的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-23T15:31:46.887

几个想法。

我有一个类似的问题并通过插入这个来解决它：

```
public void showKbd(View view) {
    if(!(mgr==null)) mgr.showSoftInput(page, InputMethodManager.SHOW_IMPLICIT);
} 
```

其中经理是：

```
public InputMethodManager mgr; 
```

在另一个类似的情况下，我将它放在活动的清单中：

```
android:windowSoftInputMode="stateVisible" 
```

此属性强制键盘显示。希望其中之一对您有所帮助...

# android - Android CalendarView：单击选定日期时运行活动

> ID：14617739
> 
> 赞同：1
> 
> 时间：2013-01-31T02:58:00.070
> 
> 标签：android, android-calendar, android-date, calendarview

我正在使用 CalendarView 来显示日历，并且我想在单击特定日期时启动一项活动。当点击不同的日期时，我让它工作，但在今天的日期被点击时却不行。例如：今天是 1 月 30 日。我的新活动在我单击日历上的任何其他日期时启动，但在我单击 30 日时不会启动（除非我单击另一个日期，返回，然后单击 30 日）。

我知道会发生这种情况，因为我使用了 onSelectedDayChange() 方法，但我似乎找不到在最初单击“今天”日期时运行活动的有效方法。我在我的 xml 中启用了 android:clickable 并且我将 android:onClick 设置为运行一个方法，但它永远不会被触发。有任何想法吗？

谢谢

# php - 从平面文本文件中抓取一个随机项目 - php？

> ID：14617748
> 
> 赞同：2
> 
> 时间：2013-01-31T02:59:30.233
> 
> 标签：php, random

我基本上只是想从我拥有的平面文本文件中随机抽取一份推荐信。我有代码可以将它们拉入，随机播放，并使用 foreach 语句将它们全部显示出来......但如果我只想要一个，我不确定该怎么做。我应该改变前锋吗？

```
srand((double)microtime()*1000000);
$f_contents = file_get_contents("testimonials.txt");
$line = explode("\n",$f_contents);
$noe = count($line); 
shuffle($line);
foreach ($line as $str ){
//echo code to output 
} 
```

预先感谢您的帮助！:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-31T03:01:18.053

一旦改组，只需使用数组中的第一个

```
echo $line[0]; 
```

array_rand() 而不是洗牌可能更快

```
echo $line[array_rand($line)]; 
```

# java - Facebook 身份验证不适用于 Android 手机

> ID：14617749
> 
> 赞同：1
> 
> 时间：2013-01-31T02:59:49.053
> 
> 标签：java, android, facebook-authentication, facebook-android-sdk

我制作了一个需要使用 Facebook 登录的 android 应用程序，一旦身份验证成功，我需要转到另一个意图。所以我从[这里](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/)下载了 Facebook Android SDK 。

下载并导入 Eclipse 后，我`SessionLoginExample`从那个 SDK 扩展了。在我的模拟器中它对我来说工作正常，我可以使用它登录到 Facebook 应用程序，而且一旦我登录，它也会进入另一个 Intent。

**问题陈述：-**

但是当我在真正的Android手机上安装应用程序后，问题就出现了。在 Android 手机上安装它之后，一旦打开 Facebook 登录页面，将我的用户名和密码输入其中，它就不会再有其他意图，并且有时我的控制台也会出现异常。之后，每次我收到一条消息`Facebook has stopped working`，然后我都会收到我的`Application has forced closed`.

我注意到的另一件事是 - 一旦我在 Android Phone 中打开我的应用程序，我总是在控制台中收到消息，说我`Login Failed`什至没有在 Facebook 页面中输入我的用户名和密码。

下面是我使用的代码`SessionLoginExample`-

```
@Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.fragment, container, false);

    buttonLoginLogout = (Button) view.findViewById(R.id.buttonLoginLogout);
    textInstructionsOrLink = (TextView) view.findViewById(R.id.instructionsOrLink);

    Settings.addLoggingBehavior(LoggingBehavior.INCLUDE_ACCESS_TOKENS);

    Session session = Session.getActiveSession();
    if (session == null) {
        if (savedInstanceState != null) {
        session = Session.restoreSession(getActivity(), null, statusCallback,
            savedInstanceState);
        }
        if (session == null) {
        session = new Session(getActivity());
        }
        Session.setActiveSession(session);
        if (session.getState().equals(SessionState.CREATED_TOKEN_LOADED)) {
        session.openForRead(new Session.OpenRequest(this).setCallback(statusCallback));
        }
    }

    updateView();

    return view;
    }

    @Override
    public void onStart() {
    super.onStart();
    Session.getActiveSession().addCallback(statusCallback);
    }

    @Override
    public void onStop() {
    super.onStop();
    Session.getActiveSession().removeCallback(statusCallback);
    }

    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    Session.getActiveSession().onActivityResult(getActivity(), requestCode, resultCode, data);
    }

    @Override
    public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    Session session = Session.getActiveSession();
    Session.saveSession(session, outState);
    }

    private void updateView() {
    Session session = Session.getActiveSession();
    if (session.isOpened()) {

    // After login is successful, I am going to another Intent
        Intent thesisProject = new Intent(getActivity(), ThesisProjectAndroid.class);
        startActivity(thesisProject);

    } else {
        Log.d(TAG_LOGIN_FAILED,
            "There is something wrong with your Facebook account. Please try again.");

        textInstructionsOrLink.setText(R.string.instructions);
        buttonLoginLogout.setText(R.string.login);
        buttonLoginLogout.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            onClickLogin();
        }
        });
    }
    }

    private void onClickLogin() {
    Session session = Session.getActiveSession();
    if (!session.isOpened() && !session.isClosed()) {
        session.openForRead(new Session.OpenRequest(this).setCallback(statusCallback));
    } else {
        Session.openActiveSession(getActivity(), this, true, statusCallback);
    }
    }

    private void onClickLogout() {
    Session session = Session.getActiveSession();
    if (!session.isClosed()) {
        session.closeAndClearTokenInformation();
    }
    }

    private class SessionStatusCallback implements Session.StatusCallback {
    @Override
    public void call(Session session, SessionState state, Exception exception) {
        updateView();
    }
    }
} 
```

而且我也低于例外 -

```
01-30 11:06:08.400: E/AndroidRuntime(7463): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=64206, result=0, data=null} to activity {com.facebook.samples.sessionlogin/com.facebook.LoginActivity}: java.lang.NullPointerException 
```

任何人都可以帮我解决为什么它会发生在我的手机上吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T10:21:25.787

根据我的经验，您可以通过检查 onActivityResult 中的 resultCode 来解决您显示的异常，然后再将其传递给 Session，例如：

```
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
super.onActivityResult(requestCode, resultCode, data);
if (Session.getActiveSession() != null && resultCode == RESULT_OK) {
Session.getActiveSession().onActivityResult(getActivity(), requestCode, resultCode, data);
}
} 
```

无法帮助您解决最初的问题，您的 facebook 登录不起作用，抱歉。

# php - json 中未显示的数据值

> ID：14617768
> 
> 赞同：0
> 
> 时间：2013-01-31T03:02:06.667
> 
> 标签：php, json, jsonp, highstock

我的脚本有问题，它没有显示图表和数据 搜索了整个论坛，找不到答案 为您提供我用于我的项目的代码

这是我的 js 代码：

```
$(function() {
$.getJSON('http://store.steamaccounts.me/test/jsonp.php?filename=test.json&callback=?', function(data) {

    // Create the chart
    window.chart = new Highcharts.StockChart({
        chart : {
            renderTo : 'container'
        },

        rangeSelector : {
            selected : 1
        },

        title : {
            text : 'test'
        },

        series : [{
            name : 'test',
            data : data,
            type : 'area',
            threshold : null,
            tooltip : {
                valueDecimals : 2
            },
            fillColor : {
                linearGradient : {
                    x1: 0, 
                    y1: 0, 
                    x2: 0, 
                    y2: 1
                },
                stops : [[0, Highcharts.getOptions().colors[0]], [1, 'rgba(0,0,0,0)']]
            }
        }]
    });
}); 
```

这是我的 php 代码：

```
<?php

$data = '{}'; // json string

if(array_key_exists('callback', $_GET)){

    header('Content-Type: text/javascript; charset=utf8');

    $callback = $_GET['callback'];
    echo $callback.'('.$data.');';

}else{
    // normal JSON string
    header('Content-Type: application/json; charset=utf8');

    echo $data;
} 
```

我将不胜感激任何帮助谢谢您的快速回复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T06:59:23.383

从 JQuery 1.4 开始，如果您的 JSON 文件包含错误，则 getJSON 方法会静默失败。以防万一最好检查返回的 JSON 数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T11:03:51.673

我看到你的数据是空的，所以请确保你得到任何值。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-31T03:10:55.030

我认为问题可能在于变量`$data`从未从空的 json 对象更改`{}`。您可以使用 php 函数创建一个 json 字符串`json_encode`。

`json_encode`接受一个数组作为输入并将其转换为存储为字符串的 json 兼容对象。

然后您可以回显字符串以返回到浏览器。

# c# - Reading a text from a file that contains \", but it keeps it as \\\" in code

> ID：14617770
> 
> 赞同：1
> 
> 时间：2013-01-31T03:02:15.460
> 
> 标签：c#, string, escaping

I have a text file that contains data that looks like this:

`{\"_clientId\":\"123\",\"_timestamp\":22548}` `{\"_clientId\":\"222\",\"_timestamp\":22590}`

(they have escape characters already)

When I read the file using `string[] lines = System.IO.File.ReadAllLines(@"datafile.txt");` for example, it stores the strings in `lines` as:

`"{\\\"_clientId\\\":\\\"123\\\",\\\"_timestamp\\\":22548}"` `"{\\\"_clientId\":\\\"222\\\",\\\"_timestamp\\\":22590}"`

My question is: Is there a way to store them in the string variable without the additional escape characters (store them as they appeared in the file)?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T03:03:51.680

The lines should be stored in your `string[]` exactly as they are entered in the file.

If you look at the lines in your *debugger*, the *debugger* will show the escapes for visualization purposes only. That is probably what you are seeing.

Edit:

After looking at your example in detail, the problem is that you have already escaped the quotes in your data file. The data file itself does not contain valid Json.

This should fix the problem:

```
string fixedLine = line.Replace("\\\"", "\""); 
```

Then deserialize `fixedLine`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T03:05:55.190

You will need to deserialize the file using some Deserializer. There are many available, you can use `JSON.NET` or `Servicestack.Text.` Servicestack's serializer and deserializer are the **fastest on the planet**. Using one of these , you can get your `JSON` data without escape characters and can store it or pass to the methods.

# mediawiki - 突出显示维基百科模板前的文本

> ID：14617772
> 
> 赞同：3
> 
> 时间：2013-01-31T03:02:26.653
> 
> 标签：mediawiki

Wikipedia 有一些模板可用于突出显示模板前面的文本（例如，`{{clarify span|text to clarify}}`和`{{citation needed span|text to cite}}`）。是否可以创建一个 MediaWiki 模板来突出显示任何模板旁边的文本（在这种情况下，`{{further explanation needed}}`用作模板）？

`{{clarifyUsingTemplate|{{further explanation needed}}|This is the text to clarify}}`.

# codeigniter - 在多个应用程序上共享 MY_Controller

> ID：14617773
> 
> 赞同：2
> 
> 时间：2013-01-31T03:02:35.160
> 
> 标签：codeigniter

我正在使用 CodeIgniter 的应用程序包功能在多个应用程序上加载帮助程序、配置和库。见[https://www.codeigniter.com/user_guide/libraries/loader.html](https://www.codeigniter.com/user_guide/libraries/loader.html)

现在文档建议可以在包中包含以下文件夹：

`config/ helpers/ language/ libraries/ models/`

我还有一个控制器，我希望在多个名为 MY_Controller 的应用程序中共享它，所有应用程序基础控制器都将从该控制器继承。但是，添加控制器文件夹似乎不起作用。如何跨多个应用程序共享控制器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T16:39:56.537

您可能可以使用自己的`__autoload()`函数来解决这个问题，[Phil Sturgeon 在这篇文章中介绍了类似的内容](http://philsturgeon.co.uk/blog/2010/02/CodeIgniter-base-Classes-Keeping-it-DRY)。

例如，以下按预期工作：

**索引.php**

```
<?php

/**
 * Look for any non-CI class in the libraries folder
 * @param type $class
 */

function __autoload($class)
{
 if(strpos($class, 'CI_') !== 0)
 {
  @include_once( APPPATH . 'libraries/'. $class . EXT );
 }
}

[Rest of index.php as normal] 
```

**库/MY_Controller.php**

```
<?php

class MY_Controller extends CI_Controller {

    function __construct() {
        parent::__construct();

        echo 'my_controller';
    }

} 
```

**控制器/nickbarrett.php**

```
<?php

class nickbarrett extends MY_Controller {

    function __construct() {

        parent::__construct();

        echo 'extending my_controller';

    }

    public function index() {

        echo 'index';

    }

} 
```

这意味着您不必在系统文件夹中放置任何内容。可能还有几个地方可以放置`__autoload()`函数，但 index.php 似乎是最简单的。

注意：我没有在应用程序包场景中尝试过，所以如果编辑每个应用程序的 index.php 对您来说可能不可行，我很感激。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T00:55:30.710

实际上，我设法很简单地解决了这个问题。仍然不如适当的 CI 功能理想，但基本上我在每个应用程序的 /core 文件夹中创建了文件 MY_Controller.php ，其中包含以下内容：

```
<?php
/**
 * Load the global shared MY_Controller
 */
require_once '/../../shared/core/MY_Controller.php'; 
```

这样做的好处是我不需要修改 CI 提供的任何核心文件，包括 index.php 唯一的缺点是如果我必须（曾经）重命名或移动 /shared 应用程序，我将不得不去更新每个 MY_Controller与新路径。

# python - 如何打包一个django项目？

> ID：14617774
> 
> 赞同：7
> 
> 时间：2013-01-31T03:02:41.307
> 
> 标签：python, django, package, pypi

我如何打包一个项目，以便我可以调用一些运行该项目的函数？

我知道如何打包 django 应用程序，但我的问题是如何打包 django 项目。

目前我在内部 pypi 服务器上有我的项目，可以使用以下方法将其拉下：

```
pip install [project] 
```

但是要使用它，我必须进入我的站点包，然后进入包，这样我才能运行

```
./manage.py .... 
```

还是我最好检查项目并安装应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T05:07:14.597

一种方法是使用您的发行版包管理系统创建一个包。在我的商店，我们使用 Ubuntu 的 aptitude。因此，使用 CMake 将我们的软件打包为 .deb。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T05:36:21.267

这可能不是最好的方法，但您可以使用`distribute`为您生成包装脚本：[http ://packages.python.org/distribute/setuptools.html#automatic-script-creation](http://packages.python.org/distribute/setuptools.html#automatic-script-creation)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-13T14:25:39.980

[我对自己的项目](https://github.com/danielquinn/paperless)也有同样的问题。围绕该项目的社区提出的解决方案是以多种方式将其打包用于不同的平台，但*不是*作为 PyPi 模块。

为了受欢迎，我的项目通常通过以下方式安装：

*   码头工人实例：`docker pull <project-name> && docker-compose up`
*   克隆 git 存储库：`git clone <url> && ./project/scripts/do-the-thing`
*   流浪汉：`vagrant up`

`.deb`如果小组中有更多的支持，我认为推出、`.ebuild`和是有意义的`.rpm`，但在这个阶段，人们似乎或多或少对上述内容感到满意。

# sql - 溢出了一个 int 列。超出最大整数值

> ID：14617775
> 
> 赞同：0
> 
> 时间：2013-01-31T03:02:44.660
> 
> 标签：sql

我正在尝试执行此查询，但它不喜欢它“它抛出以下异常”溢出一个 int 列。超出最大整数值。”不知道这里缺少什么

```
 select * from Schedwin.SEVT where 
ltrim(Resid)=345032 and type=5 or (type = 4 and subactid = 4)
or
(TYPE = 0)and (USER2='02-Force OT')
and ltrim(SEVT.t_start) <=  1215208800 
and ltrim(sevt.t_start) <=  1215207800
order by SEVT.TYPE 
```

我不好的 t_start 数据类型是 char 所以我修改了我的查询，如下所示，它可以工作

```
 select * from Schedwin.SEVT where 
ltrim(Resid)=345032 and type=5 or (type = 4 and subactid = 4)
or
(TYPE = 0)and (USER2='02-Force OT')
and ltrim(SEVT.t_start) <= '1215208800' 
and ltrim(sevt.t_start) <= '1215207800'
order by SEVT.TYPE 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T03:07:11.690

整数的大小为 4 个字节。您试图在一列中存储超过 4 个字节，使其溢出。使用`bigint`or`nvarchar`作为该列的类型。:-) 改变表格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T03:07:56.503

允许的最高 INT 值为 2,147,483,647。检查您的 t_start 值是否超过允许的 INT 值

# python - 调度 Python 脚本 - Linux

> ID：14617779
> 
> 赞同：0
> 
> 时间：2013-01-31T03:03:19.850
> 
> 标签：python, linux, shell

我正在尝试进行一些需要 4-6 小时的实验。

我正在使用 python 运行这些实验。有没有办法让我自动化，以便我可以一个接一个地运行实验？

我查看了`at`python中的函数。这只允许我在特定时间安排它。但是，我不知道实验什么时候结束。

你能建议一个`function`我可以用来调度甚至如何使用 shell 脚本自动化的方法吗？或一个例子

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T03:06:23.470

好吧，你可以做一个简单的方法，然后在一个 shell 脚本中批量处理它们：

```
#!/bin/bash

date
python stage1.py ; date
python stage2.py ; date
python stage3.py ; date
python stage4.py ; date
python stage5.py ; date
python stage6.py ; date 
```

然后调度或运行脚本本身。这似乎是最简单的解决方案。

调用`date`很简单，因此您可以看到每个阶段花费了多长时间。它们可能是必需的，也可能不是必需的，或者它们可以用不同的计时解决方案替换。

# excel - 比较和复制/合并 Excel 中相似行的数据

> ID：14617785
> 
> 赞同：0
> 
> 时间：2013-01-31T03:04:08.133
> 
> 标签：excel, merge, compare, rows, replicate

我在excel中有一个非常具体和棘手的情况。基本上，我的任务是对 Outlook 联系人备份进行 10 次不同的迭代并将它们合并在一起。我现在拥有的东西看起来像这样，但有 90 列和 16,000 行......

```
Name    LastName    Phone1      Phone2      Email          Notes       
Bob     Jones       123456789               bob@email.com  note1
Bob     Jones       123456789               bob@email.com  note1, note2
Bob     Jones       123456789               bob@email.com  note2
Bob     Jones       123456789   0412345678  bob@email.com  note3 
```

我想要做的是通过匹配电子邮件地址来选择相似的行，然后在电话号码列的情况下，该号码在一行中，而不是其他人将号码复制到所有记录中。

对于注释列，一些记录有一些注释块，而其他记录有相同的块加上更多，其他记录只是添加了注释。基本上它需要确定单元格的内容是否相同，并且只将缺少的内容附加到末尾。

所以最后我希望数据库看起来像这样......

```
Name    LastName    Phone1      Phone2      Email          Notes       
Bob     Jones       123456789   0412345678  bob@email.com  note1, note2, note3
Bob     Jones       123456789   0412345678  bob@email.com  note1, note2, note3
Bob     Jones       123456789   0412345678  bob@email.com  note1, note2, note3
Bob     Jones       123456789   0412345678  bob@email.com  note1, note2, note3 
```

此时我可以过滤相同的行以删除所有重复项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T04:59:37.467

这应该可以完成工作，但您可能需要调整范围。

```
Sub Remove_Duplicate()
    Dim LASTROW As Long
    Dim I As Long
    Dim J As Long
    Dim K As Long
    Dim MyVALUE As Variant
    Dim s As String, l As String
    Application.ScreenUpdating = False
    LASTROW = Range("A" & Rows.Count).End(xlUp).Row
    For I = 2 To LASTROW
        MyVALUE = Cells(I, "E")
        For J = LASTROW To I + 1 Step -1
            If (MyVALUE = Cells(J, "E")) Then
                For K = 1 To 4
                    If (Cells(I, K) = "") Then Cells(I, K) = Cells(J, K)
                Next K

                If (Len(Cells(I, "F").Text) >= Len(Cells(J, "F").Text)) Then
                    s = Cells(J, "F").Text
                    l = Cells(I, "F").Text
                Else
                    s = Cells(I, "F").Text
                    l = Cells(J, "F").Text
                End If
                If Not (s = l) Then
                     If InStr(l, s) = 0 Then
                         Cells(I, "F") = Cells(I, "F") & ", " & s
                     End If
                End If
                Cells(J, "A").EntireRow.Delete
            End If
        Next J
    Next I
    Application.ScreenUpdating = True
End Sub 
```

我假设您的笔记被分隔，`", "` 并且它当前设置为删除重复的行，但您可能需要调整代码以突出显示它们。

# c# - 有没有办法检查控制器是否禁用了 JavaScript

> ID：14617793
> 
> 赞同：2
> 
> 时间：2013-01-31T03:05:36.357
> 
> 标签：c#, javascript, .net, asp.net-mvc, browser

我很确定这是不可能的，但只是想我会把它扔在那里。如果浏览器禁用了 JavaScript，我想知道控制器是否有办法（在呈现视图之前）。我敢肯定，其他人在 SEO 上也遇到过这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T03:14:26.340

没有。您只能在视图至少渲染一次后才能知道。在这种情况下，您可以做的是发送一个 ajax 请求以确认 javascript 正在为此会话工作。

当然总有 noscript 标签：[https ://developer.mozilla.org/en-US/docs/HTML/Element/noscript](https://developer.mozilla.org/en-US/docs/HTML/Element/noscript)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T03:20:44.273

不。唯一有用的信息出现在标头中是当请求是通过 ajax 时。

作为一种解决方法（和完全破解），您可以在 html 的最顶部放置一个脚本，用于设置 cookie 并刷新页面。然后后端可以检查该 cookie 并知道是否启用了 JS。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T03:25:21.357

没有。服务器无法查看客户端以确定浏览器启用了哪些功能。但是，如果禁用了 js，您可以使用 noscript 标记来呈现内容。

如果您想记录它是否启用了分析功能，那么一旦页面加载完毕，如何在 javascript 中发送一个 ajax 调用呢？如果 js 被禁用，调用将不会通过。

# ios - URL Scheme 已安装在 iOS 中

> ID：14617799
> 
> 赞同：0
> 
> 时间：2013-01-31T03:06:08.680
> 
> 标签：ios, xcode, url, google-maps-mobile

我在我的应用程序中集成 Google Maps URL Scheme：

```
[[UIApplication sharedApplication] canOpenURL:
[NSURL URLWithString:@"comgooglemaps://"]]; 
```

如果有一些代码可以检测是否未安装 Google Map 并重定向到 App Store URL，我很好奇。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T03:52:21.333

如果返回 true，则表示已安装 Google Map 应用程序。

```
if (![[UIApplication sharedApplication] canOpenURL:[NSURL URLWithString:@"comgooglemaps://"]])
  [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"https://itunes.apple.com/en/app/google-maps/id585027354?mt=8"]];
else
  [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"comgooglemaps://"]]; 
```

# c++ - 指向对象的指针数组不会填满其分配的容量

> ID：14617807
> 
> 赞同：1
> 
> 时间：2013-01-31T03:07:16.870
> 
> 标签：c++, arrays, debugging, pointers

`Card`所以基本上我有一个像这样初始化的对象数组......

```
Card *pile[MAX]; 
```

其中`MAX`是 52。这个数组是一个名为的类的成员`CardPile`

当我尝试使用 for 循环将`CardPile`调用的实例填充到其 52 个元素的容量时，就会出现问题...... 这就是我选择这样做的方式：`drawPile`

```
char faces[] = "A23456789TJQK";
char suits[] = "SHDC";
int k = 0;
for(int i=0; i<13; i++){
    for(int j=0; j<4; j++){
        drawPile.add(new Card(faces[i], suits[j]));
        //the line below is displayed on the console for debugging purposes
        cout << drawPile.pile[k]->face << drawPile.pile[k]->suit <<  ", pile size=" << drawPile.size << endl;
        k++;
    }
} 
```

这是该`.add(Card*)`方法的代码...

```
void CardPile::add(Card *c){
    for(int i=0; i<52;i++){
        if(pile[i]){
            continue;
        } else {
            this->pile[i]=c;
            size++;
            break;
        }
    }
} 
```

...当我运行程序时，我会在控制台中显示它...

```
AS, pile size=1
AH, pile size=2
AD, pile size=3
AC, pile size=4
2S, pile size=5
2H, pile size=6
2D, pile size=7
2C, pile size=8
3S, pile size=9
3H, pile size=10
3D, pile size=11
3C, pile size=12
4S, pile size=13
4H, pile size=14
4D, pile size=15
4C, pile size=16
5S, pile size=17
5H, pile size=18
5D, pile size=19
5C, pile size=20
6S, pile size=21
6H, pile size=22
6D, pile size=23
6C, pile size=24
7S, pile size=25
7H, pile size=26
7D, pile size=27
7C, pile size=28
8S, pile size=29
8H, pile size=30
8D, pile size=31
8C, pile size=32
9S, pile size=33
9H, pile size=34
9D, pile size=35
9C, pile size=36
TS, pile size=37
TH, pile size=38
TD, pile size=39 
```

在最后一行输出之后，程序停止运行......我的问题是，为什么程序在第 39 次调用后停止，`add()`而不是完成并将数组填充到其分配的容量？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T03:13:21.347

您需要初始化桩元素，它默认具有随机值：

```
Card *pile[52] = {}; 
```

您也可以尝试使用[std::vector](http://en.cppreference.com/w/cpp/container/vector)而不是带有原始指针的数组

```
std::vector<Card> cards; 
```

# java - 对象到字符串总是给我null

> ID：14617808
> 
> 赞同：0
> 
> 时间：2013-01-31T03:07:25.703
> 
> 标签：java, tostring

基本问题，我尝试应用其他几个相关问题来解决这个问题，但这总是返回为空。

```
public class Consultant {

public Name name;
String lastName;
String firstName;
String middleName;

public Consultant (Name name){
    this.name = name;
    this.lastName = name.getLastName();
    this.firstName = name.getFirstName();
    this.middleName = name.getMiddleName();
}

public Name getName(){
    return name;
}

public void setFirstName(){
    firstName = name.getFirstName();
}

public void setMiddleName(){
    middleName = name.getMiddleName();
}

public void setLastName(){
    lastName = name.getLastName();
}

@Override
public String toString(){
    return lastName + ", " + firstName + " " + middleName;
} 
```

}

为什么我尝试在任何地方使用它作为打印输出，我看到的只是 null，null null。我已经尝试多次调整代码无济于事。

这是成功运行的测试类片段，只返回名称的空值：

```
public void consultantTimeToStringTest() {
    String fName = "Test";
    String lName = "Dude";
    Name contact = new Name(lName, fName);
    Consultant testConsultant = new Consultant(contact);
    System.out.println(testConsultant.toString()); 
```

这里也是 Name 类：

```
public class Name {

private String firstName;
private String middleName;
private String lastName;

public Name(){

}

public Name(String lastName, String firstName){

}

public Name(String lastName, String firstName, String middleName){
    this.firstName = firstName;
    this.middleName = middleName;
    this.lastName = lastName;
}

@Override
public boolean equals(Object obj) {
    if (this == obj)
        return true;
    if (obj == null)
        return false;
    if (getClass() != obj.getClass())
        return false;
    Name other = (Name) obj;
    if (firstName == null) {
        if (other.firstName != null)
            return false;
    } else if (!firstName.equals(other.firstName))
        return false;
    if (lastName == null) {
        if (other.lastName != null)
            return false;
    } else if (!lastName.equals(other.lastName))
        return false;
    if (middleName == null) {
        if (other.middleName != null)
            return false;
    } else if (!middleName.equals(other.middleName))
        return false;
    return true;
}

public String getFirstName(){
    return firstName;
}

public String getLastName(){
    return lastName;
}

public String getMiddleName(){
    return middleName;
}

@Override
public int hashCode() {
    final int prime = 31;
    int result = 1;
    result = prime * result
            + ((firstName == null) ? 0 : firstName.hashCode());
    result = prime * result
            + ((lastName == null) ? 0 : lastName.hashCode());
    result = prime * result
            + ((middleName == null) ? 0 : middleName.hashCode());
    return result;
}

public void setFirstName(String firstName){

}

public void setLastName(String lastName){

}

public void setMiddleName(String middleName){

}

public String toString(){
    StringBuilder result = new StringBuilder();
    String NEW_LINE = System.getProperty("line.separator");
    result.append(lastName);
    return result.toString();
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T03:13:39.553

您的`Consultant`类有一个`Name`作为参数接收的构造函数。

当您实例化 时`Consultant`，您必须传入一个对, ,`Name`具有 null 的对象。`firstName``middleName``lastName`

我建议在新建`Consultant`对象之前在一行上标记调试器并检查`Name`传入的对象并查看是否有任何值`Name.firstName`等。

我还会在 的构造函数中添加一个断点来观察, ,`Consultant`的值是否被设置。`firstName``middleName``lastName`

**更新**

您刚刚发布了代码，`Name`而您的构造函数什么也没做。您的代码如下：

```
public Name(String lastName, String firstName){

} 
```

它应该读

```
public Name(String lastName, String firstName){
    this.lastName = lastName;
    this.firstName = firstName;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T03:17:07.820

您将名称初始化为：

```
Name contact = new Name(lName, fName); 
```

但你什么都没做

```
public Name(String lastName, String firstName){

} 
```

在你的`Name`课堂上，

```
private String firstName;
private String middleName;
private String lastName; 
```

都初始化为`null`s。所以当你打电话

```
public void setFirstName(){
    firstName = name.getFirstName();
}

public void setMiddleName(){
    middleName = name.getMiddleName();
}

public void setLastName(){
    lastName = name.getLastName();
} 
```

在你的`Consultant`课堂上，他们得到了所有`null`。

# html - CSS中同一行上的流体浮动div

> ID：14617813
> 
> 赞同：1
> 
> 时间：2013-01-31T03:08:25.033
> 
> 标签：html, css

假设我有一张图片，其正下方有文字。我把它包起来，`div`把里面的内容居中。

现在假设我有 20 个这样的图像，都具有相同大小的图像（即 65 像素）但不同数量的文本（文本可以换行）。

我想通过此实现以下目标：

我想在同一行上尽可能多地显示，每行有 10px 的左右边距。此外，它们将始终居中并均匀地填充浏览器窗口的宽度。

理想情况下，如果浏览器宽度非常小，它只会在每一行显示一个。

任何人都有针对这种场景的 CSS 解决方案？

它只适用于移动设备...无需担心 IE

非常感谢！

**更新**

这是我正在使用的一些基本代码。如果我每行硬编码 4 个（每行宽度为 25%），你可以看到它可以完成工作：

HTML：

```
<div class="m-parent-navigation-container">
    <div class="m-icon-navigation-container">
        <a class="m-icon-navigation-link"><img><br></a>
    </div>
</div> 
```

CSS：

```
.m-parent-navigation-container
    {
    margin: 0 10px;
    color: rgb(26, 46, 120);
    font-size: 0.9em;
    overflow: hidden;
    }

.m-icon-navigation-container
    {
    float: left;
    text-align: center;
    width: 25%;
    }

.m-icon-navigation-link
    {
    display: block;
    font-family: OpenSansBold;
    font-weight: normal;
    text-align: center;
    text-decoration: none;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T03:44:04.733

看看这个：http: [//jsfiddle.net/3QSVg/](http://jsfiddle.net/3QSVg/)

重要的部分是`display: inline-block;`和`text-align: center;`

我不确定这是否正是您所追求的，但这是一个开始。

编辑：

这是一个更新版本：http: [//jsfiddle.net/j78Qw/1/](http://jsfiddle.net/j78Qw/1/)

我想它更接近你想要的。但它仍然存在一些问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T03:50:47.570

您可以为此使用 flex-box。浏览器支持还是比较欠缺的，但是如果你主要为webkit渲染引擎开发，即Windows上的iOS、Android、Chrome，都可以使用。

看：[http ://codepen.io/anon/pen/fHklC](http://codepen.io/anon/pen/fHklC)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T03:25:24.120

我相信没有纯 CSS 解决方案。

首先，您应该`float: left`使用图像框。使用 JS 可以得到外部容器的宽度，然后将其除以图像框的宽度。这会给你一个数字，可以容纳多少个图像框。现在您可以计算盒子的最大可能尺寸以填充容器的整个宽度。这将允许您将图像与中心对齐。

```
<ul id="gallery">
    <li><img src="…" /></li>
    <li><img src="…" /></li>
    …
</ul>

var list = $('#gallery');
var items = list.find('li');

var imageWidth = items.width('auto').outerWidth(true);
var nrOfItemsPerRow = Math.min(Math.floor(list.innerWidth() / imageWidth), items.length);
items.css('width', Math.floor(100 / nrOfItemsPerRow) + '%'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T03:49:27.850

`inline-block`是你的朋友吗？

[http://jsfiddle.net/Vmu9R/1/](http://jsfiddle.net/Vmu9R/1/)

有几点需要注意的`inline-block`是，它在 IE7 和更早版本中没有得到很好的支持，但有一些变通方法。

这篇文章涵盖了变通方法，通常是一篇关于 inline-block 的好文章

不是说您担心 IE7，而是对于那些可能有条件地包括以下内容的人

```
/* For IE 7 */
zoom: 1;
*display: inline; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T03:51:57.373

如果我理解正确，您正在寻找对齐`div`s （与任何内容），具有流动宽度，并在页面上没有足够空间时让它们根据需要包装？

[Flexbox](http://dev.w3.org/csswg/css3-flexbox/)或许能够做到这一点。看到[这个小提琴](http://jsfiddle.net/dUKz7/)。

Flexbox 的一些很好的资源：

*   [https://developer.mozilla.org/en-US/docs/CSS/Using_CSS_flexible_boxes](https://developer.mozilla.org/en-US/docs/CSS/Using_CSS_flexible_boxes)
*   [http://demo.agektmr.com/flexbox/](http://demo.agektmr.com/flexbox/)
*   [http://the-echoplex.net/flexyboxes/](http://the-echoplex.net/flexyboxes/)

[你能用吗？](http://caniuse.com/#search=flexbox)

# haskell - 不同类型的case表达式导致Haskell

> ID：14617815
> 
> 赞同：8
> 
> 时间：2013-01-31T03:08:56.257
> 
> 标签：haskell, types, case

我正在尝试在 Haskell 中实现某种消息解析器，所以我决定将类型用于消息类型，而不是构造函数：

```
data DebugMsg  = DebugMsg String
data UpdateMsg = UpdateMsg [String] 
```

.. 等等。我相信它对我更有用，因为我可以定义类型类，例如，`Msg`为带有与该消息相关的所有信息/解析器/操作的消息。但是我这里有问题。当我尝试使用以下方法编写解析函数时`case`：

```
parseMsg :: (Msg a) => Int -> Get a
parseMsg code = 
    case code of
        1 -> (parse :: Get DebugMsg)
        2 -> (parse :: Get UpdateMsg) 
```

*..所有*分支的案例结果类型应该*相同*。有什么解决办法吗？甚至可能只为函数结果指定类型类并期望它是完全多态的？

 ** * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-31T03:17:47.507

你*可以*用存在类型来完成这样的事情，但是它不会按照你想要的方式工作，所以你真的不应该这样做。

正如您在示例中所做的那样，使用正常的多态性根本行不通。你的类型说的是该函数对*所有人都* `a`有效——也就是说，调用者可以选择接收什么样的消息。但是，您必须根据数字代码选择消息，所以这显然是行不通的。

澄清一下：默认情况下，所有标准 Haskell 类型变量都是通用量化的。您可以将类型签名读取为`∀a. Msg a => Int -> Get a`. 这说明该函数是为 的*每个*值定义的`a`，而不管参数可能是什么。这意味着它必须能够返回`a`调用者想要的任何特定内容，而不管它得到什么参数。

你真正想要的是类似`∃a. Msg a => Int -> Get a`. 这就是为什么我说你可以用存在类型来做到这一点。然而，这在 Haskell 中相对复杂（你不能完全写出这样的类型签名）并且实际上并不能正确解决你的问题；这只是未来要记住的事情。

从根本上说，在 Haskell 中使用这样的类和类型并不是很习惯，因为这不是类的本意。您最好为您的消息坚持使用正常的代数数据类型。

我会有一个像这样的类型：

```
data Message = DebugMsg String
             | UpdateMsg [String] 
```

因此，不必为`parse`每种类型设置一个函数，只需在`parseMsg`函数中进行适当的解析：

```
parseMsg :: Int -> String -> Message
parseMsg n msg = case n of
  1 -> DebugMsg msg
  2 -> UpdateMsg [msg] 
```

（显然，填写您实际拥有的任何逻辑。）

本质上，这是正常代数数据类型的经典用途。没有理由为不同类型的消息使用不同的类型，如果它们具有相同的类型，生活会容易得多。

看起来您正在尝试模仿其他语言的子类型。根据经验，您使用代数数据类型来代替其他语言中大多数子类型的使用。这当然是其中一种情况。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-31T06:00:50.313

是的，所有子案例的所有右侧都必须具有完全相同的类型；并且此类型必须与整个`case`表达式的类型相同。这是一个*特点*；语言需要能够在编译时保证在运行时不会出现任何类型错误。

关于您的问题的一些评论提到最简单的解决方案是使用 sum （又名变体）类型：

```
data ParserMsg = DebugMsg String | UpdateMsg [String] 
```

这样做的结果是提前定义了一组替代结果。这有时是有利的（您的代码可以确定没有未处理的子案例），有时是不利的（子案例的数量是有限的，它们是在编译时确定的）。

在某些情况下，一种更高级的解决方案（您可能不需要，但我将把它扔进去）是重构代码以*将函数用作数据*。这个想法是你创建一个数据类型，它有函数（或单子动作）作为它的字段，然后不同的行为 = 不同的函数作为记录字段。

将这两种样式与此示例进行比较。首先，将不同的情况指定为总和（这使用 GADT，但应该足够简单易懂）：

```
{-# LANGUAGE GADTs #-}

import Data.Vector (Vector, (!))
import qualified Data.Vector as V

type Size = Int    
type Index = Int

-- | A 'Frame' translates between a set of values and consecutive array 
-- indexes.  (Note: this simplified implementation doesn't handle duplicate
-- values.)
data Frame p where 
    -- | A 'SimpleFrame' is backed by just a 'Vector'
    SimpleFrame  :: Vector p -> Frame p
    -- | A 'ProductFrame' is a pair of 'Frame's.
    ProductFrame :: Frame p -> Frame q -> Frame (p, q)

getSize :: Frame p -> Size
getSize (SimpleFrame v) = V.length v
getSize (ProductFrame f g) = getSize f * getSize g

getIndex :: Frame p -> Index -> p
getIndex (SimpleFrame v) i = v!i
getIndex (ProductFrame f g) ij = 
    let (i, j) = splitIndex (getSize f, getSize g) ij
    in (getIndex f i, getIndex g j)

pointIndex :: Eq p => Frame p -> p -> Maybe Index
pointIndex (SimpleFrame v) p = V.elemIndex v p
pointIndex (ProductFrame f g) (p, q) = 
    joinIndexes (getSize f, getSize g) (pointIndex f p) (pointIndex g q)

joinIndexes :: (Size, Size) -> Index -> Index -> Index
joinIndexes (_, rsize) i j = i * rsize + j

splitIndex :: (Size, Size) -> Index -> (Index, Index)
splitIndex (_, rsize) ij = (ij `div` rsize, ij `mod` rsize) 
```

在第一个示例中， a`Frame`只能是 a`SimpleFrame`或 a ，并且必须定义`ProductFrame`每个函数来处理这两种情况。`Frame`

其次，具有函数成员的数据类型（我省略了两个示例共有的代码）：

```
data Frame p = Frame { getSize    :: Size
                     , getIndex   :: Index -> p
                     , pointIndex :: p -> Maybe Index }

simpleFrame :: Eq p => Vector p -> Frame p
simpleFrame v = Frame (V.length v) (v!) (V.elemIndex v)

productFrame :: Frame p -> Frame q -> Frame (p, q)
productFrame f g = Frame newSize getI pointI
    where newSize = getSize f * getSize g
          getI ij = let (i, j) = splitIndex (getSize f, getSize g) ij 
                    in (getIndex f i, getIndex g j)
          pointI (p, q) = joinIndexes (getSize f, getSize g) 
                                      (pointIndex f p) 
                                      (pointIndex g q) 
```

在这里，`Frame`类型将`getIndex`和`pointIndex`操作作为`Frame`自身的数据成员。没有固定的编译时子案例集，因为 a 的行为`Frame`由它的元素函数决定，这些元素函数是在运行时提供的。因此，无需触及这些定义，我们可以添加：

```
import Control.Applicative ((<|>))

concatFrame :: Frame p -> Frame p -> Frame p
concatFrame f g = Frame newSize getI pointI
    where newSize = getSize f + getSize g
          getI ij | ij < getSize f = ij
                  | otherwise      = ij - getSize f
          pointI p = getPoint f p <|> fmap (+(getSize f)) (getPoint g p) 
```

我称这第二种风格为“行为类型”，但这真的只是我自己。

请注意，GHC 中的类型类的实现与此类似——传递了一个隐藏的“字典”参数，并且该字典是一个记录，其成员是类方法的实现：

```
data ShowDictionary a { primitiveShow :: a -> String }

stringShowDictionary :: ShowDictionary String
stringShowDictionary = ShowDictionary { primitiveShow = ... }

-- show "whatever"
-- ---> primitiveShow stringShowDictionary "whatever" 
```*

# java - 我的链接列表（带有泛型）程序编译得很好，但是当我运行它时，我得到了一个找不到类的异常。有人能帮我吗？

> ID：14617817
> 
> 赞同：0
> 
> 时间：2013-01-31T03:08:56.953
> 
> 标签：java

我正在尝试以 main 方法运行我的链表，但由于某种原因，我不断从终端获得以下输出

```
 Exception in thread "main" java.lang.NoClassDefFoundError: PhoneBook/java
Caused by: java.lang.ClassNotFoundException: PhoneBook.java
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247) 
```

下面我列出了我运行 main 方法的课程部分。一切都编译得很好，但是当我运行它时，我得到了那个异常。有没有我可以尝试/捕获异常？还是我做错了什么？

```
import java.util.LinkedList;

 public class PhoneBook<T> extends LinkedList<T>{

  /**
  * Creates two books, adds a person to each book, then prints out if it
  * found the perons in the book.
  **/
  public static void main(String[] args){
    PhoneBook<String> bookOne = new PhoneBook<String>();
    PhoneBook<Integer> bookTwo = new PhoneBook<Integer>();

    bookOne.addPerson("Obama");
    System.out.print(bookOne.findPerson("Obama"));

    bookTwo.addPerson(192590594);
    System.out.print(bookTwo.findPerson(192590594));
  } 
```

如果需要我班级的更多信息，我可以提供。我不认为它应该是必要的，因为它编译得很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T03:24:23.817

> 使用 javac PhoneBook.java 编译后，您是使用 java PhoneBook 还是 java PhoneBook.java 启动它？（应该是前者而不是后者）。~查理

谢谢查理，就是这样。

# c++ - 删除Combobox项目时第二个弹出MFC

> ID：14617819
> 
> 赞同：0
> 
> 时间：2013-01-31T03:09:04.513
> 
> 标签：c++, mfc, combobox

我有组合框和删除按钮。我想在按下删除按钮和删除最后一个项目时弹出下一个组合框项目，清理组合框选定项目。

我尝试了几种使用索引的方法，但即使是一种也无济于事。

有我的代码：

```
if(IDYES == MessageBox(L"Delete save?",L"Delete", MB_YESNO|MB_ICONQUESTION)){
            CString pFileName = L"Save\\"+str+".dat";
            CFile::Remove(pFileName);
            CComboBox* pComboBox = (CComboBox*)GetDlgItem(IDC_COMBO_SAVE);
            pComboBox->ResetContent();
        } 
```

当按下删除按钮和删除最后一个项目时，如何使下一个组合框项目弹出干净的组合框选定项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T04:32:52.390

因此，在这种情况下，您不需要使用 ResetContent()。如果您已经知道组合框中当前选择的项目（我认为沿着轨道的某处您会使用该行`int iSel = pComboBox->GetCurSel();`），您可以使用此代码代替您的`pComboBox->ResetContent();`：

```
pComboBox->DeleteString(iSel);
if(iSel < pComboBox->GetCount())
  pComboBox->SetCurSel(iSel);
else if(iSel > 0)
  pComboBox->SetCurSel(iSel-1); 
```

但是，我认为这没有必要。我认为该项目会自行移动。所以，忘记上面的代码，就用这个：

```
pComboBox->DeleteString(pComboBox->GetCurSel()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T20:59:57.473

我找到了一个解决方案：

```
void CL2HamsterDlg::OnBnClickedButtonDelete(){
    if(Validate()){
        if(IDYES == MessageBox(L"Delete save?",L"Delete", MB_YESNO|MB_ICONQUESTION)){
            CString pFileName = L"Save\\"+str+".dat";
            CFile::Remove(pFileName);
            CComboBox* pComboBox = (CComboBox*)GetDlgItem(IDC_COMBO_SAVE);
            lookforfile();
            int nIndex = pComboBox->GetCurSel();
            if (nIndex == CB_ERR)
                pComboBox->SetCurSel(0);
            else{
                pComboBox->SetEditSel(0, -1);
                pComboBox->Clear();
            }
        }
        LoadSave(false);
    }else
        AfxMessageBox(L"Please select or write correct name!");
} 
```

函数查找文件刷新索引

```
void CL2HamsterDlg::lookforfile()
{
    Value.GetWindowText(str);
    CComboBox* pComboBox = (CComboBox*)GetDlgItem(IDC_COMBO_SAVE);
    pComboBox->ResetContent();
    GetCurrentDirectory(MAX_PATH,curWorkingDir);
    _tcscat_s(curWorkingDir, MAX_PATH, _T("\\Save\\*.dat"));
    BOOL bWorking = finder.FindFile(curWorkingDir);
    while (bWorking){   
        bWorking = finder.FindNextFile();
        if (!finder.IsDots())
            pComboBox->AddString(finder.GetFileTitle());
    }
    GetDlgItem(IDC_COMBO_SAVE)->SetWindowText(str);
} 
```

# php - Facebook 调试器 - 解析 URL 时出错：解析输入 URL 时出错，没有数据被抓取

> ID：14617821
> 
> 赞同：2
> 
> 时间：2013-01-31T03:09:19.650
> 
> 标签：php, facebook, wordpress, debugging

网站[http://www.lumi7.com.br的所有 URL 至少](http://www.lumi7.com.br)**在 3 次中有 2 次**出现“解析 URL 时出错：解析输入 URL 时出错，没有数据被抓取” 。几乎 35% 的时间，它会获得正确的信息，并带有 200 个响应代码。发现它真的很奇怪，因为实际链接的点击没有任何错误，仅通过 Facebook 调试器。标签的**代码如下**（*wordpress setup...get_fbimg 函数位于 funcions.php 模块中并且工作正常...所有信息在 100% 的时间内都可以正常检索*）..

```
 <meta property="og:title" content="<?php the_title(); ?>"/>
<meta property="og:type" content="<?php if (is_single() || is_page()) { echo 'article'; } else { echo 'website';} ?>"/>
<meta property="og:image" content="<?php echo get_fbimg(); ?>"/>
<meta property="og:url" content="<?php the_permalink(); ?>"/>   
<meta property="og:description" content="<?php echo $post->post_excerpt; ?>"/>
<meta property="og:site_name" content="<?php bloginfo('name'); ?>"/>
<meta property="fb:admins" content="1583250550"/>
<meta property="og:locale" content="pt_BR" />

<meta property="fb:app_id" content="466901323366968"/> 
```

我尝试过的事情：

1.  删除所有标签
2.  一一重新插入
3.  测试逐步重建.htaccess
4.  在 https 和 http 之间更改标签处的链接
5.  主机似乎 ping 正常
6.  测试了几个 wordpress 插件（免费和高级）
7.  同一主机上的其他站点工作正常，用它们测试了相同的标签
8.  尝试使用默认的 wordpress 主题以排除任何可能的主题冲突

相同的比率不断达到.. 3 次中有 2 次响应代码 502 有时，但大部分时间是错误解析 URL。

一些可能相关的信息：

PHP 5.2.17

阿帕奇 2.2.22

MySQL 5.0.91

Perl 5.8.8

内核 2.6.18-408.8.2.el5.lve0.8.61.3

服务器 IP 66.7.218.190

没有 shell 访问权限

调试器中的示例 url：

[http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.lumi7.com.br%2Fcritica-joao-e-maria-cacadores-de-bruxas%2F](http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.lumi7.com.br%2Fcritica-joao-e-maria-cacadores-de-bruxas%2F)

# java - 使用从文本文件读取的字符填充数组的意外输出

> ID：14617822
> 
> 赞同：0
> 
> 时间：2013-01-31T03:09:40.420
> 
> 标签：java, arrays, file, io

我正在尝试读取一个名为 input.in 的文本文件，它是一个表示地图的字符数组。该文件包含两个整数 N 和 numLifes，以及相应的矩阵。N 表示方阵的维数 (NxN)。

我希望如果 N 小于 10，则将 10 的值赋给变量 N，并用“#”填充矩阵“mVill”，然后读取映射文件并将其与用“#”填充的矩阵集成. 继承人的代码：

```
import java.io.*;
import java.io.FileReader;
import java.util.Arrays;
import java.util.StringTokenizer;

public class hola {

    public static void main(String[] args) {
        char mVill[][] = null;
        int N, i,j, numLifes;
        String line=null;
        StringTokenizer tk;
        char caract;
        FileInputStream fstream = null;
        try {
            fstream = new FileInputStream("C:/input.in");
        } catch (FileNotFoundException e) {
            System.exit(-1);
        }

        DataInputStream in = new DataInputStream(fstream);
        BufferedReader br = new BufferedReader(new InputStreamReader(in));

        try {
            if ((line = br.readLine()) == null) {
                System.out.print("Error empty file...");
                System.exit(0);
            }
        } catch (IOException e) {
        }

        tk = new StringTokenizer(line);
                N = Integer.parseInt(tk.nextToken());
                numLifes = Integer.parseInt(tk.nextToken());

                int nAux=N;
                if (N<10){
                    N=10;
                    mVill = new char[N][N];
                    for (char[] row: mVill)
                        Arrays.fill(row, '#');
                    for (i=0; i <nAux; i++) {
                        for (j=0;j<nAux;j++){
                            try{
                            caract = (char) br.read();
                            mVill[i][j]=caract;
                            }catch (Exception e){
                               System.out.println("Error in read file");
                            }
                        }
                    }

                }else{
                    mVill = new char[N][N];
                    for (i = 0; i < N; i++) {
                        try {
                            mVill[i] = br.readLine().toCharArray();
                        } catch (IOException e) {
                            // TODO Auto-generated catch block
                        }
                    }
                }
                System.out.println(N+" "+numLifes);

                for (i = 0; i < N; i++) {
                    for (j = 0; j < N; j++) {
                        System.out.print(mVill[i][j]);
                    }
                    System.out.println();
                }
    }//end main
}//end class 
```

对于此输入：

```
7 3
F..*..F
.##.##.
.#...#.
*..P..*
.#...#.
.##.##.
F..*..F 
```

输出是（这是错误的）：

```
F..*..F###

.##.####
#.
.#.###
..#.
*###
..P..*
###

.#...####
.
.##.###
##########
##########
########## 
```

我应该期望收到的输出：

```
F..*..F###
.##.##.###
.#...#.###
*..P..*###
.#...#.###
.##.##.###
F..*..F###
##########
##########
########## 
```

我究竟做错了什么？我在读取文件时没有看到任何错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T03:24:46.817

按照史蒂夫的回答，纠正它的快速而肮脏的方法是在阅读角色时这样做：

```
caract = (char) br.read();
while (caract == '\n' || caract == '\r') {
    caract = (char) br.read();
}
mVill[i][j]=caract; 
```

因此将跳过换行符和回车符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T03:17:19.880

我认为您在阅读输入时没有考虑回车/换行字符。我可能会使用不同的技术，一次读取一行而不是一个字符。

尝试测试该字符以查看它是否为 cr/lf，如果是则跳过它。

# c++ - 如何以独立于系统的方式将库添加到项目中？

> ID：14617823
> 
> 赞同：2
> 
> 时间：2013-01-31T03:10:01.013
> 
> 标签：c++, qt, libraries, environment

我正在使用 Qt 和 OpenGL 开发应用程序，并发现有必要下载 GLM 库。它是一个只有标题的库，所以我不需要链接到任何东西。我希望这个应用程序建立在任何安装了正确库的系统上。我的问题是我不知道将 GLM 放在哪里，以便系统可以在不向项目的 .pro 文件添加特定路径的情况下找到它。.pro 文件是我的 git 存储库的一部分，这是将源代码分发到 Linux 等其他系统的方式。所以我不希望这个文件指定 GLM 的确切位置，因为其他系统可能在其他地方有它.

我目前正在 Windows 上开发，使用 Visual C++ 2010 在 Qt Creator 中进行编译。我从[MSDN](http://msdn.microsoft.com/en-us/library/36k2cdd4%28VS.80%29.aspx)中读到`#include <file>`使用 INCLUDE 环境变量进行搜索，所以我尝试将 glm.hpp 的路径添加到 INCLUDE，但 QtCreator 的构建环境为这个项目似乎覆盖了 INCLUDE。所以我从 QtCreator 的 Projects 选项卡中将 GLM 的路径附加到新的 INCLUDE 中，但我的代码仍然找不到 glm.hpp。

一般来说，我如何向我的系统添加一个外部库，以便我的编译器能够在不指定分发到其他系统的项目文件中的确切位置的情况下找到它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T03:44:42.000

您需要的是一个构建系统，该系统能够在系统中搜索您请求的库，并且能够在任何平台上执行此操作。一个这样的构建系统是[cmake](http://www.cmake.org/)，它是使用最广泛的构建系统。从本质上讲，cmake 允许您编写一个构建脚本，您可以在其中指定在 Qt Creator 或 Visual Studio 中创建项目时通常指定的所有内容，例如源文件列表，按目标分组以编译（库、可执行文件、等），头文件的相对路径，以及用于链接和包含路径的库，等等。对于安装在系统上的库，有一个函数，称为[`find_package()`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command%3afind_package)（cmake 脚本命令的一部分），它将查明是否安装了库以及在哪里可以找到它的 lib 文件和头文件（将这些路径存储为可以在目标等上指定的缓存字符串）。只要库没有安装在奇怪的地方，它通常效果很好。它的工作方式是，当您运行 cmake 时，它​​将为您指定的几乎任何平台生成构建脚本/配置，然后您使用它来编译您的代码。它可以生成 makefile（类 Unix 或 windows）、CodeBlocks 项目文件、Visual Studio 项目文件等。而且许多 IDE 也对 cmake 项目提供原生支持。

我希望我可以推荐一个替代方案，只是听起来对 cmake 的偏见更少，但我还没有听说过任何真正与之相比的方法，特别是为了定位外部依赖项和使用不同的平台。我猜[Boost.Build](http://www.boost.org/boost-build2/)也不错。

# ios - 使用 'PFQueryTableViewController' 类型的表达式初始化 'MainTableViewController'_strong 的不兼容指针类型

> ID：14617826
> 
> 赞同：0
> 
> 时间：2013-01-31T03:10:18.953
> 
> 标签：ios, objective-c

第一次使用解析。不太清楚这里发生了什么。谢谢您的帮助。

```
MainTableViewController *controller = [[PFQueryTableViewController alloc] init];

self.window.rootViewController = controller;
[self.window makeKeyAndVisible]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T03:17:55.340

为了使这条线工作：

```
MainTableViewController *controller = [[PFQueryTableViewController alloc] init]; 
```

`PFQueryTableViewController``subclass`在你的`MainTableViewController`程序中可能不是这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T03:14:19.257

你不能用另一个类来初始化一个类。做这个

```
MainTableViewController *controller = [[MainTableViewController alloc] init]; 
```

# node.js - 带有正则表达式和限制的猫鼬不同查询？

> ID：14617829
> 
> 赞同：2
> 
> 时间：2013-01-31T03:10:28.573
> 
> 标签：node.js, mongodb, express, mongoose

我正在运行以下代码，它返回许多结果。我想将结果限制为前 10 个文档。如何向以下 mongoose 查询添加“限制”？

```
var reg = new RegExp('^'+id,'i');

models.examples.distinct('myId', {myId: reg}, function(err, docs) {
  console.log("docs: " + util.inspect(docs));
  res.send(docs);
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T14:18:57.303

目前你不能对 distinct 调用 limit - 请投票给：[SERVER-2130](https://jira.mongodb.org/browse/SERVER-2130)。您可以利用[聚合框架](http://mongodb.github.com/node-mongodb-native/api-generated/collection.html#aggregate)来限制通过网络返回的数量，方法是先执行 a `$group`，然后执行 a `$limit`。

# javascript - 通过 Azure 发送 HTTP 请求

> ID：14617833
> 
> 赞同：2
> 
> 时间：2013-01-31T03:11:01.183
> 
> 标签：javascript, http, azure, xmlhttprequest, azure-storage

我正在尝试通过他们的广播 API 与 Urbanairship 交互，以将通知发送到插入到 Azure 表中的 Android 设备。

我在 Azure 上的 JavaScript INSERT 代码如下：

```
 function insert(item, user, request) {

        request.execute({
            success: function() {
                request.respond(statusCodes.OK, item.id);
                push();
            }
        });
    }

    function push() {
   var client = new XMLHttpRequest();
    var authen = 'UDQ3N...B'
    var url = "https://go.urbanairship.com/api/push/broadcast/";
    var data = '{ "android": { "alert": "Hello from Azure!"} }';

    client.open("POST", url, true);
    client.setRequestHeader('Authorization','Basic ' + authen); 
    client.setRequestHeader('Content-Type', 'application/json');
    client.setRequestHeader('Content-Length', '54');
    client.send(data);
} 
```

但是，我没有收到 Urbanairship 的回复。我确信这是 Azure 的问题，因为使用提琴手以下 HTTP 请求有效：

```
POST https://go.urbanairship.com/api/push/broadcast/ HTTP/1.1
User-Agent: Fiddler
Authorization: Basic UDQ3N...B
Content-Type: application/json
Host: go.urbanairship.com
Content-Length: 54

{ "android": { "alert": "Hello from Urban Airship!"} } 
```

所以本质上，我试图通过 Azure 用 Ja​​vaScript 重复这个调用，但没有运气。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T13:44:17.667

找到了一个 Windows Azure 教程：http: [//msdn.microsoft.com/en-us/library/windowsazure/jj631641.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/jj631641.aspx)

# python - 如何在 Django 1.4 中自定义管理过滤器

> ID：14617834
> 
> 赞同：4
> 
> 时间：2013-01-31T03:11:03.907
> 
> 标签：python, django, django-admin

我是 Python 和 Django 开发的新手，我从社区提供的易于阅读的示例中学到了很多东西。但最近我想为 Django 附带的管理控制台实现一个自定义的管理过滤器。我搜索了很多，只发现了一些过时的方法来完成它。如： [Django 1.3 或以下版本的 Django Admin 中的自定义过滤器](https://stackoverflow.com/questions/991926/custom-filter-in-django-admin-on-django-1-3-or-below)

我试图阅读“django.contrib.admin”应用程序中过滤器模块的源代码，但不幸的是我几乎无法理解代码背后的基本原理。所以我想知道是否有人可以提供一些关于这个问题的例子或参考——如何在 Django 1.4 中自定义管理过滤器？

先谢谢了！</p>

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T05:39:50.850

v1.4 中引入了新的 django.contrib.admin.SimpleListFilter 满足您的需求，官方文档提供了示例代码，易于阅读。在[此部分](https://docs.djangoproject.com/en/stable/ref/contrib/admin/#django.contrib.admin.ModelAdmin.list_filter)中搜索**SimpleListFilter**。

# c++ - 为什么“boost::function = boost::bind(...)”会创建 13 个临时对象？

> ID：14617835
> 
> 赞同：12
> 
> 时间：2013-01-31T03:11:08.263
> 
> 标签：c++, boost-bind, boost-function

我有一些非常基本的测试代码。我有一个只记录所有操作的类。我将它绑定到这样的`boost::function`对象：

```
 void Function(const Foo&)
    {
        printf("Function invoked\n");
    }

    // ...

    boost::function<void(void)> func;
    {
        Foo f;
        printf("\nConstructing function\n");
        func = boost::bind(&Function, f);
        printf("Construction complete\n\n");
    } 
```

我希望函数对象包含`f`. 因此，必须创建至少一个副本。但是，我发现我得到了**13 个**临时对象。输出是：

```
Constructing function
Foo::Foo(const Foo&)
Foo::Foo(const Foo&)
Foo::Foo(const Foo&)
Foo::Foo(const Foo&)
Foo::~Foo
Foo::Foo(const Foo&)
Foo::~Foo
Foo::~Foo
Foo::Foo(const Foo&)
Foo::Foo(const Foo&)
Foo::Foo(const Foo&)
Foo::Foo(const Foo&)
Foo::Foo(const Foo&)
Foo::Foo(const Foo&)
Foo::Foo(const Foo&)
Foo::~Foo
Foo::~Foo
Foo::~Foo
Foo::~Foo
Foo::~Foo
Foo::Foo(const Foo&)
Foo::~Foo
Foo::Foo(const Foo&)
Foo::~Foo
Foo::~Foo
Foo::~Foo
Foo::~Foo
Construction complete 
```

我不能使用`ref`或者`cref`因为我确实需要它来制作对象的副本。我做错了什么可怕的事情吗？或者我是否需要使用包装器（如`boost::shared_ptr`）来避免荒谬的副本数量？

完整的代码和问题演示可以[在 Codepad](http://codepad.org/DbOAjT2H)上找到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T08:28:41.837

如果您删除“func =”分配部分，则副本数将降低到 4，这比 13 好得多。

```
template <class F>
void callF(F fun)
{
}
callF(boost::bind(&func, fl)); 
```

所以解决方案很简单——不要使用 boost::function

# apache - 将 DirectoryIndex 输入 .htaccess 并且它不起作用？

> ID：14617836
> 
> 赞同：1
> 
> 时间：2013-01-31T03:11:10.537
> 
> 标签：apache, .htaccess, directoryindex

这太令人沮丧了。我的根目录在 home/websitename/websitename/ 而我的 httpd.conf 里面什么都没有！

我的 .htaccess 与 index.php 应该在同一个目录中，我在 .htaccess 中输入的所有内容（并且 FTP 将其识别为 HTACCESS 文件）是：DirectoryIndex Home.php

尝试访问该站点时收到的错误消息是 403 禁止列出“/”的目录

AllowOverride 指令设置为 All

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T06:31:42.263

好吧，实际上我犯了一个愚蠢的错误。基本上，为了使 .htaccess 工作，需要检查的所有内容是：

*   在主目录中创建一个 .htaccess 文件。确保 .htaccess 文件是在 ACSII 的文件编辑器中创建的。（记事本++，开发编辑器，没有 Microsoft Word）
*   确保在您网站的 Apache 配置中将[AllowOverride](http://httpd.apache.org/docs/2.2/mod/core.html#allowoverride)设置为 All。应该在`<directory>`
*   确保对 Apache 文件进行任何更改后重新启动 apache！请注意，即使 .htaccess 不需要您重新启动 Apache，但更改网站配置文件中的任何内容都需要您重新启动 Apache 才能使其正常工作。

最后，如果您的网站能够实际读取 .htaccess 文件，则您的网站应该输出 500 Internal Apache Error，而不是 403: Access Forbidden 或目录列表。

# asp.net - ASP.NET MVC WebGrid 上的客户端排序

> ID：14617840
> 
> 赞同：0
> 
> 时间：2013-01-31T03:11:38.633
> 
> 标签：asp.net, asp.net-mvc

我有一个包含如下 MVC WebGrid 的部分视图

```
 <div id="grid">
            @{
                var grid = new WebGrid(source: Model.Items,
                                       defaultSort: "Name", 
                                       rowsPerPage: 100);

            }
            @grid.GetHtml(columns: grid.Columns(
                        grid.Column(columnName: "Name", header: "Name", canSort:true),
                        grid.Column(columnName: "Code", header: "Code")
                    ))
            </div> 
```

使用 Jquery ajax 调用加载此部分视图，并将结果插入到主页的 DIV 中。

该表渲染得很好，但我的问题是排序总是会生成一个回调到服务器。我希望仅在客户端进行排序。是否可以在不使用外部数据表（如 jQuery 数据表）的情况下使用 WebGrid？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T05:04:49.097

看看[jQuery Tablesorter](http://tablesorter.com/docs/)。它可以应用于任何格式良好的表（即 has `thead`和`tbody`元素。我能想到的唯一问题是确保在 ajax 调用中加载数据后绑定表排序器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T03:56:14.087

您可能应该根据加载的表自己实现 Cline-Side Sorting 看看[这里...](http://www.satya-weblog.com/2007/06/client-side-table-sorting-using.html)

注意！：您总是可以通过使用 html 属性标记您的 WebGrid 来使其更通用。用'data-clineSideSort = true'标记表，然后添加一个jquery事件，将JS功能附加到所有持有这个属性的表......

```
 function SortTable(sortOn)
 {
     var table = document.getElementById('results');
     var tbody = table.getElementsByTagName('tbody')[0];
     var rows = tbody.getElementsByTagName('tr');

     var rowArray = new Array();
     for (var i = 0, length = rows.length; i < length; i++)
     {
         rowArray[i] = new Object;
         rowArray[i].oldIndex = i;
         rowArray[i].value = rows[i].getElementsByTagName('td')[sortOn].firstChild.nodeValue;
     }

     if (sortOn == sortedOn)         {
         rowArray.reverse();
     }
     else         {
         sortedOn = sortOn;
         /*
    Decide which function to use from the three:RowCompareNumbers,
    RowCompareDollars or RowCompare (default).
    For first column, I needed numeric comparison.
    */
         if (sortedOn == 0)             {
             rowArray.sort(RowCompareNumbers);
         }
         else             {
             rowArray.sort(RowCompare);
         }
     }

     var newTbody = document.createElement('tbody');
     for (var i = 0, length = rowArray.length; i < length; i++)
     {
         newTbody.appendChild(rows[rowArray[i].oldIndex].cloneNode(true));
     }

     table.replaceChild(newTbody, tbody);
 }

 function RowCompare(a, b)
 {
     var aVal = a.value;
     var bVal = b.value;
     return (aVal == bVal ? 0 : (aVal > bVal ? 1 : -1));
 }

 // Compare number
 function RowCompareNumbers(a, b)
 {
     var aVal = parseInt(a.value);
     var bVal = parseInt(b.value);
     return (aVal - bVal);
 }

 // compare currency
 function RowCompareDollars(a, b)
 {
     var aVal = parseFloat(a.value.substr(1));
     var bVal = parseFloat(b.value.substr(1));
     return (aVal - bVal);
 } 
```

# php - Yii 通过多级 BELONGS_TO 关系访问属性

> ID：14617842
> 
> 赞同：1
> 
> 时间：2013-01-31T03:12:19.480
> 
> 标签：php, yii

我有`A`属于`B`和`B`属于`C`。假设`C`有一个`property`，我想找到所有`A`它们的`C.property`值是`$myVar`。

我想做的是

```
A::model()->with('B.C')->findAllByAttributes(array('C.property'=>$myVar)) 
```

但是，每当我这样做时：

```
$brands = FPfdPetItemBrand::model()->with('mImportOperation.mImport')->findAllByAttributes(array('mImport.m_import_id'=>$latestImport->m_import_id)); 
```

Yii不高兴：

> CDb异常
> 
> 表“f_pfd_pet_item_brand”没有名为“mImport.m_import_id”的列。

我已经能够通过 ing 实现我想要的`JOIN`，但是有没有更清洁的方法来做到这一点（类似于我尝试使用的方法）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T05:43:58.723

您不能使用`findAllByAttributes()`基于相关属性进行查找。试试`findAll()`吧

```
$brands = FPfdPetItemBrand::model()->with('mImportOperation.mImport')->findAll('mImport.m_import_id=:import_id',array(':import_id'=>$latestImport->m_import_id)); 
```

（我没有测试过上述内容。但它应该可以工作）

# ios - 将 NSFileHandle seekToFileOffset 设置为行尾

> ID：14617843
> 
> 赞同：0
> 
> 时间：2013-01-31T03:12:23.123
> 
> 标签：ios, nsfilehandle

我想要做的是将一个字符串写入文件中每一行的末尾。现在我有一个 NSFileHandle 写入文件，但只在文件末尾。我怎样才能把它设置到最后就行了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T04:26:31.187

即使您寻找到一行的末尾，如果您在该点写入文件，您将覆盖下一行的开头。您不能通过寻找某个位置并写入来将文本插入文件。

您最好的选择是写出一个临时文件。打开原始文件进行阅读。读取每一行并将其写入新文件。然后将要添加的文本写到行尾。对每一行重复此操作。

将所有新行写入新文件后，删除旧文件并重命名新文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T04:11:50.407

您将需要读取流并搜索文件中使用的任何行分隔符，通常是 0x0a (nl)、0x0d (cr) 或有时是 cr/lf。

如果文件小到可以读入内存，您可以将其读入 NSString，使用 componentsSeparatedByString: （带有分隔符），然后使用 componentsJoinedByString: （带有行尾添加和分隔符）来创建聚合结果。

# java - Graphics2D 圆桌

> ID：14617849
> 
> 赞同：0
> 
> 时间：2013-01-31T03:13:09.680
> 
> 标签：java, arrays, user-interface, graphics2d

我正在尝试为 RGBike POV 构建用户界面：http: [//www.instructables.com/id/RGBike-POV-Open-project/](http://www.instructables.com/id/RGBike-POV-Open-project/) 该程序将以网格的形式显示自行车车轮。用户可以单击单个方块并更改它们的颜色。我想用java构建这个小程序。我坚持以正确的方式画轮子。我需要每个矩形都有一个数组，以便稍后导出颜色。最好的办法是画一张圆桌。使用 graphics2D 绘制每个形状以将每个形状作为单个对象也是一个想法。但这将是大约 860 个单个形状，对于每次通过paint() 更新它们来说有点太多了。

Spoke POV 已经为他们的项目完成了这样的用户界面： [http](http://www.ladyada.net/make/spokepov/software.html) ://www.ladyada.net/make/spokepov/software.html 但只有他们的旧 python 脚本是开源的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T04:59:06.640

非常感谢我以前生成过“段”形状；）

![在此处输入图像描述](../Images/2798db59a439e42b5062eaea7faf865f.png)

这基本上单独生成每个段（对真实空间进行一些时髦的转换）并维护形状缓存，可以检查鼠标是否落在该范围内。

这是相当低效的，但我想你明白了。

我还应该指出，我没有为后备缓冲区烦恼。不是说它可以使用一个，我只是没有它就逃脱了......

```
public class TestSpoke {

    public static void main(String[] args) {
        new TestSpoke();
    }

    public TestSpoke() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (Exception ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public static class TestPane extends JPanel {

        public static final int CIRCLE_COUNT = 16;
        public static final int SEGMENT_COUNT = 80;
        private Map<Integer, List<Shape>> mapWheel;
        private Map<Point, Color> mapColors;

        public TestPane() {
            mapColors = new HashMap<>(CIRCLE_COUNT * SEGMENT_COUNT);
            addMouseListener(new MouseAdapter() {
                @Override
                public void mouseClicked(MouseEvent e) {

                    Map<Integer, List<Shape>> mapWheel = getWheel();

                    for (Integer circle : mapWheel.keySet()) {
                        List<Shape> segments = mapWheel.get(circle);
                        for (int index = 0; index < segments.size(); index++) {
                            Shape segment = segments.get(index);
                            if (segment.contains(e.getPoint())) {
                                mapColors.put(new Point(circle, index), Color.RED);
                                repaint();
                                break;
                            }
                        }
                    }
                }
            });
        }

        @Override
        public void invalidate() {
            mapWheel = null;
            super.invalidate();
        }

        protected float getRadius() {
            return Math.min(getWidth(), getHeight());
        }

        /**
         * This builds a wheel (if required) made of segments.
         * @return 
         */
        protected Map<Integer, List<Shape>> getWheel() {
            if (mapWheel == null) {
                mapWheel = new HashMap<>(CIRCLE_COUNT);

                // The current radius
                float radius = getRadius();
                // The radius of each individual circle...
                float circleRadius = radius / CIRCLE_COUNT;
                // The range of each segment
                float extent = 360f / SEGMENT_COUNT;
                for (int circle = 0; circle < CIRCLE_COUNT; circle++) {
                    float startAngle = 0;
                    List<Shape> segments = new ArrayList<>(SEGMENT_COUNT);
                    mapWheel.put(circle, segments);

                    // Calculate the "translation" to place each segement in the
                    // center of the screen
                    float innerRadius = circleRadius * circle;
                    float x = (getWidth() - innerRadius) / 2;
                    float y = (getHeight() - innerRadius) / 2;
                    for (int seg = 0; seg < SEGMENT_COUNT; seg++) {
                        // Generate a Segment shape
                        Segment segment = new Segment(circleRadius * circle, circleRadius, startAngle, extent);
                        startAngle += extent;

                        // We translate the segment to the screen space
                        // This will make it faster to paint and check for mouse clicks
                        PathIterator pi = segment.getPathIterator(AffineTransform.getTranslateInstance(x, y));
                        Path2D path = new Path2D.Float();
                        path.append(pi, true);
                        segments.add(path);
                    }
                }
            }

            return mapWheel;
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);

            Graphics2D g2d = (Graphics2D) g.create();

            Map<Integer, List<Shape>> mapWheel = getWheel();
            for (Integer circle : mapWheel.keySet()) {

                List<Shape> segments = mapWheel.get(circle);
                for (int index = 0; index < segments.size(); index++) {
                    Shape segment = segments.get(index);

                    Color color = mapColors.get(new Point(circle, index));
                    if (color != null) {
                        g2d.setColor(color);
                        g2d.fill(segment);
                    }
                    g2d.setColor(Color.BLACK);
                    g2d.draw(segment);
                }
            }

            g2d.dispose();

        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }
    }

    public static class Segment extends Path2D.Float {

        public Segment(float radius, float thickness, float extent) {
            this(radius, thickness, 0f, extent);
        }

        public Segment(float radius, float thickness, float startAngle, float extent) {
            // Basically, we want to draw the outter edge from a to b angle,
            // draw the connecting line from the outter to the inner,
            // draw the inner from b to a angel and
            // draw the connecting line from the inner to out the outter

            // We want to span about 30 degrees, with a small gap...
            // I want the gap to be a factor of the radius

            Arc2D.Float outter = new Arc2D.Float(0, 0, radius, radius, startAngle, extent, Arc2D.OPEN);
            Arc2D.Float inner = new Arc2D.Float(thickness / 2f, thickness / 2f, radius - thickness, radius - thickness, startAngle + extent, -extent, Arc2D.OPEN);

            append(outter, true);

            float angel = startAngle + extent;
            Point2D p1 = getPointOnEdge(angel, radius);
            Point2D p2 = getPointOnEdge(angel, radius - thickness);
            // We need to adjust in for the change in the radius
            p2.setLocation(p2.getX() + (thickness / 2f), p2.getY() + (thickness / 2f));
            lineTo(p2.getX(), p2.getY());

            append(inner, true);

            angel = startAngle;
            p1 = getPointOnEdge(angel, radius);
            p2 = getPointOnEdge(angel, radius - thickness);
            p2.setLocation(p2.getX() + (thickness / 2f), p2.getY() + (thickness / 2f));
            lineTo(p1.getX(), p1.getY());

            closePath();
        }

        public Point2D getPointOnEdge(float angel, float radius) {
            angel -= 90;

            float x = radius / 2f;
            float y = radius / 2f;

            double rads = Math.toRadians((angel + 90));

            // This determins the length of tick as calculate from the center of
            // the circle.  The original code from which this derived allowed
            // for a varible length line from the center of the cirlce, we
            // actually want the opposite, so we calculate the outter limit first
            float fullLength = (radius / 2f);

            // Calculate the outter point of the line
            float xPosy = (float) (x + Math.cos(rads) * fullLength);
            float yPosy = (float) (y - Math.sin(rads) * fullLength);

            return new Point2D.Float(xPosy, yPosy);
        }
    }
} 
```

# android - PhoneGap 应用程序：将文件从 javascript 代码上传到 Tomcat 上的 JSP 网页

> ID：14617850
> 
> 赞同：1
> 
> 时间：2013-01-31T03:13:13.983
> 
> 标签：android, jsp, cordova, file-upload

是否可以将文件（即 json 文件）从 javascript/HTML 代码上传到 JSP Web 服务？我阅读了很多将文件上传到 PHP 服务的示例，但我更熟悉 JSP 编码。我正在使用 PhoneGap 和 jQuery/JavaScript 技术构建一个 Android 移动应用程序。我想将文本文件或 JSON 文件从移动应用程序上传到 JSP Web 服务。如果 JSP Web 服务能够接收上传的文件，如何编写客户端和服务器端的代码以将上传的文件保存到本地文件夹？

谢谢

# java - Android JUnit 测试一起运行时挂起

> ID：14617854
> 
> 赞同：3
> 
> 时间：2013-01-31T03:13:33.080
> 
> 标签：java, android, junit, cryptography

我会提前为发布大量代码道歉，这个问题真的让我很着迷！

我有两个导致我出现问题的 Android JUnit 测试。单独运行每个并且它们工作正常，但是当一次运行时（PasswordEntryActivityTests 然后 CryptoKeystoreTests） CryptoKeystoreTests 无限期挂起。

我知道这不仅仅是模拟器速度慢，因为每个模拟器都在不到一秒的时间内完成，而且它可以挂起超过 20 分钟。我还在真实设备（Droid Razr）上对其进行了测试，它也做了同样的事情。

有问题的代码是`PasswordEntryActivity.launchNewPasswordActivity()`. 删除该功能会使一切正常。

在挂起时暂停调试器中的函数表示它在：

```
MessageQueue.nativePollOnce(int, int) line: not available [native method] 
```

这是怎么回事？

我在下面复制了：

*   密码输入活动
*   PasswordEntryActivity测试
*   CryptoManagerKeystoreTests

请让我知道发布您想查看的任何其他代码。谢谢！

```
 public class PasswordEntryActivity extends Activity 
    {
...
        private void launchNewPasswordActivity()
        {
            Intent launchNewPasswordIntent = new Intent(this, NewPasswordActivity.class);
            startActivity(launchNewPasswordIntent);
        }

        @Override
        protected void onCreate(Bundle savedInstanceState) 
        {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.password_entry_layout);
...
            //this code should be LAST in onCreate because it exits the Activity
            //CryptoManager.passwordIsRight returns 0 if no password has been set
            passwordExists = CryptoManager.passwordIsRight("x", this) != 0;
            if(!passwordExists)
                launchNewPasswordActivity();
        }
    } 
```

该活动的测试：

```
 //supposed to make sure the application responds correctly when no password is set
    public class PasswordEntryActivityTests extends android.test.ActivityInstrumentationTestCase2<                          crypnote.controller.main.PasswordEntryActivity>{
    protected void setUp() throws Exception 
    {
        passwordEntryActivity = getActivity();

        //delete the database if it exists
        File file = passwordEntryActivity.getFileStreamPath(DBInterface.Constants.DatabaseName);
        if(file.exists())
            assertTrue(file.delete());
        file = passwordEntryActivity.getFileStreamPath(CryptoManager.Constants.KEYSTORE_PATH);
        if(file.exists())
            assertTrue(file.delete());
    }
    //allows us to access the interface
    @UiThreadTest
    public void testNoPassword() throws Exception
    {
        passwordEntryActivity  = getActivity();

        EditText passwordEntryEditText = 
                (EditText) passwordEntryActivity.findViewById(
                crypnote.controller.main.R.id.passwordentrylayout_passwordedittext);
        Button unlockButton = (Button) passwordEntryActivity.findViewById(
                                        crypnote.controller.main.R.id.passwordentrylayout_unlockbutton);

        int passwordResult = CryptoManager.passwordIsRight("x", getActivity());
        assertTrue(passwordResult == 0);

        //pass a wrong password to the edittext and click the unlock button
        passwordEntryEditText.setText("x");
        assertTrue(unlockButton.performClick());

        //get the foreground activity class name
        ActivityManager am = (ActivityManager) passwordEntryActivity.
                                                        getSystemService(Context.ACTIVITY_SERVICE);

        // get the info from the currently running task
        List< ActivityManager.RunningTaskInfo > taskInfo = am.getRunningTasks(1); 

        ComponentName componentInfo = taskInfo.get(0).topActivity;
        String foregroundClassName = componentInfo.getShortClassName();

        //don't forget the leading '.'
        assertTrue(!foregroundClassName.equals(".PasswordEntryActivity"));
    }
} 
```

CryptoKeystoreTests：

```
public class CryptoKeystoreTests extends android.test.ActivityInstrumentationTestCase2<
                                                                crypnote.controller.main.PasswordEntryActivity>
{
    public void testKeystore() throws Exception
    {
        Context context = getActivity();

        //delete the database if it exists
        File file = context.getFileStreamPath(DBInterface.Constants.DatabaseName);
        if(file.exists())
            assertTrue(file.delete());
        file = context.getFileStreamPath(CryptoManager.Constants.KEYSTORE_PATH);
        if(file.exists())
            assertTrue(file.delete());

        CryptoManager cryptoManager=null;
        String password = CryptoManager.Constants.DEBUG_PASSWORD;
        FileInputStream fis=null;

            //the cryptomanager will generate a new key and keystore
            cryptoManager = new CryptoManager(password, context);
            Key CRYPTOKEY = cryptoManager.getKey();
            cryptoManager.close();

            //initialize KeyStore
            KeyStore keystore = KeyStore.getInstance(Constants.KEYSTORE_INSTANCE_TYPE);
            fis = context.openFileInput(CryptoManager.Constants.KEYSTORE_PATH);
            keystore.load(fis, password.toCharArray());

            assertTrue(keystore.containsAlias(Constants.APP_ALIAS));    
            assertTrue(keystore.isKeyEntry(Constants.APP_ALIAS));

            Key key = keystore.getKey(CryptoManager.Constants.APP_ALIAS, 
                                        password.toCharArray());
            assertTrue(key.getAlgorithm().equals(CryptoManager.Constants.PROVIDER_NAME));

            assertTrue(key.getAlgorithm().equals(CRYPTOKEY.getAlgorithm()));
            assertTrue(key.getFormat().equals(CRYPTOKEY.getFormat()));

            if(fis != null)
                fis.close();
    }
} 
```

编辑：NewPasswordActivity.onCreate：

```
@Override
protected void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.new_password_layout);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T12:00:20.517

它挂起是因为 PasswordEntryActivityTests 没有释放/完成在其自己的运行生命周期中自己处理/创建的资源/UI 事件，更具体地说，是新打开的 NewPasswordActivity。

PasswordEntryActivityTests 首先测试 PasswordEntryActivity 的创建，即`getActivity()`，因此，根据条件，启动第二个 NewPasswordActivity，新打开的 NewPasswordActivity 占据前台窗口并永久保留，开发人员有责任在您完成后正确释放它测试。

在仪器测试中，从当前活动检测/监控第二个活动启动的正确方法是使用[ActivityMonitor](http://developer.android.com/reference/android/app/Instrumentation.ActivityMonitor.html)，请参见下面的伪代码：

```
// No password result starting a second activity.
public void testNoPassword() {
  // register NewPasswordActivity that need to be monitored.
  ActivityMonitor activityMonitor = getInstrumentation().addMonitor(NewPasswordActivity.class.getName(), null, false);

  // Get current activity, it will start NewPasswordActivity in consequence.
  PasswordEntryActivity currentActivity = getActivity();

  NewPasswordActivity nextActivity = getInstrumentation().waitForMonitorWithTimeout(activityMonitor, 5);
  // NewPasswordActivity is opened and captured.
  assertNotNull(nextActivity);
  // Don't forget to release/finish NewPasswordActivity after test finish.
  nextActivity.finish();
} 
```

# c++ - 流中奇怪的 eof 标志

> ID：14617859
> 
> 赞同：2
> 
> 时间：2013-01-31T03:14:07.197
> 
> 标签：c++

我在使用 c++ 文件流解析文本文件时遇到了一个奇怪的问题。这是代码：

```
while (true)
{       
    std::getline(inFile, line);
    if (!inFile.good())
    {
        std::cout << "Fail, bad and eof flags:" << inFile.fail() << inFile.bad() << inFile.eof() << std::endl;
        break;
    }
    parseLine(line);        
} 
```

当读取终止时，输出为：

```
Fail, bad and eof flags:001 
```

但实际上阅读器并没有到达文件的末尾。我打开文件，发现下一个字符实际上是 26（ASCII 码）。那么问题来了：1）为什么在读取这个字符的时候设置了eof标志，如何避免这种错误终止呢？2）如何从这种状态中恢复？谢谢！

PS：谢谢回复。如果我以二进制模式读取文件怎么办？有更好的解决方案吗？我使用的是 Windows 平台，但该文件似乎是一个 unix 文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T03:31:15.623

> 为什么在读取此字符时设置了 eof 标志

因为它是 EOF 标记字符。

来自[维基百科](http://en.wikipedia.org/wiki/End-of-file)：

> 在**Microsoft 的 DOS 和 Windows**（以及 CP/M 和许多 DEC 操作系统）中，从终端读取永远不会产生 EOF。相反，程序识别源是终端（或其他“字符设备”）并将**给定的保留字符或序列解释为文件结束指示符；最常见的是 ASCII Control-Z，代码 26。**

* * *

> 如何避免这种错误终止

这不是“错误”的终止。

* * *

> 如何从这种状态中恢复？

你不需要。

如果您尝试读取预期会出现任意字符的“二进制文件”，您将以二进制模式打开文件流。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T03:21:39.583

ASCII 字符 26 是 SUB 控制字符，在插入符号中是`^Z`. 您可能会将其识别为 Windows 文件结尾字符。因此，假设 ASCII 和 Windows，就可以了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T03:24:24.433

干得好：

[Getline 和 16h (26d) 字符](https://stackoverflow.com/questions/2935760/getline-and-16h-26d-character)

看起来你必须编写自己的*getline*函数。似乎没有办法解决它：p 我知道，似乎没有其他人知道。如果有人知道更好的方法，请加入。

# python - python setup.py 目录权限

> ID：14617864
> 
> 赞同：1
> 
> 时间：2013-01-31T03:14:50.457
> 
> 标签：python, packaging, setup.py

我正在尝试创建一个 setup.py 来构建 rpm/deb 包，我希望它创建一个具有 777 权限的空白目录。我让它通过 data_files 创建目录

```
 data_files=[ 
                ( '/var/spool/my_dir', [] )
             } 
```

但它会创建具有 755 权限的目录。我如何获得 setup.py 以创建具有 777 权限的目录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-10T11:19:12.930

有一种方法可以做到这一点。您将需要覆盖该`install`方法。在这里查看我的答案： [在 setup.py 文件中设置文件权限](https://stackoverflow.com/questions/5932804/set-file-permission-in-setup-py-file/25761434#25761434)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T03:26:56.707

我认为没有办法在对`setup`.

你总是可以在通话后`import os`做一些事情。不过老实说，我想知道您是否*真的*需要这些权限。`os.chmod('/var/spool/my_dir', 0777)``setup`

# c - 如何让数字在C中显示为两位数？

> ID：14617865
> 
> 赞同：57
> 
> 时间：2013-01-31T03:14:52.347
> 
> 标签：c, digit

用于 C 编程。我如何让数字显示为 00、01、02、03，而不是 0、1、2、3。我只需要在数字前加上 0，直到 10。

我知道当你做小数时你可以做“%.2f”等，但是对于整数呢？

这是我正在使用的......**

```
printf("Please enter the hours: ");
    scanf ("%d",&hour);
printf("Please enter the minutes: ");
    scanf ("%d",&minute);
printf("Please enter the seconds: ");
    scanf ("%d",&second);
printf("%d : %d : %d\n", hour, minute, second); 
```

}

我需要将数字显示为 00 : 00 : 00

??

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2013-01-31T03:16:07.617

`%02d`如果要将前导零填充到两个空格，则需要使用：

```
printf ("%02d : %02d : %02d\n", hour, minute, second); 
```

例如，请参见以下完整程序：

```
#include <stdio.h>
int main (void) {
    int hh = 3, mm = 1, ss = 4, dd = 159;
    printf ("Time is %02d:%02d:%02d.%06d\n", hh, mm, ss, dd);
    return 0;
} 
```

输出：

```
Time is 03:01:04.000159 
```

* * *

请记住，这`%02d`意味着两个字符的*最小*宽度，因此它将输出 123*作为* `123`. 如果您的值是有效的小时、分钟和秒，那应该不是问题，但值得记住的是，因为许多没有经验的编码人员似乎会错误地认为 2 是最小*和*最大长度。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2013-01-31T03:16:06.900

使用格式：`%02d`代替。`0`使用零填充字段的方法以及该`2`字段是两个字符宽的意思，因此对于显示少于 2 个字符的任何数字，它将用 0 填充。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-07-18T08:46:52.333

`"%.2d"`是应该使用的。规则基本上是；

`"%<minimum-characters-overall>.<minimum-digits>d"`.

例如：

`"%6.3d"`将总共​​打印 6 个字符和至少 3 位数字。

# drupal-7 - 带有上下文过滤器的 Drupal 视图返回空白屏幕

> ID：14617868
> 
> 赞同：0
> 
> 时间：2013-01-31T03:15:08.103
> 
> 标签：drupal-7, drupal-views, drupal-taxonomy, drupal-panels

这是一个非常特殊的问题，因此将不胜感激任何输入...

我在 drupal 7 站点的自定义视图模板文件中使用面板和视图。该面板中嵌入了一个视图，以及下面的一些额外内容。我有 3 个上下文过滤器的视图集，这些过滤器具有从 url 中提取的分类术语。这工作正常。所以如果我去类似的东西

```
/search/ford/red 
```

它将成功提取所有具有分类术语“福特”且应用了分类术语“红色”的项目。

但有趣的是，如果我将其中一个术语更改为词汇表中存在的内容，但碰巧与成功通过第一个标准的项目没有任何关系，它只会加载面板空白的站点包装器。没有任何错误，搜索过滤框消失，分页消失，甚至视图中嵌入的其他内容也消失了。

对于应用于视图的任何或所有过滤器，我为“如果过滤器值未验证要采取的操作”选择什么似乎并不重要。我尝试将其设置为不显示任何结果，但我认为它不适用，因为我还在为视图使用自定义模板文件。

我希望它不会显示任何结果。但我也希望它的顶部有搜索栏，以便用户可以从菜单中选择不同的过滤器，以及嵌入在视图中的其他内容。

搜索框是视图模板文件的自定义。它不会显示的唯一原因是视图本身没有加载。在这种情况下，看起来整个面板都没有显示。

如果这还不够继续，请随时询问细节。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T02:10:16.963

对于在 drupal 中遇到许多无法解释的漏洞的未来读者，这是我必须做的完整的黑客攻击，以防止这个未宣布的错误：

在我的自定义视图中，我必须检查大小，`$view->result`如果为空则重新定义它：

```
<?php if(sizeof($view->result) < 1): $view->result = array(0 => array()); ?>
<div class="no-results">
    There are no results.
</div>
<?php else: ?>
--- normal view loop here ---
<?php endif; ?> 
```

不，简单地向结果循环添加计数规定是行不通的。我不知道 drupal 如何处理视图，但如果我允许结果数组为空，它将不会显示此面板的内容。

不利的一面 - 它仍然不显示此面板中嵌入的任何其他内容，因此如果我在此面板下方有另一个嵌入视图，它会神秘地消失。哦，好吧，我只是告诉管理员他们不能用除可过滤索引之外的任何内容填充此页面。Phooey，但那是 drupal 生活...... POS。

# php - 连接 3 个表以显示某些数据 PHP-MSSQL

> ID：14617873
> 
> 赞同：0
> 
> 时间：2013-01-31T03:16:27.883
> 
> 标签：php, sql, sql-server, database, join

所以我有这个表，我想获取某些数据供用户查看并能够发布到其他页面

我不能发布图片，所以我必须把它分解，所以请多多包涵

第一张桌子

*   dbo.users
*   pkey（用户 ID）
*   员工姓名

第二张桌子

*   电脑版
*   密钥（PCID）
*   PC_编号

第三张桌子

*   dbo.FA_PC
*   pkey(FAID)
*   fkey(用户ID)
*   fkey(PCID)

我如何以相同的形式显示当前选择的 $rs->Fields('UserID') 的 PC_Number 并且仍然能够将其发布到 printd.php

我不知道如何连接 dbo.users->dbo.FA_PC->dbo.PC

```
<form action="printd.php" method="post" target="_blank">
<?php
ini_set("display_errors","on");
$conn = new COM("ADODB.Connection");
   try {
   $myServer = "WTCPHFILESRV\WTCPHINV";
   $myUser = "sa";
   $myPass = "P@ssw0rd";
   $myDB = "wtcphitinventory";   
   $connStr = "PROVIDER=SQLOLEDB;SERVER=".$myServer.";UID=".$myUser.";PWD=".$myPass.";DATABASE=".$myDB;
   $conn->open($connStr); 
         if (! $conn) {
            throw new Exception("Could not connect!");
        }
   }
   catch (Exception $e) {
      echo "Error (File:): ".$e->getMessage()."<br>";
   }

if (!$conn)
  {exit("Connection Failed: " . $conn);}

    $sql_exp = "select * from dbo.users"; 

  $rs = $conn->Execute($sql_exp);
echo "<select name='empt'>";
   while (!$rs->EOF) {
       set_time_limit(0);
        echo "<option value=".$rs->Fields('UserID')." >".$rs->Fields('EmployeeName')."</option>";

      $rs->MoveNext();
   }       
   $rs->Close();   

       ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T03:18:56.820

加入看起来像这样，

```
SELECT  a.*, c.PC_Number
FROM    users a
        INNER JOIN FA_PC b
            ON a.UserID = b.UserID
        INNER JOIN PC c
            ON b.PCID = c.PCID 
```

要全面了解联接，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

# notepad++ - Notepad++ 的十六进制查看器/编辑器插件？

> ID：14617888
> 
> 赞同：134
> 
> 时间：2013-01-31T03:19:16.767
> 
> 标签：notepad++

我浏览了插件并在论坛中搜索了 Notepad++ 并没有看到在[Notepad++](https://en.wikipedia.org/wiki/Notepad++)中将数据编辑为十六进制的解决方案。

我追求的是[UltraEdit](http://en.wikipedia.org/wiki/UltraEdit)提供的相同功能（参见下面的屏幕截图），您可以在其中直接或通过输入新的十六进制字符来编辑文档。

![UltraEdit 十六进制编辑器的屏幕截图](../Images/5c56d8b0ee73d817f85b209bb217c594.png)

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-01-31T09:17:24.550

[这里](http://sourceforge.net/projects/npp-plugins/files/Hex%20Editor/)有一个名为**HEX Editor** 的旧插件。

根据[Super User 上的这个问题，](https://superuser.com/q/163006)它不适用于较新版本的 Notepad++，并且可能存在一些稳定性问题，但根据您的需要，它仍然可能有用。

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2013-11-25T11:52:53.753

是否可以选择完全不同（但仍然免费）的应用程序？我使用[HxD](http://mh-nexus.de/en/hxd/)，它比 Notepad++ 插件更适合我。它可以计算哈希值，打开进程的内存，打开任何大小的文件都很快，并且与剪贴板配合得非常好。

我曾经使用 Notepad++ 插件，但现在不再使用了。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-04-04T19:06:44.150

根据对 Super User 的一些评论，它仍然有效 :) 它应该被复制回 plugins 文件夹（如果它在禁用文件夹中）或从[Plugins Central](http://docs.notepad-plus-plus.org/index.php?title=Plugin_Central)下载。我几分钟前已经下载并成功使用它。

当然，请注意：此插件在某些情况下可能不稳定 - 这就是它被禁用的原因。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-11-25T11:08:55.537

ellak 提到的十六进制编辑器插件仍然有效，但您似乎也需要**TextFX Characters**插件。

我最初只安装了十六进制插件，Notepad++ 不再弹出；相反，它开始吃内存（以 1.2 GB 杀死它）。我再次将其删除，并出于其他原因安装了 TextFX 插件（基于*[Find multiple lines in Notepad++](https://stackoverflow.com/questions/5489128/find-multiple-lines-in-notepad)）*

出于好奇，我再次安装了十六进制插件，现在它可以工作了。

请注意，这是全新安装的 Windows 7 64 位。

# excel - Excel 突出显示匹配日期的单元格

> ID：14617891
> 
> 赞同：2
> 
> 时间：2013-01-31T03:19:19.347
> 
> 标签：excel, date, match, highlight

我只想知道每当我将笔记放入另一个单元格时，是否可以根据日期突出显示某个单元格？如下图所示，有一组带有日期的日历。

![图 1](../Images/56b79a1919c45bb678d5ed55ca188224.png)

现在我想要实现的是每当我将笔记放入另一个单元格时突出显示这些日期，如下图所示

![图 2](../Images/f9c88e4787786cc012676b840f15d465.png)

假设我在 1 月 5**日星期六**输入了一个注释，图像 1（1 月 5 日）中的单元格将以背景颜色突出显示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T06:48:19.603

你的问题由两部分组成。首先，您需要知道如何使用基于公式的条件格式，然后您需要将日历单元格映射到相应的备注单元格。

基于公式的条件格式记录在网络上的几个地方，例如[这里](http://www.techrepublic.com/blog/msoffice/use-a-formula-to-trigger-excels-conditional-formatting-feature/831)。对于您的情况，我创建了一个简单示例的屏幕截图：

![条件格式示例的屏幕截图](../Images/223fe78cd081c979ae7adf5f0ab9df2a.png)

在您的情况下，困难的部分（或艰苦的工作，取决于您选择的路线）是将日历中的所有单元格映射到可能包含注释的相应单元格。因此，您需要一种方法来计算特定单元格是一年中的哪一天。

我认为您可以通过 12 个不同的条件格式公式来实现这一点，您可以在其中引用“此”单元格的内容`INDIRECT("RC",FALSE)`来获取月份中的某天，然后添加该月之前的天数（为此您需要 11 个不同的常数）。该结果可以用作潜在笔记数组的索引。所以对于二月，计算一年中日期的公式变为：

```
31+INDIRECT("RC",FALSE) 
```

使用该数字检查注释列中的行（假设它们在 column 中`A`），二月份所有单元格的条件公式变为

```
=NOT(ISBLANK(INDIRECT("A"&(31+INDIRECT("RC",FALSE))))) 
```

然后每个月做同样的事情，每个月的常数（比如 31）是不同的。

请注意，像这样使用`"RC"`in`INDIRECT()`仅在条件格式公式中才有意义。

# email-spam - Spamd "Tell: did nothing for (unknown):0 in 0.0 seconds" 是什么意思？

> ID：14617892
> 
> 赞同：2
> 
> 时间：2013-01-31T03:19:26.343
> 
> 标签：email-spam, spamassassin

我将 spamd 连接到我的电子邮件程序，当我使用“TELL”命令向其发送已知的垃圾邮件时，日志显示：

```
 spamd: Tell: Did nothing for (unknown):0 in 0.1 seconds, 13194 bytes 
```

这是正常的吗？还是我搞砸了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-09-14T10:44:16.420

如果您收到此消息，您的设置可能存在多个问题。

1.  由于它说`unknown`的是用户名而不是用户名，因此您似乎没有将`User: <xyz>`标头传递给 spamd。
2.  尝试在 #1 之后进行 TELL 呼叫。如果您仍然收到相同的消息（“什么都没做”，那么如果在连接/打开令牌数据库时出现问题，请使用启用调试模式 (-D) 的垃圾邮件。

# java - 计算java中二维数组的出现次数

> ID：14617900
> 
> 赞同：0
> 
> 时间：2013-01-31T03:20:45.453
> 
> 标签：java, arrays, indexoutofboundsexception

这是我要解决的问题：

编写一个名为 的类`ArrayHistogram`，其中包含一个 main 方法和一个名为 histogram 的静态方法，其签名如下： `public static int[] histogram(int[][] arrayA)` 在 main 方法中，声明并初始化一个二维数组，调用它`arrayA`。该数组必须包含一些非负整数。histogram 方法接受`arrayA`元素的出现频率并将其`arrayA`放入一维数组 ( `histA`) 中并返回`histA`。出现频率是指一个元素在数组中出现的次数。您的程序也应该适用于参差不齐的数组。`histA`在声明变量之前，您的程序应该自动确定 的大小`histA`。

提示：图 1 显示了一个示例 2D 数组 ( `arrayA`) 和对应的`histA`. `histA[0] = 2`表示 0 在 A 中出现了两次。或者，`histA[3] = 1`表示数字 3 在 A 中出现了一次。

到目前为止我已经这样做了

```
public class ArrayHistogram
{
    public static void main (String[]args)
    {
        // declearing and initializing a 2D array.
        int [][] arrayA = {{5,8,8,4,3},{1,4,2,2,3},{7,4,6,6,9}};
        histogram(arrayA);

    }
    public static int[] histogram (int [][] arrayA)
    {  // nested for loop to go through the array.
        int max = 0;
       for ( int row = 0; row<arrayA.length; row++){
           for ( int col=0; col < arrayA[row].length; col++){

               if ( arrayA[row][col]> max ){
                   max = arrayA[row][col];
            }
        }
    }
    int histA[] = new int [max];
    for ( int row = 0; row<arrayA.length; row++){
           for ( int col=0; col < arrayA[row].length; col++){
               histA[arrayA[row][col]]++;
            }
        }
        System.out.println(histA);
        return histA;
    }
} 
```

这一行：

```
histA[arrayA[row][col]]++; 
```

显示一个`java.lang.ArrayIndexOutOfBoundsException`

首先我这样做对吗？

如果不是，我应该如何实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T03:39:32.910

`length`是返回大小的数组对象的属性。现在，由于您从 0 开始循环数组到`length`数组，它指的是甚至不存在的数组索引。因此一个`ArrayIndexOutOfBoundException`.

只需将`for`循环终止表达式更新为`arrayA.length-1`and`arrayA[row].length-1`就可以了。

同样对于所有这些，`exceptions`只需检查他们的[Java Doc](http://docs.oracle.com/javase/6/docs/api/java/lang/Exception.html)，您就会得到答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T03:28:43.877

请记住，数组的索引从 开始`0`，因此您的`max`值不会成为`histA`数组中可用的索引。解决此问题的一种方法是像这样创建您的数组：

```
int histA[] = new int[max + 1]; 
```

在您的第二个循环中，当您点击`row`being`2`和`col`being时`4`，它将尝试使用`histA[9]`which 不是该数组中的有效索引，除非您将数组定义为 size `10`，在您的情况下为`max + 1`.

# onclick - 我无法让我添加的元素来激活功能

> ID：14617901
> 
> 赞同：0
> 
> 时间：2013-01-31T03:20:46.767
> 
> 标签：onclick, colorbox, insertafter

我正在尝试在创建[颜色框](http://www.jacklmoore.com/colorbox)界面时添加一个链接。它最终将链接到当前显示的图像文件，但现在我只想让 console.log 工作。它正确添加了链接（#print-one），但是单击链接时我无法运行函数。任何帮助将非常感激！

```
$(document).bind('cbox_complete', function () {
    // Show close button with a delay.
    $('#cboxClose').css('opacity', 1);
    // Add Print Button
    if ($('#print-one').length ) {
        // Do Nothing
    }else {
        $('#cboxNext').after('<a href="javascript:void(0)" id="print-one">Print</a>');
    }
});

$('#print-one').click(function() {
    console.log('Works');
}); 
```

这一切都包含在 $(document).ready 函数中。单击链接时，我无法使控制台日志正常工作。我一直在用头撞墙试图弄清楚。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T03:28:57.783

您需要委托该事件。

`$(document).on('click', '#print-one', function(){});`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T03:38:52.250

貌似是cbox初始化后才添加链接的，编译器到下面几行的点击绑定函数可能还没准备好。

试试这个：

```
...
// Add Print Button
if ($('#print-one').length ) {
    // Do Nothing
}else {
    $('<a href="#">Print</a>').insertAfter('#cboxNext').click(function() {
        console.log('Works');
    });
} 
```

# python - 在 Python 中模拟掷骰子？

> ID：14617902
> 
> 赞同：3
> 
> 时间：2013-01-31T03:21:34.047
> 
> 标签：python, random, dice

第一次在这里写..我正在用python编写一个“掷骰子”程序，但我被卡住了，因为不能让它每次都生成一个随机数

这就是我到目前为止所拥有的

```
import random

computer= 0 #Computer Score
player= 0 #Player Score

print("COP 1000 ")
print("Let's play a game of Chicken!")

print("Your score so far is", player)

r= random.randint(1,8)

print("Roll or Quit(r or q)") 
```

* * *

现在每次我输入 r 都会一遍又一遍地生成相同的数字。我只是想每次都改变它。

我希望每次都能更改号码，请帮助我问我的教授，但这是他告诉我的。“我想你必须弄清楚”我的意思是我希望我能并且我一遍又一遍地检查我的笔记再次，但我没有任何关于如何做的事情：-/

* * *

顺便说一句，这就是它向我展示程序的方式

```
COP 1000
Let's play a game of Chicken!
Your score so far is 0
Roll or Quit(r or q)r

1

r

1

r

1

r

1 
```

我想发布一张图片，但它不会让我

* * *

**我只想对所有回答我问题的人说声谢谢！您的每一个答案都很有帮助！**感谢你们，我会按时完成我的项目！谢谢你**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T04:16:37.883

```
import random

computer= 0 #Computer Score
player= 0 #Player Score

print("COP 1000 ")
print("Let's play a game of Chicken!")

print("Your score so far is", player)

r= random.randint(1,8) # this only gets called once, so r is always one value

print("Roll or Quit(r or q)") 
```

您的代码中有很多错误。这只会工作一次，因为它不在循环中。改进后的代码：

```
from random import randint
computer, player, q, r = 0, 0, 'q', 'r' # multiple assignment
print('COP 1000')  # q and r are initialized to avoid user error, see the bottom description
print("Let's play a game of Chicken!")
player_input = '' # this has to be initialized for the loop
while player_input != 'q':
    player_input = raw_input("Roll or quit ('r' or 'q')")
    if player_input == 'r':
        roll = randint(1, 8)
    print('Your roll is ' + str(roll))
    # Whatever other code you want
    # I'm not sure how you are calculating computer/player score, so you can add that in here 
```

循环执行其下的`while`所有操作（即缩进），直到语句变为 false。因此，如果玩家输入`q`，它将停止循环，并进入程序的下一部分。请参阅：[Python 循环 --- 教程点](http://www.tutorialspoint.com/python/python_loops.htm)

关于 Python 3 的挑剔部分（假设你正在使用它）是缺少`raw_input`. 使用`input`，无论用户输入什么都被评估为 Python 代码。因此，用户必须输入“q”或“r”。但是，避免用户错误的一种方法（如果玩家输入简单`q`或`r`，没有引号）是用这些值初始化这些变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T03:24:17.327

不知道什么类型的骰子有 8 个数字，我用的是 6。

一种方法是使用随机播放。

```
import random
dice = [1,2,3,4,5,6]
random.shuffle(dice)
print(dice[0]) 
```

每次它都会随机打乱列表并获取第一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T04:12:00.877

只需使用：

```
import random
dice = [1,2,3,4,5,6]       #any sequence so it can be [1,2,3,4,5,6,7,8] etc
print random.choice(dice) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-02T09:33:06.173

这是最简单的答案之一。

```
import random

def rolling_dice():

    min_value = 1

    max_value = 6

    roll_again = "yes"

    while roll_again == "yes" or roll_again == "Yes" or roll_again == "Y" or roll_again == "y" or roll_again == "YES":
        print("Rolling dices...")
        print("The values are...")
        print(random.randint(min_value, max_value))
        print(random.randint(min_value, max_value))
        roll_again = input("Roll the dices again? ")

rolling_dice() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-02T06:42:36.447

这是一个 python 骰子滚轮它要求 ad(int) 并返回一个介于 1 和 (d(int)) 之间的随机数。它返回没有 d 的骰子，然后打印随机数。它可以做 2d6 等。如果你输入 q 或退出，它会中断。

```
import random 
import string
import re
from random import randint

def code_gate_3(str1):
  if str1.startswith("d") and three == int:
    return True
  else:
    return False

def code_gate_1(str1):
    if str1.startswith(one):
      return True
    else:
      return False

def code_gate_2(str2):
    pattern = ("[0-9]*[d][0-9]+")
    vvhile_loop = re.compile(pattern)
    result = vvhile_loop.match(str1)
    if result:
      print ("correct_formatting")
    else:
      print ("incorrect_formattiing")

while True:
  str1 = input("What dice would you like  to roll? (Enter a d)")
  one, partition_two, three = str1.partition("d")
  pattern = ("[0-9]*[d][0-9]+")
  if str1 == "quit" or str1 == "q":
    break
  elif str1.startswith("d") and three.isdigit():
    print (random.randint(1, int(three)))
    print (code_gate_2(str1))
  elif code_gate_1(str1) and str1.partition("d") and one.isdigit():
    for _ in range(int(one)):
      print (random.randint(1, int(three)
  print (code_gate_2(str1))
  elif (str1.isdigit()) != False:
    break
  else:
    print (code_gate_2(str1))
  print ("Would you like to roll another dice?")
  print ("If not, type 'q' or 'quit'.")

print ("EXITING>>>___") 
```

# php - Nginx 标头被缓存无法清除

> ID：14617908
> 
> 赞同：0
> 
> 时间：2013-01-31T03:22:57.583
> 
> 标签：php, caching, header, nginx, memcached

我一直在尝试更新 nginx 服务器中的标头（X-Frame-Options）标头，因为我错误地更新了它（错误的语法），之后我注意到标头根本没有更新。

我已经尝试评论和删除相同的标题，但没有区别。目标站点的 curl -I 总是显示错误的标头（即我第一次添加的标头）。我相信标头缓存在某处。

我也尝试清除 nginx 缓存 10-15 次，但同样的事情正在发生。设置有 php5-fpm 和 nginx。php5-fpm和nginx我也重启了很多次，看看有没有区别，一直失败。

我们还为 css、图像等设置了过期时间，我不确定这是否会影响此标头。我不确定我在这里缺少什么，任何专家指导都会很有帮助。

# javascript - 在 Meteor 中，getData('text') 总是返回一个空字符串

> ID：14617910
> 
> 赞同：1
> 
> 时间：2013-01-31T03:23:23.117
> 
> 标签：javascript, html, events, drag-and-drop, meteor

我正在使用 Meteor，我有这个代码来拖放一个元素：

```
Template.occupations.events({
  'dragover .liOccupation': function (evt) {
    evt.preventDefault();
  },
  'dragleave .liOccupation': function (evt) {
    evt.preventDefault();
  },
  'drop .liOccupation': function (evt) {
    evt.preventDefault();
    console.log(evt.dataTransfer.getData('text/plain'));
  }
});

Template.todos.events({
  'drag .liTodos': function (evt) {
    evt.preventDefault();
    evt.dataTransfer.setData('text/plain','the');
    console.log(evt.dataTransfer.getData('text/plain'));
  }
}); 
```

会发生什么`console.log(evt.dataTransfer.getData('text/plain'));`总是返回一个空字符串..

有谁知道为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T07:01:58.817

如果您使用的是 webkit 浏览器 (Safari/Chrome)，则下面的部分将`'drag .liTodos'`不适用于所有浏览器。例如，Chrome 将其限制为仅返回 下的数据`drop`，具体取决于您拥有的版本。你可以看看这个也看过这个的替代问题

[HTML5 拖放 getData() 仅适用于 Chrome 中的拖放事件？](https://stackoverflow.com/questions/9534677/html5-drag-and-drop-getdata-only-works-on-drop-event-in-chrome)

# ruby-on-rails - Ruby on Rails：在没有应用程序布局的情况下呈现页面

> ID：14617916
> 
> 赞同：0
> 
> 时间：2013-01-31T03:23:53.137
> 
> 标签：ruby-on-rails

在我的 Rails 应用程序中，我正在尝试定义一个自定义 mime 类型，该类型可以呈现纯 html，而无需站点导航或任何格式（css 等）。我阅读的一个[较旧问题](https://stackoverflow.com/questions/4769058/rails-3-custom-mime-type-default-view-format)的答案描述了如何通过完全关闭当前请求的布局来做到这一点，但**我希望我的渲染页面包含嵌套布局**，而不是主应用程序布局。我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T03:32:02.723

尝试`layout nil` 无布局

```
layout 'name' for render your layout. 
```

或者你可以使用

```
render :layout => layout_name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T03:38:15.737

你可以渲染任何你想要的布局，如

渲染：布局=>“special_nested_super_duper_layout”

确保布局位于 app/views/layouts 中，一切顺利

# ms-access - 日期函数调用上的旧 vba 项目代码错误

> ID：14617923
> 
> 赞同：1
> 
> 时间：2013-01-31T03:24:26.650
> 
> 标签：ms-access, vba

刚刚打开了一个旧的 MS Access 2003 项目以更新一些东西。开始运行程序并收到以下错误（是的，新安装了 Access 2003 的不同机器）“找不到项目或库”问题似乎与 Date vba 函数调用有关。我可以：

```
Dim d as Date
d = Date (throws error) 
```

并在下拉列表中获取日期，但是当我尝试使用它时出现错误。在尝试几件事之前，我收到了对 PJCALEND.DLL 的引用丢失的错误，但在我去下载该文件之前，不确定我是否相信我所看到的各种版本，是否有另一个我可以使用的库这个功能？我查看了参考资料，没有任何东西被标记为丢失。这对我来说似乎有点奇怪。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T23:23:55.860

任何缺少的库都会导致奇怪的错误，并且由于某种原因，这些似乎会影响内置的 VBA 函数。日历控件尤其是一个已知问题。检查缺少的引用，确保您使用的是后期绑定，并且最好不要使用 ActiveX 日历控件。

# ios - 使用 UINavigationController 的 initWithNavigationBarClass:toolbarClass 的正确方法：

> ID：14617926
> 
> 赞同：13
> 
> 时间：2013-01-31T03:24:42.620
> 
> 标签：ios

从苹果文档中，我了解到可以使用 initWithNavigationBarClass:toolbarClass: 方法将 UiNavigationController 与另一个 Uinavigationbar 实例化。如何通过自定义 UiNavigationBar 子类和 IB 正确地做到这一点？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-31T03:27:27.837

您可以像这样使用它来初始化导航控制器，

```
UINavigationController *navigationController = [[UINavigationController alloc] initWithNavigationBarClass:[CustomNavigationBar class] toolbarClass:nil]; 
```

这`CustomNavigationBar`是通过子类化创建的自定义类`UINavigationBar`。您可以使用`setViewControllers`UINavigationController 的属性设置视图控制器。

如果您想在 IB 中执行此操作，请尝试此操作。从对象中选择导航栏，然后在身份检查器中选择导航栏的自定义类。

![在此处输入图像描述](../Images/0b5ffb25a6cddce0f21641f7dcd88c92.png) ![在此处输入图像描述](../Images/23755ed790676d4e092f21c10c2137ee.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-31T03:32:47.113

在 Interface Builder 中，您单击导航控制器内的导航栏。在右侧面板上检查它，并将自定义类从更改`UINavigationBar`为您的自定义子类。

在代码中，确保您已导入导航栏子类的头文件并编写类似于以下内容的内容。

```
// This code assumes `MyCustomNavigationBar` is the name of your custom subclass, and that `viewController` is a UIViewController object created earlier.

// To create the containing navigation controller
UINavigationController *navigationController = [[UINavigationController alloc] initWithNavigationBarClass:[MyCustomNavigationBar class] toolbarClass:[UIToolbar class]];

// To set the root view controller in the navigation controller
navigationController.viewControllers = @[viewController]; 
```

上面的代码通知 UIKit 创建一个`UINavigationController`带有子类的导航栏`MyCustomNavigationBar`。然后，它将根视图控制器设置为存储在变量中的对象`viewController`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-29T20:29:26.607

在这里为您的一般子类混合本杰明梅奥的答案

```
- (UINavigationController *)initWithRootViewController:(UIViewController *)rootViewController  navigationBarClass:(Class)navigationBarClass {
    self = [super initWithNavigationBarClass:navigationBarClass toolbarClass:UIToolbar.class];
    if (self) {
        self.viewControllers = @[rootViewController];
    }
    return self;
} 
```

# jquery - Firefox中的值后的jQuery焦点光标

> ID：14617928
> 
> 赞同：1
> 
> 时间：2013-01-31T03:24:48.980
> 
> 标签：jquery, html

我正在对文本字段进行 jQuery 关注。在 Chrome 和 IE 中，光标在值之后开始，但在 firefox 中，光标在值之前开始。我如何使它在Firefox中的值之后开始？

相关代码如下：

```
$($.cookie("inputFocus")).focus() 
```

整个jQuery代码如下：

```
<script>
$(document).ready(function() {
    $("#state").change(function () {
    this.form.submit();
})
var focus = $.cookie("inputFocus");
$(focus).focus();
$(focus)[0].setSelectionRange($(focus).val().length, $(focus).val().length);

$("#supplier_name").val($("#supplier_name").val());
$("#aircraft_type").val($("#aircraft_type").val());
var typingTimer;                
var doneTypingInterval = 600;  

$('#supplier_name').keyup(function(){
    clearTimeout(typingTimer);
    if ($('#supplier_name').val) {
        typingTimer = setTimeout(doneTyping, doneTypingInterval);
    }
    $.cookie("inputFocus", "#supplier_name"); 
});

$('#aircraft_type').keyup(function(){
    clearTimeout(typingTimer);
    if ($('#aircraft_type').val) {
        typingTimer = setTimeout(doneTyping, doneTypingInterval);
    }
    $.cookie("inputFocus", "#aircraft_type"); });
function GetQueryStringParams(sParam)
{
    var sPageURL = window.location.search.substring(1);
    var sURLVariables = sPageURL.split('&');
    for (var i = 0; i < sURLVariables.length; i++)
    {
        var sParameterName = sURLVariables[i].split('=');
        if (sParameterName[0] == sParam)
        {
            return sParameterName[1];
        }
    }
}

var state = GetQueryStringParams('state');
var supplier_name = GetQueryStringParams('supplier_name');
var aircraft_type = GetQueryStringParams('aircraft_type');

    if(supplier_name === "" && state === "any" && aircraft_type === "") {
            $('#clear').attr('disabled','disabled');
    }
    $("#clear").click(function() {
    if(state === "any") {
        $("#aircraft_type").val("");
        $("#supplier_name").val("");
    } else {
        $('#state option:selected').remove();
        $("#aircraft_type").val("");
        $("#supplier_name").val("");    
    }
    });

function doneTyping () {
    $("form").submit();
}

});
</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T03:36:57.620

您可以使用[setSelectionRange](https://developer.mozilla.org/en-US/docs/DOM/Input.setSelectionRange)设置插入符号的位置。

[在这里](http://jsfiddle.net/NytVr/)试试我的演示：

```
$('input').focus();
$('input')[0].setSelectionRange($('input').val().length, $('input').val().length); 
```

# java - 一个代码片段的Java泛型说明

> ID：14617929
> 
> 赞同：1
> 
> 时间：2013-01-31T03:25:00.453
> 
> 标签：java, generics

我试图理解这段代码。它来自[Oracle 泛型页面](http://docs.oracle.com/javase/tutorial/java/generics/boundedTypeParams.html)。

我在这里看到两种返回类型`<T extends Comparable<T>>`和`int`. 我读对了吗？如果是这样，一个方法怎么会有两种返回类型？

```
public static <T extends Comparable<T>> int countGreaterThan(T[] anArray, T elem) {
    int count = 0;
    for (T e : anArray)
    if (e.compareTo(elem) > 0)
        ++count;
    return count;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T03:26:32.153

不，返回类型是`int`

`T extends Comparable<T>`是*类型参数*，在参数中使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T03:29:17.307

该方法只有一种返回类型：int。

`<T extends Comparable<T>>`只是声明T的类型。

如果你做这样的事情：

```
public static int calculate(T param) {
  ....
} 
```

由于 T 未定义，您将遇到编译错误。T 是泛型类型，因此您需要指定它：

```
public static <T> int calculate(T param) {
  ....
} 
```

# java - 为什么 Java Web Start 缓存了这段不相关的 HTML？

> ID：14617930
> 
> 赞同：-1
> 
> 时间：2013-01-31T03:25:14.447
> 
> 标签：java, caching, java-web-start

我正在为现有站点开发新的 java web start 功能。一切都很顺利，除了我的*一个*测试启动，在*其中一*台机器上被一种如此奇怪的方式神秘地污染了，我正在抓住稻草来解释。

在细节之前，一些一般事实。该脚本适用于其他任何地方。仅当以特定用户身份登录时，它才会从这台机器上失败。如果直接从 Web 启动，或者本地 .jnlp 文件直接从 javaws 启动，则会失败。

它失败时的症状是javaws报告“第145行错误”，这本身就是莫名其妙的，因为jnlp文件只有大约15行。确凿的证据是，如果我使用 javaws -verbose，我会看到以下文本作为无法解析的文件的文本。

```
<!--
# Copyright (C) 2009, CyberTAN Corporation
# All Rights Reserved.
# 
# THIS SOFTWARE IS OFFERED "AS IS", AND CYBERTAN GRANTS NO WARRANTIES OF ANY
... 
```

加上一些可疑的 javascript。我已经确定，当连接到访客无线网络的人第一次尝试访问网络时，我的路由器会显示此文本。

所以我的工作理论是，一旦在测试阶段，我启动了我的上网本，不小心连接到来宾网络而不是常规网络，设法访问 web jnlp 文件作为第一个网络访问，并得到这个页面作为响应而不是预期的。

我的问题是，这个文本在哪里（以及为什么）在系统中持续存在？我到处搜索，包括隐藏文件，但在任何地方都找不到此文本。我还使用 -viewer 选项刷新了 javaws 缓存。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T14:30:17.547

您还在 Java Cache Viewer GUI (javaws -viewer) 中看到该应用程序吗？

尝试删除**C:\Documents and Settings\[account]\Local Settings\Application Data\Sun\Java\Deployment\cache**的缓存（或类似的，假设您使用的是 Windows）...

这里有一些额外的信息：[http ://www.ngs.ac.uk/clearwebstartcache](http://www.ngs.ac.uk/clearwebstartcache)

您是否更新了 JNLP 的 URL？这是朝着这个方向进行的一些讨论：[https ://forums.oracle.com/forums/thread.jspa?messageID=9804718](https://forums.oracle.com/forums/thread.jspa?messageID=9804718)

就个人而言，我不会太在意如何以及为什么 - WebStart 有时会很奇怪。只需在您的“一台机器”上解决问题，并尝试使您的高效 JNLP 尽可能稳定。

# java - Java反射改变参数？

> ID：14617934
> 
> 赞同：0
> 
> 时间：2013-01-31T03:25:25.960
> 
> 标签：java, reference, out, ref

我正在用 Java 编写一个我想模拟引用的方法。由于 java 没有 C# 中的 out 关键字，也没有 C++ 中的引用/指针，我想知道我是否可以使用反射来模拟它。

一个例子是：

```
public static boolean ChangeValue(Object Input, Object Output) {
    //Use some reflection here to change the value of Output?
    return true;
} 
```

然后主要：

```
public static void main(String[] args) {
    int I = 0;
    ChangeValue(I, I);
    System.out.println(I);
} 
```

所以.. 我可以使用反射来更改传递给我的 ChangeValue 方法的任何参数的值吗？我不想返回复合对象..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T03:30:44.610

Java 是按引用值传递的，这意味着如果将 Object 传递给方法并对其进行修改，则方法“外部”的对象也将被修改（因为 Object 只是一个引用）。一个例子是调用[`Arrays.sort`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#sort%28int%5B%5D%29)一个数组。

但是，对于原语（如`int`），情况并非如此，在这种情况下，Java 是按值传递的，因此您的示例`int I`不起作用。为了修改 的值`int I`，您应该`int`从您的方法中返回一个，并将其设置为`I`相应的值。

这意味着为了从方法中修改对象的值，不需要*反射*`ChangeValue`；对方法内的对象所做的任何事情，实际上都会修改`main`方法范围内的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T03:31:49.373

你不能。

您可以更改传递给方法的对象的属性，但不能更改调用代码的参数引用的内容——只能更改其引用的属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T03:35:35.243

```
 public static boolean changeValue(ArrayList<String> input, ArrayList<String> output) {
        //this changes a property on output, but does not change the reference to output
        output.addAll(input);

        return true;
    }

    public static void main(String[] args) {
        ArrayList<String> list1 = new ArrayList<String>();
        ArrayList<String> list2 = new ArrayList<String>();

        list1.add("Foo");

        System.out.println("List 2: " + list2);
        System.out.println("List 2 size:" + list2.size());

        changeValue(list1, list2);

        System.out.println("List 2: " + list2);    
        System.out.println("List 2 size:" + list2.size());
    } 
```

会打印...

清单 2：ArrayList@0x23409

清单 2 大小：0

清单 2：ArrayList@0x23409

清单 2 尺寸：1

# cocos2d-x - IOS GCD 移植到安卓 cocos2d-x

> ID：14617940
> 
> 赞同：1
> 
> 时间：2013-01-31T03:26:07.630
> 
> 标签：cocos2d-x

如何将IOS GCD移植到Android cocos2d-x？

如果我想在 Android cocos2d-x 上实现类似 IOS GCD 的功能。

如下（代码）：

```
dispatch_async(
        dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0),

^(void)

{
    dispatch_async(dispatch_get_main_queue(), ^ (void) {
    });
}

); 
```

有人尝试这样做吗？请帮我。

我应该怎么办？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T07:34:01.163

查看 pthread。有官方wiki描述的。 [http://www.cocos2d-x.org/projects/cocos2d-x/wiki/How_to_use_pthread](http://www.cocos2d-x.org/projects/cocos2d-x/wiki/How_to_use_pthread)

# r - 在 ddply 汇总之前从数据框中选择范围（时间戳）

> ID：14617945
> 
> 赞同：2
> 
> 时间：2013-01-31T03:26:29.843
> 
> 标签：r, timestamp, dataframe, plyr

使用[此处](https://stackoverflow.com/q/14615882/1670053)的信息，我可以使用时间戳信息来总结我的数据框。

```
data <- read.csv("data.csv", header=T)
data$TIMESTAMP <- strptime(data$TIMESTAMP, "%m/%d/%Y %H:%M") # make unambigous
data$TIMESTAMP <- as.POSIXct(data$TIMESTAMP) # plyr/ddply does not seem to like POSIXlt
data$DAY <- as.factor(format(data$TIMESTAMP,'%d'))
data$MONTH <- as.factor(format(data$TIMESTAMP,'%m'))
ddply(data,.(MONTH,DAY),summarise, V1 = mean(P), V2 = max(WS)) # summarize by month by day 
```

但是，我只想使用一天中的某些时间，例如 13:00:00 到 16:00:00 之间。如果我在执行该行之前这样做，我可以对数据框进行*子集*化（例如，创建一个新的数据框，它是原始 df 的子集） 。`as.POSIXct`但是，当我尝试以下顺序时：

```
data.1.4 <- data[format(data$TIMESTAMP, "%H") >= 13 & format(data$TIMESTAMP, "%H") < 17,] # subset the data
data.1.4$TIMESTAMP <- as.POSIXct(data.1.4$TIMESTAMP)
data.1.4$DAY <- as.factor(format(data.1.4$TIMESTAMP,'%d'))
data.1.4$MONTH <- as.factor(format(data.1.4$TIMESTAMP,'%m'))
ddply(data.1.4,.(MONTH,DAY),summarise, V1 = mean(P), V2 = max(WS)) # summarize by month by day 
```

我收到以下错误`Error in eval(expr, envir, enclos) : object 'MONTH' not found`。`data`我可以看到和之间的唯一区别`data.1.4`是 row.names 是“可见的”和非顺序 `data.1.4`数据帧。

那么，我如何从数据框中子集或选择条目以创建一个新的 df，然后我可以对其进行总结？

```
# dput of subset of data
data <- structure(list(TIMESTAMP = structure(1:15, .Label = c("1/1/2012 11:00", 
"1/1/2012 12:00", "1/1/2012 13:00", "1/1/2012 14:00", "1/1/2012 15:00", 
"1/2/2012 11:00", "1/2/2012 12:00", "1/2/2012 13:00", "1/2/2012 14:00", 
"1/2/2012 15:00", "4/7/2012 11:00", "4/7/2012 12:00", "4/7/2012 13:00", 
"4/7/2012 14:00", "4/7/2012 15:00"), class = "factor"), P = c(992.4, 
992.4, 992.4, 992.4, 992.4, 992.4, 992.4, 992.4, 992.4, 992.4, 
239, 239, 239, 239, 239), WS = c(4.023, 3.576, 4.023, 6.259, 
4.47, 3.576, 3.576, 2.682, 4.023, 3.576, 2.682, 3.129, 2.682, 
2.235, 2.682), WD = c(212L, 200L, 215L, 213L, 204L, 304L, 276L, 
273L, 307L, 270L, 54L, 24L, 304L, 320L, 321L), AT = c(16.11, 
18.89, 20, 20, 19.44, 10.56, 11.11, 11.67, 12.22, 11.11, 17.22, 
18.33, 19.44, 20.56, 21.11), FT = c(17.22, 22.22, 22.78, 22.78, 
20, 11.11, 15.56, 17.22, 17.78, 15.56, 24.44, 25.56, 29.44, 30.56, 
29.44), H = c(50L, 38L, 38L, 39L, 48L, 24L, 19L, 18L, 16L, 18L, 
23L, 20L, 18L, 17L, 15L), B = c(1029L, 1027L, 1026L, 1024L, 1023L, 
1026L, 1025L, 1024L, 1023L, 1023L, 1034L, 1033L, 1032L, 1031L, 
1030L), FM = c(14.9, 14.4, 14, 13.7, 13.6, 13.1, 12.8, 12.3, 
12, 11.7, 12.8, 12, 11.4, 10.9, 10.4), GD = c(204L, 220L, 227L, 
222L, 216L, 338L, 311L, 326L, 310L, 273L, 62L, 13L, 312L, 272L, 
281L), MG = c(8.047, 9.835, 10.28, 13.41, 11.18, 9.388, 8.941, 
8.494, 9.835, 10.73, 6.706, 7.153, 8.047, 8.047, 7.6), SR = c(522L, 
603L, 604L, 526L, 248L, 569L, 653L, 671L, 616L, 487L, 972L, 1053L, 
1061L, 1002L, 865L), WS2 = c(2.235, 3.576, 4.47, 4.47, 5.364, 
4.023, 2.682, 3.576, 3.576, 4.023, 3.129, 3.129, 3.576, 2.682, 
3.129), WD2 = c(200L, 201L, 206L, 210L, 211L, 319L, 315L, 311L, 
302L, 290L, 49L, 39L, 15L, 348L, 329L)), .Names = c("TIMESTAMP", 
"P", "WS", "WD", "AT", "FT", "H", "B", "FM", "GD", "MG", "SR", 
"WS2", "WD2"), class = "data.frame", row.names = c(NA, -15L)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T08:37:30.230

非常有趣，这是您可能要考虑使用的解决方案`data.table`。如果你想取*所有*列的平均值，代码甚至更小，`hour >= 13`并且`hour <= 15`

```
# changing the name from `TIMESTAMP` to `ts` : too long for me!
names(data)[1] <- "ts" 
```

`Step 1:`获取`data.table`并转换`ts`为`POSIXct`

```
require(data.table)
dt <- data.table(data) # convert to data.table
dt[, ts := as.POSIXct(ts, format="%m/%d/%Y %H:%M")] # convert to POSIXct 
```

`Step 2:`得到`hour`,`day`和`month`

```
# get hour, day, month
dt[, `:=`(day=as.POSIXlt(ts)$mday + 1, 
          month=as.POSIXlt(ts)$mon + 1, 
          hour=as.POSIXlt(ts)$hour)]
# set keys for blazing fast access
setkey(dt, "day","month") 
```

`step 3:`获得所有必要的平均值（一行代码）

```
# the `by` part groups your data.table by day and month
# The group can be accessed by `.SD` and we filter there for hours
# then we select all the columns that we want using `with=FALSE` that makes 
# data.table behave like a data.frame only for that operation
# then we use `lapply` to take the mean of all the columns.
# all this can be done in one line! That's the sweetest part!

dt[, lapply(.SD[hour >= 13 & hour <= 15][, 2:13, with=FALSE], mean), by = "day,month"]

#    day month     P       WS       WD       AT       FT        H        B       FM       GD        MG       SR   WS2
# 1:   2     1 992.4 4.917333 210.6667 19.81333 21.85333 41.66667 1024.333 13.76667 221.6667 11.623333 459.3333 4.768
# 2:   3     1 992.4 3.427000 283.3333 11.66667 16.85333 17.33333 1023.333 12.00000 303.0000  9.686333 591.3333 3.725
# 3:   8     4 239.0 2.533000 315.0000 20.37000 29.81333 16.66667 1031.000 10.90000 288.3333  7.898000 976.0000 3.129 
```

或者，您可以先`subset`for`hour`然后`mean`通过选择`columns`：

```
dt1 <- dt[, .SD[hour >= 13 & hour <= 15], by="day,month"]
dt1[, lapply(.SD, mean), by="day,month", .SDcols=4:17] 
```

# android - 在您自己的 Android 设备上构建和安装 Android 源代码？

> ID：14617948
> 
> 赞同：0
> 
> 时间：2013-01-31T03:26:58.597
> 
> 标签：android

从查看构建 android 源代码的[页面](http://source.android.com/source/building.html)对我来说并不清楚，但是否可以自己构建源代码并将其安装在您自己的设备（不是模拟器）上，例如 GT-N8013？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T03:54:13.230

> 但是是否可以自己构建源代码并将其安装在您自己的设备（不是模拟器）上，例如 GT-N8013？

所有 Android 设备都有专有驱动程序，您要么需要从制造商处获得（不太可能），要么弄清楚如何从您的设备中复制以融入您的 ROM 模块。AOSP 源代码只是 Android。

> source.android.com/source/building.html 是否提供了构建和安装 Android 的必要信息？

不适用于像“GT-N8013”这样的任意设备。

# c++ - 对重载函数的模糊调用 - std::to_string

> ID：14617950
> 
> 赞同：14
> 
> 时间：2013-01-31T03:27:22.577
> 
> 标签：c++, string, visual-studio, c++11, overloading

在尝试将整数值插入字符串时，我认为当我找到 std::to_string 时我的祈祷得到了回应，但出于某种原因，每当我实际尝试使用它时，Visual Studio 都会抱怨模棱两可。这是我的功能的当前化身：

```
string get_time_remaining (int elapsed)
{
    string remaining;
    string temp_string;

    int time_remaining = TimeLimit - elapsed;

    int temp_int;

    temp_int = int(time_remaining / 3600);

    if(temp_int == 0)
        remaining = "00 : ";
    else
    {
        temp_string = std::to_string(temp_int);   // Here!
        remaining = temp_string + " : ";
    }

    temp_int = time_remaining % 60 + 1;

    if(temp_int < 10)
        remaining = remaining + "0";

    temp_string = std::to_string(temp_int);

    remaining = remaining + temp_string;

    return remaining;
} 
```

我尝试在 to_string 的调用中转换 temp_int，如您所见，我什至尝试转换应该是整数除法的结果，但无论我做什么，VS 都会向我吐出这个：

```
d:\my programs\powerplay\powerplay\powerplay.cpp(1285): error C2668: 'std::to_string' : ambiguous call to overloaded function
1>          d:\microsoft visual studio 10.0\vc\include\string(688): could be 'std::string std::to_string(long double)'
1>          d:\microsoft visual studio 10.0\vc\include\string(680): or       'std::string std::to_string(_ULonglong)'
1>          d:\microsoft visual studio 10.0\vc\include\string(672): or       'std::string std::to_string(_Longlong)' 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-31T03:29:58.723

MSVC11 缺少适当的重载，`std::to_string`因此您必须执行`static_cast`to`unsigned long long`或`long long`

请注意，此错误已在 2012 年 11 月 CTP 中修复。您可以在[此处](http://blogs.msdn.com/b/vcblog/archive/2012/11/02/visual-c-c-11-and-the-future-of-c.aspx)获取。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T03:32:29.220

`temp_int`是一个`int`值，Visual Studio 似乎只检测到接收或值的重载`double`，因此它不知道要使用哪个重载，因此存在歧义（尽管将整数转换为长值似乎很直观）`long long``unsigned long long`

要么声明`temp_int`为 a `long long`，要么在调用函数时强制转换

# c - 如何访问 C 变量以进行内联汇编操作？

> ID：14617953
> 
> 赞同：5
> 
> 时间：2013-01-31T03:28:12.157
> 
> 标签：c, gcc, assembly, inline-assembly

鉴于此代码：

```
#include <stdio.h>

int main(int argc, char **argv)
{
    int x = 1;
    printf("Hello x = %d\n", x);
} 
```

我想访问和操作内联汇编中的变量 x 。理想情况下，我想使用内联汇编来改变它的值。GNU 汇编器，并使用 AT&T 语法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T03:35:11.900

在 GNU C 内联汇编中，使用 x86 AT&T 语法：（
但如果可以避免的话，请[参见 https://gcc.gnu.org/wiki/DontUseInlineAsm ）。](https://gcc.gnu.org/wiki/DontUseInlineAsm)

```
// this example doesn't really need volatile: the result is the same every time
asm volatile("movl $0, %[some]"
    : [some] "=r" (x)
); 
```

在此之后，x 包含 0。

请注意，您通常应该避免`mov`作为 asm 语句的第一条或最后一条指令。不要复制 from`%[some]`到硬编码的寄存器`%%eax`中，只需`%[some]`用作寄存器，让编译器进行寄存器分配。

有关更多文档和指南，请参阅[https://gcc.gnu.org/onlinedocs/gcc/Extended-Asm.html](https://gcc.gnu.org/onlinedocs/gcc/Extended-Asm.html)和[https://stackoverflow.com/tags/inline-assembly/info](https://stackoverflow.com/tags/inline-assembly/info)。

* * *

并非所有编译器都支持 GNU 语法。例如，对于 MSVC，您可以这样做：

`__asm mov x, 0`并且`x`将`0`在此语句之后具有 的值。

请指定您要使用的编译器。

另请注意，这样做将限制您的程序仅使用特定的编译器-汇编器组合进行编译，并且仅针对特定体系结构。

在大多数情况下，使用纯 C 和内在函数（而不是内联汇编）可以获得同样好的或更好的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T05:40:51.367

`asm("mov $0, %1":"=r" (x):"r" (x):"cc");`
- 这可能会让你走上正轨。尽可能指定寄存器的使用以提高性能和效率。然而，正如 Aniket 指出的那样，高度依赖于架构并且需要 gcc。

# java - 未在 JSP 中调用 Javascript 函数

> ID：14617954
> 
> 赞同：0
> 
> 时间：2013-01-31T03:28:13.473
> 
> 标签：java, javascript, function, jsp

已解决：`}`在 Javascript 中徘徊。Eclipse IDE 在 JSP 中不会检查这些。

我无法在我的 JSP 中调用我的 Javascript 函数。我在上面评论了哪些功能有效，哪些功能无效。我的目标是根据传递的参数预先选择我的下拉框。

```
<script type="text/javascript">
    //this alert not working
    alert('alert1');

function preloadDropdownBoxes() {
    //preload function alert not calling
    alert('preload function called');
    //mapping vars to java variables
    var sYear = '<%=sYear%>';
    var collectionPeriod = '<%=collectionPeriod%>';
    var submission = '<%=submission%>';
    var availDate = '<%=availDate%>';
    var openDate = '<%=openDate%>';
    var closeDate = '<%=closeDate%>';
    //these are time generated values based on calendar instance
    var pastTwoYear = '<%=pastTwoYear%>';
    var pastYear = '<%=pastYear%>';
    var currentYear = '<%=currentYear%>';
    var futureYear = '<%=futureYear%>';
    //change selectedIndex values if dropdown in JSP has "pastTwoYear"
    if (sYear == pastTwoYear) {
        document.getElementById('pastTwoYear').selectedIndex = 0;
    } else if (sYear == pastYear) {
        document.getElementById('past').selectedIndex = 0;
        alert(sYear + '0');
    } else if (sYear == currentYear) {
        document.getElementById('current').selectedIndex = 1;
        alert(sYear + '1');
    } else if (sYear == futureYear) {
        document.getElementById('future').selectedIndex = 2;
        alert(sYear + '2');
    } else if(sYear == futureTwoYear) {
        document.getElementById('futureTwoYear').selectedIndex = 3;
        alert(sYear + '3');
    }
} //end preLoadDropdownBoxes()
</script> 
```

然后我有我的下拉框的代码。这是一个片段：

```
<select name="sYear1" id="sYear1" onchange="javascript:PreselectMyItem();">
                        <option value="past"><%=cal.get(java.util.Calendar.YEAR)-2%>-<%=cal.get(java.util.Calendar.YEAR)-1%></option>
                        <option value="current"><%=cal.get(java.util.Calendar.YEAR)-1%>-<%=cal.get(java.util.Calendar.YEAR)%></option>
                        <option value="future"><%=cal.get(java.util.Calendar.YEAR)%>-<%=cal.get(java.util.Calendar.YEAR)+1%></option>
                    </select> 
```

现在，最后，我在底部有另一个脚本。我打算把我的`preloadDropdownBoxes();`功能放在最后。我试过用过`$(document).ready`，但没有用。代码如下：

```
 <script>
//     these two alert calls work
alert('footer');
alert('footer next');
//     these functions aren't being called
window.preloadDropdownBoxes();
document.getElementById('future').selectedIndex = 2;
window.alert('document ready on bottom');

    </script>
</body>
</html> 
```

任何帮助将不胜感激！

编辑：我已经按如下方式制作了我的测试按钮，`<input type="button" value="test" onclick="javascript:alert('test');"/>`并且此警报确实有效。文档似乎有问题，因为我尝试了 function test() { alert('hello'); 无法在我的脚本中注册函数。但是当按钮是：`<input type="button" value="test" onclick="javascript:test();"/>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T04:47:44.140

这里有两个问题

1.  A 迷路`}`在第 125 行（就`</head>`在注释末尾的标签上方
2.  变量`futureTwoYear`未定义。您可能必须定义`var futureTwoYear= '2014-2015';`

代码：

```
<html>

<head>
<title>Edit Calendar</title>

<link href="/SpringApp6/css/style.css" rel="stylesheet" type="text/css" />
<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,600' rel='stylesheet' type='text/css'>

<script type="text/javascript" src="/SpringApp6/js/tsds_new.js"></script>
<script type="text/javascript" src="/SpringApp6/js/datetimepicker.js"></script>
<!-- <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script> -->
<script type="text/javascript">
                //this alert not working
                alert('alert1');

        function selectAll() {
                var cancelElements = new Array();
                cancelElements = document.getElementsByName("cancel");
                if (cancelElements[0].checked == true) {
                        for (i = 1; i < cancelElements.length; i++) {
                                if (cancelElements[i].disabled != true
                                                && cancelElements[i].checked != true) {
                                        cancelElements[i].checked = true;
                                }
                        }
                } else if(cancelElements[0].checked != true){
                        for (j = 1; j < cancelElements.length; j++) {                          
                                if (cancelElements[j].disabled != true
                                                && cancelElements[j].checked == true) {
                                        cancelElements[j].checked = false;
                                }
                        }
                }              
        }

        function passDetails(campus,timestamp, jobname) {
                var camp = document.getElementById(campus).innerText;
                var tstamp = document.getElementById(timestamp).innerText;
                var jname = document.getElementById(jobname).innerText;
                window.location.href = "scheduleLoad.jsp?campus="+camp+"&timestamp="
                                + tstamp + "&jobName=" + jname;
        }
        function checkSelectAll(){             
                var cancelElements = new Array();
                cancelElements = document.getElementsByName("cancel");
                var selectAll=true;            
                for (j = 1; j < cancelElements.length; j++) {                          
                                if (cancelElements[j].disabled != true
                                                && cancelElements[j].checked != true) {
                                                selectAll=false;
                                                break;
                                        }
                }
                if(selectAll==true){
                        cancelElements[0].checked=true;
                }else{
                        cancelElements[0].checked=false;
                }
        }

        /* Reset collection calendar search dropdown boxes */
        function resetSearch() {
                document.getElementById('sYear').selectedIndex = 0;
                document.getElementById('collectionPeriod').selectedIndex = 0;
                document.getElementById('submission').selectedIndex = 0;
        }

        //preselect dropdown based on URL parameter
        function preloadDropdownBoxes() {
                //preload function alert not calling
                alert('preload function called');
                //mapping vars to java variables
                var sYear = 'past';
                var collectionPeriod = 'FALL1';
                var submission = 'First';
                var availDate = '2013-01-30';
                var openDate = '2013-01-30';
                var closeDate = '2013-01-30';
                //these are time generated values based on calendar instance
                var pastTwoYear = '2010-2011';
                var pastYear = '2011-2012';
                var currentYear = '2012-2013';
                var futureYear = '2013-2014';
                var futureTwoYear = '2014-2015';
                //change selectedIndex values if dropdown in JSP has "pastTwoYear"
                if (sYear == pastTwoYear) {
                        document.getElementById('pastTwoYear').selectedIndex = 0;
                } else if (sYear == pastYear) {
                        document.getElementById('past').selectedIndex = 0;
                        alert(sYear + '0');
                } else if (sYear == currentYear) {
                        document.getElementById('current').selectedIndex = 1;
                        alert(sYear + '1');
                } else if (sYear == futureYear) {
                        document.getElementById('future').selectedIndex = 2;
                        alert(sYear + '2');
                } else if(sYear == futureTwoYear) {
                        document.getElementById('futureTwoYear').selectedIndex = 3;
                        alert(sYear + '3');
                }
        } //end preLoadDropdownBoxes()

        function test() {
                alert('yolo');
        }

//               alert(document.editCalendarForm1.sYear1.options.length);

//     // Get a reference to the drop-down
//     var myDropdownList = document.editCalendarForm1.sYear1;
//     int iLoop = 0;
//     alert(myDropdownList.options.length);
//     // Loop through all the items
//     for ( iLoop; iLoop< myDropdownList.options.length; iLoop++)
//     {
//      alert(myDropdownList.options[iLoop].value);

//       if (myDropdownList.options[iLoop].value == abc)
//       {
//         // Item is found. Set its selected property, and exit the loop
//         sYear1.options[iLoop].selected = true;
//         break;
//       }
//     }
        }
</script>
</head>
<body>
<!-- onload="javascript:openMail();" -->

<table class="maintable" align="center">
        <tbody>
                <!-- header -->

<html>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>PEIMS</title>
<link href="/SpringApp6/css/style.css" rel="stylesheet" type="text/css" />
<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,600' rel='stylesheet' type='text/css'>
        <div id="wrapper">
                <div id="logoplaceholder">
            <div id="logo"> <img src="images/tsdslogo.png" width="287" height="88" alt="tsds logo" /> </div>
            <!--  <div id="search"><input id="input" type="text"/><img src="images/Search.png" width="87" height="23"/>
                        </div>  -->

        </div>

        <div style="text-align: right;">&nbsp;
        </div>

        <div id="topbar">
                <div id="topbarcontent" style="margin-left:30px; border-right: solid 0px; margin-right:30px;">
                <b>Jonathan Washington</b>&nbsp; &nbsp;&nbsp;&nbsp;jwashington@washingtonheightsisd.com </div>
                <div id="topbarcontent"> My Messages (10)</div>                        
                <div id="topbarcontent"> Help Desk </div>
                                <div id="topbarcontent"> Exit </div>

              <div style="float: left; margin: 13px 5px 5px 5px;"><select>
        <option>Washington Heights ISD</option>
        <option>Austin ISD</option>
        <option>Dallas ISD</option>
        <option>Houston ISD</option>
</select></div>

<div id="topbarcontent"
        style="border-left: solid thin; border-right: none; border-color: #00A1DE"><img src="/SpringApp6/images/change.png" width="87" height="23" /></div>
</div>
        </div>

        </div>
</html>

                <!-- end header -->
                <!-- body -->
                <tr height="81%" style="vertical-align: middle;">
                        <!-- left navigation -->
                        <td width="20%"><html>
<!-- <style>
.a {text-decoration:none}
</style> -->

<script type="text/javascript">
        var context='/SpringApp6';
        document.write("<div id=\"leftNav\">");
        document.write("<div id=\"leftNavtext\"><a href=\"home.htm\" id=\"phome\" style=\"text-decoration:none\">Home</a></div>");     
        document.write("<div id=\"leftNavtext\" ><a href=\"dataSubmissions.jsp\" id=\"dataSubmissions\" style=\"text-decoration:none\">Data Submissions</a></div>");
        document.write("<div id=\"leftNavtext\" >Data Mart Loads</div>");
/*              document.write("<span id=\"listLoads\" style=\"display: none; padding-left: 20px;padding-top:5px;\">");
 */             document.write("<div  style=\" padding-left: 20px;padding-top:5px;\" ><a href=\"scheduleLoad.htm\" id=\"scheduleLoad\" style=\"text-decoration:none\">Manage Data Loads</a><br/></div>");
                document.write("<div  style=\" padding-left: 20px;padding-top:5px;\"><a href=\"scheduleMonitor.htm\" id=\"scheduleMonitor\" style=\"text-decoration:none\">Monitor Data Loads</a></div>");
                /* document.write("</span>");  */      
                document.write("<div id=\"leftNavtext\" ><a href=\"collectionMonitor.htm\" id=\"collectionMonitor\" style=\"text-decoration:none\">Collection Status Monitor</a></div>");
                document.write("<div id=\"leftNavtext\">Administration</div>");
                /* document.write("<span id=\"listAdminTasks\" style=\"display: none; padding-left: 20px;padding-top:5px;\">"); */
                document.write("<div  style=\" padding-left: 20px;padding-top:5px;\" ><a href=\"collectionCalendar.htm\" id=\"collCalendar\" style=\"text-decoration:none\">Collection Calendar</a><br/></div>");
                //document.write("<a href=\"viewCalendar.jsp\" id=\"viewCalendar\">View Calendar</a><br/>");
                document.write("<div  style=\" padding-left: 20px;padding-top:5px;\" ><a href=\"extnRequest.jsp\" id=\"extnReq\" style=\"text-decoration:none\">Request Extension</a><br/></div>");
                document.write("<div  style=\" padding-left: 20px;padding-top:5px;\" ><a href=\"extnApproval.jsp\" id=\"extnApproval\" style=\"text-decoration:none\"> Approve Extensions</a><br/></div>");
                document.write("<div  style=\" padding-left: 20px;padding-top:5px;\" ><a href=\"configureNotifications.jsp\" id=\"configNotifications\" style=\"text-decoration:none\">Configure Notifications</a></div>");
                /* document.write("</span></div>"); */         
        /*      document.write("<div id=\"leftNavtext\"><a href=\"#\" style=\"text-decoration:none\">Data Access</a></div>"); */
                document.write("<div id=\"leftNavtext\">Data Access</div>");
                /* document.write("<span id=\"listDataTasks\" style=\"display: none; padding-left: 20px;padding-top:5px;\">"); */
                document.write("<div  style=\" padding-left: 20px;padding-top:5px;\" ><a href=\"dataSearch.jsp\" id=\"dataSearch\" style=\"text-decoration:none\">Data Search</a><br/></div>");
                //document.write("<a href=\"viewCalendar.jsp\" id=\"viewCalendar\">View Calendar</a><br/>");
                document.write("<div  style=\" padding-left: 20px;padding-top:5px;\" ><a href=\"rosterSearch.jsp\" id=\"rosterSearch\" style=\"text-decoration:none\">Roster Search</a><br/></div>");          
                /* document.write("</span></div>"); */         
                //document.write("<div style=\"padding-bottom: 20px;\"><a href=\"dataSearch.jsp\" id=\"dataSearch\">Data Search</a></div>");
                //document.write("<div style=\"padding-bottom: 20px;\"><a href=\"rosterSearch.jsp\" id=\"rosterSearch\">Roster Search</a></div>");

                document.write("</div>");
                var loc=location.href; 

</script>
<!-- <div style="padding-bottom: 120px;"></div> -->
</html></td>
                        <!-- end left navigation -->
                        <!-- main content  -->
                        <td width="55%" style="vertical-align: top;">
                        <div
                                style="font-family: sans-serif; padding-bottom: 15px; color: #0099CC;">
                        Administration >> Collection Calendar >> <b>Edit Collection Calendar</b></div>
                        <div style="padding-bottom: 20px;">
                        <h3>Edit Collection Calendar</h3>
                        </div>
                        <!-- BEGIN EDIT FORM -->
                        <form id="editCalendarForm1" action="/SpringApp6/editCalendar.htm?collKey=1&amp;sYear=past&amp;collectionPeriod=FALL1&amp;submission=First&amp;availDate=2013-01-30&amp;openDate=2013-01-30&amp;closeDate=2013-01-30" method="POST">
                        <input type="hidden" name="initLoad" value="rich1"/>

                        &nbsp;
                        &nbsp;
                        &nbsp;
                        &nbsp;

                        <table style="width: 100%; margin: auto; font: 100%; border: hidden;">
                                <tr
                                        style="height: 15px; border-bottom-color: transparent; border-bottom-width: 0;">
                                        <td style="text-align: right; border: hidden;"><b>School
                                        Year</b>:</td>
                                        <td style="border: hidden;">
                                                <select name="sYear1" id="sYear1" onchange="javascript:PreselectMyItem();">
                                                        <option value="past">2011-2012</option>
                                                        <option value="current">2012-2013</option>
                                                        <option value="future">2013-2014</option>
                                                </select>
                                        </td>
                                        <!-- COLLECTION PERIOD -->
                                        <td style="text-align: right; border: hidden;"><b>Collection</b>:</td>
                                        <td style="border: hidden;">
                                                <select name="collectionPeriod1" id="collectionPeriod1" >
                                                        <option value="FALL1" id="FALL1">Collection1(FALL1)</option>
                                                        <option value="FALL2" id="FALL2">Collection1(FALL2)</option>
                                                        <option value="working1" id="working1">Collection1(Working)</option>
                                                        <option value="MDYR1" id="MDYR1">Collection2(MDYR1)</option>
                                                        <option value="MDYR2" id="MDYR2">Collection2(MDYR2)</option>
                                                        <option value="working2" id="working2" >Collection2(Working)</option>
                                                        <option value="SUMR1" id="SUMR1">Collection3(SUMR1)</option>
                                                        <option value="SUMR2" id="SUMR2">Collection3(SUMR2)</option>
                                                        <option value="working3" id="working3">Collection3(Working)</option>
                                                        <option value="EXYR1" id="EXYR1">Collection4(EXYR1)</option>
                                                        <option value="EXYR2" id="EXYR2">Collection4(EXYR2)</option>
                                                        <option value="working4" id="working4">Collection4(Working)</option>
                                                        <option value="DASH1" id="DASH1">Collection5(DASH1)</option>
                                                        <option value="DASH2" id="DASH2">Collection5(DASH2)</option>
                                                        <option value="working5" id="working5">Collection5(Working)</option>
                                                </select>
                                        </td>
                                        <!-- SUBMISSION -->
                                        <td style="text-align: right; border: hidden;"><b>Submission</b>:</td>
                                        <td colspan="2" style="border: hidden;">
                                                <select name="submission1" id="submission1">
                                                        <option>First</option>
                                                        <option>Second</option>
                                                        <option>Working</option>
                                                </select>
                                        </td>

                                </tr>  

                                <!-- SELECT DATE -->
                                <tr style="height: 15px; border-bottom-color: transparent; border-bottom-width: 0;">
                                        <td style="border: hidden;" colspan="3"><b>Available Date:</b>
                                                <input name="availDate1" type="Text" id="availDate1" class="calText" size="25" value="01/30/2013"
                                                readonly="readonly" />&nbsp;<img src="/SpringApp6/images/cal.gif"
                                                width="16" height="16" border="0" alt="Pick a date"
                                                onclick="javascript:NewCal('availDate','MMddyyyy',false,12);"
                                                align="bottom">
                                        </td>
                                </tr>

                                <tr style="height: 15px; border-bottom-color: transparent; border-bottom-width: 0;">
                                        <td style="border: hidden;" colspan="3"><b>Open Date:</b>
                                                <input name="openDate1" type="Text" id="openDate1" class="calText" size="25" value="01/30/2013"
                                                readonly="readonly" />&nbsp;<img src="/SpringApp6/images/cal.gif"
                                                width="16" height="16" border="0" alt="Pick a date"
                                                onclick="javascript:NewCal('openDate','MMddyyyy',false,12);"
                                                align="bottom">
                                        </td>
                                </tr>

                                <tr style="height: 15px; border-bottom-color: transparent; border-bottom-width: 0;">
                                        <td style="border: hidden;" colspan="3"><b>Close Date:</b>
                                                <input name="closeDate1" type="Text" id="closeDate1" class="calText" size="25" value="01/30/2013"
                                                readonly="readonly" />&nbsp;<img src="/SpringApp6/images/cal.gif"
                                                width="16" height="16" border="0" alt="Pick a date"
                                                onclick="javascript:NewCal('closeDate','MMddyyyy',false,12);"
                                                align="bottom">
                                                <br><br>
                                                <!-- <input type="button" value="Close Window" onclick="javascript:window.close()"> -->
                                        </td>
                                </tr>
                        </table>
                        <input type="submit" value="Submit Collection Edits"/> &nbsp;
                        <input type="button" value="test" onclick="javascript:alert('hey');"/>
                        <!-- END EDIT -->
                        <!-- <table class="gridtable" style="width: 100%">
                        </table> -->
                        </form>
                        <!-- <table style="width: 100%;">
                        <tr style="height: 20px;"></tr>
                        </table> -->
                        </td>
                        <!--end mainContent-->
                </tr>
                <!-- footer -->

                <!-- footer -->
        </tbody>
</table>
        <div id="copyright" align="center">

         <div id="copyright">

        </div>
    <script>
//     these two alert calls
    alert('footer');
    alert('footer next');
//     these functions aren't
        window.preloadDropdownBoxes();
        document.getElementById('future').selectedIndex = 2;
        window.alert('document ready on bottom');
    </script>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T03:39:39.680

我已经创建了一个 html 请参考下面。它在 chrome 和 IE 中工作。所有警报都工作正常。

```
<html>

<head>

<script type="text/javascript">

    alert('alert1');
    window.preloadDropdownBoxes();

function preloadDropdownBoxes() {
    //preload function alert not calling
    alert('preload function called');
    //mapping vars to java variables
    var sYear = '<%=sYear%>';
    var collectionPeriod = '<%=collectionPeriod%>';
    var submission = '<%=submission%>';
    var availDate = '<%=availDate%>';
    var openDate = '<%=openDate%>';
    var closeDate = '<%=closeDate%>';
    //these are time generated values based on calendar instance
    var pastTwoYear = '<%=pastTwoYear%>';
    var pastYear = '<%=pastYear%>';
    var currentYear = '<%=currentYear%>';
    var futureYear = '<%=futureYear%>';
    //change selectedIndex values if dropdown in JSP has "pastTwoYear"
    if (sYear == pastTwoYear) {
        document.getElementById('pastTwoYear').selectedIndex = 0;
    } else if (sYear == pastYear) {
        document.getElementById('past').selectedIndex = 0;
        alert(sYear + '0');
    } else if (sYear == currentYear) {
        document.getElementById('current').selectedIndex = 1;
        alert(sYear + '1');
    } else if (sYear == futureYear) {
        document.getElementById('future').selectedIndex = 2;
        alert(sYear + '2');
    } else if(sYear == futureTwoYear) {
        document.getElementById('futureTwoYear').selectedIndex = 3;
        alert(sYear + '3');
    }
} 

function preselectMyItem(value)
{

    alert("Selected value is == "+value);

}

</script>

</head>
<body>

<table>

<tr>

<form action="#" method="GET">
<td>select year</td>
<td><select name="sYear1" id="sYear1" onchange="javascript:preselectMyItem(this.value);">
                        <option value="past">past</option>
                        <option value="current">current</option>
                        <option value="future">future</option>
                    </select>
</td>

</form>

</tr>

</table>

</body>

</html> 
```

确保 jsp 页面在运行时没有错误。

# android - 如何在android中显示yuv

> ID：14617955
> 
> 赞同：0
> 
> 时间：2013-01-31T03:28:17.840
> 
> 标签：android, yuv

在相机预览功能中，我一直在使用`yuv2rgb`, 并使用生成的位图。

这很慢，所以我想按原样显示图片。

我使用示例类

```
// public abstract class ViewBase extends SurfaceView implements
        SurfaceHolder.Callback, Runnable{} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T04:11:11.373

不确定为什么要自己渲染预览帧，因为操作系统已经优化了从相机驱动程序到视频驱动程序的预览帧流。

但是，如果您需要自己做，您可以使用 OpenGL 创建一个 YUV 纹理，然后将其 blit 到一个平面。检查此[SO question](https://stackoverflow.com/questions/12130790/yuv-to-rgb-convertion-by-fragment-shader)以获取示例代码。

# ruby-on-rails - Rails 激活路线

> ID：14617960
> 
> 赞同：0
> 
> 时间：2013-01-31T03:28:41.157
> 
> 标签：ruby-on-rails, routing

我正在学习铁轨，而路由让我想从屋顶上跳下来。
在这一点上，我对如何路由我的激活感到困惑。我的用户路由中当前有以下内容： `resources :users, only: [:new,:create,:show]`. 现在我想要一条`Users#activate`这样的路线`www.app.com/users/activate/:a_long_token`。现在我知道我可以简单地做一个`match '/activate/:auth_token', to: 'users#activate`，但我不确定这是否是惯例。我正在阅读有关用户身份验证的[本](http://www.funonrails.com/2010/08/actionmailer-smtp-settings-in-rails.html)指南，但它的路由似乎是 rails 2。我可以通过简单地向资源本身添加一些内容来添加上述路由。我的意思是做类似的事情（我知道这行不通）

```
resource :users do 
   member do
     get :activate
   end
 end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T03:43:08.447

rails3 指南
[http://guides.rubyonrails.org/](http://guides.rubyonrails.org/)
[http://guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)

```
resources :users do 
  collection do
    get "activate/:a_long_token" => "users#activate", as: :activate
  end
end 
```

`rake routes`输出这个

```
activate_users GET    /users/activate/:a_long_token(.:format) users#activate 
```

# ruby - Ruby：识别具有多个字段的两个数组中的差异

> ID：14617965
> 
> 赞同：0
> 
> 时间：2013-01-31T03:29:33.960
> 
> 标签：ruby

```
Two files with the same structure (first file =  unique field/index)

File X 
1,'a1','b1'
2,'a2','b20'
3,'a3','b3'
4,'a4','b4'

File Y
1,'a1','b1'
2,'a2','b2'
3,'a30','b3'
5,'a5','b5'

Goal: identify differences between these files. There are a lot of fields to compare in each file.

Requested output (maybe there is a better way to present it):

Index   X:a   X:b      Y:a   Y:b    Result

=====   ===   ===      ===   ===    ======
1       a1    b1       a1   b1      No diff
2       a2    b20      a2   b2      Diff in field b (Xb=b20, Yb=b2)
3       a3    b3       a30  b3      Diff in field a (Xa=a3,  Ya=a30
4       a4    b4       null null    missing entries in file Y
5       null  null     a5   b5      missing entries in file X 
```

Ruby 代码 - 我目前所拥有的：

```
x = [[1,'a1','b1'], [2,'a2','b20'], [3,  'a3', 'b3'], [4, 'a4', 'b4']]
y = [[1,'a1','b1'], [2,'a2','b2'],  [3, 'a30', 'b3'], [5, 'a5', 'b5']]

h = Hash.new(0)

x.each {|e|
  h[e[0]] = 1
  }
y.each {|e|
  h[e[0]] = 1
  }

x.each {|e|
  p e[0]
} 
```

我已经在 hash = h 中拥有来自两个数组的所有键（索引）它似乎是某种使用索引作为公共键的 SQL 连接。你能给我一些关于如何迭代两个数组以找到差异的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:01:25.890

比较两个文件的问题是老问题。在 40 年前打孔卡的时代，我们已经不得不解决它来打印每天销售的物品的账单。一个文件是客户文件（主要文件），第二个是从交货单上打孔的卡片组（次要文件）。此辅助文件中的每条记录（卡）都包含客户编号和项目编号。两个文件都按客户编号排序，算法称为***匹配***。它包括从每个文件中读取一条记录，比较公共密钥，并选择三种可能的情况之一：

1.  primary key < secondary key : 跳过这个客户（正常，客户档案中的客户比今天的销售额多）
    读取下一条主记录
2.  主键 = 辅助键：打印账单
    读取下一个客户记录
    从辅助文件读取并打印项目，直到客户编号更改
3.  主键 > 辅助键：辅助文件或新客户中的错字，尚未添加到客户文件中
    打印错误消息（不是有效客户）
    读取下一条辅助记录

只要有要读取的记录，即只要两个文件都不在 EOF（文件末尾），读取循环就会继续。我用 Ruby 编写的一个更大的匹配模块的核心部分是：

```
def matching(p_actionSmaller, p_actionEqual, p_actionGreater)
    read_primary
    read_secondary

    while ! @eof_primary || ! @eof_secondary
        case
        when @primary_key < @secondary_key
            p_actionSmaller.call(self)
            read_primary
        when @primary_key == @secondary_key
            p_actionEqual.call(self)
            read_primary
            read_secondary
        when @primary_key > @secondary_key
            p_actionGreater.call(self)
            read_secondary
        end
    end
end 
```

这是适用于您的阵列问题的简化版本：

```
# input "files" :
x = [               [2,'a2','b20'], [3,  'a3', 'b3'], [4,'a4','b4']                 ]
y = [[1,'a1','b1'], [2,'a2','b2' ], [3, 'a30', 'b3'],                [5, 'a5', 'b5']]
puts '--- input --- :'
print 'x='; p x
print 'y='; p y

xh = Hash.new
yh = Hash.new

# converted to hash for easy extraction of data :
x.each do |a|
    key, *value = a
    xh[key] = value
end

y.each do |a|
    key, *value = a
    yh[key] = value
end

puts '--- as hash --- :'
print 'xh='; p xh
print 'yh='; p yh

# sort keys for matching both "files" on the same key :
@xkeys = xh.keys.sort
@ykeys = yh.keys.sort

print '@xkeys='; p @xkeys
print '@ykeys='; p @ykeys

# simplified algorithm, where EOF is replaced by HIGH_VALUE :
@x_index = -1
@y_index = -1
HIGH_VALUE = 255

def read_primary
    @x_index += 1 # read next record
        # The primary key is extracted from the record.
        # At EOF it is replaced by HIGH_VALUE, usually x'FFFFFF'
    @primary_key = @xkeys[@x_index] || HIGH_VALUE
        # @xkeys[@x_index] returns nil if key does not exist, nil || H returns H
end

def read_secondary
    @y_index += 1
    @secondary_key = @ykeys[@y_index] || HIGH_VALUE
end

puts '--- matching --- :'
read_primary
read_secondary

while @x_index < @xkeys.length || @y_index < @ykeys.length
    case
    when @primary_key < @secondary_key
        puts "case < : #{@primary_key} < #{@secondary_key}"
        puts "x #{xh[@primary_key].inspect} has no equivalent in y"
        read_primary
    when @primary_key == @secondary_key
        puts "case = : #{@primary_key} = #{@secondary_key}"
        puts "compare #{xh[@primary_key].inspect} with #{yh[@primary_key].inspect}"
        read_primary
        read_secondary
    when @primary_key > @secondary_key
        puts "case > : #{@primary_key} > #{@secondary_key}"
        puts "y #{yh[@secondary_key].inspect} has no equivalent in x"
        read_secondary
    end
end 
```

执行 ：

```
$ ruby -w t.rb
--- input --- :
x=[[2, "a2", "b20"], [3, "a3", "b3"], [4, "a4", "b4"]]
y=[[1, "a1", "b1"], [2, "a2", "b2"], [3, "a30", "b3"], [5, "a5", "b5"]]
--- as hash --- :
xh={2=>["a2", "b20"], 3=>["a3", "b3"], 4=>["a4", "b4"]}
yh={5=>["a5", "b5"], 1=>["a1", "b1"], 2=>["a2", "b2"], 3=>["a30", "b3"]}
@xkeys=[2, 3, 4]
@ykeys=[1, 2, 3, 5]
--- matching --- :
case > : 2 > 1
y ["a1", "b1"] has no equivalent in x
case = : 2 = 2
compare ["a2", "b20"] with ["a2", "b2"]
case = : 3 = 3
compare ["a3", "b3"] with ["a30", "b3"]
case < : 4 < 5
x ["a4", "b4"] has no equivalent in y
case > : 255 > 5
y ["a5", "b5"] has no equivalent in x 
```

我将差异的介绍留给您。
高温高压

# c# - 如何建立印度尼西亚电话号码正则表达式

> ID：14617969
> 
> 赞同：2
> 
> 时间：2013-01-31T03:30:01.627
> 
> 标签：c#, regex

这些是印度尼西亚的一些电话号码

> 08xxxxxxxxx（最少 11 个字符长度）
> 
> 08xxxxxxxxxxx（总是以 08 开头）

我发现这个很有用

```
Regex regex = new Regex(@"08[0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9]"); 
```

但是，它只支持 12 个字符，如果我将它们更改为以下正则表达式

```
Regex regex = new Regex(@"08[0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9]"); 
```

它只支持 11 个字符，我如何制作正则表达式以验证以开头`08`且最小长度为 11？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T03:32:44.340

```
^08[0-9]{9,}$ 
```

这`{9,}`意味着“至少 9 个”，但可能更多。

我将其更改为 9 以说明两位前导数字（加起来为 11）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T03:32:09.750

```
08\d{9,10} 
```

翻译为“以 08 开头”；最少 11 位，最多 12 位数字。

编辑：计数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T03:32:32.763

这个模式怎么样？

```
^08\d{9,10}$ 
```

这将检查 11 到 12 个字符，包括`08`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-28T03:53:25.910

我会添加更完整的版本，这里是（带数字分组）

```
([\[\(])?(?:(\+62)|62|0)\1? ?-? ?8(?!0|4|6)\d(?!0)\d\1? ?-? ?\d{3,4} ?-? ?\d{3,5}(?: ?-? ?\d{3})?\b 
```

它将接受这样的格式

`(0811) 123 123`

`[62] 812 1234567`

`0812 345 6789`

`+62856123456789`

`0878-123-123-123`

`[+62823] 1234 - 56789` ---> 我相信这是撰写本文时最长的电话号码

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-22T07:01:16.480

```
((\+62 8\d{2}([ -])|08\d{2}([ -]?)|\+628\d{2})\d{4}(\3\4)\d{2,5}) 
```

这将接受最常用的样式，例如
`08xx xxxx xxxx`
`08xxxxxxxxxxxx`
`08xx-xxxx-xxxx`
`+628xxxxxxxxxx`
`+62 8xx xxxx xxxx`
`+62 8xx-xxxx-xxxx`
这也将检查 11-13 长数字
对不起语法

# database-design - 关系数据库：规范化和 ERD

> ID：14617973
> 
> 赞同：0
> 
> 时间：2013-01-31T03:30:29.187
> 
> 标签：database-design, relational-database, erd

![数据库设计 - 第一次尝试](../Images/a52d0f274fe4ff64aea23229c87242f5.png)

*我非常担心这个问题不适合 stackoverflow，因为它对我的需求太具体，对其他用户来说不够通用，但我想我还是会问。如果这不是问这个问题的正确地方，请建议一个更合适的论坛。*

我是数据库设计的新手，没有老师告诉我这是否正确。

我正在建立一个数据库，客户可以在其中注册会员在网站上的唯一区域，可以使用用户名/密码组合访问该区域。这些成员将收到宣传材料，需要他们的邮寄地址。根据初步调查，部分客户可能居住在同一地址。他们在公司内的公司名称和头衔也是必需的。如果客户是注册学生，他们可以免费进入会员区，非学生必须付费。

我的问题：附加的 ERD 是否适合我的需要？我应该在[https://codereview.stackexchange.com/](https://codereview.stackexchange.com/)上问这个（虽然它不完全是代码......）

一如既往地感谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T03:41:54.440

如果您的需求与所述完全一致，那么您的 ERD 应该可以工作。我建议添加单独的表来存储有效的邮政编码、县和城市，以减少数据重复和输入错误。

# uiview - 何时设置自动调整蒙版？

> ID：14617981
> 
> 赞同：1
> 
> 时间：2013-01-31T03:31:34.770
> 
> 标签：uiview, autoresizingmask

我有一个 UIView，我将其框架设置为 (0,60,768,944)。

我发现如果我在将其添加到另一个视图之前设置了自动调整大小的掩码，它将无法自动调整大小。

如果我在添加到超级视图之后设置它，那么自动调整大小可以工作，但是当视图显示时，它 - 由于某种原因 - 尺寸为 1536x1948。

所以这两个订单都不适合我。

关于我做错了什么有什么建议吗？

提前谢谢了，

山姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-05T13:26:03.880

我发现设置自动调整大小掩码的正确位置是在 viewDidAppear 中。到那时（并且只有到那时），所有的视图都有它们的最终尺寸。

# python - 在不阻止另一个进程写入的情况下读取 Windows 文件

> ID：14617983
> 
> 赞同：2
> 
> 时间：2013-01-31T03:31:49.347
> 
> 标签：python, windows, delphi, winapi, filesystems

我有一个想要阅读的文件。该文件可能随时被另一个进程覆盖。我不想阻止这种写作。我准备好管理我读取的数据的损坏，但不希望我的读取以任何方式改变写入过程的行为。

正在写入文件的进程是在服务器本地运行的 delphi 程序。它使用 fmCreate 打开文件。fmCreate 尝试以独占方式打开文件，如果文件上有任何其他句柄，则会失败。

我正在从通过我们的网络远程访问文件的 python 脚本读取文件。

我对是否有解决方案感兴趣，与python或delphi是否支持无关。我想知道在windows下是否有什么方法可以在不修改编写程序的情况下实现这一点。

编辑：重申一下，这不是重复的。另一个问题是试图获得对正在写入的文件的读取权限。我希望作者能够访问我已打开以供阅读的文件。这些是不同的问题（尽管我担心答案会相似，但无法完成。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2021-10-12T07:59:54.053

我认为，这么多年过去了，真正的答案是使用**机会锁**。有了这个，您可以打开文件进行读取访问，同时告诉操作系统您希望在另一个程序想要访问该文件时得到通知。基本上，您可以随心所欲地使用该文件，然后在其他人需要时退出。如果您刚刚“正常”打开文件，这可以避免其他程序通常会遇到的共享/访问冲突。

有[一篇关于 Opportunistic Locks 的 MSDN 文章](https://docs.microsoft.com/en-us/windows/win32/fileio/opportunistic-locks)。Raymond Chen 也有一篇关于此的博客文章，并附有示例代码：[如果有人想要文件，则使用机会锁让路](https://devblogs.microsoft.com/oldnewthing/20130415-00/?p=4663)

关键是`DeviceIoControl`使用标志调用函数，`FSCTL_REQUEST_OPLOCK`并将句柄传递给您之前通过调用创建的事件`CreateEvent`。

在 Delphi 中使用它应该很简单，因为它支持调用 Windows API 函数。我对 Python 不太确定。但是，鉴于问题中的安排，应该没有必要修改 Python 代码。只需让您的 Delphi 代码在打开文件时使用机会锁，并在 Python 脚本需要文件时让它让开。

也比过滤器驱动程序或卷影复制服务更容易和更轻。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T06:37:03.243

您可以设置一个过滤器驱动程序，它可以通过两种方式起作用：（1）在打开文件时修改标志，（2）它可以在将数据写入文件时捕获数据并将数据副本保存在其他地方。

这种方法比评论中提到的卷影复制服务更轻量级和高效，但是它需要一个过滤器驱动程序。市场上有几种驱动程序（即那些包含驱动程序并让您在用户模式下编写业务逻辑的产品），但它们的成本很高，并且在您的情况下可能是过度杀伤力。不过，如果您只需要这个东西供私人使用，请私下联系我以获得我们的 CallbackFilter 的许可证。

更新：如果你想让作者打开已经打开的文件，那么在打开文件时修改标志的过滤器是你唯一的选择。

# c++ - 从命令行 Python/C++ 启动 Minecraft

> ID：14617990
> 
> 赞同：1
> 
> 时间：2013-01-31T03:32:20.357
> 
> 标签：c++, python, command-line, minecraft

我有一个问题，我试图利用我以前的编程知识来编写 Minecraft 启动器。我使用了标准 C++ 库中的命令和任何不是很大的 Python 鸡蛋。我更愿意使用`system("java ...")`它来启动 Minecraft。

简而言之：如何在没有任何辅助 Java 代码的情况下从命令行启动 Minecraft？（不使用像这样的启动器代码`net.minecraft.LauncherFrame`）有可能吗？我从 Mac OS X 的终端尝试过`java -cp mine craft.jar net.minecraft.client.Minecraft`，但无济于事，以`ClassNotFoundException`.

任何人都可以阐明我的问题吗？谢谢你，火烈鸟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T11:02:11.167

我在 linux 上运行，但这也应该适合你：

```
java -cp ".minecraft/bin/*" -Djava.library.path=".minecraft/bin/natives/" net.minecraft.client.Minecraft "username" "login id" 
```

您不需要输入您的用户名/登录 ID，但如果您不输入，您将无法进入任何服务器。

您可以在此处获取您的登录 ID：`https://login.minecraft.net?user=<username>&password=<password>&version=13`

有关身份验证方案的更多信息在[这里](http://wiki.vg/Legacy_Authentication)

**更新：**
我的世界 1.6 的新启动器发生了很大变化。
对于启动命令，您应该查看`.minecraft/versions/<version>/<version>.json` 身份验证也已更改。它现在使用 POST 参数并返回 JSON。更多关于它[的信息](http://wiki.vg/Authentication)。

# c# - 如何在紧凑框架中记录操作？

> ID：14617997
> 
> 赞同：5
> 
> 时间：2013-01-31T03:32:59.680
> 
> 标签：c#, .net, windows-mobile, compact-framework

我正在使用紧凑框架开发一个 Windows 移动项目。

我必须做的一件事是记录用户何时执行操作，这可能意味着从按下按钮到使用条形码扫描仪的任何操作。它发生的时间也需要记录下来。

我的计划是覆盖所有控件以包含内置的日志记录功能，但这可能不是正确的方法，似乎是一件非常乏味的事情。

有没有更好的办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T03:47:25.127

我会选择 IL Weaving。这是我推荐的一个库：[http](http://www.sharpcrafters.com/aop.net/msil-injection) ://www.sharpcrafters.com/aop.net/msil-injection它的作用是你用一个属性标记你的类，你可以拦截所有的函数调用。在此拦截中，您将放入您的日志记录逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T05:26:00.017

我想说这在很大程度上取决于“行动”的定义。我很想看看（未记录的）`QASetWindowsJournalHook`API 是否可以工作。它可能会获取您想要的大部分内容，而不需要很多代码。可以[在此处的 Codeproject](http://www.codeproject.com/Articles/122754/Using-Input-Hooks-in-Windows-Mobile)上找到使用的原生示例。

SetWindowsHook`WH_JOURNALRECORD`也可能值得一看。是的，我知道它“不受支持”，但它工作得很好，而且不太可能从你已经部署的设备中删除（而且它已经在操作系统中至少 10 年了）。

一些 P/Invoke 声明，都派生自 pwinuser.h，它们都如下：

```
[StructLayout(LayoutKind.Sequential)]
public struct JournalHookStruct
{

  public int message { get; set; }
  public int paramL { get; set; }
  public int paramH { get; set; }
  public int time { get; set; }
  public IntPtr hwnd { get; set; }
}

internal enum HookType
{
  JournalRecord = 0,
  JournalPlayback = 1,
  KeyboardLowLevel = 20
}

internal enum HookCode
{
  Action = 0,
  GetNext = 1,
  Skip = 2,
  NoRemove = 3,
  SystemModalOn = 4,
  SystemModalOff = 5
}

public const int HC_ACTION = 0;
public const int LLKHF_EXTENDED = 0x1;
public const int LLKHF_INJECTED = 0x10;
public const int LLKHF_ALTDOWN = 0x20;
public const int LLKHF_UP = 0x80;
public const int VK_TAB = 0x9;
public const int VK_CONTROL = 0x11;
public const int VK_ESCAPE = 0x1B;
public const int VK_DELETE = 0x2E;

[DllImport("coredll.dll", SetLastError = true)]
public static extern IntPtr SetWindowsHookEx(HookType idHook, HookProc lpfn, IntPtr hMod, int 

[DllImport("coredll.dll", SetLastError = true)]
public static extern bool UnhookWindowsHookEx(IntPtr hhk);

[DllImport("coredll.dll", SetLastError = true)]
public static extern int CallNextHookEx(IntPtr hhk, HookCode nCode, IntPtr wParam, IntPtr 

[DllImport("coredll.dll", SetLastError = true)]
public static extern IntPtr QASetWindowsJournalHook(HookType nFilterType, HookProc pfnFilterProc, ref JournalHookStruct pfnEventMsg); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T14:52:58.367

将这些消息写入日志文件不能解决您的问题吗？

```
#if PocketPC
private static string _appPath = Environment.GetFolderPath(Environment.SpecialFolder.Personal);
#else
private static string _appPath = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.CommonApplicationData), Application.CompanyName);
#endif
public const int KILOBYTE = 1024;
public static string ErrorFile { get { return _appPath + @"\error.log"; } }

public static void Log(string message)
{
  if (String.IsNullOrEmpty(message)) return;
  using (FileStream stream = File.Open(ErrorFile, FileMode.Append, FileAccess.Write))
  {
    using (StreamWriter sw = new StreamWriter(stream, Encoding.UTF8, KILOBYTE))
    {
      sw.WriteLine(string.Format("{0:MM/dd/yyyy HH:mm:ss} - {1}", DateTime.Now, message));
    }
  }
} 
```

但是，如果您正在进行线程并且多个例程尝试同时编写，您可能会遇到问题。在这种情况下，您可以添加额外的逻辑来锁定正在使用的例程。

反正我就是这样做的。

通过`#if`区域，您可以看到这也被我的 Windows PC 应用程序使用。

# php - Wami-Recorder 第一次没有拾取音频

> ID：14617998
> 
> 赞同：2
> 
> 时间：2013-01-31T03:33:08.410
> 
> 标签：php, javascript, flash

我对 Wami-recorder 有一个非常奇怪的问题。在允许 flash 文件使用我的麦克风后，我尝试录制音频剪辑。然而，大多数情况下，不是所有时候，第一次录制尝试都会将一个空的音频剪辑传递给服务器。

```
FLASH: Listening...
FLASH: Recording at rate: 22050
FLASH: POST 44 bytes of type audio/x-wav
FLASH: Expected Samples: 27849 Actual Samples: 0
FLASH: Unlistening.
FLASH: POST openHandler: [Event type="open" bubbles=false cancelable=false eventPhase=2]
FLASH: POST progressHandler loaded:7 total: 0
FLASH: POST: completeHandler 
```

相对于

```
FLASH: Listening...
FLASH: Recording at rate: 22050
FLASH: POST 34860 bytes of type audio/x-wav
FLASH: Expected Samples: 19161 Actual Samples: 17408
FLASH: Unlistening.
FLASH: POST openHandler: [Event type="open" bubbles=false cancelable=false eventPhase=2]
FLASH: POST progressHandler loaded:7 total: 0
FLASH: POST: completeHandler 
```

我无法弄清楚是什么导致了这种情况，因为它似乎并没有发生在每个人身上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-01T21:09:17.877

我也一直在努力解决这个问题。谢天谢地，我终于找到了解决方法。

我认为问题在于：Chrome 有自己的机制来管理用户使用麦克风的权限，而这些机制取决于操作系统。在 windows 和 Chrome 上，这种特殊机制与 Wami-recorder 的机制发生冲突，导致 Wami-recorder 的权限请求无效（即使它仍然显示）。

我通过强制 Chrome 的权限对话框访问麦克风来使其工作。允许访问麦克风后，此权限将在浏览器-网站会话的其余部分保留。我通过 HTML5 请求使用麦克风来强制许可对话框，从[此处](http://www.html5rocks.com/en/tutorials/getusermedia/intro/)复制代码。

并非所有浏览器都支持 HTML5 或仅支持通过 HTML5 访问麦克风。此外，在其他浏览器上，这种 hack 是不必要的。为了只为 Chrome 强制对话框，我将代码放在一个测试 Chrome 的条件中。奇怪的是，这实际上破坏了 Chromium 上的记录器（奇怪的是，与 Chrome 上的对应物相反，它正在工作）。[我在这里](https://stackoverflow.com/questions/17278770/how-do-i-detect-chromium-specifically-vs-chrome)找到了一些区分 Chrome 和 Chromium 的代码。

这是我的代码：

```
/**
 * isChrome (WithPDFReader)
 * thanks to Rob W from
 * https://stackoverflow.com/questions/17278770/how-do-i-detect-chromium-specifically-vs-chrome
 */
function isChrome()
{
    for (var i=0; i<navigator.plugins.length; i++)
        if (navigator.plugins[i].name == 'Chrome PDF Viewer') return true;
    return false;
}

/* somewhere else: */

/*
 * If on Chrome (not Chromium), force permission request 
 */
if( isChrome() )
{
    var context = new window.webkitAudioContext();
     navigator.webkitGetUserMedia({audio: true}, function(stream) {
      var microphone = context.createMediaStreamSource(stream);
      var filter = context.createBiquadFilter();
       // microphone -> filter -> destination.
      microphone.connect(filter);
      filter.connect(context.destination);
    }, function(){ /* do something */ });
}

// initialize Wami
 Wami.setup({ ... }); 
```

# html - 在 Razor 中连接

> ID：14617999
> 
> 赞同：1
> 
> 时间：2013-01-31T03:33:09.857
> 
> 标签：html, asp.net-mvc, asp.net-mvc-3, razor, asp.net-mvc-4

我正在尝试在剃刀中进行简单的串联。当我在我的模型 RAZOR 中添加它时，我得到了各种 squiqly 线条：

```
<input type="checkbox" id="ck1-@track.TrackID" 
 onclick="$('#ck2-@(track.TrackID)').prop('checked', $(this).prop('checked'))" /> 
```

但是它输出完美的输出：

```
<input type="checkbox"
       id="ck1-500004524"
       onclick="$('#ck2-500004524').prop('checked', $(this).prop('checked'))"> 
```

我正在尝试获得与输出中完全相同的 html，但没有所有的波浪线。我知道这很可能在其他帖子中有所涉及，但我仍在尝试掌握 Razor 连接字符串的方式，每次我需要它时似乎都不同。

先感谢您，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T22:18:00.253

如前所述，Razor 对将变量注入 html 属性并不友好。部分原因是在标记中链接事件处理程序是一种过时的做法。

最佳实践是“不显眼的方式”

```
$(function () {

   $('#').click(function () 
 { $('#ck2-@(track.TrackID)').prop('checked', $(this).prop('checked')) })

}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T04:20:12.477

在 html/javascript 字符串中包含@code，例如“@code”或“@code”，几乎总是会给你波浪线。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T16:23:33.137

在我混合 HTML 标记和 Razor 语法的行中，我在该行前面加上`@:`我发现解决了很多问题的行。

另外，请查看[http://weblogs.asp.net/scottgu/archive/2010/12/16/asp-net-mvc-3-implicit-and-explicit-code-nuggets-with-razor.aspx](http://weblogs.asp.net/scottgu/archive/2010/12/16/asp-net-mvc-3-implicit-and-explicit-code-nuggets-with-razor.aspx)

这个片段是个好建议：

> 必要时，您还可以使用 @(expression) 语法显式地限定代码表达式的范围，以使您的意图更加清晰，并消除代码语句与静态标记的歧义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T23:23:41.217

感谢所有提供帮助的人，其中一个答案表明“不显眼的方式”会比将 javascript 硬编码到元素中更好。这是我想出的：

```
<input type="checkbox" class="ckSelectCol" />

$(function () {
    $('.ckSelectCol').each(function () {
        $(this).change(function () {
            dupCheckBox(this);
        });
    });
}); 
```

这样做是找到所有具有类 ckSelectCol 的复选框并添加一个更改事件处理程序，更改事件处理程序是我希望在更改时调用的函数。

这可以通过多种方式完成，我选择这种方式是因为它将 javascript 与页面分离，可以轻松重用并使页面更轻。

如果有人有任何建议，请回复。

再次感谢我在这篇文章中收到的所有意见。

-爱德华