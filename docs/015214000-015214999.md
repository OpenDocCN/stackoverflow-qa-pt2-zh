# StackOverflow 问答 15214000-15214999

# javascript - 从javascript中的变量获取数组

> ID：15214000
> 
> 赞同：0
> 
> 时间：2013-03-05T01:01:36.913
> 
> 标签：javascript

我正在寻找从变量中获取数组。如果它还不是一个数组，我想返回一个以变量作为唯一条目的新数组。示例：

```
toArray('test'); // => ["test"]
toArray(['test']); // => ["test"] 
```

我的实际工作代码是：

```
var toArray;

toArray = function(o) {
  if (Array.isArray(o)) {
    return o.slice();
  } else {
    return [o];
  }
}; 
```

我想知道是否有更好的方法（例如本机或使用 underscore.js）。

在红宝石中，您可以执行以下操作：

```
Array('test') # => ["test"]
Array(['test']) # => ["test"] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T01:16:05.670

只需使用`.concat()`.

```
[].concat("test");   // ["test"]
[].concat(["test"]); // ["test"] 
```

* * *

数组将被展平成新的数组。其他任何内容都将简单地添加。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T01:04:54.500

```
function toArray(o) {
  return Array.isArray(o) ? o.slice() : [o];
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T01:05:17.103

我相信你可以切片它：

```
var fooObj = {0: 123, 1: 'bar', length: 2};
var fooArr = Array.prototype.slice.call(fooObj); 
```

演示：http: [//jsfiddle.net/sh5R9/](http://jsfiddle.net/sh5R9/)

# python - 如何为我的 web 进程添加 ./run 文件以在 heroku 上使用 python/pyramid 应用程序？

> ID：15214001
> 
> 赞同：1
> 
> 时间：2013-03-05T01:01:37.667
> 
> 标签：python, heroku, pyramid

我有一个要使用本教程部署到 heroku 的金字塔/python 应用程序：http: [//docs.pylonsproject.org/projects/pyramid_cookbook/en/latest/deployment/heroku.html](http://docs.pylonsproject.org/projects/pyramid_cookbook/en/latest/deployment/heroku.html)。

但是，当我使用 heroku ps 运行应用程序时，出现此错误：

```
2013-03-04T22:17:03+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/favicon.ico host=sleepy-taiga-7450.herokuapp.com fwd="184.189.243.111" dyno= queue= wait= connect= service= status=503 bytes= 
```

这是整个错误日志：

```
2013-03-04T22:17:03+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/favicon.ico host=sleepy-taiga-7450.herokuapp.com fwd="184.189.243.111" dyno= queue= wait= connect= service= status=503 bytes=
2013-03-04T22:24:44+00:00 heroku[web.1]: State changed from crashed to starting
2013-03-04T22:24:48+00:00 heroku[web.1]: Starting process with command `./run`
2013-03-04T22:24:48+00:00 app[web.1]: bash: ./run: No such file or directory
2013-03-04T22:24:50+00:00 heroku[web.1]: Process exited with status 127
2013-03-04T22:24:50+00:00 heroku[web.1]: State changed from starting to crashed 
```

./run 文件是什么，为什么在我的情况下它可能不存在？我怎样才能添加它，我应该在里面放什么？

这是当前目录的ls：

```
boto         development.ini  myproject.sqlite  README.md         runapp.py  tutorial
build        ENV              Procfile          README.txt        setup.cfg  tutorial.egg-info
CHANGES.txt  MANIFEST.in      production.ini    requirements.txt  setup.py   tutorial.sqlite 
```

我认为 Procfile 中的 ./run 调用了 runapp.py 脚本，但我不知道为什么它找不到我的。它在文档根目录中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T06:34:47.477

好的，事实证明我把方向弄混了。我认为 ./run 调用了 runapp.py 脚本。它调用**运行**脚本（我还没有创建它）。我正在运行这三个命令：

```
#!/bin/bash
python setup.py develop
python runapp.py 
```

分别在控制台上，并且对如何在下面创建 runapp.py 之前运行它感到困惑（我是个白痴）。您必须创建一个字面上称为 run 的文件（末尾没有扩展名）并将这三行粘贴到其中，然后 chmod +x 运行。然后将 runapp.py 脚本复制到下面。我感谢 Ben Bangert 在这方面帮助我。

# java - 简单的 WHILE 循环

> ID：15214002
> 
> 赞同：0
> 
> 时间：2013-03-05T01:01:38.237
> 
> 标签：java

假设您的袜子中有 1 美分（0.01 美元）。每天，你袜子里的钱都会翻倍。因此，第一天你有 1 美分，第二天你有 2 美分（0.02 美元），第三天你有 4 美分（0.04 美元），以此类推。

doubleEachDay 方法将 double 值 jackpot 作为其输入参数，并计算达到或超过头奖金额所需的天数，从 0.01 开始，每天翻倍。该方法返回加倍所需的天数；此值应存储在整数变量 numDays 中。

完成下面的 doubleEachDay 方法。

这是我的代码，

```
public int doubleEachDay(double jackpot) {
  double amount = 0.01;
  int numDays = 0;

while(amount <= jackpot){
  amount=(amount*2);
    numDays++;
}

 return numDays;
} 
```

我的代码比实际答案多出 1 天。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T01:04:39.717

原因是浮点数不准确。例如，0.01*2 可能等于 0.0199999999 而不是 0.02。

不要使用双精度数，您应该使用整数和美分数，例如 1、2、4 等等。

另一个原因是你写`amount <= jackpot`的不是`amount < jackpot`. 这意味着您会将这一天算作`amount == jackpot`额外的一天。

或者，`amount < jackpot`您可以做一些事情`jackpot - amount > 0.0000001`来抵消轻微的不准确性，而不是做 。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-05T01:06:20.270

我假设您想计算金额完全等于头奖的天数。

只需将循环条件更改为：

```
while (amount != jackpot)... 
```

# coffeescript - 在 Coffeescript 中，我可以在创建对象后调用它的构造函数吗？

> ID：15214007
> 
> 赞同：0
> 
> 时间：2013-03-05T01:01:51.157
> 
> 标签：coffeescript

在 Coffeescript 中，我可以在创建对象后调用它的构造函数吗？像这样：

```
class Snake
  constructor: (@name) ->

obj = new Snake()
// do stuff
obj.constructor("Python") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T02:10:07.350

是的你可以。CoffeeScript 类语法只是 JavaScript 构造函数的语法糖，它们只是您可以调用的普通函数：

```
class Example
  count: 0
  constructor: (@name) -> 
    @count += 1

e = new Example 'foo'
console.log e.count # -> 1
console.log e.name  # -> foo

# Call contructor again over the same instance:
Example.call e, 'bar'
console.log e.count # -> 2
console.log e.name  # -> bar

# If you don't have the constructor in a variable:
e.constructor.call e, 'baz'
console.log e.count # -> 3
console.log e.name  # -> baz 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T01:05:27.720

此代码编译为：

```
var Snake, obj;

Snake = (function() {
  function Snake(name) {
    this.name = name;
  }

  return Snake;
})();

obj = new Snake(); 
```

所以没有`constructor()`方法，coffeescript只是用它来生成`Snake()`函数。

所以不，你不能。但是，如果您的代码是面向对象的，为什么要这样做呢？

# jquery - JQuery 动画凌乱

> ID：15214009
> 
> 赞同：0
> 
> 时间：2013-03-05T01:02:00.623
> 
> 标签：jquery, animation, hover

因此，我正在尝试编写此导航代码并使其全部正常工作，只是有时如果您移动鼠标过快，JQuery 动画会中断或跳动。在 Safari 中它看起来也很可怕，它似乎几乎闪烁动画？

```
$(document).ready(function() {

    // On hover:
    $('#navigation li').hoverIntent(function () {
        width = $(this).children('span:nth-child(2)').width();
        text = $(this).children('span:nth-child(2)');          

        var newwidth = (width + 15) // Original width + 15px padding        
        text.animate({"width":"0px"}, 0).show(); // Make the width 0px and make the element visible
        text.animate({"width":+newwidth+"px"}, 300); // Animate the width to the new size

    },
    function () {
        text.animate({"width":"0px"}, 300); // Animate the width to 0px and hide the element
        text.animate({"width":+width+"px","float":"left"}, 0);
        setTimeout(function() {
            text.hide();
        }, 300);
    });

}); 
```

这是它的JFiddle：

[http://jsfiddle.net/d8g4w/](http://jsfiddle.net/d8g4w/)

此外，实时预览，因此您可以看到它的实际外观：

[http://dev.evaske.com/Navigation/](http://dev.evaske.com/Navigation/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T03:25:02.777

看看这对你有什么作用：[jsFiddle](http://jsfiddle.net/brianflanagan/6RU9u/)

马上，我注意到标记不是 100% 有效（将标记作为节点的直接子`ul`节点），并且动画“浮动”属性对我来说有点奇怪（我什至不确定 jQuery 是否支持'漂浮'）。我去掉了一些跨浏览器的 CSS 声明（这似乎与动画没有任何关系）。您实际上并不需要锚标记，因为您使用 CSS 处理光标，并使用 CSS 和 JS 的组合处理悬停。如果您需要从鼠标点击触发（如果这是导航，我相信您会这样做）我建议使用：

`$('#navigation li').on('click', function(){...}`

我倾向于避免使用 .hover() 而是更多地依赖

`.on('mouseenter', function(){...})` 和 `.on('mouseleave', function(){...})`

因为它们更准确地代表了我通常试图定位的实际事件。

可能最大的改进来自于`.stop()`在`.animate()`. 这似乎立即减少了我所经历的抖动。就平滑度而言，FF 绝对是最弱的（我什至没有尝试 IE，因为您提到了 Safari 和 FF），但我不再看到打嗝了。

# android - 如何打开具有特定设置的 URL？

> ID：15214012
> 
> 赞同：1
> 
> 时间：2013-03-05T01:02:03.103
> 
> 标签：android, android-intent, android-webview, android-websettings

大家好你们好。

这是我的代码。我在我的应用程序中创建了一个菜单。其中一项可以正确打开 URL。但我想`WebView`用这个打开 URL `WebSettings`。但它不起作用。

```
public boolean onMenuItemSelected(int featureId, MenuItem item) {
    switch (item.getItemId()) {
    case WEBSITE:
        Toast.makeText(Activity.this, "About", Toast.LENGTH_SHORT).show();
        Uri uri = Uri.parse("http://www.english.com/about");
        Intent it = new Intent(Intent.ACTION_VIEW,uri);
        WebView web = new WebView(this);
        WebSettings webSettings = web.getSettings();
        webSettings.setSavePassword(false);
        webSettings.setSaveFormData(false);
        webSettings.setJavaScriptEnabled(true);
        webSettings.setSupportZoom(false);
        startActivity(it);
        return true; 
```

这些网络设置不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T01:07:31.733

启动浏览器以查看网页意味着您要服从，但是浏览器将显示 url，并且您无法控制另一个应用程序的定义设置。如果您尝试使用自己的`WebView`，您将像这样加载 URL：

```
 webview.loadUrl("http://www.english.com/about"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T01:30:28.600

您做错了两件事：1）您创建了一个新的`WebView`但从未将其附加到您的视图树和 2）您要求外部应用程序处理您要显示的 url 的查看。您需要将其添加`WebView`到您的 xml 布局文件或通过`view.addChild(web);`在您的根视图上使用附加到视图树。一旦它`WebView`是您的视图树的一部分，只需调用`web.loadUrl(...);`加载网页。由于您不想在外部浏览器上打开网页，因此您应该摆脱您的`Intent it =...`and `startActivity(it);`.

如果您想在不同的活动上打开网页，只需在其布局中创建一个带有 web 视图的新活动。[您可以在此处](http://www.mkyong.com/android/android-webview-example/)找到有关如何执行此操作的示例。

# objective-c - NSMutableArray 不添加对象

> ID：15214014
> 
> 赞同：0
> 
> 时间：2013-03-05T01:02:43.267
> 
> 标签：objective-c, nsmutablearray

我一直在尝试获取我的数组计数，但它一直返回 0，我认为它没有正确添加对象。我将我的属性放在头文件中并在 layer.m 文件中合成它。我在我的超级初始化中分配了空间。

```
NSMutableArray *asteroids;

@property (strong) NSMutableArray *asteroids;

@synthesize asteroids;

self.asteroids = [[NSMutableArray alloc] init];

-(void)findTiles
{
    CGPoint tilecoord1;
    int tileGid1;
    int aheadcount = 200;
    CCSprite *tileonPos[aheadcount];
    int amounts = 0;

    for(int x = 0; x<30; x++)
    {
        for(int y = 0; y<20; y++)
        {
            tilecoord1 = ccp(x+(480*currentlevel),y);
            tileGid1 = [bglayer tileGIDAt:tilecoord1];
            if(tileGid1 == 1)
            {
                tileonPos[amounts] = [bglayer tileAt:ccp(x,y)];
                amounts++;
                [asteroids addObject:tileonPos[amounts]];
                NSLog(@"%d",[asteroids count]);
            }

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T01:07:14.770

无论您正在初始化`asteroids`的任何方法都不会在运行`findTiles`或根本不运行时运行。没有更多信息，就不可能说更多，但几乎可以肯定这就是正在发生的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T01:08:52.160

当你初始化你打电话`self.asteroids = [[NSMutableArray alloc] init];`但当你添加你打电话时`[asteroids addObject:tileonPos[amounts]];`。

尝试：`[self.asteroids addObject:tileonPos[amounts]];`或`[_asteroids addObject:tileonPos[amounts]];`

你也确定`self.asteroids = [[NSMutableArray alloc] init];`是在init中执行的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T01:09:49.577

如果您只想在 findTiles 方法中将对象添加到“小行星”，请尝试在 for loop 之前在该方法中初始化数组。

```
self.asteroids = [@[] mutableCopy]; 
```

# mysql - 子查询的可扩展性和可能的 替代方案

> ID：15214017
> 
> 赞同：1
> 
> 时间：2013-03-05T01:03:12.673
> 
> 标签：mysql, sql, subquery

前面有两件事。首先，我有一个解决我的问题的方法。我在这里寻求指导，看看它是否是一个好的解决方案，以及我是否可以做得更好。其次，我想为我的无知道歉！我是一个 Java 人，正在建立一个刚刚进入 SQL 的站点。我还有很多学习要做，这就是我在这里寻求指导的原因。

我有三个处理这个查询的表。

1.  用户 - 网站上所有用户的基本信息
2.  Friends - 保存两个朋友的用户 ID
3.  大步 - 想想像 facebook 墙贴这样的大步。任何用户都可以在他们的墙上或朋友墙上发布步幅更新。

查找所有用户好友并返回其 ID 号的 SQL 语句如下所示。

```
SELECT user.id 
FROM user 
INNER JOIN friends ON user.id = friends.user2 WHERE friends.user1 = 1 
UNION ALL 
SELECT user.id FROM user 
INNER JOIN friends on user.id = friends.user1 WHERE friends.user2 = 1 
```

现在我的目标是拥有一个像现场直播一样的Facebook。因此，任何时候用户发布一个跨步，他们的所有朋友都会被告知。所以我知道第一步是让所有用户成为朋友，就像我在上面所做的那样。所以现在我想将这些朋友链接到步幅表。

在步幅表中有 sourceUserId（编写步幅的人）和接收者Id（接收步幅的人）的列。因此，如果您在自己的板上写字并且您的 id 为 2，那么这两个列都是 2。我的目标是创建一个 SQL 语句，可以找到所有用户的朋友，以及这些朋友在他们的董事会和他们的朋友董事会上发表的所有帖子。

经过太多的谷歌搜索后，我发现了 SQL 子查询并得出了一个结果。问题是我是新手，不知道这是不是一个好结果，因为我今天才知道这些东西！我对可扩展性感到害怕，如果我拥有 100、1,000 甚至 100,000 个用户，这件事是否会变得混乱！所以我的问题是，

1.  子查询是这里的最佳选择吗？如果是这样，我做对了吗？如果不是我该如何解决这个问题
2.  是否有任何列我应该索引以加快此查询。
3.  对于如何改进我未来的查询，您对新的 SQL 人员有什么其他建议吗？

这是我想出的代码！

```
SELECT * FROM stride WHERE sourceUserId = ANY
(
    SELECT user.id 
    FROM user 
    INNER JOIN friends ON user.id = friends.user2 WHERE friends.user1 = 1 
    UNION ALL 
    SELECT user.id FROM user 
    INNER JOIN friends on user.id = friends.user1 WHERE friends.user2 = 1
) 
AND recipientId = ANY
(
    SELECT user.id 
    FROM user 
    INNER JOIN friends ON user.id = friends.user2 WHERE friends.user1 = 1 
    UNION ALL 
    SELECT user.id FROM user 
    INNER JOIN friends on user.id = friends.user1 WHERE friends.user2 = 1
) 
```

**更新：**有了一堆新知识，我已经能够为我的实时提要获得一个可靠的 SQL 语句，即 0.0009 秒！这里适合任何有兴趣的人。

```
SELECT stride.id AS link, sourceUser.userName, sourceUser.displayName, recipientUser.fName AS recipient, sourceUser.currentDefault, stride.content, stride.timestamp,

CASE WHEN (recipientId = sourceUserId) THEN "personalStride" ELSE "friendStride" END AS notType
FROM stride

INNER JOIN user AS sourceUser ON sourceUser.id = stride.sourceUserId
INNER JOIN user AS recipientUser ON recipientUser.id = stride.recipientId

WHERE sourceUserId = ANY
(
    SELECT CASE WHEN user1 = 1 
    THEN user2 ELSE user1 END AS sourceUserId
    FROM friends
    WHERE user1 = 1 OR user2 = 1
) 
AND recipientId = ANY
(
    SELECT CASE WHEN user1 = 1 
    THEN user2 ELSE user1 END AS sourceUserId
    FROM friends
    WHERE user1 = 1 OR user2 = 1
)
ORDER BY timestamp desc 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T01:37:27.493

你不需要工会：

```
SELECT 
    CASE
        WHEN f.user1=u.id 
        THEN f.user2 
        ELSE f.user1 
    END AS f_id 
FROM user 
   JOIN friends AS f 
        ON f.user1=u.id OR f.user2=u.id
WHERE u.id = 1 
```

实际上你也不需要加入用户（当然假设朋友表中的每个 id 在用户表中都有一个匹配项），我只是添加了它，所以我们可以有很好的“u.id”而不是幻数。

```
SELECT 
    CASE 
        WHEN f.user1=2 
        THEN f.user2 
        ELSE f.user1 
    END AS f_id 
FROM friends AS f 
WHERE f.user1=2 OR f.user2=2 
```

[http://sqlfiddle.com/#!2/afb4d/8](http://sqlfiddle.com/#!2/afb4d/8)

**编辑：** 至于其他查询，事情有点复杂，我最终得到了这样的查询：

```
SELECT s.id,s.sourceUserId,s.recipientId
FROM STRIDE as s 
    JOIN  friends AS f 
        ON 
          (
            ((s.sourceUserId=f.user1 OR s.recipientId=f.user1) AND f.user2=1) OR
            ((s.sourceUserId=f.user2  OR s.recipientId=f.user2)AND f.user1=1)
          )
GROUP BY s.id,s.sourceUserId,s.recipientId
HAVING COUNT(*)=2 OR s.sourceUserId=s.recipientId; 
```

[http://sqlfiddle.com/#!2/83363/1](http://sqlfiddle.com/#!2/83363/1) 如果源或接收者是我们用户的朋友，我们选择该行并且我们总结一下，如果该行出现两次，则意味着源和接收者都是朋友们。我们还选择 source=recipient 的那些，因为它们只会出现一次。

子查询很有用，但可以避免使用，除非您需要两个不同的聚合，并且通常避免使用它们会快得多。

# ssis - 如何在 SSIS 中的 FTP 连接上启用 RetainSameConnection？

> ID：15214019
> 
> 赞同：0
> 
> 时间：2013-03-05T01:03:20.213
> 
> 标签：ssis

我继承了一些针对 SQL Server 2008 编写的 SSIS 包。其中一个有问题的包通过 FTP 从小型设备获取文件。它正在为每个文件创建一个新连接。这很快就会使设备不堪重负。

为了解决这个问题，我发现了多个关于使用该**`RetainSameConnection`**属性的参考资料。但是我已经浏览了这些属性，它无法设置。我也无法通过搜索找到如何。或者如果它在 SQLServer 2008 中可用

所以我的问题很简单，我怎样才能得到那个属性？或者如果不在 SQL Server 2008 中，它会变成什么版本？

![FTP 连接](../Images/5671346f80577bb4ce099f0013fabc6b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T01:25:20.880

所以在这里回答中心问题：*RetainSameConnection*属性不适用于 FTP 连接管理器。

如果不深入研究为什么设备会被 FTP 请求淹没（毕竟请求在 I/O 和 CPU 中都非常便宜），一个建议是使用调用命令行 FTP 客户端的执行进程任务（例如Window 的本机*ftp*）并使用批处理文件传递参数以发送到 FTP 服务器（例如）将整个远程目录复制到本地目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T01:34:17.013

### 标准：

标准*FTP 连接*没有**`RetainSameConnection`**选项。

### 备选方案 1：

您可以*`Script Task`*用来传输本地文件夹和 FTP 网站的文件。*这里有几个与通过Script Task*进行 FTP 传输有关的 SO 问题。

[没有文件可下载时，如何避免 SSIS FTP 任务失败？](https://stackoverflow.com/questions/140850/how-to-avoid-ssis-ftp-task-from-failing-when-there-are-no-files-to-download)

[如何在不使用本地或临时文件的情况下将存储过程输出直接写入 FTP 上的文件？](https://stackoverflow.com/questions/20587/how-to-write-stored-procedure-output-directly-to-a-file-on-an-ftp-without-using)

### 备选方案 2：

您可以使用第三方供应商*CozyRoc出售的*[SFTP 任务](http://www.cozyroc.com/ssis/sftp-task)。就个人而言，我没有使用过该组件，但它确实带有该属性。阅读页面末尾他们声明此选项的部分。**`RetainSameConnection`**`Data streaming`**

# python - Python 3.3 cx_freeze 奇怪的错误：“NoneType”对象没有属性“路径”

> ID：15214020
> 
> 赞同：0
> 
> 时间：2013-03-05T01:03:29.777
> 
> 标签：python, pygame, cx-freeze, python-3.3

所以，这是我的问题。

我正在使用 Ubuntu 12.10 在 Pygame 和 Python 3.3 中制作游戏。美好的。我会将一堆 Python 脚本捆绑到一个可执行文件中，然后分发它。也很好。我将使用 cx_freeze，因为因为我使用的是 Python 3，所以我没有其他选择。

这就是我的问题所在。我用谷歌搜索过，但没有看到类似的东西。我`setup.py`的如下：

```
from cx_Freeze import setup, Executable
import sys

includes = ['sys', 'pygame.display', 'pygame.event', 'pygame.mixer', 'core', 'game']

build_options = {
                 'optimize' : 2,
                 'compressed': True,
                 'packages': ['pygame', 'core', 'game'],
                 'includes': includes,
                 'path': sys.path + ['core', 'game'],
                 }

executable = Executable('__init__.py',
                        copyDependentFiles=True,
                        targetDir='dist',
                        )

setup(name='Invasodado',
      version='0.8',
      description='wowza!',
      options = {'build_exe': build_options},
      executables=[executable]) 
```

我`__init__.py`的如下：

```
from sys import argv

import pygame.display
import pygame.event
import pygame.mixer

pygame.mixer.init()
pygame.display.init()
pygame.font.init()

from core import gsm

#Omitted for brevity 
```

我的其余代码（包括完整的`__init__.py`）可以在[https://github.com/CorundumGames/Invasodado](https://github.com/CorundumGames/Invasodado)找到，以防万一。

I get a long-ass stack trace, which can be found here [http://pastebin.com/Aej05wGE](http://pastebin.com/Aej05wGE) . The last 10 lines of it is this;

```
 File "/usr/local/lib/python3.3/dist-packages/cx_Freeze/finder.py", line 421, in _RunHook
    method(self, *args)
  File "/usr/local/lib/python3.3/dist-packages/cx_Freeze/hooks.py", line 454, in load_scipy
    finder.IncludePackage("scipy.lib")
  File "/usr/local/lib/python3.3/dist-packages/cx_Freeze/finder.py", line 536, in IncludePackage
    self._ImportAllSubModules(module, deferredImports)
  File "/usr/local/lib/python3.3/dist-packages/cx_Freeze/finder.py", line 211, in _ImportAllSubModules
    recursive)
  File "/usr/local/lib/python3.3/dist-packages/cx_Freeze/finder.py", line 209, in _ImportAllSubModules
    if subModule.path and recursive:
AttributeError: 'NoneType' object has no attribute 'path' 
```

In case it's relevant, I'm using Pydev and Eclipse. Now, the last line stands out because Googling it reveals nothing. I have no idea where `subModule` could have become `None`, and I can't easily check because cx_freeze has shit documentation.

I've never really used cx_freeze or distutils before, so I don't know what the hell I'm doing! Any help would be greatly appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:35:14.543

Having dug into this, it's a bug in cx_Freeze, that can only hit when you have more than one Python version since [PEP 3149](http://docs.python.org/3/whatsnew/3.2.html#pep-3149-abi-version-tagged-so-files) installed - i.e. it wouldn't have come up before 3.3.

I've filed a bug report for it: [https://bitbucket.org/anthony_tuininga/cx_freeze/issue/22/error-when-scanning-for-modules-with-a](https://bitbucket.org/anthony_tuininga/cx_freeze/issue/22/error-when-scanning-for-modules-with-a)

In the mean time, you can probably avoid the problem by using Python 3.2 for now, because that's the default in Ubuntu 12.10\. Python 3.3 will be the default in 13.04.

# oracle - 统计 SQL 中返回的总行数

> ID：15214022
> 
> 赞同：0
> 
> 时间：2013-03-05T01:04:01.223
> 
> 标签：oracle

这听起来可能有点无聊，但我正在尝试计算查询中返回的总行数。我试过 COUNT() 无济于事。到目前为止，我有这个查询：

```
SELECT DISTINCT
    a.*  
    , LEVEL AS n
    , count(wipdatavalue) as total
FROM
(
  SELECT
    WIPDATAVALUE
    , CONTAINERNAME
    , una
    , dulo
    , (dulo - una) + 1 AS m
  FROM
  (
    SELECT 
      WIPDATAVALUE
      , CONTAINERNAME
      , CASE
          WHEN INSTR(wipdatavalue, '-') = 0 THEN
            wipdatavalue
          ELSE
            SUBSTR(wipdatavalue, 1, INSTR(wipdatavalue, '-')-1) 
         END AS una
      , CASE
          WHEN INSTR(wipdatavalue, '-') = 0 THEN
            wipdatavalue
          ELSE
            SUBSTR(wipdatavalue, INSTR(wipdatavalue, '-') + 1)
         END AS dulo
    FROM trprinting
    WHERE containername = '8PB842613'
  )
)A CONNECT BY LEVEL <= m
GROUP BY
  WIPDATAVALUE
    , CONTAINERNAME
    , una
    , dulo
    , m
    , LEVEL
ORDER BY N; 
```

![在此处输入图像描述](../Images/6d0714cebe3307615d368f3e5b816d96.png)

我也在尝试将 N 字段设置为 1 到 8，因为这应该是正确的输出。提前致谢。我知道你们会有所帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T08:14:34.933

你想做这样的事情：

```
with data (wipdatavalue, containername, una, dulo, m, n)
     as (select wipdatavalue,containername,una,dulo,( dulo - una ) + 1 as m,una n
           from (select wipdatavalue,containername,
                        case
                          when Instr(wipdatavalue, '-') = 0
                          then
                            to_number(wipdatavalue)
                          else
                            to_number(Substr(wipdatavalue, 1, Instr(wipdatavalue, '-') - 1))
                          end as una,
                          case
                            when Instr(wipdatavalue, '-') = 0 
                            then
                              to_number(wipdatavalue)
                            else
                              to_number(Substr(wipdatavalue, Instr(wipdatavalue, '-') + 1))
                          end as dulo
                   from trprinting
                  where containername = '8PB842613')
         union all
         select wipdatavalue,containername,una,dulo,m,n + 1
           from data
          where n + 1 <= dulo)
select wipdatavalue,containername,una,dulo,m,n,
       count(*) over () total_rows
  from data
 order by wipdatavalue,n; 
```

小提琴：[http ://sqlfiddle.com/#!4/11082/2](http://sqlfiddle.com/#!4/11082/2)

# python - Python：从列表中产生增量以形成数组

> ID：15214024
> 
> 赞同：2
> 
> 时间：2013-03-05T01:04:05.897
> 
> 标签：python, arrays, numpy, scipy

我有以下数据

```
a= [1 1.1 1.2 1.3 1.4 1.5] 
```

我想要做的是为这个数据的每个值产生一系列间隔为 10% 的增量点。创建一个新数组：

```
b=  [[0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1.0], [0 0.11 ... 1.1],.....] 
```

我想做的下一件事是从列表 1 中获取每个数字，并从另一个值（例如 2）确定增量（20% 间距）的数量，以获得另一个数组：

```
c=[[1 1.2 1.4\. 1.6 1.8 2.0], [1.1 ..... 2.0],......] 
```

然后我想组合这些数组：

```
 d =[[0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1.0 1 1.2 1.4\. 1.6 1.8 2.0], [0 0.11 ... 2.0],.....] 
```

清单 1 是从一个方程确定的，但我想在这种情况下对某个点进行进一步计算，即值为 2。

arange 会起作用还是以其他方式生成数字序列？这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T01:26:51.140

混合列表推导，`np.linspace`它非常简单：

```
>>> a = [1, 1.1, 1.2, 1.3, 1.4, 1.5]

>>> b = [np.linspace(0, j, 11) for j in a]
>>> b
[array([ 0\. ,  0.1,  0.2,  0.3,  0.4,  0.5,  0.6,  0.7,  0.8,  0.9,  1\. ]),
 array([ 0\.  ,  0.11,  0.22,  0.33,  0.44,  0.55,  0.66,  0.77,  0.88,  0.99,
         1.1 ]),
 ...
 array([ 0\.  ,  0.15,  0.3 ,  0.45,  0.6 ,  0.75,  0.9 ,  1.05,  1.2 ,  1.35,
         1.5 ])]

>>> c = [np.linspace(j, 2, 6) for j in a]
>>> c
[array([ 1\. ,  1.2,  1.4,  1.6,  1.8,  2\. ]),
 array([ 1.1 ,  1.28,  1.46,  1.64,  1.82,  2\.  ]),
 ...
 array([ 1.5,  1.6,  1.7,  1.8,  1.9,  2\. ])] 
```

要连接它们，您必须删除每个数组的第一个元素或删除每个数组`c`的最后一个元素`b`。如果您只需要连接，我建议保持`c`如上，并做：

```
>>> b = [np.linspace(0, j, 10, endpoint=False) for j in a]

>>> d = map(np.concatenate, zip(b, c))
>>> d
[array([ 0\. ,  0.1,  0.2,  0.3,  0.4,  0.5,  0.6,  0.7,  0.8,  0.9,  1\. ,
         1.2,  1.4,  1.6,  1.8,  2\. ]),
 array([ 0\.  ,  0.11,  0.22,  0.33,  0.44,  0.55,  0.66,  0.77,  0.88,
         0.99,  1.1 ,  1.28,  1.46,  1.64,  1.82,  2\.  ]),
 ...
 array([ 0\.  ,  0.15,  0.3 ,  0.45,  0.6 ,  0.75,  0.9 ,  1.05,  1.2 ,
         1.35,  1.5 ,  1.6 ,  1.7 ,  1.8 ,  1.9 ,  2\.  ])] 
```

如果你想要列表而不是 numpy 数组，你总是可以做一个 final

```
>>> d = map(list, d) 
```

# twitter-bootstrap - Bootstrap ScrollSpy 不工作

> ID：15214028
> 
> 赞同：0
> 
> 时间：2013-03-05T01:04:13.577
> 
> 标签：twitter-bootstrap

我有以下[jsfiddle](http://jsfiddle.net/Chiliyago/D2RLR/3915/)项目用于测试 BootSTrap 的[ScrollSpy 功能](http://twitter.github.com/bootstrap/javascript.html#scrollspy)

该演示有 5 个指向页面部分的链接，并且这些链接有效。但是，向下滚动页面不会激活导航菜单。此外，我注意到在运行 jsfiddle 时，导航中的最后一个菜单选项是灰色的。因为我导航中的第一个选项位于页面下方，所以我认为不会突出显示中殿。

我没有看到我做错了什么？？

```
<section class="navspy">
        <ul id="navigation" class="nav nav-tabs nav-stacked affix" style="width:200px">
            <li><a href="#patientInfo">Patient Info</a>
            </li>
            <li><a href="#EmergencyContactInfo">Emergency Contact</a>
            </li>
            <li><a href="#EmploymentInfo">Employement Info</a>
            </li>
            <li><a href="#GuardianInfo">Guardian Info</a>
            </li>
            <li><a href="#InsuranceInfo">Insurance Info</a>
            </li>
        </ul>
    </section> 
```

谢谢你的帮助。

更新：3/5/2013-JSFiddle 链接现在正确

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T13:20:19.320

通过以下方式使用 body 标签：

[带演示](http://jsfiddle.net/shail/D2RLR/3916/)的 Jsfiddle

```
<body data-spy="scroll" data-target=".navspy"> 
```

您正在使用没有 #tag 的 id 导航。此外，为了让 scrollspy 工作，请在正文中使用部分 id 来获取数据目标。

由于您已经在 body 标记中指定了 data-spy 和 data-target ，因此无需通过 javascript 进行初始化。

# python - 如何在没有语法错误的情况下在 python if 语句中换行？

> ID：15214040
> 
> 赞同：1
> 
> 时间：2013-03-05T01:05:30.003
> 
> 标签：python

假设您在 python 中有这样的 if 语句：

```
if not "string1" in item and not "string2" in item and not "string3" in item and not "string4" in item:
    doSomething(item) 
```

有没有办法将 if 语句分成多行？像这样：

```
if not "string1" in item 
    and not "string2" in item 
    and not "string3 in item 
    and not "string4" in item:

    doSomething(item) 
```

这可能吗？有没有一种不同的、更“pythonic”的方式来使它更具可读性？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T01:08:43.510

通常，当您要将表达式拆分为多行时，请使用括号：

```
if (not "string1" in item 
    and not "string2" in item 
    and not "string3" in item 
    and not "string4" in item):
    doSomething(item) 
```

此建议直接来自[Python 的样式指南 (PEP 8)](http://www.python.org/dev/peps/pep-0008/#id12)：

> 包装长行的首选方法是在括号、方括号和大括号内使用 Python 的隐含行继续。通过将表达式括在括号中，可以将长行分成多行。

但请注意，在这种情况下，您有更好的选择：

```
if not any(s in item for s in ("string1", "string2", "string3", "string4")):
    doSomething(item) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T01:07:35.010

是的，只需在换行符之前添加一个反斜杠：

```
if not "string1" in item \
    and not "string2" in item \
    and not "string3 in item \
    and not "string4" in item:

    doSomething(item) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T02:10:44.187

反斜杠非常难看。如果您不再需要换行符，则必须删除反斜杠，而如果放置括号，则无需更改。

此外，在这种情况下，您可能需要考虑：

```
if not ("string1" in item 
    or "string2" in item 
    or "string3" in item 
    or "string4" in item):
    doSomething(item) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T01:08:47.807

只需将语句的所有条件放在括号内即可。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-05T01:09:29.983

您可以使用`\`转义行尾。例如：

```
$ cat foo.py
#!/usr/bin/env python

def doSomething(item):
    print item

item =  "stringX"

if not "string1" in item \
    and not "string2" in item \
    and not "string3" in \
    item and not "string4" in item:
    doSomething(item)

$ ./foo.py 
stringX 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-05T01:07:42.133

```
item = "hello"

if not "string1" in item \
    and not "string2" in item \
    and not "string3" in item \
    and not "string4" in item:

    print(item) 
```

输出：你好

是的，反斜杠可以完成这项工作。
此外，您的代码`"`在 string3 之后缺少一个。

# angularjs - AngularJS 中的自定义属性设置器

> ID：15214044
> 
> 赞同：1
> 
> 时间：2013-03-05T01:06:21.100
> 
> 标签：angularjs

我有一个`iframe`，它的内容应该绑定到一个控制器函数。我试过

```
<iframe ng-bind-html-unsafe="selectedMessage.content()"></iframe> 
```

但不幸的是，它似乎不起作用。将内容写入 an 的正确方法`iframe`是访问`iframe`DOM 元素并调用`ifrmElem.contentDocument.write(s)`.

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T01:40:15.150

您可以通过在属性上设置观察程序，然后在需要时手动更新 iframe 来实现此目的。

下面的示例使用跨浏览器 iframe 内容选择。

见 jsFiddle：http: [//jsfiddle.net/uyLNY/2/](http://jsfiddle.net/uyLNY/2/)

```
$scope.$watch('data.content', function(oldValue, newValue) {
    var ifrm = $element.find('iframe')[0];
    ifrm = (ifrm.contentWindow) ? ifrm.contentWindow : (ifrm.contentDocument.document) ? ifrm.contentDocument.document : ifrm.contentDocument;       
    ifrm.document.open();
    ifrm.document.write(newValue);
    ifrm.document.close();

}); 
```

但是值得注意的是，如果您要编写大量内容，我不确定它的性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T01:44:07.857

这是一个 plnkr：[http ://plnkr.co/edit/LG7p1AG7yhVKyLXgMX4Q?p=preview](http://plnkr.co/edit/LG7p1AG7yhVKyLXgMX4Q?p=preview)

Javascript

```
 $scope.content= "";

  $scope.fillFrame = function(id) {
    document.getElementById(id).contentDocument.write($scope.content);  
  }; 
```

HTML

```
 <strong>Enter some html</strong>
    <br/>
    <textarea ng-model="content"></textarea>
    <button ng-click="fillFrame('frame')">Fill iFrame</button> 
```

# ruby-on-rails - Rails 中的 Sass 数字精度

> ID：15214050
> 
> 赞同：1
> 
> 时间：2013-03-05T01:07:22.417
> 
> 标签：ruby-on-rails, sass

[如何使用sass-rails](https://github.com/rails/sass-rails) gem更改 Sass 中浮点数的精度？我编译的 Sass 样式表默认只给出三位小数的精度。

# sql - 带有 CASE 声明的特殊 ORDER BY - 需要指导

> ID：15214051
> 
> 赞同：3
> 
> 时间：2013-03-05T01:07:22.707
> 
> 标签：sql, postgresql, sql-order-by, case

我正在考虑如何编写此查询。我认为这可能涉及在 ORDER BY 声明中包含一个 CASE，但我可以使用一些指导。

我有两列数据；身份证和价格。当我按价格 ASC 订购时，我的查询结果显示如下：

> 身份证 | 价格
> 3 | 150
> 1 | 200
> 3 | 205
> 2 | 210
> 2 | 230
> 3 | 270
> 1 | 300
> 2 | 340
> 3 | 500

我要做的是仍然按价格 ASC 订购，但略有不同。我也想按 ID 分组。例如，我希望查询查找所有结果中的最低价格，然后查找具有相同 ID 的所有其他记录，按价格 ASC 顺序列出。找到该 ID 的所有记录后，查询将查找所有其他剩余记录，再次找到最低价格，然后重复。因此，每次经过此循环时，结果池都会减少。对于上面的示例，结果将是：

> 身份证 | 价格
> 3 | 150
> 3 | 205
> 3 | 270
> 3 | 500
> 1 | 200
> 1 | 300
> 2 | 210
> 2 | 230
> 2 | 340

该循环类似于查找最低价格，查找具有相同 ID 的所有记录并按价格顺序列出，查找剩余结果的最低价格，查找具有相同 ID 的所有记录并按价格顺序列出，重复......

有任何想法吗？如果我解释得不够好，请告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T02:05:22.487

```
SELECT ID, PRICE
FROM t
ORDER BY MIN(PRICE) OVER (PARTITION BY ID), PRICE 
```

[SQL小提琴](http://sqlfiddle.com/#!12/5141a/4)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T01:23:46.730

您正在使用 Postgres，因此您具有窗口功能。这是您需要的 SQL 示例：

```
select id, price
from (select t.*,
             min(price) over (partition by id) as minprice
      from t
     ) t
order by minprice, id, price 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T01:54:25.493

[SQL小提琴](http://sqlfiddle.com/#!12/5141a/1)

```
select t.id, t.price
from
    t
    inner
    join (
        select row_number() over(order by price) o, id
        from (
            select id, min(price) price
            from t
            group by id
        ) s
    ) s on s.id = t.id
order by s.o, t.price 
```

# c# - 两种形式和一种视图模型

> ID：15214054
> 
> 赞同：0
> 
> 时间：2013-03-05T01:07:31.873
> 
> 标签：c#, asp.net-mvc, model, viewmodel

我在一页中有两个表格。两者都有自己的属性和提交操作，但在两种表单中都有一些共同的属性。

有没有办法使用一个视图模型来构建具有两个表单的视图，该视图模型与视图中的两个表单共享属性？

实际上我有重复的字段，我必须使用 jquery 复制两个字段中值的更改。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T07:19:44.803

you can use HtmlPrefix to achieve this.

1.  I have created a model as

    ```
    public class TestModel
    {
      [Required]
      public int Id { get; set; }
      [Required]
      public string Name { get; set; }
    } 
    ```

2.  In Controller we need to have one GetMethod but two post method for each form, but with different **BindPrefix**

    ```
    public ActionResult TestLoad()
    {
        TestModel model = new TestModel();
        return View(model);
    }

    public ActionResult TestA([Bind(Prefix = "A")]TestModel model)
    {
        return View("TestLoad",model);
    }
    public ActionResult TestB([Bind(Prefix="B")]TestModel model)
    {
        return View("TestLoad",model);
    } 
    ```

    3.  In the view. Here also **we need to Specify binding prefix**

    > ```
    > <table>
    >  <tr>
    >   <td>
    >     @{Html.ViewData.TemplateInfo.HtmlFieldPrefix="A";}
    >     @{Html.RenderPartial("PartialA");}
    >   </td>
    >   <td>
    >     @{Html.ViewData.TemplateInfo.HtmlFieldPrefix="B";}
    >     @{Html.RenderPartial("PartialB");}
    >   </td>
    > </tr>
    > </table> 
    > ```
    > 
    > 4.  Both partial view are exactly same , except that they post data to different actions (as defined in controller)
    >     
    >     
    > 5.  Now if you run the project you should get appropriate output.

![enter image description here](../Images/0ec7f80da926be22592a7c14aaca37bb.png)

![enter image description here](../Images/453a245b6aa7df3cf8f841304bed8357.png)

# mysql - 仅选择 ID 出现一次的行

> ID：15214062
> 
> 赞同：3
> 
> 时间：2013-03-05T01:08:14.463
> 
> 标签：mysql, sql

我有 2 个如下所示的数据库表：

```
Knowledge
id          |        Title
--------------------------
3                     Hi
6                     Hello
7                     Yo
5                     Jump

Sorting
id          +        kID       
--------------------------
0           |         3
1           |         6
2           |         7
3           |         6
4           |         7
5           |         5 
```

我正在尝试从`Sorting`表中选择仅出现一次 kID 的行，这就是我尝试过的：

```
SELECT Knowledge.*, Sorting.*
FROM Knowledge, Sorting 
WHERE Knowledge.id = Sorting.KID
GROUP BY Sorting.KID 
    HAVING COUNT(Sorting.KID)<2
ORDER BY Sorting.SortOrder
LIMIT 0,8 
```

出于某种原因，它仍然返回所有内容而不是仅仅返回`Hi`，`Jump`这就是我想要完成的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T03:11:11.410

我建议使用子查询来获得结果：

```
select k.id, k.title
from knowledge k
inner join
(
  select kID
  from sorting
  group by kID
  having count(kID) < 2
) s
  on k.id = s.kid
LIMIT 0,8; 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!2/9ab89/5)。

子查询将仅返回表中具有单个计数的那些行`sorting`，然后您可以使用此结果连接到`knowledge`表。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-05T01:14:11.877

```
SELECT Knowledge.*, Sorting.*
FROM Knowledge, Sorting 
WHERE Knowledge.id = Sorting.KID
group by kID
having count(id) < 2 
```

问题是您在错误的字段上执行 count()

# jquery - .select ui.item 返回计数

> ID：15214069
> 
> 赞同：2
> 
> 时间：2013-03-05T01:08:49.783
> 
> 标签：jquery, autocomplete

我有一个自动完成功能。在输入框上生成选择项后，如何获得选择的返回编号？

```
$(this)
.autocomplete({ 
.
.
.select: function(event, ui){
   $(this).val(ui.item.value); //$(this) will be input with selected value
    alert(ui.item.count); // how can I get the count of the selected item?
    },    
    }); 
```

即自动完成生成

```
apple

pear

orange. 
```

当我选择梨时，它返回我 2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T16:16:12.293

我找到*了*一种获取您正在寻找的信息的方法，但希望这不是最好的方法或唯一的方法。

```
$(this).autocomplete({
    select: function(event, ui){
       // blah
    },   
    open: function(event, ui) {
        console.log($(this).next().next().children());
    }
}); 
```

[打开事件](http://api.jqueryui.com/autocomplete/#event-open)是“在打开或更新建议菜单时触发” 。此时，自动完成小部件已经创建了带有自己的点击侦听器的 dom 元素，`<input>`以便在自动完成附加到之后进行选择。（还有一个`<span>`created，这就是我调用`.next()`两次的原因。）但是 open 函数中的那行代码将返回您在其中创建的`<li>`子节点的列表。`<ul>`

与您的示例相匹配，您将获得`<li>`以下 HTML 标记的 jQuery 元素集合：

```
<li class="ui-menu-item" role="presentation">
    <a id="ui-id-0" class="ui-corner-all" tabindex="-1">apple</a>
</li>
<li class="ui-menu-item" role="presentation">
    <a id="ui-id-1" class="ui-corner-all" tabindex="-1">pear</a>
</li>
<li class="ui-menu-item" role="presentation">
    <a id="ui-id-2" class="ui-corner-all" tabindex="-1">orange</a>
</li> 
```

**重要提示：**这里的`id`标签不是元素的数字索引。相反，它是原始源中元素的绝对 ID。因此，您无法保证它们是连续的。例如，如果原始来源实际上是 this: ，那么结果数据的标签`["apple", "banana", "pear", "starfruit", "grape", "orange"]`ID实际上是 apple: 、 pear: 、 orange: 。您不能依赖此 id 为您提供用户在列表中单击的项目的顺序，因为它是*绝对源*而不是*相对于结果集*。`<a>``ui-id-0``ui-id-2``ui-id-5`

 **（我的列表中的 id 最初也是从 1 开始的，正如 Hogan 指出的那样，它们从 0 开始。）

在这一点上，你可以做两件事中的一件来帮助你完成剩下的工作。第一个是将集合（原始的或转换的，如对象格式）存储在某个变量中，该变量将在`select`事件回调的范围内。我建议将列表转换为如下对象：

```
lastResultSet = {
    apple : 1,
    pear : 2,
    orange : 3
} 
```

然后你的`.select`代码可以这样做：

```
var selectedIndex = lastResultSet[$(this).val(ui.item.value)]; 
```

另一种方法是在 dom 元素上设置自己的`.click`回调`<li><a>`以在该点捕获索引。我不建议这样做，因为在`<li>`dom 元素被自动完成破坏之前，如果不让点击处理程序解除绑定和处置，很容易干扰自动完成行为或导致内存泄漏。

[无论如何，我建议您在jQuery UI 论坛或 IRC 支持频道](http://jqueryui.com/support/)上提出同样的问题，希望有人可以为您提供一个不那么脆弱地依赖于隐含的 Dom 元素顺序的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T16:35:52.400

您可以这样做并返回一个从 0 到项目数 -1 的数字

**但是，这取决于内部 jQuery.UI 代码，可能不应该使用。**

```
.select: function(event, ui){
    var idElements = event.toElement.id.split("-");
    var num = idElements[idElements.length-1];
    alert(num);
    }, 
```

[小提琴](http://jsfiddle.net/8ZwNL/)

这个怎么运作：

正如帕特里克 M 指出的（好吧，他落后了一个），自动完成在内部创建了如下所示的元素：

```
<li class="ui-menu-item" role="presentation">
    <a id="ui-id-0" class="ui-corner-all" tabindex="-1">apple</a>
</li>
<li class="ui-menu-item" role="presentation">
    <a id="ui-id-1" class="ui-corner-all" tabindex="-1">pear</a>
</li>
<li class="ui-menu-item" role="presentation">
    <a id="ui-id-2" class="ui-corner-all" tabindex="-1">orange</a>
</li> 
```

我的代码获取所选元素的 id，然后在末尾解析“序列号”。

以这种方式使用内部生成的 UI 代码是一个坏主意，但它现在可以工作。

最好不要使用 UI 的内部表示，而是实现类似于 Patrick M 建议的东西。或者从 GIT 获取用于自动完成的 UI 代码并将其添加到您的项目中，然后您就知道对该文件的更改不会破坏您的代码（但是，对 UI 的其他更改可能会。）

您还可以建议对团队进行更改，以将此索引包含在事件中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T18:54:24.813

只需使用[jQuery Autocomplete 的`reponse`事件](http://api.jqueryui.com/autocomplete/#event-response)。

```
$(this).autocomplete({ 
    response: function( event, ui ) {
         alert(ui.content.length);   
    }
}); 
```

演示：http: [//jsfiddle.net/dirtyd77/SLGdE/12/](http://jsfiddle.net/dirtyd77/SLGdE/12/)

希望这可以帮助！

注意：这确实适用于 ajax。**

# sql - SQL中如何统计生产数量

> ID：15214073
> 
> 赞同：0
> 
> 时间：2013-03-05T01:09:16.147
> 
> 标签：sql

我只是在我的 SQL 作业中遇到了问题。

我必须在我的数据中列出所有收入超过 3000.00 美元的员工。

这些是我的桌子

```
 EMPLOYEE Table  
    EMP_NUM EMP_NAME                JOB_CLASS  
        101 John G. News            Database Designer
        102 David H. Senior         Systems Analyst
        103 June E. Arbough         Electrical Engineer
        104 Anne K. Ramoras         Systems Analyst
        105 Alice K. Johnson        Database Designer
        106 William Smithfield      Programmer
        107 Maria D. Alonzo         Programmer
        108 Ralph B. Washington     Systems Analyst
        111 Geoff B. Wabash         Clerical Support
        112 Darlene M. Smithson     DSS Analyst
        113 Delbert K. Joenbrood    Applications Designer
        114 Annelise Jones          Applications Designer
        115 Travis B. Bawangi       Systems Analyst
        118 James J. Frommer        General Support

ASSIGN Table
EMP_NUM  PROJ_NUM  HOURS
101      15        19.4
102      15        23.8
103      15        23.8
105      15        35.7
106      15        12.6
104      18        32.4
112      18        44
114      18        24.6
118      18        45.3
104      22        48.4
105      22        64.7
106      22        12.8
111      22        22
113      22        23.6
101      25        56.3
107      25        24.6
108      25        23.6
112      25        41.4
114      25        33.1
115      25        45.8
118      25        30.5

JOB Table
JOB_CLASS               CHG_HOUR
Applications Designer   48.1
Clerical Support        26.87
Database Designer       105
DSS Analyst             45.95
Electrical Engineer     84.5
General Support         18.36
Programmer              35.75
Systems Analyst         96.75 
```

对于上一个列出所有从事多个项目的员工的问题，我确实喜欢这个

```
select COUNT (a.PROJ_NUM), e.EMP_NAME
from EMPLOYEE e, ASSIGN a
where e.EMP_NUM = a.EMP_NUM
Having COUNT (a.PROJ_NUM) >= 2
group by e.EMP_NAME; 
```

这段代码给了我我想要的

我现在遇到的麻烦是获取收入超过 3000.00 的列表

所以我确实喜欢这个

```
select COUNT (a.HOURS * j.CHG_OUR), e.EMP_NAME
from EMPLOYEE e, ASSIGN a. JOB j
where j.JOB_CLASS = e.JOB_CLASS
and e.EMP_NUM = a.EMP_NUM
Having COUNT (a.HOURS * j.CHG_OUR) >= 3000
group by e.EMP_NAME; 
```

但是这一次，这段代码没有给我想要的

它只打印出这样的错误消息

```
ORA-00933: SQL command not properly ended
00933\. 00000 -  "SQL command not properly ended"
*Cause:    
*Action:
Error at Line: 60 Column: 26 
```

如果您知道如何解决它，请回答我

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T01:12:16.107

1.  您的 HAVING 语句必须出现在您的 GROUP BY 之后而不是之前。
2.  你不想使用 COUNT() 聚合，你想要 SUM()。

像这样的东西：

```
 select SUM (a.HOURS * j.CHG_OUR), e.EMP_NAME
            from EMPLOYEE e, ASSIGN a. JOB j
            where j.JOB_CLASS = e.JOB_CLASS
            and e.EMP_NUM = a.EMP_NUM
            group by e.EMP_NAME
            Having SUM (a.HOURS * j.CHG_OUR) >= 3000; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T01:13:38.550

我认为你可以这样做：

```
select SUM(a.HOURS * j.CHG_OUR), e.EMP_NAME
from EMPLOYEE e, ASSIGN a, JOB j
where j.JOB_CLASS = e.JOB_CLASS
and e.EMP_NUM = a.EMP_NUM
group by e.EMP_NAME
Having sum(a.HOURS * j.CHG_OUR) >= 3000; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T01:25:20.530

那这个呢：

```
select COUNT (a.HOURS * j.CHG_OUR), e.EMP_NAME
from EMPLOYEE e, ASSIGN a. JOB j
where j.JOB_CLASS = e.JOB_CLASS
and e.EMP_NUM = a.EMP_NUM
group by e.EMP_NAME;
Having COUNT ((a.HOURS * j.CHG_OUR) >= 3000) 
```

我在您的计数周围添加了一组额外的括号。

# javascript - .select() 函数在 iOS 设备上不起作用

> ID：15214077
> 
> 赞同：9
> 
> 时间：2013-03-05T01:09:46.587
> 
> 标签：javascript, jquery, html, mobile, mobile-safari

我想做一个输入框，当用户选择它时，框中的所有文本都会被选中。所以我决定使用这个`select()`功能，这就是我想要实现的。但是，它在桌面浏览器上可以正常工作，但在 iPad 上的 Safari 上却不行。如何解决问题？谢谢。

```
$('#input').click(function(e){
      $(this).select();
}); 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-05T01:21:13.083

根据这个 SO question( [Programmatically selection text in an input field on iOS devices (mobile Safari)](https://stackoverflow.com/questions/3272089/programmatically-selecting-text-in-an-input-field-on-ios-devices-mobile-safari) )，它在 iOS 中不起作用，您需要使用该`setSelectionRange()`功能。在你的情况下，它会是这样的：

```
$(this).get(0).setSelectionRange(0,9999); 
```

# c# - Wrappanel 中的帆布

> ID：15214083
> 
> 赞同：0
> 
> 时间：2013-03-05T01:10:36.107
> 
> 标签：c#, windows, canvas, windows-phone-8

我面临一个问题，有人可以告诉我这段代码有什么问题：

首先，我创建 2 个画布：

```
private void AddItem()
    {
        Canvas myCanvas = new Canvas();
        Canvas myCanvas2 = new Canvas();
        myCanvas2.Height = 128;
        myCanvas2.Width = 104;
        myCanvas.Background = new SolidColorBrush(Colors.Blue);
        myCanvas.Height = 200;
        myCanvas.Width = 350;
        myCanvas2.Margin = new System.Windows.Thickness(5,10,0,0);
        myCanvas.Margin = new System.Windows.Thickness(66, 10, 0, 0); 
```

然后我创建三个文本块：

首先：将 TextBlock 添加到第一个 Canvas：

```
TextBlock TextBlock1= new TextBlock();
    TextBlock1.FontSize = 48;
    TextBlock1.Text = Fach.Text;
    Canvas.SetTop(TextBlock1, 10);
    Canvas.SetLeft(TextBlock1, 29);
    myCanvas.Children.Add(TextBlock1); 
```

第二：将第二个 TextBlock 添加到第一个 Canvas：

```
TextBlock TextBlock2= new TextBlock();
    TextBlock2.FontSize = 24;
    TextBlock2.Text = Raum.Text;
    Canvas.SetTop(TextBlock2, 79);
    Canvas.SetLeft(TextBlock2, 31);
    myCanvas.Children.Add(TextBlock2); 
```

第三：将第二个 TextBlock 添加到第二个 Canvas：

```
TextBlock TextBlock3 = new TextBlock();
    TextBlock3.FontSize = 20;
    TextBlock3.Text = Zeit;
    Canvas.SetTop(TextBlock3, 36);
    Canvas.SetLeft(TextBlock3, 10);
    myCanvas2.Children.Add(TextBlock3); 
```

将 myCanvas 和 myCanvas2 添加到 wrappanel：

```
wrapPanel.Children.Add(myCanvas);
    wrapPanel.Children.Add(myCanvas2);
    }
    }; 
```

第一个 Canvas(myCanvas) 出现（框），但第二个 Canvas(myCanvas2) 应该出现在 myCanvas 前面。有人知道为什么吗？因为瓦帕内尔？我怎样才能改变这个？

编辑：Xaml

```
 <phone:PivotItem x:Name="Montag" Header="Montag" Margin="24,27,0,1">

                <ScrollViewer VerticalScrollBarVisibility="Auto" >

                        <toolkit:WrapPanel x:Name="wrapPanel" Orientation="Vertical"/>

                </ScrollViewer>  

</phone:PivotItem> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-04-18T06:25:40.073

请仔细检查您的代码。我猜这行是不正确的：

```
TextBlock3.Text = Zeit; 
```

我认为您应该将“.Text”添加到 Zeit =>“Zeit.Text”；

其他行似乎是正确的。

希望对您有所帮助。

# python - python逻辑错误

> ID：15214085
> 
> 赞同：-2
> 
> 时间：2013-03-05T01:11:10.200
> 
> 标签：python

请帮我弄清楚这段代码有什么问题；第一个函数工作正常，但第二个函数返回错误的数字。第二个变量 sup post 返回的是自午夜以来经过的剩余分钟数。

```
 def get_hours(s):
    time=s/3600
    return time

#The get_hour function returns how many hours have passed since midnight. The
# parameter is the time in seconds that has passed since midnight.
def get_minutes_remainder(s):
    hours=get_hours(s)
    minutes=s/60
    a=round(hours)
    b=a-hours
    b=abs(b)
    minutes=minutes*b
    return minutes 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T01:20:51.863

您需要使用 floor not round （更不用说其他一些逻辑错误）：

```
from math import floor
def get_minutes_remainder(s):
    hours = get_hours(s)
    whole_hours = floor(hours)
    fractional_hours = hours - whole_hours
    return fractional_hours * 60 
```

# node.js - 保持 nodejs 脚本与 Forever 一起运行的问题

> ID：15214086
> 
> 赞同：0
> 
> 时间：2013-03-05T01:11:17.620
> 
> 标签：node.js, shell, crontab, iptables, forever

我正在尝试在生产中设置 node.js 脚本（Balloons.IO）。我已经永远安装了，但是任何时候服务器重新启动`forever list`命令都会返回`info: No forever processes running`第二个问题，我已经将此脚本设置为在 iptables 不允许的端口 9090 下运行。为了解决这个其他问题，我必须运行一个 IPTABLES 命令来接受到端口 9090 的传入连接，并且 IPTABLES 保持这个配置直到服务器重新启动......简而言之，很多问题只是为了启动一个 node.js 脚本并保持它运行.

为了解决所有这些问题，我将此命令添加到 crontab：

```
* * * * * /home/steph/scripts/script-check.sh >> /home/steph/scripts/startup.log 
```

cron 作业已启动，但知道为什么 startup.log 包含以下输出吗？

```
Mon Mar  4 20:04:01 EST 2013
REDIS: [OFFLINE] Starting Redis Server...[FAILED]
BALLOONS.IO: [OFFLINE] Starting Balloons.IO (with Forever)...[FAILED]
FIREWALL (port 9090): [DENIED] Enabling port 9090...
[FAILED] 
```

当我手动运行 script-check.sh linux 时会产生：

```
Mon Mar  4 20:06:38 EST 2013
REDIS: [ONLINE]
BALLOONS.IO: [OFFLINE] Starting Balloons.IO (with Forever)...[SUCCESS]
FIREWALL (port 9090): [ACCEPT] 
```

以下是`script-check.sh`内容：

```
echo -ne "$(date)\n";
echo -ne  "REDIS: ";
if [ "`redis-cli ping | grep -i pong`" ]
then
        echo -ne "[ONLINE]\n";
else
        echo -ne "[OFFLINE] Starting Redis Server...";
        echo -ne `/etc/init.d/redis_6379 start > /home/steph/stat_redis.log`;
        if [ "`redis-cli ping | grep -i pong`" ]
        then
                echo -ne "[SUCCESS]\n";
        else
                echo -ne "[FAILED]\n";
        fi
fi

echo -ne "BALLOONS.IO: ";
if [ "`forever list | grep -i balloons`" ]
then
        echo -ne "[ONLINE]\n";
else
        echo -ne "[OFFLINE] Starting Balloons.IO (with Forever)...";
        echo -ne `forever start /home/steph/Balloons.IO/balloons.js > /home/steph/stat_balloons.log`;
        if [ "`forever list | grep -i balloons`" ]
        then
                echo -ne "[SUCCESS]\n";
        else
                echo -ne "[FAILED]\n";
        fi
fi

echo -ne "FIREWALL (port 9090): ";
if [ "`iptables-save | grep -- "-A INPUT -p tcp -m tcp --dport 9090 -j ACCEPT"`" ]
then
        echo -ne "[ACCEPT]\n";
else
        echo -ne "[DENIED] Enabling port 9090...";
        echo `iptables -A INPUT -p tcp -m tcp --dport 9090 -j ACCEPT > /home/steph/stat_iptables.log`
        if [ "`iptables-save | grep -- "-A INPUT -p tcp -m tcp --dport 9090 -j ACCEPT"`" ]
        then
                echo -ne  "[SUCCESS]\n";
        else
                echo -ne "[FAILED]\n";
        fi
fi 
```

# hibernate - Eclipse 链接 hibernate.hbm2ddl.auto = validate 中的 Hibernate 等效项

> ID：15214087
> 
> 赞同：3
> 
> 时间：2013-03-05T01:11:19.103
> 
> 标签：hibernate, jpa, eclipselink

我正在手动定义 sql 模式并在其之上使用 JPA 2.0 来使用该模式。我不允许 JPA 为我的应用程序生成/创建 andy 模式。在这样做的同时，我在下面提到的属性中使用了休眠之前

```
<property name="hibernate.hbm2ddl.auto" value="validate"/> 
```

用于根据定义的 JPA 验证表定义是否有效，如果不是，则应用服务器在发现表和 JPA 之间不匹配时没有出现。

现在我正在移动到 Eclipse 链接，我有

```
<property name="eclipselink.ddl-generation" value="none" /> 
```

所以 Eclipse 链接再次没有生成任何模式，但似乎没有与我们在休眠中的验证等效。

如果我的 JPA 定义了一个额外的列并且表没有定义，那么 Web 应用程序也可以正常运行，只有当表的第一次插入发生时，验证失败并抛出异常，如图所示。

```
Caused by: java.sql.SQLSyntaxErrorException: 'OTHERNAME' is not a column in table or VTI 'APP.BSREQUEST'. 
```

如何让 Web 应用程序持久性检查并验证启动期间是否正确，而不是等待第一次插入/删除发生时。

是否有相当于我可以使用的 eclipse 链接。

我尝试使用它，但这并没有帮助，验证仍然发生在第一次持久/删除操作期间。

```
<property name="eclipselink.orm.validate.schema" value="true"/> 
```

有人对此有好主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:14:56.293

在运行时，EclipseLink 不读取数据库元数据。您启用的 eclipselink.orm.validate.schema 属性打开 JPA orm.xml 文件的 XML 模式验证。

要获得出色的设计时映射/模式/Java 验证，您可以使用 JPA 工具（[Dali Java Persistence 工具](http://eclipse.org/webtools/dali/)），它作为[Eclipse IDE for Java EE Developers](http://www.eclipse.org/downloads/)发行版和[Oracle Enterprise Pack for Eclipse](http://www.oracle.com/technetwork/developer-tools/eclipse/overview/index.html)的一部分提供。

如果您正在映射到不存在的列，Dali 会告诉您，并提供集成的模式代码完成和丰富的编辑器，您可以使用它们来纠正错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T15:44:10.823

没有持久性单元属性，但 EclipseLink 确实通过 IntegrityChecker 支持这一点。这可以通过 SessionCustomizer 启用。

# authentication - 帐户特定的火力基地

> ID：15214088
> 
> 赞同：0
> 
> 时间：2013-03-05T01:11:35.663
> 
> 标签：authentication, firebase, firebase-security

我们有许多应用程序，可以分为大约 3 类。每个类别的用户数据非常相似，但每个类别之间却大不相同。所以我们认为我们应该创建 3 个不同的 firebase，一个用于存储每个应用类别的数据。但是，我们希望实现一个通用帐户系统，因为我们的用户可能会使用这 3 个类别中的任何一个或所有类别的单个应用程序。因此，理想情况下，用户创建一个帐户一次，然后在我们的任何应用程序上使用相同的帐户登录。

因此，我的问题是创建一个仅使用实际表数据（包括任何特定应用程序（即订阅、购买等）的权限）管理用户帐户的第四个 firebase 是否有意义？那时我们是否可以使用当用户登录到这 4 个 firebase 时将返回的身份验证令牌向其他 3 个 firebase 中的任何一个发出请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T06:49:34.563

如果您使用 Firebase 简单登录，则登录凭据将绑定到单个 Firebase。但是，如果您要生成自己的自定义令牌，您当然可以在多个 Firebase 之间共享相同的登录凭据（您可以完全控制这些令牌的生成方式）。

创建自定义令牌的文档在这里： [https ://www.firebase.com/docs/security/custom-login.html](https://www.firebase.com/docs/security/custom-login.html)

关于您是否应该使用 4 个单独的 Firebase：每个 Firebase 都有一组独特的 Secret，可用于生成身份验证令牌，并且它有一组安全规则。因此，如果单个 Firebase 绑定到单个应用程序（单个代码库），通常效果最好。但是，您可以随意构建它。如果在多个应用程序之间共享 1 个 Firebase 更方便，那真的没有理由不适合您。例如，您可以将您的第一个应用程序的数据存储在 /app1，将您的第二个应用程序的数据存储在 /app2 等。请记住，这些应用程序最终将共享单个安全规则文件、一组机密，一组设置和一组统计/分析。

# c - Mongodb C Driver: How to clear database?

> ID：15214089
> 
> 赞同：1
> 
> 时间：2013-03-05T01:12:11.817
> 
> 标签：c, mongodb

Using the Mongodb C Driver, how can I issue shell commands like db.mydb.remove()?

The API seems pretty limited: [http://api.mongodb.org/c/current/api/annotated.html](http://api.mongodb.org/c/current/api/annotated.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T08:46:40.210

To drop collection use [mongo_cmd_drop_collection(…)](http://api.mongodb.org/c/current/api/mongo_8h.html#aa2199ede7418f69ee82aea0b2a446961), to drop DBs use [mongo_cmd_drop_db(…)](http://api.mongodb.org/c/current/api/mongo_8h.html#ad7780464bab6ed5b031182cb84de06c4). Most commands are inside [mongo.h](http://api.mongodb.org/c/current/api/mongo_8h.html).

Edit: To perform the requested *remove(…)* use [mongo_remove(…)](http://api.mongodb.org/c/current/api/mongo_8h.html#a6776a58fde3e24329db7be2c99d9046a).

# c++ - SQLite TEXT CAST 到 C++ 中的 INTEGER 或 REAL 做的太多了

> ID：15214102
> 
> 赞同：0
> 
> 时间：2013-03-05T01:14:18.053
> 
> 标签：c++, sql, sqlite

我在`TEXT`列中转换数据类型时遇到问题。

我必须从自定义**CSV**文件上传所有数据。无法保证我什至会得到我期望的所有列，更不用说正确的数据类型了，所以我从一个表开始，其中所有列都是 TEXT 类型，并将空字符串放在空白处。

前任。表看起来像这样

> 创建表 tbl1（col1 文本，col2 文本，col3 文本）；

从文件加载后`tbl1`，我运行它。

> 选择 * 从 tbl1;

选择结果：

'1'，'String1'，'2.0'

'2'，'String2'，'3.14'

'3','String3', '6.77776'

'h'，'Stringh'，'hh'

''，'细绳'， ''

现在我想从中获取数据`tbl1`并使用它来填充此表。

> 创建表 tbl2（col1 整数，col2 文本，col3 实数）；

我尝试这样。

> INSERT INTO tbl2 SELECT CAST(tbl1.col1 as INTEGER), tbl1.col2, CAST(tbl1.col3 AS REAL) FROM tbl1;

之后我运行这个，

> 选择 * 从 tbl2;

选择结果：

1,'String1', 2.0

2,'String2', 3.14

3,'String3', 6.77776

0,'字符串', 0

0,'字符串', 0

我真正想要的是抓住我认为“好”的演员表并将它们插入`tbl2`然后取出我认为“坏”演员表的所有值并将它们放入看起来像这样的“tbl3”中。

> 创建表 tbl3（col1 文本，col2 文本，col3 文本，REASON_FOR_REJECTION 文本）；

`tbl3`将用于报告和可能解决不良数据的问题。

在将这些数据插入之前，我是否需要在 C++ 中对其进行预处理，`tbl2`或者 SQLite 是否支持某种允许我捕捉“坏”强制转换的查询功能？

## 更新：

通过将 CL. 的查询添加到此末尾，我可以区分哪些记录具有“不良”强制转换，并清理`tbl2`并将不良数据行添加到`tbl3`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T08:47:21.507

[阅读有关 type affinity](http://www.sqlite.org/datatype3.html#affinity)的 SQLite文档。

当您将列声明为`INTEGER`or`REAL`时，SQLite 将自动尝试转换值。任何无法转换的值都将保留原始类型。

因此，只需将您的数据直接导入`tbl2`，然后使用如下查询查找所有有错误的记录：

```
INSERT INTO tbl3
SELECT col1, col2, col3,
       trim(CASE typeof(col1)
              WHEN 'integer' THEN ''
              ELSE                'col1:' || typeof(col1)
            END ||
            ' ' ||
            CASE typeof(col3)
              WHEN 'real' THEN ''
              ELSE             'col3:' || typeof(col3)
            END)
FROM tbl2
WHERE typeof(col1) != 'integer'
   OR typeof(col3) != 'real' 
```

# javascript - 使用带有谷歌地图的 for 循环来添加标记

> ID：15214105
> 
> 赞同：0
> 
> 时间：2013-03-05T01:14:23.573
> 
> 标签：javascript, google-maps, google-maps-api-3

我想添加一个`for`循环来循环遍历`array`并将标记添加到地图中，我试图涉足一些东西，但我就是无法休息，纬度/经度正在被回显为`(##.#########,-##.########)`我尝试过的格式许多不同的方式，但似乎只是不想将其添加到地图中。

```
<script>
var initialLocation;
var map;
var markersArray = [];
var gMarkerLatitude = new Array();
var gMarkerLongitude = new Array();
var markers = [];
<?php $i = 0; while($stmt -> fetch()) { ?>  
gMarkerLatitude[<?php echo $i; ?>] = ["<?php echo $gLatitude; ?>"];
gMarkerLongitude[<?php echo $i; ?>] = ["<?php echo $gLongitude; ?>"];
<?php $i++; } ?>
function initialize() {
 var mapOptions = {
  zoom: 15,
  center: new google.maps.LatLng(56.7626362, -111.379652),
  mapTypeId: google.maps.MapTypeId.ROADMAP,
  disableDefaultUI: false,
  zoomControl: true,
  zoomControlOptions: {
    style: google.maps.ZoomControlStyle.LARGE
  }
};

  map = new google.maps.Map(document.getElementById('gmaps'),
  mapOptions);

  google.maps.event.addListener(map, 'click', function(event) {
    var latitude = event.latLng.lat();
    var longitude = event.latLng.lng();
    deleteOverlays();
    addMarker(event.latLng);
    updateTextFields(latitude, longitude);
  });

  google.maps.event.addListener(marker, 'click', function(event) {
    showInfo(window);
  });

}

function updateTextFields(lati, longi) {
  $('#inputLatitude').val(lati);
  $('#inputLongitude').val(longi);
}

function addMarker(location) {
  marker = new google.maps.Marker({
    position: location,
    map: map
  });
  markersArray.push(marker);
}

try {
for (i = 0; i < gMarkerLongitude.length; i++) {
  var marker = new google.maps.Marker({
    map: map,
    position: new google.maps.LatLng(gMarkerLatitude[i],gMarkerLongitude[i])
  })
  alert(new google.maps.LatLng(gMarkerLatitude[i], gMarkerLongitude[i]));
}

}
catch(err) {
  alert(err);
}

function deleteOverlays() {
  if (markersArray) {
    for (i in markersArray) {
      markersArray[i].setMap(null);
    }
    markersArray.length = 0;
  }
}

function loadScript() {
  var script = document.createElement('script');
  script.src = 'https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=true&' +
  'callback=initialize';
  document.body.appendChild(script);
}

$(document).ready(function() {
$(window).resize(function () {
    var h = $(window).height(),
        offsetTop = 190; // Calculate the top offset

    $('#gmaps').css('height', (h - offsetTop));
  }).resize();
  loadScript();
});

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T01:21:32.327

`google.maps.LatLng`将两个数字作为参数，但您传递的是一个包含字符串的数组。尝试

```
gMarkerLatitude[<?php echo $i; ?>] = <?php echo $gLatitude; ?>;
gMarkerLongitude[<?php echo $i; ?>] = <?php echo $gLongitude; ?>; 
```

假设`$gLatitude`和`$gLongitude`是数字

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T03:28:40.980

哪个部分抛出错误？您可以`visible: true`在创建每个标记时尝试添加到 markerOptions。还要确保您的 lat/lng 值在[指定范围内](https://developers.google.com/maps/documentation/javascript/reference#LatLng)：

```
Latitude is specified in degrees within the range [-90, 90].
Longitude is specified in degrees within the range [-180, 180]. 
```

# javascript - Javascript 错误.. 为什么登录表单会闪烁一秒钟？

> ID：15214108
> 
> 赞同：-1
> 
> 时间：2013-03-05T01:14:31.890
> 
> 标签：javascript, jquery, wordpress

我有一个弹出的登录表单（onclick），但是当我单击站点上的任何页面时，它会闪烁一秒钟。它是使用 wordpress 的这个插件生成的[http://wordpress.org/extend/plugins/flexible-frontend-login/](http://wordpress.org/extend/plugins/flexible-frontend-login/)

[http://oilfieldconference.com](http://oilfieldconference.com)

要重新创建，只需加载站点并单击导航栏中的日历链接..您将看到登录表单闪烁..我在控制台中看不到任何内容..

![在此处输入图像描述](../Images/5a7640853c747b9af32f8368be170ed0.png)

相关的Javascript（我认为..取自控制台/资源）：

```
jQuery(document).ready(function($) {
// $() will work as an alias for jQuery() inside of this function

// Add an empty container for overlay
$(document).ready( function($) {
    $('html').prepend('<div id="ffl-mask"></div><!-- added by Flexible Frontend Login Plugin. Needed for overlay. -->');
} );

$(document).ready(function() { 

     //select all the a tag with name equal to ffl-modal
     $('a[name=ffl-modal]').click(function(e) {
         //Cancel the link behavior
         e.preventDefault();
         //Get the A tag
         var id = $(this).attr('href');

         //Get the screen height and width
         var maskHeight = $(document).height();
         var maskWidth = $(window).width();

         //Set height and width to mask to fill up the whole screen
         $('#ffl-mask').css({'width':maskWidth,'height':maskHeight});

         //transition effect    
         $('#ffl-mask').fadeIn(600);   
         $('#ffl-mask').fadeTo("fast",0.8); 

         //Get the window height and width
         var winH = $(window).height();
         var winW = $(window).width();

         //Set the popup window to center
         $(id).css('top',  winH/2-$(id).height()/2);
         $(id).css('left', winW/2-$(id).width()/2);

         //transition effect
         $(id).fadeIn(1000);

     });

     //if close button is clicked
     $('.ffl-window .ffl-close').click(function (e) {
         //Cancel the link behavior
         e.preventDefault();
         $('#ffl-mask, .ffl-window').hide();
     });    

     //if mask is clicked
     $('#ffl-mask').click(function () {
         $(this).hide();
         $('.ffl-window').hide();
     });        

});

// calculate mask when user resizes window
$(document).ready(function () {
    $(window).resize(function () {

         var box = $('#ffl-boxes .ffl-window');

         //Get the screen height and width
         var maskHeight = $(document).height();
         var maskWidth = $(window).width();

         //Set height and width to mask to fill up the whole screen
         $('#ffl-mask').css({'width':maskWidth,'height':maskHeight});

         //Get the window height and width
         var winH = $(window).height();
         var winW = $(window).width();

         //Set the popup window to center
         box.css('top',  winH/2 - box.height()/2);
         box.css('left', winW/2 - box.width()/2);

    });
});

 $(document).ready(function() {

    // find all instances of flexible-frontend-login to append individual links
    $('a[name=ffl-popup]').each(function(){
        // get the tags from link
        var id = $(this).attr('href');
        // set linked div to hidden
        $(id).hide();                   
    });

    // select a tags with name equal to ffl-popup
    $('a[name=ffl-popup]').click(function(e) {
        // cancel link behavior
        e.preventDefault();
        // get the tags from link
        var id = $(this).attr('href');
        // Set visibility
        $(id).css('display', 'block');
    });

     //if close button is clicked
     $('.ffl-close-popup-link').click(function(e) {
         //Cancel the link behavior
         e.preventDefault();
         // get parent id
         var id = $(this).parents('div:eq(0)').attr('id');
         // and hide it
        $('#'+id).hide();
      });    

 });    

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T07:38:16.220

我相信我有适合您的解决方案，但它涉及编辑您正在使用的插件的类文件。我看了一下JS。这不是有问题的.. 有问题的是在 js 隐藏它之前在页面上生成有问题的 div。要解决此问题，请执行以下操作。请注意，这是未经测试的，因为我的机器上没有安装 wordpress 和相关插件：

进入`flexible-frontend-login\includes\classes\class.FrontendLogin.php`并找到第 49 行，应该是这样的：

```
$html .= "<div id='ffl-popup-content-$unique' class='ffl-popup-content ffl-{$this->horizontal_position} ffl-{$this->vertical_position}'>"; 
```

替换它，或将其编辑为这样。要么真的有效：

```
$html .= "<div id='ffl-popup-content-$unique' class='ffl-popup-content ffl-{$this->horizontal_position} ffl-{$this->vertical_position}' style='display: none;'>"; 
```

此编辑导致有问题的 div 在生成时隐藏，而不是稍后在 js 中隐藏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T01:21:51.420

由于您没有发布 javascript 或任何内容，我最好的猜测是您在 javascript 中不显示任何内容，并且它在页面加载后才会运行？也许进入你的css并让它显示none和onclick display:block？

# c# - 身份验证令牌存储

> ID：15214109
> 
> 赞同：0
> 
> 时间：2013-03-05T01:14:34.513
> 
> 标签：c#, asp.net

我想通过令牌保护对我的 Web 服务的每次调用。

首先对用户进行身份验证并生成身份验证令牌，然后将令牌添加到 http 运行时，最后将令牌发送到客户端（asp.net c# 页面）

这是问题所在：我想将令牌发送到我进行的每个后续服务调用。所以问题是我如何找出令牌在客户端上的存储位置，或者我能否以某种方式将其存储在客户端上。

任何帮助都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T01:46:03.450

身份验证令牌（假设您使用的是内置身份验证管理器）使用名为“.ASPXAUTH”的 cookie 存储在客户端上。

这意味着正常的 cookie 存储规则适用。auth cookie 的默认生命周期是 30 分钟；您可以在 web.config 中覆盖此值：

```
<system.web>
  <authentication mode="Forms">
    <forms loginUrl="..." timeout="60" />
  </authentication>
</system.web> 
```

“超时”的值以分钟为单位。

# repository - 没有 Getter 的 DDD 对象持久性

> ID：15214116
> 
> 赞同：5
> 
> 时间：2013-03-05T01:15:04.257
> 
> 标签：repository, domain-driven-design, getter

我认为我遗漏了一些非常明显的东西，但是在域对象及其通过存储库的持久性方面存在很多分歧，因此很难得到明确的答案。

**假如说**

*   我已经构建了一个纯域模型，它不依赖于我的解决方案中的任何其他程序集，因为 DDD 状态只有一个明确的根聚合。

*   我有一个特定于域的存储库，它保存由服务层调用的根聚合。

*   在内部，存储库使用 EF 将对象及其子对象持久化

如果避免暴露 getter（绝对不是 setter），那么我的存储库如何访问对象的状态以实际持久化它。

**选项？？**

1.  依赖注入到域模型中（DDD 味道？？）

2.  仅吸气剂（DDD 气味？？）

还有一个相反的问题是从数据库中拉出对象。通过构造函数进行初始化似乎是唯一可能的候选者。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T03:24:51.697

ORM 可以通过反射获取对象内部的数据。例如，[NHibernate 有各种](http://gorodinski.com/blog/2012/08/10/toward-persistence-ignorance-with-nhibernate-in-domain-driven-design/)属性访问策略，允许映射类只有私有字段，没有 getter 或 setter。我认为英孚应该有类似的设施。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T04:22:23.157

正如 eulerfx 所说：由于您使用的是 ORM，因此您必须使用*它*提供的内容。

我永远不会愿意使用 ORM，所以我的经验有些有限，但它似乎确实是一个问题，因为 ORM 以某种形式进入对象模型。在某些情况下，它会迫使您以特定方式设计类。

话虽如此。为了持久化一个对象，你需要它的状态。为了水合一个对象，您需要为其提供其状态。只是没有办法解决这一点。如果您的工具需要 getter 和 setter，那就这样吧。

您可能有一些状态对象被您的对象暴露/消耗，即使意图更清晰，它也只是解决了问题 --- 但它可能更好:)。

即使使用事件源，事件也包含状态并且必须应用于对象以使其恢复到其最后状态，或者您可以使用与状态对象完全相同的快照。

公共 getter 和 setter 有点容易被滥用，但事实就是如此。

# ios - 将 C++ Google 协议缓冲区添加到 iOS 应用程序无法从标头搜索路径加载标头

> ID：15214119
> 
> 赞同：1
> 
> 时间：2013-03-05T01:15:13.213
> 
> 标签：ios, xcode, protocol-buffers

我正在关注这篇文章：[iOS 上的 Google 协议缓冲区](https://stackoverflow.com/questions/10277576/google-protocol-buffers-on-ios)

我将 Google 文件夹和 Config.h 复制到我的项目中。

我已经完成了一切，但我遇到的问题与这一步有关：“将 google headers 的目录添加到您的其他包含目录”

我将 Google 文件夹添加到我的标题搜索路径和用户标题搜索路径中。我用了这个：“$(SRCROOT)”/google recursive

无论我做什么，编译器都找不到 Google 标头。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T12:55:19.333

**在google/**之前不要给出路径...在**src/之前给出路径**

导航到您的协议缓冲区的 src 文件夹，只需将 src 文件夹拖放到 XCode buld 设置中的“Header Search Paths”。那应该这样做。

# ios - 重用使用 CTFramesetterCreateWithAttributedString() 创建的 CTFrameSetter？

> ID：15214120
> 
> 赞同：0
> 
> 时间：2013-03-05T01:15:18.457
> 
> 标签：ios, objective-c, cocoa, core-text

我已经看到多次提到框架设置器“昂贵”我有几个不同的属性字符串，它们彼此独立布局，有没有办法“重用”框架设置器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T02:03:16.900

[记录](https://developer.apple.com/library/ios/#documentation/Carbon/Reference/CTFramesetterRef/Reference/reference.html) 的`CTFramesetterCreateWithAttributedString`和`CTFramesetterCreateFrame`都返回一个不可变的对象。不幸的是，无法重用它们。

# java - Android：在 Gridview 中使用 RadioGroup

> ID：15214121
> 
> 赞同：1
> 
> 时间：2013-03-05T01:15:22.917
> 
> 标签：java, android, gridview, adapter, radio-group

我想在 GridView 中布置几十个单选按钮。现在，我通过创建自定义适配器并覆盖 getView 函数（然后在 GridView 上调用 setAdapter）来实现这一点。唯一的问题是，我无法将这些单选按钮包含在 RadioGroup 中，因此我可以强制单选按钮。

我查看了各种 stackoverflow 帖子（例如：[Radio Group implementation on Grid View in Android](https://stackoverflow.com/questions/12781830/radio-group-implementation-on-grid-view-in-android)），但我还没有找到一种直接的方法来完成这项工作。我尝试在我的主 XML 中的 GridView 标记周围添加 RadioGroup 标记，但这不起作用。

到目前为止，这是我的一些相关代码：

```
 private class RadioGridAdapter extends BaseAdapter{
    private Context mContext;
    RadioGridAdapter(Context c) {
        mContext = c;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent){
        LayoutInflater inflater = (LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        View gridView;
        if(convertView == null) {
            gridView = inflater.inflate(R.layout.cell, null);

            //set value into Button
            RadioButton ButtonView = (RadioButton) gridView.findViewById(R.id.interval_button);
            ButtonView.setText(intervals[position]);

        } else {
            gridView = (View) convertView;
        }

        return gridView;
    }
} 
```

细胞.xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent">
<RadioButton
    android:id="@+id/interval_button" 
    android:layout_width="match_parent"
   android:layout_height="match_parent" >
</RadioButton> 
</LinearLayout> 
```

活动主.xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
tools:context=".MainActivity" >

<GridView
    android:id="@+id/gridview"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:columnWidth="90dp"
    android:gravity="center"
    android:horizontalSpacing="20dp"
    android:numColumns="auto_fit"
    android:paddingLeft="15sp"
    android:paddingRight="15sp"
    android:stretchMode="columnWidth"
    android:verticalSpacing="10dp" >
</GridView>

</LinearLayout> 
```

谢谢！

更新：根据这篇文章（[单选按钮多行](https://stackoverflow.com/questions/10960611/radio-button-multiple-rows?lq=1)）和这篇文章（[如何对一个 3x3 的单选按钮网格进行分组？](https://stackoverflow.com/questions/2381560/how-to-group-a-3x3-grid-of-radio-buttons?lq=1)），没有一种简单的方法可以做到这一点，而无需自己扩展 RadioGroup 类以具有以下能力以网格格式包装单选按钮.. 有谁知道以这种方式使用 RaioGroup 的开源项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T03:06:49.707

您可以使用 ListView 而不是 GridView。![在此处输入图像描述](../Images/2f8ff053af1b92be8655c921e6cc7790.png)

如需帮助，请参阅我的 Android 应用程序博客

[http://amitandroid.blogspot.in/2013/03/android-listview-with-radiogroup.html](http://amitandroid.blogspot.in/2013/03/android-listview-with-radiogroup.html)

希望这个博客能帮到你很多。

非常感谢，

# c++ - 函数参数c ++中的指针

> ID：15214124
> 
> 赞同：0
> 
> 时间：2013-03-05T01:15:35.430
> 
> 标签：c++, arrays, pointers, parameters, arguments

考虑这段代码：

```
char strName[25]; 
void SetInfo(char *strName) 
{ 
strncpy(m_strName, strName, 25); 
} 
```

他们为什么在函数参数中使用指针？我们不能这样做：

```
void SetInfo(char strName[]) {
strncpy(m_strName, strName, 25); } 
```

? 两者有什么区别？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T01:18:13.510

在这种特殊情况下，根本没有（除了要输入的更多字母）。char 数组在传递给函数时“衰减”为指针。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-05T01:29:26.800

**当作为参数传递时，数组总是作为指针衰减。**

在这种情况下，数组就像一个指针（它们指向数组第一个元素的内存）

```
void foo(char a[])
{
    a[0] = '@';
    cout << a[0];
    cout << *a;
} 
```

对 cout 的两个调用都打印相同的字符“@”。

```
void foo(char a[])
{
    // gives you the size of a pointer to the array's data type.
    // prints 4
    sizeof(a);

    // prints char *
    cout << typeid(a).name();
} 
```

我不确定这是否是标准的。

# zend-framework - Zend Partials 中的 jQuery 加载函数

> ID：15214128
> 
> 赞同：2
> 
> 时间：2013-03-05T01:15:58.100
> 
> 标签：zend-framework, jquery, zend-db

我将如何使用加载函数并使用 jQuery 和 Zend 框架从部分视图中附加数据？本质上，当我单击“显示更多”时，我的视图部分（单词 hey）中的数据会附加到容器中。最终结果 = 列表，（单击“显示更多”）嘿等。

看法

```
<script>
$(function() {
  $('a').click(function(){
    $('<div id="info" />').load('/partials/view #hey', function () {
      $(this).hide().appendTo('#container').slideDown(100);
    });
  })});
</script>
<div id="container">
  List
</div>
<a href="#">Show More</a> 
```

查看部分（'/partials/view'）

```
<div id="hey">
  <ul>
    <li>hey</li>
  </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:06:15.643

为此，您需要创建一个操作，您不能直接访问部分。

```
<script>
$(function() {
  $('a').click(function(){
    $('<div id="info" />').load('controller/some-action', function () {
      $(this).hide().appendTo('#container').slideDown(100);
    });
  })});
</script> 
```

> 行动 someAction:

```
// do your thing if required
$this->view->variable = $data; 
```

将请求发送到操作，确保您的视图具有`no layout`. 在视图中使用您的部分。

在视图中（some-action.phtml）：

```
echo $this->partial(
  $partialName, 
  array (
    'variable' => $variable
  )
); 
```

这样你就可以利用你的部分。

# php - TCPDF 在单行中左中右对齐

> ID：15214136
> 
> 赞同：5
> 
> 时间：2013-03-05T01:16:55.097
> 
> 标签：php, tcpdf

我想为包含日期左对齐、创建者居中和页面右对齐的 PDF 文档创建页脚。这些应该在一行中。我尝试了以下代码：

```
$this->Cell(0, 10, $date->format('d.m.Y'), 0, false, 'L', 0, '', 0, false, 'T', 'M');
$this->Cell(0, 10, 'Creator', 0, false, 'C', 0, '', 0, false, 'T', 'M');
$this->Cell(0, 10, 'Page '.$this->getAliasNumPage().'/'.$this->getAliasNbPages(), 0, false, 'R', 0, '', 0, false, 'T', 'M'); 
```

创建者向右移动并与页面重叠：

![PDF 文档页脚](../Images/2fa73ceac2cc3d0d293f014ba2918c37.png)

有人有解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T01:52:33.307

您需要设置 的宽度`Cell()`，根据文档[http://www.tcpdf.org/doc/code/classTCPD.html#a33b265e5eb3e4d1d4fedfe29f8166f31](http://www.tcpdf.org/doc/code/classTCPDF.html#a33b265e5eb3e4d1d4fedfe29f8166f31)您`$date->format('d.m.Y')` `Cell()`正在扩展到右边距，强制该行上的其他单元格到右边距。

> $w (float) 单元格宽度。如果为 0，则单元格延伸到右边距。

尝试类似（可能需要根据字体大小进行调整）

```
$this->Cell(20, 10, $date->format('d.m.Y'), 0, false, 'L', 0, '', 0, false, 'T', 'M');   
$this->Cell(20, 10, 'Creator', 0, false, 'C', 0, '', 0, false, 'T', 'M'); 
$this->Cell(20, 10, 'Page '.$this->getAliasNumPage().'/'.$this->getAliasNbPages(), 0, false, 'R', 0, '', 0, false, 'T', 'M'); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-09-30T05:56:57.397

我也遇到了与 TCPDF 对齐的问题。我注意到如果您使用 x 坐标为 0，那么它将使用属性“R”进行右对齐。但如果它设置为非零值，则它会忽略“R”设置。这是我用于右对齐的语句。

```
$this->Cell(0, 9, 'Text-to-be-aligned-right', 0, false, 'R', 0, '', 0, false, 'T', 'M' ); 
```

# android - 从 PreferenceFragment 发送 http-get（动态壁纸）

> ID：15214137
> 
> 赞同：0
> 
> 时间：2013-03-05T01:17:12.950
> 
> 标签：android, http, libgdx, android-preferences, live-wallpaper

我创建了一个壁纸（适用于我的 Android 4.0.3），但我的偏好有问题。

当我尝试从 调用服务`http-get`时`PreferenceFragment`，我没有得到任何响应。在实践中，似乎呼叫丢失了。我试过这样的电话：

```
InputStream stream = null;
StringBuilder fos = null;
try {
    URL url = new URL("http://.....");

    stream = url.openConnection().getInputStream();
    InputStreamReader reader = new InputStreamReader(stream);

    fos = new StringBuilder();
    int next = -1;
    while ((next = reader.read()) != -1) {
        fos.append((char)next);
    }
} catch (Exception e) {
    // ...
} finally {
    // ...
} 
```

或使用外部框架，例如`libgdx`：

```
HttpRequest httpRequest = new HttpRequest(HttpMethods.GET);
httpRequest.setUrl("http://.....");
NetJavaImpl net = new NetJavaImpl();
net.sendHttpRequest(httpRequest, this); 
```

但什么也没发生。在设备上没有关于此的任何痕迹或存在概率异常。

我有这样的清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="it.mytest.live"
    android:installLocation="preferExternal"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="11"
        android:targetSdkVersion="17" />

    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.VIBRATE" />
    <uses-permission android:name="android.permission.SET_WALLPAPER" />

    <uses-feature
        android:name="android.software.live_wallpaper"
        android:required="true" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".MyWallpaperSettings"
            android:exported="true"
            android:hardwareAccelerated="false"
            android:label="MyWallpaperSettings"
            android:permission="android.permission.INTERNET" />

        <service
            android:name=".MyWallpaper"
            android:icon="@drawable/ic_launcher"
            android:label="@string/app_name"
            android:permission="android.permission.BIND_WALLPAPER" >
            <intent-filter>
                <action android:name="android.service.wallpaper.WallpaperService" />
            </intent-filter>

            <meta-data
                android:name="android.service.wallpaper"
                android:resource="@xml/livewallpaper"
                android:value="true" />
        </service>
    </application>

</manifest> 
```

你有什么主意吗？我要疯了 ：（

**编辑：已解决，谢谢！！**

```
private class SendAsyncTask extends AsyncTask<String, String, String>
{
  protected String doInBackground(String... status)
  {
     String result = "";
     try
     {
        String url = "my magic http-get";

        HttpClient httpclient = new DefaultHttpClient();
        HttpResponse response = httpclient.execute(new HttpGet(url));
        if(response != null && response.getEntity() != null)
        {
           InputStream stream = response.getEntity().getContent();

           try
           {
              // parse an XML with libgdx ...
              XmlReader xmlReader = new XmlReader();
              Element root = xmlReader.parse(stream);

              Array<Element> childs = root.getChildrenByNameRecursively("mykids");
              for (Element child: childs)
              {
                 Element myelement = child.getChildByName("name");
                 //do something...
              }
           }
           catch (Exception e)
           {
              //
           }
           finally
           {
              try
              {
                 stream.close();
              }
              catch (Exception e)
              {
                 //
              }
           }
        }
     }
     catch (Exception e)
     {
       //
     }

     return result;
  }

  protected void onPostExecute(String result)
  {
     super.onPostExecute(result);
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T01:50:50.217

您可能会得到 a [`NetworkOnMainThreadException`](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)，因为您在 a 中建立了网络连接`PreferenceFragment`，它在主 UI 线程上运行。

如果是这样，您可以将网络作业移动到后台服务。请注意，[`Service`](http://developer.android.com/reference/android/app/Service.html)它也在主 UI 线程上运行。所以你需要`Thread`里面的服务。

*附注：您似乎吞下了所有例外情况：*

```
try {
    // ...
} catch (Exception e) {
    // ... => HERE
} 
```

# dll - 实体框架 5 实体在单独的 dll 中

> ID：15214138
> 
> 赞同：2
> 
> 时间：2013-03-05T01:17:17.020
> 
> 标签：dll, .net-4.0, entity-framework-4, shared-libraries

我有一个 DLL，它是我们在许多不同项目中使用的日志记录组件。这个日志组件被设计成完全独立的，因此它必须有它的内部数据库连接字符串。在这个项目中，要求将其连接字符串复制到任何使用它的项目的 app.config 中是完全不能接受的。

多年来，这一直很好用，但现在我们发现，将其较旧的 ADO 技术与使用 EF 的新应用程序混合会导致在完成日志记录时性能非常糟糕。例如，在应用程序启动时添加单个日志条目会导致应用程序打开前延迟 > 30 秒。

所以为了解决这个问题，我重写了这个组件以使用 EF。

问题在于当前的 EF（版本 4.4，因为我们的目标是 .Net Framework 4.0）没有为 DBContext 提供允许您指定整个连接字符串的构造函数。代码尝试更改 Database.Connection.ConnectionString，但 DBContext 对象坚持在 App.Config 中查找连接字符串，即使我们给它一个新的。

我必须解决这种行为。

# java - Android - 按钮：通过意图/其他方法接收数据

> ID：15214139
> 
> 赞同：0
> 
> 时间：2013-03-05T01:17:40.307
> 
> 标签：java, android, button, android-intent

```
 E/AndroidRuntime(15518): FATAL EXCEPTION: main
 E/AndroidRuntime(15518): java.lang.RuntimeException: Unable to instantiate activity      ComponentInfo{com.cydeon.plasmamodz/com.cydeon.plasmamodz.Boots}:     java.lang.NullPointerException
E/AndroidRuntime(15518):    at    android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2224)
 E/AndroidRuntime(15518):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2358)
 E/AndroidRuntime(15518):   at android.app.ActivityThread.access$600(ActivityThread.java:154)
 E/AndroidRuntime(15518):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1248)
 E/AndroidRuntime(15518):   at android.os.Handler.dispatchMessage(Handler.java:99)
 E/AndroidRuntime(15518):   at android.os.Looper.loop(Looper.java:137)
 E/AndroidRuntime(15518):   at android.app.ActivityThread.main(ActivityThread.java:5235)
 E/AndroidRuntime(15518):   at java.lang.reflect.Method.invokeNative(Native Method)
 E/AndroidRuntime(15518):   at java.lang.reflect.Method.invoke(Method.java:511)
 E/AndroidRuntime(15518):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:795)
 E/AndroidRuntime(15518):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:562)
 E/AndroidRuntime(15518):   at dalvik.system.NativeStart.main(Native Method)
 E/AndroidRuntime(15518): Caused by: java.lang.NullPointerException
 E/AndroidRuntime(15518):   at android.app.Activity.findViewById(Activity.java:1839)
 E/AndroidRuntime(15518):   at com.cydeon.plasmamodz.Boots.<init>(Boots.java:47)
 E/AndroidRuntime(15518):   at java.lang.Class.newInstanceImpl(Native Method)
 E/AndroidRuntime(15518):   at java.lang.Class.newInstance(Class.java:1319)
 E/AndroidRuntime(15518):   at android.app.Instrumentation.newActivity(Instrumentation.java:1054)
 E/AndroidRuntime(15518):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2215)
 E/AndroidRuntime(15518):   ... 11 more 
```

话题很混乱。让我解释。在我的应用程序中，我有超过 70 个按钮仅用于一个部分。我有很多不同的部分。现在，每个按钮使用相同的布局，所以每个按钮启动相同的活动，这样我就不会创建 70 个单独的类。现在，在这个新类中，它必须显示一个图像并下载一个文件（当单击某个按钮时）对应于所选择的 bugton。所以，基本上，我需要一些方法来识别其他类中的那些按钮，并说“如果按下按钮 x，则显示图像 y，如果按下按钮 y，则显示图像 x。同样，如果按下按钮 x，下载文件y，如果按下按钮 y，请下载文件 x 等。我只是不知道如何判断在上一节课中按下了哪个按钮。我真的需要帮助。我已经工作了 2 周，这有让我停下来，我找不到答案。这实际上并不依赖于代码，我将在整个应用程序中多次使用此方法，因此我认为不需要发布任何代码。再次重申我的问题，多个按钮启动相同的活动。在那个活动中，我需要根据上一节课中按下的按钮做一些事情。谢谢。:)

编辑：这是一些代码...

BootFragment.java：

```
package com.cydeon.plasmamodz;

 import java.io.File;
 import java.io.IOException;
 import java.util.concurrent.TimeoutException;

 import com.stericson.RootTools.RootTools;
 import com.stericson.RootTools.exceptions.RootDeniedException;
 import com.stericson.RootTools.execution.CommandCapture;

 import android.app.Fragment;
 import android.content.Intent;
 import android.os.Bundle;
 import android.os.Environment;
 import android.view.LayoutInflater;
 import android.view.View;
 import android.view.ViewGroup;
 import android.widget.Button;

 public class BootFragment extends Fragment {{

    //Defining File Directory
    File directory = new File(Environment.getExternalStorageDirectory() + "/plasma/boot");
    if(directory.exists() && directory.isDirectory()){
    //Do nothing. Directory is existent 
    }else{
    //Directory does not exist. Make directory (First time app users)
    directory.mkdirs();
    }

    File bkup = new File(Environment.getExternalStorageDirectory() + "/plasma/boot/bkup");
    if(bkup.exists() && bkup.isDirectory()){
    //Do nothing. Directory is existent 
    }else{
    //Directory does not exist. Make directory (First time app users)
    bkup.mkdirs();
    }}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
     View view = inflater.inflate(R.layout.boot_frag,
                container, false);
     Button Ablue = (Button) view.findViewById(R.id.bABlue);
     Button AblueR = (Button) view.findViewById(R.id.bABlueR);
     Button Abokeh = (Button) view.findViewById(R.id.bAbokeh);

     Ablue.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
                    Intent b = new Intent(getActivity(), Boots.class);
                    b.putExtra("Dragon", R.id.bABlue);
                    BootFragment.this.startActivity(b);
            }
            });

     AblueR.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                        Intent c = new Intent(getActivity(), Boots.class);
                        c.putExtra("Xbox", R.id.bABlueR);
                        BootFragment.this.startActivity(c);
                }
                });

     Abokeh.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                        Intent d = new Intent(getActivity(), Boots.class);
                        d.putExtra("GameB", R.id.bAbokeh);
                        BootFragment.this.startActivity(d);
                }
                });

     return view;

 }} 
```

靴子.java：

```
package com.cydeon.plasmamodz;

import com.stericson.RootTools.*;
import com.stericson.RootTools.exceptions.RootDeniedException;
import com.stericson.RootTools.execution.CommandCapture;

import java.io.BufferedInputStream;
import java.io.BufferedReader;
import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.OutputStream;
import java.io.Reader;
import java.net.URL;
import java.net.URLConnection;
import java.util.List;
import java.util.concurrent.TimeoutException;

import com.cydeon.plasmamodz.R;

import android.app.ActionBar;
import android.app.Activity;
import android.app.DownloadManager;
import android.app.ProgressDialog;
import android.content.Context;
import android.content.Intent;
import android.content.pm.PackageManager;
import android.content.pm.ResolveInfo;
import android.net.Uri;
import android.os.AsyncTask;
import android.os.Build;
import android.os.Bundle;
import android.os.Environment;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.TextView;
import android.widget.Toast;

//Class for Boot Animation Blue Kindle
public class Boots extends Activity {

public static String TAG = "Boots";
Process process;

private class DownloadFile extends AsyncTask<String, Integer, String>{
    @Override
    protected String doInBackground(String... sURL) {
        try{
            URL url = new URL(sURL[0]);
            URLConnection connection = url.openConnection();
            connection.connect();
            //Shows 0-100% progress bar
            int fileLength = connection.getContentLength();

            //Download the file
            InputStream input = new BufferedInputStream(url.openStream());
            OutputStream output = new FileOutputStream("/sdcard/plasma/boot/b..ootanimation.zip");

            byte data[] = new byte[1024];
            long total = 0;
            int count;
            while ((count = input.read(data)) != -1) {
                total += count;
                //Publish the Progress
                publishProgress((int) (total * 100/fileLength));
                output.write(data, 0, count);
                }

            output.flush();
            output.close();
            input.close();
    } catch (Exception e) {

    }
    return null;
    }

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        mProgressDialog.show();
    }

    @Override
    protected void onProgressUpdate(Integer... progress){
        super.onProgressUpdate(progress);
        mProgressDialog.setProgress(progress[0]);

    }

    @Override
    protected void onPostExecute(String result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);
        mProgressDialog.dismiss();
        Context context = getApplicationContext();
        CharSequence text = "Installing. Please Wait";
        int duration = Toast.LENGTH_SHORT;

        Toast toast = Toast.makeText(context, text, duration);
        toast.show();

        if (RootTools.isBusyboxAvailable()){
            RootTools.remount("/system", "rw");
            CommandCapture command = new CommandCapture(0, "su", "sh /sdcard/plasma/scripts/boots.sh");
                try {
                    RootTools.getShell(true).add(command).waitForFinish();
                } catch (InterruptedException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                } catch (TimeoutException e) {
                    e.printStackTrace();
                } catch (RootDeniedException e) {
                    e.printStackTrace();
                }

        } else {
            RootTools.offerBusyBox(Boots.this);
        }

    }
}

ProgressDialog mProgressDialog;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.boots);
    ActionBar actionBar = getActionBar();
    actionBar.hide();
    ImageView img = (ImageView) findViewById(R.id.iv2);
    img.setImageResource(R.drawable.boot1);
    Button install = (Button) findViewById(R.id.bAInstall);
    Button rtrn = (Button) findViewById(R.id.bAReturn);
    mProgressDialog = new ProgressDialog(Boots.this);
    mProgressDialog.setMessage("Downloading..." );
    mProgressDialog.setIndeterminate(false);
    mProgressDialog.setMax(100);
    mProgressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);

    install.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            TextView creator = (TextView) findViewById(R.id.tvCreate);
            Intent bootI = getIntent();
            int dball = getIntent().getExtras().getInt("Dragon", -1);
            int xbox = getIntent().getExtras().getInt("Xbox", -1);
            int GameB = getIntent().getExtras().getInt("GameB", 1);
            if (dball != -1){
            DownloadFile downloadFile = new DownloadFile();
            downloadFile.execute("http:\\correspondingurl");
            creator.setText("Dragon Ball");
            }if (xbox != -1){
                DownloadFile downloadFile = new DownloadFile();
                downloadFile.execute("http:\\correspondingurl");
                creator.setText("Xbox");
            }if (GameB != -1){
                DownloadFile downloadFile = new DownloadFile();
                downloadFile.execute("http:\\correspondingurl");
                creator.setText("GameBoy");
            }

            }

        }
    );

    rtrn.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            finish();
        }
    });

    }

} 
```

我尝试了许多不同的方法。这是我最近的尝试。他们都没有工作。

猫日志：看上面...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T01:49:35.730

通过 Intent.putExtra() 将所需信息传递给 Intent 中的新活动（参见[http://developer.android.com/reference/android/content/Intent.html](http://developer.android.com/reference/android/content/Intent.html)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T05:10:24.900

您可以尝试为每个按钮分配一个`unique name/id`. 单击 Button 时，检索其名称并使用 .将其传递给新活动`Intent.putExtra()`。在新活动中，一旦您掌握了这些信息，您就可以相应地执行所需的功能。

示例代码：

在 Button 的 xml 中，执行此操作

```
 android:onClick="OnButtonClick" 
```

在 First Activity 的代码中，定义`OnButtonClick`为：

```
 public void OnButtonClick(View v) {
      switch (v.getId()) {
        case R.id.button1:
           doSomething1(); //Intent.putExtra(ButtonID)
            break;
        case R.id.button2:
           doSomething2();
           break;
     } 
```

}

`switch-case`在第二个 Activity 中，检索此 ID 并根据 Button 的 ID 执行类似的操作。

希望这是有道理的！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T07:05:58.490

在您的片段类中，执行以下操作：

```
public class BootFragment extends Fragment implements android.view.View.OnClickListener{

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,Bundle savedInstanceState) {
        Button Ablue = (Button) view.findViewById(R.id.bABlue);
        Button AblueR = (Button) view.findViewById(R.id.bABlueR);
        Button Abokeh = (Button) view.findViewById(R.id.bAbokeh);

       Ablue.setOnClickListener(this);
       AblueR.setOnClickListener(this);
       Abokeh.setOnClickListener(this);
    }

    @Override
    public void onClick(View v) {
        int btnId = v.getId();
        Intent d = new Intent(getActivity(), Boots.class);
        d.putExtra("BUTTON_ID", btnId);
        startActivity(d);
    }
} 
```

在 Boots.java 中，执行以下操作：

```
public class Boots extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {

        int btnId = getIntent().getExtras().getInt("BUTTON_ID", -1);
        switch(btnId){
           case: R.id.your_btn_id_1:
           // logic for your button press
           break;
           case: R.id.your_btn_id_2:
           // logic for your button press
           break;
           case: R.id.your_btn_id_n:
           // logic for your button press
           break;
        }
    }
} 
```

注意：您应该为布局 xml 文件中的每个按钮提供唯一的 id

# c# - 重构 - 查看记录是否存在然后获取记录

> ID：15214140
> 
> 赞同：0
> 
> 时间：2013-03-05T01:17:53.347
> 
> 标签：c#, refactoring, database-connection

我试图避免两次调用数据库。我需要检查是否存在记录，如果存在，则用数据填充我的视图。我有以下代码：

```
 if (Presenters.PayeePresenter.GetByID(id) != null)
        {
            view = BLL.Presenters.PayeePresenter.GetByID(id);

            msg.Success = true;
            msg.Text = "Record Found";
        } 
```

我怎样才能对数据库进行最少的调用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T01:20:33.527

将结果存储在变量中，并在分配属性之前检查其是否为空。

```
var obj = Presenters.PayeePresenter.GetByID(id); //Assuming this is database method call
if (obj!= null)
{
   //use obj.Properties to fill custom object or any additional logic
   msg.Success = true;
   msg.Text = "Record Found";
} 
```

# php - 使用 sharer.php 方法的动态 facebook 分享页面

> ID：15214144
> 
> 赞同：0
> 
> 时间：2013-03-05T01:18:27.357
> 
> 标签：php, javascript, facebook, facebook-opengraph

我创建 facebook 分享按钮的方法是： **1\. 创建 share.php（facebook 在这个假网站中捕获元数据并重定向到我想要分享的实际网站**）

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fb="https://www.facebook.com/2008/fbml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title><?php echo $_GET['title'];?></title>
        <meta property="og:url" content="<?php echo $_GET['url'];?>" />
        <meta property="og:title" content="<?php echo $_GET['title'];?>" />
        <meta property="og:description" content="<?php echo $_GET['title'];?> "/>
        <? 
        if (isset($_GET['leftImg']) && $_GET['leftImg'] != 'undefined') {
            echo '<meta property="og:image" content="'.$_GET['leftImg'].'"/>';
        }
        if (isset($_GET['rightImg']) && $_GET['rightImg'] != 'undefined') {
            echo '<meta property="og:image" content="'.$_GET['rightImg'].'"/>';
        }
        ?>
    </head>
    <body>
        <script>
            window.location.href = "<?php echo $_GET['redirect'];?>";
        </script>
    </body>

</html> 
```

**2\. share.php中需要的数据是从主页面传过来的**

```
 window.open('http://www.facebook.com/sharer.php?u=' + encodeURIComponent('http://' + window.location.hostname + '/share.php?url=http://yahoo.com&title=test&redirect=..&leftImg=......&' ),'sharer','toolbar=0,status=0,width=826px,height=536'); 
```

问题是，**og:url 应该是什么**？有两个链接：share.php 和我要分享的实际网站，

**如果我使用 share.php?title=...&description=.. ，我仍然需要特定的 url** ，这很奇怪：它将是 share.php?url=share.php?url=share.php 最终我仍然无法引用正确的分享网址

**如果我使用实际的网站**，它不能收集任何元数据，因为我的想法是所有元数据都在 share.php

如何解决问题？谢谢

**!!!!!!!!!!!!!!!2013 年 11 月 4 日更新:!!!!!!!!!!!!!!!**

我找出了根本问题，它是由不同的图像来源引起的：

```
eg. http://www.tekxon.com.pk/sites/all/themes/bluemasters/images/gallery/3.jpg 
```

这张图片是由 Facebook 在共享页面上按预期捕获的，工作完美。

```
eg. http://54.251.107.161/source/test2/2012/05/07/0/3/A/Content/15/Pg015.png 
```

但是，托管在我的服务器中的此图像并未像第一次那样显示在共享页面上，而是仅在我重新加载页面时才显示。* 虽然它没有显示在分享页面上，但图像显示并存在于我的 Facebook 主页的分享内容中。

为什么会出现这种情况，是不是防火墙设置不正确造成的？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T21:31:56.243

`og:url`应该是您要重定向到的网站

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T18:24:09.680

`og:url`应该是包含元数据的网站 - 在这种情况下，您应该使用重定向和元数据或参考share.php **?url=the_url 创建**网站。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T18:02:10.537

我认为您只是被`og:url`参数误导了：

> `og:url`- 对象的规范 URL，将在图中用作其永久 ID

听起来完全合法，*但是*：当您指定该参数时，Facebook 会从该 URL 获取元数据，而不是从当前页面获取。这就是为什么当您将引用的 URL 放在那里时没有元数据的原因。还有那个讨厌的原因`share.php?url=share.php?url=share.php...`。

您正在尝试使用以下`href`属性完成：[https ://developers.facebook.com/docs/reference/plugins/like/](https://developers.facebook.com/docs/reference/plugins/like/)

我不确定您正在构建什么，但也许这样您甚至可以将共享按钮集成到您重定向到的页面中。然后你仍然设置那个假的元数据页面，然后把它扔到`og:url`那个（以前重定向到的）页面中:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T07:34:27.847

你可以关注演示，祝你好运。

[http://www.kimwoodbridge.com/how-to-create-your-one-facebook-share-url/](http://www.kimwoodbridge.com/how-to-create-your-one-facebook-share-url/)

顺便说一句，在你测试新方法之前。你最好清除fb的会话。 [http://developers.facebook.com/tools/debug/og/object?q=http://yourwebsite.com](http://developers.facebook.com/tools/debug/og/object?q=http://yourwebsite.com)

# xcode - 从终端运行 Xcode 项目测试

> ID：15214147
> 
> 赞同：0
> 
> 时间：2013-03-05T01:18:45.923
> 
> 标签：xcode

我很想知道在 Xcode 中按下 cmd-u （或从菜单中选择测试）时，是否有一种方法可以实现相同的效果。

我正在为一个应用程序编写一些 UI 测试，并且很想自动化整个事情。

到目前为止，任何通过 applescript 进行自动化的尝试都非常不成功（我告诉自己模拟按下 2 个按钮有多难......）；所以我认为也许有一种正确的方法来运行命令行命令并让模拟器弹出并运行测试，就像在 Xcode 中一样。

尽管如此，如果知道这个功能，我会在网上找到一些东西，但似乎没有办法通过控制台模拟测试命令。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T02:23:44.300

你检查过 xcodebuild 命令吗？

手册页说：

> buildaction ... 指定要在目标上执行的构建操作（或多个操作）。可用的构建操作有：
> 
> ```
>  test   Test a scheme from the build root (SYMROOT).  This requires specifying a scheme. 
> ```

所以，也许这会做你想要的。

# html - 自动完成关闭

> ID：15214148
> 
> 赞同：1
> 
> 时间：2013-03-05T01:18:59.637
> 
> 标签：html

我想让输入字段安全，因此强制关闭自动完成功能。

1）但是使用现代浏览器的智能用户可以动态编辑网页并启用自动完成功能。(f12)

完成我的任务的最佳方法是什么。客户端脚本无法解决我的解决方案？

任何想法和解决方案将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T01:20:48.197

你无法阻止它。*您对浏览器或用户*没有足够的控制权来有效地阻止不想被阻止的人。您可以使用的最好的工具是您拥有的工具（关闭自动完成功能、一些 JavaScript 等），并将绕过此功能的用户数量保持在最低限度，但不为零。

更不用说，这真的取决于用户的选择。如果他们想为他们的浏览器自动填充，那就是他们的电话。如果他们想让将敏感信息放入 Web 表单变得非常简单，那就这样吧。启用 JavaScript、样式表、屏幕分辨率等也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-05T10:57:16.977

**请在您的 html 中尝试以下选项，而不是 autocomplete="off"**

```
<input type="text" name="firstName"  autocomplete="new-password"/> 
```

这对我来说很好，请尝试此解决方案。

# hibernate - Hibernate 错误：在 hbm2java 代码上混合可空和不可空属性

> ID：15214151
> 
> 赞同：5
> 
> 时间：2013-03-05T01:19:11.930
> 
> 标签：hibernate, hibernate-annotations, hbm2java, hibernate3-maven-plugin

我正在使用目标`hibernate3-maven-plugin`查询 Oracle10g 数据库并生成带有 JPA 注释的 java 类`hbm2java`。然后我使用spring来配置一个扫描注解代码的会话工厂。

在*与*. `hbm2java`_

 *数据库定义表 FOO 和 BAR 如下：

```
CREATE TABLE FOO (
  STATUS_CODE ... NOT NULL,
  REASON_CODE ...);

ALTER TABLE FOO ADD (
  CONSTRAINT FK_BAR
  FOREIGN KEY (REASON_CODE, STATUS_CODE)
  REFERENCES BAR(REASON_CODE, STATUS_CODE));

CREATE TABLE BAR (
  STATUS_CODE ... NOT NULL,
  REASON_CODE ... NOT NULL);

ALTER TABLE BAR (
  PRIMARY KEY (REASON_CODE, STATUS_CODE)); 
```

所以表 FOO 有两列是表 BAR 的外键。FOO.STATUS_CODE 列必须为非空，但 FOO.REASON_CODE 列可能为空。这里的逻辑是 FOO 需要一个状态，但不是每个状态都需要一个原因。

表 BAR 具有列 BAR.REASON_CODE 和 BAR.STATUS_CODE，它们都是非空的。这里的逻辑将各种（但不是全部）状态代码的原因联系起来。因此，例如，如果状态为“已取消”，则原因可能是“欺诈”、“无能”等。

请注意，诸如“活动”之类的状态没有任何关联的原因，因此在表 BAR 中不存在，但它可以作为状态代码出现在表 FOO 中（没有关联的原因代码）。但是，如果 FOO 中的一行具有“已取消”状态代码，则它还必须具有表 BAR 中为该状态定义的原因代码之一。

所以表定义对我来说似乎很好（尽管我不是数据库专家）。

现在`hbm2java`maven 中的目标为表 FOO 生成以下代码：

```
private Bar bar;

@ManyToOne(fetch=FetchType.LAZY)
@JoinColumns( { 
    @JoinColumn(name="REASON_CODE", referencedColumnName="REASON_CODE"), 
    @JoinColumn(name="STATUS_CODE", referencedColumnName="STATUS_CODE", nullable=false) } )
public Bar getBar() {
    return this.bar;
} 
```

请注意，这里只有 STATUS_CODE 列不可为空。

但是，当创建休眠会话工厂 bean 并扫描带注释的类时，会生成*“不允许在属性中混合可空和不可空列”*异常。

```
Caused by: org.hibernate.AnnotationException: Mixing nullable and non nullable columns in a property is not allowed: com.whatever.domain.LnrPermissionlnrPermStatusReason
  at org.hibernate.cfg.Ejb3Column.checkPropertyConsistency(Ejb3Column.java:514)
  at org.hibernate.cfg.AnnotationBinder.bindManyToOne(AnnotationBinder.java:2568)
  at org.hibernate.cfg.AnnotationBinder.processElementAnnotations(AnnotationBinder.java:1527)
  at org.hibernate.cfg.AnnotationBinder.processIdPropertiesIfNotAlready(AnnotationBinder.java:769)
  at org.hibernate.cfg.AnnotationBinder.bindClass(AnnotationBinder.java:733)
  at org.hibernate.cfg.AnnotationConfiguration.processArtifactsOfType(AnnotationConfiguration.java:636) 
```

**问题**

这是休眠注释处理代码引发的有效错误（在这种情况下，数据库中的表定义需要更改），还是无效？如果是后者，我可以将会话工厂代码配置为忽略此类错误吗？

**配置**

Maven依赖：

*   org.hibernate/hibernate-core/3.5.6-Final
*   org.hibernate/hibernate-annotations/3.5.6-Final
*   org.springframework/spring-orm/3.1.2-RELEASE

Spring应用程序上下文：

```
<bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
    <property name="dataSource" ref="dataSource"/>
    <property name="packagesToScan" value="com.whatever.domain" />
</bean> 
```*

# java - 我可以从命令访问 javac 和 java，但不能访问同一目录中的 .class 文件和 .java 文件

> ID：15214152
> 
> 赞同：0
> 
> 时间：2013-03-05T01:19:13.163
> 
> 标签：java, compilation, javac

我正在尝试使用 cmd 使用 javac 编译 .class 文件。我已经设置了 PATH 变量，我可以通过从开始菜单中打开 cmd 来访问 javac.exe 和 java.exe。

我在与 javac.exe 和 java.exe 相同的文件夹中有一个 .class 文件。但是，由于某种原因，找不到该文件。虽然我可以每次使用 cd 手动设置目录，但每次我想编译 .class 文件时输入路径有点乏味。

我每次都需要设置目录吗？还是我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T01:41:44.937

操作系统会查找命令或更具体的可执行文件，例如 Windows 中的 .BAT 文件、.EXE 文件、.COM 或 .CMD。当您执行 Java.exe 时，窗口首先查看本地目录，然后在每个目录中的 PATH 中搜索可执行文件名“java.exe”。之后是查找您输入的变量（如 file.class 或 file.java）的 Java.exe，它不会为此访问 Windows 路径变量。

所以你必须要么在你有 .class/.java 文件的文件夹上，要么写下那个文件的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T19:02:37.587

类路径必须设置为当前目录

`javac -cp path/to path/to/JavaSourceFile.java`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T02:14:52.013

如果要编译具有 .class 依赖项的 .java，请将 javac 运行为

```
javac -cp <path to .class root folder> <path to .java> 
```

不带参数运行 javac 以查看简短帮助，或访问[http://docs.oracle.com/javase/1.4.2/docs/tooldocs/windows/javac.html](http://docs.oracle.com/javase/1.4.2/docs/tooldocs/windows/javac.html)获取完整说明

# php - 选择使用 Zend DB 连接两个表

> ID：15214154
> 
> 赞同：1
> 
> 时间：2013-03-05T01:19:37.537
> 
> 标签：php, database, zend-framework, select, join

我有 2 个表：用户和 user_profile：

```
users: (user_id, email, password, created_date)

user_profile: (user_id, first_name, last_name, address, birthday) 
```

使用 Zend DB 选择我想加入这两个表（像这样）

```
INNER JOIN `users` ON `users`.`user_id`=`user_profile`.`user_id` 
```

现在的问题是我不知道如何使用 Zend_Db 通过 Select join 来实现这一点。请帮帮我。非常感谢！！！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T04:47:38.193

```
$select = $this->select()
                ->from('users')
                ->joinLeft(array('userprofile'=>'user_profile'),'users.user_id = userprofile.user_id')
                ->where('users.user_id = ?', 1); 
```

这就是在 zend 中连接两个表的方式。查看 ZF 手册以了解 zend 连接[zend.db.select.building.join的高级用法](http://framework.zend.com/manual/1.12/en/zend.db.select.html#zend.db.select.building.join)

# c++ - 在MongoDB中查询字符串的中间？

> ID：15214157
> 
> 赞同：1
> 
> 时间：2013-03-05T01:19:47.090
> 
> 标签：c++, mongodb

我需要对包含时间戳字符串（“YYYYMMDD:HH:MM:SS.SSSS”）的集合运行查询。我想查找小时小于 9 小时和大于 14 小时的所有文档。SQL 提供了 MID() 函数，但我找不到等效函数。如何在 C++ 中运行此查询？如果您不知道如何在 C++ 中使用，但在 mongo shell 中告诉我，我也许可以将其转换为 C++。

**更新** 使用下面JohnnyHK的建议，我尝试了：

```
BSONObj queryafter = BSONObjBuilder().appendRegex("date", "........:0[0-8]").obj();
BSONObj queryafter = BSONObjBuilder().appendRegex("date", "........:[17-23]").obj();
c.update(dbcol, Query(querybefore), BSON("$set"<<BSON("noise"<<"true")), false, true); 
```

它编译但没有正确过滤。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T01:27:42.357

它不是非常优雅，但是您可以在 shell 中使用正则表达式来执行此操作：

```
db.test.find({ts: /....:..:..:0[5-8]/}) 
```

在 C++ 驱动程序中，您将使用以下内容构建查询对象：

```
BSONObj query = BSONObjBuilder().appendRegex("ts", "....:..:..:0[5-8]").obj(); 
```

**更新**

对于您的新要求，它会涉及更多，但仍然可行：

```
BSONObjBuilder().appendRegex("ts", "^........:(0[0-8]|1[5-9]|2[0-3]):..:").obj(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T01:28:40.063

你可以用 C++ 编写你自己的小方法来做到这一点。如果您有一个字符串`"YYYY:MM:DD:HH:MM:SS.SSSS"`，那么您可以围绕`:`using`strtok`或对其进行标记`stringstream`。然后使用`atoi`将小时数转换为`int`，最后与 比较`<9 & >4`。

[这](http://www.cplusplus.com/reference/cstring/strtok/)是一个 strtok 示例，[这](https://stackoverflow.com/questions/236129/splitting-a-string-in-c)是一个 stringstream 示例。

编辑：如果您对字符串中小时的位置有信心（您必须是对的）那么您也可以在没有 for 循环的情况下这样做：

```
string timestamp = yourTimestamp;
int hours = atoi(timestamp.substr(12, 2).c_str())
if (hours < 9 && hours > 4)
    your stuff 
```

解释是，substr 包含小时的部分，将其转换为 ac 字符串并转换为 int。使用小时数进行比较。

# python - python：如何删除'$'？

> ID：15214161
> 
> 赞同：2
> 
> 时间：2013-03-05T01:20:16.443
> 
> 标签：python

我要做的就是删除美元符号'$'。这看起来很简单，但我真的不知道为什么我的代码不起作用。

```
import re
input = '$5'
if '$' in input:
    input = re.sub(re.compile('$'), '', input)
    print input 
```

输入仍然是“$5”而不是“5”！任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T01:21:01.303

尝试`replace`改用：

```
input = input.replace('$', '') 
```

正如 Madbreaks 所说，`$`意味着匹配正则表达式中的行尾。

这是一个方便的正则表达式链接： http: [//docs.python.org/2/library/re.html](http://docs.python.org/2/library/re.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-05T01:22:21.973

在这种情况下，我会使用`str.translate`

```
>>> '$$foo$$'.translate(None,'$')
'foo' 
```

并出于基准测试目的：

```
>>> def repl(s):
...     return s.replace('$','')
... 
>>> def trans(s):
...     return s.translate(None,'$')
... 
>>> import timeit
>>> s = '$$foo bar baz $ qux'
>>> print timeit.timeit('repl(s)','from __main__ import repl,s')
0.969965934753
>>> print timeit.timeit('trans(s)','from __main__ import trans,s')
0.796354055405 
```

和之间有许多不同之`str.replace`处`str.translate`。最值得注意的是，这`str.translate`对于将 1 个字符与另一个字符进行切换而`str.replace`将 1 个子字符串替换为另一个字符很有用。因此，对于诸如我想删除所有字符之类的问题`a,b,c`，或者我想更改`a`为`d`，我建议`str.translate`。相反，诸如“我想`abc`用`def`”替换子字符串之类的问题非常适合`str.replace`.

请注意，您的示例不起作用，因为`$`在正则表达式中具有特殊含义（它在字符串末尾匹配）。要使其与正则表达式一起使用，您需要转义`$`：

```
>>> re.sub('\$','',s)
'foo bar baz  qux' 
```

工作正常。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T01:27:13.270

$ 是正则表达式中的特殊字符，翻译为“字符串结尾”

如果你想从字面上使用它，你需要转义它

尝试这个：

```
import re
input = "$5"
if "$" in input:
    input = re.sub(re.compile('\$'), '', input)
    print input 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T01:30:37.527

您需要转义美元符号 - 否则 python 认为它是一个锚[http://docs.python.org/2/library/re.html](http://docs.python.org/2/library/re.html)

```
import re
fred = "$hdkhsd%$"
print re.sub ("\$","!", fred)
>> !hdkhsd%! 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-05T01:22:40.863

除了其他答案，您还可以使用[`strip()`](http://docs.python.org/2/library/stdtypes.html#str.strip)：

```
input = input.strip('$') 
```

# c - 在 windows 中导入 C 库

> ID：15214170
> 
> 赞同：1
> 
> 时间：2013-03-05T01:20:51.923
> 
> 标签：c, cs50

真正的 C 语言基本程序，但出现以下错误：

> tcc：错误：未定义的符号“GetFloat”

有什么问题，我该如何解决？我将 cs50.c 和 cs50.h 放在与我的脚本相同的目录中。以下是我的主要文件：

```
#include "cs50.h"
#include <stdio.h>

int main(void)
{   
    printf("enter change owed: ");
    float x = GetFloat();
    printf("you entered %f\n", x);
} 
```

这是cs50.h

```
/****************************************************************************
 * CS50 Library 4
 * https://manual.cs50.net/Library
 *
 * Based on Eric Roberts' genlib.c and simpio.c.
 *
 * Copyright (c) 2011,
 * Glenn Holloway <holloway@eecs.harvard.edu>
 * David J. Malan <malan@harvard.edu>
 * All rights reserved.
 *
 * BSD 3-Clause License
 * http://www.opensource.org/licenses/BSD-3-Clause
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are
 * met:
 *
 * * Redistributions of source code must retain the above copyright notice,
 *   this list of conditions and the following disclaimer.
 * * Redistributions in binary form must reproduce the above copyright
 *   notice, this list of conditions and the following disclaimer in the
 *   documentation and/or other materials provided with the distribution.
 * * Neither the name of CS50 nor the names of its contributors may be used
 *   to endorse or promote products derived from this software without
 *   specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
 * IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED
 * TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A
 * PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 * HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
 * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 ***************************************************************************/

#ifndef _CS50_H
#define _CS50_H

#include <float.h>
#include <limits.h>
#include <stdbool.h>
#include <stdlib.h>

/*
 * Our own data type for string variables.
 */

typedef char *string;

/*
 * Reads a line of text from standard input and returns the equivalent
 * char; if text does not represent a char, user is prompted to retry.
 * Leading and trailing whitespace is ignored.  If line can't be read,
 * returns CHAR_MAX.
 */

char GetChar(void);

/*
 * Reads a line of text from standard input and returns the equivalent
 * double as precisely as possible; if text does not represent a
 * double, user is prompted to retry.  Leading and trailing whitespace
 * is ignored.  For simplicity, overflow and underflow are not detected.
 * If line can't be read, returns DBL_MAX.
 */

double GetDouble(void);

/*
 * Reads a line of text from standard input and returns the equivalent
 * float as precisely as possible; if text does not represent a float,
 * user is prompted to retry.  Leading and trailing whitespace is ignored.
 * For simplicity, overflow and underflow are not detected.  If line can't
 * be read, returns FLT_MAX.
 */

float GetFloat(void);

/*
 * Reads a line of text from standard input and returns it as an
 * int in the range of [-2^31 + 1, 2^31 - 2], if possible; if text
 * does not represent such an int, user is prompted to retry.  Leading
 * and trailing whitespace is ignored.  For simplicity, overflow is not
 * detected.  If line can't be read, returns INT_MAX.
 */

int GetInt(void);

/*
 * Reads a line of text from standard input and returns an equivalent
 * long long in the range [-2^63 + 1, 2^63 - 2], if possible; if text
 * does not represent such a long long, user is prompted to retry.
 * Leading and trailing whitespace is ignored.  For simplicity, overflow
 * is not detected.  If line can't be read, returns LLONG_MAX.
 */

long long GetLongLong(void);

/*
 * Reads a line of text from standard input and returns it as a
 * string (char *), sans trailing newline character.  (Ergo, if
 * user inputs only "\n", returns "" not NULL.)  Returns NULL
 * upon error or no input whatsoever (i.e., just EOF).  Leading
 * and trailing whitespace is not ignored.  Stores string on heap
 * (via malloc); memory must be freed by caller to avoid leak.
 */

string GetString(void);

#endif 
```

最后，这里是 cs50.c

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#include "cs50.h"

/*
 * Reads a line of text from standard input and returns the equivalent
 * char; if text does not represent a char, user is prompted to retry.
 * Leading and trailing whitespace is ignored.  If line can't be read,
 * returns CHAR_MAX.
 */

char GetChar(void)
{
    // try to get a char from user
    while (true)
    {
        // get line of text, returning CHAR_MAX on failure
        string line = GetString();
        if (line == NULL)
            return CHAR_MAX;

        // return a char if only a char (possibly with
        // leading and/or trailing whitespace) was provided
        char c1, c2;
        if (sscanf(line, " %c %c", &c1, &c2) == 1)
        {
            free(line);
            return c1;
        }
        else
        {
            free(line);
            printf("Retry: ");
        }
    }
}

/*
 * Reads a line of text from standard input and returns the equivalent
 * double as precisely as possible; if text does not represent a
 * double, user is prompted to retry.  Leading and trailing whitespace
 * is ignored.  For simplicity, overflow and underflow are not detected.
 * If line can't be read, returns DBL_MAX.
 */

double GetDouble(void)
{
    // try to get a double from user
    while (true)
    {
        // get line of text, returning DBL_MAX on failure
        string line = GetString();
        if (line == NULL)
            return DBL_MAX;

        // return a double if only a double (possibly with
        // leading and/or trailing whitespace) was provided
        double d; char c;
        if (sscanf(line, " %lf %c", &d, &c) == 1)
        {
            free(line);
            return d;
        }
        else
        {
            free(line);
            printf("Retry: ");
        }
    }
}

/*
 * Reads a line of text from standard input and returns the equivalent
 * float as precisely as possible; if text does not represent a float,
 * user is prompted to retry.  Leading and trailing whitespace is ignored.
 * For simplicity, overflow and underflow are not detected.  If line can't
 * be read, returns FLT_MAX.
 */

float GetFloat(void)
{
    // try to get a float from user
    while (true)
    {
        // get line of text, returning FLT_MAX on failure
        string line = GetString();
        if (line == NULL)
            return FLT_MAX;

        // return a float if only a float (possibly with
        // leading and/or trailing whitespace) was provided
        char c; float f;
        if (sscanf(line, " %f %c", &f, &c) == 1)
        {
            free(line);
            return f;
        }
        else
        {
            free(line);
            printf("Retry: ");
        }
    }
}

/*
 * Reads a line of text from standard input and returns it as an
 * int in the range of [-2^31 + 1, 2^31 - 2], if possible; if text
 * does not represent such an int, user is prompted to retry.  Leading
 * and trailing whitespace is ignored.  For simplicity, overflow is not
 * detected.  If line can't be read, returns INT_MAX.
 */

int GetInt(void)
{
    // try to get an int from user
    while (true)
    {
        // get line of text, returning INT_MAX on failure
        string line = GetString();
        if (line == NULL)
            return INT_MAX;

        // return an int if only an int (possibly with
        // leading and/or trailing whitespace) was provided
        int n; char c;
        if (sscanf(line, " %d %c", &n, &c) == 1)
        {
            free(line);
            return n;
        }
        else
        {
            free(line);
            printf("Retry: ");
        }
    }
}

/*
 * Reads a line of text from standard input and returns an equivalent
 * long long in the range [-2^63 + 1, 2^63 - 2], if possible; if text
 * does not represent such a long long, user is prompted to retry.
 * Leading and trailing whitespace is ignored.  For simplicity, overflow
 * is not detected.  If line can't be read, returns LLONG_MAX.
 */

long long GetLongLong(void)
{
    // try to get a long long from user
    while (true)
    {
        // get line of text, returning LLONG_MAX on failure
        string line = GetString();
        if (line == NULL)
            return LLONG_MAX;

        // return a long long if only a long long (possibly with
        // leading and/or trailing whitespace) was provided
        long long n; char c;
        if (sscanf(line, " %lld %c", &n, &c) == 1)
        {
            free(line);
            return n;
        }
        else
        {
            free(line);
            printf("Retry: ");
        }
    }
}

/*
 * Reads a line of text from standard input and returns it as a
 * string (char*), sans trailing newline character.  (Ergo, if
 * user inputs only "\n", returns "" not NULL.)  Returns NULL
 * upon error or no input whatsoever (i.e., just EOF).  Leading
 * and trailing whitespace is not ignored.  Stores string on heap
 * (via malloc); memory must be freed by caller to avoid leak.
 */

string GetString(void)
{
    // growable buffer for chars
    string buffer = NULL;

    // capacity of buffer
    unsigned int capacity = 0;

    // number of chars actually in buffer
    unsigned int n = 0;

    // character read or EOF
    int c;

    // iteratively get chars from standard input
    while ((c = fgetc(stdin)) != '\n' && c != EOF)
    {
        // grow buffer if necessary
        if (n + 1 > capacity)
        {
            // determine new capacity: start at 32 then double
            if (capacity == 0)
                capacity = 32;
            else if (capacity <= (UINT_MAX / 2))
                capacity *= 2;
            else
            {
                free(buffer);
                return NULL;
            }

            // extend buffer's capacity
            string temp = realloc(buffer, capacity * sizeof(char));
            if (temp == NULL)
            {
                free(buffer);
                return NULL;
            }
            buffer = temp;
        }

        // append current character to buffer
        buffer[n++] = c;
    }

    // return NULL if user provided no input
    if (n == 0 && c == EOF)
        return NULL;

    // minimize buffer
    string minimal = malloc((n + 1) * sizeof(char));
    strncpy(minimal, buffer, n);
    free(buffer);

    // terminate string
    minimal[n] = '\0';

    // return string
    return minimal;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T21:22:18.307

你的代码很好。我不熟悉 tcc，但您得到的错误似乎与您的#include "cs50.h" 无关，这是正确的。据我了解，您的问题与链接有关。

您需要告诉 tcc 首先从 cs50.c 和 cs50.h 构建一个中间文件

以下是我将如何使用 gcc 编译您的程序：

`gcc -c cs50.c`//创建一个通常命名为cs50.o的对象

`gcc cs50.o grdy.c -o grdy.exe`//将所有链接在一起以构建可执行文件（这需要 main 位于 grdy.c 中）

希望这可以帮助。

# perl - 如何在perl中比较两个目录及其文件

> ID：15214172
> 
> 赞同：0
> 
> 时间：2013-03-05T01:21:05.010
> 
> 标签：perl, file, compare, directory

弗雷德又来这里了，我遇到了一个小问题，希望你们能帮助我。

我正在审查期中考试并查看我在这里找到的旧文件，我想让它工作。我在这里找不到它了，但我仍然有源代码，所以我会提出另一个问题。

所以这是他的任务：编写一个 perl 脚本，将比较两个目录的常规文件差异。所有具有相同名称的常规文件都应使用 unix 函数 /usr/bin/diff -q 进行测试，这将确定它们是否相同。dir1 中的文件在 dir2 中没有类似名称的文件，其名称将打印在字符串 <<< 之后，而 dir2 中没有相应 dir1 条目的文件将以字符串 >>> 作为前缀。如果两个文件名称相同但不同，则文件名将被 > < 包围。

这是脚本：

```
#!/usr/bin/perl -w 
use File::Basename;

@files1 = `/usr/bin/find $ARGV[0] -print`;
chop @files1;
@files2 = `/usr/bin/find $ARGV[1] -print`;
chop @files2;

statement:
for ($i=1; @files1 >= $i; $i++) {
    for ($x=1; @files2 >= $x; $x++) {

        $file1 = basename($files1[$i]);
        $file2 = basename($files2[$x]);

        if ($file1 eq $file2) {
            shift @files1;
            shift @files2;
            $result = `/usr/bin/diff -q $files1[$i] $files2[$x]`;
            chop $result;

            if ($result eq "Files $files1[$i] and $files2[$x] differ") {
                print "< $file1 >\n";
                next statement;
        } else {
                print "> $file1 <\n";
            }
        } else  {
            if ( !-e "$files1[$i]/$file2") { print ">>> $file2\n";}
            unless ( -e "$files2[$x]/$file1") { print "<<< $file1\n";}
        }
    }
} 
```

这是输出：

```
> file2 <
>>> file5
<<< file1 
```

输出应该是：

```
> file1 <
> file2 <
<<< file4
>>> file5 
```

我已经检查了文件以确保它们都匹配，但仍然存在问题。如果有人可以帮助我，我将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T02:02:07.537

首先，始终使用这些：

```
use strict;
use warnings; 
```

它的学习曲线很短，但从长远来看，它们足以弥补它。

一些注意事项：

*   您应该使用[`File::Find`](http://search.cpan.org/perldoc?File%3a%3aFind)模块而不是使用系统调用。
*   你从数组索引 1 开始你的循环。在 perl 中，第一个数组索引是 0。所以你跳过第一个元素。
*   你的循环条件是错误的。`@files >= $x`意味着您将迭代到比最大索引多 1 （通常）。您想要`$x < @files`或`$x <= $#files`。
*   您应该使用`chomp`，这是一个更安全的版本`chop`。
*   更改您正在迭代的数组肯定会引起一些混乱。
*   为什么使用`if (! -e ...)`然后`unless (-e ...)`？这肯定只会增加混乱。

而这部分：

```
$file1 = basename($files1[$i]);
...
if ( !-e "$files1[$i]/$file2" ) 
```

假设`@files1`包含文件名而不仅仅是目录，这将永远不会匹配任何内容。例如：

```
$file2 = basename("dir/bar.html");
$file1 = basename("foo/bar.html"); 
-e "foo/bar.html/bar.html";         # does not compute 
```

* * *

我建议使用哈希进行查找，假设您只想匹配相同的文件名和丢失的文件名：

```
use strict;
use warnings;
use File::Find;
use List::MoreUtils qw(uniq);

my (%files1, %files2);
my ($dir1, $dir2) = @ARGV;

find( sub { -f && $files1{$_} = $File::Find::name }, $dir1);
find( sub { -f && $files2{$_} = $File::Find::name }, $dir2);

my @all = uniq(keys %files1, keys %files2);

for my $file (@all) {
    my $result;
    if ($files1{$file} && $files2{$file}) { # file exists in both dirs
        $result = qx(/usr/bin/diff -q $files1{$file} $files2{$file});
        # ... etc
    } elsif ($files1{$file}) {              # file only exists in dir1
    } else {                                # file only exists in dir2
    }
} 
```

在`find()`子程序中，`$_`表示基名称，`$File::Find::name`名称包括路径（适合与 一起使用`diff`）。检查将`-f`断言您仅在哈希中包含常规文件。

# servicestack - 如何覆盖 ServiceStack.Text 中的字符串序列化？

> ID：15214177
> 
> 赞同：3
> 
> 时间：2013-03-05T01:21:26.593
> 
> 标签：servicestack

以下内容如何覆盖 Guid 格式：

```
ServiceStack.Text.JsConfig<Guid>.SerializeFn = guid => guid.ToString(); 
```

但是这样做是为了强制空字符串为空字符串吗？

```
ServiceStack.Text.JsConfig<string>.SerializeFn = str => str ?? string.Empty; 
```

我启用了这个：

```
ServiceStack.Text.JsConfig.IncludeNullValues = true; 
```

我也尝试过*String*类而不是*字符串*原语。原始版本名为 .RawSerializeFn

有不同的解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T01:42:17.510

字符串在[ServiceStack.Text](https://github.com/ServiceStack/ServiceStack.Text)中经过特殊处理，因此您无法通过配置覆盖它们的行为。

鉴于您无法覆盖它，我能看到的唯一解决方案（除了提交拉取请求）是反映模型并用空字符串填充空属性。

# classification - 如何在 WEKA 中读取分类器混淆矩阵

> ID：15214179
> 
> 赞同：17
> 
> 时间：2013-03-05T01:21:40.093
> 
> 标签：classification, weka, decision-tree

抱歉，我是 WEKA 的新手，刚刚学习。

在我的决策树（J48）分类器输出中，有一个混淆矩阵：

```
a    b   <----- classified as
130  8     a = functional
15   150   b = non-functional 
```

*   我如何阅读这个矩阵？a和b有什么区别？
*   另外，谁能向我解释什么是域值？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-05T01:28:12.643

你读过[关于混淆矩阵的维基百科页面](http://en.wikipedia.org/wiki/Confusion_matrix)吗？在他们的示例中，矩阵周围的文本排列方式略有不同（行标签在左边而不是在右边），但你读起来是一样的。

行表示真实类，列表示分类器输出。然后，每个条目给出`<row>`被分类为的实例数`<column>`。在您的示例中，15 个 B 被（错误地）归类为 As，150 个 B 被正确归类为 B，等等。

结果，所有*正确*的分类都在左上角到右下角的对角线上。对角线之外的所有东西都是某种不正确的分类。

**编辑**：维基百科页面已经切换了行和列。有时候是这样的。在研究混淆矩阵时，请务必检查标签以查看它是否是行中的真实类、列中的预测类或其他方式。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-10-28T19:14:11.227

我会这样说：

混淆矩阵是 Weka 报告这个 J48 模型在正确和错误方面的表现。

在您的数据中，目标变量是“功能性”或“非功能性”；矩阵的右侧告诉您“a”列是功能性的，而“b”是非功能性的。

这些列告诉您模型如何对样本进行分类 - 这是模型预测的：

*   第一列包含您的模型认为是“a”的所有样本——总共 145 个
*   第二列包含您的模型认为是“b”的所有样本 - 其中 158 个

另一方面，行代表现实：

*   第一行包含所有真正为“a”的样本——总共 138 个
*   第二行包含所有真正为“b”的样本 - 其中 165 个

了解了列和行，您可以深入了解细节：

*   左上角，130，是你的模型认为是“a”的东西，实际上是“a”<-这些是正确的
*   左下角，15，是你的模型认为是“a”但实际上是“b”的东西 <- 一种错误
*   右上角，8，是你的模型认为是“b”但实际上是“a”的东西<-另一种错误
*   右下角，150 是你的模型认为是“b”的东西，实际上是“b”

所以矩阵的左上角和右下角显示了你的模型正确的东西。

矩阵的左下角和右上角显示了您的模型混淆的地方。

# javascript - 分解Javascript数组数据

> ID：15214180
> 
> 赞同：1
> 
> 时间：2013-03-05T01:21:49.290
> 
> 标签：javascript, arrays, flot

[我有一个数组，它是通过使用jquery.csv.js](https://code.google.com/p/jquery-csv/)读取 csv 文件构建的，如下所示：

```
$.ajax(
{
    type : "GET",
    url : "data.csv",
    dataType : "text",
    success : function(csv) 
    {
        myData = $.csv.toArrays(csv);
        for(var i=0; i<3; i++)
            console.log(myData[i]);
    }
}); 
```

输出示例如下所示： `["-112.5", "15", "0", "0"] ["-112.5", "10", "0", "0"] ["-112.5", "5", "112.1667", "85.3819"]`

我正在尝试使用[FLOT](http://www.flotcharts.org/)绘制此数据，因此我需要将这些值分解为 x,y 坐标，例如 [-112.5, 15], [0, 0], [-112.5, 10], [0, 0], [ -112.5, 5], [112.1667, 85.3819]

我尝试过使用嵌套的 for 循环，例如：

```
for(var i = 0; i < myData.length; i++)
{
    for(var j = 0; j < 2; j++)
    {
        newArray[i][j] = origArray[i][j];
    }
} 
```

但这会引发一个未定义的错误并查看堆栈溢出，很明显 JS 没有以我习惯的方式处理数组。

有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T01:47:22.447

该错误是因为您无法`newArray[i][j]`在定义之前设置`newArray[i]`：

```
for(var i = 0; i < origArray.length; i++){
  newArray[i] = []; // <---

  for(var j = 0; j < 2; j++){
    newArray[i][j] = origArray[i][j];
  }
} 
```

`newArray`但是，您也可以通过对每个索引进行[切片`origArray[i]`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/slice)并将[它们推送到 来`newArray`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/push)减少对索引（至少是 的索引）的担心：

```
for (var i = 0; i < origArray.length; i++) {
    var innerArray = origArray[i];

    for (var j = 0; j < innerArray.length; j += 2) {
        newArray.push(innerArray.slice(j, j + 2));
    }
} 
```

[http://jsfiddle.net/PxPzt/](http://jsfiddle.net/PxPzt/)

* * *

否则，您可以使用以下命令获取所需结果所需的索引：

```
for (var i = 0; i < origArray.length; i++){
    for (var j = 0; j < origArray[i].length; j++){
        var k = i * 2 + Math.floor(j / 2);

        if (newArray[k] == null)
            newArray[k] = [];

        newArray[k][j % 2] = origArray[i][j];
    }
} 
```

[http://jsfiddle.net/b3tGL/](http://jsfiddle.net/b3tGL/)

# node.js - Passport w/node.js Google 错误

> ID：15214182
> 
> 赞同：3
> 
> 时间：2013-03-05T01:21:56.910
> 
> 标签：node.js, express, passport.js

我正在尝试将护照与 express/node.js 应用程序一起使用。由于某种原因，我无法使用谷歌进行身份验证。谷歌给出以下错误：

错误：invalid_request
解析 OpenID 身份验证请求时出错。

```
Code:

    passport.serializeUser(function(user, done) {
  done(null, user.id);
});

passport.deserializeUser(function(user, done) {
  done(null, user);
});

var GoogleStrategy = require('passport-google').Strategy;
var UserModel = require('./models/usermodel');

passport.use(new GoogleStrategy({
    returnURL: 'http://localhost:3000/auth/google/return',
    realm: 'http:/localhost:3000'
  },
  function(identifier, profile, done) {
    profile.email = profile.emails[0].value;
    UserModel.findOneAndUpdate({email:profile.email}, {$set:profile, $inc:{logins:1}}, {upsert:true}, done);
  }
)); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T01:46:04.390

如果您没有其他理由使用 OpenID，我强烈建议您切换到 OAuth 2.0，它在[passport-google-oauth](https://github.com/jaredhanson/passport-google-oauth)中实现。

Google 似乎建议将其作为他们首选的身份验证解决方案，而他们的 OpenID 实施似乎受到的关注较少，并且会出现虚假错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-18T03:58:22.550

我知道这有多晚了，但我认为值得注意的是您的领域不正确，这可能就是您收到此错误的原因。协议后面只有一个斜杠 -`http:/local`而不是`https://local`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-11T20:10:44.197

当包含端口号时，returnURL 似乎不能很好地播放。这意味着您可能需要切换到标准端口 (80)，除非您调整操作系统以允许非 root 用户访问该端口，否则该端口在某些 linux 风格上将不起作用。不过，如上所述，在深入研究之前，我会考虑使用 OAuth 2.0。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-03T03:50:09.400

第一件事。确保您的宝石是最新的。因此，将其添加到您的 package.json 中，然后运行 ​​npm install 或 npm update。我 99% 确定这是因为一个旧的谷歌宝石打破了我的。

```
{
  "name": "Boilerplate",
  "version": "0.0.2",
  "private": true,
  "scripts": {
    "start": "node app"
  },
  "dependencies": {
    "express": "3.1.0",
    "ejs": "*",
    "stylus": "*",
    "mongoose": "*",
    "connect-mongo": "*",
    "passport": "*",
    "passport-google": "*",
    "passport-twitter": "*",
    "passport-facebook": "*",
    "passport-local": "*"
  }
} 
```

然后运行：

```
npm install 
```

这是我在 server.js 上的护照信息

```
passport.serializeUser(function(user, done) {
  done(null, user.id)
})

passport.deserializeUser(function(id, done) {
  UserModel.findOne({ _id: id }, function (err, user) {
    done(err, user)
  })
})

var GoogleStrategy = require('passport-google').Strategy;
var UserModel = require('./models/usermodel'); // A schema that is not optional 

passport.use(new GoogleStrategy({
    returnURL: 'http://localhost:3000/auth/google/return',
    realm: 'http://localhost:3000'
  },
  function(identifier, profile, done) {
    console.log(profile);
      UserModel.findOneAndUpdate({email:profile.email}, {$set:profile, $inc:{logins:1}}, {upsert:true}, done);
  }
)); 
```

# algorithm - 以最佳方式减少序列

> ID：15214183
> 
> 赞同：4
> 
> 时间：2013-03-05T01:22:02.323
> 
> 标签：algorithm

我们得到一个数字序列`a`。序列`n`的*减少*`a`被定义为替换元素`a[i]`和。`a[i+1]``max(a[i],a[i+1])`

每个归约操作的成本定义为`max(a[i],a[i+1])`。减少后得到`n-1`一个长度序列`1`。

现在我们的目标是打印给定序列的最优缩减的成本，`a`使得长度为 1 的结果序列具有最小成本。

例如：

```
1

2

3

Output :

5 
```

O(N^2) 解决方案是微不足道的。有任何想法吗？

EDIT1：人们在问我的想法，所以我的想法是成对遍历序列，并为每一对检查成本，最后以最低成本减少对。

```
1 2 3
 2 3     <=== Cost is 2 
```

所以将上面的序列减少到

```
2 3 
```

现在再次遍历序​​列，我们得到成本为 3

```
2 3
 3       <=== Cost is 3 
```

所以总成本是 2+3=5

上面的算法是 O(N^2)。这就是为什么我要求一些更优化的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T09:05:09.097

**`O(n)`解决方案：**

**高水平：**

基本思想是重复合并任何`e`小于其邻居`ns`和`nl`最小邻居的元素`ns`。这产生了最小的成本，因为合并的成本和结果都是`max(a[i],a[i+1])`，这意味着没有合并可以使元素比当前更小，因此最便宜的合并可能`e`是 with `ns`，并且该合并不会增加任何其他的成本可能的合并。

这可以通过一次通过算法来完成，方法是将数组中的一堆元素按降序排列。我们将当前元素与它的两个邻居（一个是堆栈的顶部）进行比较，并执行适当的合并，直到我们完成。

**伪代码：**

```
stack = empty
for pos = 0 to length
  // stack.top > arr[pos] is implicitly true because of the previous iteration of the loop
  if stack.top > arr[pos] > arr[pos+1]
    stack.push(arr[pos])
  else if stack.top > arr[pos+1] > arr[pos]
    merge(arr[pos], arr[pos+1])
  else while arr[pos+1] > stack.top > arr[pos]
    merge(arr[pos], stack.pop) 
```

**Java代码：**

```
Stack<Integer> stack = new Stack<Integer>();
int cost = 0;
int arr[] = {10,1,2,3,4,5};
for (int pos = 0; pos < arr.length; pos++)
  if (pos < arr.length-1 && (stack.empty() || stack.peek() >= arr[pos+1]))
    if (arr[pos] > arr[pos+1])
      stack.push(arr[pos]);
    else
      cost += arr[pos+1]; // merge pos and pos+1
  else
  {
    int last = Integer.MAX_VALUE; // required otherwise a merge may be missed
    while (!stack.empty() && (pos == arr.length-1 || stack.peek() < arr[pos+1]))
    {
      last = stack.peek();
      cost += stack.pop(); // merge stack.pop() and pos or the last popped item
    }
    if (last != Integer.MAX_VALUE)
    {
      int costTemp = Integer.MAX_VALUE;
      if (!stack.empty())
        costTemp = stack.peek();
      if (pos != arr.length-1)
        costTemp = Math.min(arr[pos+1], costTemp);
      cost += costTemp;
    }
  }
System.out.println(cost); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T05:38:19.427

If you don't consider it cheating to sort the list, then do it in `n log n` time and then merge the first two entries recursively. The total cost in this case will be the sum of the entries minus the smallest entry. This is optimal since

1.  the cost will be the sum of `n-1` entries (with repeats allowed)
2.  the `i`th smallest entry can appear at most `i-1` times in the cost function

The same fundamental idea works even if the list isn't sorted. An optimal solution is to merge the smallest element with its smallest neighbor. To see that this is optimal, note that

1.  the cost will be the sum of `n-1` entries (with repeats allowed)
2.  entry `a_i` can appear at most `j-1` times in the cost function, where `j` is the length of the longest consecutive subsequence containing `a_i` such that `a_i` is the maximum element of the subsequence

In the worst case, the sequence is decreasing and the time is `O(n^2)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T02:58:34.607

贪婪的方法确实有效。

您始终可以使用较小的邻居来减少最小的数字。

**证明**：我们必须在某个时候减少最小的数字。任何减少邻居都会使邻居的值至少相同（可能）更大，因此减少最小元素 a[i] 的操作将始终具有成本 c>=min(a[i-1], a[i+ 1])

现在我们需要

1.  快速查找/删除最小数字
2.  找到它的邻居

我会选择 2 个 RMQ。执行操作 2 作为二进制搜索。这给了我们 O(N * log^2(N))

**编辑：**第一个 RMQ - 值。当您删除一个元素时，会在
第二个 RMQ 中放置一些大值 - “存在”。0 或 1（值存在/不存在）。要找到 a[i] 的 [例如] 左邻居，您需要找到最大的`l`，即`sum[l,i-1] = 1`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T02:05:58.820

如果您的意思是减少“计算成本”的“成本”，即需要时间的操作`max(a[i],a[i+1])`或只是您想要计算的东西，我会感到困惑。如果是后者，那么下面的算法优于O(n^2)：

1.  对列表进行排序，或者更准确地说，定义`b[i]`st`a[b[i]]`是排序列表：如果可以使用 RADIX 排序，则为 O(n)，否则为 O(n log n)。
2.  从`i`排序列表中的倒数第二项开始：如果左/右低于 i，则执行归约：每个项目 O(1)，从 2 更新列表，总共 O(n)。

我不知道这是否是最佳解决方案，但整数的 O(n) 和 O(n log n)，否则。

编辑：意识到删除预计算步骤使其变得更加简单

# actionscript-3 - 确定是否使用 super 调用 ActionScript 方法

> ID：15214186
> 
> 赞同：6
> 
> 时间：2013-03-05T01:22:16.483
> 
> 标签：actionscript-3, super

我有一个方法，每次调用时都会记录一条消息。我希望此日志消息表明该方法是直接调用还是`super`在子类中调用。

```
class DoerOfWork {
    public function doWork():void {
        var calledWithSuper:Boolean; 

        calledWithSuper = ???;

        trace("doWork called" + (calledWithSuper ? " (with super)." : "."));
    }
}

class SlowerDoerOfWork extends DoerOfWork {
    public override function doWork():void {
        for (var i:Number = 0; i < 321684; i++) {
            // wait a moment
        }
        super.doWork();
    }
} 
```

我希望可以通过比较来确定 的类是否`this`覆盖了 的实现。`doWork``this.doWork``DoerOfWork.prototype.doWork`

不幸的是，这是不可能的。在 ActionScript 中的任何地方都无法访问未绑定的方法（规范列出了两种类型的函数：函数闭包和绑定方法）。实例上甚至没有任何属性`MethodClosure`可以识别两个是否是同一方法的绑定副本。

如何检查方法是否已被覆盖或使用任何其他方法来确定当前执行的 ActionScript 方法是使用`super`调用还是直接调用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T01:22:16.483

您可以将当前执行的函数作为`arguments.callee`. 从方法来看，这将`MethodClosure`是`DoerOfWork().doWork()`with `this`。如果`doWork()`没有被覆盖，这将等于`this.doWork`.

```
class DoerOfWork {
    public function doWork():void {
        var calledWithSuper:Boolean; 

        calledWithSuper = this.doWork == arguments.callee;

        trace("doWork called" + (calledWithSuper ? " (with super)." : "."));
    }
} 
```

如果您在非严格模式下运行，显然这将禁用当前函数的参数计数检查。（我自己没有检查过，我什至不确定如何在 IntelliJ 中禁用严格模式。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T01:22:32.393

如果您愿意使用`flash.utils.describeType()`，它包含我们需要的信息：

```
<type name="Main.as$1::SlowerDoerOfWork" base="Main.as$1::DoerOfWork"
      isDynamic="false" isFinal="false" isStatic="false">
  <extendsClass type="Main.as$1::DoerOfWork"/>
  <extendsClass type="Object"/>
  <method name="doWork" declaredBy="Main.as$1::SlowerDoerOfWork"
          returnType="void">
    <metadata name="__go_to_definition_help">
      <arg key="pos" value="1170"/>
    </metadata>
  </method>
  <metadata name="__go_to_definition_help">
    <arg key="pos" value="1103"/>
  </metadata>
</type> 
```

XML 中 each的`declaredBy`属性`<method>`使用与 相同的格式`flash.utils.getQualifiedClassName`，我们可以比较这些来确定我们的实现是否被覆盖。

```
class DoerOfWork {
    public function doWork():void {
        var calledWithSuper:Boolean; 

        var currentImplementationFrom:String
          = flash.utils.describeType(this).method.(@name=="doWork").@declaredBy;
        var thisImplementationFrom:String
          = flash.utils.getQualifiedClassName(DoerOfWork);

        calledWithSuper = currentImplementationFrom != thisImplementationFrom;

        trace("doWork called" + (calledWithSuper ? " (with super)." : "."));
    }
} 
```

# python - 从 Python 访问 802.11 无线管理帧

> ID：15214189
> 
> 赞同：8
> 
> 时间：2013-03-05T01:22:25.200
> 
> 标签：python, linux, wifi, scapy, tshark

从 Linux 上的 Python 我想嗅探 802.11 管理“探测请求”帧。这可以从 Scapy 中实现，如下所示：

```
# -*- coding: utf-8 -*-
from scapy.all import *

def proc(p):
        if ( p.haslayer(Dot11ProbeReq) ):
                mac=re.sub(':','',p.addr2)
                ssid=p[Dot11Elt].info
                ssid=ssid.decode('utf-8','ignore')
                if ssid == "":
                        ssid="<BROADCAST>"
                print "%s:%s" %(mac,ssid)

sniff(iface="mon0",prn=proc) 
```

或者像这样来自 tshark：

```
tshark -n -i mon0 subtype probereq -R 'wlan.fc.type_subtype eq 4' -T fields -e wlan.sa -e wlan_mgt.ssid 
```

我们可以重定向来自 tshark 的输出，并用一些 Python 来处理它（不漂亮，但它可以工作）。

然而，这两个选项都有 GPL 许可，这使得潜在的商业项目变得棘手。因此，我试图在 Python 中为这个特定问题找出一个“低级”解决方案。从谷歌我已经设法制定出两个潜在的尝试方向：

1.  Pcap 库：似乎有三个可用于 Python 的 pcap 库： [pylibpcap](http://sourceforge.net/projects/pylibpcap/)、[pypcap](http://code.google.com/p/pypcap/)和[pcapy](http://www.darknet.org.uk/2007/12/pcapy-python-interface-to-libpcap/)。我不太确定如何将上述功能合并到这些中。任何示例代码或解决方案都会很棒。

2.  原始套接字：PF_PACKET：“数据包套接字用于在设备驱动程序（OSI 第 2 层）级别接收或发送原始数据包。它们允许用户在物理层之上的用户空间中实现协议模块。”

这听起来可能是另一种选择，完全绕过 pcap。我听说这甚至可能是一种更好的方法，消除了 pcap 库的开销。不过，我不确定从哪里开始解决这个问题。

解决此问题的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-06T00:25:51.200

我设法解决了这个问题。这是我经历的过程：

1.  捕获一些 802.11 管理“探测请求”帧：

    ```
    tshark -n -i mon0 subtype probereq -c 5 -w probe.pcap 
    ```

2.  了解 RadioTap

    阅读[RadioTap](http://www.radiotap.org/)文档，我意识到 RadioTap 帧由以下字段组成：

    ```
    it_version (2 bytes) - major version of the radiotap header is in use. Currently, this is always 0
    it_pad (2 bytes) - currently unused 
    it_len (4 bytes) - entire length of the radiotap data, including the radiotap header
    it_present (8 byte) - bitmask of the radiotap data fields that follows the radiotap header 
    ```

    因此，it_len 允许我们定位在 radiotap 数据之后的 802.11 帧的开头。

3.  Python中的编码解决方案

    我从我在上一篇文章中找到的三个 pcap 库选项中选择使用[pylibpcap](http://sourceforge.net/projects/pylibpcap)，并发现了用于解析 802.11 帧的[dpkt模块。](https://code.google.com/p/dpkt/)文档非常薄，因此通过在 Python 解释器中运行，我设法编写了以下代码，以从我们的捕获文件中提取 MAC、探测 SSID 和信号强度：

    ```
    f = open('probe.pcap')
    pc = dpkt.pcap.Reader(f)
    dl=pc.datalink()
    if pc.datalink() == 127: #Check if RadioTap
            for timestamp, rawdata in pc:
                    tap = dpkt.radiotap.Radiotap(rawdata)
                    signal_ssi=-(256-tap.ant_sig.db)        #Calculate signal strength
                    t_len=binascii.hexlify(rawdata[2:3])    #t_len field indicates the entire length of the radiotap data, including the radiotap header.
                    t_len=int(t_len,16)                     #Convert to decimal
                    wlan = dpkt.ieee80211.IEEE80211(rawdata[t_len:])
                    if wlan.type == 0 and wlan.subtype == 4: # Indicates a probe request
                        ssid = wlan.ies[0].info
                        mac=binascii.hexlify(wlan.mgmt.src)
                        print "%s, %s (%d dBm)"%(mac,ssid,signal_ssi) 
    ```

# html - 无法停止声音和重置时间

> ID：15214190
> 
> 赞同：0
> 
> 时间：2013-03-05T01:22:26.240
> 
> 标签：html, audio

我的页面上有多个 html5 音频播放器实例，我使用 jQuery fadeIn() fadeOut() 来确定要播放的歌曲。单击指向其他页面的链接时，我将当前播放的声音淡出音量，然后停止，然后将进度重置为 0 秒，然后页面（连同音频播放器）淡出，新页面淡入。我'我能够淡出音量，但由于某种原因我无法将计时器重置为 0 秒：

```
<script>
$('.link').on('click', function(e){
    $('audio').currentTime = 0; /*reset timer*/
    displayNone();   /*fade out current page*/
    $(this.getAttribute("href")).fadeIn();  /*fade in target page*/
    stopAudio();
});

function displayNone() {
    $('.pagecontainer>div').fadeOut();
}

function stopAudio() { //fade out any current audio
    $('audio').animate({volume: 0}, 1000);
    setTimeout(function(){('audio').pause()},1000) /*stop audio after fading out volume*/
}

$('.sound').on('play', function () {
    $('audio').animate({volume: 1}, 100);  /*reset volume to 100% after clicking play button on player*/
});

</script>
....
....

<a href="page1" class="link">page 1</a>
<a href="page2" class="link">page 2</a>
<a href="page3" class="link">page 3</a>

<div class="pagecontainer">

    <div id="page1">
        <audio controls class="sound">
            <source src="music1.mp3"/>
            <source src="music1.ogg"/>
        </audio>
    </div>

    <div id="page2">
        <audio controls class="sound">
            <source src="music2.mp3"/>
            <source src="music2.ogg"/>
        </audio>
    </div>

    <div id="page3">
        <audio controls class="sound">
            <source src="music3.mp3"/>
            <source src="music3.ogg"/>
        </audio>
    </div>

</div> 
```

例如：

*   我目前在第 1 页，music1.mp3 播放 10 秒

*   我在没有停止music1.mp3的情况下点击page2的链接，music1.mp3音量随着page1淡出，page2随着music2.mp3的音乐播放器淡入成功

*   假设 10 秒后，我单击第 1 页的链接返回第 1 页

*   music1.mp3 的播放器仍在播放（进度为 20 秒）并且没有停止，但现在音量为零

我不明白为什么 music1.mp3 没有将其计时器重置为 0 秒并完全停止。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T01:43:48.293

可能是因为`.currentTime`不是 jQuery 方法。尝试类似的东西`$('audio')[0].currentTime`。

编辑：

```
$('audio').each(function() {
    $(this).currentTime = 0;
}); 
```

# sql - 在插入和更新时卡住触发器

> ID：15214191
> 
> 赞同：1
> 
> 时间：2013-03-05T01:22:29.987
> 
> 标签：sql, triggers, sql-server-2008-r2

感谢您关注这个问题。我正在使用 MSSQL Server Express。我正在尝试编写一个触发器，它将根据客户的年龄和收入更新他们的资格。我用年龄写了这部分，但我完全被资格部分困住了。我有声明，可以根据收入、周期（月/年）、家庭规模选择不符合条件的客户

```
Select ClientID,c.HshldSize,c.MonthlyYearly,c.AnnualHshldIncome,i.SeniorMo,
       StatusID,i.HshldSize
from Clients c 
join IncomeEligibility i on c.HshldSize = i.HshldSize
where c.HshldSize= i.HshldSize and c.AnnualHshldIncome >= i.SeniorMo 
      and StatusID in (1,2) 
      and c.CategCode = 'SR' and MonthlyYearly ='month' 
```

此选择显示所有不符合条件的客户响应示例

```
 ClientID HshldSize   MonthlyYearly   AnnualHshldIncome  SeniorMo StatusID HshldSize
    28       1             month         1095                977    2         1
    51       1             month         1253                977    1         1
    63       1             month         1300                977    1         1
    73       1             month         1200                977    1         1
    96       1             month         1300                977    1         1
    101      1             month         1255                977    1         1
    160      2             month         1800                1513   1         2 
```

收入资格看起来像这样

```
HshldSize   AKGuidline  WomanChildYr    WomanChildMo    SeniorYr    SeniorMo    PFDYr   PFDMo
1   9020    16687   1391    11726   977 878 73
2   13970   25845   2154    18161   1513    1756    146
3   18920   35002   2917    24596   2050    2634    219
4   23870   44160   3680    31031   2586    3512    292
5   28820   53317   4443    37466   3122    4390    365
6   33770   62475   5206    43901   3658    5268    439
7   38720   71632   5969    50336   4195    6146    512
8   43670   80790   6733    56771   4731    7024    585
9   48620   89947   7496    63206   5267    7902    658
10  53570   99105   8259    69641   5803    8780    731
11  58520   108262  9022    76076   6340    9658    804
12  63470   117420  9785    82511   6876    10536   878
13  68420   126577  10548   88946   7412    11414   951
14  73370   135735  11311   95381   7948    12292   1024
15  78320   144892  12074   101816  8485    13170   1097
16  83270   154050  12838   108251  9021    14048   1170
17  88220   163207  13601   114686  9557    14926   1243
18  93170   172365  14364   121121  10093   15804   1317
19  98120   181522  15127   127556  10630   16682   1390
20  103070  190680  15890   133991  11166   17560   1463 
```

如果不符合条件，则触发器应在 clientrow 上设置 StatusID =5。到目前为止，我有这个触发器

```
create trigger tr_EligebilityCheck
on dbo.Clients
FOR INSERT,UPDATE
as 
/*Check if Senior  not eligible by age*/
If (select CategCode from inserted )='SR'
declare 
@DOB date
SET @DOB = (select dob from inserted)
if DATEDIFF(YEAR,@DOB,GETDATE())<60

BEGIN
Update Clients
set StatusID = 5
From Clients c, inserted i
where c.CategCode = 'SR' and i.ClientID = C.ClientID
END

/*Check if Children eligebel by age*/
If (select CategCode from inserted )='CH'
declare 
@DOBCH date
SET @DOBCH = (select dob from inserted)
if DATEDIFF(YEAR,@DOBCH,GETDATE()) >=6

BEGIN
Update Clients
set StatusID = 5
From Clients c, inserted i
where c.CategCode ='CH' and i.ClientID = C.ClientID
END 
```

但不知道如何通过收入添加检查，如果您知道如何执行此操作，请提供帮助。当我正在插入新记录时，看起来我的触发器不起作用并抛出错误

```
Msg 512, Level 16, State 1, Procedure tr_EligebilityCheck, Line 6
Subquery returned more than 1 value. This is not permitted when the subquery follows =, !=, <, <= , >, >= or when the subquery is used as an expression. 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T02:05:59.437

如果这是确定谁不符合条件的唯一方法，则您已准备好 select 语句。因此，您只需要更新符合该标准的那些。用子查询来做（我没有**SQLFiddle**）。您可以将更新放在触发器中需要的任何位置。

```
UPDATE Clients 
SET 
theColName = 'value' 
WHERE 
ClientID IN (Select ClientID
             from Clients c 
             join IncomeEligibility i 
                  on c.HshldSize = i.HshldSize
             where c.HshldSize= i.HshldSize 
                   and c.AnnualHshldIncome >= i.SeniorMo 
                   and StatusID in (1,2) 
                   and c.CategCode = 'SR' 
                   and MonthlyYearly ='month') 
```

错误是关于这一行`If (select CategCode from inserted )='SR'` 的 select CategCode 查询返回多个值，因此等号是错误的运算符。虽然我会将“SR”放在变量中，但请尝试这种方法。

```
if @var IN (select CategCode from inserted) 
```

该语句在结果集中查找值，而不是查看它是否等于多个值。查看您的查询结果，看看它是否返回多个分类代码，这就是错误的意思。

# android - 修改子模块

> ID：15214197
> 
> 赞同：0
> 
> 时间：2013-03-05T01:22:55.237
> 
> 标签：android, git, github, git-submodules

我有一个正在做的项目。我使用 GitHub 上的库。通常我一直通过 Maven 使用这个库。但是库中有一些错误，所以我想在我的仓库中包含这个库，以便我可以修改它。然后我自己建立图书馆。

最好的策略是什么？我尝试过使用子模块，但这[说明](https://www.kernel.org/pub/software/scm/git/docs/git-submodule.html)无法以这种方式修改库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T02:18:37.640

由于您想对库进行自己的更改，请创建存储库的副本（fork）以进行更改。这样，您的更改可以提交、推送到服务器，如果需要，可以与原始存储库共享.

以与原始存储库相同的方式将这个新存储库带入您的项目。

# c# - c# 从 c pipe() 函数读取文件描述符

> ID：15214198
> 
> 赞同：2
> 
> 时间：2013-03-05T01:23:00.067
> 
> 标签：c#, c, mono, pipe

我正在使用这样的函数在 C 代码中创建 C 管道：

```
extern int *create_pipe() {
  int *_pipe = (int *)malloc(2 * sizeof(int));
  pipe(_pipe);

  return _pipe;
} 
```

我在 C# 中绑定了这个函数，如下所示：

```
[DllImport("mydll")]
private static unsafe extern int *create_pipe(); 
```

我这样调用 C# 代码：

```
unsafe {
  int *pipe = create_pipe();

  hostout = pipe[1];
  hostin = pipe[0];
} 
```

然后我尝试`BinaryWriter`像这样创建一个管道：

```
var writer = new BinaryWriter(new AnonymousPipeClientStream(PipeDirection.Out, new SafePipeHandle(new IntPtr(hostout), false))); 
```

我尝试给它写一个简单的整数值：

```
writer.Write(50); 
```

但我得到这个错误：

```
Unhandled Exception:
System.IO.IOException: Invalid handle to path "[Unknown]"
  at System.IO.FileStream..ctor (IntPtr handle, FileAccess access, Boolean ownsHandle, Int32 bufferSize, Boolean isAsync, Boolean isZeroSize) [0x0006a] in /Users/builder/data/lanes/mono-mac-ui-refresh-2-10/2baeee2f/source/bockbuild/profiles/mono-2-10/build-root/mono-2.10.11/_build/mono-2.10.11.git/mcs/class/corlib/System.IO/FileStream.cs:86 
  at System.IO.FileStream..ctor (IntPtr handle, FileAccess access, Boolean ownsHandle, Int32 bufferSize, Boolean isAsync) [0x00000] in <filename unknown>:0 
  at (wrapper remoting-invoke-with-check) System.IO.FileStream:.ctor (intptr,System.IO.FileAccess,bool,int,bool)
  at System.IO.Pipes.PipeStream.get_Stream () [0x00021] in /Users/builder/data/lanes/mono-mac-ui-refresh-2-10/2baeee2f/source/bockbuild/profiles/mono-2-10/build-root/mono-2.10.11/_build/mono-2.10.11.git/mcs/class/System.Core/System.IO.Pipes/PipeStream.cs:134 
  at System.IO.Pipes.PipeStream.Write (System.Byte[] buffer, Int32 offset, Int32 count) [0x00006] in /Users/builder/data/lanes/mono-mac-ui-refresh-2-10/2baeee2f/source/bockbuild/profiles/mono-2-10/build-root/mono-2.10.11/_build/mono-2.10.11.git/mcs/class/System.Core/System.IO.Pipes/PipeStream.cs:273 
  at System.IO.BinaryWriter.Write (Int32 value) [0x0004b] in /Users/builder/data/lanes/mono-mac-ui-refresh-2-10/2baeee2f/source/bockbuild/profiles/mono-2-10/build-root/mono-2.10.11/_build/mono-2.10.11.git/mcs/class/corlib/System.IO/BinaryWriter.cs:244 
```

任何想法如何完成我正在尝试做的事情？

先感谢您！

# jquery - JQuery SlideToggle 效果：仅幻灯片一个列表和无效链接

> ID：15214201
> 
> 赞同：1
> 
> 时间：2013-03-05T01:23:12.997
> 
> 标签：jquery, hyperlink, expand

我已经使用了一段时间的列表菜单遇到了两个问题。

1.  我无法让列表仅扩展一个列表（一两个，而不是一两个）。
2.  ~已修复~我完全不知道为什么链接不起作用。~已修复~

这是 JSFiddle - [http://jsfiddle.net/yAqQG/1/](http://jsfiddle.net/yAqQG/1/)

任何帮助表示赞赏，谢谢。

**HTML**

```
<div class="navigation">
<ul>
<li><h1><a href="#">One</a></h1>
    <ul>
    <li><a href="#">Not Available</a></li>
    <li><a href="#">Not Available</a></li>
    </ul>
</li>
<li><h1><a href="#">Two</a></h1>
    <ul>
    <li><a href="#">Not Available</a></li>
    <li><a href="#">Not Available</a></li>
    </ul>
</li>
</ul>
</div> 
```

**jQuery**

```
jQuery(document).ready(function () {

    var subMenu = jQuery(".navigation ul li ul li");
    var linkClick = jQuery(".navigation ul li").filter(":has(ul)");

    subMenu.hide();

    linkClick.click(function (e) {
        e.preventDefault();
        $(this).find('ul li').slideToggle("fast");
    });
}); 
```

**CSS**

```
body {
    background : #000000;
}

/* Title Settings */
.navigation ul li h1 {
    background : none;
    float : right;
    font-size : 28px;
    font-weight : 100;
    margin : 0;
    margin-bottom : 3px;
    padding : 0;
}
/* Before and After Styling */
.navigation a {
    color : #ffffff;
    border-right : 3px solid #ffffff;
    display : table;
    padding : 6px;
    transition: .25s ease-in-out;
    -moz-transition: .25s ease-in-out;
    -webkit-transition: .25s ease-in-out;
    text-decoration : none;
}
.navigation a:hover {
    border-right : 3px solid #f43058;
    color : #f43058;
}
/* Fixed (Top Right) Positioning */
.navigation {
    font-family : 'Open Sans Condensed', sans-serif;
    font-weight : 100;
    margin : 12px;
    position : fixed;
    right : 0;
    top : 0;
}
.navigation ul {
    font-size : 20px;
    margin : 0;
    padding : 0;
    text-align : right;
}
.navigation ul li {
    clear : right;
    float : right;
    list-style-type : none;
}
/* Second Level Settings */
.navigation ul li:hover ul {
    display : block;
}
.navigation ul li ul li {
    font-size : 18px;
    margin-bottom : 3px;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T01:33:53.643

您的链接不起作用，因为您已将 preventDefault 应用于所有链接：

```
linkClick.click(function (e) {
    e.preventDefault();
}); 
```

我已经`a`从您的 h1 标签周围删除了标签。为了让手风琴工作，你可以这样做：

[http://jsfiddle.net/W8H6W/3/](http://jsfiddle.net/W8H6W/3/)

```
jQuery(document).ready(function () {
    jQuery('h1').click(function () {
        $(this).closest('li').siblings().find('ul').slideUp();
        $(this).siblings('ul').slideToggle("fast");
    });
}); 
```

# c# - 为每个键返回不同的列表

> ID：15214204
> 
> 赞同：0
> 
> 时间：2013-03-05T01:23:25.277
> 
> 标签：c#, linq, group-by

我有一个在代码中解析为字符串 [] 列表的表（每个字符串 [] 都是一列）。

```
Column1| Column2  | Column3
--------+---------+----------
0       | 1       | 8
3       | 2       | 3
5       | 2       | 8 
```

让我们说：

```
string[] column1 = { 0, 3, 5 }
string[] column2 = { 1, 2, 2 };
string[] column3 = { 8, 3, 8 };
List<string[]> table = new List<string[]>() { column1, column2, column3 }; 
```

我想通过 Column3 选择一个列（即 Column1）groupby，并在 Column3 中创建一个包含每个不同值的列表。换句话说：将 Column1 按 column3 分组，并为 Column3 的每个不同值创建一个 Column。

输出将是：

```
string[] result1 = { 3 };  // From column3[1] = 3
string[] result2 = { 0, 5 };  // From column3[0] = column3[2] = 8 
```

这是这篇[文章](https://stackoverflow.com/questions/5947665/group-by-in-linq-query)、这篇文章和来自[msdn](http://code.msdn.microsoft.com/LINQ-to-DataSets-Grouping-c62703ea)的Simple 1 的[混合](https://stackoverflow.com/questions/2153719/group-by-either-column-using-c-sharp-linq)体。我想用column1和column3创建一个对象，然后像这篇[文章](https://stackoverflow.com/questions/3186818/unique-list-of-items-using-linq)那样做：

```
Class Row { public Row(string row1, string row3); }
List<Row> rows = new List<Row>();
for(int i = 0; i < column1.Length; i++)
{ rows.Add(new Row(Column1[i], Column3[i])); }

var output = rows.GroupBy(row => row.row3).ToDictionary(grp => grp.Key, grp => grp.ToList()); 
```

但是这段代码代码有点难看。有没有类似的东西

```
column3.selectmany(...).GroupBy(row => row.row3).ToDictionary(grp => grp.Key, grp => grp.ToList()); 
```

我的意思是，一些表达式不需要创建一个新类并填充一个对象列表......另外，我想要作为输出

```
string[] result1 = { 3 };  // From column3[1] = 3
string[] result2 = { 0, 5 };  // From column3[0] = column3[2] = 8 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T01:59:42.630

[`Zip`](http://msdn.microsoft.com/library/dd267698.aspx)您可以使用扩展方法和 an[`anonymous type`](http://msdn.microsoft.com/library/bb397696.aspx)来创建行，而不是仅仅为分组创建新类型。

分组非常简单。每个组都有一个代表 column3 的键，它`IGrouping`本身是一个`IEnumerable`包含您仅选择第 1 列的行：

```
var rows = column1.Zip(column3, (c1, c3) => new
{
    Column1 = c1,
    Column3 = c3
});

var output = from row in rows
             group row by row.Column3 into groupedRows
             select groupedRows.Select(r => r.Column1).ToArray(); 
```

这会产生一个`IEnumerable<string[]>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T02:21:03.697

pescolino 的回答`Zip`非常好。如果您不能使用它（例如，如果您不在 .NET 4.x 上），那么您可以使用 indexer-overload of`Select`来产生所需的结果：

```
var res = col1.Select((fld,idx) => new { Field = fld, Index = idx })
          .GroupBy(entry => col3[entry.Index], entry => entry.Field)
          .Select(grp => grp.ToArray()); 
```

# google-apps-script - 修改用于教育平台的 Google Drive Apps 与浏览器扩展？

> ID：15214212
> 
> 赞同：2
> 
> 时间：2013-03-05T01:24:08.413
> 
> 标签：google-apps-script, google-docs, google-drive-api

我正在与几所学校合作，为学生开发一系列互动教科书。教科书需要有随机生成的练习，我已经为此开发了一个[原型](http://mathiom.ozwaldo.net/workbook?mental.2x11.count=10&mental.2x11.min=10&mental.2x11.max=99&mental.3x11.count=10&mental.3x11.min=100&mental.3x11.max=999&mental.pow2_5.count=10&mental.pow2_5.min_10s=1&mental.pow2_5.max_10s=9&mental.2xsum10.count=10&mental.2xsum10.min_1s=1&mental.2xsum10.max_1s=9&mental.2xsum10.min_10s=1&mental.2xsum10.max_10s=9&name=Secrets%20of%20Mental%20Math%3A%20Chapter%200&course=Secrets%20of%20Mental%20Math&course-link=secrets-of-mental-math)。

虽然我可以创建自己的应用程序——只要可以通过 Drive 安装和访问这些应用程序，还需要完全通过 Google Drive 管理应用程序（例如，我不能使用 WordPress 甚至 Google Sites）。

**我想做的是：**

1.  允许作者使用 Google 表单创建随机生成的工作表，类似于他们使用我[当前的生成器的方式](http://mathiom.ozwaldo.net/new-workbook)
2.  允许作者单击 Google Docs 中的菜单项，该菜单项在Doc中**嵌入了小部件/iFrame**
3.  [将JSX 图](http://jsxgraph.uni-bayreuth.de/wp/)嵌入到文档中
4.  将学生的答案记录到电子表格中
5.  “漂亮”的电子表格在教师页面中更好地显示 - 在电子表格、文档或自定义 Google 应用中
6.  一切都必须在 Google Drive 上运行

**我的问题是：**

1.  这是完全可以通过 Google App Scripts 实现的吗？
2.  *查看*文档的人是否能够在没有安装我的应用脚本的情况下看到嵌入式小部件（如果这甚至是它的工作方式）。
3.  我可以扩展 Google Apps（当访问者查看时）以显示带有 ToC 的侧边栏吗
4.  是否可以构建跨文档目录，从文件夹中所有文档的标题生成目录？
5.  创建一个可以在应用程序中搜索某些字符串（或者甚至更好的是带有“请安装扩展程序”的占位符图像）并用交互式小部件替换它们的浏览器扩展程序会更容易吗？

**浏览器扩展**
除了扩展 Google Apps，我还可以创建一个浏览器扩展，学生可以安装它来执行 #2……这将相当容易。当然，“安装”对于家长来说是一个可怕的词，所以最好是不需要学生安装任何东西的解决方案。

我想，真的，我的直接问题是：***Google App Scripts 能否单独扩展 Drive Apps 来为学生和教师规划者创建交互式教科书。***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-09T06:20:43.270

正如 Mogsdad 评论的那样，您的问题确实过于广泛。但我会尝试回答。

从你想要的东西列表中，只有第 3 点可能有问题。您必须测试 JSX Graphs 是否与 Apps Script Html Services 一起工作。恐怕它不会。但是您在 Apps Script 上有[其他图表解决方案。](https://developers.google.com/apps-script/reference/charts/)

从您的问题列表中：

1.  我不这么认为，除非您对自己的要求做出一些妥协。
2.  不，只有安装在文档/表单/电子表格本身上的[脚本才能在其上嵌入小部件。](https://code.google.com/p/google-apps-script-issues/issues/detail?id=2873)
3.  不使用 Apps 脚本，要运行/与脚本交互，用户必须是协作者，而不是访问者（这意味着他必须拥有文件的编辑权限）。也许与浏览器扩展。
4.  是的。但是，如果要处理的文件“太多”，您可能会遇到一些 Apps 脚本配额，这会让您的生活变得困难。
5.  I didn't really understood this question. But browser extensions can surely do more than scripts, but they will require installation on each browser for all your users.

# git - 删除包含其提交的分支

> ID：15214215
> 
> 赞同：2
> 
> 时间：2013-03-05T01:24:18.247
> 
> 标签：git, gitk

我创建了一个分支，我在其中尝试了一种无法解决的问题的方法，因此我想删除该分支，包括我在其上所做的所有提交。为了论证，我的分支看起来像这样（当使用 Gitk 查看时）：

```
A--B--C--D Master
    \
     \-E-F Unwanted 
```

我希望它看起来像这样：

```
A--B--C--D Master 
```

如果我删除了不需要的分支，我最终会得到这个：

```
A--B--C--D Master
    \
     \-E-F 
```

我对提交 E 和 F 没有用处，也不希望它们弄乱我的 Git 历史记录。

抱歉，这似乎是一个非常简单（而且可能很愚蠢）的问题，但我一直无法在其他地方找到合适的答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T01:25:17.257

不，这就是你所做的一切。只要 E 和 F 没有在任何分支或标签中被引用，它们最终都会被垃圾回收。我假设您正在 gitk 中查看它并且仍然看到提交挂起。如果您重新启动 gitk 或使用 Ctrl+F5 强制重新加载，它们将消失。它们还在那里，但 git 最终会照顾它们。虽然您可以强迫它们立即清理，但这不是一个好习惯。孤立提交的默认生存时间为 2 周，因为*有时*您确实*确实*想要这些提交，而您只是还不知道，所以让它们孤立并继续前进。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T01:25:27.537

如果您运行它，当它们超过某个阈值（默认为 2 周，您可以使用 调整它）时，`git gc`它将删除未引用的分支（即，假设您没有标记它或从中派生其他分支）。`F``--prune=<date>`

# ember.js - Ember.js 模板渲染

> ID：15214227
> 
> 赞同：2
> 
> 时间：2013-03-05T01:25:19.817
> 
> 标签：ember.js

我可能读错了文档。有人可以[查看我的要点](https://gist.github.com/mjallday/5087204)并告诉我为什么`invoices/index`模板没有呈现吗？

当我阅读[ember.js 文档](http://emberjs.com/guides/routing/defining-your-routes/)时，它声明它应该呈现

```
posts
 ↳posts/index 
```

（`invoices/index`在我的情况下）。然而，`invoices`模板呈现。

**车把：**

```
<script type="text/x-handlebars" data-template-name="application">
    <h1>Ember Committers</h1>
    <nav>
        {{#linkTo "index"}}Index{{/linkTo}}
        {{#linkTo "about"}}About{{/linkTo}}
        {{#linkTo "invoices"}}Invoices{{/linkTo}}
    </nav>
    {{ outlet }}
</script>

<script type="text/x-handlebars" data-template-name="invoices">
    <h1>Invoices</h1>
</script>

<script type="text/x-handlebars" data-template-name="invoices/index">
    <ul>
        {{#each invoice in invoices }}
        <li>{{#linkTo "show" invoice.id}}{{ invoice.id }}{{/linkTo }}</li>
        {{/each }}
    </ul>
</script>

<script type="text/x-handlebars" data-template-name="invoices/show">
    <p>Invoice - {{ name }}</p>
</script>

<script type="text/x-handlebars" data-template-name="phone">
    <p>Contributor - {{ title }}</p>
</script>

<script type="text/x-handlebars" data-template-name="about">
    <p>About {{ title }}</p>
</script>

<script type="text/x-handlebars" data-template-name="index">
    <p>Index</p>
</script> 
```

**JavaScript：**

```
<script type="text/javascript" defer>
    var App = Ember.Application.create({
        LOG_TRANSITIONS: true
    });
    App.ApplicationView = Ember.View.extend({
        templateName: 'application'
    });

    App.Router.map(function () {
        this.route("about");
        this.resource("invoices", { path: "/invoices" }, function () {
            this.resource("show", { path: "/:id" });
        });
    });

    var invoices = [
        {id: 1},
        {id: 2}
    ];

    App.AboutRoute = Ember.Route.extend({
        setupController: function (controller) {
            // Set the IndexController's `title`
            controller.set('title', "My App");
        }
    });

    App.InvoicesIndexController = Ember.ArrayController.extend({
        invoices: invoices
    });

</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T02:36:08.593

您需要在模板中包含一个`{{outlet}}`标签。`invoices`由于`index`和`show`是 的嵌套资源`invoices`，因此它们的模板会在您在模板中指定的插座内呈现`invoices`。

查看 Ember.js 指南的[嵌套资源](http://emberjs.com/guides/routing/defining-your-routes/#toc_nested-resources)部分。

# html - 使用 CSS 更改标签元素内的文本

> ID：15214228
> 
> 赞同：11
> 
> 时间：2013-03-05T01:25:19.970
> 
> 标签：html, css

我有一个代码片段：

```
<fieldset class="shareMe"><br />
    <input type="checkbox" id="share_me" name="share_me" value="1" {if $default_share_pref}checked="checked"{/if} onclick="if (this.checked) { var perms = 'publish_stream'; fb_login_cached(function(response){ if (!response.perms.match(new RegExp(perms))) $('share_me').checked = false; }, perms); }"/>
   <label for="share_me">Post this question to my friends on 
      <span class="">
         <a class="fb_button fb_button_small">
            <span class="fb_button_text">Facebook</span>
         </a>
      </span>.
   </label>
</fieldset> 
```

我想`<label for .. >`通过 CSS 更改字段中的文本。

我知道我可以通过放置此片段的副本并使用 css 切换来做到这一点。但是，我想做最少的代码更改。可能正在使用一些 CSS 技巧来更改`<label for..>`文本，而根本不影响内部代码`<label for...>`。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-05T01:31:09.210

您不能使用 CSS 更改文本。该规则的例外是`::before`和`::after`伪元素。理论上，您可以使用类来切换文本，如下所示：

```
label[for="share_me"]:before{content:'Post this question to my friends on '}
label[for="share_me"].othertext:before{content:'Some other text!'} 
```

但是，仅仅因为你可以并不意味着你应该。这是一个可访问性的噩梦，您能想象稍后再回来并尝试找出文本的来源（如果不是来自 HTML）吗？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-04-23T19:25:38.033

按照[https://blog.escapecreative.com/how-to-replace-text-with-css/](https://blog.escapecreative.com/how-to-replace-text-with-css/)的示例，这对我有用：

```
label[for="donate-choice-14724"]{
    visibility: hidden;
    position: relative;
}
label[for="donate-choice-14724"]:after{
    visibility: visible;
    position: absolute;
    top: 0;
    left: 0;
    content:'Make this donation monthly';
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T01:32:39.117

您[只能使用 CSS 更改](http://css-tricks.com/css-content/):before 和 :after 伪元素的内容。Ali Bassam 在下面的回答显示了一种在父级上显示伪元素内容的“hacky”方式，以便您可以控制它。这个解决方案的问题包括，它看起来多么老套，以及[IE](http://css-tricks.com/browser-support-pseudo-elements/)对伪元素的支持有限。但这对您的项目可能没有问题。

要考虑的另一件事是，您对 CSS 切换的控制有限。您的两个选项是[媒体查询](http://css-tricks.com/css-media-queries/)和熟悉的[伪类](http://css-tricks.com/pseudo-class-selectors/)。如果您的切换需求超出了这些人的能力范围，那么您最好[转向 Javascript。](https://stackoverflow.com/questions/2186041/change-content-of-a-div-using-javascript)

# node.js - 动态路由取决于版本号

> ID：15214234
> 
> 赞同：3
> 
> 时间：2013-03-05T01:25:28.713
> 
> 标签：node.js, routing, express

我正在使用 Express3 框架在 node.js 上开发一个 web api，我希望我的路由看起来像`/v0.1/function`.

理想情况下，路由应该通过查看 url 中给出的主要和次要版本号来自动加载指定的版本模块。到目前为止，我的方法是：

```
app.use('/v:major.:minor', function(req) {
    return require('./v' + req.params.major + '.' +
        req.params.minor);
}); 
```

在我的`./v0.1/index.js`：

```
module.exports = function() {
    var express = require('express'),
        app = express();
    app.get('/test', function(req, res) {
        res.json({ success: true });
    });
    return app;
}(); 
```

如果我`/v0.1/test`现在打电话，它不知何故与路线（404）不匹配，但`app.get('/v:major.:minor', function(req, res) { /* ... */ });`工作得很好。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T02:04:03.710

我想你想要`app.all`（[http://expressjs.com/api.html#app.all](http://expressjs.com/api.html#app.all)）

这将使所有 HTTP 动词都可以访问，并且变量路由仍然有效。

我测试了它，它似乎工作。

根据评论编辑

```
app.all('/v:major.:minor/:endpoint', function(req, res, next) {
    var version_handler = require('./v' + req.params.major + '.' + req.params.minor);
    if (!req.params.endpoint in version_handler) // endpoint_isn't supported at this version, 404
    version_handler[req.params.endpoint](req, res, next);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T11:24:02.530

你必须使用`app.param()`. 从[express API](http://expressjs.com/api.html#app.param)中的示例：

```
app.param('id', /^\d+$/);

app.get('/user/:id', function(req, res){
  res.send('user ' + req.params.id);
}); 
```

您必须在 URL 中为您的参数提供正则表达式，因为主要，次要都是非负整数`/^\d+$/`，应该适合您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-16T16:15:14.320

## 我发现最简单的方法是链接自定义中间件：

### 像这样的东西：

```
app.use('/api/:version', function (req, res, next) {
    console.log('The version name is : ', req.params.version)
    req.version=req.params.version; //use this inside api router
    next() // pass control to the next handler
},api); 
```

**api**是你的路由器对象

# git - git-svn 不再为 subversion 标签创建分支

> ID：15214235
> 
> 赞同：0
> 
> 时间：2013-03-05T01:25:44.370
> 
> 标签：git, svn, git-svn

我正在使用[git-svn](https://www.kernel.org/pub/software/scm/git/docs/git-svn.html)在 Git 中本地管理代码，这些代码集中存储在 Subversion 中。Subversion 存储库使用“trunks/branches/tags”的标准布局；当我创建 git 存储库时，我使用了“--stdlayout”参数。

每当我运行`git svn rebase`时，只要创建 Subversion 标签，Git 就会正确创建分支：

![注释标签](../Images/b90c2f6fdfd144c6e435ef1d4d1626ed.png)

然而，最近 Git 停止创建这些分支，现在它们只是显示为：

![缺少带注释的标签](../Images/e500015bbf85316e2407e7cc77eec580.png)

每当有新的 Subversion 标签时，如何恢复 Git 创建分支的原始行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T10:53:37.627

默认情况下，该命令`git svn rebase`将仅获取“当前 HEAD 的 SVN 父级”，如[git-svn 文档](https://www.kernel.org/pub/software/scm/git/docs/git-svn.html)中所述。要获取包括分支在内的所有修订，您可以在单独的步骤中使用`git svn rebase --fetch-all`，或使用`git svn fetch`然后变基。

# c++ - 复选框更改文本颜色

> ID：15214237
> 
> 赞同：2
> 
> 时间：2013-03-05T01:25:52.990
> 
> 标签：c++, winapi, win32gui

背景改变了，但文字颜色没有改变。这是我的代码：

```
case WM_CTLCOLORSTATIC:
{
    DWORD CtrlID = GetDlgCtrlID((HWND)lParam); //Window Control ID

    if(CtrlID == IDC_CHECK_CHAT)
    {
        HDC hdcStatic = (HDC) wParam;
        SetTextColor(hdcStatic, RGB(255,255,255));
        SetBkColor(hdcStatic, RGB(70,70,70));
        return (INT_PTR)hBrush;
    }
} 
```

资源文件：

```
CONTROL         "Blah Blah Blah",IDC_CHECK_CHAT,
                "Button",BS_AUTOCHECKBOX | WS_TABSTOP,24,72,137,10 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T02:21:03.787

您需要先使用 SetWindowTheme 删除主题：

```
HWND hwndCheckbox = GetDlgItem(_hdlg, IDC_CHECK_CHAT);
SetWindowTheme(hwndCheckbox, L"wstr", L"wstr"); 
```

在您为文本着色之前。

# python - 编写正则表达式以在 Python 中获取子字符串

> ID：15214246
> 
> 赞同：1
> 
> 时间：2013-03-05T01:27:00.160
> 
> 标签：python, regex, regex-negation

我为这个非描述性的标题道歉，但我想不出更好的标题。

我正在尝试编写一个从某些文件名中解析子字符串的脚本。

因此，例如，这是一个这样的文件名：

`[Anime-Koi] GJ-bu - 07 [h264-720p][A8557259].mkv-00_07_33_00001.jpg`

（这显然是动漫的截图。）

我想从这个名字中得到`GJ-bu - 07`子字符串。

我对正则表达式知之甚少，所以我一直在摸索着想出一个正则表达式来做到这一点。

我认为找到表达式的倒数真的很容易，所以我想出了：

`'(\[[a-zA-Z0-9_-]*\]?[.a-zA-Z0-9_-]*)'`

Python`findall()`用于上述返回：

`['[Anime-Koi]', '[h264-720p]', '[A8557259].mkv-00_07_33_00001.jpg']`

不幸的是，我不知道如何得到逆，无论我多么努力地挠我的大脑，我都无法想出一个正则表达式来满足我的需要。

所以，呃，你们能帮我想出一个返回的表达式`GJ-bu - 07`吗？

我知道我可以作弊，然后这样做：

```
f = "[Anime-Koi] GJ-bu - 07 [h264-720p][A8557259].mkv-00_07_33_00001.jpg"
reg_ex = r'(\[[a-zA-Z0-9_-]*\]?[.a-zA-Z0-9_-]*)'
p = re.compile(reg_ex)
l = p.findall(f)
for st in l:
    f = f.replace(st, '') 
```

但那是作弊，所以我宁愿不这样做。

谢谢你的时间。

（注意：我为此使用了 Python 2.7，但我对使用 3.2 没有任何疑虑，尽管我怀疑它在这里会有所不同。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T01:33:13.160

试试这个（`s`是输入）。

```
re.search(r'(?:^|\s)([^[]*)(?=(?:\s|$))', s).group(1) 
```

它本质上意味着一个空格，后跟任意数量的非`[`字符，然后是一个空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T01:34:35.040

试试这个：

```
p = re.compile('\[.*\](\s.*\s)\[.*\].*\.jpg')
l = p.findall("[Anime-Koi] GJ-bu - 07 [h264-720p][A8557259].mkv-00_07_33_00001.jpg")
print l 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T01:37:20.177

```
import re

pat = '\[.+?\] *(.+?) *\[.+?\]'
reg = re.compile(pat)

ss = '[Anime-Koi] GJ-bu - 07 [h264-720p][A8557259].mkv-00_07_33_00001.jpg'

print reg.findall(ss) 
```

# python - Pandas：使用具有最大信息标准的 rolling_mean() 作为平滑函数？

> ID：15214248
> 
> 赞同：1
> 
> 时间：2013-03-05T01:27:12.137
> 
> 标签：python, pandas

我想使用 pd.rolling_mean() 作为保持最大信息标准的平滑函数。这意味着端点的计算方式取决于可用的信息。下面是一个 window=3, center=True 的示例：

```
For Example: Window = 3, Center = True
ts_smooth[0] = 1/2 * ts[0] + 1/2 * ts[1]
ts_smooth[0<n<N-1] = 1/3 * ts[n-1] + 1/3 * ts[n] + 1/3 * ts[n+1]
ts_smooth[N] = 1/2 * ts[N-1] + 1/2 * ts[N] 
```

在 Pandas 中实现这一目标的最佳方法是什么？

1.  计算中点的 rolling_mean()
2.  写一个函数来根据窗口大小替换结束条件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T19:51:57.733

你可以使用 shift 函数，像这样，

```
ts_shiftedPlus = ts.shift(1)
ts_shiftedMinus = ts.shift(-1)

ts_smooth = 1/3 * ts_shiftedMinus + 1/3 * ts + 1/3 * ts_shiftedPlus
ts_smooth.ix[0] = 1/2 * ts.ix[0] + 1/2 * ts.ix[1]
N = len(ts)
ts_smooth.ix[N] = 1/2 * ts.ix[N-1] + 1/2 * ts.ix[N] 
```

# git - git-svn 和更新的 svn url

> ID：15214250
> 
> 赞同：2
> 
> 时间：2013-03-05T01:27:14.260
> 
> 标签：git, svn, github, git-svn, sourceforge

我使用 git-svn 来处理托管在 sourceforge 上的 svn 存储库。最近，我更新了导致 svn 存储库更改的 sourceforge 项目。准确地说，现在可以使用 svn+ssh 访问新的 svn 存储库，并且将旧存储库设置为只读。

现在，在我的本地 git-svn 克隆目录中，我更新了 .git/config 以用新的 url 更新以前的 url。但是，当我执行 git svn info 或 git svn rebase 时，我收到以下错误：无法从工作树历史记录中确定上游 SVN 信息

此外，我使用以下命令创建了一个新的 git-svn 克隆： git svn init -T trunk -t tags -b branches svn+ssh://USER@svn.code.sf.net/p/dmtcp/code dmtcp-混帐

这个克隆工作正常，没有问题。但是，参考与旧克隆不同。

为了让事情变得复杂，我在 github 上维护了一个 git 存储库，一旦它们被提交到 sourceforge svn（出于历史原因），我就会在其中推送更改。这一切都用于与以前的 sourceforge svn url 一起工作。但是现在有了更新的存储库，引用都搞砸了，即它们与 github 上的存储库不匹配。

当然，我可以执行“git push -f”来更新参考，但想知道是否有人对修复参考有任何想法/想法。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T02:29:10.487

`git svn`使用 svn 存储库的根 URL 不仅仅是访问该存储库。它还需要确定 svn 分支，并且（至少在默认情况下）URL 将包含在提交消息中。后一个原因就是为什么您的新克隆将所有提交显示为不同的原因。

但是，您可以将其配置为继续将旧 URL 用于其他目的，同时使用新 URL 实际访问存储库。您只需将一个`rewriteRoot`项目添加到文件的 svn-remote 部分 `.git/config`并将其设置为 svn 存储库的旧 URL。这应该允许您继续从 svn 中提取更新。

# json - Jersey Rest Client 是否比 HttpClient 更适合调用 restful 服务？

> ID：15214252
> 
> 赞同：3
> 
> 时间：2013-03-05T01:27:21.373
> 
> 标签：json, rest, jakarta-ee, jersey, gson

我需要调用一个返回 json 响应的 resful api。我正在考虑使用 jersey 客户端 api，但不确定它是否比直接使用 HttpClient 然后使用 GSON 将响应转换为 Java 对象更好。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-05T01:28:46.390

从编码效率的角度来看， Jersey 客户端*远远*优于 HttpClient。考虑：

```
// Jersey client
WebResource resource = Client.create().resource("http://foo.com")
resource.path("widgets").entity(someWidget).type(APPLICATION_JSON).post();
Wodget wodget = resource.path("widgets/wodget").accept(APPLICATION_XML).get(Wodget.class); 
```

相对于：

```
// HttpClient
HttpClient httpClient = new DefaultHttpClient();
HttpPost httpPost = new HttpPost("http://foo.com/widgets");
HttpEntity someWidgetEntity = ... // something with GSON to marshal the 'someWidget'
httpPost.setEntity(someWidgetEntity);
HttpResponse response = httpclient.execute(httpPost);

HttpGet httpGet = new HttpGet("http://foo.com/widgets/wodget");
HttpResponse response = httpClient.execute(httpGet);
HttpEntity entity = response.getEntity();
if (entity != null) {
    ... // something with GSON to read in the wodget
} 
```

再加上 Jersey 客户端可以在后台使用 HttpClient 进行 HTTP 交互这一事实，您将获得两全其美：简化的界面以及广泛使用的多功能 HTTP 客户端库的强大功能。

注意：上面的代码完全未经测试，但形状大致准确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-23T14:28:02.050

它不像哪个更好，它们有自己的优点和缺点，就像泽西客户端实际上在需要执行的代码行数方面非常简单，比如说任何 HTTP 操作。但主要是 HttpClient 让你对你的行为有很多控制，只是为了解释你；如果有用于 Http POST Multipart 功能的 Jersey 客户端代码，如果调用多个线程来访问此服务，则 Jersey 客户端会因 Socket 关闭异常而间歇性失败，而 HttpClient 执行完美，这是因为 HttpCLient 在内部会重试，而在 Jersey 客户端中则不会这样做。

# javascript - 想要得到的不是延迟对象而是数组

> ID：15214253
> 
> 赞同：0
> 
> 时间：2013-03-05T01:27:31.380
> 
> 标签：javascript, coffeescript

我想通过代码获取推文`twitter.tweets()`，但类的**ajax 方法**`Twitter`仅返回**Deferred 对象**，如本问题底部所示。

```
class Twitter
  tweets = []

  getTweets: ->
    tweets_array = []
    $.getJSON('http://search.twitter.com/search.json?callback=?&rpp=100&q=%40weed_7777')
    .done((data) =>
      $.each data.results, (i, item) ->
        tweets_array.push item.text
      @tweets = tweets_array
    )

twitter = new Twitter

###
Present Code
###
twitter.getTweets()
.done ->
  console.log twitter.tweets

###
Ideal Code ... very simple !
###
console.log twitter.tweets() 
```

![](../Images/dbd1b36b6bf7099499801b91c6851314.png)

谢谢你的好心。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T08:37:27.337

如果您使用 Javascript，您应该非常清楚您是在异步/事件环境中工作的事实。所以最终你将被迫习惯这一点。当然有一些策略可以让生活更轻松，例如使用异步库（[https://github.com/caolan/async](https://github.com/caolan/async)）

```
async.series [
    (callback) => 
        $.getJSON('http://search.twitter.com/search').done (data) => 
            @tweets = (item for item in data)
            callback(null, pass_some_data_if_you_want)
    ,
    (callback) =>
        $.getJSON('http://search.twitter.com/some_other_search').done (data) => 
            do_what_ever_you_want_and_need()
            callback(null, pass_some_data_if_you_want)
    ],
    (error, result) => handle_error_case(error) 
```

显然，这只有在您想要连续执行多个操作时才有意义。如果你只有一个。比你的代码

```
twitter.getTweets().done -> console.log twitter.tweets 
```

是最好的方法。

# mono - IronPython + Mono 错误 - 无法加载签名

> ID：15214255
> 
> 赞同：2
> 
> 时间：2013-03-05T01:27:42.373
> 
> 标签：mono, ironpython, linux-mint

尝试从 Mono 运行 IronPython 时，出现以下错误：

```
wayne@arglefraster ~/Downloads/IronPython-2.7.3 ⚘ mono ipy.exe              19:19:23
Could not load signature of IronPython.Runtime.List:get_Item due to: 
Failed to load language 'IronPython 2.7': Could not load type 'IronPython.Runtime.List' from assembly 'IronPython, Version=2.7.0.40, Culture=neutral, PublicKeyToken=7f709c5b713576e1'. 
```

在这里摆弄我发现`MONO_LOG_LEVEL=debug`，并得到了这个相关信息

```
Mono: Assembly Loader probing location: '/usr/lib/System.Numerics.exe'.
Mono: The following assembly referenced from /home/wayne/Downloads/IronPython-2.7.3/IronPython.dll could not be loaded:
     Assembly:   System.Numerics    (assemblyref_index=5)
     Version:    4.0.0.0
     Public Key: b77a5c561934e089
The assembly was not found in the Global Assembly Cache, a path listed in the MONO_PATH environment variable, or in the location of the executing assembly (/home/wayne/Downloads/IronPython-2.7.3/).

Mono: Failed to load assembly IronPython[0xddd180]

Mono: Could not load file or assembly 'System.Numerics, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' or one of its dependencies.
Could not load signature of IronPython.Runtime.List:get_Item due to: 
Mono: gc took 520 usecs
Mono: Unloading domain ipy.exe[0x7faebd540cc0], assembly IronPython[0xddd180], ref_count=2 
```

我怎样才能得到这个工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T01:27:42.373

事实证明，没有安装 Numerics 库：

```
wayne@arglefraster ~/Downloads/IronPython-2.7.3 ⚘ apt-cache search mono numerics
libmono-system-numerics4.0-cil - Mono System.Numerics library (for CLI 4.0)

wayne@arglefraster ~/Downloads/IronPython-2.7.3 ⚘ sudo apt-get install libmono-system-numerics4.0-cil 
```

然后就走了！

# c++ - 按字母顺序对结构数组进行排序

> ID：15214257
> 
> 赞同：-3
> 
> 时间：2013-03-05T01:28:03.407
> 
> 标签：c++, arrays, struct

我无法弄清楚我搞砸了什么。我想我的一些价值观搞砸了，我正在努力解决这个问题。我觉得这是一个包含我的代码的简单数组，但我正在尝试对这个文件进行排序，但我收到了这个错误。

```
1>ClCompile:
1>  Main.cpp
1>Main.obj : error LNK2019: unresolved external symbol "void __cdecl sort(struct salesTran * const,int)" (?sort@@YAXQAUsalesTran@@H@Z) referenced in function _main
1>C:\Users\BranN3W\Documents\Visual Studio 2010\Projects\3-1Notes\Debug\3-1Notes.exe : fatal error LNK1120: 1 unresolved externals
1>
1>Build FAILED.
1>
1>Time Elapsed 00:00:01.96 
```

========== 构建：0 成功，1 失败，0 最新，0 跳过 ==========

```
#include <iostream>
#include <string>
#include <fstream>
using namespace std;

struct salesTran {
    string name;
    double quantity,price;
};

void swap(salesTran A[], int i, int j);
void sort(salesTran A[], int size);

ostream& operator << (ostream& os, salesTran A)
{os << A.name << "\t" << A.quantity << "\t" << A.price;
    return os;}
istream& operator >> (istream& is, salesTran& A)
{is >> A.name >> A.quantity >> A.price;
    return is;}

int main()
{
    salesTran data[250];

    ifstream fin;
    fin.open("sales.txt");
    ofstream fout;
    fout.open("results.txt");

    int index = 0;
    fin >> data[index];
    while(!fin.eof())
    {
        index++;
        fin >> data[index];
    }

    sort(data, index);

    for(int j=0; j < index; j++)
    {
        cout << data[j] << endl;
    }

    return 0;
}

void swap(int data[], int i, int j)
{
    int temp;
    temp = data[i];
    data[i] = data[j];
    data[j] = temp;
    return;
}

void sort(int data[], int size)
{
    for(int p=1; p<size; p++)
    {
        for(int c=0; c<size-p; c++)
        {
            if(data[c]>data[c+1]) swap(data,c,c+1);
        }
    }
    return;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T01:33:48.557

这是因为您的`sort`函数需要一个`int data[]`参数，但是当您使用它时，您正在传递它`salestran data[]`。您有一个原型，`void sort(salesTran A[], int size);`但从未定义过。您还需要更改排序功能以正确使用该结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T01:37:46.063

首先，您声明排序和交换函数，如下所示：

```
void swap(salesTran A[], int i, int j);
void sort(salesTran A[], int size); 
```

之后，您将函数定义为采用整数数组而不是`salesTran`结构数组。

```
void swap(int data[], int i, int j);
void sort(int data[], int size); 
```

您的声明和定义必须匹配您的代码才能链接。

# tcl - 如何在 tcl switch 语句中使用 or ？

> ID：15214260
> 
> 赞同：7
> 
> 时间：2013-03-05T01:28:23.303
> 
> 标签：tcl

我想在我的脚本中有大量选项。用户将提供仅匹配其中一个选项的输入。我希望能够让多个不同的选项运行相同的命令，但我似乎无法让 OR 工作。下面是我认为它应该是什么样子，关于如何使 a 或 b 线工作的任何想法？

```
switch -glob -- $opt {
   "a" || "b" {
      puts "you selected a or b, probably not both"
   }
   default {
      puts "Your choice did not match anything"
   }
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-05T03:09:05.267

您可以将`-`其用作案例的主体，以传递到下一个主体，如[Tcl 手册](http://www.tcl.tk/man/tcl8.6/TclCmd/switch.htm)中所述：

> 如果一个主体被指定为“-”，则意味着下一个模式的主体也应该用作该模式的主体（如果下一个模式也有一个“-”的主体，那么使用之后的主体，并且很快）。此功能可以在多个模式之间共享一个实体。

此外，如果您的选项是一串连接字符，您将不得不使用通配符预订您的选项模式，否则您的案例仅在`opt`仅包含一个选项时才会匹配：

```
switch -glob -- $opt {
   "*a*" -
   "*b*" {
      puts "you selected a or b, probably not both"
   }
   default {
      puts "Your choice did not match anything"
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-09T08:37:17.437

也在工作：

```
switch -regexp -- $opt {
   a|b {
      puts "you selected a or b, probably not both"
   }
   default {
      puts "Your choice did not match anything"
   }
} 
```

注意：“a|b”之间不能有空格

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T02:18:13.110

有两种方法。来自[switch 文档示例](http://www.tcl.tk/man/tcl8.6/TclCmd/switch.htm#M12)：“使用全局匹配和贯穿正文是编写带有交替的正则表达式的替代方法......”

# javascript - 如何在 firefox 上使用 parent.parent.document.getElementById ？网

> ID：15214271
> 
> 赞同：1
> 
> 时间：2013-03-05T01:29:40.037
> 
> 标签：javascript, asp.net, firefox, frame, getelementbyid

我有一个可以在 Internet Explorer 上运行的 javascript 函数……但在 Firefox 和 google chrome 上都不起作用。

这是示例...

```
function CerrarFrame(src, id, tamArreglo)
{
    parent.parent.document.getElementById("workSheet").src = src;
} 
```

现在是asp表格

```
<frameset rows="41, *" frameborder="0" framespacing="0" name="frmMain" id="frmMain">
    <frame name="topForm" src="Header.aspx" marginheight="0" marginwidth="0" scrolling="no" noresize>

    <frameset cols="168,*" frameborder="0" framespacing="0" id="frmBody">
        <frame name="frmMenu" id="frmMenu" src="MenuFrameNew.aspx?idUser=<%Response.Write(Session["idUser"]);%>&administrator=<%Response.Write(Session["administrator"]);%>&idCorp=<%Response.Write(Session["idCorporative"]);%>&file=<%Response.Write(Session["fileLogo"]);%>" marginheight="0" marginwidth="0" scrolling="no" noresize>

        <frameset id="frmContent" name="frmContent" rows="*,21" frameborder="0" framespacing="0">
            <frame name="workSheet" marginheight="0" marginwidth="0" src="Body.aspx" scrolling="auto">
            <frame name="btm" marginheight="0" marginwidth="0" src="footer.htm" scrolling="no">
        </frameset>
    </frameset>
</frameset> 
```

这个 javascript 在 IE 上可以正常工作，但是当我在 FireFox 上使用它时，我得到了这个错误：

```
TypeError: parent.parent.document.getElementById("workSheet") is null 
```

有没有办法解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T02:12:29.570

看来您想更改`src`frame 的属性`workSheet`。但是，该框架没有一个，`id`而只有一个`name`. `name`这就是为什么它在除 IE 之外的所有浏览器中都失败的原因：IE——至少是 IE 的某些版本——在属性和属性之间没有任何区别`id`，这就是它返回对象的原因。您可以添加一个`id`到框架（如您所做的那样`frmContent`）或使用`frames`集合，例如：

```
parent.parent.frames["workSheet"].src = src; 
```

那使用`name`. 请参阅：[https](https://developer.mozilla.org/en-US/docs/DOM/window.frames) ://developer.mozilla.org/en-US/docs/DOM/window.frames 。

希望能帮助到你。

# android - LocationResult 中发生了什么？

> ID：15214272
> 
> 赞同：2
> 
> 时间：2013-03-05T01:29:45.357
> 
> 标签：android, google-maps, gps, location

我一直在寻找如何实现一种在 Android 中获取用户位置的方法，我遇到了这个 SO 问题： [在 Android 上获取用户当前位置的最简单、最可靠的方法是什么？](https://stackoverflow.com/questions/3145089/what-is-the-simplest-and-most-robust-way-to-get-the-users-current-location-in-a?lq=1)

我的问题是，LocationResult 是什么？我将如何使用它？我在那个问题中构建了一个类似的应用程序，我根据当前位置搜索附近的地方。我正在考虑有一个单独的类来轮询位置更改，这样我就不必在不同的活动中重复代码。我怀疑 LocationResult 是为了这个目的？您能否向我展示如何在 OnCreate() 方法的 2 个活动中使用它的示例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-02T13:18:35.637

乔纳森，

LocationResult 是一种检索要处理的数据的简单方法。它是一个抽象类，您可以在其中实现子类以使用数据。参见[抽象类概念](https://stackoverflow.com/questions/1913098/what-is-the-difference-between-an-interface-and-abstract-class)：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-06T09:05:11.290

这就是您需要的代码：

```
 protected LocationCallback mLocationCallback = new LocationCallback()
{
    @Override
    public void onLocationAvailability(LocationAvailability locationAvailability) {
        super.onLocationAvailability(locationAvailability);
        if(!locationAvailability.isLocationAvailable())
        {// No location available
            checkLocationSettings();
            Snackbar snackLocationUnavailable = Snackbar.make(findViewById(R.id.myCoordinatorLayout), R.string.location_unavailable, Snackbar.LENGTH_LONG);
            snackLocationUnavailable.show();
        }
        else
        {
            Snackbar snackLocationAvailable = Snackbar.make(findViewById(R.id.myCoordinatorLayout), R.string.location_available, Snackbar.LENGTH_LONG);
            snackLocationAvailable.show();
        }
}

    @Override
    public void onLocationResult(LocationResult locationResult) {
        super.onLocationResult(locationResult); 
        mLastLocation = locationResult.getLastLocation();
        mMyLatLng = new LatLng(valueOf(mLastLocation.getLatitude()), valueOf(mLastLocation.getLongitude()));
        meMarker.setPosition(mMyLatLng);
        mMap.animateCamera(CameraUpdateFactory.newLatLngZoom(mMyLatLng, 15));
        Snackbar snak2 = Snackbar.make(findViewById(R.id.myCoordinatorLayout), R.string.location_updated, Snackbar.LENGTH_INDEFINITE);
        snak2.show();
    }
}; 
```

...

```
onCreate(){
// Build GoogleApiClient
    if (mGoogleApiClient == null) {
        mGoogleApiClient = new GoogleApiClient.Builder(this)
                .addConnectionCallbacks(this)
                .addOnConnectionFailedListener(this)
                .addApi(LocationServices.API)
                .build();

//`Build LocationRequest
        mLocationRequest = LocationRequest.create()
                .setPriority(LocationRequest.PRIORITY_HIGH_ACCURACY)
                .setInterval(2000)        // 2 seconds, in milliseconds
                .setFastestInterval(1000); // 1 second, in milliseconds
`
//     

Build LocationSettingsRequest
        LocationSettingsRequest.Builder lRbuilder = new LocationSettingsRequest.Builder();
        lRbuilder.addLocationRequest(mLocationRequest);
        mLocationSettingsRequest = lRbuilder.build();
        lRbuilder.setAlwaysShow(true);

// ...

LocationServices.FusedLocationApi.requestLocationUpdates(mGoogleApiClient, mLocationRequest, mLocationCallback, null);

//...

 LocationServices.FusedLocationApi.removeLocationUpdates(mGoogleApiClient, mLocationCallback); 
```

# java - 数组未在 Android 的 switch 语句中设置

> ID：15214281
> 
> 赞同：0
> 
> 时间：2013-03-05T01:31:25.483
> 
> 标签：java, android

我正在尝试在 Android 中另一个活动的类中设置一个数组。

这是我的主要活动：

```
public class main_activity extends Activity {
  int i = 0;
  TextView title;
  TextView inst;
  TextView word;
  EditText edittext;
  Button btn;

  @Override
  protected void onCreate(Bundle savedInstanceState) {
   // TODO Auto-generated method stub
   super.onCreate(savedInstanceState);
   setContentView(R.layout.activity_four);

   MyArray mine = new MyArray();
   mine.shuffle(getApplicationContext());
  }
} 
```

这是我的数组：

```
public class MyArray{
  String[] words = new String[2];

  public void choose(int id) {
    switch (id) {
    case 1:
      words[0] = "zero";
      words[1] = "one";
      break;
    case 2:
      words[0] = "two";
      words[1] = "three";
  }

  public void shuffle(Context mcontext) {
    MyArray mine = new MyArray();
     mine.choose(2);
     Log.d("TEST", words[1]);
     Log.d("TEST", words[2]);
  }
} 
```

我因 NullPointer 错误而强制关闭`Log.d("TEST", words[1]);`。无法弄清楚我做错了什么。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T01:36:32.697

您的`words`数组正在初始化，但仅在`mine`对象中，而不是在`shuffle`方法自己的`this`对象中。尚不清楚为什么要在方法中创建单独的`MyArray`对象`shuffle`，调用*其* `choose`方法，然后尝试访问自己的`words`数组。

编辑以匹配问题编辑以更改`myArray`为`MyArray`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T01:39:39.670

`shuffle()`将您的方法更改为：

```
public void shuffle() {
    choose(2);
    Log.d("TEST", words[0]);
    Log.d("TEST", words[1]);
} 
```

这将处理空指针，因为您没有创建`mine`不需要的 local 。

它还将解决您接下来会遇到的越界问题，因为您正在尝试访问`2`不存在的数组成员。

它还消除了`Context`你正在传递的信息，显然是无缘无故的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T01:36:15.697

你知道 onCreate MyArray 有一个大写的“m”，类的名称“m”是小写的，在日志中它说位置 2 只有 0 和 1

# java - MongoDB Java API com.mongodb.DBPortPool gotError

> ID：15214286
> 
> 赞同：3
> 
> 时间：2013-03-05T01:31:55.777
> 
> 标签：java, api, mongodb

我目前正在使用 MongoDB Java API 开发一个项目。我在这个项目上工作了一段时间，但最近遇到了一个我无法解决的问题。我正在尝试制作一个容错的数据库系统。为了模拟数据库崩溃，我让我的程序连接到我制作的 Mongodb 服务器，执行简单的读取或写入，然后关闭数据库服务器。我最初认为这会导致我调用的某些方法抛出一个`MongoException`我可以捕获然后从数据库崩溃中恢复的方法。但是，我得到一个奇怪的堆栈跟踪，上面说我正在抛出 EOFException 等等。下面是堆栈跟踪本身。

```
Mar 04, 2013 8:06:15 PM com.mongodb.DBPortPool gotError                     
WARNING: emptying DBPortPool to polaris.cs.wcu.edu/152.30.5.5:12345 b/c of error
java.io.EOFException                                                        
    at org.bson.io.Bits.readFully(Bits.java:48)                             
    at org.bson.io.Bits.readFully(Bits.java:33)                             
    at org.bson.io.Bits.readFully(Bits.java:28)                             
    at com.mongodb.Response.<init>(Response.java:40)                        
    at com.mongodb.DBPort.go(DBPort.java:124)                               
    at com.mongodb.DBPort.call(DBPort.java:74)                              
    at com.mongodb.DBTCPConnector.innerCall(DBTCPConnector.java:282)        
    at com.mongodb.DBTCPConnector.call(DBTCPConnector.java:256)             
    at com.mongodb.DBApiLayer$MyCollection.__find(DBApiLayer.java:289)      
    at com.mongodb.DBApiLayer$MyCollection.__find(DBApiLayer.java:274)      
    at com.mongodb.DBCursor._check(DBCursor.java:368)                       
    at com.mongodb.DBCursor._hasNext(DBCursor.java:459)                     
    at com.mongodb.DBCursor.hasNext(DBCursor.java:484)                      
    at edu.wcu.cs.capstone.view.AbstractViewEngine.getView(AbstractViewEngine.java:57)
    at edu.wcu.cs.capstone.transaction.ServerTransactionManager.getView(ServerTransactionManager.java:52)
    at edu.wcu.cs.capstone.transaction.ServerTransactionManager.run(ServerTransactionManager.java:183)
    at java.lang.Thread.run(Thread.java:722)                                

Caught exception                                                            
Mar 04, 2013 8:06:15 PM com.mongodb.DBPortPool gotError                     
WARNING: emptying DBPortPool to polaris.cs.wcu.edu/152.30.5.5:12345 b/c of error
java.io.IOException: couldn't connect to [polaris.cs.wcu.edu/152.30.5.5:12345] bc:java.net.ConnectException: Connec
    at com.mongodb.DBPort._open(DBPort.java:214)                            
    at com.mongodb.DBPort.go(DBPort.java:107)                               
    at com.mongodb.DBPort.call(DBPort.java:74)                              
    at com.mongodb.DBTCPConnector.innerCall(DBTCPConnector.java:282)        
    at com.mongodb.DBTCPConnector.call(DBTCPConnector.java:256)             
    at com.mongodb.DBApiLayer$MyCollection.__find(DBApiLayer.java:289)      
    at com.mongodb.DBApiLayer$MyCollection.__find(DBApiLayer.java:274)      
    at com.mongodb.DBCursor._check(DBCursor.java:368)                       
    at com.mongodb.DBCursor._hasNext(DBCursor.java:459)                     
    at com.mongodb.DBCursor.hasNext(DBCursor.java:484)                      
    at edu.wcu.cs.capstone.view.AbstractViewEngine.getView(AbstractViewEngine.java:61)
    at edu.wcu.cs.capstone.transaction.ServerTransactionManager.getView(ServerTransactionManager.java:52)
    at edu.wcu.cs.capstone.transaction.ServerTransactionManager.run(ServerTransactionManager.java:183)
    at java.lang.Thread.run(Thread.java:722)                                

DB is down.                                                                 
Exception in thread "Thread-3" java.lang.NullPointerException               
    at edu.wcu.cs.capstone.transaction.ServerTransactionManager.run(ServerTransactionManager.java:184)
    at java.lang.Thread.run(Thread.java:722) 
```

`Caught Exception`and`DB is down.`是我用来验证是否捕获某些异常的打印语句。以下是相关代码：

```
public View getView(Mongo mongo, Query query) throws MongoException,        
                                                     EOFException {         
    String connected = "";                                                  
    try {                                                                   
        connected = mongo.getConnectPoint();                                
    } catch (Exception e) {                                                 
        throw new MongoException("Error.");                                 
    }                                                                       
    System.out.println("Connected: " + connected);                          

    DB           db         = mongo.getDB(query.getServer());               
    List<DBObject> viewList   = new ArrayList<DBObject>();                  

    DBCollection collection = db.getCollection(query.getCollection());      
    DBCursor     cursor     = collection.find(query.getQuery(), excludeID); 

    try {                                                                   
        cursor.hasNext();                                                   
    } catch (Exception e) {                                                 
        System.out.println("Caught exception");                             
    }                                                                       
    while (cursor.hasNext()) {                                              
        viewList.add(cursor.next());                                        
    }                                                                       

    return new View(viewList);                                              
} 
```

如您所见，当我调用`cursor.hasNext()`. 实际上，我仍然在捕获由于`Caught exception`. 但是，我仍然得到一个堆栈跟踪，就好像它没有被捕获一样。我怀疑这与该`DBPortPoolgotError()`方法有关，但我查看了该方法的代码，无法确定它实际上在做什么，甚至无法确定它是如何被调用的。（[GrepCode 链接](http://grepcode.com/file/repo1.maven.org/maven2/org.mongodb/mongo-java-driver/2.1/com/mongodb/DBPortPool.java#DBPortPool.gotError%28java.lang.Exception%29)）

如上所述，我认为这种类型的代码的行为应该是`MongoException`在对该特定`Mongo`对象的调用失败时抛出一个，因为数据库不再处于活动状态。任何人都可以提供的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:25:53.943

这是由于驱动程序失去连接而发生的。这是 mongo 错误跟踪器上的一个问题，引用它[https://jira.mongodb.org/browse/JAVA-481](https://jira.mongodb.org/browse/JAVA-481)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-26T21:38:54.043

我遇到过同样的问题。这是因为我重新启动了 mongod 而没有重新启动我的 java 服务器（在我的例子中是 tomcat）。重启tomcat解决了这个问题，因为mongo驱动丢失了

# actionscript-3 - AS3：将影片剪辑的帧位置设置为变量

> ID：15214287
> 
> 赞同：0
> 
> 时间：2013-03-05T01:31:57.633
> 
> 标签：actionscript-3

我创建了一个滑块，并希望将滑块旋钮的 X 值链接到影片剪辑中的帧位置。它的工作方式有点像时间线栏。例如，如果滑块旋钮的 x 位置是 12，它会将 myMC 更改为第 12 帧等。

另外，我不明白如何为 myMC 的框架位置创建变量。但这就是我到目前为止所拥有的。

```
var sliderValue:uint = mySlider.sliderKnob.x / 3;

addEventListener(Event.ENTER_FRAME, onEnterFrame);
function onEnterFrame(event:Event):void {
    sliderValue = mySlider.sliderKnob.x / 3;

    sliderValue.Number = myMC.frame;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T03:34:59.150

查看此代码的一些上下文会有所帮助，但看起来您正在尝试做的事情是这样的：

```
function onEnterFrame(event:Event):void
{
    sliderValue = mySlider.sliderKnob.x / 3;
    myMC.gotoAndStop(sliderValue);
} 
```

我不知道这是否真的正确，因为它`3`似乎是一个任意数字。在任何情况下，“设置” a 的帧的方式`MovieClip`是调用`gotoAndStop`函数并传递帧号（如上）或有效的帧标签。

您肯定会想要进行一些错误检查，`sliderValue`以确保它介于`1`和之间`myMC.totalFrames`。

# javascript - 如何检查是否包含 jQuery UI 文件？

> ID：15214291
> 
> 赞同：4
> 
> 时间：2013-03-05T01:32:27.443
> 
> 标签：javascript, jquery

我在我的网站上使用 CMS 并遇到了问题。CMS 在某些页面上包含 jQuery 文件，但不是全部，我需要能够在任何地方使用 jQuery。我使用以下代码找到了包含基本 jQuery 库的解决方案：

```
if(!window.jQuery) 
{
    document.write("<" + "script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js'></" + "script>");
} 
```

但是，我不知道如何检查是否包含 jQuery UI JS 和 CSS 文件，特别是这些文件：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js"></script>
<link rel="stylesheet" type="text/css" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css"> 
```

有没有办法检查这些文件是否已包含在内，类似于上述基本 jQuery 库的代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T01:34:46.920

```
if(!jQuery.ui) 
{
    // Load Jquery UI here
} 
```

请记住，您可以使用 jQuery 的[getScript()](http://api.jquery.com/jQuery.getScript/)来加载库...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T01:34:46.380

查找`ui`jQuery 对象的属性。

```
if(!window.jQuery.ui) 
```

# java - 在 JSP 中为图像添加过期缓存

> ID：15214297
> 
> 赞同：0
> 
> 时间：2013-03-05T01:33:43.827
> 
> 标签：java, jsp, caching

我正在尝试在我的 jsp 页面上缓存图像。

我知道我可以像这样缓存所有内容：

```
httpResponse.setDateHeader("Expires", System.currentTimeMillis() + 604800000L); 
```

但我只需要为图像设置过期缓存。我怎样才能做到这一点？最简单的方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T01:45:56.417

创建一个`servlet filter`将侦听以 *.jpg、*.gif、*.png 等结尾的 URL，并在响应中添加 expires 标头。

# mysql - 使用 GROUP_CONCAT 和 DISTINCT 的 MySql 查询

> ID：15214301
> 
> 赞同：2
> 
> 时间：2013-03-05T01:33:52.267
> 
> 标签：mysql, sql, group-by, group-concat

这是我正在做的示例查询。它产生`1,A,1,A,3,B,2,B,4,C,4,C`.

```
SELECT GROUP_CONCAT(CONCAT(ID, ','), Value ORDER BY Value) FROM TableName 
```

这是一个[**SQL Fiddle 演示**](http://sqlfiddle.com/#!2/6c058/39)。

我想调用*`DISTINCT`*该列`Value`，以便它输出`1,A,2,B,4,C`。

这可能吗？我尝试的一切都会给我一个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T01:36:23.470

要获得*不同*的组合`Id, Value`，您需要`GROUP BY value`选择`MIN(ID)`子查询内部，然后`GROUP_CONCAT`以与您相同的方式在外部查询中选择。

像这样的东西：

```
SELECT GROUP_CONCAT(CONCAT(ID, ','), Value ORDER BY Value)
FROM
(
  SELECT value, MIN(ID) AS ID
  FROM tablename
  GROUP BY value
) AS t; 
```

## [更新的 SQL Fiddle 演示](http://sqlfiddle.com/#!2/6c058/46)

这会给你：

```
|      RESULT |
---------------
| 1,A,2,B,4,C | 
```

# java - Java - 检查字符串是否包含双精度值的最快方法

> ID：15214315
> 
> 赞同：3
> 
> 时间：2013-03-05T01:34:53.780
> 
> 标签：java, regex, arrays, string, double

我正在阅读许多大型文本文件，我必须检查每个文本片段是否包含双精度值。我目前使用的正则表达式代码导致我的程序运行非常缓慢，因为我总共检查了 100 亿个字符串。我知道由于我要检查的字符串数量众多，我的程序运行速度必然会很慢。但是有没有更有效和更快的方法来检查一个字符串是否是一个双精度值，从而减少程序的运行时间？谢谢

```
if (string[i].matches(".*\\d.*")) {

.....
} 
```

此外，文本文件中的字符串在我检查它们之前被读入数组，因此不会浪费时间不断地读取文本文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T01:37:13.493

使用[`Pattern`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)和[`Matcher`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html)类：

```
public static final Pattern DOUBLE = Pattern.compile("\\d");

...

if (DOUBLE.matcher(string[i]).find()) {
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T02:05:37.917

这个表达

```
"\\d+\\.\\d+([eE]\\d+)?" 
```

允许 1.1 或 1.1e1 或 1.1E1 格式。

请注意，Java 允许更多，例如 1\. 或 1\. 或 0x1p1

# jquery - 使用 Ajax 动态加载多个 JsTree

> ID：15214316
> 
> 赞同：1
> 
> 时间：2013-03-05T01:34:58.417
> 
> 标签：jquery, jstree

我想执行一个简单的搜索，返回一个 JSON 数据对象数组，这些对象会变成 jsTrees。

我已经剥离并删除了与问题无关的部分代码（主题、格式等）。

**HTML页面：**

```
Results:

<div id="results"></div> 
```

**Javascript：**

```
$.ajax({
    url: "/getJsonData", 
    dataType: "json",
}).done(function( data ) {

    var newData;

    $.each(data, function(index, value) {

        newData += '<div id="tree' + index + '"></div>';

        $('#tree' + index).jstree({
            "json_data" : v,
            "plugins" : \[ "themes", "json_data" \]
        });
    }

    $('#results').html(newData);

} 
```

典型的搜索会产生如下内容，用户可以与之交互：

## ![结果页面](../Images/99a058307ec0c958edc5bf7c8d7b5be1.png)

# java - 将相机拍摄的照片保存在Android应用程序中

> ID：15214321
> 
> 赞同：1
> 
> 时间：2013-03-05T01:35:43.557
> 
> 标签：java, android, storage, android-camera

我已经坚持了一段时间，并查看了各种教程以寻求帮助，但尚未成功。

我基本上已经在我的**应用程序**`camera`中使用了该功能来**拍照**并显示其中的一张，**但**它无法保存拍摄的照片。****`preview`****

 ******这是`java`包含我尝试根据教程使其运行的代码：

```
public class Activity_Camera extends Activity implements View.OnClickListener {

    ImageButton ib;
    ImageView iv;
    Intent i;
    public static final int cameraData = 0;
    Bitmap bmp;

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case R.id.Info:

            Intent i = new Intent(this, Help.class);
            startActivity(i);

            return true;
        default:
            return super.onOptionsItemSelected(item);
        }
    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_camera);
        initialise();
    }

    private void initialise() {
        iv = (ImageView) findViewById(R.id.ivPicReturn);
        ib = (ImageButton) findViewById(R.id.ibTakePic);

        ib.setOnClickListener(this);
    }

    public void onClick(View v) {
        switch (v.getId()) {
        case R.id.ibTakePic:
            i = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
            startActivityForResult(i, cameraData);
            break;
        }
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        if (resultCode == RESULT_OK) {
            Bundle extras = data.getExtras();
            bmp = (Bitmap) extras.get("data");
            iv.setImageBitmap(bmp);

            Toast.makeText(this, "Image saved to:\n" +
                    data.getData(), Toast.LENGTH_LONG).show();
       } else if (resultCode == RESULT_CANCELED) {
           // User cancelled the image capture
       } else {
           // Image capture failed, advise user
       }
    }

    private static Uri getOutputMediaFileUri(int type){
          return Uri.fromFile(getOutputMediaFile(type));
    }
    private static File getOutputMediaFile(int type){

        File mediaStorageDir = new File(Environment.getExternalStoragePublicDirectory(
                  Environment.DIRECTORY_PICTURES), "MyCameraApp");

        if (! mediaStorageDir.exists()){
            if (! mediaStorageDir.mkdirs()){
                Log.d("MyCameraApp", "failed to create directory");
                return null;
            }
        }
        File mediaFile;
        if (type == cameraData){
            mediaFile = new File(mediaStorageDir.getPath() + File.separator +
            "IMG_" + ".jpg");
        } else {
            return null;
        }
        return mediaFile;
    }
} 
```

我已经在文件中包含了所有必需`permissions`的`Manifest.xml`内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T02:38:06.287

```
File imagesFolder = new File(Environment.getExternalStorageDirectory(), "MyImages");
imagesFolder.mkdirs();   
File image = new File(imagesFolder, "image.jpg");
Uri uriSavedImage = Uri.fromFile(image);
imageIntent.putExtra(MediaStore.EXTRA_OUTPUT, uriSavedImage); 
```

看看这个链接。[如何将Android相机中的图像保存到特定文件夹？](https://stackoverflow.com/questions/7266572/how-to-save-images-from-camera-in-android-to-specific-folder)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T02:33:23.470

在`onClick`您调用 Intent 的地方，您应该使用现有的这样的指定输出文件`getOutputMediaFileUri`：

```
 i = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
    i.putExtra(MediaStore.EXTRA_OUTPUT, getOutputMediaFileUri());
    startActivityForResult(i, cameraData); 
```

所以现在你告诉相机将文件保存在哪里，而不是询问它保存在哪里。这就是我让我的相机应用程序工作的方式，以便我可以在拍摄后访问照片。******

# api - JDK对自己的api有一些优化吗？

> ID：15214322
> 
> 赞同：0
> 
> 时间：2013-03-05T01:35:48.677
> 
> 标签：api, arraylist, jvm, java

大家好，我已将 ArrayList 源代码从 java.util 包复制到我自己的包中。但我发现它比原来的 java.util.ArrayList 运行得更好。

测试代码：

```
@Test
public void jdkApiPerformance() {
    long startTime = System.nanoTime();
    java.util.ArrayList<Object> list = new java.util.ArrayList<Object>();
    long costTime = System.nanoTime() - startTime;
    System.out.println("jdkPerformance cost " + costTime + "ns.");
}

@Test
public void myApiPerformance() {
    long startTime = System.nanoTime();
    question.jdk.ArrayList<Object> list = new question.jdk.ArrayList<Object>();
    long costTime = System.nanoTime() - startTime;
    System.out.println("apiPerformance cost " + costTime + "ns.");
} 
```

该测试的输出如下：

```
jdk性能消耗10263ns。
api 性能消耗 1244158ns。

```

显然，我的 api 运行速度比 JDK api 慢。

然后我为此测试添加了一个@Before 方法：

```
@Before
public void setUp() {
    new java.util.ArrayList<Object>();
    new question.jdk.ArrayList<Object>();
} 
```

这种情况下的输出发生了变化：

```
jdk性能消耗9932ns。
api 性能花费 1324ns。

```

我的 api 运行速度比 JDK api 快！！？

对于这种情况，我真的很困惑。请帮助我。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T02:47:42.143

1）使用`System.nanoTime()`可能会给您带来扭曲的结果，因为它取决于操作系统的调度程序粒度：

> 此方法提供纳秒精度，但不一定提供纳秒分辨率（即值更改的频率） - 不保证分辨率至少与 currentTimeMillis() 的分辨率一样好。

2) 要进行有意义的基准测试，您必须先*预热*JVM

3) 对于研究，您可以使用以下基准库之一：

*   [http://code.google.com/p/caliper/](http://code.google.com/p/caliper/)
*   [http://perf4j.codehaus.org/](http://perf4j.codehaus.org/)
*   [http://jrat.sourceforge.net/](http://jrat.sourceforge.net/)

4) 一般来说，您的问题的答案是：**是**的，在某些情况下，Sun/Oracle 的 JVM 热替换了一些 JDK 代码，例如`Math.sqrt()`针对给定操作系统/硬件优化的实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T02:50:40.620

*   JVM 按需加载类。由于 java.util.ArrayList 是一个如此基础的类，它很可能在您的基准测试开始之前已经加载，但 question.jdkArrayList 可能是第一次使用。这涉及到磁盘 I/O 来读取类文件，这本身比创建新实例花费的时间要多几个数量级。此外，java.util.ArrayList 更有可能被 JIT 编译器优化。

*   根据其 javadoc，System.nanoTime() 具有“纳秒精度，但不一定是纳秒精度”。用它来测量微秒级的延迟充其量是偶然的。此外，它测量的是挂钟时间，而不是 CPU 时间。如果您的 cpu 被占用（例如，在您的开发环境中绘制控制台视图），这将计入报告的时间。

# javascript - 我可以从数字 rel 属性加载数组吗？

> ID：15214324
> 
> 赞同：0
> 
> 时间：2013-03-05T01:36:10.020
> 
> 标签：javascript, html, arrays

我想知道是否有一种方法可以根据有序的数字 rel 属性自动创建数组，而不是使用 ID 并将超过 35 个缩略图图像手动加载到数组中。

```
<body>
    <div id="container">
       <a id="first" class="object" rel="0"></a>
       <a id="second" class="object" rel="1" ></a>
       <a id="third" class="object rowEnd" rel="2" ></a>
    </div>
</body>
<script>
    var objectArray=new Array();
    objectArray[0]="#first";
    objectArray[1]="#second";
    objectArray[2]="#third";
</script> 
```

以上是html和手动创建的对象ID数组。

我不想为数组中的每个插槽编写一个 id 标签，而是“自动”生成一个包含“.object”类和唯一 rel 标签属性的所有对象的数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T03:18:52.467

您可以从 DOM 中选择您需要的特定元素，然后遍历它们以填充您的数组。

在纯 JS 中：

```
var objectArray = [];
var objects = document.getElementById('container').getElementsByTagName('a');

for (var i = 0; i < objects.length; i++) {
    objectArray[objects[i].rel] = objects[i].id;
} 
```

参见 jsFiddle 例如：http: [//jsfiddle.net/nxJP5/1/](http://jsfiddle.net/nxJP5/1/)

# php - php中存在使用函数

> ID：15214326
> 
> 赞同：-1
> 
> 时间：2013-03-05T01:36:18.260
> 
> 标签：php

我正在使用 php 中存在的函数，但它给了我：bool(false)。我的编码中的语法错误在哪里？

```
<?php

class Test{

  public function moneydays(){

    return null;

  }

}
var_dump(function_exists('$moneydays'));
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T01:38:27.023

在这种情况下，您必须使用 method_exists

```
method_exists('Test','moneydays'); 
```

例子

```
echo method_exists('Test','moneydays') ? 'Yes' : 'No'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T01:37:33.373

在您的代码示例中，您有两个错误：

1.  `$moneydays`不存在
2.  `Test::moneydays()`是一种**方法**。不是函数。

要扩展#2，即使您有正确的代码`var_dump(function_exists('moneydays'));`，它仍然不会给您期望的结果，因为[`function_exists()`](http://us3.php.net/manual/en/function.function-exists.php)只会告诉您函数是否定义了它正在使用的范围。要测试一个方法是否存在，您需要使用[`method_exists()`](http://us3.php.net/manual/en/function.method-exists.php)这将检查一个*类*以查看它是否具有指定的*方法*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T01:39:25.610

对于初学者来说，`$`不应该在那里。但另外你正试图在一个类中找到一个函数，所以你需要使用`method_exists`.

由于方法不是静态的，你必须先实例化类，然后检查它是否有方法：

```
$instance = new Test;
var_dump(method_exists($instance,"moneydays")); 
```

# c++ - 无法使用 C++ stdlib 系统调用运行 make

> ID：15214327
> 
> 赞同：4
> 
> 时间：2013-03-05T01:36:19.347
> 
> 标签：c++, makefile, std

我在 C++ 中有以下代码

```
 if (should_run_make) {
    std::string make = "make -C ";
    make.append(outdir);
    std::cout << "Make cmd is " << make << std::endl;
    system(make.c_str());
  } 
```

这会报告以下内容：

> make cmd 是 make -C /home/hamiltont/temp/ make: 进入目录 `/home/hamiltont/temp' make: *** No targets. Stop. make: Leaving directory`/home/hamiltont/temp'

但是，手动操作可以通过多种方式正常工作，例如

```
[hamiltont@4 generator]$ make -C /home/hamiltont/temp/
make: Entering directory `/home/hamiltont/temp'
g++ -O3 -I/usr/include/openmpi-x86_64 -L/usr/local/lib -L/usr/lib64/openmpi/lib -lmpi -lmpi_cxx -lboost_serialization -lboost_mpi  stg_impl.cpp -o impl
make: Leaving directory `/home/hamiltont/temp'

[hamiltont@4 generator]$ cd /home/hamiltont/temp/
[hamiltont@4 temp]$ make
g++ -O3 -I/usr/include/openmpi-x86_64 -L/usr/local/lib -L/usr/lib64/openmpi/lib -lmpi -lmpi_cxx -lboost_serialization -lboost_mpi  stg_impl.cpp -o impl 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T01:58:02.970

您是从 C 程序中生成 makefile 吗？这是我可以想象会导致该特定错误消息的唯一原因。

```
make: *** 没有目标。停止。 

```

## 重现错误

以下是我如何生成该消息：

```
#include <stdio.h>
#include <stdlib.h>
int main()
{
    FILE *fp = fopen("Makefile", "w");
    fputs("all:\n\techo Done.\n", fp);
    system("make");
    fclose(fp);
    return 0;
} 
```

可以预见的是，这会打印：

```
make: *** 没有目标。停止。

```

我说可以预见，因为`Makefile`将是空的！这是因为 IO 被缓冲...

## 固定版本

所以，我在调用之前关闭文件`system()`，这会刷新缓冲区（`fflush()`也可以解决问题）：

```
#include <stdio.h>
#include <stdlib.h>
int main()
{
    FILE *fp = fopen("Makefile", "w");
    fputs("all:\n\techo Done.\n", fp);
    fclose(fp);
    system("make");
    return 0;
} 
```

输出：

```
回声完成。
完毕。

```

为了清楚起见，我使用了 C 的 IO 函数，但同样的规则适用于`<iostream>`.

# ruby-on-rails - 在 json 响应中转换两个模型属性

> ID：15214329
> 
> 赞同：4
> 
> 时间：2013-03-05T01:36:23.507
> 
> 标签：ruby-on-rails, ruby, json, ruby-on-rails-3

我在 ruby​​ on rails 上，我有两个模型，目标是在两个模型上搜索网站，我正在使用 twitter typeahead 但我遇到的问题是 json 必须是一个对象。

我不确定将两个对象合二为一的最佳方法是什么。这里的代码

```
@users= Search.user(params[:query])
@articles= Search.article(params[:query])
respond_to do |format|
  format.html # index.html.erb
  format.json {
    render :json => {
     :art=> @articles.map(&:title),
     :user=> @users.map(&:first_name)
  }}
  end
end 
```

我不确定最好的方法是什么，或者我似乎找不到将这两个模型合并为一个的最佳文档。我不知道 to_json、as_json 或 concat 是否是最好的。

这个想法是从以下 json 得到结果

```
{"art":["John","Serge","Dean","feng","Heather"],"user":["Ontario high school teachers drop next week's walkout plan","Air Canada to appeal Quebec court ruling on Aveos"]} 
```

到以下

```
{"result":["John","Serge","Dean","feng","Heather", "Ontario high school teachers drop next week's walkout plan","Air Canada to appeal Quebec court ruling on Aveos"]} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T01:50:06.883

因此，如果您想获取用户和文章的数组：

```
respond_to do |format|
  format.json  { render :json => {:art => @articles, 
                                  :user => @users }}

  end
end 
```

* * *

根据您的编辑：

```
format.json {
  render :json => {
    result => @articles.map(&:title) | @users.map(&:first_name)
}} 
```

* * *

根据最后的评论，只需捕获 nil 问题：

```
format.json {
  render :json => {
    result => (@articles.map(&:title) || []) | (@users.map(&:first_name) || [])
}} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T01:49:10.753

我可以建议您使用 JSON 视图模板吗？您有很多选择，但最流行的两个是 RABL 和 JBuilder。我强烈推荐 RABL gem。

它们受欢迎是有原因的，它们使渲染 json 变得轻而易举

你可以在这里找到 RABL gem [https://github.com/nesquena/rabl](https://github.com/nesquena/rabl)

你可以在这里找到 JBuilder gem [https://github.com/rails/jbuilder](https://github.com/rails/jbuilder)

两者都有出色的 railsasts，展示了如何使用它们。

RABL [http://railscasts.com/episodes/322-rabl](http://railscasts.com/episodes/322-rabl)

JBuilder [http://railscasts.com/episodes/320-jbuilder](http://railscasts.com/episodes/320-jbuilder)

我赞成 RABL 纯粹是出于个人喜好，你应该看看这两个选项，看看哪个最适合你。

我通常不建议添加 gem，但我认为您会发现这些解决方案中的任何一个都可以满足您的需求

# java - 同步对 Volatile 字段的写访问（廉价的读写块）

> ID：15214331
> 
> 赞同：8
> 
> 时间：2013-03-05T01:36:35.867
> 
> 标签：java, multithreading, synchronization, thread-safety, volatile

假设我有以下课程将被大量阅读，但只是偶尔写入。它将在多线程 Web 应用程序中使用，因此它需要是线程安全的：

```
public class Foo {
    private volatile String foo;
    public String getFoo() {
        return foo;
    }
    public synchronized String setFoo(String in) {
        this.foo = in;
    }
} 
```

Java Concurrency ( [http://www.ibm.com/developerworks/java/library/j-jtp06197/index.html](http://www.ibm.com/developerworks/java/library/j-jtp06197/index.html) ) 指出这是一种保护写访问同时改进读访问的脆弱方法。有什么比这种模式更强大的替代方案？或者如果 foo 需要在读取繁重的环境中可变，是否有任何替代方案？谢谢你。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-05T01:43:59.793

Volatile 提供对字段的快速线程安全无锁访问，无需同步

```
private volatile String foo;

public String getFoo() {
    return foo;
}
public void setFoo(String in) {
    this.foo = in;
} 
```

volatile 解决了 3 个问题 1) 内存可见性 2) 双字段和长字段的原子写入 3) 禁止指令重新排序。但是，如果您需要对一个字段进行多次操作作为一个原子事务（例如增量），这还不够。此代码已损坏

```
private volatile int id;

public void incrementId() {
     id++;
} 
```

因为如果 2 个线程同时读取并递增它并保存结果，那么第一次递增的结果将被第二次递增的结果覆盖。为了防止这种情况发生，我们需要使用同步

```
 private int id;

 public synchronized int nextId() {
       return ++id;
 } 
```

或 java.util.concurrent.atomic 包

```
 private AtomicInteger id = new AtomicInteger();

 public void incrementId() {
     return id.incrementAndGet();
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T01:44:08.373

如果您所做的只是设置 foo，那么您不需要同步该方法。使参考 volatile 就足够了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T09:53:01.397

在您说的[链接](http://www.ibm.com/developerworks/java/library/j-jtp06197/index.html#3.1)中，有“不经常更新”使用的代码：

```
@ThreadSafe
public class CheesyCounter {
    // Employs the cheap read-write lock trick
    // All mutative operations MUST be done with the 'this' lock held
    @GuardedBy("this") private volatile int value;

    public int getValue() { return value; }

    public synchronized int increment() {
        return value++;
    }
} 
```

该`increment`方法仅使用同步，因为它所做的不仅仅是设置`value`描述中所述的值，如果您所做的`this.foo = in;`只是原子。在本文中，“这种模式的脆弱性”意味着当您混合使用 volatile 和其他同步方法来做的不仅仅是简单的示例时，事情会很快变得混乱。*有关Condition*和*Lock接口以及**ReentrantLock*类，请参见包 java.util.concurrent.locks 。我认为，使用同步是作者所说的“更强的选择”。如果您还不知道，您还应该看到*Object.wait*、*Object.notify*和*Object.notifyAll 。*

# mysql - MYSQL：多对多（项目 x_ref 属性）WHERE 项目不包含属性

> ID：15214332
> 
> 赞同：0
> 
> 时间：2013-03-05T01:36:44.757
> 
> 标签：mysql, sql

我有 3 张桌子；一个项目表、一个属性表和一个 x_ref 表，该表将项目链接到属性并且还包含该属性的值：

```
CREATE TABLE IF NOT EXISTS `items` (
  `item_id` INT(11) NOT NULL AUTO_INCREMENT,
) ENGINE=InnoDB DEFAULT CHARSET=utf8 row_format=COMPRESSED; 

CREATE TABLE IF NOT EXISTS `properties` (
  `property_id` INT(11) NOT NULL AUTO_INCREMENT,
  `property_name` VARCHAR(255) NOT NULL,    
) ENGINE=InnoDB DEFAULT CHARSET=utf8 row_format=COMPRESSED;

CREATE TABLE IF NOT EXISTS `item_xref_properties` (
  `item_id` INT(11) NOT NULL,
  `property_id` INT(11) NOT NULL,   
  `property_value` DECIMAL(8,1) NOT NULL,
  PRIMARY KEY  (`item_id`,`property_id`),
  INDEX (`item_id`),
  INDEX (`property_id`),
  INDEX (`property_value_1`) 
) ENGINE=InnoDB DEFAULT CHARSET=utf8 row_format=COMPRESSED; 
```

我有这样的查询：

*获取包含属性“A”、“B”和“C”的所有项目，其中“A”在 100 到 200 之间，“B”在 50 到 80 之间，“C”在 10 到 30 之间*

翻译为：

```
SELECT itm.item_id 
FROM items itm 
    JOIN item_types ityp 
        ON itm.type_id = ityp.type_id
   JOIN item_xref_properties ixp1 
        ON itm.item_id = ixp1.item_id 
            AND ixp1.property_value 
            BETWEEN '100' AND '200' 
   JOIN properties prop1 
        ON ixp1.property_id = prop1.property_id 
            AND prop1.property_name = 'Property A' 
   JOIN item_xref_properties ixp2 
        ON itm.item_id = ixp2.item_id 
            AND ixp2.property_value 
            BETWEEN '50' AND '80' 
   JOIN properties prop2 
        ON ixp2.property_id = prop2.property_id 
            AND prop2.property_name = 'Property B' 
   JOIN item_xref_properties ixp3 
        ON itm.item_id = ixp3.item_id 
            AND ixp3.property_value_1 
            BETWEEN '10' AND '30' 
   JOIN properties prop3 
        ON ixp3.property_id = prop3.property_id 
            AND prop3.property_name = 'Property C' 
```

如果有点不雅，就很直截了当。

我的问题是我需要像上面那样查询这个表，并找到***没有***像这样指定属性的项目：

*获取包含属性“A”、“B”和“C”的所有项目，其中“A”在 100 到 200 之间“B”在 50 到 80 之间“C”在 10 到 30 之间但**不**包含属性“D” '或'E'*

我尝试了多种方法将其转换为有效的查询，但无济于事。这甚至可能吗？或者我是否将不得不展平表格并在项目表中为每个属性设置单独的列（不理想，因为有超过 100 个属性，并且列表将来可能会增长）

任何帮助将非常感激！谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T19:46:31.160

对不起，简洁和误导性的答复。

再看一遍，我看到了 UNION：

```
SELECT itm.item_id 
FROM items itm 
    JOIN item_types ityp 
        ON itm.type_id = ityp.type_id
   JOIN item_xref_properties ixp1 
        ON itm.item_id = ixp1.item_id 
            AND ixp1.property_value 
            BETWEEN '100' AND '200' 
   JOIN properties prop1 
        ON ixp1.property_id = prop1.property_id 
            AND prop1.property_name = 'Property A' 
UNION
SELECT itm.item_id 
FROM items itm 
    JOIN item_types ityp 
        ON itm.type_id = ityp.type_id
    JOIN item_xref_properties ixp2 
        ON itm.item_id = ixp2.item_id 
            AND ixp2.property_value 
            BETWEEN '50' AND '80' 
   JOIN properties prop2 
        ON ixp2.property_id = prop2.property_id 
            AND prop2.property_name = 'Property B' 
UNION
SELECT itm.item_id 
FROM items itm 
    JOIN item_types ityp 
        ON itm.type_id = ityp.type_id
    JOIN item_xref_properties ixp3 
        ON itm.item_id = ixp3.item_id 
            AND ixp3.property_value_1 
            BETWEEN '10' AND '30' 
   JOIN properties prop3 
        ON ixp3.property_id = prop3.property_id 
            AND prop3.property_name = 'Property C' 
```

您还从项目加入到 item_types，但对信息不做任何事情（只是确认 item.type_id 是有效值？）。你可能可以把它拿出来。

然后，如果您所追求的只是 item_id，那么您可以在每次访问 item_xref_properties_table 时获得它，而无需访问 items 表，这会使事情变得更好。

希望这更有用。

# android - 不应该出现在 ListView 的第一个条目中的图像

> ID：15214342
> 
> 赞同：0
> 
> 时间：2013-03-05T01:38:02.703
> 
> 标签：android, android-listview, android-cursoradapter

这是我正在处理的应用程序中 ListView 的右侧。

![这里有两颗星。 应该只有一个。](../Images/4594b72a061fbab7a1a7b0da8cf79572.png)

如您所见，`ImageView`在 9 个条目的列表中，一个星号出现了两次。

这是 this 使用的 BindView`ListView`方法`CursorAdapter`：

```
@Override
public void bindView(View v, Context context, Cursor c) {
    AQuery aq = new AQuery(v);
    MyDatabaseHelper helper = new MyDatabaseHelper(context); //Used for various bits of text-setting. Is largely unrelated to the question.
    boolean isDefault = (c.getShort(c.getColumnIndexOrThrow(MyDatabaseHelper.DEFAULT))==1);
    Log.d("Binding account to view", "Entry "+currentID+"isDefault: "+isDefault);
    v.setTag(isDefault);
    if (isDefault) {
        aq.id(R.id.favStar).visible(); //favStar defaults to GONE.
    }
    helper.close();
} 
```

如您所见，它检查我的数据库中的列是否读取 1，然后将该位布尔数学存储在变量中。使用该变量，它标记`View`，报告该变量的状态，然后当且仅当变量为真时，它才使星形可见。

这是添加第 9 个条目之前正在填充的列表的日志输出：

```
02-28 10:50:23.381: D/Binding account to view(20759): Entry 1isDefault: false
02-28 10:50:23.397: D/Binding account to view(20759): Entry 2isDefault: false
02-28 10:50:23.413: D/Binding account to view(20759): Entry 3isDefault: false
02-28 10:50:23.420: D/Binding account to view(20759): Entry 4isDefault: false
02-28 10:50:23.436: D/Binding account to view(20759): Entry 5isDefault: false
02-28 10:50:23.444: D/Binding account to view(20759): Entry 6isDefault: false
02-28 10:50:23.459: D/Binding account to view(20759): Entry 7isDefault: false
02-28 10:50:23.475: D/Binding account to view(20759): Entry 8isDefault: true
02-28 10:50:23.498: D/Binding account to view(20759): Entry 1isDefault: false
02-28 10:50:23.506: D/Binding account to view(20759): Entry 2isDefault: false
02-28 10:50:23.530: D/Binding account to view(20759): Entry 3isDefault: false
02-28 10:50:23.553: D/dalvikvm(20759): GC_CONCURRENT freed 122K, 2% free 11069K/11271K, paused 3ms+15ms, total 43ms
02-28 10:50:23.553: D/Binding account to view(20759): Entry 4isDefault: false
02-28 10:50:23.577: D/Binding account to view(20759): Entry 5isDefault: false
02-28 10:50:23.592: D/Binding account to view(20759): Entry 6isDefault: false
02-28 10:50:23.600: D/Binding account to view(20759): Entry 7isDefault: false
02-28 10:50:23.616: D/Binding account to view(20759): Entry 8isDefault: true 
```

（添加第 9 个条目只会在日志输出中添加一个“Entry 9isDefault:false”。）

谁能告诉我为什么我的列表中有一个星出现在调试日志指出不应该出现的位置？无论是`ListFragment`出现`ListView`在其中的 Activity 还是包含该 Activity 的`ListFragment`任何地方都对 R.id.favStar 进行任何引用。

进一步详细说明：我也尝试过不使用 AQuery （使用`FindViewById()`and `setVisible()`），结果没有更改为调试日志中显示的预期结果。**被窃听的星星总是出现在第一个位置，并且只有在列表中的另一颗星星应该出现时才会出现。**（DatabaseHelper 类在设置 ISDEFAULT=1 之前将数据库中的所有项目设置为 ISDEFAULT=0。）奇怪的是，使用 ADT 为您提供的主/详细信息流模板，这个错误在我的 Nexus 7 上是不可复制的，但可以在我的 Galaxy Nexus 和模拟器上找到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T01:48:05.603

如果`isDefault`是假的，你永远不会隐藏你的 favStar 视图。如果您的元素设置为 true 并且您显示视图，则星形将可见，直到您再次隐藏它。当视图被回收时，即使它不应该出现，星星仍然会显示。您在 nexus 7 上看不到它，因为您可能没有足够的元素来实现这一点，因为它的屏幕比手机的高。无论如何，将您的代码更改为类似的东西应该可以解决它：

```
if (isDefault) {
  aq.id(R.id.favStar).visible(); //favStar defaults to GONE.
} else {
  //set favStar to View.GONE here
} 
```

# php - 在控制器内的命令行中执行 python - PHP/CodeIgniter

> ID：15214346
> 
> 赞同：5
> 
> 时间：2013-03-05T01:38:33.843
> 
> 标签：php, python, codeigniter

在我的`automation.php`控制器内部，我具有以下功能：

```
public function deploy_test() {

      echo json_encode(system("python --version"));
 } 
```

当用户想要部署一个测试时，通过点击`test`网页中的一个按钮，他就能完成这样的任务。但是，当我单击`test`按钮时，我的输出是：

```
"" 
```

同时，当我使用命令执行相同的功能时：

```
public function deploy_test() {

    echo json_encode(system("ls -l"));
} 
```

我越来越：

```
total 32
drwxr-xr-x. 15 philippe philippe 4096 Mar  4 16:48 application
drwxrwxr-x.  2 philippe philippe 4096 Mar  4 17:28 css
-rw-r--r--.  1 philippe philippe 6357 Jan 30 11:53 index.php
drwxrwxr-x.  2 philippe philippe 4096 Feb 27 15:38 js
-rw-r--r--.  1 philippe philippe 2496 Jan 30 11:53 license.txt
drwxr-xr-x.  8 philippe philippe 4096 Jan 30 11:53 system
drwxr-xr-x. 12 philippe philippe 4096 Jan 30 11:53 user_guide 
```

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T05:58:40.373

问题**不**在于您的代码或 PHP。

问题在于您的权限。

php 使用在 apache 的 env-vars 中设置的权限。

理想情况下设置为：

```
User ${APACHE_RUN_USER}
Group ${APACHE_RUN_GROUP} 
```

在您的 apache2 / httpd conf 文件下。

例如：

尝试运行：

```
<?= `whoami` ?> 
```

通过您的外壳和浏览器。

您的浏览器可能会显示 www-data 和 shell 会显示您的用户名，或者如果您在 AWS - 默认情况下，您会得到`root`

您不必使用`system()`，`exec()`而是使用。

我们应该接近：

```
echo json_encode(exec("python --version")); 
```

执行操作将要求您设置正确的用户和组。

查找：[在 shell 中，“2>&1”是什么意思？](https://stackoverflow.com/questions/818255/in-the-bash-shell-what-is-21)

所以你的代码应该是：

```
echo json_encode(exec("python --version 2>&1")); 
```

希望能帮助到你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T05:43:59.457

这适用于我的生产服务器

```
public function deploy_test() {
    echo json_encode(system("python --version 2>&1"));
} 
```

与输出

```
Python 2.7.3
"Python 2.7.3" 
```

unix 命令的输出打印两次，因为 system() 本身将结果输出到浏览器。所以 exec() 可以用来代替 system 来避免这种情况。

```
public function deploy_test() {
    echo json_encode(exec("python --version 2>&1"));
} 
```

哪个输出

```
"Python 2.7.3" 
```

正如预期的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T12:08:32.940

我怀疑它不在路径中。尝试：

键入 python 命令的完整路径（例如`/usr/bin/python --version`）

1.  使用命令 which, 'which python' 找出

2.  尝试从命令行执行你的脚本，'php script.php' => 有时网络服务器会设置不同的东西

3.  确保启用了错误显示

    ini_set('display_errors',1);

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T10:47:13.140

这有点骇人听闻，但即使您不允许执行 python（“用户”CI 就是这种情况），您也可以找到带 1 个小数的版本号。

```
//find python path
exec("which python", $path);

//show all subdirs in python    
exec("ls -l ".$path[0]."*", $output);
$output = implode("\n", $output);

//preg match on version numbers    
preg_match_all("#python(\d+(?:\.\d{1,2})?)#", $output , $matches);
$installed_versions = $matches[1];

//sort in reversing order
$versions_sorted_desc = array_reverse($installed_versions);

//latest version is element 0
$latest_version = $versions_sorted_desc[0];

echo $latest_version; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T15:24:54.990

系统只返回最后一行。 [系统](http://php.net/manual/en/function.system.php)

```
public function deploy_test() {

      system("python --version", $out);
      echo json_encode(implode($out));
 } 
```

# iphone - 如何在 Xcode 中使用第三方（或自创）表情符号来自定义 SMS 应用程序

> ID：15214347
> 
> 赞同：2
> 
> 时间：2013-03-05T01:38:40.343
> 
> 标签：iphone, ios, xcode, sms, emoticons

我正在使用开源 AcaniChat 制作一个短信应用程序。但该应用程序的重点是拥有一组特定的表情符号。在为前端自定义颜色等之后。我想包含一组自定义表情符号，供用户相互发送。

任何想要使用表情符号的人显然都必须下载该应用程序，因为我知道我无法将自定义表情符号嵌入到 iOS 的 unicode 表情符号中，这就是为什么我要为整个事情使用单独的 SMS 应用程序。

所以要清楚。我不想在我的应用程序中使用 iOS 的表情符号。我想使用我自己的原创的（比如在“Viber”应用程序中）

我该怎么做呢？是否有开源插件或我可以在 xcode 中使用的东西？

谢谢你。

# python - 使用 Python TKinter / imageTK 在屏幕上的图像之间淡入淡出

> ID：15214350
> 
> 赞同：3
> 
> 时间：2013-03-05T01:39:02.373
> 
> 标签：python, tkinter, python-imaging-library

我是一个 python 新手，并且一直在制作一个有点奇怪的幻灯片脚本，它循环显示图像，并且还从另一个文件中获取一个变量来“解决”图像。

我确定我的代码是悲惨的。但它确实有效（见下文）！

我的问题是 - 我如何让它在图像之间褪色而不是生涩地暂时变成白色然后到它当前所做的下一个图像？我应该看一下转换模块吗？

```
from Tkinter import *
import Image, ImageTk, random, string

class MyApp(Tk):

def __init__(self):
    Tk.__init__(self)
    fr = Frame(self)
    fr.pack()
    self.canvas  = Canvas(fr, height = 400, width = 600)
    self.canvas.pack()

    self.old_label_image = None
    self.position = 0
    self.command = 0
    self.oldcommand = 0

    self.slideshow()
    self.debug()

def debug(self):
    self.QUIT = Button(self)
    self.QUIT["text"] = "QUIT!" + str(self.command)
    self.QUIT["fg"]   = "red"
    self.QUIT["command"] =  self.quit

    self.QUIT.pack({"side": "right"})

def slideshow (self):

    if self.command != self.oldcommand:
        self.after_cancel(self.huh)
        # run through random between 2-5 changes 
        # then settle on command for 30 seconds
        self.title("Title: PAUSE")
        self.oldcommand = self.command
        self.slideshow()
    else:
        file = str(self.position) + '.jpg'
        image1 = Image.open(file)
        self.tkpi = ImageTk.PhotoImage(image1)
        label_image = Label(self, image=self.tkpi)
        label_image.place(x=0,y=0,width=image1.size[0],height=image1.size[1])
        self.title("Title: " + file)

        if self.old_label_image is not None:
            self.old_label_image.destroy()
        self.old_label_image = label_image

        # make this random instead of pregressional
        if self.position is not 1:
            self.position = self.position + 1
        else:
            self.position = 0

        commandfile = open('command.txt', 'r')
        self.command = string.atoi(commandfile.readline())
        commandfile.close()

        int = random.randint(2000, 5000)
        self.huh = self.after(int, self.slideshow)
        #self.after_cancel(huh) - works ! so maybe can do from below Fn?

if __name__ == "__main__":
root = MyApp()
root.mainloop() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-15T21:48:08.530

这可以使用混合功能来实现。

```
 Image.blend(image1, image2, alpha) ⇒ image 
```

通过使用恒定 alpha 在给定图像之间进行插值来创建新图像。两个图像必须具有相同的大小和模式。

```
out = image1 * (1.0 - alpha) + image2 * alpha 
```

如果 alpha 为 0.0，则返回第一个图像的副本。如果 alpha 为 1.0，则返回第二个图像的副本。对 alpha 值没有限制。如有必要，结果会被剪裁以适合允许的输出范围。

所以你可以有这样的东西：

```
alpha = 0
while 1.0 > alpha:
    image.blend(img1,img2,alpha)
    alpha = alpha + 0.01
    label_image.update() 
```

一个例子在这里，没有时间测试这个，但你明白了-

```
from PIL import image
import time
white = image.open("white_248x.jpg")
black = image.open("black_248x.jpg")
new_img = image.open("white_248x.jpg")
root = Tk()
image_label = label(root, image=new_img)
image_label.pack()
alpha = 0
while 1.0 > alpha:
    new_img = image.blend(white,black,alpha)
    alpha = alpha + 0.01
    time.sleep(0.1)
    image_label.update()
root.mainloop() 
```

# php - 如何使用 img 标签设置背景图像

> ID：15214353
> 
> 赞同：0
> 
> 时间：2013-03-05T01:39:24.120
> 
> 标签：php, html, css

我有一个 php 方法，它将返回一个 html IMG 标记。例如`ImageClass::getImage('sample.png' , 'myTilte')`将返回一个字符串为`<img src="sample.png" title="mtTilte" />`

在我的 css 文件中有我使用的地方

```
        div.错误{
        背景图片：url（'sample.png'）；
        背景重复：不重复；
        }

```

我如何使用`ImageClass::getImage`方法来代替 css 中的 url() 方法来获取背景图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T01:46:38.700

如果可能的话，我可能会避免将 php 脚本放在你的样式表中。但如果你真的想要，你需要让服务器知道

1.  将 PHP 输出的内容解释为样式表
2.  在 CSS 文件中执行 PHP 脚本

[这两个问题都在网络](http://www.phpro.org/articles/Embedding-PHP-In-CSS.html)上和[StackOverflow](https://stackoverflow.com/questions/5338972/how-to-include-php-code-in-css)上得到了几次回答，所以我的回答并不是什么开创性的。但为了完整起见，我将重复答案：

# 将 PHP 输出解释为样式表

首先链接 .php 文件而不是 .css 文件。然后在您的 PHP 文件中设置 Mime 类型，以便服务器将其输出解释为 CSS。用代码术语来说，它看起来像这样：

**HTML**

```
<link rel="stylesheet" href="style.php"> 
```

**PHP**

将以下代码放在*任何*文本输出之前：

```
header("Content-type: text/css"); 
```

# 在 .css 文件中执行 PHP 脚本

另一种方法需要一些服务器配置。在 Apache 上，最简单的方法是将其添加到[.htaccess 文件中](http://www.javascriptkit.com/howto/htaccess.shtml)：

```
AddType application/x-httpd-php .css 
```

这将导致 Apache 在 .css 文件中的 .php 文件中执行相同的操作：即查找 PHP 脚本并执行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T01:55:43.583

你可以简单地做 CSS 内联。

```
<?php 
$image = ImageClass::getImage('sample.png','myTitle');
$bg_img = explode(" ",$image);
$src = substr(strpos('"',$bg_img),strlen($bg_image)-1);
echo "<div style='background-image: url(".$src.");' ></div> 
```

我无法对此进行测试，但我相信你明白我的意思:)

# java - Java - 改变指针改变值？

> ID：15214366
> 
> 赞同：0
> 
> 时间：2013-03-05T01:40:40.913
> 
> 标签：java, arrays, pointers

我在 Java 中有一个充满数据的数组。我想知道的是，如果我做这样的事情：

```
int[] array = new int[2];
array[0] = 0;
array[1] = 1;

//other statements...

array[1] = array[0]; 
```

如果我`array[1]`再次更改值，值也会`array[0]`更改吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T01:42:08.170

> 如果我再次更改 array[1] 的值，array[0] 的值也会更改吗？

不，此声明：

```
array[1] = array[0]; 
```

*只需*将第二个元素的值复制到第一个元素中。就好像你有两个独立的变量：

```
int x = 10;
int y = x;
// Further changes to x don't affect y 
```

如果您*有*一组引用，例如

```
StringBuilder[] builders = new StringBuilder[10];
builders[0] = new StringBuilder("Original");
builders[1] = builders[0];
builders[0] = new StringBuilder("Hello");
System.out.println(builders[1]); // Prints Original 
```

最后一个赋值语句*不会*改变`builders[1]`... 的值，但是如果我们写了：

```
builders[0].append("Foo");
System.out.println(builders[1]); // Prints OriginalFoo 
```

then the values of `builders[0]` and `builders[1]` haven't changed - they still refer to the same object - but the contents of *that object* have changed, hence the output in the final line.

# iphone - 从 Facebook 同步/“统一信息”地址簿联系人获取电话号码

> ID：15214370
> 
> 赞同：4
> 
> 时间：2013-03-05T01:41:18.270
> 
> 标签：iphone, ios, objective-c, cocoa, abaddressbook

我需要能够从用户的通讯录中读取联系人的电话号码。问题是，如果用户选择通过 Facebook 同步这些联系人，则无法再通过以下代码访问它们（这对未同步的联系人有效）：

```
ABMultiValueRef phones = ABRecordCopyValue(record, kABPersonPhoneProperty);
DLog(@"Found %ld phones", ABMultiValueGetCount(phones));
for(CFIndex j = 0; j < ABMultiValueGetCount(phones); j++)
{        
    CFStringRef phoneNumberRef = ABMultiValueCopyValueAtIndex(phones, j);
    CFStringRef locLabel = ABMultiValueCopyLabelAtIndex(phones, j);
    NSString *phoneLabel =(__bridge NSString*) ABAddressBookCopyLocalizedLabel(locLabel);
    NSString *phoneNumber = (__bridge NSString *)phoneNumberRef;
    CFRelease(phoneNumberRef);
    CFRelease(locLabel);
    DLog(@"  - %@ (%@)", phoneNumber, phoneLabel);
    [numbersArr addObject:phoneNumber];
} 
```

日志结果是`[Line 126] Found 0 phones`

我曾尝试使用`CFArrayRef userNumbers = ABMultiValueCopyArrayOfAllValues(phoneNumbers);`
，但这也没有返回任何内容：`[Line 118] Got user numbers: (null)`

所以我试图深入研究社交资料，这也没有任何回报！

```
// Try to get phone numbers from social profile
        ABMultiValueRef profiles = ABRecordCopyValue(record, kABPersonSocialProfileProperty);
        CFIndex multiCount = ABMultiValueGetCount(profiles);
        for (CFIndex i=0; i<multiCount; i++) {
            NSDictionary* profile = (__bridge NSDictionary*)ABMultiValueCopyValueAtIndex(profiles, i);
            NSLog(@"TESTING - Profile: %@", profile);

        }
        DLog(@"Got profiles: %@", profiles);
        CFRelease(profiles); 
```

然而日志条目是： `[Line 161] Got profiles: ABMultiValueRef 0x1ddbb5c0 with 0 value(s)`

如果上述结果都没有给我任何帮助，我怎么知道他们是 Facebook 用户并获取他们的电话信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T18:21:08.497

来自 Apple 支持：

> 我们没有任何 API 可以返回统一的通讯簿联系人。但是，您可以通过首先使用 ABPersonCopyArrayOfAllLinkedPeople 检索所有链接的联系人，然后遍历这些联系人以获取其各自的电话号码，来检索在您设备上的联系人中统一显示的联系人的电话号码。请注意，通讯录 API 不会返回未出现在联系人 UI 中的电话号码。请参阅下面的代码片段，您可以这样做：

```
- (BOOL)peoplePickerNavigationController:(ABPeoplePickerNavigationController *)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person

{

//Fetch all linked contacts

CFArrayRef linkedPerson = ABPersonCopyArrayOfAllLinkedPeople(person);

//Iterate through each linked contact to fetch the phone numbers

for (CFIndex i = 0; i < CFArrayGetCount(linkedPerson); i++)

{

ABRecordRef contact = CFArrayGetValueAtIndex(linkedPerson,i);

ABMutableMultiValueRef multi = ABRecordCopyValue(contact, kABPersonPhoneProperty);

for (CFIndex i = 0; i < ABMultiValueGetCount(multi); i++)

{

CFStringRef label = ABMultiValueCopyLabelAtIndex(multi, i);

CFStringRef number = ABMultiValueCopyValueAtIndex(multi, i);

CFRelease(label);

CFRelease(number);

}

CFRelease(multi);

}

CFRelease(linkedPerson);

return YES; 
```

# c++ - 如何将 C++ 对象变量传递给 Lua 脚本，以便为精灵设置动画

> ID：15214374
> 
> 赞同：0
> 
> 时间：2013-03-05T01:41:35.850
> 
> 标签：c++, animation, lua, sprite

我有一个 Win32 应用程序，它创建一个窗口、启动 DirectX 并创建一个精灵，所有这些都在 C++ 中。我的精灵目前在函数末尾使用以下代码进行动画处理`Sprite::Update()`：

```
curFrame++;
if (curFrame >= numFrames)
    curFrame = 0; 
```

现在，需要使用 Lua 脚本运行那一点代码。如何替换此 C++ 代码以访问具有几乎相同代码行的 Lua 脚本。我想过将 C++ Sprite 类`curFrame`和`numFrames`变量传递给 Lua 脚本，但我不知道如何。

非常感谢任何帮助。这不能用另一个库或其他人的代码来完成。我只需要朝着正确的方向前进。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T03:41:47.020

关于如何将参数推送到 Lua 函数以及如何将 Lua 集成到 C++ 中，有几个很好的教程：

*   [http://www.codeproject.com/Articles/11508/Integrating-Lua-into-C](http://www.codeproject.com/Articles/11508/Integrating-Lua-into-C)
*   [http://csl.sublevel3.org/lua/](http://csl.sublevel3.org/lua/)

# objective-c - 如何将十六进制转换为二进制？

> ID：15214375
> 
> 赞同：-2
> 
> 时间：2013-03-05T01:41:37.737
> 
> 标签：objective-c

对于 Objective-C：

大家好，我正在尝试将十六进制输入转换为二进制。例如，有人输入：

```
A55 
```

我希望将其转换为

```
101001010101 
```

我试过浏览过去的帖子，但似乎没有一个对我有用。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T01:49:08.977

使用查找表：十六进制表示中只有 16 个可能的字符，每个对应于一个四字符二进制代码组。逐个字符遍历 HEX，获取查找，并将其放入结果中`NSString`。

这是您的查找表的副本。

```
0 0000
1 0001
2 0010
3 0011
4 0100
5 0101
6 0110
7 0111
8 1000
9 1001
A 1010
B 1011
C 1100
D 1101
E 1110
F 1111 
```

关于如何进行查找有多种选择。最简单的方法是制作一个 128 元素的数组，并将`NSString`s 放置在与字符*代码*相对应的元素 处（即在位置`'0'`, `'1'`, ..., `'E'`, `'F'`, 用单引号；这些非常重要）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T01:49:59.240

我相信有一个内置的功能。如果没有，你至少应该能够去 hex->dec 然后 dec->bin

如果您知道字符数，则可以从头开始编写转换，bin 到 hex 在算法上足够常见。

*   [算法的数学分析](http://www.cs.trincoll.edu/~ram/cpsc110/inclass/conversions.html)
*   [SO Answers in C/C++](https://stackoverflow.com/questions/819487/efficiently-convert-between-hex-binary-and-decimal-in-c-c) [另一个](https://stackoverflow.com/questions/483609/how-can-i-convert-hexadecimal-numbers-to-binary-in-c)
*   [Objective C 中以 10 为基数到 n 为基数](http://blog.callumtaylor.net/convertingfrombase10tobasenobjectivec)
*   [C Hex->Bin](http://johnsantic.com/comp/htoi.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T01:53:05.493

构建一个查找表（一个数组，您可以在其中提供一个 0 到 15 之间的值来获取该十六进制数字的二进制文件）：

```
char *hex_to_bin[] = {
    "0000", "0001", "0010", "0011",
    /* ... */
    "1100", "1101", "1110", "1111"
}; 
```

该表中应该有 16 个元素。多位数字的转换过程是一次处理一位数字，将结果附加到结果存储的末尾。

用于`getchar()`读取字符：

```
int c = getchar();
if (c < 0) { puts("Error: Invalid input or premature closure."); } 
```

用于`strchr()`确定要检索的数组索引：

```
char *digits = "00112233445566778899AaBbCcDdEeFf";
size_t digit = (strchr(digits, c) - digits) / 2; 
```

查找 digit 对应的二进制值：

```
printf("%s", hex_to_bin[digit]); // You'll want to use strcat here. 
```

# javascript - 为什么更新一个对象的属性会改变另一个对象？

> ID：15214378
> 
> 赞同：1
> 
> 时间：2013-03-05T01:41:46.377
> 
> 标签：javascript, object, copy

我通过 ajax 将 JSON 数据加载到一个对象中，将该对象复制到新对象（initData 和 newData）。当我更改 newData 的属性时，initData 的属性也会更改。为什么会这样？

```
var initData = {};
var newData = {};    

function load_data(NDB_No){
    $.getJSON(('scripts/jsonencode.php?q=' + NDB_No), function(data) {

        for (prop in data){
            initData[prop] = data[prop];
            newData[prop] = data[prop];
        }

    console.log('init data: ' + initData.properties.Protein); // "init data: 0.259"
    console.log('new data: ' + newData.properties.Protein); // "new data: 0.259"

     var n = parseFloat(newData.properties.Protein);
     newData.properties.Protein = n+1;

    console.log('init data: ' + initData.properties.Protein + 'new data: ' + newData.properties.Protein); 
    // "init data: 1.259 new data: 1.259"
    // why are these the same when I only updated newData object?

    });

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T01:45:20.087

它看起来像是`data[prop]`一个对象（因为您稍后会提到`newData.properties.Protein`）。对象总是通过引用传递，变量只是指向它的指针。

由于您首先获得了 JSON，因此您的对象是 JSON-able，因此您可以使用它来“克隆”对象：

```
$.getJSON(...,function(data) {
    initData = JSON.parse(JSON.stringify(data));
    newData = JSON.parse(JSON.stringify(data));
}); 
```

这将确保对象是分开的。还有其他方法可以做到这一点，但是这种方法通过使用内置方法避免了手动递归（总是更快）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T01:45:50.813

这将两者都设置为引用相同的内存空间：

```
initData[prop] = data[prop];
newData[prop] = data[prop]; 
```

...所以当你改变时`newData`，你也会改变`initData`。您需要创建一个副本，而不是通过引用分配。我必须跑步，所以我现在不能提供一个例子。

# python - 类（不是实例）变量是否有类似“__getattribute__”的方法？

> ID：15214386
> 
> 赞同：8
> 
> 时间：2013-03-05T01:43:29.793
> 
> 标签：python

我有一个类`sysprops`，我想在其中有一些常量。但是，我想从数据库中提取这些常量的值，所以我想在任何时候访问这些类常量之一时使用某种钩子（类似于实例变量的**getattribute**方法）。

```
class sysprops(object):
    SOME_CONSTANT = 'SOME_VALUE'

sysprops.SOME_CONSTANT  # this statement would not return 'SOME_VALUE' but instead a dynamic value pulled from the database. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T01:52:51.390

虽然我认为这样做是一个*非常*糟糕的主意，但有可能：

```
class GetAttributeMetaClass(type):
    def __getattribute__(self, key):
        print 'Getting attribute', key

class sysprops(object):
    __metaclass__ = GetAttributeMetaClass 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T01:56:50.763

而其他两个答案有一个有效的方法。我喜欢走“最少魔法”的路线。

您可以执行类似于元类方法的操作，而无需实际使用它们。只需使用装饰器。

```
def instancer(cls):
    return cls()

@instancer
class SysProps(object):
    def __getattribute__(self, key):
        return key # dummy 
```

这将创建一个实例，`SysProps`然后将其分配回`SysProps`名称。有效地隐藏实际的类定义并允许常量实例。

由于装饰器在 Python 中更常见，我发现这种方式对于必须阅读您的代码的其他人来说更容易掌握。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T01:50:01.827

`sysprops.SOME_CONSTANT``SOME_CONSTANT`如果是在 上定义的属性，则可以是函数的返回值`type(sysprops)`。

换句话说，如果`sysprops`是实例而不是类，您所说的通常会完成。

但这里是最重要的——*类是元类的实例*。所以你所知道的关于通过使用类来控制实例行为的一切都同样适用于通过使用元类来控制类的行为。

通常元类是`type`，但您可以通过子类化来自由定义其他元类`type`。如果您在元类中放置一个属性`SOME_CONSTANT`，那么该元类的实例，例如，`sysprops`当 Python 求值时将具有所需的行为`sysprops.SOME_CONSTANT`。

* * *

```
class MetaSysProps(type):
    @property
    def SOME_CONSTANT(cls):
        return 'SOME_VALUE'

class SysProps(object):
    __metaclass__ = MetaSysProps

print(SysProps.SOME_CONSTANT) 
```

产量

```
SOME_VALUE 
```

# sql - 从多个表中选择最大日期

> ID：15214387
> 
> 赞同：0
> 
> 时间：2013-03-05T01:43:42.227
> 
> 标签：sql, max

任何帮助都会非常感激。我正在尝试从一组表中选择最后一个活动日期。这些表格包括输入日期、注释日期、付款日期和索赔日期。我想只返回所有这些日期的最大值。此外，我只想要超过 45 天没有活动的记录。我目前正在使用以下 SQL 来输入所有日期，然后使用 EXCEL 中的计算字段来计算其余部分。是否可以使用 SQL 来完成这一切？

提前致谢。

```
SELECT xrxTrnLgr.PatId, xrxTrnLgr.Balance, 
       Max(xrxPatNotes.NoteDate) AS 'Max of NoteDate', 
       Max(xrxTrnIcf.PostDate) AS 'Max of IcfPostDate', 
       Max(xrxPat.EntryDate) AS 'Entry Date', 
       Max(xrxPat.Coverage) AS 'Coverage', 
       Max(xrxTrnPay.PostDate) AS 'Last Payment'
  FROM  xrxTrnLgr 
  LEFT OUTER JOIN xrxPatNotes ON xrxTrnLgr.PatId = xrxPatNotes.PatId
  LEFT OUTER JOIN  xrxTrnIcf ON xrxTrnLgr.PatId = xrxTrnIcf.PatId
  LEFT OUTER JOIN xrxPat ON xrxTrnLgr.PatId = xrxPat.PatId
  LEFT OUTER JOIN xrxTrnPay ON xrxTrnLgr.PatId = xrxTrnPay.PatId
  GROUP BY xrxTrnLgr.PatId, xrxTrnLgr.Balance
  HAVING (xrxTrnLgr.Balance>$.01) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T02:00:16.257

我认为这可能会在 SQL 中完成所有操作：

```
select t.patid, t.balance,
       max(case when which = 'note' then thedate end) as note,
       max(case when which = 'post' then thedate end) as post,
       max(case when which = 'entry' then thedate end) as entry,
       max(case when which = 'coverage' then thedate end) as coverage,
       max(case when which = 'lastPayment' then thedate end) as lastPayment
from xrxTrnLgr t left join
     ((select patid, notedate as thedate, 'note' as which
       from xrxPatNotes
      ) union all
      (select patid, postdate, 'post'
       from xrxtrnIcf
      ) union all
      (select patid, EntryDate, 'entry'
       from xrxPat
      ) union all
      (select paid, Coverage, 'coverage'
       from xrxPat.Coverage
      ) union all
      (select patid, PostDate, 'LastPayment'
       from xrxTrnPay.PostDate
      ) 
    ) d
    on t.patid = d.patid
group by t.patid, t.balance
having min(now() - thedate) >= 45 
```

# linux - 用 perl 创建目录的可靠方法？

> ID：15214393
> 
> 赞同：-3
> 
> 时间：2013-03-05T01:44:25.183
> 
> 标签：linux, perl, mkdir

从[http://perldoc.perl.org/File/Path.html](http://perldoc.perl.org/File/Path.html)的 perl 文档中它指出：

> “API 在 2.0 分支中发生了变化。有一段时间，mkpath 和 rmtree 尝试处理两种不同的调用机制，但未成功。这种方法被认为是失败的。
> 
> 新语义现在仅适用于 make_path 和 remove_tree 。旧语义只能通过 mkpath 和 rmtree 获得。强烈建议用户至少升级到 2.08 以避免意外。”

perl 中的一些东西让我感到惊讶。它似乎在说，如果我不能控制 perl 的版本（我不能），那么我真的没有任何可靠的方法来做一些像创建目录这样简单的事情。我发现，由于不支持他们指定的某些参数调用，因此存在比文档所述的问题更多的问题。

无论如何，我的问题是，有没有一种可靠的方法可以在 perl 中创建一个目录，设置掩码、用户名和组，并且可以与旧版本的 perl 一起使用？我们正在使用 5.8.8

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T02:37:08.497

Perl 的版本与此无关。[`File::Path`](https://metacpan.org/module/File::Path)是一个提供便利功能的*模块*`mkpath`，该功能在一次调用中创建路径中的所有目录。

您的 Perl 版本已经超过 7 年了，确实应该更新，但即便如此，最新版本的 Perl 也可以`File::Path`正常安装。Perl 有，而且一直都有，内置函数[`mkdir`](http://perldoc.perl.org/functions/mkdir.html)会创建一个单一的目录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T01:52:25.977

File::Path 2.09 应该在 5.8.8 上安装得很好

# php - 为什么即使没有找到匹配项，switch 语句也会执行 case 块？

> ID：15214399
> 
> 赞同：0
> 
> 时间：2013-03-05T01:45:36.933
> 
> 标签：php, javascript, c, switch-statement, case

```
switch(1){
    case 1: print 1; // prints 1 (as expected)
    case 2: print 2; // prints 2 (even though match is not equal?)
    case 3: print 3; // prints 3 (even though match is not equal?)
} 
```

`break`我知道如果在每个 case 表达式匹配后不使用，大多数编程语言都会继续执行每个语句。但是我很困惑为什么大多数语言在第二个和第三个 case 语句上执行一个 case 块作为成功匹配。

澄清一下：我知道 switch 语句的行为，但我不明白即使没有找到匹配项，将 case 块/语句作为成功匹配执行也是有意义的逻辑。

更新：我刚刚更新了这个问题以反映大多数编程语言，而不仅仅是 PHP。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T01:47:22.233

从[手册](http://us3.php.net/manual/en/control-structures.switch.php)：

switch 语句逐行执行（实际上是逐语句执行）。一开始，没有代码被执行。只有当 case 语句的值与 switch 表达式的值匹配时，PHP 才会开始执行语句。PHP 继续执行语句，直到 switch 块结束，或者它第一次看到 break 语句。如果你不在一个 case 语句列表的末尾写一个 break 语句，PHP 将继续执行下一个 case 的语句。

```
switch(1){
    case 1: 
         echo 1; // echos 1 (as expected)
         break; // stop!!!
    case 2: 
         echo 2; // won't get here
         break;
    case 3: 
         echo 3; //or here
         break;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T02:07:03.303

之所以这样，可能是因为 PHP 借鉴了 C 的语法。

然而，它最初采用这种方式的原因是它有助于减少我怀疑的代码重复。

如果你有一个 if 喜欢：

```
if($item == 'SOUP' || $item == 'FRIES'){
    eat($item);
}elseif($item == 'JUICE'){
    drink($item);
}else{
    use($item);
} 
```

如果开关从未通过，您将需要 4 个具有相同逻辑的“SOUP”和“FRIES”案例，没有这个，您可以使开关更好：

```
switch($item){
    case 'SOUP':
    case 'FRIES':
        eat($item);
        break;
    case 'JUICE':
        drink($item);
        break;
    default:
        use($item);
        break;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T01:47:25.850

> 我知道如果您在每个案例之后不使用 break，PHP 会继续检查 switch 语句案例

好像没看懂。您**错过**了使用`break`关键字：

```
switch(1){
    case 1: echo 1; break; 
    case 2: echo 2; break;
    case 3: echo 3; break; 
} 
```

请注意，`case`语句就像代码中的入口点。在 case 条件匹配后，代码将运行所有 case 直到`break`达到。

对于您的更新：请注意，PHP 的这种行为与大多数编程语言的行为相同，包括：C、C++、Java、Javascript、ActionScript、Pascal ......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-20T20:26:59.823

> 为什么即使没有找到匹配项，switch 语句也会执行 case 块？

如果您不使用`break`，它将执行所有开关，这有时会很有帮助。例如：

```
switch ( count ) {
      default : puts ( " ++++.....+++ " ) ;
      case 4: puts ( " ++++ " ) ;
      case 3: puts ( " +++ " ) ;
      case 2: puts ( " ++ " ) ;
      case 1: puts ( " + " ) ;
      case 0:;
      } 
```

因此，如果 count 为 3，您将得到输出：

```
+++
++
+ 
```

如果为 2，则得到输出

```
++
+ 
```

如果是 10，你会得到：

```
++++.....+++ 
++++ 
+++ 
++ 
+ 
```

因此，有时您希望您的交换机在找到您想要的内容后执行其他情况。就像上面的代码一样。

您可以使用 else if 来执行此操作，但输入会更多。

# sql - JSON 与经典模式设计

> ID：15214401
> 
> 赞同：1
> 
> 时间：2013-03-05T01:45:53.983
> 
> 标签：sql, database, json, schema

我和我的搭档正在为一个大学阶段的期末项目工作，我们现在已经到了要设计数据库的地步。现在，我们有 ac# JSON 序列化器和反序列化器，并计划将其存储到我们的数据库中

所以当我在设计我们的类模式时，我的伙伴提到为什么不只是有一个包含所有 JSON 字符串的表？我不知道该怎么做，因为直觉上，先有几个字段然后是一个字符串似乎是不对的。我们将从该表中进行选择，然后对所有字符串进行反序列化，您将获得信息。

但是，我想得越多，我不确定是否有很大的不同，因为每当我们需要编辑时，我们无论如何都需要编辑 JSON 字符串并将其恢复到数据库中。我认为这种设计会使数据库只是一个数据转储，但我们的项目规模不够大，需要一个完整的设计。

我知道我的问题描述得不是很好，但是对此有什么想法吗？你会只存储 JSON 字符串吗？或者你会有一个经典的模式？我认为这真的取决于

# python - 如何在 Python 中复制像元组这样的不可变对象？

> ID：15214404
> 
> 赞同：34
> 
> 时间：2013-03-05T01:46:00.337
> 
> 标签：python, types

`copy.copy()`并且`copy.deepcopy()`只需复制不可变对象（如元组）的引用。如何在不同的内存位置创建第一个不可变对象的副本？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-03-05T02:06:29.597

你正在寻找`deepcopy`.

```
from copy import deepcopy

tup = (1, 2, 3, 4, 5)
put = deepcopy(tup) 
```

不可否认，这两个元组的 ID 将指向同一个地址。因为元组是不可变的，所以真的没有理由创建另一个完全相同的副本。但是，请注意，元组可以包含可变元素，并且 deepcopy/id 的行为与您预期的一样：

```
from copy import deepcopy
tup = (1, 2, [])
put = deepcopy(tup)
tup[2].append('hello')
print tup # (1, 2, ['hello'])
print put # (1, 2, []) 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-03-05T02:03:53.857

向其中添加空元组：

```
>>> a = (1, 2, 3)
>>> a is a+tuple()  
False 
```

连接元组总是返回一个新的不同元组，即使结果相等。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-05T02:14:26.040

尝试这个：

```
tup = (1,2,3)
nt = tuple(list(tup)) 
```

而且我认为添加一个空元组要好得多。

# php - 在 PHP 中将 Unix 时间戳转换为从现在开始的时间

> ID：15214405
> 
> 赞同：0
> 
> 时间：2013-03-05T01:46:00.483
> 
> 标签：php, date, date-math

我有这样的时间戳：`1362466800`

我想把它输出到这样的东西：

`Time left: 1 Year 2 Months 5 Days 17 hours 6 Minutes Left`

此外，如果少于 1 年或少于 1 个月等。字符串的那部分需要隐藏。

我知道在 5.3+ 中有一些内置的 PHP 函数，但它们似乎无法隐藏 0 的值。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T01:51:04.090

```
$datetime1 = new DateTime();
$datetime2 = new DateTime('@1362466800');
$interval = $datetime1->diff($datetime2);
$elapsed = $interval->format('%y years %m months %a days %h hours %i minutes %S seconds');
echo $elapsed; 
```

[看到它在行动](http://codepad.viper-7.com/ziKB7T)

**编辑**

如果您想消除任何具有零值的句点，您可以使用下面的代码段来删除它们。

```
$empties = array('0 years', '0 months', '0 days', '0 hours', '0 minutes', '0 seconds');
echo str_replace($empties, '', $elapsed); 
```

**参考**

*   [约会时间](http://us3.php.net/manual/en/class.datetime.php)
*   [日期间隔](http://us3.php.net/manual/en/class.dateinterval.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-05T09:34:08.663

你可以这样做：

```
 echo secondsToTime(1362466800);

   function secondsToTime($seconds) {
    $dtF = new \DateTime('@0');
    $dtT = new \DateTime("@$seconds");
    return $dtF->diff($dtT)->format('%a days, %h hours, %i minutes and %s seconds');
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T02:26:53.990

基于@John Condes 的回答，我能够想出一个函数，从现在开始输出一个非常容易阅读的时间显示：

```
function daysLeft($timestamp) {
    $datetime1 = new DateTime('@'.time() );
    $datetime2 = new DateTime('@' . $timestamp );
    $interval = $datetime1->diff($datetime2);

    $years = $interval->format('%y');
    $months = $interval->format('%m');
    $days = $interval->format('%a');
    $hours = $interval->format('%h');
    $minutes = $interval->format('%i');
    $seconds = $interval->format('%S');

    if($seconds):
        $elapsed = $seconds == 1 ? $seconds . ' Second ' : $seconds . ' Seconds ';
    endif;
    if($minutes):
        $elapsed = $minutes == 1 ? $minutes . ' Minute ' : $minutes . ' Minutes ';
    endif;
    if($hours):
        $elapsed = $hours == 1 ? $hours . ' Hour ' : $hours . ' Hours ';
    endif;
    if($days):
        $elapsed = $days == 1 ? $days . ' Day ' : $days . ' Days ';
    endif;
    if($months):
        $elapsed = $months == 1 ? $months . ' Month ' : $months . ' Months ';
    endif;
    if($years):
        $elapsed = $years == 1 ? $years . ' Year ' : $years . ' Years ';
    endif;

    return $elapsed;
} 
```

以防有人试图做类似的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-12T11:13:44.753

基于@Talon，我决定走得更远，写一个小班：

```
/**
 * Calculates the time between two UNIX timestamps
 * Like 3 hours or 180 minutes.
 * 
 * @package Add Package Name Here
 * @version 1
 * @since Jul 12, 2013
 * @author Andrew Starlike <andrewstarlike@gmail.com>
 */
class NiceDate
{

private $translation;

/**
 * @param array $translation
 */
public function __construct($translation = null)
{
$this->setTranslation($translation);
}

/**
 * Sets the translation of the time string
 * 
 * @param array $translation (the array must have this keys 'second', 'minute', 'hour', 'day', 'month', 'year')
 */
private function setTranslation($translation = null)
{
if ($translation === null) {
    $translation = array();
    $plural = 's';
    $formats = array('second', 'minute', 'hour', 'day', 'month', 'year');
    foreach ($formats as $format) {
    $translation[$format] = ucfirst($format);
    $translation[$format . $plural] = ucfirst($format . $plural);
    }
}

$this->translation = $translation;
}

/**
 * 
 * @param int $old (UNIX timestamp)
 * @param int $newer (UNIX timestamp)
 * @return string
 */
public function timeLeft($old, $newer)
{
$datetime1 = new DateTime('@' . $newer);
$datetime2 = new DateTime('@' . $old);
$interval = $datetime1->diff($datetime2);

$years = $interval->format('%y');
$months = $interval->format('%m');
$days = $interval->format('%a');
$hours = $interval->format('%h');
$minutes = $interval->format('%i');
$seconds = $interval->format('%S');

$translation = $this->translation;

if ($seconds):
    $elapsed = $seconds . ' ';
    $elapsed .= $seconds == 1 ? $translation['second'] : $translation['seconds'];
endif;
if ($minutes):
    $elapsed = $minutes . ' ';
    $elapsed .= $minutes == 1 ? $translation['minute'] : $translation['minutes'];
endif;
if ($hours):
    $elapsed = $hours . ' ';
    $elapsed .= $hours == 1 ? $translation['hour'] : $translation['hours'];
endif;
if ($days):
    $elapsed = $days . ' ';
    $elapsed .= $days == 1 ? $translation['day'] : $translation['days'];
endif;
if ($months):
    $elapsed = $months . ' ';
    $elapsed .= $months == 1 ? $translation['month'] : $translation['months'];
endif;
if ($years):
    $elapsed = $years . ' ';
    $elapsed .= $years == 1 ? $translation['year'] : $translation['years'];
endif;

return $elapsed;
}

} 
```

# r - 查看包中是否存在变量/函数？

> ID：15214411
> 
> 赞同：10
> 
> 时间：2013-03-05T01:46:41.713
> 
> 标签：r

我正在尝试测试包中是否存在特定变量或函数。例如，假设我想测试一个名为`plot`“graphics”的函数是否存在。

下面测试一个函数是否`plot`存在，而不是它来自哪个包：

```
exists('plot', mode='function') 
```

或者我可以测试包中是否`plot`存在一些名为的东西`graphics`，但这并不能告诉我它是否是一个函数：

```
'plot' %in% ls('package:graphics') 
```

**有没有一种很好的方法来询问“模式 Z 的包 Y 中是否存在一个名为 X 的对象”？**（本质上，我可以限制`exists`特定的包吗？）

（是的，我可以将以上两行结合起来，首先测试`plot`in`graphics`然后询问 的模式`plot`，但是如果我有自己的函数`plot`屏蔽`graphics::plot`怎么办？那么我可以相信 的输出`exists('plot', mode='function')`吗？）

背景：为我的一个包写测试，想测试各种功能是否导出。我正在使用包`testthat`，它在我可以看到包的所有内部功能的环境中执行测试，并且被`exists('myfunction', mode='function')`返回 true 所刺痛，但我实际上忘记了 export `myfunction`。我想测试是否*导出*了各种功能。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-05T01:50:18.193

哦，我找到了。

我注意到`?ls`它说第一个论点（`'package:graphics'`对我来说）也算作环境。`exists`'参数与'`where`参数具有相同的文档，所以我猜也可能在那里工作：`ls``name``'package:graphics'`

```
exists('plot', where='package:graphics', mode='function')
[1] TRUE  # huzzah! 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-05T02:18:48.517

```
 environment(plot)
<environment: namespace:graphics>

find('+')
#[1] "package:base"

find('plot')
#[1] "package:graphics"

find('plot', mode="function")
#[1] "package:graphics" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-21T12:05:33.880

之前提出的所有答案都是步行环境，而不是命名空间。因此，它们的行为将根据目标包是否加载`library()`以及加载顺序而有所不同。

这是一种方法`utils::getFromNamespace()`：

```
function_exists <- function(package, funcname) {
    tryCatch({
        utils::getFromNamespace(funcname, package)
        TRUE
    }, error = function(...) { FALSE })
} 
```

# java - 从 HttpResponse 读取正文返回在 java 中不稳定？

> ID：15214412
> 
> 赞同：0
> 
> 时间：2013-03-05T01:46:46.083
> 
> 标签：java, character-encoding, apache-commons-httpclient

我有一个项目需要通过互联网获取实时比分结果。经过研究，我发现我可以从[http://iphone.livescore.com/iphone.dll?gmt=0.0](http://iphone.livescore.com/iphone.dll?gmt=0.0)获得 livescore 。然后，我编写了一个简单的应用程序，从上面的 url 得到响应。但问题是我编写的代码使结果工作不稳定。有时它返回的 url 正文与浏览器显示不正确，在我的应用程序中它显示带有人类无法阅读的字符的未知字符串。

这是我的代码，有人可以给我建议吗？

```
private String getURLContent(String url) {
    StringBuffer stringBuffer = new StringBuffer();

    HttpGet httpGet = new HttpGet(url);
    try {
        HttpResponse response = httpClient.execute(httpGet);
        if (response.getStatusLine().getStatusCode() == 200) {
            InputStream inputStream = response.getEntity().getContent();

            InputStreamReader reader = new InputStreamReader(inputStream,
                    "UTF-8");
            int ch;
            while ((ch = reader.read()) > -1) {
                stringBuffer.append((char) ch);
            }
            reader.close();
        }
    } catch (ClientProtocolException e) {
        log.fatal(e);
    } catch (IOException e) {
        log.fatal(e);
    }
    return stringBuffer.toString();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T01:51:15.897

确保服务器以`UTF-8`格式发送数据。

除此之外，我会用这个单行替换读取的代码：

```
EntityUtils.toString(response.getEntity(),"UTF-8"); 
```

# linux - 如何在中断处理程序中进行上下文切换？

> ID：15214420
> 
> 赞同：0
> 
> 时间：2013-03-05T01:47:35.390
> 
> 标签：linux, linux-kernel

是否可以在中断处理程序中进行上下文切换来安排我之前注册的另一个进程？如果是，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T17:51:07.473

我不确定我是否正确理解了您的问题，但您指的是推迟工作吗？

有一些方法可以通过使用 tasklet 等来推迟 ISR 中的工作。

如果要调度用户进程，一种方法是将用户线程挂在信号量（内核内部）上并在 ISR 中插入信号量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T10:38:23.867

好的，首先，您不能在中断部分（即上半部分）切换上下文。

但是，您可以安排另一个函数在中断上下文或进程上下文中运行。实现这一点的方法是中断处理程序的下半部分。

1：如果您想安排您注册的函数在中断上下文中运行，请使用 Tasklet。

DECLARE_TASKLET(my_tasklet, 函数名, 0);

```
irqreturn_t my_tl_interrupt(int irq, void *dev_id, struct pt_regs *regs)
{
   tasklet_schedule(&my_tasklet);
   return IRQ_HANDLED;
} 
```

2：如果您想安排您注册的函数在进程上下文中运行，请使用 workqueue。

INIT_WORK(&my_wq, (void (*)(void *)) 函数名, NULL);

```
irqreturn_t my_tl_interrupt(int irq, void *dev_id, struct pt_regs *regs)
{
   schedule_work(&short_wq); 
   return IRQ_HANDLED;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-14T10:36:01.550

不，您不能在中断上下文中进行上下文切换。由于调度程序被禁用，在中断上下文中运行的任务不能被抢占。

在下半部分的情况下，softirq 和 tasklet 都在中断上下文中运行，因此不允许像睡眠调用这样的上下文切换。但是在**工作队列**的下半部分**上下文切换是可能的**，因为它在进程上下文 ksoftirqd 中运行。

# iphone - 与锚点碰撞

> ID：15214422
> 
> 赞同：1
> 
> 时间：2013-03-05T01:47:49.300
> 
> 标签：iphone, objective-c, cocos2d-iphone, collision-detection

所以我所做的是我为我的 CCSPRITE 瓷砖随机化了锚点和旋转速度，但这破坏了我的碰撞。我如何计算对象的边界框，同时它从锚点上旋转旋转。

```
-(void)rotateTiles
{
    int aheadcount = [asteroids count];
    CCSprite *tileonPos[aheadcount];
    NSValue *tilecoord1;
    NSValue *spin;
    //NSLog(@"%d",aheadcount);
    for(int v=0; v<aheadcount; v++)
    {
        tilecoord1 = [self.asteroids objectAtIndex:v];
        spin = [self.spinvalues objectAtIndex:v];
        CGPoint spinint = [spin CGPointValue];

        CGPoint cgp = [tilecoord1 CGPointValue];
        tileonPos[v] = [bglayer tileAt:cgp];

        tileonPos[v].rotation+=spinint.x;
        tileonPos[v].anchorPoint=ccp(0,spinint.y);
    }

}
-(void)findTiles
{
    CGPoint tilecoord1;
    int tileGid1;

    for(int x = 0; x<30; x++)
    {
        for(int y = 0; y<20; y++)
        {
            tilecoord1 = ccp(x+(480*currentlevel),y);
            tileGid1 = [bglayer tileGIDAt:tilecoord1];
            if(tileGid1 == 1)
            {
                int randomanchorx = ( (arc4random() % (5+5+1)) -5 );
                int randomspin = ( (arc4random() % (5+5+1)) -5 );

                [self.asteroids addObject:[NSValue valueWithCGPoint:CGPointMake(x,y)]];
                [self.spinvalues addObject:[NSValue valueWithCGPoint:CGPointMake(randomspin,randomanchorx)]];
            }

        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:24:18.887

移动锚点会变得很困难，因为锚点也可以被认为是精灵位置的基础。

我假设你的小行星不是矩形，所以边界框在尝试检测碰撞时没有多大帮助。

如果小行星在随机锚点上旋转，它基本上会创建一个围绕锚点的圆形碰撞区域，半径将是从锚点到小行星边缘的最长距离。这可以很容易地计算出来，你可以用它`ccpDistance()`来计算与其他物体的距离。您还希望将计算碰撞的对象的半径添加到计算中。基本上`if ( ccpDistance ( point1, point2 ) <= asteroid.radius + collisionObject.radius ) { // collide`。

为了增加此计算的复杂性和真实性，您可以使用根据您尝试检测碰撞的对象的角度而变化的半径。因此，如果物体与`M_PI_4`小行星成角度，您将计算该角度的半径（根据小行星的尺寸、锚点和旋转）。根据小行星旋转的速度，这可能有点过头了。

另一种选择可能是简化您的游戏，并始终制作锚点`ccp( .5, .5 )`。这样，您的半径将更有可能在旋转物体的所有侧面上保持一致。从物理学的角度来看，这也更有意义，因为我认为物体只会自然地围绕它们的加权中心旋转。

# ios6 - UICollectionView 在旋转时重新加载单元格

> ID：15214423
> 
> 赞同：0
> 
> 时间：2013-03-05T01:47:49.753
> 
> 标签：ios6, reload, uicollectionview, cells

所以我为我的 UICollectionView 创建了自己的自定义布局。当我从纵向模式旋转到横向模式时，一些单元格开始重新加载其内容。我认为布局只是改变了每个单元格的位置而不是重新加载内容？

只有当我在集合视图上调用 reload Data 时，内容才应该重新加载。

对可能发生的事情有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-26T23:27:33.553

在您的 UICollectionViewLayout 子类中使用`invalidateLayout`而不是`reloadData`旋转，或覆盖并返回 YES。`shouldInvalidateLayoutForBoundsChange:`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-27T05:00:43.787

```
- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
    [super willAnimateRotationToInterfaceOrientation:toInterfaceOrientation duration:duration];
    myCollectionView.frame = self.view.bounds;
    [myCollectionView.collectionViewLayout invalidateLayout];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T11:04:15.200

不确定您是否针对此，但这里是：

```
- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation{
    [super didRotateFromInterfaceOrientation:fromInterfaceOrientation];
    [self.collectionView reloadData];
} 
```

# amazon-web-services - Can't find the DB security group in Amazon RDS console

> ID：15214425
> 
> 赞同：7
> 
> 时间：2013-03-05T01:47:53.907
> 
> 标签：amazon-web-services, amazon-rds

Not sure if Amazon recently removed DB security group.

Created a DB instance as shown below. But there is no DB security group tab on the left! ![enter image description here](../Images/b71d3a25615918884f05b29c1746b3a6.png)

Back to the dashboard, it says I have 2 DB security groups. However I was redirected to the EC2 security groups when clicked it.

How can I create and configure the DB security groups now?

Thanks! ![enter image description here](../Images/6d610c748893f26235cd8680ca1debcb.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T02:11:11.360

After creating VPC the DB security group shows up in the RDS console. Indeed there are some changes Amazon made about the DB security group since Jan 2013.

[http://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/Overview.RDSSecurityGroups.html#Overview.RDSSecurityGroups.APIMigration](http://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/Overview.RDSSecurityGroups.html#Overview.RDSSecurityGroups.APIMigration)

# java - Java中的简单参数值对？

> ID：15214426
> 
> 赞同：2
> 
> 时间：2013-03-05T01:47:59.347
> 
> 标签：java

我想制作简单的参数值对（SomeClass，SomeNumber），其中第一件事是参数，第二件事是它的值。SomeNumber 可以是整数、分数、负数等。 SomeClass 可以是字符串、颜色或任何可以与 "SomeNumber" 配对的东西。

员工和工资前。(John, 19.75), (David, 25.50), (Cathy, 102.50) 例如颜色代码 (Color.black, 0), (Color.blue, 2) 等。

这是个好主意吗？如果不是为什么？如果是，那么我该如何在 Java 中做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T01:51:04.673

你说的是[地图](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)

> 将键映射到值的对象。地图不能包含重复的键；每个键最多可以映射到一个值。

试试[HashMap](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)

```
Map<String,Double> myMap = new HashMap<String,Double>();
      |       |     
      |       |
SomeClass  SomeNumber

myMap.put("John", 19.75); 

SomeNumber num =  myMap.get("John"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T01:51:27.090

我建议使用 a`Map`来实现这种行为。例如，对于您列出的员工：

```
Map<String, Double> employees = new HashMap<String,Double>(); 
employees.put("John", 19.75); 
employees.put("David", 25.50); 
employees.put("Cathy", 102.50); 
```

然后，您可以使用该键访问元素。

```
double salary = employees.get("John"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T01:52:34.920

您可以使用 a`Map<String, Double>`或创建一个*类*来保存数据。您可以根据您正在寻找的功能范围来决定实施哪种替代方案。如果您只是在寻找一种存储机制，我会选择`Map`，但如果您想要更多的东西（其他方法等），我会选择类。

现在，您似乎正在将这些不同的“名称”和“颜色代码”想法合并为一个实体。我会避免这样做。如果您使用地图方法，我将维护两张不同的地图，一张用于（姓名，工资）对，另一张用于颜色代码数据。如果您决定使用类，我将创建两个不同的类（可能都继承自同一个基类）来保存每组数据。不要将不相关的东西组合成一个实体！

* * *

**相关文件：**

*   [`Map`](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T01:55:22.243

您可以使用[HashMap 或 HashTable](https://stackoverflow.com/questions/40471/differences-between-hashmap-and-hashtable)。有一点不同，但是您可以使用概念和 Java 实用程序来创建类似字典的数据结构（键值对）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T01:52:06.953

这是否是一个好主意取决于您将如何处理它。在 Java 中执行此操作的最简单方法之一是创建一个具有两个字段的简单对象（如果您将变量设为私有，可能还有 getter 和 setter 方法），一个用于字符串，一个用于十进制值。

```
public class MyClass {
    public String value1;
    public double value2;

    public MyClass(String v1, double v2) {
        value1 = v1;
        value2 = v2;
    }
} 
```

# python - 统一随机数

> ID：15214430
> 
> 赞同：2
> 
> 时间：2013-03-05T01:48:15.850
> 
> 标签：python, numpy, matplotlib

我试图了解这段代码的作用。我正在浏览一些关于 numpy 和绘图的示例，但我不知道是什么`u`和`v`是什么。我知道`u`是一个由两个数组组成的数组，每个数组的大小为 10000。有什么作用 `v=u.max(axis=0)`？被调用的`max`函数是标准 python 库的一部分吗？当我绘制直方图时，我得到一个由 2x 定义的 pdf，而不是正态均匀分布。

```
import numpy as np
import numpy.random as rand
import matplotlib.pyplot as plt

np.random.seed(123)
u=rand.uniform(0,1,[2,10000])
v=u.max(axis=0)
plt.figure()
plt.hist(v,100,normed=1,color='blue')
plt.ylim([0,2])
plt.show() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T01:54:01.777

`u.max()`，或等效地`np.max(u)`，将为您提供数组中*的*最大值 - 即单个值。它是这里的 Numpy 函数，而不是标准库的一部分。您通常希望找到沿特定轴/维度的最大值，这就是这里发生的事情。

U 具有 shape `(2,10000)`，并`u.max(axis=0)`为您提供沿`0`轴的最大值，返回一个具有 shape 的数组`(10000,)`。如果你这样做了`u.max(axis=1)`，你会得到一个 shape 数组`(2,)`。

简单的插图/示例：

```
>>> a = np.array([[1,2],[3,4]])
>>> a
array([[1, 2],
       [3, 4]])
>>> a.max(axis=0)
array([3, 4])
>>> a.max(axis=1)
array([2, 4])
>>> a.max()
4 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T02:09:17.387

您在不同模块中加载的前三行（其余代码中依赖的库）。您加载`numpy`的是一个数值库，它是一个在创建随机数并允许绘制函数`numpy.random`方面做了大量工作的库。`matplotlib`

其余的在这里描述：

`np.random.seed(123)`

计算机并不会真正生成随机数，而是从一长串数字中选择一个数字（有关如何完成此操作的更正确解释[http://en.wikipedia.org/wiki/Random_number_generation](http://en.wikipedia.org/wiki/Random_number_generation)）。本质上，如果您想使用相同的随机数复制作品，计算机需要知道在此数字列表中的哪个位置开始选择数字。这就是这行代码的作用。如果其他人现在运行相同的代码，您最终会得到相同的“随机”数字。

`u=rand.uniform(0,1,[2,10000])`

这会生成两次分布在 0 和 1 之间的 10000 个随机数。这是均匀分布，因此它同样有可能获得 0 和 1 之间的任何点。（再次可以在此处找到更多信息：[http ://en.wikipedia.org /wiki/Uniform_distribution_(连续)](http://en.wikipedia.org/wiki/Uniform_distribution_(continuous)) )。您正在一个数组中创建两个数组。这可以通过执行检查：`len(u)`和`len(u[0])`。

`v=u.max(axis=0)`

`u.max?`iPython 中的命令将您引向文档。它基本上是选择一个最大值，轴确定如何选择最大值。尝试以下操作：

```
a = np.arange(4).reshape((2,2))
np.amax(a, axis=0) # gives array([2, 3])
np.amax(a, axis=1) # gives array([1, 3]) 
```

其余代码用于设置直方图。直方图中总共有 100 个 bin，条形图将显示为蓝色。直方图 y 轴上的最大高度为 2，normed 将保证每个 bin 中至少有一个样本。

我无法清楚地说明代码的真正目的或应用是什么。但这本质上就是它正在做的事情。

# php - PHP - 获取嵌套数组的 KEY

> ID：15214431
> 
> 赞同：0
> 
> 时间：2013-03-05T01:48:40.810
> 
> 标签：php, arrays, multidimensional-array, array-key

我有一个名为的数组 `$plugins`，看起来像这样：

```
Array
(
    [path/to/file.php] => Array
        (
            [Name] => somevalue_a
            [TextDomain] => somevalue_b
            [value_c] => somevalue_c
            [value_d] => somevalue_d
            ...
            ...
            ..

        )
    [path/to/file2.php] => Array
        (
            [Name] => somevalue_a
            [TextDomain] => somevalue_b
            [value_c] => somevalue_c
            [value_d] => somevalue_d
            ...
            ...
            ..
        )
) 
```

现在，我无法获取每个数组元素的 KEY 名称（即路径）..

```
function get_plugin_data(){

    foreach ($plugins as $plugin => $data) {
    $plugin_data = $plugins[$plugin];

    // Start simple DEBUG
    echo '</br>===============================</br>' ;
    echo '</br><b>Plugin Name : </b>'. $data[Name]; .'</br>' ;
    echo '</br><b>Plugin Path : </b>'. key($plugins)   .'</br>' ; // <-- Problem here
    echo '</br>TextDomain set  : '. $data[TextDomain] .'</br>' ;
    echo '</br>===============================</br>' ;
    // End DEBUG
    }
} 
```

使用`key($plugins)`它时，它总是给我相同的值（第一个）。使用`key($data)`它时只给我第一个字母.. (??)

如何获取每个嵌套数组的 this 键？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T01:54:45.720

您的`foreach`循环表明该路径可用作`$plugin`. 使用那个

```
 foreach ($plugins as $plugin => $data) {
                      // ^ This represents the key of the array item
    $plugin_data = $plugins[$plugin];

    // Start simple DEBUG
    echo '</br>===============================</br>' ;
    echo '</br><b>Plugin Name : </b>'. $data[Name]; .'</br>' ;
    echo '</br><b>Plugin Path : </b>'. $plugin .'</br>' ; // <-- Problem here
    echo '</br>TextDomain set  : '. $data[TextDomain] .'</br>' ;
    echo '</br>===============================</br>' ;
    // End DEBUG
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T01:55:47.187

只是返回`$plugin`，不是`key($plugin)`。`$plugin`应该已经是关键了。

详细说明，当您使用语法时：

`foreach ($plugins as $plugin => $data)`

它设置`$plugin`为键，并设置`$data`为它的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T02:03:34.777

检查对您的代码的此修改，它现在可以工作了。

```
<?php
    $plugins = Array
    (
        'array1' => Array
            (
                'name' => 'somevalue_a',
                'TextDomain' => 'somevalue_b',
                'value_c' => 'somevalue_c',
                'value_d' => 'somevalue_d'

            ),
        'array2' => Array
            (
                'name' => 'somevalue_a',
                'TextDomain' => 'somevalue_b',
                'value_c' => 'somevalue_c',
                'value_d' => 'somevalue_d'

            )
    );

    function get_plugin_data($plugins){

        foreach ($plugins as $plugin => $data) {
        $plugin_data = $plugins[$plugin];

        // Start simple DEBUG
        echo '</br>===============================</br>' ;
        echo '</br><b>Plugin Name : </b>'. $data['name'] .'</br>' ;
        echo '</br><b>Plugin Path : </b>'. key($plugins)   .'</br>' ; // <-- Problem here
        echo '</br>TextDomain set  : '. $data['TextDomain'] .'</br>' ;
        echo '</br>===============================</br>' ;
        // End DEBUG
        }
    }
    get_plugin_data($plugins);
    //print_r($plugins);
?> 
```

# eclipse - 设置项目是eclipse

> ID：15214443
> 
> 赞同：0
> 
> 时间：2013-03-05T01:50:05.970
> 
> 标签：eclipse, spring, svn, maven, setup-project

我想在 Eclipse 中设置我的工作项目，具有以下功能：
1）连接到 SVN 存储库
2）它是一个 maven - 多模块项目
3）它是一个 spring 项目

如果我将此项目作为 Maven 项目导入，我将无法将其连接到 SVN 存储库。
如果我签出 SVN 存储库，我无法将其设置为 Maven/Spring 项目。

理想情况下，我想让它可热部署（作为 eclipse 动态 Web 项目），因此开发可以高效。

我怎么可能做到这一点。

我已经使用 Maven、STS 和 SVN 插件设置了 eclipse Juno SR1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:24:47.600

您可以执行以下步骤：-

1.  从 svn 结帐到您的本地驱动器。

2.  由于它是一个 mave nbuild 项目，您将`pom.xml`在项目的根目录中拥有该文件。做一个`mvn eclipse:eclipse -Dwtpversion=2.0`项目。

3.打开eclipse并转到`File-->Import--> Existing projects into workspace`。

这应该做。

FYR 看到[这个](http://www.mkyong.com/maven/how-do-use-maven-to-create-a-dynamic-web-project-in-eclipse/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T02:21:45.437

将项目签出到 Eclipse 工作区后，只需使用以下操作删除项目：-

```
right click at the project ---> delete ---> click ok 
```

请注意，**不要选中名为“***删除磁盘上的项目内容*”的复选框。我们只想删除并再次重新导入。

我们需要做的就是使用以下操作重新导入：-

```
File ---> Import ---> Maven ---> Existing Maven projects 
```

这将帮助我们将 Maven 与 Eclipse 中的 SVN 集成。我们会在项目名称、文件夹、包、类等后面看到修订信息。

无论如何要在 Eclipse 中使用 Maven，您应该安装[Maven Integration (m2e)](http://eclipse.org/m2e/)。此外，还有一个有用的插件可以将 Eclipse WTP 与 Maven 集成。它被命名[为 WTP 的 Maven 集成](http://www.eclipse.org/m2e-wtp/)。

我希望这可能会有所帮助。

# ios - iOS SDWebImage for UITableView？

> ID：15214447
> 
> 赞同：0
> 
> 时间：2013-03-05T01:50:56.603
> 
> 标签：ios, sdwebimage

这是我的代码，我创建了一个自定义 UITableViewCell 并使用 SDWebImage 异步加载图像。但它不起作用。当我使用像“cell.imageView setImage ...”这样的默认单元格时，它工作正常，我不知道为什么？

```
DiscoutCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
[cell.goodsImageView setImageWithURL:url placeholderImage:[UIImage imageNamed:@"zanwutupian.png"]]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T02:39:27.080

解决了我发现我没有将那个 imageView 链接到我的 IBOutet imageview，我很抱歉浪费你的时间，这是我的错。我太粗心了！无论如何，非常感谢！

# c# - 提交互斥复选框后如何更新标签？

> ID：15214452
> 
> 赞同：-1
> 
> 时间：2013-03-05T01:51:04.707
> 
> 标签：c#, asp.net

我正在编写 C# 编码，单击提交按钮时遇到问题，并选择了几种不同的复选框答案组合，它们没有正确更新为“正确”或“不正确”。如果仅选中 Answer2 和 Answer3，如何将代码调整到仅显示“正确”标签的位置？即使选择了正确的答案之一，也会显示“不正确”。

```
if (Answer2.Checked && Answer3.Checked == true)
    {
        lblQuestionResult4.ForeColor = System.Drawing.Color.Green;
        lblQuestionResult4.Text = "Correct";
    }
    else
    {
        if (Answer1.Checked && Answer4.Checked == true)
        {
            lblQuestionResult4.ForeColor = System.Drawing.Color.Red;
            lblQuestionResult4.Text = "Incorrect";
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T01:55:57.410

这是一种方法。在您的代码段中，有未说明的条件。此代码通过假设最坏的情况来避免这种情况，并且仅在发生正确情况时设置值（即检查答案 2 和 3，而未检查所有其余情况）。

```
var color = System.Drawing.Color.Red; //assume incorrect answer
var label = "Incorrect";

if (Answer2.Checked && Answer3.Checked && !Answer1.Checked && !Answer4.Checked)
{
  //only the 2 correct answers have been checked
  color = System.Drawing.Color.Green;
  label = "Correct";
}

// set the controls
lblQuestionResult4.ForeColor = color;
lblQuestionResult4.Text = label; 
```

# c# - Zedgraph - 如何自定义基于日期的 X 轴抽动

> ID：15214458
> 
> 赞同：7
> 
> 时间：2013-03-05T01:51:45.037
> 
> 标签：c#, charts, zedgraph

**情况** ![在此处输入图像描述](../Images/f3fbdd3eb90591866e71c99da9f484c6.png)

我正在使用 ZedGraph 的价格（Y 轴）对时间（X 轴）构建图表。期限为三年。

目前我得到的 X 轴标签是：1 月 11 日；1月12日；1 月 13 日，用于 2010 年 3 月 3 日至 2013 年 3 月 2 日的一组数据。

据我所知，如果轴是 DateTime 类型，这是默认行为。

**问题**

如何更改 X 轴标签，以便获得：3 月 11 日；3月12日；3月13日？更一般地说，这样我就可以更改用于与数据的开始/结束月份一致的标签。

* * *

**编辑：**

我对这个问题的最初尝试有点模棱两可，所以我只想澄清一下。

这并不是说我希望标签是 dd-MMM-yy - 我想要的是能够控制 X 轴上出现标签/抽动的位置。

因此，对于跨越 2010 年 3 月 3 日至 2013 年 3 月 2 日的 X 轴，而不是始终出现在 1 月的标签

*   1月11日[即2011年1月]；
*   1月12日[即2012年1月]；
*   1 月 13 日 [即 2013 年 1 月]

如我的屏幕转储中所示，我可以选择标签/tic 出现在哪个月份。因此，对于该数据集，我希望在以下位置添加标签：

*   2010 年 3 月（显示为 Mar10）
*   2011 年 3 月（显示为 Mar11）
*   2012 年 3 月（显示为 Mar12）
*   2013 年 3 月（现为 Mar13）

我希望这更清楚。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T05:57:49.427

您需要将 x 轴属性设置为

```
myPane.XAxis.Title.Text = "Date";
myPane.XAxis.Type = AxisType.Date;
myPane.XAxis.Scale.Format = "dd-MMM-yy";
myPane.XAxis.Scale.MajorUnit = DateUnit.Day;
myPane.XAxis.Scale.MajorStep = 1;
myPane.XAxis.Scale.Min = new XDate(DateTime.Now.AddDays(8));
myPane.XAxis.Scale.Max = new XDate(DateTime.Now.AddDays(11)); 
```

这会给你你要求的日期；`AddDays`我知道如果您想从今天开始倒计时，您可以在方法中添加减号，并且您也可以专门设置日期（只需在开始输入时查看自动完成）。

希望这可以帮助！祝你好运！

**编辑**：

因此，我可以通过以下方式获得这些自定义刻度：您必须使用`TextObj`标签。您还必须摆脱原来的刻度：

```
pane1.MasterPane[0].XAxis.Scale.IsVisible = false;
pane1.MasterPane[0].XAxis.MajorTic.IsAllTics = false;

foreach (double val in x_values)
{
    TextObj text = new TextObj(val.ToString(), pane1.MasterPane[0].YAxis.Scale.Min, val);
    text.Location.AlignH = AlignH.Right;
    text.FontSpec.Border.IsVisible = false;
    text.FontSpec.Fill.IsVisible = false;
    pane1.MasterPane[0].GraphObjList.Add("Mar10"); 

    LineObj line = new LineObj(pane1.MasterPane[0].YAxis.Scale.Min, val, pane1.MasterPane[0].YAxis.Scale.Max, val);
    line.Line.Style = System.Drawing.Drawing2D.DashStyle.Dash;
    line.Line.Width = 1f;
    pane1.MasterPane[0].GraphObjList.Add(line);
} 
```

[我从这个线程](https://stackoverflow.com/questions/907111/zedgraph-net-having-axis-labels-for-actual-values-only)修改了这个，我认为它与你的相似，除了它是针对`Y-axis`. 这有点小技巧，您必须手动添加每个。您实际上不必循环执行`foreach`，我只是将其放入一个循环中，因为这就是我从另一篇文章中复制代码的方式。我希望它有效！

# go - 如何正确使用构建标签？

> ID：15214459
> 
> 赞同：31
> 
> 时间：2013-03-05T01:51:53.460
> 
> 标签：go, build, go-build

我需要能够构建不同版本的 go 应用程序；一个“调试”版本和一个普通版本。

这很容易做到；我只是有一个 const DEBUG，它控制应用程序的行为，但每次我需要在构建类型之间交换时都必须编辑配置文件，这很烦人。

我正在阅读有关 go build ( [http://golang.org/pkg/go/build/](http://golang.org/pkg/go/build/) ) 和标签的信息，我想也许我可以这样做：

配置.go：

```
// +build !debug
package build
const DEBUG = false 
```

config.debug.go：

```
// +build debug
package build
const DEBUG = true 
```

然后我应该能够使用`go build`or构建`go build -tags debug`，并且标签应该 exclude`config.go`和 include `config.debug.go`。

...但这不起作用。我得到：

> src/build/config.go:3：在此块 (<0>) 中重新声明了 DEBUG，之前在 src/build/config.debug.go:3 的声明

我究竟做错了什么？

我应该使用另一种更合适的#ifdef 风格的方法吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-05T02:03:16.793

请参阅[我对另一个问题的回答](https://stackoverflow.com/questions/10646531/golang-conditional-compilation/10649653#10649653)。您需要在该行之后有一个空`// +build`行。

此外，您可能想要`!`在 config.go 中，而不是在 config.debug.go 中；并且大概你想要一个是“DEBUG = false”。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-03-05T07:04:59.630

你可以使用编译时常量：如果你编译你的程序

```
go build -ldflags '-X main.DEBUG=YES' test.go 
```

包 main中的变量`DEBUG`将设置为字符串“YES”。否则，它会保留其声明的内容。

```
package main

import (
    "fmt"
)

var DEBUG = "NO"

func main() {
    fmt.Printf("DEBUG is %q\n", DEBUG)
} 
```

* * *

编辑：从 Go 1.6(?) 开始，开关是`-X main.DEBUG=YES`，在此之前它是`-X main.DEBUG YES`（没有`=`）。感谢@poorva 的评论。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-06-12T08:07:05.710

从 Go 1.17 开始，可以使用新[`//go:build`](https://golang.org/design/draft-gobuild)语法指定构建标签。

至于`//go:build`指令的位置，新设计指出：

> 约束可能出现在任何类型的源文件中（不仅仅是 Go），但它们必须出现在文件顶部附近，前面只有空行和其他`//`注释`/* */`。这些规则意味着在 Go 文件中，构建约束必须出现在 package 子句之前。

所以你仍然需要在`//go:build`指令和包语句之间留一个空行，否则它可以被解析为包文档，但是现在：

*   编译器将拒绝放错位置的指令
*   running`go fmt`将自动修复放错位置的指令

例如`go fmt`在（无空行）上运行：

```
//go:build foo
package main

import "fmt"

func main() {
    fmt.Println("Hello world")
} 
```

给出（带空行）：

```
//go:build foo

package main

import "fmt"

func main() {
    fmt.Println("Hello world")
} 
```

* * *

另请参阅[此答案](https://stackoverflow.com/a/67937234/4108803)以获取有关新语法的更改的更多详细信息。

# ubuntu - ubuntu 10.0.4 出现内核恐慌 - 不同步：VFS: Unable to mount root fs on unknown-block(0,0) while booting

> ID：15214461
> 
> 赞同：0
> 
> 时间：2013-03-05T01:51:58.270
> 
> 标签：ubuntu, kernel, ubuntu-10.04, vfs

嗨，我最近在我的桌面上安装了 ubuntu 8.04，在升级菜单中我升级到了 ubuntu 10.04.3 LTS，但是安装后它开始给我这个错误

```
[    0.694063] Kernel panic - not syncing: VFS: Unable to mount root fs on unknown-block(0,0) 
```

请帮助，因为我是 ubuntu 的新手，如果需要，还可以回复我以获取更多信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-31T21:35:28.910

我在尝试安装 13.10 时遇到了这个问题，但在我的情况下，它的 USB 格式不正确。我的 U 盘已格式化为 NTFS，每次尝试从它启动时都会出现此错误。一旦我将 USB 棒格式化为 fat32，安装就像一个魅力。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T14:57:15.033

我会给你一个我知道可行的选项，但它涉及从完整的安装 CD/ISO 引导并使用救援模式来访问你的引导卷和 Grub。这是您开始时要做的事情。

*   从完整安装 CD 启动并选择救援模式的菜单选项。
*   转到 Grub 所在的引导卷，通常在救援模式下，您的旧文件系统位于 /mnt/sysimage
*   查找并编辑 /mnt/sysimage/boot/grub.conf 以增加超时并使用 grub.conf 中的以下命令取消隐藏菜单。

Grub.conf

```
 timeout=20    
  #hiddenmenu 
```

这次从硬盘重新启动，当 grub 出现时，选择以前的工作内核，它应该启动。您将回到以前的内核并可能发布版本，但您将拥有一个至少可以备份并重试升级的系统。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-16T22:57:57.727

我也遇到了同样的问题，这是解决这个问题的最简单方法，以便获得可启动的系统。您需要做的第一件事是，尝试按照[此处](https://askubuntu.com/questions/92556/how-do-i-boot-into-a-root-shell)说明的**恢复模式**启动。获得**root**提示后，执行以下命令。

 **```
$ sudo update-initramfs -u  
$ sudo update-grub2 
$ sudo reboot 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-28T20:45:59.593

非常老的问题，但我将把我的答案留在这里，因为它在搜索解决方案时在谷歌中显示最高。

从 19.04 升级到 19.10 时，屏幕黑屏，系统完全停止。之后，我拥有的每个可用内核版本的引导都失败了。

就我而言，解决方案是让 Ubuntu 由于升级失败而下载丢失的文件。为此，请尝试以**恢复模式**启动并选择**修复损坏的软件包**选项（如果可用）。这可能需要一段时间，但之后一切都开始工作了。**

# php - PHP OOP 接口类型继承

> ID：15214462
> 
> 赞同：2
> 
> 时间：2013-03-05T01:51:59.373
> 
> 标签：php, oop, interface, inheritance

像这样的代码：

```
interface entite
{

}

class Foo implements entite
{

}

$foo = new foo;
if( $foo instanceof entite ) echo "he is"; 
```

显示“他是”。Foo 从接口继承类型“entite”但是当尝试：

```
class FooDeleter implements deleter
{
public function __construct(Foo $Foo)
{

}
}

interface deleter
{
public function __construct(entite $entite);
} 
```

给我 ：

> `Fatal error: Declaration of FooDeleter::__construct() must be compatible with deleter::__construct(entite $entite)`

为什么 ？如何 ？=(

编辑：独特的方式实际上是像这样定义类型化的删除器：

```
class FooDeleter implements deleter
{
public function __construct(entite $Foo)
{
    if( $Foo instanceof Foo ) { ... }       
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T03:14:43.147

通过`FooDeleter`使用比接口更严格的类型提示声明构造函数，您违反了接口。

如果您将构造函数更改为

```
public function __construct(entite $Foo) 
```

...那么您仍然可以传入一个`Foo`对象，并且该接口将被正确实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T03:15:39.490

根据[PHP 文档](http://www.php.net/manual/en/language.oop5.interfaces.php)：

> **注意**：
> 
> 实现接口的类必须使用与接口中定义的**完全相同的方法签名。**不这样做会导致致命错误。

函数名称和参数编号以及参数类型（如果指定）是方法签名的一部分（全部？），因此您必须声明完全相同的方法。

您仍然可以使用`new FooDeleter($foo)`.

# python - 如何动态加载和卸载 Python 模块、反汇编和检查它，但不执行初始化代码或将其添加到 sys.modules？

> ID：15214470
> 
> 赞同：1
> 
> 时间：2013-03-05T01:52:55.613
> 
> 标签：python, inspect

我正在尝试将 Python 模块分解为字节码。

我必须静态或动态地导入 Python 模块才能反汇编或检查它吗？如果不是，那么（pythonic，便携式）方法是什么？

我想：

1.  在运行时将可用的 Python 模块的二进制数据加载到内存中：
    1.  没有它作为可用模块出现在`sys.modules`.
    2.  我不想执行任何模块的`__init__`代码，或者将它添加到任何命名空间。
    3.  加载模块应该没有其他副作用。就解释器而言，它应该只是要检查的数据块。
2.  反汇编或以其他方式检查模块的类、函数或数据。
3.  需要时卸载模块。

我已经搜索过，我看到了许多动态模块导入的方法（具有执行模块`__init__`代码或其他内联代码以及插入到 sys.modules 中的副作用）。但我宁愿不处理这些副作用。

这可能吗？如果是这样，哪些方法最便携/Pythonic？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T02:35:39.257

我对此进行了一些研究，一种可能的解决方案是使用[pyclbr](http://docs.python.org/2/library/pyclbr.html)模块。它的检查查看有关类和函数的基本信息，将其加载到字典中以便于访问。这是一个示例运行：

```
>>> import pyclbr
>>> import sys
>>> info = pyclbr.readmodule_ex('inspect')
>>> info
{'formatargvalues': <pyclbr.Function object at 0x5083e28e50>, 'walktree': <pyclbr.Function object at 0x5083e28b50>, 'getinnerframes': <pyclbr.Function object at 0x5083e29050>, 'indentsize': <pyclbr.Function object at 0x5083e28710>, 'getmodulename': <pyclbr.Function object at 0x5083e28850>, 'formatannotation': <pyclbr.Function object at 0x5083e28d50>, 'ismemberdescriptor': <pyclbr.Function object at 0x5083e283d0>, 'iscode': <pyclbr.Function object at 0x5083e28550>, 'getsource': <pyclbr.Function object at 0x5083e28b10>, 'formatargspec': <pyclbr.Function object at 0x5083e28dd0>, 'getabsfile': <pyclbr.Function object at 0x5083e288d0>, 'getsourcelines': <pyclbr.Function object at 0x5083e28ad0>, '_getfullargs': <pyclbr.Function object at 0x5083e28c10>, 'isabstract': <pyclbr.Function object at 0x5083e28610>, 'isbuiltin': <pyclbr.Function object at 0x5083e28590>, 'getlineno': <pyclbr.Function object at 0x5083e28f10>, 'getcomments': <pyclbr.Function object at 0x5083e28990>, 'getgeneratorstate': <pyclbr.Function object at 0x5083e293d0>, 'getattr_static': <pyclbr.Function object at 0x5083e29390>, 'getframeinfo': <pyclbr.Function object at 0x5083e28ed0>, 'isgenerator': <pyclbr.Function object at 0x5083e28490>, '_static_getmro': <pyclbr.Function object at 0x5083e29190>, 'isframe': <pyclbr.Function object at 0x5083e28510>, 'getouterframes': <pyclbr.Function object at 0x5083e28f90>, 'getclasstree': <pyclbr.Function object at 0x5083e28b90>, 'getfile': <pyclbr.Function object at 0x5083e287d0>, '_shadowed_dict': <pyclbr.Function object at 0x5083e29310>, 'getargvalues': <pyclbr.Function object at 0x5083e28d10>, 'getmembers': <pyclbr.Function object at 0x5083e28650>, 'BlockFinder': <pyclbr.Class object at 0x5083e28a10>, 'isfunction': <pyclbr.Function object at 0x5083e28390>, 'getargspec': <pyclbr.Function object at 0x5083e28c50>, 'currentframe': <pyclbr.Function object at 0x5083e29090>, 'namedtuple': <pyclbr.Function object at 0x5083e1b150>, 'getmoduleinfo': <pyclbr.Function object at 0x5083e28810>, 'trace': <pyclbr.Function object at 0x5083e29110>, 'isclass': <pyclbr.Function object at 0x5083db8950>, '_is_type': <pyclbr.Function object at 0x5083e29290>, 'getcallargs': <pyclbr.Function object at 0x5083e28e90>, 'ismethoddescriptor': <pyclbr.Function object at 0x5083e28310>, 'isgeneratorfunction': <pyclbr.Function object at 0x5083e28450>, 'isroutine': <pyclbr.Function object at 0x5083e285d0>, 'getfullargspec': <pyclbr.Function object at 0x5083e28cd0>, 'getmro': <pyclbr.Function object at 0x5083e286d0>, 'getargs': <pyclbr.Function object at 0x5083e28bd0>, 'stack': <pyclbr.Function object at 0x5083e290d0>, 'getdoc': <pyclbr.Function object at 0x5083e28750>, 'findsource': <pyclbr.Function object at 0x5083e28950>, 'cleandoc': <pyclbr.Function object at 0x5083e28790>, '_check_class': <pyclbr.Function object at 0x5083e29250>, '_check_instance': <pyclbr.Function object at 0x5083e29210>, 'classify_class_attrs': <pyclbr.Function object at 0x5083e28690>, 'ismodule': <pyclbr.Function object at 0x5083db8910>, 'EndOfBlock': <pyclbr.Class object at 0x5083e289d0>, 'isdatadescriptor': <pyclbr.Function object at 0x5083e28350>, 'getmodule': <pyclbr.Function object at 0x5083e28910>, 'formatannotationrelativeto': <pyclbr.Function object at 0x5083e28d90>, 'getsourcefile': <pyclbr.Function object at 0x5083e28890>, 'ismethod': <pyclbr.Function object at 0x5083e282d0>, 'isgetsetdescriptor': <pyclbr.Function object at 0x5083e28410>, 'istraceback': <pyclbr.Function object at 0x5083e284d0>, 'getblock': <pyclbr.Function object at 0x5083e28a50>}
>>> sys.modules['inspect']
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
KeyError: 'inspect' 
```

任何更高级的东西，您都必须开始研究通过[ast 模块](http://docs.python.org/2/library/ast.html#module-ast)访问抽象语法树。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T05:11:02.493

我找到了适用于 Python 2.7 的[uncompyle2](https://github.com/wibiti/uncompyle2)，它包含[加载源文件并将其编译为字节码](https://github.com/wibiti/uncompyle2/blob/master/uncompyle2/__init__.py#L35-L55)并[加载模块并将其编译为字节码](https://github.com/wibiti/uncompyle2/blob/master/uncompyle2/__init__.py#L57-L79)而不导入模块的函数。

因此，至少它看起来是可行的，但可能涉及`compile()`在源代码上调用，或者，如果使用 pyc 文件，则可能不可移植（uncompyle2 仅支持 Python 2.7 与 pyc 文件。）

# r - 在 lapply/ldply 的列表中使用对象名称

> ID：15214472
> 
> 赞同：7
> 
> 时间：2013-03-05T01:53:37.007
> 
> 标签：r, plyr

在尝试早先回答[一个问题](https://stackoverflow.com/questions/15213779/how-to-have-multiple-color-scales-into-one-plot-r/15214213#15214213)时，我遇到了一个看起来应该很简单的问题，但我无法弄清楚。

如果我有数据框列表：

```
df1 <- data.frame(a=1:3, x=rnorm(3))
df2 <- data.frame(a=1:3, x=rnorm(3))
df3 <- data.frame(a=1:3, x=rnorm(3))

df.list <- list(df1, df2, df3) 
```

我想`rbind`在一起，我可以做到以下几点：

```
df.all <- ldply(df.list, rbind) 
```

但是，我想要另一列来标识`data.frame`每一行的来源。我希望能够使用该`deparse(substitute(x))`方法（[此处](https://stackoverflow.com/questions/10520772/in-r-how-to-get-an-objects-name-from-the-object-itself)和其他地方）来获取相关名称`data.frame`并添加一列。这就是我的处理方式：

```
fun <- function(x) {
  name <- deparse(substitute(x))
  x$id <- name
  return(x)
}
df.all <- ldply(df.list, fun) 
```

哪个返回

```
 a          x      id
1 1  1.1138062 X[[1L]]
2 2 -0.5742069 X[[1L]]
3 3  0.7546323 X[[1L]]
4 1  1.8358605 X[[2L]]
5 2  0.9107199 X[[2L]]
6 3  0.8313439 X[[2L]]
7 1  0.5827148 X[[3L]]
8 2 -0.9896495 X[[3L]]
9 3 -0.9451503 X[[3L]] 
```

所以显然列表中的每个元素都不包含我认为的名称。谁能建议一种方法来获得我的期望（如下所示）？

```
 a          x  id
1 1  1.1138062 df1
2 2 -0.5742069 df1
3 3  0.7546323 df1
4 1  1.8358605 df2
5 2  0.9107199 df2
6 3  0.8313439 df2
7 1  0.5827148 df3
8 2 -0.9896495 df3
9 3 -0.9451503 df3 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-05T02:12:13.367

用名字定义你的列表，它应该给你一个名字的`.id`列`data.frame`

```
df.list <- list(df1=df1, df2=df2, df3=df3)
df.all <- ldply(df.list, rbind) 
```

输出：

```
 .id a           x
1 df1 1  1.84658809
2 df1 2 -0.01177462
3 df1 3  0.58579469
4 df2 1 -0.64748756
5 df2 2  0.24384614
6 df2 3  0.59012676
7 df3 1 -0.63037679
8 df3 2 -1.17416295
9 df3 3  1.09349618 
```

`data.frame`然后你可以从列中知道名称`df.all$.id`

*编辑：* 根据@Gary Weissman 的评论，如果您想自动生成名称，您可以这样做

```
names(df.list) <- paste0('df',seq_along(df.list) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T02:04:25.907

仅使用 base，可以尝试以下操作：

```
dd <- lapply(seq_along(df.list), function(x) cbind(df_name = paste0('df',x),df.list[[x]]))

do.call(rbind,dd) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T02:06:13.417

但是，在您的定义中，`df.list`没有名称，即使那样，deparse 替代成语似乎也无法轻松工作（作为`lapply`调用`.Internal(lapply(X, FUN))`-您必须查看源代码以查看对象名称是否可用以及如何获取它

就像是

```
names(df.list) <- paste('df', 1:3, sep = '')

foo <- function(n, .list){
         .list[[n]]$id <- n
         .list[[n]]
       } 

     a          x id
1 1  0.8204213  a
2 2 -0.8881671  a
3 3  1.2880816  a
4 1 -2.2766111  b
5 2  0.3912521  b
6 3 -1.3963381  b
7 1 -1.8057246  c
8 2  0.5862760  c
9 3  0.5605867  c 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-05T02:38:34.657

如果你想使用你的`function`, 而不是`deparse(substitute(x))`use `match.call()`，并且你想要第二个参数，请确保将其转换为`character`

```
 name <- as.character(match.call()[[2]]) 
```

# visual-studio-2010 - 是否可以将 VisualStudio.com 与 VS2010 一起使用？

> ID：15214473
> 
> 赞同：4
> 
> 时间：2013-03-05T01:53:55.790
> 
> 标签：visual-studio-2010, tfs, azure-devops

是否可以通过 Visual Studio 2010 连接到位于 visualstudio.com 的 TFS？一切似乎都指向我下载并安装 VS2012。可能有Windows客户端吗？拜托，我知道我应该升级到 VS2012，但是在我升级之前，我可以使用 VS2010 吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T01:57:13.343

是的，你可以和 VS2010 一起使用，但是你需要安装一个小补丁：

[Visual Studio 2010 SP1 Team Foundation Server 2012 兼容性 GDR](http://www.microsoft.com/en-us/download/details.aspx?id=29082)

更新提供了连接到 Team Foundation Server 2012 或 Team Foundation Service Preview 的所有 VS 2010 产品之间的兼容性

# jquery-ui - jquery数据表内的jquery-ui按钮

> ID：15214474
> 
> 赞同：1
> 
> 时间：2013-03-05T01:53:56.130
> 
> 标签：jquery-ui, datatables

我正在使用带有主题滚轮支持的 jquery 数据表，并且我想在每一行的列中放置一个 jquery-ui 按钮。为此，我使用以下代码：

```
oTable = $('#balances').dataTable({
    "bProcessing": true,
    "bServerSide": true,
    "bJQueryUI": true,
    ...
    "aoColumns": [
        ...
        {
            "mData": null,
            "mRender": function(data, type, row) {
                return $("<div />")
                    .append($("<button id='detail'>Details</button>").button())
                    .html();
            }
        }
    ]
}); 
```

绘制了按钮，我可以将事件附加到它们，但似乎我遗漏了一些东西（例如，当您将鼠标移到这些按钮上时，这些按钮没有动画）。我该如何纠正？有更好的方法吗？先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T11:34:51.243

因为不建议使用多个相同的 ID，所以我建议改用一个类，并在代码中将 .button() 调用进一步向下移动：

```
oTable = $('#balances').dataTable({
    "bProcessing": true,
    "bServerSide": true,
    "bJQueryUI": true,
    ...
    "aoColumns": [
        ...
        {
            "mData": null,
            "mRender": function(data, type, row) {
                return $("<div />")
                    .append($("<button class='detail'>Details</button>"))
                    .html();
            }
        }
    ]
});
$("button.detail").button(); 
```

# ios - locationInView: 对多指手势识别器意味着什么？

> ID：15214475
> 
> 赞同：1
> 
> 时间：2013-03-05T01:53:57.300
> 
> 标签：ios, cocoa-touch, touch, uigesturerecognizer

我正在使用一个`UIRotationGestureRecognizer`并且在目标方法中有这个代码：

```
if (gestureRecognizer.state == UIGestureRecognizerStateBegan) {
    UIView *piece = gestureRecognizer.view;
    CGPoint locationInView = [gestureRecognizer locationInView:piece];
    CGPoint locationInSuperview = [gestureRecognizer locationInView:piece.superview];

    piece.layer.anchorPoint = CGPointMake(locationInView.x / piece.bounds.size.width, locationInView.y / piece.bounds.size.height);
    piece.center = locationInSuperview;
} 
```

但我不太明白`locationInView:`返回值表示哪个值，因为应该有两根手指触摸屏幕。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T01:58:06.690

该`locationInView:`方法返回两个触摸的中心点。如果您想知道两个单独触摸的位置，请使用`locationOfTouch:inView:`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T02:05:57.680

阅读文档是个好主意：

[http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIGestureRecognizer_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIGestureRecognizer_Class/Reference/Reference.html)

它是多次触摸的“质心”。

# bash - 没有EOF的管道数据？可能的？

> ID：15214477
> 
> 赞同：0
> 
> 时间：2013-03-05T01:54:02.797
> 
> 标签：bash, netcat

我正在尝试编写一个 bash 脚本，该脚本在 nc 中打开一个在后台保持打开的 FTP 连接。我有：

```
(echo "USER o:)"; echo "PASS foo")| nc -d 192.168.56.101 21 & 
```

但连接会立即关闭。有一个更好的方法吗？

万分感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T02:24:41.123

我明白了：将读取添加到链中！

# c++ - 在表达式中使用 pow 函数

> ID：15214481
> 
> 赞同：0
> 
> 时间：2013-03-05T01:54:37.350
> 
> 标签：c++, function, pow

```
#include <iostream>
#include <string>
#include <iomanip>
#include <cmath>

// Defining Variable

using namespace std;

const int MONTHS_IN_YEAR = 12; 
const int PURCHASE_PRICE= 123500;
const int AMOUNT_MORG= 111150;
const int DOWN_PAYMENT =  12350;
const float MONTHLY_RATE= 0.542f;
const float FORMULA_RATE=1.542f;
float PAYMENT;
int main()

{

PAYMENT= (float)(MONTHLY_RATE*AMOUNT_MORG)*(pow(1.542,180));
cout << PAYMENT;

cout <<  fixed << showpoint << setprecision(2);

system ("cls");
cout <<"$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$"; 
cout <<'$';
cout << setw(79)<<'$';
cout<<'$';
cout << setw(79)<<'$';
cout << '$';
cout << setw(79)<<'$';
cout << '$'<<"      " <<"Welcome to the mortgage information calculator 2013"
<<"                     " << '$';
cout <<'$';
cout << setw(79)<<'$';
cout<<'$';
cout << setw(79)<<'$';
cout <<'$'<< "     "<< " Made exclusively for Dewey,Cheatum and Howe bankers"
<<"                     "<<'$';
cout <<'$';
cout << setw(79)<<'$';
cout<<'$'<<"      "<< "by: Steven Fisher"
<<"                                                       "<<'$';
cout <<'$';
cout << setw(79)<<'$';
cout<<"$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$"<<endl; 

system ("pause");

return 0; 

} 
```

所以这是我的代码。我是 C++ 语言的新手，我在课堂上分配了一个项目，我必须计算房屋抵押贷款的每月付款。

我需要使用`pow`函数并将幂乘以表达式。这是我尝试过的：

```
(float)(MONTHLY_RATE*AMOUNT_MORG)*(pow(1.542,180)) 
```

当我运行程序时，我得到一个答案`1.#inf`。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T01:56:47.027

1.542 ^(180)大于 7,164,522,793,368,325,816,802,274,738,448,555。这是一个很大的数字，你确定它适合你的浮点类型吗？

根据您在下面的评论，您似乎想要使用 1.00542。您还有其他几个错误的信息副本 ( `MONTHLY_RATE`, `FORMULA_RATE`)。

# ruby - 为 Ruby 要求添加搜索根路径（GCC -L 等效项）

> ID：15214482
> 
> 赞同：0
> 
> 时间：2013-03-05T01:54:41.040
> 
> 标签：ruby, search, directory, require

我`-L`在 GCC 上使用来指定额外的搜索根目录。然后 GCC 将搜索除默认系统搜索目录之外的目录。

我认为 Ruby`require`只搜索系统的 gem 安装目录。而且当我使用`ruby -I <path>`它时，它似乎只在指定目录中查找，并且不包括系统 gem 安装目录。

它简单干净，但我希望它使用系统 gems 目录以及其他搜索目录。就像 GCC`-L`参数一样。有什么选择吗？或者我是否有系统 gem 目录的方便别名，它可以通过系统移植？

或者我应该在我的项目本地安装预期的 gem？我已经预料到了，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T01:57:37.173

做起来很简单。要将目录添加到 Ruby 路径，请在任何要求之前执行此操作：

```
$: << '/path/to/gem/dir' 
```

# certificate - VSTO - ClickOnce - 证书

> ID：15214484
> 
> 赞同：1
> 
> 时间：2013-03-05T01:54:48.717
> 
> 标签：certificate, vsto, clickonce

VSTO ClickOnce 想要将证书添加到已发布的可部署客户端。即使在 Live 环境中使用测试证书有什么问题吗 - 请注意我们在 Intranet 上（因此信任不是真正的问题）。

如果我们使用测试证书。在 Live 中它是否会过期 - 如果是，我们可以让它永不*过期*吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T03:01:51.230

对于 Intranet，您可以通过设置 microsoft 证书服务器或使用 makecert 来创建自己的代码签名证书。

使用这种方法，您可以创建有效期为 10-20 年的证书并使用 certmgr 进行注册。这个新证书可以在 Visual Studio 中用于签署您的项目。

# windows - 命令列出文件夹中的所有文件以及窗口中的子文件夹

> ID：15214486
> 
> 赞同：238
> 
> 时间：2013-03-05T01:55:15.393
> 
> 标签：windows, command-line, command, dir

我尝试使用命令提示符命令搜索可以列出目录中所有文件以及子文件夹的命令。我已经阅读了“dir”命令的帮助，但找不到我要找的东西。请帮助我什么命令可以得到这个。

* * *

## 回答 #1

> 赞同：365
> 
> 时间：2013-03-05T02:13:08.583

下面的帖子为您的场景提供了解决方案。

```
dir /s /b /o:gn 
```

* * *

**/S**显示指定目录和所有子目录中的文件。

**/B**使用裸格式（没有标题信息或摘要）。

**/O**按排序顺序列出文件。

然后在**:gn**中，*g*按文件夹排序，然后按文件排序，*n*按字母顺序排列这些文件。

* * *

## 回答 #2

> 赞同：138
> 
> 时间：2016-08-24T13:49:00.610

如果你想像图形目录树一样列出文件夹和文件，你应该使用[tree 命令](https://jpsoft.com/help/tree.htm)。

```
tree /f 
```

显示格式或排序有多种选择。

检查示例输出。

[![在此处输入图像描述](../Images/625c09f83d5a6e4d5c2ea342b56bd6ee.png)](https://i.stack.imgur.com/DQLnO.jpg)

回复晚了。希望它可以帮助某人。

* * *

## 回答 #3

> 赞同：66
> 
> 时间：2015-05-15T09:39:01.700

答案的补充：当您不想列出文件夹时，只列出子文件夹中的文件，请使用**/AD**开关，如下所示：

```
dir ..\myfolder /b /s /A-D /o:gn>list.txt 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-08-09T12:56:34.433

上述命令的替代方案更防弹。

无论权限或路径长度如何，它都可以列出所有文件。

```
robocopy "C:\YourFolderPath" "C:\NULL" /E /L /NJH /NJS /FP /NS /NC /B /XJ 
```

我在我的博客中写过的 C:\NULL 的使用有一个小问题

[https://theitronin.com/bulletproofdirectorylisting/](https://theitronin.com/bulletproofdirectorylisting/)

但尽管如此，这是我所知道的最强大的命令。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-06-21T12:52:21.410

如果您只需要获取文件+文件夹的基本快照。请按照以下婴儿步骤操作：

*   按`Windows`+`R`
*   按`Enter`
*   类型`cmd`
*   按`Enter`
*   类型`dir -s`
*   按`Enter`

# r - 如何在 GGPLOT 中挖掘隐藏的回归线

> ID：15214489
> 
> 赞同：5
> 
> 时间：2013-03-05T01:55:25.647
> 
> 标签：r, plot, ggplot2

目前我的回归图看起来像这样。请注意，回归线被深深地掩埋了。

有什么办法可以在这里修改我的代码，将其显示在点的顶部吗？我知道我可以增加尺寸，但它仍然在点的下方。

```
p <- ggplot(data=my_df, aes(x=x,y=y),) +
     xlab("x") +
     ylab("y")+
     geom_smooth(method="lm",se=FALSE,color="red",formula=y~x,size=1.5) +
     geom_point()
p 
```

![在此处输入图像描述](../Images/568f9b6a1571d40861aeac863c4cfb6b.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-05T01:58:33.630

只需更改顺序：

```
p <- ggplot(data=my_df, aes(x=x,y=y),) +
     xlab("x") +
     ylab("y")+
     geom_point() +
     geom_smooth(method="lm",se=FALSE,color="red",formula=y~x,size=1.5)
p 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-05T02:20:51.820

问题不在于颜色，而在于几何图形的**顺序**。如果您先打电话`geom_point()`，*那么* `geom_smooth()` 后者将在前者之上。

绘制以下内容以进行比较：

```
Before <- 
  ggplot(data=my_df, aes(x=x,y=y),) +
     xlab("x") +
     ylab("y")+
     geom_smooth(method="lm",se=FALSE,color="red",formula=y~x,size=1.5) +
     geom_point()

After <- 
  ggplot(data=my_df, aes(x=x,y=y),) +
     xlab("x") +
     ylab("y")+
     geom_point() + 
     geom_smooth(method="lm",se=FALSE,color="red",formula=y~x,size=1.5) 
```

* * *

![点之后绘制的线](../Images/de8e3fc3280c471a735754114cc76bb5.png)

![在点之前绘制的线](../Images/052c3116a0df7f8bd311b3cf9f6279e8.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T02:23:10.313

透明点怎么样？

```
library(ggplot2)
seed=616
x1<- sort(runif(rnorm(1000)))
seed=626
x2<- rnorm(1000)*0.02+sort(runif(rnorm(1000)))
my_df<- data.frame(x= x1, y = x2)
p <- ggplot(data=my_df, aes(x=x,y=y),) +
  xlab("x") +
  ylab("y")+ 
  geom_smooth(method="lm",se=FALSE,color="red",formula=y~x,size=1.5)+
  geom_point(size = I(2), alpha = I(0.1))
p 
```

![透明的绘图点](../Images/81e5cc73ffb7de6c34f7d630475d0cc0.png)

# postgresql - 如何动态测试和构建复杂的 PostgreSQL 表达式？

> ID：15214491
> 
> 赞同：0
> 
> 时间：2013-03-05T01:55:42.350
> 
> 标签：postgresql

我喜欢有多少种语言允许您在将表达式放入代码库之前在终端/shell/REPL 中测试表达式。有没有办法尝试 PostgreSQL 表达式——例如[约束](http://www.postgresql.org/docs/9.2/static/ddl-constraints.html)的逻辑表达式——而不必（a）将约束添加到数据库或（b）查询现有数据库？（我正在寻找最小的东西。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T12:55:13.083

要在不更改架构的情况下测试架构更改，请在事务中执行：

```
begin;

alter table t add foreign key (osm) references s(i);

insert into t values (3,3);
ERROR:  insert or update on table "t" violates foreign key constraint "t_osm_fkey"
DETAIL:  Key (osm)=(3) is not present in table "s".

rollback; 
```

如果您喜欢测试结果`commit`，那么请使用`rollback`

但如果它只是一个表达式，只需选择它：

```
select 1 > 2
select '2012-01-01' < current_date 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T01:55:42.350

正如[Postgres 关于查询的文档](http://www.postgresql.org/docs/9.2/static/queries-overview.html)中所述，以下是合法的 SQL 查询：

```
SELECT random(); 
```

只需替换您选择的表达方式即可。

# java - 完成类定义

> ID：15214493
> 
> 赞同：1
> 
> 时间：2013-03-05T01:55:44.320
> 
> 标签：java, constructor, variable-assignment

假设您有以下 PetDriver 类，其中包含一个 main 方法：

```
public class PetDriver{
  public static void main(String[] args){
    int weight = 40;
    Pet doggie = new Pet("Rover", weight);
    System.out.println("my pet's name is " + doggie.getName());
    System.out.println("my pet's weight is " + doggie.getWeight());
  }
} 
```

执行 main 会产生以下输出：

我的宠物的名字是 Rover
我的宠物的体重是 40

我的代码如下，但它返回 null。

```
public class pet {

    public String name;
    public int weight = 40;

    public Pet (String y, int x){
        y = name;
        x = weight;
    }

    public String getName(){
        return name;
    }

    public int getWeight(){
        return weight;
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T01:57:44.687

在您的构造函数中，您应该以相反的方式执行此操作：

```
public Pet (String y, int x){
  name = y;    // instead of y = name
  weight = x;  // instead of x = weight
} 
```

您所做的是将成员值分配给构造函数的参数，而不是相反。因此，成员值`name`本身从未被写入，因此它是`null`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T01:58:17.013

您的构造函数不会将值分配给属性。将它们更改为以下内容。

```
public Pet (String y, int x){
  name = y;
  weight = x;
} 
```

# dependency-injection - setter 和 getter 真的会破坏 SRP 吗？

> ID：15214497
> 
> 赞同：4
> 
> 时间：2013-03-05T01:55:51.197
> 
> 标签：dependency-injection, solid-principles, single-responsibility-principle

我最近阅读[了一篇文章，描述](http://phpmaster.com/the-single-responsibility-principle/)了他们如何清楚地破坏**SRP**。现在我完全糊涂了，因为我用 setter 和 getter 编写了很长一段时间的单个类。

另外，我[找到了这个，但它与](https://stackoverflow.com/questions/996179/allen-holub-wrote-you-should-never-use-get-set-functions-is-he-correct)**SRP**无关

 **好吧，乍一看，getter 和 setter 都没有违反**单一职责原则**，因为它们具有仅“属于”当前类的逻辑。他们可以访问/写入“服务”单一目的的类成员。美好的。

但是等等，让我们先定义基本术语：

**数据访问** = setter 和 getter

**数据处理**= 数据处理，操作，例如`CRUD`，验证等

如果是这样，那么我们在一个类中有两个不同的职责，从而破坏了**SRP**。

* * *

让我们假设一下，为了不破坏 SRP，我们将在不同的类中定义数据访问和数据操作。

```
class DA { // <- Data Access
  public string getName() {
      return this.name;
  }

  public string setName(name) {
     this.name = name;
  }
}

class DataHandler {
     public DataHandler(da) { // <- Inject an instance of DA
         this.da = da;
     }

     public bool validate() {
          // validation stuff
     }
} 
```

看起来不错，因为我们没有违反上述 SRP。但是在这里，我在 DA 类中只有一个 setter 和一个 getter。

* * *

**现在的问题**：

1) 即使我只有一个 setter 和 getter，我是否应该始终创建另一个 DA 类，以免破坏 SRP？

2) setter 和 getter 真的会破坏**SRP**吗，它们不应该在任何类中使用吗？

3）如果是这样，**依赖注入**总是答案吗！？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-02-14T02:21:32.577

**setter 和 getter 会破坏 SRP 吗？**

Setter 和 getter 不是重点。SRP 的要点是一个类应该只有一个职责。

表示域对象是一项重大责任。执行此操作的对象通常称为“数据对象”。由于语言设计或约定，数据对象通常具有 setter 和 getter，但它们本身并不是单独的责任；他们只是管道。

将数据对象进出持久存储是另一项重大责任。执行此操作的对象通常称为“数据访问对象”(DAO)。*一个不是数据对象*的 DAO可能不需要它管理的数据对象类型的属性的 setter 和 getter，尽管我可以想象一个非常糟糕的框架需要它们。与 DAO 一样，其他类型的对象使用数据对象（显示它们、序列化和反序列化它们、对它们执行计算等）而不是数据对象本身可能不需要反映数据对象的 setter 和 getter。

因此，拥有 setter 和 getter 表明您的对象是数据对象。如果它是一个数据对象，并且它也是一个 DAO 或有其他重大责任，它可能确实违反了 SRP。

旁注：你提到了验证。在典型的应用程序验证中，至少单个数据对象属于数据对象本身，因为表示域对象并强制执行域对象属性之间的单个正确性和关系几乎是相同的责任。

**即使我只有一个 setter 和 getter，我是否应该始终创建另一个 DA 类？**

一般来说，是的。重点不是属性的数量；关键是表示和访问是两个不同的职责，属于不同的类。

典型的应用程序有许多域对象，因此如果将域对象与其访问完全分开是有意义的，那么对所有域对象（甚至是单属性对象）一致地这样做是有意义的。

**依赖注入总是答案吗？**

这取决于您的架构和框架。您可能有不可变的数据对象和 DAO，其方法将它们作为参数；那里没有 DI（尽管您可以将 DAO 注入到使用它们的更高级别的组件中）。您可能拥有使用数据对象或引用 DAO 的数据对象实例化的 DAO（我见过但不喜欢这两种模式）；你可能需要 DI 那里。无论哪种方式，它都与其余的讨论没有太大关系。**

# java - 在while循环中设置变量

> ID：15214499
> 
> 赞同：0
> 
> 时间：2013-03-05T01:55:58.887
> 
> 标签：java, loops, colors, while-loop, image

我正在制作一个项目，我需要创建一个方法，该方法将创建两个不同的紫色斑点，这些斑点将在不同的程序中调用。这是我的代码：

```
public class PaintablePicture extends Picture
{
 public PaintablePicture(String fileName)
 {super(fileName);}

  public void purpleSplotch(int x,int y)
  {
  int x=0;
  int y=1;
  while(x < x*2)
  while(y < y*3)

 {
    Color purple = new Color(175, 0, 175);
   Pixel pixRef;
   pixRef= this.getPixel(x,y);
  pixRef.setColor(purple);

  }
 return;

} 
```

在我称之为的另一个程序中，我有：

```
 FileChooser.pickMediaPath();
  PaintablePicture pRef;
  pRef = new PaintablePicture(FileChooser.pickAFile());
  pRef.purpleSplotch(10,20);
  pRef.explore(); 
```

我必须制作一个使用变量的while循环才能产生斑点，我不明白请帮助我，我得到“错误：重复的局部变量x”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T01:58:57.500

您在方法中传递值“x”和“y”

```
public void purpleSplotch(int x,int y) 
```

并再次在方法中本地声明它

```
int x=0;
int y=1; 
```

这就是您收到该错误的原因。

在方法中声明另一个变量，而不是再次声明 x 和 y。

进行以下更改：

```
public void purpleSplotch(int x,int y)
  {
  int x1=0;
  int y1=1;
  while(x1 < x*2)
  while(y1 < y*3)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T01:59:35.343

首先，您必须看到您有两个参数，第一个称为 x 和第二个 y，并且在方法内部，您还定义了具有相同名称的变量。尝试更改参数的名称或局部变量的名称

# login - 我应该在sql server中的服务器名称中写什么

> ID：15214501
> 
> 赞同：0
> 
> 时间：2013-03-05T01:56:13.337
> 
> 标签：login, sql-server-2008-r2, server-name

我已经安装了 sql server 2008 r2 但是 sqlserver 中的“服务器名称”字段是空的，我无法登录到这个我应该在 sql server 中的服务器名称中写什么？

我在 Windows 7 中的帐户名称是

> 阿拉韦

我的电脑名称是

> alaveh-pc

我测试过

> alaveh , alaveh-pc , 本地 , .\local , LocalSystem , (local) , .\alaveh , .\alaveh-pc

我需要你的帮助 。非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T16:08:04.377

使用 SQL Server Management Studio：

1.  跑`File -> Connect Object Explorer...`
2.  单击`Server Name`并选择`<Browse for more...>`
3.  选择`Network Servers`选项卡
4.  等到服务器名称列表将被检索并展开`Database Engine`树中的节点
5.  查找名称以您的 PC 名称开头的服务器 -`alaveh-pc`
6.  选择它，按下`OK`按钮，然后使用只有您知道的正确凭据连接

# ios - 隐藏以编程方式为标签创建的 UIButton

> ID：15214502
> 
> 赞同：5
> 
> 时间：2013-03-05T01:56:18.177
> 
> 标签：ios, xcode, uibutton

目前，我使用 for 循环以编程方式创建了 14 个按钮，代码如下：

```
int buttonCount = 14;
for (int i=0; i< buttonCount; i++) {             

//Create titleString from array object
    NSString *stringFromInt = [NSString stringWithFormat:@"%@",[arrayForRound objectAtIndex:i]];

        UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];

        [button addTarget:self
                   action:@selector(buttonSelected:)
         forControlEvents:UIControlEventTouchDown];

        [button setTitle:stringFromInt forState:UIControlStateNormal];

        button.titleLabel.font = [UIFont fontWithName:@"helvetica" size:19];
        button.tag = i;

        [self.view addSubview:button];
} 
```

这非常适合创建按钮，然后我可以使用所选按钮的值填充答案框：

```
-(void)buttonSelected: (UIButton *)sender
{
[_buttonOne setTitle:sender.titleLabel.text forState:UIControlStateNormal];
} 
```

但是，在填充按钮后，我想将其从屏幕上删除。如果我调用 button.hidden 它只是隐藏以编程方式创建的最后一个按钮。我知道 button.tag 并尝试使用它，但感觉我几乎需要做类似的事情：

```
//Hide button for tag (i know this is incorrect syntax)
button for buttonTag: 3 setHidden; 
```

有没有类似的东西或这样做的方法？

### 更新

我试图隐藏的按钮是以编程方式创建的。所以我希望 _buttonOne 采用创建按钮的标题（让我们称之为 letterButton），然后从视图中隐藏 letterButton，

```
UIButton *yourBtn = (UIButton *)[self.button viewWithTag:3];
[yourBtn setHidden:YES];
(code posted by Oh Seung Kwon) 
```

此代码完美运行，但它隐藏了错误的按钮集。（隐藏 _buttonOne 而不是 letterButton）。

我想知道在 nib 中创建 12 个按钮并手动命名它们是否会更好......永远不会多或少 12 个。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-05T02:05:03.643

当您的按钮被点击时，您可以`hidden`在 action 方法的`sender`参数上设置属性，即实际被点击的按钮。这将隐藏被点击的按钮。

```
- (void)buttonSelected:(UIButton *)sender {
   [_buttonOne setTitle:sender.titleLabel.text forState:UIControlStateNormal];
   [sender setHidden:YES];
} 
```

如果您打算检索带有 标记的按钮，则`3`可以改用以下代码：

```
[[self.view viewWithTag:3] setHidden:YES]; 
```

*我不建议您使用该`tag`属性 - 您应该使用 Interface Builder 和 an`IBOutletCollection`来代替。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T02:04:44.733

像这样

```
UIButton *yourBtn = (UIButton *)[self.view viewWithTag:3];
[yourBtn setHidden:YES]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T03:08:12.953

您可以使用此消息按标签获取视图。

```
[self.view viewWithTag:3]; 
```

我们总是用宏来具体标记，就像

```
#define kFirstButtonTag (100) 
```

或使用

```
#define kButtonBeginTag (100) 
```

然后使用宏来获取标签。

并且使用特殊编号 - 始终使用案例 0、1 或 2，以特殊编号开始您的标签可以避免一些问题

# bash - BASH - 只是删除第一个字符和最后一个字符之前的空格

> ID：15214503
> 
> 赞同：1
> 
> 时间：2013-03-05T01:56:18.230
> 
> 标签：bash

只需删除第一个字符和最后一个字符之前的空格

```
FOO="   ffs ff ssdf hfdh     hfghfghfgh hhgfg      "

result
ffs ff ssdf hfdh     hfghfghfgh hhgfg 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T09:06:09.600

假设目标是修改变量（以降低可移植性的顺序）：

```
# POSIX
foo=${foo#"${foo%%[! ]*}"} foo=${foo%"${foo##*[! ]}"}

# Bash/ksh
${BASH_VERSION+'false'} || shopt -s extglob
foo=${foo##+( )} foo=${foo%%+( )}

# Bash4/ksh
IFS=' ' read -rd '' foo < <(printf %s "$foo")

# Bash4/ksh93
${KSH_VERSION+'false'} || typeset -n BASH_REMATCH=.sh.match
[[ $foo =~ ^\ *([! ].*[! ])\ *$ ]]
foo=${BASH_REMATCH[1]}

# ksh93
foo=${foo/~(K)*(\ )@([! ]*[! ])*(\ )/\2} 
```

像往常一样，如果不知道您从什么开始以及您想对结果做什么，就不可能推荐最佳方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T02:02:34.403

```
echo "   ffs ff ssdf hfdh     hfghfghfgh hhgfg      " | sed -e 's/^ *//g' -e 's/ *$//g' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T02:03:45.027

回声 $FOO | sed 's/^ *//' | sed 's/ *$//'

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T02:02:01.190

如果您使用的是 bash v4，那么这应该适合您。

```
FOO=${FOO:1:-1} 
```

# sql - 在 SQL 查询中，\（反斜杠）是什么意思？

> ID：15214509
> 
> 赞同：5
> 
> 时间：2013-03-05T01:57:07.200
> 
> 标签：sql, sql-like

我有以下查询

```
SELECT txt1 FROM T1 WHERE txt1 LIKE '_a\%' 
```

这会导致答案有任何 char+a+\+whatever 吗？

结果是像 Pa\pe 这样的东西有效吗？

Ca% 或 _a% 可能是有效答案吗？

\ 在 SQL 查询中的行为如何正常？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T03:07:09.160

% 是与 LIKE 子句中的零个或多个字符匹配的通配符。_ 是一个通配符，它​​恰好匹配 LIKE 子句中的一个字符。

\ 是一个特殊字符，称为转义字符，表示直接跟在它后面的字符应该按字面意思解释（对单引号、通配符等很有用）。

例如：

```
SELECT txt1 FROM T1 WHERE txt1 LIKE '_a%' 
```

将选择 txt1 值为 'xa1'、'xa taco'、'ya anything really' 等的记录。

现在假设您要实际搜索百分号。为此，您需要一个特殊字符来指示不应将 %*视为*通配符。例如：

```
SELECT txt1 FROM T1 WHERE txt1 LIKE '_a\%' 
```

将选择 txt1 值为 'ba%' 的记录（但仅此而已）。

最后，LIKE 子句通常包含通配符（否则您可以只使用 = 而不是 LIKE）。因此，您可能会看到一个包含 \%% 的查询。这里第一个百分号将被视为文字百分号，但第二个将被解释为通配符。例如：

```
SELECT txt1 FROM T1 WHERE txt1 LIKE '_a\%%' 
```

将选择 txt1 值为“da%something else”、“fa% taco”、“ma% bundle of tacos”等的记录。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-05T02:03:18.223

LIKE 子句允许您在不知道确切值时查找文本，例如以 JO 开头的名称将是

```
LIKE 'JO%' 
```

但是，如果您正在搜索以 结尾的**`a%`**内容，那么您需要告诉 SQL 将 % 视为您正在搜索的内容的一部分。在您的示例中，您正在寻找一个 3 个字符的字符串，您不在乎第一个字母是什么，但必须以**a%**结尾。

# arrays - Sumproduct 公式返回一个#VALUE！当最后一个数组引用每行中都有公式的列时出错。微软 Excel 2010

> ID：15214510
> 
> 赞同：0
> 
> 时间：2013-03-05T01:57:10.830
> 
> 标签：arrays, error-handling, excel-formula, excel-2010, array-formulas

我试图找到一种简单的方法来计算工作簿中多张工作表上的销售佣金。每个月，我都需要找出在指定月份内仅售出的商品的总净利润。

我目前使用的公式是：

```
=SUMPRODUCT((TEXT('Sheet Name'!$P$3:P24,"MY")=TEXT($G$4,"MY"))*'Sheet Name'!$M$3:M24) 
```

*   P 列显示销售日期，
*   M 列的每一行都包含一个计算净利润的公式，以及
*   单元格 G4 是我输入当前正在使用的月份和年份的地方。

我得出的结论是它只给了我#VALUE！由于M列的*每一行*中的公式而出错（例如： `=IF(OR(F15=0,G15=0)," ",(F15-L15))`）。

当我引用不包含公式的不同列（代替列 M）时，它可以完美运行（例如：）`=SUMPRODUCT((TEXT('Sheet Name'!$P$3:P24,"MY")=TEXT($G$4,"MY"))*'Sheet Name'!$G$3:G24)`。此外，将星号更改为逗号会导致公式计算错误并添加`(--(TEXT`双重否定并不能解决问题。

如何在不从 M 列中删除公式的情况下计算该数组？

感谢您的关注。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T02:56:30.397

我认为它会给您一个#VALUE 错误，因为您的公式会生成文本（空格），并且在尝试将空格乘以数字（也称为 True 或 False）时会出错。我认为您最好将 M 列公式更改为`=IF(OR(F15=0,G15=0),0,(F15-L15))`. 您是否有特定理由不对其进行评估`0`？还有一个原因是您要转换为文本来进行月/年检查吗？

尝试这样的事情：`=SUMPRODUCT(--(MONTH('Sheet Name'!$P$3:P24)=MONTH($G$4)),--(YEAR('Sheet Name'!$P$3:P24)=YEAR($G$4)),'Sheet Name'!$M$3:M24)`。当然，这取决于输入日期作为实际日期。用于将`--`逻辑/布尔值（真/假）更改为 1 或 0。它不会对文本做任何有用的事情。例如，它也应该工作，`=SUMPRODUCT((MONTH('Sheet Name'!$P$3:P24)=MONTH($G$4))*(YEAR('Sheet Name'!$P$3:P24)=YEAR($G$4))*'Sheet Name'!$M$3:M24)`因为乘法将真实陈述转换为数字。诀窍是确保当其他一切都评估时，你有`=sumproduct(numbers,numbers,numbers)`. 您的实例是一组`=sumproduct(numbers/text)`.

# facebook - Wordpress 问题：当我将 url 粘贴到 Facebook 页面时，会出现额外的 html 标签

> ID：15214513
> 
> 赞同：0
> 
> 时间：2013-03-05T01:57:21.213
> 
> 标签：facebook, wordpress, facebook-graph-api, tags

当我将朋友的 wordpress 网站 url 粘贴到 facebook 评论中时，我看到以下额外文本（我已更改匿名 url） wordpress 博客的主页标题为“主页”

出于某种原因，facebook 在 ie 中添加了额外的行，它说*“您可以使用这些 HTML 标记和 ...”*，或者 wordpress 生成的 html 在 facebook 评论浏览器中被错误地解析/引用。

我的 wordpress 经验为零，但确实很好地理解 CMS 概念。我的朋友将非常感谢有关如何解决此问题的任何帮助。如果确实需要解决问题，我可以透露该网址。我决定先尝试使用匿名网址发布问题，以防万一这是一个已知的、之前遇到的问题。

想知道 facebook graph-api 是否与此有关？（FB graph-api 也不是我的强项，因为我更喜欢 iOS 开发）

```
Home 
http://mywordpressfoo.net/
You may use these HTML tags and attributes: 
<​a href="" title=""> <​abbr title=""> <​acronym title=""> 
<​b> <​blockquote cite=""> <​cite> <​code> <​del datetime=""> 
<​em> <​i> <​q cite=""> <​strike> <​strong> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T08:33:49.760

听起来您朋友的博客没有[OpenGraph](http://ogp.me/)标签。Facebook 使用这些来确定 URL 在其网站上发布时的显示方式（例如，YouTube URL 显示嵌入的视频、Flickr URL 照片等）。

[您可以在其 OpenGraph 文档](https://developers.facebook.com/docs/concepts/opengraph/objects/)中找到有关 Facebook 支持的元标记的更多信息。您的朋友可能会想要发布个人帖子“[文章](https://developers.facebook.com/docs/technical-guides/opengraph/built-in-objects/#article)”，而主页应该是“[博客](https://developers.facebook.com/docs/technical-guides/opengraph/built-in-objects/#blog)”或“[网站](https://developers.facebook.com/docs/technical-guides/opengraph/built-in-objects/#website)”。

根据您朋友编辑 WordPress 模板的能力，他们可能会发现集成[Facebook 的官方 WordPress 插件](http://wordpress.org/extend/plugins/facebook/)（包括对 OpenGraph 标签的支持）更容易。

# android - 如何判断在自定义列表适配器中按下了哪个小部件？

> ID：15214514
> 
> 赞同：0
> 
> 时间：2013-03-05T01:57:24.933
> 
> 标签：android, list, widget

我有一个自定义列表适配器，它在每个列表项的 xml 中都有一个 ToggleButton，所以这是列表中两个项目的示例：

![在此处输入图像描述](../Images/8197b9bafb4e084078b9889a10e42d93.png)

我使用了一个链接，因为我没有足够的声誉来发布图片。不相关的部分被模糊了。对于每个列表项的布局，ToggleButton 的 id 为“toggleButton1”，但这是一个问题，因为在我创建的名为“onTogglePress()”的 onClick 函数中，当我`ToggleButton activetoggle = (ToggleButton)this.findViewById(R.id.toggleButton1);`用来获取有关切换的信息时，它总是引用第一个按钮，例如是否为 isChecked()。如何单独定位每个列表项，这样我可以使用切换按钮更改与其所在的实际列表项相关的信息？

编辑：这是我的自定义列表适配器中的 getView() 类：

```
@Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View row = convertView; //this is listview_item_row

        if(row == null)
        {
            LayoutInflater inflater = ((Activity)context).getLayoutInflater();
            row = inflater.inflate(layoutResourceId, parent, false);

            holder = new ListHolder();
            holder.txtTitle = (TextView)row.findViewById(R.id.txtTitle);
            holder.txtTime = (TextView)row.findViewById(R.id.txtTime);
            holder.txtDays = (TextView)row.findViewById(R.id.txtDays);
            holder.txtVibrate = (TextView)row.findViewById(R.id.txtVibrate);
            holder.activButton = (ToggleButton)row.findViewById(R.id.toggleButton1);

            row.setTag(holder);
        }
        else
        {
            holder = (ListHolder)row.getTag();
        }

        ListObject currentobj = storagelist.returnSchedule(position);
        holder.txtTitle.setText(currentobj.returnName());
        holder.txtTime.setText(currentobj.timestostring());
        holder.txtDays.setText(currentobj.daystostring());
        holder.txtVibrate.setText(currentobj.vibratetostring());
        holder.activButton.setChecked(currentobj.isActive());

        Typeface customfont = Typeface.createFromAsset(context.getAssets(), "fonts/Roboto-Light.ttf");
        holder.txtTitle.setTypeface(customfont);
        holder.txtTime.setTypeface(customfont);
        holder.txtDays.setTypeface(customfont);
        holder.txtVibrate.setTypeface(customfont);

        if(currentobj.returnVibrate())
            holder.txtVibrate.setTextColor(Color.parseColor("#35b4e3"));    //green
        else
            holder.txtVibrate.setTextColor(Color.parseColor("#8C8C8C"));        //red

        return row;
    } 
```

# php - 如何使用更新资源控制器 laravel 4？

> ID：15214515
> 
> 赞同：5
> 
> 时间：2013-03-05T01:57:28.960
> 
> 标签：php, laravel, routes, laravel-4, controllers

我有带有索引、编辑、更新方法的客户控制器

```
Route::resource('customer', 'CustomerController'); 
```

控制器方法更新

```
public function update($id) { echo $id; } 
```

我的 HTML 表单

```
<form action="/customer/1" method="post">
<input type="text" name="email" value="" />
<input type="submit" value="" />
</form> 
```

我在这里有一个文档 [http://four.laravel.com/docs/controllers#resource-controllers](http://four.laravel.com/docs/controllers#resource-controllers) PUT/PATCH /resource/{id} update

它似乎不适合我，如何使用它？谢谢你

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-05T02:05:47.197

要使用或HTML 方法`PATH`，您需要使用 . 添加隐藏输入。比如下面...`PUT``DELETE``_method`

```
<input type="hidden" name="_method" value="PUT" /> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-24T17:28:12.227

您可以使用[表单生成器](https://github.com/illuminate/html/blob/master/FormBuilder.php)。使用刀片的示例：

```
{{ Form::open(array('method' => 'DELETE')) }} 
```

这会自动为你添加这个

```
<input name="_method" type="hidden" value="DELETE"> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-05T10:21:45.607

这在 Laravel 4 中对我有用：

```
{{ Form::open(array('url' => URL::to('customer/1'), 'method' => 'PUT')) }} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-12T10:41:11.030

我正在使用 Laravel 资源控制器。为了更新页面，我之后从插入页面复制了它

只是我添加了一个额外的字段来更新视图，例如

```
 {{ method_field('put') }} 
```

只需将其用作更新

```
 <form method="post" action="{{ URL::to('customer',$customer['id'])}}">
            {{ csrf_field() }}
            {{ method_field('put') }} 
```

# c# - XAMPP中两个表之间的关系以及在c#中向每个表中插入数据

> ID：15214527
> 
> 赞同：-1
> 
> 时间：2013-03-05T01:58:49.293
> 
> 标签：c#

我有一个问题，我似乎无法弄清楚。我正在创建一个添加客户信息的应用程序，然后将其与正在提供的服务相关联。我在 xampp 数据库中创建了两个表之间的关系。这些表是 tclientinfo 和 tserviceinfo。tclientinfo 表中的列是 Client_ID(PK)、First_Name、Last_Name、Phone 和 Email。在 tserviceinfo 中，Service_Order、Date、Tech、Brand、Model、OS、Type、PC_Issue、Service、Service_Price、Total_Price、Service_Notes、Client_ID。Client_ID 是我使用的关系，但我无法将信息添加到 tserviceinfo 表。我收到 SQL 异常：无法添加或更新子行：外键约束失败（'dbocomputerinformation'.'tserviceinfo',CONSTRAINT 'tserviceinfo_ibfk_3'

我将信息插入 tclientinfo 的添加按钮是：

private void btnAdd_Click(object sender, EventArgs e) { MySqlConnection conn = new MySqlConnection("server=localhost;uid=root;password=Passwordwhatever;database=dbocomputerinformation;"); conn.Open();

```
 string email = tbEmail.Text;
        string date = tbDate.Text;

        //try statement for validation before sending to database. 
        try
        {
            if (tbFirstName.Text.Length == 0)
            {
                MessageBox.Show("Please enter in customer's first name.");
                this.tbFirstName.Focus();
                return;
            }
            if (tbLastName.Text.Length == 0)
            {
                MessageBox.Show("Please enter in customer's last name.");
                this.tbLastName.Focus();
                return;
            }
            if (tbPhone.Text.Length < 10)
            {
                MessageBox.Show("Phone number must be ten digits.");
                this.tbPhone.Focus();
                return;
            }
            if (tbPhone.Text.Length == 0)
            {
                MessageBox.Show("Please enter in customer's phone number.");
                this.tbPhone.Focus();
                return;
            }
            if (tbPhone.Text != string.Empty && !Regex.IsMatch(tbPhone.Text, @"^[0-9]+$"))
            {
                MessageBox.Show("Please enter in numbers only.");
                this.tbPhone.Focus();
                return;
            }
            if (tbEmail.Text.Length == 0)
            {
                MessageBox.Show("Please enter in customer's email.");
                this.tbEmail.Focus();
                return;
            }
            if (email.IndexOf('@') == -1 || email.IndexOf('.') == -1)
            {
                MessageBox.Show("Please enter a valid email address.");
                this.tbEmail.Focus();
                return;
            }

        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }

        try
        {
            MySqlCommand command = new MySqlCommand("Insert into tclientinfo (First_Name, Last_Name, Phone, Email) values (?First_Name, ?Last_Name, ?Phone, ?Email)", conn);
            command.Parameters.AddWithValue("?First_Name", tbFirstName.Text);
            command.Parameters.AddWithValue("?Last_Name", tbLastName.Text);
            command.Parameters.AddWithValue("?Phone", tbPhone.Text);
            command.Parameters.AddWithValue("?Email", tbEmail.Text);

            command.ExecuteNonQuery();
            conn.Close();
            MessageBox.Show("Client Added Successfully.");

        }
        catch (MySqlException ex)
        {
            MessageBox.Show("Can't connect to database\n" + ex.ToString());
        }
    } 
```

然后我插入 tserviceinfo 是：

private void btnCreate_Click(object sender, EventArgs e) { //string connString = "server=localhost;uid=root;password=Passwordwhatever;database=dbocomputerinfo;"; MySqlConnection conn = new MySqlConnection("server=localhost;uid=root;password=Passwordwhatever;database=dbocomputerinfo;"); conn.Open();

```
 string date = tbDate.Text;

        //try statement for validation before sending to database. 
        try
        {
            if (tbDate.Text.Length == 0)
            {
                MessageBox.Show("Please enter in date of service.");
                this.tbDate.Focus();
                return;
            }
            if (date.IndexOf('-') == -2) 
            {
                MessageBox.Show("Please enter correct date. mm-dd-yy.");
                this.tbDate.Focus();
                return;
            }
            if (tbTech.Text.Length == 0)
            {
                MessageBox.Show("Please enter in service technician.");
                this.tbTech.Focus();
                return;
            }
            if (tbBrand.Text.Length == 0)
            {
                MessageBox.Show("Please enter in customer's brand of computer.");
                this.tbBrand.Focus();
                return;
            }
            if (tbModel.Text.Length == 0)
            {
                MessageBox.Show("Please enter in computer model.");
                this.tbModel.Focus();
                return;
            }
            if (tbOS.Text.Length == 0)
            {
                MessageBox.Show("Please enter in computer's operating system.");
                this.tbOS.Focus();
                return;
            }
            if (rbDesktop.Checked == false && rbNotebook.Checked == false)
            {
                MessageBox.Show("Please select device type.");
                this.rbDesktop.Focus();
                return;
            }
            if (lvOrdered.Items.Count == 0)
            {
                MessageBox.Show("Please select a service.");
                this.lvServices.Focus();
                return;
            }
            if (tbIssue.Text.Length == 0)
            {
                MessageBox.Show("Please describe the issue with the computer.");
                this.tbIssue.Focus();
                return;
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }

        try
        {
            MySqlCommand command = new MySqlCommand("Insert into tserviceinfo (Date, Tech, Brand, Model, OS, Type, PC_Issue, Service, Service_Price, Total_Price) values (?Date, ?Tech, ?Brand, ?Model, ?OS, ?Type, ?PC_Issue, ?Service, ?Service_Price, ?Total_Price)", conn);
            command.Parameters.AddWithValue("?Date", tbDate.Text);
            command.Parameters.AddWithValue("?Tech", tbTech.Text);
            command.Parameters.AddWithValue("?Brand", tbBrand.Text);
            command.Parameters.AddWithValue("?Model", tbModel.Text);
            command.Parameters.AddWithValue("?OS", tbOS.Text);
            command.Parameters.AddWithValue("?PC_Issue", tbIssue.Text);

            /**
             * Was having issues inserting a single service, it would dublicate itself in the db, this was the solution
             * this adds just a single service with nothing else, and it reads back properly as well. 
            **/
            if (lvOrdered.Items.Count == 1)
            {
                string singleService = string.Join(" ", services);
                command.Parameters.AddWithValue("?Service", singleService);
            }
            else
            {
                /**
                * Combine all the services into one string seperated by commas
                * and add that to the database
                * */
                string serviceList = string.Join(", ", services);
                command.Parameters.AddWithValue("?Service", serviceList);

            }
            /**
             * Combine all the prices into one string seperated by commas
             * and add that to the database
             * */
            string servicePriceList = string.Join(", ", servicePrice);
            command.Parameters.AddWithValue("?Service_Price", servicePriceList);
            command.Parameters.AddWithValue("?Total_Price", lblPrice.Text);

            //clears lists so dublicates don't happen when creating more work orders than just 1.
            services.Clear();
            servicePrice.Clear();

            if (rbDesktop.Checked)
            {
                command.Parameters.AddWithValue("?Type", "Desktop");
            }
            else if (rbNotebook.Checked)
            {
                command.Parameters.AddWithValue("?Type", "Notebook");
            }

            command.ExecuteNonQuery();
            conn.Close();

            tbFirstName.Clear();
            tbLastName.Clear();
            tbDate.Clear();
            tbEmail.Clear();
            tbBrand.Clear();
            tbIssue.Clear();
            tbTech.Clear();
            tbModel.Clear();
            tbPhone.Clear();
            tbOS.Clear();
            lvOrdered.Items.Clear();
            lblPrice.Text = "$0.00";

        }
        catch (MySqlException ex)
        {
            MessageBox.Show("Can't connect to database\n" + ex.ToString());
        }
    } 
```

所以不用说，我不知道从这里做什么。任何帮助都会很棒或任何想法。如果您需要更多信息，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T22:55:23.910

想通了，对不起，笨蛋。但我需要选择 Client_ID 并将其存储为变量。然后将其插入到第二个表中。

所以如果其他人有这个问题，就像这样。

intMaxClientId;

MySqlCommand command = new MySqlCommand("Select max(Client_ID) from tclientinfo", conn); maxClientId = Convert.ToInt32(command.ExecuteScalar());

command.Parameters.AddWithValue("?Client_ID", maxClientId);

# python - Celerybeat 偶尔会丢失任务

> ID：15214533
> 
> 赞同：2
> 
> 时间：2013-03-05T01:59:58.783
> 
> 标签：python, rabbitmq, celery, django-celery

我们有一个 Celery (+Celerybeat) 设置，带有一个运行计划和非计划任务的 RabbitMQ 后端。我注意到我偶尔会错过/放弃计划任务的发生。一切都继续正常工作，任务继续在下一个预定的到期时间运行，但看起来一些运行正在消失。应该每 10 分钟运行一次的任务的日志示例：

```
[2013-03-04 02:28:41,630: INFO/MainProcess] Task my.task.name[8e442788-9501-4043-9708-0acc43b1e5c0] succeeded in 2.83057904243s: None
[2013-03-04 02:38:41,611: INFO/MainProcess] Task my.task.name[97b2daf0-100c-4e63-8a03-833fccd7c7fe] succeeded in 2.7966811657s: None
[2013-03-04 02:48:41,398: INFO/MainProcess] Task my.task.name[d58e0270-3b9d-448e-a95a-5f6865a85c00] succeeded in 2.61804389954s: None
[2013-03-04 02:59:04,136: INFO/MainProcess] Task my.task.name[925d63e8-6669-4ffb-8ff1-a79dac28689e] succeeded in 2.69637179375s: None
[2013-03-04 03:19:04,066: INFO/MainProcess] Task my.task.name[cb903ba2-f9cc-475b-8275-9af400e11443] succeeded in 2.59652400017s: None
[2013-03-04 03:29:06,002: INFO/MainProcess] Task my.task.name[b9bc019b-a44e-430f-9cdb-d1b919d9cf08] succeeded in 0.994740962982s: None
[2013-03-04 03:48:41,414: INFO/MainProcess] Task my.task.name[8ec75918-0127-411c-b1fa-a338129259e7] succeeded in 2.6219689846s: None
[2013-03-04 03:58:40,936: INFO/MainProcess] Task my.task.name[bbcdeaf3-0b83-440e-b9c8-08ed67b17e27] succeeded in 2.1441078186s: None
[2013-03-04 04:08:41,323: INFO/MainProcess] Task my.task.name[f42ce313-a200-4bdd-9b47-c37f4a7da003] succeeded in 2.53811717033s: None
[2013-03-04 04:29:04,103: INFO/MainProcess] Task my.task.name[526427fd-a609-4abd-ab42-cae0b0f267b6] succeeded in 2.59499788284s: None 
```

您可以看到缺少 3:08 运行，以及 3:38 和 4:08。

我的问题是：我该如何*解决*这个问题？我认为没有人可以根据这些数据为我提供解决方案，但也许有人可以提出一种方法来确定可能导致这种情况的原因。

有关我们设置的更多信息可能会有所帮助：

*   我们正在运行 Django 1.2.7、Celery 2.4.6 和 django-celery 2.4.2。
*   我们正在运行 RabbitMQ 3.0.2-1。
*   我们有两台服务器运行 Celeryd（针对同一个 RabbitMQ 服务器）。两者都在运行 celeryd_multi 因为我们有两个单独的队列。当然，只有一个运行 celerybeat。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-30T16:44:51.450

你试过用 -l DEBUG 运行 celerybeat 吗？

它将显示队列正在接收的任务以及许多其他信息，这些信息可能会提供有关为什么未执行任务的线索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-05T05:20:24.677

回答这个问题还为时不晚，让我们回到答案，我们也面临这个问题，在浪费了几个小时后，我们发现使用更少的工人会导致这个问题。我们**增加了工人**，问题得到了解决。

# java - MediaRecorder - setOrientationHint() 异常/失败

> ID：15214534
> 
> 赞同：4
> 
> 时间：2013-03-05T01:59:59.337
> 
> 标签：java, android, video, mediarecorder

几周以来，我一直在尝试通过`MediaRecorder`打开和关闭视频旋转来解决这个问题。我无法让线路`setOrientationHint(90)`在运行的物理三星 Galaxy S1 上工作`Android 2.3.3`( `SDK 10`)。这应该在上面的任何东西上运行良好`SDK 9`。

当我打电话时，`setOrientationHint(90)`我得到一个例外：`setParameters(video-param-rotation-angle-degrees=90) failed`。详细错误详情如下。

结果，我不得不检查 SDK，并且只有`setOrientationHint()`在 SDK>10 时才调用。即，此代码在我测试过的所有其他高于 10 的 SDK 版本上都可以正常工作。我已经在运行三星 Galaxy Nexus 上进行了测试`4.2.2`并且工作正常。

这是我的代码：（减少以显示调用顺序`MediaRecorder`）

```
mCamera = getCameraInstance();

mCamera.setPreviewDisplay(holder);

mMediaRecorder = new MediaRecorder();
mMediaRecorder.setOrientationHint(90);

// Step 1: Unlock and set camera to MediaRecorder
mCamera.unlock();
mMediaRecorder.setCamera(mCamera);

// Step 2: Set sources
mMediaRecorder.setAudioSource(MediaRecorder.AudioSource.CAMCORDER);
mMediaRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);

// Step 3: recording setup
mMediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
mMediaRecorder.setVideoSize(720,480);
mMediaRecorder.setVideoFrameRate(15);
mMediaRecorder.setVideoEncoder(MediaRecorder.VideoEncoder.H264);
mMediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AAC);

// Step 4: Set output file
currentOutputFileName = DIRECTORY_PATH + "zzzz"+ iCount +".mp4";
mFile = new File(currentOutputFileName);
mMediaRecorder.setOutputFile(mFile.getAbsolutePath());

// Step 4.1: Set recording length
mMediaRecorder.setMaxDuration(10000);

// Step 5: Set the preview output
mMediaRecorder.setPreviewDisplay(cameraView.getHolder().getSurface());

// Step 6: Prepare configured MediaRecorder
mMediaRecorder.prepare(); 
```

有人遇到过这个问题吗？我找不到其他人正在经历这种情况，我不敢相信就是这样。它可能只是运行 2.3.3 问题的澳大利亚三星 Galaxy S1 吗？

我看到有人提到有人在这条线运行时遇到问题，但实际视频没有旋转，但我实际上收到了一个异常 - 这条线根本没有运行。我已经检查并重新检查了命令顺序，看起来很好。我认为最重要的是`setOrientationHint()`命令发生在之前`mediaRecorder.prepare()`

这是错误：

```
AuthorDriver::setParameter() unrecognized key "video-param-rotation-angle-degrees"
setParameter(video-param-rotation-angle-degrees = 90) failed with result -5
Ln 1047 handleSetParameters("video-param-rotation-angle-degrees=90") error
Command (12) failed
setParameters(video-param-rotation-angle-degrees=90) failed: -2147483648
Shutting down VM
threadid=1: thread exiting with uncaught exception (group=0x40015578)
 FATAL EXCEPTION: main
 java.lang.RuntimeException: setParameter failed.
    at android.media.MediaRecorder.setParameter(Native Method)
    at android.media.MediaRecorder.setOrientationHint(MediaRecorder.java:341)
    at com.on3x.emergency.Recorder.prepareVideoRecorder(Recorder.java:196)
    at com.on3x.emergency.Recorder.startRecording(Recorder.java:90)
    at com.on3x.emergency.GUI.RecordActivity$1.onClick(RecordActivity.java:86)
    at android.view.View.performClick(View.java:2538)
    at android.view.View$PerformClick.run(View.java:9152)
    at android.os.Handler.handleCallback(Handler.java:587)
    at android.os.Handler.dispatchMessage(Handler.java:92)
    at android.os.Looper.loop(Looper.java:123)
    at android.app.ActivityThread.main(ActivityThread.java:3687)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:507)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
    at dalvik.system.NativeStart.main(Native Method)
Force finishing activity com.on3x.emergency/.GUI.RecordActivity
Dumpstate > /data/log/dumpstate_app_error 
```

如果有人可以提供任何帮助，将不胜感激。现在我不得不告诉我们的客户，我现在无法解决这个问题，视频必须横着放。

还有其他旋转视频的方法吗？基本上我的应用程序记录视频并将它们上传到服务器。目前这款 2.3.3 手机无法旋转视频，所以它横向上传

干杯

**编辑：** 这是我现在拥有的代码。正如 Ashish Gupta 所建议的，AuthorDriver 在运行 2.3.3 的三星 Galaxy S1（澳大利亚型号）上不包含适当的参数

```
if (android.os.Build.VERSION.SDK_INT>=9) {

    // attempt to rotate the video 90 degrees. 
    try {
        mMediaRecorder.setOrientationHint(90);
        Utils.logLine("orientation rotated 90", this, Utils.LOG_TYPE_DEBUG);
    } catch (Exception e) {
        Utils.logLine("error trying setOrientationHint"+ e.getMessage(), this, Utils.LOG_TYPE_ERROR, e);
        e.printStackTrace();
    }           
} else {
    Utils.logLine("orientation set skipped ", this, Utils.LOG_TYPE_DEBUG);
} 
```

注意：Utils.logLine 只是一个实用程序函数，用于打印调试和错误语句以记录日志。希望这可以帮助别人......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T04:58:48.600

查看您附加的日志，似乎三星 Galaxy S1 运行`Android 2.3.3`不支持`setOrientationHint`. 这是来自 AuthorDriver.cpp 的代码

```
PVMFStatus AuthorDriver::setParameter(
    const String8& key, const String8& value) {
if (key == "max-duration") {
    int64_t max_duration_ms;
    if (safe_strtoi64(value.string(), &max_duration_ms)) {
        return setMaxDurationOrFileSize(
                max_duration_ms, true /* limit_is_duration */);
    }
} else if (key == "max-filesize") {
    int64_t max_filesize_bytes;
    if (safe_strtoi64(value.string(), &max_filesize_bytes)) {
        return setMaxDurationOrFileSize(
                max_filesize_bytes, false /* limit is filesize */);
    }
} else if (key == "audio-param-sampling-rate") {
    int64_t sampling_rate;
    if (safe_strtoi64(value.string(), &sampling_rate)) {
        return setParamAudioSamplingRate(sampling_rate);
    }
} else if (key == "audio-param-number-of-channels") {
    int64_t number_of_channels;
    if (safe_strtoi64(value.string(), &number_of_channels)) {
        return setParamAudioNumberOfChannels(number_of_channels);
    }
} else if (key == "audio-param-encoding-bitrate") {
    int64_t audio_bitrate;
    if (safe_strtoi64(value.string(), &audio_bitrate)) {
        return setParamAudioEncodingBitrate(audio_bitrate);
    }
} else if (key == "video-param-encoding-bitrate") {
    int64_t video_bitrate;
    if (safe_strtoi64(value.string(), &video_bitrate)) {
        return setParamVideoEncodingBitrate(video_bitrate);
    }
}

// Return error if the key wasnt found
LOGE("AuthorDriver::setParameter() unrecognized key \"%s\"", key.string());
return PVMFErrArgument;
} 
```

`video-param-rotation-angle-degrees`三星 Galaxy S1 aith Android 2.3.3 不支持该密钥

您可以比较 Nexus 4.2.2 和 S1 2.3.3 之间的日志，看看是否有任何明显的差异。

# php - PHP Imagick PDF 预览不正确 - 给出 adobe reader 消息

> ID：15214536
> 
> 赞同：0
> 
> 时间：2013-03-05T02:00:23.637
> 
> 标签：php, imagick

我在 php 中使用 Imagick 在网页中生成 pdf 的预览。生成没有问题，但是对于某些 pdf，图像生成显示消息“要查看 pdf 的完整内容，您需要最新版本的 pdf 查看器”。我该如何解决这个问题？

这是代码

```
if (file_exists($file))
        {
            $im = new imagick($file);
            $im->setimageformat('jpeg');
            header( "Content-Type: image/jpeg" );
            echo $im;
            exit;
        } 
```

# android - Android Ice Cream Sandwhich 与 Gingerbread HTTP Post

> ID：15214537
> 
> 赞同：0
> 
> 时间：2013-03-05T02:00:27.660
> 
> 标签：android, android-asynctask, http-post

对 Android 来说相当新，并使用 Android 2.3.5 (Gingerbread) 创建/测试了我的应用程序。我有多个数据库连接，我使用了 HTTP Post（但没有使用 AsyncTask），一切都很好。然后我在 Android 4.0.3 (Ice Cream Sandwhich) 上对其进行了测试，但我无法连接到数据库，因此我的应用程序无法运行。

想知道我需要考虑什么才能让这个工作应用程序在 Ice Cream Sandwhich 上运行？我确实将数据库连接移出 UI 线程（但不是 AsyncTask），但它仍然没有连接。

这是我在 UI 线程之外创建的课程：

公共类 InputsRecapGetTask {

```
public InputsRecapGetTask(InputsRecap activity,
        ProgressDialog progressDialog) {
    this.activity = activity;
    this.progressDialog = progressDialog;

    getDatabase();

}

public void getDatabase() {
    // TODO Auto-generated method stub
    progressDialog.show();

    // create new default httpClient
            HttpClient httpclient = new DefaultHttpClient();
            // create new http post with url to php file as pararmenter
            HttpPost httppost = new HttpPost(
                    "http://test.com/returnBBD.php");

            // assign input text to strings
            user = Login.userStatic; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T05:47:48.013

你检查过日志吗？IIRC，Android 4 要求 http 请求不是从主线程完成的。必须有消息告诉这一点。

另一方面，请记住

1.  如果您转动屏幕，创建 AsyncTask 的 Activity 可能会（永远）从屏幕上移除并被另一个 Activity 替换；它（第一个活动）将收到结果，但不会显示任何内容；

2.  在 Android 4 中，默认情况下，所有 AsyncTask 都由单个线程提供服务；这保证响应按请求发出的顺序到达，但也意味着第二个请求将仅在第一个请求完成（或超时）后开始。

根据 MVC，数据检索必须由模型完成，而不是由生命周期为 View 的控制器（Activity）完成。

# three.js - 三.js 改变整个分支的不透明度

> ID：15214543
> 
> 赞同：4
> 
> 时间：2013-03-05T02:01:12.173
> 
> 标签：three.js, webgl

有没有办法改变所有层次结构（分支）的不透明度/alpha，而不是每个网格材料？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-05T02:56:21.763

不可以。但是，您可以使用它`object.traverse()`来设置对象材质及其子对象的不透明度。

```
mesh.traverse( function( node ) {
    if( node.material ) {
        node.material.opacity = 0.5;
        node.material.transparent = true;
    }
}); 
```

三.js r.56

# c++ - break 不终止 do-while 循环

> ID：15214544
> 
> 赞同：2
> 
> 时间：2013-03-05T02:01:26.887
> 
> 标签：c++, do-while

所以这将是一个愚蠢的问题，但我现在无法解决这个问题......下面的这个 do-while 循环不会按应有的方式终止。

```
 do {
            if(inp.eof())
                    throw("Unexpected end of file");

            getline(inp, l);
            line++;

            std::stringstream com(l);

            com >> command;

            if(command == ">>") {
                    std::cout << "Why?" << std::endl;
                    break;
            }
    } while(command != ">>"); 
```

从这个循环中，如果命令变成“>>”，它应该以两种方式之一结束，对吧？不幸的是，我的代码只是输出“为什么？” 在 if 内部，完全忽略了 break 语句，并继续循环，直到最终我到达 inp.eof()，它会抛出一个错误。这应该是基本的，但不知何故，我不知道它在做什么。

编辑：更新：当我将其更改为 while(true) 并保留 break 语句时，它可以完美运行。将其更改回 do-while 并失败。不知道为什么，但该死的东西有效，这就是我现在所关心的。

# android - 屏幕底部是android中的菜单栏/工具栏

> ID：15214545
> 
> 赞同：4
> 
> 时间：2013-03-05T02:01:27.047
> 
> 标签：android, android-menu, android-tabs

![在此处输入图像描述](../Images/3d98951b781f68640ab6c1db70f82aa9.png)

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T02:06:16.217

使用带有 alignParentBottom="true" 的 LinearLayout

像这样的东西：

```
<RelativeLayout
android:id="@+id/mainLyt"
android:layout_width="fill_parent"
android:layout_height="fill_parent">
<!-- Some layout things -->

<ScrollView
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:layout_above="@+id/bottomBar">

<!-- some scrolling content -->
</ScrollView>

<LinearLayout
android:id="@+id/bottomBar"
android:layout_height="wrap_content"
android:layout_width="fill_parent"
android:orientation="horizontal"
android:layout_alignParentBottom="true">

<!-- Some Buttons -->
</LinearLayout>

</RelativeLayout> 
```

我没有尝试编译，您可能需要修复一些拼写错误，但这是一个基本想法，您可以通过它实现您想要做的事情。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-03-12T09:34:02.193

在 onCreat 之后使用以下行。

```
 super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.home_screen); 
```

# knockout.js - 使用淘汰赛剑道组合框选择的选项

> ID：15214546
> 
> 赞同：0
> 
> 时间：2013-03-05T02:01:34.930
> 
> 标签：knockout.js, kendo-ui

我正在[使用淘汰赛 MVVM 创建剑道组合框](http://rniemeyer.github.com/knockout-kendo/web/ComboBox.html)。我期望的是选择选定的对象作为[这个例子](http://knockoutjs.com/)（chosenTicket 包含对象，而不是属性）。这是我的代码（使用 asp.net razor）。C#代码：

```
@{
    var accountExample = new List<BankAccountSetupViewModel>()
    {
        new BankAccountSetupViewModel { ID = 1, Bank = "ANZ Panin Bank", AccountName = "Primary", AccountNumber = "1234-567-890" },
        new BankAccountSetupViewModel { ID = 2, Bank = "ABN Amro Group", AccountName = "Backup", AccountNumber = "2345-678-901" },
        new BankAccountSetupViewModel { ID = 3, Bank = "Bank BRI", AccountName = "Cadangan", AccountNumber = "3456-789-012" },
        new BankAccountSetupViewModel { ID = 4, Bank = "Bank Central Asia Jakarta", AccountName = "Primary", AccountNumber = "4567-890-123" },
        new BankAccountSetupViewModel { ID = 5, Bank = "BNI", AccountName = "Backup", AccountNumber = "5678-901-234" }
    };
} 
```

HTML 代码：

```
<fieldset id="form-container" data-bind="with: formEditorSettlement">
    <legend>Edit Detail</legend>
    @Html.LabelFor(model => model.Amount)
    <span style="margin-bottom: 20px;">
        @Html.TextBoxFor(model => model.Currency.Code, new { @readonly = true, data_bind = "value: currency", @style = "width: 50px;" })
        @Html.TextBoxFor(model => model.Amount, new { data_bind = "value: amount" })
    </span>
    <div class="cols-2">
        <label class="cols-full">Bank Account</label><br />
        <label>Bank</label>
        <span>@(Html.Kendo().ComboBox().Name("BankAccount").Suggest(true).Filter(FilterType.Contains).DataTextField("Name").DataValueField("ID").BindTo(accountExample).HtmlAttributes(new { @class = "no-input", style = "width: 300px;", data_bind = "kendoComboBox: { data: $root.accounts, value: $root.chosenBankAccount, dataTextField: 'Bank', dataValueField: 'ID' }" }))</span>
        <label>Account No.</label>
        <span>@Html.TextBoxFor(model => model.BankAccount, new { @readonly = true, data_bind = "value: $root.chosenBankAccount.AccountName" })</span>
        <label>Account Name</label>
        <span>@Html.TextBox("BankAccountName", null, new { @readonly = true, data_bind = "value: bankAccountName" })</span>
    </div>
</fieldset> 
```

Javascript代码：

```
(function ($, ko, undefined) {
    var viewModel = namespace('ViewModels.Activities');
    viewModel.SettlementSplitObservable = new (function (defaultSettlementSplit, defaultAccounts) {
        var root = this;
        //add isChecked to all item
        ko.utils.arrayForEach(defaultSettlementSplit, function (item) {
            item.isChecked = ko.observable(false);
        });
        root.verifiedItems = ko.observableArray(defaultSettlementSplit);
        root.lastAction = ko.observable('add');
        root.maxAmount = ko.observable(@(Model.Splitted[0].Amount));
        root.accounts = ko.mapping.fromJS(defaultAccounts);
        root.chosenBankAccount = ko.observable();
        root.formEditorSettlement = new (function () {
            var self = this;
            self.currency = ko.observable('@Model.Currency.Code');
            self.amount = ko.observable(0);
            self.bankNameBank = ko.observable('');
            self.bankAccountNo = ko.observable('');
            self.bankAccountName = ko.observable('');
            self.isEditMode = ko.observable(false);
        }.bind(this));
    })(@Html.Raw(Json.Encode(Model.Splitted)),
       @Html.Raw(Json.Encode(accountExample)));
})(jQuery, ko) 
```

我所期待的是，当用户在 ComboBox“BankAccount”中选择项目时，选择的BankAccount 应该包含来自“BankAccountSetupViewModel”的对象（从 C# 代码生成，使用敲除映射插件映射）。任何方法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T14:46:52.390

Kendo 组合框不支持选择整个对象。您可以指定 a`dataValueField`将值设置为对象的唯一键 (id)。然后，您可以创建一个`ko.computed`来表示所选对象。喜欢：

```
this.choices = ko.observableArray([
    { id: "1", name: "apple"},
    { id: "2", name: "orange"},
    { id: "3", name: "banana"}
]);

this.selectedId = ko.observable();
this.selectedChoice = ko.computed(function() {
    var id = this.selectedId();
    if (id) {
        return ko.utils.arrayFirst(this.choices(), function(choice) {
           return choice.id === id; 
        });
    }  
}, this); 
```

示例：http: [//jsfiddle.net/rniemeyer/zbEQC/](http://jsfiddle.net/rniemeyer/zbEQC/)

# c++ - 当 QListView 选择因键盘活动而改变时发出信号？

> ID：15214550
> 
> 赞同：19
> 
> 时间：2013-03-05T02:02:22.557
> 
> 标签：c++, qt, qt5, qlistview

我有一个使用 QT Designer 创建的 QDialog，如下所示：![对话](../Images/9e184fc34674a45ec19e2e07fef2c41a.png)

左边的服务器列表是一个带有 QStringListModel 的 QListView。通过将视图的激活（QModelIndex）信号连接到对话框中的槽函数，鼠标单击列表视图中的项目更新表单，并使用所选项目的信息。

但是，在键盘上按向上或向下也会更改所选项目，但不会发出任何信号，因此不会更新表单以匹配所选项目。如何解决这个问题？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-05T02:49:48.130

信号实际上指的`activated(QModelIndex)`不仅仅是选择的行为。这个概念相当模糊，但它更像是一种明确的选择行为。如果您只是在寻找有关当前选择已更改的通知，您可以获取选择模型并连接到其更新。

```
MyView::MyView() {
   QListView* view = new QListView(this);
   connect(view->selectionModel(), 
      SIGNAL(selectionChanged(QItemSelection,QItemSelection)), 
      this, SLOT(handleSelectionChanged(QItemSelection)));
}

...

MyView::handleSelectionChanged(const QItemSelection& selection){
   if(selection.indexes().isEmpty()) {
      clearMyView();
   } else {
      displayModelIndexInMyView(selection.indexes().first());
   }
} 
```

在上面的代码中，`displayModelIndexInMyView(QModelIndex)`应该替换为您当前的处理程序插槽`activated(QModelIndex)`，并`clearMyView()`替换为当没有选择任何内容时您想要执行的任何操作。

有很多方法可以做到这一点，老实说，我不确定什么是规范的，但我认为这对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-09T08:47:52.117

另一种方式是实现`QListView::currentChanged(...)`虚函数。

# python - reStructuredText 书目字段正确使用

> ID：15214557
> 
> 赞同：2
> 
> 时间：2013-03-05T02:03:03.590
> 
> 标签：python, python-sphinx, restructuredtext, bibliography

[将reStructuredText 书目字段](http://docutils.sourceforge.net/docs/ref/rst/restructuredtext.html#bibliographic-fields)用于 python 文件的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:03:25.003

The most prominent example of how to use such fields is in the Python PEPs, e.g. [PEP-0414](http://hg.python.org/peps/file/tip/pep-0414.txt):

```
PEP: 414
Title: Explicit Unicode Literal for Python 3.3
Version: $Revision$
Last-Modified: $Date$
Author: Armin Ronacher <armin.ronacher@active-4.com>,
        Nick Coghlan <ncoghlan@gmail.com>
Status: Final
Type: Standards Track
Content-Type: text/x-rst
Created: 15-Feb-2012
Post-History: 28-Feb-2012, 04-Mar-2012
Resolution: http://mail.python.org/pipermail/python-dev/2012-February/116995.html 
```

While this is a longish list of fields, it shows how they are used.

As explained in the reST documentation,

> This bibliographic data corresponds to the front matter of a book, such as the title page and copyright page.

so there should be only one set of such fields per document, namely at the beginning. Don't forget that reST was developed as a lightweight markup for Python documentation.

# c# - 如何在c#中按日期范围从数据库中搜索记录

> ID：15214563
> 
> 赞同：0
> 
> 时间：2013-03-05T02:03:19.977
> 
> 标签：c#

我在数据库中有一个名为 date 的列，我的数据库 datecolumn 包含这样的 2013-02-22，但是在前端 iam 使用 2 个 ajaxdate 选择器并搜索记录我正在编写这样的查询，我想知道它是否是正确与否。

```
SELECT * from table where Date between '" + txtfromdate.Text +"' and '"+txttodate +"'"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T02:45:27.460

您的查询是正确的（假设您传递了格式正确的日期值），但除了一次编程练习外，其他任何事情都不能接受。

请使用参数化 SQL 查询以避免 SQL 注入。起点是[SqlCommand.Parameters](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.parameters.aspx)。

这是您需要使用参数的近似代码：

```
SqlCommand command = new SqlCommand(
  "SELECT * FROM table WHERE Date BETWEEN @date1 AND @date2", connection);
command.Parameters.AddWithValue("@date1", DateTime.Parse(txtfromdate.Text));
command.Parameters.AddWithValue("@date1", DateTime.Parse(txttodate));
SqlDataReader reader = command.ExecuteReader(); 
```

# php - 在保留 SEO 的同时将 HTML 转换为 PHP

> ID：15214569
> 
> 赞同：-3
> 
> 时间：2013-03-05T02:03:47.443
> 
> 标签：php, html, seo

我创建了我的网页，它随着时间的推移而增长。当我最初制作页面时，我没有为我的页眉和页脚创建 PHP 函数，因为我不想花时间修复它，所以我就离开了。

我终于到了想要添加完美运行的 PHP 包含函数的地步，但似乎我必须将所有页面从 .html 更改为 .php。

随着时间的推移，这会对我所做的所有 SEO 工作产生什么影响？有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T02:04:41.280

搜索引擎看不到服务器端代码。他们只看到它生成的 HTML。所以使用包含不会影响 SEO。

在您的情况下，您的 URL 已更改，因此您需要[从旧 URL 执行 301 重定向到新 URL，](https://stackoverflow.com/questions/4610973/redirect-htm-to-php)或者[使您的站点运行带有 .html 扩展名的 PHP 页面](https://stackoverflow.com/questions/11312316/how-do-i-add-php-code-to-html-files/11312349#11312349)。

# python - 据说是简单的 Python 作业

> ID：15214572
> 
> 赞同：0
> 
> 时间：2013-03-05T02:04:00.267
> 
> 标签：python, root

我有一个 CompSci 问题（可选），别担心，你没有做我的功课 :) 我很难理解这个问题，因为这就是我要做的全部。这是关于对python的相当基本的理解。

我必须创建一个满足这个要求的函数。我不知道为什么问题中有 6 或它意味着什么。

“返回一对整数 'root' 和 'pwr' st 0 < pwr < 6 和 root**pwr = 用户输入。如果没有成对的整数满足这些条件，函数将通知用户。”

就像我说的，它是可选的，所以我希望得到解释，而不是仅仅得到答案。谢谢你们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T02:10:41.017

您正在寻找一个值，给定一个特定的根，以及 0 到 6 之间的幂，这相当于用户的输入。一个例子是 4 == 2**2 的输入，因此您可能会输出`(2, 2)`.

似乎没有任何界限`root`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T02:12:25.797

我是这样读的：

1.  创建一个接受数字作为参数的函数（我假设一个整数，但不清楚）

2.  找到该数字的第 n 个根，其中 n 是 1、2、3、4 或 5 之一。返回 n 和根。

3.  如果找不到合适的根，则显示错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T02:27:09.443

为了让你开始：

```
0 < pwr < 6 
```

… 相当于：

```
(0 < pwr) and (pwr < 6) 
```

这种`0 < pwr < 6`表示法在数学和一些编程语言（包括 Python）中非常常见。有关详细信息，请参阅Wikipedia 上的[链式表示法](http://en.wikipedia.org/wiki/Inequality_%28mathematics%29#Chained_notation)。

因此，对于每个这样的幂，尝试找到一个`root`这样的，`root**pwr`即用户的输入值。

使用 有一种快速的方法[`math.log`](http://docs.python.org/3/library/math.html#math.log)，但如果您不知道对数是什么，请不要担心。相反，您可以尝试所有可能的`root`. 如果 any`root`太大，那么所有更大`root`的 s 也会太大。

除了一个问题：如果`user_input`是负数怎么办？因此，您需要找到一种方法来计算所有正数*和负数*，直到找到*绝对值*太大的一个。

所以，一个简短的伪代码草图：

```
def find_root_pwr(user_input):
    for every pwr such that 0 < pwr < 6:
        for every possible root:
            test_value = root**pwr
            if it's a match:
                return root, pwr
            elif abs(test_value) is too big:
                break # don't need to check larger roots
    else:
        # We tried all 5 powers, and no match
        raise ValueError('No answer for {}'.format(user_input)) 
```

并对其进行测试：

```
user_input = int(input()) # raw_input if you're on Python 2.x
root, pwr = find_root_pwr(user_input)
print('{} ** {} = {}'.format(root, pwr, user_input)) 
```

有关如何编写循环的提示，请参见[`range`](http://docs.python.org/3/library/functions.html#func-range)和。[`itertools.count`](http://docs.python.org/3/library/itertools.html#itertools.count)您应该能够从这里填写详细信息，或者至少可以进行更具体的后续问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T03:39:02.007

其他答案提供了问题描述的解释。这是正输入的可能解决方案：

```
def find_root_power(n, minpower, maxpower):
    for pwr in range(minpower, maxpower + 1):  # minpower <= pwr <= maxpower
        # find root such that root**pwr == n
        f = n ** (1\. / pwr)  # float
        root = int(f + 0.5)  # int (per problem statement)
        if root**pwr == n:
           yield root, pwr # multiple solutions are possible

n = int(raw_input("Input a number:"))
for root, pwr in find_root_power(n, minpower=1, maxpower=5):
    print("root: %d pwr: %d" % (root, pwr)) 
```

例如，[如果用户输入是`81`; 输出是](http://ideone.com/queIPl)：

```
root: 81 pwr: 1
root: 9 pwr: 2
root: 3 pwr: 4 
```

注意：`root=n`,如果是整数，`pwr=1`则始终是解。`n`如果用户输入不是整数，则代码会引发`ValueError`（鉴于问题描述；`root**pwr`可能只是整数，因此不存在非整数输入的解决方案）。

注意：如果`root ** pwr == n`then 也`(-root) ** pwr == n`为 even `pwr`。您可以添加：

```
 if root**pwr == n:
      yield root, pwr # multiple solutions are possible
      if pwr % 2 == 0: # even
          yield -root, pwr 
```

包括负根作为解决方案。

# jquery - Jquery自定义警报框

> ID：15214574
> 
> 赞同：2
> 
> 时间：2013-03-05T02:04:04.347
> 
> 标签：jquery, html, css

好的，这就是问题所在。我有两种类型的警报框，一种用于成功，另一种用于错误。目前我有基于zend的应用程序，每当用户填写个人资料更新，新提交等表格时，这些警报框就会出现。现在我需要知道的是，如何为每个警报框自定义类的名称，以便如果发生错误，Jquery 会添加一个类到警报框并显示该框吗？以下是我的 2 个警报框

成功：

```
 <div id="alert-container">
        <div class="info-alert alert-box-success">
            <p class="info-alert-text">
              // message will be custom added by jquery
            </p>
            <div class="bottom"></div>
        </div>
    </div> 
```

错误：

```
<div id="alert-container">
 <div class="info-alert alert-box-error">
  <p class="info-alert-text">
    // message will be custom added by jquery
  </p>
 <div class="bottom"></div>
</div>
</div> 
```

这就是我目前使用 Jquery 处理用户提交的方式：

```
$("#send2friends_submit").on("click", function(){

              $('.share-event').attr('disabled',true);
              $('.share-event').addClass('ybtn-disabled');
                var f_mail = $.trim($('textarea#emails').val());
                var f_msg = $.trim($('textarea#emails-note').val());
                var f_eid = $('#eid').val();
                if(f_mail == '' || !validateEmail(f_mail)){
                $('.info-alert').show();
                $('#send2friends_submit').attr('disabled',false);
                $('#send2friends_submit').removeClass('ybtn-disabled');

                return ;
              }
              if(f_msg == ''){
                $('.info-alert').show();
                $('#send2friends_submit').attr('disabled',false);
                $('#send2friends_submit').removeClass('ybtn-disabled');

                return ;
              }
}); 
```

问题是，如何为每个页面添加 1 个通用警报框，以便在遇到错误时`alert-box-error`显示，如果成功则`alert-box-success`显示自定义消息？目前，如果我将`info-alert`显示为块，则会显示错误消息。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T02:09:46.137

在向`.info-alert`您展示添加内容和正确的类之前，它看起来像这样：

```
$('.info-alert')
.removeClass('alert-box-error')
.addClass('alert-box-success')
.find('p')
.text('This is a success message') 
```

显然反之亦然。

基本上你要做的是首先删除你不需要的类，然后将你正在寻找的类添加到容器中。您查找包含的内容`<p>`并相应地编辑其消息文本。

[**这是给你的工作演示**](http://jsbin.com/urakem/2)

**您只使用一个通用`alert`元素**就获得了成功和错误消息。

# java - Hadoop 服务器运行向导未在 Eclipse 中打开

> ID：15214575
> 
> 赞同：0
> 
> 时间：2013-03-05T02:04:09.700
> 
> 标签：java, eclipse, hadoop, eclipse-plugin, cygwin

我已经配置了 Hadoop 安装目录位置（C:\cygwin\home\hadoop-0.19.1），但是每当我在 Hadoop 上运行 .java 文件时，它不会显示 Hadoop 服务器运行向导并且它没有运行。请帮助我要摆脱这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T15:34:55.840

我使用了以前无法使用的 Eclipse Indego 3.7 版本，因此我将 Eclipse 版本降级为 3.3。当我用谷歌搜索时，我知道 Eclipse 最新版本中的 Hadoop 插件发生了一些变化，这些变化是在 3.3 之后发布的

# three.js - How do I rotate some moons around a planet with THREE.js?

> ID：15214582
> 
> 赞同：32
> 
> 时间：2013-03-05T02:05:08.643
> 
> 标签：three.js

I think this picture best explains my issue:

![hooray for optical illusions](../Images/129cf501b1e42b4fcb3d2b14da79da0e.png)

First I translate the box along the red line. Next, I want the effect of rotation to be the blue line in `a`, but what's actually happening is more like the blue line in `b`. It feels like changing the rotation is always relative to the original object space, but the translation (despite happening first) is always relative to the parent, and doesn't really affect the geometry points in relation to the object space. I apologize if that's confusing; clearly I'm new at this.

The important part of the code which produces this effect is below. Please keep in mind that the orientation of the image is different than this code produces; the image is merely an example to show the effect clearly.

```
var objectContainer = new THREE.Object3D();

var tubeRadius = 100;
var tubeGeometry = new THREE.CylinderGeometry(tubeRadius, tubeRadius, tubeRadius * 3, 36, 1, false);
var tube = new THREE.Mesh(tubeGeomtry, material);
scene.add( tube );

var boxes = new THREE.Object3D();
var boxEdge = 50;
var boxGeometry = new THREE.CubeGeometry(boxEdge, boxEdge, boxEdge);
var box1 = new THREE.Mesh( boxGeometry, material );
box1.translateX(tubeRadius + boxEdge / 2 + 5);
box1.translateY(boxEdge / 2);
box1.rotation = new THREE.Vector3(0, 2*Math.PI/3*0, 0);
boxes.add(box1);
var box2 = box1.clone();
box2.rotation = new THREE.Vector3(0, 2*Math.PI/3*1, 0);
boxes.add(box2);
var box3 = box1.clone();
box3.rotation = new THREE.Vector3(0, 2*Math.PI/3*2, 0);
boxes.add(box3);
scene.add( boxes ); 
```

The only solution I can think of is to wrap each box in another object space and rotate about that, but it seems like excessive work. What is the preferred method to achieve the result I'm looking for?

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-05T04:41:29.887

There are several ways of doing what you want, but I think the easiest is like so:

```
// parent
parent = new THREE.Object3D();
scene.add( parent );

// pivots
var pivot1 = new THREE.Object3D();
var pivot2 = new THREE.Object3D();
var pivot3 = new THREE.Object3D();

pivot1.rotation.z = 0;
pivot2.rotation.z = 2 * Math.PI / 3;
pivot3.rotation.z = 4 * Math.PI / 3;

parent.add( pivot1 );
parent.add( pivot2 );
parent.add( pivot3 );

// mesh
var mesh1 = new THREE.Mesh( geometry, material );
var mesh2 = new THREE.Mesh( geometry, material );
var mesh3 = new THREE.Mesh( geometry, material );

mesh1.position.y = 5;
mesh2.position.y = 5;
mesh3.position.y = 5;

pivot1.add( mesh1 );
pivot2.add( mesh2 );
pivot3.add( mesh3 ); 
```

Then in your render loop:

```
parent.rotation.z += 0.01; 
```

EDIT: updated fiddle: [https://jsfiddle.net/edqf7ugc/](https://jsfiddle.net/edqf7ugc/)

three.js r.116

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-05T02:19:13.290

Creating a compound object whose centre will be the point about which the inner objects rotate is one obvious answer, and would be very quick to write. Just create an `Object3D` and add your box to it.

A similar approach is covered by [this question](https://stackoverflow.com/questions/12746011/three-js-how-do-i-rotate-a-cylinder-around-a-specific-point). It shifts the point of the vertices for an object, so it effectively has a new centre.

Alternatively, you can mess around with the matrices by hand. Try this:

```
var boxGeometry = new THREE.CubeGeometry(boxEdge, boxEdge, boxEdge);
var mr = new THREE.Matrix4();
var mt = new THREE.Matrix4();
mt.setPosition(new THREE.Vector3(0,tubeRadius,0));
var box1 = new THREE.Mesh( boxGeometry, material );
box1.applyMatrix(mt);
var box2 = box1.clone();
mr.makeRotationZ(2 * Math.PI /3);
box2.applyMatrix(mr);
boxes.add(box2);
var box3 = box1.clone();
mr.makeRotationZ(4 * Math.PI /3);
box3.applyMatrix(mr);
boxes.add(box3);
boxes.add(box1);
scene.add( boxes ); 
```

# routing - 在 Meteor 中动态创建路由

> ID：15214585
> 
> 赞同：1
> 
> 时间：2013-03-05T02:05:31.763
> 
> 标签：routing, meteor, meteorite

我正在使用[流星路由器](https://github.com/tmeasday/meteor-router)包在我的应用程序中设置路线。但是，我需要能够“动态地”设置一些路线。这意味着我有一些“静态”路由和一些“动态”路由，它们会根据某些变量（特别是 URL 的一部分）而变化。
例如，如果用户访问 www.example.com/foo 我的路由应该在所有 URL 前加上前缀`foo`，如果用户访问 www.example.com/bar，所有路由都应该有`bar`前缀。

伪代码：

```
Meteor.subscribe('bar', function(){
  var prefix = window.location.pathname.replace(/^\/([^\/]*).*$/, '$1');

  // "dynamic" routes, generated after 'subscribe' is ready
  Meteor.Router.add({
    prefix+'/': function() {
      // some code
      return 'mainTemplate';
    },
    prefix+'/welcome': 'welcome',
    prefix+'/foo': 'foo',
    prefix+'/bar': 'bar'
  });
)};

// "static" routes, independent of current URL
Meteor.Router.add({
  '/': 'home',
  '/admin': 'admin'
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T07:11:34.890

您上面的设置应该可以工作，只需将每条路由更改为具有`/`前缀

```
Routes = {}

Routes['/' + prefix + '/welcome'] = function() { return 'welcome' };
Routes['/' + prefix +' /foo'] = 'foo';
...

Meteor.Router.add(Routes); 
```

# php - php表格，让学生在输入正确的ID号后检查他/她的分数

> ID：15214588
> 
> 赞同：0
> 
> 时间：2013-03-05T02:05:48.697
> 
> 标签：php, html, forms, csv, webpage

我现在正在为此工作一整天，但没有成功。我只是一个初学者。我有一个我正在教的课程的网页，我想写一个表格，让学生在输入学生编号后检查他们的分数。我写了以下表格：

```
 <strong>Mid- term Grades:</strong>
    <p>
        &nbsp;</p>
        <form action="Mark.php" method="post">
        Enter your 7-digit Student Number: <input name="SNumber" size="7"      type="text" /> <input type="submit" value="View Mark" /> <input type="reset" />&nbsp;</form> 
```

我把这个表格放在我用 html 编写的网页中。现在，我想检查输入的学号是否在我的班级，如果是，则显示标记，如果否，则表示您不在此部分：

```
<?php

$SNumber = mysql_real_escape_string($_POST['SNumber']);
$sql = "SELECT * FROM table WHERE name = '$SNumber'";
$res = mysql_query($query, $connection);
if (mysql_num_rows($res) <= 0 ) $error = "You are not registered in this section.";
else{mysql_query(echo "$Mark")

?> 
```

## 我的问题：

1.  如果我将验证命令放在课程页面的最顶部（正如我在互联网上阅读的那样），我的页面将消失并变成空白页面。问题是什么？我该如何解决这个问题？

2.  我不知道如何存储我的信息（学号和相应的分数）是这样的：

    ```
    SNumber=1234567 Mark= 122 | Snumber=1234577 Mark=3 | SNumber=1034567 Mark= 122 
    ```

    在哪里存储我的数据 如何存储我的数据 如何验证输入 如何查找和打印标记

3.  如果我在我的课程页面中包含带有 post 方法的第一个表单，我应该很好吗？在我的课程页面顶部添加验证命令（在我的情况下它会杀死我的页面）并将信息以我上面提到的格式存储在一个名为 Mark.php 的 php 文件中？没有什么对我有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T02:22:33.430

你似乎走在了正确的方向。您的 HTML 看起来没问题。在你的方法中有两件主要的事情你没有看到（或者至少你没有在这里提到它们）。

1）服务器和客户端代码的区别。HTML 文件可以在您的开发机器上本地运行，无需 Web 服务器。您的 HTML 文件指定`Mark.php`为将发布到的页面。这个 php 页面必须托管在某种网络服务器上，因为它是一个服务器端页面。在您的开发机器上，您可以安装 xampp，其中包括最好的 Web 服务器，Apache，在一个易于配置的 Windows 图形用户界面中。您必须确保 Apache 模块在 Xampp GUI 中启动，并将您的文件放在`...pathToXampp/htdocs/containingFolder`. 现在，当您将内容发布到您的 php 页面时，它将能够响应。您必须在浏览器中导航到`localhost/containingFolder/nameOfHtmlFile.html`.

2）您的 php.ini 中有 SQL 数据库代码。这意味着您需要一个数据库。你很幸运！MySQL 包含在 Xampp 中。同样，您必须确保该模块已启动，然后使用 Google 搜索`CREATE DATABASE`并`CREATE TABLE`查看有关如何设置数据库的示例。

一旦你启动了你的服务器和数据库应用程序，你基本上会在你的开发机器上运行一个 web 服务器，这是你以后可以上传到生产服务器的代码的沙箱。

# tomcat - 为什么 Upstart 的 Foreman 导出运行 3 个 unix 进程？

> ID：15214595
> 
> 赞同：0
> 
> 时间：2013-03-05T02:06:26.460
> 
> 标签：tomcat, foreman

我正在运行`foreman export upstart`生成 3 个 conf 文件。

即使我以并发值 1 导出，我也可以看到三个 unix 进程正在启动：

```
$ sudo start tomcat
tomcat start/running

$ initctl list | grep tomcat
tomcat start/running
tomcat-web-1 start/running, process 3966
tomcat-web start/running

$ ps -ax | grep tomcat
 3966 ?        Ss     0:00 su - someUser -c cd /opt/tomcat; export PORT=xxx; export PORT=xxx;  export PATH=xxx;  export JAVA_OPTS=xxx;  export MAVEN_OPTS=xxx; ./webapp-runner.sh >> /var/log/tomcat/web-1.log 2>&1
 3977 ?        S      0:00 -su -c cd /opt/tomcat; ... ./webapp-runner.sh >> /var/log/tomcat/web-1.log 2>&1
 3978 ?        S      0:00 -su -c cd /opt/tomcat; ... ./webapp-runner.sh >> /var/log/tomcat/web-1.log 2>&1 
```

为什么会这样？这是否意味着在所有 3 个进程都被杀死之前不会释放标准应用程序（tomcat）端口（如 8080）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T02:53:52.243

正如我在对您的[其他问题](https://stackoverflow.com/questions/15205314/upstart-script-for-tomcat-respawn-on-ubuntu/15214975#15214975)的回复中提到的那样，您正在查看不代表您的 Tomcat Java 网络服务器的错误进程集。您只需更改为 grep java 而不是 grep tomcat，您会看到只有一个进程在运行。

# objective-c - Objective-C ARC 和 Legacy Runtime 编译错误

> ID：15214601
> 
> 赞同：7
> 
> 时间：2013-03-05T02:07:07.790
> 
> 标签：objective-c, xcode, compilation, compiler-errors, clang

我正在尝试使用 Xcode 4.6 为 32 位架构编译源代码，但出现此错误：

```
error: -fobjc-arc is not supported on platforms using the legacy runtime
Command /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang failed with exit code 1 
```

怎么了？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-05T02:10:00.843

您将 ARC（自动引用计数）与不支持 ARC 的旧 Objective-C 1.0 运行时混合。

OSX 上的 32 位应用程序自动使用 1.0 运行时，因此您必须为您的项目禁用 ARC，并使用手动引用计数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-10T16:24:25.613

这个问题最近再次出现，因为 Xcode 5 删除了 ARCHS 参数——如果你允许的话。但是，如果您有一个带有 Xcode 4 的构建服务器，则默认为构建 32 位和 64 位，如果您启用了 ARC，则会失败。

有关更详细的说明，请参阅我的[文章。](http://www.cocoanetics.com/2013/10/fobj-arc-is-not-supported-on-platforms-using-the-legacy-runtime/)

# opengl - 该访问采样器的常量

> ID：15214604
> 
> 赞同：2
> 
> 时间：2013-03-05T02:07:49.297
> 
> 标签：opengl, glsl

我有以下 GLSL 代码：

```
for( int i=0; i<3; ++i ) {
    finalColor += texture2D(myTextures[i],uv);
} 
```

我的 opengl 驱动程序给了我以下输出：“错误：在 GLSL 1.30 及更高版本中禁止使用非常量表达式索引的采样器数组”

我可以手动展开循环，但我想知道是否有办法重写`for`以使 GLSL 编译器明白我`i`可以在编译时解决。

观察：我在linux机器上使用intel驱动

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T03:09:20.777

编译器可以展开循环并`i`在编译时解析这一事实并*没有*改变`i`不是整数常量表达式的事实。因此，在 GLSL 1.20 中不允许将其用作索引。

所以不，除了手动展开循环之外，您无能为力。

此外，在 GLSL 4.00+ 中取消了此限制；在那里，您可以使用[动态统一的表达式（您的循环计数器是）](http://www.opengl.org/wiki/Dynamically_Uniform_Expression)。

# php - 选择 chekcbox 后显示数据库中的数据

> ID：15214606
> 
> 赞同：0
> 
> 时间：2013-03-05T02:08:02.460
> 
> 标签：php, mysql

我想要一个表单，允许用户通过选中复选框来选择要从表中显示的数据。如果用户只想显示 2 列，则应该只显示 2 列。我有我的代码，但提交后，它什么也没显示。这是我的代码：

```
<form name="form1" method="post" action="view_emp.php">
<p>Select Option 
<input type="checkbox" name="number[]" value="name" />Name
<input type="checkbox" name="number[]" value="hired"  />Date Hired 
<input type="checkbox" name="number[]" value="basic" />Basic Pay
<input type="checkbox" name="number[]" value="incentives">Incentives
</p> 
<input type="submit" name="Submit" value="Submit"> 
</form> 
```

这是我的php：

```
<?php 
$db = mysql_connect('localhost', 'root', '');
mysql_select_db('eis', $db) or die (mysql_error());

$employee = array();

foreach ($_POST['number'] as $employee) {
    $number = mysql_real_escape_string($number);
    $employee[] = "'{$number}'";
}
$sql = "select * from employees where type in (" .implode(", ", $number). ")";
$result = mysql_query($sql); 
while ($row = mysql_fetch_array($result)) { 
 print $row['name']; 
} 
?> 
```

我是 php 的初学者，我需要大师和专家的帮助。谢谢你...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T02:50:41.023

PHP 的 implode() 和 explode() 函数可能会派上用场。您可以使用 implode($_POST['number']) 轻松地将 POST 或 GET 属性“number”转换为逗号分隔的列表。这很容易存储在一个 MySQL 字段中，也许是用户表中的一列。

如果您希望用户稍后编辑表单，请使用循环呈现复选框，并为每个复选框元素添加“已选中”属性，其名称存在于从数据库检索到的“爆炸”列表（数组）中。

这基本上是序列化/反序列化。还有其他方法可以做到这一点，包括 serialize()、unserialize() 或 json_encode()、json_decode()。但是由于您的数据似乎很容易建模为基本列表，因此您可以使其更简单。

# java - Java Servlet：从远程设备检索数据并使用 FTP 连接将数据“推送”到客户端

> ID：15214607
> 
> 赞同：1
> 
> 时间：2013-03-05T02:08:05.127
> 
> 标签：java, servlets, ftp

我相信建立一个小型的自制程序来让自己更舒服现在很普遍。就在几天前，我真的厌倦了一次又一次地通过 FTP 连接从不同的远程设备获取同名的日志文件，因此我开始构建一个 Java Web 应用程序。

Java Web 应用程序的目的很简单，只要用户在远程设备中填写源文件的绝对路径并选择他或她要连接的相应远程设备，Web 应用程序最终会将这些相同名称的日志文件存储在用户的具有组织良好的文件夹结构的本地计算机。您可以简单地理解，这个 Java servlet 是位于客户端和远程设备之间的代理。

目前，我已经使用Apache common net FTPClient库在Java servlet中完成并测试了从远程设备到服务器的下载功能。它运行良好，并以组织良好的文件夹结构为我提供了同名日志文件的副本。

然而，当我继续前进时，我意识到“推动”功能可能是杀手。以下是我想与大家讨论的几个问题：

1.  即使我可以从客户端的请求中获取 IP 地址或主机名，是否可以或适合我自动建立从 servlet 到客户端的 FTP 连接？

2.  如果可以实现自动 FTP 连接，我应该注意哪些安全问题？

3.  如果无法实现自动 FTP 连接，是否可以或适合我在响应客户端时返回这些文件？

感谢您的意见或建议。希望大家也喜欢这里的公开讨论。

# apache - htaccess mod_rewrite 重写规则

> ID：15214608
> 
> 赞同：0
> 
> 时间：2013-03-05T02:08:31.790
> 
> 标签：apache, .htaccess

我正在尝试设置一个 .htaccess 文件来转换传入链接，例如：

[http://domain.com/root/TopNav/SubNav/SEO-friendly-file-name-p#](http://domain.com/root/TopNav/SubNav/SEO-friendly-file-name-p#)

进入这个：

[http://domain.com/root/index.php?t=TopNav&s=SubNav&l=SEO-friendly-file-name&p=#](http://domain.com/root/index.php?t=TopNav&s=SubNav&l=SEO-friendly-file-name&p=#)

其中 p# 是页面 ID，TopNav/SubNav 表示文件的导航菜单路径

我已经能够让它在所有情况下工作，除了 .php 之后有参数（它会重写 mod，但会丢失参数）。最初，我希望让 .htaccess 解析 url 字符串，以便脚本可以使用它，但此时我会对任何采用传入 url 并将其作为字符串转储到 root/ 的解决方案感到满意索引.php。

这是我目前在 .htaccess 中的内容：

```
<IfModule mod_rewrite.c>
RewriteEngine on
RewriteRule ^(.*)/(.*)\.php     index.php?s=$1&p=$2 [L]
RewriteRule ^(.*)/          index.php?p=$1&s=$1 [L]
</IfModule>
ErrorDocument 404 /404.php 
```

关于我可能做错了什么的任何想法？有更好的方法来完成这项工作的建议？

谢谢

** 有人建议将 [L] 更改为 [L,QSA]，这似乎奏效了。谢谢，谁建议...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T03:03:05.040

使用如下所示的 URU：`/TopNav/SubNav/SEO-friendly-file-name-p#`您需要 4 个分组：

1.  顶部导航
2.  子导航
3.  SEO 友好的文件名
4.  #

因此，您需要制作您的正则表达式，以便一次捕获这 4 件事。

尝试：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]+)/([^/]+)/(.+?)-p([0-9]+)$ index.php?t=$1&s=$2&l=$3&p=$4 [L,QSA] 
```

这将进入您`/root`目录中的 htaccess 文件

# sql - 如何将使用动态 SQL 的存储过程转换为非动态 SQL (SSRS)？

> ID：15214614
> 
> 赞同：3
> 
> 时间：2013-03-05T02:08:51.437
> 
> 标签：sql, sql-server, reporting-services, ssrs-2008

我一直在处理 SSRS 报告，对于我的一个存储过程，它使用动态 SQL，因此我收到此错误：

```
An item with the same key has already been added. 
```

所以我用谷歌搜索了这个错误，但对我来说仍然很模糊..

我的存储过程接受了一些切换类型的参数，如下所示：

```
@CompleteType INT = NULL,
/*
 * 0 - Routed
 * 1 - Targeted
 * 2 - Offerwall
 */

@SourceType BIT = NULL,
/*
 * Works if @AccountID is not null
 * (should only be used if @AccountID has a single value)
 *
 * 0 - Owned by @AccountID
 * 1 - External (not owned by @AccountID)
 */

@SurveyStatus INT = NULL,
/*
 * NULL - All Surveys
 * 0 - Completes Approved Surveys
 * 1 - Invoiced Surveys
 */

@IsSupplierUser BIT = 0
/*
 * used to decide whether to display FEDSurveyName or SupplierSurveyName 
```

问题出现在这两个代码块中（它们不连续）：

```
-- Initial Survey Name
    IF @IsSupplierUser = 0
        SET @SQL += CHAR(13) + CHAR(9) + N' ,ts.FEDSurveyName as ''Initial Survey Name'''

    ELSE
        SET @SQL += CHAR(13) + CHAR(9) + N' ,ts.SupplierSurveyName as ''Initial Survey Name''' 
```

然后这个：

```
-- Complete Survey Name
IF @IsSupplierUser = 0
    SET @SQL += CHAR(13) + CHAR(9) + N' ,cs.FEDSurveyName as ''Complete Survey Name'''
ELSE
    SET @SQL += CHAR(13) + CHAR(9) + N' ,cs.SupplierSurveyName as ''Complete Survey Name''' 
```

我们有 a `ts.FEDSurveyName`和 a `cs.FEDSurveyName`，并且`SupplierSurveyName` 分别相同。我很感激任何提示！谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T02:25:57.800

```
DECLARE
@IsSupplierUser BIT = 0,
@SQL NVARCHAR(MAX) ='init'
-- Initial Survey Name
SELECT @SQL += CASE @IsSupplierUser
    WHEN 0 THEN CHAR(13) + CHAR(9) + N' ,ts.FEDSurveyName'
    ELSE CHAR(13) + CHAR(9) + N' ,ts.SupplierSurveyName'
END + N' as ''Initial Survey Name'''
SELECT @SQL 
```

[http://www.sqlfiddle.com/#!3/d41d8/10397](http://www.sqlfiddle.com/#!3/d41d8/10397)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T02:20:07.683

我假设这些片段用于生成您的选择列表。要将其转换为非动态 SQL：

```
SELECT
  CASE 
    When @IsSupplierUser = 0 Then ts.FEDSurveyName 
    Else ts.SupplierSurveyName 
  END as 'Initial Survey Name',
  ts.SomeOtherColumn,
  etc.
  ...
FROM ... 
```

当然是“等等”。只是表示您继续使用其他列，您可以为您显示的其他条件列设置另一个 case 语句。

# javascript - 使用 jQuery 跟踪输入修改？

> ID：15214623
> 
> 赞同：0
> 
> 时间：2013-03-05T02:09:53.480
> 
> 标签：javascript, jquery, debugging, dom

我有一个输入，它的值在某处被某个 jQuery 剥离，但我不知道它是什么，所以我希望我可以跟踪 dom 对象，并获取修改该对象的任何内容的日志。

我希望得到一个像这样的日志：

```
$('#selector').val('123') called in funcName file.js line 246 
```

有没有像这样存在的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T02:21:03.100

我不愿发布此内容，但您是否考虑过删除 DOM 元素，然后首先检查是否有任何脚本无法访问它？不像您正在寻找的那么直接，但可能会产生相同的结果。

或者，您可以尝试覆盖 jQuery 的 .val() 函数...

我可以想到检查事件但不检查值/访问的事情——这是一个好问题。

# twitter-bootstrap - Trigger.io：您如何使用一个代码库将内容缩放/适应到多个平板电脑上？

> ID：15214628
> 
> 赞同：1
> 
> 时间：2013-03-05T02:10:11.567
> 
> 标签：twitter-bootstrap, tablet, trigger.io

我正在使用 trigger.io 构建平板电脑应用程序。现在我只在不同页面上使用 JS 脚本，而不是使用 Backbone 之类的东西来管理应用程序逻辑。我还在前端使用引导程序。

我正在 Nexus 7 上开发/测试。但是，我必须确保应用程序布局适用于这两个以及“新”iPad（iPad 3）。这两款设备的纵横比略有不同，屏幕分辨率完全不同。

页眉和页脚应该没问题，因为它们适用于绝对页面值。但是，如何缩放/适应它们之间的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T17:29:22.560

Bootstrap 是开始寻求帮助的好地方。

响应式设计技术（可以使 Bootstrap 在不同设备的移动网站中正常运行）也适用于 Trigger.io 应用程序。

作为起点，我推荐启用响应式设计功能的流体网格。请参阅响应式实用程序类以获得更细粒度的控制。

# opengl - 正确使用 OpenGL 方法 glTexImage2D()？

> ID：15214638
> 
> 赞同：1
> 
> 时间：2013-03-05T02:10:49.507
> 
> 标签：opengl, specifications

[OpenGL 方法 glTexImage2D()的规范](http://www.opengl.org/sdk/docs/man/xhtml/glTexImage2D.xml)给出了一个接受`internalFormat`参数的大表。我想知道，如果我设置这个参数真的很重要，因为文档说

> 如果应用程序想要以某种分辨率或某种格式存储纹理，它可以使用 internalFormat 请求分辨率和格式。GL 将选择一个与 internalFormat 要求的内部表示非常接近的内部表示，但它可能不完全匹配。

这使得 OpenGL 似乎无论如何都会选择它想要的东西。我是否应该费心获取图像位深度并将其设置`internalFormat`为`GL_RGBA8`或`GL_RGBA16`？我见过的所有代码示例都只是使用`GL_RGBA`...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T03:18:51.323

> 这使得 OpenGL 似乎无论如何都会选择它想要的东西。

这是非常具有误导性的。

有许多格式需要实现[或多或少地完全按照所描述的那样支持](http://www.opengl.org/wiki/Image_Format#Required_formats)。确实允许实现将它们存储在更大的存储空间中。但是与它们相比，它们不允许失去精度。使用它们有很多好处（除了清楚地知道你得到了什么）。

首先，它允许您使用[专门的格式](http://www.opengl.org/wiki/Image_Format#Special_color_formats)，例如 GL_RGB10_A2，这在某些情况下很方便（为延迟渲染存储线性颜色值等）。其次，FBO*需要*支持图像格式的任意组合，但*前提*是所有这些图像格式都来自[纹理/渲染缓冲区所需的颜色格式列表（但不是仅纹理）。](http://www.opengl.org/wiki/Image_Format#Texture_and_Renderbuffer)如果您使用*任何*其他内部格式，FBO 可能会向`GL_FRAMEBUFFER_UNSUPPORTED`您扔东西。

第三，[不可变纹理存储功能](http://www.opengl.org/wiki/Texture_Storage#Immutable_storage) *需要*使用大小合适的内部格式。你应该在它们可用时使用它们。

通常，您应该始终使用调整大小的内部格式。没有理由使用通用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T02:57:08.480

使用通用的内部格式，OpenGL 会选择它“最喜欢”的任何东西，并告诉它你不在乎。使用明确的内部格式，您是在告诉 OpenGL，您实际上关心内部表示（很可能是因为您需要精度）。如果无法进行精确匹配，则可以自由升级或降级实现，但通常的后备是升级到可以满足请求要求的下一个更高的格式精度。

> 我是否应该费心获取图像位深度并设置 internalFormat

如果您绝对需要精度，那么可以。如果您更关心性能，那么不，作为 OpenGL 实现的通常默认设置，如果没有请求特定格式，则选择内部格式以获得最佳性能。

# python - 将 Sublime Text 2 与 Portable Python 一起使用

> ID：15214640
> 
> 赞同：4
> 
> 时间：2013-03-05T02:10:59.843
> 
> 标签：python, sublimetext2

我在闪存驱动器上安装了便携式 python 和便携式 sublime 文本。我编辑了 python-build 文件，以便它可以使用便携式 python 来运行程序，但它不会在 sublime 文本窗口中打印任何内容，它只是打开一个命令提示符窗口，如果程序停止或出现错误，它会立即关闭. 有没有办法让输出以崇高的文本弹出？理想情况下，我想让它在所有 Windows 计算机上都可用，这样我就可以保持我的工作流程可移植！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-27T14:31:51.583

我遇到了同样的问题，经过一些故障排除后，这是我的解决方案：

1）使用构建系统：

```
{
"cmd": ["\\Portable Python 2.7.6.1\\App\\python.exe", "-u", "$file"],
"file_regex": "^[ ]*File \"(...*?)\", line ([0-9]*)",
"selector": "source.python"} 
```

此构建将在 Python Portable 中打开您的程序。而不是指定您的闪存驱动器号，使用“\”将转到相对于当前驱动器根目录的路径。

2）在代码末尾添加以下行以防止强制关闭：

```
os.system("pause") 
```

另外，不要忘记导入“os”模块：

```
import os 
```

# android - Android 意图：带有菜单和子菜单的列表视图

> ID：15214642
> 
> 赞同：0
> 
> 时间：2013-03-05T02:11:16.243
> 
> 标签：android, listview, android-intent

嗨，大家好。当我单击特定项目时，我想显示一个子菜单。例如，单击会`Play Video`显示一个包含另外 2 个项目的子菜单：`Play It`和`Show playlist`。

这个子菜单是否可能看起来像“下拉菜单”或“对话框”？

这是我正在使用的代码：

```
package com.examples.youtubeapidemo;

import com.google.android.youtube.player.YouTubeIntents;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListView;
import android.widget.TextView;

import com.examples.youtubeapidemo.adapter.DemoArrayAdapter;
import com.examples.youtubeapidemo.adapter.DemoListViewItem;

import java.util.ArrayList;
import java.util.List;

/**
 * A sample activity which shows how to use the {@link YouTubeIntents} static
 * methods to create Intents that navigate the user to Activities within the
 * main YouTube application.
 */

public final class IntentsDemoActivity extends Activity implements
        OnItemClickListener {

    // This is the value of Intent.EXTRA_LOCAL_ONLY for API level 11 and above.
    private static final String EXTRA_LOCAL_ONLY = "android.intent.extra.LOCAL_ONLY";
    private static final String VIDEO_ID = "-Uwjt32NvVA";
    private static final String PLAYLIST_ID = "PLF3DFB800F05F551A";
    private static final String USER_ID = "Google";
    private static final int SELECT_VIDEO_REQUEST = 1000;

    private List<DemoListViewItem> intentItems;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.intents_demo);

        intentItems = new ArrayList<DemoListViewItem>();
        intentItems.add(new IntentItem("Play Video", IntentType.PLAY_VIDEO));
        intentItems.add(new IntentItem("Open Playlist",
                IntentType.OPEN_PLAYLIST));
        intentItems.add(new IntentItem("Play Playlist",
                IntentType.PLAY_PLAYLIST));
        intentItems.add(new IntentItem("Open User", IntentType.OPEN_USER));
        intentItems.add(new IntentItem("Open Search Results",
                IntentType.OPEN_SEARCH));
        intentItems
                .add(new IntentItem("Upload Video", IntentType.UPLOAD_VIDEO));

        ListView listView = (ListView) findViewById(R.id.intent_list);
        DemoArrayAdapter adapter = new DemoArrayAdapter(this,
                R.layout.list_item, intentItems);
        listView.setAdapter(adapter);
        listView.setOnItemClickListener(this);

        TextView youTubeVersionText = (TextView) findViewById(R.id.youtube_version_text);
        String version = YouTubeIntents.getInstalledYouTubeVersionName(this);
        if (version != null) {
            String text = String.format(
                    getString(R.string.youtube_currently_installed), version);
            youTubeVersionText.setText(text);
        } else {
            youTubeVersionText
                    .setText(getString(R.string.youtube_not_installed));
        }
    }

    public boolean isIntentTypeEnabled(IntentType type) {
        switch (type) {
        case PLAY_VIDEO:
            return YouTubeIntents.canResolvePlayVideoIntent(this);
        case OPEN_PLAYLIST:
            return YouTubeIntents.canResolveOpenPlaylistIntent(this);
        case PLAY_PLAYLIST:
            return YouTubeIntents.canResolvePlayPlaylistIntent(this);
        case OPEN_SEARCH:
            return YouTubeIntents.canResolveSearchIntent(this);
        case OPEN_USER:
            return YouTubeIntents.canResolveUserIntent(this);
        case UPLOAD_VIDEO:
            return YouTubeIntents.canResolveUploadIntent(this);
        }

        return false;
    }

    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position,
            long id) {
        IntentItem clickedIntentItem = (IntentItem) intentItems.get(position);

        Intent intent;
        switch (clickedIntentItem.type) {
        case PLAY_VIDEO:
            intent = YouTubeIntents.createPlayVideoIntentWithOptions(this,
                    VIDEO_ID, true, false);
            startActivity(intent);
            break;
        case OPEN_PLAYLIST:
            intent = YouTubeIntents.createOpenPlaylistIntent(this, PLAYLIST_ID);
            startActivity(intent);
            break;
        case PLAY_PLAYLIST:
            intent = YouTubeIntents.createPlayPlaylistIntent(this, PLAYLIST_ID);
            startActivity(intent);
            break;
        case OPEN_SEARCH:
            intent = YouTubeIntents.createSearchIntent(this, USER_ID);
            startActivity(intent);
            break;
        case OPEN_USER:
            intent = YouTubeIntents.createUserIntent(this, USER_ID);
            startActivity(intent);
            break;
        case UPLOAD_VIDEO:
            // This will load a picker view in the users' gallery.
            // The upload activity is started in the function onActivityResult.
            intent = new Intent(Intent.ACTION_PICK, null).setType("video/*");
            intent.putExtra(EXTRA_LOCAL_ONLY, true);
            startActivityForResult(intent, SELECT_VIDEO_REQUEST);
            break;
        }
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode,
            Intent returnedIntent) {
        if (resultCode == RESULT_OK) {
            switch (requestCode) {
            case SELECT_VIDEO_REQUEST:
                Intent intent = YouTubeIntents.createUploadIntent(this,
                        returnedIntent.getData());
                startActivity(intent);
                break;
            }
        }
        super.onActivityResult(requestCode, resultCode, returnedIntent);
    }

    private enum IntentType {
        PLAY_VIDEO, OPEN_PLAYLIST, PLAY_PLAYLIST, OPEN_USER, OPEN_SEARCH, UPLOAD_VIDEO;
    }

    private final class IntentItem implements DemoListViewItem {

        public final String title;
        public final IntentType type;

        public IntentItem(String title, IntentType type) {
            this.title = title;
            this.type = type;
        }

        @Override
        public String getTitle() {
            return title;
        }

        @Override
        public boolean isEnabled() {
            return isIntentTypeEnabled(type);
        }

        @Override
        public String getDisabledText() {
            return getString(R.string.intent_disabled);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T05:11:08.893

您可以尝试像以下代码一样实现它：

```
public void showPopup(View v) {
    final PopupMenu popup = new PopupMenu(this, v);
    final MenuInflater inflater = popup.getMenuInflater();
    inflater.inflate(R.menu.actions, popup.getMenu());

    popup.setOnMenuItemClickListener(new PopupMenu.OnMenuItemClickListener() {
        @Override
        public boolean onMenuItemClick(MenuItem item) {
            switch (item.getItemId()) {
                case R.id.play_video:
                    //intent = YouTubeIntents.createPlayVideoIntentWithOptions(this,
                    //        VIDEO_ID, true, false);
                    //startActivity(intent);
                    Toast.makeText(TestActivity.this, "play video", Toast.LENGTH_LONG).show();
                    return true;
                case R.id.show_playlist:
                    //intent = YouTubeIntents.createOpenPlaylistIntent(this, PLAYLIST_ID);
                    //startActivity(intent);
                    Toast.makeText(TestActivity.this, "show playlist", Toast.LENGTH_LONG).show();
                    return true;
                default:
                    return false;
            }
        }
    });
    popup.show();
} 
```

在 res/menu 文件夹中使用 actions.xml：

```
<?xml version="1.0" encoding="utf-8"?>

<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/play_video"
          android:title="Play Video"
          android:showAsAction="ifRoom"/>
    <item android:id="@+id/show_playlist"
          android:title="Show playlist" />
</menu> 
```

[它实际上与文档](http://developer.android.com/guide/topics/ui/menus.html#PopupMenu)中提到的方式类似

# xquery - 在 Saxon Xquery 中找不到主类

> ID：15214643
> 
> 赞同：1
> 
> 时间：2013-03-05T02:11:16.757
> 
> 标签：xquery, saxon

`java -cp saxon9he.jar net.sf.saxon.Query`仅产生以下消息：

> 找不到主类 net.sf.saxon.Query

我在其他线程中读到这是 Saxon 中 XQuery 模式的正确命令，那么我还能做错什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T15:19:52.917

我对这条消息有点惊讶，因为通常当你弄错类路径时，你会得到一个完全不同的消息：像

线程“主”java.lang.NoClassDefFoundError 中的异常：net/sf/saxon/Query

可能是您正在使用一些命令行工具来尝试使消息更友好。

无论如何，从给出的信息来看，最可能的解释是当前目录中不存在 saxon9he.jar。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-28T21:52:46.700

尝试指定 saxon9he.jar 的完整路径，例如，当我最初遇到相同的错误时，我使用了以下命令，如您所述：

```
java -cp "C:\SaxonHE9-7-0-5J\saxon9he.jar" net.sf.saxon.Query your-xquery-file.xq 
```

# java - 打印字符串排列的算法 - 运行时间分析

> ID：15214644
> 
> 赞同：0
> 
> 时间：2013-03-05T02:11:57.633
> 
> 标签：java, algorithm, big-o

我有以下代码来打印给定字符串的排列。[为简单起见，不要忘记我正在尝试的内容，假设字符串中没有重复的字符]

```
public static int count = 0;

public static void permute(String soFar, String strLeft) {

    if(strLeft.length() == 1) {
        soFar += strLeft;
        System.out.println(++count + " :: " + soFar);
    }

    for(int i=0; i<strLeft.length(); i++) {
        permute(soFar + strLeft.charAt(i), strLeft.substring(0,i) + strLeft.substring(i+1));
    }
}

/**
 * @param args
 */
public static void main(String[] args) {
    String input = "abcd";
    permute("",input);
} 
```

我试图弄清楚这段代码的运行时间。

到目前为止我的想法链：试图写一个重复，

```
T(n) = n * T(n-1) + O(n) for n > 1
     = 1                 for n = 1 
```

有n！排列，但递归调用的数量大于 n!。事实上，对于输入字符串为 "abcd" （即 4 个字符）的示例，对 permute 函数的调用次数为 65。

关于我应该如何查找此代码的运行时间的任何指示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T07:43:09.740

好吧，首先，你打了多余的电话。如果只剩下一个字符，则发出一个解决方案。但是你仍然会`permute`用一个空字符串调用并破坏调用计数。

我的第一个改进是`else`在`if`子句中添加一个。

```
public static void permute(String soFar, String strLeft) {

    if(strLeft.length() == 1) {
        soFar += strLeft;
        System.out.println(++count + " :: " + soFar);
    }
    else {
        for(int i=0; i<strLeft.length(); i++) {
            permute(soFar + strLeft.charAt(i), strLeft.substring(0,i) + strLeft.substring(i+1));
        }
    }
} 
```

这将调用次数减少到 41。为了计算调用次数，构建调用树并计算节点数。由于每次调用都是通过从字符串中删除一个字符来完成的，因此有：
1 个长度为 4 的
调用、4 个长度为 3 的
调用、12 个长度为 2 的
调用和 24 个长度为 1 的调用

总计为 41。瞧。

# xcode - 我无法让 UI 文本视图键盘消失

> ID：15214648
> 
> 赞同：0
> 
> 时间：2013-03-05T02:12:37.147
> 
> 标签：xcode

嗨，这是我的代码，我试图让 UI 文本视图键盘消失。我有 2 个文本字段，第二个是文本视图。我尝试拖动动作，但它不会让我。请帮忙！！！！！

```
- (IBAction)dismiss1:(id)sender{

[sender resignFirstResponder];
}

- (IBAction)dismiss2:(id)sender2{

[field2 resignFirstResponder];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T05:22:39.620

UITextView 没有事件操作。

```
Import <UITableViewDelegate, UITableViewDataSource> in header file and use below code to disapear keyboard when click on return button.

- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text
{

    if ([text isEqualToString:@"\n"]) {

        [self.textView resignFirstResponder];
        // Return FALSE so that the final '\n' character doesn't get added
        return NO;
    }
    // For any other character return TRUE so that the text gets added to the view
    return YES;
} 
```

# javascript - 移动 Safari 滚动到底部以加载更多内容，例如 Facebook

> ID：15214650
> 
> 赞同：0
> 
> 时间：2013-03-05T02:12:43.300
> 
> 标签：javascript, jquery, jquery-mobile, scroll, mobile-safari

我是网络开发的新手。

我和我的队友正在做一个项目，比如说，页面上最初显示了 10 个项目。用户可以滚动项目列表，当他到达底部时，它应该再加载 5 个内容。此外，我们希望列表保留在加载更多内容之前最后一次查看的项目上；但是，它仍然应该支持在页面顶部加载新的更新——就像在 Facebook 新闻提要中那样。当滚动到页面底部时它正在加载更多内容，上面添加了新的更新。

我们的应用程序在桌面浏览器上运行顺畅，但我们在移动端遇到问题，特别是在 Mobile Safari 上。滚动到底部正在工作。它加载更多内容，以便在页面顶部处理新的更新；但是，它将用户带回到列表的顶部，而不是停留在显示的最后一个项目上，并且新加载的内容将被隐藏，并且一旦向下滚动就会被查看。因此，如果页面显示列表中的第 11-20 个项目，并且他向下滚动以加载更多项目，例如 5 个项目，则页面重新加载并将用户带到第 1-10 个项目。它应该保留在第 11-20 个项目上，但仍然加载了隐藏在下面的第 21-25 个项目。

任何帮助将非常感激！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T03:23:47.770

尝试使用 iScroll 4，它应该可以实现您对移动设备的期望 [http://cubiq.org/dropbox/iscroll4/examples/pull-to-refresh/](http://cubiq.org/dropbox/iscroll4/examples/pull-to-refresh/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T04:20:44.010

您可以尝试使用第三方库之一作为示例[http://dcarrith.github.com/jquery.mobile.lazyloader/](http://dcarrith.github.com/jquery.mobile.lazyloader/)

# iphone - 选择 UITableView 单元格时，iphone sdk 中没有发生任何事情

> ID：15214651
> 
> 赞同：-1
> 
> 时间：2013-03-05T02:12:45.307
> 
> 标签：iphone, uitableview

**我在 IOS5 上尝试此代码工作正常，但是当我在 IOS6 上尝试时什么都不做，我无法重现该问题......任何人都可以帮助我，这让我发疯...... **

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{   
     UITableViewCell *cell =[tableView cellForRowAtIndexPath:indexPath];

    if (cell.textLabel.text== @"Cairo") {

    //Cairo

    center.latitude=29.333983;
    center.longitude=30.453069;
    span.latitudeDelta=1.400686;
    span.longitudeDelta= 2.705383;
    region.center=center;
    region.span=span;
    [_mapView setRegion:region animated:NO];

    }

    else if(cell.textLabel.text== @"Alexandria")
    {
    // Alexandria

    center.latitude=31.200092;
    center.longitude=29.918739;
    span.latitudeDelta=0.324794;
    span.longitudeDelta=0.676346;
    region.center=center;
    region.span=span;
    [_mapView setRegion:region animated:NO];

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T02:15:50.313

你不应该用 == 比较字符串，因为它会比较指针，这可能不一样。在 iOS 5 上可能是这样，所以它起作用了。您需要使用 isEqual: 或 isEqualToString:

```
if ([cell.textLabel.text isEqualToString:@"Cairo"]) { // do stuff 
```

此外，基于 UI 假设事物通常是一种不好的做法。您应该有一个模型，并使用 indexPath 来获取逻辑值。

# java - 如何从服务中的线程以特定间隔运行方法...？

> ID：15214655
> 
> 赞同：1
> 
> 时间：2013-03-05T02:13:11.190
> 
> 标签：java, android, bluetooth, android-service

我正在使用蓝牙聊天示例，并且尝试从连接蓝牙设备时处于活动状态的线程以特定间隔发送“虚拟”数据。每隔一段时间启动/停止另一个服务以调用原始服务中的方法是个好主意吗？我将如何实现这一点？

```
private class ConnectedThread extends Thread {

    static private final String TAG = "PhoneInfoConnectedThread";
    private final BluetoothSocket mmSocket;
    private final InputStream mmInStream;
    private final OutputStream mmOutStream;

    public ConnectedThread(BluetoothSocket socket, String socketType) {
        mmSocket = socket;
        InputStream tmpIn = null;
        OutputStream tmpOut = null;

        // Get the BluetoothSocket input and output streams
        try {
            tmpIn = socket.getInputStream();
            tmpOut = socket.getOutputStream();
            Log.d(TAG, "In and out streams created");
        } catch (IOException e) {
            Log.e(TAG, "temp sockets not created " + e.getMessage());
        }

        mmInStream = tmpIn;
        mmOutStream = tmpOut;
    }

    // this is where we will spend out time when connected to the accessory.
    public void run() {
        // Keep listening to the InputStream while connected
        while (true) {
            // do whatever
        }
    }

    // Write to the connected OutStream.
    public void write(byte[] buffer) {
        if (mmOutStream == null) {
            Log.e(TAG, "ConnectedThread.write: no OutStream");
            return;
        }
        try {
            Log.d(TAG, "ConnectedThread.write: writing " + buffer.length
                    + " bytes");
            mmOutStream.write(buffer);

            // Share the sent message back to the UI Activity
            // mHandler.obtainMessage(PhoneInfoActivity.MESSAGE_WRITE, -1,
            // -1, buffer).sendToTarget();
            Log.d(TAG, "ConnectedThread.write: sent to calling activity");
        } catch (IOException e) {
            Log.e(TAG, "Exception during write" + e.getMessage());
        }
    }

    public void cancel() {
        try {
            Log.d(TAG, "ConnectedThread.cancel: closing socket");
            if (mmSocket != null)
                mmSocket.close();
        } catch (IOException e) {
            Log.e(TAG, "ConnectedThread.cancel: socket.close() failed"
                    + e.getMessage());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T04:46:28.493

愿这个例子对你有所帮助。

```
 MyTimerTask myTask = new MyTimerTask();
 Timer myTimer = new Timer();
 myTimer.schedule(myTask, 2000, 1000);

class MyTimerTask extends TimerTask {
  public void run() {
     Log.v("TAG","Message");
  }
} 
```

有关更多信息，[请参阅此](http://developer.android.com/reference/java/util/TimerTask.html)

# objective-c - 在上下文之间使用托管对象的线程

> ID：15214658
> 
> 赞同：1
> 
> 时间：2013-03-05T02:13:50.223
> 
> 标签：objective-c, ios6

那时我正在失去头发，所以我想我会接触到这里有过使用带有线程和核心数据的 Objective C 经验的优秀人才。我在从主线程访问的 NSPrivateQueue 上下文中的线程上插入托管对象时遇到问题。因此，在较高级别上，我使用 AFNetworking 生成一个线程来发出请求以从服务器检索 JSON 数据，然后将值插入到我的持久存储核心数据中。完成此操作后，我还有另一个线程用于使用 AFNetworking 下载一些二进制数据。我为此设置了 2 个托管上下文，如下所示：

```
(NSManagedObjectContext *)masterManagedContext {
if (_masterManagedContext != nil) {
    return _masterManagedContext;
}

NSPersistentStoreCoordinator *coord = [self coordinator];
if (coord != nil) {
    _masterManagedContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSMainQueueConcurrencyType];
     _masterManagedContext.stalenessInterval = 0.0;
    [_masterManagedContext performBlockAndWait:^{
        [_masterManagedContext setPersistentStoreCoordinator:coord];
    }];

}
return _masterManagedContext;
}

// Return the NSManagedObjectContext to be used in the background during sync
- (NSManagedObjectContext *)backgroundManagedContext {
if (_backgroundManagedContext != nil) {
 return _backgroundManagedContext;
 }

NSManagedObjectContext *masterContext = [self masterManagedContext];
if (masterContext != nil) {
    _backgroundManagedContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];
     _backgroundManagedContext.stalenessInterval = 0.0;
    [_backgroundManagedContext performBlockAndWait:^{
        [_backgroundManagedContext setParentContext:masterContext];
    }];
}

return _backgroundManagedContext; 
```

}

如上所示，我正在使用子上下文和父上下文。当我打电话来获取 json 数据时，我有如下内容：

```
AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
        //Initially delete all records in table. This will change
         [[Singleton sharedInstance]removeEntityObjects:className];

           for (int x=0; x < [JSON count]; x++) {
                NSMutableDictionary *curDict = [JSON objectAtIndex:x];
                   [[CoreDatam sharedinstance] insertEmployeesWithDictionary:curDict];

                }else  {
                    /* do nothing */
                }
            }
        }

    } failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error,id JSON) {

        [delegate performSelector:@selector(didNotCompleteSync:) withObject:className];
    }];

    [operations addObject:operation];
}    

[self.AFClient enqueueBatchOfHTTPRequestOperations:operations progressBlock:^(NSUInteger numberOfCompletedOperations, NSUInteger totalNumberOfOperations) {
    NSLog(@"Currenlty downloaded table data %d of %d!",numberOfCompletedOperations,totalNumberOfOperations);

} completionBlock:^(NSArray *operations) {

    if (_syncInProgress) {
          [[CoreDatam sharedInstance]updateEmpForId];

           [self downloadAllFiles];
    }
}]; 
```

}`

对于插入功能，我有如下内容：

```
 insertEmployeesWithDictionary:curDict {

[[self backgroundManagedContext]performBlockAndWait:^{
Employee *emp = [NSEntityDescription insertNewObjectForEntityForName:@"Employee"
                                                     inManagedObjectContext:[self backgroundManagedContext]];

/* Issues saving null into core data based on type.*/
[emp setFirst:[dictCopy objectForKey:@"first"]];
[emp setLast:[dictCopy objectForKey:@"last"]];

    NSError *error = nil;
    BOOL saved;
    saved = [[self backgroundManagedContext] save:&error];
    if (!saved) {
        NSLog(@"Whoops, couldn't save: %@", [error localizedDescription]);
    }

    [self saveMasterContext];

}]; 
```

}

问题如下，我试图在上面完成块中的方法中访问托管对象：

```
updateEmpId {
[self.backgroundManagedContext performBlockAndWait:^{
     NSError *error = nil;
    NSFetchRequest *request = [[NSFetchRequest alloc] initWithEntityName:@"Employee"];
    [request setSortDescriptors:[NSArray arrayWithObject:
                                 [NSSortDescriptor sortDescriptorWithKey:@"last" ascending:YES]]];

    myEmps = [self.backgroundManagedContext executeFetchRequest:request error:nil];

 for (Employee *moEmp in myEmps) {
        [[self backgroundManagedContext]refreshObject:moEmp mergeChanges:YES];
        moEmp.photo = @'default.pic';
 }
                NSError *saveError = nil;
                if (![self.backgroundManagedContext save:&saveError]) {
                NSLog(@"Whoops, couldn't save: %@", [error localizedDescription]);
                }

            [self saveMasterContext]; 
```

}

问题是，在查看在主线程中修改的托管对象时，我的行为非常不一致。使用父子上下文关系时是否仍然需要传递托管的objectIds？如果是这样，我该怎么做上面的例子？非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T02:22:01.000

您应该在主线程上下文中传递`NSManagedObjectIDs`或重新获取，是的。如果您传递对象 ID，则在保存新的 Employee 对象后从后台上下文中获取 ID，并`existingObjectWithID:error:`在父上下文中使用以在其中实例化它们。或者只是`updateEmpId`从`masterManagedContext`.

# linux - 构建开源媒体服务器

> ID：15214666
> 
> 赞同：3
> 
> 时间：2013-03-05T02:15:17.787
> 
> 标签：linux, media, mp4

我正在研究在 Debian 上构建开源流媒体服务器的可能性。它将混合提供 mp3 和 mp4 文件，一次可能有 10-30 个流，质量相当高。

完全开源的 Linux 流媒体服务器有哪些可能性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-11T19:54:16.457

我一直认为 XBMC 和 Mythtv 是流消费者，而不是流提供者。根本无法与 XBMC 交谈。Myth 绝对可以提供流，并且它设置它们几乎是开箱即用的。不确定它是否可以处理 30 个并发流。如果你想要那么多，我猜这将超出你的家庭网络，你想要一些可以强化并暴露在互联网上的东西。我建议将 mediatomb 作为流媒体服务器。可能还有大量 RAM 用于文件系统缓存和额外的几块网卡。我认为这就是你的瓶颈会形成的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T02:20:46.753

[`XBMC`](http://xbmc.org/)并且[`MythTV`](http://www.mythtv.org/)是我想到的两个流行的媒体服务器软件发行版。它们也可以作为单独的软件包提供，您应该能够在任何发行版上安装它们。

除了媒体服务器功能外，`MythTV`还提供 DVR 和电视调谐器功能。

# mongodb - 即时创建新的 Meteor 集合

> ID：15214667
> 
> 赞同：4
> 
> 时间：2013-03-05T02:15:23.373
> 
> 标签：mongodb, meteor, mongo-collection

是否可以即时创建新的 Meteor 收藏？我想创建`foo_bar`或`bar_bar`依赖于我认为应该是全局变量的一些路径名（这样我就可以在整个应用程序中访问它）。
就像是：

```
var prefix = window.location.pathname.replace(/^\/([^\/]*).*$/, '$1');
var Bar = new Meteor.Collection(prefix+'_bar'); 
```

这里的事情是我应该`prefix`从 URL 获取我的变量，所以如果我在外面声明它，`if (Meteor.isClient)`我会得到一个错误：`ReferenceError: window is not defined`. 有可能做这样的事情吗？

**编辑**：使用 Akshats 的第一次迭代回答我的项目 js：[http ://pastie.org/6411287](http://pastie.org/6411287)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T07:22:31.253

I'm not entirely certain this will work:

You need it in two pieces, the first to load collections you've set up before (on both the client and server)

```
var collections = {};
var mysettings = new Meteor.Collection('settings') //use your settings

//Startup
Collectionlist = mysettings.find({type:'collection'});

Collectionlist.forEach(function(doc) {
    collections[doc.name] = new Meteor.Collection(doc.name);
})' 
```

And you need a bit to add the collections on the server:

```
Meteor.methods({
    'create_server_col' : function(collectionname) {
       mysettings.insert({type:'collection', name: collectionname});
       newcollections[collectionname] = new Collection(collectionname);
       return true;
    }
}); 
```

And you need to create them on the client:

```
//Create the collection:

Meteor.call('create_server_col', 'My New Collection Name', function(err,result) {
    if(result) {
        alert("Collection made");
    }
    else
    {
        console.log(err);
    }
} 
```

Again, this is all untested so I'm just giving it a shot hopefully it works.

**EDIT**

Perhaps the below should work, I've added a couple of checks to see if the collection exists first. Please could you run `meteor reset` before you use it to sort bugs from the code above:

```
var collections = {};
var mysettings = new Meteor.Collection('settings')

if (Meteor.isClient) {
  Meteor.startup(function() {
    Collectionlist = mysettings.find({type:'collection'});

    Collectionlist.forEach(function(doc) {
        eval("var "+doc.name+" = new Meteor.Collection("+doc.name+"));
    });
  });
  Template.hello.greeting = function () {
    return "Welcome to testColl.";
  };

  var collectionname=prompt("Enter a collection name to create:","collection name")

  create_collection(collectionname);

  function create_collection(name) {
    Meteor.call('create_server_col', 'tempcoll', function(err,result) {
        if(!err) {
            if(result) {
                //make sure name is safe
                eval("var "+name+" = new Meteor.Collection('"+name+"'));
                alert("Collection made");
                console.log(result);
                console.log(collections);
            } else {
                alert("This collection already exists");
            }
        }
        else
        {
            alert("Error see console");
            console.log(err);
        }
    });
  }
}

if (Meteor.isServer) {
  Meteor.startup(function () {
    // code to run on server at startup
    Collectionlist = mysettings.find({type:'collection'});

    Collectionlist.forEach(function(doc) {
        collections[doc.name] = new Meteor.Collection(doc.name);
    });
  });

  Meteor.methods({
    'create_server_col' : function(collectionname) {
       if(!mysettings.findOne({type:'collection', name: collectionname})) {
        mysettings.insert({type:'collection', name: collectionname});

        collections[collectionname] = new Meteor.Collection(collectionname);

        return true;
       }
       else
       {
        return false; //Collection already exists
       }
    }
  });
} 
```

Also make sure your names are javascript escaped.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-12-30T17:21:18.147

事情变得容易多了：

```
var db = MongoInternals.defaultRemoteCollectionDriver().mongo.db;
db.createCollection("COLLECTION_NAME", (err, res) => {
    console.log(res);
}); 
```

在您的服务器方法中运行它。

# jquery - 结合 2 个函数在 pageinit 触发

> ID：15214668
> 
> 赞同：-2
> 
> 时间：2013-03-05T02:15:25.687
> 
> 标签：jquery

我有两个要在 pageinit 触发的函数，一个接一个；首先触发ajax调用，然后将click函数绑定到`<a>`元素，但是我的尝试失败了。

这两个函数如下：

```
$(document).on( "pageinit", "#featuredtracks", function( e ) {
var surl =  "http://localhost/musicapp/includes/alltracks.php";
var id = 1;
    $.ajax({
    type: "GET",
    url: surl,
    dataType: "jsonp",
    cache : false,
    jsonp : "onJSONPLoad",
    jsonpCallback: "featuredtrackscallback",
    crossDomain: "true",
    success: function(response) {
    }
    },
    error: function (xhr, status) {           
       alert('Unknown error ' + status);
    }       
 });        
}); 
```

和

```
$(document).on( "pageinit", "#featuredtracks", function( e ) {
    $(this).find('a').unbind('click').click(function() {
        passDataObject.selectedHref = this.href;
    });
}); 
```

如果我能找到正确的方法来组合它们，我将不胜感激。最后，如果我能获得将这个 ajax 请求转换为 jQuery ajax 请求的教程，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T02:26:29.767

试试这个解决方案：

```
 $(document).on( "pageinit", "#featuredtracks", function( e ) {
    var surl =  "http://localhost/musicapp/includes/alltracks.php";
    var id = 1;
        $.ajax({
        //rest of code
        }).done(function(data){
            $(this).find('a').unbind('click').click(function() {
               passDataObject.selectedHref = this.href;
            });
        }).fail(function(){
            //when something fail
        })
    }); 
```

同样来自 jQuery 文档：

> 弃用通知：jqXHR.success()、jqXHR.error() 和 jqXHR.complete() 回调自 jQuery 1.8 起已弃用。要为最终删除准备代码，请改用 jqXHR.done()、jqXHR.fail() 和 jqXHR.always()。

* * *

所以用**done**代替，`success`用**fail**代替`error`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T02:28:08.500

这将在发出 ajax 请求后绑定，但不一定在响应请求后绑定。即因为ajax请求是异步的。

```
$(document).on( "pageinit", "#featuredtracks", function( e ) {
var surl =  "http://localhost/musicapp/includes/alltracks.php";
var id = 1;
    $.ajax({
    type: "GET",
    url: surl,
    dataType: "jsonp",
    cache : false,
    jsonp : "onJSONPLoad",
    jsonpCallback: "featuredtrackscallback",
    crossDomain: "true",
    success: function(response) {
    }
    },
    error: function (xhr, status) {           
       alert('Unknown error ' + status);
    }       
 });//end ,ajax

 $(this).find('a').unbind('click').click(function() {
        passDataObject.selectedHref = this.href;
    });

});//end pageinit 
```

这将在请求成功后绑定到锚点，因此如果您想等到服务器响应您的 ajax 请求，请执行此操作：

```
$(document).on( "pageinit", "#featuredtracks", function( e ) {
var surl =  "http://localhost/musicapp/includes/alltracks.php";
var id = 1;
    $.ajax({
    type: "GET",
    url: surl,
    dataType: "jsonp",
    cache : false,
    jsonp : "onJSONPLoad",
    jsonpCallback: "featuredtrackscallback",
    crossDomain: "true",
    success: function(response) {
         alert('test fire when ajax response succeeds');
         //put a break point here with your browser, then run  $(this).find('a') in console to see if it finds the element
         $(this).find('a').unbind('click'); 
         $(this).find('a').click(function() {
          alert('test fire when clicked');
          passDataObject.selectedHref = this.href;              
      });
    }
    },
    error: function (xhr, status) {           
       alert('Unknown error ' + status);
    }       
 });//end ,ajax
});//end pageinit 
```

但是我不知道变量 passDataObject 来自哪里，所以不确定您是否打算将其作为响应的一部分。

# java - 在 ArrayList 中存储单词的桶

> ID：15214672
> 
> 赞同：1
> 
> 时间：2013-03-05T02:15:54.280
> 
> 标签：java, arraylist

我想`ArrayList`按名字对字符串进行排序，每个“桶”都存储以相同字母开头的单词。

这就是我到目前为止所拥有的。

```
public static ArrayList<ArrayList> bucketMaker(ArrayList<String> list) {
    ArrayList<ArrayList> output = new ArrayList<ArrayList>(26);
    ArrayList<String> bucket = new ArrayList<String>();
    for (String s : list) {
        for (char letter = 'a'; letter <= 'z'; letter++) {
            if (s.startsWith(String.valueOf(letter))) {
                bucket.add(s);
                output.add(bucket);
                bucket.clear();
            }
        }
    }
    return output;
} 
```

我遇到的问题是区分桶，如果我有`bucket.clear();`它只是清除整个列表。我将如何使单词保留在存储桶中，我了解`ArrayList`存储对对象的引用，并且我不知道如何使其保留在列表中而不使 26`ArrayList`的。如果我遗漏了，`bucket.clear();`那么我在每个“桶”中都有相同的对象。

**编辑**

我现在有

```
public static ArrayList<ArrayList> bucketMaker(ArrayList<String> list) {
    ArrayList<ArrayList> output = new ArrayList<ArrayList>(26);
    ArrayList<String> bucket = new ArrayList<String>();

    for (char letter = 'a'; letter <= 'z'; letter++) {
        output.add(new ArrayList<String>());
    }

    for (String s : list) {
        for (char letter = 'a'; letter <= 'z'; letter++) {
            if (s.startsWith(String.valueOf(letter))) {
                output.get(letter-97).add(s);
            }
        }
    }
    return output;
} 
```

哪个有效，感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T02:18:52.943

我想你想要的是

```
ArrayList<ArrayList> output = new ArrayList<ArrayList<String>>();

//Add 26 buckets
for (char letter = 'a'; letter <= 'z'; letter++) {
    output.add(new ArrayList<String>());
}

//add each string to the correct bucket
for (String s : list) {
    for (char letter = 'a'; letter <= 'z'; letter++) {
        if (s.startsWith(String.valueOf(letter))) {

            output.get(letter).add(s);
            //   Get the bucket    add the string
        }
    }
} 
```

请记住，`ArrayList`构造函数不会创建 26 个元素，只是为其分配空间，至少就您而言。

# c++ - 可以在运行时优化浮点乘以零吗？

> ID：15214673
> 
> 赞同：3
> 
> 时间：2013-03-05T02:15:57.583
> 
> 标签：c++, c, optimization, floating-point, multiplication

我正在编写一个算法来找到一个 nxn 矩阵的逆。让我们以 3x3 矩阵的具体情况为例。

当您手动反转矩阵时，您通常会查找包含一个或多个零的行/列，以使行列式计算更快，因为它消除了您需要计算的项。

按照 C/C++ 中的这个逻辑，如果你用一个或多个零来识别一行/列，你最终会得到以下代码：

```
float term1 = currentElement * DetOf2x2(...);
//           ^
//           This is equal to 0.
//
// float term2 = ... and so on. 
```

由于编译器无法知道`currentElement`在编译时将为零，因此无法将其优化为类似`float term = 0;`的东西，因此浮点乘法将在运行时执行。

我的问题是，这些零值会使浮点乘法更快，还是无论 的值如何，乘法都会花费相同的时间`currentElement`？如果在运行时无法优化乘法，那么我可以删除搜索包含零的行/列的逻辑。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-05T02:32:41.710

除非计算很简单（例如所有常量），否则不允许编译器对此进行优化。

原因是，DetOf2x2 可能返回一个 NAN 浮点值。将 NAN 与零相乘不会返回零，而是再次返回 NAN。

您可以在这里使用这个小测试自己尝试：

```
int main (int argc, char **args)
{
  // generate a NAN
  float a = sqrt (-1);

  // Multiply NAN with zero..
  float b = 0*a;

  // this should *not* output zero
  printf ("%f\n", b);
} 
```

如果你想优化你的代码，你必须自己测试为零。编译器不会为您执行此操作。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-05T02:34:58.453

```
float term1 = currentElement * DetOf2x2(...); 
```

`DetOf2x2(...)`即使 currentElement 为 0，编译器也会调用：这肯定比最终乘法的成本要高得多，无论是否乘以 0。有多种原因：

*   `DetOf2x2(...)`即使在`currentElement`is`0`和
*   `DetOf2x2(...)`可能会返回像 Not-a-Number / NaN sentinel 这样应该传播到的值`term1`（正如 Nils Pipenbrinck 首先指出的那样）

Given`DetOf2x2(...)`几乎肯定正在处理只能在运行时确定的值，后一种可能性不能在编译时排除。

如果您想避免调用`Detof2x2(...)`，请尝试：

```
float term1 = (currentElement != 0) ? currentElement * DetOf2x2(...) : 0; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-05T02:21:16.507

*现代 CPU 实际上会非常*快速地处理乘以零，比一般乘法更快，并且*比*分支快得多。除非该零将通过至少几十条指令传播，否则甚至不要费心尝试优化它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T02:32:50.780

在运行时执行的优化称为 JIT（即时）优化。在翻译（编译）时执行的优化称为 AOT（提前）优化。您指的是 JIT 优化。编译器可能会在您的机器代码中引入 JIT 优化，但与常见的 AOT 优化相比，它的实现肯定要复杂得多。优化通常是根据重要性实现的，这种“优化”可能会被视为对其他算法产生负面影响。C 实现不需要执行任何这些优化。

您可以手动提供优化，这将是“搜索包含零的行/列的逻辑”，或者类似这样：`float term1 = currentElement != 0 ? currentElement * DetOf2x2(...) : 0;`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-06T03:37:23.247

当编译器可以猜测“currentElement”的值时，以下构造在编译时有效。

浮动术语 1 = 当前元素？currentElement * DetOf2x2(...) : 0;

如果在编译时无法猜到，则会在运行时进行检查，性能取决于处理器架构：分支之间的权衡（包括分支延迟和重建指令流水线的延迟可高达 10 或20 个周期）和平面代码（一些处理器每个周期运行 3 条指令）和硬件分支预测（当硬件支持分支预测时）。

由于 x86_64 处理器上的乘法吞吐量接近 1 个周期，因此没有性能差异取决于 0.0、1.0、2.0 或 12345678.99 等操作数值。如果存在这种差异，那将被视为加密风格软件中的隐蔽通道。

GCC 允许在编译时检查函数参数

内联浮点 myFn（浮点 currentElement，myMatrix M）

{

#if __builtin_constant_p(currentElement) && currentElement == 0.0

返回 0.0；

＃别的

返回当前元素 * det(M);

＃万一

}

您需要在编译器中启用内联和过程间优化。

# javascript - THREE.js 中的三轴斜率检测

> ID：15214676
> 
> 赞同：0
> 
> 时间：2013-03-05T02:16:23.727
> 
> 标签：javascript, three.js, game-physics

我想问一下如何在游戏中的斜坡上移动汽车。我正在为此使用`THREE.js`API 在 JavaScript 中构建游戏。我想检测坡度，我搜索了很多关于如何找到坡度的方法，发现坡度是垂直距离除以水平距离。在`THREE.js`我们有两个坐标 X 和 Z 时，在这种情况下我们如何检测水平距离，因为垂直距离是高度，在这种情况下是 Y 轴。

在这方面帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T10:25:46.537

我认为你需要从不同的角度来看待这个问题。使用三角形的法线进行计算。实际上，为什么不移动汽车，使其法线（四个轮子形成的平面的法线）与三角形的法线相匹配。

# google-app-engine - 使用cron的python GAE推送任务队列期间的KeyError

> ID：15214677
> 
> 赞同：2
> 
> 时间：2013-03-05T02:16:28.267
> 
> 标签：google-app-engine, error-handling, python-2.7, cron, task-queue

我非常接近完成一个使用 GAE 中的推送任务队列向用户发送后续电子邮件的项目。但是，我不断收到 KeyError 并且不知道为什么。我一直在寻找好的模型来作为我的项目的基础，但还没有找到任何使用多个参数的像样的例子。GAE 文档在上个月有所改进，但仍有很多不足之处。

我已经使用开发服务器中的交互式控制台检查了许多代码，但我仍然不知道我做错了什么。我最好的猜测是参数没有传递到脚本的下一部分（类 pushQueue）。

**应用程序.yaml：**

```
application: gae-project
version: 1
runtime: python27
api_version: 1
threadsafe: true

handlers:
- url: /cron/sendfu
  script: main.app
  login: admin

- url: /emailworker
  script: main.app
  login: admin

- url: /worker
  script: main.app
  login: admin

- url: /.*
  script: main.app
  login: required 
```

**cron.yaml：**

```
cron:
- description: sends follow-up emails
  url: /cron/sendfu
  schedule: every day 20:00 
```

**队列.yaml：**

```
total_storage_limit: 120M
queue:
- name: emailworker
  rate: 1/s
  bucket_size: 50
  retry_parameters:
    task_retry_limit: 5
    task_age_limit: 6h
    min_backoff_seconds: 10
    max_backoff_seconds: 60 
```

**主要.py：**

```
import webapp2
import datetime
from google.appengine.ext import db
from google.appengine.api import users
from google.appengine.api import taskqueue
import jinja2
import os

jinja_environment = jinja2.Environment(
loader=jinja2.FileSystemLoader(os.path.dirname(__file__)))

class emailJobs(db.Model):
    """ Models an a list of email jobs for each user """
    triggerid = db.StringProperty()  #Trig id
    recipientid_po = db.StringProperty() # id
    recipientlang = db.StringProperty()  #Language
    fu_email_sent = db.DateTimeProperty() 
    fuperiod = db.IntegerProperty() # (0 - 13)
    fu1 = db.DateTimeProperty() 
    fu2 = db.DateTimeProperty()

    @classmethod
    def update_fusent(cls, key_name, senddate):
        """ Class method that updates fu messages sent in the GAE Datastore """
        emailsjobs = cls.get_by_key_name(key_name)
        if emailsjobs is None:
            emailsjobs = cls(key_name=key_name)
        emailsjobs.fu_email_sent = senddate
        emailsjobs.put()

def timeStampFM(now):
    d = now.date()
    year = d.year
    month = d.month
    day = d.day
    t = now.time()
    hour = t.hour
    minute = t.minute + 5
    second = t.second
    today_datetime = datetime.datetime(year, month, day, hour, minute, second)
    return today_datetime

class MainPage(webapp2.RequestHandler):
    """ Main admin login page """
    def get(self):
        if users.get_current_user():
            url = users.create_logout_url(self.request.uri)
            url_linktext = 'Logout'
            urla = '/'
            url_admin = ""
            if users.is_current_user_admin():
                url = users.create_logout_url(self.request.uri)
                urla = "_ah/admin/"
                url_admin = 'Go to admin pages'
                url_linktext = 'Logout'

        else:
            url = users.create_login_url(self.request.uri)
            url_linktext = 'Login'

        template_values = {
            'url': url,
            'url_linktext': url_linktext,
            'url_admin': url_admin,
            'urla': urla,
            }

        template = jinja_environment.get_template('index.html')
        self.response.out.write(template.render(template_values))

class sendFollowUp(webapp2.RequestHandler):
    """ Queries Datastore for fu dates that match today's date, then adds them to a task queue """
    def get(self):

        now = datetime.datetime.now()
        now_dt = now.date() #today's date to compare with fu dates

        q = emailJobs.all()
        q.filter('fuperiod >', 0)
        q.filter('fuperiod <', 99)

        for part in q:
            guid = str(part.recipientid_po)
            lang = str(part.recipientlang)
            trigid = str(part.triggerid)

            if part.fuperiod == 1:
                fu1rawdt = part.fu1
                fu1dt = fu1rawdt.date()
                if fu1dt == now_dt:
                    follow_up = '1'

            if part.fuperiod == 2:
                fu2rawdt = part.fu2
                fu2dt = fu2rawdt.date()
                if fu2dt == now_dt:
                    follow_up = '2'

            if follow_up != None:
                taskqueue.add(queue_name='emailworker', url='/emailworker', params={'guid': guid,
                                                                                'fu': follow_up,
                                                                                'lang': lang,
                                                                                'trigid': trigid,
                                                                                })
        self.redirect('/emailworker')

class pushQueue(webapp2.RequestHandler):
    """ Sends fu emails, updates the Datastore with datetime sent """

    def store_emails(self, trigid, senddate):
        db.run_in_transaction(emailJobs.update_fusent, trigid, senddate)

    def get(self):
        fu_messages = {'1': 'MS_x01', 
                       '2': 'MS_x02',
                       }
        langs = {'EN': 'English subject',
                 'ES': 'Spanish subject',
                 }

        fu = str(self.request.get('fu'))
        messageid = fu_messages[fu]

        lang = str(self.request.get('lang'))
        subject = langs[lang]

        now = datetime.datetime.now()
        senddate = timeStampFM(now)

        guid = str(self.request.get('guid'))
        trigid = str(self.request.get('trigid'))

        data = {}
        data['Subject'] = subject
        data['MessageID'] = messageid
        data['SendDate'] = senddate
        data['RecipientID'] = guid
        # Here I do something with data = {}

        self.store_emails(trigid, senddate)

app = webapp2.WSGIApplication([('/', MainPage),
                           ('/cron/sendfu', sendFollowUp),
                           ('/emailworker', pushQueue)],
                           debug=True) 
```

当我在以下位置测试 cron 作业时：localhost:8086/cron/sendfu

它重定向到：localhost:8086/emailworker

我收到以下错误消息：

## 内部服务器错误

服务器出错或无法执行请求的操作。

```
Traceback (most recent call last):
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2-2.5.2/webapp2.py", line 1535, in __call__
rv = self.handle_exception(request, response, e)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2-2.5.2/webapp2.py", line 1529, in __call__
rv = self.router.dispatch(request, response)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2-2.5.2/webapp2.py", line 1278, in default_dispatcher
return route.handler_adapter(request, response)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2-2.5.2/webapp2.py", line 1102, in __call__
return handler.dispatch()
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2-2.5.2/webapp2.py", line 572, in dispatch
return self.handle_exception(e, self.app.debug)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2-2.5.2/webapp2.py", line 570, in dispatch
return method(*args, **kwargs)
  File "/Users/me/Documents/workspace/gae-project/src/main.py", line 478, in get
messageid = fu_messages[fu]
KeyError: '' 
```

**从日志：**

```
INFO     2013-03-05 03:03:22,337 dev_appserver.py:3104] "GET /cron/sendfu HTTP/1.1" 302 -
ERROR    2013-03-05 03:03:22,348 webapp2.py:1552] ''
Traceback (most recent call last):
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2-2.5.2/webapp2.py", line 1535, in __call__
rv = self.handle_exception(request, response, e)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2-2.5.2/webapp2.py", line 1529, in __call__
rv = self.router.dispatch(request, response)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2-2.5.2/webapp2.py", line 1278, in default_dispatcher
return route.handler_adapter(request, response)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2-2.5.2/webapp2.py", line 1102, in __call__
return handler.dispatch()
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2-2.5.2/webapp2.py", line 572, in dispatch
return self.handle_exception(e, self.app.debug)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2-2.5.2/webapp2.py", line 570, in dispatch
return method(*args, **kwargs)
  File "/Users/me/Documents/workspace/gae-project/src/main.py", line 478, in get
messageid = fu_messages[fu]
KeyError: ''
INFO     2013-03-05 03:03:22,355 dev_appserver.py:3104] "GET /emailworker HTTP/1.1" 500 -
INFO     2013-03-05 03:03:22,509 dev_appserver.py:3104] "GET /favicon.ico HTTP/1.1" 404 - 
```

**行：**

```
469    def get(self):
470        fu_messages = {'1': 'MS_x01', 
471                       '2': 'MS_x02',
472                       }
473        langs = {'EN': 'English subject',
474                 'ES': 'Spanish subject',
475                 }
476
477        fu = str(self.request.get('fu'))
478        messageid = fu_messages[fu] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T03:27:50.573

你打电话时

```
fu = str(self.request.get('fu')) 
```

如果`'fu'`请求中没有，`self.request.get`将返回空字符串 ( `''`)。所以当你尝试

```
messageid = fu_messages[fu] 
```

它在

```
fu_messages = {'1': 'MS_x01', 
               '2': 'MS_x02',
               } 
```

它只有`'1'`和`'2'`作为键。

您的`pushQueue`处理程序没有看到`params`您发送的原因

```
params = {
    'guid': guid,
    'fu': follow_up,
    'lang': lang,
    'trigid': trigid,
}
taskqueue.add(queue_name='emailworker', url='/emailworker', 
              params=params) 
```

是因为您使用的是`GET`处理程序而不是`POST`或`PUT`处理程序。正如[文档](https://developers.google.com/appengine/docs/python/taskqueue/functions)所述：

> 参数被编码为`application/x-www-form-urlencoded`并设置为有效负载。

因此，请求的有效负载中包含您的`'fu'`参数，但由于它是一个`GET`请求，因此有效负载被丢弃（这是 HTTP 的工作方式，并非特定于 App Engine）。如果您`POST`用作处理程序，则有效负载将按预期通过。

[我注意到您的代码与文档中的示例](https://developers.google.com/appengine/docs/python/taskqueue/overview-push#Using_Push_Queues_in_Python)非常相似，但只是`get`在示例使用的地方使用`post`。

# jquery - 动态创建一个 div 并将其底部与另一个组件的顶部对齐

> ID：15214679
> 
> 赞同：0
> 
> 时间：2013-03-05T02:16:42.793
> 
> 标签：jquery, css, validation, position, alignment

我正在制作一个验证框架类型的东西，当组件上出现错误时，我想显示一个文本框，当用户鼠标悬停时显示错误。所以我创建了一个方法来做到这一点。问题是我不能把它放在正确的位置。我希望我动态创建的最外层 div 的底部位于鼠标所在元素的顶部。

```
function onMouseOverHandler(event) {
        var validationContent = document.createElement("div");
        validationContent.setAttribute("class", "validationErrorContent");
        for(var i = 0; i < this.validationErrors.length; ++i) {
            if(i > 0) {
                $(validationContent).append("<br>");
            }
            $(validationContent).append(this.validationErrors[i].message);
        }

        var validationDiv = document.createElement("div");
        validationDiv.setAttribute("class", "validationErrorDiv");
        validationDiv.setAttribute("id", "validationErrorDiv");
        validationDiv.appendChild(validationContent);
        $(validationDiv).offset({ top: $(this).offset().top - $(this).height(), left: $(this).offset().left + $(this).width() - 5});
        document.body.appendChild(validationDiv);
    } 
```

这不起作用，因为此时validationDiv 的高度始终为0。

如果有人需要，这里还有相关的 CSS：

```
 .validationErrorDiv {position: absolute; display: block;}
.validationErrorContent {position: relative; color: white; background: red; width: 150px;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T02:49:42.023

验证 DIV 将始终只有一行文本。所以你可以这样添加`min-height`：

```
.validationErrorContent {
    position: relative;
    color: white; background: red;
    width: 150px; min-height: 1em;
} 
```

# javascript - IIS、Python 和读取目录中的文件

> ID：15214682
> 
> 赞同：0
> 
> 时间：2013-03-05T02:17:04.333
> 
> 标签：javascript, python, asp.net, iis, google-visualization

我已经使用此处的说明设置了 IIS 以运行 Python 脚本：http: [//support.microsoft.com/kb/276494](http://support.microsoft.com/kb/276494)。我已经确认它有效。

然后我尝试使用谷歌图表和 python 脚本返回数据的这个例子：[http](http://www.jansipke.nl/using-google-visualization-api-with-own-data-source/) ://www.jansipke.nl/using-google-visualization-api-with-own-data-source/ 这也很好用.

但是，当我修改 python 脚本以读取本地文件时，我得到一个没有行的 DataTable。如果我直接在浏览器中运行 python 脚本，它会打印一个如下所示的 json 对象：

```
google.visualization.Query.setResponse(
{
   reqId:'0',
   status:'ok',
   table:
   {
      cols:
      [
         {id:'Date',label:'',type:'string'},
         {id:'Price',label:'',type:'number'}
      ],
      rows:
      [
      ]
   }
}); 
```

但是，如果我在命令行上运行脚本，它会打印一个包含多行的 json 对象。我怀疑问题是从浏览器中运行的脚本访问本地文件。但是，我不确定如何解决这个问题，尤其是在 IIS 的上下文中。任何帮助，将不胜感激。

编辑：经过进一步调查，我发现 pythone.exe 在尝试以用户 NT AUTHORITY\IUSR 访问路径时收到 ACCESS DENIED 错误。我无法将 IUSR 添加到联网路径。因此，我正在探索是否可以像我自己一样运行，因为我知道我具有对该网络目录的读取权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T19:16:36.213

为了解决这个问题，我做了三件事（不确定是否都需要）： 1\. 创建一个新的应用程序池并将身份设置为自定义，使用可以访问网络路径的登录名。2.对于我的虚拟目录和应用程序，使用上面的应用程序池。3\. 在我的虚拟控制器和应用程序的高级设置中，我将物理路径凭据设置为有权访问网络路径的特定用户。

# php - 使用 TCPDF 将文本写入图像

> ID：15214683
> 
> 赞同：1
> 
> 时间：2013-03-05T02:17:09.717
> 
> 标签：php, tcpdf

我是 TCPDF 库的新手，在阅读完文档后，我不确定是否可以做我需要的事情。我有一个图像文件，我们称之为 background.tiff，我想把这个图像放在一个新的 pdf 中，并在这个图像的某些位置写一些文本。我找不到任何关于将文本写入图像，甚至在页面上绝对定位文本的信息或文档。这是应该用 writeHTML() 来完成的吗？理想情况下，此 pdf 将稍后打印 - 是否可以在 TCPDF 中为打印目的“概述”文本？任何帮助将不胜感激，我在这里感到有点失落。

编辑：如果它是一个更好的解决方案，我完全愿意切换到另一个库。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-05T15:03:58.457

Altough 解决方案已经在评论中给出，这是您需要知道的：

1.  [Image()](http://www.tcpdf.org/doc/code/classTCPDF.html#a714c2bee7d6b39d4d6d304540c761352) - 阅读有关将图像插入 PDF 文档的信息。
2.  [SetX()](http://www.tcpdf.org/doc/code/classTCPDF.html#a8d831d202e6420fe8fa6aeae7d3a2e8e) , [SetY()](http://www.tcpdf.org/doc/code/classTCPDF.html#ad3439990de56253b039bca6a09305758) , [SetXY()](http://www.tcpdf.org/doc/code/classTCPDF.html#a00ec13928f57b17c21040acc881fe482) , [GetX()](http://www.tcpdf.org/doc/code/classTCPDF.html#a415a80a301208fa77552048b27d2e0ce) , [GetY()](http://www.tcpdf.org/doc/code/classTCPDF.html#ae3b6169ba729309f289a5ac9680dd799) - 了解设置/获取指针。请记住，PDF 生成与打印过程非常相似。如果您生成一些内容，将指针移回该内容上，并生成新内容，它将出现在您之前“打印”过的内容之上。
3.  单元格（），多单元格（），写入（）等。

哦，如果你想精确地生成 PDF，请尽量避免将 HTML 转换为 PDF。改用指针。它更精确，更适合分页符，您无需担心 CSS 兼容性。

# svg - 将 Poilu raphael 布尔运算（联合、减法）与 SVG 编辑集成

> ID：15214688
> 
> 赞同：0
> 
> 时间：2013-03-05T02:17:40.557
> 
> 标签：svg, raphael, jquery-svg, librsvg, svg-edit

我正在修改 svg-edit，更具体地说是 Mark McKays Method draw：[https](https://github.com/duopixel/Method-Draw) ://github.com/duopixel/Method-Draw 。

我想使用我发现的这个 Raphael 库：[https](https://github.com/poilu/raphael-boolean) ://github.com/poilu/raphael-boolean ，它允许我对画布内的路径执行布尔（设置）操作。

现在我已经在编辑器中实现了一个按钮来启动一个功能：

```
 var paper = Raphael("canvas", 250, 250);

var path = paper.path("M 43,53 183,85 C 194,113 179,136 167,161 122,159 98,195 70,188       z");
path.attr({fill: "#a00", stroke: "none"});

var ellipse = paper.ellipse(170, 160, 40, 35);
ellipse.attr({fill: "#0a0", stroke: "none"});

var newPathStr = paper.union(path, ellipse);

//draw a new path element using that string
var newPath = paper.path(newPathStr);
newPath.attr({fill: "#666"});

// as they aren't needed anymore remove the other elements
path.remove();
ellipse.remove(); 
```

好的，单击按钮后，编辑器不应该返回带有椭圆的联合（焊接）路径吗？

还是我弄错了？

我认为var paper = Raphael("canvas", 250, 250); 必须改变一些东西。行，因为 svg-edit 为画布使用了不同的名称，但我不知道该怎么做。

任何帮助将不胜感激，因为我已经为此苦苦挣扎了一段时间。

更新：该库无法处理多对象焊接、自相交和许多其他情况。只有当我们想对 2 个简单对象执行操作时，它才有效。这可能不会立即与手头的问题相关，但我认为无论如何提及它是明智的。

如果您正在寻找 SVG 元素上的布尔运算，请参阅此问题：[SVG 路径上的布尔运算](https://stackoverflow.com/questions/15035884/javascript-library-to-perform-boolean-operations-on-svg-paths)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T22:39:06.350

您发布的代码是独立工作的，如下所示：http: [//jsfiddle.net/5SaR3/](http://jsfiddle.net/5SaR3/)

您应该能够将 Raphael 构造函数行更改为：

```
var paper = Raphael(canvas); 
```

其中 canvas 是对 svg-edit 使用的 SVG 元素的对象引用。

# validation - 转义包含必填字段的 primefaces/jsf 页面

> ID：15214689
> 
> 赞同：2
> 
> 时间：2013-03-05T02:17:53.527
> 
> 标签：validation, jsf, primefaces

我有一个 jsf 页面

`<h:inputText required="true">`属性。当我单击我的添加按钮时，如果该字段为空白，我希望看到一个错误。

我有一个`<f:message>`显示这个。

但是我怎样才能逃避（取消）该字段为空白的页面？就我而言，它不断发布错误消息，我必须在该字段中输入一些内容才能转到另一个页面。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T06:02:17.380

如果您的取消按钮是***POST***请求，例如`<p:commandButton>`, `<h:commandButton>`, `<p:commandLink>`, 或`<h:commandLink>`

您可以将取消按钮放在具有不提交表单**的表单之外** `<h:inputText>`

```
<h:form>
    <h:inputText value="#{bean.string}" required="true"/>
</h:form>
<h:form>
     <p:commandButton value="Cancel" action="anotherpage.xhtml"/>
</h:form> 
```

如果您在没有任何操作或方法调用的情况下进行导航，那么您可以使用***GET***请求，例如`<h:button>`、或。`<p:button>``<h:link>``<h:outputLink>`

**例子：**

```
 <h:form>
    <h:inputText value="#{bean.string}" required="true"/>
    <p:button value="Cancel" outcome="anotherpage.xhtml"/>
 </h:form> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T04:06:18.510

您可以`immediate="true"`在您的`<p:commandButton>`. 然后它将跳过验证。

例如：

```
<p:commandButton action="#{managedBean.action}" value="Cancel" immediate="true" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T18:33:36.170

如果您想取消或离开，请不要在提交时处理表单。

即不做

```
<h:form>
    ...
    <p:commandButton value="Cancel" action="#{bean.cancel}" />
</h:form> 
```

但只要做

```
<h:form>
    ...
    <p:commandButton value="Cancel" action="#{bean.cancel}" process="@this" />
</h:form> 
```

或者，如果您只是在`cancel()`方法中返回导航结果，那就更好了

```
<h:form>
    ...
    <p:button value="Cancel" outcome="otherpage.xhtml" />
</h:form> 
```

# asp.net - ASP.NET，表单身份验证票证是否可能在例程后面的代码中间超时？

> ID：15214695
> 
> 赞同：0
> 
> 时间：2013-03-05T02:18:38.280
> 
> 标签：asp.net, forms-authentication

请考虑以下代码：

```
if (Request.IsAuthenticated == true)
{
    string id = Membership.GetUser().ProviderUserKey;
} 
```

条件语句是否有可能评估 true 并且某些后台进程导致身份验证在块内的代码执行之前超时导致它抛出异常？

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T02:21:42.600

在执行代码之前，在请求开始时检查身份验证。当前请求正在执行时，它不会被重新检查。

# .htaccess - .htaccess：特定路径允许所有其他拒绝

> ID：15214699
> 
> 赞同：0
> 
> 时间：2013-03-05T02:18:55.583
> 
> 标签：.htaccess, controls

文件夹层次结构

```
/html => maindomain.com
/html/_subdomain => subdomain.maindomain.com 
/html/_subdomain/anotherdomain => anotherdomain.com and subdomain.maindomain.com/anotherdomain
/html/_subdomain/anotherdomain/admin => anotherdomain.com/admin and subdomain.maindomain.com/anotherdomain/admin 
```

我正在寻找 .htaccess 代码来拒绝“anotherdomain.com/admin”并仅允许“subdomain.maindomain.com/anotherdomain/admin”用于此文件夹。我的代码

```
<Directory /html/subdomain/anotherdomain/admin>
Order Deny,Allow
Deny from all
Allow from subdomain.maindomain.com/anotherdomain/admin
</Directory> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T02:35:58.430

您不能`<Directory>`在 htaccess 文件中使用容器。在`/html/_subdomain/anotherdomain/admin`目录中的 htaccess 文件中，尝试：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^subdomain.maindomain.com$ [NC]
RewriteRule ^ - [L,F] 
```

因此，如果访问不是来自主机**subdomain.maindomain.com**，那么请求会导致 403 被禁止。

# android - 我想用安卓手机扫描PDF417，有没有这个库？

> ID：15214701
> 
> 赞同：-1
> 
> 时间：2013-03-05T02:19:10.053
> 
> 标签：android

我试过 ZXing 和 ZBar，但它们都不起作用......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T02:39:18.267

在 ZXing android 测试应用程序中默认不激活。您可以添加`BarcodeFormat.PDF_417`到

```
PRODUCT_FORMATS = EnumSet.of(BarcodeFormat.UPC_A,
                             BarcodeFormat.UPC_E,
                             BarcodeFormat.EAN_13,
                             BarcodeFormat.EAN_8,
                             BarcodeFormat.RSS_14); 
```

在 DecodeFormatManager.java (包 com.google.zxing.client.android)

前段时间我出于好奇对它进行了测试，发现它可以工作，但成功检测率还不是 100%。

# css - CSS 媒体查询：如何在小屏幕上让右栏显示在左上方？

> ID：15214703
> 
> 赞同：0
> 
> 时间：2013-03-05T02:19:16.223
> 
> 标签：css, media-queries

调整窗口大小时，如何使右列高于左列？默认行为是右列滑到左下方。

这是说明我的目标的图表：

更宽的窗口：

> ++++++++++++++++++++++++++++++
> 
> | 左栏 | 右栏 |
> 
> ++++++++++++++++++++++++++++++

这是用于生成该布局的 CSS：

# CSS

```
.left { 
  width:auto;
  overflow:hidden;
  float:none;
}
.right {
  width:500px;
  float:right
} 
```

这是我想在较窄的窗口（例如移动设备）上显示的内容：

> ++++++++++++++++
> 
> | 右栏 |
> 
> | 左栏 |
> 
> ++++++++++++++++

我知道媒体查询是关键，但我不知道要使用的代码。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T03:10:46.500

解决此问题的一种方法是使用[媒体查询](http://css-tricks.com/css-media-queries/)和[绝对定位](http://css-tricks.com/absolute-relative-fixed-positioining-how-do-they-differ/)。[**在 JSFiddle 上查看。**](http://jsfiddle.net/exK8N/)

媒体查询，如果你不熟悉，基本上说“在这种特殊情况下应用这个 CSS”。绝对定位让我们可以将 div 移动到任何我们想要的位置。

在下面的代码中，当我们的视图缩小到 700 像素以下时，我们会滑动 div。要让 Fiddle 显示这个，要么缩小浏览器窗口，要么缩小“结果”面板，直到你看到过渡。（*在我的电脑上，滑动结果面板的延迟要小得多*）

# css

```
#left {
  background: #eee;
  height: 60px;
  width: 200px;
  position: absolute;
  top: 0;
  left: 0;
}
#right {
  background: #ddd;
  height: 60px;
  width: 200px;
  position: absolute;
  top: 0;
  left: 200px;
}

@media screen and (max-width: 700px) {
  #left {
    background: #2f6497;
    top: 60px;
  }
  #right {
    background: #002d62;
    left: 0;
  }
} 
```

# c++ - 调试对象命名和 Directx11

> ID：15214704
> 
> 赞同：2
> 
> 时间：2013-03-05T02:19:27.483
> 
> 标签：c++, visual-c++, direct3d

PIX 是否需要为对象提供调试名称？我试图用以下代码给他们起名字：

```
ID3D11Buffer * vertex_buffer;
...
const char c_szName[] = "vertex_buffer";
vertex_buffer->SetPrivateData( WKPDID_D3DDebugObjectName, sizeof( c_szName ) - 1, c_szName ); 
```

但是当我不释放 vertex_buffer 时，我得到的内存泄漏警告仍然显示 Name="unnamed"。

# java - Spring MVC 移动到列表中的下一条记录

> ID：15214708
> 
> 赞同：0
> 
> 时间：2013-03-05T02:20:12.317
> 
> 标签：java, jsp, spring-mvc

我想移动到要返回视图的列表中的下一条记录。下面是我试图实现的一个示例，我想返回此列表中的第二条和第三条记录，但是我想一次从列表中返回一条记录：

这会将 List 中的最后一条记录返回到视图：

```
 model.addAllAttributes(citizenManager.getListOfCitizens(citizen)); 
```

使用下面的代码无法编译：我收到以下消息“模型类型中的方法 addAllAttributes(Collection) 不适用于参数（公民）”

```
model.addAllAttributes(citizenManager.getListOfCitizens(citizen).get(2)); 
```

**Jsp** - 只是表单上项目的一个示例

```
<form:form id="citizenRegistration" name ="citizenRegistration" method="POST" commandName="citizens" action="citizen_registration.htm">

<li><form:label for="weight" path="weight">Enter Weight <i>(lbs)</i></form:label>
<form:input path="weight" id="weight" title="Enter Weight"/><form:errors path="weight" class="errors"/>
</li> 
                                                <li><form:label for="height" path="height">Enter Height <i>(feet)</i></form:label>
<form:input path="height" id="height" title="Enter Height"/><form:errors path="height" class="errors"/>
</li> 
                                                <li>
<form:label for="skinColorId" path="skinColorId">Select Skin Color</form:label>     
<form:select path="skinColorId" id="skinColorId" title="Select Skin Color">
<form:options items = "${skinColor.skinColorList}" itemValue="colorCode" itemLabel="colorDesc"/>
</form:select>          
<form:errors path="skinColorId" class="errors"/><label class="colorPreviewer" id="skinColorPreviewer">color previewer</label>
</li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T02:24:28.460

我们只能假设`getListOfCitizens(citizen)`返回 a `Collection`of `Citizens`。因此，`getListOfCitizens(citizen).get(2)`只返回一个`Citizens`.

方法[Model#addAllAttributes()](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/ui/Model.html#addAllAttributes%28java.util.Collection%29)期望 a`Collection`并且您给它 a `Citizens`。

如果将整个集合添加到模型中，则可以在视图中获取所需的任何部分。您可能想使用另一种模型方法[Model#addAttribute(String, Object](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/ui/Model.html#addAttribute%28java.lang.String,%20java.lang.Object%29) )

```
model.addAttribute("citizens", citizenManager.getListOfCitizens(citizen)); 
```

在您看来，只需使用它来引用它，这取决于您的视图技术，如`${citizens}`. 您甚至可以遍历它或在索引位置获取特定元素。快速搜索此站点或 Google 将告诉您如何操作。

```
<form>
    <c:forEach items="${citizens}" var="element">
        The element value is ${element} <br/>
        <!-- put some inputs here with ${element} -->
    </c:forEach>
<form> 
```

# php - $_SERVER['REQUEST_URI'] 和 header('location: ...') 的任何安全问题；

> ID：15214713
> 
> 赞同：5
> 
> 时间：2013-03-05T02:21:03.040
> 
> 标签：php, security

我的网站有页眉、页脚和主要内容。如果用户未登录，则对于主要内容，可能会显示登录表单而不是实际内容。

在该登录表单上，我`$_SERVER['REQUEST_URI']`在会话变量中写入了`$_SESSION['redirect']`。

我的登录表单后处理程序，它将登录用户，将在成功登录后将用户发送到此链接`header('location: http://myserver.com'.$_SESSION['redirect']);`

因此，如果我转到`myserver.com/somesite.php?somevar=10`它会在您登录时显示正确的站点。否则它将显示登录表单，但是浏览器地址栏中的 URL 仍然显示`myserver.com/somesite.php?somevar=10` Then you enter your credentials and you are redirected to `myserver.com/somesite.php?somevar=10`，这将然后 - 因为您现在已登录 - 完全显示。

我不将该`REQUEST_URI`值用于表单操作或用作链接 href。

此外，`$_GET`我使用的任何变量我首先检查它们是否匹配正则表达式（通常变量将是一个`sha1`字符串或随机生成的数字和字母字符串，没有特殊字符），如果 get 变量，我总是使用准备好的语句用于数据库查询。

我的问题是是否有**任何安全问题**？有什么方法可以利用这个，在 url 中输入恶意内容，然后将其发送给另一个用户，例如......？我应该在这个过程中以某种方式逃避某些东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-11T22:30:43.373

关键规则是你总是检查你的输入/输出，看看你能控制什么，不能控制什么（因此，什么可以由用户控制）。在此基础上，您应用安全/消毒措施。

如果我正确理解您的场景，您将显示该页面，除非用户未登录。在这种情况下，您会显示一个登录框，并在成功登录后将用户发送回他尝试使用的页面访问`$_SERVER['request_uri']`（存储在会话中）。

所以用户显然可以控制这个变量，他可以用一些难看的字符浏览到你的页面。因此，您需要对其进行消毒。正如@Wayne 在评论中提到的那样，例如，用户可以遍历您的目录树。

因此，就像您的`$_GET`变量一样，您也需要对其进行清理`$_SERVER['request_uri']`。有很多方法可以做到这一点。最安全的方法可以说是在使用或类似的东西`request_uri`进行消毒之后检查它是否是现有页面。请注意，特殊的目录遍历方法（`html_entities()`例如`../`和 ）可能会通过传统的清理方法（例如前面提到的）`//``./``html_entities()`

并从字面上回答： *我是否应该在此过程中以某种方式逃避某些事情？* - 是的，一切，在每个过程的开始。

**------ 编辑@ 12-12-2013 -----**

（评论的答案太长，所以我将在这里解释用户如何使用目录遍历，包括潜在的危险情况）

来自 PHP 手册：

```
$_SERVER['REQUEST_URI']: The URI which was given in order to access this page;
                         for instance, '/index.html'. 
```

所以，假设我想去`yourdomain.com/posts/post.php?../../../ssh`你的 web 应用程序会注意到我没有登录，存储`post.php?../../../ssh`在会话中并处理登录，然后它把我发回 url。由于`../../../ssh`部分原因，我不会被发送到 post.php，而是被发送到您的服务器上的一个目录，该目录位于`ssh`您的 webroot 之下。为方便起见，您已将 SSH 密钥存储在那里。这似乎是安全的，因为它在 webroot 之外，任何 web 用户都不能访问它。然而，我可以因为我巧妙地添加到您的网址。

虽然这有点牵强，但正确配置的 http-server、chrooting 环境等会阻止这种情况，但这个示例确实向您展示，如果您允许添加这些字符，它们可能会使用户访问他们不应该访问的位置.

根据您的实现，盲目添加`$_SERVER['request_uri']` 也可能意味着将不需要的内容添加到会话中，如果您将该会话存储在数据库中，它也会被添加到数据库中。我并不是最新的（不）安全的 PHP，但我可以想象这允许打破会话变量并可能将内容注入您的数据库。

尽管并非一切皆有可能，而且该示例可能并非真正可行，但最好避免这种行为，也不那么难。

-- 细思极恐：也许这些`header('location'...`东西是不安全的，但是这个：[这个 PHP 重定向不安全吗？](https://stackoverflow.com/questions/4916172/is-this-php-redirect-insecure)表明它不是真的。然而，就像那里的评论者所说：打字并不难`urlencode()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T02:28:37.997

将任何东西放在网上都有许多安全问题。在发布/获取请求中具有可识别的模式是一个问题，但这取决于很多因素，主要是......用户可以从弄乱您的网站中得到什么，以及您对网站用户的恶意意图负有多大责任。

您应该做一些研究来清理您的输入，使用会话令牌将是您可以做的第一件事，以确保您的登录脚本的流量实际上是由您网站上的用户生成的。这两种常见做法是防止 sql 注入和跨站点脚本攻击的第一步。通过良好的数据库设计和良好的代码设计，确保您的数据受到保护的适当步骤。

我最喜欢的技术之一是将我的应用程序配置为使用自定义 http 标头，并且任何从 Super Global 检查接收数据的脚本以确保将自定义标头作为我的安全组件正确提供。任何黑客都可以轻松查看和嗅探这些标头，但许多恶意攻击首先由脚本执行，而这只是一个易于部署的步骤，使您成为此类攻击的更难目标。

一个关于强化基于 php 的网站的快速谷歌搜索出现了这篇文章，其中有一些很好的提示：[http ://www.noupe.com/php/php-security-tips.html](http://www.noupe.com/php/php-security-tips.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-16T14:41:25.983

你永远不会 100% 安全。你可以看看[OWASP 前十名](https://www.owasp.org/index.php/OWASP_Top_10#tab=OWASP_Top_10_for_2013)。这些是主要的安全问题。

我认为您应该在 $_SESSION 中与每个用户关联一个令牌（随机数），而不是`$_SERVER['REQUEST_URI']`. 您可以通过 GET 传递 REQUEST_URI 并通过 POST 传递令牌（在隐藏的输入中），然后对其进行验证。如果此 URI 需要用户登录，请确保收到的用户令牌等于会话用户令牌。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-16T22:39:27.217

您正在重定向到一个相对 URL，这很好，因为这意味着攻击者无法使用[诸如此类的方法来使用](https://stackoverflow.com/a/19184105/413180)[会话固定](https://www.owasp.org/index.php/Session_fixation)来毒化会话变量，并重定向到他们自己的域。您不应对此值进行任何编码，因为它是原始 URI 的直接副本，并且也是您希望将用户重定向到的确切 URI。不过，您应该检查您正在使用的 PHP 版本是否容易受到[标头注入](http://en.wikipedia.org/wiki/HTTP_header_injection)的影响。看来它已[在 PHP 中修复](http://php.net/manual/en/function.header.php#refsect1-function.header-changelog)：

> 4.4.2 和 5.1.2 此功能现在可防止一次发送多个标头，以防止标头注入攻击。

关于[路径遍历](https://www.owasp.org/index.php/Path_Traversal)的其他答案在这里不应该是一个问题，因为没有比用户直接在他们的地址栏中输入路径的额外风险。使用标头重定向它们的事实`location`不会增加这种风险。但是，您应该确保您的服务器平台不会受到攻击，但请记住，这与您的重定向方法无关，因为它`location`只是告诉客户端加载另一个地址。

确保在[设置 header](http://php.net/manual/en/function.header.php)`exit`后调用，否则攻击者将能够通过查看原始 HTTP 响应来查看您的页面内容：-

```
<html>
<?php
/* This will give an error. Note the output
 * above, which is before the header() call */
header('Location: http://www.example.com/');
exit;
?> 
```

我无法评论您的网站可能存在的每个漏洞，但本质上您建议进行重定向的方式应该是安全的。但是，您应该确保您的站点只能通过 HTTPS 访问，这将加密连接并确保它免受[MITM](https://www.owasp.org/index.php/Man-in-the-middle_attack)攻击。您还应该在会话 cookie 上设置[安全标志](https://www.owasp.org/index.php/SecureFlag)，以确保它不会通过非 HTTPS 连接泄露。

# java - 如何在 vlcj 上运行 MJPEG 流？

> ID：15214720
> 
> 赞同：1
> 
> 时间：2013-03-05T02:21:45.403
> 
> 标签：java, mjpeg, vlcj

嗨，我似乎在 vlcj 上流式传输 MJPEG 文件时遇到问题。流根本没有显示任何内容。请帮助展示如何从 vlcj 执行此操作的示例。

# c# - 确定 AssociatedObject 的实际运行时类型

> ID：15214722
> 
> 赞同：0
> 
> 时间：2013-03-05T02:22:28.773
> 
> 标签：c#, wpf, xaml, behavior, associated-object

我有一个行为，我想附加到多个控件并根据它们的类型，我想编写逻辑，为此我需要在运行时确定关联对象的类型，我想知道我该怎么做

```
class CustomBehavior:Behavior<DependencyObject>
{
    protected override void OnAttached()
    {
        base.OnAttached();
        if(AssociatedObject.GetType()==typeof(TextBox))
        {
            //Do Something
        }

        else if(AssociatedObject.GetType()==typeof(CheckBox))
        {
            //Do something else
        }
//....
//...
        else
            //Do nothing
    }
} 
```

这行得通吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T02:53:21.060

您可以使用`is`关键字，这将获取类型和派生类型

```
protected override void OnAttached()
{
    base.OnAttached();
    if(AssociatedObject is TextBox)
    {
        //Do Something
    }

    else if(AssociatedObject is CheckBox)
    {
        //Do something else
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T02:30:11.260

我更喜欢：

```
if(typeof(TextBox).IsAssignableFrom(AssociatedObject.GetType()))
{
   ...etc
} 
```

这将适用于`TextBox`从它派生的任何类。

旁注：如果您打算将此行为用于控件（TextBox、ComboBox 等），最好将其更改为`Behavior<FrameworkElement>`. 这样您就可以访问`FrameworkElement`(IE [LIFE](http://wpfdisciples.wordpress.com/) ) 的所有常见功能，而无需强制转换为特定类型。

# html - 为 HTML5 App 制作可配置文本元素的最佳方法是什么

> ID：15214723
> 
> 赞同：0
> 
> 时间：2013-03-05T02:22:29.840
> 
> 标签：html, jquery-mobile

我正在做一个 HTML5 应用程序。一切正常。客户在完成代码后突然要求他需要根据自己的意愿更改错误消息和文本标签，但没有触及 HTML5。所以我想到了两个解决方案。

1 使用javascript变量

```
// Error Messages

    var msg_authentication_failed = "The username or password is invalid. Please try again"; 
```

并根据需要使用此变量。

2 使用 XML 文件（或 JSON）

```
<?xml version="1.0" encoding="ISO-8859-1"?>
     <ErrorMessages>
           <AuthenticationFail>The username or password is invalid. Please try again</AuthenticationFail>
     </ErrorMessages> 
```

加载 XML 文件并使用它的标签名称设置值。

但是我觉得第二种解决方案很容易被客户维护，但在性能方面它并不好。

有没有其他可能的方法来完成这种要求？感谢您的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T04:17:08.253

我正在运行一个支持大约 6 种语言（来自欧洲）的 jQuery Mobile 项目，我所做的只是在 JSON 字符串中维护标签。

使用`pagebeforeshow`我在显示表单元素的标签时更新标签的事件。如果是错误信息，我写了一个自定义函数，可以根据 labelID 访问字符串。

JSON 比 XML 更容易处理。我建议您继续进行。

# php - 面向对象的 php 与类混淆以及如何调用它们

> ID：15214726
> 
> 赞同：-1
> 
> 时间：2013-03-05T02:22:37.310
> 
> 标签：php, oop, class

嗨，我的代码非常简单，我试图使用面向对象的方法作为学习练习，但是识别类和实现有点令人困惑

因此，在我当前的程序中，我有一个函数，我正在计算用户在一个月内某些任务需要多少时间以及剩余多少时间：

例如 `function timeremaining ($dob, $task1start=null, $task1end=null, $item2start=null, $task2end=null)`

如果我试图在面向对象编程中做类似的事情，我想我会使用这样的东西，但不确定：

```
class person extends task { 
  public $age; 
  public $name; 
  public $phoneno ;
  public $totaltimethismonth;
} 

class task extends time{ 
  public $name ; 
  public $timefrom; 
  public $timeto;

  public function getDuration($name,$timefrom,$timeto)
  {
    list($hours, $minutes) = explode(':', $timefrom);
    $startTimestamp = mktime($hours, $minutes);

    list($hours, $minutes) = explode(':', $timeto);
    $endTimestamp = mktime($hours, $minutes);

    $seconds = $endTimestamp - $startTimestamp;
    $totaldurationinseconds=$totalsecondsinday - $seconds;
    return $totaldurationinseconds;
  }
} 

class time { 
  public $hours ; 
  public $minutes; 
  public $seconds;
  //not sure if time should be used?
}

$newperson = new person;

$duration=$newperson->getDuration("gardening","10:00","17:00");
$totaltime=$newperson->totaltimethismonth;
echo "remaing time this month is $totaltime-$duration; 
```

任何帮助都感激不尽

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T02:53:52.150

如果没有更详细地描述您希望您的应用程序做什么，这有点难以回答。不过我可以指出一些问题。

您错误地使用了继承。继承意味着“是”关系。任务不是时间，人也不是任务。相反，一个任务有时间，一个人有任务。“有”意味着组合。

不知道为什么 getDuration 正在接受参数。你已经有时间在你的对象中，所以可以

```
public function getDuration() {
    $duration = $this->timeFrom ... $this->timeTo ...
    return $duration;
} 
```

然后，Person 类可以有一个 getTotalTask​​Time 方法，该方法循环遍历任务字段并将您从 $task->getDuration() 获得的所有值相加。

而且，您可能希望将您的字段设为私有或受保护。它们可以通过构造函数设置。并通过吸气剂获得。如果你也需要能够修改，你可以添加设置器（尽管这样你会失去不变性的好属性）

# python - 点击退出pygame窗口

> ID：15214727
> 
> 赞同：3
> 
> 时间：2013-03-05T02:22:44.923
> 
> 标签：python, events, click, pygame, exit

在这里（或者坦率地说是任何论坛）发表我的第一篇文章，但我想知道为什么我不能在按下窗口的退出按钮 [x] 时退出。我试过了：

```
#print "Exit value ", pygame.QUIT
for et in pygame.event.get():
    #print "Event type ", et.type
    if et.type == pygame.KEYDOWN:
            if (et.key == pygame.K_ESCAPE) or (et.type == pygame.QUIT):
                    print "In Here"
                    return True;
pygame.event.pump()# not quite sure why we do this
return False; 
```

我发现 pygame.QUIT 打印的值为 12，当我运行程序时，当我单击 [x] 时，事件类型会打印“12”。“In here”字符串在这些情况下从不打印。当返回为真时程序正确退出（当我在键盘上按 ESC 时）。我查看了一些相关的问题：所以

我没有在 IDLE 上运行，我正在运行它：

Eclipse Juno Service Release 1\.
Python 2.7.3 和 pygame for 2.7 的最新版本（截至 2013 年 3 月 4 日）。
Windows 7 & 8 和 Ubuntu 12.04LTS（除了 Ubuntu 中没有声卡错误，结果相同）

我通过双击运行程序的 .py 文件在 Windows 7 中运行，但仍然没有在 [x] 上退出。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T03:11:22.013

你的主循环应该是这样的

```
done = False
while not done:
    for event in pygame.event.get():
        if event.type == KEYDOWN:
            if event.key == K_ESCAPE: done = True
        elif event.type == QUIT:
            done = True

    # draw etc...
    pygame.display.update() 
```

然后，如果您在任何地方切换“完成”，它就会很好地退出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T12:01:15.167

在您的事件循环中，

```
#print "Exit value ", pygame.QUIT
for et in pygame.event.get():
    #print "Event type ", et.type
    #-----------------------------------------------------------------#
    if et.type == pygame.KEYDOWN:
            if (et.key == pygame.K_ESCAPE) or (et.type == pygame.QUIT):
    #-----------------------------------------------------------------#
                    print "In Here"
                    return True;
pygame.event.pump()  # not quite sure why we do this
return False; 
```

**问题**（在 2 之间`#------------#`）
让我们分析那部分：

1.  如果输入 if 块，`et.type == KEYDOWN`
2.  你的支票`QUIT`在`if et.type == KEYDOWN`.
3.  既然`et.type`是`KEYDOWN`，那不可能是`QUIT`..
4.  因此，您没有检查`et.type == QUIT`，
    因此，即使您单击“X”，您的窗口也不会退出。

**该怎么办？**
拉出你`QUIT`的`KEYDOWN`条件，比如：

```
done = False
while not done:
    for event in pygame.event.get():
        if event.type == pygame.KEYDOWN:
            if event.key == pygame.K_ESCAPE:
                done = True
                break # break out of the for loop
        elif event.type == pygame.QUIT:
            done = True
            break # break out of the for loop
    if done:
        break # to break out of the while loop

    # your game stuff 
```

笔记：

*   你不需要`;`在那些返回语句之后
*   始终检查`event.type`不同的 if-elif 块，例如

    ```
    if event.type == pygame.QUIT:
         #...
    elif event.type == pygame.KEYDOWN:
         #... 
    ```

*   你不需要`pygame.event.pump()`那里，看[这里](http://www.pygame.org/docs/ref/event.html#pygame.event.pump)

# c++ - Visual Studio 展示函数@main.cpp

> ID：15214728
> 
> 赞同：0
> 
> 时间：2013-03-05T02:22:53.020
> 
> 标签：c++, visual-studio-2012

我试图弄清楚为什么VS2012不显示functions.cpp @ main.cpp中的函数**multi**。为了让它显示在 main.cpp 我必须输入**int multi();** 在 main.cpp 中。

这是 2 个屏幕截图，第一个屏幕截图`int multi();`在 main.cpp 中

第二个是没有。代码在其中 2 种情况下运行良好，但是当我想导航到`multi`main.cpp 文件中的函数时，如果我不输入`int multi();`@main.cpp就无法做到

有人可以解释一下我做错了什么吗？

谢谢你。

示例图 1

![在此处输入图像描述](../Images/eea19760075aed185b75965353d3dec9.png)

示例图 2

![在此处输入图像描述](../Images/ea380375a7a62f5e1f49af62c93c3ed0.png)

这是我的代码

主文件

```
#include "Header.h"
#include <iostream>

using namespace std;
int plus();

int main()
{

cout << "Eneter a number you want to multiply" << endl;
cout << multi() <<endl;
cout << randomNumber << endl;

system("pause");
return 0;
} 
```

头文件.h

```
#ifndef _HEADER_
#define _HEADER_

#include <iostream>

int randomNumber = 4;
int multi ();

#endif 
```

函数.cpp

```
#ifndef _HEADER_
#define _HEADER_

#include <iostream>

using namespace std;

int multi()
{
    int x;
    cin >> x;
    return(x=x+x);
}
#endif 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T03:10:26.110

这是因为该下拉列表仅显示您在当前文件中声明/定义的项目的名称。这是预期的行为，因为它的目的是在当前文件中导航，并且显示其他文件中的项目名称会将您带到不同的文件（此外，它会向您显示 iostream 之类的标头中的内容，您并不真正感兴趣）。

IntelliSense 的其他功能确实向您展示了“多”功能，例如键入“::”：

![在此处输入图像描述](../Images/ab59b2cf35061d1e123ff90ef3d105e2.png)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-05T02:44:50.253

您只能与头文件一起使用，并这样做：

```
#ifndef _HEADER_H
#define _HEADER_H

#include <iostream>
using namespace std;

int randomNumber = 4;

int multi()
{
    int x = 1;
    cin >> x;
    return(x=x+x);
}

#endif 
```

并且通过这种方式，您不需要声明函数。你试图做的是创建一个“类”文件？对您更好的是，只需单击项目上的右键 > 添加 > 类，您就可以看到它是如何工作的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-05T02:45:17.310

包括警卫，这些`#ifndef _HEADER_, #define _HEADER_, #endif`行在正常情况下不属于 cpp 文件。您应该将它们从`functions.cpp`.

它可能不会在小程序中引起您的问题，但是对于名称`header.h`来说`_HEADER_`是不好的选择。不应使用下划线后跟大写字母。更多信息：[在 C++ 标识符中使用下划线的规则是什么？](https://stackoverflow.com/questions/228783/what-are-the-rules-about-using-an-underscore-in-a-c-identifier)

# web-services - 无法从 Web 服务初始化 SpringHibernateFactory

> ID：15214733
> 
> 赞同：1
> 
> 时间：2013-03-05T02:23:27.120
> 
> 标签：web-services, spring, hibernate, jakarta-ee, struts

我有一个使用 Struts 1.3 + Spring 3.1 + Hibernate 4.0 的动态 web 应用程序，并且在尝试从 web 项目中使用它时一切正常。当我创建一个添加到 EAR 的 WebLogic Web 服务以及一个要使用的 Web 服务客户端并尝试从数据库中检索 java 对象时，我得到：**无法初始化类 com.multivision.ehrms.crud.impl.SpringHibernateFactory**

```
AxisFault
 faultCode: {http://schemas.xmlsoap.org/soap/envelope/}Server
 faultSubcode: 
 faultString: Could not initialize class com.multivision.ehrms.crud.impl.SpringHibernateFactory
 faultActor: 
 faultNode: 
 faultDetail: 
    {http://jax-ws.dev.java.net/}exception:<message>Could not initialize class com.multivision.ehrms.crud.impl.SpringHibernateFactory</message><ns2:stackTrace><ns2:frame class="com.multivision.ehrms.service.data.BaseDataService" line="unknown" method="getDataRetriever"/><ns2:frame class="com.multivision.crm.service.data.QueryDataService" line="unknown" method="retrieveAllQueries"/><ns2:frame class="com.multivision.crm.ws.CRMdata" file="CRMdata.java" line="22" method="retrieveAll"/><ns2:frame class="sun.reflect.NativeMethodAccessorImpl" file="NativeMethodAccessorImpl.java" line="native" method="invoke0"/><ns2:frame class="sun.reflect.NativeMethodAccessorImpl" file="NativeMethodAccessorImpl.java" line="39" method="invoke"/><ns2:frame class="sun.reflect.DelegatingMethodAccessorImpl" file="DelegatingMethodAccessorImpl.java" line="25" method="invoke"/><ns2:frame class="java.lang.reflect.Method" file="Method.java" line="597" method="invoke"/><ns2:frame class="weblogic.wsee.jaxws.WLSInstanceResolver$WLSInvoker" file="WLSInstanceResolver.java" line="92" method="invoke"/><ns2:frame class="weblogic.wsee.jaxws.WLSInstanceResolver$WLSInvoker" file="WLSInstanceResolver.java" line="74" method="invoke"/><ns2:frame class="com.sun.xml.ws.server.InvokerTube$2" file="InvokerTube.java" line="151" method="invoke"/><ns2:frame class="com.sun.xml.ws.server.sei.EndpointMethodHandlerImpl" file="EndpointMethodHandlerImpl.java" line="268" method="invoke"/><ns2:frame class="com.sun.xml.ws.server.sei.SEIInvokerTube" file="SEIInvokerTube.java" line="100" method="processRequest"/><ns2:frame class="com.sun.xml.ws.api.pipe.Fiber" file="Fiber.java" line="866" method="__doRun"/><ns2:frame class="com.sun.xml.ws.api.pipe.Fiber" file="Fiber.java" line="815" method="_doRun"/><ns2:frame class="com.sun.xml.ws.api.pipe.Fiber" file="Fiber.java" line="778" method="doRun"/><ns2:frame class="com.sun.xml.ws.api.pipe.Fiber" file="Fiber.java" line="680" method="runSync"/><ns2:frame class="com.sun.xml.ws.server.WSEndpointImpl$2" file="WSEndpointImpl.java" line="403" method="process"/><ns2:frame class="com.sun.xml.ws.transport.http.HttpAdapter$HttpToolkit" file="HttpAdapter.java" line="532" method="handle"/><ns2:frame class="com.sun.xml.ws.transport.http.HttpAdapter" file="HttpAdapter.java" line="253" method="handle"/><ns2:frame class="com.sun.xml.ws.transport.http.servlet.ServletAdapter" file="ServletAdapter.java" line="140" method="handle"/><ns2:frame class="weblogic.wsee.jaxws.WLSServletAdapter" file="WLSServletAdapter.java" line="171" method="handle"/><ns2:frame class="weblogic.wsee.jaxws.HttpServletAdapter$AuthorizedInvoke" file="HttpServletAdapter.java" line="708" method="run"/><ns2:frame class="weblogic.security.acl.internal.AuthenticatedSubject" file="AuthenticatedSubject.java" line="363" method="doAs"/><ns2:frame class="weblogic.security.service.SecurityManager" file="SecurityManager.java" line="146" method="runAs"/><ns2:frame class="weblogic.wsee.util.ServerSecurityHelper" file="ServerSecurityHelper.java" line="103" method="authenticatedInvoke"/><ns2:frame class="weblogic.wsee.jaxws.HttpServletAdapter$3" file="HttpServletAdapter.java" line="311" method="run"/><ns2:frame class="weblogic.wsee.jaxws.HttpServletAdapter" file="HttpServletAdapter.java" line="336" method="post"/><ns2:frame class="weblogic.wsee.jaxws.JAXWSServlet" file="JAXWSServlet.java" line="95" method="doRequest"/><ns2:frame class="weblogic.servlet.http.AbstractAsyncServlet" file="AbstractAsyncServlet.java" line="99" method="service"/><ns2:frame class="javax.servlet.http.HttpServlet" file="HttpServlet.java" line="820" method="service"/><ns2:frame class="weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction" file="StubSecurityHelper.java" line="227" method="run"/><ns2:frame class="weblogic.servlet.internal.StubSecurityHelper" file="StubSecurityHelper.java" line="125" method="invokeServlet"/><ns2:frame class="weblogic.servlet.internal.ServletStubImpl" file="ServletStubImpl.java" line="300" method="execute"/><ns2:frame class="weblogic.servlet.internal.ServletStubImpl" file="ServletStubImpl.java" line="183" method="execute"/><ns2:frame class="weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction" file="WebAppServletContext.java" line="3717" method="wrapRun"/><ns2:frame class="weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction" file="WebAppServletContext.java" line="3681" method="run"/><ns2:frame class="weblogic.security.acl.internal.AuthenticatedSubject" file="AuthenticatedSubject.java" line="321" method="doAs"/><ns2:frame class="weblogic.security.service.SecurityManager" file="SecurityManager.java" line="120" method="runAs"/><ns2:frame class="weblogic.servlet.internal.WebAppServletContext" file="WebAppServletContext.java" line="2277" method="securedExecute"/><ns2:frame class="weblogic.servlet.internal.WebAppServletContext" file="WebAppServletContext.java" line="2183" method="execute"/><ns2:frame class="weblogic.servlet.internal.ServletRequestImpl" file="ServletRequestImpl.java" line="1454" method="run"/><ns2:frame class="weblogic.work.ExecuteThread" file="ExecuteThread.java" line="209" method="execute"/><ns2:frame class="weblogic.work.ExecuteThread" file="ExecuteThread.java" line="178" method="run"/></ns2:stackTrace>

Could not initialize class com.multivision.ehrms.crud.impl.SpringHibernateFactory
    at org.apache.axis.message.SOAPFaultBuilder.createFault(SOAPFaultBuilder.java:222)
    at org.apache.axis.message.SOAPFaultBuilder.endElement(SOAPFaultBuilder.java:129)
    at org.apache.axis.encoding.DeserializationContext.endElement(DeserializationContext.java:1087)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.endElement(AbstractSAXParser.java:601)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanEndElement(XMLDocumentFragmentScannerImpl.java:1782)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2938)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:648)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:140)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:511)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:808)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:737)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:119)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1205)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:522)
    at javax.xml.parsers.SAXParser.parse(SAXParser.java:395)
    at org.apache.axis.encoding.DeserializationContext.parse(DeserializationContext.java:227)
    at org.apache.axis.SOAPPart.getAsSOAPEnvelope(SOAPPart.java:696)
    at org.apache.axis.Message.getSOAPEnvelope(Message.java:435)
    at org.apache.axis.handlers.soap.MustUnderstandChecker.invoke(MustUnderstandChecker.java:62)
    at org.apache.axis.client.AxisClient.invoke(AxisClient.java:206)
    at org.apache.axis.client.Call.invokeEngine(Call.java:2784)
    at org.apache.axis.client.Call.invoke(Call.java:2767)
    at org.apache.axis.client.Call.invoke(Call.java:2443)
    at org.apache.axis.client.Call.invoke(Call.java:2366)
    at org.apache.axis.client.Call.invoke(Call.java:1812)
    at com.multivision.crm.ws.CRMdataPortBindingStub.retrieveAll(CRMdataPortBindingStub.java:176)
    at com.multivision.crm.ws.DataConsumer.main(DataConsumer.java:12) 
```

就像我说的，SpringHibernateFactory 在使用 web 项目时初始化没有问题，但是当我使用 web 服务和客户端公开项目时，SpringHibernateFactory 无法初始化。任何人都可以理解这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T08:38:06.683

服务器启动时您的 spring 上下文是否启动？你能在你的控制台中找到这种输出吗？

```
[ContextLoader ]  Root WebApplicationContext: initialization started
[XmlWebApplicationContext ]  Refreshing Root WebApplicationContext: startup date [Tue Mar 05 09:34:47 CET 2013]; root of context hierarchy
[XmlBeanDefinitionReader ]  Loading XML bean definitions from class path resource [applicationContext.xml] 
```

尝试将其添加到您的 web.xml 中，否则

```
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener> 
```

与您的问题没有链接，但是如果您使用的是 spring，为什么要使用 java EE 服务器？Tomcat 应该足够了，如果你真的需要一个 Java EE 服务器然后使用 CDI 和 EJB 容器而不是 spring

# ruby-on-rails - 将“订单”添加到模型中定义的范围

> ID：15214734
> 
> 赞同：0
> 
> 时间：2013-03-05T02:23:32.117
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, rails-activerecord

在我的 Test.rb 模型中，我有一个这样的范围：

```
#....
has_many fathers
scope :msr, includes(fathers: :kids) 
```

表/模型它的`kids`自我假设有一个名为的列`finger`

在控制器中，我正在使用这样的查询：

```
 @tests = Test.msr.where(organization_id: params[:id]).limit(3) 
```

我想添加一个“订单”子句，这样我就可以按每个孩子的手指数进行排序。但不确定在哪里以及如何添加“订单”条款？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T02:47:41.250

尝试

```
scope :ordered_by_kid_fingers, order('kids.fingers DESC') 
```

这是假设您通过左右加载`joins`关联`includes`

```
>> Test.joins(fathers: :kids).ordered_by_kid_fingers 
```

应该管用

更新：在范围内定义两者

```
scope :msr, includes(fathers: :kids).order('kids.fingers DESC') 
```

# algorithm - 基于网格的线优化

> ID：15214740
> 
> 赞同：1
> 
> 时间：2013-03-05T02:24:04.837
> 
> 标签：algorithm, optimization, line, trace, polyline

将基于网格的点云（如第一张图像）优化为类似于第二张图像的最佳方法是什么？ ![基于网格的封闭点云](../Images/71f904baedbb571b500f5c5fa3d90530.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:59:43.023

我会尝试用“右手在墙上”算法跟踪边缘来编码。该算法不仅会产生坐标对，而且会产生一个连接/闭环，它可以表示为一个字符串：“URUURUURUURRDDRDDDRDD”......如上，右，下，......最后是左，上，...... 。 ETC。

接下来是定位边缘点。例如，在所有 Ups 和 Downs 之间以及每个 Left 和 Right 之间必须有某个边缘点：哪个像素/点距离 (U)RUURUURUUR_RDDRDDDDRD(D) 之间绘制的线最远？我的候选人在“_”附近；

选择类似的技术，现在可以在 (U)RUURUURUUR(_) 之间画一条假想线，并检查所有中间坐标是否在距离该线 1/2 像素的范围内；如果不是，请继续细分离线最远的点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T04:46:32.143

我建议您使用所谓的`Simplify`例程来执行此操作。就个人而言，我会推荐[RDP 线简化算法](http://en.wikipedia.org/wiki/Ramer%E2%80%93Douglas%E2%80%93Peucker_algorithm)。有许多实现作为示例代码或在开源和闭源应用程序中可用。您也许可以仅从维基百科上的伪代码编写自己的代码。与 wiki 页面链接的是[javascript 中的这个实现](http://karthaus.nl/rdp/js/rdp.js)，[以及它的使用示例](http://karthaus.nl/rdp/)。如果您正在使用任何计算几何库或 GIS 库，几乎可以肯定它包含在其中。

# javascript - JSON 编码失败

> ID：15214742
> 
> 赞同：-2
> 
> 时间：2013-03-05T02:24:30.397
> 
> 标签：javascript, ajax, json

PHP页面：

```
<?php

include "linkpassword.inc";

function showVotes()
{
 $showresult = mysql_query("SELECT * from mms") or die("Invalid query: " . mysql_error());
 $row = mysql_fetch_assoc($showresult);
}

function addVote() 
{
 $sql= "UPDATE mms SET votes = votes+1 WHERE color = '".$_POST['color']."'";
 $result= mysql_query($sql) or die(mysql_error());
 return $result;
}

addVote();
showVotes();

?> 
```

我正在尝试将数组的输出加载到 JavaScript 页面中，在该页面中我可以将数组分解为单独的 div，这些 div 具有分配给它们的 ID。这是我尝试过的

```
<script>
$(document).ready(function () {
    $('.answer').click(function (e) {
        var color = $(this).attr("data-color");
        $.ajax({
            type: 'POST',
            url: 'mm.php',
            data: { color: color},
            dataType: 'json',
            cache: false,
            success: function(showVotes) {
                $('#rvotes').html(showVotes[0]);
            },
            error: function (jqXHR) {
            }
        })
    })
});
</script> 
```

我哪里错了？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T02:54:15.800

从您在评论中发布的内容来看，您所拥有的是一组对象.. 而不是 html，正如您的函数所表明的那样。根据您想要完成的操作，答案将是以下之一，以访问该对象的属性：

```
showVotes[0].votes 
```

或者

```
showVotes[0]['votes'] 
```

例如：

```
$('#rvotes').html(showVotes[0].votes); 
```

或者等等。

**第二次尝试：**

首先，将您当前的“showVotes”功能更改为：

```
function showVotes()
{
 $showresult = mysql_query("SELECT * from mms") or die("Invalid query: " . mysql_error());
 while ($row = mysql_fetch_assoc($showresult)) {
     $response[] = $row;
 }
 return json_encode($response);
} 
```

其次，从页面中删除您的“连接成功”文本，以及由其他任何内容生成的任何其他文本（也就是返回结果指针的另一个函数）。我可能错了，但在我看来，其他文本的生成导致返回的 json 被解释为格式错误。

**关于 PDO 的快速解释：**

```
try {
    $dbh = new PDO("mysql:host=localhost;dbname=dbname", "user", "password");
    $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
} catch (\PDOException $e) {
    echo "Error!  Could not connect to database: " . $e->getMessage() . "<br/>";
    die();
} 
```

连接到数据库..这就是我学会的方法，尽管我被警告（并且反对）不要以这种方式检查错误，尽管从未解释过为什么。

数据库交互：

```
$stmt = $dbh->prepare("UPDATE mms SET votes = votes+1 WHERE color = :color");
$stmt->bindParam(":color",$_POST['color']);
$stmt->execute(); 
```

结果使用：

```
while ($row = $stmt->fetch(PDO::FETCH_ASSOC)) {
    $response[] = $row;
} 
```

等等等等。PDO 为您转义值，因此您不必担心注入攻击。

# java - 仅使用 Twitter4j 搜索带有图片/媒体的推文

> ID：15214747
> 
> 赞同：1
> 
> 时间：2013-03-05T02:24:52.047
> 
> 标签：java, twitter4j

我正在尝试找到一种方法来搜索具有特定主题标签的推文和只有图片/媒体的推文。

正在搜索主题标签：

步骤1

```
Twitter twitter = new TwitterFactory(cb.build()).getInstance();
Query query = new Query("#test");
query.setResultType(Query.RECENT);
query.setRpp(100);
QueryResult result = twitter.search(query); 
```

......

但是，这会返回所有最新的推文，最多 100 条带有标签“test”的推文。然后我必须用媒体过滤那些

第2步

循环浏览推文并获取带有媒体/图片的推文

我想跳过第 2 步并告诉查询只检索带有媒体的那些。这可能吗...我对那些有照片的人特别感兴趣。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-23T23:25:34.740

我知道这已经很长时间了，但这可能会帮助其他想要了解答案的人。

```
List<twitter4j.Status> tweets=result.getTweets();
for(twitter4j.Status tweet : tweets){                       
    if(tweet.getMediaEntities().length!=0){//If there is media in a tweet
        //Do anything you want with image 
        //tweet.getMediaEntities()[0].getMediaURL() is url of image in a tweet. For example:
        publishProgress(tweet.getMediaEntities()[0].getMediaURL());
        //Log.d(TAG, tweet.getMediaEntities()[0].getMediaURL()));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T14:22:51.643

我知道这有点晚了，但请尝试在搜索中包含“pic.twitter.com”。这不会包含所有图片，但您也可以添加其他网址。

# php - 如何在 Wordpress 中的自定义帖子下显示自定义存档页面？

> ID：15214749
> 
> 赞同：0
> 
> 时间：2013-03-05T02:25:13.710
> 
> 标签：php, wordpress, gallery, custom-post-type, portfolio

我正在我的 Wordpress 作品集网站上工作，并为我的作品集部分创建了一个自定义帖子类型。当用户点击我的投资组合链接时，它会将他们带到显示我所有项目的画廊的archive-portfolio.php，当他们点击一个项目时，它会将他们带到显示相关项目的single-portfolio.php。

一切都在按应有的方式工作并且样式正确，但是现在我希望将位于 archive-portfolio.php 上的画廊也显示在位于 single-portfolio.php 上的每个项目下，从而使项目之间的导航变得容易. 如果当它显示画廊时，用户所在项目的链接被排除在画廊之外，那也很棒。

我试过插入

```
<?php wp_get_archives(); ?> 
```

到我的 single-portfolio.php 模板中，但我似乎无法让它按我想要的方式工作。我无法让它抓取我的自定义帖子，它只会显示一个链接到我的常规帖子的月份链接。我需要它来显示我的自定义帖子和archive-portfolio.php 上的图库。（基本上我只是想将archive-portfolio.php插入到single-portfolio.php内容下的single-portfolio.php中）

这是我的第一个 Wordpress 网站，我正在自己学习。我试过自己寻找解决方案，但我发现的一切似乎都只是关于如何创建自定义帖子类型，我已经想通了。我仍在本地开发我的网站，这就是为什么我现在无法链接到它，但为了让您了解我的目标，您可以查看这个使用 Cargo 制作的网站：

[http://www.timboelaars.nl/help-ink](http://www.timboelaars.nl/help-ink "这是我要做什么的一个例子")

基本上，我想要与示例站点相同的功能；我只是希望画廊在项目下显示。

像往常一样，任何帮助将不胜感激！几天来，我一直在努力寻找解决方案，并且一直在避免它，但是该站点几乎完成了，再也无法避免了。我真的可以在这方面使用一些帮助。提前致谢！

*（编辑：根据下面的评论要求，这是我的自定义 php 文件的样子）*

## 存档-portfolio.php：

```
<!-- get_header -->
<?php get_header(); ?>
<!-- END get_header -->         

            <!-- #content -->
            <div id="content">

                <!-- #inner-content -->
                <div id="inner-content" class="wrap clearfix">

                    <!-- #main -->
                    <div id="main" class="twelvecol first clearfix" role="main">

                        <!-- have_posts -->
                        <?php if (have_posts()) : while (have_posts()) : the_post(); ?>

                        <!-- article -->
                        <article id="post-<?php the_ID(); ?>" <?php post_class(); ?> role="article">

                            <!-- .entry-content -->
                            <section class="entry-content clearfix portfolio-gallery">

                                <!-- PORTFOLIO PROJECT LINK -->
                                <a href="<?php the_permalink() ?>">

                                    <!-- .portfolio-project -->
                                    <figure class="portfolio-project">

                                        <!-- custom header -->
                                        <header class="portfolio-project-title">
                                            <h1 class="bigtext">
                                                <div>
                                                    <?php
                                                        global $post;
                                                            $text = get_post_meta( $post->ID, 'juroto_custom_header', true );
                                                        echo $text;
                                                    ?>
                                                </div>
                                            </h1>                                   
                                        </header> <!-- END custom header -->                                    

                                        <!-- the_excerpt -->
                                        <figcaption class="portfolio-project-excerpt">
                                            <?php the_excerpt(); ?>
                                        </figcaption> <!-- END the_excerpt -->

                                        <!-- .black-filter -->
                                        <div class="black-filter"></div>
                                        <!-- END .black-filter -->

                                        <!-- featured image -->
                                        <?php
                                            if ( has_post_thumbnail() ) { // check if the post has a Post Thumbnail assigned to it.
                                                the_post_thumbnail('thumbnail-bw', array('class'=>'bw-image-fade'));
                                                the_post_thumbnail('thumbnail');
                                            } 
                                        ?> <!-- END featured image -->

                                    </figure> <!-- END .portfolio-project -->

                                </a> <!-- END PORTFOLIO PROJECT LINK -->

                            </section> <!-- END .entry-content -->

                        </article> <!-- END article -->

                        <?php endwhile; ?> <!-- END have_posts -->

                        <?php else : ?>

                            <!-- #post-not-found -->
                            <article id="post-not-found" class="hentry clearfix">
                                <header class="article-header">
                                    <h1><?php _e("Oops, Post Not Found!", "bonestheme"); ?></h1>
                                </header>
                                <section class="entry-content">
                                    <p><?php _e("Uh Oh. Something is missing. Try double checking things.", "bonestheme"); ?></p>
                                </section>
                                <footer class="article-footer">
                                    <p><?php _e("This is the error message in the custom posty type archive template.", "bonestheme"); ?></p>
                                </footer>
                            </article>

                        <?php endif; ?> <!-- END #post-not-found -->

                    </div> <!-- END #main -->

                </div> <!-- END #inner-content -->

            </div> <!-- END #content -->

<!-- get_footer -->
<?php get_footer(); ?>
<!-- END get_footer --> 
```

基本上，我想将调用每篇文章（或我称之为投资组合项目）的循环插入到正在显示的项目下的 single-portfolio.php 中。这是 single-portfolio.php 的样子。

## 单portfolio.php：

```
<!-- get_header -->
<?php get_header(); ?>
<!-- END get_header -->

            <!-- #content -->
            <div id="content">

                <!-- #inner-content -->
                <div id="inner-content" class="wrap clearfix">

                    <!-- #main -->
                    <div id="main" class="twelvecol first clearfix" role="main">

                        <!-- have_posts -->
                        <?php if (have_posts()) : while (have_posts()) : the_post(); ?>

                        <!-- article -->
                        <article id="post-<?php the_ID(); ?>" <?php post_class('clearfix'); ?> role="article">

                            <!-- .article-header -->
                            <header class="article-header">

                                <!-- .bigtext -->
                                <h1 class="bigtext">
                                    <div>
                                        <!-- the_title -->
                                        <?php the_title(); ?>
                                        <!-- END the_title -->
                                    </div>
                                </h1> <!-- END .bigtext -->

                            </header> <!-- END article header -->

                            <!-- .entry-content -->
                            <section class="entry-content clearfix">

                                <!-- GALLERY -->                                
                                <?php
                                    $jurotos_gallery = array( 
                                        // OPTIONS FOR THE GALLERY 
                                        'numberposts'       => -1, // Using -1 loads all posts or in this case images  
                                        'orderby'           => 'menu_order', // This ensures images are in the order set in the page media manager. To change the order of the images go to the post, click add media, click the drop down menu, select uploaded to this post, and just drag and drop the images in the order you want them to appear. When you're done just close the media manager, you don't need to update the post or insert image or anything.  
                                        'order'             => 'ASC', // ASC or DESC. ASC shows order as is in the media manager and DESC shows the reverse order (so the last image is first and so on)
                                        'post_mime_type'    => 'image', // Make sure it doesn't pull other resources, like videos  
                                        'post_parent'       => $post->ID, // *Important part - ensures the associated images are loaded 
                                        'post_status'       => null, 
                                        'post_type'         => 'attachment',
                                        'size'              => 'full',  // thumbnail, medium, large or full
                                        'include'           => '', // could choose to include something else
                                        'exclude'           => get_post_thumbnail_id( $post->ID ), // excludes thumbnail/featured image from being part of the gallery
                                    );  

                                    $images = get_children( $jurotos_gallery );
                                ?> 

                                <?php if($images){ ?>  
                                    <div class="flexslider">
                                        <ul class="slides">
                                            <?php foreach($images as $image){ ?>  
                                                <li>
                                                    <img src="<?php echo $image->guid; ?>" alt="<?php echo $image->post_title; ?>" title="<?php echo $image->post_title; ?>" />
                                                </li> 
                                            <?php } ?>
                                        </ul>  
                                    </div>  
                                <?php } ?>                              
                                <!-- END GALLERY -->  

                                <!-- the_content -->
                                <div id="accordion">
                                    <h3>Brief</h3>
                                        <div class="juroto-text-columns">
                                            <?php the_content(); ?>
                                        </div>
                                </div>
                                <!-- END the_content -->

                            </section> <!-- END .entry-content -->

                        </article> <!-- END article -->

                        <?php endwhile; ?> <!-- END have_posts -->          

                        <?php else : ?>

                            <!-- #post-not-found -->
                            <article id="post-not-found" class="hentry clearfix">
                                <header class="article-header">
                                    <h1><?php _e("Oops, Post Not Found!", "bonestheme"); ?></h1>
                                </header>
                                <section class="entry-content">
                                    <p><?php _e("Uh Oh. Something is missing. Try double checking things.", "bonestheme"); ?></p>
                                </section>
                                <footer class="article-footer">
                                    <p><?php _e("This is the error message in the single-portfolio.php template.", "bonestheme"); ?></p>
                                </footer>
                            </article>

                        <?php endif; ?> <!-- END #post-not-found -->

                    </div> <!-- END #main -->

                </div> <!-- END #inner-content -->

            </div> <!-- END #content -->

<!-- get_footer -->
<?php get_footer(); ?>
<!-- END get_footer --> 
```

*（编辑：下面是archive-portfolio.php循环的摘录，它显示了我所有的自定义投资组合帖子。我将这些帖子安排和样式看起来像帖子/项目的画廊。这就是我想要展示的当您在由 single-portfolio.php 显示的帖子/项目页面上时，在帖子/项目下。基本上我需要有这个循环来收集所有自定义帖子并将其排列到单个组合中的画廊中。 php 在 single-portfolio.php 中的循环下收集特定帖子/项目的信息，但我不知道该怎么做。是否有类似的代码：*

```
<?php get_archive-portfolio(); ?> 
```

*我可以在 single-portfolio.php 中使用来显示自定义帖子的画廊吗？）*

## 从显示投资组合库的 archive-portfolio.php 循环：

```
<!-- have_posts -->
<?php if (have_posts()) : while (have_posts()) : the_post(); ?>

<!-- article -->
<article id="post-<?php the_ID(); ?>" <?php post_class(); ?> role="article">

    <!-- .entry-content -->
    <section class="entry-content clearfix portfolio-gallery">

        <!-- PORTFOLIO PROJECT LINK -->
        <a href="<?php the_permalink() ?>">

            <!-- .portfolio-project -->
            <figure class="portfolio-project">

                <!-- custom header -->
                <header class="portfolio-project-title">
                    <h1 class="bigtext">
                        <div>
                            <?php
                                global $post;
                                    $text = get_post_meta( $post->ID, 'juroto_custom_header', true );
                                echo $text;
                            ?>
                        </div>
                    </h1>                                   
                </header> <!-- END custom header -->                                    

                <!-- the_excerpt -->
                <figcaption class="portfolio-project-excerpt">
                    <?php the_excerpt(); ?>
                </figcaption> <!-- END the_excerpt -->

                <!-- .black-filter -->
                <div class="black-filter"></div>
                <!-- END .black-filter -->

                <!-- featured image -->
                <?php
                    if ( has_post_thumbnail() ) { // check if the post has a Post Thumbnail assigned to it.
                        the_post_thumbnail('thumbnail-bw', array('class'=>'bw-image-fade'));
                        the_post_thumbnail('thumbnail');
                    } 
                ?> <!-- END featured image -->

            </figure> <!-- END .portfolio-project -->

        </a> <!-- END PORTFOLIO PROJECT LINK -->

    </section> <!-- END .entry-content -->

</article> <!-- END article -->

<?php endwhile; ?> <!-- END have_posts -->

<?php else : ?>

    <!-- #post-not-found -->
    <article id="post-not-found" class="hentry clearfix">
        <header class="article-header">
            <h1><?php _e("Oops, Post Not Found!", "bonestheme"); ?></h1>
        </header>
        <section class="entry-content">
            <p><?php _e("Uh Oh. Something is missing. Try double checking things.", "bonestheme"); ?></p>
        </section>
        <footer class="article-footer">
            <p><?php _e("This is the error message in the custom posty type archive template.", "bonestheme"); ?></p>
        </footer>
    </article>

<?php endif; ?> <!-- END #post-not-found --> 
```

*（编辑：下面是portfolio.php，它是我的Wordpress主题中的一个函数文件，它创建我的自定义帖子类型：'portfolio'，为其存储数据，并在我的管理区域创建一个投资组合部分。这个文件还创建自定义自定义帖子类型的分类，并定义在其存档页面上每页将显示多少自定义帖子类型，我将其设置为所有自定义帖子。我将此文件与我的主题函数文件分开以使其更有条理.)*

## 投资组合.php 功能：

```
<?php
/****************************************
Creates Portfolio section in the admin 
area and custom posts called Projects
*****************************************/

function create_portfolio_section() { 
    // creating (registering) the custom type 
    register_post_type( 'portfolio', /* (http://codex.wordpress.org/Function_Reference/register_post_type) *IMPORTANT: If you change this, remember to resave/update permalinks from Wordpress admin menu under Setting/Permalinks for the page to display properly. Forgetting to do this will most likely lead you to the 404 error page */
        // All the options for this post type
        array('labels' => array(
            'name' => __('Portfolio', 'bonestheme'), /* This is the Title of the Group */
            'singular_name' => __('Project', 'bonestheme'), /* This is the individual type */
            'all_items' => __('All Projects', 'bonestheme'), /* the all items menu item */
            'add_new' => __('Add New Project', 'bonestheme'), /* The add new menu item */
            'add_new_item' => __('Add New Project', 'bonestheme'), /* Add New Display Title */
            'edit' => __( 'Edit Project', 'bonestheme' ), /* Edit Dialog */
            'edit_item' => __('Edit Project', 'bonestheme'), /* Edit Display Title */
            'new_item' => __('New Project', 'bonestheme'), /* New Display Title */
            'view_item' => __('View Project', 'bonestheme'), /* View Display Title */
            'search_items' => __('Search Project', 'bonestheme'), /* Search Project Title */ 
            'not_found' =>  __('No Projects found', 'bonestheme'), /* This displays if there are no entries yet */ 
            'not_found_in_trash' => __('No Projects found in the Trash', 'bonestheme'), /* This displays if there is nothing in the trash */
            'parent_item_colon' => ''
            ), /* end of arrays */
            'description' => __( 'This is a Portfolio Project', 'bonestheme' ), /* Project Description */
            'public' => true,
            'publicly_queryable' => true,
            'exclude_from_search' => false,
            'show_ui' => true,
            'query_var' => true,
            'menu_position' => 5, /* this is what order you want it to appear in on the left hand side menu */ 
            'menu_icon' => get_stylesheet_directory_uri() . '/library/images/custom-post-icon.png', /* the icon for the custom post type menu */
            'rewrite'   => array( 'slug' => 'portfolio', 'with_front' => false ), /* you can specify its url slug *IMPORTANT: If you change this, remember to resave/update permalinks from Wordpress admin menu under Setting/Permalinks for the page to display properly. Forgetting to do this will most likely lead you to the 404 error page */
            'has_archive' => 'portfolio', /* you can rename the slug here *IMPORTANT: If you change this, remember to resave/update permalinks from Wordpress admin menu under Setting/Permalinks for the page to display properly. Forgetting to do this will most likely lead you to the 404 error page */
            'capability_type' => 'post',
            'hierarchical' => false,
            /* the next one is important, it tells what's enabled in the post editor */
            'supports' => array( 'title', 'editor', 'author', 'thumbnail', 'excerpt', 'trackbacks', 'custom-fields', 'comments', 'revisions', 'sticky')
        ) /* end of options */
    ); /* end of register post type */

    /* this adds your post categories to the Portfolio section */
    register_taxonomy_for_object_type('category', 'portfolio');
    /* this adds your post tags to the Portfolio section */
    register_taxonomy_for_object_type('post_tag', 'portfolio');

} 

    // adding the function to the Wordpress init
    add_action( 'init', 'create_portfolio_section');

    /*
    for more information on taxonomies, go here:
    http://codex.wordpress.org/Function_Reference/register_taxonomy
    */

    // this adds Portfolio Categories to the Portfolio section
    register_taxonomy( 'portfolio_cat', 
        array('portfolio'), /* if you change the name of register_post_type( 'portfolio', then you have to change this */
        array('hierarchical' => true,     /* if this is true, it acts like categories */             
            'labels' => array(
                'name' => __( 'Portfolio Categories', 'bonestheme' ), /* name of the custom taxonomy */
                'singular_name' => __( 'Portfolio Category', 'bonestheme' ), /* single taxonomy name */
                'search_items' =>  __( 'Search Portfolio Categories', 'bonestheme' ), /* search title for taxomony */
                'all_items' => __( 'All Portfolio Categories', 'bonestheme' ), /* all title for taxonomies */
                'parent_item' => __( 'Parent Portfolio Category', 'bonestheme' ), /* parent title for taxonomy */
                'parent_item_colon' => __( 'Parent Portfolio Category:', 'bonestheme' ), /* parent taxonomy title */
                'edit_item' => __( 'Edit Portfolio Category', 'bonestheme' ), /* edit custom taxonomy title */
                'update_item' => __( 'Update Portfolio Category', 'bonestheme' ), /* update title for taxonomy */
                'add_new_item' => __( 'Add New Portfolio Category', 'bonestheme' ), /* add new title for taxonomy */
                'new_item_name' => __( 'New Portfolio Category Name', 'bonestheme' ) /* name title for taxonomy */
            ),
            'show_admin_column' => true, 
            'show_ui' => true,
            'query_var' => true,
            'rewrite' => array( 'slug' => 'custom-slug' ),
        )
    );   

    // this adds Portfolio Tags to the Portfolio section
    register_taxonomy( 'portfolio_tag', 
        array('portfolio'), /* if you change the name of register_post_type( 'portfolio', then you have to change this */
        array('hierarchical' => false,    /* if this is false, it acts like tags */                
            'labels' => array(
                'name' => __( 'Portfolio Tags', 'bonestheme' ), /* name of the custom taxonomy */
                'singular_name' => __( 'Portfolio Tag', 'bonestheme' ), /* single taxonomy name */
                'search_items' =>  __( 'Search Portfolio Tags', 'bonestheme' ), /* search title for taxomony */
                'all_items' => __( 'All Portfolio Tags', 'bonestheme' ), /* all title for taxonomies */
                'parent_item' => __( 'Parent Portfolio Tag', 'bonestheme' ), /* parent title for taxonomy */
                'parent_item_colon' => __( 'Parent Portfolio Tag:', 'bonestheme' ), /* parent taxonomy title */
                'edit_item' => __( 'Edit Portfolio Tag', 'bonestheme' ), /* edit custom taxonomy title */
                'update_item' => __( 'Update Portfolio Tag', 'bonestheme' ), /* update title for taxonomy */
                'add_new_item' => __( 'Add New Portfolio Tag', 'bonestheme' ), /* add new title for taxonomy */
                'new_item_name' => __( 'New Portfolio Tag Name', 'bonestheme' ) /* name title for taxonomy */
            ),
            'show_admin_column' => true,
            'show_ui' => true,
            'query_var' => true,
        )
    ); 

    /*
        looking for custom meta boxes?
        check out this fantastic tool:
        https://github.com/jaredatch/Custom-Metaboxes-and-Fields-for-WordPress
    */

// Custom Posts Per Page
function portfolio_posts_per_page($query)
{
    switch ( $query->query_vars['post_type'] )
    {
        case 'portfolio':  // Post Type named 'portfolio'
            $query->query_vars['posts_per_page'] = -1; // -1 makes all posts shown on one page, positive numbers show that number of posts per page.
            break;

        // If you have more custom post types and you want to have the posts per page different than the journal/blog settings copy and past the code above and assign proper post type name and desired posts per page
        // EXAMPLE
        /*
        case '<insert post type name here>':  // Post Type named 'portfolio'
            $query->query_vars['posts_per_page'] = <insert desiered posts per page number here>; // -1 makes all posts shown on one page, positive numbers show that number of posts per page.
            break;
        */

        default:
            break;
    }
    return $query;
}

if( !is_admin() )
{
    add_filter( 'pre_get_posts', 'portfolio_posts_per_page' );
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T04:11:36.167

您正在尝试在单个帖子下方包含一个存档模板，列出多个帖子。为此，您需要运行多个循环——一个用于您的主帖子，一个用于下面的帖子列表。该法典有关于[多个循环](http://codex.wordpress.org/The_Loop#Multiple_Loops)的信息。

（**编辑：**不要使用如下所述的*query_posts*，因为它会改变可能导致问题的主 post 循环，正如 Brad Dalton 在评论中指出的那样。改用新的*WP_Query 对象*。代码与我描述的代码非常相似下面。[阅读更多](http://stephenharris.info/die-query_posts-die/)。）

首先，在主帖下方，通过创建一个新的 WP_Query 对象来查询其他~~帖子[`query_posts()`](http://codex.wordpress.org/Function_Reference/query_posts)~~的*列表*。[您可以在 codex](http://codex.wordpress.org/Class_Reference/WP_Query#Parameters)中找到有关如何查询您的帖子的信息。（您可能只想要帖子类型的投资组合，只需要发布的帖子等。）然后，使用[`get_template_part()`](http://codex.wordpress.org/Function_Reference/get_template_part)包含您的存档模板。最后，别忘了打电话`wp_reset_query()`。

```
query_posts('post_type=portfolio'); # Use WP_Query arguments accordingly
get_template_part('archive-portfolio');
wp_reset_query(); 
```

# ibm-mobilefirst - 未捕获的类型错误：无法使用“in”运算符在 null 中搜索“SUPPORT_COOKIES”

> ID：15214750
> 
> 赞同：2
> 
> 时间：2013-03-05T02:25:15.310
> 
> 标签：ibm-mobilefirst

我正在使用 IBM Worklight Developer Edition 5.0.5 来尝试创建简单的（HTML 和适配器）应用程序，但面临未解决的问题。

这可能是旧论坛中没有回答的相同问题： [http ://www.ibm.com/developerworks/forums/thread.jspa?threadID=460738](http://www.ibm.com/developerworks/forums/thread.jspa?threadID=460738)

**[环境]** OS：Windows7 64bit（日文语言环境），Eclipse：4.2.1，Worklight：Developer Edition 5.0.5

**[描述]** 我在 Eclipse 中创建了 Worklight Project，没有任何外部库，如 jQuery mobile 或 Dojo。我在这个项目中添加了 HTTP 适配器和 SQL 适配器。当我尝试“运行为 ..-> 调用 Worklight 过程”时，两者似乎都可以正常工作。两者都返回了预期的 JSON。所以我认为适配器不会有问题。

但是当我从 HTML 文件中调用这些适配器时，我在 worklight.js（行：2380）中出现**“未捕获的类型错误：无法使用 'in' 运算符在 null 中搜索 'SUPPORT_COOKIES'”错误。**

**[我的代码]**

> var invocationData = { 适配器：'SQLAdapter'，过程：'getCount'，参数：[] };
> 
> WL.Logger.debug("1: invocationData = " + invocationData);
> WL.Client.invokeProcedure(invocationData, { onSuccess: loadFeedsSuccess, onFailure: loadFeedsFailure });
> 
> WL.Logger.debug("2: loadFeeds");
> 
> 函数 loadFeedsSuccess( 结果 ){ WL.Logger.debug( "3: 成功: 结果 = " + 结果); }
> 
> function loadFeedsFailure(result){ WL.Logger.debug("4: failure: result = " + result); }

**[我的调试控制台输出]**

> 1：invocationData = [object Object] worklight.js:1112
> 
> 未捕获的类型错误：无法使用“in”运算符在 null worklight.js:2380 中搜索“SUPPORT_COOKIES”
> 
> wlclient init 启动 worklight.js:1112
> 
> 之前：app init onSuccess worklight.js:1112
> 
> 之后：app init onSuccess worklight.js:1112
> 
> wlclient 初始化成功

所以似乎只有第一个 WL.Logger.debug() 被成功调用，但 WL.Client.invokeProcedure() 似乎导致了**Uncaught TypeError**上面，它只是失败了（不调用成功案例回调，也不调用失败案例回调）。

这是一个 SQL Adapter 案例，但是当我尝试使用 HTTP Adapter 时，结果是一样的（在 WL.Client.invokeProcedure() 中失败）。同样，当我尝试“Run As .. -> Invoke Worklight Procedure”时，两者都会返回适当的结果。

我的控制台说这个失败发生在 worklight.js 的第 2380 行：

> 2379：isEnabled：功能（字段）{
> 
> 2380：返回!!（配置文件中的字段&&配置文件[字段]）；
> 
> 2381：}

所以我不知道我的代码会有什么问题。这个问题有什么想法/信息吗？感谢提前。

**添加** 了 Mac OSX 环境中也发生了相同的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T00:03:37.147

我找到了导致我的问题的原因。

访问适配器时，我直接在 HTML 文件中编辑了我的 javascript，使用自动生成的 <script> 标签最底部的 <script> 标签，并尝试创建初始页面。我认为这不是 Worklight 的合适方式。我不确定到底出了什么问题，但我的 javascript 代码可以在一切准备就绪之前加载。

现在我改变了我的代码。**我将以前位于 HTML 内部的 javascript 移动到 (Projectname).js 中 wlCommonInit() 函数的最底部**。目前它似乎工作正常，没有像以前那样的错误消息，并通过适配器检索预期信息。这可能是一种合适的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T06:35:47.600

*只应在调用 wlCommonInit 之后调用WL.Client.invokeProcedure*和*WL.Logger.debug*等 Worklight API 。

*wlCommonInit*驻留在应用程序的主 JavaScript 文件 (your-project\your-application\js\application-name.js) 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-08T09:39:37.987

要解决此类问题，我们需要检查何时调用第一个适配器调用。我们需要将适配器调用延迟几秒钟，例如 1000 毫秒。然后您的应用程序将按照您的喜好运行。

```
setTimeout(function(){
$(document).ready(function() {

    var invocationData = {
            adapter : 'Contract', 
            procedure : 'GetDropDownListForLogin'
    };
    console.log("Invocation data:" +invocationData);
    var options = {
            onSuccess : OnLogindataSucess,
            onFailure : OnLoginFail,
            };

    WL.Client.invokeProcedure(invocationData,options);

});

},1000); 
```

请使用以下方式为第一个适配器调用它将解决您的问题。

# ios - Web 服务接收空数据 iOS

> ID：15214751
> 
> 赞同：0
> 
> 时间：2013-03-05T02:25:21.593
> 
> 标签：ios, web-services, encoding, utf-8, nsurlconnection

我在使用网络服务时遇到了一个非常奇怪的情况

这是我的 Xcode 项目文件 [https://dl.dropbox.com/u/9507586/FubonTest.zip](https://dl.dropbox.com/u/9507586/FubonTest.zip)

我得到了来自服务器的响应，如下所示。

```
2013-03-04 15:56:18.473 FubonTest[1059:f803] 1: connection: didReceiveResponse
2013-03-04 15:56:18.473 FubonTest[1059:f803] 2: connection: didReceiveData
2013-03-04 15:56:18.699 FubonTest[1059:f803] 2: connection: didReceiveData
2013-03-04 15:56:18.699 FubonTest[1059:f803] 3: Done. Received Bytes: 1789
2013-03-04 15:56:18.700 FubonTest[1059:f803] Return (null) 
```

我确实收到了字节，但 xml 标记文件为空。服务器端的人告诉我他们使用 utf-8 编码，但它只是返回 null。如果我使用 ascii 编码，返回的数据不为空，但它不是我期望的 xml 标记文件。

正确返回的 xml 标记文件应如下所示。返回的 xml 标记文件正在使用 eclipse(window version) Web 服务功能。

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<soapenv:Body>
<ns1:RegistResponse xmlns:ns1="http://service.fubon.com" soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">
<RegistReturn xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xsi:type="soapenc:string">该用户未投保</RegistReturn> 
</ns1:RegistResponse>
</soapenv:Body>
</soapenv:Envelope> 
```

有人可以帮我解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T02:51:39.227

有一个拼写错误。在您的`ViewController.m`文件中，第 57 行：

改变`forHTTPHeaderField: @"Contnet-Type"];`

至`forHTTPHeaderField: @"Content-Type"];`

# ios - CGImageRef 或 CGImageMaskCreate 性能问题

> ID：15214752
> 
> 赞同：0
> 
> 时间：2013-03-05T02:25:28.337
> 
> 标签：ios, objective-c, xcode

想知道你们在使用如下代码时是否遇到过滚动性能问题。

```
- (UIImage *)maskImage:(UIImage *)image withMask:(UIImage *)maskImage
{
    CGImageRef maskRef = maskImage.CGImage;

    CGImageRef mask = CGImageMaskCreate(CGImageGetWidth(maskRef),
                                    CGImageGetHeight(maskRef),
                                    CGImageGetBitsPerComponent(maskRef),
                                    CGImageGetBitsPerPixel(maskRef),
                                    CGImageGetBytesPerRow(maskRef),
                                    CGImageGetDataProvider(maskRef), NULL, false);

    CGImageRef masked = CGImageCreateWithMask([image CGImage], mask);
    return [UIImage imageWithCGImage:masked];
} 
```

好的，所以基本上上面的代码正在做我从这个网站找到的图像屏蔽。

[http://iosdevelopertips.com/cocoa/how-to-mask-an-image.html#comment-47347](http://iosdevelopertips.com/cocoa/how-to-mask-an-image.html#comment-47347)

而且我已经成功地将它集成到我的项目中，这在滚动表格视图时给我带来了一些性能不佳的问题。

我怀疑是因为每次单元格都会保持“重新渲染”图像遮罩并导致性能不佳。

# jquery - 内容上的幻灯片效果

> ID：15214753
> 
> 赞同：0
> 
> 时间：2013-03-05T02:25:42.003
> 
> 标签：jquery, jquery-ui

大家好，我尝试同时隐藏和显示模态窗口的内容，

当我点击右下角时，我隐藏了当前的 id，并显示下一个 id。

这工作正常，但我希望对此进行效果幻灯片。

所以这是我点击右下角时的代码

```
$('#right').live('click', function(){
    var total=$('.elemento').length;
    var siguiente= parseInt(actual) +1;
    if (siguiente <= total){
        AlaDerecha(sig);

    }
}); 
```

和

```
function AlaDerecha(sig){
    previo = actual;
    actual = sig;
    $("[data-item ="+ previo + "]").hide("slide", { direction: "left" }, 1000);
    $("[data-item ="+ actual + "]").show("slide", { direction: "right" }, 1000);
} 
```

如果我像这样在 AlaDerecha 函数上擦除（滑动...）

```
function AlaDerecha(sig){
    previo = actual;
    actual = sig;
    $("[data-item ="+ previo + "]").hide();
    $("[data-item ="+ actual + "]").show();
} 
```

它工作正常，隐藏当前项目并显示下一个，但如果我设置幻灯片效果，当前项目向左移动但没有隐藏并且下一个项目不显示。

任何的想法！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T02:47:02.717

首先，不要使用`.live()`，因为它已被**弃用**，并且会在浏览器中产生不需要的结果。以这种方式更改代码：

```
$('body').on('click', '#right', function(){
    var total=$('.elemento').length;
    var siguiente= parseInt(actual) +1;
    if (siguiente <= total){
        AlaDerecha(sig);
    }
}); 
```

要使幻灯片正常工作，请使用回调函数。

```
function AlaDerecha(sig){
    previo = actual;
    actual = sig;
    $("[data-item ="+ previo + "]").hide("slide", { direction: "left" }, 1000, function(){
        $("[data-item ="+ actual + "]").show("slide", { direction: "right" }, 1000);
    });
} 
```

# mysql - 找不到适合 jdbc 的驱动程序：mysql://db4free.net:3306/partnerdb

> ID：15214755
> 
> 赞同：1
> 
> 时间：2013-03-05T02:25:48.213
> 
> 标签：mysql, spring, hibernate, spring-mvc, tomcat7

我正在尝试在 Mac OSX 平台下使用 JPA (MySQL DB) 和 Tomcat 7.0.28 创建示例 Spring 应用程序。我将**mysql-connector-java-5.1.22** jar 放在应用程序的**WEB-INF/lib**文件夹下。但是当我启动应用程序时，我收到标题中提到的错误。我也尝试将相同的 jar 放在**Tomcat lib**文件夹下，但出现相同的错误。

**当我使用域/lib/ext**文件夹下的驱动程序 jar 在 Glassfish 服务器中部署相同的应用程序时，应用程序工作正常。

***注意：** Glassfish 也抛出了同样的错误，但没有将驱动程序 jar 放在**domain/lib/ext**文件夹下。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:12:02.390

Does this [How to fix: "No suitable driver found for jdbc:mysql://localhost/dbname" error when using pools?](https://stackoverflow.com/questions/5556664/how-to-fix-no-suitable-driver-found-for-jdbcmysql-localhost-dbname-error-w) help ? Please check the second answer if you are connecting through program.

# sql-server - 拦截 SQL-TDS 协议中的特定列数据？

> ID：15214759
> 
> 赞同：1
> 
> 时间：2013-03-05T02:26:12.200
> 
> 标签：sql-server, freetds

据我了解，真正的 TDS 协议实现是微软专有的。我确实看到还有另一个库[http://freetds.schemamania.org/](http://freetds.schemamania.org/)。

如果我们必须在 TDS 级别截取、转换属于特定列（名称或类型）的所有数据，那么好的挂钩点是什么？拦截将用于读取和写入。由于我们希望不考虑查询结构来执行此操作，因此我们正在扫描足以在所有/大多数场景中工作的通用挂钩点。

背景：特殊列的转换不是特定于一个应用程序本身，而是跨越一整套使用 SQL Server（即 TDS）的无数应用程序。我们不相信 TDS 层是最好的层，但正在审查工程可行性/实用性。

# angularjs - 使用 templateUrl 对 AngularJS 指令进行单元测试

> ID：15214760
> 
> 赞同：122
> 
> 时间：2013-03-05T02:26:15.487
> 
> 标签：angularjs, angularjs-directive, jasmine

使用 AngularJS。

有一个指令。

指令定义`templateUrl`.

指令需要单元测试。

目前使用 Jasmine 进行单元测试。

[这](https://stackoverflow.com/questions/14761045/jasmine-tests-angularjs-directives-with-templateurl)推荐如下代码：

```
describe('module: my.module', function () {
    beforeEach(module('my.module'));

    describe('my-directive directive', function () {
        var scope, $compile;
        beforeEach(inject(function (_$rootScope_, _$compile_, $injector) {
            scope = _$rootScope_;
            $compile = _$compile_;
            $httpBackend = $injector.get('$httpBackend');
            $httpBackend.whenGET('path/to/template.html').passThrough();
        }));

        describe('test', function () {
            var element;
            beforeEach(function () {
                element = $compile(
                    '<my-directive></my-directive>')(scope);
                angular.element(document.body).append(element);
            });

            afterEach(function () {
                element.remove();
            });

            it('test', function () {
                expect(element.html()).toBe('asdf');
            });

        });
    });
}); 
```

在 Jasmine 中运行代码。

得到错误：

```
TypeError: Object #<Object> has no method 'passThrough' 
```

templateUrl 需要按原样加载

不能用`respond`

可能与[ngMock 的](http://docs.angularjs.org/api/ngMock.$httpBackend)使用有关，而不是[ngMockE2E 的](http://docs.angularjs.org/api/ngMockE2E.$httpBackend)使用。

* * *

## 回答 #1

> 赞同：186
> 
> 时间：2013-08-21T21:48:17.420

你是对的，它与 ngMock 有关。ngMock 模块会为每个 Angular 测试自动加载，它会初始化 mock`$httpBackend`以处理对`$http`服务的任何使用，包括模板获取。模板系统尝试通过加载模板`$http`，它成为模拟的“意外请求”。

您需要一种将模板预加载`$templateCache`到`$http`.

## 首选解决方案：业力

如果你使用[Karma](http://karma-runner.github.io/)来运行你的测试（你应该这样做），你可以将它配置为使用[ng-html2js](https://github.com/karma-runner/karma-ng-html2js-preprocessor)预处理器为你加载模板。Ng-html2js 读取您指定的 HTML 文件并将它们转换为一个 Angular 模块，该模块预加载`$templateCache`.

第 1 步：在您的系统中启用和配置预处理器`karma.conf.js`

```
// karma.conf.js

preprocessors: {
    "path/to/templates/**/*.html": ["ng-html2js"]
},

ngHtml2JsPreprocessor: {
    // If your build process changes the path to your templates,
    // use stripPrefix and prependPrefix to adjust it.
    stripPrefix: "source/path/to/templates/.*/",
    prependPrefix: "web/path/to/templates/",

    // the name of the Angular module to create
    moduleName: "my.templates"
}, 
```

如果您使用[Yeoman](https://github.com/yeoman/generator-angular)来搭建您的应用程序，则此配置将起作用

```
plugins: [ 
  'karma-phantomjs-launcher', 
  'karma-jasmine', 
  'karma-ng-html2js-preprocessor' 
], 

preprocessors: { 
  'app/views/*.html': ['ng-html2js'] 
}, 

ngHtml2JsPreprocessor: { 
  stripPrefix: 'app/', 
  moduleName: 'my.templates' 
}, 
```

第 2 步：在测试中使用该模块

```
// my-test.js

beforeEach(module("my.templates"));    // load new module containing templates 
```

有关完整示例，请查看[Angular 测试专家 Vojta Jina 的这个规范示例](https://github.com/vojtajina/ng-directive-testing)。它包括一个完整的设置：业力配置、模板和测试。

## 非业力解决方案

如果您出于某种原因不使用 Karma（我在旧版应用程序中有一个不灵活的构建过程）并且只是在浏览器中进行测试，我发现您可以`$httpBackend`通过使用原始 XHR 来获取真实的模板来绕过 ngMock 的接管并将其插入`$templateCache`. 这个解决方案不太灵活，但它现在可以完成工作。

```
// my-test.js

// Make template available to unit tests without Karma
//
// Disclaimer: Not using Karma may result in bad karma.
beforeEach(inject(function($templateCache) {
    var directiveTemplate = null;
    var req = new XMLHttpRequest();
    req.onload = function() {
        directiveTemplate = this.responseText;
    };
    // Note that the relative path may be different from your unit test HTML file.
    // Using `false` as the third parameter to open() makes the operation synchronous.
    // Gentle reminder that boolean parameters are not the best API choice.
    req.open("get", "../../partials/directiveTemplate.html", false);
    req.send();
    $templateCache.put("partials/directiveTemplate.html", directiveTemplate);
})); 
```

不过说真的。使用[业力](http://karma-runner.github.io/)。设置需要一些工作，但它可以让您从命令行一次在多个浏览器中运行所有测试。因此，您可以将其作为持续集成系统的一部分，和/或您可以将其作为编辑器的快捷键。比 alt-tab-refresh-ad-infinitum 好得多。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2013-03-05T18:32:23.237

我最终做的是获取模板缓存并将视图放在那里。我无法控制不使用 ngMock，事实证明：

```
beforeEach(inject(function(_$rootScope_, _$compile_, $templateCache) {
    $scope = _$rootScope_;
    $compile = _$compile_;
    $templateCache.put('path/to/template.html', '<div>Here goes the template</div>');
})); 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-05-22T09:46:12.550

这个初始问题可以通过添加这个来解决：

```
beforeEach(angular.mock.module('ngMockE2E')); 
```

那是因为它默认尝试在**ngMock模块中查找****$httpBackend**并且它没有满。

 *** * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-05-13T18:46:04.560

我达到的解决方案需要 jasmine-jquery.js 和代理服务器。

我按照以下步骤操作：

1.  在 karma.conf 中：

将 jasmine-jquery.js 添加到您的文件中

```
files = [
    JASMINE,
    JASMINE_ADAPTER,
    ...,
    jasmine-jquery-1.3.1,
    ...
] 
```

添加代理服务器，为您的灯具提供服务

```
proxies = {
    '/' : 'http://localhost:3502/'
}; 
```

2.  在您的规格中

    describe('MySpec', function() { var $scope, template; jasmine.getFixtures().fixturesPath = 'public/partials/'; //自定义路径，以便您可以提供您在应用程序上使用的真实模板 beforeEach(function () { 模板 = angular.element('');

    ```
     module('project');
        inject(function($injector, $controller, $rootScope, $compile, $templateCache) {
            $templateCache.put('partials/resources-list.html', jasmine.getFixtures().getFixtureHtml_('resources-list.html')); //loadFixture function doesn't return a string
            $scope = $rootScope.$new();
            $compile(template)($scope);
            $scope.$apply();
        })
    }); 
    ```

    });

3.  在应用程序的根目录上运行服务器

    python -m SimpleHTTPServer 3502

4.  运行业力。

我花了一段时间才弄清楚这一点，不得不搜索很多帖子，我认为关于这个的文档应该更清楚，因为这是一个非常重要的问题。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2014-09-04T11:06:02.367

我的解决方案：

`test/karma-utils.js`：

```
function httpGetSync(filePath) {
  var xhr = new XMLHttpRequest();
  xhr.open("GET", "/base/app/" + filePath, false);
  xhr.send();
  return xhr.responseText;
}

function preloadTemplate(path) {
  return inject(function ($templateCache) {
    var response = httpGetSync(path);
    $templateCache.put(path, response);
  });
} 
```

`karma.config.js`：

```
files: [
  //(...)
  'test/karma-utils.js',
  'test/mock/**/*.js',
  'test/spec/**/*.js'
], 
```

考试：

```
'use strict';
describe('Directive: gowiliEvent', function () {
  // load the directive's module
  beforeEach(module('frontendSrcApp'));
  var element,
    scope;
  beforeEach(preloadTemplate('views/directives/event.html'));
  beforeEach(inject(function ($rootScope) {
    scope = $rootScope.$new();
  }));
  it('should exist', inject(function ($compile) {
    element = angular.element('<event></-event>');
    element = $compile(element)(scope);
    scope.$digest();
    expect(element.html()).toContain('div');
  }));
}); 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2013-06-12T19:26:26.793

如果你使用 Grunt，你可以使用 grunt-angular-templates。它将您的模板加载到 templateCache 中，并且对您的规范配置是透明的。

我的示例配置：

```
module.exports = function(grunt) {

  grunt.initConfig({

    pkg: grunt.file.readJSON('package.json'),

    ngtemplates: {
        myapp: {
          options: {
            base:       'public/partials',
            prepend:    'partials/',
            module:     'project'
          },
          src:          'public/partials/*.html',
          dest:         'spec/javascripts/angular/helpers/templates.js'
        }
    },

    watch: {
        templates: {
            files: ['public/partials/*.html'],
            tasks: ['ngtemplates']
        }
    }

  });

  grunt.loadNpmTasks('grunt-angular-templates');
  grunt.loadNpmTasks('grunt-contrib-watch');

}; 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2014-01-21T16:06:42.680

我以与所选解决方案略有不同的方式解决了相同的问题。

1.  首先，我为 karma 安装并配置了[ng-html2js](https://github.com/karma-runner/karma-ng-html2js-preprocessor)插件。在 karma.conf.js 文件中：

    ```
    preprocessors: {
      'path/to/templates/**/*.html': 'ng-html2js'
    },
    ngHtml2JsPreprocessor: {
    // you might need to strip the main directory prefix in the URL request
      stripPrefix: 'path/'
    } 
    ```

2.  然后我加载了在 beforeEach 中创建的模块。在您的 Spec.js 文件中：

    ```
    beforeEach(module('myApp', 'to/templates/myTemplate.html')); 
    ```

3.  然后我使用 $templateCache.get 将它存储到一个变量中。在您的 Spec.js 文件中：

    ```
    var element,
        $scope,
        template;

    beforeEach(inject(function($rootScope, $compile, $templateCache) {
      $scope = $rootScope.$new();
      element = $compile('<div my-directive></div>')($scope);
      template = $templateCache.get('to/templates/myTemplate.html');
      $scope.$digest();
    })); 
    ```

4.  最后，我以这种方式进行了测试。在您的 Spec.js 文件中：

    ```
    describe('element', function() {
      it('should contain the template', function() {
        expect(element.html()).toMatch(template);
      });
    }); 
    ```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2013-05-10T17:49:23.073

要将模板 html 动态加载到 $templateCache 中，您可以使用 html2js 业力预处理器，如此[处所述](https://github.com/vojtajina/ng-directive-testing/blob/master/test/tabsSpec.js)

这归结为将模板“ *.html”添加到 conf.js 文件中的文件以及预处理器 = { '* .html': 'html2js' };

并使用

```
beforeEach(module('..'));

beforeEach(module('...html', '...html')); 
```

进入你的 js 测试文件

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-01-29T18:09:33.667

如果您使用 Karma，请考虑使用[karma-ng-html2js-preprocessor](https://github.com/karma-runner/karma-ng-html2js-preprocessor)来预编译您的外部 HTML 模板，并避免 Angular 在测试执行期间尝试 HTTP GET 它们。我为我们的几个人苦苦挣扎 - 在我的例子中，templateUrl 的部分路径在正常应用程序执行期间解决但在测试期间没有解决 - 由于应用程序与测试目录结构的差异。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2014-05-15T11:11:04.837

如果您将[jasmine-maven-plugin](https://searls.github.io/jasmine-maven-plugin/)与 RequireJS 一起使用，您可以使用[文本插件](https://github.com/requirejs/text)将模板内容加载到变量中，然后将其放入模板缓存中。

```
 define(['angular', 'text!path/to/template.html', 'angular-route', 'angular-mocks'], function(ng, directiveTemplate) {
    "use strict";

    describe('Directive TestSuite', function () {

        beforeEach(inject(function( $templateCache) {
            $templateCache.put("path/to/template.html", directiveTemplate);
        }));

    });
}); 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2015-04-03T18:09:35.367

如果您在测试中使用 requirejs，那么您可以使用“文本”插件来拉入 html 模板并将其放入 $templateCache。

```
require(["text!template.html", "module-file"], function (templateHtml){
  describe("Thing", function () {

    var element, scope;

    beforeEach(module('module'));

    beforeEach(inject(function($templateCache, $rootScope, $compile){

      // VOILA!
      $templateCache.put('/path/to/the/template.html', templateHtml);  

      element = angular.element('<my-thing></my-thing>');
      scope = $rootScope;
      $compile(element)(scope);   

      scope.$digest();
    }));
  });
}); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-08-26T08:28:17.940

我通过将所有模板编译到模板缓存来解决此问题。我正在使用 gulp，你也可以为 grunt 找到类似的解决方案。我在指令中的 templateUrls，模态看起来像

```
`templateUrl: '/templates/directives/sidebar/tree.html'` 
```

1.  在我的 package.json 中添加一个新的 npm 包

    `"gulp-angular-templatecache": "1.*"`

2.  在 gulp 文件中添加模板缓存和一个新任务：

    `var templateCache = require('gulp-angular-templatecache'); ... ... gulp.task('compileTemplates', function () { gulp.src([ './app/templates/**/*.html' ]).pipe(templateCache('templates.js', { transformUrl: function (url) { return '/templates/' + url; } })) .pipe(gulp.dest('wwwroot/assets/js')); });`

3.  在 index.html 中添加所有 js 文件

    `<script src="/assets/js/lib.js"></script> <script src="/assets/js/app.js"></script> <script src="/assets/js/templates.js"></script>`

4.  享受！**

# git - 如何将文档与 Github Pages 同步？

> ID：15214762
> 
> 赞同：81
> 
> 时间：2013-03-05T02:26:31.893
> 
> 标签：git, github, github-pages, webhooks

我和几个人一起有一个项目，我们有一个`README.md`包含一堆 GitHub Flavored Markdown 的文件，它在我们的 GitHub 页面上呈现。我们还建立了一个 GitHub Pages 分支，它托管在我们的 GitHub 组织的子域下，并使用[**自动页面生成器**](https://help.github.com/articles/creating-pages-with-the-automatic-generator)在我们创建页面时简单地加载到我们的`README.md`文件中。但是，我注意到当我更新我们的`README.md`文件时，它不会更新项目页面。相反，我们必须转到 GitHub 设置选项卡并重新创建项目页面，并`README.md`在执行此操作时重新加载文件。

此外，在阅读了 GitHub 项目目录页面上的文档文件之间的[**相对链接之后。**](https://github.com/blog/1395-relative-links-in-markup-files)我非常喜欢 Markdown，因为它节省了大量时间，无需为我们的文档手动编写所有 HTML。然而，我想要的是能够拥有一个`README.md`文件，该文件能够包含指向位于`docs/*.md`. 我希望有一个简单的解决方案，以便我的其他文档文件也可能包含在我的 gh-pages 分支中，并托管在我的 GitHub Pages 子域下并被呈现和/或主题化。

换句话说，我的问题是：

*   有没有办法让我的 README.md 文件在我的 Github 页面子域上自动更新？
    *   **[编辑]：**如果使用自动页面生成器，答案似乎不是。您必须转到存储库的设置页面并在每次发生更改时重新加载它才能更新它。

*   有没有一种方法可以让我的 README.md 文件上的文档的相对链接在我的 Github 页面上工作，也许我以某种方式将我的文件同步`/docs/*.md`到我的 Github 页面并以某种方式呈现和/或主题化它们？
    *   **[编辑]：**从我写这个问题以来所学到的知识看来，这似乎只能通过使用像 ruby​​ gem [**Jekyll这样的**](https://github.com/mojombo/jekyll)[**静态站点生成器**](http://www.mzlinux.org/?q=node/415)在 GitHub 页面上实现，并且可能是提到[**的 GitHub 支持**](https://help.github.com/articles/post-receive-hooks)的 webhook 的一些使用在下面的评论中。我目前正在尝试寻找最佳解决方案。[](https://github.com/mojombo/jekyll)**[](https://help.github.com/articles/post-receive-hooks)**

*****   更好的是，有没有一种更简单的方法可以做到这一点，也许只有一份我的 README.md 和文档的副本，用于 gh-pages 和我的主分支，并使一切变得简单？
    *   **[编辑]：**看来这个几乎肯定是不。我正在考虑在 GitHub 中内置一些东西来实现这一点的可能性。看来将来可能会在 GitHub Pages 中内置对这种东西的更好支持，或者至少我绝对希望它会。
         ****

 ***** * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-05-05T22:13:51.707

我将发布一个我设置的解决方案，它利用了 GitHub Pages 使用 Jekyll 已经使用自动页面生成器这一事实。

1.  `git checkout gh-pages`
2.  `mkdir _layouts`
3.  `mv index.html _layouts`
4.  `git checkout master -- README.md`
5.  `mv README.md index.md`
6.  将以下文本添加到`index.md`

```
---
layout: index
--- 
```

您还需要打开`index.html`文件并进行以下更改：

1.  从文件中的降价中删除呈现的 HTML `README.md`。这通常在`<section>`标签之间`<article>`。将此 HTML 替换为文本，`{{ content }}`这将允许我们将此文件用作 jekyll。我们应用布局的文件将放置在内容标签所在的位置。

2.  找到项目页面主题的 CSS。对我来说，这是如下一行：

    `<link rel='stylesheet' href='stylesheets/stylesheet.css' />`

    这需要更改为

    `<link rel='stylesheet' href='{{ site.path }}/stylesheets/stylesheet.css' />`

3.  将在此布局中使用的存储在您网站上的任何其他资产也需要以`{{ site.path }}`.

通过这样做，Jekyll 会将 markdown 文件渲染为目录中`index.html`布局的内容`_layouts`。为了使这个过程自动化，不仅是 README.md 文件，还有你的 master 分支中可能拥有的其他文档，我采取了以下步骤：

创建了名为`post-commit`包含以下内容的文件：

```
#!/bin/bash
###
### The following block runs after commit to "master" branch
###
if [ `git rev-parse --abbrev-ref HEAD` == "master" ]; then

    # Layout prefix is prepended to each markdown file synced
    ###################################################################
    LAYOUT_PREFIX='---\r\nlayout: index\r\n---\r\n\r\n'

    # Switch to gh-pages branch to sync it with master
    ###################################################################
    git checkout gh-pages

    # Sync the README.md in master to index.md adding jekyll header
    ###################################################################
    git checkout master -- README.md
    echo -e $LAYOUT_PREFIX > index.md
    cat README.md >> index.md
    rm README.md
    git add index.md
    git commit -a -m "Sync README.md in master branch to index.md in gh-pages"

    # Sync the markdown files in the docs/* directory
    ###################################################################
    git checkout master -- docs
    FILES=docs/*
    for file in $FILES
    do
        echo -e $LAYOUT_PREFIX | cat - "$file" > temp && mv temp "$file"
    done

    git add docs
    git commit -a -m "Sync docs from master branch to docs gh-pages directory"

    # Uncomment the following push if you want to auto push to
    # the gh-pages branch whenever you commit to master locally.
    # This is a little extreme. Use with care!
    ###################################################################
    # git push origin gh-pages

    # Finally, switch back to the master branch and exit block
    git checkout master
fi 
```

**编辑：**`README.md`我为文件和降价更新了上述脚本，`docs/*`以使用相同的布局文件。这是一个比我以前更好的设置。该脚本位于您的`.git/hooks/`目录中。bash 必须在您的路径中。

`_config.yml`使用以下内容创建文件

```
markdown: redcarpet
path: http://username.github.io/reponame 
```

`docs/*`上面的脚本还会同步分支目录中的markdown 文件`master`，以便它们也可以在 GitHub Pages 站点上查看。如果您包含以下 jQuery 函数以便从分支`.md`上的锚点中剥离扩展，则到这些文档的相对链接有效。`gh-pages`您可以`index.html`在`_layouts`目录中添加以下脚本：

```
$(document).on('ready', function () {
    $('a').each(function (i, e) {
        var href = e.href;
        if (href.search('.md') > 0)
            $(this).attr('href', href.split('.md')[0]);
    });
}); 
```

**编辑：**我在我的存储库中更改了上面的代码，这是一种快速而肮脏的方法，但如果你知道我的意思，它不会在所有情况下都正常工作。例如，`company.mdata.md`不会处理降价文件正确。为了解决这个问题，我将其更新为以下脚本，该脚本更仔细地检查了 href 并删除了扩展（如果找到）。`ext`我还使脚本更通用，允许通过更改变量来删除其他扩展。这是代码：

```
$(function () {
    $('a').each(function () {
        var ext = '.md';
        var href = $(this).attr('href');
        var position = href.length - ext.length;
        if (href.substring(position) === ext)
            $(this).attr('href', href.substring(0, position));
    });
}); 
```

[**我在CoryG89/docsync**](http://github.com/CoryG89/docsync)设置了一个示例 repo ，这里有一个[**项目页面**](http://coryg89.github.io/docsync)，如果你想看看这一切是如何一起工作的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-09-12T19:17:28.740

我对 README 与 Github 页面同步问题的解决方案与上述略有不同。可以使用 Github API 返回呈现为 HTML 的 Markdown 文件，而不是使用单独的 JavaScript Markdown 引擎。

1.  从. `README.md`_`https://api.github.com/repos/<owner>/<repo>/contents/README.md`
2.  解码 Base64 响应：`window.atob( JSON.parse( blob ).content );`
3.  将解码后的内容发布`README`到`https://api.github.com/markdown`JSON 正文中

    ```
     {
       "text": "<README>",
       "mode": "markdown",
       "context": "<owner>/<repo>"
     } 
    ```

4.  [正如Brad Rhodes](http://bradrhodes.github.io/GithubDocSync/)所做的那样，将呈现的 HTML 插入到 DOM 元素中。

这种方法有两个注意事项：

1.  执行两个串行请求会减慢页面加载速度。
2.  访问 Github API 时可能会遇到速率限制。

对于加载时间不重要（约 1-2 秒）的低流量页面，上述方法效果很好。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-01-09T14:49:28.383

您可以使用[DocumentUp](http://documentup.com)来呈现您的 README.md。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-30T07:59:17.570

我有几个想法可以在您的文档站点和主 github 存储库之间共享一个自述文件：

1.  您只能使用一个包含您的代码和 jekyll 文档站点的 gh-pages 分支。您的存储库可能会有点混乱，您需要在自述文件的顶部放置一个 YAML 标头。它*几乎*支持相对链接。问题是，如果你想让 jekyll 渲染你的 markdown，它会给它一个 .html 扩展名。也许有一种方法可以配置它。[这是我拼凑起来的一个例子，看看它是否有效。](https://github.com/nathanathan/shared-readme-example)

2.  您可以在文档站点中使用 AJAX 调用从主分支读取自述文件，然后使用[Javascript Markdown 渲染器进行渲染](http://softwaremaniacs.org/playground/showdown-highlight/)。这将需要更长的时间来加载，并且如果您不编写一些聪明的 Javascript，它将不支持相对链接。与想法 1 相比，实施起来也需要更多的工作。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-05-02T05:29:06.263

另一个需要考虑的方法是设置一个构建相关页面的[预提交钩子。](http://git-scm.com/docs/githooks#_pre-commit)我在[我的一个存储库](https://github.com/mkantor/jquery.keyframeanimation/blob/master/utilities/generate_documentation.sh)中执行此操作。不过，您可能不得不放弃自动页面生成器并`gh-pages`自己推送到分支，以及像[Nathan 建议](https://stackoverflow.com/a/16294980/3625)的那样做一些花哨的事情来将您的文档转换为 HTML 或 Jekyll 站点。

在那个存储库中，[我像这样推送](https://gist.github.com/mkantor/5500264)以保持`gh-pages`与`master`. 还有很多[其他方法](http://oli.jp/2011/github-pages-workflow/)可以做到这一点。不过，这可能不适合您的情况（您可能不希望它们相同）。

无论如何，我在这个问题上提供赏金的原因是因为我希望有人有更好的工作流程。这种方法有点复杂和不灵活，它要求每个人都保持他们的钩子同步。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-02-25T07:26:59.950

我已经非常成功地工作的另一种方法是使用 Ajax 来获取文档，使用 Github API 和 Javascript 降价引擎来呈现 HTML（正如 Nathan 所建议的那样）。

1.  使用 Github API 和 JSONP 从 Github 获取文档
2.  解码来自 Github API 的响应中的 base64 内容
3.  使用 javascript markdown 引擎渲染 markdown
4.  显示渲染的 html

Nathan 表达了对性能的一些担忧，但根据我的经验，它似乎是立即加载的，所以我认为这实际上不是问题。

优点是它易于设置，即使您只是直接在 github 上的浏览​​器中编辑 markdown，它也会始终更新您的文档。

[我在http://bradrhodes.github.io/GithubDocSync/](http://bradrhodes.github.io/GithubDocSync/)的 Github 页面上设置了一个示例来展示它的工作原理。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-02-25T15:52:45.463

Nathan 和 Brand Rhodes 描述的方法的另一种可能性是使用一个很棒的工具：由 Rico Sta 创建的[FlatDoc 。](http://ricostacruz.com/flatdoc/)克鲁兹。

FlatDoc 将通过 ajax 加载文档（README.md 或任何其他降价文件），对其进行解析并显示所有好东西，甚至是用于导航的侧边栏菜单！

它在其 api 中构建了一个辅助方法来从 GitHub repo master 加载文件（但也可以从 web 的其他任何地方加载）。

**指示**

首先将以下[html 模板](https://raw.githubusercontent.com/rstacruz/flatdoc/gh-pages/templates/template.html)复制到 gh-pages 分支中的 index.html 中。继续：

*   将“USER”替换为您的 GitHub 用户名
*   将“REPO”替换为您的 GitHub 存储库名称
*   用您的项目名称替换“您的项目”

在文件中。在浏览器中本地试用。然后提交并推送更改。现在，您的 github 页面将始终使用您的主分支中的 README.md 文件进行更新。

如果默认主题对您不满意，您可以使用自己的 css 重新设置样式。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-07-12T10:59:15.853

我还想在 master 中编辑文档并在 gh-pages 中发布 - 我喜欢使文档与源代码保持同步，这似乎是最好的方式。这对我来说正在进行中，但我以[Cory 的脚本](https://stackoverflow.com/a/16389663/1259109)为起点并对其进行了扩展，只要有一个 gh-pages 分支`_layouts`（即 jekyll 站点），它就可以开箱即用。它转换了反引号样式围栏（用于代码块），在 github 源代码浏览中工作得很好，但在 gh-pages 中却不行。我`index.md`在项目中使用了一个包含，`README.md`所以我可以添加一个标题和其他一些装饰。此版本还处理任何称为“docs”的嵌套目录中的文档，我发现它在具有多个模块（不是 git 子模块，只是子目录）的项目中很有用：

`.git/hooks/post-commit`

```
#!/bin/bash
###
### The following block runs after commit to "master" branch
###
if [ `git rev-parse --abbrev-ref HEAD` == "master" ]; then

    # function to convert a plain .md file to one that renders nicely in gh-pages
    function convert {
        # sed - convert links with *.md to *.html (assumed relative links in local pages)
        # awk - convert backtick fencing to highlights (script from bottom of file)
        sed -e 's/(\(.*\)\.md)/(\1.html)/g' "$1" | awk -f <(sed -e '0,/^#!.*awk/d' $0) > _temp && mv _temp "$1"
    } 

    if ! git show-ref --verify --quiet refs/heads/gh-pages; then
        echo "No gh-pages, so not syncing"
        exit 0
    fi

    # Switch to gh-pages branch to sync it with master
    ###################################################################
    git checkout gh-pages

    mkdir -p _includes

    # Sync the README.md in master to index.md adding jekyll header
    ###################################################################
    git checkout master -- README.md
    if [ -f README.md ]; then
        cp README.md _includes/
        convert _includes/README.md
        git add README.md
        git add _includes/README.md
    fi

    # Generate index if there isn't one already
    ###################################################################
    if [ ! -f index.md ]; then
        echo -e '---\ntitle: Docs\nlayout: default\n---\n\n{% include README.md %}' > index.md
        git add index.md
    fi

    # Generate a header if there isn't one already
    ###################################################################
    if [ ! -f _includes/header.txt ]; then
        echo -e '---\ntitle: Docs\nlayout: default\nhome: \n---\n\n' > _includes/header.txt
        git add _includes/header.txt
    fi

    # Sync the markdown files in all docs/* directories
    ###################################################################
    for file in `git ls-tree -r --name-only master | grep 'docs/.*\.md'`
    do
        git checkout master -- "$file"
        dir=`echo ${file%/*} | sed -e "s,[^/]*,..,g"`
        cat _includes/header.txt | sed -e "s,^home: .*$,home: ${dir}/," > _temp
        cat "$file" >> _temp && mv _temp "$file"
        convert "$file"
        git add "$file"
    done

    git commit -a -m "Sync docs from master branch to docs gh-pages directory"

    # Uncomment the following push if you want to auto push to
    # the gh-pages branch whenever you commit to master locally.
    # This is a little extreme. Use with care!
    ###################################################################
    # git push origin gh-pages

    # Finally, switch back to the master branch and exit block
    git checkout master
fi

exit $?

#!/usr/bin/awk
{
   # Replace backtick fencing (renders well when browsing github) with jekyll directives
   if (/```/) {
      IN = IN?0:1 # Are we already in a fenced section? Toggle.
      if (IN) { # If we are starting a fenced section
         if (/```\s*$/) {
           $0 = $0"text" # empty language is OK for backticks but not for jekyll
         }
         gsub(/```/, "{% highlight ")
         print $0" %}"
      } else { # ending a fenced section
        print "{% endhighlight %}" 
      }
    } else { # not a fencing line
      if (IN) { # but in a fenced section, so add indent to make sure code is rendered with <pre>
        print "    "$0
      } else {
        print
      }
    }
} 
```

与原始版本不同的是，它`page.home`在所有页面中设置了一个变量。这个可以用来定位根目录的相对路径，所以可以用来定位css之类的静态资源。在`_layouts/.default.html`我有：

```
<link rel="stylesheet" href="{{ page.home }}css/main.css"> 
```

通过这种方式，我可以编辑 css，在本地构建 jekyll 站点，并在浏览器中查看结果，而无需等待 github 在服务器上构建它。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-08-09T22:34:47.850

我最近制作了一个包[gh-pages-generator](https://github.com/epoberezkin/gh-pages-generator)来解决这个问题 - 它使用多个 MD 文件和一个配置文件生成多页站点。

它正确更新页面之间的所有链接。将更改提交回 gh-pages 分支相对容易使其成为 CI 的一部分。

我在[这里](http://epoberezkin.github.io/ajv/)和[这里](http://www.json-script.com/)使用它。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-10-14T14:54:07.653

**这并不难**，两次复制并粘贴到终端中就可以了。

`Jekyll`允许您导入您的降价文件，然后它将负责将它们转换为 HTML。诀窍`README.md`是`index.md`使用`{% include_relative README.md %}`. 我们可以这样做：

值得一试的是[如何`Jekyll`在 github 上设置一个超级准系统站点](https://github.com/lazamar/barebones-jekyll-project-readme)（它只是**两个文件！**）

## 设置

您可以复制这两个文件并让您的页面与您当前的自述文件一起运行，只需运行**一次设置**（*复制整个代码块并粘贴到终端中*）：

```
# Copy our two files to the gh-pages branch
git checkout -b gh-pages &&
wget https://raw.githubusercontent.com/lazamar/barebones-jekyll-project-readme/master/_config.yml &&
wget https://raw.githubusercontent.com/lazamar/barebones-jekyll-project-readme/master/index.md &&
#
# Commit and publish our page on github
git add -A && git commit -m "Create project github page" &&
git push --set-upstream origin gh-pages |
#
git checkout master # go back to master branch 
```

## 自动化

然后我们只需要在每次推送之前自动化将所有更改从分支复制`master`到分支的任务。`gh-pages`我们可以通过运行此脚本来做到这一点（*您可以将其复制并粘贴到终端中*）

```
$(cat > .git/hooks/pre-push << EOF
#!/bin/sh
we_are_in_gh_pages="\$(git branch | grep -G "* gh-pages")"

if [ ! "\$we_are_in_gh_pages" ];
  then
    git checkout gh-pages &&
    git rebase master &&
    git push -f &&
    git checkout master # go back to master branch
fi
EOF
) && chmod 775 .git/hooks/pre-push 
```

它将创建一个推送挂钩，将所有更改从`master`分支复制到`gh-pages`您每次运行时`git push`。

**就是这样。完毕。******

# html - 使用 JQuery Mobile 时遇到一些问题

> ID：15214763
> 
> 赞同：0
> 
> 时间：2013-03-05T02:26:34.000
> 
> 标签：html, jquery-mobile

这是我正在处理的一些代码，但现在 JQuery Mobiles 元素正在工作。我已经有一段时间没有编码了。另外，如果重要的话，我正在使用 Sumlime Text 2。

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>.......</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
</head>

<body>
    <div date-role="page" data-theme="a">
        <div date-role="header">
            <!--Main Nav Bar-->
            <a href="MainPage.html" data-icon="home" data-iconpos="right">Home</a>
            <h1>HOME</h1>
        </div>

        <div data-role="content">
            hello
        </div>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T02:30:22.607

从外观上看，一切似乎都写得正确。唯一可能是它没有使用正确的 HTML 5 文档类型，而是使用了 html4。Jquery mobile 严重依赖 HTML5

```
<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>HTML5 Template</title>
</head>
<body>
</body>
</html> 
```

# java - 授予 rt.jar 权限

> ID：15214765
> 
> 赞同：0
> 
> 时间：2013-03-05T02:26:44.470
> 
> 标签：java, security, policy

我们没有使用默认的 Java 安全策略，因为它允许我们想要禁止的事情。所以我们有自己的策略文件，通常不允许从任何地方读取......

但这意味着 rt.jar 本身无法在需要时从文件中读取，这很糟糕。

所以我添加了以下规则：

```
grant codeBase "file:${java.home}/lib/rt.jar" {
  permission java.security.AllPermission;
};
grant codeBase "file:${java.home}/jre/lib/rt.jar" {
  permission java.security.AllPermission;
}; 
```

我不确定 java.home 是否适用于 JDK 或 JRE，所以我同时设置了两者。但是当我运行测试时，当 rt.jar 尝试从文件中读取时，我仍然会遇到安全异常。

显然我做错了什么，所以我希望其他人能发现我的错字。

我努力了：

*   `/`之后添加`file:`
*   `jar:`前后添加`file:`_ `!/-`_`.jar`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T02:09:53.020

我认为您不能从系统类中删除权限（`null` `ClassLoader`并且`null` `ProtectionDomain`，所以不能`CodeSource`）。

我猜你误解了 Java 2 安全模型（很容易做到，因为没有人真正理解它）。通过检查堆栈中的所有帧（粗略地说）来完成安全检查（除了一些选择方法）。测试的每一帧都必须有权限。如果堆栈中只有一帧没有权限，则检查失败。

（在咨询之前，您可能`SecurityManager`总是拒绝某些权限`AccessController`。）

# html - 显示的奇怪边距问题：inline-block child

> ID：15214768
> 
> 赞同：4
> 
> 时间：2013-03-05T02:27:01.567
> 
> 标签：html, css

[这是小提琴](http://jsfiddle.net/fNH42/3/)

当我设置`#two`为 inline-block 时，它会从中减去 16 px 的顶部/底部边距`<p>`并将其添加到 div 内容框高度，因此它变为 52px 而不是 20px .. 为什么会这样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T02:48:28.353

您所看到的是[边缘崩溃的奇怪案例之一。](https://developer.mozilla.org/en-US/docs/CSS/margin_collapsing)

如果父元素和子元素是块元素并且没有任何东西（填充、边框等）分隔它们的垂直边距，那么这些边距将折叠。折叠边距是指未添加两个相邻边距（如您所料），而是显示两者中较大的一个。在父子情况下，折叠的边距最终在父级之外。您可以在上述链接中的“*父母和第一个/最后一个孩子”部分阅读更多详细信息。*

将父级设置为`inline-block`, 或`float:left;`ing 它或其他一些东西（请参阅链接以获得更完整的列表）将阻止边距折叠。这导致了我们习惯的行为：child 的 margin 会出现在 parent 内部，增加它的总高度，并且 parent 的 margin 也会显示出来。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-06T00:00:14.827

详细说明并扩展现有答案..

这种行为称为[折叠边距](http://www.w3.org/TR/CSS2/box.html#collapsing-margins)。

> [**8.3.1 折叠边距**](http://www.w3.org/TR/CSS2/box.html#collapsing-margins)
> 
> 在 CSS 中，两个或多个框（可能是或不是兄弟）的相邻边距可以组合形成一个边距。以这种方式组合的边距被称为折叠边距，由此产生的组合边距称为**折叠边距**。

要解决此问题，您需要建立一个新的块格式化上下文：

> [**9.4.1 块格式化上下文**](http://www.w3.org/TR/CSS21/visuren.html#block-formatting)
> 
> 浮动、绝对定位的元素、不是块框的块容器（例如内联块、表格单元格和表格标题），以及具有“溢出”而不是“可见”的块框（除非该值已被传播到视口）为其内容**建立新的块格式化上下文。**
> 
> 在块格式化上下文中，框从包含块的顶部开始一个接一个地垂直排列。两个同级框之间的垂直距离由 'margin' 属性确定。块格式化上下文中相邻块级框之间的垂直边距折叠。

因此，建立新块格式的*几种*不同方法是......

*   将父元素的属性更改为`overflow`默认值以外的其他值，`visible`- [**（更新示例）**](http://jsfiddle.net/cvnfbb8m/)

*   `display`将元素的更改为`inline-block`- [**（更新示例）**](http://jsfiddle.net/qj3w2z4L/)

*   浮动元素 - [**（更新示例）**](http://jsfiddle.net/veh92tes/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T03:05:48.793

这已经得到回答和接受，但我仍然想指出，清除它可以防止保证金崩溃，从而使其行为正常化

我要补充：

```
.two:before,
.two:after {
    content: " ";
    display: table; 
}

.two:after {
     clear: both;
} 
```

看到这个[小提琴](http://jsfiddle.net/gleezer/fNH42/5/)。这是我用过的 Nicholas Gallagher [clearfix 。](http://nicolasgallagher.com/micro-clearfix-hack/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-05T02:43:40.843

段落具有内置的边距（在大多数浏览器中）。

试试这个：

```
p 
{ 
    margin: 0px; 
} 
```

# php - Switch 语句不适用于多种情况

> ID：15214769
> 
> 赞同：0
> 
> 时间：2013-03-05T02:27:01.793
> 
> 标签：php, html, switch-statement

由于缺少更好的术语，我有一个“链接”到 onClick 事件的 switch 语句。当开关中有一个案例时，它可以工作。当所有四个案例都处于活动状态时，它们都不起作用。感谢您的任何帮助/建议，**非常**感谢。

下面的代码：

**PHP 文件（mapcontroller.php）：**

```
function playerMove($direction) 
{
    Global $mysqli;

    $sqlMoveNorth = "UPDATE ss_character SET coord_y = coord_y + 1  WHERE username = '".$_SESSION['usr']."'";
    $sqlMoveSouth = "UPDATE ss_character SET coord_y = coord_y - 1  WHERE username = '".$_SESSION['usr']."'";
    $sqlMoveEast = "UPDATE ss_character SET coord_x = coord_X + 1  WHERE username = '".$_SESSION['usr']."'";
    $sqlMoveWest = "UPDATE ss_character SET coord_x = coord_X - 1  WHERE username = '".$_SESSION['usr']."'";

    switch ($direction)
    {
        case "north":
            mysqli_query($mysqli, $sqlMoveNorth);
            break;

        case "south":
            mysqli_query($mysqli, $sqlMoveSouth);
            break;

        case "east":
            mysqli_query($mysqli, $sqlMoveEast);
            break;

        case "west":
            mysqli_query($mysqli, $sqlMoveWest);
            break;

        default:
            echo "Pick something!";
            break;
    }
} 
```

**HTML 文件 (travel.inc.php)：**

```
<div class="map-wrapper">

    <?php $currentPage = $_SERVER['REQUEST_URI']; ?>

    <div class="map-move-container">
        <div class="map-move-north"><a onclick="<?php playerMove(north); ?>" href="<?php $currentPage ?>"> Move North</a></div>
        <div class="map-move-west"><a onclick="<?php playerMove(west); ?>" href="<?php $currentPage ?>"> Move West</a></div>
        <div class="map-move-east"><a onclick="<?php playerMove(east); ?>"  href="<?php $currentPage ?>"> Move East</a></div>
        <div class="map-move-south"><a onclick="<?php playerMove(south); ?>"  href="<?php $currentPage ?>"> Move South</a></div>
    </div>

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T02:56:02.510

该代码不会以任何方式工作。由于 PHP 是服务器端语言，您正试图在用户干预时使用它，这是不可能的。

正确的做法是onclick发送ajax请求获取结果。您可以使用 jquery 和许多著名的 JS 框架。

# javascript - 寻找方法来检查包含一些单词的字符串

> ID：15214772
> 
> 赞同：0
> 
> 时间：2013-03-05T02:27:11.457
> 
> 标签：javascript, jquery, asp.net, html

我正在做动态工具提示，基本上我想要实现的是检测多行工具提示，如果我的数据里面包含 \r，那么我将执行一些操作，下面的代码是我试图检查我的描述的示例，但是我失败了。

注意：我的主要目的是检查我的描述的包含

```
<script type="text/javascript">
// description
var data = {
    name: "enter your name",
    family: "enter your \r family",
    uc2_txtname: "enter your name for Control 2 (User Control2)",

}
function Show(){
var text = '';
// failed to check my above data , the data.contains('\r') is not working
        if (data.contains('\r')) {
            text = 'good';
        } else {
            text = 'bad';
        }
}

</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T02:42:06.553

您应该使用`indexOf`代替`contains`（javascript 不支持该功能）。

```
function Show(){
    var text = '';
    for(var d in data){
        var val = data[d];
        if (val.indexOf('\r') != -1) { 
            text = 'good';
        } else {
            text = 'bad';
        }
    }
} 
```

# java - 在 Min 和 Max 功能方面需要帮助？

> ID：15214774
> 
> 赞同：1
> 
> 时间：2013-03-05T02:27:17.017
> 
> 标签：java

我有一个应用程序猜数字游戏，用户必须猜一个 0 到 100 之间的数字，当他们猜对时，程序会询问他们是否想在玩完游戏后再次玩游戏中最多的猜测次数。现在我得到的只是他们在使用“Math.min(,)”时所有猜测的总和？如何让最小功能起作用？？？功能代码在下面。

1.  **minimumNumGuesses = Math.min(leastNumGuesses,guesses);**

    ```
    double rightNum = Math.random() *100;
    int randomNum = (int) rightNum; //convert the random number to int
    int tries = 0; //single game gussess output
    int numberOfGames = 0;
    int allTries = 0; //accumalates all tries(sum of all tries)
    int guesses = 0; // guesses of all games combined
    int gameGuesses = 0;
    int leastNumGuesses = 100;
    int mostNumGuesses = 0;

      while (choice.equalsIgnoreCase("y")) 
    ```

    {

    ```
     System.out.println();

       int guess = getIntWithinRange(sc,"Enter the Number: ", 0, 100);
       tries++;
       guesses++;
       gameGuesses++;

       if (guess == randomNum)
       {
           numberOfGames++;
           System.out.println("You got it in " + tries + " tries.");
           leastNumGuesses = Math.min(leastNumGuesses,gameGuesses);
           if (tries <=3)
                    System.out.println("Great work! You are a mathematical wizard.");
           else if (tries > 3 && tries <= 7)
                    System.out.println("Not too bad! You've got some potential.");
           else if (tries > 7)
                    System.out.println("What took you so long? Maybe you should take some lessons.");

           System.out.println();      
           System.out.println("Would you like to play again (y/n):");
           choice = sc.nextLine();

       while (!choice.equalsIgnoreCase("n") && !choice.equalsIgnoreCase("y"))
        {

       System.out.println("Error! entry must be \"y\" or \"n\".");
       System.out.println("Would you like to play again (y/n):");
       choice = sc.nextLine();
        }   

           if (choice.equalsIgnoreCase("y"))       
           {    // reset the random number & tries

              rightNum = Math.random() *100;
                randomNum = (int) rightNum;
                tries=0;
               gameGuesses++;
           }
           else if (choice.equalsIgnoreCase("n"))
           {    
              allTries += guesses;
              int averageNumGuess = allTries / numberOfGames;

               System.out.println("Bye - Come back again");
               System.out.println("Number of Games Played: " + numberOfGames);
               System.out.println("Average Number of Guesses: " + averageNumGuess);
               System.out.println("Least Amount of Guesses In a Single Game: " + leastNumGuesses);

           }

       } 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T02:37:50.307

看起来你正在改变你想要`guesses`在程序中间代表的东西。

请记住，这`guesses`是所有游戏的猜测***总数***`leastNumGuesses`，最初设置为`100`。在大多数情况下，您会发现`guesses < leastNumGuesses`，因此该`Math.min(guesses, leastNumGuesses)`函数将返回`guesses`。

解决方法：使用除 之外的变量`guesses`，例如，`gameGuesses`跟踪游戏中进行了多少次猜测。然后，`Math.min(,)`将按照您的预期行事。

# html - 处理 RDFa 中“rel”的非语义使用

> ID：15214776
> 
> 赞同：5
> 
> 时间：2013-03-05T02:27:49.667
> 
> 标签：html, semantic-web, rdfa

我使用 RDFa 将链接数据添加到我的网页。我偶尔也会`rel`在各种标签中使用该属性用于非语义目的，例如触发 javascript 工具提示。我想知道我可以做些什么来区分用途。

例如，我的社交网络图标周围有 RDFa，如下所示：

```
<a rel="foaf:account" alt="twitter" href="https://twitter.com/cboettig"><i class="icon-twitter" rel="tooltip" title="follow me on twitter (reading, discussing)"></i></a> 

<a rel="foaf:account" alt="github" href="https://github.com/cboettig"><i class="icon-github" rel="tooltip" title="follow me on Github (code, research)"></i></a> 
```

在`rel`语义上使用锚标记的位置，但`rel`twitter-bootstrap javascript 使用图标标记来添加工具提示。神奇的是，在这个例子中，诸如[http://any23.org](http://any23.org)之类的工具会智能地忽略图标中的 rel。但是，当在 span 元素中遇到 a 时`rel="tooltip"`（用于向按钮添加工具提示）：

```
<span rel="tooltip" title="switch to dark theme">
   <a onclick="switch_style('dark');" class="btn btn-mini"></a> 
</span> 
```

这会创建一个几乎没有意义的 ntriple，例如：

```
<http://any23.org/tmp/> <http://any23.org/tmp/tooltip> <http://any23.org/tmp/> . 
```

当然这不是一个大问题，但我不确定为什么跨元素而不是其他示例会发生这种情况，或者如何避免它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T04:31:21.467

避免属性的非语义使用总是一个好主意，尤其是`rel`. 避免这种情况的一种方法是使用类（可能是`class="tooltip"`）而不是`rel`.

# java - 用于创建 .txt 文件的 Android 应用

> ID：15214777
> 
> 赞同：1
> 
> 时间：2013-03-05T02:27:57.830
> 
> 标签：java, android, file

我正在尝试创建一个用户选择几个复选框的应用程序，然后当他们点击提交时，它会为每个选中的复选框创建一个包含一个句子的 .txt 文件。

我已经成功构建了这个文件，它正确地创建了文件，但我需要将它保存到一个可访问的文件位置，以便它可以附加到电子邮件中。我真的不在乎它保存到哪里，只要它是可访问的。

以下代码在 Android 虚拟设备和我的 Galaxy 2 中运行时会导致崩溃。该应用程序是以后应用程序的概念证明。谢谢你。

```
 @Override
        public void onClick(View v)
        {
             String nochartOutput = " ";    
             if (sitting.isChecked())
                 nochartOutput += "The patient was sitting in a chair. ";
             if (breathing.isChecked())
                 nochartOutput += "The patient was breathing. ";
             if (alert.isChecked())
                 nochartOutput += "The patient was alert. ";

             FileOutputStream fOut = null;
             File sdDir = Environment.getExternalStorageDirectory();
             try {
                 fOut = openFileOutput(sdDir + "/AutoWriter/samplefile.txt",MODE_WORLD_READABLE);
             } catch (FileNotFoundException e) {
                 e.printStackTrace();
             }
             OutputStreamWriter osw = new OutputStreamWriter(fOut); 
             try {
                 osw.write(nochartOutput);

                 osw.flush();
                 osw.close();
             } catch (IOException e) {
                 e.printStackTrace();
             }
        } 
```

> 03-04 18:39:53.604: W/dalvikvm(10453): threadid=1: 线程以未捕获的异常退出 (group=0x40c211f8)
> 
> 03-04 18:39:53.624：E/AndroidRuntime（10453）：致命异常：主要
> 
> 03-04 18:39:53.624: E/AndroidRuntime(10453): java.lang.IllegalArgumentException: 文件 /mnt/sdcard/samplefile.txt 包含路径分隔符
> 
> 03-04 18:39:53.624: E/AndroidRuntime(10453): 在 android.app.ContextImpl.makeFilename(ContextImpl.java:1703)
> 
> 03-04 18:39:53.624: E/AndroidRuntime(10453): 在 android.app.ContextImpl.openFileOutput(ContextImpl.java:723)
> 
> 03-04 18:39:53.624: E/AndroidRuntime(10453): 在 android.content.ContextWrapper.openFileOutput(ContextWrapper.java:165)
> 
> 03-04 18:39:53.624: E/AndroidRuntime(10453): at com.example.com.dresdor.autowriter.MainActivity$1.onClick(MainActivity.java:48)
> 
> 03-04 18:39:53.624: E/AndroidRuntime(10453): 在 android.view.View.performClick(View.java:3620)
> 
> 03-04 18:39:53.624: E/AndroidRuntime(10453): 在 android.view.View$PerformClick.run(View.java:14292)
> 
> 03-04 18:39:53.624: E/AndroidRuntime(10453): 在 android.os.Handler.handleCallback(Handler.java:605)
> 
> 03-04 18:39:53.624: E/AndroidRuntime(10453): 在 android.os.Handler.dispatchMessage(Handler.java:92)
> 
> 03-04 18:39:53.624: E/AndroidRuntime(10453): 在 android.os.Looper.loop(Looper.java:137)
> 
> 03-04 18:39:53.624: E/AndroidRuntime(10453): 在 android.app.ActivityThread.main(ActivityThread.java:4507)
> 
> 03-04 18:39:53.624: E/AndroidRuntime(10453): 在 java.lang.reflect.Method.invokeNative(Native Method)
> 
> 03-04 18:39:53.624: E/AndroidRuntime(10453): 在 java.lang.reflect.Method.invoke(Method.java:511)
> 
> 03-04 18:39:53.624: E/AndroidRuntime(10453): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
> 
> 03-04 18:39:53.624: E/AndroidRuntime(10453): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
> 
> 03-04 18:39:53.624: E/AndroidRuntime(10453): at dalvik.system.NativeStart.main(Native Method)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T04:00:56.567

您现有的代码是写入内部存储和外部存储的混搭。线

```
fOut = openFileOutput(sdDir + "/AutoWriter/samplefile.txt",MODE_WORLD_READABLE); 
```

尝试在应用程序的私有数据目录中创建文件，并且您只能将文件名传递给此方法，而不是更深的路径。这就是崩溃的来源，但这不是你想要的。

您开始创建外部存储路径，但从未实际使用过它。要将文件写入外部 SD 卡上的该位置，请修改您的代码，如下所示：

```
FileOutputStream fOut = null;
//Since you are creating a subdirectory, you need to make sure it's there first
File directory = new File(Environment.getExternalStorageDirectory(), "AutoWriter");
if (!directory.exists()) {
    directory.mkdirs();
}

try {
    //Create the stream pointing at the file location
    fOut = new FileOutputStream(new File(directory, "samplefile.txt"));
} catch (FileNotFoundException e) {
    e.printStackTrace();
}
OutputStreamWriter osw = new OutputStreamWriter(fOut);

//...etc... 
```

使用 SD 卡可以让任何人访问该文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T03:30:29.723

openFileOutput() 将文件写入内部存储器而不是 sd 卡。所以改变

```
fOut = openFileOutput(sdDir + "/AutoWriter/samplefile.txt",MODE_WORLD_READABLE); 
```

至

```
fOut = openFileOutput("samplefile.txt", MODE_WORLD_READABLE); 
```

此外，文件名不能包含路径分隔符。请参阅[Android 开发者参考](http://developer.android.com/reference/android/content/Context.html#openFileOutput%28java.lang.String,%20int%29)

*public abstract FileOutputStream openFileOutput (String name, int mode)*

> 打开与此上下文的应用程序包关联的私有文件进行写入。如果文件尚不存在，则创建该文件。
> 
> 参数 name 要打开的文件的名称；**不能包含路径分隔符**。

然后可以像这样访问该文件。

```
FileInputStream fis = openFileInput("samplefile.txt"); 
```

**注意：** 对于较大的文件，最好将其保存在 sd 卡中。这是代码片段。

```
if (Environment.MEDIA_MOUNTED.equals(Environment.getExternalStorageState())) {
    FileOutputStream fos = null;
    try {
        File rootPath = new File(Environment.getExternalStorageDirectory(), "AutoWriter");
        if (!rootPath.exists()) 
            rootPath.mkdirs();

        File file = new File(rootPath, "samplefile.txt");
        fos = new FileOutputStream(file);

        // ... more lines of code to write to the output stream

    } catch (FileNotFoundException e) {
        Toast.makeText(this, "Unable to write file on external storage", Toast.LENGTH_LONG).show();
    } finally {
        if (fos != null) {
            try {
                fos.close();
            } catch (IOException e) {}
        }
    }
} 
```

# javascript - Google PlusOne 按钮在 Chrome 上出现错误

> ID：15214781
> 
> 赞同：15
> 
> 时间：2013-03-05T02:28:14.220
> 
> 标签：javascript, google-chrome, google-api, google-plus-one

Google PlusOne 在 Chrome 上出现错误：

```
Uncaught ReferenceError: iframes is not defined fastbutton:19
Uncaught ReferenceError: iframes is not defined fastbutton:19
Uncaught TypeError: Cannot read property 'plusones' of undefined (program):66
Uncaught TypeError: Object #<Object> has no method 'hefn' fastbutton:16 
```

[不那么]有趣的部分是它适用于 IE 和 FireFox。

我还应该补充一点，它可以正常工作一段时间，我现在只看到这些错误。不确定发生了什么变化。

有任何想法吗？TIA

ps 我在那个页面上也有 jQuery 和一个简单的 Modernizr。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-02T15:17:14.813

您可能阻止了第 3 方 cookie。为了在我的 Chrome（版本 26.0.1410.43）上进行测试，我添加了以下例外：-

*   apis.google.com
*   plusone.google.com
*   clients6.google.com
*   gstatic.com

之后 +1 按钮对我有用。

问候，

担

# c# - C#计算查询中的参数个数

> ID：15214786
> 
> 赞同：1
> 
> 时间：2013-03-05T02:28:53.060
> 
> 标签：c#, visual-studio-2010

我想在 C# 中运行一个插入查询，它有多个参数。我只想拥有一个`for loop`, 以便它遍历所有参数并为该参数分配一个值。

查询在访问数据库中。

```
 public static bool SubmitData(string queryName)
    {
        OleDbConnection conn = new OleDbConnection(cnnString);
        OleDbCommand cmd = new OleDbCommand(queryName, conn);
        OleDbDataAdapter da = new OleDbDataAdapter();

        DataSet ds = new DataSet();

        string strParameterName;

        conn.Open();
        cmd = new OleDbCommand(queryName, conn);

        cmd.Connection = conn;
        cmd.CommandType = CommandType.StoredProcedure;
        cmd.CommandText = queryName;

        for (int i = 0; i < cmd.Parameters.Count; i++)
        {

        }

        conn = null;
        return true;

    } 
```

上面的示例有 3 个参数，但计数为 0。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T02:31:09.557

我真的看不到三个参数在哪里。 `Parameters.Count` **不**返回您的过程接收器的参数数量。它返回已添加参数的计数。

* * *

你可能想要的是：

```
cmd.Parameters.Add("@p1", OleDbType.Type1).Value = value1;
cmd.Parameters.Add("@p2", OleDbType.Type2).Value = value2; 
```

`Parameters`是参数集合，最初为空。方法`Add`，添加参数，Value 属性为其赋值。

请注意，在 中`OleDbConnection`，参数的顺序很重要，因此您需要事先知道查询中的顺序。

# meteor - 如何使用流星动态创建 Div，然后根据数据库中的 ID 存储和调用它们

> ID：15214787
> 
> 赞同：3
> 
> 时间：2013-03-05T02:28:58.173
> 
> 标签：meteor

下面我有一个带有数字输入表单的基本模板。当您在表单中键入一个数字并单击添加一个 Div 列表时，就会创建。Div 是使用“synth”类和“synth”+ 一个数字的 id 创建的。这些数字根据计数器连续排列。

我不仅想将这些信息存储在数据库中，而且这样做的方式是（最终）当用户登录时，他们可以访问他们的 Div 列表作为他们之前登录的“保存状态”。

我什至不确定我是否会以适当的方式处理这件事。我只是将 createSynth() 函数粘贴在 Collection 插入列表中。我有一种“正确”地做到这一点的感觉，我应该有两个并行工作的事件 - 一个发送到列表 Collection，另一个发送到 dom/Template。然后，这两个块将交换数据（以某种方式），这些数据共同产生“已保存状态”的错觉。

下面是我到目前为止的代码。

**HTML**

```
<head>
  <title></title>
</head>

<body>

  {{> start}}

</body>

<template name="start">
  <input id ="amount" type ="number" />
  <input id ="submit" type="button" value="Add" />
  <div id="applicationArea"></div>
</template> 
```

**Javascript**

```
var lists = new Meteor.Collection("Lists");
var counter = 0;
counterSynth = 0;

if (Meteor.isClient) {

'use strict';
  Template.start.events({
    'mousedown #submit' : function () {
       var amount = document.getElementById("amount").value;

       for(i=0;i<amount;i++)  {
       lists.insert({SoundCircle:createSynth()});  // I am inserting the entire function call, is this the right path?

       }

        function createSynth() {
          var synth = document.createElement("div"); 
          synth.className  = "synth";                         
          synth.id = "synth" + (counterSynth++);
          applicationArea.appendChild(synth);

        };

    },

  });

}

if (Meteor.isServer) {
  Meteor.startup(function () {
    // code to run on server at startup
  });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T07:34:17.930

您必须使用稍微不同的方法，基本上只是将您的东西插入集合中，然后使用把手将其取出。我不完全确定您在做什么，但是您应该对以下内容有所了解

服务器js

```
synths = new Meteor.Collection('synths');   //This will store our synths 
```

客户端js：

```
synths = new Meteor.Collection('synths');   //This will store our synths

Template.start.events({
'mousedown #submit' : function () {
   var amount = document.getElementById("amount").value;

   for(i=0;i<amount;i++)  {
       lists.insert({class:"synth", id:counterSynth}); 
   }
},

});

Template.start.synth = function() {
  return synths.find();  //This gives data to the html below
} 
```

HTML：

```
{{#each synth}}
    <div class="{{class}}" id="synth{{id}}">
        Synth stuff here
    </div>
{{/each} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-08T00:33:13.857

最好每次在客户端需要 DIV 时动态地重新创建它们，这样 DIV 就不会存储在服务器上。如果您真的想在服务器上硬编码/存储 DIV，您只需将 HTML 作为字符串保存到 Meteor 集合中。

# apache2 - Apache2 Ubuntu 12.10 仅识别默认虚拟主机

> ID：15214789
> 
> 赞同：1
> 
> 时间：2013-03-05T02:29:22.460
> 
> 标签：apache2, virtualhost, ubuntu-10.10

我之前在使用其他版本的 Linux 时遇到过这个问题，通常这很愚蠢，但我认为我已经排除了所有这些可能性。我在 apache2 Ubuntu 12.10 上使用多个虚拟主机。根据 Ubuntu 默认设置：

[ports.conf]

```
NameVirtualHost *:80
Listen 80

<IfModule mod_ssl.c>
    # If you add NameVirtualHost *:443 here, you will also have to change
    # the VirtualHost statement in /etc/apache2/sites-available/default-ssl
    # to <VirtualHost *:443>
    # Server Name Indication for SSL named virtual hosts is currently not
    # supported by MSIE on Windows XP.
    Listen 443
</IfModule>

<IfModule mod_gnutls.c>
    Listen 443
</IfModule>

Apache2.conf is ubuntu default and loads ports.conf.

I have two virtualhosts
<VirtualHost *:80>

 ServerName *.staging.mydomain.com

 Options -Indexes FollowSymLinks

 UseCanonicalName Off
 DocumentRoot /var/www/staging/app/application/current/app

 ErrorLog "/var/log/error.log"
 CustomLog "/var/log/custom_error.log" common

 <ifModule env_module>
  SetEnv PHP_ENV staging
 </ifModule>
 <Directory />
  AllowOverride none
 </Directory>

 <Directory "/var/www/staging/app/application/current/app">
  RewriteEngine On

  RewriteBase /

  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteRule ^(.*)$ index.php?url=$1 [QSA,L]

 </Directory>

</VirtualHost>
<VirtualHost *:80>

 ServerName *.devtest.mydomain.com

 Options -Indexes FollowSymLinks

 UseCanonicalName Off
 DocumentRoot /var/www/devtest/app/application/current/app

 ErrorLog "/var/log/error.log"
 CustomLog "/var/log/custom_error.log" common

 <ifModule env_module>
  SetEnv PHP_ENV develop
 </ifModule>
 <Directory />
  AllowOverride none
 </Directory>

 <Directory "/var/www/devtest/app/application/current/app">
  RewriteEngine On

  RewriteBase /

  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteRule ^(.*)$ index.php?url=$1 [QSA,L]

 </Directory>

</VirtualHost> 
```

对 somevalue.devtest.mydomain.com 的请求解析为与 somevalue.staging.mydomain.com 相同的文档根。如果我翻转声明 VirtualHosts 的顺序，那么这会反过来；对 somevalue.staging.mydomain.com 的请求将解析为与 somevalue.devtest.mydomain.com 相同的文档根。无论我尝试了什么，我都无法让两个主机同时工作。我在 WAMP 上本地工作并且遇到了同样的问题，但它只是一个放错位置的 NameVirtualHost *:80 使它工作。将 Listen 和 NameVirtualHost 从 ports.conf 移到 apache2.conf 并删除 ports.conf 的 Include 并没有帮助。Apache 不会产生错误。日志级别设置为调试。

因为我知道你会问，是的，我已经使用 a2enmod 启用了这些站点。是的，我已经重新启动了 apache。我已经完全重新启动服务器。如果我启用了 ubuntu 附带的默认虚拟主机，`$sudo a2enmod default`那么它将捕获对 somevalue.devtest.mydomain.com 和 somevalue.staging.mydomain.com 的所有请求。

虚拟主机已启用并正在解析`$sudo apache2ctl -S`

```
VirtualHost configuration:
wildcard NameVirtualHosts and _default_ servers:
*:80                   is a NameVirtualHost
         default server *.staging.mydomain.com (/etc/apache2/sites-enabled/wild.mydomain.com:19)
         port 80 namevhost *.staging.mydomain.com (/etc/apache2/sites-enabled/wild.mydomain.com:19)
         port 80 namevhost *.devtest.mydomain.com (/etc/apache2/sites-enabled/wild.mydomain.com:51)**strong text** 
```

最后，请求在服务器上解析`curl -Lv http://test.staging.mydomain.com`

```
* About to connect() to test.staging.mydomain.com port 80 (#0)
*   Trying 1.1.1.1...
* connected
* Connected to test.staging.mydomain.com (1.1.1.1) port 80 (#0)
> GET / HTTP/1.1
> User-Agent: curl/7.27.0
> Host: test.staging.mydomain.com
> Accept: */*
>
* additional stuff not fine transfer.c:1037: 0 0
* HTTP 1.1 or later with persistent connection, pipelining supported
< HTTP/1.1 200 OK
< Date: Tue, 05 Mar 2013 02:22:28 GMT
< Server: Apache/2.2.22 (Ubuntu)
< X-Powered-By: PHP/5.4.6-1ubuntu1.1
< Vary: Accept-Encoding
< Content-Length: 18
< Content-Type: text/html
<
* Connection #0 to host test.staging.mydomainy.com left intact
<pre>staging</pre>* Closing connection #0 
```

我已经删除了 IP 和域，但它肯定可以正确解析。服务器上的一切都运行良好，事实上我什至没有注意到这个问题，直到我在登台环境中并注意到数据在 devtest 域上更新而不是登台。

我通常不会在这里寻求任何帮助，并且我已经搜索了网络和 Stack Overflow 之类的东西。这似乎不是端口名称不正确、未在 VirtualHosts 中声明 ServerName 或未声明 NameVirtualHost *:80 或在正确端口上侦听的问题。我完全被难住了。此外，同样的配置也适用于基于 RPM 的 Linux 版本。

# python - Python 3.3 的模块 _ssl 导入错误

> ID：15214791
> 
> 赞同：1
> 
> 时间：2013-03-05T02:29:33.043
> 
> 标签：python, ssl, importerror, python-3.3

我在最新版本的 Ubuntu 上使用 Python 3.3 编程。我正在为一个涉及与 Twitter 一起使用的库的项目编写代码。这是我拥有的终端的输出：

```
Traceback (most recent call last):
File "tryout.py", line 2, in <module>
  import twitter
File "/home/owner/Documents/twitter/__init__.py", line 15, in <module>
  from .stream import TwitterStream
File "/home/owner/Documents/twitter/stream.py", line 9, in <module>
  from ssl import SSLError
File "/usr/local/lib/python3.3/ssl.py", line 60, in <module>
  import _ssl             # if we can't import it, let the error propagate
ImportError: No module named '_ssl' 
```

我一直在寻找解决 _ssl 错误的方法，但似乎找不到我可以遵循的方法。

# iphone - UIScrollView 中 UITableViews 的数据源

> ID：15214793
> 
> 赞同：0
> 
> 时间：2013-03-05T02:29:40.467
> 
> 标签：iphone, objective-c, xcode, uitableview

我正在使用几个 UITableViews 垂直放置在彼此旁边的项目上。我必须显示这些表格，但是当我尝试为每个表格显示不同的表格内容时卡住了。这是代码：

```
-(void)setTheTable{
    int numberOfTables = 5;

    //height of the table
    CGFloat height = self.view.bounds.size.height;
    CGRect tableBounds = CGRectMake(0.0f, 0.0f, self.widthOfTheScreen, height- 30);

    self.scrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0.0f, 30.0f, self.widthOfTheScreen, height - 30.0f)];

    self.scrollView.contentSize = CGSizeMake(self.widthOfTheScreen * numberOfTables, height-30);
    self.scrollView.pagingEnabled = YES;
    self.scrollView.bounds = tableBounds;
    [self.view addSubview:self.scrollView];

    //put five tables
    CGRect tableFrame = tableBounds;
    tableFrame.origin.x = 0;
     for (int i = 0; i < numberOfTables; i++) {

        UITableView *tableView = [[UITableView alloc] initWithFrame:tableFrame style:UITableViewStylePlain];
         tableView.delegate = self;
         tableView.dataSource = self;
         UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];
         if (cell == nil) {
             cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Cell"];
         }
        switch (i) {
            case 0:
                tableView.backgroundColor = [UIColor yellowColor];
                tableView.tag = 0;
                cell.textLabel.text = @"section = 0 行0";
                break;
            case 1:
                tableView.backgroundColor = [UIColor blueColor];
                tableView.tag = 1;
                break;
            case 2:
                tableView.backgroundColor = [UIColor brownColor];
                tableView.tag = 2;
                break;
            case 3:
                tableView.backgroundColor = [UIColor greenColor];
                break;
            case 4:
                tableView.backgroundColor = [UIColor cyanColor];
                break;
            default:
                break;
        }

        [self.scrollView addSubview:tableView];
        tableFrame.origin.x += self.widthOfTheScreen;

    }
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return 3;
}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Cell"];
    }
    int num = tableView.tag;
    if(num == 1) {
        if(indexPath.row == 0) {
            cell.textLabel.text = @"section = 0 行0";
        } else if(indexPath.row == 1){
            cell.textLabel.text = @"section = 0 行1";
        } else {
            cell.textLabel.text = @"section = 0 行2";
        }
    } else {
        NSString *str = [[NSString alloc] initWithFormat:@"section = %d col %d",indexPath.section,indexPath.row];
        cell.textLabel.text = str;
    }
    return cell;
} 
```

我认为 tableview.tag 会有所帮助，但给了我 5 个相同的表。你们能给我一些想法来解决这个问题吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T02:57:37.957

首先，请参阅有关将 a 添加到 a 的[答案](https://stackoverflow.com/a/14969159/620197)，Apple 特别警告不要这样做（尽管他们没有在文档中包含警告，而不是您的错）。将您的表格作为子视图添加到**NOT** a （我建议彻底摆脱它）。`UITableView``UIScrollView``UITableView``UIView` **`UIScrollView`**

 **`UITableViewCell`其次，您只在`tableView:cellForRowAtIndexPath:`方法中创建一个。完全从你的 for 循环中删除所有对 any 的引用`UITableCell`（那些甚至没有被使用，它是徒劳的）。设置好表的数据源和委托后，调用`[tableView reloadData]`每个able，数据源方法将被自动调用。

由于您正在处理多个表，因此事情变得更加棘手。您需要保留对类中所有表视图的引用（在数组中，但最好是每个表视图的属性）。

您还需要知道在任何给定时间正在加载哪个表，例如：

```
-(UITableViewCell*)tablView:tableView cellForRowAtIndexPath:indexPath {
    UITableViewCell *cell;
    if ( tableView == self.tablView1 ) {
        // build your cells for table view 1
    }
    else if ( tableView == self.tableView2 ) {
        // build cells for table view 2
    }

    return cell;
} 
```

对于多个表，您可能需要为每个表考虑一个特定的委托，特别是如果每​​个表背后的数据模型大不相同，和/或每个表的 UI 都不同。

我不知道您的确切需求，但也考虑一个包含多个部分的表而不是多个表。

我还鼓励您阅读[iOS TableView 编程指南](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/tableview_iphone/AboutTableViewsiPhone/AboutTableViewsiPhone.html)，以及[关于 Delegates 和 Data Sources](http://developer.apple.com/library/ios/#documentation/General/Conceptual/CocoaEncyclopedia/DelegatesandDataSources/DelegatesandDataSources.html)的内容。**

# vim - 未找到映射

> ID：15214794
> 
> 赞同：11
> 
> 时间：2013-03-05T02:29:42.287
> 
> 标签：vim

启动 vim 然后 No mapping found 显示在底部。

运行命令：`vim -V20logfile`

```
line 3:   redir => res

line 4:     silent! execute a:cmd

line 5:   redir END

line 6:   let &verbosefile = oldverbosefile 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-05-06T19:44:11.053

我遇到过同样的问题。

我评论了所有地图，认为它们都很好。果然，vim加载无误。

然后，我重新引入了映射，直到有人破坏了它。果然，我已经忽略了 lhs 和 rhs 之间的空间。一旦我纠正了这一点，它就会再次完美运行。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-10-15T14:41:42.820

我发现调试 .vimrc 的最佳方法是启用调试并将其 pip 到日志文件中。检查文件并搜索错误。如果您收到的错误是“找不到映射”，请打开日志文件并搜索这些词。:/没有找到映射。

它会告诉你错误来自哪里。就我而言，我发现错误来自我安装的插件。我禁用了它，它又可以正常工作了。

在提示符处运行以下命令：

```
vim -V20 2>&1 | tee logfile 
```

# java - GUICE - 在运行时决定对象图

> ID：15214795
> 
> 赞同：2
> 
> 时间：2013-03-05T02:29:47.307
> 
> 标签：java, dependency-injection, guice

我正在审查 Guice。假设我有以下设置：

```
public interface IsEmailer {...}
public interface IsSpellChecker {...}
public class Emailer implements IsEmailer { 
       @Inject
       public class Emailer(final IsSpellChecker spellChecker)....
}
public class FrenchSpellChecker implements IsSpellChecker {....}
public class EnglishSpellChecker implements IsSpellChecker {....}
@BindingAnnotation public @interface English {}
@BindingAnnotation public @interface French {} 
```

然后在我的模块中，我将接口绑定到它们各自的实现，并使用各自的绑定注释对拼写检查器进行注释。

现在，假设基于运行时变量，我需要构建一个使用英语或法语拼写检查器的电子邮件程序。

我想在我的模块中使用命名提供程序：

```
@Provides
@English
IsEmailer provideEnglishEmailer() {
    return new Emailer(new EnglishSpellChecker());
}

@Provides
@French
IsEmailer provideFrenchEmailer() {
    return new Emailer(new FrenchSpellChecker());
} 
```

这像这样工作：

```
IsEmailer emailer = myModule.getInstance(Key.get(IsEmailer.class,
                French.class)); 
```

这是做这种事情的最干净的方法吗？毕竟，我不得不手动（在提供程序中）构建对象。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T22:22:14.693

首先一些注意事项：

*   通常，您希望尽可能避免使用`getInstance`，除了您的“根”元素（例如`YourApplication`）。在 Guice 提供的任何东西中，您最好的选择是要求注射`Provider<IsEmailer>`，或者也许`@English Provider<IsEmailer>`和`@French Provider<IsEmailer>`。`get`在调用 之前，Guice 不会真正创建元素`Provider`，因此创建 的开销`Provider`非常轻。

*   您不必绑定到提供程序来获取提供程序。Guice 将自动、透明地解决任何对`X`、`Provider<X>`或`@Provides X`的任何注入的`X`绑定。`Provider<X>`

*   `Provider`实现可以采用注入参数，`@Provides`方法也可以。

*   如果你想将很多东西绑定到`@English`or `@French`，你也可以研究[private modules](http://google-guice.googlecode.com/git/javadoc/com/google/inject/PrivateModule.html)，因为这对我来说听起来像是[“机器人腿”](http://code.google.com/p/google-guice/wiki/FrequentlyAskedQuestions#How_do_I_build_two_similar_but_slightly_different_trees_of_objec)问题。

最简单的方法是简单地使用第一个子弹并注入`Provider`每个子弹，特别是如果你只这样做一次。

如果您的运行时变量可通过 Guice 访问，您也可以将其绑定到模块中。`@Provides`把它和上面的注释一起放在你的模块中。（如前所述，您可能希望将它们重写为分别接受 an`EnglishSpellChecker`和`FrenchSpellChecker`as 参数，以使拼写检查器能够注入它们自己的依赖项。）

```
@Provides IsEmailer provideEmailer(Settings settings,
    @English Provider<IsEmailer> englishEmailer,
    @French Provider<IsEmailer> frenchEmailer) {
  if (settings.isEnglish()) {
    return englishEmailer.get();
  } else {
    return frenchEmailer.get();
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T01:45:22.293

您可以使用[MapBinder](http://code.google.com/p/google-guice/wiki/Multibindings)。这将允许您注入一个`Map<Language, IsSpellChecker>`，然后在运行时检索适当的拼写检查器。

# sql - 只有复合主键的数据库表有什么用，没有别的？

> ID：15214796
> 
> 赞同：0
> 
> 时间：2013-03-05T02:29:48.890
> 
> 标签：sql, database, composite-primary-key

就像上面的问题一样。另外，这个表的主键是另外一个表的外键，那么如果不通过这个表的复合主键将它们映射到原来的表有什么区别呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T02:37:32.217

1) 如果没有整数主键，许多任务的性能会受到影响。

2) 许多自动化代码生成的工具需要一个整数主键。

# java - 使用特定准则从不同类调用方法

> ID：15214799
> 
> 赞同：-1
> 
> 时间：2013-03-05T02:29:54.330
> 
> 标签：java, jakarta-ee

我需要从不同的类调用一个方法，但我遇到了麻烦。难以掌握。我需要显示出价最高者的姓名，在**if**部分中注明 println 和出价。

**指南：** 我需要使用 Person 类的 getName 方法。我首先需要获取 Person 类的对象。通过使用highestBid 对象并调用getBidder 方法来做到这一点；它返回一个 Person 对象。使用该对象调用 getName() 方法。

这是我的代码：

```
public void close(int lotNumber, String description)
{
     for(Lot lot : lots) 
     {
         System.out.println(lotNumber + description); //print lot number and description.
         Bid highestBid = lot.getHighestBid(); //get the highest bid for the lot.
         if (highestBid != null) 
         {
             System.out.println(bidder + highestBid.getValue()); //print bidder and highest bid value
            }     
         else
         {
             System.out.println("Not sold"); //if not sold print "Not sold"
            }
        }
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T02:37:58.057

假设 getName() 返回一个字符串：

```
public void close(int lotNumber, String description)
{
 for(Lot lot : lots) 
 {
     System.out.println(lotNumber + description); //print lot number and description.
     Bid highestBid = lot.getHighestBid(); //get the highest bid for the lot.
     if (highestBid != null) 
     {
         String name = highestBid.getBidder().getName();
         System.out.println(name + " " + highestBid.getValue()); //print bidder and highest bid value
        }     
     else
     {
         System.out.println("Not sold"); //if not sold print "Not sold"
        }
    }
} 
```

# objective-c - 如果数组为零，则无法执行其他操作

> ID：15214800
> 
> 赞同：0
> 
> 时间：2013-03-05T02:29:54.610
> 
> 标签：objective-c

我创建了一个在通讯录中搜索人的方法，我想将结果作为数组返回，如果有结果打印出来，否则打印“未找到”。

由于某种原因，如果数组不是 nil，我可以打印结果，但 else 不起作用......它甚至没有给我错误，这是代码：

主文件

```
NSMutableArray *result = [[NSMutableArray alloc] init];

        result = [myBook searchName:@"jack"];

        if (result != nil){
            for (AddressCards *nextCard in result)
            NSLog(@"%@          %@", nextCard.name, nextCard.email);
        }

        else
            NSLog(@"Not found"); 
```

地址簿.m

```
-(NSMutableArray *) searchName:(NSString *) someName{

    NSMutableArray *namsFound = [[NSMutableArray alloc] init];

    for (AddressCards *addressCard in book){

        if ([addressCard.name rangeOfString:someName options:NSCaseInsensitiveSearch].location != NSNotFound)
            [namsFound addObject:addressCard];
    }

    return namsFound;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T02:35:55.663

您的`searchName:`方法永远不会返回 nil。它有时会返回一个空数组，但这不是一回事。

你可能会做这样的事情`searchName:`：

`return [namsFound count]? namsFound : nil;`

如果 namsFound 有 1 个或多个元素（换句话说，如果找到一些名称），这将返回 namsFound。否则，它将返回零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T02:38:30.130

如果你改变这个：

```
if (result != nil){ 
```

为此，它应该起作用：

```
if (result.count) { 
```

你总是返回一个非零指针，因为你总是在搜索方法中分配/初始化数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T02:38:53.413

而不是`if (result != nil){`，使用`if (result.count > 0){`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T02:51:34.947

它不会打印`"Not found"`，因为它永远不会打印`nil`。结果总是`!= nil`因为即使在没有找到搜索名称的情况下，它也会返回一个数组——一个未填充的数组，即一个元素为零的数组。`if (result.count){`是 IMO 最优雅的解决方案，因为`0`它相当于 boolean `false`，所以`result.count`返回的 a`0`将直接返回`else`。

# java - 每次点击提交按钮时，如何添加一个或增加整数？

> ID：15214805
> 
> 赞同：0
> 
> 时间：2013-03-05T02:30:24.420
> 
> 标签：java, html, jsp

.jsp 文件

```
<html>
<body>
<form method="post" action="index.jsp" />

<% 
String integer = request.getParameter("integer"); 
%>

<%
int x = 0;
try { x = Integer.parseInt("integer"); }
catch (Exception e) { x = 0; }
%>

<input type="text" name="integer" value="<%=x%>"/>
<input type="submit" value="submit" />

</form>
</body>
</html> 
```

每次点击提交按钮时，如何添加或增加 x 输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T04:38:40.370

```
Integer.parseInt("integer"); -> "integer" string is not a number therefore it will be a wrong format. 
```

并且您每次都在初始化 x = 0 并且 x 没有增量

你可以试试这个：

```
<form method="post" action="" />

<%
  String integer = request.getParameter("integer");          
  int x = integer != null ? Integer.parseInt(integer) : 0;      
  ++x;
%>

<input type="text" name="integer" value="<%=x%>"/>
<input type="submit" value="submit" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T02:33:17.880

```
<html>
<body>
<form method="post" action="index.jsp" />

<% 
String integer = request.getParameter("integer"); 
%>

<%
int x = 0;
try { x = Integer.parseInt("integer"); }
catch (Exception e) { x = 0; }
x = x + 1;
%>

<input type="text" name="integer" value="<%=x%>"/>
<input type="submit" value="submit" />

</form>
</body>
</html> 
```

# objective-c - 使用 NSUserDefaults 保存数据

> ID：15214806
> 
> 赞同：0
> 
> 时间：2013-03-05T02:30:28.943
> 
> 标签：objective-c

我创建了一个问答游戏。这是我的代码的一部分：

```
- (void) viewDidLoad
{
logos = [[NSMutableArray alloc] init];
[logos addObject:@"adidas"];
[logos addObject:@"nike"];
[logos addObject:@"puma"];

[self showLogo];
}

int currentQuestionIndex;

- (void) showLogo
{

currentQuestionIndex++;

NSString *question = [logos objectAtIndex:currentQuestionIndex];

[_questionImage setImage:[UIImage imageNamed:question]];

...

} 
```

如果用户选择了正确的答案，“showLogo”将被再次调用到下一个问题。至此，Level 完成。

一切都很好。

请帮我保存信息/关卡。如果关卡完成，当用户启动游戏时，他必须从保存的关卡开始。

这是我已经尝试过的：

```
- (void) checkAnswer
{

///... if user answered right

[[NSUserDefaults standardUserDefaults] setInteger:currentQuestionIndex forKey:@"currentLevel"];

[self showLogo];
/// so, I tried to save "currentQuestionIndex" forKey currentLevel, and call "showLogo"
} 
```

这里是修改的“showLogo”

```
- (void) showLogo
{

int savedLevel = [[NSUserDefaults standardUserDefaults] integerForKey:@"currentLevel"];

currentQuestionIndex = savedLevel+1 ;

NSString *question = [logos objectAtIndex:currentQuestionIndex];

[_questionImage setImage:[UIImage imageNamed:question]];

...

} 
```

但不起作用..使用这种方法，我试图保存分数，它也有效..

请帮忙。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T03:03:11.530

如[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html)中所述，您不能将原语 (int) 保存到 NSUserDefaults 中。您必须先将 int 转换为 NSNumber，然后才能保存它，方法是执行以下操作：

```
NSNumber *questionIndex = [[NSNumber alloc] numberWithInt:currentQuestionIndex]; 
```

然后，当你重新加载它时，如果你再次需要一个 int ，你可以使用`intValue`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T03:02:23.323

在中设置键值后`NSUserDefaults`，您必须使用该`synchronize`方法保存它。

```
[[NSUserDefaults standardUserDefaults] setInteger:currentQuestionIndex forKey:@"currentLevel"];
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

# android - 设置多个家庭启动器应用程序不起作用

> ID：15214807
> 
> 赞同：0
> 
> 时间：2013-03-05T02:30:46.153
> 
> 标签：android, android-event, android-launcher

背景信息：我想创建一个儿童锁应用程序。`Home`因此，当用户在应用程序中时，我需要禁用所有键（包括键）。我基本上想要一个与此类似的应用[程序](https://play.google.com/store/apps/details?id=marcone.toddlerlock&hl=en)。

问题：如果我将另一个应用程序设置为默认主页启动器（例如，在 HTC 中的 Home Sense UI 或三星手机中的类似内容），然后将我的应用程序设置为默认主页启动器，然后按`Home`键将我带回主屏幕（即使我将我的应用程序设置为默认的主启动器！）。现在，如果我没有将任何其他应用程序设置为默认主页启动器，只有我自己的应用程序，那么没有问题，当我在我的应用程序中并按下`Home`键时，我会留在应用程序中。

为什么在将应用程序设置为默认应用程序之前设置默认家庭应用程序时，`Home`密钥不起作用（即离开我的应用程序）？但是当我只将我的应用程序设置为默认值时，`Home`密钥就可以工作（即留在我的应用程序中）。

以下是我的测试应用程序的示例代码：

AndroidManifest.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.testspinner"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.testspinner.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.HOME" />
                <category android:name="android.intent.category.DEFAULT" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

MainActivity.java：

```
public class MainActivity extends Activity {

    private PackageManager pm;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        this.pm = getPackageManager();
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    public boolean isHomeActivity() {
        final IntentFilter filter = new IntentFilter(Intent.ACTION_MAIN);
        filter.addCategory(Intent.CATEGORY_HOME);

        List<IntentFilter> filters = new ArrayList<IntentFilter>();
        filters.add(filter);

        final String myPackageName = getPackageName();
        List<ComponentName> activities = new ArrayList<ComponentName>();
        final PackageManager packageManager = (PackageManager) getPackageManager();

        packageManager.getPreferredActivities(filters, activities, null);

        for (ComponentName activity : activities) {
            if (myPackageName.equals(activity.getPackageName())) {
                return true;
            }
        }
        return false;
    }

    protected void onResume() {
        super.onResume();
        if (!isHomeActivity()) {
            Intent localIntent = new Intent(Intent.ACTION_MAIN);
            localIntent.addCategory(Intent.CATEGORY_HOME);
            localIntent.setComponent(new ComponentName("android",
                    "com.android.internal.app.ResolverActivity"));
            startActivity(localIntent);
        }
    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        switch (keyCode) {
        case KeyEvent.KEYCODE_BACK: {
            finish();
        }
        }
        return false;
    }
} 
```

活动主.xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="Large Text"
        android:textAppearance="?android:attr/textAppearanceLarge" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T02:59:44.060

你可以在 Github 上查看这个项目：[https ://github.com/Neamar/Summon](https://github.com/Neamar/Summon)

这是一个可以正常工作的替代家庭应用程序。

我看不出是什么可以创建您所描述的行为。这可能是特定于设备的问题。

您是否在设置应用程序后尝试重新启动？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T05:15:35.360

如果您使用的是某些版本的 Android，您实际上必须清除已设置为默认值的应用程序的默认值。我遇到了和你一样的问题。然后我在应用市场上查看了名为 Home Switcher for Froyo 的应用。在该应用程序中，如果设置了默认值，Home Switcher 会调出默认启动器的应用程序设置屏幕，并告诉用户选择“清除默认值”按钮。这是我知道的唯一方法。

所以在你的应用程序中，你必须检查一些不同的东西。

1.  如果没有设置默认启动器，请设置你的（就像你上面说的它已经工作了）

2.  如果设置了默认值，启动其应用程序设置，提示用户选择“清除默认值”，然后让他们按下主页按钮并选择您的应用程序

我希望这会有所帮助，我不知道我是否是询问代码示例的最佳人选，因为我的应用程序仍然有点问题，但我可以为您指出一些堆栈溢出的答案：

[https://stackoverflow.com/a/4772481/1817139](https://stackoverflow.com/a/4772481/1817139)

[https://stackoverflow.com/a/10344985/1817139](https://stackoverflow.com/a/10344985/1817139)

祝你好运，如果你遇到困难，请给我发电子邮件（lus u s_v [i] r at yahoo） - 忽略括号和空格

# java - 经过长时间的等待蓝牙套接字状态混乱

> ID：15214808
> 
> 赞同：0
> 
> 时间：2013-03-05T02:30:55.210
> 
> 标签：java, android, sockets, bluetooth

我目前正在尝试解决我在使用需要蓝牙连接的 Android 应用时遇到的问题。有那么一刻，一切似乎都正常，但是当我要连接的从属蓝牙设备未通电时，我注意到一些奇怪的事情。这是我的代码：

```
private void connectDevice() {
    mBluetoothAdapter.cancelDiscovery();
    BluetoothDevice device = mBluetoothAdapter.getRemoteDevice(address);
    try {
        btSocket = createBluetoothSocket(device);
    } catch (IOException e) {
        errorExit("Fatal Error", "Socket create failed: " + e.getMessage() + ".");
    }

    //Try to establish the connection.  This will block until it connects.
    Log.d(TAG, "...Connecting...");
    try {
      btSocket.connect();
      Log.d(TAG, "....Connection ok...");
    } catch (IOException e) {
      try {
        btSocket.close();
      } catch (IOException e2) {
        errorExit("Fatal Error", "Unable to close socket during connection failure" + e2.getMessage() + ".");
      }
    }

    //Create a data stream so we can talk to server.
    Log.d(TAG, "...Create Socket...");
    mConnectedThread = new ConnectedThread(btSocket);
    mConnectedThread.start();
    mActionBar.setSubtitle("Connected");

    return;
    } 
```

这里是我调用这个方法的地方：

```
 protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    switch(requestCode){
    case REQUEST_ENABLE_BT:
        if (resultCode == RESULT_OK) {
            Toast.makeText(this, R.string.bt_enabled, Toast.LENGTH_SHORT).show();
            setupCom();
            break;
        }
        else {
            // User did not enable Bluetooth or an error occurred
            if(D)   Log.d(TAG, "BT not enabled");
            Toast.makeText(this, R.string.bt_not_enabled_leaving, Toast.LENGTH_SHORT).show();
            finish();
            break;
        }
    case REQUEST_CONNECT_DEVICE:
        if (resultCode == RESULT_OK){
            retrieveAddresse(data);
            connectDevice();
        }
        break;
    }
    return;
} 
```

我的问题是，当我不在范围内或我要连接的设备未打开电源时，即使由于 Android 操作系统不想要而无法连接，connectDevice() 方法似乎也会执行所有代码被连接进程阻塞。我注意到这个问题是因为 mActionBar.setSubtitle("Connected"); 被执行，因为当我在范围内或从属蓝牙模块打开时尝试重新连接时。除非我重新启动我的应用程序，否则我无法连接到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T03:19:24.373

把这些行：

```
mConnectedThread = new ConnectedThread(btSocket);
mConnectedThread.start();
mActionBar.setSubtitle("Connecté"); 
```

第一次尝试里面。这样，只有在设备建立连接时才会执行它们。实际上它们在 try/catch 之外，即使没有连接，它们也将始终执行。

# c# - 在数组上使用 System.Linq 中的 .Any 来查找字符串

> ID：15214809
> 
> 赞同：1
> 
> 时间：2013-03-05T02:31:03.523
> 
> 标签：c#, arrays, string, linq

我试图找出我的数组中的特定单元格是否包含给定字符串的一部分。由于数组不使用 .Contains 我正在使用 .Any，但似乎我对 .Any 工作原理的理解太模糊而无法正确处理。

```
public void ProcessCSV (string typeName) {

    for (int y = 0; y < CSVReader.grid.GetUpperBound(1); y++) {
        if (CSVReader.grid[0,y] != null) {
            if ((CSVReader.grid[0,y].Any(s => typeName.Contains(s)))) {
                  // (add it to a new list) 
```

所以我输入了“Pork”、“Farm”等字符串。有时它似乎工作得很好，例如，如果 typeName 是“Farm”，我只能从数组中取回包含 [0, y] 中的字符串的行。但在其他时候，如果我使用 Farm、另一个字符串或随机乱码，它只会返回包含任何字符串的每一行。

当我以这种方式调用 .Any 时实际发生了什么？我可以使用一些替代方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T02:36:23.867

你可能有错误的方式。

`Any`将返回一个布尔值，指示序列中的*任何*元素是否满足条件。当您键入 时`Any(s => ...)`，`s`是要检查的序列中的元素。

所以当你输入：

```
.Any(s => typeName.Contains(s)) 
```

...您本质上是在问：

> 字符串中是否包含序列中的*任何*元素？`typeName`

例如，如果`typeName`是`Pork`，`Any()`只会`true`在 时返回`"Pork".Contains("ork")`。你的意思可能是相反的：

```
.Any(s => s.Contains(typeName)) 
```

> 是否有*任何*元素包含字符串`typeName`？

所以`"Pork and beef".Contains("Pork")`返回`true`。

* * *

如果您想要满足条件的序列中的*第一个*`FirstOrDefault`元素（而不是布尔真值），请使用（或者，当您知道总是至少有一个时，您可以使用`First`）。例如：

```
.FirstOrDefault(s => typeName.Contains(s)) 
```

> 从包含在字符串中的序列中返回*第一个*`typeName`元素；或没有时的默认值。

或者，反过来（我仍然认为你的意思）：

```
.FirstOrDefault(s => s.Contains(typeName)) 
```

> 从包含字符串的序列中返回*第一个*`typeName`元素；或没有时的默认值。

# servlets - HttpServletRequest 不返回整个 cookie

> ID：15214811
> 
> 赞同：1
> 
> 时间：2013-03-05T02:31:19.307
> 
> 标签：servlets, cookies, jersey

我的 HttpServletRequest.getCookies() 没有返回整个 cookie 值。cookie 值是另一个键值对，因此可能会弄乱解析。我需要知道如何解决这个问题。

所以这是背景。我正在使用新的 apache2.4 mod_auth_form，它通过在 cookie 中设置用户名和密码来进行身份验证。cookie 看起来像这样：“session=private-user=myUser&private-pw=myPass”

我在 Apache 上设置了一个代理，以便将某些 REST 调用传递给一个 tomcat 服务，在那里我有一个 Jersey REST 类在等待它们。

我可以在浏览器中看到 cookie。我还可以在 php.ini 中看到完整的 cookie。但是，在我的 java 类中，HttpServletRequest 具有“会话”cookie，但值只是“私人用户”，而不是我期望的“私人用户=myUser&private-pw=myPass”。

我最好的猜测是带有 = 和 & 符号的键值对搞砸了解析。我怎样才能获得完整的原始 cookie 价值？

如果重要的话，这是我的java代码：

```
private String getAuthenticatedUser(HttpServletRequest httpRequest) {
        String user = null;
        Cookie[] cookies = httpRequest.getCookies();
        for(Cookie cookie : cookies) {
            System.out.println(cookie.getValue());
        }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:20:52.107

我使用 Jersey 的 @CookieParam 注释找到了一种解决方法。

```
@GET
@Path("/")
public Response myRestCall(@CookieParam("session") String sessionValue) {
  System.out.println(sessionValue);
} 
```

Jersey 似乎在解析这种类型的键值 cookie 方面做得更好，并按我的预期返回了“private-user=myUser&private-pw=myPass”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T11:09:37.300

在将值设置到 cookie 之前，使用 URLEncoder 对值进行编码。

```
String s = new String("private-user=myUser&private-pw=myPass");
String encoded = URLEncoder.encode(s); 
```

并使用 URLDecoder 将其解码回原始值

```
URLDecoder.decode(encoded); 
```

# python - 如何在 PyPy 中导入 .so 模块？

> ID：15214813
> 
> 赞同：2
> 
> 时间：2013-03-05T02:31:50.917
> 
> 标签：python, interpreter, cpython, pypy, netcdf

我对 PyPy 很陌生，我使用 PyPy1.9 来解释我的 Python 代码。

如您所知，CPython 解释器可以导入打包在 .so 文件中的模块，该文件由 C/C++ 代码编译而成。

但是PyPy1.9解释器告诉我他在.so文件中找不到模块，我的代码有点慢，我想优化性能，求助！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T02:55:18.413

首先，[CPyExt](http://morepypy.blogspot.com/2010/04/using-cpython-extension-modules-with.html)一直在 PyPy 中......我忘记了确切的版本，但几年前，远在 1.9 之前。

基本上，您所要做的就是构建和安装模块，就像使用 CPython 一样。

确保使用 PyPy 进行安装，而不是使用 CPython。除了系统上的每个 Python 安装都有一个单独的`site-packages`目录这一​​事实之外，CPyExt 还需要针对 PyPy 头文件和库而不是 CPython 构建模块。

如果您要手动安装，只需执行`pypy setup.py install`而不是`python setup.py install`. 如果您使用`pip`or `easy_install`，这些工具的 PyPy 版本通常命名为`pip_pypy`and `easy_install_pypy`。

所以，如果你已经安装了`pip`，它应该很简单：

```
pip_pypy install foo 
```

（当然，可能带有`sudo`。）

如果您尚未[安装`pip`](http://www.pip-installer.org/en/1.3.X/installing.html)，请按照与 CPython 相同的方式为 PyPy 安装它。例如：

```
curl -O https://raw.github.com/pypa/pip/master/contrib/get-pip.py
pypy get-pip.py 
```

如果您使用的是二进制安装程序，那么显然您必须获取 PyPy-1.9 的二进制安装程序。而且，如果没有，则不能使用二进制安装程序。（就像如果你想`foo`在 32 位 Windows 上安装 CPython 2.7 并且它们只有 2.6 包或 64 位包。）

* * *

最后一点：有些包还不能与 CPyExt 一起使用。最值得注意的是，`numpy`所有依赖于它的东西，以及任何其他需要绑定 Fortran 代码的东西。其中一些包将检查 CPython（或检查非 PyPy？）并给你一个早期的错误。其他人可能会尝试构建并失败。其他人可能会成功构建，但在某些情况下无法工作（例如，他们中的一些人在具有超过 1 个线程的任何程序中失败，因为他们试图对 GIL 感兴趣）。但最简单的方法是尝试并查看。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-05T02:53:57.703

对于 PyPy，您需要使用类似[CFFI](https://bitbucket.org/cffi/cffi)的东西，它使用[外部函数接口](http://en.wikipedia.org/wiki/Foreign_function_interface)来访问库代码（有关更多信息，请参阅[加载库](http://cffi.readthedocs.org/en/latest/#loading-libraries)部分）。

**编辑**：我接受上述答案的纠正。我将把这个答案留在这里，尽管有一个替代方法来访问库并简单地接受合理的反对票。

# r - 了解 R 的 IRanges 包中的代码 这段代码是什么意思？

> ID：15214815
> 
> 赞同：0
> 
> 时间：2013-03-05T02:32:03.583
> 
> 标签：r

我是新来的。我只是浏览了一些问题，发现这段代码我不理解，可能对我有用....他们在 R 中下载了一个 IRanges 包，代码与间隔有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T03:32:14.737

有关更多信息，`tapply`请参阅 ?tapply。

这里使用`cut`而不是包 IRanges 的代码版本：

```
 idx <- seq(1, ncol(df), by=2)
     o1 <- lapply(idx, function(i) {  
     ## create grouping factor
     fac <- cut(df[,i],seq(0,max(df[i]),30),labels=F)
     fac[is.na(fac)] <- max(fac,na.rm=T)+1
     # compute the mean by interval
     mean=tapply(df[,i+1],fac, mean)
     # put the result in a data.frame
     fac=levels(as.factor(fac))
     d <- data.frame(mean=mean,fac=fac)
}) 
```

将此应用于此[结构](https://stackoverflow.com/questions/15041684/r-programming-help-in-editing-code)：

```
[1]]
      mean fac
1 1.300000   1
2 1.450000   2
3 2.925000   3
4 1.700000   4
5 2.333333   5

[[2]]
      mean fac
1 2.500000   1
2 2.350000   2
3 1.516667   3

[[3]]
  mean fac
1 1.78   1
2 1.90   2 
```

# amazon-web-services - 谁触发了 aws 用户数据？

> ID：15214816
> 
> 赞同：0
> 
> 时间：2013-03-05T02:32:06.783
> 
> 标签：amazon-web-services, user-data

我已经在AWS上看到了所有的文档，但我仍然不知道操作系统安装后是谁触发了用户数据。启动脚本是自动运行用户数据（并下载用户数据的内容）还是 AWS 服务器将根据用户是否输入用户数据在此实例上“调用”用户数据。“引擎盖下”发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T04:25:06.133

实例是否运行用户数据脚本完全取决于 AMI 及其附带的软件。有些 AMI 可以，有些不可以，您可以自行阅读提供商的文档或对其进行测试。

Ubuntu AMI 和 Amazon Linux AMI 安装了 cloud-init 软件包。该软件在启动时会在您的实例（服务器）上运行各种进程。其中一个进程检查它是否是实例启动的第一个，以及用户数据是否以字符“#！”开头。如果这两个都为真，则用户数据将在实例上运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-20T09:16:20.007

所有机器元数据都由 cloud-init 从数据服务器抓取，它处理云实例的早期初始化。您可以在**/var/log/cloud-init.log**中找到该操作的详细信息。IE。

```
...    

2013-10-14 21:06:50,504 - DataSourceEc2.py[DEBUG]: removed the following from metadata urls: ['http://instance-data:8773']
2013-10-14 21:06:50,596 - DataSourceEc2.py[DEBUG]: Using metadata source: 'http://169.254.169.254'
2013-10-14 21:06:53,449 - DataSourceEc2.py[DEBUG]: crawl of metadata service took 2s
... 
```

Metada 服务器识别客户端并为他提供适当的数据。如果你打电话

```
curl http://169.254.169.254/latest/user-data 
```

从云端机器，您将获得用户传递的用户数据。

# java - 读取文件一个罐子

> ID：15214817
> 
> 赞同：0
> 
> 时间：2013-03-05T02:32:10.543
> 
> 标签：java, classpath

是否可以在 jar 中读取文件？

我的项目结构如下所示：

```
Root:

 ->src

 ->lib -<my.jar> 
```

在 lib 目录中有一个包含文本文件的 jar(my.jar)

这是清单文件中的类路径： Class-Path: ./lib/my.jar

我正在尝试像这样加载文本文件：

```
 InputStream in = MyClass.class.getResourceAsStream("/text.license"); 
```

知道如何读取文件吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T03:01:04.347

[http://docs.oracle.com/javase/6/docs/api/java/util/jar/JarFile.html](http://docs.oracle.com/javase/6/docs/api/java/util/jar/JarFile.html)

您最好的选择是使用 JarFile 类（处理 zip 压缩）

# java - 如何用新值替换 XML 标记之间的旧值

> ID：15214818
> 
> 赞同：1
> 
> 时间：2013-03-05T02:32:18.167
> 
> 标签：java, xml, setattribute

我必须用下面的 XML替换`oldValue`日期标记中的。`newValue`我正在使用`setAttribute`函数来做到这一点，但它似乎不起作用。如果我必须使用不同的功能来替换标签之间的文本，请告诉我。

*我的文件.xml*

```
<?xml version="1.0" encoding="UTF-8" ?>  
<root>  
        <date>oldValue</date>  
</root> 
```

*替换.java*

```
Document doc = builder.parse(new File("myFile.xml"));  
Element root = doc.getDocumentElement();  
System.out.println("Before");  
System.out.println("Using getElementByTagName date: " + root.getElementsByTagName("date").item(0).getTextContent());  
System.out.println("Using getAttribute        date: " + root.getAttribute("date"));
root.setAttribute("date", "newValue");  
System.out.println("After");  
System.out.println("Using getElementByTagName date: " + root.getElementsByTagName("date").item(0).getTextContent());  
System.out.println("Using getAttribute        date: " + root.getAttribute("date")); 
```

*输出：*

```
**Before**  
 Using getElementByTagName date: oldValue  
 Using getAttribute        date:  
 **After**  
 Using getElementByTagName date: oldValue  
 Using getAttribute        date: test 
```

通过大量阅读/实验，我找到`setAttribute()`了像这样替换 XML 的工作。但是，这对我不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T02:42:10.097

您需要[setTextContent(String textContent)](http://docs.oracle.com/javase/1.5.0/docs/api/org/w3c/dom/Node.html#setTextContent%28java.lang.String%29)方法而不是`setAttribute`方法。

```
root.getElementsByTagName("date").item(0).setTextContent("newValue"); 
```

`oldValue`是元素，`TextContent`而`<date>`不是属性。[在这里](http://www.w3schools.com/xml/xml_attributes.asp)查看什么是属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T02:39:34.100

如果你设置属性你改变节点根的属性，所以它会像`<root attrName = "attrValue"`>

有些问题可以帮助您找到答案。

[在 java、dom、xml 解析中设置新节点值时出现问题，](https://stackoverflow.com/questions/4681000/problems-setting-a-new-node-value-in-java-dom-xml-parsing)
[使用 jdom 将值动态设置为 xml](https://stackoverflow.com/questions/10974766/dynamically-set-value-to-xml-using-jdom)

# mysql - 在 mysql 中，我如何查询多个测试中每个分数的高于、高于和低于值？如果有计算的百分位排名，则加分

> ID：15214827
> 
> 赞同：0
> 
> 时间：2013-03-05T02:33:22.323
> 
> 标签：mysql, sql, subquery, pivot-table

tbl 分数：（csv；我不知道如何在此处格式化表模式）

```
test_id, student_id, score   
1, 1, 75  
1, 2, 84  
1, 3, 60  
2, 1, 82  
1, 4, 90  
1, 5, 75  
2, 2, 70  
2, 3, 90  
2, 5, 76 
```

我需要做的是，对于每个分数的每个测试，计算该分数的学生人数，然后找出每个测试的分数是多少百分比。

我使用查询成功计算了每个分数的学生人数：

```
SELECT test_id, score, COUNT(student_id) as num_students FROM Scores GROUP BY test_id, score 
```

在这一点上，我试图为每个测试的每个分数获取#at、#below 和#above，以便我可以尝试计算每个分数的百分位数。

这会是某种数据透视表吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T02:36:27.877

在 MySQL 中，您需要使用相关子查询来执行此操作。以下是学生人数的示例：

```
 SELECT test_id, score, COUNT(student_id) as num_students,
        (select count(*) from scores s2 where s2.test_id = s.test_id and s2.score < s.score
        ) as below
 FROM Scores s
 GROUP BY test_id, score 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T02:58:34.833

它不一定是相关的，但由于交叉连接和不同，它可能会表现更差~~我不确定它会表现得更好或更差~~：

```
SELECT s.test_id, 
       s.score, 
       Count(DISTINCT s.student_id) AS num_students, 
       Count(DISTINCT z.student_id) AS below 
FROM   scores s 
       LEFT JOIN scores z 
              ON s.test_id = z.test_id 
                 AND s.score > z.score 
GROUP  BY s.test_id, 
          s.score 
ORDER  BY s.test_id, 
          s.score; 
```

是 [http://sqlfiddle.com/#!2/fd824/13](http://sqlfiddle.com/#!2/fd824/13)

# objective-c - 对象数组不会在整个 iOS 程序中持续存在

> ID：15214830
> 
> 赞同：0
> 
> 时间：2013-03-05T02:33:35.410
> 
> 标签：objective-c, cocoa-touch

所以我正在制作一个解析 JSON 并创建关联 UITableView 的应用程序。这是一些代码：

```
 NSData *jsonData = [json dataUsingEncoding:NSASCIIStringEncoding];
        NSDictionary *jsonDict = [NSJSONSerialization JSONObjectWithData:jsonData
                                                                 options:kNilOptions
                                                                   error:&error];
        NSArray *tempArray = [NSArray arrayWithObjects:@"Call Support Desk", @"Call Genius Bar", nil];

        for (NSString *name in [jsonDict valueForKeyPath:@"name"]) {
            NSString *tempString = [[NSString alloc] initWithString:name];
            Company *company = [[Company alloc] initWithName:tempString available_actions:tempArray];
            [self addCompany:company];
            NSLog(@"array: %@", _companyList); 
```

当 NSLog 打印出 Array 时，它说有两个对象并且具有与对象关联的所有正确数据。后来当我返回数组中的对象数（应该是 2）时，它说没有：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [self.dataController countOfList];
} 
```

我是 iOS 编程新手，因此我们将不胜感激任何建议

# php - 如何通过 1 个 php/mysql 结果循环多次

> ID：15214831
> 
> 赞同：0
> 
> 时间：2013-03-05T02:33:37.953
> 
> 标签：php, mysql

想知道是否有更简单的方法可以做到这一点......

我有一个包含一堆行的表，需要根据名为“page_group”的 1 列上的特定值分别显示它们。现在，当我将结果的指针重置为零时它确实有效，但想知道是否有一种更简单的编码方式，因为至少有 15 个不同的部分对结果进行分组......？

```
//this is the query
$q_home = mysql_query("SELECT * FROM pages WHERE page_nav = 'No' ORDER BY page_group ASC");

//this would show results 1, showing all rows that have the value "sample1"
<h3>Result 1</h3>
<ul>
<? 
    while($r_nav = mysql_fetch_assoc($q_home)){
      $group_folder = $r_nav['page_group'];
      if ($r_access["$group_folder"] == "Yes" && $group_folder == 'sample1') { 
            $access = 'block;'; 
        } else { 
            $access = 'none;'; 
        } {;
            echo '<li style="display:'.$access.'"><a href="'.$group_folder.'/'.$r_nav['page_url'].'.php">'.$r_nav['page_name'].'</a></li>';
      }
    }
?>
</ul>   

//this would be result 2 showing all rows that have value "sample2"
<h3>Result 2</h3>
<ul>
<? 
    mysql_data_seek($q_home, 0);
   while($r_nav2 = mysql_fetch_assoc($q_home)){
      $group_folder = $r_nav2['page_group'];
      if ($r_access["$group_folder"] == "Yes" && $group_folder == 'sample2') { 
            $access = 'block;'; 
        } else { 
            $access = 'none;'; 
        } {;
            echo '<li style="display:'.$access.'"><a href="'.$group_folder.'/'.$r_nav2['page_url'].'.php">'.$r_nav2['page_name'].'</a></li>';
      }
    }
?>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T02:39:47.807

你有一个循环中的 mysql_fetch ，所以不要在特定的`$group_folder`（删除 if 子句的那部分）上停止循环：

```
<ul>
<?php
  while($r_nav = mysql_fetch_assoc($q_home)){
    $group_folder = $r_nav['page_group'];
    if ($r_access["$group_folder"] == "Yes")
      $access = 'block;';
    else
      $access = 'none;';
    echo '<li style="display:'.$access.'">
    <a href="'.$group_folder.'/'.$r_nav['page_url'].'.php">
    '.$r_nav['page_name'].'</a></li>';
  }
?>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T02:44:16.410

像这样的循环将是更好的解决方案：

```
$q_home = mysql_query("SELECT * FROM pages WHERE page_nav = 'No' ORDER BY page_group ASC");
$x = 1;
<? while( $r_nav = mysql_fetch_assoc($q_home) ) { ?>
<h3>Result <?= $x; ?></h3>
<ul>
<?php
  $group_folder = $r_nav['page_group'];
  if( $r_access["$group_folder"] == "Yes" && $group_folder == 'sample1') {
    $access = 'block;';
  }
  else { 
    $access = 'none;';
  }
  echo '<li style="display:'.$access.'"><a href="'.$group_folder.'/'.$r_nav['page_url'].'.php">'.$r_nav['page_name'].'</a></li>';
  }
  $x++;
?>
</ul>
<?php } ?> 
```

# android - 终端上的 ndk-build 命令出错 (Mac)

> ID：15214835
> 
> 赞同：5
> 
> 时间：2013-03-05T02:33:42.837
> 
> 标签：android, android-ndk

这是我在（.bashrc）中的环境变量设置..

```
export ANDROID_SDK="/AndroidSDK/android-sdks"
export ANDROID_NDK="/AndroidNDK/android-ndk-r8d"
export PATH="$PATH:$ANDROID_SDK/tools:$ANDROID_SDK/platform-tools:$ANDROIDNDK" 
```

当我尝试在 ternimal 上运行 ndk-build 时，它显示错误消息说

```
-bash: ndk-build: command not found 
```

我只是尝试在 ndk 目录中构建 San Angeles 示例示例。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-05T04:37:19.893

因为您在`PATH`变量中提供了错误的值，所以您已声明`ANDROID_NDK`为`Environment`，并且在`PATH`您正在添加的变量中**`ANDROIDNDK`**（您`_`在 score 下丢失了。）

请编辑您的行如下，

```
export ANDROID_SDK="/AndroidSDK/android-sdks"
export ANDROID_NDK="/AndroidNDK/android-ndk-r8d"
export PATH="$PATH:$ANDROID_SDK/tools:$ANDROID_SDK/platform-tools:$ANDROID_NDK" 
```

# node.js - Mongoose 模式/模型中的构造函数

> ID：15214836
> 
> 赞同：9
> 
> 时间：2013-03-05T02:33:54.473
> 
> 标签：node.js, mongoose

我是 Node.js、mongodb 和 mongoose 的新手。我想在创建新文档时传递一些参数。例如，这是创建新文档的典型示例：

```
var animalSchema = new Schema({ name: String, type: String });
var Animal = mongoose.model('Animal', animalSchema);
var dog = new Animal({ type: 'dog' }); 
```

我想做这样的事情：

```
var dog = new Animal( Array ); 
```

所以我想为一个新文档创建自定义构造函数。但我不知道在哪里以及如何在猫鼬中设置像这样的自定义构造函数。

我有一个类似名称的 stackoverflow 帖子，但它似乎不是我想要的：[Mongoose schema/models 中的自定义构造函数](https://stackoverflow.com/questions/14217067/custom-constructor-function-in-mongoose-schema-models)

也许我犯了一个愚蠢的错误。欢迎任何想法。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-23T12:19:16.663

Mongoose 不支持这种魔法。但是有一些解决方法可以解决这个问题。

### 定义一个*静态*函数：

在您的架构定义中，您可以定义一个静态函数来处理基于数组对象的所有模型的实例化，例如：

```
var animalSchema = new Schema({ name: String, type: String });
animalSchema.static({
  createCollection: function (arr, callback) {
    var colection = [];

    arr.forEach(function (item) {
       // Here you have to instantiate your models and push them
       // into the collections array. You have to decide what you're
       // going to do when an error happens in the middle of the loop.
    });

    callback(null, collection);
  }
}); 
```

### 使用*Model.create*方法：

如果你真的不需要在保存模型实例之前对其进行操作，而只想实例化并持久化到数据库，则可以使用`Model.create`接受对象数组的方法：

```
var animals = [
  { type: 'dog' },
  { type: 'cat' }
];
Animal.create(arr, function (error, dog, cat) {
  // the dog and cat were already inserted into the db
  // if no error happened
}); 
```

但是，如果你有一个大数组，回调会收到很多参数。在这种情况下，您可以尝试“概括”：

```
Animal.create(arr, function () {
  // the error, if it happens, is the first
  if (arguments[0]) throw arguments[0];
  // then, the rest of the arguments is populated with your docs
}); 
```

### 使用*Model.collection.insert*：

就像[文档中解释的](http://mongoosejs.com/docs/api.html#collection_Collection-insert)那样，它只是一个必须由驱动程序实现的抽象方法，因此它没有任何猫鼬处理，它可能会在您的集合中添加意想不到的字段。至少，如果你传递一个对象数组，它将持久化它们并返回一个带有填充方法的数组：

```
var animals = [
  { type: 'dog' },
  { type: 'cat' }
];
Animal.collection.insert(animals, function (error, docs) {
   console.log(docs);
}); 
```

# javascript - Bootstrap 滚动间谍未突出显示正确的部分

> ID：15214837
> 
> 赞同：3
> 
> 时间：2013-03-05T02:33:59.103
> 
> 标签：javascript, html

这是我第一次使用引导滚动间谍所以我不确定我是否做错了什么。（显然我是）这是问题所在。我必须使用 -190 的偏移量，因此红色导航栏的底部位于该部分的开始位置。一旦我应用了偏移量，它就不会在主导航上突出显示（活动区域）该部分。它突出显示之前的部分，直到我向下滚动。

此外，我似乎没有找到一种方法来附加链接以一直向上。因为它必须在主导航之后。#home ID 应该放在哪里？

* * *

这是代码：请注意，我没有复制整个 HTML，因为它真的很长，但我还附上了实时链接。

```
 <header id="global-header">
        <div class="header-cont-info"> Call to schedule your <span class="yellow uppercase">free,</span> no obligation assessment: <span class="yellow">407&#8211;844&#8211;1182 </span></div>
        <!-- Main nav-->
        <nav id="navbar">
          <h1 class="visuallyhidden">Main navigation</h1>
          <ul class="nav"> 
            <li class="home-mn-btn active"><a href="#home">Home</a></li>  
            <li class="services-mn-btn"><a href="#services">Services</a></li>
            <li class="reviews-mn-btn"><a href="#reviews-section">Reviews</a></li>
            <li class="tp-logo"><img src="img/tidy-pools-logo.png" width="332" height="194" alt="Tidy Pools Logo"></li>
            <li class="faq-mn-btn"><a href="#faq">Faq</a></li>
            <li class="contact-mn-btnn"><a href="#contact-section">Contact</a></li>  
            <li class="portal-mn-btn"><a href="#">Customer Portal</a></li>
          </ul>
        </nav><!-- Main nav ends-->
      </header>

 <!-- Services section-->
        <div class="section-dividers-dark"><!--It contains the bottom shadow-->
          <section id="services"><!--Ribbon ends-->
            <p><a href="#" class="buttons yellow-buttons fancybox"><span class="modern-pictogram">W</span> View Pictures of Our Work</a></p>
            <div class="clear-fix"></div>
            <!-- Residential Pool and Spa Maintenance section-->
            <section>
              <header>
                <h2>Residential Pool and Spa Maintenance</h2>
                <p>Enjoy comprehensive weekly service for only $80/month, including:</p>
              </header>
              <ol>
                <li><h3>Cleaning And Debris Removal</h3>
                  <ul>
                    <li> Skim surface and bottom of pool</li>
                    <li>Brush interior surfaces and steps</li>
                    <li>Clean tile</li>
                    <li>Vacuum and clean deck as necessary</li>
                  </ul>
                </li>
                <li><h3>Water Quality Assurance</h3>
                  <ul>
                    <li>Test water and balance</li>
                    <li>Add necessary chemicals</li>
                  </ul>
                </li>
                <li><h3>Equipment Maintenance</h3>
                  <ul>
                    <li>Empty baskets</li>
                    <li>Clean filter</li>
                    <li>Check equipment functioning</li>
                  </ul>
                </li>
              </ol>
            </section><!-- Residential Pool and Spa Maintenance section ends--><br>
            <!-- Commercial Pool Maintenance section-->
            <section>
              <h2>Commercial Pool Maintenance</h2>
              <p>We offer affordable commercial service as well.<br>
                Simply call and we’ll be happy to provide you<br>
              with a customized quote  for your property’s needs.</p>
            </section><!-- Commercial Pool Maintenance section ends-->
            <!-- Water Recovery Services section-->
            <section>
              <h2>Water Recovery Services</h2>
              <p>For green pool/water recovery services,<br>
              simply call for your free quote!</p>
            </section><!-- Water Recovery Services section ends-->
          </section>
        </div>
      <!-- Services section ends-->

      <!-- Reviews section-->
      <!-- Section dividers. These expand 100% and are used to separate the sections-->
      <div class="section-dividers" id="reviews-section">
        <!-- Section inner wrappers. These contain the section max-width-->
        <div class="section-inner-wrapper">
          <section id="reviews">
            <header><!--Ribbon ends-->
              <p><span class="dark-blue">See what our valued customers have to say about Tidy Pools quality swimming pool cleaning and maintenance service.</span><span class="yellow"> This is just a sample of the kind testimonials we have received, and we look forward to adding yours!</span></p>
            </header>
            <ul id="people-reviews">
              <li>&#8220; I have had pools for 27 years. Tidy Pools is the most professional, honest and reliable company I’ve had work for me! Your integrity makes me smile and you’ve always been so fair. Thank you. &#8221; <br>
              <span class="review-names">&#8211; Roxane B.</span></li>

              <li>&#8220; I have had pools for 27 years. Tidy Pools is the most professional, honest and reliable company I’ve had work for me! Your integrity makes me smile and you’ve always been so fair. Thank you. &#8221; <br>
              <span class="review-names">&#8211; Roxane B.</span></li>
              <li>&#8220; I have had pools for 27 years. Tidy Pools is the most professional, honest and reliable company I’ve had work for me! Your integrity makes me smile and you’ve always been so fair. Thank you. &#8221; <br>
              <span class="review-names">&#8211; Roxane B.</span></li>
            </ul>
 </section><!-- Reviews section ends--> 
```

* * *

JS

```
 // ******************************** ANIMATED SCROLLING ********************************
$('#navbar ul li a').bind('click', function(e) {
    e.preventDefault();
    $('html, body').animate({
        scrollTop: $(this.hash).offset().top -190
    }, 300);
    // edit: Opera requires the "html" elm. animated
}); 
```

* * *

这是现场网站链接[http://tidypools.com/dev/](http://tidypools.com/dev/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T04:02:23.547

`data-offset`如 Twitter Bootstrap[文档](http://twitter.github.com/bootstrap/javascript.html#scrollspy)中所述，您没有正确设置您的.

您需要将`<body>`标签修复为：

```
<body data-spy="scroll" data-offset="170" data-target="#navbar"> 
```

# c# - 在 EF 5 中为 LINQ 使用多个上下文而不是一个大型上下文

> ID：15214840
> 
> 赞同：0
> 
> 时间：2013-03-05T02:34:15.147
> 
> 标签：c#, linq-to-sql, ef-code-first, entity-framework-5, asp.net-4.5

我在我的 ASP.Net Web 窗体应用程序中使用 EF 5 和 Code First，并创建了一个名为“Compleate”的主上下文，每当我对它进行 LINQ 调用时，一切正常。因为我运行的服务器没有很多资源，所以我创建了更小的上下文来限制每次我需要查询数据库时调用的数据范围。问题是，当我针对较小的上下文进行 LINQ 调用时，我总是会收到错误消息

> 值不能为空。参数名称：外层

这几天我一直在尝试解决这个问题，但我迷路了。对于我在较小的环境中做错的事情的任何帮助都会很棒。

Compleate.cs（适用于并运行 Code First 迁移的上下文）：

```
using FFInfo.DAL.Tables;
using System.Data.Entity;

namespace FFInfo.DAL
{
    public class Compleate : DbContext
    {
        public Compleate() : base("FFInfoDB") { }

        //General Tables
        public DbSet<File> Files { get; set; }
        public DbSet<Culture> Cultures { get; set; }
        public DbSet<Section> Sections { get; set; }
        public DbSet<Navigation> Navigation { get; set; }

        //Locale Tables
        public DbSet<Locale_Section> Locale_Sections { get; set; }
    }
} 
```

Base.cs（所有较小的上下文都继承自此）：

```
using System.Data.Entity;

namespace FFInfo.DAL
{
    public class Base<TContext> : DbContext where TContext : DbContext
    {
        static Base()
        {
            Database.SetInitializer<TContext>(null);
        }

        protected Base() : base("FFInfoDB") { }
    }
} 
```

SiteNavigation.cs（我试图从中读取的较小上下文）：

```
using FFInfo.DAL.Tables;
using System.Data.Entity;

namespace FFInfo.DAL
{
    public class SiteNavigation : Base<SiteNavigation>
    {
        public DbSet<Navigation> Navigation { get; private set; }
        public DbSet<Section> Sections { get; private set; }
        public DbSet<Locale_Section> SectionTranslations { get; private set; }
    }
} 
```

LINQ 代码：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        rpBooks.DataSource = PopulateNav("Book", 1);
        rpBooks.DataBind();
    }

    protected object PopulateNav(string Category, byte Culture)
    {
        using (var db = new SiteNavigation())
        {
            return (from n in db.Navigation
                    join st in db.SectionTranslations on n.SectionID equals st.Section.SectionID
                    where n.Category == Category && st.CultureID == Culture
                    select new
                    {
                        LinkAddress = st.Section.Type + "/" + st.Section.RouteName,
                        st.Title
                    }).ToList();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T01:52:39.153

我今晚想通了。如果您查看 SiteNavigation.cs，您会发现我在每个 DBSet 的 SET 命令上都有 private 修饰符。当我删除私有修饰符时，一切正常。所以我的工作代码现在看起来像：

```
using FFInfo.DAL.Tables;
using System.Data.Entity;

namespace FFInfo.DAL
{
    public class SiteNavigation : Base<SiteNavigation>
    {
        public DbSet<Navigation> Navigation { get; set; }
        public DbSet<Section> Sections { get; set; }
        public DbSet<Locale_Section> SectionTranslations { get; set; }
    }
} 
```

# javascript - 在 localStorage 中存储日期

> ID：15214841
> 
> 赞同：0
> 
> 时间：2013-03-05T02:34:16.717
> 
> 标签：javascript, jquery, jquery-mobile, local-storage

使用 jquery mobile 1.3，我能够使用带有此功能的 localSotorage 从某些输入字段中收集和显示值：

```
 <script type="text/javascript">
    function datosCliente (info) {
        localStorage.setItem(info.name,info.value);
    }
</script> 
```

这是一个调用该函数的输入字段的示例：

```
<label for="basic">Nombre:</label>
        <input type="text" name="nombre" id="basic" data-mini="true" onkeyup="datosCliente(nombre)"/> 
```

我希望在输入类型日期上做同样的事情：

```
<label for="fecha">Fecha</label>
        <input name="fecha" id="fecha" type="date" data-role="datebox" data-options='{"mode":"calbox", "useNewStyle":true}' onkeyup="datosCliente(fecha)" /> 
```

并使用以下方法显示值：

```
<p><span>Fecha: </span><script>document.write(localStorage.getItem("fecha"));</script></p> 
```

但是当我想显示这个字段的值时，我得到的结果是空的。是因为我使用 jQueryMobile-DateBox 插件来选择日期吗？或者我必须尝试一种不同的方法来从这种类型的输入中收集值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T02:36:51.080

`onchange`使用而不是是一个好主意`onkeyup`，特别是因为浏览器 UI 不会触发按键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T02:46:04.883

不确定这是否是每个人的答案，但您可以尝试将 nombre 和 fecha 更改为[this](http://www.quirksmode.org/js/this.html)。我可以补充一下，而不是使用 document.write，您可以使用[console.log](https://stackoverflow.com/questions/4743730/what-is-console-log-and-how-do-i-use-it)，这样您就可以判断它是否是一个对象而不是字符串等。这可能会在评论部分出现，但我没有似乎还没有特权这样做。祝你好运。

# xml - IE9 仅在新选项卡/窗口上呈现 XSL

> ID：15214842
> 
> 赞同：0
> 
> 时间：2013-03-05T02:34:24.987
> 
> 标签：xml, internet-explorer-9

我有一台服务器向我发送 XML。IE8 总是正确渲染它，而 IE9 只渲染一次！

我的意思是，如果我将 URL 粘贴到新选项卡的地址栏中，按 Enter 键，页面就会呈现。我回到地址栏，按回车，我得到 XML 的文本内容。我再做一次，它呈现！

所以它适用于地址栏上的每隔一个“输入”

```
the URL is :http://10.10.1.200/web/config/system-system-systemNumber.xml

<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl" href="/web/http/system-system-systemNumber.xsl"?>
<system-system-systemNumber>
  <system>
    <number>1</number>
    <device>
       <number>0</number>
    </device>
  </system>
</system-system-systemNumber> 
```

当它失败时，我什至看不到 IE9 试图获取 xsl 文件（在 F12 网络捕获中观看）。

# c++ - 这是初始化我的库的合理方法吗？

> ID：15214844
> 
> 赞同：1
> 
> 时间：2013-03-05T02:34:26.887
> 
> 标签：c++, initialization

我正在第三方库（Bar）之上构建一个库（Foo），它需要`Initialise()`在任何使用它的程序的开头调用一个自由函数，并在`DeInitialise()`最后调用一个函数。我想将这些函数“级联”到我的库中，这样用户就需要初始化我的函数，而无需了解第三方库的初始化。此外，我可以在同一个地方执行我的库可能需要的任何其他初始化。我可以使用我的第三方库的方法使用免费功能，例如：

```
namespace Foo
{
   Initialise()
   {
      Bar::Initialise();
      // Do rest of Foo's initialisation
   }
   DeInitialise()
   {
      Bar::DeInitialise();
      // Do rest of Foo's de-initialisation
   }
} 
```

然后，Foo 的用户将被要求`Foo::Initialise`在使用它之前和`Foo::DeInitialise`最后调用它，并有责任确保它只被调用一次（这样我就可以避免担心线程安全问题）。

这是我在寻找此问题的解决方案时经常遇到的方法。但是，我现在正在考虑将所有初始化和反初始化放在类的构造函数/析构函数中，例如：

```
Class Initialiser
{
   Initialiser()
   {
      Bar::Initialise();
      // Do rest of Foo's initialisation
   }
   ~Initialiser()
   {
      Bar::DeInitialise();
      // Do rest of Foo's de-initialisation
   }
} 
```

因此，用户不必担心去初始化——他们只是`Initialiser`在程序开始时在堆栈上创建一个对象，而析构函数将在程序退出时处理其余的事情。

我的问题是：这是一种合理的方法吗？是否有任何潜在的陷阱或替代解决方案需要考虑？拥有一个只有构造函数和析构函数但没有数据成员的类是否有效？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T02:40:59.007

您提出的实际上称为[RAII - Resource Acquisition Is Initialization](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)，它是 C++ OOP 编程的核心设计理念。它使代码异常安全，并使用户无需手动调用函数。

这是做你想做的事情的正确方法，只要你没有在你的构造函数/析构函数中调用虚函数等复杂情况。

# javafx-2 - 我可以使用 javafx2 媒体播放 mpeg2 编码的 .mpg 文件吗

> ID：15214846
> 
> 赞同：0
> 
> 时间：2013-03-05T02:34:57.123
> 
> 标签：javafx-2, media, mpeg

我正在播放并希望使用 javafx 媒体预览 .mpg 文件。我尝试播放该文件，但 MEDIA_UNSUPPORTED：无法识别的文件签名！抛出异常是否可以使用编解码器来做到这一点，如果是的话，我需要安装哪些编解码器。我还没有尝试过其他任何东西，但欢迎提出建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T06:11:02.473

不，JavaFX 2 无法播放 mpeg2 编码文件（音频层[mp3](http://en.wikipedia.org/wiki/MP3)除外）。

[JavaFX支持的编解码器类型](http://docs.oracle.com/javafx/2/api/javafx/scene/media/package-summary.html)列表不能扩展超出文档中的那些。

* * *

有一些[示例代码](https://forums.oracle.com/forums/thread.jspa?threadID=2434712)可以将 3rd 方[vlcj](http://code.google.com/p/vlcj/)组件与 JavaFX 2[画布](http://docs.oracle.com/javafx/2/api/javafx/scene/canvas/Canvas.html)节点集成，但没有使用 JavaFX 2[媒体](http://docs.oracle.com/javafx/2/api/javafx/scene/media/Media.html)。

# sql-server - 如何从 SQL Server 中的列中删除不间断空格？

> ID：15214848
> 
> 赞同：25
> 
> 时间：2013-03-05T02:34:59.603
> 
> 标签：sql-server, tsql

`CHAR 160`我正在尝试从表中的字段中删除不间断空格 ( )。我尝试过使用诸如`RTRIM()`摆脱它的功能，但价值仍然存在。

我需要做什么才能从列中删除非中断空间？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-03-05T03:05:32.160

尝试使用[`REPLACE`](http://msdn.microsoft.com/en-us/library/ms186862%28v=sql.105%29.aspx)

```
UPDATE Your_Table
SET Your_Column = REPLACE(Your_Column, NCHAR(0x00A0), '')
WHERE Id = x 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-06-20T13:29:04.427

你也可以使用

```
REPLACE(The_txt, NCHAR(160), ' ') 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-10-19T10:30:39.480

如果上述解决方案都不起作用，请尝试使用 CHAR 代替 NCHAR

```
UPDATE Your_Table
SET Your_Column = REPLACE(Your_Column, CHAR(160), '')
WHERE Id = x 
```

CHAR 为我工作。

# python - 在 Python 中计算二叉树的深度

> ID：15214852
> 
> 赞同：14
> 
> 时间：2013-03-05T02:35:35.640
> 
> 标签：python, oop, methods, tree

我是编程新手，正在尝试在 Python 中计算二叉树的深度。我相信我的错误是因为深度是 Node 类的方法而不是常规函数。我正在尝试学习 OOP，并希望使用一种方法。这可能是一个新手错误......这是我的代码：

```
class Node:

    def __init__(self, item, left=None, right=None):
        """(Node, object, Node, Node) -> NoneType
        Initialize this node to store item and have children left and right.
        """
        self.item = item
        self.left = left
        self.right = right

    def depth(self):
        if self.left == None and self.right == None:
            return 1

        return max(depth(self.left), depth(self.right)) + 1

i receive this error:

>>>b = Node(100)

>>>b.depth()

1 

>>>a = Node(1, Node(2), Node(3))

>>>a.depth()

Traceback (most recent call last):
  File "C:\Program Files\Wing IDE 101 4.1\src\debug\tserver\_sandbox.py", line 1, in <module>
    # Used internally for debug sandbox under external interpreter
  File "C:\Program Files\Wing IDE 101 4.1\src\debug\tserver\_sandbox.py", line 15, in depth
builtins.NameError: global name 'depth' is not defined 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-05T02:38:08.993

```
def depth(self):
    if self.left == None and self.right == None:
        return 1

    return max(depth(self.left), depth(self.right)) + 1 
```

应该

```
def depth(self):
    return max(self.left.depth() if self.left else 0, self.right.depth() if self.right else 0) + 1 
```

更易读的版本：

```
def depth(self):
    left_depth = self.left.depth() if self.left else 0
    right_depth = self.right.depth() if self.right else 0
    return max(left_depth, right_depth) + 1 
```

问题是没有功能`depth`。它是对象的一种方法`Node`，因此您需要从对象本身（左右）调用它。我将代码缩短为`self.left.depth() if self.left else 0`并且`self.right.depth() if self.right else 0`为了删除您以前拥有的检查（它们现在是隐式的），因为我相信左边是完全有可能的，`None`而右边是 a`Node`或反之亦然，这将导致原始代码抛出`AttributeError`因为没有`None`方法`depth`。

**编辑**

回答关于`<something> if <some condition> else <otherwise>`块的问题：

该行给出`<something>`if `<some condition>`is true-y（视为 true）和`<otherwise>`if `<some condition>`is false-y（视为 false）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-05T02:41:28.943

为了清楚起见，我建议`depth`像这样编写您的方法：

```
def depth(self):
    current_depth = 0

    if self.left:
        current_depth = max(current_depth, self.left.depth())

    if self.right:
        current_depth = max(current_depth, self.right.depth())

    return current_depth + 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T20:42:31.407

You've got four cases to consider:

1.  Both subtrees are empty.
2.  The left subtree alone is empty.
3.  The right subtree alone is empty.
4.  Neither subtree is empty.

You've covered cases 1 and 4, but missed 2 and 3. The fix:

```
# Return height of tree rooted at this node.
def depth(self):
    if self.left == None and self.right == None:
        return 1
    elif self.left == None:
        return self.right.depth() + 1
    elif self.right == None:
        return self.left.depth() + 1
    else:
        return max(self.left.depth(), self.right.depth()) + 1 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T20:15:12.297

错误来自这一行：

```
return max(depth(self.left), depth(self.right)) + 1 
```

您将深度用作函数并尝试将其应用于左右节点。因为左右节点也是节点，所以有depth方法。

您应该像这样调用深度方法：

```
return max(self.left.depth(), self.right.depth()) + 1 
```

self 参数隐式传递给 depth 方法，但与点运算符一起使用它会告诉 Python 该方法属于 Node 实例，而不是未绑定到对象的其他函数。

# javascript - 下班后禁用表格

> ID：15214856
> 
> 赞同：0
> 
> 时间：2013-03-05T02:36:02.900
> 
> 标签：javascript, jquery

我正在为非 24 小时运营的快递公司编写表单，这意味着当用户在非工作时间提交表单时，我希望表单重定向到新页面或提醒公司营业时间。

例如，假设公司的工作时间是上午 9 点到晚上 9 点，而客户在晚上 9 点 15 分填写了要求送货的表格。与其提交表单，客户在点击提交后重定向到感谢页面，我希望他们重定向到不同的页面或提醒业务关闭到上午 9 点或类似的东西。

使用 jQuery 可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T03:38:43.070

是的，它可以使用`jQuery`，但我更喜欢`server-side`脚本，因为您知道`client-side`代码可以`disabled`由用户完成，因此请检查它`server-side`，然后使用`redirection`功能将用户带到您想要的任何地方。

# http - ExtJS 4.0.7 TreeStore - 通过在两个 TreeStore 中使用相同的数据来避免两个 HTTP 请求

> ID：15214861
> 
> 赞同：1
> 
> 时间：2013-03-05T02:36:53.107
> 
> 标签：http, extjs, tree, store, treepanel

我的应用程序有两个可编辑的[TreePanel](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.tree.Panel)，每个都显示一棵树，因此每个都有自己的[TreeStore](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.data.TreeStore)定义。最初，这些商店的数据完全相同 - 从服务器加载的大型 JSON 树。所以最好不要发出两个 HTTP 请求，加载相同的 JSON 树，因为这是一个非常昂贵的操作。

请注意，这两个 TreePanel 的基础 TreeStore 对象必须不同。否则，一个面板中的更改将立即级联到另一个面板。

但是，有谁知道是否有可能避免发出两个 HTTP 请求并以某种方式将加载的数据传递给一个 TreeStore 到另一个？

非常感谢任何建议。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T07:04:30.763

在这里找到了答案：

[http://www.clintharris.net/2011/how-to-use-extjs-4-treepanels-with-both-static-data-and-model-stores/](http://www.clintharris.net/2011/how-to-use-extjs-4-treepanels-with-both-static-data-and-model-stores/)

诀窍是在第二个 TreeStore 上使用 setRootNode() 方法并传入数据。为了从第一个 TreeStore 中获取数据，我最终只是递归地遍历树并构造它的字符串 JSON 表示。然后使用 Ext.decode() 方法将其转换回对象。这种相互转换是相当浪费的，但是 deep copy() 不起作用 - ExtJS 中的错误。无论如何，这仍然比访问服务器快得多。

# php - 根据单选按钮将 PHP 表单发送到不同的电子邮件

> ID：15214862
> 
> 赞同：0
> 
> 时间：2013-03-05T02:36:59.840
> 
> 标签：php, forms, radio-button, contact

我已经看到了许多与此类似的问题，但是由于我是 PHP 新手，所以我无法将函数放在正确的位置。我在 PHP 和 HTML 中拼凑了一些东西，但我似乎在该`$radio`地区遗漏了一些东西。有没有人有什么建议？

```
<?php
$name = $_POST['name'];
$email = $_POST['email'];
$radio = isset($_POST['radio']) ? $_POST['radio'] : 'default';
switch ($radio) {
case 'Eval CH':
$to = 'blah@blah.com';
    break;
case 'Eval ELL':
$to = 'sigh@sigh.com';
    break;
}
$message = $_POST['message'];
$from = 'From: WAC Site';  
$subject = 'WAC Contact Message';
$human = $_POST['human'];

$body = "From: $name\n E-Mail: $email\n Message:\n $message";

if ($_POST['submit'] && $human == '4') {                 
    if (mail ($to, $subject, $body, $from)) { 
    echo '<p>Your message has been sent!</p>';
} else { 
    echo '<p>Something went wrong, go back and try again!</p>'; 
} 
} else if ($_POST['submit'] && $human != '4') {
echo '<p>Either you are a robot, or you are very, very bad at math.</p>';
}
?> 
```

这是我的 HTML：

```
<form method="post" action="contact_options.php">

<label>Name</label><br>
<input name="name" placeholder="Type Here"><br>
<br>        
<label>Email</label><br>
<input name="email" type="email" placeholder="Type Here"><br>
<br>
<input type="radio" name="Eval CH" value="to">Email Blah<br>
<input type="radio" name="Eval ELL" value="to">Email Sigh<br>
<label>Message</label><br>
<textarea name="message" placeholder="Type Here"></textarea><br>
<br>
<label>*What is 2+2? (Anti-spam)</label>
<input name="human" placeholder="Type Here"><br />         
<input id="submit" name="submit" type="submit" value="Submit"><br>

</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T04:33:00.943

问题是`$_POST['radio']`您设置表单的方式不存在。只有带有 a`name=`的东西才会传递给`$_POST`超全局。

将 PHP 处理程序中的条件更改为：

`$radio = isset($_POST['Eval CH']) ? $_POST['Eval CH'] : $_POST['Eval ELL'];`

但是，你真的有3个条件：

```
$_POST['Eval CH']
$_POST['Eval ELL']
None selcted 
```

所以真的你的速记在这里不起作用，因为你需要

```
if
elseif
else 
```

所以你真的需要更高级的处理，像这样：

```
if (isset($_POST['Eval CH'])) {
   $to = 'blah@blah.com';
}
elseif (isset($_POST['Eval ELL'])) {
   $to = 'sigh@sigh.com';
}
else {
   $to = 'default@default.com';
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-05T02:41:09.967

您的单选按钮应该有一个通用名称和适当的值。它们应该如下所示：

```
<input type="radio" name="contact_option" value="Eval CH">Email Blah<br>
<input type="radio" name="contact_option" value="Eval ELL">Email Sigh<br> 
```

然后，在您的帖子中，您可以将您的行替换为：

```
$radio = isset($_POST['contact_option']) ? $_POST['contact_option'] : 'default'; 
```

此外，`if ($_POST['submit']) { }`当您发布时，应该绕过整个代码部分，而不仅仅是检查您是否是人类。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-05T02:43:16.800

尝试在单选按钮中反转名称和值

```
<input type="radio" name="to" value="Eval CH">Email Blah<br>
<input type="radio" name="to" value="Eval ELL">Email Sigh<br> 
```

# javascript - ShareThis 安装 Turbolinks gem 后不起作用

> ID：15214865
> 
> 赞同：0
> 
> 时间：2013-03-05T02:37:33.953
> 
> 标签：javascript, jquery, ruby-on-rails, sharethis, turbolinks

我最近安装了 turbolinks 和 jquery-turbolinks gems，现在我的 ShareThis 按钮不像以前那样弹出。

我目前在我的 application.html.erb 头中有这些 ShareThis 脚本：

```
<script type="text/javascript">var switchTo5x=false;</script>
<script type="text/javascript" src="https://ws.sharethis.com/button/buttons.js"></script>
<script type="text/javascript">stLight.options({publisher: "eonwofenaoenf-oenfwoafneo-woenfowenfe"});</script> 
```

这是我的 show.html.erb 页面上的代码：

```
<span class='st_sharethis_custom'></span> 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T06:42:01.047

我检查了 button.js 并找到了使它成为这种方式的方法。

```
<script type="text/javascript">var switchTo5x=false;</script>
<script type="text/javascript" src="https://ws.sharethis.com/button/buttons.js"></script>
<script type="text/javascript">stLight.options({publisher: "eonwofenaoenf-oenfwoafneo-woenfowenfe"});</script>
<script type="text/javascript">stLight && (stLight.readyRun = false)</script> 
```

span 标签和你的一样。

```
<span class='st_sharethis_custom'></span> 
```

但是上述解决方案对于在 sharethis 方面对 button.js 工作流程的更改非常薄弱。

因此，当您比较分享按钮与页面加载速度以及分享按钮重要性赢得页面加载速度时，禁用 turbolinks 是一个很好的解决方案。

# deployment - Azure VM 自动部署

> ID：15214868
> 
> 赞同：0
> 
> 时间：2013-03-05T02:37:43.757
> 
> 标签：deployment, azure, tfs, tfsbuild

我有一个在 Azure 中运行的 VM，我有一个在该 VM 中运行的控制台应用程序。

与此同时，我的 Team Foundation Service 运行着我的源代码和 CI。我希望每次构建成功时构建服务器都部署该控制台应用程序。

可以使用 VM 和控制台应用程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T12:46:58.710

[大声思考] 一种可能性是在您的虚拟机上设置一个 FTP 服务器，然后一旦构建成功，您就可以使用 FTP 将控制台应用程序二进制文件推送到您的虚拟机。如果您的控制台应用程序已经在您的虚拟机中运行，或者您是否需要在成功复制到您的虚拟机后启动该应用程序，我不确定这将如何工作。但我相信你可以想出一个在 VM 中运行的小型应用程序/服务来管理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T16:06:28.890

此链接适用于 TeamCity（也是 CI 服务器），但您可以获取 powershell 脚本并将其应用于构建步骤。

[https://gist.github.com/srkirkland/3694398](https://gist.github.com/srkirkland/3694398)

您应该有一个构建步骤，该步骤实际上用于在您的配置中部署到 Azure。

# extjs - sencha touch 2 在轮播中滑动到下一张卡片时停止音频？

> ID：15214869
> 
> 赞同：1
> 
> 时间：2013-03-05T02:37:47.640
> 
> 标签：extjs, sencha-touch-2, carousel

使用 sencha touch 2，在轮播中，当我向前或向后滑动到下一张卡时，如何停止当前卡上的音频？

```
{
xtype: 'carousel',
iconCls: 'action',
style: 'background-color: #00A9A6;',
layout: { type:'hbox', pack:'start', align:'stretch' },
items: [
Ext.create('Ext.Container', { layout: 'hbox',
  items: [ 
  {
    items: [ { xtype: 'toolbar',
           docked: 'left', 
           layout: { type:'hbox', pack:'start', align:'stretch' },

            html: [
                "<audio id=\"player1\"><source src=\"audio/page 1.mp3\" type=\"audio/mpeg\"></audio><div style=\"position:relative;height:1500px;width:100px;margin:auto;\"><button class=\"pausebutton\" onclick=\"document.getElementById('player1').pause()\"></button><br/><button class=\"playbutton\" onclick=\"document.getElementById('player1').play()\"></button></div>"
            ].join("")
}], 
  }, 
  image_1
  ]
}),

Ext.create('Ext.Container', { layout: 'hbox',
  items: [ 
  {
    items: [ { xtype: 'toolbar',
               docked: 'left', 
               layout: { type:'hbox', pack:'start', align:'stretch' },

                html: [
                "<audio id=\"player2\"><source src=\"audio/page 2.mp3\" type=\"audio/mpeg\"></audio><div style=\"position:relative;height:1500px;width:100px;margin:auto;\"><button class=\"pausebutton\" onclick=\"document.getElementById('player2').pause()\"></button><br/><button class=\"playbutton\" onclick=\"document.getElementById('player2').play()\"></button></div>"
                ].join("")
    }], 
  }, 
  image_2
  ]
})
} 
```

大约有 30 张类似的幻灯片，每张都有一张图片和一个带有自定义播放和暂停按钮的工具栏。奇怪的是，当我滑动到下一张幻灯片时，上一张幻灯片的音频仍在播放，如果我再次滑动到第三张幻灯片，第一张幻灯片的音频就会停止。我希望它停在第二张幻灯片上。我会试试 activeitemchange 监听器。

监听器添加到轮播：

```
listeners:{
            activeitemchange:function()
            {
                var activeIndex = this.getActiveIndex();
                document.getElementById('player'+activeIndex).pause();
            }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:33:17.440

当您向左/向右滑动以更改为另一个项目时，您的轮播将触发**activeitemchange**事件。一个好主意是为该事件创建一个侦听器并调用命令来停止音频。

因为您没有提供任何源代码，所以这是我现在的提示。

# c++ - QElapsedTimer 可以测量多长时间？

> ID：15214871
> 
> 赞同：0
> 
> 时间：2013-03-05T02:37:56.520
> 
> 标签：c++, qt

有没有办法可以找出 QElapsedTimer 可以在不重置的情况下运行多长时间？该类总是返回一个 qint64 但我不知道这是否对应于它可以测量的最大持续时间。

文档（[http://qt-project.org/doc/qt-4.8/qelapsedtimer.html](http://qt-project.org/doc/qt-4.8/qelapsedtimer.html)）提到在某些情况下会发生溢出，但在其他情况下不会发生（这让我感到困惑 - 如果您将值存储在int 中的 ms 或 ns 不必在某些时候发生溢出*？*）

我想使用 QElapsedTimer 来跟踪正常运行时间，并且我正在尝试确定它是否合适。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T02:46:49.440

是的，以纳秒为单位的 64 位值是相当长的时间。我的快速数学表明 (2^64/10^9)/86400 = 213500。这就是天数。或大约580年。我不认为你真的需要担心它。当然，以毫秒为单位，它变成了 5.8 亿年。

# xml - 为 KML 文件中的多边形添加背景颜色

> ID：15214875
> 
> 赞同：0
> 
> 时间：2013-03-05T02:38:28.580
> 
> 标签：xml, google-maps-api-3, kml, polygon, wikimapia

我正在开展一个新项目，该项目需要我从[www.wikimapia.com](http://www.wikimapia.com) 以 KML 文件的形式提取数据。然后我需要在谷歌地图上显示上述文件。Internet 上似乎没有太多关于 wikimapia 的信息。

我的目标是设置多边形样式并填充 CSS 等效的背景颜色。

目前我只显示边界的轮廓。

非常感谢stackoverflowers :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T03:10:24.657

从 KML 设置多边形样式的最简单方法是使用多边形[PolyStyle](https://developers.google.com/kml/documentation/kmlreference#polystyle)的 KML 样式。这将涉及更改 KML。

另一种选择是将您的 KML 文件导入 FusionTables，并使用 FusionTablesLayer 在 Google Maps API v3 地图上显示它们。您可以[使用 FusionTables 用户界面](http://support.google.com/fusiontables/answer/185991?hl=en)或[使用 javascript 动态设置多边形样式（如果您的样式少于 5 个）](https://developers.google.com/maps/documentation/javascript/layers#fusion_table_styles)

[更多信息](https://developers.google.com/fusiontables/docs/articles/fusiontables_styling)

第三种选择（如果您的 KML 不是很复杂，则可以使用第三方解析器，如[geoxml3](https://code.google.com/p/geoxml3/)或[geoxml-v3](https://code.google.com/p/geoxml-v3/)将 KML 解析为原生 Google Maps API v3 对象，并[使用 API 以正常方式设置这些对象的样式。](https://developers.google.com/maps/documentation/javascript/reference#PolygonOptions)

# c# - 通过 Http 发送 jpg 文件

> ID：15214878
> 
> 赞同：0
> 
> 时间：2013-03-05T02:38:51.403
> 
> 标签：c#, http, post, request, jpeg

我正在尝试编写一个接受图像的 http 服务器。我设法用这种方式传输txt文件或简单文本。但是当涉及到 jpeg 文件时，传输的文件变得无法访问。

客户端：

```
 WebRequest request = WebRequest.Create("http://localhost:8080");
        request.Method = "POST";
        byte[] byteArray = System.IO.File.ReadAllBytes(path);
        request.ContentType = "image/jpeg";
        request.ContentLength = byteArray.Length;
        Stream dataStream = request.GetRequestStream();
        dataStream.Write(byteArray, 0, byteArray.Length);
        dataStream.Close(); 
```

服务器端：

```
 HttpListenerContext context = listener.GetContext();
        HttpListenerRequest request = context.Request;
        StreamReader reader = new StreamReader(request.InputStream,request.ContentEncoding);
        Console.WriteLine("Client data content type {0}", request.ContentType);
        String Data = reader.ReadToEnd();
        byte[] imagebuffer = System.Text.Encoding.UTF8.GetBytes(Data);
        System.IO.File.WriteAllBytes(path, imagebuffer); 
```

当我使用 .txt 文件尝试此操作时，每一侧的字节数组长度不会改变，并且服务器端文件是可读的。但是对于 jpg，数组长度是不同的。我想这是造成问题的原因。我能做些什么来避免这种情况？还是有其他选择？

编辑：用“BinaryReader”替换“StreamReader”，现在工作正常。好像;

```
 BinaryReader reader = new BinaryReader(request.InputStream, request.ContentEncoding);
        byte[] imagebuffer = reader.ReadBytes((int)request.ContentLength64);
        System.IO.File.WriteAllBytes(path, imagebuffer); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T02:47:44.267

二进制数据的 HTTP 发布传输二进制数据，而不是字符串。您的服务器端代码错误地将 JPG 解析为某种字符串。使用 Stream 对象并将流读入字节数组，而不使用 StreamReader 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T03:03:23.097

您通过使用 UTF8 对其进行编码来破坏数据。这不是使用字符串的地方。

服务器应首先验证 ContentLength 标头，然后使用`BinaryReader.ReadBytes`或读取那么多字节`Stream.Read`。不过，一定要寻找例外情况，以防事情不匹配。

作为另一个提示，我建议让服务器以块的形式（一次几千字节）读取数据，而不是在写入磁盘之前尝试将所有数据存储在内存中。您永远不知道可以上传多大的文件。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-05T02:47:56.263

我相信您想将二进制流转换为 Base64 编码的字符串，然后从服务器上获取字节。

客户

```
var jpgBytes = File.ReadAllBytes(path);
var encodedString = Convert.ToBase64String(jpgBytes);
var encodedBytes = new byte[encodedString.Length * sizeof(char)];
System.Buffer.BlockCopy(encodedString.ToCharArray(), 0, bytes, 0, bytes.Length);

var requestStream = request.GetRequestStream();
requestStream.Write(encodedBytes, 0, encodedBytes.length); 
```

服务器

```
var reader = new StreamReader(request.InputStream,request.ContentEncoding); 
var base64String = reader.ReadToEnd();
var jpg = Convert.FromBase64String(base64String); 
```

# android - 找不到 LibGDX 类

> ID：15214887
> 
> 赞同：0
> 
> 时间：2013-03-05T02:39:51.943
> 
> 标签：android, libgdx, dex

我的程序崩溃了

```
03-05 02:21:57.127: E/dalvikvm(12583): Could not find class 'com.deerandcatgames.spikeJumper.GUI.OuyaTable$1', referenced from method com.deerandcatgames.spikeJumper.GUI.OuyaTable.<init> 
```

每当我从桌面项目在 android 上运行它时，它运行良好。

我查看logcat，发现以下错误：

```
03-05 02:21:56.907: I/SpikeJumper(12583): Showing screen: SplashScreen
03-05 02:21:56.957: D/dalvikvm(12583): GC_FOR_ALLOC freed 23K, 5% free 7525K/7920K, paused 37ms, total 37ms
03-05 02:21:57.127: W/dalvikvm(12583): Unable to resolve superclass of Lcom/deerandcatgames/spikeJumper/GUI/OuyaTable$1; (347)
03-05 02:21:57.127: W/dalvikvm(12583): Link of class 'Lcom/deerandcatgames/spikeJumper/GUI/OuyaTable$1;' failed
03-05 02:21:57.127: E/dalvikvm(12583): Could not find class 'com.deerandcatgames.spikeJumper.GUI.OuyaTable$1', referenced from method com.deerandcatgames.spikeJumper.GUI.OuyaTable.<init>
03-05 02:21:57.127: W/dalvikvm(12583): VFY: unable to resolve new-instance 992 (Lcom/deerandcatgames/spikeJumper/GUI/OuyaTable$1;) in Lcom/deerandcatgames/spikeJumper/GUI/OuyaTable;
03-05 02:21:57.127: D/dalvikvm(12583): VFY: replacing opcode 0x22 at 0x0016
03-05 02:21:57.127: I/dalvikvm(12583): Could not find method com.badlogic.gdx.controllers.Controllers.removeListener, referenced from method com.deerandcatgames.spikeJumper.GUI.OuyaTable.dispose
03-05 02:21:57.127: W/dalvikvm(12583): VFY: unable to resolve static method 2760: Lcom/badlogic/gdx/controllers/Controllers;.removeListener (Lcom/badlogic/gdx/controllers/ControllerListener;)V
03-05 02:21:57.127: D/dalvikvm(12583): VFY: replacing opcode 0x71 at 0x0007
03-05 02:21:57.127: W/dalvikvm(12583): Unable to resolve superclass of Lcom/deerandcatgames/spikeJumper/GUI/OuyaTable$1; (347)
03-05 02:21:57.127: W/dalvikvm(12583): Link of class 'Lcom/deerandcatgames/spikeJumper/GUI/OuyaTable$1;' failed
03-05 02:21:57.137: D/dalvikvm(12583): DexOpt: unable to opt direct call 0x26b5 at 0x18 in Lcom/deerandcatgames/spikeJumper/GUI/OuyaTable;.<init>
03-05 02:21:57.187: D/dalvikvm(12583): GC_CONCURRENT freed 399K, 8% free 7578K/8236K, paused 3ms+5ms, total 29ms
03-05 02:21:57.257: I/SpikeJumper(12583): Setting up custom table
03-05 02:21:57.257: W/dalvikvm(12583): threadid=11: thread exiting with uncaught exception (group=0x418a3930)
03-05 02:21:57.257: E/AndroidRuntime(12583): FATAL EXCEPTION: GLThread 19356
03-05 02:21:57.257: E/AndroidRuntime(12583): java.lang.NoClassDefFoundError: com.deerandcatgames.spikeJumper.GUI.OuyaTable$1
03-05 02:21:57.257: E/AndroidRuntime(12583):    at com.deerandcatgames.spikeJumper.GUI.OuyaTable.<init>(OuyaTable.java:72)
03-05 02:21:57.257: E/AndroidRuntime(12583):    at com.deerandcatgames.spikeJumper.screens.AbstractScreen.getTable(AbstractScreen.java:84)
03-05 02:21:57.257: E/AndroidRuntime(12583):    at com.deerandcatgames.spikeJumper.screens.AbstractScreen.resize(AbstractScreen.java:52)
03-05 02:21:57.257: E/AndroidRuntime(12583):    at com.deerandcatgames.spikeJumper.screens.SplashScreen.resize(SplashScreen.java:49)
03-05 02:21:57.257: E/AndroidRuntime(12583):    at com.badlogic.gdx.Game.setScreen(Game.java:63)
03-05 02:21:57.257: E/AndroidRuntime(12583):    at com.deerandcatgames.spikeJumper.SpikeJumper.setScreen(SpikeJumper.java:61)
03-05 02:21:57.257: E/AndroidRuntime(12583):    at com.deerandcatgames.spikeJumper.SpikeJumper.resize(SpikeJumper.java:79)
03-05 02:21:57.257: E/AndroidRuntime(12583):    at com.badlogic.gdx.backends.android.AndroidGraphics.onSurfaceChanged(AndroidGraphics.java:334)
03-05 02:21:57.257: E/AndroidRuntime(12583):    at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1505)
03-05 02:21:57.257: E/AndroidRuntime(12583):    at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1240) 
```

OuyaTable 是

```
public class OuyaTable extends Table {
....
} 
```

我已经尝试了所有我能想到的方法，但它仍然无法在 android 上运行。有没有人见过这个，和/或知道如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T17:40:34.467

好的，再试一次，但要更加注意错误消息......我明白了：

```
Could not find method com.badlogic.gdx.controllers.Controllers.removeListener, referenced from method com.deerandcatgames.spikeJumper.GUI.OuyaTable.dispose 
```

作为链接失败的原因之一。我认为您必须使用 libgdx“控制器”扩展...您需要添加`gdx-controllers-android.jar`. 请参阅 badlogic 博客的“集成到您的项目”部分：[http ://www.badlogicgames.com/wordpress/?p=2724](http://www.badlogicgames.com/wordpress/?p=2724)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T05:49:45.403

（`gdx.jar`其中包含与平台无关的 Libgdx 类）可能没有被打包到您的 Android .APK 中。（相对于 Android 特定的 Libgdx 类，它们被打包`gdx-backend-android.jar`并似乎确实进入了您的 .APK。）

您需要确保您的 Android 项目正在导出`gdx.jar`. *在Project Explorer*中右键单击您的 Android 项目，选择*Properties*，选择*Java Build Path*，然后选择*Order and Export*选项卡。确保`gdx.jar`并且`gdx-backend-android.jar`都被“检查”（以及您的公共项目）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-08T21:36:25.537

java=caca, adt=caca, eclipse=..... 我遇到了这个问题，在生气几个小时后解决了将主项目（教程中的 star-assault）从 java 1.7 更改为 java 1.6 的问题。 .

# java - JUnit assertTrue 异常

> ID：15214888
> 
> 赞同：1
> 
> 时间：2013-03-05T02:40:06.650
> 
> 标签：java, junit, assert

我正在尝试使用 JUnit 4.0 来测试应用程序是否在布尔方法上返回预期的输出。

测试类似于以下：

```
import org.junit.Test;
import static org.junit.Assert.*;

public class ExampleTest{
    @Test
    public void somethingTest(){
         String [] words={"one","two","one","two","one","two","one","two"};
         for(String word:words){
             Example example = new Example(word);
             if(word.startsWith("o")){
                 assertTrue(example.isO());
             }else{
                 assertFalse(example.isO());
             }
         } 
    }
} 
```

当我运行测试时，正确的断言可以正常工作。尽管当我遇到一个失败的断言时，会引发异常并且测试停止返回此堆栈：

```
java.lang.AssertionError
    at org.junit.Assert.fail(Assert.java:92)
    at org.junit.Assert.assertTrue(Assert.java:43)
    at org.junit.Assert.assertTrue(Assert.java:54)
    at core.ExampleTest.somethingTest.... 
```

我需要的是正常继续的测试，并在最后给我一些通过和失败的测试。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T02:42:51.987

您应该为每个单词创建一个测试。[您可以使用参数化测试](http://junit.sourceforge.net/javadoc/org/junit/runners/Parameterized.html)很容易地做到这一点。

# linux - 无法使用 +x 权限执行脚本文件，即使使用 sudo

> ID：15214890
> 
> 赞同：18
> 
> 时间：2013-03-05T02:40:36.700
> 
> 标签：linux, permissions

我无法从已安装的分区运行脚本。我创建了一个基本的“Hello World”脚本，可以从我的主目录执行，但是当我将它移动到挂载的分区时，我无法执行该文件。

```
$ ls -l
-rwxr-xr-x  1 user user    31 Mar  4 21:33 test.sh
$ ./test.sh
-bash: ./test.sh: Permission denied
$ sudo ./test.sh
[sudo] password for user:
sudo: unable to execute ./test.sh: Permission denied
$ cd ..
$ ls -l
drwxrwxrwx  6 user root  4096 Mar  4 21:34 sda5 
```

我不知道该怎么做。

ETA：我可以使用“bash test.sh”来执行文件，而不是./test.sh。我可以在主目录中执行 ./test.sh 。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-05T03:40:14.480

使用 noexec 安装文件系统，这会阻止执行文件。

# javascript - 通过函数获取数组的值

> ID：15214891
> 
> 赞同：0
> 
> 时间：2013-03-05T02:40:44.943
> 
> 标签：javascript, arrays

我有这个数组

```
var user = {
    "tester": {
        id: "1",
        name: "tester"
    }
}; 
```

和这个功能

```
function get(a, b) {
return user[a].b
}
get('tester', 'id') 
```

我应该如何修复它以使结果为 1？感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T02:42:17.797

```
function get(a, b) {
    return user[a][b];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T02:43:01.190

尝试这个：

```
function get(a, b) {
    return user[a][b];
}
get('tester', 'id'); 
```

# c++ - 从文件中按字母顺序排序时对排序和交换函数感到困惑

> ID：15214895
> 
> 赞同：-1
> 
> 时间：2013-03-05T02:41:26.753
> 
> 标签：c++, arrays, sorting, swap

好的，以前我的代码出错，参数不匹配，现在我在重写排序和交换函数时遇到问题。我对使用哪些变量名感到困惑。我已经尝试了所有我能想到的方法，但我不断出错。我已经完成了我分配给我的两本书的所有阅读，这个任务是星期天到期的，但我正在努力工作并完成它。因此，如果有人能指出我重写排序和交换函数的正确方向，我会非常亲切。我感到困惑的确切代码行如下：

```
 void swap(salesTran A[], int i, int j)
    {
    int temp;
    temp =A[i];
    A[j] = A[j];
    A[j] = temp;
    return;
    }
    void sort(salesTran A[], int size)
    {
        for(int p=1; p<size; p++)
        {
            for(int c=0; c<size-p; c++)
            {
                if(A[c]>A[c+1]) A (A,c,c+1);
            }
        }
        return;
    } 
```

我的整个程序：

```
#include <iostream>
#include <string>
#include <fstream>
using namespace std;

struct salesTran {
string name;
double quantity,price;
};

void swap(salesTran A[], int i, int j);
void sort(salesTran A[], int size);

ostream& operator << (ostream& os, salesTran A)
{os << A.name << "\t" << A.quantity << "\t" << A.price;
return os;}
istream& operator >> (istream& is, salesTran& A)
{is >> A.name >> A.quantity >> A.price;
return is;}

int main()
{
   salesTran data[250];

ifstream fin;
fin.open("sales.txt");
ofstream fout;
fout.open("results.txt");

int index = 0;
fin >> data[index];
while(!fin.eof())
{
index++;
fin >> data[index];
}

sort(data, index);

for(int j=0; j < index; j++)
{ 
cout << data[j] << endl;
}

return 0;
}

void swap(salesTran A[], int i, int j)
{
int temp;
temp =A[i];
A[j] = A[j];
A[j] = temp;
return;
}
void sort(salesTran A[], int size)
{
    for(int p=1; p<size; p++)
    {
        for(int c=0; c<size-p; c++)
        {
            if(A[c]>A[c+1]) A (A,c,c+1);
        }
    }
    return;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T02:47:59.477

```
A (A,c,c+1); 
```

您正试图`A`在您显然想要的地方调用函数`swap`。

`std::swap`另请注意，有些功能`std::sort`可以满足您的需求，但效率更高。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T02:44:37.667

在您的交换函数中，`temp`应该是 object 类型的`salesTran`对象，而不是`int`.

# jsf - 使用模态表单编辑数据表中的数据

> ID：15214897
> 
> 赞同：1
> 
> 时间：2013-03-05T02:42:00.617
> 
> 标签：jsf, primefaces

我有一个数据表，每一行都有一个

```
<p:commandButton styleClass="edit-promo-img" action="#{branchController.prepareEdit}" value="" oncomplete="updateBranchForm()"/> 
```

这是我的模态：

```
<div id="edit-branch-modal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <h:form id="editBranchForm">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            Branch Details
        </div>
        <div class="modal-body">
            <div><h:outputLabel value="#{bundle.CreateBranchLabel_name}" for="name" /></div>
            <div><h:inputText id="name" value="#{branchController.selected.name}" title="#{bundle.CreateBranchTitle_name}" required="true" requiredMessage="#{bundle.CreateBranchRequiredMessage_name}"/></div>
        </div>
        <div class="modal-footer">
            <p:commandButton action="#{branchController.update}" value="#{bundle.CreateBranchSaveLink}" />
            <button class="btn" data-dismiss="modal" aria-hidden="true">Cancel</button>
        </div>
        <p:remoteCommand name="updateBranchForm" update="@form" />
    </h:form> 
```

准备编辑方法：

```
public void prepareEdit() {
    current = (Branch) getItems().getRowData();
    selectedItemIndex = pagination.getPageFirstItem() + getItems().getRowIndex();
} 
```

选择的方法：

```
public Branch getSelected() {
    if (current == null) {
        current = new Branch();
        selectedItemIndex = -1;
    }
    return current;
} 
```

当我调试 getSelected 方法时，我的“当前”对象上实际上有正确的数据。

我的问题是，模式中的输入没有数据。

将 JSF 2.0 与 Primefaces 一起使用，而我的 bean 正在使用 ViewScope。

# javascript - JSON Eval 函数中的意外标识符

> ID：15214901
> 
> 赞同：-2
> 
> 时间：2013-03-05T02:42:11.143
> 
> 标签：javascript, json, syntax, eval

这是我在某处复制的用于对页面进行评分的代码。此代码在我的本地主机上运行良好，但当我将其上传到服务器时它返回语法错误。

```
 function rtgAjax(elm, ratev) {
   var cerere_http =  get_XmlHttp();        // get XMLHttpRequest object

 // define data to be send via POST to PHP (Array with name=value pairs)
  var datasend = Array();
  for(var i=0; i<elm.length; i++) datasend[i] = 'elm[]='+elm[i];
     // joins the array items into a string, separated by '&'
     datasend = datasend.join('&')+'&rate='+ratev;

     cerere_http.open("POST", 'ratingfiles/ratings.php', true);         
       //     crate the request

  cerere_http.setRequestHeader("Content-type", "application/x-www-form-urlencoded");              // header for POST
  cerere_http.send(datasend);       
 //  make the ajax request, poassing the data

 // checks and receives the response
 cerere_http.onreadystatechange = function() {
if (cerere_http.readyState == 4) {
  // receives a JSON with one or more item:['totalrate', 'nrrates', renot]
  eval(' var jsonitems = ' + cerere_http.responseText);

  // if jsonitems is defined variable
  if (jsonitems) {
    // parse the jsonitems object
    for(var rtgitem in jsonitems) {
      var renot = jsonitems[rtgitem][2];        
  // determine if the user can rate or not

      // if renot=3 displaies alert that already voted, else, continue with the rating reactualization
       if(renot == 3) {
        alert("You already voted \n You can rate again tomorrow");
        window.location.reload(true);       // Reload the page
      }
      else addRtgData(rtgitem, jsonitems[rtgitem][0], jsonitems[rtgitem][1], renot);    // calls function that shows rating
    }
  } 
```

这条线，

```
 eval(' var jsonitems = ' + cerere_http.responseText); 
```

返回语法错误：意外的标识符

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T02:59:45.007

`eval`不应该以这种方式使用。相反，试试这个：

```
var jsonitems;
try {
    jsonitems = JSON.parse(cerere_http.responseText);
}
catch(e) {alert("Failed to parse JSON: "+e);} 
```

# javascript - 访问 SVG 中的 JavaScript 变量？SVG 中的当前时间

> ID：15214904
> 
> 赞同：1
> 
> 时间：2013-03-05T02:42:50.747
> 
> 标签：javascript, interface, svg

我一直在谷歌搜索并试图找出如何做到这一点，但我什么也没想到。如何访问 SVG 中的 JavaScript 变量？

我正在开发一个用 SVG 编写的界面，但我需要获取当前日期和时间，对其进行格式化并显示它。

我正在努力

```
<text id="epgDate" x="1130" class="epg-date text" text-anchor="end" width="180">

    <script type="text/javascript"><![CDATA[
    setInterval( currentDate, 1000);
    ]]></script>

</text>
<text id="epgTime" x="1170" class="epg-time text">

    <script type="text/javascript"><![CDATA[
    setInterval( currentTime, 1000);
    ]]></script>

</text> 
```

在别处定义了“currentDate()”和“currentTime()”。

这给了我某种形式的语法错误（我正在使用客户端的仿真器工具来运行此界面，因此它没有告诉我更具体的信息）。 **编辑** 语法错误在其他地方，并且已修复。但是，这仍然不起作用。即使我尝试使用诸如“alert('x')”或“document.write('x')”之类的微不足道的函数。

有谁知道如何在 SVG 中获取当前的 DateTime，或者在 JavaScript 中获取它并使用 setInterval() 定期回显它？

非常感谢您提前提供的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T05:08:07.553

所以看起来我遇到的困惑是 SVG 和 HTML 标记页面之间的区别。SVG 使用稍微不同的 DOM，因此访问/设置元素并不总是以完全相同的方式工作或使用相同的方法。

我编写了这个脚本，并且能够为 SVG 绘制的日期和时间元素设置日期时间：

```
<script type="text/ecmascript"><![CDATA[

                // Format Date
                var date = new Date();
                var month = date.getMonth() + 1;
                var day = date.getDate();
                var year = date.getFullYear();

                var monthsByName = ["January", "February", "March",     "April", "May", "June", "July",
                    "August","September", "October", "November", "December"];

                var formattedDate = monthsByName[month - 1] + " " + day + ", " + year;

                var textNode = document.createTextNode(formattedDate);
                document.getElementById("epg-date").appendChild(textNode);

                // Format Time
                    // Source: bbrame @ StackOverflow
                var hours = date.getHours();
                var minutes = date.getMinutes();
                var ampm = hours >= 12 ? 'PM' : 'AM';
                hours = hours % 12;
                hours = hours ? hours : 12;
                minutes = minutes < 10 ? "0"+minutes : minutes;

                var formattedTime = hours + ':' + minutes + ' ' + ampm;

                var timeNode = document.createTextNode(formattedTime);
                document.getElementById("epg-time").appendChild(timeNode);

            ]]></script> 
```

# actionscript-3 - Actionscript mobile Madcomponents Mapquest

> ID：15214908
> 
> 赞同：0
> 
> 时间：2013-03-05T02:43:01.497
> 
> 标签：actionscript-3, mapquest

我正在尝试在动作脚本移动应用程序中添加地图我已经为布局创建了 xml，因为 xml 布局的标签是预定义的，所以我相信我们无法创建自定义标签，所以我使用图像标签添加了该地图，但现在问题是疯狂的组件也禁用了它的滚动，没有遗憾，因为我已经在图像下创建了地图，我尝试将 scrollVertical 也放入，但是因为该地图位于图像标签下，所以没有奏效。

下面是我的代码。

```
package
{
    import com.danielfreeman.madcomponents.*;
    import com.mapquest.*;
    import com.mapquest.services.geocode.*;
    import com.mapquest.tilemap.*;
    import com.mapquest.tilemap.controls.inputdevice.*;
    import com.mapquest.tilemap.controls.shadymeadow.*;
    import com.mapquest.tilemap.pois.*;

    import flash.display.Screen;
    import flash.display.Sprite;
    import flash.display.Stage;
    import flash.display.StageAlign;
    import flash.display.StageScaleMode;
    import flash.events.Event;
    import flash.geom.Point;
    import flash.geom.Rectangle;
    import flash.media.StageWebView;
    import flash.system.Capabilities;
    import flash.text.TextField;
    import flash.utils.flash_proxy;

    import mx.events.FlexEvent;

    public class map extends Sprite
    {   

        private static var alResults:Array;
    static  var   myMap:TileMap = new TileMap("my Key");
    static  var geocoder:Geocoder;

        public static const LAYOUT:XML = <scrollVertical background="#DADED4" >

                                    <imageLoader   id="placeholder"> </imageLoader  >

                </scrollVertical>;

        protected static var _message:UILabel;

        public static function initialize():void{

            var placeholder:UIImageLoader = UIImageLoader(UI.findViewById("placeholder"));
            placeholder.scrollRect
            placeholder.addChild(myMap);
            myMap.addControl(new SMLargeZoomControl());
            myMap.addControl(new SMViewControl());
            myMap.addControl(new MouseWheelZoomControl());

            myMap.size = new Size(300, 400);
            myMap.addControl(new SMLargeZoomControl());
            myMap.addControl(new SMViewControl());
            myMap.addControl(new MouseWheelZoomControl());

            // create a new TileMap object, passing your platform key
            geocoder = new Geocoder(myMap);

            geocoder.addEventListener(GeocoderEvent.GEOCODE_RESPONSE, onGeocodeResponse);
            geocoder.addEventListener(GeocoderEvent.GEOCODE_ERROR_EVENT, onGeocodeError);
            geocoder.addEventListener(GeocoderEvent.HTTP_ERROR_EVENT, onHttpError);
            doGeocode();
        }

        public function map()
        {
            super();

        }

        private static function onGeocodeResponse(e:GeocoderEvent):void {

            alResults = new Array();
            for each (var loc:GeocoderLocation in e.geocoderResponse.locations) {
                var o:Object = new Object();

                o.LatLng = loc.displayLatLng.lat + ", " + loc.displayLatLng.lng;
                o.GeocodeQuality = loc.geocodeQuality;
                o.GeocodeQualityCode = loc.geocodeQualityCode;

                alResults.push(o);
            }

            //this.dgResults.dataProvider = this.alResults;
            //this.vgrpResults.visible = true;
        }

        private static function doGeocode():void {    
            //remove all shapes form the map
            myMap.removeShapes();

            //use the default cursor
            //this.cursorManager.setBusyCursor();

            //make an array to hold the addresses
            var arrAddresses:Array = new Array();

            //push the addresses onto the array

            arrAddresses.push("placea");
            arrAddresses.push("place b");

            //call the geocoder object's geocode method, passing the array of addresses
            geocoder.geocode(arrAddresses);
        }

        private static function onGeocodeError(e:GeocoderEvent):void {
            //this.cursorManager.removeBusyCursor();
            makeErrorList("GEOCODER ERROR");
        }

        /*
        function to handle an error in the result
        */
        private static function onHttpError(e:GeocoderEvent):void {
            //this.cursorManager.removeBusyCursor();
            makeErrorList("HTTP ERROR");
        }

        /*
        function to make an array list to hold an error
        */
        private static function makeErrorList(s:String):void {
            var o:Object = new Object();
            o.LatLng = s;
            alResults.push(o);

            //this.dgResults.dataProvider = this.alResults;
            //this.vgrpResults.visible = true;
        }

    }
} 
```

有没有人知道我如何实现我的目标：S 帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T23:16:19.420

我没有使用垂直，而是使用了 scrollXY 而不是搜索滚动，请参见以下代码

```
package
{
    import com.danielfreeman.extendedMadness.UIScrollXY;
    import com.danielfreeman.madcomponents.*;
    import com.mapquest.*;
    import com.mapquest.services.geocode.*;
    import com.mapquest.tilemap.*;
    import com.mapquest.tilemap.controls.inputdevice.*;
    import com.mapquest.tilemap.controls.shadymeadow.*;
    import com.mapquest.tilemap.pois.*;

    import flash.display.Screen;
    import flash.display.Sprite;
    import flash.display.Stage;
    import flash.display.StageAlign;
    import flash.display.StageScaleMode;
    import flash.events.Event;
    import flash.geom.Point;
    import flash.geom.Rectangle;
    import flash.media.StageWebView;
    import flash.system.Capabilities;
    import flash.text.TextField;
    import flash.utils.flash_proxy;

    import mx.events.FlexEvent;

    public class map extends Sprite
    {   

        private static var alResults:Array;
    static  var   myMap:TileMap = new TileMap("My Key");
    static  var geocoder:Geocoder;

        public static const LAYOUT:XML = 
            <scrollXY tapToScale="3.0" stageColour="#666666" scrollBarColour="#FFFFFF" width="480" height="640" border="false" id="scroller">
                                    <imageLoader   id="placeholder"> </imageLoader  >
</scrollXY>;

        protected static var _message:UILabel;

        public static function initialize():void{
            var scroller:UIScrollXY = UIScrollXY(UI.findViewById("scroller"));
            scroller.addChild(myMap);

            /*var placeholder:UIImageLoader = UIImageLoader(UI.findViewById("placeholder"));
            placeholder.scrollRect
            placeholder.addChild(myMap);
        */  myMap.addControl(new SMLargeZoomControl());
            myMap.addControl(new SMViewControl());
            myMap.addControl(new MouseWheelZoomControl());

            myMap.size = new Size(300, 400);
            myMap.addControl(new SMLargeZoomControl());
            myMap.addControl(new SMViewControl());
            myMap.addControl(new MouseWheelZoomControl());

            // create a new TileMap object, passing your platform key
            geocoder = new Geocoder(myMap);

            geocoder.addEventListener(GeocoderEvent.GEOCODE_RESPONSE, onGeocodeResponse);
            geocoder.addEventListener(GeocoderEvent.GEOCODE_ERROR_EVENT, onGeocodeError);
            geocoder.addEventListener(GeocoderEvent.HTTP_ERROR_EVENT, onHttpError);
            doGeocode();
        }

        public function map()
        {
            super();

        }

        private static function onGeocodeResponse(e:GeocoderEvent):void {

            alResults = new Array();
            for each (var loc:GeocoderLocation in e.geocoderResponse.locations) {
                var o:Object = new Object();

                o.LatLng = loc.displayLatLng.lat + ", " + loc.displayLatLng.lng;
                o.GeocodeQuality = loc.geocodeQuality;
                o.GeocodeQualityCode = loc.geocodeQualityCode;

                alResults.push(o);
            }

            //this.dgResults.dataProvider = this.alResults;
            //this.vgrpResults.visible = true;
        }

        private static function doGeocode():void {    
            //remove all shapes form the map
            myMap.removeShapes();

            //use the default cursor
            //this.cursorManager.setBusyCursor();

            //make an array to hold the addresses
            var arrAddresses:Array = new Array();

            //push the addresses onto the array

            arrAddresses.push("Loc1");
            arrAddresses.push("Loc2");

            //call the geocoder object's geocode method, passing the array of addresses
            geocoder.geocode(arrAddresses);
        }

        private static function onGeocodeError(e:GeocoderEvent):void {
            //this.cursorManager.removeBusyCursor();
            makeErrorList("GEOCODER ERROR");
        }

        /*
        function to handle an error in the result
        */
        private static function onHttpError(e:GeocoderEvent):void {
            //this.cursorManager.removeBusyCursor();
            makeErrorList("HTTP ERROR");
        }

        /*
        function to make an array list to hold an error
        */
        private static function makeErrorList(s:String):void {
            var o:Object = new Object();
            o.LatLng = s;
            alResults.push(o);

            //this.dgResults.dataProvider = this.alResults;
            //this.vgrpResults.visible = true;
        }

    }
} 
```

# django - django 信号：同步问题？

> ID：15214909
> 
> 赞同：0
> 
> 时间：2013-03-05T02:43:03.047
> 
> 标签：django

当我们有多个用户连接到 django 时，我的信号会相互播放并断开并重新连接。即使是同一台服务器，它们是否对每个用户都是完全独立的？

所以我有两个信号 A 和 B `post_save`。
两者都在断开和重新连接时互相呼叫。

1.  A的信号：断开A，B并执行B.save（）
2.  B的信号：断开A，B并执行A.save（）

django 信号是否存在同步问题？如果我同时保存多个 A 和 B，django 信号是否可以处理这个问题？

我猜信号每次被调用时都有不同的“签名”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T01:36:57.590

由于信号处理程序通常在加载它们所在的模块时连接，而不是在每个请求上连接，因此在运行时连接和断开它们的效果将由同一个 Django 进程处理所有用户，而不仅仅是单个请求。

[Django 错误 14533](https://code.djangoproject.com/ticket/14533)似乎已经解决了一些线程安全问题，因此如果您希望它在请求之间产生副作用，这可能会起作用，但否则，您应该考虑以更传统的方式使用信号。

# java - Java梳排序陷入无限循环

> ID：15214915
> 
> 赞同：1
> 
> 时间：2013-03-05T02:44:05.730
> 
> 标签：java, sorting

我正在做一个combsort algorithim作为班级作业，每当我运行它时它都会循环。我不确定我做错了什么（我在 C++ 中使用它，但那是不久前的事了，这些技能并没有像我希望的那样翻译）。我已经研究了一个半小时，并给一些朋友发了电子邮件，但不幸的是，没有人有任何想法。我想我只需要有更多经验的人来告诉我我搞砸了什么。谢谢！

```
import java.util.ArrayList;

public class CombSort {
    public CombSort()
    {
        super();
    }

    public ArrayList<Integer> combSort(ArrayList<Integer> sortMe)
    {
        int swap;
        int size = sortMe.size();
        int gap = size;
        boolean swapped = false;

        while ((gap > 1) || swapped)
        {
            if (gap > 1)
            {
                gap = (int) ((size)*((double)gap / 1.247330950103979));
            }

            swapped = false;

            for (int i = 0; gap + i < size; ++i)
            {
                if (sortMe.get(i) - sortMe.get(i + gap) > 0)
                {
                    swap = sortMe.get(i);
                    sortMe.set(i, sortMe.get(i + gap));
                    sortMe.set(i + gap, swap);
                    swapped = true;
                }
            }
        }
        return sortMe;
    }

    public static void main(String[] args)
    {
        ArrayList<Integer> randomArrayList = new ArrayList<Integer>(7);
        randomArrayList.add(5);
        randomArrayList.add(7);
        randomArrayList.add(2);
        randomArrayList.add(6);
        randomArrayList.add(8);
        randomArrayList.add(2);
        randomArrayList.add(9);
        CombSort combSorter = new CombSort();
        System.out.println(combSorter.combSort(randomArrayList).toString());
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T02:49:46.657

随着循环内的每次迭代，您的`gap`价值会越来越大`while`，因此它是无限循环的。

您应该只将间隙乘以梳状因子，而不是大小。

`(int) ((size)*((double)gap / 1.247330950103979));`应该

`(int) ((double)gap / 1.247330950103979);`

# actionscript-3 - 光标卡在第一帧 Flash AS3

> ID：15214917
> 
> 赞同：0
> 
> 时间：2013-03-05T02:44:25.277
> 
> 标签：actionscript-3, flash, cursor

每次我重新访问第 1 帧时，都会弹出一个重复的光标。当进入第 2 帧然后按返回按钮到第 1 帧时，光标会卡住，但也会出现一个新光标，这意味着我在一帧中有两个光标。

请问有什么帮助吗？

谢谢你

```
stage.addChild(pencil);

pencil.mouseEnabled = false;
pencil.addEventListener(Event.ENTER_FRAME, fl_CustomMouseCursor);

function fl_CustomMouseCursor(event:Event)

    pencil.x = stage.mouseX;
    pencil.y = stage.mouseY;

Mouse.hide(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:28:44.573

在框架中编写代码 - 不好的做法。

但是您可以通过多种方式避免重新执行代码。例如

```
var executed:Boolean;
if (executed) return;
executed = true;
// ----------------
stage.addChild(pencil);

pencil.mouseEnabled = false;
pencil.addEventListener(Event.ENTER_FRAME, fl_CustomMouseCursor);

function fl_CustomMouseCursor(event:Event)

    pencil.x = stage.mouseX;
    pencil.y = stage.mouseY;

Mouse.hide(); 
```

# c# - 我的单元测试项目图标像类库一样显示...如何修复？

> ID：15214922
> 
> 赞同：16
> 
> 时间：2013-03-05T02:45:14.573
> 
> 标签：c#, visual-studio-2012

我的 VS2012 Update 1 解决方案中有 2 个 c# 测试项目，一个显示类库图标，一个显示测试项目图标。它们都作为测试项目工作，但差异让我发疯。（短途驾驶）。有人知道如何解决这个问题吗？我已经查看了 .csproj 和 .sln 文件，但没有任何东西向我扑来。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2017-10-30T09:54:46.427

*   在解决方案资源管理器中右键单击项目并选择编辑项目文件
*   在节点中添加一个新子`<PropertyGroup>`节点：

    `<ProjectTypeGuids>{3AC096D0-A1C2-E12C-1390-A8335801FDAB};{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}</ProjectTypeGuids>`

*   保存更改并关闭文件

*   在解决方案资源管理器中右键单击项目并选择重新加载项目

[https://adamprescott.net/2012/03/29/convert-a-class-library-to-a-test-project-in-visual-studio/](https://adamprescott.net/2012/03/29/convert-a-class-library-to-a-test-project-in-visual-studio/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2020-06-18T14:21:43.623

如果您的项目在一个新样式的`.csproj`文件上（不那么冗长，就像顶行一样，支持通配符等），那么您可以通过将NuGet 包添加到您的项目或添加此行来`<Project Sdk="Microsoft.NET.Sdk">`为您的项目获取试管图标`Microsoft.NET.Test.Sdk`到您的`.csproj`文件（相当于同一件事）：

```
<ItemGroup>
    <PackageReference Include="Microsoft.NET.Test.Sdk" Version="16.6.1" />
</ItemGroup> 
```

（在撰写本文时版本号正确 - 检查最新版本。）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-02-19T14:11:43.897

Pawel 的回答是对的，但是它被 html 解析器截断了......提到的子节点应该如下所示：

```
<ProjectTypeGuids>{3AC096D0-A1C2-E12C-1390-A8335801FDAB};{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}</ProjectTypeGuids> 
```

此行也可以直接添加到 csproj 文件（添加到主 PropertyGroup）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-06-11T16:45:26.133

这并不是真正的解决方案，但它似乎是 Visual Studio 中的一个错误。

[请在此处](http://connect.microsoft.com/VisualStudio/feedback/details/778622/solution-explorer-displays-incorrect-icons-for-unit-test-projects)、[此处](https://connect.microsoft.com/VisualStudio/feedback/details/764003/visual-studio-2012-displays-wrong-icon-for-test-project)和[此处查看](http://connect.microsoft.com/VisualStudio/feedback/details/774775)您可以关注的Microsoft Connect 问题。

[这里](https://stackoverflow.com/questions/12528335/visual-studio-2012-displays-wrong-icon-for-test-project)也有一个类似的问题。

**更新：**

这似乎在 Visual Studio 2013 预览版中得到解决。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-03-05T06:06:05.670

打开解决方案资源管理器，右键单击，转到属性，在“应用程序”下有一个名为“输出类型”的下拉菜单，并将其从类库更改为您想要的任何内容（很可能是应用程序）。

# java - 复制到 servlet 时的 java 代码根本不起作用

> ID：15214924
> 
> 赞同：0
> 
> 时间：2013-03-05T02:45:23.890
> 
> 标签：java, servlets

下面的这个方法放在一个类中可以正常工作，但是当粘贴到 servlet 代码中并被调用时，根本不起作用。生成的错误消息是：[Microsoft][ODBC Driver Manager] Data source name not found and no default driver specified

如何修复上述错误消息？数据库已在系统中正确注册，并且如果此代码在常规类中，则该数据库正在工作。我在这里做错了什么？

```
public static int sendMyQUERY(String q) {
    int i = 0;
    Connection conn = null;
    Statement s = null;
    try {
        Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
        String database = "jdbc:odbc:SS";
        conn = DriverManager.getConnection(database, "", "");
        s = conn.createStatement(ResultSet.TYPE_SCROLL_SENSITIVE,
                ResultSet.CONCUR_UPDATABLE);
        i = s.executeUpdate(q);
        s.close();
        conn.close();
        return i;
    } catch (Exception ee) {
        ee.printStackTrace();
    } finally {
        return i;
    }
}// endMethod 
```

这是 servlet 代码。通过不工作，我的意思是查询不会被执行，因为我看不到 printStackTrace()，我也不知道原因。

```
import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*;
import java.sql.*;

public class SS extends HttpServlet {        
    public static int sendMyQuery( String q ){
        int i=0;
        Connection conn=null;
        Statement s=null;
        try {
            Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
            String database= "jdbc:odbc:SS";
            conn= DriverManager.getConnection( database,"","" );
            s = conn.createStatement( ResultSet.TYPE_SCROLL_SENSITIVE, ResultSet.CONCUR_UPDATABLE);
            i=s.executeUpdate(q);
            s.close(); conn.close();
            return i;
        } catch (Exception ee) {
            ee.printStackTrace();
        } finally {
            return i;
        }
    }//End

    public void doGet( HttpServletRequest request, HttpServletResponse response ) throws IOException{
        PrintWriter pw= response.getWriter();
        response.setContentType("text/html");    
        int j = sendMyQuery("CREATE TABLE "+users+" ( id AUTOINCREMENT, username varchar(255) , pass varchar(255), PRIMARY KEY(id) ) ");    
        pw.println(" <h1> "+ Integer.toString(j) + " query response ");

    }//doGet
}//class 
```

在上面的代码中，表根本不会被创建。就像从未发送过查询一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:31:58.127

要查看您在做什么，请执行以下操作：

```
import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*;
import java.sql.*;

public class SS extends HttpServlet {        
    public static int sendMyQuery( String q ) throws Exception {
        int i=0;
        Connection conn=null;
        Statement s=null;
        Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
        String database= "jdbc:odbc:SS";
        conn= DriverManager.getConnection( database,"","" );
        s = conn.createStatement( ResultSet.TYPE_SCROLL_SENSITIVE, ResultSet.CONCUR_UPDATABLE);
        i=s.executeUpdate(q);
        s.close(); conn.close();
        return i;
    }//End

    public void doGet( HttpServletRequest request, HttpServletResponse response ) throws IOException{
        PrintWriter pw= response.getWriter();
        try {
            int j = sendMyQuery("CREATE TABLE "+users+" ( id AUTOINCREMENT, username varchar(255) , pass varchar(255), PRIMARY KEY(id) ) ");    
            response.setContentType("text/html");    
            pw.println(" <h1> "+ Integer.toString(j) + " query response ");
        } catch (Exception ee) {
            response.setContentType("text/plain");    
            ee.printStackTrace(pw);
        }
    }//doGet
}//class 
```

# integration - 寻找标准数据交换格式

> ID：15214930
> 
> 赞同：0
> 
> 时间：2013-03-05T02:45:57.207
> 
> 标签：integration, standards

我们将移动一些数据，这些数据将具有一些标准字段以及一些键值对，这些键值对会因数据项而异。显然，我们可以用 JSON 或 XML 编写代码来执行此操作并编写我们自己的编组/解组代码，但是我希望有一个基于标准的解决方案，它具有以下部分或全部：

*   SharePoint 列表/.Net 的编组/解组
*   Java的编组/解组
*   跨集成边界对数据进行操作的服务定义和语义
*   安全语义

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T01:20:55.400

我们目前正在研究执行此任务的 OData 协议：[http ://www.odata.org/](http://www.odata.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-07T23:00:04.847

大概你很久以前就已经做出了决定，但对于任何最终来到这里的人，并且可能对比 OData 更低级别的东西感兴趣，这就是我用于 C# 到 Java 数据交换的内容：

Google 协议缓冲区作为交换格式： [https ://developers.google.com/protocol-buffers/](https://developers.google.com/protocol-buffers/)

Marc Gravell 在 C# 端的 protobuf-net： [http ://code.google.com/p/protobuf-net/](http://code.google.com/p/protobuf-net/)

在 Java 端称为 protostuff 的程序： [http ://code.google.com/p/protostuff/](http://code.google.com/p/protostuff/)

（由于 Google 的实现是基于 Java 对象不可变的，所以我更喜欢 protostuff 而不是协议缓冲区的官方 Google Java 实现。）

实际上，我没有使用纯协议缓冲区作为交换格式——我在数据前面加上正在传输的（最外层）类的名称。这使得数据可以自我识别，以便在另一端进行反序列化。

# r - Subsetting Data based on whether one multiple variables are/aren't included in list

> ID：15214932
> 
> 赞同：0
> 
> 时间：2013-03-05T02:46:09.080
> 
> 标签：r, subset

I am trying to make two subsets my data if any one of 5 columns (5-10) contains a factor within my list (keep.list) and one where none of the cols contain anything from the keep.list. Here's where I am so far but can't get it to subset right:

```
test.cols <- c(5:10)
keep.list <- c("dog","cat","mouse","bird")

data.sub.IN <- data.big[which(any(keep.list %in% data.big[test.cols])),]

data.sub.NOT.IN <- data.big[which(any(keep.list !%in% data.big[test.cols])),] 
```

I think `which()` and `any()` can help but I might be wrong, and I don't know how to handle to "not included" case, as the usual `!` command isn't working.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T02:55:01.960

You can do this using `apply`:

```
keep <- apply(data.big[test.cols], 1, function(r) any(r %in% keep.list))
data.sub.IN <- data.big[keep, ]
data.sub.NOT.IN <- data.big[!keep, ] 
```

`apply` applies a function to each row of the data frame. In this case, for each row, it checks whether any of the items in that row are in `keep.list`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T03:06:24.580

I'd go with @DavidRobinsons's answer, but if you want to keep it in the form it is, you need to move the `!`. To negate `%in%`, you put the `!` before the first part of your logical operator.

```
B <- 1:4
A <- 3:6
A %in% B
[1]  TRUE  TRUE FALSE FALSE
!A %in% B
[1] FALSE FALSE  TRUE  TRUE 
```

So for your case:

```
data.sub.NOT.IN <- data.big[which(any(!keep.list %in% data.big[test.cols])),] 
```

But, again, in this case using `apply` is a better option, I think.

*EDIT* Based on @DWin's comment, this may not work (hard to tell without example dataset), you might actually need:

```
data.sub.NOT.IN <- data.big[which(!any(keep.list %in% data.big[test.cols])),] 
```

# android - 如何在 Galaxy Nexus 上存储以编程方式创建的文件？

> ID：15214933
> 
> 赞同：0
> 
> 时间：2013-03-05T02:46:35.537
> 
> 标签：android, storage, android-sdcard, galaxy-nexus

我想创建一个应用程序来捕获视频并将捕获的视频存储在 sdcard 上。但是 Nexus 没有 sdcard，所以应用程序给了我一个例外并说：

> 不幸的是，该应用程序已关闭。

我尝试将捕获的视频保存在内部存储器中，但无法访问这些视频。视频也未在设备库中列出。

应用程序应该将数据存储在 Nexus 设备上的什么位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T03:00:19.763

用于`Environment.getExternalStorageDirectory().getPath()`获取任何给定设备上外部存储的路径。您应该使用它而不是硬编码`/sdcard/`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T02:58:33.857

Galaxy Nexus 确实使用

```
/mnt/shell/emulated/0 
```

有关坐骑的血腥细节，请参见[此处...](https://stackoverflow.com/a/14859132/560435)

您还可以将您的应用程序文件存储在返回的文件夹中

```
ContextWrapper.getFilesDir() 
```

该路径将类似于：-

```
/data/data/$YOUR.PACKAGE/files 
```

# java - 使用 UADetector 从用户代理获取 Android 设备名称

> ID：15214936
> 
> 赞同：2
> 
> 时间：2013-03-05T02:46:50.547
> 
> 标签：java, android, google-app-engine, user-agent

我在 Google App Engine 中使用[UADetector](http://uadetector.sourceforge.net/)来解析这个用户代理，如下所示：

```
Mozilla/5.0 (Linux; U; Android 2.2; en-ca; GT-P1000M Build/FROYO) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1 
```

我可以`getOperatingSystem()`，但我无法获得类似的 Android 设备名称`GT-P1000M`

我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T07:32:31.350

此功能经常被要求，但**目前尚未实现**。为了能够实现这一点，我们需要一个包含相应设备信息的用户代理字符串的大列表。我认为我们没有得到这份清单，但我们应该能够部分（按需）实施它。

在过去的几天里，我一直在考虑实现一组已知的片段，以便您可以编写如下内容：

```
UserAgentStringParser parser = UADetectorServiceFactory.getResourceModuleParser();
UserAgent ua = parser.parse(anyUserAgentString);
if (ua.getKnownFragments().contains(KnownFragments.GT_P1000M)) {
    System.out.println("Seems to be a Galaxy Tab GT-P1000.");
} else if (ua.getKnownFragments().contains(KnownFragments.IPAD)) {
    System.out.println("Seems to be an iPad.");
} else if (ua.getKnownFragments().contains(KnownFragments.IPHONE)) {
    System.out.println("Seems to be an iPhone.");
} 
```

如果此功能可以帮助您，请参与。此功能将在[https://github.com/before/uadetector/issues/20](https://github.com/before/uadetector/issues/20)上讨论。非常感谢任何反馈或帮助。

（我是*UADetector*的作者。）

# ruby-on-rails - “[失败] 找不到文件：config/schedule.rb”rails，每当 gem

> ID：15214937
> 
> 赞同：3
> 
> 时间：2013-03-05T02:46:57.740
> 
> 标签：ruby-on-rails, cron, gem, whenever

我收到此消息 ->“[失败] 找不到文件：config/schedule.rb”

我正在使用“无论何时” gem - > [https://github.com/javan/whenever](https://github.com/javan/whenever)

我确实把它放在了我的 Gemfile

```
gem 'whenever', :require => false 
```

然后无论何时。

& 我在 config/schedule.rb 中有文件

```
every 2.hours do
  rake "thinking_sphinx:index"
end 
```

当我运行 -> "whenever" 或 "whenever --update-crontab mycron --set environment=development" 或 "whenever --update-crontab mycron" 时，我得到这个消息 -> "[fail] 找不到文件：配置/计划.rb"

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T03:13:43.553

问题是您可能不在 rails 根目录中，因此转到根路径应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T02:51:09.077

你可以试试吗？

```
cd /my_rails_application_root_path && bundle exec whenever 
```

[您可以在https://github.com/cwninja/whenever/blob/master/bin/whenever](https://github.com/cwninja/whenever/blob/master/bin/whenever)查看二进制源代码

如果不传递属性-f，默认使用config/schedule.rb，但也可以运行

```
whenever -f COMPLETE_PATH_TO_SCHEDULE_RB 
```

# session - 如何计算 tcp 会话的流量？

> ID：15214942
> 
> 赞同：0
> 
> 时间：2013-03-05T02:47:29.287
> 
> 标签：session, networking, tcp, flow

在我的项目中我需要计算一个tcp会话的流量，我应该使用total_bytes_of_session/total_time_elapsed还是使用tcp-windows和tcp-rtt来计算？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T03:12:13.607

> 在我的项目中，我需要计算 tcp 会话的流量

我假设您的意思是刚刚结束并且您已获取数据的会话的流量？

> 我应该使用 total_bytes_of_session/total_time_elapsed

是的，如果你有这些数据。

> 还是使用 tcp-windows 和 tcp-rtt 来计算？

您没有该数据，也无法获得它，因此您无法使用任何依赖于它的计算。

# sql - 触发器抛出错误 超出最大存储过程、函数、触发器或视图嵌套级别

> ID：15214950
> 
> 赞同：1
> 
> 时间：2013-03-05T02:48:00.987
> 
> 标签：sql, sql-server, triggers

我有两个触发器，它们看起来几乎相同，但差异很小

触发器 1

```
create trigger tr_EligebilityCheckSRmonth
on dbo.Clients
after INSERT,UPDATE
as 

BEGIN
UPDATE Clients 
SET 
StatusID = 5
WHERE 
ClientID IN (Select ClientID
             from Clients c 
             join IncomeEligibility i 
                  on c.HshldSize = i.HshldSize
             where c.HshldSize= i.HshldSize 
                   and c.AnnualHshldIncome >= i.SeniorMo 
                   and StatusID in (1,2) 
                   and c.CategCode = 'SR' 
                   and MonthlyYearly ='month')
END 
```

触发器 2

```
create trigger tr_EligebilityCheckSRyear
on dbo.Clients
after INSERT,UPDATE
as 

BEGIN
UPDATE Clients 
SET 
StatusID = 5
WHERE 
ClientID IN (Select ClientID
             from Clients c 
             join IncomeEligibility i 
                  on c.HshldSize = i.HshldSize
             where c.HshldSize= i.HshldSize 
                   and c.AnnualHshldIncome >= i.SeniorMo 
                   and StatusID in (1,2) 
                   and c.CategCode = 'SR' 
                   and MonthlyYearly ='year')
End 
```

当我像这样提交插入 ststamnet

```
INSERT INTO Clients (ClientID, LastName, FirstName, MidInitial, DOB, Address, Address2, City, Zip, Phone, CategCode, StatusID, Hispanic, EthnCode, LangID, ClientProxy, Parent, HshldSize, AnnualHshldIncome, MonthlyYearly, PFDs, WIC, Medicaid, ATAP, FoodStamps, AgencyID, RoutID, DeliveryNotes, AppDate, CertifiedDate, Notes)
VALUES (13542,'Test','Test',null,'1982-10-20','P.O. Box 5',null,'TEST',99999,'(907) 111-1111','SR',1, 0, 'W',1, null, null,3,1000000,'year',0,0, 1,  0,1,45, null,null,'2011-04-27', null,null); 
```

它抛出错误

> *消息 217，级别 16，状态 1，过程 tr_EligebilityCheckSRyear，第 28 行 超出
> 最大存储过程、函数、触发器或视图嵌套级别（限制 32）。*

我试图将它们组合在一个触发器中并使用 IF else 但没有任何疑问。如果我在系统中只有一个，它可以工作，但是当我有两个时，它会抛出错误。如何解决这个问题？我在这里查看其他帖子，但找不到任何有用的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T03:53:29.493

在触发器中发布和更新，对于触发器绑定到的表，不会像你期望的那样做。仅仅因为更新代码在触发器代码中并不意味着更新语句不会导致触发器一遍又一遍地触发。如果有帮助，您可以获得 UPDATED 和 DELETED 游标，表示已更新或删除的记录。

# c# - 应用程序错误

> ID：15214954
> 
> 赞同：0
> 
> 时间：2013-03-05T02:48:16.337
> 
> 标签：c#, error-handling

我最近发现生产中的 IIS 工作进程每周崩溃 2-3 次。我在异常日志中注意到这是因为 UnhandledException。我调查并发现 Global.asax 没有 Server.Transfer 调用。

然后我做了一些谷歌搜索，似乎最好使用 Response.Redirect。这是真的吗，我不断收到不同的评论......

```
 void Application_Error(object sender, EventArgs e)
    {
        // Code that runs when an unhandled error occurs
        if (null != Context && null != Context.AllErrors)
            System.Diagnostics.Debug.WriteLine(Context.AllErrors.Length);

        //bool isUnexpectedException = true;
        HttpContext context = ((HttpApplication)sender).Context;

        Exception ex = context.Server.GetLastError();
        if (ex.InnerException != null)
            ex = ex.InnerException;

        LogManager.ExceptionHandler(ex);

        Server.Transfer("GeneralError.aspx");
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T02:59:56.297

这取决于您是否希望您的用户看到“重定向”。我个人会在这种情况下使用 Response.Redirect 。

查看有关两者之间区别的答案： [https ://stackoverflow.com/a/224577/1260077](https://stackoverflow.com/a/224577/1260077)

# sql - 如何将一张表中的记录插入到第二张表中

> ID：15214955
> 
> 赞同：1
> 
> 时间：2013-03-05T02:48:22.983
> 
> 标签：sql, sql-server, sql-server-2005, unpivot

当前表不是为增长而设置的，我想将现有数据迁移到更适合扩展的表中。让我解释：

当前表设置如下：

```
+--------+---------------+----+----+----+------+-----------+
|     id | DateOfService | AM | MD | PM | RATE | CLIENT_ID |
+--------+---------------+----+----+----+------+-----------+
|      1 | 3/4/2013      |  1 |  0 |  0 |   10 |       123 |
|      2 | 3/5/2013      |  1 |  0 |  0 |   10 |       123 |
|      3 | 3/6/2013      |  1 |  0 |  0 |   10 |       123 |
|      4 | 3/5/2013      |  0 |  1 |  1 |   50 |       147 |
|      5 | 3/6/2013      |  1 |  1 |  1 |   25 |       189 |
+--------+---------------+----+----+----+------+-----------+ 
```

相反，我想像这样设置我的表：

```
+----------+---------------+---------------+-----------+
|     pkid | DateOfService | ServiceTypeID | CLIENT_ID |
+----------+---------------+---------------+-----------+
|        1 | 3/4/2013      |             1 |       123 |
|        2 | 3/5/2013      |             1 |       123 |
|        3 | 3/6/2013      |             1 |       123 |
|        4 | 3/5/2013      |             2 |       147 |
|        5 | 3/5/2013      |             3 |       147 |
|        6 | 3/6/2013      |             1 |       189 |
|        7 | 3/6/2013      |             2 |       189 |
|        8 | 3/6/2013      |             3 |       189 |
+----------+---------------+---------------+-----------+ 
```

ServiceTypeID 表将是一个`options`表设置，例如：

```
+-------------------+---------+
|     ServiceTypeID | Service |
+-------------------+---------+
|                 1 | AM      |
|                 2 | MD      |
|                 3 | PM      |
+-------------------+---------+ 
```

我需要帮助提出一个可以运行的查询，该查询将选择并循环现有数据并填充我的新表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T02:56:47.537

您可以使用该[`UNPIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)功能将当前表格从列转换为行。然后你可以加入你的`options`表并将数据插入到你的新表中。

`UNPIVOT`代码将是：

```
select id,
  dateofservice,
  client_id,
  col, 
  value
from yourtable
unpivot
(
  value
  for col in (AM, MD, PM)
) unpiv
where value <> 0 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/6cb1c/4)

然后您将加入您的`options`表格以获得结果。您可以将此查询用于`INSERT INTO`新表：

```
-- INSERT INTO yourNewTable
select src.id as pkid,
  src.dateofservice,
  o.servicetypeid,
  src.client_id
from
(
  select id,
    dateofservice,
    client_id,
    col, 
    value
  from yourtable
  unpivot
  (
    value
    for col in (AM, MD, PM)
  ) unpiv
  where value <> 0
) src
inner join options o
  on src.col = o.service 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/6cb1c/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T03:08:26.453

由于您的选项表是“设置”，因此可以使用以下方法：

```
INSERT INTO newtable
  SELECT id, dateofservice, 1, clientid
  FROM oldTable
  WHERE AM = 1
  UNION ALL
  SELECT id, dateofservice, 2, clientid
  FROM oldTable
  WHERE MD = 1
  UNION ALL
  SELECT id, dateofservice, 3, clientid
  FROM oldTable
  WHERE PM = 1 
```

注意，我做同样的假设蓝色是，你的示例表是错误的，pk 应该有值 1,2,3,4,4,5,5,5

如果您希望该键是唯一的，那么只需将其定义为自动增量键并且不要将其包含在此选择中。

# c# - 在沙盒中运行 .Net 应用程序

> ID：15214961
> 
> 赞同：5
> 
> 时间：2013-03-05T02:49:20.130
> 
> 标签：c#, .net, sandbox

几个月来，我开发了一个个人工具，用于在线编译 C# 3.5 Xaml 项目。基本上，我正在使用 CodeDom 编译器进行编译。我正在考虑将其公开，但问题是使用此工具在服务器上做任何事情都非常非常容易。

我想保护我的服务器的原因是因为有一个“运行”按钮来测试和调试应用程序（在屏幕截图模式下）。

这是否可以在沙盒中运行应用程序 - 换句话说，限制内存访问、硬盘驱动器访问和 BIOS 访问 - 而无需在 VM 中运行它？或者我应该只分析每个代码，还是“禁用”运行模式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T02:55:55.980

启动 AppDomain，在其中加载程序集，查找您控制的接口，激活实现类型，调用您的方法。只是不要让任何实例跨越您无法 100% 控制的 AppDomain 障碍（包括异常！）。

控制您的外部代码 AppDomain 的安全策略对于一个单一的答案来说有点多，但您可以[在 MSDN 上查看此链接，](http://msdn.microsoft.com/en-us/library/ee191568%28VS.100%29.aspx)或者只需搜索“代码访问安全 msdn”以获取有关如何保护此域的详细信息。

**编辑**：有些异常是您无法停止的，因此重要的是要注意它们并以某种方式记录导致异常的程序集，这样您就不会再次加载它们。

此外，最好将一个类型*注入*到第二个 AppDomain 中，然后您将使用该类型进行所有加载和执行。这样您就可以确保没有任何类型（不会降低您的整个应用程序）会跨越任何 AppDomain 边界。我发现定义一个扩展 MarshalByRefObject 的类型很有用，您可以在该类型上调用在第二个 AppDomain 中执行不安全代码的方法。它永远不应返回未标记为跨边界可序列化的未密封类型，无论是作为方法参数还是作为返回类型。只要你能做到这一点，你就成功了 90%。

# java - "元素类型 "TextView" 必须后跟属性规范，">" 或 "/>">

> ID：15214965
> 
> 赞同：-3
> 
> 时间：2013-03-05T02:49:47.710
> 
> 标签：java, android, xml, eclipse

所以这是简短的代码-

```
<?xml version="1.0" encoding= "utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
       android:orientation="vertical"
       android:layout_width="fill_parent"
       android:layout_height="fill_parent"

    <TextView
       android:layout_width="fill_parent"
       android:layout_height="wrap_content" 
       android:text="Your total is 0"
       android:textSize="45dp"
       android:layout_gravity="center"
       android:gravity="center" 
       android:id="@+id/tvDisplay"
    </TextView>       

    <Button            
       android:layout_height="wrap_content"
       android:layout_width="250dp"
       android:layout_gravity="center"
       android:text="Add one"
       android:textSize="20dp" 
       android:id="@+id/bAdd"
    />

    <Button
       android:layout_width="250dp"
       android:layout_height="wrap_content" 
       android:text="Subtract one"
       android:textSize="20dp"
       android:layout_gravity="center"
       android:id="@+id/bSubtract"
    />

</LinearLayout> 
```

我正在使用 Eclipse 并针对 FroYo API 级别 8。Mac os X 10.8.2 EClipse juno 我正在关注 TheNewBoston 的教程，所以我复制了他的代码，它完全一样，但我得到了错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T02:54:12.217

两者都会起作用

```
<TextView android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    android:text="Your total is 0"
    android:textSize="45dp" 
    android:layout_gravity="center"
    android:gravity="center" 
    android:id="@+id/tvDisplay" /> 
```

或者

```
<TextView android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    android:text="Your total is 0"
    android:textSize="45dp" 
    android:layout_gravity="center"
    android:gravity="center" 
    android:id="@+id/tvDisplay">
</TextView> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T02:56:38.623

你在顶部的 LinearLayout 没有关闭

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T02:53:44.257

您在 XML 中的语法是错误的。
替换您拥有的 TextView：

```
<TextView
     android:layout_width="fill_parent"
android:layout_height="wrap_content" 
android:text="Your total is 0"
android:textSize="45dp"
android:layout_gravity="center"
android:gravity="center" 
android:id="@+id/tvDisplay"
</TextView> 
```

和：

```
<TextView
         android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    android:text="Your total is 0"
    android:textSize="45dp"
    android:layout_gravity="center"
    android:gravity="center" 
    android:id="@+id/tvDisplay"
    /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T02:54:05.553

您忘记关闭元素。

尝试这个

```
<TextView
     android:layout_width="fill_parent"
     android:layout_height="wrap_content" 
     android:text="Your total is 0"
     android:textSize="45dp"
     android:layout_gravity="center"
     android:gravity="center" 
     android:id="@+id/tvDisplay">
</TextView> 
```

或这个

```
<TextView
     android:layout_width="fill_parent"
     android:layout_height="wrap_content" 
     android:text="Your total is 0"
     android:textSize="45dp"
     android:layout_gravity="center"
     android:gravity="center" 
     android:id="@+id/tvDisplay"/> 
```

# python - SQLAlchemy 多对多性能

> ID：15214967
> 
> 赞同：4
> 
> 时间：2013-03-05T02:49:49.187
> 
> 标签：python, sql, sqlalchemy

我有一个多对多关联的数据库关系，但是关联表本身包含很多需要访问的属性，所以我做了三个类：

```
class User(Base):
    id = Column(Integer, primary_key=True)
    attempts = relationship("UserAttempt", backref="user", lazy="subquery")

class Challenge(Base):
    id = Column(Integer, primary_key=True)
    attempts = relationship("UserAttempt", backref="challenge", lazy='subquery')

class UserAttempt(Base):
    challenge_id = Column(Integer, ForeignKey('challenge.id'), primary_key=True)
    user_id = Column(Integer, ForeignKey('user.id'), primary_key=True) 
```

当然，这是一个简化的案例，我忽略了需要访问的其他属性。这里的目的是，每个人都`User`可以尝试任意数量的`Challenge`s，因此该`UserAttempt`表描述了一个特定用户完成一项挑战。

现在的问题：当我查询所有用户然后查看每次尝试时，我完全没问题。但是当我看到这个尝试的挑战时，它会在无数子查询中爆炸。当然，这对性能不利。

我真正想从 SQLAlchemy 中提取所有（或所有相关）挑战*，*然后将其与相关尝试相关联。如果所有挑战都被取消或仅在以后有实际关联的挑战被取消，这没什么大不了的，因为挑战的数量仅在 100-500 之间。

我现在的解决方案实际上不是很优雅：我分别提取所有相关的尝试、挑战和用户，然后手动关联：循环所有尝试并将添加分配给挑战和用户，然后将挑战和用户也添加到尝试. 在我看来，这似乎是一个不必要的残酷解决方案。

然而，每种方法（例如，不同的“惰性”参数、更改的查询等）都导致了数百到数千个查询。我还尝试编写简单的`SQL`查询来产生我想要的结果，并提出了一些类似的东西`SELECT * FROM challenge WHERE id IN (SELECT challenge_id FROM attempts)`并且效果很好，但我无法将它翻译成`SQLAlchemy`

非常感谢您提前提供的任何指导。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-05T03:58:40.860

> 我真正想从 SQLAlchemy 中提取所有（或所有相关）挑战，然后将其与相关尝试相关联。如果所有的挑战都被拉出来或者只是在以后有实际关联的时候，这没什么大不了的，

您首先要先从 relationship() 中删除“lazy='subquery'”指令；修复关系以始终加载所有内容是您获得大量查询的原因。特别是在这里，您将得到 Challenge->attempts eagerload 正是针对 UserAttempt->Challenge 的每个延迟加载，因此您在这里设计了最糟糕的加载组合:)。

有了这个固定，有两种方法。

一是要记住，通常情况下的多对一关联首先通过主键从内存中的 Session 中获取，如果存在，则不会发出任何 SQL。因此，我认为您可以使用我经常使用的技术获得您所描述的效果：

```
all_challenges = session.query(Challenge).all()

for user in some_users:    # however you got these
    for attempt in user.attempts:   # however you got these
        do_something_with(attempt.challenge)  # no SQL will be emitted 
```

如果您想将上述方法与“Select * from challenge where id in (select challenge_id from attempt)”完全匹配：

```
all_challenges = session.query(Challenge).\
                  filter(Challenge.id.in_(session.query(UserAttempt.challenge_id))).all() 
```

尽管这作为 JOIN 可能更有效：

```
all_challenges = session.query(Challenge).\
                  join(Challenge.attempts).all() 
```

或 DISTINCT，我想加入会返回与 UserAttempt 中显示的相同的 challenge.id：

```
all_challenges = session.query(Challenge).distinct().\
                  join(Challenge.attempts).all() 
```

另一种方法是更具体地使用急切加载。您可以在一个查询中查询一组用户/尝试/挑战，这些查询将发出三个 SELECT 语句：

```
users = session.query(User).\
              options(subqueryload_all(User.attempts, UserAttempt.challenge)).all() 
```

或者因为 UserAttempt->Challenge 是多对一的，加入可能会更好：

```
users = session.query(User).\
                  options(subqueryload(User.attempts), joinedload(UserAttempt.challenge)).all() 
```

仅来自用户尝试：

```
attempts = session.query(UserAttempt).\
                  options(joinedload(UserAttempt.challenge)).all() 
```

# networking - 从 Boost Asio udp::endpoint 恢复端口

> ID：15214973
> 
> 赞同：1
> 
> 时间：2013-03-05T02:50:16.550
> 
> 标签：networking, boost, udp, boost-asio, endianness

我正在编写一个服务器和客户端程序，以在使用 Boost 库的 Windows PC 和使用 asio 独立库的 Linux ARM beagleboard 之间进行通信。我有一段时间在两个设备之间进行了成功的 UDP 通信，但现在我想从客户端连接时服务器发现的端点恢复端口。客户端连接的方式是通过查询：

```
udp::resolver resolver(io_service);
udp::resolver::query query_tx(udp::v4(), hostIP, "43210");
udp::endpoint receiver_endpoint_tx = *resolver.resolve(query_tx); 
```

其中主机 IP 是一个字符串，这可以正常工作。在调试时，我注意到当我检查返回的值时：

```
receiver_endpoint_tx.port() 
```

这将返回 51880。现在不要大喊大叫网络字节顺序和主机字节顺序。我知道。奇怪的是，这个数字 51880 有时是一个不同的数字，当我检查服务器在其端点中存储的内容时，它是一个完全不同的数字：21743。现在我知道我必须在字节顺序上做错了，但我试过了：

```
//unsigned long port_long       = boost::asio::detail::socket_ops::host_to_network_long(receiver_endpoint_tx.port());
//unsigned long port_short      = boost::asio::detail::socket_ops::host_to_network_short(receiver_endpoint_tx.port()); 
```

他们没有把我原来的端口：43210 还给我。网络主机也没有。那么我错过了什么，我如何才能在两端恢复我的 43210 端口？显然它一定在某个地方，因为他们正在成功地沟通。在此先感谢，如果菜鸟错误，对不起:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T07:28:25.223

首先，UDP是无连接的，没有*连接*。

我不确定我是否理解正确，但听起来我也想绑定到特定的端口号。如果您希望客户端从端口 x 发送数据包到服务器上的端口 y，并且服务器应该从端口 y 响应端口 x，那么您需要将套接字[绑定](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/reference/basic_datagram_socket/bind.html)到所需的端口。或者，您可以使用[构造函数](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/reference/basic_datagram_socket/basic_datagram_socket/overload3.html)进行绑定。不这样做会导致操作系统使用[临时端口](http://en.wikipedia.org/wiki/Ephemeral_port)。

此外，要获取从接收到数据包的远程端点，`[async_receive_from](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/reference/basic_datagram_socket/async_receive_from.html)`需要`sender_endpoint`参考参数。当调用读取处理程序时，您可以从中检索主机和端口。

# c - char 数组和指针——有人可以解释以下输出吗？

> ID：15214976
> 
> 赞同：3
> 
> 时间：2013-03-05T02:50:37.980
> 
> 标签：c, pointers

我试图了解数组和指针之间存在的特殊关系，即不带括号的数组名称始终指向数组的第一个元素。

在 Linux 系统上，我通过 C 程序得到这个：

```
char name[7] = "unique";

printf("\nAddress stored of name: %p", name); 
printf("\nAddress stored of name: %s", name); //Conflict
printf("\nAddress of name[0]: %p", &name[0]);

//dereferencing the pointer
printf("\nValue of name[0]: %c", *name);
printf("\nValue of name[1]: %c", *(name+1)); 
```

输出是：

```
Address stored of name: 0xbff68131
Address stored of name: unique
Address of name[0]: 0xbff68131
Value of name[0]: u
Value of name[1]: n 
```

我理解上述输出中的所有内容，但代码行的输出为**//Conflict**。换句话说，如果根据数组和指针之间的特殊关系， **name**等价于**&name[0]**，那么为什么简单地更改格式说明符（从 %p 到 %s）会打印出数组的实际值。如果确实如此，那么这是否意味着**name**、**&name[0]**和***name**都是等价的？

我至少希望它（//冲突）打印一些其他（垃圾？）值，而不是数组的实际值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T02:52:50.657

```
%s 
```

这告诉`printf`将参数视为指向包含字符数组的内存位置的指针，并打印每个字符，直到`\0`遇到。

```
%p 
```

如您所见，这会将争论视为内存位置并以十六进制打印其值。

您所说的“冲突”实际上是迄今为止更重要的用途，并且是打印 c 字符串的正确方法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-05T03:14:07.373

当使用数组表达式代替指针表达式时，数组表达式将转换为指向第一个元素的指针。指向第一个元素的指针是`array+0`or `&array[0]`，第一个元素是`*(array+0)`or `array[0]`。

在`printf("\nAddress stored of name: %p", name);`中，数组表达式被转换为指向第一个元素的指针。同样对于`printf("\nAddress stored of name: %s", name);`， name 被转换为指向 的指针`name[0]`。添加 1 会导致指向 的指针`name[1]`。添加 2 会导致指向`name[2]`等的指针。

值得注意的是，`array[n]`运算符实际上是一个`pointer[n]`运算符，它`array`被转换为指向第一个表达式的指针。n 被添加到指针以产生指向第 n 个元素的指针，然后取消引用以从其指针中产生第 n 个元素。这是`%s`格式说明符的结果。但是，`%p`格式说明符根本不做任何解除引用。

> 如果确实如此，那么这是否意味着 name、&name[0] 和 *name 都是等价的？

No.`name`是一个数组表达式：`sizeof name`将导致 7.`&name[0]`是一个指针表达式，转换为“指向 name[0] 的指针”：`sizeof &name[0]`将导致`sizeof (char *)`. `*name`是一个 char 表达式，翻译为“名称指向的 char”。`sizeof *name`将导致 1。

# git - 克隆 git repo 导致错误 - 主机密钥验证失败。致命：远端意外挂断

> ID：15214977
> 
> 赞同：57
> 
> 时间：2013-03-05T02:50:39.437
> 
> 标签：git, ssh-keys

我正在使用 SSH 将 git repo 克隆到我的 Web 服务器，但每次我收到此错误

```
$git clone git@github.com:aleccunningham/marjoram.git
Cloning into marjoram...
Host key verification failed. 
```

我已经尝试了几乎所有在谷歌搜索中出现的东西，我对为什么这不起作用感到目瞪口呆。有任何想法吗？

另外，我没有使用像 Jenkins 这样的东西。

* * *

## 回答 #1

> 赞同：202
> 
> 时间：2015-04-01T00:07:54.457

问题可能是您的 ~/.ssh/known_hosts 文件中不存在 Github。

将 GitHub 附加到授权主机列表中：

`ssh-keyscan -H github.com >> ~/.ssh/known_hosts`

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-03-05T04:29:18.657

已解决问题...您需要将 ssh 公钥添加到您的 github 帐户。

1.  验证 ssh 密钥是否已正确设置。
    1.  跑`ssh-keygen`
    2.  输入密码（保持默认路径 - `~/.ssh/id_rsa`）
2.  [将](https://help.github.com/articles/generating-ssh-keys)公钥 ( `~/.ssh/id_rsa.pub`) 添加到 github 帐户
3.  试试`git clone`。有用！

初始状态（公钥未添加到 git hub 帐户）

> ```
> foo@bn18-251:~$ rm -rf test
> foo@bn18-251:~$ ls
> foo@bn18-251:~$ git clone git@github.com:devendra-d-chavan/test.git
> Cloning into 'test'...
> Permission denied (publickey).
> fatal: The remote end hung up unexpectedly
> foo@bn18-251:~$ 
> ```

现在，将公钥添加`~/.ssh/id_rsa.pub`到 github 帐户（我使用过`cat ~/.ssh/id_rsa.pub`）

> ```
> foo@bn18-251:~$ ssh-keygen 
> Generating public/private rsa key pair.
> Enter file in which to save the key (/home/foo/.ssh/id_rsa): 
> Created directory '/home/foo/.ssh'.
> Enter passphrase (empty for no passphrase): 
> Enter same passphrase again: 
> Your identification has been saved in /home/foo/.ssh/id_rsa.
> Your public key has been saved in /home/foo/.ssh/id_rsa.pub.
> The key fingerprint is:
> xxxxx
> The key's randomart image is:
> +--[ RSA 2048]----+
> xxxxx
> +-----------------+
> foo@bn18-251:~$ cat ./.ssh/id_rsa.pub 
> xxxxx
> foo@bn18-251:~$ git clone git@github.com:devendra-d-chavan/test.git
> Cloning into 'test'...
> The authenticity of host 'github.com (207.97.227.239)' can't be established.
> RSA key fingerprint is 16:27:ac:a5:76:28:2d:36:63:1b:56:4d:eb:df:a6:48.
> Are you sure you want to continue connecting (yes/no)? yes
> Warning: Permanently added 'github.com,207.97.227.239' (RSA) to the list of known hosts.
> Enter passphrase for key '/home/foo/.ssh/id_rsa': 
> warning: You appear to have cloned an empty repository.
> foo@bn18-251:~$ ls
> test
> foo@bn18-251:~/test$ git status
> # On branch master
> #
> # Initial commit
> #
> nothing to commit (create/copy files and use "git add" to track) 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-20T19:59:23.217

好吧，从 sourceTree 我无法解决这个问题，但我从 bash 创建了 sshkey，至少它可以从 git-bash 工作。

[https://confluence.atlassian.com/bitbucket/set-up-an-ssh-key-728138079.html](https://confluence.atlassian.com/bitbucket/set-up-an-ssh-key-728138079.html)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-06-01T22:27:39.310

我也遇到了同样的问题，解决方法很简单，从cmd或者其他windows命令行工具改成git bash就可以了。Windows 有时无法很好地处理 git npm 依赖项。

# sql - 缺少右括号错误

> ID：15214983
> 
> 赞同：0
> 
> 时间：2013-03-05T02:50:48.597
> 
> 标签：sql, oracle

在为主键创建约束时，我收到了 Movie 表（在末尾列出）的右括号错误。这怎么能建造得更好？

```
create table Director
(DirectorID number (10,0),
DirectorName varchar2 (30),
DirectorBio varchar2 (300),
constraint DirectorID_PK primary key(DirectorID));

create table Actor
(ActorID number (10,0),
ActorName varchar2 (30),
ActorBio varchar2 (300),
constraint ActorID_PK primary key(ActorID));

create table Award
(AwardID number (10,0),
ActorID number (10,0),
DirectorID number (10,0),
AwardName varchar2 (20),
AwardType varchar2 (20),
AwardDate number (4,0),
constraint ActorID_FK foreign key (ActorID) references Actor(ActorID),
constraint DirectorID_FK foreign key (DirectorID) references Director(DirectorID));

create table Distributor
(DistributorID number (10,0),
CompanyName varchar2 (30),
Address1 varchar2 (30),
Address2 varchar2 (30),
City varchar2 (20),
State varchar2 (2),
Zipcode number (7,0),
PhoneNumber number (10,0),
Email varchar2 (20),
Homepage varchar2 (100),
constraint DistributorID_PK primary key(DistributorID));

create table Movie 
(MovieID number (10,0), 
ActorID number (10,0), 
DirectorID number (10,0), 
Title varchar2  (30), 
Genre varchar2 (20), 
Year number (4,0), 
AwardID number (10,0),
Rating varchar2 (4), 
QuantityPerUnit number (10,0), 
UnitsInStock number (10,0), 
Length number (10,0), 
MovieType varchar2 (20), 
DistributorID number (10,0)
constraint MovieID_PK primary key(MovieID),
constraint ActorID_FK foreign key (ActorID) references Actor(ActorID),
constraint AwardID_FK foreign key (AwardID) references Award(AwardID),
constraint DistributorID_FK foreign key (DistributorID) references Distributor(DistributorID),
constraint DirectorID_FK foreign key references Director(DirectorID)); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T02:55:13.287

存在语法错误。`DistributorID`列后没有逗号

```
DistributorID number (10,0), -- Add comma here 
```

# actionscript-3 - 开始和停止拖动无法正常工作

> ID：15214984
> 
> 赞同：0
> 
> 时间：2013-03-05T02:50:59.233
> 
> 标签：actionscript-3

我正在尝试创建一个 Start Drag 和 Stop Drag 简单的应用程序。但它似乎无法正常工作。它开始拖动，但它不会在任何地方放下对象

```
addChild(shampooing);
addChild(check_box);
check_box.gotoAndStop(2);
check_box.x = 40;
check_box.y = 550;

check_box.addEventListener(MouseEvent.MOUSE_DOWN, dragObject);
check_box.addEventListener(MouseEvent.MOUSE_UP, stopDragObject);
function dragObject(mn:MouseEvent):void
{
    xPos = check_box.x;
    yPos = check_box.y;

    check_box.startDrag(true);
}
function stopDragObject(l:MouseEvent):void
{
    if (check_box.hitTestObject(getChildByName("shampooing")))
    {
        check_box.x = getChildByName("shampooing").x;
        check_box.y = getChildByName("shampooing").y;
    }
    else
    {
        check_box.x = xPos;
        check_box.y = yPos;
    }

    check_box.stopDrag();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T03:15:52.090

除非您明确将对象的`name`属性设置`shampooing`为“洗发”，否则`getChildByName("shampooing")`将引发错误。由于您已经引用了`shampooing`，因此可以将代码更改为：

```
if (check_box.hitTestObject(shampooing))
{
    check_box.x = shampooing.x;
    check_box.y = shampooing.y;
} 
```

# sql - SQL：如何在一条 SQL 语句中找到总值和平均值？

> ID：15214986
> 
> 赞同：1
> 
> 时间：2013-03-05T02:51:08.983
> 
> 标签：sql, sum, aggregate, average

我想计算支出总额并从这样的行数计算平均值：

```
SELECT AVG(SUM(expenditure)) from INCOME; 
```

但是，有一个错误说“滥用聚合函数 sum()”

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T02:53:38.360

您无法计算总和的平均值，因为只有一个总数。

作为其逻辑的一部分， average`AVG()`函数已经计算了总数。

这就是你想要的：

```
SELECT AVG(expenditure) as AverageExpenditure, 
       SUM(expenditure) as TotalExpenditure
from INCOME; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T02:52:43.867

```
SELECT AVG(expenditure) AS avg_exp, SUM(expenditure) AS sum_exp FROM INCOME; 
```

# jquery - Jquery 防止在悬停时隐藏元素。悬停时清除超时，鼠标移动时设置超时

> ID：15214988
> 
> 赞同：1
> 
> 时间：2013-03-05T02:51:22.387
> 
> 标签：jquery, settimeout, mousemove

我正在尝试实现侧边栏，并且当鼠标光标停止移动时，两个导航按钮会延迟隐藏。当鼠标光标再次移动时，应该出现元素。代码工作正常，但是......如何防止在悬停状态下隐藏三个元素。

我应该在哪里添加 clearTimeout 悬停状态？我是不是该？对不起，我是 jQuery 的初学者。

这是我的代码：

html:

```
<div class="container">
<nav>
    <ul>
        <li><a href="#">something</a></li>
    </ul>
</nav>
<div class="prev">prev</div>
<div class="next">next</div>
</div> 
```

CSS

```
.container { position: absolute; left: 20px; top: 2px; right:2px; bottom: 20px; border: 1px solid red; }
nav { position: absolute; left: 0; top:0; bottom: 0; border: 1px solid blue; }
.prev { position: absolute; width: 50px; height: 30px; bottom: 0; left: 45%; border: 1px solid green; }
.next { position: absolute; width: 50px; height: 30px; top: 0; left: 45%; border: 1px solid green; } 
```

JS

```
var timeout = false;
var count = $(function() {
$('.container').mousemove(function(e) {
    clearTimeout(timeout);
    timeout = setTimeout(function() {
        console.log('hide slideshow elements');
        $('.container nav').fadeOut();
        $('.prev').fadeOut();
        $('.next').fadeOut();
    }, 2500);            
});
});

$(".container").mousemove(function() {
console.log('show slideshow elements');
$('.container nav').fadeIn();
$('.prev').fadeIn();
$('.next').fadeIn();
}); 
```

和 JSfiddle

[http://jsfiddle.net/h3wDt/3/](http://jsfiddle.net/h3wDt/3/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T03:33:55.493

我检查了事件目标标记名以查看它是否是锚标记。似乎也奏效了。

```
var timeout = false;
var count = $(function() {
    $('.container').mousemove(function(e) {
        $('.container nav').fadeIn();
        $('.prev').fadeIn();
        $('.next').fadeIn();
        clearTimeout(timeout);
        if (e.target.tagName != "A") {
            timeout = setTimeout(function() {
                console.log('hide slideshow elements');
                $('.container nav').fadeOut();
                $('.prev').fadeOut();
                $('.next').fadeOut();
            }, 2500);            
        }
    });
}); 
```

[JS小提琴](http://jsfiddle.net/DDMqM/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T03:27:39.923

我添加了一个`hover`变量来存储它是否超过导航，它可能不是最好的方法，但它可以工作

[http://jsfiddle.net/h3wDt/5/](http://jsfiddle.net/h3wDt/5/)

# django - 在Django中查询距离有必要使用GeoDjango吗？

> ID：15214992
> 
> 赞同：0
> 
> 时间：2013-03-05T02:51:36.560
> 
> 标签：django, distance, geodjango

在我正在构建的站点中，我存储了带有城市外键的事件。像这样：

```
class Event(models.Model):
    name = models.CharField(max_length=255)
    ...
    ciudad = models.ForeignKey(City)

class City(models.Model):
    name = models.CharField(max_length=500)
    ...
    lat = models.FloatField()
    lon = models.FloatField() 
```

我想查询*某个*城市*某些*公里处的事件。我实际上做的是：

 *```
# isInRange takes two cities and a distance in kms and calculates
# if the distance between the cities (by the fields lat and lon and
# one nice formula) is minor than the given distance.
results = []
for event in Event.objects.all():
    if isInRange(city, event.city, kms):
        results.append(event) 
```

我知道，效率很低。我知道在 GeoDjango 中这样做是可能的，但这是我在整个项目中必须做的唯一“地理事情”。我必须毫无理由地使用那个“复杂”的解决方案，还是有办法以更有效的方式做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-05T06:09:00.177

如果您不需要在您的范围内非常精确，您可以使用近似值来计算纬度和经度范围。[这里](http://www.johndcook.com/blog/2009/04/27/converting-miles-to-degrees-longitude-or-latitude/)解释的概念：

使用城市位置和距离，找到纬度的变化（无论在哪里都保持不变），以及经度的近似变化（因纬度而异）。然后计算一个边界框。

```
import math

# earth_radius = 3960.0  # for miles
earth_radius = 6371.0  # for kms
degrees_to_radians = math.pi/180.0
radians_to_degrees = 180.0/math.pi

def change_in_latitude(distance):
    "Given a distance north, return the change in latitude."
    return (distance/earth_radius)*radians_to_degrees

def change_in_longitude(latitude, distance):
    "Given a latitude and a distance west, return the change in longitude."
    # Find the radius of a circle around the earth at given latitude.
    r = earth_radius*math.cos(latitude*degrees_to_radians)
    return (distance/r)*radians_to_degrees

def bounding_box(latitude, longitude, distance):
    lat_change = change_in_latitude(distance)
    lat_max = latitude + lat_change
    lat_min = latitude - lat_change
    lon_change = change_in_longitude(latitude, distance)
    lon_max = longitude + lon_change
    lon_min = longitude - lon_change
    return (lon_max, lon_min, lat_max, lat_min) 
```

计算距离内`kms`的事件`city`：

```
lon_max, lon_min, lat_max, lat_min = bounding_box(city.lat, city.lon, kms)
events = Event.objects.filter(
    city__lat__lte=lat_max,
    city__lat__gte=lat_min,
    city__lon__lte=lon_max,
    city__lon__gte=lon_min
) 
```

请记住，距离越远，误差越大，离两极越近。反子午线（国际日期变更线）附近的地方也存在问题，但这很容易检查（检查经度是否 > 180 或 < -180）。

如果您想要更准确的结果，您可以使用此方法作为第一次通过，然后使用您的函数，这样您就不必单独处理每个事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-06T13:14:23.027

使用自定义管理器的更好解决方案，正如我在这篇文章中描述的[Django 按距离排序](https://stackoverflow.com/questions/19703975/django-sort-by-distance/26219292#26219292)*

# xml - perl - 从 xml 文件中删除节点

> ID：15214995
> 
> 赞同：2
> 
> 时间：2013-03-05T02:52:12.387
> 
> 标签：xml, perl, xml-parsing, xml-libxml

我有一个 XML 文件，我想读取它 - 删除一个节点 - 保存它。我从终端运行 perl (perl script.pl)

示例 XML（文件名.xml）：

```
<?xml version="1.0" encoding="UTF-8"?>
<twice>
    <inner>
        <twice>
            <name>John</name>
            <surname>Smith</surname>
        </twice>
        <twice>
            <name>Alan</name>
            <surname>Bowler</surname>
        </twice>
        <twice>
            <name>Michael</name>
            <surname>Deck</surname>
        </twice>
    </inner>
</twice> 
```

示例 perl 脚本（script.pl）：

```
use strict;
use warnings;
use XML::LibXML;
my $filename = "filename.xml";
my $parser = XML::LibXML->new();
my $xmldoc = $parser->parse_file($filename);
for my $dead ($xmldoc->findnodes(q{/twice/inner/twice[surname = "Bowler"]})) {
    $dead->unbindNode;
}
print $xmldoc->toString; 
```

现在它在终端中输出预期的结果，但不保存文件。
预期结果（文件名.xml）：

```
<?xml version="1.0" encoding="UTF-8"?>
<twice>
    <inner>
        <twice>
            <name>John</name>
            <surname>Smith</surname>
        </twice>
        <twice>
            <name>Michael</name>
            <surname>Deck</surname>
        </twice>
    </inner>
</twice> 
```

我已经搜索了很多小时，找不到任何东西，如果它是重复的，对不起！
这是我第一次使用 perl，所以欢迎任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T03:37:55.043

使用 toString 时，文档说要这样做：

```
open my $out_fh, '>', 'somefile.xml';
print {$out_fh} $xmldoc->toString; 
```

您也可以使用该`toFile()`功能来保存它：

```
$xmldoc->toFile("someFile.xml"); 
```

编辑：还要引用文档（这就是我所做的），您可以将格式参数传递给这些函数。

> 如果 $format 为 0，则文档按照最初的解析方式转储
> 
> 如果 $format 为 1，libxml2 将添加可忽略的空格，因此节点内容更易于阅读。现有文本节点不会改变
> 
> 如果 $format 为 2（或更高），libxml2 将充当 $format == 1 但它会为每个文本节点添加前导和尾随换行符。

给你：

```
$xmldoc->toFile("someFile.xml", $format); 
```

或者

```
print {$out_fh} $xmldoc->toString($format); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T08:25:34.827

您还可以使用[App::Xml_grep2 从命令行](http://metacpan.org/release/App-xml_grep2)执行此操作：

```
xml_grep2 -v '/twice/inner/twice[surname = "Bowler"]' input.xml > output_xml 
```

# javascript - 未定义的数组计数单词：对象

> ID：15214997
> 
> 赞同：-1
> 
> 时间：2013-03-05T02:52:19.733
> 
> 标签：javascript, arrays, multidimensional-array, counting

所以我遇到了一个未定义的数组元素的问题。1）无法让我的未定义数组工作 2）我希望它输出数组作为单词和次数的出现。

```
var wordCount =[];
splitAT.sort();
alert(splitAT);

for (var i = 0; i < splitAT.length; i++)
{
    if(splitAT[i] in wordCount)
{
wordCount.push(1);
}
else
{
wordCount[splitAT[i]] = 1;
}

document.write('[' + splitAT[i] + '][' + wordCount[i] + ']<br>') 
alert("your next wordcount is");
alert(wordCount); // this is just so i know where i am in the program.
alert("END"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T03:04:36.940

首先，为工作使用正确的工具：`wordCount`应该是一个对象而不是一个数组：

```
var wordCount = {};  // note, curly brackets 
```

...因为您计划使用字符串作为键来访问它，而不是数字数组索引。（是的，数组可以*用于*此目的，但这不是数组的预期目的。）

然后在您的循环中，如果当前单词已经在`wordCount`您想要将 1 添加到现有值中，则不要使用`.push(1)`它将在数字索引元素的末尾插入一个新的数组元素。

```
// WRONG:
wordCount.push(1);           // inserts a new element
// RIGHT:
wordCount[splitAT[i]]++;     // increments the current value 
```

把这些放在一起，你会数这样的话：

```
var wordCount = {};
splitAT.sort();

for (var i = 0; i < splitAT.length; i++) {
    if(splitAT[i] in wordCount) {
        wordCount[splitAT[i]]++;
    } else {
        wordCount[splitAT[i]] = 1;
    }
} 
```

> *“我希望它将数组输出为单词的出现次数和次数。”*

要输出结果，您可以执行以下操作：

```
var output = [];
for (var k in wordCount)
    output.push("'" + k + "' appears " + wordCount[k] + " time(s).");
document.getElementById("NumCount").value = output.join("\n"); 
```

（假设您想使用 输出到 textarea 元素`id="NumCount"`，这就是您在小提琴中所拥有的。）

# python - 河内塔的解释

> ID：15214998
> 
> 赞同：4
> 
> 时间：2013-03-05T02:52:29.703
> 
> 标签：python, recursion, towers-of-hanoi

我是 python 的初学者，想知道`if`语句在这个 Towers of Hanoi 函数中的作用：

```
def hanoi(ndisks, startPeg=1, endPeg=3):
    if ndisks:
        hanoi(ndisks-1, startPeg, 6-startPeg-endPeg)
        print "Move disk %d from peg %d to peg %d" % (ndisks, startPeg, endPeg)
        hanoi(ndisks-1, 6-startPeg-endPeg, endPeg)

hanoi(ndisks=4) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T03:26:29.110

递归算法需要一个终止条件，它通常代表算法的最简单情况。对于河内塔，最简单的情况是当有零个磁盘要移动时，什么都不做。

在 Python 中，“错误”的一个条件是任何数字版本的零，因此从技术上讲，如果有人将负数传递给您的算法，它将失败，因此最好检查`if ndisks > 0`. 这会在 ndisks==0 时停止递归。

如果有正数 (n) 个要移动的磁盘，则递归算法为：

1.  将 n-1 个磁盘从起始钉移动到“其他”钉。
2.  将第 n^个磁盘从起点移动到终点。
3.  将 n-1 个磁盘从“其他”挂钩移动到末端挂钩。

上面描述了您的代码的其余部分，终端条件是零磁盘。