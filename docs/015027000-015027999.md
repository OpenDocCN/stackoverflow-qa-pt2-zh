# StackOverflow 问答 15027000-15027999

# php - 带有斜杠的 URL 导致不同的页面 - MVC CI

> ID：15027001
> 
> 赞同：3
> 
> 时间：2013-02-22T15:01:21.610
> 
> 标签：php, codeigniter, codeigniter-routing

我的 Code Igniter 路由文件中有如下路由。

```
$route['profile'] = "profile"; 
```

类配置文件包含以下内容

```
$this->load->view('pages/profile.php'); 
```

现在我的 profile.php 页面上有一个链接，如下所示

```
<a href = 'logout'>Logout</a> 
```

现在考虑使用它的用户。如果他访问以下网址

```
localhost/project/profile 
```

那么现在 profile.php 页面上的链接将导致以下内容

```
localhost/project/logout 
```

但是如果用户使用这个 url

```
localhost/project/profile/ 
```

也就是说，如果有一个斜杠，那么页面上的链接将导致

```
localhost/project/profile/logout 
```

现在我的问题是我应该怎么做才能在这两种情况下将链接引导到

```
localhost/project/logout 
```

希望我清楚。请帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T15:29:33.010

我认为您正在搜索这个，使用此代码行在您的控制器上加载 url 帮助程序

```
$this->load->helper('url'); 
```

每当您想回显 URL 时，在您的视图中使用此代码

```
//this will echo something like this http://(yourdomain).index.php/logout
<a href = '<?=site_url("logout")?>'>Logout</a> 
```

如果你想说，一个指向另一个控制器的 url，你将使用类似这样的东西

```
//this will echo something like this http://(yourdomain).index.php/(anothercontroller)/logout
<a href = '<?=site_url("anothercontroller/logout")?>'>Logout</a> 
```

可以在此处找到有关 codeigniter 的 url 帮助程序的更多信息：http: [//ellislab.com/codeigniter/user-guide/helpers/url_helper.html](http://ellislab.com/codeigniter/user-guide/helpers/url_helper.html)

# authentication - yii-auth 设置主题

> ID：15027009
> 
> 赞同：1
> 
> 时间：2013-02-22T15:01:42.093
> 
> 标签：authentication, layout, module, yii, themes

我想在 yii-auth 模块中使用我的布局。但在那个布局中，我有

```
<?php echo Yii::app()->theme->baseUrl; ?> 
```

因为我需要加载一些 css 文件和图像。模块 yii-auth 没有设置主题，所以我收到错误，因为主题“面板”没有设置。

Yii-auth 设置让我只设置布局，而不是主题。

我可以通过修改 yii-auth 模块轻松设置它，但是当 yii-auth 更新时我必须记住这一点。这个不干净 ：）

问题是：如何在不学习 modules/auth 文件夹的情况下更改 yii-auth 的主题？

编辑：我的默认配置不是“面板”。我无法在 config/main.php 中设置“主题”=>“面板”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-13T16:31:50.897

在我的情况下设置

```
 'appLayout' => 'webroot.themes.bootstrap.views.layouts.main', // the layout used by bootstrap theme. 
```

在 /config/main.php 中做到了

```
 'auth' => array(
            'strictMode' => true, // when enabled authorization items cannot be assigned children of the same type.
            'userClass' => 'User', // the name of the user model class.
            'userIdColumn' => 'id', // the name of the user id column.
            'userNameColumn' => 'username', // the name of the user name column.
            'defaultLayout' => 'application.views.layouts.main', // the layout used by the module.
            'appLayout' => 'webroot.themes.bootstrap.views.layouts.main', // the layout used by bootstrap theme.
            'viewDir' => null, // the path to view files to use with this module.
        ), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T10:25:24.457

由于您可以为模块定义自定义布局，因此您可以这样做（例如 file `views/layouts/panel.php`）：

```
<?php Yii::app()->theme = 'panel'; ?>
<?php include(dirname(__FILE__).'/main.php') ?> 
```

这将设置另一个主题，然后只使用主布局文件。在您的配置中，您应该设置`//layouts/panel`为您的 auth 模块的默认布局。

您也可以针对每个文件/视图基础执行此操作，请参阅[此文件](https://github.com/schmunk42/p3bootstrap/blob/9f0df57e2f97639ada612ce724db6408149b4f13/views/rights/default/index.php)以获取示例实现。

[更新]

请查看[https://github.com/schmunk42/multi-theme](https://github.com/schmunk42/multi-theme) 您可以为每个控制器路由定义一个主题。

# datetime - 各种平台和语言的参考纪元日期（和时间）是什么？

> ID：15027010
> 
> 赞同：1
> 
> 时间：2013-02-22T15:01:45.190
> 
> 标签：datetime

时间通常转换为从参考日期（纪元时间）经过的数字参数（例如，毫秒或其他单位）维基百科的概述非常不完整： [http ://en.wikipedia.org/wiki/Epoch_%28reference_date%29](http://en.wikipedia.org/wiki/Epoch_%28reference_date%29)

所有可能的操作系统平台和主要编程语言的纪元时间列表是什么？

（例如，R（在不同的操作系统平台上运行，unix、windows、Android、Apple、Perl、Python、Ruby、C++、Java）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:09:51.630

我有以下数据：

`In a computing context, an epoch is the date and time relative to which a computer's clock and timestamp values are determined. The epoch traditionally corresponds to 0 hours, 0 minutes, and 0 seconds (00:00:00) Coordinated Universal Time (UTC) on a specific date, which varies from system to system. Most versions of Unix, for example, use January 1, 1970 as the epoch date; Windows uses January 1, 1601; Macintosh systems use January 1, 1904, and Digital Equipment Corporation's Virtual Memory System (VMS) uses November 17, 1858.`

参考：[时代](http://searchdatacenter.techtarget.com/definition/epoch)

你也可以看到这个：[Epoch Computer](http://www.computerhope.com/jargon/e/epoch.htm)

在 Java 时代就像 unix 即 1970 年 1 月 1 日午夜，它被广泛用于编程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T16:39:27.090

在大多数现代框架中，它是 1970 年 1 月 1 日的[Unix/POSIX 标准](http://en.wikipedia.org/wiki/Unix_time)。

你问到 R - 它是 1970 年 1 月 1 日。 [参考这里](http://stat.ethz.ch/R-manual/R-devel/library/base/html/DateTimeClasses.html)

大多数跨平台的语言/框架要么在内部执行此操作，要么将其抽象化。不然太痛苦了。想象一下，每次重新定位时都必须补偿不同的时期。那将是可怕的。

顺便说一句 - 这里还有另一个列表[，](http://en.wikipedia.org/wiki/System_time)您可能更感兴趣。

# php - Youtube API，检查视频是否被修改

> ID：15027011
> 
> 赞同：1
> 
> 时间：2013-02-22T15:01:50.640
> 
> 标签：php, api, zend-framework, youtube

我在我的 CMS 上使用 YouTube API 和 ZendGdata 库。

我检索成员的所有视频，并使用 cron 动态创建所有相关文章。

我需要知道成员是否修改了视频（标题、描述...），可能带有日期或其他内容。我可以检索所有数据并检查差异，但它不是很“轻”。

这个API中有这样的数据吗？谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-12T18:31:11.630

I had the same issue and finally i decided to add a hash column to the DB so I can know if something has changed.

Something like:

```
$playlist['publishDate'] = $playlistJson['items'][0]['snippet']['publishedAt'];
$playlist['youtubeId'] = $playlistJson['items'][0]['id'];
$playlist['title'] = $playlistJson['items'][0]['snippet']['title'];
//...

$playlist['dataHash'] = md5(implode('--',$playlist));

$youtubePlaylistId=$mysqli->real_escape_string($playlist['youtubeId']);

$sResult=$mysqli->query("SELECT dataHash FROM channel WHERE youtubeId=$youtubePlaylistId LIMIT 1") or die($mysqli->error.__LINE__);

if($sResult->num_rows == 1) {
    while ($sRow = $sResult->fetch_assoc()) {
        $currentDataHash =$sRow['dataHash'];
    }
    if ($currentDataHash==$playlist['dataHash']) {
        //playlist exists and data is identical
    } else {
        //playlist exists but data needs refresh
    }
} else {
    //playlist does not exist
} 
```

# xna - HLSL 着色器和访问 GPU 在索引缓冲区中的当前位置

> ID：15027013
> 
> 赞同：2
> 
> 时间：2013-02-22T15:02:01.757
> 
> 标签：xna, hlsl

我的问题非常基本。

着色器代码中是否有 HLSL 着色器指令或任何方式来访问 GPU 在索引缓冲区数组中的当前位置？我正在使用 XNA Game Studio 4.0，它通过 GraphicsDevice.DrawIndexedPrimitives() 方法将 VertexBuffers 和 IndexBuffers 传递给每个网格的图形管道。我知道 GPU 在内部迭代 IndexBuffer，但我希望能够确定 GPU 当前所在的 IndexBuffer 中的哪个条目：

用伪代码表达我的意思：IndexBuffer[i]，我想知道GPU当前正在处理的i的值。

这样做的原因是我想知道当前正在渲染哪个多边形，并且不可能仅仅通过知道顶点来判断，因为单个顶点总是在多个多边形之间共享。

我的问题是否清楚，有人可以帮助我吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T01:42:29.307

简单的答案：不要共享顶点，并将多边形 ID 作为顶点属性包含在内。

如果您知道有关曲面细分的特殊事实（例如，它是一个球体，或者 UV 布置在一个网格中等 - 所以多边形的位置是可预测的），则可能会有更奇特的答案。

# php - 比较mysql记录与当前时间

> ID：15027019
> 
> 赞同：0
> 
> 时间：2013-02-22T15:02:17.383
> 
> 标签：php

我有一个查询显示用户以年-月-日开始时间（00:00:00）结束时间（00:00:00）格式进行的约会，现在我想将整个格式与当前格式进行比较时间，如果它等于或更高不显示预约，因为用户可以选择取消预约，如果预约时间已经过去，我想对他隐藏取消预约选项......这是我的查询和 html回声...

```
$result = mysql_query("SELECT id,date,start,end FROM jos_jxtc_appbook_appointments WHERE userident='$idusera'");
while($row = mysql_fetch_assoc($result))
{
echo '<div class="record" id="record-',$row['id'],'">
    <a href="?delete=',$row['id'],'" class="delete">Delete</a>
    <strong>',$row['date'], $row['start'], $row['end'],'</strong>
  </div>';
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:05:20.580

除了不使用`mysql_`函数，只使用时间函数进行比较：

```
SELECT ... FROM ... WHERE timeColumn > CURTIME() 
```

请参阅[日期和时间函数](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T19:11:24.273

我使用了这个查询，它现在正在按照我的意愿工作......

```
 $result = mysql_query("SELECT id,date,start,end FROM jos_jxtc_appbook_appointments WHERE userident='$idusera' AND CONCAT(date,' ',start)> DATE_ADD( NOW( ) , INTERVAL 6 HOUR )");
 while($row = mysql_fetch_assoc($result))
 {

 echo '<div class="record" id="record-',$row['id'],'">
    <a href="?delete=',$row['id'],'" class="delete">Delete</a>
    <strong>',$row['date'],$space,$row['start'],$space,$row['end'],'</strong>
  </div>';

 } 
```

this part DATE_ADD( NOW( ) , INTERVAL 6 HOUR ) is because time_zone in the mysql is different then mine(-6) and because i cant change timezone in the mysql directly(because i dont have super privileges).

# input - 带有只读输入的角度

> ID：15027020
> 
> 赞同：-1
> 
> 时间：2013-02-22T15:02:18.773
> 
> 标签：input, angularjs

我正在尝试在只读输入上触发 on-change。我找不到替代方法。

```
<!DOCTYPE html>
<html ng-app="angularjs-starter">

<head lang="en">
  <meta charset="utf-8">
  <title>Custom Plunker</title>
  <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.0.5/angular.min.js"></script>
  <link rel="stylesheet" href="style.css">
  <script>
    document.write('<base href="' + document.location + '" />');
  </script>
  <script src="app.js"></script>
</head>

<body ng-controller="MainCtrl">
  <form>
    <input type="text" ng-change="changeRO()" ng-model="input" readonly placeholder="I have readonly attribute." />
    <input type="text" ng-change="change()" ng-model="input" placeholder="Write" />

    <p ng-repeat="text in texts">{{text}}</p>
  </form>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:06:44.033

如果您的输入是只读的，则意味着用户无法直接更改其值。如果用户不能这样做，则永远不会触发 onchange 事件。同样代表您动态更改值的情况 - 不会触发 onchange 事件。

在您的情况下，由于您的读/写输入连接到“输入”模型（通过 ng-model），您可以从控制器中的 $watch 函数触发您的“changeRO”回调：

```
$scope.$watch('input', function(){
  $scope.changeRO();
}); 
```

# asp.net - ASPX 页面中的滑块发生 Jquery 冲突

> ID：15027026
> 
> 赞同：0
> 
> 时间：2013-02-22T15:02:32.780
> 
> 标签：asp.net, jquery-ui, jquery-slider, jquery-widgets

我的 ASP.NET 项目中引用了以下 Js 文件。我想知道是否有任何冲突（或 JS 文件重复）。我还应该升级任何 JS 文件还是应该将它们直接映射到 googleapis？请提出建议，因为我怀疑这里有一些冲突。

我问这个问题的原因是因为我有一个不呈现滑块但在 HTML 中呈现良好的 ASPX 页面。我使用 jsFiddler 进行了测试。

```
jquery151.min.js  
jquery-ui.min.js  
global.js  
jquery.ui.all.css  
jquery.ui.core.js  
jquery.ui.widget.js  
jquery.ui.mouse.js  
jquery.ui.slider.js  
slides.min.jquery.js 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:10:23.677

在这里你可以找到谷歌托管库的完整列表，你可以相应地更新它们

[https://developers.google.com/speed/libraries/devguide#jquery](https://developers.google.com/speed/libraries/devguide#jquery)

# max - post_max_size AND upload_max_filesize 最大值

> ID：15027031
> 
> 赞同：1
> 
> 时间：2013-02-22T15:02:46.303
> 
> 标签：max, php

我想增加 max_post_size 和 upload_max_filesize 但是当我输入 9.9G 时它可以工作但是当我输入 10G 或 1T 我的脚本不起作用。我可以在 max_post_size 和 upload_max_filesize 中输入 10G 或更多的值吗？？？什么是最大值？？？

# c# - Monitor.Pulse(this) 不会触发 Monitor.Wait(this);

> ID：15027032
> 
> 赞同：1
> 
> 时间：2013-02-22T15:02:50.880
> 
> 标签：c#

我试图让 Monitor.Pulse(this) 在我的代码中触发 Monitor.Wait(this)。我认为我的等待语句都在没有脉冲的情况下运行。我有 5 个不同的线程，由 5 个不同的对象运行，每个对象代表一个具有不同优先级的队列。我试图让每个线程在不使用线程优先级属性（即正常、高于正常等）的情况下以特定优先级运行。无论如何，重点是每个线程只运行一次，然后似乎它们被卡在为每个队列运行的线程中的 Monitor.Wait(this) 部分。有谁知道为什么 Monitor.Pulse(this) 不会触发 Monitor.Wait(this) 并继续循环。每个线程应该由 Monitor.Wait(this) 和使用全局变量 GlobalCount 的 while 循环一个接一个地触发。我认为问题必须发生在我的 Beta 方法中，在发生此触发的顶部的第一类（Msg 类）中。或者在我的主要方法中，虽然我不太确定那部分有问题。

发生的情况是它将执行几行，然后开始一个新行，但不会打印任何其他内容。代码仍在运行。我还尝试删除 Monitor.Pulse 和 Monitor.Wait 并且它部分工作，但是每次 delta 对象的 beta 方法运行它的线程时，它都会被 alpha 方法替换。有谁知道这是为什么以及如何让 Pulse and Wait 工作？

这是我的代码（忽略一些评论）：

```
 // StopJoin.cs
using System;
using System.Threading;
using System.Collections;

public class Msg
{
string message;
int priority;

public Msg(string ms, int pr)
{message = ms;
priority = pr;}

// This method that will be called when the thread is started
public void Beta()
{

while(true){

//Console.WriteLine("asdfasdfs");
Console.WriteLine(message+":"+GlobalClass.globalCount);
lock(this)   // Enter synchronization block
{
while((priority - 1) != GlobalClass.globalCount){
//Console.WriteLine(GlobalClass.globalCount);
try
{
// Waits for the Monitor.Pulse in WriteToCell
//Console.WriteLine("beginning");
//Monitor.Wait(this);
//Console.WriteLine("end");
}
catch (SynchronizationLockException e)
{
Console.WriteLine(e);
}
catch (ThreadInterruptedException e)
{
Console.WriteLine(e);
}
if(GlobalClass.globalCount >= 5)
    GlobalClass.globalCount = 0;
}
Console.WriteLine(message+".Beta is running in its own thread.");

for(int i = 0;i<priority;i++)
{
Console.WriteLine("sending message...");

}

if(GlobalClass.globalCount < 5)
    GlobalClass.globalCount = GlobalClass.globalCount + 1;

//Monitor.Pulse(this);   // Pulse tells Cell.WriteToCell that
//Console.WriteLine(GlobalClass.globalCount);
}
}
}
}

public class Alpha
{
Msg the_message = new Msg("Alpha",1);

public void doWork()
{the_message.Beta();}
};

public class Charlie
{
Msg the_message = new Msg("Charlie",2);
public void doWork()
{the_message.Beta();}
};

public class Delta
{
Msg the_message= new Msg("Alpha",3);
public void doWork()
{the_message.Beta();}
};

public class Echo
{
Msg the_message= new Msg("Echo",4);
public void doWork()
{the_message.Beta();}
};

public class Foxtrot
{
Msg the_message= new Msg("Foxtrot",5);
public void doWork()
{the_message.Beta();}
};

static class GlobalClass
{
private static int global_count = 0;

public static int globalCount
{
get{return global_count;}
set{global_count = value;}
}
}

public class Simple
{
public static int Main()
{

GlobalClass.globalCount = 2;

long s = 0;
long number = 100000000000000000;

Console.WriteLine("Thread Start/Stop/Join Sample");

Alpha oAlpha = new Alpha();
Charlie oCh = new Charlie();
Delta oDe = new Delta();
Echo oEc = new Echo();
Foxtrot oFo = new Foxtrot();

// Create the thread object, passing in the Alpha.Beta method
// via a ThreadStart delegate. This does not start the thread.
Thread oThread = new Thread(new ThreadStart(oAlpha.doWork));
Thread aThread = new Thread(new ThreadStart(oCh.doWork));
Thread bThread = new Thread(new ThreadStart(oDe.doWork));
Thread cThread = new Thread(new ThreadStart(oEc.doWork));
Thread dThread = new Thread(new ThreadStart(oFo.doWork));

// Start the thread
oThread.Start();
aThread.Start();
bThread.Start();
cThread.Start();
dThread.Start();

// Spin for a while waiting for the started thread to become
// alive:
while (!oThread.IsAlive);
while (!aThread.IsAlive);
while (!bThread.IsAlive);
while (!cThread.IsAlive);
while (!dThread.IsAlive);

// Put the Main thread to sleep for 1 millisecond to allow oThread
// to do some work:
Thread.Sleep(1);

// Wait until oThread finishes. Join also has overloads
// that take a millisecond interval or a TimeSpan object.
oThread.Join();
aThread.Join();
bThread.Join();
cThread.Join();
dThread.Join();

Console.WriteLine();
Console.WriteLine("Alpha.Beta has finished");

/*
try 
{
Console.WriteLine("Try to restart the Alpha.Beta thread");
oThread.Start();
}
catch (ThreadStateException) 
{
Console.Write("ThreadStateException trying to restart Alpha.Beta. ");
Console.WriteLine("Expected since aborted threads cannot be restarted.");
}
*/

while(s<number)
s++;

// Request that oThread be stopped
oThread.Abort();
aThread.Abort();
bThread.Abort();
cThread.Abort();
dThread.Abort();

return 0;
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T15:59:12.197

我可以看到您的代码存在许多问题，但有两个主要问题会影响您。我假设您的注释掉的`Monitor`调用不应该被注释（否则代码没有意义）。

`Msg`首先，您在每个线程下创建一个新实例。该`Beta`方法锁定`Msg`（在注释中`Monitor.Wait(this)`）的当前实例，因此每个实例本质上都在等待自己 - 这将是一个无限等待，因为唯一`Monitor.Pulse`的是稍后在同一方法中，并且永远不会到达。

因为您的某些`Msg`实例将使用更高的值创建`priority`，所以它们将完全跳过`while`循环并应继续调用`Monitor.Pulse`，但不会等待该脉冲。

稍后在您的`Main`方法中，您有以下内容：

```
 while (!oThread.IsAlive) ;
    while (!aThread.IsAlive) ;
    while (!bThread.IsAlive) ;
    while (!cThread.IsAlive) ;
    while (!dThread.IsAlive) ; 
```

这是有缺陷的。因为不能保证你的线程的执行顺序，所以上面的代码完全有可能死锁。如果您`oThread`没有立即开始，而是`dThread`计划并运行到完成，您可以很容易地看到在`dThread`到达上面的最后一行之前完成和“死亡”的情况。

总而言之，我不清楚您的代码试图实现什么，但就目前而言，我希望它每次都会陷入僵局。

# jqgrid - 内联编辑行

> ID：15027034
> 
> 赞同：0
> 
> 时间：2013-02-22T15:02:58.057
> 
> 标签：jqgrid, inline-editing

我现在从 jqGrid 开始，有一些我无法理解的问题。我正在做一个可内联编辑的网格，但它只是编辑第一行。如果我单击任何行，它只会编辑第一行。我不知道发生了什么，如果有人可以告诉我如何一步一步地做，那将对我有很大帮助。

这是我的代码的一部分：

```
$(function(){
    var lastSel;
    $("#list").jqGrid({
    url:'php.php', 
    datatype: 'xml',
    mtype: 'POST', 
    colNames:['ac_n_quad', 'ac_l_circ', 'ac_n_circ', 'ac_fin_g', 'ac_pot', 'ac_volt', 'ac_n_polos', 'ac_t_prot', 'ac_v_prot', 'ac_cabo',
    'ac_fd', 'ac_fp', 'ac_ctr', 'ac_pot_a', 'ac_pot_b', 'ac_pot_c', 'ac_pos_1', 'ac_pos_2', 'ac_calc'], 
    colModel :[ 
      {name:'ac_n_quad', index:'ac_n_quad', width:110, align:'right', editable:true, key:true},
      {name:'ac_l_circ', index:'ac_l_circ', width:65, align:'right', editable:true},
      {name:'ac_n_circ', index:'ac_n_circ', width:120, align:'right', editable:true, key: true},
      {name:'ac_fin_g', index:'ac_fin_g', width:60, align:'right', editable:true},
      {name:'ac_pot', index:'ac_pot', width:55, align:'right', editable:true},
      {name:'ac_volt', index:'ac_volt', width:60, align:'right', editable:true},
      {name:'ac_n_polos', index:'ac_n_polos', width:100, align:'right', editable:true},
      {name:'ac_t_prot', index:'ac_t_prot', width:100, align:'right', editable:true},
      {name:'ac_v_prot', index:'ac_v_prot', width:70, align:'right', editable:true},
      {name:'ac_cabo', index:'ac_cabo', width:60, align:'right', editable:true},
      {name:'ac_fd', index:'ac_fd', width:55, align:'right', editable:true},
      {name:'ac_fp', index:'ac_fp', width:55, align:'right', editable:true},
      {name:'ac_ctr', index:'ac_ctr', width:60, align:'right', editable:true},
      {name:'ac_pot_a', index:'ac_pot_a', width:70, align:'right', editable:true},
      {name:'ac_pot_b', index:'ac_pot_b', width:70, align:'right', editable:true},
      {name:'ac_pot_c', index:'ac_pot_c', width:70, align:'right', editable:true},
      {name:'ac_pos_1', index:'ac_pos_1', width:70, align:'right', editable:true},
      {name:'ac_pos_2', index:'ac_pos_2', width:70, align:'right', editable:true},
      {name:'ac_calc', index:'ac_calc', width:65, align:'right', editable:true}],
    cmTemplate: { align: 'center', editable: true },

    onSelectRow: function(id){
        if(id && id !== lastSel){
            $(this).restoreRow(lastSel);
            lastSel = id;
        }
        $(this).editRow (id, true);
    },
    prmNames: {ac_n_quad: "id"},
    editurl:'clientArray',
    autowidth: 'true', 
    height: 'auto', 
    rowNum: 10, 
    rowList: [10,20,30, 40, 50, 60, 70, 80, 90, 100],
    sortname: 'ac_n_quad, ac_n_circ',
    sortorder: 'asc', 
    pager: '#pager', 
    viewrecords: true,
    gridview: true,  
    caption: 'Table circ_69' 
    });

    jQuery('#list').jqGrid('gridResize');
    jQuery('#list').jqGrid('navGrid', '#pager', {
             edit: true,
             add: true,
             del: true,
             search: false,
             refresh: false
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T20:36:38.777

您的代码中有很多错误。最重要的是使用`key: true`for more 作为一列。可以看到您在**两**列的定义中包含了该属性，`'ac_n_quad'`并且`'ac_n_circ'`。当 jqGrid 填充网格时，它`<table>`用于网格的主体、`<tr>`行和`<td>`网格上的单元格。重要的是要了解 jqGrid**总是**为每个（对于行）分配一些`id`属性。`<tr>`HTML 不允许`id`在一个 HTML 页面上重复。如果您`key: true`用于某些列，则 jqGrid 将内部选项分配给数组中具有选项`keyIndex`的列的索引。在你的情况下，我认为 jqGrid 将使用**最后一个**`colModel``key: true`**列`key: true`。因此`'ac_n_circ'`列中的值将用作 id。**

 **如果您在`'ac_n_circ'`列中有重复值，那么您将有许多不同的非常奇怪的效果（在不同的 Web 浏览器中是有区别的）。例如，如果您单击一行，则可以选择另一行。您也可以在编辑过程中产生不同的奇怪效果。

因为您使用`prmNames: {ac_n_quad: "id"}`（这也是错误的。正确的将是`prmNames: {id: "ac_n_quad"}`），所以我可以怀疑那`ac_n_quad`是真正的唯一 ID。因此，您应该`key: true`只在`ac_n_quad`列中使用，并且必须从任何其他列 ( `'ac_n_circ'`) 中删除该属性。

此外，您可以减少和简化代码。的元素属性的默认值在[文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3acolmodel_options)`colModel`中进行了描述（参见表中的“默认”列）。例如, ,的默认值为150、“left”和 false。您在所有列中使用并且使用最频繁。所以你可以使用`width``align``editable``align:'right', editable:true``width:70`

```
cmTemplate: { align: 'right', editable: true, width:70 } 
```

而不是`cmTemplate: { align: 'center', editable: true }`你现在使用的。它可以让你减少`colModel`到

```
colModel: [
    {name:'ac_n_quad', width:110, key:true},
    {name:'ac_l_circ', width:65},
    {name:'ac_n_circ', width:120},
    {name:'ac_fin_g', width:60},
    {name:'ac_pot', width:55},
    {name:'ac_volt', width:60},
    {name:'ac_n_polos', width:100},
    {name:'ac_t_prot', width:100},
    {name:'ac_v_prot'},
    {name:'ac_cabo', width:60},
    {name:'ac_fd', width:55},
    {name:'ac_fp', width:55},
    {name:'ac_ctr', width:60},
    {name:'ac_pot_a'},
    {name:'ac_pot_b'},
    {name:'ac_pot_c'},
    {name:'ac_pos_1'},
    {name:'ac_pos_2'},
    {name:'ac_calc', width:65}
] 
```

如果您的`index`value 与 value 的 value 相同，则`name`可以跳过`index`。`colNames`以同样的方式，如果它只包含 的`name`属性值，则可以跳过`colModel`。**

# selenium-ide - Selenium IDE - 我在哪里可以找到 assertTextPresent 的源 js 代码？

> ID：15027035
> 
> 赞同：0
> 
> 时间：2013-02-22T15:03:01.460
> 
> 标签：selenium-ide

我已经下载了 SeleniumIDE.xpi，但似乎找不到 assertTextPresent 的代码。我假设它是一个javascript。任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:15:06.513

根据我的理解，无法得到您的问题，有 2 个命令可用于验证文本存在

1.  验证文本存在
2.  断言文本存在

和值应该以这种方式给出命令：Verifytextpresnt 目标：{已被验证的文本} 值：{空白}

# java - KeyPressedEvent to SetText for JTextArea

> ID：15027037
> 
> 赞同：0
> 
> 时间：2013-02-22T15:03:03.270
> 
> 标签：java, swing, awt, jtextarea, keylistener

I attempted to make a JTextArea in my Java.Swing application using NetBeans so that when I press the Enter Button. The JTextArea will display "BUTTON PRESSED".

Here is what I have:

```
private void keyPressedEvent(java.awt.event.KeyEvent evt)
{
    if(evt.getKeyCode() == KeyEvent.VK_ENTER)
    {
         System.out.println("HERE"); //For sanity check.
         txtArea.setText("BUTTON PRESSED");
         System.out.println("HERE AGAIN"); //For sanity check
    }
} 
```

I noticed that the print statements are executing but the txtArea is not setting the text.

I did some research and believe that `evt.consume()` should be called somewhere, but I am unsure of how that works.

EDIT: I tried putting `evt.consume()` in the `if-block` and it still did not set the text.

Adding the key listener like this:

```
private void initComponents() {

    jScrollPane1 = new javax.swing.JScrollPane();
    jTextArea1 = new javax.swing.JTextArea();

    setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

    jTextArea1.setColumns(20);
    jTextArea1.setRows(5);
    jTextArea1.addKeyListener(new java.awt.event.KeyAdapter() {
        public void keyPressed(java.awt.event.KeyEvent evt) {
            KeyPressedEvent(evt);
        }
    });
    jScrollPane1.setViewportView(jTextArea1);

    javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
    getContentPane().setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addGap(59, 59, 59)
            .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addContainerGap(175, Short.MAX_VALUE))
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addGap(40, 40, 40)
            .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addContainerGap(164, Short.MAX_VALUE))
    );

    pack();
}// </editor-fold> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T15:20:38.353

Works for me. How are you adding the keylistener?

![test program screenshot](../Images/a9621ad3030bc389db61731ea6877e44.png)

```
public class TextAreaTest extends KeyAdapter {

  private JFrame frame = new JFrame("Text Area Test");
  private JTextArea area = new JTextArea();

  public static void main(String[] args) {
    TextAreaTest test = new TextAreaTest();
    test.go();
  }

  private void go() {    
    area.addKeyListener(this);
    frame.getContentPane().add(area);
    frame.setVisible(true);
  }

  @Override
  public void keyPressed(KeyEvent evt) {
    if(evt.getKeyCode() == KeyEvent.VK_ENTER)
    {
         System.out.println("HERE"); //For sanity check.
         area.setText("BUTTON PRESSED");
         System.out.println("HERE AGAIN"); //For sanity check
    }
  }

} 
```

# c++ - DirectX 中的批处理

> ID：15027039
> 
> 赞同：0
> 
> 时间：2013-02-22T15:03:10.440
> 
> 标签：c++, directx, directx-9

到目前为止，我已经在 DirectX 9 中完成了一个框架，它使用单个 VertexBuffer 来绘制我加载的每个纹理，我使用了一个顶点数组来绘制 Lock 和 Unlock 调用中的每个纹理 Quad。我听说有一种叫做批处理的东西，我可以将它锁定一次，然后在我绘制所有内容时解锁。我知道我可以在一次调用中绘制每个纹理四边形来锁定和解锁，但我不知道如何为每个纹理设置不同的纹理。这里有人可以指导我吗？

```
vertexBufferRHW->Lock(0, 0, (void**)&VerticesRHW, NULL);

VerticesRHW[0].Color = color;
VerticesRHW[0].X = (float) Position.X;
VerticesRHW[0].Y = (float) Position.Y;
VerticesRHW[0].Z = 0.0f;
VerticesRHW[0].RHW = 1.0f;
VerticesRHW[0].U = 0.0f;
VerticesRHW[0].V = 0.0f;

VerticesRHW[1].Color = color;
VerticesRHW[1].X = (float) (Position.X+TextureFile.Width);
VerticesRHW[1].Y = (float) Position.Y;
VerticesRHW[1].Z = 0.0f;
VerticesRHW[1].RHW = 1.0f;
VerticesRHW[1].U = 1.0f;
VerticesRHW[1].V = 0.0f;

VerticesRHW[2].Color = color;
VerticesRHW[2].X = (float) (Position.X+TextureFile.Width);
VerticesRHW[2].Y = (float) (Position.Y+TextureFile.Height);
VerticesRHW[2].Z = 0.0f;
VerticesRHW[2].RHW = 1.0f;
VerticesRHW[2].U = 1.0f;
VerticesRHW[2].V = 1.0f;

VerticesRHW[3].Color = color;
VerticesRHW[3].X = (float) Position.X ;
VerticesRHW[3].Y = (float) (Position.Y+TextureFile.Height);
VerticesRHW[3].Z = 0.0f;
VerticesRHW[3].RHW = 1.0f;
VerticesRHW[3].U = 0.0f;
VerticesRHW[3].V = 1.0f;

vertexBufferRHW->Unlock();

spriteDevice->SetTexture(0,TextureFile.TextureFile);
spriteDevice->DrawPrimitive(D3DPT_TRIANGLEFAN,0,2); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T19:12:36.590

您可以将所有四边形的高度/宽度设为 1，然后执行 for 循环，如下所示：

```
for( ... loop through all the textures )
{
    // create a matrix that scales your quad to make it the correct width/height and in the correct location
    D3DXMATRIX matrix, scale, translation;
    D3DXMatrixScaling( &scale, texture.width, texture.height, 0 );
    D3DXMatrixTranslation( &translation, position.x, position.y, 0 );
    matrix = scale * translation;
    spriteDevice->SetTransform( D3DTS_WORLDMATRIX, &matrix ); 
    spriteDevice->SetTexture(0,texture);
    spriteDevice->DrawPrimitive(D3DPT_TRIANGLEFAN,0,2);
} 
```

# uisearchbar - UISearchBar 和 UISegmentedControl 基础内部化问题

> ID：15027041
> 
> 赞同：1
> 
> 时间：2013-02-22T15:03:12.743
> 
> 标签：uisearchbar, uisegmentedcontrol

我在情节提要中有一个 UISearchBar，它在其搜索窗口中显示默认文本：“搜索”。情节提要已基本国际化，我可以在情节提要的 .strings 文件中看到其他语言的翻译。但是当我切换语言时，文本“搜索”不会根据语言翻译而改变。

有没有办法来解决这个问题 ？

分段控件也会发生类似的事情。

我让它工作的唯一方法是使用 NSLocalizedStringWithDetaultValue 在代码中设置文本。如何在故事板中解决这个问题？

# .net - 并发可视化工具 - 了解 WPF/CLR 线程

> ID：15027047
> 
> 赞同：6
> 
> 时间：2013-02-22T15:03:24.593
> 
> 标签：.net, wpf, multithreading, clr

我一直在使用 Visual Studio 中的并发可视化工具来了解我正在处理的 WPF 项目中的线程。该应用程序不是大量的多线程，所有多线程只是为了避免阻塞 UI 线程。当我运行并发可视化器时，我非常惊讶地看到大约 50 多个线程！为了让事情变得更加混乱，几乎所有这 50 多个线程都将全部时间都花在了“同步”上，据我所知，这是“阻塞”的。

作为一个实验，我创建了一个新的空白 WPF 应用程序项目，并使用并发可视化器运行它，再次令我惊讶的是，我期望有一个主线程的应用程序，可能还有一两个用于垃圾收集或其他 CLR 东西，原来有10个线程！

![Concurrency Visualizer 的屏幕截图，显示了一个简单 WPF 应用程序中的 10 个线程](../Images/1d5840bc1ac0b87dfdc3451ba114e434.png)

所以我的问题是：

1.  为什么在一个非常简单的应用程序中有这么多线程？
2.  一般来说，这些线程的作用是什么？
3.  为什么他们几乎把所有的时间都花在“同步”上？
4.  对涵盖该主题的书籍/网站有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-18T19:50:57.793

Jerry Bullard 为这个问题提供了一个很好的答案：[WPF 应用程序的 19 个线程](https://stackoverflow.com/questions/1484060/19-threads-for-wpf-application)

因此，除了 WPF UI 和渲染线程之外，还有不同类型的 .NET 线程：终结器、GC、调试器、计时器、线程池、主线程和后台线程。线程池至少有两个线程。这一切都为我们提供了至少 10 个线程（就像在您的屏幕截图中一样）。

# powershell - cmdlet 设计：参数传入：管道还是内联参数？

> ID：15027050
> 
> 赞同：1
> 
> 时间：2013-02-22T15:03:33.250
> 
> 标签：powershell, cmdlets, cmdlet

这不是一个编程问题，而是更多的设计问题。

假设数据存储在 json 中。

例如，`Get-Person "John" | Get-Employer`或`Get-Employer -Person "John"`

两种方式都返回约翰的雇主，前一种使用管道，后一种使用内联参数。我有时会感到困惑：每个人的优点和缺点是什么？当你们在设计时，你喜欢使用它们中的每一个吗？

对我来说，我想出使用管道的唯一原因是，如果需要评估参数的值，它可以节省我们使用变量的时间。

有人对这个问题也有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T15:12:08.997

没有理由您需要选择其中一个。通过适当的参数属性和功能设计（使用开始/处理/结束块），您可以允许这两种选择。

# javascript - 启用 mouseup / mousedown 但阻止点击行为

> ID：15027052
> 
> 赞同：3
> 
> 时间：2013-02-22T15:03:37.617
> 
> 标签：javascript, jquery, d3.js, events, dom-events

我在这里有一个数据可视化（第二个）：

[http://mikeheavers.com/main/work](http://mikeheavers.com/main/work)

如果您单击代表技能领域的圆圈，则会显示具有特定技能的内部绿色圆圈。如果您按住代表技能的绿色圆圈，它们会动画、生长，然后在释放鼠标时收缩。但是，如果您只是单击圆圈，它们会变大，但不会恢复到以前的大小（`mousedown`我猜是没有注册） - 这会导致每次单击时圆圈都会不断变大。

有没有办法通过 d3 或通过 Javascript / jQuery 来防止点击行为？我只想要`mouseup`和`mousedown`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T18:06:03.997

我观察到的行为与您描述的不同。

*   如果您单击一个圆圈，无论单击多长时间（无论是否按住），它都会返回到其原始大小。
*   如果您反复快速地单击一个圆圈，这就是它开始增长并且不会恢复到其原始大小的时候。
*   如果您按住一个圆圈，然后将鼠标移出它，它会保持粉红色并且不会恢复到原来的大小。

我认为附加一个简单`.on('mouseout', handler)`的球体恢复到原来的大小将解决最后一个问题，这是非常明显的，以及`mouseup`由于移动到外面而错过的任何事件。您还可以将 a 附加`mouseup`到整个文档 ( `d3.select('body').on('mouseup', handler)`)，这将捕获任何此类事件；那么你只需要记录最后一个被点击的球体。

此外，要解决您的原始问题，您可以确保通过添加事件来`mouseup`触发事件。这将防止快速点击变成浏览器的双击或其他事件。`e.preventDefault()``mousedown`

讨论这些问题的其他帖子：

*   [mouseup 事件并不总是被触发](https://stackoverflow.com/questions/9410112/mouseup-event-isnt-always-triggered)
*   [拖动时的 mouseUp 事件](https://stackoverflow.com/questions/6019190/mouseup-event-on-drag)

# macos - 动画层不透明度导致子层在发生淡入淡出之前首先获得 100% 的不透明度

> ID：15027054
> 
> 赞同：0
> 
> 时间：2013-02-22T15:03:40.920
> 
> 标签：macos, cocoa, core-animation

我有这段代码用于为图层的不透明度设置动画，除了一件事外，它的工作原理与预期完全一样：alpha 值低于 100% 的子图层在淡入淡出开始之前获得 100% 的不透明度。

这意味着淡出看起来不平滑，因为“闪烁”出现在半透明的子层上。

有任何想法吗？

```
CABasicAnimation *fadeAnimation = [CABasicAnimation animationWithKeyPath:@"opacity"];
[fadeAnimation setDuration:1];
[fadeAnimation setFromValue:[NSNumber numberWithFloat:view.layer.opacity]];
[fadeAnimation setToValue:@0];
[fadeAnimation setFillMode:kCAFillModeForwards];
[fadeAnimation setRemovedOnCompletion:NO];

[view.layer addAnimation:fadeAnimation forKey:@"opacity"]; 
```

# ios - 在 XCode 4.6 中，如何创建一个全新的 iOS 应用程序，将选项卡式主应用程序与其中一个选项卡上的导航控制器结合起来？

> ID：15027055
> 
> 赞同：2
> 
> 时间：2013-02-22T15:03:44.870
> 
> 标签：ios, xcode, uinavigationcontroller, uitabbarcontroller, xcode4.6

我正在尝试以全新的非故事板（普通旧笔尖）样式在标签栏控制器中添加导航控制器。

我发现这个[演示](http://21gingerman.wordpress.com/2009/04/06/tutorial-and-sample-code-for-iphone-app-with-tab-bar-and-nav-bar/)假定 XCode 有一个名为“Tab Bar Application”的新项目模板。它没有。现在 XCode 4.6 有了“新的选项卡式应用程序”。当然，Apple 以他们的伟大智慧决定我不应该有一个主窗口 nib (.xib)，并且应该在应用程序委托中为我编码标签栏控制器及其页面，而不是在一个新的用户友好的 NIB 中实例化选项卡控制器。我想这是因为这种方式更灵活，您可以编写代码来决定用户看到哪些选项卡以及他们看不到哪些选项卡。如果我打开 Storyboards，那么我想我可以在视觉上做所有事情。

我对 XCode 版本差异的长期和折磨历史深感困惑，这影响了关于 stackoverflow 和网络上其他地方的演示的现有问题的有效性，这些问题引用了不同的 iOS 版本和不同的 XCode 版本，并对 XCode 的版本做出了特定的假设和 iOS 现在似乎已经发生了变化，并且每个都依赖于关于`Main Nib File Base Name`设置或未设置内容的不同选择。

我还发现，似乎 pre-storyboard-Nibs 以及组合各种 UIKit 小部件和控制器的复杂性一直是创建故事板的主要动机。

我正在一个真正的非故事板基于 nib 的应用程序中工作，该应用程序似乎是在苹果改变主意之前创建的，我可以看到在启动时很多不必要的视图是由 nib-instantiation 自动创建的，然后被删除，为了在标签栏控制器上动态隐藏和显示标签。这似乎在 Apple 考虑了很多，他们通过改变在 XCode 中生成新应用程序的方式隐式地改变了推荐的做法。我不是在质疑他们的智慧，事实上我很欣赏这种变化，但这让我迷失了方向。

无论如何，我只是想将导航控制器放在主选项卡栏中的选项卡中，并且当 XCode 用于生成主窗口并生成“选项卡栏应用程序”时，我已经有一个应用程序必须重新启动一个顶级视图，它是一个选项卡式视图，并且选项卡栏控制器是 nib 实例化的。上面的演示假设了很多。

众所周知，Apple 显然从未提供过标签栏和导航控制器的这种明显组合的演示。或者我被告知。苹果人机界面指南显然声明（或曾经声明？）将导航控制器放在标签栏内比反之更好，我的问题应该被理解为希望尽可能地遵守 HIG，所以我相信我问的是推荐的组合，而不是不鼓励的组合。

这是我到目前为止所尝试的：

1.  试图从大约 2009 年开始关注[这篇博客文章](http://21gingerman.wordpress.com/2009/04/06/tutorial-and-sample-code-for-iphone-app-with-tab-bar-and-nav-bar/)，该文章假设旧版本的 XCode 的事情不再真实。

2.  从 XCode 为我生成的新选项卡式应用程序开始，**故事板关闭**，我有一个它为我生成的根应用程序委托 .m 文件，它显然是在应用程序启动时创建的，一个完全在代码中的选项卡栏控制器对象，以及它没有主窗口笔尖。以下代码完全由 Apple 编写，我想知道（作为一个相对较新的 Cocoa 开发人员）如果我想将其中一个选项卡更改为具有导航栏，我应该在哪里闯入并放置我的新东西及其关联的 UINavigationViewController：

-- 这个标记帮助 stackoverflow 被破坏的 markdown 系统不被混淆 --

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    UIViewController *viewController1, *viewController2;
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        viewController1 = [[RPDAFirstViewController alloc] initWithNibName:@"RPDAFirstViewController_iPhone" bundle:nil];
        viewController2 = [[RPDASecondViewController alloc] initWithNibName:@"RPDASecondViewController_iPhone" bundle:nil];
    } else {
        viewController1 = [[RPDAFirstViewController alloc] initWithNibName:@"RPDAFirstViewController_iPad" bundle:nil];
        viewController2 = [[RPDASecondViewController alloc] initWithNibName:@"RPDASecondViewController_iPad" bundle:nil];
    }
    self.tabBarController = [[UITabBarController alloc] init];
    self.tabBarController.viewControllers = @[viewController1, viewController2];
    self.window.rootViewController = self.tabBarController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

现在看来，过去无需编写代码就可以实现的事情（根据我链接到的博客上的 2009 年示例）现在完全在代码中完成。我已经阅读了大约 500 页的“iOS 5 编程”，在我的第一个应用程序上工作了几百个小时，并尝试了很多演示应用程序，但我仍然是一个相对没有经验的 Cocoa/iOS 开发人员，我相信我的一部分对这一切的困惑是“控制器和视图”模式，它在代码和 nib 中组合它们的规则对我来说并不完全清楚。

--

**更新**：您可以拥有 codez！[为了帮助像我这样的未来 XCode-cocoa-iOS 菜鸟，我制作了一个完整的演示应用程序并将其发布在 github 上。](https://github.com/wpostma/TabBarPlusNavPlay)

截屏： ![在此处输入图像描述](../Images/9098eee2585c8b43f9a6514f22f01e29.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T15:31:26.937

当我做同样的事情时，我和你一样困惑，但是一旦你理解了这个结构，你会发现它很简单。

基本上，您想使用要首先显示的 RootViewController 创建一个 UINavigationController：

```
[UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:theViewControllerYouWantToDisplayFirst]; 
```

然后只需将此控制器添加到选项卡按钮的数组中即可。

```
NSArray *tabs = [[NSArray alloc] 
                        initWithObjects: navController, otherTab, etc]; 
```

然后，使用这样的数组设置标签。

```
UITabBarController *rootController = [[UITabBarController alloc] init];
[rootController setViewControllers:tabs]; 
```

并将其添加到您的选项卡控制器到您的窗口：

```
[self.window setRootViewController:rootController]; 
```

就是这样。我花了一些时间来了解事物的结构方式。Tab View 控制器只包含一堆 ViewController，您只需将其中一个视图控制器设为 NavigationController。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T15:26:19.470

如果您不介意启动一个新应用来获得基础知识，请尝试以下操作：

创建一个选项卡式应用程序（或现在所谓的任何名称）：

然后选择要嵌入到 NavigationController 中的视图。

然后进入编辑器 -> 嵌入 -> 在 NavigationController 中，如下所示：

![在此处输入图像描述](../Images/f209b14de6052b4ea58fc5e1c4bec2be.png)

您的结果将如下所示：

![在此处输入图像描述](../Images/d9004e5f9e62badf50df716e206ad6fa.png)

干杯!

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T16:02:33.437

正如前两个答案中所解释的（都是正确的），我添加了另一种方法来返回原始的“选项卡式应用程序”模板（可能是 XCode 的第 3 版？我不记得了）。在此模板中，您将拥有一个主 xib 文件，其中包含您的 TabBarController。

您必须从 Empty Application 模板开始，然后执行以下步骤：

*   添加一个新文件，用户界面，应用程序 Xib。在本教程中，我假设您将其命名为“Application.xib”
*   转到您的 AppDelegate.h 文件并更改此行：

    @property (strong, nonatomic) UIWindow *window;

添加 IBOutlet：

```
@property (strong, nonatomic) IBOutlet UIWindow *window; 
```

*   进入 AppDelegate.m 并使用此更改您的 applicationDidFinishLaunching 方法

：

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // delete all and leave only the return
    return YES;
} 
```

*   进入 Application.xib，从 Objects Menu 中选择“App Delegate”，然后在身份检查器中更改 Class --> 写入 AppDelegate（或您的 AppDelegate.h 类名）
*   始终在 Application.xib 中，再次右键单击 App Delegate Object，您将看到一个“窗口”Outlet --> 将其链接到左侧对象检查器中的 Window 对象
*   现在，回到项目，进入支持文件 main.m 并像这样更改返回行：

：

```
return UIApplicationMain(argc, argv, nil, nil); 
```

*   然后，进入主 .plist 文件并添加一个键：右键单击，添加，键，“主 Nib 文件基本名称”，类型字符串，值“应用程序”（不带引号，不带 .xib 扩展名）

好的，现在您有一个空的“旧式”笔尖应用程序。现在您可以再次进入 Application.xib，拖动您的 TabBar 并将其链接为窗口“根视图控制器”（右键单击窗口，链接根视图控制器属性）。然后，在选项卡栏内，您可以拖动 ViewControllers、Navigation 控制器、ecc...

如果您需要其他详细信息或图片，请写信给我

编辑：

如果您想查看，我上传了一个示例项目：[http ://www.lombax.it/documents/ManualTab.zip](http://www.lombax.it/documents/ManualTab.zip)

截屏： ![在此处输入图像描述](../Images/758f7303c64a988483a1bf33e2c62848.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-06T15:00:06.870

我有一个工作应用程序，我想将它放在选项卡式应用程序的一个“腿”下。我想在其他选项卡下开发“更大的应用程序”的其他部分。我不想使用故事板。这消除了我找到的很多解决方案。其余的大多数解决方案都是使用旧版本的 Xcode 开发的，它们根本不适用于我在 2013 年 2 月下载的 Xcode 版本。

我尝试创建自己的选项卡式应用程序 - （从“空应用程序”开始），正如该线程上的一些开发人员所使用的那样。我觉得我快要接近了，但我根本无法让它发挥作用。

Vishal Kurup 有一个关于使用“带有导航控制器的选项卡式应用程序”的优秀教程。

通过按照视频进行小修改（如下所列），我能够将现有应用程序滑入 Xcode 创建的默认“选项卡式应用程序”下。

在 Xcode 4.3 中使用导航控制器 + 详细视图创建 TabBar 控制器

可以在

[http://www.youtube.com/watch?v=UMpNbCs4mr4](http://www.youtube.com/watch?v=UMpNbCs4mr4)

我必须对默认的“选项卡式应用程序”进行的唯一真正更改是在 AppDelegate.m 中：

选择“选项卡式应用程序”提供的以下代码不符合我的目的

```
 self.tabBarController.viewControllers = @[viewController1, viewController2]; 
```

这确实

```
 self.tabBarController.viewControllers = [NSArray arrayWithObjects:navigation ,
     viewController1 ,viewController2, viewController3, viewController4,  nil]; 
```

非常感谢 Vishal Kurup 先生。他制作了许多关于 iOS 开发的优质视频。

# sql - 递归增加sql中的日期

> ID：15027058
> 
> 赞同：0
> 
> 时间：2013-02-22T15:03:51.873
> 
> 标签：sql, loops, data-warehouse, teradata

我正在处理数据的历史转换，想知道是否有更有效的方法来完成日期增量。

我在星期六日期（1-7-13）收到来自源系统的数据，并希望推送该数据以使其填满前一周的所有日子（1-6-13,1-5-13 等） .

所以目前我正在做几个工会

```
insert into target
(date, name)
select date,name 
from 
(
SELECT date as date, name FROM SOURCE
UNION
SELECT date - 1 as date, name FROM SOURCE
UNION
SELECT date -2 as date, name FROM SOURCE
) 
```

我只是问，因为看起来有近 5 亿条记录将通过这个 sql 脚本进行。万一这很重要，它将在 TERADATA 的 BTEQ 脚本中运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T15:16:23.810

首先，您的代码使用`union all`而不是`union`. `union`删除重复项，在这种情况下似乎不需要。如果您确实需要删除它们，请在源代码级别执行：

```
from (select distinct name from source) 
```

而不是用`union`.

您还可以尝试交叉连接方法：

```
select date - i, name
from source cross join
     (select 0 as i union all select 1 union all select 2 union all select 3 union all
      select 4 union all select 5 union all select 6
     ) const 
```

这可能会快一点，因为它不需要多次设置对表的读取。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T15:19:23.517

一种选择是使用递归查询，但我认为它不会更快——只是可能更容易阅读：

```
WITH RECURSIVE recursiveCTE (date, name) AS (
  SELECT date, name
  FROM Source
  UNION ALL
  SELECT r.date-1, r.name
  FROM recursiveCTE R
     JOIN Source T ON R.name = T.name AND T.date < r.date+6
 )
INSERT INTO Target (date,name)
SELECT date,name From recursiveCTE 
```

# j - J中sum(1/(1+x)^y)的一个好的默认形式是什么

> ID：15027061
> 
> 赞同：3
> 
> 时间：2013-02-22T15:03:57.490
> 
> 标签：j, tacit-programming

作为初学者练习，我尝试`sum(1/(1+0.03)^n for n = 1 to 30`使用J 计算以下总和`+/%(1 + 0.03)^ >:i.30`。我怎样才能把它写成一个简单的默认形式？我所尝试的一切都比上面的显式形式丑得多`>:@[ (+/&:%)@:^ >:&i.@]`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T21:41:58.277

你可以从

```
+/@:%@((1 + 0.03) ^ >:@i.) 30 
```

您可以使用 fork 将 0.03 设为 left 参数，但使用 hook 会更简洁

```
(1 + 0.03) +/@:%@([ ^ >:@i.@]) 30   NB. use fork
(1 + 0.03) +/@:%@(^ >:@i.) 30       NB. use hook 
```

对 的左右参数执行相同的操作（增量）`^`。这暗示`&`（[Compose](http://www.jsoftware.com/docs/help701/dictionary/d630v.htm)）可能有用。

```
0.03 +/@:%@(^&>: i.) 30         NB. apply increment to both left & right arg 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T16:31:50.377

当我想要一个默契的功能时，我经常让`13 :`我为我服务。在这种情况下，一些变化：

```
 13 : '+/ %((1+0.03)^1+i.y)'
[: +/ [: % 1.03 ^ 1 + i.

   13 : '+/ %((1+0.03)^>:i.y)'
[: +/ [: % 1.03 ^ [: >: i. 
```

并以`1+0.03`或其他任何方式作为左参数：

```
 13 : '+/ %(x^1+i.y)'
[: +/ [: % [ ^ 1 + [: i. ]

   13 : '+/ %(x^>:i.y)'
[: +/ [: % [ ^ [: >: [: i. ] 
```

不过，有太多的大写字母 ( `[:`) 不能称之为丑陋，但这是一个开始。

# c++ - USB 到 USB 通信

> ID：15027063
> 
> 赞同：2
> 
> 时间：2013-02-22T15:04:16.307
> 
> 标签：c++, linux-kernel, embedded, linux-device-driver, embedded-linux

我有一台带有 USB OTG 控制器的 ARM 嵌入式机器和另外两台没有 USB OTG 的（英特尔）嵌入式机器（仅限标准 A 型连接器）。

我想将 ARM 机器配置为主机，将另外两台机器配置为设备。

如果不创建任何网络（以太网）连接，这怎么可能？我正在使用 Linux。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T15:12:31.927

如果没有额外的硬件，我认为你不能做到这一点，至少不能“干净地”。

USB A 端口仅用于指向“上游”，即指向主机。由于您有两台机器想要成为设备，并且只有 A 端口，所以您有点不走运。

[使用其中两条USB 连接电缆](http://en.wikipedia.org/wiki/Direct_cable_connection#DCC_with_USB)和一个集线器可能是可行的，如下所示：

```
 +--------+
  [ ARM box OTG]----|B (hub) |
                    |        |                      
                    | A    A |
                    +--------+
                      |    |
                      |    |
[Intel box A]---[cable]    [cable]---[A Intel box] 
```

上面，`[cable]`表示直接电缆连接电缆，每个盒子内的 A/B/OTG 符号表示每个盒子上使用的连接器类型。OTG 端口正在 A（主机）模式下使用。

笔记：

1.  我没试过这个。
2.  它需要 ARM 盒子有专门的软件来驱动 DCC 电缆，因为它们实际上是有源设备。
3.  不知道英特尔机器需要什么，可能是更专用的软件。

# python - 给定 RA/Dec 的 pyephem FixedObject()

> ID：15027069
> 
> 赞同：2
> 
> 时间：2013-02-22T15:04:30.797
> 
> 标签：python, pyephem

我正在寻找在特定时间从 Mauna Kea 确定给定 RA/Dec 的（不知名的）恒星的 alt/az。我正在尝试使用 pyephem 计算这些参数，但生成的 alt/az 与其他来源不一致。这是 Keck 对 HAT-P-32 的计算：

```
import ephem
telescope = ephem.Observer()
telescope.lat =  '19.8210'
telescope.long = '-155.4683'
telescope.elevation = 4154
telescope.date = '2013/1/18 10:04:14'
star = ephem.FixedBody()
star._ra = ephem.degrees('02:04:10.278')
star._dec = ephem.degrees('+46:41:16.21')
star.compute(telescope)
print star.alt, star.az 
```

它返回`-28:43:54.0 73:22:55.3`，但根据 Stellarium，正确的 alt/az 应该是：`62:26:03 349:15:13`。我究竟做错了什么？

**编辑**：更正了以前颠倒的纬度和经度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T15:37:10.780

首先，你的经纬度倒退了；其次，您需要提供十六进制形式的字符串；第三，您需要以小时而不是学位的形式提供 RA：

```
import ephem
telescope = ephem.Observer()
# Reversed longitude and latitude for Mauna Kea
telescope.lat =    '19:49:28' # from Wikipedia
telescope.long = '-155:28:24'
telescope.elevation = 4154.
telescope.date = '2013/1/18 00:04:14'
star = ephem.FixedBody()
star._ra  = ephem.hours('02:04:10.278') # in hours for RA
star._dec = ephem.degrees('+46:41:16.21')
star.compute(telescope) 
```

这样，你得到：

```
>>> print star.alt, star.az
29:11:57.2 46:43:19.6 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T15:56:39.313

PyEphem 始终使用 UTC 作为时间，因此程序在任何地方运行时都以相同的方式运行并提供相同的输出。您只需将您使用的日期转换为 UTC，而不是使用您的本地时区，结果与 Stellarium 非常吻合；采用：

```
telescope.date = '2013/1/18 05:04:14' 
```

结果是这个 alt/az：

```
62:27:19.0 349:26:19.4 
```

要知道剩余的微小差异来自哪里，我必须研究这两个程序如何处理其计算的每一步；但这能让你足够接近吗？

# ajax - 根据结果 验证关闭 Jquery 对话框

> ID：15027075
> 
> 赞同：0
> 
> 时间：2013-02-22T15:04:52.783
> 
> 标签：ajax, asp.net-mvc, mvvm, form-submit

我正在将 a 加载`PartialView`到 a`Jquery UI dialog`中，如果在`post method`我重新加载`PartialView`到对话框中时出现问题（`ModelState`例如错误）。在这一点上，我的 ajax sumbit 不再起作用了。它只是重定向我，它不应该。

我的代码有什么问题？这是我尝试过的：

```
$('#editdialog').dialog({
        autoOpen: false,
        width: '900px',
        modal: true,
        open: function (event, ui) {
            $(this).load('Controller action', function (html) {
                $('#incarcerationForm').submit(function () {
                    $.ajax({
                        url: 'Controller action',
                        data: $("#myForm").serialize(),
                        type: "POST",
                        success: function (data) {
                            $('#editdialog').html(data);

                            $.validator.unobtrusive.parse($("#myForm"));

                            if ($("#myForm").valid()) {
                                GetDetails(@Model.FormModel.ID);
                                $('#editdialog').dialog('close');
                                console.log("myForm was edited successfully");
                                return false;
                            }

                            return false;

                        },
                        error: function (data) {
                            $('#editdialog').html(data);
                            console.log("error at edit myForm");
                            return false;
                        }
                    });
                    return false;
                });
                return false;
            });
        }

    }); 
```

我的`[HttpPost]` `Controller`行动：

```
 public ActionResult Create(Mymodel viewModel)
    {   
         return CheckValidBusiness(() => 
           { 
             viewModel.Save(viewModel.FormModel); return true; 
           })
        .Valid(() => PartialView(viewModel))
        .Invalid(() => PartialView(viewModel));

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T15:14:00.907

代替：

```
$('#incarcerationForm').submit(function () { 
```

和：

```
$(document).on('submit', '#incarcerationForm', function () { 
```

这样您就可以以*活泼的方式*订阅表单的提交事件，这将对 DOM 更改具有弹性。查看该[`.on()`](http://api.jquery.com/on/)方法以获取更多信息。

# asp.net-mvc-3 - ASP .NET MVC3 Razor 弹出视图

> ID：15027076
> 
> 赞同：0
> 
> 时间：2013-02-22T15:04:53.990
> 
> 标签：asp.net-mvc-3, razor, entity-framework-4, popup

我是网络开发的新手..

我已经在 MVC3 Razor 中使用实体框架创建了视图。我所做的是，我第一次创建了模型（客户端）和 DbContext（客户端DbContext）类。然后，我添加带有 scaffolfind 选项的控制器

模板：具有读/写操作和视图的控制器，使用实体框架

模型类：客户

数据上下文类：ClientDbContext

浏览量：剃刀（CSHTML）

它创建控制器类和索引，详细信息，删除，删除视图......之后我修改了搜索和分页的索引页面......

一切都很好......在索引页面中我创建，编辑，删除，详细链接......当我点击链接时，浏览器加载到该页面并且工作正常......

但是当我单击索引页面中的链接时，我需要弹出这些视图...我不知道该怎么做...我研究了很多文章但我很困惑...请帮助我解决这个问题高效的方式...

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:20:29.720

在页面中创建模型弹出窗口不是可以直接使用 ASP.NET MVC 完成的。您可以使用 javascript 和 css 自己完成，但我强烈建议您使用 JS UI 框架来执行此操作。[jQuery UI](http://jqueryui.com/)有一个弹出式模态框，但他们称之为对话框。

jQuery UI 对话框的文档可以在[这里](http://jqueryui.com/dialog/)找到。查看示例以了解如何设置它的详细信息。但这是您需要做的基本流程：

*   下载所需的[jQuery UI](http://jqueryui.com/download/)文件并将它们包含在您的页面中（CSS/JS 文件）
*   从您的创建/更新/删除视图中获取 html 并将其放在您的索引页面上，将它们包装在具有适当 id 的 div 中
*   当页面加载时，使用 jquery ui 来定位您想要成为弹出窗口的 div

通过将选项传递给对话框初始化方法来设置诸如要弹出对话框的链接之类的内容，同样可以在文档页面上找到确切的选项和示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T12:19:12.177

请参考：http: [//jqueryui.com/dialog/](http://jqueryui.com/dialog/)创建一个 jQuery 对话框。

```
 <script>
        $(function() {
            $( "#dialog" ).dialog();
          });
    </script>

    <div id="dialog">
         @using(Html.BeginForm()){
            @Html.EditorForModel()
           <input type='submit' value ='Submit'/>
        }
    </div> 
```

# plugins - 系统插件安装后无法编辑文章

> ID：15027077
> 
> 赞同：1
> 
> 时间：2013-02-22T15:04:56.640
> 
> 标签：plugins, cpanel, whm, joomla3.0

我为 Joomla 3.0 开发了一个前端系统插件，它替换了 HTML 格式对象的关键字。这在我的本地实验室环境中非常有效，但是当安装在托管站点 (WHM/cPanel) 上时，它会导致管理区域出现问题并阻止管理员编辑文章。

当管理员单击文章以编辑页面时，尝试加载然后似乎返回到同一页面。我只是将其开发为前端插件，因此我不应该影响管理区域。

该问题还阻止管理员创建任何新内容（新闻、博客、内容、菜单项等）

由于这不会在我的实验室中发生，我只能假设问题出在一些我可能需要启用/禁用的服务器设置上。我拥有对 WHM、cPanel 和 Joomla 的完全管理访问权限，因此可以根据需要更改设置...

**我观察到的事情：**

文章 URL 更改为：

```
/administrator/index.php?option=com_content&view=article&layout=edit&id=7 
```

到：

```
/administrator/index.php?option=com_content&amp;view=article&amp;layout=edit&amp;id=7 
```

当插件启用时。请注意与号已更改为`amp;`。这让我觉得这可能与 UTF-8 字符编码已在 MySQL 中设置为`utf8general_ci`.

任何关于我可能需要更改的配置的指针都会受到极大的欢迎。

**问题：**如何防止这种情况发生（不删除我的基本插件）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-14T11:03:05.693

如果您创建的系统插件只能在前端工作，您必须检查您的插件是否当前页面是前端。您可以使用此功能：`JFactory::getApplication()->isSite()`或`JFactory::getApplication()->isAdmin()`

示例用法（我假设您使用**onAfterRender**事件）：

```
function onAfterRender() {
    // Exit if current page is from Administration panel
    if( JFactory::getApplication()->isAdmin()  ) return;

    /* your plugin main code goes here*/
} 
```

它将阻止您的插件修改管理面板输出。如果您已经完成了它并且它确实按照应有的方式进行了检查，那么您的问题的原因就不可能是那个插件。

# ios - 如何通过指向颜色名称的指针设置颜色？

> ID：15027080
> 
> 赞同：0
> 
> 时间：2013-02-22T15:05:17.680
> 
> 标签：ios, uicolor

正常的，我经常通过以下方式设置背景颜色：aView.backgroundColor = [UIColor redColor];

现在我将所有颜色名称保存在 NSArray 中：

```
colorsArray = [[NSMutableArray alloc] initWithObjects:
               @"blackColor",
               @"darkGrayColor",
               @"lightGrayColor",
               @"whiteColor",
               @"grayColor",
               @"redColor",
               @"greenColor",
               @"blueColor",
               @"cyanColor",
               @"yellowColor",
               @"magentaColor",
               @"orangeColor",
               @"purpleColor",
               @"brownColor",
               nil]; 
```

我想通过这样的 NSString 指针设置背景

```
NSInteger i = 0;
for (aView in viewArray) {
   NSString *colorName = [colorsArray objectAtIndex:i];
   aView.backgroundColor = color with colorName;//Can't find a method to set
   i++;
} 
```

我检查了 UIColor 类，但找不到任何使用指向 colorName 的指针设置颜色的方法。请帮忙！还有什么办法吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T15:07:56.353

稍微反思一下，药就下去了……

```
NSInteger i = 0;
for (aView in viewArray) {
    NSString *colorName = [colorsArray objectAtIndex:i];
    aView.backgroundColor = [[UIColor class] performSelector:NSSelectorFromString(colorName)];
   i++;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T15:08:58.737

```
aView.backgroundColor = [UIColor performSelector:NSSelectorFromString(colorName)]; 
```

# c# - 什么是命名空间“标准”？

> ID：15027084
> 
> 赞同：11
> 
> 时间：2013-02-22T15:05:33.240
> 
> 标签：c#, namespaces, using-directives

当我尝试编写一个新`using`子句时，我注意到 Intellisense 在其列表中有一个名为`Standard`. 然而，这似乎没有成员仔细检查。这个命名空间是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-22T15:18:05.857

PresentationFramework 程序集中有一个名为“标准”的命名空间。它的所有类型都是内部的，所以你看不到任何类型。但是，您仍然可以使用命名空间。

命名空间似乎出现在 4.5 参考程序集中，它没有出现在 4.0 中。

![在此处输入图像描述](../Images/1fc26a950a17df45edf1e7d7547a0243.png)

# javascript - 谷歌地理编码器为几个不同的地址返回相同的 lat/lng 集。Lat/Lng 是城市或乡镇的坐标，而不是地址

> ID：15027085
> 
> 赞同：0
> 
> 时间：2013-02-22T15:05:34.227
> 
> 标签：javascript, google-maps-api-3, maps, google-geocoder

我正在向 google.geocoder 发送几个地址，但 results[0].geometry.location 中的值都相同。我相信我已经使用回调解释了调用的异步性质。当我添加警报以查看返回的值时， geocoder.geocode( { 'address': addr }... 中传递的地址都是正确的，返回的状态是“ok”，但纬度/经度是相同的每次通话。我不太精通 JavaScript，并且是 .net 环境的新手，因此将不胜感激。

此代码从 2012 年 4 月 1 日到 2013 年 12 月或年初的某个时间一直运行良好。Google API 有什么变化吗？我查看了谷歌的网站，但找不到任何东西。

这是我最初的电话：

```
 <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>

<script type="text/javascript">   

 var geocoder;
 var map;
 var directionsDisplay;
 var directionsRenderer;
 var startPoint;
 var endPoint;

 function initialize() 
 {
  geocoder = new google.maps.Geocoder();

   codeAddress();
   var myOptions = 
   {
    zoom: 12,
    mapTypeId: google.maps.MapTypeId.ROADMAP
   }
    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);  

   var trafficLayer = new google.maps.TrafficLayer();
   trafficLayer.setMap(map);

   setMarkers(map);

   google.maps.event.addListener(map, 'click', function(event) {
   dirMarker(event.latLng);
   startPoint = event.latLng;
      });
  }

 function codeAddress() 
 {
   var address =  document.getElementById("<%=hCVT.ClientID%>").value;

   geocoder.geocode( { 'address': address}, function(results, status) {

     if (status == google.maps.GeocoderStatus.OK) {
      alert("Status: " + status + "res from CODE ADDRESS -- " +  results[0].geometry.location);  //TO REMOVE
     map.setCenter(results[0].geometry.location);
    } else {
      alert("Geocode of CVT was not successful for the following reason: " + status);
     }
   });
 } 
```

设置标记和信息窗口信息的功能（我删除了一些似乎与问题无关的代码）

```
 function setMarkers(map) 
    {
     // Add markers to the map

      var shape = {
      coord: [1, 1, 1, 20, 18, 20, 18 , 1],
      type: 'poly'
     };

  var places = new Array([,,,,]);
     var xx = String; 
     xx = document.getElementById("<%=addys.ClientID%>").value;
     var placeholder = xx.split(",");

     var latlng;

     var i = 0;
     for(var y = 0; y < (placeholder.length / 5 - 1); i=i+5)
     {

     places[y, 0] = placeholder[i];
     places[y, 1] = placeholder[i+1]; //Unit Status
     places[y, 2] = placeholder[i+2]; // Long - not used
     places[y, 3] = placeholder[i+3]; // Zindex
     places[y, 4] = placeholder[i+4]; // HTML for information window

     addr = places[y,0];
     ustat = places[y,1];   
     zind = places[y,3];
     iwdata = places[y,4];

     getLatLong(addr, iwdata, ustat, zind, function(latlng, addr, iwdata, ustat, zind)   {

var marker = new google.maps.Marker({
     position: latlng,
     map: map,
     html: iwdata,
     icon: pinImage,
     shadow: pinShadow,
     shape: shape,
     title: addr,
     zIndex: parseInt(places[y,3])
     });

   var infowindow = new google.maps.InfoWindow({
           content: iwdata}); 

  });

   y = y + 1;
  }

   } 
```

我认为问题所在的功能如下。由于有几个地址被发送到谷歌，我添加了一个内置的超时，以免超出限制。同样，这一切都工作了大约 8 个月，然后突然停止了。过去在地图上显示了几个标记，现在有一个标记似乎被覆盖了，因为 lat/lng 返回与 codeAddress() 函数中的初始调用相同。为了找到解决方案，我一直在添加警报以显示返回值。我对 bugzilla 的值感到困惑，因为它们会把我带到完全超出我想象的谷歌 javascript。

```
 function getLatLong(addr, iwdata, ustat, zind, callback){

       geocoder.geocode( { 'address': addr}, function(results, status){       
        if (status == google.maps.GeocoderStatus.OK){                       
          callback(results[0].geometry.location, addr, iwdata, ustat, zind);
            } else if (status == google.maps.GeocoderStatus.OVER_QUERY_LIMIT) {

             window.setTimeout(function() {self.getLatLong(addr, iwdata, ustat, zind, callback);
             },500);
            } else {
            alert("Address Geocode failure: " + addr + " ==== " + status + "Y value: " + zind + " res ---" + res);
            }
    });
    } 
```

谁能帮我这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:42:22.450

好吧，经过长时间盯着这段代码试图弄清楚，我终于偶然发现了一些使用巧妙放置的警报的东西。显然，addr 变量包含“'”，因此地理编码器无法提供 lat/lng 数据。调整了这一行：

```
addr = places[y,0].replace(/'/g, ""); 
```

现在一切正常。

# amazon-web-services - 动态添加临时大分区，然后删除

> ID：15027090
> 
> 赞同：0
> 
> 时间：2013-02-22T15:05:54.850
> 
> 标签：amazon-web-services, amazon-ec2

在 AWS EC2 实例上，我有一个大的（10 的 GiB）Solr 索引，我想每天备份。为此，我需要额外的 200 GiB 存储空间，持续约 6 分钟（复制、压缩包、然后在其他地方进行 FTP 并 rm 新目录和压缩包）。

有没有办法请求一个 200 GiB EBS 卷，然后挂载它，然后卸载它并将它从我们的帐户中删除，所有这些都来自 BASH 脚本或 Python 脚本？不同的方法（即不是 EBS）会更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T17:11:25.060

是的，可以通过脚本或使用各种 SDK 来配置和挂载 EBS 卷。

以下是使用命令行工具创建 EBS 卷的说明：

[http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ebs-creating-volume.html](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ebs-creating-volume.html)

以下是使用命令行工具附加卷的说明。

[http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ebs-attaching-volume.html](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ebs-attaching-volume.html)

最后，这里是删除卷完成后的说明：

[http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ebs-deleting-volume.html](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ebs-deleting-volume.html)

在所有情况下，只需向下滚动到“命令行工具”部分。

# active-directory - 如何从 Active Directory 查询中筛选空属性或空属性

> ID：15027094
> 
> 赞同：0
> 
> 时间：2013-02-22T15:06:24.037
> 
> 标签：active-directory, ldap

我正在与客户 Active Directory 合作，其中包含很多内容。有数百个用户的 givenName 和 sn 属性为空。我想从我的查询结果中过滤任何具有空 sn 或空 givenName 的记录，因为我的应用程序无法处理这些记录。

这符合我的要求，但我相信必须有更好的方法来做到这一点：

```
(&(objectClass=User)(|(!(!(sn=*))))(!(!(givenName=*))))) 
```

有没有更清晰简洁的方法可以通过 ldap 查询来完成此任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T13:19:08.120

`sn`并且`givenName`具有语法的`name`属性，即`DirectoryString`语法为`1.3.6.1.4.1.1466.115.121.1.15`。语法属性`DirectoryString`不允许为空，即 a`DirectoryString` 必须至少有一个字符。

过滤器`sn=*`是一个`present`过滤器（不是子字符串或正则表达式），这意味着如果`sn`属性不存在（如果存在，它必须至少有一个字符），则条目将被从可能的搜索结果中过滤掉。对`givenName=*`.

一个更简单的过滤器可能是`'(&)'`，其中搜索请求在其要返回的属性列表中包含以下内容：`@User`，它将返回`User`objectClass 中与过滤器匹配的每个条目的所有属性，然后让应用程序从每个条目中提取`sn`和`givenName`属性即返回。如果返回的条目数很大，请使用 Simple Paged Results Request Control 将返回的条目数限制为更易于管理的值。

或者......它可能是 Active Directory 不符合 LDAP 并且不`inetOrgPerson`正确支持其中的 objectClass 和属性语法，并且*确实*允许属性的空值或`null`属性值`DirectoryString`，尽管我无法想象 Microsoft 会提供不兼容的产品符合 LDAP。

### 也可以看看

*   [LDAP 编程实践](http://www.ldapguru.info/ldap/ldap-programming-practices.html)
*   [RFC 4519](https://www.rfc-editor.org/rfc/rfc4519)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-30T14:57:11.647

(!(!(givenName=*))) = (!givenName=*)

[https://technet.microsoft.com/en-us/library/ee198810.aspx](https://technet.microsoft.com/en-us/library/ee198810.aspx)

# c# - C#中链表的大小

> ID：15027100
> 
> 赞同：3
> 
> 时间：2013-02-22T15:06:43.200
> 
> 标签：c#, linked-list, size

我正在将 Java 程序移植到 C#。

在 Java 中获得`LinkedList<T>`我做的大小：

`int size = list.size();`

但是，我在 C# 中找不到类似的方法。我知道链表的重点不是知道它的大小，但由于我将它用作缓冲区，因此在列表内部有一个计数器以返回其大小是个好主意。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-22T15:08:07.273

您想使用该[`Count`](http://msdn.microsoft.com/en-us/library/t56y0h99.aspx)属性。

此外，`LinkedList`implements `IEnumerable`，因此该接口的所有方法也是可用的，包括`Count()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T15:10:14.117

您是否尝试过 Count 属性？[http://msdn.microsoft.com/en-us/library/t56y0h99.aspx](http://msdn.microsoft.com/en-us/library/t56y0h99.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-22T15:15:49.317

在 C# 中，与 Java*大小*等效的是数组中的*长度和实现**ICollection*接口的对象中的*计数。*Arrays 也包含*Count*但它是显式实现的，并且需要转换为*ICollection*。还有一个*IEnumerable*接口，由所有允许迭代其元素的对象实现。*IEnumerable包含名为**Count()*的扩展方法。请注意，它是一种方法，而不是属性。一些真实的集合还公开了*容量*属性，该属性指示为元素分配了多少内存。*容量*********总是大于或等于*Count*。如果您的列表很大，您可以使用*IEnumerable中的**LongCount()*方法。请注意，*IEnumerable中的**Count()*方法还允许对满足给定条件的元素进行计数。这可能有用。********

 ***样品：

```
LinkedList<string> linkedList = new LinkedList<string>();

int32 size3 = linkedList.Count; // From ICollection
int32 size2 = linkedList.Count(); // From IEnumerable
int64 bigSize = linkedList.LongCount(); // From IEnumerable

int32 size4 = linkedList.Count(s => s == "a"); // Count only strings equals "a" 
```

如需进一步阅读，请参阅：[System.Collections 命名空间](http://msdn.microsoft.com/en-us/library/gg145035.aspx)，其中包含有关常见 .NET 集合的所有信息。***

# macos - 在现有 TortoiseSVN 存储库上集成 Mac 计算机

> ID：15027101
> 
> 赞同：0
> 
> 时间：2013-02-22T15:06:48.717
> 
> 标签：macos, tortoisesvn, repository

我们目前正在使用 TortoiseSVN 对我们的许多网站进行版本控制。到目前为止只有 Windows 用户，但我们正在添加另一个使用 Mac 的开发人员。有没有可以与我们已有的 TortoiseSVN 存储库集成的 Mac 程序？

请不要回复 SVN 客户端在 Mac 上使用的建议。我正在寻找一种适用于现有存储库的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T15:34:27.250

**它可以工作，但不推荐、强烈建议和不支持**通过文件共享访问存储库。从[TortoiseSVN 手册](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-repository.html#tsvn-repository-local-share)l:

> 尽管理论上可以将 FSFS 存储库放在网络共享上并让多个用户使用 file:// 协议访问它，但绝对不推荐这样做。事实上，我们强烈反对它，并且不支持这样的使用。
> 
> 首先，您授予每个用户对存储库的直接写入权限，因此任何用户都可能意外删除整个存储库或以其他方式使其无法使用。
> 
> 其次，并非所有网络文件共享协议都支持 Subversion 所需的锁定，因此您可能会发现您的存储库已损坏。它可能不会立即发生，但有一天会有两个用户尝试同时访问存储库。
> 
> 第三，必须如此设置文件权限。您可能会在本机 Windows 共享上侥幸逃脱，但 SAMBA 尤其困难。
> 
> file:// 访问仅用于本地单用户访问，尤其是测试和调试。当您想要共享存储库时，您确实需要设置一个合适的服务器，这并不像您想象的那么困难。阅读名为“访问存储库”的部分，了解有关选择和设置服务器的指南。

换句话说：不要。设置一个通过 SSH 或 HTTP 访问的适当存储库，然后任何客户端都可以工作。

# python - 同时从 2 个文件中读取每 4 行

> ID：15027103
> 
> 赞同：2
> 
> 时间：2013-02-22T15:07:00.307
> 
> 标签：python, text-processing

我正在处理较大的文本文件（10 MB gzip）。总是有 2 个文件属于一起，长度和结构都相同：每个数据集 4 行。

我需要同时处理两个文件中每个 4 块中第 2 行的数据。

我的问题：最省时的方法是什么？

现在我正在这样做：

```
def read_groupwise(iterable, n, fillvalue=None):
    args = [iter(iterable)] * n
    return itertools.izip_longest(fillvalue=fillvalue, *args)

f1 = gzip.open(file1,"r")
f2 = gzip.open(file2,"r")
for (fline1,fline2,fline3,fline4), (rline1, rline2, rline3, rline4) in zip(read_groupwise(f1, 4), read_groupwise(f2, 4)):
    # process fline2, rline2 
```

但由于我只需要每个 line2，我猜可能有更有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T15:45:23.793

我建议直接使用[itertools.izip_longest](http://docs.python.org/2/library/itertools.html#itertools.izip_longest)压缩文件的内容，并使用[itertools.islice](http://docs.python.org/2/library/itertools.html#itertools.islice)从第 2 行开始选择每四个元素

```
>>> def get_nth(iterable, n, after=1, fillvalue = ""):
    return islice(izip_longest(*iterable,fillvalue=fillvalue), n, None, after)

>>> with gzip.open(file1, "r") as f1, gzip.open(file2, "r") as f2:
    for line in get_nth([f1, f2], n = 2):
        print map(str.strip, line) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T15:20:58.640

这可以通过构建自己的生成器来完成：

```
def get_nth(iterable, n, after=1):
    if after > 1:
        consume(iterable, after-1)
    while True:
        yield next(iterable)
        consume(iterable, n-1)

with gzip.open(file1, "r") as f1, gzip.open(file2, "r") as f2:
    every = (4, 2)
    for line_f1, line_f2 in zip(get_nth(f1, *every), get_nth(f2, *every)):
        ... 
```

生成器前进到要给出的第一个项目（在这种情况下，我们想要第二个项目，所以我们跳过一个将迭代器放在第二个项目之前），然后产生一个值，然后前进到下一个项目之前. 这是完成手头任务的一种非常简单的方法。

这里使用[`consume()`from `itertools`' recipes](http://docs.python.org/3/library/itertools.html#itertools-recipes)：

```
def consume(iterator, n):
    "Advance the iterator n-steps ahead. If n is none, consume entirely."
    # Use functions that consume iterators at C speed.
    if n is None:
        # feed the entire iterator into a zero-length deque
        collections.deque(iterator, maxlen=0)
    else:
        # advance to the empty slice starting at position n
        next(islice(iterator, n, n), None) 
```

最后一点，我不确定是否`gzip.open()`提供了上下文管理器，如果没有，您将要使用`contextlib.closing()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T05:52:01.073

如果您有记忆，请尝试：

```
ln1 = f1.readlines()[2::4]
ln2 = f2.readlines()[2::4]
for fline, rline in zip(ln1, ln2):
    ... 
```

但前提是你有记忆。

# c# - asp..net中的CKeditor

> ID：15027104
> 
> 赞同：0
> 
> 时间：2013-02-22T15:07:08.797
> 
> 标签：c#, asp.net, ckeditor

```
<%@ Register assembly="CKEditor.NET" namespace="CKEditor.NET" tagprefix="CKEditor" %>
 <div class="main" style="height:400px; padding-top:30px;">
      <CKEditor:CKEditorControl ID="CKEditorControl1" runat="server">
             </CKEditor:CKEditorControl>
  </div> 
```

我尝试在 asp.net 中使用 CKeditor，在添加引用 .dll 之后，我创建了这个 CKeditor，但它显示了小文本区域，而不是我希望的 CKeditor。我使用版本 ckeditor_aspnet_3.6.4。版本有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-11T11:30:08.660

只需在增加 div => "main" 的高度和宽度后查看并检查...

# .net - 从二进制写入器接收数据到网络流

> ID：15027105
> 
> 赞同：1
> 
> 时间：2013-02-22T15:07:10.183
> 
> 标签：.net, vb.net, networkstream, binarywriter

这可以被认为是我之前[线程的延续。](https://stackoverflow.com/questions/14978965/previous-data-remains-on-the-network-stream)

我在我的文件共享应用程序上做了一些开发和修复，但现在我面临另一个问题。我想这个并不难，只是我目前的脑力已经耗尽来解决这个问题。我相信这可以以更好的方式完成。

**这是我收到的错误的屏幕截图。**

![](../Images/590359e6543b43636cbaf17c3e2ddb70.png)

正如您在屏幕截图中看到的那样，`FileName`变量中有一些值。它是我要发送的文件的名称。如果您注意到，变量包含*ello.cpp*，它必须是*hello.cpp*。*hello.cpp*是正在发送的文件的名称。尾随字符是文件的内容。尾随字符不再是问题，只要我能正确解决这个问题，文件名将是唯一存储在变量中的一个。

该错误发生在网络流的读取过程中。我想要实现的是，我想防止网络流在不是日志消息时被读取。我需要把它放在`networkstream.read`某个地方，这样它就不会占用文件的第一个字母。也许某种过滤？或者，如果可能只有一个代码可以获取日志消息和文件名，那就太好了。文件名是使用二进制写入器发送的，我尝试使用网络流来检索文件名，但它不起作用。我在这里错过了什么吗？

**这是服务器部分的代码。**

```
 Try

        While FileSharingStarted

            If CBool(ClientSocket.Available) Then

                Dim ByteData(ClientSocket.ReceiveBufferSize) As Byte

                'This reading of the stream here causes the problem. That's why the
                'file name isn't read properly. This reading part here is actually
                'intended for the logging part. What happens is that when the string
                'for the logging part is sent by the client side, this is being read
                'using this. But when a file is sent, it is read here in this part
                'that's why when the algorithm for retrieving the file name below
                'kicks in, the first letter of the file name is missing, and ruins
                'the whole thing.
                networkStream.Read(ByteData, 0, CInt(ClientSocket.ReceiveBufferSize))

                fileLogMessage = Encoding.ASCII.GetString(ByteData)
                Dim ConnectionStatus() As String
                ConnectionStatus = fileLogMessage.Split(CChar(" "))

                If fileLogMessage.Contains("is connected." & Environment.NewLine) Then

                    'Creates a log when the user connects.

                ElseIf fileLogMessage.Contains("is disconnected." & Environment.NewLine) Then

                   'Creates a log when the user disconnects.

                Else

                    'Algorithm for receiving the files.

                    Dim FileName, FilePath As String
                    Dim FileLength As Long

                    'This part here conflicts with the `networkstream.read` above
                    Dim binaryReader As New BinaryReader(ClientSocket.GetStream)
                    FileName = binaryReader.ReadString()
                    FileLength = binaryReader.ReadInt64()
                    FilePath = Path.Combine(System.Environment.CurrentDirectory & "\home", FileName)

                    Dim FileData(8092) As Byte
                    Dim TotalData As Long = 0
                    Dim ReadBytes As Integer = -1

                    Using fileStream As New FileStream(FilePath, FileMode.Create, FileAccess.Write)

                        FileSharingStatusBar.Panels.Item(1).Text = "Receiving file . . ."

                        Do Until TotalData = FileLength

                            If ReadBytes = 0 Then
                                fileStream.Close()
                                FileTransferInterrupted = True
                                Exit Do
                            Else
                                ReadBytes = ClientSocket.GetStream.Read(FileData, 0, FileData.Length())
                                fileStream.Write(FileData, 0, ReadBytes)
                                TotalData += ReadBytes
                            End If

                        Loop

                    End Using

                    If FileTransferInterrupted Then

                        MessageBox.Show("File transfer interrupted.", "Message", MessageBoxButtons.OK, MessageBoxIcon.Information)
                        FileSharingStatusBar.Panels.Item(1).Text = "Idle."

                    Else

                        MessageBox.Show("File received.", "Message", MessageBoxButtons.OK, MessageBoxIcon.Information)
                        FileSharingStatusBar.Panels.Item(1).Text = "Idle."

                    End If

                End If

            End If

        End While 
```

**这是客户端的代码。**

```
Try

        Dim fileInfo As New FileInfo(txtFilePath.Text)
        Dim binaryWriter As New BinaryWriter(fileClientSocket.GetStream())

        'Here's the part where it writes the file name on the
        'stream using the binary writer
        binaryWriter.Write(fileInfo.Name)
        binaryWriter.Write(fileInfo.Length)

        Using fileStream As New FileStream(txtFilePath.Text, IO.FileMode.Open, IO.FileAccess.Read)

            Dim FileData(8092) As Byte
            Dim ReadBytes As Integer = -1
            FileSharingStatusBar.Panels.Item(1).Text = "Sending file . . ."

            Do Until ReadBytes = 0

                If CBool(fileClientSocket.Available) Then

                    MessageBox.Show("File transfer interrupted.", "Message", MessageBoxButtons.OK, MessageBoxIcon.Information)
                    Exit Sub

                Else

                    ReadBytes = fileStream.Read(FileData, 0, FileData.Length)
                    fileClientSocket.GetStream.Write(FileData, 0, ReadBytes)

                End If

            Loop

        End Using

        txtFilePath.Text = ""
        MessageBox.Show("File sent.", "Message", MessageBoxButtons.OK, MessageBoxIcon.Information)
        FileSharingStatusBar.Panels.Item(1).Text = "Idle."

    Catch ex As Exception

        MessageBox.Show(ex.Message, "Message", MessageBoxButtons.OK, MessageBoxIcon.Information)

End Try 
```

建议将不胜感激。

提前致谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:24:47.540

我建议始终读取网络流中的所有数据并将其附加到通信缓冲区/队列中。每次向队列追加更多数据时，分析整个队列中的数据以查看它是否包含任何完整的消息。如果是这样，请将它们从队列中删除，然后处理它们。例如，您可以创建一个实现如下接口的类：

```
Public Interface IIncomingDataBuffer
    Sub Append(ByVal data() As Byte)
    Event MessageReceived As EventHandler(Of MessageEventArgs)
End Interface 
```

如果消息是固定宽度或由预定义的分隔符分隔，则更容易实现此类功能。另外，我建议在每条消息的开头有一个标题块，如果没有别的，它包含一个消息类型字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T09:47:40.593

我想出了如何解决它。感谢我在 facebook 上的一位朋友的建议，一位程序员。我所做的是发送一些字符串，指示服务器部分接收文件。现在一切都好。:)

我还要感谢 Steven Doggart 所做的所有努力和建议，尤其是关于 SOAP。

非常感谢好先生！:)

# objective-c - 声音按钮不起作用？COCOS2D

> ID：15027108
> 
> 赞同：1
> 
> 时间：2013-02-22T15:07:18.973
> 
> 标签：objective-c, cocos2d-iphone, simpleaudioengine

我试过这段代码它不起作用，我希望按钮在单击时播放声音。

```
-(void)starButtonsound:(id)sender
{
    [[SimpleAudioEngine sharedEngine] playEffect:@"fire_truck_1.wav"];
} 
```

在初始化

```
starMenuItemsound = [CCMenuItemImage
                    itemWithNormalImage:@"play.png" selectedImage:@"play.png"
                    target:self selector:@selector(starButtonsound:)];
starMenuItemsound.position = ccp(525, 500);
[self addChild:starMenuItemsound z: 4];
starMenuItemsound.scale = 0.75; 
```

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:13:42.473

A)[设置断点](http://developer.apple.com/library/ios/documentation/ToolsLanguages/Conceptual/Xcode_User_Guide/060-Debug_and_Tune_Your_App/debug_app.html#//apple_ref/doc/uid/TP40010215-CH3-SW38)——任何程序员的必备知识。

B) CCMenuItemImage 选择器不带参数。删除冒号`@selector(startButtonSound)`并将方法更改为：

```
-(void)starButtonsound
{
    [[SimpleAudioEngine sharedEngine] playEffect:@"fire_truck_1.wav"];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T15:25:43.110

有人报告说这是一个解决方案：关闭并再次打开声音（不是开玩笑）

```
[SimpleAudioEngine sharedEngine].muted = YES;
[SimpleAudioEngine sharedEngine].muted = NO; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T15:31:59.760

在初始化

```
{
  // Using SpriteSheet ? Use spriteWithSpriteFrameName in place of spriteWithFile
       CCSprite *spriteNormal   = [CCSprite spriteWithFile:@"play.png"];
       CCSprite *spriteSelected   = [CCSprite spriteWithFile:@"play.png"];
       ccColor3B color = {128,128,128};
       spriteSelected.color = color;

       starMenuItemsound = [CCMenuItemImage
                        itemWithNormalSprite: spriteNormal selectedImage: spriteSelected
                        target:self selector:@selector(starButtonsound:)];
       starMenuItemsound.position = ccp(525, 500);
       starMenuItemsound.scale = 0.75;

       CCMenu *menu = [CCMenu menuWithItems: starMenuItemsound, nil];
       menu.position = ccp(0.0f,0.0f);
       [self addChild: menu z:4];
  } 
```

调用函数：

```
-(void) starButtonsound:(id)sender
{
    [[SimpleAudioEngine sharedEngine] setEffectsVolume:1.0f]; //Do this in init method
    [[SimpleAudioEngine sharedEngine] playEffect:@"fire_truck_1.wav"];
} 
```

# php - phpinfo.php 上的 HTTP 错误 500

> ID：15027109
> 
> 赞同：0
> 
> 时间：2013-02-22T15:07:23.883
> 
> 标签：php, mysql, iis-7, windows-server-2008-r2

我刚刚在 Windows Server 2008 R2 上安装了 MySQL。
我按照以下说明进行操作：[在 IIS7 上为 PHP 应用程序安装和配置 MySQL][1]

当我要检查 phpinfo.php 时，我收到错误 500。这是我在 Windows 2008 R2 服务器上使用 RDP 时拍摄的屏幕截图。[http://i.stack.imgur.com/hW7qG.png](http://i.stack.imgur.com/hW7qG.png)

我不知道是什么导致了这个错误。而且我绝对不知道如何解决这个问题。
这是 IIS 为今天制作的错误日志：[http](http://s000.tinyupload.com/?file_id=11719906829973224437)
://s000.tinyupload.com/?file_id=11719906829973224437 我用谷歌搜索过，但我的问题没有解决方案。

我有 PHP 管理器，它没有显示任何表明 PHP 配置存在问题的消息。

知道如何解决这个问题，以便我可以继续为我的公司开发网站吗？

# java - 在 Eclipse 中以编程方式停止和启动 JBoss

> ID：15027113
> 
> 赞同：7
> 
> 时间：2013-02-22T15:07:47.953
> 
> 标签：java, eclipse, jboss, jboss5.x

是否可以在 Eclipse 中以编程方式启动和停止 JBoss？我正在使用 Indigo Eclipse Java EE，我有一个 JBoss 5.1.0.GA 服务器，我在 Eclipse 中手动启动/停止。

我想自动重新启动服务器（作为重新启动服务器以反映数据库更改的测试过程的一部分）。是否有一些库可以用来执行此操作，或者有其他方法可以完成此操作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T15:17:55.867

使用执行关闭（bat 或 sh）然后运行（bat 或 sh）的脚本创建一个 .bat 或 .sh 文件（取决于安装 JBoss 实例的操作系统）。无需为此使用 Java 或任何其他编程语言。

不过，如果您真的*想*使用 Java 执行此操作，您可以使用其中一种方法（同样，取决于操作系统）：

批处理文件：

*   [如何从我的 Java 应用程序运行批处理文件？](https://stackoverflow.com/q/615948/1065197)

外壳文件：

*   [Java - 执行一个 .SH 文件](https://stackoverflow.com/q/10422869/1065197)
*   [在不同的目录中使用 Java 的 exec 运行 .sh 文件？](https://stackoverflow.com/q/10093985/1065197)

请注意，*运行*和*停止*脚本文件位于 [JBoss_install_path]/bin

# php - 使用 Jquery 和 PHP 发布和检索多个文本框值

> ID：15027116
> 
> 赞同：0
> 
> 时间：2013-02-22T15:07:58.360
> 
> 标签：php, jquery, post, http-post

我有可以创建多个文本框的 Jquery 代码。现在，我想提交我的文本框的值，以便我可以在下一页使用 PHP 获取它们。我想以与 ()
和第二页，我可以使用 POST 方法获取值。在这种情况下如何发布多个文本值以及如何使用 php 在下一页上检索它们？请帮助，因为我是一只新蜜蜂。

**代码：**

```
<head>
  <script type="text/javascript">

  $(document).ready(function(){

var counter = 2;

$("#addButton").click(function () {

if(counter>10){
        alert("Only 10 textboxes allow");
        return false;
}   

var newTextBoxDiv = $(document.createElement('div'))
     .attr("id", 'TextBoxDiv' + counter);

newTextBoxDiv.after().html('<label>Textbox #'+ counter + ' : </label>' +
      '<input type="text" name="textbox' + counter + 
      '" id="textbox' + counter + '" value="" >');

newTextBoxDiv.appendTo("#TextBoxesGroup");

counter++;
 });

    $("#removeButton").click(function () {
if(counter==1){
      alert("No more textbox to remove");
      return false;
   }   
  counter--;          $("#TextBoxDiv" + counter).remove(); });
       $("#getButtonValue").click(function ()
  {
   var msg = '';
  for(i=1; i<counter; i++){
  msg += "\n Textbox #" + i + " : " + $('#textbox' + i).val();
  }

  alert(msg);
    });
    });
     </script>
    </head><body>

 <div id='TextBoxesGroup'>
<div id="TextBoxDiv1">
      <label>Textbox #1 : </label><input type='textbox' id='textbox1' >
</div>
  </div>
  <input type='button' value='Add Button' id='addButton'>
  <input type='button' value='Remove Button' id='removeButton'>
  <input type='button' value='Get TextBox Value' id='getButtonValue'> 
  </body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T15:17:06.330

尝试将文本框命名为数组，
例如 input type='textbox' name='textbox[]' id='textbox1'
并在 PHP 页面上以数组
$arrayRequest = $_REQUEST['textbox'];的形式访问它

# matlab - 在 MatLab 中修剪二进制矩阵

> ID：15027117
> 
> 赞同：6
> 
> 时间：2013-02-22T15:08:02.047
> 
> 标签：matlab

我有一个像这样的二进制矩阵：

```
0 0 0 0 0 0
0 0 0 1 0 0
0 1 0 0 0 0
0 0 1 0 1 0
0 0 0 1 0 0
0 0 0 0 0 0 
```

我想修剪这个矩阵（换句话说，删除边界处的零）就像：

```
0 0 1 0
1 0 0 0
0 1 0 1
0 0 1 0 
```

如何以“Matlab”的方式做到这一点？那**不是使用传统的循环和条件**。

**为了更清楚**，矩阵应该减少到从至少有一个的第一列开始`1`，并在具有相同条件的最后一列结束，包括在内。应删除此范围之外的任何列。相同的规则适用于行。

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-22T15:21:55.993

如果您有矩阵中的数据`M`...

```
x = find(any(M,2),1,'first'):find(any(M,2),1,'last');
y = find(any(M),1,'first'):find(any(M),1,'last');
M(x, y) 
```

或者，如果您知道除了边缘之外的每一行/列中都会有一个 1：

```
M(any(M,2), any(M)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-06T10:41:47.267

扩展到更高维度：

假设要修剪 3D 矩阵，这更简单：

```
M=rand(3,3,3); % generating a random 3D matrix
M(2,:,:)=0; % just to make a check if it works in extreme case of having zeros in the         middle

padded = padarray(M,[2 2 2]); % making some zero boundaries

[r,c,v]=ind2sub(size(padded),find(padded));

recoveredM=padded(min(r):max(r),min(c):max(c),min(v):max(v));

check=M==recoveredM  % checking to see if M is successfully recovered 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T15:35:17.323

`find`您可以使用可以返回行和列索引的事实：

```
[r1, c1] = find(x, 1, 'first')
[r2, c2] = find(x, 1, 'last')
x(r1:r2, c1:c2) 
```

# jquery - 这个 .data 函数在这个 jQuery 自动完成中做了什么

> ID：15027132
> 
> 赞同：0
> 
> 时间：2013-02-22T15:08:32.593
> 
> 标签：jquery, jquery-ui

在下面的这个小片段中，我在网上找到了解决我的一个问题的方法，我看到 .data("item.autocomplete",item) 被用作自定义 UI 自动完成小部件的标准部分。我一生都无法弄清楚这里发生了什么。覆盖私有 _renderItem 方法的文档非常有限。除了那条线，我得到了一切。也许是链接让我感到困惑。我将 .data() 作为元素的基本缓存存储。但是，我的 jQuery 肯定生锈了。

```
$('#name_search').autocomplete({
        source: "search/name.php"
        }).data( "autocomplete" )._renderItem = function( ul, item ){
            return $( "<li></li>" )
            //what is this line below?                
            .data( "item.autocomplete", item )
            .append( "<a>" + item.nome + "<br>" + item.cognome + "</a>" )
            .appendTo( ul );
        }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T15:17:54.010

```
.data("item.autocomplete",item) 
```

`li`这会在自动完成使用的菜单中生成的 s 上设置数据（当前正在呈现的建议​​项） 。该数据稍后用于确定您在建议菜单中与哪个项目进行交互（例如，通过`select`事件或`focus`事件）。

如果您不设置此数据，自动完成将不知道该特定`li`项与特定建议项相关联。

# jsf-2 - JSF 2 + Primefaces：需要在渲染对话框之前在菜单单击上更新 bean 属性

> ID：15027133
> 
> 赞同：2
> 
> 时间：2013-02-22T15:08:33.933
> 
> 标签：jsf-2, primefaces

我有 ap:menuitem 需要 (1) 单击时更新支持 bean 属性，然后 (2) 显示 ap:dialog。

这是我的设置：

```
<p:menuitem value="Show Dialog"
            oncomplete="dialog_widget.show();"
            update=":dialog"
            actionListener="#{bean.setCurrentAction}">
</p:menuitem>

<p:dialog widgetVar="dialog_widget" id="dialog" dynamic="true">
     <h:form>
        <p:inputText value="#{bean.record.text} />
     // the proper rendering of this dialog form depends on bean.currentAction
     // being set during JSF Phase 4 Update Model Values

</p:dialog> 
```

和支持bean：

```
public R getRecord() {
    if (currentAction == null) {
        return null;
    }
    return currentAction == NEW ? newRecord : selectedRecord;
} 
```

问题是 actionListeners 和动作只在第 5 阶段执行，我需要在此之前设置 bean.currentAction 以便可以正确更新和呈现对话框。

** 我想要实现的一些背景知识：对话框表单用于创建新记录以及更新现有记录（添加和编辑对话框）。因此 bean 上的“currentAction”指示用户正在执行的操作。根据哪个动作，表单需要使用不同的模型对象（“newRecord”或“selectedRecord”）来拉取和保存表单数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T17:33:58.350

默认情况下，在“调用应用程序”阶段调用操作。您可以在标签中添加`immediate="true"`属性。`p:menuitem`这将在“应用请求值”阶段调用操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T15:19:29.310

虽然不是一个非常优雅的解决方案，但您可以使用 PrimeFaces 的 RequestContext 的 update 方法来设置更新目标，并在设置所需的属性后使用 execute 方法在您的 actionListener 中显示您的对话框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T16:54:17.927

如果您要求在对话框打开之前调用支持 bean 方法，那么您可以使用 ajax 函数（我不知道您是否可以在应用程序中使用 ajax）。对于 p:menuItem 有一个名为**onclick**的函数，您可以在其中调用**a4j:ajax**函数，通过该函数您可以调用支持 bean 方法并在对话框打开之前更新模型。

# javascript - 在两个标记之间替换 URL 中的 ID

> ID：15027136
> 
> 赞同：1
> 
> 时间：2013-02-22T15:08:43.083
> 
> 标签：javascript, jquery, regex

我有一个如下所示的网址：

```
<a href="http://url/images/1034749-184e-3467-87e0-d7546df59896?w=600&amp;r=22036"></a> 
```

我想替换：`1034749-184e-3467-87e0-d7546df59896`用另一个 ID，是否有任何正则表达式或类似的替换方法可以让我使用 JavaScript 在“ `image/`”和“ `?`”字符之间替换 ID？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T15:11:08.527

你可以做这个近似表达式：

```
/[0-9a-z]+(?:-[0-9a-z]+){4}/i 
```

匹配一堆十六进制，然后是 4 个部分，每个部分以破折号开头，后跟一堆十六进制。

```
> var s = 'http://url/images/1034749-184e-3467-87e0-d7546df59896?w=600&amp;r=22036';
> console.log(s.replace(/[0-9a-z]+(?:-[0-9a-z]+){4}/i, 'something-else'));

http://url/images/something-else?w=600&amp;r=22036 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T15:13:26.920

`/images\/[^?]+/`会匹配，但它也会替换`images/`。

幸运的是，您可以将回调传递给[`.replace`](https://developer.mozilla.org/en/docs/JavaScript/Reference/Global_Objects/String/replace)：

```
url.replace(/(images\/)[^?]+/, function($match, $1) {
    // results in "images/<some-ID>" 
    return $1 + theNewId;
}); 
```

* * *

如果你有对 DOM 元素的引用，你也可以只替换路径的最后一步：

```
element.pathname = 
  element.pathname.substring(0, element.pathname.lastIndexOf('/') + 1) + newId; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T15:13:00.083

是的，只需这样做：

```
var url = document.getElementById("yoururlid").src;
url = url.split("/");
var newUrl = url[0] + url[1] + url[2] + url[3] + newURLID; 
```

为什么不这样做：

```
document.getElementById("yoururlid").src="http://url/images/" + newId + "?w=600&amp;r=22036"; 
```

# python - 全局字典，不是所有线程都向它添加键吗？

> ID：15027137
> 
> 赞同：1
> 
> 时间：2013-02-22T15:08:45.023
> 
> 标签：python, global-variables

我对 Python 中的全局变量感到困惑。有时一个全局变量在我的程序的所有实例之间共享，有时一个实例会创建它自己的全局变量版本。

我需要的是有一个处理程序来处理放入全局字典中的项目。只有一个函数可以将项目添加到全局字典中，但该函数会同时运行多次。

在视图中：

```
global_dict = {}

def handler():
    global global_dict 

    print "Starting handler"
    while True:
        local_dict = dict(global_dict) 
        for key, v in local_dict.iteritems():
            handle_the_item(v)
            del global_dict[key]
            print "Handled: ", key
        time.sleep(0.05)

def some_function(function_number)
    global global_dict

    print "Starting function", function_number
    for x in y:
        key = random.randint(0, 5000000)
        print function_number, "giving to handler:", key
        global_dict[key] = some_item 
```

我开始：

（我使用 Django，所以每个函数都是通过调用带有一些参数的 url 来启动的）

```
handler()
some_function(1)
some_function(2)
some_function(3) 
```

它打印：

```
Starting handler
Starting function 1
Starting function 2
Starting function 3

1 giving to handler 111111
2 giving to handler 222222
3 giving to handler 333333
1 giving to handler 444444
2 giving to handler 555555
3 giving to handler 666666

Handled: 111111
Handled: 222222
Handled: 444444
Handled: 555555 
```

处理程序从不处理函数 3 添加的项目。据我所知，这是因为处理程序和函数 3 都有自己的（假定的）全局变量 global_dict 的实例。我还通过在 some_function() 中打印出 global_dict 的长度来验证这一点。随着更多项目的添加，函数 3 中的 global_dict 不断增长。

请注意，哪些函数共享 global_dict 实例以及哪些函数拥有自己的实例是随机的。如果我停止一切并再次运行它，可能是所有实例共享 global_dict。或者没有。或 3 和 1 以及处理程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T20:49:32.450

当您在 Web 服务器后面运行 Django 等应用程序时，Web 服务器通常会将您的应用程序的多个实例作为单独的长进程运行。如果多个请求一起出现，它们将分布在应用程序进程中。

这意味着您不能依赖在请求之间共享的全局变量。您可能很幸运，请求进入了同一个进程，或者您可能很不幸，不同的请求进入了应用程序的不同实例。

如果您需要在 Web 请求之间共享状态，那么您应该使用其他一些机制，例如数据库或 memcached。

# android - 在 Android 中关闭对话框时出错

> ID：15027139
> 
> 赞同：0
> 
> 时间：2013-02-22T15:08:47.630
> 
> 标签：android, dialog, dismiss

当我在对话框中按取消（Vazgeç）按钮时，它会消失。但是当我再次按下它时，就会出现错误。我想我无法关闭对话。这是我的代码：

```
sifrePencere.setTitle("Çıkış");
sifrePencere.setMessage("Uygulamayı kapatmak için lütfen şifreyi giriniz:");
sifrePencere.setView(sifre);

sifrePencere.setPositiveButton("Tamam", new DialogInterface.OnClickListener() {
    @Override
    public void onClick(DialogInterface dialog, int which) {

        String girilenSifre = sifre.getText().toString();

        SQLiteDatabase db = vt.getReadableDatabase();

        Cursor kayit = db.rawQuery("SELECT sifre FROM CocukTableti", null);
        kayit.moveToFirst();

        if (girilenSifre.equals(kayit.getString(0))) {

            android.os.Process.killProcess(android.os.Process.myPid());

        } else {

            dialog.dismiss();
            Toast.makeText(getApplicationContext(), "Girilen şifre hatalı!", Toast.LENGTH_SHORT).show();

        }

    }
});

sifrePencere.setNegativeButton("Vazgeç", new DialogInterface.OnClickListener() {
    @Override
    public void onClick(DialogInterface dialog, int which) {

        dialog.dismiss();

    }
});

sifrePencere.show(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:48:00.543

从您的取消按钮减速中删除`dialog.dismiss();`，您的问题将得到解决。

# c++ - 在 CoreFoundation 中查找从标准到夏令时的转换日期/时间，反之亦然

> ID：15027141
> 
> 赞同：1
> 
> 时间：2013-02-22T15:08:53.170
> 
> 标签：c++, macos, datetime, timezone, core-foundation

我正在尝试使用 CoreFoundation 复制 Windows 函数[GetTimeZoneInformation](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms724421%28v=vs.85%29.aspx)的功能，该函数填充[TIME_ZONE_INFORMATION](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms725481%28v=vs.85%29.aspx)结构。我制作了一个函数，可以将 a`CFAbsoluteTime`和 a`CFTimeZoneRef`转换为 a 的等价物`SYSTEMTIME`，但是还有一些其他的事情我不太清楚。例如：

*   `StandardDate`和`DaylightDate`：我已经使用该`CFTimeZoneGetNextDaylightSavingTimeTransition`函数来查找下一个转换，并`CFTimeZoneIsDaylightSavingTime`确定这是哪个转换，但由于`TIME_ZONE_INFORMATION`需要两个日期，我将如何找到下一个转换*后*的转换？
*   同样，`DaylightBias`- 如果我们当前处于 DST 中，我可以使用它`CFTimeZoneGetDaylightSavingTimeOffset`来查找偏移量，但如果我们当前不在 DST 中，则该值变为零。我知道它几乎总是-60，但我希望这个功能完全忠实于 Windows 功能。

有谁知道一个好的解决方案？

# ios - UIScrollView在ios6中不滚动

> ID：15027150
> 
> 赞同：3
> 
> 时间：2013-02-22T15:09:20.967
> 
> 标签：ios, objective-c, uiscrollview

在我的`UIViewController`我有一个`UIScrollView`和`UIView`。这是两种不同的看法，意思`UIView`是不在里面`UIScrollView`。我对滚动视图有不同的看法，我正在以编程方式设置并增加`contentSize`。这`UIView`是隐藏的，我有时会显示。问题是当我隐藏它时`UIView`，它会`UIScrollView`停止滚动。

为什么会这样？

我已将所有前沿设置为两者的超级视图。有关系吗？请指导我。

大家好，我分享一下我的头像`ViewController Scene`![在此处输入图像描述](../Images/f198a26d0d6fd5c0db034c7d5ff40a8c.png)

我正在使用自动布局（iOS6）。`Scroll View ContentSize`是（768,1400），我正在设置`ViewDidAppear`。下面是隐藏的，`View`滚动没有任何问题。`Scroll View``Scroll View`

现在，如果我显示和隐藏锁`View`，`Scroll View`它现在不可滚动。这就是我面临的问题。除了设置内容大小之外，我没有在代码中做任何事情。如果您需要任何其他信息，请告诉我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T17:29:20.833

iOS 6 中的`contentSize`“自动调整大小”本身具有自动布局。这意味着您无法设置`contentSize`. 有一些技巧建议在`viewDidAppear`通话中设置它，但我会避免这种情况。如果您阅读[iOS 6 发行说明](http://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_0/index.html)（在页面上搜索`UIScrollView`），它会为您提供几个解决方案。其中之一涉及`translatesAutoresizingMaskIntoConstraints`财产。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-21T15:39:33.730

删除所有与调整滚动视图内容大小相关的代码。自动布局在您现在滚动时使用它。完成此操作后添加以下代码

```
// Add 200 points to the bottom of the scroll view
[self.scrollView setContentInset:UIEdgeInsetsMake(0, 0, 200, 0)];
self.scrollView.translatesAutoresizingMaskIntoConstraints= NO; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T16:52:10.157

没有任何代码，我会冒险猜测......

如果您`contentSize`的大小不超过`UIScrollView`. 如果你要隐藏你的视图，然后改变你的滚动视图的大小并且你的滚动视图超过或等于你的`contentSize`，那么你将没有任何东西可以滚动。

另一种可能性是您禁用了用户交互。

# jquery - jquery在选择器中使用变量不起作用

> ID：15027161
> 
> 赞同：1
> 
> 时间：2013-02-22T15:10:10.107
> 
> 标签：jquery, variables, jquery-selectors

当我尝试这样做时：

```
if (window.location.hash) {
  current_page = window.location.hash;
}
$(current_page).siblings('.page').css(display: 'none'); 
```

current_page 将是 eg `#hello`，所以我认为没有`#`必要删除，因为我使用 ID 来识别元素。

这是我在 chrome 中的错误：
`Uncaught SyntaxError: Unexpected token:`
我没有得到更多。

我在这里阅读了有关如何在选择器中使用变量的其他问题，它应该可以工作。我还重写了两次以确保没有隐藏字符。
有谁知道出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T15:12:38.510

当然不是：

```
.css(display: 'none'); 
```

但

```
.css('display', 'none'); 
```

或者

```
.css({display: 'none'}); 
```

或者

```
.hide() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T15:12:58.947

您在 css() 调用中的语法错误，请使用：

```
$(current_page).siblings('.page').css('display', 'none'); 
```

# php - php帮助无法让代码在xml文件中循环到数据库

> ID：15027163
> 
> 赞同：0
> 
> 时间：2013-02-22T15:10:10.900
> 
> 标签：php, database, simplexml

我已将此代码放入我得到所有正确的 products_id 但所有 products_model 都是相同的数字

```
 foreach($xml->xpath('//PRODUCT/@ITEM') as $productitemid){
 foreach($xml->CREATED->CATEGORY->PRODUCT as $product)

 mysql_query("INSERT INTO products (products_id,products_model) VALUES ('$productitemid','$product->MODEL')");

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T15:31:42.960

如果您的输入文件中有多个“产品”项目，那么您需要遍历它们。你的“foreach”需要看起来像这样：

```
foreach($xml->CREATED->CATEGORY->PRODUCT as $product)
    mysql_query("INSERT INTO products (products_model) VALUES ('$product->model')") 
```

请注意，问题在于您的代码`$xml->CREATED->CATEGORY->PRODUCT->MODEL`意味着“让我从第一个 'PRODUCT' 元素中获取 'MODEL' 元素。这就是为什么你只得到一个项目的原因。

希望这可以帮助。

# c# - 如何使用 Oledb 从数据库中获取值，我不断收到 DBNull 异常？

> ID：15027164
> 
> 赞同：0
> 
> 时间：2013-02-22T15:10:11.413
> 
> 标签：c#, dbnull

```
int weaponDamage = Convert.ToInt32(dt.Rows[randomItem][2]);
// dt= DataTable
// randomItem = randomly chooses a row from the datatable 
```

该代码抛出

> “InvalidCastException 未处理，无法将对象从 DBNull 转换为其他类型”。

是的，我使用的是正确的列，是的，整个列都有值。奇怪的是有时程序运行了，但下一次它又给出了异常。问题可能出在我在数据库中的数据类型上吗？它设置为 Number 并且 Field Size 属性设置为 Integer

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T15:13:51.770

尝试一些缓解措施：

```
int weaponDamage = 0;

if (dt.Rows[randomItem][2] != DBNull.Value){ // I think, I'm doing this from memory.
    if (int.TryParse(dt.Rows[randomItem][2].ToString(), out weaponDamage){
        // Do whatever you need.
    }
} 
```

检查该列是否具有除 NULL 以外的值。然后将该值安全转换为 int。

老实说，没有理由你应该随机获得一个值，然后下一次是 NULL。这意味着表中的数据正在发生变化，或者您正在查看不同的数据行？不确定，但我会在其中添加一些防御性编码来提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T15:15:25.510

如果你先打印返回的值，看它是数字、字符串还是随机对象。您还应该使用适当的 try/catch 块来避免未处理的异常。

# html - 如何将按钮放置在背景图像的左中角？

> ID：15027169
> 
> 赞同：-1
> 
> 时间：2013-02-22T15:10:24.113
> 
> 标签：html, css, button, background, position

这是我的按钮：http: [//jsfiddle.net/cRqhT/120/](http://jsfiddle.net/cRqhT/120/)

HTML：

```
<a id="button" href="http://example.com"</a> 
```

CSS：

```
#button{
  display: block;
    width: 121px;
    height: 40px;
    background: url(https://gator1174.hostgator.com/~mskparik/facebook/1.png) no-repeat top;
}
#button:hover {
    background: url(https://gator1174.hostgator.com/~mskparik/facebook/2.png) no-repeat bottom;
    } 
```

这是背景：[http ://b.dryicons.com/files/graphics_previews/shining_background.jpg](http://b.dryicons.com/files/graphics_previews/shining_background.jpg)

如何将按钮放在左中角的背景上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T15:15:50.853

您的锚点缺少 > ：

```
<a id="button" href="http://mysite.com"></a> 
```

一种解决方案是将您的锚放在具有该背景的容器中并绝对定位锚：

```
<div>
    <a ... ></a>
</div>

.div { position:relative; background:transparent url('myUrl.png') no-repeat; }
a { position:absolute; top:XXpx; left:0; } 
```

其中分隔线与背景图像具有相同的高度和宽度，并且`XXpx`等于从图像高度中减去锚点的高度，再除以 2。

[JSFiddle 示例](http://jsfiddle.net/cRqhT/121/)。

# javascript - 仅直接移动设备而非平板电脑

> ID：15027171
> 
> 赞同：3
> 
> 时间：2013-02-22T15:10:26.940
> 
> 标签：javascript, jquery, device-detection

我有这行代码可以检测所有触摸设备：

```
<script>if( 'ontouchstart' in window ) window.location = 'mobile.html';</script> 
```

我只想修改它，使其仅针对支持触摸的移动设备，但也不包括平板设备。我该如何做到这一点而不会太具体？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T15:41:09.167

如果您想将用户重定向到您的移动网站，您可以使用：

```
if (screen.width <= 768) {
        window.location = "mobile.html";
    } 
```

如果你想知道它的触摸屏是否小于 768px，我想你可以使用这个：

```
var is_touch_device = 'ontouchstart' in document.documentElement;

var viewport = $(window).width()

if (is_touch_device == true && viewport < 768) {

   (Code goes here)

} 
```

# web-config - 带有自定义配置文件的 IISExpress 8 - Web 服务不会加载

> ID：15027172
> 
> 赞同：0
> 
> 时间：2013-02-22T15:10:30.040
> 
> 标签：web-config, iis-express

当我开发 WCF 服务或网站解决方案时，我总是使用带有自定义配置文件的 IISExpress，这样我就可以与团队中的其他开发人员共享设置。基本上，我运行一个批处理文件，其中包含以下命令：

"C:\Program Files (x86)\IIS Express\iisexpress.exe" /config:service-hosts.config

其中 service-hosts.config 是我的自定义配置文件的路径。

这种方法一直运行良好，并且在我的 PC 上的其他解决方案中仍然可以正常运行（每个都有自己的 service-hosts.config 文件）。但是，我刚刚开始遇到使用此方法加载 WCF 服务的问题。尝试浏览到服务根目录或任何内置帮助端点时出现以下错误：

* * *

HTTP 错误 500.19 - 内部服务器错误 无法访问请求的页面，因为该页面的相关配置数据无效。

详细错误信息：

模块 IIS Web 核心

通知未知

处理程序尚未确定

错误代码 0x80070003

配置错误 无法读取配置文件

配置文件 \?\D:\Projects\MyProject\WCFSite\web.config

请求的 URL http://localhost:80/

物理路径

登录方式尚未确定

登录用户尚未确定

请求跟踪目录 C:\Users\Spikeh\Documents\IISExpress\TraceLogFiles\

配置来源：

-1：

```
0: 
```

更多信息：

当读取 Web 服务器或 Web 应用程序的配置文件出现问题时，会发生此错误。在某些情况下，事件日志可能包含有关导致此错误的原因的更多信息。

如果您看到文本“定义了重复的 'system.web.extensions/scripting/scriptResourceHandler' 部分”，则此错误是因为您在 .NET Framework 4 中运行基于 .NET Framework 3.5 的应用程序。如果您正在运行WebMatrix，要解决此问题，请转到“设置”节点将 .NET Framework 版本设置为“.NET 2”。您还可以从 web.config 文件中删除额外的部分。

查看更多信息 »

* * *

我已经调试了几个小时，无法更改此错误，更不用说修复它了。

我尝试用几个不同版本的 applicationHosts.config 覆盖我的 service-hosts.config 文件，以 64 位运行 IISExspress，用非常基本的版本替换 web.config 文件，设置目录权限（到每个我的 PC 上的用户有权访问），并更改应用程序池，但仍然没有更改。

奇怪的是......当我将 WCF 项目更改为在项目属性的 Web 部分中使用“IISExpress”，然后调试该项目时，一切正常......即使我的所有 web.config 设置都已到位。

这表明我是如何运行 IISExpress 或我的 service-hosts.config 文件的……尽管 service-hosts.config 文件（对所涉及的站点稍作修改）与我在其他项目中的完全相同。

需要注意的一件事（可能是红鲱鱼），但我确实将解决方案从 VS2012 降级到 VS2010，并将框架目标更改为 .Net 4.0...

有没有人有任何想法？我快要从屋顶跳下去了...

更新：

这是来自 IISExpress 的调试信息（使用 /trace:e 运行）：

```
 Running IIS...
    Starting IIS Express ...
    Initializing the W3 Server Started CTC = 5514916
    PreInitSitesThread: Premature Exit Occured ( hr = 80070003 )
    W3 Server initializing WinSock.  CTC = 5514916
    W3 Server WinSock initialized.  CTC = 5514916
    W3 Server ThreadPool initialized (ipm has signalled).  CTC = 5514916
    Start listenerChannel http:0
    Successfully registered URL "http://*:80/" for site "MyWebsite" application "/"
    Registration completed for site "MyWebsite"
    AppPool 'MyCustomAppPool' initialized
    InitComplete event signalled
    IIS Express is running.
    Enter 'Q' to stop IIS Express
    IncrementMessages called
    Request ended: http://localhost:80/ with HTTP status 500.19 
```

这是我的 service-hosts.config 的重要部分：

```
<applicationPools>
    <add name="Clr4IntegratedAppPool" managedRuntimeVersion="v4.0" managedPipelineMode="Integrated" CLRConfigFile="%IIS_BIN%\config\templates\PersonalWebServer\aspnet.config" autoStart="true" />
    <add name="Clr4ClassicAppPool" managedRuntimeVersion="v4.0" managedPipelineMode="Classic" CLRConfigFile="%IIS_BIN%\config\templates\PersonalWebServer\aspnet.config" autoStart="true" />
    <add name="Clr2IntegratedAppPool" managedRuntimeVersion="v2.0" managedPipelineMode="Integrated" CLRConfigFile="%IIS_BIN%\config\templates\PersonalWebServer\aspnet.config" autoStart="true" />
    <add name="Clr2ClassicAppPool" managedRuntimeVersion="v2.0" managedPipelineMode="Classic" CLRConfigFile="%IIS_BIN%\config\templates\PersonalWebServer\aspnet.config" autoStart="true" />
    <add name="UnmanagedClassicAppPool" managedRuntimeVersion="" managedPipelineMode="Classic" autoStart="true" />
    <add name="IISExpressAppPool" managedRuntimeVersion="v4.0" managedPipelineMode="Integrated" CLRConfigFile="%IIS_BIN%\config\templates\PersonalWebServer\aspnet.config" autoStart="true" />

    <add name="MycustomAppPool" managedRuntimeVersion="v4.0" managedPipelineMode="Integrated" CLRConfigFile="%IIS_USER_HOME%\config\aspnet.config" autoStart="true" />

    <applicationPoolDefaults managedRuntimeLoader="v4.0" >
        <processModel/>
    </applicationPoolDefaults>
</applicationPools>

<listenerAdapters>
    <add name="http" />
</listenerAdapters>

<sites>
    <site name="MyWebsite" id="1">
        <application path="/" applicationPool="MyCustomAppPool">
            <virtualDirectory path="/" physicalPath="D:\Projects\MyProject\WCFSite\" />
        </application>
        <bindings>
            <binding protocol="http" bindingInformation="*:80:" />
        </bindings>
    </site>
    <siteDefaults>
        <logFile logFormat="W3C" directory="%IIS_USER_HOME%\Logs" />
        <traceFailedRequestsLogging directory="%IIS_USER_HOME%\TraceLogFiles" enabled="true" maxLogFileSizeKB="1024" />
    </siteDefaults>
    <applicationDefaults applicationPool="Clr4IntegratedAppPool" />
    <virtualDirectoryDefaults allowSubDirConfig="true" />
</sites>

<webLimits /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T08:28:46.330

似乎 service-hosts.config 文件指向了它不应该指向的东西。我用旧项目的副本替换了我的 service-hosts.config（因此是旧版本的 IISExpress / .Net Framework），一切正常。

听起来这毕竟与我的 4.5 -> 4.0 降级有关。

# segmentation-fault - 程序中“分段错误”的原因取决于使用的 MPI Isend/Irecv 的数量？

> ID：15027173
> 
> 赞同：0
> 
> 时间：2013-02-22T15:10:36.470
> 
> 标签：segmentation-fault, mpi, fortran90

我希望找出 MPI 程序中错误的原因。该程序是一个很大的 while 循环，因此对于每次迭代，使用 ISEND 和 IRECV 在每个处理器与其邻居之间完成一组消息传递，如下所示：

而（t<一个非常大的数字）...

```
do i=1,8
 if ( something that is almost always true ) then
   call MPI_ISEND(A,A_buffer,inewtype,neighrank(i),2,MPI_COMM_WORLD,isend,ierr)
   call MPI_WAIT(isend,istatus,ierr)
   call MPI_ISEND(B,B_buffer,MPI_INTEGER4,neighrank(i),3,MPI_COMM_WORLD,isend,ierr)
   call MPI_WAIT(isend,istatus,ierr)
 end if
end do

do i=1,8
 if ( something that is almost always true) then
   call MPI_IRECV(C,C_buffer,inewtype,neighrank(i),2,MPI_COMM_WORLD,irecv,ierr)
   call MPI_WAIT(irecv,istatus,ierr)
   call MPI_IRECV(D,D_buffer,MPI_INTEGER4,neighrank(i),3,MPI_COMM_WORLD,irecv,ierr)
   call MPI_WAIT(irecv,istatus,ierr)
   end if
end do
... 
```

`segmentation fault`该程序在大量迭代后产生错误。在每次迭代中，相同数量的数据在处理器之间传递消息，但对 ISEND 和 IRECV 的调用次数是可调整的（即使用 80 次调用传递总共 80kb 或使用 40 次调用传递总共 160kb）。如果调用次数很少，程序会提前崩溃。

我怀疑[关于 InfiniBand](https://stackoverflow.com/questions/13088772/mpi-send-takes-huge-part-of-virtual-memory)的事情！导致此错误，但我没有得到`insufficient virtual memory`- 所以它不可能是 InfiniBand？什么可能导致此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T23:01:25.430

MPI 代码结果很好。很难说，因为该程序需要 1-2 小时才能运行到`Segmentation Fault`. 严格的调试指出了与 MPI 无关的错误。

# sql-server-2008 - 从 SQL Server 中检索到的时间设置 DateTimePicker 值

> ID：15027176
> 
> 赞同：0
> 
> 时间：2013-02-22T15:10:50.863
> 
> 标签：sql-server-2008, datetime, datetimepicker

我很难分配来自我的数据库的值，

要检索的值：

```
AppointmentTime
Value = 11:00:00
Data Type = time(0) 
```

我使用 VS 2010 从 SQL Server 2008 中使用 DateTimePicker 分配该值。

```
DateTimePicker1
Format = HH:mm
MinDate = 1/1/1770

DateTimePicker1.Value = Appointment Time 
```

它给了我一个错误“1/1/0001 11:00:00AM 的值对值无效。值应介于 MinDate 和 MaxDate 之间。

我想知道为什么 SQL Server 2008 在我的 Time(0) 列中给出了 Date 的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T15:16:00.557

我试试这个查询

```
declare @x time(0);
set @x = getdate();
print cast(@x as datetime); 
```

它将为您提供日期为 01/01/1900 的时间。

因此，请尝试`DateTime`在设置`DateTimePicker1`值之前将 Appointment Time 设置为。

# jquery - Kendo MVVM自动完成不加载项目

> ID：15027182
> 
> 赞同：0
> 
> 时间：2013-02-22T15:11:06.797
> 
> 标签：jquery, mvvm, autocomplete, asmx, kendo-ui

我从服务器收到响应，一切看起来都不错，但由于某种原因，自动完成小部件没有显示项目。如果有人能指出我做错了什么，那将不胜感激。

当我在自动完成框中输入内容时来自服务器的响应：

```
{"d":[{"__type":"BlaBla.Services.svcMedication+Medication","MedicationId":0,"Name":"Name0"},{"__type":"BlaBla.Services.svcMedication+Medication","MedicationId":1,"Name":"Name1"},{"__type":"BlaBla.Services.svcMedication+Medication","MedicationId":2,"Name":"Name2"},{"__type":"BlaBla.Services.svcMedication+Medication","MedicationId":3,"Name":"Name3"},{"__type":"BlaBla.Services.svcMedication+Medication","MedicationId":4,"Name":"Name4"},{"__type":"BlaBla.Services.svcMedication+Medication","MedicationId":5,"Name":"Name5"},{"__type":"BlaBla.Services.svcMedication+Medication","MedicationId":6,"Name":"Name6"},{"__type":"BlaBla.Services.svcMedication+Medication","MedicationId":7,"Name":"Name7"},{"__type":"BlaBla.Services.svcMedication+Medication","MedicationId":8,"Name":"Name8"},{"__type":"BlaBla.Services.svcMedication+Medication","MedicationId":9,"Name":"Name9"},{"__type":"BlaBla.Services.svcMedication+Medication","MedicationId":10,"Name":"Name10"},{"__type":"BlaBla.Services.svcMedication+Medication","MedicationId":11,"Name":"Name11"},{"__type":"BlaBla.Services.svcMedication+Medication","MedicationId":12,"Name":"Name12"},{"__type":"BlaBla.Services.svcMedication+Medication","MedicationId":13,"Name":"Name13"},{"__type":"BlaBla.Services.svcMedication+Medication","MedicationId":14,"Name":"Name14"},{"__type":"BlaBla.Services.svcMedication+Medication","MedicationId":15,"Name":"Name15"},{"__type":"BlaBla.Services.svcMedication+Medication","MedicationId":16,"Name":"Name16"},{"__type":"BlaBla.Services.svcMedication+Medication","MedicationId":17,"Name":"Name17"},{"__type":"BlaBla.Services.svcMedication+Medication","MedicationId":18,"Name":"Name18"},{"__type":"BlaBla.Services.svcMedication+Medication","MedicationId":19,"Name":"Name19"}]} 
```

自动完成定义和绑定

```
<input id="acMedications" data-role="autocomplete" data-text-field="Name" data-bind="source: dsMedication, value: SelectedMedication"
        style="width: 400px;" placeholder="Enter value..." /> 
```

ViewModel 和 DataSource 定义

```
$(document).ready(function() {
        var viewModel = kendo.observable({
            dsMedication: new kendo.data.DataSource({
                transport: {
                    read: {
                        contentType: "application/json; charset=utf-8",
                        type: "POST",
                        url: "../Services/svcMedication.asmx/SearchMedication",
                        dataType: "json",
                        cache: false
                    },
                    update: {
                        contentType: "application/json; charset=utf-8",
                        type: "POST",
                        url: "../Services/svcMedication.asmx/SaveMedication",
                        dataType: "json",
                        cache: false
                    },
                    destroy: {
                        url: "../Services/svcMedication.asmx/DeleteMedication",
                        type: "DELETE",
                        dataType: "json",
                        cache: false
                    },
                    create: {
                        url: "../Services/svcMedication.asmx/SaveMedication",
                        type: "PUT",
                        cache: false
                    },
                    parameterMap: function(options, operation) {
                        if (operation !== "read" && options.models) {
                            return {
                                models: kendo.stringify(options.models)
                            };
                        }
                        options.MedicationParam = $('#acMedications').val();
                        return kendo.stringify(options);
                    }
                },
                batch: true,
                schema: {
                    data: "d",
                    model: {
                        id: "MedicationId",
                        fields: {
                            MedicationId: {
                                type: "number"
                            },
                            Name: {
                                type: "text"
                            }
                        }
                    }
                },
                success: function(data) {
                    alert(data);
                }
            }),
            SelectedMedication: null,
            HasChanges: false,
            save: function() {
                this.dsMedication.sync();
                this.set("HasChanges", false);
            },
            remove: function() {
                if (confirm("Are you sure you want to delete this record?")) {
                    this.dsMedication.remove(this.SelectedMedication);
                    this.set("SelectedMedication", this.dsMedication.view()[0]);
                    this.change();
                }
            },
            showForm: function() {
                return this.get("SelectedMedication") !== null;
            },
            change: function() {
                this.set("HasChanges", true);
            }
        });

        kendo.bind($("#fmMedication"), viewModel);
    }); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T16:29:15.890

试图重现它无济于事。这是我尝试过的代码：

```
var viewModel = kendo.observable({
            dsMedication: new kendo.data.DataSource({
                transport: {
                  read: function(options) {
                    options.success(
{"d":[{"__type":"BlaBla.Services.svcMedication+Medication","MedicationId":0,"Name":"Name0"},{"__type":"BlaBla.Services.svcMedication+Medication","MedicationId":1,"Name":"Name1"},{"__type":"BlaBla.Services.svcMedication+Medication","MedicationId":2,"Name":"Name2"},{"__type":"BlaBla.Services.svcMedication+Medication","MedicationId":3,"Name":"Name3"},{"__type":"BlaBla.Services.svcMedication+Medication","MedicationId":4,"Name":"Name4"},{"__type":"BlaBla.Services.svcMedication+Medication","MedicationId":5,"Name":"Name5"},{"__type":"BlaBla.Services.svcMedication+Medication","MedicationId":6,"Name":"Name6"},{"__type":"BlaBla.Services.svcMedication+Medication","MedicationId":7,"Name":"Name7"},{"__type":"BlaBla.Services.svcMedication+Medication","MedicationId":8,"Name":"Name8"},{"__type":"BlaBla.Services.svcMedication+Medication","MedicationId":9,"Name":"Name9"},{"__type":"BlaBla.Services.svcMedication+Medication","MedicationId":10,"Name":"Name10"},{"__type":"BlaBla.Services.svcMedication+Medication","MedicationId":11,"Name":"Name11"},{"__type":"BlaBla.Services.svcMedication+Medication","MedicationId":12,"Name":"Name12"},{"__type":"BlaBla.Services.svcMedication+Medication","MedicationId":13,"Name":"Name13"},{"__type":"BlaBla.Services.svcMedication+Medication","MedicationId":14,"Name":"Name14"},{"__type":"BlaBla.Services.svcMedication+Medication","MedicationId":15,"Name":"Name15"},{"__type":"BlaBla.Services.svcMedication+Medication","MedicationId":16,"Name":"Name16"},{"__type":"BlaBla.Services.svcMedication+Medication","MedicationId":17,"Name":"Name17"},{"__type":"BlaBla.Services.svcMedication+Medication","MedicationId":18,"Name":"Name18"},{"__type":"BlaBla.Services.svcMedication+Medication","MedicationId":19,"Name":"Name19"}]}                    
                    );
                  }
                },
                batch: true,
                schema: {
                    data: "d",
                    model: {
                        id: "MedicationId",
                        fields: {
                            MedicationId: {
                                type: "number"
                            },
                            Name: {
                                type: "text"
                            }
                        }
                    }
                }
            }),
            SelectedMedication: null
        });

kendo.bind(document.body, viewModel); 
```

这是一个现场演示：http: [//jsbin.com/ahiyay/2/edit](http://jsbin.com/ahiyay/2/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-01T15:27:22.393

有效的正确代码：

> var viewModel = kendo.observable({ dataSource: new kendo.data.DataSource({ data: [{"_ *type":"BlaBla.Services.svcMedication+Medication","MedicationId":0,"Name":"Name0" },* {"_type":"BlaBla.Services.svcMedication+Medication ","MedicationId":1,"Name":"Name1"},{"_ *type":"BlaBla.Services.svcMedication+Medication","MedicationId ":2,"Name* ":"Name2"},{"_type": "BlaBla.Services.svcMedication+Medication","MedicationId":3,"Name":"Name3"},{"_ *type":" BlaBla.Services.svcMedication+Medication","MedicationId":4,"Name":"Name4"},{"*_type":"BlaBla.Services.svcMedication+Medication","MedicationId":5,"Name":"Name5"},{"_ *type":"BlaBla.Services.svcMedication+Medication","MedicationId":6, "姓名":"姓名6"},{"*_type":"BlaBla.Services.svcMedication+Medication","MedicationId":7,"Name":"Name7"},{"_ *type":"BlaBla.Services.svcMedication+Medication","MedicationId":8, "名称":"Name8* "},{"_type": "BlaBla.Services.svcMedication+Medication","MedicationId":9,"Name":"Name9"},{"_ *type":"BlaBla.Services. svcMedication+Medication","MedicationId":10,"Name":"Name10"},{"_* type":"BlaBla.Services.svcMedication+Medication","MedicationId":11,"Name":"Name11"}, {"_ *type":"BlaBla.Services.svcMedication+Medication","MedicationId":12,"Name":"*Name12"},{"_type":"BlaBla.Services.svcMedication+ Medication","MedicationId":13,"Name":"Name13"},{"_ *type":"BlaBla.Services.svcMedication+Medication", "MedicationId":14,"Name":"Name14"},{"*_type":"BlaBla.Services.svcMedication+Medication","MedicationId":15,"Name":"Name15"},{"_ *type":"BlaBla.Services.svcMedication+Medication","MedicationId":16, "名称":"Name16* "},{"_type": "BlaBla.Services.svcMedication+Medication","MedicationId":17,"Name":"Name17"},{"_ *type":"BlaBla.Services. svcMedication+Medication","MedicationId":18,"Name":"Name18"},{"_* type":"BlaBla.Services.svcMedication+Medication","MedicationId":19,"Name":"Name19"}] }), dataTextField: "名称", SelectedMedication: null });
> 
> ```
>  kendo.bind(document.body, viewModel); 
> ```

# php - php从函数内部访问db类

> ID：15027184
> 
> 赞同：1
> 
> 时间：2013-02-22T15:11:15.517
> 
> 标签：php, class, function, pdo

我的数据库类运行良好，我这样称呼它`$db = new Database('user', 'pass', 'db', 'host');`。我在我的脚本顶部定义了这个数据库，但后来在脚本中我试图在函数内部使用连接，但似乎`$db`不是全局的，所以我的函数无法访问它。我可以在脚本中的每个函数内创建一个新的数据库类连接，但我真的很想将其`$db`作为全局访问点来访问。

这是一些代码：

```
 require_once('database_class.php');

 $db = new Database('user', 'pass', 'db', 'host');

 // I can reach the $db here and make the $db->PDO->'statement'();

 function userExists($user) {

     $bool = false;

     // But in here I can't access $db...
     $query = $db->PDO->query('SELECT * FROM login WHERE username = "$user"');

     $result = $query->fetch();

     if ($result) {

         // User exists
         $bool = true;

     }

     return $bool;

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T15:13:11.747

将 global $db 放在函数的开头，如下所示：

```
 function userExists($user) {
      global $db;

     // Rest of code here 
```

默认情况下，函数中的变量仅在 PHP 中本地存在。要使用在未作为参数传递的函数之外声明的变量（例如 $user），您需要使用如上所示的全局变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T15:17:33.707

您可能只需修改您的函数以将 $db var 作为参数。例如：

```
function userExists($user, $db) {
    ...
} 
```

默认情况下，对象是通过引用传递的（请参见[此处](http://php.net/manual/en/language.oop5.references.php)），因此您不会在每次调用时无意中复制 $db 对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T15:29:50.887

我也使用类进行连接和查询。但这将有助于您在类中定义连接所需的变量，因此您不必在每一页代码中重复它们。也许这个？使用 db 作为参数。

function userExists($user, $db) { //codecodecode }

# hibernate - 如何在 HQL 中查询不同的日期

> ID：15027185
> 
> 赞同：2
> 
> 时间：2013-02-22T15:11:15.707
> 
> 标签：hibernate, date, hql, distinct

我有一个表，在 postgres 中有一个时间戳类型的列 creation_time。在我的一个课程中，我需要使用 HQL 检索所有不同的创建时间。我尝试了不同的查询，例如：

```
select distinct cast(creation_time as date) from Product; 
```

但它总是返回 Product 对象列表！。然后我尝试了这个：

```
select year(pr.creationTime),month(pr.creationTime), day(pr.creationTime) from Product as pr; 
```

但是这个也没有工作它给出了这个错误：

```
function year(timestamp without time zone) does not exist 
```

在这方面有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-05-04T12:32:09.217

可以使用

```
select distinct to_char(creation_time, 'mm/dd/yyyy') from Product; 
```

# linux - 无法加载 inputrc 文件

> ID：15027186
> 
> 赞同：4
> 
> 时间：2013-02-22T15:11:17.247
> 
> 标签：linux, bash, shell, csh, rc

我刚刚发现我们可以创建一个`~/.inputrc`文件来定义键盘映射。但我不知道如何加载它。我试图找到它，但我立即得到一个“设置语法错误”。我从这里复制了`~/.inputrc`文件：[http ://www.linuxfromscratch.org/lfs/view/6.2/chapter07/inputrc.html](http://www.linuxfromscratch.org/lfs/view/6.2/chapter07/inputrc.html)

它提到它是使用 Readline 加载的。这意味着什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-22T15:30:12.257

```
 $ bind -f ~/.inputrc 
```

`-f filename`: 从 中读取键绑定`filename`。

```
 $ help bind 
```

**注意：**这是一个内置的 bash 命令，所以它只能与`bash`or一起使用`sh`。它不适用于`ksh`or `csh`shell，对于 tcsh 或 csh shell，您需要使用`bindkey`命令。如需更多帮助：[绑定键](http://zsh.sourceforge.net/Intro/intro_11.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T15:26:29.487

Readline 是程序可能使用的[几种可能的“键盘输入处理前端”之一。](https://stackoverflow.com/a/693670/23118)程序也可能不使用任何内容（除了 libc 完成的通常的 stdio 处理）。

如前所述，`.inputrc`由 readline 使用，因此它只会影响使用 readline 的程序。Bash 就是这样一个程序，所以它会`.inputrc`间接使用，但它不是一个像`.bashrc`. 该`.inputrc`文件仅在启动时由程序加载（间接通过 readline 库）。从[文档中](http://cnswww.cns.cwru.edu/php/chet/readline/readline.html#SEC9)：

> 当使用 Readline 库的程序启动时，会读取 init 文件并设置键绑定。

# fitnesse - 运行测试时出现 FitSharp FormatException

> ID：15027187
> 
> 赞同：0
> 
> 时间：2013-02-22T15:11:19.913
> 
> 标签：fitnesse, fitsharp

我安装了一个干净版本的 Fitnesse (v20121220) 和最新版本的 FitSharp (.net 4)。

我创建了一个健身测试页面，但无法运行测试 - 每当我尝试时，测试都会立即失败，标准输出中出现以下堆栈跟踪： -

```
System.FormatException: Input string was not in a correct format.
   at System.Number.StringToNumber(String str, NumberStyles options, NumberBuffer& number, NumberFormatInfo info, Boolean parseDecimal)
   at System.Number.ParseInt32(String s, NumberStyles style, NumberFormatInfo info)
   at fit.Runner.FitSocket.EstablishConnection(String request)
   at fitnesse.fitserver.FitServer.EstablishConnection()
   at fitnesse.fitserver.FitServer.Run(IList`1 CommandLineArguments)
   at fitnesse.fitserver.FitServer.Run(IList`1 commandLineArguments, Memory memory, ProgressReporter reporter)
   at fitSharp.Machine.Application.Shell.Run()
   at fitSharp.Machine.Application.Shell.Execute()
   at fitSharp.Machine.Application.Shell.RunInCurrentDomain(IList`1 commandLineArguments)
   at fitSharp.Machine.Application.Shell.RunInNewDomain(AppDomainSetup appDomainSetup, IList`1 commandLineArguments)
```

并将以下错误作为内部异常： - 内部异常：

```
FitClient: external process terminated before a connection could be established.
```

我的根配置非常基本：-

```
!define COMMAND_PATTERN {%m -a "FullPathToAcceptanceTests.dll.config" -r fitnesse.fitserver.FitServer,C:\fitnesse\fitsharp\fit.dll %p}
!define TEST_RUNNER {c:\fitnesse\fitsharp\Runner.exe}
!path "FullPathToAcceptanceTests.dll" 
```

显然 FullPathToAcceptanceTests 指向我的健身验收测试代码所在的位置。

我不明白为什么会发生这种情况 - 我之前使用过 Fitnesse / Fitsharp 没有问题，但这似乎并不想工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-01T21:26:21.767

我认为这个问题可能是由于在默认的 80 端口上运行 Fitnesse 引起的。FitLibrary 和 Fit 有时使用相同的端口，这可能会导致问题。尝试使用不同的端口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T10:36:31.237

我有

```
!path "FullPathToAcceptanceTests.dll"
!define COMMAND_PATTERN {%m -r "fitnesse.fitserver.FitServer,C:\fitnesse\fitsharp\fit.dll" %p}
!define TEST_RUNNER {c:\fitnesse\fitsharp\Runner.exe} 
```

# c++ - 简单的记忆问题练习

> ID：15027191
> 
> 赞同：0
> 
> 时间：2013-02-22T15:11:35.813
> 
> 标签：c++, memory-management, memory-leaks

我主要使用高级编程语言，~~但~~昨天一个朋友让我帮他解决一个简单的 C++ 练习，当我在做这个练习时，我写了这段代码：

```
for (int x = 0; x < 10; x++){
    int a, b, c;
    a = x;
    b = x*2;
    c = x+5;
} 
```

我的问题是：这是否会导致内存泄漏，使 a、b、c 总是在不同的内存位置创建，或者它们总是被每个循环覆盖？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-22T15:13:14.087

*仅当您具有动态分配的变量（通过调用`new`or`new []`或`malloc`or`calloc`*）时，才会发生内存泄漏。您的代码中没有，所以**NO**。

您拥有的是本地或*自动*变量。顾名思义，自动变量`{}`在创建它们的范围结束时被隐式释放。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T15:13:59.873

`a`,`b`并将`c`在堆栈上分配。除非类型本身通过其构造函数和/或析构函数导致泄漏，否则自动变量永远不会导致内存泄漏。

关于他们是否会覆盖每个循环的问题：我强烈怀疑地球上的每个编译器都会这样做，但原则上，这并不能保证。如果您查看汇编输出，您会发现（a）所有变量都在寄存器中，或者（b）它们作为堆栈指针的固定偏移量检索。由于每次循环都在执行相同的程序集，因此它们确实会被覆盖。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-22T15:16:51.423

你问三个问题：

> > *这将导致内存泄漏*

不，这里没有内存泄漏。内存泄漏，正如该术语通常使用的那样，需要 a `new`without a `delete`， a `new[]`without a `delete[]`，或 a `malloc()`without a `free()`。

> > *a、b、c 总是在不同的内存位置创建*

他们可能是。他们可能不是。这是您的程序不需要知道的实现细节。您只需要知道对象是在定义它们的行创建的，并在该范围的右大括号处销毁。

> > *它们总是会被每个循环覆盖？*

他们可能是。他们可能不是。这是您的程序不需要知道的实现细节。不管它们是否被覆盖，它们在每次循环时都会被销毁。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T15:15:17.793

内存中的相同位置将用于将值存储在`a`和循环的每次迭代中`b`。`c`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-22T15:20:32.153

如果您创建这样的变量

```
int i = 5; 
```

编译器会将它们放在堆栈上，您不必释放 int。但是，如果您在堆上创建一个 int，

```
int* i = new int; /*C++ style*/
int* j= (int*) malloc(sizeof(int)); /*C style*/ 
```

您确实已经像这样取消分配内存：

```
delete i; /*C++ style*/
free(j); /*C style*/ 
```

否则你会有内存泄漏。最重要的是，您不想混合使用 c 和 c++ 风格的内存处理。

# javascript - 使用递归承诺停止内存泄漏

> ID：15027192
> 
> 赞同：13
> 
> 时间：2013-02-22T15:11:36.403
> 
> 标签：javascript, recursion, memory-leaks, promise, q

如何`Promise`使用[Q 库](https://github.com/kriskowal/q)创建 JavaScript 的递归链？以下代码无法在 Chrome 中完成：

```
<html>
    <script src="q.js" type="text/javascript"></script>
    <script type="text/javascript">
        //Don't keep track of a promises stack for debugging
        //Reduces memory usage when recursing promises
        Q.longStackJumpLimit = 0;

        function do_stuff(count) {
            if (count==1000000) {
                return;
            }

            if (count%10000 == 0){
                console.log( count );
            }

            return Q.delay(1).then(function() {
                return do_stuff(count+1);
            });
        }

        do_stuff(0)
        .then(function() {
            console.log("Done");
        });
    </script>
</html> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-23T01:41:42.410

这不会堆栈溢出，因为承诺会破坏堆栈，但它会泄漏内存。如果您在 node.js 中运行相同的代码，您将收到一条错误消息：

```
FATAL ERROR: CALL_AND_RETRY_2 Allocation failed - process out of memory 
```

这里发生的是一个非常长的嵌套承诺链正在被创建，每个都在等待下一个。您需要做的是找到一种方法来扁平化该链，以便只有一个顶级承诺被返回，等待当前代表一些实际工作的最内层承诺。

## 打破链条

最简单的解决方案是在顶层构造一个新的 Promise 并用它来打破递归：

```
var Promise = require('promise');

function delay(timeout) {
    return new Promise(function (resolve) {
        setTimeout(resolve, timeout);
    });
}

function do_stuff(count) {
    return new Promise(function (resolve, reject) {
        function doStuffRecursion(count) {
            if (count==1000000) {
                return resolve();
            }

            if (count%10000 == 0){
                console.log( count );
            }

            delay(1).then(function() {
                doStuffRecursion(count+1);
            }).done(null, reject);
        }
        doStuffRecursion(count);
    });
}

do_stuff(0).then(function() {
    console.log("Done");
}); 
```

虽然这个解决方案有点不优雅，但您可以确定它适用于所有 Promise 实现。

## then/promise 现在支持尾递归

一些 Promise 实现（例如来自[npm的 Promise，您可以从](https://www.npmjs.com/package/promise)[https://www.promisejs.org/](https://www.promisejs.org/)作为独立库下载）正确地检测到这种情况并将 Promise 链折叠成一个 Promise。如果您不保留对顶级函数返回的承诺的引用（即`.then`立即调用它，不要保留它），则此方法有效。

**好的：**

```
var Promise = require('promise');

function delay(timeout) {
    return new Promise(function (resolve) {
        setTimeout(resolve, timeout);
    });
}

function do_stuff(count) {
    if (count==1000000) {
        return;
    }

    if (count%10000 == 0){
        console.log( count );
    }

    return delay(1).then(function() {
        return do_stuff(count+1);
    });
}

do_stuff(0).then(function() {
    console.log("Done");
}); 
```

**坏的：**

```
var Promise = require('promise');

function delay(timeout) {
    return new Promise(function (resolve) {
        setTimeout(resolve, timeout);
    });
}

function do_stuff(count) {
    if (count==1000000) {
        return;
    }

    if (count%10000 == 0){
        console.log( count );
    }

    return delay(1).then(function() {
        return do_stuff(count+1);
    });
}

var thisReferenceWillPreventGarbageCollection = do_stuff(0);

thisReferenceWillPreventGarbageCollection.then(function() {
    console.log("Done");
}); 
```

不幸的是，没有一个内置的 Promise 实现有这种优化，也没有任何计划来实现它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T17:08:02.607

下面是您尝试做的最简单的实现，如果可行，则 q 库有问题，否则会有一些深层的 javascript 问题：

```
<html>
    <script type="text/javascript">
        function do_stuff(count) {
            if (count==1000000) {
                return done();
            }

            if (count%1000 == 0){
                console.log( count );
            }

            return setTimeout(function() { do_stuff(count+1); }, 0);
        }

        do_stuff(0);

        function done() {
            console.log("Done");
        };
    </script>
</html> 
```

# linq - Linq GroupInto 选择器

> ID：15027194
> 
> 赞同：2
> 
> 时间：2013-02-22T15:11:40.950
> 
> 标签：linq

我正在通过 MS 101 Linq 示例进行编码，连接让我陷入了循环；）

示例[104](http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b)旨在展示稍微复杂的组连接是如何工作的：

```
var prodByCategory =
    from cat in categories
    join prod in products on cat equals prod.Category into ps
    from p in ps    // <-- ?
    select new { Category = cat, p.ProductName }; 
```

带“？”的部分 让我感到困惑，因为它看起来 p 与 ps 完全相同，并且该子句不在前面的示例中。

所以我尝试使用方法/linq 语法来编写它，我放在一起看起来像这样：

```
var prodByCategory = categories.GroupJoin(products, c => c, p => p.Category, (c, p) => new { Category = c, p.First().ProductName }); 
```

对 First() 的调用让我感到困惑，因为它不在前面的查询表达式中。

当我运行它时，我得到一个错误，因为 p 在它到达第一个之前是空的。我不确定这怎么可能，因为类别列表肯定与产品集合中的类别匹配。

```
foreach (var item in prodByCategory)
{
    Console.WriteLine(item.ProductName + ": " + item.Category);
} 
```

产品已经有一个类别字段。那么查询有什么好处呢？我想这只是一个学习的东西，但我无法理解这里的价值（尽管这可能是因为我不明白这两个集合是如何相关的）。

* * *

更新：

玩弄了格特的建议。请参阅下面他清晰的解释。经过轻微的清理后，这有效：

```
 var prodByCategory = categories.GroupJoin(products, cat => cat, prod => prod.Category,
              (cat, prod) => new { cat, products })
           .SelectMany(x => x.products
                          , (x, p) =>
                                      new
                                      {
                                          Category = x.cat,    // x.cat.CategoryName not accessible here
                                          ProductName = p.ProductName
                                      }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T21:04:57.197

你是对的，它看起来毫无用处。`GroupJoin`（或`join`- `into`）用于执行加入和分组的混合。连接右侧的项目被分组在左侧的项目中。所以，这个查询在综合语法中

```
from cat in Categories
join prod in Products on cat equals prod.Category into products
select new { Category = cat.CategoryName, 
             Products = products.Select (p => p.ProductName) } 
```

以其流畅的语法等价

```
Categories.GroupJoin(Products, cat => cat, prod => prod.Category, 
    (cat, products => new  
                 {
                    Category = cat.CategoryName, 
                    Products = products.Select (p => p.ProductName)
                 }) 
```

结果是

```
Beverages       Chai
                Chang
                Guaraná Fantástica
                Sasquatch Ale
                ...
Condiments      Aniseed Syrup
                Chef Anton's Cajun Seasoning
                Chef Anton's Gumbo Mix
                Grandma's Boysenberry Spread
                ... 
```

`GroupJoin`vs.的好处`Join`是 a`Category`可以有一个空的`Product`s 集合，这在 SQL 中类似于外连接。

* * *

`join`-`into`其次的效果`from`是分组结构再次展平。所以

```
from cat in Categories
join prod in Products on cat equals prod.Category into ps
from p in ps
select new { Category = cat.CategoryName, p.ProductName } 
```

与其等价物

```
Categories.GroupJoin(Products, cat => cat, prod => prod.Category, 
      (cat, products) => new {cat, products})
   .SelectMany(x => x.products
                  , (x, p) => 
                              new  
                              {
                                  Category = x.cat.CategoryName, 
                                  ProductName = p.ProductName
                              }) 
```

生产

```
Category        ProductName
--------------- ----------------------------------------
Beverages       Chai
Beverages       Chang
Condiments      Aniseed Syrup
Condiments      Chef Anton's Cajun Seasoning
Condiments      Chef Anton's Gumbo Mix
Condiments      Grandma's Boysenberry Spread
Produce         Uncle Bob's Organic Dried Pears
Condiments      Northwoods Cranberry Sauce
Meat/Poultry    Mishi Kobe Niku
... 
```

这与使用简单的连接开始相同。

所以这部分**`from p in ps`**看起来不应该从本质上改变查询。不过是伪装的`SelectMany`！对于这样一个天真的小声明来说，这是一个相当重要的变化。我不拘泥于流利的语法，但有时“全面”的语法会隐藏真正发生的事情，这是产生错误的好方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T19:58:01.393

我相信你翻译成流利的语法是不正确的。它应该是：

```
var prodByCategory = categories.GroupJoin(products, c => c, p => p.Category, (c, p) => new  { c = c, p = p })
                         .SelectMany (ps => ps.p, (ps, p) => new  { Category = ps.c, ProductName = p.ProductName }); 
```

我建议使用[LinqPad](http://www.linqpad.net)来检查 LINQ 语句的流畅语法翻译和生成的 SQL。这是一个很棒的工具，我发现自己经常使用它。

我同意他们对该样本的使用是有问题的。

# c - 使用可能重复的键调整单独链接的哈希表的大小

> ID：15027195
> 
> 赞同：2
> 
> 时间：2013-02-22T15:11:41.430
> 
> 标签：c, resize, hashtable

在用 C 语言编写的哈希表的单独链接实现中，我允许以 LIFO 顺序插入和删除重复的键。

调整表格大小（使其大小翻倍）的条件是每个列表平均包含 10 个项目。代码看起来像这样：

```
void maybeExpand(Hashtable* table)
{
    if (table->items < table->lists * 10)
        return;

    /* resize */
} 
```

请注意，我比较的是项目**数与列表**数之间的比率，而不是哈希表的整个容量。

问题是当表只包含重复键并且每个列表的平均项目数大于 10 时。调整大小不会改变列表数和项目数，因此哈希表只会不断调整大小。

我想知道在哈希表中允许重复键是否是一个好的决定，如果是这样，在上述情况下该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:34:03.143

您是否需要一个允许每个键有多个值的哈希表或一个简单地覆盖的哈希表取决于具体**情况**，如果对如何使用哈希表有疑问，请使用某种开关来提供两者。

很难预测所有条目都散列到同一个**hashbucket的情况。**在任何情况下，选择一个*好的*哈希函数都是一项不错的投资；但总的来说，您应该只针对平均情况进行优化，而不是最坏的情况。

# cassandra - Astyanax ALTER KEYSPACE CQL

> ID：15027196
> 
> 赞同：2
> 
> 时间：2013-02-22T15:11:43.893
> 
> 标签：cassandra, astyanax, cql3

我无法执行应该更新 SimpleStrategy 键空间的复制因子的 cql 语句。这很烦人，因为这适用于所有三个版本的 CQLSH。

我正在使用的键空间上下文设置为使用 cqlv3 `.setCqlVersion("3.0.0")`

cql：

```
"ALTER KEYSPACE \"" + ksContext.getKeyspaceName() + "\" WITH REPLICATION = { " + 
            "'class' : 'SimpleStrategy', 'replication_factor' : 3 };"; 
```

堆栈跟踪：

```
InvalidRequestException(why:line 1:108 no viable alternative at character '}')

at com.netflix.astyanax.thrift.ThriftConverter.ToConnectionPoolException(ThriftConverter.java:159)
at com.netflix.astyanax.thrift.AbstractOperationImpl.execute(AbstractOperationImpl.java:60)
at com.netflix.astyanax.thrift.AbstractOperationImpl.execute(AbstractOperationImpl.java:27)
at com.netflix.astyanax.thrift.ThriftSyncConnectionFactoryImpl$1.execute(ThriftSyncConnectionFactoryImpl.java:140)
at com.netflix.astyanax.connectionpool.impl.AbstractExecuteWithFailoverImpl.tryOperation(AbstractExecuteWithFailoverImpl.java:69)
at com.netflix.astyanax.connectionpool.impl.AbstractHostPartitionConnectionPool.executeWithFailover(AbstractHostPartitionConnectionPool.java:255)
at com.netflix.astyanax.thrift.ThriftColumnFamilyQueryImpl$6.execute(ThriftColumnFamilyQueryImpl.java:694)
at smail.cli.astyanax.Astyanax.execCQL(Astyanax.java:75)
at smail.cli.astyanax.Astyanax.alterReplicationFactor(Astyanax.java:307)
at smail.cli.test.SchemaTest.alterReplicationFactor(SchemaTest.java:25)
at smail.cli.test.TestSuite.runTests(TestSuite.java:39)
at smail.cli.Main.main(Main.java:22) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T17:30:58.637

Astyanax 在 cql3 方面确实存在一些问题，但它取得了很大进展。创建一个新的键空间并使用 CQLv2（通过在上下文中设置它）并尝试不带`"`引号：

```
String query = "ALTER KEYSPACE " + keyspaceName + " WITH REPLICATION = { 
               'class' : 'SimpleStrategy', 'replication_factor' : 2 };"; 
```

**注意***在此查询中，您将 rep 因子更新为**2**。

# ios - 将文件存储在内存中

> ID：15027197
> 
> 赞同：0
> 
> 时间：2013-02-22T15:12:05.433
> 
> 标签：ios

我正在尝试将文件（出于安全原因）保存到内存中，以便我可以通过 NSFileManager 访问它以将其传递给使用 NSFileManager 方法 contentsAtPath: 打开文件的不同类。

是否可以在某个特殊路径上创建一个文件并像存储在文件系统（某种内存磁盘？）中的普通文件一样使用它。

我不想依赖 NSFileProtection ...

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T15:36:09.080

简短的回答是不， iOS 下没有类似*ramdisk的存储。*

因此，看起来您需要将整个文件从磁盘读取到内存（最好作为对象）并更改您拥有的任何操作文件的方法，以在内存/对象上执行此操作。

# c# - 在表单之间传递值并从数据库中检索数据

> ID：15027202
> 
> 赞同：0
> 
> 时间：2013-02-22T15:12:24.120
> 
> 标签：c#, winforms

在我的 Windows 表单应用程序中，我有一个用户输入的表单，例如姓名地址......等等。

当用户按下添加条目时，所有输入条目将被添加到数据库中，同时，订单号将传递到另一个表单，在该表单中我有一个 SQL 查询来获取该特定订单的数据并分别填充它们文本框。

但是，当我将订单号从 form1 传递到 form2，并将该订单号传递给从数据库中检索数据的方法时，它显示数据库中没有这样的行，即使该条目已经在数据库中。如果我在表格 2 中手动硬编码订单号，它就可以工作。

那么如何在我将这些数据输入数据库后立即从数据库中检索数据。

基本上 form1 为用户提供订单号，而 form 2 使用该订单号来获取数据。发射顺序是先形式 1，然后是形式 2。

**检索代码**

```
Form1 m = new Form1();
string number = m.orderNumber();
//  string number = "ORD1012013";

string InvSql = "SELECT  (Customer.[Title] + SPACE(2)  + Customer.[Customer's Name]) as CustomerName, Customer.[Customer's Ebayname], Customer.[Email Address], Customer.[Phone Number], (Customer.[Address 1] + SPACE(2)  +Customer.[Address 2] + SPACE(2)  + Customer.[City] + SPACE(2)  + Customer.[Post Code]+  SPACE(2)  + Customer.[Country]) as Address, Customer.[Item Purchased], Customer.[Purchased Date], Customer.[Total Price], Customer.[OrderNumber] FROM Customer WHERE Customer.[OrderNumber]= '" + number + "'";

OleDbConnection cnn = new OleDbConnection(connString);
OleDbCommand cmdOrder = new OleDbCommand(InvSql, cnn);

cnn.Open();

OleDbDataReader rdrOrder = cmdOrder.ExecuteReader();

rdrOrder.Read();

custName.Text = rdrOrder["CustomerName"].ToString();
ebayName.Text = rdrOrder["Customer's Ebayname"].ToString();
email.Text = rdrOrder["Email Address"].ToString();
phone.Text = rdrOrder["Phone Number"].ToString();
address.Text = rdrOrder["Address"].ToString();
item.Text = rdrOrder["Item Purchased"].ToString();
date.Text = Convert.ToString(Convert.ToDateTime(rdrOrder["Purchased Date"]));
price.Text = rdrOrder["Total Price"].ToString();
order.Text = rdrOrder["OrderNumber"].ToString();

rdrOrder.Close();
cnn.Close(); 
```

**添加条目的代码**

```
private void button1_Click(object sender, EventArgs e)
        {
            foreach (Control c in this.Controls)
            {
                if (c is MaskedTextBox)
                {
                    MaskedTextBox textBox = c as MaskedTextBox;
                    if (textBox.Text == string.Empty)
                    {

                        string result = MyMessageBox.ShowBox("Please Enter All Fields", "Warning");
                    }

                    else
                    {
                        SaveAllListItems();
                        this.Close();
                        PrintOrder m = new PrintOrder();
                        m.Show();

                    }
                }
            } 
```

**对于 SaveAllListItems**

```
 private void SaveAllListItems()
        {
            string listItems = string.Empty;
            foreach (var listBoxItem in listBox1.Items)
            {

                listItems += listBoxItem.ToString();

                if (listBox1.Items.IndexOf(listBoxItem) < listBox1.Items.Count - 1)
                {
                    listItems += ", ";
                }
            }

            InsertUser(maskedTextBox1.Text, comboBox1.Text, maskedTextBox2.Text, maskedTextBox3.Text, maskedTextBox4.Text, maskedTextBox5.Text,
                       maskedTextBox6.Text, maskedTextBox7.Text, maskedTextBox8.Text, maskedTextBox9.Text, listItems, DateTime.Now, maskedTextBox10.Text, orderNumber(), get_next_id());

;
        } 
```

**对于插入用户**

```
public string InsertUser(string custName, string title, string cust,  string emailAddress, string phoneNumber, string address1, string address2, string city, string postCode, string country, string itemPurchased, DateTime datePurchased, string price,string orderNumber, int id)
{

    // Create connection objecte

    //string datePurchased = DateTime.Now.ToString("dd/MM/yyyy");

    int ix = 0;
    string rTurn = "";
    OleDbConnection oleConn = new OleDbConnection(connString);
    try
    {
        oleConn.Open();
        string sql = "INSERT INTO [Customer]([Customer's Ebayname], [Title],  [Customer's Name], [Email Address] ,[Phone Number], [Address 1], [Address 2], [City], [Post Code], [Country] , [Item Purchased], [Purchased Date], [Total Price], [OrderNumber], [NumGenerate])" +
                 "VALUES ( @custName, @title, @cust, @emailAddress, @phoneNumber, @address1, @address2, @city, @postCode, @country , @itemPurchased, @datePurchased, @price, @orderNumber, @id)";
        OleDbCommand oleComm = new OleDbCommand(sql, oleConn);

        oleComm.Parameters.Add("@custName", OleDbType.Char).Value = custName;
        oleComm.Parameters.Add("@title", OleDbType.Char).Value = title;
        oleComm.Parameters.Add("@cust", OleDbType.Char).Value = cust;
        oleComm.Parameters.Add("@emailAddress", OleDbType.Char).Value = emailAddress;
        oleComm.Parameters.Add("@phoneNumber", OleDbType.Char).Value = phoneNumber;
        oleComm.Parameters.Add("@address1", OleDbType.Char).Value = address1;
        oleComm.Parameters.Add("@address2", OleDbType.Char).Value = address2;
        oleComm.Parameters.Add("@city", OleDbType.Char).Value = city;
        oleComm.Parameters.Add("@postCode", OleDbType.Char).Value = postCode;
        oleComm.Parameters.Add("@country", OleDbType.Char).Value = country;
        oleComm.Parameters.Add("@itemPurchased", OleDbType.Char).Value = itemPurchased;
        oleComm.Parameters.Add("@datePurhcased", OleDbType.Date).Value = datePurchased;
        oleComm.Parameters.Add("@price", OleDbType.Char).Value = price;
        oleComm.Parameters.Add("@orderNumber", OleDbType.Char).Value = orderNumber;
        oleComm.Parameters.Add("@id", OleDbType.Integer).Value = id;

        ix = oleComm.ExecuteNonQuery();
        if (ix > 0)
            rTurn = "User Added";
        else
            rTurn = "Insert Failed";
    }
    catch (Exception ex)
    {
    }
    finally
    {
        oleConn.Close();
    }
    return rTurn;
    } 
```

**生成 OrderNumber**

```
 public string orderNumber()
        {
           string ord = "ORD" + get_next_id() + DateTime.Now.Year;
           return ord;
       } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T15:44:18.077

看起来您`m.orderNumber();`在添加时调用并在检索时再次调用，并且在该方法中您正在调用`get_next_id()`. 因此，在从您保存的值中检索时，orderNumber 正在增加。（即保存订单#1，检索订单#2）

您可能应该将最后一个持久的订单 # 存储在静态属性中，或者将其直接传递给表单以进行检索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T15:26:21.223

您是否检查过 OrderNumber 字段的排序规则？这定义了如何在 SQL Server 中存储/比较文本。要检查的另一件事是字母的大小写。他们必须是大写/小写吗？

# asp.net - 不同应用程序可访问的隔离存储中的企业库缓存

> ID：15027203
> 
> 赞同：1
> 
> 时间：2013-02-22T15:12:25.443
> 
> 标签：asp.net, caching, enterprise-library

再会。

我想知道 IIS 中的多个应用程序是否可以访问使用隔离存储（磁盘，而不是数据库）的企业库缓存？也就是说，它们是否都可以共享相同的实例。

我在一台机器上运行了各种 WCF 服务，在不同的 Web 应用程序中设置（如果有区别，可能在不同的应用程序池中）。他们都需要访问共享缓存。

有人告诉我，EntLib 可以做到这一点，但是在阅读了一些内容之后，我并不完全确定情况是否如此。所有服务都在 NETWORK SERVICE 用户下运行，但由于它们都是 IIS 中的不同应用程序，这是否会阻止共享？我知道拥有不同的用户肯定会。

那么，同一个用户可以在多个应用程序中使用相同的缓存，还是仅限于一个应用程序？

任何指导将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:16:59.917

如果您想在多个服务之间共享缓存，最好使用 App Fabric 缓存。请参阅：http: [//msdn.microsoft.com/en-us/windowsserver/ee695849.aspx](http://msdn.microsoft.com/en-us/windowsserver/ee695849.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T12:56:12.817

我最终没有为此使用 EntLib，而只是使用了隔离存储。

如果有人遇到同样的问题，您可以看到以下问题，我在其中发布了我使用的代码，以及我在使用它时遇到的问题以及解决方案。

[无法在不同应用程序池中的应用程序之间共享隔离存储文件](https://stackoverflow.com/questions/15649947/cant-share-isolated-storage-file-between-applications-in-different-app-pools)

# c# - 找不到 Caliburn 抛出的方法的目标

> ID：15027204
> 
> 赞同：0
> 
> 时间：2013-02-22T15:12:30.727
> 
> 标签：c#, wpf, mvvm, caliburn.micro, caliburn

我正在尝试创建一个应用程序，它允许我在 Caliburn.Micro for MVVM 的帮助下在画布组件上绘制一些涂鸦。当我运行应用程序并单击画布时，我得到“没有找到方法 OnMouseDown 的目标”。例外。我定义了调用 MouseDown 事件时要调用的方法，但不知何故 Caliburn 找不到它。

项目文件可在此处获得：[SketchingTool.zip](http://lotsovcookiez.com/SketchingTool.zip)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T23:30:03.520

显然我以错误的方式连接了应用程序。它正在寻找方法的 ViewModel 不是它们所在的 ViewModel，因为我将视图优先方法与视图模型优先方法混合在一起。根据 Caliburn 的文档修复它解决了这个问题。

# sql-server - SSMS 查询到文本文件

> ID：15027206
> 
> 赞同：-1
> 
> 时间：2013-02-22T15:12:34.670
> 
> 标签：sql-server, sql-server-2008-r2

我有一个复杂的查询，将数据编组到一个临时表中，然后我将其编组到另一个输出临时表中，然后最终选择它以显示到屏幕上。这从网格视图中保存到文本中，然后我得到了我需要在异地处理的文件。

我想要做的是让这个查询可以运行并在本地磁盘上创建该文件，而不需要操作员更改“结果为”选项，或摆弄任何东西。

我可以使用哪些命令或功能来执行此操作？

我无法安装任何存储过程或类似于所涉及的服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T15:40:42.317

由于您无法在服务器上执行任何操作，我建议您编写一个 SSIS 包。创建一个数据流，并在您的源对象中放置您的脚本。然后，您的目标对象将指向您想要的文件。您有相当多的输出选项。

然后可以运行 SSIS 包

1.  一个 SQL 作业（假设你甚至被允许）
2.  使用 DTEXEC 命令运行 bat 文件的非 SQL 作业
3.  DTEXECUI 图形用户界面。

您还可以将 SSIS 包存储在实例中或您选择的任何文件共享中。

# matlab - 如何使用opencv在matlab中找到彩色图像的感兴趣区域？

> ID：15027208
> 
> 赞同：-1
> 
> 时间：2013-02-22T15:12:36.313
> 
> 标签：matlab, opencv

我想在 MatLab 中找到彩色图像的感兴趣区域。在matlab里面用openCV找ROI好不好？

请帮助我如何实现这一目标

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:56:40.303

Matlab 和 OpenCV 是两个完全不同的东西。OpenCV 是一个可以在 C++ 或 Python 中使用的视觉库，您应该将 Matlab 视为一种编程语言，它使用自己的库（工具箱），其中您可能对[图像处理工具箱](http://www.mathworks.com/products/image/)和[计算机视觉系统工具箱](http://www.mathworks.com/products/computer-vision/)感兴趣.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-12T22:24:41.930

如果您希望在 Matlab 中*手动*标记 ROI，则有几种方法可以做到。最简单的就是使用

```
BW = roipoly. 
```

参见[roipoly 文档](http://www.mathworks.com/help/images/ref/roipoly.html)

据我所知，OpenCV 中不存在诸如 Matlab 的 roipoly 之类的类似通用函数。

# php - 从 Android 连接到 MySQL 数据库

> ID：15027210
> 
> 赞同：1
> 
> 时间：2013-02-22T15:12:38.730
> 
> 标签：php, android

我按照教程通过 Android 应用程序中的 PHP 脚本连接到 MySQL 数据库。我的问题是（来自 LogCat）：“未捕获的 TypeError：无法在 null:1 处调用未定义的方法 'select'”。我前段时间取得了成功，所以也许我无意中修改了导致这种情况的东西？在我的数据库中，有 4 列，这一侧一切正常。这是我的PHP代码：

```
 <?php

 $host="xxxxx"; // Host name 
 $username="xxxxx"; // Mysql username 
 $password="xxxxx"; // Mysql password 
 $db_name="xxxxx"; // Database name 
 $tbl_name="xxxxx"; // Table name 

 // Connect to server and select databse.
 mysql_connect("$host", "$username", "$password")or die("cannot connect"); 

 mysql_select_db("$db_name")or die("cannot select DB");
 $q=mysql_query("SELECT * FROM $tbl_name WHERE pass>'".$_REQUEST['year']."'");
 while($e=mysql_fetch_assoc($q))
    $output[]=$e;

 print(json_encode($output));

 mysql_close();
 ?> 
```

...在 Android 上：

```
 String result = "";
    //the year data to send
    ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
    nameValuePairs.add(new BasicNameValuePair("year","Pass1"));

    //http post
    try{
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost("http://MyWebsite/queryfromandroid.php");
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            HttpResponse response = httpclient.execute(httppost);
            HttpEntity entity = response.getEntity();
            is = entity.getContent();
    }catch(Exception e){
            Log.e("log_tag", "Error in http connection "+e.toString());
    }
    //convert response to string
    try{
            BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                    sb.append(line + "\n");
            }
            is.close();

            result=sb.toString();
    }catch(Exception e){
            Log.e("log_tag", "Error converting result "+e.toString());
    }

    //parse json data
    try{
            JSONArray jArray = new JSONArray(result);
            for(int i=0;i<jArray.length();i++){
                    JSONObject json_data = jArray.getJSONObject(i);
                    Log.i("log_tag","id: "+json_data.getString("password")

                    );
            }
    }
    catch(JSONException e){
            Log.e("log_tag", "Error parsing data "+e.toString());
    } 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T19:57:45.543

谢谢大家，但我解决了我的问题，一个很小的错误总是导致这些难以检测的错误，这里是我修改的代码，在 PHP 脚本中：

我替换了这个：

```
$q=mysql_query("SELECT * FROM $tbl_name WHERE pass>'".$_REQUEST['year']."'"); 
```

这样 ：

```
$q=mysql_query("SELECT * FROM $tbl_name WHERE pass='".$_REQUEST['year']."'"); 
```

这个 > 通过这个 =

# r - 两个看似相等的值在比较相等时给出 FALSE

> ID：15027212
> 
> 赞同：0
> 
> 时间：2013-02-22T15:12:50.907
> 
> 标签：r, comparison

我有两列包含数据。在比较这些列时，我得到`FALSE`了这一行的回报，这让我很困惑。

```
dat[82,"UG_accept_avg_total.x"]
## [1] 1.842105
dat[82,"UG_accept_avg_total.y"]
## [1] 1.842105
dat[82,"UG_accept_avg_total.x"]==dat[82,"UG_accept_avg_total.y"]
## [1] FALSE 
```

我阅读了[这个问题](https://stackoverflow.com/questions/9508518/why-are-these-numbers-not-equal)的答案，它解释了为什么会出现我的问题，但答案对我没有多大帮助，因为：

```
all.equal(dat[82,"UG_accept_avg_total.x"],dat[82,"UG_accept_avg_total.y"])
## "Mean relative difference: 1.427714e-07"
isTRUE(all.equal(dat[82,"UG_accept_avg_total.x"],dat[82,"UG_accept_avg_total.y"]))
## [1] FALSE 
```

我可以去掉小数点后的一些数字，因为 3 可能就足够了，但是检查我的数据集中的所有数据字段（超过 250000）来做到这一点将是相当浪费资源的使用。有人有更好的建议吗？有没有办法降低 isTRUE(all.equal(x,y)) 的“灵敏度”？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T15:20:47.603

使用中的`tolerance`参数`all.equal`。

这适用于我的机器：

```
x <- 0.0000001
y <- 0.0000002

isTRUE(all.equal(x, y))
## [1] FALSE

isTRUE(all.equal(x, y, tolerance=10^-7))
## [1] TRUE 
```

# objective-c - ARC 自动发布太早（？）

> ID：15027214
> 
> 赞同：3
> 
> 时间：2013-02-22T15:12:57.510
> 
> 标签：objective-c, automatic-ref-counting, autorelease, gdataxml

我在 A 类中有一个方法调用：

```
GDataXMLElement *infoElement = [self getElementFromFilePath:filePath];
NSString *testStringA = [infoElement attributeForName:@"someAttribute"].stringValue; 
```

和B类中的方法实现：

```
-(GDataXMLElement*)getElementFromFilePath:(NSString*)filePath {
    NSData *xmlData = [NSData dataWithContentsOfFile:filePath];
    GDataXMLDocument *infoXMLDoc = [[GDataXMLDocument alloc] initWithData:xmlData options:0 error:nil];
    NSArray *infoArray = [infoXMLDoc.rootElement elementsForName:@"test"];
    GDataXMLElement *returnElement = (GDataXMLElement*)infoArray[0];
    NSString *testStringB = [returnElement attributeForName:@"someAttribute"].stringValue;
    return returnElement;
} 
```

`returnElement`类 B 中方法末尾的 已完美初始化，并且字符串`testStringB`包含正确的值。但是在 A 类中， 的内容`InfoElement`没有了，testStringA 为 nil。

我怀疑 ARC 过早发布 GDataXMLDocument，并且能够通过将文档绑定到 B 类中的属性来阻止这种行为：

```
@property (nonatomic,strong) GDataXMLDocument *infoXMLDoc; 
```

但我对这个解决方案有点不满意。我永远不会再使用该属性，我只需要元素来解析它一次。如果可以使用属性停止发布，是否还有一种方法可以在方法中执行此操作？我尝试了这样的 __strong 限定符：

```
GDataXMLDocument __strong *infoXMLDoc = [[GDataXMLDocument alloc] initWithData:xmlData options:0 error:&error]; 
```

但这没有帮助。所以我的问题，假设ARC确实是负责任的：

**1\. 是否可以在方法中告诉 ARC 不释放对象？**

**2\. 我对这里的行为有什么不明白的地方？**我现在使用 ARC 有一段时间了，这是我第一次被卡住。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T15:25:05.010

标题`GDataXMLNode.h`说：

> 只要任何引用依赖于该文档树内的节点，就由创建文档的代码来保留它。

您返回的节点`getElementFromFilePath`取决于父节点（`GDataXMLDocument`），但这将由 ARC 释放。只要您引用其中的节点和元素，就必须*保留*某处。`GDataXMLDocument`这些是`GDataXML*`类的语义，您必须遵循它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T15:26:04.307

我无法编译，所以这只是一个有根据的猜测，但我怀疑问题是您返回一个指向在方法内部分配和释放的对象的指针：

```
GDataXMLElement *returnElement = (GDataXMLElement*)infoArray[0]; 
```

如您所见，您没有分配 returnElement，因此 ARC 无法理解您需要它。当您退出该方法时，它只是释放 infoArray。如果您**复制**该值（类似于 [(GDataXMLElement*)infoArray[0] copy] ），它应该可以工作。

# c# - MVC 将 Null 值发布到 Controller 的 POST 方法

> ID：15027228
> 
> 赞同：0
> 
> 时间：2013-02-22T15:13:35.527
> 
> 标签：c#, asp.net-mvc

我在用一个ViewModel类来绑定一个数据录入页面，viewmodel类的层次结构是这样的

```
public ClassA
{
    public SomeModelType1 MyProperty1 { get; set; }
    public List<SomeModelType2> MyProperty2 { get; set; }
}

public class SomeModelType1 
{
    public string Name { get; set; }
    public SomeModelType3 MyProperty13 { get; set; }
}
public class SomeModelType3
{
    public int Id { get; set; }
} 
```

当我将 A 类绑定到视图时，我将文本框绑定如下：

Model.MyProperty1.Name)%> 和 Model.MyProperty1.SomeModelType3 .Id, new { @id = "hdfId" })%>

但是当我提交我写的表单时，[AcceptVerbs(HttpVerbs.Post)] public ActionResult BuildProfile(ClassA a) { //some logic }

因此，当我调试`a.MyProperty1`值时，我总是将 MyProperty1 设为空值，可以请一些人帮忙吗？我不明白我哪里错了。

* * *

获取方法

```
 [AcceptVerbs(HttpVerbs.Get)]
public ActionResult BuildProfile(Int32 UserId, Int32 CompanyDentistId, Int32 AccountId)
{
A objProfile = new A ();          
objProfile.CurrentStep = 1;
objProfile.MyProperty1.MyProperty13.CompanyId = CompanyId;
objProfile.MyProperty1.MyProperty13.AccountId = AccountId;
objProfile.MyProperty1.UserId = UserId;
return View(objProfile);
} 
```

发布方法

```
[AcceptVerbs(HttpVerbs.Post)]
    public ActionResult BuildProfile(BuildProfileViewModel a)
    {          
        return RedirectToAction("BuildProfile", new { UserId = a.MyProperty1.UserId, CompanyId = a.MyProperty1.MyProperty13.CompanyId, AccountId = a.MyProperty1.MyProperty13.AccountId }); 
```

## }

看法

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/DefaultMaster.Master"
Inherits="System.Web.Mvc.ViewPage<ChooseYourDentist.ViewModel.BuildProfileViewModel>" %>

<asp:Content ID="Content1" ContentPlaceHolderID="MainContent" runat="server">
<script src="<%: Url.Content("~/Scripts/jquery.validate.min.js") %>" type="text/javascript"></script>
<script src="<%: Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js") %>"
    type="text/javascript"></script>
<script type="text/javascript">
    var stepCounter = 1;
    var TotalSteps = 4;
    function IntializeLoader() {

        $("#divAJAXLoader").dialog({
            autoOpen: false,
            height: 50,
            width: 100,
            modal: true,
            resizable: false,
            draggable: false
            //position: ["center", "center"],
            // , autoOpen: false
        });
        $(".ui-dialog-titlebar").hide();
    }
    function OnSuccess(data) {
        if (data.result == 1) {
            var UserId = data.userid;
            // window.location.href = '/Dentist/ViewCompanyProfile?UserID=' + UserId + '';
        }
        else {
            alert("Some error occured while trying to save the data, Please try again.");
        }
    }
    function OnBegin() {
        $("#divAJAXLoader").dialog("open");
        return CompareDates($("#FromDate").val(), $("#ToDate").val());
    }
    function OnComplete() {
        $("#divAJAXLoader").dialog("close");
    }
</script>

<% using (Html.BeginForm("BuildProfile", "Dentist", Model, FormMethod.Post, new { dmodel = Model, @id = "frmBuildProfile" }))
   {
       ChooseYourDentist.Models.UserAccountModel obj1 = new ChooseYourDentist.Models.UserAccountModel();
       this.Model.MyProperty1 = obj1;
       %>
<div>
    <h5>
        Add/Edit<span> Doctor Profile</span></h5>
    <div class="req_an_process">
        <div class="build_p_block">
            <div class="progress_bar">
                <div class="req_selected">
                    Basic Profile
                </div>
                <div class="req_deselected">
                    Dentist Profile
                </div>
                <div class="req_deselected_last">
                    Gallery
                </div>
                <div class="clear">
                </div>
            </div>
            <div class="form_content" id="First">
                <h4>
                    Basic Profile</h4>
                <p>
                    ChooseYourDentist.com makes it easy for dentists and patients to connect. Simply
                    complete the information below and you'll be on your way to connecting with more
                    patients.</p>
                <ul>
                    <li>First Name:</li>
                    <li class="mar_bot">
                        <%: Html.TextBoxFor(model => model.MyProperty1.FirstName)%>
                        <%: Html.ValidationMessageFor(model => model.MyProperty1.FirstName)%></li>
                    <li>Last Name:</li>
                    <li class="mar_bot">
                        <%: Html.TextBoxFor(m=> Model.MyProperty1.LastName)%>
                        <%: Html.ValidationMessageFor(m=> Model.MyProperty1.LastName)%></li>
                    <li>Gender:</li>
                    <li class="mar_bot">
                        <%: Html.RadioButtonFor(model=>Model.MyProperty1.MyProperty13.Gender,"Male", new { id = "rbtnMale" }) %>Male
                        <%: Html.RadioButtonFor(model=>Model.MyProperty1.MyProperty13.Gender,"Female", new { id = "rbtnFemale" }) %>Female
                    </li>
                    <li>Title:</li>
                    <li class="mar_bot">
                        <%= Html.DropDownListFor(m=> Model.MyProperty1.MyProperty13.TitleId, new SelectList((IEnumerable)ViewData["lstTitle"], "ReferenceDataId", "ReferenceDataName"), "-Select Title-", new { @id = "ddlTitle" })%>
                    </li>

                    <li class="mar_bot">
                        <input type="submit" class="green_btn" value="Save" name="Save" />

                    </li>
                </ul>
            </div>
            <div class="form_content" id="second" style="display: none;">
                <h4>
                    Dentist Profile</h4>
            </div>
        </div>
    </div>
</div>
<%=Html.HiddenFor(m=> Model.CurrentStep, new { @id = "hdfCurrentStep" })%>
<%=Html.HiddenFor(m=> Model.TotalSteps, new { @id = "hdfTotalSteps" })%>
<%=Html.HiddenFor(m=> Model.MyProperty1.UserId, new { @id = "hdfUserId" })%>
<%=Html.HiddenFor(m=> Model.MyProperty1.MyProperty13.CompanyId, new { @id = "hdfCompanyId" })%>
<%=Html.HiddenFor(m=> Model.MyProperty1.MyProperty13.AccountId, new { @id = "hdfAccountId" })%>
<% } %>
<div id="divAJAXLoader" style="display: none; text-align: center;">
    <img src="<%: Url.Content("~/Content/images/indicator_white.gif") %>" alt="Loading..." />
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:23:47.680

在您绑定的所有视图中，视图使用的每个类都需要一个无参数构造函数。您还需要在该构造函数的视图中实例化您在视图中使用的每个类。

```
public ClassA
{
    public ClassA(){
        MyProperty1 = new SomeModelType1();
        MyProperty2 = new List<SomeModelType2>();
    }

    public SomeModelType1 MyProperty1 { get; set; }
    public List<SomeModelType2> MyProperty2 { get; set; }
}

public class SomeModelType1 
{
    public SomeModelType1(){
        MyProperty13 = new SomeModelType3();
    } 

    public string Name { get; set; }
    public SomeModelType3 MyProperty13 { get; set; }
}
public class SomeModelType3
{
    public int Id { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T16:25:27.443

据我所知，MVC模型中的继承范围仅限于2个或更少的继承，而不是滥用

```
public ClassA
{

//properties of SomeModelType1
public string Name { get; set; }
//propperties of SomeModelType3
public int Id { get; set; }
//if you need a list of int
//public list<int> Id   

//missing SomeModelType2
public List<SomeModelType2> MyProperty2 { get; set; }   
} 
```

# java - Java - 如何将字符串中的字母转换为数字？

> ID：15027231
> 
> 赞同：19
> 
> 时间：2013-02-22T15:13:43.733
> 
> 标签：java, string, integer

我对 Java 很陌生，所以我想知道如何将字符串中的字母转换为数字，例如`hello world`输出为`8 5 12 12 15 23 15 18 12 4`.
所以`a=1`, `b=2`,`z=26`等等

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-02-22T15:19:41.290

由于这很可能是一个学习任务，我会给你一个提示：拉丁字母的所有 UNICODE 代码点都是按字母顺序排列的。如果代码`a`是某个数字`N`，那么代码`b`是`N+1`，代码`c`是`N+2`，以此类推；的代码`Z`是`N+26`。

您可以像减去整数一样减去字符代码点。由于代码点是按字母顺序排列的，因此以下计算

```
char ch = 'h';
int pos = ch - 'a' + 1; 
```

产生 的序列号`h`，即`8`。如果您在循环中执行此计算，您将获得所需的结果。

请注意，上述公式仅适用于同一寄存器的字符。如果你输入的字符串是混合大小写的，你需要在计算之前将每个字符转换为小写，否则会出错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T15:17:30.003

```
String s = "hello world";
String t = "";
for (int i = 0; i < s.length(); ++i) {
    char ch = s.charAt(i);
    if (!t.isEmpty()) {
        t += " ";
    }
    int n = (int)ch - (int)'a' + 1;
    t += String.valueOf(n);
}
System.out.println(t); 
```

这不涉及空间等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T15:22:14.220

```
public static void main(String[] args) {
    String s = "hello world";
    s = s.replace(" ", "");
    char[] c = s.toCharArray();

    for (Character ss : c)
        System.out.println(ss - 'a' + 1);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-22T15:34:10.553

对于位置 i 处的每个字符：输出 s.charAt(i)-'a'+1。s 是字符串。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-07-03T11:07:15.800

如果您需要，如果您的字符串仅包含数字和字母，您可以使用下面的测试代码将字符串转换为数字。

```
 public static Long getNumericReferenceNumber(String str) {

        String result = "";

        for (int i = 0; i < str.length(); i++) {

            char ch = str.charAt(i);

            if (Character.isLetter(ch)) {
                char initialCharacter = Character.isUpperCase(ch) ? 'A' : 'a';
                result = result.concat(String.valueOf((ch - initialCharacter + 1)));
            } else result = result + ch;
        }

        return Long.parseLong(result);
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-22T15:18:21.923

您可以执行以下操作：

```
for (int i = 0; i < a.length(); ++i) {
  if (a.charAt(i) >= 'a' && a.charAt(i) <= 'z') {
    System.out.println((int)a.charAt(i) - (int)'a');
  } 
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-22T15:24:13.187

美国地图，键是字符，值是整数。这不是一种有效的方法——地图应该是类的静态成员。

```
import java.util.HashMap;
import java.util.Map;

public class JavaApplication1 
{
    public static void main(String[] args) 
    {
        final Map<Character, Integer> map;
        final String str = "hello world";

        map = new HashMap<>();  
        // or map = new HashMap<Character, Integer> if you are using something before Java 7.
        map.put('a', 1);
        map.put('b', 2);
        map.put('c', 3);
        map.put('d', 4);
        map.put('e', 5);
        map.put('f', 6);
        map.put('g', 7);
        map.put('h', 8);
        map.put('i', 9);
        map.put('j', 10);
        map.put('k', 11);
        map.put('l', 12);
        map.put('m', 13);
        map.put('n', 14);
        map.put('o', 15);
        map.put('p', 16);
        map.put('q', 17);
        map.put('r', 18);
        map.put('s', 19);
        map.put('t', 20);
        map.put('u', 21);
        map.put('v', 22);
        map.put('w', 23);
        map.put('x', 24);
        map.put('y', 25);
        map.put('z', 26);

        for(final char c : str.toCharArray())
        {
            final Integer val;

            val = map.get(c);

            if(val == null)
            {   
                // some sort of error
            }
            else
            {
                System.out.print(val + " ");
            }
        }

        System.out.println();
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-07-15T21:16:50.917

我添加了所有字符以获得公平的结果：

```
public static long stringToNumber(String s) {
    long result = 0;

    for (int i = 0; i < s.length(); i++) {
        final char ch = s.charAt(i);
        result += (int) ch;
    }

    return result;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-05-13T03:54:01.503

将任何字符串视为以 x 为底的数字，其中 x 是用于描述该字符串的字母的长度，然后将该数字转换为另一个以 10 为底的数字。谷歌搜索处理数字基础转换的算法。

如果我们采用英文键盘布局，这里的 x 可以等于 26+26+10+1(space)+y ，其中 y 是特殊字符的个数。

最常见的示例是从十六进制（以 16 为底）转换为十进制、以 10 为底以及从二进制转换为十进制等等。

# java - 获取 AccessibleName 属性

> ID：15027232
> 
> 赞同：0
> 
> 时间：2013-02-22T15:13:48.963
> 
> 标签：java, properties, javafx

我有一个控件，我需要找到它的[Accessible Name Property](http://docs.oracle.com/javase/1.5.0/docs/api/javax/accessibility/AccessibleContext.html#accessibleName)。我这样做了：

```
Component myComponent = (Component)myControl;
string accessName = myComponent.getAccessibleContext().getAccessibleName(); 
```

这在 java 中就像一个魅力，但是当谈到`JavaFx`我找不到这个属性时。我在网上查看过，但是对于这个特定的请求没有很多在线支持。以至于我什至在`JavaFx`.

有人知道它是如何调用的或如何访问它吗？这对我的搜索有很大帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T19:25:24.130

我认为目前没有为 JavaFX 实现可访问性，如果是，我不知道它是否会使用`javax.accessibility`.

来自[JavaFX 路线图](http://www.oracle.com/technetwork/java/javafx/overview/roadmap-1446331.html)：

> Oracle 致力于在其产品中提供可访问性支持，并且 JavaFX 计划作为 JDK 8 版本的一部分完全兼容可访问性。

路线图还说：

> 以下信息旨在概述我们的一般产品方向。它仅供参考，不得纳入任何合同。它不是提供任何材料、代码或功能的承诺，在做出购买决定时不应依赖它。所描述的任何特性或功能的开发、发布和时间安排仍由 Oracle 自行决定。

您不太可能在 StackOverflow 上收到 Oracle 的官方回复。[如果您在Oracle 官方论坛](https://forums.oracle.com/forums/forum.jspa?forumID=1385)或[JavaFX 开发邮件列表](http://mail.openjdk.java.net/mailman/listinfo/openjfx-dev)上提问，您可能会收到更多信息。

# iphone - 在 iOS 中实现搜索历史记录功能

> ID：15027239
> 
> 赞同：3
> 
> 时间：2013-02-22T15:14:00.893
> 
> 标签：iphone, ios, objective-c, cocoa-touch, serialization

我现在有一个搜索页面，它将加载网络服务的结果列表，但是当我返回搜索页面时，我想“**保存**”**输入的任何内容**（例如“resto italian”），然后将该条目和以前的条目显示到下面的表格视图中，如下图所示：

![在此处输入图像描述](../Images/fd49edd1daa8b60d089530a5dc73027c.png)

我的计划是使用属性列表序列化 - 如果还没有列表，则创建一个名为 history.plist 的属性列表，并用所做的每个搜索词填充它，并在上面的表格视图中显示最接近的十个。

**我试过的：**

```
// should create history.plist
- (NSString *)dataFilePath {
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentationDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    return [documentsDirectory stringByAppendingString:@"history.plist"];
}

/* This is the action for when 'search' is clicked - calls the method above to create 
a new plist if it's not already created. 
I then try to display the contents of the of the file in the textfield itself 
(for testing purposes) but it's not saving/displaying properly at the moment. */

- (IBAction)saveHistory:(id)sender {        
    NSString *filePath = [self dataFilePath];
    if([[NSFileManager defaultManager] fileExistsAtPath:filePath])
    {
       NSArray *array = [[NSArray alloc] initWithContentsOfFile:filePath];
       for (int i = 0; i < (sizeof(array)); i++) {
            UITextField *theField = self.searchHistory;
            theField.text = [NSString stringWithFormat:@"%@", array];
       }
    }        
    UIApplication *app = [UIApplication sharedApplication];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(applicationWillResignActive:) name:UIApplicationWillResignActiveNotification object:app];        
} 
```

任何指向尝试执行此操作的教程的链接、对我应该做什么的建议或对我所拥有的改进的建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:30:12.010

我会在评论中使用我的建议，但在此期间对您的代码进行一些编辑可能会有所帮助。

```
 NSArray *array = [[NSArray alloc] initWithContentsOfFile:filePath];
        for (int i = 0; i <array.count; i++) {
            //I don't know what this line means
            UITextField *theField = self.searchHistory;
            //Change this line to this
            theField.text = [NSString stringWithFormat:@"%@", [array objectAtIndex:i]];
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T06:01:16.103

通过以下方式替换您的 saveHistory 函数：

```
- (IBAction)saveHistory:(id)sender
{
      NSMutableArray *values = [[NSMutableArray alloc]initWithContentsOfFile:[self dataFilePath]];
      if(searchInputTextField.text.length > 0)
           [values addObject:searchInputTextField.text];
      [values writeToFile:[self dataFilePath] atomically:YES];

      [leTableView reloadData];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
     return values.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
     static NSString *CellIdentifier = @"Cell";
     UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
     if (cell == nil)
     {
         cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier] autorelease];
     }
     cell.textLabel.text = [values objectAtIndex:indexPath.row];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T14:49:40.917

我将使用Core Data，创建一个类，即分别`HistoryRecord`具有属性`termSearched`和`timestamp`类型的NSString 和NSDate。

```
#import <Foundation/Foundation.h>
#import <CoreData/CoreData.h>

@interface HistoryRecordManagedObject : NSManagedObject

@property (nonatomic, retain) NSString *termSearched;
@property (nonatomic, retain) NSDate *timestamp;

+ (NSArray *)findEntity:(NSString *)entity withPredicate:(NSPredicate *)predicate

@end 
```

执行

```
#import "HistoryRecordManagedObject.h"

@implementation HistoryRecordManagedObject

@dynamic termSearched;
@dynamic timstamp;

+ (NSArray *)findEntity:(NSString *)entity withPredicate:(NSPredicate *)predicate
{
    NSError *error;
    NSArray *fetchedObjects;

        /* After set all properties, executes fetch request */
        NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
        NSEntityDescription *entityDesc = [NSEntityDescription entityForName:entity
                                                      inManagedObjectContext:managedObjectContext];
        [fetchRequest setEntity:entityDesc];
        [fetchRequest setPredicate:predicate];

        fetchedObjects = [managedObjectContext executeFetchRequest:fetchRequest error:&error];
        [fetchRequest release];

    return fetchedObjects;
}

@end 
```

当然不止这些！使用 Core Data 必须做一些额外的事情，例如创建模型。读一点吧！这是值得的！

祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T18:18:32.410

在搜索动作中，只需将搜索结果保存到 NSUserDefaults 即可。

```
 NSMutableArray *searches = [[NSUserDefaults standardUserDefaults] arrayForKey:@"searches"];
[searches insertObject:textField.text atIndex:0];
[[NSUserDefaults standardUserDefaults] setObject:searches forKey:@"searches"];
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

然后为表数据源加载相同的数组，并在 viewwillappear 和键盘关闭时重新加载表。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-30T08:35:25.330

这应该可以解决问题：

```
// This is inside viewDidLoad    
UIApplication *myApp = [UIApplication sharedApplication];
[[NSNotificationCenter defaultCenter] addObserver:self     
          selector:@selector(applicationDidEnterBackground:)                                                                
          name:UIApplicationDidEnterBackgroundNotification
          object:myApp];

// This is inside my table view - where I'm loading the file data to display in table cells
NSString *myPath = [self dataFilePath];
BOOL fileExists = [[NSFileManager defaultManager] fileExistsAtPath:myPath];
if (fileExists) {
   NSArray *values = [[NSArray alloc] initWithContentsOfFile:myPath];
      for (int i = 0; i < values.count; i++) {
         cell.historyDisplay.text = [NSString stringWithFormat:@"%@", [values objectAtIndex:i]];
      }
}

// This is the file path for history.plist
- (NSString *)dataFilePath {
    NSArray *path = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    return [[path objectAtIndex:0] stringByAppendingString:@"history.plist"];
}

// This is my search button - I want to save whatever was typed in the text field, into history.plist, to display in my tableview whenever a user goes to it.     
- (IBAction)saveHistory:(id)sender {
    NSMutableArray *values = [[NSMutableArray alloc]initWithContentsOfFile:[self dataFilePath]];
    if(searchInputTextField.text.length > 0)
         [values addObject:searchInputTextField.text];
    [values writeToFile:[self dataFilePath] atomically:YES];    
    [leTableView reloadData];
} 
```

# build - Grunt 中子项目的通配模式

> ID：15027240
> 
> 赞同：1
> 
> 时间：2013-02-22T15:14:02.250
> 
> 标签：build, glob, gruntjs

我有几个要针对单个 Gruntfile 运行的子项目，因为它们都需要针对它们运行相同的任务。例如，我需要在每个子项目中使用 Compass 编译 Sass。

使用 Grunt 怎么可能？我尝试过通配模式：

```
compass: {
  options: {
    sassDir: './bundles/*/public/styles',
    cssDir: './bundles/*/temp/styles'
  }
} 
```

但我收到以下错误：

```
Running "compass" (compass) task
Errno::ENOENT on line 441 of /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/pathname.rb: No such file or directory - /Users/Oliver/Development/Personal/Reader/bundles/*
Run with --trace to see the full backtrace 
```

建议我不能以这种方式使用通配模式。

这可能吗？如果可以，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:02:59.377

这在[问题跟踪器](https://github.com/gruntjs/grunt-contrib-compass/issues/15)中得到了回答：

> 通配模式在那里不起作用，因为从名称中可以看出，它需要一个目录。但是，您可以为每个子项目创建单独的目标。

# javascript - 如何在诺基亚地图的集群标记中添加地理定位标记并在那里进行缩放？

> ID：15027243
> 
> 赞同：0
> 
> 时间：2013-02-22T15:14:14.793
> 
> 标签：javascript, here-api

这是我一直在使用的示例： [Nokia Maps Cluster](http://www.developer.nokia.com/Community/Wiki/Nokia_Maps_API_-_How_to_cluster_map_markers)

但是我无法添加新的地理定位标记，我尝试过使用 HTML5 API，但我想我不知道如何实现它，我希望有人能告诉我我需要改变什么。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T16:32:07.900

要向集群添加一个点，您需要调用**clusterProvider.add()**，要添加一系列点只需使用**clusterProvider.addAll()**代替，这些方法中的每一个都采用一个**IClusterPoint**（或一个 IClusterPoints 数组**）**，这基本上是意味着他们将接受任何具有经度和纬度的对象。

如果您真的想向集群添加地理位置，您需要执行以下步骤：

1.  如此处的示例所示，进行 HTML5 地理定位[调用](http://www.developer.nokia.com/Community/Wiki/Nokia_Maps_API_-_Show_user%27s_current_location_details_%28Address%29_in_an_info_bubble)
2.  取而代之或然后反向地理编码，获取响应并将其添加到您的集群中。

实际的集群由方法 **clusterProvider.cluster()**触发，如下所示：

```
clusterProvider.addAll(markers);
clusterProvider.cluster(); 
```

有关更多详细信息，请参阅[API 文档](http://developer.here.com/docs/maps_js/topics_api_pub/nokia.maps.clustering.ClusterProvider.html#topic-apiref__ClusterProvider-add)。

# css - 有 CSS 语法测试套件吗？

> ID：15027247
> 
> 赞同：7
> 
> 时间：2013-02-22T15:14:24.370
> 
> 标签：css, testing

我正在编写一个自定义 CSS 解析器，并希望用它来设置我的应用程序（不是 HTML）中的图形元素的样式。当涉及到选择器的优先级、“级联”等时，我想确保这符合通常的 CSS 行为。

**有没有可以用于这个项目的综合 CSS 测试套件？**

我的 CSS 具有大部分常规语法功能（例如匹配“标签”名称、ID、类、伪类），并且将与 HTML 的 CSS 共享许多格式化选项，但也有不同的选项，以适合“文档”的类型我在造型。

我一直在寻找一个 CSS 测试套件来检查我的实现，但我能找到的唯一一个，比如[W3C 测试套件](http://www.w3.org/Style/CSS/Test/)，主要关注文档的可视化表示。我正在寻找机器可读或易于适应的东西，并使用 CSS 引擎而不是布局引擎。类似于（伪测试规范）：

```
Stylesheet
    blah.blub { color: red; }
    .blub { color: blue; }

+ Document
    <blah class="blub" />

=> Expected result:
    <blah class="blub" style="color: red" /> 
```

或者

```
assert selector "#blub" matches element "moo#blub"
assert selector "blah#blub" does not match element "moo#blub"
... 
```

我还想测试 CSS 速记（例如`line`vs `line-color`）的行为，以防我实现它们与 HTML 相同。例如

```
line: 1px solid blue;
line-color: red; 
```

导致“1px纯红色”线。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T21:45:56.153

我怀疑是否存在仅适用于 CSS 的 CSS 选择器测试套件。由于 CSS 被开发为一种配套技术（并不是说它不能**在**其他地方使用，但它并不常见）测试套件专注于这种关系并且通常在浏览器中运行，[例如这个](http://tools.css3.info/selectors-test/test.html).

用于 CSS 选择器的通用测试套件只能是语法检查器。除非将样式应用于某些东西，否则您将无法查看 CSS 解析器是否工作正常，对吗？

但是上面的套件为不同的 CSS3 选择器提供了大约 500 个测试（包括旧版本，因为它们仍然是 CSS3 的一部分），您至少应该能够将其用作您的实现规范。

如果您使用外部库来处理 HTML，您可以插入 CSS 解析器并使用现有的 HTML/CSS 套件来测试解析器引擎。但这可能工作量太大了？如果没有，看看 Chromium，看看他们的设计是否足够模块化，可以插入一个永恒的 CSS 解析器......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T21:56:22.777

如何使用无头 Web 浏览器（例如 PhantomJS），然后使用具有 CSS 引擎的 JS 库（例如 jQuery）。

这样您就可以编写 CSS，然后编写 HTML 并使用 jQuery 的 .css() 函数检查这些 HTML 元素的样式？

另外我相信 PhantomJS 可以截取页面的屏幕截图，这可能是一个很好的视觉完整性检查。

# c# - 如何根据小数分隔符验证小数？

> ID：15027249
> 
> 赞同：0
> 
> 时间：2013-02-22T15:14:34.757
> 
> 标签：c#, .net

我想验证数字，我只知道小数点分隔符（点或逗号）

例如 1：n1=12.4 和 n2=1,234.5 -> 两者都对 '.' 有效 作为小数分隔符，对于“，”作为小数分隔符都无效。

例如 2：n1=12,4 和 n2=1.234,5 -> 都对 ',' 作为小数分隔符有效，对 '.' 都无效 作为小数分隔符。

到目前为止我尝试了什么？

```
CultureInfo cultureInfo = CultureInfo.InvariantCulture.Clone() as CultureInfo;
cultureInfo.NumberFormat.NumberDecimalSeparator = myDecimalSeparator; 
```

并使用

```
decimal.Parse(stringValue, cultureInfo); 
```

1.  例如 1 + '.' => 两者都有效
2.  eg1 + ',' => 都抛出异常 OK
3.  eg2 + ',' => n1 抛出异常 OK ， n2 抛出异常 WRONG
4.  例如 2 + '.' => n1 是 124 错误，n2 抛出异常 OK

你建议我做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T15:19:40.237

您也可以尝试设置组分隔符 - 这意味着如果您知道小数点分隔符是逗号，请将组分隔符设置为句点：

```
CultureInfo cultureInfo = CultureInfo.InvariantCulture.Clone() as CultureInfo;
cultureInfo.NumberFormat.NumberDecimalSeparator = myDecimalSeparator;
cultureInfo.NumberFormat.NumberGroupSeparator = myGroupSeparator; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T15:37:34.907

我想您的正常文化是使用“，”作为组分隔符和“。” 作为小数分隔符。因此，通过从不变的文化创建新的文化，然后将小数点分隔符设置为“。” 就像什么都不做。另一方面，新创建的区域性仍然使用“，”作为组分隔符，因此通过将小数分隔符设置为“，”，您可以告诉“，”既是组分隔符又是小数分隔符。这就是为什么它在测试 1 和 2 中运行良好而在其他测试中失败的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T15:18:57.400

您可以`decimal.TryParse`改为尝试捕获异常

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T15:20:16.090

尝试使用

```
decimal.Parse(stringValue, cultureInfo.NumberFormat); 
```

仅使用文化是不够的。看看[MSDN](http://msdn.microsoft.com/de-de/library/t7xswkc6.aspx)。

# spring - Spring MVC 多部分响应

> ID：15027250
> 
> 赞同：5
> 
> 时间：2013-02-22T15:14:39.180
> 
> 标签：spring, spring-mvc, response, multipart

我正在尝试编写完整的多部分流，从客户端使用 Spring restTemplate 发送多部分请求，从服务器端自动将不同部分解析为对象（我使用 JAXB 进行对象编组）并在多部分中发送回响应。

我能够实现几乎所有的流程，但我无法从 spring 控制器发送带有 jaxb 对象的多部分响应。

这是控制器代码：

```
@RequestMapping(value="/putuser",method=RequestMethod.POST)
@ResponseBody
public MultiValueMap<String, Object> getUser(@RequestBody User user) throws IOException, JAXBException {
    }
    user.setName("new");
    MultiValueMap<String, Object> form = new LinkedMultiValueMap<String, Object>();  
    form.add("user", user);
    form.add("file", new FileSystemResource("/tmp/1.1")); 
    return form;
} 
```

这是我在服务器端遇到的例外情况：

```
java.lang.ClassCastException: org.springframework.core.io.FileSystemResource cannot be cast to java.lang.String
    at org.springframework.http.converter.FormHttpMessageConverter.writeForm(FormHttpMessageConverter.java:233)
    at org.springframework.http.converter.FormHttpMessageConverter.write(FormHttpMessageConverter.java:197)
    at org.springframework.http.converter.FormHttpMessageConverter.write(FormHttpMessageConverter.java:73)
    at org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodProcessor.writeWithMessageConverters(AbstractMessageConverterMethodProcessor.java:148)
    at org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodProcessor.writeWithMessageConverters(AbstractMessageConverterMethodProcessor.java:90)
    at org.springframework.web.servlet.mvc.method.annotation.RequestResponseBodyMethodProcessor.handleReturnValue(RequestResponseBodyMethodProcessor.java:189)
    at org.springframework.web.method.support.HandlerMethodReturnValueHandlerComposite.handleReturnValue(HandlerMethodReturnValueHandlerComposite.java:69)
    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:122)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:746)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:687)
    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:925)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:856)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:915) 
```

看起来 Spring 正在尝试将响应中的每个部分转换为 String 而不是正确的内容类型（文件/xml 等）我试图像这样更新我的 spring.xml 文件：

```
<mvc:annotation-driven>
    <mvc:message-converters register-defaults="true">
       <bean class="org.springframework.http.converter.FormHttpMessageConverter">
                <property name="partConverters">
                    <list>
                        <bean class="org.springframework.http.converter.ByteArrayHttpMessageConverter" />
                        <bean class="org.springframework.http.converter.StringHttpMessageConverter" />
                        <bean class="org.springframework.http.converter.ResourceHttpMessageConverter" />
                        <bean class="org.springframework.http.converter.xml.Jaxb2RootElementHttpMessageConverter" />
                    </list>
                </property>
        </bean>
   </mvc:message-converters>
</mvc:annotation-driven> 
```

尝试让他 FormHttpMessageConverter 正确编写部分，但这没有帮助

有什么方法可以让 spring 使用不同类型的部件正确发送多部分响应？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-06-14T05:42:49.483

您需要将响应的 Content-Type 标头设置为适当的值。FormHttpMessageConverter 依赖于 Content-Type 来确定它是否需要将响应转换为 String 或其他类型。

```
@RequestMapping(value="/putuser",method=RequestMethod.POST)
@ResponseBody
public MultiValueMap<String, Object> getUser(@RequestBody User user, HttpServletResponse httpResponse) throws IOException, JAXBException {
    }
    user.setName("new");
    MultiValueMap<String, Object> form = new LinkedMultiValueMap<String, Object>();  
    form.add("user", user);
    form.add("file", new FileSystemResource("/tmp/1.1")); 
    httpResponse.setContentType(MediaType.MULTIPART_FORM_DATA_VALUE); // <-- IMPORTANT
    return form;
} 
```

# mysql - 按日期检查表中有多少条目

> ID：15027251
> 
> 赞同：0
> 
> 时间：2013-02-22T15:14:52.593
> 
> 标签：mysql, sql, doctrine-orm, dql

我试图创建一个特定的查询。例如，我有事件表：

```
id |     start        |      end
-----------------------------------------
1  | 10-08-2013 12:00 | 10-08-2013  14:00
2  | 10-08-2013 12:00 | 10-08-2013  14:00
3  | 10-08-2013 15:00 | 10-08-2013  16:00 
```

我想插入一个新的`event( start: 13:00, end: 15:30 )`，在此之前我想通过查询来检查同时有多少事件。在这种情况下，结果应该是 3：因为 2 个事件在开始时间，一个在结束时间。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T15:18:46.723

重叠的正确逻辑是：

```
where new_startDate <= end and
      new_endDate >= start 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T15:17:38.340

试试这个，

```
SELECT  COUNT(DISTINCT ID) totalCOunt
FROM    tableName
WHERE   new_startDate BETWEEN start AND end 
        OR
        new_endDate BETWEEN start AND end 
```

where`new_startDate`和`new_endDate`是事件的新日期。

# html-email - 在 HTML 电子邮件中，表格“单元格填充”的替代方法是什么？

> ID：15027253
> 
> 赞同：0
> 
> 时间：2013-02-22T15:14:57.527
> 
> 标签：html-email, padding

由于 HTML5 不支持 'cellpadding' 属性，将填充应用于 HTML 电子邮件中表格中的所有单元格的最佳方法是什么？

我读过链接样式表是一个坏主意，因为电子邮件客户端广泛忽略了所以目前我只能考虑将内联添加`style="padding:5px;"`到表中的每个元素，但这似乎很冗长！

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T16:03:29.843

即使不支持某些内容，电子邮件也是一个特殊规则。例如，bgcolor="" 规则已经被贬低了一段时间，但仍然是在电子邮件中添加背景颜色的最佳方式。事实上，大多数电子邮件客户端都去掉了文档标签。

链接样式表不起作用，甚至 Web 客户端也会忽略样式标签。

[这里](http://www.reachcustomersonline.com/how-to-code-html-email-newsletters-all-new-version/?doing_wp_cron=1346955817.6005339622497558593750)、[这里](http://kb.mailchimp.com/article/how-to-code-html-emails)和[这里](http://www.campaignmonitor.com/guides/coding/)是一些参考资料，可帮助您开始疯狂的 html 电子邮件设计世界

# php - 两个 PHP 递归导航问题

> ID：15027254
> 
> 赞同：0
> 
> 时间：2013-02-22T15:14:58.020
> 
> 标签：php, javascript, jquery, html

我几乎完成了这个导航......我有以下代码递归生成我的导航，可以在这个链接中看到：http: [//khill.mhostiuckproductions.com/siteLSSBoilerPlate/arraytest2.php](http://khill.mhostiuckproductions.com/siteLSSBoilerPlate/arraytest2.php)

它还成功地将“活动”类添加到标签 = 页面标题的任何链接。到目前为止，这是我的代码，请在底部查看我的问题。我已经标记了 javascript 和 jquery，但我更喜欢 PHP 解决方案，尽管我愿意接受建议。请注意这个导航的全部目的是让我可以通过下面的数组编辑单个文件来添加/删除/编辑导航元素。

**设置页面的 $title：**

```
<?php $title = 'Home'; ?> 
```

**导航数组：**

```
<?php

$nav_array = array ('Home' => 'index.php',
                   'About' => array ( 'about.php', array (
                        'Michael' => array( 'michael.php', array (
                            'Blog' => 'blog.php',
                            'Portfolio' => 'portfolio.php')), 
                        'Aaron' => 'aaron.php' , 
                        'Kenny' => 'kenny.php', 
                        'David'=> 'david.php')),

                   'Services' => array ( 'services.php', array (
                        'Get Noticed' => 'getnoticed.php', 
                        'Hosting' => 'hosting.php')),

                   'Clients' => 'clients.php',
                   'Contact Us' => 'contact.php'
    );

    $base = basename($_SERVER['PHP_SELF']);
?> 
```

**前锋：**

```
<?php

echo "<ul>";
foreach ($nav_array as $nav_title => $nav_data) {
  echo buildLinks($nav_title, $nav_data, $base, $title);
}
echo "</ul>";
?> 
```

**buildLinks 函数：**

```
<?php // Building the links

function buildLinks ($label_name, $file_name, $active_class, $title) {

  $theLink = '';

  $navigation_list = false;
  if (is_array($file_name)) {
    $navigation_list = $file_name[1];
    $file_name = $file_name[0];
  }

    // build the links with active class
  if ($label_name == $title) {
    $theLink = "<li><a class=\"active\" href=\"$file_name\">$label_name</a></li>\n";
  } else {
    $theLink = "<li><a href=\"$file_name\">$label_name</a></li>\n";
  }

    // recursively loop back through build links function
  if ($navigation_list) {
    $theLink .= "<ul>";
    foreach ($navigation_list as $nav_title => $nav_data) {
      $theLink .= buildLinks($nav_title, $nav_data, $active_class, $title);
    }
    $theLink .= "</ul>";
  }

  return $theLink; // print the nav
} 
```

所以，我已经有了这个导航视觉样式，但它是使用非递归讨厌的代码生成的。不过，您可以在以下链接中看到我将要引用的箭头，这样您就可以了解我想要实现的目标。[http://khill.mhostiuckproductions.com/siteLSSBoilerPlate/](http://khill.mhostiuckproductions.com/siteLSSBoilerPlate/)

请注意仅出现在具有子菜单的导航元素上的箭头...

这是通过`<span class='arrow'> +</span>`在`<A>`标签内添加来完成的。因此，例如...（如果 nav_label = title 为 TRUE，则 class="" 可能使类处于活动状态）

```
<a class="" href="about.php">About<span class='arrow'> +</span></a> 
```

所以我试图弄清楚如何将此功能添加到递归生成的内容中......我想我最大的问题是我不太确定如何确定子导航是否存在，如果这是真的, 然后加上`<span>`

我会假设我会在 buildLinks 函数中使用 elseif 扩展我原来的 IF 语句。所以...

// 使用活动类建立链接

```
if ($label_name == $title) {
    $theLink = "<li><a class=\"active\" href=\"$file_name\">$label_name</a></li>\n";
  } elseif ([what goes here?]) { 
    $theLink = "<li><a href=\"$file_name\">$label_name<span class='arrow'> +</span></a></li>\n";
  } else {
    $theLink = "<li><a href=\"$file_name\">$label_name</a></li>\n";
  } 
```

问题是上面 elseif 行中的 [这里发生了什么？]。另外，我意识到我需要两个 elseif。一个用于“如果 active = true AND if sub_menu = true”，则此...另一个用于“如果 sub_menu = ture”，则此...

到时候上面就变成了...

```
if ($label_name == $title) {
    $theLink = "<li><a class=\"active\" href=\"$file_name\">$label_name</a></li>\n";
  } elseif ($label_name == $title && [what goes here?]) { 
    $theLink = "<li><a class=\"active\" href=\"$file_name\">$label_name<span class='arrow'> +</span></a></li>\n";
  } elseif ([what goes here?]) { 
    $theLink = "<li><a href=\"$file_name\">$label_name<span class='arrow'> +</span></a></li>\n";
  } else {
    $theLink = "<li><a href=\"$file_name\">$label_name</a></li>\n";
  } 
```

我现在完全不知所措，因为我帮助生成了这个递归导航，我了解它主要是如何工作的，但我不完全了解这里发生了什么：

```
$theLink = '';

  $navigation_list = false;
  if (is_array($file_name)) {
    $navigation_list = $file_name[1];
    $file_name = $file_name[0];
  } 
```

我怀疑要弄清楚这一点需要上面的一些东西^

**所以我的问题又来了......我需要在我的代码的[这里有什么？]位中放入什么才能使其工作？**

我的第二个问题，对我来说更多的是进一步研究，那就是我可以通过哪些方式更动态地提供上述数组，最好不使用 MySQL？

**编辑：** 我对此进行了更多研究，但我仍然停留在我自己没有制作的这段代码上。

```
$navigation_list = false;
      if (is_array($file_name)) {
        $navigation_list = $file_name[1];
        $file_name = $file_name[0];
      } 
```

我大部分都了解 is_array 运算符。有了上面的说法`$file_name[1];`，那是说法`$file_name[TRUE]`吗？然后对于下面的行 0 = FALSE？

我需要帮助来了解如何检测数组是否存在，以便打印包含`<span class="arrow"> +</span>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T00:00:08.187

经过深思熟虑，我的箭头问题的解决方案击中了我。我只需要为活动设置一个变量，为箭头设置一个变量，并将它们放在应该在的链接中。然后将 if 语句移到外面。它不是完全动态的，因为我必须手动声明哪些标签具有子菜单才能打印箭头类，但是由于没有很多链接存在子菜单，这不会让我感到烦恼现在很多。

这是解决方案的代码：

```
<?php // Building the links recursively

function buildLinks ($label_name, $file_name, $active_class, $title) {

  $theLink = '';  
  $navigation_list = false; 
    if (is_array($file_name)) {
        $navigation_list = $file_name[1];
        $file_name = $file_name[0];
    }

    if ($label_name == $title) { // print active if it is true
        $active = 'active';
    }

    if ($label_name == 'About') { // print arrow if it is true
        $arrow = '<span class=\"arrow\"> +</span>';
    } elseif ($label_name == 'Michael') {
        $arrow = '<span class=\"arrow\"> +</span>';
    } elseif ($label_name == 'Services') {
        $arrow = '<span class=\"arrow\"> +</span>';
    }

    $theLink = "<li><a class=\"$active\" href=\"$file_name\">$label_name $arrow</a></li>\n";

    // recursively loop back through build links function
  if ($navigation_list) {
    $theLink .= "<ul class=\"sub-nav\">";
    foreach ($navigation_list as $nav_title => $nav_data) {
      $theLink .= buildLinks($nav_title, $nav_data, $active_class, $title);
    }
    $theLink .= "</ul>";
  }

  return $theLink; // print the nav
}

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T22:54:10.003

我已经警告过你了 ;-) ...这是肮脏的代码。我会回答你的第二个问题，因为这是我的错：

```
/* $file_name is a mixed parameter, denpending on when
 *  buildLinks() is called, it will be $file_name (as in your first element 
 *  for 'Home' or an array with another navigation menu (as in your second 
 *  element for 'About'
 */
function buildLinks ($label_name, $file_name, $active_class, $title) {
    $theLink = '';
    // if this is false, there will be no recursive call
    $navigation_list = false;
    if (is_array($file_name)) {
        /* $file_name is an array, as in 'About' */
        /* so we get the second element to build the navigation list */
        $navigation_list = $file_name[1];
        /* and then set $file_name to the real filename string, which 
         * in your data structure is the first element of the array. 
         * This is why I suggested reconsidering your data structure.
         */
        $file_name = $file_name[0];
    }

    // build the links with active class
    if ($label_name == $title) {
      $theLink = "<li><a class=\"active\" href=\"$file_name\">$label_name</a></li>\n";
    } else {
      $theLink = "<li><a href=\"$file_name\">$label_name</a></li>\n";
    }

    // since we assigned $navigation_list to an array, this is true 
    if ($navigation_list) {
        $theLink .= "<ul>";
        foreach ($navigation_list as $nav_title => $nav_data) {
           $theLink .= buildLinks($nav_title, $nav_data, $active_class, $title);
        }
        $theLink .= "</ul>";
    }

    return $theLink;
} 
```

难以阅读代码的事实正是改变数据结构的充分理由。

# java - Eclipse + Java 8 支持？

> ID：15027255
> 
> 赞同：43
> 
> 时间：2013-02-22T15:15:02.627
> 
> 标签：java, eclipse, eclipse-jdt, java-8

如何让 Java 8 与 Eclipse 一起工作？

我已按照[本指南](http://tuhrig.de/?p=921)进行操作，但不起作用。我也看过[Eclipse Java 8 wiki page](http://wiki.eclipse.org/JDT_Core/Java8)，但他们没有解释如何处理签出的 git 存储库。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-04-06T20:28:16.613

对于 Kepler SR2 (4.3.2)，需要安装功能补丁才能获得 JAVA 8 支持。按着这些次序：

*   Eclipse - 帮助 (MENU) > 安装新软件...

*   在“使用”字段中输入以下 URL：http:
    [//download.eclipse.org/eclipse/updates/4.3-P-builds/](http://download.eclipse.org/eclipse/updates/4.3-P-builds/)

*   按“输入”

*   选择类别“Eclipse Java 8 支持（用于 Kepler SR2）”

*   点击下一步'

*   点击下一步'

*   接受许可
*   点击“完成”

*   询问时重新启动 Eclipse

来源：[链接](https://wiki.eclipse.org/JDT/Eclipse_Java_8_Support_For_Kepler)

@伊丽莎白

为了在 BuildPath 上拥有所需的 JRE/JDK，请按照以下步骤操作。

*   右键单击包资源管理器中的项目
*   选择**BuildPath**，然后选择**Configure Buildpath**
*   从弹出的属性窗口中选择**库选项卡**
*   选择当前的**JRE 系统库**
*   单击**删除**按钮
*   单击**添加库**按钮
*   选择**JRE 系统库**
*   在那里，您将能够使用 3 种不同的方法添加所需的 JRE/JDK 版本。

如果您在这 3 个选项中没有找到您想要的 JRE/JDK 版本，那么您必须先安装它。以下链接通过屏幕截图详细帮助您执行相同操作。希望能帮助到你。

来源：[链接](http://im-a-developer-too.blogspot.ca/2014/04/configuring-java-environment-jre-jdk-in.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-04-28T14:21:24.060

正如[https://wiki.eclipse.org/JDT_Core/Java8](https://wiki.eclipse.org/JDT_Core/Java8)中所写：

“从 I20140318-0830 开始，我们所有的 Luna (4.4) 版本都包含对 Java™ 8 的 Eclipse 支持。对于 Kepler SR2 (4.3.2)，有一个功能补丁可用。”

![在此处输入图像描述](../Images/79f2b0a4a641293f133bb9dab71ce4fa.png)

所以现在你需要下载一个不稳定的 Eclipse 版本。

转到：http: [//download.eclipse.org/eclipse/downloads/](http://download.eclipse.org/eclipse/downloads/)

那里下载早于或等于 I20140318-0830 的版本

![在此处输入图像描述](../Images/49460ad912a6e3a730bf4207880f31f6.png)

然后根据您的操作系统选择您的版本：

![在此处输入图像描述](../Images/cc7e0620df48f4856febdd30fb06a1fd.png)

点击（http）链接，下载将开始：

![在此处输入图像描述](../Images/bc1737c71ae237595b0aabe513e06e84.png)

请注意，根据 eclipse 网站：Java™ 8 尚未登陆我们的标准下载包。但是您可以将它添加到现有的 Eclipse Kepler SR2 包中。它将在 2014 年 5 月 9 日从 M7 开始包含在 Luna 包中。

所以在 2014 年 5 月 9 日之后，让 eclipse 使用 java 8 会更简单。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-03-25T19:16:15.770

现在 Java 8 已经发布，Eclipse 已经发布了对它的支持。Java 8 可作为 Eclipse Kepler（Eclipse 2013 发行版）的“更新”提供，并可用于 Eclipse Luna（Eclipse 2014 发行版）的集成/夜间构建。有关增强功能以​​及如何在当前版本的 IDE 中安装它的更多信息，请参阅[http://eclipsesource.com/blogs/2014/03/25/eclipse-support-for-java-8/](http://eclipsesource.com/blogs/2014/03/25/eclipse-support-for-java-8/)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-22T15:42:50.557

看来这仍然是一项正在进行的工作（因此，会有稳定性问题）。您想使用 Java 8 有什么特别的原因吗？

这解释了你应该做什么：

> *   查看以下 git 存储库的 BETA_JAVA8 分支：JDT/Core 存储库 - git://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git
> *   您需要将 JDK8 构建安装为已安装的 JRE，以便使用 JavaSE-1.8 执行环境运行测试。
> *   有关如何使用 git 存储库的更多信息，请查看[http://wiki.eclipse.org/Platform-releng/Git_Workflows](http://wiki.eclipse.org/Platform-releng/Git_Workflows)。
> *   作为 API 基线，使用 3.8（或 3.8 RC4，直到 3.8 发布）。

我还没有下载这个 repo，但我认为它包含 eclipse jdt 核心（如名称所述）。我会等到稳定版本完成。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-07-12T17:17:15.963

正如[这里](https://stackoverflow.com/questions/17619638/eclipse-kepler-java-8)已经说过的：

Kepler 版本不*包括*Java 8 支持，因为 Java 8 还没有发布。使用下一个 Eclipse 版本再试一次，或者使用 Eclipse beta 版本[，例如 e(fx)clipse 的版本](http://downloads.efxclipse.org/eclipse-java8/)。不时查看[此错误报告，了解 Eclipse 的 JDT 中 Java 8 的进展。](https://bugs.eclipse.org/bugs/show_bug.cgi?id=380190)

编辑：从 I20140318-0830 开始，所有[Luna (4.4) 构建](http://download.eclipse.org/eclipse/downloads/)都包含对 Java 8 的支持。Eclipse Luna (4.4) 的最终版本将于 2014 年 6 月发布。对于 Kepler SR2 (4.3.2)，需要一个[功能补丁](https://wiki.eclipse.org/JDT/Eclipse_Java_8_Support_For_Kepler)要安装。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-04-04T11:43:04.117

链接到 Eclipse Java 8 支持更新站点 [https://wiki.eclipse.org/JDT/Eclipse_Java_8_Support_For_Kepler](https://wiki.eclipse.org/JDT/Eclipse_Java_8_Support_For_Kepler)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-02-18T10:08:40.503

对于 Eclipse Mars.1 Release (4.5.1)，您必须下载带有 [jre-8u73-windows-x64.tar.gz 的](http://download.oracle.com/otn-pub/java/jdk/8u73-b02/jre-8u73-windows-x64.tar.gz)额外包 到您的 java8/jre 文件夹，并将其指向 eclipse.ini 中的 -VM 部分。这个对我有用。

# visual-studio - 在构建期间无法自动将 NuGet 包更新到最新版本

> ID：15027256
> 
> 赞同：16
> 
> 时间：2013-02-22T15:15:04.427
> 
> 标签：visual-studio, build, teamcity, nuget

我们有两个独立的 .NET 解决方案：

*   为第一个解决方案运行构建会产生我们的最终产品：一堆 DLL。这些 DLL 通过 NuGet 包交付给我们的客户。
*   第二种解决方案用作产品测试解决方案：将 NuGet 包安装到其中，并构建和执行它 - 因此它使用我们的产品的方式与我们的客户使用的方式完全相同。

这里的挑战是我们最新的 NuGet 包应该有一种自动安装到产品测试解决方案的方法，最好是在构建这个产品测试解决方案的过程中。

基于来自[类似问题](https://stackoverflow.com/questions/9794907/how-to-automatically-update-nuget-packages-to-latest-available-version)的想法，我在配置产品测试解决方案方面取得了进展：

*   首先，我启用了 NuGet 包还原。这让我完全摆脱了 VCS 中的“packages”目录，因为具有 packages.config 文件中定义的版本的包将在构建之前由 NuGet 自动下载。
*   然后我在 Visual Studio 中添加了以下预构建事件：`$(SolutionDir).nuget\nuget update -prerelease $(ProjectDir)packages.config`. 这让我可以在构建过程中引入最新版本的 NuGet 包。

我目前使用上述方案来运行使用 Visual Studio 的本地构建和使用 TeamCity 的无人值守构建。该解决方案乍一看似乎适用于这两种情况，但实际上**它并没有产生预期的结果**：当构建产品测试解决方案时，在`bin`目录中我没有得到最新版本的 DLL，只有最新版本-1 版本。

问题是，尽管`nuget update`命令按预期更新了所有内容，包括文件`packages.config`和`.csproj`文件，但它们的**新内容**没有被构建拾取，因此 - 正如我的猜测 - 文件中的**HintPath**设置`.csproj`仍然反映“构建前”状态，因此旧的 DLL 被复制到`bin`目录中。我假设该`.csproj`文件只处理一次：在触发预构建事件之前，并且预构建事件所做的更改将被忽略，直到下一次构建。

我考虑了以下解决方案：

*   显然预构建还不够“预”。如果有更早的点我可以插入`nuget update`命令，我的上述解决方案可能会起作用。
*   我读到我可以通过定义 ReferencePath 来覆盖 .csproj 文件中的 HintPath-s。但我怀疑我能否轻松找出正确的路径，或者我是否可以及早设置它以便构建拾取它。
*   作为一种解决方法，我可以运行构建两次：在 TeamCity 中复制产品测试解决方案的构建步骤，我总是可以在 Visual Studio 中本地构建解决方案两次。

有人知道如何在构建过程中自动将 NuGet 包更新到最新版本吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-11-28T18:35:14.397

Have a look at a blog post I just did regarding this process. Instead of configuring stuff on the server, I did it by augmenting the Nuget.Targets file that's put in place with the Nuget Package Restore option. Beauty of this approach is it executes locally AND on the server (so you get to see any possible side-effects before breaking the build)

Posted details here: [http://netitude.bc3tech.net/2014/11/28/auto-update-your-nuget-packages-at-build-time/](http://netitude.bc3tech.net/2014/11/28/auto-update-your-nuget-packages-at-build-time/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-23T09:47:57.660

我认为将自动更新放到预构建步骤中，这不是 NuGet 风格。可以理解，每次做的时候都需要这个操作。主要是因为它可以增加构建时间。例如，当您使用 TDD 并经常重建项目并运行测试时，您期望它会很快完成。此外，它可以更新意外的软件包并破坏某些东西，之后您可以花费大量时间来查找问题。
我建议将更新作为单独的步骤。在 TeamCity 上，您可以使用`NuGet installer`构建步骤。要执行更新，只需选中步骤配置底部区域中的两个复选框： ![在此处输入图像描述](../Images/d1b509634941fe4155d5b101b545fb6f.png)

此外，如果您想在成功构建并通过测试后保留更新结果，您可以添加稍后的构建步骤，将这些更改提交给 VCS（例如使用 cmd 或 PowerShell）。
当您在本地工作时，最好在开始使用项目之前运行一次更新包。您可以使用`Package Manager Console`命令来实现这一点`Update-Package -IncludePrerelease`。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-09-13T09:12:13.327

我想出的 MSBuild 解决方案是覆盖该`BuildDependsOn`属性。因此，我创建了一个`UpdateNugetPackages.target`如下所示的：

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="14.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <BuildDependsOn>
      UpdateNugetPackages;
      $(BuildDependsOn);
    </BuildDependsOn>
    <UpdateCommand>"$(SolutionDir)pathToYourNugetExe.exe" update "$(SolutionDir)NameOfYourSolution.sln"</UpdateCommand>
  </PropertyGroup>
  <Target Name="UpdateNugetPackages">
    <Exec Command="$(UpdateCommand)"></Exec>
  </Target>
</Project> 
```

定义了调用的`UpdateCommand`位置和参数`nuget.exe`。*您可以根据自己的需要随意采用它。*

然后在您的`.csproj`文件中引用此目标。就如此容易：

```
<Project ToolsVersion="4.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
 ...
    <Import Project="$(MSBuildToolsPath)\Microsoft.CSharp.targets" />
    <!-- After the initial decleration of the BuildDependsOn-Property. -->        
    <Import Project="UpdateNugetPackages.target" Condition="Exists('UpdateNugetPackages.target')" /> 
```

**请记住**，进口订单很重要。您必须在定义它的目标文件**之后**`UpdateNugetPackages.targets`导入您的目标文件 ( )，并覆盖（或实际装饰）该`BuildDependsOn`属性。否则，该属性将被重新定义并删除您的更改，因为 中的初始定义不包括 中的任何现有值。由C# 项目导入。因此，您的导入必须**在**.**`Microsoft.Common.targets``Microsoft.Common.targets``BuildDependsOn``Microsoft.Common.targets``Microsoft.CSharp.targets`**`Microsoft.CSharp.targets`****

# google-nativeclient - 在不涉及 webstore 的情况下部署使用 chrome 原生客户端的 webapp

> ID：15027259
> 
> 赞同：1
> 
> 时间：2013-02-22T15:15:08.617
> 
> 标签：google-nativeclient

我正在研究为特定企业客户构建 chrome 应用程序的可能性。此应用程序只能由该客户使用（即，它不是通用应用程序）。

[技术概述中描述](https://developers.google.com/native-client/overview#common-use-cases)的用例包括替换“传统桌面应用程序”和“需要大量计算的企业应用程序”的能力——我正在考虑的解决方案适合这两个差距，因为我们有一些数学库希望合并到客户端 Web 应用程序中。

但是，稍后在同一文档中，它表明您只能部署部署在 chrome webstore 上的本机客户端应用程序，正如 https://developers.google.com/native-client/devguide/distributing 文档（和各种开发人员场景）。

**问题：**是否可以构建一个使用 Native Client 的网络应用程序，并将其分发给全球用户，但不使用 Chrome Webstore（即使用内部服务器）？

**注意**：我已经看过[这个](http://support.google.com/chromeos/a/bin/answer.py?hl=en&answer=2649489)关于在网上商店创建私有 chrome 应用程序集合的文档，但这似乎是特定于 ChromeOS 的。我有兴趣部署到拥有最新稳定版 Chrome 的用户。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T20:05:32.730

完全可以在不将其托管在 Chrome Webstore 上的情况下运行 Native Client 应用程序——否则，一开始就很难开发 NaCl 应用程序。最终用户可以使用托管在任何随机站点上的 NaCl 应用程序。**问题**是用户需要在其 Chrome 浏览器中专门启用该功能。看起来当前启用此功能的方法是访问“chrome://plugins/”页面（或“about:plugins”页面，同样的事情），然后选中“Native Client”下的“启用”框。

也许企业级管理可以更容易地推出，或者允许更细粒度的控制，以便只有企业内部网中的 NaCl 应用程序是受信任的，而不允许来自更广泛的互联网的东西（NaCl 应该是安全的和沙盒的，但谷歌以防万一，仍在安全和偏执地玩）。

有关自托管 NaCl 应用程序的公开示例，[请查看 NaClBox](http://www.naclbox.com/)，这是古老的 Dosbox 模拟器的本机客户端端口。虽然它也托管在 Chrome Webstore 中，[但他们的支持页面](http://www.naclbox.com/support)描述了如何直接从他们的站点运行它。

# java - Java 分期付款计算器

> ID：15027262
> 
> 赞同：-7
> 
> 时间：2013-02-22T15:15:12.720
> 
> 标签：java

需要创建 java 类以从第 1 节生成第 2 节。如何创建它。？请帮忙..

```
-------------------------------第 1 节--------------     
总金额 15000
第一期 5000
分期付款 5
-------------------------------第 2 节--------------     
第 1 期 2000
第 2 期 2000
第 3 期 2000
第 4 期 2000
第 5 期 2000

总计 10000
-------------------------------------------------- -----

```

我需要的只是普通的java类。在 main 方法中，我将手动输入第 1 节的数据，然后我需要输出 get 到 ArrayList 或可能的 Collection 对象

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T15:20:48.513

这是简单的数学：你有一个`numberOfInstallments`, the`totalAmount`和一个`initialInstallment`。

*   首先用 得到剩余的金额`totalAmount - initialInstallment`。
*   接下来除以`numberOfInstallments`。

在 Java 中变成这样：

```
int totalAmount = 15000;
int initialInstallment = 5000;
int numberOfInstallments = 5;

// Calculate the height of each installment
int installment = (totalAmount - initialInstallment) / numberOfInstallments;

// Print to screen
for(int i = 1; i <= numberOfInstallments) {
    System.out.println("Installment " + i + "  " + installment);
}
System.out.println("Total " + (totalAmount - initialInstallment)); 
```

（我没有费心正确对齐输出，但这不应该太难。）

# c# - 共享点列表和 Excel 之间的自动同步

> ID：15027264
> 
> 赞同：-1
> 
> 时间：2013-02-22T15:15:17.373
> 
> 标签：c#, vb.net, sharepoint

我在报告库中有一个带有透视图和表格的 excel 文档。我希望 excel 文档应该通过数据连接自动从列表中获取数据。有没有办法在列表操作中不导出到 excel 来做到这一点？如果我可以将数据自动提取到 excel 中，那么我不必一直创建图表。

所以最重要的是，我有一个 excel 文件，我需要将字段实时映射到共享点列表中的字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T04:09:53.010

您可以查看[Excel Services](http://blogs.office.com/b/microsoft-excel/archive/2009/11/03/excel-services-2010-overview.aspx)或类似的东西，或通过类似[这个的其他加载项](http://sharepoint.microsoft.com/Blogs/GetThePoint/Lists/Posts/Post.aspx?List=8d9e2a99-f288-47c2-916b-2f32864f7b82&ID=589&Web=5e4647a0-e7d0-4626-b71c-b1ff06402465)

# php - 如何替换 XML 中的整个节点值

> ID：15027267
> 
> 赞同：0
> 
> 时间：2013-02-22T15:15:27.540
> 
> 标签：php, xml, xml-parsing

我有 2 个 XML 字符串：

```
$xml = '<?xml version="1.0" encoding="utf-8"?>
<album type="basic" shape="square" orientation="vertical">
    <page width="414" height="414" type="frontCover">
        <sbackground color="0xFFFFFF" locked="false" />
        <pbackground source="" rotation="none" x="0" y="0" width="0" height="0" locked="false" />
        <images/>
        <frame source="" rotation="none" locked="false" />
        <shapes/>
        <texts/>
    </page>

    <page width="414" height="414" type="backCover" useEntirePage="true">
        <sbackground color="0xFFFFFF" locked="false" />
        <pbackground source="" rotation="none" x="0" y="0" width="0" height="0" locked="false" />
        <images/>
        <frame source="" rotation="none" locked="false" />
        <texts/>
        <shapes/>
    </page>
</album>';

$replaceXml = '<?xml version="1.0" encoding="utf-8"?>
<album type="savedCard" sides="double" shape="square" orientation="vertical">
    <page width="414" height="414" type="frontCover" useEntirePage="true" >
        <sbackground color="0xFFFFFF" />
        <pbackground source="/images/1-2800-1860-1358622465873.jpg" rotation="none" x="-108.9" y="0" width="648.82" height="431" transparency="1" flipped="false" mask_frame_name="" />
        <images>
        </images>
        <frame source="" />
        <shapes>
        </shapes>
        <texts>
        </texts>
    </page>
    <page width="414" height="414" type="leftPage" useEntirePage="true" >
        <sbackground color="0xCBCBFF" />
        <pbackground source="" rotation="none" x="0" y="0" width="0" height="0" transparency="1" flipped="false" mask_frame_name="" />
        <images>
        </images>
        <frame source="" />
        <shapes>
        </shapes>
        <texts>
        </texts>
    </page>
</album>'; 
```

接下来需要做：用第二个节点的相同节点的值替换第一个 XML 的节点之一。

我需要用 $replaceXml 的第一页节点替换 $xml 中的第一页节点。所以我需要更换后有这个：

```
$xml = '<?xml version="1.0" encoding="utf-8"?>
<album type="basic" shape="square" orientation="vertical">
    <page width="414" height="414" type="frontCover" useEntirePage="true" >
        <sbackground color="0xFFFFFF" />
        <pbackground source="/images/1-2800-1860-1358622465873.jpg" rotation="none" x="-108.9" y="0" width="648.82" height="431" transparency="1" flipped="false" mask_frame_name="" />
        <images>
        </images>
        <frame source="" />
        <shapes>
        </shapes>
        <texts>
        </texts>
    </page>

    <page width="414" height="414" type="backCover" useEntirePage="true">
        <sbackground color="0xFFFFFF" locked="false" />
        <pbackground source="" rotation="none" x="0" y="0" width="0" height="0" locked="false" />
        <images/>
        <frame source="" rotation="none" locked="false" />
        <texts/>
        <shapes/>
    </page>
</album>'; 
```

做这个的最好方式是什么？

我尝试了下一种方法

```
$xml = simplexml_load_string($xml);
$replaceXml = simplexml_load_string($replaceXml);
$xml->page[0] = $replaceXml->page[0]; 
```

但这似乎是错误的，因为我没有得到我需要的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T16:25:08.820

我找到了如何做到这一点：

假设我们需要替换第一页

```
$pageNum = 0;

$xmlDoc = new DOMDocument();
$xmlDoc->loadXML($xml);

$replace = new DOMDocument();
$replace->loadXML($replaceXml);

$newNode = $replace->getElementsByTagName('page')->item($pageNum);
$oldNode = $xmlDoc->getElementsByTagName('page')->item($pageNum);

$newNode = $xmlDoc->importNode($newNode, true);
$oldNode->parentNode->replaceChild($newNode, $oldNode);

$xmlDoc->saveXML(); 
```

根据需要工作

# c++ - 如何在连接所有客户端套接字的情况下关闭 boost asio 服务器套接字

> ID：15027268
> 
> 赞同：2
> 
> 时间：2013-02-22T15:15:30.543
> 
> 标签：c++, boost-asio, serversocket

我使用[boost:asio::ip::tcp::acceptor](http://www.boost.org/doc/libs/1_37_0/doc/html/boost_asio/reference/ip__tcp/acceptor.html)在我的应用程序中创建服务器套接字。我使用函数关闭此接受器套接字`close`，而不是`stop`函数，`io_service`但所有连接的客户端套接字仅在我的应用程序关闭时关闭。我该如何解决？谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-22T15:41:06.563

执行以下任一操作：

*   [`socket::close()`](http://www.boost.org/doc/libs/1_57_0/doc/html/boost_asio/reference/basic_stream_socket/close/overload1.html)在套接字上调用。
*   销毁套接字。有关在销毁期间如何关闭套接字的详细信息，请参阅[此答案。](https://stackoverflow.com/a/21716271/1053968)

[`io_service::stop()`](http://www.boost.org/doc/libs/1_57_0/doc/html/boost_asio/reference/io_service/stop.html)仅停止事件循环的处理。作品仍可发布到 中`io_service`，现有作品将保留在 中`io_service`。因此，应用程序必须调用`socket::close()`它希望关闭的每个套接字。对于可移植的优雅闭包，在调用[`socket::shutdown()`](http://www.boost.org/doc/libs/1_57_0/doc/html/boost_asio/reference/basic_stream_socket/shutdown/overload1.html)之前调用`close()`。

[花点时间查看 Boost.Asio 的HTTP Server 1](http://www.boost.org/doc/libs/1_57_0/doc/html/boost_asio/examples/cpp03_examples.html)示例可能是值得的。它使用 a[`connection_manager`](http://www.boost.org/doc/libs/1_57_0/doc/html/boost_asio/example/cpp03/http/server/connection_manager.hpp)来关闭所有连接。

# ajax - 从 AJAX XML 响应附加阿拉伯文本冻结 Chrome

> ID：15027270
> 
> 赞同：1
> 
> 时间：2013-02-22T15:15:47.387
> 
> 标签：ajax, google-chrome, utf-8, arabic

我正在使用一个遗留站点，该站点通过 AJAX 获取一些 XML 内容，用它构造一个 HTML 代码块，然后将其附加到一个空白 div。XML 大量使用阿拉伯文本。

它似乎在除 Chrome 之外的所有浏览器中都能正常工作。在 Chrome 中，页面加载将在将字符串附加到 div 时终止。当我从 XML 中删除阿拉伯文本时，页面加载得很好。

生成的 HTML 具有以下元标记：

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
```

并且 XML 有这个编码标签：

```
<?xml version="1.0" encoding="UTF-8"?> 
```

以下是正在传递的 XML 示例：

```
<segment>
    <content>السَّلامُ‮ ‬عَلَيْكُم‮.‬&lt;/content>
    <linked>true</linked>
    <glossWord>السَّلامُ‮ ‬عَلَيْكُم&lt;/glossWord>
    <glossTrans>Hello.  (Literally "Peace be upon you").</glossTrans>
    <glossExpl>This is a very commonly used greeting.  It works for any time of the the day.  It can also be used to mean 'goodbye'.</glossExpl>
</segment> 
```

有趣的花絮，当我在 Chrome 中创建这个问题时，将上面的内容粘贴到 ALSO 破坏了 Chrome 的表单中，浏览器冻结了。我不得不在 Firefox 中重新打开并提交它。如果这是 Chrome 中的一个错误，那么能够找到解决它的方法会很好，因为我不太喜欢告诉人们“不要使用 X 浏览器”访问网站的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-13T21:37:41.740

有一个类似的问题，结果是 10.6.8 上的 Chrome 中的谷歌翻译在我使用多种语言/字符时出现问题。我通过将“notranslate”类添加到我不希望谷歌翻译轰炸的 html 元素来解决这个问题。

要快速查看这是否适合您，请将“notranslate”类添加到您的正文中，然后查看页面是否停止挂起。希望这对你有用！

# javascript - HTML5 Canvas 动画和效果引擎？

> ID：15027272
> 
> 赞同：4
> 
> 时间：2013-02-22T15:15:50.287
> 
> 标签：javascript, animation, html5-canvas

我正在开发一个 HTML5 游戏。服务器端代码（node.js、socket.io）大部分已经完成，我将继续完善客户端代码。

我一直在画布上直接绘制瓷砖/网格，并使用上下文和 clearRect 等移动玩家的精灵。我正在考虑在瓷砖地图/网格上绘制简单的动画和效果，例如：

*   雨，闪电和雷声的音频剪辑。

*   动画一些瓷砖。例如，草瓷砖通过帧循环（如动画 gif）让草在风中飘扬。

*   弹出可以通过鼠标点击或键盘按钮关闭的文本框。

我查看了这个[长长的 JavaScript 引擎列表，](https://github.com/bebraw/jswiki/wiki/Game-Engines)并试用了 CraftyJS 和 MelonJS，但其中大部分是为平台或街机风格游戏制作的，其中许多还没有准备好投入生产或维护不善。

是否有一个简单、轻量级、生产质量的 HTML5 画布引擎可以完成我想要的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T15:25:02.770

看看[**CreateJS**](http://www.createjs.com)；对于您正在寻找的东西，它是一个很棒的引擎。

*   [EaseJS](http://www.createjs.com/#!/EaselJS)可用于 Canvas 元素
*   [SoundJS](http://www.createjs.com/#!/SoundJS)用于您要播放的音频剪辑

它维护得很好，但还没有发布 1.0 版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T15:34:08.060

它只是你想要实现的动画精灵吗？您可以在不使用游戏引擎的情况下轻松完成此操作。至于对话框 - 你可以在画布上使用 dom 元素。

这是我用 javascript 编写的精灵类 - 也许它有一些帮助:)

```
var FrtlsSprite = Class.extend({
init: function(bitmap, offsetX, offsetY, frameWidth, frameHeight, frameCount, loop){
    this.dtotal=0;
    this.framerate=0.007;
    this.loop = loop;
    this.isPlaying=false;

    this.bitmap = new Image();
    this.bitmap.src = bitmap;
    this.frames= new Array();
    this.currentFrame=0;
    this.endFrame=0;

    for(var i=0;i<frameCount;i++){
        this.frames.push(new FrtlsFrame(offsetX+i*frameWidth, offsetY+0, frameWidth, frameHeight));
    }
},
update: function(dt){
    if(this.isPlaying){
        this.dtotal += dt   //we add the time passed since the last update, probably a very small number like 0.01
        if (this.dtotal >= this.framerate){
            this.dtotal -= this.framerate; 
            this.currentFrame++;
            if(this.currentFrame==this.endFrame){
                if(this.loop == false){
                    this.stop();
                }
                else{
                    this.currentFrame=0;
                }
            }
        }
    }
},
draw: function(){
    fruitless.ctx.drawImage(this.bitmap, 
                            this.frames[this.currentFrame].pos.x, 
                            this.frames[this.currentFrame].pos.y, 
                            this.frames[this.currentFrame].dimensions.x, 
                            this.frames[this.currentFrame].dimensions.y, 
                            0, 
                            0, 
                            this.frames[this.currentFrame].dimensions.x*fruitless.worldScale, 
                            this.frames[this.currentFrame].dimensions.y*fruitless.worldScale);
},
play:function(frame){
    this.currentFrame=(frame==undefined)?0:frame;
    this.endFrame = this.frames.length-1
    this.isPlaying=true;
},
playTo:function(frame, endFrame){
    this.currentFrame=frame;
    this.endFrame = endFrame;
    this.isPlaying=true;
},

stop:function(frame){
    this.currentFrame=(frame==undefined)?this.currentFrame:frame;
    this.isPlaying=false;
} 
```

});

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T16:28:17.810

[cgSceneGraph](http://gwennaelbuchet.github.com/cgSceneGraph/)将为您完成这项工作。查看[示例网页](http://gwennaelbuchet.github.com/cgSceneGraph/examples.html)，有一些带有动画 Sprite 的示例。它是框架的原生组件，并且非常易于使用多个功能，例如动画精灵的同一实例中的多动画，spritesheet 的使用，...

# iphone - UITableView Moverows 崩溃

> ID：15027276
> 
> 赞同：0
> 
> 时间：2013-02-22T15:16:02.863
> 
> 标签：iphone, objective-c, xcode, uitableview

我对objective-c比较陌生，并且我有一些编程经验。所以我的问题如下：

我在用

```
- (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)fromIndexPath 
    toIndexPath:(NSIndexPath *)toIndexPath

{

    NSString *item = [test objectAtIndex:[fromIndexPath row]];

    [test removeObject:item];

    [test insertObject:item atIndex:[toIndexPath row]];

} 
```

这样我就可以在编辑样式时移动行。当测试数组中的对象是唯一的时，一切正常。但是当 2 个或更多对象相同时，应用程序崩溃。例如，如果数组中的字符串是：@" BOB" ​​， @"LINDA" ， "JOHN" ，我可以移动行就好了。但是当字符串是：@"BOB"，@"LINDA"，@"JOHN"，@"BOB"，"@BOB “应用程序崩溃

原因如下：

***由于未捕获的异常“NSRangeException”而终止应用程序，原因：“-[__NSCFArray insertObject:atIndex:]: index (2) beyond bounds (1)”

你能帮我么？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:26:00.017

使用`insertObject:atIndex:`时必须确保插入对象的索引不大于或等于`[array count]`，否则必须使用`[array addObject:item]`

尝试类似：

```
NSString *item = [test objectAtIndex:[fromIndexPath row]];
[test removeObject:item];
if ([toIndexPath row] < [test count]) {
    [test insertObject:item atIndex:[toIndexPath row]];
}
else {
    [test addObject:item];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T15:39:35.580

具有相同字符的字符串的地址应该相同（常量指针），因此如果您删除一个项目@“BOB”，如果其中有另一个字符串@“BOB”，您可能会从数组中删除它们。

我宁愿使用该`removeObjectAtIndex`函数而不是与对象相关的删除函数，并在必要时将插入索引路径调整为-1（如果到索引路径位于从索引路径后面）。

**注意**：

我刚刚做了一个小测试，确实从数组中删除了 @"BOB" ​​两次这个字符串删除了两个字符串。

# sed - 如何使用 sed 在第二个模式匹配中取消注释多行？

> ID：15027277
> 
> 赞同：4
> 
> 时间：2013-02-22T15:16:04.043
> 
> 标签：sed, pattern-matching, lines, multiple-instances

我正在尝试使用 sed 取消注释此配置文件中的一段文本。我提出的代码取消注释从第一个匹配开始并包括模式匹配的 7 行，但我需要它只在第二个匹配上工作并跳过第一个匹配。

```
 sed '/#location.~.*$/,+6s/#/ /' default.conf 
```

* * *

```
# proxy the PHP scripts to Apache listening on 127.0.0.1:80
#
#location ~ \.php$ {
#    proxy_pass   http://127.0.0.1;
#}

# pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000
#
#location ~ \.php$ {                
#    root           html;
#    fastcgi_pass   127.0.0.1:9000;
#    fastcgi_index  index.php;
#    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;
#    include        fastcgi_params;
#}
# pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000
# 
```

>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T22:35:33.480

这可能对您有用（GNU sed）：

```
sed 'x;/./{x;/#location/,+6s/#/ /;b};x;/#location/h' file 
```

使用保持空间 (HS) 来存储标志，并且仅在标志已设置时才对地址范围起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T15:29:17.473

我想说，使用 shell 脚本来更改代码是有风险的。许多特殊情况可能使其失败。

我将其称为“文本转换”。它将删除`#`从`#location ~ \.php$ {`行到第一`#}`行的前导。

**awk**在线：

```
 awk '/^#location ~/{s=1}s{if($0~/^#}/)s=0;sub("#"," ")}1' file 
```

看例子：（文件是你的内容）

```
kent$  awk '/^#location ~/{s=1}s{if($0~/^#}/)s=0;sub("#"," ")}1' file
# proxy the PHP scripts to Apache listening on 127.0.0.1:80
#
 location ~ \.php$ {
     proxy_pass   http://127.0.0.1;
 }

# pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000
#
 location ~ \.php$ {                
     root           html;
     fastcgi_pass   127.0.0.1:9000;
     fastcgi_index  index.php;
     fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;
     include        fastcgi_params;
 }
# pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000
# 
```

我希望上面的输出是你需要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T15:24:35.870

使用[awk](/questions/tagged/awk "显示标记为“awk”的问题")（这比`sed`这个任务更合适也更容易）：

```
awk -F# '
    /^#location/{l++}
    l<2 {print}
    l==2{print $2}
    l==2 && $2 ~ "}" {l=0;next}
' file.txt 
```

# jquery - 防止提交带有 onclick 事件的提交按钮

> ID：15027280
> 
> 赞同：18
> 
> 时间：2013-02-22T15:16:10.243
> 
> 标签：jquery, submit, preventdefault

我想阻止带有 onclick 事件的提交按钮提交：

```
$j('form#userForm .button').click(function(e) {
    if ($j("#zip_field").val() > 1000){
        $j('form#userForm .button').attr('onclick','').unbind('click');
        alert('Sorry we leveren alleen inomstreken hijen!');
        e.preventDefault();
        return false;
    }
}); 
```

这是提交按钮：

```
<button class="button vm-button-correct" type="submit"
 onclick="javascript:return myValidator(userForm, 'savecartuser');">Opslaan</button> 
```

它将显示“警报”功能并删除 onclick 事件，但无论如何都会提交表单。在提交之前手动删除onclick事件将解决问题。然而，这是核心功能，我不想删除它。

**编辑：**

这肯定是由 onclick 选择器引起的。如何强制我的 jQuery 脚本立即重新加载 onclick 事件？在jquery代码之前添加：`$j('form#userForm .button').attr('onclick','');`将解决问题..但是我的验证将不再起作用......

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-22T15:16:59.710

您需要将事件添加为参数：

```
$j('form#userForm .button').click(function(event) { // <- goes here !
    if ( parseInt($j("#zip_field").val(), 10) > 1000){
        event.preventDefault();
        $j('form#userForm .button').attr('onclick','').unbind('click');
        alert('Sorry we leveren alleen inomstreken hijen!');
    }   
}); 
```

此外，`val()`始终返回一个字符串，因此一个好的做法是在将其与数字进行比较之前将其转换为数字，我不确定您是否真的针对函数内部的所有`.button`元素`#userForm`，或者您是否应该改用`this`？

如果您使用的是 jQuery 1.7+，那么您应该真正考虑使用`on()`and `off()`。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-02-22T15:28:13.793

基本上，如果您将按钮类型从 更改`type="submit"`为`type="button"`，则此类按钮将不会提交表单，并且不需要变通方法。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-22T15:18:15.880

不要忘记有函数/事件参数，但必须指定参数：

```
$("#thing").click(function(e) {
  e.preventDefault();
}); 
```

这样，提交就会停止，因此您可以对其进行条件化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T16:28:39.557

最好的方法是在表单的提交事件处理程序中做所有事情。删除内联 onclick 并在提交函数中运行它

```
$j('#userForm').submit(function(e) {
    if (+$j("#zip_field").val() > 1000){
        alert('Sorry we leveren alleen inomstreken hijen!');
        return false;
    }
    return myValidator(userForm, 'savecartuser');
}); 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2015-04-29T18:27:24.153

我相信有一个更简单的方法：

```
$j('form#userForm .button').click(function(event) { // <- goes here !
    if ( parseInt($j("#zip_field").val(), 10) > 1000){
        event.stopPropagation();
    }   
}); 
```

# c++ - 每个 C++，从向量元素中提取

> ID：15027282
> 
> 赞同：82
> 
> 时间：2013-02-22T15:16:11.867
> 
> 标签：c++, for-loop, vector, each

我正在尝试对攻击向量进行 foreach，每次攻击都有一个**唯一的 ID**，例如 1-3。

类方法接受1-3的键盘输入。

我正在尝试使用 foreach 来遍历我在 m_attack 中的元素，以查看数字是否匹配，如果匹配...做点什么。

我看到的问题是这样的：

```
a'for each' statement cannot operate on an expression of type "std::vector<Attack 
```

我是否完全错了，我有 C# 经验并且是我所基于的，任何帮助将不胜感激。

我的代码如下：

在标题中

```
vector<Attack> m_attack; 
```

在班上

```
int Player::useAttack (int input)
{

    for each (Attack* attack in m_attack) // Problem part
    {  
        //Psuedo for following action
        if (attack->m_num == input)
        {
            //For the found attack, do it's damage
            attack->makeDamage();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：188
> 
> 时间：2013-02-22T15:38:29.587

对于下一个示例，假设您使用 C++11。基于范围的 for 循环示例：

```
for (auto &attack : m_attack) // access by reference to avoid copying
{  
    if (attack->m_num == input)
    {
        attack->makeDamage();
    }
} 
```

您应该`const auto &attack`根据`makeDamage()`.

您可以`std::for_each`从标准库 + lambdas 中使用：

```
std::for_each(m_attack.begin(), m_attack.end(),
        [](Attack * attack)
        {
            if (attack->m_num == input)
            {
                attack->makeDamage();
            }
        }
); 
```

如果您不习惯使用`std::for_each`，可以`m_attack`使用迭代器进行循环：

```
for (auto attack = m_attack.begin(); attack != m_attack.end(); ++attack)
{  
    if (attack->m_num == input)
    {
        attack->makeDamage();
    }
} 
```

使用`m_attack.cbegin()`and`m_attack.cend()`获取`const`迭代器。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-02-22T15:19:32.190

这是在 C++(11) 中循环执行的方式：

```
 for (const auto& attack : m_attack)
    {  
        if (attack->m_num == input)
        {
            attack->makeDamage();
        }
    } 
```

C++中没有`for each`。另一种选择是将[std::for_each](http://en.cppreference.com/w/cpp/algorithm/for_each)与合适的仿函数一起使用（这可以是任何可以用`Attack*`as 参数调用的东西）。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-05-03T21:04:59.123

支持该`for each`语法作为 Visual Studio 中本机 c++ 的扩展。

[msdn](http://blogs.msdn.com/b/arich/archive/2004/09/08/227139.aspx)中提供的示例

```
#include <vector>
#include <iostream>

using namespace std;

int main() 
{
  int total = 0;

  vector<int> v(6);
  v[0] = 10; v[1] = 20; v[2] = 30;
  v[3] = 40; v[4] = 50; v[5] = 60;

  for each(int i in v) {
    total += i;
  }

  cout << total << endl;
} 
```

（适用于 VS2013）不是可移植/跨平台的，但可以让您了解如何使用`for each`.

标准替代方案（在其余答案中提供）适用于任何地方。最好使用这些。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-02-22T15:30:20.090

`for_each`C++在其语法中没有循环功能。您必须使用 c++11 或使用模板函数`std::for_each`。

```
struct Function {
    int input;
    Function(int input): input(input) {}
    void operator()(Attack& attack) {
        if(attack->m_num == input) attack->makeDamage();
    }
};
Function f(input);
std::for_each(m_attack.begin(), m_attack.end(), f); 
```

# java - 如何覆盖 JPanel 的默认布局管理器？

> ID：15027287
> 
> 赞同：0
> 
> 时间：2013-02-22T15:16:36.150
> 
> 标签：java, swing, jpanel, layout-manager

如何覆盖`JPanel`后代的默认布局管理器？我有自己的班级，想`null`成为默认班级。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T15:22:10.710

使用`JPanel`接受 a 的构造函数`LayoutManager`：

```
import java.awt.LayoutManager;

import javax.swing.JPanel;

public class MyPanel extends JPanel {
    public MyPanel() {
        this(true);
    }

    public MyPanel(boolean isDoubleBuffered) {
        super(null, isDoubleBuffered);
    }

    public MyPanel(LayoutManager layout, boolean isDoubleBuffered) {
        super(layout, isDoubleBuffered);
    }

    public MyPanel(LayoutManager layout) {
        this(layout, true);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T15:34:18.190

您可以将初始化程序块添加到您的子类：

```
public class MyPanel extends JPanel {

    {
         setLayout(null);
    }

    // ... class implementation
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T15:22:31.190

```
JPanel panel = new JPanel();
panel.setLayout(new MyLayout()); 
```

或者

```
contentPane.setLayout(null); 
```

# wordpress - wordpress - 从缩略图名称/参考中获取缩略图大小

> ID：15027296
> 
> 赞同：1
> 
> 时间：2013-02-22T15:17:18.263
> 
> 标签：wordpress, thumbnails

我已经设置了一个缩略图

`add_image_size( 'banner_image', 1098, 400, true );`

现在注册后我希望能够从参考中获取尺寸，即

```
get_thumbnail_size( 'banner_image' )
{

} 
```

有没有这样做？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T16:43:18.483

```
global $_wp_additional_image_sizes;

echo $_wp_additional_image_sizes['banner_image']['width'];   // output width
echo $_wp_additional_image_sizes['banner_image']['height'];  // output height 
```

# html - HTML水平滚动条中的异常间隙

> ID：15027297
> 
> 赞同：0
> 
> 时间：2013-02-22T15:17:19.890
> 
> 标签：html, css, scrollbar, gaps-in-visuals

好的，我有一个带有滚动条的 DIV，它们都是必需的，这是我开始使用的简单布局：

```
<html>
<head>
<title>Testing</title>
</head>

<style>
.Test {
    overflow-x: scroll !important;
    overflow-y: scroll !important;
    height: 300px;
    width: 100%;
}
</style>

<body>
    <div class="Test"></div>
</body>
</html> 
```

当这在 IE9 中显示时，我在水平滚动条的右侧大小上有一个间隙。我附上了一张图片来显示问题。

![显示的示例](../Images/f5f7c5f2e4e84a8c9d319486c27a50b1.png) 任何有关导致此问题的原因的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T16:43:20.173

您可以尝试在 div 中设置滚动条的样式

```
scrollbar-track-color: #cacaca; 
```

这使我的滚动条颜色统一。

[这是我发现它以及其他一些造型技巧的地方](http://www.dreamincode.net/forums/topic/1207-div-scrollbars-color/)

# php - microtime() 中的 PHP Float 和 Double 数据类型

> ID：15027299
> 
> 赞同：0
> 
> 时间：2013-02-22T15:17:22.617
> 
> 标签：php, casting, microtime

我想了解各种数据类型如何控制 microtime() 函数的输出显示方式？

这里有3个场景：

**1** . 这将以浮动格式显示 microtime 函数的输出，因为我已将布尔值设置为 true。

我想知道，float 函数默认显示多少位小数（在本例中为 4）？

这与 CPU 的架构有什么关系？

```
lab$ php -r 'echo microtime(true),"\n";'
1361544317.2586 
```

**2** . 在这里，microtime() 函数的输出被强制转换为双精度格式。

那么，这是否意味着它最多只能显示小数点后 6 位微秒？它与浮点数及其最大尺寸/精度有何不同？

```
lab$ php -r 'echo (double)microtime(),"\n";'
0.751238 
```

**3** . 这是 microtime() 函数的默认用法，它打印微秒和 unix 纪元时间戳：

```
lab$ php -r 'echo microtime(),"\n";' output: 0.27127200 1361544378 
```

我想了解这一点，因为在很多地方我都看到 microtime() 被用来以这种方式为 mt_rand() PRNG 生成种子：

```
mt_srand((double)microtime() * 1000000) 
```

在这里进行类型转换并乘以 10^6 有什么用？mt_srand() 的参数的最大可能值是多少？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T15:44:34.410

浮点数存在一个问题：您可以拥有大数字或高浮点精度。这个问题不适合大量秒（自 1970/1/1 以来的秒数）和高精度 - 微秒的问题。

* * *

PHP 尝试通过将时间戳的浮点部分和自纪元以来的整秒数作为字符串中的两个分隔值返回来解决该问题。

对于精度不太重要的情况，PHP 还支持将时间戳作为浮点值返回，四舍五入到最接近的微秒。在我的系统上，准确度是 10.000 秒，如您的示例所示。我不知道这是否被授予。

引用 PHP 手册：

> 默认情况下，microtime() 以“msec sec”的形式返回一个字符串，其中 sec 是以 Unix 纪元（格林威治标准时间 1970 年 1 月 1 日 0:00:00）以来的秒数为单位测量的当前时间，msec 是自 sec 以来经过的微秒数，以秒表示。
> 
> 如果 get_as_float 设置为 TRUE，则 microtime() 返回一个浮点数，它表示自 Unix 纪元以来的当前时间，以秒为单位，**精确到最接近的微秒**。

这意味着，如果您需要最准确的精度，您应该`microtime()`在没有参数的情况下使用`get_as_float`，然后使用字符串和/或 bc_math 操作创建最终时间戳。

# android - 如何在 soundPool (Android) 中逐渐加载声音？

> ID：15027300
> 
> 赞同：0
> 
> 时间：2013-02-22T15:17:25.007
> 
> 标签：android, audio, load, soundpool

我正在做一个有声音的软键盘。对于每个字符都是一些声音。当我单击输入字段时，键盘出现需要很长时间（3-4 秒）。因为我必须在 onCreate() 方法中加载每个声音。 `soundPool.load(context, R.raw.a, 1); soundPool.load(context, R.raw.b, 1) etc.;`以后可以加载每个声音吗？因为如果我不播放任何声音。我为我的英语感到抱歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T13:39:07.297

您是否尝试过低优先级的后台线程？首先在后台线程中加载最常用的键，然后再加载不太常用的键。您的前台任务只是加载图像，如果在加载声音之前按下某个键，则可能会加载默认声音。

然后当一个键被击中时，检查是否加载了声音。如果不是，则播放默认声音，否则播放按键自己的声音。

# html - 更改标题属性的字体大小？

> ID：15027301
> 
> 赞同：0
> 
> 时间：2013-02-22T15:17:24.903
> 
> 标签：html, css

更改标题属性字体大小的最简单方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T15:18:06.783

您不能：`title`属性以系统特定且非 HTML 的方式显示。

要调整它们的外观，您必须在鼠标悬停时构建和显示自己的 div（或使用现有的“气泡”库）。

* * *

根据要求 ：

这是一个使用 jQuery 的最小“气泡”库：

```
$('[data-bubble]').hover(function(e){
  if (window.bubble) window.bubble.remove();
  bubble = $('<div>', {
    text: $(this).data('bubble'),
    css: {
      position:'fixed',
      top:e.pageY, left:e.pageX,
      background:'yellow'
    }
  }).appendTo(document.body);
}, function(){
  window.bubble.remove();
}); 
```

用法 ：

```
<span data-bubble="some Text">HOVER THIS</span> 
```

**[示范](http://jsbin.com/axinaz/2/)**

我会让你做你喜欢的风格。如果你不使用 jQuery，我让你将它移植到 vanilla-js，我想你明白了。

# sql - T-SQL 安装/升级脚本作为事务

> ID：15027306
> 
> 赞同：1
> 
> 时间：2013-02-22T15:17:47.747
> 
> 标签：sql, sql-server, tsql, transactions

我正在尝试编写一个 T-SQL 脚本来升级当前正在部署的系统。该脚本将包含以下内容的混合：

*   新表
*   现有表上的新列
*   新功能
*   新的存储过程
*   对存储过程的更改
*   新观点
*   等等

由于这是一个相当大的升级，我希望脚本在其中一个部分失败时回滚。我在下面有我尝试的代码的大纲：

```
DECLARE @upgrade NVARCHAR(32);
SELECT @upgrade = 'my upgrade';

BEGIN TRANSACTION @upgrade
BEGIN
    PRINT 'Starting';
    BEGIN TRY
        CREATE TABLE x ( --blah...
        );

        ALTER TABLE y --blah...
        );

        CREATE PROCEDURE z AS BEGIN ( --blah...
        END
        GO  --> this is causing trouble!

        CREATE FUNCTION a (  --blah...

    END TRY
    BEGIN CATCH    
        PRINT 'Error with transaction. Code: ' + @@ERROR + '; Message: ' + ERROR_MESSAGE();
        ROLLBACK TRANSACTION @upgrade;
        PRINT 'Rollback complete';
        RETURN;
    END TRY
END
PRINT 'Upgrade successful';
COMMIT TRANSACTION @upgrade;
GO 
```

*注意 - 我知道有些语法并不完美 - 我不得不重新输入代码*

好像我不能将存储过程放入事务块中。是否有一个原因？是因为这个词的使用`GO`吗？如果是这样，我怎样才能将 SP 放入事务块中？什么可以进入交易块有什么限制？或者，有什么比我想要实现的更好的选择？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T20:33:27.413

正如 Thomas Haratyk 在他的回答中所说，你的问题是“去”。但是，您可以在事务中拥有任意数量的批次。不喜欢这样的是 try/catch。这是一个简单的概念验证：

```
begin tran
go
select 1
go
select 2
go
rollback

begin try
    select 1
    go
    select 2
    go
end try
begin catch
    select 1
end catch 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T15:27:39.520

删除 GO 并使用动态 sql 创建您的过程，否则它将失败。

```
EXEC ('create procedure z 
  as
  begin
    print "hello world"
  end') 
```

GO 不是 SQL 关键字，它是一个批处理分隔符。因此它不能包含在事务中。

请参阅这些主题以获取更多信息：

[sql 错误：'CREATE/ALTER PROCEDURE' 必须是查询批处理中的第一条语句？](https://stackoverflow.com/questions/9051006/sql-errorcreate-alter-procedure-must-be-the-first-statement-in-a-query-batch)

[在事务中使用“GO”](https://stackoverflow.com/questions/971177/using-go-within-a-transaction)

[http://msdn.microsoft.com/en-us/library/ms188037.aspx](http://msdn.microsoft.com/en-us/library/ms188037.aspx)

# javascript - jQuery 向下滑动导航

> ID：15027307
> 
> 赞同：0
> 
> 时间：2013-02-22T15:17:50.167
> 
> 标签：javascript, jquery

我正在尝试构建一个简单的 jQuery 向下滑动导航，但在打开和关闭导航时遇到了一些问题。

**我有如下导航。**

```
<ul id="nav">
<li>home</li>
<li class="parent">Clothing
    <ul>
        <li>child</li>
        <li>child</li>
        <li>child</li>
    </ul>
</li>
<li class="parent">shoes
    <ul>
        <li>child</li>
        <li>child</li>
        <li>child
                       <ul>
                          <li>child child</li>
                       </ul>
                    </li>
    </ul>
</li> 
```

**使用以下 jQuery**

```
var $j  =   jQuery.noConflict();

$j(document).ready(function() {

$j('#nav').children('.parent').click(function(e){
    e.preventDefault();
    $this = $j(this);
    $j('#nav').children('.parent').children('ul').stop().slideUp('slow', function(){
        $this.children('ul').stop().slideToggle('slow');        
    });
});

}); 
```

现在，当我单击子导航滑出时，再次单击什么也不做，我需要它向上滑动。如果我单击另一个，我需要做的是让扩展的导航（如果有的话）向上滑动，然后新的导航向下滑动，但它只是不想对我正常工作！它有问题，两者都同时显示，有时不显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T15:44:17.520

看到这个...

```
var $j  =   jQuery.noConflict();

$j(document).ready(function() {
    $j('#nav > .parent').on('click', function(e){
        e.preventDefault();
        $j('#nav > .parent').children().stop().slideUp('slow');
        $j(this).children().stop().slideToggle('slow');
    });
}); 
```

请参阅此[jSfiddle 示例](http://jsfiddle.net/SUmGz/1/)

# deadlock - 当一个模拟返回一个模拟作为默认值时，gtest 在解构夹具期间挂起

> ID：15027316
> 
> 赞同：2
> 
> 时间：2013-02-22T15:18:17.043
> 
> 标签：deadlock, googletest, gmock

我发现了一种我无法理解也无法解决的奇怪行为。我有一个工厂 FooFactory，它提供了一些真实的对象类型`Foo`。为了测试`Foo`我模拟的对象的方法调用`FooFactory`，以这种方式`MockFooFactory`返回`MockFoo`我可以期待调用的对象。

测试（不包括在内）工作正常，但在 MockFooFactory 的解构期间测试 gmock/gtest 挂起（似乎是互斥问题）。准确地说，删除 Default ON_CALL 会导致创建 Mutex 时出现问题。

智能指针一定有问题，当我构建没有智能指针的版本时，它工作正常。但是我测试的软件使用 shared_ptr 作为智能指针，所以我无法摆脱它们。

这是我构建的重现错误的示例：

```
#include <boost/shared_ptr.hpp>
#include <gtest/gtest.h>
#include <gmock/gmock.h>

class Foo
{
public:
    void doSomething() {}
};
typedef boost::shared_ptr<Foo> FooPtr;

class FooFactory {
public:
    FooPtr create() {
        return FooPtr(new Foo());
    }
};
typedef boost::shared_ptr<FooFactory> FooFactoryPtr;

class MockFoo : public Foo {
public:
    MOCK_METHOD0(doSomething, void());
};
typedef boost::shared_ptr<MockFoo> MockFooPtr;

class MockFactory : public FooFactory
{
public:
    MOCK_METHOD0(create, FooPtr());
};
typedef boost::shared_ptr<MockFactory> MockFactoryPtr;

using ::testing::Return;
class Fixture : public ::testing::Test {
protected:

    virtual void SetUp() {
        mockFoo = MockFooPtr(new MockFoo());
        mockFactory = MockFactoryPtr(new MockFactory());

        ON_CALL(*mockFactory, create()).WillByDefault(Return(mockFoo));
    }

    MockFactoryPtr mockFactory;
    MockFooPtr mockFoo;
};

TEST_F(Fixture, Test)
{
    /* Not needed */
} 
```

有没有人遇到过同样的问题或有解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T23:35:45.943

好的，在更新到 gmock 的主干版本后一切都很好，因为他们解决了这个问题：

[https://code.google.com/p/googlemock/issues/detail?id=79](https://code.google.com/p/googlemock/issues/detail?id=79)

# jquery-ui - jQuery 工具提示在标题属性中编码文本

> ID：15027318
> 
> 赞同：1
> 
> 时间：2013-02-22T15:18:18.920
> 
> 标签：jquery-ui, jquery-tooltip, jquery-ui-tooltip

我已将 jQuery UI 更新到最新版本（从 1.9.x 开始），但有些问题我无法解决，即：在标题属性中，我有时会存储 HTML，例如：

```
Start Date: 2012.01.01<br />End Date: 2012.02.01 
```

在升级工具提示文本之前没有编码，所以我在两个单独的行中看到了开始和结束日期。但是现在，编码中的文本，我看到了
. 有没有办法解决它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T01:10:10.510

我的回答是对 Fran 所说的扩展。

也遇到了这个。您可以在标题中存储简单的 html 标签。您现在不仅需要调用 tooltip，还需要做更多的工作。您必须返回您的 html 编码标题。我已经用粗体 <b>、下划线 <u> 和断线</br> 对此进行了测试。

```
$( document ).tooltip( {
  content: function() {
    return  $( this ).attr( "title" );
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T14:08:48.900

问题是它`title`不承认 HTML 标签。要使用工具提示将样式应用于`title`属性中的文本，您应该使用以下内容：

HTML：

```
<a id="mytooltip" href="#" title="">Tooltips</a> 
```

JS：

```
$('#mytooltip').tooltip({
   items: "[title]",
   content: function() {
     return "<b>That's what this widget is</b>";
   }
}); 
```

您可以使用任何 HTML 标记（甚至是表格​​、图像等）和 JQueryUI Tooltip 显示它在 JSBin 中运行：http: [//jsbin.com/ukejok/3/](http://jsbin.com/ukejok/3/)

# c++ - 无效密文异常

> ID：15027321
> 
> 赞同：1
> 
> 时间：2013-02-22T15:18:23.923
> 
> 标签：c++, crypto++

我是cryptopp的新手，我尝试加密和解密文件中的文本。在这些行之后，我总是在内存位置 0x0012efe4 处收到此错误 CryptoPP::InvalidCiphertext：

```
CryptoPP::StreamTransformationFilter stfDecryptor(cbcDecryption, new CryptoPP::StringSink( decryptedtext ) );
stfDecryptor.Put( reinterpret_cast<const unsigned char*>( ciphertext.c_str() ), ciphertext.length());
stfDecryptor.MessageEnd(); 
```

加密/解密代码：

```
BOOL Encryption()
{
    // Key and IV setup
    byte key[ CryptoPP::AES::DEFAULT_KEYLENGTH ], iv[ CryptoPP::AES::BLOCKSIZE ];
    memset( key, 0x00, CryptoPP::AES::DEFAULT_KEYLENGTH );
    memset( iv, 0x00, CryptoPP::AES::BLOCKSIZE );

    HW_PROFILE_INFO hwProfileInfo;
    GetCurrentHwProfile(&hwProfileInfo);

    (hwProfileInfo.szHwProfileGuid, strlen(hwProfileInfo.szHwProfileGuid), key);     
    (hwProfileInfo.szHwProfileGuid, strlen(hwProfileInfo.szHwProfileGuid), iv);

    // String and Sink setup
    string STRING;
    ifstream infile;
    infile.open ("test2.txt");

    getline(infile,STRING, '\0'); // Saves the line in STRING.
    char cFilm[1000];
    strcpy(cFilm,STRING.c_str());
    infile.close();

    std::string plaintext = cFilm;
    std::string ciphertext;
    std::string decryptedtext;

    // Dump Plain Text
    std::cout << "Plain Text (" << plaintext.size() << " bytes)" << std::endl;
    std::cout << plaintext;
    std::cout << std::endl << std::endl;

    // Create Cipher Text
    CryptoPP::AES::Encryption aesEncryption(key, CryptoPP::AES::DEFAULT_KEYLENGTH);
    CryptoPP::CBC_Mode_ExternalCipher::Encryption cbcEncryption( aesEncryption, iv );
    CryptoPP::StreamTransformationFilter stfEncryptor(cbcEncryption, new CryptoPP::StringSink( ciphertext ) );
    stfEncryptor.Put( reinterpret_cast<const unsigned char*>( plaintext.c_str() ), plaintext.length() + 1 );
    stfEncryptor.MessageEnd();

    // Dump Cipher Text
    ofstream write ("test2a.txt", ios::out | ios::binary);
    int at = ciphertext.length()+ 1;
    write.write(ciphertext.c_str(),at);
    write.close();
    ciphertext.erase();

    remove("test2.txt");
    rename("test2a.txt","c:\\test2.txt");

    return 0;
}

BOOL Decryption()
{
    // Key and IV setup
    byte key[ CryptoPP::AES::DEFAULT_KEYLENGTH ], iv[ CryptoPP::AES::BLOCKSIZE ];
    memset( key, 0x00, CryptoPP::AES::DEFAULT_KEYLENGTH );
    memset( iv, 0x00, CryptoPP::AES::BLOCKSIZE );

    HW_PROFILE_INFO hwProfileInfo;
    GetCurrentHwProfile(&hwProfileInfo);

    // String and Sink setup
    string STRING2;
    ifstream infile2;
    infile2.open ("test2.txt",ios::binary);

    getline(infile2,STRING2, '\0'); // Saves the line in STRING.
    char cFilm2[1000];
    strcpy(cFilm2,STRING2.c_str());
    infile2.close();

    std::string ciphertext (cFilm2);
    std::string decryptedtext;

    // Decrypt
    CryptoPP::AES::Decryption aesDecryption(key, CryptoPP::AES::DEFAULT_KEYLENGTH);
    CryptoPP::CBC_Mode_ExternalCipher::Decryption cbcDecryption( aesDecryption, iv );

    CryptoPP::StreamTransformationFilter stfDecryptor(cbcDecryption, new CryptoPP::StringSink( decryptedtext ) );
    stfDecryptor.Put( reinterpret_cast<const unsigned char*>( ciphertext.c_str() ), ciphertext.length());
    stfDecryptor.MessageEnd();

    // Dump Decrypted Text
    ofstream write ("test2a.txt", ios::out | ios::binary);
    write << decryptedtext;
    write.close();
    decryptedtext.erase();

    remove("test2.txt");
    rename("test2a.txt","test2.txt");

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T03:48:14.537

`getline`您的主要问题似乎是`'\0'`在`Decryption()`. `Encryption()`如果它不包含空字符，这可能适用于纯文本，但密文很可能`'\0'`在整个过程中都充满了 s。

似乎您已经正确识别出加密文件包含二进制数据，但您需要按原样读取它，例如使用[`std::ifstream::read`](http://en.cppreference.com/w/cpp/io/basic_istream/read)or [`std::istreambuf_iterator`](http://en.cppreference.com/w/cpp/iterator/istreambuf_iterator)。

我在下面更新了您的示例代码：

```
#include "windows.h"

#include <algorithm>  // for std::copy
#include <fstream>
#include <iostream>
#include <iterator>  // for std::istreambuf_iterator
#include <string>

#ifdef _MSC_VER
#  pragma warning(push)
#  pragma warning(disable: 4100 4127 4189 4244)
#endif
#include "cryptopp/aes.h"
#include "cryptopp/config.h"
#include "cryptopp/files.h"
#include "cryptopp/filters.h"
#include "cryptopp/modes.h"
#ifdef _MSC_VER
#  pragma warning(pop)
#endif

namespace {
const std::string original_file("original.txt");
const std::string encrypted_file("encrypted.txt");
const std::string decrypted_file("decrypted.txt");
const int key_size(CryptoPP::AES::DEFAULT_KEYLENGTH);
const int iv_size(CryptoPP::AES::BLOCKSIZE);
}

void GetKeyAndIv(byte* key, byte* iv) {
  HW_PROFILE_INFOA profile;
  GetCurrentHwProfileA(&profile);
  char* guid(profile.szHwProfileGuid);
  assert(std::char_traits<char>::length(guid) >= key_size + iv_size);
  // Assign first 'key_size' chars of GUID to 'key'
  std::copy(guid, guid + key_size, key);
  // Assign next 'iv_size' chars of GUID to 'iv'
  std::copy(guid + key_size, guid + key_size + iv_size, iv);
};

void Encrypt() {
  // Initialise the key and IV
  byte key[key_size] = {0}, iv[iv_size] = {0};
  GetKeyAndIv(key, iv);

  // Read the file contents to a string and output to cout.  Safest to read
  // contents as binary data, although non-printable characters shouldn't be
  // output to cout.
  std::ifstream infile(original_file.c_str(), std::ios::binary);
  const std::string plaintext((std::istreambuf_iterator<char>(infile)),
                               std::istreambuf_iterator<char>());
  infile.close();
  std::cout << "Plain Text (" << plaintext.size() << " bytes)\n"
            << plaintext << "\n\n";

  // Encrypt
  CryptoPP::AES::Encryption cipher(key, key_size);
  CryptoPP::CBC_Mode_ExternalCipher::Encryption encryption(cipher, iv);
  std::string cipher_text;
  CryptoPP::StreamTransformationFilter filter(encryption,
      new CryptoPP::StringSink(cipher_text));
  filter.Put(reinterpret_cast<const byte*>(plaintext.c_str()), plaintext.size());
  filter.MessageEnd();

  // Dump cipher text
  std::ofstream outfile(encrypted_file.c_str(), std::ios::binary);
  outfile.write(cipher_text.c_str(), cipher_text.size());
  outfile.close();
}

void Decrypt() {
  // Initialise the key and IV
  byte key[key_size] = {0}, iv[iv_size] = {0};
  GetKeyAndIv(key, iv);

  // Read the encrypted file contents to a string as binary data.
  std::ifstream infile(encrypted_file.c_str(), std::ios::binary);
  const std::string cipher_text((std::istreambuf_iterator<char>(infile)),
                                 std::istreambuf_iterator<char>());
  infile.close();

  // Decrypt
  CryptoPP::AES::Decryption cipher(key, key_size);
  CryptoPP::CBC_Mode_ExternalCipher::Decryption decryption(cipher, iv);
  std::string decrypted_test;
  CryptoPP::StreamTransformationFilter filter(decryption,
      new CryptoPP::StringSink(decrypted_test));
  filter.Put(reinterpret_cast<const byte*>(cipher_text.c_str()),
             cipher_text.size());
  filter.MessageEnd();

  // Dump decrypted text
  std::ofstream outfile(decrypted_file.c_str(), std::ios::binary);
  outfile.write(decrypted_test.c_str(), decrypted_test.size());
  outfile.close();
}

int main() {
  try {
    Encrypt();
    Decrypt();
  }
  catch(const CryptoPP::Exception& exception) {
    std::cout << "Caught exception: " << exception.what() << '\n';
    return -1;
  }
  return 0;
} 
```

一个更直接的选择是使用 CryptoPP`FileSource`和`FileSink`类来避免手动读取/写入文件：

```
void Encrypt() {
  byte key[key_size] = {0}, iv[iv_size] = {0};
  GetKeyAndIv(key, iv);
  CryptoPP::CBC_Mode<CryptoPP::AES>::Encryption encryption;
  encryption.SetKeyWithIV(key, key_size, iv, iv_size);
  CryptoPP::FileSource file_source(original_file.c_str(), true,
    new CryptoPP::StreamTransformationFilter(encryption,
      new CryptoPP::FileSink(encrypted_file.c_str())));
}

void Decrypt() {
  byte key[key_size] = {0}, iv[iv_size] = {0};
  GetKeyAndIv(key, iv);
  CryptoPP::CBC_Mode<CryptoPP::AES>::Decryption decryption;
  decryption.SetKeyWithIV(key, key_size, iv, iv_size);
  CryptoPP::FileSource file_source(encrypted_file.c_str(), true,
    new CryptoPP::StreamTransformationFilter(decryption,
      new CryptoPP::FileSink(decrypted_file.c_str())));
} 
```

# jquery - 页面滚动时的 jQuery DIV 滚动

> ID：15027322
> 
> 赞同：1
> 
> 时间：2013-02-22T15:18:26.300
> 
> 标签：jquery, css, scroll

```
$(document).ready(function () {

$(function () {
    var offset = $(".control.Home .rightCol").offset();
    var topPadding = 15;
    $(window).scroll(function () {
        if ($(window).scrollTop() > offset.top) {
            $(".control.Home .rightCol").stop().animate({
                marginTop: $(window).scrollTop() - offset.top + topPadding
            });
        } else {
            $(".control.Home .rightCol").stop().animate({
                marginTop: 0
            });
        };
    });
});
}); 
```

当我向下滚动页面时，右侧的 div 会继续向下滚动。它在本地主机上，所以目前无法向您显示链接。我如何让 div 在某个点停止到左侧 div 停止的位置？

网站：http: [//goo.gl/OSiH5](http://goo.gl/OSiH5)

链接已添加到您可以看到 div 滚动的位置。我需要它在您有滚动图标的页脚之前停止

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T16:07:16.097

我在我的一个站点中使用了此代码：

```
var scroll = 0;
var marginTop = 10;
$(document).ready(function(){  
    $(window).scroll(function () {
        marginTop = ($(document).scrollTop() - scroll) + marginTop;
        scroll = $(document).scrollTop();

        $("#left").animate({"marginTop": marginTop+"px"}, {duration:500,queue:false} );
    });  
}); 
```

`#left`是我在滚动后向上/向下移动的 div。

*你可以现场观看：realtimecoding.net*

**编辑：** 如果你需要它停止滚动，比如说，660px，你可以添加一个验证。它应该看起来像：

```
var scroll = 0;
var marginTop = 10;
$(document).ready(function(){  
    $(window).scroll(function () {
        marginTop = ($(document).scrollTop() - scroll) + marginTop;
        scroll = $(document).scrollTop();

        if (marginTop<660) {
            $("#left").animate({"marginTop": marginTop+"px"}, {duration:500,queue:false} );
        }
    });  
}); 
```

这样它就永远不会超过 660px 边距顶部。

# java - 有没有办法在类的所有方法上设置断点？

> ID：15027323
> 
> 赞同：71
> 
> 时间：2013-02-22T15:18:31.940
> 
> 标签：java, intellij-idea

有没有办法在给定类的所有方法上设置断点？

我有一个巨大的（2300 行）遗留类，我需要在所有方法调用上设置断点以了解这种混乱是如何工作的。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2017-11-01T09:54:51.963

您可以按照以下步骤操作：

> 1.  运行 -> 查看断点 -> 添加 -> Java 方法断点
>     
>     
> 2.  类模式 -> 类的完整引用*（例如，mypackage.MyClass）*
>     
>     
> 3.  方法名称 -> * *（即星号通配符）*

[![例子](../Images/373c136e6f660de8bda3b1e1cdc04eb5.png)](https://i.stack.imgur.com/Q56Mw.jpg)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-12-03T13:03:14.600

我发现了解决方法：

1\. 我已将“Toggle Brakepoint”热键设置为`Alt`+ `Numpad 0`。
2\. 之后你可以点击第一个方法
3\. 使用“Toggle Brakepoint”
4\. `Alt`+ `Down`- 转到下一个方法。( `Alt`+ `Up`- 转到上一个方法。)
5\. 重复 3 步。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-11-23T23:51:22.847

这类似于 Sergey Senkov 的回答，但没有热键。

在结构视图中，单击第一种方法。对每种方法重复以下操作：

1.  `Context Menu Key`
2.  `M`切换方法断点。
3.  `Down`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-04-11T09:07:16.050

有一个想法插件： [Simple Toggle All Method Breakpoint](https://plugins.jetbrains.com/plugin/9661-simple-toogle-all-method-breakpoint)。

它允许您从项目视图中类的上下文菜单中一键为所有方法设置断点/清除所有方法的断点。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-05-09T09:33:28.767

正如 Andrey Lavrukhin 所建议的，有*Simple Toggle All Method Breakpoint*，通过 Settings -> Plugins 安装它。完美运行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-22T15:49:38.640

您能够做您想做的事情的唯一方法是在每个方法上设置方法断点与相关类。您需要单击方法旁边的左侧装订线 - 会出现一个带有 4 个点的红色小圆圈，您可能会收到一条警告，指出方法级断点会影响性能。然后，您可以进一步配置断点（通过右键单击它，或选择 shift+F8）并将其设置为在进入、退出或两者时中断

恐怕没有办法在一个步骤/设置中做到这一点。

# php - 点击标签运行php函数

> ID：15027324
> 
> 赞同：-2
> 
> 时间：2013-02-22T15:18:34.677
> 
> 标签：php, function

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T15:36:37.027

你需要通过使用ajax来做到这一点，即

首先创建一个文件，单击链接后可以调用该文件，对于本示例，将其命名为 download.php

然后在文件中添加对您的函数的调用....

```
<?
// execute function to get files
$zip_file = create_zip();
// get the full path to zip file
$full_zip_path = '/path/to/zip/file'.$zip_file;

// You may need to do more here depending on how far your create zip function goes

// if you want it to force the download you can then do this

header("Pragma: public"); // required
header("Expires: 0");
header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
header("Cache-Control: private",false); // required for certain browsers 
header("Content-Type: octet/stream");
header("Content-Disposition: attachment; filename=".$zip_file.";" );
header("Content-Transfer-Encoding: binary");
header("Content-Length: ".filesize($full_zip_path));
readfile($full_zip_path);
exit();

?> 
```

然后将一个类添加到您的 a 标签中，因此...

```
<a href="<!--Run create_zip function-->" class="download-zip">Download all files</a> 
```

然后你想要的是一些javascript来调用在后台加载php文件，基本上将它添加到你的页脚/页眉中的某个地方（取决于你的脚本在哪里）。

```
<script>
$(function() {
    $("a.download-zip").click(function() {

    window.location.href = "/path/to/php/file/download.php";
    return false;
    });
});
</script> 
```

然后，这将在后台加载文件，进而强制下载创建的 zip 文件。由于没有看到您的 create_zip 函数走了多远，上面的一些内容可能会稍微有些偏差，但它应该让您走上正确的道路。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T15:30:33.693

刚刚找到我的脚本

所以你创建了一个隐藏的 iframe

```
<iframe id="upload_target" name="upload_target" style="display: none;" src="#"></iframe> 
```

然后你用一些按钮创建一个表单

```
<form action="path/to/downloadzip.php" method="POST" enctype="multipart/form-data" target="upload_target"> //target will tell the browser to run it in the iFrame with name="upload_target" 
```

然后在downloadzip.php中：

```
<?php create_zip(); ?> //and output the file here 
```

这将下载 zip 而无需加载新页面

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T15:24:40.040

这很简单：

```
<a href="/path/to/myphpfile.php">Download all files</a> 
```

然后只需将 zip 函数添加到 myphpfile.php

我的php文件.php

```
<?php create_zip(); ?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-22T15:25:52.517

您需要像 url 一样调用它：

`<a href="/download-all-files.php">Download all files</a>`

然后它会为你完成这项工作。问题：它会打开一个新页面，用户必须手动返回上一个页面。您可能希望在实际页面中包含代码，并使用参数调用链接：

`<a href="actual-page.php?download-all">Download all files</a>`

在你的函数上，你可以检查参数（接近这个）：

```
if ($['GET'] == "download-all") {
   download all
} 
```

正如史蒂夫建议的那样，AJAX 调用也是一个好主意，尽管我不确定如何处理传入的 zip 文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-22T15:23:50.653

您需要将请求发送回服务器才能执行此操作。

例如，您将使用指向服务器上的 PHP 页面的链接，该页面将运行该函数并为您提供结果：

```
<a href="RunMyFunction.php">Download all files</a> 
```

您也可以使用 AJAX 请求在后台提交它，但这是一个可选的附加功能。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-22T15:34:36.487

更好的方式你可以使用 ajax 帖子
你可以尝试在点击超链接时调用 ajax（给它像类一样的身份）。

 ``$('.classHyper').click(function() {
//do ajax post
});``

# vml - VML html邮件，图像位置

> ID：15027331
> 
> 赞同：1
> 
> 时间：2013-02-22T15:19:13.737
> 
> 标签：vml

我制作了一个 HTML 邮件模板。此模板适用于所有市长邮件客户端（gmail、thunderbird 等），Outlook 2007/2010 除外。Outlook 2003 可以很好地显示邮件。

这是正确的布局，橙色的标题栏显示在正确的位置：

![在 Outlook 2003 中正确显示](../Images/aa8088cb052873bfc15f0572aa21d12d.png)

这就是 Outlook 2007/2010 的问题所在。标题栏位于正文之外，位于邮件顶部：

![Outlook 2007 显示错误](../Images/0087b17fafd3d4931472d45e5510bb60.png)

这是我的模板：

```
 <html xmlns:v="urn:schemas-microsoft-com:vml">
<head>
  <title>Wieskamp Nieuwsbrief</title>
<style type="text/css">
body,td{font-family: Verdana, Arial; font-size: 12px;color: black;}
.header{font-size:12px;font-weight:bold;color: #f4f4be;text-align:center;}
v:* { behavior: url(#default#VML); display: inline-block; }
</style>

</head>
<body style="margin: 0">
  <table border="0" cellpadding="0" cellspacing="0" width="100%">
    <tr>
        <td align="center">
            <table border="0" cellpadding="0" cellspacing="0" width="600">
                <tr>
                    <td background="http://www.wieskamp.nl/media/nieuwsbrief/wieskamp-nieuwsbrief-header.jpg" bgcolor="#f6f6f6" width="600" height="226" valign="top">
                <!--[if gte mso 9]>
                <v:rect xmlns:v="urn:schemas-microsoft-com:vml" fill="true" stroke="false" style="width:600px;height:226px;">
                <v:fill type="tile" src="http://www.wieskamp.nl/media/nieuwsbrief/wieskamp-nieuwsbrief-header.jpg" color="#f6f6f6" size="600px,226px"/>
                <v:textbox inset="0,0,0,0">
                <![endif]-->
                    <div>

                    </div>
                <!--[if gte mso 9]>
                </v:textbox>
                </v:rect>
                <![endif]-->
                    </td>
                </tr>
                <tr>
                    <td background="http://www.wieskamp.nl/media/nieuwsbrief/wieskamp-nieuwsbrief-midden.jpg" bgcolor="#cfd300" width="600" valign="top" style="background-repeat: repeat-y no-repeat;">
                    <!--[if gte mso 9]>
                    <v:rect xmlns:v="urn:schemas-microsoft-com:vml" fill="true" stroke="false" style="width:600px;">
                    <v:fill type="tile" src="http://www.wieskamp.nl/media/nieuwsbrief/wieskamp-nieuwsbrief-midden.jpg" color="#f4f4be" size="600px,6px" />
                    <v:textbox style="mso-fit-shape-to-text:true" inset="0,0,0,0">
                    <![endif]-->
                        <div>           
                            <table border="0" cellpadding="0" cellspacing="0" width="600">
                                <tr>
                                    <td width="40"></td>
                                    <td colspan="3" align="center" background="http://www.wieskamp.nl/media/nieuwsbrief/header_balk.jpg" bgcolor="#cfd300" width="520" height="26" valign="top" style="color: #f4f4be;font-weight: bold;vertical-align: middle;background-repeat: repeat-y no-repeat;">
                                        <!--[if gte mso 9]>
                                        <v:rect xmlns:v="urn:schemas-microsoft-com:vml" fill="true" stroke="false" style="width:520px;height:26px;">
                                        <v:fill type="tile" src="http://www.wieskamp.nl/media/nieuwsbrief/header_balk.jpg" color="#f6f6f6" size="520px,26px"/>
                                        <v:textbox inset="0,0,0,0">
                                        <![endif]-->
                                        <div>
                                        Headerbalk

                                        </div>
                                        <!--[if gte mso 9]>
                                        </v:textbox>
                                        </v:rect>
                                        <![endif]-->
                                    </td>
                                    <td width="40"></td>                                    
                                </tr>
                                <tr><td colspan="6">&nbsp;</td></tr>
                                <tr>
                                    <td width="40"></td>
                                    <td width="10"></td>
                                    <td width="124" valign="top"><img src="http://www.wieskamp.nl/media/nieuwsbrief/plaatjes.jpg" width="114" height="160"/></td>
                                    <td width="386" valign="top">
                                    <b>Er gaat iets gebeuren</b><br><br>
                                    22 februari 2013<br><br>
                                     De bomen worden weer fris groen, de bloeitijd begint. De lucht geurt van bloesem en het eerste gemaaide gras. De vogels geven hun concert bij de opgaande zon. De lente is een uitstekend jaargetijde om op vakantie te gaan in het Nationale Landschap Winterswijk. 

De lente loopt van maart tot en met juni op Camping Het Wieskamp. Natuurlijk is er met Pasen, Hemelvaart en Pinksteren veel te beleven op het terrein. Maar daarom heen vindt u de rust op de standplaats, en ook erbuiten. Al wandelend of fietsend ontdekt u de nestelende vogels. de bloeiende hoogstamfruitbomen en het frisse groen van de omliggende natuurgebieden. 
                                    </td>
                                    <td width="40"></td>
                                </tr>
<tr><td colspan="6">&nbsp;</td></tr>
                            </table>
                            <table border="0" cellpadding="0" cellspacing="0" width="600">
                                <tr>
                                    <td width="40"></td>
                                    <td colspan="3" align="center" background="http://www.wieskamp.nl/media/nieuwsbrief/header_balk.jpg" bgcolor="#cfd300" width="520" height="26" valign="top" style="color: #f4f4be;font-weight: bold;vertical-align: middle;background-repeat: repeat-y no-repeat;">
                                        <!--[if gte mso 9]>
                                        <v:rect xmlns:v="urn:schemas-microsoft-com:vml" fill="true" stroke="false" style="width:520px;height:26px;">
                                        <v:fill type="tile" src="http://www.wieskamp.nl/media/nieuwsbrief/header_balk.jpg" color="#f6f6f6" size="520px,26px"/>
                                        <v:textbox inset="0,0,0,0">
                                        <![endif]-->
                                        <div>
                                        Headerbalk
                                        </div>
                                        <!--[if gte mso 9]>
                                        </v:textbox>
                                        </v:rect>
                                        <![endif]-->
                                    </td>
                                    <td width="40"></td>                                    
                                </tr>
                                <tr><td colspan="6">&nbsp;</td></tr>
                                <tr>
                                    <td width="40"></td>
                                    <td width="10"></td>
                                    <td width="124" valign="top"><img src="http://www.wieskamp.nl/media/nieuwsbrief/plaatjes.jpg" width="114" height="160"/></td>
                                    <td width="386" valign="top">
                                    <b>Er gaat iets gebeuren</b><br><br>
                                    22 februari 2013<br><br>
                                     De bomen worden weer fris groen, de bloeitijd begint. De lucht geurt van bloesem en het eerste gemaaide gras. De vogels geven hun concert bij de opgaande zon. De lente is een uitstekend jaargetijde om op vakantie te gaan in het Nationale Landschap Winterswijk. 

De lente loopt van maart tot en met juni op Camping Het Wieskamp. Natuurlijk is er met Pasen, Hemelvaart en Pinksteren veel te beleven op het terrein. Maar daarom heen vindt u de rust op de standplaats, en ook erbuiten. Al wandelend of fietsend ontdekt u de nestelende vogels. de bloeiende hoogstamfruitbomen en het frisse groen van de omliggende natuurgebieden. 
                                    </td>
                                    <td width="40"></td>
                                </tr>
                            </table>
                        </div>
                    <!--[if gte mso 9]>
                    </v:textbox>
                    </v:rect>
                    <![endif]-->
                    </td>

                </tr>
                <tr>
                    <td background="http://www.wieskamp.nl/media/nieuwsbrief/wieskamp-nieuwsbrief-footer.jpg" bgcolor="#f6f6f6" width="600" height="88" valign="top">
                <!--[if gte mso 9]>
                <v:rect xmlns:v="urn:schemas-microsoft-com:vml" fill="true" stroke="false" style="width:600px;height:88px;">
                <v:fill type="tile" src="http://www.wieskamp.nl/media/nieuwsbrief/wieskamp-nieuwsbrief-footer.jpg" color="#f6f6f6" size="600px,88px"/>
                <v:textbox inset="0,0,0,0">
                <![endif]-->
                    <div>

                    </div>
                <!--[if gte mso 9]>
                </v:textbox>
                </v:rect>
                <![endif]-->
                    </td>                   
                </tr>
            </table>
        </td>
    </tr>

  </table>
</body>
</html> 
```

# intuit-partner-platform - Intuit 的安全审查从开始到结束审查 QuickBooks Online (QBO) 应用程序需要多长时间？

> ID：15027337
> 
> 赞同：1
> 
> 时间：2013-02-22T15:19:34.847
> 
> 标签：intuit-partner-platform, quickbooks-online, intuit

我正在尝试明智地预算我的时间，但对于 Intuit 在发布前对应用程序执行的安全审查没有很多详细信息。我在他们的博客上找到了一篇关于为它做准备的文章。

[“安全审查”：期待什么](http://ippblog.intuit.com/blog/2013/01/the-security-review-what-to-expect.html)

然后是他们网站上的[完成安全审查](https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0025_Intuit_Anywhere/0040_Publishing_Your_App/0030_Passing_the_Security_Review)部分。但是，我无法在预期的时间表上找到要完成的任何内容。有人在他们的 v3 网络研讨会上提到，他花了 3 个月的时间才完成，但这是常态吗？

感谢您在这方面的任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T15:56:18.337

完成不需要几个月的时间，通常需要 1-2 周，前提是您遵循指南并相应地准备审查。显然，如果在您的应用程序中发现安全漏洞，可能需要时间来解决，因此平均需要 1-2 周，并且假设您能够尽快解决问题。

此外，如果您遵循此处的信息，它将加快流程 [https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0025_Intuit_Anywhere/0040_Publishing_Your_App](https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0025_Intuit_Anywhere/0040_Publishing_Your_App)

问候，
杰瑞德

# php - PHP - 返回中的 IF 语句？正确的语法？

> ID：15027339
> 
> 赞同：0
> 
> 时间：2013-02-22T15:19:37.390
> 
> 标签：php, syntax, return

所以我在我的一个函数中有一个返回：

```
return '<i class="'.$class.'" style="size:'.$size.';"></i>'; 
```

但是，如果未填充大小，我不想显示样式，所以我需要做一个`if $size`

这可能吗？我在手册中找不到示例。

抱歉，我应该澄清一下 - 如果 $size 为空，我仍然希望返回发生，但我不希望 style=" 存在，所以伪代码：

返回： $class if $size ( $size)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T15:22:02.967

```
return sprintf('<i class="%s"%s></i>',           // result using %s palceholders
  $class,                                        // first %s placeholder
  !empty($size) ? 'style="size:'.$size.';"' : '' // second %s placeholder
); 
```

[内联三元运算符](http://php.net/manual/en/language.operators.comparison.php#language.operators.comparison.ternary)，仅在不为空`style="..."`时包含属性（作为一个整体） 。`$size`

结果：

```
/*
 * Where size is empty
 */
$class = 'foo';
$size = null;

// Result:
<i class="foo"></i>

/*
 * Where size is populated
 */
$class = 'foo';
$size = 'large';

// Result:
<i class="foo" style="size:large;"></i> 
```

# c# - 在项目设置中保存 DateTimeOffset 设置时丢失精度

> ID：15027343
> 
> 赞同：4
> 
> 时间：2013-02-22T15:19:41.863
> 
> 标签：c#, serialization, application-settings, datetimeoffset

当我在我的项目设置中保存 a`DateTimeOffest`时，我失去了一些精度： ![在 DateTimeOffset 序列化上失去精度](../Images/8a4496a13cf0a619ead0419d215cc295.png)

第一个变量是序列化之前的原始值。第二个是反序列化后的值。

事实上，我的变量在配置文件中是这样序列化的：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
    <userSettings>
        <MyApp.Properties.Settings>
            [...]
            <setting name="LatestCheckTimestamp" serializeAs="String">
                <value>02/22/2013 14:39:06 +00:00</value>
            </setting>
            [...]
        </MyApp.Properties.Settings>
    </userSettings>
</configuration> 
```

**有没有办法指定一些序列化参数来提高精度？**

我知道我可以使用一些解决方法，例如通过存储刻度和偏移值或类似的东西，但我想知道是否没有更好的方法。

**编辑**：更多信息：我使用标准的 Visual Studio 项目设置来存储我的值：

```
MyApp.Settings.Default.LatestCheckTimestamp = initialLatestCheckTimestamp;
MyApp.Settings.Default.Save(); 
```

`MyApp.Settings`是 Visual Studio 在项目属性页中编辑设置时生成的类。

**编辑2：解决方案**：

根据马特约翰逊的回答，这就是我所做的：

1.  将设置重命名为`LatestCheckTimestamp`to`LatestCheckTimestampString`但**不在我的代码中**
2.  在独立文件中添加了以下 Wrapper 以完成部分类`Settings`：

.

```
public DateTimeOffset LatestCheckTimestamp
{
    get { return DateTimeOffset.Parse(LatestCheckTimestampString); }
    set { LatestCheckTimestampString = value.ToString("o"); }
} 
```

新的配置文件现在看起来像：

```
<configuration>
    <userSettings>
        <MyApp.Properties.Settings>
            [...]
            <setting name="LatestCheckTimestampString" serializeAs="String">
                <value>2013-02-22T16:54:04.3647473+00:00</value>
            </setting>
        </MyApp.Properties.Settings>
    </userSettings>
</configuration> 
```

...我的代码仍然是

```
MyApp.Settings.Default.LatestCheckTimestamp = initialLatestCheckTimestamp;
MyApp.Settings.Default.Save(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T16:11:57.577

序列化 a 最可靠的方法`DateTimeOffset`是使用[RoundTrip 模式](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx#Roundtrip)，它是使用`"o"`标准序列化字符串指定的。

这使用了[ISO8601](http://en.wikipedia.org/wiki/ISO_8601)标准，该标准与其他系统、语言、框架等具有高度的互操作性。您的值将如下所示： `2013-02-22T14:39:06.0000000+00:00`.

.Net 将使用这种格式将小数秒存储为 7 位小数。

如果您可以显示一些有关如何存储和检索应用程序设置的代码，我可以告诉您在哪里指定格式字符串。在大多数情况下，它只是`.ToString("o")`.

# c - c函数参数评估和传递

> ID：15027347
> 
> 赞同：2
> 
> 时间：2013-02-22T15:19:55.733
> 
> 标签：c

我有一个很小的代码，但我不明白为什么输出是这样的。
这里是

```
#include <stdio.h>

int f(int i, int j, int k);

int main(int argc, char const *argv[])  
{  
    int a;   
    printf("enter a\n");  
    scanf("%d",&a);  
    f(a,a++,a++);  
    printf("%d \n",a );  
    return 0;  
}  

int f(int i, int j, int k)  
{  
    printf("function arguments \n");  
    printf("%d %d %d\n",i,j,k );  
} 
```

输入：4
输出：6 5 4

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T15:22:10.147

**标记副本中接受的答案是不正确的。**

* * *

```
f(a,a++,a++); 
```

导致**未定义的行为**。它试图在`a`没有中间序列点的情况下修改参数。此外，重要的是要注意函数参数的评估顺序是**Unspecified**。有可能：

*   从左到右或
*   从右到左或
*   编译器选择的任何神奇顺序。

* * *

如果您使用的是 GCC，您可以使用警告标志`-wsequence-point`来警告您与序列点相关的未定义行为。

* * *

在 GCC 中，如果您以最严格的警告级别编译程序，编译器将为您提供以下诊断：

> prog.c:10:18: 错误: 'a' 上的操作可能未定义 [-Werror=sequence-point]
> prog.c:10:18: 错误: 'a' 上的操作可能未定义 [-Werror=sequence-观点]

* * *

**参考：**

**C99 标准 §6.5.2.2：**
**第 10 段：**

> 函数指示符、实际参数和实际参数中的子表达式的求值顺序未指定，但在实际调用之前有一个顺序点。

请注意，引用仅表示在实际函数调用之前有一个序列点，并不意味着在子表达式参数的评估之间有一个序列点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T15:22:55.623

`f(a,a++,a++);`似乎是未定义的行为，因为：

> 如果标量对象上的副作用相对于同一标量对象上的不同副作用或使用相同标量对象的值的值计算是未排序的，则行为未定义。如果一个表达式的子表达式有多个允许的排序，则如果在任何排序中出现这种未排序的副作用，则行为是未定义的。

当您使用未定义的行为时，C 标准没有要求。

# tfs - 构建代理文件夹如何在编辑构建工作区中工作？

> ID：15027351
> 
> 赞同：2
> 
> 时间：2013-02-22T15:20:12.367
> 
> 标签：tfs, tfsbuild

我的构建无法获取我的应用程序中的某些项目。它们存储在 TFS 源代码控制中自己的项目中。我在 Edit Build 工作区中将它们组合在一起；

这些是映射： ![这些是映射](../Images/7631c0fe742ab96d5aabdd7030351777.png)

Build Agent 文件夹不允许我简单地放置`$(SourceDir)`. 如上所述在末尾附加文件夹名称有什么影响？如何让构建代理从正确的文件夹位置获取项目？

目前我收到这些错误消息；

```
8 error(s), 3 warning(s)
$/STAS/Timesheet/Timesheet/Timesheet.sln - 8 error(s), 3 warning(s), View Log File
 C:\Builds\4\STAS\Timesheet\Sources\Timesheet\Timesheet.sln.metaproj: The project file "C:\Builds\4\STAS\Timesheet\Sources\Timesheet\..\..\..\..\StandardClassLibrary\StandardClassLibrary\StandardClassLibrary.csproj" was not found.
 C:\Builds\4\STAS\Timesheet\Sources\Timesheet\Timesheet.sln.metaproj: The project file "C:\Builds\4\STAS\Timesheet\Sources\Timesheet\..\..\..\EmailMessageRecord\EmailMessageRecord\EmailMessageRecord.csproj" was not found. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T15:38:38.290

这正是该功能的用途。`$(Sourcedir)`宏被 Build Agent 路径替换（在 Build Agent 上配置）：

![BuildAgent 属性](../Images/bbd1ed17905b7b343730557e99eb7c85.png)

此处配置的任何路径都会放入`$(Sourcedir)`其中，并且您在映射中额外配置的任何内容都将用于创建最终目的地。

那么会发生什么，这些解决方案都将被下载到构建工作目录下的自己的子目录中。您需要注意的唯一想法是源代码管理或本地映射中的文件夹之间的相对路径需要与您在构建定义的工作区映射中选择的目标文件夹结构相匹配。

# python - Python getopt（显示命令用法？想想：Apache Commons CLI）

> ID：15027359
> 
> 赞同：0
> 
> 时间：2013-02-22T15:20:38.507
> 
> 标签：python

使用 Python getopt 模块，我可以根据我对接受的短选项和长选项的定义获得参数列表和选项列表。使用 Java 和 Apache Commons CLI，我可以使用基于相同定义的 HelpFormatter 类的 printHelp 方法打印“使用”消息，而无需编写任何内容（琐碎、耗时、令人恼火以保持最新) 代码。在 Python 中是否可以使用类似的工具？我认为这是**必不可少**的！

PS我还没有看到HelpFormatter可以做什么，看看吧！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T15:24:24.017

是的，请改用该[`argparse`模块](http://docs.python.org/2/library/argparse.html)。

该`optparse`模块已被弃用，取而代之的是新的更好的模块。该`argparse`模块会根据您提供的选项生成帮助文本。

如果您使用的是 2.7 之前的 python 版本，则可以将该库安装为[pypi](https://pypi.python.org/pypi/argparse)的单独依赖项。

# c++ - 等待其他线程继续

> ID：15027363
> 
> 赞同：1
> 
> 时间：2013-02-22T15:20:42.490
> 
> 标签：c++, multithreading, thread-safety

在 C++ 中，我有这个示例实现：

```
#include <thread>
#include <iostream>

void doSomeWork( void )
{
    std::cout << "hello from thread..." << std::endl;
    while(true)
    {
       printf("Getting inside doSomeWork\n");
       sleep(1);
    }
}

int main( int argc, char *argv[] )
{
    std::thread t( doSomeWork );
    t.join();

    processing();

    return 0;
}

void processing()
{
   while(true)
   {
      printf("Getting inside processing\n");
      sleep(1);
   }
} 
```

我有一个问题，doSomeWork() 继续做事，它阻塞了 processing()。我认为线程是异步的，所以当它在睡觉时，我可以做其他事情。我的问题是如何在 doSomeWork() 中睡觉并产生其他线程，然后恢复 doSomework()？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T15:22:36.607

线

```
t.join(); 
```

暂停调用线程，直到线程`t`完成（何时`doSomeWork()`）返回。

将您的代码更改为

```
std::thread t( doSomeWork );
processing();
t.join(); 
```

如果你想`processing()`并行`doSomeWork()`运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T15:24:13.373

替换 `t.join();`为 `t.detach();`

但是请注意，它的`detach`意思是“我对这个线程不感兴趣，所以它可能随时终止”或“我将通过某种同步机制同步线程”。基本上，当您有一些外部（线程）同步机制时使用它，因此您不想使用连接。`join`每次都使用很常见，但`detach`仅在需要时使用。在您的特定情况下，您具有永远循环的同步机制，因此使用绝对没问题，`detach`但请注意它们的差异。

# iphone - 如何使用 NSSortDescriptor 对 NSMutableArray 进行排序？

> ID：15027377
> 
> 赞同：3
> 
> 时间：2013-02-22T15:21:08.870
> 
> 标签：iphone, ios, objective-c, nsmutablearray, nssortdescriptor

我正在解析来自`JSON`web 服务的数据，然后使用以下代码按价格、日期、折扣等对数据进行排序。

这是我用来对数据进行排序的代码：

```
-(void)priceSort:(id)sender {

NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc]
                                     initWithKey: @"price" ascending: YES];

NSMutableArray *sortedArray = (NSMutableArray *)[self.displayItems
                                          sortedArrayUsingDescriptors: [NSArray arrayWithObject:sortDescriptor]];

[self setDisplayItems:sortedArray];

[self.tableView reloadData];

} 
```

当我尝试按价格排序时，这很好用，但是当我想按评论数量排序时，我似乎无法获得正确的代码：

对于我使用的价格：

```
NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc]
                                         initWithKey: @"price" ascending: YES]; 
```

但对于评论，我想获得“n”值。看看它是如何嵌套在输出中的（下面的显示 Items mutableArray：

```
"old_price" = 24;
        price = "9.9";
        reviews =         {
            **n = 11;**
            val = 70;
        };
        "sold_count" = 101; 
```

感谢您对此的任何帮助:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T15:27:35.200

要按评论数`n`排序，您的排序描述符将是：

```
NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc]
                                     initWithKey: @"reviews.n" ascending: YES]; 
```

# java - 将自签名证书交换为受信任证书？

> ID：15027381
> 
> 赞同：0
> 
> 时间：2013-02-22T15:21:21.413
> 
> 标签：java, ssl

我有一台服务器，它使用自签名证书为我的测试客户端提供 https 连接。

我的客户端应用程序是用 java 编写的，我让它接受自签名证书，如下所示：

```
import org.apache.http.conn.ssl.SSLSocketFactory;
import org.apache.http.impl.client.DefaultHttpClient;

SSLSocketFactory factory = new SSLSocketFactory(myTrustedStore);

DefaultHttpClient client = new DefaultHttpClient();
client.getConnectionManager().getSchemeRegistry()
    .register(new Scheme("https", factory, 456)); 
```

现在我从受信任的第三方提供商那里获得了适当的 ssl 证书。

如果我交换证书，上面的连接会失败吗？因为我使用上面的 SSLSocketFactory 显式初始化，所以客户端会拒绝服务器证书（这将是一个真正受信任的证书吗？）。

只是想知道我是否必须更改上面的代码并让我的测试人员更新他们的客户端应用程序，或者，连接是否会透明地工作而无需他们进行更新？

谢谢

- - - 跟进 - - -

我已经尝试过使用“真实”证书。我必须使用自签名证书的代码不起作用。因此，在他们使用真正的证书之前，我不得不在我的客户中删除上面的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:25:01.987

如果客户端已接受自签名证书，则使用正确有效的可信证书将没有问题。

如果有问题，您仍然可以手动将新证书导入到您的trustedStore。您的代码不应该受到影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T15:26:05.477

我相信现在您拥有适当的证书，您可以删除很多代码。事实上，DefaultHttpClient 现在应该可以工作了。

```
import org.apache.http.impl.client.DefaultHttpClient;

DefaultHttpClient client = new DefaultHttpClient(); 
```

您不再需要受信任的密钥库，因为第 3 方现在将成为您的受信任密钥库。DefaultHttpClient 应该自动执行此操作。

# qt - QMutableListIterator 出错

> ID：15027383
> 
> 赞同：0
> 
> 时间：2013-02-22T15:21:32.480
> 
> 标签：qt, qlist, listiterator

在将一个项目附加到 a`QList`指向的 a`QMutableListIterator`之后，我找出迭代器的下一个值指向列表之外。或者我不能将迭代器指向列表中除开头或结尾之外的任何位置吗？请我需要帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T15:27:55.240

来自 Qt 文档：

> 当迭代器处于活动状态时（而不是通过迭代器），不应直接对列表进行任何更改，因为这可能会使迭代器无效并导致未定义的行为。

附加到列表可能会导致它的内存被重新分配，这意味着迭代器指向一个无效的位置。

# java - 服务器（Java - Cipher）和客户端（Javascript - CryptoJS）之间的 AES

> ID：15027386
> 
> 赞同：3
> 
> 时间：2013-02-22T15:21:40.393
> 
> 标签：java, javascript, client-server, aes

我必须在 JS 中制作一个应用程序，它使用 AES 对消息进行编码并通过 AJAX 将其传递给服务器。然后服务器使用 Java 解码消息。

我的问题是：**如何在 JS 中加密消息并能够使用 AES 在 Java 中对其进行解密？知道java和js之间的通信已经通过webservices建立了**

在客户端，我使用 Crypto JS 库 ( [http://code.google.com/p/crypto-js/](http://code.google.com/p/crypto-js/) )。服务器端我使用 Java 提供的 Cipher 类（我使用 Java Play 框架，但在这里没关系）。

我对密码学完全陌生。我整天都在研究，但仍然无法完成这项工作。

问题是用于加密和解密消息的密钥必须相同，我不知道该怎么做。

从我的搜索中，我了解到使用 AES 有不同的模式。默认情况下，Java 使用 ECB，CryptoJS 使用 CBC，这是一个问题，但通过告诉 CryptoJS 也使用 ECB 模式，这似乎并不难解决。但是还有一个填充问题，似乎 Java 和 CryptoJS 中唯一可用的填充是根本没有填充。但是当我在 Java 中使用 NoPadding 时，我得到了一个异常。

但即使我设法解决了这个问题，最大的问题是 CryptoJS 生成的密钥和 Java 生成的密钥并不相同。如果我用 Java 加密一条消息，结果总是相同的，用十六进制表示。但在加密 JS 中，它是在 Base64 中，并且永远不会相同......

我知道这是由在 Java 和 CryptoJS 中不同的密钥生成引起的（然后进入对我来说模糊的 IV 和 Salt 的概念）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T15:28:37.723

不要在浏览器 JS 中做加密；[不可能](http://www.matasano.com/articles/javascript-cryptography/)安全地做到这一点。

使用 SSL。其预期目的是加密浏览器和服务器之间的通信。

如果成本是您的问题，有[免费的 SSL 证书](http://startssl.com)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-24T14:57:09.653

我最近在这个问题上投入了几天时间。我在 java 和 javascript 方面尝试了很多库。这个博客拯救了我的一天：[http](http://watchitlater.com/blog/tag/aes/) ://watchitlater.com/blog/tag/aes/ 。

所以可以做到！只需在 javascript 端使用 Gibberish AES ( [https://github.com/mdp/gibberish-aes](https://github.com/mdp/gibberish-aes) ) 并在 java 端使用 bouncycastle 。

java端加密可能看起来像这样（依靠上面提到的博客）：

```
import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.io.UnsupportedEncodingException;
import java.security.InvalidAlgorithmParameterException;
import java.security.InvalidKeyException;
import java.security.NoSuchAlgorithmException;
import java.security.Provider;
import java.security.spec.InvalidKeySpecException;
import java.util.Random;
import javax.crypto.BadPaddingException;
import javax.crypto.Cipher;
import javax.crypto.IllegalBlockSizeException;
import javax.crypto.NoSuchPaddingException;
import javax.crypto.SecretKeyFactory;
import javax.crypto.spec.PBEKeySpec;
import javax.crypto.spec.PBEParameterSpec;
import org.bouncycastle.jce.provider.BouncyCastleProvider;
import sun.misc.BASE64Encoder;

public class OpenSSLEncryption {

    private static final String CIPHER_ALG = "PBEWITHMD5AND256BITAES-CBC-OPENSSL";
    private static final Provider CIPHER_PROVIDER = new BouncyCastleProvider();
    private static final String PREFIX = "Salted__";
    private static final String UTF_8 = "UTF-8";
    private String password;
    private PBEKeySpec pbeSpec;
    private SecretKeyFactory keyFact;
    private Cipher cipher;
    private Random rand = new Random();
    private BASE64Encoder encoder = new BASE64Encoder();

    public OpenSSLEncryption(String password) throws NoSuchAlgorithmException, NoSuchPaddingException {
        this.password = password;
        pbeSpec = new PBEKeySpec(password.toCharArray());
        keyFact = SecretKeyFactory.getInstance(CIPHER_ALG, CIPHER_PROVIDER);
        cipher = Cipher.getInstance(CIPHER_ALG, CIPHER_PROVIDER);
    }  

    public synchronized String encrypt(String toEncrypt) throws InvalidKeySpecException, InvalidKeyException, InvalidAlgorithmParameterException, UnsupportedEncodingException, IllegalBlockSizeException, BadPaddingException, IOException {
        byte[] salt = new byte[8];
        rand.nextBytes(salt);
        PBEParameterSpec defParams = new PBEParameterSpec(salt, 0);
        cipher.init(Cipher.ENCRYPT_MODE, keyFact.generateSecret(pbeSpec), defParams);
        byte[] cipherText = cipher.doFinal(toEncrypt.getBytes(UTF_8));

        ByteArrayOutputStream baos = new ByteArrayOutputStream(cipherText.length + 16);
        baos.write(PREFIX.getBytes(UTF_8));
        baos.write(salt);
        baos.write(cipherText);
        baos.close();
        return encoder.encode(baos.toByteArray());
    }
} 
```

# jquery - 动态调用时，JQuery Slider 无法正确更新其值

> ID：15027387
> 
> 赞同：-1
> 
> 时间：2013-02-22T15:21:42.730
> 
> 标签：jquery, jquery-ui-slider

我正在动态调用 container.slider(...) 并且只有在第一次调用它时才能获得正确的外观。我如何解决它？

更新 - 显然演示是重现问题的快速破解，除非它与问题相关，否则我们不要选择使用全局变量等。

Repro（按下按钮几次）：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html style="height: 100%;">
<head>
    <title></title>
    <link href="styles/themes/ui-lightness/jquery-ui-1.9.0.custom.min.css" rel="stylesheet"
        type="text/css" />
    <script src="scripts/external/jquery-1.8.2.min.js" type="text/javascript"></script>
    <script src="scripts/external/jquery-ui-1.9.0.custom.min.js" type="text/javascript"></script>

    <script type="text/javascript">

        $(document).ready(function () {
            //
            var longValues = [10, 50, 90];
            var shortValues = [50];
            var mode;

            function setLong() {
                $("#c").slider({ orientation: "horizontal", range: false, values: longValues, min: 0, max: 100, step: 1 });
                mode = "long";
            }

            function setShort() {
                $("#c").slider({ orientation: "horizontal", range: false, values: shortValues, min: 0, max: 100, step: 1 });
                mode = "short";
            }

            $("#t").on("click", function () {

                if (mode == "long") {
                    console.log("set short");
                    setShort();

                }
                else {
                    console.log("set long");
                    setLong();
                }
            });

            setLong();

        });
    </script> 
</head>
<body style="height: 100%;">

   <div id="c" style="width: 200px; vertical-align: middle;">
   </div>

   <button id="t">Toggle
   </button>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T15:44:57.090

更改手柄数量时，旧手柄似乎没有被删除，要“重置”滑块，您可能必须先将其销毁：

```
function setLong() {
    $("#c").slider( "destroy" );
    $("#c").slider({ orientation: "horizontal", 
                           range: false, 
                          values: longValues, 
                             min: 0, 
                             max: 100, 
                            step: 1 
    });
    mode = "long";
} 
```

这似乎可行，但是像这样破坏和初始化滑块可能会出现问题，并且它没有经过真正的适当测试或任何其他事情。

[**小提琴**](http://jsfiddle.net/qAweP/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-22T15:22:53.283

尝试从 document.ready 范围中删除函数 setShort() 和 setLong() 以及变量并进入全局。

函数和变量仅在 document.ready 处理程序执行期间存在。在该匿名函数执行后，其中的任何变量和函数都将不复存在。通过将变量和函数移到 document.ready 匿名函数之外，它们将无限期地存在。

# mysql - 使用 ON DUPLICATE KEY UPDATE 进行大型自动插入

> ID：15027389
> 
> 赞同：1
> 
> 时间：2013-02-22T15:21:48.800
> 
> 标签：mysql, sql, key, duplicates, bulkinsert

我必须在这样的表中插入很多行`basic_data`：

> **basic_data**
> 客户 | 最大销售 | 总销售额

```
CREATE TABLE `basic_data` (
`id`  int(11) NOT NULL AUTO_INCREMENT ,
`customer`  int(11) NOT NULL ,
`total_sales`  decimal(15,2) NOT NULL ,
`max_sale`  tinyint(2) NOT NULL ,
PRIMARY KEY (`id`),
UNIQUE INDEX `customer` USING BTREE (`customer`)
) 
```

当我在不同的查询中得到 (customer, max_sale) 和 (customer, total_sales) 时，我想知道是否可以填充表格，以便一个客户只有一行具有值`max_sale`和`total_sales`.

我的插入查询是：

```
INSERT INTO 
basic_data (customer, max_sale)
SELECT a.customer, a.max_sale
FROM sales a
 ....
GROUP BY customer;

INSERT INTO
basic_data (customer,total_value)
SELECT customer, SUM(sales) total_value
FROM sales a
GROUP BY customer; 
```

而且我已经读过我可以使用`ON DUPLICATE KEY UPDATE`但无法正确使用它。

我的尝试

```
INSERT INTO
basic_data (customer,total_value)
SELECT customer, SUM(sales) total_value
FROM sales a
GROUP BY customer
ON DUPLICATE KEY person UPDATE total_value = ... 
```

一直不成功，我认为这是因为`ON DUPLICATE KEY`不与`GROUP BY`.

知道如何以这种方式存储数据吗？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T15:34:02.757

**更新 1**

```
INSERT INTO basic_data (customer,total_value)
SELECT customer, total_value
FROM
(
    SELECT customer, SUM(sales) total_value
    FROM   sales a
    GROUP  BY customer
) c
ON DUPLICATE KEY UPDATE total_value = c.total_value 
```

# arrays - 关联数组排序数值

> ID：15027393
> 
> 赞同：2
> 
> 时间：2013-02-22T15:21:57.040
> 
> 标签：arrays, sorting, associative

我有一个以下格式的关联数组。我需要按降序对数组进行排序，并以与升序相同的值对数组进行排序。

```
$numArray = array();
$numArray[0]['Word'] = 'One';
$numArray[0]['Number'] = 10.00;
$numArray[1]['Word'] = 'Two';
$numArray[1]['Number'] = 10.00;
$numArray[2]['Word'] = 'Three';
$numArray[2]['Number'] = 10.00; 
$numArray[3]['Word'] = 'Four';
$numArray[3]['Number'] = 30.00;
$numArray[4]['Word'] = 'Five';
$numArray[4]['Number'] = 20.00; 
$numArray[5]['Word'] = 'Six';
$numArray[5]['Number'] = 10.00; 
$numArray[6]['Word'] = 'Seven';
$numArray[6]['Number'] = 20.00; 
$numArray[7]['Word'] = 'Eight';
$numArray[7]['Number'] = 20.00; 
```

请帮我按以下顺序对数组进行排序。

数组 ( [0] => 数组 ( [Word] => 四 [Number] => 30 )

```
 [1] => Array
            (
                [Word] => Five
                [Number] => 20
            )

        [2] => Array
            (
                [Word] => Seven
                [Number] => 20
            )

        [3] => Array
            (
                [Word] => Eight
                [Number] => 20
            )

        [4] => Array
            (
                [Word] => One
                [Number] => 10
            )

        [5] => Array
            (
                [Word] => Two
                [Number] => 10
            )

        [6] => Array
            (
                [Word] => Three
                [Number] => 10
            )

        [7] => Array
            (
                [Word] => Six
                [Number] => 10
            )

    ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-27T15:30:56.393

```
foreach ($numArray as $key => $row) {
    $array[$key]  = $row['Number']; 
}

array_multisort($array, SORT_DESC, $numArray); 
```

这个小 php 代码至少会根据 Number 对数组 desc 进行排序。猜猜这就是你想要的一半。

# python - apache2 mod_wsgi bottlepy NameError: name 'os' is not defined

> ID：15027395
> 
> 赞同：0
> 
> 时间：2013-02-22T15:21:59.633
> 
> 标签：python, apache, mod-wsgi, bottle

我正在尝试使用 apache2 mod_wsgi 来部署 bottle.py Web 应用程序。

我按照以下说明进行操作：

[http://bottlepy.org/docs/dev/deployment.html#apache-mod-wsgi](http://bottlepy.org/docs/dev/deployment.html#apache-mod-wsgi)

添加了一个文件 /var/www/yourapp/app.wsgi：

```
# Change working directory so relative paths (and template lookup) work again
os.chdir(os.path.dirname(__file__))

import bottle
# ... build or import your bottle application here ...
# Do NOT use bottle.run() with mod_wsgi
application = bottle.default_app() 
```

我在 /var/www/yourapp/ 中添加了一个 yourapp.py 文件：

```
from bottle import route, run, template

@route('/hello/:name')
def index(name='World'):
    return template('<b>Hello {{name}}</b>!', name=name) 
```

我在做正确的事吗？

我收到一个 Http 500 错误，并在日志中发现了一些错误：

```
[Fri Feb 22 15:03:38 2013] [error] [client 192.168.0.104]     os.chdir(os.path.dirname(__file__))
[Fri Feb 22 15:03:38 2013] [error] [client 192.168.0.104] NameError: name 'os' is not defined
ke@dslds /var/log/apache2 $  NameError: name 'os' is not definedNameError: name 'os' is not defined 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T15:25:12.203

您需要`import os`作为第一个文件 (app.wsgi) 中的第一行。您正在尝试使用该`os`模块而无需先导入它。

# jquery - jQuery表单验证验证年龄

> ID：15027399
> 
> 赞同：-2
> 
> 时间：2013-02-22T15:22:09.257
> 
> 标签：jquery, jquery-validate

我正在开发一个通过 jQuery 表单验证进行验证的表单。我想知道是否有任何现有的 jQuery 或 javascript 来验证一个人至少 16 岁。一项要求是，如果用户未满 16 岁，则不能提交表单。

我知道这个验证是不够的，所以还会有一些服务器端验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:20:55.993

使用[插件的`addMethod()`方法](http://docs.jquery.com/Plugins/Validation/Validator/addMethod#namemethodmessage)，你可以用这个插件完成的事情没有限制。

```
jQuery.validator.addMethod("myRule", function(value, element, params) { 
    // your custom validation function
    // return false; // represents failed validation
    // return true; // represents passed validation
}, jQuery.format("failed - your custom message")); 
```

回调的参数是：

*   已验证元素的当前**值**
*   要验证的**元素**
*   **为方法指定的参数**，例如为`min: 5`参数 is `5`，`range: [1, 5]`为其`[1, 5]`

您可以通过多种方式应用新规则。标准方法就是在内部声明它`.validate()`以及您的其他规则。

**HTML**：

```
<input type="text" name="field1" /> 
```

**jQuery** :

```
$(document).ready(function () {

    $('#myform').validate({ // initialize the plugin
        // other options
        rules: {
            myfield1: {
                required: true,
                myRule: true // true/false or parameters
            },
            // other rules,
        }
    });

}); 
```

请参阅此工作演示，我在其中制定了自定义规则。您可以输入除“5”以外的任何内容。

**[http://jsfiddle.net/kKhFJ/](http://jsfiddle.net/kKhFJ/)**

# c# - Linq 中的 ToList 方法

> ID：15027402
> 
> 赞同：14
> 
> 时间：2013-02-22T15:22:11.550
> 
> 标签：c#, performance, linq

如果我没记错的话，ToList() 方法会在提供的集合的每个元素上进行迭代，并将它们添加到 List 的新实例中并返回此实例。假设一个示例

```
//using linq
list = Students.Where(s => s.Name == "ABC").ToList();

//traditional way
foreach (var student in Students)
{
  if (student.Name == "ABC")
    list.Add(student);
} 
```

我认为传统方式更快，因为它只循环一次，其中 Linq 上面的 Where 方法迭代两次，然后是 ToList() 方法。

我正在从事的项目现在广泛使用列表，我看到如果我将**列表**变量作为**IEnumerable**并删除 .ToList () 并将其进一步用作 IEnumerable。

这些东西对性能有影响吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-22T15:31:04.863

> 这些东西对性能有影响吗？

这取决于您的代码。大多数情况下，使用 LINQ 确实会对性能造成很小的影响。在某些情况下，这种影响对您来说可能很重要，但只有在您知道 LINQ 对您来说太慢时才应该避免使用 LINQ（即，如果分析您的代码表明 LINQ 是您的代码缓慢的原因）。

但是你是对的，`ToList()`过于频繁地使用会导致严重的性能问题。你应该`ToList()`只在必要时打电话。请注意，在某些情况下，添加`ToList()`可以大大提高性能（例如，每次迭代时从数据库加载集合时）。

关于迭代次数：这取决于“迭代两次”的确切含义。如果您计算在某个集合上调用的次数`MoveNext()`，那么是的，使用`Where()`这种方式会导致迭代两次。操作顺序是这样的（为了简化，我将假设所有项目都符合条件）：

1.  `Where()`被调用，暂时没有迭代，`Where()`返回一个特殊的枚举。
2.  `ToList()`被调用，调用`MoveNext()`从`Where()`.
3.  `Where()`现在调用`MoveNext()`原始集合并获取值。
4.  `Where()`调用你的谓词，它返回`true`.
5.  `MoveNext()``ToList()`从返回中调用，`ToList()`获取值并将其添加到列表中。
6.  …</li>

这意味着如果原始集合中的所有*n 个*`MoveNext()`项目都符合条件，则将被调用 2 *n*次、*n*次 from`Where()`和*n*次 from `ToList()`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-22T15:24:44.700

```
var list = Students.Where(s=>s.Name == "ABC"); 
```

这只会创建一个查询并且在使用查询之前不会循环元素。通过调用 ToList() 将首先执行查询，因此只循环一次您的元素。

```
List<Student> studentList = new List<Student>();
var list = Students.Where(s=>s.Name == "ABC");
foreach(Student s in list)
{
    studentList.add(s);
} 
```

这个例子也只会迭代一次。因为它只用过一次。请记住，该列表将在每次调用时迭代所有学生。不仅仅是那些名字是 ABC 的学生。因为它是一个查询。

对于后面的讨论，我做了一个测试示例。也许它不是 IEnumable 的最佳实现，但它做了它应该做的事情。

首先我们有我们的清单

```
public class TestList<T> : IEnumerable<T>
{
    private TestEnumerator<T> _Enumerator;

    public TestList()
    {
        _Enumerator = new TestEnumerator<T>();
    }

    public IEnumerator<T> GetEnumerator()
    {
        return _Enumerator;
    }

    System.Collections.IEnumerator System.Collections.IEnumerable.GetEnumerator()
    {
        throw new NotImplementedException();
    }

    internal void Add(T p)
    {
        _Enumerator.Add(p);
    }
} 
```

由于我们想计算调用 MoveNext 的次数，我们必须实现我们的自定义枚举器 aswel。在 MoveNext 中观察，我们的程序中有一个静态计数器。

公共类 TestEnumerator : IEnumerator { public Item FirstItem = null; 公共项目 CurrentItem = null;

```
 public TestEnumerator()
    {
    }

    public T Current
    {
        get { return CurrentItem.Value; }
    }

    public void Dispose()
    {

    }

    object System.Collections.IEnumerator.Current
    {
        get { throw new NotImplementedException(); }
    }

    public bool MoveNext()
    {
        Program.Counter++;
        if (CurrentItem == null)
        {
            CurrentItem = FirstItem;
            return true;
        }
        if (CurrentItem != null && CurrentItem.NextItem != null)
        {
            CurrentItem = CurrentItem.NextItem;
            return true;
        }
        return false;
    }

    public void Reset()
    {
        CurrentItem = null;
    }

    internal void Add(T p)
    {
        if (FirstItem == null)
        {
            FirstItem = new Item<T>(p);
            return;
        }
        Item<T> lastItem = FirstItem;
        while (lastItem.NextItem != null)
        {
            lastItem = lastItem.NextItem;
        }
        lastItem.NextItem = new Item<T>(p);
    }
} 
```

然后我们有一个自定义项目，它只是包装我们的价值

```
public class Item<T>
{
    public Item(T item)
    {
        Value = item;
    }

    public T Value;

    public Item<T> NextItem;
} 
```

为了使用实际代码，我们创建了一个包含 3 个条目的“列表”。

```
 public static int Counter = 0;
    static void Main(string[] args)
    {
        TestList<int> list = new TestList<int>();
        list.Add(1);
        list.Add(2);
        list.Add(3);

        var v = list.Where(c => c == 2).ToList(); //will use movenext 4 times
        var v = list.Where(c => true).ToList();   //will also use movenext 4 times

        List<int> tmpList = new List<int>(); //And the loop in OP question
        foreach(var i in list)
        {
            tmpList.Add(i);
        }                                    //Also 4 times.
    } 
```

和结论？它如何影响性能？在这种情况下，MoveNext 被调用 n+1 次。不管我们有多少物品。而且 WhereClause 也无所谓，他仍然会运行 MoveNext 4 次。因为我们总是在我们的初始列表上运行我们的查询。我们将受到的唯一性能影响是实际的 LINQ 框架及其调用。实际制作的循环将是相同的。

在有人问为什么它是 N+1 次而不是 N 次之前。这是因为他最后一次没有元素时返回 false。使其成为元素的数量+列表的结尾。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-22T16:42:02.453

要完全回答这个问题，这取决于实现。如果您正在谈论 LINQ to SQL/EF，那么在这种情况下，当调用 .ToList 时将只有一次迭代，它在内部调用 .GetEnumerator。然后将查询表达式解析为 TSQL 并传递给数据库。然后将生成的行迭代（一次）并添加到列表中。

在 LINQ to Objects 的情况下，也只有一次数据传递。在 where 子句中使用 yield return 在内部设置了一个状态机，用于跟踪进程在迭代中的位置。Where 不进行完整迭代，创建一个临时列表，然后将这些结果传递给查询的其余部分。它只是确定一个项目是否符合标准，并且只传递那些匹配的项目。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-22T15:35:24.043

首先，[你为什么还要问我？](http://ericlippert.com/2012/12/17/performance-rant/)自己量一下看看。

也就是说，`Where`,`Select`和`OrderBy`其他 LINQ`IEnumerable`扩展方法，一般来说，实现得尽可能惰性（该[`yield`](http://msdn.microsoft.com/en-us/library/vstudio/9k7k7cf0.aspx)关键字经常使用）。这意味着除非他们必须这样做，否则他们不会处理数据。从你的例子：

```
var list = Students.Where(s => s.Name == "ABC"); 
```

不会执行任何东西。即使`Students`是 1000 万个对象的列表，它也会立即返回。在某个地方实际请求结果之前，根本不会调用谓词，这实际上就是`ToList()`这样做的：它说“是的，结果 - 所有这些 - 都是立即需要的”。

然而，调用 LINQ 方法有一些初始开销，因此传统方法通常会更快，但 LINQ 方法的可组合性和易用性，恕我直言，足以弥补这一点。

如果您想了解这些方法是如何实现的，可以从[Microsoft Reference Sources](http://referencesource.microsoft.com/netframework.aspx)中获得参考。

# metrics - 按服务器过滤 Graphite 指标

> ID：15027404
> 
> 赞同：1
> 
> 时间：2013-02-22T15:22:17.167
> 
> 标签：metrics, graphite, statsd

我最近使用 statsD 仪器对石墨进行了大量研究。在我们的开发运营团队的帮助下，我们设法让多台服务器向石墨报告指标，并结合所有指标。这部分是我们正在寻找的，但是我想按服务器过滤指标集合，而不是将所有指标平均在一起。这样做的目的是监控每台服务器的指标收集，因为我们的许多统计数据也可用于可视化服务器正常运行时间和性能。在我的研究中，除了聚合规则可能存在一些诡计之外，我还没有找到任何关于如何实现这一点的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T19:41:35.890

您应该将服务器名称作为要发出的指标名称的第一个路径组件。命名度量时，Graphite 将度量名称分隔为路径组件，`.`用作路径组件之间的分隔符。例如，您可能希望使用如下命名模式：这将导致每个服务器在[http://graphite_hostname.com/dashboard/](http://graphite_hostname.com/dashboard/)`<data_center>_<environment>_<role>_<node_id>.gauges.cpu.idle_pct`上列为单独的类别

如果您需要跨服务器执行聚合，您可以在石墨层执行此操作，或者您可以使用两个不同的名称发出相同的指标：一个指标名称具有第一个路径组件作为服务器名称，一个指标名称具有第一个路径组件作为一个值，在您希望聚合该指标的所有服务器之间共享。

# xamarin.ios - Google Maps SDK for iOS 在使用 Monotouch 绑定启动时崩溃

> ID：15027405
> 
> 赞同：3
> 
> 时间：2013-02-22T15:22:17.980
> 
> 标签：xamarin.ios, google-maps-sdk-ios

我正在尝试使用 GitHub 上的[GoogleMapsSample](https://github.com/mono/monotouch-bindings/tree/master/GoogleMaps/sample/GoogleMapsSample)测试适用于 iOS 的新 Google SDK ，但是，每次我运行应用程序时尝试创建`GMSMapView`. 尝试在模拟器和设备上运行时会发生这种情况。

我已经从开发人员控制台启用了 SDK 并更新了`GMSServices.ProvideAPIKey`使用我的 iOS API 密钥的调用，从我所读到的内容几乎就是所有需要的？

我确实注意到这个[错误](http://code.google.com/p/gmaps-api-issues/issues/detail?id=4752)是针对实际 SDK 记录的，它提到了一个与 OpenGL 相关的问题，所以不确定这是否是这里的问题。但是，由于我无法使用模拟器访问日志，所以我在设备上运行它并使用 XCode 检查了日志，并且错误似乎与此有关 - 堆栈跟踪：

```
Incident Identifier: {Incident Id}
CrashReporter Key:   {CrashReporter key}
Hardware Model:      iPhone5,2
Process:         GoogleMapsSample [6085]
Path:            /var/mobile/Applications/{AppId}/GoogleMapsSample.app/GoogleMapsSample
Identifier:      GoogleMapsSample
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2013-02-27 18:28:21.300 +0000
OS Version:      iOS 6.0.2 (10A551)
Report Version:  104

Exception Type:  EXC_BAD_ACCESS (SIGABRT)
Exception Codes: KERN_INVALID_ADDRESS at 0x00000180
Crashed Thread:  6

Last Exception Backtrace:
0   CoreFoundation                  0x372913e2 __exceptionPreprocess + 158
1   libobjc.A.dylib                 0x33cc995e objc_exception_throw + 26
2   CoreData                        0x32330828 +[NSEntityDescription entityForName:inManagedObjectContext:] + 100
3   GoogleMapsSample                0x0010a3c6 -[GMSTileDataCache fetchTilesImmediateWithPredicate:sortDescriptor:completionHandler:] (GMSTileDataCache.mm:794)
4   GoogleMapsSample                0x00106af0 __47-[GMSTileDataCache startWithCompletionHandler:]_block_invoke_0 (GMSTileDataCache.mm:170)
5   libdispatch.dylib               0x3096478e _dispatch_call_block_and_release + 6
6   libdispatch.dylib               0x30967b36 _dispatch_queue_drain + 138
7   libdispatch.dylib               0x30965678 _dispatch_queue_invoke + 40
8   libdispatch.dylib               0x3096860e _dispatch_root_queue_drain + 206
9   libdispatch.dylib               0x309687d4 _dispatch_worker_thread2 + 88
10  libsystem_c.dylib               0x3337f7ec _pthread_wqthread + 356
11  libsystem_c.dylib               0x3337f680 start_wqthread + 4

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0:
0   dyld                            0x2fe9bcf6 ImageLoaderMachOCompressed::trieWalk(unsigned char const*, unsigned char const*, char const*) + 42
1   dyld                            0x2fe9be88 ImageLoaderMachOCompressed::findExportedSymbol(char const*, ImageLoader const**) const + 72
2   dyld                            0x2fe96ca4 ImageLoaderMachO::findExportedSymbol(char const*, bool, ImageLoader const**) const + 28
3   dyld                            0x2fe93592 ImageLoader::findExportedSymbolInDependentImagesExcept(char const*, ImageLoader const**, ImageLoader const**&, ImageLoader const**, ImageLoader const**) const + 50
4   dyld                            0x2fe936f0 ImageLoader::findExportedSymbolInImageOrDependentImages(char const*, ImageLoader::LinkContext const&, ImageLoader const**) const + 64
5   dyld                            0x2fe91d12 dlsym + 474
6   libdyld.dylib                   0x37ad79c6 dlsym + 54
7   libGFXShared.dylib              0x3362e5c4 gfxInitializeLibrary + 1256
8   GLEngine                        0x379bce6a gliInitializeLibrary + 42
9   OpenGLES                        0x36a9fa4e eagl_init + 418
10  OpenGLES                        0x36a9f6a4 -[EAGLSharegroup initWithAPI:sharedWithCompute:] + 116
11  OpenGLES                        0x36a9e45e -[EAGLContext initWithAPI:properties:] + 186
12  OpenGLES                        0x36a9e2f2 -[EAGLContext initWithAPI:sharedWithCompute:] + 138
13  GoogleMapsSample                0x00081ada -[GMSIOSGLContext initWithAPI:] (GMSIOSGLContext.mm:14)
14  GoogleMapsSample                0x001275b6 gmscore::renderer::GMSIOSGLContextPool::GMSIOSGLContextPool() (GLContextPool.mm:108)
15  GoogleMapsSample                0x0012733a __GetGLContextPool_block_invoke_0 (GLContextPool.mm:204)
16  libdispatch.dylib               0x309645d8 _dispatch_client_callout + 20
17  libdispatch.dylib               0x30965586 dispatch_once_f + 42
18  GoogleMapsSample                0x001272da gmscore::renderer::GLContextPool::GetGLContextPool() (once.h:68)
19  GoogleMapsSample                0x00142b60 -[GMSEntityRendererView initWithFrame:context:] (GMSEntityRendererView.mm:53)
20  GoogleMapsSample                0x001562be -[GMSGestureHandlerView initWithFrame:context:gestures:] (GMSGestureHandlerView.mm:282)
21  GoogleMapsSample                0x000fc6d6 -[GMSVectorMapView initWithFrame:connection:tileServiceRegistry:tileRequestCoordinator:serverControlledParameters:resourceManager:resources:networkMonitor:context:flags:locationPipeline:] (GMSVectorMapView.mm:245)
22  GoogleMapsSample                0x00097bc6 -[GMSVectorMapViewBridge sharedInit:] (GMSVectorMapViewBridge.mm:108)
23  GoogleMapsSample                0x000977f0 -[GMSVectorMapViewBridge initWithFrame:camera:] (GMSVectorMapViewBridge.mm:84)
24  GoogleMapsSample                0x00080caa +[GMSMapView mapWithFrame:camera:] (GMSMapView.m:36)
25  GoogleMapsSample                0x00183058 wrapper_managed_to_native_ApiDefinition_Messaging_IntPtr_objc_msgSend_RectangleF_GMSCamera_intptr_intptr_System_Drawing_RectangleF_GoogleMaps_GMSCamera + 456
26  GoogleMapsSample                0x004ff57c GoogleMapsSample_MapViewController_LoadView (MapViewController.cs:21)
27  GoogleMapsSample                0x00edae94 wrapper_runtime_invoke_object_runtime_invoke_dynamic_intptr_intptr_intptr_intptr + 196
28  GoogleMapsSample                0x018ebd84 mono_jit_runtime_invoke (mini.c:5783)
29  GoogleMapsSample                0x0195b644 mono_runtime_invoke (object.c:2790)
30  GoogleMapsSample                0x018d9816 native_to_managed_trampoline_GoogleMapsSample_MapViewController_LoadView (registrar.m:10129)
31  UIKit                           0x3805d41c -[UIViewController loadViewIfRequired] + 64
32  UIKit                           0x3809dd2c -[UIWindow addRootViewControllerViewIfPossible] + 60
33  UIKit                           0x38099ac8 -[UIWindow _setHidden:forced:] + 360
34  UIKit                           0x380db19c -[UIWindow makeKeyAndVisible] + 56
35  GoogleMapsSample                0x01549600 wrapper_managed_to_native_MonoTouch_ObjCRuntime_Messaging_void_objc_msgSend_intptr_intptr + 64
36  GoogleMapsSample                0x004ff22c GoogleMapsSample_AppDelegate_FinishedLaunching_MonoTouch_UIKit_UIApplication_MonoTouch_Foundation_NSDictionary (AppDelegate.cs:35)
37  GoogleMapsSample                0x00edae94 wrapper_runtime_invoke_object_runtime_invoke_dynamic_intptr_intptr_intptr_intptr + 196
38  GoogleMapsSample                0x018ebd84 mono_jit_runtime_invoke (mini.c:5783)
39  GoogleMapsSample                0x0195b644 mono_runtime_invoke (object.c:2790)
40  GoogleMapsSample                0x018c9608 native_to_managed_trampoline_GoogleMapsSample_AppDelegate_FinishedLaunching (registrar.m:5515)
41  UIKit                           0x3809ea74 -[UIApplication _handleDelegateCallbacksWithOptions:isSuspended:restoreState:] + 248
42  UIKit                           0x3809e5f8 -[UIApplication _callInitializationDelegatesForURL:payload:suspended:] + 1164
43  UIKit                           0x38096806 -[UIApplication _runWithURL:payload:launchOrientation:statusBarStyle:statusBarHidden:] + 694
44  UIKit                           0x3803ecea -[UIApplication handleEvent:withNewEvent:] + 1006
45  UIKit                           0x3803e778 -[UIApplication sendEvent:] + 68
46  UIKit                           0x3803e1ba _UIApplicationHandleEvent + 6194
47  GraphicsServices                0x315235f4 _PurpleEventCallback + 588
48  GraphicsServices                0x31523222 PurpleEventCallback + 30
49  CoreFoundation                  0x372663e4 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 32
50  CoreFoundation                  0x37266386 __CFRunLoopDoSource1 + 134
51  CoreFoundation                  0x3726520a __CFRunLoopRun + 1378
52  CoreFoundation                  0x371d8238 CFRunLoopRunSpecific + 352
53  CoreFoundation                  0x371d80c4 CFRunLoopRunInMode + 100
54  UIKit                           0x38095440 -[UIApplication _run] + 664
55  UIKit                           0x3809228c UIApplicationMain + 1116
56  GoogleMapsSample                0x01576fa8 wrapper_managed_to_native_MonoTouch_UIKit_UIApplication_UIApplicationMain_int_string___intptr_intptr + 236
57  GoogleMapsSample                0x004fef5c GoogleMapsSample_Application_Main_string__ (Main.cs:17)
58  GoogleMapsSample                0x00edae94 wrapper_runtime_invoke_object_runtime_invoke_dynamic_intptr_intptr_intptr_intptr + 196
59  GoogleMapsSample                0x018ebd84 mono_jit_runtime_invoke (mini.c:5783)
60  GoogleMapsSample                0x0195b644 mono_runtime_invoke (object.c:2790)
61  GoogleMapsSample                0x0195e3aa mono_runtime_exec_main (object.c:3972)
62  GoogleMapsSample                0x01961cce mono_runtime_run_main (object.c:3602)
63  GoogleMapsSample                0x01905be6 mono_jit_exec (driver.c:1125)
64  GoogleMapsSample                0x019ae5f4 main (main.m:445)
65  GoogleMapsSample                0x0016d20c start + 36

Thread 1 name:  Dispatch queue: com.apple.libdispatch-manager
Thread 1:
0   libsystem_kernel.dylib          0x378c25d0 kevent64 + 24
1   libdispatch.dylib               0x30969d22 _dispatch_mgr_invoke + 806
2   libdispatch.dylib               0x30965374 _dispatch_mgr_thread + 32

Thread 2:
0   libsystem_kernel.dylib          0x378d2d98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x3337fad6 _pthread_workq_return + 14
2   libsystem_c.dylib               0x3337f7f2 _pthread_wqthread + 362
3   libsystem_c.dylib               0x3337f680 start_wqthread + 4

Thread 3:
0   libsystem_kernel.dylib          0x378c1e80 semaphore_wait_trap + 8
1   GoogleMapsSample                0x01900992 mono_sem_wait (mono-semaphore.c:115)
2   GoogleMapsSample                0x019a0cea finalizer_thread (gc.c:1078)
3   GoogleMapsSample                0x0198bff6 start_wrapper (threads.c:784)
4   GoogleMapsSample                0x018f3942 thread_start_routine (wthreads.c:287)
5   GoogleMapsSample                0x019392dc GC_start_routine (pthread_support.c:1468)
6   libsystem_c.dylib               0x3338a0de _pthread_start + 306
7   libsystem_c.dylib               0x33389fa4 thread_start + 4

Thread 4 name:  WebThread
Thread 4:
0   libsystem_kernel.dylib          0x378c1e30 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x378c1fd0 mach_msg + 48
2   CoreFoundation                  0x372662b6 __CFRunLoopServiceMachPort + 126
3   CoreFoundation                  0x3726502c __CFRunLoopRun + 900
4   CoreFoundation                  0x371d8238 CFRunLoopRunSpecific + 352
5   CoreFoundation                  0x371d80c4 CFRunLoopRunInMode + 100
6   WebCore                         0x38ef9a58 _ZL12RunWebThreadPv + 440
7   libsystem_c.dylib               0x3338a0de _pthread_start + 306
8   libsystem_c.dylib               0x33389fa4 thread_start + 4

Thread 5:
0   libsystem_kernel.dylib          0x378d2d98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x3337fad6 _pthread_workq_return + 14
2   libsystem_c.dylib               0x3337f7f2 _pthread_wqthread + 362
3   libsystem_c.dylib               0x3337f680 start_wqthread + 4

Thread 6 name:  Dispatch queue: com.google.maps.TileDataCacheQueue
Thread 6 Crashed:
0   libsystem_kernel.dylib          0x378d2350 __pthread_kill + 8
1   libsystem_c.dylib               0x333a7fb2 pthread_kill + 54
2   libsystem_c.dylib               0x333e4366 abort + 90
3   GoogleMapsSample                0x019330a4 mono_handle_native_sigsegv (mini-exceptions.c:2325)
4   GoogleMapsSample                0x018ea55e mono_sigsegv_signal_handler (mini.c:5878)
5   libsystem_c.dylib               0x333b1d38 _sigtramp + 40
6   GoogleMapsSample                0x01994b34 mono_domain_get (domain.c:1818)
7   GoogleMapsSample                0x0195b644 mono_runtime_invoke (object.c:2790)
8   GoogleMapsSample                0x019c0058 monotouch_throw_monotouch_exception (monotouch-glue.m:1420)
9   GoogleMapsSample                0x019c00e8 monotouch_exception_handler (monotouch-glue.m:1426)
10  CoreFoundation                  0x372916cc __handleUncaughtException + 624
11  libobjc.A.dylib                 0x33cc9a46 _ZL15_objc_terminatev + 126
12  libc++abi.dylib                 0x361ee118 _ZL19safe_handler_callerPFvvE + 76
13  libc++abi.dylib                 0x361ee1b0 std::terminate() + 16
14  libc++abi.dylib                 0x361ef59a __cxa_throw + 118
15  libobjc.A.dylib                 0x33cc999e objc_exception_throw + 90
16  CoreData                        0x32330828 +[NSEntityDescription entityForName:inManagedObjectContext:] + 100
17  GoogleMapsSample                0x0010a3c6 -[GMSTileDataCache fetchTilesImmediateWithPredicate:sortDescriptor:completionHandler:] (GMSTileDataCache.mm:794)
18  GoogleMapsSample                0x00106af0 __47-[GMSTileDataCache startWithCompletionHandler:]_block_invoke_0 (GMSTileDataCache.mm:170)
19  libdispatch.dylib               0x30964790 _dispatch_call_block_and_release + 8
20  libdispatch.dylib               0x30967b36 _dispatch_queue_drain + 138
21  libdispatch.dylib               0x30965678 _dispatch_queue_invoke + 40
22  libdispatch.dylib               0x30968610 _dispatch_root_queue_drain + 208
23  libdispatch.dylib               0x309687d4 _dispatch_worker_thread2 + 88
24  libsystem_c.dylib               0x3337f7ee _pthread_wqthread + 358
25  libsystem_c.dylib               0x3337f680 start_wqthread + 4

Thread 6 crashed with ARM Thread State (32-bit):
    r0: 0x00000000    r1: 0x00000000      r2: 0x00000000      r3: 0x3a484524
    r4: 0x00000006    r5: 0x0aa4c000      r6: 0x01a14b1e      r7: 0x0aa4af9c
    r8: 0x00000000    r9: 0x3a480898     r10: 0x01a14b44     r11: 0x05a9385c
    ip: 0x00000148    sp: 0x0aa4af90      lr: 0x333a7fb7      pc: 0x378d2350
  cpsr: 0x00000010 
```

版本信息：

```
Mono 2.10.11 (mono-2-10/2baeee2)
GTK 2.24.14
GTK# (2.12.0.0)
Package version: 210110000
Xcode 4.5.1 (1842)
Build 4G1004
Monotouch: 6.2.0.65 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T07:03:52.747

# 更新#2

谷歌提出了一种解决方法，并已实施。[我已成功部署到设备:) 您可以在MonoTouch-Bindings Repo](https://github.com/mono/monotouch-bindings/tree/master/GoogleMaps)上找到工作解决方案

如此处所述，Google 将在其即将发布的版本中解决此[问题](http://code.google.com/p/gmaps-api-issues/issues/detail?id=5018#c7)。

快乐编码

* * *

# 更新

Google Maps 上存在一个错误，导致无法在 Xamarin.iOS 中使用它，此错误已在此处报告给 google

[http://code.google.com/p/gmaps-api-issues/issues/detail?id=5018](http://code.google.com/p/gmaps-api-issues/issues/detail?id=5018)

请给它加星标，以便谷歌注意到并更快地修复它；）

* * *

我已将绑定更新为 Google 地图 1.1.0 版，您可以在此处找到它们[https://github.com/mono/monotouch-bindings/tree/master/GoogleMaps](https://github.com/mono/monotouch-bindings/tree/master/GoogleMaps)

请注意**，我尚未更新**示例以反映 Api 更改。

希望这可以帮助

亚历克斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T23:50:08.347

Xamarin 没有更新到较新的版本，因为他们在 12 月 14 日进行了最后一次更新。我相信这次崩溃与这个问题有关。也许您今天可以生成的 API 密钥只是为 1.1.0 和更高版本构建的。

# .net - 我可以在 .NET 1.1 项目中使用在 VS2010 .NET 4.0 中创建的类库吗

> ID：15027407
> 
> 赞同：0
> 
> 时间：2013-02-22T15:22:26.327
> 
> 标签：.net, .net-1.1

我有一个使用 VS2003 Ver 7.1.6030 开发的 .NET 1.1 Web 应用程序，使用 VB.NET 作为后面的代码；我最近在 VS2010 .NET 4.0 中创建了一个类库，以添加能够使用 System.Mail SmptClient 发送电子邮件，但是当我尝试添加对我的 .NET 1.1 项目的引用时，它给了我以下错误：

“无法添加对 libraryname.dll 的引用。这不是有效的程序集或 COM 组件。只能引用扩展名为“dll”的程序集和 COM 组件。请确保该文件是可访问的，并且它是一个有效的程序集或 COM 组件。”</p>

我究竟做错了什么？这可能吗？

非常感谢你的帮助！

大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:30:22.307

尝试以下类似的方法（不久前发现并保存在我的笔记中）：

```
// Load the assembly
Assembly a = Assembly.LoadFile(@"C:\PathHere\DLL.dll");

// Load the type and create an instance
Type t = a.GetType("ClassLibrary.ClassName");
object instance = a.CreateInstance("ClassLibrary.ClassName");

// Call the method
MethodInfo m = t.GetMethod("MethodName");
m.Invoke(instance, new object[] {}); // Get the result here 
```

这是一个更详细的带有参数的示例：[反射：如何使用参数调用方法](https://stackoverflow.com/questions/2202381/reflection-how-to-invoke-method-with-parameters)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T16:22:08.940

您不能直接在 .net 1.1 项目中使用 .net 4 dll（您可以改为在 4 中使用 1.1）。唯一的解决方案（除非您可以升级框架版本）是包装您的功能（即在 WCF 自托管服务中）并通过 Web 服务或其他 IPC 技术使用它。

# iphone - 重复使用的单元格内的文本字段导航

> ID：15027415
> 
> 赞同：0
> 
> 时间：2013-02-22T15:22:45.757
> 
> 标签：iphone, ios, objective-c, xcode, ipad

我试图让用户能够使用箭头键循环浏览表格视图中的所有文本字段（每个单元格两个文本字段）。

目前我正在做的是为每个文本字段设置一个标签，并将每个文本字段添加到一个数组中。一旦用户单击文本字段开始编辑它，就会出现一些箭头按钮，当他们按下箭头键时，我抓住当前选定文本字段的标签，将其用作数组的位置，拉出他们的文本字段想去，并将新的文本字段设置为第一响应者。

然而，问题在于我的细胞被重复使用。因此，如果用户将单元格滚动到屏幕外，当它返回时，表格第 1 行中的单元格可能包含带有标签 15 和 16 的文本字段，而这些文本字段数组的末尾会破坏我的箭头键。他们滚动得越多，文本字段越乱。

是否有可能在保持可重复使用的细胞的同时完成我想做的事情？或者这只是要求我不要重复使用它们？

这是我的箭头代码...

```
- (void)arrowPressedHandler:(UIButton *)button
{
UITextField *newTextFieldSelection;

//tags are offset by 2 because I have use tag 1 for something else, and tag 0 cannot be used
int realLocation = selectedTextField.tag - 2; 

//arrow code.  for an up button i go back 2 slots in the array, right is + 1 in array
//etc etc 
@try{
    switch (button.tag) {
        case NumericKeyboardViewUpArrow:
            newTextFieldSelection = [textFields objectAtIndex:realLocation - 2];
            [newTextFieldSelection becomeFirstResponder];
            break;
        case NumericKeyboardViewLeftArrow:
            newTextFieldSelection = [textFields objectAtIndex:realLocation - 1];
            [newTextFieldSelection becomeFirstResponder];
            break;
        case NumericKeyboardViewRightArrow:
            newTextFieldSelection = [textFields objectAtIndex:realLocation +1];
            [newTextFieldSelection becomeFirstResponder];
            break;
        case NumericKeyboardViewDownArrow:
            newTextFieldSelection = [textFields objectAtIndex:realLocation + 2];
            [newTextFieldSelection becomeFirstResponder];
            break;
        default:
            break;
    }
}
@catch (NSException *e)
{
    return;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:42:46.433

我会采取稍微不同的方法。

与其给出所有 textField 的不同标签，不如给它们一个在每一行中唯一的标签，但在行之间是相同的。即左边的得到标签1000，右边的得到1001。然后，使用单元格的indexPath 得到适当的行。您的`arrowPressedHandler:`方法看起来像这样（在伪代码中）：

```
- (void)arrowPressedHandler:(UIButton *)button
{
    NSIndexPath *selectedIndexPath = indexPathOfSelectedTextfield;
    UITextField *newTextFieldSelection;
    NSIndexPath *newIndexPath;
    NSUInteger newTag = 0;

    @try{
        switch (button.tag) {
            case NumericKeyboardViewUpArrow:
                // Move back two textFields (which would be the one directly above this one)
                newIndexPath = selectedIndexPath - 1;
                newTag = selectedTextField.tag;
                break;
            case NumericKeyboardViewLeftArrow:
                // Move back one textField.
                if (selectedTextField.tag == 1000) {
                    // Selected text field is on left.  Select right textfield in the row above
                    newIndexPath = selectedIndexPath - 1;
                    newTag = 1001;
                } else {
                    // Selected text field is on right.  Select the left textfield in the same row
                    newIndexPath = selectedIndexPath;
                    newTag = 1000;
                }
                break;
            // etc.
        }
        [self.tableview scrollToRowAtIndexPath:newIndexPath];
        newTextFieldSelection = [[self.tableview cellForRowAtIndexPath:newIndexPath] viewWithTag:newTag];
        [newTextFieldSelection becomeFirstResponder];

    }
    @catch (NSException *e)
    {
        return;
    }

} 
```

# php - Codeigniter 滚动分页

> ID：15027416
> 
> 赞同：5
> 
> 时间：2013-02-22T15:22:47.303
> 
> 标签：php, jquery, codeigniter, infinite-scroll

我在codeigniter中使用jquery插件**滚动**分页我面临的问题是我的循环没有终止并且没有给出准确的结果。

这是我的**html**代码

```
<div id="main">
    <div id='friend_display'>
    <?php if($list->num_rows() > 0  ){
            foreach($list->result() as $show)
            {   ?>

    <div class="image-box" style="margin-left:30px" id='image-holder' >

        <div class="photo-cover">
            <a href="<?=base_url()?>uploads/user_images/<?php echo $show->user_image;?>" class="big-image"><img width="160px" height="117px" src="<?=base_url()?>uploads/user_images/friends/<?php echo $show->user_image;?>" alt="" /></a>
        </div>

        <p class="photo-name"><b><?php echo $show->user_name;?></b></p>

    </div>
    <?php } } else { echo '<div align="center" style="color:#FF0000; font-size:17px; font-weight:bold">You have no Friends yet</div>';}?>

    <div class="cl">&nbsp;</div>
</div></div> 
```

这是**脚本**

```
 <script type="text/javascript">
  var page_num = 1; 
   $(function(){
$('#friend_display').scrollPagination({
    'contentPage': '<?=base_url()?>friends/load_more', // the url you are fetching the results
    'contentData': {page_num:$('.image-box').size()}, // these are the variables you can pass to the request, for example: children().size() to know which page you are
    'scrollTarget': $(window), // who gonna scroll? in this example, the full window
    'heightOffset': 10, // it gonna request when scroll is 10 pixels before the page ends
    'beforeLoad': function(){ // before load function, you can display a preloader div
        $('#loading1').fadeIn();    
    },
    'afterLoad': function(elementsLoaded){ // after loading content, you can use this function to animate your new elements
         $('#loading1').fadeOut();
         var i = 0;
         $(elementsLoaded).fadeInWithDelay();
         page_num:$('.image-box').size();
    }
});

// code for fade in element by element
$.fn.fadeInWithDelay = function(){
    var delay = 0;
    return this.each(function(){
        $(this).delay(delay).animate({opacity:1}, 200);
        delay += 100;
    });
};

 });
</script> 
```

这是我的**php**函数

```
 function load_more() 
{
    $offset =   $this->input->post('page_num');
    $list       =   $this->friends_model->show_friends($offset);
    if($list->num_rows()>0)
    {
        foreach($list->result() as $show)
        {?>

            <div class="image-box" style="margin-left:30px" id='image-holder'>
            <div class="photo-cover">
            <a href="<?=base_url()?>uploads/user_images/<?php echo $show->user_image;?>" class="big-image"><img width="160px" height="117px" src="<?=base_url()?>uploads/user_images/friends/<?php echo $show->user_image;?>" alt="" /></a>
            </div>

        <p class="photo-name"><b><?php echo $show->user_name;?></b></p>

    </div>
    <?php } ?>
    <div class="cl">&nbsp;</div>
    <?php
    } 
    else 
    {  
        //echo(333); 
    }
} 
```

在**db**我 jst shoing 主查询 $this->db->limit(12,$offset); 有人可以告诉我我错过了什么吗？

打开此链接以查看完整的代码。[滚动分页](http://pastebin.com/MC1KZm8y)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T21:19:36.897

我相信您获取偏移量的方式不正确。（以为我不确定，因为我不知道您的 POST['page_num'] 中有什么）

```
$offset =   $this->input->post('page_num'); 
```

看起来您获取了页码，但限制函数中的偏移量应该是必须跳过多少行。因此，如果您显示每个“tick”偏移量 12 个结果应该是 12*page_number

```
$this->db->limit(12,$offset*12); 
```

如果您将偏移量留给页码，您将得到错误的结果：

```
limit(12,[0,1,2,...]) // items 1-12, 2-13, 3-14 etc...

limit(12,[0,12,24....] //items 1-12, 13-24, 25-32 etc... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T11:31:15.180

在这里，我以自己的方式解决了这个问题，你可以试试这个。在你的脚本中删除这一行

```
'contentData': {page_num:$('.image-box').size()}, 
```

并添加这一行

```
 'childClass' : '.image-box', 
```

打开 scrollpagination.js 文件后，将此行替换 `data: opts.contentData,`为 this `data: {page_num : $(obj).children(opts.childClass).size()},`。再次`'contentData' : {},`将此行替换为`'childClass' : '.datalist',`.

在你的`function display_friends()`请用这一行替换`exit;`函数`echo '<input type="hidden" id="nodata" value="1" />';`。之后编写您的脚本如下所示：

```
$(function(){

    $('#nomoreresult').hide();
    $('#loading1').hide();
    $('#friend_display').scrollPagination({

    'contentPage': 'Your_Url', // the url you are fetching the results
     // these are the variables you can pass to the request, for example: children().size() to know which page you are
    'childClass' : '.image-box',
    'scrollTarget': $(window), // who gonna scroll? in this example, the full window
    'heightOffset': 10, // it gonna request when scroll is 10 pixels before the page ends
    'beforeLoad': function(){ // before load function, you can display a preloader div
        $('#loading1').show().fadeIn();
    },
    'afterLoad': function(elementsLoaded){
     // after loading content, you can use this function to animate your new elements
        $('#loading1').hide().fadeOut();
        $(elementsLoaded).fadeInWithDelay();

        if($('#nodata').val() == '1'){
            $('#friend_display').stopScrollPagination();
            $('#loading1').hide();
            $('#nomoreresult').show().fadeIn();

        }

    }
});

// code for fade in element by element
$.fn.fadeInWithDelay = function(){
    var delay = 0;
    return this.each(function(){
        $(this).delay(delay).animate({opacity:1}, 200);
        delay += 1000;
    });
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T14:04:03.107

在代码中添加此缺少的代码，这`afterLoad:function(){..`也应该停止循环您的分页确保添加与您输入的完全相同的 id`scrollpagination id <div id='friend_display'>`

```
if ($('#friend_display').children().size() > 100){ //set the condition to where to stop
// if more than 100 results already loaded, then stop pagination (only for testing)
    $('#nomoreresults').fadeIn(); //if you want to show message like "No more result!" use this
    $('#friend_display').stopScrollPagination();// this is the most important function call
} 
```

* * *

在此内部`.scrollPagination({..`更改意味着您的 display_friends() 方法仅应包含要加载和解析的视图文件以及要显示的数据，并且在该视图内使用 foreach 回显您的数据`'contentPage': '<?php echo base_url();?>controller/action'``action(){ $this->load->view('that_you_want_to_display');`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T12:49:30.893

你试过了`jQuery.noConflict()`吗？

```
 <script type="text/javascript">
  var page_num = 1; 
  jQuery.noConflict();
   $(function(){... 
```

Edit2：看来您的偏移量是错误的。根据[http://pastebin.com/MC1KZm8y](http://pastebin.com/MC1KZm8y)

寻找：

```
$offset =   $this->input->post('page_num');
$list       =   $this->friends_model->find($offset); 
```

代替：

```
$page_line = 6; //for example
$page_num = $this->input->post('page_num');
$offset   = ($page_num -1) * $page_line;
$list       =   $this->friends_model->find($offset); 
```

# html - 如何点击一行中满足特定条件的链接？

> ID：15027417
> 
> 赞同：2
> 
> 时间：2013-02-22T15:22:48.227
> 
> 标签：html, ruby, regex, cucumber, capybara

我希望单击一个链接，该链接位于第一个表行中，其中包含一些文本。

我尝试了以下

```
 within(all('tr').select {|elt| elt.text == "desired text" }.first) do
    all('a').first.click
 end 
```

不幸的是，它不满足真实条件，并且代码从未执行过。我可能需要一个“喜欢”命令或部分文本搜索。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:57:52.887

您可以为您的链接提供一个独特的 CSS 类，例如“foobar”，然后使用以下命令直接单击它：

```
page.find(:css, ".foobar").click 
```

或尝试使用文本“foobar”搜索行，然后单击该行中包含文本“所需文本”的链接：

```
page.find(:xpath, "//tr[contains(.,'foobar')]/td/a", :text => 'desired text').click 
```

# php - 实现 facebook 风格的“unlike”功能

> ID：15027420
> 
> 赞同：0
> 
> 时间：2013-02-22T15:22:54.093
> 
> 标签：php, mysql

我最近为我的漫画网站实现了自定义喜欢和不喜欢的功能。我想让用户通过“取消点击”喜欢或不喜欢按钮来“收回”他们的选择。

我的功能通过以下方式工作：

> 1) 通过 Jquery 将按钮值 (id = 'like' 或 id = 'dislike') 传递给 php 脚本
> 
> 2) 脚本将首先根据给定的漫画 ID 检查数据库中是否存在 IP……如果不存在，它将插入用户的 IP 和当前漫画 ID……如果存在，它最初说“你已经投票”。 ..但现在要实现“不喜欢”，我只会让它运行一个删除查询
> 
> 3）然后它将获得该漫画ID和增量的当前总喜欢。

我认为可以做到的方式是，如果用户再次按下按钮，我基本上会运行相反的查询...根据该漫画 ID 从表中删除该用户的投票...然后减少漫画中该图像的总喜欢桌子。

**所以我的问题是**，

> 1）如果他们按下一个按钮一次，则执行插入查询，如果他们“取消选择”相同的选择，则执行删除查询是实现此操作的最佳方式？用户不能通过不断地按赞按钮发送垃圾邮件和使数据库过载，从而不断地喜欢和不喜欢吗？我应该为该 ID 实现某种 $_SESSION['count'] 吗？
> 
> 2）如果我要存储某个IP...如果几个唯一用户碰巧在...使用同一台计算机会发生什么...比方说网吧...它将始终存储该用户的IP。针对 IP 存储是最好的方法吗？

如果您需要参考代码：

```
<?php 
include 'dbconnect.php';
$site = $_GET['_site'];
$imgid = intval($_GET['_id']);
$input = $_GET['_choice'];

if ($site == "artwork") {
$table = "artwork";
}
else {
$table = "comics";
}

$check = "SELECT ip, tablename, imgid FROM votes WHERE ip = '".$_SERVER['REMOTE_ADDR']."' AND tablename = '$table' AND imgid = $imgid";
$result = $mysqli->query($check);

if ($result->num_rows == 0) { 
    //Insert voter's information into votes table
    $sql = "INSERT INTO 
            votes (ip, tablename, imgid) 
        VALUES 
            (\"".$_SERVER['REMOTE_ADDR']."\", \"$table\", $imgid)
        ON DUPLICATE KEY UPDATE
            imgid = VALUES(imgid)";

        if (!$mysqli->query($sql)) printf("Error: %s\n", $mysqli->error); 

        /*while ($row = $result->fetch_assoc()) {
            echo "you've inserted: " . $row['ip'] . ", " . $row['tablename'] . ", " . $row['imgid'] . ".";
        }*/

        $result = $mysqli->query("SELECT like_count, dislike_count FROM $table WHERE id = $imgid"); 

        //put the counts into a list
        list($likes, $dislikes) = $result->fetch_array(MYSQLI_NUM);     

        if ($input == "like") {
            $sql = "UPDATE $table SET like_count = like_count + 1 WHERE id = $imgid";
            $mysqli->query($sql);           
            $likes++;
        }
        else if ($input == "dislike") {
            $sql = "UPDATE $table SET dislike_count = dislike_count + 1 WHERE id = $imgid";
            $mysqli->query($sql);
            $dislikes++;    
        }
    } 
else { //"unlike" their previous like for that given image id
        $sql = "DELETE FROM
                    votes 
                WHERE (ip, tablename, imgid) = 
                    (\"".$_SERVER['REMOTE_ADDR']."\", \"$table\", $imgid)";

        if (!$mysqli->query($sql)) printf("Error: %s\n", $mysqli->error); 

        $result = $mysqli->query("SELECT like_count, dislike_count FROM $table WHERE id = $imgid"); 

        //put the counts into a list
        list($likes, $dislikes) = $result->fetch_array(MYSQLI_NUM);     

        if ($input == "like") { //remove like
            $sql = "UPDATE $table SET like_count = like_count - 1 WHERE id = $imgid";
            $mysqli->query($sql);           
            $likes--;
        }
        else if ($input == "dislike") {
            $sql = "UPDATE $table SET dislike_count = dislike_count - 1 WHERE id = $imgid";
            $mysqli->query($sql);
            $dislikes--;    
        }
}

echo "Likes: " . $likes . ", Dislikes: " . $dislikes;

mysqli_close($mysqli);

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T15:32:42.633

1）我会说是的，使用计数功能来限制他们可以连续点击按钮的尝试次数。除非他们达到非常高的数字，否则可能不会有太多麻烦，我相信一个简单的循环就可以了。

2）我不会只存储IP。我会尝试使用不只是 IP 作为标识符的东西，比如 IP 和会话 cookie——这样它是独一无二的。但是，在回顾服务器时，您将不得不解析数据库中的条目。或者也许是mac地址。我不确定您是否可以访问它。[如何在 PHP 中获取已连接客户端的 MAC 和 IP 地址？](https://stackoverflow.com/questions/1420381/how-can-i-get-the-mac-and-the-ip-address-of-a-connected-client-in-php)

我确信还有另一种方式，但从概念上讲，这就是我认为它的工作方式。

# asp.net - ASP.NET - AuthenticateRequest() 中缺少 ticket.UserData()，新服务器上安装的旧工作代码

> ID：15027422
> 
> 赞同：0
> 
> 时间：2013-02-22T15:23:04.737
> 
> 标签：asp.net, forms-authentication

我刚刚将旧的 (ASP.NET 2.0) 网站迁移到了新服务器。该应用程序已经维护了大约 8 年（升级到 ASP.NET 4）并且在旧服务器上运行良好。它在我的开发计算机上也可以正常工作。

本周大部分时间我一直在寻找答案，尝试了一些选项，但我仍然无法弄清楚这个。任何帮助/指针将不胜感激。

下面是最相关的运行代码片段。

TIA，雷蒙德

```
Shared Function LogMeIn(ByVal p As Page, ByVal sUserName As String, ByVal sPassword As     String, ByVal bPersists As Boolean, ByVal lblMessage As Label) As Integer
    Try
        'get the login dataset
        Dim dsLogin As DataSet = GetUserDataSetByUserName(sUserName)

        If dsLogin.Tables(0).Rows.Count = 1 Then

            FormsAuthentication.Initialize()

            Dim sGoodPassword As String = dsLogin.Tables(0).Rows(0).Item("Password").ToString
            Dim sRole As String = dsLogin.Tables(0).Rows(0).Item("Roles").ToString

            'check password
            If sPassword = sGoodPassword Then
                Dim ticket As New FormsAuthenticationTicket(1, _
                                                            sUserName, _
                                                            DateTime.Now, _
                                                            DateTime.Now.AddMinutes(60 * 480), _
                                                            bPersists, sRole, _
                                                               FormsAuthentication.FormsCookiePath)

                Dim hash As String = FormsAuthentication.Encrypt(ticket)
                Dim cookie As New HttpCookie(FormsAuthentication.FormsCookieName, hash)

                If ticket.IsPersistent Then cookie.Expires = DateTime.Now.AddDays(15)

                cookie.HttpOnly = True

                p.Response.Cookies.Add(cookie)

                Dim sReturnUrl As String = "..." 'removed for clarity

                p.Response.Redirect(sReturnUrl, True)

            Else
                lblMessage.Text = "Incorrect Password"
                Return 1
            End If
        Else
            '... 'removed for clarity
        End If
    Catch ex As Exception
        '... 'removed for clarity
    End Try

End Function

Sub Application_AuthenticateRequest(ByVal sender As Object, ByVal e As EventArgs)

    ' Fires upon attempting to authenticate the use
    If Not (HttpContext.Current.User Is Nothing) Then

        Dim gpUser As GenericPrincipal = HttpContext.Current.User

        If gpUser.Identity.IsAuthenticated Then
            If TypeOf gpUser.Identity Is FormsIdentity Then

                Dim fi As FormsIdentity = CType(gpUser.Identity, FormsIdentity)

                Dim ticket As FormsAuthenticationTicket = fi.Ticket
                Dim sRoles As String()
                Dim i As Integer

                sRoles = ticket.UserData.Split(",")
                For i = 0 To sRoles.Length - 1
                    sRoles(i) = Trim(sRoles(i))
                Next

                HttpContext.Current.User = New GenericPrincipal(fi, sRoles)

            End If
        End If
    End If

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T00:20:17.910

问题与我使用的是 Access 数据库以及该站点最初是在 ASP.NET 1.0 上构建的事实有关。解决方案是实施自定义成员资格和角色提供程序。

[http://www.codeproject.com/Articles/27955/Developing-custom-ASP-NET-Membership-and-Role-prov](http://www.codeproject.com/Articles/27955/Developing-custom-ASP-NET-Membership-and-Role-prov)

# c# - 在调用基本构造函数之前处理参数

> ID：15027423
> 
> 赞同：4
> 
> 时间：2013-02-22T15:23:12.627
> 
> 标签：c#, inheritance

是否可以在将参数传递给基本构造函数之前对其进行处理？

如：

```
A --> B 
```

其中A是抽象类，B是子类。

A的构造函数是这样的：

```
Protected A (MyObject myObject) 
```

B的构造函数是这样的：

```
Public B (string objectName) 
```

我希望它是这样的

```
Public B (String objectName) : base (MyObject myObject)
{
myObject = new MyObject (objectName);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T15:31:39.023

如果你想做一些不平凡的事情（它不适合你可以内联到`base`调用中的单个表达式），那么唯一的方法就是在一个`static`方法中，例如：

```
public B (string objectName) : base (SomethingComplex(objectName))
{
    //...
}
static MyObject SomethingComplex(string objectName)
{
    // this can now be arbitrarily complex
    if(string.IsNullOrWhiteSpace(objectName))
        throw new ArgumentException("objectName")
    // etc
    return new MyObject(objectName);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T15:24:39.643

是的，但只能作为一个表达式：

```
public B(String objectName) : base(new MyObject(objectName)) {
} 
```

请注意，由于 this 在构造类之前运行，因此它无法访问实例成员。

如果要运行多个表达式（例如，参数验证），可以调用静态方法。

# javascript - Fancybox 内容消失

> ID：15027424
> 
> 赞同：-1
> 
> 时间：2013-02-22T15:23:14.093
> 
> 标签：javascript, jquery, fancybox

当我尝试单击一个字段时，内容消失了。我只希望 x 按钮关闭弹出窗口而不是覆盖或内容。我还注意到，当我双击#contactus 和#contactus2 时，弹出窗口会消失，但覆盖不会消失。

请单击“查看线路”以查看弹出窗口。

这是防火代码：

```
$(document).ready(function() {

        $("#contactus").fancybox({
        'hideOnOverlayClick':false,
        'hideOnContentClick':false
});

    $("#contactus2").fancybox({
       'hideOnOverlayClick':false,
       'hideOnContentClick': false
});

    $("a#inline").fancybox({
        'hideOnContentClick': false
    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:24:50.240

澄清我在下面所说的话：

您在 id=inline 的链接上调用了 fancybox（您有两个具有相同 id 的链接，您可能应该使用一个类）。id=inline 的链接打开了它们的目标，即 div#contactus 和 div#contactus2。您还在 div#contactus 和 div#contactus2 上调用 fancybox，这会导致这些 div 打开一个 fancybox。

看到这个[小提琴](http://jsfiddle.net/u3NyM/)。

它看起来像这一行：

```
 $("#contactus2").fancybox({
   'hideOnOverlayClick':false,
   'hideOnContentClick': false

}); 
```

导致点击fancybox内的div打开另一个fancybox。尝试删除它并单击休斯顿以查看它是否有效。

# php - PHP @ 代替 isset 来测试 $_GET 值

> ID：15027425
> 
> 赞同：4
> 
> 时间：2013-02-22T15:23:18.837
> 
> 标签：php, get, isset, error-suppression

给我一个很好的理由这样做

```
if( isset($_GET['key']) && ($_GET['key'] === '123') )
{... 
```

而不是这个

```
if( @$_GET['key'] === '123' )
{... 
```

**我要的是这个非常具体的代码案例**，而不是一般的！

不欢迎以下原因：

*   “ *using`@`将使应用程序减慢几纳秒，因为无论如何都会创建错误（即使它被抑制）。* ” 我更喜欢较慢的代码但更具可读性。
*   “*使用`@`是坏习惯。* ”一般来说这可能是正确的，但我不相信这种情况（此外，坏习惯可能取决于上下文，在 PHP 手册中的函数中，就像`fopen`他们建议`@`在某些情况下使用的那样，请参阅错误/ [http://www.php.net/manual/en/function.fopen.php](http://www.php.net/manual/en/function.fopen.php)的例外情况）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T15:32:09.747

性能影响实际上并不是反对此示例的最佳论据，您必须在自己的应用程序中测量性能以确定这是否是一个问题。如果没有设置大量要检查的项目，或者如果您在循环中放置了这样的检查，则更有可能导致速度变慢。

与使用`@`运算符相关的主要问题是它可能会成为您代码中的约定，因此虽然您的示例可能看起来无害，但您稍后可能会发现自己或您的团队使用：

```
if( @IsAvailable() ) { 
```

并且错误抑制开始隐藏您没有预料到的真实错误以及您所做的错误 - 而且您根本不知道发生了什么，因为您根本没有得到任何异常信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T15:26:59.517

想想当您的网站/应用程序开始每天收到数万/数十万（或更多）请求时，您的应用程序可能会减慢多少。如果您将抑制错误作为标准，那么每个请求可能都有几十个 - 突然间，您的站点明显比您希望的要慢。

除此之外，您最终可能会抑制您在开发时真正想要注意的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-23T13:59:40.110

如果你不把性能问题作为论据，那确实是可以的。但它不必在所有情况下都如此，因为 @ 会抑制所有可能的错误，即使是那些你没有想到的错误。但在这种情况下，似乎没有其他错误是您想要抑制的。

我同意你的观点，即在读取值之前的 isset() 非常难看，我也不喜欢写它。但是 insert @ before 语句看起来很难看。它会降低较长代码的可读性。

好消息是，从 PHP 7 开始，我们可以使用更好的方式，null-coalescence operator **??** 像这样工作：

```
if($_GET['key'] ?? '' === '123' ) {} 
```

它基本上是这个的替代品：

```
$result = isset($value) ? $value : $anotherValue; 
```

现在你可以使用

```
$result = $value ?? $anotherValue; 
```

# ios - 模拟器上的听写输入

> ID：15027427
> 
> 赞同：0
> 
> 时间：2013-02-22T15:23:28.100
> 
> 标签：ios, uitextfield, ios-simulator, dictation

是否可以在 iOS 模拟器上为 UITextField 提供听写输入？如果是这样，我需要做什么？我可用于开发的设备是 iPhone 4，我认为它不支持听写输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T15:38:52.753

抱歉，模拟器不支持听写。iPhone 4 也不行。

# ruby-on-rails-3 - Travis 的 Cucumber 测试套件太慢了

> ID：15027429
> 
> 赞同：5
> 
> 时间：2013-02-22T15:23:35.003
> 
> 标签：ruby-on-rails-3, cucumber, travis-ci

我有一个用于我的 rails 应用程序的黄瓜测试套件，包括大约 500 个场景，它们之间大约有 5000 个步骤。

我已经设置了我的 github 存储库以使用[Travis-CI](http://travis-ci.org)，使用以下`.travis.yml`.

```
language: ruby
rvm:
  - "1.9.2"
script:
  - RAILS_ENV=test bundle exec rake db:migrate --trace
  - bundle exec cucumber -f progress -r features features/cards/base_game
  - bundle exec cucumber -f progress -r features features/cards/basic_cards
  - bundle exec cucumber -f progress -r features features/cards/intrigue
  - bundle exec cucumber -f progress -r features features/cards/seaside
  - bundle exec cucumber -f progress -r features features/cards/prosperity
  - bundle exec cucumber -f progress -r features features/cards/interactions
before_script:
  - cp config/database.travis.yml config/database.yml
  - psql -c 'create database dominion_test' -U postgres 
```

如果我只是跑去`bundle exec cucumber`运行所有案例，我已经将黄瓜执行分开了，因为 Travis 正在抛出内存不足。

然而，我最近的推送产生了一个 Travis 任务，它花费了 50 多分钟来运行我的所有测试，因此被杀死了。我只是对这么多场景不合理，还是我可以做些什么来加快执行速度？

**编辑**：如果它很重要，我应该澄清我的场景不测试 GUI。他们正在测试纸牌游戏服务器的规则，因此他们直接调用模型方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T09:28:05.507

[经过大量谷歌搜索后，我在Travis' docs](http://about.travis-ci.org/blog/2012-11-28-speeding-up-your-tests-by-parallelizing-them/)的这个页面找到了一个解决方案。

基本上，允许（甚至推荐！）并行运行。使用以下内容`.travis.yml`，我最终得到了六个并发作业，其中没有一个需要超过 15 分钟，因此它们都运行完成：

```
language: ruby
rvm:
  - "1.9.2"
env:
  - CARD_SET=base_game
  - CARD_SET=basic_cards
  - CARD_SET=intrigue
  - CARD_SET=seaside
  - CARD_SET=prosperity
  - CARD_SET=interactions
script:
  - RAILS_ENV=test bundle exec rake db:migrate --trace
  - bundle exec cucumber -f progress -r features features/cards/$CARD_SET
before_script:
  - cp config/database.travis.yml config/database.yml
  - psql -c 'create database dominion_test' -U postgres 
```

# tiles - 瓷砖和面包屑 - 不希望最终的面包屑链接

> ID：15027434
> 
> 赞同：1
> 
> 时间：2013-02-22T15:23:59.777
> 
> 标签：tiles, struts-1

我正在使用 struts 1.x 和瓷砖。我想创建一个包含当前页面路径的面包屑路径，但是，我不希望最终的面包屑指向当前页面。这是因为最后一页是搜索的结果。因此，指向搜索结果页面是没有意义的。

如何添加只是标签而不是链接的面包屑？

我希望它看起来像：

```
Home Page (link) > Search Criteria (link) > Search Results (not a link) 
```

我的瓷砖 def 看起来像：

```
<putList name="breadCrumbList">
    <item value="Home Page" link="/blablabla" />
    <item value="Search Criteria" link="/blablabla2" />
    <item value="Search Results" link="/blablabla2" />  <-- this needs changed
</putList> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T16:42:12.280

将链接值更改为#，如下所示。

```
<item value="Search Results" link="#" /> 
```

**编辑 ：**

如果有帮助，这就是我们在项目中所做的：

```
 <definition name="tile.success" extends=".layout">
        <put name="content" value="/jsp/routing.jsp"/>
        <put name="title.section" value="My Title"/>
        <putList name="breadcrumbs">
            <item link="#" value="Add Name"/>
        </putList>
    </definition> 
```

“添加名称”只是在面包屑中显示为标签。

# javascript - Retina.js 不交换图像？

> ID：15027440
> 
> 赞同：0
> 
> 时间：2013-02-22T15:24:16.247
> 
> 标签：javascript, image, retina.js

我在使用retina.js 脚本时遇到了一些麻烦。我正在尝试在此页面上将徽标交换为视网膜图像：

[http://mikeleachcreative.co.uk/comps/fmp-mobile/](http://mikeleachcreative.co.uk/comps/fmp-mobile/)

该脚本已按照说明包含在内，并且肯定包含所需的“@2x”扩展名中的图像，您可以在此处查看这些图像以确保：

[http://mikeleachcreative.co.uk/comps/fmp-mobile/images/fmp_mobile_logo.png](http://mikeleachcreative.co.uk/comps/fmp-mobile/images/fmp_mobile_logo.png) 在文件名末尾添加@2x 以查看高分辨率版本。

当在视网膜设备上查看此页面时，我仍然看到较低分辨率的图像，任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T18:08:20.797

看起来（无论何时检查 @2x 图像）您的服务器正在返回 403（未授权）。检查服务器上的设置。Retina.js 要求您能够向服务器发出 HEAD 请求（不是 GET 或 POST）。

# android - 在安卓应用主屏幕中滑动

> ID：15027441
> 
> 赞同：0
> 
> 时间：2013-02-22T15:24:18.083
> 
> 标签：android, android-ui

我正在寻找一个应用程序，其中将显示用户可以选择的一些类别。我能找到的最好的用户界面如下图所示： [https ://lh3.ggpht.com/swzmwCOMNjKmLH_HyAWh0VQ49BN7vU6PG3qEpsSnF1HWcG1CmpQi1BTBxdVczZx8pY](https://lh3.ggpht.com/swzmwICOMNjKmLH_HyAWh0VQ49BN7vU6PG3qEpsSnF1HWcG1CmpQi1BTBxdVczZx8pY)

截图是“育儿年龄和阶段”安卓应用程序的截图。上面显示的主页最好的部分是底部没有滚动条，用户可以使用滑动手势查看各种类别。

知道如何达到相同的效果吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T07:43:15.427

在您的情况下使用 ViewPager 会更好

[http://developer.android.com/reference/android/support/v4/view/ViewPager.html](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)

它可以帮助你！

# .net - 从另一个系统验证我的 Asp.net mvc 用户

> ID：15027443
> 
> 赞同：0
> 
> 时间：2013-02-22T15:24:24.577
> 
> 标签：.net, asp.net-mvc

我有一个名为“MSP ServiceDesk plus”的 CRM 系统，它使用自己的表单身份验证。我将通过构建连接到 CRM 数据库并使用其 API 的 asp.net mvc 应用程序来扩展这个 CRM 系统。但是有没有办法集成我的默认 asp.net mvc 表单身份验证模块以使用 CRM 数据库，以便仍然从 CRM 系统管理所有用户。关于如何实现这一点的任何建议。此致

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T15:58:55.057

实现这一点的方法是实现一个自定义的 asp.net 成员资格提供程序。

*   [http://msdn.microsoft.com/en-us/library/f1kyba5e(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/f1kyba5e(v=vs.100).aspx)
*   [http://www.asp.net/web-forms/videos/how-do-i/how-do-i-create-a-custom-membership-provider](http://www.asp.net/web-forms/videos/how-do-i/how-do-i-create-a-custom-membership-provider)

我认为您只需要实现几个提供的方法，因为您只想验证应用程序中的用户，而不是创建、编辑或更新它们。我以前在像你这样的情况下做过这件事，而且很简单。

# python - 求数值积分的根

> ID：15027448
> 
> 赞同：6
> 
> 时间：2013-02-22T15:24:37.680
> 
> 标签：python, numpy, scipy, physics, numerical-integration

我正在尝试在 Python 中重现这个 Mathematica 程序：

![数学程序](../Images/ff523cd9a99cea1240a8f9df1e460a47.png)

它找到数值积分的根，并形成这些值的图。但是，我无法尝试运行。

当前尝试：

from scipy.integrate import quad from scipy import integration from scipy.optimize import fsolve import pylab as pl import numpy as np

```
# Variables.
boltzmann_const = 1.38e-23
planck_const = 6.62e-34
hbar = planck_const / ( 2 * np.pi )
transition_temp = 9.2
gap_energy_at_zero_kelvin = 3.528 / ( 2 * transition_temp * boltzmann_const )
debye_freq = ( 296 * boltzmann_const ) / hbar

# For subtracting from root_of_integral
a_const = np.log( ( 1.13 * hbar * debye_freq ) / ( boltzmann_const * transition_temp) )
# For simplifying function f.
b_const = ( hbar * debye_freq ) / ( 2 * boltzmann_const)

def f( coherence_length, temp ):
    # Defines the equation whose integral will have its roots found. Epsilon = coherence length. Delta = Gap energy.

    squareRoot = np.sqrt( coherence_length*coherence_length + gap_energy*gap_energy )
    return np.tanh( ( ( b_const / temp ) * squareRoot ) / squareRoot )

def integrate( coherence_length, temp ):
    # Integrates equation f with respect to E, between 0 and 1\. 

    return integrate.quad( f, 0, 1, args = ( temp, ) )[0]

def root_of_integral( temp ):
    # Finds the roots of the integral with a guess of 0.01.

   return fsolve( integrate, 0.01, args = ( temp, ) )

def gap_energy_values( temp ):
    # Subtracts a_const from each root found, to obtain the gap_energy_values.

    return root_of_integral( temp ) - a_const 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T15:30:36.203

这一行：

```
integral = (integrate.quad(lambda E: np.tanh(1477.92*np.sqrt(E**2+x**2))/np.sqrt(E**2+x**2), 0, 1) 
```

有不平衡的括号：

```
integral = integrate.quad(lambda E: np.tanh(1477.92*np.sqrt(E**2+x**2))/np.sqrt(E**2+x**2), 0, 1) 
```

如果你分手会更容易看到，例如

```
x_values = arange(0.01, 0.1, 0.0001)

delta = []
for x in x_values:
    def fun(E):
        distance = np.sqrt(E * E + x * x)
        return np.tanh(1477.92 * distance) / distance

    integral = integrate.quad(fun, 0, 1)
    delta_val = fsolve(integral, 1e-23) - a
    delta.append(delta_val)

pl.plot(delta, x_values) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T18:59:44.347

正如已经在评论中提到的（@Hristo Iliev 和@Pavel Annosov），`quad` [返回一个 stuff 元组](http://docs.scipy.org/doc/scipy/reference/generated/scipy.integrate.quad.html)。如果您假设集成没有问题，就像您在 Mathematica 中所做的那样（虽然这不是一个好主意），那么在这个元组中，您只需要第一个元素，它应该是集成结果.

但这只会给你一个数字，而不是`T`. 要获得后者，您需要自己定义相应的函数，就像您在 Mathematica 中使用您的`\Delta[T_]:=...`

以下是一些可以帮助您入门的内容：

```
def f(E, T):
    """To be integrated over T."""
    temp = np.sqrt(E * E + T * T)
    return np.tanh(1477.92 * temp) / temp

def gap(T):
    """Integration result: \Delta(T)"""
    return quad(f, 0, 1, args=(T, ))[0]  #NB: [0] select the 1st element of a tuple 
```

请注意，您需要使用`args=(T,)`语法将`T`参数发送到正在集成的函数：`quad`集成函数的第一个参数，并且它需要其他参数才能计算`f(E, T)`.

现在您可以将它提供`gap(T)`给`fsolve`，[它也需要一个函数](http://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.fsolve.html)（`callable`更准确地说是 a ）。

在更一般的层面上，您不应该使用玻尔兹曼常数、hbar 等数值（甚至 Mathematica 也会抱怨！）。相反，您应该做的是，您应该以无量纲形式编写公式：以能量单位测量温度（因此 k_B = 1）等，在积分中进行适当的替换，以便处理无量纲参数的无量纲函数 --- 和然后让电脑处理这些。

# distance - 使用欧几里德距离在网格上查找圆的区域？

> ID：15027451
> 
> 赞同：1
> 
> 时间：2013-02-22T15:24:43.077
> 
> 标签：distance, geometry, area

我想要一个函数，我可以输入一个半径值，并说函数吐出那个大小圆的区域。问题是我希望它只对基于整数的坐标这样做。

我在别处被告知要查看**高斯的圆问题**，这看起来正是我感兴趣的问题，但我并不真正理解它背后的数学（假设它在计算我想要的东西时实际上是准确的）。

作为旁注，我目前使用修改后的圆形绘图算法，它确实产生了我想要的结果，但它似乎非常低效（算法和我使用它来获取区域的方式）。

因此，对我来说，可能的答案是这样的函数的实际代码或伪代码，如果存在这样的事情，或者像对高斯圆问题的彻底解释以及为什么它是/不是我正在寻找的那样。

我希望该功能会产生的结果：

```
Input: Output
0: 1
1: 5
2: 13
3: 29
4: 49
5: 81
6: 113
7: 149
8: 197
9: 253 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-02-21T16:57:30.403

我最近也不得不解决这个问题，我最初的方法是 Numeron 的方法 - 从中​​心向外在 x 轴上迭代并计算右上四分之一内的点，然后将它们翻两番。

然后我将算法改进了大约 3.4 倍。我现在所做的只是计算该圆内的内接正方形内有多少个点，以及该正方形和圆的边缘之间有什么（实际上以相反的顺序）。这样，我实际上计算了圆边缘、x 轴和正方形右边缘之间的点的八分之一。这是代码：

```
public static int gaussCircleProblem(int radius) {
    int allPoints=0; //holds the sum of points
    double y=0; //will hold the precise y coordinate of a point on the circle edge for a given x coordinate.
    long inscribedSquare=(long) Math.sqrt(radius*radius/2); //the length of the side of an inscribed square in the upper right quarter of the circle
    int x=(int)inscribedSquare; //will hold x coordinate - starts on the edge of the inscribed square
    while(x<=radius){
        allPoints+=(long) y; //returns floor of y, which is initially 0
        x++; //because we need to start behind the inscribed square and move outwards from there
        y=Math.sqrt(radius*radius-x*x); // Pythagorean equation - returns how many points there are vertically between the X axis and the edge of the circle for given x
    }
    allPoints*=8; //because we were counting points in the right half of the upper right corner of that circle, so we had just one-eightth
    allPoints+=(4*inscribedSquare*inscribedSquare); //how many points there are in the inscribed square
    allPoints+=(4*radius+1); //the loop and the inscribed square calculations did not touch the points on the axis and in the center
    return allPoints;
} 
```

这是一张图片来说明这一点：

[![我的高斯圆问题算法图解](../Images/3bdae74f9d206aa730dd350c9a57d29a.png)](https://i.stack.imgur.com/5gO3m.png)

1.  在圆的右上四分之一处向下取整内切正方形（粉红色）的边长。
2.  转到内接正方形后面的下一个 x 坐标并开始计算橙色点，直到到达边缘。
3.  将橙色点乘以八。这会给你黄色的。
4.  将粉红色点平方。这会给你深蓝色的。然后乘以四，这将得到绿色的。
5.  添加轴上的点和中心的点。这给了你浅蓝色的和红色的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-05T02:36:53.890

这是一个老问题，但我最近也在做同样的事情。正如你所说，你正在尝试做的就是高斯圆问题，[这里有点描述](http://mathworld.wolfram.com/GausssCircleProblem.html)

虽然我也很难理解这一切背后的严肃数学，但当不使用奇怪的外星符号时，它或多或少会变成这样：

```
1 + 4 * sum(i=0, r^2/4, r^2/(4*i+1) - r^2/(4*i+3)) 
```

在java中至少是：

```
int sum = 0;
for(int i = 0; i <= (radius*radius)/4; i++)
  sum += (radius*radius)/(4*i+1) - (radius*radius)/(4*i+3);
sum = sum * 4 + 1; 
```

我不知道为什么或如何工作，老实说我有点沮丧，我必须使用循环而不是单行来解决这个问题，因为这意味着性能是 O(r^2/4) 而不是 O (1)。

由于数学向导似乎不能比循环做得更好，我决定看看我是否可以将它降低到 O(r + 1) 的性能，我做到了。所以不要使用上面的，使用下面的。O(r^2/4) 很糟糕，即使我使用平方根也会变慢。

```
int sum = 0;
for(int x = 0; x <= radius; x++)
  sum += Math.sqrt(radius * radius - x * x);
sum = sum * 4 + 1; 
```

这段代码的作用是从中心向外沿一条正交线循环到边缘，并在每个点沿垂直方向添加从线到边缘的距离。最后它会有一个四分之一的点数，所以它将结果翻了两番并加了一个，因为还有中心点。我觉得 wolfram 方程做了类似的事情，因为它也乘以 4 并加一，但是 IDK 为什么它循环 r^2/4。

老实说，这些不是很好的解决方案，但它似乎是最好的解决方案。如果您正在调用一个定期执行此操作的函数，那么当新半径出现时，将结果保存在查找表中，而不是每次都进行完整计算。

* * *

它不是您问题的一部分，但它可能与某人有关，所以无论如何我都会添加它。我个人正在努力寻找一个圆圈内的所有点，其单元格定义为：

```
(centreX - cellX)^2 + (centreY - cellY)^2 <= radius^2 + radius 
```

这使整个事情变得混乱，因为额外的+半径使这不完全符合勾股定理。额外的一点使圆圈在网格上看起来更具视觉吸引力，因为它们在正交边缘上没有那些小疙瘩。事实证明，是的，我的形状仍然是一个圆形，但是它使用 sqrt(r^2+r) 作为半径而不是 r，这显然有效，但不要问我如何。无论如何，这意味着对我来说，我的代码略有不同，看起来更像这样：

```
int sum = 0;
int compactR = ((radius * radius) + radius) //Small performance boost I suppose
for(int j = 0; j <= compactR  / 4; j++)
  sum += compactR / (4 * j + 1) - compactR / (4 * j + 3);
sum = sum * 4 + 1; 
```

# android - 如何在 DatePickerDialog.OnDateSetListener 中获取 OnClick？

> ID：15027454
> 
> 赞同：3
> 
> 时间：2013-02-22T15:24:48.553
> 
> 标签：android, datepicker

我正在使用以下方法弹出对话框来选择日期。

```
private DatePickerDialog.OnDateSetListener mDateSetListener =
        new DatePickerDialog.OnDateSetListener() {

            public void onDateSet(DatePicker view, int year, 
                                  int monthOfYear, int dayOfMonth) {
                dobYear = year;
                dobMonth = monthOfYear;
                dobDay = dayOfMonth;
                if(isEighteenYearOld()){
                   //display the current date
                    dateDisplay();
                } else{
                   Toast.makeText(mContext, "You must be 18 year old", Toast.LENGTH_SHORT).show();
                }  
            } 

        }; 
```

我知道 onDateSet 我们可以得到选定的日期。但我正在尝试的是，如果选择的日期小于 18 岁，我需要提醒用户。我已经尝试了上面的代码，但它关闭了对话框并返回到活动。

我想留在对话框中，直到用户选择 18 岁的日期。我不确定如何在对话框中获取 onclick 事件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T18:41:22.600

您正在使用的日期选择器对话框已弃用，因此我建议您不要使用它。

您可以通过两种方式实现日期选择器（据我所知）

1.  使用 DialogFragment
2.  使用警报对话框

**使用 DialogFragment：**

```
public class MainActivity extends FragmentActivity {
    EditText text;
    Button b;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        b=(Button)findViewById(R.id.button1);
        text=(EditText)findViewById(R.id.editText1);
        b.setOnClickListener(new View.OnClickListener() {
            public void onClick(View arg0) {
                DateDialogFragment datepicker=new DateDialogFragment();
                datepicker.show(getSupportFragmentManager(), "showDate");
            }
        });
    }

    public class DateDialogFragment extends DialogFragment  implements DatePickerDialog.OnDateSetListener{

        public DateDialogFragment()
        {
        }
        @Override
        public Dialog onCreateDialog(Bundle savedInstanceState) {
            Calendar cal=Calendar.getInstance();
            int year=cal.get(Calendar.YEAR);
            int month=cal.get(Calendar.MONTH);
            int day=cal.get(Calendar.DAY_OF_MONTH);
            return new DatePickerDialog(getActivity(), this, year, month, day);
        }
        public void onDateSet(DatePicker view, int year, int monthOfYear, int dayOfMonth) {
            showSetDate(year,monthOfYear,dayOfMonth);
        }

        }

    public void showSetDate(int year,int month,int day) {
    text.setText(year+"/+"+month+"/"+day);
    }
} 
```

检查此示例并在您的 Activity 中实施相同的示例。

**使用警报对话框**：

使用第二个非常简单

在您的 res/layout 文件夹中创建布局并将 DatePicker 放置在布局中

```
 LayoutInflater  inflater = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            View view = (View) inflater.inflate(R.layout.yourlayout, null);
DatePicker picker=(DatePicker)view.findViewById(R.id.datepicker);

  AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
 builder.setView(view).
        builder.setMessage(R.string.dialog_fire_missiles)
               .setPositiveButton(R.string.fire, new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int id) {
                       // FIRE ZE MISSILES!
                   }
               })
               .setNegativeButton(R.string.cancel, new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int id) {
                       // User cancelled the dialog
                   }
               });
        // Create the AlertDialog object and return it
        return builder.create(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T17:29:21.247

如果您不想使用此类对话框的自定义实现，则必须子类`DatePickerDialog`化以实现此类行为。您不能仅使用 来阻止对话框关闭`DatePickerDialog.OnDateSetListener`。

不幸的是，对话框的实现随着不同的 API 级别而变化，因此通过子类化获得所需的行为并不是那么简单。您需要添加一些技巧以使其可靠地工作。

我创建了一个示例实现，它阻止对话框关闭，除非设置了适当的日期（或者点击取消或返回按钮）。调整它以向用户显示您的警报，最好的地方是`onClick()`方法中的 else 分支。

```
class CheckingDatePickerDialog extends DatePickerDialog {

    private int year;
    private boolean cancel = false;
    private boolean isCancelable = true;

    CheckingDatePickerDialog(Context context, OnDateSetListener callBack, int year, int monthOfYear, int dayOfMonth) {
        super(context, callBack, year, monthOfYear, dayOfMonth);
        this.year = year;
    }

    CheckingDatePickerDialog(Context context, int theme, OnDateSetListener callBack, int year, int monthOfYear, int dayOfMonth) {
        super(context, theme, callBack, year, monthOfYear, dayOfMonth);
        this.year = year;
    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // allow closing the dialog with cancel button
        Button btn = getButton(BUTTON_NEGATIVE);
        if (btn != null) {
            btn.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {
                    cancel = true;
                    dismiss();
                }
            });
        }
    }

    @Override
    public void setCancelable(boolean flag) {
        isCancelable = false;
        super.setCancelable(flag);
    }

    @Override
    public void onBackPressed() {
        // allow closing the dialog with back button if the dialog is cancelable
        cancel = isCancelable;
        super.onBackPressed();
    }

    private boolean isOldEnough() {
        // test if the date is allowed
        return year <= 1994;
    }

    @Override
    public void onClick(DialogInterface dialog, int which) {
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
            // necessary for some Honeycomb devices
            DatePicker dp = getDatePicker();
            this.year = dp.getYear();
        }

        if (isOldEnough()) {
            // OnDateSetListener is called in super.onClick()
            super.onClick(dialog, which);  
        } else {
            // place your alert here
        }
    }

    @Override
    public void onDateChanged(DatePicker view, int year, int month, int day) {
        // on some Honeycomb devices called only with the first change
        // necessary for devices running Android 2.x
        this.year = year;
        super.onDateChanged(view, year, month, day);
    }

    @Override
    public void dismiss() {
        if (cancel || isOldEnough()) {
            // do not allow the dialog to be dismissed unless a cancel or back button was clicked
            super.dismiss();
        }
    }
}; 
```

# c++ - Visual Studio 编译警告：对 GUID 使用系统运算符==/!=

> ID：15027456
> 
> 赞同：0
> 
> 时间：2013-02-22T15:24:51.720
> 
> 标签：c++, windows, visual-studio-2012, driver

我正在尝试将 Windows 驱动程序项目从使用 DDK 构建系统和 Makefile 转换为可以从 Visual Studio 2012 中编译的项目。

我已按照[本指南](http://www.codeproject.com/Articles/31865/How-to-Configure-Visual-Studio-2008-for-Compiling)设置项目选项，但是当我尝试编译时收到此警告：

```
warning : Using system operator==/!= for GUIDs 
```

我想我可以设置一个项目配置标志来解决这个问题。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T15:45:02.533

这是因为在 GUID 上使用 ==/!= 可能不会产生正确的结果，因为 GUID 是一种重要的结构类型。

当编译为 C++ 时，`guiddef.h`使用此实现 ==/!=：[IsEqualCLSID on MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms694358%28v=vs.85%29.aspx)

在您的情况下，问题在于 DDK 标头无法为 ==/!= GUID 实现 C++ 运算符重载。在我看来这会发生，因为`guiddef.h`在包含 DDK 标头之前已包含它。显然`guiddef.h`，DDK 不同意 ==/!= 运算符的实现方式，因此 DDK 发出警告。

所以我的猜测是，你真正需要做的就是重新审视包含订单。此外，我无法验证它，因为我手边没有 VS 2012，但很可能这个警告本身是唯一的“新”，并且程序的实际行为可能与 VS2008 没有变化。VS2008 很可能做了同样的事情，但没有发出警告来提醒程序员。在这种情况下，如果它在旧编译器中工作，那么它可能也应该在新编译器中工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T15:31:40.090

[从这里](http://svn.reactos.org/svn/reactos/trunk/reactos/include/ddk/kcom.h?revision=26218&view=markup&pathrev=26218)，该警告由以下方式给出：

```
#if defined(_SYS_GUID_OPERATOR_EQ_)
#define _GUID_OPERATORS_
#pragma message("WARNING: Using system operator==/!= for GUIDs")
#endif 
```

看起来可以通过定义来禁用它`_NO_SYS_GUID_OPERATOR_EQ_`。所以尝试一个编译器选项`/D_NO_SYS_GUID_OPERATOR_EQ_`.

*但是，除非您知道为什么*要这样做，否则我不建议您这样做。也许您应该提供自己的重载？

# html - 字段集同一行

> ID：15027463
> 
> 赞同：6
> 
> 时间：2013-02-22T15:25:11.127
> 
> 标签：html, line, fieldset

我有 2 个字段集：

```
<fieldset> first fildset </fieldset>

<fieldset> second fieldset </fieldset> 
```

如何将它们放在同一行？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-22T15:30:29.013

您可以将他们的`display`css 属性设置为`inline`：

```
<style type="text/css">
  fieldset.inline {
    display: inline;
  }
</style>

<fieldset class="inline"> first fildset </fieldset>
<fieldset class="inline"> second fieldset </fieldset> 
```

结果如下：http: [//jsbin.com/aseyej/1/edit](http://jsbin.com/aseyej/1/edit)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T15:28:06.753

将它们放在一个 div 容器中。

```
<style type="text/css">
    .container {
    height:100px;
    width:600px;
    background-color:gray;       
}
.left {
    float:left;
    width:200px;
    background-color:blue;
}
.right {
    float:right;
    width:400px;
    background-color:red;
}
</style>

<div class="container">
    <div class="right"><fieldset> first fildset </fieldset></div>
    <div class="left"><fieldset> second fieldset </fieldset></div>
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T15:30:17.220

你也可以使用`display:inline;`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-22T15:36:28.137

feldset 是一个块级元素，因此通常出现在页面布局中的两个块中，因此要将它们放在一行中，有很多可能性，例如您可以：

一种。放入`display: inline-block`字段集的样式表。

湾。将其中一个字段集浮动到另一个字段集的左侧或右侧，即。`float: left`

C。使它们成为绝对或相对定位，即。`position: absolute`并设置适当的顶部和左侧

还有其他方法，但这三种在大多数情况下都适用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-22T15:29:11.633

将它们放在`table`.as中

```
<table>
   <tr>
     <td>
       <fieldset>
          first fildset
       </fieldset>
     </td>
     <td>
       <fieldset>
          second fieldset 
       </fieldset>
    </td>
</table> 
```

[小提琴](http://jsfiddle.net/NvC4K/1/)在这里

# flash - FlashBuilder 中的设计编辑器

> ID：15027468
> 
> 赞同：0
> 
> 时间：2013-02-22T15:25:36.127
> 
> 标签：flash, flash-builder

我下载了 FlashBuilder 4.7。
我尝试了一个简单的 flex 项目（一个按钮），但我找不到设计模式按钮。好吧，我怎样才能找到它？

谢谢，

欧根

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T17:28:40.430

设计视图已从 Flash Builder 4.7 版中删除。如果您需要设计视图，则必须坚持使用 4.6。

# android - 在 ListActivity 中找不到 c.getstring

> ID：15027471
> 
> 赞同：0
> 
> 时间：2013-02-22T15:25:43.840
> 
> 标签：android, getstring

```
public class SimpleCursorAdapterConLogoActivity extends ListActivity
{

    private DatabaseHelper databaseHelper;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        databaseHelper = new DatabaseHelper(this);
        Cursor c = databaseHelper.getAllSiti();
        startManagingCursor(c);
        System.out.println("SimpleProvinceSimpleCursorAdapter con logo");
        setListAdapter(new ProvinceSimpleCursorAdapter(this, c));

    } 
```

大家好，我想问一下为什么它在 getstring onListItemClick 中不起作用，编译器没有给我错误，但是当我按下列表位置 0 时它崩溃了

```
 protected void onListItemClick(ListView l, View v, int position, long id) {
        super.onListItemClick(l, v, position, id);

        final int index = position;
        databaseHelper = new DatabaseHelper(this);
        Cursor c = databaseHelper.getAllSiti();
        startManagingCursor(c);

        //You can add whatever you want to happen when you click here

        Log.i("testy", "I Clicked on Row " + index + " and it worked!");
        switch (index){
            case  0:
                {
                    Cursor c1 = databaseHelper.getAllSiti();
                    startManagingCursor(c1);
                    String nomeRegione = c.getString(c.getColumnIndex(SitiTable.NOME));
                    System.out.println(nomeRegione);

                        //System.out.println(nomeRegione);
                }
                break;
            case  1:
                System.out.println("hello2");
                break;
            case  2:
                System.out.println("hello£");   
                break;
        }           
  }
@Override
protected void onDestroy()
{
    super.onDestroy();
    databaseHelper.close();
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:30:21.293

您必须调用`cursor.moveToFirst()`or`cursor.moveToPosition(int)`才能获取列数据。

# c# - C# 5 Async Await .Task.Factory.StartNew 取消

> ID：15027472
> 
> 赞同：1
> 
> 时间：2013-02-22T15:25:48.257
> 
> 标签：c#, task-parallel-library, async-await

我有实现取消令牌的异步代码。它正在工作，但我不太确定这是否是正确的方法，所以我只想要关于它的反馈。

这是实际的代码：

```
 /// <summary>
    /// 
    /// </summary>
    private async void SaveData() {

        if (GetActiveServiceRequest() != null)
        {
            var tokenSource = new System.Threading.CancellationTokenSource();

            this.ShowWizardPleaseWait("Saving data...");

            var someTask = System.Threading.Tasks.Task<bool>.Factory.StartNew(() =>
            {

                bool returnVal = false;

                // Set sleep of 7 seconds to test the 5 seconds timeout.
                System.Threading.Thread.Sleep(7000);

                if (!tokenSource.IsCancellationRequested)
                {
                    // if not cancelled then save data

                    App.Data.EmployeeWCF ws = new App.Data.EmployeeWCF ();
                    returnVal = ws.UpdateData(_employee.Data);
                    ws.Dispose();
                }

                return returnVal;

            }, tokenSource.Token);

            if (await System.Threading.Tasks.Task.WhenAny(someTask, System.Threading.Tasks.Task.Delay(5000)) == someTask)
            {
                // Completed
                this.HideWizardPleaseWait();
                if (someTask.Result)
                {
                    this.DialogResult = System.Windows.Forms.DialogResult.OK;
                }
                else
                {
                    this.DialogResult = System.Windows.Forms.DialogResult.Abort;
                }
                btnOK.Enabled = true;
                this.Close();
            }
            else
            {
                tokenSource.Cancel();

                // Timeout logic
                this.HideWizardPleaseWait();
                MessageBox.Show("Timeout. Please try again.")
            }

        }
    } 
```

async / await / 取消代码是否得到很好的实现？

感谢并感谢您的反馈。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T15:49:30.937

一般来说，您应该使用`ThrowIfCancellationRequested`. 这将`Task`在取消状态下完成返回，而不是在“成功运行到完成”状态下返回`false`结果。

其他要点：

*   避免`async void`。这应该是`async Task`除非它是一个事件处理程序。
*   [`Task.Run``TaskFactory.StartNew`](https://devblogs.microsoft.com/pfxteam/task-run-vs-task-factory-startnew/)更[喜欢](https://devblogs.microsoft.com/pfxteam/task-run-vs-task-factory-startnew/)[.](https://devblogs.microsoft.com/pfxteam/task-run-vs-task-factory-startnew/)
*   使用`using`.
*   如果您只是`CancellationTokenSource`用作超时，那么它具有特殊功能。没有必要通过`Task.Delay`and创建单独的任务。`Task.WhenAny`

更新后的代码如下所示：

```
private async Task SaveData()
{
    if (GetActiveServiceRequest() != null)
    {
        var tokenSource = new System.Threading.CancellationTokenSource(TimeSpan.FromSeconds(5));
        var token = tokenSource.Token;

        this.ShowWizardPleaseWait("Saving data...");

        var someTask = System.Threading.Tasks.Task.Run(() =>
        {
            // Set sleep of 7 seconds to test the 5 seconds timeout.
            System.Threading.Thread.Sleep(7000);

            // if not cancelled then save data
            token.ThrowIfCancellationRequested();
            using (App.Data.EmployeeWCF ws = new App.Data.EmployeeWCF())
            {
                return ws.UpdateData(_employee.Data);
            }
        }, token);

        try
        {
            var result = await someTask;

            // Completed
            this.HideWizardPleaseWait();
            if (result)
            {
                this.DialogResult = System.Windows.Forms.DialogResult.OK;
            }
            else
            {
                this.DialogResult = System.Windows.Forms.DialogResult.Abort;
            }
            btnOK.Enabled = true;
            this.Close();
        }
        catch (OperationCanceledException)
        {
            // Timeout logic
            this.HideWizardPleaseWait();
            MessageBox.Show("Timeout. Please try again.")
        }
    }
} 
```

# java - Android SQLite 从数据库中删除特定行

> ID：15027474
> 
> 赞同：4
> 
> 时间：2013-02-22T15:25:54.527
> 
> 标签：java, android, database, sqlite

我正在尝试做一个简单的登录页面，只需输入用户名，我就可以删除特定联系人及其详细信息。

换句话说，我想删除数据库中的特定行。

```
 public int deleteUsername(String content){

    String whereClause = KEY_CONTENT1 + "= '" + content + "'";

    return sqLiteDatabase.delete(MYDATABASE_TABLE, whereClause, null);
}

public int deletePassword(String content){

    String whereClause = KEY_CONTENT2 + "= '" + content + "'";

    return sqLiteDatabase.delete(MYDATABASE_TABLE, whereClause, null);
} 
```

```
 public void onClick(View v) {

    String username = null;
    String password = null;

    username = this.txtnewuserinputedituser.getText().toString().toUpperCase();
    password = this.txtnewpasswordinputedituser.getText().toString().toUpperCase();

    switch (v.getId())
    {

    case R.id.btndeleteuser :
    {   

        mySQL.openToWrite();
        mySQL.deleteUsername(username);
        mySQL.deletePassword(password);;
        mySQL.close();

        String toastText = "User Deleted";
        Toast.makeText(getApplicationContext(), toastText, Toast.LENGTH_SHORT).show();

        break;
    }
    }
    } 
```

这意味着我必须在编辑视图中输入用户名和密码才能删除该特定用户。我发现一些消息来源告诉我使用这样的东西，但我试过了，但它不起作用。有什么错误吗？

```
public int deleteRow(String showId) {
    String table_name = "MYDATABASE_TABLE";
    String where = "showId='"+showId+"'";
    return sqLiteDatabase.delete(table_name, where, null);
} 
```

我想通过获取用户名来删除数据库中的特定行。我输入要删除的行的 id。如何做到这一点，或者我可以使用任何替代方案？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-22T15:32:35.390

您不需要单独删除行中的每个条目。以下方法应删除`username`字段等于传递的行`userName`。该`password`字段和行中的任何其他字段也将被删除。

```
public void deleteUser(String userName)
{
    SQLiteDatabase db = this.getWritableDatabase();
    try
    {
        db.delete(MYDATABASE_TABLE, "username = ?", new String[] { userName });
    }
    catch(Exception e)
    {
        e.printStackTrace();
    }
    finally
    {
        db.close();
    }
} 
```

编辑：如果您只是复制该方法，则不必再手动打开和关闭数据库，因此您的行

```
mySQL.openToWrite();
mySQL.deleteUsername(username);
mySQL.deletePassword(password);;
mySQL.close(); 
```

会变得公正

```
mySQL.deleteUser(username); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-19T05:42:50.313

您可以使用简单的 SQL 查询来删除特定行 Acc to sql

`DELETE FROM table_name WHERE some_column=some_value;` 所以用

`db.execSQL("delete from " + Message.TABLENAME +" where specific_row_to_delete=\'" + user_name );`

如果你有不止一个`where`条件，那么你可以使用`AND`like

```
db.execSQL("delete from  " + TABLENAME +
            " where specific_row_to_delete=\'" + user_name +
            "\' and condition_to_delete  >= " + condtion_argument ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-24T05:50:00.827

如果您的 where 子句包含不同类型的值，请尝试此操作。

```
public void delete(int Cid,String username,String password)
    {
        SQLiteDatabase database = this.getWritableDatabase();
        database.delete(TABLE_NAME, KEY_CID + "=" + Cid + " and " + KEY_UserName + "=" + username + " and " + KEY_Password + "=" + password, null);
        database.close();
    } 
```

***或者***

```
 public void delete(int Cid,String username,String password)
    {
        SQLiteDatabase database = this.getWritableDatabase();

        database.execSQL("DELETE FROM " + TABLE_NAME+ " WHERE " +KEY_CID+ "= '"+Cid+"'AND "+KEY_Password+"='"+password+"'" +
                "AND "+KEY_UserName+"='"+username+"'");
        database.close();

    } 
```

`delete()`在调用此方法的方法中传递参数。

**例子**

```
favourite.delete(Courseid,Username,Password); 
```

这`favourite`是我们在其中创建的数据库对象，我们`activity()`从中调用`delete()`函数

# android - 使用从 Web 加载的图像构建 RatingBar

> ID：15027475
> 
> 赞同：11
> 
> 时间：2013-02-22T15:25:54.857
> 
> 标签：android, android-layout, ratingbar

我有一个表单，它是根据从 Web 服务接收到的数据动态生成的。此 Web 服务提供创建输入元素时需要使用的图像。我很难设置`progressDrawable`. `RatingBar`虽然 XML 我可以使用以下内容应用自定义图像`progressDrawable`：

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+android:id/background" android:drawable="@drawable/custom_star" />
    <item android:id="@+android:id/secondaryProgress" android:drawable="@drawable/custom_star" />
    <item android:id="@+android:id/progress" android:drawable="@drawable/custom_star" />
</layer-list> 
```

where`custom_star`是一个简单的 .png 图像，并带有`@android:style/Widget.RatingBar`RatingBar 样式。这工作正常：

![工作开始](../Images/6088c9fb88579c3a05a5ba8d68dec431.png)

但我想`custom_star`动态改变。

在代码中，我尝试直接使用位图设置进度可绘制：

```
Drawable d = new BitmapDrawable(getResources(), downloadedImage);
ratingBar.setProgressDrawable(d); 
```

并且还通过构造一个`layer-list`：

```
LayerDrawable layerDrawable = new LayerDrawable(new Drawable[] {
    getResources().getDrawable(R.drawable.custom_star),
    getResources().getDrawable(R.drawable.custom_star),             
    getResources().getDrawable(R.drawable.custom_star)
});

layerDrawable.setId(0, android.R.id.background);
layerDrawable.setId(1, android.R.id.secondaryProgress);
layerDrawable.setId(2, android.R.id.progress);

ratingBar.setProgressDrawable(layerDrawable); 
```

都不适合我；两者都导致`custom_star`drawable出现一次，被以下尺寸拉伸`RatingBar`：

![在此处输入图像描述](../Images/fe168e6a4b7a0d0435d131dc57ed51aa.png)

有任何想法吗？

**更新：**

Luksprog 在下面的回答有所改进，但我仍然遇到一些问题。现在，星形可绘制对象没有被拉伸，并且可以通过触摸设置值，但在选择 3/5 时显示如下：

![没有中学](../Images/bf3eaf50246f118345596d6168364f2c.png)

并选择了 5/5：

![星星太多](../Images/a08df7eb4674f4c99d5391b071db19b7.png)

我相信图像的缩放可以通过一些调整来修复，但令人讨厌的是，`secondaryProgress`drawable 似乎没有设置 - 用于灰色未选择星星的 drawable。没有它，它不是很有用。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-23T20:16:10.160

> 有任何想法吗？

当使用默认值`progressDrawable`或`progressDrawable`通过主题设置时，一切都可以，因为在（更准确地说是`RatingBar`它的超类）小部件的构造函数中，将调用一个方法来从该可绘制对象中“制作图块”。`ProgressBar`使用该`setProgressDrawable`方法时，不会发生这种情况，并且如果您传递一个简单的`BitmapDrawable`或 a `LayerDrawable`（带有 simple `BitmapDrawables`），`Drawable`它将被简单地拉伸以覆盖小部件的背景区域（您所看到的）。

为了使其工作，您需要手动执行`RatingBar`开始时所做的事情，创建瓷砖及其使用的瓷砖`ClipDrawables`。根据小部件的源代码，我为此编写了一个方法`ProgressBar`：

```
private Drawable buildRatingBarDrawables(Bitmap[] images) {
    final int[] requiredIds = { android.R.id.background,
            android.R.id.secondaryProgress, android.R.id.progress };
    final float[] roundedCorners = new float[] { 5, 5, 5, 5, 5, 5, 5, 5 };
    Drawable[] pieces = new Drawable[3];
    for (int i = 0; i < 3; i++) {
        ShapeDrawable sd = new ShapeDrawable(new RoundRectShape(
                roundedCorners, null, null));
        BitmapShader bitmapShader = new BitmapShader(images[i],
                Shader.TileMode.REPEAT, Shader.TileMode.CLAMP);
        sd.getPaint().setShader(bitmapShader);
        ClipDrawable cd = new ClipDrawable(sd, Gravity.LEFT,
                ClipDrawable.HORIZONTAL);
        if (i == 0) {
            pieces[i] = sd;
        } else {
            pieces[i] = cd;
        }
    }
    LayerDrawable ld = new LayerDrawable(pieces);
    for (int i = 0; i < 3; i++) {
        ld.setId(i, requiredIds[i]);
    }
    return ld;
} 
```

然后，您可以`LayerDrawable`将此方法返回的值与该方法一起使用`setProgressDrawable`。设置它的`RatingBar`宽度乘以状态位图之一的宽度与星星的数量，所以为了显示正确的星星数量，这也必须计算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-02T13:02:02.493

你的id错了，你要设置@android:id/background @android:id/secondaryProgress @android:id/progress

您还可以在包含自定义内容的 xml 中定义可绘制对象

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+android:id/background"
          android:drawable="@drawable/star_empty" />
    <item android:id="@+android:id/secondaryProgress"
          android:drawable="@drawable/star_empty" />
    <item android:id="@+android:id/progress"
          android:drawable="@drawable/star_full" />
</layer-list> 
```

并且您可以`setMax`在 RatingBar 对象上使用来设置可以显示的最大星数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-05T11:41:53.943

使用这种解决方案要容易得多：

```
RatingBar ratingBar = new RatingBar(new ContextThemeWrapper(context, R.style.AppTheme_RatingBar), null, 0); 
```

# mysql - 如果行数超过 1，则获取最早的时间

> ID：15027476
> 
> 赞同：0
> 
> 时间：2013-02-22T15:25:58.303
> 
> 标签：mysql

我需要一些 MySQL 痛苦的帮助 ****... 无论如何，我得到了以下 sql：

```
SELECT id,count(*),
 CASE 
    WHEN count(*) > 1 THEN
        // I need the minimal `taskdate_time` column from the selected rows
        // where a certain boolean is active 
 ELSE taskdate_time
 END
FROM timehistory th
WHERE `send`=true
GROUP BY date_format(taskdate_time, "%Y-%m-%d"), user_id 
```

如评论中所述，我需要为`removed`没有调用列的两行获取最早的超时时间`FALSE`

我如何实现这一目标？

我的专栏是：

```
`id` - int
`taskdateuser_id` int
`user_id` int
`changed_by` int
`batch_id` int
`taskdate_time` timestamp
`send` tinyint
`isread` tinyint
`update` tinyint
`removed` tinyint 
```

提前谢谢了！！！

编辑：

我可能会再解释一下。如果我得到下表行：

![在此处输入图像描述](../Images/31ee322202e662ac37f3797cd588d0e5.png)

红色标记的行由 CASE count(*) > 1 捕获，因为 group by 返回了 2 行。然后我需要从 2 个捕获的行中选择一个 SELECT`removed=false`和`min(taskdate_time)`. 因此，如果为该分组返回 4 行，并且其中 2 行是`removed=false`，而另一行是，`removed=true`那么我需要对`taskdate_time`2 行 where的最小值进行子选择`removed=false`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T15:30:37.860

```
SELECT  id,
        count(*),
        CASE WHEN count(*) > 1 
             THEN (SELECT MAX(taskdate_time) FROM timehistory f WHERE f.id = th.id AND removed = 0)
             ELSE taskdate_time
        END
FROM    timehistory th
WHERE   `send` = true
GROUP   BY date_format(taskdate_time, "%Y-%m-%d"), user_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T15:39:53.953

你可以尝试这样的事情：

```
SELECT TH.user_id, COUNT(*), 
  CASE WHEN COUNT(*) > 1 
  THEN MIN(IF(TH.removed, TH.taskdate_time, NULL))
  ELSE TH.taskdate_time
  END   
FROM TimeHistory TH 
... 
```

[小提琴演示示例](http://sqlfiddle.com/#!2/b201d/3)

但是，如果 COUNT > 1 并且没有任何记录 TH.removed 为真，那么这将返回该值的 NULL。在这些情况下它应该返回什么？

**- 编辑 -**

作为对评论的回应，这应该只是用以下方式包装它`COALESCE`：

```
 COALESCE(
    CASE 
    WHEN COUNT(*) > 1 
    THEN MIN(IF(TH.removed, TH.taskdate_time, NULL))
    ELSE TH.taskdate_time
    END, MIN(TH.taskdate_time)) 
```

# youtrack - 使用 YouTrack REST API 获取 Sprint 列表

> ID：15027484
> 
> 赞同：2
> 
> 时间：2013-02-22T15:26:08.893
> 
> 标签：youtrack

我正在创建一个 C# 工具，它使用 REST API 从 YouTrack 中提取信息。我正在寻找一种方法来获取已创建的 sprint 列表。有没有办法通过 REST API 轻松获取这些信息？在最坏的情况下，我可以获得问题列表并解析所有问题以收集所有可用的 sprint，但必须有一种更简单的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-16T19:24:18.220

版本 5 改变了敏捷方法。使用以下命令返回新的敏捷方法：

```
{baseUrl}/rest/agile/{agileID}/sprints 
```

我必须使用以下命令获取要在上述 url 中使用的敏捷 ID 列表：

```
{baseUrl}/rest/agile/agiles 
```

这现在给出了所有敏捷板的列表，并且在上面的第一个命令中使用“id”元素将返回该敏捷板的冲刺列表。返回的 AgileID 类似于“myprojectname-99”。我发现如果你只使用 ID 末尾的数字，那也可以代替使用完整的敏捷名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T15:31:50.607

我找到了一种更简单的方法来获得冲刺：

```
{baseUrl}/rest/agile/{projectName}/sprints?" 
```

这将提供一个 XML，其中包含该项目的所有 sprint 及其开始/结束日期。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T08:17:02.923

您请求的内容可以通过 GET {youtrac.base.url}/rest/admin/customfield/versionBundle/{bundleName} 获得。要找出 {bundleName}，请转到敏捷设置并查看“识别冲刺的字段：”设置，它会为您提供字段名称。对于此字段，您可以在管理中找到捆绑包的名称。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-04-03T22:07:59.777

`{baseUrl}/rest/agile/{projectName}/sprints?`仅当敏捷板的名称与 projectName 相同时才有效！！！

API 是：`{baseUrl}/rest/agile/{agileName}/sprints`?

# php - PHP - spl_autoload 和命名空间 - 不适用于大写字母

> ID：15027486
> 
> 赞同：4
> 
> 时间：2013-02-22T15:26:17.310
> 
> 标签：php

我已经在我的内部设置了一个非常基本的自动加载器`index.php`来获取一个命名空间类`hello.php`。我的开发环境是*Ubuntu 12.04*。

我为什么要这样做？我正在尝试遵守[PSR-1](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-1-basic-coding-standard.md)和[PSR-2 编码标准](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-2-coding-style-guide.md)，其中包括：

> 类名必须在 StudlyCaps 中声明
> 
> 命名空间为 /Vendor/Class（注意：大写）

以下是我*在更改*大写字母***之前****有效的结构和代码。*

 *****文件夹结构**

```
- web
  -- index.php
  -- core
    --- hello.php 
```

**自动装载机**

在 index.php 中，我有我的自动加载器：

```
set_include_path(__DIR__);
spl_autoload_extensions('.php,.class.php');
spl_autoload_register(); 
```

**类文件**

在核心文件夹中，我有 hello.php

```
namespace core;

class hello {
    public function __construct() {
        echo 'Constructed!';
    }
} 
```

**有效的代码**

如果我`$obj = new \core\hello();`在我的中运行`index.php`，我会返回“Constructed！”。伟大的！

* * *

**不起作用的**

将我的核心文件夹重命名为“Core”——注意大写 C，`hello.php`以及`namespace Core;`.

现在让我们再试一次`$obj = new \Core\hello();`

`Fatal error: Class 'Core\hello' not found in ...`

那么请告诉我，为什么我不能使用大写字母来符合 PSR 标准？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-22T15:34:57.483

在 Linux 平台上运行 PHP 代码时，请务必记住 Linux 对文件名区分大小写。

这会影响自动加载器，因为它们通常在构建要加载的文件名时使用命名空间和类名。

如果文件夹名为`core`，则命名空间必须为`core`，大小写相同。如果将其更改为`Core`在命名空间中，则必须对文件夹名称执行相同操作。（因此，`core`必须同时更改所有其他类`Core`）。

在 Windows 上，这不会发生，因为 Windows 文件系统不区分大小写。当代码在本地基于 Windows 的开发系统上进行测试和工作时，这可能会导致混淆，然后在将其复制到基于 Linux 的服务器时会中断。

[编辑]

好的，所以我错过了您也更改了目录名。但是，我仍然认为这是文件名/目录名的问题。

我注意到你在`spl_autoload_register()`没有任何参数的情况下打电话。这意味着默认`spl_autoload()`函数将用​​作自动加载器。

如果您阅读[的文档`spl_autoload()`](http://www.php.net/manual/en/function.spl-autoload.php)，您会注意到它使用类和命名空间的*小写*版本。

换句话说，使用默认的自动加载器，您的类可以混合大小写，但文件夹结构和文件名必须全部小写。

所以事实上，对你来说，你需要保持你的文件名小写。

根据我的原始答案，我个人经历了相反的情况，我有一个完全小写的文件名，当我从 Windows 开发盒移动到 Linux 服务器时，我的混合大小写类名被打破了。我的经验与你的不同的原因是因为我使用的是自定义编写的自动加载函数，它不会进行自动小写转换，所以我的文件名的大小写必须与我的类名的大小写匹配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-23T12:44:35.493

我认为您向我们展示了一些很好的歧义。如果我错了，请纠正我。

根据规范，您必须使用被实例化的类（和命名空间）的小写名称。（[http://www.php.net/manual/en/function.spl-autoload.php](http://www.php.net/manual/en/function.spl-autoload.php)）

但是 PSR 告诉我们使用大写字母。如果您想坚持使用 PSR，那么我们必须将默认的 spl_autoload 覆盖为我们自己的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-28T01:33:03.013

对于其他有此问题的人，为什么不使用 ucfirst() 或 strtolower() ？

所以下面的代码将尝试所有小写并尝试首字母大写文件

例如：somename.class.php 或 Somename.class.php

is_readable() 首先检查不显示找不到文件的 php 错误。

```
spl_autoload_register(function($name) {

    if (is_readable(strtolower($name).'.class.php')) {
        require_once(strtolower($name).'.class.php');
    } 
    elseif (is_readable(ucfirst($name).'.class.php')) {
        require_once(ucfirst($name).'.class.php');
    }
}); 
```***

# validation - Symfony2 中的字段旁边不显示自定义约束验证错误

> ID：15027491
> 
> 赞同：1
> 
> 时间：2013-02-22T15:26:21.657
> 
> 标签：validation, symfony, constraints

我在 Symfony2 项目中使用 FOSUserBundle。我在用户实体中添加了“生日”字段，因为它在注册表单中是必需的。我还在注册表单中添加了一个适当的字段（类型=生日）。[我必须检查用户的年龄是否超过 18 岁。我在本教程](http://symfony.com/doc/2.0/cookbook/validation/custom_constraint.html)之后为此准备了自己的约束。一切正常，但错误消息附加到表单而不是字段，我想要字段旁边的错误消息。相反，我把它放在整个表格之上。表单中的所有其他错误都显示在适当的字段旁边。有谁知道如何强制将约束附加到字段而不是表单？

编辑：

呈现此特定字段的 Twig 代码片段：

```
<div class="grid_8" style="margin-bottom:20px;">
      <div class="grid_2 alpha">{{ form_label(form.date_of_birth)}}</div>
      <div class="grid_4">{{ form_widget(form.date_of_birth)}}</div>
      <div class="grid_2 omega">{{ form_errors(form.date_of_birth)}}</div>
</div> 
```

在表格的开头，我还有：

```
<div class="grid_8">
  {{form_errors(form)}}
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-22T09:04:13.487

如果您将回调附加到表单而不是特定字段，则应该以不同的方式设置属性路径：

```
public function isFormValid($data, ExecutionContext $context)
{
    if ( $condition == false ) {
        $context->addViolationAt('[date_of_birth].date_of_birth', 'You are too young!');
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T15:47:10.633

您可以将违规添加到一个特定字段，`addViolationAtSubPath()`而不是验证器中使用的经典`addViolation()`。您可以在[这里](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Validator/ExecutionContext.php#L153-163)查看方法定义。

## 一个例子

让我们以需要验证用户名属性是否为字母数字的验证器为例：

```
class ContainsAlphanumericValidator extends ConstraintValidator
{
    public function validate($value, Constraint $constraint)
    {
        if (!preg_match('/^[a-zA-Za0-9]+$/', $value, $matches)) {
            $this->context->addViolationAtSubPath('username',$constraint->message, array('%string%' => $value));
        }
    }
} 
```

## 编辑

您还可以查看[addViolationAtPath()](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Validator/ExecutionContext.php#L120-137)和[addViolationAt()](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Validator/ExecutionContext.php#L168-183)。

# c# - 如何在我的 WinCE 应用程序中集成扫描条码选项？

> ID：15027493
> 
> 赞同：2
> 
> 时间：2013-02-22T15:26:23.863
> 
> 标签：c#, visual-studio, windows-ce, motorola, smart-device

我是 CE 环境的新手，我正在为使用 Windows CE 5.0 (Motorola mc3000) 的带有条形码扫描的移动计算机创建一个应用程序。

我正在使用 VS 2008，并且正在使用 C# 进行编程。

我做了一个小演示项目，它在设备上成功运行。我的应用程序有一个扫描任务，所以它需要使用条形码阅读器：访问扫描硬件，使其运行，读取返回的结果并将其显示到文本框中！

问题是我不知道如何将扫描部分集成到我的应用程序中。

对此有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T15:39:29.143

好吧，第一步是查看摩托罗拉 MC3000 的文档。我不知道 MC3000 是否有一个，但我知道在[用于 .Net 的摩托罗拉 EMDK 中，](http://support.symbol.com/support/search.do?cmd=displayKC&docType=kc&externalId=12874&sliceId=&dialogID=483442884&stateId=1%200%20483440234)它们提供了相当多的示例 C# VS2008 项目，其中一些用于条形码读取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-01T15:40:50.460

Kobunite 已向您发布了第一步。因此，请访问摩托罗拉 EMDK 的下载页面并观看示例。之后，您必须在项目中引用 Symbol.dll 和 Symbol.Barcode.dll（本地副本 = true）。然后您可以开始使用扫描事件的事件处理程序编写您的“条形码类”。当通过硬件触发器扫描条码时，该事件将抛出一个然后您可以将条码字符串放在焦点文本框中或用它做其他事情（例如在数据网格中过滤）。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-16T08:24:30.830

只需简单地扫描条形码，就有一个更简单的解决方案。

默认情况下，条形码扫描仪也应该输出到键盘缓存中。

要对其进行测试，只需打开文本编辑器并扫描条形码。如果出现条形码，那么你很好。您可以简单地使用普通文本框并确保焦点在它上面。

然而，问题是你需要一个终结者。最简单的解决方案是将回车符号附加到任何扫描的值。大多数手持设备都有一个实用程序，您可以在其中附加字符以进行扫描。附加 '\r'（不带引号）适用于大多数设备。

这意味着您不必对代码做任何额外的事情。只需确保文本框支持键盘输入并在按下输入时开始处理。

摩托罗拉使用名为 DataWedge 的实用程序。这是其手册的链接（PDF 文件）。查看第 5 页的回车和换行。[DataWedge 手册（旧但仍应有帮助）](https://research.cip.cgiar.org/confluence/download/attachments/52472901/DataWedge+User+Guide.pdf)

主要优点是它允许用户在条形码损坏的情况下也使用手动输入。缺点是您会丢失条形码元数据（即条形码编码类型等），但无论如何 99% 的时间都不需要这样做。

# ruby - Ruby 抱怨找不到生成器？

> ID：15027496
> 
> 赞同：0
> 
> 时间：2013-02-22T15:26:29.143
> 
> 标签：ruby, rvm

我使用 gem install 重新安装了 rmagick 和 mini_magick，然后运行我需要修复的 ruby​​ 脚本，我收到以下错误：

```
/Users/.../.rvm/rubies/ruby-1.9.2-p320/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:247:in `to_specs': Could not find builder (~> 3.0.0) amongst [Ascii85-1.0.2, actionpack-3.2.12, activemodel-3.2.12, activerecord-3.2.12, activerecord-mysql2-adapter-0.0.3, activesupport-3.2.12, addressable-2.3.3, afm-0.2.0, archive-tar-minitar-0.5.2, arel-3.0.2, aws-s3-0.6.3, aws-ses-0.4.4, builder-3.1.4, bundler-1.2.4, columnize-0.3.6, cookiejar-0.3.0, daemon-kit-0.2.1, diff-lcs-1.2.1, em-http-request-1.0.3, em-socksify-0.2.1, em-synchrony-1.0.3, erubis-2.7.0, eventmachine-1.0.0, factory_girl-4.2.0, god-0.13.1, hashery-2.1.0, hike-1.2.1, http_parser.rb-0.5.3, i18n-0.6.1, journey-1.0.4, linecache19-0.5.12, little-plugger-1.1.3, logging-1.8.1, mail-2.5.3, mailfactory-1.4.0, mime-types-1.21, mini_magick-3.5.0, multi_json-1.6.1, mysql2-0.3.11, pdf-reader-1.3.1, polyglot-0.3.3, prawn-0.12.0, prawn-fast-png-0.2.3, rack-1.5.1, rack-cache-1.2, rack-protection-1.3.2, rack-test-0.6.2, rake-10.0.3, redis-3.0.2, redis-namespace-1.2.1, resque-1.23.0, rmagick-2.13.2, rspec-2.12.0, rspec-core-2.12.2, rspec-expectations-2.12.1, rspec-mocks-2.12.2, rubigen-1.5.8, ruby-debug-base19-0.11.25, ruby-debug-base19x-0.11.29, ruby-debug-ide-0.4.16, ruby-rc4-0.1.5, ruby_core_source-0.1.5, rubygems-bundler-1.1.0, rufus-scheduler-2.0.17, rvm-1.11.3.6, safe_attributes-1.0.9, safely-0.3.2, sinatra-1.3.4, sprockets-2.8.2, state_machine-1.1.2, subexec-0.2.2, tenderlove-frex-1.0.1.20090313144615, thor-0.17.0, tilt-1.3.3, treetop-1.4.12, ttfunk-1.0.3, tzinfo-0.3.35, vegas-0.1.11, xml-simple-1.1.2] (Gem::LoadError)
    from /Users/.../.rvm/rubies/ruby-1.9.2-p320/lib/ruby/site_ruby/1.9.1/rubygems/specification.rb:778:in `block in activate_dependencies'
    from /Users/.../.rvm/rubies/ruby-1.9.2-p320/lib/ruby/site_ruby/1.9.1/rubygems/specification.rb:767:in `each'
    from /Users/.../.rvm/rubies/ruby-1.9.2-p320/lib/ruby/site_ruby/1.9.1/rubygems/specification.rb:767:in `activate_dependencies'
    from /Users/.../.rvm/rubies/ruby-1.9.2-p320/lib/ruby/site_ruby/1.9.1/rubygems/specification.rb:751:in `activate'
    from /Users/.../.rvm/rubies/ruby-1.9.2-p320/lib/ruby/site_ruby/1.9.1/rubygems/specification.rb:781:in `block in activate_dependencies'
    from /Users/.../.rvm/rubies/ruby-1.9.2-p320/lib/ruby/site_ruby/1.9.1/rubygems/specification.rb:767:in `each'
    from /Users/.../.rvm/rubies/ruby-1.9.2-p320/lib/ruby/site_ruby/1.9.1/rubygems/specification.rb:767:in `activate_dependencies'
    from /Users/.../.rvm/rubies/ruby-1.9.2-p320/lib/ruby/site_ruby/1.9.1/rubygems/specification.rb:751:in `activate'
    from /Users/.../.rvm/rubies/ruby-1.9.2-p320/lib/ruby/site_ruby/1.9.1/rubygems.rb:212:in `rescue in try_activate'
    from /Users/.../.rvm/rubies/ruby-1.9.2-p320/lib/ruby/site_ruby/1.9.1/rubygems.rb:209:in `try_activate'
    from /Users/.../.rvm/rubies/ruby-1.9.2-p320/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:59:in `rescue in require'
    from /Users/.../.rvm/rubies/ruby-1.9.2-p320/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:35:in `require'
    from ./q_test.rb:4:in `<main>' 
```

我在我的 rvm gemset 上安装了以下 gem：

```
actionpack (3.2.12)
activemodel (3.2.12)
activerecord (3.2.12)
activerecord-mysql2-adapter (0.0.3)
activesupport (3.2.12)
addressable (2.3.3)
afm (0.2.0)
archive-tar-minitar (0.5.2)
arel (3.0.2)
Ascii85 (1.0.2)
aws-s3 (0.6.3)
aws-ses (0.4.4)
builder (3.1.4)
bundler (1.2.4)
columnize (0.3.6)
cookiejar (0.3.0)
daemon-kit (0.2.1)
diff-lcs (1.2.1)
em-http-request (1.0.3)
em-socksify (0.2.1)
em-synchrony (1.0.3)
erubis (2.7.0)
eventmachine (1.0.0)
factory_girl (4.2.0)
god (0.13.1)
hashery (2.1.0)
hike (1.2.1)
http_parser.rb (0.5.3)
i18n (0.6.1)
journey (1.0.4)
linecache19 (0.5.12)
little-plugger (1.1.3)
logging (1.8.1)
mail (2.5.3)
mailfactory (1.4.0)
mime-types (1.21)
mini_magick (3.5.0)
multi_json (1.6.1)
mysql2 (0.3.11)
pdf-reader (1.3.1)
polyglot (0.3.3)
prawn (0.12.0)
prawn-fast-png (0.2.3)
rack (1.5.1)
rack-cache (1.2)
rack-protection (1.3.2)
rack-test (0.6.2)
rake (10.0.3)
redis (3.0.2)
redis-namespace (1.2.1)
resque (1.23.0)
rmagick (2.13.2)
rspec (2.12.0)
rspec-core (2.12.2)
rspec-expectations (2.12.1)
rspec-mocks (2.12.2)
rubigen (1.5.8)
ruby-debug-base19 (0.11.25)
ruby-debug-base19x (0.11.29)
ruby-debug-ide (0.4.16)
ruby-rc4 (0.1.5)
ruby_core_source (0.1.5)
rubygems-bundler (1.1.0)
rufus-scheduler (2.0.17)
rvm (1.11.3.6)
safe_attributes (1.0.9)
safely (0.3.2)
sinatra (1.3.4)
sprockets (2.8.2)
state_machine (1.1.2)
subexec (0.2.2)
tenderlove-frex (1.0.1.20090313144615)
thor (0.17.0)
tilt (1.3.3)
treetop (1.4.12)
ttfunk (1.0.3)
tzinfo (0.3.35)
vegas (0.1.11)
xml-simple (1.1.2) 
```

不知道为什么会这样？它一直工作到我删除并重新安装 rmagick 的地步？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T15:52:42.653

安装 builder 3.1.4 后，您需要 builder 3.0.x。

它说“找不到构建器（〜> 3.0.0）”。“~>” 标记“悲观版本约束”（此处描述为[http://docs.rubygems.org/read/chapter/16#page74](http://docs.rubygems.org/read/chapter/16#page74)），它仅表示“不关心最后一位数字”。所以，任何 3.0.x 都可以，但 3.1.x 不会。

# php - 如何在我的新闻站点中添加自动水印脚本？

> ID：15027498
> 
> 赞同：0
> 
> 时间：2013-02-22T15:26:41.377
> 
> 标签：php, mysql

我有一个带有 php & mysql 的新闻网站

如何添加脚本来自动为我的新闻图片添加水印？

此代码是我与 mysql 的站点新闻连接：

```
$sql = mysql_query("SELECT newsid,title,img,stext,ltext,count,date,time,source FROM news WHERE newsid='$newsid' AND cat <> '1' LIMIT 1"); 
```

“img”是我的新闻图片文件

如何在“img”文件上添加图像水印？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:32:12.613

你可以使用 GD 或 imageMagick

例如： http: [//permadi.com/blog/2010/03/using-php-gd-to-add-watermark-to-images/](http://permadi.com/blog/2010/03/using-php-gd-to-add-watermark-to-images/)

（来自上面链接的代码）

```
01  <?php
02     // Load the image where the logo will be embeded into
03     $image = imagecreatefromjpeg($_GET['imageURL']);
04   
05   
06     // Load the logo image
07     $logoImage = imagecreatefrompng("logo.png");
08     imagealphablending($logoImage, true);
09        
10     // Get dimensions
11     $imageWidth=imagesx($image);
12     $imageHeight=imagesy($image);
13        
14     $logoWidth=imagesx($logoImage);
15     $logoHeight=imagesy($logoImage);    
16        
17     // Paste the logo
18     imagecopy(
19        // destination
20        $image,
21        // source
22        $logoImage,
23        // destination x and y
24        $imageWidth-$logoWidth, $imageHeight-$logoHeight,   
25        // source x and y
26        0, 0,
27        // width and height of the area of the source to copy
28        $logoWidth, $logoHeight);
29           
30     // Set type of image and send the output
31     header("Content-type: image/png");
32     imagePng($image);
33    
34     // Release memory
35     imageDestroy($image);
36     imageDestroy($imageLogo);    
37  ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T16:00:32.573

这将需要将图像作为文件存储在服务器上。

首先，如果尚未自动加载 CodeIgniter 的图像库，请加载它。

```
$this->load->library('image_lib'); 
```

以下将在图像底部的中心添加水印。

```
$config['source_image'] = '/path/to/image.jpg';
$config['wm_text'] = 'Your watermark text';
$config['wm_type'] = 'text';
$config['wm_font_path'] = './system/fonts/texb.ttf';
$config['wm_font_size'] = '16';
$config['wm_font_color'] = 'ffffff';
$config['wm_vrt_alignment'] = 'bottom';
$config['wm_hor_alignment'] = 'center';
$config['wm_padding'] = '20';

$this->image_lib->initialize($config); 

$this->image_lib->watermark(); 
```

如果您想要图像作为水印，请更改

```
$config['wm_text'] = 'Your watermark text';
$config['wm_type'] = 'text'; 
```

到

```
$config['wm_overlay_path'] = '/path/to/overlay.png';
$config['wm_type'] = 'overlay'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T16:53:43.303

您可以在 PHP 中使用 [**GD**](http://php.net/manual/en/book.image.php)创建文本水印。以下代码使用[**PDO**](http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/) 代替不推荐使用的`mysql_`函数。水印被添加到 .png 文件中。如果使用其他文件类型，则需要更改`imagecreatefrompng()`和标题以适应。如果图像存储为`blob`（不推荐）使用`imagecreatefromstring()`，并且标题与图像的文件类型相关。

```
<?php
function ImageStringCenter($image, $fontSize, $lineNumber, $totalLines, $text, $color ) { 
    $centerX = ceil( ( imagesx($image) - ( ImageFontWidth($fontSize) * strlen($text) ) ) / 2 ); 
    $centerY = ceil( ( ( imagesy($image) - ( ImageFontHeight($fontSize) * $totalLines ) ) / 2)  + ( ($lineNumber-1) * ImageFontHeight($fontSize) ) ); 
    ImageString($image, $fontSize, $centerX, $centerY, $text, $color ); 
} 
require("dbinfo.php");//database connection paramerters 
$id = 1;
//Connect to database
$dbh = new PDO("mysql:host=$host;dbname=$database", $username, $password);
$dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
try {
    // Prepare statement
    $stmt = $dbh->prepare("SELECT * FROM images WHERE id = ?");
    // Assign parameters
    $stmt->bindParam(1,$id);
    //Execute query
    $stmt->setFetchMode(PDO::FETCH_ASSOC);
    $stmt->execute();
    // Fetch Result
    $result = $stmt -> fetch();
    $image1 = $result["image2"];
    $im = imagecreatefrompng($image1);//for .png file
    $text_color = imagecolorallocate($im, 266, 266, 266);
    ImageStringCenter($im, 5, 1, 2,  "Watermark", $text_color);
    ImageStringCenter($im, 5, 2, 2,  "20/02/2013", $text_color);
    header("Content-Type: image/png");//for .png file
    imagepng($im);
    imagedestroy($image1);
}

catch(PDOException $e) {
    echo "The following error occured.". $e->getMessage() ;// Remove or modify after testing 
    file_put_contents('PDOErrors.txt',date('[Y-m-d H:i:s]').", mapSelect.php, ". $e->getMessage()."\r\n", FILE_APPEND);  
 }
//Close the connection
$dbh = null; 
?> 
```

**样本水印** ![样本水印](../Images/5bcd712388a854437f3f8c9002c728fc.png)

# php - 本地主机中的 Codeigniter 链接断开

> ID：15027499
> 
> 赞同：0
> 
> 时间：2013-02-22T15:26:44.433
> 
> 标签：php, codeigniter, hyperlink, broken-links

我正在为一家公司更新一个项目。我将文件传输到我的本地主机。所以项目在“localhost/project/”中。当我在浏览器中打开网站时，所有链接都指向“localhost/filename”，目录从项目文件夹向上一级。我做了一些研究，注意到有人建议更改 htaccess，但仍然无法得到正确的结果。和建议请让我知道。如果你想要我的任何东西，请问。感谢！

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L] 
```

开始 ：

```
http://localhost/projectfolder/

<a href="/" title="">Home</a> 
```

导致 ：

```
http://localhost/ 
```

配置文件：

```
$config['base_url'] = 'http://localhost/projectfolder/';
$config['index_page'] = "";
$config['uri_protocol'] = "AUTO";
$config['url_suffix'] = ".html";
$config['language'] = "english";
$config['charset'] = "UTF-8";
$config['enable_hooks'] = FALSE;
$config['subclass_prefix'] = 'MY_';
$config['permitted_uri_chars'] = 'a-z & + 0-9~%.:_\-,\'?';
$config['enable_query_strings'] = FALSE;
$config['controller_trigger']   = 'c';
$config['function_trigger']     = 'm';
$config['log_threshold'] = 0;
$config['log_path'] = '';
$config['log_date_format'] = 'Y-m-d H:i:s';
$config['cache_path'] = '';
$config['encryption_key'] = "";
$config['sess_cookie_name']     = 'ci_session';
$config['sess_expiration']      = 7200;
$config['sess_encrypt_cookie']  = FALSE;
$config['sess_use_database']    = FALSE;
$config['sess_table_name']      = 'ci_sessions';
$config['sess_match_ip']        = FALSE;
$config['sess_match_useragent'] = TRUE;
$config['sess_time_to_update']  = 300;
$config['cookie_prefix']    = "";
$config['cookie_domain']    = "";
$config['cookie_path']      = "/";
$config['global_xss_filtering'] = FALSE;
$config['compress_output'] = FALSE;
$config['time_reference'] = 'local';
$config['rewrite_short_tags'] = FALSE;
$config['proxy_ips'] = ''; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T15:39:26.713

您可能需要打开 config.php 文件并将 base_url 值更改为 localhost 或可能 localhost:8080（或 localhost 使用的任何端口）。

**编辑**

问题是您的所有锚标记都使用硬编码值，例如`/`主页。

在服务器上，这将正常工作，因为您的域类似于go `example.com`to `/`，您说的是 go to `example.com/`。

在 codeigniter 中创建链接的正确方法是使用`anchor()`帮助程序，或者像您的项目一样手动创建锚标记，但在 href 中使用`base_url()`或使用。`site_url()`

如何修复主页链接的示例如下：

```
<a href="<?php echo base_url(); ?>/">blah</a> 
```

它可能适用于您的所有链接，只需在您的 href 值前面加上 base_url，但这取决于链接中的值。

这是 codeigniter 辅助方法的链接 - [http://ellislab.com/codeigniter/user-guide/helpers/url_helper.html](http://ellislab.com/codeigniter/user-guide/helpers/url_helper.html)。

看一下codeigniter手册对您来说是最有利的，因为它非常好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T07:51:24.383

试试这个简单的 .htaccess 它似乎对我有用：你的缺少 ReWriteBase

* * *

```
<IfModule mod_rewrite.c>

    RewriteEngine on
    RewriteBase /projectfolder/

    # If the start of the URL doesn't match one of these...
    RewriteCond $1 !^(index\.php|robots\.txt|uploads|css|images|js)

    # Route through index.php
    RewriteRule ^(.*)$ index.php/$1 [L]

</IfModule> 
```

* * *

如果这对你有用，我想你可以从修复你的 ReWriteBase 开始。

请注意，当您将此 htaccess 文件上传到您的主机并且默认 base_url 更改为 www.example.com 之类的内容时，您必须将 ReWriteBase 更改为 /

并且不要忘记`<?php echo base_url() ?>`在可能的情况下在您的链接中使用。

我希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T08:02:49.070

在配置文件中使用它：

```
$config['base_url'] = 'http://'.$_SERVER['SERVER_NAME'].'/Your project folder  name';
$config['index_page'] = '';
$config['uri_protocol'] = 'AUTO'; 
```

在 .htaccess 中使用它

```
RewriteEngine on
RewriteCond $1 !^(index\.php|resources|robots\.txt)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L,QSA] 
```

并使用以下命令启用重写模式

```
a2enmod rewrite 
```

并编辑文件 /etc/apache2/sites-enabled/000-default

```
change all the AllowOverride None to AllowOverride All. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-23T05:54:00.203

更改以下行

```
RewriteRule ^(.*)$ index.php/$1 [L]

to

RewriteRule ^(.*)$ /project/index.php/$1 [L] 
```

希望它会奏效。

# javascript - 如何识别浏览器是否禁用了javascript

> ID：15027500
> 
> 赞同：-1
> 
> 时间：2013-02-22T15:26:53.217
> 
> 标签：javascript

我对一个问题感到困惑。许多浏览器（如 Internet Explorer）允许禁用 javascript。

如何检查用户的浏览器是否禁用了 javascript？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T15:28:42.903

例如modernizr 使用的一种方法是您设置一个类`no-js`，然后modernizr 在完成后删除该类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T15:30:33.150

除了 pdeurstler 的回答之外，还有一种老派的方式。

它有点老派，但`<noscript>...</noscript>`检测到 JavaScript 被禁用并执行嵌入 HTML。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T15:37:46.857

一个常见的解决方案是`meta`结合标签`noscript`刷新页面并在 JavaScript 被禁用时通知服务器，如下所示：

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <noscript>
            <meta http-equiv="refresh" content="0; /?javascript=false">
        </noscript>
        <meta charset="UTF-8"/>
        <title></title>
    </head>
</html> 
```

`0`在上面的示例中，当 JavaScript 被禁用时，浏览器将在几秒钟内重定向到网站的主页。此外，它还将参数发送`javascript=false`到服务器。

然后，诸如 node.js 或 PHP 之类的服务器端脚本可以解析参数并知道 JavaScript 已禁用。然后它可以向客户端发送一个特殊的非 JavaScript 版本的网站。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T15:29:29.373

只要有一些文字说您需要 javascript 才能使用该网站，然后 onload 使用 javascript 销毁该文本。

# c# - 如何从文件夹中的图像动态创建多个 PictureBox 实例？

> ID：15027502
> 
> 赞同：0
> 
> 时间：2013-02-22T15:26:55.307
> 
> 标签：c#, winforms

我正在尝试从包含图像的文件夹中动态创建图片框，但在我的代码中我只能创建一个图片框。如何为每张图片创建一个图片框？

这是我的代码：

```
 namespace LoadImagesFromFolder
 {
   public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        string[] images = Directory.GetFiles(@"C:\Users\Public\Pictures\Sample Pictures", "*.jpg");
        foreach (string image in images)
        {
            pictureBox1.Image = new Bitmap(image); 

        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T15:31:36.263

您只是为单个 PictureBox ( `pictureBox1`) 重写图像值，但您需要为每张图片创建一个新的 PictureBox 并设置其值。这样做，你会没事的。

像这样的东西（只是一个例子，根据您的需要修改它！）

```
foreach (string image in images)
{
   PictureBox picture = new PictureBox();
   picture.Image = new Bitmap(image); 
   someParentControl.Controls.Add(picture);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T15:31:37.670

您必须使用对话框来选择文件，`PictureBox`在循环中动态创建控件`foreach`并将它们添加到表单（或其他容器控件）的`Controls`集合中。

```
private void button1_Click(object sender, EventArgs e)
{
    OpenFileDialog d = new OpenFileDialog();

    // allow multiple selection
    d.Multiselect = true;

    // filter the desired file types
    d.Filter = "JPG |*.jpg|PNG|*.png|BMP|*.bmp";

    // show the dialog and check if the selection was made
    if (d.ShowDialog() == DialogResult.OK)
    {
        foreach (string image in d.FileNames)
        {
            // create a new control
            PictureBox pb = new PictureBox();

            // assign the image
            pb.Image = new Bitmap(image);

            // stretch the image
            pb.SizeMode = PictureBoxSizeMode.StretchImage;

            // set the size of the picture box
            pb.Height = pb.Image.Height/10;
            pb.Width = pb.Image.Width/10;

            // add the control to the container
            flowLayoutPanel1.Controls.Add(pb);
        }
    }
} 
```

# ruby-on-rails - 以 simple_form 显示回形针 content_type 错误

> ID：15027506
> 
> 赞同：2
> 
> 时间：2013-02-22T15:27:18.050
> 
> 标签：ruby-on-rails, twitter-bootstrap, paperclip, simple-form

我遇到了一个问题，即尝试上传无效文件类型时，模型附件字段上的验证错误未显示在视图中。我的模型设置如下：

```
has_attached_file :avatar,
  styles: {medium: "300x300>", thumb: "100x100>"}

validates_attachment :avatar, presence: true,
  content_type: { content_type: /^image\/(jpg|jpeg|pjpeg|png|x-png|gif)$/ },
  size: { in: 0..10.megabytes } 
```

如果我在调试器中检查错误，我会看到以下内容：

```
(rdb:1) p @applicant.errors.to_hash
{:avatar_content_type=>["is invalid"]} 
```

我知道验证正在工作，所以我怀疑问题出在“avatar_content_type”字段上，而不是“avatar”字段上。我[在 simple_form 讨论论坛上发现了一个类似的问题](https://groups.google.com/forum/?fromgroups=#!topic/plataformatec-simpleform/c9waJjCS_Uc)，其中一个建议是使用错误助手：

```
<%= f.input :avatar %>
<%= f.error :avatar_content_type %> 
```

这种工作，但不包括正常错误包括的标记和类，并且样式不正确。是否有一种我忽略的方法可以与 twitter bootstrap 一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T15:39:01.807

一个 Uber hack，把它放在表单上方的视图中：

```
<% @applicant.errors[:avatar] << "Invalid avatar upload format" if @applicant.errors[:avatar_content_type] %> 
```

编辑：更好的答案：

在控制器中做同样的事情

```
def update
  @applicant = Applicant.find(params[:id])
  if @applicant.update_attributes(params[:applicant])
    # ..
  else
    @applicant.errors[:avatar] << "Invalid avatar upload format" if @applicant.errors[:avatar_content_type]
    render :edit
  end
end 
```

# maven - 使用 Maven 构建战争文件时重命名目录

> ID：15027507
> 
> 赞同：3
> 
> 时间：2013-02-22T15:27:24.307
> 
> 标签：maven, war, rename

# 问题

## 总体的目标

我想构建一个 Java WebApp（war 文件），其中包含静态内容的文件夹附加了一个版本号以用于缓存。重命名应该在构建过程中自动发生。

## 细节

WebApp 的结构已经将所有静态内容组合在文件夹中：

*   /lib -> 所有 JavaScript 库，例如 /lib/angular-1.0.3（源代码位于 src/main/webapp）
*   /app -> 我自己的代码，目前是 /app/myApp（源代码位于 src/main/webapp）
*   /api -> 所有动态 servlet（源代码位于 src/main/java）
*   index.jsp -> 引导 WebApp 的主机页面

以 /api 和 index.jsp 开头的所有内容都是动态的，根本不可缓存。

以 /lib 开头的所有内容都是静态的和版本化的，因此我们可以设置一个过期标题“访问 + 12 个月”。内容更改需要新的版本号。这对于库来说很容易，因为它们不会改变太多，版本号是硬编码的。

由于我自己的应用程序（使用 AngularJS 构建）也是静态的，因此我也想将其 expires 标头设置为“访问 + 12 个月”。为此，我需要将来自 Maven 的当前版本号添加到文件夹名称的末尾，从而将 /app/myApp 从源目录变为目标目录/最终 war 文件中的 /app/myApp-1.2.3。

## POM 文件

```
<plugins>
<plugin>
 <groupId>net.alchim31.maven</groupId>
 <artifactId>yuicompressor-maven-plugin</artifactId>
 <version>1.3.2</version>
 <executions>
   <execution>
     <goals>
       <goal>jslint</goal>
       <goal>compress</goal>
     </goals>
   </execution>
 </executions>

 <configuration>
   <excludeResources>true</excludeResources>
   <removeIncluded>true</removeIncluded>
   <suffix>.min</suffix>
   <excludes>
     <exclude>**/*.xml</exclude>
     <exclude>**/*.properties</exclude>
     <exclude>**/lib/**/*.js</exclude>
     <exclude>**/lib/**/*.css</exclude>
   </excludes>

   <aggregations>
     <aggregation>
       <insertNewLine>true</insertNewLine>
       <output>${project.build.directory}/${project.build.finalName}/app/myApp/js/all.min.js</output>
       <includes>
         <include>${project.basedir}/src/main/webapp/app/myApp/js/header.txt</include>
         <include>**/*.min.js</include>
       </includes>
     </aggregation>
   </aggregations>
 </configuration>
</plugin>
<plugin>
 <groupId>org.apache.maven.plugins</groupId>
 <artifactId>maven-war-plugin</artifactId>
 <version>2.0.1</version>
 <executions>
   <execution>
     <id>prepare-war</id>
     <phase>prepare-package</phase>
     <goals>
       <goal>exploded</goal>
     </goals>
   </execution>
 </executions>
</plugin>

<plugin>
 <groupId>com.google.code.maven-replacer-plugin</groupId>
 <artifactId>replacer</artifactId>
 <version>1.5.2</version>
 <executions>
   <execution>
     <phase>prepare-package</phase>
     <goals>
       <goal>replace</goal>
     </goals>
   </execution>
 </executions>
 <configuration>
   <ignoreMissingFile>false</ignoreMissingFile>
   <file>${project.build.directory}/myApp/index.jsp</file>
   <replacements>
     <replacement>
       <token>PROJECT_VERSION</token>
       <value>${project.version}</value>
     </replacement>
   </replacements>
 </configuration>
</plugin> 
```

我正在寻找一种方法将所有资源复制到目标目录，运行 yuicompressor，更新链接并将 app/myApp 重命名为 app/myApp-xyz

已经压缩和更新链接，但我找不到在构建时重命名我自己的应用程序的方法。

谢谢

# 解决方案

```
 <plugins>
         <plugin>
           <groupId>net.alchim31.maven</groupId>
           <artifactId>yuicompressor-maven-plugin</artifactId>
           <version>1.3.2</version>
           <executions>
             <execution>
               <goals>
                 <goal>jslint</goal>
                 <goal>compress</goal>
               </goals>
             </execution>
           </executions>
           <configuration>
             <excludeResources>true</excludeResources>
             <removeIncluded>true</removeIncluded>
             <suffix>.min</suffix>
             <failOnWarning>true</failOnWarning>
             <excludes>
               <exclude>**/*.xml</exclude>
               <exclude>**/*.properties</exclude>
               <exclude>**/lib/**/*.js</exclude>
               <exclude>**/lib/**/*.css</exclude>
             </excludes>
             <sourceDirectory>${project.basedir}/src/main/webapp/app/myApp</sourceDirectory>
             <outputDirectory>${project.build.directory}/${project.build.finalName}/app/myApp-${project.version}</outputDirectory>
             <aggregations>
               <aggregation>
                 <insertNewLine>true</insertNewLine>
                 <output>${project.build.directory}/${project.build.finalName}/app/myApp-${project.version}/js/all.min.js</output>
                 <includes>
                   <include>${project.basedir}/src/main/webapp/app/myApp/js/header.txt</include>
                   <include>**/*.min.js</include>
                 </includes>
               </aggregation>
             </aggregations>
           </configuration>
         </plugin>

         <plugin>
           <groupId>org.apache.maven.plugins</groupId>
           <artifactId>maven-war-plugin</artifactId>
           <version>2.3</version>
           <executions>
             <execution>
               <id>prepare-war</id>
               <phase>prepare-package</phase>
               <goals>
                 <goal>exploded</goal>
               </goals>
             </execution>
           </executions>
           <configuration>
             <useCache>true</useCache>
             <!-- this exclude the directory to rename from the default copy resources procedure -->
             <warSourceExcludes>app/myApp/**,.idea/**</warSourceExcludes>
             <!-- this will do the renaming : i.e. we specify the source directory relative to pom.xml and the target directory relative to root -->
             <webResources>
               <resource>
                 <directory>src/main/webapp/app/myApp</directory>
                 <excludes>
                   <exclude>**/*.js</exclude>
                 </excludes>
                 <targetPath>/app/myApp-${project.version}</targetPath>
               </resource>
             </webResources>
           </configuration>
         </plugin>

         <plugin>
           <groupId>com.google.code.maven-replacer-plugin</groupId>
           <artifactId>replacer</artifactId>
           <version>1.5.2</version>
           <executions>
             <execution>
               <phase>prepare-package</phase>
               <goals>
                 <goal>replace</goal>
               </goals>
             </execution>
           </executions>
           <configuration>
             <ignoreMissingFile>false</ignoreMissingFile>
             <file>${project.build.directory}/myApp/index.jsp</file>
             <replacements>
               <replacement>
                 <token>%PROJECT_VERSION%</token>
                 <value>${project.version}</value>
               </replacement>
             </replacements>
           </configuration>
         </plugin>
        </plugins> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T15:39:24.087

我认为您可以通过[`<webResources>`](http://maven.apache.org/plugins/maven-war-plugin/examples/adding-filtering-webresources.html)在 maven-war-plugin 配置中配置一个元素来做到这一点。

做这样的事情应该有效

```
 <configuration>
      <!-- this exclude the directory to rename from the default copy resources procedure -->
      <warSourceExcludes>app/myApp/**</warSourceExcludes>

      <!-- this will do the renaming : 
           i.e. we specify the source directory relative to pom.xml
           and the target directory relative to root -->
      <webResources>
        <resource>
          <directory>src/main/webapp/app/myApp</directory>
          <!-- override the destination directory for this resource -->
          <targetPath>app/myApp-${project.version}</targetPath>
        </resource>
      </webResources>
    </configuration> 
```

**编辑**

我不习惯使用 yucompressor 插件，但您似乎可以通过`<outputDirectory>`元素轻松更改输出目录：

```
 <outputDirectory>${project.build.directory}/${project.build.finalName}/app/myApp-${project.version}/js/all.min.js</outputDirectory> 
```

如果您的所有代码都在`all.min.js`其中（我认为这是 yucompressor 所做的，但我不确定）：那么您不需要`<webResources>`war 插件中的部分，但您必须保留`<warSourceExcludes>app/myApp/**</warSourceExcludes>`以避免重复。

**编辑 2**

作为对您评论的回答。

尝试以下操作：

*   对 *.css 和 *.js 使用 yucompressor，如先前编辑中所述
*   `/myapp`从通常的战争插件复制资源过程中排除使用`<warSourceExcludes>app/myApp/**</warSourceExcludes>`
*   使用一个`webResources`部分将所有非 *.js 和非 *.css 包含到 myApp-${project.version} 中：

    ```
     <webResources>
        <resource>
          <directory>src/main/webapp/app/myApp</directory>
          <excludes>
            <exclude>**/*.js</exclude>
            <exclude>**/*.css</exclude>
          </excludes>
          <!-- override the destination directory for this resource -->
          <targetPath>app/myApp-${project.version}</targetPath>
        </resource>
      </webResources> 
    ```

# mysql - 生产服务器 CPU 利用率高 - (MySQL/Tomcat)

> ID：15027513
> 
> 赞同：1
> 
> 时间：2013-02-22T15:27:45.727
> 
> 标签：mysql, apache, tomcat6, connection-pooling, my.cnf

在过去的几天里，我们的生产服务器一直面临着一些严重的问题（高 CPU 利用率）。我们通过调整 MySQL my.cnf 文件进行了一些管理，但它仍保持在 60-70% 的 CPU 利用率。**我们服务器中的“正在运行的进程**”似乎表明MySQL 使用了 87.8% 的 CPU 使用率。

我在下面粘贴了一些列表，

```
 Display : PID | User | Memory | CPU | Search | Run..

    CPU load averages:  2.24 (1 mins) , 2.96 (5 mins) , 2.86 (15 mins)
    CPU type:   Intel(R) Xeon(R) CPU E5645 @ 2.40GHz , 2 cores

    **ID        Owner       CPU  ↑  Command**   

    3119    mysql   87.8 %  /usr/sbin/mysqld
    5150    tomcat6     7.8 %   /usr/lib/jvm/java-6-openjdk/bin/java - Djava.util.logging.config.file=/var/lib/to ...
    6742    root    10.0 %  /usr/share/webmin/proc/index_cpu.cgi
    6754    root    0.0 %   ps --cols 2048 -eo user:80,ruser:80,group:80,rgroup:80,pid,ppid,pgid,pcpu,vsz,ni ...
    6753    root    0.0 %   sh -c ps --cols 2048 -eo user:80,ruser:80,group:80,rgroup:80,pid,ppid,pgid,pcpu, ...
    4971    www-data    0.0 %   /usr/sbin/apache2 -k start
    4950    www-data    0.0 %   /usr/sbin/apache2 -k start
    4949    www-data    0.0 %   /usr/sbin/apache2 -k start
    4947    root    0.0 %   /usr/sbin/apache2 -k start
    920     root    0.0 %   /sbin/getty -8 38400 tty1
    763     proftpd     0.0 %   proftpd: (accepting connections)
    733     root    0.0 %   /usr/bin/perl /usr/share/webmin/miniserv.pl /etc/webmin/miniserv.conf 
```

这是我们的 MySQL **“my.cnf”**文件

```
 [client]
    port        = 3306
    socket      = /var/run/mysqld/mysqld.sock
    [mysqld_safe]
    socket      = /var/run/mysqld/mysqld.sock
    nice        = 0
    [mysqld]
    user        = mysql
    socket      = /var/run/mysqld/mysqld.sock
    port        = 3306
    basedir     = /usr
    datadir     = /var/lib/mysql
    tmpdir      = /tmp/mysql
    skip-external-locking
    bind-address        = 127.0.0.1
    key_buffer      = 512M
    max_allowed_packet  = 128M
    thread_stack        = 192K
    thread_cache_size       = 8
    sort_buffer_size = 512M
    myisam-recover         = BACKUP
    max_connections        = 500
    table_cache            = 80
    query_cache_limit   = 512M
    query_cache_size        = 512M
    query-cache-type = 2
    log_error                = /var/log/mysql/error.log
    log_slow_queries    = /var/log/mysql/mysql-slow.log
    long_query_time = 2
    expire_logs_days    = 10
    max_binlog_size         = 100M
    read_buffer_size=64M
    read_rnd_buffer_size=64M
    myisam_sort_buffer_size=64M
    innodb_flush_log_at_trx_commit=2
    innodb_buffer_pool_size=700M
    innodb_additional_mem_pool_size=20M
    [mysqldump]
    quick
    quote-names
    max_allowed_packet  = 16M
    [mysql]
    [isamchk]
    key_buffer      = 16M
    !includedir /etc/mysql/conf.d/ 
```

这是我们在 tomcat server.xml 中的 Tomcat6 连接池设置

```
 <Resource name="jdbc/dbname" auth="Container" type="javax.sql.DataSource" 
                    initialSize ="5" maxActive ="25" minIdle ="5" maxIdle ="10" 
                    username="xxxxx" password="xxxx" driverClassName="com.mysql.jdbc.Driver" 
                    url="jdbc:mysql://localhost:3306/dbname" validationQuery="select 1"/> 
```

供参考..

目前，我们的生产应用程序超过 550 个用户，每个用户每 30 秒频繁调用一个 Web 服务。

我们的**服务器配置**：

```
 ***Operating system*** - Ubuntu Linux 11.10
    ***Kernel and CPU*** - Linux 3.0.0-14-virtual on x86_64
    ***Processor information*** - Intel(R) Xeon(R) CPU E5645 @ 2.40GHz, 2 cores
    ***CPU usage*** - 14% user, 1% kernel, 0% IO, 85% idle
    ***Real memory*** - 7.29 GB total, 4.84 GB used 
```

任何帮助表示赞赏。

# javascript - Node.js 在服务器运行时删除路由

> ID：15027514
> 
> 赞同：3
> 
> 时间：2013-02-22T15:27:53.027
> 
> 标签：javascript, node.js, express

目前我正在尝试在运行时删除 Node.js 服务器应用程序的路由。

```
for (k in self.app.routes.get) {
  if (self.app.routes.get[k].path + "" === route + "") {
    delete self.app.routes.get[k];
    break;
  }
} 
```

调用此方法后，self.app.routes 对象中不再有路由。但是在我尝试访问当前删除的路线后，我收到以下错误：

> TypeError：无法在Router.matchRequest（/var/lib/root/runtime/repo/node_modules/express/lib/router/index.js:205:17）调用未定义的方法“匹配”

由于 express.js 的文档，这必须是正确的方法。

> app.routes 对象包含由关联的 HTTP 谓词映射的所有路由。此对象可用于自省功能，例如 Express 在内部不仅将其用于路由，而且还提供默认的 OPTIONS 行为，除非使用 app.options()。您的应用程序或框架也可以通过简单地从该对象中删除路由来删除它们。

有没有人知道如何在 Node.js 中正确删除运行时的路由？

非常感谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-22T17:26:40.987

您得到的错误是因为路线仍然存在。`delete`不会删除元素，只会将元素设置为`undefined`. 要删除使用 splice(k,n) （从第 k 个元素，删除 n 项）

```
for (k in self.app.routes.get) {
  if (self.app.routes.get[k].path + "" === route + "") {
    self.app.routes.get.splice(k,1);
    break;
  }
} 
```

仍然你的路由函数应该处理这个（选择接受哪个路径/url），这会更好。

# lua - os.execute 不适用于 love2d

> ID：15027515
> 
> 赞同：0
> 
> 时间：2013-02-22T15:27:54.337
> 
> 标签：lua, shared-libraries

我正在尝试使用 os.execute()，但我遇到了这个问题：

```
attempt to call field 'execute' (a nil value) 
```

我已经完成了`os = require 'os'`，但是当我这样做时：`os.execute("mkdir" .. var)`它给了我上述错误。

从我的工作来看，这是因为它没有从 os 调用所有的东西，但是我已经看过了，但我不知道如何从 os 调用所有东西。在 python 中我会这样做，`from os import *`但我不知道 lua 的代码。我试过使用`package.loadlib('os', 'execute')`，但没有奏效。：/

编辑：我用love2D做了一个单独的测试，它奏效了。所以我不明白为什么这不起作用......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T16:39:12.167

您确定在问题脚本中没有覆盖/重新分配 os.execute 函数的代码吗？你有任何名为 os 的本地表对象吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-08T02:55:26.970

试试这个：

```
require 'os';
if package.loaded['os'] and type(package.loaded['os']) == "table" then
  local os = package.loaded['os'];
  --from here use the local os variable to call anything inside os.
  --main block of code
end 
```

我希望这对你有用。

# c# - C# 中的同步方法

> ID：15027522
> 
> 赞同：7
> 
> 时间：2013-02-22T15:28:07.380
> 
> 标签：c#, java, thread-safety, synchronized

将 Java 应用程序移植到 C# 的一部分是在 C# 中实现同步消息缓冲区。通过同步，我的意思是线程在其中写入和读取消息应该是安全的。

在 Java 中，这可以使用`synchronized`方法 和`wait()`和来解决`notifyAll()`。

例子：

```
public class MessageBuffer {
    // Shared resources up here

    public MessageBuffer() {
        // Initiating the shared resources
    }

    public synchronized void post(Object obj) {
        // Do stuff
        wait();
        // Do more stuff
        notifyAll();
        // Do even more stuff
    }

    public synchronized Object fetch() {
        // Do stuff
        wait();
        // Do more stuff
        notifyAll();
        // Do even more stuff and return the object
    }
} 
```

如何在 C# 中实现类似的功能？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-22T15:33:49.717

在 .NET 中，您可以使用`lock`- 语句，如

```
object oLock = new object();
lock(oLock){
  //do your stuff here
} 
```

您正在寻找的是互斥锁或事件。您可以使用`ManualResetEvent`-class 并使线程等待通过

```
ManualResetEvent mre = new ManualResetEvent(false);
...
mre.WaitOne(); 
```

另一个线程最终调用

```
mre.Set(); 
```

向另一个线程发出它可以继续的信号。

看[这里](http://msdn.microsoft.com/de-de/library/vstudio/system.threading.manualresetevent.aspx)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T15:32:53.833

试试这个：

```
using System.Runtime.CompilerServices;
using System.Threading;

public class MessageBuffer
{
    // Shared resources up here

    public MessageBuffer()
    {
        // Initiating the shared resources
    }

    [MethodImpl(MethodImplOptions.Synchronized)]
    public virtual void post(object obj)
    {
        // Do stuff
        Monitor.Wait(this);
        // Do more stuff
        Monitor.PulseAll(this);
        // Do even more stuff
    }

    [MethodImpl(MethodImplOptions.Synchronized)]
    public virtual object fetch()
    {
        // Do stuff
        Monitor.Wait(this);
        // Do more stuff
        Monitor.PulseAll(this);
        // Do even more stuff and return the object
    }
} 
```

# c++ - 如何使用openGL在窗口的左上角创建菜单

> ID：15027524
> 
> 赞同：1
> 
> 时间：2013-02-22T15:28:15.523
> 
> 标签：c++, opengl, glut

我正在用 openGL 和 windows 的 C++ 编写游戏。

我需要在窗口的左上角添加一些菜单和子菜单。

我已经在右键单击时看到了弹出菜单，但我希望菜单与 firefox 等任何程序一样。

我怎样才能做到这一点？

**编辑＃1：**

当按下人民币时，我添加了一个弹出菜单：

```
glutCreateMenu(MenuSelect);
glutAddMenuEntry("Option1Name", option1);
glutAddMenuEntry("Option2Name", option2);
glutAttachMenu(GLUT_RIGHT_BUTTON); 
```

并进入 MenuSelect 功能，我正在打印一些文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T16:09:56.560

You have at least two choices:

*   use some Windows API (or MFC), or QT, this will draw menus **on top** of OpenGL (using GDI, or other technology)
*   use some third party library that will draw GUI **in** OpenGL (using its rendering commands)

For the latter option and for simple GUI I suggest [http://www.antisphere.com/Wiki/tools:anttweakbar](http://www.antisphere.com/Wiki/tools:anttweakbar)

# c - mex 无法识别内联

> ID：15027525
> 
> 赞同：3
> 
> 时间：2013-02-22T15:28:16.537
> 
> 标签：c, matlab, gcc, mex

我正在尝试[为 libdc1394 编译一个 matlab 包装器，](https://sites.google.com/site/barryk/dc1394mex)这是一个用于火线相机的库。我收到一个奇怪的错误，涉及头文件中的一些内联函数。我正在使用 gcc-4.6 开发 ubuntu 12.04。我已经成功编译了其他 mex 文件。这个包装器也很难在 mac 中编译。

```
/usr/local/MATLAB/R2012b//bin/mex dc1394mex.c  `pkg-config --libs --cflags libdc1394-2` -o dc1394.mexa64

Warning: You are using gcc version "4.6.3-1ubuntu5)".  The version
         currently supported with MEX is "4.4.6".
         For a list of currently supported compilers see: 
         http://www.mathworks.com/support/compilers/current_release/

In file included from /usr/include/dc1394/dc1394.h:53:0,
                 from dc1394mex.c:23:
/usr/include/dc1394/register.h:47:1: error: unknown type name ‘inline’
/usr/include/dc1394/register.h:47:29: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘dc1394_get_register’
/usr/include/dc1394/register.h:62:1: error: unknown type name ‘inline’
/usr/include/dc1394/register.h:62:29: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘dc1394_set_register’
/usr/include/dc1394/register.h:82:1: error: unknown type name ‘inline’
/usr/include/dc1394/register.h:82:29: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘dc1394_get_control_register’
/usr/include/dc1394/register.h:97:1: error: unknown type name ‘inline’
/usr/include/dc1394/register.h:97:29: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘dc1394_set_control_register’
/usr/include/dc1394/register.h:117:1: error: unknown type name ‘inline’
/usr/include/dc1394/register.h:118:1: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘dc1394_get_adv_control_register’
/usr/include/dc1394/register.h:133:1: error: unknown type name ‘inline’
/usr/include/dc1394/register.h:134:1: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘dc1394_set_adv_control_register’
dc1394mex.c: In function ‘command_init_camera’:
dc1394mex.c:133:12: warning: cast from pointer to integer of different size [-Wpointer-to-int-cast]
dc1394mex.c:152:12: warning: cast from pointer to integer of different size [-Wpointer-to-int-cast]
dc1394mex.c: In function ‘dcframe_to_mxframe’:
dc1394mex.c:571:1: error: expected expression before ‘/’ token
dc1394mex.c:572:1: error: expected expression before ‘/’ token
dc1394mex.c:573:1: error: expected expression before ‘/’ token

    mex: compile of ' "dc1394mex.c"' failed.

make: *** [dc1394.mexa64] Error 1 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T16:27:08.897

好吧，西蒙斯的提议是正确的。我不知道的唯一问题是您不能将 cflags 直接提供给 mex。您必须更改您的 mexopts.sh 文件。我还必须删除 -ansi 标志，因为它与 c99 相矛盾。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-06T21:44:47.623

如何在命令行中通过 CFLAGS 修改指定 C99：

```
mex -v -largeArrayDims CFLAGS="\$CFLAGS -std=C99" dc1394mex.c 
```

# xml - XSLT 迭代子节点

> ID：15027528
> 
> 赞同：2
> 
> 时间：2013-02-22T15:28:19.950
> 
> 标签：xml, xslt, xslt-1.0

这似乎很简单，但我似乎无法让它工作。

我的 xml 看起来像这样：

```
<bsar:BSAForm>
    <bsar:SubjectInformation>
        <bsar:LastNameOrNameOfEntity> Obama</bsar:LastNameOrNameOfEntity>
        <bsar:AddressBlock>
            <ucc:Address> 9 Dale Rd</ucc:Address>
            <ucc:City> Woodbury</ucc:City>
        </bsar:AddressBlock>
        <bsar:AddressBlock>
            <ucc:Address> 123 Fake St</ucc:Address>
            <ucc:City> Springfield</ucc:City>
        </bsar:AddressBlock>
    </bsar:SubjectInformation>
</bsar:BSAForm> 
```

我需要遍历这两个元素并显示内容。我的 XSLT 看起来像这样：

```
<xsl:template match=/bsar:BSAForm">
     <xsl:apply-templates select="bsar:SubjectInformation"/>
</xsl:template>

<xsl:template match="bsar:SubjectInformation">
    <xsl:text xml:space="preserve">4A</xsl:text>
    <xsl:text xml:space="preserve">00001</xsl:text>
    <xsl:value-of select="bsar:LastNameOrNameOfEntity"/>
    <xsl:value-of select="'&#xD;&#xA;'"/> <!-- new line -->

    <xsl:apply-templates select="bsar:AddressBlock"/>
</xsl:template>

<xsl:template match="bsar:AddressBlock">

    <xsl:variable name="Addr" select="../bsar:AddressBlock"/>

    <xsl:text xml:space="preserve">4B</xsl:text>
    <xsl:text xml:space="preserve">00001</xsl:text>
    <xsl:value-of select="$Addr/ucc:Address"/>
    <xsl:value-of select="$Addr/ucc:City"/>
    <xsl:value-of select="'&#xD;&#xA;'"/> <!-- new line -->
</xsl:template> 
```

输出应如下所示：

```
4A 00001 Obama
4B 9 Dale Rd Woodbury
4B 123 Fake St Springfield 
```

但相反，输出是这样的：

```
4A 00001 Obama
4B 9 Dale Rd Woodbury
4B 9 Dale Rd Woodbury 
```

我尝试了许多不同的方法来做到这一点，使用一个 for each，使用一个 for each 像这样：

```
 <xsl:variable name="header" select="."/>
 <xsl:for-each select="following-sibling::bsar:TelephoneBlock[ancestor::bsar:SubjectInformation[1] = $header]"> 
```

甚至从 for 循环中传入一个计数器并使用它来访问指定的元素，如下所示：

```
<xsl:for-each select="bsar:TelephoneBlock">
    <xsl:variable name="Index">
        <xsl:number count="bsar:TelephoneBlock" />
    </xsl:variable>

    <xsl:call-template name="SubjectPhone">
        <xsl:with-param name="$Index"/>
    </xsl:call-template>
</xsl:for-each>

<xsl:template name="SubjectPhone">
    <xsl:param name="Index"/>

    <xsl:variable name="Telephone" select="../bsar:TelephoneBlock[$Index]"/>
    ...
</xsl:template> 
```

在所有这些情况下，它都会显示第一个地址两次。如果您发现我做错了什么，请告诉我。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T15:37:50.403

```
<xsl:variable name="Addr" select="../bsar:AddressBlock"/> 
```

模板内部`bsar:AddressBlock`会将`Addr`变量设置为一个节点集，该节点集包含当前元素的父元素下的*所有*`bsar:AddressBlock`元素，即当前的 AddressBlock 及其所有兄弟 AddressBlock 元素。当你后来

```
<xsl:value-of select="$Addr/ucc:Address"/> 
```

这将选择一个包含所有`ucc:Address`AddressBlock 元素的所有子元素的节点集`$Addr`，然后将文档顺序中的*第一个*此类元素转换为其字符串值（XPath 1.0 中节点集的“字符串值”定义为字符串值的第一个节点）。这将始终是`ucc:Address`第一个地址块中的第一个，这就是为什么您会看到两次相同的地址。

但是这个变量是不必要的，因为你在一个模板中，一次适用于一个 AddressBlock - 只要说

```
<xsl:template match="bsar:AddressBlock">
    <xsl:text>4B</xsl:text>
    <xsl:text>00001</xsl:text>
    <xsl:value-of select="ucc:Address"/>
    <xsl:value-of select="ucc:City"/>
    <xsl:value-of select="'&#xD;&#xA;'"/> <!-- new line -->
</xsl:template> 
```

`select`表达式将与当前的 AddressBlock 相关，并将具体提取其 Address 和 City，并生成

```
4A00001 Obama
4B00001 9 Dale Rd Woodbury
4B00001 123 Fake St Springfield 
```

这确实依赖于这样一个事实，即原始 XML 中每个 Address 和 City 值的开头都有一个前导空格，您可能更喜欢这样说

```
<xsl:template match="bsar:AddressBlock">
    <xsl:text>4B </xsl:text>
    <xsl:text>00001 </xsl:text>
    <xsl:value-of select="normalize-space(ucc:Address)"/>
    <xsl:text> </xsl:text>
    <xsl:value-of select="normalize-space(ucc:City)"/>
    <xsl:value-of select="'&#xD;&#xA;'"/> <!-- new line -->
</xsl:template> 
```

（请注意，这`xml:space="preserve"`是默认设置，`<xsl:text>`因此您无需明确指定）

# optimization - 与 clang+llvm 链接时出错

> ID：15027529
> 
> 赞同：1
> 
> 时间：2013-02-22T15:28:27.410
> 
> 标签：optimization, llvm, clang

我正在尝试将 LLVM 优化应用于已使用 openCV 实现的一些图像特征提取算法。基于 LLVM 的分析器适用于简单的程序（例如 HelloWorld），并且特征提取算法也可以按预期单独工作。但是，我无法将分析器用于算法，并且在将 OpenCV 库链接到优化代码时出现以下错误。

```
gcc version 4.6.3 (Ubuntu/Linaro 4.6.3-1ubuntu5) 
COLLECT_GCC_OPTIONS='-v' '-g' '-L/home/silky/opencv/share/OpenCV/3rdparty/lib' '-  L/home/silky/opencv/OpenCVInstall/x86/lib' '-shared-libgcc' '-mtune=generic' '-march=x86-64' as --gdwarf2 --64 -o /tmp/ccAhPffW.o out.s
COMPILER_PATH=/usr/lib/gcc/x86_64-linux-gnu/4.6/:/usr/lib/gcc/x86_64-linux-gnu/4.6/:/usr/lib/gcc/x86_64-linux-gnu/:/usr/lib/gcc/x86_64-linux-gnu/4.6/:/usr/lib/gcc/x86_64-linux-gnu/
LIBRARY_PATH=/usr/lib/gcc/x86_64-linux-gnu/4.6/:/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu/:/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../../lib/:/lib/x86_64-linux-gnu/:/lib/../lib/:/usr/lib/x86_64-linux-gnu/:/usr/lib/../lib/:/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../:/lib/:/usr/lib/
COLLECT_GCC_OPTIONS='-v' '-g' '-L/home/silky/opencv/share/OpenCV/3rdparty/lib' '-L/home/silky/opencv/OpenCVInstall/x86/lib' '-shared-libgcc' '-mtune=generic' '-march=x86-64'
/usr/lib/gcc/x86_64-linux-gnu/4.6/collect2 --sysroot=/ --build-id --no-add-needed --as-needed --eh-frame-hdr -m elf_x86_64 --hash-style=gnu -dynamic-linker /lib64/ld-linux-x86-64.so.2 -z relro /usr/lib/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu/crt1.o /usr/lib/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu/crti.o /usr/lib/gcc/x86_64-linux-gnu/4.6/crtbegin.o -L/home/silky/opencv/share/OpenCV/3rdparty/lib -L/home/silky/opencv/OpenCVInstall/x86/lib -L/usr/lib/gcc/x86_64-linux-gnu/4.6 -L/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu -L/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../../lib -L/lib/x86_64-linux-gnu -L/lib/../lib -L/usr/lib/x86_64-linux-gnu -L/usr/lib/../lib -L/usr/lib/gcc/x86_64-linux-gnu/4.6/../../.. /tmp/ccAhPffW.o -lpthread -lrt -lopencv_calib3d -lopencv_core -lopencv_features2d -lopencv_flann -lopencv_highgui -lopencv_imgproc -lopencv_ml -lopencv_objdetect -lopencv_video -lopencv_nonfree -lstdc++ -lm -lgcc_s -lgcc -lc -lgcc_s -lgcc /usr/lib/gcc/x86_64-linux-gnu/4.6/crtend.o /usr/lib/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu/crtn.o
/tmp/ccAhPffW.o:(.debug_info+0x49a14): undefined reference to `.Lline_table_start1'
collect2: ld returned 1 exit status 
```

我使用以下命令来编译和链接文件。

```
clang -emit-llvm -c -Wall -g  -O0  -DCLOCK_GETTIME_TIMING -DOPENCV_2_4  -I/home/opencv/OpenCVInstall/x86/include -o ThreadManager.bc FeatureExtraction/ThreadManager.cpp
clang -emit-llvm -c -Wall -g  -O0  -DCLOCK_GETTIME_TIMING -DOPENCV_2_4 -I/home/opencv/OpenCVInstall/x86/include -o FeatureExtraction.bc FeatureExtraction/FeatureExtraction.cpp

llvm-link  FeatureExtraction.bc ThreadManager.bc -o FE.bc
clang $CFLAGS -o profiler.o cacheSim.cpp //LLVM profiler
opt -load /home/llvm/llvm/Debug+Asserts/lib/cacheProf.so -cacheProf FE.bc>out.bc

llc FE.bc -o out.s
g++ -v -g  out.s  profiler.o -L/home/opencv/share/OpenCV/3rdparty/lib -L/home/opencv/OpenCVInstall/x86/lib  -lpthread -lrt -lopencv_calib3d -lopencv_core -lopencv_features2d -lopencv_flann -lopencv_highgui -lopencv_imgproc -lopencv_ml -lopencv_objdetect -lopencv_video -lopencv_nonfree 
```

如果我链接文件或以错误的方式加载文件，有人可以告诉我吗？clang 编译与 g++ 的工作方式不同吗？

# ruby - 在 ruby 中存储单个键的常用方法

> ID：15027531
> 
> 赞同：1
> 
> 时间：2013-02-22T15:28:36.583
> 
> 标签：ruby, hash

目前，我的 ruby​​ 代码中有一组键，它们存储在哈希对象中。当我添加新元素时，我只是检查该键是否已经存在，如果不存在，则使用一些默认值将新键添加到我的集合中，如下所示：

```
unless @issues.has_key?(issue_id)
   @issues[issue_id] = '';
end 
```

但我不喜欢这种方法。是否有可能在不使用不必要的价值的情况下做得更好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T16:14:03.903

### 使用[`Set`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/set/rdoc/Set.html).

集合是唯一对象的集合（无重复）。

```
# @issues = Set.new

unless @issues.include?(issue_id)
  @issues << issue_id
end 
```

实际上，它们的哈希键是一个集合（尽管不一定通过 Set 类实现）。

**[编辑]**请注意，如果您要存储复杂的对象（例如，不是数字、字符串、符号等内置对象），您需要同时覆盖[`hash`方法](http://ruby-doc.org/core-1.9.3/Object.html#method-i-hash)和[`eql?`方法](http://ruby-doc.org/core-1.9.3/Object.html#method-i-eql-3F)，以便它们可以正确地散列。如果您使用复杂对象作为散列键，情况也是如此。

```
class Foo
  attr_read :name, :hash
  def initialize(name)
    @name = name
    @hash = name.hash
  end
  def eql?(o)
    o.is_a?(Foo) && (o.name == self.name)
  end
end

s = Set.new
s << Foo.new("Foo!")
s << Foo.new("Foo!")
s.to_a # => [ #<Foo:0x0123 @name="Foo!"> ] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T16:27:47.143

您可以使用哈希的默认值

```
h = Hash.new("")
h[issue_id] => "" 
```

# bitmap - 在 Arduino 上绘制 XBM 位图

> ID：15027533
> 
> 赞同：0
> 
> 时间：2013-02-22T15:28:37.647
> 
> 标签：bitmap, arduino, bit-manipulation, avr

我正在尝试在 Arduino 上解析 XBM 位图，但一点运气都没有（期望 <16x16 位图）。经过大量搜索，研究和修补，我想出了这个功能。我确定我正在正确读取字节（经过测试），但是转换有问题。

```
void bitmap(int x, int y, uint16_t *bitmap, uint8_t w, uint8_t h) {
  uint16_t dots, msb;
  uint16_t col, row;

  msb = 1 << (w - 1);
  for (row = 0; row < h; row++) {
    dots = pgm_read_word(bitmap + row);
    //Serial.print(dots, HEX);
    //Serial.println(" ");
    for (col = 0; col < w; col++) {
      if (dots & (msb >> col))
        Serial.print("#"); //toolbox.setPixel(x, y, 1, false);
      else
        Serial.print("'"); //toolbox.setPixel(x, y, 0, false);
    }
    Serial.println("");
  }
} 
```

这是我要显示的位图。它的大小为 32x32 像素。正确显示 16x16 或更小的图像。

```
// 32x32
uint16_t medium[] PROGMEM = {
  0xffff, 0xffff, 0x0000, 0x8000, 0xffff, 0xffff, 0x0001, 0x0000, 0xffff,
  0xffff, 0x0000, 0x8000, 0xffff, 0xffff, 0x0001, 0x0000, 0xffff, 0xffff,
  0x0000, 0x8000, 0xffff, 0xffff, 0x0001, 0x0000, 0xffff, 0xffff, 0x0000,
  0x8000, 0xffff, 0xffff, 0x0001, 0x0000, 0xffff, 0xffff, 0x0000, 0x8000,
  0xffff, 0xffff, 0x0001, 0x0000, 0xffff, 0xffff, 0x0000, 0x8000, 0xffff,
  0xffff, 0x0001, 0x0000, 0xffff, 0xffff, 0x0000, 0x8000, 0xffff, 0xffff,
  0x0001, 0x0000, 0xffff, 0xffff, 0x0000, 0x8000, 0xffff, 0xffff, 0x0001,
  0x0000 }; 
```

这是位图的PNG供参考：![](../Images/06587cd0fc2a83d1e27b344534424ec7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:13:27.073

```
msb = 1 << (w - 1);
[snip]
if (dots & (msb >> col)) 
```

此逻辑仅在`w`小于 16 时才有效。

编辑：回应评论。

实际上，这是需要修复的部分。确实，您将使用 uint16_t，但您需要找到一种方法将 16 位整数转换为位流。现在，它仅在行正好为 16 位宽时才有效。

我会做一些事情来从流中获取下一点。我会使用一个变量来跟踪我在当前单词中的位置，然后在需要时使用另一个变量获取下一个单词。

```
void bitmap(int x, int y, uint16_t *bitmap, uint8_t w, uint8_t h) {
  uint16_t dots = 0, current_mask = 0;
  uint16_t col, row, next_word = 0;

  for (row = 0; row < h; row++) {
    for (col = 0; col < w; col++) {
      current_mask >>= 1;
      if (0 == current_mask) {
          current_mask = 1 << 15;
          dots = pgm_read_word(bitmap + next_word);
          ++next_word;
      }

      if (dots & current_mask)
        Serial.print("#"); //toolbox.setPixel(x, y, 1, false);
      else
        Serial.print("'"); //toolbox.setPixel(x, y, 0, false);

    }
    Serial.println("");
  }
} 
```

我还没有尝试过，并且有一些关于索引内存和位移的细节。祝你好运。

# jquery - Bootstrap Collapse force 展开全部

> ID：15027535
> 
> 赞同：3
> 
> 时间：2013-02-22T15:28:45.850
> 
> 标签：jquery, twitter-bootstrap, collapse

我有一堆不同的部分，它们有自己的折叠元素。我已经实现了 jquery 来展开和折叠它们。

jQuery：

```
$('.collapse').each(function (index) {
    $(this).collapse("toggle");
}); 
```

HTML 片段：

```
<ul class="nav nav-tabs">
    <li class="active" id="General"><a href="#">General</a></li>
</ul>
<div class="tab-content">
    <div class="tab-pane active">                                                                                                                                                                             
        <div class="accordion" id="accordion2">                                                
            <div class="accordion-group">
                <div class="accordion-heading">
                    <a class="accordion-toggle" data-toggle="collapse" data-parent="#generalQuestions" href="#collapseFour">Q. Can I choose my own Username and Password?</a>
                </div>
                <div id="collapseFour" class="accordion-body collapse">
                    <div class="accordion-inner">A. Yes, you can choose your own Username and Password.  We suggest using your email address for your Username, but any username that is between 8 and 20 characters long could be used.  A secure Password should be 8 to 20 characters long, with no spaces, and contains at least one special character.  </div>
                </div>
            </div>
            <div class="accordion-group">
                <div class="accordion-heading">
                    <a class="accordion-toggle" data-toggle="collapse" data-parent="#generalQuestions" href="#collapseFive">Q. Can I update by email address online?</a>
                </div>
                <div id="collapseFive" class="accordion-body collapse">
                    <div class="accordion-inner">A. Yes, but I have no idea how right now.  </div>
                </div>
            </div>
        </div>
    <a href="#top" class="btn btn-mini top"><i class="icon-arrow-up"></i> Back To Top</a>
</div> 
```

[http://jsfiddle.net/RmK2h/](http://jsfiddle.net/RmK2h/)

我遇到了几个不同的问题。

1.  在 Internet Explorer 中，该功能仅在第二次单击时有效，并且非常跳跃。在第二次单击时，按钮文本不正确。
2.  如果我打开其中一个元素，然后单击展开按钮，所有元素都会展开，但最初打开的元素除外，它会折叠。本质上，该`.collapse("toggle")`功能只是将模式更改为打开或关闭，它不关心它已经处于的状态。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T16:31:12.720

看起来 IE 问题是 Bootstrap 的问题。从谷歌搜索一下，看起来`collapse`功能在其他版本中都以某种形式中断。因此，除非您使用该功能以外的其他东西，否则`collapse`我不确定您是否能够解决该问题。我在 IE 中修复了它（展开/折叠按钮不再不同步）并用这段代码修复了你的第二个问题：

```
$('.expandcollapse').click(function () {
    if ($(this).html() == "<i class=\"icon-white icon-plus-sign\"></i> Expand All") {
        $('.collapse:not(.in)').each(function (index) {
            $(this).collapse("toggle");
        });
        $(this).html("<i class=\"icon-white icon-minus-sign\"></i> Collapse All");
    }
    else {
        $('.collapse.in').each(function (index) {
            $(this).collapse("toggle");
        });
        $(this).html("<i class=\"icon-white icon-plus-sign\"></i> Expand All");
    };
}); 
```

[小提琴](http://jsfiddle.net/cC3ys/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-01T11:11:12.120

[Samsquanch 的解决方案](https://stackoverflow.com/questions/15027535/bootstrap-collapse-force-expand-all/15028834#15028834)可以正常工作，但在我的情况下，我仍然`collapse`偶尔会不同步。

原因是数据属性`data-parent="#selector"`与想要的`"expand all"`行为相冲突。Bootstrap 文档指出：

> 要将手风琴式的组管理添加到可折叠控件，请添加 data 属性`data-parent="#selector"`。

因此，当`"expand all"`需要功能时，最好在扩展之前保留该数据属性或将其删除。

# c# - 使用 Thread 刷新进度条 UI

> ID：15027536
> 
> 赞同：0
> 
> 时间：2013-02-22T15:28:48.637
> 
> 标签：c#

我有一个在没有 UI 的情况下运行的 FTP 进程。并有一个使用此 ftp 控件的 winform。在那个窗口中，我有一个显示 ftp 上传进度的进度条。进度通过在底层演示者上更新的接口到达窗口（我正在使用 MVP 模式）。

我的问题是当尝试更新进度时，它总是抛出这个异常。

通过线程非法操作：控制“prgProgresoSubido”是从您创建它的线程以外的线程访问的。

即使我在表单中使用 BackGroundWorker，该问题仍然存在。

```
 // This is  a delegated on presenter when a File finish to upload
    void client_FileUploadCompletedHandler(object sender, FileUploadCompletedEventArgs e)
    {
        string log = string.Format("{0} Upload from {1} to {2} is completed. Length: {3}. ",
            DateTime.Now, e.LocalFile.FullName, e.ServerPath, e.LocalFile.Length);

        archivosSubidos += 1;
        _Publicacion.ProgresoSubida = (int)((archivosSubidos / archivosXSubir) * 100);
        //this.lstLog.Items.Add(log);
        //this.lstLog.SelectedIndex = this.lstLog.Items.Count - 1;
    }

    // This is My interfase 

public interface IPublicacion
{
    ...
    int ProgresoSubida { set; } 
}

/// And Here is the implementartion of the interfase on the form

public partial class PublicarForm : Form ,IPublicacion 
{
    //Credenciales para conectarse al servicio FTP 
    public FTPClientManager client = null;
    public XmlDocument conf = new XmlDocument();
    public string workingDir = null;
    public webTalk wt = new webTalk();
    private readonly PublicacionesWebBL _Publicador;

    public PublicarForm()
    {
        InitializeComponent();

        String[] laPath = { System.AppDomain.CurrentDomain.BaseDirectory};
        String lcPath = System.IO.Path.Combine(laPath);

        _Publicador = new PublicacionesWebBL(this, lcPath);
    }

    public int ProgresoSubida
    {
        set
        {
            //  This is my prograss bar, here it throw the exception.
            prgProgresoSubido.Value = value;
        }
    }
} 
```

我该怎么做才能避免这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T15:32:46.520

通常，用户界面和控件的所有更新都必须从主线程（事件调度程序）完成。如果您尝试从不同的线程修改控件的属性，您将得到一个异常。

您必须调用 Control.Invoke 以在事件调度程序上调用更新 UI 的方法

[控制调用](http://msdn.microsoft.com/en-us/library/zyzhdc6b.aspx)

在这里，在表单上放置一个按钮和一个标签，然后试试这个

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        Thread t = new Thread(new ThreadStart(TestThread));
        t.Start();
    }

    private void TestThread()
    {
        for (int i = 0; i < 10; i++)
        {
            UpdateCounter(i);
            Thread.Sleep(1000);
        }
    }

    private void UpdateCounter(int i)
    {

        if (label1.InvokeRequired)
        {
            label1.Invoke(new ThreadStart(delegate { UpdateCounter(i); }));
        }
        else
        {
            label1.Text = i.ToString();
        }
    }
} 
```

意识到，如果你从一个线程触发一个事件，那么该事件将在同一个线程上。因此，如果该线程不是事件分派器，则需要调用。

此外，BackgroundWorker 可能会为您提供一些机制（正如评论员所说），可以为您简化此操作，但我以前从未使用过它，所以我将把它留给您进行调查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T15:49:08.750

正如 Alan 刚刚指出的，您必须在 UI 线程中使用 UI 控件执行所有操作。

只需像这样修改您的属性：

```
public int ProgresoSubida
{
    set
    {
        MethodInvoker invoker = delegate
                                {
                                    prgProgresoSubido.Value = value;
                                }
        if (this.InvokeRequired)
        {
            Invoke(invoker);
        }
        else
        {
            invoker();
        }

    }
} 
```

# asp.net - 如何使 asp.net 网络表单应用程序更快？

> ID：15027540
> 
> 赞同：1
> 
> 时间：2013-02-22T15:28:58.207
> 
> 标签：asp.net, performance, optimization

我的最后一个项目是一个中等大小的 asp.net 网络表单应用程序。它是使用以下方法构建的：

*   ASP.NET 3.5
*   ling to sql dbml --> sql server 数据库（9 个表）
*   ext.net 1.6 (www.ext.net)
*   结构图 2.5.3.0

这一次我相信我在架构设计、代码和数据传输优化方面已经做到了最好。我遵循了所有可以通过 linq to sql 有效地使用数据库的建议，并构建了层（模型、存储库、服务、表示）来分离关注点并轻量化文件背后的 aspx 代码中的代码。

问题是：我已经在各种网络托管服务器中安装了应用程序，但结果却是一样的可怜：应用程序正在努力工作......页面加载就像慢动作......

过去我会说“好吧，我没有尽我所能加快速度”，但在这种情况下，我真的尝试应用最佳实践......

我还能做些什么吗？还是仅适用于非常小的项目的 asp.net？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T15:40:07.937

ASP.NET 非常适合构建大型网站。正如 Brad 提到的，StackExchange 站点是使用它构建的，而 StackOverflow 确实是一个非常繁忙的站点。

您首先需要做的是衡量绩效；在你这样做之前，你只是在猜测问题区域在哪里。

因此，从浏览器开始 - 使用[Firebug](http://getfirebug.com/)或[YSLOW](http://yslow.org/)等工具、Google Chrome 开发工具，无论您喜欢什么，并使用启用的工具运行您的网站。这些工具可以让您知道处理请求需要多长时间，下载内容需要多长时间等。

YSLOW 也会给你一些关于它发现有点慢的提示，例如你正在处理许多 HTTP 请求，你应该考虑缩小你的 CSS/JS 文件。您将大致了解网站的运行情况以及可能出现的问题。

要深入挖掘，请使用 RedGate 的[ANTS Profiler](http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/)之类的工具，使用试用版并使用该工具测量您的网站和服务器端代码。还有其他工具，尽管我不知道有任何免费工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-19T08:28:01.543

我的第一个问题是它什么时候慢。您是否在局域网中尝试过您的项目。请先检查那里。如果速度慢那么你需要改进一点。这种缓慢的性能取决于许多因素，例如大数据负载、一页上的多个逻辑等。

请告诉我。

谢谢巴斯特。

# android - 持久存储游戏分数 AIR for Android

> ID：15027543
> 
> 赞同：0
> 
> 时间：2013-02-22T15:29:24.243
> 
> 标签：android, air

我需要存储用户的游戏分数。我看到了这个帖子' [Persistant storage AIR for Mobile](https://stackoverflow.com/questions/6038691/persistant-storage-air-for-mobile) '

但仍然不确定以下方法的
优缺点 - 存储到文件 -
本地共享对象-
加密本地存储
-sqlite

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T23:26:21.373

我会选择本地共享对象。它易于使用，您的游戏分数可能不会超过大小限制。以下是不同方法的一些优缺点：

## 文件

优点：没有大小限制
缺点：您必须创建自己的文件格式来存储数据

## 本地共享对象

优点：非常易于使用，您可以存储任意 Actionscript 对象
缺点：大小限制为 100KB

## 加密本地存储

优点：安全存储敏感数据，如用户密码
缺点：速度慢，只能存储 ByteArrays

## SQLite

优点：可以高效查询的 SQL 数据库
缺点：必须设计数据库模式，API 很麻烦

# prestashop - 后台中的 Prestashop 自定义选项卡

> ID：15027548
> 
> 赞同：2
> 
> 时间：2013-02-22T15:29:46.300
> 
> 标签：prestashop, prestashop-1.5

我正在为 prestashop 1.5.3 开发一个模块。我需要在模块安装期间创建一个自定义管理选项卡。我这样安装

```
public function install()
{
    if( (parent::install() == false)||(!$this->_createTab())  )
        return false;
    return true;
} 
```

_createTab 方法是：

```
private function _createTab()
{
    $tab = new Tab();
    $tab->id_parent = 7; // Modules tab
    $tab->class_name='AdminWarranty';
    $tab->module='fruitwarranty';
    $tab->name[(int)(Configuration::get('PS_LANG_DEFAULT'))] = $this->l('Warranty');
    $tab->active=1;
        if(!$tab->save()) return false;
return true;
} 
```

什么也没有发生..我做错了什么..以及在哪里可以找到好的 prestashop 开发人员参考.?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T15:34:49.030

要在安装期间为模块创建自定义选项卡，您可以使用以下代码。

**注意：我正在考虑一个名为 News 的测试模块。**

```
private function _createTab()
{
    /* define data array for the tab  */
    $data = array(
                  'id_tab' => '', 
                  'id_parent' => 7, 
                  'class_name' => 'AdminNews', 
                  'module' => 'news', 
                  'position' => 1, 'active' => 1 
                 );

    /* Insert the data to the tab table*/
    $res = Db::getInstance()->insert('tab', $data);

    //Get last insert id from db which will be the new tab id
    $id_tab = Db::getInstance()->Insert_ID();

   //Define tab multi language data
    $data_lang = array(
                     'id_tab' => $id_tab, 
                     'id_lang' => Configuration::get('PS_LANG_DEFAULT'),
                     'name' => 'News'
                     );

    // Now insert the tab lang data
    $res &= Db::getInstance()->insert('tab_lang', $data_lang);

    return true;

} /* End of createTab*/ 
```

我希望上面的代码会有所帮助谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-26T07:29:45.737

好吧，我自己正在开发一个 PrestaShop 模块，所以以防有人登陆这里，正确的方法。

对于根标签：

```
$rootTab = new Tab();
$rootTab->active = 1;
$rootTab->class_name = 'YourAdminControllerName';
$rootTab->name = array();
foreach (Language::getLanguages(true) as $lang) {
    $rootTab->name[$lang['id_lang']] = $this->l("Root tab");
}
$rootTab->id_parent = 0; // No parent
$rootTab->module = $this->name;
$rootTab->add(); 
```

**1.5 版注意事项：**创建根标签时，系统会在您的模块文件夹中查找 YourAdminControllerName.gif 作为标签图标。另请注意，根选项卡不能用作链接，尽管它们需要类名。

对于非根标签：

```
$tab = new Tab();
$tab->active = 1;
$tab->class_name = 'YourAdminControllerName';
$tab->name = array();
foreach (Language::getLanguages(true) as $lang) {
    $tab->name[$lang['id_lang']] = $this->l("Non-root tab");
}
$tab->id_parent = $rootTab->id; // Set the root tab we just created as parent
$tab->module = $this->name;
$tab->add(); 
```

如果要将现有选项卡设置为父选项卡，可以使用 getIdFromClassName 函数。例如，在您的情况下：

```
$tab->id_parent = (int)Tab::getIdFromClassName('AdminModules'); 
```

如果 add() 函数失败，则返回 false，因此您可以在 if() 中使用它，就像您尝试使用 save() 函数一样。

可悲的是，PrestaShop 是迄今为止我不得不使用的记录最差的 CMS 系统，真正为它编写代码的唯一方法是阅读代码，所以我希望它对某人有所帮助。

# python - 使列表框大于默认值？

> ID：15027555
> 
> 赞同：0
> 
> 时间：2013-02-22T15:30:07.593
> 
> 标签：python, tkinter

我只是想知道如何使列表框大于它输入的原始大小。

这可能很简单，但我找不到如何去做。

我的代码如下：

```
frame_1 = Frame(myGUI)
frame_1.place(x=75, y=300)
scrollbar = Scrollbar(frame_1)
scrollbar.pack(side=RIGHT, fill=Y)
listbox_1 = Listbox(frame_1, yscrollcommand=scrollbar.set)
listbox_1.pack()
scrollbar.config(command=listbox_1.yview) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T15:38:12.270

您应该能够通过为 设置适当的值来更改它`listbox_1`，即：

```
listbox_1['height'] = something
listbox_1['width'] = something_else 
```

或者，通过使用[config](http://effbot.org/tkinterbook/listbox.htm#Tkinter.Listbox.config-method)方法：

```
listbox_1.config(width=100, height=200) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-12T15:09:16.300

或者就在您第一次设置列表时，您可以设置高度和宽度。

# ruby - ruby 的 openssl 库中的 sync_close

> ID：15027567
> 
> 赞同：5
> 
> 时间：2013-02-22T15:30:26.643
> 
> 标签：ruby, ssl, openssl

[我想知道OpenSSL::SSL::SSLSocket](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/openssl/rdoc/OpenSSL/SSL/SSLSocket.html)中的属性是`sync_close`什么。它说它没有记录在rdoc中。我可以在很多代码片段中看到它，但我看不到它的用法。它是干什么用的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T10:07:05.390

首先打开一个套接字，即tcp，然后创建SSL 层。sync_close 使得原始套接字和加密层都关闭在一起。

# c# - 监控 ADO.NET 连接打开时间

> ID：15027574
> 
> 赞同：7
> 
> 时间：2013-02-22T15:30:39.060
> 
> 标签：c#, wcf, ado.net, perfmon, connection-timeout

我们有一个带有 C# 客户端、C# WCF Web 服务层和 SQL Server 数据库的 3 层应用程序。Web 服务使用 ADO.NET 连接到数据库。我们所有的 C# 代码都使用 .NET Framework 2.0。

最近，一位客户对我们的应用程序进行了压力测试。在测试过程中，Web 服务器产生了很多错误，如下所示：

> 无法连接到数据库以获取连接字符串“...”。超时已过。在操作完成之前超时时间已过或服务器没有响应。

我知道有一些方法可以在连接池已满时捕获连接错误并尝试在连接池之外获取连接。我们还发现了几个需要调整的查询，但它们没有解释 Web 服务器连接超时。

我们试图找出 Web 服务器连接数据库超时的原因。我已设置 Web 服务器以启用所有[ADO.NET 性能计数器](http://msdn.microsoft.com/en-us/library/ms254503%28v=vs.80%29.aspx)。但是，我没有看到与连接所需的时间或连接超时等相关的任何内容。理想情况下，我们将能够`perfmon`在其他 ADO.NET 计数器旁边绘制连接时间图。

有没有办法监控 ADO.NET 在获取连接时的性能？

我想我们可以通过定时尝试打开连接来创建自己的“平均连接打开时间”性能计数器，但我宁愿使用已经存在的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T16:46:23.190

您可以使用`perfmon`来获取此信息。您需要`User Connections`在`SQL Server: General Statistics`. 这是我从中获取[的博客文章。](http://www.wduffy.co.uk/blog/monitoring-database-connections/)这将让您知道连接在什么时间点保持打开状态。

然后，您需要将其与应用程序任务相关联（即，当您看到它们不断攀升时，您在应用程序中所做的事情）。

完成后，如果您还没有，您将希望在`using`语句中获取这些连接：

```
using (SqlConnection cn = new SqlConnection("some connection string"))
{
    cn.Open();
    ...
} 
```

通过这样做，您将不需要发出 a`Close`并且您不必担心它们会被正确处理。

简而言之，性能计数器应该可以帮助您跟踪导致问题的应用程序中的代码，但它不会归结为每条线，即使从那里也需要更多的努力。

# node.js - 如何使用 Gently 对模块未立即公开的对象的方法进行存根？

> ID：15027575
> 
> 赞同：0
> 
> 时间：2013-02-22T15:30:44.880
> 
> 标签：node.js, unit-testing, stubbing

我正在使用适用于 NodeJS 的[AWS](https://github.com/aws/aws-sdk-js)开发工具包。

我有一个`moduleFoo`像这样设置的模块（）：

```
if (global.GENTLY) { require = GENTLY.hijack(require); }

var aws = require("aws-sdk"),
    ec2;

exports.initEC2Client = function () {
    ec2 = new aws.EC2();
};

exports.doSomething = function () {
    var params;

    // params gets populated here...

    ec2.Client.describeInstances(params, function (err, data) {
        // logic!
    }
} 
```

我正在尝试消除该`describeInstances`方法。

我知道我可以通过以下方式对`EC2`班级进行存根：

```
gently.stub("aws-sdk", "EC2"); 
```

根据[Gently docs](https://github.com/felixge/node-gently#gentlystublocation-exportsname) ，我可以通过对其构造函数进行存根来创建一个假实例：

```
var ec2Stub = gently.stub("aws-sdk", "EC2"),
    ec2;

gently.expect(ec2Stub, "new", function () {
    ec2 = this;
});

moduleFoo.initEC2Client(); 
```

在这一点上，我卡住了。我需要做的是存根出属于的对象的方法`ec2`。有没有办法使用 Gently 来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:30:44.880

在按下提交之前，我在输入整个问题后发现了答案。

我通过初始化`Client`为一个空对象然后在其上存根`describeInstances`方法来解决它：

```
var ec2Stub = gently.stub("aws-sdk", "EC2"),
    ec2;

gently.expect(ec2Stub, "new", function () {
    ec2 = this;
});

moduleFoo.initEC2Client();

ec2.Client = {};

gently.expect(ec2.Client, "describeInstances", function (params, callback) {
    // assert `params` is populated ok
    callback();
})

moduleFoo.doSomething();

gently.verify(); // throws no error 
```

# sql-server - SQL Server：将外键设置为特定值

> ID：15027591
> 
> 赞同：4
> 
> 时间：2013-02-22T15:31:41.760
> 
> 标签：sql-server, foreign-keys

我不确定构建我的问题的最佳方法是什么。

我有一个带有外键列的表。默认情况下，外键设置为`NOT NULL`，我现在想保持这种状态，因为也许这将是最终结果。但是现在可能存在不需要（并且具有）外键值的记录，我想以某种方式区分它们，以便尽可能清楚地表明这些记录与其他记录不同。

我试过了，但似乎我不能使用负数，因为负数`bigint`是我的 SQL Server 表中的外键值。我想这是非常标准的东西，所以在这种情况下除了制作外键之外最好的办法是什么`NULL`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T15:40:47.323

不知道为什么 HABO 没有给出答案，因为这几乎是你唯一的选择。

1.  使其为 NULL
2.  在引用的表中创建一行并将其设置为 TBD 或您喜欢的任何名称，并使用其中的 ID 而不是 NULL

如果您有不需要 FK 并且永远不需要的记录，那么您应该将该列设置为 NULL，否则使用临时值。

您不能使用负值，因为如果您有外键约束，您必须引用外部表中的某些内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T15:46:53.247

外键*约束*强制您引用另一个表的现有 PK。

尚未提及的一种方法是暂时放弃约束：

```
ALTER TABLE YourTable
  DROP CONSTRAINT fk_something 
```

# sql-server - invoke-sqlcmd - 我可以更改应用程序名称吗？

> ID：15027595
> 
> 赞同：1
> 
> 时间：2013-02-22T15:31:53.177
> 
> 标签：sql-server, powershell

我正在使用invoke-sqlcmd 和invoke-sqlcmd2 对SQL 服务器运行查询。

有没有办法改变它运行的 ApplicationName ？当我运行探查器跟踪时，我看到查询是由“.Net SqlClient 数据提供者”运行的，我想改变它。

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:54:08.367

好的，使用 Chad Miller 的 invoke-sqlcmd2 脚本进行了测试，并想出了这个：

第 45 行，在“datarow”之后我添加了一个逗号，然后：

```
[Parameter(Position=9, Mandatory=$false)] [string]$ApplicationName='Powershell' 
```

然后修改了连接字符串（大约第 54 行）：

```
if ($Username) 
{ $ConnectionString = "Server={0};Database={1};User ID={2};Password={3};Application Name={5};Trusted_Connection=False;Connect Timeout={4}" -f $ServerInstance,$Database,$Username,$Password,$ConnectionTimeout,$ApplicationName } 
else 
{ $ConnectionString = "Server={0};Database={1};Integrated Security=True;Application Name={3};Connect Timeout={2}" -f $ServerInstance,$Database,$ConnectionTimeout,$ApplicationName } 
```

默认 Appname 现在是“Powershell”，但可以使用 -ApplicationName 参数进行更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T15:54:49.703

包括`Application Name=MyAppName;`在您的连接字符串中，这将是探查器中显示的内容。

# javascript - 卡片布局实现

> ID：15027600
> 
> 赞同：1
> 
> 时间：2013-02-22T15:32:00.697
> 
> 标签：javascript, actionscript-3, math, layout

我正在寻找卡片布局的实现：

*   给定一个固定宽度的画布，将布置任意数量的矩形，最初有一些边距。固定 Y 坐标。
*   如果矩形的数量不适合画布宽度，则每个矩形将被下一个部分覆盖。最后一个显示其整个宽度的反应角
*   想要在我添加一个新矩形时自动调整布局

如果已经存在或类似的东西，请分享。希望我不必写它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T16:59:16.067

像@puggsoy 一样，我想不出一个库可以做到这一点，但这里有一个简单的函数可以满足你的需要。

```
function updateLayout(canvasWidth:Number, rects:Array, rectWidth:Number, margin:Number):void
{
    var totalWidth:Number = rects.length * rectWidth + ((rects.length-1)*margin);
    var offset:Number = rectWidth + margin;
    if(totalWidth > canvasWidth)
    {
        offset = (canvasWidth - rectWidth) / (rects.length-1);
    }

    var currX:Number = 0;
    for each(var rect:DisplayObject in rects)
    {
        rect.x = currX;
        currX += offset;
    }
} 
```

这假定 rects 数组中的 DisplayObjects 按其 childIndex 排序。

# python - 有没有办法从 Python 外部有效地创建 Python 对象？

> ID：15027601
> 
> 赞同：0
> 
> 时间：2013-02-22T15:32:01.177
> 
> 标签：python

我想从 Python 外部（在这种情况下，从 Java）创建一个序列化的 Python 对象，以便 Python 可以读取它并将其视为 Python 中的对象。我将从更简单的对象（int、float、String 等）开始，但我很想知道这是否也可以通过类来完成。

功能是第一位的，但能够快速做到这一点紧随其后。这个想法是我在 Java 领域有一些数据，但在 Python 领域有一些业务逻辑。我希望能够尽快通过 python 逻辑流式传输数据......现在，这些数据正在被序列化为字符串，我认为这是相当浪费的。

先感谢您

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-22T15:34:23.010

最好的答案是使用标准化格式，例如 JSON，并编写一些内容以在 Python 中从该格式创建对象，并从 Java 生成数据。对于简单的事情，这几乎不费吹灰之力，但自然会扩大规模。

尝试`pickle`在 Java 中进行模拟将付出更多努力而不是值得，但我想如果你真的有这个想法，你可以研究一下 Jython。

# javascript - json.js 和 json2.js 是干什么用的？

> ID：15027602
> 
> 赞同：4
> 
> 时间：2013-02-22T15:32:02.367
> 
> 标签：javascript, json, backbone.js

我正在学习[主干](http://backbonejs.org/)，我不断看到提到这些库。

不能只在客户端使用两个简单的功能，

`JSON.stringify`和`JSON.parse`

对于 JSON 功能？

[特别是这里](http://arturadib.com/hello-backbonejs/)的本教程。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T15:33:42.900

一些[较旧的浏览器没有内置这些​​ JSON 函数](http://caniuse.com/json)- 因此 JSON JavaScript 库包含的代码可以填充这些较旧的浏览器以像较新的浏览器一样工作。

值得注意的例外是 IE 7 及更低版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T15:34:15.600

它们用于解析 json，我在我的音乐播放器网站上使用它：[我的音乐播放器网站](http://zachrip.net/p)

基本上，它将它们变成您可以轻松使用的可访问变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T15:33:56.077

是的，只要您的环境支持它们，您就可以。但一些较旧的浏览器不包含 JSON 全局。

这些库填补了空白。

有关明确的详细信息，请参阅[我可以使用](http://caniuse.com/json)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T15:34:13.223

该`JSON`对象相对较新，因此旧浏览器不支持。这些文件旨在实现该功能以实现跨浏览器支持和向后兼容性。

来自[http://ajax.cdnjs.com/ajax/libs/json2/20110223/json2.js](http://ajax.cdnjs.com/ajax/libs/json2/20110223/json2.js)：

> 此文件创建一个包含两个方法的全局 JSON 对象：stringify 和 parse。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-22T15:35:37.007

[json.js 和 json2.js 的区别](https://stackoverflow.com/questions/552135/difference-between-json-js-and-json2-js)

> 我猜 parseJSON 已经过时了，因此新版本（json2）甚至不再使用它了。但是，如果您的代码经常使用 parseJSON，您可以在某处添加这段代码以使其再次工作

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-30T16:15:37.500

## 它用于旧版浏览器支持

From the [GitHub page](https://github.com/douglascrockford/JSON-js) (emphasis mine):

> json2.js: This file creates a JSON property in the global object, if there isn't already one, setting its value to an object containing a stringify method and a parse method. The parse method uses the eval method to do the parsing, guarding it with several regular expressions to defend against accidental code execution hazards. On current browsers, this file does nothing, preferring the built-in JSON object. **There is no reason to use this file unless fate compels you to support IE8**, which is something that no one should ever have to do again.

# jquery - 无法在 jQuery Liquid Carousel 插件中看到下一个/上一个箭头

> ID：15027603
> 
> 赞同：0
> 
> 时间：2013-02-22T15:32:08.650
> 
> 标签：jquery, carousel

你好，

我正在开发一个`jquery carousel`基于[jQuery Liquid Carousel 的插件](http://www.nikolakis.net/liquidcarousel/)，但我无法看到下一个和上一个箭头 - 这是为什么呢？

我的代码在这里：http: [//jsfiddle.net/g8FaN/](http://jsfiddle.net/g8FaN/)

```
<head>
    <title></title>
    <link rel="stylesheet" href="http://www.nikolakis.net/liquidcarousel/css/liquidcarousel.css" />
    <script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
    <script type="text/javascript" src="http://code.jquery.com/ui/1.9.1/jquery-ui.js"></script>
    <script type="text/javascript" src="http://www.nikolakis.net/liquidcarousel/js/jquery.liquidcarousel.pack.js"></script>
    <script>
        $(document).ready(function () {
            $('#liquid').liquidcarousel({ height: 129, duration: 100, hidearrows: false });
        });
    </script>
</head>
<body>
    <div style ="width:200px">
        <div id="liquid">
            <span class="previous"></span>
            <div class="wrapper">
                <ul>
                    <li><a href="#">
                        <img src="http://web.scott.k12.va.us/martha2/dmbtest.gif" width="88" height="126" alt="image" /></a></li>
                    <li><a href="#">
                        <img src="http://web.scott.k12.va.us/martha2/dmbtest.gif" width="88" height="126" alt="image" /></a></li>
                    <li><a href="#">
                        <img src="http://web.scott.k12.va.us/martha2/dmbtest.gif" width="88" height="126" alt="image" /></a></li>
                    <li><a href="#">
                        <img src="http://web.scott.k12.va.us/martha2/dmbtest.gif" width="88" height="126" alt="image" /></a></li>
                    <li><a href="#">
                        <img src="http://web.scott.k12.va.us/martha2/dmbtest.gif" width="88" height="126" alt="image" /></a></li>
                    <li><a href="#">
                        <img src="http://web.scott.k12.va.us/martha2/dmbtest.gif" width="88" height="126" alt="image" /></a></li>
                    <li><a href="#">
                        <img src="http://web.scott.k12.va.us/martha2/dmbtest.gif" width="88" height="126" alt="image" /></a></li>
                    <li><a href="#">
                        <img src="http://web.scott.k12.va.us/martha2/dmbtest.gif" width="88" height="126" alt="image" /></a></li>

                    <li><a href="#">
                        <img src="http://web.scott.k12.va.us/martha2/dmbtest.gif" width="88" height="126" alt="image" /></a></li>
                    <li><a href="#">
                        <img src="http://web.scott.k12.va.us/martha2/dmbtest.gif" width="88" height="126" alt="image" /></a></li>
                    <li><a href="#">
                        <img src="http://web.scott.k12.va.us/martha2/dmbtest.gif" width="88" height="126" alt="image" /></a></li>
                    <li><a href="#">
                        <img src="http://web.scott.k12.va.us/martha2/dmbtest.gif" width="88" height="126" alt="image" /></a></li>
                </ul>
            </div>
            <span class="next"></span>
        </div>
    </div style ="width:200px">
</body> 
```

我在这里做错了什么，因为我看不到下一个和上一个按钮？有人可以调查一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:40:34.423

更改`<div id="liquid">`为`<div class="liquid">`保存图像的 div。

然后将您的 jquery 代码更改为`$('.liquid')...`

在这里你可以在 jsfiddle 中看到它：http: [//jsfiddle.net/g8FaN/1/](http://jsfiddle.net/g8FaN/1/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-19T13:09:18.317

打开liquidcarousel.css，搜索这个类

```
.liquid ul li {
    width:126px;
    padding:0 2px;
    margin:0;
} 
```

并删除宽度属性

```
.liquid ul li {
    padding:0 2px;
    margin:0;
} 
```

始终设置图像的高度，并让宽度根据高度动态变化。当然可以。

# magento - 如何向 Magento 原型添加自定义验证

> ID：15027613
> 
> 赞同：8
> 
> 时间：2013-02-22T15:32:40.077
> 
> 标签：magento, prototypejs

我想为一些自定义字段制作一个简单的 url 验证器。我尝试了默认的（添加类`validate-url`或 `validate-clean-url`输入） - 但这些并不像我希望的那样工作，所以我想编写一些我自己的 javascript，但与原型验证集成。

有谁知道我该怎么做？

我在搜索中没有发现任何有用的东西，而且我不是很精通原型（主要使用 jQuery）。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-22T15:40:04.067

您可以使用创建自己的自定义验证函数

```
<script type="text/javascript">
    var theForm = new VarienForm('theForm', true);
    Validation.add('validate-must-be-baz','You failed to enter baz!',function(the_field_value){
        if(the_field_value == 'baz')
        {
            return true;
        }
        return false;
    });

</script> 
```

见 [http://magento-quickies.tumblr.com/post/6579512188/magento-custom-form-validation](http://magento-quickies.tumblr.com/post/6579512188/magento-custom-form-validation)

或者

```
if(Validation) {       
   Validation.addAllThese([     
    [
        'validation-myown',      
        'Please insert proper word',   
        function(v,r){ return v.indexOf('valid')==-1?false:true } 
    ],
   [ ]   
])
} 
```

见[http://blog.baobaz.com/en/blog/custom-javascript-form-validators](http://blog.baobaz.com/en/blog/custom-javascript-form-validators)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-22T15:39:12.320

在 /js/prototype/validation.js （或您拥有的此类文件的文件）中。您有一个包含以下数组的部分：

classname :message on fail : function(v){your check return true/false;} 检查 v 是否有效

这部分在 420 行附近。

您可以将验证添加到此数组或修改 validate-url 如下所示：

```
 ['validate-url', 'Please enter a valid URL. Protocol is required (http://, https:// or ftp://)', function (v) {
            v = (v || '').replace(/^\s+/, '').replace(/\s+$/, '');
            return Validation.get('IsEmpty').test(v) || /^(http|https|ftp):\/\/(([A-Z0-9]([A-Z0-9_-]*[A-Z0-9]|))(\.[A-Z0-9]([A-Z0-9_-]*[A-Z0-9]|))*)(:(\d+))?(\/[A-Z0-9~](([A-Z0-9_~-]|\.)*[A-Z0-9~]|))*\/?(.*)?$/i.test(v)
        }], 
```

编辑：RS通过展示如何在不更改js文件的情况下进行回答可能会更好。更方便 ;）

# c# - 如何让 WPF TextBlock 在异步设置 Text 属性的位置滚动？

> ID：15027622
> 
> 赞同：8
> 
> 时间：2013-02-22T15:32:57.157
> 
> 标签：c#, .net, wpf, asynchronous, textblock

我有一个`TextBlock`, 包裹在一个 中`ScrollViewer`，并且 的`Text`属性`TextBlock`设置为一个任务的结果。的滚动条`TextBlock`不会根据任务返回的文本大小进行调整。

有任何想法吗？

```
<Grid>
   <Grid.ColumnDefinitions>
      <ColumnDefinition Width="500"/>
   </Grid.ColumnDefinitions>

   <ScrollViewer VerticalScrollBarVisibility="Auto" 
                 Height="177" 
                 Width="500" 
                 HorizontalScrollBarVisibility="Disabled">
      <TextBlock Height="177" 
                Text="Extracted Xml" 
                Width="504" 
                HorizontalAlignment="Stretch" 
                TextWrapping="Wrap" />
   </ScrollViewer>
</Grid> 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-22T15:45:01.887

`ScrollViewer`根据子控件的尺寸计算它的滚动条。

因此，从您的和 ScrollBars中删除`Height`属性应该可以按预期工作`TextBlock`

# php - 我对 hash:sha512 有一个奇怪的问题（工作得很好，除非我尝试使用错误的密码登录

> ID：15027623
> 
> 赞同：1
> 
> 时间：2013-02-22T15:32:59.213
> 
> 标签：php

session_start();

```
if(isset($_SESSION['logged'])){
    header('Location: esm_questionnaire.php');
}
if(isset($_POST['utilisateur'])&&isset($_POST['motdepasse'])){
    $con = mysql_connect('localhost','root','');
    mysql_select_db('esm_quiz', $con);
    $datID = mysql_real_escape_string($_POST['utilisateur']);
    $datPASS = $_POST['motdepasse'];
    $datPASS = hash(sha512, $datPASS);
    $SQL = "SELECT * FROM esm_sujets WHERE code_exp = '$datID'";
    $result = mysql_query($SQL, $con);
    $row = mysql_fetch_array($result);
    if($result){
        if($datPASS === $row['pass_exp']){
            $_SESSION['logged'] = true;
            $_SESSION['sexe'] = $row['sexe'];
            $_SESSION['type'] = $row['type_attachement'];
            header('Location: esm_questionnaire.php');
        }
        else{
            die('Vous n&#39;avez pas acces');
            }
    }
    } 
```

注意：使用未定义的常量 sha512 - 在第 12 行的 C:\wamp\www\Nouveaudossier\esm_connexion.php 中假定为“sha512”

如果我的密码或用户名错误，这是我得到的错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T15:36:52.707

它需要从：

```
$datPASS = hash(sha512, $datPASS); 
```

到

```
$datPASS = hash('sha512', $datPASS); 
```

**OR**，您需要先定义`sha512`为常量：

```
define('sha512', 'sha512'); 
```

^(但这似乎有点愚蠢，不是吗？)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T15:36:49.613

sha512 必须在 qoutes 之间

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T15:37:12.280

```
$datPASS = hash(sha512, $datPASS); 
```

将其替换为

```
$datPASS = hash("sha512", $datPASS); 
```

不管怎样，它都会运行，幸运的是 PHP 足够聪明。

# wcf - 当我尝试使用用户名和密码对我的 WCF 进行肥皂调用时，InvalidSecurity

> ID：15027625
> 
> 赞同：4
> 
> 时间：2013-02-22T15:33:10.047
> 
> 标签：wcf, soap

错误`[a:InvalidSecurity] An error occurred when verifying security for the message.`

我尝试像这样调用我的服务。

**php**

```
<?php
    $soapURL = "https://localhost:8888/wcf/?wsdl" ;
    $soapParameters = Array('userName' => "user23", 'password' => "pass123") ;

    $soapClient = new SoapClient($soapURL, $soapParameters);

    var_dump($soapClient->GetVersion());
?> 
```

我之前在没有身份验证的情况下让它工作，所以我相信错误出在 php 代码或 WCF 上的 app.config 中。

这是我的**app.config**

```
<?xml version="1.0"?>
<configuration>
  <system.serviceModel>
    <services>
      <service
        behaviorConfiguration="MYDLL.Behavior"
        name="MYDLL.WCFService">
        <endpoint
          address=""
          binding="basicHttpBinding"
          bindingConfiguration="UsernameAndSSL"
          name="basicHttpBinding"
          contract="MYDLL.IService"/>
        <endpoint
          address="mex"
          binding="mexHttpsBinding"
          bindingConfiguration=""
          name="MexBinding"
          contract="IMetadataExchange"/>
        <host>
          <baseAddresses>
            <add baseAddress="https://localhost:8734/wcf/"/>
          </baseAddresses>
        </host>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="MYDLL.Behavior">
          <serviceMetadata httpsGetEnabled="true"/>
            <serviceCredentials>
              <userNameAuthentication userNamePasswordValidationMode="Custom" customUserNamePasswordValidatorType="MYDLL.CustomUserNameValidator, MYDLL"/>
              <serviceCertificate findValue="localhost" storeLocation="LocalMachine" storeName="My" x509FindType="FindBySubjectName"/>
            </serviceCredentials>
          <useRequestHeadersForMetadataAddress />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <bindings>
      <basicHttpBinding>
        <binding name="UsernameAndSSL">
          <security mode="TransportWithMessageCredential">
            <transport clientCredentialType="Basic"/>
            <message clientCredentialType="UserName"/>
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>
  </system.serviceModel>
  <startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0,Profile=Client"/>
  </startup>
</configuration> 
```

和自**定义用户名验证器**

```
public class CustomUserNameValidator : UserNamePasswordValidator
{
    public override void Validate(string userName, string password)
    {
        Console.WriteLine("User validation succeeded (Username: {0}; Password: {1})", userName, password);
    }
} 
```

我没有得到的是，如果故障出在我的 php 代码或配置中。consolewrite没有运行，我只是得到了**invalidSecurity**异常，所以它似乎知道我有一个它找不到的自定义用户名验证？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T11:31:25.367

我为同样的问题苦苦挣扎了几个星期，终于让 PHP 客户端使用我的 WCF 服务进行身份验证。这种配置是我目前在生产中使用的。

首先，您必须启用匿名身份验证和基本身份验证。您必须打开匿名，以便客户端在进行身份验证之前可以读取 WSDL。即使启用了匿名身份验证，他们也将无法在没有先经过身份验证的情况下使用您的服务。

将其放入您的 web.config 或直接在 IIS 中打开匿名和基本身份验证：

```
<security>
   <authentication>
      <anonymousAuthentication enabled="true" />
      <basicAuthentication enabled="true" />
   </authentication>
</security> 
```

然后设置您的 WCF 安全性以使用基本身份验证和传输安全性：

```
<bindings>
  <basicHttpBinding>
    <binding name="SSLBinding">
      <security mode="Transport">
        <transport clientCredentialType="Basic" />
      </security>
    </binding>        
  </basicHttpBinding>
</bindings> 
```

这是我的行为：

```
<behaviors>
  <serviceBehaviors>
    <behavior name="SSLBehavior">
      <serviceMetadata httpsGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="true" />
      <serviceSecurityAudit auditLogLocation="Application"
                            serviceAuthorizationAuditLevel="Failure"
                            messageAuthenticationAuditLevel="Failure"
                            suppressAuditFailure="true" />
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

使用它来装饰你的方法来控制谁可以访问什么：

```
[PrincipalPermission(SecurityAction.Demand, Role = @"DOMAIN\ActiveDirectoryGroup")] 
```

使用此设置，PHP 客户端应该能够获取 WSDL，然后在授权后调用您的方法：

```
$url = 'https://domain.com/service.svc?wsdl';

$username = 'username';
$password = 'password';

$options = array(
    'login' => $username,
    'password' => $password,
    'soap_version' => SOAP_1_1,
    'exceptions' => true,
    'trace' => 1,
    'cache_wsdl' => WSDL_CACHE_NONE,
    'compression' => SOAP_COMPRESSION_ACCEPT | SOAP_COMPRESSION_GZIP,
    'connection_timeout' => 60
);

$client = new SoapClient($url, $options);

$obj = new YourObject();

$obj->MyProperty = 'Test';
$obj->MyOtherProperty = 'Testing';

$result = $client->WCFMethodName(array('paramName' => $obj)); 
```

PHP 代码中的参数名称与 WCF 参数名称完全匹配（区分大小写）非常重要。

# wso2 - 如何在 WSO2 Carbon 3.2.2 中托管静态文件？

> ID：15027626
> 
> 赞同：0
> 
> 时间：2013-02-22T15:33:12.060
> 
> 标签：wso2, wso2carbon

我已经安装了 WSO2 Carbon 3.2.2 并希望托管一些我可以从浏览器访问的静态文件（特别是构成工作网站的各种 HTML 和 JavaScript 文件）。我希望能够从`http://localhost:9763/<MY_FILES>`. 使用 Carbon 3.0.0，这就像将文件放入`<CARBON_HOME>/webapps/`. Carbon 3.2.2 没有`<CARBON_HOME>/webapps/`目录，添加它也无济于事。

我注意到（在安装某些功能之后）还有另一个 webapps 目录`<CARBON_HOME>/repository/deployment/server/webapps/`，但这似乎是专门用于部署战争文件的。

我试过把我的文件放在我能想到的任何地方，但我没有运气。

有我必须安装的功能吗？是否有特殊的位置来放置这些文件？这仍然是受支持的功能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T17:01:16.953

这从来不是 Carbon 的广告功能，也没有被推荐。因此，您不能期望对“非功能”具有向后兼容性。

在生产环境中正确的做法是使用 Web 服务器（Apache、nginx 等）来提供静态文件，因为 Web 服务器已经过优化，可以做到这一点。然后通过 Web 服务器代理到 Carbon 的连接。例如，通过对 Apache 使用 mod_proxy。

您仍然可以使用 Application Server（或在将 AppServer 功能安装到任何 Carbon 服务器之后）创建一个 .war 文件并在那里拥有您的静态站点。再说一次，如果它是一个使用 Application Server 的静态站点，那就太过分了。

# java - 不能在杰克逊中使用（反）序列化具有多态项的列表

> ID：15027628
> 
> 赞同：10
> 
> 时间：2013-02-22T15:33:16.690
> 
> 标签：java, json, jackson

我有一个问题（反）序列化我没有定义的 JSON。

这是一些解释该问题的代码和 JSON：

代码：

```
public static class Base {
    public String klass = "base";
}

public static class SubBase extends Base {
}

public static class Sub1 extends SubBase {
    public Sub1() {
        klass = "Sub1";
    }
}

public static class Sub2 extends SubBase {
    public Sub2() {
        klass = "Sub2";
    }
}

public static class Holder {
    @JsonTypeInfo(use=JsonTypeInfo.Id.NAME, include=JsonTypeInfo.As.WRAPPER_ARRAY, property="type")
    @JsonSubTypes({@JsonSubTypes.Type (name = "sub1", value = Sub1.class),@JsonSubTypes.Type(name = "sub2", value = Sub2.class)})
    public List<Base> items = new ArrayList<Base>();
}

Holder holder = new Holder();
holder.items.add(new Sub1());
holder.items.add(new Sub1());

mapper.writeValueAsString(holder); 
```

生产

```
{"items":[["sub1",{"klass":"Sub1"}],["sub1",{"klass":"Sub1"}]]} 
```

如果我将 JsonTypeInfo 注释更改为

```
 @JsonTypeInfo(use=JsonTypeInfo.Id.NAME, include=JsonTypeInfo.As.WRAPPER_OBJECT, property="type") 
```

生产

```
{"items":[{"sub1":{"klass":"Sub1"}},{"sub1":{"klass":"Sub1"}}]} 
```

到目前为止，一切都很好:)

但是，我从服务器获取的 JSON 的结构略有不同：

```
{"type":"sub1", "items":[{"klass":"Sub1"},{"klass":"Sub1"}]} 
```

items 数组的类型在“type”属性中定义（请注意，“items”数组中的所有项目都属于同一类）。
我只是无法弄清楚要使用哪个 JsonTypeInfo 组合来实现这一点。我尝试将“包含”设置为“.EXTERNAL_PROPERTY”，但这不起作用。
使用此包含进行反序列化会给我“*线程“主”org.codehaus.jackson.JsonGenerationException 中的异常：无法写入字段名称，期望值*”错误消息。

我的问题是：我需要使用哪个注释以便' *{"type":"sub1", "items":[{"klass":"Sub1"},{"klass":"Sub1"}]}* '是否会根据Holder的“ *type* ”属性用所有 Sub1 实例填充“items”数组？
如果这是不可能的，是否有另一种方法来实现这一点（不需要 Holder 的自定义序列化程序；仅用于“项目”数组的自定义序列化程序就可以了）？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T18:34:19.990

无法自动映射您显示的 JSON；它不是 Jackson 支持的 4 种类型之一。

如果你不能让服务器产生更标准的结构（有自动支持），你需要编写一个自定义的反序列化器；或分两步进行数据绑定，首先进入一个易于映射的中间结构（如`JsonNode`or `Map`），然后使用该结构手动提取类型（例如，使用`ObjectMapper.convertValue(object, resultType)`.

# android - 相机只是 SurfaceView 的一部分

> ID：15027629
> 
> 赞同：1
> 
> 时间：2013-02-22T15:33:17.160
> 
> 标签：android, camera, surfaceview

是否可以仅在 SurfaceView 的一部分中绘制相机？还是在同一个 SurfaceView 上绘制不同的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T19:05:37.897

你想达到什么目的？您不能将相机预览发送到 SurfaceView 的一部分，但您可以调整此 View 的大小，并在其周围放置其他视图，甚至在其顶部。*后者是在同一个 SurfaceView 上绘制不同事物*的替代方法。

# php - application/octet-stream 阻止浏览器

> ID：15027632
> 
> 赞同：0
> 
> 时间：2013-02-22T15:33:25.130
> 
> 标签：php, download

我编写了一个小型下载门户，并使用 application/octet-stream 下载文件。

```
function fu($filename)
{
     header("Content-Type: application/octet-stream");  
     $save_as_name = basename($filename);   
     header("Content-Disposition: attachment; filename=\"$save_as_name\""); 
     readfile($filename);   
} 
```

当我下载一个大文件时，在下载完成之前无法浏览目录树。

有没有机会并行执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:10:56.423

You're probably using sessions. While you have a session open in Window A which is busy serving the download Window B will not be able to get any pages because the PHP process serving A still has the session data open/locked and B is waiting on that lock to be released.

The simple solution is to call [`session_write_close()`](http://www.php.net/manual/en/function.session-write-close.php) at some point before you call `readfile()`. This will commit the session to disk on the server, close it, and release the lock so other PHP processes can pick it back up.

# ios - 如何使用 MonoTouch/Xamarin.iOS 中的 iOS 库？

> ID：15027633
> 
> 赞同：2
> 
> 时间：2013-02-22T15:33:36.860
> 
> 标签：ios, xamarin.ios

我试图找到一种直接的方法来使用 MonoTouch 中的任意 iOS 库。目前，我需要[这个日历功能](https://github.com/k06a/ABCalendarPicker)，但这个问题适用于任何此类组件。

我已经阅读了[有关创建 iOS 绑定的 Xamarin 文章](http://docs.xamarin.com/guides/ios/advanced_topics/binding_objective-c_libraries)，但是构建这些绑定的过程看起来非常复杂（而且乏味且可能容易出错），我认为实际上我更容易在 C# 中重新实现给定的功能从头开始，而不是经历这个过程。创建这些绑定需要深入了解 ObjectiveC，而且我正在使用 Xamarin **，所以我不必这样做**。

就目前而言，我很伤心，因为我真的想要访问一些 iOS 库的能力，但是没有时间掌握这个过程来创建这些绑定。有没有其他方法可以访问这些库？

（我想知道是否有或可能有任何类型的自动绑定生成器？在我看来，95% 的工作是将 ObjectiveC 标头的样板转换为 C# 习惯用法，并且自动化工具可以做到这一点，然后最后的调整可以手工完成。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T16:43:27.520

你可以：

*   使用那些已经绑定的：你可以在[github](https://github.com/)上找到很多，特别是在[monotouch-bindings](https://github.com/mono/monotouch-bindings)和（刚刚宣布的）[Xamarin](http://www.xamarin.com)的[Components Store](https://components.xamarin.com)中；

*   自己绑定它们。这确实需要一些 Objective-C 知识。[存在](https://github.com/stampsy/monotouch-binding-generator)一些工具/脚本，但最终，手动*编辑*是需要 Objective-C 知识的地方。有可以重复使用的[通用单元测试](https://github.com/mono/maccore/tree/master/tests/bindings)（例如[Touch.Unit](http://docs.xamarin.com/guides/ios/deployment,_testing,_and_metrics/touch.unit)），这将大大减少其中的错误数量（即将发布博客文章以详细描述它们）。

*   将一些转换（或从头开始编写）为 C# 组件；

# c# - WP8，使用带有自签名证书的 SOAP

> ID：15027636
> 
> 赞同：0
> 
> 时间：2013-02-22T15:33:44.787
> 
> 标签：c#, soap, certificate, windows-phone-8, self-signed

我能够通过 SOAP 使用 Web 服务。但是，我想使用带有自签名证书的 https 连接。

如何强制我的应用使用我的证书？我能够用 Android实现[同样的目标。](https://stackoverflow.com/questions/15005360/self-signed-certificate)

谢谢你，马丁。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:57:48.963

我的一个项目中的一个工作示例。我不确定它是否可以在 WP8 上运行，但在桌面上一切正常。

这里是服务类。

```
internal class PermissiveCertificatePolicy
{
    private string _subjectName;
    private static PermissiveCertificatePolicy _currentPolicy;

    public PermissiveCertificatePolicy(string subjectName)
    {
        _subjectName = subjectName;
        ServicePointManager.ServerCertificateValidationCallback += RemoteCertValidate;
    }

    public static void Enact(string subjectName)
    {
        _currentPolicy = new PermissiveCertificatePolicy(subjectName);
    }

    private bool RemoteCertValidate(object sender, X509Certificate cert,
        X509Chain chain, SslPolicyErrors error)
    {
        return cert.Subject == _subjectName;
    }
} 
```

以下是使用示例：

```
namespace WcfClient
{
    internal class Program
    {
        private const string RCertName = "CN=WMSvc-WIN-R0NU6K5QG87";

        private static void Main(string[] args)
        {
            PermissiveCertificatePolicy.Enact(RCertName);

            using (MyClient proxy = new MyClient("Ws2007HttpBinding_IHistory"))
            {
                ...
            }
        }
    }
} 
```

# mysql - Mysql查询两个外键到一个主键

> ID：15027643
> 
> 赞同：2
> 
> 时间：2013-02-22T15:34:01.293
> 
> 标签：mysql, sql

我有两个表：history_tickets & users

表一：history_ticket

```
history_id   |  id_klien    | id_staf   | message
  11         |     77       |   NULL    |  text
  12         |    NULL      |    1      |  text
  13         |     77       |   NULL    |  text 
```

表 2：用户

```
user_id   |  name    | group   
  1       |   john   |  staff  
  77      |   dion   |  member 
```

我想要这样的结果：

```
history_id   |  message | user_id  |  name   | group
  11         |    text  |   77     |  dion   |  member
  12         |    text  |    1     |  john   |  staf
  13         |    text  |   77     |  dion   |  member 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T15:36:39.600

您需要`JOIN`以下表格：

```
select h.history_id,
  h.message,
  u.user_id,
  u.name,
  u.group
from history_ticket h
left join users u
  on h.id_staf = u.user_id
  or h.id_klien = u.user_id 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/5ba8fe/3)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T15:37:03.563

```
SELECT  a.HISTORY_ID,
        a.MESSAGE,
        COALESCE(a.ID_KLIEN, a.ID_STAF) UserID,
        COALESCE(b.name, c.name) name,
        COALESCE(b.group, c.group) `group`
FROM    history_ticket a
        LEFT JOIN users b
            ON a.id_klien = b.user_ID
        LEFT JOIN users c
            ON a.id_staf = c.user_ID 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/5ba8fe/5)

# jquery - 关键事件在 Google Chrome 中无法正常工作

> ID：15027650
> 
> 赞同：0
> 
> 时间：2013-02-22T15:34:13.663
> 
> 标签：jquery, asp.net

在我的网站上，我可以让用户通过按 来使用搜索`Enter`，并在搜索输入字段中输入一个字符串。下面是一些 jQuery 代码来说明这一点：

```
$(document).ready(function () {
    $('#search-input').on('keydown keyup keypress', function (event) {
        event = event || windows.event;
        if (event.keyCode == 13 || event.which == 13) {
            $("#search-button").click();
        }
    });

    $("#search-button").click(function () {
        var theUrl = "/search.aspx?search=" + document.getElementById('search-input').value;
        window.location = theUrl;
    });
} 
```

在我的母版页上，我有以下代码：

```
<input id="search-input" name="search" type="text" placeholder="Search..." />
<button id="search-button" type="button"></button> 
```

虽然这在 FireFox 和 IE9/IE8 中有效，但在 Chrome 中不起作用（调试模式除外，这令人惊讶）。请帮助我让它在所有这些浏览器中正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T15:37:12.150

通过绑定多个事件停止使事情复杂化，因为`keypress`并且`keyup`并不总是返回相同的值，并且该函数将被多次调用，每次触发一次。此外，`e.which`在 jQuery 中进行了标准化，并且您再次将其复杂化了：

```
$(document).ready(function () {
    $("#search-button").on('click', function() {
         var theUrl = "/search.aspx?search=" + $('#search-input').val();
         window.location = theUrl;
    });
    $('#search-input').on('keyup', function(e) {
         if (e.which == 13) 
            $("#search-button").trigger('click');
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T16:21:05.740

为此，您不需要任何 JavaScript。

```
<form method="GET" action="/search.aspx">
    <input name="search" type="text" placeholder="Search..." />
    <button type="submit">Submit</button>
</form> 
```

除非您特别希望表单在禁用 javascript 的情况下无法使用。

# animation - 动画指南针插件在中间人中不起作用？

> ID：15027655
> 
> 赞同：1
> 
> 时间：2013-02-22T15:34:24.330
> 
> 标签：animation, plugins, middleman

嗨，我在中间人中添加动画插件时遇到问题，是的，我很确定我为指南针安装了动画插件，并且在我的 gem 列表中看到了它。

**如果我将它添加到我的 config.rb**

```
require 'animation' 
```

它显示一个错误，这是输出

```
/cygdrive/d/Main/dot_proj/config.rb:7:in `require': cannot load such file -- animation (LoadError)
        from /cygdrive/d/Main/dot_proj/config.rb:7:in `initialize'
        from /usr/lib/ruby/gems/1.9.1/gems/middleman-core-3.0.11/lib/middleman-core/core_extensions/extensions.rb:137:in `instance_eval'
        from /usr/lib/ruby/gems/1.9.1/gems/middleman-core-3.0.11/lib/middleman-core/core_extensions/extensions.rb:137:in `initialize'
        from /usr/lib/ruby/gems/1.9.1/gems/middleman-core-3.0.11/lib/middleman-core/core_extensions/ruby_encoding.rb:22:in `initialize'
        from /usr/lib/ruby/gems/1.9.1/gems/middleman-core-3.0.11/lib/middleman-core/core_extensions/data.rb:35:in `initialize'
        from /usr/lib/ruby/gems/1.9.1/gems/middleman-core-3.0.11/lib/middleman-core/application.rb:188:in `initialize'
        from /usr/lib/ruby/gems/1.9.1/gems/middleman-core-3.0.11/lib/middleman-core/core_extensions/request.rb:56:in `new'
        from /usr/lib/ruby/gems/1.9.1/gems/middleman-core-3.0.11/lib/middleman-core/core_extensions/request.rb:56:in `inst'
        from /usr/lib/ruby/gems/1.9.1/gems/middleman-core-3.0.11/lib/middleman-core/preview_server.rb:73:in `new_app'
        from /usr/lib/ruby/gems/1.9.1/gems/middleman-core-3.0.11/lib/middleman-core/preview_server.rb:154:in `mount_instance'
        from /usr/lib/ruby/gems/1.9.1/gems/middleman-core-3.0.11/lib/middleman-core/preview_server.rb:19:in `start'
        from /usr/lib/ruby/gems/1.9.1/gems/middleman-core-3.0.11/lib/middleman-core/cli/server.rb:73:in `server'
        from /usr/lib/ruby/gems/1.9.1/gems/thor-0.15.4/lib/thor/task.rb:27:in `run'
        from /usr/lib/ruby/gems/1.9.1/gems/thor-0.15.4/lib/thor/invocation.rb:120:in `invoke_task'
        from /usr/lib/ruby/gems/1.9.1/gems/thor-0.15.4/lib/thor.rb:275:in `dispatch'
        from /usr/lib/ruby/gems/1.9.1/gems/thor-0.15.4/lib/thor/base.rb:425:in `start'
        from /usr/lib/ruby/gems/1.9.1/gems/middleman-core-3.0.11/lib/middleman-core/cli.rb:77:in `method_missing'
        from /usr/lib/ruby/gems/1.9.1/gems/thor-0.15.4/lib/thor/task.rb:29:in `run'
        from /usr/lib/ruby/gems/1.9.1/gems/thor-0.15.4/lib/thor/task.rb:126:in `run'
        from /usr/lib/ruby/gems/1.9.1/gems/thor-0.15.4/lib/thor/invocation.rb:120:in `invoke_task'
        from /usr/lib/ruby/gems/1.9.1/gems/thor-0.15.4/lib/thor.rb:275:in `dispatch'
        from /usr/lib/ruby/gems/1.9.1/gems/thor-0.15.4/lib/thor/base.rb:425:in `start'
        from /usr/lib/ruby/gems/1.9.1/gems/middleman-core-3.0.11/lib/middleman-core/cli.rb:22:in `start'
        from /usr/lib/ruby/gems/1.9.1/gems/middleman-core-3.0.11/bin/middleman:18:in `<top (required)>'
        from /usr/bin/middleman:23:in `load'
        from /usr/bin/middleman:23:in `<main>' 
```

**这是插件的链接** [https://github.com/ericam/compass-animation](https://github.com/ericam/compass-animation)

我猜我的中间人没有在中间人核心本身上安装插件？如果是，那么如何向中间人添加指南针插件？

# c# - 防止“使用”使用框架类中的特定构造函数的最佳方法

> ID：15027656
> 
> 赞同：0
> 
> 时间：2013-02-22T15:34:26.143
> 
> 标签：c#, wpf, entity-framework-4

我有一个 wpf 应用程序并使用 EF4 与数据库进行通信。我正在动态选择连接字符串，具体取决于调试器是否附加：

```
public static string CustomerConnectionString;
public static string ProjectsConnectionString;

private static void GetConnectionstring()
{
    if (Debugger.IsAttached)
    {
         CustomerConnectionString = ConfigurationManager.ConnectionStrings["kundenEntities"].ConnectionString;
         ProjectsConnectionString = ConfigurationManager.ConnectionStrings["projekteEntities"].ConnectionString;
    }
    else
    {
         CustomerConnectionString = ConfigurationManager.ConnectionStrings["kundenEntitiesRelease"].ConnectionString;
         ProjectsConnectionString = ConfigurationManager.ConnectionStrings["projekteEntitiesRelease"].ConnectionString;
    }

} 
```

我这样做是为了确保不会意外地在生产数据库中做一些事情。

然后以这种方式创建一个实体对象：

```
using (ProjectEntities proj = new ProjectEntities(App.ProjectsConnectionString))
{ 
    I'm proper code
} 
```

现在我想确保我不会意外调用默认构造函数来获取实体对象。这将导致实体对象使用 app.config 中的默认连接字符串。默认连接字符串是调试连接字符串，它连接到我的本地数据库。应该清楚，如果发生这种情况，从该实体查询的数据正在我的调试器中工作，但对用户不起作用，因为该用户没有与我的本地数据库的连接（-：

我现在做了一个解决方法并派生了实体类并只提供需要连接字符串的构造函数：

```
public class ProjectEntities : projekteEntities
{
    public ProjectEntities(string connectionString) : base  (connectionString){}
} 
```

**更新**

我以这种方式解决了我的需求：

我重命名了生成的 projekteEntitites 类...

```
public partial class ObsoleteProjekteEntities : ObjectContext
{
    #region Konstruktoren

    /// <summary>
    /// Initialisiert ein neues projekteEntities-Objekt mithilfe der in Abschnitt 'projekteEntities' der Anwendungskonfigurationsdatei gefundenen Verbindungszeichenfolge.
    /// </summary>
    public ObsoleteProjekteEntities() : base("name=projekteEntities", "projekteEntities")
    {
        this.ContextOptions.LazyLoadingEnabled = true;
        OnContextCreated();
    }

    /// <summary>
    /// Initialisiert ein neues projekteEntities-Objekt.
    /// </summary>
    public ObsoleteProjekteEntities(string connectionString) : base(connectionString, "projekteEntities")
    {
        this.ContextOptions.LazyLoadingEnabled = true;
        OnContextCreated();
    }

    /// <summary>
    /// Initialisiert ein neues projekteEntities-Objekt.
    /// </summary>
    public ObsoleteProjekteEntities(EntityConnection connection) : base(connection, "projekteEntities")
    {
        this.ContextOptions.LazyLoadingEnabled = true;
        OnContextCreated();
    } 
```

并派生了那个类......

```
public class ProjectEntities : ObsoleteProjekteEntities
{
    public ProjectEntities(string connectionString) : base  (connectionString){}
} 
```

...现在我不会意外地使用默认构造函数调用原始生成的上下文。

感谢您的其他建议，也将看看它们（-：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:36:53.703

如果您已经在代码中同时管理发布和调试连接字符串，请在 web.config 文件中注释掉连接字符串。更好的是，使用 .config 文件转换工具来执行此操作。[看看这个教程。](http://www.hanselman.com/blog/SlowCheetahWebconfigTransformationSyntaxNowGeneralizedForAnyXMLConfigurationFile.aspx)

其次，不要依赖编码人员来处理每次使用哪个连接字符串。不要`Debugger.IsAttached`用来决定调试和发布模式。如果有人在没有调试器的情况下运行应用程序，它将命中发布数据库。而是使用 C# 预处理器指令。

例如：

*   转到项目属性
*   转到`Build`选项卡
*   查看`Define DEBUG constant`
*   转到您设置连接字符串的文件并使用以下代码：

* * *

```
#if DEBUG
CustomerConnectionString = ConfigurationManager.ConnectionStrings["kundenEntities"].ConnectionString;
ProjectsConnectionString = ConfigurationManager.ConnectionStrings["projekteEntities"].ConnectionString;
#else
CustomerConnectionString = ConfigurationManager.ConnectionStrings["kundenEntitiesRelease"].ConnectionString;
ProjectsConnectionString = ConfigurationManager.ConnectionStrings["projekteEntitiesRelease"].ConnectionString;
#endif 
```

* * *

# r - 如何在不指定 x 轴的情况下绘制箱线图？

> ID：15027659
> 
> 赞同：9
> 
> 时间：2013-02-22T15:34:29.723
> 
> 标签：r, ggplot2

基本图形可以使用简单的命令很好地绘制箱线图

```
data(mtcars)
boxplot(mtcars$mpg) 
```

![在此处输入图像描述](../Images/f47d7e795cd6a7d073edfc89707c81a1.png)

但`qplot`需要y轴。如何使用 qplot 实现与基本图形箱线图相同的功能并且不会出现此错误？

```
qplot(mtcars$mpg,geom='boxplot')
Error: stat_boxplot requires the following missing aesthetics: y 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-22T16:25:52.193

您必须为`x`. `theme()`元素用于删除 x 轴标题和刻度。

```
ggplot(mtcars,aes(x=factor(0),mpg))+geom_boxplot()+
   theme(axis.title.x=element_blank(),
    axis.text.x=element_blank(),
    axis.ticks.x=element_blank()) 
```

或使用`qplot()`功能：

```
qplot(factor(0),mpg,data=mtcars,geom='boxplot') 
```

[![在此处输入图像描述](../Images/b3472c4a44807b8b47f886e2b1f49995.png)](https://i.stack.imgur.com/sv2Uq.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T16:40:28.483

您还可以使用`latticeExtra`, 混合`boxplot`语法和`ggplot2-like`主题：

```
bwplot(~mpg,data =mtcars,
        par.settings = ggplot2like(),axis=axis.grid) 
```

![在此处输入图像描述](../Images/6e4cca137eb6ddfce7853167a10cf752.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-28T08:30:43.030

您可以将 x 美学设置为`factor(0)`并通过删除不需要的标签来调整外观：

```
ggplot(mtcars, aes(x = factor(0), mpg)) +
    geom_boxplot() + 
    scale_x_discrete(breaks = NULL) +
    xlab(NULL) 
```

[![在此处输入图像描述](../Images/41b7971e9bd0b7c6b86f121eac61d6dc.png)](https://i.stack.imgur.com/wMI7u.png)

# java - 使用 JSF/PrimeFaces 的观察者模式

> ID：15027660
> 
> 赞同：0
> 
> 时间：2013-02-22T15:34:30.347
> 
> 标签：java, jsf, primefaces, observer-pattern

是否有在 JSF 中实现观察者模式的推荐方法，即强制从 Java bean 更新 UI？

我看过 PrimePush，但他们的 ShowCase 示例似乎都不适用于我的浏览器（例如 FF 19.0），这就是我回避它的原因。

我目前正在使用 PrimeFaces 轮询定期更新各个组件。我正在考虑将轮询的间隔减少到“1”，并在服务器准备好推送之前阻止其操作方法。这是一个好主意还是会在某个时候取消这些长期运行的请求？

```
<p:poll interval="15" listener="#{fileBucket.keepAlive}" update=":download:files :expiryDateValue" oncomplete="updatePageIsValidForValue();" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T15:46:21.927

在民意调查中阻止行动基本上是手工推动的，我建议不要这样做，你很可能会遇到很多问题。轮询更安全、更便携，但如果这还不够，您应该尝试现有的推送实现之一，如 PrimePush。

# ios - iOS：设置按钮按下状态

> ID：15027661
> 
> 赞同：1
> 
> 时间：2013-02-22T15:34:33.663
> 
> 标签：ios, objective-c

我正在尝试找到执行此操作的最佳方法。我在视图控制器上有 5 个自定义按钮，如果单击它，我试图让按钮保持突出显示。我知道如何做到这一点，但我试图一次只突出显示 1 个按钮。因此，如果用户单击一个按钮并将其突出显示，但又单击了另一个按钮，则最近单击的按钮将保持突出显示，而前一个按钮将取消突出显示。实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T15:48:52.283

您应该保留对所有按钮的引用（例如，如果您使用 IB，请在代码`@property (nonatomic, strong) IBOutlet UIButton *button1;`中包含所有按钮的链接）。

然后将所有按钮链接到相同的方法以按下按钮。我会打电话`buttonPressed`的。

像这样实施它：

```
- (IBAction)buttonPressed:(id)sender {

    UIButton *buttonPressed = (UIButton*)sender;
    NSArray *buttons = [NSArray arrayWithObjects:_button1, _button2, _button3, nil];
    bool buttonIsHighlighted = NO;

    // Check if a button is already highlighted
    for (UIButton *button in buttons) {

        if (button.highlighted) {

            buttonIsHighlighted = YES;
        }
    }

    // If a button is highlighted, un-highlight all except the one pressed
    // If no button is highlighted, just highlight the right one
    if (buttonIsHighlighted) {

        for (UIButton *button in buttons) {

            if (buttonPressed == button) {

                buttonIsHighlighted = YES;

            } else {

                button.highlighted = NO;
            }
        }

    } else {

        buttonPressed.highlighted = YES;
    }
} 
```

我无法测试这段代码，但我很确定它应该可以工作。让我知道是否有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T15:38:03.840

解决方案 1：将您的按钮放在一个按钮中`NSArray`，当用户单击一个按钮时，检查另一个按钮是否突出显示。如果`YES`，取消突出显示它并突出显示按下的那个。如果`NO`，则直接突出显示按下的那个。

解决方案 2：您可以将突出显示的按钮保存在声明的全局变量中`@interface`或`@property`. 当用户单击新的取消突出显示前一个。

# jquery - 检查所有复选框的jquery前向兼容性问题

> ID：15027664
> 
> 赞同：1
> 
> 时间：2013-02-22T15:34:38.530
> 
> 标签：jquery, asp.net

我有一个使用 1.8.3.js 的 jquery 的 js 函数，但是当我更新到 1.9.1.js 时它退出了。在这一点上我真的对jquery一无所知（它在要研究的东西列表中，很快就会出现），所以我真的无法通过查看它来判断问题可能出在哪里。这是代码：

```
<script type="text/javascript">
  var allCheckBoxSelector = '#<%=GridView1.ClientID%> 
         input[id*="chkAll"]:checkbox';
  var checkBoxSelector = '#<%=GridView1.ClientID%> 
         input[id*="chkSelected"]:checkbox';

  function ToggleCheckUncheckAllOptionAsNeeded()
  {
    var totalCheckboxes = $(checkBoxSelector),
           checkedCheckboxes = totalCheckboxes.filter(":checked"),
           noCheckboxesAreChecked = (checkedCheckboxes.length === 0),
           allCheckboxesAreChecked = (totalCheckboxes.length ===
           checkedCheckboxes.length);

     $(allCheckBoxSelector).prop('checked', allCheckboxesAreChecked);
    }

    $(document).ready(function ()
    {
      $(allCheckBoxSelector).live('click', function ()
      {
        $(checkBoxSelector).prop('checked', $(this).is(':checked'));

        ToggleCheckUncheckAllOptionAsNeeded();
      });

      $(checkBoxSelector).live('click', ToggleCheckUncheckAllOptionAsNeeded);

      ToggleCheckUncheckAllOptionAsNeeded();
  });
</script> 
```

关于这里的问题有什么建议吗？同样，当引用 1.8.3.js 时，它工作得很好，但是当使用 1.9.1.js 时，选中“全选”框没有任何效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T15:41:22.427

该`.live()`函数在 jQuery 1.7 中被弃用，最终在 jQuery 1.9 中完全删除。您的代码不再有效，因为您试图调用一个不再存在的函数。`.live()`使用委托事件语法代替`.on()`. 所以改变这个：

```
$(allCheckBoxSelector).live('click', function () {
    $(checkBoxSelector).attr('checked', $(this).is(':checked'));
    ToggleCheckUncheckAllOptionAsNeeded();
});

$(checkBoxSelector).live('click', ToggleCheckUncheckAllOptionAsNeeded); 
```

对此：

```
$(document).on('click', allCheckBoxSelector, function () {
    $(checkBoxSelector).prop('checked', $(this).is(':checked'));
    ToggleCheckUncheckAllOptionAsNeeded();
});

$(document).on('click', checkBoxSelector, ToggleCheckUncheckAllOptionAsNeeded); 
```

有关转换为 的更多详细信息`.live()`，`.on()`请参阅 的[API 文档`.live()`](http://api.jquery.com/live/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T15:42:05.970

.live 已在 1.9 中删除

尝试更换：

```
$(checkBoxSelector).live('click', ToggleCheckUncheckAllOptionAsNeeded); 
```

和

```
$(document).on('click',checkBoxSelector, ToggleCheckUncheckAllOptionAsNeeded); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T15:37:53.653

对复选框使用 .prop 而不是 .attr。

```
$(checkBoxSelector).prop('checked', $(this).is(':checked')); 
```

# android - android 按钮 GPIO 映射

> ID：15027665
> 
> 赞同：0
> 
> 时间：2013-02-22T15:34:38.640
> 
> 标签：android

我们正在设计运行 android 的 ah/w 平台（ARM CPU）。我们已经定义了一些 GPIO 引脚来充当 android 按钮（HOME、MENU、VOL+、...）。我们如何告诉android什么GPIO对应什么按钮？看起来没有办法让 f/w（u-boot）将该信息传递给 android 内核。我查看了 android 内核，但在 ./drivers/.. 中什么也没找到。谢谢 -jfs

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T13:17:07.853

实际上，特定于您设备的配置（例如此类）通常位于 Android 源代码中的设备树中。在这种情况下，您需要创建一个键布局文件，将 gpio 索引（对于 ARM i.MX，GPIO 块 + 引脚的组合）映射到您希望它执行的功能。

我不确定这是否仍然与最新版本相关，但值得一试。 [https://source.android.com/devices/input/key-layout-files](https://source.android.com/devices/input/key-layout-files)

# javascript - collection.fetch() 没有给我回应

> ID：15027666
> 
> 赞同：0
> 
> 时间：2013-02-22T15:34:44.257
> 
> 标签：javascript, backbone.js

```
exports.definition = {

    config : {
        // table schema and adapter information
    },

    extendModel: function(Model) {      
        _.extend(Model.prototype, {
            // Extend, override or implement the Backbone.Model methods                     
        });
        return Model;
    },

    extendCollection: function(Collection) {        
        _.extend(Collection.prototype, {

        }); // end extend

        return Collection;
    }
} 
```

当我尝试做`var model = Alloy.createCollection('model');`

```
alert(appointments.fetch()); 
```

我没有得到任何结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:39:27.357

`fetch`是异步的。因此，它将返回一个承诺，或者您需要设置一个回调：

```
appointments.fetch().done(function( r ) { console.log(r) }); 
```

另外，永远不要用于`alert`调试；这是没用的。始终打开您的控制台并使用`console.log`

# ruby-on-rails - 部署到 Heroku 时出现不同的页面

> ID：15027676
> 
> 赞同：5
> 
> 时间：2013-02-22T15:35:11.813
> 
> 标签：ruby-on-rails, heroku, asset-pipeline

我尝试使用一些[Kendo UI](http://www.kendoui.com/)小部件，它们在开发中运行良好。但是当我将我的应用程序部署到 Heroku 时，它的外观发生了巨大的变化。

我用 TreeView 小部件编写了一个示例页面。这是它在开发中的呈现方式：

![开发中的树视图](../Images/54925fd8f5ee8bc71b4f370d8378c857.png)

在 Heroku 上生产：

![生产中的树视图](../Images/33ab6bb270a5e8b33412a03509f56276.png)

可以看出，缺少列表标记（树标记？）。

我怀疑这个问题与资产管道有关，因为这样做`rake assets:precompile`也会破坏开发中的东西（并将`rake assets:clean`其恢复）。但这让我感到困惑，因为我的[Bootstrap](http://twitter.github.com/bootstrap/)标头在开发和生产中都可以正常工作（尽管 Heroku 日志中存在一些`ActionController::RoutingError (No route matches [GET] "/assets/Bootstrap/loading.gif")`错误）。

**宝石文件**：

```
source 'https://rubygems.org'

gem 'rails'
gem "ancestry"
gem "bootstrap-sass"
gem "will_paginate"
gem "bootstrap-will_paginate"
gem "truncate_html"
gem "slim-rails"
gem "kendoui-rails"

group :development, :test do
  gem 'sqlite3'
  gem 'rspec-rails'
  gem "minitest"

  platform :ruby do
    gem 'therubyracer'
  end
end

group :test do
  gem 'capybara'
end

group :development do
  gem "nifty-generators"
  gem "annotate"
end

group :production do
  gem 'pg'
end

group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails', '~> 2.1.3'

gem 'bcrypt-ruby', require: 'bcrypt' 
```

**开发.rb**：

```
config.cache_classes = false
config.whiny_nils = true
config.consider_all_requests_local       = true
config.action_controller.perform_caching = false
config.action_mailer.raise_delivery_errors = false
config.active_support.deprecation = :log
config.action_dispatch.best_standards_support = :builtin
config.active_record.mass_assignment_sanitizer = :strict
config.active_record.auto_explain_threshold_in_seconds = 0.5
config.assets.compress = false
config.assets.debug = true 
```

**生产.rb**：

```
config.cache_classes = true
config.consider_all_requests_local       = false
config.action_controller.perform_caching = true
config.serve_static_assets = false
config.assets.compress = true
config.assets.compile = false
config.assets.digest = true
config.i18n.fallbacks = true
config.active_support.deprecation = :notify 
```

有谁知道如何解决这个问题？任何帮助表示赞赏。

* * *

**更新 1**。

谢谢大家的意见，这里是附加信息。

Heroku 日志：

```
2013-02-23T02:37:50+00:00 app[web.1]: Started GET "/environment_test/index" for 193.169.36.82 at 2013-02-23 02:37:50 +0000
2013-02-23T02:37:50+00:00 app[web.1]: Processing by EnvironmentTestController#index as HTML
2013-02-23T02:37:50+00:00 app[web.1]:   Rendered environment_test/index.html.slim within layouts/application (23.3ms)
2013-02-23T02:37:50+00:00 app[web.1]:   Rendered layouts/_header.slim (57.2ms)
2013-02-23T02:37:50+00:00 app[web.1]: Completed 200 OK in 159ms (Views: 158.7ms | ActiveRecord: 0.0ms)
2013-02-23T02:37:50+00:00 heroku[router]: at=info method=GET path=/environment_test/index host=biotriz.herokuapp.com fwd="193.169.36.82" dyno=web.1 queue=0 wait=2ms connect=20ms service=394ms status=200 bytes=1253
2013-02-23T02:37:50+00:00 heroku[router]: at=info method=GET path=/assets/application-43a283ce09b9af356379df3e89b8b1cc.css host=biotriz.herokuapp.com fwd="193.169.36.82" dyno=web.1 queue=0 wait=0ms connect=1ms service=10ms status=200 bytes=186674
2013-02-23T02:37:51+00:00 heroku[router]: at=info method=GET path=/assets/application-8ac08b06d5d57f91da7af9d1e1c345c0.js host=biotriz.herokuapp.com fwd="193.169.36.82" dyno=web.1 queue=0 wait=7ms connect=20ms service=64ms status=200 bytes=648803
2013-02-23T02:37:55+00:00 heroku[router]: at=info method=GET path=/favicon.ico host=biotriz.herokuapp.com fwd="193.169.36.82" dyno=web.1 queue=0 wait=0ms connect=0ms service=5ms status=200 bytes=0
2013-02-23T02:37:55+00:00 app[web.1]: Started GET "/environment_test/index.json" for 193.169.36.82 at 2013-02-23 02:37:55 +0000
2013-02-23T02:37:55+00:00 app[web.1]: Processing by EnvironmentTestController#index as JSON
2013-02-23T02:37:55+00:00 heroku[router]: at=info method=GET path=/assets/glyphicons-halflings-white-6cccd17a7aed91dbc0157d343c68c0d9.png host=biotriz.herokuapp.com fwd="193.169.36.82" dyno=web.1 queue=0 wait=0ms connect=3ms service=66ms status=200 bytes=8777
2013-02-23T02:37:55+00:00 app[web.1]: Completed 200 OK in 104ms (Views: 0.6ms | ActiveRecord: 31.9ms)
2013-02-23T02:37:55+00:00 app[web.1]: Started GET "/assets/Bootstrap/loading.gif" for 193.169.36.82 at 2013-02-23 02:37:55 +0000
2013-02-23T02:37:55+00:00 app[web.1]: 
2013-02-23T02:37:55+00:00 app[web.1]: ActionController::RoutingError (No route matches [GET] "/assets/Bootstrap/loading.gif"):
2013-02-23T02:37:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
2013-02-23T02:37:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
2013-02-23T02:37:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/rack/logger.rb:32:in `call_app'
2013-02-23T02:37:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/rack/logger.rb:16:in `block in call'
2013-02-23T02:37:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.12/lib/active_support/tagged_logging.rb:22:in `tagged'
2013-02-23T02:37:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/rack/logger.rb:16:in `call'
2013-02-23T02:37:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/middleware/request_id.rb:22:in `call'
2013-02-23T02:37:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
2013-02-23T02:37:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
2013-02-23T02:37:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.12/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
2013-02-23T02:37:55+00:00 heroku[router]: at=info method=GET path=/assets/Bootstrap/loading.gif host=biotriz.herokuapp.com fwd="193.169.36.82" dyno=web.1 queue=0 wait=1ms connect=12ms service=56ms status=404 bytes=728
2013-02-23T02:37:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
2013-02-23T02:37:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/middleware/static.rb:62:in `call'
2013-02-23T02:37:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward'
2013-02-23T02:37:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:245:in `fetch'
2013-02-23T02:37:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:185:in `lookup'
2013-02-23T02:37:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:66:in `call!'
2013-02-23T02:37:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call'
2013-02-23T02:37:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/engine.rb:479:in `call'
2013-02-23T02:37:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/application.rb:223:in `call'
2013-02-23T02:37:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
2013-02-23T02:37:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/rack/log_tailer.rb:17:in `call'
2013-02-23T02:37:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
2013-02-23T02:37:55+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:111:in `service'
2013-02-23T02:37:55+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:70:in `run'
2013-02-23T02:37:55+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/server.rb:183:in `block in start_thread'
2013-02-23T02:37:55+00:00 app[web.1]: 
2013-02-23T02:37:55+00:00 app[web.1]: 
2013-02-23T02:37:55+00:00 heroku[router]: at=info method=GET path=/environment_test/index.json host=biotriz.herokuapp.com fwd="193.169.36.82" dyno=web.1 queue=0 wait=6ms connect=16ms service=121ms status=200 bytes=390
2013-02-23T02:37:55+00:00 app[web.1]: Started GET "/assets/Bootstrap/sprite.png" for 193.169.36.82 at 2013-02-23 02:37:55 +0000
2013-02-23T02:37:55+00:00 app[web.1]: 
2013-02-23T02:37:55+00:00 app[web.1]: ActionController::RoutingError (No route matches [GET] "/assets/Bootstrap/sprite.png"):
2013-02-23T02:37:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
2013-02-23T02:37:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
2013-02-23T02:37:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/rack/logger.rb:32:in `call_app'
2013-02-23T02:37:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/rack/logger.rb:16:in `block in call'
2013-02-23T02:37:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.12/lib/active_support/tagged_logging.rb:22:in `tagged'
2013-02-23T02:37:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/rack/logger.rb:16:in `call'
2013-02-23T02:37:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/middleware/request_id.rb:22:in `call'
2013-02-23T02:37:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
2013-02-23T02:37:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
2013-02-23T02:37:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.12/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
2013-02-23T02:37:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
2013-02-23T02:37:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/middleware/static.rb:62:in `call'
2013-02-23T02:37:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward'
2013-02-23T02:37:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:245:in `fetch'
2013-02-23T02:37:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:185:in `lookup'
2013-02-23T02:37:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:66:in `call!'
2013-02-23T02:37:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call'
2013-02-23T02:37:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/engine.rb:479:in `call'
2013-02-23T02:37:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/application.rb:223:in `call'
2013-02-23T02:37:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
2013-02-23T02:37:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/rack/log_tailer.rb:17:in `call'
2013-02-23T02:37:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
2013-02-23T02:37:55+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:111:in `service'
2013-02-23T02:37:55+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:70:in `run'
2013-02-23T02:37:55+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/server.rb:183:in `block in start_thread'
2013-02-23T02:37:55+00:00 app[web.1]: 
2013-02-23T02:37:55+00:00 app[web.1]: 
2013-02-23T02:37:55+00:00 heroku[router]: at=info method=GET path=/assets/Bootstrap/sprite.png host=biotriz.herokuapp.com fwd="193.169.36.82" dyno=web.1 queue=0 wait=0ms connect=1ms service=7ms status=404 bytes=728
2013-02-23T02:38:19+00:00 app[web.1]: Started GET "/environment_test/index.json?id=33" for 193.169.36.82 at 2013-02-23 02:38:19 +0000
2013-02-23T02:38:19+00:00 app[web.1]: Processing by EnvironmentTestController#index as JSON
2013-02-23T02:38:19+00:00 app[web.1]:   Parameters: {"id"=>"33"}
2013-02-23T02:38:19+00:00 app[web.1]: Completed 200 OK in 17ms (Views: 0.4ms | ActiveRecord: 14.0ms)
2013-02-23T02:38:19+00:00 heroku[router]: at=info method=GET path=/environment_test/index.json?id=33 host=biotriz.herokuapp.com fwd="193.169.36.82" dyno=web.1 queue=0 wait=0ms connect=1ms service=26ms status=200 bytes=266 
```

在我的清单 CSS 文件 ( **application.css** ) 中包含两个与 Kendo 相关的 CSS 文件：**kendo.common.min.css**（包含通用代码，[未压缩版本](http://paste.fedoraproject.org/3668/)）和**kendo.bootstrap.min.css**（主题特定代码，[未压缩版本](http://paste.fedoraproject.org/3667/)）。

顺便说一下，gem中的`vendor`目录结构如下：`kendoui-rails`

```
vendor
└── assets
    ├── javascripts
    │   └── ...
    └── stylesheets
        └── kendo
            ├── Bootstrap
            │   ├── editor.png
            │   ├── imagebrowser.png
            │   ├── loading.gif
            │   ├── loading-image.gif
            │   ├── slider-h.gif
            │   ├── slider-v.gif
            │   └── sprite.png
            ├── ... # Some other theme-specific dirs
            ├── kendo.bootstrap.min.css
            ├── kendo.common.min.css
            └── ... # Some other theme-specific CSS's 
```

文件**kendo.bootstrap.min.css**包含引用图像（`url('Bootstrap/sprite.png')`和`url('Bootstrap/loading.gif')`）的代码，这些图像未在生产中显示（但它们存在于`Bootstrap`目录中），所以我认为 Chris Rueber 是正确的。那么我该如何解决呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T02:36:10.267

将`Bootstrap`文件夹移动到`vendor/assets/images`（如果不存在，则创建它）。查看[http://guides.rubyonrails.org/asset_pipeline.html#css-and-sass](http://guides.rubyonrails.org/asset_pipeline.html#css-and-sass)了解更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T15:44:15.780

实际上，[该问题](https://github.com/kendo-labs/kendo-rails/issues/2)在[KendoUI-Rails github](https://github.com/kendo-labs/kendo-rails)存储库的问题中有所描述。由于合并了 css 文件，它似乎出现在预编译 assets 之后。这样，`.png`文件的正确路径就会丢失。您可以通过设置 debug off 来重现生产中的错误，如下所示（在您的 中`development.rb`）：

```
config.assets.debug = false 
```

一种可能的解决方法是包含与`.css`资产管道分开的文件，如下所示：

```
<link rel="stylesheet" href="../assets/kendo/kendo.bootstrap.min.css"> 
```

但是，正如票据[@fadzlan](https://github.com/fadzlan)的作者所解释的那样，这将导致`css`资产由.`application server`而不是`web server`.

# javascript - listenTo 不触发事件

> ID：15027677
> 
> 赞同：0
> 
> 时间：2013-02-22T15:35:12.297
> 
> 标签：javascript, backbone.js

我正在尝试执行我的视图的渲染方法，但由于某种原因它告诉我`Uncaught TypeError: Cannot call method 'listenTo' of undefined`，不太清楚为什么。

```
var App = Backbone.View.extend({
    current_election_index: 0,
    el: 'body',
    initialize: function() {
        elections = new Elections();
        _.bindAll(this, 'render');
        this.listenTo(this, 'change', this.render);
        elections.fetch();
/*      elections.fetch({
            success: function(test) {
                console.warn(this.App.render());
                this.render();
            }*/

        // });
    },

    render: function () {
        console.log('this is the render method');
        var view = new ElectionView({model: elections.at(0)})
    }
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T17:16:50.223

你想做的就是听`elections`。所以与其听`this.model`or `this`，

```
this.listenTo(elections, 'reset', this.render); 
```

“`reset`当集合的全部内容已被替换时”在集合上触发。“`change`当模型的属性发生变化时”在模型上触发事件。有关详细信息，请参阅事件的主干[目录](http://backbonejs.org/#Events-catalog)。

如果您想在属于`elections`集合的每个模型发生更改时更新视图，请务必在每个`ElectionView`子视图中执行此操作，而不是在`App`视图中。

# php - 在发送到客户端之前从 JSON 中剥离的数据

> ID：15027678
> 
> 赞同：0
> 
> 时间：2013-02-22T15:35:12.910
> 
> 标签：php, sencha-touch, jsonp, expressionengine

我遇到了 JSONP 请求未完整返回给客户端的问题（Sencha Touch 1.1）。我将 PHP 5.2.5 与 Apache2 一起使用。该请求是通过表达式引擎模板构建的，并使用标头“Content-type: text/javascript; charset=utf-8”发送。打开输出缓冲。我必须在它发送正确的标题之前手动刷新，否则它将作为“text/html”发送。

我已经在本地测试了代码，它确实构建并正确返回了请求。在 prod 和 dev 上，它将删除请求的内容。例子：

```
stcCallback1001(,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,]}); 
```

我认为这是一个环境或安全策略问题，因为它确实在我使用 XAMPP Apache2/PHP 5.3.8 的机器上正常工作。下面的一段代码：

```
$stores = array();
foreach ($results as $key => $value)
{
    $week = ($value['field_id_51'] == 'Y') ? '24hrs' : $value['field_id_49'] . '-' . $value['field_id_50'];
    $sat =  ($value['field_id_54'] == 'Y') ? '24hrs' : $value['field_id_52'] . '-' . $value['field_id_53'];
    $sun =  ($value['field_id_57'] == 'Y') ? '24hrs' : $value['field_id_55'] . '-' . $value['field_id_56'];
    $dist = distance($lat, $lon, $value['field_id_58'], $value['field_id_59']);

    if ($dist <= $rad)
    {
        $stores[] = array(
            "store_id" =>   (string)$value['title'],
            "street" =>     (string)$value['field_id_43'],              
            "city" =>       (string)$value['field_id_44'],
            "state" =>      (string)$value['field_id_45'],
            "zip" =>        (string)$value['field_id_46'],
            "phone" =>      (string)$value['field_id_41'],
            "fax" =>        (string)$value['field_id_42'],          
            "pharm" =>      (string)$value['field_id_47'],
            "pharm_2" =>    (string)$value['field_id_48'],
            "week" =>       (string)$week,
            "sat" =>        (string)$sat,
            "sun" =>        (string)$sun,
            "lat" =>        (string)$value['field_id_58'],
            "lon" =>        (string)$value['field_id_59'],
            "distance" =>   (string)$dist,
        );      
    }
}

$totalResults = count($stores);
$stores = ($totalResults > 0) ? subval_sort($stores, 'distance') : '';
$push = array(
    "latitude" => $lat,
    "longitude" => $lon,        
    "radius" => $rad,
    "numResults" => $totalResults,
    "stores" => $stores
);

$callback = (isset($_GET['callback'])) ? ($_GET['callback']) : null;
    if($callback) {
         header('Content-type: text/javascript; charset=utf-8');
     echo $callback . '(' . json_encode($push) . ');';
         flush();
    }
    else {
         header('Content-type: application/x-json; charset=utf-8');
     echo json_encode($push);
         flush();
    } 
```

该代码之前在 prod 上工作而没有刷新。我以前从来没有遇到过问题。我已验证在服务器上正确创建了 JSON。它似乎在运输过程中被修改。寻找关于它可能是什么和可能的解决方案的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:39:36.340

问题可能出在压缩头上，可能是由 gzip 等不同的压缩方法引起的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T17:36:44.113

显然 PHP 脚本存在内存问题，导致它在输出之前没有创建 JSON。我不确定这个问题是如何开始的，因为我不负责维护服务器环境。为了解决这个问题，我添加了一个：

```
die(); 
```

在脚本结束时取消执行。我还拨通了`flush()`. 这导致了预期的正确输出。

# iphone - 更改 UISearchBar 中取消按钮的框架

> ID：15027679
> 
> 赞同：5
> 
> 时间：2013-02-22T15:35:13.097
> 
> 标签：iphone, frame, uisearchbar

我有以下代码来更改我的应用程序中 UISearchBar 的外观，它也可以在下图中看到：

```
for(int i = 0; i < [[searchBar subviews] count]; i++){
    UIView *subView = [[searchBar subviews] objectAtIndex:i];
    if([[NSString stringWithFormat:@"%@", [subView class]] isEqualToString:@"UINavigationButton"]){
        UIButton *cancelButton = (UIButton *)subView;

        CGRect buttonFrame = cancelButton.frame;
        buttonFrame.size.height = 52;
        [cancelButton setFrame:buttonFrame];

        [cancelButton setTitle:@"Cancel" forState:UIControlStateNormal];
        [cancelButton setBackgroundImage:[UIImage imageNamed:@"cancel.png"] forState:UIControlStateNormal];
        [cancelButton setBackgroundImage:[UIImage imageNamed:@"cancel_pressed.png"] forState:UIControlStateHighlighted];
    }
} 
```

如您所见，我正在尝试更改 UISearchBar 中包含的按钮的高度，但没有成功。我确实得到了对按钮的引用，因为我可以更改文本并且背景图像被更改，而不是框架的高度。我希望按钮的高度与 52px 的搜索框相同。

![在此处输入图像描述](../Images/d7ab818a26c29350ca5420117396368c.png)

**编辑：**

我找到了一个非常 hacky 的解决方案，但是添加 UIButton 作为取消按钮的子视图并不是很优雅。它完成了这项工作，但正如我所说，它不是很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-05T11:25:00.887

其实你可以使用下面的方法来访问取消按钮：

```
UIBarButtonItem *cancelButton = [UIBarButtonItem appearanceWhenContainedIn:[UISearchBar class], nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-11T13:51:58.023

所以我`-layoutSubViews`用这个覆盖，但我有两个问题

我讨厌遍历视图以找到匹配的视图，这会使动画有点混乱

```
- (UIButton *)cancelButton {
    for (UIView *v in self.subviews) {
        if ([v isKindOfClass:[UIButton class]]) {
            NSString *caption = [[((UIButton *)v) titleLabel] text];
            if ([caption isEqualToString:@"Cancel"] )
                return (UIButton *)v;
        }
    }
    return nil;
}

- (BOOL)cancelButtonIsShowing {
    return ([self cancelButton] != nil);
}

- (void)layoutSubviews {
    [super layoutSubviews];
    if ([self cancelButtonIsShowing]) {
        UIButton *cancelButton = [self cancelButton];

        UIImage *i = [UIImage imageNamed:@"Cancel_BTN"];
        CGRect f = CGRectMake(267, 5, i.size.width, i.size.height);
        cancelButton.frame = f;
    }
} 
```

# html - 使用 css3 选择器的 N 级斑马条纹？

> ID：15027681
> 
> 赞同：5
> 
> 时间：2013-02-22T15:35:18.203
> 
> 标签：html, css, recursion, zebra-striping

我们的 .less 文件中有一个基本的斑马条纹图案，用于`.list-striped`.

我们甚至让它适用于嵌套列表，也就是它反转选择器，否则您最终会得到父列表项，而子项的第一个列表项具有相同的样式而不是相反的样式。

这工作正常，但是，我们想要 N 级深度，所以我们真的不想只是将样式嵌套到我们认为用户会嵌套的任何东西之上，我们希望有一些东西可以整理一下并使其适用于 N 级而不是 2 级列表？

我在想我需要一些`nth-child(even)/nth-child(odd)`关于嵌套的魔法`.list-item`？

*   C1
    *   C2
        *   C1
        *   C2
    *   C1
        *   C2
    *   C2
*   C2
*   C1
*   C2

html基本上是

```
<div class="list-striped">
    <div class="list-item">
        <a class="title">List title</a>

        <!-- Start N-Level Nesting -->
        <div class="list-striped">
            <div class="list-item">
                <a class="title">List title</a>
                <!-- We could duplicate the n-level nesting item here as 
                     much as we want -->
            </div>
        </div>
        <!-- End N-level Nesting -->

    </div>

    <div class="list-item">
        <a class="title">List title</a>

        <!-- Start N-Level Nesting -->
        <div class="list-striped">
            <div class="list-item">
                <a class="title">List title</a>
                <!-- We could duplicate the n-level nesting item here as 
                     much as we want -->
            </div>
        </div>
        <!-- End N-level Nesting -->

    </div>
</div> 
```

### 和CSS

```
div {
  .list-striped {

    .list-item:nth-child(odd) {

      a {
        background-color: @tableBackgroundAccent;
      }

      .list-striped {

        .list-item:nth-child(odd) a {
          background-color: @white;
        }

        .list-item:nth-child(even) a {
          background-color: @tableBackgroundAccent;
        }
      }

    }

    .list-item:nth-child(even) {

      a {
        background-color: @white;
      }

      .list-striped {

        .list-item:nth-child(even) a {
          background-color: @white;
        }

        .list-item:nth-child(odd) a {
          background-color: @tableBackgroundAccent;
        }
      }

    }

  }

  &.list-hover {
    .list-item:hover a {
      background-color: @tableBackgroundHover;
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-17T12:46:07.250

在 sass 中不是一个完全完成的解决方案，但这是一个 css 解决方案，并且在评论中是针对您的问题的一个正在进行的 sass 解决方案。

[http://codepen.io/sp90/pen/eNOZZz](http://codepen.io/sp90/pen/eNOZZz)

HTML：

```
<ul>
    <li>ho</li>
    <li>ho</li>
    <li>ho
        <ul>
            <li>foo</li>
            <li>foo</li> 
            <li>foo</li>
            <li>foo</li>            
        </ul>
    </li>
    <li>ho
        <ul>
            <li>foo</li>
            <li>foo</li>    
            <li>foo</li>
            <li>foo</li>        
        </ul>
    </li>
    <li>ho</li>
</ul> 
```

萨斯：

```
ul {
  > li:nth-child(even) {
    background: red;
    ul li:nth-child(even) {
      background: red;
    }
    ul li:nth-child(odd) {
      background: blue;
    }
  }
  > li:nth-child(odd) {
    background: blue;
    ul li:nth-child(odd) {
      background: red;
    }
    ul li:nth-child(even) {
      background: blue;
    }
  }

} 
```

# wpf - 奇怪的问题 - 弹出窗口中的鼠标点击被下面的控件捕获

> ID：15027694
> 
> 赞同：6
> 
> 时间：2013-02-22T15:35:56.163
> 
> 标签：wpf

我正在显示 a`Popup`以响应按钮单击 ( `popup.IsOpen = true;`)。弹出窗口包含一个组合框，当我单击组合框中的一个项目时，SelectionChanged 事件所做的一件事就是隐藏弹出窗口。

弹出窗口出现`DataGrid`在我的页面上，我发现鼠标单击组合框也被我在 DataGrid 上的 MouseUp 事件拾取。知道发生了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T19:08:05.850

[`MouseUp`](http://msdn.microsoft.com/en-us/library/system.windows.uielement.mouseup.aspx)Event 有一个类型为 的路由策略`Bubbling`。使用这种策略的事件会向上传递到父控件。由于`Popup`是 的孩子`DataGrid`，因此事件将“冒泡”到`DataGrid`。如果您不希望事件冒泡，您可以尝试使用[`PreviewMouseUp`](http://msdn.microsoft.com/en-us/library/system.windows.uielement.previewmouseup.aspx)，它具有`Tunneling`路由策略，并将“隧道”沿着链向下传递到子控件。这是一个体面[`overview`](http://www.kirupa.com/net/event_bubbling_tunneling.htm)的`Routing Strategies`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-21T09:52:02.920

我遇到了同样的问题。奇怪的是，在调试器中运行代码时不会发生这种情况——它只会在发布版本中发生。它确实似乎是 WPF 中的一个错误。试图捕捉点击并将事件设置为已处理是行不通的。

我的解决方法是，当弹出窗口打开时，告诉下面的控件忽略单击。

# algorithm - 比较两种算法的复杂度

> ID：15027695
> 
> 赞同：0
> 
> 时间：2013-02-22T15:35:56.927
> 
> 标签：algorithm, complexity-theory

我们有两种算法在 Visual C++ 2010 中实现并且运行良好。我们知道其中一个的复杂度是n*log(n)，另一个是n^2。但是我如何才能真正“测量”运行它们所需的时间呢？问题是它们运行得非常快，只有几微秒。我可以以这种精度进行测量，还是可以例如计算每个所需的 CPU 周期？在它们的每个循环中添加延迟是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T16:00:09.507

好吧，如果您的输入很小，则运行时间的渐近测量意味着蹲下，因为常数可能不可忽略，必须考虑在内。

大 O 表示法很有用，并且仅对大输入大小（对于每个算法对`n>N`的某些常数的所有输入大小）正确预测“哪种算法更好”。`N`

* * *

要衡量这两种算法中哪一种更好，您应该尝试经验和统计方法。
（自动）生成数千个（或更多）不同的测试用例，并在测试用例上运行算法。在开始运行基准测试之前不要忘记预热系统。

找出每个测试用例算法所花费的时间（纳秒），并使用统计方法比较两者 - 您可以查看平均时间。

您还应该运行**[统计测试](http://en.wikipedia.org/wiki/Statistical_hypothesis_testing)**- 例如[**Wilcoxon 测试**](http://en.wikipedia.org/wiki/Wilcoxon_signed-rank_test)，以确定运行时间之间的差异是否具有统计意义。

**重要提示：**请注意，对于不同的机器或不同的输入分布，结果可能会有所不同 - 测试让您对特定的机器和测试用例分布充满信心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T16:21:53.883

典型的“测试平台”（继承自 C）如下所示：

```
#define n 20
#define itera 10000000

int main(int argc, char* argv[])
{
    clock_t started;
    clock_t stopped;
    double duration;

    started = clock();

    for (unsigned long i = 0; i < itera; i++)
    {   
      for (unsigned k = 0; k < n; k++)
      {
         ....
      }
    }

    stopped = clock();

    duration = (double)(stopped - started) / CLOCKS_PER_SEC;

} 
```

常见的陷阱：

编译器可能会优化您的代码，导致结果具有误导性。（例如，如果您分配了一个变量并且以后不使用该变量，则可能会省略计算和分配）

在执行测试时，您的系统可能正忙于其他事情。经常重复测试。

缓存效果可能会影响速度。如果磁盘访问时间起作用或涉及大量内存，则尤其如此。

算法的性能通常取决于测试数据。

测试台的外循环可能比实际算法花费更多时间。测量空循环以考虑此影响。

# java - 无法在 JAVA 中将变量从子级返回给父级（选项窗口）

> ID：15027696
> 
> 赞同：1
> 
> 时间：2013-02-22T15:36:01.897
> 
> 标签：java, class, netbeans, methods, sql-server-mars

开始 - 下午 3:00

更新 1 - 下午 5:36

在 Option() 类中应用按钮：

```
 private void cmdApplyActionPerformed(java.awt.event.ActionEvent evt) {                                         
    // TODO add your handling code here:

    hud.setTime(btnTxtTime);
    hud.setTemp(btnTxtTemp);
    hud.setSurface(btnTxtSurface);
    hud.setWeather(btnTxtWeather);
    hud.setRadiation(btnTxtRadiation);
    dispose();

} 
```

这是 Option() 类的一部分。

```
 public class Options extends javax.swing.JFrame {

public String btnTxtTime;
public String btnTxtTemp;
public String btnTxtSurface;
public String btnTxtWeather;
public String btnTxtRadiation;
public static boolean ApplyClicked;

/**
 * Creates new form Profile
 */

private HUD hud;

public Options(HUD hud) {
    initComponents();
    this.hud = hud;

} 
```

这是 Option() 类中的一个方法：

```
 public String getTime() {

    if ("Day".equals(grpTimeOfDay.getSelection())) {
        btnTxtTime = "Day";
        return this.btnTxtTime;
    }

    if ("Night".equals(grpTimeOfDay.getSelection())) {
        btnTxtTime = "Night";
        return this.btnTxtTime;
    }
    return null;

} 
```

这是从 HUD() 中打开 Options() 的方式：

```
 private void cmdOptionsActionPerformed(java.awt.event.ActionEvent evt) {                                           
    // TODO add your handling code here:

   Options o = new Options(hud);
    this.getLocation(p);
    o.setLocation((int) p.getX() + 100, (int) p.getY() + 100);
    o.setVisible(true);
} 
```

这是我的 HUD() 类的开始：

```
 public abstract class HUD extends javax.swing.JFrame implements Runnable {

private Options o;
 private HUD hud;

public HUD(Options o) {

    initComponents();
    this.o = o; 
```

这是来自 HUD() 的方法，它从 Options() 中获取 JButtons 的值：

```
 public void setTime(String strTime) {

    strTime = o.getTime();
    txtTime.setText(strTime);
} 
```

但是，每当我单击“应用”时，Options() 中设置的选项就不会像应有的那样在 HUD() 中显示它们的 TextFields 中设置：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:40:58.987

浏览您非常冗长的代码示例很困难，但是请查看您的`cmdApplyActionPerformed()`方法。您正在创建 a`new HUD()`并在其中设置值......然后对它完全不做任何事情。

如果您尝试使用“应用”按钮来修改现有`HUD`对象，则您的类需要在某处引用它。如果`HUD`是创建 的父类`Options`，请尝试`Options`在其构造函数中存储对父类的引用。然后，当您在 中执行这样的更改时`Options`，您可以在父变量上执行它们，而不是在无效的新变量上执行它们。

```
private HUD parent;

/**
 * Creates new form Profile
 */
public Options(HUD parent) {
    initComponents();
    this.parent = parent;
} 
```

然后，在您的事件处理程序中，您可以拥有...

```
parent.setTime(btnTxtTime);
parent.setTemp(btnTxtTemp);
parent.setSurface(btnTxtSurface);
parent.setWeather(btnTxtWeather);
parent.setRadiation(btnTxtRadiation);
dispose(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T15:42:00.450

据我了解，HUD 是您的“主窗口”，用户可以从该窗口访问此选项框。

但是当你申请时，你是在一个*新*的HUD 上设置属性，而不是你以前的那个。

要解决此问题，您需要在配置窗口中设置主窗口的句柄，以便您可以在其上设置属性。

在你的平视显示器中：

```
ConfigFrame config = new ConfigFrame();
config.setHUD(this);
config.setVisible(true); 
```

在你的配置中

```
private HUD hud;

public void setHUD(HUD hud){
   this.hud = hud;
} 
```

然后省略`HUD hud = new hud();`

# asp.net-mvc-3 - Javascript和字符编码

> ID：15027701
> 
> 赞同：0
> 
> 时间：2013-02-22T15:36:12.723
> 
> 标签：asp.net-mvc-3, character-encoding

在我的 ASP.NET MVC 3 项目中，我在母版页中设置了字符编码

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
```

那么，在我看来，我有

```
 <script type="text/javascript" charset='UTF-8'>
        $(function () {
            $('#my-btn').click(function () {
                  $(this).val('@MyProject.Resources.OrderButton');
            });
        });
    </script> 
```

是什么给了我价值`Zam&#243;w`而不是`Zamów`. 资源文件的第一行是：

```
<?xml version="1.0" encoding="utf-8"?> 
```

任何想法如何解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T15:38:59.257

将服务器端值传递给 javascript 变量的正确方法如下：

```
var value = @Html.Raw(Json.Encode(MyProject.Resources.OrderButton);
$(this).val(value); 
```

这将输出完全安全且正确编码的代码，以传递给 javascript 函数。这也将正确处理您的字符串包含字符的情况，例如`'`，新行，......这会破坏您的javascript代码。

而且您不应该关心某些字符是 HTML 还是任何编码的字符。重要的是它们将被正确编码以供浏览器或 HTML 兼容客户端正确使用。

# ruby-on-rails - Rails 3：将夹具转换为一组 ActionController::Parameters

> ID：15027704
> 
> 赞同：2
> 
> 时间：2013-02-22T15:36:20.257
> 
> 标签：ruby-on-rails, ruby, testing, fixtures

有没有办法将夹具转换为一组 ActionController::Parameters？

例如：

```
# contacts.yml

dan:
  first_name: Dan
  last_name: Gebhardt
  email: dan@example.com
  notes: Writes sample code without tests :/

joe:
  first_name: Joe
  last_name: Blow
  email: joe@example.com
  notes: Lousy plumber

# contacts_test.rb

@dan = contacts(:dan)
# create params that represent Dan?
@dan_as_params = ActionController::Parameters.new(???) 
```

任何和所有的帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T15:50:15.470

您可以将对象转换为 json 并返回到包含正确参数键的哈希，因此：

```
h= Hash[*JSON.load(@dan.to_json).map{ |k, v| [k.to_sym, v] }.flatten]
params= {contact: h} 
```

更新：

你也可以使用 JSON.parse

```
dan= Hash[*JSON.parse(@dan.to_json, symbolize_names: true).flatten]
params= {contact: dan} 
```

它有自己的内部方式将 json 键转换为符号。

# db2 - DB2 在线恢复但没有前滚？

> ID：15027707
> 
> 赞同：2
> 
> 时间：2013-02-22T15:36:29.217
> 
> 标签：db2, backup, restore

我阅读了很多关于 db2 restore 的文档，但我找不到如何从上次数据库备份执行在线恢复但没有日志前滚？

我会欣赏命令示例。

例如，我最后一次在线备份是在 2 月 1 日进行的。我想对该备份进行在线恢复，但在 2 月 1 日之后没有日志（类似于没有 ROLL FORWARD 的离线恢复选项）。

我正在使用 db2 9.7

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T13:36:49.203

数据库备份包含表空间的快照，它们可能处于不稳定状态。始终需要前滚（除非您想通过强制 DB2 开始使用可能损坏的数据来承担疯狂的风险）以达到最近的稳定状态。

如果您问您的问题是因为您想要可管理的数据库备份转储而不必担心传送日志等，请`INCLUDE LOGS`在进行备份时使用该选项。它将在备份文件中包含达到稳定状态所需的最小事务日志集。还原时，您可以使用`LOGS`提取它们，然后`ROLLFORWARD DATABASE`在所需的典型 0-x 秒内（取决于您的数据库事务）。

懒惰的 dba 可能只使用`RECOVER DB SAMPLE TO 2013-02-01-00.00.00`并让 DB2 担心所有细节。它将自动获取所需的数据库备份和事务文件（如果您正确设置它们，甚至可以从备份磁带等中获取），并为您做所有事情 - 只要您不尝试手动管理它们。

# android - 如何在 bindView 方法的匿名内部类中获取 FragmentActivity 引用？

> ID：15027709
> 
> 赞同：2
> 
> 时间：2013-02-22T15:36:39.210
> 
> 标签：android, android-cursoradapter

我试图`FragmentActivity`在`bindView`. `CursorAdapter`实际上，我正在尝试在我的 中单击`DialogFragment`an 时创建一个，与.`ImageView``ListView``SimpleCursorAdapter`

```
@Override
    public void bindView(View view, Context context, Cursor c) {
        super.bindView(view, context, c);

        ImageView geoEditIcon = (ImageView)view.findViewById(R.id.li_cdf_icon_geoedit);
        geoEditIcon.setImageResource(R.drawable.geolist_edit);
        geoEditIcon.setTag(c.getString(c.getColumnIndex(DBConstants.ID)));

        geoEditIcon.setOnClickListener(new OnClickListener(){
            @Override
            public void onClick(View v) {
              Log.i("geolist", "geoEditIcon clicked");
              String selectedGeoID = v.getTag().toString();
              Log.i("geolist", "geoEditIcon selected Id->"+selectedGeoID);

              EditGeofenceFragment editGeofenceFragment = new EditGeofenceFragment(v.getContext(),selectedGeoID);
              //what context i want to use in Show method
              editGeofenceFragment.show(getActivity().getSupportFragmentManager(), "editGeofenceFragment");
            }
        });
    } 
```

**更新 ：**

我已将 getSupportFragmentManager 引用传递给 MySimpleCursorAdapter 的构造函数，并在我的匿名内部类中使用它。这就是我的对话框片段显示方法。现在它工作正常。我在下面更新了我的代码。

```
public MySimpleCursorAdapter(Context context, FragmentManager fragmentManager, int layout, Cursor c,String[] from, int[] to, int flags) {
        super(context, layout, c, from, to, flags);
        this.context=context;
        this.fragmentManager=fragmentManager;
    }

    @Override
    public void bindView(View view, Context context, Cursor c) {
        super.bindView(view, context, c);

        ImageView geoEditIcon = (ImageView)view.findViewById(R.id.li_cdf_icon_geoedit);
        geoEditIcon.setImageResource(R.drawable.geolist_edit);
        geoEditIcon.setTag(c.getString(c.getColumnIndex(DBConstants.ID)));

        geoEditIcon.setOnClickListener(new OnClickListener(){
            @Override
            public void onClick(View v) {
              Log.i("geolist", "geoEditIcon clicked");
              String selectedGeoID = v.getTag().toString();
              Log.i("geolist", "geoEditIcon selected Id->"+selectedGeoID);

              EditGeofenceFragment editGeofenceFragment = new EditGeofenceFragment(v.getContext(),selectedGeoID);
              // Put fragmentManager in first parameter to show method.
              editGeofenceFragment.show(fragmentManager, "editGeofenceFragment");
            }
        });
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T15:50:21.257

由于您正在尝试获取对您的引用`FragmentManager`，因此您可以在您的内部保存`final`对您的引用，并将其传递给您的构造函数。`FragmentActivity``SimpleCursorAdapter``SimpleCursorAdapter`

```
private final FragmentActivity mFragmentActivity;

public YourSimpleCursorAdapter(Context context, FragmentActivity fragmentActivity) {
    // Deprecated in API 11, needed on < API 11 devices
    super(context, null);

    mFragmentActivity = fragmentActivity;
} 
```

然后在您的匿名内部类中使用该引用来获取您的`FragmentManager`.

```
editGeofenceFragment.show(mFragmentActivity.getSupportFragmentManager(), "editGeofenceFragment"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T15:53:16.857

您可以在构造函数中获取 Activity 上下文。只需将其保存在元素类中：

```
Context context;
public myCursorAdapter(Context context, Cursor c) {
this.context=context;
...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T15:48:11.847

您可以只使用传递给您的上下文。传递给您的`bindView`方法的上下文与您传递给创建`SimpleCursorAdapter`. 如果您需要在匿名内部类中使用它，而不仅仅是让它成为最终的。在方法调用或方法内的辅助变量上。例如：

```
@Override
public void bindView(View view, final Context context, Cursor c) {
  ...
  geoEditIcon.setOnClickListener(new OnClickListener(){
    @Override
    public void onClick(View v) {
      ...
      EditGeofenceFragment editGeofenceFragment = new EditGeofenceFragment(context,selectedGeoID);
      ...
    }
  });
} 
```

# php - 通过电子邮件回复消息

> ID：15027714
> 
> 赞同：-2
> 
> 时间：2013-02-22T15:36:45.310
> 
> 标签：php, email, zend-framework

我希望我的用户能够通过电子邮件回复我的……我们称之为*论坛*。当某些内容发布到他们正在观看的主题时，他们会收到一封电子邮件。我希望他们能够回复该电子邮件并让我的脚本以该用户的身份在主题中发布消息。

我的论坛是用 PHP + Zend 编写的，我的电子邮件提供商是 Google Apps for Businesses（即 GMail）。

有什么方法可以获取发送到特定地址的所有电子邮件并用 PHP（或 Python 或其他类似的东西，只要它不是 C）解析它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T15:41:00.553

看一下这个。

[http://code.google.com/p/php-imap/](http://code.google.com/p/php-imap/)

您可以很容易地设置一个接受电子邮件的环境，并让您创建一个脚本来处理信息并将其手动放入数据库中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-22T15:41:18.590

您可以通过 IMAP 或 POP 连接到 gmail 并获取电子邮件。

# ruby - 在 Serel gem 中使用与日期相关的范围（堆栈溢出 API）

> ID：15027718
> 
> 赞同：1
> 
> 时间：2013-02-22T15:36:55.877
> 
> 标签：ruby, api, gem, stackexchange-api

是否有人将[Serel](https://github.com/thomas-mcdonald/serel) gem 与其与日期相关的范围结合使用？例如，这有效

```
q = Serel::Question
questions = q.tagged("JavaScript").pagesize(2).get 
```

但这不会：

```
d = DateTime.new(2013,2,5)
q.fromdate(d).tagged("JavaScript").pagesize(2).get 
```

产生错误：

```
NoMethodError: undefined method `tagged' for 1359676800:Fixnum 
```

非常感谢WJG

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T15:58:22.863

原来这是一个错误，昨天已修复：[https](https://github.com/thomas-mcdonald/serel/issues/10) ://github.com/thomas-mcdonald/serel/issues/10 。

# python - python MessageBoxA 在 cmd 窗口后面

> ID：15027723
> 
> 赞同：1
> 
> 时间：2013-02-22T15:37:04.127
> 
> 标签：python, python-2.7, messagebox

我有一个 python2.7 程序，可以将文本报告转换为 Excel 电子表格。

它通过将文件拖放到桌面图标中来运行。

程序运行时会打开一个 Windows CMD 窗口。

程序完成后，我会显示一个 Windows 消息框：

```
windll.user32.MessageBoxA(None,"Finished","gen2xls",0) 
```

消息框出现在屏幕上，但立即移动到 CMD 窗口后面，因此您看不到它。

一旦消息框出现在屏幕上，似乎焦点就会更改为 CMD 窗口。

有没有办法让焦点保持在消息框上，直到它被点击？

如果您查看下面的代码，则可以测试该文件是否为两种类型之一。如果文件不是这两种类型之一，则有一个打印语句“打印'文件似乎不是一个 gencount”'，然后是一个 continue 语句。如果触发此操作，则“完成”框会出现在 CMD 屏幕前，但当作业运行完成时，一旦出现消息框，焦点就会更改为 CMD 窗口。

代码的主要部分如下：

```
def runexcel(args):
    sheets = []
    """Convert LSC gencount to Excel file
    """
    sawerror = False
    print "Running gen2xls"
    if len(args) == 1:
        windll.user32.MessageBoxA(None,"Error: Please drag at least one file","gen2xls",0)
        sys.exit(1)
    try: 
        for fname in args[1:]:
            file = open(fname,"r")
            get_type = get_gen_type(file) 
            if get_type == -1:
                print 'file does not appear to be a gencount'
                continue  #skip file if not a gencount (only tests for presence of pagefeed char)
            if get_type[0] == 'laur':
                sheets =  get_l_sheets(file)  #LAURA'S FORMAT:
            else:
                if get_type[0] == 'serg':
                    sheets = get_s_sheets(file,get_type[1],get_type[2])  #SERGEI'S FORMAT:
            make_sheets(sheets,fname)
            print "Finished Processing %s" % fname
        windll.user32.MessageBoxA(None,"Finished","gen2xls",0)
    except:
        traceback.print_exc()
        print "Errors occurred, please check the above messages"
        windll.user32.MessageBoxA(None,"Error: Problems occurred, please check them and try again","gen2xls",0)
##########################################################################################
##########################################################################################

if __name__ == "__main__":
    runexcel(sys.argv) 
```

# multithreading - 如何使线程在被释放之前完成其工作？

> ID：15027726
> 
> 赞同：3
> 
> 时间：2013-02-22T15:37:09.547
> 
> 标签：multithreading, delphi

我正在写一个写事件日志的线程。当应用程序（优雅地）关闭时，我需要确保该线程在释放之前完成其保存日志的工作。如果我`Free`直接调用线程，它不应该立即被销毁，它应该等到线程完成并且没有更多工作要做。

这是我的线程执行布局的方式：

```
procedure TEventLogger.Execute;
var
  L: TList;
  E: PEventLog; //Custom record pointer
begin
  while not Terminated do begin //Repeat continuously until terminated
    try
      E:= nil;
      L:= LockList; //Acquire locked queue of logs to be written
      try
        if L.Count > 0 then begin //Check if any logs exist in queue
          E:= PEventLog(L[0]); //Get next log from queue
          L.Delete(0); //Remove log from queue
        end;
      finally
        UnlockList;
      end;
      if E <> nil then begin
        WriteEventLog(E); //Actual call to save log
      end;
    except
      //Handle exception...
    end;
    Sleep(1);
  end;
end; 
```

这是析构函数...

```
destructor TEventLogger.Destroy;
begin
  ClearQueue; //I'm sure this should be removed
  FQueue.Free;
  DeleteCriticalSection(FListLock);
  inherited;
end; 
```

现在我已经知道，在`Free`被调用的时候，我应该提出一个标志，使得不可能再向队列中添加任何日志——它只需要完成已经存在的内容。我的问题是我知道当线程被释放时上面的代码将被强制切断。

`Free`当被调用时，我应该如何让这个线程完成它的工作？或者，如果这不可能，那么通常应该如何构造这个线程以实现这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-22T15:43:42.483

> 如果我直接调用 Free 到线程，它不应该立即被销毁，它应该等到线程完成并且没有更多工作要做。

我认为您对销毁线程时会发生什么有轻微的误解。当您调用`Free`a`TThread`时，析构函数中会发生以下情况：

1.  `Terminate`叫做。
2.  `WaitFor`叫做。
3.  然后线程的析构函数的其余部分运行。

换句话说，调用`Free`已经完成了你所要求的，即通知线程方法它需要终止，然后等待它这样做。

由于您可以控制线程的方法，因此一旦检测到标志已设置`Execute`，您就可以在那里做尽可能多的工作。`Terminated`正如 Remy 建议的那样，您可以覆盖`DoTerminate`并在那里完成最后的工作。

* * *

对于它的价值，这是实现队列的糟糕方法。那个呼唤我就`Sleep(1)`跳出来了。你需要的是一个阻塞队列。您清空队列，然后等待事件。当生产者添加到队列中时，会发出事件信号，以便您的线程可以唤醒。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-22T21:55:05.337

这是我对如何编写消费者线程的看法。拼图的第一部分是阻塞队列。我的看起来像这样：

```
unit BlockingQueue;

interface

uses
  Windows, SyncObjs, Generics.Collections;

type
  TBlockingQueue<T> = class
  //see Duffy, Concurrent Programming on Windows, pp248
  private
    FCapacity: Integer;
    FQueue: TQueue<T>;
    FLock: TCriticalSection;
    FNotEmpty: TEvent;
    function DoEnqueue(const Value: T; IgnoreCapacity: Boolean): Boolean;
  public
    constructor Create(Capacity: Integer=-1);//default to unbounded
    destructor Destroy; override;
    function Enqueue(const Value: T): Boolean;
    procedure ForceEnqueue(const Value: T);
    function Dequeue: T;
  end;

implementation

{ TBlockingQueue<T> }

constructor TBlockingQueue<T>.Create(Capacity: Integer);
begin
  inherited Create;
  FCapacity := Capacity;
  FQueue := TQueue<T>.Create;
  FLock := TCriticalSection.Create;
  FNotEmpty := TEvent.Create(nil, True, False, '');
end;

destructor TBlockingQueue<T>.Destroy;
begin
  FNotEmpty.Free;
  FLock.Free;
  FQueue.Free;
  inherited;
end;

function TBlockingQueue<T>.DoEnqueue(const Value: T; IgnoreCapacity: Boolean): Boolean;
var
  WasEmpty: Boolean;
begin
  FLock.Acquire;
  Try
    Result := IgnoreCapacity or (FCapacity=-1) or (FQueue.Count<FCapacity);
    if Result then begin
      WasEmpty := FQueue.Count=0;
      FQueue.Enqueue(Value);
      if WasEmpty then begin
        FNotEmpty.SetEvent;
      end;
    end;
  Finally
    FLock.Release;
  End;
end;

function TBlockingQueue<T>.Enqueue(const Value: T): Boolean;
begin
  Result := DoEnqueue(Value, False);
end;

procedure TBlockingQueue<T>.ForceEnqueue(const Value: T);
begin
  DoEnqueue(Value, True);
end;

function TBlockingQueue<T>.Dequeue: T;
begin
  FLock.Acquire;
  Try
    while FQueue.Count=0 do begin
      FLock.Release;
      Try
        FNotEmpty.WaitFor;
      Finally
        FLock.Acquire;
      End;
    end;
    Result := FQueue.Dequeue;
    if FQueue.Count=0 then begin
      FNotEmpty.ResetEvent;
    end;
  Finally
    FLock.Release;
  End;
end;

end. 
```

它是完全线程安全的。任何线程都可以入队。任何线程都可以出队。如果队列为空，则 dequeue 函数将阻塞。队列可以在有界或无界模式下操作。

接下来我们需要一个与这样的队列一起工作的线程。该线程只是将作业从队列中拉出，直到被告知终止。我的消费者线程如下所示：

```
unit ConsumerThread;

interface

uses
  SysUtils, Classes, BlockingQueue;

type
  TConsumerThread = class(TThread)
  private
    FQueue: TBlockingQueue<TProc>;
    FQueueFinished: Boolean;
    procedure SetQueueFinished;
  protected
    procedure TerminatedSet; override;
    procedure Execute; override;
  public
    constructor Create(Queue: TBlockingQueue<TProc>);
  end;

implementation

{ TConsumerThread }

constructor TConsumerThread.Create(Queue: TBlockingQueue<TProc>);
begin
  inherited Create(False);
  FQueue := Queue;
end;

procedure TConsumerThread.SetQueueFinished;
begin
  FQueueFinished := True;
end;

procedure TConsumerThread.TerminatedSet;
begin
  inherited;
  //ensure that, if the queue is empty, we wake up the thread so that it can quit
  FQueue.ForceEnqueue(SetQueueFinished);
end;

procedure TConsumerThread.Execute;
var
  Proc: TProc;
begin
  while not FQueueFinished do begin
    Proc := FQueue.Dequeue();
    Proc();
    Proc := nil;//clear Proc immediately, rather than waiting for Dequeue to return since it blocks
  end;
end;

end. 
```

这具有您正在寻找的特性。即当线程被销毁时，它将在完成析构函数之前处理所有待处理的任务。

要查看它的实际效果，这里有一个简短的演示程序：

```
unit Main;

interface

uses
  Windows, SysUtils, Classes, Controls, Forms, StdCtrls,
  BlockingQueue, ConsumerThread;

type
  TMainForm = class(TForm)
    Memo1: TMemo;
    TaskCount: TEdit;
    Start: TButton;
    Stop: TButton;
    procedure StartClick(Sender: TObject);
    procedure StopClick(Sender: TObject);
  private
    FQueue: TBlockingQueue<TProc>;
    FThread: TConsumerThread;
    procedure Proc;
    procedure Output(const Msg: string);
  end;

implementation

{$R *.dfm}

procedure TMainForm.Output(const Msg: string);
begin
  TThread.Synchronize(FThread,
    procedure
    begin
      Memo1.Lines.Add(Msg);
    end
  );
end;

procedure TMainForm.Proc;
begin
  Output(Format('Consumer thread ID: %d', [GetCurrentThreadId]));
  Sleep(1000);
end;

procedure TMainForm.StartClick(Sender: TObject);
var
  i: Integer;
begin
  Memo1.Clear;
  Output(Format('Main thread ID: %d', [GetCurrentThreadId]));
  FQueue := TBlockingQueue<TProc>.Create;
  FThread := TConsumerThread.Create(FQueue);
  for i := 1 to StrToInt(TaskCount.Text) do
    FQueue.Enqueue(Proc);
end;

procedure TMainForm.StopClick(Sender: TObject);
begin
  Output('Stop clicked, calling thread destructor');
  FreeAndNil(FThread);
  Output('Thread destroyed');
  FreeAndNil(FQueue);
end;

end.

object MainForm: TMainForm
  Caption = 'MainForm'
  ClientHeight = 560
  ClientWidth = 904
  object Memo1: TMemo
    Left = 0
    Top = 96
    Width = 904
    Height = 464
    Align = alBottom
  end
  object TaskCount: TEdit
    Left = 8
    Top = 8
    Width = 121
    Height = 21
    Text = '10'
  end
  object Start: TButton
    Left = 8
    Top = 48
    Width = 89
    Height = 23
    Caption = 'Start'
    OnClick = StartClick
  end
  object Stop: TButton
    Left = 120
    Top = 48
    Width = 75
    Height = 23
    Caption = 'Stop'
    OnClick = StopClick
  end
end 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-22T16:27:46.157

修改你的代码，我建议同时检查最后一个队列计数，注意`LastCount`我在这里介绍的变量：

```
procedure TEventLogger.Execute;
var
  L: TList;
  E: PEventLog; //Custom record pointer
  LastCount: integer;
begin
  LastCount:=0;//counter warning
  while not (Terminated and (LastCount=0)) do begin //Repeat continuously until terminated
    try
      E:= nil;
      L:= LockList; //Acquire locked queue of logs to be written
      try
        LastCount:=L.Count;
        if LastCount > 0 then begin //Check if any logs exist in queue
          E:= PEventLog(L[0]); //Get next log from queue
          L.Delete(0); //Remove log from queue
        end;
      finally
        UnlockList;
      end;
      if E <> nil then begin
        WriteEventLog(E); //Actual call to save log
      end;
    except
      //Handle exception...
    end;
    Sleep(1);
  end;
end; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-22T17:28:56.557

这是一个“惰性”EventLogger 线程，它将保存队列中的所有事件。

```
unit EventLogger;

interface

uses
  Classes, SyncObjs, Contnrs;

type
  TEventItem = class
    TimeStamp : TDateTime;
    Info : string;
  end;

  TEventLogger = class( TThread )
  private
    FStream : TStream;
    FEvent :  TEvent;
    FQueue :  TThreadList;
  protected
    procedure TerminatedSet; override;
    procedure Execute; override;
    procedure WriteEvents;
    function GetFirstItem( out AItem : TEventItem ) : Boolean;
  public
    constructor Create; overload;
    constructor Create( CreateSuspended : Boolean ); overload;
    destructor Destroy; override;

    procedure LogEvent( const AInfo : string );
  end;

implementation

uses
  Windows, SysUtils;

{ TEventLogger }

constructor TEventLogger.Create( CreateSuspended : Boolean );
begin
  FEvent := TEvent.Create;
  FQueue := TThreadList.Create;

  inherited;
end;

constructor TEventLogger.Create;
begin
  Create( False );
end;

destructor TEventLogger.Destroy;
begin
  // first the inherited part
  inherited;
  // now freeing the internal instances
  FStream.Free;
  FQueue.Free;
  FEvent.Free;
end;

procedure TEventLogger.Execute;
var
  LFinished : Boolean;
begin
  inherited;
  LFinished := False;
  while not LFinished do
    begin

      // waiting for event with 20 seconds timeout
      // maybe terminated or full queue
      WaitForSingleObject( FEvent.Handle, 20000 );

      // thread will finished if terminated
      LFinished := Terminated;

      // write all events from queue
      WriteEvents;

      // if the thread gets terminated while writing
      // it will be still not finished ... and therefor one more loop

    end;
end;

function TEventLogger.GetFirstItem( out AItem : TEventItem ) : Boolean;
var
  LList : TList;
begin
  LList := FQueue.LockList;
  try
    if LList.Count > 0
    then
      begin
        AItem := TEventItem( LList[0] );
        LList.Delete( 0 );
        Result := True;
      end
    else
      Result := False;
  finally
    FQueue.UnlockList;
  end;
end;

procedure TEventLogger.LogEvent( const AInfo : string );
var
  LList : TList;
  LItem : TEventItem;
begin
  if Terminated
  then
    Exit;

  LItem           := TEventItem.Create;
  LItem.TimeStamp := now;
  LItem.Info      := AInfo;

  LList := FQueue.LockList;
  try

    LList.Add( LItem );

    // if the queue is "full" we will set the event

    if LList.Count > 50
    then
      FEvent.SetEvent;

  finally
    FQueue.UnlockList;
  end;

end;

procedure TEventLogger.TerminatedSet;
begin
  // this is called if the thread is terminated
  inherited;
  FEvent.SetEvent;
end;

procedure TEventLogger.WriteEvents;
var
  LItem :   TEventItem;
  LStream : TStream;
begin
  // retrieve the first event in list
  while GetFirstItem( LItem ) do
    try

      // writing the event to a file

      if not Assigned( FStream )
      then
        FStream := TFileStream.Create( ChangeFileExt( ParamStr( 0 ), '.log' ), fmCreate or fmShareDenyWrite );

      // just a simple log row
      LStream := 
        TStringStream.Create( 
          Format( 
            '[%s] %s : %s', 
             // when it is written to file
            [FormatDateTime( 'dd.mm.yyyy hh:nn:ss.zzz', now ),
             // when did it happend
             FormatDateTime( 'dd.mm.yyyy hh:nn:ss.zzz', LItem.TimeStamp ),
             // whats about 
             LItem.Info] ) + sLineBreak, 
          TEncoding.UTF8 );
      try
        LStream.Seek( 0, soFromBeginning );
        FStream.CopyFrom( LStream, LStream.Size );
      finally
        LStream.Free;
      end;

    finally
      LItem.Free;
    end;
end;

end. 
```

# php - 部署我的网络博客的 cms 部分后 Cakephp 会话错误

> ID：15027730
> 
> 赞同：3
> 
> 时间：2013-02-22T15:37:12.817
> 
> 标签：php, session, cakephp

我在 netfirms 服务器上安装了一个 CakePhp 2.0 博客应用程序，该博客使用 PostsController 定义博客使用的术语工作正常，当我现在添加编辑、添加和删除帖子等操作时，使用 beforeSave() 回调编辑我的模型和添加了一个具有相同功能的新控制器 GalleriesController 删除图像，修改或添加新图像，然后当任何 cms 操作发生时，无论是后期编辑或修改还是图像编辑或修改，我都会在网络服务器上收到此错误，但未显示在我的本地 WAMP 服务器安装上

```
Warning (2): session_start(): open(/var/php_sessions/sess_d876a0afa32835689eafbf4a111b60bd, O_RDWR) failed: No such file or directory (2) [CORE/Cake/Model/Datasource/CakeSession.php, line 615]

Warning (2): session_start() [http://php.net/function.session-start]: Cannot send session cookie - headers already sent by (output started at /hermes/bosweb25b/b952/nf.accountname/public_html/lib/Cake/Utility/Debugger.php:776) [CORE/Cake/Model/Datasource/CakeSession.php, line 615]

Warning (2): session_start() [http://php.net/function.session-start]: Cannot send session cache limiter - headers already sent (output started at /hermes/bosweb25b/b952/nf.accountname/public_html/lib/Cake/Utility/Debugger.php:776) [CORE/Cake/Model/Datasource/CakeSession.php, line 615]

Warning (2): Unknown: open(/var/php_sessions/sess_d876a0afa32835689eafbf4a111b60bd, O_RDWR) failed: No such file or directory (2) [Unknown, line 0]

Warning (2): Unknown: Failed to write session data (files). Please verify that the current setting of session.save_path is correct (/var/php_sessions) [Unknown, line 0] 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-22T15:45:23.910

当您加载您的应用程序时，它会尝试在该位置创建一个会话文件。显然，这可能是由于您的服务器上的一些权限问题，它正在努力解决这个问题。（可能您的本地计算机具有管理员权限，所以这不是问题）

我发现在蛋糕应用程序本身中管理会话更容易。

如果您编辑`core.php`. 将会话配置条目更改为如下所示：

```
Configure::write('Session', array(
    'defaults' => 'cake',
    'cookie' => 'myapp',
    'timeout' => 4320 //3 days
)); 
```

它将会话文件存储在此处：`app/tmp/sessions`您的应用程序应该有权访问。此外，它会将您的 cookie 重命名为`myapp`并设置超时

你可以在这里找到更多信息：http: [//book.cakephp.org/2.0/en/development/sessions.html](http://book.cakephp.org/2.0/en/development/sessions.html)

# asp.net-mvc - 有没有办法在服务堆栈中缓存 Razor 页面？

> ID：15027732
> 
> 赞同：3
> 
> 时间：2013-02-22T15:37:14.033
> 
> 标签：asp.net-mvc, caching, razor, servicestack, outputcache

我是 Service Stack 的新手，刚刚发现并且看起来非常有趣。

我希望我未来的网站非常重，但仍确保它们大部分可以被谷歌索引并被使用 JavaScript 的人看到（更多用于谷歌索引）

我知道有内容缓存，例如列表等，可以检索并切断剃须刀页面。

但是我没有看到任何涵盖在渲染后缓存整个剃须刀页面的文档方法，这是我相信 OutputCache 属性在普通 ASP.NET MVC 3 上所做的。

因此，如果有人可以指导我使用服务堆栈缓存整个剃须刀页面的可能示例，或者一种可能的方法，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T15:50:21.440

[在ServiceStack](http://www.servicestack.net/)中缓存 Razor/HTML 视图的方式与其他格式相同，`ToOptimizedResultUsingCache`例如：

```
public object Any(CachedAllReqstars request)
{
    if (request.Aged <= 0)
        throw new ArgumentException("Invalid Age");

    var cacheKey = typeof(CachedAllReqstars).Name;
    return RequestContext.ToOptimizedResultUsingCache(Cache, cacheKey, () => 
        new ReqstarsResponse {
            Aged = request.Aged,
            Total = Db.GetScalar<int>("select count(*) from Reqstar"),
            Results = Db.Select<Reqstar>(q => q.Age == request.Aged)
        });
} 
```

此服务缓存**任何**请求格式的输出，inc. HTML 剃刀视图。

# spring - Flex 和 Spring 与安全性的集成

> ID：15027733
> 
> 赞同：0
> 
> 时间：2013-02-22T15:37:16.750
> 
> 标签：spring, apache-flex, spring-security, blazeds

我是 Flex 的初学者，我正在尝试构建一个应用程序，其架构将基于客户端的 apache flex 4.9 和服务器端的 javaEE。

架构应该以模块形式构建，因此我认为 flex 可能比任何 javascript 框架更灵活和可维护。出于同样的原因，我正在考虑使用弹簧配置来在服务器中获得这些品质。

我正在研究这种组合，我发现了 BlazeDS，一个允许从 flex 到 spring java 应用程序的本地请求的 tomcat。这是一个好主意吗？，是否有更新的替代方案？并且，在客户端部分，我使用将安全标签放在服务器中编译的 html 和 javascript 中，以仅向用户显示他被允许看到的内容，那flex 客户端部分的安全性？

# asp.net-mvc - 如何将 ASP.Net MVC 路由段中的 1 或 0 映射到布尔操作方法输入参数

> ID：15027734
> 
> 赞同：9
> 
> 时间：2013-02-22T15:37:17.307
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4, model-binding, value-provider

我们有一些调用一些 ASP.NET MVC 端点的 PHP 和 Javascript 应用程序。假设我们有这个端点：

```
public ActionResult DoSomething(bool flag)
{

} 
```

我希望它与 flag 的值匹配，无论我传入整数 1 还是 0，还是传入字符串“true”或“false”。为了匹配它，我需要实现框架的哪一部分？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-22T16:12:16.213

最好的方法是使用自定义值提供程序。虽然您可以使用完整的自定义模型绑定器来执行此操作，但根据您的要求，这太过分了，而且简单地实现自定义值提供程序要容易得多。

有关何时使用自定义模型绑定器以及何时使用自定义值提供程序的一些指导，请参阅[此处](http://haacked.com/archive/2011/06/30/whatrsquos-the-difference-between-a-value-provider-and-model-binder.aspx)和[此处](http://www.fattybeagle.com/2011/09/21/using-a-custom-ivalueprovider-in-asp-net-mvc/)。

您可以创建一个自定义值提供程序来处理具有“标志”键的路由值，并在值提供程序中处理 int 到 bool 的转换。执行此操作的代码如下所示：

```
public class IntToBoolValueProvider : IValueProvider
{
    public IntToBoolValueProvider(ControllerContext context)
    {
        if (context == null)
            throw new ArgumentNullException("context");

        this._context = context;
    }
    public bool ContainsPrefix(string prefix)
    {
        return prefix.ToLower().IndexOf("flag") > -1;
    }
    public ValueProviderResult GetValue(string key)
    {
        if (ContainsPrefix(key))
        {
            int value = 0;
            int.TryParse(_context.RouteData.Values[key].ToString(), out value);
            bool result = value > 0;
            return new ValueProviderResult(result, result.ToString(), CultureInfo.InvariantCulture);
        }
        else
        {
            return null;
        }
    }
    ControllerContext _context;
}

public class IntToBoolValueProviderFactory : ValueProviderFactory
{
    public override IValueProvider GetValueProvider(ControllerContext controllerContext)
    {
        return new IntToBoolValueProvider(controllerContext);
    }
} 
```

在值提供者中，您实现 ContainsPrefix 方法以对您感兴趣的路由值键（在本例中为键“标志”）返回 true。在 GetValue 标志中，您将“标志”路由数据条目的值转换为 int，然后转换为布尔值，具体取决于 int 是否大于零。对于所有其他不是“标志”的路由数据键，您只需返回 null，这会告诉 MVC 框架忽略此 ValueProvider 并继续使用其他值提供程序。

要将其连接起来，您需要实现 ValueProviderFactory 的子类，该子类创建自定义 IntToBoolValueProvider 提供程序。此外，您需要使用 MVC 框架注册此工厂。您可以使用静态 ValueProviderFactories 类在 global.asax 中执行此操作：

```
protected void Application_Start()
{
    ValueProviderFactories.Factories.Insert(0, new IntToBoolValueProviderFactory());
} 
```

如果您的路线设置如下：

```
routes.MapRoute("", "{controller}/foo/{flag}", new { action = "Foo" }); 
```

这条路线会将请求定向到

```
http://localhost:60286/Home/Foo/{flag} 
```

到动作方法

```
 public ActionResult Foo(bool flag)
    {
        //Implement action method
        return View("Index");
    } 
```

{flag}段大于0时，bool标志输入参数为真，为零时，标志参数为假。

可以在[此处](http://donovanbrown.com/post/How-to-create-a-custom-Value-Provider-for-MVC.aspx)找到有关 MVC 自定义值提供程序的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T15:45:09.640

您可以使用自定义模型绑定器，如此 SO 问题[ASP.NET MVC controller actions with custom parameter conversion?](https://stackoverflow.com/questions/8406773/asp-net-mvc-controller-actions-with-custom-parameter-conversion)

现在，如果您想在全局范围内执行此操作，因此您不必在每个可能获得 0/1 而不是 true/false 的布尔值上设置属性，那么您可以扩展默认模型绑定器以将 0 或 1 理解为 false 或通过覆盖默认模型绑定器为真，如在此 SO 问题中找到的[Change the default model binder in asp.net MVC](https://stackoverflow.com/questions/741594/change-the-default-model-binder-in-asp-net-mvc)

这两者的某种组合应该可以满足您的需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T15:44:56.023

> 为了匹配它，我需要实现框架的哪一部分？

自定义[模型绑定器](https://stackoverflow.com/questions/1193453/asp-net-mvc-custom-model-binding-explanation)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-12T01:41:59.783

这是一种解决方法，但如果您不想修改或创建模型活页夹，它是最终实例中的示例。

```
public ActionResult DoSomething(string flag)
{

      if(flag.Equals("true") || flag.Equals(1)) {
            //condition true, any else false
      }

} 
```

# powershell - 如何从字符串列表中删除一个数字并找到唯一的实例？

> ID：15027737
> 
> 赞同：0
> 
> 时间：2013-02-22T15:37:25.847
> 
> 标签：powershell

我们的产品由多个 WCF 服务组成，这些服务将一些数据记录到 CSV 文件中。每个服务都写入自己的文件集，其中文件使用序列号命名。例如：

```
Product.ServiceA1.csv
Product.ServiceA2.csv
Product.ServiceA3.csv
Product.ServiceB1.csv
Product.ServiceB2.csv
Product.ServiceB3.csv 
```

这些文件都被写入一个公共文件夹，`D:\Product\log`.

我正在编写一个脚本来处理每个服务的所有文件，并希望通过服务名称来识别结果，如下所示：

```
ServiceA: 25
ServiceB: 30 
```

我想出了以下 PowerShell 代码来获取不同服务名称的列表，但想知道是否有人有更好的方法。

```
# Get a list of all the file names; remove the 'Product' prefix and CSV file
# extension so we get just the base name.
$services = get-childitem $logFiles -Name | foreach { $_.Split(".")[1]}

# Remove all the sequence numbers and get a list of the unique names.
$services = [regex]::replace($services,'\d{1,3}','').split(" ") | get-unique 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T16:09:26.627

您可以尝试使用正则表达式进行“一体化”。

```
$services = (Get-Childitem -Path $logFiles -Name) -replace '(?:.+?)([^\.0-9]+)(?:\d+)(?:\.csv)', '$1' | Get-Unique 
```

# ruby-on-rails - Carrierwave - 动态高度/宽度和裁剪

> ID：15027738
> 
> 赞同：0
> 
> 时间：2013-02-22T15:37:26.083
> 
> 标签：ruby-on-rails, carrierwave

所以我得到了我的 Carrierwave Uploader，这很正常：

```
class ThumbFileUploader < CarrierWave::Uploader::Base

  def store_dir
    "uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}"
  end

  process :resize_to_limit => [2000, 480]
end 
```

在我的模型中，我得到：

```
article.remote_thumbnail_url = article.picture_url 
```

我想做的是

1.  从我的模型中告诉carrierwave 用于缩放的尺寸
2.  如果缩放后​​图像不符合确切尺寸，请裁剪图像

实现这一目标的最佳做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:58:58.997

我遇到了完全相同的问题。

首次上传文件时，您基本上需要让模型存储原始图像尺寸。然后，您可以将它们与 jCrop 一起使用来控制裁剪过程。

我的载波作为此功能上传

```
 def get_geometry
    if (@file)
      img = ::Magick::Image::read(@file.file).first
      @geometry = [ img.columns, img.rows ]
    end
  end 
```

你必须在模型、上传器和视图中做很多事情。

完整的文章在我的网站上，链接如下。

[http://mark.stratmann.me/content_items/image-cropping-with-rails-3-2-carrierwave-bootstrap-modals-jcrop](http://mark.stratmann.me/content_items/image-cropping-with-rails-3-2-carrierwave-bootstrap-modals-jcrop)

# data-structures - 对于 n 阶 B 树，节点必须包含的最小键数是多少？

> ID：15027739
> 
> 赞同：3
> 
> 时间：2013-02-22T15:37:31.167
> 
> 标签：data-structures

我有两本书的数据结构。在两本书中，有两种不同的 B-Tree 插入方法：

假设我想在 B 树中插入一个值 k。在搜索适当的叶节点以插入值 k 之后，计算特定叶节点中存在的值。如果叶节点已满，则：

**1.从叶子元素和新元素中选择一个中值。然后将节点分成两个节点。中值转移到父节点。**

**2.在m/2-1（m为树的顺序）位置后将节点拆分为两个节点。中值移动到父节点。然后将值插入到适当的位置。**

以下哪种方法是正确的？

**另一个问题：**

**对于 n 阶 B-Tree，节点必须包含的最小键数是多少？我已经搜索了互联网和书籍，但无法获得确切的等式，通过它我可以找出最小的键数：例如，如果order=5 那么任何节点（root 除外）的最小键数为 2。这是怎么来的？**

**任何答案将不胜感激！**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-23T13:32:16.093

根据 Knuth 的定义，m 阶 B-tree 是一棵满足以下性质的树：

*   每个节点最多有 m 个子节点。
*   每个非叶节点（根节点除外）至少有 ceil(m⁄2) 个子节点。
*   如果根不是叶节点，则根至少有两个子节点。
*   具有 k 个子节点的非叶节点包含 k-1 个键。
*   所有叶子都出现在同一级别，并携带信息。

每个内部节点的键充当分割其子树的分隔值。例如，如果一个内部节点有 3 个子节点（或子树），那么它必须有 2 个键：a1 和 a2。最左子树中的所有值都小于 a1，中间子树中的所有值都在 a1 和 a2 之间，最右子树中的所有值都大于 a2。

**内部节点**

内部节点是除叶节点和根节点之外的所有节点。它们通常表示为一组有序的元素和子指针。每个内部节点包含最多 U 个子节点和最少 L 个子节点。因此，元素的数量总是比子指针的数量少 1（元素的数量在 L-1 和 U-1 之间）。U 必须是 2L 或 2L-1；因此每个内部节点至少是半满的。U 和 L 之间的关系意味着两个半满节点可以连接成一个合法节点，一个完整节点可以分成两个合法节点（如果有空间将一个元素向上推入父节点）。这些属性使删除和插入新值到 B-tree 和调整树以保留 B-tree 属性成为可能。

**根节点**

根节点的子节点数量与内部节点的上限相同，但没有下限。例如，当整个树中的元素少于 L−1 个时，根将是树中唯一的节点，根本没有子节点。

**叶节点**

叶节点对元素的数量有相同的限制，但没有子节点，也没有子指针。

[http://en.wikipedia.org/wiki/B-Tree](http://en.wikipedia.org/wiki/B-Tree)

**添加：**

使用 Knuths 定义的 5 阶 B 树（最大子节点数）[4 将是最大键数]。

拆分后内部节点的最小子节点数为 3 [2 个键]。因为一个节点在溢出 B-Tree 的顺序时会分裂。

列表 11108、3267、11357、12080、6092 的 B 树

添加3267、11108、11357、12080后；这是显示钥匙，而不是孩子。

```
└── 3267, 11108, 11357, 12080 
```

然后加6092；这是显示钥匙，而不是孩子。

拆分前（键数 > order-1）[5 > 5-1=4]：

```
└── 3267, 6092, 11108, 11357, 12080 
```

拆分后：

```
└── 11108
    ├── 3267, 6092
    └── 11357, 12080 
```

注意：根节点没有其他节点的最小键/子节点数。

**删除：**

**删除后重新平衡**

如果从叶节点中删除一个元素使其低于最小大小，则必须重新分配一些元素以使所有节点达到最小值。在某些情况下，重新排列会将缺陷转移到父级，并且重新分配必须迭代地应用到树上，甚至可能应用到根。由于最小元素计数不适用于根，因此使根成为唯一的缺陷节点不是问题。重新平衡树的算法如下：[需要引用]

1.  如果右兄弟的元素数量超过最小数量

    *   将分隔符添加到缺陷节点的末尾
    *   用右兄弟的第一个元素替换父中的分隔符
    *   将右兄弟的第一个孩子附加为缺陷节点的最后一个孩子
2.  否则，如果左兄弟元素的数量超过最小数量

    *   将分隔符添加到缺陷节点的开头
    *   用左兄弟的最后一个元素替换父中的分隔符
    *   插入左兄弟的最后一个孩子作为缺陷节点的第一个孩子
3.  如果两个直接兄弟姐妹只有最少数量的元素

    *   创建一个新节点，其中包含缺陷节点中的所有元素、其一个兄弟节点中的所有元素以及两个组合兄弟节点之间的父节点中的分隔符
    *   从父节点中移除分隔符，并将其分隔的两个子节点替换为组合节点
    *   如果这使父节点中的元素数量低于最小值，则对有缺陷的节点重复这些步骤，除非它是根，因为允许根有缺陷

唯一需要考虑的另一种情况是根没有元素和一个孩子。在这种情况下，将其替换为唯一的孩子就足够了。

预删除节点 9062。

```
└── 6169, 12789
    ├── 1009, 4238, 5139
    ├── 6625, 9062
    └── 12909, 14508, 14703, 14985 
```

平衡前

```
└── 6169, 12789
    ├── 1009, 4238, 5139
    ├── 6625 
    └── 12909, 14508, 14703, 14985 
```

平衡后

```
└── 6169, 12909
    ├── 1009, 4238, 5139
    ├── 6625, 12789
    └── 14508, 14703, 14985 
```

如您所见，中间节点子节点从其父节点借了 12789 以满足最低要求，父节点从其最右边的子节点借了 12909 以满足其最低要求。

# c# - 如何达到预期的输出

> ID：15027741
> 
> 赞同：1
> 
> 时间：2013-02-22T15:37:36.643
> 
> 标签：c#, sql-server-2005, crystal-reports, crystal-reports-2008

以下是我使用数据的 3 个表

报价大师

```
QuoteID QuoteNo  CustomerName TotalSellQty
------------------------------------------
1       Q1        Name1          60  
2       Q2        Name2          30
3       Q3        Name3          10
4       Q4        Name4          50
5       Q5        Name5          40 
```

QuoteItemDetails : 一个报价可以有多个项目

```
QuoteItemID  QuoteID    ItemDescription    ItemID   
-----------------------------------------------
   1          1         AAA                1 
   1          1         BBB                2       
   2          2         BBB                2 

  QuoteBatchDetails : one QuoteItem can have many batches of QuoteID and ItemID are the common columns. BatchNo is varchar

QuotebatchID  QuoteID   BatchNo    ItemID  BatchQty  Date
--------------------------------------------------------
   1          1          A          1         20    1/2/2013
   2          1          B          1         30    2/2/2013
   3          1          C          1         10    3/3/2013
   4          2          E          2         10    4/3/2013
   5          2          F          2         20    5/3/2013 
```

我想根据 QuoteID 作为参数在**CRYSTAL REPORT**中显示以下结果。对于显示的每个项目，我们还将显示 BatchNo、Date 和 BatchQty，其中 Sum(BatchQty) 是 TotalQty。

*** 但在前端，我不会显示 BatchNo Date 和 BatchQty（仅显示值）。

```
 QuoteItemID  QuoteID    ItemDescription  TotalQty       
              --------------------------------------------------
  First Row       1          1             AAA          60

                  BatchNo    Date                      BatchQty
                   A         1/2/2013                    20
                   B         2/2/2013                    30
                   C         3/3/2013                    10

  Second Row      2          2             BBB           30 

                  BatchNo    Date                      BatchQty
                   E         4/3/2013                    10
                   F         5/3/2013                    20 
```

我怎样才能达到上述结果。

![在此处输入图像描述](../Images/259ed2832ae27249f67a04b5e9365f0f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:52:12.393

您是否考虑过仅在 Crystal Reports 中使用子报表？这应该可以为您提供上述结果。您可以将您的 QuoteId 传递给 QuoteItemDetails 子报告以仅显示基于该 QuoteId 的 QuoteItemDetails，然后您可以将 ItemId 传递给 QuoteItemDetails 子报告中的 QuoteBatchDetails 子报告并显示适当的数据。

这是关于如何创建子报告的链接[http://www.sdn.sap.com/irj/scn/go/portal/prtroot/docs/library/uuid/d05ad954-f8a2-2e10-db9f-bb0f13a7cb1c?QuickLink= index&overridelayout=true&51887500358899](http://www.sdn.sap.com/irj/scn/go/portal/prtroot/docs/library/uuid/d05ad954-f8a2-2e10-db9f-bb0f13a7cb1c?QuickLink=index&overridelayout=true&51887500358899)。

希望这能给你一些见解。

# mysql - MySQL 表自连接返回太多行

> ID：15027744
> 
> 赞同：1
> 
> 时间：2013-02-22T15:37:38.687
> 
> 标签：mysql, sql, join

所以我有一个表，`my_table`它有一个主键`id`( `INT`) 和更多列`foo`( `VARCHAR`) 和`bar`( `DOUBLE`)。每个都`foo`应该在我的表中出现一次，并带有一个关联的`bar`值，但我知道我有几行具有相同`foo`的 s 关联不同`bar`的 s。如何获取包含相同`foo`值但具有不同`bar`s 的行的列表（例如，相差超过 10。）？我试过：

```
    选择 t1.id、t1.bar、t2.id、t2.bar、t1.foo
    FROM my_table t1，my_table t2
    哪里 t1.foo=t2.foo
    AND t1.bar - t2.bar > 10.;

```

但是我得到了很多结果（超过了 中的总行数`my_table`）。我觉得我一定在做一些非常明显愚蠢的事情，但看不到我的错误。

啊 - 谢谢 SWeko：我想我明白为什么我会得到这么多结果。SQL 中有没有一种方法可以计算每个s 相差超过 10`foo`的行数？`foo``bar`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T16:35:26.230

要回答您的最新问题：

> SQL 中有没有一种方法可以计算每个 foo 的行数，但该 foo 的条数相差超过 10 个。

像这样的查询应该可以工作：

```
select t1.id, t1.foo, t1.bar, count(t2.id) as dupes
from my_table t1
  left outer join my_table t2 on t1.foo=t2.foo and (t1.bar - t2.bar) > 10
group by t1.id, t1.foo, t1.bar; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T15:44:04.243

例如，如果您有 5 行`foo='A'`和 10 行进行`foo='B'`自连接，则每个 A 行将彼此连接 A 行（包括其自身），每个 B 行彼此连接 B 行，所以一个简单的

```
SELECT t1.id, t1.bar, t2.id, t2.bar, t1.foo
FROM my_table t1, my_table t2
WHERE t1.foo=t2.foo 
```

将返回`5*5+10*10=125`行。过滤值将减少该数字，但您可能仍然拥有（显着）比您开始时更多的行。例如，如果我们假设 B 行的值`bar`分别为 5 到 50，这意味着它们将匹配：

```
bar = 5  - 0 rows that have bar less than -5
bar = 10 - 0 rows that have bar less than 0
bar = 15 - 0 rows that have bar less than 5
bar = 20 - 1 rows that have bar less than 10
bar = 25 - 2 rows that have bar less than 15
bar = 30 - 3 rows that have bar less than 20
bar = 35 - 4 rows that have bar less than 25
bar = 40 - 5 rows that have bar less than 30
bar = 45 - 6 rows that have bar less than 35
bar = 50 - 7 rows that have bar less than 40 
```

因此，仅 B 行就有 28 个结果，并且该数字随着具有相同值的行的平方而增加`foo`。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-22T15:43:14.970

你用“新”`JOIN`语法尝试过同样的事情吗？

```
 SELECT t1.*,
           t2.*
      FROM my_table t1
      JOIN my_table t2 ON t1.foo = t2.foo
     WHERE (t1.bar - t2.bar) > 10 
```

我不怀疑这会解决你的问题，但对我来说，这至少是我要开始的地方。

我也可以试试这个：

```
 SELECT t1.*,
           t2.*
      FROM my_table t1
      JOIN my_table t2 ON t1.foo = t2.foo AND t1.id != t2.id
     WHERE (t1.bar - t2.bar) > 10 
```

# c# - WPF Mediaelement.Position 不起作用

> ID：15027746
> 
> 赞同：3
> 
> 时间：2013-02-22T15:37:41.680
> 
> 标签：c#, .net, wpf, position, mediaelement

我需要的是`Position`在 WPF 的`MediaElement`控件上设置属性。但是当我播放视频时（通过`Play()`或通过某种动画`Opacity`）它根本不起作用。它显示 00:00:00 时间，但我希望它设置为 00:00:05。

我有硬编码的位置值，它根本不起作用。

以防万一我要放我所有的代码，这样你就可以看到整个动画逻辑。

有什么线索吗？

```
 public partial class CrossFadeTransition : UserControl
    {
        DoubleAnimation _doubleAnimationFrontPlayer = new DoubleAnimation();
        DoubleAnimation _doubleAnimationBackPlayer = new DoubleAnimation();

        Storyboard _sb1 = new Storyboard();
        Storyboard _sb2 = new Storyboard();

        public TimeSpan Duration = TimeSpan.FromSeconds(2);
        public Dictionary<string, Position2D> PlayerPosition { set; get; }

        public CrossFadeTransition()
        {
            InitializeComponent();

            Player1.LoadedBehavior = MediaState.Manual;
            Player1.UnloadedBehavior = MediaState.Stop;

            Player2.LoadedBehavior = MediaState.Manual;
            Player2.UnloadedBehavior = MediaState.Stop;

            PlayerPosition = new Dictionary<string, Position2D>();

            PlayerPosition.Add("Player1", Position2D.Front);
            PlayerPosition.Add("Player2", Position2D.Back);

        }
        Position2D positionPlayer1;
        Position2D positionPlayer2;

        public void Stop()
        {
            if (Player1.IsEnabled)
                Player1.Stop();

            if (Player2.IsEnabled)
                Player2.Stop();

        }

        public void Start(Uri uri, int? position)
        {
            try
            {
                positionPlayer1 = PlayerPosition["Player1"];

                positionPlayer2 = PlayerPosition["Player2"];

                if (positionPlayer1 == Library.Position2D.Back)
                {
                    Player1.Source = uri;
                    if (Player1.IsEnabled)
                        Player1.Stop();

                    Player1.Position = TimeSpan.FromSeconds(5); // IT IS NOT WORKING !!!

                    Player1.Play();

                }

                if (positionPlayer2 == Library.Position2D.Back)
                {
                    Player2.Source = uri;
                    if (Player2.IsEnabled)
                        Player2.Stop();

                    Player2.Position = TimeSpan.FromSeconds(5); // IT IS NOT WORKING !!!

                    Player2.Play();

                }

                _sb1.Children.Clear();
                _sb2.Children.Clear();

                if (positionPlayer1 == Position2D.Front)
                {
                    _doubleAnimationFrontPlayer.From = 1;
                    _doubleAnimationFrontPlayer.To = 0;
                    _doubleAnimationFrontPlayer.Duration = new Duration(Duration);

                    PlayerPosition["Player1"] = Position2D.Back;
                }
                else if (positionPlayer1 == Position2D.Back)
                {
                    _doubleAnimationFrontPlayer.From = 0;
                    _doubleAnimationFrontPlayer.To = 1;
                    _doubleAnimationFrontPlayer.Duration = new Duration(Duration);

                    PlayerPosition["Player1"] = Position2D.Front;
                }

                if (positionPlayer2 == Position2D.Front)
                {
                    _doubleAnimationBackPlayer.From = 1;
                    _doubleAnimationBackPlayer.To = 0;
                    _doubleAnimationBackPlayer.Duration = new Duration(Duration);

                    PlayerPosition["Player2"] = Position2D.Back;
                }
                else if (positionPlayer2 == Position2D.Back)
                {
                    _doubleAnimationBackPlayer.From = 0;
                    _doubleAnimationBackPlayer.To = 1;
                    _doubleAnimationBackPlayer.Duration = new Duration(Duration);

                    PlayerPosition["Player2"] = Position2D.Front;
                }

                _sb1.Children.Add(_doubleAnimationFrontPlayer);
                Storyboard.SetTargetProperty(_doubleAnimationFrontPlayer, new PropertyPath("(Panel.Opacity)"));
                Storyboard.SetTarget(_doubleAnimationFrontPlayer, Player1);
                _sb1.Completed += _sb1_Completed;
                _sb1.Begin();

                //
                _sb2.Children.Add(_doubleAnimationBackPlayer);
                Storyboard.SetTargetProperty(_doubleAnimationBackPlayer, new PropertyPath("(Panel.Opacity)"));
                Storyboard.SetTarget(_doubleAnimationBackPlayer, Player2);
                _sb2.Completed += _sb2_Completed;
                _sb2.Begin();

            }
            catch (Exception)
            {

                throw;
            }
        }

        void _sb2_Completed(object sender, EventArgs e)
        {
            _sb2.Completed -= _sb2_Completed;

            Debug.WriteLine("Player2 COMPLETED " + DateTime.Now.TimeOfDay);

            if (positionPlayer2 == Position2D.Front)
            {
                Player2.Stop();
            }
        }

        void _sb1_Completed(object sender, EventArgs e)
        {
            _sb1.Completed -= _sb1_Completed;

            Debug.WriteLine("Player1 COMPLETED " + DateTime.Now.TimeOfDay);
            if (positionPlayer1 == Position2D.Front)
            {
                Player1.Stop();
            }
        }
    } 
```

我试着做

```
Player2.Play();
Player2.Pause();
Player2.Position = TimeSpan.FromSeconds(5); // IT IS NOT WORKING !!!
Player2.Play(); 
```

但没有快乐...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T17:06:39.690

我找到了一些解决方案。它并不完全理想，因为有时它会显示第一个视频帧，但至少它可以正常工作。

1.  我们需要那些可以应用 new 的事件`Position`。

    ```
    void Player2_MediaOpened(object sender, RoutedEventArgs e)
    {
         Player2.Position = new TimeSpan(0, 0, 7);
    }

    void Player1_MediaOpened(object sender, RoutedEventArgs e)
    {
        Player1.Position = new TimeSpan(0, 0, 7);
    } 
    ```

2.  我们必须像这样**关闭** `Mediaelement`。

    ```
    Player1.Stop();
    Player1.Close();
    Player1.Source = uri;
    Player1.Play(); 
    ```

玩得开心！（啤酒）

# java - setContentStream 上的 Apache 化学内部服务器错误

> ID：15027755
> 
> 赞同：0
> 
> 时间：2013-02-22T15:38:14.293
> 
> 标签：java, alfresco, apache-chemistry

我正在尝试用 Apache Chemistry 替换关于 alfresco 的文档。我从存储在磁盘上的文件创建一个输入流，使用构造函数 ContentStreamImpl 创建一个内容流，并尝试用 .setContentStream 方法替换文档。这个操作的结果是

```
org.apache.chemistry.opencmis.commons.exceptions.CmisRuntimeException: Internal Server Error 
```

这是我的代码的一部分：

```
 InputStream newDoc = new FileInputStream(global.getPathTemp() + filename);
        ContentStream content = new ContentStreamImpl("Prova", BigInteger.valueOf(newDoc.available()), mimetype, newDoc);

        alfDoc.setContentStream(content, true); 
```

有人能帮我吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T15:57:24.583

我解决了

```
 alfDoc.setContentStream(content, true, true); 
```

# sharepoint - 远程会话中忽略 Powershell 启动进程

> ID：15027756
> 
> 赞同：4
> 
> 时间：2013-02-22T15:38:19.730
> 
> 标签：sharepoint, powershell, deployment, invoke-command, start-process

我正在使用以下方法开始一个新进程：

```
$removeArguments = "-Command  `"&{import-module .\deploy-utility.psm1; RemoveSolutions -solutionNames $solutionNames -url $url;}`""
start-process powershell -ArgumentList $removeArguments -Wait 
```

这在本地运行时工作正常，但在远程会话中运行时，该语句被简单地忽略。

我也尝试将命令移动到单独的文件，但这没有区别。

```
$removeArguments = "-File .\deploy-utility-functions.ps1", "remove", "$solutionNames", "$url"
$script = {start-process powershell -ArgumentList $removeArguments -Wait -NoNewWindow | Out-Host}
Invoke-Command -ScriptBlock $script 
```

远程调用：

```
$script = [scriptblock]::create("& '.\$targetFile' '$arguments'")
$result = Invoke-Command -Session $s -ScriptBlock $script 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T15:43:21.270

您可能会在第二个跃点的远程会话中遇到权限问题（在您的情况下是已启动进程的权限）。请参阅启用 credssp [http://ss64.com/ps/enable-wsmancredssp.html](http://ss64.com/ps/enable-wsmancredssp.html)

# java - Java SAX 解析：无法覆盖 DefauldHandler 的 startElement()

> ID：15027757
> 
> 赞同：1
> 
> 时间：2013-02-22T15:38:22.270
> 
> 标签：java, sax

我正在尝试实现一个简单的 SAX 解析器。

```
public class XmlParser {
    public parseXML(File inputFile) {

        SAXParserFactory factory = SAXParserFactory.newInstance();
        try {
            SAXParser   parser = factory.newSAXParser(); 
            SaxHandler handler = new SaxHandler();
            parser.parse(inputFile, handler);
        } ....
    }

    private static class SaxHandler extends DefaultHandler {

        public void startElement(String uri, String localName, 
                             String qName, Attributes attributes) throws SAXException {
        }

        public void characters(char ch[], int start, int length) 
                             throws SAXException { 
        }  

        public void endElement(String uri, String localName,
                           String qName) throws SAXException {
        }
    }
} 
```

问题是我似乎无法覆盖 startElement 方法。当我添加@Override 时，会出现“方法不会覆盖或实现超类型中的方法”消息。除 startElement 外，所有其他处理程序均已正确调用。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T15:41:58.103

我敢打赌你的`Attributes`课程导入不好，应该是[`org.xml.sax.Attributes`](http://docs.oracle.com/javase/7/docs/api/org/xml/sax/Attributes.html)。

*始终*使用[`@Override`](http://docs.oracle.com/javase/specs/jls/se7/html/jls-9.html#jls-9.6.3.4)，它旨在保护您免受这个确切的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T15:44:57.500

也许你输入了错误的`DefaultHandler`或`Attributes`类？

确保您已导入：

```
org.xml.sax.helpers.DefaultHandler
org.xml.sax.Attributes 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-14T08:04:44.360

在我看来，最简单的方法之一不是手动编写此方法，而是使用 ctrl+space，并选择想要从上下文菜单中覆盖方法（在 Eclipse 中）。IDE会自动生成方法，包括注解@Override，同时导入必要的包。

# c# - 从文本文件中读取丹麦语字符

> ID：15027758
> 
> 赞同：4
> 
> 时间：2013-02-22T15:38:26.997
> 
> 标签：c#

我正在尝试读取包含一些丹麦字符的文本文件。我找到了几种使用不同类型编码的方法，但我看到的示例只读取一个文件。这就是我到目前为止所拥有的。

```
//search directory for all .txt files
foreach (string files in Directory.GetFiles(@"C:\ftp\inbox", "*.txt"))
{     
    //The 'using' command close connection when it is done
    using (var reader = new StreamReader(File.OpenRead(files)))               
    {
        // Handle contents
    }
} 
```

我的问题是所有字符都被读取为�。我需要按原样阅读它们。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-22T19:11:15.660

我通过更改解决了这个问题：

```
using (var reader = new StreamReader(File.OpenRead(files))) 
```

进入

```
using (var reader = new StreamReader(files, System.Text.Encoding.GetEncoding("iso-8859-1"))) 
```

现在丹麦字符按应有的方式读入。

# java - 使用扫描仪 - 在 java.util.Scanner.next(Unknown Source) java.util.NoSuchElementException

> ID：15027759
> 
> 赞同：-1
> 
> 时间：2013-02-22T15:38:28.370
> 
> 标签：java, system.in

我的完整代码粘贴[在这里](http://pastebin.com/15gCrgvk)。以下是与我的问题相关的两种方法。

```
private static boolean playGameAgain()
{
        char playAgain = 'y';
        Scanner input = new Scanner(System.in);
        while(playAgain != 'n')
        {
                System.out.println("Go again?(y/n)");
/// PROBLEM HERE....  Somehow, it will NOT wait for INPUT. It just throws an error
                playAgain = input.next().charAt(0);
        }
        input.close();
        return (playAgain != 'y')?false:true;
}

// [Trimmed]

public static void initialize(ArrayList<String> names, ArrayList<Integer> scores)
{
        Scanner input = new Scanner(System.in);
        for (int i = 1; i <= 5; i++)
        {
                System.out.println("Enter the name for score #" + i + ":");
                names.add(input.nextLine());
                System.out.println();
                System.out.println("Enter the score for score #" + i + ":");
                while(!input.hasNextInt())
                {
                        //input.nextLine();
                        System.out.println("Please input a valid integer value for the score for #" + i + ":");        
                        if(!input.hasNextInt())
                                 input.nextLine();
                }
                scores.add(input.nextInt());
                input.nextLine();
        }
        input.close();
} 
```

我已经尝试了许多如何阅读一个字符的组合。这曾经有效，我可以使用以下方法读取一个字符：

```
Scanner input = new Scanner(System.in);
char temp = input.next().charAt(0); 
```

但是，不知何故，在我编写的这个程序中，它不起作用。

这是一个程序，它将读取 5 个用户名（字符串）和 5 个分数（整数）并将它们放入 2 个数组中。它将按降序对数组进行排序，然后将它们打印出来。所以，我唯一的问题是问他们是否想再玩一次并输入一些字符来看看他们是否想再玩一次（y/n）？

如果可以的话请帮忙。我尝试了许多组合：`if (input.hasNext())`，但无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-15T19:57:58.243

您没有设置`playAgain`为 'y' 以外的其他内容`playGameAgain()`。你这里有一个错误。

# javascript - JavaScript 函数调用/应用字符串

> ID：15027763
> 
> 赞同：2
> 
> 时间：2013-02-22T15:38:47.433
> 
> 标签：javascript, function, call, this, apply

我刚刚注意到，当我想将字符串作为 传递时`"this"`，无法在 JavaScript 函数中正确获取类型。

这是一个例子：

```
var str = 'string value';
if (typeof (str) == 'string') {
    alert('string outside');
}

var fn = function(s) {
    if (typeof (str) == 'string') {
        alert('string param');
    }

    if (typeof (this) == 'string') {
        alert('string this');
    }
    else {
        alert(typeof(this));
    }
};

fn.call(str, str); 
```

我看到 3 条消息：`"string outside"`、`"string param"`和`"object"`。

我的目标是写一个`"if"`声明`"this"`是字符串。类似的东西`if (typeof(this) == 'string')`。这个不起作用，请指出将在函数内部起作用的正确语句。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T15:43:09.857

原始值在用作上下文时作为对象嵌入。

从[MDN 上调用函数](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)：

> 请注意，这可能不是方法看到的实际值：如果方法是非严格模式代码中的函数，null 和 undefined 将被替换为全局对象，原始值将被装箱。

如果您想知道对象是否为 String 类型，请使用：

```
var isString = Object.prototype.toString.call(str) == '[object String]'; 
```

这是[MDN 推荐](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/toString)的对象类型检测解决方案。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-22T15:41:44.773

[ES 规范](http://es5.github.com/#x10.4.3)强制`this`关键字引用一个对象：

> 1.  否则，如果 Type( *thisArg* ) 不是 Object，则将其设置`ThisBinding`为`ToObject(thisArg)`。

一种解决方法[`Object.prototype.toString`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/toString)：

```
Object.prototype.toString.call( this ) === '[object String]' 
```

[**小提琴**](http://jsfiddle.net/334Lz/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T15:47:03.003

要访问函数的参数，请不要使用`this`.

试试这个：

```
var fn = function(s) {
    if (typeof (s) == 'string') { // "s" is your passed parameter there.
        alert('string param');
    }
}; 
```

（显然，您甚至已经为传递的参数指定了名称）。

查看[本教程](http://www.quirksmode.org/js/function.html)，了解有关函数和参数的基础知识。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T15:49:56.457

原因`typeof this`是必须`"object"`始终`this`指向一个对象。这里 JavaScript 隐式地​​将字符串强制转换为对象。相反，您想要的是对象的原始值。尝试这个：

```
var str = "string value";

if (typeof str === "string") alert("string outside");

function fn(str) {
    var type = typeof this.valueOf();
    if (typeof str === "string") alert("string param");
    if (type === "string") alert("string this");
    else alert(type);
};

fn.call(str, str); 
```

希望这可以帮助。查看演示：http: [//jsfiddle.net/BuZuu/](http://jsfiddle.net/BuZuu/)

# dom - 如何将网页内容保存到文本文件

> ID：15027766
> 
> 赞同：0
> 
> 时间：2013-02-22T15:38:54.203
> 
> 标签：dom, browser, vbscript

我使用一个自动化脚本来测试基于浏览器的应用程序。我想将加载的每个页面的可见文本保存为文本文件。这需要适用于当前打开的浏览器窗口。我遇到了一些使用的解决方案，`InternetExplorer.Application`但这对我不起作用，因为它必须是当前打开的页面。

理想情况下，我想使用 vbscript 来实现这一点。任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-23T11:19:12.043

您可以像这样附加到已经运行的 IE 实例：

```
Set app = CreateObject("Shell.Application")
For Each window In app.Windows()
  If InStr(1, window.FullName, "iexplore", vbTextCompare) > 0 Then
    Set ie = window
    Exit For
  End If
Next 
```

然后像这样保存文档正文：

```
Set fso = CreateObject("Scripting.FileSystemObject")
Set f = fso.OpenTextFile("output.txt", 2, True)
f.Write ie.document.body.innerText
f.Close 
```

如果页面包含非 ASCII 字符，您可能需要使用 Unicode 编码创建输出文件：

```
Set f = fso.OpenTextFile("output.txt", 2, True, -1) 
```

或将其保存为 UTF-8：

```
Set stream = CreateObject("ADODB.Stream")
stream.Open
stream.Type     = 2 'text
stream.Position = 0
stream.Charset  = "utf-8"
stream.WriteText ie.document.body.innerText
stream.SaveToFile "output.txt", 2
stream.Close 
```

* * *

**编辑：**这样的事情可能有助于摆脱文档正文中的脚本代码：

```
Set re = New RegExp
re.Pattern    = "<script[\s\S]*?</script>"
re.IgnoreCase = True
re.Global     = True

ie.document.body.innerHtml = re.Replace(ie.document.body.innerHtml, "")

WScript.Echo ie.document.body.innerText 
```

# android - Android中简单SQLite测试的问题

> ID：15027767
> 
> 赞同：-1
> 
> 时间：2013-02-22T15:38:54.393
> 
> 标签：android, sqlite

好的，所以我希望将数据库合并到我正在处理的应用程序项目中，但在这里遇到了问题......下面是数据库处理程序类的代码（我相信取自 androidhive.info）

```
package apps.sqlitetest;

import java.util.ArrayList;
import java.util.List;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class DatabaseHandler extends SQLiteOpenHelper 
{

// All Static variables
// Database Version
private static final int DATABASE_VERSION = 1;

// Database Name
private static final String DATABASE_NAME = "contactsManager";

// Contacts table name
private static final String TABLE_CONTACTS = "contacts";

// Contacts Table Columns names
private static final String KEY_ID = "id";
private static final String KEY_NAME = "name";
private static final String KEY_PH_NO = "phone_number";

public DatabaseHandler(Context context) 
{
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
}

// Creating Tables
@Override
public void onCreate(SQLiteDatabase db) {
    String CREATE_CONTACTS_TABLE = "CREATE TABLE " + TABLE_CONTACTS + "("
            + KEY_ID + " INTEGER PRIMARY KEY," + KEY_NAME + " TEXT,"
            + KEY_PH_NO + " TEXT" + ")" ;
    db.execSQL(CREATE_CONTACTS_TABLE);
}

// Upgrading database
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // Drop older table if existed
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_CONTACTS);

    // Create tables again
    onCreate(db);
}

/**
 * All CRUD(Create, Read, Update, Delete) Operations
 */

// Adding new contact
public void addContact(Contact contact) {
    SQLiteDatabase db = this.getWritableDatabase();

    ContentValues values = new ContentValues();
    values.put(KEY_NAME, contact.getName()); // Contact Name
    values.put(KEY_PH_NO, contact.getPhoneNumber()); // Contact Phone

    // Inserting Row
    db.insert(TABLE_CONTACTS, null, values);
    db.close(); // Closing database connection
}

// Getting single contact
public Contact getContact(int id) {
    SQLiteDatabase db = this.getReadableDatabase();

    Cursor cursor = db.query(TABLE_CONTACTS, new String[] { KEY_ID,
            KEY_NAME, KEY_PH_NO }, KEY_ID + "=?",
            new String[] { String.valueOf(id) }, null, null, null, null);
    if (cursor != null)
        cursor.moveToFirst();

    Contact contact = new Contact(Integer.parseInt(cursor.getString(0)),
            cursor.getString(1), cursor.getString(2));
    // return contact
    return contact;
}

// Getting All Contacts
public List<Contact> getAllContacts() {
    List<Contact> contactList = new ArrayList<Contact>();
    // Select All Query
    String selectQuery = "SELECT  * FROM " + TABLE_CONTACTS;

    SQLiteDatabase db = this.getWritableDatabase();
    Cursor cursor = db.rawQuery(selectQuery, null);

    // looping through all rows and adding to list
    if (cursor.moveToFirst()) {
        do {
            Contact contact = new Contact();
            contact.setID(Integer.parseInt(cursor.getString(0)));
            contact.setName(cursor.getString(1));
            contact.setPhoneNumber(cursor.getString(2));
            // Adding contact to list
            contactList.add(contact);
        } while (cursor.moveToNext());
    }

    // return contact list
    return contactList;
}

// Updating single contact
public int updateContact(Contact contact) {
    SQLiteDatabase db = this.getWritableDatabase();

    ContentValues values = new ContentValues();
    values.put(KEY_NAME, contact.getName());
    values.put(KEY_PH_NO, contact.getPhoneNumber());

    // updating row
    return db.update(TABLE_CONTACTS, values, KEY_ID + " = ?",
            new String[] { String.valueOf(contact.getID()) });
}

// Deleting single contact
public void deleteContact(Contact contact) {
    SQLiteDatabase db = this.getWritableDatabase();
    db.delete(TABLE_CONTACTS, KEY_ID + " = ?",
            new String[] { String.valueOf(contact.getID()) });
    db.close();
}

// Getting contacts Count
public int getContactsCount() 
{
    String countQuery = "SELECT  * FROM " + TABLE_CONTACTS;
    SQLiteDatabase db = this.getReadableDatabase();
    Cursor cursor = db.rawQuery(countQuery, null);
    cursor.close();

    // return count
    return cursor.getCount();
}

} 
```

所以，这看起来一切都很好......但事情就是这样，我在我的 MainActivity 中有这条线试图通过在 TextView 中显示（单个）结果来测试读取数据库：

```
text.setText(db.getContact(9100).toString()) ; 
```

我想我现在要提到 Contact 类也是来自 androidhive 教程的东西；只是联系人的简单表示（如电话中的条目），具有字段 id (int)、姓名、电话号码（均为字符串）。在插入一些联系人的主要活动中有一组先前的行，其中一个的 ID 为“9100”。但是，此 setText 行似乎将以下错误抛出到 logcat 上，并因此在运行时停止应用程序：

```
02-22 15:04:37.682: E/AndroidRuntime(847): java.lang.RuntimeException: 
Unable to start activity 
ComponentInfo{apps.sqlitetest/apps.sqlitetest.MainActivity}:    
android.database.CursorIndexOutOfBoundsException: 
Index 0 requested, with a size of 0
02-22 15:04:37.682: E/AndroidRuntime(847):  
at apps.sqlitetest.DatabaseHandler.getContact(DatabaseHandler.java:81)
02-22 15:04:37.682: E/AndroidRuntime(847):  
at apps.sqlitetest.MainActivity.onCreate(MainActivity.java:40) 
```

有人可以告诉我这里有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T15:43:55.707

一个问题是在`getContact()`. 您永远不会检查游标是否实际包含任何数据。首先，删除此检查：

```
if (cursor != null) 
```

`cursor`永远`null`不可能。

相反，检查从`cursor.moveToFirst()`. 值`false`表示光标为空。只有当您获得`true`结果时，您才应该继续从光标读取字段并构建联系人。

一旦正确处理了游标不包含数据的这种情况，您就可以着手找出查询未检索到预期数据的原因。

# javascript - 如何创建一系列 jquery/js 动画？

> ID：15027773
> 
> 赞同：0
> 
> 时间：2013-02-22T15:39:09.947
> 
> 标签：javascript, jquery, particles

我对 js 有点菜鸟，但已经搞砸了[http://scurker.com/blog/2010/06/particle-generator-using-html5s-canvas](http://scurker.com/blog/2010/06/particle-generator-using-html5s-canvas)并想出了

```
<head>
    <script type="text/javascript" src="http://scurker.com/projects/particles/js/particle.js"></script>
  <script type="text/javascript" src="http://scurker.com/projects/particles/js/jquery.js"></script>
  <script type="text/javascript" src="http://scurker.com/projects/particles/js/jquery-ui.js"></script>
  <script type="text/javascript">

var particles;
window.onload = function() {  
  var canvas = document.getElementById('particle_canvas');
  particles = new ParticleCanvas(canvas, {x: 470});
 };

var effects = { 

  blue: {
    shape: 'circle',
    velocity: new Vector({y: -0.35}),
    color: '#0000ff',
    opacity: 1,
    onDraw: function(p) {
      p.opacity = 0.251 - (p.age / p.life) * 0.25;
    }
  },

  red: {
    shape: 'circle',
    velocity: new Vector({y: -3}),
    color: '#ff0000',
    opacity: 1,
    onDraw: function(p) {
      var y = -this.age * 3;
      p.size *= 0.98;
      p.opacity = 0.5 - (p.age / p.life * 0.4);
    }
  },
};

$.fn.toJson = function() {
  var json = {};
  $.each(this.serializeArray(), function() {
    json[this.name] = this.value !== null ? this.value : null;
  });
  return json;
};

function loadPreset(val) {
  var obj;  
  if((obj = effects[val])) {
    particles.update(obj);
    for(var i in obj) {
      var value = (obj[i] instanceof Vector) ? -obj[i].y : obj[i];
      $(':input[name=' + i + ']').val(value);
    }
    $('input').change();
  }
}

$(document).ready(function() {

  $('#controls :input').change(function() {
    particles.update($('#controls :input').toJson());
 particles.start();
  });

  $('select').change(function() { loadPreset(this.value); });
});

  </script>
</head>
     <body>
         <div id="particle_container">
<div id="controls">
  <ul>
    <li>
      <label>Presets: 
        <select>
          <option value="blue">Blue</option>
          <option value="red">Red</option>
        </select>
      </label>
    </li>
  </ul>
</div>
<canvas id="particle_canvas" height="500" width="940"></canvas> 
```

我无法让它在 jsfiddle 中工作，但在普通网站中，它会创建一个带有红色或蓝色选项的下拉菜单。

当您选择红色时，画布上会出现一些动画红色粒子，当您从列表中选择蓝色时，粒子会变为蓝色。

我想要做的是删除选择列表，我知道该怎么做。

但是将红色/蓝色动画设置为时间间隔。

因此，例如页面加载，等待 2 秒然后我希望红色粒子显示 5 秒（好像用户从下拉菜单中选择了红色）然后暂停 2 秒，蓝色粒子开始再过 5 秒（再次好像有人从下拉列表中选择了蓝色）。

所以基本上我试图将粒子设置为以预设的间隔运行，而不是手动选择。

我将如何实现这一目标？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:51:36.680

你不会在 javascript 中使用 setTimeout 吗？

```
setTimeout(/*do nothing*/,2000); // waiting
// red particles
setTimeout(/* Stop particles after 5 second*/,5000);
setTimeout(/*do nothing*/,2000); // waiting
// blue particles
setTimeout(/* Stop particles after 5 second*/,5000); 
```

# sql-server - 如何在服务器上运行 matlab 脚本？或者是否有在线matlab解释器？

> ID：15027774
> 
> 赞同：2
> 
> 时间：2013-02-22T15:39:11.177
> 
> 标签：sql-server, matlab, wamp

*   我有一个 matlab 脚本 Temp_script.m（比如说），我想在远程服务器上执行它。
*   我使用的服务器（远程）是免费的在线托管，它为我提供了 1.5GB 的存储空间。
*   由于服务器是远程服务器，我无法访问它，安装matlab软件或运行环境。
*   在本地，我可以在我的服务器上运行 matlab 脚本。显然，因为我的系统上安装了 matlab。

*   我的问题“是否有在线运行脚本的方法？或者是否有任何用于 matlab 的在线解释器？”

提前感谢-Ryaan Dias

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:17:44.323

您可以使用`deploytool`.

这将为您提供多种选择，您可以制作一个`dll`，甚至可能制作一个`exe`.

但是，该程序不会自行运行，因此如果您希望它在服务器上自动运行，您需要在那里有一个框架。示例可能是 .net，但我想有更简单的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T16:18:05.093

AFAIK 没有 Matlab 的 Web 界面，我怀疑 Matlab 许可证是否会涵盖这样的用例。但是，您总是可以尝试使用开源等效的 Octave 。Octave 只需稍作修改即可执行 Matlab 代码。

在 Google 上快速搜索*Octave Web Server*产生了许多结果。这是第一次点击： http: [//knn.mimuw.edu.pl/weboctave-project/](http://knn.mimuw.edu.pl/weboctave-project/)

# symfony - Symfony 2 如何从另一个包中导入 LESS 文件

> ID：15027780
> 
> 赞同：6
> 
> 时间：2013-02-22T15:39:23.490
> 
> 标签：symfony, less, assetic

LESS 有权@import 其他 LESS 文件。这个问题旨在找到一种解决方案，从 Symfony 项目中的另一个 Bundle 导入 LESS 文件中的 LESS 文件

我正在开发一个 Symfony2 项目，使用 LESS 和 Assetic 来观察变化。我的 LESS 文件能够导入其他 LESS 文件，但前提是它们位于同一个包中。

如果我尝试从另一个包导入，Assetic 手表会因导入失败而停止并出现错误“变量未定义”。

我在导入中尝试了各种路径：

在另一个包中的 LESS 文件中：

```
@import "../../../../MainBundle/Resources/public/less/colors.less";

@import "../../../../../../src/website/MainBundle/Resources/public/less/colors.less";

@import '/bundles/main/less/colors.less'

@import url('/bundles/main/less/colors.less'); 
```

我确定我已经尝试了几个正确的路径，但它们从不工作，因为该文件位于另一个包中，并且 Assetic watch / LESS 编译过程在包之间不能很好地做到这一点。

有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T12:56:27.663

我认为您必须使用来自 web/bundles 目录的路径。

我以这种方式导入文件：

我少了 2 个文件：

*   `src/Acme/FirstBundle/Resources/public/less/style1.less`
*   `src/Acme/SecondBundle/Resources/public/less/style2.less`

我想将 style1.less 导入 style2.less

样式2.less：

```
@import "../../acmefirst/less/style1"; 
```

使用：cssrewrite 文件管理器，lessphp

还记得使用它们实际的、可公开访问的路径来引用 LESS 文件：http: [//symfony.com/doc/current/cookbook/assetic/asset_management.html#include-css-stylesheets](http://symfony.com/doc/current/cookbook/assetic/asset_management.html#including-css-stylesheets)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-02T09:18:17.267

这是至少在 Symfony 2.8 上的完整工作示例。此示例使用 Assetic，并且应该与您的 css 中的嵌入文件一起使用。

这里的乔木

```
/app
/src
---/Acme
------/MyBundle
---------/Ressources
------------/public
---------------/css
------/MyOtherBundle
---------/Ressources
------------/public
---------------/css
/web
---/bundles
------/acmemybundle
------/acmemyotherbundle
---/css
------/built 
```

因此，假设*/src/Acme/MyBundle/Ressources/public/css/main.scss*是包含我想在其他包中导入的所有声明的文件（在我的情况下，我使用 sass，但它与 less 相同） .

在*/src/Acme/MyOtherBundle/Ressources/public/css/mycss.scss*我会做：

```
@import "../../../../MyBundle/Resources/public/css/main"; 
```

这指的是文件的经典物理位置，因此您的 IDE 会找到它。

**现在有趣的部分。我们希望将所有的 scss 文件编译、缩小并重命名为一个 css 文件。**我们可以用 Assetics 做到这一点。

在您加载 css 的树枝文件中（在我的情况下为 /app/Ressources/views/css.html.twig）。

```
 {% stylesheets
    filter='compass'
    filter='?uglifycss'
    filter='cssrewrite'
    output='css/built/myMinifiedAndCompiledSass.css'
    'bundles/mybundle/css/*.scss'
    'bundles/myotherbundle/css/*.scss'
   %}
    <link rel="stylesheet" type="text/css" href="{{ asset_url }}">
    {% endstylesheets %} 
```

==> 在这里你必须从 /web 目录中引用文件（所以使用'bundles/acmemybundle..' 语法。你需要以符号链接模式安装资产。（php app/console 资产：安装 --symlink）

==> 你可以在输出文件名和位置中放任何你想要的东西，因为你留在 web 目录中。

最后在你的 conf.yml

```
# Assetic Configuration
assetic:
    filters:
        cssrewrite: ~
        sass:    ~
        compass:
             load_paths:
                  - "/usr/bin/compass"
                  - "%kernel.root_dir%/../src/Acme/MyBundle/Resources/public/css/"
        uglifycss:
            bin: %kernel.root_dir%/../node_modules/.bin/uglifycss
        uglifyjs2:
            bin: %kernel.root_dir%/../node_modules/.bin/uglifyjs 
```

**这里重要的部分是 compass 中的 load_paths**。在基本设置中，您有指南针：〜您需要将其更改为：

```
 compass:
                 load_paths:
                      - "/usr/bin/compass"
                      - "%kernel.root_dir%/../src/Acme/MyBundle/Resources/public/css/" 
```

# php - PHP glob() 在 WordPress 子页面上中断

> ID：15027791
> 
> 赞同：0
> 
> 时间：2013-02-22T15:40:01.893
> 
> 标签：php, jquery, wordpress, cycle, glob

我已经为此苦苦挣扎了一段时间。

我有一个使用 jQuery 循环插件运行的图片库，并使用 PHP glob() 从文件夹中提取文件。问题是，当我导航到另一个页面时，由于在文件路径的开头附加了新页面的 url，画廊会中断。

例子：

头版网址：`http://localhost/project/image-display-images/image.jpg`

其他页面网址：`http://localhost/**NEWPAGE**/project/image-display-images/image.jpg`

这是我的代码：

```
$files = glob('image-display-images/*.*');

       for ($i=1; $i<count($files); $i++)

       {
          $num = $files[$i];
          echo '<img src="'.$num.'"'.' alt="Campus Images" width="362" height="246"/>';
       } 
```

这将生成一个图像列表供 jQuery 循环滚动浏览。它只适用于首页。

有任何想法吗？

解决了！

这是我的新代码：

```
$files = glob(ABSPATH.'/image-display-images/*.*');

foreach ($files as $f) {
    echo '<image src="'.home_url(str_replace(ABSPATH,'',$f)).'"alt="Campus Images" width="362" height="246"/>';

} 
```

这适用于所有页面。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T15:50:35.723

使用绝对路径：

```
$files = glob(ABSPATH.'image-display-images/*.*'); 
```

WordPress 核心设置了这个`ABSPATH`常数，所以它应该是相当可靠的。

`glob`处理文件系统路径，但您正在尝试加载 URL。要以您尝试的方式显示文件，您需要将结果转换为 URL。这是一个简单的例子。

```
$files = glob(ABSPATH."*.*");
foreach ($files as $f) {
  echo home_url(str_replace(ABSPATH,'',$f));
} 
```

您最好编写自己的函数来获取文件名，而不是取决于`glob`哪个确实带有关于在某些系统上不可用的警告。请参阅：[http ://codex.wordpress.org/Filesystem_API](http://codex.wordpress.org/Filesystem_API)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T15:49:38.720

定义画廊的完整路径，而不是`'image-display-images/*.*'` 例如`glob('/var/etc/www/image-display-images/*.*')`

# ajax - Backbone.js 是否适合从服务器获取 HTML？

> ID：15027792
> 
> 赞同：1
> 
> 时间：2013-02-22T15:40:03.550
> 
> 标签：ajax, django, backbone.js, asynchronous

据我所知，Backbone.js 视图代表 DOM 元素。我从现有的 DOM 中获取它或在`el`属性中动态创建它。

就我而言，我想通过 AJAX 请求从服务器获取它，因为我使用的是 Django 模板并且不想将所有内容都重写为 JavaScript 模板。

所以我定义`el`了执行 AJAX 请求的函数。

```
el: function() {
    model.fetch().success(function(response) {
        return response.template
    })
} 
```

当然，它不起作用，因为 AJAX 请求是异步执行的。

这意味着我没有`el`属性，`events`也没有工作。我可以修复它吗？

也许 Backbone.js 框架不适合我的需求？我想使用它的原因是有一些代码结构。

PS 我是 Backbone.js 的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T15:50:15.263

从另一个视图执行您的 ajax 请求，或者直接在页面加载后直接使用 jquery，并且在您下载模板之后，然后使用正确的 id/el 或其他任何内容（取决于您存储获取的 ajax 的位置）实例化您的主干视图类模板）。根据您的用例，这可能是也可能不是明智的方法。

另一种可能更典型的方法是使用一些占位符元素（例如“正在加载”或其他）设置您的视图，然后触发 ajax，并在检索到更新的模板后，相应地更新您的视图（替换带有您请求的实际模板的占位符）。

当/如果您使用新的/其他 DOM 元素更新视图时，您需要调用视图的`delegateEvents`方法将事件重新绑定到新元素，请参阅：

[http://backbonejs.org/#View-delegateEvents](http://backbonejs.org/#View-delegateEvents)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T13:20:07.580

我遇到了类似的要求。在我的实例中，我正在运行 asp.net 并希望从用户控件中提取我的模板。我建议的第一件事是研究 Marionette，因为它可以让您免于在 Backbone 中编写大量样板代码。下一步是覆盖模板的加载方式。在本例中，我创建了一个使用 Ajax 从服务器检索 HTML 的函数。我找到了这个函数的一个例子，他们用它来拉下 html 页面，所以我做了一些修改，所以我可以发出 MVC 类型的请求。我不记得我是从哪里找到这个想法的；否则，我会在这里给出链接。

```
function JackTemplateLoader(params) {
    if (typeof params === 'undefined') params = {};
    var TEMPLATE_DIR = params.dir || '';

    var file_cache = {};

    function get_filename(name) {
        if (name.indexOf('-') > -1) name = name.substring(0, name.indexOf('-'));
        return TEMPLATE_DIR + name;
    }

    this.get_template = function (name) {
        var template;
        var file = get_filename(name);
        var file_content;
        var result;
        if (!(file_content = file_cache[name])) {
            $.ajax({
                url: file,
                async: false,
                success: function (data) {
                    file_content = data; // wrap top-level templates for selection
                    file_cache[name] = file_content;
                }
            });
        }
        //return file_content.find('#' + name).html();
        return file_content;
    }

    this.clear_cache = function () {
        template_cache = {};
    };

} 
```

第三步是重写 Marionette 加载模板的方法。我在 app.addInitializer 方法中做到了这一点。在这里，我正在初始化我的模板加载器并将其目录设置为路由处理程序。因此，当我想加载模板时，我只需在视图中设置模板：“templatename”，Backbone 将从 api/ApplicationScreens/templatename 加载模板。我还重写了我的模板编译以使用 Handlebars，因为 ASP.net 对 <%= %> 语法没有印象。

```
 app.JackTemplateLoader = new JackTemplateLoader({ dir: "/api/ApplicationScreens/", ext: '' });
    Backbone.Marionette.TemplateCache.prototype.loadTemplate = function (name) {
        if (name == undefined) {
            return "";
        } else {
            var template = app.JackTemplateLoader.get_template(name);
            return template;
        }
    };
    // compiling
    Backbone.Marionette.TemplateCache.prototype.compileTemplate = function (rawTemplate) {
        var compiled = Handlebars.compile(rawTemplate);
        return compiled;
    };
    // rendering
    Backbone.Marionette.Renderer.render = function (template, data) {
        var template = Marionette.TemplateCache.get(template);
        return template(data);
    } 
```

希望这会有所帮助。我一直在开发一个大型动态网站，并且进展顺利。我一直对使用 Marionette 和 Backbone.js 的整体功能和流程感到惊讶。

# icons - AddThis - 如何加载 16px 图标集？

> ID：15027796
> 
> 赞同：0
> 
> 时间：2013-02-22T15:40:13.567
> 
> 标签：icons, addthis

如何加载 iframe 弹出窗口中设置的 16px 图标（按下“共享”按钮后显示的屏幕）？

我知道这是可能的，因为我在他们自己的网站上的演示中看到了它：- [http://www.addthis.com/pages/iframe-example-meta](http://www.addthis.com/pages/iframe-example-meta)

我注意到他们有 class="addthis_16x16_style" 所以我也在我的代码中设置了它，但它仍然不起作用。

我的源代码使用：

```
<div class="addthis_toolbox addthis_16x16_style">
    <a class="addthis_counter addthis_pill_style"></a>
    <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
    <a class="addthis_button_facebook_send"></a>
    <a class="addthis_button_tweet"></a>
</div> 
```

当我单击“共享”时，我总是会看到大图标。

因为它在 iframe 中加载，我什至可以控制它吗？（在 iframe 中使用 firebug 更改类确实会加载我想要使用的小图标）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T17:56:10.273

您引用的页面使用的是旧版本的 AddThis。要使用旧版本的 AddThis，您需要更改您的 JS 包括：

```
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-4ee0224503c60b3d"></script> 
```

到

```
<script type="text/javascript" src="//s7.addthis.com/js/**250**/addthis_widget.js#pubid=ra-4ee0224503c60b3d"></script> 
```

唯一的警告是我们正试图让人们升级到具有更高共享率的新版本，因此不建议使用旧版本。

# .net - .net split 命令表现得很奇怪

> ID：15027800
> 
> 赞同：0
> 
> 时间：2013-02-22T15:40:30.390
> 
> 标签：.net, vb.net, string, split

我有这两个代码行：

```
Dim templine() = Alfalines(i).Split(DataGridView1.Rows(s).Cells(1).Value)  
textlines(i) = Alfaline(0) + DataGridView1.Rows(s).Cells(language_row).Value + Alfaline(1) 
```

`DataGridView1.Rows(s).Cells(1).Value`从第一行开始有值`"Form2A186_1"`，并且`Alfalines(i)`在错误发生时：**“ Caption =”Form2A186_1”**

问题是 split 命令将 F 识别为分隔符，并将字符串拆分为：

```
0: "Caption    =   "    
1: "orm2A186_1" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T15:46:43.177

我认为这里的问题是带有 on 参数的 String.Split() 方法仅将 char[] 作为其参数，而不是 string 或 string[]，根据此处的文档：http: [//msdn.microsoft.com/en-我们/图书馆/system.string.split.aspx](http://msdn.microsoft.com/en-us/library/system.string.split.aspx)

所以为了按字符串分割，你应该使用这个重载：

```
Public Function Split ( _
    separator As String(), _
    options As StringSplitOptions _
) As String() 
```

# django - ImageFieldFile 对象没有属性开头

> ID：15027806
> 
> 赞同：0
> 
> 时间：2013-02-22T15:40:48.933
> 
> 标签：django, django-models

在删除信号上使用[django-storages 包](http://django-storages.readthedocs.org/en/latest/backends/amazon-S3.html)S3 我试图从 S3 中删除图像 我尝试了以下操作（见下文）但得到错误...

**“ImageFieldFile”对象没有属性“startswith”**

```
def product_pre_delete(sender, instance, **kwargs):
    """
    Sent at the beginning of a product delete() method product queryset's delete() method.
    """
    default_storage.delete(instance.qr_image)

models.signals.pre_delete.connect(product_pre_delete, sender=Product) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T15:44:50.627

据我所知，django-storages 只会在对象本身被删除时删除文件（向下滚动到删除部分）[https://django-storages.readthedocs.org/en/latest/backends/amazon-S3 .html?highlight=删除](https://django-storages.readthedocs.org/en/latest/backends/amazon-S3.html?highlight=delete)

如果您想保留对象，但删除文件，您可能必须使用[Boto](http://docs.pythonboto.org/en/latest/)自己处理，这是 django-storages 在使用 S3 时使用的底层库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T19:05:45.163

我也遇到了这个问题，发现**“ImageFieldFile”对象没有属性“startswith”**会引发错误，因为您使用的是文件对象而不是file.name。使用该对象在本地工作，但不适用于 AWS。下面的代码应该可以工作，因为我能够成功删除仍然与对象关联的文件。

```
default_storage.delete(instance.qr_image.name) 
```

# javascript - Verite 的时间轴 js ERA 和 BC 错误

> ID：15027821
> 
> 赞同：0
> 
> 时间：2013-02-22T15:41:36.970
> 
> 标签：javascript, timeline

我正在尝试使用时间线创建时间线。( [http://timeline.verite.co/](http://timeline.verite.co/) ) 问题是我不能回到公元前 9000 年以上，如果我将 ERA 添加到 JSON 对象，时间线就会一团糟（从更远的地方开始，线与地点和时代不同重叠）。

你能告诉我怎么做吗？（使用时代和 10000+ BC）

还发现了这个：[你能创建低于 271800 BC 的日期吗？喜欢恐龙时代？](https://stackoverflow.com/questions/8860297/can-you-create-dates-that-are-lower-than-271800-bc-like-dinosaur-time) 我怎样才能克服这个？

这是我的 JSON

```
 {
    "timeline":
    {
        "headline":"XXX",
        "type":"default",
        "text":"TEXTTTT",
        "startDate":"-11000",

        "date": [
            {
                "startDate":"-7000",
                "endDate":"",
                "headline":"title 1",
                "text":"text 1"
            },
            {
                "startDate":"-4000",
                "endDate":"",
                "headline":"title 2",
                "text":"text 2"
            },
            {
                "startDate":"-2500",
                "endDate":"",
                "headline":"title 3",
                "text":"text 3"
            }           
        ],

        "era": [
            {
                "startDate":"10000",
                "endDate":"8000",
                "headline":"Era 1",
                "text":"<p>Body text goes here, some HTML is OKs</p>",
                "tag":"This is Optionals"
            },
            {
                "startDate":"-4000",
                "endDate":"-3000",
                "headline":"Era 2",
                "text":"<p>Body text goes here, some HTML is OK</p>",
                "tag":"This is Optional"
            }

        ]
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:44:33.947

> 有效的 javascript 日期范围从 271,821bc 到 275,760ad。
> 
> 巨大的时间跨度被理解为比较数字——这么多天或这么多小时，使用天或小时作为距离现在的长度或距离。日期对于最近或不久的将来的事件很重要，除此之外您不需要也不能信任它们。

```
var d= 8.64e15;
var bcMin=new Date(-d),
bcMax=new Date(d);

['minimum Date Object: '+bcMin.toUTCString(),
'minimum date minus 1 day:'+
bcMin.setDate(bcMax.getDate()+1),
'maximum Date Object: '+bcMax.toUTCString(),
'maximum date plus 1 day:'+
bcMax.setDate(bcMax.getDate()+1)].join('\n').replace(/\-(\d+)/g,'$1bce');

> returned value: (String)
>     minimum Date Object: Tue, 20 Apr 271821bce 00:00:00 GMT
>     minimum date minus 1 day:NaN
>     maximum Date Object: Sat, 13 Sep 275760 00:00:00 GMT
>     maximum date plus 1 day:NaN 
```

# oracle - Oracle COLUMN_ID 隐式索引创建

> ID：15027825
> 
> 赞同：0
> 
> 时间：2013-02-22T15:41:53.907
> 
> 标签：oracle, indexing, unique-constraint, composite-primary-key

Oracle 如何使用在 USER_TAB_COLUMNS 视图中找到的 COLUMN_ID？我只需要确认它在创建隐式索引时不使用此内部列排序 - 例如当强制执行主键或创建唯一键约束时（即提供的键/约束列以相同的顺序使用 - 左向右而不是这些内部列排序）。（如果可能，请向我指出 Oracle 文档的方向。）。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T16:12:59.410

很难找到说明它不做某事的东西，但是没有任何东西说明它将`column_id`用来覆盖索引创建。

[您可以在此处查看](http://www.oracle.com/pls/db112/search?remark=quick_search&word=column_id)`column_id`文档中的所有参考；唯一看起来很重要的[是](http://docs.oracle.com/cd/E11882_01/server.112/e25513/statviews_2102.htm)[视图](http://docs.oracle.com/cd/E11882_01/server.112/e25513/statviews_2102.htm)。[`all_tab_columns`](http://docs.oracle.com/cd/E11882_01/server.112/e25513/statviews_2102.htm)

[`all_ind_columns`您可以通过查询视图](http://docs.oracle.com/cd/E11882_01/server.112/e25513/statviews_1100.htm)来验证索引中使用的列的顺序，您将能够看到它之间没有强制关系`column_position`——这来自索引创建命令中列出的列的顺序——和`column_id`.

如果您对检查支持约束的索引特别感兴趣，可以执行以下操作：

```
select ac.owner, ac.table_name, ac.constraint_name, ac.index_owner,
    ac.index_name, aic.column_position, aic.column_name
from all_constraints ac
join all_ind_columns aic on aic.index_owner = coalesce(ac.index_owner, ac.owner)
    and aic.index_name = ac.index_name
order by 1, 2, 3, 6; 
```

...根据需要为所有者或表添加过滤器。

# php - PHP 中的简单 HTML DOM 解析器

> ID：15027830
> 
> 赞同：1
> 
> 时间：2013-02-22T15:42:00.473
> 
> 标签：php, html, dom

我`simple_html_dom.php`用来从 html 中获取值。

```
<?php
// Create a DOM object; You must do this for each way
include('dom/simple_html_dom.php');
// Load HTML from a string
$html = new simple_html_dom();
$html->load_file('test.html');
$reasoncode = $html->find('input[name=reasonCode]');

foreach($reasoncode as $e){
    $results[] = $e->value;
}
?> 
```

在上面的代码中，如果我打印`$results[]`，它会返回我需要的正确值。但是如果我 print `$reasoncode`，它会打印一个长的 html 对象数组并在无限循环中运行。

# c# - MVC C# 奇怪的 NullReference 异常

> ID：15027834
> 
> 赞同：1
> 
> 时间：2013-02-22T15:42:13.173
> 
> 标签：c#, entity-framework, asp.net-mvc-4

我遇到了一个奇怪的错误，让我有点困惑，所以让我画图：

我有一个控制器，可以用房屋评论更新数据库。如果房子不存在，它会创建一个然后更新它。

所以这是如果房子不存在的代码：

```
if (checkHouse == null)
{
        var department = db.Universitys.Single(d => d.universityName == "NotSet");//make dynamic
        var hws = new House();
        hws.address1 = reviewmodelview.Address1;
        hws.address2 = reviewmodelview.Address2;
        hws.postCode = reviewmodelview.postCode;
        hws.noOfDisputes = 0;
        department.Houses.Add(hws);
        db.SaveChanges(); //created the house and saved the changes, now apply the review to it.

        var theHouse = db.Houses.Single(d => d.address1 == reviewmodelview.Address1);//findhouse
        var rvw = new Review(); //create review
        rvw.condition = reviewmodelview.condition;
        rvw.furniture = reviewmodelview.furniture;
        rvw.overall = reviewmodelview.overall;
        rvw.isApproved = false;
        rvw.review = reviewmodelview.review;
        rvw.user = User.Identity.Name;
        rvw.reviewDate = DateTime.Now;
        theHouse.Reviews.Add(rvw);
        db.SaveChanges();
} 
```

这是房子是否存在的代码：

```
else
{
    var theHouse = db.Houses.Single(d => d.address1 == reviewmodelview.Address1);//findhouse
    var rvw = new Review();//create review
    rvw.condition = reviewmodelview.condition;
    rvw.furniture = reviewmodelview.furniture;
    rvw.overall = reviewmodelview.overall;
    rvw.isApproved = false;
    rvw.review = reviewmodelview.review;
    rvw.user = User.Identity.Name;
    rvw.reviewDate = DateTime.Now;
    theHouse.Reviews.Add(rvw);
    db.SaveChanges();
} 
```

现在的问题是，如果房子存在，则添加评论。如果房子不存在，则将房子添加到数据库中，但代码在以下位置中断：

```
theHouse.Reviews.Add(rvw); 
```

如果我将鼠标悬停在评论上，它会说它为空。错误是“对象引用未设置为对象的实例”。

但是，如果我再试一次，但这次添加数据库中已经存在的房子的地址，并在

```
theHouse.Reviews.Add(rvw); 
```

它说：`{System.Data.Objects.DataClasses.EntityCollection<Data.Manager.Review>}`

我无法弄清楚为什么评论集合对于两段相同的代码是空的！

房子模型是这样的：

```
namespace Data.Manager
{
    public class House
    {
        public virtual int HouseID { get; set; }
        public virtual string postCode { get; set; }
        public virtual string address1 { get; set; }
        public virtual string address2 { get; set; }
        public virtual int noOfDisputes { get; set; } //number of disputes added by tennants
        public virtual int averageRating { get; set; }
        public virtual ICollection<Review> Reviews { get; set; }        
    }
} 
```

如果我能解释为什么会这样，我会永远爱你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T15:47:34.773

如果您要使用 来创建新房子`ICollection<Review> Reviews`，则必须先对其进行初始化，然后才能使用`Reviews.Add`. 它适用于已经存在的房屋的原因是，当您加载现有房屋时，集合将被初始化并填充现有值。

`theHouse.Reviews = new List<Review>();`在调用之前，您必须按照以下方式做一些事情`theHouse.Reviews.Add`。您还可以在 for 的构造函数中提前初始化`House`它，以确保在任何访问尝试之前对其进行初始化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T15:57:30.187

尝试在 House 构造函数中初始化您的评论集合

```
namespace Data.Manager
{
    public class House
    {
        public House()
        {
          Reviews = new List<Review>();
        }

        public virtual int HouseID { get; set; }
        public virtual string postCode { get; set; }
        public virtual string address1 { get; set; }
        public virtual string address2 { get; set; }
        public virtual int noOfDisputes { get; set; } //number of disputes added by tennants
        public virtual int averageRating { get; set; }
        public virtual ICollection<Review> Reviews { get; set; }        
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T15:56:05.350

正如前面的答案所述，您需要在添加项目之前初始化评论对象。

您可以通过只保存一次更改而不是对数据库进行两次调用来使您的代码稍微好一些。

```
 if (checkHouse == null)
        {

            var department = db.Universitys.Single(d => d.universityName == "NotSet");//make dynamic
            var hws = new House();
            hws.address1 = reviewmodelview.Address1;
            hws.address2 = reviewmodelview.Address2;
            hws.postCode = reviewmodelview.postCode;
            hws.noOfDisputes = 0;
            hws.Reviews = new List<Review>();

            var rvw = new Review(); //create review
            rvw.condition = reviewmodelview.condition;
            rvw.furniture = reviewmodelview.furniture;
            rvw.overall = reviewmodelview.overall;
            rvw.isApproved = false;
            rvw.review = reviewmodelview.review;
            rvw.user = User.Identity.Name;
            rvw.reviewDate = DateTime.Now;
            hws.Reviews.Add(rvw);
            department.Houses.Add(hws);

            db.SaveChanges();

        } 
```

# phpunit - travis-ci 中的可视化代码覆盖率

> ID：15027836
> 
> 赞同：6
> 
> 时间：2013-02-22T15:42:25.620
> 
> 标签：phpunit, code-coverage, travis-ci

我有一些 github 项目，我想用代码覆盖率进行测试。我发现（参见[博客文章](http://ocramius.github.com/blog/automated-code-coverage-check-for-github-pull-requests-with-travis/)）实现此目的的唯一方法是编写一个自定义脚本来计算代码覆盖率 XML 行和输出`Code coverage is 74.32%, which is below the accepted 80%`。在 HTML 中显示代码覆盖率要好得多，但是在 travis-ci 中可以吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-12-04T09:55:27.967

您可以将[https://coveralls.io/](https://coveralls.io/)与 Travis 一起使用以很好地显示覆盖范围。示例可以在这里找到：[https ://coveralls.io/r/phpmyadmin/error-reporting-server](https://coveralls.io/r/phpmyadmin/error-reporting-server)

PS：我知道这是一个很老的问题，但是我刚刚在搜索其他内容时发现了它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T19:09:42.460

Travic CI 不支持任何持久存储。一个建议是创建一个自定义脚本并运行`phpunit --coverage-html`，然后使用 rsync 之类的东西将输出目录的内容发送到您自己的服务器。

# java - Eclipse 首选项页面

> ID：15027839
> 
> 赞同：0
> 
> 时间：2013-02-22T15:42:42.860
> 
> 标签：java

我正在向我的 Eclipse 应用程序 (Juno) 添加首选项页面。我想创建类似于您在以下 Eclipse 首选项页面上看到的内容：Eclipse (Juno) > Window Menu > Preferences > Java > Compiler > Building。该首选项页面似乎是使用 org.eclipse.swt.widgets.Tree 创建的，但我不确定。如果是这样，他们是如何创建 TreeItems 的？它们是 org.eclipse.swt.widgets.TreeItems 吗？我需要添加 StringFieldEditors 和 IntegerFieldEditors，或某种类型的字段（TextArea??），前面有一些标签，我可以稍后验证。据我了解，不可能将 Composite 添加到 TreeItem，那么我应该如何解决这个问题？非常感谢任何建议。谢谢。

需要补充一点，因为我不能使用 Eclipse 内部包，有没有其他方法可以使用公共 API 来实现我上面描述的内容？

这是一个想法，但此代码将 TreeItems 内容放在树下。想法？

```
 Composite comp = getFieldEditorParent();

    Tree tree = new Tree(comp, SWT.NONE);
    tree.setLayout(new FillLayout());
    tree.setHeaderVisible(true);

    TreeItem item1 = new TreeItem(tree, SWT.NONE);
    item1.setText("Name1");

    TreeItem item11 = new TreeItem(item1, SWT.NONE);
    item11.setText("Name11");
    StringFieldEditor s11 = new StringFieldEditor(
        "name11",
        "label11:",
        comp);
    item11.setData(s11);

    TreeItem item12 = new TreeItem(item1, SWT.NONE);
    item12.setText("Name12");
    StringFieldEditor s12 = new StringFieldEditor(
        "name12",
        "label12:",
        comp);
    item12.setData(s12);

    item1.setExpanded(true);
    item11.setExpanded(true);
    item12.setExpanded(true);

    TreeItem item2 = new TreeItem(tree, SWT.NONE);
    item2.setText("Name2"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T16:12:29.240

如果您对 Eclipse 中任何 UI 元素的实现感兴趣，请安装 Eclipse SDK（通过*Help > Install New Software...*）并使用[插件 spy](http://www.vogella.de/articles/EclipseCodeAccess/article.html#pluginspy)。间谍告诉您哪个类实现了 UI 元素（在您的情况下，它`org.eclipse.jdt.internal.ui.preferences.JavaBuildPreferencePage`在`org.eclipse.jdt.ui`捆绑包中）。由于 SDK 包含源代码，因此您可以直接从间谍的弹出窗口跳转到那里，并自行查看它是如何完成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T21:59:48.067

使用 org.eclipse.ui.forms.widgets.ExpandableComposite 解决了这个问题。请参见下面的示例。我希望这可以帮助别人 ：）。

```
 protected final void createFieldEditors()
{
    // Create the ScrolledComposite to scroll horizontally and vertically
    fScrolledComposite = new ScrolledComposite(
        getFieldEditorParent(),
        SWT.H_SCROLL | SWT.V_SCROLL);
    //Displays the scrollbars when the window gets smaller
    fScrolledComposite.setAlwaysShowScrollBars(false);
    // Sets the minimum size for the composite to work for scrolling
    fScrolledComposite.setMinSize(fCompositeWidth, fCompositeHeight);
    fScrolledComposite.setExpandHorizontal(true);
    fScrolledComposite.setExpandVertical(true);

    Composite composite = new Composite(fScrolledComposite, SWT.NONE);
    composite.setLayout(new GridLayout());
    fScrolledComposite.setContent(composite);
    // Sets up the toolkit.
    Display display = composite.getDisplay();
    toolkit = new FormToolkit(display);

    // Creates a form instance.
    form = toolkit.createForm(composite);
    form.getBody().setLayout(new GridLayout());
    form.setBackground(display.getSystemColor(SWT.COLOR_WIDGET_BACKGROUND));
    form.setText("Model: " + SignalGeneratorDevice.MODEL_ID);// Sets title of the Preference page

    // Add the three main nodes to the preference page
    addNode1();
  }

   /**
 * Adds the first node to the preference page
 */
private void addNode1()
{
    ExpandableComposite expandableComposite = createExpandableComposite(
        "Signal Generator Device Host/Port:",
        true);
    Composite childComposite = createChildComposite(expandableComposite);

    //Builds fields here (StringFieldEditor, IntegerFieldEditor, etc.)
            ..................
}

    /**
 * Creates an ExpandableComposite that will be added to the preference page
 * 
 * @param label
 * @param expanded
 * @return
 */
private ExpandableComposite createExpandableComposite(
    String label,
    boolean expanded)
{
    ExpandableComposite expandableComposite = null;
    if (expanded) {
        expandableComposite = toolkit.createExpandableComposite(
            form.getBody(),
            ExpandableComposite.TWISTIE | ExpandableComposite.CLIENT_INDENT
            | ExpandableComposite.EXPANDED);
    } else {
        expandableComposite = toolkit
        .createExpandableComposite(
            form.getBody(),
            ExpandableComposite.TWISTIE
            | ExpandableComposite.CLIENT_INDENT);
    }

    expandableComposite.setText(label);
    expandableComposite.setBackground(form.getBackground());
    expandableComposite.addExpansionListener(new ExpansionAdapter() {
        @Override
        public void expansionStateChanged(
            ExpansionEvent e)
        {
            form.pack();
        }
    });

    GridData gd = new GridData();
    expandableComposite.setLayoutData(gd);

    return expandableComposite;
}

/**
 * Creates a child composite for an ExpandableComposite
 * 
 * @param expandableComposite
 * @return
 */
private Composite createChildComposite(
    ExpandableComposite expandableComposite)
{
    Composite childComposite = new Composite(expandableComposite, SWT.None);

    GridData gd = new GridData(GridData.FILL_BOTH);
    gd.horizontalSpan = 2;
    //gd.horizontalAlignment = GridData.END;
    childComposite.setLayoutData(gd);

    expandableComposite.setClient(childComposite);

    return childComposite;
} 
```

# jquery - jquery slideToggle 有一个奇怪的跳转

> ID：15027840
> 
> 赞同：-1
> 
> 时间：2013-02-22T15:42:43.727
> 
> 标签：jquery, slidetoggle

如果你看这个页面

[newdemo4.virtual-showroom.com](http://newdemo4.virtual-showroom.com/)

当“此站点使用 cookie”面板出现时，如果您单击“我希望了解更多”链接，则打开的面板打开得太远，然后又恢复到适当的大小。我不明白为什么？我已删除所有填充和边距，尝试将定位设置为相对并尝试固定宽度。

我只是在使用 slideToggle，没什么特别的。

请问有人知道为什么会这样吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T15:54:36.610

如果将其添加到**cookieMoreInfo**类，它应该可以正常工作：

```
height: 100%; 
```

应该是这样的：

```
<div class="cookieMoreInfo" style="display: block; height: 100%;">... 
```

`300px`如果您只定义一个特定的高度（比如），那就更好了。

# c++ - 串口卡在等待（4，

> ID：15027846
> 
> 赞同：0
> 
> 时间：2013-02-22T15:43:01.223
> 
> 标签：c++, linux, serial-port

我在 C++ for linux 中有这个实现，用于初始化串行端口：

```
void setupSerialPort()
{
    fcntl(STDIN_FILENO, F_SETFL, O_NONBLOCK);       

    memset(&tio, 0, sizeof(tio));
    tio.c_iflag = 0;
    tio.c_oflag = 0;
    tio.c_cflag = CS8|CREAD|CLOCAL;                 
    tio.c_lflag = 0;
    tio.c_cc[VMIN] = 0;                             
    tio.c_cc[VTIME] = 0;                                

    fd = open(SERIALPORT, O_RDWR | O_NONBLOCK) ;                

    fcntl(fd , F_SETFL, 0);     // read data in the buffer per chunk

    cfsetospeed(&tio, B4800);             // 4800 baud
    cfsetispeed(&tio, B4800);             // 4800 baud

    tcsetattr(fd , TCSANOW, &tio);
} 
```

有时，串口读取卡住了，我使用“strace”查看发生了什么。问题是：

```
strace -p 9454
Process 9454 attached - interrupt to quit
wait4(-1, ^C <unfinished ...>
Process 9454 detached 
```

我怎样才能避免这个问题（它不会一直发生）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T05:10:07.687

我的建议...打开设备：

int fd = TEMP_FAILURE_RETRY(open(ttyName, O_RDWR | O_NOCTTY | O_NONBLOCK));

需要宏 TEMP_FAILURE_RETRY 来保护打开、关闭、读取和选择免受信号中断的影响。如果您使用 libc，请阅读宏。包含 O_NOCTTY 标志以避免设备成为进程的控制端口。检查有效 fd 的返回值。

* * *

C。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:44:56.663

随机发生的问题表明对 open 的调用失败。因此，请检查 open call 和其他剩余调用的返回值。

`if (fd < 0) return;`

还要确保串行端口的干净关闭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T20:18:38.987

涉及 IO 的系统调用可能会特别卡在网络 IO 上。由于您使用的是不应该的 NON_BLOCKING 模式，因此完整的代码在这里会有所帮助。就我个人而言，我之前遇到过这种情况，我使用计时器生成 SIG_USR，它用于以错误结束阻塞调用。该算法的伪代码如下：

```
 initiateTimer ( timeout)
     myfunctionCall(){
        someSysCall();
     }
  if(!signalled){
    disableTimer();
  }else{
     checkState();
     if(fatal)
       die;
   } 
```

# r - 如何制作要在 R 的 for 循环中使用的 lmer 模型对象列表？

> ID：15027850
> 
> 赞同：2
> 
> 时间：2013-02-22T15:43:16.293
> 
> 标签：r, list, for-loop, lme4, mixed-models

我正在尝试在 R 中编写一个 for 循环（我的第一个！），以便生成和保存使用 lme4 包中的函数 lmer 拟合的几个混合效果模型的诊断图。这是我迄今为止所做的，以 sleepstudy 数据为例：

```
require(lme4)

mod1<-lmer(Reaction ~ Days + (1|Subject),sleepstudy)
mod2<-lmer(Reaction ~ 1 + (1|Subject),sleepstudy)

List<-c(mod1,mod2)
names<-c("mod1","mod2")

i=1

for (i in 1:length(List)) {
  jpeg(file = paste("modelval_", names[i], ".jpg", sep=""))
  par(mfrow=c(2,2))
  plot(resid(List[i]) ~ fitted(List[i]),main="residual plot")
  abline(h=0)
  qqnorm(resid(List[i]), main="Q-Q plot of residuals")
  qqnorm(ranef(List[i])$Subject$"(Intercept)", main="Q-Q plot of random effect" )
  dev.off()
} 
```

输入 R consol 时收到以下错误消息：

```
Error in function (formula, data = NULL, subset = NULL, na.action = na.fail,  : 
invalid type (NULL) for variable 'resid(list[i])' 
```

我感觉问题与我创建的模型列表有关，而不是与 for 循环本身有关，我认为这可能与 S4 类的模型对象有关。有可能制作这样的清单吗？我也尝试制作如下列表，但没有任何改进（仍然收到相同的错误消息）

```
List<-list(mod1,mod2) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-04T00:37:05.560

第一次使用`c`可能会丢失您创建的对象的类结构。要制作包含您的模型的列表，请使用`list(mod1, mod2)`.

其次，`List[i]`是一个长度为 1 的列表，其中包含 的第 i 个元素`List`。用于`List[[i]]`提取元素本身（您的模型）。

# java - 在Android中每10秒下载一次图像作为服务（无GUI）？

> ID：15027855
> 
> 赞同：-5
> 
> 时间：2013-02-22T15:43:30.807
> 
> 标签：java, android

*   如何使用 Android 上的服务每 10 秒从 Web 服务器下载一张图像，没有通知，只是后台工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T15:50:19.820

有很多教程将向您展示如何使用 android API 创建服务。我讨厌只是放置答案的链接，但我并不特别想从自己编码中获得乐趣。

**创建服务**

[http://www.vogella.com/articles/AndroidServices/article.html](http://www.vogella.com/articles/AndroidServices/article.html)

**下载图像**

然后，您可以创建一个后台线程，该线程对网络服务器上的位置执行 HttpGet，然后休眠 10 秒。HttpGet 是 Apache HttpClient API 的一部分，从 API 级别 1 ( [http://developer.android.com/reference/org/apache/http/client/methods/HttpGet.html](http://developer.android.com/reference/org/apache/http/client/methods/HttpGet.html) )开始可用

**保存图像**

将其保存在何处取决于您是否希望将其放置在内部/外部存储中。以下链接将帮助您使用输出流保存文件：-

[http://developer.android.com/training/basics/data-storage/files.html](http://developer.android.com/training/basics/data-storage/files.html)

# sql - 获取 MIN 日期

> ID：15027856
> 
> 赞同：0
> 
> 时间：2013-02-22T15:43:31.877
> 
> 标签：sql, tsql, db2

我有一个看起来像的表（A）：

```
ID     Date
1      2012/01/12
2      2012/01/01
3      2012/01/03
4      2012/03/12 
```

如果我想获取`MIN`此查询的日期，我会`group by`吗？

```
select
  a.ID,
  MIN(a.DATE),
  b.name,
  c.price
FROM
  tablea a inner join tableb b on a.ID = b.ID
  inner join tablec c b.ID = c.ID 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T15:45:44.370

你想要一个窗口函数。正确的表达是：

```
select a.id,
       min(a.date) over () as mindate,
       b.name, c.price
. . . 
```

这表示要获取数据中日期的最小值。没有分区，因此它可以覆盖所有数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T15:45:31.767

如果您正在寻找那些有最短日期的人，那么您可以这样做：

```
select
  a.ID,
  a.DATE,
  b.name,
  c.price
FROM tablea a 
INNER JOIN
(
   SELECT Id, MIN(Date) AS MinDate 
   FROM tablea
   GROUP BY Id
) As minA ON a.date = mina.mindate AND a.id = mina.id
inner join tableb b on a.ID = b.ID
inner join tablec c b.ID = c.ID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T15:46:11.310

```
WITH recordList
as
(
    select  a.ID,
            a.DATE,
            b.name,
            c.price,
            DENSE_RANK() OVER (PARTITION BY a.ID
                                ORDER BY a.Date ASC) rn
    FROM    tablea a 
            inner join tableb b on a.ID = b.ID
            inner join tablec c b.ID = c.ID
)
SELECT  ID, DATE, name, Price
FROM    recordList
WHERE   rn = 1 
```

# excel - DDE 更新触发的基于公式的单元格更改的时间戳

> ID：15027860
> 
> 赞同：4
> 
> 时间：2013-02-22T15:43:41.917
> 
> 标签：excel, event-handling, updates, dde, vba

我在 A 列中有数据，并且当 A 列中的数据发生更改时，我希望 B 列中有一个时间戳。

现在这是棘手的部分：A 列的值是基于公式的，来自 Vlookup 表。这个 Vlookup 表有 dde ​​链接。所以从来没有手动输入电子表格。

如果您必须在 A 列中输入数据，则下面的代码效果很好，但不适用于上述情况，或者即使您说。细胞`A1 = C1+D1`。通过更改 C1 或 D1 将更改 A1 ...但这不会启动宏。

```
Private Sub Worksheet_Change(ByVal Target As Range)
    If Target.Column = 1 Then
        Cells(Target.Row, 2).Value = Now
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T18:57:49.343

我对这些事情不太熟悉，但`Worksheet_Change`在我的工作簿中将 Oracle DB 选择触发器事件与您的代码在刷新时相关联。但是，您的情况可能是另一回事 - 我没有看到您的数据结构。

无论如何，尝试使用以下技巧：在 A 列的某处添加任何简单的公式，例如`=A1`（如果`A1`DDE 更新时发生更改） - 它应该在刷新时更改并因此触发`Worksheet_Change`事件。

在此处阅读更多内容：[Excel 2000 中的 DDE 链接 - 如何运行宏](http://www.mrexcel.com/archive/VBA/17509.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-29T16:49:50.640

DDE 不会**触发**事件`Worksheet_Change()`。但是，DDE 确实会触发该`Worksheet_Calculate()`事件。当发生 DDE 更新时，您可以使用它来捕获。

# mysql - 具有循环返回的存储函数包含多于一行？

> ID：15027863
> 
> 赞同：0
> 
> 时间：2013-02-22T15:43:53.027
> 
> 标签：mysql, stored-functions

以下存储函数正在返回：'#1172 - 结果包含多行'

我究竟做错了什么？

它是一个存储函数，没有参数并且期望返回一个 int。

```
BEGIN
    DECLARE l_user_id INT;

    sloop:LOOP
        SELECT `user_id` INTO `l_user_id` FROM `users` WHERE `area_id` = 1;

    INSERT INTO `user_function_hours` SET `function_hour_id` = 1, `user_id` = l_user_id;
    INSERT INTO `user_function_hours` SET `function_hour_id` = 2, `user_id` = l_user_id;
    INSERT INTO `user_function_hours` SET `function_hour_id` = 3, `user_id` = l_user_id;
    INSERT INTO `user_function_hours` SET `function_hour_id` = 4, `user_id` = l_user_id;
    INSERT INTO `user_function_hours` SET `function_hour_id` = 5, `user_id` = l_user_id;
    END LOOP sloop;

    RETURN 1;
END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:55:15.757

是的，我们会在触发器中遇到这种错误。

请检查此查询。它提供超过 1 条记录作为结果。

```
SELECT `user_id` INTO `l_user_id` FROM `users` WHERE `area_id` = 1; 
```

请将此查询更改为，

```
SELECT `user_id` INTO `l_user_id` FROM `users` WHERE `area_id` = 1 LIMIT 1; 
```

这样，您就可以解决此错误。

# android - Android Google Maps API v2 开始导航

> ID：15027867
> 
> 赞同：2
> 
> 时间：2013-02-22T15:44:08.280
> 
> 标签：android, google-maps, android-intent, xamarin.android

我有一个显示带有标记的地图的应用程序。当用户触摸标记时，我想为他们开始导航。

是否有一个 Intent/Activity 可以传递经度和纬度并启动用户导航应用程序？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T16:18:14.323

我是这样解决的。发布的网址是相似的。

```
Intent navigation = new Intent(
            Intent.ACTION_VIEW,
            Uri.parse("http://maps.google.com/maps?saddr=START_LAT,START_LON&daddr=END_LAT,END_LON"));
startActivity(navigation); 
```

其中 Start 是 START_LON，START_LAT 是经度和纬度，END_LON，END_LAT 是结束

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-10T05:19:23.570

利用 ：

```
Uri gmmIntentUri = Uri.parse("google.navigation:q="+"18.7703500,19.4534500");
                Intent mapIntent = new Intent(Intent.ACTION_VIEW, gmmIntentUri);
                mapIntent.setPackage("com.google.android.apps.maps");
                startActivity(mapIntent); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-10T23:40:25.180

这很好用：

```
 googleMap.setMyLocationEnabled(true);

    LocationManager locManager = (LocationManager) getSystemService(LOCATION_SERVICE);
    Criteria cri = new Criteria();
    bestProvider = locManager.getBestProvider(cri, true);

    Location loc = locManager.getLastKnownLocation(bestProvider);
    String latMy = String.valueOf(loc.getLatitude());
    String lngMy = String.valueOf(loc.getLongitude());

    Toast.makeText(this, "Navigation", Toast.LENGTH_SHORT).show();
    String url = "http://maps.google.com/maps?saddr=" + latMy + ","
            + lngMy + "&daddr=" + "18.7703500,19.4534500";

    Intent navigation = new Intent(Intent.ACTION_VIEW);
    navigation.setData(Uri.parse(url));

    startActivity(navigation); 
```

# haskell - 数据并行 Haskell / GHC 7.4.2 的运行时异常

> ID：15027870
> 
> 赞同：6
> 
> 时间：2013-02-22T15:44:21.120
> 
> 标签：haskell, ghc, ghci, data-parallel-haskell

我正在尝试使用 Data Parallel Haskell 运行一些简单的实验，但我显然有一些选项错误。即使我尝试一些非常简单的事情，比如

```
sumP [:1.0,2.0:] 
```

我得到一个例外

```
Exception indexParr: out of bounds parallel array index; idx = 0, arr len = 0 
```

假设我设置错误 - 但是......

在尝试使用 GHCi 和运行使用 GHC 生成的可执行文件时，我都会遇到同样的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T14:40:53.033

您可能会[遇到 DPH 项目状态](http://www.haskell.org/haskellwiki/GHC/Data_Parallel_Haskell#Project_status)指定的一些限制。具体来说

> 主要限制包括无法在单个 Haskell 模块中混合矢量化和非矢量化代码，需要对矢量化代码使用功能被剥夺的专用 Prelude，以及缺乏优化（在某些情况下导致性能不佳） .

如果您只是想利用常规数据并行性，您可能可以使用[repa](http://www.haskell.org/haskellwiki/Numeric_Haskell%3a_A_Repa_Tutorial#Quick_Tour)（这也是 DPH 页面推荐的）。

# git - 在 git 中取消跟踪和停止跟踪文件

> ID：15027873
> 
> 赞同：44
> 
> 时间：2013-02-22T15:44:22.670
> 
> 标签：git

我有一个名为的深层子文件夹，其中包含我不想被 git (Windows) 跟踪的`objects`文件。`*.object`

在 .gitignore 我尝试了各种组合（例如`**/objects/*`等`**/objects/*`）但无济于事：每次，当`git status`我看到：

```
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#       foo/src/objects/a.object
#       foo/src/objects/b.object 
```

只有当我添加`*.object`到 .gitignore 时，文件才会从未跟踪的文件列表中消失。我的外卡有什么问题？

另外，什么时候`git update-index`需要，我应该什么时候做`git rm --cached myfile`？

rm like 有通配符功能`git rm --cached **/foo/*.zip`吗？

更新：同样，将行添加`.gitignore`到`.gitignore`（并不总是可取但仍然）没有效果。这是因为这些文件可能在过去被跟踪过吗？

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2013-02-22T16:10:55.860

好的，虽然通配符不起作用（显然在 Windows 中），但似乎可以删除整个文件夹：

```
git rm -r --cached "path/to/foo/" 
```

我知道 --cached 只有 unstages - 你必须`git commit`从 repo 中删除它们。

# jquery - JQuery 应该针对 TinyMCE 插件中的一个类

> ID：15027877
> 
> 赞同：2
> 
> 时间：2013-02-22T15:44:48.857
> 
> 标签：jquery, wordpress, tinymce

我为 Wordpress 编写了一个插件来增强 TinyMCE 功能。我通过以下代码将 js 文件包含到管理面板中：

```
add_action('admin_print_scripts', 'admin_head_js');
function admin_head_js() {
    $myJSFile =  plugins_url( 'a2m_functions.js', __FILE__ ) ;
    wp_enqueue_script( 'a2m_functions_js',$myJSFile,false,'1.0');
} 
```

TinyMCE 插件如下所示：

```
// closure to avoid namespace collision
(function(){
    // creates the plugin
    tinymce.create('tinymce.plugins.a2m_landingpages', {
        // creates control instances based on the control's id.
        // our button's id is "mygallery_button"
        createControl : function(id, controlManager) {
            if (id == 'a2m_landingpages_button') {
                // creates the button
                var button = controlManager.createButton('a2m_landingpages_button', {
                    title : 'A2ML Landindpage', // title of the button
                    image : '../wp-includes/images/smilies/icon_mrgreen.gif',  // path to the button's image
                    onclick : function() {
                        // triggers the thickbox
                        var width = jQuery(window).width(), H = jQuery(window).height(), W = ( 720 < width ) ? 720 : width;
                        W = W - 80;
                        H = H - 84;
                        tb_show( 'A2M Landingpage Content', '#TB_inline?width=' + W + '&height=' + H + '&inlineId=a2ml-form' );
                    }
                });
                return button;
            }
            return null;
        }
    });

    // registers the plugin. DON'T MISS THIS STEP!!!
    tinymce.PluginManager.add('a2m_landingpages', tinymce.plugins.a2m_landingpages);

    // executes this when the DOM is ready
    jQuery(function(){
        // creates a form to be displayed everytime the button is clicked
        // you should achieve this using AJAX instead of direct html code like this
        var form = jQuery('<div id="a2ml-form">\
                                <div class="a2ml-form-wrapper">\
                                    <div class="a2ml-form-selector a2ml-form-landingpage">Landingpage Quiz</div>\
                                    <div class="a2ml-form-selector">AR Quiz</div>\
                                <\div>\
                            </div>');

        var table = form.find('table');
        form.appendTo('body').hide();

        // handles the click event of the submit button
        form.find('#a2m-submit').click(function(){
            // defines the options and their default values
            // again, this is not the most elegant way to do this
            // but well, this gets the job done nonetheless
            var shortcode = '<table><tr><td>';
            shortcode += table.find('#a2ml-question').val();
            shortcode += '</td></tr></table>';

            // inserts the shortcode into the active editor
            tinyMCE.activeEditor.execCommand('mceInsertContent', 0, shortcode);

            // closes Thickbox
            tb_remove();
        });
    });
})() 
```

包含的 a2m_functions.js 如下所示：

```
jQuery(document).ready(function(){

    jQuery('.a2ml-form-wrapper').on('click', '.a2ml-form-selector', function() {
        alert("Yes");

    });
}); 
```

但是当我点击没有警报出现。JQuery 选择器如何与 Wordpress 中的 TinyMCE 插件一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T16:16:45.010

我不认为您的问题专门针对 TinyMCE。

`.a2ml-form-wrapper`加载脚本时，您在脚本中选择的 html 元素可能还不存在。如果 TinyMCE 脚本在您自己的脚本之后加载，或者它的 html 元素被延迟添加到页面中，就会出现这种情况。

如果我的假设适用，则解决方案是确保在 TinyMCE 之后加载您的脚本，或者使用[`.live()`](http://docs.jquery.com/Events/live)而不是使用`.on()`来收听点击。即使在您编写脚本后加载了单击的元素，这也会触发您的回调。

```
$(document).ready(function() {
    $('.a2ml-form-wrapper').live('click', function() {
        alert('Hello World');
    });
}); 
```

如果这不能解决您的问题，了解整个 TinyMCE html 结构和脚本可能会很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T17:01:40.517

sharethis 的说法是部分正确的。 `$('.a2ml-form-wrapper')`不会返回任何东西，因为元素在执行时不存在。但`$(document).ready`在这里无济于事，因为`ready`当文档准备好时被解雇 - 而不是编辑器。tinymce 编辑器通常需要更长的时间才能完全初始化。

您需要在这里做的是在编辑器准备好时分配处理程序。这是解决方案：

在您自己的插件中的 createControl 之后添加以下代码

```
createControl : function(id, controlManager) {
    ....
},
init : function(ed, url) {
    ed.onInit.add(function(ed) {
        jQuery('.a2ml-form-wrapper').on('click', '.a2ml-form-selector', function() {
            alert("Yes");
        });
    )};
}, 
```

# mysql - 获取mysql数据库中记录的最大项目数

> ID：15027891
> 
> 赞同：1
> 
> 时间：2013-02-22T15:45:23.657
> 
> 标签：mysql, sql

我有一个名为“roomrent”的 Mysql 表，其结构如下：

```
Id     city           country
----------------------------------
1      Dhaka          Bangladesh
2      Dhaka          Bangladesh
3      Washington     United States 
4      Paris          France
5      Dhaka          Bangladesh
6      Paris          France 
```

我想显示 DB 中记录的最长时间的 5 个城市。喜欢：在这张表中，**达卡**是重新编码的最大时间。

所以它应该是这样显示的：

```
Dhaka
Paris
Washington
and other..... 
```

我如何用 mysql 查询得到这个？我知道这可以通过 mysql **Select query**来完成，但我不能。

注意：我是 php 和 mysql 的新手，这是我的学习时间。

非常感谢任何帮助。
谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T15:47:15.280

您应该能够使用以下内容。它将计算出现在您的表格中的城市，并将返回前 5 个：

```
select city, count(city) Total
from roomrent
group by city
order by total desc
limit 0, 5 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/c935f/1)

# php - 亚马逊 MWS 产品 Feed 未提交

> ID：15027893
> 
> 赞同：-1
> 
> 时间：2013-02-22T15:45:23.467
> 
> 标签：php, amazon-mws

我正在研究亚马逊 API。我想在亚马逊账户上提交产品提要。

我已经通过 Amazon Scratch Pad 验证了 XML 文件（产品提要），并且我得到了提要已提交的响应，但是当我运行脚本时，要按脚本提交相同的提要，我没有得到任何响应。

这是我的代码：

```
$req = new MarketplaceWebService_Model_SubmitFeedRequest();
$req->setMerchant(MERCHANTID);
$req->setMarketplaceIdList(MARKETPLACEID);
$req->setFeedType('_POST_PRODUCT_DATA_');
$req->setContentMd5(base64_encode(md5(stream_get_contents($fh), true)));
rewind($fh);
$req->setPurgeAndReplace(true);
$req->setFeedContent($fh);
$res = $mws->submitFeed($request);
echo $res; 
```

当我回显`$res`.

* * *

我已将 `$res = $mws->submitFeed($request);`. `$res = $mws->submitFeed($req);`提交提要仍然没有成功。在提交提要时，我没有收到亚马逊返回的任何响应标头。

代码是这样的：

```
$req = new MarketplaceWebService_Model_SubmitFeedRequest();
$fh = fopen('feed.xml', 'r');
$req->setMerchant(MERCHANTID);
$req->setMarketplaceIdList(MARKETPLACEID);
$req->setFeedType('_POST_PRODUCT_DATA_');
$req->setContentMd5(base64_encode(md5(stream_get_contents($fh), true)));
rewind($fh);
$req->setPurgeAndReplace(true);
$req->setFeedContent($fh);
$res = $mws->submitFeed($req);
echo $res; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T15:07:53.720

除了其他可能出错`$request`的事情：您正在提交，而您可能想要提交的内容是`$req`.

编辑：既然你纠正了这个错误，但仍然没有结果......：

`submitFeed()`返回一个`MarketplaceWebService_Model_SubmitFeedResponse`对象。

Echo 不适用于对象，除非对象有一个`__toString()`方法，而这个类没有。尝试使用`print_r($res)`or`var_dump($res)`代替。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T09:47:36.600

尝试这个

```
$marketplaceIdArray = array("Id" => array($MARKETPLACE_ID));
     $feedHandle = @fopen('php://temp', 'rw+');
     fwrite($feedHandle, $feed);
     rewind($feedHandle); 

     $parameters = array(
         'Merchant' => $MERCHANT_ID,
         'MarketplaceIdList' => $marketplaceIdArray,
         'FeedType' => '_POST_PRODUCT_DATA_',
         'FeedContent' => $feedHandle,
         'PurgeAndReplace' => false, 
         'ContentMd5' => base64_encode(md5(stream_get_contents($feedHandle), true))
     );

     rewind($feedHandle);
     $request = new MarketplaceWebService_Model_SubmitFeedRequest($parameters);

     $return_feed = invokeSubmitFeed($service, $request);

     fclose($feedHandle); 
```

# asp.net - 切换 Visual Studio 以使用本地 IIS 服务器后，找不到图像和样式文件

> ID：15027895
> 
> 赞同：2
> 
> 时间：2013-02-22T15:45:29.520
> 
> 标签：asp.net, visual-studio-2010, iis

我将 Visual Studio 2010 中的网站属性更改为“使用本地 IIS Web 服务器”而不是 Visual Studio 开发服务器，然后单击“创建虚拟目录”。

现在，当我在 localhost 中查看网站时，找不到我的图像和样式。网站中的路径是相对的。404 消息说物理路径是“C:\inetpub\wwwroot”，它不是应用程序根目录。如果我将图像和样式文件夹复制到“C:\inetpub\wwwroot”中，则会出现图像。

我是否错过了一些配置设置以确保静态文件来自应用程序而不是 wwwroot？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T15:52:10.460

您需要检查 IIS 中的应用程序。默认网站默认为默认指向`c:\inetpub\wwwroot`。如果您的站点是虚拟目录而不是 IIS 中的应用程序（例如`http://localhost/yoursite`，与 相对`http://localhost:6000`），并且您使用如下 URL 引用静态文件：`/images/file.jpg`，那么 IIS 将在 wwwroot 文件夹中查找这些文件。

我将在 IIS 中手动创建一个新网站，指向您应用程序的根文件夹，在您选择的端口上，然后返回 Visual Studio 中的设置页面并更新端口号。

确保您的网站本身就是一个网站，而不是挂在默认网站上的目录。这更类似于它在您的现场环境中的设置方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T15:50:44.007

您可能必须发布您的网站。VS 开发服务器在项目所在的目录中运行您的代码。现在要运行您的代码，您可能必须发布到新位置

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-06T00:45:19.140

老问题，但我遇到了这个。

我仔细检查了我的站点绑定，最终导致我解决这个问题的问题是对我的“主机”文件进行更改。

System32->驱动程序->等。

我将我的网站添加到这个文件中，之后它就像一个魅力。

# nsview - 如何删除 NSView 的子视图

> ID：15027899
> 
> 赞同：0
> 
> 时间：2013-02-22T15:45:36.850
> 
> 标签：nsview, subview, subviews

我对 NSView 的子视图有疑问。我正在尝试使用 NSArray 来检索 [myView subviews] （其中我只有一个视图）并且我想删除这个子视图，但我不知道该怎么做。我努力了

```
 NSArray *subviews = [self.mainView subviews];
   [self.mainView replaceSubview:subviews[0] with:[self.mainViewController view]]; 
```

但是 XCode 崩溃了，我将此日志输入控制台：

```
 -[NSEvent subviews]: unrecognized selector sent to instance 0x102202aa0 
```

我不知道是什么问题......

所以如果你们中的一些人可以帮助我，那将是非常友好的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T01:23:13.567

好吧，真丢人！

我实际上是在错误的地方寻找问题......

我最终做的是：我的 mainView 中有两个子视图，索引 0 处的一个是背景 NSimageView（我想保留），第二个（索引 1 处）是我要替换的。

所以这是解决方案：

```
NSArray *subviews = [self.mainView subviews];
NSView *secondSubView = [subviews objectAtIndex:1];
[self.mainView replaceSubview:secondSubView with:[self.myViewController view]]; 
```

享受 ！

# tomcat - 如何将日志从 grails 应用程序发送到单独的文件

> ID：15027906
> 
> 赞同：1
> 
> 时间：2013-02-22T15:46:00.580
> 
> 标签：tomcat, grails, tomcat7

我正在使用 mysql 将一个简单的 grails 应用程序部署到我的测试服务器（Tomcat 7）。

我已经使用`grails war`命令构建了 WAR

如何配置日志记录，以便将日志发送到单独的文件而不是发送到 localhost.log？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T15:50:59.727

您应该查看 grails[日志记录文档](http://grails.org/doc/2.2.x/guide/single.html#logging)。您可以在配置中为此创建一个额外的 log4j 文件附加程序。

像这样的东西：

```
log4j = {
  appenders {
      file name:'file', file:'/var/logs/mylog.log'
  }
  root {
      debug 'stdout', 'file'
  }
} 
```

（从日志记录文档中复制）

# sql-server - WCF 连接非常慢 - WPF 客户端是问题还是 SQL 查询？

> ID：15027909
> 
> 赞同：0
> 
> 时间：2013-02-22T15:46:14.420
> 
> 标签：sql-server, wpf, performance, wcf, datagrid

我有一个包含 300.000 个数据行的表的 SQL Server 数据库。主键和另一个键上有一个索引。我在我的独立 WCF 服务器中使用以下查询来使用 SQLConnection 和 SQLDataReader 获取数据。

```
SELECT * FROM Users WHERE UserTypeId = @UserTypeId ORDER BY Users.Id OFFSET    
@OFFSET ROWS FETCH NEXT @NUMBER ROWS ONLY 
```

DataReader 返回的数据被推送到我自己的类/模型中，然后由 WCF 服务器的函数返回。

WPF 客户端连接到服务器并启动命令，并且只需要 500 个数据行。但是，此任务所需的时间约为 3-4 秒。（没有提到所有数据的时间......）

然后将返回的 List 用作 WPF Datagrid 的 DataContext。

我的问题是，我可以检查什么或可能有什么问题。如果您需要更多信息、代码示例等。请告诉我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:58:08.963

首先，不要使用`select *`，而是指定要从表中获取的字段。现在您正在获取您不需要的数据，例如`UserTypeId`您已经知道的所有记录的字段。

然后，您可以创建一个包含`UserTypeId`和的覆盖索引`Id`，并具有您希望从查询中返回的任何其他字段作为包含字段。这样，数据库可以单独对索引运行查询，而不必从实际表中读取任何内容。

# c++ - 重新编译 MFC 扩展 DLL 会更改导出函数的入口点

> ID：15027912
> 
> 赞同：5
> 
> 时间：2013-02-22T15:46:25.207
> 
> 标签：c++, dll, mfc

我有一个导出 C++ 类的 MFC 扩展 DLL，我需要修改类方法的行为。这些更改不会影响类方法的签名。

我不想重新编译使用该库先前发布版本的“lib”文件的模块。

如果更改修改了函数的入口点地址会发生什么？

比如构造函数的地址发生了变化：

```
Export   Ordinal      Function    Hint                      Entry Point
[+  ]    3 (0x0003)   2 (0x0002)  ??0CLangManager@@QAE@XZ   0x00009CB0    (OLD DLL)
[+  ]    3 (0x0003)   2 (0x0002)  ??0CLangManager@@QAE@XZ   0x00009760    (NEW DLL) 
```

我是否应该重新编译使用该库的模块？

我使用发布的可执行文件测试了重新编译的库 - 使用新的入口点，一切正常。我不确定这种情况是否隐藏了一些副作用。

**什么时候需要重新编译链接到 DLL 的可执行文件？**

**二进制兼容性何时被破坏？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T17:04:00.257

这是使用 DLL 的好处之一——您可以更改它，只要您继续保持相同的函数签名，一切都会正常工作。加载程序时会发生链接，因此地址的更改不会产生任何影响。

您将绝对肯定 DLL 中定义的任何类都没有任何内联方法，因为这些方法可能不适用于对象的任何内部更改。

当函数签名更改或公共成员变量更改对象内的位置时，二进制兼容性会被破坏。我会完全避免 DLL 中的公共成员变量。

编辑：如评论中所述，如果将变量添加到类中或从类中删除，更改其大小，您也可能会遇到麻烦。如果对象是在 DLL 之外创建的，无论是作为局部变量还是通过`new`. 您可以通过从 DLL 内部创建所有对象实例并将指针传递给调用者来避免这种情况。您还可以通过在您的课程中使用[PIMPL 习语来避免问题。](https://stackoverflow.com/questions/60570/why-should-the-pimpl-idiom-be-used)

# linux - 如何使用 Oracle ODBC 网关通过 ODBC 将 Oracle 连接到 PostgreSQL？

> ID：15027914
> 
> 赞同：0
> 
> 时间：2013-02-22T15:46:30.913
> 
> 标签：linux, oracle, postgresql, odbc

我想从运行 Oracle 自定义 Linux 风格的服务器上的 Oracle 实例中选择运行 openSUSE 的服务器上的 PostgreSQL 实例。我想使用 Oracle ODBC 网关来执行此操作。我过去成功地做到了这一点，并继续使用相同的 Oracle 机器和其他 SUSE/Postgres 机器来做到这一点。

我在 SUSE（Postgres）端的 ODBC 管理器是：unixODBC

我的 odbc.ini 是：

```
[postgresql]
Description         = Test to Postgres
Driver              = /usr/lib64/psqlodbcw.so
Trace               = Yes
TraceFile           = sql.log
Database            = host
Servername          = localhost
UserName            = *****
Password            = *****
Port                = 5432
Protocol            =
ReadOnly            = Yes
RowVersioning       = No
ShowSystemTables    = No
ShowOidColumn       = No
FakeOidIndex        = No
ConnSettings        = 
```

我的 odbcinst.ini 是

```
[postgresql]
    Description             = Postgresql driver for Linux
Driver          = /usr/lib64/psqlodbcw.so
UsageCount              = 1 
```

我的 tnsnames.ora（省略了其他 ODBC 条目）是：

```
# tnsnames.ora Network Configuration File: /opt/oracle/product/11gR1/db/network/admin/tnsnames.ora
# Generated by Oracle configuration tools.

LISTENER_ORCL =
  (ADDRESS = (PROTOCOL = TCP)(HOST = dbs1)(PORT = 1522))

ORCL =
  (DESCRIPTION =
    (ADDRESS = (PROTOCOL = TCP)(HOST = dbs1)(PORT = 1522))
    (CONNECT_DATA =
      (SERVER = DEDICATED)
      (SERVICE_NAME = orcl)
    )
  )

ODBC_SERVER123=
  (DESCRIPTION=
    (ADDRESS=
      (PROTOCOL=TCP)
      (HOST=dbs1)
      (PORT=1522)
    )
    (CONNECT_DATA=
       (SID=server123)
    )
    (HS=OK)
  ) 
```

我的 listener.ora（省略了其他 SID_DESC 条目）是：

```
# listener.ora Network Configuration File: /opt/oracle/product/11gR1/db/network/admin/listener.ora
# Generated by Oracle configuration tools.

LISTENER =
        (DESCRIPTION_LIST =
                (DESCRIPTION =
                        (ADDRESS_LIST=
                                (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC1522))
                                (ADDRESS = (PROTOCOL = TCP)(HOST = dbs1)(PORT = 1522))
                        )
                )
        )

ADR_BASE_LISTENER = /opt/oracle

SID_LIST_LISTENER=
        (SID_LIST=
                (SID_DESC=
                        (SID_NAME=server123)
                        (ORACLE_HOME=/opt/oracle/product/11gR1/db)
                        (PROGRAM=dg4odbc)
                        (ENVS=LD_LIBRARY_PATH=/usr/lib64:/opt/oracle/product/11gR1/db/lib)
                )
        )

TRACE_LEVEL_LISTENER = 0
LOGGING_LISTENER = off 
```

此外，这里是位于 $ORACLE_HOME/hs/admin 中的 inithost123.ora 文件：

```
#
# HS init parameters
#
HS_FDS_CONNECT_INFO = server123
HS_FDS_TRACE_LEVEL = 0
#HS_FDS_TRACE_LEVEL=DEBUG
HS_FDS_SHAREABLE_NAME = /usr/lib64/libodbc.so

HS_FDS_SUPPORT_STATISTICS = FALSE

HS_LANGUAGE=AMERICAN_AMERICA.WE8ISO8859P1
#HS_LANGUAGE=AMERICAN_AMERICA.US7ASCII
HS_FDS_TIMESTAMP_MAPPING = "TIMESTAMP(6)"
HS_FDS_FETCH_ROWS=1
HS_FDS_SQLLEN_INTERPRETATION=32

#
# ODBC specific environment variables
#
set ODBCINI=/etc/unixODBC/odbc.ini

#
# Environment variables required for the non-Oracle system
#
#set <envvar>=<value> 
```

为了更好的衡量，我的 sqlnet.ora 是：

```
# sqlnet.ora Network Configuration File: /opt/oracle/product/11gR1/db/network/admin/sqlnet.ora
# Generated by Oracle configuration tools.

NAMES.DIRECTORY_PATH= (TNSNAMES, EZCONNECT)

ADR_BASE = /opt/oracle 
```

我使用以下命令添加了网关链接 oracle 端：

```
CREATE DATABASE LINK ODBC_SERVER123 CONNECT TO "*****" IDENTIFIED BY "*****" USING 'ODBC_SERVER123'; 
```

当我尝试执行我的选择时，我收到以下错误：

```
[SQL] select * from "legit_view"@ODBC_SERVER123
[Err] ORA-28500: connection from ORACLE to a non-Oracle system returned this message:
[unixODBC][Driver Manager]Data source name not found, and no default driver specified {IM002}
ORA-02063: preceding 2 lines from ODBC_SERVER123 
```

我可以使用 isql 在 SUSE/Postgres 机器上本地成功测试 ODBC：

```
>isql -v postgresql ***** *****
+---------------------------------------+
| Connected!                            |
|                                       |
| sql-statement                         |
| help [tablename]                      |
| quit                                  |
|                                       |
+---------------------------------------+
SQL> 
```

我忘记了哪一步？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T16:54:41.690

您的 odbc.ini 文件必须在远程机器上！即，发起查询的那个。在上面的示例中，这将是 Oracle 框。这是必须在 Oracle（远程）框中输入的条目：

```
[server123]
Driver = /usr/lib64/psqlodbcw.so
Description = ODBC to PostgreSQL on Server 123
Trace = No
Tracefile = /var/log/sql_host_123.log
Servername = ip.address.for.123
Username = *****
Password = *****
Port = 5432
Protocol = 6.4
Database = host
QuotedId = Yes
ReadOnly            = No
RowVersioning       = No
ShowSystemTables    = No
ShowOidColumn       = No
FakeOidIndex        = No 
```

# maven - Jetty SSL 配置导致 107 /（错误代码：ssl_error_rx_record_too_long）

> ID：15027917
> 
> 赞同：2
> 
> 时间：2013-02-22T15:46:50.137
> 
> 标签：maven, jetty

码头 9.0.0.RC0

我在通过 Maven 正确配置我的码头服务时遇到问题。

目前我有

```
<plugin>
    <groupId>org.eclipse.jetty</groupId>
    <artifactId>jetty-maven-plugin</artifactId>
    <configuration>
    <contextHandlers>
        <contextHandler implementation="org.eclipse.jetty.webapp.WebAppContext">
            <war>../dataProvider/target/dataProvider-${project.version}.war</war>
            <contextPath>/dataProvider</contextPath>
        </contextHandler>
    </contextHandlers>
    <webAppConfig>
        <contextPath>/</contextPath>
        <baseResource
                implementation="org.eclipse.jetty.util.resource.ResourceCollection">
            <resourcesAsCSV>src/main/webapp,src/main/javascript,
                target/closure</resourcesAsCSV>
        </baseResource>
        <defaultsDescriptor>src/main/resources/jetty/webdefault.xml</defaultsDescriptor>
    </webAppConfig>
    <jettyXml>src/main/resources/jetty/jetty.xml</jettyXml>
    </configuration>
</plugin> 
```

在我的 pom 和

```
<Configure id="Server" class="org.eclipse.jetty.server.Server">

    <New id="sslContextFactory" class="org.eclipse.jetty.util.ssl.SslContextFactory">
        <Set name="KeyStorePath"><Property name="jetty.home" default="." />src/test/resources/keystore</Set>
        <Set name="KeyStorePassword">password</Set>
        <Set name="KeyManagerPassword">password</Set>
        <Set name="TrustStorePath"><Property name="jetty.home" default="." />src/test/resources/keystore</Set>
        <Set name="TrustStorePassword">password</Set>
    </New>

    <Call name="addConnector">
        <Arg>
            <New class="org.eclipse.jetty.server.ServerConnector">
                <Arg name="server"><Ref refid="Server" /></Arg>
                <Arg name="factories">
                    <Array type="org.eclipse.jetty.server.ConnectionFactory">
                        <Item>
                            <New class="org.eclipse.jetty.server.HttpConnectionFactory">
                                <Arg name="config"><Ref refid="httpConfig" /></Arg>
                            </New>
                        </Item>
                    </Array>
                </Arg>
                <Set name="host"><Property name="jetty.host" /></Set>
                <Set name="port"><Property name="jetty.port" default="8080" /></Set>
                <Set name="idleTimeout">30000</Set>
            </New>
        </Arg>
    </Call>

    <Call id="sslConnector" name="addConnector">
        <Arg>
            <New class="org.eclipse.jetty.server.ServerConnector">
                <Arg name="server"><Ref refid="Server" /></Arg>
                <Arg name="factories">
                    <Array type="org.eclipse.jetty.server.ConnectionFactory">
                        <Item>
                            <New class="org.eclipse.jetty.server.SslConnectionFactory">
                                <Arg name="next">http/1.1</Arg>
                                <Arg name="sslContextFactory"><Ref refid="sslContextFactory"/></Arg>
                            </New>
                        </Item>
                    </Array>
                </Arg>
                <Set name="host"><Property name="jetty.host" /></Set>
                <Set name="port"><Property name="jetty.tls.port" default="8443" /></Set>
                <Set name="idleTimeout">30000</Set>
            </New>
        </Arg>
    </Call>
</Configure> 
```

在码头。我猜它在做一些疯狂的事情并将 https 服务暴露为 http 错误请求并失败，但我不知道为什么。调试非常困难，所以我很好奇是否有其他人让它工作？

# java - 是否保证在单个线程中执行 Java 代码是连续的？

> ID：15027925
> 
> 赞同：0
> 
> 时间：2013-02-22T15:47:14.663
> 
> 标签：java, android, c++, c

在 Java、C 和 C++ 中，即使在编译器优化之后，源代码是否保证在单个给定线程中逐行顺序执行？如果允许系统重新排序您的代码，似乎什么都不会起作用，但我似乎找不到任何文档来保证如果我在 Java 中有以下内容：

```
class MyClass{
String testString = "";

public MyClass(){

}

public void foo(){
    testString = "foo";
}
public void bar(){
    testString = "bar";
    testString += "r";
}
public String getTestString(){
    return testString;
}

}

class Main{
static void main(String[] args){
    MyClass testClass = new MyClass();
    testClass.foo();
    System.out.println(class.getTestString());
    testClass.bar();
    System.out.println(class.getTestString());
}
} 
```

输出将永远是

```
"foo"
"barr" 
```

绝不

```
"foo"
"rbar" 
```

或者如果其中的方法调用和语句未按照源代码中指定的顺序执行，则可能出现的任何其他可能变化。

这个问题特别与 Java 有关，因为它使程序员对目标系统上的字节码编译器和 JIT 编译器或解释器将对您的代码做什么的控制权明显减少。对我来说主要的系统是 Android，我为它实现了我自己的信号量和互斥锁机制（例如，没有过多使用内置的 Java 并发机制，如“同步”和“易失”关键字），这更适合我的应用程序比 Java 提供的应用程序。然而，一位朋友警告我，由于 Java 从源代码到机器代码经历了多层次的转换，除非我使用 Java 的内置并发机制，否则无法保证我的信号量和锁定实现会按我的预期执行。这实际上归结为是否有一个特定的保证，对于任何给定的运行时实现，代码的执行将在单个线程中顺序执行。所以主要的问题是：

1.  在 C 和 C++ 中，尽管编译器优化，代码执行是否保证是连续的？如果不是，禁用编译器优化是否足以实现这样的保证？

2.  尽管字节码编译器和 JIT 编译器或解释器（特别是在 Android 上运行但也适用于任意 VM 实现）可能会进行更改，但在 Java 中是否保证代码执行是连续的？

3.  如果上述答案如我所料是肯定的，是否有任何编程语言/平台/上下文不能保证在单个线程中顺序执行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T15:52:11.947

如果只有一个线程，您的代码将具有直观预期的结果。任何优化都必须在优化之前保留功能。只有当你有多个线程时，才会发生意想不到的事情。

Java 语言规范基本上处理存在多个线程时出现的违反直觉的行为，您的问题是关于此处定义的“线程内语义”：

> 内存模型决定了程序中每个点可以读取哪些值。每个单独的线程的操作必须按照该线程的语义进行操作，但每次读取看到的值由内存模型确定。当我们提到这个时，我们说程序遵循线程内语义。**线程内语义是单线程程序的语义，允许根据线程内读取操作看到的值来完整预测线程的行为。**为了确定线程 t 在执行中的动作是否合法，我们只需评估线程 t 的实现，因为它将在单线程上下文中执行，如本规范的其余部分所定义。

[http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T15:58:26.367

最重要的是，JIT / 编译器更改指令以优化代码执行，使其不会更改单个给定线程内的代码执行结果。

在 Java 中，如果您将代码放在同步的方法/块中，则可以保证不会有指令重新排序。

您可以在这篇文章中找到更多答案[http://www.cs.umd.edu/~pugh/java/memoryModel/jsr-133-faq.html#otherlanguages](http://www.cs.umd.edu/~pugh/java/memoryModel/jsr-133-faq.html#otherlanguages)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-22T16:24:25.820

即使在没有线程的情况下，大多数编译器也被允许重新排序代码以获得最佳速度。但不允许重新排序的结果影响结果。在 C/C++ 中，这称为 as-if 规则。

因此，只要结果不受影响，编译器就可以在函数内重新排序以进行优化。所以我们在“源代码”和“生成代码”之间存在细微差别。

在线程代码中，单个线程会执行一个函数吗？这取决于您如何定义线程。究竟什么是线程（一组堆栈帧/寄存器/和当前执行点）。

我认为在内核之间移动线程没有问题（尽管我可以看到为什么运行时不想这样做，但我不认为这是不可能的）。所以你不能假设线程不会跳核。但是，如果您认为“执行线程”是当前状态而不参考任何硬件。

您可以保证的是，“执行线程”将从一段“生成的代码”的开始到结束执行。它不会遗漏任何“生成的代码”。它将按顺序执行“生成的代码”。如果它是未安排的和重新安排的，它将完全从它离开的地方继续。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-22T15:52:22.457

是的，您上面提供的代码将按顺序执行。即使有 50 个处理器，您的代码也会在一个线程上按顺序执行。

顺便说一句，很确定你不能调用变量类。即使可以，也不要。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-22T15:57:52.263

您的示例将按顺序执行，但如果操作数和其他表达式发挥作用，它会比这更复杂。此处描述了一般规则：http: [//docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.7](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.7)

请注意关于特定表达式的评估顺序的最后一部分：http: [//docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.7.5](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.7.5)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-22T16:49:38.837

我认为简单的答案是编译器开发人员遵循“你不应该修改单线程程序的行为”的口头禅，除此之外我认为你是靠自己的。

“preshing on programming”对我见过的乱序执行问题有一些最好的解释。如果有人知道一组更好的文章，我会知道的。这是其中两个，但如果您真的想深入研究它，您应该在网站上查看更多材料：

[编译时的内存排序](http://preshing.com/20120625/memory-ordering-at-compile-time)
[弱与强内存模型](http://preshing.com/20120930/weak-vs-strong-memory-models)

# python - Flask：如何从模板目录下提供静态文件？

> ID：15027930
> 
> 赞同：5
> 
> 时间：2013-02-22T15:47:30.367
> 
> 标签：python, flask, jinja2, assets

我使用 Flask 并想更改我的资产文件夹目录。这是我的文件夹结构：

```
/python
   /static
     /js
     /img
     /font
     /css
   /templates
     /default
       /css
       /js
       /img
   /venv
   app.py 
```

我想将静态文件夹`(js,css,font,img)`下的所有文件夹移动到文件夹下`default`。但是当我这样做时，我的 css 文件和其他文件（`js etc.)`无法加载页面。我应该为我的应用程序设置一个属性吗？我也试过这个：

```
app = Flask(__name__,static_path="/templates/default") 
```

但做不到。还有其他方法吗？非常感谢。

**更新：** 当我删除上面一行中的前导斜杠（ ） 时，回溯`static_path="templates/default"`出现此错误：`ValueError: urls must start with a leading slash`

```
Traceback (most recent call last):
  File "app.py", line 17, in <module>
    app = Flask(__name__,static_path="templates/default")
  File "/Users/ozcan/Library/Python/2.7/lib/python/site-packages/flask/app.py", line 481, in __init__
    view_func=self.send_static_file)
  File "/Users/ozcan/Library/Python/2.7/lib/python/site-packages/flask/app.py", line 63, in wrapper_func
    return f(self, *args, **kwargs)
  File "/Users/ozcan/Library/Python/2.7/lib/python/site-packages/flask/app.py", line 943, in add_url_rule
    rule = self.url_rule_class(rule, methods=methods, **options)
  File "/Users/ozcan/Library/Python/2.7/lib/python/site-packages/werkzeug/routing.py", line 550, in __init__
    raise ValueError('urls must start with a leading slash')
ValueError: urls must start with a leading slash 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-09-20T06:30:15.183

初始化应用程序时，它应该是 static_folder 而不是 static_path。

```
app = Flask(__name__,static_folder="/templates/default") 
```

在模板中：

```
<script src="{{ url_for('static', filename='js/file.js')}}"</script> 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-22T15:50:55.707

抱歉，我误读了您的原始目录输出。您需要放入`templates`目录`static`中，因为这是 Flask 默认查找静态数据的地方。

# gwt - 无法使用带有 GWT 的 ImmutableListMultimap 按索引访问列表值

> ID：15027936
> 
> 赞同：0
> 
> 时间：2013-02-22T15:47:50.950
> 
> 标签：gwt, guava

将 ImmutableListMultimap 与 GWT 一起使用时，我无法通过列表索引访问值。我能够迭代值列表，但尝试按索引访问值会引发索引越界异常。我正在使用 ListMultimap 来保留插入顺序。

```
ListMultimap<String,String> testMultimap = 
ImmutableListMultimap.<String,String>builder()
      .putAll("key1","value1","value2")
      .putAll("key2","value3","value4")
      .build();

  //this works to get the values correctly, but it's a terrible hack
  List<String> values = testMultimap.get("key1");
  String firstValue = "";
  String secondValue = "";
  int i=0;
  for(String val : values){
    if(i==0){firstValue=val;}
    else {secondValue = val;}
    i++;
  }     

  //throws index out of bound
  firstValue = testMultimap.get("key1").get(0); 
```

部分堆栈跟踪：

```
java.lang.IndexOutOfBoundsException: Index: 0
    at java.util.Collections$EmptyList.get(Collections.java:3204)
    at com.google.common.collect.ForwardingImmutableList.get(ForwardingImmutableList.java:46)
    at  com.google.corp.gwt.cell.Cells$3.render(Cells.java:114)
    at com.google.corp.gwt.cell.ForwardingCell.render(ForwardingCell.java:62)
    at com.google.corp.gwt.cell.TableCompositeCell$TableDataCell.render(TableCompositeCell.java:302)
    at com.google.corp.gwt.cell.TableCompositeCell$TableRowCell.render(TableCompositeCell.java:341)
    at com.google.gwt.cell.client.CompositeCell.render(CompositeCell.java:151)
    at com.google.corp.gwt.cell.TableCompositeCell$TableRowCell.render(TableCompositeCell.java:347)
    at com.google.corp.gwt.cell.TableCompositeCell.render(TableCompositeCell.java:91)
        ....
    at com.google.gwt.cell.client.CompositeCell.render(CompositeCell.java:151)  at com.google.corp.gwt.cell.TableCompositeCell.render(TableCompositeCell.java:115)  at com.google.gwt.user.cellview.client.Column.render(Column.java:165)   at com.google.gwt.user.cellview.client.AbstractCellTableBuilder.renderCell(AbstractCellTableBuilder.java:206)   at com.google.gwt.user.cellview.client.DefaultCellTableBuilder.buildRowImpl(DefaultCellTableBuilder.java:129)   at com.google.gwt.user.cellview.client.AbstractCellTableBuilder.buildRow(AbstractCellTableBuilder.java:87)  at com.google.gwt.user.cellview.client.AbstractCellTable.buildRowValues(AbstractCellTable.java:2357)    at com.google.gwt.user.cellview.client.AbstractCellTable.replaceAllChildren(AbstractCellTable.java:2158)    at com.google.gwt.user.cellview.client.AbstractHasData$View.replaceAllChildren(AbstractHasData.java:245)    at com.google.gwt.user.cellview.client.HasDataPresenter.resolvePendingState(HasDataPresenter.java:1351)     at com.google.gwt.user.cellview.client.HasDataPresenter.access$3(HasDataPresenter.java:1062)    at com.google.gwt.user.cellview.client.HasDataPresenter$2.execute(HasDataPresenter.java:984)    at com.google.gwt.core.client.impl.SchedulerImpl$Task$.executeScheduled$(SchedulerImpl.java:50)     at com.google.gwt.core.client.impl.SchedulerImpl.runScheduledTasks(SchedulerImpl.java:180)  at com.google.gwt.core.client.impl.SchedulerImpl.flushFinallyCommands(SchedulerImpl.java:278)   at com.google.gwt.core.client.impl.Impl.exit(Impl.java:296)     at com.google.gwt.core.client.impl.Impl.entry0(Impl.java:287)   at sun.reflect.GeneratedMethodAccessor267.invoke(Unknown Source)    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)    at java.lang.reflect.Method.invoke(Method.java:601)     at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)   at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessages(BrowserChannelServer.java:293)     at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:547)   at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:364)     at java.lang.Thread.run(Thread.java:722) 
```

# ios - UINavigationBar 后退按钮没有文字和固定大小

> ID：15027937
> 
> 赞同：2
> 
> 时间：2013-02-22T15:47:55.263
> 
> 标签：ios, uinavigationcontroller, uinavigationbar, uinavigationitem

我有一个自定义 png 设置为 UINavigationBar 的后退按钮，如下所示：

```
UIImage *navBackgroundPortait = [[UIImage imageNamed:@"nav_bg_portrait.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 0, 0, 0)];
[[UINavigationBar appearance] setBackgroundImage:navBackgroundPortait forBarMetrics:UIBarMetricsDefault]; 
```

在 viewDidLoad 方法的视图控制器中，我使用这个技巧来显示没有标题/文本的后退按钮：

```
self.navigationItem.backBarButtonItem = [[UIBarButtonItem alloc] initWithTitle:@" " style:UIBarButtonItemStyleBordered target:nil action:nil]; 
```

但是我的后退按钮 png 的宽度被拉长了，我真的希望它根本不这样做。我只是想在所有视图上显示一个静态 png 图像作为我的后退按钮，上面没有文字，并且永远不会拉伸它。我可以这样做，我该怎么做？

最好的问候
索伦

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T15:52:26.387

用这个：

```
UIButton *backButton = [[UIButton alloc] initWithFrame:CGRectMake(0, 0, 50, 30)];
[backButton setImage:[UIImage imageNamed:@"nav_bg_portrait.png"] forState:UIControlStateNormal];
[backButton addTarget:self action:@selector(popNavigationControllerFunction) forControlEvents:UIControlEventTouchUpInside];
self.navigationItem.leftBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:backButton]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T15:51:22.330

因为您告诉图像使用**resizableImageWithCapInsets 进行拉伸：** 如果您想按原样显示图像，只需执行以下操作：

```
UIImage *navBackgroundPortait = [UIImage imageNamed:@"nav_bg_portrait.png"]; 
```

# java - 解决将声音显示为图形时出现的内存不足错误，而不是增加堆空间

> ID：15027942
> 
> 赞同：-1
> 
> 时间：2013-02-22T15:48:11.950
> 
> 标签：java

我正在用java制作一个音频编辑器。为此，我想将声音显示为图形。它适用于小文件。但是当我尝试加载大文件时，它会抛出内存不足堆空间错误。请帮助我如何解决这个问题**，而不是增加 java 堆空间**。您个人是否有其他 api 推荐我来制作音频编辑器？我在制作剪切、复制、粘贴操作时也遇到了内存不足的问题。另外请给我一些提示，如何对显示的图形进行剪切、复制、粘贴操作。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:54:49.027

您没有提供太多信息，但了解占用内存的位置和内容的最佳方法是分析您的应用程序。使用分析器，例如[VisualVm](http://visualvm.java.net/)。通过了解什么使用内存，您应该能够优化代码以减少内存占用，最终不需要增加堆空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T16:02:31.627

这里的信息很少，但是您可以将音频文件作为流读取吗？如果您只需要将某种数据摘要写到屏幕上，那应该会有很大帮助。您甚至可以查看 gzipped 流。

# java - 在随机存取文件中显示信息

> ID：15027943
> 
> 赞同：0
> 
> 时间：2013-02-22T15:48:12.913
> 
> 标签：java, io, random-access

我创建了一个应用程序，允许用户输入他们的帐号、余额（不超过 99999）和姓氏。该程序将获取此信息并将其插入到与帐号 (acct) 对应的位置的 .txt 文件中。这是代码：

```
import java.io.*;

public class NationalBank {
  public static void main(String[] args) throws Exception{
     InputStreamReader temp = null;
     BufferedReader input = null;
     try {
        temp = new InputStreamReader(System.in);
        input = new BufferedReader(temp);

        int acct;
        double amount;
        String name;
        RandomAccessFile file = new RandomAccessFile("bank.txt", "rw");
        while(true) {
            // Asks for input
           System.out.println("Enter Account Number (0-9999): ");
           acct = Integer.parseInt(input.readLine());
           System.out.println("Enter Last Name: ");
           name = input.readLine();
           System.out.println("Enter Balance ");
           amount = Double.parseDouble(input.readLine());

            // Making sure account numbers are between 0 and 9999
           if(acct >=0 && acct <= 9999) {
              file.seek(acct*17);
              file.write(truncateName(name));
              file.writeBytes(" " +amount);
           }
           else {
              continue;
           }
            // Asks user if more entries are needed
           System.out.println("Enter More? (y/n)");   
           if (input.readLine().toLowerCase().equals("n"))
              break;
        }
        file.close();
     }
        catch (Exception e) {  
        }
  }

// Truncate/adding spaces to name until 8 characters
  public static byte[] truncateName (String name) {
     byte[] result = new byte[8];
     for (int i = 0; i < 8; i++)
        result [i] = i < name.length () ? (byte)name.charAt (i) : (byte)' ';
     return result;
  }

} 
```

现在，我正在尝试制作一个应用程序，它将写回所有包含信息的帐户（包括姓氏和余额）。我需要显示这些帐户的帐号、余额和姓氏。到目前为止，我有：

```
import java.io.*;

public class DisplayBank {
  public static void main(String[] args) throws IOException {
    FileInputStream input = new FileInputStream ("bank.txt");
     try {
        byte[] record = new byte[17];
        while (input.read(record) == 17) {
           String name = new String(record, 0, 8);
           long bits = 0;
           for (int i = 8; i < 17; i++) {
              bits <<= 8;
              bits |= record[i] & 0xFF;
           }
           double amount = Double.longBitsToDouble(bits);

           System.out.println("Account Number: " + record + " Name: " + name + ", amount: " + amount);
        }
     }

     catch (IOException e) {  
     }
     finally {
            input.close();

     }
  }
} 
```

这目前仅正确显示名称。余额不对，不知道怎么获取账号。为了获得帐号，我需要获得`name`. 为了得到`amount`，我需要寻找`name`，偏移 9 个字节，然后读取接下来的 8 个字节......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T21:35:50.627

如果您想解析包含姓氏和金额的文本文件，类似于您提供的内容：

提供的示例

姓氏 93942.12

我会做的是尝试类似以下的

```
 public void read_file(){
    try{

    // Open the file that is the first 
    // command line parameter
    FileInputStream fstream = new FileInputStream("C:\\Users\\Alos\\Desktop\\test.txt");
    // Use DataInputStream to read binary NOT text.
    BufferedReader br = new BufferedReader(new InputStreamReader(fstream));
    String strLine;
    int record = 0;
    //Read File Line By Line
    while ((strLine = br.readLine()) != null)   {

        String[] splits = strLine.split("\t");
        String LastName = splits[0];
        String Amount = splits[1]; 
        System.out.println("Account Number: " + record + " Name: " + LastName + ", amount: " + Amount);
        record++;
    }
    //Close the input stream
    in.close();

      }catch (Exception e){//Catch exception if any
    System.err.println("Error: " + e.getMessage());
    } 
```

}

这可能不是您正在寻找的内容，但如果您想要不同的东西，请查看并更新您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T21:50:34.203

我这不是家庭作业，我强烈建议使用一些 RDBMS，如 Derby 或 MySQL。

# c++ - 检查库的基本 sdk

> ID：15027946
> 
> 赞同：0
> 
> 时间：2013-02-22T15:48:27.860
> 
> 标签：c++, objective-c, macos, static-libraries

例如，我有 somelib.a 文件。Mac OS 上是否有任何方法可以检查静态/动态库，它链接的基础 SDK 和部署 SDK（例如 10.6 ... 10.8）谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:50:30.663

静态库不与任何东西链接，它们是目标文件的简单存档。所以答案是否定的，因为它没有意义。

# perl - perl：打印带有四舍五入方程的文本导致单行

> ID：15027947
> 
> 赞同：0
> 
> 时间：2013-02-22T15:48:37.903
> 
> 标签：perl

当我尝试在 perl 中打印这一行时，它给了我以下输出，

> 打印 "误报 = ",($G_FP_1+$G_FP_2)*$percent,"\n";

结果

> 误报 = 39.8980169971671

但是我希望将结果四舍五入到小数点后 2 位，例如 39.89，我怎样才能强制 perl 做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T15:52:12.883

尝试这样做：

```
printf "False Positive = %0.2f\n", ($G_FP_1+$G_FP_2) * $percent; 
```

# windows-8 - 是否可以在不访问桌面/服务的情况下验证商店应用程序？

> ID：15027950
> 
> 赞同：0
> 
> 时间：2013-02-22T15:48:45.707
> 
> 标签：windows-8, windows-services, automated-tests, windows-store-apps, app-certification-kit

因此，我们正在尝试设置一个集成测试服务器，它将在 Windows 应用商店应用程序上运行认证工具包。但是，我们遇到的问题`appcert.exe`只是冻结。没有错误或任何记录，它只是坐在那里，直到我们的 1 小时超时被击中。

我们正在尝试从 Windows 服务和管理权限运行认证工具包。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T20:00:02.957

应用程序证书套件以交互方式运行，因此我怀疑它可以作为 Windows 服务正常工作。即使您安排它作为[Windows 任务](http://windows.microsoft.com/en-US/windows7/schedule-a-task)运行，它似乎也不起作用。

默认情况下，应用认证工具包（当前版本 2.2）安装在“C:\Program Files (x86)\Windows Kits\8.0\App Certification Kit\appcertui.exe”。如果您从命令行运行它，它将作为具有用户界面的 Windows 程序运行，并要求您选择以下三个选项之一：验证 Windows 应用商店应用程序、验证桌面应用程序和验证桌面设备应用程序。如果您选择第一个选项，程序会列出测试计算机上安装的所有应用程序。一旦您可以选择一个或多个应用程序，它实际上会启动您选择的应用程序，并通过测试过程。

# android - Android 编程：编程中的长时间延迟。时间

> ID：15027951
> 
> 赞同：-2
> 
> 时间：2013-02-22T15:48:46.373
> 
> 标签：android, multithreading, date, time, delay

在我的应用程序中，我想实现一种用户可以在他们想要执行某个功能时设置的方式，例如发送文本消息。它们将以日期和时间的形式出现。

如何在 android/java/其他编程语言中实现这个？

有没有比只运行一个线程将当前日期与一组日期进行比较并在日期相同时执行该函数更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T15:51:08.583

对于用户可以为您提供特定时间和日期的任务，您可以使用[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)让您的任务在那个时间执行。

这样，您的应用程序就不需要一直运行，并且会在时间到来时由 Android 启动。

# vb.net - 可以序列化不可序列化的对象吗？

> ID：15027953
> 
> 赞同：0
> 
> 时间：2013-02-22T15:48:54.423
> 
> 标签：vb.net, serialization

出于测试目的，我想查看`HttpApplication`对象的所有属性及其对应的值（我正在测试 HTTPModule 的某些功能）。我的第一个想法是将其序列化为 XML，然后查看或将其写入文件。

问题是，`HttpApplication`不是可序列化的类，所以当我尝试序列化时会抛出异常。是否有任何其他技术，或者甚至有可能获得不可序列化对象的字符串表示形式？我只是想看看我使用 Intellisense 获得的所有相同属性及其值。

我看过一些提到反射的文章，但我没有发现任何表明它适用于我的场景的东西。

**更新：**

在收到几个回复后，看来我需要使用反射。这是我正在使用的代码：

```
Dim sProps As New StringBuilder
For Each p As System.Reflection.PropertyInfo In oHttpApp.GetType().GetProperties()
  If p.CanRead Then
    sProps.AppendLine(p.Name & ": " & p.GetValue(oHttpApp, Nothing))
  End If
Next 
```

在我的 AppendLine 语句中，立即抛出异常：

> System.InvalidCastException：未为字符串“上下文：”和类型“HttpContext”定义运算符“&”。在 Microsoft.VisualBasic.CompilerServices.Operators.InvokeObjectUserDefinedOperator(UserDefinedOperator Op, Object[] Arguments) 在 Microsoft.VisualBasic.CompilerServices.Operators.InvokeUserDefinedOperator(UserDefinedOperator Op, Object[] Arguments) 在 Microsoft.VisualBasic.CompilerServices.Operators.ConcatenateObject(Object左，对象右）

@granadaCoder，您提到我需要知道要“深入”到什么程度，我想知道这是否是问题所在。在上面的错误中，`Context`是一个复杂的对象，所以我需要深入研究它并获取它的各个属性，对吗？你知道我怎么能做到这一点 - 还是就像在我的循环中`GetProperties`再次调用一样简单？`p`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T15:54:49.923

听起来像是一个很好的反射用例——

[如何遍历自定义 vb.net 对象的每个属性？](https://stackoverflow.com/questions/314426/how-to-iterate-through-each-property-of-a-custom-vb-net-object)

您可以遍历所有对象的属性并创建您自己的 XML/JSON 视图。

更新 -

这是我如何将任何对象转换为字典的 c# 代码（适用于您的用例）

```
 public static Dictionary<string,string> ToDictionary<T>(this T me, string prefix=null) where T:class
    {
        Dictionary<string, string> res = new Dictionary<string, string>();

        if (me == null) return res;

        var bindingFlags = BindingFlags.Public | BindingFlags.Instance | BindingFlags.GetProperty | BindingFlags.GetField;
        var properties = me.GetType().GetProperties(bindingFlags)
            .Where(i => i.CanRead
            );

        foreach (var i in properties)
        {
            var val = i.GetValue(me, null);
            var str = "";
            if (val != null)
                str = val.ToString();
            res[string.Format("{0}{1}", prefix, i.Name)] = str;
        }
        return res;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T16:02:50.403

有些对象并不意味着可序列化。以 IDataReader 为例。

你将不得不进行反思。并“剔除”可读的属性。

这是一些入门代码。

```
 private void ReadSomeProperties( SomeNonSerializableObject myObject ) 
  {

     foreach( PropertyInfo pi in myObject.GetType( ).GetProperties( BindingFlags.Instance | BindingFlags.Public | BindingFlags.GetProperty) ) 
     {
     //pi.Name
     //pi.GetValue( myObject, null )
     //don't forget , some properties may only have "setters", look at PropertyInfo.CanRead
     }

  } 
```

当然，当属性是复杂对象（不是标量）时，您必须弄清楚您想要挖掘多“深”。

# c++ - 如何从 Linux 上的软件管理器链接到库？

> ID：15027954
> 
> 赞同：0
> 
> 时间：2013-02-22T15:49:00.230
> 
> 标签：c++, linux, codeblocks

所以我最近厌倦了 Windows 并安装了 Linux Mint。我正在尝试在 Code::Blocks 中构建一个项目。我已经安装了 Code::Blocks 但我需要 glew（以及其他一些库）。我在软件管理器中找到并安装了它。我已经设法找到并包含头文件。但我觉得下一步应该相对简单，并且在整个互联网上都是，但是（可能是由于缺乏适当的术语）我一直无法找到答案。

我是否需要在我的系统上找到文件并手动链接到每个库？这就是我在 Windows 上所做的，但我只是下载了二进制文件并知道它们在哪里。我从软件管理器中找到了一个库并手动链接到它，但感觉就像我做错了。由于它是在系统上“安装”的，是否有一些快速链接的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T16:15:10.647

您应该为链接器“-l”和“-L”使用两个标志。您可以在项目属性中的某处设置这些标志。

第一个'-l'告诉链接器链接到特定的库。例如glew，可能在/usr/lib 中有一个名为libglew.so 的文件，当你用'-lglew' 标志链接你的程序时，它会将它链接到glew 库。链接器在几个标准位置寻找库：/usr/lib、/usr/local/lib 和一些额外的。如果您的库位于非标准位置，请使用“-L”标志指向这些目录。

许多 linux 发行版提供两种带有库的包，普通的只带有运行时的包，以及带有头文件和库的开发版本的开发包（通常以 dev 或 devel 为前缀或后缀）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T16:04:37.083

使用构建系统，卢克！在 *nix 世界中开发/构建软件的典型方法是 3 个步骤：

*   *配置阶段——在构建之前，你必须意识到你将在什么环境中构建你的软件......是否安装了所需的一切......如果在**编译阶段*（编译几个小时后）那就不好了您（或构建您的软件的用户）遇到错误：*无法#include the 'xxx.h'*。最流行的构建系统是：[cmake](http://cmake.org)，我最喜欢[autotools](http://www.sourceware.org/autobook/)之后。你也可以尝试`scons`或者疯狂（b）果酱......
*   *编译阶段*——通常只是`make`所有
*   *安装阶段*——将刚刚构建的软件部署到系统中。或其他方式：为目标发行版（.deb/.rpm/&etc）构建包

在配置阶段使用测试脚本（不用担心有很多用于各种用例），您可以找到所有必需的头文件/库/程序/编译器选项/编译包所需的任何内容......是的：**不要在您的 Makefile 中使用硬编码路径（或您对`make`二进制文件使用的任何内容）**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T16:23:43.167

这个问题的答案真的取决于你想要达到的目标。如果您只想自己构建应用程序，那么您只需在 makefile 或代码编辑器设置中写入库路径即可。您甚至可能不必这样做，就像您的 linux 分发包管理器安装的库一样，标头通常位于 /usr/include 和库到 /usr/lib 或 /urs/lib64 等。这些位置是标准的，您不需要明确指定它们。无论如何，您需要指定要链接到的库。如果您想创建可以由其他人构建的应用程序，或者由您在许多不同的配置/环境中使用[cmake](http://www.cmake.org/ "制作")之类的东西构建将非常有帮助。

# java - 重置计数器或让它增加并使用模数是否更有效

> ID：15027959
> 
> 赞同：4
> 
> 时间：2013-02-22T15:49:09.790
> 
> 标签：java, c++, performance, coding-style

假设您需要跟踪一个方法被调用的次数，并在它被调用 n 次时打印一些内容。什么是最有效的：

1.  使用长变量 _counter 并在每次调用该方法时增加它。您测试的每个呼叫是否相等“_counter % n == 0”

2.  使用 int 变量 _counter 并在每次调用该方法时增加它。当 _counter = n 时，打印消息并将变量 _counter 重置为 0。

有人会说差异可以忽略不计，您可能是对的。我只是好奇什么方法最常用

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-22T16:00:59.427

在这种特殊情况下，由于无论如何您都需要一个 if 语句，我会说您应该在达到计数时将其设置为零。

但是，对于您每次都使用该值，并且只想“当我们达到某个值时回绕为零”的情况，那么这种情况就不那么明显了。

如果您可以调整`n`为 2 的幂（2、4、8、16、32 ...），那么您可以使用与-`counter % n`相同的技巧，`counter & (n-1)`这使得操作非常快。

如果`n`不是 2 的幂，那么您最终可能会进行真正的除法，这是一个坏主意 - 与常规指令相比，除法非常昂贵，并且比较和重置很可能比除法选项更快。

当然，正如其他人所提到的，如果您的计数器达到该类型的 MAX 限制，您最终可能会得到各种乐趣和游戏。

编辑：当然，如果你要打印一些东西，那可能需要比除法长 100 倍的时间，所以它确实是微优化，除非`n`非常大。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T15:54:12.903

这取决于 n... 的值，但我敢打赌重置和简单的相等检查会更快。此外，重置计数器更安全，您永远不会达到您的号码的代表限制。编辑：还要考虑可读性，做微优化可能会混淆你的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T16:03:53.373

为什么不两者都做。

如果它成为一个问题，那么看看它是否值得优化。
但是，在它成为问题之前，即使查看它也是没有意义的（您的算法中会有更大的问题）。

```
count = (count+1) % countMax; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T16:12:16.713

检查[Guava 的](http://code.google.com/p/guava-libraries/)RateLimiter 将使您对类似的实用程序实现有所了解 [http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/util/concurrent/RateLimiter.html](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/util/concurrent/RateLimiter.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-22T15:58:24.863

我认为，出于以下原因，重置计数器总是更好：

1.  对于不熟悉的程序员（例如，维护程序员），代码会更清楚。
2.  重置计数器时，算术（可能是拼写错误）溢出的可能性较小。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-22T16:25:15.613

这是 100000000 次迭代的性能时间，以毫秒为单位

模时间 = 1258

计数器时间 = 449

po2Time = 108

正如我们所看到的，2 的幂远远优于其他方法，但它仅适用于 2 的幂，我们的普通计数器也比模数快 2.5 倍。那么我们为什么要使用模数增量呢？嗯，在我看来，我认为它们提供了一个干净的代码，如果使用得当，它们是一个很好的工具来了解

[原帖](http://www.gregbugaj.com/?p=204)

# javascript - 页眉/页脚导航更新jquery

> ID：15027960
> 
> 赞同：0
> 
> 时间：2013-02-22T15:49:10.843
> 
> 标签：javascript, jquery, html, css, sharepoint-2007

我使用 jQuery 创建了具有不同状态的页眉和页脚导航。单击页脚导航时，我在更新页眉导航时遇到问题。例如，当用户单击页脚导航中的列表 1 时，我希望标题导航也更新为相同的选择。我包括了一个我正在做的事情的 jsfiddle 示例。

更新：标题导航具有主列表项，页脚导航具有主列表项以及子导航。我想实现相同的功能，但是当单击第一个标记为 footerTitle 的列表项时，它也会更新为标题导航。我更新了jsfiddle

[http://jsfiddle.net/WkZuv/40/](http://jsfiddle.net/WkZuv/40/)

```
$(".Nav > li").live({
    mouseover:function(){
        $(this).addClass("menuHover");
    },
    mouseout:function(){
        $(this).removeClass("menuHover");
    },
    click:function(){
        $(".Nav > li").removeClass("menuClicked");
        $(this).addClass("menuClicked");
    }
});

$(".footer > li").live({
    mouseover:function(){
        $(this).addClass("menuHover");
    },
    mouseout:function(){
        $(this).removeClass("menuHover");
    },
    click:function(){
        $(".Nav > li").removeClass("menuClicked");
        $(".Nav > li").addClass("menuClicked");     

         $(".footer > li").removeClass("menuClicked");
        $(this).addClass("menuClicked");  
    }
});

.menuHover{
    background-color:#666;
    color:#fff;
}
.menuClicked{
    background-color:yellow;
    color:#666;
}

<h1>Header NAV</h1>
<ul class="Nav">
    <li class ="menuClicked"> List 1 </li> 
    <li>List 2 </li>
    <li> List 3 </li>
    <li> List 4 </li>
    <li> List 5</li>
</ul>

<hr />

<h1>FOOTER NAV</h1>
<ul class="footer">
    <li class ="footerTitle"> List 1 </li> 
    <li>Sub List 2 </li>
    <li>Sub List 3 </li>
    <li> Sub List 4 </li>
    <li>Sub List 5</li>
</ul>
<ul class="footer">
    <li class ="footerTitle"> List 2 </li> 
    <li>Sub List 2 </li>
    <li>Sub List 3 </li>
    <li> Sub List 4 </li>
    <li>Sub List 5</li>
</ul>
<ul class="footer">
    <li class ="footerTitle"> List 3 </li> 
    <li>Sub List 2 </li>
    <li>Sub List 3 </li>
    <li> Sub List 4 </li>
    <li>Sub List 5</li>
</ul>
<ul class="footer">
    <li class ="footerTitle"> List 4 </li> 
    <li>Sub List 2 </li>
    <li>Sub List 3 </li>
    <li> Sub List 4 </li>
    <li>Sub List 5</li>
</ul>
<ul class="footer">
    <li class ="footerTitle"> List 5 </li> 
    <li>Sub List 2 </li>
    <li>Sub List 3 </li>
    <li> Sub List 4 </li>
    <li>Sub List 5</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:52:53.320

看看这个[http://jsfiddle.net/WkZuv/28/](http://jsfiddle.net/WkZuv/28/)

您还应该考虑缓存您的 jquery 对象。

```
$(".Nav > li").live({
    mouseover:function(){
        $(this).addClass("menuHover");
    },
    mouseout:function(){
        $(this).removeClass("menuHover");
    },
    click:function(){
        $(".Nav > li").removeClass("menuClicked");
        $(this).addClass("menuClicked");
    } });

$(".footer > li").live({
    mouseover:function(){
        $(this).addClass("menuHover");
    },
    mouseout:function(){
        $(this).removeClass("menuHover");
    },
    click:function(){
        $(".Nav > li").removeClass("menuClicked");
        $(".Nav > li").eq($(this).index()).addClass("menuClicked");     

         $(".footer > li").removeClass("menuClicked");
        $(this).addClass("menuClicked");  
    } }); 
```

# oracle-sqldeveloper - 如何在启动或连接时打开特定表？

> ID：15027961
> 
> 赞同：3
> 
> 时间：2013-02-22T15:49:12.183
> 
> 标签：oracle-sqldeveloper

在我当前的环境中，我有一个巨大的表格列表可以向下滚动，找到我需要双击的特定表格很乏味（几乎就像大海捞针一样）。

有没有办法在连接到数据库时打开特定的表？

或者，有没有办法为某些表创建“快捷方式”（类似于“收藏夹”），以便在 SQL Developer 启动时轻松访问/找到它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T17:12:28.117

我不相信可以设置一组“收藏”表。但是，如果您在连接中单击鼠标右键`Tables`，则有一个`Apply Filter`选项。这使您可以指定标准来过滤基于表名称或其他属性（如上次 DDL 时间等）显示的表集。这通常是将列表减少到合理数量的表的最简单方法。

# sql - SQL 你可以在选择过程中放置 一个 if 语句吗？

> ID：15027962
> 
> 赞同：0
> 
> 时间：2013-02-22T15:49:17.627
> 
> 标签：sql, stored-procedures, if-statement, procedure

我需要在我的过程中添加一个 if 语句，就像这样

```
CREATE PROCEDURE [dbo].[myProcedure]
  @name VARCHAR(8000) = NULL
 ,@lname VARCHAR(8000) = NULL
 ,@flag CHAR(1) = NULL

AS
BEGIN
 SET NOCOUNT ON;
    WITH t 
    (name
    ,lname
    )

AS
(
    SELECT DISTINCT 
    * FROM mytable
    WHERE 
  (@name IS NULL OR @name = name)
   IF @flag = 'c'
   BEGIN
      AND (@lname IS NULL OR @lname = 'Doe')
   END
   ELSE 
   BEGIN
    AND (@lname IS NULL OR @lname = lname)
   END
) 
```

正如您所看到的，根据标志，我以一种或另一种方式使用 lname 字段。我在 if 部分遇到错误。是我不能在这里使用 if 语句吗？如果不是，我该如何替换 if 语句？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T15:51:58.040

你可以这样做：

```
SELECT DISTINCT * 
FROM mytable
WHERE 
  (@name IS NULL OR @name = name)
   AND 
   (
      (@flag = 'c' AND (@lname IS NULL OR @lname = 'Doe'))
      OR 
      (@flag != 'c' AND (@lname IS NULL OR @lname = lname))
   ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T15:56:23.190

只是为了提供一个替代答案（因为我认为 CASE 语句是 SQL 中 IF 语句的真正模拟）：

```
SELECT 
DISTINCT 
    * 
FROM 
    mytable
WHERE 
    (@name IS NULL OR @name = name)
    AND 
    (@lname is NULL OR @lname = 
    CASE 
        WHEN @flag ='c' THEN 'Doe'
        ELSE lname
    END
    ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T15:57:53.450

尝试这个

```
....
WHERE 
(@name IS NULL OR @name = name) AND
(
   (@flag = 'c' AND (@lname IS NULL OR @lname = 'Doe')) OR
   (@lname IS NULL OR @lname = lname)
) 
```

# jsf - 在 Maven 项目中实现 JSF 组合组件

> ID：15027974
> 
> 赞同：0
> 
> 时间：2013-02-22T15:49:59.370
> 
> 标签：jsf, maven, composite-component

似乎人们能够在 SWF 2.3.1 中实现复合组件，但我找不到关于如何完成的明确参考。我遵循了 JSF 复合组件的基本结构，但我的 SWF 应用程序似乎无法识别 taglib 命名空间。

有一个工具包/IDE 警告，但更重要的是在浏览器中看到了一个运行时警告，JSF 在屏幕上向用户显示以下警告：

```
Warning: This page calls for XML namespace http://java.sun.com/jsf/composite/myjsf declared with prefix mj but no taglibrary exists for that namespace. 
```

组件定义：

src/main/resources/myjsf/testComponent.xhtml：

```
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:composite="http://java.sun.com/jsf/composite">

<composite:interface>
    <composite:attribute name="attr" />
</composite:interface>
<composite:implementation>

#{cc.attrs.attr});          

</composite:implementation>
</html> 
```

在给定的 xhtml 中引用：

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:mj="http://java.sun.com/jsf/composite/myjsf">

  <!-- snip -->

  <mj:testComponent attr="x" />

</ui:composition> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T18:30:52.140

该文件夹`src/main/resources/myjsf/`不适合您的复合组件。maven 项目中的复合组件应该是 in`src/main/webapp/resources/`并且在你的情况下它应该是`src/main/webapp/resources/myjsf/testComponent.xhtml`.

当您使用 Maven 时，您应该知道该`webapp`文件夹是其内容将部署在应用程序的根文件夹中的文件夹，因此它在某种程度上类似于`WebContent`Eclipse 中标准动态 Web 项目中的文件夹。

# jpa - EclipseLink“SQL 字符串不是查询”

> ID：15027975
> 
> 赞同：2
> 
> 时间：2013-02-22T15:50:00.630
> 
> 标签：jpa, eclipselink

我在 WLS 10.3.5 上运行 EclipseLink。

我正在尝试使用 @NamedNativeQuery 注释，但我尝试的所有 SQL 都会导致“ `Internal Exception: java.sql.SQLException: SQL string is not Query`”异常。

即使是一个简单`SELECT * FROM TABLE`的错误也会导致该错误，其中 TABLE 是包含实体映射到的表。

注释是：

```
@NamedNativeQuery(name = AnnouncementDeliveryLog.FIND_NORMALIZED_RECIPIENTS_FOR_ANNOUNCEMENT, query =  "SELECT * FROM ANNOUNCEMENT_DELIVERY_LOG", resultClass = AnnouncementDeliveryLog.class) 
```

查询正在执行：

```
em.createNativeQuery(AnnouncementDeliveryLog.FIND_NORMALIZED_RECIPIENTS_FOR_ANNOUNCEMENT).getResultList(); 
```

我找不到从系统中获取更多有用信息的好方法，因此感谢您提供任何信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T19:34:48.363

使用了错误的方法。方法[createNativeQuery 将原](http://docs.oracle.com/javaee/6/api/javax/persistence/EntityManager.html#createNativeQuery%28java.lang.String%29)生 SQL 字符串作为参数。在给定的代码中，参数似乎是本机查询的*名称*。应该使用方法[createNamedQuery ，它将本机查询的名称作为参数。](http://docs.oracle.com/javaee/6/api/javax/persistence/EntityManager.html#createNamedQuery%28java.lang.String%29)

# ruby - Mongoid 3.1 在 Ruby 1.9.3 中查询语法问题

> ID：15027976
> 
> 赞同：0
> 
> 时间：2013-02-22T15:50:01.457
> 
> 标签：ruby, mongoid, criteria

我有一个 Ruby 关联类，如下所示：

```
class Association
  include Mongoid::Document
  field :issued, type: Integer
  field :lifetime, type: Integer
end 
```

我想删除我的集合中的所有文档 where `doc.issued + doc.lifetime > Time.now`. 我在网上找到了以下语法：

`Association.delete_all(["issued + lifetime > ?", Time.now.to_i])`

我无法让它工作，我收到以下错误：

```
TypeError: can't convert Symbol into Integer
    from /var/lib/gems/1.9.1/gems/mongoid-3.1.0/lib/mongoid/persistence.rb:298:in `[]'
    from /var/lib/gems/1.9.1/gems/mongoid-3.1.0/lib/mongoid/persistence.rb:298:in `delete_all'
    from (irb):77
    from /usr/bin/irb:12:in `<main>' 
```

有人能告诉我这种语法有什么问题或建议不同的语法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:38:17.647

**delete_all**和**where**一样，需要单个字段[的条件列表，例如：](http://mongoid.org/en/origin/docs/selection.html)

`Association.delete_all(issued: 10)`

在您的情况下，您可以使用 Javascript。

`Association.for_js("(this.issued + this.lifetime) > ti", ti: Time.now.to_i).delete_all`

注意：性能不会很好，因为条件将在每个文档上进行测试。

# internet-explorer-8 - 为什么 IE8 不渲染？

> ID：15027978
> 
> 赞同：-1
> 
> 时间：2013-02-22T15:50:08.090
> 
> 标签：internet-explorer-8, rendering, aem

我正在帮助在 Adob​​e CQ5 中为客户构建网站。由于客户的偏好，我无法发布源代码，但我们在使用 IE8 时遇到了问题。

当我们尝试在 IE8 中查看该站点时，该页面将不会呈现。使用开发工具时，我们可以浏览 HTML，并且选择工具确实成功地突出了带有蓝色轮廓的元素，但它们都没有呈现。页面只是白色的。事物在 IE7 浏览器模式下正确呈现，但在 IE8 或 IE8 兼容模式下不正确。

我已经通过 W3 验证器运行了 html，并且没有任何异常的东西跳出来。有人有线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T05:19:53.793

一定有一些 javascript 错误导致了这种情况。否则 CQ5 在 ie8 中渲染得很好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T22:18:08.137

如果它适用于 IE7 但不适用于 IE8，您可以尝试将其添加到该`<head>`部分

```
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" /> 
```

这会强制 IE7 仿真。您也可以尝试使用 doctype 看看这是否有任何不同。

# jquery - jquery从左侧出现导航

> ID：15027979
> 
> 赞同：0
> 
> 时间：2013-02-22T15:50:12.017
> 
> 标签：jquery, slidetoggle, slidedown, slideup, right-to-left

我正在一个网站上工作，当光标悬停在左侧时，我想要一个来自左侧的导航。

我发现 1 个链接看起来非常接近我想要的，但每次我自己尝试它都不起作用！如果我复制了页面上的每一行，我尝试了我所知道的所有内容并仔细查看。

这是链接：http: [//jsfiddle.net/PktxV/](http://jsfiddle.net/PktxV/)

这是代码：

HTML

```
<div id="sidePanel">
<div id="panelContent">
    <iframe src="//www.facebook.com/plugins/likebox.php?href=http%3A%2F%2Fwww.facebook.com%2FWebsTutorial&amp;width=200&amp;height=258&amp;colorscheme=light&amp;show_faces=true&amp;border_color&amp;stream=false&amp;header=false&amp;appId=253401284678598"
    scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:200px; height:258px;"
    allowTransparency="true"></iframe>
</div>
<div id="panelHandle">
    <p>Facebook</p>
</div> 
```

CSS

```
 /* ===== Primary Styles ========================================================
   Author: NTechi | WebsTutorial
   ========================================================================== */
 body {
    font-family:Arial;
}
#sidePanel {
    width:245px;
    position:fixed;
    left:-202px;
    top:15%;
}
#panelHandle {
    background-image: -webkit-linear-gradient(top, #333, #222);
    background-image: -moz-linear-gradient(center top, #333333, #222222);
    background-image: -o-linear-gradient(center top, #333333, #222222);
    background-image: -ms-linear-gradient(center top, #333333, #222222);
    background-image:linear-gradient(center top, #333333, #222222);
    height:150px;
    width:40px;
    border-radius:0 5px 5px 0;
    float:left;
    cursor:pointer;
}
#panelContent {
    float:left;
    border:1px solid #333333;
    width:200px;
    height:300px;
    background-color:#EEEEEE;
}
#panelHandle p {
    -moz-transform: rotate(90deg);
    -webkit-transform: rotate(90deg);
    color: #FFFFFF;
    font-size: 24px;
    font-weight: bold;
    left: -4px;
    margin: 0;
    padding: 0;
    position: relative;
    top: 26px;
} 
```

jQuery

```
 jQuery(function ($) {
    $(document).ready(function () {
        $('#panelHandle').hover(function () {
            $('#sidePanel').stop(true, false).animate({
                'left': '0px'
            }, 900);
        }, function () {
            jQuery.noConflict();
        });

        jQuery('#sidePanel').hover(function () {
            // Do nothing
        }, function () {

            jQuery.noConflict();
            jQuery('#sidePanel').animate({
                left: '-201px'
            }, 800);

        });
    });
}); 
```

有谁知道这是旧版本还是什么，或者它与 HTML5 页面（我正在尝试制作的内容）有问题，也许可以给我一个更新/更好滑块的链接？

编辑！！

这就是我在 HTML5 文档中的方式

```
 <!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Untitled Document</title>
<style>
/* ===== Primary Styles ========================================================
   Author: NTechi | WebsTutorial
   ========================================================================== */
 body {
    font-family:Arial;
}
#sidePanel {
    width:245px;
    position:fixed;
    left:-202px;
    top:15%;
}
#panelHandle {
    background-image: -webkit-linear-gradient(top, #333, #222);
    background-image: -moz-linear-gradient(center top, #333333, #222222);
    background-image: -o-linear-gradient(center top, #333333, #222222);
    background-image: -ms-linear-gradient(center top, #333333, #222222);
    background-image:linear-gradient(center top, #333333, #222222);
    height:150px;
    width:40px;
    border-radius:0 5px 5px 0;
    float:left;
    cursor:pointer;
}
#panelContent {
    float:left;
    border:1px solid #333333;
    width:200px;
    height:300px;
    background-color:#EEEEEE;
}
#panelHandle p {
    -moz-transform: rotate(90deg);
    -webkit-transform: rotate(90deg);
    color: #FFFFFF;
    font-size: 24px;
    font-weight: bold;
    left: -4px;
    margin: 0;
    padding: 0;
    position: relative;
    top: 26px;
}
</style>

</head>

<body>
<script src="text/javascript">
$(document).ready(function () {
    $('#sidePanel').hover(function () {
        $(this).stop(true, false).animate({
            'left': '0px'
        }, 900);
    }, function () {
        $(this).stop(true, false).animate({
            'left': '-202px'
        }, 900);
    });
});
</script>
<div id="sidePanel">
    <div id="panelContent">
        <iframe src="//www.facebook.com/plugins/likebox.php?href=http%3A%2F%2Fwww.facebook.com%2FWebsTutorial&amp;width=200&amp;height=258&amp;colorscheme=light&amp;show_faces=true&amp;border_color&amp;stream=false&amp;header=false&amp;appId=253401284678598"
        scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:200px; height:258px;"
        allowTransparency="true"></iframe>
    </div>
    <div id="panelHandle">
        <p>Facebook</p>
    </div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T16:06:50.827

试试这个，看看[演示](http://jsfiddle.net/PktxV/3/)：

```
$(document).ready(function () {
    $('#sidePanel').hover(function () {
        $(this).stop(true, false).animate({
            'left': '0px'
        }, 900);
    }, function () {
        $(this).stop(true, false).animate({
            'left': '-202px'
        }, 900);
    });
}); 
```

**编辑：**

将所有带有 HTML 的页面更改为：

```
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Untitled Document</title>
<style>
/* ===== Primary Styles ========================================================
   Author: NTechi | WebsTutorial
   ========================================================================== */
 body {
    font-family:Arial;
}
#sidePanel {
    width:245px;
    position:fixed;
    left:-202px;
    top:15%;
}
#panelHandle {
    background-image: -webkit-linear-gradient(top, #333, #222);
    background-image: -moz-linear-gradient(center top, #333333, #222222);
    background-image: -o-linear-gradient(center top, #333333, #222222);
    background-image: -ms-linear-gradient(center top, #333333, #222222);
    background-image:linear-gradient(center top, #333333, #222222);
    height:150px;
    width:40px;
    border-radius:0 5px 5px 0;
    float:left;
    cursor:pointer;
}
#panelContent {
    float:left;
    border:1px solid #333333;
    width:200px;
    height:300px;
    background-color:#EEEEEE;
}
#panelHandle p {
    -moz-transform: rotate(90deg);
    -webkit-transform: rotate(90deg);
    color: #FFFFFF;
    font-size: 24px;
    font-weight: bold;
    left: -4px;
    margin: 0;
    padding: 0;
    position: relative;
    top: 26px;
}
</style>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

<script>

$(document).ready(function () {
    $('#sidePanel').hover(function () {
        $(this).stop(true, false).animate({
            'left': '0px'
        }, 900);
    }, function () {
        $(this).stop(true, false).animate({
            'left': '-202px'
        }, 900);
    });
});

</script>

</head>

<body>
<div id="sidePanel">
    <div id="panelContent">
        <iframe src="//www.facebook.com/plugins/likebox.php?href=http%3A%2F%2Fwww.facebook.com%2FWebsTutorial&amp;width=200&amp;height=258&amp;colorscheme=light&amp;show_faces=true&amp;border_color&amp;stream=false&amp;header=false&amp;appId=253401284678598"
        scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:200px; height:258px;"
        allowTransparency="true"></iframe>
    </div>
    <div id="panelHandle">
        <p>Facebook</p>
    </div>
</div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T15:53:28.007

也许您没有包含 jQuery 库，因此 JavaScript 没有运行。

您在页面上看到了什么错误？检查您的 JavaScript 控制台。

# android - 如何读取 TimePicker 选择的值？

> ID：15027987
> 
> 赞同：4
> 
> 时间：2013-02-22T15:50:24.537
> 
> 标签：android, timepicker

我遵循了本指南： http: [//developer.android.com/guide/topics/ui/controls/pickers.html](http://developer.android.com/guide/topics/ui/controls/pickers.html) 我不太确定这个（我对 android dev 很陌生）我有一个包我的mainActivity 类和 timepicker 类。我希望在设置时间时将其写入 mainactivity 的变量，或者相反，这样做“onTimeSet”将值保存为类变量并从我的 mainActivity 中读取这些变量。我怎么做？

这是我的片段类：

```
package com.example.remoteswitch;

import java.util.Calendar;

import android.app.Dialog;
import android.app.DialogFragment;
import android.app.TimePickerDialog;
import android.os.Bundle;
import android.text.format.DateFormat;
import android.widget.TimePicker;

public class TimePickerFragment extends DialogFragment
                            implements TimePickerDialog.OnTimeSetListener {

    int hour, min;
    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        // Use the current time as the default values for the picker
        final Calendar c = Calendar.getInstance();
        int hour = c.get(Calendar.HOUR_OF_DAY);
        int minute = c.get(Calendar.MINUTE);

        // Create a new instance of TimePickerDialog and return it
        return new TimePickerDialog(getActivity(), this, hour, minute, true);
    }

    public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
        // Do something with the time chosen by the user
        hour = hourOfDay;
        min = minute;

    }
} 
```

在我的 MainActivity 类中，我有一个在按下按钮时调用的函数：

```
public void showTimePickerDialog(View v) {
            //DialogFragment newFragment = new TimePickerFragment();
            TimePickerFragment newFragment = new TimePickerFragment();
            newFragment.show(getFragmentManager(), "timePicker"); 

            //todo: read values from timePicker
            int pickerHour = 0, pickerMin = 0;
            //some manipulations on this data
            }
        } 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-22T16:05:36.673

**重写**
我结合了我们讨论的开发人员指南中的两个示例。现在您应该能够了解如何将用户从 TimePickerFragment 中选择的时间发送回更有用的 Activity。（我对第一个示例进行了一些更改。）

时间选择器片段：

```
public class TimePickerFragment extends DialogFragment {
    // Notice I removed "implements OnTimeSetListener" and changed the variables

    private Activity mActivity;
    private OnTimeSetListener mListener;

    @Override
    public void onAttach(Activity activity) {
        super.onAttach(activity);
        mActivity = activity;

        // This error will remind you to implement an OnTimeSetListener 
        //   in your Activity if you forget
        try {
            mListener = (OnTimeSetListener) activity;
        } catch (ClassCastException e) {
            throw new ClassCastException(activity.toString() + " must implement OnTimeSetListener");
        }
    }

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        // Use the current time as the default values for the picker
        final Calendar c = Calendar.getInstance();
        hour = c.get(Calendar.HOUR_OF_DAY);
        minute = c.get(Calendar.MINUTE);

        // Create a new instance of TimePickerDialog and return it

        // I made a couple changes here!
        return new TimePickerDialog(mActivity, mListener, hour, minute,
                DateFormat.is24HourFormat(mActivity));
    }
} 
```

主要活动：

```
// add "implements OnTimeSetListener" to "public class MainActivity ..."
private int pickerHour = 0;
private int pickerMin = 0;

// onCreate() and your other methods...

public void showTimePickerDialog(View v) {
    TimePickerFragment newFragment = new TimePickerFragment();
    newFragment.show(getFragmentManager(), "timePicker"); 
}    

@Override
public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
    // Do something with the time chosen by the user
    pickerHour = hourOfDay;
    pickerMin = minute;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-28T12:02:55.483

使用下面的答案。这对我有用。

接口类：

```
public interface OnTimeSetListener {
    void onTimeSet(String time);
} 
```

活动类 onClick：

```
 DialogFragment newFragment = new TimePickerFragment(getActivity(), this);
        newFragment.show(getActivity().getSupportFragmentManager(), "timePicker"); 
```

覆盖接口监听器方法：

```
 @Override
    public void onTimeSet(String time) {
        // TODO Auto-generated method stub
//do something here to set the values
    } 
```

# php - 如何使用php获取数组的数字位置

> ID：15027995
> 
> 赞同：0
> 
> 时间：2013-02-22T15:50:44.017
> 
> 标签：php, arrays, search, numbers, position

我想获得***数组***中值的**确切数字位置**

 *数组值：

```
$val = array('banana' , 'second' , 'apple'); 
```

当用户*搜索*值**apple**

它会显示

> 3

因为它是第三个元素

当用户搜索**香蕉时**

它会显示

> 1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T15:54:49.753

[`array_search()`](http://php.net/manual/en/function.array-search.php)像这样 使用：

```
$num = array_search('banana', $array) + 1; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T15:57:00.530

```
$keys= array_keys($val, "apple") 
```

将返回一个值为 2 的数组（数组中所有值为“apple”的索引）。

那么你只需要获取该数组的第一个元素并添加 1

```
$numericPosition = current($keys) 
```

如果 $keys 为空，即数组中不存在“apple”，则 $numericPosition === false，否则加 1。这确保您可以实际检测到值何时不存在，如果您只是将 1 加到 current($键）任何不在数组中的值都将位于位置 1。

编辑：另一个答案的 array_search 将仅返回给定值的第一个键，因此它可能更好地满足您的需求，只需确保在添加 1 之前检查是否为 false。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T15:54:58.490

除了遍历数组并检查之外，没有其他方法（与其他答案所暗示的相反）。根据数组的特定形状（值或键），任何其他解决方案都将是一种破解。

```
$search = "banana";

$index = 1;
foreach ($val as $v) {
   if ($v === $search) break;
   $index++;
}

echo "$search is number: $index "; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-22T15:56:13.527

```
$word = 'banana';
$position = array_search($word, $val) + 1; 
```*

# variables - 如何在 Coldfusion 中动态构造查询输出变量？

> ID：15027996
> 
> 赞同：1
> 
> 时间：2013-02-22T15:50:46.030
> 
> 标签：variables, dynamic, coldfusion, output

我正在尝试遍历一个包含我需要显示的列名的数组。用户可以定义自己的列，因此这将是一个动态列名列表

例如，列名可能是：

```
["style", "color", "size"] 
```

这些是我需要从名为`results`.

我正在这样做：

```
<cfset variables.styleText = "">
<cfloop array="#DeserializeJSON(variables.raw.field_names)#" index="x">
   <cfset variables.styleText = variables.styleText & "#results." & x &"# ">
</cfloop>
<cfoutout>variables.styleText</cfoutput> 
```

但这给了我一个错误，因为我不能用`quot`aka结束变量名

```
 Diagnose: A CFML variable name cannot end with a &quot;.&quot; character. 
 The variable results. ends with a &quot;.&quot; character.  
 You must supply an additional structure key or delete the &quot;.&quot; character. 
```

**问题：**
谁能给我一个提示，`results`在这种情况下，我需要如何修改它以输出查询中 的值`#results.style# #results.color# #results.size#`？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T16:02:18.053

代替

```
<cfloop array="#DeserializeJSON(variables.raw.field_names)#" index="x">
 <cfset variables.styleText = variables.styleText & "#results." & x &"# ">
</cfloop> 
```

你应该能够做到

```
<cfloop array="#DeserializeJSON(variables.raw.field_names)#" index="x">
 <cfset variables.styleText = variables.styleText & results[x][results.currentrow]>
</cfloop> 
```

或者，如果您只是使用 CF9 或更高版本

```
<cfset variables.styleText&=results[x][results.currentrow]> 
```