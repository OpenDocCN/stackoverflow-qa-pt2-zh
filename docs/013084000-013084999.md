# StackOverflow 问答 13084000-13084999

# php - 如何在 Netbeans 中为特定版本添加代码折叠

> ID：13084001
> 
> 赞同：0
> 
> 时间：2012-10-26T09:10:37.000
> 
> 标签：php, netbeans, version-control

作为免责声明，我对 Netbeans 还很陌生，不知道该如何表达这个问题。

我有同一个应用程序的两个版本。唯一的区别是几个不同文件中的一些函数。是否可以选择在导出时删除标记的代码折叠？例如：

```
/* @Version2 Only */
function version2Function {
   //code
} 
```

还是某种版本控制是最好的选择？每次更新都手动添加这些内容真的很痛苦。感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T09:20:44.203

我认为你最好使用svn。并创建分支。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T09:23:16.127

我们一直在使用的是 Git（作为版本控制）关于添加到函数上的注释，这些注释被称为“文档块”。

据我了解您的问题，您想使用版本控制系统并想知道是否有任何更改？

一旦您使用 git 并参考该源使用 netbeans，它会通过在左侧面板上显示颜色标记（如蓝色或绿色）来让您知道任何更改，就在行号旁边......

你不必为它配置你的netbeans。

所以......在你的代码上使用 git（谷歌以获得好的教程）并开始......然后，你不必担心不同的版本 :)

希望这可以帮助。

# objective-c - Objective-C：如何比较 2 个 PList

> ID：13084002
> 
> 赞同：2
> 
> 时间：2012-10-26T09:10:40.617
> 
> 标签：objective-c, nsdictionary

我是 Objective-C 的新手，我的任务是比较同一应用程序的 2 个构建，以了解它们的 Info.plist 和 Defaults.plist 的差异。

我已经能够弄清楚从应用程序包中读取 PLists 的步骤，但是很难弄清楚如何将 PLists 中的每个键与其对应文件进行比较。为了说明我是否需要比较 2 个应用程序包（比如说 build_100 和 build_101）之间的 Info.plist，我如何递归地转到 build_100 中的每个键并比较 build_101 中的相同键以验证它们是否相同。

如果两个 PList 相同，这很容易，因为`isEqualToDictionary`将返回 TRUE，但如果嵌套字典中的某些内容在两个构建之间不同，则会出现问题。

通过此处的相关查询，我很清楚答案是我编写了一个遍历两个 PList 的递归方法，但我有一个真正令人沮丧的时间来找出一种方法来为嵌套字典（如`Info.plist`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T11:10:12.273

所以我终于弄清楚了这件事，所以想与其他人分享以供将来参考。我敢肯定，将来会有其他迷失的灵魂在寻找类似的东西（或者至少我希望:)）。

我编写代码的方式是：

1.  阅读 NSDictionaries 中的两个 Plist
2.  将一个 Plist 视为“待测试”，将另一个 Plist 视为参考（用于比较）以确定其是否通过/失败
3.  遍历“待测试”Plist 中的所有键，并比较“参考”Plist 中的每一个键
4.  在比较数组或字典时，此检查（这是我一直在努力的部分）必须是递归检查

为步骤 #1、2、3 编写的代码很简单，所以我将给出我为 #4 编写的方法，这是我最初问题的症结所在。

此函数 compareSourceObject() 将采用 3 个参数：

*   `sourceObject`：要测试的对象
*   `targetObject`: 比较对象
*   `trailPath`：字符串，它将保存失败的密钥的整个路径

```
- (void)compareSourceObject:(id)sourceObject andTargetObject:(id)targetObject with BreadcrumbTrail:(NSString *)trailPath{
    NSString *message = [[NSString alloc] init];

    if ([sourceObject isKindOfClass:[NSDictionary 类]]){
        for(sourceObject 中的 id 项){
            [self compareSourceObject:[sourceObject objectForKey:item] andTargetObject:[targetObject objectForKey:item] withBreadcrumbTrail:[trailPath stringByAppendingFormat:@"->%@", item]];
        }
    }
    else if ([sourceObject isKindOfClass:[NSArray class]]){
        for (int counter=0; counter %d", counter]];
        }
    }
    否则 if(![sourceObject isEqual:targetObject]){
        NSLog(@"值不匹配。\"TestedDicationary\" 中的值是 (%@) 但引用字典有 (%@)", targetObject, sourceObject);
    }
}

```

希望这可以帮助。非常欢迎评论/建议/优化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T09:21:08.057

取一个 plist，并将属性解释为一组 ( `NSSet`) 字符串值，例如

`:items:0:assets array`

`:items:0:assets:0:kind string VALUE`

注意我使用`/usr/libexec/PlistBuddy`格式来描述一个属性 - `path type [value]`.

然后对第二个 plist 执行相同的操作，并使用`NSSet`函数比较集合。

# jsp - jsp页面出错

> ID：13084003
> 
> 赞同：0
> 
> 时间：2012-10-26T09:10:42.847
> 
> 标签：jsp, servlets, jsp-tags

我正在做一个java项目。因为我使用了一些jsp页面，所以action属性有如下错误_

```
<h:commandLink id="update_account_balance" rendered="false" 
    action="#{AccountHelperBean.updateAccountBalanceForOneTimeUse}">
    <h:outputText value="Update All Account's Balance" />
 </h:commandLink> 
```

在显示错误的操作属性处，例如“*方法必须具有签名“字符串方法（）”但具有签名“无效方法（）”* “我正在使用 Eclipse Indigo。有没有人知道这种问题。感谢你。

# cocoa - NSTextView 中的垂直线

> ID：13084005
> 
> 赞同：4
> 
> 时间：2012-10-26T09:11:02.390
> 
> 标签：cocoa, nstextview

我想创建一个类似于 Mail.app 中使用的富文本编辑器。NSTextView 基本上支持我需要的一切，除了一件事。我不知道如何像 Mail.app 那样为引用的文本创建垂直线。

作为参考，这是一个线程讨论的屏幕截图，说明了我在说什么：

![Mail.app 中的线程讨论](../Images/559a8c32549a12b8b0785d4d77e1eccf.png)

我指的是图像左侧有两条垂直线。任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-20T02:39:07.373

CoreText 可能是这里的答案。[请参阅https://developer.apple.com/library/mac/documentation/StringsTextFonts/Conceptual/CoreText_Programming/LayoutOperations/LayoutOperations.html](https://developer.apple.com/library/mac/documentation/StringsTextFonts/Conceptual/CoreText_Programming/LayoutOperations/LayoutOperations.html)上的文档， 尤其是清单 2.3 和 2.4，它们显示在一列中布局文本并在 drawRect 中这样做：您还可以在矩形左侧绘制一条或多条垂直线。

CoreText 允许您对文本和布局进行任何操作。我强烈推荐最近在[http://www.nsscreencast.com/episodes上关于 CoreText 的 5 个视频系列](http://www.nsscreencast.com/episodes)

# salesforce - 使用来自 Salesforce 的 OAuth 2.0 用户代理身份验证的访问令牌拒绝连接

> ID：13084007
> 
> 赞同：0
> 
> 时间：2012-10-26T09:11:10.507
> 
> 标签：salesforce, oauth-2.0, access-token, remote-access, connection-reset

我正在使用 OAuth2.0 用户代理身份验证流程来获取访问和刷新令牌，以便我可以通过远程访问使用 Foce.com REST API。现在，问题是我能够成功授权并接收令牌，但是在授权我的客户端应用程序之后使用这些令牌时，我收到 java.net.ConnectException: Connection denied 错误。

按照我正在做的步骤

1.  重定向到 [https://login.salesforce.com/services/oauth2/authorize?response_type=token&client_id=](https://login.salesforce.com/services/oauth2/authorize?response_type=token&client_id=) {my_client_id}&redirect_uri={my_redirect_uri}&state=myState

2.  在 salesforce 中授权应用程序，然后以
    {my_redirect_uri}#access_token={my_access_token}&refresh_token={my_refresh_token}&instance_url=https%3A%2F%2Fap1.salesforce.com&id=的形式在 redirect_uri 的哈希中接收访问令牌和刷新令牌https%3A%2F%2Flogin.salesforce.com%2Fid%2F00D90000000gscOEAQ%2F00590000000sdtJAAQ&issued_at=1351151192815&signature={my_signature_value}&state=myState &scope=id+api+refresh_token

3.  现在，我使用 REST API 使用相同的访问令牌，通过 POST 到 [https://ap1.salesforce.com/services/data/v20.0/sobjects/Lead/](https://ap1.salesforce.com/services/data/v20.0/sobjects/Lead/) 请求标头：
    Content-Type: application/ json
    授权：OAuth {my_access_token}

我在发送帖子时没有转义访问令牌，因为在使用 CURL 时需要这样做。使用 HttpClient Java API 时也需要这样做吗？

我得到的响应是“java.net.ConnectException：连接被拒绝错误”。有人可以让我知道我做错了什么或如何进一步调试它吗？有什么方法可以查看 Salesforce 端发生了什么？一些日志可能是？

如果我也尝试 OAuth Refresh Token Process，我会收到完全相同的连接被拒绝错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T18:13:41.450

对不起，噪音。

在使用刷新令牌过程验证客户密码时，我得到了带有“过期访问/刷新令牌”的“invalid_grant”，但由于它是安全传输，所以我在 Java 中得到的只是“连接被拒绝”，没有详细的错误消息。

如此处所述，我通过在 Charles 中设置 SSL 代理了解了详细[错误](http://www.charlesproxy.com/documentation/proxying/ssl-proxying/)。之后，我能够看到发送到[https://ap1.salesforce.com](https://ap1.salesforce.com)的请求参数和响应，这在之前是不可读的。

# eclipse - 覆盖 Eclipse 插件默认首选项

> ID：13084011
> 
> 赞同：1
> 
> 时间：2012-10-26T09:11:17.620
> 
> 标签：eclipse, preferences, rcp

我正在开发一个 Eclipse RCP 应用程序并使用第三方提供的插件。我需要更改此插件的某些首选项的默认值。我可以从我自己的代码中做到这一点，而无需更改插件的内部`PreferenceInitializer`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T07:21:07.510

您可以通过在产品扩展中使用preferenceCustomization 扩展注册的文件来设置其他插件的首选项。

该文件通常命名为 plugin_customization.ini。

[http://www.vogella.com/articles/EclipsePreferences/article.html#preferences_plugin.ini](http://www.vogella.com/articles/EclipsePreferences/article.html#preferences_plugin.ini)

# iphone - 警报视图中的 Exc_Bad_Access 显示

> ID：13084014
> 
> 赞同：1
> 
> 时间：2012-10-26T09:11:34.793
> 
> 标签：iphone, objective-c, xcode, crash, exc-bad-access

在 UIAlertView 显示消息中获取 Exc_Bad_Access。

```
UIAlertView *systemAlert1 = [[UIAlertView alloc]initWithTitle:@"System message" message:@"note" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [systemAlert1 show];  **//Crashing on this line [EXC_BAD_ACCESS]**
    [systemAlert1 release]; 
```

为什么我得到这个？请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T11:16:46.110

任何 UI 内容（包括显示警报）都应在主线程上完成。如果您在其他线程上执行此操作，它肯定会崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-24T11:23:13.787

这可能是因为您的警报是从后台线程而不是主线程调用的。建议仅在主线程上进行用户界面相关的更改，以避免应用程序的此类行为

试试这个代码：

```
UIAlertView *systemAlert1 = [[UIAlertView alloc]initWithTitle:@"System message" message:@"note" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
[systemAlert1 performSelectorOnMainThread:@selector(show) withObject:nil waitUntilDone:YES]; 
[systemAlert1 release]; 
```

希望这可以帮助。需要帮助请叫我。

# mysql - SQL查询从表中获取历史数据

> ID：13084025
> 
> 赞同：0
> 
> 时间：2012-10-26T09:12:51.783
> 
> 标签：mysql, sql

我有一个表，其中存储了这样一个人的状态更改历史记录：

```
id | username | date | status 
```

日期字段是状态更新的时间，状态字段包含此人自该日期以来的新状态。

所以我表中的日期可能是这样的：

```
1 | 塞拉芬| 2012-03-03 | “新的”
2 | 约翰 | 2012-03-05 | “新的”
3 | 塞拉芬| 2012-03-13 | “待办的”
4 | 塞拉芬| 2012-03-15 | “老的”
5 | 约翰 | 2012-03-05 | “待办的”

```

等等等等

现在，我想要一个查询，在过去的特定日期将检索每个用户当时的状态。例如，对于 2012-04-14 我想得到以下结果

```
塞拉芬| “待办的”
约翰 | “新的”

```

对于 2012-03-04 我应该得到

```
塞拉芬| “新的”

```

任何人都可以想到一个可以做到这一点的 SQL 查询吗？我不想以编程方式执行此操作！我正在使用mysql，但我认为这与我的问题无关......

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T09:16:57.880

以下查询识别给定用户名在指定日期之前的最新记录，并使用该最新记录 ID 连接历史记录表以获取其余详细信息。

```
SELECT a.* 
FROM 
   history a
   JOIN (SELECT username, MAX(id) 'id' FROM history 
         WHERE date < @inputDate
         GROUP BY username
        ) as b
   ON a.id = b.id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T09:22:28.627

获取日期小于或等于输入日期的用户的第一条记录：

```
declare @userid nvarchar(128)
declare @date datetime

SELECT userid, status
FROM
(
  SELECT limit 1 * FROM mytable
  WHERE date <= @date
    AND userid = @userid
  ORDER by date desc
) 
```

**未经测试！**如果有任何语法错误，请见谅。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T09:23:03.213

我现在无法在 MySql 数据库上进行测试，但是这个查询应该可以完成这项工作。

*table2*查询检索您在所需日期之前为每个用户名注册事件的最大日期：这应该是该人的最后一个状态事件。

加入获取状态。

```
select username, status from table
join
(
select username, max(date) as maxdate from table
where date <= '2012-04-14'
group by username ) table2
on table.username = table2.username and table.date = table.2maxdate 
```

另一种方法可能是不加入

```
select username, status from table
where date = (select max(date) as maxdate from table
where date <= '2012-04-14'
group by username ) 
```

# javascript - 使用坐标设置 div 位置

> ID：13084027
> 
> 赞同：3
> 
> 时间：2012-10-26T09:13:11.023
> 
> 标签：javascript, javascript-events

我有一个网页（jsp），其中包含另一个使用的 jsp

```
 <%@jsp:include ... %> 
```

当我单击第二部分（包含页面）时，使用获取坐标

```
 window.event.clientX 
    window.event.clientY 
```

并分别存储到 x 和 y 中。现在我将一个 div 设置为在该鼠标坐标处可见，例如，

```
 document.getElementById('division').style.top=x;
    document.getElementById('division').style.left=y; 
```

正如预期的那样，在鼠标单击的同一位置显示该 div。但是分裂正在其他地方出现。

这是什么原因？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T09:32:52.447

顶部属性是一个字符串。尝试`document.getElementById('division').style.top=x + 'px';`

我尝试了以下代码，它在 IE 和 Firefox 上运行良好。onclick 适用于 IE，addEventListener 适用于兼容浏览器。

```
<div id="clickMe" style="position: absolute; top: 10px;" onclick="myClick();">
    clickMe
</div>
<div id="division" style="position: absolute; top: 40px;">
    division
</div>
<script type="text/javascript">
    var clickMe = document.getElementById('clickMe');
    clickMe.addEventListener('click', myClick, 'false');

    function myClick(e) {
        var evt = e || window.event; //windows.event is for IE
        var x = evt.clientX;
        var y = evt.clientY;            
        document.getElementById('division').style.top = y + 'px';
        document.getElementById('division').style.left = x + 'px';
    }
</script> 
```

# activerecord - 子类中的 Yii 模型行为继承 AR 模型类

> ID：13084032
> 
> 赞同：2
> 
> 时间：2012-10-26T09:13:27.840
> 
> 标签：activerecord, yii, behavior

我已经实现了一个`crypt`可以附加到 AR 模型的行为类，以便附加属性将作为加密存储并作为解密字符串检索。

```
class User extends CActiveRecord 
{
    public function behaviors()
    {
        return array(
            'crypt' => array(
            // this assumes that the behavior is in the folder: protected/behaviors/
            'class' => 'application.behaviors.CryptBehavior',
            // this sets that the attributes to be encrypted/decrypted are encryptedfieldname of the model
            'attributes' => array('password'),
            'useAESMySql' => true
           )
        );
    }
} 
```

这工作正常。我也有我的自定义类`Myuser`，它扩展`User`了模型来编写我的自定义函数，这样如果我在我的`user`表中进行一些更改并重新生成模型，我就不会失去我自己的函数。

如果我将我的`behavior`函数移到类`MyUser`中，**则行为不会附加并且无法按预期工作**。

```
class MyUser extends User 
{
    public function behaviors()
    {
        return array(
            'crypt' => array(
            // this assumes that the behavior is in the folder: protected/behaviors/
            'class' => 'application.behaviors.CryptBehavior',
            // this sets that the attributes to be encrypted/decrypted are encryptedfieldname of the model
            'attributes' => array('password'),
            'useAESMySql' => true
           )
        );
    }

    public function customfn1()
    {
         //some code goes here...
    }
} 
```

任何帮助，将不胜感激。参考链接：[地穴行为](http://www.yiiframework.com/forum/index.php/topic/26435-aes-encryption/page__view__findpost__p__127764)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T12:42:22.107

这是工作解决方案。我需要测试所有场景。感谢@bool.dev 为您提供的功能。

```
class MyUser extends User 
{
    public static function model($className=__CLASS__)
    {
       return parent::model($className);
    }

    public function behaviors()
    {
        return array(
            'crypt' => array(
            // this assumes that the behavior is in the folder: protected/behaviors/
            'class' => 'application.behaviors.CryptBehavior',
           // this sets that the attributes to be encrypted/decrypted are encryptedfieldname of the model
            'attributes' => array('password'),
           'useAESMySql' => true
          )
       );
    }

   public static function getUserByID($id)
   {
      //validation of $id goes here..

      return MyUser::model()->findByPk($id);
   }
} 
```

在我的控制器中

```
$userModel = MyUser::getUserByID(1); 
```

在我看来

```
$userModel->password; //gives me the decrypted password; for easy understanding, i used password field here.... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T13:43:30.493

您还必须将类的`static model`功能添加到子类中。就这么多应该工作：

```
public static function model($className=__CLASS__)
{
    return parent::model($className);
} 
```

# grails - Grails oauth 插件无法安装

> ID：13084034
> 
> 赞同：0
> 
> 时间：2012-10-26T09:13:37.323
> 
> 标签：grails, oauth

我正在尝试将以下插件[http://grails.org/plugin/oauth](http://grails.org/plugin/oauth)安装到我的新 Grails 项目中，但每次我尝试安装时，我都会出现以下错误

```
D:\MyProjects\Grails\grails48>grails install-plugin oauth 2.1.0
| Resolving plugin oauth. Please wait...
:: problems summary ::
:::: ERRORS
    Server access Error: Connection timed out: connect url=http://grails.org/plugins/grails-oauth/tags/RELEASE_2_1_0/oauth-2.1.0.pom

    Server access Error: Connection timed out: connect url=http://grails.org/plugins/grails-oauth/tags/RELEASE_2_1_0/grails-oauth-2.1.0.zip

    Server access Error: Connection timed out: connect url=http://repo.grails.org/grails/core/org/grails/plugins/oauth/2.1.0/oauth-2.1.0.pom

    Server access Error: Connection timed out: connect url=http://repo.grails.org/grails/core/org/grails/plugins/oauth/2.1.0/oauth-2.1.0.zip

    Server access Error: Connection timed out: connect url=http://repo1.maven.org/maven2/org/grails/plugins/oauth/2.1.0/oauth-2.1.0.pom

    Server access Error: Connection timed out: connect url=http://repo1.maven.org/maven2/org/grails/plugins/oauth/2.1.0/oauth-2.1.0.zip

    Server access Error: Connection timed out: connect url=http://snapshots.repository.codehaus.org/org/grails/plugins/oauth/2.1.0/oauth-2.1.0.pom

    Server access Error: Connection timed out: connect url=http://snapshots.repository.codehaus.org/org/grails/plugins/oauth/2.1.0/oauth-2.1.0.zip

    Server access Error: Connection timed out: connect url=http://repository.codehaus.org/org/grails/plugins/oauth/2.1.0/oauth-2.1.0.pom

    Server access Error: Connection timed out: connect url=http://repository.codehaus.org/org/grails/plugins/oauth/2.1.0/oauth-2.1.0.zip

    Server access Error: Connection timed out: connect url=http://download.java.net/maven/2/org/grails/plugins/oauth/2.1.0/oauth-2.1.0.pom

    Server access Error: Connection timed out: connect url=http://download.java.net/maven/2/org/grails/plugins/oauth/2.1.0/oauth-2.1.0.zip

    Server access Error: Connection timed out: connect url=http://repository.jboss.com/maven2/org/grails/plugins/oauth/2.1.0/oauth-2.1.0.pom

    Server access Error: Connection timed out: connect url=http://repository.jboss.com/maven2/org/grails/plugins/oauth/2.1.0/oauth-2.1.0.zip

    Server access Error: Connection timed out: connect url=http://repo.desirableobjects.co.uk/org/grails/plugins/oauth/2.1.0/oauth-2.1.0.pom

    Server access Error: Connection timed out: connect url=http://repo.desirableobjects.co.uk/org/grails/plugins/oauth/2.1.0/oauth-2.1.0.zip 
```

| 解析插件时出错 [name:oauth, group:org.grails.plugins, version:2.1.0]。未找到插件。| 找不到名称 [oauth] 和版本 [2.1.0] 的错误插件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-15T16:18:37.710

尝试在**BuildConfig.groovy**中添加以下存储库：

**mavenRepo“ [http://repo.desirableobjects.co.uk/](http://repo.desirableobjects.co.uk/) ”**

# css - @font-face : 在 Firefox (FOST) 上闪现 STYLED 文本

> ID：13084035
> 
> 赞同：0
> 
> 时间：2012-10-26T09:13:41.300
> 
> 标签：css, firefox, font-face

* * *

我知道 Firefox（和其他......）中 @font-face 上的 FOUT 问题被一次又一次地处理，但我不是为了那个。

我目前遇到一个非常奇怪的问题，当我浏览我网站的页面时，我看到**FOST (Flash of Styled Text)**：页面显示一秒钟，一切正常，文本 (@font-face) 几毫秒消失并且然后以同样的方式重新出现。

**这是我的@font-face 声明：**

```
@font-face {
  font-family: 'DINWeb-Bold';
  src: url('/fonts/DINWeb-Bold.eot');
  src: local('☺'),
         url('/fonts/DINWeb-Bold.woff') format('woff'), url('/fonts/DINComp-Bold.ttf') format('truetype');
  font-style: normal;
  font-weight: normal;
} 
```

**配置：**

*   Mac OSX 10.8.2
*   火狐13.0

*（注意：我的本地计算机上没有字体）*

有人能告诉我这个谜吗？！

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T12:27:32.683

我解决了在**Typekit Kit中导入 webfont 的****“FOST”**问题（[fontshop](http://www.fontshop.com/)允许，感谢上帝）。似乎 Typekit 的集成脚本包含一些可以消除任何 FOUC 效应的东西，所以......

 **> 默认嵌入代码简单易用。通过在加载时阻止渲染，它可以很好地隐藏无样式文本的闪烁。

好吧，它对我有用，但我很想知道是否有另一种解决方案，而无需通过 Typekit。**也许是 Google 的 WebFont Loader？****

# kernel - JTAG + openocd + 内核调试（vmlinux 中没有调试信息？）

> ID：13084038
> 
> 赞同：0
> 
> 时间：2012-10-26T09:14:12.390
> 
> 标签：kernel, jtag, openocd

当我从 Eclipse 连接到目标时，我收到以下消息：

```
symbol-file /opt/Tixi_Repos/KiwiG6v2/buildroot-2011.05/package_tixi/linux-2.6.39/arch/arm/boot/compressed/vmlinux
target remote localhost:3333
start () at arch/arm/boot/compressed/head.S:108
108         kphex   r5, 8       /* end of kernel */ 
```

但之后当我停止运行内核时：0xc06f2674
No source available for ""

此外，当我尝试步进时：目标请求失败：找不到当前函数的边界。

vmlinux中似乎没有符号。但是内核是在设置了 DEBUG_KERNEL 和 DEBUG_INFO 的情况下重建的。

内核 2.6.39 CPU AT91SAM9G25

```
openocd -f /usr/share/openocd/scripts/interface/jtagkey2.cfg -f /usr/share/openocd/scripts/board/at91sam9g20-ek.cfg

TapName            | Enabled |   IdCode      Expected    IrLen IrCap  IrMask   Instr     
---|--------------------|---------|------------|------------|------|------|------|---------
 0 | at91sam9g20.cpu    |    Y    | 0x00000000 | 0x0792603f | 0x04 | 0x01 | 0x0f | 0x0f
Info : max TCK change to: 30000 kHz
Info : RCLK (adaptive clock speed)
Info : JTAG tap: at91sam9g20.cpu tap/device found: 0x0792603f (mfg: 0x01f, part:0x7926, ver: 0x0)
Info : Embedded ICE version 6
Info : accepting 'gdb' connection from 0
Warn : acknowledgment received, but no packet pending 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:45:32.223

在我的系统中编译了 2 个不同的 vmlinux 文件：一个在根文件夹中，第二个在 arch/arm/boot/compressed/vmlinux

[https://stackoverflow.com/questions/13155885/two-differend-vmlinux-files](https://stackoverflow.com/questions/13155885/two-differend-vmlinux-files)

# javascript - 用javascript解析文档

> ID：13084040
> 
> 赞同：0
> 
> 时间：2012-10-26T09:14:14.560
> 
> 标签：javascript, xml, json, parsing

我需要用 javascript 解析这个 json

```
 {
     "MasterProducts": {
    "MasterProduct": [
      {
        "Productcode": "0903-000192",
        "Description": "ICROCOMPUTER;32FX200 24BIT QFP 132P",
        "ThumbPic": "NoImage.png",
        "RRP": "41.400000",
        "Stock": "0"
      },
      {
        "Productcode": "0160-030",
        "Description": "AXIS MPEG-4 Decoder 50-user licence pack onto 50 separate computers. For all Axis MPEG-4 products that do not support AAC audio encoding. (210 211 210A 211A 213 214 221 225FD 231D+ 232D+ 241S 241Q 241SA 241QA 242SIV 243SA 282 282A).",
        "ThumbPic": "NoImage.png",
        "RRP": "35.230000",
        "Stock": "0"
      },
      {
        "Productcode": "0160-040",
        "Description": "AXIS MPEG-4 +ACC Decoder 50-user license onto 50 separate computers. For all Axis products that supports MPEG-4\. (207 207W 207MW 212PTZ 216FD 223M).",
        "ThumbPic": "NoImage.png",
        "RRP": "50.880000",
        "Stock": "0"
      },
      {
        "Productcode": "10403E",
        "Description": "Hotsync palm computer cradle/docking station",
        "ThumbPic": "NoImage.png",
        "RRP": "0.000000",
        "Stock": "2"
      },
      {
        "Productcode": "0903-000193",
        "Description": "ICROCOMPUTER;32FX200 24BIT QFP 132P",
        "ThumbPic": "NoImage.png",
        "RRP": "37.790000",
        "Stock": "0"
      }
    ]
  }
} 
```

当这段代码只有一个结果时，我已经设法做到了

```
 if(data !== '')
    {
        xmlData = data.childNodes[0].childNodes[0].data;
        objData = app.XML2OBJ(xmlData);            
        var item = objData.MasterProduct.Description;
        //alert(item);
    } 
```

但不能让它与多组结果一起工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T09:19:10.193

您不需要解析它，JSON 是 JavaScript 对象的制作方式。

```
// alerting each product description:
for(var product in data.MasterProducts.MasterProduct){
    // "product" is the current iteration in the products array
    alert(product.Description);
    // You can access all the product properties here.
    alert(product.Productcode);
} 
```

那应该这样做。现在，假设只返回 1 个主产品，那么 MasterProducts 属性不是数组，而是一个对象，上面的 for 循环可能会中断。防止这种情况的最简单方法是在循环之前将 MasterProducts 连接到一个空数组中。可能会有轻微的性能损失，但我真的不认为它有那么重要。

```
// Concat to empty array first
data.MasterProducts.MasterProduct = [].concat(data.MasterProducts.MasterProduct);
// alerting each product description:
for(var product in data.MasterProducts.MasterProduct){
    // "product" is the current iteration in the products array
    alert(product.Description);
    // You can access all the product properties here.
    alert(product.Productcode);
} 
```

我把我的答案写成一个循环，因为我假设你想处理所有的产品。如果您只想访问第一个产品，则可以访问 products 数组：

```
data.MasterProducts.MasterProduct[0].Description 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T09:19:30.297

正如人们在上面的评论中所讨论的那样，您可以简单地使用普通的原生 JavaScript 来访问数据。

```
var data = // JSON 

console.log(data.MasterProducts.MasterProduct[0].Productcode); 
```

会给你`0903-000192`。包含方括号的对象`[]`是数组。对于他们，您可以使用 的数组表示法`arr[0]`。对于对象，您可以使用它们的键名。

```
{
"MasterProducts": {
 "MasterProduct": [
   {
     "Productcode": "0903-000192",
     "Description": "ICROCOMPUTER;32FX200 24BIT QFP 132P",
     "ThumbPic": "NoImage.png",
     "RRP": "41.400000",
     "Stock": "0"
   }
 ]
} 
```

`MasterProducts`是您的根对象，因此您可以将其用作您的入口点。

```
var products = data.MasterProducts; 
```

现在，要获取产品列表的第一个元素，您可以使用数组表示法。

```
products.MasterProduct[0] 
```

要获得该元素的属性之一，您可以再次使用点符号 -

```
products.MasterProduct[0].Description //"ICROCOMPUTER;32FX200 24BIT QFP 132P" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T21:29:44.083

json 是 javascript 原生的 - 不需要解析器。

但我将向您展示如何使用 NPEG 解析**任何类型**的文档，包括 json。

# 使用 javascript 解析文档

您也可以使用 [https://github.com/leblancmeneses/NPEG/tree/master/Languages/npeg_javascript](https://github.com/leblancmeneses/NPEG/tree/master/Languages/npeg_javascript)

这是一个可以导出C版本的可视化工具：[http ://www.robusthaven.com/blog/parsing-expression-grammar/npeg-language-workbench](http://www.robusthaven.com/blog/parsing-expression-grammar/npeg-language-workbench)

规则语法文档：[http ://www.robusthaven.com/blog/parsing-expression-grammar/npeg-dsl-documentation](http://www.robusthaven.com/blog/parsing-expression-grammar/npeg-dsl-documentation)

规则

```
 S: [\s]*;
(?<StringValue>):  '"' (?<String> [^"]+) '"' / "'" (?<String> [^']+) "'";
(?<NumberValue>):  [0-9]+ ('.' [0-9]+)?;

(?<KeyValuePair>): ( '"'  (?<Key>[^"]+) '"' / "'" (?<Key> [^']+) "'" ) S ':' S  (StringValue / NumberValue / ValueRecursive) S;
(?<Object>): '{' S ( S  KeyValuePair S  ','? )*  S '}'; 
(?<Array>): '[' S (  S Object S  ','? )* S ']';
ValueRecursive: Array / Object ;
(?<JSON>): S ValueRecursive S; 
```

我试过的输入：这个 SO question 和[http://en.wikipedia.org/wiki/JSON](http://en.wikipedia.org/wiki/JSON)上的第一个输入。

# java - 这两个条件的区别？

> ID：13084049
> 
> 赞同：4
> 
> 时间：2012-10-26T09:14:43.907
> 
> 标签：java, string, if-statement

对不起，如果我的问题是愚蠢的，那没关系。但我只想知道在这两种情况下会发生什么。

```
public class Test {
    public static void main(String[] args) 
    {
        String str="test";
        if(str.equals("test")){
            System.out.println("After");
        }
        if("test".equals(str)){
            System.out.println("Before");
        }
    }
} 
```

两者都只给出相同的结果。但我知道有一些原因。我不知道。这两个条件有什么区别？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-26T09:16:07.337

它们之间根本没有区别。许多程序员使用第二种方式只是为了确保他们没有得到`NullPointerException`. 就这样。

```
 String str = null;

    if(str.equals("test")) {  // NullPointerException
        System.out.println("After");
    }
    if("test".equals(str)) {  // No Exception will be thrown. Will return false
        System.out.println("Before");
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T09:15:58.333

第二个不扔`NullPointerException`。但它再次被认为是糟糕的代码，因为它可能会发生`str`并且`null``you do not detect that bug at this point instead you detect it somewhere else`

1.  给定一个选择`1`，因为它可以帮助您在早期发现程序中的错误。
2.  否则添加检查`null`if `str`is `null`then 你将能够确定字符串真的不相等还是第二个字符串不存在

    ```
    if(str == null){
    //Add a log that it is null otherwise it will create confusion that 
    // program is running correctly and still equals fails
    }
    if("test".equals(str)){
        System.out.println("Before");
    } 
    ```

对于第一种情况

```
 if(str.equals("test")){//Generate NullPointerException if str is null
        System.out.println("After");
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-26T09:21:30.377

其实两者都是一样的。这两者没有区别。[http://www.javaworld.com/community/node/1006](http://www.javaworld.com/community/node/1006) Equal 方法比较两个字符串对象的内容。因此，在您的第一种情况下，它将 str 变量与“test”进行比较，然后将“test”与 str 变量进行比较。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-26T09:23:48.947

第一个`if`语句测试，是否`str`等于`"test"`。第二个`if`语句测试，是否`"test"`等于`str`。所以这两个 -statement 之间的区别在于，首先你向带有参数的对象`if`发送消息。然后对象比较，是否等于参数并返回或。第二个语句向 发送消息。也是一个字符串对象。所以现在比较，是否等于和返回或。`str``"test"``str``true``false``if``"test"``"test"``"test"``str``true``false`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-26T09:45:39.630

他们做的几乎一样。

唯一的区别是第一个示例使用字符串对象“str”的equal()方法，参数为“test”-string，而第二个示例使用字符串“text”的equal()方法和“str”作为参数。

第二个变体不能抛出 NullPointerException，因为它显然不是 null。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-26T09:16:22.983

当您尝试第一次修复静态字符串时，您可以在许多情况下避免空指针异常。

# android - Android - 当设备屏幕为空白时，不接收 Wi-Fi 连接更改意图

> ID：13084053
> 
> 赞同：2
> 
> 时间：2012-10-26T09:15:01.267
> 
> 标签：android, android-intent, android-wifi, android-wake-lock

我目前在我的 Android 应用程序中监听 Wi-Fi 的变化，并且在大多数情况下它工作正常，但是当用户有设备时，设备处于空闲/睡眠模式，就像屏幕空白时一样。如果他们走进 Wi-Fi 区域并自动连接，在用户打开屏幕之前我不会明白意图。这不好，并导致对我的应用程序的投诉。任何人都可以帮助我为什么在屏幕唤醒之前我没有得到意图？

这是我的代码：

广播接收器：

```
public class WifiReciever extends BroadcastReceiver{

    @Override
    public void onReceive(Context arg0, Intent arg1) {

        String action = arg1.getAction();

        if (!action.equals(ConnectivityManager.CONNECTIVITY_ACTION)){
            return;
        }                    

        if (!noConnectivity)
        {
            if (aNetworkInfo.getType() == ConnectivityManager.TYPE_WIFI)
            {
                //Handle connected case
                Log.e("E", "GOT CONNECTION"); 
            }
        }
        else
        {
            if (aNetworkInfo.getType() == ConnectivityManager.TYPE_WIFI)
            {
                //Handle disconnected case
                Log.e("E", "LOST CONNECTION");
            }
        }

    } 
```

如果一个正在运行的服务我把它作为一个变量：

```
WifiReciever mConnectionReceiver; 
```

我通过以下调用启动和停止服务中的接收器：

```
private synchronized void startMonitoringConnection()
{       
    IntentFilter aFilter = new IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION);   
    registerReceiver(mConnectionReceiver, aFilter);
}

private synchronized void stopMonitoringConnection()
{     
    unregisterReceiver(mConnectionReceiver);
} 
```

我调用 WakeLock 以确保我得到这样的 CPU 时间：

```
pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
wl = pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, "CicCPULock");
wl.acquire(); 
```

但是，即使屏幕为空白时我从未收到连接更改意图，但如果我用户走进 Wi-Fi 区域并在屏幕为空白时连接，它在屏幕开启的情况下 100% 工作我没有得到意图，有人知道我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-08T11:08:26.697

实际上，Android 中的 WakeLocks、WIFI 和 WIFILocks 存在很多问题。首先检查您的 WIFI 政策，看看当屏幕变暗时会发生什么。它必须是“始终开启”。然后尝试获取 WIFI Lock 以防止 wifi 休眠，因为保持 CPU 开启不会导致 WIFI 关闭。有关示例代码，请参阅：

[http://goltermann.cc/2011/11/android-accessing-wifi-even-in-standby-using-wakelock-wifilock-alarmmanager-and-services/](http://goltermann.cc/2011/11/android-accessing-wifi-even-in-standby-using-wakelock-wifilock-alarmmanager-and-services/)

另请注意，您必须拥有使用 WakkeLocks 的权限：

```
 <uses-permission android:name="android.permission.WAKE_LOCK" /> 
```

这方面还有很多其他问题检查这个问题，并参考谷歌问题跟踪器关于WIFI问题，它帮助你很多，节省你很多时间：

[Android奇怪的跨设备行为](https://stackoverflow.com/questions/17523493/android-strange-cross-device-behaviour/17524060?noredirect=1#comment25482336_17524060)

# c# - 在c#中添加Xml节点并从xml的字符串内容中保存它

> ID：13084055
> 
> 赞同：1
> 
> 时间：2012-10-26T09:15:12.937
> 
> 标签：c#, xml

我从 xml 文件中获取了字符串。现在我想在其中添加新节点。我该怎么办？代码是这样的。

```
byte[] binary = Convert.FromBase64String(webResource.Attributes["content"].ToString());
string resourceContent = UnicodeEncoding.UTF8.GetString(binary);
XDocument xDoc = XDocument.Parse(resourceContent); 
```

在resourceContent中，我现在从xml文件中获取了字符串，我如何在其中添加新节点..Xml文件是这样的..

```
<root name="account">  

<node cId="7143cd70-cd0e-e211-b10a-984be173a3b0" cName="Variety Store (sample)" pId="00000000-0000-0000-0000-000000000000" pName="" />

</root> 
```

更多说明=我得到了字符串中的整个 XML 吗？现在我只想添加一个节点并保存回 XML 文件……但请记住，我只能保存 xml 文件的内容……我无权粘贴整个 xml 到指定路径

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T09:19:12.390

```
XDocument xDoc = XDocument.Parse(resourceContent);
xDoc.Add(new XElement("name", "new content")); 
```

# java - Java 栈和堆

> ID：13084056
> 
> 赞同：1
> 
> 时间：2012-10-26T09:15:15.267
> 
> 标签：java

为什么
**堆栈：**像堆一样存储在计算机 RAM 中，而
**堆：**像堆栈一样存储在计算机 RAM 中？

根据“Brain R Bondy”[在这里的好回答](https://stackoverflow.com/questions/79923/what-and-where-are-the-stack-and-heap)

我正在使用 Java 语言。另外，如果我的 RAM 太少怎么办。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T09:29:19.483

在某些时候，所有内容都必须存储在主存储器 (RAM) 中，否则 CPU 无法使用它。

如果您的 RAM 用完了，操作系统会将应用程序的一些内存外包到磁盘。这将使您的程序变慢，但不会破坏它。因此，您的程序可以使用的内存量不取决于物理上可用的 RAM 量。

如果您遇到堆栈溢出错误，则您的程序中可能存在无限递归错误。

如果您遇到堆空间/内存不足错误，请参阅以下问题：[Java 选项 -Xmx 代表什么？](https://stackoverflow.com/questions/5374455/what-does-java-option-xmx-stand-for)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T09:18:09.383

让处理器尽可能快地访问它们，因为它们被大量使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T09:19:00.647

这仅意味着它们都保存在 RAM 中。

# jquery - Liferay + JSON + jQuery

> ID：13084059
> 
> 赞同：0
> 
> 时间：2012-10-26T09:15:24.513
> 
> 标签：jquery, json, liferay

我想从json获取参数，所以我有一个代码：

```
 @RenderMode(name = "VIEW")
public void serveResource(ResourceRequest resourceRequest, ResourceResponse resourceResponse) throws PortletException, IOException {
            JSONObject jsonObject = JSONFactoryUtil.createJSONObject();

            resourceRequest.setAttribute("resourceUrl", "http://localhost:8080/");

             jsonObject.put("rowsPerPage", 10);
             jsonObject.put("page", 1);
             jsonObject.put("total", 100);

             PrintWriter writer = resourceResponse.getWriter();
             writer.write(jsonObject.toString());
        } 
```

应该用显示以下内容的 JavaScript 方法编写什么：rowsPerPage、page、total

我有一个 JavaScript 代码：

```
$.getJSON('http://localhost:8080/', function(jd) {
      alert(jd.rowsPerPage);
   }); 
```

JSP 页面：

```
<%@ taglib uri="http://java.sun.com/portlet_2_0" prefix="portlet" %>

<portlet:defineObjects />

This is the <portlet:resourceURL var="testURL" id="view.jsp" escapeXml="false" />
<br/><br/>
<div id="myGrid" style="width:600px;height:500px;"></div>
<div id="pager" style="width:600px;height:20px;"></div> 
```

但这是错误的，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T10:40:04.613

检查您的 URL`http://localhost:8080/`是否返回 JSON 响应（您可以直接将 URL 粘贴到浏览器的地址栏中）。这将返回 Liferay 的欢迎页面。

要调用该`serveResource`方法，您需要`resourceURL`在 jQuery 函数中传递a，该函数`getJSON`可以使用 JSP 中的`<liferay-portlet:resourceURL>`or`<portlet:resourceURL>`标记生成。

**更新：**

您应该`resourceURL`在 javascript 中使用：

```
<portlet:resourceURL var="testURL" id="view.jsp" escapeXml="false" />

<script>
    $.getJSON('${testURL}', function(data) {
        alert(data.rowsPerPage);
    });
</scrip>

<!-- ${testURL}: This is EL i.e. expression language of JSP. Don't confuse it with jQuery -->
<!-- <%=testURL.toString() %>: You can also use scriptlet instead of using EL. But normally scriptlets as you might know are not recommended --> 
```

另外我想建议通过在方法中包含一些日志语句来确保该`serveResource`方法实际上是用脚本调用的。

以下是一些关于如何在 Liferay 中使用 Ajax 的示例链接：

1.  在 Liferay 中使用 Ajax的工作[示例。](http://sourceforge.net/projects/ajaxjqueryportl/files/)
2.  [博客](http://ajax-and-portlets.blogspot.in/2011/09/ajax-best-practice-in-portlets.html "Jignesh 的博客：深入了解 Portal 和 Portlet 技术")通过一个简单的示例解释了 ajax 如何在门户中工作的概念。

希望这可以帮助。

# javascript - 对 jQuery 的基本理解

> ID：13084060
> 
> 赞同：1
> 
> 时间：2012-10-26T09:15:27.900
> 
> 标签：javascript, jquery

是什么`event`

```
 $(document).ready(function(){
   $("a").click(function(event){
     alert("Thanks for visiting!");
   });
 }); 
```

还有这个

```
 $(document).ready(function(){
   $("a").click(function(){
     alert("Thanks for visiting!");
   });
 }); 
```

这两个 JS 块做同样的事情，但是一个带有`event`，如果有人可以解释什么是`function(event)`，我也看到了类似 function(e),function(g) 的东西，那些是什么？有教程可以学习吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T09:18:54.390

您提供的回调函数`$("a").click`是一个带有参数的函数。此参数是一个事件对象，包含有关该对象的详细信息。您的函数声明可以使用您喜欢的任何名称来获取此参数 — `event`, `e`, `g`... 它也可以简单地将其省略，因为您没有在函数内部使用它。

考虑到这两个函数本质上是相同的：

```
function foo(hi) {
   alert(hi);
}

function foo(bye) {
   alert(bye);
} 
```

如果不使用它，你可能会忽略它：

```
function bar() {
   alert("hello!");
}

bar(12345); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T09:19:39.083

Event 是一个对象，它表示产生要执行的函数的...**事件。**

以下是有关该主题的更多信息：

[http://api.jquery.com/category/events/event-object/](http://api.jquery.com/category/events/event-object/)

它通常用于防止某个事件的默认行为，或阻止该事件传播到父对象：

```
function(e){
     e.stopPropagation();
     e.preventDefault();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T09:18:05.163

第`event`一个示例中的 是未使用的参数。

jQuery 将各种参数传递给每个事件处理程序 - 您可以在文档中找到这些参数的详细信息（例如[http://api.jquery.com/click/](http://api.jquery.com/click/)）。

由于您不需要使用该`event`对象（或`e`, 或`g`- 您可以为参数指定任何您想要的名称），那么您是否包含它并不重要

但是，如果您出于某种原因需要使用处理程序（例如调用`event.preventDefault()`以防止发生默认单击行为），那么您需要包含它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-26T09:19:10.000

jQuery 将 eventObject 传递给您的示例中未使用的处理程序/回调函数。
您可以阅读有关 JQuery 中的 eventObject 的[更多信息。](http://api.jquery.com/category/events/event-object/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-26T10:11:17.973

**事件**：JavaScript 中的事件是在网页中或网页上发生的事情。

**事件示例：** 鼠标单击

网页加载

将鼠标悬停在网页上的热点上，也称为悬停

在 HTML 表单中选择输入框

按键等...

**Jquery 中的事件**

使用 e 只是事件的缩写。您可以使用任何变量说 g 而不是 e

```
 $('#xyz_id').click(function(g){
   var clicked_target = g.target;
 }); 
```

您可以进一步查看 jquery 中的事件

[http://api.jquery.com/category/events/event-object/](http://api.jquery.com/category/events/event-object/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-26T09:23:37.567

event 参数是一个可选参数，它可以是任何有效的变量名。根据您的要求，您可以通过或忽略它。

访问[http://api.jquery.com/click/](http://api.jquery.com/click/)了解更多信息。

```
.click( handler(eventObject) )

handler(eventObject)A function to execute each time the event is triggered.
version added: 1.4.3.click( [eventData], handler(eventObject) )

eventDataA map of data that will be passed to the event handler.

handler(eventObject)A function to execute each time the event is triggered.
version added: 1.0.click() 
```

# codeigniter - 如何使用 Codeigniter 从访问令牌中获取 Facebook 用户详细信息？

> ID：13084062
> 
> 赞同：0
> 
> 时间：2012-10-26T09:15:34.730
> 
> 标签：codeigniter, facebook-graph-api, facebook-opengraph

我真的很难理解这里发生了什么。我可以在 OpenGraph 测试器中很好地获取用户详细信息，或者只是点击 URL [https://graph.facebook.com/me?access_token=VALID_TOKEN](https://graph.facebook.com/me?access_token=VALID_TOKEN)或使用 file_get_contents，但是在尝试 Codeigniter Facebook 库时出现错误*“活动访问令牌必须使用...”*，如果我只是尝试 CURL GET，我不会得到任何输出。我知道 access_token 是有效的，为什么他们不工作？总体目标是从 iOS App 获取 access_token，并使用 og.likes 通过 Web 服务器使用它来进行 Like。

**我的测试功能：**

```
function me_test(){
    $access_token = "VALID_TOKEN";
    $url = 'https://graph.facebook.com/me?access_token=';
    $url_full = $url.$access_token;

    $result = file_get_contents($url_full);
    echo $result;

    // Try Codeigniter Facebook Library
    try {
        $user = $this->facebook->api('/me?access_token='.$access_token);
    } catch (Exception $e) {
        print_r($e);
    }

    // Codeigniter CURL Library
    $this->load->library('curl');  
    echo $this->curl->simple_get($url_full);
    $info =  $this->curl->info;
    print_r($info);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T15:13:34.980

我也遇到了这个问题，并找到了获取用户数据的替代方法。你可以试试这个

```
function me_test(){
    $userId = $this->facebook->getUser(); //This will return the current user id

    // Try Codeigniter Facebook Library
    try {
        $user = $this->facebook->api('/'.$userId);
        //When you pass the userid you dont need to provide access token
    } catch (Exception $e) {
        print_r($e);
    }    
} 
```

# database - 具有大数据列的单表或多表哪个更有效？（休眠 - 数据库）

> ID：13084063
> 
> 赞同：0
> 
> 时间：2012-10-26T09:15:39.260
> 
> 标签：database, hibernate, database-design, relational-database, database-optimization

我的 Web 应用程序是在 Grails 中实现的。

我的情况是我有一个包含更多列的域类（休眠类），其中一些是大字符串，最多 4000 个字符。

例如 ：

```
String description // max 4000
// column2, column3, etc 
```

现在我必须为这些元素实现一个多语言数据库，我的策略是为每种语言设置一个字段。

```
String description_en_US
String description_de_DE 
```

我的问题是，如果我为每种语言都有一个单独的表，或者将它保存在一个大表中，是否会更有效。这个问题有两个部分。首先，如果它在加载数据时使用大内存，那么对于hibernate，哪个更有效，第二，对于数据库，哪个更有效？

以后我可能会拥有超过 10 种语言。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T10:16:19.083

我之前处理过类似的情况，我们有一个包含一些值的表并且需要以多种语言存储它们的翻译值。经过多次讨论和头脑风暴，我们最终确定了以下方法。

```
Table1: MainTable 

     id, Description, Column1, column2 ......

Tables2: MainTransTable

     id, MainTable_id (FK), Language, description_trans 
```

所以它将是 MainTable 实体，它将具有 MainTransTable 实体的集合（一对多关系）。每个 MainTransTable 将根据 Language 列以给定语言表示 MainTable 的翻译版本

```
Advantages:
- In future if you want to add value for another language, then you just need to add another row in MainTransTable
- Currently you are only translating only one column. So in future if you decide to translate any other columns,  you can use same table structure with new trans column added in trans table 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T11:24:49.333

I cannot answer the question but I would strongly recommend not using a field for a language but another table with languages and references to this table. This is because if you ever have to add another language you don't have to change the structure of the existing tables but only add another row to the languages table and can use the key as foreign key in the description table. Long strings aren't the problem I think. How many entries to the description table do you expect to maintain?

# delphi - 导入 Exchange Web 服务 (EWS) wsdl 文件时如何修复未解析的类型？

> ID：13084064
> 
> 赞同：3
> 
> 时间：2012-10-26T09:15:40.290
> 
> 标签：delphi, wsdl, delphi-xe2, exchangewebservices

从[https://ourmail.server/ews/services.wsdl](https://ourmail.server/ews/services.wsdl)导入 wsdl 文件时，我最初在生成的服务中得到了大量“WSDL 文档中引用的以下类型在此文件中未表示”。帕斯
然后我将 wdsl 文件下载到磁盘，看到它引用了[http://schemas.microsoft.com/exchange/services/2006/messages](http://schemas.microsoft.com/exchange/services/2006/messages)和[http://schemas.microsoft.com/exchange/services/2006/types](http://schemas.microsoft.com/exchange/services/2006/types)，下载[https://ourmail.server/ews/types.xsd](https://ourmail.server/ews/types.xsd)和[https://ourmail.server/ews/messages.xsd](https://ourmail.server/ews/messages.xsd) 并修改 services.wdsl 的开头

```
<?xml version="1.0" encoding="UTF-8"?>
<wsdl:definitions xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="http://schemas.microsoft.com/exchange/services/2006/messages" xmlns:s="http://www.w3.org/2001/XMLSchema" targetNamespace="http://schemas.microsoft.com/exchange/services/2006/messages" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:t="http://schemas.microsoft.com/exchange/services/2006/types">
    <wsdl:types>
        <xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <xs:import namespace="http://schemas.microsoft.com/exchange/services/2006/messages" schemaLocation="messages.xsd"/>
        </xs:schema>
    </wsdl:types> 
```

到：

```
<?xml version="1.0" encoding="UTF-8"?>
<wsdl:definitions xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="http://schemas.microsoft.com/exchange/services/2006/messages" xmlns:s="http://www.w3.org/2001/XMLSchema" targetNamespace="http://schemas.microsoft.com/exchange/services/2006/messages" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:t="http://schemas.microsoft.com/exchange/services/2006/types">
    <wsdl:types>
        <xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <xs:import namespace="http://schemas.microsoft.com/exchange/services/2006/messages" schemaLocation="file://d:/testing/web/exchange web services/types.xsd"/>
            <xs:import namespace="http://schemas.microsoft.com/exchange/services/2006/messages" schemaLocation="file://d:/testing/web/exchange web services/messages.xsd"/>
        </xs:schema>
    </wsdl:types> 
```

现在生成的 services.pas 包含（仅）这些错误：

```
// ************************************************************************ //
// The following types, referred to in the WSDL document are not being represented
// in this file. They are either aliases[@] of other types represented or were referred
// to but never[!] declared in the document. The types from the latter category
// typically map to predefined/known XML or Embarcadero types; however, they could also
// indicate incorrect WSDL documents that failed to declare or import a schema type.
// ************************************************************************ //
// !:double          - "http://www.w3.org/2001/XMLSchema"[Gbl]
// !:duration        - "http://www.w3.org/2001/XMLSchema"[Gbl]
// !:time            - "http://www.w3.org/2001/XMLSchema"[Gbl]
// !:base64Binary    - "http://www.w3.org/2001/XMLSchema"[Gbl]
// !:boolean         - "http://www.w3.org/2001/XMLSchema"[Gbl]
// !:int             - "http://www.w3.org/2001/XMLSchema"[Gbl]
// !:string          - "http://www.w3.org/2001/XMLSchema"[Gbl]
// !:language        - "http://www.w3.org/2001/XMLSchema"[Hdr][Gbl]
// !:dateTime        - "http://www.w3.org/2001/XMLSchema"[Gbl]
// !:lang            - "http://www.w3.org/2001/XMLSchema"[GblAttr]
// !:nonNegativeInteger - "http://www.w3.org/2001/XMLSchema"[Gbl]
// !:anyURI          - "http://www.w3.org/2001/XMLSchema"[Gbl]
// !:short           - "http://www.w3.org/2001/XMLSchema"[Gbl] 
```

我可以添加什么“xs:import”行来解决这些问题？
我已经搜索了 W3C 的 datatypes.xsd 和 structure.xsd 并尝试了相同的方法，但我无法让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T11:08:21.260

有一个[用于 Delphi 和 Free Pascal 的 Web 服务工具包](http://wiki.freepascal.org/Web_Service_Toolkit)，它也有一个 WSDL 导入器。

也许这个能够处理 WSDL，我会试一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T12:23:06.790

事实证明，文件中的那些“未表示的类型”很好。似乎“后一种类型的类型通常映射到预定义/已知的 XML 或 Embarcadero 类型”对于这些类型中的大多数来说正是这种情况。像 nonNegativeInteger 和 Base64Binary 这样的“奇怪”的没有在源代码的其他任何地方使用。

补充一点：我在指定初始 WDSL 时出错。该 URL 给出了一个证书错误，导致无法导入依赖文件。一旦我尝试了没有证书错误的备用 URL，[https](https://webmail.ourmailserver.nl/ews/messages.xsd) ://webmail.ourmailserver.nl/ews/messages.xsd和[https://webmail.ourmailserver.nl/ews/types.xsd](https://webmail.ourmailserver.nl/ews/types.xsd)被正确导入，我不再需要从磁盘执行此操作。

由于以下构造，生成的文件最初不会编译：

```
type

ProtectionRuleAllInternalType = string;      
ProtectionRuleTrueType = string;   

ProtectionRuleConditionType = class(TRemotable)
private
  FAllInternal: ProtectionRuleAllInternalType;
  FAllInternal_Specified: boolean;
  procedure SetAllInternal(Index: Integer; const AProtectionRuleAllInternalType: ProtectionRuleAllInternalType);
public
published
  property True: ProtectionRuleTrueType;
end;

procedure ProtectionRuleConditionType.SetAllInternal(Index: Integer; const AProtectionRuleAllInternalType: ProtectionRuleAllInternalType);
begin
  FAllInternal := AProtectionRuleAllInternalType;
  FAllInternal_Specified := True;
end; 
```

在 setter 中，这意味着布尔值，但编译器认为它是已发布的正确命名的 True，并将发出“不兼容的类型”。我更改了“FAllInternal_Specified := True;” 到“FAllInternal_Specified := System.True;”

同样，有两个已发布的属性 Create，编译器认为这些是覆盖基调用中的构造函数。我将它们的名称更改为 MyCreate。

这使得生成的文件编译。

# c# - 在 Windows 8 中使用 DataReader 加载二进制文件

> ID：13084066
> 
> 赞同：1
> 
> 时间：2012-10-26T09:15:45.997
> 
> 标签：c#, windows, file-io, binaryfiles, datareader

我正在尝试将我的一个旧游戏转换为 Windows 8，但我的文件加载遇到了很多麻烦。我正在尝试使用 DataReader 进行简单测试，但没有得到正确的值。

首先我这样写：

```
StorageFolder folder = ApplicationData.Current.LocalFolder;
        StorageFile file = await folder.CreateFileAsync("file.dat",CreationCollisionOption.ReplaceExisting);

        using (IRandomAccessStream fileStream = await file.OpenAsync(FileAccessMode.ReadWrite))
        {
            using (IOutputStream outputStream = fileStream.GetOutputStreamAt(0))
            {
                using (DataWriter writer = new DataWriter(outputStream))
                {
                    try
                    {
                        writer.UnicodeEncoding = UnicodeEncoding.Utf8;
                        writer.ByteOrder = ByteOrder.LittleEndian;
                        writer.WriteInt32(1);
                        writer.WriteInt32(2);
                        await writer.StoreAsync();
                        writer.DetachStream();
                    }
                    catch (IOException)
                    {

                    }    
                }
            }
        } 
```

然后我读

```
 StorageFolder folder = ApplicationData.Current.LocalFolder;
        StorageFile file = await folder.GetFileAsync("file.dat");

        using (var fileStream = await file.OpenReadAsync())
        {
            using (IInputStream inputStream = fileStream.GetInputStreamAt(0))
            {
                using (DataReader reader = new DataReader(inputStream))
                {
                    reader.UnicodeEncoding = UnicodeEncoding.Utf8;
                    reader.ByteOrder = ByteOrder.LittleEndian;
                    await reader.LoadAsync((uint)fileStream.Size);
                    var number = reader.ReadInt32();
                    var number2 = reader.ReadInt32();
                    reader.DetachStream();
                }
            }
        } 
```

但是当我阅读时，我没有得到 1 和 2，只有两个非常大的数字。所以，我错过了这个现在你是怎么做的？我还试图找出使用字符串的最佳方法，我想现在也写字节长度，因为它在我阅读时要求“codeUnitCount”吗？

似乎一切都比旧的二进制阅读器退了一步。

# android - 如何在单击按钮时使视图可见，并在再次单击按钮时使该视图不可见？

> ID：13084068
> 
> 赞同：2
> 
> 时间：2012-10-26T09:15:47.933
> 
> 标签：android

我有一个在活动开始时不可见的布局。当我单击按钮时，布局变得可见。我的要求是当我第二次单击按钮时，布局应该是不可见的。我知道这是一个愚蠢的问题，但是因为我是android新手，所以我无法弄清楚。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-26T09:19:09.767

尝试以下代码来切换视图的可见性：

```
v.setVisibility(v.getVisibility() == View.INVISIBLE ? View.VISIBLE
                : View.INVISIBLE); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T09:45:20.403

您也可以使用布尔 FLAG 来实现。

例如声明

```
boolean visibility_Flag = false;

button..setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {

                                     if(visibility_Flag){
                                          YourView.setVisibility(View.INVISIBLE);
                                         visibility_Flag = false;
                                      } else {
                                              YourView.setVisibility(View.VISIBLE);
                                         visibility_Flag =true;                               
                                      }

                                    }
                            }); 
```

# iphone - 我可以创建一个仅适用于 iPhone 5 的应用程序吗？

> ID：13084074
> 
> 赞同：2
> 
> 时间：2012-10-26T09:16:09.197
> 
> 标签：iphone

我是一名游戏开发人员，我想创建一款为 iPhone5 屏幕定制开发的游戏。

我想让它在应用商店中仅适用于 iPhone5 设备。

这可能吗？如何？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T09:39:17.400

不可能。在 App Store 中，您只能限制设备的**iOS**版本。iOS5、iOS6、...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T09:23:25.587

我认为这是不可能的。

为您的应用程序设置要求的方式（可以从 iOS App Store 强制执行）是 Info.plist 文件的[UIRequiredDeviceCapabilities](http://developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html#//apple_ref/doc/uid/TP40009252-SW3)键，并且没有特定于 iPhone 5 的内容（最接近的要求是*bluetooth-le*，但是具有此功能的最低 iPhone 是 iPhone 4S）。

# javascript - 用于 Web 应用程序开发的与服务器端对象的两种通信方式

> ID：13084079
> 
> 赞同：5
> 
> 时间：2012-10-26T09:16:27.433
> 
> 标签：javascript, node.js, web-applications

**背景**

我的背景是使用 C++ 进行嵌入式设备和桌面的大规模面向对象中间件和应用程序开发。现在我们需要为我们的初创公司创建一个大规模的网络应用程序。

* * *

**问题**

基于请求-响应和基于连续轮询的当前 Web 开发框架看起来非常原始、低效。

我正在寻找完全服务器端的面向对象和基于事件的编程。这是一个例子吧，

服务器上有一个名为**employeeManager**的持久对象，

**这个对象的方法**，

```
empList getAllEmployeeList();  
empList getEmployeeOfDepartment(string strDept);  
/*Some more */ 
```

**此对象的事件**

```
employeeAdded(empID);  
employeeEdited(empID);  
employeeRemoved(empID);  
/*Some more */ 
```

现在，客户端javascript应该能够调用这个（服务器端）对象的方法，并且应该能够接收这个对象的事件。我们可以在异步模式下获得方法调用的结果。框架还应该提供一种方法，以便视图（或 html-js 页面）可以注册所需的服务器端事件。

是否有适用于这种方法的框架。在socketIO之上有这样的东西吗？有什么框架可以在客户端 javascript 和服务器端对象之间提供良好的双向 RPC 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T09:25:30.467

[NodeJS](http://nodejs.org/)和[sockets.io](http://socket.io/)。这些可以帮助达到预期的效果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T08:56:52.193

尝试以下组合：

Node + socket.io + Backbone.Model + 一点想象力。

我认为缺少的部分是一个可以在服务器端和客户端使用的模型结构。该模型需要在服务器和客户端之间同步状态。

这是一篇我觉得很有趣的文章，也许你可以使用所描述的技术？

文章：

[http://blog.andyet.com/2011/feb/15/re-using-backbonejs-models-on-the-server-with-node/](http://blog.andyet.com/2011/feb/15/re-using-backbonejs-models-on-the-server-with-node/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-29T09:14:36.430

[Meteor](http://meteor.com/)是一个基于 Node.js 的框架，它使用 sock.js 进行 websocket 通信，使用 MongoDB 作为面向水平可扩展应用程序的数据库。在客户端-服务器同步方面，Meteor 几乎可以为您完成所有繁重的工作——您无需为数据库同步编写任何代码。结果是一个最小的代码库，主要是应用程序的逻辑，而不是 req/resp 开销。您可以在这里查看示例：http: [//meteor.com/examples/leaderboard](http://meteor.com/examples/leaderboard)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-29T13:30:44.380

如果您熟悉 C++，您可能需要查看[G-WAN](http://gwan.com/)。他们有一个使用 Comet 的很好的例子（你在找什么），也有 Node.JS 包装器。

G-WAN 还允许使用您需要的任何语言编写客户端小程序。因此，对您而言，C++ 可能正是您正在寻找的。

这是一个非常可扩展的 Web 应用程序服务器。从我看到的所有基准测试来看，Node.JS 不能很好地适应高并发（我可能错了，如果我错了，请告诉我，并提供信息）。话虽如此，我所做的事情与您所说的非常相似。我所要做的就是编写一个非常简单的包装器，将 JS 翻译成我当时使用的任何语言（对我来说，我用 PHP、MivaScript、SMT 和 C 完成了它）。

但关键（对我来说）是使用 Comet，以减少不必要的服务器轮询。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-30T10:38:05.410

如果您想要跨语言 RPC，您可能会发现[Apache Thrift](http://thrift.apache.org/)很有用。我相信有一个 Javascript 客户端（但从未使用过它）。正如许多其他人指出的那样，您可以在 Socket.IO 之上构建一个 RPC 框架，但这感觉就像把一只猫画成一头牛……即有趣，但不是特别高效

我确定您已经或有一些遗留约束，但如果您还没有，我会花点时间考虑一下 RPC 是否真的是您想要使用的模型。RPC 泄漏地抽象了网络延迟的存在，因此将一些不稳定的假设纳入了应用程序的基础。一般来说，有一个相当简短且可读[的 RPC 评论](http://www.cs.vu.nl/~ast/publications/euteco-1988.pdf)（至少由[AST 撰写](https://en.wikipedia.org/wiki/Andrew_S._Tanenbaum)）可能值得一读。

# java - struts2中的文件上传

> ID：13084081
> 
> 赞同：4
> 
> 时间：2012-10-26T09:16:35.623
> 
> 标签：java, html, jsp, file-upload, struts2

我正在尝试使用 struts2 上传文件。

在jsp页面中有一个上传文件的按钮和一个`Submit`按钮。程序中没有显示错误消息，但是当我单击`Submit`按钮时没有任何反应。请参阅下面的代码：

**动作类**

```
package com.scrolls.action;

import com.opensymphony.xwork2.ActionContext;
import com.opensymphony.xwork2.ActionSupport;
import java.io.File;
import java.util.Map;
import org.apache.commons.io.FileUtils;

public class UploadAction extends ActionSupport {

  private File upload;
  private String uploadContentType;
  private String uploadFileName;

  public String fileUpload() {
      try {
          String fullFileName = "c:/sample/mystruts/myfile.txt";
          File theFile = new File(fullFileName);
          FileUtils.copyFile(upload, theFile);
      } catch (Exception e) {
          System.out.println(e.toString());
          return ERROR;
      }

      return SUCCESS;
  }

  // Plus public getters/setters for upload properties.
} 
```

**JSP**

```
<%@taglib uri="/struts-tags" prefix="s" %>
<html>
    <head>
        <s:head theme="ajax" />
    </head>

    <body>
        <s:form action="doUpload.action" enctype="multipart/form-data"/>
        <s:datetimepicker name="date" displayFormat="yyyy-MM-dd" />
        <s:file name="upload" />
        <s:submit value="submit"/>
    </body>
</html> 
```

**Struts 配置**

```
<struts>
  <package name="register3" extends="struts-default">
    <action name="doUpload" class="com.scrolls.action.UploadAction" method="fileUpload">
      <result name="success">/suc.jsp</result>
      <result name="error">/fail.jsp</result>
    </action>
  </package>
</struts> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T09:53:02.780

你有一个自我关闭的表格......

试试这样：

```
<s:form action="doUpload.action" 
        method="POST" 
        enctype="multipart/form-data" >
    <s:datetimepicker label="Select Date" 
                     name="date" 
                     displayFormat="yyyy-MM-dd"  
                     required="true" />
    <s:file label="File:" name="upload" />
    <s:submit value="submit" />
</s:form> 
```

感谢 Anu 的更正，+1...

# c# - 在 btnSave_Click 中处理了 NoNullAllowedException

> ID：13084083
> 
> 赞同：0
> 
> 时间：2012-10-26T09:16:45.150
> 
> 标签：c#, c#-4.0

1.  在 btnSave_Click 事件中处理了 NoNullAllowedException
2.  我在 SQL 2005 中有四列 DealerId、名称、地址、电话号码
3.  如果我单击“保存”按钮，我会收到此错误：**“DealerID”列不允许空值**

![](../Images/66241793a126d6773e6af542382e54b5.png)

错误信息图片：

![](../Images/7ef2482cbb5ca00c760f4941ddab8531.png)

```
 public partial class frmDealerForm : Form
    {
    DataTable t;
    DataRow r;

    public frmDealerForm()
    {
        InitializeComponent();           
    } 

    private void btnSave_Click(object sender, EventArgs e)
    {
        t = kalliskaBillingDataSet.Tables["DealerDetail"];
        r = t.NewRow();
        r[0] = txtdealerID.Text;
        r[1] = txtname.Text;
        r[2] = txtaddress.Text;
        r[3] = txtphoneno.Text;
     //Column 'DealerID' does not allow nulls//
        t.Rows.Add(r);
        dealerDetailTableAdapter.Update(kalliskaBillingDataSet);
        txtdealerID.Text = System.Convert.ToString(r[0]);
        MessageBox.Show("Data Saved", "DealerDetail", MessageBoxButtons.OK,  MessageBoxIcon.Information);

    }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T09:21:01.043

您可以尝试改用以下代码：

```
 r[0] = txtdealerID.Text ?? String.Empty;
    r[1] = txtname.Text ?? String.Empty;
    r[2] = txtaddress.Text ?? String.Empty;
    r[3] = txtphoneno.Text ?? String.Empty; 
```

这将确保它不为空。

另外，请确保索引正确。0,0,1,2 似乎是错误的。

此外，如果您使用 ORM（Linq to SQL，Entity Framework），请确保它已更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T09:24:39.203

在您的数据表上，DealerId 列设置为属性

`DealerId.AllowDBNull = False`.这就是您收到该错误的原因。

您可能正在为 r[0] 传递一个空值，当设置了上述属性时，您不能这样做。

# css - 引导词缀行高与导航不准确

> ID：13084084
> 
> 赞同：1
> 
> 时间：2012-10-26T09:16:46.840
> 
> 标签：css, twitter-bootstrap, less, twitter-bootstrap-rails

我正在使用[bootstrap affix js 插件](http://twitter.github.com/bootstrap/javascript.html#affix)，效果很好。我遇到的问题是，当我将正文更改为使用自定义字体（[谷歌：Lato](http://www.google.com/webfonts/specimen/Lato)）时，它会完全关闭锚点位置。

词缀链接导致页面上的位置不正确，并且页面在滚动时不再与词缀侧边栏对齐。它总是关闭 100px 左右。

IE。

```
body { font-family: 'Lato', helvetica, arial, sans-serif; color: #221e1e; font-weight: 300; line-height: 150%; } 
```

我确信还有另一种方法可以补偿新的较小字体或行高，但我还没有找到。

如果我将整个身体的 line-height 提高到 300，它可以正常工作，只是间距很糟糕。因此，我尝试仅在包含锚的标题上调整行高。

```
h2 .mw-headline { line-height: 330%; } 
```

它几乎可以工作，除了它在第一个链接上仍然关闭并且感觉有点骇人听闻。我确信有一种适当的方法来处理这个问题，我只是不确定那是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T11:13:52.067

如果你使用 less 或 sass，你可以使用 Bootstrap 的自定义变量来解决这个问题。

在您的情况下，它类似于：

```
@baseFontFamily: 'Lato', helvetica, arial, sans-serif;
@textColor: #221e1e;
@baseLineHeight: 20px; 
```

在此处查找更多变量：http: [//twitter.github.com/bootstrap/customize.html](http://twitter.github.com/bootstrap/customize.html)

# wix - 提升的即时自定义操作

> ID：13084104
> 
> 赞同：2
> 
> 时间：2012-10-26T09:17:52.750
> 
> 标签：wix

我有一个请求，我知道很多人会大声疾呼，但我没有其他办法。在我的 WIX 设置中，我有一个对话框，它使用设置中设置的属性来确定与我们的算法相关的产品名称（带有版本类型等）以及需要生成的锁码。基于这些，用户输入他们的解锁密钥，自定义操作从所有三个文本框中提取详细信息以确保其正确。我没有编写创建这些的算法，不幸的是无法更改它。

我的问题是我需要能够在此对话框之前在注册表中创建产品密钥，以便我的锁码算法可以从中读取。所以基本上我需要提升我的自定义操作。我在某处读到有人实现了一个自定义操作来调用 msiexec，但现在我找不到它并且不知道如何创建它。有没有人遇到过同样的问题？我一直在阅读人们有但我似乎无法找到他们的解决方案，或者即使有一个。提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T12:17:45.570

不能提升即时自定义操作。期，故事结束。＃事实

你能做什么？

1) 使用一个 setup.exe 引导程序，该引导程序显示为需要管理员和 MSI 中的启动条件，强制它由引导程序启动。（引导程序将属性传递给 MSI SETUPEXEDRIVEN=1 是 InstallShield 所称的。）这可确保提升整个 UI 序列。（这不是最佳实践，但我将其发布给您。）

2）写信给HKCU而不是HKLM（可能需要重构许可证代码，但嘿，无论如何这是一个损坏的设计。）

3) 将安装程序接口重构为许可 API。我以前做过。我曾经在一家公司工作，该公司希望安装程序调用 EXE 来验证许可证。一个大问题是 EXE 不在进程中，无法与安装程序通信。所以他们开始向注册表写入“ISVALID”，然后我被期望在 EXE 周围编写一个 VBScript 来刷新值，调用 exe 然后检查值并设置 MSI 属性。嗯，你能说#FAIL吗？最佳解决方案是强制开发团队为许可代码创建一个 API，我可以直接从标准 MSI 自定义操作调用该 API，不需要提升权限或任何其他黑客行为。

# c++ - C ++：类-重载的构造函数-单个变量？

> ID：13084105
> 
> 赞同：1
> 
> 时间：2012-10-26T09:17:52.077
> 
> 标签：c++, class, constructor

我不知道如何问这个，但希望有人能理解。可以说我有3个不同的课程。A 类、B 类和 C 类。 C 类应将 A 类或 B 类作为构造函数中的参数，并将其存储在私有变量中。

这对于重载的构造函数很容易。我的问题是 C 类如何根据使用的构造函数自动使用正确的类？（注意这两个类是相似的，但是来自不同的库，因此没有共享的基类）。这可能与模板吗？我对模板没有太多经验。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T09:20:50.507

是的，这可以通过模板实现：

```
#include <iostream>

template<class T>
class C {
public:
    C(T const& ref) : ref(ref) {}
    void doStuff() const {
        ref.doStuff();
    }
private:
    T ref;
};

class A {
public:
    void doStuff() const {
        std::cout << "A::doStuff" << std::endl;
    }
};

class B {
public:
    void doStuff() const {
        std::cout << "B::doStuff" << std::endl;
    }
};

int main() {
    C<A> foo((A()));
    foo.doStuff();

    C<B> bar((B()));
    bar.doStuff();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T09:21:32.200

您可以使用模板轻松完成：

```
class A;
class B;

template<class AorB>
class C
{
public:
    C(AorB aorb)
        : aorb_(aorb)
        { }

private:
    AorB aorb_;
}; 
```

这样做是在类内部`C`，标识符`AorB`可以用作任何其他类，实际上它甚至不必是任何类的实例，`A`也`B`可以是*任何*类。

可以这样使用：

```
A myA;
B myB;

C<A> myCWithA(myA);
C<B> myCWithB(myB); 
```

* * *

然而，在使用模板创建类时，您必须记住一件事：规范和实现不能再拆分为单独的头文件和源文件。所有代码都必须在头文件中可用。

成员函数的语法也有些不同。

例子：

```
template<class T>
class C
{
public:
    ...

    void someFunction();
};

template<class T>
C<T>::someFunction()
{
    ...
} 
```

# python - 使用 pyparsing 对结果进行类型检查

> ID：13084112
> 
> 赞同：7
> 
> 时间：2012-10-26T09:18:12.577
> 
> 标签：python, parsing, pyparsing

我是使用 pyparsing 的新手，但我找不到如何解决这个非常简单的问题。我（目前）有一个简单的语法，但是我找不到根据我在语法中定义的类型来区分解析结果的方法。

也许用一个例子来解释它会更容易。假设这个元素：

```
elem = foo | bar 
```

当我调用时：

```
elem.parseString("...") 
```

假设字符串与我的语法匹配，我如何区分它是否与“foo”或“bar”匹配？我得到一个 ParseResults 的实例对象，没有这样的元数据。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T09:30:22.337

您可以为它们指定一个名称（使用 Literal 的复杂示例）：

```
foo = Literal('foo').setResultsName('foo')
bar = Literal('bar').setResultsName('bar')
grammar = foo | bar
parsed = grammar.parseString('bar foo')
print parsed
# (['bar'], {'bar': [('bar', 0)]})
print parsed.asDict()
# {'bar': 'bar'} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-29T15:57:39.893

Jon Clements 的回答是正确的，这里只是一些额外的代码来支持他的帖子，展示了如何使用`getName()`来检测你得到的术语：

```
>>> from pyparsing import Literal, OneOrMore, Group
>>> bar = Literal('bar').setResultsName('BAR')
>>> foo = Literal('foo')('FOO') # using short form
>>> grammar = OneOrMore(Group(foo | bar))
>>> parsed = grammar.parseString('bar foo')
>>> for p in parsed: print p[0], p.getName()
... 
bar BAR
foo FOO 
```

# java - Jtable 中的文本文件

> ID：13084113
> 
> 赞同：0
> 
> 时间：2012-10-26T09:18:23.203
> 
> 标签：java, jtable

我有一个从文件夹中读取多个文本文件的代码，我需要将它们放在一个表中。到目前为止，一切都很好，除了我的文本文件中的每一行都显示在不同的表中。我知道问题是表格分别接收每一行。我尝试创建一个对象并填充它，然后在表格内部调用，但我无法让它工作，所以如果有人能告诉我解决方案会很棒。我还需要能够比较这些值并找到一个平均值，所以如果你有任何提示，那就太好了

这是我的文本文件的示例

```
17/10/2012 10:00:06.67 [RX] - E usbR<LF>
817EE765FF53-53<LF>
817AA765FF53-34<LF>
817CC765FF53-25<LF>
00<LF>
E qEnd<LF> 
```

这就是我需要在桌子上得到的

```
 ID             RSSI
817EE765FF53        53
817AA765FF53        34
817CC765FF53        25 
```

这是代码

```
import java.awt.BorderLayout;
import java.io.*;
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTable;

public class Foldersearch1

{

  public static void main(String[] args) 
  {
    // Directory path here
    String path = "C:/Users/Nikica/Desktop/text files"; 

    String files;
    File folder = new File(path);
    File[] listOfFiles = folder.listFiles(); 

    for (int i = 0; i < listOfFiles.length; i++) 
    {
      if (listOfFiles[i].isFile()) 
      {
        files = listOfFiles[i].getName();
        if (files.endsWith(".txt") || files.endsWith(".TXT"))
        {

          System.out.println(files);
          (); 

          String currentLine="";

          File textFile = new File(folder.getAbsolutePath() + File.separator + files); 
          try{
            // Open the file that is the first 
            // command line parameter
            FileInputStream fstream = new FileInputStream(textFile);
            try (DataInputStream in = new DataInputStream(fstream)) {
              BufferedReader br = new BufferedReader(new         InputStreamReader(in));
              String strLine;
              String line;
              //Read File Line By Line
              // int p=0;
              // Object[][] Table=null;
              while ((strLine = br.readLine()) != null)   {
                processLine(strLine);
                Table(strLine);

                // Print the content on the console
                //System.out.println (strLine);
              }

            }
          }catch (Exception e){//Catch exception if any
            System.err.println("Error: " + e.getMessage());
          }
        }
      }
    }
  }
  public static void processLine(String line) {
    // skip header & footer

    if (line.startsWith("17/10/2012 10:00:06.67 [RX] - E usbR<LF>") || line.startsWith("E qEnd<LF>")) {return;}

    String ID = line.substring(0, 12);
    String RSSI = line.substring(13, 15);

    System.out.println("ID [" + ID + "]\t RSSI [" + RSSI +"]");

  }
  public static void Table(String line) {
    JFrame frame = new JFrame("proba");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    if (line.startsWith("17/10/2012 10:00:06.67 [RX] - E usbR<LF>") || line.startsWith("E qEnd<LF>")) return;
    String ID = line.substring(0, 12);
    String RSSI = line.substring(13, 15);

    Object rowData[][] = { { ID, RSSI } };
    Object columnNames[] = { "ID", "RSSI" };
    JTable table = new JTable(rowData, columnNames);

    JScrollPane scrollPane = new JScrollPane(table);
    frame.add(scrollPane, BorderLayout.CENTER);
    frame.setSize(300, 150);
    frame.setVisible(true);
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T10:26:04.527

要使您的代码以最少的更改工作，请使用行数据创建一个向量，并使用构造函数 public JTable(Vector rowData, Vector columnNames)。以下代码片段应该让您了解如何执行此操作。

```
Vector<String> columnNames = new Vector<String>();
columnNames.add("ID");
columnNames.add("RSSI");

Vector<Vector<String>> rowData = new Vector<Vector<String>>();

for(int i=0; i<20; i++) {
    Vector<String> row = new Vector<String>();
    row.add("ID_" + i);
    row.add("RSSI_" + i);
    rowData.add(row);
}

JTable table = new JTable(rowData, columnNames); 
```

# android - Google Fusion Tables 和 SMS 通知

> ID：13084120
> 
> 赞同：0
> 
> 时间：2012-10-26T09:18:55.313
> 
> 标签：android, google-maps, sms, kml, google-fusion-tables

我有以下情况：当快递员（有移动设备，可以上网）距离收件人30分钟内时，通知（txt / sms）收件人。/使用谷歌融合表/。

这是可能的吗？一般来说，有人可以画出过程和模式吗？我不需要代码，只是想了解元素是如何连接的。Google Fusion 表格的指南/文章的链接可以与 SMS 通知连接，也可能很有用。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:25:37.457

我仍然不确定我是否理解您的要求，但也许这样的事情可以奏效。

您需要的组件：

1.  快递员手机上的一个软件可以跟踪他的位置。这可以自动完成，也可以通过快递员的显式操作完成（例如，[较新的浏览器允许获取地理位置](https://developers.google.com/maps/articles/geolocation)）。
2.  收件人的地址，将其存储在 Fusion Tables 中是有意义的。只需[告诉 Fusion Tables 对您客户的地址进行地理编码](http://support.google.com/fusiontables/answer/1012281)。
3.  确定“距收件人 30 分钟”的服务，也许这可以使用[Google Directions Service](https://developers.google.com/maps/documentation/javascript/directions)来完成。否则你可以定义一个距离（比如 20 公里）而不是一个时间，这样更容易实现
4.  您需要一项服务来发送文本/短信

通过这样的设置，您可以定期在 Fusion Tables 中对客户数据的[空间查询中使用快递员位置。](https://developers.google.com/fusiontables/docs/v1/sql-reference#Select)这将回答这样一个问题：*快递员 20 公里距离内是否有客户？*

如果是这种情况，您可以触发您的文本/短信服务来通知您的客户。

# c++ - 如何将 3D 矩阵存储在文本文件中，以便可以将其导入 Matlab？

> ID：13084124
> 
> 赞同：3
> 
> 时间：2012-10-26T09:18:59.017
> 
> 标签：c++, matlab, io

我有一个文本文件作为 c++ 程序的输出。它实际上是一个 3x100x200 元素矩阵。超过 200 个时间戳的 3x100 2d 矩阵。我想存储它，以便我可以将它加载到 Matlab 工作区中，然后在 3d 图中将其可视化。我无法弄清楚文本文件的结构。至于我应该在哪里放一个“[..]”，在哪里放“;” 并且其中有“”或“，”。

有人可以举个例子，以便我可以以这种方式从 c++ 代码中打印出文件

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T09:27:55.400

忘记文本文件。[相反，使用Matio 库](http://sourceforge.net/projects/matio/)编写`.mat`文件。这样，您将能够在需要时快速添加更多数据字段。

如果你真的想使用文本文件，你可以先写矩阵尺寸，然后是所有元素，最后按照[这里](https://stackoverflow.com/a/6367095/19254)的建议进行一些整形。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T11:07:49.767

我发现了一个没有使用任何额外库的 hack。我只是将每个二维矩阵输出为 outMat(:,:,matIndex) 并在循环中递增 matIndex 。然后我在 matlab 中将 .m 作为脚本运行。

```
void printArrs(){
    int i;
//  B(:,:,1) = [1 2 3; 4 5 6];
//  B(:,:,2) = [7 8 9; 0 0 0];
    ofstream outFile;
    outFile.open ("forPlot.m", ios::out | ios::app);
    matIndex++;
    outFile << "outMat(:,:," << matIndex << ") = [";
    for(i=0;i<fftLen;i++){
        outFile << Mag[0][i] << " ";
        outFile << Mag[1][i] << " ";
        outFile << Mag[2][i] << ";" << endl;
    }
    outFile << "];" << endl;
    outFile.close();
} 
```

谢谢大家的回答。对于某些答案，我猜我不够清楚，因为他们认为我想写“来自”Matlab 而不是“到”Matlab，而这是另一种方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T09:22:22.903

尝试谷歌搜索“.csv”以找出逗号分隔的变量文件是什么。这应该会有所帮助，如果我没记错的话，您可以将它们导入 Matlab。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-26T10:38:59.903

如果您*真的*想使用文本文件，尽管我建议您使用前面提到的 Matio 库，您可以通过将其重塑为 2D 来保存 3D 数组，并在阅读后将其重塑为 3d。看看这个简单的 MATLAB 代码。它将 3D 矩阵写入 csv 文件。写入后，csv 文件包含一个二维矩阵，其中第二维和第三维作为向量流式传输：

```
A = rand(3,10,10);
csvwrite('data.txt', A);

B = csvread('data.txt');
% B is now 3 x 100 matrix, so you need to reshape
B = reshape(B, 3, 10, 10); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-26T09:23:02.737

最好将其保存到 .mat 文件中。您不必以这种方式打扰文件结构。[请参阅保存](http://www.mathworks.nl/help/matlab/ref/save.html)功能
的文档。**编辑**：我误读了这个问题，没有意识到您正在尝试将矩阵保存在 C++ 中。我建议你听从 Pukku 的建议并使用 Matio 库。

 **要在 Matlab 中[加载](http://www.mathworks.nl/help/matlab/ref/load.html).mat 文件，只需使用

```
load('myfile.mat') 
```

这会将矩阵放在您的工作区中。**

# .net-assembly - FxCop 无法分析间接引用的程序集

> ID：13084137
> 
> 赞同：0
> 
> 时间：2012-10-26T09:19:31.647
> 
> 标签：.net-assembly, fxcop, metrics

Metrics.exe：错误：找不到引用的程序集“Exception.dll，版本=1.0.5289.9，Culture=neutral，publickeytoken=67er8..”。此程序集是分析所必需的，并由 \bin\cancel.dll 引用。

但是它试图引用的程序集（Exception.dll）是 GAC 的。即，存在于 C:\windows\assembly 中。

我有大约 300 个项目文件。将程序集复制到每个项目将是一个繁琐的过程。

有什么解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T04:47:33.143

*重要：检查程序集版本。

程序集 Exception.dll 是 GAC 中的旧版本。但是试图引用这个程序集的程序集是另一个版本。只需 GACd 更新版本的程序集 - GAC 中的 Exception.dll 即可：-)

# c# - 使用 c# 以编程方式更改 CSS 文件

> ID：13084138
> 
> 赞同：4
> 
> 时间：2012-10-26T09:19:36.977
> 
> 标签：c#, asp.net

Asp.net using c# 我是这种编程语言的新手，想知道是否可以改变

```
.main
{
    padding: 0px 12px;
    margin: 0px 0px 0px 0px;
    min-height: 630px;
    width:auto;
    background-image:url('background.png');
  } 
```

基于按钮单击的背景图像 URL.. 然后使用基于按钮单击的 C# 代码

```
protected void initiative_Click(object sender, ImageClickEventArgs e)
        {
            Session["agency"] = "Initiative";
        } 
```

但主要的是 CSS 文件喜欢到按钮单击所在的不同页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T09:57:05.527

**选项 1** 与其更改 CSS 文件，不如根据会话应用不同的类。

```
.main
{
    padding: 0px 12px;
    margin: 0px 0px 0px 0px;
    min-height: 630px;
    width:auto;
}

.agency1 { background-image: url('agency1.png'); }
.agency2 { background-image: url('agency2.png'); }
.agency3 { background-image: url('agency3.png'); } 
```

然后将两个类添加到您的 div

```
<div class="main <%=Session["agency"]%>"></div> 
```

**选项 2** 创建一个呈现特定 CSS 的通用处理程序并将其添加到您的页面

```
<link href="GenerateCss.ashx" rel="stylesheet" /> 
```

在您的 GenerateCss.ashx.cs 文件中，您将拥有类似这样的内容

```
 public void ProcessRequest(HttpContext context)
    {
        context.Response.ContentType = "text/plain";

        string image = "main";
        if (context.Session != null && context.Session["agency"] != null)
        {
            image = context.Session["agency"].ToString();
        }

        string result = ".main{padding: 0px 12px; margin: 0px 0px 0px 0px; min-height: 630px; width:auto; background-image:url('" + image + ".png');}";
        context.Response.Write(result);
    } 
```

**要非常小心，因为如果使用不当，这可能会使您遭受 XSS 攻击。** 您需要确保 session["agency"] 不是用户可控制的。我的意思是用户不能提供该值，因为这将允许他们在那里注入任何他们想要的东西。

我不推荐第二个选项，因为您将为每个请求调用它，并且当您可以将其设为静态时继续生成 CSS 并不是一个好主意。如果您可以使用选项1，我会说它会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T09:40:43.457

你可以有类似的东西：

```
<div class="main" id="mainContainer" runat="server"><asp:ContentPlaceHolder ID="MainContent" runat="server"/></div> 
```

在服务器端，执行以下操作：

```
mainContainer.Attributes.Add("style", "background-image('myImage.png')"); 
```

或者，更好的是，您可以更改 CSS 类：

```
mainContainer.Attributes.Add("class", "className"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T09:28:28.053

如果你真的需要修改 CSS，那么我可以推荐[这个 CSS parser](http://www.codeproject.com/Articles/20450/Simple-CSS-Parser)，它可以让你读入 CSS 文件，修改它，然后再写出来。但正如已经指出的，最好通过在相关 html 元素上设置样式来更改此客户端。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T09:26:51.497

只需制作另一个`CSS`类似于`.main`除了`background-image`属性的类

```
.someclass
{
    padding: 0px 12px;
    margin: 0px 0px 0px 0px;
    min-height: 630px;
    width:auto;
    background-image:url('newbackground.png');

} 
```

**例子：**

```
<div id="myDiv" runat="server" class="main"></div>

  protected void initiative_Click(object sender, ImageClickEventArgs e)
  {
     myDiv.CssClass="someclass"
  } 
```

**注意：您需要确保您的 div 具有 runat="server" 属性，以便可以从后面的代码访问。**

# jakarta-ee - Java ee 部署自定义配置文件

> ID：13084141
> 
> 赞同：0
> 
> 时间：2012-10-26T09:19:43.590
> 
> 标签：jakarta-ee, netbeans, glassfish, configuration-files

是否可以在不手动添加的情况下将自定义配置文件部署到 Web 应用程序服务器？我正在使用 glassfish 3.1.2.2 并作为 IDE netbeans 7.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T10:18:02.017

将其添加到`/web/WEB-INF`NetBeans 的“项目”视图中的“网页”下。

# rtc - 什么是“范围”存储库工作区？

> ID：13084143
> 
> 赞同：1
> 
> 时间：2012-10-26T09:19:47.227
> 
> 标签：rtc

什么是“范围”存储库工作区？

这是否意味着只有当前团队中的成员才能查看存储库，而不是项目区域中的每个人都可以查看存储库的“公共”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T09:33:57.607

Scoped 是我在创建 repo 工作区时总是推荐的：

它允许项目区域的其他成员通过将其添加到他们的流目标来访问您的 repo 工作区。

![回购工作区权限](../Images/a3986afb4da3f477c67544d6a2f8e831.png)

即使您没有在 Stream 上交付它们，这也允许他们从您的 repo 工作区接受变更集。
这是对 ClearCase 的“保留结帐”问题的一个很好的改变，当协作者不再存在并且文件被阻止时。
在这里，只要您签入了您的更改，即使您不在现场进行交付，这些更改也不会锁定在您的计算机中，而是可供其他成员使用。

这与作用域流目标不同。
并且 RTC4.0 引入了[Scope 对文件和文件夹的读取权限](https://jazz.net/downloads/rational-team-concert/releases/4.0?p=news#scm_readpermission)。

* * *

话虽如此，“公共”回购工作区有其用途（请参阅[此线程](https://jazz.net/forum/questions/24859/basics-purpose-of-a-public-repository-workspace)）：

> **使用公共存储库工作区的想法是为团队提供一个正常运行的开发环境**。
> 我不希望开发人员在其他人的支持下花费 2-3 个小时来设置工作区，以运行带有 J2EE 工件的 Web 应用程序。目前我们正在使用 MAVEN 构建应用程序并设置开发环境，我们正在努力解决它。
> 开发人员所需的大量知识以及尝试使用 MAVEN 自动配置 RAD 7.5 工作区并且是自己的脚本的方式。
> 
> 这个想法是使用所有必要的 RAD 7.5 工件（服务器、EAR 配置、Web 配置、项目之间的链接以及指向您不想在工作区中加载的组件的 MAVEN 存储库的链接）设置**预配置的公共存储库工作区。**
> 
> 对于我们的团队，我们可能有大约 8 个公共存储库工作区，其中一些只有前端项目，另一些只有后端项目，或者两者兼而有之，具体取决于我们的特定需求。
> 
> 开发人员早上来为他的任务选择合适的公共存储库工作区，并在 10 分钟内启动并运行。他可以看到其他人的持续变化，接受或不接受队友的变化。当然，从工作区可以在用于持续集成的流中交付更改。
> 我认为它很酷。

# c# - 如何在不刷新整个站点剃刀的情况下更新表格

> ID：13084145
> 
> 赞同：3
> 
> 时间：2012-10-26T09:19:50.737
> 
> 标签：c#, jquery, ajax, razor, asp.net-mvc-4

嗨，我在桌子上工作

如果不刷新站点，我无法自动更新表格。我需要一种轻松的方法

添加一行，删除一行，修改表格内容中的一行。

我的桌子是这样建造的。

```
{....}
@using (Html.BeginForm())
{
<fieldset>
    <legend>ShiftTypes</legend>
    <table class="EditableTable" id="EditableTableShiftTypes">
        <thead>
            <tr>
                <th>
                    #:
                </th>
                <th>
                    ShiftName:
                </th>
                <th>
                    ShiftCode:
                </th>
                <th>
                    Suplement:
                </th>
                <th>
                    ExtraSuplement:
                </th>
                <th>
                </th>
            </tr>
        </thead>
        <tbody>
            @foreach (BPOPortal.Domain.Models.ShiftTypeView type in Model.ShiftTypeList)
            {
                <tr>
                    <td>
                        @type.ID
                    </td>
                    <td>
                        @type.ShiftName
                    </td>
                    <td>
                        @type.Name

                    </td>
                    <td>
                        @type.Supplement

                    </td>
                    <td>
                        @type.OneTimePayment

                    </td>
                    <td>
                        <button>
                            Delete</button>
                    </td>
                </tr>
            }
            <tr>
                <td>
                    <label>
                    </label>
                </td>
                <td>
                    @Html.Editor("ShiftName")
                </td>
                <td>
                    @Html.Editor("ShiftCode")
                </td>
                <td>
                    @Html.Editor("Suplement")
                </td>
                <td>
                    @Html.DropDownList("ExtraSuplement", new SelectListItem[] { new SelectListItem() { Text = "yes", Value = "true", Selected = false }, new SelectListItem() { Text = "No", Value = "false", Selected = false } }, "--Choose--")
                </td>
                <td>
                    <button id="AddButton">
                        Add</button>
                </td>
            </tr>
        </tbody>
    </table>
    <button type="submit" id="Gem">
        Save</button>
</fieldset>
{....} 
```

我尝试按以下方式使用 Ajax，但它刷新了整个页面。

```
{....}
        var ID= 2;
        $("#AddButton").click(function(){
            var ShiftName= $('#ShiftName').attr('value');
            var ShiftCode= $('#ShiftCode').attr('value');
            var Suplement= $('#Suplement').attr('value');
            var ExtraSuplement= $('#ExtraSuplement').attr('value');

            $.ajax({
                url: '@Url.Action("AddData", "ShiftTypesConfiguration")',
                data: { ID: ID.toString(), ShiftName: $('#ShiftName').attr('value'), ShiftCode: $('#ShiftCode').attr('value'), Suplement: $('#Suplement').attr('value'), ExtraSuplement: $('#ExtraSuplement').attr('value') },
                type: 'POST',
                //                contentType: 'application/json; charset=utf-8;',
                dataType: 'json',
                success: function (response)
                {
                   function fnClickAddRow() {                       
                      $('#EditableTableShiftTypes').dataTable().fnAddData([
                     response.ID,
                     response.ShiftName,
                     response.ShiftCode,
                     response.Suplement,
                         response.ExtraSuplement,
                         "<button>Delete</button>"]); } 
                    }
            });
            ID++;
        });
{....}

</script> 
```

我在控制器中的方法应该处理请求。

```
public JsonResult AddData(string ID, string ShiftName, string ShiftCode, string Suplement, string ExtraSuplement)
    {
        TableViewModel tableViewModel = new TableViewModel();
        tableViewModel.ID = ID;
        tableViewModel.ShiftName= ShiftName;
        tableViewModel.ShiftCode= ShiftCode;
        tableViewModel.Suplement= Suplement;
        tableViewModel.ExtraSuplement= ExtraSuplement;

        return Json(tableViewModel);
    } 
```

但是它似乎不起作用现在我正在寻求想法和方法来使它更好/更容易/工作

**编辑**：看到过去错误的副本

**EDIT2：**我现在稍微改变了它我发现我的脚本运行方式有错误这是最新的。仍然存在问题，但至少现在我可以看到并描述错误。

这就是我现在改变的脚本

```
 $("#AddButton").click(function (event) {
    event.preventDefault();
    var ShiftName = $('#ShiftName').attr('value');
    var ShiftCode = $('#ShiftCode').attr('value');
    var Suplement = $('#Suplement').attr('value');
    var ExtraSuplement = $('#ExtraSuplement').attr('value');

    $.ajax({
        url: '@Url.Action("AddData", "ShiftTypesConfiguration")',
        data: { ID: ID.toString(), ShiftName: ShiftName, ShiftCode: ShiftCode, Suplement: Suplement, ExtraSuplement: ExtraSuplement },
        type: 'POST',
        //                contentType: 'application/json; charset=utf-8;',
        dataType: 'json',
        success: function (response) {
            function fnClickAddRow() {
                $('#EditableTableShiftTypes').dataTable().fnAddData([
                 response.ID,
                 response.ShiftName,
                 response.ShiftCode,
                 response.Suplement,
                 response.ExtraSuplement,
                 "<button>Delete</button>"]);
            }
        }
    });
    ID++;
}); 
```

现在在萤火虫的帮助下，我看到这些值又回到了页面上，但在我看到它们之前，页面已经刷新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T09:31:48.390

我不是在这里写代码，但这是你应该怎么做的。

在添加/编辑/删除对您的操作进行 ajax 调用。在您的操作中实施您的操作（添加/编辑/删除），并根据操作成功完成或由于某些错误而失败，返回一个真/假标志作为 json。

然后在ajax调用的成功函数`success: function (response){}`中，检查返回的值是真/假，表示成功还是错误。

然后使用一些 jquery，您可以从表中添加一行或删除一行。

查看这些链接：http: [//viralpatel.net/blogs/dynamically-add-remove-rows-in-html-table-using-javascript/](http://viralpatel.net/blogs/dynamically-add-remove-rows-in-html-table-using-javascript/)

# c - 内存集行为

> ID：13084147
> 
> 赞同：2
> 
> 时间：2012-10-26T09:19:53.207
> 
> 标签：c, string

我需要你的帮助来理解 memset 的行为。

```
char *data = malloc(40);
memset(data,1,40); 
```

当我看到数据内容时，它是 010101010101010 直到大小结束。然后我改为这个。

```
memset(data,~0,40); 
```

我看到正确的内容为 11111111 直到结束。将值设置为 1 和 ~0 之间有什么区别。谢谢你的时间。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-26T09:22:10.377

`memset`用您指定的值填充提供的内存区域的**每个字节**。请注意，只有最后一个参数的最低有效字节被用来填充内存块（即使它的类型是`int`）。

在您的第一种情况下，此字节是 0x01，而在第二种情况下，它是 0xFF（全为）。这就是为什么你正在观察这种差异。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T09:36:59.117

我认为您可能会将按位非 (~) 与逻辑非 (!) 混淆。

~0 反转所有位，给你 -1（所有位设置）
！0 会给你 1。

话虽如此，我看不到您可能会看到“0101 ...”和“1111 ...”，除非您无意中以十六进制给出第一个输出，而以二进制给出第二个输出。我希望看到“0101 ...”和“ffff ...”或“00000010000001 ...”和“1111111111111111 ...”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T09:53:57.820

另外，可以通过以下方式在gdb中进行验证。

代码：

```
#include <stdio.h>
#include <string.h>

int main ()
{
 char *data = malloc  (20); 
 memset (data, 1, 20);
 printf (".... %s ", data);

  memset ( data, ~0, 20);
  printf (" \n .... %s.. ", data );

} 
```

将断点设置为主。

GDB 输出：

```
Breakpoint 1, main () at mymemset.c:6
6    char *data = malloc  (20); 

(gdb) n
7    memset (data, 1, 20);
(gdb) n
8    printf (".... %s ", data);
(gdb) x/20b data
0x1001008a0:    0x01    0x01    0x01    0x01    0x01    0x01    0x01    0x01
0x1001008a8:    0x01    0x01    0x01    0x01    0x01    0x01    0x01    0x01
0x1001008b0:    0x01    0x01    0x01    0x01
(gdb) n
10    memset ( data, ~0, 20);
(gdb) n
11    printf (" \n .... %s.. ", data );
(gdb) x/20b data
0x1001008a0:    0xff    0xff    0xff    0xff    0xff    0xff    0xff    0xff
0x1001008a8:    0xff    0xff    0xff    0xff    0xff    0xff    0xff    0xff
0x1001008b0:    0xff    0xff    0xff    0xff
(gdb) Quit 
```

# javascript - 如何使用 html5 和 jquery 在网页中显示 pdf 内容？

> ID：13084148
> 
> 赞同：25
> 
> 时间：2012-10-26T09:19:55.773
> 
> 标签：javascript, jquery, html, pdf

如何在我的**div中显示****pdf**文档。我正在使用**HTML5**和[jquery](http://jquery.com/)来构建我的移动网站。我需要在[**Turnjs**](http://www.turnjs.com/) div 中显示我的 pdf 文档需要翻页并转到特定页面****[](http://www.turnjs.com/)****

 ******* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-26T09:28:27.940

```
<div>
<object data="test.pdf" type="application/pdf" width="300" height="200">
alt : <a href="test.pdf">test.pdf</a>
</object>
</div> 
```

阅读这个线程 - [http://www.webdeveloper.com/forum/showthread.php?152923-PDF-within-a-DIV](http://www.webdeveloper.com/forum/showthread.php?152923-PDF-within-a-DIV)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-10-13T02:46:26.127

You can use this code:

```
<embed src="http://domain.com/your_pdf.pdf" width="600" height="500" alt="pdf" pluginspage="http://www.adobe.com/products/acrobat/readstep2.html"> 
```

Or use Google Docs embeddable PDF viewer:

```
<iframe src="http://docs.google.com/gview?url=http://domain.com/your_pdf.pdf&embedded=true" 
style="width:600px; height:500px;" frameborder="0"></iframe> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-26T09:38:15.870

我敢说它的名字，以免受到谴责，但您可以使用 iframe 并允许浏览器提供导航。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-14T05:31:45.540

我所做的是将pdf拖到谷歌驱动器。然后，点击新的 pdf（它通常在谷歌驱动器的左上角），点击顶部的共享图标，转到**高级**，然后点击**更改**并确保点击了“公共”单选按钮。单击**保存**，然后单击**完成**。现在回到谷歌驱动器，点击pdf打开它，然后点击弹出图标（右上角，X关闭图标旁边）。pdf现在全屏后，单击：更多操作图标（三个垂直点）在那里您会发现“嵌入”机会。单击它，您将获得嵌入代码。瞧！！

注意：通过这种方式获得的 pdf 可以粘贴到您的博客或 HTML 网站中，并且文档中的任何链接都可以使用！！并且，右上方会有一个小弹出图标，悬停时，会使pdf全屏显示。而且，如果您想在页面上放置多个，可以将其弹出到一个**div中。**[http://internetpdf.com](http://www.internetpdf.com)上提供了一些示例。

约翰·伯奇******

# java - JPA 2：映射映射因重复值而失败

> ID：13084153
> 
> 赞同：3
> 
> 时间：2012-10-26T09:20:15.547
> 
> 标签：java, jpa, orm, eclipselink

我正在尝试映射一个类似于在 JavaDoc 中为 @MapKeyJoinColumn 指定的示例 3 的 HashMap（请参阅[http://www.objectdb.com/api/java/jpa/MapKeyJoinColumn](http://www.objectdb.com/api/java/jpa/MapKeyJoinColumn)）：

```
@Entity
public class Student {
    @Id int studentId;
    ...
    @ManyToMany  // students and courses are also many-many
    @JoinTable(name="ENROLLMENTS",
        joinColumns=@JoinColumn(name="STUDENT"),
        inverseJoinColumns=@JoinColumn(name="SEMESTER"))
    @MapKeyJoinColumn(name="COURSE")
    Map<Course, Semester>  enrollment;
    ...
} 
```

生成的连接表（使用 EclipseLink 2.3 生成）具有以下布局：

```
TABLE enrollments (
    student_id bigint NOT NULL,
    semester_id bigint NOT NULL,
    course_id bigint,
    CONSTRAINT enrollments_pkey PRIMARY KEY (student_id, semester_id)
) 
```

为什么为 Student 和 Semester 生成主键，而不为 Student 和 Course 生成主键？在这种情况下，这没有任何意义。有了这个主键，学生每学期只能参加一门课程。'student_id' 和 'course_id' 应该被定义为主键！这也将匹配 Java 映射定义（键必须是唯一的，但可以将相同的值分配给不同的键）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T14:34:24.183

JPA 将这种关系视为学生和学期之间的关系，就像在没有 @MapKeyJoinColumn 的传统 @ManyToMany 中一样，在传统的 @ManyToMany 中不允许重复，并且项目被源/目标 ID 删除，因此 pk/index 是希望在这些上。

为了更好地控制模型，请考虑将 ENROLLMENTS 表映射到 Enrollment Entity。

我可以从 Java 模型中看到您可能希望有所不同，因此请为此记录错误/增强。

# php - 常规帖子上的简单页面排序

> ID：13084156
> 
> 赞同：0
> 
> 时间：2012-10-26T09:20:41.250
> 
> 标签：php, html, wordpress

我正在尝试在 wordpress 上使用简单的页面排序插件。

我在自定义帖子和页面上获得了拖放界面，但它似乎不适用于常规帖子。有没有人知道修复它以使其与正常的 wordpress 帖子一起使用？

[http://wordpress.org/extend/plugins/simple-page-ordering/](http://wordpress.org/extend/plugins/simple-page-ordering/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T09:26:05.780

排序仅适用于`PAGE`帖子类型或类型的自定义帖子`PAGE`。

`POST`帖子类型不使用排序，因此插件也无法与它们一起使用

# entity-framework - 使用 sql server 2005 将参数传递给存储过程实体框架

> ID：13084159
> 
> 赞同：0
> 
> 时间：2012-10-26T09:20:48.323
> 
> 标签：entity-framework

我有一个以 int 作为参数的存储过程。我首先将实体框架代码与 MVC 一起使用，并且以这种方式进行调用

```
 SqlParameter sa = new SqlParameter("@userId", userId);
        var query = from dashboardData in TBSCIDBContext.Database.SqlQuery<MyNomination>("sp_GetMyNominationList @userId", sa)
                    select dashboardData;
        return query.ToList(); 
```

在探查器中我得到

```
exec sp_executesql N'sp_GetMyNominationList @userId',N'@userId int',@userId=4 
```

这在使用 sql server 2008 时正确执行，但现在我的数据库更改为 2005，并且相同的 exec 语句给了我

“sp_GetMyNominationList”附近的语法不正确。因为我在 2005 年运行它。

我必须使用 2005 请告诉我一种在 2005 中运行的方法，以便 sql profiler 正确获取参数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T11:11:06.737

您应该使用 EntityFramework 来[映射您的存储过程](http://msdn.microsoft.com/en-us/data/gg699321.aspx)。目前，您只是绕过 EF 的全部要点，即在代码和数据库之间提供一层。EntityFramework 将使用存储过程名称创建一个方法调用，该名称采用存储过程所需的参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T14:35:45.463

我的问题的答案是

```
 SqlParameter sa = new SqlParameter("@userId", userId);
            var query = from dashboardData in TBSCIDBContext.Database.SqlQuery<MyNomination>("exec sp_GetMyNominationList @userId=@userId", sa)
                        select dashboardData; 
```

这有效

# vb6 - 防止 VB6 自动升级 ActiveX dll 项目中的 ActiveX 控件

> ID：13084163
> 
> 赞同：2
> 
> 时间：2012-10-26T09:21:00.080
> 
> 标签：vb6, activex, ocx

打开 Visual Basic 6 项目时，它会自动将 activeX 控件更新到最新版本。

我看到一个帖子说必须在 vbp 文件中添加这一行才能避免`NoControlUpgrade=1`这种情况发生，但这对我不起作用。在 vb6 中保存项目时，它会更新 vbp 中的控件。

**1\. 我怎样才能拥有这份工作？**

**2\. 如何让 vb6 不将 activeX 控件升级为默认行为？**

奇怪的是，我试图用一个表单和一些图像列表（来自 mscomctl.ocx）创建一个新项目，我保存了项目，然后在记事本中打开了 vbp 文件，将 ocx 的版本更改为旧版本，保存了 vbp 文件并在vb6中打开；然后我关闭了 vb6，它甚至没有要求我保存项目，即使我没有添加该行`NoControlUpgrade=1`。

但是对于我的旧项目，对 vbp 文件做同样的事情，然后在 vb6 中打开它并关闭它会导致 vb6 提示我保存项目（如果我保存它，ocx 将被更新）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-27T17:20:02.900

升级 ActiveX 控件属性 在 Visual Basic 6.0 中，如果自上次打开项目以来在计算机上安装了更新版本的 ActiveX 控件，则升级 ActiveX 控件项目属性会自动更新这些控件。

项目>属性>常规选项卡>升级 ActiveX 控件

来源 - [http://msdn.microsoft.com/en-us/library/cdfc7fza(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/cdfc7fza(v=vs.80).aspx)

# vertex - 如何使用 vertx 请求对象获取 post 参数？

> ID：13084166
> 
> 赞同：0
> 
> 时间：2012-10-26T09:21:04.747
> 
> 标签：vertex

我有一个请求对象。

我试着做

```
 var str;
 for (var i in this.request)
 {
      str += i + "\n";
 } 
```

并得到： headers params response getClass equals query class hashCode wait uri pause resume endHandler bodyHandler notify path dataHandler method toString exceptionHandler notifyAll

帖子参数无处可寻。任何人都可以对这个谜团有所了解吗？

params() 和 headers() 不包含任何内容。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T19:13:45.413

使用 bodyHandler （这里假设您发布 JSON）：

```
req.bodyHandler(function(data) {
  var postData = JSON.parse(data.toString());
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-10T09:25:38.460

这可以使用 http 请求上的 formAttributes 来完成。这是scala中的一个例子

```
 req.expectMultiPart(true) //Will expect a form
  req.endHandler({

    req.formAttributes() //This is used to access form attributes

    //some code with attributes

  }) 
```

参考：http: [//vertx.io/core_manual_java.html#handling-multipart-form-attributes](http://vertx.io/core_manual_java.html#handling-multipart-form-attributes)

# c# - 在 C# 中为面板创建布局时遇到问题

> ID：13084168
> 
> 赞同：3
> 
> 时间：2012-10-26T09:21:08.373
> 
> 标签：c#, layout, layout-manager

我想创建一个布局管理器，它将面板划分为单元格，并且可以将一个组件添加到指定单元格（行、列）的面板中。重新调整面板大小时应更新单元格的宽度和高度（这是问题所在，它不会重新调整单元格的大小）。这些类本身可以工作，但是在调整大小时不会更新单元格大小，它甚至似乎都没有调用`LayoutManager::SetBounds(int, int)`. 我创建一个单独的类的原因是因为我将为其他容器使用相同的布局管理器，例如`GroupBox`. 这是我的代码

```
public class Insets
{
    public int bottom = 0;
    public int top = 0;
    public int left = 0;
    public int right = 0;

    public Insets(int top, int left, int bottom, int right) {
        this.top = top;
        this.left = left;
        this.bottom = bottom;
        this.right = right;
    }
}

/*
*  LayoutManager class
*/

using System;
using System.Drawing;
using System.Windows.Forms;
using System.Collections.Generic;

public class LayoutManager
{
    public enum Constraints{
        HORIZONTAL,
        VERTICAL,
        NONE
    };

    public Insets insets = new Insets(0, 0, 0, 0);
    public Constraints fill = Constraints.NONE;
    public Panel container = null;
    public int cellheight = 1;
    public int cellwidth = 1;

    private List <int> indices = new List <int>();
    private int columns = 1;
    private int rows = 1;
    private int dh = 0;
    private int dw = 0;

    public LayoutManager(){
    }
    private int Index2DTo1D(int row, int column){
        return (column + (row * columns));
    }
    private int Index1DToRow2D(int index){
        return index / columns;
    }
    private int Index1DToColumn2D(int index){
        return index / rows;
    }
    private void SetGridMatrix(int rows, int columns) {
        if (rows >= this.rows){
            this.rows = rows + 1;
        }
        if (columns >= this.columns){
            this.columns = columns + 1;
        }
    }
    public void RepaintChildrenComponents() {
        if(container != null){
            foreach(Control control in container.Controls){
                ((CheckBox)control).Text = container.Width.ToString();
            }       
        }
    }
    public void SetBounds(int width, int height) {
        SetCellsDimensions(width, height);
        RepaintChildrenComponents();
    }
    public void SetCellsDimensions(int width, int height){
        this.dw = width / columns;
        this.dh = height / rows;
    }
    public void SetContainer(ref Panel container) {
        this.container = container;
    }
    public Point GetChildComponentXY(int x, int y){
        if(x >= 0 && y >= 0){
            return new Point((x * dw) + insets.right, (y * dh) + insets.top);
        }
        throw new System.ArgumentOutOfRangeException("");
    }
    public Size GetComputedComponentSize(){
        return new Size((cellwidth * dw) - (insets.left + insets.right),
                        (cellheight * dh) - (insets.top + insets.bottom));            
    }
    public void AddComponent(Control control, Point location, LayoutManager.Constraints fill){
        if(container != null && control != null){
            indices.Insert(container.Controls.Count, Index2DTo1D(location.X, location.Y));
            container.Controls.Add(SetChildComponentBounds(control, location));
            SetGridMatrix(location.X, location.Y);
            SetCellsDimensions(container.Width, container.Height);
        }else{
            throw new NullReferenceException("");
        }
    }
    protected Control SetChildComponentBounds(Control control, Point location) {
        control.Location = GetChildComponentXY(location.X, location.Y);
        control.Size = GetComputedComponentSize();
        return control;
    }
    public void AddComponent(Control control, Point location){
        AddComponent(control, location, LayoutManager.Constraints.NONE);
    }
}

/*
*
* JPanel class
*/

using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Drawing;
using System.Windows.Forms;

class JPanel : Panel
{
    private LayoutManager layman;

    public JPanel(){
        layman = new JComponent.LayoutManager();

        Panel container = this;
        layman.SetContainer(ref container);

        string[] elems = { "Multiplication", "Division", "Addition", "Subtraction"};
        int e = 0;

        this.Size = new Size(300, 125);

        foreach(string str in elems){

            CheckBox box = new CheckBox();
            box.Text = str;
            layman.AddComponent(box, new Point(0, e++));
            //this.Controls.Add(box);
        }

    }
    public JPanel(LayoutManager layman) {
        LayoutManager = layman;
    }

    protected override void SetBoundsCore(int x, int y, int width, int height, BoundsSpecified specified){
        if(layman != null){
            layman.SetBounds(width, height);
        }
        base.SetBoundsCore(x, y, width, height, specified);
    }
    public LayoutManager LayoutManager{
        set{
            layman = value;
        }
        get{
            return layman;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T11:18:06.230

请看一下 TableLayoutPanel 类。我认为这个控制正是你想要实现的。TableLayoutPanel 允许您在表单编辑器中定义行/列，并以编程方式将控件放置在单元格内，合并行/列，根据内容自动调整面板大小或根据面板大小自动调整内容大小。

这是一个非常有趣的文档，关于如何在 Windows 窗体中进行布局：

[https://docs.google.com/viewer?a=v&q=cache:nePz-uaPReYJ:www.windowsclient.net/samples/go%2520to%2520market/layout/layoutgtm.doc+Whidbey+Layout+tablelayoutpanel&hl=de&gl= de&pid=bl&srcid=ADGEEShlobh-RfSTegC1NuOc72m0vRPu6RsF3USTSPnSasU-9qSklTbJzclRol6Nxg5sxEUXZOWYZwgrSdZdAjJ5EXhCft7qj5jBr4-kkkX6380-0itVaHkG-TAvK4KvNtDymEFlUXM6&sig=AHIEtbTnyasKOG5tuZwub59LBw8UeZL8Lg](https://docs.google.com/viewer?a=v&q=cache:nePz-uaPReYJ:www.windowsclient.net/samples/go%2520to%2520market/layout/layoutgtm.doc+Whidbey+Layout+tablelayoutpanel&hl=de&gl=de&pid=bl&srcid=ADGEEShlobh-RfSTegC1NuOc72m0vRPu6RsF3USTSPnSasU-9qSklTbJzclRol6Nxg5sxEUXZOWYZwgrSdZdAjJ5EXhCft7qj5jBr4-kkkX6380-0itVaHkG-TAvK4KvNtDymEFlUXM6&sig=AHIEtbTnyasKOG5tuZwub59LBw8UeZL8Lg)

不幸的是，我只能通过谷歌搜索缓存找到文档。原来的链接好像被删了。

# android - Android 计时器替代品

> ID：13084170
> 
> 赞同：1
> 
> 时间：2012-10-26T09:21:16.043
> 
> 标签：android, timer

我正在寻找一些计时器替代品，因为计时器随着应用程序而死，受到限制，并且每个计时器都会启动自己的线程。有时我需要启动大约 20-30 个计时器。

我需要及时设置一些事件，以及何时显示应用程序屏幕。是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T09:26:25.343

这可能会也可能不会，具体取决于您对“应用程序死亡”的定义。

您可以使用`AlarmManager`来安排`PendingIntents`在未来的特定时间被调用。那些`PendingIntents`可以发起活动。如果您的应用程序因普通原因“死亡”，这将起作用。

然而：

*   如果用户通过“设置”强制关闭您的应用程序，您的警报将被取消，您无法阻止此操作（您也没有任何替代方法可以在此情况下`AlarmManager`幸存下来）

*   请允许用户确定您是否`Notification`在这些时间显示活动或提出 a，因为用户可能不一定喜欢他们的游戏、导航、视频或电话被您的活动打断。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T12:47:00.747

*您应该使用* [AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)。

正如 CommonsWare 所说，它有一些限制，但没关系，如果用户强制关闭您的应用程序，则意味着他不想使用您的应用程序（更多或由于某种内存）......

*而且我有一个解决方案（但可能不是最好的），因为如果用户强制关闭您的应用程序，您将无法倾听，因此一种方法是您可以在每次启动应用程序时重新安排您的事件。我知道这不是一个好的解决方案，但是.....我们还没有其他方法*

这是一个[很好的例子](http://justcallmebrian.com/?p=129)。

# powershell - PowerShell 方法重载解析错误？

> ID：13084176
> 
> 赞同：3
> 
> 时间：2012-10-26T09:21:48.207
> 
> 标签：powershell

看来PowerShell方法重载解析系统与C#不一致

让我们比较一下

C＃

```
class Program
{
    static void Main(string[] args)
    {
        MyClass.MyMethod(false, DateTime.Now);
    }
}

public static class MyClass
{
    public static void MyMethod(object obj, DateTime dateTime)
    {
        Console.WriteLine("MyClass.MyMethod(object obj, DateTime dateTime)");
    }

    public static void MyMethod(bool b, string str)
    {
        Console.WriteLine("MyClass.MyMethod(bool b, string str)");
    }
} 
```

对比

电源外壳

```
Add-Type `
@"
    using System;

    public static class MyClass
    {
        public static void MyMethod(object obj, DateTime dateTime)
        {
            Console.WriteLine("MyClass.MyMethod(object obj, DateTime dateTime)");
        }

        public static void MyMethod(bool b, string str)
        {
            Console.WriteLine("MyClass.MyMethod(bool b, string str)");
        }
    }
"@

[MyClass]::MyMethod($false, [DateTime]::Now) 
```

C# 将返回

```
MyClass.MyMethod(object obj, DateTime dateTime) 
```

我们的预期

但 PowerShell 将返回

```
MyClass.MyMethod(bool b, string str) 
```

如果我们想要调用正确的方法，我们必须更明确地说明我们想要调用的重载

```
[MyClass]::MyMethod([object] $false, [DateTime]::Now) 
```

我认为这是 PowerShell 中的错误，而不是功能

上面的代码在 PowerShell 3 中进行了测试

在 PowerShell 2 中情况更糟。我找不到调用适当重载的方法

连这个都不行

```
 [MyClass]::MyMethod([object] $false, [DateTime] ([DateTime]::Now)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T16:09:48.747

PowerShell 允许比 C# 更多的类型强制。例如，如果需要，PowerShell 将强制将 DateTime 转换为字符串（或将 int 转换为 bool 或将字符串转换为 bool）。我怀疑重载解决方案是在第一个参数上找到直接类型匹配，然后注意到可以强制第二个参数并且没有一个重载与类型完全匹配。也就是说，我碰巧同意你的看法。我希望看到 PowerShell 通过其成员重载解决方案变得更好。在这种情况下，我会说类型兼容性应该优先于类型强制。当然，将布尔值放入对象引用中需要装箱，因此可能会降低该特定过载的评分。

[考虑在http://connect.microsoft.com](http://connect.microsoft.com)上将此问题提交给 PowerShell 团队。

# javascript - Webstorm 中的 Adob e Air 开发

> ID：13084187
> 
> 赞同：0
> 
> 时间：2012-10-26T09:22:37.307
> 
> 标签：javascript, html, air, webstorm

只是想熟悉 Adob​​e Air 和 JavaScript，所以我下载了 WebStorm 的试用版。

我正在关注这里的菜单教程：http: [//www.adobe.com/devnet/air/ajax/quickstart/articles/adding_menus.html](http://www.adobe.com/devnet/air/ajax/quickstart/articles/adding_menus.html)但不知何故 WebStorm 无法识别某些 Air 变量。例如：

```
air.NativeWindow.supportsMenu;
air.NativeApplication.supportsDockIcon; 
```

在这两种（和其他）情况下，air 和 NativeWindow 都被识别，但第三个变量（supportsMenu、supportsDockIcon）被报告为“未识别的变量”，这很奇怪，因为根据 Air API 参考它们完全有效。

有没有办法解决这个问题？

帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-21T10:14:20.440

据我所知，WebStorm 不支持 Adob​​e AIR，这意味着它不知道 AIR API 变量。但是，如果您引入像 AIRAliases.js 之类的引用，它会“知道”那里定义的别名。

我很想在这件事上犯错。你能给我指出一个说 WebStorm 支持 AIR 或解释如何在 WebStorm 中支持 AIR 的参考吗？

# html - 强制响应式引导网格在手机模式下不折叠

> ID：13084188
> 
> 赞同：5
> 
> 时间：2012-10-26T09:22:37.277
> 
> 标签：html, css, twitter-bootstrap

我正在用 Bootstrap 建立一个网站。有时我希望网格在电话模式下折叠，但有时我不希望 - 例如，顶部菜单是一个栏，其中包含一行中的几个项目。而且我希望它们在电话模式下保持浮动，而不是相互折叠，这是“.row-fluid”网格的默认行为。

是否有一种内置的方式来实现这一点，比如所有分辨率下的无响应网格？还是我必须自己动手？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-17T19:53:56.423

我知道这是旧的，但它出现在谷歌搜索中，我找到了答案......

> 不希望您的色谱柱简单地堆叠在较小的设备中？通过将 .col-xs-* .col-md-* 添加到您的列来使用额外的中小型设备网格类。

从这里[http://getbootstrap.com/css/#grid-example-mixed](http://getbootstrap.com/css/#grid-example-mixed)

# git - 在我自己的网站上托管 git 项目

> ID：13084189
> 
> 赞同：3
> 
> 时间：2012-10-26T09:22:39.253
> 
> 标签：git, github, gitorious

我想要类似于 GitHub 但在我自己的网站上的东西。

类似于 Gitorious/WebGit/GitList，但基于 PHP（要求）。

也许像谷歌代码之类的东西？我需要它来处理 Git 存储库。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T09:31:01.567

如果您可以满足您的语言要求并使用 Ruby，您应该看看[GitLab](http://gitlabhq.com/)，它是您可以自己托管的 GitHub 克隆。 [这是一个](http://blog.phusion.nl/2012/04/21/tutorial-setting-up-gitlab-on-debian-6/)解释如何在 Debian 6 上安装它的教程。

如果您与 PHP 相关，恕我直言，可能性很小，但您应该看看这些项目：

*   [GitPHP](http://www.gitphp.org/projects/gitphp/wiki)
*   [轨道](http://mtrack.wezfurlong.org/)
*   [traq.io](http://traq.io/)

**编辑：**我最初没有发现的另一种可能性是[GitList](http://gitlist.org/)

# iphone - 如何使用加速度计在iphone的屏幕上绘画？

> ID：13084192
> 
> 赞同：0
> 
> 时间：2012-10-26T09:22:44.593
> 
> 标签：iphone, ios, ios5, accelerometer

我是 iPhone 开发的新手，我正在开发一个应用程序，我必须使用加速度计在屏幕上绘画。如果可以帮助我，请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T09:37:04.203

您正在寻找**陀螺鼠标**，3行代码。观看[此视频](http://www.youtube.com/watch?v=C7JQ7Rpwn2k)，陀螺鼠标在 37:00-38:25 呈现。

长话短说，您需要陀螺仪（[CMRotationRate](http://developer.apple.com/library/ios/documentation/CoreMotion/Reference/CMGyroData_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40009941)）。

# sql - 将数据汇总到年份范围内

> ID：13084195
> 
> 赞同：2
> 
> 时间：2012-10-26T09:23:09.843
> 
> 标签：sql, sql-server-2005

我正在尝试汇总 sql 中的数据，并且很难找到对数据进行分组的方法。

我有一张叫汽车的桌子

```
CarID CarMake  CarModel CarYear
1      Ford      Mondeo   2000
2      Ford      Mondeo   2002
3      Ford      Mondeo   2003
4      Ford      Mondeo   2005 
```

我希望能够将此数据分组以显示为

```
CarMake CarModel CarYearRange
Ford     Mondeo   2000-2003
Ford     Mondeo   2005-2005 
```

我已经尝试使用 min 和 max 来产生这个但是如果汽车不是在示例中的一年内制造的，那么这会失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T10:04:55.880

```
select carmake, carmodel, 
case  when caryear >= 2000 and caryear <=2003 then '2000-2003' 
     when caryear >= 2005 and caryear <=2005 then '2005-2005'
end  t
from car
group by carmake, carmodel , t 
```

小提琴[演示](http://sqlfiddle.com/#!1/6db05/2)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T10:34:40.167

我假设（也许是粗鲁地）您的样本数据包含错误，并且范围应该是 2000、2002-2003 和 2005，因为没有 2001 或 2004 的模型。如果我是对的，那么这将起作用：

```
WITH CTE AS
(   SELECT  Cars.CarMake, 
            Cars.CarModel, 
            [FirstYear] = Cars.CarYear, 
            [LastYear] = Cars.CarYear, 
            [Recursion] = 1
    FROM    Cars
    UNION ALL
    SELECT  CTE.CarMake, 
            CTE.CarModel, 
            CTE.[FirstYear], 
            [LastYear] = Cars.CarYear, 
            [Recursion] = [Recursion] + 1
    FROM    CTE 
            INNER JOIN Cars
                ON CTE.CarMake = Cars.CarMake
                AND CTE.CarModel = Cars.CarModel
                AND CTE.[LastYear] = Cars.CarYear - 1
), MaxCTE AS
(   SELECT  CarMake, 
            CarModel, 
            FirstYear, 
            LastYear, 
            Recursion, 
            [MaxRecursion] = MAX(Recursion) OVER(PARTITION BY CarMake, CarModel, FirstYear)
    FROM    CTE
)
SELECT  MaxCTE.CarMake, 
        MaxCTE.CarModel, 
        [CarYearRange] = CAST(FirstYear AS VARCHAR(4)) + ' - ' + CAST(LastYear AS VARCHAR(4))
FROM    MaxCTE
WHERE   Recursion = MaxRecursion
AND     NOT EXISTS
        (   SELECT  1
            FROM    MaxCTE ex
            WHERE   MaxCTE.CarMake = ex.CarMake
            AND     MaxCTE.CarModel = ex.CarModel
            AND     MaxCTE.FirstYear > ex.FirstYear
            AND     MaxCTE.LastYear = ex.LastYear
        ) 
```

**[SQL 小提琴示例](http://www.sqlfiddle.com/#!3/22a3b/1)**

**编辑**

**如果我正确解释了要求，请使用 RICHARD THE KIWI 的回答。它比我的好多了！**

**[小提琴改进的解决方案](http://www.sqlfiddle.com/#!3/22a3b/3)**

```
SELECT  CarMake,
        CarModel,
        [StartYear] = MIN(CarYear),
        [EndYear] = MAX(CarYear)
FROM    (   SELECT  *,
                    [Offset] = CarYear - ROW_NUMBER() OVER (PARTITION BY CarMake, CarModel ORDER BY CarYear)
            FROM    Cars
        ) x
GROUP BY CarMake, CarModel, Offset
ORDER BY CarMake, CarModel, StartYear 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-26T10:59:40.603

在 SQL Server 中，您可以使用类似于以下内容的内容：

```
select distinct carmake, 
  carmodel,
  case 
    when caryear >= 2000 and caryear <= 2003 then '2000-2003'
    when caryear >= 2005 and caryear <= 2005 then '2005-2005'
  end CarYearRange
from yourtable 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/9633c/2)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-26T12:13:56.357

从 GarethD 对您的要求的解释中汲取灵感，这是我的查询以获得所需的结果。我强烈建议将范围显示为 2 个不同的列，并在需要时让前端代码合并它们以进行显示。

```
select carmake,
       carmodel,
       min(caryear) startyear,
       max(caryear) endyear
from (
  select *,
         offset= caryear-row_number() over (partition by carmake, carmodel
                                            order by caryear)
  from cars
) x
group by carmake, carmodel, offset
order by carmake, carmodel, startyear 
```

# jquery - 使重定向 url 与 ajax 一起工作

> ID：13084204
> 
> 赞同：0
> 
> 时间：2012-10-26T09:23:39.313
> 
> 标签：jquery, ajax, django, django-views

我想知道如何让我的请求在我的视图中使用 ajax，同时我想将用户重定向到其他页面。我的意思是，例如，当用户成功发送他/她的电子邮件并且我想将他/她重定向到其他页面时。我应该怎么做才能使这个请求与 ajax 一起工作？

我在views.py中有这个功能：

```
def compose(request, recipient=None, success_url=None, recipient_filter=None):
    if request.is_ajax():         
        if request.method == "POST":
            sender = request.user
            form = compose_form(request.POST, recipient_filter=recipient_filter)
            if form.is_valid():
               // do some processing
               if success_url is None:
                   success_url = reverse('messages_inbox')
               if request.GET.has_key('next'):
                   success_url = request.GET['next']
               return HttpResponseRedirect(success_url)
    else: //rest of function 
```

然后我签入，例如“messages_inbox”，即使用 ajax 传递的请求。那么有什么办法呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T09:37:34.230

在 ajax 请求的情况下，视图不是应该重定向的视图。而是让视图返回`success_url`到 ajax 调用，然后使用成功回调来重定向用户。

使用 jquery 的示例

```
$.ajax(url, data, function (data, response, xhr){
    ...
    var url = success_url; //Get success url from your data which is a json response object   
    $(location).attr('href',url);
}); 
```

您也可以在没有 jquery 的情况下进行重定向，请参阅 [如何在 JavaScript/jQuery 中重定向到另一个网页？](https://stackoverflow.com/questions/503093/how-can-i-make-a-redirect-page-in-jquery-javascript)

# python - self.get_argument 不起作用

> ID：13084212
> 
> 赞同：2
> 
> 时间：2012-10-26T09:23:55.147
> 
> 标签：python, tornado

我刚开始学习 Tornado，在我的 hello.py 中遇到了第一个问题。我按照“Tornado 简介”给出的步骤和代码进行操作。这是代码。

```
 import tornado.httpserver
     import tornado.ioloop
     import tornado.options
     import tornado.web

     from tornado.options import define, options
     define("port", default=8000, help="run on the given port", type=int)

     class IndexHandler(tornado.web.RequestHandler):
         def get(self):
            greeting = self.get_argument('greeting','Hello')
            self.write(greeting + ', friendly user!')

     if __name__=="__main__":
        tornado.options.parse_command_line()
        app = tornado.web.Application(handers=[(r"/", IndexHandler)])
        http_server = tornado.httpserver.HTTPServer(app)
        http_server.listen(options.port)
        tornado.ioloop.IOLoop.instance().start() 
```

在我在其他终端窗口中运行它之后

```
 curl http://localhost:8000/ 
```

我没有得到预期的答案，应该是

```
 Hello, friendly user! 
```

相反，响应类似于

```
 [I 121026 18:20:38 web:1359] 301 GET / (127.0.0.1) 1.12ms 
```

我对此很陌生，以至于我不知道如何解决它。这个问题可能听起来很愚蠢，请帮我一个忙，帮帮我！非常感谢！！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T09:28:19.850

不确定这是否是主要问题，但您拼写`handlers`错误

```
handers=[(r"/", IndexHandler)]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-24T08:01:28.523

可能你的域名不对。我想你可以让port=8888，然后在你的shell中，你可以输入：python hello.py --port=8888 #hello.py是文件名 url是：localhost:8888

# sql - Sql Server 2008 手动创建外键

> ID：13084217
> 
> 赞同：0
> 
> 时间：2012-10-26T09:24:25.793
> 
> 标签：sql, sql-server, sql-server-2008, foreign-keys

我继承了一个设计得不是很好的旧数据库。这是一个 Sql Server 2008 数据库，缺少很多外键关系。下面显示了两个表，我正在尝试在**dbo.app_status.status_id**和**dbo.app_additional_info.application_id之间手动创建 FK 关系**

![在此处输入图像描述](../Images/2b8f6cffb2adf2e0aad3b8ba429c21df.png)

尝试使用以下查询创建关系时，我正在使用 SQL Server Management Studio

```
USE myDatabase; 
GO ALTER TABLE dbo.app_additional_info 
ADD CONSTRAINT FK_AddInfo_AppStatus FOREIGN KEY (application_id) 
    REFERENCES dbo.app_status (status_id) 
    ON DELETE CASCADE
    ON UPDATE CASCADE ; 
GO 
```

但是，我在运行查询时收到此错误

> ALTER TABLE 语句与 FOREIGN KEY 约束“FK_AddInfo_AppStatus”冲突。冲突发生在数据库“myDatabase”、表“dbo.app_status”、列“status_id”中。

我想知道查询是否因为每个表已经包含大约 130,000 条记录而失败？

请帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T09:54:39.110

发生错误是因为 in `dbo.app_additional_info.application_ID`that is not in 中有一个值`dbo.app_Status.Status_ID`。除非命名约定严重混乱，否则您试图向不相关的列添加关系，为什么要`application_ID`引用`status_ID`？

我希望这`dbo.App_Additional_Info.Application_ID`应该是引用`dbo.Application.Application_ID`（稍微猜测表名和列名）所以你会想要这个：

```
USE MyDatabase
GO
ALTER TABLE dbo.App_Additional_Info
ADD CONSTRAINT FK_App_Additional_Info_Application_ID (Application_ID)
    REFERENCES dbo.Application (Application_ID)
    ON DELETE CASCADE
    ON UPDATE CASCADE; 
```

# oop - 面向对象的实现策略

> ID：13084222
> 
> 赞同：9
> 
> 时间：2012-10-26T09:24:38.760
> 
> 标签：oop, object, implementation, smalltalk, squeak

我目前正在 Squeak 环境中学习 Smalltalk，并且正在阅读“Squeak - A Quick Trip To ObjectLand”。我使用 Python 和 Java 的一些先验知识进入了面向对象的范式，书中第 36 页的这句话让我想到：

> Smalltalk 是面向对象语言的基于类的实现。

简短的句子，但很有趣。在 OO 中，诸如类、对象、实例之类的所有术语似乎都已明确定义，并且似乎指向唯一的真正含义，并且您可能会遇到诸如“对象是类的实例”之类的通用句子。
但是您很少听到有关实施策略的信息。在这种情况下，面向对象概念的*实现*意味着什么？除了类，还有面向对象语言的实现吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-26T11:27:57.010

Javascript 是一种基于*原型*的面向对象语言的实现。

您无需继承类并创建该新类的实例，而是通过克隆原型来继承行为。

作为一个历史记录，我应该补充一点，虽然 Javascript 可能是最广泛使用的原型使用语言，但首先是 David Ungar 和 Randall Smith 的[Self 语言](http://en.wikipedia.org/wiki/Self_%28programming_language%29)。

Squeak有多种原型[的](http://www.fit.vutbr.cz/units/UITS/prod/index.php?id=241&notitle=1)[实现。](http://russell-allen.com/squeak/prototypes/)我没有使用它们，所以我无法评论这些库。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-26T12:57:43.310

我从未见过，但读到了 Emerald，它是面向对象的，但既不基于类也不基于原型，但似乎在特殊构造函数的帮助下“一个接一个”地构造对象：

> 但是，Emerald 对象的创建不需要 Class 对象。在大多数基于对象的系统中，程序员首先指定一个定义其所有实例的结构和行为的类对象。类对象还响应新调用以创建新实例。
> 
> 相反，Emerald 对象是通过执行对象构造函数来创建的。对象构造函数是定义对象的表示、操作和过程的 Emerald 表达式。

请参阅[Andrew Black、Norman Hutchinson、Eric Jul 和 Henry Levy：“翡翠系统中的对象结构”](http://www.emeraldprogramminglanguage.org/OOPSLA-86-paper.pdf)。

# c# - 如何在 XNA 中获取 3D 模型的 2D 尺寸？

> ID：13084225
> 
> 赞同：1
> 
> 时间：2012-10-26T09:24:52.883
> 
> 标签：c#, windows, xna

我有一个加载的 3D 模型`model = Content.Load<Model>("cube")`，我需要在它被投影到视口后获取该对象的大小。我知道我可以使用`Viewport.Project()`。但这适用于单点，我需要的是一个矩形。我可以在周围画一个方括号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T14:28:28.487

我可以想到几种方法来做到这一点。我的建议是找到模型的上角和下角，并将它们投影到视口上。

例如，您可以使用模型网格的 BoundingSphere 来执行此操作。如果它是一个立方体，如上所述，您可以一个一个地通过顶点（显然在与相机对齐之后）。使用它，您可以在屏幕空间中绘制一个矩形，该矩形至少将包含整个模型，但根据形状可能还有更大的区域。

# java - 如何仅在 bean 存在时才注入 bean

> ID：13084229
> 
> 赞同：8
> 
> 时间：2012-10-26T09:25:11.187
> 
> 标签：java, spring, optional, spring-el

我有以下弹簧上下文文件结构（`->`代表“包含”）：

```
A1.xml -> B.xml & C.xml
A2.xml -> B.xml 
```

`C.xml`定义一个 bean`c`

`B.xml`定义`b`一个依赖于`c`

`c`显然这对 A2 失败，因为在 context中没有定义`A2`。

**我如何指定类似的内容：如果您`c`在上下文中将其注入，`b`否则只需注入`null`？**

我调查了 Spring EL，但是

```
<property name="b" ref="#{ @c?:null}" /> 
```

只是给了我一个`NoSuchBeanDefinitionException`似乎是价值的名字`b.toString()`！？

Btw：我已经知道这东西乱七八糟，应该尽快清理干净。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-26T17:37:05.297

SpEL 表达式的#root 对象是一个 BeanExpressionContext，您可以`getObject()`在该上下文中调用该方法；如果未声明 bean，则返回 null ...

```
<property name="bar" value="#{getObject('bar')}" /> 
```

注意：您使用`value`not`ref`因为它返回 bean，而不是 bean 定义。

这是来自的代码`getObject()`

```
public Object getObject(String key) {
    if (this.beanFactory.containsBean(key)) {
        return this.beanFactory.getBean(key);
    }
    else if (this.scope != null){
        return this.scope.resolveContextualObject(key);
    }
    else {
        return null;
    }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-26T09:59:18.720

我非常同意清理你的 XML :-)

如果你使用基于注解的注入，你可以试试[这个技巧](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/beans/factory/annotation/Autowired.html)

```
@Autowired( required=false ) 
```

我不确定这是否适用于您的情况，但值得一试。

# android - 在音乐停止播放之前要为通知编写什么代码

> ID：13084230
> 
> 赞同：6
> 
> 时间：2012-10-26T09:25:21.263
> 
> 标签：android, android-layout, android-notifications

我想要通知，它会一直停留在通知栏上，直到音乐停止播放。目前我已经编写了一些代码，我可以在其中显示通知，但是当我按下清除通知按钮或交换它时，它会从通知中心消失。我想要像 spotify 这样的通知，它会一直保持在栏上，直到您停止播放音乐。这是我的通知代码

```
int pendingRequestCode = 0;
 // final Resources res = getResources();
    notificationManager = (NotificationManager) getSystemService(
           NOTIFICATION_SERVICE);
   Intent i = new Intent(getApplicationContext(),Mainactivity.class);   
   Notification.Builder builder = new Notification.Builder(this)
.setSmallIcon(R.drawable.ic_action_search)
.setAutoCancel(true)
.setTicker("test ckick")    
.setContentIntent(PendingIntent.getActivity(getApplicationContext(), NOTIFICATION_DEFAULT, i,0));

       // Sets a custom content view for the notification, including an image button.
        layout = new RemoteViews(getPackageName(), R.layout.notification);
       layout.setTextViewText(R.id.notification_title, getString(R.string.app_name));
       Intent clickIntent = new Intent();
       clickIntent.setAction(ACTION_DIALOG);
       PendingIntent pendingIntent = PendingIntent.getBroadcast(getApplicationContext(), pendingRequestCode, clickIntent, PendingIntent.FLAG_UPDATE_CURRENT);
       layout.setOnClickPendingIntent(R.id.notification_button,pendingIntent);
       builder.setContent(layout);

       // Notifications in Android 3.0 now have a standard mechanism for displaying large
       // bitmaps such as contact avatars. Here, we load an example image and resize it to the
       // appropriate size for large bitmaps in notifications.

       layout.setImageViewResource(R.id.notification_button, R.drawable.pause);
   notificationManager.notify(NOTIFICATION_DEFAULT, builder.getNotification()); 
```

等待回复 ![在此处输入图像描述](../Images/f3910f5d740e262109b7745aecaf174f.png)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-26T09:29:43.980

用于`setOngoing(true)`指示事件正在进行中。您可能还希望删除`setAutoCancel(true)`，因为`Notification`当用户点击它时会清除 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T09:40:18.597

notification.flags = Notification.DEFAULT_LIGHTS | Notification.FLAG_AUTO_CANCEL

# javascript - 这两个javascript函数有什么区别？

> ID：13084231
> 
> 赞同：3
> 
> 时间：2012-10-26T09:25:28.780
> 
> 标签：javascript

**我想知道在以下情况下insideFn**和**outsideFn**有什么区别：

```
 function Construct()
 {       
   this.insideFn = function(obj){
   ....
   }
 }

 Construct.prototype.outsideFn = function(obj){
      ...
 } 
```

哪一种使用效率高？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T09:28:43.480

在第一种情况下，使用创建的每个实例`Construct`都有自己的`insideFn`，如果您使用多个实例，这将浪费内存。在第二种情况下，每个 的实例都`Construct`将只有一个对 的引用`outsideFn`。所以后者更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T09:35:35.607

在第一个构造中，方法是 的实例的属性`Construct`。在第二个构造中，方法是`prototype`对象的属性`Construct`

如果在`prototype`对象内部定义函数，调用时它们将是相同的。该`prototype`变体通常可以节省内存并加快代码速度。您还可以重载`prototype`对象实例中的函数，以更改对象的默认行为。

要获得更好的英语和更多详细信息，请参阅[http://www.javascriptenlightenment.com/](http://www.javascriptenlightenment.com/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-26T09:27:36.540

第一个`function Construct() {}`是一个类（在 javascript 中它是一个对象），而稍后您将使用关键字继承（扩展）这个类`prototype`并添加一个更多功能`outsideFn`。JavaScript 中没有特定的类，因此您必须将对象用作类。

# grails - Grails Command 对象无法绑定数字

> ID：13084233
> 
> 赞同：2
> 
> 时间：2012-10-26T09:25:31.930
> 
> 标签：grails, object, command

大家好，我是grails的新手。我通过命令对象将字段值从 gsp 传递到控制器。在我的 gsp 页面上有一个名为 mobile number 的字段。但是当我要通过命令对象访问它时，它给了我 typeMismatch 的错误，即它不会将 98xxxxxxxx 之类的值从字符串转换为整数。在我的命令对象中，我已将其作为整数提到

```
 Integer mobile; 
```

我在 gsp 上的代码是：

```
 <label for="mobile">Mobile</label>
 <input type="text" value="${cmd?.mobile}" title="" name="mobile" id="mobile" size="30" maxlength="10"/> 
```

其中 cmd 是我的命令对象。

和控制器中的代码：

```
def addInstitute={InstituteCommand cmd->
   Address address=new Address();
   address.mobile=cmd.mobile;
} 
```

它给了我 typeMismatch 错误。当我输入像 1111111111 这样的值时，它会保存它但是当我输入实际的手机号码时。它给了我 typeMismatch 错误。如何处理这种情况？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T09:41:38.523

那是因为整数值的范围是从 -2147483648 到 2147483647，而您的手机号码大于 9800000000（10 位）。您最好将其存储为字符串

```
String mobile; 
```

这更有意义，因为您很可能不会对手机号码执行任何号码操作。它还允许您存储非数字电话代码，例如 +、-

# visual-studio-2012 - 对 Windows Server 2012 上的 Visual Studio 2012 感到沮丧

> ID：13084234
> 
> 赞同：5
> 
> 时间：2012-10-26T09:25:32.143
> 
> 标签：visual-studio-2012, belongs-to, windows-server-2012, root

我试图保持最佳实践并且不以机器管理员身份运行，所以我在标记为管理员的用户帐户下运行。

VS2012*需要*以管理员身份运行，所以我将快捷方式标记为“以管理员身份运行”。

但是，VS2012 也与它擅长的各种文件相关联（`.cpp`等`.cs`）。

问题是，当我双击这些文件中的任何一个时，这些文件将在 VS2012 中加载，VS2012 已在“用户模式”中加载，并恢复为麻烦（无法保存文件，调试时无法启动 iis 等）。

有什么解决办法吗？

我试图将 C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE 中的“devenv.exe”标记为“以管理员身份运行”，但是`'There was a problem sending the command to the program'`当我双击关联文件时会引发错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T09:45:00.130

*   将“C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\devenv.exe”标记为“以管理员身份运行”

*   在中，按“当前默认值”排序。`Control Panel\All Control Panel Items\Default Programs\Set
    Associations`

*   将每个条目从“Microsoft Visual Studio 2012”更改为“Microsoft Visual Studio 版本选择器”

# php - number_format PHP的问题

> ID：13084235
> 
> 赞同：0
> 
> 时间：2012-10-26T09:25:34.327
> 
> 标签：php

我在这条线上遇到了麻烦：

```
print "PRINT for row[EUROS]: " .$row['EUROS'] . "<BR>";
print "PRINT for the format: " .number_format($row['EUROS'], 2, ',', '') ."<BR>"; 
```

数字是**24,7**，但它显示我**24.00**。我认为 number_format 可以帮助我使用**,**分隔符，但它不起作用......

![错误](../Images/ac5f7efd5e6dd22a820686d3ca9374b0.png)

关于如何取十进制值的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T09:33:15.457

用`str_replace(',', '.', $row['EUROS'])`dot 替换逗号，然后使用`number_format`. 干杯!

number_format 中的第三个参数是 dec_point，它在输出字符串中分隔小数点，但在输入中没有。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-26T09:33:14.883

`"24,7"`不是数字，它是一个带有逗号的字符串，它不是一个*格式正确的数字*。PHP 可以从中提取的最好的含义是`24`，其余的都是垃圾。

不要有带逗号的数字。

# c - 从C中的字符串/字符数组中删除空格的函数

> ID：13084236
> 
> 赞同：7
> 
> 时间：2012-10-26T09:25:33.813
> 
> 标签：c, arrays, string

[这里](https://stackoverflow.com/questions/1726302/removing-spaces-from-a-string-in-c)提出的问题与我遇到的问题非常相似。不同之处在于我必须将参数传递给删除空格并返回结果字符串/字符数组的函数。我得到了删除空格的代码，但由于某种原因，我留下了原始数组中遗留的尾随字符。我什至尝试了 strncpy 但我遇到了很多错误。

这是我到目前为止所拥有的：

```
#include <stdio.h>
#include <string.h>
#define STRINGMAX 1000                                                      /*Maximium input size is 1000 characters*/

char* deblank(char* input)                                                  /* deblank accepts a char[] argument and returns a char[] */
{
    char *output=input;
    for (int i = 0, j = 0; i<strlen(input); i++,j++)                        /* Evaluate each character in the input */
    {
        if (input[i]!=' ')                                                  /* If the character is not a space */
            output[j]=input[i];                                             /* Copy that character to the output char[] */
        else
            j--;                                                            /* If it is a space then do not increment the output index (j), the next non-space will be entered at the current index */
    }
    return output;                                                          /* Return output char[]. Should have no spaces*/
}
int main(void) {
    char input[STRINGMAX];
    char terminate[] = "END\n";                                             /* Sentinal value to exit program */

    printf("STRING DE-BLANKER\n");
    printf("Please enter a string up to 1000 characters.\n> ");
    fgets(input, STRINGMAX, stdin);                                         /* Read up to 1000 characters from stdin */

    while (strcmp(input, terminate) != 0)                                   /* Check for que to exit! */
    {
        input[strlen(input) - 1] = '\0';
        printf("You typed: \"%s\"\n",input);                                /* Prints the original input */
        printf("Your new string is: %s\n", deblank(input));                 /* Prints the output from deblank(input) should have no spaces... DE-BLANKED!!! */

        printf("Please enter a string up to 1000 characters.\n> ");
        fgets(input, STRINGMAX, stdin);                                     /* Read up to another 1000 characters from stdin... will continue until 'END' is entered*/
    }
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-26T09:34:15.523

从 中删除空格后，`input`您没有使用 nul-terminator ( `\0`) 终止它，因为新长度小于或等于原始字符串。

只需在你的 for 循环结束时终止它：

```
char* deblank(char* input)                                         
{
    int i,j;
    char *output=input;
    for (i = 0, j = 0; i<strlen(input); i++,j++)          
    {
        if (input[i]!=' ')                           
            output[j]=input[i];                     
        else
            j--;                                     
    }
    output[j]=0;
    return output;
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-26T09:28:01.317

你没有终止输出，因为它可能已经缩小了，你把旧的尾巴留在了那里。

另外，我建议对 的处理`j`，它总是在循环中递增，然后如果当前字符没有被复制，则必须手动递减，这在某种程度上是次优的。这不是很清楚，而且它正在做毫无意义的工作（递增`j`），甚至在不需要时必须撤消。相当混乱。

它更容易写成：

```
char * deblank(char *str)
{
  char *out = str, *put = str;

  for(; *str != '\0'; ++str)
  {
    if(*str != ' ')
      *put++ = *str;
  }
  *put = '\0';

  return out;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T09:40:28.147

正如其他人提到的，相同的字符串用于源和目标，并且不维护字符串的结尾。

您也可以通过以下方式进行操作。

```
char* deblank(char* input)                                                  /* deblank accepts a char[] argument and returns a char[] */
{
    char *output;
    output = malloc(strlen(input)+1);

     int i=0, j=0;
    for (i = 0, j = 0; i<strlen(input); i++,j++)                        /* Evaluate each character in the input */
    {
        if (input[i]!=' ')                                                  /* If the character is not a space */
            output[j]=input[i];                                             /* Copy that character to the output char[] */
        else
            j--;                                                            /* If it is a space then do not increment the output index (j), the next non-space will be entered at the current index */
    }

    output[j] ='\0';
    return output;                                                          /* Return output char[]. Should have no spaces*/
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T09:42:43.610

在 for 循环块之后添加 null(\0) 终止符后，您必须返回字符串

```
char* deblank(char* input)                                                  
{
char *output=input;
for (int i = 0, j = 0; i<strlen(input); i++,j++)                        
{
    if (input[i]!=' ')                                                  
        output[j]=input[i];                                             
    else`enter code here`
        j--;                                                            
}
output[j]='\0';
return output;                                                          
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-18T13:12:31.650

如果您需要一次过滤多个字符，您可能会发现类似以下内容：

```
char *FilterChars(char *String,char *Filter){
  int a=0,i=0;
  char *Filtered=(char *)malloc(strlen(String)*sizeof(char));
  for(a=0;String[a];a++)
    if(!strchr(Filter,String[a]))
      Filtered[i++]=String[a];
  Filtered[i]=0;
  return Filtered;
} 
```

有用; 只需在 *Filter 中提供您希望删除的字符列表。例如“\t\n”，用于制表符、换行符和空格。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-21T14:39:26.540

此代码适用于 O(n) 的时间复杂度。

```
char str[]={"my name    is Om"};
int c=0,j=0;
while(str[c]!='\0'){
    if(str[c]!=' '){
        str[j++]=str[c];
    }
    c++;
}
str[j]='\0';
printf("%s",str); 
```

# mysql - MySQL 视图：将 unix 时间戳转换为日期时间

> ID：13084237
> 
> 赞同：2
> 
> 时间：2012-10-26T09:25:44.210
> 
> 标签：mysql, sql

如何在 MySQL 视图中转换时间戳？

我有一个 MySQL 视图，用于在 2 个不同的软件工具之间进行数据交换。原始表是一个 unix 时间戳，如`int(11)`. 另一个软件需要一个 DATETIME。

我有这样的视图：

```
CREATE VIEW `myView` AS 
select 
date_format(from_unixtime(`myUnixTimestamp`),_utf8'%d/%m/%Y %H:%i:%s') 
AS `Date-Entered`
from ... 
```

这个 VIEW 语句创建了一个 varchar(24) - 总比没有好，因为它可以转换 - 但转换会产生一些问题。

有什么方法可以在视图中创建 DATETIME 字段而不是 VARCHAR？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T09:37:10.660

您可以将值转换为`datetime`：

```
-- print a UNIX timestamp (as returned by NOW()) as DATETIME
SELECT CAST( DATE_FORMAT( NOW( ) , '%Y-%m-%d' ) AS DATETIME ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T10:25:30.783

感谢您的回答，我尝试了一些组合，并且这个组合有效（如此简单，可惜......）：

```
CREATE VIEW `myView` AS 
select 
from_unixtime(`myUnixTimestamp`)
AS `Date-Entered`
from ... 
```

查看结构显示：日期输入，类型：日期时间

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-26T09:40:33.200

尝试

```
CREATE VIEW `myView` AS 
select 
FROM_UNIXTIME([unix timestamp],'%d/%m/%Y %H:%i:%s') 
AS `Date-Entered`
from ... 
```

# php - 在 PHP 5.3 中，如何在没有严格警告的情况下在一行中获取单个元素数组中的值

> ID：13084238
> 
> 赞同：2
> 
> 时间：2012-10-26T09:25:47.603
> 
> 标签：php, arrays

给定一个返回数组的函数；

```
function return_me_an_array() {
  return array('my_value');
} 
```

如何调用它并以优雅的方式从数组中获取单个值（无论是第一个、最后一个还是唯一）（是的，我知道这是 PHP！）

如果我这样做

```
$var = reset(return_me_an_array()); 
```

我收到以下 PHP 严格错误：

> 严格警告：只能通过引用传递变量

同样，这些中的每一个都给出了相同的警告。

```
$var = array_shift(return_me_an_array());
$var = array_pop(return_me_an_array()); 
```

我知道我可以这样做：

```
$temp = return_me_an_array();
$var = $reset($temp); 
```

但是*必须*对两个语句进行处理是非常可怕的。

有没有好的方法来做到这一点？

从表面上看，这类似于[如何在 PHP 中返回一个数组并在一行中获取它的第一个元素？](https://stackoverflow.com/questions/4286734/how-to-return-an-array-and-get-the-first-element-of-it-in-one-line-in-php)但接受的答案使用`reset`- 所以我认为这是不同的；我要么正在寻找一个不给出严格警告的解决方案，要么被告知我想要什么是不可能的。

我也知道 PHP 5.4 引入了数组取消引用（例如`return_me_an_array()[0]`），但是我目前使用的是 5.3。

**关闭后编辑**：这怎么太本地化了？这是关于如何编写优雅的 PHP 的一般问题。还是很少有人关心优雅的 PHP，这是“一种非常狭窄的情况，并不普遍适用于互联网的全球受众”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T09:34:26.137

用这个：

```
$var = current(return_me_an_array()); 
```

演示：http: [//3v4l.org/Ruj5e](http://3v4l.org/Ruj5e)

手册： http: [//php.net/manual/en/function.current.php](http://php.net/manual/en/function.current.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T09:40:25.947

为此目的定义您自己的数组方法：

```
function my_reset($array)
{
    return reset($array);
}

echo my_reset(return_me_an_array()); 
```

**升级版：**

还有更优雅的方法，查看[Returning References](http://php.net/manual/en/language.references.return.php)手册

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T09:39:06.403

用这个：

```
$var = array_shift($var = return_me_an_array()); 
```

[链接到键盘](http://codepad.org/cKP73JjF)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T15:59:58.910

好的，他不能只是抑制错误吗？还是不够优雅？

`$var = @reset(return_me_an_array());`

[或在https://stackoverflow.com/a/6726277/881551](https://stackoverflow.com/a/6726277/881551)上分享

`$var = reset( ( return_me_an_array() ) );`

为了规避严格的通知，这两者都经过测试并且工作正常，这实际上是被要求的。

# c# - 在图表上绘制自定义线条

> ID：13084239
> 
> 赞同：0
> 
> 时间：2012-10-26T09:25:50.407
> 
> 标签：c#, jquery

我有个要求，

生成折线图，然后用户必须能够在图表上绘制自定义线并使用新添加的线保存图表。我更喜欢使用高图表或谷歌图表来生成图表，但我找不到在图表上绘制自定义线的解决方案。有什么办法可以满足我的要求吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T09:31:34.577

Highcharts/Google 图表都生成 SVG 内容，因此如果您想在图表顶部绘图，则必须手动操作 SVG DOM - 我建议您使用[Raphael](http://raphaeljs.com/)进行自定义绘图。

# sql-server-2008 - 如何从最新插入的记录中获取最后一条记录

> ID：13084245
> 
> 赞同：-1
> 
> 时间：2012-10-26T09:26:20.380
> 
> 标签：sql-server-2008

我有一张这样的桌子

```
Col1   Col2  Mindate                        MaxDate 
A       B    12-04-2012 00:12:00:087        31-04-2012 00:00:01:001
C       D    01-01-2011                     30-01-2011 
A       B    09-05-2012                     27-05-2012
A       B    11-07-2012                     21-07-2012 
```

我只在第一行插入了日期时间，但为简洁起见在其他行中省略了，所有日期列都是日期时间。

假设我已经插入了 A 和 B 的最后一条记录（Col1 和 Col2 是组合键）。现在我想要基于以上情况下的思维定势的 A 和 B 的最后记录

```
A       B    09-05-2012                     27-05-2012 
```

我正在尝试以下查询：

```
SELECT * FROM tbl WHERE Col1 ='A' AND Col2='B' AND .... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T09:31:31.357

可以通过Mindate对表格进行降序排序，得到rank 2对应的记录。

```
SELECT t1.*
FROM
    table t1
    JOIN (SELECT Col1, Col2, RANK() OVER (ORDER BY Mindate DESC) 'Rank' 
          FROM table
          WHERE Col1 = 'A' AND col2 = 'B'
    ) as t2
ON t1.Col1 = t2.Col1 AND t1.col2 = t2.col2 AND t1.rank = 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T09:32:51.570

性能不是很好，但应该做的工作

```
SELECT * FROM tbl 
WHERE Col1 ='A' AND Col2='B'
AND mindate = (select max(mindate) from tbl where Col1 = 'A' AND Col2='B') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T09:35:58.477

您可以使用`ROW_NUMBER`：

```
WITH CTE AS
(
   SELECT Col1, Col2, Mindate, MaxDate
    , RN = ROW_NUMBER() OVER (PARTITION BY Col1, Col2 ORDER BY Mindate DESC)
   FROM dbo.Tbl
   WHERE COL1='A' AND COL2='B'
)
SELECT Col1, Col2, Mindate, MaxDate
FROM CTE 
WHERE RN = 2 
```

这将根据 Mindate 和给定的键返回倒数第二条记录。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-10-26T09:31:27.460

```
SELECT * FROM tbl WHERE Col1 ='A' AND Col2='B' AND Mindate = MAX(Mindate) 
```

# javascript - 多个多边形的差异信息窗口

> ID：13084253
> 
> 赞同：-3
> 
> 时间：2012-10-26T09:27:00.880
> 
> 标签：javascript, google-maps, polygon, infowindow

这是我的代码，其中有一个用于创建多边形的循环，并为它们“单击”事件侦听器，其中将显示一个信息窗口。

```
 var GoogleMap,polyInfoWindow,polygon,getPath,getInfo;
    function PolygonToMap()
    {
        GoogleMap = // map initialization   //;
        polyInfoWindow= // Infowindow initialization for polygons   //;

        //  for loop of number polygons top create
        {
            getPath=    //  get path for new polygon    // ;
            polygon = new google.maps.Polygon({ 
                paths: getPath, 
                strokeColor: "#0071bc", 
                strokeOpacity: 1, 
                strokeWeight: 2, 
                fillColor: "#000000", 
                fillOpacity: 0.1, 
                map:GoogleMap 
            });

            getInfo=    // get new data for new polygon //  ;
            google.maps.event.addListener(polygon,"click",function(event){
                polyInfoWindow.setContent(getInfo);
                polyInfoWindow.open(GoogleMap);
                polyInfoWindow.setPosition(event.latLng);
            });

        }
    } 
```

这里的多边形可以很好地生成，但是在多边形上单击所有多边形时，显示的信息窗口数据是相同的（信息窗口与循环中最后一个多边形信息数据的数据）。这意味着在每个多边形创建的 for 循环中，在事件中添加侦听器 infowindows 数据将覆盖所有多边形 infowindw。

所以，我需要的是每个多边形在信息窗口中显示其数据将“点击”，即每个多边形信息窗口的差异数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T12:47:33.543

将信息窗口与多边形相关联的最简单方法是使用函数闭包。

[例子](http://www.geocodezip.com/v3_polygon_example_clickable_squares.html)

# javascript - 在另一个模态中调用 javascript 模态

> ID：13084254
> 
> 赞同：0
> 
> 时间：2012-10-26T09:27:04.323
> 
> 标签：javascript, jquery, modal-dialog

我正在尝试将模态ie（janrain给出的javascript函数）集成到已经存在的模态中。我的网站在 MVC 架构中运行。我的屏幕上有很多选项卡，我正在为**tabs.htm**文件中的所有选项卡编写所有 javascript 函数。

一旦点击了一个选项卡，它就会在 tabs.htm 文件中调用 javascript 函数，然后对特定的 html 文件进行 ajax 请求，然后在点击的选项卡中显示 html 的所有内容。

在选项卡中说我有一个按钮，在 onclick 事件中我调用 tabs.htm 文件中的 javascript 函数，然后从特定的选项卡 html 文件调用模态，然后在选项卡中显示模态。

现在我需要添加如下所示的 janrain 给出的模态，在下面的另一个模态下方。

```
(function() {
    if (typeof window.janrain !== 'object') window.janrain = {};
    if (typeof window.janrain.settings !== 'object') window.janrain.settings = {};

    janrain.settings.tokenUrl = 'MY_URL';

    function isReady() { janrain.ready = true; };
    if (document.addEventListener) {
      document.addEventListener("DOMContentLoaded", isReady, false);
    } else {
      window.attachEvent('onload', isReady);
    }

    var e = document.createElement('script');
    e.type = 'text/javascript';
    e.id = 'janrainAuthWidget';

    if (document.location.protocol === 'https:') {
      e.src = 'https://rpxnow.com/js/lib/oauth/engage.js';
    } else {
      e.src = 'http://widget-cdn.rpxnow.com/js/lib/oauth/engage.js';
    }

    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(e, s);
})(); 
```

这是我已经在 A 的 htm 文件中的按钮单击事件中调用的模式。

```
<div id="basic-modal-content">
<table width="100px" cellpadding="5" style="border-collapse:collapse;">
<tr>
<td width="140px">
Name     
</td>     
<input type="text" id="txtUserName" name="txtUserName" class="glow" style="width:150px;">
</td>
</tr>
<tr>
<td width="140px">
E-Mail ID
</td>
<td>
<input type="text" id="txtEmailQuest" name="txtEmailQuest" class="glow" style="width:150px;">
</td>
</tr>                 
</table>
<div style="text-align:center">
<input id="ask" type="image" src="/templates/default/images/askQuestion.jpg"  onClick="ValidateFormHere()"/>
</div> 
```

现在我想将 javascript 模式添加到这个表单中。如果我将 javascript 模态保存在 tabs.htm 文件中，当调用此模态时如何调用它。如果我将 javascript 文件粘贴到上面粘贴的模式中，则它不起作用。希望我的问题很清楚。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T00:28:55.467

维涅什。你需要做两件事：

1 - 转到[https://rpxnow.com/relying_parties/your_rp_here](https://rpxnow.com/relying_parties/your_rp_here)并转到部署 > 登录 Web。将您的小部件类型设置为嵌入式（非模态），然后点击保存并发布。

2 - 在您希望显示按钮的表单中，添加以下代码行：

```
<div id="janrainEngageEmbed"></div> 
```

导致该选项卡加载的 JavaScript 有可能实际上不会加载小部件。如果发生这种情况，请在加载该选项卡的同一事件中调用 janrain.engage.signin.widget.init() 函数。它应该让小部件为您加载。

# python - Django评论垃圾邮件过滤器

> ID：13084256
> 
> 赞同：1
> 
> 时间：2012-10-26T09:27:11.670
> 
> 标签：python, django, django-forms, spam

我昨天实施了评论框架，一切都很好。但是，我设置了一个小脚本，以便在发布评论时收到电子邮件，因此如果我愿意，我可以发布评论。然而，昨晚我收到了大约 20 封来自该页面上的机器人的垃圾邮件。我检查了谷歌分析，昨天我有 28 个页面浏览量和 6 个独特浏览量。所以它看起来像 1 或 2 个机器人，并且已经多次填写表格。

当我在网站上查看源代码时，“蜜罐”字段就在那里，所以我不确定为什么会捕获垃圾邮件。我想知道我的代码中是否遗漏了一些内容以使蜜罐/垃圾邮件过滤器正常工作？

这是我表单的所有代码，我对 Django 还很陌生，不，我可能错过了任何东西。我看不出实施第三方垃圾邮件过滤器的原因，因为网站上的流量并不高。

///形式

```
{% get_comment_form for notice as form %}
  <div id="comment_wrap">

   <h1>Comments</h1>
   {% get_comment_list for notice as comment_list %}
   {% get_comment_count for notice as comment_count %}
   <h2>{{comment_count}} comment{{ comment_count|pluralize:"s"}}</h2>
    <form action="{% comment_form_target %}" method="post">

   <table>
   <tr>

    <td>
    {{ form.comment.errors }}
    <div class="add">
      <textarea id="id_comment" name="comment" value="Add a comment...">Add a comment...</textarea></div>
   </td>
   </tr> 
   </table>

   <table>
    <tr>
      {{ form.non_field_errors }}
      <td height="30">

    {{ form.name.errors }}
    <div class="name"><input id="id_name" type="text" maxlength="50" name="name" value="Name"></div>

      </td>

      <td>
    {{ form.company.errors }}

    <div class="company">
      <input type="text" maxlength="50" name="company" id="id_company" value="Company">
    </div>

      </td>

      <input type="hidden" name="url" value="http://www.website.org" />
       <input type="hidden" name="email" value="email@email.com" /> 

      <td>
    <input type="hidden" name="next" value="{{notice.get_absolute_url}}#commentmade"/>

    <button class="submit" value="Submit" >Submit</button>

      </td>
    </tr>
   </table>

   <div id="commentmade" style="display: none;"><p>Thanks for posting. Your comment is awaiting approval.</p></div>
   <div class="fieldWrapper honey_pot">
    {{ form.honeypot.errors }}
    <label for="id_honeypot">If you enter anything in this field your comment will be treated as spam:</label>
    {{ form.honeypot }}
    {{ form.content_type.errors }}
    {{ form.content_type }}

    {{ form.object_pk.errors }}
    {{ form.object_pk }}

    {{ form.timestamp.errors }}
    {{ form.timestamp }}

    {{ form.security_hash.errors }}
    {{ form.security_hash }}
</div>

   </form>

  </div>

  {% for comment in comment_list reversed %}
  <div id="comment_post">
    <span class="name">{{comment.user_name}}</span>
    <span class="company"> | {{comment.company}} | </span>
    <span class="time">{{comment.submit_date|timesince}}</span>
    <p>{{comment.comment}}</p>

  </div>
  {% endfor %} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T09:53:10.500

[蜜罐](https://github.com/django/django/blob/master/django/contrib/comments/forms.py#L189)只是一个隐藏的填充物，很可能是由机器人而不是真实用户填充的。

当蜜罐有值时，表单不会验证。

例如，集成在 django-akismet 中的 Akismet 之类的解决方案可能会为您提供更多帮助。

# iphone - 使用 Parse 发布到 Facebook 时间线的链接

> ID：13084259
> 
> 赞同：2
> 
> 时间：2012-10-26T09:27:31.593
> 
> 标签：iphone, objective-c, ios, facebook

我正在使用 Parse 移动平台在 facebook 时间轴上发布提要。这就是他们在文档中所说的：`Note that if you already have the Facebook SDK installed in your app, our version of the Facebook SDK will happily work alongside it.`

看看[这里](https://parse.com/docs/ios_guide#fbusers-instance)。 `The Parse SDK includes the entire Facebook SDK. All the classes are namespaced with PF_ to avoid conflicts with existing libraries. So, for example, the main Facebook object class in our SDK is PF_Facebook.`

这个使用[Facebook SDK](http://developers.facebook.com/docs/howtos/publish-to-feed-ios-sdk/)可以完美运行：

```
- (IBAction)postFacebook:(UIButton *)sender {    
    self.postParams =
    [[NSMutableDictionary alloc] initWithObjectsAndKeys:
     @"https://developers.facebook.com/ios", @"link",
     @"https://developers.facebook.com/attachment/iossdk_logo.png", @"picture",
     @"Facebook SDK for iOS", @"name",
     @"Here we go", @"message",
     @"Build great social apps and get more installs.", @"caption",
     @"The Facebook SDK for iOS makes it easier and faster to develop Facebook integrated iOS apps.", @"description",
     nil];

    [FBRequestConnection startWithGraphPath:@"me/feed" parameters:self.postParams HTTPMethod:@"POST"
     completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
        [self showAlert:@"Link is posted" result:result error:error];
     }];
} 
```

但是当我使用 PF_FBRequestConnection 时，它不起作用：

```
[PF_FBRequestConnection startWithGraphPath:@"me/feed" parameters:params HTTPMethod:@"POST"
        completionHandler:^(PF_FBRequestConnection *connection, id result, NSError *error) {
            [self showAlert:@"Link is posted" result:result error:error];
    }]; 
```

控制台中的错误：

```
Error: HTTP status code: 403 
```

问题是我可以发布`photo or Status`使用 Parse，但不能发布您看到的链接。

我很感激任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T20:06:09.067

问题是`Parse`我使用的框架版本。你也可以在[这里查看](https://www.parse.com/questions/fblogin-do-we-need-to-use-fbsessionactivesession-handledidbecomeactive)。

例如，该版本（1.1.12）不支持此版本：

```
[PF_FBSession.activeSession handleDidBecomeActive]; 
```

在新版本（1.1.13）中问题得到解决。所以我可以有这个方法：

```
// Convenience method to perform some action that requires the "publish_actions" permissions.
- (void) performPublishAction:(void (^)(void)) action {
    // we defer request for permission to post to the moment of post, then we check for the permission
    if ([PF_FBSession.activeSession.permissions indexOfObject:@"publish_actions"] == NSNotFound) {
        // if we don't already have the permission, then we request it now
        [PF_FBSession.activeSession reauthorizeWithPublishPermissions:[NSArray arrayWithObject:@"publish_actions"]
            defaultAudience:FBSessionDefaultAudienceFriends completionHandler:^(PF_FBSession *session, NSError *error) {
                if (!error) {
                    action();
                }
            //For this example, ignore errors (such as if user cancels).
        }];
    } else {
        action();
    }
} 
```

并以这种方式使用它：

```
[self performPublishAction:^{
        [PF_FBRequestConnection startWithGraphPath:@"me/feed" parameters:self.postParams HTTPMethod:@"POST"
            completionHandler:^(PF_FBRequestConnection *connection, id result, NSError *error) {
                [self showAlert:@"Link is posted" result:result error:error];
        }];
    }]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T10:30:04.587

您必须检查您的应用程序拥有的权限。来自[Facebook SDK 文档](https://developers.facebook.com/docs/oauth/errors/)

**不足范围：**请求需要比访问令牌提供的权限更高的权限。资源服务器应该以 HTTP 403（禁止）状态代码响应，并且可以包含“范围”属性以及访问受保护资源所需的范围。

# msmq - NServiceBus 工具 - ReturnToSourceQueue 出错后退出

> ID：13084263
> 
> 赞同：1
> 
> 时间：2012-10-26T09:27:46.247
> 
> 标签：msmq, nservicebus

有一些消息卡在错误队列中，我想将它们传输回正常的消息队列，以便 NServiceBus 订阅者可以提取并处理它们。

我的同事找到了工具 ReturnToSourceQueue.exe，它可以帮助您将它们转移回队列。但是当我尝试在安装了订阅者和消息队列的 Web 服务器上运行它时，ReturnToSourceQueue.exe 给了我这个消息：

“ReturnToSourceQueue 遇到问题需要关闭。对于给您带来的不便，我们深表歉意”

关于如何解决这个问题的任何线索？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T12:42:31.140

当我们不得不使用该工具将消息从错误移回集群上的正常队列时，我们遇到了类似的问题（据我所知，在 NServiceBus 2.5 上）。我发现这个[ReturnToSource powershell 脚本](http://adamfyles.blogspot.co.uk/2011/03/returntosourcequeue-powershell-script.html)可以进行一些调整。如果它不能开箱即用，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T03:03:56.867

我已经做了一个管理 NServiceBus 消息的小工具，它已经在远程服务器上进行了测试，并提供了用于选择错误消息的 Windows UI。

你可以[在这里下载](http://blog.halan.se/page/Service-Bus-MQ-Manager.aspx)

# linux - 如何获取有关 configure.ac 中使用的 MACRO 的完整信息

> ID：13084264
> 
> 赞同：0
> 
> 时间：2012-10-26T09:27:52.503
> 
> 标签：linux, makefile, autotools

我是linux的初学者，现在正在研究GNU app的自动工具。

我从 gnu 网站获得了 autoconf 文档。

但是 configure.ac 的宏对我来说还不够。

有没有地方可以提供完整的信息？像`AC_PROG_LIBTOOL`, 和`AC_RPOG_RANLIB`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:31:35.320

关于您提到的两个宏的文档的最佳位置可能是`info libtool`和`info autoconf`. 请注意，`AC_PROG_LIBTOOL`已弃用，应替换为`LT_INIT`. 有关所有血腥细节，请参阅文件`$( aclocal --print )/libtool.m4`。（即`libtool.m4`在目录路径`aclocal`中查找命名的文件。）

# sql - SQL：实现存储过程或触发器

> ID：13084276
> 
> 赞同：0
> 
> 时间：2012-10-26T09:28:31.340
> 
> 标签：sql, oracle, stored-procedures, triggers

我正在使用 Sql Developer 和 Oracle。

我需要在数据库中实施一个系统，以便一旦客户的供应被切断，负责账单的个人或企业将无法在不同的服务地址创建新帐户，直到他们的欠款有被清除。这需要使用触发器或存储过程来实现。

这是我尝试过的

```
 create or replace PROCEDURE NONEWACCOUNT(newcustomerID in number, 
                                             newStatus in varchar)
                                              AS
begin

      select 
      from a2_watermeter
      where customerid = newcustomerid and Status = newStatus;

      if (newStatus = 'Inactive') then
          DBMS_OUTPUT.put_line('Can not make new account as customer has to pay his/or account');
      end if;
      end; 
```

下面是我的数据库。

但由于我对 sql 完全陌生，我不知道要改变什么

为任何可以对此有所了解的人干杯。

我的数据库

```
 a2_METERREADER

 - EMPLOYEEID
 - FIRSTNAME
 - LASTNAME

a2_READING

 - READINGID
 - METERID
 - EMPLOYEEID
 - BILLNUMBER
 - READING
 - DATERECORD

a2_Watermeter

 - METERID
 - ADDRESS
 - SUBURB
 - POSTCODE
 - STATUS
 - CUSTOMERID
 - REPLACE
 - INSTALLDATE

 a2_customer

    - customerid
    - firstname
    - lastname
    - address
    - suburb
    - postcode
    - email
    - phone
    - businessname
    - dateofbirth

 a2_bill

    - billnumber
    - address
    - suburb
    - postcode
    - customerid
    - readingid
    - amount
    - reading
    - firstname
    - lastname
    - paid
    - duedate 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T09:40:19.037

您需要编写[存储过程](http://docs.oracle.com/cd/E11882_01/appdev.112/e10766/tdddg_subprograms.htm#CIHDFDJG)，而不是触发器。[可以从计划的作业](http://docs.oracle.com/cd/E11882_01/server.112/e25494/schedover001.htm#ADMIN12354)中调用存储过程，可能每天一次。触发器响应 DML 活动而触发，这是不可预测的。

您并没有真正提供太多信息，因此很难为您提供定义解决方案。此外，为您完成工作不是我们在 SO 上的职责。但存储过程的核心将是这样的查询：

```
select *
from a2_bill
where paid = 'NO'
and duedate <= (sysdate - interval '60' day) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T09:49:48.960

```
CREATE OR REPLACE PROCEDURE 
    procname
IS
    rec a2_watermeter%ROWTYPE;
    CURSOR cur
        IS
            SELECT
                *
            FROM
                a2_watermeter
            WHERE
                status = 'active'
            FOR UPDATE;
BEGIN
    OPEN cur;
    LOOP
        FETCH cur INTO rec;
        EXIT WHEN cur%NOTFOUND;

        IF (SYSDATE - (
                  SELECT MIN(duedate) 
                  FROM a2_bill b 
                  WHERE b.customerid = rec.customerid AND b.paid = FALSE
                  GROUP BY(customerid, paid)
                  )) > 60 
        THEN
            UPDATE
                a2_watermeter w
            SET
                status = 'inactive'
            WHERE CURRENT OF cur;
        END IF;
    END LOOP;
    CLOSE cur;

END; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T09:58:39.363

您可以创建一个具有计算值状态的视图。这可以在您的程序中使用并在其他地方使用。这样业务逻辑就在一个地方是这样的：

```
create view customerstatus  
select c.customerid
,      decode(b.custimerid,null,'Active','Inactive') as status
from customer c
left outer join bill b on (b.customerid = c.custimerid)
where b.payed = 'N'
and b.duedate <= (sysdate - interval '60' day); 
```

# jquery - 使用带有历史记录的 FancyBox 加载内联内容

> ID：13084281
> 
> 赞同：0
> 
> 时间：2012-10-26T09:28:49.930
> 
> 标签：jquery, fancybox

我正在使用历史插件，下面是我的代码：
1\. 当我点击链接时，浏览器地址栏显示-http://.../test.html#gallery-1，如果将此地址粘贴到另一个窗口中不会自动打开fancybox，为什么？我错过了什么？

2\. # 后面的名字怎么改？

```
$(".subjectwrap").fancybox({
helpers : {
        history : true
    }
});

<a class="subjectwrap" href="#contentinline">
    <img src="img/test.jpg" height="200">
</a>

<div class="contentwrap" style="display:none" id="contentinline">
Lorem ipsum dolor sit amet
<img src="img/1.jpg" height="200">
</div> 
```

[http://jsfiddle.net/Tv3dA/](http://jsfiddle.net/Tv3dA/)

[http://jsfiddle.net/Tv3dA/show/light](http://jsfiddle.net/Tv3dA/show/light)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T13:45:17.520

您必须为画廊设置名称 - 添加“rel”或“data-fancybox-group”属性。您可以选择自己的名称，它将用作哈希（在#之后）

```
<a rel="gallery" class="fancybox" href="http://fancyapps.com/fancybox/demo/1_b.jpg"><img src="http://fancyapps.com/fancybox/demo/1_s.jpg" alt=""/></a> 
```

演示 - [http://jsfiddle.net/FB7UW/](http://jsfiddle.net/FB7UW/)

# svn - 服务/命令行中 RequestSource 的不同值

> ID：13084283
> 
> 赞同：0
> 
> 时间：2012-10-26T09:28:56.230
> 
> 标签：svn, cruisecontrol.net, publish, cruisecontrol, build-server

我有一个 CruiseControl 项目设置，其中包含两个不同的触发器，用于 SVN 触发构建和夜间构建。

```
<triggers>
        <scheduleTrigger name="Nightly Build" time="23:30" buildCondition="ForceBuild"  randomOffSetInMinutesFromTime="20"  />
        <intervalTrigger name="Continuous Build" seconds="120" buildCondition="IfModificationExists" initialSeconds="15" />
    </triggers> 
```

根据触发器，我想在主题中发送带有触发器名称的电子邮件并将构建发布到触发器文件夹。

```
<buildpublisher>
            <sourceDir>SomeSourcePath\bin\Release</sourceDir>
            <dynamicValues>
                <replacementValue property="publishDir">
                    <format>\SomeDestinationPath\Buildserver\DMS3G_PRISM\{0}\Build</format>
                    <parameters>
                        <namedValue name="$CCNetRequestSource" value="BuildPublisher" />
                    </parameters>
                </replacementValue>
            </dynamicValues>
            <useLabelSubDirectory>false</useLabelSubDirectory>
        </buildpublisher> 
```

当我通过 clickign 在 CruiseControl.NET 命令行应用程序上运行它时，它会将其发布到名为“Continous Build”/“Nightly Build”的文件夹，但是当我启动服务时，文件夹的**名称始终是服务器**的名称。

你知道这个问题的任何解决方案吗？

谢谢强尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T13:46:04.540

我发现，如果直接通过 Web 界面触发构建，则触发器名称始终是运行服务的机器的名称。

# jquery - 悬停时的 jQuery 动画 | 非常快的通过，停止动画

> ID：13084289
> 
> 赞同：1
> 
> 时间：2012-10-26T09:29:35.133
> 
> 标签：jquery, jquery-plugins, jquery-animate

我创建了一个非常小的 jQuery 插件，供个人使用，它在悬停事件时在图像顶部创建叠加层，然后为两个图标设置动画。

鼠标移出时，它会再次为图标设置动画，然后淡出覆盖。

虽然动画很好，但问题出在图标上。在鼠标的过快通过动画 - 进入 - 图标但不动画 - 出 - 图标。

在这里你可以看到我的意思的一个活生生的例子：http: [//jsfiddle.net/merianos/yPerY/1/](http://jsfiddle.net/merianos/yPerY/1/)

按照源代码

**HTML**

```
<section class="clearfix span-10 last post_container ">
    <article>
        <div class="imageHover">
            <span class="overlay"></span>
            <a href="#" class="image_preview"></a>
            <a href="#" class="image_link"></a>
            <img src="http://goo.gl/YRC7G" />
        </div>
    </article>
</section>​ 
```

**CSS**

```
.post_container
{
    position : relative;
    margin   : 100px;
}

    .post_container article
    {
        position    :   relative;
        display     :   block;
        width       :   280px;
    }

        .post_container article img
        {
            width   :   278px;
            border  :   1px solid #dfe1e0;
        }

            .post_container article .overlay
            {
                z-index     :   740;
                display     :   block;
                width       :   100%;
                height      :   121px;
                background  :   #000;
                opacity     :   0;
                position    :   absolute;
                top         :   0;
                left        :   0;
            }

            .post_container article .image_link,
            .post_container article .image_preview
            {
                display             :   block;
                width               :   32px;
                height              :   32px;
                position            :   absolute;
                cursor              :   pointer;
                z-index             :   741;
                top                 :   88px;
                opacity             :   0;
            }

            .post_container article .image_link
            {
                background :   #0AF;
                left       :   98px;
            }

            .post_container article .image_preview
            {
                background :   #F0A;
                left       :   150px;
            }​ 
```

**JavaScript**

```
;(
    function($)
    {
        $.fn.extend(
            {
                wplImageHover: function(options)
                {
                    this.defaultOptions = {};

                    var settings    =   $.extend({}, this.defaultOptions, options);
                    var image       =   null;

                    var methods =   {
                        init    :   function()
                        {
                            image.mouseenter(
                                function(e)
                                {
                                    var overlay = $(this).find('.overlay');

                                    overlay.stop().animate(
                                        {
                                            'opacity'   :   '0.25'
                                        },
                                        150
                                    );

                                    overlay.queue(
                                        function()
                                        {
                                            var image_preview   =   $(this).siblings('.image_preview');
                                            var image_link      =   $(this).siblings('.image_link');

                                            image_preview.stop().animate(
                                                {
                                                    'opacity'   :   1,
                                                    'top'       :   '44px'
                                                },
                                                150
                                            );

                                            image_link.stop().animate(
                                                {
                                                    'opacity'   :   1,
                                                    'top'       :   '44px'
                                                },
                                                150
                                            );

                                            $(this).dequeue();
                                        }
                                    );

                                    e.preventDefault();
                                }
                            ).mouseleave(
                                function(e)
                                {
                                    var image_preview   =   $(this).find('.image_preview');
                                    var image_link      =   $(this).find('.image_link');

                                    image_preview.stop().animate(
                                        {
                                            'opacity'   :   0,
                                            'top'       :   0
                                        },
                                        150
                                    );

                                    image_link.stop().animate(
                                        {
                                            'opacity'   :   0,
                                            'top'       :   0
                                        },
                                        150
                                    );

                                    image_link.queue(
                                        function()
                                        {
                                            var overlay   =   $(this).siblings('.overlay');

                                            overlay.stop().animate(
                                                {
                                                    'opacity'   :   0
                                                },
                                                150
                                            );

                                            overlay.queue(
                                                function()
                                                {
                                                    $(this).css(
                                                        {
                                                            'opacity'   :   '0'
                                                        }
                                                    );

                                                    $(this).siblings('.image_link, .image_preview').css(
                                                        {
                                                            'opacity'   :   '0',
                                                            'top'       :   '88px'
                                                        }
                                                    );

                                                    $(this).dequeue();
                                                }
                                            );

                                            $(this).dequeue();
                                        }
                                    );

                                    e.preventDefault();
                                }
                            );
                        }
                    }

                    return this.each(
                        function()
                        {
                            image = $(this);

                            methods.init();
                        }
                    );
                }
            }
        );
    }
)(jQuery);

$('.imageHover').wplImageHover();​ 
```

有人可以帮帮我吗？

亲切的问候梅里亚诺斯尼科斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T10:41:30.760

[演示 JSFiddle](http://jsfiddle.net/yPerY/4/ "JSFiddle")

在使用 CSS 对图像应用顶部和不透明度之前的 mouseleave 事件中，停止在这些图像上发生的动画。否则它将覆盖您正在应用的 CSS（仅当动画在应用 CSS 时发生）。如果我们移动得非常快，您在鼠标输入中应用的动画正在发生。所以这导致了这个问题。

所以试试下面的脚本。

```
;(
function($)
{
    $.fn.extend(
        {
            wplImageHover: function(options)
            {
                this.defaultOptions = {};

                var settings    =   $.extend({}, this.defaultOptions, options);
                var image       =   null;

                var methods =   {
                    init    :   function()
                    {
                        image.mouseenter(
                            function(e)
                            {
                                var overlay = $(this).find('.overlay');

                                overlay.stop().animate(
                                    {
                                        'opacity'   :   '0.25'
                                    },
                                    150
                                );

                                overlay.queue(
                                    function()
                                    {
                                        var image_preview   =   $(this).siblings('.image_preview');
                                        var image_link      =   $(this).siblings('.image_link');

                                        image_preview.stop().animate(
                                            {
                                                'opacity'   :   1,
                                                'top'       :   '44px'
                                            },
                                            150
                                        );

                                        image_link.stop().animate(
                                            {
                                                'opacity'   :   1,
                                                'top'       :   '44px'
                                            },
                                            150
                                        );

                                        $(this).dequeue();
                                    }
                                );

                                e.preventDefault();
                            }
                        ).mouseleave(
                            function(e)
                            {
                                var image_preview   =   $(this).find('.image_preview');
                                var image_link      =   $(this).find('.image_link');

                                image_preview.stop().animate(
                                    {
                                        'opacity'   :   0,
                                        'top'       :   0
                                    },
                                    150
                                );

                                image_link.stop().animate(
                                    {
                                        'opacity'   :   0,
                                        'top'       :   0
                                    },
                                    150
                                );

                                image_link.queue(
                                    function()
                                    {
                                        var overlay   =   $(this).siblings('.overlay');

                                        overlay.stop().animate(
                                            {
                                                'opacity'   :   0
                                            },
                                            150
                                        );

                                        overlay.queue(
                                            function()
                                            {
                                                $(this).css(
                                                    {
                                                        'opacity'   :   '0'
                                                    }
                                                );

                                                $(this).siblings('.image_link, .image_preview').stop().css(
                                                    {
                                                        'opacity'   :   '0',
                                                        'top'       :   '88px'
                                                    }
                                                );

                                                $(this).dequeue();
                                            }
                                        );

                                        $(this).dequeue();
                                    }
                                );

                                e.preventDefault();
                            }
                        );
                    }
                }

                return this.each(
                    function()
                    {
                        image = $(this);

                        methods.init();
                    }
                );
            }
        }
    );
}
)(jQuery);

$('.imageHover').wplImageHover();​ 
```

# scala - 如何在 Scala 中使用原语？

> ID：13084290
> 
> 赞同：17
> 
> 时间：2012-10-26T09:29:37.713
> 
> 标签：scala, primitive-types

我可以在 Scala 中使用原语吗？

该用例用于存储数十亿个整数，因此 4 字节（对于整数）和 16 字节（对于整数）之间的差异很重要。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-26T09:49:07.920

如果您希望 Scala 存储未装箱的原语，您可以使用`Array[Int]`但不要在其上使用任何酷的 Scala 集合方法（因为它会强制装箱）。

如果您寻找原始类型的不可变集合，您可以查看[Debox](https://github.com/non/debox)，它提供了专门的 Buffer、Set 和 Map。该项目仍在发展中，但非常有前途。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-26T09:32:38.550

您可以使用`@specialised`注解让编译器为您创建类的专用实例。见[这篇文章](https://web.archive.org/web/20121227215434/http://www.scala-notes.org/2011/04/specializing-for-primitive-types/)。

```
class Container[@specialized(Int) T](value: T) {
  def apply(): T = value
} 
```

# html - 在提交时在表单中添加锚点？

> ID：13084291
> 
> 赞同：3
> 
> 时间：2012-10-26T09:29:38.907
> 
> 标签：html, anchor

我正在使用一个名为 Advanced Poll 的脚本，它运行良好。但是我有一个小的“化妆品”问题，我无法解决。

民意调查位于我网站的右下方。但是在有人提交他或她的投票后，您会被推回到页面顶部，而不是专注于投票（右下角）。

通常使用普通 html，您可以通过添加锚点和链接轻松解决此问题，但是因为这是表单，我不明白如何正确执行此操作。因此，它会在提交投票后将页面“重新加载”回投票部分，而不是再次向下滚动。

我自己试着用 HTML 玩弄了一下，但是没有运气。它从网站顶部开始，而不是停留在投票区域附近。

我在投票部分上方添加了以下代码：

```
<a name="backtopoll"></a> 
```

我补充说：

```
 #backtopoll 
```

至：

```
<a href="$this->form_forward?action=results&amp;poll_ident=$poll_id" class="link link-indent fright">$pollvars[result_text]</a> 
```

结果是：

```
 <a href="$this->form_forward?action=results&amp;poll_ident=$poll_id#backtopoll" class="link link-indent fright">$pollvars[result_text]</a> 
```

但这没有用。一旦我点击提交投票，我的投票就被投了，我发现自己又回到了网站的顶部，而不是在投票部分重新加载页面。:(

我在这里做错了什么......？

//更新

添加/更改为：

```
 <a id="backtopoll"></a> 
```

正如诗巫所说，没有用。

//另一个更新

也许我可以对页面上的 jQuery 或 JS 做同样的事情？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T11:51:38.870

没关系，我使用此处描述的信息自己修复了它：[是否可以在 FORM 帖子/获取中添加锚点？](https://stackoverflow.com/questions/693545/is-it-possible-to-add-an-anchor-to-a-form-post-get)

```
<form action="mypage.aspx#MyAnchor"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T09:38:57.077

试试这种方式，# 用于 id 而不是 name

```
<a id ="backtopoll"></a> 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2014-11-29T18:30:27.787

是的，在表单中使用锚是很难看的。使用**.focus()**可以更轻松地定位页面。

# jquery - 动态创建的 p 元素未附加到动态创建的 div

> ID：13084294
> 
> 赞同：3
> 
> 时间：2012-10-26T09:29:41.640
> 
> 标签：jquery, dom, append, element

由于某种原因，未创建以下函数中的 p 元素（和/或附加到 div）。如果我将它与 div 一样附加到“#listOfListObjects”，它可以工作，但我希望它在 div 中。

我究竟做错了什么？

```
 $('#addListObjectSubmit').click(function (e) {

        var listObjectName = $('#m_newListObject').val();

        if((listObjectName == null) || (listObjectName == '')) {
            return false;
        }
        else {
            var listDiv = 'listDiv' + i;

            $('<div>', {
                class: 'listObjectShow',
                id: listDiv
            }).appendTo('#listOfListObjects');

            $('<p>', {
                class: 'listObjectShow',
                text: listObjectName,
                id: 'listObject' + i
            }).appendTo(listDiv);
        }

        i += 1;

        e.preventdefault();
    }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T09:34:37.303

改变这个

`var listDiv = 'listDiv' + i;`

到

`var listDiv = '#listDiv' + i;`

或者

```
$('<div>', {
    class: 'listObjectShow',
    id: listDiv
}).appendTo('#listOfListObjects');

$('<p>', {
    class: 'listObjectShow',
    text: listObjectName,
    id: 'listObject' + i
 }).appendTo(listDiv); 
```

到

```
$('<div>', {
     class: 'listObjectShow',
     id: listDiv
 }).appendTo('#listOfListObjects');

 $('<p>', {
     class: 'listObjectShow',
     text: listObjectName,
     id: 'listObject' + i
 }).appendTo('#' + listDiv); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T09:36:47.023

`text`不是`<p>`元素的属性。

你应该改变：

```
$('<p>', {
    class: 'listObjectShow',
    text: listObjectName,
    id: 'listObject' + i
}).appendTo(listDiv); 
```

到

```
$('<p>', {
    class: 'listObjectShow',
    id: 'listObject' + i
}).text(listObjectName).appendTo(listDiv); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T09:49:52.143

我最喜欢的方式是这样的

```
var $div = $('<div>', {
               class : 'listObjectShow',
               id    : listDiv
           }).appendTo('#listOfListObjects');

$('<p>', {
    class : 'listObjectShow',
    id    : 'listObject' + i
}).text(listObjectName).appendTo( $div ); 
```

选择器、ID 等没有问题……只是使用了对新 div 的简单引用

# asp.net - 如何从类 app_code 访问 usercontrol 方法

> ID：13084299
> 
> 赞同：0
> 
> 时间：2012-10-26T09:30:03.173
> 
> 标签：asp.net

我在 asp 页面上有一个用户控件

```
<%@ Register Src="UserControls/Show.ascx" TagName="ucShow" TagPrefix="uc1" %> 
```

我有一种方法`Show()`。

我想从我的类文件中访问这个方法。即 `class1.cs`在`app_code`

如何从类中访问此方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T09:32:42.123

如果您在页面上有一个名为 uc1 的用户控件，那么您可以使用 uc1.show() ，前提是它是一个公共方法。

如果要在 class1.cs 文件中访问它，可以执行以下操作：

```
function doSomething(ref UserControlType ctl) {
//do some work
ctl.show();
}
```

从您的 aspx.cs 中，您可以调用类似的方法`doSomething(uc1);`

# java - Marshaller 类型中的方法 marshal(Object, Result) 不适用于参数 (T, File)

> ID：13084301
> 
> 赞同：0
> 
> 时间：2012-10-26T09:30:04.827
> 
> 标签：java, xml

我关注[http://www.mkyong.com/java/jaxb-hello-world-example/](http://www.mkyong.com/java/jaxb-hello-world-example/) 文件或（结果）文件出错 java.io.File cannot be cast to javax.xml.transform.Result 什么是正确的写作？

```
File file = new File(path);
JAXBContext jaxbContext = JAXBContext.newInstance(typeParameterClass.getClass());
Marshaller jaxbMarshaller = jaxbContext.createMarshaller();

//output pretty printed
jaxbMarshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);

jaxbMarshaller.marshal(boject, file); 
```

堆栈跟踪

```
java.lang.ClassCastException: java.io.File cannot be cast to javax.xml.transform.Result
    at martin.XMLObj.ConvertObjectToXML(XMLObj.java:26)
    at martin.Helloworld.main(Helloworld.java:100) 
```

原始代码

```
Customer customer = new Customer();
customer.setId(100);
customer.setName("mkyong");
customer.setAge(29);
XMLObj<Customer> XMLtool = new XMLObj<Customer>(Customer.class);
try {
    XMLtool.ConvertObjectToXML("c:\\file5.xml", customer);
}
catch(Exception ex)
{
    ex.printStackTrace();
} 
```

.

```
public class XMLObj<T> {
    final Class<T> typeParameterClass;
    public XMLObj(Class<T> typeParameterClass) {
        this.typeParameterClass = typeParameterClass;
    }
    public void ConvertObjectToXML(String path, T boject)
    {
        try {
            File file = new File(path);
            JAXBContext jaxbContext = JAXBContext.newInstance(typeParameterClass.getClass());
            Marshaller jaxbMarshaller = jaxbContext.createMarshaller();

            //output pretty printed
            jaxbMarshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);

            FileOutputStream fs = new FileOutputStream(file);
            jaxbMarshaller.marshal(boject, fs);
            fs.flush();
            fs.close();

            //jaxbMarshaller.marshal(boject, System.out);
        } catch (JAXBException e) {
            //e.printStackTrace();
            Logger.getInstance().process_message(e.getMessage());
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            Logger.getInstance().process_message(e.getMessage());
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
    public T ConvertXMLToObject(String path)
    {
        //Convert XML to Object
        try {
            File file = new File(path);
            if(file.exists())
            {
                JAXBContext jaxbContext;
                jaxbContext = JAXBContext.newInstance(typeParameterClass.getClass());
                Unmarshaller jaxbUnmarshaller = jaxbContext.createUnmarshaller();
                T bobj = (T) jaxbUnmarshaller.unmarshal(file);
                System.out.println(bobj);
                return bobj;
            }
            else
                Logger.getInstance().process_message("File not exist in ConvertObjectToXML");
        } catch (JAXBException e) {
            // TODO Auto-generated catch block
            Logger.getInstance().process_message(e.getMessage());
        }
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T10:48:16.930

由于该行，您得到一个空白文件

```
JAXBContext jaxbContext = JAXBContext.newInstance(typeParameterClass.getClass()); 
```

将此更改为

```
JAXBContext jaxbContext = JAXBContext.newInstance(typeParameterClass); 
```

问题是`typeParameterClass.getClass()`具有`java.lang.Class`无法解组`Customer`对象的类类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T03:22:47.787

你有没有先读过 API？

的第二个参数`Marshaller#marshal()`不带文件。

`marshal()`您可以使用许多其他重载，例如`marshall(Object, OutputStream)`. 具体怎么写，应该是你自己想办法。

# c++ - 应该使用 Cocos2d 还是在 C 中创建自己的代码

> ID：13084310
> 
> 赞同：0
> 
> 时间：2012-10-26T09:30:49.003
> 
> 标签：c++, iphone, cocos2d-iphone, box2d

我开始使用 xcode 设计一个平台风格的游戏，这将需要使用一些物理、碰撞检测等，包括滚动的岩石、绳索等障碍物。

我应该为我的项目使用 Cocos2d/box2d 还是创建自己的代码？

我不确定的原因有几个原因（一些已经在其他帖子中得到了回答） 1\. 我从未使用过 Cocos 或 box2d 并且不确定如何将其集成到我的游戏中（但我相信我会比这更快地解决这个问题构建自定义引擎？！）

1.  主要原因：是不是我也想把这个游戏改成安卓。使用我自己的代码，我可以做到这一点，但是使用 3rd 方代码，这不是几乎不可能，而且我必须为 android 设计引擎吗？

附带说明一下，如果有人有任何关于如何在项目中使用引擎的 cocos2d 教程的精彩链接，那将不胜感激！

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T09:36:10.237

> 主要原因：是不是我也想把这个游戏改成安卓。使用我自己的代码，我可以做到这一点，但是使用 3rd 方代码，这不是几乎不可能，而且我必须为 android 设计引擎吗？

您可以使用[Cocos2d-x](http://www.cocos2d-x.org/)。它是`C++`Cocos2d 的移植，支持多种平台，包括 Android。

# ocaml - OCaml 使用 List.fold_left 连接字符串列表

> ID：13084312
> 
> 赞同：0
> 
> 时间：2012-10-26T09:30:55.363
> 
> 标签：ocaml

我在 base 以及 f 和 l 函数中遇到了几个错误，我错了什么？

该函数应该做什么的例子是。

```
# sepConcat ", " ["foo";"bar";"baz"];;
- : string = "foo, bar, baz"

# sepConcat "---" [];;
- : string = ""

# sepConcat "" ["a";"b";"c";"d";"e"];;
- : string = "abcde"

# sepConcat "X" ["hello"];;
- : string = "hello" 
```

老师给了我这个我应该填写的代码。

```
let rec sepConcat sep s1 = match s1 with
  |[] -> ""
  |h::t -> 
        let f a x = failwith "to be implemented" in
    let base = failwith "to be implemented" in
    let l = failwith "to be implemented" in
        List.fold_left f base l 
```

我到目前为止

```
let rec sepConcat sep s1 = match s1 with
  |[] -> ""
  |h::t -> 
        let f a x = a^sep^x in
    let base = 0 in
    let l = sepConcat sep t in
        List.fold_left f base l 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T09:41:38.570

您在代码中遇到的错误如下，指向`base`您的代码：

```
Error: This expression has type int but an expression was expected of type
       string 
```

这是什么意思？问题是什么？你如何解决它？

另一个问题是您对`sepConcat`. 您正在使用`fold_left`还是正在编写递归函数？如果你正在做这些事情中的一件，你就不需要做另一件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-08T11:13:34.057

这是一个使用`fold_left`和可选参数的实现：

```
let concat ?(sep="") l =
  List.fold_left (fun acc e -> acc^sep^e) (List.hd l) (List.tl l);;
val concat : ?sep:bytes -> bytes list -> bytes = <fun> 
```

这是另一个使用*尾递归*函数的实现：

```
let concat ?(sep="") l =
  let rec loop acc = function
    | [] -> acc
    | h::t -> loop (acc^sep^h) t
  in
  loop (List.hd l) (List.tl l);;
val concat : ?sep:bytes -> bytes list -> bytes = <fun> 
```

两者的行为方式完全相同：

```
concat ~sep:(" ") ["hello"; "world"];;
- : bytes = "hello world" 
```

# ms-access-2007 - 将新的切换按钮绑定到 MS ACCESS 2007 中的现有选项组

> ID：13084315
> 
> 赞同：0
> 
> 时间：2012-10-26T09:31:09.153
> 
> 标签：ms-access-2007

我在表单上有一个选项组（Ms Access 2007），上面有一些切换按钮。我现在想向该现有选项组添加另一个切换按钮。添加后我看到它没有绑定到选项组并且那里没有新的切换按钮的“选项值”这样的属性。请建议我如何绑定它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T09:46:53.873

添加选项的最简单方法是从组中复制现有选项。只需选择一个选项按钮并复制并粘贴它。它将具有无效值 - 在 2010 年和可能的 2007 年，系统将提示您更改该值。如果不是，您可以在属性表的数据选项卡上更改它。您还可以在选项组框架中添加一个选项，它将被添加到序列中。然后，您必须调整其大小以匹配。

# installation - “go install ./...”中的“./...”在go语言中是什么意思？

> ID：13084317
> 
> 赞同：5
> 
> 时间：2012-10-26T09:31:20.097
> 
> 标签：installation, go

我是围棋的初学者。我试图编译一个 go 项目，但我找不到任何解释“ `/...`”的文档或文章。

```
cd ~/src/ephenation-server
go install -v ./... 
```

等待您的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-26T09:39:03.890

[go](http://golang.org/cmd/go/)命令解释`example/path/...`为和所有*`example/path/`子目录*。您可能想阅读关于如何找到您的包的[描述包列表部分。](http://golang.org/cmd/go/#Description_of_package_lists)`go`

# c++ - 如何避免 GDI+ 中的虚线？

> ID：13084318
> 
> 赞同：7
> 
> 时间：2012-10-26T09:31:20.350
> 
> 标签：c++, mfc, drawing, line, gdi+

这些屏幕截图取自我的 MFC 应用程序，显示了应该平行的第 2 行。 ![2 条虚线平行线](../Images/db872cff014ed53b0dc52b469d135dd6.png) ![2条平行线，一条实线，另一条虚线](../Images/aedc52c3ff1fa60d00e6f1214ffbabb8.png)

线条是使用 绘制的`Gdiplus::Graphics::Drawline()`。

一个小问题是虚线不是笔直的而是折断的。你注意到了，但这没什么大不了的......

真正的问题是它并不一致，并且绘制的线条`Gdiplus::DashStyleSolid`非常笔直。

这是 GDI+ 中的错误吗？有解决方法吗？

# 更新 1

我尝试制作一个最小的示例，但我正在努力重现它......它可能与非常大的坐标值和它们的坐标之间的差异很小有关。这些是一些示例线坐标：

```
Line 1: PointF(2.21866e+006, 1.40198e+006), PointF(2.21732e+006, 1.40111e+006)
Line 2: PointF(2.21866e+006, 1.40198e+006), PointF(2.21732e+006, 1.40112e+006) 
```

我注意到起点是相同的，但这可能是由于调试输出中的舍入引起的......

# 更新 2

我现在可以重现它：示例应用程序是作为 SDI 项目生成的，并且视图类继承了 CScrollView（下面的代码和屏幕截图）。“虚线”效果似乎也与笔的粗细有关。这条线随着粗细的不同而有点不同，但我没有找到一个始终导致平行线的值。

Vincent Porvik 在评论中建议这可能是舍入错误的结果，因为`Gdiplus::REAL`定义为`float`. 我相信情况也是如此……

**除了在这里以某种方式使用较小的坐标值之外，我还有其他选择吗？**

## 代码和截图

添加/修改了这些函数（除了 GDI+ 初始化代码）：

```
void CgdiplusLinesView::OnDraw(CDC* pDC)
{
    CgdiplusLinesDoc* pDoc = GetDocument();
    ASSERT_VALID(pDoc);
    if (!pDoc)
        return;

    pDC->SetBkMode(TRANSPARENT);

    using namespace Gdiplus;
    Graphics g(pDC->m_hDC);
    g.SetSmoothingMode(Gdiplus::SmoothingModeHighQuality);

    Pen solidPen(Color(0,0,0), 2.f);
    Pen dashedPen(Color(0,0,0), 2.f);
    dashedPen.SetDashStyle(DashStyleDash);

    g.DrawLine(&dashedPen, PointF(4438749.500000, 2805806.500000), PointF(4434280.500000, 2802106.500000));
    g.DrawLine(&solidPen,  PointF(4438746.500000, 2805809.500000), PointF(4434277.500000, 2802109.500000));
}

void CgdiplusLinesView::OnPrepareDC(CDC* pDC, CPrintInfo* pInfo)
{
    pDC->SetMapMode(MM_ISOTROPIC);

    const int mapSizePixels = 8388608;
    pDC->SetWindowExt(mapSizePixels, mapSizePixels);
    pDC->SetViewportExt(mapSizePixels, mapSizePixels);
    pDC->SetWindowOrg(GetScrollPos(SB_HORZ), GetScrollPos(SB_VERT));

    //__super::OnPrepareDC(pDC, pInfo);
}

void CgdiplusLinesView::OnInitialUpdate()
{
    CScrollView::OnInitialUpdate();

    SetScrollSizes(MM_TEXT, CSize(8388608, 8388608), CSize(1361, 1054));
    SetScrollPos(SB_HORZ, 4434897.5);
    SetScrollPos(SB_VERT, 2802645.);
} 
```

![交叉线](../Images/dc056087da8ed8a6faa3a16ff781ca19.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T20:58:46.587

I don't think it has to do with dashed vs solid, but with float precision. Your coordinates seem to be geographic coordinates. The usual good practice has been to store all coordinates as doubles, and when you need to work with a lower precision library, offset all coordinates yourself before passing them to the graphics functions.

The correct way to do that is to choose a reference point that is close to the points in your dataset (first coordinate you find is ok) and then substract its coordinates to all other points. This keeps the numerical values near 0.0 that is where floats have higher resolution density.

# macos - “open -b bundle_indentifier”从哪里获取程序路径？

> ID：13084324
> 
> 赞同：1
> 
> 时间：2012-10-26T09:31:35.670
> 
> 标签：macos, bundle

例如，我在控制台“open -b com.apple.dt.Xcode”中运行，open 如何确定要启动的程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T11:33:10.340

如果你想要编程路径，你可以使用applescript。

```
 osascript -e "POSIX path of (path to application id \"com.apple.dt.Xcode\")" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T16:47:43.283

Bundle 标识符通常在应用程序的 app bundle 中声明`Info.plist`。这些值在 OS X 中通过各种方式识别和注册，并在`Launch Services`数据库中进行管理。阅读[启动服务编程指南](https://developer.apple.com/library/mac/#documentation/Carbon/Conceptual/LaunchServicesConcepts/LSCIntro/LSCIntro.html#//apple_ref/doc/uid/TP30000999-CH201-TP1)以获取详细信息，特别是有关[应用程序注册](https://developer.apple.com/library/mac/#documentation/Carbon/Conceptual/LaunchServicesConcepts/LSCConcepts/LSCConcepts.html#//apple_ref/doc/uid/TP30000999-CH202-BABEJFCD)的部分。

# methods - 在 Dynamics AX 2012 中未调用数据源的 displayOption 方法

> ID：13084327
> 
> 赞同：1
> 
> 时间：2012-10-26T09:31:49.403
> 
> 标签：methods, datasource, dynamics-ax-2012

我想知道是否有人和我有同样的问题。我在 Dynamics AX 2012 中的表单数据源上覆盖了 displayOption 方法。此数据源链接到网格。当不遵循特定条件时，我希望此网格中的记录具有特定的背景颜色。

我知道改变背景颜色的方法，所以这不是问题。问题是在显示表单时根本没有调用 displayOption 方法（我调试并注意到它）。以前有没有其他人遇到过这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T17:04:03.917

这就是我所看到的......似乎仅在表单查询的根目录中为数据源调用了 displayOption 方法。在 SalesReleaseOrderPicking 表单上，我想根据 salesLine 上的值更改网格颜色。InventReleaseOrderPicking 是根数据源。我必须覆盖该数据源的 displayOption。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T07:25:49.277

“[在表单数据源上声明时，显示方法必须有一个非可选参数](http://www.axaptapedia.com/index.php?title=Display_method#Display%20methods%20on%20datasources)”（请参阅*​​数据源上的显示方法*）。确保您将参数作为与数据源相同类型的缓冲区。

# javascript - Flash of Unstyled Content 问题

> ID：13084328
> 
> 赞同：0
> 
> 时间：2012-10-26T09:31:58.987
> 
> 标签：javascript, html, google-webfonts, head.js, fouc

我正在使用 Head.js、Google Web Fonts，并从网络上的其他地方提取一些内容（占位符图像）。

我注意到的是，在页面加载时，我看到了无样式的内容，然后我的标题字体正确加载，但重量不正确，然后加载了正确的重量。

关于是什么导致我的标题文本出现这种奇怪行为的任何想法？它不应该只是从无样式变为正确请求的字体吗？

还有什么是阻止对禁用 javascript 的人友好的 FOUC 的最佳方法？

谢谢！

更多细节：

我正在使用 Google 提供的 Javascript 方法来插入我使用的 3 种字体。我可以清楚地看到它正在加载 'Istok+Web:700:lating' ，这意味着应该只提供 700 的重量。

由于这种方法，我根本不使用@font-face。简单的 font-family 就好像它是一个普通的东西。

虽然我正在使用 LESS.js，但从网络分析器来看，它似乎并没有导致任何严重的减速。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T09:38:08.773

这仅仅是因为浏览器在下载所有内容之前就已经显示了该网站。你有一个用于所有字体粗细的@font-face css 规则，还是有一个单独的用于正常/粗体字体粗细的规则？另请注意，虽然从 Google CDN 加载字体很方便，但这并不是最快的方式（因为必须建立新的 http 连接）。//编辑当你使用快速使用按钮时，谷歌总是为不同的权重设置不同的字体文件......

使用 head.js 时无法防止出现无样式内容，因为所有内容都是并行加载的，而浏览器往往会尽快显示所有内容。只是祈祷每个人都有快速的连接。你为什么要介意呢？在加载过程中，您总是会看到某种半页...

# javascript - 淘汰赛 - Chrome 中的绑定错误

> ID：13084331
> 
> 赞同：1
> 
> 时间：2012-10-26T09:32:11.213
> 
> 标签：javascript, google-chrome, knockout.js

在 chrome 中绑定数据时出错，即使它在 FireFox 中运行良好。

```
<ul data-bind="foreach: contents, visible: contents().length > 0">
    <li>
        <a data-bind="text: ContentName"></a>
    </li>
</ul>
<script type="text/javascript">
        function content(data) {
            this.ContentName = ko.observable(data.contentName);
         }
               function contentListViewModel() {
                var self = this;
                self.contents = ko.observableArray([]); // array of content, populated by ajax
         }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T09:32:11.213

将 viewmodel 属性名称更改为小写，并在绑定中更改名称后，一切都恢复正常了！

```
<ul data-bind="foreach: contents, visible: contents().length > 0">
    <li>
        <a data-bind="text: contentName"></a>
    </li>
</ul>
<script type="text/javascript">
        function content(data) {
            this.contentName = ko.observable(data.contentName);
         }
               function contentListViewModel() {
                var self = this;
                self.contents = ko.observableArray([]); // array of content, populated by ajax
         }
</script> 
```

# asp.net - SSL 证书地址不匹配

> ID：13084341
> 
> 赞同：2
> 
> 时间：2012-10-26T09:33:09.753
> 
> 标签：asp.net, iis-7

我通过向 Web 应用程序创建自签名证书来添加 https 标头。

在 Windows server 2008 R2 标准上的 IIS 7.0 上托管。

我在浏览器上收到错误，因为 Web 浏览器上 SSL 证书的地址不匹配。

我需要将 SSL 设置为 true。

请给任何建议。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T09:46:25.997

名称不匹配错误表示 SSL 证书中的常用名称（域名）与浏览器地址栏中的地址不匹配。

例如，如果证书适用于 www.abc.com，而您访问的站点没有“www”（https://abc.com），您将收到此 SSL 证书名称错误。

我认为您在购买域证书时输入了错误的域。确保域的 URL 和证书应该相同。

# python - 如何做熊猫数据框rolling_mean（）？

> ID：13084342
> 
> 赞同：0
> 
> 时间：2012-10-26T09:33:09.440
> 
> 标签：python, pandas

我有一个`df`：

```
 sales  net_pft
STK_ID RPT_Date                 
600141 20101231  46.780    1.833
       20110331  13.725    0.384
       20110630  32.733    1.132
       20110930  50.386    1.923
       20111231  65.685    2.325
       20120331  21.088    0.656
       20120630  46.952    1.591
600809 20101231  30.166    4.945
       20110331  18.724    5.061
       20110630  28.948    6.586
       20110930  35.637    7.075
       20111231  44.882    7.805
       20120331  22.140    4.925
       20120630  38.157    7.868 
```

我想对所有列进行滚动平均，在 groupby 之后`STK_ID`，伪代码表示的规则如下：

```
if RPT_Date[4:8] == '0331':
    all_column = rolling_mean(all_column,2)

if RPT_Date[4:8] == '0630':
    all_column = rolling_mean(all_column,3)

if RPT_Date[4:8] == '0930':
    all_column = rolling_mean(all_column,4)

if RPT_Date[4:8] == '1231':
    all_column = rolling_mean(all_column,5)

if is_the_first_row():
    keep_original_values() 
```

`all_column`这里代表' `sales`'，`'net_pft'`。最终结果如下：

```
 sales  net_pft
STK_ID RPT_Date                 
600141 20101231  46.780    1.833   # same as original value
       20110331  30.253    1.109   # average of row1&row2 
       20110630  31.079    1.116   # average of row1&row2&row3
......
600809 20101231  30.166    4.945   # same as original value
       20110331  24.445    5.003   # average of row1&row2 
..... 
```

如何写出整洁的 Pandas 表达式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T13:33:17.543

我想你想要这个？

```
In [29]: df.groupby(level='STK_ID').apply(lambda x: pd.expanding_mean(x))
Out[29]: 
                     sales   net_pft
STK_ID RPT_Date                     
600141 20101231  46.780000  1.833000
       20110331  30.252500  1.108500
       20110630  31.079333  1.116333
       20110930  35.906000  1.318000
       20111231  41.861800  1.519400
       20120331  38.399500  1.375500
       20120630  39.621286  1.406286
600809 20101231  30.166000  4.945000
       20110331  24.445000  5.003000
       20110630  25.946000  5.530667
       20110930  28.368750  5.916750
       20111231  31.671400  6.294400
       20120331  30.082833  6.066167
       20120630  31.236286  6.323571 
```

# naming - 我应该怎样称呼包含集合的类或变量？

> ID：13084345
> 
> 赞同：1
> 
> 时间：2012-10-26T09:33:15.100
> 
> 标签：naming, naming-conventions

假设我有一个 SuperPower 类，并且我想将我的超能力放在一个集合中而不暴露其实现。

我尽量避免将集合作为实例属性。相反，我把它放在一个可以移动行为的类中，否则会分散在其他类中。

我不想称它为 SuperPowerList、SuperPowerMap 或类似名称，因为它公开了实现。

我也有点不喜欢 SuperPowers，因为它与它所包含的类太相似了。

这同样适用于“SuperPowers superPowers”类型的变量。

肯定有更好的办法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T09:58:30.203

`SuperPowerCollection`听起来最好，因为我在整个框架中都可以看到。变量命名可以是您喜欢的任何东西，因为它并不重要。我更喜欢`superPowers`在集合类中更常见的那个。要获得更多创意，请在[英文 stackexchange](https://english.stackexchange.com/)上发布问题。

只有当我不会被否决时：

1.  PowerPod
2.  超级部队
3.  电网

是我能想到的一些花哨的名字:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T10:30:39.360

使用 SuperPowerCollection 或 SuperPowers。
两者都很好。
我想补充一点，我在代码中看到了一个案例，其中实现
从 List 更改为 Map，但变量的名称仍然是 objctsList -
这非常可怕，所以你是正确的，一个好的做法是避免提供实现变量名称中的详细信息，因为它们可能会及时更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T13:51:03.463

PowerPack 或 SuperPowerPack 怎么样？

# cloudbees - 从其他 jenkins 实例的备份中恢复作业

> ID：13084348
> 
> 赞同：0
> 
> 时间：2012-10-26T09:33:24.607
> 
> 标签：cloudbees

我已经安装了免费的企业插件，并对 cloudbees 进行了备份。

我的问题是我无法找到一种方法将我的作业的备份配置从我的旧实例加载到我的 cloudbees jenkins 实例中......
这有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T13:56:40.723

这还不能自动完成，但我们可以根据订阅级别为您手动完成。请开票，我们可以讨论。

# file - 如何对文件进行位操作

> ID：13084349
> 
> 赞同：0
> 
> 时间：2012-10-26T09:33:25.540
> 
> 标签：file, bit

我有一个非常大的文件，例如 1TB，我想将第一位（不是字节）移动到最后，因为我知道读/写文件必须以字节为单位的所有方法，移动该文件中的所有字节很慢。
**那么有没有什么方法可以对文件进行bit操作呢？**
PS：任何编程语言都可以。

# c# - 在 ASP.NET MVC 4 中显示用于创建新消息的表单以及消息列表

> ID：13084351
> 
> 赞同：0
> 
> 时间：2012-10-26T09:33:27.697
> 
> 标签：c#, razor, asp.net-mvc-4

我已经创建了模型并在我的站点视图中`Message`显示了这些消息的列表。`Index`控制器将`IEnumerable<Models.Message>`对象传递给视图。

为了显示所有这些消息，我使用`@foreach`. 但我也想在同一个`Index`视图上创建表单来创建新消息。似乎很容易，但调用`@Html.TextAreaFor(Model.Body)`给我以下错误：

`CS1061: 'System.Collections.Generic.IEnumerable<Models.Message>' does not contain a definition for 'Body' and no extension method 'Body' accepting a first argument of type 'System.Collections.Generic.IEnumerable<Models.Message>' could be found (are you missing a using directive or an assembly reference?)`

是否可以基于创建表单`Models.Message`，尽管创建的视图是基于创建的`IEnumerable<Models.Message>`？

我的模型是：

```
public class Message
{
    [BsonId]
    public ObjectId Id { get; set; }

    public Citizen From { get; set; }
    public Citizen To { get; set; }

    [Required]
    [AllowHtml]
    public string Body { get; set; }

    [ScaffoldColumn(false)]
    public DateTime Date { get; set; }

    public bool IsPrivate { get; set; }
} 
```

**编辑：**坦率地说，我不想创建一个附加模型，其中包含一条消息用于表单和用于显示的消息列表，主要是因为在表单动作控制器中我需要处理这个“扩展”模型。我认为清洁工会在那里有原件`Message`。

但是怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T09:43:14.417

是的，这是可能的。您必须为这个特定的视图创建一个（视图）模型，并具有所有必要的属性，如下所示：

```
public class IndexViewModel(){

    public IEnumerable<Models.Message> Messages {get;set; }

    public string Body {get;set;}

    //any other properties for your form

} 
```

在您的 Controller 中，创建此 ViewModel 并填充它：

```
public ActionResult Index(){

    var vm = new IndexViewModel();
    vm.Messages = GetMessages();

    return View(vm);
} 
```

在您的视图中，将此 ViewModel 设置为模型，您可以使用 Model.Messages 遍历消息，并使用 TextAreaFor(x => Model.Body) 创建一个文本区域

# shell - 如何以 POSIX 方式实现“set -o pipefail” - 几乎完成，需要专家帮助

> ID：13084352
> 
> 赞同：12
> 
> 时间：2012-10-26T09:33:30.567
> 
> 标签：shell, command-line, pipe, posix

我必须以`set -o pipefail`POSIX 方式实现 BASH 选项，以便它适用于各种 LINUX/UNIX 风格。稍微解释一下，此选项使用户能够验证所有管道命令的成功执行。启用此选项后，`cat app.log | grep 'ERROR'`如果失败，此命令将`cat`失败，否则将`cat`抑制错误。

所以，我在这里找到了一个非常好的解决方案：http: [//cfaj.ca/shell/cus-faq-2.html](http://cfaj.ca/shell/cus-faq-2.html)

```
 run() {
         j=1
         while eval "\${pipestatus_$j+:} false"; do
           unset pipestatus_$j
           j=$(($j+1))
         done
         j=1 com= k=1 l=
         for a; do
           if [ "x$a" = 'x|' ]; then
             com="$com { $l "'3>&-
                         echo "pipestatus_'$j'=$?" >&3
                       } 4>&- |'
             j=$(($j+1)) l=
           else
             l="$l \"\$$k\""
           fi
           k=$(($k+1))
         done
         com="$com $l"' 3>&- >&4 4>&-
                    echo "pipestatus_'$j'=$?"'
         exec 4>&1
         eval "$(exec 3>&1; eval "$com")"
         exec 4>&-
         j=1
         while eval "\${pipestatus_$j+:} false"; do
           eval "[ \$pipestatus_$j -eq 0 ]" || return 1
           j=$(($j+1))
         done
         return 0
       } 
```

上述`run()`功能使用户能够以这样的方式调用管道命令：

```
run cmd1 \| cmd2 \| cmd3 
```

如果其中一个命令失败，您可以将其输入`$?`

但是有一个问题，它不支持管道之间的命令分组。我希望能够调用这样的东西：

```
run echo "test" ; grep "test" \| awk '{print}' 
```

当我这样做时，调用失败。我无法进行正确的修改来支持命令分组——脚本对于我的 bash 技能来说有点太复杂了......

有人可以帮忙吗？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2019-10-02T10:15:07.580

我的两分钱：

```
#!/bin/sh

# Saving the pid of the main shell is required,
# as each element of the pipe is a subshell.
self=$$

lots_and_fail() {
    seq 100
    return 1
}

{ lots_and_fail || kill $self; } | sed s/7/3/ 
```

这件事似乎完成了这项工作。想法？

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-26T13:16:39.360

当您键入：

```
run echo "test" ; grep "test" \| awk '{print}' 
```

你`run`用参数调用`echo`and `"test"`; 然后你用`grep`参数调用`"test"`,`|`和. 通常，不会找到任何名为,或.`awk``{print}``grep``|``awk``{print}`

要根据需要调用`run`，您必须像您所做的那样转义分号`|`（并且您需要为`&&`or`||`或`&`可能以及命令行的其他组件做类似的事情；`$(...)`或反引号的处理``...``需要仔细想了想）。

如果你写：

```
run echo "test" \; grep "test" \| awk '{print}' 
```

你至少会得到你想要的所有论点`run`。那么它是否有效还有待商榷；我还不明白`run`您显示的代码应该如何工作。

*[...之后...]*

它会进行一些可怕的 I/O 重定向，但会将由管道符号分隔的命令的每一段包装成一个单独的小象形文字包。它假设在参数周围加上双引号可以正确中和它，这并不总是正确的（尽管很多时候都是正确的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-28T17:54:21.987

你的想法的核心应该是这样的：

```
{ cmd1 ; echo $? > status1 ; } | cmd2 && grep -q '^0$' status1 } 
```

在更长的形式中，这将是：

```
{ cmd1 ; echo $? > status1 ; } |  \
{ cmd2 ; echo $? > status2 ; } |  \
  # ... and so on                 \
  cmdN                         && \
  # ^ note lack of wrapper        \ 
grep -q '^0$' status1 &&          \
grep -q '^0$' status2 &&          \
  # ... and so on, to N-1 
```

# ant - ANT：设置属性不起作用？

> ID：13084355
> 
> 赞同：0
> 
> 时间：2012-10-26T09:33:41.843
> 
> 标签：ant, properties, foreach, var

我尝试将一个 ini 文件解析为可以在我的 ant 脚本中使用的属性。我有以下内容：

```
<project name="DeployScript" default="deploy-staging" basedir=".">
    <taskdef resource="net/sf/antcontrib/antcontrib.properties" />

    <!-- The location of the settings.ini file -->
    <property name="ini-file" location="../settings.ini" />

    <loadfile property="iniConfig" srcFile="${ini-file}"/>  

    <target name="deploy-staging" 
        description="Deploy project to staging environment" >
        <echo message="Ini file: ${ini-file}" />
        <echo message="${lib}" />
        <echo message="${store_dir}" />
        <echo message="${ant.home}" />

        <!--- walk the ini file's lines -->
        <foreach list="${iniConfig}"
            target="echoMsg"
            param="line" 
            delimiter="${line.separator}" />

        <echo message="HERE: ${prevSection}" />
    </target>

    <property name="prevSection" value="" />

    <!-- this is executed for every line in the ini file. -->
    <target name="echoMsg">  
        <!-- strip out the section name, variable name and value (if exists on the line) -->
        <propertyregex property="secm"
            input="${line}"
            regexp="^\[(.*)\]"
            select="\1"
            casesensitive="false" />
        <propertyregex property="name"
            input="${line}"
            regexp="^([\S]+)\s*=\s*([^;]+)"
            select="\1"
            casesensitive="false"
            defaultValue="" /> 
        <propertyregex property="value"
            input="${line}"
            regexp="^([\S]+)\s*=\s*([^;]+)"
            select="\2"
            casesensitive="false"
            defaultValue="" />

        <!-- overwrite the previous section if we have found a new one. -->
        <if>
            <isset property="secm" />
            <then>
                <echo message="PREVSECTION IS SET" />   
                <property name="prevSection" value="${secm}" />
            </then>
        </if>

        <!-- display the information about the found data -->       
        <echo message="line    = ${line}" />
        <echo message="section = ${secm}" />
        <echo message="name    = ${name}" />        
        <echo message="value   = ${value}" />
        <echo message="new last section: ${prevSection}" />
        <echo message="----" />             
    </target>   
</project> 
```

我尝试做的是解析所有 name=value 对并将它们放在如下属性中：section.name=value;

不知何故，该部分在“echoMsg”目标中不被记住。我希望记住部分名称。

所以，

```
[global]
name=var
name2=val

[section2]
name=var 
```

应该变成：

```
global.name=var
global.name2=val
section2.name=var 
```

这是我的 ant 脚本的输出：

```
echoMsg:
 [echo] PREVSECTION IS SET
 [echo] line    = [global]
 [echo] section = global
 [echo] name    =
 [echo] value   =
 [echo] new last section: global
 [echo] ----

echoMsg:
 [echo] line    = servername = my-server.local ; Server name
 [echo] section = ${secm}
 [echo] name    = servername
 [echo] value   = mac-mini-van-Peter.local7
 [echo] new last section: ${prevSection}
 [echo] ---- 
```

如您所见，最后一个“${prevSection}”没有设置。我希望它是“全球性的”。

我尝试使用而不是属性，但没有区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T13:21:45.663

这里有一个提示：尝试在语句之前添加一个 echo 部分，`<propertyregex>`以查看各种属性的值。

我添加了这些`<echo>`行...

```
<target name="echoMsg">
    <!-- strip out the section name, variable name and value (if exists on the line) -->
    <echo message="prev line    = ${line}" />
    <echo message="prev section = ${secm}" />
    <echo message="prev name    = ${name}" />
    <echo message="prev value   = ${value}" />
    <echo message="prev new last section: ${prevSection}" />
    <echo message="----" /> 
```

现在让我们看看输出：

```
deploy-staging:
     [echo] Ini file: /Users/david/property.ini
     [echo] ${lib}
     [echo] ${store_dir}
     [echo] /usr/share/ant

echoMsg:
     [echo] prev line    = [global]
     [echo] prev section = ${secm}
     [echo] prev name    = ${name}
     [echo] prev value   = ${value}
     [echo] prev new last section: 
     [echo] ----
     [echo] PREVSECTION IS SET
     [echo] line    = [global]
     [echo] section = global
     [echo] name    = 
     [echo] value   = 
     [echo] new last section: 
     [echo] ----

echoMsg:
     [echo] prev line    = name=foo
     [echo] prev section = ${secm}
     [echo] prev name    = ${name}
     [echo] prev value   = ${value}
     [echo] prev new last section: 
     [echo] ----
     [echo] line    = name=foo
     [echo] section = ${secm}
     [echo] name    = name
     [echo] value   = foo
     [echo] new last section: 
     [echo] ----

echoMsg:
     [echo] prev line    = name2=bar
     [echo] prev section = ${secm}
     [echo] prev name    = ${name}
     [echo] prev value   = ${value}
     [echo] prev new last section: 
     [echo] ----
     [echo] line    = name2=bar
     [echo] section = ${secm}
     [echo] name    = name2
     [echo] value   = bar
     [echo] new last section: 
     [echo] ----

echoMsg:
     [echo] prev line    = [section2]
     [echo] prev section = ${secm}
     [echo] prev name    = ${name}
     [echo] prev value   = ${value}
     [echo] prev new last section: 
     [echo] ----
     [echo] PREVSECTION IS SET
     [echo] line    = [section2]
     [echo] section = section2
     [echo] name    = 
     [echo] value   = 
     [echo] new last section: 
     [echo] ----

echoMsg:
     [echo] prev line    = name=fubar
     [echo] prev section = ${secm}
     [echo] prev name    = ${name}
     [echo] prev value   = ${value}
     [echo] prev new last section: 
     [echo] ----
     [echo] line    = name=fubar
     [echo] section = ${secm}
     [echo] name    = name
     [echo] value   = fubar
     [echo] new last section: 
     [echo] ----
     [echo] HERE: 

BUILD SUCCESSFUL
Total time: 1 second 
```

每次调用都会`<echomsg>`丢失之前在 中设置的值`<echomsg>`。

我建议你试试这个`<for>`任务。该`<for>`任务不会在循环的每次迭代中丢失您的属性值。但是，您必须将`override`设置添加到您的`<propertyregex>`任务中，并使用`<var>`任务而不是`<property>`任务，以便能够通过循环的每次迭代来重置您的属性值。

您还必须将您的更改`<taskdef>`为：

```
<taskdef resource="net/sf/antcontrib/antlib.xml" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T15:43:05.513

这是对我有用的代码。只是想与万维网分享：

```
<project name="DeployScript" default="deploy-staging" basedir=".">
    <taskdef resource="net/sf/antcontrib/antlib.xml" />

    <!-- The location of the settings.ini file -->
    <property name="ini-file" location="../settings.ini" />

    <!-- load the ini file -->
    <loadfile property="iniConfig" srcFile="${ini-file}"/>  

    <!-- when no section is given, the vars are stored in the "default" section -->
    <var name="theSection" value="default" />

    <!-- set global properties for this build -->
    <target name="deploy-staging" description="" >

        <echo message="Start parsing ini file" level="info" />

        <!--
            PARSE INI FILE
            This section parses the ini file and creates the parameters
            which we can use in this script. 
        -->
        <for list="${iniConfig}" param="line" delimiter="${line.separator}" trim="true">
            <sequential>

                <propertyregex property="newSection" input="@{line}" regexp="^\[(.*)\]" select="\1" casesensitive="false" defaultvalue="" override="true" />
                <propertyregex property="name" input="@{line}" regexp="^([^;][\S]+)\s*=\s*([^;]+)" select="\1" casesensitive="false" defaultValue="" override="true" /> 
                <propertyregex property="value" input="@{line}" regexp="^([^;][\S]+)\s*=\s*([^;]+)" select="\2" casesensitive="false"  defaultValue="" override="true" />

                <if>
                    <!-- if we recieved a new section -->
                    <isset property="newSection" />
                    <then>
                        <if>
                            <!-- section is not empty -->
                            <not><equals arg1="${newSection}" arg2="" /></not>
                            <then>
                                <!-- store this as the new section --> 
                                <var name="theSection" value="${newSection}" />
                            </then>
                        </if>                       
                    </then>
                </if>

                <!-- only create a new var if we have a var-name -->
                <if>
                    <isset property="name" />
                    <then>
                        <if>
                            <!-- name is not empty -->
                            <not><equals arg1="${name}" arg2="" /></not>
                            <then>
                                <!-- store this as the new section --> 
                                <var name="${theSection}.${name}" value="${value}" /> 
                                <echo message="${theSection}.${name} = ${value}" level="info" />
                            </then>
                        </if>                       
                    </then>
                </if>
            </sequential>
        </for>
    </target>

</project> 
```

# extjs - 面板内的 Extjs 窗口

> ID：13084359
> 
> 赞同：0
> 
> 时间：2012-10-26T09:33:59.330
> 
> 标签：extjs

我需要在面板控件内放置一个窗口控件并将窗口约束在此面板内。

这是我恢复的代码：

```
Ext.define('App.view.MainWindow', {
extend: 'Ext.container.Viewport',
alias: 'widget.mainwindow',

layout: 'vbox',
items: [
    {
        xtype: 'panel',
        height: 50,
        width: '100%',
        layout: 'hbox'
    },
    {
        xtype: 'panel',
        height: 400,
        width: '100%',
        layout: 'hbox',

        items:[
            window1 = Ext.create('Ext.window.Window', {autoShow:true, width:90}),
            window2 = Ext.create('Ext.window.Window', {autoShow:true, width:400})
        ]
    }
], 
```

使用此代码，两个窗口都出现在彼此的顶部。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T11:11:22.197

我已经使用边框布局解决了这个问题，并将 VerticalMenu 基类更改为 Panel。事实上，只有水平菜单需要位于其他控件之上：

[http://postimage.org/image/3mdmo55n9/](http://postimage.org/image/3mdmo55n9/)

谢谢

# iphone - iPhone内存警告问题

> ID：13084360
> 
> 赞同：0
> 
> 时间：2012-10-26T09:34:06.170
> 
> 标签：iphone, ios, memory-management

我正在使用 MapView 和 UIImagePicker 创建一个应用程序。当用户继续前进时，我正在屏幕上显示地图及其显示路线。用户可以在两者之间捕获图像。我有两个屏幕。

1.  显示地图
2.  捕获图像（这是从屏幕 1 推送的）

当我从屏幕 1 转到屏幕 2 时。我显示一个 ImagePicker 并允许用户捕获图像。当我弹回屏幕 1 时，我`release`将所有对象都制作出来`nil`。这个任务通常完成，`viewDidUnload`但我遇到了内存问题，所以当我的视图控制器弹出时我就做了。因此，一旦我完成所有对象，它们就会被释放并为零。

当我从地图进入我的登录屏幕时，我正在做我所知道的每一件事：

1.  从超级视图中删除视图
2.  释放所有关联对象或保留对象（甚至包括 NSString 对象）
3.  `nil`为所有这些对象设置值。

当我通过分析运行应用程序并且没有可用的运行时泄漏但即使在活动监视器中，我的应用程序的真实内存也在不断增加:(

在捕获了 10-12 张图像后，`Received memory warning. Level=1`我什至没有将 UIImage 对象存储在内存中。我在文档目录中写这个并且只存储字符串路径。

请帮助我并指导我还能做些什么来解决这个问题。

**更新**

在后退按钮上释放对象时，我正在使用：

```
- (void)releaseObjects {

    [mapViewNewTour setDelegate:nil];
    [mapViewNewTour removeFromSuperView];
    [mapViewNewTour release];
    mapViewNewTour = nil;
    [lblNavTitle release];
    lblNavTitle = nil;
    [btnEdit release];
    btnEdit = nil;
    [txtTourName release];
    txtTourName = nil;
    [vwTourName release];
    vwTourName = nil;
    [mutDictOfflineSharing release];
    mutDictOfflineSharing = nil;
    [mutArrImage release];
    mutArrImage = nil;

    [_routeLine release];
    _routeLine = nil;
    [_routeLineView release];
    _routeLineView = nil;
    [aLazyLoader release];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T09:46:03.290

ARC 也支持 4.3，所以使用它。

您使用专用“releaseEverything”方法的方法一直被破坏 - 它显示缺乏所有权跟踪，充其量是一种黑客行为。

`viewDidUnload`现在无论如何都已弃用，并且不会被 iOS 6 中的系统调用（您应该针对它构建）。

不要与框架抗争——以“正确”的方式去做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T10:34:01.543

我建议您运行仪器并查看使用内存的位置。内存使用分析有特定的工具。您需要的工具是活动监视器和 VM 跟踪器。

另外我建议你仔细检查你没有使用 NSZombieEnabled 运行（在方案中检查它），因为它会导致内存警告。

# spring-mvc - 如何为 javascript 资源设置 Spring MVC 视图解析器？

> ID：13084364
> 
> 赞同：0
> 
> 时间：2012-10-26T09:34:20.900
> 
> 标签：spring-mvc

**我使用 Spring MVC 控制器生成 javascript，如下所示：**

```
@RequestMapping(value="path/to/handler", method = RequestMethod.GET, produces ="text/javascript")
public ModelAndView getJs(HttpServletRequest request) {
  String contextPath = request.getContextPath();
  return new ModelAndView("/path/to/js/", "contextPath", contextPath);
} 
```

我不确定如何为 javascript 资源设置视图解析器。有人可以建议如何为 js 资源设置视图解析器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T10:10:32.397

你可以把你的js文件放在

```
src/main/webapp/resources/js/somefile.js 
```

将此添加到您的 servlet-context.xml

```
<!-- Handles HTTP GET requests for /resources/** by efficiently serving 
up static resources in the ${webappRoot}/resources directory -->
<resources mapping="/resources/**" location="/resources/" />
<resources location="/resources/favicon.ico" mapping="/favicon.ico"/> 
```

现在您可以通过以下方式访问您的 .js 文件：localhost:8080/yourapp/resources/js/somefile.js

# excel - 如何在excel中连接两个没有空格的单元格？

> ID：13084366
> 
> 赞同：1
> 
> 时间：2012-10-26T09:34:32.753
> 
> 标签：excel

我的 excel 表中有两列，如下所示：

```
1234  |  548
21596 |  1875 
```

当我通过这样做连接这两个字段时， `=A1&B1` 它会给我 `1234 548`两个值之间的空间。

为什么它放了一个空格，我怎样才能删除它？它用于填充数据库，所以我不希望我的值之间有空格。请问有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T09:43:31.810

您可能只是在您的第二个值之前或在您的第一个值之后有一个额外的空间，从而导致您获得一个空间。但是您可以使用该`TRIM()`功能删除空格。

```
=TRIM(A1)&TRIM(B1) 
```

看起来好像您是法国人，这是该功能的[链接](http://office.microsoft.com/fr-fr/excel-help/supprespace-HP005209321.aspx)`SUPPRESPACE()`。

```
=SUPPRESPACE(A1)&SUPPRESPACE(B1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-09T22:10:52.887

您可以使用查找/替换功能查找（空格）并替换为（无），然后按全部替换...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-14T17:33:19.500

将要删除的空格复制到列的一个单元格中。突出显示要从中删除空格的所有单元格。选择替换功能并将复制的空格粘贴到顶部框中。将“替换为”框留空。点击全部替换。他们将被删除

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-07-11T21:24:06.307

这一直对我有用：

A1&""&B2 = 两个无空格的单元格

# android - 如何在Android上阻止浏览器？

> ID：13084373
> 
> 赞同：0
> 
> 时间：2012-10-26T09:35:14.350
> 
> 标签：android

我想实现当用户开车时拒绝访问浏览器的应用程序。我发现我可以监视进程并杀死浏览器，但这只是我可以做到的一种方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T09:44:19.000

我认为没有官方的方式可以让您的应用程序干扰在 Android 系统上激活的正常流程。这是因为每个应用程序都在自己的 Linux 进程（如沙箱）上运行，以保护它免受其他应用程序的影响。

这就是我从使用 Android 的第一天学到的东西，不知道现在是否仍然如此 :-)

更多信息可以在这里找到[IBM 文章](http://www.ibm.com/developerworks/opensource/library/x-androidsecurity/index.html)

# magento - Magento - 目录价格规则在产品更新之前不起作用

> ID：13084376
> 
> 赞同：5
> 
> 时间：2012-10-26T09:35:18.200
> 
> 标签：magento, catalog, magento-rules

我遇到了一些关于目录定价规则的问题：每当我创建定价​​规则时，这不会应用于选定的产品，直到这些产品中的每一个都没有以某种方式更新。重新索引索引管理中的所有数据无效；即使在价格规则之后创建的新产品，如果我不编辑产品，我也看不到特价前端。

只有我一个人有这样的问题吗？知道它是否可能与缓存相关，或者是因为不同的表在产品插入或产品更新时受到影响？

我正在开发 Magento 1.6.1 CE

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-03-31T09:35:22.587

也可能是你错过了这个确保你点击了**应用规则**按钮

[![在此处输入图像描述](../Images/72f798256fa886cbf9e78fd3c4532d9d.png)](https://i.stack.imgur.com/SX4eE.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-20T07:43:42.867

请检查：

1.  规则是否有效？
2.  是否应用了规则？
3.  这条规则在这一天有效吗？
4.  您创建的规则是否实际上包括目标产品？
5.  您的规则是否因为优先级而未被应用？如果以上所有方法都有效，那么当您的 cron 运行并且页面缓存将被刷新时，您的规则将对前端可见

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T13:48:55.017

便宜的方法是每天转到规则并单击“保存并应用规则”按钮，这会起作用但并不理想。作为解决方案，您需要设置一个每天刷新规则的 cronjob。您可以通过转到 System->configuration->system->cron 来执行此操作。或者，如果您可以访问 SSH，则可以设置 crontab。

# matlab - Matlab 3D 体积可视化 - dicom 文件

> ID：13084377
> 
> 赞同：2
> 
> 时间：2012-10-26T09:35:17.890
> 
> 标签：matlab, 3d, dicom

我期待将 3D 矩阵从 dicom 文件可视化到 matlab 中。由于我对matlab不太熟悉，因此我设法从[这篇文章](https://stackoverflow.com/questions/2942251/matlab-3d-volume-visualization-and-3d-overlay)中获得了帮助：

不同之处在于我的矩阵不是由 1 和 0 组成，而是由正确红色的负数组成`imshow(dicomeread(dicomFile))`

如何获得相同的对比度但使用 3D 渲染？

我的代码：

```
dicomFilesZm = dir(fullfile(myDcmFolder, 'SLZ-*.dcm')); %Get files name
dicomFilesZp = dir(fullfile(myDcmFolder, 'SLZ+*.dcm')); %~

Z = dicomFilesZm(end:-1:1); % sort

dicomFilesZ = [Z ; dicomFilesZp]; % recompose final array with files name

Iz1 = fullfile(myDcmFolder, dicomFilesZ(1).name); 
v = NaN([size(dicomread(Iz1)) numel(dicomFilesZ)]); % creation of empty matrix with the good size    
for i = 1 : numel(dicomFilesZ)
    Iz = fullfile(myDcmFolder, dicomFilesZ(i).name);
    v(:,:,i) = dicomread(Iz); % fill the matrix with each image
end

p = patch( isosurface(v,0) );
isonormals(v, p)
set(p, 'FaceColor','r', 'EdgeColor','none')
daspect([1 1 1]) 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T00:06:32.283

解决您的问题的两种选择：

1.  天真地，您为什么不直接设置`v=v+min(v(:))` 图像将从零缩放到不同的最大值？

2.  为什么不`isosurface(V,isovalue)`使用负 isovlaue 为您解决这个问题？或者，如果您想遍历 (-n:step_size:m) 中的等值以获得所需的动态范围（其中一些`alpha(0.2)`可以查看所需的图层）

# eclipse - 在“导入 Maven 项目”期间发生内部错误。java.lang.NullPointerException

> ID：13084379
> 
> 赞同：1
> 
> 时间：2012-10-26T09:35:27.547
> 
> 标签：eclipse, maven

在 eclipse 中导入 maven 项目时出现此错误。我尝试了在[此处](https://bugs.eclipse.org/bugs/show_bug.cgi?id=347623)发布的解决方案，但没有解决问题。不确定 pom 是否是真正的罪魁祸首，只是添加下面的代码

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 
                             http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>abc</groupId>
    <artifactId>xyz</artifactId>
    <packaging>jar</packaging>
    <name>Selenium Test</name>

    <build>
        <finalName>selenium</finalName>
        <sourceDirectory>src/main/java</sourceDirectory>
        <resources>
            <resource>
                <directory>src/main/java</directory>
                <excludes>
                    <exclude>**/*.java</exclude>
                </excludes>
            </resource>
            <resource>
                <directory>src/main/resources</directory>
            </resource>
        </resources>

    </build>

    <dependencies>
        <dependency>
            <groupId>org.testng</groupId>
            <artifactId>testng</artifactId>
            <version>6.8</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.seleniumhq.selenium</groupId>
            <artifactId>selenium-java</artifactId>
            <version>2.25.0</version>
            <scope>compile</scope>
        </dependency>
    </dependencies>
</project> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T20:14:06.247

项目“最终名称”或 pom.xml 中的其他声明可能存在拼写错误。您可以从工作区中删除项目，然后将其导入回来。那至少应该在控制台中显示一些错误。如果您重构了项目名称，您可能会收到此错误。不知何故，折射器不会更新参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-31T22:24:33.393

它只是意味着 pom.xml 有错误。这可能是简单的拼写错误或某些依赖问题。这是一个循序渐进的方法，可以解决您的问题。

第 1 步：备份现有的 pom.xml。

第 2 步：创建一个新的项目 POM。您可以按原样使用下面的

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.example</groupId>
  <artifactId>samplemaven</artifactId>
  <version>0.0.1-SNAPSHOT</version>

    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <java.version>1.8</java.version>
    </properties>

    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>3.1</version>
                <configuration>
                    <source>${java.version}</source>
                    <target>${java.version}</target>
                </configuration>
            </plugin>
        </plugins>
    </build>

    <dependencies>
        <!-- Your dependencies goes here. -->
    </dependencies>

</project> 
```

第 3 步：更改 groupId、artifatId 等（只需进行最低限度的更改）。

第 4 步：从项目目录中删除 .project、.classpath 和 .settings 文件夹（如果您之前有这些文件）。

第五步：在eclipse中导入项目。您应该不会在导入时发现任何问题。

第 6 步：导入完成后，更改新的 pom.xml 以从旧的 pom.xml 中引入其他配置（在第 1 步中备份）。

不要替换新的 pom.xml，因为它最有可能带回原来的问题。在修改更改时也要小心，不要再次引入问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-03-12T13:36:18.500

我有同样的错误，我将工件和版本中的所有变量替换为预期值，然后项目完美导入，然后我返回所有变量

# javascript - 为什么 alert() 是空的？

> ID：13084386
> 
> 赞同：1
> 
> 时间：2012-10-26T09:35:58.863
> 
> 标签：javascript, jquery, html

我有一个带有输入表单和按钮的 HTML：

```
<input id="nameField" type="text">
<input id="submitBtn" type="button" value="Submit"> 
```

和脚本：

```
$(function() {
    var name = $('#nameField').val();

    var data = {
        name: name
    }

    $('#submitBtn').click(function() {
        alert(data.name);
    });
}); 
```

在字段中输入文本并单击按钮。但是警报是空的，并且控制台中没有错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-26T09:36:46.563

那是因为您`data`在文档准备好后立即初始化，早在用户输入文本之前。

你可以这样做：

```
$(function() {
    $('#submitBtn').click(function() {
       var name = $('#nameField').val();
       var data = {
          name: name
       };
       alert(data.name);
    });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T09:40:27.383

```
$(function() {
$('#submitBtn').click(function() {
var name = $('#nameField').val();

var data = {
    name: name
}
    alert(data.name);

}); 
```

});

当他单击节点时，您需要该字段的当前值，而不是在页面加载时。您可以将“数据”对象声明为全局（window.data）变量，只需更改“单击”函数中的“名称”值。

# sql-server-2008 - SSRS BIDS 文件意外结束

> ID：13084388
> 
> 赞同：0
> 
> 时间：2012-10-26T09:36:07.540
> 
> 标签：sql-server-2008, reporting-services, ssrs-2008, bids

在处理我的报告部分之一时，我在 BIDS 中遇到了以下错误。

当我在玩大约 6 次导入到项目中的图像时，Visual Studio 抛出了一个关于性能或内存的错误，我重新启动，现在这就是我每次打开报告部分时看到的全部内容。

我已经打开了上次在报表生成器 3.0 中工作时部署到服务器的报表，将其重新保存在我的项目文件夹中并尝试将其重新添加到项目中，但它仍然引发错误。

有什么建议么？

![在此处输入图像描述](../Images/10102d3a9618e5fe1a727eb28862b064.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T10:16:06.950

回答您的问题是不可能的（无需猜测），但如果将其视为“任何调查建议”，则有一件事不止一次帮助了我：

在 Visual Studio 或您[选择的文本编辑器](https://stackoverflow.com/questions/14155/windows-based-text-editors)中将 RDL 作为代码打开，然后通过 RDL 查看任何问题。它只是一个[XML 文档](http://schemas.microsoft.com/sqlserver/reporting/2008/01/reportdefinition/ReportDefinition.xsd)，而且通常可以通过略读该 XML 中的明显问题来解决这类问题。请注意，嵌入的图像在元素的 RDL 中，其内容已编码。

如果你有一个 VCS（你可能应该：D），那么它可能更容易解决。使用 VCS 的 diff 工具查看 RDL 中的更改。与上面的建议类似，文件及其嵌入的图像元素可能存在问题。

# ant - 使用 JaCoCo 的 Sonar IT 提供 0% 的代码覆盖率

> ID：13084392
> 
> 赞同：6
> 
> 时间：2012-10-26T09:36:30.310
> 
> 标签：ant, selenium, sonarqube, jacoco

我正在使用 Ant 在 RHEL6 机器上运行 Sonar Java 代码分析。对于集成测试分析，我使用 JaCoCo 插件进行声纳。我的库类路径中有插件。当我运行我的 Selenium 测试时，会生成一个“jacoco.exec”文件（10 次测试大约 1MB）。然后我在我的 Sonar Ant 目标中激活 Jacoco 插件并将其导入到 Sonar。声纳分析日志显示 Jacoco 文件已被分析（大约需要 5000 毫秒）。但是，My Sonar IT 小部件显示 0% 的代码覆盖率。我已经通过使用 Cobertura 成功获得了单元测试代码覆盖率。

我的测试目标：

```
<taskdef uri="antlib:org.jacoco.ant" resource="org/jacoco/ant/antlib.xml">
        <classpath path="${buildHome}/libs/jacocoant.jar"/>
    </taskdef>

    <jacoco:coverage xmlns:jacoco="antlib:org.jacoco.ant">
        <junit fork="yes" failureproperty="true" forkmode="once" maxmemory="1024m">
            <formatter type="xml" />
            <classpath refid="buildClasspath" />

            <test name="${testName}" todir="${testLogs}" if="testcase" />
            <batchtest haltonerror="false" todir="${testLogs}">
                <fileset dir="${SeleniumScripts">
                    <include name="**/*.java" />
                </fileset>
            </batchtest>
        </junit>
    </jacoco:coverage> 
```

我的声纳蚂蚁目标：

```
...
<property name="sonar.sources" value="${srcCode" />

    <property name="sonar.tests" value="${testCode}" />

    <property name="sonar.binaries" value="${srcAndTestBinaries}" />

    <property name="sonar.dynamicAnalysis" value="reuseReports"/>
    <property name="sonar.surefire.reportsPath" value="${reportsPath}" />
    <property name="sonar.core.codeCoveragePlugin" value="jacoco" />
    <property name="sonar.jacoco.itReportPath" value="${jacocoCoveragePath}/jacoco.exec" />

    <!-- Add the Sonar task -->
    <taskdef uri="antlib:org.sonar.ant" resource="org/sonar/ant/antlib.xml">
        <classpath path="${antLibPath}/sonar-ant-task-1.4.jar" />
    </taskdef>

    <sonar:sonar key="projectKey" version="1.0" xmlns:sonar="antlib:org.sonar.ant"/> 
```

我试图只包括“相关”的东西。我不确定“jacoco:coverage”元素是否适用于 Selenium 测试，但在执行日志中它提到了“代理”，所以我假设代理在这里也用作 Java VM 上的代理。

我卡住了，请帮忙:)

**更新** 这里是声纳输出的一部分：

```
[sonar:sonar] 08:36:15.619 INFO  p.PhasesTimeProfiler - Sensor JaCoCoItSensor...
[sonar:sonar] 08:36:15.623 INFO  o.s.p.j.JaCoCoPlugin - Analysing [file path omitted]\jacoco.exec
[sonar:sonar] 08:36:17.272 INFO  p.PhasesTimeProfiler - Sensor JaCoCoItSensor done:     1653 ms 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T19:07:39.737

我可能会错过它，但我看不出你在哪里告诉代理将结果存储在哪里。

在我的 ant 脚本中，我有这个：

```
 <jacoco:coverage enabled="${my.coverage.enabled}" destfile="${test.log.dir}/jacoco.exec"> 
```

包装junit任务。尝试定义`destfile="${jacocoCoveragePath}/jacoco.exec"`并查看是否可以解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-10T19:50:20.380

嗨，我也在使用 jacoco 为验收测试生成代码覆盖率。对于单元测试，我使用的是 cobertura，我可以在声纳仪表板上看到代码覆盖率和单元测试报告。

现在来获取代码覆盖以进行验收测试。我们使用 selenium 运行验收测试。我想知道 jacoco 如何为使用 selenium 运行的验收测试生成代码覆盖率。

根据我的猜测，我认为您应该提及 jacocoagent.jar 而不是 jacocoant.jar 的路径。我也可能是错的。如果您找到了一种为在 selenium 上运行的测试生成代码覆盖率的方法，您能否提供解决方案

# javascript - 在 if 语句中添加声音

> ID：13084400
> 
> 赞同：2
> 
> 时间：2012-10-26T09:37:02.477
> 
> 标签：javascript, jquery

我目前正在为我的游戏添加额外的声音。问题是我有一个速记 if 语句，例如“？...：...”，但不知道如何向其中添加音频。如果不可能，我将如何使其成为正常的 if 语句而不使其崩溃。

```
 b.clone().addClass(
    b.data("letter") == target.data("letter") ? "wordglow3" : "wordglow").appendTo("table").css({
        background: "transparent",
        position: "absolute",
        top: currentPos.top,
        left: currentPos.left
    }) 
```

所以如果“wordglow3”我想添加“hit.play()”和“wordglow”我想添加“miss.play()”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T12:53:40.680

好的，首先是带有 if/else 语句的明显解决方案：

```
var c = b.clone();
if ( b.data("letter") == target.data("letter") ) {
    c.addClass("wordglow3");
    hit.play();
} else {
    c.addClass("wordglow");
    miss.play();
}
c.appendTo(table).css(…); 
```

现在，我们可以使用变量删除一些重复的代码：

```
var className, sound;
if ( b.data("letter") == target.data("letter") ) {
    className = "wordglow3";
    sound = hit;
} else {
    className = "wordglow";
    sound = miss;
}
b.clone().addClass(className).appendTo(table).css(…);
sound.play(); 
```

甚至通过使用默认值初始化它们来缩短它们：

```
var className, = "wordglow",
    sound = miss;
if ( b.data("letter") == target.data("letter") ) {
    className += "";
    sound = hit;
}
… 
```

使用三元运算符变得更加困难。我们可以使用[逗号运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comma_Operator)在同一个表达式中链接不同的操作：

```
b.clone().addClass( b.data("letter") == target.data("letter")
  ? hit.play(), "wordglow3"
  : miss.play(), "wordglow"
).appendTo(table).css(…); 
```

但这很丑陋。更好的选择是使用一个变量作为条件和两个三元运算符：

```
var success = b.data("letter") == target.data("letter");
b.clone().addClass(success ? "wordglow3" : "wordglow").appendTo(table).css(…);
(success ? hit : miss).play(); 
```

一旦我们到了这里，你甚至可以考虑为你的声音和类名添加一个额外的数据结构，[用 key 选择替换数百万个（尤其是嵌套的）if 语句](https://stackoverflow.com/a/10029116/1048572)：

```
// global:
var sounds = { // or use an arrays
    "0": …, // miss
    "1": …  // hit
};
var classes = {
    "0": "wordglow",
    "1": "wordglow3"
};
// […]
// then, select values by casting the boolean to numeric keys:
var success = b.data("letter") == target.data("letter");
b.clone().addClass(classes[+success]).appendTo(table).css(…);
sounds[+success].play(); 
```

这使得在其他情况下扩展您的应用程序变得容易，并且如果在任何地方都像这样使用它们，则可以更轻松地维护使用的类名或声音（在中心位置）。此外，我们将两个变量减少`hit`到`miss`只有一个`sounds`.

决定哪个代码片段最易读或最适合您的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T09:45:40.060

我的意思是，如果它不能以速记方式工作，您可以尝试很长的方式：

```
var class_to_add = "wordglow";
if(b.data("letter") == target.data("letter"))
  class_to_add = "wordglow3";
b.clone().addClass(class_to_add).appendTo("table").css({
        background: "transparent",
        position: "absolute",
        top: currentPos.top,
        left: currentPos.left
    }); 
```

# java - Java 继承的返回类型

> ID：13084402
> 
> 赞同：6
> 
> 时间：2012-10-26T09:37:02.623
> 
> 标签：java, inheritance, return-type

我有一个关于 Java 继承方法中的返回类型的问题。我有一个类和一个继承类。在继承的类中，有一个特定的方法。它还从返回自身实例的父类继承了一个方法。

我想要这样的类层次结构：

```
public class Foo {
    public Foo bar()
    {
        return this;
    }
}

public class FooInherited extends Foo {
    public Whatever baz()
    {
        return new Whatever();
    }
} 
```

我的问题是我是否可以从它的实例调用继承的方法，然后调用特定的方法而不重写该方法以返回继承的类或显式地转换类。

现在我想要一个这样的代码片段：

```
FooInherited foo = new FooInherited();
Whatever w = foo.bar().baz(); 
```

我对此感到困难，但我不太确定Java在这种情况下是否有任何为程序员节省时间的机制。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T09:42:15.733

您可以使用泛型，但它很快就会变得丑陋。

```
class Base<This extends Base<This>> {

    public This myself() {
        return (This) this;
    }

}

class Sub<This extends Sub<This>> extends Base<This> {

    public void subOnly() {}

}

{
    Sub<?> sub = new Sub<>();
    sub.myself().subOnly();
    Base<?> base = sub;
    // base.myself().subOnly(); // compile error
} 
```

另一种方法是显式覆盖该方法：

```
class Base {

    public Base myself() {
        return this;
    }

}

class Sub extends Base {

    @Override
    public Sub myself() {
        return this; // or return (Sub) super.myself();
    }

    public void subOnly() {}

}

{
    Sub sub = new Sub();
    sub.myself().subOnly();
    Base base = sub;
    // base.myself().subOnly(); // compile error
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-26T09:44:11.377

除非您覆盖子类中的方法，否则您将不得不强制转换：

```
FooInherited foo = new FooInherited();
Whatever w = ((FooInherited)foo.bar()).baz(); 
```

但是，由于 java 中的[协变返回类型](http://en.wikipedia.org/wiki/Covariant_return_type)，您可以像这样覆盖它：

```
public class FooInherited extends Foo {

        @Override
        public FooInherited bar()
        {
            return this;
        }
 ...
 } 
```

**覆盖后**，您不再需要强制转换，因为 foo 的静态类型是`FooInherited`：

```
FooInherited foo = new FooInherited();
Whatever w = foo.bar().baz(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T09:42:22.313

`foo.bar()`返回一个`Foo`实例并且它没有名为 as 的方法`baz()`，因此无法编译此语句：`Whatever w = foo.bar().baz();`

# java - .dll 已在另一个类加载器中加载

> ID：13084403
> 
> 赞同：0
> 
> 时间：2012-10-26T09:37:03.607
> 
> 标签：java, dll

我正在我的 Web 应用程序中集成一个 Web 服务。Web 服务为我提供了一个 .dll 和 .jar 文件。我将 .dd 放在 /jre/bin 中，将 .jar 放在 /jre/lib 中。然后我开发了我的代码，并部署了应用程序。在开发过程中，我还在项目构建路径中包含了 .jar 文件。在通过tomcat运行它时，它给了我错误：

java.lang.UnsatisfiedLinkError: Native Library .dll 已经加载到另一个类加载器中

有人可以告诉我我哪里错了。我确实搜索了这个问题，但没有一个答案是明确的。

当我删除 .dll 或 .jar 文件时，我的程序无法找到它。我也尝试从我的外部库中删除它，但这也可以正常工作

请帮忙

谢谢， 阿克谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T09:42:21.037

您不能两次加载同一个库。

将该类粘贴到 .WAR 文件下的 jar 文件中`/lib/`，它将与其他 .WAR 文件共享。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-10T07:36:13.790

我遇到了这个问题并通过删除使用一个“.dll”的其他“.jar”文件来解决

如果您的项目和您的 tomcat/lib（并且可能在 jre/bin 中）中存在相同的 .jar 文件，并且所有这些“.jar”需要尝试获取一个资源，则会出现此问题。

我删除了所有 RxTxcomm.jar，除了在 tomcat/lib 中的一个。

就我而言，我在“myproject/lib”、“tomcat/lib”和“jre/lib”中有“RxTxcomm.jar”，而 rxtxserial.dll 在 jre/bin 中。

所以我的问题解决了。

# php - PHP POST复选框问题

> ID：13084405
> 
> 赞同：-4
> 
> 时间：2012-10-26T09:37:03.833
> 
> 标签：php, post, checkbox

我在 PHP 中使用 POST 获取一些数据。当复选框被选中时，没有问题，但是如果其中一行有一个未选中的复选框，则所有复选框的顺序都消失了。我尝试打印数组，我看到如果未选中复选框，则不会写入其值。

例如，如果我有 5 行，我检查了其中的 2 行。这个数组的大小是 2 而不是 5。如何将未选中的复选框转换为“0”值？

```
<input onchange="saveChanges();" type="checkbox" name="showS[]" value="1"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T09:39:52.607

用这个逻辑来做

```
 <?php
      $checkbox = isset($_POST['checkbox'])?$_POST['checkbox']:0;
      .... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T09:40:07.883

当有未选中的复选框时，它不会添加到 _POST 数组中，所以你什么都得不到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T09:40:37.900

为复选框设置适当的值（例如，数据库表中与复选框相关的行的主键列的值）。

处理数组中的*值*，而不是索引。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T09:40:54.327

你可以做几件事。一种是通过这样做来实际显示检查的内容：

```
<input onchange="saveChanges();" type="checkbox" name="showS[value1]" value="1"> 
```

当然，您也可以只使用唯一标识符而不是数组。另一种选择是用值而不是名称来区分。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-26T09:39:19.430

如果您没有在 POST 请求中提交的值（用于[`isset`](http://php.net/manual/en/function.isset.php)确定这一点），则`false`在适当的地方设置，否则使用提交的字段的值。

# html - 如何在同一页面中隐藏链接的内容？

> ID：13084406
> 
> 赞同：-4
> 
> 时间：2012-10-26T09:37:03.293
> 
> 标签：html, blogger

我正在尝试创建一个博客页面。在我的博客页面中，我想在同一页面上提供指向该地点的链接。我怎么能用 html 做到这一点？

```
Ex sort of table of the content

   |------------------------------|
   |  List of smt                 |
   |     *X                       |
   |     *Y                       |
   |     *Z                       |
   |     *T                       |
   |------------------------------| 
```

当用户按下某个链接（例如 X）时，同一页面将加载 X 的内容。X的内容

```
 |------------------------------|
   |           X                  |
   |   X is .....                 |
   | .......................      |
   | .. . X is used in .....      |
   |------------------------------| 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T12:55:43.980

我不确定这是否对您有帮助，但是您可以使用一些 CSS 来做到这一点吗？

如果您将所有内容都放在一个页面上，则可以使用 id 制作 div，然后链接到每个 ID，它会向下滚动到该页面...您可以将 div 隐藏在页面之外，然后单击它们出现...

如果这听起来有用，我可以提供一些代码

代码：据我了解，您想链接到页面的不同部分（很可能更往下）

这是一个选项，让我知道它是否对您的问题有效：

```
{CSS}
#partofpage {

}

{HTML}
<a href = "#partofpage">Link</a> 
```

如果您想隐藏 div 或使其可见：

```
{CSS}
#partofpagehidden {

visibily : hidden; /*if you put "Collapse" then it would hide a column/row of a table*/
OR

display: none; /*This would take the element away and it wont take up any space,      visibility would take it away but it would take up the same space*/

}
#partofpageshown {

visibility: visible;

} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-26T09:41:07.257

[http://www.dynamicdrive.com/forums/showthread.php?49019-jQuery-hide()-and-show()-based-on-a-select-element](http://www.dynamicdrive.com/forums/showthread.php?49019-jQuery-hide()-and-show()-based-on-a-select-element)

[根据匹配的 id 和类定位要显示/隐藏的元素](https://stackoverflow.com/questions/6206381/targeting-elements-to-show-hide-based-on-matching-ids-and-classes)

```
<HEAD>
<script type="text/javascript" src="jquery-1.3.2.js"></script>
<script type="text/javascript">

$(document).ready(function(){

    $("#bloc").change(function() {

    if ($("#bloc").val() == 2)
    {
        $("#bdays, #bdays2, #brea, #brea2").show("fast");
    }
    else
    {      
        $("#bdays, #bdays2, #brea, #brea2").hide();
    }

    });

    if ($("#bloc").val() == 2)
    {
        $("#bdays, #bdays2, #brea, #brea2").show("fast");
    }
    else
    {      
        $("#bdays, #bdays2, #brea, #brea2").hide();
    }

});
 </script>
</HEAD>
<BODY>
<select id="bloc">
<option value="1">Normal</option>
<option value="2">Blocked</option>
</select>

<table border="1">
    <tr>
        <td>value 1</td>
        <td>value 2</td>
    </tr>
    <tr>
        <td>
            <div id="bdays">
            Days:
            </div>
        </td>
        <td>
            <div id="bdays2">
            <input type="text" id="VIN" value="">
            </div>
        </td>
    </tr>
    <tr>
        <td>
            <div id="brea">
            Reason:
            </div>
        </td>
        <td>
            <div id="brea2">
            <input type="text" id="VIN" value="">
            </div>
        </td>
    </tr>
</table>
</BODY> 
```

试试这个。

# c# - 如何使输入控件在 MVVM (WPF) 中相互通信？

> ID：13084413
> 
> 赞同：2
> 
> 时间：2012-10-26T09:37:38.847
> 
> 标签：c#, wpf, mvvm, wpftoolkit

我正在开发一个温度转换器作为测试项目。它具有三个应该相互通信的向上/向下控件。（右侧的标签仅用于调试。）当我通过旋转（例如摄氏）更改温度时，其相应的标签会正确更新，但我也希望开尔文和华氏值同时更改。但他们没有。为什么不？

目的是模型 (TempModel) 应该只保留一个值 (Kelvin)。其他需要时计算。我尝试了不同的方法来获取摄氏和华氏值。在这种情况下，我在模型中具有从私有 _Kelvin 变量计算其值的属性。它在启动时有效，但在我在运行时更改值时无效。

我也尝试对视图模型中的属性做类似的事情。

我相信解决方案相当简单，并且与绑定有关，但我仍然找不到它。

这是它的样子： [用户界面图像](http://s16.postimage.org/glcg9elth/Temp.png "用户界面图片")

这是查看 XAML 代码：

```
<Window x:Class="Temperature.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:extToolkit="http://schemas.microsoft.com/winfx/2006/xaml/presentation/toolkit/extended"
    Title="Temperature converter" Height="183" Width="468">
<Grid VerticalAlignment="Stretch">
    <Label Content="Kelvin" Height="28" HorizontalAlignment="Left" Margin="10,10,0,0" Name="label1" VerticalAlignment="Top" />
    <extToolkit:DoubleUpDown Name="_KelvinUD" Increment="0.1" FormatString="F2" Value="{Binding Kelvin}" HorizontalAlignment="Left" Width="100" VerticalAlignment="Top" Margin="113,14,0,0" />
    <Label Height="28" HorizontalAlignment="Left" Margin="279,10,0,0" Name="label4" VerticalAlignment="Top" Content="{Binding Kelvin}" />

    <Label Content="Celsius" Height="28" HorizontalAlignment="Left" Margin="12,44,0,0" Name="label2" VerticalAlignment="Top" />
    <extToolkit:DoubleUpDown Name="_CelsiusUD" Increment="0.1" FormatString="F2" Value="{Binding Celsius}" HorizontalAlignment="Left" Width="100" VerticalAlignment="Top" Margin="113,48,0,0" />
    <Label Height="28" HorizontalAlignment="Left" Margin="279,44,0,0" Name="label5" VerticalAlignment="Top" Content="{Binding Celsius}" />

    <Label Content="Fahrenheit" Height="28" HorizontalAlignment="Left" Margin="12,78,0,0" Name="label3" VerticalAlignment="Top" />
    <extToolkit:DoubleUpDown Name="_FarenheitUD" Increment="0.1" FormatString="F2" Value="{Binding Fahrenheit}" HorizontalAlignment="Left" Width="100" VerticalAlignment="Top" Margin="113,82,0,0" />
    <Label Height="28" HorizontalAlignment="Left" Margin="279,78,0,0" Name="label6" VerticalAlignment="Top" Content="{Binding Fahrenheit}" />
</Grid> 
```

后面的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

namespace Temperature
{
    public partial class MainWindow : Window
    {
        private TempViewModel _viewModel = new TempViewModel();
        TempViewModel ViewModel
        {
            get { return _viewModel; }
        }

        public MainWindow()
        {
            InitializeComponent();
            base.DataContext = ViewModel;
        }
    }
} 
```

该模型：

```
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.ComponentModel;

namespace Temperature
{
    public class TempModel
    {
        private double _kelvin;
        public double Kelvin
        {
            get
            {
                return _kelvin;
            }
            set
            {
                _kelvin = value;
                OnPropertyChanged("Kelvin");
            }
        }

        public double Celsius
        {
            get
            {
                return _kelvin - 273.15;
            }
            set
            {
                _kelvin = value + 273.15;
                OnPropertyChanged("Celsius");
            }
        }

        public double Fahrenheit
        {
            get
            {
                return 9.0 / 5.0 * (_kelvin - 273.15) + 32;
            }
            set
            { 
                _kelvin = 5.0 / 9.0 * (value - 32) + 273.15;
                OnPropertyChanged("Fahrenheit");
            }
        }

        public event PropertyChangedEventHandler PropertyChanged;
        private void OnPropertyChanged(string propertyName)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
            }
        }

    }
} 
```

视图模型：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Temperature
{
    class TempViewModel
    {
        TempModel _tempModel;

        public TempViewModel()
        {
            _tempModel = new TempModel 
            {
                Kelvin = 300.15 // Initial value
            };
        }

        public TempModel TempModel
        {
            get
            {
                return _tempModel;
            }
            set
            {
                _tempModel = value;
            }
        }

        public double Kelvin
        {
            get
            {
                return _tempModel.Kelvin;
            }
            set
            {
                _tempModel.Kelvin = value;
            }
        }
        public double Celsius
        {
            get
            {
                return _tempModel.Celsius;
            }
            set
            {
                _tempModel.Celsius = value;
            }
        }
        public double Fahrenheit
        {
            get
            {
                return _tempModel.Fahrenheit;
            }
            set
            {
                _tempModel.Fahrenheit = value;
            }
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T09:43:58.957

在设置器中`Fahrenheit`设置`Celsius`属性`Kelvin`而不是`_kelvin`字段。`Kelvin`此外，从 setter而非其他度量的 setter提出所有三个属性更改。这样，当任何温度发生变化时，`Kelvin`都会更新并通知视图所有三个值都已更改。

此外，我假设您正在实施`INotifyPropertyChanged`，即使它没有在您的模型或视图模型的代码中指定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T09:59:42.323

如果一个属性的更改也更改了其他两个属性，则您还必须提高 OnPropertyChanged 以便其他属性通知您的视图。

这应该有效（快速而肮脏的方法）。我只是公开并绑定到模型属性。

```
public class TempModel
{
    private double _kelvin;
    public double Kelvin
    {
        get
        {
            return _kelvin;
        }
        set
        {
            _kelvin = value;
            OnPropertyChanged("Kelvin");
            OnPropertyChanged("Celsius");
            OnPropertyChanged("Fahrenheit");
        }
    }

    public double Celsius
    {
        get
        {
            return _kelvin - 273.15;
        }
        set
        {
            _kelvin = value + 273.15;
            OnPropertyChanged("Celsius");
            OnPropertyChanged("Kelvin");
            OnPropertyChanged("Fahrenheit");
        }
    }

    public double Fahrenheit
    {
        get
        {
            return 9.0 / 5.0 * (_kelvin - 273.15) + 32;
        }
        set
        { 
            _kelvin = 5.0 / 9.0 * (value - 32) + 273.15;
            OnPropertyChanged("Fahrenheit");
            OnPropertyChanged("Celsius");
            OnPropertyChanged("Kelvin");
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    private void OnPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }

}

public class TempViewModel
{
    TempModel _tempModel;

    public TempViewModel()
    {
        _tempModel = new TempModel 
        {
            Kelvin = 300.15 // Initial value
        };
    }

    public TempModel TempModel
    {
        get
        {
            return _tempModel;
        }
        set
        {
            _tempModel = value;
        }
    }
}

<Grid VerticalAlignment="Stretch">

<extToolkit:DoubleUpDown Increment="0.1" FormatString="F2" Value="{Binding TempModel.Kelvin}" HorizontalAlignment="Left" Width="100" VerticalAlignment="Top" Margin="113,14,0,0" />

<extToolkit:DoubleUpDown  Increment="0.1" FormatString="F2" Value="{Binding TempModel.Celsius}" HorizontalAlignment="Left" Width="100" VerticalAlignment="Top" Margin="113,48,0,0" />

<extToolkit:DoubleUpDown  Increment="0.1" FormatString="F2" Value="{Binding TempModel.Fahrenheit}" HorizontalAlignment="Left" Width="100" VerticalAlignment="Top" Margin="113,82,0,0" />
</Grid> 
```

# java - 将客户端代码与 Expresso 一起使用时出错

> ID：13084414
> 
> 赞同：1
> 
> 时间：2012-10-26T09:37:45.997
> 
> 标签：java, xml, http, xml-parsing

我上周开始使用 expresso paser (www.sxml.com.au)，因为在这个网站上看到它作为解决方案被提及。我创建了一个免费帐户，登录，上传了一个 XML 文件并解析了该文件。我可以在屏幕上看到结果很好。然后我在java中生成了客户端代码并运行了它。

我正在使用 HTTP 运行非 SSL 版本，我从 SXML 服务器收到了这个错误。

其他人有这方面的经验吗？

请帮助，因为我需要尽快将其集成到项目中！

这是我的客户端代码的一部分，它连接到 SXML 服务器并发出请求。

```
String username = "adamCoyle";
String password = ""; //ADD PASSWORD HERE
String connectionName = "test1";
String company = "student";
String remoteSXMLURL="http://sxml.com.au:8080/Expresso/RemoteSXML";
/*
 * Non- SSL mode
 */
/*
* For SSL mode, uncomment the following code and follow certificate installation     instructions in help section
* of website to install the SSL cert into the CA keystore
*/
//String remoteSXMLURL="https://sxml.com.au:8444/Expresso/RemoteSXML";

String urlParams ="";

String fileLocation = "server";

String fileForXMLUpload = "";

if(fileForXMLUpload!="")

{

File xmlFileToBeUploadedFile = new File (fileForXMLUpload);

fileForXMLUpload="";

if(xmlFileToBeUploadedFile.exists())

{

BufferedReader bfr = new BufferedReader(new FileReader (xmlFileToBeUploadedFile));

while(bfr.ready())

{

fileForXMLUpload+=bfr.readLine();

}

}

}

String mode= "all";

String isCached = "false";

String areRulesSimple ="false";

String dynamicParamaters ="";

String sortBy ="";

/* step 2 - make a https connection */

URL sxml = new URL(remoteSXMLURL);

HttpURLConnection yc = (HttpURLConnection) sxml.openConnection();

/* step 3- add the paramaters to the HTTPS connection */

String urlParameters = "username="

+ URLEncoder.encode(username, "UTF-8") + "&password="

+ URLEncoder.encode(password, "UTF-8") + "&connectionName="

+ URLEncoder.encode(connectionName, "UTF-8") + "&company="

+ URLEncoder.encode(company, "UTF-8") + "&fileLocation="

+ URLEncoder.encode(fileLocation, "UTF-8") + "&fileForXMLUpload="

+ URLEncoder.encode(fileForXMLUpload, "UTF-8") + "&mode="

+ URLEncoder.encode(mode, "UTF-8") + "&isCached="

+ URLEncoder.encode(isCached, "UTF-8") + "&areRulesSimple="

+ URLEncoder.encode(areRulesSimple, "UTF-8") + "&dynamicParamaters="

+ URLEncoder.encode(dynamicParamaters, "UTF-8") + "& urlParams ="

+ URLEncoder.encode(urlParams, "UTF-8") + "&sortBy="

+ URLEncoder.encode(sortBy, "UTF-8");

/* step 4- set the properties for the HTTPS connection */

/*

* properties

* requestMethod - The HTTPS request will always be a POST request

* Content-Type - The content type is application/x-www-form-urlencoded

* content-Length - This is the length of the paramaters

*

*/

yc.setRequestMethod("POST");

yc.setRequestProperty("Content-Type","application/x-www-form-urlencoded");

yc.setRequestProperty("Content-Length","" + Integer.toString(urlParameters.getBytes().length));

yc.setRequestProperty("Content-Language", "en-US");

yc.setDoOutput(true);

/* step 5 - push out request to HTTPS server */

DataOutputStream wr = new DataOutputStream(yc.getOutputStream());

wr.writeBytes(urlParameters);

wr.flush();

wr.close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T11:00:01.977

首先，感谢您使用 SXML。我们真的在努力让尽可能多的开发人员使用它。

我查看了您的客户端代码，并且缺少一个字段。要使用 Expresso XML 解析器，您需要提供密码。这与您登录 GUI 帐户时使用的密码相同。出于安全原因，您的密码不会自动添加到客户端代码中，但您需要它来连接。

找到代码中说的部分

字符串密码 = ""; //在此处添加密码

添加您的密码代替空白字符串，然后尝试再次连接。您应该能够连接。

请让我知道您是否还有其他问题。

劳拉·卡瓦纳 www.sxml.com.au

# entity-framework - EntityFramework 试图选择一个不存在的列？

> ID：13084415
> 
> 赞同：9
> 
> 时间：2012-10-26T09:37:46.637
> 
> 标签：entity-framework, visual-studio-2012, redmine

我有一个问题，我只是无法弄清楚是什么导致了这个问题。

我有一个带有“期刊”表[http://puu.sh/1iRIt](http://puu.sh/1iRIt)的 redmine 数据库。使用 Visual Studio 2012 插件 EntityFramework Power Tools 已将其反向工程为以下类：

```
public class Journal
    {
        public int id { get; set; }
        public int journalized_id { get; set; }
        public string journalized_type { get; set; }
        public int user_id { get; set; }
        public string notes { get; set; }
        public System.DateTime created_on { get; set; }
    } 
```

和地图：

```
public class JournalMap : EntityTypeConfiguration<Journal>
    {
        public JournalMap()
        {
            // Primary Key
            this.HasKey(t => t.id);

            // Properties
            this.Property(t => t.journalized_type)
                .IsRequired()
                .HasMaxLength(30);

            this.Property(t => t.notes)
                .HasMaxLength(65535);

            // Table & Column Mappings
            this.ToTable("journals", "redmine");
            this.Property(t => t.id).HasColumnName("id");
            this.Property(t => t.journalized_id).HasColumnName("journalized_id");
            this.Property(t => t.journalized_type).HasColumnName("journalized_type");
            this.Property(t => t.user_id).HasColumnName("user_id");
            this.Property(t => t.notes).HasColumnName("notes");
            this.Property(t => t.created_on).HasColumnName("created_on");
        }
    } 
```

现在，当我尝试使用 LINQ 对期刊数据库执行选择时：

```
return context.Journals.Where(c => c.journalized_id == task.id);

I see that the following query is created:

-       returnValue {SELECT
`Extent1`.`id`, 
`Extent1`.`journalized_id`, 
`Extent1`.`journalized_type`, 
`Extent1`.`user_id`, 
`Extent1`.`notes`, 
`Extent1`.`created_on`, 
`Extent1`.`Issue_id`
FROM `journals` AS `Extent1`
 WHERE `Extent1`.`journalized_id` = @p__linq__0}    

 System.Linq.IQueryable<Synchronisation.Domain.Entities.Redmine.Journal> {System.Data.Entity.Infrastructure.DbQuery<Synchronisation.Domain.Entities.Redmine.Journal>} 
```

我不明白“Issue_id”来自哪里，这个查询导致 EntityCommandExecutionException（内部异常：{“Unknown column 'Extent1.Issue_id' in 'field list'”}）

当我手动添加 Issue_id 列时，此问题已修复（此修复必须还原，无需更改数据库结构）

我不知道这个“Issue_id”来自哪里，有人知道如何找到这个吗？

干杯，瑞克

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T07:51:41.463

删除了 Journal 和 Issue 之间的自定义引用（我在 Issue 类中添加了一个期刊列表）

```
public List<Journal> Journals { get; set; } 
```

删除此列表后，EntityFramework 可以再次正确地找出查询。

# eclipse-rcp - Eclipse RCP：如何管理 Back Forward 操作？

> ID：13084423
> 
> 赞同：0
> 
> 时间：2012-10-26T09:38:28.060
> 
> 标签：eclipse-rcp

在我的 RCP 应用程序中，后退和前进按钮的工作方式很奇怪。他们没有像我预期的那样导航到正确的编辑器视图。如何或在哪里可以配置后退和前进操作？先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:51:53.010

看看关于导航历史的 Eclipse 文章：[http ://wiki.eclipse.org/FAQ_How_do_I_hook_my_editor_to_the_Back_and_Forward_buttons%3F](http://wiki.eclipse.org/FAQ_How_do_I_hook_my_editor_to_the_Back_and_Forward_buttons%3F)

# java - 我可以从 Java 注释加载 JPA 映射并将它们保存为 XML 吗？

> ID：13084425
> 
> 赞同：4
> 
> 时间：2012-10-26T09:38:28.747
> 
> 标签：java, xml, jpa, orm, annotations

是否可以仅使用注释定义 JPA 映射，然后以编程方式将此映射数据保存回某个 orm.xml 文件？

团队中有关于是使用注解还是 XML 的讨论，我想检查一下，如果我们从注解开始，我们是否可以在以后简单地切换，而无需手动重写所有 XML 文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T19:50:39.087

Eclipse Dali 项目有一个功能请求（[错误 138622](https://bugs.eclipse.org/bugs/show_bug.cgi?id=138622)），但我们计划不支持它。在 Juno 版本中，我们确实添加了将全局元数据（命名查询、生成器）从注释转换为 xml 的支持（[错误 353149](https://bugs.eclipse.org/bugs/show_bug.cgi?id=353149)）。据我所知，没有工具可以将所有 JPA 注释元数据转换为 orm.xml 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T15:25:13.300

不知道有没有工具。

在运行时，如果您使用 EclipseLink，则可以使用 XMLEntityMappingsWriter 将 JPA 元数据写入 XML。它是内部 API，但它确实有效。

# excel - 如何在 Excel 中对行进行分组

> ID：13084426
> 
> 赞同：0
> 
> 时间：2012-10-26T09:38:35.470
> 
> 标签：excel

情况如下：

```
ABC 3  
ABC 4  
ABD 1  
安倍2

```

我如何到达（以自动方式）

```
ABC 7    
ABD 1  
安倍2

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T10:04:31.557

您可以使用该`SUBTOTAL`功能（功能区菜单 -> 数据选项卡）或数据透视表来执行此操作。

[小计 miniHowTo](http://www.google.de/imgres?um=1&hl=de&client=firefox-a&sa=N&rls=org.mozilla:de:official&biw=1540&bih=809&tbm=isch&tbnid=AUpZ1AIabME3RM:&imgrefurl=http://www.dummies.com/how-to/content/how-to-insert-subtotals-in-an-excel-2010-worksheet.html&docid=-B3NTZ89mGEzDM&imgurl=http://media.wiley.com/Lux/51/215251.image0.jpg&w=323&h=400&ei=H1-KUKy4KMfTsgaU3oDIBg&zoom=1&iact=hc&vpx=587&vpy=337&dur=565&hovh=242&hovw=196&tx=106&ty=114&sig=110198793552409598277&page=1&tbnh=150&tbnw=121&start=0&ndsp=27&ved=1t:429,r:2,s:20,i:139)

这里有一种使用数据透视表的方法：

![在此处输入图像描述](../Images/93d838d7976fa80af23e736ecd9ad595.png)

# javascript - CKEDITOR 在 IE 上 getElementsByTag 时丢失自定义节点

> ID：13084429
> 
> 赞同：0
> 
> 时间：2012-10-26T09:38:42.340
> 
> 标签：javascript, html, ckeditor, nodes

ckeditor 在 IE 上 getElementsByTag 时丢失自定义标签

在文档内容如下：

```
 <initTag id="ss">
  <myTag id="aa1">text</myTag>
  <myTag id="ab2">Text</myTag>
  <otherTag id="aac">
    <myTag id="ab3">text</myTag>
  </otherTag>
</initTag> 
```

`<initTag>`位于（变量）itag

```
var nNode = itag.getElementsByTag("myTag"); 
for(var x; x<nNode.count();x++){
alert(nNode.getItem(x).getOuterHtml());
} 
```

警报信息如下：

（新添加的除外）哪一个已经在文档中：

```
<MYTAG id="AB3"> 
```

就在添加标签之前只像：

```
<myTag id="ab2">Text</myTag> 
```

**如何正确获取所有节点？**

请同时检查以下代码：

```
<head runat="server">
       <script language="javascript" type="text/javascript">
        function btnclick() {
            var testctrl = document.createElement("myTag");
            testctrl.innerHTML = "test Val";
           var tt= document.getElementById("temp");
          tt.appendChild(testctrl);
            var testnd = document.getElementsByTagName("myTag");
          for (var i = 0; i < testnd.length; i++) {

              alert(testnd.item(i).outerHTML);
          }

        }
    </script>
</head>
<body>
<div id="temp" >
    </div>
    <input type="button" id="tbtn" onclick="javascript:btnclick();return false;" value="ClickMe"/>
  <myTag>1</myTag>
    <myTag>2</myTag>
    <myTag>3</myTag>
    <myTag>4</myTag>
    <myTag>5</myTag>
    <myTag>6</myTag>
    <myTag>7</myTag>
    <myTag>8</myTag>
    <myTag>9</myTag>
    <myTag>0</myTag>

</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T23:45:40.407

CKEditor 不是丢失了这个节点。您必须在 IE 中添加对它们的支持。

请参阅我对类似问题的其他答案：

*   [IE 在 sethtml 时丢失自定义标签](https://stackoverflow.com/questions/12967695/ie-browser-losing-ckeditor-element-sethtmluserdefinedtags-userdefinedtags/12969485#12969485)
*   [Ckeditor [IE] 中的虚拟（重复）节点](https://stackoverflow.com/questions/13023608/dummyduplicate-node-in-ckeditor-ie/13029566#13029566)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T13:10:46.920

见以下链接：

[http://code.google.com/p/html5shiv/](http://code.google.com/p/html5shiv/)

此链接可以解决 html5 标签问题，您也可以将自己的标签添加到此 js 文件中。可能这是你的要求。

您应该在 Html5shiv.js 上添加您的 customTags，如下所示：

```
if (html5.shivCSS && !supportsHtml5Styles && !data.hasCSS) {
      data.hasCSS = !!addStyleSheet(ownerDocument,
        // corrects block display not defined in IE6/7/8/9
        'myTag,article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}' +
        // adds styling not present in IE6/7/8/9
        'mark{background:#FF0;color:#000}'
      ); 
```

和这里 ：

变量 html5 = {

```
 'elements': options.elements || 'myTag abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video', 
```

这个答案可能会解决您的其他一些问题

# ios - 从视图控制器中隐藏 tabBarController 上的选项卡

> ID：13084430
> 
> 赞同：0
> 
> 时间：2012-10-26T09:38:51.957
> 
> 标签：ios, xcode

是否可以隐藏/停用标签上的标签`UITabBarController`？

如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T09:48:06.807

可以停用它，使用以下委托方法：

```
- (BOOL)tabBarController:(UITabBarController *)tabBarController shouldSelectViewController:(UIViewController *)viewController; 
{
    if (viewControllerYouWantToDeactivate == viewController)
    {
        return NO;
    }
    else
    {
        return YES;
    }   
} 
```

不要忘记设置您的`UITabBarController`.

您可以在此处找到委托[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITabBarControllerDelegate_Protocol/Reference/Reference.html)

# javascript - javascript值获取

> ID：13084434
> 
> 赞同：0
> 
> 时间：2012-10-26T09:39:07.900
> 
> 标签：javascript

我想用javacript创建一个库存计算系统，现在我已经创建了它有一些问题是我已经创建了3行1.Purchase，2.Sold，3.Stock。现在我已经设置了当我给出购买价值时和已售出的数量，它将减去并在库存文本框中打印值，然后是下一列库存值也在购买文本框中打印问题是当购买项目变为 nill 时意味着 0 所以我该怎么做才能添加一些数量并重新开始这个流程。编码是。

```
<html>
<head>
<title>Stock Information</title>
<link rel="stylesheet" type="text/css" href="css/style.css"/>
<script type="text/javascript">
    //------------------------------------Date---------------------------------------------
    var today = new Date();                                                               //
    var dd = today.getDate();                                                             //
    var mm = today.getMonth()+1; //January is 0!                                          //
    var yyyy = today.getFullYear();                                                       //
    today = dd+'/'+mm+'/'+yyyy;                                                           //   
    document.write(today);                                                                //
    //-------------------------------------------------------------------------------------
//----------------------------------------------------  
function program(a,b,c,d,e,f)
{
    var total1=a-b;
    document.stock.t3.value=total1;

    var jump1=document.stock.t3.value;
    document.stock.t4.value=jump1;
    var total2= c-d;
    document.stock.t6.value=total2;

    var jump2=document.stock.t6.value;
    document.stock.t7.value=jump2;
    var total3= e-f;
    document.stock.t9.value=total3;
    }
</script>
</head>
<body>
<center>
<h1 class="table">Stock Information</h1>
</center>
<table width="800" align="center" class="table1">
  <tr>
    <th width="260"class="table">Purchase</th>
    <th width="260"class="table">Sold</th>
    <th width="428"class="table">Stock</th>
  </tr>
  <form name="stock">
  <tr align="center">
    <td><input id="t1" type="text" style="width:260px;" class="input1"/></td>
    <td><input id="t2" type="text" style="width:260px;" class="input1"/></td>
    <td><input id="t3" type="text" style="width:260px;" class="input1" onClick="program(t1.value,t2.value)" readonly/></td>
  </tr>
  <tr align="center">
    <td><input id="t4" type="text" style="width:260px;" class="input1" onClick="program(t1.value,t2.value,t4.value,t5.value)"/></td>
    <td><input id="t5" type="text" style="width:260px;" class="input1"/></td>
    <td><input id="t6" type="text" style="width:260px;" class="input1" onClick="program(t1.value,t2.value,t4.value,t5.value)" readonly/></td>
  </tr>
    <tr align="center">
    <td><input id="t7" type="text" style="width:260px;" class="input1" onClick="program(value1.value,value2.value,t4.value,t5.value)"/></td>
    <td><input id="t8" type="text" style="width:260px;" class="input1"/></td>
    <td><input id="t9" type="text" style="width:260px;" class="input1" onClick="program(value1.value,value2.value,t4.value,t5.value,t7.value,t8.value)"readonly/></td>
  </tr>
 </form>
</table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T11:03:02.473

我建议您保持 JavaScript 中的逻辑并保持 HTML 干净！:)

而不是`onClic`你可以使用`onChange`

```
<input onChange="program(this)" /> 
```

接下来，我们将在 JavaScript 中计算所有内容...

```
function program(el) {
  var fields = document.stock;

  // Do nothing, if the required fields are empty
  if (fields.t1.value == '' || fields.t2.value == '') return;

  // Calculate result
  fields.t3.value = fields.t1.value - fields.t2.value;

  // Do nothing, if the required fields are empty
  if (fields.t4.value == '' || fields.t5.value == '') return;

  // Calculate result
  fields.t6.value = fields.t4.value - fields.t5.value;

  // Do nothing, if the required fields are empty
  if (fields.t7.value == '' || fields.t8.value == '') return;

  // Calculate result
  fields.t9.value = fields.t7.value - fields.t8.value;
} 
```

我不完全理解它应该如何工作，但我会尝试重复相同的逻辑，你做了什么。

我稍微改变了 HTML 结构：

```
<form name="stock">
  <table width="800" align="center" class="table1">
    <tr>
      <th width="260"class="table">Purchase</th>
      <th width="260"class="table">Sold</th>
      <th width="428"class="table">Stock</th>
    </tr>

    <tr align="center">
      <td><input id="t1" type="text" style="width:260px;" class="input1" onChange="program(this)" /></td>
      <td><input id="t2" type="text" style="width:260px;" class="input1" onChange="program(this)" /></td>
      <td><input id="t3" type="text" style="width:260px;" class="input1" readonly /></td>
    </tr>
    <tr align="center">
      <td><input id="t4" type="text" style="width:260px;" class="input1" readonly /></td>
      <td><input id="t5" type="text" style="width:260px;" class="input1" onChange="program(this)" /></td>
      <td><input id="t6" type="text" style="width:260px;" class="input1" readonly /></td>
    </tr>
    <tr align="center">
      <td><input id="t7" type="text" style="width:260px;" class="input1" readonly /></td>
      <td><input id="t8" type="text" style="width:260px;" class="input1" onChange="program(this)" /></td>
      <td><input id="t9" type="text" style="width:260px;" class="input1" readonly /></td>
    </tr>
  </table>
</form> 
```

请注意，我确实将`t4`和`t7`字段设置为`readonly`.

和 JavaScript：

```
function program(el) {
  var fields = document.stock;

  // Clear the calculation fields
  fields.t3.value = '';
  fields.t6.value = '';
  fields.t9.value = '';
  fields.t4.value = '';
  fields.t7.value = '';

  // Do nothing, if any of the required fields are empty
  if (fields.t1.value === '' || fields.t2.value === '') return;

  // Calculate result
  fields.t3.value = fields.t1.value - fields.t2.value;

  // Copy the result
  fields.t4.value = fields.t3.value;

  // Do nothing, if the required fields are empty
  if (fields.t5.value === '') return;

  // Calculate result
  fields.t6.value = fields.t4.value - fields.t5.value;

  // Copy the result
  fields.t7.value = fields.t6.value;

  // Do nothing, if the required fields are empty
  if (fields.t8.value === '') return;

  // Calculate result
  fields.t9.value = fields.t7.value - fields.t8.value;
} 
```

您还可以在 JSBin 中查看此演示：http: [//jsbin.com/welcome/39835/edit](http://jsbin.com/welcome/39835/edit)

我希望我做对了。

**更新** 好的，我做了一些改进。但是`0`，我没有检查结果是否为 ，而是允许先写。当结果被复制到下一行的第一个字段时，该函数现在只是一个助手，如果字段不为空，则不会覆盖该值。我认为应该是这样。

略微更改的 HTML：

```
<form name="stock">
  <table width="800" align="center" class="table1">
    <tr>
      <th width="260"class="table">Purchase</th>
      <th width="260"class="table">Sold</th>
      <th width="428"class="table">Stock</th>
    </tr>

    <tr align="center">
      <td><input id="t1" type="text" style="width:260px;" class="input1" onChange="program(this)" /></td>
      <td><input id="t2" type="text" style="width:260px;" class="input1" onChange="program(this)" /></td>
      <td><input id="t3" type="text" style="width:260px;" class="input1" readonly="readonly" /></td>
    </tr>
    <tr align="center">
      <td><input id="t4" type="text" style="width:260px;" class="input1" onChange="program(this)" /></td>
      <td><input id="t5" type="text" style="width:260px;" class="input1" onChange="program(this)" /></td>
      <td><input id="t6" type="text" style="width:260px;" class="input1" readonly="readonly" /></td>
    </tr>
    <tr align="center">
      <td><input id="t7" type="text" style="width:260px;" class="input1" onChange="program(this)" /></td>
      <td><input id="t8" type="text" style="width:260px;" class="input1" onChange="program(this)" /></td>
      <td><input id="t9" type="text" style="width:260px;" class="input1" readonly="readonly" /></td>
    </tr>
  </table>
</form> 
```

而且，最重要的是，JavaScript！`id=""`涉及到 DOM 遍历，因此您不再需要依赖 DOM **，**您可以在不更改 JavaScript 代码的情况下创建所需的行数。

```
function program(el) {
  // Get the row (the <tr> element)
  var row = el.parentNode.parentNode;

  // Get all the <input> elements in row
  var inputs = row.getElementsByTagName('input');

  // Return, if required fields are empty
  if (inputs[0].value === '' || inputs[1].value === '') {
    inputs[2].value = '';
    return;
  }

  // Calculate the result
  inputs[2].value = inputs[0].value - inputs[1].value;

  // Find the next row (<tr> element)
  var nextRow = row.nextSibling.nextSibling;
  while (nextRow !== null && nextRow.tagName !== 'TR') {
    nextRow = nextRow.nextSibling;
  }

  // Return, if the next row doesn't exist
  if (nextRow === null || nextRow.tagName !== 'TR') return;

  // Get all <input> fields in row
  var nextRowInputs = nextRow.getElementsByTagName('input');

  if (nextRowInputs[0].value === '') {
    // Copy the previous row result into next rows first input,
    // only if it's not filled already
    nextRowInputs[0].value = inputs[2].value;
  }
} 
```

And this demo can be tested here: [http://jsbin.com/welcome/39893/edit](http://jsbin.com/welcome/39893/edit)

**Vote this answer up** and give me some points, please! :)

# java - 格式化文本以删除 html 标签

> ID：13084435
> 
> 赞同：3
> 
> 时间：2012-10-26T09:39:12.893
> 
> 标签：java, android, string-formatting

我正在使用 LastFM API 来获取艺术家信息。当我调用他们的`artist.getInfo`方法时，我得到了一个 Artist 对象。但是，wiki 摘要文本使用 html 格式，如下所示：

```
Arch Enemy is a Swedish <a href="http://www.last.fm/tag/melodic%20death%20metal" class="bbcode_tag" rel="tag">melodic death metal</a> band from Halmstad, Sweden, formed in 1996\. Founded by <a href="http://www.last.fm/music/Carcass" class="bbcode_artist">Carcass</a> guitarist <a href="http://www.last.fm/music/Michael+Amott" class="bbcode_artist">Michael Amott</a> along with <a href="http://www.last.fm/music/Johan+Liiva" class="bbcode_artist">Johan Liiva</a>, both originally from the influential death metal band <a href="http://www.last.fm/music/Carnage" class="bbcode_artist">Carnage</a>. The band has released seven studio albums, a live album (Burning Japan Live 1999), two DVDs and three EPs. The band was originally fronted by Johan Liiva, who was replaced by <a href="http://www.last.fm/music/Angela+Gossow" class="bbcode_artist">Angela Gossow</a> as lead vocalist in 2000 
```

我想从此文本中获取纯文本（无 html）。我尝试使用子字符串手动删除它们，但我找不到这样做的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T09:54:04.357

我建议使用[Boilerpipe](http://code.google.com/p/boilerpipe/)。它具有从`HTML`.

你所要做的就是：

```
 URL url = new URL("http://www.example.com/some-location/index.html");
   // NOTE: Use ArticleExtractor unless DefaultExtractor gives better results for you
   String text = ArticleExtractor.INSTANCE.getText(url); 
```

这是从 URL 中提取的文本。但是它是否具有您可以传递 a `String`as 的功能`HTML`。我一直在使用它，它是我尝试过的最好的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T10:08:34.310

Android中有一个类Html。使用这个类的最简单的方法，你可以看到方法 fromHtml(...)，它返回 Spannable 可以很容易地转换为纯文本。

所以下一个例子是：

```
String htmlString = "<div>text</div><a href=\"someref\">link</a>";
String plainText = Html.fromHtml(htmlString).toString(); 
```

# cruisecontrol.net - CruiseControl.NET 有队列管理器吗？

> ID：13084438
> 
> 赞同：0
> 
> 时间：2012-10-26T09:39:19.823
> 
> 标签：cruisecontrol.net, cruisecontrol

假设我有三个项目：

```
 <project name="Foo" queue="Q1" queuePriority="1">...</project>

  <project name="Bar" queue="Q1" queuePriority="1">...</project>

  <project name="Lambda" queue="Q1" queuePriority="1">...</project> 
```

和“Lambda”目前正在建设中。两个同事单击 Force build on 'Foo' 和 'Bar'。两者都添加到队列中。假设首先添加“Bar”，然后添加“Foo”。

CCnet 是否有队列管理器可以从仪表板（或托盘应用程序）*重新排序“Q1”队列？*

如果没有，理论上是否可以为此功能编写插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T10:44:11.600

不，不存在这样的应用程序，它需要对 CC.net 服务器进行深刻的更改才能做到这一点。

您可以通过停止项目从队列中删除强制构建。（请记住重新启动它。）您可以通过配置`duplicates`CC.net 队列的属性在一定程度上控制强制构建的排队方式，例如“ApplyForceBuildsReAddTop”将强制构建排在常规构建之前。然而，即使这样也不允许您控制*强制构建*的顺序。

# javascript - 是否可以停止 IntelliJ 在 jsdoc 注释中添加 @private ？

> ID：13084439
> 
> 赞同：0
> 
> 时间：2012-10-26T09:39:24.010
> 
> 标签：javascript, intellij-idea, jsdoc

如果我在 javascript 文件中有一个私有函数：

```
Class.prototype._method = function () {
   // do stuff
}; 
```

当我启动一个文档块时，IntelliJ 将有助于将它存根，所以我得到：

```
/**
 * 
 * @private
 */
Class.prototype._method = function () { 
```

我已经将[JsDoc](http://code.google.com/p/jsdoc-toolkit/)配置为将带下划线的函数视为私有函数，所以我宁愿它**不**添加到评论中。是否可以配置 IntelliJ 使其不添加`@private`到评论中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T17:26:01.060

~~它应该已经在最新的 IDEA 版本中工作，请参阅已[解决的请求](http://youtrack.jetbrains.com/issue/IDEA-76545)。~~

~~请注意，当您键入`/**`并按时，它会在存根生成时添加`Enter`。~~

# magento - 如何对 Magento 分组产品页面进行分类？

> ID：13084443
> 
> 赞同：2
> 
> 时间：2012-10-26T09:39:38.543
> 
> 标签：magento, e-commerce, categories, magento-1.7, product

我需要在 Magento 1.7 上创建一个分组产品页面

为此，我添加了一个产品作为*分组产品*，并在那里关联了一些*简单的产品*。分组的产品在前端以表格行的形式一一显示。我的要求是在相关产品的相应**类别中显示此页面。**

例如：- 我有两个类别**餐桌**和**餐椅**。

我创建了一个分组产品，比如**Lyn Dining set**，并关联了两个简单的产品**lyn Dining table**（来自*Dining Tables*类别）和**Lyn Dining Chair**（来自*Dining Chair*类别）。默认情况下，它将在表格行中一一显示。像这样：-

```
Lyn Dining Table    Product Attributes...
Lyn Dining Chair    Product Attributes...
......................................
......................................
...................................... 
```

但我需要在相应的类别标题中显示。那是：-

```
Dining Table:-
Lyn Dining Table    Product Attributes...
......................................
......................................

Dining Chair:-
Lyn Dining Chair    Product Attributes...
......................................
...................................... 
```

为此，我编辑了 grouped.phtml 文件。首先，我用这段代码获取了类别名称：-

```
 /**
         * get categories from a product
         */
        $categoryIds = $this->htmlEscape($_item->getCategoryIds());

        /**
         * looping through the array of category ids
         */
        foreach($categoryIds as $categoryId) {
            $category = Mage::getModel('catalog/category')->load($categoryId);
            $categoryB=$category->getName();
            } 
```

通过这个我可以获取类别名称。但我不知道如何实现循环，以便所有产品都可以列在相应的类别中。请任何人伸出援手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T18:07:16.877

我会创建一个辅助函数，像这样（请记住，这段代码还是有点粗糙）：

公共函数 formatProductsWithCategories($products) { $categories = array(); $categoryProducts = 数组（）；$hasOrphans = 假；

```
 foreach ($products as $product) {
        $categories = array_merge($product->getCategoryIds(), $categories);
        foreach($product->getCategoryIds() as $categoryId) {
            $categoryProducts[$categoryId][] = $product;
            $found = true;
        }

        if (!$found){
            $categoryProducts["empty"][] = $product;
            $hasOrphans = true;
        }
    }

    $categoryCollection = Mage::getResourceModel('catalog/category_collection')
        ->addAttributeToFilter('entity_id', array('in', $categories))
        ->addAttributeToSelect('name');

    $categoryCollection->load();

    if ($hasOrphans) {
        $categoryCollection->addItem(
            Mage::getModel('catalog/category')
                ->addData(array(
                    'id' => 'empty',
                    'name' => 'No Categories'
            ))
        ); // assigning orphan values
    }

    foreach ($categoryCollection as $category) {
        if (array_key_exists($category->getId(), $categoryProducts)) {
            $category->setProducts($categoryProducts[$category->getId()]);
        }
    }

    return $categoryCollection;
} 
```

然后，在您的 grouped.phtml 模板中，执行以下操作：

```
<?php $categories = Mage::helper('helper_module/category')->formatProductsWithCategories($_associatedProducts); ?>
<?php foreach ($categories as $category):?>
    <tr><td><?php echo $category->getName();?></td></tr>
    <?php foreach ($category->getProducts() as $_item): ?>
         // . . .  Existing loop here . . .
    <?php endforeach; ?>
<?php endforeach; ?> 
```

# visual-studio-2012 - Blend for Visual Studio 2012 - 无设计视图

> ID：13084445
> 
> 赞同：13
> 
> 时间：2012-10-26T09:39:48.413
> 
> 标签：visual-studio-2012, blend, blend-2012

我有一个普通的 WPF MVVM-Light 应用程序，我尝试在 Blend 中打开它（我第一次在我的 Windows 8 机器上使用 Blend for Visual Studio 2012）。

但是，我无法打开设计视图，这使 Blend 几乎毫无用处。

我读到的一个问题是，当您的应用程序的输出类型设置为控制台时会发生这种情况，而我的情况并非如此。还有人看到这个吗？

![在此处输入图像描述](../Images/22f7603cd57221e6095d474f8039ea71.png)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-31T10:08:47.603

显然，VS2012 中包含的 Blend 仅支持 Windows 8 应用程序。

但是，已经发布了 Blend + Sketchflow 的预览版，允许其他平台：

[http://www.microsoft.com/en-us/download/details.aspx?id=30702](http://www.microsoft.com/en-us/download/details.aspx?id=30702)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-10T18:49:27.587

当 Blend 不支持项目配置目标的 .NET 框架版本时，这似乎是默认的 Blend 行为。您可以通过在 VS 中打开项目、打开项目属性（Alt-Enter）并将目标框架更改为支持的版本来解决此问题。例如，在我撰写本文时，Blend 不支持 .NET 4.5.2。您必须将其转换为 4.5.1（参见[http://connect.microsoft.com/VisualStudio/feedbackdetail/view/934732/blend-for-visual-studio-2013-does-not-render-the-design-view-与-net-framework-4-5-2](http://connect.microsoft.com/VisualStudio/feedbackdetail/view/934732/blend-for-visual-studio-2013-does-not-render-the-design-view-with-net-framework-4-5-2) )

# python - 如何在特定时间之前重试 Celery 任务？

> ID：13084448
> 
> 赞同：1
> 
> 时间：2012-10-26T09:39:53.323
> 
> 标签：python, django, celery, amqp

我阅读了[有关 Celery 任务的文档，](https://celery.readthedocs.org/en/latest/userguide/calling.html)但不明白我是如何做我需要的。

我想开始一项任务，每 1 秒运行一次并重试一次。3 秒后它应该停止重试并返回一个默认值。

这是一个无法按预期工作的 POC 代码：

```
@task(expires=3, default_retry_delay=1, max_retries=10)
def ttt(args):
    try:
        return slow_work_result(args)
    except SlowWorkFailed:
        pass

    try:
        return ttt.retry(countdown=1)
    except MaxRetriesExceededError:
        return False

ttt.apply_async(args=(1,)).get() 
```

该任务应在 3 秒内到期，但`MaxRetriesExceededError`应在 10 秒内提升。但是当我运行它时，它会因为`MaxRetriesExceededError`.

我究竟做错了什么？

这个 try-except 构造可以更优雅吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T13:31:13.160

我写了一个任务装饰来重试任务，也许可以解决你的问题。

[https://gist.github.com/3958777](https://gist.github.com/3958777)

# system.reactive - 反应式扩展操作员触发的次数比我预期的要多

> ID：13084449
> 
> 赞同：0
> 
> 时间：2012-10-26T09:39:57.037
> 
> 标签：system.reactive

谁能告诉我是什么导致以下代码中出现这种看似奇怪的 Do 行为？我希望每个 OnNext 调用一次 Do 处理程序。

```
using System;
using System.Reactive.Linq;
using System.Reactive.Subjects;
using NUnit.Framework;

[TestFixture]
public class WhyDoesDoActSoWierd
{
    [Test]
    public void ButWhy()
    {
        var doCount = 0;
        var observable = new Subject<int>();
        var stream = observable.Do( x => doCount++ );
        var subs =
            (from x in stream
             where x % 2 == 1
             from y in stream
             where y % 2 == 0
                   && y == x + 1
             select new { x, y })
                .Subscribe( x => Console.WriteLine( "{0}, {1}", x.x, x.y ) );

        observable.OnNext( 1 );
        // doCount == 1
        observable.OnNext( 2 );
        // doCount == 3
        observable.OnNext( 3 );
        // doCount == 5
        observable.OnNext( 4 );
        // doCount == 8
        observable.OnNext( 5 );
        // doCount == 11
        observable.OnNext( 6 );
        // doCount == 15
        Assert.AreEqual( 6, doCount );
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T10:50:28.987

这里的行为是完全正常的。原因是您不仅有一个订阅，还有很多订阅。并且由于查询中两个可观察对象之间的笛卡尔积，您拥有的数量`Do`比您预期的要多。

让我们看一下您的替代（但类似）查询。

```
 var doCountX = 0;
    var doCountY = 0;

    Action dump = () =>
        Console.WriteLine("doCountX = {0}, doCountY = {1}", doCountX, doCountY);

    var observable = new Subject<int>();

    var streamX = observable.Do(x => doCountX++);
    var streamY = observable.Do(x => doCountY++);

    var query =
        from x in streamX
        from y in streamY
        select new { x, y };

    query.Subscribe(z => Console.WriteLine("{0}, {1}", z.x, z.y));

    dump();
    for (var i = 1; i <= 6; i++)
    {
        observable.OnNext(i);
        dump();
    } 
```

输出是：

```
doCountX = 0, doCountY = 0
doCountX = 1, doCountY = 0
1, 2
doCountX = 2, doCountY = 1
1, 3
2, 3
doCountX = 3, doCountY = 3
1, 4
2, 4
3, 4
doCountX = 4, doCountY = 6
1, 5
2, 5
3, 5
4, 5
doCountX = 5, doCountY = 10
1, 6
2, 6
3, 6
4, 6
5, 6
doCountX = 6, doCountY = 15 
```

`doCountX = 0, doCountY = 0`由于此调用发生`dump()`在对`OnNext`.

但是当我们第一次调用时，`OnNext`我们没有得到查询产生的值，因为第二个`streamY`observable 还没有被订阅。

只有当`OnNext`第二次被调用时，我们才会从查询中得到一个值，该值恰好是第一个`OnNext`值与第二个值配对。现在这也创建了一个新的订阅`streamY`，等待下一个值。

所以我们现在已经从`streamX`等待序列中的下一个值中得到了前两个值。所以当`OnNext(3)`被调用时，我们得到两个结果。

每次发生这种情况时，您都可以看到`Do`呼叫数量`doCountY`不断增加。

事实上，给定这个非常简单`SelectMany`的查询，公式是：

```
doCountY = n * (n - 1) / 2 
```

因此，通过`OnNext`您产生的 6 个值`doCountY`等于`6 * 5 / 2`或`15`。

运行 10 个值给出`10 * 9 / 2`或`45`值。

因此`SelectMany`，事实上 a 的订阅量比您想象的要多得多。这通常是为什么您通常只使用它来将每个只产生一个值的可观察对象链接在一起，以防止订阅呈指数增长。

现在有意义吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T12:22:45.577

作为 Enigmativity 充实的答案的旁白，这里发生了两件事：

1.  像 Enumerables 这样的 Observable 是懒惰地组成的。就像您不希望在遍历枚举器之前评估可枚举查询中的任何组合器一样，您应该期望消费者将看到为该管道评估的所有组合器，其次数与订阅管道的观察者数量一样多. 简而言之，`x <- stream, y <- stream`已经成功了两次。

2.  理解改写为：

    ```
     stream1.Where(x => x % 2 == 1)
               .SelectMany(x => stream2
                                .Where(y => y % 2 == 0 && y == x + 1)
                                .Select(y => new { x, y })
                                ); 
    ```

    对于收到的每个 x 值，您将订阅流中与谓词匹配的所有值 - 这变得很多。查询理解通常被取消糖化为`SelectMany`// `Join`-`GroupBy`您实际上最终会使用的大部分 Rx 可能会更好地用其他运算符表示 - 例如`Merge`or`Zip`甚至`Join`.

有一个问题与您刚刚提出的问题非常相似： **[Reactive Extensions 是否评估了太多次？](https://stackoverflow.com/questions/12319204/is-reactive-extensions-evaluating-too-many-times)**

关于为什么这是 Rx 中的预期行为，有一些讨论。

# android - android中的按钮和背景大小/分辨率

> ID：13084452
> 
> 赞同：2
> 
> 时间：2012-10-26T09:40:06.107
> 
> 标签：android, android-resolution

我浏览了Developer文档，对LDPI，HDPI，MDPI，XHDPI的类比了解了一些，在网上到处搜索，但没有找到具体的答案。

我有两部手机，一部是小屏幕，一部是平板电脑。我希望我的小屏幕手机上的按钮看起来很小，而大屏幕上的相同按钮看起来更大，占用更多空间。我如何实现这一目标？有教程吗？

（我将drawables放在特定的drawable文件夹中，并且在我的小屏幕上显示了巨大的按钮）困惑！

我还创建了指定DPI的不同布局，我不明白的是，如果我的小屏幕和大屏幕的DPI相同，则布局会在更大或相反的情况下失真！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T09:56:28.723

显然，总体而言，您需要学习很多资源，但特别是对于您可能希望使用形状可绘制对象（用于简单背景）或 9 个补丁来研究更复杂的按钮，因为这些解决方案比标准 PNG 背景更有效地伸展.

[http://developer.android.com/guide/topics/resources/drawable-resource.html#Shape](http://developer.android.com/guide/topics/resources/drawable-resource.html#Shape)

[http://developer.android.com/tools/help/draw9patch.html](http://developer.android.com/tools/help/draw9patch.html)

google 周围你会发现很好的资源，甚至还有一些工具可以自动创建这些资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T09:57:58.343

为什么不选择九个补丁图像？这是[Android 资产工作室](http://android-ui-utils.googlecode.com/hg/asset-studio/dist/index.html)。

它可以帮助您立即创建九个补丁图像。这是关于[九个补丁的一些有用信息。](http://developer.android.com/tools/help/draw9patch.html) 只是通过它....希望它有帮助...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T09:45:14.603

阅读此[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)并检查大小限定符部分

例如，来自同一个链接

```
res/layout/main_activity.xml           # For handsets (smaller than 600dp available width)
res/layout-sw600dp/main_activity.xml   # For 7” tablets (600dp wide and bigger)
res/layout-sw720dp/main_activity.xml   # For 10” tablets (720dp wide and bigger) 
```

# asp.net - 可折叠面板扩展器中的登录表单

> ID：13084461
> 
> 赞同：3
> 
> 时间：2012-10-26T09:40:32.253
> 
> 标签：asp.net, ajax, login-control, collapsiblepanelextender

我想在可折叠面板扩展器上显示登录表单以登录用户。请帮助我解决这个 Ajax 问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T10:03:02.680

我得到了答案，但是。它仅适用于 IE。它不适用于 Firefox。您的评论很荣幸。

//添加第一个脚本管理器

然后.....

```
 <div class="secpanel">
           <table id="login">
                <tr>
                <td colspan="2"></td>
            </tr>
               <tr>
                   <td colspan="2">
                       &nbsp;</td>
               </tr>
            <tr>
                <td>User name:</td>
                <td>
                    <asp:TextBox ID="usrtxt" runat="server"></asp:TextBox>
                </td>
            </tr>
            <tr>
                <td></td>
                <td></td>
            </tr>
               <tr>
                   <td>
                       &nbsp;</td>
                   <td>
                       &nbsp;</td>
               </tr>
            <tr>
                <td>Password:</td>
                <td>
                    <asp:TextBox ID="passtxt" TextMode="Password" runat="server"></asp:TextBox>
                </td>
            </tr>
            <tr>
                <td></td>
                <td></td>
            </tr>
               <tr>
                   <td>
                       &nbsp;</td>
                   <td>
                       &nbsp;</td>
               </tr>
            <tr>
                <td></td>
                <td>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    <asp:Button ID="loginbtn" runat="server" Text="Login" ValidationGroup="g1" 
                        onclick="loginbtn_Click"/></td>
            </tr>
               <tr>
                   <td colspan="2">
                       &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                       <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" 
                           ErrorMessage="Please enter user name" ControlToValidate="usrtxt" 
                           ForeColor="Red" ValidationGroup="g1"></asp:RequiredFieldValidator>
                   </td>
               </tr>
               <tr>
                   <td colspan="2">
                       &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                       <asp:RequiredFieldValidator ID="RequiredFieldValidator2" runat="server" 
                           ErrorMessage="Please enter password" ControlToValidate="passtxt" 
                           ForeColor="Red" ValidationGroup="g1"></asp:RequiredFieldValidator>
                   </td>
               </tr>
               <tr>
                   <td colspan="2">
                       &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                       <asp:Label ID="err" runat="server" Text=""></asp:Label>
                       &nbsp;</td>
               </tr>
               <tr>
                    <td colspan="2">
                        &nbsp;</td>
               </tr>

           </table>
          </div>
        </asp:Panel>

             <asp:CollapsiblePanelExtender ID="CollapsiblePanelExtender1" TargetControlID="secpanel" CollapseControlID="fstpanel" ExpandDirection="Vertical" TextLabelID="lbl" CollapsedText="Click to login" ExpandedText="Hide" CollapsedSize="0" ExpandedSize="200" ExpandControlID="fstpanel" Collapsed="true" ScrollContents="false" runat="server">
             </asp:CollapsiblePanelExtender> 
```

//提交按钮的代码

```
 SqlConnection con = new SqlConnection();
        con.ConnectionString = ConfigurationManager.ConnectionStrings["hw"].ConnectionString.ToString();
            con.Open();
            SqlCommand cmd = new SqlCommand("select * from Login where Admin_name=@", con);
            //cmd.Parameters.Add("@user", usrtxt.Text);
            //cmd.Parameters.AddWithValue("@user", usrtxt.Text);
            SqlDataReader dr = cmd.ExecuteReader();
            while (dr.Read())
            {
                if((usrtxt.Text==dr.GetString(1)) && (passtxt.Text==dr.GetString(2)))
                {
                    Session["admin"]=dr.GetString(1);
                    Response.Redirect("Admin.aspx");
                }
                else
                {
                    err.Text="You are not autorized";
                }
                cmd.Dispose();
            }
            con.Close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T09:57:06.990

可能是浏览器的问题。尝试使用其他浏览器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-17T11:40:09.353

我认为您的代码不完整。如果你想实现可折叠面板......你必须使用两个面板，一个用于标题，另一个用于内容。最后在 Collapsible Panel Extender 中设置如下选项。

```
 <Ajax:CollapsiblePanelExtender ID="CollapsiblePanelext1" runat="server"   CollapseControlID="pnl1Head" Collapsed="true" ExpandControlID="pnl1Head" TextLabelID="lblMessage" CollapsedText="Show" ExpandedText="Hide" ImageControlID="imgArrows" ExpandDirection="Vertical" TargetControlID="pnl2Content" ScrollContents="True" ExpandedImage="../images/collapse_blue.jpg" CollapsedImage="../images/expand_blue.jpg"> </Ajax:CollapsiblePanelExtender> 
```

# javascript - 代码如何在不点击按钮的情况下立即执行？

> ID：13084467
> 
> 赞同：0
> 
> 时间：2012-10-26T09:40:50.800
> 
> 标签：javascript

我做了一个非常简单的 Ajax 测试代码片段：

```
<!DOCTYPE html>
<html>
    <head>
        <script src='main.js'></script>
    </head>
    <body>
        <button id='get-content'>Click</button>
        <p></p>
    </body>
</html> 
```

main.js

```
(function(){
    window.addEventListener('load', function(){
        var xml_request = new XMLHttpRequest();
        xml_request.open('GET', '/test.txt', true);
        xml_request.addEventListener('readystatechange', change_content);
        var button_element = document.getElementById('get-content'); 
        button_element.addEventListener('click', fireup(xml_request));
        function fireup(xml_request) {
            xml_request.send();
        }
        function change_content(){
            if (xml_request.readyState == 4 && xml_request.status == 200) {
                document.getElementsByTagName('p')[0].textContent = xml_request.responseText;
            };  
        };
    });
})(); 
```

它可以工作，但除了 ajax 请求发送和更改 p 标签，我没有按下按钮，知道吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T09:45:16.637

```
button_element.addEventListener('click', fireup(xml_request)); 
```

在这一行中，您*调用* `fireup(xml_request)`，并将它返回的任何内容（无）分配为`click`事件的侦听器。你可能想要这样的东西：

```
button_element.addEventListener('click', fireup);
function fireup() { ... 
```

由于`xml_request`在`fireup`函数的范围内，因此您无需将其作为参数传递。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T09:46:16.720

发生这种情况是因为您在添加侦听器时调用它：`fireup(xml_request)`。它应该是这样的：`button_element.addEventListener('click', fireup); function fireup () {...`

你也可以使用匿名函数`button_element.addEventListener('click', function () {...})`

# web-services - 如何控制 SugarCRM bean id

> ID：13084468
> 
> 赞同：0
> 
> 时间：2012-10-26T09:40:50.927
> 
> 标签：web-services, sugarcrm

SugarCRM 默认具有内置 GUID，其格式为 **aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeeeee** ，字段名称为“id”，也称为 Sugar Bean ID。

我正在使用 SOAP Web 服务 4.1 版

当我在 id 字段中提供一些值时，不会创建任何条目。我必须不向 id 字段提供任何内容，然后只使用默认 bean id 格式**aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee**创建条目。

如何将自己的自定义 id 作为 Bean id？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T13:08:39.793

尝试在调用中将其添加到“name_value_list”数组中...

```
array('name' => 'new_with_id', 'value' => '1'), 
```

# ruby-on-rails - Rails 不会触发我的 after_commit 回调

> ID：13084482
> 
> 赞同：10
> 
> 时间：2012-10-26T09:41:31.940
> 
> 标签：ruby-on-rails, activerecord

你好我有一个特殊的问题。我使用 after_commit 回调来发送通知，但似乎根本没有触发回调。简化后的情况如下：

```
class Message < ActiveRecord::Base
  after_commit :do_something

  def do_something
    raise 'Doing something'
  end
end 
```

然后我希望在打开控制台并创建消息时看到提升。但什么也没有发生。此外，如果我完全删除 'do_something' 方法，rails 甚至不会抱怨。请注意，这不是使用事务性固定装置进行的测试。我什至看到数据库中提交的记录。我的 Rails 版本是 3.0.9。感谢您的帮助，特别是如果它很好的话:-)

编辑：我后来了解到，当我将代码部署到另一台机器时，回调 DID 被触发。所以这一定与我的设置有关。不过，我仍然希望您能深入了解造成这种情况的原因。

编辑2：来自评论。

*   数据库是 MySQL，因此存在事务。
*   指定回调的操作没有帮助（:on => :create）。
*   我需要 after_commit 而没有其他回调

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-09-03T12:52:29.230

大卫在问题评论中提到了对这种行为的解释。

[事务回调文档](http://guides.rubyonrails.org/active_record_callbacks.html#transaction-callbacks)

> “如果在其中一个回调中引发任何异常，它们将被忽略，这样它们就不会干扰其他回调。因此，如果你的回调代码可能引发异常，你需要拯救它并处理它适当地在回调中。”

也可以看看：

*   [Rails Github 问题 3205](https://github.com/rails/rails/issues/3205)
*   [拉取请求 #11123](https://github.com/rails/rails/pull/11123)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-11-20T13:35:18.533

一种可能的原因（至少在 5.0 上）是：

```
after_commit :do_something, on: :create
after_commit :do_something, on: :destroy 
```

这里`do_something`被引用了两次，没有一个会被执行。一旦它结合到

```
after_commit :do_something, on: [:create, :destroy] 
```

它会再次被调用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-15T06:44:55.740

您可能需要在您的规范/支持中添加一个补丁，以在使用事务性固定装置时启用 after_commit 回调。如果您使用的是事务装置，那么实际上不会发生提交。

补丁：[https ://gist.github.com/charleseff/1305285](https://gist.github.com/charleseff/1305285)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T10:49:04.150

您应该指定必须触发此 after_commit 时的操作....

after_commit 基本上用在那些存在事务概念的数据库中......所以试试下面的代码......

```
class Message < ActiveRecord::Base
 after_commit :do_something, :on => [:create, :update, :destroy]

 def do_something
  raise 'Doing something'
 end
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-26T11:48:58.243

试试下面的代码是否有帮助 -

```
class Message < ActiveRecord::Base
 after_commit :do_something, :only => [:create, :update, :destroy]

 def do_something
  raise 'Doing something'
 end
end 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-10-26T10:10:51.207

您有以下内容：

```
class Message < ActiveRecord::Base
  after_commit :do_something

  def do_something
    puts 'Doing something'
  end
end 
```

您可以尝试`after_create`或`after_save`根据您的需要。

after_commits 只是在记录成功保存到数据库时执行，因为保存，保存！并销毁在事务中运行。

如文档中所述：[Active Record 回调](http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html)

# php - 适用于许多网站和相关初学者的 Twitter API 1.1、OAuth 和 PHP（用于内容管理系统）

> ID：13084483
> 
> 赞同：3
> 
> 时间：2012-10-26T09:41:35.790
> 
> 标签：php, oauth, twitter, twitter-oauth

目前，我们查询 Twitter 用户的时间线，`file_get_contents`以获取我们一次缓存一分钟的 JSON 提要，而且生活还不错。然而，在我们数百个网站中的一些开始出现问题（当 Twitter 开始帮助删除旧的 XML url 时），我注意到他们明年将更改为 API 1.1，我们需要对请求进行身份验证。

所以，我基本上是在寻找一个正确方向的简单指针。到目前为止，我假设以下内容：

1.  新的 GET 资源看起来很相似，奖金！
2.  由于我们只显示该用户的推文，因此我们只需要一个 dev.twitter.com 令牌
3.  似乎我们需要为我们所做的每个网站*在该用户的帐户上创建一个新令牌。*
4.  我们可能必须安装一个类似于 twitteroauth 的库，如[https://dev.twitter.com/docs/auth/oauth/single-user-with-examples#php](https://dev.twitter.com/docs/auth/oauth/single-user-with-examples#php)

正如我所说，我们只是显示拥有我们正在构建的网站的用户的推文。人们不登录或发布或类似的东西。

我知道有嵌入的时间线，但这些时间线几乎无法定制，出于同样的原因，我已经讨厌 Facebook 的“Like Box”。（但我也知道[Twitter 的“显示要求”](https://dev.twitter.com/terms/display-requirements)除了可能的颜色之外几乎没有提供任何灵活性......

那么，考虑到这一点，这是最简单的方法吗？这似乎相对简单（我的意思是 twitteroauth 在设置后会在 7 行或更少的时间内完成获取请求），最大的痛苦听起来像是必须通过获取访问密钥来与每个用户交谈。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T18:21:29.237

[Twitteroauth](https://github.com/abraham/twitteroauth)肯定会让你在这方面领先一步。请记住，尽管在 twitter 文档中，您只能在 15 分钟内完成 180 个时间线请求，如果您超过该时间，我认为他们会限制您大约一个小时（可能会更少）。如果您希望能够向您展示每条推文而不是您获得的最后一个 ID，您还应该阅读有关[时间线的内容。](https://dev.twitter.com/docs/working-with-timelines)当然，如果您实时执行所有这些操作，那么您的网站会在向 Twitter 发出请求时变慢。

我不会使用`file_get_contents`，主要是因为它比 curl 稍慢，而 twitteroauth 提供了更好的 IMO 界面，为您减少了编码，并且可以在 git 中分叉。

所以，是的，缓存你的结果，并留意你在 1.1 分配的 15 分钟内发出了多少请求。如果你过去，你会后悔一个小时，这适用于每个使用你的密钥的应用程序。

希望有帮助

# java - jython - 有没有办法避免使用“super__”方法？

> ID：13084487
> 
> 赞同：1
> 
> 时间：2012-10-26T09:41:39.503
> 
> 标签：java, jython, superclass

注意，这确实是 Jython 爱好者的问题，但似乎突出了语言的设计困难

如果我这样做

```
class XTreeModel( DefaultTreeModel ):  
  def fireTreeNodesInserted( self, source, path, child_indices, children ):
    print "fire nodes inserted"
    super( XTreeModel, self ).fireTreeNodesInserted( source, path, child_indices, children ) 
```

我得到无限递归。当我第一次遇到这个时，我非常困惑。我还是不明白为什么代码不能调用Java超类（基类）的方法，而是再次调用自己（！）。为了防止这种情况我去

```
class XTreeModel( DefaultTreeModel ):  
  def fireTreeNodesInserted( self, source, path, child_indices, children ):
    print "fire nodes inserted"
    self.super__fireTreeNodesInserted( source, path, child_indices, children ) 
```

...而且我从开始使用 Jython 开始了解到，这些调用 Java 基类的“super__XXX”方法实际上是由 Jython 解释器自发创建的，并且只有当您覆盖 Jython 类中的 Java 方法时，该类的子类Java 类（如上）。就目前而言，这没问题……但是如果您不知道您的超类（基类）是否是 Java 类怎么办？我最终开发了以下实用方法：

```
def get_super_method( caller, code_class ):
  stack_1 = inspect.stack()[ 1 ]
  func_name = stack_1[ 3 ]
  # unfortunately this will return code_class.func_name as standard if code_class is a derived from a Java class with method func_name
  supposed_baseclass_method = getattr( super( code_class, caller ), func_name )
  for baseclass in caller.__class__.__base__.__mro__:
    if "org.python.proxies" in str( baseclass ):
      # ... this means we have reached down as low as a Java "proxy" class without yet encountering a class with a method 'func_name',
      # which means that we must return the super__XXX version
      break
    # confusingly, even if you go caller.__class__.__base__.__mro__ this still shows all the classes for caller, including its highest class! 
    if baseclass == code_class:
      continue
    if func_name in baseclass.__dict__:
      # ... a method with the right name exists in a baseclass...
      return supposed_baseclass_method 
  java_baseclass_method = getattr( caller, "super__%s" % func_name )
  return java_baseclass_method 
```

你打电话去，例如：

```
class XTreeModel( DefaultTreeModel ):  
  def fireTreeNodesInserted( self, source, path, child_indices, children ):
    print "X fire nodes inserted"
    get_super_method( self, XTreeModel )(source, path, child_indices, children )

class XXTreeModel( XTreeModel ):  
  def fireTreeNodesInserted( self, source, path, child_indices, children ):
    print "XX fire nodes inserted"
    get_super_method( self, XXTreeModel )(source, path, child_indices, children ) 
```

这里 XXTreeModel 中的 get_super_method 返回 super( XXTreeModel, self )... 而 XTreeModel 中的 get_super_method 返回 self.super__fireTreeNodesInserted 所以... 也许您可以只查看传递给 get_super_method 的 code_class ，如果它在它的直接基类的名称意味着您返回 super__XXX 版本，对吗？呃，不，它有点复杂：

```
class XTreeModel( DefaultTreeModel ):  
  def do_some_stuff( self ):
    print "do stuff"

class XXTreeModel( XTreeModel ):  
  def fireTreeNodesInserted( self, source, path, child_indices, children ):
    print "XX fire nodes inserted"
    get_super_method( self, XXTreeModel )(source, path, child_indices, children ) 
```

在这个例子中，XXTreeModel 有一个 Jython 类作为它的基类，但是这个基类 (XTreeModel) 没有覆盖感兴趣的方法......所以实际上 XXTreeModel 中的 get_super_method() 需要返回 super__ fireTreeNodesInserted... ... 所以这个实用方法似乎解决了这个问题：你不需要知道你的基类是什么类型的类，它是否覆盖了Java方法等等。无论如何，我想知道这个曲折的过程是否必要，但是谷歌搜索“jython super”等产生了 10 年前的错误条目，说“不推荐使用 super__ 方法”。

有没有更好的方法来完成对超类方法的调用，其中您的第一个基类（当您向下移动类时）使用所寻求的方法实际上是一个 Java 类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T16:32:17.860

所以我很确定你也可以使用不理想的形式`BaseClass.method(self, *args, **kwargs)`来获得你正在寻找的行为。那是对基类方法的“老派”（2.2 之前）访问。

# java - JAXB - 编组泛型类型（日期）

> ID：13084489
> 
> 赞同：3
> 
> 时间：2012-10-26T09:41:52.597
> 
> 标签：java, generics, jaxb

我无法使用 JAXB 编组/解组泛型类型。一切正常，但是当我的通用字段是日期（java.util.Date）时，解组将产生 XMLGregorianCalendar

这是我正在谈论的一段代码：

```
import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement
public class Entity<T> {
    private T field;

    public Entity() {
    }

    public T getField() {
        return field;
    }

    public void setField(T field) {
        this.field = field;
    }
} 
```

```
import java.io.*;
import java.util.Date;
import javax.xml.bind.*;

public class JaxbTest {
    public JaxbTest() {

        Entity<Date> ent = new Entity<Date>();
        ent.setField(new Date());

        StringWriter sw = new StringWriter();

        try {
            // marshall
            JAXBContext jaxbContext = JAXBContext.newInstance(Entity.class);
            Marshaller jaxbMarshaller = jaxbContext.createMarshaller();
            jaxbMarshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
            jaxbMarshaller.marshal(ent, sw);

            // unmarshall
            JAXBContext jc = JAXBContext.newInstance(Entity.class);
            Unmarshaller u = jc.createUnmarshaller();
            Entity<Date> ent2 = (Entity<Date>) u.unmarshal(new StringReader(sw
                    .toString()));// exception is thrown here
            System.out.println(ent2.getField());
        } catch (JAXBException e11) {
            e11.printStackTrace();
        }
    }

    public static void main(String[] args) {
        new JaxbTest();
    }

} 
```

上面的代码抛出异常：

```
java.lang.ClassCastException: com.sun.org.apache.xerces.internal.jaxp.datatype.XMLGregorianCalendarImpl cannot be cast to java.util.Date
    at JaxbTest.<init>(JaxbTest.java:31)
    at JaxbTest.main(JaxbTest.java:38) 
```

你能帮我解决一下吗？我正在考虑一些只有当字段是日期时才会“活动”的适配器，但我认为这是不可能的

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T19:23:42.377

A`JAXBContext`建立在类而不是类型之上。就您的 JAXB (JSR-222) 实现而言，该`field`属性的类型为`Object`. 如果将以下内容添加到代码中：

```
 String xml = sw.toString();
        System.out.println(xml); 
```

您将看到输出 XML 如下。添加了一个`xsi:type`属性以保留文本值包含日期信息。在`unmarshal`操作上，因为 JAXB 认为属性是类型`Object`，它将识别`xsi:type`属性并将值转换为默认日期类型，即`XMLGregorianCalendar`.

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<entity>
    <field xsi:type="xs:dateTime" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">2012-10-29T15:20:17.763-04:00</field>
</entity> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-25T13:31:56.200

我对抽象类中的通用字段有类似的问题。我通过添加一个带注释的 getter/setter 来解决它，该 getter/setter 将值解析为字符串。然后在我的子类中覆盖 getter/setter。

这是我的解决方案：

```
@XmlSeeAlso({DateEntity.class})
@XmlType
public abstract class Entity<T> {
    private T field;

    public Entity() {}

    public T getField() {
        return this.field;
    }

    public void setField(T field) {
        this.field = field;
    }

    @XmlAttribute(name="value", required = true)
    public abstract String getSerializeField();
    public abstract void setSerializeField(String value);
} 
```

我的日期子类：

```
@XmlAccessorType(XmlAccessType.NONE)
@XmlRootElement(name="dateEntity")
public class DateEntity extends Entity<Date> {

    public DateEntity() {}

    @Override
    public String getSerializeField(){
        DateFormat formatter = DateFormat.getInstance();
        return formatter.format(field);
    }

    @Override
    public void setSerializeField(String value) {
        DateFormat formatter = DateFormat.getInstance();
        this.value = formatter.parse(value);
    }
} 
```

希望这会有所帮助...

# c# - 不会“窃取”焦点的自定义协议处理程序

> ID：13084493
> 
> 赞同：-1
> 
> 时间：2012-10-26T09:41:57.590
> 
> 标签：c#, .net, windows-runtime, custom-protocol

有一个 WinRT 应用程序可以访问一些系统信息。网上有一些资源告诉我们可以使用自定义协议（WinRT 应用程序启动该协议，然后启动桌面应用程序并做一些工作）。自定义协议处理程序是 c# 桌面应用程序（“输出类型”设置为“Windows Applicatoin”的控制台应用程序，因为我们不需要任何接口）。

所以，问题是：当 WinRT 应用程序启动自定义协议时，桌面应用程序启动并且所有东西都正常工作，但是在桌面启动主要 WinRT 应用程序的那一刻，桌面应用程序工作所需的时间被隐藏起来。

是否有一些解决方案，允许以静默模式启动桌面应用程序（不知道如何放置，可能是“背景”），以便 WinRT 一直显示自己。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T08:43:50.637

经过一番搜索，决定引入*通用文件*，这将是商店和桌面应用程序之间的另一个（以及自定义协议）*通信级别。*这种方法允许桌面应用程序留在内存中并在商店应用程序工作期间监听文件更改。

所以工作是：如果商店应用程序需要一些系统信息，它会将命令写入文件和桌面应用程序，在执行完所有需要的工作后，通过自定义协议将信息发送到商店应用程序。

# facebook - 使用 Graph API Explorer 的 Facebook FQL 查询

> ID：13084495
> 
> 赞同：0
> 
> 时间：2012-10-26T09:42:03.750
> 
> 标签：facebook, facebook-fql

开发人员测试工具 Graph Api Explorer，当我进行以下 FQL 查询时：

select uid, about_me from user where uid = me ()

在没有选择用户数据权限和好友的 access_token 的情况下，我认为您应该收到错误 OAuth，需要许可或 user_about_me Friends_about_me about_me 字段来查询用户表，而是收到了正确的答案。

从 Graph API bio 选择字段，甚至从我用来测试的 Android 测试应用程序中，我都有相同的行为。

问题是什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T09:44:54.133

好吧，当您第一次访问并安装[Developers Site](https://developers.facebook.com/)应用程序时，系统会提示您一个权限对话框。那时您已授予访问您所看到的基本信息的权限。

# c# - 从 JSON Api WinRT 反序列化对象

> ID：13084503
> 
> 赞同：3
> 
> 时间：2012-10-26T09:42:29.850
> 
> 标签：c#, json, serialization, windows-8, windows-runtime

我想在 WinRT 中反序列化 JSON，例如我正在尝试 StackExchange Api 2.1。

我有这样的方法：

```
public static async Task<string> GetJsonString()
        {
            HttpClient client = new HttpClient();
            string url = @"https://api.stackexchange.com/2.1/answers?fromdate=1349913600&order=desc&min=20&sort=votes&site=stackoverflow";
            HttpResponseMessage response = await client.GetAsync(url);
            return await response.Content.ReadAsStringAsync();
        }

        public static async void ParseJson()
        {
            string responseText = await GetJsonString();

            DataContractJsonSerializer serializer = new DataContractJsonSerializer(typeof(JsonResponse));
            JsonResponse root;
            using (MemoryStream stream = new MemoryStream(Encoding.Unicode.GetBytes(responseText)))
            {
                root = serializer.ReadObject(stream) as JsonResponse;
            }
        } 
```

和这些类：

```
[DataContract]
class Answer
{
    [DataMember(Name = "question_id")]
    public int QuestionId { get; set; }

    [DataMember(Name = "answer_id")]
    public int AnswerId { get; set; }

    [DataMember(Name = "creation_date")]
    public int CreationDate { get; set; }

    [DataMember(Name = "last_edit_date")]
    public int LastEditDate { get; set; }

    [DataMember(Name = "last_activity_date")]
    public int LastActivityDate { get; set; }

    [DataMember(Name = "score")]
    public int Score { get; set; }

    [DataMember(Name = "community_owned_date")]
    public int CommunityOwnedDate { get; set; }

    [DataMember(Name = "is_accepted")]
    public bool IsAccepted { get; set; }

    [DataMember(Name = "owner")]
    public Owner Owner { get; set; }
}

[DataContract]
class Owner
{
    [DataMember(Name = "user_id")]
    public int UserId { get; set; }

    [DataMember(Name = "display_name")]
    public string DisplayName { get; set; }

    [DataMember(Name = "reputation")]
    public int Reputation { get; set; }

    [DataMember(Name = "user_type")]
    public string UserType { get; set; }

    [DataMember(Name = "profile_image")]
    public string ProfileImage { get; set; }

    [DataMember(Name = "link")]
    public string Link { get; set; }

    [DataMember(Name = "accept_rate")]
    public int? AcceptRate { get; set; }
}

[DataContract]
class JsonResponse
{
    [DataMember(Name = "items")]
    public IList<Answer> Answers { get; set; }

    [DataMember(Name = "quota_remaining")]
    public int QuotaRemaining { get; set; }

    [DataMember(Name = "quota_max")]
    public int QuotaMax { get; set; }

    [DataMember(Name = "has_more")]
    public bool HasMore { get; set; }
} 
```

我做错了什么，在 responseText 我得到这样的字符：`\b\0\0\0\0\0\0�ێ���_E�E�FfwW\r,���...`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T10:07:23.180

您的 url 似乎返回了压缩数据，而 HttpClient 不知何故不理解这一点。下面的代码解决了这个问题：

```
public static async Task<string> GetJsonString()
{
    HttpClient client = new HttpClient();
    string url = @"https://api.stackexchange.com/2.1/answers?fromdate=1349913600&order=desc&min=20&sort=votes&site=stackoverflow";
    HttpResponseMessage response = await client.GetAsync(url);

    byte[] buf = await response.Content.ReadAsByteArrayAsync();
    GZipStream zipStream = new GZipStream(new MemoryStream(buf), CompressionMode.Decompress);
    StreamReader reader = new StreamReader(zipStream);
    return reader.ReadToEnd();
} 
```

# iphone - 当我将音频文件从 iphone 音频库保存到我的应用程序文件夹时，如何减小音频文件的大小？

> ID：13084505
> 
> 赞同：2
> 
> 时间：2012-10-26T09:42:38.510
> 
> 标签：iphone, objective-c, ios, mpmediapickercontroller

我正在制作一个音频应用程序。在其中，我从 iphone 设备音频库中挑选了一首歌曲，然后将其保存到我的应用程序文件夹中。但是当我将它保存到我的文件夹时，歌曲的大小会增加 4-5 倍。这是我的代码 -

```
 - (void)mediaPicker: (MPMediaPickerController *)mediaPicker didPickMediaItems:(MPMediaItemCollection *)mediaItemCollection {
NSLog(@"selected song");
[self dismissModalViewControllerAnimated:YES];
if ([mediaItemCollection count] < 1) {
    return;
}
song = [[mediaItemCollection items] objectAtIndex:0];

NSURL *assetURL = [song valueForProperty:MPMediaItemPropertyAssetURL];
AVURLAsset *songAsset =
[AVURLAsset URLAssetWithURL:assetURL options:nil];

NSError *assetError = nil;
AVAssetReader *assetReader =
[AVAssetReader assetReaderWithAsset:songAsset
                              error:&assetError];
if (assetError) {
    NSLog (@"error: %@", assetError);
    return;
}

AVAssetReaderOutput *assetReaderOutput = [AVAssetReaderAudioMixOutput 
                                          assetReaderAudioMixOutputWithAudioTracks:songAsset.tracks
                                          audioSettings: nil];
if (! [assetReader canAddOutput: assetReaderOutput]) {
    NSLog (@"can't add reader output... die!");
    return;
}
[assetReader addOutput: assetReaderOutput];

NSArray *dirs = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSLog(@"dirs%@",dirs);
NSString *documentsDirectoryPath = [dirs objectAtIndex:0];
NSLog(@"document dir path%@",documentsDirectoryPath);
NSString *exportPath = [documentsDirectoryPath stringByAppendingPathComponent:EXPORT_NAME];
NSLog(@"export path%@",exportPath);
if ([[NSFileManager defaultManager] fileExistsAtPath:exportPath]) {
    [[NSFileManager defaultManager] removeItemAtPath:exportPath error:nil];
}
NSURL *exportURL = [NSURL fileURLWithPath:exportPath];
NSLog(@"EXport URL%@",exportURL);
AVAssetWriter *assetWriter = [AVAssetWriter assetWriterWithURL:exportURL
                                                      fileType:AVFileTypeCoreAudioFormat
                                                         error:&assetError];
if (assetError) {
    NSLog (@"error: %@", assetError);
    return;
}
AudioChannelLayout channelLayout;
memset(&channelLayout, 0, sizeof(AudioChannelLayout));
channelLayout.mChannelLayoutTag = kAudioChannelLayoutTag_Stereo;
NSDictionary *outputSettings = [NSDictionary dictionaryWithObjectsAndKeys:
                                [NSNumber numberWithInt:kAudioFormatLinearPCM], AVFormatIDKey, 
                                [NSNumber numberWithFloat:44100.0], AVSampleRateKey,
                                [NSNumber numberWithInt:2], AVNumberOfChannelsKey,
                                [NSData dataWithBytes:&channelLayout length:sizeof(AudioChannelLayout)], AVChannelLayoutKey,
                                [NSNumber numberWithInt:16], AVLinearPCMBitDepthKey,
                                [NSNumber numberWithBool:NO], AVLinearPCMIsNonInterleaved,
                                [NSNumber numberWithBool:NO],AVLinearPCMIsFloatKey,
                                [NSNumber numberWithBool:NO], AVLinearPCMIsBigEndianKey,
                                nil];
AVAssetWriterInput *assetWriterInput = [AVAssetWriterInput assetWriterInputWithMediaType:AVMediaTypeAudio
                                                                          outputSettings:outputSettings];
if ([assetWriter canAddInput:assetWriterInput]) {
    [assetWriter addInput:assetWriterInput];
} else {
    NSLog (@"can't add asset writer input... die!");
    return;
}

assetWriterInput.expectsMediaDataInRealTime = NO;

[assetWriter startWriting];
[assetReader startReading];

AVAssetTrack *soundTrack = [songAsset.tracks objectAtIndex:0];
CMTime startTime = CMTimeMake (0, soundTrack.naturalTimeScale);
[assetWriter startSessionAtSourceTime: startTime];

__block UInt64 convertedByteCount = 0;

dispatch_queue_t mediaInputQueue = dispatch_queue_create("mediaInputQueue", NULL);
[assetWriterInput requestMediaDataWhenReadyOnQueue:mediaInputQueue 
                                        usingBlock: ^ 
 {
     while (assetWriterInput.readyForMoreMediaData) {
         CMSampleBufferRef nextBuffer = [assetReaderOutput copyNextSampleBuffer];
         if (nextBuffer) {
             [assetWriterInput appendSampleBuffer: nextBuffer];
             convertedByteCount += CMSampleBufferGetTotalSampleSize (nextBuffer);
             NSNumber *convertedByteCountNumber = [NSNumber numberWithLong:convertedByteCount];
         } else {
             [assetWriterInput markAsFinished];
             [assetWriter finishWriting];
             [assetReader cancelReading];
             NSDictionary *outputFileAttributes = [[NSFileManager defaultManager]
                                                   attributesOfItemAtPath:exportPath
                                                   error:nil];
             NSLog (@"done. file size is %ld",
                    [outputFileAttributes fileSize]);
             break;
         }
     }

 }];
NSLog (@"bottom of convertTapped:");
} 
```

请帮助我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T15:56:27.513

您的程序正在获取任意音频文件并将其转换为您指定的格式。在此转换->写入步骤期间，它可能正在“解压缩”源文件的音频数据、增加采样率、增加通道数或许多其他可能的事情。在不知道源音频文件的情况下——这很可能是引入增长的地方。

# delphi - 是否可以从 Delphi Win32 VCL 应用程序使用 EWS 托管 API（以及如何开始）？

> ID：13084508
> 
> 赞同：2
> 
> 时间：2012-10-26T09:42:54.263
> 
> 标签：delphi, delphi-xe2, exchangewebservices

我目前正在研究通过 SOAP 访问 Exchange Web Services (EWS)（参见例如[this previous question](https://stackoverflow.com/questions/13084064/how-to-fix-unresolved-types-when-importing-exchange-web-services-ews-wsdl-file)），但也有推荐的[EWS Managed API](http://msdn.microsoft.com/en-us/library/exchange/dd633709%28v=exchg.80%29.aspx)。

是否可以从 Win32 Delphi-XE2 应用程序中使用该 API？我看到人们使用例如 PHP 的 API 和[PHP-EWS](https://github.com/jamesiarmes/php-ews/)之类的工具，所以它看起来可能来自 C# 以外的其他语言，但是我应该从哪里开始使用 Delphi？

# php - Codeigniter cookie 不会设置

> ID：13084512
> 
> 赞同：0
> 
> 时间：2012-10-26T09:43:21.607
> 
> 标签：php, codeigniter, cookies

出于某种原因，我不能用一个简单的例子来设置 cookie。我在网上找到的每个示例也都失败了。我想知道我是否错过了什么。一直说“ *Cookie 未设置*”

我在设置 cookie 和另一种方法 *get_language()* 后添加了*REFRESH*以通过链接单击读取它，但仍然没有运气。

提前致谢

**看法**

```
 <p>
    <a href="<?php echo site_url('welcome/set_language/english'); ?>">English</a>
    <br />
    <a href="<?php echo site_url('welcome/set_language/spanish'); ?>">Spanish</a>
    </p>

    <br />
    <p><a href="<?php echo site_url('welcome/get_language'); ?>">Get Language</a></p> 
```

**控制器**

```
class Welcome extends CI_Controller
{
    var $cookie_name    = 'language';

    public function __construct()
    {
        parent::__construct();

        $this->load->helper('url');
        $this->load->helper('cookie');
    }

    public function index()
    {
        $this->load->view('welcome_message');
    }

    public function set_language()
    {
        if($this->uri->segment(3) != false)
        {
            $cookie = array(
                            'name'      => $this->cookie_name,
                            'value'     => $this->uri->segment(3),
                            'expire'    => '86500',
                            'domain'    => '.language.com',
                            'secure'    => true
                            );

            set_cookie($cookie);

            redirect(null, 'refresh');
        }
    }

    public function get_language()
    {
        if (! get_cookie($this->cookie_name))
        {
            echo 'Cookie not set';
        }
        else
        {
            echo get_cookie($this->cookie_name);
        }   
    } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T10:46:42.477

在重新加载页面之前，您将无法查看/使用 cookie。这意味着您需要在 set_cookie($cookie); 之后的某处实现页面刷新。在你得到它的状态之前。

另一件事，你可能想改变

```
'domain'    => 'language.com' 
```

到

```
'domain'    => '.language.com' 
```

确保您的 cookie 可通过[http://www.language.com](http://www.language.com)、[http://language.com](http://language.com)和其他子域访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-23T14:37:39.220

首先做一个简单的检查；

如果域不是 https 并且 cookie_secure 在 config.php 中设置为 TRUE，则不会设置 cookie。更改为 FALSE，它将在 http 和 https 中设置。

# java - JAAS - Java EE 6 中的 Java 编程安全性（没有 @DeclareRoles）

> ID：13084517
> 
> 赞同：9
> 
> 时间：2012-10-26T09:43:36.620
> 
> 标签：java, jax-rs, java-ee-6, jboss7.x, jaas

Java 安全是我过去几周的主要话题，我归档了以下内容：

*   自定义阀门验证器 ( `extends AuthenticatorBase`)
*   jBoss 的自定义登录模块 ( `extends UsernamePasswordLoginModule`)
*   安全端点 (JAX-RS)

我的主要问题是，我的端点仅适用于注释`@DeclareRoles`，如果我不使用它，我将无法通过身份验证。详细方法`AuthenticatorBase.invoke`（来自 org.apache.catalina.authenticator）调用该方法`RealmBase.hasResourcePermission`，并在那里检查角色。

由于我不使用任何预定义的角色，因此检查将失败。

我的问题：有没有办法使用这样的代码：

```
@Path("/secure")
@Stateless
public class SecuredRestEndpoint {  

    @Resource
    SessionContext ctx;

    @GET
    public Response performLogging() {

        // Receive user information
        Principal callerPrincipal = ctx.getCallerPrincipal();
        String userId = callerPrincipal.getName();

        if (ctx.isCallerInRole("ADMIN")) {
            // return 200 if ok
            return Response.status(Status.OK).entity(userId).build();
        }
    ...
    }
} 
```

一些额外的背景：需要使用反向代理进行身份验证，只是用户名被转发（X-FORWARD-USER）。这就是为什么我使用自己的 Authenticator 类和自定义登录模块（我没有任何密码凭据）。但我认为应用服务器本身的标准身份验证方法也会出现问题

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T04:04:54.173

由于您的代码是静态的（意味着您有一组可以保护的静态资源），除了增加访问粒度之外，我不理解您对添加安全角色的要求。我可以在模块化环境中看到此要求，其中代码不是静态的，在这种情况下，您需要支持稍后部署声明的其他安全角色。

也就是说，我必须实现类似的东西，一个安全系统，它支持：

*   添加（声明）/删除角色而不重新部署；
*   将用户与这些角色相关联。

我将描述我所做的高层次抽象，并希望它会给你一些有用的想法。

首先，实现一个`@EJB`类似这样的东西：

```
@Singleton
@LocalBean
public class MySecurityDataManager {

    public void declareRole(String roleName) {
        ...
    }

    public void removeRole(String roleName) {
        ...
    }

    /**
     * Here, I do not know what your incoming user data looks like such as:
     * do they have groups, attributes? In my case I could determine user's groups
     * and then assign them to roles based on those. You may have some sort of
     * other attribute or just plain username to security role association.
     */
    public void associate(Object userAttribute, String roleName) {
        ...
    }

    public void disassociate(Object userAttribute, String roleName) {
        ...
    }

    /**
     * Here basically you inspect whatever persistence method you chose and examine
     * your existing associations to build a set of assigned security roles for a
     * user based on the given attribute(s).
     */
    public Set<String> determineSecurityRoles(Object userAttribute) {
        ...
    }
} 
```

然后你实现一个自定义的`javax.security.auth.spi.LoginModule`. 我建议从头开始实现它，除非你知道容器提供的抽象实现对你有用，它不适合我。另外，如果您不熟悉以下内容，我建议您熟悉以下内容，以更好地了解我要做什么：

*   [http://docs.jboss.org/jbossas/docs/Server_Configuration_Guide/4/html/Defining_Security_Domains-Writing_Custom_Login_Modules.html](http://docs.jboss.org/jbossas/docs/Server_Configuration_Guide/4/html/Defining_Security_Domains-Writing_Custom_Login_Modules.html)
*   [http://docs.oracle.com/javase/7/docs/api/javax/security/auth/spi/LoginModule.html](http://docs.oracle.com/javase/7/docs/api/javax/security/auth/spi/LoginModule.html)
*   [http://docs.oracle.com/javase/7/docs/api/java/security/acl/Group.html](http://docs.oracle.com/javase/7/docs/api/java/security/acl/Group.html)

* * *

```
public class MyLoginModule implements LoginModule {

    private MySecurityDataManager srm;

    @Override
    public void initialize(Subject subject, CallbackHandler callbackHandler,
            Map<String, ?> sharedState, Map<String, ?> options) {
        // make sure to save subject, callbackHandler, etc.
        try {
            InitialContext ctx = new InitialContext();
            this.srm = (MySecurityDataManager) ctx.lookup("java:global/${your specific module names go here}/MySecurityDataManager");
        } catch (NamingException e) {
            // error logic
        }
    }

    @Override
    public boolean login() throws LoginException {
        // authenticate your user, see links above
    }

    @Override
    public boolean commit() throws LoginException {
        // here is where user roles get assigned to the subject
        Object userAttribute = yourLogicMethod();
        Set<String> roles = srm.determineSecurityRoles(userAttribute);
        // implement this, it's easy, just make sure to include proper equals() and hashCode(), or just use the Jboss provided implementation.
        Group rolesGroup = new SimpleGroup("Roles", roles);
        // assuming you saved the subject
        this.subject.getPrincipals().add(rolesGroup);
    }

    @Override
    public boolean abort() throws LoginException {
        // see links above
    }

    @Override
    public boolean logout() throws LoginException {
        // see links above
    }

} 
```

为了允许动态配置（即声明角色、关联用户），构建一个使用相同 @EJB 的 UI`MySecurityDataManager`来 CRUD 登录模块将用于确定安全角色的安全设置。

现在，您可以按照您想要的方式打包这些，只需确保`MyLoginModule`可以查找`MySecurityDataManager`它们并将它们部署到容器中。我在 JBoss 上工作，你提到了 JBoss，所以这也应该对你有用。更健壮的实现将在 LoginModule 的配置中包含查找字符串，然后您可以在运行时从`initialize()`方法中的选项映射中读取该字符串。这是 JBoss 的示例配置：

```
<security-domain name="mydomain" cache-type="default">
    <authentication>
        <login-module flag="required"
                      code="my.package.MyLoginModule"
                      module="deployment.${your deployment specific info goes here}">
            <module-option name="my.package.MySecurityDataManager"
                           value="java:global/${your deployment specific info goes here}/MySecurityDataManager"/>
        </login-module>
    </authentication>
</security-domain> 
```

此时，您可以使用此安全域`mydomain`来管理容器中任何其他部署的安全性。

这里有几个使用场景：

1.  部署一个新的 .war 并将其分配给`mydomain`安全域。.war 在其代码中带有预定义的安全注释。您的安全领域最初没有它们，因此没有用户可以登录。但是在部署之后，由于安全角色有据可查，您打开`mydomain`您编写的配置界面并声明这些角色，然后将用户分配给它们。现在他们可以登录了。
2.  经过几个月的部署，您不再希望用户能够访问特定的战争部分。从您的.war 中删除与该部分相关的安全角色`mydomain`，任何人都将无法使用它。

最好的部分，尤其是关于#2 的部分是没有重新部署。此外，无需编辑 XML 来覆盖使用注释声明的默认安全设置（假设您的界面比这更好）。

干杯! 我很乐意提供更多细节，但就目前而言，这至少应该告诉你是否需要它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T16:05:03.253

如果我说得对，有两个问题。

1.  你不想`@DeclareRoles`出现在你的代码中。如果您不介意使用 web.xml，请查看：[http ://docs.oracle.com/cd/E19159-01/819-3669/bncbg/index.html](http://docs.oracle.com/cd/E19159-01/819-3669/bncbg/index.html)

2.  您想单独使用用户名访问您的休息资源，因为休息资源没有安全威胁，但同时休息资源需要知道谁在调用。

    1.  有不止一种方法可以做到这一点。为了识别用户，您只需要在您的 http 请求中提供用户的 id，`JAAS`安全性是多余的。例如，通过`URI:/user/bob`或通过 URI 参数提供用户 ID，例如：`/user?id=bob`。

    2.  如果安全性是强制性的（如果我没弄错的话，你使用的是 javaee 的标准安全组件），你需要处理角色，因为`java6`'s 的规范中写入了基于角色的身份验证/授权。

# javascript - 从预先输入列表中打开弹出框

> ID：13084521
> 
> 赞同：0
> 
> 时间：2012-10-26T09:43:49.017
> 
> 标签：javascript, jquery, twitter-bootstrap

我有一个[来自 bootstrap 的预输入文本字段](http://twitter.github.com/bootstrap/javascript.html#typeahead)。我想要做的是：当您从 typeahead 列表中单击一个项目时，它们会打开一个弹出窗口，它将被放置在文本字段中。这可能吗？

我已经有一个项目`onclick="alert(000)" rel="popover"`。如果我单击它，警报框将打开，因此它可以做一些事情。但是弹出窗口不起作用。甚至可以从 typeahead 打开一个弹出窗口吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T12:48:48.003

尽管该`updater`选项没有记录在案，但您可以在选择项目时使用它来执行某些操作：[Demo (jsfiddle)](http://jsfiddle.net/Sherbrow/ExKsC/)

```
$('#myTypeahead').typeahead({
    source: source,
    updater: function(item) {
        // Do something here, `item` is the selected item
        return item;
    }
}); 
```

# asp.net-mvc - 防止授权用户编辑不属于他的数据

> ID：13084523
> 
> 赞同：4
> 
> 时间：2012-10-26T09:43:56.880
> 
> 标签：asp.net-mvc, database, asp.net-mvc-4, authorization

我已经阅读了十几个关于 ASP.NET MVC 中的自定义授权过滤器的问题，但没有一个能解决我的想法。

这是设置：

*   ASP.NET MVC 4 项目
*   UserProfiles 存储在 DB (EF5) 中，并通过 WebSecurity.InitializeDatabaseConnection 链接到 SimpleMembershipProvider。所以我总能得到一个基于 User.Identity.Name 的 UserProfile
*   每个用户实体都有一个以一对多关系的 BlogPost 集合。
*   每个 BlogPost 通过 UserProfile 属性“知道”拥有它的用户（感谢 EF！）。

想象一下，John 试图访问[http://mysite.com/BlogPosts/Edit/5](http://mysite.com/BlogPosts/Edit/5)，而第 5 号 BlogPost 是 Mary 的博客文章。John 登录后获得授权，并且通过了内置的授权方案，但他无权编辑 Mary 的 blos 帖子。我希望你能得到这张照片。

我知道 ASP.NET MVC 中的授权，并且我知道我可以构建自己的自定义 IAuthorizationFilter。但是，**我的授权过滤器必须访问数据库**（在我的情况下为 DbContext），以检查正在编辑/删除的实体，即第 5 号 BlogPost 是否由当前登录的用户拥有。换句话说，当前登录的用户只能编辑和删除他的“东西”。每个“东西”都知道拥有它的用户。

在伪代码中是这样的：

```
var currentlyLoggedUser = this.dbContext.UserProfiles.Single(user => user.Username == this.User.Identity.Name); 

if (blogPost.UserProfile != currentlyLoggedUser)
{
// "John you are not allowed to edit someone else's blog post, you bad boy".
} 
```

**所以，我的两个简单问题是：1.从自定义 IAuthorizationFilter**中访问数据库的“最佳实践”方式是什么？我应该以某种方式将我的 IRepository（为我的 DbContext 服务的接口）注入到授权过滤器属性中吗？我应该尝试从我的过滤器的 OnAuthorization 方法中从控制器中找到我的 IRepository 吗？首先可以从过滤器中访问数据库吗？2\. 如果为此任务使用 IAuthorizationFilter 不是执行此操作的“最佳实践”方式，那是什么？

所以总结一下：

**如果每个“东西”都知道拥有它的用户，我如何确保当前登录的用户只能编辑/删除他的“东西”？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T09:49:13.623

还要浏览[BlogEngine.NET](http://blogengine.codeplex.com/)和[DotNetNuke的源代码](http://dnnblog.codeplex.com/)

每个帖子条目都应该有一个 post_author_id 或 post_owner_id。因此，通过计算此 id 和登录用户的 id，您可以有效地显示/隐藏编辑选项。

```
public class HomeController : Controller
{
    public ActionResult Edit(int id)
    {
        var post = _service.GetPost(id);
        var currentUser = this.dbContext.UserProfiles.Single(user => user.Username == this.User.Identity.Name); 
        if(post.OwnerId == currentUser.Id)
        {
            // Let him edit, hes the owner of the post.
            return View(post);        
        }
        else
        {
            // send him back to the post or do something else.
            return RedirectToAction("Post", "Home");
        }
    }
} 
```

# objective-c - 解压缩 url 并从服务器发送和接收数据

> ID：13084527
> 
> 赞同：1
> 
> 时间：2012-10-26T09:44:14.650
> 
> 标签：objective-c

我有一个像@“http://1.18.10.14/something.zip”这样的zip url，现在我想解压缩这个url，必须向服务器发送请求并访问数据，并且应该在本地存储该数据......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T10:01:27.753

查看[SSZipArchive](https://github.com/samsoffes/ssziparchive)。您可以下载数据[`dataWithContentsOfURL:`](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSData_Class/Reference/Reference.html#//apple_ref/occ/clm/NSData/dataWithContentsOfURL%3a)并使用 .zip 文件保存到 zip 文件中[`writeToFile:atomically:`](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSData_Class/Reference/Reference.html#//apple_ref/occ/instm/NSData/writeToFile%3aatomically%3a)。

# php - cookie 不能与 cron 调用 php 脚本一起使用

> ID：13084529
> 
> 赞同：2
> 
> 时间：2012-10-26T09:44:19.803
> 
> 标签：php, zend-framework, cookies, curl, cron

我每分钟都设置了一个 curl cron 调用，当在我的 php db 请求中没有涉及 cookie 变量时，它可以完美运行：

```
$stmt4= $dbh->query("SELECT * FROM schedule_confs WHERE uyi=0  
AND callable=1 AND id_admin=2 "); 
```

如果查询涉及这样的 cookie：

```
 $id_user_conecte = Zend_Registry::get("iduser");   

$stmt4= $dbh->query("SELECT * FROM schedule_confs WHERE uyi=0  
AND callable=1 AND id_admin=".$id_user_conecte." "); 
```

这将不起作用，因为`$id_user_conecte`未检测到变量，因此没有数据库请求，顺便说一下，我正在使用 zend。如果我只是 echo`$id_user_conecte`它可以工作，那么我的 zend 控制器就没有问题。这是正常的，带有 curl 的 cron 没有检测到文档中的 cookie 还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T11:06:54.847

我想你应该在你的 CURL 请求中设置 cookie

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'http://blog.yousoft.ru/');
curl_setopt($ch, CURLOPT_HEADER, true);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_COOKIE,$cookie);
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 30);
curl_setopt($ch, CURLOPT_USERAGENT, 'PHP Bot (http://blog.yousoft.ru)');
$data = curl_exec($ch);
$header=substr($data,0,curl_getinfo($ch,CURLINFO_HEADER_SIZE));
$body=substr($data,curl_getinfo($ch,CURLINFO_HEADER_SIZE));
preg_match_all("/Set-Cookie: (.*?)=(.*?);/i",$header,$res);
$cookie='';
foreach ($res[1] as $key => $value) {
 $cookie.= $value.'='.$res[2][$key].'; ';
};
curl_close($ch); 
```

或者

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'http://blog.yousoft.ru/');
curl_setopt($ch, CURLOPT_HEADER, false);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_COOKIEFILE, "cookie.txt");
curl_setopt($ch, CURLOPT_COOKIEJAR, "cookie.txt");
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 30);
curl_setopt($ch, CURLOPT_USERAGENT, 'PHP Bot (http://blog.yousoft.ru)');
$data = curl_exec($ch);
curl_close($ch); 
```

参考（俄语）：[http ://blog.yousoft.ru/2010/03/31/ispolzuem-curl-php-chast-4-rabotaem-s-cookies-2-sposoba/](http://blog.yousoft.ru/2010/03/31/ispolzuem-curl-php-chast-4-rabotaem-s-cookies-2-sposoba/)

# php - php自定义mvc框架| 将视图文件加载为字符串

> ID：13084530
> 
> 赞同：0
> 
> 时间：2012-10-26T09:44:22.563
> 
> 标签：php, codeigniter, file-get-contents

我想在其 loadview 函数中实现 CodeIgniter 的功能 - 在加载视图时，我们传递第三个参数“true”，以便将页面视为字符串。

`file_get_contents()`在编写自定义 mvc 框架时使用正确的选项？

我有一个功能来加载视图 -

```
function loadView($directoryPath, $page, $data = array()) {

        extract($data);
        // construct path for loading the view
        $viewURL = $GLOBALS['config']['dir-views'];
        $path = $viewURL . DS . $directoryPath . DS . $page;

        // actual loading of a view.  
        include $path;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T09:48:52.460

这取决于你的目标。如果要获取原始视图数据，请使用`file_get_contents()`. 如果视图包含任何需要执行的 php 代码，请使用[ob_start](http://php.net/manual/en/function.ob-start.php)和[include](http://www.php.net/manual/en/function.include.php)。

Ob_start 示例：

```
function loadView($directoryPath, $page, $data = array()) {

    extract($data);
    // construct path for loading the view
    $viewURL = $GLOBALS['config']['dir-views'];
    $path = $viewURL . DS . $directoryPath . DS . $page;

    // actual loading of a view.  
    ob_start(); // Turn on output buffering
    include $path; // Output the result to the buffer
    return ob_get_clean(); // Get current buffer contents and delete current output buffer
} 
```

[ob_end_clean()](http://www.php.net/manual/en/function.ob-get-clean.php)

# jquery - 在 jquery 中使用 .data() 时获取 html 标签之间的值

> ID：13084531
> 
> 赞同：2
> 
> 时间：2012-10-26T09:44:30.817
> 
> 标签：jquery

如果使用 data()，如何获取 & 中的值？

示例代码：

```
<span data-name="username"> James</span> 
```

我可以通过使用获取数据名称的值：`$("span:visible").data("name"); // OUTPUT : username` 但我想获取值“James”，我尝试在最后添加 .text() 和 .val()，但它不起作用。

谢谢。杰克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T09:46:20.657

您可以使用[Attribute Equals](http://api.jquery.com/attribute-equals-selector/)选择器来匹配元素，并使用[text()](http://api.jquery.com/text/)方法获取其内部文本内容：

```
var spanText = $("span[data-name='username']:visible").text(); 
```

如果之前的空格字符`James`很重要，并且您不希望它出现在您获取的值中，则可以应用[$.trim()](http://api.jquery.com/jQuery.trim/)：

```
var trimmedSpanText = $.trim($("span[data-name='username']:visible").text()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T09:46:34.263

要获得“詹姆斯”，请使用

```
$('span:visible[data-name="username"]').text().trim(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T09:47:09.047

另一种方法是：

```
$("span:visible").html() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T09:47:16.737

如果你使用它会起作用：

```
$('span').text(); 
```

当你使用这个

```
$("span:visible").data("name") 
```

控制权转移到 data() ，因此 javascript 无法理解该元素是从哪里提取 text() 的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-26T09:55:24.213

```
<span id="spanTestData" data-name="username"> James</span>
$(document).ready(function () {
    $.trim($('#spanTestData').text());
}); 
```

//=================================或==============/ /

```
<span data-name="username"> James</span>

$(document).ready(function () {
    $.trim($('span[data-name]:first').text());
}); 
```

//=================================或==============/ /

[演示](http://jsfiddle.net/nanoquantumtech/wZVA9/)

```
<span data-name="username"> James</span>

<span id="spanTestData" data-name="username"> James 2</span>

<h1 style="font-size:larger; font-weight:bolder;"></h1>

 $(document).ready(function () {
        $('h1').text($.trim($('span[data-name]:first').text()) + ' ||| ' + $.trim($('#spanTestData').text()));
    }); 
```

# caching - 如何清除浏览器的缓存？

> ID：13084535
> 
> 赞同：0
> 
> 时间：2012-10-26T09:44:48.553
> 
> 标签：caching, browser

我的缓存有问题。当我访问我的网站时，我会看到旧主题，直到我点击 ctl+f5 来更新页面。有什么办法可以防止浏览器存储缓存？

我使用了这些元数据：

```
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="no-cache">
<meta http-equiv="Expires" content="-1">
<meta http-equiv="Cache-Control" content="no-cache"> 
```

但同样的结果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T09:50:52.813

使用以下标题：

```
Cache-Control: no-cache, no-store, must-revalidate
Pragma: no-cache
Expires: 0 
```

更多可以在[这里找到](https://stackoverflow.com/questions/49547/making-sure-a-web-page-is-not-cached-across-all-browsers)

**Edit1：**正如链接中进一步提到的，在`<head>`and之间使用这些纯 HTML 标记`</head>`，看看它是否有效：

```
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" /> 
```

# asp.net - 这是 asp:DropDownList 行为中的错误吗

> ID：13084538
> 
> 赞同：1
> 
> 时间：2012-10-26T09:44:55.723
> 
> 标签：asp.net, webforms

下面是我在查看一些代码时遇到的错误的重现。

页面：

```
<asp:DropDownList ID="ddlMain" runat="server" Visible="False" />
<asp:Button ID="btnSelect" runat="server" Text="Select" /> 
```

文件后面的代码：

```
protected void Page_Load(object sender, EventArgs e)
{                
            ddlMain.SelectedIndex = 0;
} 
```

请注意， ddlMain 具有`visible=False`. 如果我指定 selectedIndex = 0，则在页面加载时；selectedIndex 值不会改变并保持 -1。

该按钮用于启用回发；在回发时，上述语句失败并引发以下异常：

'ddlMain' 有一个无效的 SelectedIndex，因为它不存在于项目列表中。参数名称：值

**为什么第一次没有引发异常？为什么它在回发后被提升？**

我注意到即使下拉菜单的渲染大小为 0；在视图状态中仍然分配了 12 个字节 - 尽管我无法验证为控件存储的确切内容。如果我禁用视图状态，则回发后不会引发异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T09:52:03.230

这会给你同样的错误吗？

```
protected void Page_Load(object sender, EventArgs e)
{
    if(!IsPostBack)
        ddlMain.SelectedIndex = 0;
} 
```

在回发时，它会加载视图状态值，并告诉下拉列表它没有任何值。然后你给它一个选定的索引 0，它不存在。

# php - 如何在 SunOS 上安装 mysqli

> ID：13084542
> 
> 赞同：0
> 
> 时间：2012-10-26T09:45:07.603
> 
> 标签：php, unix, mysqli, sunos

我正在使用 Drupal 做一个学校项目；学校给了我们一个SunOS服务器使用。“uname -a”后面的详细信息是：

```
SunOS SERVER-NAME 5.10 Generic_141414-07 sun4v sparc SUNW,Sun-Fire-T200 
```

我按照讲师的命令安装了 mysql、apache 和 PHP。php版本为5.3.0，apache版本为2.2，mysql版本为5.1.36。

Drupal 需要用于 PHP 的 mysqli 插件，但是通过查看 phpinfo() 我发现没有关于 mysqli 扩展的信息。

我在网上搜索，从[mysqli安装指南](http://www.php.net/manual/en/mysqli.installation.php)中说，对于Unix OS，编译PHP时需要安装mysqli。我搜索了编译 PHP，在 SunOS 上编译似乎很乏味，而且有几个人在编译时遇到了一些错误。

网上也提到为了安装 mysqli，Ubuntu 用户可以这样做：

```
apt-get install php5-mysql 
```

但似乎我无法获得 php5-mysql 包。

我想如果我能得到 SunOS 的 mysqli.so 扩展，并在我的 php.ini 中启用该扩展，这个问题就可以解决。但是没有地方可以得到这样的扩展文件。

如果没有其他可能的解决方案，我将在 SunOS 上编译 PHP。但我想先在这里检查一下：还有其他可能的解决方案吗？

非常感谢。

[更新：] phpinfo 页面在[此处](http://cg3002-21-z.comp.nus.edu.sg/phpinfo.php)给出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T17:31:03.950

问题解决了。这是程序：

1.  [在此处](http://php.net/releases/index.php)下载与您当前 php 版本对应的 php 源

2.  转到扩展目录并编译相应的扩展。

那行得通，但是当我编译mysqlnd和pdo_mysql时有些失败。（直到现在都通过谷歌搜索。但未能解决）

我想那我就换个在线主机吧。

# c# - 如何针对cshtml页面中的特殊字符验证telerik组合框字段

> ID：13084546
> 
> 赞同：1
> 
> 时间：2012-10-26T09:45:19.600
> 
> 标签：c#, jquery, c#-4.0, telerik, asp.net-mvc-4

我的代码：

```
<div class="comb">
            @( Html.Telerik().ComboBox()
            .Name("cmbGender")
            .AutoFill(false)
            .DataBinding(binding => binding.Ajax().Select("LoadGenderNames", "Search"))
            .HighlightFirstMatch(true)
            .HtmlAttributes(new { @filterColumn = "Gender", @class = "filterCtrl", @id = "cmbGender", style = "width: 140px;" })
            )
        </div> 
```

例如：我正在使用 jquery 进行文本框验证。同样，我需要为组合框做。下面是我用于针对特殊字符进行文本框验证的代码。

输入文本框：

```
<input id="LastName" type="text" filtercolumn="LastName" maxlength="55" class="filterCtrl" style="width:135px; height:15px"/> 
```

用于文本框验证的 Jquery 代码：

```
$(document).ready(function () {
    $('input[id$=LastName]').bind('keyup blur', function () {
        if (this.value.match(/[^a-zA-Z0-9-,.' ]/g)) {
            this.value = this.value.replace(/[^a-zA-Z0-9-,.' ]/g, '');
        }
    });
} 
```

上面的代码适用于文本框字段验证。但我不知道要验证组合框。请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T10:42:05.597

尝试这个

```
 <div class="comb">
            @( Html.Telerik().ComboBox()
            .Name("cmbGender")
            .ClientEvents(events => events.OnChange("ComboBox_onChange"))
            .AutoFill(false)
            .DataBinding(binding => binding.Ajax().Select("LoadGenderNames", "Search"))
            .HighlightFirstMatch(true)
            .HtmlAttributes(new { @filterColumn = "Gender", @class = "filterCtrl", @id = "cmbGender", style = "width: 140px;" })
            )
        </div>

<script type="text/javascript">
function ComboBox_onChange(){
    var combobox = $(this).data('tComboBox'); // $(this) is equivalent to $('#ComboBox')
    // Use the combobox client object
    // call here your valodation function.

}
</script> 
```

或者如果想将其称为另一个事件，请参考以下链接 [http://www.telerik.com/help/aspnet-mvc/telerik-ui-components-combobox-client-api-and-events.html](http://www.telerik.com/help/aspnet-mvc/telerik-ui-components-combobox-client-api-and-events.html)

# testing - 为什么我不能使用 selenium 来测试 mmorpg 游戏？

> ID：13084547
> 
> 赞同：-3
> 
> 时间：2012-10-26T09:45:26.100
> 
> 标签：testing, selenium, selenium-ide

我是软件测试的初学者。刚刚在youtube上看了一个视频。我在 selenium IDE 中为 gmail 记录了几个步骤并重播了它。一切正常。然后我尝试了 runescape，突然 selenium 无法记录一个步骤。我无法理解。它是基于网络的，selenium 应该能够记录步骤并重播它。谁能解释一下我尝试过的这两件事之间有什么区别。为什么 selenium 在游戏应用程序上不起作用？我可以假设这些自动化工具不适用于这些类型的 MMORPG 网站吗？或者是否有任何特定类型的工具适用于这些类型的游戏？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T12:00:34.110

虽然答案下的讨论是正确的，但您还应该考虑一件事 - 它的**法律问题**：据我所知，大多数 MMORPG 游戏都积极拒绝机器人和/或脚本，因为他们更关心现场玩家对抗现场播放器，而不是机器人。

因此，在继续对 MMORPG 进行自动化测试之前，您应该：

*   检查该特定游戏的条款和条件是否允许玩家移动（动作......）的自动化，如果是，允许达到什么级别）
*   可能还与网站所有者/管理员/版主核实并解释，您需要测试什么并（也许）安排允许此类测试的特殊帐户

# apache-pig - Pig latin - 从文件中读取数据并将其存储为元组

> ID：13084548
> 
> 赞同：0
> 
> 时间：2012-10-26T09:45:27.073
> 
> 标签：apache-pig

这是我的设置 - Pig - 0.10 运行模式 - 本地用户 - hadoop 具有 root 访问权限

我有一个名为“数据”的文件，其中包含以下内容。1 1 2 3 2 4 5 6 3 7 8 9 4 1 4 7 5 2 5 8

我正在遵循教程 - [http://pig.apache.org/docs/r0.10.0/basic.html#tuple-schema](http://pig.apache.org/docs/r0.10.0/basic.html#tuple-schema) 我正在尝试读取文件，以便将每行中的第一个数字读取为整数并休息3 形成一个元组。我正在使用这段代码 - a = load 'data' as (f1:int, f2:tuple(t1:int, t2:int, t3:int)); 但是当我做'dump a'时，我得到 - (1,) (​​2,) (3,) (4,) (5,)

它看起来与教程完全相同。但是输出的东西完全出乎意料。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-25T14:39:52.317

我认为这不能完全在 load 语句中完成，但是一对语句可能会在没有太多麻烦的情况下做到这一点。试试下面的代码：

```
A = load 'data' USING PigStorage(' ') AS (f1: int, f2: int, f3: int, f4: int);
B = Foreach A Generate f1, TOTUPLE(f2,f3,f4);
dump B; 
```

当我对此进行测试时，它产生了输出：`(1,(1,2,3))`，这似乎是您的目标。

编辑：记得用正确的文件路径替换“数据”到你的 hdfs 中的数据

# visual-studio-2010 - 在 Windows xp 上未加载 Outlook 插件

> ID：13084550
> 
> 赞同：2
> 
> 时间：2012-10-26T09:45:33.543
> 
> 标签：visual-studio-2010, outlook, vsto, add-in, outlook-2007

我已经使用 Visual Studio 2010 创建了一个 Outlook 2007 插件，并使用 click 一次进行部署。每当我在本地系统中安装部署的 exe 时，它​​都可以正常工作。当我尝试在用户的机器上安装时，插件会被安装但未加载。它已移至“非活动应用程序”。我已经安装了另一个示例应用程序，但它也不起作用。我已在环境变量中将 VSTO_SUPPRESSDISPLAYALERTS 设置为 0。但这也没有显示任何错误消息。它在加载行为中显示“未加载。加载 COM 加载项期间发生运行时错误”。

除了使这项工作之外，我还有什么做错或需要做的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T00:42:42.643

原因是office 2007不支持在每台机器上安装插件，必须按用户安装。尝试仅为用户安装它或下载 Office 2007 SP3，按机器安装应用，看看它是否有效！（仅Office2010支持机器安装插件，请尝试检查SP3是否可以解决问题）

# html - Chrome（Webkit）忽略css3框属性？

> ID：13084555
> 
> 赞同：0
> 
> 时间：2012-10-26T09:46:05.183
> 
> 标签：html, google-chrome, css, webkit

下面的代码在 Chrome 版本 22.0.1229.96 m 中无法正确呈现。它在 Firefox 中运行良好。当类应用于 div 时，基本上什么都不会发生，它只是正常渲染所有内容。

```
.vbox {
    display: -moz-box;
    -moz-box-orient: vertical;

    display: -webkit-box;
    -webkit-box-orient: vertical;

    display: box;
    box-orient: vertical;
}

<div class="vbox">
    <input type="text" />
    <input type="password" />
</div> 
```

将类添加到 div 后，输入元素水平对齐。

**更新**

Flexbox 是要走的路，但 Firefox 仍然不支持它。我已经像这样修改了我的css，它现在可以正常工作。

```
.vbox {
    display: -moz-box;
    -moz-box-orient: vertical;

    display: -webkit-flex;
    -webkit-flex-direction: column; 
    -webkit-justify-content: center;
    -webkit-align-items: center;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T09:48:32.937

也许它在 Chrome 中不受支持：

> 警告：这是原始 CSS 灵活框布局模块标准的属性，正在被新标准取代。
> 
> 有关更多信息，请参阅[弹性盒](https://developer.mozilla.org/en-US/docs/CSS/Using_CSS_flexible_boxes)。

[https://developer.mozilla.org/en-US/docs/CSS/box-orient](https://developer.mozilla.org/en-US/docs/CSS/box-orient)

# ios - iOS Master Detail 应用程序 - 仅第一次显示详细信息

> ID：13084561
> 
> 赞同：-1
> 
> 时间：2012-10-26T09:46:36.103
> 
> 标签：ios, objective-c, rendering, master-detail

我在Master里有很多行，第一次点击一行，内容显示在Details中。我回去，选择一个新行，*或者同一行*，它在Details中显示“Detail view content goes here”。我疯狂地追踪，使用 NSLog 以防它是某种事件重新排序，在视图和 UIControl 实例中使用 setNeedsDisplay。一切都按正确的顺序跟踪正常，但没有显示新内容。NSLog 显示新内容在控件中，只是不显示。欢迎任何帮助，这让我发疯。

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"showDetail"]) {
        NSIndexPath *indexPath = [[self tableView] indexPathForSelectedRow];
        NSObject *object = [[[self objects] objectAtIndex:[indexPath section]] objectAtIndex:[indexPath row]];
        [[segue destinationViewController] setDetailItem:object];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T21:53:07.483

我正在通过向发件人发送消息进行更新。我已经包含了设置发件人的代码，例如详细视图，但假设它在设置后不会更改。事实证明，每次都会创建新的详细视图，因此之前的链接将无效。通过在每次构建视图时简单地重新保存发件人来修复它。

# vb.net - vb.net wince 连接到无线网络

> ID：13084562
> 
> 赞同：0
> 
> 时间：2012-10-26T09:46:40.177
> 
> 标签：vb.net, compact-framework, windows-ce

我有一个使用 vb.net 中的 wince compact 框架的应用程序，现在我需要它通过单击按钮连接到指定的无线网络，我对此进行了大量研究，我什至使用wlanapi.dll 但是我刚刚发现这个 API 不在紧凑的框架中。

有谁知道是否有可能将 wlanapi.dll 放到紧凑的框架上，或者任何了解 WirelessZeroConfigNetworkInterface 的人，我猜这是我的下一步。我发现了以下内容： http: [//blog.opennetcf.com/ctacke/2011/08/19/AServiceForScanningAndConnectingToWiFiNetworksFromTheCF.aspx](http://blog.opennetcf.com/ctacke/2011/08/19/AServiceForScanningAndConnectingToWiFiNetworksFromTheCF.aspx) 这看起来不错，但我不知道如何将它与我的 vb.net 代码集成。

任何有任何想法的人 - 我感觉有点脱离了我的舒适区！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T13:47:39.427

wlanapi.dll 是桌面 Windows 二进制文件。它不能在 Windows CE 下工作，并且在 CE 中没有类似的文件可用。对于 CE 5.0 和 6.0，您必须使用 WZC API，假设您要使用的适配器符合 WZC - 并非所有适配器都符合。对于 CE 7.0，您必须使用本机 WiFi API（感谢 Microsoft，这是一个天才之举）。

您在上面显示的链接是一些包装 OpenNETCF 智能设备框架 (SDF) WiFi 类的服务代码，而后者又包装了 WZC API。

“集成”该服务代码的方法可能只是在 VB.NET 中重写它——那里的代码确实不多。当然，您仍然需要添加对 SDF 二进制文件的引用。

# ruby-on-rails - 在 ruby on rails 中执行 Windows 批处理文件

> ID：13084581
> 
> 赞同：1
> 
> 时间：2012-10-26T09:48:06.620
> 
> 标签：ruby-on-rails, ruby

我正在使用一个名为 redmine checkout 的 redmine 插件，它使我们可以选择在 redmine 的 svn 存储库中查看代码。现在我需要添加一个按钮，该按钮将检查该特定项目中的所有代码并将其下载到我的本地计算机。

所以我创建了一个批处理文件，它是这样的：

```
@echo off
echo.
echo. [ SVN Updater ]

set SVNURL=%1
set SOURCE=C:\Users\
set SVN=C:\Program Files\TortoiseSVN\bin
echo.
echo. Updating %SOURCE% to SVN...
"%SVN%\TortoiseProc.exe" /command:checkout /path:"%SOURCE%" /url:%SVNURL% /closeonend:2 
echo. done.
echo.
echo. Operation complete. 
```

此批处理文件将代码签出到我的本地计算机。现在，我需要在我的 redmine 应用程序中运行这个批处理文件。你能告诉我在哪里以及如何运行这个批处理文件吗？我是新手。

非常感谢您提前。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T10:00:47.507

`system`您可以使用, `exec`, ``` (反引号) `,`%x{} `or using`open3`以多种方式运行批处理文件或任何其他命令。我更喜欢使用 open3 -

```
require 'open3'

log = File.new("#{your_log_dir}/script.log", "w+")
command = "your_batch_file.bat"

Open3.popen3(command) do |stdin, stdout, stderr|
     log.puts "[OUTPUT]:\n#{stdout.read}\n"
     unless (err = stderr.read).empty? then 
         log.puts "[ERROR]:\n#{err}\n"
     end
end 
```

如果您想了解更多关于其他选项的信息，可以参考[Ruby、exec、system 和 %x() 之间的差异或反引号](https://stackoverflow.com/questions/6338908/ruby-difference-between-exec-system-and-x-or-backticks)以获取相关文档的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T09:59:38.927

Ruby 允许您运行任何 shell 命令，包括批处理文件并使用 `` 运算符获取输出。例如：

```
def run_batch_file
  `my_batch_file.bat`
end 
```

# c# - Process.GetProcessesByName(String, String) 内存泄漏

> ID：13084585
> 
> 赞同：10
> 
> 时间：2012-10-26T09:48:21.847
> 
> 标签：c#, performance, memory, memory-leaks, profiling

我有一段代码使用静态方法[Process.GetProcessesByName(String, String)](http://msdn.microsoft.com/en-us/library/725c3z81%28v=vs.100%29.aspx)获取远程计算机上的进程列表，它在很多计算机（数千台）上运行，我注意到这是导致重大的内存泄漏。

我运行了 ANTS 内存分析器，它告诉我，我的大部分内存都是由字符串占用的，字符串包含诸如“% Idle Time”、“Processor Information”和“Cache Faults/sec”之类的 strage 值。我已经认识到这些字符串可能是程序中性能计数器的一部分，问题是我在程序中没有任何性能计数器。

深入挖掘发现这些字符串保存在 PerformanceCounterLib 保存的哈希表中，这些哈希表由存储在 PerformanceCounterLib 类的内部静态成员（本身是内部的）中的另一个哈希表保存。

更深入地挖掘兔子洞，我发现 Process.GetProcesesByName 使用 PerformanceCounterLib 来获取在远程计算机上运行的进程列表，并且对于每台远程计算机，在 PerformanceCounterLib 的静态内部变量中创建和引用另一个 PerformanceCounterLib 实例。这些实例中的每一个都包含我发现的字符串哈希表阻塞了我的内存（每个都在 300-700 kb 之间，这意味着它阻塞了我的大对象堆）。

我没有找到删除那些未使用的 PerformanceCounterLib 实例的方法，它们都是内部的，用户无权访问它们。

如何解决我的记忆问题？这真的很糟糕，我的程序在 24 小时内达到了 5GB（我的服务器的限制）。

*编辑*：添加了一段应该重现问题的代码（未经测试）。为了澄清：

```
/// computerNames is a list of computers that you have access to
public List<string> GetProcessesOnAllComputers(List<string> computerNames)
{
    var result = new List<string>();
    foreach(string compName in computernames)
    {
        Process[] processes = Process.GetProcesses(compName); // Happens with every     method that gets processes on a remote computer
        string processString = processes.Aggregate(new StringBuilder(), (sb,s) => sb.Append(';').Append(s), sb => sb.ToString());
        result.Add(processString);
        foreach (var p in processes)
        {
            p.Close();
            p.Dispose();
        }
        processes = null;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T10:48:36.373

您可以调用[PerformanceCounter.CloseSharedResources](http://msdn.microsoft.com/en-us/library/system.diagnostics.performancecounter.closesharedresources.aspx)。

在内部， this 调用`PerformanceCounterLib.CloseAllLibraries`，这听起来像。

我建议确保你在没有调用的时候调用`GetProcessesByName`它，因为看起来里面可能有一些`PerformanceCounterLib`你不想激起的竞争条件。

即有一个名为的共享变量`libraryTable`被检查一次，然后假定它在一种方法中继续有效，但可能随时被清除`CloseAllLibraries`- 所以它绝对不是线程安全的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T18:16:43.470

I was inspecting with ILSpy and analyzed the method call stack of your method. You are right, there are a static hashtable. I suggest: you should call in the `PerformanceCounter` class the following method:

```
// System.Diagnostics.PerformanceCounter
/// <summary>Frees the performance counter library shared state allocated by the counters.</summary>
/// <filterpriority>2</filterpriority>
/// <PermissionSet>
///   <IPermission class="System.Diagnostics.PerformanceCounterPermission, System, Version=2.0.3600.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" version="1">
///     <Machine name=".">
///       <Category name="*" access="Browse" />
///     </Machine>
///   </IPermission>
/// </PermissionSet>
public static void CloseSharedResources()
{
    PerformanceCounterPermission performanceCounterPermission = new PerformanceCounterPermission(PerformanceCounterPermissionAccess.Browse, ".", "*");
    performanceCounterPermission.Demand();
    PerformanceCounterLib.CloseAllLibraries();
} 
```

That calls the `PerformanceCounterLib.CloseAllLibraries();` which disposes all used hashtable.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T10:17:16.633

**警告：**这只是一个非常肮脏的快速修复，但使用反射来杀死它们。

访问私有变量： [我可以使用反射更改 C# 中的私有只读字段吗？](https://stackoverflow.com/questions/934930/can-i-change-a-private-readonly-field-in-c-sharp-using-reflection)

使用静态类的示例： [在对象初始化之前使用反射设置静态变量值？](https://stackoverflow.com/questions/2203545/using-reflection-to-set-a-static-variable-value-before-objects-initialization)

您可以使用的变体`typeof(Process).GetFields(BindingFlags.Static | BindingFlags.NonPublic)`来查找字段等。

我相信快速修复是值得的，因为 的行为`Process`显然是不正确的。

# wordpress - 在 WP TinyMCE 中添加带有自定义类的标签

> ID：13084586
> 
> 赞同：2
> 
> 时间：2012-10-26T09:48:21.737
> 
> 标签：wordpress, tinymce

WP 中的 TinyMCE 有一个很好的格式标签下拉列表，每个人都使用，但是有没有办法给这些标签添加一个类？例如，可以有 2 个`<p>`标签，一个生成基本标签，`<p></p>`另一个生成`<p class="myclass"></p>`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T14:08:58.250

确实。如果你想弄脏 php，这里有一个教程：[http](http://wp.tutsplus.com/tutorials/theme-development/adding-custom-styles-in-wordpress-tinymce-editor/) : //wp.tutsplus.com/tutorials/theme-development/adding-custom-styles-in-wordpress-tinymce-editor/ 里面的内容这个过滤器：

```
add_filter( 'tiny_mce_before_init', 'tuts_mce_before_init' );
function tuts_mce_before_init( $settings ) {

    $style_formats = array(
        array(
            'title' => 'My Style',
            'selector' => 'p',
            'classes' => 'myclass',
        )
    );
    $settings['style_formats'] = json_encode( $style_formats );
    return $settings;
} 
```

这是一个可以为您完成工作的插件： [http ://wordpress.org/extend/plugins/tinymce-advanced/](http://wordpress.org/extend/plugins/tinymce-advanced/)

# salesforce - 是否可以将联系人与公司名称相关联？

> ID：13084588
> 
> 赞同：0
> 
> 时间：2012-10-26T09:48:29.107
> 
> 标签：salesforce

我正在联系人编辑面板中寻找“公司名称”字段，但找不到。

甚至可以指出联系人的公司名称是什么？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T11:10:59.763

您可以使用字段“**帐户名称**”（查找）将您的联系人链接到一个帐户，但是如果您想要一个“公司名称”字段，您可以创建一个自定义字段，转到设置->应用程序设置->自定义->联系人- > 字段，然后向下滚动一点，找到“自定义字段和关系”，单击新建按钮，然后添加“**公司名称”字段，希望对您有所帮助 :)

# mysql - 用另一个数据库中的数据更新一个数据库中的表

> ID：13084593
> 
> 赞同：2
> 
> 时间：2012-10-26T09:48:45.887
> 
> 标签：mysql, phpmyadmin, sql-update, inner-join

您好，我在同一台服务器上有 2 个 MySQL 数据库，具有相同的结构和相同的数据。有时，一个数据库中的数据会更改 7 天，然后应该恢复到与第一个数据库中相同的值。通过 PhpMyAdmin，我正在尝试编写应该执行此操作的语句，但我缺少一些东西。我有数据库： db1_local 和 db2_local 表 gitem 列 gbaseprice （应该从 db1 同步到 db2） 列 gitemcode （在两个数据库中具有相同的值，并且应该在同步之后使用这个参数，这样 id 就不会搞砸了）感谢任何帮助

这是在 db2 中运行的语句，例如 SQL 语句

```
UPDATE gitem
    SET gbaseprice=db1_local.gbaseprice 
FROM 
    db1_local.gitem(`gbaseprice`) 
    INNER JOIN db1_local.gitemtable 
    ON db1_local.gitem(`gitemcode`)=db2_local.gitem(`gitemcode`) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T21:40:19.553

```
UPDATE db2_local.gitem G2
SET    G2.gbaseprice=
       (SELECT db1_local.gbaseprice G1
        FROM   db1_local.gitem
        INNER 
          JOIN db1_local.gitemtable 
        ON     G1.gitemcode=G2.gitemcode)) 
```

# common-lisp - 使用 asdf 和 defpackage 自动解决符号命名冲突

> ID：13084594
> 
> 赞同：2
> 
> 时间：2012-10-26T09:48:52.190
> 
> 标签：common-lisp, asdf

我已经使用 asdf 定义了一个通用的 lisp 包，它同时使用了 parenscript 和 clsql。

但是这些包围绕函数 GET-TIME 存在命名冲突。加载模块后，我可以在提示符下手动解决冲突（代码可能不准确）：

```
Select a symbol to be made accessible in package MY_PACKAGE:
   1\. PS-JS-SYMBOLS:GET-TIME
   2\. CLSQL-SYS:GET-TIME 
```

我选择选项1。

修改我的项目以便自动解决此冲突的最佳方法是什么？

我要修改 .asd 文件还是 project.lisp 文件？

我认为答案可能与[:shadowing-import-from](http://www.lispworks.com/documentation/HyperSpec/Body/m_defpkg.htm)有关，但我并不真正理解该文档页面上给出的示例。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T09:57:47.673

*Packages*、*symbols*、*exporting*、*using*等是 Common Lisp 的一个特性，而不是特定于 ASDF。

```
CL-USER 1 > (defpackage "FOO" (:use "CL") (:export "BAZ"))
#<The FOO package, 0/16 internal, 1/16 external>

CL-USER 2 > (in-package "FOO")
#<The FOO package, 0/16 internal, 1/16 external>

FOO 3 > (defun baz () 'FOO)
BAZ

FOO 4 > (defpackage "BAR" (:use "CL") (:export "BAZ"))
#<The BAR package, 0/16 internal, 1/16 external>

FOO 5 > (defun bar:baz () 'bar::bar)
BAR:BAZ

FOO 6 > (in-package "CL-USER")
#<The COMMON-LISP-USER package, 54/64 internal, 0/4 external>

CL-USER 7 > (defpackage "ZIPPY"
              (:use "FOO" "BAR")
              (:shadowing-import-from "BAR" "BAZ"))
#<The ZIPPY package, 1/16 internal, 0/16 external>

CL-USER 8 > (in-package "ZIPPY")
#<The ZIPPY package, 1/16 internal, 0/16 external>

ZIPPY 9 > (baz)
BAR::BAR 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T10:55:38.013

基于上面@Rainer Joswigs 的回答，我的问题的具体答案是编写我的defpackage 表单，如下所示：

```
 (defpackage #:my-package 
      (:use :cl :clsql :parenscript)
      (:shadowing-import-from :parenscript "GET-TIME")
      ) 
```

# c# - 具有基于任务的异步模式的 UDP 侦听器

> ID：13084596
> 
> 赞同：2
> 
> 时间：2012-10-26T09:48:52.767
> 
> 标签：c#, multithreading, io, task-parallel-library, async-await

我在搞乱 UDP 侦听器和 TAP。

我有一个类负责监听传入的 UDP，并且可以启动和停止。Start() 方法只是调用下面的方法

```
 private async void Listen()
    {
        var resp = await _udpClient.ReceiveAsync().ConfigureAwait(continueOnCapturedContext: false);

        var eventHandler = PacketReceived;
        if (eventHandler != null)
            eventHandler(this, new UdpPacketReceivedEventArgs(resp));

        if (_running)
            Listen();
    } 
```

它是否正确？我有点担心我可能会耗尽线程池，因为通过产生一个新的 Listen() 调用来保持线程处于活动状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T11:22:07.667

> 它是否正确？我有点担心我可能会耗尽线程池，因为通过产生一个新的 Listen() 调用来保持线程处于活动状态。

是的，*完全*正确，此操作不受 CPU 限制，而是受 IO 限制。因此，线程池中根本没有线程被阻塞等待操作完成。

有一个线程等待网络请求完成，但它在所有网络请求之间共享（如 UI 线程）。它在 Windows 上称为 IO 完成端口线程。当网络请求完成时，操作系统中的中断处理程序将作业添加到 IO 完成端口的队列中。执行 1000 个网络请求，请求全部启动，随着响应到达，依次由单个 IO 完成端口处理。

# scala - 在 Scala 中对映射值进行求和和分组

> ID：13084597
> 
> 赞同：2
> 
> 时间：2012-10-26T09:49:07.243
> 
> 标签：scala, dictionary, collections, grouping, aggregation

我是 Scala 的新手，我正在寻找一种更简洁的方法来对映射值进行求和和分组。有没有比以下代码更好的方法：

```
def mapSum(thisMap: Map[Char, Int], thatMap: Map[Char, Int]) = {
  thisMap.transform { (k, v) => thatMap(k) + v }
} 
```

这将满足以下测试：

```
@Test
def mapSum() {
  val map: Map[Char, Int] = Map('C' -> 1, 'D' -> 3)
  val newMap = mapSum(map, map)
  assertEquals(2, newMap('C'))
  assertEquals(6, newMap('D'))
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T10:09:16.993

如果您想要简洁，您不会比使用标准库的当前版本更好（尽管请注意，您可以删除外括号以使其成为两行）。

[Scalaz](http://code.google.com/p/scalaz/)提供了一些工具，可以使这种事情更加简洁，包括一个 monoid 实例`Map`和一个 pimped`unionWith`方法：

```
scala> import scalaz._, Scalaz._
import scalaz._
import Scalaz._

scala> val m = Map('C' -> 1, 'D' -> 3)
m: scala.collection.immutable.Map[Char,Int] = Map(C -> 1, D -> 3)

scala> m |+| m
res0: scala.collection.immutable.Map[Char,Int] = Map(C -> 2, D -> 6)

scala> (m unionWith m)(_ + _)
res1: Map[Char,Int] = Map(C -> 2, D -> 6) 
```

请注意，这两种方法的行为与您的略有不同——如果第一个中的键不在第二个中，它们不会在运行时阻塞，并且它们不会默默地忽略第二个中的键不是第一个。

# java - 从设置绑定到在 SpringMVC 中

> ID：13084601
> 
> 赞同：1
> 
> 时间：2012-10-26T09:49:13.973
> 
> 标签：java, spring, spring-mvc

我正在使用 Spring MVC 创建 Web，但我仍然是 Spring 的初学者。我有两个具有多对多关系的实体。在实践中，我有 UserGroup，它可以有许多或一个（或没有）UserAuthority 我想使用多选表单来编辑这些关系。创建新的 UserGroup 实体或编辑现有的实体可以正常工作，但有一个小问题：编辑现有的 UserGroup 时，选择框中没有选择适当的权限。我已经为此工作了一天多没有成功。有人可以帮帮我吗？

我的实体模型是：

```
@Entity
public class UserGroup {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    private String title;

    @ManyToMany(fetch = FetchType.EAGER)
    @JoinTable(
        name = "user_group_has_user_authority",
        joinColumns = {
            @JoinColumn(name = "user_group_id")},
        inverseJoinColumns = {
            @JoinColumn(name = "user_authority_id")})
    private Set<UserAuthority> authorities;
} 
```

（我省略了 getter 和 setter，但我的代码中有它们）

和

```
public class UserAuthority {
    @Id
    @GeneratedValue(strategy= GenerationType.IDENTITY)
    private Long id;

    private String code;

    private String name;
} 
```

（同样，我省略了 setter 和 getter）。

我的表格如下所示：

```
<form:form action="${action}" method="post" commandName="userGroup" id="user-group-form">
    <form:input readonly="true" cssClass="dn" path="id"/>
    <table>
        <tr>
            <td>
                <form:label path="title">Title</form:label>
                <form:errors path="title" />
            </td>
            <td>
                <form:input path="title"/>
            </td>
        </tr>
        <tr>
            <td>
                <form:label path="authorities">Authorities</form:label>
                <form:errors path="authorities" />    
            </td>
            <td>
                <form:select path="authorities" multiple="true" items="${authoritiesList}" />
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <input type="submit" value="Save" />
            </td>
        </tr>
    </table>
</form:form> 
```

我的控制器方法如下：

```
@RequestMapping(value = "/editGroup", method = RequestMethod.GET) 
public ModelAndView editGroup(Model model, HttpServletRequest request) {
    Long id = null;
    UserGroup userGroup = null;
    HashMap<String, Object> editModel = new HashMap<>(2);

    try {
        id = Long.parseLong(request.getParameter("id"));
    } catch (NumberFormatException ex) {
    }
    if (id != null) {
        userGroup = groupsManager.get(id);
    } 

    UserGroupData userGroupData = groupsManager.createFromUserGroup(userGroup);

    editModel.put("userGroup", userGroupData);
    editModel.put("authoritiesList", getAuthoritiesList());

    return new ModelAndView("/users/groupEdit", editModel);
}

@RequestMapping(value = "/editGroup", method = RequestMethod.POST)
public String updateGroupAction(@ModelAttribute("userGroup") @Validated UserGroupData userGroupData, BindingResult result, Model model, HttpServletRequest request) {

    if (result.hasErrors()) {
        model.addAttribute("userGroup", userGroupData);
        return "/users/groupEdit";
    }
    groupsManager.saveUserGroupData(userGroupData);
    return "redirect:/users/listGroup";
}

private Map <Long, String> getAuthoritiesList() {      //I also tried returning Map<String,String> but result was same.
    Map<Long,String> authorities = new LinkedHashMap<>();
    for (UserAuthority ua : authorityManager.getAll()) {
        authorities.put(ua.getId(), ua.getName());
    }
    return authorities;
} 
```

最后，我使用这个转换器从 String 创建 UserAuthority（实际上我在某处搜索过这个，但它有效:)） public class StringToUserAuthorityConverter implements Converter {

```
 /**
     * The string that represents null.
     */
    private static final String NULL_REPRESENTATION = "null";

    @Autowired
    private UserAuthorityDao authorityDao;

    @Override
    public UserAuthority convert(final String id) {
        if (id.equals(NULL_REPRESENTATION)) {
            return null;
        }
        Long lId = null;
        try {
            lId = new Long(id);
        } catch (NumberFormatException e) {

        }
        return authorityDao.find(lId);
    }
} 
```

正如我所说，所有创建和编辑工作，我唯一的问题是，在编辑现有组时未选择已经与组关联的权限。任何帮助将不胜感激。

**编辑**

我发现了两件事，也许它可以帮助：

1）在html页面中，有以下字段：

```
<input type="hidden" value="1" name="_authorities"> 
```

我读到它应该包含我的权限字段表单模型的值，但无论如何，在我的情况下它总是包含 1

2）如果我的表单验证失败（这意味着如果我没有输入标题，这是强制性的）表单会重新加载并显示错误消息，但选择框为空。不是有什么征兆吗？

**编辑 2**

我从上次编辑中解决了第 2 点）...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-08T19:48:56.327

您需要在实体类中实现`equals()`和`hashCode()`方法。`Authority`这是因为`Set`（和其他集合）检查对象是否相等，这就是 Spring 标记已选择字段的方式。

[http://docs.jboss.org/hibernate/core/4.0/manual/en-US/html/persistent-classes.html#persistent-classes-equalshashcode](http://docs.jboss.org/hibernate/core/4.0/manual/en-US/html/persistent-classes.html#persistent-classes-equalshashcode)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T09:39:40.003

所以我做了一个丑陋的解决方案。虽然它有效，但代码并不像我希望的那样好。我在jsp中编辑了我的表单，如下所示：

```
<form:select path="authorities" multiple="true" >
     <c:forEach var="authority" items="${authoritiesList}">
         <c:choose>
             <c:when test="${userGroup.authorities.contains(authority) eq true}">
                 <option value="${authority.id}" selected="selected">${authority.name}</option>
             </c:when>
             <c:otherwise>
                 <option value="${authority.id}">${authority.name}</option>
             </c:otherwise>
        </c:choose>
    </c:forEach>
</form:select> 
```

但必须有更好的方法...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T09:55:54.670

您应该使用 AutoPopulatingList 进行转换，此功能在 spring 中可用，用于将列表数据转换为模型列表。[例子](http://java-sandbox.cloudfoundry.com/autopopulatinglist)

# iphone - Cocos2d 关闭场景

> ID：13084603
> 
> 赞同：1
> 
> 时间：2012-10-26T09:49:28.423
> 
> 标签：iphone, cocos2d-iphone, scene

我的应用程序 cocos2d 有问题。我不知道如何关闭一个场景。我收到此错误：如果正在运行另一个场景，则无法运行场景。改用 replaceScene 或 pushScene '

请帮帮我

再见

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T10:25:20.330

我假设，你正在尝试改变当前场景

```
[[CCDirector sharedDirector] runWithScene: newScene]; 
```

利用

```
[[CCDirector sharedDirector] replaceScene: newScene]; 
```

或者

```
[[CCDirector sharedDirector] pushScene: newScene]; 
```

反而。

`replaceScene`将删除先前的场景，`pushScene`允许您稍后弹出推送的场景以返回到推送新场景之前的状态的第一个场景。

无论如何，将来您应该在出现错误的地方发布代码，以让这里的人能够更好地理解您的问题。

# jquery - Jquery 选项卡式内容（显示问题）

> ID：13084604
> 
> 赞同：0
> 
> 时间：2012-10-26T09:49:37.447
> 
> 标签：jquery, css

我正在使用这个 [http://jsfiddle.net/vRqcb/11/](http://jsfiddle.net/vRqcb/11/)

我已经在一个使用这个 CSS 的 jquery 弹出框中实现了它：

```
#element_to_pop_up { 
    background-color:#fff;
    border-radius:15px;
    color:#000;
    display:none; 
    padding:20px;
    min-width:700px;
    min-height: 500px;
} 
```

见这里：[http ://www.pazzle.co.uk/index.php?main_page=product_info&cPath=6_11&products_id=8#.UIpb2cWlUYM](http://www.pazzle.co.uk/index.php?main_page=product_info&cPath=6_11&products_id=8#.UIpb2cWlUYM)

在“添加到购物车”按钮下方，显示“查看尺寸表”。点进去可以看到有点变形，CSS和JSfiddle一模一样？

也许是因为它在弹出脚本中？

编辑：

```
<!-- Element to pop up -->
<div id="element_to_pop_up">
<script language="javascript">
$(document).ready(function() {    

$('#tabs li a:not(:first)').addClass('inactive');
$('.container').hide();
$('.container:first').show();

$('#tabs li a').click(function(){
    var t = $(this).attr('id');
  if($(this).hasClass('inactive')){ //this is the start of our condition 
    $('#tabs li a').addClass('inactive');           
    $(this).removeClass('inactive');

    $('.container').hide();
    $('#'+ t + 'C').fadeIn('slow');
 }
});

});
</script>
    <a class="bClose">x<a/>

<ul id="tabs">

      <li><a id="tab1">test1</a></li>
      <li><a id="tab2">test2</a></li>
      <li><a id="tab3">test3</a></li>
      <li><a id="tab4">test4</a></li>
</ul>
          <div class="container" id="tab1C">1Some content</div>
          <div class="container" id="tab2C">2Some content</div>
          <div class="container" id="tab3C">3Some content</div>
          <div class="container" id="tab4C">4Some content</div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T09:58:25.007

的第一个中有一个双`<a>`标签，第一个将第二个向下推。`<li>``ul#tabs``<a>``<a>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T09:56:42.980

我非常确信您在 jsfiddle 中使用的 Javascript 与您在网站上使用的不同。

我在第一个 li 中看到了一个额外的锚标记。

```
<ul id="tabs"><a>

      </a><li><a></a><a id="tab1" class="inactive">test1</a></li>
      <li><a id="tab2" class="inactive">test2</a></li>
      <li><a id="tab3" class="inactive">test3</a></li>
      <li><a id="tab4" class="inactive">test4</a></li>

</ul> 
```

您还看到“非活动”类应用于所有 li，而根据您的代码，它不应该应用于第一个元素。因此，当您的 javascript 运行时，这个锚标记肯定存在。

# sql - sql - 如何选择使行可以是列？

> ID：13084607
> 
> 赞同：0
> 
> 时间：2012-10-26T09:49:42.173
> 
> 标签：sql, sql-server

我有一张这样的桌子：

```
 Item      Name             Name_location   Price

    1      item1_london        london         10
    1      item1_beijing       bejing         10
    2      item2_london        london         20
    2      item2_beijing       bejing         20 
```

基本上，这张桌子意味着我有很多物品，`each item will have a different name in different location (two locations: london and beijing)`。

**我怎样才能查询**，以便我可以得到这样的表：

```
 Item     london             bejing          Price
    1      item1_london       item1_beijing    10
    2      item2_london       item2_beijing    20 
```

我正在使用 MS SQL Server。

**编辑：更新了两个表，添加了另一列**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T10:07:27.807

如果您只有两个位置，则可以使用`CASE`带有聚合的语句：

**聚合案例**：

```
select item,
  max(case when Name_location = 'london' then name end) london,
  max(case when Name_location = 'bejing' then name end) bejing,
  sum(price) price
from yourtable
group by item 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/c1792/2)

或者

```
select item,
  max(case when Name_location = 'london' then name end) london,
  max(case when Name_location = 'bejing' then name end) bejing,
  price
from yourtable
group by item, price 
```

使用该`PIVOT`功能，有两种方式，静态/动态：

**静态枢轴**

```
select item, [london], [bejing], price
from 
(
  select item, name, name_location, price
  from yourtable
) x
pivot
(
  max(name)
  for name_location in ([london], [bejing])
) p 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/93c2a/4)

如果你有一个已知数量的值，静态`PIVOT`版本会很好用，如果你有一个未知数量，那么你可以使用动态 sql：

**动态枢轴**：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(name_location) 
                    from yourtable
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT item,' + @cols + ', price from 
             (
                select item, name, name_location, price
                from yourtable
            ) x
            pivot 
            (
                max(name)
                for name_location in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/93c2a/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T09:54:23.777

用一个[`pivot`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)

```
select * 
from YourTable src
pivot (max(name) for name_location in ([london], [beijing]) ) p 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T10:02:30.177

![在此处输入图像描述](../Images/eb5ce1588263d5ac8f2b36a0a86d3e6a.png)

```
select item,london,beijing
from t1
pivot(max(Name) for Name_location in (london, beijing)) pvt 
```

![在此处输入图像描述](../Images/4c5f5e9a1c680a1e57eb8a7ac106caaa.png)

```
select item,london,beijing,price
from t1
pivot(max(Name) for Name_location in (london, beijing)) pvt 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T09:55:27.663

```
SELECT DISTINCT o.Item, l.itemName as London, b.ItemName as Beijing
FROM myTable o inner join myTable l ON o.item = l.item
INNER JOIN myTable b ON o.item = b.item
WHERE l.location = 'london' AND b.location = 'beijing' 
```

SQLFiddle 链接：[http ://sqlfiddle.com/#!3/93c2a/8](http://sqlfiddle.com/#!3/93c2a/8)

# python - Python：bottle.py 的类似 mod_rewrite 的函数

> ID：13084608
> 
> 赞同：2
> 
> 时间：2012-10-26T09:49:44.510
> 
> 标签：python, bottle

我有一个现有的 Python 应用程序，它通过 Bottle.py 服务为一堆文件提供服务。

现在我必须更改服务器应该响应的路径。
显而易见的方法是更改`@route`​​语句并将新路径添加到每条路线。

但是我得到了**旧路径应该继续工作**一段时间的限制。由于服务器也应该对旧请求做出反应，因此我必须复制每个路由语句才能使用旧路径和新路径一次。

因此，直截了当，这将是一个变化：

```
@route('/somefile')
def doSomeStuff(): 
```

至：

```
@route('/somefile')
@route('/newpath/somefile')
def doSomeStuff(): 
```

但是由于有很多路由并且我不想弄乱所有代码，所以我正在寻找一种优雅的方式来在路由发生**之前处理请求。**

有什么方法可以挂钩路由过程吗？

* * *

我目前的方法是向浏览器提供 301，但我不喜欢这种解决方案，因为它增加了请求的数量并更改了用户的 URL。

```
#Serve a 301 (hope the browsers remember it for a session at least)
@route('/newpath<path:path>')
def redirectNewToOld(path):
    if len(path) == 0:                         #Catch the lazy typers
        path = '/'
    redirect(path, code=301) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T10:31:51.967

我想到了两件事，但没有一件比在你的 webapp 前面简单地放一个 nginx 更好。第一个是使用中间件类重写`PATH_INFO`- 有[WSGIRewrite](http://pypi.python.org/pypi/WSGIRewrite/)，但总体思路是：

```
from bottle import route, run, app

@route('/oldpath/somefile')
def index(): return 'Hello'

class RewriteMiddleware:
    def __init__(self, app):
        self.app = app

    def __call__(self, env, res):
        path = env['PATH_INFO']
        if path.startswith('/newpath'):
            env['PATH_INFO'] = path.replace('/newpath', '/oldpath', 1)

        return self.app(env, res)

app = RewriteMiddleware(app())
run(app) 
```

或者，您可以使用[显式路由](http://bottlepy.org/docs/dev/routing.html#explicit-routing-configuration)，但这会带走一些瓶子的魅力：

```
from bottle import run, route

def index(): return 'Hello'

routes = (
    ('/oldpath/hello', 'GET', index),
    ('/oldpath/world', ['GET', 'POST'], index),
    )

def setup_routing():
    for path, method, handler in routes:
        if path.startswith('/oldpath'):
            newpath = path.replace('/oldpath', '/newpath', 1)
            route(newpath, method, handler)

        route(path, method, handler)

setup_routing()
run() 
```

* * *

重新阅读您的问题后，似乎第二个选项是不行的，因为它涉及修改大量代码。但是，您可以遍历所有现有路由并添加新路由：

```
for route in bottle.default_app[0].routes:
    if route.rule.startswith(...):
        bottle.route(..., route.call) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T07:05:01.387

好吧，我为瓶子写了自己的 mod_rewrite。
代码也可以在**[GitHub上找到](https://github.com/Nippey/bottle/commit/5586f811ddaccc77b03d508a8be4a4ac70f3a2aa)**

## 变化：

（基于今天创建的分叉，2012 年 10 月 29 日）

**在** `class Bottle(object):`
**@Lines 754ff 中，增加了一项：**

```
def _handle(self, environ):
    try:
        environ['bottle.app'] = self
+       url_rewrite.apply(environ)    #Added mod_rewrite
        request.bind(environ)
        response.bind()
        route, args = self.router.match(environ)
        environ['route.handle'] = route
        environ['bottle.route'] = route
        environ['route.url_args'] = args
        return route.call(**args) 
```

**在底部添加**

```
###############################################################################
# Nippey #### 29.10.2012 #### mod_rewrite #####################################
###############################################################################
# This modification to bottly.py allows the application of rewrite rules to 
# requests _before_ they are processed by the routing system

class UrlRewriteException(BottleException):
    """ This is a base class for all rewrite related exceptions """

class UrlRewrite():
    """ This class processes every URL before is is passed to the routing system 
    In case one of the included rewrite rules matches the URL, the URL will be modified.
    New rules can be added via the .addRule(str, str, bool) method.
    For each requested URL, the method apply will be called with the environ variable as parameter.
    """

    def __init__(self):
        """ Initiates the rules variable """
        print("UrlRewrite init.")
        self.rules = []

    def addRule(self, match, replace, final=False):
        """ Add a new rule.
        match:   Regular expression to search for. Can be a string or a compiled regular expression
        replace: Replacement string. May use backreferences.
        final:   If a rule with <final=True> matches the URL, the evaluation will be stopped afterwards
        """
        print("UrlRewrite addRule.")
        if type(match) is not str and type(replace) is not str:
            raise UrlRewriteException
        pattern = re.compile(match)
        self.rules.append({'pattern':pattern, 'repl':replace, 'final':bool(final)})

    def apply(self, environ):
        """ Test a URL for a match of one of the saved rules and rewrite it if required
        environ: Environmental variable created by bottle on each request. Contains the PATH_INFO 
                 information, modification will happen with the reference to this variable.
        returns: Returns true if a rewrite has been executed. Not used by the main program (yet)
                 Original path will still be available as PATH_INFO_ORIGINAL in the environ variable
        """
        print("UrlRewrite apply.")
        rewritten = False
        url = environ['PATH_INFO']
        for rule in self.rules:             #Try to alppy each of the rules
            (url, noSubs) = rule['pattern'].subn(rule['repl'], url)
            if noSubs > 0:
                rewritten = True
                if rule['final']:
                    break
        if rewritten:
            environ['PATH_INFO_ORIGINAL'] = environ['PATH_INFO']
            environ['PATH_INFO'] = url
            return True
        return False

    """ EXAMPLES:

    #Backreferences may be used by the replacement string
    from bottle import url_rewrite
    url_rewrite.addRule("^/he(l*)o", r"/by\1e", False)
    #Input:  "/hello/test_hello" 
    #Output: "/bye/test_hello"

    #All matching occurences will be replaced
    from bottle import url_rewrite
    url_rewrite.addRule("hello", "bye", False)
    #Input:  "/hello/test_hello" 
    #Output: "/bye/test_bye"

    #Rules will be applied in successive order
    from bottle import url_rewrite
    url_rewrite.addRule("hello", "hi", False)
    url_rewrite.addRule("hi", "bye", False)
    #Input:  "/hello/test_hello" 
    #Output: "/bye/test_bye"

    #Rules won't be re-applied from the start if one rule matches
    from bottle import url_rewrite
    url_rewrite.addRule("hi", "bye", False)
    url_rewrite.addRule("hello", "hi", False)
    #Input:  "/hello/test_hello" 
    #Output: "/hi/test_hi"

    #After applying a rule with <final> set to True, the evaluation will be finished
    from bottle import url_rewrite
    url_rewrite.addRule("hello", "hi", True)
    url_rewrite.addRule("hi", "bye", False)
    #Input:  "/hello/test_hello" 
    #Output: "/hi/test_hi"
    """
# END class UrlRewrite

url_rewrite = UrlRewrite()
# END ## mod_rewrite ## Nippey 
```

我已经发送了一个拉取请求，但这是以防万一它不会被拉进来。;)

# python - 如何使用 scipy.integrate 中的 odeint 积分常微分方程？

> ID：13084613
> 
> 赞同：1
> 
> 时间：2012-10-26T09:49:54.700
> 
> 标签：python, python-2.7, scipy

我正在尝试使用 scipy 中的 odeint 在代码中集成定义为 f 的函数。函数 f 将 theta、t 和 K 作为参数，这些参数在函数 f 下方定义。y 是结果，我得到了错误。错误的原因是 2 维的 theta。我无法执行整合。有人可以帮我吗？

```
import numpy as np
import random
from scipy.integrate import odeint 
```

`f`是要集成的功能

```
def f(theta, t, K):
    global N   
    tau = 1.5  
    dtheta = np.zeros([T,N], float)  
    for i in range(N):  
        s = 0\.  
        for j in range(i+1,N):  
            s = s + np.sin(theta[t-tau,j] - theta[t,i])  
        dtheta[t,i] = K*s  
    return dtheta  

# Number of nodes
N = 10
# Constant
K = 1.0
# Number of time steps 
T = 100
t = np.linspace(0, T, 100, endpoint=False)
theta = np.zeros([T,N], float) 
```

统一生成随机数

```
for i in range(N):
    theta[0,i] = random.uniform(-180, 180) 
```

`f`使用`odeint`from集成函数`scipy`

```
y = odeint(f, theta, t, args=(K,))
print y 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T13:15:31.887

写

```
y = odeint(f, theta.ravel(), t, args=(K,)) 
```

和

```
def f(theta, t, K):
    global N
    theta = theta.reshape(T, N)
    ...
    return dtheta.ravel() 
```

# node.js - 在 node.js 响应后插入一些数据

> ID：13084614
> 
> 赞同：0
> 
> 时间：2012-10-26T09:49:56.480
> 
> 标签：node.js, express

我写了一个网站跟踪器供内部使用，因为 Google Analytic 不符合要求。

我使用 node.js 和 Express 来开发那个跟踪系统。到目前为止一切正常。但我想确认的是，如果我在响应图像后插入日志数据，是否有问题。

谢谢！

```
function image_response(req, res, next){
    var buf = new Buffer([0x47, 0x49, 0x46, 0x38, 0x39, 0x61, 0x01, 0x00, 0x01, 0x00, 0x80, 0x00, 0x00, 0xff, 0xff, 0xff, 0x00, 0x00, 0x00, 0x2c, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x01, 0x00, 0x00, 0x02, 0x02, 0x44, 0x01, 0x00, 0x3b]);
    res.send(200, buf);
    next();
}

app.get('/tracker.gif', image_response, function(req, res){
     // blah blah blah 
     // DB insert codes..
} 
```

实际上，“image_response”完全是响应的结束，并关闭了与客户端的浏览器连接。之后，执行将数据保存到数据库的逻辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T09:51:58.060

如果您这样做了，则无法修改结果`res.send()`，请改用`res.write()`+ `res.end()`。

`res.send()`是一种方便的 express 方法，它结合了 res.write() 和 res.end() 以便于使用。如果你想在多个地方的响应中发送数据，你必须使用 nodejs 的方法 write 和 end 来处理结果。

# select - 加载 View 时的 UIPickerView 选择值

> ID：13084617
> 
> 赞同：0
> 
> 时间：2012-10-26T09:50:11.847
> 
> 标签：select, default, uipickerview

所以我实现了一个 PickerView 并且当我选择一些值时一切正常，但如果我不选择任何东西

```
- (void)selectRow:(NSInteger)row inComponent:(NSInteger)component animated:(BOOL)animated 
```

不叫。我希望如果用户没有选择一个值，则选择第一个值。

所以我实现了：

```
-(void)viewDidAppear:(BOOL)animated
{
    [pickerView selectRow:0 inComponent:0 animated:YES];
} 
```

但它不起作用。为什么在此之后不调用 selectRow:inComponent: 方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T18:48:20.177

创建一个新函数以在您开始时调用。如果希望启动应用程序时读取输入的代码，则需要将其放在 viewDidLoad 下

```
- (void)viewDidLoad
{
[super viewDidLoad];
[updateWheel];
{
    [super viewDidLoad];
    }

 #Pragma Mark pickerWheel Delegate
- (void)updateWheel
{NSString *wheel1 = [wheel1 objectAtIndex:[picker selectedRowInComponent:0]];
aLabelUWantToHaveOutputIn.text = wheel1; 
} //Whatever code you want to happen 
```

如果这没有帮助，请查看我的项目，它使用了一些相同的机制。 [http://pastebin.com/WLGq3jvv](http://pastebin.com/WLGq3jvv)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T10:24:21.103

```
 [pickerView selectRow:0 inComponent:0 animated:YES]; 
```

它不会调用委托函数。它只会将指定的行滚动到中心。

# android - 重用 HttpUrlConnection

> ID：13084618
> 
> 赞同：0
> 
> 时间：2012-10-26T09:50:23.083
> 
> 标签：android, json, gridview, httpurlconnection, reusability

我制作了从 JSON 获取图像路径的 gridview 应用程序。我的 gridview 存储了 2 张图片。在两张图片中，我只能得到一张图片。在`ImageLoaderTask`我创建的类`String frameUrl`中使用，`imgUrl`但我不知道如何使用。我试图找到很多解决方案，但它不能。

如何重用连接 HttpUrlConnection 以在 gridview 中显示更多图像？

```
String strUrl = "http://192.168.10.104/adchara1/";
GridView gridView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // Creating a new non-ui thread task to download json data
    DownloadTask downloadTask = new DownloadTask();

    // Starting the download process
    downloadTask.execute(strUrl);

    gridView = (GridView) findViewById(R.id.lv_countries);        
    gridView.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View v, int positon,
                long id) {
             HashMap<String, Object> hm = (HashMap<String, Object>) gridView.getAdapter().getItem(positon);
             String imgPath = (String) hm.get("photo"); //get downloaded image path
             Intent i = new Intent(MainActivity.this, DisplayActivity.class); //start new Intent to another Activity.
             i.putExtra("ClickedImagePath", imgPath ); //put image link in intent.
             startActivity(i);
        }
    });
}

/** A method to download json data from url */
private String downloadUrl(String strUrl) throws IOException{
  String data = "";
  InputStream iStream = null;

    HttpClient httpClient = new DefaultHttpClient();
    HttpPost httpPost = new HttpPost(strUrl);
    ArrayList<NameValuePair> param = new ArrayList<NameValuePair>();
    try {
        httpPost.setEntity(new UrlEncodedFormEntity(param));
        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        iStream = httpEntity.getContent();
    } catch (Exception e) {
        Log.e("log_tag", "Error in http connection " + e.toString());
    }
    try {
        BufferedReader br = new BufferedReader(new InputStreamReader(iStream));
        StringBuilder sb = new StringBuilder();
        String line = "";
        while((line = br.readLine()) != null){
            sb.append(line + "\n");
        }
        iStream.close();
        data = sb.toString();
    } catch (Exception e) {
        Log.e("log_tag", "Error converting result " + e.toString());
    }
    return data;
}

/** AsyncTask to download json data */
private class DownloadTask extends AsyncTask<String, Integer, String>{
    String data = null;
    @Override
    protected String doInBackground(String... url) {
        try{
            data = downloadUrl(url[0]);
        }catch(Exception e){
            Log.d("Background Task",e.toString());
        }
        return data;
    }

    @Override
    protected void onPostExecute(String result) {

        // The parsing of the xml data is done in a non-ui thread
        GridViewLoaderTask gridViewLoaderTask = new GridViewLoaderTask();

        // Start parsing xml data
        gridViewLoaderTask.execute(result);
    }
}

/** AsyncTask to parse json data and load ListView */
private class GridViewLoaderTask extends AsyncTask<String, Void, SimpleAdapter>{

    JSONObject jObject;
    // Doing the parsing of xml data in a non-ui thread
    @Override
    protected SimpleAdapter doInBackground(String... strJson) {
        try{
            jObject = new JSONObject(strJson[0]);
            CountryJSONParser countryJsonParser = new CountryJSONParser();
            countryJsonParser.parse(jObject);
        }catch(Exception e){
            Log.d("JSON Exception1",e.toString());
        }

        // Instantiating json parser class
        CountryJSONParser countryJsonParser = new CountryJSONParser();

        // A list object to store the parsed countries list
        List<HashMap<String, Object>> countries = null;

        try{
            // Getting the parsed data as a List construct
            countries = countryJsonParser.parse(jObject);
        }catch(Exception e){
            Log.d("Exception",e.toString());
        }

        // Keys used in Hashmap
        String[] from = { "frame","photo"};

        // Ids of views in listview_layout
        int[] to = { R.id.iv_frame,R.id.iv_photo};

        // Instantiating an adapter to store each items
        // R.layout.listview_layout defines the layout of each item
        SimpleAdapter adapter = new SimpleAdapter(getBaseContext(), countries, R.layout.lv_layout, from, to);
        return adapter;
    }

    /** Invoked by the Android on "doInBackground" is executed */
    protected void onPostExecute(SimpleAdapter adapter) {

        // Setting adapter for the listview
        gridView.setAdapter(adapter);

        for(int i=0;i<adapter.getCount();i++){
            HashMap<String, Object> hm = (HashMap<String, Object>) adapter.getItem(i);
            String frameUrl = (String) hm.get("frame_path");
            String imgUrl = (String) hm.get("photo_path");
            ImageLoaderTask imageLoaderTask = new ImageLoaderTask();

            HashMap<String, Object> hmDownload = new HashMap<String, Object>();
            hm.put("frame_path", frameUrl);
            hm.put("photo_path",imgUrl);
            hm.put("position", i);

            // Starting ImageLoaderTask to download and populate image in the listview
            imageLoaderTask.execute(hm);
        }
    }
} 

    /** AsyncTask to download and load an image in ListView */
    private class ImageLoaderTask extends AsyncTask<HashMap<String, Object>, Void, HashMap<String, Object>>{

        @Override
        protected HashMap<String, Object> doInBackground(HashMap<String, Object>... hm) {

            InputStream iStream = null;
            String imgUrl;
            String frameUrl;
            imgUrl = (String) hm[0].get("photo_path");
            frameUrl = (String) hm[0].get("frame_path");
            int position = (Integer) hm[0].get("position");

            URL url;
            URL urlFrame;
            try {
                url = new URL(imgUrl);
                urlFrame = new URL(frameUrl);
                // Creating an http connection to communicate with url
                HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();

                // Connecting to url
                urlConnection.connect();

                // Reading data from url
                iStream = urlConnection.getInputStream();

                // Getting Caching directory
                File cacheDirectory = getBaseContext().getCacheDir();

                // Temporary file to store the downloaded image
                File tmpFile = new File(cacheDirectory.getPath() + "/wpta_"+ position + ".png");

                // The FileOutputStream to the temporary file
                FileOutputStream fOutStream = new FileOutputStream(tmpFile);

                // Creating a bitmap from the downloaded inputstream
                Bitmap b = BitmapFactory.decodeStream(iStream);

                // Writing the bitmap to the temporary file as png file
                b.compress(Bitmap.CompressFormat.PNG, 100, fOutStream);

                // Flush the FileOutputStream
                fOutStream.flush();

                // Close the FileOutputStream
                fOutStream.close();

                // Create a hashmap object to store image path and its position in the listview
                HashMap<String, Object> hmBitmap = new HashMap<String, Object>();

                // Storing the path to the temporary image file
                hmBitmap.put("photo", tmpFile.getPath());
                hmBitmap.put("frame", tmpFile.getPath());

                // Storing the position of the image in the listview
                hmBitmap.put("position", position);

                // Returning the HashMap object containing the image path and position
                return hmBitmap;
            } catch (MalformedURLException e) {
                return null;
            } catch (FileNotFoundException e) {
                return null;
            } catch (IOException e) {
                return null;
            }
        }

    @Override
    protected void onPostExecute(HashMap<String, Object> result) {
        // Getting the path to the downloaded image
        String path = (String) result.get("photo");
        String framePath = (String) result.get("frame");
        // Getting the position of the downloaded image
        int position = (Integer) result.get("position");

        // Getting adapter of the listview
        SimpleAdapter adapter = (SimpleAdapter ) gridView.getAdapter();

        // Getting the hashmap object at the specified position of the listview
        HashMap<String, Object> hm = (HashMap<String, Object>) adapter.getItem(position);

        // Overwriting the existing path in the adapter
        hm.put("photo",path);
        hm.put("frame", framePath);
        // Noticing listview about the dataset changes
        adapter.notifyDataSetChanged();
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T09:56:23.917

尝试使用智能图像视图。它负责从 HTTP URI 下载图像并缓存图像。以下是有关智能图像视图的更多详细信息：

[http://loopj.com/android-smart-image-view/](http://loopj.com/android-smart-image-view/)

[https://github.com/loopj/android-smart-image-view](https://github.com/loopj/android-smart-image-view)

# python - 内部列表中的第一项尽可能有效

> ID：13084619
> 
> 赞同：7
> 
> 时间：2012-10-26T09:50:22.317
> 
> 标签：python, list, optimization, performance

我在 python 中有一个协调的存储列表， `A[row,col,value]`用于存储非零值。

如何获取所有行索引的列表？我希望这`A[0:][0]`可以`print A[0:]`打印整个列表，但`print A[0:][0]`只打印`A[0]`.

我问的原因是为了有效计算每行中非零值的数量，*即*迭代`range(0,n)`其中 n 是总行数。这应该比我目前的方式*便宜*`for i in range(0,n): for j in A: ...`得多。

就像是：

```
c = []
# for the total number of rows
for i in range(0,n):
     # get number of rows with only one entry in coordinate storage list
     if A[0:][0].count(i) == 1: c.append(i)                
return c 
```

超过：

```
c = []
# for the total number of rows 
for i in range(0,n):
    # get the index and initialize the count to 0 
    c.append([i,0])
    # for every entry in coordinate storage list 
    for j in A:
        # if row index (A[:][0]) is equal to current row i, increment count  
        if j[0] == i:
           c[i][1]+=1
return c 
```

**编辑：**

使用 Junuxx 的答案、[这个问题](https://stackoverflow.com/questions/2600191/how-to-calculate-the-occurrences-of-a-list-item-in-python)和[这篇文章](http://www.daniweb.com/software-development/python/code/217019/search-a-python-dictionary-both-ways)，我想出了以下内容*（用于返回单例行的数量）*`A` ，这对于我当前的问题大小来说比我最初的尝试要快得多。然而，它仍然随着行数和列数的增加而增长。我想知道是否有可能不必迭代`A`而只是 upto `n`？

```
# get total list of row indexes from coordinate storage list
row_indexes = [i[0] for i in A]
# create dictionary {index:count}
c = Counter(row_indexes)    
# return only value where count == 1 
return [c[0] for c in c.items() if c[1] == 1] 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-26T09:52:04.263

这应该这样做：

```
c = [x[0] for x in A] 
```

这是一个列表推导式，它采用`A`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-26T11:14:15.533

对于效率和扩展切片，您可以使用`numpy`- 鉴于您的示例，这似乎是一个好主意：

```
import numpy as np
yourlist = [
    [0, 0, 0],
    [0, 1, 1],
    [1, 0, 2]
]
a = np.array(yourlist)
print a[:,0]
# [0 0 1]
bc = np.bincount(a[:,0])
# array([2, 1])
count = bc[bc==1].size
# 1
# or... (I think it's probably better...)
count = np.count_nonzero(bc == 1) 
```

# database - Amazon AWS：多个实例，同一个数据库

> ID：13084622
> 
> 赞同：3
> 
> 时间：2012-10-26T09:50:25.107
> 
> 标签：database, amazon-s3, amazon-web-services, webserver, amazon-ebs

在 Amazon AWS 设置中，两个克隆实例（位于不同区域）如何引用和共享相同的“基本”动态 Web 服务器文件并从同一个主数据库读取/写入？

我们当前的 AMI 实例现在位于 EBS 支持的卷上。但是，显然尝试在两个实例之间共享 EBS 卷是一个坏主意。**[我从这个 2009 年的旧答案](https://stackoverflow.com/questions/841240/can-you-attach-amazon-ebs-to-multiple-instances)**中收集了很多信息，但它并没有分解除 Amazon S3 之外的其他替代方案。还是 S3 是唯一的选择？OP 的推理在 3 年后仍然有效吗？我们有哪些存储选项可以让多个实例实时共享数据库数据？

> > 如果您想要共享数据，您可以设置所有实例都可以访问的服务器。如果您希望为所有实例提供一个简单的存储区域，您可以使用 Amazon 的 S3 存储服务来存储分布式和可扩展的数据。
> > 
> > 迁移到云端，您可以拥有完全相同的设置，但您可以将文件服务器替换为 S3，或者让所有实例都连接到文件服务器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T17:50:20.050

确认：您想在两个实例之间共享 a) 相同的数据库和 b) 相同的文件，每个实例位于不同的区域（不是不同的可用区）？

跨多个区域共享同一个数据库并不容易。您最好的选择是异步、多主复制或手动分片策略。但是，要安全有效地执行任何这些操作，必须仔细规划，并且在编写应用程序时必须牢记这种架构。 [本文](http://scale-out-blog.blogspot.com/2012/04/if-you-must-deploy-multi-master.html)将为您提供与 MySQL 的多主复制相关的注意事项的一个很好的概述。

跨区域共享文件也可能有点挑战，因为您有很多选择，但通常比使用 SQL 数据库更容易。变量包括：

*   多少复制延迟是可以接受的？
*   你要写信到这两个地方吗？
*   您在本地需要什么样的 I/O 性能？
*   文件多久更改一次？

[对于大多数用例来说， GlusterFS](http://www.gluster.org/)通常是一个很好的折衷方案。然而，就在昨天，AWS 宣布了一项[允许跨区域复制 EBS 快照](http://aws.typepad.com/aws/2012/12/ebs-snapshot-copy.html)的新功能。根据您的需要，这也可能值得研究。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T17:59:23.980

如果您有一个 EBS 支持的 AMI，那么每个服务器实例都将拥有自己的 EBS 卷数据“副本”，这些数据存储在 AMI 中，它们不会共享完全相同的物理卷。这与您使用实例存储 AMI 然后将特定 EBS 卷安装到每个实例的情况不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-24T19:02:30.030

第 1 点）GlusterFS 是多可用区和多区域复制的不错选择。在跨区域复制期间会有一定的复制延迟，请在您的架构中注意这一点

第 2 点）如果您的 EBS 快照大小较小并且您可以适应几个小时的复制延迟，您可以使用 Amazon EBS 快照复制功能。但这需要在目标区域上努力分离/附加卷。

第 3 点）S3 仍然是这个用例的一个选项

# android - 如何将 cocos2d-2.0-x-2.0.3 中的 CCBReader 用于 Android 项目？

> ID：13084623
> 
> 赞同：0
> 
> 时间：2012-10-26T09:50:25.633
> 
> 标签：android, cocos2d-iphone

我很想开始在 Cocos2D-X 平台上工作。但是，我无法弄清楚如何在 cocos2d-2.0-x-2.0.3 中使用 CCBReader。任何想法？

我尝试使用

```
using namespace cocos2d::extension; 
```

或者

```
USING_NS_CC_EXT; 
```

但它给出了编译错误

**错误：“USING_NS_CC_EXT”没有命名类型**

**错误：“扩展”不是命名空间名称**

任何帮助，将不胜感激。

谢谢！码斯诺克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:25:04.090

只需使用

`using namespace extension;`

希望它会有所帮助:)

# asp.net - 如何使用 asp.net vb 代码调用存储过程

> ID：13084624
> 
> 赞同：1
> 
> 时间：2012-10-26T09:50:29.043
> 
> 标签：asp.net

我有一个名为 dissumbio 的存储过程，这将返回一些值

现在我想在我的 asp.net 程序中调用它，返回值应该显示在我的文本框中

我的代码如下

```
Dim admdate As String

admdate = Mid(txtadmdate.Text, 4, 2) + "/" + Left(txtadmdate.Text, 2) + "/20" + Right(txtadmdate.Text, 2)

Dim cmd As New SqlCommand
cmd.CommandType = CommandType.StoredProcedure
cmd.Parameters.AddWithValue("@strId", txthospno.Text)
cmd.Parameters.AddWithValue("@strfromdate", admdate)

cmd.Connection = sqlConn2
cmd.CommandType = CommandType.Text
cmd.ExecuteNonQuery() 
```

这是arjent，请帮忙

提前致谢

舒巴

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T10:00:02.870

ExecuteNonQuery 将只重新运行受影响的行数......所以在你的情况下，如果你的存储过程返回一个值，你必须使用`

```
Dim cmd As New SqlCommand
cmd.CommandType = CommandType.StoredProcedure
cmd.Parameters.AddWithValue("@strId", txthospno.Text)
cmd.Parameters.AddWithValue("@strfromdate", admdate)

cmd.Connection = sqlConn2
sqlConn2.Open()
value= Convert.ToInt32(cmd.ExecuteScalar()) 
```

`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T09:59:30.560

如果您需要检索数据，您应该使用[ExecuteReader](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executereader%28v=vs.71%29.aspx)而不是`ExecuteNonQuery`

请看这篇关于 [执行返回行的存储过程的文章](http://msdn.microsoft.com/en-us/library/d7125bke.aspx#Y1824)

```
Dim sqlConnection1 As New SqlConnection("Your Connection String")
Dim cmd As New SqlCommand
Dim reader As SqlDataReader

cmd.CommandText = "StoredProcedureName"
cmd.CommandType = CommandType.StoredProcedure
cmd.Connection = sqlConnection1

sqlConnection1.Open()

reader = cmd.ExecuteReader()
' Data is accessible through the DataReader object here.

sqlConnection1.Close() 
```

# c# - 在 WP7 应用程序中评价应用程序

> ID：13084625
> 
> 赞同：0
> 
> 时间：2012-10-26T09:50:33.253
> 
> 标签：c#, silverlight, windows-phone-7, rate

> **可能重复：**
> [有没有办法检查用户是否真的评价了你的应用程序？](https://stackoverflow.com/questions/8290199/is-there-a-way-to-check-if-a-user-has-really-rated-your-app)

我打算使用唠叨屏幕来给 [我的应用](http://www.windowsphone.com/en-us/store/app/boxit/9196aedf-ef36-41fe-80e5-744b2a86d59e)评分。用户可以使用`MarketplaceReviewTask`. 但是如何知道用户是否对应用程序进行了评分，以便我可以停止显示 nag 屏幕。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T13:11:16.287

用户将在审核后自动返回您的应用。

# ruby-on-rails - git push heroku master - 无法将我的网站推送到 heroku

> ID：13084626
> 
> 赞同：1
> 
> 时间：2012-10-26T09:50:49.900
> 
> 标签：ruby-on-rails, ruby, heroku

我无法将我的网站推送到heroku。日志是亲爱的

```
Counting objects: 94, done.
Compressing objects: 100% (78/78), done.
Writing objects: 100% (94/94), 115.53 KiB, done.
Total 94 (delta 7), reused 0 (delta 0)

-----> Heroku receiving push
-----> Ruby/Rails app detected
-----> Installing dependencies using Bundler version 1.2.1
       Running: bundle install --without development:test --path vendor/bundle --binstubs bin/ --deployment
       Fetching gem metadata from .........
       Fetching gem metadata from ..
       Installing rake (0.9.2.2)
       Installing i18n (0.6.1)
       Installing multi_json (1.3.6)
       Installing activesupport (3.2.8)
       Installing builder (3.0.4)
       Installing activemodel (3.2.8)
       Installing erubis (2.7.0)
       Installing journey (1.0.4)
       Installing rack (1.4.1)
       Installing rack-cache (1.2)
       Installing rack-test (0.6.2)
       Installing hike (1.2.1)
       Installing tilt (1.3.3)
       Installing sprockets (2.1.3)
       Installing actionpack (3.2.8)
       Installing mime-types (1.19)
       Installing polyglot (0.3.3)
       Installing treetop (1.4.11)
       Installing mail (2.4.4)
       Installing actionmailer (3.2.8)
       Installing arel (3.0.2)
       Installing tzinfo (0.3.33)
       Installing activerecord (3.2.8)
       Installing activeresource (3.2.8)
       Installing coffee-script-source (1.4.0)
       Installing execjs (1.4.0)
       Installing coffee-script (2.2.0)
       Installing rack-ssl (1.3.2)
       Installing json (1.7.5) with native extensions
       Installing rdoc (3.12)
       Installing thor (0.16.0)

       Installing railties (3.2.8)
       Installing coffee-rails (3.2.2)
       Installing jquery-rails (2.1.3)
       Using bundler (1.2.1)
       Installing rails (3.2.8)
       Installing sass (3.2.1)
       Installing sass-rails (3.2.5)
       Installing sqlite3 (1.3.6) with native extensions 
```

第一个错误

```
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.
       /usr/local/bin/ruby extconf.rb
       checking for sqlite3.h... no
       sqlite3.h is missing. Try 'port install sqlite3 +universal'
       or 'yum install sqlite-devel' and check your shared library search path (the
       location where your sqlite3 shared library is located).
       *** extconf.rb failed ***
       Could not create Makefile due to some reason, probably lack of
       necessary libraries and/or headers.  Check the mkmf.log file for more
       details.  You may need configuration options.
       Provided configuration options:
       --with-opt-dir
       --without-opt-dir
       --with-opt-include
       --without-opt-include=${opt-dir}/include
       --with-opt-lib
       --without-opt-lib=${opt-dir}/lib
       --with-make-prog
       --without-make-prog
       --srcdir=.
       --curdir
       --ruby=/usr/local/bin/ruby
       --with-sqlite3-dir
       --without-sqlite3-dir
       --with-sqlite3-include
       --without-sqlite3-include=${sqlite3-dir}/include
       --with-sqlite3-lib
       --without-sqlite3-lib=${sqlite3-dir}/lib
       --enable-local 
```

在这个块错误

```
 --disable-local
       Gem files will remain installed in /tmp/build_2tmilsljpykpx/vendor/bundle/ruby/1.9.1/gems/sqlite3-1.3.6 for inspection.
       Results logged to /tmp/build_2tmilsljpykpx/vendor/bundle/ruby/1.9.1/gems/sqlite3-1.3.6/ext/sqlite3/gem_make.out
       An error occurred while installing sqlite3 (1.3.6), and Bundler cannot continue.
       Make sure that `gem install sqlite3 -v '1.3.6'` succeeds before bundling.
 !
 !     Failed to install gems via Bundler.
 !     
 !     Detected sqlite3 gem which is not supported on Heroku.
 !     http://devcenter.heroku.com/articles/how-do-i-use-sqlite3-for-development
 !
 !     Heroku push rejected, failed to compile Ruby/rails app

To git@heroku.com:afternoon-shelf-6957.git
 ! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:afternoon-shelf-6957.git' 
```

对不起这个部分 哎呀！您的问题无法提交，因为：您的帖子没有太多上下文来解释代码部分；请更清楚地解释您的情况。哎呀！您的问题无法提交，因为：您的帖子没有太多上下文来解释代码部分；请更清楚地解释您的情况。哎呀！您的问题无法提交，因为：您的帖子没有太多上下文来解释代码部分；请更清楚地解释您的情况。哎呀！您的问题无法提交，因为：您的帖子没有太多上下文来解释代码部分；请更清楚地解释您的情况。

```
$ sudo bundle install

Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

        /usr/bin/ruby1.8 extconf.rb 
checking for pg_config... no
No pg_config... trying anyway. If building fails, please try again with
 --with-pg-config=/path/to/pg_config
checking for libpq-fe.h... no
Can't find the 'libpq-fe.h header
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --without-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/usr/bin/ruby1.8
    --with-pg
    --without-pg
    --with-pg-dir
    --without-pg-dir
    --with-pg-include
    --without-pg-include=${pg-dir}/include
    --with-pg-lib
    --without-pg-lib=${pg-dir}/lib
    --with-pg-config
    --without-pg-config
    --with-pg_config
    --without-pg_config

Gem files will remain installed in /var/lib/gems/1.8/gems/pg-0.14.1 for inspection.
Results logged to /var/lib/gems/1.8/gems/pg-0.14.1/ext/gem_make.out
An error occurred while installing pg (0.14.1), and Bundler cannot continue.
Make sure that `gem install pg -v '0.14.1'` succeeds before bundling. 
```

宝石文件

```
source 'https://rubygems.org'

#gem 'rails', '3.0.9'

#gem 'sqlite3', '1.3.6', :group => :development

gem 'rails', '3.2.8'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'sqlite3'

gem 'json'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

group :production do
  gem 'pg'
end
group :development do
  gem 'sqlite3'
end

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'ruby-debug' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T09:56:40.940

heroku 工作`pg`，你正在使用 sqlite3，所以错误来了

试试这个并添加到你的 gem 文件中

```
group :production do
 gem 'pg'
end
group :development do
  # whatever you use - mysql or any other
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T10:00:12.000

Heroku 不支持 SQLite 数据库——如果你想使用 Heroku，你应该切换到使用 Postgresql。

在你**Gemfile**替换

```
 gem 'sqlite3' 
```

和

```
 gem 'pg' 
```

您可能还需要在本地安装 Postgresql 以进行开发。访问[www.postgresql.org](http://www.postgresql.org)获取相关帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T10:00:12.483

Heroku 使用 PostgreSQL，不支持其他数据库，包括 sqlite3。

他们有在本地设置 PostgreSQL 的指南：

[https://devcenter.heroku.com/articles/local-postgresql](https://devcenter.heroku.com/articles/local-postgresql)

# javascript - 挑战 JavaScript 中的向量数学

> ID：13084629
> 
> 赞同：12
> 
> 时间：2012-10-26T09:50:55.637
> 
> 标签：javascript, math, vector, raphael

我有一个有趣的开发/数学问题，我无法解决。

**请参见下图。**

![最终结果](../Images/f19a8a8069d7cc10d6ace456892dc690.png)

我有两个圆点；一大一小。

我想要：

*   从外圈中的任何给定点到内圈中的任何给定点画一条线（完成）
*   线条应该是弧线，并且不应该越过内圈的边界或外圈的边界。（我需要你的帮助！）

### 小提琴！

我创建了一个用 RaphaelJS 编写的 jsFiddle，我在其中创建点并在它们之间画线。见这里，[http://jsfiddle.net/KATT/xZVnx/9/](http://jsfiddle.net/KATT/xZVnx/9/)。

它基本上在`drawLine`我需要你的帮助的功能中，以便绘制一个漂亮的弧线，而不是一条直线。

我还添加了一些用于处理向量的助手 se `MathHelpers.Vector`。

请继续分叉，并尝试实施一个解决方案，使线路弯曲。使用实际上看起来不错的 Béziers 的解决方案也非常受欢迎。

是的，我猜矢量几何最适合计算。

非常，非常，**非常**感谢任何帮助。我花了很多时间试图解决它，但我生疏的高中数学技能还不够。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T10:23:07.037

简单地从绘制一个分段的螺旋线开始。

螺旋半径从起始角到结束角，螺旋半径从内圆半径到外圆半径。

为了让您了解我的意思，请选择若干件 (n)

```
var n = 20, // The number of lines in the spiral
    rStep = (outerRadius - innerRadius)/n, // the radius increase between points
    aStep = (outerAngle - innerAngle)/n,  // the angle change between points
    points = [];

// compute the cartesian coordinates (x, y) from polar coordinates (r, a)
function cartesian(r, a) {
    return [
        r * Math.cos(a),
        r * Math.sin(a)
    ];
}

for (i = 0; i <= n; i += 1) {
   points.push(cartesian(innerRadius + (i * rStep), innerAngle + (i * aStep));
} 
```

* * *

我已经使用极坐标演示了一个基本的分段螺旋：

[http://jsfiddle.net/xmDx8/](http://jsfiddle.net/xmDx8/)

尝试更改 n 以查看碎片如何构建。

```
drawLine(innerCircleIndex, outerCircleIndex, 1); // This is what you did

drawLine(innerCircleIndex, outerCircleIndex, 100); // 100 lines in the example

drawLine(innerCircleIndex, outerCircleIndex, n); // Choose n to see how it grows 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T12:05:05.617

[一种选择](http://jsfiddle.net/xZVnx/42/)是使用椭圆弧。这看起来不太棒，但满足了约束，我认为可以通过仔细选择圆半径来改进它（这里我使用了一个固定的）。

```
var angleDiff = MathHelpers.getAngleInCircle(innerCircleIndex, numberOfDotsInInnerCircle) - MathHelpers.getAngleInCircle(outerCircleIndex, numberOfDotsInOuterCircle);
while (angleDiff > Math.PI) {
    angleDiff -= 2 * Math.PI;
}
while (angleDiff < -Math.PI) {
    angleDiff += 2 * Math.PI;
}

from = addOffsetAndRound(from);
to = addOffsetAndRound(to);
r = (0.5 * innerCircleRadius + 0.5 * outerCircleRadius);

var pathStr = "";
pathStr += "M" + [from.x, from.y].join(' '); // MOVE to
pathStr += "A" + [r, r, 0, 0, angleDiff >= 0 ? 1 : 0, to.x, to.y].join(' '); // Draw line to
var path = paper.path(pathStr); 
```

PS 当然，应该记住，真正的螺旋不是椭圆弧。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T18:55:22.303

如果你真的想避免花哨的数学，你可以使用一系列简单的线段来近似螺旋线，除了连接的两个点的坐标以及它们各自相对于原点的角度或原点坐标（显然可以从另一个推断出一个）。给定 (ix,iy,i_angle) 描述内部点的坐标和相对角度， (ox,oy,o_angle) 描述外部点的坐标和相对角度，

```
 var generatePath = function( ix, iy, i_angle, ox, oy, o_angle )
        {
            var path = [ "M", ox, oy ];
            var slices = 100;

            var cur_angle = o_angle;
            var cur_r = cr_outer;
            var delta_r = ( cr_inner - cr_outer ) / slices;
            var delta_angle = ( i_angle - o_angle );
            if ( delta_angle > Math.PI )
                delta_angle -= Math.PI * 2;
            else if ( delta_angle < Math.PI * -1 )
                delta_angle += Math.PI * 2;
            delta_angle = delta_angle / slices;

            for ( var i = 0; i < slices; i++ )
            {
                cur_angle += delta_angle;
                cur_r += delta_r;
                path.push( "L", cx + Math.cos( cur_angle ) * cur_r, cy + Math.sin( cur_angle ) * cur_r );
            }
            return path;
        } 
```

逻辑非常简单，即使在高分辨率下也看起来不错，并且可能比“真正的”弧段或二次贝塞尔曲线系列更高效。每段的切片数量可能会根据长度和大小进行调整，以平衡性能和美观。

我有这个功能（带有控制点计算）在[这里](http://voidblossom.com/tests/approximate-spiral.php)上演。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T10:28:53.943

尝试一种没有花哨数学的方法：

*   找到在要连接的点之间的中间点的外点和内点。
*   找到由这些中间点形成的线段的中间。

画出经过这一点的曲线。

# iphone - UITableView [self.navigationController pushViewController:Page1 动画:YES]; 方法不起作用

> ID：13084630
> 
> 赞同：0
> 
> 时间：2012-10-26T09:51:06.340
> 
> 标签：iphone, uitableview, pushviewcontroller, addsubview

那么这是我的方法：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath    *)indexPath
{
if (indexPath.row == 0 && indexPath.section == 0){
    [self.navigationController pushViewController:Page1 animated:YES];
}
if (indexPath.row == 1 && indexPath.section == 0){
    [self.view addSubview:Page2.view];  
} 
```

好吧，我改变了方法

```
[self.view addSubview:Page1.view]; //this works perfectly however as soon as I change to this
[self.navigationController pushViewController:Page1 animated:YES];// this does not work 
```

正在调用该方法，我在之前和之后添加了 NSLog，并且两者都被调用了。但是，当调用此方法时，只会使单元格变为蓝色（但是 addSubview 和 pushViewController 方法都会发生这种情况）我推送的视图只是一个普通的 UIView。我可以添加我需要的视图，但它们不是动画的（因为我使用的是 addSubview 方法）

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T10:01:16.177

我猜您的导航控制器设置不正确，您可以在 appdelegate.m 文件中的 didFinishLaunchingWithOptions 方法中实现此功能

```
self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];

self.navController = [[UINavigationController alloc] initWithRootViewController:self.viewController];

[self.navController.navigationBar setBarStyle:UIBarStyleBlack];

[self.window addSubview:self.navController.view]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T12:32:34.917

因为，用户编辑问题，所以我再次给出答案。如果你想要带有 NavigationController 的 tabBar

在 AppDelegate.h 中定义生成`UINavigationController *navController;`属性并在 appDelegate.m 中进行综合。

在 AppDelegate.m 中导入所有 ViewController 类

喜欢

```
#import "ViewController.h"
#import "Preview.h"
#import "Export.h"
#import "Settings.h"
#import "More.h"

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
// Override point for customization after application launch.

tabBarController = [[UITabBarController alloc] init];
tabBarController.delegate=self;

//Adding Search,Nearby,Map,AboutUs,Favorites Tabs to tabBarController
ViewController * search = [[ViewController alloc] init];
UINavigationController *searchNav = [[UINavigationController alloc]        initWithRootViewController:search];

Preview* nearby = [[Preview alloc] init];
UINavigationController *nearbyNav = [[UINavigationController alloc] initWithRootViewController:nearby];

Export* map = [[Export alloc] init];
UINavigationController *mapNav = [[UINavigationController alloc] initWithRootViewController:map];

Settings* aboutUs = [[Settings alloc] init];
UINavigationController *aboutUsNav = [[UINavigationController alloc] initWithRootViewController:aboutUs];

More* favorites = [[More alloc] init];
UINavigationController *favoritesNav = [[UINavigationController alloc] initWithRootViewController:favorites];

NSArray* controllers = [NSArray arrayWithObjects:searchNav,nearbyNav,mapNav,aboutUsNav,favoritesNav, nil];

tabBarController.viewControllers = controllers;

[self.window addSubview:tabBarController.view];

//  self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
//  self.window.rootViewController = self.viewController;
[self.window makeKeyAndVisible];
return YES;

} 
```

可能对你有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T10:10:51.657

更好的设置`navController`为：`rootViewController``window`

```
self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
self.navController = [[UINavigationController alloc] initWithRootViewController:self.viewController];
[self.navController.navigationBar setBarStyle:UIBarStyleBlack];

self.window.rootViewController = self.navController; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T07:10:25.500

viewController page1，当您添加到时，`self.view` 它如何在您推动时获得动画，因为它已经在视图的顶部

```
[self.view addSubview:Page1.view]; //this works perfectly however as soon as I change to this
[self.navigationController pushViewController:Page1 animated:YES];// this does not work 
```

希望有帮助

# google-maps - 谷歌地图：鼠标悬停时打开信息窗口，点击时关闭并重新打开

> ID：13084631
> 
> 赞同：7
> 
> 时间：2012-10-26T09:51:09.473
> 
> 标签：google-maps, google-maps-api-3, mouseover, infowindow

我有一个带有 InfoWindows 标记的页面，我在 Click 上打开了该页面。我决定在 MouseOver 上打开正在工作的 InfoWindows。

但是我发现必须将鼠标移动到 InfoWindow 的十字路口才能关闭它，这对于这些懒惰的互联网访问者来说有点苛刻。所以我在 Marker 的 Click 上添加了一个 Close 事件，该事件也有效。

我无法弄清楚的是能够在标记单击时**重新打开**信息窗口，而不必为了能够重新将鼠标悬停在标记上而必须鼠标悬停。

我的代码：

```
google.maps.event.addListener(CalMarker, 'mouseover', function() {
    infowindow.setContent(contentStringCal);
    infowindow.open(map,CalMarker);
});
google.maps.event.addListener(CalMarker, 'click', function() {
    infowindow.close(map,CalMarker);
}); 
```

任何人都可以通过单击标记帮助我重新打开窗口吗？

提前致谢

PS：不能在帖子开头说“嗨”，这很奇怪。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-26T11:07:19.390

尝试这个：

```
google.maps.event.addListener(CalMarker, 'mouseover', function() {
    //open the infowindow when it's not open yet
    if(contentStringCal!=infowindow.getContent())
    {
      infowindow.setContent(contentStringCal);
      infowindow.open(map,CalMarker);
    }
});

google.maps.event.addListener(CalMarker, 'click', function() {
    //when the infowindow is open, close it an clear the contents
    if(contentStringCal==infowindow.getContent())
    {
      infowindow.close(map,CalMarker);
      infowindow.setContent('');
    }
    //otherwise trigger mouseover to open the infowindow
    else
    {
      google.maps.event.trigger(CalMarker, 'mouseover');
    }
});

//clear the contents of the infwindow on closeclick
google.maps.event.addListener(infowindow, 'closeclick', function() {
      infowindow.setContent('');
}); 
```

演示：http: [**//jsfiddle.net/doktormolle/JXqLa/**](http://jsfiddle.net/doktormolle/JXqLa/)

# objective-c - 使用任何库从 HTML 生成 PDF 文件

> ID：13084639
> 
> 赞同：2
> 
> 时间：2012-10-26T09:51:39.707
> 
> 标签：objective-c, cocoa-touch, wkhtmltopdf, html-to-pdf

我知道我们可以通过在 web 视图中加载 html 文件和

拍摄它的屏幕截图，然后从中生成pdf。我想知道，有没有

任何第三方内置库来完成我的任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T10:58:25.567

从 UIWebView 生成 PDF 的问题在于，您几乎无法控制 PDF 中显示的细节。例如，分页是一种痛苦，有时会有 UI 元素可见，例如滚动视图末尾的阴影。

我已经尝试过了，但无法获得可接受的结果。我建议您使用 Core Graphics 方法来构建您自己的 PDF。

# asp.net-mvc - 通过带有 SignalR 的 StructureMap 的选择性 IPrincipal 注入

> ID：13084648
> 
> 赞同：2
> 
> 时间：2012-10-26T09:52:12.033
> 
> 标签：asp.net-mvc, dependency-injection, structuremap, signalr, iprincipal

StructureMap 配置为在任何 ASP.NET MVC Web 请求被请求`HttpContext.Current.User`时注入，如下所示：`IPrincipal`

```
For<IPrincipal>().Use(x => HttpContext.Current.User); 
```

但是，当我的 SignalR 集线器请求依赖于 的服务时`IPrincipal`，注入失败，因为`HttpContext.Current`它为空。相反，SignalR 已经有一个`HubCallerContext`公开当前`IPrincipal`via的属性`Context.User`。

如何将 StructureMap 配置为始终`IPrincipal`向 SignalR 集线器所依赖的服务注入有效值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T10:01:45.163

只需这样做：

```
For<IPrincipal>().Use(x => Thread.CurrentPrincipal); 
```

# tabs - 如何在 sublime text 2 中显示文件选项卡

> ID：13084650
> 
> 赞同：1
> 
> 时间：2012-10-26T09:52:30.117
> 
> 标签：tabs, sublimetext2

不久前我安装了 sublime text 2，但当时没有购买。我现在已经买了它（并且喜欢它！）但似乎当我第一次检查它时，我以某种方式禁用了文件选项卡，即选项卡没有显示在屏幕顶部。是否有可以更改的设置以显示文件选项卡？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-26T10:04:22.280

在 Sublime Text 2 中，您可以使用++`CTRL`快速访问某些功能。`SHIFT``P`

键入`tabs`，您将找到该`View: Toggle Tabs`功能。

# java - Java方法来查找年，月和日2个日期对象之间的差异

> ID：13084651
> 
> 赞同：3
> 
> 时间：2012-10-26T09:52:38.193
> 
> 标签：java

我有一个开始日期和结束日期。两个日期之间的持续时间应采用年、月和日的形式。我是java新手。当我运行以下方法时，我得到的结果是 0 年 12 个月 1 天。请提出一个替代方案，以获得年、月和日的准确差异。

```
import java.sql.Date;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.*;

public class Duration {

    private String getAssignmentDuration(java.util.Date oldDate, java.util.Date newDate) {
        Calendar c1 = Calendar.getInstance();
        Calendar c2 = Calendar.getInstance();
        if (oldDate.compareTo(newDate) > 0) {
            c1.setTime(newDate);
            c2.setTime(oldDate);
        } else {
            System.out.println("invalid");
            return "Invalid selection";

        }
        int year = 0;
        int month = 0;
        int days = 0;
        boolean doneMonth = false;
        boolean doneYears = false;
        while (c1.before(c2)) {
            //log.debug("Still in Loop");
            if (!doneYears) {
                c1.add(Calendar.YEAR, 1);
                year++;
            }
            if (c1.after(c2) || doneYears) {
                if (!doneYears) {
                    doneYears = true;
                    year--;
                    c1.add(Calendar.YEAR, -1);
                }   
                if (!doneMonth) {
                    c1.add(Calendar.MONTH, 1);
                    month++;
                }
                if (c1.after(c2) || doneMonth) {
                    if (!doneMonth) {
                        doneMonth = true;
                        month--;
                        c1.add(Calendar.MONTH, -1);
                    }

                    c1.add(Calendar.DATE, 1);
                    days++;
                    if (c1.after(c2)) {
                        days--;
                    }
                    // this will not be executed
                    if (days == 31 || month==12) {
                        break;
                    }
                }
            }
        }
        System.out.println(year + " years, " + month + " months, " + days + " days");
        return year + " years, " + month + " months, " + days + " days";

    }

    public static void main(String[] args) {
        Duration d1= new Duration();
        SimpleDateFormat sdf = new SimpleDateFormat("yyyy/MM/dd");
        java.util.Date oldDate = null;
        try {
            oldDate = sdf.parse("2012/08/29");
        } catch (ParseException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        java.util.Date newDate = null;
        try {
            newDate = sdf.parse("2013/08/31");
        } catch (ParseException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        d1.getAssignmentDuration(oldDate, newDate);
    }

} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-08-01T06:31:49.040

```
 public static String getDateDifferenceInDDMMYYYY(Date from, Date to) {
        Calendar fromDate=Calendar.getInstance();
        Calendar toDate=Calendar.getInstance();
        fromDate.setTime(from);
        toDate.setTime(to);
        int increment = 0;
        int year,month,day;
        System.out.println(fromDate.getActualMaximum(Calendar.DAY_OF_MONTH));
        if (fromDate.get(Calendar.DAY_OF_MONTH) > toDate.get(Calendar.DAY_OF_MONTH)) {
            increment =fromDate.getActualMaximum(Calendar.DAY_OF_MONTH);
        }
         System.out.println("increment"+increment);
// DAY CALCULATION
        if (increment != 0) {
            day = (toDate.get(Calendar.DAY_OF_MONTH) + increment) - fromDate.get(Calendar.DAY_OF_MONTH);
            increment = 1;
        } else {
            day = toDate.get(Calendar.DAY_OF_MONTH) - fromDate.get(Calendar.DAY_OF_MONTH);
        }

// MONTH CALCULATION
        if ((fromDate.get(Calendar.MONTH) + increment) > toDate.get(Calendar.MONTH)) {
            month = (toDate.get(Calendar.MONTH) + 12) - (fromDate.get(Calendar.MONTH) + increment);
            increment = 1;
        } else {
            month = (toDate.get(Calendar.MONTH)) - (fromDate.get(Calendar.MONTH) + increment);
            increment = 0;
        }

// YEAR CALCULATION
        year = toDate.get(Calendar.YEAR) - (fromDate.get(Calendar.YEAR) + increment);
     return   year+"\tYears\t\t"+month+"\tMonths\t\t"+day+"\tDays";
    }

    public static void main(String[] args) {
        Calendar calendar = Calendar.getInstance();
        calendar.set(1999,01,8);
       /*  Calendar calendar1 = Calendar.getInstance();
        calendar1.set(2012,01,23);*/
        System.out.println(getDateDifferenceInDDMMYYYY(calendar.getTime(),new Date()));
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-26T09:59:58.070

Joda Time 有一个可以使用的时间[间隔概念，例如：](http://joda-time.sourceforge.net/key_interval.html)

```
Interval interval = new Interval(oldDate.getTime(), newDate.getTime()); 
```

然后使用[Period](http://joda-time.sourceforge.net/key_period.html)对象，例如：

```
Period period = interval.toPeriod().normalizedStandard(PeriodType.yearMonthDay());

PeriodFormatter formatter = new PeriodFormatterBuilder()
            .appendYears()
            .appendSuffix(" year ", " years ")
            .appendSeparator(" and ")
            .appendMonths()
            .appendSuffix(" month ", " months ")
            .appendSeparator(" and ")
            .appendDays()
            .appendSuffix(" day ", " days ")
            .toFormatter();
System.out.println(formatter.print(period)); 
```

您将能够轻松地打印您在年和月内的差异。

可能您在发布问题时更改了某些内容，因为要修复您的代码（请注意，我没有测试您的代码是否适用于所有范围），您只需要正确初始化 Calendar 对象并反转无效选择检查：

```
Calendar c1 = Calendar.getInstance();
Calendar c2 = Calendar.getInstance();
if (oldDate.compareTo(newDate) < 0) {
    c2.setTime(newDate);
    c1.setTime(oldDate);
} else {
    System.out.println("invalid");
    return "Invalid selection";
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-05-05T03:12:38.473

# tl;dr

```
Period.between( 
    LocalDate.of( 2017 , Month.JANUARY , 23 ) , 
    LocalDate.of( 2017 , Month.MARCH , 27 ) 
) 
```

Call:

```
.getYears()
.getMonths()
.getDays() 
```

# Avoid legacy date-time classes

You are use troublesome old date-time classes, now legacy, supplanted by java.time classes.

# Using java.time

The [`LocalDate`](https://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html) class represents a date-only value without time-of-day and without time zone.

A time zone is crucial in determining a date. For any given moment, the date varies around the globe by zone. For example, a few minutes after midnight in [Paris France](https://en.wikipedia.org/wiki/Europe/Paris) is a new day while still “yesterday” in [Montréal Québec](https://en.wikipedia.org/wiki/America/Montreal).

Specify a [proper time zone name](https://en.wikipedia.org/wiki/List_of_tz_zones_by_name) in the format of `continent/region`, such as [`America/Montreal`](https://en.wikipedia.org/wiki/America/Montreal), [`Africa/Casablanca`](https://en.wikipedia.org/wiki/Africa/Casablanca), or `Pacific/Auckland`. Never use the 3-4 letter abbreviation such as `EST` or `IST` as they are *not* true time zones, not standardized, and not even unique(!).

```
ZoneId z = ZoneId.of( "America/Montreal" );
LocalDate today = LocalDate.now( z ); 
```

> today.toString(): 2017-05-05

For our example, we create another `LocalDate`.

```
LocalDate earlier = today.minusMonths( 2 ).minusWeeks( 3 ).minusDays( 2 ) ; 
```

> earlier.toString(): 2017-02-10

To represent a span of time unattached to the timeline in the granularity of years-month-days, use the [`Period`](https://docs.oracle.com/javase/8/docs/api/java/time/Period.html) class.

```
Period p = Period.between( earlier , today ) ;
int years = p.getYears();
int months = p.getMonths();
int days = p.getDays(); 
```

See [this code run live at IdeOne.com](http://ideone.com/MPQyOS).

# ISO 8601

The [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601) standard defines formats for textual representations of date-time values. For durations of years-months-days, the pattern is [`PnYnMnDTnHnMnS`](https://en.wikipedia.org/wiki/ISO_8601#Durations) where `P` marks the beginning and `T` separates the years-months-days portion from the hours-minutes-seconds portion.

The java.time classes use the standard formats by default when parsing/generating strings. The `Period` class generates this particular pattern in its `toString` method.

```
String output = p.toString() ; 
```

> p.toString(): P2M25D

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-17T20:56:02.420

假设你有`Date date1, date2`并且它们在哪里被初始化`date1>date2`。

```
long diff = date1.getTime() - date2.getTime(); //this is going to give you the difference in milliseconds

Date result = new Date(diff);
Format frmt = new SimpleDateFormat("yy MM dd HH:mm:ss");
return frmt.format(result).toString();//or if you want system.out.println(...); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-17T19:20:16.603

```
 long diff = today.getTimeInMillis() - birth.getTimeInMillis();

    // Calculate difference in seconds
    long Seconds = diff / 1000;

    // Calculate difference in minutes
    long Minutes = diff / (60 * 1000);

    // Calculate difference in hours
    long Hours = diff / (60 * 60 * 1000);

    // Calculate difference in days
    long Days = diff / (24 * 60 * 60 * 1000);

    long Months = diff / (24 * 60 * 60 * 12 * 1000);

    //lblTsec, lblTmint, lblthours,lblTdays;
    System.out.println("Seconds : " + Seconds + "");
    System.out.println("Minutes : " + Minutes + "");
    System.out.println("Hours : " + Hours + "");
    System.out.println("Days : " + Days + ""); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-12-29T11:59:49.980

```
public static long[] differenceBetweenDates(Date fromDate, Date toDate) {
    Calendar startDate = Calendar.getInstance();
    startDate.setTime(fromDate);
    long years = 0;
    long months = 0;
    long days = 0;
    Calendar endDate = Calendar.getInstance();
    endDate.setTime(toDate);
    Calendar tmpdate = Calendar.getInstance();
    tmpdate.setTime(startDate.getTime());

    tmpdate.add(Calendar.YEAR, 1);
    while (tmpdate.compareTo(endDate) <= 0) {
        startDate.add(Calendar.YEAR, 1);
        tmpdate.add(Calendar.YEAR, 1);
        years++;
    }
    tmpdate.setTime(startDate.getTime());
    tmpdate.add(Calendar.MONTH, 1);
    while (tmpdate.compareTo(endDate) <= 0) {
        startDate.add(Calendar.MONTH, 1);
        tmpdate.add(Calendar.MONTH, 1);
        months++;
    }
    tmpdate.setTime(startDate.getTime());
    tmpdate.add(Calendar.DATE, 1);
    while (tmpdate.compareTo(endDate) <= 0) {
        startDate.add(Calendar.DATE, 1);
        tmpdate.add(Calendar.DATE, 1);
        days++;
    }
    return new long[]{days, months, years};
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-04-30T07:10:37.610

只需计算两个日期毫秒之间的差异，然后除以秒、分钟、小时、天和月

假设你想获得年份之间的差异试试这个，

```
public int findDiff(Date fromDate, Date toDate) {

    if(fromDate == null || toDate == null) {
        return -1;
    }

    long diff = toDate.getTime() - fromDate.getTime();

    int diffInYears = (int) (diff / (60 * 60 * 1000 * 24 * 30.41666666 * 12));
    return diffInYears;
} 
```

假设您希望月份之间的差异从分隔符中删除 12（表示月份）。同样，您可以获得天，小时，分钟..

# linux - Shell 脚本：在日志的每一行中找出一个字符串并发送电子邮件

> ID：13084652
> 
> 赞同：2
> 
> 时间：2012-10-26T09:52:42.423
> 
> 标签：linux, shell, aix

我有一个日志文件，其中包含如下行。

```
10.10.205.100 100.10.56.5 - [23/Oct/2012:15:30:01 +0000] "GET /way/?cb=777:Obj.Status&log=signing_in_service&cache=1350334642666 HTTP/1.1" 200 53 "https://www.sample.com/signin?off=undefined&questions=&nouser=&link=%23&country=origin&displayLayer=" "Mozilla/5.0 (Windows NT 6.1) AppleWebKit/534.57.2 (KHTML, like Gecko) Version/5.1.7 Safari/534.57.2" "PD_STATEFUL_d64f218a-fa6a-11e0-b7df-623c1eeb9903=%2Fgateway; PD-ERR=0x132120c8; PD-HOST=sample.com; PD-REFERER=https://www.sample.com/profile%3Fundefined%3D; PD-REFPAGE=signin_user; pSite=; __SIGNIN=signin%23cw%3D400%3Ach%3D321; mmcore.pd=916254201%7CAgAAAAoBQvp/zPBKCBGRP6QBAOZMgV9Kf89IAAsAAAAtzSlGSn/PSAAAAAD/////AEoIAQAAAAAAAQAAAAAA////////////////AAAAAAABRQ%3D%3D; mmcore.srv=cg4.use; mmid=-1116944464%7CAgAAAAr6f8zwSggAAA%3D%3D; mmcore.tst=0.155; PD-SGNPAGE=http%3A%2F%2Fwww.sample.com%2Fcommon%2Fregister%2Feproxy.html; UnicaNIODID=A3nRYVRjMyy-Xv66UJt; survey=1350334587161" 
```

我正在尝试获取上一行中为 200 的 http 状态代码。这将放在字符串 HTTP/1.1" 之后。http 的版本（这里是 1.1）可能并非在所有行中都通用。

根据状态码（如果不是 200 和其他少数状态），我必须连同日志文件一起发送一封电子邮件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T10:04:49.183

您后面的数字`HTTP/`是http版本号。http 的版本并不多（http 1.0 和 http 1.1）。所以这将工作：

```
 awk -F"HTTP/1.[0-9]\" " '{print $2}' filename | cut -d' ' -f 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T10:51:24.067

（我假设您只想邮寄违规行而不是整个日志文件。）

如果状态码前面的空格数始终相同，则可以使用 . 检查第九个字段`awk`。

```
#!/bin/bash
# find-bad-lines

# Match only statuses that do not start with 2 or 3
# (i.e., 4xx and 5xx)
awk '!match($9, /^[23]/)' 
```

`find-bad-lines`然后你想通过管道输出来处理每个“坏”行`handle-bad-lines`

```
#!/bin/bash
# handle-bad-lines

while read -r line
do
    # This is where you could execute a script for email
    echo "$line"
done 
```

它看起来像这样：

```
$ find-bad-lines <logfile.log | handle-bad-lines 
```

显然你会想要添加错误处理和东西；但是，这是基本思想。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T10:05:53.897

您可以使用`grep -o 'HTTP/[0-9.]\+" [0-9]\+'`仅从 HTTP 获取到数字的部分。空格后面是数字，所以只需添加`| cut -f2 -d' '`.

# c# - c# 事件继承。编译但在运行时抛出异常

> ID：13084658
> 
> 赞同：0
> 
> 时间：2012-10-26T09:53:23.150
> 
> 标签：c#, events, inheritance, event-handling

我遇到了一个事件上升的问题。这是我的基类：

```
public abstract class MyClass<T>
{
  public event EventHandler<MessageReceivedEventArgs<T>> MessageReceived;

  protected void OnMessageReceived(MyClass<T> sender, MessageReceivedEventArgs<T> e)
  {
    EventHandler<MessageReceivedEventArgs<T>> handler = MessageReceived;

    if (MessageReceived != null)
      MessageReceived(sender, e);
  }
} 
```

我的实现：

```
public class MyDerivedClass: MyClass<string>
{
  void AFunction()
  {
    // Do some stuff
    OnMessageReceived(this, new MessageReceivedEventArgs<string>("data"));
  } 
```

当`OnMessageReceived`被调用时，系统抛出一个`System.ArgumentNullException`（“值不能为空。参数名称：类型”）。我已经阅读[了这个帖子](https://stackoverflow.com/questions/5648605/c-sharp-event-inheritance)，还有[这个](https://stackoverflow.com/questions/756237/c-raising-an-inherited-event)帖子，这有助于我构建这段代码。但我找不到这些异常的原因（`sender`并且`e`不为空，用调试器检查）。

我究竟做错了什么 ？

**编辑**：这是我的`MessageReceivedEventArgs`实现：

```
public class MessageReceivedEventArgs<T> : EventArgs
{
  public T Data { get; private set; }

  public MessageReceivedEventArgs(T data)
  {
    Data = data;
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T10:47:54.753

您确定异常是由您的代码引发的吗？任何事件订阅者都可能抛出异常。

事件处理是一个顺序操作。因此，如果第一个订阅者抛出未处理的异常，则事件处理将失败。

编辑：你有没有看过堆栈跟踪。您也可以尝试通过“异常”窗口让 ide 在每个 ArgumentNullException 上停止。

# python - 用于管理 HPC 中的模块系统的 Python 包

> ID：13084661
> 
> 赞同：3
> 
> 时间：2012-10-26T09:53:46.990
> 
> 标签：python, module, environment, hpc

我在使用[模块系统](http://modules.sourceforge.net/)进行软件版本管理的 HPC 环境中工作。我正在使用 python 来自动安装需要一些依赖项的某个软件。

你知道是否有任何 python 包/模块来管理模块系统吗？（列出可用模块、加载/卸载模块、读取模块文件等）。我找不到类似的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-30T19:02:30.427

看看 [easybuild](http://hpcugent.github.io/easybuild/)。它旨在自动安装科学软件并处理模块文件，因此您可能能够在其中找到有趣的模式/线索。

# automapper - AutoMapper 复杂对象映射 - 映射一个列表

> ID：13084665
> 
> 赞同：4
> 
> 时间：2012-10-26T09:54:03.793
> 
> 标签：automapper, automapper-2

我有以下课程。域模型是由实体框架创建的，我正在使用 POCO。

```
public class Customer
{
    public int Id { get; set; }
    public string Name { get; set; }
    public DateTime CreatedDate{ get; set; }
    public DateTime ModifiedDate{ get; set; }
    public virtual ICollection<Order> Orders{ get; set; }
}

public class CustomerDTO
{

    public int Id { get; set; }
    public string Name{ get; set; }
    public List<OrderDTO> Orders{ get; set; }
}

public class Order
{
    public int Id { get; set; }
    public string Name { get; set; }
    public int ProductId { get; set; }
    public DateTime CreatedDate{ get; set; }
    public DateTime ModifiedDate{ get; set; }
}

public class OrderDTO
{
    public int Id { get; set; }
    public string Name{ get; set; }
} 
```

我尝试了以下映射。

```
Mapper.CreateMap<Customer, CustomerDTO>();
Mapper.CreateMap<CustomerDTO, Customer>();
Mapper.CreateMap<Order, OrderDTO>();
Mapper.CreateMap<OrderDTO, Order>(); 
```

我也试过

```
Mapper.CreateMap<CustomerDTO, Customer>().ForMember(c => c.Orders,
            m => m.MapFrom
            (
                q => Mapper.Map<List<OrderDTO>, ICollection<Order>>(q.Orders)
            )
        ); 
```

为了更新客户，我从数据库中检索它并使用 customerDTO 更新它

```
Customer customer = _customerRepository.GetById(customerDTO.Id);
Mapper.Map<CustomerDTO, Customer>(customerDTO, customer); 
```

客户对象正在正确更新，并且创建和修改日期未更改。但是订单列表中的每个订单都没有正确更新。它的 productId、创建和修改日期被设置为默认值，而不是从数据库中检索到的值。

我是否必须做其他事情，因为 Orders 是一个虚拟集合？

我是自动映射器的新手，任何帮助表示赞赏。

**编辑**

我添加了

```
Mapper.AssertConfigurationIsValid(); 
```

在应用程序启动时收到以下错误：找到未映射的成员。查看下面的类型和成员。添加自定义映射表达式、忽略、添加自定义解析器或修改源/目标类型

我将映射更新为：

```
Mapper.CreateMap<OrderDTO, Order>()
                .ForMember(x => x.CreatedDate, y => y.Ignore())
                .ForMember(x => x.ModifiedDate, y => y.Ignore())
                .ForMember(x => x.ProductId, y => y.Ignore()) 
```

但是订单仍然具有被默认值覆盖的上述属性

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T02:30:43.260

我不确定它是正确的还是最佳的解决方案，但是在您的映射中您可以尝试更改

```
q => Mapper.Map<List<OrderDTO>, ICollection<Order>>(q.Orders) 
```

至

```
q => Mapper.Map<List<OrderDTO>, ICollection<Order>>(q.Orders, c.Orders) 
```

这应该更新而不是覆盖订单（类似于您的客户地图）。

请注意，仅使用以下内容就足够了：

```
q => Mapper.Map(q.Orders, c.Orders) 
```

**在旁边：**

还有一件小事，我发现在使用与文档中类似的约定时更容易阅读映射。[例如](https://github.com/AutoMapper/AutoMapper/wiki/Projection)：

```
// Configure AutoMapper
Mapper.CreateMap<CalendarEvent, CalendarEventForm>()
    .ForMember(dest => dest.EventDate, opt => opt.MapFrom(src => src.EventDate.Date))
    .ForMember(dest => dest.EventHour, opt => opt.MapFrom(src => src.EventDate.Hour))
    .ForMember(dest => dest.EventMinute, opt => opt.MapFrom(src => src.EventDate.Minute)); 
```

# android - 用户购买时如何加载付费内容？

> ID：13084667
> 
> 赞同：1
> 
> 时间：2012-10-26T09:54:03.587
> 
> 标签：android, google-play

假设我向用户出售额外的图像效果（表示为 9-patch 图像，而不是算法），我应该如何将购买的数据加载到用户的设备？目前我只看到两种方法：

*   不要加载任何东西。只需将图像存储在资产文件夹中的某个位置。是否足够安全？
*   将数据从服务器加载到设备内部\外部存储。APK 本身会比资产文件夹中的所有数据要小，但恐怕任何知道数据所在位置的人都可以窃取它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T13:09:03.413

Android API Guides 有专门针对这种情况的文章（我错过了）：

[http://developer.android.com/guide/google/play/billing/billing_best_practices.html](http://developer.android.com/guide/google/play/billing/billing_best_practices.html)

# windows - 如何修复包含超过 260 个字符的非常长文件路径的 mercurial 存储库

> ID：13084668
> 
> 赞同：1
> 
> 时间：2012-10-26T09:54:06.100
> 
> 标签：windows, mercurial

我有包含超过 260 个字符的文件路径的 mercurial 存储库。如果我尝试克隆到 Windows 机器，我会收到错误消息。所以我需要更改存储库中的文件路径，但这无济于事，因为 mercurial 日志存储具有长路径的旧 changset。如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T14:01:34.000

一种选择是使用[ConvertExtension](http://mercurial.selenic.com/wiki/ConvertExtension)创建一个新的存储库，使用该`--filemap`选项将长路径名重命名为较短的路径名，然后从中克隆（请参阅“从 Mercurial 转换”部分）。请注意，您需要先启用转换扩展`hgrc`。

例子：

创建“filemap.txt”：

```
rename some/really/long/path/name shorter/path
... 
```

然后：

```
hg convert --filemap filemap.txt original_repo new_repo
hg clone new_repo [windows_repo] 
```

# java - 来自不同类的双缓冲？

> ID：13084669
> 
> 赞同：1
> 
> 时间：2012-10-26T09:54:14.103
> 
> 标签：java

这在我的班级中被添加到我的 JFrame 中。任何人都可以帮助我如何使用这些类 offScreen 从另一个类中绘制图形吗？例如，有一个 Player 类（Player.java）并从该类中绘制图像和其他内容，但仍然缓冲图像而不在每个我绘制的类中创建新的双缓冲方法？

```
package Display;

import Graphics.Player1;
import java.awt.Color;
import java.awt.Graphics;
import java.awt.image.BufferedImage;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JFrame;
      import javax.swing.JPanel;

      public class DrawArea extends JPanel implements Runnable{      
    Thread drawLoop = new Thread(this);
    BufferedImage image = new BufferedImage(1000, 700, BufferedImage.TYPE_INT_RGB);
   public Graphics offScreen = image.getGraphics();

    public DrawArea() {
        setSize(1000, 700);
        drawLoop.start();

    }

    public void update(Graphics g) {
        paint(g);
    }

    public void paint(Graphics g) {
        offScreen.setColor(Color.yellow);
        offScreen.fillRect(0, 0, 1000, 700);

        g.drawImage(image, 0, 0, null);
    }

    public void run() {
        while(true) {
            repaint();
            try {
                drawLoop.sleep(90);
            } catch (InterruptedException ex) {
                Logger.getLogger(DrawArea.class.getName()).log(Level.SEVERE, null, ex);
            }
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T09:59:54.040

使您的绘图面板看起来像这样。

```
public class DrawingPanel extends Canvas {

    public DrawingPanel(){
        setVisible(true);
    }

} 
```

主框架。

```
public class MyFrame extends JFrame implements Runnable{

    DrawingPanel panel;

    public MyFrame(){
        panel = new DrawingPanel();
        add(panel);
        setVisible(true);
        panel.createBufferStrategy(2);
        new Thread(this).start();
    }

    public void run(){
        BufferStrategy buffer = panel.getBufferStrategy();
        while (true){
            Graphics g = buffer.getDrawGraphics();
            render(g);
            g.dispose();
            buffer.show();
            try {
                Thread.sleep(90);
            } catch (Exception e){}
        }
    }

    public void render(Graphics g){
        // Do your drawing here
    }

    public static void main(String[] args){
        new MyFrame();
    }

} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-26T12:23:00.053

像这样创建一个 Player 类（您甚至可以创建一个名为 Drawable 的接口，其中包含 paint 方法）：

```
public class Player {

    public void paint(Graphics g) {
        //Draw player specigfic things
    }
} 
```

在您的 DrawArea 中，将此添加到播放器是 Player 对象的绘制方法中：

```
player.paint(g); 
```

# php - php cookie 在提交表单之前不会被读取

> ID：13084670
> 
> 赞同：1
> 
> 时间：2012-10-26T09:54:19.800
> 
> 标签：php, cookies, setcookie

我遇到了一个问题，即在我提交页面之前，即使在回访页面时，也不会读取正在设置的 cookie。

基本上，我在页面上有一个小表格。提交页面并处理 2 个 cookie 后。第一个与浏览器会话过期并告诉页面显示感谢消息，第二个在一个月后过期并告诉页面显示另一条消息。如果未找到适当的 cookie，则页面默认显示表单。

在上面`DOCTYPE`我有以下代码，它查找 cookie 并设置一个变量来显示正确的页面

```
$display = $DISPLAY_FORM;

if ((!empty($_COOKIE[$COOKIE_RETURN])) && ($_COOKIE[$COOKIE_RETURN] == $COOKIE_RETURN))
{
    // If a return visitor, show DISPLAY_HIDDEN
    $display = $DISPLAY_HIDDEN;
}
if ((!empty($_COOKIE[$COOKIE_REG])) && ($_COOKIE[$COOKIE_REG] == $COOKIE_REG))
{
    // If a new registration, show DISPLAY_THANKS
    $display = $DISPLAY_THANKS;
} 
```

之后是检查和处理表单的逻辑。如果一切正确，它将设置 2 个 cookie 并将`$display`变量设置为`$DISPLAY_THANKS`

```
setcookie($COOKIE_REG, $COOKIE_REG, 0, "/");
setcookie($COOKIE_RETURN, $COOKIE_RETURN, strtotime("+1 month"), "/");

$display = $DISPLAY_THANKS; 
```

该代码正在子目录中运行，因此根据我的理解，使用该`"/"`路径应该使 cookie 对整个站点可见。`$COOKIE_REG`应该设置一个具有相同名称和值的cookie，它应该在浏览器关闭时过期。`$COOKIE_RETURN`应设置一个具有相同名称和值的 cookie，并应在 1 个月后过期。

这都是在`DOCTYPE`元素之前，并且在设置 cookie 时不会引发任何错误。在页面`BODY`中有一个简单的 php`if`语句，它检查`$display`变量以查看要显示的状态。

当我第一次使用该页面时，我看到了表单。我填写表格，提交，页面返回感谢信息。一切都很好。但是，如果我单击站点上的另一个页面，然后再次导航到 cookie 页面，我会看到表单，而不是感谢消息。如果我关闭浏览器（这应该结束第一个 cookie）并返回页面，我会再次获得表单。

由此看来，cookie 没有被设置。但是，在`setcookie`代码和 cookie 读取`if`语句之前，我添加了`echo print_r($_COOKIE, true);`. 在第一次访问我的页面时，预期的 cookie 不可见，但是当我提交表单时，它们就在那里。Cookie 未在此提交中设置为：

1.  代码正在回显`print_r`，因此标头已发送，因此无法写入新的 cookie（我收到错误消息以确认这一点）。

2.  即使代码正在输出一个 cookie，它也不会出现在`$_COOKIE`数组中，直到下次访问该页面。

第一次通过`print_r`退货

```
Array
(
    [17a7190f9ad90db58025cb2dea23788f] => 73fcd0caf5e997e47097a4eade799c59
) 
```

第二次，提交表单后返回

```
Array
(
    [returnVisitor] => returnVisitor
) 
```

任何帮助都会很棒。

--- 编辑 - 下面添加的主要代码主体 ---

```
<?php
// These variables define what is displayed on the page.
$DISPLAY_HIDDEN = 0;
$DISPLAY_FORM = 1;
$DISPLAY_THANKS = 2;

// This variable is where the display type is set, it defaults to show the form
$display = $DISPLAY_FORM;

// Cookie variables
$COOKIE_REG = "formComplete";
$COOKIE_RETURN = "returnVisitor";

// echo print_r($_COOKIE, true);

// Check for a cookie to see if the form has been completed already.
// If there is a cookie, check to see if it's a new registration cookie or a return visitor
if ((!empty($_COOKIE[$COOKIE_REG])) && ($_COOKIE[$COOKIE_REG] == $COOKIE_REG))
{
    // If a new registration, show DISPLAY_THANKS
    $display = $DISPLAY_THANKS;
}
else if ((!empty($_COOKIE[$COOKIE_RETURN])) && ($_COOKIE[$COOKIE_RETURN] == $COOKIE_RETURN))
{
    // If a return visitor, show DISPLAY_HIDDEN
    $display = $DISPLAY_HIDDEN;
}   
// If no cookie exists, check to see if the form has been submitted
else if ( !empty($_REQUEST['formSubmit']) )
{
    // -- REMOVED FOR STACK OVERFLOW - Processes form data --

    // Create and set 2 cookies
    // Cookie 1: Expires when the browser closes and is for new registrants
    setcookie($COOKIE_REG, $COOKIE_REG, 0, "/");
    // Cookie 2: Expires in a month and is for returning visitors
    setcookie($COOKIE_RETURN, $COOKIE_RETURN, strtotime("+1 month"), "/");

    // Set the page to display the thanks screen
    $display = $DISPLAY_THANKS;
}
?>
<!DOCTYPE html>
<html lang="en-gb">
  <head>
-- REMOVED FOR STACK OVERFLOW --
  </head>

  <body>
    <?php if ($display == $DISPLAY_FORM) { ?>
      --- REMOVED FOR STACK OVERFLOW - This is where the form is drawn. ---
    <?php } else if ($display == $DISPLAY_THANKS) { ?>
      --- REMOVED FOR STACK OVERFLOW - This is where the thank you message is drawn. ---
    <?php } else if ($display == $DISPLAY_HIDDEN) { ?>
      --- REMOVED FOR STACK OVERFLOW - This is where the returning visitor message is drawn. ---
    <?php } // endif ?>
  </body>
</html> 
```

## 预期行为

### 首次访问页面

没有设置 cookie，也没有提交表单，所以使用了显示表单的默认选项。***按预期工作***

### 通过表单提交第二次访问页面

未设置 cookie，但已提交表单。处理表单数据，设置 cookie，并`$display`告诉内部变量显示感谢消息。***似乎按预期工作***

### 页面的后续访问直到浏览器关闭

找到了`$COOKIE_REG`cookie，它将`$display`变量设置为显示感谢页面。

### 浏览器关闭后对页面的后续访问

如果在提交表单后的 1 个月内，`$COOKIE_RETURN`应找到 cookie 并`$DISPLAY_HIDDEN`绘制页面。如果 1 个月过去了，该页面应该被视为第一次访问。

# c# - EF4.0 中的延迟加载正在冻结 UI

> ID：13084672
> 
> 赞同：1
> 
> 时间：2012-10-26T09:54:30.607
> 
> 标签：c#, entity-framework, mvvm, .net-4.0, freeze

您好我正在使用 WPF、EF 和 MVVM (.NET4.0) 设计一个应用程序。

我在绑定数据时遇到冻结 UI 的问题。我认为这是因为延迟加载。

MVVM：

```
 ThreadPool.QueueUserWorkItem(state =>
        {
                IsProgressBarVisible(true);

                var service = Context.SomeModel.ToList();
                BgServiceCompleted(service);
        }); 
```

XAML：

```
"{Binding OrderItemViews.SOmeModel_A.SomeModel_B.SOmeField}"
"{Binding OrderItemViews.Country.Name}" 
```

一些型号：

```
public class SomeModel_A
{
    public int Id { get; set; }
    ....        
    public int SomeB_Id { get; set; }
    public virtual SomeModel_B SomeModel_B { get; set; }
} 
```

我找到了解决这个问题的方法。

1) 在 ItemsSource-Binding 中设置 IsAsync-Property。

```
"{Binding OrderItemViews.SOmeModel_A.SomeModel_B.SOmeField, IsAsync=true}" 
```

界面没有冻结，但一段时间后出现值。这会让一些用户感到困惑。

2) 使用 Include 加载包含数据。例如：

```
Context.SomeModel.Include(a => a.SomeModel2).Load(); 
```

但在我的情况下 Context 没有**Include**。为什么？

解决这个问题的最佳方法是什么？

你能给我一个关于我应该如何做的指导或者我可以阅读和了解它的任何有用的资源吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T10:53:18.507

[Include](http://msdn.microsoft.com/en-us/library/bb738708.aspx)不是标准库的一部分，您必须添加`using System.Data.Entity;`. 否则，返回的类型是`Context.SomeModel`什么？

# shell - 在 shell 脚本中读取命令

> ID：13084677
> 
> 赞同：0
> 
> 时间：2012-10-26T09:54:47.053
> 
> 标签：shell

我有这个脚本：

```
 echo -e ">> Please, insert edition folder name: ";
    read editionfolder;
    RSeditionfolder="$editionfolder";    
    sh -c $POSTGRESbin'psql -U '$POSTGRESuser' -h localhost -d '$POSTGRESdb' -c "select count(*) from d3_folders where folder_name = '\'$RSeditionfolder\'';"' > $queryFolder$tmpFile 
```

例如，如果我在 editionfolder 中插入 var: CD_199 FOTOS 我会收到一个错误：

```
FOTOS';": -c: line 0: unexpected EOF while looking for matching `"'
FOTOS';": -c: line 1: syntax error: unexpected end of file 
```

$queryFolder 具有“query/”值，$tmpFile 具有“tmpfile”

但我不知道我做错了什么。

这个查询的结果是：

```
 count 
-------
     0
(1 row) 
```

在这种情况下，我只想要数字 0。我正在尝试将结果放入文件中，下一步是在此文件中使用 sed，我知道其他方式，我将非常感激。

谢谢 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T10:10:07.170

省略所有这些单引号`sh -c ...`并用双引号引用整个命令：

```
sh -c "$POSTGRESbin/psql -U $POSTGRESus -h ..." 
```

双引号确保只有一个参数，同时允许替换 shell 变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T10:19:40.387

给定的命令有点乱，我会这样写

```
sh -c "${POSTGRESbin}psql -U $POSTGRESuser -h localhost -d $POSTGRESdb -c \"select count(*) from d3_folders where folder_name = '$RSeditionfolder';\"" > ${queryFolder}${tmpFile} 
```

首先，我会在双引号内使用 $-variables 摆脱所有这些单引号。其次，最好使用明确的变量名称边界来阐明子句“$queryFolder$tmpFile” `${queryFolder}${tmpFile}`，. 但总的来说，剧本很好。

# c# - 如何处理串口数据？

> ID：13084681
> 
> 赞同：0
> 
> 时间：2012-10-26T09:55:21.983
> 
> 标签：c#, .net

嗨，我一直在研究串口数据接收事件处理程序，我有一个 Windows 窗体，通过它我每 1ms 连续接收数据，数据格式为 $,0,0,0,0,0,1,0,0,0 ,0,................0\. 这里 $- 表示帧的开始 & 后面是包含 0 的 72 位数据，并且 72 位中的特定位是 1 表示错误。在消息格式中，1 表示错误，0 表示执行某些操作时没有错误。所以我必须从串口读取数据并将其保存在一个数组中。保存数据后，我必须寻找美元来指示帧的开始和 1 的计数，通过它我可以相应地添加事件。$,0,1,0,0,0....0,0,0,- 72 位宽的消息，消息帧中的 1 表示设备中的错误，因此相应的事件。

我的代码：

```
 private void serialPort1_DataReceived(object sender, System.IO.Ports.SerialDataReceivedEventArgs e)
    {
            List<byte> dataBuffer = new List<byte>();
            var sp = (SerialPort)sender;
             var indata = sp.ReadChar();

             if (indata == 0x24 && dataBuffer.Count == 0)
             {               
                while (serialPort1.BytesToRead > 0)
                     dataBuffer.Add((byte)serialPort1.ReadByte());

                ProcessBuffer(dataBuffer);
                 dataBuffer.Clear();
             }           

        }
         int g=0;
        private void ProcessBuffer(List<byte> comBuffer)
        {
             byte[] dataSend = new byte[serialPort1.BytesToRead];
           for (int c = 0; c <= 72; c++)
             {
                 if (comBuffer[c] == 0x01) 
                {
                     g = c;
                 }
             }

         } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T10:09:07.263

您假设您将获得DataReceived 事件处理程序中的*所有*字节（或位）。你不会，当只有几个字节可用时它会触发。您需要解决这个问题，至少在调用之间保持缓冲区。像这样的东西：

```
 private List<byte> dataBuffer;

     private void serialPort1_DataReceived(object sender, System.IO.Ports.SerialDataReceivedEventArgs ek) {
         var sp = (SerialPort)sender;
         if (dataBuffer == null) {
             // Looking for start byte
             if (sp.ReadByte() != 0x24) return;
             dataBuffer = new List<byte>();
         }
         while (sp.BytesToRead > 0) {
             dataBuffer.Add(sp.ReadByte());
             if (dataBuffer.Count == 72 / 8) {
                 // Got all bytes (or bits, it isn't clear), process it
                 var buf = dataBuffer;
                 dataBuffer = null;
                 ProcessBuffer(buf);
                 break;
             }
         }
     } 
```

您可能需要修复“获得足够的位”条件，您的问题并不清楚。List 不是那么漂亮，但它是确保数据在处理时保持稳定的一种非常好的方法，即使您 BeginInvoke 到 UI 线程也是如此。仅当您确定只有一个线程会同时访问它时，才用 byte[] 替换。

# python - 什么是 Linux 下软实时数据采集的好存储候选？

> ID：13084686
> 
> 赞同：7
> 
> 时间：2012-10-26T09:55:50.253
> 
> 标签：python, linux, storage, hdf5, data-acquisition

我正在构建一个数据采集系统。采集的数据通常由 15 个信号组成，每个信号以（比如说）500 Hz 的频率进行采样。也就是说，每秒大约 15 x 500 x 4 字节（有符号浮点数）将到达并且必须保持。

以前的版本是基于 .NET (C#) 构建的，使用 DB4O db 进行数据存储。这是相当有效的并且表现良好。

新版本将基于 Linux，使用 Python（或者可能是 Erlang）和......是的！什么是合适的存储候选？

我在想 MongoDB，将每个样本（或实际上是一堆）存储为 BSON 对象。每个样本（块）将有一个样本计数器作为关键（索引）字段，以及一个信号源标识。

问题是我必须能够很快地检索样本。请求时，必须使用采样计数器范围和请求的信号源在不到一秒的时间内检索多达 30 秒的数据。当前的 (C#/DB4O) 版本管理这个 OK，检索数据的时间远少于 100 毫秒。

我知道 Python 在性能方面可能并不理想，但我们稍后会看到。

系统（“服务器”）将连接多个采集客户端，因此架构必须具有良好的扩展性。

**编辑：** *经过进一步研究，我可能会使用 HDF5 获取示例数据，使用 Couch 或 Mongo 获取更多类似文档的信息。我会及时向大家发布。*

**编辑：** *最终解决方案基于 HDF5 和 CouchDB。它执行得很好，用 Python 实现，在 Raspberry Pi 上运行。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T18:52:37.963

你可以看看使用[HDF5](http://www.hdfgroup.org/) ...它是为流数据设计的，允许时间索引搜索并且（据我所知）在 Python 中得到很好的支持

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T16:33:53.113

使用您描述的键，您应该能够在必要时通过分片进行扩展。120kB / 30sec 不算多，所以我认为你不需要太早分片。

如果将其与仅使用文件进行比较，您将获得更复杂的查询并内置复制以实现高可用性、DS 或离线处理（Map Reduce 等）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-27T17:02:39.770

在您的情况下，您可以只创建 15 个文件并将每个样本按顺序保存到相应的文件中。这将确保请求的样本连续存储在磁盘上，从而减少读取时的磁盘寻道次数。

# sql - 查询以显示在 2 列中具有重复值的行

> ID：13084693
> 
> 赞同：0
> 
> 时间：2012-10-26T09:56:36.820
> 
> 标签：sql, sql-server

我有表1：

```
id|name|city
-------------
1 | bat|nyc
2 | cat|del
2 | rat|bom
3 | mat|xyz 
```

表2

```
id|name|city
--------------
1 |bat|dsada
2 |cat|sadasd
3 |rat|sdasdas
2 |rat|asdas 
```

我需要一个查询来显示上面示例中两个表中 id 和 name 都相同的行查询必须返回我需要一个查询来显示行

```
1|bat|nyc
2|cat|del 
```

从第一张桌子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T09:59:21.190

最简单的（可能也是最有效的）是使用`EXISTS`：

```
SELECT id,name,city FROM Table1 t1
WHERE EXISTS
(
   SELECT 1 FROM Table2 t2
   WHERE t2.name = t1.name
   AND t2.id  = t1.id
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T09:59:25.897

尝试加入两个表，如下所示

```
select tabl1.* from table1
inner join table2
on table1.id=table2.id and table1.name=table2.name 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T09:59:31.813

```
select
   T1.id, T1.name
from Table1 as T1
where
    exists (select * from Table2 as T2 where T2.id = T1.id and T2.name = T1.name) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T09:59:55.443

试试这个： JOIN 将确保满足两个条件，即来自两个表的两条记录具有相同的`id`值`name`

```
Select t1.name, t1.city from Table1 t1
 Join Table2 t2
  ON t1.id = t2.id and 
        t1.name = t2.name 
```

# objective-c - 检查两个日期之间的时间是否与其他两个日期之间的时间相交

> ID：13084696
> 
> 赞同：1
> 
> 时间：2012-10-26T09:56:43.203
> 
> 标签：objective-c, nsdate

什么是检查两个日期之间的任何地方是否与其他两个日期之间的任何地方相交的有效方法，而不必检查日期之间的每一秒并检查第二个日期是否在其他两个日期之间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T10:12:32.780

Your problem can be rephrased like this.

Check if any of two dates c1 and c2 are in between the two dates d1 and d2\.

```
// assuming d1 is before d2
BOOL intersects = 
   ([d1 compare:c1] == NSOrderedAscending  &&
    [d2 compare:c1] == NSOrderedDescending)
    ||
   ([d1 compare:c2] == NSOrderedAscending &&
    [d2 compare:c2] == NSOrderedDescending)
    || [d1 compare:c1] == NSOrderedEqual
    || [d1 compare:c2] == NSOrderedEqual
    || [d2 compare:c1] == NSOrderedEqual
    || [d2 compare:c2] == NSOrderedEqual; 
```

EDIT: alternatively,

```
NSTimeInterval i = [d2 timeIntervalSinceDate:d1];
NSTimeInterval c1i = [c1 timeIntervalSinceDate:d1];
NSTimeInterval c2i = [c2 timeIntervalSinceDate:d1];
BOOL intersects = (c1i >= 0 && c1i <= i) || (c2i >= 0 && c2i <= i); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T10:52:21.610

两个区间`[a, b]`并且`[c, d]`有一个非空交点如果

```
a <= d && c <= b 
```

因此你可以检查

```
[a compare:d] <= 0 && [c compare:b] <= 0 
```

看看这些区间是否有任何共同的价值。

（这里我假设间隔是*有序*的，即`a <= b`和`c <= d`。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T10:08:36.947

假设您有： time`t`和 interval `[a-b] [c-d]`，如果它们的排序如下：

*   一<d
*   a < b
*   c < d

然后你可以检查是否`t`在 b 和 c 中，检查如果 b > c，那么整个事情都是真的，否则 - 不。作为一个快速的视线，我还想不出比全面检查它们是否没有排序更好的东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-26T11:01:27.497

> 什么是检查两个日期之间的任何地方是否与其他两个日期之间的任何地方相交的有效方法，而不必检查日期之间的每一秒并检查第二个日期是否在其他两个日期之间？

你用另一种方式来做。第一个区间何时不与第二个区间相交？

*   当 End1 < Start2 时（第一个间隔在第二个开始之前结束）
*   当 Start1 > End2 时（第一个间隔在第二个结束后开始）。

所以你要

```
 End1 < Start2 OR Start1 > End2  // Condition of non-intersection 
```

是假的：即你想要

```
 End1 >= Start2 AND Start1 <= End2   // Negation of above 
```

是真实的。

# c# - 接受泛型方法参数的最佳方式

> ID：13084702
> 
> 赞同：1
> 
> 时间：2012-10-26T09:57:11.857
> 
> 标签：c#, generics, methods, interface, repository

我有一个界面，它描述了一种对在某个存储库中查找的某些项目执行某些操作的方法。

我看到了两种创建该界面的方法。

```
public interface IService<T> where T : class
{
    void Action<TSource>(int id, TSource source, Action<T> action)
        where TSource : IRead<T>;
} 
```

相对

```
public interface IService<T> where T : class
{
    void Action(int id, IRead<T> source, Action<T> action);
} 
```

那么，哪一个是最好的，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T10:08:34.730

我会在这里，说第二个更好。

第一个定义将允许您在 Action 的实现中直接使用 TSource（而不是通过它必须实现的接口 IRead）。现在，我能想象的唯一好的用途是在你的函数签名中使用 TSource，你没有这样做。即类似的东西：

```
TSource MyAction<TSource>(int id, TSource source, Action<T, TSource> action)
        where TSource : IRead<T>; // TSource is now also returned from our method 
```

在任何其他情况下，MyAction 的主体（请注意，我冒昧地重命名您的示例方法以不与 System.Action 冲突）只知道和使用 IRead 接口会好得多。

# performance - LoadUI中如何同时运行多个测试用例？

> ID：13084710
> 
> 赞同：1
> 
> 时间：2012-10-26T09:57:52.730
> 
> 标签：performance, loadui

我在 SoapUI 中创建了一个测试套件，一个测试套件包含两个测试用例。我需要同时从 loadUI 执行一个测试套件。

无论是命令行还是来自 loadUI。

谢谢

# r - R：如何创建一个字符数组的数组

> ID：13084712
> 
> 赞同：2
> 
> 时间：2012-10-26T09:57:55.350
> 
> 标签：r

我对 R 相当陌生，我必须遵循以下情况。我得到了一个包含如下内容的文本文件：

```
[1] a b c d e f g
[2] h i j k
[3] l m n o
[4] x y z 
```

我想将属于同一标识符（[x]）的所有字符分组到一个数组中。由于我想访问所有标识符的所有字符，因此我需要一个二维数组（数组的数组）。这是我尝试过的：

```
> bigvector <- vector()
> bigvector <- append(bigvector, vector())
> bigvector[0][0] <- "Test"
> > bigvector[0][0]
logical(0) 
```

因此，不会返回“测试”。我也试过：

```
> tmpvector <- c("A", "B", "C", "D", "E", "F")
> bigvector <- vector()
> bigvector <- append(bigvector, tmpvector)
> bigvector[0][0]
character(0) 
```

这应该是一项容易的任务，但是我正在努力完成它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T11:21:27.137

我不确定你想做什么以及你是否真的需要`array`对象。

我建议使用列表。这是一个假设您`[x]`只是行号的示例。

```
#read the data using readLines
tc <- textConnection("[1] a b c d e f g
[2] h i j k
[3] l m n o
[4] x y z")

dat <- readLines(tc)

#split at spaces
dat <- strsplit(dat,split=" ")

#remove identifier
rm1 <- function(x) x[-1] 
dat <- sapply(dat,rm1)

dat
#[[1]]
#[1] "a" "b" "c" "d" "e" "f" "g"
#
#[[2]]
#[1] "h" "i" "j" "k"
#
#[[3]]
#[1] "l" "m" "n" "o"
#
#[[4]]
#[1] "x" "y" "z"

dat[[3]][3]
#[1] "n" 
```

# 编辑：

对于评论中给出的数据，您应该使用`lapply`.

```
dat <- readLines(file('http://pastebin.com/raw.php?i=tJW8H6K1'))

#split at spaces
dat <- strsplit(dat,split=" ")

#remove identifier
rm1 <- function(x) x[-1] 
dat <- lapply(dat,rm1)

#first five characters of the first line
dat[[1]][1:5]
#[1] "1" "1" "0" "1" "0" 
```

# php - Codeigniter - 处理所有页面只有一个控制器的表单

> ID：13084713
> 
> 赞同：1
> 
> 时间：2012-10-26T09:57:57.237
> 
> 标签：php, codeigniter

我开始在一个工作项目中使用 Codeigniter，但我仍然掌握它的窍门......

浏览 Codeigniter 教程，我开始构建网站，只有一个控制器来处理视图，但现在我无法处理该控制器上的表单提交。我在这里失去了理智......：P

这是控制器的唯一功能（pages.php）

```
 public function view($page = 'home')
    {

        if ( ! file_exists('application/views/pages/'.$page.'.php'))
        {
            // Whoops, we don't have a page for that!
            show_404();
        }

        // handle ACTIVE class
        $current_page = uri_string();

        $this->Mp->isactiveset($this->session->userdata('active'),$current_page);
        $this->Mp->newactive($this->session->userdata('active'),$current_page);

        // testing database query and passing variables
        $passar = $this->Mp->testedb();

        // get ap types
        $aptype = $this->Mp->getaptype();

        // passing data to view
        $data['estado'] = $passar; // Testing db connection
        $data['title'] = ucfirst($page); // Homepage page
        $data['aptypes'] = $aptype; // Ap types

        $this->load->view('templates/header', $data);
        $this->load->view('pages/'.$page, $data);
        $this->load->view('templates/footer', $data);

    } 
```

我有处理准备好的表格的功能

```
 public function index()
    {
    $this->form_validation->set_rules('nome', 'Username', 'required|min_length[3]|max_length[25]|');
    $this->form_validation->set_rules('telemovel', 'Telephone', 'numeric|exact_length[9]');
    $this->form_validation->set_rules('email', 'Email', 'required|valid_email');
    $this->form_validation->set_rules('mensagem', 'MessageBody', 'required|min_length[10]');

    if ($this->form_validation->run() == FALSE)
    {

        // handle ACTIVE class
        $current_page = uri_string();

        $this->Mp->isactiveset($this->session->userdata('active'),$current_page);
        $this->Mp->newactive($this->session->userdata('active'),$current_page);

        // get ap types
        $aptype = $this->Mp->getaptype();

        // testing database query and passing variables
        $passar = $this->Mp->testedb();

        // passing data to view
        $data['estado'] = $passar; // Testing db connection
        $data['aptypes'] = $aptype; // Ap types

        $this->load->view('templates/header', $data);
        $this->load->view('pages/home', $data);
        $this->load->view('templates/footer', $data);
    }
    else
    {   
        $this->load->view('templates/header', $data);
        $this->load->view('pages/submit', $data);
        $this->load->view('templates/footer', $data);
    }
} 
```

这就是 route.php 的样子（在第一个答案之后，我现在知道这是相关的）

```
$route['default_controller'] = "pages/view";
$route['(:any)'] = 'pages/view/$1';
$route['(\w{2})/(.*)'] = '$2';
$route['(\w{2})'] = $route['default_controller'];
$route['404_override'] = ''; 
```

在视图上，当我执行 form_open('submit', $attributes) 时，它不会进入控制器上的任何函数，除了视图。显然我已经在pages.php上放了表单处理功能，重命名了它，尝试了不同的表单提交页面（form_open（'我试过的页面'，$attributes））。如何使其转到特定功能来处理表单提交？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T10:12:44.090

```
form_open('submit', $attributes) 
```

must be

```
form_open('/path_to_my_page', $attributes) 
```

if I understand you correctly ...

```
form_open('/view/page', $attributes) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T19:56:39.240

我想通了！感谢 Svetlio 以正确的方式指出我。我是这样做的：

**1）**在表单初始化中正确设置路径：

```
echo form_open('contactos/submit', $attributes); 
```

**2)**进入路由配置（application/config/ **routes.php**），添加路由异常到这个文件

```
$route['contactos/submit'] = "pages/submit"; 
```

它的作用是，当程序被要求输入路径“contactos/submit”时，它指向**pages.php**控制器中的函数**提交**（这就是我正在寻找的......）

 **3）在您的控制器中定义函数提交，以正确处理表单的提交

```
public function submit()
{
/* handle the form code */
    } 
```**

# android - 导入任何项目后如何解决eclipse中的这个错误

> ID：13084715
> 
> 赞同：2
> 
> 时间：2012-10-26T09:58:03.150
> 
> 标签：android, import, project

我刚刚导入了我的旧项目。但它显示错误。我没有得到这是什么类型的错误以及为什么。以及如何解决它。任何人都可以告诉我如何解决它。![在此处输入图像描述](../Images/95ec4ad003053c25033cf7215ad7322a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T10:01:25.830

有时简单的刷新就可以解决问题，您也可以检查问题视图
窗口 -> 显示视图 -> 问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T10:09:09.980

右键项目名称，--> Build Path --> Configure Build Path...

检查项目和库选项卡，红色感叹号的原因在那里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T10:08:16.197

如果路径是本地机器，可能是因为路径中缺少依赖的 jar。
在构建路径中检查它。这是我在 100 次中面临 99 次的唯一问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T10:30:36.907

检查添加的库的路径。

右键单击项目名称，--> 构建路径--> 配置构建路径。

# jvm - JNI 和 RMI 导致 JVM 崩溃

> ID：13084716
> 
> 赞同：2
> 
> 时间：2012-10-26T09:58:07.413
> 
> 标签：jvm, java-native-interface, rmi

我们使用 JNI 来启动一个 JVM。在这个 JVM 中，我们使用“LocateRegistry.createRegistry(JMXPORT);” 创建注册表。但是 JVM 总是在 Solaris 上使用 JDK1.6 崩溃（它在 JDK1.5 上运行良好）。崩溃发生在 UnicastRemoteObject(exportObject 方法)的第 256 行

我可以通过添加 -XX:+UseSerialGC 来更改 GC 方法来解决崩溃问题。但我需要知道根本原因。任何帮助将不胜感激。谢谢。

```
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  SIGFPE (0x8) at pc=0xfffffd7ff0f2b898, pid=28894, tid=4
#
# JRE version: 6.0_37-b06
# Java VM: Java HotSpot(TM) 64-Bit Server VM (20.12-b01 mixed mode solaris-amd64 compressed oops)
# Problematic frame:
# V  [libjvm.so+0x46b898]  JVM_GetCPClassNameUTF+0x94c8
#
# If you would like to submit a bug report, please visit:
#   http://java.sun.com/webapps/bugreport/crash.jsp
#

---------------  T H R E A D  ---------------

Current thread (0x000000000081b800):  VMThread [stack: 0xfffffd7ffe6af000,0xfffffd7ffe7af000] [id=4]

siginfo:si_signo=SIGFPE: si_errno=0, si_code=4 (FPE_FLTOVF), si_addr=0xfffffd7ff0f2b898

Registers:
RAX=0x0000000000469f60, RBX=0x0000000000000000, RCX=0x0000000000461a60, RDX=0x0000000000880000
RSP=0xfffffd7ffe7ae6a0, RBP=0xfffffd7ffe7ae6d0, RSI=0x0000000003300000, RDI=0x0000000000475500
R8 =0x000000000046c860, R9 =0xfffffd7ffee52490, R10=0x0000000000461b00, R11=0x00000000f9380000
R12=0x0000000000475500, R13=0xfffffd7ff1272fd0, R14=0x0000000000475d30, R15=0x00000000000cc010
RIP=0xfffffd7ff0f2b898, RFLAGS=0x0000000000010246

Top of Stack: (sp=0xfffffd7ffe7ae6a0)
0xfffffd7ffe7ae6a0:   fffffd7ff199af30 000000000046c2e0
0xfffffd7ffe7ae6b0:   0000000000475500 0000000000000000
0xfffffd7ffe7ae6c0:   fffffd7ffe7ae6f0 408f4000447a0000
0xfffffd7ffe7ae6d0:   fffffd7ffe7ae710 fffffd7ff0f2b8e7
0xfffffd7ffe7ae6e0:   fffffd7ff199af30 000000000046c2e0
0xfffffd7ffe7ae6f0:   00000000004623c0 fffffd7ff0f37d99
0xfffffd7ffe7ae700:   00000000000cc010 fffffd7ff199af30
0xfffffd7ffe7ae710:   fffffd7ffe7ae720 fffffd7ff0f2b5da
0xfffffd7ffe7ae720:   fffffd7ffe7ae9c0 fffffd7ff1680c44
0xfffffd7ffe7ae730:   0000000000461970 000000000046c2e0
0xfffffd7ffe7ae740:   fffffd7ff1999388 fffffd7ff19a16e8
0xfffffd7ffe7ae750:   0000000000000000 000000000081cb70
0xfffffd7ffe7ae760:   0000000000000000 000000001ecf66a6
0xfffffd7ffe7ae770:   000000001f257d23 0000000000000000
0xfffffd7ffe7ae780:   0000000000000000 0000000000000000
0xfffffd7ffe7ae790:   0000000000000000 0000000000000000
0xfffffd7ffe7ae7a0:   fffffd7ffe7ae878 00000000004a6530
0xfffffd7ffe7ae7b0:   0000000000000001 0000000000000000
0xfffffd7ffe7ae7c0:   fffffd7ffe7ae7d0 fffffd7ff0e6fc92
0xfffffd7ffe7ae7d0:   0000000000517da0 00000000004a6520
0xfffffd7ffe7ae7e0:   00000000004a6530 00000000004a6908
0xfffffd7ffe7ae7f0:   000000000081b800 000000000047b280
0xfffffd7ffe7ae800:   000000000081bf10 000000000081bf20
0xfffffd7ffe7ae810:   000000000081c2f8 fffffd7ffe7aebb8
0xfffffd7ffe7ae820:   fffffd7ff1990100 0000000000000000
0xfffffd7ffe7ae830:   0000000000000000 0000000000000000
0xfffffd7ffe7ae840:   000000000045e450 fffffd7ff9c77300
0xfffffd7ffe7ae850:   fffffd7ffe010100 0000000000000000
0xfffffd7ffe7ae860:   fffffd7ffe7ae8a0 fffffd7ff0f7cf00
0xfffffd7ffe7ae870:   00000000004a6530 000000000045e450
0xfffffd7ffe7ae880:   0000000000000000 000000001ed00a99
0xfffffd7ffe7ae890:   0000000000000001 0000000000476c80 

Instructions: (pc=0xfffffd7ff0f2b898)
0xfffffd7ff0f2b878:   2c c0 4d 8b 4e 28 4d 89 01 4d 8b b4 24 08 01 00
0xfffffd7ff0f2b888:   00 49 8b fc 33 c0 41 ff d5 4c 8b 80 98 00 00 00
0xfffffd7ff0f2b898:   f2 41 0f 5a 40 28 f3 0f 59 45 f8 f3 4c 0f 2c c0
0xfffffd7ff0f2b8a8:   4d 8b 4e 28 4d 89 01 41 5e 41 5d 41 5c c9 c3 00 

Register to memory mapping:

RAX=0x0000000000469f60 is an unknown value
RBX=0x0000000000000000 is an unknown value
RCX=0x0000000000461a60 is an unknown value
RDX=0x0000000000880000 is an unknown value
RSP=0xfffffd7ffe7ae6a0 is an unknown value
RBP=0xfffffd7ffe7ae6d0 is an unknown value
RSI=0x0000000003300000 is an unknown value
RDI=0x0000000000475500 is an unknown value
R8 =0x000000000046c860 is an unknown value
R9 =0xfffffd7ffee52490 is an unknown value
R10=0x0000000000461b00 is an unknown value
R11=0x00000000f9380000 is an unknown value
R12=0x0000000000475500 is an unknown value
R13=0xfffffd7ff1272fd0: JVM_SupportsCX8+0x219000 in /****/bin/jdk1.6.0_37/jre/lib/amd64/server/libjvm.so at 0xfffffd7ff0ac0000
R14=0x0000000000475d30 is an unknown value
R15=0x00000000000cc010 is an unknown value

Stack: [0xfffffd7ffe6af000,0xfffffd7ffe7af000],  sp=0xfffffd7ffe7ae6a0,  free space=1021k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V  [libjvm.so+0x46b898]  JVM_GetCPClassNameUTF+0x94c8
V  [libjvm.so+0x46b8e7]  JVM_GetCPClassNameUTF+0x9517
V  [libjvm.so+0x46b5da]  JVM_GetCPClassNameUTF+0x920a
V  [libjvm.so+0xbc0c44]  sysThreadAvailableStackWithSlack+0x3a384
V  [libjvm.so+0xbb3986]  sysThreadAvailableStackWithSlack+0x2d0c6
V  [libjvm.so+0x531398]  JVM_IsSameClassPackage+0x2eb8
V  [libjvm.so+0x472384]  JVM_GetCPClassNameUTF+0xffb4
V  [libjvm.so+0x4725fa]  JVM_GetCPClassNameUTF+0x1022a
V  [libjvm.so+0x5ad0a0]  JVM_SupportsCX8+0x130d0
V  [libjvm.so+0x5ac55f]  JVM_SupportsCX8+0x1258f
V  [libjvm.so+0xb7f469]  JVM_RaiseSignal+0x1c8509
C  [libc.so.1+0x1149d4]  _thrp_setup+0xbc
C  [libc.so.1+0x114ca0]  _lwp_start+0x0

VM_Operation (0xfffffd7ffd58b7a0): ParallelGCSystemGC, mode: safepoint, requested by thread 0x0000000000bba800

---------------  P R O C E S S  ---------------

Java Threads: ( => current thread )
  0x0000000000c4d800 JavaThread "RMI Scheduler(0)" daemon [_thread_blocked, id=23, stack(0xfffffd7ffd0ff000,0xfffffd7ffd1ff000)]
  0x0000000000b7d000 JavaThread "RMI RenewClean-[10.182.73.206:34213]" daemon [_thread_blocked, id=22, stack(0xfffffd7ffd28a000,0xfffffd7ffd38a000)]
  0x0000000000ccd000 JavaThread "RMI TCP Connection(1)-10.182.73.206" daemon [_thread_in_native, id=21, stack(0xfffffd7ffd38b000,0xfffffd7ffd48b000)]
  0x0000000000bba800 JavaThread "GC Daemon" daemon [_thread_blocked, id=20, stack(0xfffffd7ffd48c000,0xfffffd7ffd58c000)]
  0x0000000000bb9000 JavaThread "RMI Reaper" [_thread_blocked, id=19, stack(0xfffffd7ffd58d000,0xfffffd7ffd68d000)]
  0x0000000000bb6800 JavaThread "RMI TCP Accept-0" daemon [_thread_blocked, id=18, stack(0xfffffd7ffd68e000,0xfffffd7ffd78e000)]
  0x0000000000bb5800 JavaThread "Timer-0" [_thread_blocked, id=17, stack(0xfffffd7ffd78f000,0xfffffd7ffd88f000)]
  0x0000000000c0e000 JavaThread "RMI TCP Accept-26999" daemon [_thread_in_native, id=14, stack(0xfffffd7ffd96f000,0xfffffd7ffda6f000)]
  0x000000000086b800 JavaThread "Low Memory Detector" daemon [_thread_blocked, id=12, stack(0xfffffd7ffdea7000,0xfffffd7ffdfa7000)]
  0x0000000000868800 JavaThread "C2 CompilerThread1" daemon [_thread_blocked, id=11, stack(0xfffffd7ffdfa8000,0xfffffd7ffe0a8000)]
  0x0000000000865800 JavaThread "C2 CompilerThread0" daemon [_thread_blocked, id=10, stack(0xfffffd7ffe0a9000,0xfffffd7ffe1a9000)]
  0x000000000085a000 JavaThread "JDWP Event Helper Thread" daemon [_thread_blocked, id=9, stack(0xfffffd7ffe1aa000,0xfffffd7ffe2aa000)]
  0x0000000000855000 JavaThread "JDWP Transport Listener: dt_socket" daemon [_thread_in_native, id=8, stack(0xfffffd7ffe2ab000,0xfffffd7ffe3ab000)]
  0x0000000000849000 JavaThread "Signal Dispatcher" daemon [_thread_blocked, id=7, stack(0xfffffd7ffe3ac000,0xfffffd7ffe4ac000)]
  0x0000000000823800 JavaThread "Finalizer" daemon [_thread_blocked, id=6, stack(0xfffffd7ffe4ad000,0xfffffd7ffe5ad000)]
  0x0000000000821800 JavaThread "Reference Handler" daemon [_thread_blocked, id=5, stack(0xfffffd7ffe5ae000,0xfffffd7ffe6ae000)]
  0x0000000000468800 JavaThread "main" [_thread_in_native, id=1, stack(0xfffffd7fff600000,0xfffffd7fffe00000)]

Other Threads:
=>0x000000000081b800 VMThread [stack: 0xfffffd7ffe6af000,0xfffffd7ffe7af000] [id=4]
  0x0000000000881000 WatcherThread [stack: 0xfffffd7ffdd3e000,0xfffffd7ffde3e000] [id=13]

VM state:at safepoint (normal execution)

VM Mutex/Monitor currently owned by a thread:  ([mutex/lock_event])
[0x0000000000467200] Threads_lock - owner thread: 0x000000000081b800
[0x00000000004677a0] Heap_lock - owner thread: 0x0000000000bba800

Heap
 PSYoungGen      total 60928K, used 816K [0x00000000f5800000, 0x00000000f9c00000, 0x0000000100000000)
  eden space 52224K, 0% used [0x00000000f5800000,0x00000000f5800000,0x00000000f8b00000)
  from space 8704K, 9% used [0x00000000f8b00000,0x00000000f8bcc010,0x00000000f9380000)
  to   space 8704K, 0% used [0x00000000f9380000,0x00000000f9380000,0x00000000f9c00000)
 PSOldGen        total 137216K, used 0K [0x00000000e0a00000, 0x00000000e9000000, 0x00000000f5800000)
  object space 137216K, 0% used [0x00000000e0a00000,0x00000000e0a00000,0x00000000e9000000)
 PSPermGen       total 22528K, used 9472K [0x00000000db800000, 0x00000000dce00000, 0x00000000e0a00000)
  object space 22528K, 42% used [0x00000000db800000,0x00000000dc1402f8,0x00000000dce00000)

Code Cache  [0xfffffd7ff9c00000, 0xfffffd7ffa000000, 0xfffffd7ffcc00000)
 total_blobs=280 nmethods=35 adapters=207 free_code_cache=49827264 largest_free_block=15680

Dynamic libraries:
0x0000000000400000  /****/bin/tlisten
0xfffffd7fe8fc0000  /****/lib/libgpnet.so.71
0xfffffd7fe8df0000  /****/lib/libtux.so.71
0xfffffd7feae10000  /****/lib/libbuft.so.71
0xfffffd7fe8db0000  /****/lib/libfml.so.71
0xfffffd7fe8d70000  /****/lib/libfml32.so.71
0xfffffd7fe9060000  /****/lib/libengine.so.71
0xfffffd7ffe8cd000  /lib/64/libpthread.so.1
0xfffffd7ffe8cb000  /lib/64/librt.so.1
0xfffffd7ffe880000  /lib/64/libsocket.so.1
0xfffffd7ffe7d0000  /lib/64/libnsl.so.1
0xfffffd7ffeeb0000  /lib/64/libm.so.2
0xfffffd7ffdcfc000  /lib/64/libthread.so.1
0xfffffd7fff110000  /lib/64/libc.so.1
0xfffffd7feadf0000  /****/lib/libutrace.so.71
0xfffffd7feadb0000  /****/lib/libgiconv.so.71
0xfffffd7ffd200000  /usr/lib/64/libCrun.so.1
0xfffffd7fe8000000  /****/lib/libtmjmx.so
0xfffffd7ffe8b0000  /lib/64/libmd.so.1
0xfffffd7ffe7b0000  /lib/64/libmp.so.2
0xfffffd7ff0ac0000  /****/bin/jdk1.6.0_37/jre/lib/amd64/server/libjvm.so
0xfffffd7ffde3f000  /usr/lib/64/libsched.so.1
0xfffffd7ffdcfb000  /lib/64/libdl.so.1
0xfffffd7ffcdb0000  /lib/64/libm.so.1
0xfffffd7ffceaf000  /lib/64/libdoor.so.1
0xfffffd7ffcd70000  /usr/lib/64/libdemangle.so.1
0xfffffd7fe9000000  /****/lib/registry.so
0xfffffd7ff0a90000  /****/bin/jdk1.6.0_37/jre/lib/amd64/libverify.so
0xfffffd7ff0a40000  /****/bin/jdk1.6.0_37/jre/lib/amd64/libjava.so
0xfffffd7ff0950000  /****/bin/jdk1.6.0_37/jre/lib/amd64/libjdwp.so
0xfffffd7ff0930000  /****/bin/jdk1.6.0_37/jre/lib/amd64/libnpt.so
0xfffffd7ff0910000  /usr/lib/iconv/amd64/UTF-8%646.so
0xfffffd7ff08f0000  /usr/lib/iconv/amd64/646%UTF-8.so
0xfffffd7ff0a10000  /****/bin/jdk1.6.0_37/jre/lib/amd64/libzip.so
0xfffffd7ff08d0000  /****/bin/jdk1.6.0_37/jre/lib/amd64/libdt_socket.so
0xfffffd7fe6bc0000  /****/lib/libtuxjni.so
0xfffffd7fe8ca0000  /****/lib/libtmib.so.71
0xfffffd7fe8c10000  /****/lib/libqm.so.71
0xfffffd7ff09f0000  /****/bin/jdk1.6.0_37/jre/lib/amd64/libj2pkcs11.so
0xfffffd7ffde60000  /usr/lib/amd64/libpkcs11.so
0xfffffd7ffdd10000  /lib/64/libcryptoutil.so.1
0xfffffd7ffdbf0000  /usr/lib/security/64/pkcs11_softtoken.so
0xfffffd7ffdbb0000  /usr/lib/64/libsoftcrypto.so.1
0xfffffd7ffdb80000  /lib/64/libgen.so.1
0xfffffd7ff09c0000  /****/bin/jdk1.6.0_37/jre/lib/amd64/libnet.so
0xfffffd7fef430000  /****/bin/jdk1.6.0_37/jre/lib/amd64/librmi.so

VM Arguments:
jvm_args: -Djava.compiler=NONE -Dmyapp.jmx.auth=tux -Djava.security.policy= -Dmyapp.jmx.accessfile=/****/jmx/jmxaccess.properties -Dmyapp.jmx.addr=rmi://****:26999 -Xms200m -Xmx500m -Dmyapp.tlisten.nlsaddr=//****:27789 -XX:+HeapDumpOnCtrlBreak -Xdebug -Xnoagent -Xrunjdwp:transport=dt_socket,address=8000,server=y,suspend=n 
java_command: <unknown>
Launcher Type: generic

Environment Variables:
JAVA_HOME=/****/bin/jdk1.6.0_37/jre
PATH=/****/bin:/****/bin/jdk1.6.0_37/jre/bin/amd64:/****/bin:/****/bin/jdk1.6.0_37/jre/bin/amd64:/****/bin:/****/bin/jdk1.6.0_37/jre/bin/amd64:/****/bin:/****/bin/jdk1.6.0_37/jre/bin/amd64:/****/bin:/****/bin/jdk1.6.0_37/jre/bin/amd64:/****/bin:/****/bin/jdk1.6.0_37/jre/bin/amd64:/****/bin:/****/bin/jdk1.6.0_37/jre/bin/amd64:/****/bin/jdk1.6.0_37/bin/amd64/:/****/bin:/****/bin/jdk1.6.0_37/jre/bin/amd64:/****/bin:/****/bin/jdk1.6.0_37/jre/bin/amd64:/****/bin:/****/bin/jdk1.6.0_37/jre/bin/amd64:/****/bin:/****/bin/jdk1.6.0_37/jre/bin/amd64:/****/bin:/****/bin/jdk1.6.0_37/jre/bin/amd64:/****/bin:/****/bin/jdk1.6.0_37/jre/bin/amd64:/****/bin:/****/bin/jdk1.5.0_22/jre/bin:/****/bin:/****/bin/jdk1.6.0_37/jre/bin/amd64:/****/bin:/****/bin/jdk1.6.0_37/jre/bin/amd64:/****/bin:/****/bin/jdk1.6.0_37/jre/bin/amd64:/****/bin:/****/bin/jdk1.6.0_37/jre/bin:/****/bin:/****/bin/jdk1.6.0_37/jre/bin:/****/bin:/****/bin/jdk1.6.0_37/jre/bin:/usr/bin:/bin
SHELL=/bin/ksh

Signal Handlers:
SIGSEGV: [libjvm.so+0xccfbb0], sa_mask[0]=0xffbffeff, sa_flags=0x0000000c
SIGBUS: [libjvm.so+0xccfbb0], sa_mask[0]=0xffbffeff, sa_flags=0x0000000c
SIGFPE: [libjvm.so+0x43f880], sa_mask[0]=0xffbffeff, sa_flags=0x0000000c
SIGPIPE: [libjvm.so+0x43f880], sa_mask[0]=0xffbffeff, sa_flags=0x0000000c
SIGXFSZ: [libjvm.so+0x43f880], sa_mask[0]=0xffbffeff, sa_flags=0x0000000c
SIGILL: [libjvm.so+0x43f880], sa_mask[0]=0xffbffeff, sa_flags=0x0000000c
SIGUSR1: SIG_IGN, sa_mask[0]=0x00000000, sa_flags=0x00000000
SIGUSR2: SIG_IGN, sa_mask[0]=0x00000000, sa_flags=0x00000000
SIGQUIT: [libjvm.so+0xb81a00], sa_mask[0]=0xffbffeff, sa_flags=0x00000004
SIGHUP: SIG_IGN, sa_mask[0]=0x00000000, sa_flags=0x00000000
SIGINT: SIG_IGN, sa_mask[0]=0x00000000, sa_flags=0x00000000
SIGTERM: [libjvm.so+0xb81a00], sa_mask[0]=0xffbffeff, sa_flags=0x00000004
SIG39: [libjvm.so+0xb84870], sa_mask[0]=0x00000000, sa_flags=0x00000008
SIG40: [libjvm.so+0x43f880], sa_mask[0]=0xffbffeff, sa_flags=0x0000000c

---------------  S Y S T E M  ---------------

OS:                      Oracle Solaris 11 Express snv_151a X86
     Copyright (c) 2010, Oracle and/or its affiliates.  All rights reserved.
                           Assembled 04 November 2010

uname:SunOS 5.11 snv_151a i86pc  (T2 libthread)
rlimit: STACK 10240k, CORE infinity, NOFILE 65536, AS infinity
load average:1.16 1.15 0.84

CPU:total 2 (32 cores per cpu, 2 threads per core) family 6 model 44 stepping 2, cmov, cx8, fxsr, mmx, sse, sse2, sse3, ssse3, sse4.1, sse4.2, ht

Memory: 4k page, physical 8191612k(1152580k free)

vm_info: Java HotSpot(TM) 64-Bit Server VM (20.12-b01) for solaris-amd64 JRE (1.6.0_37-b06), built on Sep 24 2012 11:42:33 by "" with Workshop 5.8

time: Fri Oct 26 09:29:22 2012
elapsed time: 0 seconds 
```

以下是核心转储堆栈跟踪

```
Reading librmi.so
t@4 (l@4) terminated by signal ABRT (Abort)
0xfffffd7fff22dd1a: _lwp_kill+0x000a:   jae      _lwp_kill+0x18 [ 0xfffffd7fff22dd28, .+0xe ]
(dbx) where
current thread: t@4
=>[1] _lwp_kill(0x4, 0x6, 0xffffff02cd0cbc00, 0xfffffd7fff22e54b, 0x0, 0xfffffd7ffe7addc0), at 0xfffffd7fff22dd1a 
  [2] thr_kill(0x0, 0x0, 0x0, 0x0, 0x0, 0x0), at 0xfffffd7fff2224dd 
  [3] raise(0x0, 0x0, 0x0, 0x0, 0x0, 0x0), at 0xfffffd7fff1ce9f1 
  [4] abort(0x0, 0x0, 0x0, 0x0, 0x0, 0x0), at 0xfffffd7fff1a41a1 
  [5] os::abort(0x0, 0x0, 0x0, 0x0, 0x0, 0x0), at 0xfffffd7ff16403e4 
  [6] VMError::report_and_die(0x0, 0x0, 0x0, 0x0, 0x0, 0x0), at 0xfffffd7ff178f66a 
  [7] JVM_handle_solaris_signal(0x0, 0x0, 0x0, 0x0, 0x0, 0x0), at 0xfffffd7ff0eff703 
  [8] signalHandler(0x0, 0x0, 0x0, 0x0, 0x0, 0x0), at 0xfffffd7ff0eff88e 
  [9] __sighndlr(0x0, 0x0, 0x0, 0x0, 0x0, 0x0), at 0xfffffd7fff224d66 
  [10] call_user_handler(0x0, 0x0, 0x0, 0x0, 0x0, 0x0), at 0xfffffd7fff217a1c 
  [11] sigacthandler(0x0, 0x0, 0x0, 0x0, 0x0, 0x0), at 0xfffffd7fff217c43 
  ---- called from signal handler with signal 8 (SIGFPE) ------
  [12] GCAdaptivePolicyCounters::update_counters_from_policy(0x475500, 0x3300000, 0x880000, 0x461a60, 0x46c860, 0xfffffd7ffee52490), at 0xfffffd7ff0f2b898 
  [13] PSGCAdaptivePolicyCounters::update_counters_from_policy(0x0, 0x0, 0x0, 0x0, 0x0, 0x0), at 0xfffffd7ff0f2b8e7 
  [14] PSGCAdaptivePolicyCounters::update_counters(0x0, 0x0, 0x0, 0x0, 0x0, 0x0), at 0xfffffd7ff0f2b5da 
  [15] PSScavenge::invoke_no_policy(0x0, 0x0, 0x0, 0x0, 0x0, 0x0), at 0xfffffd7ff1680c44 
  [16] PSMarkSweep::invoke(0x0, 0x0, 0x0, 0x0, 0x0, 0x0), at 0xfffffd7ff1673986 
  [17] VM_ParallelGCSystemGC::doit(0x0, 0x0, 0x0, 0x0, 0x0, 0x0), at 0xfffffd7ff0ff1398 
  [18] VM_Operation::evaluate(0x0, 0x0, 0x0, 0x0, 0x0, 0x0), at 0xfffffd7ff0f32384 
  [19] VMThread::evaluate_operation(0x0, 0x0, 0x0, 0x0, 0x0, 0x0), at 0xfffffd7ff0f325fa 
  [20] VMThread::loop(0x0, 0x0, 0x0, 0x0, 0x0, 0x0), at 0xfffffd7ff106d0a0 
  [21] VMThread::run(0x0, 0x0, 0x0, 0x0, 0x0, 0x0), at 0xfffffd7ff106c55f 
  [22] java_start(0x0, 0x0, 0x0, 0x0, 0x0, 0x0), at 0xfffffd7ff163f469 
  [23] _thrp_setup(0x0, 0x0, 0x0, 0x0, 0x0, 0x0), at 0xfffffd7fff2249d4 
  [24] _lwp_start(0x0, 0x0, 0x0, 0x0, 0x0, 0x0), at 0xfffffd7fff224ca0 
```

# c# - 从数据库中读取数据并将其显示在文本字段中

> ID：13084717
> 
> 赞同：1
> 
> 时间：2012-10-26T09:58:10.920
> 
> 标签：c#, asp.net, dataset, sqldataadapter

```
using System;
using System.Data;
using System.Data.SqlClient;
using System.Configuration;

public partial class _Default : System.Web.UI.Page
{
protected void Button1_Click(object sender, EventArgs e)
{
    SqlConnection conn = new SqlConnection(
        "Data Source=PTZ1\\SQLEXPRESS;Initial Catalog = test; Integrated Security=SSPI;User ID=sa; Password=sa@; Trusted_Connection=True;");

    DataSet ds = new DataSet();
    SqlDataAdapter adapter = new SqlDataAdapter();
    try
    {
        conn.Open();
        SqlCommand cmd = new SqlCommand("select * from testing", conn);
        adapter.SelectCommand = cmd;
        adapter.Fill(ds, "First Table");

       foreach (DataTable tables in ds.Tables)
        {
            ListBox1.Items.Add(tables.TableName);

        }
       conn.Close();
    }
    catch (Exception ex)
    {
        Label1.Text = "Error in execution " + ex.ToString();
    }
} 
```

}

我有以下程序，我正在从表中读取值，并希望在单击按钮时在文本字段中显示表值。现在，当我单击按钮时，它只会继续在列表框中显示**第一个表**。

有人可以指导我解决我的错误吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T10:02:21.823

我想您需要显示存在于`DataRow`a中的值`DataTable`。在下面的代码片段中，columnName 指的`Column`是`testing Table`您要在`ListBox`.

```
foreach (DataRow row in ds.Tables["First Table"].Rows)
{
    ListBox1.Items.Add(row["columnName"].ToString());
} 
```

或者

```
foreach (DataRow row in ds.Tables[0].Rows)
{
    ListBox1.Items.Add(row["columnName"].ToString());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T10:05:56.213

`tables.TableName`给出表的名称，即“第一表”本身。所以，它一直显示相同。

最好使用此代码。

```
 if(!ds.Tables.Count>1)
 { 
foreach (DataRow row in ds.Tables[0].Rows) 
{
        ListBox1.Items.Add(row["columnName"].ToString());
 } 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T10:07:21.110

```
 SqlCommand cmd = new SqlCommand("select * from testing", conn);
            MySqlDataReader msqlreader = cmd.ExecuteReader();
            while (msqlreader.Read())
            { 
            listBox1.Items.Add(msqlreader(0);
            } 
```

我不确定这是否是您需要的，但希望对您有所帮助

# jquery - jquery 和 settimeout 函数的问题，在浏览器上显示弹出块

> ID：13084718
> 
> 赞同：3
> 
> 时间：2012-10-26T09:58:22.713
> 
> 标签：jquery, popup, settimeout, blocking, simplemodal

我想在新选项卡上使用 jquery 提交表单，并在父屏幕上使用 messgae。实际上表单应该在 10 秒后提交到新页面（我们将在屏幕上显示等待消息）。但它在以下代码下运行时在页面上显示弹出窗口阻止程序

这是示例代码

```
 jQuery(".submit-quotecriteria a").attr('class', 'getaquotebutton1');
  jQuery('.submit-quotecriteria .getaquotebutton1').click(function()
  {           

    var t=setTimeout(function(){processend(); },10000);   
  });
  function processend()
  {
      jQuery.fn.modalBox("close"); 
      jQuery("#quotecriteria_form").submit();
      return false;
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-15T15:24:39.667

```
jQuery('.submit-quotecriteria a').addClass('getaquotebutton1')
.on("click", function()
{           
  var t = setTimeout(function()
  {
    processend();
  }, 10000);
});

function processend()
{
  jQuery.fn.modalBox('close');
  jQuery('#quotecriteria_form').submit();
  return false;
} 
```

# ipad - html5 视频无法在 Chrome iPad 上加载

> ID：13084723
> 
> 赞同：2
> 
> 时间：2012-10-26T09:58:54.213
> 
> 标签：ipad, google-chrome, html5-video

由于某些原因，html5 视频无法在 iPad 上的 chrome 上播放，但在 safari iPad 上播放良好。任何想法为什么？它适用于 Mac/PC 上的 chrome。

```
<video id="homepage_videoplayer" 
  poster="http://actisku.videohosting.fr/medias/videos/v_actisku_visualproject_sephora_61.png" 
  preload="auto" loop="loop"  autoplay="autoplay" width="979" height="365">

    <source src="http://actisku.videohosting.fr/medias/videos/v_actisku_visualproject_sephora_61.mp4" type="video/mp4" />
    <source src="http://actisku.videohosting.fr/medias/videos/v_actisku_visualproject_sephora_61.ogv" type='video/ogg; codecs="theora, vorbis"' />

</video> 
```

链接：[http ://actisku.videohosting.fr/test_integration2.html](http://actisku.videohosting.fr/test_integration2.html)

# java - 新闻的代码拆分/格式 - 需要权威提及

> ID：13084726
> 
> 赞同：4
> 
> 时间：2012-10-26T09:59:19.907
> 
> 标签：java, c++, python, ruby, formatting

我正在寻找快速有效的方法来拆分代码并将其准备好供媒体使用。我在为 coder 杂志工作，为新闻准备代码总是一个大问题，因为一栏中的空间是有限的。现在我是手动做的，非常烦人。让我给你举个例子。这是我现在正在处理的代码（已经以我自己的风格格式化/吐出），它适用于 Android：

```
private void GetFiles() {
  listBox1.Items.Clear();
  var storeFile = IsolatedStorageFile. 
    GetUserStoreForApplication();
  string fileString = System.IO.Path.GetFileName("*");
  string[] files = storeFile.GetFileNames("*");
  for (int i = 0; i < storeFile.GetFileNames("/" + 
      fileString).Length; i++) {
    String fileName = storeFile.GetFileNames(fileString)[i];
    String ext = fileName.Substring(fileName.Length - 3);
    if (ext == "png") listBox1.Items.Add(fileName); 
```

} }

注意

```
var storeFile = IsolatedStorageFile. 
    GetUserStoreForApplication(); 
```

是一条线。对于 press 列来说它太长了，这就是为什么我用最近的逻辑中断（这里 - 点）分割并将行的第二部分缩进 4 个空格（内联总是缩进 2 个空格）。我知道，这不是最好的方法，很难理解。这就是为什么我正在寻找来自广泛软件开发人员的权威答案。我不仅要使用 C++ 代码，还要使用 Assembler、JavaScript、Ruby 和 Python。最后一个是一个单独的问题——它依赖于缩进，所以我必须特别小心缩进。

**那么，问题来了：**在杂志有限的空间内，哪种方式最好格式化代码？**你**更喜欢哪种方式？请提出你自己的想法。每个答案都受到高度赞赏。

**UPD**：这是它现在在杂志上的样子：![当前外观](../Images/ef3e680c1d70fc8b5fb752fb14a9846d.png)。它可以帮助您理解问题。太长的行被“\”分割，行的最后一部分缩进。不太明显，不是吗？=(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T10:13:30.413

Why don't you simply use Eclipse built-in code formatter. You can easily configure the maxline length amongst other things. Then you simply use ctrl+shift+f to format according to your defined codestyle.

Ah, I didn't realize this wasn't a specific Java question. The code you pasted here doesn't compile and the editor refuses to format it. But if I use your screenshot it will, by default look like this (i changed max line length a bit tho):

```
if (Input.GetKeyDown("space")) {
    Vector3 prosition = new Vector3(
        tranform.position.x,
        transform.position.y + 1,
        transform.position.z);
    }
    Instantiate(ProjectilePrefab, position,
            Quaternion.Identiy);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T10:27:31.103

所以......在这个循环中，您想要检索完整的文件列表，测试长度，然后再次获取完整的文件列表（除了略有不同，因为您省略了`"/"`前缀）并希望仍然存在`i`th 元素。您重复该过程的次数与文件的数量一样多，以实现`O(2n^2)`.

您当然是在发布此功能作为不该做的示例，对吧？

为了给出我对布局的偏好，我宁愿你在`=`适合的情况下拆分......但是现在你已经使用示例图像进行了编辑，看起来你可以玩的空间比你最初暗示的要少。

如果您实际上是在尝试发布一种成本较低的算法，您可能会选择将结果搜索存储在一个变量中，并缩短该循环中的大部分行......

# php - PHP Bcrypt 找回密码

> ID：13084728
> 
> 赞同：1
> 
> 时间：2012-10-26T09:59:21.823
> 
> 标签：php, bcrypt

因此，在有人在网站上注册后，我使用 bcrypt 加密他们的密码，该密码存储在数据库的密码列中。现在，如果他们忘记了密码，我想通过电子邮件将密码发送给他们，以便他们登录并更改密码。如何反转 bcrypt 加密以取回原始密码？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-26T10:01:05.650

Bcrypt 是一种单向哈希。你不能解密它。您可以做的是向他们发送一个重置链接，单击该链接将允许他们设置新密码。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-26T10:01:04.290

你还没有理解`bcrypt`. 如果有一个简单的反向功能，没有人会`bcrypt`再使用了。使用密码重置程序而不是发送明文密码。

请参阅[忘记密码备忘单](https://cheatsheetseries.owasp.org/cheatsheets/Forgot_Password_Cheat_Sheet.html)。

# android - 如何在android中以圆形方式相对于其触摸中心旋转图像

> ID：13084731
> 
> 赞同：2
> 
> 时间：2012-10-26T09:59:27.847
> 
> 标签：android, geometry, ontouchlistener, image-rotation

我正在尝试在触摸时相对于其中心旋转圆形图像。

我知道这可以使用 **OnTouchListener 和 onTouch() 方法**....通过使用 MotionEvent.ACTION_DOWN、MotionEvent.ACTION_MOVE 和 MotionEvent.ACTION_UP 事件来完成。但我无法找出旋转的角度......从初始位置触摸不同的点（即，将初始位置设为 0 度并在旋转后找到每个角度......就像 0,90.180,270 度。 ..ETC ）。

基本上我的想法是在将图像旋转一定角度后确定图像的实际位置。

请看下图： ![在此处输入图像描述](../Images/5466bc8fea09073b125330a316249b61.png)

请分享您对这个问题的想法。

任何形式的帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-02-15T10:37:37.873

你需要这样：

[![在此处输入图像描述](../Images/3d061345845ebdf9fcc5375ee47b3d47.png)](https://i.stack.imgur.com/Gow5U.gif)

步骤 1\. 将 JitPack 存储库添加到您的构建文件中将其添加到存储库末尾的根 build.gradle 中：

```
allprojects {
    repositories {
        ...
        maven { url 'https://jitpack.io' }
    }
} 
```

步骤 2\. 添加依赖项

```
dependencies {
    implementation 'com.github.sheetalkumar105:ZoomImageView-android:1.01'
} 
```

步骤 3\. 在布局中添加 ZoomImageView

```
<com.impulsive.zoomimageview.ZoomImageView
  android:layout_width="match_parent"
  android:layout_height="300dp"
  android:src="@drawable/sample"
  android:scaleType="matrix"
  app:rotation="true" 
  app:scaledown="true"
  />

app:rotation="true" // Allow to rotate image in view. Default value is true.

app:scaledown="true" // Allow to ZoomOut less than container size. Default value is false. 
```

完整代码：

[https://github.com/sheetalkumar105/ZoomImageView-android/blob/master/zoomimageview/src/main/java/com/impulsive/zoomimageview/ZoomImageView.java](https://github.com/sheetalkumar105/ZoomImageView-android/blob/master/zoomimageview/src/main/java/com/impulsive/zoomimageview/ZoomImageView.java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T10:33:25.737

对于旋转图像，请参见：[Android：将 imageview 中的图像旋转一个角度](https://stackoverflow.com/questions/8981845/androidrotate-image-in-imageview-by-an-angle)

触摸点相对于您的底座的角度可以这样计算：`arctan((x1 - x0)/(y1 - y0))`其中 (x0, y0) - 圆心，(x1, y1) - 触摸点。请注意 y1 == y0 的情况。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-26T13:55:53.943

要找到任何圆的角度，公式是正确的，即**Math.toDegrees(Math.atan2(x1-x0, y0-y1))**

在圆圈中，我们使用一点点三角法来计算角度，所以我们必须取一个基数，它对应 (x0, y0) 和其他点对应 (x1, y1)。现在根据我们的公式，我们需要给出两个参数，即**Base**和**Parpendicular**。所以**base**是**x1-x0**和**parpendicular**是**y0-y1**。请尝试一下，我认为它会帮助你！

# php - 首先显示较旧的帖子

> ID：13084736
> 
> 赞同：5
> 
> 时间：2012-10-26T09:59:36.973
> 
> 标签：php, html, wordpress

我正在尝试首先在 wordpress 中显示较旧的帖子：

我正在使用此代码获取当前类别的帖子列表：

```
<ul id="submenu_productos" class="clearfix">
    <?php
        $IDOutsideLoop = $post->ID;
        while( have_posts() ) {
            the_post();
            foreach( ( get_the_category() ) as $category )
                $my_query = new WP_Query('category_name=' . $category->category_nicename . '&orderby=date&order=desc&showposts=100');
            if( $my_query ) {
                while ( $my_query->have_posts() ) {
                    $my_query->the_post(); ?>
            <li<?php print ( is_single() && $IDOutsideLoop == $post->ID ) ? ' class="test"' : ''; ?>>
                <a href="<?php the_permalink(); ?>" title="<?php the_title(); ?>"><?php the_title(); ?></a> |
            </li>
    <?php
            }
        }
    }
    ?>
</ul> 
```

如果我更改`"&order=desc&"`为`"&order=ASC&"`它仍然具有相同的顺序。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T10:30:28.130

您是否有机会使用 Post Types Order 插件？有一个设置会覆盖排序（自动排序排序选项）。

# visual-studio - TFS 分支与合并

> ID：13084749
> 
> 赞同：2
> 
> 时间：2012-10-26T10:00:16.383
> 
> 标签：visual-studio, version-control, tfs, merge

这是 TFS 合并的可接受方案吗？如果是这样，我该如何进行合并：

我们有一个在 TFS 中分支的网站。原始网站分支 A 已部署到 Live 站点。分支 B 被修改为在更新的数据库结构上运行（CRM 系统版本升级）。

在版本 A 上继续开发。在版本 B 上也进行了一些更改。

现在，我需要将对版本 A 所做的所有更改放入版本 B，以便版本 B 仍然在新的 CRM 数据库上运行，但包括自分支以来对版本 A 所做的所有更改。

在 TFS 合并工具中，哪个是源，哪个是目标？

额外的问题：我一直在努力解决这个问题，我正在考虑一种不同的方法——我能否以某种方式将当前版本 B 与分支点的版本进行比较，看看做了哪些更改？没有很多，我可能会采用版本 A 的新分支并复制更改。我将如何比较两个完整版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T10:04:24.887

好吧，我猜你自己回答了：

> 对版本 A 所做的所有更改，到版本 B

源 = A，目标 = B

奖励答案：版本b分支文件夹上的鼠标右键：比较。源路径=版本b，最新版本；目标路径 = 版本 b，选择第一个变更集（这将是创建分支时）。

# apache2 - 如何使用单个 apache 服务器创建两个不同的域名

> ID：13084751
> 
> 赞同：1
> 
> 时间：2012-10-26T10:00:28.687
> 
> 标签：apache2

我正在使用 ubundu OS 我的高级人员分配了一项使用单个 apache 创建两个不同 Web 域名的工作。示例：第一个域名：www.myassignment.com 第二个域名：www.mymentortask.com

当我运行这两个域时，它应该可以在我的浏览器上运行。这怎么可能，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T10:01:53.780

你必须使用“虚拟主机”，这里有很好的记录：[http ://httpd.apache.org/docs/2.2/vhosts/](http://httpd.apache.org/docs/2.2/vhosts/)

# django - Django - 更改语言环境的时间格式

> ID：13084753
> 
> 赞同：7
> 
> 时间：2012-10-26T10:00:45.457
> 
> 标签：django, localization, django-templates

我正在做一个使用 l10n 的项目。
如果我将语言环境设置为 EN 并尝试显示时间（08:00），我会得到：

```
8 a.m. 
```

如果我将语言环境设置为 FR，我会得到：

```
08:00:00 
```

但它应该是这样的：

```
8h 
```

为什么我会得到这种格式？我怎样才能得到正确的格式？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-26T10:31:31.123

显然没有为 FR 语言环境设置默认时间格式。

您可以做的是配置[格式模块](https://docs.djangoproject.com/en/dev/ref/settings/#std:setting-FORMAT_MODULE_PATH)：

```
# myproject/settings.py
FORMAT_MODULE_PATH = 'myproject.formats' 
```

创造它：

```
myproject/
    formats/
        __init__.py
        fr/
            __init__.py
            formats.py 
```

并定义法语格式：

```
# myproject/formats/fr/formats.py
TIME_FORMAT = 'G:i' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T10:48:58.013

根据我的理解，如果您使用本地化，我不相信您可以更改格式：[https](https://docs.djangoproject.com/en/dev/topics/i18n/timezones/) ://docs.djangoproject.com/en/dev/topics/i18n/timezones/ 。

是`USE_L10N = True`吗？如果是这样，它将覆盖`settings.TIME_FORMAT`和`settings.TIME_INPUT_FORMATS`值：[https ://docs.djangoproject.com/en/dev/ref/settings/#time-format](https://docs.djangoproject.com/en/dev/ref/settings/#time-format)

您可以根据所选语言编写自己的“本地化”上下文处理器或模板过滤器。

# php - 选择任何工作日作为开始日期以显示在日历上

> ID：13084755
> 
> 赞同：0
> 
> 时间：2012-10-26T10:00:48.703
> 
> 标签：php

我创建了以下函数，它打印从星期日（到星期六）开始的日历......但我希望能够选择任何一天作为第一天......例如。第一天是星期三...我试过但无法正常工作...你能帮我解决这个问题吗？

我知道如何操纵天标题数组来反映这个开始日，但日历天不知何故搞砸了。

```
function testme() {
        $month = 8;
        $year = 2012;
        $days = array("Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday");

    echo $firstDayOfMonth = date('w',mktime(0,0,0,$month,1,$year)); // a zero based day number
    $daysInMonth     = date('t',mktime(0,0,0,$month,1,$year));

    $calendar = ' <!-- start cal -->';
    $calendar = '<table border="1" class="calendar">'."\r\n";
    $calendar .= '<thead><tr><th class="calendar-day-head">'.implode('</th><th class="calendar-day-head">',$days ).'</th></tr></thead><tbody>';
    $calendar .= "\r\n".'<tr class="calendar-row">';
    $calendar .= str_repeat('<td class="calendar-day-np">&nbsp;</td>', $firstDayOfMonth); // "blank" days until the first of the current week
    $calendar .= '';

    $dayOfWeek = $firstDayOfMonth + 1; // a 1 based day number: cycles 1..7 across the table rows

    for ($dayOfMonth = 1; $dayOfMonth <= $daysInMonth; $dayOfMonth++)
    {
        $date = sprintf( '%4d-%02d-%02d', $year, $month, $dayOfMonth );

        $calendar .= '';
        $calendar .= '<td class="calendar-day">
            '.$dayOfMonth.' <br />';

        $calendar .= '';

        $calendar .= '</td>'."\r\n";
        if ($dayOfWeek >= 7)
        {
            $calendar.= '</tr>'."\r\n";
            if ($dayOfMonth != $daysInMonth)
            {
                $calendar .= '<tr  class="calendar-row">';
            }
            $dayOfWeek = 1;
        }
        else
        {
            $dayOfWeek++;
        }
    }
    //echo 8-$dayOfWeek;
    $calendar .= str_repeat('<td  class="calendar-day-np">&nbsp;</td>', 8 - $dayOfWeek); // "blank" days in the final week
    $calendar .= '</tr></table>';
    $calendar .= ' <!-- end cal -->';
    echo $calendar; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T10:43:20.960

您需要`$firstDayOfMonth`使用 2012 年 10 月根据数组的第一天（在此示例中我从星期一开始）编辑一个值：

```
<?php
function testme() {
        $month = 10;
        $year = 2012;
        $days = array("Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday");

    echo $firstDayOfMonth = date('w',mktime(0,0,0,$month,1,$year)); // a zero based day number

    /* IMPORTANT STATEMENT
       value based on the starting day of array
       E.G. (starting_day = value):
       Tuesday = 5
       Wednesday = 4
       Thursday = 3
       Friday = 2
       Saturday = 1
       Sunday = 0
       Monday = -1

    */

    $firstDayOfMonth = $firstDayOfMonth - 1;

    /* END IMPORTANT STATEMENT */

    $daysInMonth     = date('t',mktime(0,0,0,$month,1,$year));

    $calendar = ' <!-- start cal -->';
    $calendar = '<table border="1" class="calendar">'."\r\n";
    $calendar .= '<thead><tr><th class="calendar-day-head">'.implode('</th><th class="calendar-day-head">',$days ).'</th></tr></thead><tbody>';
    $calendar .= "\r\n".'<tr class="calendar-row">';
    $calendar .= str_repeat('<td class="calendar-day-np">&nbsp;</td>', $firstDayOfMonth); // "blank" days until the first of the current week
    $calendar .= '';

    $dayOfWeek = $firstDayOfMonth + 1; // a 1 based day number: cycles 1..7 across the table rows

    for ($dayOfMonth = 1; $dayOfMonth <= $daysInMonth; $dayOfMonth++)
    {
        $date = sprintf( '%4d-%02d-%02d', $year, $month, $dayOfMonth );

        $calendar .= '';
        $calendar .= '<td class="calendar-day">
            '.$dayOfMonth.' <br />';

        $calendar .= '';

        $calendar .= '</td>'."\r\n";
        if ($dayOfWeek >= 7)
        {
            $calendar.= '</tr>'."\r\n";
            if ($dayOfMonth != $daysInMonth)
            {
                $calendar .= '<tr  class="calendar-row">';
            }
            $dayOfWeek = 1;
        }
        else
        {
            $dayOfWeek++;
        }
    }
    //echo 8-$dayOfWeek;
    $calendar .= str_repeat('<td  class="calendar-day-np">&nbsp;</td>', 8 - $dayOfWeek); // "blank" days in the final week
    $calendar .= '</tr></table>';
    $calendar .= ' <!-- end cal -->';
    echo $calendar;

}
?> 
```

这`/* IMPORTANT STATEMENT */`是关键，因为 mktime() 方法根据星期日作为一周的第一天创建日期，因此它会覆盖它。

在此处查看结果：[链接](http://testing.dpwebdev.co.uk/stackoverflow/calendar/calendar.php)

# java - Generic 实例作为方法参数

> ID：13084756
> 
> 赞同：2
> 
> 时间：2012-10-26T10:00:49.067
> 
> 标签：java, class, generics

我在课堂上使用泛型。*MyObject*必须使用 T 作为类，例如 new MyObject(Long.class)。在方法*equal*中，我想确保给方法的参数是 T 的一个实例。

`Object<T>`我知道，它不是有效的 Java 源代码。我将它添加到代码示例中是为了向您展示我的意思，即该值是 T 的一个实例。

但是实现equal方法的正确方法是什么？

```
public class MyObject<T extends Class> {

    public boolean equal(Object<T> value) {
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T10:03:09.387

如果您要覆盖该`equals()`方法，那么您*应该*检查用于比较相等性的对象的类。

1.  签名将表明您可以通过任何`Object`
2.  可以在不同的对象类型之间定义相等（不经常发生，但它是有效的）

如果您没有覆盖`equals()`，我会将您的方法名称更改为*distinct*。否则生活会很混乱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T10:06:43.070

`Assuming that you don't want to override equals`. 我认为你应该在下面做

```
public class MyObject<T> {

    public boolean isEquals(T obj) {
        return false;
    };
} 
```

你的情况不需要，`Class`因为你正在传递`Type`给`MyObject`

```
 MyObject<Long> myObject = new MyObject<Long>();
    myObject.isEquals(Long.valueOf(10);//It will only allow Long
    myObject.isEquals(10);             //Fails for int 
```

参考

1.  [泛型类型](http://docs.oracle.com/javase/tutorial/java/generics/types.html)
2.  [课程：泛型](http://docs.oracle.com/javase/tutorial/java/generics/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T10:11:04.573

假设您*不*打算覆盖`Object.equals(Object)`：

`T extends Class`没有什么意义，因为`Class`无论如何都是最终的，所以唯一的`T`可能是`Class<U>`some `U`，然后你不妨让`U`成为类型参数。所以你可能想要它：

```
public class MyClass<T> {
  private Class<T> cl ;
  public MyClass(Class<T> cl) {
    this.cl = cl ;
    ...
  }
  public boolean equal(T value) {
    return true;
  }
} 
```

然后你开始写，说，`new MyClass<Long>(Long.class)`。

但是你确定你需要`cl`在运行时存储参数吗？通常你会完全忽略它，所以你只写`new MyClass<Long>()`.

# database - Magento：在 2 个虚拟主机之间共享数据库

> ID：13084759
> 
> 赞同：0
> 
> 时间：2012-10-26T10:01:02.897
> 
> 标签：database, magento, share

我有 2 个虚拟主机：

dev.example.com, dev1.example.com

我不想有 2 个分贝，但只有 1 个。

所以我将两个 vh 连接到同一个数据库，但是当我转到 dev1.example.com 时，我重定向到 dev.example.com。

我认为由于我设置为 dev.example.com 的“web/secure/url”和“web/unsecure/url”。

我正在尝试在代码中进行切换，但找不到 magento 设置 url 的点。

你有什么想法或做了一些切换代码来实现这种行为吗？

谢谢卢卡

编辑：虚拟主机具有不同的文档根目录，它们是 2 个不同的开发人员环境。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T10:09:50.610

首先，您必须在 magento 的后台（菜单系统/管理商店）中创建 2 个不同的“网站”。

接下来，更新他们各自的 web/unsecure/url 和 web/secure/url。

接下来在您的虚拟主机中，您必须修改每个域的 MAGE_RUN_CODE 环境变量，以便 Magento 识别它必须指向的网站..

有关详细信息，请参阅[http://www.magentocommerce.com/wiki/4__-_themes_and_template_customization/navigation/multiple-website-setup](http://www.magentocommerce.com/wiki/4_-_themes_and_template_customization/navigation/multiple-website-setup)

# sql - 在几组中按真假分组

> ID：13084762
> 
> 赞同：0
> 
> 时间：2012-10-26T10:01:10.087
> 
> 标签：sql, linq

我有以下课程：

*   标识整数
*   活动布尔
*   日期时间日期时间
*   批准的布尔值

我有与此类似的该类的列表：

*   **Id** 1 **活动**true **已批准**true
*   **Id** 2 **活动**true **已批准**true
*   **Id** 3 **活动**true **已批准**true
*   **Id** 4 **活动**true **已批准**false
*   **Id** 5 **活动**true **已批准**false
*   **Id** 6 **活动**true **已批准**false
*   **Id** 7 **活动**true **已批准**true
*   **Id** 8 **活动**true **已批准**true
*   **Id** 9 **活动**true **已批准**false

我想通过**Approved**从列表组中获取项目，但我希望分组对象按以下顺序排列：

*   **真**所有对象，直到第一个假。
*   **假**所有对象直到下一个真。
*   **真**所有对象直到下一个假。
*   **假**所有对象直到下一个真。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T10:16:18.113

看起来你需要使用 TakeWhile 方法

[http://msdn.microsoft.com/ru-ru/library/bb534804(v=vs.95).aspx](http://msdn.microsoft.com/ru-ru/library/bb534804(v=vs.95).aspx)

我在 LINQ 方面不是很好，但这段代码应该可以工作。这个原则不仅可以扩展到布尔值，还可以扩展到任何支持 IEqualityComparer 的类型

```
var list = new List<Test>();
list.Add(new Test(1, true, true));
list.Add(new Test(2, true, true));
list.Add(new Test(3, true, true));
list.Add(new Test(4, true, false));
list.Add(new Test(5, true, false));
list.Add(new Test(6, true, false));
list.Add(new Test(7, true, true));
list.Add(new Test(8, true, true));
list.Add(new Test(9, true, false));

var listTemp = list;
var result = new List<Tuple<bool, List<Test>>>();

while (listTemp.Count > 0)
{
    var approved = listTemp[0].Approved;
    var tuple = new Tuple<bool, List<Test>>(approved, listTemp.TakeWhile(x => approved == x.Approved).ToList());
    result.Add(tuple);
    listTemp = listTemp.SkipWhile(x => approved == x.Approved).ToList();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T12:08:19.490

这应该有效：

```
var data = list.OrderBy(x => x.Id);
bool approved = data.First().Approved;
var groups = new List<Tuple<bool, List<Foo>>>();
var all = groups.SelectMany(x => x.Item2);

while (all.Count() != list.Count())
{
    groups.Add(
        Tuple.Create(
            approved
            , list.Skip(all.Count())
                  .TakeWhile(x => x.Approved == approved)
                  .ToList()));
    approved = !approved;
}

foreach (var grp in groups)
{
    Console.Write("Next block: {0} with {1} elements", grp.Item1, grp.Item2.Count);
} 
```

这是你的课：

```
class Foo
{
    public int Id { get; set; }
    public bool Active { get; set; }
    public DateTime datetime { get; set; }
    public bool Approved { get; set; }
} 
```

和样本数据：

```
var list = new List<Foo>();
list.Add(new Foo() { Id = 1, Active = true, Approved = true });
list.Add(new Foo() { Id = 2, Active = true, Approved = true });
list.Add(new Foo() { Id = 3, Active = true, Approved = true });
list.Add(new Foo() { Id = 4, Active = true, Approved = false });
list.Add(new Foo() { Id = 5, Active = true, Approved = false });
list.Add(new Foo() { Id = 6, Active = true, Approved = false });
list.Add(new Foo() { Id = 7, Active = true, Approved = true });
list.Add(new Foo() { Id = 8, Active = true, Approved = true });
list.Add(new Foo() { Id = 9, Active = true, Approved = false }); 
```

# php - 一种形式的多个 CKEditor 实例？

> ID：13084767
> 
> 赞同：1
> 
> 时间：2012-10-26T10:01:29.657
> 
> 标签：php

我有一个表格，我需要使用代码来附加更多行。

我有一个名称字段（文本框）和一个描述字段（ckeditor）

并在其下方添加更多链接。单击添加更多将附加一行包含上述字段。

是否可以使用附加更多选项添加ckeditor？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T10:22:18.893

是的，这绝对是可能的

在 javascript 中创建一个带有名称和 ID 的新描述字段后，调用 CKEDITOR.replace：

```
CKEDITOR.replace('[the new fields name]'); 
```

（取自[CKEditor 文档](http://docs.cksource.com/CKEditor_3.x/Developers_Guide/Integration)）

# batch-file - 通过 GPO 安装软件启动脚本

> ID：13084768
> 
> 赞同：1
> 
> 时间：2012-10-26T10:01:39.513
> 
> 标签：batch-file, cmd, text-files, gpo

我们想通过 GPO 将一些应用程序部署到客户端。安装包是 .exe 而不是 .msi，因此我们无法通过正常的“计算机配置\策略\软件设置\软件安装”策略进行分发。

因此，我们考虑在“Computer Configuration\Policies\Windows Settings\Scripts\Startup”下使用启动脚本。但是，该软件应该只安装一次，而不是每次启动。因此，我们认为应该将结果记录在一个文本文件中，然后在启动时读取该文件，如果该文件存在，则不要安装。目前，我们非常基本的脚本如下所示：

```
IF EXIST "c:\vcredist_2010_x86.txt" GOTO END
IF EXIST "c:\vcredist_2010_x64.txt" GOTO END

:32-bit
if exist %SystemRoot%\SysWOW64 goto 64-bit
\\servername\sharename\C++Redist\2010\vcredist_2010_x86.exe /passive /norestart
echo "Microsoft Visual C++ 2010 Redistributable - x86" > "c:\vcredist_2010_x86.txt"
goto END

:64-bit
\\servername\sharename\C++Redist\2010\vcredist_2010_x64.exe /passive /norestart
echo "Microsoft Visual C++ 2010 Redistributable - x64" > "c:\vcredist_2010_x64.txt"

:END 
```

工作得很好，但我们想稍微改进一下。最好只写入 1 个文本文件（即 c:\software-dist.txt），并且每次安装都会将相关行（软件名称）添加到该文件中。启动时，脚本应检查该行是否存在，如果存在则不安装，如果不存在则安装软件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T12:36:10.927

像这样的东西？

```
:CheckOS
if exist %systemdrive%\"Program Files (x86)" (
set bit=x64
) else (
set bit=x86
)

:Check1
for /f "delims=" %%a in (C:\software-dist.txt) do (
if "%%a"=="softwarename" goto Check2
)

\\servername\sharename\vcredist_2010_%bit%.exe /passive /norestart
echo softwarename >>C:\software-dist.txt

:Check2
for /f "delims=" %%a in (C:\software-dist.txt) do (
if "%%a"=="Microsoft Visual 2008" goto :Check3
)

\\servername\sharename\C++Redist\vcredist_2008_%bit%.exe /passive /norestart
echo Microsoft Visual 2008 >>C:\software-dist.txt

:Check3
for /f "delims=" %%a in (C:\software-dist.txt) do (
if "%%a"==Microsoft Visual C++ 2005 Redistributable %bit% goto :Check4
)

\\servername\sharename\2005\vcredist_2005_%bit%.exe /passive /norestart
echo Microsoft Visual C++ 2005 Redistributable %bit% >>C:\software-dist.txt

:Check4
for /f "delims=" %%a in (C:\software-dist.txt) do (
if "%%a"==Microsoft .NET Framework 4 goto :END
)

\\servername\sharename\dotNet4.exe
echo Microsoft .NET Framework 4 >>C:\software-dist.txt

:END 
```

这将检查单个 txt 文件以查看它是否包含带有软件名称的行。如果是，则退出，如果不是，则安装它并在完成后将其自身添加到列表中。

# python - 使用子进程在没有 sudo 的情况下注销

> ID：13084770
> 
> 赞同：3
> 
> 时间：2012-10-26T10:01:41.833
> 
> 标签：python, linux, subprocess

我希望我的脚本在脚本完成后自动注销当前用户。它可以在基于 Linux 的服务器 (Ubuntu) 上运行。我试过这行代码，但它不起作用。

```
subprocess.call(['logout']) 
```

给出以下错误：

```
Traceback (most recent call last):
 File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.7/subprocess.py", line 493, in call
    return Popen(*popenargs, **kwargs).wait()
  File "/usr/lib/python2.7/subprocess.py", line 679, in __init__
    errread, errwrite)
  File "/usr/lib/python2.7/subprocess.py", line 1249, in _execute_child
    raise child_exception
OSError: [Errno 2] No such file or directory 
```

我也试过：

```
subprocess.Popen(['sudo', 'logout']) 
```

但随后用户必须输入他的密码才能注销。在这个没有 sudo 的情况下，我得到：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.7/subprocess.py", line 679, in __init__
    errread, errwrite)
  File "/usr/lib/python2.7/subprocess.py", line 1249, in _execute_child
    raise child_exception
OSError: [Errno 2] No such file or directory 
```

我不想以 root 身份运行脚本本身。

我希望能够直接注销用户而无需输入密码。当您在常规终端中使用注销时，您通常不必输入密码，所以我真的不明白为什么这甚至是一个问题。

非常感谢所有帮助。

编辑：我通过向 ~/.bash_login 添加一些额外的代码找到了解决我的问题的方法（请参阅我的答案），但是为什么我在上面尝试的内容尚未得到解答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T13:00:38.207

对于您正在尝试做的事情，最好的方法可能是将您的 python 命令包装在一个运行 python 命令的 Bash 脚本中，然后以注销结束。

logout 是一个 Bash 内置函数。它不作为可通过 Python 使用的可调用命令存在。

大意是：

```
#!/bin/bash

cd /path/to/script
./scriptname.py
logout 
```

我可以理解想要在 Python 中实现这一切。但是，如果您使用任何通过 PID kill 简单地终止会话的过程，您将遇到问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T13:21:36.463

我找到了解决我的问题的方法。我添加了

```
sys.exit(1) 
```

到我的剧本。

然后我将以下代码添加到 ~/.bash_login

```
if [ "$?" == "0" ]; then
    logout
fi 
```

因此，注销命令在 Python 脚本完成时运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T10:25:18.593

这可能会有所帮助，不确定它是否完全符合您的需要，但它会注销当前用户（不像您喜欢的那样干净）

```
import os
os.system("pkill -KILL -u " + os.getlogin()) 
```

我只是快速测试了这个，但似乎成功了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T13:08:03.713

这对你有用吗？

```
cmd = 'logout'
p = subprocess.Popen(cmd, shell=True) 
```

（我没试过，只是猜测！！）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-26T12:18:27.323

您可以尝试杀死您的父 PID，这可能是启动您的 shell - 但如果您随后由脚本启动，这将无济于事：

```
os.kill(os.getppid(),signal.SIGTERM) 
```

但是，如果您要替换 shell，作为登录程序，您可以更改登录设置以运行您的程序，或者`exec`从父 shell 替换它。因此，除了你自己，你不需要杀死任何东西。

# java - 如何关闭Android中的全部应用程序？

> ID：13084771
> 
> 赞同：3
> 
> 时间：2012-10-26T10:01:43.467
> 
> 标签：java, android

我是android应用程序开发的新手。

我开发了一个 android 应用程序，在这个应用程序中，当用户按下返回或退出按钮时，我调用了 finish() 方法。此方法仅关闭当前活动。

我的要求是当我单击退出按钮时，它应该关闭所有活动并显示菜单页面。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T10:13:07.363

This subject has received some discussion, [here](https://stackoverflow.com/questions/2092951/how-to-close-android-application?rq=1) is one that should contain most of the information you're looking for.

Also, see Activity Lifecycle and Process Lifecycle in the [Android Documentation on Activities](http://developer.android.com/reference/android/app/Activity.html) to understand the hows and whys of closing apps.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T10:04:42.900

当您从**A**活动转到**B活动时，在****A**活动中调用`finish()`.so会得到. 当您在顶部活动上按返回或退出按钮时，堆栈变空，然后您将转到菜单屏幕或主屏幕。`android stack` **`finish() or get killed`**

 **例如：当您从**A 活动转到 B 活动**时，请执行以下步骤：

```
startActivity(new Intent(A.this, B.class));
finish(); 
```

这样你的**A**活动就完成了，你的新**B**活动开始了。在这里，当您按下返回按钮或退出按钮时，您将进入主屏幕或菜单屏幕。

在这里，我们有**两种方法**可以`finish or kill`让应用程序**按下后退按钮**。

1.  使用`finish()`which**关闭或完成**android 屏幕上的当前活动。

    例如：您有 2 个活动，即**A**和**B。**您将使用意图从**A**活动转到**B**活动，现在前景活动是**B**，您想返回并杀死**B**活动并使用后退按钮的onclick转到**A活动。**`finish()`如果您在**A**活动中，则它会关闭应用程序。见下面的代码。

    ```
    public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
    finish();
    }
    return super.onKeyDown(keyCode, event);
    } 
    ```

2.  使用`android.os.Process.killProcess(android.os.Process.myPid());`它会杀死应用程序，即强制关闭应用程序并转到主屏幕。请参阅下面的代码。

    ```
    public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
    // Kills & force closes the app 
    android.os.Process.killProcess(android.os.Process.myPid());
    }
    return super.onKeyDown(keyCode, event);
    } 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T14:20:24.613

> 我的要求是当我单击退出按钮时，它应该关闭所有活动并显示菜单页面。

假设“菜单页面”是您的活动，调用`startActivity()`，并`Intent`标识您的“菜单页面”，并将`FLAG_ACTIVITY_CLEAR_TOP`和`FLAG_ACTIVITY_SINGLE_TOP`作为标志包含在您的`Intent`. 这将清除您任务中的所有活动并将您现有的“菜单页面”带到前台（如果没有，则创建“菜单页面”的实例）。**

# android - phonegap 离线存储和压缩

> ID：13084778
> 
> 赞同：2
> 
> 时间：2012-10-26T10:01:53.447
> 
> 标签：android, iphone, ios, ipad, cordova

Phonegap新手在这里。关于我的应用程序的场景：

1.  它需要包含一些 xml 数据（1000 个 xml blob，总共 15MB 未压缩）
2.  用户将能够查看和编辑这些 xml
3.  应用程序的更新不应覆盖（可能已编辑的）xml

问题：

*   对于离线存储，我可以简单地使用我的应用程序的文件吗？或者我应该将那些应用程序捆绑的 xml 移动/复制到离线存储？如果是，是哪一个？
*   由于这种类型的数据是高度可压缩的，有没有办法让我在第 1 步（初始应用程序包）和第 2 步中将它们压缩存储，以防我需要离线存储？

这些问题的解决方案需要与 iPhone、iPad 和 Android 兼容，因此需要使用 Phonegap。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T17:31:27.363

如果它是 15 MB 未压缩的，那么存储在您的应用程序本身中可能太多了。您可以使用[phonegap 存储 API](http://docs.phonegap.com/en/1.0.0/phonegap_storage_storage.md.html)将它们存储在数据库中，但我不知道您是否可以对该数据库进行任何压缩。

我可能会使用 PhoneGap File API 将它们作为外部文件存储在手机的文件系统上：

[http://docs.phonegap.com/en/2.1.0/cordova_file_file.md.html#File](http://docs.phonegap.com/en/2.1.0/cordova_file_file.md.html#File)

它们在 ios 和 android 平台上都得到了很好的支持。

压缩方面，可以配合文件系统存储使用[JSZip等JS库。](http://stuartk.com/jszip/)我自己没有尝试过，但它应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T00:47:08.643

在 iOS 中，您无法修改应用程序中的文件，但您可以简单地将它们复制到 Documents 文件夹并在那里进行修改。如果您想压缩所有内容，您可以解压缩文件，进行更改并在修改后再次压缩。

我相信更新后 Documents 文件夹中的文件保持不变

在 Android 中，您可以将所有内容复制到存储卡中并执行类似的操作。

注意：如果您使用的是 Phonegap，您必须为 android 和 iOS 制作自定义插件

# c++ - 是否可以使用 std::enable_if 来选择成员模板专业化？

> ID：13084781
> 
> 赞同：9
> 
> 时间：2012-10-26T10:02:01.540
> 
> 标签：c++, templates, c++11, template-specialization

给定一个类声明

```
class A {
    template <typename T> T foo();
}; 
```

我想专门`A::foo`研究. 不幸的是，我似乎不能用于后者。以下内容无法编译：`int``T``std::enable_if`

```
template <> int A::foo<int>(); // OK

template <typename T> 
typename std::enable_if<is_pod<T>::value, T>::type foo(); // <<<< NOT OK!

template <typename T> 
typename std::enable_if<!is_pod<T>::value, T>::type foo(); // <<<< NOT OK! 
```

问题可能是由于这些`std::enable_if<...>`东西是函数签名的一部分，并且我没有在`A`. 那么如何根据类型特征专门化模板成员？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T10:33:02.277

我只是把它转发给一个结构，它可以很好地处理这个问题：

```
#include <type_traits>
#include <iostream>

template <typename T, typename = void>
struct FooCaller;

class A {
public:
    template <typename T>
    T foo() {
        // Forward the call to a structure, let the structure choose 
        //  the specialization.
        return FooCaller<T>::call(*this);
    }
};

// Specialize for PODs.
template <typename T>
struct FooCaller<T, typename std::enable_if<std::is_pod<T>::value>::type> {
    static T call(A& self) {
        std::cout << "pod." << std::endl;
        return T();
    }
};

// Specialize for non-PODs.    
template <typename T>
struct FooCaller<T, typename std::enable_if<!std::is_pod<T>::value>::type> {
    static T call(A& self) {
        std::cout << "non-pod." << std::endl;
        return T();
    }
};

// Specialize for 'int'.
template <>
struct FooCaller<int> {
    static int call(A& self) {
        std::cout << "int." << std::endl;
        return 0;
    }
}; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-26T10:48:58.913

我认为没有理由在这里专攻，在我看来，重载函数似乎就足够了。

```
struct A
{
    template <typename T>
    typename std::enable_if<std::is_integral<T>::value, T>::type foo()
    {
        std::cout << "integral" << std::endl;
        return T();
    }

    template <typename T>
    typename std::enable_if<!std::is_integral<T>::value, T>::type foo()
    {
        std::cout << "not integral" << std::endl;
        return T();
    }
} 
```

在检查 POD 或无 POD 时，您只有这两种选择，因此不需要更通用的函数（也不允许，因为它会模棱两可）。你需要更多吗？您可以在`std::enable_if<std::is_same<int, T>::value, T>::type`.

# c++ - C++ <-> AS3 对象序列化

> ID：13084782
> 
> 赞同：0
> 
> 时间：2012-10-26T10:02:10.003
> 
> 标签：c++, actionscript-3

技术上是否可以在 C++ 中序列化对象以通过套接字发送它并在 AS3 中反序列化（双向）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T21:14:36.923

您将需要一个 AMF 库，而我所知道的唯一一个与 PHP 堆栈非常相关。环顾四周，你可能会发现一个纯 C/C++ 的。如果您绝望，一种可能是查看具有 AMF 实现的 Haxe，并将其编译为 C++

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T22:51:16.380

我不同意前面的答案，应该可以做一些工作。有很多使用[AMF](http://en.wikipedia.org/wiki/Action_Message_Format)（来自 Java、PHP、Python）的 Flash 远程处理实现。看到这个[帖子](https://stackoverflow.com/questions/7349052/looking-for-a-good-c-library-for-parsing-amf3)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T10:05:42.703

不，这是不可能的。这只有在您使用相同的语言和双方相同的序列化/反序列化时才有可能。您必须开发和使用一些自定义协议来通过套接字发送对象状态。阅读有关[Google Protobuf 编码](https://developers.google.com/protocol-buffers/docs/encoding)的更多信息。

> 感谢 chac - [As3 Google Protobuf](http://code.google.com/p/protobuf-actionscript3/)

# delphi - Delphi 命令行构建 (DCC32) 错误：找不到 System.pas

> ID：13084786
> 
> 赞同：1
> 
> 时间：2012-10-26T10:02:36.880
> 
> 标签：delphi, delphi-6

Win7/x64 中的 Delphi 6 Professional，带有 c:\Delphi6 文件夹。

由于 ProjectGroups 出现 OM 错误，我们需要一个一个地构建项目。

为了提供更快的编译，我尝试使用 DCC32.exe。

我在这个网站上找到了一些关于“用 4 个选项扩展 dcc32.cfg 来设置库路径”的信息。我将它们中的每一个都设置为“Delphi/Options/Env.options/Library path”。

然后我尝试了：

dcc32.exe b“任何.dpr”

但我收到错误：找不到 System.pas。

我不明白——也许 dcc32.exe 也想构建基本的 pas 文件，或者我需要使用另一种格式。

我们需要构建每个项目，因为我们使用了许多条件指令。

感谢您提供的每一个信息和建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T11:32:32.023

由于您没有在命令行上指定各种路径，因此它们需要位于 .cfg 文件中。我的 Delphi 6 dcc32.cfg 文件如下所示：

```
/LE"C:\Program Files (x86)\Borland\Delphi6\Projects\Bpl"
/LN"C:\Program Files (x86)\Borland\Delphi6\Projects\Bpl"
/U"C:\Program Files (x86)\Borland\Delphi6\Lib";"C:\Program Files (x86)\Borland\Delphi6\Imports"
/R"C:\Program Files (x86)\Borland\Delphi6\Lib"

```

我在 Delphi`bin`目录中有这个。我把它放在那里是因为它特定于一台特定的机器，因为它使用绝对路径。

显然，您可能需要为我上面的内容添加更多路径，但以上内容将为您提供基本 RTL/VCL 单元所需的内容。

# java - 在循环中动态创建方法

> ID：13084788
> 
> 赞同：0
> 
> 时间：2012-10-26T10:02:48.257
> 
> 标签：java, arrays, loops, methods

我想做这样的事情：

```
for(int i = 0; i<5;i++)
    {
        public void test[i]()
        {
            System.out.println(i);
        }   
    } 
```

我什至可以创建这样的方法吗？我知道它需要一个数组，但我到处都阅读过有关方法数组的内容，但它并没有像我想要的那样做。

我不想创建几个方法然后将它们保存在一个数组中，我想在一个循环中创建方法，我不知道该怎么做。

我需要它，这样我就可以用这个特定的方法创建尽可能多的方法，而不是编写 100 个方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T10:07:18.613

不，您不能在 java 中创建方法数组

但是这种事情往往是用匿名子类来完成的。

1.  [Java - 创建方法数组](https://stackoverflow.com/questions/4280727/java-creating-an-array-of-methods)
2.  [Java中的函数指针数组](https://stackoverflow.com/questions/2752192/array-of-function-pointers-in-java)

# c# - 忽略 .NET XmlSerializer 的特定派生类

> ID：13084789
> 
> 赞同：0
> 
> 时间：2012-10-26T10:02:52.687
> 
> 标签：c#, c#-4.0, xml-serialization

假设我们有一个类`Root`，其中包含一个抽象类的数组，该数组`BaseClass`由 2 个派生类实现，`Derived1`并且`Derived2`

```
[XmlRootAttribute("root")]
public class Root
{
  [XmlElement("derived1", typeof(Derived1))]
//[XmlElement("derived2", typeof(Derived2))]
  public BaseClass[];
}

public abstract class BaseClass { }

public class Derived1 : BaseClass { }

public class Derived2 : BaseClass { } 
```

我如何告诉 XmlSerializer`Derived2`在序列化过程中应该忽略 的实例？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T10:09:47.537

我错了，有：ShouldSerialize 有魔力[MSDN](http://msdn.microsoft.com/en-us/library/53b8022e.aspx)
假设你的属性是“Obj”

```
public bool ShouldSerializeObj() {
      return Obj is Derived1;
   } 
```

**编辑：** 如果你想处理序列化，你可以像你说的那样实现 IXmlSerializable 接口

```
public class Derived1 : BaseClass, IXmlSerializable 
{ 
  public XmlSchema GetSchema() { return null; }

  public void ReadXml(System.Xml.XmlReader reader)
  {
    reader.MoveToContent();
    Name = reader.GetAttribute("Name");
    reader.ReadStartElement();
    if (!reader.IsEmptyElement)
    {
      YourProperty = reader.ReadElementString("YourElem");
      reader.ReadEndElement();
    }
  }

  public void WriteXml(System.Xml.XmlWriter writer)
  {
    witer.WriteAttributeString("Name", Name);
    writer.WriteElementString("YourElem", "ThisIsMyContent");
  }
} 
```

这样您就可以处理序列化。
注意：`GetSchema()`应该返回 null

# android - Robolectric - 如何模拟 com.actionbarsherlock.view.MenuItem？

> ID：13084790
> 
> 赞同：3
> 
> 时间：2012-10-26T10:02:58.193
> 
> 标签：android, mocking, actionbarsherlock, robolectric

我正在尝试使用*Robolectric*为使用*SherlockActionBar*的应用程序编写测试。如果选择了 an ，我需要测试应用程序是否正确`MenuItem`，但是 Robolectric 库仅`android.view.MenuItem`在应用程序使用方法时提供模拟`onOptionItemSelected(com.actiombarsherlock.view.MenuItem)`。

所以我的问题是：

*   可能有一种可以模拟的能力`com.actionbarsherlock.view.MenuItem`吗？

*   还是解决方法之类的？

**提前致谢...**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T15:39:12.897

所以......因为没有*更优雅*的方式来模拟`com.actionbarsherlock.view.MenuItem`我这样做了：

*   制作了我自己的实现类`com.actionbarsherlock.view.MenuItem`
*   在我的模拟类中为 itemId 添加了一个 int 字段。
*   接口中的其他方法`MenuItem`留空（可能我会在其他测试中使用它们）

结果我得到了这种测试：

```
com.actionbarsherlock.view.MenuItem item = new TestSherlockMenuItem(R.id.some_action);

activity.onOptionsItemSelected(item);

ShadowActivity shadowActivity = Robolectric.shadowOf(activity);
Intent startedIntent = shadowActivity.getNextStartedActivity();
assertNotNull(startedIntent);

ShadowIntent shadowIntent = Robolectric.shadowOf(startedIntent);
assertThat(shadowIntent.getComponent().getClassName(),
                equalTo(NextActivity.class.getName())); 
```

顺便说一句，感谢**Eugen Martynov**试图理解我的问题:)

# jquery - jQuery UI DatePicker 没有最小日期的周末显示错误的日期

> ID：13084791
> 
> 赞同：0
> 
> 时间：2012-10-26T10:02:59.873
> 
> 标签：jquery, jquery-ui

奇怪的是，我正在尝试指定一个没有周末的最小日期 - 问题是当我将最小日期指定为 2012、10、29 时 - 选择器似乎默认为 11 月并且不允许我滚动回 10 月！我在这里创建了一个小提琴：http: [//jsfiddle.net/sN63A/](http://jsfiddle.net/sN63A/)来演示这个问题！

如果我为月份属性指定“9”而不是“10”，它确实显示 october 但这让我有点不安，因为我至少想知道为什么它不能按预期工作！

我只是为小提琴[http://jsfiddle.net/sN63A/](http://jsfiddle.net/sN63A/)做这个 ：

```
<input id="pickDate" type="text" />​

$('#pickDate').datepicker({
    dateFormat: "dd/mm/yy",
    beforeShowDay: $.datepicker.noWeekends,
    minDate: new Date(2012, 10, 29, 0, 0, 0, 1)
});​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T10:07:05.877

月份从 Jan = 0;Feb =1;mar=2.So 如果`2012, 10, 29`给出，它将默认为 11 月，这是正常行为。在这种情况下，Min Date 意味着您不能在 10 月之前返回。

```
 $('#pickDate').datepicker({
        dateFormat: "dd/mm/yy",
        beforeShowDay: $.datepicker.noWeekends,
        minDate: new Date(2012, 10 - 1, 25) 
   }); 
```

[在这里](http://jsfiddle.net/sN63A/1/)检查

# linux - 由于“无权限”，授予 Hudson 权限/构建失败

> ID：13084795
> 
> 赞同：0
> 
> 时间：2012-10-26T10:03:10.613
> 
> 标签：linux, permissions, hudson

在我的 Hudson 工作中，我需要在我的 ant 构建之前运行一个命令（android 更新项目），它因“无权限”而失败。根据 Hudson 文档，这些命令作为我在 /etc/passwd 中找到的新创建的用户（“hudson”）运行：

```
...
mysql:x:104:111:MySQL Server,,,:/nonexistent:/bin/false
jetty:x:117:130::/usr/share/jetty:/bin/false
hudson:x:118:65534::/var/lib/hudson:/bin/bash 
```

如何允许该用户执行该命令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T09:03:36.743

在 linux 中，您可以编写一个 sh 文件，您可以在其中指定要执行的命令。像这样执行文件。
./file_name.sh

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T10:06:01.420

在这一点上很难说。登录到盒子，`$ sudo su - hudson`切换到 hudson 用户，发出任何失败的命令，然后从那里获取。

# android - 将耳机麦克风更改为内置麦克风

> ID：13084799
> 
> 赞同：3
> 
> 时间：2012-10-26T10:03:17.663
> 
> 标签：android, microphone, headset

插入耳机后是否可以从内置电话麦克风录制音频？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T13:44:06.500

您可以指定[VOICE_COMMUNICATION](http://developer.android.com/reference/android/media/MediaRecorder.AudioSource.html)作为录音的音频源。请记住，这很可能会启用针对近场用例（例如，当您将手机靠近耳朵时）而不是远场用例（从几英尺处录制音频）调整的内部麦克风离开）。

# apache - 使用 Apache 变量定义 IP 和端口

> ID：13084801
> 
> 赞同：1
> 
> 时间：2012-10-26T10:03:19.357
> 
> 标签：apache, variables, include

我有两个不同的应用程序，它们在两个 Apache 服务器上使用相同的实例。在每个 http 服务器上，我对每个应用程序都有相同的配置 - 唯一的区别是 IP 地址。有没有办法从 httpd.conf 中提取 IP 地址并将其包含在 conf 中或为 IP 地址定义一个变量？

任何想法都会有所帮助，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T11:53:56.343

这更像是一个关于 serverfault 的问题，但我试着猜测你的目的。

所以你可以包括`<VirtualHost *:80>`而不是`<VirtualHost 192.168.0.4:80>`可能会解决你的问题。不需要在那里添加IP。

# c# - 如何验证输入是否包含有效的 .Net 正则表达式？

> ID：13084802
> 
> 赞同：5
> 
> 时间：2012-10-26T10:03:25.660
> 
> 标签：c#, asp.net, regex, validation

我正在构建一个将命名正则表达式保存到数据库中的应用程序。看起来像这样：

![正则表达式形式](../Images/947207a9f92b8a15d8c6d2dc7bb04fd7.png)

我正在使用 Asp.Net 表单。如何验证输入的正则表达式？它希望用户知道输入的正则表达式是否不是有效的 .Net 正则表达式。

该字段应拒绝以下值：

```
^Wrong(R[g[x)]]$
Invalid\Q&\A 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T10:07:32.467

从中创建新的 Regex 类。如果它抛出异常，那么它是无效的。

```
try{
  new Regex(expression)
}
catch(ArgumentException ex)
{
  // invalid regex
}

// valid regex 
```

我知道。对代码逻辑使用异常是错误的。但这似乎是唯一的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T10:14:28.443

可能是这样的：

```
public static class RegexUtils
{

    public static bool TryParse (string possibleRegex, out Regex regex)
    {
        regex = null;
        try
        {
            regex = new Regex(possibleRegex);
            return true;
        }
        catch (ArgumentException ae)
        {
           return false;
        }
    }
} 
```

# http - no-cache 属性误解

> ID：13084803
> 
> 赞同：1
> 
> 时间：2012-10-26T10:03:46.883
> 
> 标签：http, caching, no-cache

我正在创建一个 http 客户端缓存，但我对 no-cache 字段有疑问。

官方[文档](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.9.1)说：

> 如果 no-cache 指令未指定字段名称，则缓存不得使用响应来满足后续请求，而无需与源服务器成功重新验证。[...]
> 
> 如果 no-cache 指令确实指定了一个或多个字段名，那么缓存可以使用响应来满足后续请求，但受缓存的任何其他限制。但是，**如果没有与源服务器成功重新验证，则不得在对后续请求的响应中发送指定的字段名。**

我的问题是：如何在不重新验证整个响应的情况下仅重新验证这些字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T10:21:21.687

您应该向源服务器发送一个[条件请求](http://en.wikipedia.org/wiki/HTTP_ETag)，并在获得`304 Not Modified`

# javascript - 在 Chrome 和 IE 上的 Facebook Canvas 应用程序中使用时上传“未捕获的 StartUpload 调用失败”

> ID：13084804
> 
> 赞同：15
> 
> 时间：2012-10-26T10:03:46.640
> 
> 标签：javascript, jquery, facebook, flash, uploadify

我已经在 Facebook 的画布应用程序中实现了标准 Flash 版本的[Uploadify](http://www.uploadify.com/) [jQuery 插件。](http://www.jqueryplugins.com/plugin/205/)

上传在 Firefox 中运行良好。但是当我尝试在 Chrome 或 IE 中开始上传时，它会在控制台中显示以下消息失败：

> `Uncaught Call to StartUpload failed`

对于那些不熟悉 Facebook 画布应用程序的人来说，在 Facebook 的 iframe 内运行的 PHP 页面可能会导致这个问题——尽管在框架外运行时它也不起作用。

我也在 Chrome 控制台中收到这些错误：

> `Unsafe JavaScript attempt to access frame with URL https://apps.facebook.com/[app name]/[page name]/ from frame with URL https://[app domain]/[page path]. The frame being accessed set 'document.domain' to 'facebook.com', but the frame requesting access did not. Both must set 'document.domain' to the same value to allow access.`

任何想法可能会发生什么？我已经尝试为 Flash 设置**crossdomain.xml**，但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-04T04:59:21.940

1.-尝试在您的 api 设置中编辑您的 url，如 name_api_to_download.domain.com 或 domain.com，并仅使用 ssl 子域或域 true

2.-使用 ajax 请求（post 或 get）preferer 来下载文件而不是 iframe，因为您使用父 iframe api，它不是可访问的

3.-在 name_api_to_download 中使用有效的标头（因为 MIME 类型是 application/pdf ）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T02:12:22.143

根据另一个线程[将 document.domain 更改为完全其他域](https://stackoverflow.com/questions/2600709/changing-document-domain-to-completely-other-domain)，可以将域更改为当前域的后缀。

如果“[应用程序域]”可以更改，您可以尝试将[应用程序域]更改为“ [https://[应用程序](https://[app)域].apps.facebook.com/”并在加载 iframe 时从 iframe 页面运行 javascript

```
document.domain = 'facebook.com'; 
```

但不确定添加另一个域作为后缀是否有任何问题（合法吗？）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-01T16:48:44.843

很久以前我在使用 facebook 和 crossdomain 时遇到了问题，你试过了吗

```
header('P3P: CP="CAO PSA OUR"'); 
```

在你的 php 文件上？

# linux - BASH 循环同时运行命令

> ID：13084805
> 
> 赞同：0
> 
> 时间：2012-10-26T10:03:48.453
> 
> 标签：linux, bash, shell

我创建了一个脚本，它读取附加的硬盘数量，然后使用 HDDParm 对它们运行速度测试

```
for i in `seq -s' ' $from $hddcount`
do
    # read and cache read speed test
    sudo hdparm -tT ${hd[$i]} >> /var/www/HDD_Test/Logs/Current/Bay$i/`basename ${hd[$i]}`_speed_test.txt
done 
```

这工作正常，但它一个一个地运行测试，这对于速度测试得到一个真实的数字是可以的，但我现在想使用 smartctl 运行一个简短的 SMART 检查。

我希望它同时在所有连接的硬盘上运行，而不是一次一个。有人对如何做到这一点有任何想法或指示吗？使用 & 符号在后台运行它们会是一个简单的例子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T10:04:47.450

为什么不把它放在后台使用`&`？有关更多信息，请参阅[此 SO 问题](https://stackoverflow.com/questions/161252/bash-start-multiple-chained-commands-in-background)。

# javascript - jQuery加载本地文件

> ID：13084806
> 
> 赞同：0
> 
> 时间：2012-10-26T10:03:52.397
> 
> 标签：javascript, jquery, html

对于我的移动应用程序，我想将 HTML 代码动态加载到容器中。

我尝试了 jQuery 的加载方法，但 chrome 说：

```
Origin null is not allowed by Access-Control-Allow-Origin. 
```

我的代码：

```
container.load("feeds.html"); 
```

我认为这应该是可能的。你能帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T10:09:19.597

您不能`load()`来自本地来源，因为没有`origin`提供标题。`jsonp`如果要执行此操作，您需要更改要加载的逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T10:14:49.373

你不能做 CORS（跨域资源共享）。要么您需要获取 Jsonp 的值，要么需要从以前的答案[Origin Policy中解决一些小问题](https://stackoverflow.com/questions/3595515/xmlhttprequest-error-origin-null-is-not-allowed-by-access-control-allow-origin)

使用 $.getJSON。如果它看到`callback=?`URL 中的子字符串，将请求类型从默认的“json”更改为“jsonp”会有点神奇。

# drupal-7 - 搜索表单对齐在 Aqua marina 主题 Drupal 7

> ID：13084808
> 
> 赞同：0
> 
> 时间：2012-10-26T10:03:58.500
> 
> 标签：drupal-7, drupal-theming, drupal-themes

我在 drupal7 中将搜索表单与 Aqua Marina 主题对齐时遇到问题。我希望搜索块位于徽标旁边（徽标位于标题的左角，搜索表单位于标题的右上角）。请帮我解决这个问题。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T05:11:16.890

您可以使用 Marinelli 主题来满足您的自定义需求。

# wpf - 用于加载 pdf 和 dwg 文件的 Windows 演示基础工具或 sdk

> ID：13084809
> 
> 赞同：0
> 
> 时间：2012-10-26T10:04:11.220
> 
> 标签：wpf

我有一个客户的请求，要求制作一个加载 png、jpg、tiff、pdf、dwg 文件格式的工具。购买工具或 sdk 或其他东西来帮助我构建它是一种选择，只要它不是单价。有谁知道一个好的工具（除了Atalasoft DotImage，他们不想要那个......不知道为什么......）。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T05:17:35.220

试试 bravaviewer，它支持加载多种格式，如 pdf、dwg 等，更多格式见[http://www.bravaviewer.com/formats](http://www.bravaviewer.com/formats)

# c++ - Char 数组在结尾之前包含空字符

> ID：13084811
> 
> 赞同：3
> 
> 时间：2012-10-26T10:04:19.527
> 
> 标签：c++, character-arrays, null-character

我有一个类项目来用 C++ 创建一个网络服务器。一切都很顺利，直到我需要托管图像或 pdf 文件，此时文件已损坏。进行更多挖掘后，我意识到所有损坏的图像在结束之前都有空字符。

这让我想到了我的问题。我有一个 char* ，我已将这些文件读入其中，并且我知道文件的长度。我很肯定正在读取整个文件（下面的代码），但我不知道如何打印或发送它。如何告诉 C++ 我想发送 char* 之后的前 X 个字符？（我确定答案在这里或网络上的某个地方，我似乎无法以正确的方式表达我的问题以找到答案）

```
ifstream myfile (path.c_str() , ios::in|ios::binary|ios::ate);
ifstream::pos_type size = myfile.tellg();
cout << size << endl;
fileSize = (int) size;
fileToReturn = new char [size];
myfile.seekg (0, ios::beg);
myfile.read (fileToReturn, size);
myfile.close();

cout << "file read\n"<< fileToReturn << endl; 
```

对于纯文本文件，这将输出正常。对于 PDF，它只打印文件的第一部分（第一个空字符之前的部分）。如何让它打印出整个文件？

编辑：澄清一下，我的最终目标是通过网络发送，而不是重新保存文件。

```
// reply is string with all my headers and everything set.
// fileToReturn is my char*, and fileSize is the int with how long it should be  
char* totalReply = new char [reply.length() + fileSize+1];
strcpy(totalReply, reply.c_str());
strcat(totalReply, fileToReturn);
send(client, totalReply, reply.length() + fileSize, 0); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T10:07:01.380

问题是它`ostream& operator<< (ostream& out, const char* s );`期望`s`是一个以 null 结尾的 ASCII 字符串。所以它一遇到`NUL`字符就停止。如果您真的想将所有数据写入控制台，请使用 ` [ostream& write (const char* s , streamsize n)](http://www.cplusplus.com/reference/iostream/ostream/write/)，如下所示：

```
cout.write(fileToReturn, size); 
```

问题是相同的：它在第一个字符`strcat`之后停止。`NUL`所以连接使用`memcpy`：

```
memcpy(totalReply, reply.c_str(), reply.size()+1);
memcpy(totalReply+reply.size()+1, fileToReturn, fileSize ) 
```

但是您将此问题标记为 C++，那么为什么不这样做：

```
ifstream myfile (path.c_str() , ios::in|ios::binary|ios::ate);
vector<char> totalReply;
totalReply.insert(buffer.end(), reply.begin(), reply.end());
// need a NUL character here?: totalReply.push_back('\0');
totalReply.insert(buffer.end(), istream_iterator(myfile), istream_iterator());
send(client, &totalReply[0], totalReply.size(), 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T10:12:30.097

you fail to mention how you open the file, make sure you have opened in binary mode otherwise seek et all will not work properly with new line characters.

i.e. `myfile.open( "yourfile", ios::binary|ios::in )`

# teamcity - 在 TeamCity 7 中为 MSTest 运行程序指定测试程序集时了解通配符

> ID：13084822
> 
> 赞同：11
> 
> 时间：2012-10-26T10:04:51.423
> 
> 标签：teamcity, mstest

基本上我想指定“所有以 Test.dll 结尾的文件”，也称为`*.Test.dll`. `*.Test.dll`不起作用，大概是因为它只匹配当前工作目录中的文件。

但是，我也没有任何运气`**\*Test.dll`。出于某种原因，我不得不使用`**\bin\**\*Test.dll`它来查找它可以运行的任何测试程序集。

据我所知，MSTest 的 TeamCity 7 文档没有说明通配符。在为 TeamCity 7 中的 MSTest 运行程序指定测试程序集时，有人可以帮助我理解通配符吗？

是否可以指定与某个文件名模式匹配的文件，但在任何目录中？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-26T10:35:12.293

根据关于[通配符](http://confluence.jetbrains.net/display/TCD7/Wildcards) `**\*Test.dll`的 TeamCity 文档应该有效。因此，无论是错误还是正斜杠与反斜杠问题都很重要。

# javascript - 如何在 dom 元素数据属性上存储对对象的引用？

> ID：13084825
> 
> 赞同：2
> 
> 时间：2012-10-26T10:05:01.653
> 
> 标签：javascript

我想保存对特定对象的引用，该对象反映 dom 树的某些元素的当前 dom 元素的属性。每个元素可以对另一个对象有不同的引用，或者它们可以引用相同的。因此是否可以使用 html5 的数据属性，或者是否有另一种方法可以在纯 javascript（不是 jquery）中做到这一点。

感谢帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T10:20:01.923

如果您只是想存储静态属性，那么您可以`setAttribute`在每个 dom 元素上使用该方法，就像这样

```
//Assume x is a dom node
x.setAttribute( 'data-myproperty' , JSON.stringify( your property object )  ) 
```

但是，如果您正在查看不可 JSON 编码的内容（或者更确切地说不能表示为字符串），那么您将不得不查看其他方式。

jQuery 数据方法实际上并不在 dom 元素本身上存储任何内容。它维护一个内部缓存，其中包含传递给它的所有数据。

# java - 操纵内存占用

> ID：13084827
> 
> 赞同：0
> 
> 时间：2012-10-26T10:05:10.837
> 
> 标签：java, memory

在我的程序中，我随机生成一些标识符来识别某些字符。例子：

```
12555678 to identify 'a'
12 to identify 'g'
13456789900000076 to identify 'c'
... 
```

在我的算法中，我不知道这些标识的大小。所以，我使用`BigInteger`数字。我想减少内存，然后当我生成一个标识符时 `12`，如果我可以使用另一种类型（不是 BigInteger），我可以在内存中获胜。所以我的问题是，是否可以使用另一种类型来操作内存并只租用我的 Identifiers 的确切大小？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T10:09:31.217

`BigInteger`与表示数字所需的一样大（加上一些开销）

如果你可以使用`Long`它，它会更小（因为它的开销更少）使用小于 Long 的类型不会有太大的区别，因为开销是相同的。

如果您可以使用 64 位有符号值，则使用 a`long`比使用 a 小 5 倍，`Long`因此如果内存很重要，我会找到一种方法将自己限制为 18 万亿个标识符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T10:09:06.790

您可以将字段声明为 type `Number`，这将允许`BigInteger`s 以及`Integer`s 甚至`Short`s。

根据您打算对值调用的方法，您可能需要专门检查`BigInteger`大小写，并向下转换以单独处理。其他一切都可以通过`number.longValue()`.

这样做意味着您的引用*能够*在需要时保存 a `BigInteger`，但您可以`Short`在值允许时传入 a 以节省内存。

# parsing - LR(0) 解析器如何离开状态 0？

> ID：13084829
> 
> 赞同：3
> 
> 时间：2012-10-26T10:05:13.390
> 
> 标签：parsing, language-agnostic, lr

我已经阅读了 Wikipedia 的解释至少十几次，但我仍然对 LR(0) 解析器如何离开状态 0 感到困惑。

[维基百科的例子及其解释说](http://en.wikipedia.org/wiki/LR_parser#Parsing_Steps)：

> 解析器从仅包含初始状态 ( `'0'`) 的堆栈开始： `[0]`
> 解析器看到的输入字符串中的第一个符号是`'1'`。

...但这对我来说没有意义，因为*看到输入符号将执行前瞻*，但根据定义，LR(0) 解析器无法执行前瞻。

当解析器处于状态 0 时，它还没有移动，所以它的堆栈上没有任何符号。
鉴于它是一个 LR(0) 解析器，它也不能执行前瞻。

那么它如何使用表格来确定从状态 0 转换或减少到哪个状态呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T05:05:33.617

移位的符号不是前瞻。它被消耗掉了。

LR(0) 语法必须在不咨询下一个符号的情况下决定减少。一旦他们决定不减少，他们就暗中决定改变。[1]

移位动作包括读取一个符号，将其压入堆栈，并查阅动作表以决定转换到哪个状态。

这与 LR(k>0) 文法不同，LR(k>0) 文法可以使用前瞻符号来决定移位和归约，而 LR(0) 文法不能。但是他们俩都可以在读取移位的符号后决定进入哪个状态。

* * *

[注 1] ...或者接受，如果移位的符号是输入结束标记，但这只是状态的一种特殊情况。

# javascript - 不同位置的 jQuery UI 选项卡和选项卡内容

> ID：13084831
> 
> 赞同：1
> 
> 时间：2012-10-26T10:05:25.743
> 
> 标签：javascript, html, jquery-ui, tabs

UI 选项卡的工作方式如下：

```
$( "#tabs" ).tabs();

<div id="tabs">
    <ul>
        <li><a href="#tabs-1">tab 1</a></li>
        <li><a href="#tabs-2">tab 2</a></li>
    </ul>
    <div id="tabs-1">
    </div>
    <div id="tabs-2">
    </div>
</div> 
```

需要做这样的事情：

```
$( "#tabs" ).tabs();

<div id="tabs">
    <ul>
        <li><a href="#tabs-1">tab 1</a></li>
        <li><a href="#tabs-2">tab 2</a></li>
    </ul>
</div>

<div id="tabs-content">
    <div id="tabs-1">
    </div>
    <div id="tabs-2">
    </div>
</div> 
```

所以标签和标签内容在不同的 div 中。

是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T10:24:11.937

是的，这是可能的

请检查此链接，然后单击链接

[http://jsfiddle.net/YJdVE/1/](http://jsfiddle.net/YJdVE/1/)

代码

```
$(function() {
$("#tabs ul li").click(function() {
$("#tabs-content div").hide();
$('#tabs-content div:eq('+($(this).index())+')').show();
});
}); 
```

# php - PHP，XML - 难以理解如何访问属性

> ID：13084833
> 
> 赞同：0
> 
> 时间：2012-10-26T10:05:38.440
> 
> 标签：php, xml, simplexml

我一直在从事一个涉及 PHP 和 XML 的小项目，我遇到的困难来自访问节点中的属性。

以下是从节点访问属性的示例：

```
<?php
$string = <<<XML
<a>
<foo name="one" game="lonely">1</foo>
</a>
XML;

$xml = simplexml_load_string($string);

foreach ($xml->foo[0]->attributes() as $a => $b) {
    echo $a,'="',$b,"\"\n";
}
?> 
```

在上面的代码中，我似乎无法理解这`foo[0]`一点。例如，我很困惑为什么你必须做`foo[0]->att...` 而不是仅仅`foo->att...`。

谢谢你的时间，-迈克尔米切尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T10:09:29.433

可能有多个 foo 元素。你得到了他们中的第一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T10:09:54.460

该表达式`$xml->foo`允许遍历`<foo>`中节点的所有子元素`$xml`。这可以是零个或多个子节点：

```
foreach ($xml->foo as $foo)
{
    echo "<foo>\n";
    foreach ($foo->attributes() as $name => $value) {
        echo "$name=\"$value\"\n";
    }
} 
```

因此，如果您只需要所有这些零个或多个元素中的一个特定元素，则需要指定您指的是哪一个。这可以通过添加数组大括号及其从零开始的位置来完成，这里`$xml->foo[0]`：

```
$foo = $xml->foo[0];
echo "<foo>\n";
foreach ($foo->attributes() as $name => $value) {
    echo "$name=\"$value\"\n";
} 
```

# android - 如何获取 Android 手机所有者的名字和姓氏？

> ID：13084836
> 
> 赞同：9
> 
> 时间：2012-10-26T10:05:44.790
> 
> 标签：android, contacts

有没有办法获取 Android 手机所有者的名字和姓氏？我已经搜索了互联网，但我没有运气。我在 Stackoverlow 中偶然发现了[这个](https://stackoverflow.com/questions/4301064/how-to-get-the-firstname-and-lastname-from-android-contacts)问题，但这是获取所有联系人的名字和姓氏。我需要的只是获取所有者的名字和姓氏。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-30T10:16:24.880

我认为这仅适用于 ICS - 查看更多信息[http://android-codelabs.appspot.com/resources/tutorials/contactsprovider/ex1.html](http://android-codelabs.appspot.com/resources/tutorials/contactsprovider/ex1.html)

```
Cursor c = activity.getContentResolver().query(ContactsContract.Profile.CONTENT_URI, null, null, null, null);
int count = c.getCount();
String[] columnNames = c.getColumnNames();
boolean b = c.moveToFirst();
int position = c.getPosition();
if (count == 1 && position == 0) {
    for (int j = 0; j < columnNames.length; j++) {
        String columnName = columnNames[j];
        String columnValue = c.getString(c.getColumnIndex(columnName)));
        ...
        //Use the values
    }
}
c.close(); 
```

Android 包含一个代表设备所有者的个人配置文件 - 此配置文件称为“我”配置文件并存储在`ContactsContract.Profile`表中。您可以从用户的个人资料中读取数据，只要您

**在您的 AndroidManifest.xml 中添加 READ_PROFILE 和 READ_CONTACTS 权限。**

与您最相关的字段是 Contact 中的 DISPLAY_NAME 列，可能还有 StructuredName 字段

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T08:19:40.000

我搜索了这个东西并获得了一些喜欢，希望它对你有帮助。

*   [如何获取电话用户的名字（或全名）？](https://stackoverflow.com/questions/9323207/how-can-i-get-the-first-name-or-full-name-of-the-user-of-the-phone)

*   [Android - 使用 AccountManager / 手机所有者的名字和姓氏获取 UserData](https://stackoverflow.com/questions/7367283/android-get-userdata-using-accountmanager-first-and-last-name-of-the-phone-o)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-26T10:07:04.223

尝试这个：

```
final AccountManager manager = AccountManager.get(this);
final Account[] accounts = manager.getAccountsByType("com.google");
final int size = accounts.length;
String[] names = new String[size];
for (int i = 0; i < size; i++) {
  names[i] = accounts[i].name;
} 
```

# java - AlarmManager 和“设置警报以关闭键盘保护，seq = 10”

> ID：13084842
> 
> 赞同：0
> 
> 时间：2012-10-26T10:06:01.103
> 
> 标签：java, android, alarmmanager, keyguard

我的 AlarmManager 无法正常工作。

那个`LogCat`说**`setting alarm to turn off keyguard, seq = 10`**。

这是什么意思？我该如何解决？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T18:06:44.190

我解决了这个问题：

1.  删除报警管理器
2.  使用 GCM (Google Cloud Messaging for Android) 显示通知

*在我使用 AlarmManager 手动检查更新之前...*

# html - css页面卷曲效果阴影与旋转

> ID：13084844
> 
> 赞同：5
> 
> 时间：2012-10-26T10:06:03.473
> 
> 标签：html, css, css-shapes, css-transforms

我正在尝试旋转已应用“页面卷曲”投影的 div。

页面卷曲阴影效果在我旋转 div 之前工作正常，此时阴影元素通过 div 显示（z-index 问题）？

我还注意到，如果我有一个图像作为 div 内容，我不会遇到这个问题，但我希望它适用于具有文本内容的 div。有什么建议么？

这是代码：

CSS（移除供应商前缀以缩短代码，但所有现代浏览器都出现此问题）：

```
.shadow {border:1px solid #ccc;position:relative;width:300px;height:116px;background-color:#ededed;}

.shadow:before, .shadow:after {            
    bottom:13px;
    content: "";
    position: absolute;
    z-index: -1;
    -moz-transform: rotate(-11deg);
    box-shadow: 0 15px 5px rgba(0, 0, 0, 0.2);
    height: 50px;
    max-width: 50%;
    width: 50%;
    left:3px;
}
.shadow:after {
    -moz-transform: rotate(11deg);
    left: auto;
    right: 2px;
}

.rotate{
    -moz-transform: rotate(4deg);
} 
```

HTML：

```
 <div class="shadow">this is the first div</div> <!-- this one is ok -->
    <div class="shadow rotate">this is the second div</div> <!-- this has the issue -->
    <div class="shadow rotate"><img src="//www.google.com/logos/2012/Teachers_Day_Alt-2012-hp.jpg" width="300" height="116"></div> <!-- this one is ok --> 
```

这是一个jsfiddle：http: [//jsfiddle.net/U8qY3/5/](http://jsfiddle.net/U8qY3/5/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T10:18:00.880

不错的工作！

作为一种解决方法，您可以在旋转的 div 中放置一个 DIV，将背景颜色设置为下方，并设置完整的高度和宽度，如下所示：http: [//jsfiddle.net/U8qY3/6/](http://jsfiddle.net/U8qY3/6/)

HTML

```
<div class="shadow rotate">
    <div class="workaround">this is the second div</div>         
</div> 
```

CSS

```
.workaround{
    height: 100%;
    width: 100%;
    background-color: #ededed;
} 
```

# selenium - 硒和 SSO

> ID：13084845
> 
> 赞同：2
> 
> 时间：2012-10-26T10:06:05.440
> 
> 标签：selenium, junit, single-sign-on

我需要单独运行我的 Selenium Webdriver JUnit 测试，但也需要同时运行。我一直在寻找一种解决方案，基本上可以解决一个问题：我正在测试一个使用 SSO 的应用程序。

这意味着，我必须在运行测试时手动登录。另一方面，这甚至是需要的，因为您不想将关键密码存储在任何文件中。当您运行单个测试时，这甚至没有害处。但是当您需要全部运行它们并且您有大约 100 个测试时，您将不得不登录 100 次。想都别想！

我发现一种可能的解决方案可能是 Java 代理服务器。我找到了显示如何创建和处理一个的代码，但不是其中的 SSO 部分。谁能帮我？或者密码是否会以任何一种方式存储在某个地方？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T08:20:26.993

您需要了解有关 SSO 实施的更多信息。我建议使用浏览器的开发工具，我们的调试代理，如 Fiddler 或 Charles，在 SSO 身份验证期间捕获浏览器和服务器之间的 HTTP 流量，然后在 Java Web 客户端中实现这些请求。SSO 身份验证通常会导致设置 cookie。如果您在身份验证阶段之后捕获此 cookie，那么您可以在每个 Selenium 测试中重用此 cookie。

身份验证将需要凭据，您可以将其放入属性文件中。您可以将此属性文件从源代码控制中排除，并要求所有开发人员在运行测试时使用他们自己的凭据。

# wordpress - 查看哪个用户删除了某个帖子？

> ID：13084847
> 
> 赞同：0
> 
> 时间：2012-10-26T10:06:05.947
> 
> 标签：wordpress

所以我有这个问题。客户有一个 wordpress 网站，内容由 3 位管理员管理。其中一位删除了所有内容，没有人会承认他这样做了。所以我需要调查谁删除了所有帖子。

有可能以任何方式做吗？我用谷歌搜索并没有找到任何关于这样的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T12:35:51.173

我很确定 Wordpress 没有附带用户操作日志。有很多插件可以做到这一点。

您不能通过运行最近的备份来恢复帖子吗？我知道这并不能解决问题，但由于我认为无论如何都无法跟踪它，因此不妨防止它再次发生或其他事情。

# highcharts - 如何始终在 HighCharts 中显示 plotLine？

> ID：13084849
> 
> 赞同：23
> 
> 时间：2012-10-26T10:06:16.423
> 
> 标签：highcharts

我正在创建一个带有 plotLine 的 HighChart。plotLine 具有固定值，而图表之间的数据可能会有所不同。

HighChart 根据数据的最大值自动缩放 y 轴，但它在计算中不考虑 plotLine 的值。

因此，如果数据范围包含 plotLine 值，则会显示 plotLine，但如果不是，则会从视口中裁剪出来。

例子：

```
 $(function () {
        $(document).ready(function() {
            var chart = new Highcharts.Chart({
                chart: {
                    renderTo: 'container',
                    type: 'column'
                },
                title: {
                    text: 'Dummy Data by Region'
                },
                xAxis: {
                    categories: ['Africa', 'America', 'Asia']
                },
                yAxis: {
                    plotLines:[{
                        value:450,
                        color: '#ff0000',
                        width:2,
                        zIndex:4,
                        label:{text:'goal'}
                    }]
                },
                series: [{
                    name: 'Year 1800',
                    data: [107, 31, 650]
                }]
            });
        });

    });​ 
```

上述代码的 JSFiddle：http: [//jsfiddle.net/4R5HH/3/](http://jsfiddle.net/4R5HH/3/)

目标线（红色）显示为默认数据，但如果我将数据更改为 [107, 31, 250]，则 plotLine 会超出图形视口，因此变得不可见。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-08-30T23:03:07.763

另一种不引入数据点的选项：

```
yAxis: {
    minRange:450,
    min:0,
    plotLines:[{
        value:450,
        color: '#ff0000',
        width:2,
        zIndex:4,
        label:{text:'goal'}
    }]
}, 
```

这会将 yAxis 的最小值设置为 0（在这种情况下这不太可能是错误的），并将最小范围设置为 450。

请参阅[更新的小提琴](http://jsfiddle.net/4R5HH/55/ "更新的小提琴")。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-10-26T13:12:19.950

您需要在图表中添加一个点，但禁用标记。我添加了一个散点图类型的新系列，其值等于目标值：

```
{
     name: 'Goal',
     type: 'scatter',
     marker: {
          enabled: false
     },
     data: [450]
} 
```

请参阅更新的 jsFiddle：http: [//jsfiddle.net/wergeld/4R5HH/4/](http://jsfiddle.net/wergeld/4R5HH/4/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-02-09T11:38:04.040

在某些情况下，wergeld 的解决方案比 jank 的解决方案更可取，尤其是当您不确定`min`和时`minRange`。但是wergeld的解决方案有一个小问题。如果您将鼠标指向绘图线上，它将在该点上显示一个点和工具提示。为避免这种情况，我修改了他的解决方案并添加了解决`enableMouseTracking`问题的方法。

```
{
     name: 'Goal',
     type: 'scatter',
     marker: {
          enabled: false
     },
     data: [450],
     enableMouseTracking: false
} 
```

查看更新的 jsFiddle：http: [//jsfiddle.net/4R5HH/570/](http://jsfiddle.net/4R5HH/570/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-05T01:47:36.050

您可以简单地将**max**属性设置为您将拥有的最大值：

```
yAxis: {

            max:650 //HERE
            plotLines...

        }, 
```

# height - 如何在PB中获取图像的宽度和高度

> ID：13084850
> 
> 赞同：2
> 
> 时间：2012-10-26T10:06:18.447
> 
> 标签：height, width, powerbuilder

我正在使用PB8.0，我想获取图片的宽度和高度来调整我在DW中的图片大小。你知道怎么得到吗？

我搜索了一个示例以获取位图文件的宽度和高度。位图文件似乎是正确的，但对于 .jpg、.gif 等其他文件则不正确

请帮我

```
//Getting a Bitmaps Width and Height 
int     li_job
blob    b
string  ls_ext

ls_ext = lower(Right(as_filename, 3))
CHOOSE CASE ls_ext
  CASE 'bmp'
    li_job = FileOpen( "filename.bmp", StreamMode!, Read! )
    IF li_job > 0 THEN
      FileRead( li_job, b )

      arl_Width  = Long(Integer( BlobMid( b, 19, 2 ) ), &
                   Integer( BlobMid( b, 21, 2) ) )
      arl_Height = Long(Integer( BlobMid( b, 23, 2 ) ), &
                   Integer( BlobMid( b, 25, 2) ) )
      FileClose( li_job )
    ELSE
      RETURN -1
    END IF
  CASE ELSE
    RETURN -1
END CHOOSE
RETURN 1 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T11:42:55.183

图像大小的偏移量取决于文件格式。您使用的值对[BMP 格式](http://en.wikipedia.org/wiki/BMP_file_format)有效，但对于另一种格式会有所不同。

您需要单独搜索需要处理的任何文件格式。一些信息可[在此处](http://en.wikipedia.org/wiki/Image_file_formats)获得。[此处](http://www.freevbcode.com/ShowCode.asp?ID=112)提供了 VB 处理 JPEG、GIF、BMP 和 PNG 的类似示例。

此外，您可以通过 Windows 图像 API 获得一些信息，但我没有可用的示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T12:33:20.740

一种方法是将 Picture 控件添加到未选中可见属性且选中 OriginalSize 的窗口中。

设置图片名称以加载图像，高度和宽度将可用于进行处理。

```
// p_1 is not visible
p_1.PictureName = "c:\temp\pbHowTo.jpg"

MessageBox("height", p_1.height)
MessageBox("width", p_1.width) 
```

您可能需要以像素为单位转换值，因为它们在 PbUnit 中。

```
height_pixel = UnitsToPixels(p_1.height, YUnitsToPixels!)
width_pixel =  UnitsToPixels(p_1.width, XUnitsToPixels!) 
```

图片控件支持 .BMP、GIF、.JPG 和 PNG 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-01T06:16:12.493

下面是获取JPG宽度和高度的代码：

```
//JPG

li_file = FileOpen(as_file_name, StreamMode!, Read! )
If li_file = -1 Then Return 0

li_read = FileRead (li_file, lb_data)  

If String (BlobMid (lb_Data, 1,3)) = Char (255) + Char (216) + Char (255) Then //JPG

    ll_DataLen = Len(lb_Data)   
    ll_DataPos = 3
    ll_FilePos = 3
    lb_LoopFlag = true
    Do While lb_LoopFlag
        ll_DataPos = ll_DataPos + 1
        ll_FilePos = ll_FilePos + 1
        li_Char1 = Asc (String (BlobMid(lb_Data, ll_DataPos, 1)))
        li_Char2 = Asc (String (BlobMid(lb_Data, ll_DataPos + 1, 1)))

        If li_Char1 = 255 And li_Char2 <> 255 Then
            If li_Char2 >= 192 And li_Char2 <= 195 Then
                al_width = Asc (String (BlobMid (lb_Data, ll_DataPos + 7,1))) * 256 + Asc (String (BlobMid (lb_Data, ll_DataPos + 8,1)))
                al_height= Asc (String (BlobMid (lb_Data, ll_DataPos + 5,1))) * 256 + Asc (String (BlobMid (lb_Data, ll_DataPos + 6,1))) 
                lb_LoopFlag= False
            Else   
                ll_FilePos = ll_FilePos + Asc (String (BlobMid(lb_Data, ll_DataPos + 3, 1))) + Asc (String (BlobMid(lb_Data, ll_DataPos + 2, 1))) + 1
                If ll_FilePos > ll_FileLength Then   
                    Exit   
                Else
                    FileSeek(li_file, ll_FilePos)   
                    FileRead(li_file, lb_Data)   
                    ll_DataLen = Len(lb_Data)   
                    ll_DataPos = 0   
                End If   
            End If   
        End If

        If ll_DataPos = ll_DataLen - 9 And lb_LoopFlag = True Then   
            ll_FilePos = ll_FilePos - 9   
            FileSeek(li_file, ll_FilePos)   
            FileRead(li_file, lb_Data)   
            ll_DataLen = Len(lb_Data)   
            ll_DataPos = 0   
        End If
        If ll_FilePos >= ll_FileLength Then   
            lb_LoopFlag = False   
        End If   
    Loop
End If 
```

对于 GIF：

```
al_width = Asc(String (BlobMid (lb_Data, 7,1))) + Asc (String (BlobMid (lb_Data, 8,1))) * 256
al_height = Asc (String (BlobMid (lb_Data, 9,1))) + Asc (String (BlobMid (lb_Data, 10,1))) * 256 
```

# jquery - 更改灯箱中的光标

> ID：13084852
> 
> 赞同：0
> 
> 时间：2012-10-26T10:06:29.780
> 
> 标签：jquery, css

我在我的网站上使用 Lightbox，它很棒。但是，当我将鼠标悬停在缩略图上时，光标会变成一只小手，这就是我想要的。但是当我点击一个图像并且它变大时，光标就是一个指针。我可以将它更改为当我将鼠标悬停在大图像上时它仍然是一只手吗？

我在 lightbox.css 中找不到任何东西

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T10:09:51.090

添加以下内容`lightbox.css`或创建**新的**css 文件并将其包含在**之后** `lightbox.css`或将其添加到您要包含的**自定义 css**文件中`lightbox.css`

`.lb-nav { cursor: pointer; }`

# java - 在外部扬声器上播放声音并在 android 中同时在内部扬声器上进行主动呼叫

> ID：13084853
> 
> 赞同：0
> 
> 时间：2012-10-26T10:06:38.630
> 
> 标签：java, android, audio, playback

我正在构建一个在来电期间播放背景音乐的应用程序。

当我接到来电时它工作正常，它会在外部扬声器上开始播放音乐，但是当我接听电话时，我会`setSpeakerphoneOn(true)`在外部扬声器上播放音乐和来电者的声音，但麦克风没有接收到播放的声音，它只会接收我的声音。

我哪里错了，我不知道。知道的人请告诉我。我将不胜感激。

```
m_audioManager = (AudioManager)getSystemService(Context.AUDIO_SERVICE);
Log.d("Is phone speaker : ","IDLE-1-->"+ m_audioManager.isSpeakerphoneOn());
m_audioManager.setMode(AudioManager.MODE_IN_CALL);    
m_audioManager.setSpeakerphoneOn(true); 
RecieverDialog.mp.start(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T11:40:34.547

通过在手机的扬声器中播放并通过手机的麦克风录制的任何音频质量都很差，因为手机扬声器通常不是很好，而且您很少处于无噪音、无回声的环境中。

至于为什么在您的用例中音乐会变得静音或严重衰减：您的手机可能正在使用两个（或更多）麦克风进行噪音抑制，其中来自一个麦克风的信号可以用作噪音的一种参考你周围的环境。
该算法的目标是消除所有周围的噪音，以便通话另一端的人只能听到您的声音。根据麦克风的位置和算法的调整，您正在播放的音乐可能被认为是噪声，因此在上行链路信号中被抑制。

# android - 如何在 Android 的 ListView Header 中将 OnClickListener 添加到图像按钮？

> ID：13084855
> 
> 赞同：1
> 
> 时间：2012-10-26T10:06:44.577
> 
> 标签：android, android-listview, onclicklistener

我在 android 的 ListView 中添加了一个自定义标题。Header 的布局 xml 文件包含一个 Image 按钮。如何向此 ImageButton 添加 OnClickListener

标题布局文件

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="horizontal"
android:layout_width="fill_parent"
android:layout_height="fill_parent" android:background="#336699">

<ImageButton
    android:id="@+id/imageButton1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/add" />

</LinearLayout> 
```

绑定 ListView 的代码（我创建了一个自定义适配器）

```
 ListView listView1 = (ListView) findViewById(R.id.listView1);
    LocationAdapter adapter = new LocationAdapter(this,R.layout.listrow,webresult);
    View header = (View)getLayoutInflater().inflate(R.layout.listheader, null);
    listView1.addHeaderView(header);
    listView1.setAdapter(adapter); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T10:15:53.530

当您向列表视图添加标题时，它被视为`0`列表的元素。因此，您无需添加 an，`onClickListener`而是像使用列表中的常规行一样执行此操作：

```
 listview.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
          if(position==0) //do your stuff
        }
    }); 
```

# css - CSS 验证错误

> ID：13084861
> 
> 赞同：-1
> 
> 时间：2012-10-26T10:07:05.213
> 
> 标签：css

当我尝试在 CSS [Validator](http://jigsaw.w3.org/css-validator/)上验证我的网站时，它在通用选择器“*”解析错误处显示错误。有人可以帮忙吗？我使用了 twitter 引导 css。像下面的代码

```
.row-fluid .span12 {
  width: 99.99999998999999%;
  *width: 99.94680850063828%;
}
.row-fluid .span11 {
  width: 91.489361693%;
  *width: 91.4361702036383%;
}
.row-fluid .span10 {
  width: 82.97872339599999%;
  *width: 82.92553190663828%;
}
.row-fluid .span9 {
  width: 74.468085099%;
  *width: 74.4148936096383%;
}
.row-fluid .span8 {
  width: 65.95744680199999%;
  *width: 65.90425531263828%;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T10:20:42.370

`*`嗨，现在删除`width`

现在，如果您使用`IE`的是创建一个单独的`CSS`文件并链接到您的文档

**像这样**

```
Target ALL VERSIONS of IE

<!--[if IE]>
    <link rel="stylesheet" type="text/css" href="all-ie-only.css" />
<![endif]-->

Target everything EXCEPT IE

<!--[if !IE]><!-->
    <link rel="stylesheet" type="text/css" href="not-ie.css" />
 <!--<![endif]-->

Target IE 7 ONLY

<!--[if IE 7]>
    <link rel="stylesheet" type="text/css" href="ie7.css">
<![endif]-->

Target IE 6 ONLY

<!--[if IE 6]>
    <link rel="stylesheet" type="text/css" href="ie6.css" />
<![endif]-->

Target IE 5 ONLY

<!--[if IE 5]>
    <link rel="stylesheet" type="text/css" href="ie5.css" />
<![endif]-->

Target IE 5.5 ONLY

<!--[if IE 5.5000]>
<link rel="stylesheet" type="text/css" href="ie55.css" />
<![endif]-->

Target IE 6 and LOWER

<!--[if lt IE 7]>
    <link rel="stylesheet" type="text/css" href="ie6-and-down.css" />
<![endif]-->

<!--[if lte IE 6]>
    <link rel="stylesheet" type="text/css" href="ie6-and-down.css" />
<![endif]-->

Target IE 7 and LOWER

<!--[if lt IE 8]>
    <link rel="stylesheet" type="text/css" href="ie7-and-down.css" />
<![endif]-->

<!--[if lte IE 7]>
    <link rel="stylesheet" type="text/css" href="ie7-and-down.css" />
<![endif]-->

Target IE 8 and LOWER

<!--[if lt IE 9]>
    <link rel="stylesheet" type="text/css" href="ie8-and-down.css" />
<![endif]-->

<!--[if lte IE 8]>
    <link rel="stylesheet" type="text/css" href="ie8-and-down.css" />
<![endif]-->

Target IE 6 and HIGHER

<!--[if gt IE 5.5]>
    <link rel="stylesheet" type="text/css" href="ie6-and-up.css" />
<![endif]-->

<!--[if gte IE 6]>
    <link rel="stylesheet" type="text/css" href="ie6-and-up.css" />
<![endif]-->

Target IE 7 and HIGHER

<!--[if gt IE 6]>
    <link rel="stylesheet" type="text/css" href="ie7-and-up.css" />
<![endif]-->

<!--[if gte IE 7]>
    <link rel="stylesheet" type="text/css" href="ie7-and-up.css" />
<![endif]-->

Target IE 8 and HIGHER

<!--[if gt IE 7]>
    <link rel="stylesheet" type="text/css" href="ie8-and-up.css" />
<![endif]-->

<!--[if gte IE 8]>
    <link rel="stylesheet" type="text/css" href="ie8-and-up.css" />
<![endif]--> 
```

**[关联](http://front-end-developer.blogspot.in/2012/10/how-to-create-only-ie-stylesheet.html)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T10:27:42.433

该代码使用（不）著名的[Star Html Hack](http://css-discuss.incutio.com/wiki/Star_Html_Hack)，这意味着使用*故意*破坏的 CSS 代码来处理 IE 6。只需忽略错误消息。

# php - Code Igniter 网站移至新服务器

> ID：13084862
> 
> 赞同：0
> 
> 时间：2012-10-26T10:07:07.080
> 
> 标签：php, codeigniter

我希望你们都度过了愉快的一周！

我已将代码点燃站点移至新服务器，当我将其移至此处时，我对其进行了测试。

```
http://31.25.190.77/~freelanc 
```

它在哪里完美运行，所以我将域名指向它。

```
http://www.freelanceentrysolutions.co.uk/ 
```

但不是它不起作用！只有主页有效，但如果我点击另一个链接，我会得到

> 未找到
> 
> 在此服务器上找不到请求的 URL /supply-and-installations.html。
> 
> 此外，在尝试使用 ErrorDocument 处理请求时遇到 404 Not Found 错误。

这里有什么想法吗？

亲切的问候，布拉德

解决了我将此添加到 HTACCESS

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^freelanceentrysolutions\.co.uk$ [OR]
RewriteCond %{HTTP_HOST} ^www\.freelanceentrysolutions\.co.uk$
RewriteCond %{REQUEST_URI} !^/index.php/
RewriteRule (.*) /index.php/$1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T10:16:17.063

您可能需要将 index.php 放在所有链接中？

```
/index.php/supply-and-installations.html 
```

尝试

```
http://www.freelanceentrysolutions.co.uk/index.php/supply-and-installations.html 
```

或重写 URL 以实现此目的而不使用 index.php

**修改：**

如果您在 apache 上，请将以下内容放入 .htaccess 文件中并将其放入根文件夹中。

```
RewriteEngine on
RewriteCond $1 !^(index\.php|[Javascript / CSS / Image root Folder name(s)]|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

另一个好版本位于此处：

[http://snipplr.com/view/5966/codeigniter-htaccess/](http://snipplr.com/view/5966/codeigniter-htaccess/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T10:18:11.683

它与[http://www.freelanceentrysolutions.co.uk/index.php/supply-and-installations.html](http://www.freelanceentrysolutions.co.uk/index.php/supply-and-installations.html)完美配合！

我认为这`'index.php/supply-and-installations.html'`是有问题的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-26T10:32:10.760

解决了！我将此添加到我的 HTAccess 文件中。

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^freelanceentrysolutions\.co.uk$ [OR]
RewriteCond %{HTTP_HOST} ^www\.freelanceentrysolutions\.co.uk$
RewriteCond %{REQUEST_URI} !^/index.php/
RewriteRule (.*) /index.php/$1 
```

# sql - Extbase - 从查询中获取创建的 sql

> ID：13084863
> 
> 赞同：9
> 
> 时间：2012-10-26T10:07:13.307
> 
> 标签：sql, typo3, extbase

我想从我的typo3 扩展中获取一些数据库表。该扩展基于 extbase。

查询始终不返回任何内容，但数据存在

我试过这个：

```
$query = $this->createQuery();
$query->statement('SELECT * FROM `my_table`
    WHERE field = ? ORDER BY date DESC LIMIT 1',
    array($condition));

$results = $query->execute(); 
```

和这个：

```
$query = $this->createQuery();

$query->matching($query->equals('field', $condition));
$query->setOrderings(array('date' => Tx_Extbase_Persistence_QueryInterface::ORDER_DESCENDING));
$query->setLimit(1);

$results = $query->execute(); 
```

两者都返回*null*作为结果。

是否可以获取该类创建的 sql 以查看错误在哪里？

我查看了一些 extbase 持久类，但没有找到线索

编辑：对于那些有兴趣的人..我找到了一个“解决方案”。

如果使用 statement() 方法创建查询，则可以使用此函数打印查询

```
echo $query->getStatement()->getStatement(); 
```

它不会替换占位符。但是您可以使用此方法获取变量

```
var_dump($query->getStatement()->getBoundVariables()); 
```

这是我找到的最好的解决方案，无需编辑 extbase 扩展

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-10-14T19:23:10.710

在 TYPO3 6.2 中，您可以使用 Extbase DebuggerUtility 来调试查询。

在 $query->execute() 之前添加这段代码：

```
/** @var Typo3DbQueryParser $queryParser */
$queryParser = \TYPO3\CMS\Core\Utility\GeneralUtility::makeInstance('TYPO3\\CMS\\Extbase\\Persistence\\Generic\\Storage\\Typo3DbQueryParser');
\TYPO3\CMS\Extbase\Utility\DebuggerUtility::var_dump($queryParser->parseQuery($query)); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-26T10:37:06.703

检查[此代码段](http://snipplr.com/view/55225/)，虽然它使用起来不是很舒服，但它有很大帮助：

通常，您需要在方法结束时使用此代码`buildQuery(array $sql)`(*) - 就在之前`return $statement;`

```
if (in_array("your_table_name", $sql['tables'])) {
    var_dump($statement);
    print_r($statement);
} 
```

(*) 类文件：

*   TYPO3 版本：4.x：`typo3/sysext/extbase/Classes/Persistence/Storage/Typo3DbBackend.php`
*   TYPO3 版本：6.x：`typo3/sysext/extbase/Classes/Persistence/Generic/Storage/Typo3DbBackend.php`

* * *

### 在 6.2.x ...

您可以在方法内尝试`\TYPO3\CMS\Core\Database\DatabaseConnection::exec_SELECTquery`，只需在获取 $query 后添加条件，例如（*修剪很重要！*）：

```
public function exec_SELECTquery($select_fields, $from_table, $where_clause, $groupBy = '', $orderBy = '', $limit = '') {
    $query = $this->SELECTquery($select_fields, $from_table, $where_clause, $groupBy, $orderBy, $limit);

    if (trim($from_table) == 'fe_users') {
        DebuggerUtility::var_dump($query);
    }

// rest of method 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-11-08T12:41:36.513

一种无需更改任何 Typo3 核心代码且目前未在任何论坛中提及的简单方法是使用 php "serialize()" 方法：

```
$result = $query->execute();
echo (serialize($result)); 
```

在结果对象中，您可以找到 SQL 查询 ("statement;" ...)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-06-25T17:52:21.987

改进 biesiors 答案：

由于 Extbase 在调用 buildQuery() 后替换了一些占位符，您可能更愿意将调试输出放在`getObjectDataByQuery()`$ *this->replacePlaceholders($sql, $parameters, $tableName);之后。*

```
if (strpos($sql, "your_table_name.")) {
    debug($sql, 'my debug output');
}; 
```

此外，最好使用 debug() 而不是 var_dump()。
[文件：`typo3\sysext\extbase\Classes\Persistence\Generic\Storage\Typo3DbBackend.php`. 6.1 版中的第 339 行]：

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-06-16T12:13:18.617

```
$query = $this->createQuery();
$query->getQuerySettings()->setReturnRawQueryResult(TRUE);
$getHotelInfo = 'SELECT * FROM `my_table` WHERE field = ? ORDER BY date DESC LIMIT 1';
return $query->statement($getHotelInfo)->execute(); 
```

要执行查询，您必须在存储库中写入“setReturnQueryResult”

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-23T11:54:08.260

使用 TYPO3 6.1 时调试语句的一种更简洁的方法[是](http://api.typo3.org/typo3cms/61/html/class_t_y_p_o3_1_1_c_m_s_1_1_extbase_1_1_persistence_1_1_generic_1_1_storage_1_1_typo3_db_backend.html#a5a4c024e2559069da301c85fb297b0e7)使用`Typo3DbBackend`.

```
$parser = \TYPO3\CMS\Core\Utility\GeneralUtility::makeInstance('TYPO3\\CMS\\Extbase\\Persistence\\Generic\\Storage\\Typo3DbBackend');
$params = array();
$queryParts = $parser->parseQuery($query, $params);

\TYPO3\CMS\Core\Utility\GeneralUtility::devLog('query', 'my_extension', 1, array('query' => $queryParts, 'params' => $params)); 
```

解析器返回一个数组，其中包含生成的 SQL 语句的不同部分。

在 TYPO3 6.2 中，该`parseQuery`方法被移到[`Typo3DbQueryParser`](http://typo3.org/api/typo3cms/class_t_y_p_o3_1_1_c_m_s_1_1_extbase_1_1_persistence_1_1_generic_1_1_storage_1_1_typo3_db_query_parser.html#aa2918c5df37389fa5cf2f9939bea5f28)并丢失了它的第二个参数。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-03-14T15:58:51.647

我只是用 $_GET 条件扩展了上面的代码片段。对于调试，只需将“?dbg_table=tx_some_of_my_tables”附加到您的地址，您就可以开始了；-)

```
if (in_array($_GET['dbg_table'], $sql['tables'])) {
        echo('<div style="background: #ebebeb; border: 1px solid #999; margin-bottom: 20px; padding: 10px;"><pre style="white-space: normal">'.$statement.'</pre></div>');
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-06-15T06:42:02.217

我建议在“SYS”数组下的typo3conf/LocalConfiguration.php 文件中设置它

```
'SYS' => array(
......
'displayErrors' => 1,
'sqlDebug' => 1
.......
) 
```

然后故意在查询中写错字段名，然后执行代码。这将显示最后一个查询执行错误。

# web-services - SharePoint 自定义 Web 服务

> ID：13084865
> 
> 赞同：0
> 
> 时间：2012-10-26T10:07:17.663
> 
> 标签：web-services, sharepoint, ws-security

我有一个用于执行某些操作的自定义 SharePoint 网络服务。用户凭据通过 Soap Header 传递。凭据可以毫无问题地到达 Web 服务。

**问题：** 如果我没有使用用户凭据进行 Web 服务调用，以下代码将返回“未经授权的错误”。

**网络服务方法**

```
[WebMethod(Description = "Test Credentials")]
[SoapDocumentMethod(Binding = "SPService")]
[SoapHeader("Authen")]
public string[] TestCredentials(string siteURL)
{
string[] credentials = new string[3];
using (SPSite site = new SPSite(siteURL))
    {
    using (SPWeb spW = site.OpenWeb())
        {
        credentials[0] = Authen.CallingUserName;
        credentials[1] = Authen.CallingUserPwd;
        credentials[2] = siteURL;                
        }
    }
return credentials;
} 
```

**客户代码**

```
SPService.SPService spS = new SPService.SPService();//Webservice class
SPService.UserAuth ua = new SPService.UserAuth(); //Soap Header class
ua.CallingUserName = UserName; // User name
ua.CallingUserPwd = Password; // Password for the Username
spS.UserAuthValue = ua; // assigning the credential to the SoapHeader.

//System.Net.NetworkCredential nc = new NetworkCredential(UName, pwd, Domain);
//spS.Credentials = new NetworkCredential(UName, pwd, Domain);

string[] str = new string[3];
str = spS.TestCredentials(txt_URL.Text,"Shared Documents"); 
```

当网络凭据被注释掉时，我得到了`The request failed with HTTP status 401: Unauthorized.`错误。如果使用凭据，则 Web 服务返回预期值。

自定义 Web 服务的要求是使用 WS-Security 传递登录凭据并使用该凭据登录到 SharePoint 站点。

一些帮助会很有用。如果您需要有关此的更多详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T10:49:42.627

SPSite 构造函数在访问 Sharepoint 时将需要身份验证才能正确初始化。您可以使用您之前构建的凭据以与[此处描述的方式类似的方式对其进行实例化](http://williamvanstrien.blogspot.ie/2011/11/programatically-open-spsite-using.html)

# php - 使用 Zend Framework 获取垃圾邮件文件夹

> ID：13084867
> 
> 赞同：0
> 
> 时间：2012-10-26T10:07:19.937
> 
> 标签：php, zend-framework

我正在尝试制作一个脚本来登录我的 Gmail 帐户并从垃圾邮件文件夹中获取所有电子邮件。这是我到目前为止所拥有的：

```
<?php
// Ensure Zend folder is on include_path
set_include_path(implode(PATH_SEPARATOR, array(
    'C:\xampp\htdocs\zend\library',
     get_include_path(),
)));

// require the ZF autoloader file if you have it in your include path
require_once 'Zend/Loader/Autoloader.php';
// if ZF is not in your path you can specify the full path
// otherwise if it's in a subdir (most likely if you're on a web hosting)
// you can do something like this
//require_once dirname(__FILE__) . '/Zend/Loader/AutoLoader.php';

// laod the autoloader so you don't need to require any ZF file
Zend_Loader_Autoloader::getInstance();

// connecting with Imap to gmail
$mail = new Zend_Mail_Storage_Imap(
    array(
        'host'     => 'imap.gmail.com',
        'port'     => '993',
        'ssl'      => true,
        'user'     => 'myemail@gmail.com',
        'password' => 'password',
    )
);

/*
// get the message object
$message = $mail->getMessage(1);
// output subject of message
echo $message->subject . "\n";
// dump message headers
Zend_Debug::dump($message->getHeaders());

echo $mail->countMessages() . " messages found<br/>";
foreach ($mail as $message) 
{
    echo "Mail from '{$message->from}': {$message->subject}<br/>";
}
*/

/*
var_dump($mail->getCurrentFolder());
echo "<hr>";
*/

echo "<pre>";

foreach($mail->getFolders() as $mailfolder)
{
    foreach($mailfolder as $mailfolder2)
    {
        echo "<b>Folder ".$mailfolder2." ... fetching ... </b><br>";

            var_dump($mailfolder2);

    }

}

die;
var_dump($mail->getFolders());
var_dump($mail->selectFolder("Gmail/Drafts"));

/*
// mbox with folders
$mail = new Zend_Mail_Storage_Folder_Mbox(array('dirname' =>
                                                    '/'));

$folders = new RecursiveIteratorIterator($this->mail->getFolders(),
                                         RecursiveIteratorIterator::SELF_FIRST);
echo '<select name="folder">';
foreach ($folders as $localName => $folder) {
    $localName = str_pad('', $folders->getDepth(), '-', STR_PAD_LEFT) .
                 $localName;
    echo '<option';
    if (!$folder->isSelectable()) {
        echo ' disabled="disabled"';
    }
    echo ' value="' . htmlspecialchars($folder) . '">'
        . htmlspecialchars($localName) . '</option>';
}
echo '</select>';
*/

?> 
```

我已经设法获取每个文件夹（作为 Zend_Mail_Storage_Folder 对象），我无法弄清楚如何从中获取主题/消息......

从收件箱中获取所有电子邮件的基本脚本如下所示：

```
 // get the message object
$message = $mail->getMessage(1);
// output subject of message
echo $message->subject . "\n";
// dump message headers
Zend_Debug::dump($message->getHeaders());

echo $mail->countMessages() . " messages found<br/>";
foreach ($mail as $message) 
{
    echo "Mail from '{$message->from}': {$message->subject}<br/>";
} 
```

这基本上是一个 OOP 问题。有什么帮助吗？

这是我得到的输出

[http://s17.postimage.org/er2v6yjcf/ceva.jpg](http://s17.postimage.org/er2v6yjcf/ceva.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T13:01:52.983

尝试这个：

```
<?php
header("Content-Type: text/plain; charset=UTF-8");
mb_internal_encoding("UTF-8");
function __autoload($sClassName) {
    $sLibFilePath = __DIR__.'/'.str_replace('_', '/', $sClassName) . '.php';
    if (is_file($sLibFilePath)) {
        include_once($sLibFilePath);
    } else {
        return;
    }
}
$oImap = new Zend_Mail_Storage_Imap(
    array(
        'host'     => 'imap.gmail.com',
        'port'     => '993',
        'ssl'      => true,
        'user'     => 'myemail@gmail.com',
        'password' => '***',
    )
);
$oImap->selectFolder('[Gmail]/Spam');
echo $oImap->countMessages() . " messages found\n";
foreach ($oImap as $iTempId => $oMessage) {
  $iUniqueId = $oImap->getUniqueId($iTempId);
  echo "[{$iTempId}/{$iUniqueId}] Mail from ".mb_decode_mimeheader($oMessage->from).": ".mb_decode_mimeheader($oMessage->subject)."\n";
  if (rand(0,5) == 0) break; //for testing
} 
```

# bash - 根据预期回报做出决策

> ID：13084870
> 
> 赞同：0
> 
> 时间：2012-10-26T10:07:24.977
> 
> 标签：bash, tcl, expect

我正在尝试创建一个期望脚本，它将根据“期望”发送不同的密码字符串

*   条件 A：如果未使用用户名设置 cisco 设备，则第一个提示将只是“密码：” - 然后它应该使用密码 A（无用户名）

*   条件 B：如果已使用用户名设置，则提示将是“用户名：”后跟“密码：” - 那么它应该使用用户名和密码 B

```
#!/bin/bash
# Declare host variable as the input variable
host=$1　
 # Start the expect script
(expect -c "
set timeout 20
# Start the session with the input variable and the rest of the hostname
spawn telnet $host
set timeout 3 
if {expect \"Password:\"} {
send \"PasswordA\"}
elseif { expect \"Username:\"}
send \"UsersName\r\"}
expect \"Password:\"
log_user 0 
send \"PasswordB\r\"
log_user 1
expect \"*>\"
# send \"show version\r\"
# set results $expect_out(buffer) 
#expect \"Password:\"
#send \"SomeEnablePassword\r\"
# Allow us to interact with the switch ourselves
# stop the expect script once the telnet session is closed
send \"quit\r\"
expect eof
") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T12:50:23.100

你这样做是错的。:)

该`expect`语句不看先出现什么，它一直等到它看到你所要求的（如果它没有及时到达则超时），然后运行你传递给它的命令。我认为您可以按照您尝试的方式使用它，但这并不好。

`expect`可以获取一个替代列表来查找，例如 C`switch`语句或 shell`case`语句，这就是您需要的。

我*没有对此进行测试*，但你想要的应该是这样的：

```
expect {
  -ex "Username:" {
    send "UsersName\r"
    expect -ex "Password:" {send "PasswordB\r"}
  }
  -ex "Password:" {send "PasswordA\r"}
} 
```

换句话说，expect 将查找“用户名：”或“密码：”（`-ex`表示完全匹配，没有正则表达式），以先到者为准，然后运行与其关联的命令。

* * *

作为对评论的回应，我会尝试这样的第二个密码（假设成功登录会给出“#”提示）：

```
expect {
  -ex "Username:" {
    send "UsersName\r"
    expect -ex "Password:" {send "PasswordB\r"}
  }
  -ex "Password:" {
    send "PasswordA1\r"
    expect {
      -ex "Password:" {send "PasswordA2\r"}
      -ex "#" {}
    }
  }
} 
```

您*可以*在不寻找`#`提示的情况下执行此操作，但您必须依赖第二个`Password:`预期超时，这并不理想。

# php - 如何使用'if'重定向

> ID：13084880
> 
> 赞同：0
> 
> 时间：2012-10-26T10:07:42.297
> 
> 标签：php, html

我想检查表单的变量。在这里，我希望“a”和“b”是 5 和 99 之间的数字。如果是这样，我想自动重定向到下一页，如果不保留到此页面。

让我通过展示我制作的一段代码来解释一下：（对不起，我花了 15 分钟来理解如何在这里编写代码，但我不明白，所以我会在必要时使用空格）

```
<input type="text" name="a"><br>
<input type="text" name="b"><br>
<input type="submit" value="GO!">

<?php
if (is_numeric($_POST["a"]) && is_numeric($_POST["b"]) && 
$_POST["a"]<100 && $_POST["a"]>4 && $_POST["b"]<100 && $_POST["b"]>4) {
  echo "corect";
  //here i want to go to the next page like registration_complete.php
}
else {
  //here i want to remain to this page and show the errors to the user
}
?> 
```

对于这个可能很简单的问题，我很抱歉，但我在谷歌上只找到了愚蠢的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T10:11:41.500

First you must check it before you echo something. Then use `header("Location: mylogin_page.php");`.
What the point to echo something when you have chance that user will not see it? Then use header BEFORE html output.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T10:13:21.243

Because you are already outputting content to the screen, you cannot use the `header('Location: mypage.php')`. If you can't or don't want to do this, an alternative would be to use a javascript redirect:

```
echo "<script>document.location.replace = 'mypage.php';</script>"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T10:17:10.433

首先，`header`在将任何 html 代码发送到浏览器后，您将无法使用，因此您的 php 代码应该在另一个文件中，因此您应该：

`first-step.php`其中包含：

```
<?php
   session_start();
?>
<html>
   <head>
   </head>
   <body>
   <?php
      if(isset($_SESSSION['error'])) {
         echo $_SESSION['error'];
         unset($_SESSION['error']);
      }
   ?>
   <form action="actions.php?step=1" method="POST">
     <input type="text" name="a"><br>
     <input type="text" name="b"><br>
     <input type="submit" value="GO!">
   </form>
   </body>
</html> 
```

`actions.php`

```
<?php
  session_start();

  switch($_GET['step']) {
     case 1:
       if(is_numeric($_POST["a"]) && is_numeric($_POST["b"]) && $_POST["a"]<100 && $_POST["a"]>4 && $_POST["b"]<100 && $_POST["b"]>4)
       {
         header('Location: second-step.php');
         exit;
       }
       else
       {
         $_SESSION['error'] = 'my error';
         header('Location: first-step.php');
       }
     break;
   }
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T10:14:41.177

```
<?php
    if (is_numeric($_POST["a"]) && is_numeric($_POST["b"]) && $_POST["a"]<100 && $_POST["a"]>4 && $_POST["b"]<100 && $_POST["b"]>4)
    {
        header('location:correctpage.php');
    }
    else
    {
      foreach($POST as $key=>$post)
     {
       if(empty($post))
      {
        $error [] ="$key is empty required";//do your custom error handling this is just a demo
      }
        print_r($error);
        //here i want to remain to this page and show the errors to the user
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-26T10:15:05.740

```
<input type="text" name="a"><br/>
<input type="text" name="b"><br/>    
<input type="submit" value="GO!">    

<?php    
if (is_numeric($_POST["a"]) && is_numeric($_POST["b"]) && 
$_POST["a"]<100 && $_POST["a"]>4 && $_POST["b"]<100 && $_POST["b"]>4) {
  //echo "corect"; //why 'echo' then redirect?
  echo "<script>";
  echo "top.location = 'registration_complete.php';";
  echo "</script>";
  exit();
}    
else {
  //here i want to remain to this page and show the errors to the user
  //(if you want so, just stay executing this page)
}    
?> 
```

# bash - 检查 bash 中是否至少存在一个文件

> ID：13084885
> 
> 赞同：2
> 
> 时间：2012-10-26T10:08:12.657
> 
> 标签：bash, shell, scripting

我有这个

```
if [[ -e file.jpg ]] ;then echo "aaaaaaaaa"; fi 
```

它打印“aaaaaaa”

但如果有 file.png 或 file.png 我也想打印

所以我需要这样的东西

```
if [[ -e file.* ]] ;then echo "aaaaaaaaa"; fi 
```

但它不起作用我在语法中遗漏了一些东西

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-26T15:01:30.940

如果启用 bash 的`nullglob`设置，如果没有此类文件，模式文件。* 将扩展为空字符串：

```
shopt -s nullglob
files=(file.*)
# now check the size of the array
if (( ${#files[@]} == 0 )); then
    echo "no such files"
else
    echo "at least one:"
    printf "aaaaaaaaa %s\n" "${files[@]}"
fi 
```

如果不启用 nullglob，则将`files=(file.*)`生成一个包含一个元素的数组，即字符串“file.*”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T10:09:34.260

为什么不使用循环？

```
for i in file.*; do
   if [[ -e $i ]]; then
      # exists...
   fi
done 
```

# scala - 对合并排序实现感到困惑

> ID：13084893
> 
> 赞同：3
> 
> 时间：2012-10-26T10:08:43.390
> 
> 标签：scala

这条线上发生了什么，被`x`连接到`xs1`但没有在任何地方定义？`x``xs1`

```
case (x :: xs1, y :: ys1) => 
```

同样在这里，有什么价值`x`和`y`以下？合并是否作为案例类的一部分被递归调用？

```
if( x < y) x :: merge(xs1 , ys) 
```

这是完整的 Scala 代码：

```
object mergesort {

    def msort(xs: List[Int]): List[Int] = {
        val n = xs.length / 2
        if(n == 0) xs
        else {
            def merge(xs: List[Int], ys: List[Int]): List[Int] = (xs , ys) match {
            case (Nil, ys) => ys
            case (xs, Nil) => xs
            case (x :: xs1, y :: ys1) =>
                if( x < y) x :: merge(xs1 , ys)
                else y :: merge(xs, ys1)
            }

        val (fst, snd) = xs splitAt n
        merge(msort(fst), msort(snd))
        }
    }                                         //> msort: (xs: List[Int])List[Int]

    val nums = List(2, -4, 5, 7, 1)           //> nums  : List[Int] = List(2, -4, 5, 7, 1)
    msort(nums)                               //> res0: List[Int] = List(-4, 1, 2, 5, 7)

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T11:08:17.603

在

```
case (x :: xs1, y :: ys1) => 
```

`::`是模式匹配中的一种语法糖，用于解构 a`list`到`head`和`tail`

该列表`xs`被解构为 head`x`和 tail `xs`。

在模式匹配`::`中解构一个列表，与它在正常情况下实际所做的完全相反，`construct`一个列表。

阅读[Scala 中的模式匹配点中的解构对象](http://www.artima.com/scalazine/articles/pattern_matching.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T10:27:17.233

这

```
(xs , ys) match {
     ...     
    case (x :: xs1, y :: ys1) 
```

是一种*模式匹配*，它在与断言序列匹配相同的语句中声明变量`x`等。`xs1`

上面的代码检查 xs 是否可以分解为带有 h​​ead`x`和 tail的序列`xs1`，如果可以，则使 head/tail 可用于这两个变量中的后续代码块。

要回答你的第二个问题（因为没有其他人有！），是的，`merge`函数（在外部函数中声明）被递归调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T10:18:16.367

match-case 关键字在 scala 中用于执行模式匹配，这是一种使用案例类和提取器等多种机制匹配/分解对象的方法。谷歌 scala 模式匹配，你会找到你需要的答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T10:26:30.407

这是 scala 如何允许您在 List 上进行模式匹配的示例：

```
scala> List(1,2,3)
res0: List[Int] = List(1, 2, 3)

scala> res0 match {
     | case h :: t => "more than two elements, " + h + " is the first"
     | case _ => "less than two elements"
     | }
res1: java.lang.String = more than two elements, 1 is the first 
```

请注意，`::`左侧`case`的列表在其头部 ( `1`) 和尾部（列表的其余部分）中分解，`2, 3`并将值绑定到`h`and `t`，它们仅在 first 内部创建和限定`case`。

分解元组的方法如下：

```
scala> val tp = ("a", 1)
tp: (java.lang.String, Int) = (a,1)

scala> tp match {
     | case (a, b) => a + " is a string, " + b + " is a number"
     | case _ => "something missing"
     | }
res2: java.lang.String = a is a string, 1 is a number 
```

在您问题的代码中，您在 Lists 的元组上混合了事物和模式匹配`(xs , ys)`。

`case (x :: xs1, y :: ys1)`既在其两个列表中分解元组，又在其各自的头部和尾部分解其两个列表。

# google-apps-script - 使用 CURL 访问 Google Apps 脚本

> ID：13084896
> 
> 赞同：1
> 
> 时间：2012-10-26T10:08:57.430
> 
> 标签：google-apps-script, google-api

我试图通过 CURL 访问 Google Apps 脚本。问题是当前会话在请求脚本时没有发送，需要我再次登录。发出 CURL 请求时如何维护当前会话变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T16:56:31.390

cURL 不会随浏览器的会话信息一起发送，因为它是一个不同的程序。无法通过 Apps Script Web 应用程序以编程方式进行身份验证。

# sql - SQL：将 MMMDD 字符串转换为日期时间

> ID：13084902
> 
> 赞同：0
> 
> 时间：2012-10-26T10:09:21.617
> 
> 标签：sql, sql-server, sql-server-2008

我有一个格式化为 MMMDD 的 nvarchar(5) 数据列（例如，OCT26）。使用我的 select 语句，我想将其转换为具有当前年份的日期时间数据类型，然后将该日期时间值保存为别名，例如 UsefulDate。所以就像 2012 年 10 月 26 日。

类似于：SELECT（无论 SQL 完成工作）AS UsefulDate

确切的格式无关紧要；我只需要能够将两个日期与大于和小于运算符进行比较。此外，有时该列将是空白的。在这种情况下，我也想将别名设置为空白。这可能吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T10:16:52.020

您可以将格式为 MMMDD 的 varchar 字段转换为当前年份的日期：

```
select convert(datetime,'OCT26'+','+cast(year(getdate()) as varchar),107) 
```

因此，您的查询将类似于：

```
select convert(datetime,case varcharDate when '' then null else varcharDate end +
               ','+cast(year(getdate()) as varchar),107) as UsefulDate 
from table 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T10:14:40.637

```
select CASE WHEN ISDATE(mmmdd+' '+right(year(getdate()),4)) = 1
            THEN CAST(mmmdd+' '+right(year(getdate()),4) as datetime)
            END UsefulDate, *
  from tbl 
```

# android - 无法暂停活动，失败保存状态

> ID：13084914
> 
> 赞同：2
> 
> 时间：2012-10-26T10:10:13.967
> 
> 标签：android, android-fragments

我现在正在构建一个 Android 应用程序，如果在给定场景（非常具体）之后按下 Home 按钮或锁定屏幕，我的应用程序会因错误而崩溃：

```
10-26 13:57:50.132: E/AndroidRuntime(8663): FATAL EXCEPTION: main
10-26 13:57:50.132: E/AndroidRuntime(8663): java.lang.RuntimeException: Unable to pause activity {.views.MainActivity}: java.lang.IllegalStateException: Failure saving state: active LoginFragment{4053d5a0} has cleared index: -1
10-26 13:57:50.132: E/AndroidRuntime(8663):     at android.app.ActivityThread.performPauseActivity(ActivityThread.java:2365)
10-26 13:57:50.132: E/AndroidRuntime(8663):     at android.app.ActivityThread.performPauseActivity(ActivityThread.java:2322)
10-26 13:57:50.132: E/AndroidRuntime(8663):     at android.app.ActivityThread.handlePauseActivity(ActivityThread.java:2302)
10-26 13:57:50.132: E/AndroidRuntime(8663):     at android.app.ActivityThread.access$1700(ActivityThread.java:117)
10-26 13:57:50.132: E/AndroidRuntime(8663):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:949)
10-26 13:57:50.132: E/AndroidRuntime(8663):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-26 13:57:50.132: E/AndroidRuntime(8663):     at android.os.Looper.loop(Looper.java:130)
10-26 13:57:50.132: E/AndroidRuntime(8663):     at android.app.ActivityThread.main(ActivityThread.java:3694)
10-26 13:57:50.132: E/AndroidRuntime(8663):     at java.lang.reflect.Method.invokeNative(Native Method)
10-26 13:57:50.132: E/AndroidRuntime(8663):     at java.lang.reflect.Method.invoke(Method.java:507)
10-26 13:57:50.132: E/AndroidRuntime(8663):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
10-26 13:57:50.132: E/AndroidRuntime(8663):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
10-26 13:57:50.132: E/AndroidRuntime(8663):     at dalvik.system.NativeStart.main(Native Method)
10-26 13:57:50.132: E/AndroidRuntime(8663): Caused by: java.lang.IllegalStateException: Failure saving state: active LoginFragment{4053d5a0} has  cleared index: -1
10-26 13:57:50.132: E/AndroidRuntime(8663):     at android.support.v4.app.FragmentManagerImpl.saveAllState(FragmentManager.java:1695)
10-26 13:57:50.132: E/AndroidRuntime(8663):     at android.support.v4.app.FragmentActivity.onSaveInstanceState(FragmentActivity.java:499)
10-26 13:57:50.132: E/AndroidRuntime(8663):     at views.MainActivity.onSaveInstanceState(MainActivity.java:62)
10-26 13:57:50.132: E/AndroidRuntime(8663):     at android.app.Activity.performSaveInstanceState(Activity.java:1042)
10-26 13:57:50.132: E/AndroidRuntime(8663):     at android.app.Instrumentation.callActivityOnSaveInstanceState(Instrumentation.java:1181)
10-26 13:57:50.132: E/AndroidRuntime(8663):     at android.app.ActivityThread.performPauseActivity(ActivityThread.java:2347)
10-26 13:57:50.132: E/AndroidRuntime(8663):     ... 12 more 
```

我不知道这个错误来自什么以及这个错误的一般原因是什么。

**编辑：**
对不起，我会提供更多信息。基本上，我有一个 FragmentActivity （这是我的`Tabhost`），每个选项卡都是一个片段，我可以从中导航到另一个片段。

具体场景如下：

*   应用程序打开，显示带有 Fragment 0 ( `LoginFragment`) 的 Tab 0。
*   用户登录，LoginFragment 被 ProfileFragment 替换。
*   从 中`ProfileFragment`，用户可以注销，并且这样做了，这将 Profilefragment 再次替换为 Loginfragment。
*   用户从 TabHost 导航到不同的选项卡。
*   用户导航回原始选项卡。
*   然后用户锁定屏幕/使用主页按钮，使应用程序因给定错误而崩溃。

我只在这种特定情况下得到错误。

错误源自 中的 TabManager 类`TabHost FragmentActivity`，代码如下（主要来自 Android FragmentTabs 示例，稍作调整）：

```
public static class TabManager implements TabHost.OnTabChangeListener {
    private final FragmentActivity mActivity;
    private final TabHost mTabHost;
    private final int mContainerId;
    private final HashMap<String, TabInfo> mTabs = new HashMap<String, TabInfo>();
    TabInfo mLastTab;

    static final class TabInfo {
        private final String tag;
        private final Class<?> clss;
        private final Bundle args;
        private Fragment fragment;

        TabInfo(String _tag, Class<?> _class, Bundle _args) {
            tag = _tag;
            clss = _class;
            args = _args;
        }
    }

    static class DummyTabFactory implements TabHost.TabContentFactory {
        private final Context mContext;

        public DummyTabFactory(Context context) {
            mContext = context;
        }

        public View createTabContent(String tag) {
            View v = new View(mContext);
            v.setMinimumWidth(0);
            v.setMinimumHeight(0);
            return v;
        }
    }

    public TabManager(FragmentActivity activity, TabHost tabHost, int containerId) {
        mActivity = activity;
        mTabHost = tabHost;
        mContainerId = containerId;
        mTabHost.setOnTabChangedListener(this);
    }

    public void addTab(TabHost.TabSpec tabSpec, Class<?> clss, Bundle args) {
        tabSpec.setContent(new DummyTabFactory(mActivity));
        String tag = tabSpec.getTag();

        TabInfo info = new TabInfo(tag, clss, args);

        // Check to see if we already have a fragment for this tab, probably
        // from a previously saved state.  If so, deactivate it, because our
        // initial state is that a tab isn't shown.
        info.fragment = mActivity.getSupportFragmentManager().findFragmentByTag(tag);
                if (info.fragment != null && !info.fragment.isDetached()) {
                    FragmentTransaction ft = mActivity.getSupportFragmentManager().beginTransaction();
                    ft.detach(info.fragment);
                    ft.commit();
                }

                mTabs.put(tag, info);
                mTabHost.addTab(tabSpec);
    }

    public void onTabChanged(String tabId) {

        TabInfo newTab = mTabs.get(tabId);
        if (mLastTab != newTab) {
            FragmentTransaction ft = mActivity.getSupportFragmentManager().beginTransaction();
            if (mLastTab != null) {
                if (mLastTab.fragment != null) {
                    ft.detach(mLastTab.fragment);
                }
            }
            if (newTab != null) {
                if (newTab.fragment == null) {
                    newTab.fragment = Fragment.instantiate(mActivity,
                            newTab.clss.getName(), newTab.args);
                    ft.add(mContainerId, newTab.fragment, newTab.tag);

                } else {
                    ft.attach(newTab.fragment);
                }
            }
            int backEntryCount = mActivity.getSupportFragmentManager().getBackStackEntryCount();
            if (backEntryCount > 1) {
                mActivity.getSupportFragmentManager().popBackStack(null, 0);
            }

            //If there's a current BackTrace, remove it and instantiate the original fragment of the selected tab.
            FragmentManager fm = mActivity.getSupportFragmentManager();
            if (fm.getBackStackEntryCount() >= 1) {
                fm.popBackStack();
                newTab.fragment.getFragmentManager().beginTransaction().add(mLastTab.fragment.getId(), newTab.fragment = Fragment.instantiate(mActivity,
                        newTab.clss.getName(), newTab.args));
            }
            if (mActivity.getSupportFragmentManager().findFragmentByTag("userprofile") != null) {
                Fragment fragment = mActivity.getSupportFragmentManager().findFragmentByTag("userprofile");
                ft.detach(fragment);

            }
            if (newTab.fragment.getClass().getName().contains("Login") && Preferences.getUser(mActivity).getApikey() != null) {
                ft.replace(mLastTab.fragment.getId(), new ProfileFragment(), "userprofile");
                ft.detach(newTab.fragment);
            }

            if (mActivity.getSupportFragmentManager().findFragmentByTag("Profile") != null) {
                if (mActivity.getSupportFragmentManager().findFragmentByTag("Profile").isDetached() == true) {
                    System.out.println(true);
                    Fragment fragment = mActivity.getSupportFragmentManager().findFragmentByTag("Profile");
                    mActivity.getSupportFragmentManager().beginTransaction().replace(fragment.getId(), new LoginFragment(), "Profile").commit();
                }
            }
            mLastTab = newTab;
            ft.commit();  
            mActivity.getSupportFragmentManager().executePendingTransactions();

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T13:16:11.003

很抱歉这个答案迟到了，但我发现了为什么我有这个错误。出于某种原因，我有多个导致崩溃的 LoginFragment 实例。我删除了一些代码，因此片段只会被实例化一次，之后我就再也没有崩溃了。

# php - Hadoop Streaming：找不到这样的文件错误（配置对象时出错）

> ID：13084916
> 
> 赞同：1
> 
> 时间：2012-10-26T10:10:22.100
> 
> 标签：php, hadoop, hadoop-streaming

我为 hadoop 流运行以下命令

```
hadoop jar contrib/streaming/hadoop-streaming-1.0.3.jar -input test1/testregxml.xml -output testoutput2 -file ~/Programs/CMapper.php -mapper ~/Programs/CMapper.php -jobconf mapred.reduce.tasks=1 
```

hadoop 任务失败，输出如下

```
12/10/26 15:36:56 WARN streaming.StreamJob: -jobconf option is deprecated, please use -

D instead.
packageJobJar: [/home/HadoopNaman1/Programs/CMapper.php, /tmp/hadoop-HadoopNaman1/hadoop-unjar8119734358986860064/] [] /tmp/streamjob3840254105417044886.jar tmpDir=null
12/10/26 15:36:58 INFO util.NativeCodeLoader: Loaded the native-hadoop library
12/10/26 15:36:58 WARN snappy.LoadSnappy: Snappy native library not loaded
12/10/26 15:36:58 INFO mapred.FileInputFormat: Total input paths to process : 1
12/10/26 15:36:58 INFO streaming.StreamJob: getLocalDirs(): [/tmp/hadoop-HadoopNaman1/mapred/local]
12/10/26 15:36:58 INFO streaming.StreamJob: Running job: job_201209282004_0015
12/10/26 15:36:58 INFO streaming.StreamJob: To kill this job, run:
12/10/26 15:36:58 INFO streaming.StreamJob: /home/HadoopNaman1/hadoop-1.0.3/libexec/../bin/hadoop job  -Dmapred.job.tracker=saraswati.tallysolutions.com:9051 -kill job_201209282004_0015
12/10/26 15:36:58 INFO streaming.StreamJob: Tracking URL: http://192.168.1.17:50030/jobdetails.jsp?jobid=job_201209282004_0015
12/10/26 15:36:59 INFO streaming.StreamJob:  map 0%  reduce 0%
12/10/26 15:37:51 INFO streaming.StreamJob:  map 100%  reduce 100%
12/10/26 15:37:51 INFO streaming.StreamJob: To kill this job, run:
12/10/26 15:37:51 INFO streaming.StreamJob: /home/HadoopNaman1/hadoop-1.0.3/libexec/../bin/hadoop job  -Dmapred.job.tracker=saraswati.tallysolutions.com:9051 -kill job_201209282004_0015
12/10/26 15:37:51 INFO streaming.StreamJob: Tracking URL: http://192.168.1.17:50030/jobdetails.jsp?jobid=job_201209282004_0015
12/10/26 15:37:51 ERROR streaming.StreamJob: Job not successful. Error: # of failed Map Tasks exceeded allowed limit. FailedCount: 1\. LastFailedTask: task_201209282004_0015_m_000001
12/10/26 15:37:51 INFO streaming.StreamJob: killJob...
Streaming Command Failed! 
```

这是我的jobtracker日志

```
2012-10-26 15:37:44,906 INFO org.apache.hadoop.mapred.TaskInProgress: TaskInProgress task_201209282004_0015_m_000001 has failed 4 times.
2012-10-26 15:37:44,906 INFO org.apache.hadoop.mapred.JobInProgress: Aborting job job_201209282004_0015
2012-10-26 15:37:44,906 INFO org.apache.hadoop.mapred.JobInProgress: Killing job 'job_201209282004_0015'
2012-10-26 15:37:44,907 INFO org.apache.hadoop.mapred.JobTracker: Adding task (JOB_CLEANUP) 'attempt_201209282004_0015_m_000002_0' to tip task_201209282004_0015_m_000002, for tracker 'tracker_192.168.1.86:localhost/127.0.0.1:45880'
2012-10-26 15:37:44,907 INFO org.apache.hadoop.mapred.JobTracker: Removing task 'attempt_201209282004_0015_m_000001_3'
2012-10-26 15:37:46,861 INFO org.apache.hadoop.mapred.TaskInProgress: Error from attempt_201209282004_0015_m_000000_3: java.lang.RuntimeException: Error in configuring object
        at org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:93)
        at org.apache.hadoop.util.ReflectionUtils.setConf(ReflectionUtils.java:64)
        at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:117)
        at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:432)
        at org.apache.hadoop.mapred.MapTask.run(MapTask.java:372)
        at org.apache.hadoop.mapred.Child$4.run(Child.java:255)
        at java.security.AccessController.doPrivileged(Native Method)
        at javax.security.auth.Subject.doAs(Subject.java:416)
        at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1121)
        at org.apache.hadoop.mapred.Child.main(Child.java:249)
Caused by: java.lang.reflect.InvocationTargetException
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:616)
        at org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:88)
        ... 9 more
Caused by: java.lang.RuntimeException: Error in configuring object
        at org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:93)
        at org.apache.hadoop.util.ReflectionUtils.setConf(ReflectionUtils.java:64)
        at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:117)
        at org.apache.hadoop.mapred.MapRunner.configure(MapRunner.java:34)
        ... 14 more
Caused by: java.lang.reflect.InvocationTargetException
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:616)
        at org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:88)
        ... 17 more
Caused by: java.lang.RuntimeException: configuration exception
        at org.apache.hadoop.streaming.PipeMapRed.configure(PipeMapRed.java:230)
        at org.apache.hadoop.streaming.PipeMapper.configure(PipeMapper.java:66)
        ... 22 more
Caused by: java.io.IOException: Cannot run program "/tmp/hadoop-HadoopNaman1/mapred/local/taskTracker/HadoopNaman1/jobcache/job_201209282004_0015/attempt_201209282004_0015_m_000000_3/work/./CMapper.php": java.io.IOException: error=2, No such file or directory
        at java.lang.ProcessBuilder.start(ProcessBuilder.java:475)
        at org.apache.hadoop.streaming.PipeMapRed.configure(PipeMapRed.java:214)
        ... 23 more
Caused by: java.io.IOException: java.io.IOException: error=2, No such file or directory
        at java.lang.UNIXProcess.<init>(UNIXProcess.java:164)
        at java.lang.ProcessImpl.start(ProcessImpl.java:81)
        at java.lang.ProcessBuilder.start(ProcessBuilder.java:468)
        ... 24 more

2012-10-26 15:37:49,866 INFO org.apache.hadoop.mapred.JobTracker: Removing task 'attempt_201209282004_0015_m_000000_3'
2012-10-26 15:37:50,913 INFO org.apache.hadoop.mapred.JobInProgress: Task 'attempt_201209282004_0015_m_000002_0' has completed task_201209282004_0015_m_000002 successfully.
2012-10-26 15:37:50,914 INFO org.apache.hadoop.mapred.JobInProgress$JobSummary: jobId=job_201209282004_0015,submitTime=1351246018628,launchTime=1351246018806,firstMapTaskLaunchTime=1351246028873,firstJobSetupTaskLaunchTime=1351246019863,firstJobCleanupTaskLaunchTime=1351246064906,finishTime=1351246070914,numMaps=2,numSlotsPerMap=1,numReduces=1,numSlotsPerReduce=1,user=HadoopNaman1,queue=default,status=FAILED,mapSlotSeconds=60,reduceSlotsSeconds=0,clusterMapCapacity=12,clusterReduceCapacity=12,jobName=streamjob3840254105417044886.jar
2012-10-26 15:37:50,936 INFO org.apache.hadoop.mapred.JobHistory: Moving file:/home/HadoopNaman1/hadoop-1.0.3/logs/history/job_201209282004_0015_1351246018628_HadoopNaman1_streamjob3840254105417044886.jar to file:/home/HadoopNaman1/hadoop-1.0.3/logs/history/done/version-1/saraswati.tallysolutions.com_1348842869935_/2012/10/26/000000
2012-10-26 15:37:50,942 INFO org.apache.hadoop.mapred.JobHistory: Moving file:/home/HadoopNaman1/hadoop-1.0.3/logs/history/job_201209282004_0015_conf.xml to file:/home/HadoopNaman1/hadoop-1.0.3/logs/history/done/version-1/saraswati.tallysolutions.com_1348842869935_/2012/10/26/000000
2012-10-26 15:37:50,948 INFO org.apache.hadoop.mapred.JobTracker: Removing task 'attempt_201209282004_0015_m_000002_0'
2012-10-26 15:37:50,948 INFO org.apache.hadoop.mapred.JobTracker: Removing task 'attempt_201209282004_0015_m_000003_0'
2012-10-26 15:37:51,850 INFO org.apache.hadoop.mapred.JobTracker: Killing job job_201209282004_0015 
```

请提出一些建议。映射器文件是可执行的，并且存在于权限设置为 777 的目录中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T04:23:48.157

可能是在抱怨您的解释器（首先在文件中，例如“#!/usr/bin/php”）指向该路径中不存在的解释器。当事情在这个基础层面被破坏时，Hadoop 会给出一些非常奇怪/难以破译的错误。

# jquery - 类上的 HTML5 画布 jQuery getContext

> ID：13084918
> 
> 赞同：3
> 
> 时间：2012-10-26T10:10:39.567
> 
> 标签：jquery, html, canvas

**此代码有效：**

```
<canvas id="myCanvas" width="578" height="200"></canvas>
    <script>
      var canvas = document.getElementById('myCanvas');
      var context = canvas.getContext('2d');

      context.beginPath();
      context.moveTo(0, 200);
      context.lineTo(578, 0);
      context.stroke();

      context.beginPath();
      context.moveTo(0, 0);
      context.lineTo(578, 200);
      context.stroke();
    </script> 
```

**我尝试在 jQuery 中做同样的事情，但没有奏效：**

“*对象[对象对象]没有方法'getContext'* ”

```
var context = $('.dropzone').getContext('2d');
context.beginPath();
context.moveTo(0, 200);
context.lineTo(578, 0);
context.stroke();

context.beginPath();
context.moveTo(0, 0);
context.lineTo(578, 200);
context.stroke(); 
```

**我什至在stackoverflow上读到我应该试试这个（没用）**

在代码中添加了**[0]**。

" *Object #<HTMLDivElement> 没有方法 'getContext'* "

```
var context = $('.dropzone')[0].getContext('2d'); 
```

**问题**

我想在每个 .dropzone 中“绘画”。那不可能吗？如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T10:13:32.447

That is because you are using class in jquery.

Change this

`var context = $('.dropzone').getContext('2d');`

to

`var context = $('#dropzone').getContext('2d');`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T10:13:50.787

Use `.each()`

```
$('.dropzone').each(function(index, element) {
    var context = element.getContext('2d');
    context.beginPath();
    context.moveTo(0, 200);
    context.lineTo(578, 0);
    context.stroke();

    context.beginPath();
    context.moveTo(0, 0);
    context.lineTo(578, 200);
    context.stroke();   
}); 
```

Here's an [example on jsfiddle](http://jsfiddle.net/hx9GS/).

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-26T10:16:24.420

您需要使用`.each()`该类遍历所有元素。

```
$('.myCanvas').each(function() {
   var canvas = $(this)[0];
   var context = canvas.getContext('2d');
  // Do stuff
}); 
```

工作 [JSFiddle](http://jsfiddle.net/PdyXm/)。

# core-data - 如何创建一个 Core Data 谓词来测试一个关系是否包含所有给定的对象？

> ID：13084930
> 
> 赞同：11
> 
> 时间：2012-10-26T10:11:30.110
> 
> 标签：core-data, nspredicate, nsset

设置：

我有一个与 B 有一对多关系的核心数据对象 A。将关系称为“项目”。因此，a.items 返回与 A 关联的所有 B。

现在，我有一个由 B 对象手动组成的 NSSet“itemSet”。

我想做以下事情：

```
return all A objects whose "items" relation exactly matches itemSet 
```

我如何为此构造谓词？我试过这个：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:
                          @"(ALL items in %@)", itemSet]; 
```

但这只是给了我`Unsupported predicate (null)`。

这：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:
                          @"(items in %@)", itemSet]; 
```

告诉我`unimplemented SQL generation for predicate`。有趣，但没有帮助。

那么过滤与集合的关系的正确方法是什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-26T11:46:44.353

以下谓词可以工作：

```
[NSPredicate predicateWithFormat:@"(items.@count == %d) AND (SUBQUERY(items, $x, $x IN %@).@count == %d)",
                      itemSet.count, itemSet, itemSet.count]; 
```

谓词首先检查项目数是否等于给定的大小`itemSet`，然后检查作为成员的项目数`itemSet`是否也等于 的大小`itemSet`。如果两者都为真，则`items`必须等于`itemSet`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T10:27:22.837

你有没有尝试过：

```
NSPredicate *predicate = [NSPredicate predicateWithFormate:@"items == %@", itemSet]; 
```

或者，使用更简单的谓词提取一个子集，并在获取请求之外过滤它们。IE

1.  将关系中项目数的谓词设置为与比较集中的项目数相同。
2.  获取结果
3.  过滤这些结果以仅显示集合包含相同项目的结果。

# c# - Using asp.net C# and jquery to filter a collection of data

> ID：13084933
> 
> 赞同：1
> 
> 时间：2012-10-26T10:11:57.823
> 
> 标签：c#, jquery, asp.net, draggable

I'm developing a webpage where users can filter data and then export the selection to pdf or excel. The website is using ASP .NET C#.

To filter the data I have crated a webpage containing a left column with boxes and drop downs enabling users to enter search criteria and then click a search button. This is the typical search/filter functionality that a lot of websites contains. After filtering the data, the selecting is displayed using an asp listview. This listview generates a table. I've implemented [Dragtable](http://jebaird.com/blog/dragtable-jquery-ui-widget-re-arrange-table-columns-drag-drop), enabling users to alter the sequence of the columns in this table, and also the [columnManager](http://p.sohei.org/jquery-plugins/columnmanager/) enabling users to select which columns to display.

So my problem is that the filter/search functionality is resolved back-end using asp .net C#, while the selecting and rearranging of columns is done client-side using jQuery. When users now click the "export"-button, I'd like to collect the filter done by the asp controls in addition to the filter done by jQuery, and create the file. This file should only contain the columns selected using columnManager, in the same order they are in after being altered using dragtable.

What is best practice when using both server side filter and client side filter? I've also considered to drop all of the server-side filtering and use only ajax.post() to send all filters in JSON format to the server. I also want to enable users to save their current filter for another time.

**Update**

I've decided to drop the server side and use ajax (getJSON to be more precisely) to get the search result. This way I don't loose the ordering and sorting of columns that is done with jQuery/js, which I would with a post-back (could use cookies'n stuff, of course). I also keep all the logic in one place, and JSON objects can easily be wrapped/unwrapped server-side. Thanks for your answers, though!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T10:20:58.187

让客户端和服务器端在同一个地方工作一点也不坏。世界上运行的所有优秀应用程序都有这些组合。

但是，我们需要看到方法。

如果您不想要任何回发，我建议您使用 Jquery。

如果您对往返没问题，请继续使用服务器端和 Ajax。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T10:27:28.733

您的方法还有另一个问题：如果用户先订购列然后过滤它会发生什么？列的顺序被重置。

但是，使用 jquery ui 可拖动，您可以触发 ajax 调用以通知服务器端代码有关更改。您可以将函数绑定到停止事件：[http ://api.jqueryui.com/draggable/#event-stop](http://api.jqueryui.com/draggable/#event-stop)

所以我会做以下事情：

*   当用户更改列的顺序时触发 ajax 调用，但不刷新数据
*   当用户添加过滤器并刷新数据时触发 ajax 调用

服务器端代码始终是最新的，并在必要时呈现正确的输出。

# c# - 如何在 xna 中移动和旋转多边形组？

> ID：13084936
> 
> 赞同：1
> 
> 时间：2012-10-26T10:12:14.387
> 
> 标签：c#, 3d, xna, rotation

在openGL中，我们可以创建一些多边形并通过函数'pushMatrix（）'将它们连接为一个组，然后我们可以旋转它们并将它们作为一个对象移动......

有没有办法用 xna 做到这一点？如果我有 3 个多边形并且我想将它们作为一个组一起旋转和移动，我该怎么做？

编辑：我正在使用 Primitives Shapes 构建篮球运动员的骨架。

这场比赛将只是一场对篮筐的射门比赛，这意味着球员

只需要移动他的手臂。

我需要完全控制手臂部件，为了做到这一点，我需要移动

由原始形状和谐构建的手臂。为了做到这一点，

我已经尝试实现 MatrixStack 以执行矩阵转换，但使用

没有成功。有什么建议吗？</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T13:59:12.760

我将用基本的术语回答这个问题，因为我不能从你的问题中看出你对 XNA 或一般图形开发的精通程度。我什至不确定您的问题出在哪里；与 OpenGL 相比，是代码、结构还是 XNA 的工作方式？

**简短的回答是没有内置矩阵堆栈。**

在使用矩阵时，您在 OpenGL 和 XNA/DX 中所做的事情是完全相同的。为了方便起见，您对 pushMatrix 所做的实际上只是将矩阵（转换）状态保留在堆栈上。

将对象作为一个组连接只是语义，您实际上并没有以任何真实的方式将它们连接为一个组。您正在做的是设置一个渲染状态，GPU 使用该渲染状态来为之后的每个绘图调用转换和绘制顶点，直到该状态再次改变。这可以在 XNA/DX 中以与在 OpenGL 中相同的方式完成。

根据您用于绘制对象的内容，有不同的应用转换方式。根据您的描述，我猜您在 GraphicsDevice 对象上使用了 DrawPrimitives（或类似的东西），但无论您使用的是什么，它都会使用之前应用的任何转换，通常是在效果上。其中最简单的是 BasicEffect，它包含您感兴趣的三个成员：

*   世界
*   看法
*   投影

如果您使用 BasicEffect，您只需使用 World 成员中的矩阵应用您的变​​换。在将变换应用到当前效果后绘制的任何内容都将使用这些变换。如果您使用的是自定义效果器，您会做一些非常相似的事情，除了如何在效果器上设置矩阵（使用参数集合）。看一下：

*   [http://msdn.microsoft.com/en-us/library/bb203926(v=xnagamestudio.40).aspx](http://msdn.microsoft.com/en-us/library/bb203926%28v=xnagamestudio.40%29.aspx)
*   [http://msdn.microsoft.com/en-us/library/bb203872(v=xnagamestudio.40).aspx](http://msdn.microsoft.com/en-us/library/bb203872%28v=xnagamestudio.40%29.aspx)

如果您所追求的是一个实际的转换堆栈，则您必须自己实现一个，尽管这很简单。像这样的东西：

```
Stack<Matrix> matrixStack = new Stack<Matrix>();
...
matrixStack.Push( armMatrix );
...
basicEffect.World = matrixStack.Peek();
foreach (EffectPass pass in basicEffect.CurrentTechnique.Passes)
{
    pass.Apply();

    graphics.GraphicsDevice.DrawPrimitives(...);
}
basicEffect.End();
...
matrixStack.Pop(); 
```

# c++ - ReadDirectoryChangesW not recognize more than 1 file addition

> ID：13084939
> 
> 赞同：0
> 
> 时间：2012-10-26T10:12:21.937
> 
> 标签：c++, winapi

I'm trying to monitor a directory using `ReadDirectoryChangesW`. Whenever a new file is added to the directory I monitor the application should print it's name. The application works fine if I copy one file at a time, but if I try,lets say 2 files at a time, it recognize only one of them.

I'm using this function synchronously.

Here is the code:

The handle to the directory:

```
HANDLE hDir = CreateFile( 
    "d:\\Detect", /* pointer to the file name */
    FILE_LIST_DIRECTORY,                /* access (read-write) mode */
    FILE_SHARE_READ|FILE_SHARE_DELETE,  /* share mode */
    NULL, /* security descriptor */
    OPEN_EXISTING, /* how to create */
    FILE_FLAG_BACKUP_SEMANTICS, /* file attributes */
    NULL /* file with attributes to copy */
); 
```

And `ReadDirectoryChangesW`:

```
ReadDirectoryChangesW(hDir,&Buffer,sizeof(Buffer),FALSE,
    FILE_NOTIFY_CHANGE_SECURITY|
    FILE_NOTIFY_CHANGE_CREATION|
    FILE_NOTIFY_CHANGE_LAST_ACCESS|
    FILE_NOTIFY_CHANGE_LAST_WRITE|
    FILE_NOTIFY_CHANGE_SIZE|
    FILE_NOTIFY_CHANGE_ATTRIBUTES|
    FILE_NOTIFY_CHANGE_DIR_NAME|
    FILE_NOTIFY_CHANGE_FILE_NAME,&bytesReturned,NULL,NULL); 
```

# android - 尝试建立 Http 连接时应用程序强制关闭

> ID：13084942
> 
> 赞同：2
> 
> 时间：2012-10-26T10:12:28.777
> 
> 标签：android, forceclose

这是我的第一个安卓应用。我正在发布我用于 HTTP 连接的代码（不是我的，这是来自一个教程站点）。问题是当我按下下载文本的按钮时，它会显示进度对话框并且应用程序强制关闭。我正在发布代码。

```
package com.example.httpconnectsample;

import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URL;
import java.net.URLConnection;

import android.app.Activity;
import android.app.ProgressDialog;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.TextView;

public class Httpconnectionsample extends Activity {

private Button getImageButton;
private Button getTextButton;
private ProgressDialog progressDialog;  
private Bitmap bitmap = null;
private String text = null;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_httpconnectionsample);

    getImageButton = (Button)findViewById(R.id.Button01);
    getTextButton = (Button)findViewById(R.id.Button02);

    getImageButton.setOnClickListener( new OnClickListener() {

        @Override
        public void onClick(View v) {
            downloadImage("http://www.android.com/media/wallpaper    /gif/android_logo.gif");

        }
    });

    getTextButton.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            downloadText("http://xyz.com")
        }
    });
}

private void downloadImage(String urlStr) {
    progressDialog = ProgressDialog.show(this, "", "Fetching Image...");
    final String url = urlStr;

    new Thread() {
        public void run() {
            InputStream in = null;
            Message msg = Message.obtain();
            msg.what = 1;
            try {
                in = openHttpConnection(url);
                bitmap = BitmapFactory.decodeStream(in);
                Bundle b = new Bundle();
                b.putParcelable("bitmap", bitmap);
                msg.setData(b);
                in.close();
            } catch (IOException e1) {
                e1.printStackTrace();
            }
            messageHandler.sendMessage(msg);    

        }
    }.start();

}

private void downloadText(String urlStr) {
    progressDialog = ProgressDialog.show(this, "", "Fetching Text...");
    final String url = urlStr;

    new Thread () {
        public void run() {
            int BUFFER_SIZE = 2000;
            InputStream in = null;
            Message msg = Message.obtain();
            msg.what=2;
            try {
                in = openHttpConnection(url);

                InputStreamReader isr = new InputStreamReader(in);
                int charRead;
                  text = "";
                  char[] inputBuffer = new char[BUFFER_SIZE];

                      while ((charRead = isr.read(inputBuffer))>0)
                      {                    
                          //---convert the chars to a String---
                          String readString = 
                              String.copyValueOf(inputBuffer, 0, charRead);                    
                          text += readString;
                          inputBuffer = new char[BUFFER_SIZE];
                      }
                     Bundle b = new Bundle();
                        b.putString("text", text);
                        msg.setData(b);
                      in.close();

            }catch (IOException e) {
                e.printStackTrace();
            }
            messageHandler.sendMessage(msg);
        }
    }.start();

}

private InputStream openHttpConnection(String urlStr) {
    InputStream in = null;
    int resCode = -1;

    try {
        URL url = new URL(urlStr);
        URLConnection urlConn = url.openConnection();

        if (!(urlConn instanceof HttpURLConnection)) {
            throw new IOException ("URL is not an Http URL");
        }

        HttpURLConnection httpConn = (HttpURLConnection)urlConn;
        httpConn.setAllowUserInteraction(false);
        httpConn.setInstanceFollowRedirects(true);
        httpConn.setRequestMethod("GET");
        httpConn.connect(); 

        resCode = httpConn.getResponseCode();     

        if (resCode == HttpURLConnection.HTTP_OK) {
            in = httpConn.getInputStream();                                 
        }    

    } catch (MalformedURLException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    return in;
}

private Handler messageHandler = new Handler() {

    public void handleMessage(Message msg) {
        super.handleMessage(msg);
        switch (msg.what) {
                /*case 1:
            ImageView img = (ImageView) findViewById(R.id.imageview01);
            img.setImageBitmap((Bitmap)(msg.getData().getParcelable("bitmap")));
            break; */
        case 2:
            TextView text = (TextView) findViewById(R.id.textview01);
            text.setText(msg.getData().getString("text"));
            break;
        }
        progressDialog.dismiss();
    }
};
} 
```

以下是我的 XML

```
 <?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/scrollView1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<Button
    android:id="@+id/Button02"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginRight="24dp"
    android:text="Button" />

<Button
    android:id="@+id/Button01"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:layout_marginRight="56dp"
    android:text="Button" />

<TextView
    android:id="@+id/textview01"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/Button02"
    android:layout_marginTop="39dp"

    tools:context=".Httpconnectionsample" />

</RelativeLayout>
</ScrollView> 
```

以下是日志：-

```
 10-26 15:22:43.660: D/ddm-heap(23866): Got feature list request
   10-26 15:22:48.930: W/System.err(23866): java.net.SocketException: Permission denied     (maybe missing INTERNET permission)
   10-26 15:22:48.940: W/System.err(23866):     at    org.apache.harmony.luni.platform.OSNetworkSystem.createStreamSocketImpl(Native Method)
   10-26 15:22:48.945: W/System.err(23866):     at org.apache.harmony.luni.platform.OSNetworkSystem.createStreamSocket(OSNetworkSystem.java:187)
   10-26 15:22:48.945: W/System.err(23866):     at org.apache.harmony.luni.net.PlainSocketImpl.create(PlainSocketImpl.java:266)
   10-26 15:22:48.950: W/System.err(23866):     at  java.net.Socket.checkClosedAndCreate(Socket.java:889)
   10-26 15:22:48.950: W/System.err(23866):     at java.net.Socket.connect(Socket.java:1036)
   10-26 15:22:48.950: W/System.err(23866):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection.<init>  (HttpConnection.java:62)
  10-26 15:22:48.950: W/System.err(23866):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnectionManager$ConnectionPool.getHttpConnection(HttpConnectionManager.java:145)
 10-26 15:22:48.950: W/System.err(23866):   at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnectionManager.getConnection(HttpConnectionManager.java:67)
 10-26 15:22:48.960: W/System.err(23866):   at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnection.getHTTPConnection(HttpURLConnection.java:821)
 10-26 15:22:48.960: W/System.err(23866):   at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:807)
 10-26 15:22:48.965: W/System.err(23866):   at com.example.httpconnectsample.Httpconnectionsample.openHttpConnection(Httpconnectionsample.java:142)
 10-26 15:22:48.965: W/System.err(23866):   at com.example.httpconnectsample.Httpconnectionsample.access$3(Httpconnectionsample.java:126)
 10-26 15:22:48.965: W/System.err(23866):   at com.example.httpconnectsample.Httpconnectionsample$5.run(Httpconnectionsample.java:97)
 10-26 15:22:48.965: W/dalvikvm(23866): threadid=15: thread exiting with uncaught exception (group=0x4001b180)
10-26 15:22:48.995: E/AndroidRuntime(23866): Uncaught handler: thread Thread-8 exiting due to uncaught exception
10-26 15:22:49.090: E/AndroidRuntime(23866): java.lang.NullPointerException
10-26 15:22:49.090: E/AndroidRuntime(23866):    at java.io.Reader.<init>(Reader.java:65)
 10-26 15:22:49.090: E/AndroidRuntime(23866):   at java.io.InputStreamReader.<init>(InputStreamReader.java:65)
10-26 15:22:49.090: E/AndroidRuntime(23866):    at com.example.httpconnectsample.Httpconnectionsample$5.run(Httpconnectionsample.java:99)
10-26 15:22:49.100: I/dalvikvm(23866): threadid=7: reacting to signal 3
10-26 15:22:49.115: I/dalvikvm(23866): Wrote stack trace to '/data/anr/traces.txt' 
```

我尝试寻找修复程序，但无法理解为什么会这样。我只需要下载文本，所以目前我忽略了此代码的下载图像部分。另外，我在清单上方添加了 uses-permission android:name="android.permission.INTERNET" 但仍然显示权限被拒绝。我会很感激任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T10:19:09.920

将[INTERNET](http://developer.android.com/reference/android/Manifest.permission.html) 权限添加到清单文件。

你必须添加这一行：

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.INTERNET" /> 
```

在您的 AndroidManifest.xml 中的应用程序标记之外，如下所示

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.demo"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="15" /> 

<uses-permission android:name="android.permission.INTERNET" /> 
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />  
<uses-permission android:name="android.permission.CHANGE_NETWORK_STATE" />   

<application>
    //your stuffs
</application>

</manifest> 
```

# .net - Why MS created WCF test client with limitations

> ID：13084944
> 
> 赞同：0
> 
> 时间：2012-10-26T10:12:30.233
> 
> 标签：.net, wcf, wcftestclient

Why Microsoft has given a tool to test WCF services which is not able to test everything that we can actually create and use.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T10:20:23.170

WCF 中有数百万组不同的设置组合，更不用说当您将其进一步扩展到您的机器、网络、互操作等时。它们提供了基本的和最有可能使用的 - 如果您有特定的东西要测试，您应该考虑自己编写一个小型测试工具？

否则微软将不得不涵盖大量的可能性？

# jsf - Validation before Confirmation in jsf

> ID：13084945
> 
> 赞同：1
> 
> 时间：2012-10-26T10:12:31.283
> 
> 标签：jsf, jsf-2, primefaces

I have a code as follows:

```
 <p:commandButton value="#{actualProductionEntry.val}" onclick="confirmation.show()"/>
 <p:confirmDialog id="confirmDialog" message="Are you sure?" header="Confirm Submission"                                 severity="alert" widgetVar="confirmation">         
     <p:commandButton id="confirm" value="Yes" oncomplete="confirmation.hide()" action="#   {actualProductionEntry.insert(login.userid,login.uid,login.dname,login.rptid)}"   update=":df:data :f1:p2 :dp:app"/>  
     <p:commandButton id="decline" value="No" onclick="confirmation.hide()" type="button" />                 
 </p:confirmDialog> 
```

Now, how can I do validation before confirmation without effecting my bean?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T10:42:13.883

PrimeFaces`args.validationFailed`在 ajax 响应中返回一个。您可以在`oncomplete`属性中检查。替换你`onclick`的

```
<p:commandButton ... oncomplete="if (!args.validationFailed) confirmation.show()" /> 
```

或者，如果有回发并且验证没有失败，您可以让`<p:commandButton>`更新`<p:confirmDialog>`组件并检查其`visible`属性：`FacesContext`

```
<p:commandButton ... update="confirmDialog" />
<p:confirmDialog ... visible="#{facesContext.postback and not facesContext.validationFailed}" /> 
```

# joomla - Joomla 2.5 禁用和删除智能搜索

> ID：13084952
> 
> 赞同：3
> 
> 时间：2012-10-26T10:13:21.813
> 
> 标签：joomla, joomla2.5

我正在维护一个基于 Joomla 2.5 的杂志网站，每天有 3-4 篇新的长篇文章。默认情况下启用智能搜索，现在我有一些“查找器”表，其中包含索引短语和热词。

我想知道如果我这样做是否有任何缺点：

*   禁用智能搜索插件
*   完全删除这些“查找器”表

啊哈，我们正在使用搜索字段，它工作正常，但我不确定如果我禁用插件并删除这些表会发生什么。然后它会在 Joomla 内容表中搜索短语，还是干脆打破没有丢失的“查找器”表

有没有人试过这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T16:58:04.310

我真的怀疑默认启用智能搜索。智能搜索是 J2.5 中最酷的（有时是未知的）功能之一。但这并不适用于所有网站。你只需要测试它！

这是您可以执行的操作：

*   **如果您不使用智能搜索（或者您认为不需要它），**您当然可以禁用智能搜索插件。**旧的搜索仍然可以使用。**

***   我强烈**建议不要删除表格**（如果你真的想清空它们的内容；可以从智能搜索管理 GUI 完成）；当您更新 Joomla 时，您可能/将会遇到问题。** 

 **最重要的是，不要在您的实时服务器上做这种事情。如今，运行 Joomla 几乎和您一样容易！在 XAMPP 或 WAMP 安装上，您可以测试所有内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T02:24:26.693

智能搜索是一种比旧搜索更强大的搜索，因为它索引您的内容并以合理的顺序返回它，并允许您进行过滤和映射。

如果你真的想禁用它，你会禁用查找器内容插件。然后你可以在智能搜索管理器中清除表格（我认为它说清除索引或类似的东西）。我不会卸载，因为您可能想返回。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-25T07:37:10.320

我正在考虑删除或清空 FINDER 表。但大型网站的最佳解决方案是

*   禁用内容搜索插件和
*   使用经典搜索模块。

我的用户体验保持不变。**

# sql-server - 一对一父子关系sql server

> ID：13084959
> 
> 赞同：1
> 
> 时间：2012-10-26T10:13:47.617
> 
> 标签：sql-server, parent-child

我有一个带有字段的表`TransactionID`，`Amount`并且`ParentTransactionID` 可以取消交易，因此可以取消发布新条目`amount`并`ParentTransactionID`取消`TransactionID`。

让我们说一笔交易

> 1 100 空

我取消了上面的条目，它会喜欢

> 2 -100 1

再次取消了上述交易，所以它应该喜欢

> 3 100 2

当我获取时，我应该得到记录 3，因为 ID 1 和 2 被取消了。结果应该是

> 3 100 2

如果我取消了第三个条目，则不应返回任何记录。

```
SELECT * FROM Transaction t
WHERE NOT EXISTS (SELECT TOP 1 NULL FROM Transaction pt
WHERE (pt.ParentTransactionID = t.TransactionID OR t.ParentTransactionID = pt.TransactionID)
AND ABS(t.Amount) = ABS(pt.Amount)) 
```

如果仅进行一级取消，则此方法有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T10:24:42.217

如果所有事务都被新事务设置 ParentTransactionId 取消，则可以使用简单的`LEFT JOIN`;

```
SELECT t1.* FROM Transactions t1
LEFT JOIN Transactions t2
  ON t1.TransactionId = t2.ParentTransactionId
WHERE t2.TransactionId IS NULL; 
```

`t1`是我们当前正在查看的交易并且`t2`是可能取消的交易。如果没有取消事务（即`TransactionId`for`t2`不存在），则返回该行。

不过，我不确定您的最后陈述，`If I cancelled the 3rd entry no records should return.`。如果不向表中添加新事务，您将如何取消 #3？您可能还有其他一些您没有告诉我们的取消条件...？

[简单的 SQLfiddle 演示](http://sqlfiddle.com/#!3/c6693/2)。

编辑：由于您不想要取消的交易（或者更确切地说是取消数量为奇数的交易），您需要一个相当复杂的递归查询来确定是否显示最后一笔交易；

```
WITH ChangeLog(TransactionID, Amount, ParentTransactionID, 
               IsCancel, OriginalTransactionID) AS
(
  SELECT TransactionID, Amount, ParentTransactionID, 0, TransactionID
  FROM Transactions WHERE ParentTransactionID IS NULL
  UNION ALL
  SELECT t.TransactionID, t.Amount, t.ParentTransactionID, 
         1-c.IsCancel, c.OriginalTransactionID
  FROM Transactions t
  JOIN ChangeLog c ON c.TransactionID = t.ParentTransactionID
) 
SELECT c1.TransactionID, c1.Amount, c1.ParentTransactionID
FROM ChangeLog c1
LEFT JOIN ChangeLog c2
  ON c1.TransactionID < c2.TransactionID
     AND c1.OriginalTransactionID = c2.OriginalTransactionID
WHERE c2.TransactionID IS NULL AND c1.IsCancel=0 
```

这将在您的示例中包含 3 个事务，显示最后一行，但如果最后一行被取消，它将不会返回任何内容。

由于 SQLfiddle 再次启动，[这里有一个要测试的小提琴](http://sqlfiddle.com/#!3/9c5b3/4)。

即使以简单的方式有点难以做到，对查询的简短解释也可能是有序的；它定义了一个递归“视图”，`ChangeLog`跟踪取消和原始事务 id 从原始到系列中的最后一个事务（一个系列是具有相同 OriginalTransactionId 的所有事务）。之后，它加入`ChangeLog`自身以找到最后一个条目（即所有没有取消交易的交易）。如果在系列中找到的最后一个条目不是取消（`IsCancel`=0），它将显示出来。

# c# - How do I insert Rows from my DATASET to my DATABASE without using command builder?

> ID：13084961
> 
> 赞同：2
> 
> 时间：2012-10-26T10:13:49.487
> 
> 标签：c#, database, ado.net, dataset, oledb

I have a database with multiple tables each linked to the other.(Relational Database) I want to Insert Records from my Dataset to Database. First I tried using OledbCommandBuilder but that didn't work, I found out it couldn't work with relational databases. I haven't linked tables within my dataset, they are linked only in the database. What I have is a button named "Commit". When I press that button I want all the modifications in my dataset.datatable to be reflected in the respective database table. I only know how to INSERT, UPDATE, DELETE a single record at a time but that also is a lengthy task as first I have to do this.

CODE IN THE SAVE BUTTON

```
 DataRow dRow = bookDS.Tables["Book"].NewRow();

               dRow[0] = Convert.ToInt64(textBookID.Text);
               dRow[1] = textBookName.Text;
               dRow[2] = textISBN.Text; 
```

and so on (there are 30 columns)

```
 bookDS.Tables["Book"].Rows.Add(dRow); 
```

Then

CODE IN THE COMMIT BUTTON

con.Open();

```
 string sql = "Insert INTO Book Values (@BookId, @BookName, @ISBNNo, @PublicationId, @CategoryId, @Pages,@Price,@Author1,@Author2,@TotalCopies,@IssuedCopies,@AvailableCopies,@SupplierName,@Note)";

                    OleDbCommand save = new OleDbCommand(sql);

                    save.Parameters.Add("@BookId", OleDbType.BigInt).Value = Convert.ToInt64(dRow[0]);
                    save.Parameters.Add("@BookName", OleDbType.BSTR).Value = dRow[1];
                    save.Parameters.Add("@ISBNNo", OleDbType.BSTR).Value = dRow[2]; 
```

and so on...

save.Connection = con; save.ExecuteNonQuery();

```
 con.Close(); 
```

That is all i can think of but that only works for a single Row and so I its like I have to press the COMMIT button every time I press the SAVE button.

Can anyone please help me with this ???

P.S : I am using MSAccess and also don't want to use TABLEADAPTER ( I want to do everything with my code )

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T10:19:31.733

```
 string sql = "Insert INTO Book Values (@BookId, @BookName, @ISBNNo, @PublicationId, @CategoryId, @Pages,@Price,@Author1,@Author2,@TotalCopies,@IssuedCopies,@AvailableCopies,@SupplierName,@Note)";

     DataRow dRow = bookDS.Tables["Book"].NewRow();

                   dRow[0] = Convert.ToInt64(textBookID.Text);
                   dRow[1] = textBookName.Text;
                   dRow[2] = textISBN.Text;
                   bookDS.Tables["Book"].Rows.Add(dRow);
//This would help you to commit all the changes at once.   
 bookDS.AcceptChanges(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T10:16:06.447

[http://msdn.microsoft.com/en-us/library/xzb1zw3x.aspx](http://msdn.microsoft.com/en-us/library/xzb1zw3x.aspx)

尝试使用 OleDBDataAdapter 来完成这项工作。或者您甚至可以尝试使用 OleDBComamndBuilder（OleDb for Access 数据库而不是 Sql）：

[http://www.daniweb.com/software-development/csharp/threads/380925/how-to-save-a-dataset-into-a-database](http://www.daniweb.com/software-development/csharp/threads/380925/how-to-save-a-dataset-into-a-database)

# android - Android SDK manager 4.1.1 包未显示

> ID：13084962
> 
> 赞同：3
> 
> 时间：2012-10-26T10:13:55.510
> 
> 标签：android, eclipse, android-2.2-froyo

我需要在运行 jelly bean 4.1.1 的设备上测试我的 Android 应用程序，但是在 SDK 管理器中没有可供下载的 4.1.1 包。最接近的选项是 4.1.2 和 4.0.3，选择其中任何一个都会导致我的设备未被检测到。

有什么我想念的吗？SDK管理器中不应该提供4.1.1吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-26T14:17:53.587

> 最接近的选项是 4.1.2 和 4.0.3，选择其中任何一个都会导致我的设备未被检测到。

我在 SDK 管理器中没有看到 4.1.2。我看到了 Android 4.1，它应该是这样的。

（虽然我确实在 SDK 中看到了该 API 级别的一些更新，当我不在会议 WiFi 网络上时，我需要下载这些更新......）

> 有什么我想念的吗？

不。

> SDK管理器中不应该提供4.1.1吗？

不，SDK 管理器按照 API 级别进行，而不是面向消费者的补丁版本。Android 4.1 定义了 API Level 16，而 4.1.1 和 4.1.2 都没有创建新的 API 级别。从开发人员的角度来看，4.1 和 4.1.1 和 4.1.2 的行为应该相同。如果他们不这样做，那就是一个错误。

# javascript - Disabling user agent style sheet

> ID：13084964
> 
> 赞同：4
> 
> 时间：2012-10-26T10:14:04.223
> 
> 标签：javascript, css, user-agent

Is it possible to embed some code in Javascript or CSS for a particular webpage to disable (not load) the user agent style sheet that comes with the browser? I know that I can override it by CSS, but that creates lots of overriden specifications, and that seems to highly affect the CPU usage when browsing the page. Especially, I did something like `*{margin:0; padding: 0}`, which seems to be expensive for rendering (particularly the `*` selector is expensive). So, I do not want to heavily override the user agent style sheet but rather disable that in the first place if possible. Is this possible? If so, how? I am especially using Google Chrome, but would expect a cross browser way if possible.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T10:56:48.220

我想知道是否有办法直接在 JavaScript 中禁用用户代理样式表。似乎没有任何直接的方法，因为`document.styleSheets`不包含用户代理样式表。另一方面，Firefox Web Developer Extension 在 CSS 菜单中提供了一个禁用浏览器默认样式表的选项。

无论如何，有一种标记方式，虽然我不确定你是否喜欢它的含义。首先，它不适用于 IE 8 和更早版本（它们只会显示 XML 标记，而不是格式化的内容）。但是现代浏览器可以处理这个：

1.  使用 XHTML 标记，但不要`xmlns`在标记中包含属性`html`。
2.  将文档作为应用程序/xml 提供。
3.  对于应该使用其 HTML 语义处理的元素（例如，`input`创建一个输入框），请使用`xmlns="http://www.w3.org/1999/xhtml"`元素或封闭元素上的属性。

[简单的演示](http://www.cs.tut.fi/~jkorpela/test/demo.xml)。

这意味着在`xmlns`属性的影响之外，所有标记都被视为构成纯粹的、无意义的、无格式的（所有元素都是内联的）元素。不过，它们可以在您的样式表中设置样式。

但是这样一来，您就不能既保留 HTML 蛋糕又吃掉它。也就是说，如果没有将用户代理样式表应用于它们，您将无法获得 HTML 功能（用于表单字段、链接等）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T10:15:46.933

使用“重置样式表” - 这个很好：[http ://html5boilerplate.com/](http://html5boilerplate.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T10:19:43.100

您可以使用 reset css (http://www.cssreset.com/) 之类的东西来重置所有浏览器样式。

或者，我更喜欢使用规范化 css (http://necolas.github.com/normalize.css/) 来规范化 css 而无需重置所有样式，如 ul、li 等上的列表样式（reset.css 会这样做）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T10:16:22.070

这是不可能的。只需创建一个由大多数人称为“reset.css”的 css 文件，其中包含用于覆盖用户代理样式的所有 css 代码

# ios - UIStoryboard 和继承

> ID：13084968
> 
> 赞同：3
> 
> 时间：2012-10-26T10:14:24.517
> 
> 标签：ios, uiviewcontroller, uistoryboard

我有一个 AnimalViewController。它是一个基本视图控制器。我在 UIStoryBoard 中也有 AnimalViewController 场景。

我有一个关于继承的问题。

```
@interface BearViewController : AnimalViewController
@interface LionViewController : AnimalViewController 
```

是否可以使用 AnimalViewController 场景实例化 BearViewController？

PS BearViewController 和 LionViewController 与 AnimalViewController 具有相同的接口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T06:55:04.477

解决方案是使用 xib 代替情节提要。

```
BearViewController *bearVC = [[BearViewController alloc] initWithNibName:@"Animal" bundle:nil];
LionViewController *lionVC = [[LionViewController alloc] initWithNibName:@"Animal" bundle:nil]; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-26T10:36:51.403

您可以执行以下操作，但我认为情节提要并非旨在执行此类操作，您仍将拥有`AnimalViewController`刚刚转换为的对象，`subclass`因此基本上您将一无所获（除了不同的指针类型）并在调用 any 时出现运行时崩溃`BearViewController`稍后定义的方法：

```
BearViewController *bearViewController = [storyboard instantiateViewControllerWithIdentifier:@"AnimalViewController"];

[[self navigationController] pushViewController:bearViewController animated:YES]; 
```

# php - Cannot find the MySQL_EN="false" in MySQL setup on terminal with Zend package on my Mac.

> ID：13084969
> 
> 赞同：1
> 
> 时间：2012-10-26T10:14:24.073
> 
> 标签：php, mysql, apache, zend-framework, mamp

I am trying to setup Zend framework on my Mac and the O'Reilly guide says that I should see this line: MySQL_EN="false" in the terminal when I run the "sudo nano /usr/local/zend/bin/zendctl.sh" command. I am not able to see any such text and the terminal opens a blank text file. Can anyone help please?

# oracle - 使用 WebCenter Content UCM 工作流

> ID：13084975
> 
> 赞同：0
> 
> 时间：2012-10-26T10:15:10.573
> 
> 标签：oracle, workflow, content-management, webcenter

哪个 Java 库可以让我访问工作流管理（创建、将文件添加到工作流）。

它是如何完成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T13:16:03.447

您可以使用公开的服务访问工作流。请参阅 Oracle 文档。

我已经为 10g 和 11g 服务添加了链接，因为它们在两个版本之间基本相同。

[Oracle 11g 文档](http://docs.oracle.com/cd/E21764_01/doc.1111/e11011/c06_workflow.htm#i1052440)

[Oracle 10g 文档](http://docs.oracle.com/cd/E10316_01/cs/cs_doc_10/documentation/developer/services_reference_10gr3en.pdf)

# dsl - 面向对象设计与领域驱动设计

> ID：13084978
> 
> 赞同：6
> 
> 时间：2012-10-26T10:15:17.253
> 
> 标签：dsl, object-oriented-analysis

面向对象的设计自 20 年以来就广为人知。[领域特定语言](http://martinfowler.com/dslCatalog/)和领域驱动设计在 Ruby 或 Python 等动态语言中变得流行起来。如果您的域主要由对象组成，例如授予徽章或成就的子系统（如 Stackoverflow 上的徽章），那么可以同时使用面向对象的设计和域驱动的设计，因为徽章肯定是一个对象。例如对于 Ruby，有两个 gem 来实现这个功能，[Badgeable](https://github.com/scottburton11/Badgeable)和[Paths of Glory](https://github.com/paulca/paths_of_glory). Badgeable 使用 DSL，Paths of Glory 是基于面向对象的设计。在哪些情况下使用面向对象的分析和设计建模更好，在哪些情况下最好使用领域特定语言建模（即领域驱动设计）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T12:22:38.753

OOD 和 DDD 不是可以互换的东西。

DDD 通常会涉及使用 OOD。

从[维基百科](http://en.wikipedia.org/wiki/Domain-driven_design)页面：

> 领域驱动设计不是一种技术或方法。DDD 提供了一种实践结构和术语，用于制定设计决策，重点关注和加速处理复杂领域的软件项目。

特别是，阅读与[其他想法的关系](http://en.wikipedia.org/wiki/Domain-driven_design#Relationship_to_other_ideas)部分。

# javascript - 在加载之前检查页面的可用性，使用 jquery/ajax

> ID：13084979
> 
> 赞同：1
> 
> 时间：2012-10-26T10:15:23.070
> 
> 标签：javascript, jquery

是否可以在加载页面之前检查页面的可用性？

我有一个表格，使用无线连接在移动设备上运行。问题是：此连接并不总是可用的，我想在提交或卸载页面时提醒用户。

问题是该页面包含执行重定向的元素，如下所示：

```
<input type="button" value="MyText" onClick="script1;script2;...window.location='mylocation'" /> 
```

如果用户单击此按钮并且服务器无法访问，我将收到一些不良错误。

另外，如果我想概括我的脚本，我以前不知道“mylocation”的值。

该页面还包含提交表单的元素：

```
<input type="submit" name="SUBMIT" value="MyValue" onClick="return eval('validationForm()')" /> 
```

对于提交，我使用的是**ajaxForm**插件，它工作得很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T10:49:26.083

要轻松地向后导航，请改用：

```
<input type="button" value="Back" onClick="window.location='history.go(-1);" > 
```

其中 -1 表示上一页。如果要重新加载当前页面，请改用 0，向前导航，请使用 1 等。

如果您使用 jquery 的 ajax，它会自行处理... [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

```
$.ajax({
        ///... need argument here...

        timeout: 5000, // in milliseconds
        success: function(data) {
             //Do something success
        },
        error: function(request, status, err) {
            if(status == "timeout") {
               alert("can't reach the server");
            }
        }
    }); 
```

评论后编辑：您可以检查[如何检查文件是否存在于 jQuery 或 JavaScript 中？](https://stackoverflow.com/questions/3646914/how-do-i-check-if-file-exists-in-jquery-or-javascript) 在您的情况下，这将按预期工作：

```
//Initialize the var as global so you can use it in the function below
var goto_url = "http://www.mywebsites.com/foo.html"; 

$.ajax({
    url:goto_url;
    type:'HEAD',
    error: function()
    {
        //do something if the gile is not found
    },
    success: function()
    {
         document.location = goto_url; //docuemnt.location will redirect the user to the specified value.
    }
}); 
```

这实际上将检查文件是否存在。如果它无法连接到文件，它将无法找到它。如果他能找到文件，他显然能够连接，所以无论哪种情况你都赢了。

干杯！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T10:21:37.990

您应该使用 jQuery Ajax 函数的回调来捕获服务器不可用的问题。

如果不向它发出请求，您就无法检查服务器的可用性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-29T17:00:40.733

感谢您的回答，我找到了问题的解决方案。这在启动脚本和重定向之前检查服务器是否可以实现。那是代码：

```
 function checkConnection(u,s){
    $.ajax({
        url:u,
        cache:false,
        timeout:3000,
        error: function(jqXHR, textStatus)
        {
            alert("Request failed: " + textStatus ); 
        },
        success: function()
        {
            eval(s);   
        }
    });       
 }      

    $(document).ready(function() {
        // part of the function that checks buttons with redirect
        // for any button that contain a redirect on onClick attribute ("window.locarion=")
        $("input[type=button]").each(function(){
            var script = $(this).attr("onClick"); 
            var url = "my_url";
            var position = script.indexOf("window.location") ;  
            if (position >= 0) {       // case of redirect           
               url = "\'"+url+"\'"; // that's my url
               script = "\""+script+"\""; // that's the complete script
               $(this).attr("onClick","checkConnection("+url+","+script+")");
            }
        });
        // part of the function that checks the submit buttons (using ajaxForm plugin)
        var options = {
                    error: function() {                    
                        alert("Message Error");   
                    },
                    target: window.document,
                    replaceTarget: false,
                    timeout:   3000
                };
                $("form").ajaxForm(options);
    }); 
```

我希望这会很有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T10:22:13.323

您正在尝试查看是否存在连接。AFAIK 实际检查服务器是否可访问的唯一方法是向该服务器发出请求。

设置相当短的超时时间（比如 3 秒）并发出请求。如果您收到超时错误，则表示没有连接，否则您可以发送表单。

# java - 同一个方法可以通过继承和接口在一个类中存在两次吗？

> ID：13084980
> 
> 赞同：2
> 
> 时间：2012-10-26T10:15:25.520
> 
> 标签：java, interface

这是场景： -

```
class Canine{
  public void roam(){
    System.out.println("Canine-Roam");
  }
}

public interface Pet{    
  public abstract void roam();
}

class Dog extends Canine implements Pet{

  public void roam(){
    System.out.println("Dog Roam");
  }
  public static void main(String [] args){
    Dog adog = new Dog();
    adog.roam();
  }
} 
```

我知道 JVM 在选择运行哪个方法时不能有任何混淆，这意味着哪个方法会被覆盖。但无论如何我都很困惑。为什么这个程序会编译？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-26T10:17:57.070

否 - 同一个方法不能在一个类中存在两次。

接口只是声明了一个类实现特定方法的*要求。*它实际上并没有创建该方法。

因此，通过继承获得方法实现的类定义了该方法。这个（单个）实现满足接口的要求。

在你的情况下：

1.  `Dog`extends `Canine`，所以这意味着`roam()`方法 from`Canine`是可用的，如果不被覆盖，它将作为 Dog 对象上的方法公开。
2.  但随后`Dog`用自己的定义*覆盖*`roam()`超类的方法。这是允许的，并且仍然只有一个明确的方法被调用`roam()`-`Dog`新的覆盖。
3.  `Dog`implements `Pet`，这意味着它需要有一个`roam()`方法。确实如此 - 因此它是此接口的有效实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T10:20:21.983

你的情况很好，它会运行良好并输出`Dog Roam`。这意味着`Dog`类中的函数运行。

您没有收到任何编译时错误，因为 Dog 中的方法正在实现接口中**声明**的抽象方法，并且巧合的是该方法的方法签名与父类匹配。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T10:31:02.293

我认为你混淆了两件事：

*   实施：**做了什么？**见：`Canine.roam()`和`Dog.roam()`
*   接口：**你如何调用它？**看：`Pet.roam()`

很明显，您`roam()`在两个类中有两个“实现”：

*   `Canine.roam()`
*   `Dog.roam()`

同一个类中**永远不会**有两个相同的方法。

而且因为`Dog`extends `Canine`，该方法`Canine.roam()`被覆盖了。您的`main()`函数改为**使用** `Dog.roam()`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T11:06:33.040

您已经为 Dog 类型创建了对象并将其分配给 Dog 引用类型。
压倒一切，与这里无关。尽管您从犬类扩展了 Dog 类，但两者都是 2 种不同的类型。
在编译时，编译器检查方法定义是否存在于引用类型中。而已。它必须在那里。在运行时，JVM 首先检查引用类型中的方法，然后它发现“引用类型的”子类中是否存在相同方法的任何覆盖版本。
如果存在，它将被执行。否则，将执行引用类型的方法。

IE

```
Canine c=new Dog(); 
```

将执行 Dog 的方法。

# sql - 选择不同的值

> ID：13084988
> 
> 赞同：-4
> 
> 时间：2012-10-26T10:16:08.767
> 
> 标签：sql, sql-server

当我这样做时，当有多个列时如何在查询中选择一个不同的值我得到一个错误

```
 select distinct tempname,rundate from History_Table ORDER BY RunDate DESC 
```

编辑：：

我必须在我的gridview中显示这样

```
Name   Rundate 
Test   DDL(to show all the rundates)
Test1  rundate 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T10:57:52.910

看起来您想将运行日期连接成一个字符串。这可以使用 sql-server 的 xml 扩展来完成：

```
SELECT  t1.TempName,
        STUFF(( SELECT  ', [' + CONVERT(VARCHAR, t2.RunDate, 103) + ']'
                FROM    History_Table t2
                WHERE   t1.TempName = t2.TempName
                ORDER BY t2.RunDate
                FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)'), 1, 2, '') [RunDates]
FROM    (   SELECT  DISTINCT TempName
            FROM    History_Table 
        ) t1 
```

**[示例 SQL 小提琴](http://www.sqlfiddle.com/#!3/237c9/2)**

关于如何使用 XML 连接字符串的完整说明包含在[此处的另一个答案中，并在](https://stackoverflow.com/questions/10381512/what-this-query-does-to-create-comma-delimited-list-sql-server/10381975#10381975)[KM 对另一个问题的回答中](https://stackoverflow.com/questions/5031204/does-t-sql-have-an-aggregate-function-to-concatenate-strings/5031297#5031297)提供了一点帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T10:26:09.907

DISTINCT 给出不同的行

似乎您需要带有一个运行日期（Last、First 等）的 tempname。这可以通过使用 GROUP BY 来实现。以下示例将给出最后运行日期的结果 tempname

```
SELECT tempname,MAX(rundate) AS rundate FROM History_Table GROUP BY tempname 
```

您也可以使用 ORDER BY。

```
SELECT tempname,rundate
FROM
(SELECT tempname,MAX(rundate) AS rundate  FROM History_Table GROUP BY tempname) AS SummaryTable
ORDER BY rundate 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T10:26:15.893

听起来您需要两个单独的查询。一个获取不同的临时名称，另一个获取运行日期。您当前的查询正确地返回了两者的不同组合。

# c - 在 C 中解析文件以读取字符

> ID：13084989
> 
> 赞同：0
> 
> 时间：2012-10-26T10:16:13.050
> 
> 标签：c, file, parsing, strtok

假设我有一个文件，其中填充了带有空格的随机字符，并且 \n 也包含随机字符。

我想查找这组字符，例如：UU、II、NJ、KU。所以目的是读取文件，寻找这种组并说出文件中有多少。

我的问题是空格和\n，因为如果我找到其中之一，我应该跳过它并再次搜索组。我找到了一个可以帮助我的解决方案，函数**strtok_r**。

[http://www.codecogs.com/reference/computing/c/string.h/strtok.php?alias=strtok_r](http://www.codecogs.com/reference/computing/c/string.h/strtok.php?alias=strtok_r)

我认为这将隔离完整的字符串，以便我可以一次读取一个。

这是一个好的解决方案还是应该采取其他方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T10:21:47.103

一个天真的解决方案可能会一次读取一个字符，当它是`'U'`,时`'I'`，`'N'`或者`'K'`然后读取另一个字符以查看它是否是组中的下一个字符。如果是，则为该组增加一个计数器。所有其他字符都被简单地丢弃。

**编辑：**示例函数：

```
int count_uu = 0;
int count_ii = 0;
int count_nj = 0;
int count_ku = 0;

void check_next_char(int expected, FILE *input, int *counter);

void count(FILE *input)
{
    int ch;  /* Character we read into */

    while ((ch = fgetc(input)) != EOF)
    {
        switch (ch)
        {
        case 'U':
            check_next_char('U', input, &count_uu);
            break;
        case 'I':
            check_next_char('I', input, &count_ii);
            break;
        case 'N':
            check_next_char('J', input, &count_nj);
            break;
        case 'K':
            check_next_char('U', input, &count_ku);
            break;

        default:
            /* Not a character we're interested in */
            break;
    }
}

/* This function gets the next character from a file and checks against
   an `expected` character. If it is same as the expected character then
   increase a counter, else put the character back into the stream buffer */
void check_next_char(int expected, FILE *input, int *counter)
{
    int ch = fgetc(input);
    if (ch == expected)
        (*counter)++;
    else
        ungetc(ch, input);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T18:29:49.653

你也可以使用

[https://github.com/leblancmeneses/NPEG/tree/master/Languages/npeg_c](https://github.com/leblancmeneses/NPEG/tree/master/Languages/npeg_c)

如果您的搜索模式变得更加困难。

这是一个可以导出C版本的可视化工具： [http ://www.robusthaven.com/blog/parsing-expression-grammar/npeg-language-workbench](http://www.robusthaven.com/blog/parsing-expression-grammar/npeg-language-workbench)

规则语法文档： [http ://www.robusthaven.com/blog/parsing-expression-grammar/npeg-dsl-documentation](http://www.robusthaven.com/blog/parsing-expression-grammar/npeg-dsl-documentation)

规则

```
 (?<UU>): 'UU'\i; 
(?<II>): 'II'\i; 
(?<NJ>): 'NJ'\i; 
(?<KU>): 'KU'; // does not use \i so is case sensitive 

Find: UU / II / NJ / KU;
(?<RootExpression>): (Find / .)+; 
```

输入 1：

```
 UU, II, NJ, KU  uu, ii, nJ, kU 
```

输入 2：

```
jsdlfj023#uu, ii, nJ, kU $^%900oi)()*()  UU, II, NJ, KU 
```

# three.js - three.js convert_obj_three.py 法线丢失

> ID：13084997
> 
> 赞同：0
> 
> 时间：2012-10-26T10:16:38.817
> 
> 标签：three.js

当从 .obj 文件转换为 .js 文件以与 three.js 一起使用时，脚本 convert_obj_three.py 不会导出法线。

我怎样才能得到法线？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T14:45:00.300

导出模型时，blender 可以选择包含法线，选中该框即可。或使用three.js

```
geometry.computeVertexNormals() 
```

计算法线。

# r - R中的流图？

> ID：13084998
> 
> 赞同：37
> 
> 时间：2012-10-26T10:16:40.240
> 
> 标签：r, plot, visualization, stream-graph

R中是否有Streamgraphs的实现？

> 流图是堆叠图的一种变体，是对 Havre 等人的 ThemeRiver 在基线选择、层排序和颜色选择方面的改进。

例子：

![在此处输入图像描述](../Images/b915a46e3a83dc96dae2c1d096228c66.png)

参考： http: [//www.leebyron.com/else/streamgraph/](http://www.leebyron.com/else/streamgraph/)

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-10-26T12:43:33.360

不久前我写了一个函数`plot.stacked`，也许可以帮助你。

功能是：

```
plot.stacked <- function(x,y, ylab="", xlab="", ncol=1, xlim=range(x, na.rm=T), ylim=c(0, 1.2*max(rowSums(y), na.rm=T)), border = NULL, col=rainbow(length(y[1,]))){

    plot(x,y[,1], ylab=ylab, xlab=xlab, ylim=ylim, xaxs="i", yaxs="i", xlim=xlim, t="n")
    bottom=0*y[,1]
    for(i in 1:length(y[1,])){
        top=rowSums(as.matrix(y[,1:i]))
        polygon(c(x, rev(x)), c(top, rev(bottom)), border=border, col=col[i])
        bottom=top
    }
    abline(h=seq(0,200000, 10000), lty=3, col="grey")
    legend("topleft", rev(colnames(y)), ncol=ncol, inset = 0, fill=rev(col), bty="0", bg="white", cex=0.8, col=col)
    box()
} 
```

这是一个示例数据集和一个绘图：

```
set.seed(1)
m <- 500
n <- 15
x <- seq(m)
y <- matrix(0, nrow=m, ncol=n)
colnames(y) <- seq(n)
for(i in seq(ncol(y))){
    mu <- runif(1, min=0.25*m, max=0.75*m)
    SD <- runif(1, min=5, max=30)
    TMP <- rnorm(1000, mean=mu, sd=SD)
    HIST <- hist(TMP, breaks=c(0,x), plot=FALSE)
    fit <- smooth.spline(HIST$counts ~ HIST$mids)
    y[,i] <- fit$y
}

    plot.stacked(x,y) 
```

![在此处输入图像描述](../Images/e4059daa0805097d210720670ad811b1.png)

我可以想象你只需要调整多边形“底部”的定义来获得你想要的情节。

## 更新：

我再次尝试制作流图，并相信我或多或少地复制了函数中的想法`plot.stream`，可以[在这个要点中](https://gist.github.com/menugget/7864454)找到，也可以在这篇文章的底部复制。在[此链接](http://menugget.blogspot.de/2013/12/data-mountains-and-streams-stacked-area.html)中，我展示了其使用的更多详细信息，但这是一个基本示例：

```
library(devtools)
source_url('https://gist.github.com/menugget/7864454/raw/f698da873766347d837865eecfa726cdf52a6c40/plot.stream.4.R')

set.seed(1)
m <- 500
n <- 50
x <- seq(m)
y <- matrix(0, nrow=m, ncol=n)
colnames(y) <- seq(n)
for(i in seq(ncol(y))){
    mu <- runif(1, min=0.25*m, max=0.75*m)
    SD <- runif(1, min=5, max=30)
    TMP <- rnorm(1000, mean=mu, sd=SD)
    HIST <- hist(TMP, breaks=c(0,x), plot=FALSE)
    fit <- smooth.spline(HIST$counts ~ HIST$mids)
    y[,i] <- fit$y
}
y <- replace(y, y<0.01, 0)

#order by when 1st value occurs
ord <- order(apply(y, 2, function(r) min(which(r>0))))
y2 <- y[, ord]
COLS <- rainbow(ncol(y2))

png("stream.png", res=400, units="in", width=12, height=4)
par(mar=c(0,0,0,0), bty="n")
plot.stream(x,y2, axes=FALSE, xlim=c(100, 400), xaxs="i", center=TRUE, spar=0.2, frac.rand=0.1, col=COLS, border=1, lwd=0.1)
dev.off() 
```

![在此处输入图像描述](../Images/fb3c8c08a247daccc4dba48655f7c229.png)

## plot.stream() 的代码

```
#plot.stream makes a "stream plot" where each y series is plotted 
#as stacked filled polygons on alternating sides of a baseline.
#
#Arguments include:
#'x' - a vector of values
#'y' - a matrix of data series (columns) corresponding to x
#'order.method' = c("as.is", "max", "first") 
#  "as.is" - plot in order of y column
#  "max" - plot in order of when each y series reaches maximum value
#  "first" - plot in order of when each y series first value > 0
#'center' - if TRUE, the stacked polygons will be centered so that the middle,
#i.e. baseline ("g0"), of the stream is approximately equal to zero. 
#Centering is done before the addition of random wiggle to the baseline. 
#'frac.rand' - fraction of the overall data "stream" range used to define the range of
#random wiggle (uniform distrubution) to be added to the baseline 'g0'
#'spar' - setting for smooth.spline function to make a smoothed version of baseline "g0"
#'col' - fill colors for polygons corresponding to y columns (will recycle)
#'border' - border colors for polygons corresponding to y columns (will recycle) (see ?polygon for details)
#'lwd' - border line width for polygons corresponding to y columns (will recycle)
#'...' - other plot arguments
plot.stream <- function(
    x, y, 
    order.method = "as.is", frac.rand=0.1, spar=0.2,
    center=TRUE,
    ylab="", xlab="",  
    border = NULL, lwd=1, 
    col=rainbow(length(y[1,])),
    ylim=NULL, 
    ...
){

if(sum(y < 0) > 0) error("y cannot contain negative numbers")

if(is.null(border)) border <- par("fg")
border <- as.vector(matrix(border, nrow=ncol(y), ncol=1))
col <- as.vector(matrix(col, nrow=ncol(y), ncol=1))
lwd <- as.vector(matrix(lwd, nrow=ncol(y), ncol=1))

if(order.method == "max") {
    ord <- order(apply(y, 2, which.max))
    y <- y[, ord]
    col <- col[ord]
    border <- border[ord]
}

if(order.method == "first") {
    ord <- order(apply(y, 2, function(x) min(which(r>0))))
    y <- y[, ord]
    col <- col[ord]
    border <- border[ord]
}

bottom.old <- rep(0, length(x))
top.old <- rep(0, length(x))
polys <- vector(mode="list", ncol(y))
for(i in seq(polys)){
    if(i %% 2 == 1){ #if odd
        top.new <- top.old + y[,i]
        polys[[i]] <- list(x=c(x, rev(x)), y=c(top.old, rev(top.new)))
        top.old <- top.new
    }
    if(i %% 2 == 0){ #if even
        bottom.new <- bottom.old - y[,i]
        polys[[i]] <- list(x=c(x, rev(x)), y=c(bottom.old, rev(bottom.new)))
        bottom.old <- bottom.new
    }
}

ylim.tmp <- range(sapply(polys, function(x) range(x$y, na.rm=TRUE)), na.rm=TRUE)
outer.lims <- sapply(polys, function(r) rev(r$y[(length(r$y)/2+1):length(r$y)]))
mid <- apply(outer.lims, 1, function(r) mean(c(max(r, na.rm=TRUE), min(r, na.rm=TRUE)), na.rm=TRUE))

#center and wiggle
if(center) {
    g0 <- -mid + runif(length(x), min=frac.rand*ylim.tmp[1], max=frac.rand*ylim.tmp[2])
} else {
    g0 <- runif(length(x), min=frac.rand*ylim.tmp[1], max=frac.rand*ylim.tmp[2])
}

fit <- smooth.spline(g0 ~ x, spar=spar)

for(i in seq(polys)){
    polys[[i]]$y <- polys[[i]]$y + c(fitted(fit), rev(fitted(fit)))
}

if(is.null(ylim)) ylim <- range(sapply(polys, function(x) range(x$y, na.rm=TRUE)), na.rm=TRUE)
plot(x,y[,1], ylab=ylab, xlab=xlab, ylim=ylim, t="n", ...)
for(i in seq(polys)){
    polygon(polys[[i]], border=border[i], col=col[i], lwd=lwd[i])
}

} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-03-31T19:45:16.543

这些天有一个流图htmlwidget：

[https://hrbrmstr.github.io/streamgraph/](https://hrbrmstr.github.io/streamgraph/)

```
devtools::install_github("hrbrmstr/streamgraph")

library(streamgraph)

streamgraph(data, key, value, date, width = NULL, height = NULL,
  offset = "silhouette", interpolate = "cardinal", interactive = TRUE,
  scale = "date", top = 20, right = 40, bottom = 30, left = 50) 
```

它产生非常漂亮的图表，甚至是交互式的。 [![在此处输入图像描述](../Images/4e8f9aece91750233c95b5673dc17875.png)](https://i.stack.imgur.com/WY3gV.png)

**编辑**

另一种选择是使用[ggTimeSeries](https://github.com/AtherEnergy/ggTimeSeries)，它使用 ggplot2 的语法：

```
# creating some data
library(ggTimeSeries)
library(ggplot2)

set.seed(10)
dfData = data.frame(
   Time = 1:1000,
   Signal = abs(
      c(
         cumsum(rnorm(1000, 0, 3)), 
         cumsum(rnorm(1000, 0, 4)), 
         cumsum(rnorm(1000, 0, 1)),
         cumsum(rnorm(1000, 0, 2))
      )
   ),
   VariableLabel = c(rep('Class A', 1000),
                     rep('Class B', 1000),
                     rep('Class C', 1000),
                     rep('Class D', 1000))
)

# base plot
ggplot(dfData,
       aes(x = Time,
           y = Signal,
           group = VariableLabel,
           fill = VariableLabel)) +
   stat_steamgraph() +
   theme_bw() 
```

[![在此处输入图像描述](../Images/4683b089deb440f7a088790b59483dd7.png)](https://i.stack.imgur.com/EkD0D.png)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-10-26T15:54:48.847

在框中的漂亮代码中向 Marc 添加一行将使您更接近。（剩下的只是根据每条曲线的最大高度设置填充颜色。）

```
## reorder the columns so each curve first appears behind previous curves
## when it first becomes the tallest curve on the landscape
y <- y[, unique(apply(y, 1, which.max))]

## Use plot.stacked() from Marc's post
plot.stacked(x,y) 
```

![在此处输入图像描述](../Images/b7169a6900f3f5a8dee24a5852506865.png)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-12-10T14:45:47.417

我使用`lattice::xyplot`. 代码在我的 [spacetimeVis 存储库](https://github.com/oscarperpinan/spacetime-vis/blob/master/timeHorizontalAxis.R#L297)中。

下一个示例使用此[数据集](https://github.com/oscarperpinan/spacetime-vis/blob/master/data/unemployUSA.RData?raw=true)：

```
library(lattice)
library(zoo)
library(colorspace)

nCols <- ncol(unemployUSA)
pal <- rainbow_hcl(nCols, c=70, l=75, start=30, end=300)
myTheme <- custom.theme(fill=pal, lwd=0.2)

xyplot(unemployUSA, superpose=TRUE, auto.key=FALSE,
       panel=panel.flow, prepanel=prepanel.flow,
       origin='themeRiver', scales=list(y=list(draw=FALSE)),
       par.settings=myTheme) 
```

它产生这个图像。

![主题河](../Images/7160b4daebb6da55527fd802dabfc1a7.png)

`xyplot`需要两个功能才能工作：`panel.flow`和`prepanel.flow`：

```
panel.flow <- function(x, y, groups, origin, ...){
  dat <- data.frame(x=x, y=y, groups=groups)
  nVars <- nlevels(groups)
  groupLevels <- levels(groups)

  ## From long to wide
  yWide <- unstack(dat, y~groups)
  ## Where are the maxima of each variable located? We will use
  ## them to position labels.
  idxMaxes <- apply(yWide, 2, which.max)

  ##Origin calculated following Havr.eHetzler.ea2002
  if (origin=='themeRiver') origin= -1/2*rowSums(yWide)
  else origin=0 
  yWide <- cbind(origin=origin, yWide)
  ## Cumulative sums to define the polygon
  yCumSum <- t(apply(yWide, 1, cumsum))
  Y <- as.data.frame(sapply(seq_len(nVars),
                            function(iCol)c(yCumSum[,iCol+1],
                                            rev(yCumSum[,iCol]))))
  names(Y) <- levels(groups)
  ## Back to long format, since xyplot works that way
  y <- stack(Y)$values

  ## Similar but easier for x
  xWide <- unstack(dat, x~groups)
  x <- rep(c(xWide[,1], rev(xWide[,1])), nVars)
  ## Groups repeated twice (upper and lower limits of the polygon)
  groups <- rep(groups, each=2)

  ## Graphical parameters
  superpose.polygon <- trellis.par.get("superpose.polygon")
  col = superpose.polygon$col
  border = superpose.polygon$border 
  lwd = superpose.polygon$lwd 

  ## Draw polygons
  for (i in seq_len(nVars)){
    xi <- x[groups==groupLevels[i]]
    yi <- y[groups==groupLevels[i]]
    panel.polygon(xi, yi, border=border,
                  lwd=lwd, col=col[i])
  }

  ## Print labels
  for (i in seq_len(nVars)){
    xi <- x[groups==groupLevels[i]]
    yi <- y[groups==groupLevels[i]]
    N <- length(xi)/2
    ## Height available for the label
    h <- unit(yi[idxMaxes[i]], 'native') -
      unit(yi[idxMaxes[i] + 2*(N-idxMaxes[i]) +1], 'native')
    ##...converted to "char" units
    hChar <- convertHeight(h, 'char', TRUE)
    ## If there is enough space and we are not at the first or
    ## last variable, then the label is printed inside the polygon.
    if((hChar >= 1) && !(i %in% c(1, nVars))){
      grid.text(groupLevels[i],
                xi[idxMaxes[i]],
                (yi[idxMaxes[i]] +
                 yi[idxMaxes[i] + 2*(N-idxMaxes[i]) +1])/2,
                gp = gpar(col='white', alpha=0.7, cex=0.7),
                default.units='native')
    } else {
      ## Elsewhere, the label is printed outside

      grid.text(groupLevels[i],
                xi[N],
                (yi[N] + yi[N+1])/2,
                gp=gpar(col=col[i], cex=0.7),
                just='left', default.units='native')
    }
  }
}

prepanel.flow <- function(x, y, groups, origin,...){
  dat <- data.frame(x=x, y=y, groups=groups)
  nVars <- nlevels(groups)
  groupLevels <- levels(groups)
  yWide <- unstack(dat, y~groups)
  if (origin=='themeRiver') origin= -1/2*rowSums(yWide)
  else origin=0
  yWide <- cbind(origin=origin, yWide)
  yCumSum <- t(apply(yWide, 1, cumsum))

  list(xlim=range(x),
       ylim=c(min(yCumSum[,1]), max(yCumSum[,nVars+1])),
       dx=diff(x),
       dy=diff(c(yCumSum[,-1])))
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-12-13T12:50:16.823

也许是这样的`ggplot2`。我稍后将对其进行编辑，并将 csv 数据上传到合理的地方。

我需要考虑的几个问题：

1.  从平滑图表中获取 y 值，以便您可以为高票房电影的名称重叠绘制
2.  根据您的示例在 x 轴上添加“波浪”。

稍微考虑一下，两者都应该没问题。可悲的是，交互性会很棘手。也许会看看`googleVis`。

![在此处输入图像描述](../Images/b3c480a64a67e7fa0135964add4e0158.png)

```
## PRE-REQS
require(plyr)
require(ggplot2)

## GET SOME BASIC DATA
films<-read.csv("box.csv")

## ALL OF THIS IS FAKING DATA
get_dist<-function(n,g){

  dist<-g-(abs(sort(g-abs(rnorm(n,g,g*runif(1))))))
  dist<-c(0,dist-min(dist),0)
  dist<-dist*g/sum(dist)
  return(dist)
}

get_dates<-function(w){
  start<-as.Date("01-01-00",format="%d-%m-%y")+ceiling(runif(1)*365)
  return(start+w)
}

films$WEEKS<-ceiling(runif(1)*10)+6
f<-ddply(films,.(RANK),function(df)expand.grid(RANK=df$RANK,WEEKGROSS=get_dist(df$WEEKS,df$GROSS)))
weekly<-merge(films,f,by=("RANK"))

## GENERATE THE PLOT DATA
plot.data<-ddply(weekly,.(RANK),summarise,NAME=NAME,WEEKDATE=get_dates(seq_along(WEEKS)*7),WEEKGROSS=ifelse(RANK %% 2 == 0,-WEEKGROSS,WEEKGROSS),GROSS=GROSS)

g<-ggplot() + 

  geom_area(data=plot.data[plot.data$WEEKGROSS>=0,],
            aes(x=WEEKDATE,
                ymin=0,
                y=WEEKGROSS,
                group=NAME,
                fill=cut(GROSS,c(seq(0,1000,100),Inf)))
            ,alpha=0.5,
            stat="smooth", fullrange=T,n=1000,
            colour="white",
            size=0.25,alpha=0.5) +

  geom_area(data=plot.data[plot.data$WEEKGROSS<0,],
            aes(x=WEEKDATE,
                ymin=0,
                y=WEEKGROSS,
                group=NAME,
                fill=cut(GROSS,c(seq(0,1000,100),Inf)))
            ,alpha=0.5,
            stat="smooth", fullrange=T,n=1000,
            colour="white",
            size=0.25,alpha=0.5) +

  theme_bw() + 
  scale_fill_brewer(palette="RdPu",name="Gross\nEUR (M)") +
  ylab("") + xlab("")

b<-ggplot_build(g)$data[[1]]
b.ymax<-max(b$y)

## MAKE LABELS FOR GROSS > 450M
labels<-ddply(plot.data[plot.data$GROSS>450,],.(RANK,NAME),summarise,x=median(WEEKDATE),y=ifelse(sum(WEEKGROSS)>0,b.ymax,-b.ymax),GROSS=max(GROSS))
labels<-ddply(labels,.(y>0),transform,NAME=paste(NAME,GROSS),y=(y*1.1)+((seq_along(y)*20*(y/abs(y)))))

## PLOT
g + 
  geom_segment(data=labels,aes(x=x,xend=x,y=0,yend=y,label=NAME),size=0.5,linetype=2,color="purple",alpha=0.5) +
  geom_text(data=labels,aes(x,y,label=NAME),size=3) 
```

`dput()`如果有人想玩的话，这里有一部 df 电影：

```
structure(list(RANK = 1:50, NAME = structure(c(2L, 45L, 18L, 
                                               33L, 32L, 29L, 34L, 23L, 4L, 21L, 38L, 46L, 15L, 36L, 26L, 49L, 
                                               16L, 8L, 5L, 31L, 17L, 27L, 41L, 3L, 48L, 40L, 28L, 1L, 6L, 24L, 
                                               47L, 13L, 10L, 12L, 39L, 14L, 30L, 20L, 22L, 11L, 19L, 25L, 35L, 
                                               9L, 43L, 44L, 37L, 7L, 42L, 50L), .Label = c("Alice in Wonderland", 
                                                                                            "Avatar", "Despicable Me 2", "E.T.", "Finding Nemo", "Forrest Gump", 
                                                                                            "Harry Potter and the Deathly Hallows Part 1", "Harry Potter and the Deathly Hallows Part 2", 
                                                                                            "Harry Potter and the Half-Blood Prince", "Harry Potter and the Sorcerer's Stone", 
                                                                                            "Independence Day", "Indiana Jones and the Kingdom of the Crystal Skull", 
                                                                                            "Iron Man", "Iron Man 2", "Iron Man 3", "Jurassic Park", "LOTR: The Return of the King", 
                                                                                            "Marvel's The Avengers", "Pirates of the Caribbean", "Pirates of the Caribbean: At World's End", 
                                                                                            "Pirates of the Caribbean: Dead Man's Chest", "Return of the Jedi", 
                                                                                            "Shrek 2", "Shrek the Third", "Skyfall", "Spider-Man", "Spider-Man 2", 
                                                                                            "Spider-Man 3", "Star Wars", "Star Wars: Episode II -- Attack of the Clones", 
                                                                                            "Star Wars: Episode III", "Star Wars: The Phantom Menace", "The Dark Knight", 
                                                                                            "The Dark Knight Rises", "The Hobbit: An Unexpected Journey", 
                                                                                            "The Hunger Games", "The Hunger Games: Catching Fire", "The Lion King", 
                                                                                            "The Lord of the Rings: The Fellowship of the Ring", "The Lord of the Rings: The Two Towers", 
                                                                                            "The Passion of the Christ", "The Sixth Sense", "The Twilight Saga: Eclipse", 
                                                                                            "The Twilight Saga: New Moon", "Titanic", "Toy Story 3", "Transformers", 
                                                                                            "Transformers: Dark of the Moon", "Transformers: Revenge of the Fallen", 
                                                                                            "Up"), class = "factor"), YEAR = c(2009L, 1997L, 2012L, 2008L, 
                                                                                                                               1999L, 1977L, 2012L, 2004L, 1982L, 2006L, 1994L, 2010L, 2013L, 
                                                                                                                               2012L, 2002L, 2009L, 1993L, 2011L, 2003L, 2005L, 2003L, 2004L, 
                                                                                                                               2004L, 2013L, 2011L, 2002L, 2007L, 2010L, 1994L, 2007L, 2007L, 
                                                                                                                               2008L, 2001L, 2008L, 2001L, 2010L, 2002L, 2007L, 1983L, 1996L, 
                                                                                                                               2003L, 2012L, 2012L, 2009L, 2010L, 2009L, 2013L, 2010L, 1999L, 
                                                                                                                               2009L), GROSS = c(760.5, 658.6, 623.4, 533.3, 474.5, 460.9, 448.1, 
                                                                                                                                                 436.5, 434.9, 423.3, 422.7, 415, 409, 408, 403.7, 402.1, 395.8, 
                                                                                                                                                 381, 380.8, 380.2, 377, 373.4, 370.3, 366.9, 352.4, 340.5, 336.5, 
                                                                                                                                                 334.2, 329.7, 321, 319.1, 318.3, 317.6, 317, 313.8, 312.1, 310.7, 
                                                                                                                                                 309.4, 309.1, 306.1, 305.4, 304.4, 303, 301.9, 300.5, 296.6, 
                                                                                                                                                 296.3, 295, 293.5, 293), WEEKS = c(9, 9, 9, 9, 9, 9, 9, 9, 9, 
                                                                                                                                                                                    9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 
                                                                                                                                                                                    9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9)), .Names = c("RANK", 
                                                                                                                                                                                                                                                             "NAME", "YEAR", "GROSS", "WEEKS"), row.names = c(NA, -50L), class = "data.frame") 
```