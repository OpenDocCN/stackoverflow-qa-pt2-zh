# StackOverflow 问答 13894000-13894999

# actionscript-3 - AS3 - 单击按钮转到不同的“页面”时如何停止实例和影片剪辑

> ID：13894002
> 
> 赞同：0
> 
> 时间：2012-12-15T16:30:03.500
> 
> 标签：actionscript-3, flash

我创建了一个允许用户单击多个按钮的应用程序。这些按钮中的每一个在七个框架上都有不同的内容。

例如; 我在按钮 1 上有一个游戏，在第 2 页上有一个动画，等等。所有七个按钮的代码仅位于第 1 帧。当我单击另一个按钮时，游戏会继续播放下一页动画。我怎么能阻止它？

ps动画/游戏代码设置在不同的帧上（“PAGES AS”层）

![时间线页面设置](../Images/a39ed0d7ed76ae80d84cbab629cb3f5f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T20:37:40.370

要使自动播放停止，您可以添加该`stop()`功能。这需要添加到每一帧。

如果要根据当前帧执行某个操作，可以使用：

```
if(stage.currentFrame==AnyNumber){
  //Do something
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T01:10:03.560

你也可以*gotoAndStop(frame number)*。

例如，如果您在第 1 帧按下按钮并且您希望按钮在第 4 帧继续使用*gotoAndStop(4);*

# android - Android Facebook SDK 3.0 在登录时给出“remote_app_id 与存储的 id 不匹配”

> ID：13894006
> 
> 赞同：43
> 
> 时间：2012-12-15T16:30:35.453
> 
> 标签：android, facebook, facebook-android-sdk

我正在尝试构建一个使用 Facebook SDK for Android 3.0 的应用程序。但是当我试图打电话时

```
Session.openActiveSession 
```

它只是简单地给我一个带有 CLOSED_LOGIN_FAILED 的 SessionState，而 LogCat 是：

```
12-16 00:03:40.510: W/fb4a:fb:OrcaServiceQueue(4105): com.facebook.orca.protocol.base.ApiException: remote_app_id does not match stored id 
```

我用“remote_app_id”搜索了 StackOverflow，结果是 iOS 中的“Bundle ID”，但我不知道“remote_app_id”在 Android 中是什么意思。我已经在我的 Facebook 应用设置中设置了包名称和活动名称。我不知道错误的原因。

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-12-26T14:34:58.730

另一个可能的错误（发生在我身上）是：在 Facebook 应用程序控制台设置“密钥哈希”并使用另一个密钥库签署 android 应用程序。

不幸的是，这是因为[Facebook 入门教程](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/)引发了这个错误。它说 android 开发人员应该在您的示例中使用默认的 android 调试密钥，并且没有说明应该使用您将签署应用程序的相同密钥库生成密钥哈希。

我的建议是在你的 facebook 控制台设置两个 Key Hashes：

1.  默认安卓调试键：

> keytool -exportcert -alias androiddebugkey -keystore ~/.android/debug.keystore | openssl sha1 -二进制 | openssl base64

2.  您的应用程序发布密钥：

> keytool -exportcert -alias yourappreleasekeyalias -keystore ~/.your/path/release.keystore | openssl sha1 -二进制 | openssl base64

请记住：您不能发布使用 SDK 工具生成的调试密钥签名的应用程序。因此，不可能仅使用使用前一个命令行生成的哈希键来发布应用程序（如 facebook 教程所建议的那样。

有关签署您的申请的更多信息，请访问[签署您的申请](http://developer.android.com/tools/publishing/app-signing.html)。

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2013-01-20T02:53:25.733

另一种选择是打印发送到 Facebook 的密钥哈希并使用该值。

`onCreate()`对主要活动中的方法进行以下更改：

```
try {
    PackageInfo info = getPackageManager().getPackageInfo(
          "com.facebook.samples.loginhowto", PackageManager.GET_SIGNATURES);
    for (Signature signature : info.signatures){
           MessageDigest md = MessageDigest.getInstance("SHA");
           md.update(signature.toByteArray());
           Log.d("KeyHash:", Base64.encodeToString(md.digest(), Base64.DEFAULT));
    }
} catch (NameNotFoundException e) {
} catch (NoSuchAlgorithmException e) {
} 
```

替换`com.facebook.samples.loginhowto`为`your own package name`。

这对我有用！

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2012-12-16T01:50:25.847

我解决了这个问题。问题是，我使用“keytool”生成的“Key Hash”是错误的。当“keytool”提示输入密码时，您必须使用“android”（不带引号）。我使用的是自己的密码。当我更改密码时，问题就消失了。希望这可以帮助。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-04-17T12:17:33.740

我被错误的 openssl 困住了，它生成了错误的哈希键。[我使用来自http://gnuwin32.sourceforge.net/packages/openssl.htm](http://gnuwin32.sourceforge.net/packages/openssl.htm)的openssl解决了这个问题。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-02-16T02:53:37.143

我遇到了同样的问题，发现 openssl 创建了错误的 sha1。下载了一个新的，它就像一个魅力。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-30T11:22:53.623

您正在使用调试密钥获取哈希密钥...如果您没有签署包并在调试模式下运行应用程序，这可能会起作用。你需要做的是：

1) 转到清单文件并添加到应用程序 android:debuggable="true"。

2) 现在运行您的应用程序并监控 logcat。

3) 您将打印出一个新密钥，该密钥将与 x9SLcMXBlgly1f36PJuuc4a3YAc 匹配，您拥有的密钥现在最后有一个 = 符号。

4) 在 facbook 开发者网站上注册此密钥

备用技巧

您可以做另一件事只需将此密钥注册到 facebook 开发人员站点 x9SLcMXBlgly1f36PJuuc4a3YAc=

只需将 = 添加到 facebook 应用程序显示的键即可。

你完成了！希望这会奏效。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-21T22:54:40.543

此外，请确保您在 facebook 开发门户中的正确位置输入哈希。编辑应用程序设置并选择 Native Android App。

我错误地将哈希放在“示例应用程序设置”中。

# android - 使用 AlarmManager() 调用函数

> ID：13894008
> 
> 赞同：3
> 
> 时间：2012-12-15T16:31:10.273
> 
> 标签：android

这是我的代码，但这调用了我的活动而不是我想要的函数，此代码在一个函数下运行，该函数又在服务中创建：

```
Intent intent = new Intent(this, abc.class);
        PendingIntent pi = PendingIntent.getService(Server.this, 0, intent, 0);
        AlarmManager almmgr = (AlarmManager) getSystemService(ALARM_SERVICE);
        Calendar cldr = Calendar.getInstance();
        int min1 = cldr.get(Calendar.MINUTE);
        cldr.setTimeInMillis(System.currentTimeMillis());
        cldr.add(Calendar.SECOND, 30);
        almmgr.set(AlarmManager.RTC_WAKEUP, cldr.getTimeInMillis(), pi); 
```

基本上我想从 2 个时间选择器中获取输入，当达到这 2 个时间选择器之间的时间差时，然后调用一个函数来做一些控制工作！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-24T15:53:19.707

这是我从几个不同的项目中拼凑而成的一个例子，可能对遇到这个问题的人有用：

```
 BroadcastReceiver br = new BroadcastReceiver() {
             @Override
             public void onReceive(Context c, Intent i) {     
                 Toast.makeText(c, "A toast!", Toast.LENGTH_LONG).show();
             }
    };
    registerReceiver(br, new IntentFilter("com.example.filterMe") );

    AlarmManager mgr=(AlarmManager) getSystemService(Context.ALARM_SERVICE);
    PendingIntent pi = PendingIntent.getBroadcast( this, 0, new Intent("com.example.filterMe"),0);

    mgr.setRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP, SystemClock.elapsedRealtime(), 30000, pi); // 30 second repeat for testing 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-15T17:36:03.393

> 所以我只想知道如何使用意图等来调用服务本身的特定功能？

你没有，至少不是直接的。

您可以创建一个服务，并且可以使用 a`getService()` `PendingIntent`来`AlarmManager`调用该服务。但是，您将获得控制权`onStartCommand()`，而不是其他“服务本身的特定功能”。如果您愿意，欢迎您调用其他一些“服务本身的特定功能” `onStartCommand()`，但请记住，您在主应用程序线程上，因此不能做很多事情。如果你有很多工作要做，你可以考虑创建一个`IntentService`而不是一个plain `Service`，这样你就可以控制一个后台线程（in `onHandleIntent()`）。

# download - 让下载在 angularjs 和 express.js 之间工作

> ID：13894009
> 
> 赞同：5
> 
> 时间：2012-12-15T16:31:26.807
> 
> 标签：download, express, angularjs

我可以获得我请求的文件的原始数据，但我无法让浏览器将文件提供给用户。我需要使用 iframe 吗？

```
 //Client code
   download_file: function (path, callback) {
       $http.post('/download/client_file', {path:path}).
           success(function(data, status, headers, config) {
                console.log(data); //this contains the raw data of the res.download 
                                   //from the server.
           });
   }

   //server code
   res.download(file); // the path is proper 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T17:52:05.093

我在我的服务文件中使用下面的代码来下载项目，效果很好。我从[http://filamentgroup.com/lab/jquery_plugin_for_requesting_ajax_like_file_downloads/得到它](http://filamentgroup.com/lab/jquery_plugin_for_requesting_ajax_like_file_downloads/)

```
$('<form action="'+ url +'" method="'+ ('post') +'">'+inputs+'</form>')
               .appendTo('body').submit().remove(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-06T02:58:03.390

`location.href="uriString";`根据文件类型以及文件头的设置方式，您可能会发现简单地从 JS调用要容易得多。文件应该立即下载，使用您已经在其中的窗口。如果它是 JSON 或文本数据，您可能需要调整标题以使其下载而不是呈现内联...（“内容处置：附件”，也许。 ..)

# ruby-on-rails - 无法使用嵌套模型批量分配受保护的属性

> ID：13894013
> 
> 赞同：2
> 
> 时间：2012-12-15T16:31:53.493
> 
> 标签：ruby-on-rails, nested-forms, simple-form

我有 3 个嵌套模型：

```
class Recipe < ActiveRecord::Base
  has_many :recipe_ingredients
  has_many :ingredients, :through => :recipe_ingredients
  accepts_nested_attributes_for :ingredients
  accepts_nested_attributes_for :recipe_ingredients, :allow_destroy => true

  attr_accessible :description, :name, :preparation, :recipe_ingredients_attributes, :ingredients_attributes
  validates_presence_of :name, :description, :preparation
end

class RecipeIngredient < ActiveRecord::Base
  belongs_to :recipe, :foreign_key => "recipe_id"
  belongs_to :ingredient, :foreign_key => "ingredient_id"
  accepts_nested_attributes_for :ingredient
  delegate :name, :to => :ingredient, :allow_nil => true

  attr_accessible :ingredient_id, :quantity, :recipe_id, :ingredient_attributes
end

class Ingredient < ActiveRecord::Base
  has_many :recipe_ingredients
  has_many :recipes, :through => :recipe_ingredients

  attr_accessible :name
end 
```

这是我的食谱控制器：

```
#<snip>
def new
  @recipe = Recipe.new

  respond_to do |format|
    format.html # new.html.erb
    format.json { render json: @recipe }
  end
end

def create
  @recipe = Recipe.new(params[:recipe])

  respond_to do |format|
    if @recipe.save
      format.html { redirect_to @recipe, notice: 'Het recept werd aangemaakt.' }
      format.json { render json: @recipe, status: :created, location: @recipe }
    else
      format.html { render action: "new" }
      format.json { render json: @recipe.errors, status: :unprocessable_entity }
    end
  end
end
#</snip> 
```

这就是我的表单的样子（使用 simple_forms 和 nested_forms gems）：

```
= simple_nested_form_for @recipe, :html => { :class => 'form-horizontal' } do |f|
  = f.input :name, :label => "Naam"
  = f.input :description, :input_html => { :class => "span6" }, :label => "Beschrijving"
  = f.input :preparation, :input_html => { :class => "span6" }, :label => "Bereiding"

  = f.simple_fields_for :recipe_ingredients do |ri|
    = ri.input :quantity, :label => "#"
    = ri.input :name, :label => "Ingredient"
    = ri.link_to_remove "ingredient verwijderen"
  %p
    = f.link_to_add "Voeg ingredient toe", :recipe_ingredients

  .form-actions
    = f.submit "Update recept", :class => 'btn btn-primary'
    = link_to t('.cancel', :default => "Annuleer"), recipes_path, :class => 'btn' 
```

每当我保存食谱时，它都会给我：ActiveModel::MassAssignmentSecurity::Error in RecipesController#create Can't mass-assign protected attributes: name

这是我的堆栈跟踪：

```
Started POST "/recipes" for 127.0.0.1 at 2012-12-15 19:14:38 +0100
Processing by RecipesController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"72F9E5Cim3SFlFabViy8p4eF4el+RGtdlPmkuaoBU90=", "recipe"=>{"name"=>"tets", "description"=>"egwrb", "preparation"=>"gwrv", "recipe_ingredients_attributes"=>{"1355595249889"=>{"quantity"=>"21", "name"=>"grsd", "_destroy"=>"false"}}}, "commit"=>"Update recept"}
  User Load (0.4ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 500 Internal Server Error in 2ms

ActiveModel::MassAssignmentSecurity::Error (Can't mass-assign protected attributes: name):
  app/controllers/recipes_controller.rb:54:in `new'
  app/controllers/recipes_controller.rb:54:in `create' 
```

我试过玩单数/复数，但没有运气。我不知道我做错了什么。:ingredient_attributes 应该可以访问，但似乎不是？

亲切的问候，史蒂文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T17:53:45.900

实际上，我认为您的观点只是有一个小错字：

```
= f.simple_fields_for :ingredient do |i| 
```

应该

```
= ri.simple_fields_for :ingredient do |i| 
```

我注意到 params 哈希在顶层有成分，当它应该嵌套在`recipe_ingredients_attributes`. （您可能还需要设置`accepts_nested_attributes_for`on `RecipeIngredient`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T18:33:07.140

您必须创建一组额外的嵌套字段。在`ri`您需要添加的块内

```
- ri.simple_fields_for :ingredient do |i|
  = i.input :name 
```

通过这样做，您正确设置了名称`ingredient`而不是`recipe_ingredient`.

# ruby-on-rails-3 - 使用回形针和 Amazon s3 的开发错误

> ID：13894014
> 
> 赞同：4
> 
> 时间：2012-12-15T16:32:09.207
> 
> 标签：ruby-on-rails-3, heroku, amazon-s3, paperclip

我的应用程序在 heroku 上运行，并已配置为使用 Amazon s3 将所有上传到存储桶的资产保存。一切正常。因此，当我尝试在本地上传图像（开发）时，出现以下错误

```
AWS::S3::Errors::PermanentRedirect in RecipesController#update 
The bucket you are attempting to access must be addressed using the specified endpoint. Please send all future requests to this endpoint. 
```

我的更新操作

```
 def update
 @recipe = Recipe.find(params[:id])

 if @recipe.update_attributes(params[:recipe])
  redirect_to my_recipes_path, :notice => "Successfully updated recipe"
 else 
 render :action => 'edit'

end
end 
```

尽管经过一番阅读，这似乎是因为我在欧盟使用了一个存储桶（不是默认的美国存储桶）

我有两个桶，一个用于开发，一个用于生产。并创建了一个 s3.yml 文件来保存凭据，尽管我认为使用 ENV 变量会更好，但我使用 Ubuntu 并且可以更新我的 .bashrc 文件？不确定那个..无论如何我的 s3.yml 文件（为了安全而删除了实际密钥）

```
development:
access_key_id: KEY
secret_access_key: KEY
bucket: assets.recipesappdev

production:
access_key_id: KEY
secret_access_key: KEY
bucket: assets.recipesapp 
```

和我的食谱模型配置

```
has_attached_file :avatar, 
:styles => { :myrecipes => "260x180#", :showrecipe => "600x300#", :medium => "300x300>", :thumb => "100x100>" },
 :storage => :s3,
 :s3_credentials => "#{Rails.root}/config/s3.yml",
  :path => "/images/:id/:style.:extension" 
```

有没有人解决这个问题，我试过这个，例如[http://www.conandalton.net/2011/02/paperclip-s3-and-european-buckets.html](http://www.conandalton.net/2011/02/paperclip-s3-and-european-buckets.html)但这不起作用，虽然我的初始化程序可能是错误的，我尝试配置以适合我的应用程序

```
 Paperclip.interpolates(:s3_eu_url) { |assets, style|
 "#{assets.s3_protocol}://s3-eu-west-1.amazonaws.com/#{assets.recipesappdev}  /#{assets.path(style).gsub(%r{^/}, "")}"
   } 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-15T17:06:42.077

尝试将`url`选项设置`has_attached_file`为`":s3_domain_url"`。（不要忘记用引号括起来。）

```
has_attached_file :avatar, 
                  :styles => { :myrecipes => "260x180#", :showrecipe => "600x300#", :medium => "300x300>", :thumb => "100x100>" },
                  :storage => :s3,
                  :s3_credentials => "#{Rails.root}/config/s3.yml",
                  :path => "/images/:id/:style.:extension",
                  :url => ":s3_domain_url" 
```

请参阅 RDoc 以获取[`Paperclip::Storage::S3`](http://rdoc.info/github/thoughtbot/paperclip/Paperclip/Storage/S3).

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-08-01T12:43:52.880

对于像我这样的人，`url`解决方案不起作用尝试设置`s3_host_name`选项：

```
:s3_host_name => "s3-eu-west-1.amazonaws.com" 
```

看起来欧洲节点有这个问题。

*取自[这里](https://stackoverflow.com/questions/3835681/permanentredirect-s3-for-unspecified-endpoint)*

# objective-c - 无法退出 Xcode

> ID：13894015
> 
> 赞同：0
> 
> 时间：2012-12-15T16:32:16.023
> 
> 标签：objective-c, ios, xcode

每 5-10 次我用 XCode 运行我的 iOS 代码 - 在模拟器上会发生这种情况：

1.  程序不运行

2.  停止按钮是可以按下的，但是当我按下它时它什么也没做

3.我无法退出Xcode！退出的唯一方法是强制退出 Xcode

我什至不知道要共享什么打印输出或代码，因为它似乎根本与代码无关。编译成功后会发生这种情况，模拟器显示启动画面（并且不继续运行程序）并且日志显示：

```
GNU gdb 6.3.50-20050815 (Apple version gdb-1822) (Sun Aug  5 03:00:42 UTC 2012)
Copyright 2004 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copies of it under certain conditions.
Type "show copying" to see the conditions.
There is absolutely no warranty for GDB.  Type "show warranty" for details.
This GDB was configured as "x86_64-apple-darwin".sharedlibrary apply-load-rules all
Attaching to process 4411. 
```

我使用的是 OS X 版本 10.8.2 和 xcode 版本 4.5.2，但是当我运行旧版本的 XCode 和 OS X 时也出现了问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T18:16:22.987

Xcode 和模拟器并不是运行应用程序时产生的唯一进程。在活动监视器中，您会看到名为“Simulator Bridge”的第三个进程，它一直以僵尸进程的身份而臭名昭著。在你杀死 Xcode 和模拟器本身之后，杀死模拟器桥进程并再次启动 Xcode。

# java - 在静态方法中调用 ArrayList 的实例

> ID：13894019
> 
> 赞同：0
> 
> 时间：2012-12-15T16:32:35.397
> 
> 标签：java, arrays, arraylist, static-methods

**编辑：**我正在重写这个问题，希望使代码更明确。

我有一个类 Pred，有 2 个变量。

```
public class Pred {

    private String str;
    private ArrayList<Keys> keysArr;

    public Pred(String s) {
        this.str = s;
        keysArr = new ArrayList<Keys>;
    }

    public void setKeysArr(ArrayList<Keys> kArr) {
        this.keysArr.addAll(kArr);
    }
} 
```

在 extract() 方法中，我遍历另一个数组，获取一些变量，并使用这些变量来创建新的`Preds`.

```
public static Collection<Pred> extractPause(Keys[] kseArr) {

    Collection<Pred> predArray = new ArrayList<Pred>(); 

    // create method variables
    ArrayList<Keys> keysArray ka = new ArrayList<Keys>();
    String s = "";

    // loop through an array
    for (int i; i < someArray.size(); i++) {
        s = "Sam"+i;
        ka.add(key1+i);
        ka.add(key2+i);

        // create new instance of Pred
        Pred p = new Pred(s);
        p.setKeysArr(ka);
        predArray.add(p);

        // reset variables (not sure if that's necessary)
        s = "";
        ka.clear();

    }
    return predArray;
} 
```

`Preds`当我去打印 `Pred`.`predArray`

```
public void print() {
    for (Pred p : predArry)
        System.out.println(p.str+" "+p.get(p.keysArr.size()-1).getKeys());
} 
```

输出：

```
Sam1 key12 key2  
Sam2 key12 key22 
```

应该：

```
Sam1 key11 key21  
Sam2 key12 key22 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T16:40:17.160

可能是因为当您创建`Foo`实例列表时，您确实

```
Foo foo = new Foo();
for (int i = 0; i < 10; i++) {
    foo.setBarStr("hello " + i);
    foo.setKeyArray(...);
    list.add(foo);
} 
```

而不是做

```
for (int i = 0; i < 10; i++) {
    Foo foo = new Foo();
    foo.setBarStr("hello " + i);
    foo.setKeyArray(...);
    list.add(foo);
} 
```

请记住，列表包含对对象的引用，而不是对象的副本。因此，如果您将相同的 Foo 实例添加到列表中 10 次，则列表将包含对这个唯一实例的 10 个引用，这当然会包含其最后修改的状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-20T15:25:45.703

我认为问题出在您的打印功能上。我不知道 get 或 getKeys 函数的作用，但我认为即使存在其他具有不同键值的 Pred 对象，您也会从同一个对象中获取键。

```
System.out.println(p.str+" "+p.get(p.keysArr.size()-1).getKeys()); 
```

如果你在这里有错字并且有

```
predArry.get(...) 
```

在您的代码中，您不断获得相同的 Pred 对象，这就解释了为什么您不断获得相同的键值。因为对于这些对象中的任何一个，索引 p.keysArr.size()-1 都不会改变。p.keysArr.size()-1 在上面的示例中始终为 1，并且您不断从 Pred 对象数组中获取相同的 Pred 对象，即 PredArry

# jenkins - 詹金斯有没有办法创建一个在另一个詹金斯中运行的工作的符号链接？

> ID：13894020
> 
> 赞同：0
> 
> 时间：2012-12-15T16:32:37.520
> 
> 标签：jenkins, continuous-integration, jenkins-plugins

考虑以下情况。有一个 Jenkins (JenkinsNr1) 的工作叫做“Dummy”。我想将这份工作镜像到另一个 Jenkins (JenkinsNr2)。该作业只能在 JenkinsNr1 中运行，但我必须能够对其进行配置并在 JenkinsNr2 中查看结果。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T10:15:19.953

即使你能做到这一点，这也是不好的做法。

每台服务器都有自己的一组作业要管理，这就是它应该的样子。

因为 Jenkins 可以在 Web 上使用，所以
您应该集中精力将其提供给需要管理不同工作的人，
而不是试图复制这些工作。

（您还应该考虑让一个实例作为另一个实例的从属运行，
而不是拥有两台服务器）

干杯

# c# - 在 C# 中返回字符的代码点

> ID：13894021
> 
> 赞同：22
> 
> 时间：2012-12-15T16:32:38.793
> 
> 标签：c#, unicode, unicode-string

如何返回字符的[Unicode 代码点](https://en.wikipedia.org/wiki/Code_point)？例如，如果输入是“A”，那么输出应该是“U+0041”。理想情况下，解决方案应该处理[代理对](https://en.wikipedia.org/wiki/Universal_Character_Set_characters#Surrogates)。

*代码点*是指根据[Unicode](http://unicode.org/glossary/#code_point)的实际代码点，它不同于*[代码单元](http://unicode.org/glossary/#code_unit)*（UTF8 有 8 位代码单元，UTF16 有 16 位代码单元，UTF32 有 32 位代码单元，在后一种情况下，值等于代码点，在考虑了字节序之后）。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-15T16:46:27.530

以下代码将`string`输入的代码点写入控制台：

```
string input = "\uD834\uDD61";

for (var i = 0; i < input.Length; i += char.IsSurrogatePair(input, i) ? 2 : 1)
{
    var codepoint = char.ConvertToUtf32(input, i);

    Console.WriteLine("U+{0:X4}", codepoint);
} 
```

*输出：*

```
U+1D161
```

由于 .NET 中的字符串是 UTF-16 编码的，因此`char`构成字符串的值需要首先转换为 UTF-32。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-15T16:33:33.800

很简单，因为 C# 中的字符实际上是 UTF16 代码点：

```
char x = 'A';
Console.WriteLine("U+{0:x4}", (int)x); 
```

为了解决这些注释，`char`C# 中的 A 是一个 16 位数字，并包含一个 UTF16 代码点。高于 16 位空间的代码点不能用 C# 字符表示。C# 中的字符不是可变宽度。然而，一个*字符串*可以有 2 个字符，每个字符都是一个代码单元，形成一个 UTF16 代码点。如果您有字符串输入和 16 位空间以上的字符，则可以使用`char.IsSurrogatePair`and `Char.ConvertToUtf32`，如另一个答案中所建议的：

```
string input = ....
for(int i = 0 ; i < input.Length ; i += Char.IsSurrogatePair(input,i) ? 2 : 1)
{
    int x = Char.ConvertToUtf32(input, i);
    Console.WriteLine("U+{0:X4}", x);
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-04-07T14:14:24.187

C# 不能将 unicode 代码点存储在 a 中`char`，因为`char`只有 2 个字节，并且 unicode 代码点通常会超过该长度。解决方案是将代码点表示为字节序列（作为字节数组或“扁平化”为 32 位原语）或字符串。接受的答案转换为 UTF32，但这并不总是理想的。

这是我们用来将字符串拆分为其 unicode 代码点组件的代码，但保留了原生 UTF-16 编码。结果是一个可用于在 C#/.NET 中本地比较（子）字符串的可枚举：

```
 public class InvalidEncodingException : System.Exception
    { }

    public static IEnumerable<string> UnicodeCodepoints(this string s)
    {
        for (int i = 0; i < s.Length; ++i)
        {
            if (Char.IsSurrogate(s[i]))
            {
                if (s.Length < i + 2)
                {
                    throw new InvalidEncodingException();
                }
                yield return string.Format("{0}{1}", s[i], s[++i]);
            }
            else
            {
                yield return string.Format("{0}", s[i]);
            }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2021-03-05T18:32:50.470

在 .NET Core 3.0 或更高版本中，您可以使用[Rune Struct](https://docs.microsoft.com/en-us/dotnet/api/system.text.rune)：

```
// Note that  and  are encoded using surrogate pairs
// but A, B, C and ✋ are not
var runes = "ABC✋&quot;.EnumerateRunes();

foreach (var r in runes)
    Console.Write($"U+{r.Value:X4} ");

// Writes: U+0041 U+0042 U+0043 U+270B U+1F609 U+1F44D 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-06-21T15:12:26.630

实际上@Yogendra Singh 的回答有一些优点，目前是唯一一个投反对票的人。可以这样完成工作

```
 public static IEnumerable<int> Utf8ToCodePoints(this string s)
    {
        var utf32Bytes = Encoding.UTF32.GetBytes(s);
        var bytesPerCharInUtf32 = 4;
        Debug.Assert(utf32bytes.Length % bytesPerCharInUtf32 == 0);
        for (int i = 0; i < utf32bytes.Length; i+= bytesPerCharInUtf32)
        {
            yield return BitConverter.ToInt32(utf32bytes, i);
        }
    } 
```

经测试

```
 var surrogatePairInput = "abc";
    Debug.Assert(surrogatePairInput.Length == 5);
    var pointsAsString = string.Join(";" , 
        surrogatePairInput
        .Utf8ToCodePoints()
        .Select(p => $"U+{p:X4}"));
    Debug.Assert(pointsAsString == "U+0061;U+0062;U+0063;U+1F4A9"); 
```

示例是相关的，因为一堆便便表示为代理对。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-15T16:39:51.797

[我在msdn 论坛](http://social.msdn.microsoft.com/Forums/en/csharpgeneral/thread/1eee1666-6048-4558-84f1-86976baf0c41)上找到了一个小方法。希望这可以帮助。

```
 public int get_char_code(char character){ 
        UTF32Encoding encoding = new UTF32Encoding(); 
        byte[] bytes = encoding.GetBytes(character.ToString().ToCharArray()); 
        return BitConverter.ToInt32(bytes, 0); 
    } 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-12-15T16:46:13.080

```
public static string ToCodePointNotation(char c)
{

    return "U+" + ((int)c).ToString("X4");
}

Console.WriteLine(ToCodePointNotation('a')); //U+0061 
```

# javascript - AJAX 工作流编辑器，AML 文件不起作用

> ID：13894022
> 
> 赞同：1
> 
> 时间：2012-12-15T16:32:37.980
> 
> 标签：javascript, asp.net, ajax, xaml, editor

嘿，我正在尝试在 asp.net Web 项目中构建工作流编辑器。我对此进行了相当多的研究，并找到了一些方法来做到这一点，但我选择了这个

[http://ui.ajax.org/#demos/elements.flowchart](http://ui.ajax.org/#demos/elements.flowchart)

在此，我更新了项目中的所有 .xml 和 .js 文件，但我遇到了 AML 部分的问题，我尝试包含此处提到的所有链接

[http://ui.ajax.org/#docs/getting_started.](http://ui.ajax.org/#docs/getting_started.creating)创建一个新项目

我只是无法让它工作，我也无法在网上找到任何教程。如果有人能帮助我解决这个问题，我将不胜感激

PS如果您知道任何替代方案，请告诉我

# android - Android：ListView 的问题（使用 Intent 从另一个 Activity 更新/传递值）

> ID：13894024
> 
> 赞同：0
> 
> 时间：2012-12-15T16:33:09.283
> 
> 标签：android, android-intent, android-listview

我有一个活动，在特定条件下，它将一个整数值传递给包含 ListView 的活动。但是，我遇到了几个问题：

1.  初始值为 0，当执行活动并满足条件时，传入另一个 0，而不是实际值。

2.  ListView 每次从主活动运行时都会重置。我希望它保留以前运行的结果（直到用户点击 ListView 活动本身的重置按钮）。

**编辑 3\. 我注意到我之前没有注意到的行为，即每次从主活动打开 ListView 活动时，都会向 ListView 添加另一个 0。

这是相关代码 -

Activity 将值传递给包含 ListView 的 Activity：

```
if(condition) {
    textview.setText("String1");
    Intent intent = new Intent(this, ListViewActivity.class);
    intent.putExtra("numCounter", numCounter);
} 
```

ListView 的活动：

```
ListView numListView;
ArrayAdapter<Integer> listAdapter; 

static ArrayList<Integer> numArrayList = new ArrayList<Integer>();

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_name);

    Intent intent = getIntent();
    int intentNum = intent.getIntExtra("numCounter", 0);
    addNumArrayList(intentNum);

    numListView = (ListView) findViewById(R.id.numberListView);

    listAdapter = new ArrayAdapter<Integer>(this, R.layout.listview_row, numArrayList);

    numListView.setAdapter(listAdapter); 
}

// Keep ArrayList to size of 10, while keeping it sorted 
// (displaying only the 10 lowest)

public static void addNumArrayList(int val) {
    numArrayList.add(val);
    Collections.sort(numArrayList);
    if(numArrayList.size() > 10) {
        for(int i = 10; i < numArrayList.size(); i++) {
            numArrayList.remove(i);
        }
    }
} 
```

我基本上想要它，以便只有其他活动或活动可以改变它，除非在 ListView 活动本身上点击重置按钮（只需从主活动打开活动应该什么都不做）。

我如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T18:32:16.803

为 addnumArrayList 添加以下条件

```
Bundle mBundle = intent.getExtras();
if(mBundle != null && mBundle.containsKey(¨numCounter¨)){
    int intentNum = intent.getIntExtra("numCounter", 0);
    addNumArrayList(intentNum);
} 
```

即使密钥不存在，您也会获得默认值 0。所以请检查密钥是否存在

至于 listView 被重置，您应该将值存储在文件中而不是静态变量中，如果进程被终止，这些值将被重置。

编辑：试试这个

```
 int intentNum = intent.getIntExtra("numCounter", -1); // -1 or any number that you do not pass
   if(intentNum != -1)
    addNumArrayList(intentNum); 
```

# c++ - 从 1D 数组表示计算 3D 索引的有效方法

> ID：13894028
> 
> 赞同：6
> 
> 时间：2012-12-15T16:33:25.790
> 
> 标签：c++, math, cuda

我有一个 3D 数据，存储在 1D 数组中。我计算这样的一维索引：

```
index = i + j * WIDTH + k * WIDTH * HEIGHT 
```

比我需要`i,j,k`从`index`. 这样做的明显方法是这样的：

```
k = index / (WIDTH * HEIGHT) 
j = (index % (WIDTH * HEIGHT)) / WIDTH
i = index - j * WIDTH - k * WIDTH * HEIGHT 
```

但我想知道，有没有更有效的方法来做到这一点？至少没有模...

这个问题的背景 - 我在 CUDA 中有一个内核，我可以在其中访问数据和计算`i, j, k`索引（`index`对应于唯一的线程 ID）。那么也许有一些特定于 CUDA 的方法可以做到这一点？我想这是一个很常见的问题，但我找不到更好的方法来做到这一点......

谢谢你的想法！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-15T17:17:30.377

尝试将您的尺寸四舍五入到二的下一个幂。然后，您可以使用位移位和掩码来代替乘法、除法和取模。

```
index = i | (j | k << HEIGHT_BITS) << WIDTH_BITS;

k = index >> (WIDTH_BITS + HEIGHT_BITS);
j = (index >> WIDTH_BITS) & ((1 << HEIGHT_BITS) - 1);
i = index & ((1 << WIDTH_BITS) - 1); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-17T01:02:38.373

你所拥有的很好；如果您想避免模数（因为这在 gpus 上非常昂贵），您可以使用`j`您已经完成的操作`i`：

```
j = (index - (k*WIDTH*HEIGHT))/WIDTH 
```

如果你想让逻辑更清晰一点，不需要原来的`index`，你可以做

```
k = index/(WIDTH*HEIGHT); 
index -= k*WIDTH*HEIGHT; 

j = index/WIDTH; 
index -= j*WIDTH; 

i = index/1; 
```

然后非常直接地扩展到任意维度。您可以尝试通过执行诸如 precomputing 之类的操作来调整上述内容`WIDTH*HEIGHT`，但我只会进行优化并相信编译器会为您执行此操作。

关于四舍五入到 2 的幂的建议是正确的，因为它会加快指数计算，但代价相当高。在这种（还不错）的情况下`WIDTH=HEIGHT=100`，它会将 3d 数组的内存需求增加 60%（`WIDTH=HEIGHT=128`），并且 GPU 上的内存通常已经很紧张了；并且根据您的访问模式，使您的数组大小为二次方很可能会引入银行冲突问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T17:14:17.147

仅适用于尺寸为 2 的幂的情况。使用位掩码。例如，如果第一个索引最大值是 4，那么它应该在索引中占用第一个 2 位。

# google-app-engine - GAE (JPA) 手动添加数据库条目

> ID：13894031
> 
> 赞同：0
> 
> 时间：2012-12-15T16:33:59.493
> 
> 标签：google-app-engine

我是 GAE 的新手，想手动将一些示例记录添加到数据库中。例如，在 Android 中我可以执行 sqlite3 somedb.db 以及简单的插入、更新、删除等操作。但是如何在 GAE 中执行呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T21:28:11.573

您可以从 GAE 管理面板进行手动数据输入....登录后，选择选项数据存储查看器，然后单击“创建”选项卡，选择表名，单击下一步并开始插入您的值

# uiview - GKLeaderboard 旋转父视图控制器

> ID：13894032
> 
> 赞同：0
> 
> 时间：2012-12-15T16:34:03.273
> 
> 标签：uiview, cocos2d-iphone, ios6, gamekit

我正在尝试在另一个包含 EAGL 视图的视图控制器上显示 GKLeaderboardViewController。该视图呈现良好，但将父视图逆时针旋转 90 度，并破坏了父视图控制器的触摸响应和其他功能。GKLeaderboardViewController 也被解雇了。以下是用于创建父视图的代码：

```
 viewController = [[RootViewController alloc]init];
viewController.wantsFullScreenLayout = YES;

//
// Create the EAGLView manually
//  1\. Create a RGB565 format. Alternative: RGBA8
//  2\. depth format of 0 bit. Use 16 or 24 bit for 3d effects, like CCPageTurnTransition
//
//
EAGLView *glView = [EAGLView viewWithFrame:[window bounds]
                               pixelFormat:kEAGLColorFormatRGB565   // kEAGLColorFormatRGBA8
                               depthFormat:0                        // GL_DEPTH_COMPONENT16_OES
                    ];

// attach the openglView to the director
glView.multipleTouchEnabled = YES;
[director setOpenGLView:glView];

//  // Enables High Res mode (Retina Display) on iPhone 4 and maintains low res on all other devices
//  if( ! [director enableRetinaDisplay:YES] )
//      CCLOG(@"Retina Display Not supported");

//
// VERY IMPORTANT:
// If the rotation is going to be controlled by a UIViewController
// then the device orientation should be "Portrait".
//
// IMPORTANT:
// By default, this template only supports Landscape orientations.
// Edit the RootViewController.m file to edit the supported orientations.
//
//#ifdef _ARM_NEON_
//#define ARCH_OPTIMAL_PARTICLE_SYSTEM CCQuadParticleSystem //used to be CCQuadParticleSystem
//#elif _ARM_|| TARGET_IPHONE_SIMULATOR
//#define ARCH_OPTIMAL_PARTICLE_SYSTEM CCPointParticleSystem
//#else
//#error(unknown architecture)
//#endif

[director setAnimationInterval:1.0/60];
[director setDisplayFPS:NO];
[viewController.view addSubview:glView];

[viewController.view sendSubviewToBack:glView];
[window addSubview:viewController.view];
[window setRootViewController:viewController];

[[ZGCGKHelper sharedGameKitHelper]setViewController:viewController];

[window makeKeyAndVisible]; 
```

我正在展示排行榜视图，如下所示：

```
 -(void) presentViewController:(UIViewController*)vc
    {

   UIViewController* rootVC = [self getRootViewController];
   [[CCDirector sharedDirector] stopAnimation];
    [rootVC presentViewController:vc animated:YES completion:^(void){
    [[CCDirector sharedDirector] startAnimation];

}]; 
```

}

游戏中心显示的通知会正确定向并且不会干扰 EAGLView，但排行榜视图会干扰。有想法该怎么解决这个吗？升级到 iOS 6 后出现此问题。

# sql - 带有额外条件的内连接

> ID：13894033
> 
> 赞同：0
> 
> 时间：2012-12-15T16:34:03.910
> 
> 标签：sql, left-join

我正在尝试为图像设置评分应用程序。我想显示当前登录用户尚未评分的图像。

这涵盖了两个表，我已经成功加入了这些表，但是额外的条件：

1.  必须是图像
2.  排除当前用户已评级的任何图像都不起作用。

它显示的结果好像 2 AND 条件根本不存在。

```
SELECT 
   ver_data_media.id, ver_data_media.value, ver_data_media.ref, 
   ver_data_media.type, ver_data_rating.a
FROM 
   ver_data_media
LEFT JOIN 
   ver_data_rating ON ver_data_media.ref = ver_data_rating.a
                   AND ver_data_media.type = 'image'
                   AND ver_data_rating.a != $current_user->ID 
```

任何建议将不胜感激，谢谢弗兰克。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T16:41:14.130

你可以试试下面的吗？选择当前用户的记录，然后显示评级为空/空的图像......也许。如果您向我们展示了您的表格架构，那么您会更好......以获得更有效的答案。

```
SELECT ver_data_media.id, ver_data_media.value, 
ver_data_media.ref, ver_data_media.type, ver_data_rating.a
FROM ver_data_media
LEFT JOIN ver_data_rating
ON ver_data_media.ref = ver_data_rating.a
WHERE ver_data_media.type = 'image'
AND ver_data_rating.a is null
AND id = $current_user -- shouldn't this be like userid = $current_user, 
                        -- where is this ID coming from? what is its relation to this table? 
```

否则，最可能的问题是**您正在验证的数据不是同一类型**，`ver_data_rating.a != $current_user->ID`在这一行。我想最好的建议是将**一种**数据类型同时转换为`ver_Data_rating.a`和`$current_user`。

例如，您可以使用以下任一方法进行测试。

*   `CAST(ver_data_rating.a AS INT) != CAST($current_user as INT)`

*   `CAST(ver_data_rating.a AS INT) <> = CAST($current_user as INT)`

* * *

## 更新：使用推荐的表架构和示例查询

看起来，您的查询连接方式确实存在一些问题。请看一下这个样本，让我们知道你的结果。我列出了两种从媒体表中获取特定用户/用户在线**未评级的方法。** `media records`变量用于存储用户 ID。

**[SQLFIDDLE 演示](http://sqlfiddle.com/#!2/ccc38/1)**

样本数据：

```
-- media table
ID  VALUE   REF     TYPE
1   300     15      image
2   100     25      art
3   500     35      cartoon
4   200     35      image
5   100     25      image
6   200     15      image
7   400     15      image
8   250     15      image
9   500     15      image
10  180     15      art

-- rating table
RID     MID     UID     SOMETHING
100     1       15      xyz
101     2       25      abc
102     5       25      efg
103     3       35      abc 
```

逐步查询：

```
set @user_id:=15;

-- find all media records for @user, type image
select * from media
where ref = @user_id
and type = 'image'
;

-- find all rated reords for @user
select mid from rating
 where uid = @user_id
;

-- media records that needs to be rated by @user
-- using IN clause
select * from media
where id not in 
(select mid from rating
 where uid = @user_id)
and type = 'image'
and ref = @user_id
;

-- media records that needs to be rated by @user
-- using INNER JOIN
select m.*
from media m
inner join (
select mid from rating
 where uid = @user_id) as x
on m.id <> x.mid
and m.type = 'image'
and m.ref = @user_id
; 
```

上述每一步查询的结果：

```
ID  VALUE   REF     TYPE
1   300     15      image
6   200     15      image
7   400     15      image
8   250     15      image
9   500     15      image 
```

用户 = 15 下评级表中的评级记录 ID，类型 = 图像

```
MID
1 
```

使用 IN 子句：用户 = 15，类型 = 图像的未分级媒体记录

```
ID  VALUE   REF     TYPE
6   200     15      image
7   400     15      image
8   250     15      image
9   500     15      image 
```

使用 INNER JOIN ：用户 = 15 的未分级媒体记录，类型 = 图像

```
ID  VALUE   REF     TYPE
6   200     15      image
7   400     15      image
8   250     15      image
9   500     15      image 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T16:45:56.860

左连接基本上是左外连接的缩写。您需要将 JOIN 条件之外的附加过滤器分隔到 WHERE 子句中。您的查询是从 ver_data_media 获取所有记录。除此之外，给我 ver_data_ratings 符合我的条件或没有 ver_data_ratings 否则。很难翻译成英文 :) 我也认为，您比较的列不正确或应该重命名。

尝试这个...

```
SELECT ver_data_media.id, ver_data_media.value, ver_data_media.ref, ver_data_media.type, ver_data_rating.a
FROM ver_data_media
LEFT OUTER JOIN ver_data_rating
ON ver_data_media.id= ver_data_rating.media_id
WHERE ver_data_media.type = 'image'
AND ver_data_rating.user_id <> $current_user->ID 
```

# java - 将 XML 数据插入 MySQL 数据库

> ID：13894036
> 
> 赞同：0
> 
> 时间：2012-12-15T16:34:22.887
> 
> 标签：java, mysql, xml, saxparser, taverna

我正在尝试将 XML 数据插入 MySQL 数据库。我编写的 SAX 解析器在测试时可以自行工作。但是，每当我尝试将记录插入数据库时​​，我都会收到 NullPointerException，即使我确保将值分配给为空的工作流元素。这是我的数据库表代码。包数据库；

```
//STEP 1\. Import required packages
import java.sql.*;
import java.io.*;
import org.w3c.dom.*;
import javax.xml.parsers.*;

public class Table {
// JDBC driver name and database URL
static final String JDBC_DRIVER = "com.mysql.jdbc.Driver";  
static final String DB_URL = "jdbc:mysql://baldwin.isri.cmu.edu/SciSIP";

//  Database credentials
static final String USER = "user";
static final String PASS = "pass";

public Table()  {

}

public void createTable()  {    
    Connection con = null;
    Statement stmt = null;
    try{
        //STEP 2: Register JDBC driver
        Class.forName("com.mysql.jdbc.Driver");

        //STEP 3: Open a connection
        System.out.println("Connecting to a selected database...");
        con = DriverManager.getConnection(DB_URL, USER, PASS);
        System.out.println("Connected database successfully...");

        //STEP 4: Execute a query
        System.out.println("Creating table in given database...");
        stmt = con.createStatement();

        String sql = "CREATE TABLE IF NOT EXISTS workflow" +
                "(id INTEGER not NULL AUTO_INCREMENT, " +
                " annotationBean VARCHAR(255), " + 
                " date VARCHAR(255), " + 
                " text VARCHAR(255), " +
                " identification VARCHAR(255), " +
                " PRIMARY KEY ( id ))"; 

        stmt.executeUpdate(sql);
        System.out.println("Created table in given database...");
    } catch(SQLException se) {
        //Handle errors for JDBC
        se.printStackTrace();
    } catch(Exception e) {
        //Handle errors for Class.forName
        e.printStackTrace();
    } finally {
        //finally block used to close resources
        try {
            if(stmt != null)
                con.close();
        } catch(SQLException se) {
        }// do nothing
        try {
            if(con != null)
                con.close();
        } catch(SQLException se) {
            se.printStackTrace();
        }//end finally try
    }//end try
    System.out.println("Goodbye!");
}

public void insertRecord(String annotationBean, String date, String text, String identification)  {
    Connection con = null;
    Statement stmt = null;
    try {
        Class.forName("com.mysql.jdbc.Driver"); //Load the driver           
        con = DriverManager.getConnection(DB_URL, USER, PASS);
        stmt = con.createStatement();
        String sql = "INSERT INTO `workflow` VALUES ('"+annotationBean+"', '"+date+"', '"+text+"', '"+identification+"')";
        stmt.execute(sql); //Insert a row
        System.out.println("Record Inserted into Database...");
    } catch(SQLException se) {
        //Handle errors for JDBC
        se.printStackTrace();
    } catch (Exception e) {
        e.printStackTrace();
    } finally {
        //finally block used to close resources
        try {
            if(stmt != null)
                con.close();
        } catch(SQLException se) {
        }// do nothing
        try {
            if(con != null)
                con.close();
        } catch(SQLException se) {
            se.printStackTrace();
        }//end finally try
    }//end try
} 
```

这是我的带有插入记录语句的解析器代码。

```
package parser;
import java.io.IOException;
import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;
import javax.xml.parsers.ParserConfigurationException;
import javax.xml.parsers.SAXParser;
import javax.xml.parsers.SAXParserFactory;
import org.xml.sax.Attributes;
import org.xml.sax.SAXException;
import org.xml.sax.helpers.DefaultHandler;
import database.Table;

public class XML_Parser_SAX extends DefaultHandler{
List aWorkflow;
private String tempVal;
//to maintain context
private Workflow tempWorkflow;

public XML_Parser_SAX(){
    aWorkflow = new ArrayList();
}

public void runExample() {
    parseDocument();
    printData();
}

private void parseDocument() {
    //get a factory
    SAXParserFactory spf = SAXParserFactory.newInstance();
    try {

        //get a new instance of parser
        SAXParser sp = spf.newSAXParser();

        //parse the file and also register this class for call backs
        sp.parse("workflow.xml", this);

    }catch(SAXException se) {
        se.printStackTrace();
    }catch(ParserConfigurationException pce) {
        pce.printStackTrace();
    }catch (IOException ie) {
        ie.printStackTrace();
    }
}

/**
 * Iterate through the list and print
 * the contents
 */
private void printData(){

    System.out.println("Number of Tasks in Workflow: '" + aWorkflow.size() + "'.");

    Iterator it = aWorkflow.iterator();
    while(it.hasNext()) {
        System.out.println(it.next().toString());
    }
}

//Event Handlers
public void startElement(String uri, String localName, String qName, Attributes attributes) throws SAXException {
    //reset
    tempVal = "";
    if(qName.equalsIgnoreCase("annotationBean")) {
        //create a new instance of employee
        tempWorkflow = new Workflow();
        tempWorkflow.setAnnotationBean(attributes.getValue("class"));
        System.out.println("class");
    }
}

public void characters(char[] ch, int start, int length) throws SAXException {
    tempVal = new String(ch,start,length);
}

public void endElement(String uri, String localName, String qName) throws SAXException {

    if(qName.equalsIgnoreCase("annotationBean")) {
        //add it to the list
        aWorkflow.add(tempWorkflow);
        System.out.println("annotationBean");

    } else if (qName.equalsIgnoreCase("date")) {
        if (tempVal != null)  {
            tempWorkflow.setDate(tempVal);
        }
        else  {
            tempWorkflow.setDate("null");
        }
        System.out.println(tempWorkflow.getDate());
    } else if (qName.equalsIgnoreCase("text")) {
        if (tempVal != null)  {
            tempWorkflow.setText(tempVal);
        }
        else  {
            tempWorkflow.setText("null");
        }
        System.out.println(tempWorkflow.getText());
    } else if (qName.equalsIgnoreCase("identification")) {
        if (tempVal != null)  {
            tempWorkflow.setIdentification(tempVal);
        }
        else  {
            tempWorkflow.setIdentification("null");
        }
        System.out.println(tempWorkflow.getIdentification());
    }
    Table t = new Table();
    //t.createTable();
    t.insertRecord(tempWorkflow.getAnnotationBean(), tempWorkflow.getDate(), tempWorkflow.getText(), tempWorkflow.getIdentification());
}

public static void main(String[] args){
    XML_Parser_SAX parse = new XML_Parser_SAX();
    parse.runExample();
}

} 
```

有人可以告诉我为什么这给了我 NullPointerException 吗？提前致谢！！！

这是堆栈跟踪：

```
Exception in thread "main" java.lang.NullPointerException
at parser.XML_Parser_SAX.endElement(XML_Parser_SAX.java:126)
at     com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.endElement(AbstractSAXParser.java:606)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanEndElement(XMLDocumentFragmentScannerImpl.java:1741)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2898)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:607)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:488)
at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:835)
at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:764)
at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:123)
at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1210)
at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:568)
at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl.parse(SAXParserImpl.java:302)
at javax.xml.parsers.SAXParser.parse(SAXParser.java:274)
at parser.XML_Parser_SAX.parseDocument(XML_Parser_SAX.java:49)
at parser.XML_Parser_SAX.runExample(XML_Parser_SAX.java:35)
at parser.XML_Parser_SAX.main(XML_Parser_SAX.java:131) 
```

是的，workflow.xml 存在。下面是它的副本。

```
<workflow xmlns="http://taverna.sf.net/2008/xml/t2flow" version="1" producedBy="taverna-      2.4.0"><dataflow id="8781d5f4-d0ba-48a8-a1d1-14281bd8a917" role="top"><name>Hello_World</name>       <inputPorts /><outputPorts><port><name>greeting</name><annotations /></port></outputPorts>       <processors><processor><name>hello</name><inputPorts /><outputPorts><port><name>value</name>       <depth>0</depth><granularDepth>0</granularDepth></port></outputPorts><annotations />       <activities><activity><raven><group>net.sf.taverna.t2.activities</group>      <artifact>stringconstant-activity</artifact><version>1.4</version></raven>     <class>net.sf.taverna.t2.activities.stringconstant.StringConstantActivity</class><inputMap />    <outputMap><map from="value" to="value" /></outputMap><configBean encoding="xstream">    <net.sf.taverna.t2.activities.stringconstant.StringConstantConfigurationBean xmlns="">
  <value>Hello, World!</value>
 </net.sf.taverna.t2.activities.stringconstant.StringConstantConfigurationBean></configBean>    <annotations /></activity></activities><dispatchStack><dispatchLayer><raven>        <group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact>        <version>1.4</version></raven>       <class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Parallelize</class>        <configBean encoding="xstream">        <net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.ParallelizeConfig xmlns="">
  <maxJobs>1</maxJobs>
    </net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.ParallelizeConfig>    </configBean></dispatchLayer><dispatchLayer><raven><group>net.sf.taverna.t2.core</group>    <artifact>workflowmodel-impl</artifact><version>1.4</version></raven>    <class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.ErrorBounce</class>    <configBean encoding="xstream"><null xmlns="" /></configBean></dispatchLayer><dispatchLayer>    <raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact>    <version>1.4</version></raven>    <class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Failover</class><configBean     encoding="xstream"><null xmlns="" /></configBean></dispatchLayer><dispatchLayer><raven>    <group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact>    <version>1.4</version></raven>    <class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Retry</class><configBean     encoding="xstream"><net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.RetryConfig     xmlns="">
  <backoffFactor>1.0</backoffFactor>
  <initialDelay>1000</initialDelay>
  <maxDelay>5000</maxDelay>
  <maxRetries>0</maxRetries>
</net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.RetryConfig></configBean>    </dispatchLayer><dispatchLayer><raven><group>net.sf.taverna.t2.core</group>        <artifact>workflowmodel-impl</artifact><version>1.4</version></raven>        <class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Invoke</class><configBean         encoding="xstream"><null xmlns="" /></configBean></dispatchLayer></dispatchStack>       <iterationStrategyStack><iteration><strategy /></iteration></iterationStrategyStack>         </processor></processors><conditions /><datalinks><datalink><sink type="dataflow">        <port>greeting</port></sink><source type="processor"><processor>hello</processor>       <port>value</port></source></datalink></datalinks><annotations><annotation_chain         encoding="xstream"><net.sf.taverna.t2.annotation.AnnotationChainImpl xmlns="">
  <annotationAssertions>
     <net.sf.taverna.t2.annotation.AnnotationAssertionImpl>
       <annotationBean class="net.sf.taverna.t2.annotation.annotationbeans.Author">
        <text>Stian Soiland-Reyes</text>
       </annotationBean>
       <date>2012-01-03 15:10:48.73 GMT</date>
      <creators />
       <curationEventList />
     </net.sf.taverna.t2.annotation.AnnotationAssertionImpl>
  </annotationAssertions>
 </net.sf.taverna.t2.annotation.AnnotationChainImpl></annotation_chain><annotation_chain     encoding="xstream"><net.sf.taverna.t2.annotation.AnnotationChainImpl xmlns="">
   <annotationAssertions>
     <net.sf.taverna.t2.annotation.AnnotationAssertionImpl>
      <annotationBean      class="net.sf.taverna.t2.annotation.annotationbeans.DescriptiveTitle">
         <text>Hello World</text>
       </annotationBean>
           <date>2012-01-03 15:10:54.167 GMT</date>
       <creators />
  <curationEventList />
     </net.sf.taverna.t2.annotation.AnnotationAssertionImpl>
  </annotationAssertions>
     </net.sf.taverna.t2.annotation.AnnotationChainImpl></annotation_chain>            <annotation_chain_2_2 encoding="xstream"><net.sf.taverna.t2.annotation.AnnotationChainImpl        xmlns="">
  <annotationAssertions>
    <net.sf.taverna.t2.annotation.AnnotationAssertionImpl>
      <annotationBean     class="net.sf.taverna.t2.annotation.annotationbeans.IdentificationAssertion">
        <identification>8781d5f4-d0ba-48a8-a1d1-14281bd8a917</identification>
      </annotationBean>
      <date>2012-01-03 15:12:21.684 GMT</date>
  <creators />
  <curationEventList />
</net.sf.taverna.t2.annotation.AnnotationAssertionImpl> 
```

```
<text>One of the simplest workflows possible. No workflow input ports, a         single          workflow output port "greeting",  outputting "Hello, world!" as produced by the        String          Constant "hello".</text>
                </annotationBean>
            <date>2012-01-03 15:12:15.643 GMT</date>
           <creators />
           <curationEventList />
        </net.sf.taverna.t2.annotation.AnnotationAssertionImpl>
      </annotationAssertions>
       </net.sf.taverna.t2.annotation.AnnotationChainImpl></annotation_chain></annotations >         
 </dataflow></workflow> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T18:03:27.520

你`tempWorkflow`的设置为空。

您`startElement`只有在获得 startTag 时才构建`annotationBean`tempWorkflow，但它会在任何结束标签上执行失败的元素。所以当它得到`</configBean>`它会失败。

你需要有相应的开始和结束动作=你必须添加更多的开始动作。而且您还必须检查所有内容是否在正确的位置正确初始化。

如果您输入日志语句（例如 log4J），这将有很大帮助，例如：

```
LOG.debug("start-tag tempWorkFlow"); 
```

这将允许您准确计算何时调用代码。

# django - Django内部连接在同一张表上

> ID：13894042
> 
> 赞同：2
> 
> 时间：2012-12-15T16:35:02.427
> 
> 标签：django, group-by, inner-join, annotate

提前感谢您的帮助。

我有一个 SQL 查询，一个不太喜欢 Django 的开发人员要求我演示如何使用该框架。

```
SELECT h.cuh_cur_code_inc, h.cuh_cur_code_out, h.cuh_rate, h.cuh_date
FROM
(
    SELECT cuh_cur_code_inc, cuh_cur_code_out, MAX(cuh_id) as cuh_id_max
    FROM cur_hist
    WHERE cuh_cur_code_out = 'GBP'
    GROUP BY cuh_cur_code_inc, cuh_cur_code_out
) latest
INNER JOIN cur_hist h ON latest.cuh_id_max = h.cuh_id

+------------------+------------------+----------+---------------------+
| cuh_cur_code_inc | cuh_cur_code_out | cuh_rate | cuh_date            |
+------------------+------------------+----------+---------------------+
| EUR              | GBP              |   0.8126 | 2012-12-03 06:00:28 |
| USD              | GBP              |   0.6241 | 2012-12-02 06:00:25 |
+------------------+------------------+----------+---------------------+ 
```

以上是一个示例结果表。我可以通过 2 次调用来实现上述结果（这显然并不难），但我似乎无法重新创建内部连接。

```
histories = CurHist.objects.filter(cuh_cur_code_out='GBP') \
                               .values('cuh_cur_code_inc', 'cuh_cur_code_out') \
                               .annotate(cuh_id_max=Max('cuh_id'))

histories = CurHist.objects.filter(cuh_id__in=[x['cuh_id_max'] for x in histories]).order_by('-cuh_rate') 
```

该模型如下所示：

```
class CurHist(models.Model):
    cuh_id = models.IntegerField(primary_key=True)
    cuh_cur_code_inc = models.CharField(max_length=9)
    cuh_cur_code_out = models.CharField(max_length=9)
    cuh_rate = models.FloatField(null=True, blank=True)
    cuh_date = models.DateTimeField( 
```

我知道 Django 在对象管理器上的额外方法，但不确定在这种情况下我将如何使用它。这甚至是正确的方法还是我试图通过一个圆孔安装一个方形钉？

任何帮助，将不胜感激！

# css - 如何将 Compass Animation 用于 Compass SCSS 框架？

> ID：13894045
> 
> 赞同：3
> 
> 时间：2012-12-15T16:35:18.003
> 
> 标签：css, sass, compass-sass

我正在尝试使用[指南针动画](https://github.com/ericam/compass-animation)，但它似乎不起作用。

以下是我的文件的设置方式：

**配置文件**

```
# Require any additional compass plugins here.
require 'animation' 
```

**屏幕.scss**

```
@import "compass";
@import "compass/reset";
@import "animation";
@import "animation/animate";
@import "animation/animate/classes";

.widget:hover {
    @include animation(flipOutY);
    background:pink;
}

body {
    background:red;
} 
```

**索引.html**

```
<a href="#" class="widget">Click Me</a> 
```

这是我的 CSS 的输出：

```
@-moz-keyframes flipOutY {
  /* line 79, ../../../../../../../../Library/Ruby/Gems/1.8/gems/animation-0.1.alpha.3/stylesheets/animation/animate/_flippers.scss */
  0% {
    -moz-transform: perspective(400px) rotateY(0deg);
    transform: perspective(400px) rotateY(0deg);
    filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=100);
    opacity: 1; }

  /* line 83, ../../../../../../../../Library/Ruby/Gems/1.8/gems/animation-0.1.alpha.3/stylesheets/animation/animate/_flippers.scss */
  100% {
    -moz-transform: perspective(400px) rotateY(90deg);
    transform: perspective(400px) rotateY(90deg);
    filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=0);
    opacity: 0; } }

@-webkit-keyframes flipOutY {
  /* line 79, ../../../../../../../../Library/Ruby/Gems/1.8/gems/animation-0.1.alpha.3/stylesheets/animation/animate/_flippers.scss */
  0% {
    -webkit-transform: perspective(400px) rotateY(0deg);
    transform: perspective(400px) rotateY(0deg);
    filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=100);
    opacity: 1; }

  /* line 83, ../../../../../../../../Library/Ruby/Gems/1.8/gems/animation-0.1.alpha.3/stylesheets/animation/animate/_flippers.scss */
  100% {
    -webkit-transform: perspective(400px) rotateY(90deg);
    transform: perspective(400px) rotateY(90deg);
    filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=0);
    opacity: 0; } }

@-o-keyframes flipOutY {
  /* line 79, ../../../../../../../../Library/Ruby/Gems/1.8/gems/animation-0.1.alpha.3/stylesheets/animation/animate/_flippers.scss */
  0% {
    -o-transform: perspective(400px) rotateY(0deg);
    transform: perspective(400px) rotateY(0deg);
    filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=100);
    opacity: 1; }

  /* line 83, ../../../../../../../../Library/Ruby/Gems/1.8/gems/animation-0.1.alpha.3/stylesheets/animation/animate/_flippers.scss */
  100% {
    -o-transform: perspective(400px) rotateY(90deg);
    transform: perspective(400px) rotateY(90deg);
    filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=0);
    opacity: 0; } }

@-ms-keyframes flipOutY {
  /* line 79, ../../../../../../../../Library/Ruby/Gems/1.8/gems/animation-0.1.alpha.3/stylesheets/animation/animate/_flippers.scss */
  0% {
    -ms-transform: perspective(400px) rotateY(0deg);
    transform: perspective(400px) rotateY(0deg);
    filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=100);
    opacity: 1; }

  /* line 83, ../../../../../../../../Library/Ruby/Gems/1.8/gems/animation-0.1.alpha.3/stylesheets/animation/animate/_flippers.scss */
  100% {
    -ms-transform: perspective(400px) rotateY(90deg);
    transform: perspective(400px) rotateY(90deg);
    filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=0);
    opacity: 0; } }

@keyframes flipOutY {
  /* line 79, ../../../../../../../../Library/Ruby/Gems/1.8/gems/animation-0.1.alpha.3/stylesheets/animation/animate/_flippers.scss */
  0% {
    transform: perspective(400px) rotateY(0deg);
    filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=100);
    opacity: 1; }

  /* line 83, ../../../../../../../../Library/Ruby/Gems/1.8/gems/animation-0.1.alpha.3/stylesheets/animation/animate/_flippers.scss */
  100% {
    transform: perspective(400px) rotateY(90deg);
    filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=0);
    opacity: 0; } }

.widget:hover {
-webkit-animation: flipOutY;
-moz-animation: flipOutY;
-ms-animation: flipOutY;
-o-animation: flipOutY;
animation: flipOutY;
background: pink;
} 
```

但是，它似乎不起作用。有人可以解释我做错了什么。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T23:32:55.020

我认为需要一个持续时间才能使其起作用。这是自述文件中的一个错误。

（您还应该注意，Compass Animation 并没有真正得到维护——因为它正在进入 Compass Core 0.13 版本。我建议使用 Compass 的 master 分支和[Compass-Animate](https://github.com/ericam/compass-animate)。这些维护得更好。）

# javascript - 在 Rails 上提交 JQuery 对话框模式表单

> ID：13894046
> 
> 赞同：1
> 
> 时间：2012-12-15T16:35:24.960
> 
> 标签：javascript, jquery, ruby-on-rails, ruby, jquery-ui

我想在 JQuery Dialog 中呈现一个模态表单。我利用了在生成 Scaffold 期间创建的现有表单。现在，我面临一些通过对话框按钮而不是 html 提交表单的问题。

单击按钮后，下面的表单将在 JQuery 对话框中呈现。（由脚手架生成）

```
<%= form_for(@user, :remote=>true) do |f| %>
  <% if @user.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@user.errors.count, "error") %> prohibited this user from being saved:</h2>

      <ul>
      <% @user.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :user_name %><br />
    <%= f.text_field :user_name %>
  </div>
  <div class="field">
    <%= f.label :email %><br />
    <%= f.text_field :email %>
  </div>
  <div class="field">
    <%= f.label :password %><br />
    <%= f.text_field :password %>
  </div>
  <div class="field">
    <%= f.label :account_type %><br />
    <%= f.text_field :account_type %>
  </div>
  <div id="submit-button" class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

现在，我希望将提交按钮更改为 JQuery 函数。以下代码用于 JQuery 中的按钮。

```
 <div id="submit-button" class="actions">
    <%= f.submit %>
  </div> 
```

这是模态表单的 Jquery 代码。

```
 $( "#form" ).dialog({
        autoOpen: false,
        height: 400,
        width: 350,
        modal: true,
        closeOnEscape: true,
        resizable:false,
        buttons: {
            "Create an account": function() {
                    $("#form").submit();
                    $( this ).dialog( "close" );
            },
            Cancel: function() {
                $( this ).dialog( "close" );
            }
        }
    }); 
```

所以本质上是从

```
 <div id="submit-button" class="actions">
    <%= f.submit %>
  </div> 
```

类似于

```
 $("#form").submit(); 
```

我在这样做时遇到了一些问题，我认为这可能与引用有关，但我不知道如何更改它。任何意见，将不胜感激。

# javascript - 如何在谷歌应用脚 本中编写 if/and 语句

> ID：13894057
> 
> 赞同：3
> 
> 时间：2012-12-15T16:36:51.087
> 
> 标签：javascript, google-apps-script

我正在尝试基于两个不同的下拉列表编写 if/and 语句。是否可以用下面的逻辑写一些东西？“if &&”语句不能正常工作，但可以与单个“if”语句一起正常工作。我知道这是一些代码，但这是我可以准确显示正在发生的事情的唯一方法。

```
 function doGet(e) {
  var app = UiApp.createApplication();

  var containerSizeList = app.createListBox().setId('containerSizeList').setName('containerSizeList');
  containerSizeList.addItem("20ft Long");
  containerSizeList.addItem("40ft Long");

  var loadingStyleList = app.createListBox().setId('loadingStyleList').setName('loadingStyleList');
  loadingStyleList.addItem("On Pallets");
  loadingStyleList.addItem("Floor Loaded");

    var tenPalletPanel = app.createHorizontalPanel().setId('tenPalletPanel').setVisible(true);
    var tenPalletLabel = app.createLabel('10 Pallets Available').setId('tenPalletLabel');
    var twentyPalletPanel = app.createHorizontalPanel().setId('twentyPalletPanel').setVisible(false);
    var twentyPalletLabel = app.createLabel('20 Pallets Available').setId('twentyPalletLabel');
    var loadingNotePanel = app.createHorizontalPanel().setId('loadingNotePanel').setVisible(false);
    var loadingNoteLabel = app.createLabel('Note: Only certain products may be floor loaded')
    .setId('loadingNoteLabel');

    var containerGrid = app.createGrid(1, 2);
    containerGrid.setWidget(0, 0, containerSizeList);
    containerGrid.setWidget(0, 1, loadingStyleList);

    var handlerJ = app.createServerClickHandler('palletChangeMe'); 
    containerSizeList.addChangeHandler(handlerJ);
    loadingStyleList.addChangeHandler(handlerJ);
    handlerJ.addCallbackElement(containerGrid);       

  app.add(containerGrid);
  app.add(tenPalletPanel);
  tenPalletPanel.add(tenPalletLabel);
  app.add(twentyPalletPanel);
  twentyPalletPanel.add(twentyPalletLabel);
  app.add(loadingNotePanel);
  loadingNotePanel.add(loadingNoteLabel);

  return app;
}

function palletChangeMe(e){
  var app = UiApp.getActiveApplication();

  if (e.parameter.containerSizeList == "40ft Long" && e.parameter.loadingStyleList == "On Pallets"){
    app.getElementById('tenPalletPanel').setVisible(false);
    app.getElementById('twentyPalletPanel').setVisible(true);
    app.getElementById('loadingNotePanel').setVisible(false);
}

  return app;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-15T16:38:32.163

代替：

```
if (e.parameter.containerSizeList == "20ft Long"){
  and if (e.parameter.loadingStyleList == "On Pallets"){ 
```

应该：

```
if (e.parameter.containerSizeList == "20ft Long" && e.parameter.loadingStyleList == "On Pallets"){ 
```

注意：`&&`表示逻辑与。[在 MDN阅读](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Logical_Operators)有关逻辑运算符的更多信息。

并且您需要删除`}`每个 if 语句中的最后一个，因此最终代码将如下所示：

```
if (e.parameter.containerSizeList == "20ft Long" && e.parameter.loadingStyleList == "On Pallets"){
    app.getElementById('tenPalletPanel').setVisible(true);
    app.getElementById('twentyPalletPanel').setVisible(false);
}

if (e.parameter.containerSizeList == "40ft Long" && e.parameter.loadingStyleList == "On Pallets"){
    app.getElementById('tenPalletPanel').setVisible(false);
    app.getElementById('twentyPalletPanel').setVisible(true);
} 
```

# wordpress - 插入/更新 mysql 表行需要 Wordpress 中的简单 UI

> ID：13894059
> 
> 赞同：-1
> 
> 时间：2012-12-15T16:36:52.123
> 
> 标签：wordpress, phpmyadmin, insert-update

我想从 wordpress 中更新或插入 mysql 表记录。基本上同样需要一个表格。请任何人指导我如何做到这一点。

虽然我知道我可以做同样的 phpmyadmin，但我不想这样做，因为我每次都必须打开 phpmyadmin，而且很容易从 wordpress 用户控制台完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T16:57:23.783

据我了解，您想在 mysql 中的一些 Not-wordpress 表上做一些 DML。因此，如果您是唯一可以打开该 wordpress 的人，尽管在这种情况下，我建议您制作一个主题选项页面，然后将其用于 SQL，您只需要包含一些文本区域 {name="sql_text"} 和保存按钮 {type="submit" name="danger"}，然后执行以下操作：

```
if(isset($_POST['danger'])) {
     $sql_text = $_POST['sql_text'];//dont use double quotation in your code,unless to use some $variables... im serious
     $query = mysql_query($sql_text);
} 
```

在您的“sql_text”文本区域字段中，您可能会这样写：

```
INSERT INTO ".$wpdb->yourTableNameWithoutPrefix." Values('your','') 
```

请记住，不要让最后一段代码的多彩外观欺骗了您。

同样，像这样，您的网站很容易受到攻击。

萨拉姆

# c# - Dwolla API 注册错误

> ID：13894060
> 
> 赞同：1
> 
> 时间：2012-12-15T16:36:57.420
> 
> 标签：c#, c#-4.0, dwolla

我正在尝试使用 Dwolla API 启动并运行，但是当我尝试注册新用户时，它返回 500 内部服务器错误并且没有错误消息，这令人沮丧，因为它没有给我任何东西。

这是代码：

```
public static bool Register(ObjectId userId, User user, out string message) {
            var dwollaKey = ConfigurationManager.AppSettings["DwollaKey"].ToString();
            var dwollaSecret = ConfigurationManager.AppSettings["DwollaSecret"].ToString();

            //post register to dwolla api.
            var request = new DwollaRegisterRequest {
                client_id = dwollaKey,
                client_secret = dwollaSecret,
                email = user.DwollaEmailAddress,
                password = user.DwollaPassword,
                pin = user.DwollaPin,
                firstName = user.FirstName,
                lastName = user.LastName,
                address = user.Address,
                city = user.City,
                state = user.State,
                zip = user.ZipCode,
                type = "Personal",
                acceptTerms = "true"
            };
            var requestJson = JsonConvert.SerializeObject(request);
            var url = "https://www.dwolla.com/oauth/rest/register/";
            var responseJson = WebRequestHelper.PostString(url, requestJson);
            var response = JsonConvert.DeserializeObject<DwollaRegisterResult>(responseJson);
            message = response.Message;

            //if success, update user with dwolla info.
            if (response.Success) {
                //save user.
                var existingUser = UserService.Get(userId);
                existingUser.DwollaId = response.Response.Id;
                existingUser.DwollaEmailAddress = user.DwollaEmailAddress;
                existingUser.DwollaPassword = user.DwollaPassword;
                existingUser.DwollaPin = user.DwollaPin;
                existingUser.FirstName = user.FirstName;
                existingUser.LastName = user.LastName;
                existingUser.Address = user.Address;
                existingUser.City = user.City;
                existingUser.State = user.State;
                existingUser.ZipCode = user.ZipCode;
                UserService.Save(existingUser);
            }
            return response.Success;
        }

public static string PostString(string url, string requestBody) {
            using (WebClient client = new WebClient()) {
                return client.UploadString(url, "POST", requestBody);
            }
        } 
```

我将请求发布为 JSON 字符串，因为我在另一个线程中看到有人说这就是 API 所期望的，但是我也尝试发布 NameValueCollection 但也出错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T17:57:07.530

我忘记将请求的 Content-Type 设置为 application/json。

```
public static string PostString(string url, string requestBody) {
            using (WebClient client = new WebClient()) {
                client.Headers.Add("Content-Type", "application/json");
                return client.UploadString(url, "POST", requestBody);
            }
        } 
```

# javascript - 使用 jQuery Validation 插件进行数据类型验证

> ID：13894063
> 
> 赞同：0
> 
> 时间：2012-12-15T16:37:01.547
> 
> 标签：javascript, jquery, jquery-validate

我将如何验证表单输入（文本类型）元素的数据类型？例如，当我提交表单时，我只想有浮点数。

```
<form method="post">
<input type="text" name="user-id"/>
<input type="submit"/>
</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T16:51:38.197

**演示：http: [//jsfiddle.net/ULZaz/1/](http://jsfiddle.net/ULZaz/1/)**

```
$(document).ready(function() {
    $('form').validate({
        rules: {
            'user-name': {
                required: true,
                number: true
            }
        },
        messages: {
             'user-name': {
                 required: "this is the custom message for required",
                 number: "this is the custom message for number"
             }
        }
    })
});​ 
```

[**文档**](http://docs.jquery.com/Plugins/Validation)

# mysql - mysql - OR 运算符不使用索引

> ID：13894064
> 
> 赞同：4
> 
> 时间：2012-12-15T16:37:02.880
> 
> 标签：mysql, sql, explain

我有一个简单的邀请表：

```
CREATE TABLE `invitation` (
  `invitation_id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `inviter_id` int(10) unsigned NOT NULL,
  `invitee_id` int(10) unsigned NOT NULL,
  PRIMARY KEY (`invitation_id`),
  UNIQUE KEY `invitee_inviter_idx` (`invitee_id`,`inviter_id`)
) 
```

我想选择邀请人 70 对被邀请人 62 的邀请，反之亦然：

```
EXPLAIN SELECT * FROM `invitation` WHERE 
(invitee_id = 70 AND inviter_id = 62) OR (invitee_id = 62 AND inviter_id = 70) 
```

但是这个查询是 ALL 类型的，并且不使用受邀者_邀请者_idx。请告诉我这里有什么问题？

谢谢！

==EDIT== 抱歉，我对架构有误，它还有一个字段：request_ts。这次查询计划是 ALL。

```
 CREATE TABLE `invitation` (
      `invitation_id` int(10) unsigned NOT NULL AUTO_INCREMENT,
      `inviter_id` int(10) unsigned NOT NULL,
      `invitee_id` int(10) unsigned NOT NULL,
      `request_ts` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP, 
      PRIMARY KEY (`invitation_id`),
      UNIQUE KEY `invitee_inviter_idx` (`invitee_id`,`inviter_id`)
    ) 
```

这是我的解释结果：

```
id  select_type table   type    possible_keys   key key_len ref rows    Extra
1   SIMPLE  invitation  ALL invitee_inviter_idx \N  \N      \N  1   Using where 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-15T16:46:53.760

您的选择不使用索引的原因至少有 3 个

1) 您使用了 a `select *`，其中包括不在索引中的项目（即`invitation_id`）。这意味着如果它使用了索引，那么它就必须在数据库中查找行来获取`invitation_id`值。如果您添加`invitation_id`到索引中，它将使用索引。如果你做了 a `select`of just `invitee_id, inviter_id`，它就会使用索引。

2) 查询优化器认为只扫描表而不是扫描索引范围会更好。当优化器试图决定全表扫描或部分索引扫描时，它不会为您的确切查询执行此操作 - 它需要一个总体上运行良好的计划。一个可能会再次运行。`invitee_id,inviter_id` `(62,70)`从到扫描`(70,62)`可能只有 8 个索引条目，但如果从 50k 项中随机挑选，则平均距离约为 17k 项。因此，平均而言，单个查询将访问 1/3 的索引（即，将其拉入内存），然后访问该行所在的页面（参见 #1）将其拉入内存。您的行是如此之小，仅访问一项可能会拉入 680 行（8k 页乘 12 字节，用于 3 个 32 位 #'s），这是表的 1/70 - 执行 100 次查询，并且可能您已将整个索引拉入内存和整个表 - 通过扫描表花费更长的时间并使用 40% 更少的内存来保存其他表的位更有意义。在某些时候（似乎是 65k 行）它不再有意义。

3）您的问题是什么：您使用了 OR。OR 表达式不能用于在索引中查找某些内容 - 也就是说，您不能查找 62 或 70。相反，它会生成一个范围查找`(62,70)`，然后扫描以到达`(70,62)`（请参阅#2 为什么这可以坏）。

您问“这里出了什么问题”-这是您使用了 OR，它无法扩展。您不仅需要避免使用 ALL 类型，还需要避免使用大类型 RANGES。

我在其他 SQL 引擎上看到过同样的问题，我使用的解决方案是 UNION ALL。

就像是

```
SELECT * FROM `invitation` WHERE 
    (invitee_id = 70 AND inviter_id = 62)
UNION ALL
SELECT  * FROM `invitation` WHERE
    (invitee_id = 62 AND inviter_id = 70) 
```

这将使它作为两个查询完成并合并结果而不检查重复项。

这在内存使用上要轻得多，而且速度要快得多——只需要索引的几页和表中的两页，每次查找都需要 O(log(N))。这是因为它现在是 const 类型 - 您的目标是消除 ALL，但切换到 RANGE 几乎与仅获取两行一样糟糕。扫描整个表是 O(N)，扫描索引的范围也是 O(N)，因为 O(1/3*N) 是 O(N)。换句话说，它不会扩展。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-15T17:45:05.660

您只需要在表中获取足够的行。MySQL 将对小表进行全表扫描，因为它足够便宜。

我的示例将 65k 行放入表中，它将使用索引。

[http://sqlfiddle.com/#!2/63079/1](http://sqlfiddle.com/#!2/63079/1)

# java - 以圆形模式计算坐标？

> ID：13894078
> 
> 赞同：1
> 
> 时间：2012-12-15T16:39:36.917
> 
> 标签：java, math, formula

在 Java 中，我正在尝试为游戏中的城镇经理创建一个网格系统。我希望它从一个中心点填充，并以圆形图案（甚至菱形图案）的形式出现。有没有我可以用来帮助使这更容易的公式？

例如，我希望能够输入一个数字，并获得网格的 X 和 Y 坐标。例如

```
If i input 0, it will give me (0,0)
If i input 1, it will give me (0,1)
2 -> (1,0)
3 -> (0,-1)
4 -> (-1,0)
5 -> (0,2)
6 -> (1,1)
7 -> (2,0)
8 -> (1,-1)
9 -> (0,-2)
10 -> (-1,-1)
11 -> (-2,0)
12 -> (-1,1)
13 -> (0,3)
etc 
```

我只是不知道从哪里开始。

在此先感谢，丹

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T18:11:48.577

[当您可以使用...](http://www.youtube.com/watch?v=gENVB6tjq_M)[**数学**](http://www.youtube.com/watch?v=gENVB6tjq_M)时，为什么要从 0 一直迭代到*n*来计算坐标！[](http://www.youtube.com/watch?v=gENVB6tjq_M)

 **这是您的螺旋访问的正方形序列：

```
 13
      14  5 24
   15  6  1 12 23
16  7  2  0  4 11 22
   17  8  3 10 21
      18  9 20
         19 
```

这可以分为“环”。首先是数字 0。然后是一个大小为 4 的环：

```
 1
       2     4
          3 
```

然后是第二个 8 号环：

```
 5
       6    12
    7          11
       8    10
          9 
```

然后是第三个 12 号的环：

```
 13
      14    24
   15          23
16                22
   17          21
      18    20
         19 
```

等等。第*r*环的大小为 4 *r*，包含从 2( *r* − 1) *r* + 1 到 2 *r* ( *r* + 1) 的数字。

那么哪个环包含数字*n*？嗯，它是最小的*r*使得 2 *r* ( *r* + 1) ≥ *n*，可以使用二次公式找到：

> 2 *r* ( *r* + 1) ≥ *n*
> ∴ 2 *r* ² + 2 *r* − *n* ≥ 0
> ∴ *r* ≥ (−2 + √(4 + 8 *n* )) / 4
> ∴ *r* ≥ ½(−1 + √(1 + 2 *n* ))

所以我们想要的*r是*

```
 r = ceil(0.5 * (−1.0 + sqrt(1.0 + 2.0 * n))) 
```

这足以计算您想要的坐标：

```
public spiral_coords(int n) {
    if (n == 0) { 
        return Coords(0, 0);
    }
    // r = ring number.
    int r = (int)(ceil(0.5 * (-1.0 + sqrt(1.0 + 2.0 * n))));
    // n is the k-th number in ring r.
    int k = n - 2 * (r - 1) * r - 1;
    // n is the j-th number on its side of the ring. 
    int j = k % r;
    if (k < r) {
        return Coords(-j, r - j);
    } else if (k < 2 * r) {
        return Coords(-r - j, -j);
    } else if (k < 3 * r) {
        return Coords(j, -r - j);
    } else {
        return Coords(r - j, j);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T16:50:36.517

你可以做

```
for (int n=1; n < max; n++) {
    for(int x = -n; x < n; x++)
        process(x, n);
    for(int y = n; y > -n;y--)
        process(n, y);
    for(int x = n; x > -n;x--)
        process(x, -n);
    for(int y = -n; y < n;y++)
        process(-n, y);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T17:42:10.603

这将图案视为一系列同心壳。首先，您快速枚举内壳。然后穿过外壳，从右手边开始逆时针方向走。

```
int tot = 1, r=0; // r is "radius", tot is # of points so far
// since each "shell" has 4r points, quickly find the desired radius
while(tot + 4*r < i){tot += 4*r; r++;}
// enumerate the boundary counter-clockwise
int x = r; y = 0, j;
for(j=0; j<r && tot<i; j++, x--, y++, tot++);
for(j=0; j<r && tot<i; j++, x--, y--, tot++);
for(j=0; j<r && tot<i; j++, x++, y--, tot++);
for(j=0; j<r && tot<i; j++, x++, y++, tot++);
// answer in x,y 
```**

# python - Py2exe - 运行后窗口立即消失

> ID：13894083
> 
> 赞同：3
> 
> 时间：2012-12-15T16:39:59.053
> 
> 标签：python, windows, user-interface, executable, py2exe

我用py2exe从python gui应用程序构建了windows可执行文件。我的 setup.py 文件：

```
from distutils.core import setup
    import py2exe
    setup(windows=[{"script":"main.py"}],options={"py2exe":{"includes":["sip","PyQt4.QtGui"]}})
```

当我运行 py2exe 生成的 exe 时，窗口出现并立即消失。我不知道出了什么问题。你能给我一些建议吗？

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-17T09:59:38.710

我遇到了同样的问题，我已经按照此评论中的说明解决了

[https://stackoverflow.com/a/17999421/1891624](https://stackoverflow.com/a/17999421/1891624)

只需在我的 setup.py 中添加此代码

```
import py2exe
py2exe.build_exe.py2exe.old_prepare = py2exe.build_exe.py2exe.plat_prepare
def new_prep(self):
  self.old_prepare()
  from _tkinter import TK_VERSION, TCL_VERSION
  self.dlls_in_exedir.append('tcl{0}.dll'.format(TCL_VERSION.replace('.','')))
  self.dlls_in_exedir.append('tk{0}.dll'.format(TK_VERSION.replace('.','')))
py2exe.build_exe.py2exe.plat_prepare = new_prep 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-21T07:38:27.063

在代码末尾添加这一行

```
input('') 
```

这将阻止窗口关闭，直到您按下回车键

# objective-c - 当部署更改为 iOS 5.0 时，iOS 6 项目给出 @synthesize 错误

> ID：13894084
> 
> 赞同：-2
> 
> 时间：2012-12-15T16:40:01.567
> 
> 标签：objective-c, ios, ios6

当我使用 iOS 5.0 在较旧的 xCode 上运行我的 iOS 6 项目时。它在执行项目时发出警告和火灾异常。

```
Property 'window' requires method 'window' to be defined - use @synthesize , @dynamic or provide a method implementation 
```

它背后的科学是什么？为什么我需要在 5.0 中显式添加 @synthesize。虽然它在 iOS 6 中运行良好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T16:44:24.000

这与 iOS 6 或 iOS 5 无关。这与 Xcode 中使用的编译器版本有关。最新版本的 Xcode 中使用的最新版本的编译器支持旧版本的 Objective-C 编译器中没有的许多新功能。其中一项功能不再需要明确的`@synthesize`声明。一旦你利用了这些新特性，你就不能使用旧版本的编译器来编译你的代码。

所以现在问题变成了——你为什么要在旧版本的 Xcode 中构建这个项目？你的目标是什么？为什么不使用最新的 Xcode，只需将项目的 Deployment Target 更改为 iOS 5.0 并将 Base SDK 保留为“最新”。

# c# - 使用 System.ComponentModel

> ID：13894088
> 
> 赞同：6
> 
> 时间：2012-12-15T16:40:16.540
> 
> 标签：c#, components, system.componentmodel

我在理解 C# 中容器/组件模型如何相互交互时遇到了一些困难。我知道组件如何包含一个站点对象，该对象具有有关容器和组件的信息。但是，假设我有以下代码：

```
using System;
using System.ComponentModel;

public class Entity : Container {
    public string Foo = "Bar";
}

public class Position : Component {
    public int X, Y, Z;    
    public Position(int X, int Y, int Z){
        this.X = X;
        this.Y = Y;
        this.Z = Z;
    }
}

public class Program {

    public static void Main(string[] args) {

        Entity e = new Entity();
        Position p = new Position(10, 20, 30);

        e.Add(p, "Position");            

    }    

} 
```

这没有问题，它定义了一个容器（实体）和一个包含在其中的组件（位置）。

但是，如果我调用`p.Site.Container`，它将返回 Entity，但作为 IContainer。也就是说，`(Console.WriteLine(p.Site.Container as Entity).Foo);`如果我想访问 Foo，我必须明确地做一些事情。这似乎相当麻烦。

我错过了什么，还是有更好的方法来做我想做的事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T16:53:07.570

你没有错过任何东西。没有关于组件可以在哪个容器中的接口契约。如果你想限制可以添加到容器中的组件类型，可以重载 Add 方法并检查要添加的组件类型：

```
public class Entity : Container {
    public string Foo = "Bar";

    public virtual void Add(IComponent component) {
        if (!typeof(Position).IsAssignableFrom(component.GetType())) {
            throw new ArgumentException(...);
        }
        base.Add(component);
    }
} 
```

# vba - 如何调用documents.open 并避免出现“正在使用的文件”对话框？

> ID：13894095
> 
> 赞同：3
> 
> 时间：2012-12-15T16:40:35.600
> 
> 标签：vba, delphi, ms-word, word-automation

我正在编写一些非常[简单的代码](https://github.com/tobya/DocTo)来打开一个 word 文档，将其保存为新格式并关闭文档。但是，如果文档处于锁定状态并获得“正在使用的文件”对话框，我会遇到问题。

![文件正在使用对话框](../Images/dfe68f68bb3c82e025642b58b8c89ae0.png)

现在我很高兴自动选择选项 1 或 3，但似乎找不到方法。理想情况下，我会通过 open 方法上的参数完全阻止它显示。我正在使用 Delphi，但这并不重要。

```
 Wordapp.documents.Open(InputFile); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-15T16:40:35.600

在 ReadOnly 设置为 true 的情况下调用 open 似乎可以解决此问题。

```
 Readonly := true;
    Wordapp.documents.Open(FName, false, Readonly);  //3rd parameter is readonly 
```

参考：http: [//msdn.microsoft.com/en-us/library/office/ff835182.aspx](http://msdn.microsoft.com/en-us/library/office/ff835182.aspx)

# jquery - jquery datatables html字符串 - 排序列

> ID：13894097
> 
> 赞同：1
> 
> 时间：2012-12-15T16:40:54.857
> 
> 标签：jquery, html, sorting, jquery-datatables

我通过插入包含所有 html 代码的字符串，使用 JQuery 中的 DataTables 创建了一个表：

```
...
    $('#table tbody').text("<td>myrowdata</td>");
... 
```

然后我使用以下行应用排序顺序：

```
$('#table').dataTable().fnSort([[2, 'desc']]); 
```

这一切都很好，但现在它显示了很多奖励选项，如搜索字段、分页信息等。当我关闭所有这些功能时：

```
$('table').dataTable({"bFilter": false,"bInfo": false}); 
```

它停止向我的表添加信息..`$('#table').text("<td>myrowdata</td>");`不再工作了

# ios - 在 Xcodes Storyboard 中单击按钮时加载视图

> ID：13894099
> 
> 赞同：2
> 
> 时间：2012-12-15T16:41:12.260
> 
> 标签：ios, xcode, sdk, storyboard

我刚开始在 Xcode 中使用 Storyboard。我有一个里面有一些按钮的起始视图。单击按钮时有没有办法加载特殊视图？

我只找到了这个解决方法：

```
-(IBAction)loadRegistration:(id)sender {
    // load registration controller
    UIStoryboard *storyboard = self.storyboard;
    RegisterController *svc = [storyboard instantiateViewControllerWithIdentifier:@"RegisterController"];
    [self presentViewController:svc animated:YES completion:nil];
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T17:01:03.483

您不需要任何代码来加载新视图。您只需从按钮控制拖动到要呈现的控制器，然后选择 segue 类型。如果带有按钮的控制器在导航控制器中，您可以选择推送或模态，如果不是，那么您要选择模态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T17:04:41.090

你这样做的方式似乎没问题。您还可以使用 Interface Builder 中的 segue（ctrl + 拖动）将当前 View Controller 连接到要呈现的视图控制器。当按钮被点击时，你会调用`[self performSegueWithIdentifier:@"segue identifier"];`. 当然，你在 IB 中设置 segue 的 id。更简单的方法是将按钮与 IB 中的新视图控制器连接（也是 ctrl+drag）。这样，您甚至不需要 IBAction。

# javascript - javascript 'screen.availWidth' 的宽度是否与 CSS3 媒体查询最大宽度相同？

> ID：13894102
> 
> 赞同：2
> 
> 时间：2012-12-15T16:41:56.883
> 
> 标签：javascript, css, mobile, media

我一直在用这两个媒体查询在我的手机中试验一个简单的网页（请参阅底部有关浏览器等的规范）：

```
@media all and (max-width: 979px) { ... css setting a background color for a certain element
@media all and (min-width: 980px) { ... css setting another background color for the same element 
```

我通过实验发现使用高于 979/980 的值，即这些似乎是我的手机的值，即如果我增加或减少这两个值，我注意到它们中的另一个被应用了。

但是，我认为我不应该尝试找出这些边界值，而是认为我应该能够使用以下 javascript：

```
 document.write('<br>your resolution is ' + screen.availWidth + ' , ' + screen.availHeight); 
```

上面检测到的 javascript 宽度值与媒体查询中实际工作的值（854 而不是 979）相差一百多个像素。

所以，我的问题是我如何使用javascript（或服务器端代码）来计算设备宽度，并在媒体查询中使用一个有用的值，考虑到'screen.availWidth'显然不起作用（并且'screen.width'也不是作品）？

我的手机是索尼爱立信Xperia Arc S，我使用的操作系统是Android 4.0.4。我用以下三种浏览器做了这个实验：-Chrome 18.0.1025.166-Firefox 14.0-“Opera/9.80 版本/12.00”（不确定 9.80 是什么意思，但我猜版本是 12.00，这个字符串我来自javascript 'navigator.userAgent')

Chrome 浏览器使用上述 javascript 显示这些宽度/高度值：480 x 854 或 854 x 480（取决于我是纵向还是横向） Firefox 浏览器显示与上述 Chrome 相同的宽度/高度值。Opera 浏览器横向显示宽度/高度 854 x 439，纵向显示 480 x 658。

但是，当尝试如上所述应用 CSS3 媒体查询时，所有这些浏览器似乎都使用值 979 而不是 854。

# android - 调试时无法在 DDMS 窗口中获取任何线程

> ID：13894105
> 
> 赞同：0
> 
> 时间：2012-12-15T16:42:43.277
> 
> 标签：android, galaxy, ddms

我下载了android源代码并在eclipse中设置了开发环境。我想调试一些系统应用程序（如 mms 等）。但是当我将我的galaxy nexus 连接到我的笔记本电脑时，我在ddms 中看不到任何线程。我已经在设置页面中启用了调试模式。我设备的 Android 版本是 4.2.1。我想知道4.2.1在调试时是否需要额外的驱动程序或其他东西？您可以在此处参考图片：http: [//i48.tinypic.com/32zj19h.png](http://i48.tinypic.com/32zj19h.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T17:33:06.637

您只能调试可调试的应用程序。所有应用程序都可以在模拟器上调试；只有`android:debuggable="true"`在调试模式下使用 Eclipse 或由 Eclipse 构建的应用程序才能在生产硬件上调试。

没有“调试某些系统应用程序（如 mms 等）”这样的概念，除非在构建您自己的 Android 版本并将其滚动到 ROM mod 的上下文中。正如 Estivill 先生所说，如果您希望在 Galaxy Nexus 上“调试一些系统应用程序”，您将不得不这样做。

# c++ - OpenCV 和 RAD Studio C++（入门）

> ID：13894106
> 
> 赞同：3
> 
> 时间：2012-12-15T16:42:46.230
> 
> 标签：c++, opencv, rad

这是我第一次参加董事会，我想将 OpenCV 与 RAD studio C++ 一起使用。我花了很多时间，搜索并尝试如何从 OpenCV 和 RAD studio 开始，但没有结果。

Visual Studio 有很多教程，但在 Embarcadero 的 RAD Studio 中找不到任何教程。我想知道这个板上是否有人正在使用 RAD Studio 并想提供帮助，如何开始使用 OpenCV 和 RAD Studio。

问候， DreeOlee

Edit_15/12/2012：我将库添加到设置中。见图片。比我尝试在教程文件夹中打开一个示例文件“display_image.cpp”并得到很多错误，见图。任何人都可以帮忙吗？我现在没有任何开始的句柄。

![错误](../Images/2227ebb4d467584a2064c40859cb6c27.png)

![库](../Images/a971b33c9968c0f8deca0e0c3df474b4.png)

编辑：更改为其他 IDE，因为： [http ://code.opencv.org/issues/2057](http://code.opencv.org/issues/2057)

# android - 启动android应用程序时出现运行时异常

> ID：13894107
> 
> 赞同：1
> 
> 时间：2012-12-15T16:42:48.473
> 
> 标签：android

我试图从 Eclipse 启动我的 android 应用程序，但是每当我启动应用程序时，它就会卡住，并且我在 LogCat 中收到以下错误

```
12-15 22:04:03.179: E/AndroidRuntime(1731): java.lang.RuntimeException: Unable to        instantiate application com.iiitd.muc.mobishare.c: java.lang.ClassNotFoundException: com.iiitd.muc.mobishare.c in loader dalvik.system.PathClassLoader[/data/app/com.iiitd.muc.mobishare-2.apk]
12-15 22:04:03.179: E/AndroidRuntime(1731):     at   android.app.LoadedApk.makeApplication(LoadedApk.java:466)
12-15 22:04:03.179: E/AndroidRuntime(1731):     at android.app.ActivityThread.handleBindApplication(ActivityThread.java:3264)
12-15 22:04:03.179: E/AndroidRuntime(1731):     at android.app.ActivityThread.access$2200(ActivityThread.java:117)
12-15 22:04:03.179: E/AndroidRuntime(1731):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:973)
12-15 22:04:03.179: E/AndroidRuntime(1731):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-15 22:04:03.179: E/AndroidRuntime(1731):     at android.os.Looper.loop(Looper.java:130)
12-15 22:04:03.179: E/AndroidRuntime(1731):     at android.app.ActivityThread.main(ActivityThread.java:3687)
12-15 22:04:03.179: E/AndroidRuntime(1731):     at java.lang.reflect.Method.invokeNative(Native Method)
12-15 22:04:03.179: E/AndroidRuntime(1731):     at java.lang.reflect.Method.invoke(Method.java:507)
12-15 22:04:03.179: E/AndroidRuntime(1731):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
12-15 22:04:03.179: E/AndroidRuntime(1731):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
12-15 22:04:03.179: E/AndroidRuntime(1731):     at dalvik.system.NativeStart.main(Native Method)
12-15 22:04:03.179: E/AndroidRuntime(1731): Caused by: java.lang.ClassNotFoundException: com.iiitd.muc.mobishare.c in loader dalvik.system.PathClassLoader[/data/app/com.iiitd.muc.mobishare-2.apk]
12-15 22:04:03.179: E/AndroidRuntime(1731):     at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
12-15 22:04:03.179: E/AndroidRuntime(1731):     at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
12-15 22:04:03.179: E/AndroidRuntime(1731):     at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
12-15 22:04:03.179: E/AndroidRuntime(1731):     at android.app.Instrumentation.newApplication(Instrumentation.java:942)
12-15 22:04:03.179: E/AndroidRuntime(1731):     at android.app.LoadedApk.makeApplication(LoadedApk.java:461) 
```

更多背景知识：我基本上是想在我的应用程序中添加这个库。[http://code.google.com/p/little-fluffy-location-library/](http://code.google.com/p/little-fluffy-location-library/)

如说明中所述，我已在我的应用程序的 onCreate 方法中添加了这行代码。

```
LocationLibrary.initialiseLibrary(getBaseContext(), 60 * 1000, 2 * 60 * 1000, "mobi.littlefluffytoys.littlefluffytestclient"); 
```

这导致了错误。如果我删除这行代码，应用程序运行良好。

有人可以帮我解决这个错误吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T17:47:22.993

我怀疑这是您在库文档中缺少的步骤——

> 要使用该库，请将 littlefluffylocationlibrary.jar 作为外部 JAR 添加到您的 Android 项目中。在 Eclipse 中，最简单的方法是在项目中创建一个名为 libs 的文件夹，将文件复制到其中，刷新项目，右键单击 .jar 文件，然后选择添加到构建路径。

验证您已将 jar 文件复制到您的 libs 目录并且它在您的构建路径中（这在更高版本的 ADT 上自动完成）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-01T04:28:23.397

对于仍然面临此问题的任何人，如 2015 年 12 月 1 日，

little-fluffy-location-library 不适用于较新版本的 Google Play 服务。如果与较新版本的 Google Play 定位服务一起使用，应用程序将因 ClassNotFoundException 而崩溃。

Google Play 服务 6.1 版对我来说很好用。如果您使用 Gradle 构建项目，请将其添加到您的 build.gradle 文件中

```
compile 'com.google.android.gms:play-services:6.1.+' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T16:47:46.500

主要原因是“找不到类”所以，首先你应该检查源代码的当前路径。

并检查您是否正在运行正确的项目的项目属性。

# sbt - 使用 sbt JFlex 插件生成 Java 源代码

> ID：13894108
> 
> 赞同：0
> 
> 时间：2012-12-15T16:42:51.200
> 
> 标签：sbt, jflex

在 sbt (0.12) 的主要 javac 阶段之前，我正在使用[sbt-jflex](https://github.com/dlwh/sbt-jflex)插件通过 JFlex 生成 Java 源代码。

该插件是 ANTLR 插件的克隆，我发现[这个问题](https://stackoverflow.com/questions/8425863/sbt-and-antlr-got-simple-example)显示了如何使用后者。

所以我有以下内容`project/plugins.sbt`：

```
addSbtPlugin("org.scalanlp" % "sbt-jflex" % "0.1-SNAPSHOT") 
```

这在`./build.sbt`：

```
jflexSettings

sourceGenerators in Compile <+= generate in jflex 
```

但是我一定是做错了什么，或者 javac 阶段出现在源生成器之前，因为当我运行时`sbt compile`，我从来没有看到消息`"JFlex: Using JFlex version X to generate source files"`。相反，sbt 直接编译 Java 源代码

```
[info] Compiling 91 Java sources to ... 
```

然后由于该阶段缺少 JFlex 输出而失败。运行`source-directories`显示`src/main/jflex`确实包含在内，就像`target/src_managed/main`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T17:14:31.027

在尝试了注入调试打印之后，我发现 sbt-jflex 插件假定源在，`src/main/flex`而我的项目在`src/main/jflex`. 添加以下修复它：

```
sourceDirectory in jflex <<= (sourceDirectory in Compile) { _ / "jflex" } 
```

# html - 如何将 div 或 span 放在表格行的中间？

> ID：13894111
> 
> 赞同：0
> 
> 时间：2012-12-15T16:43:31.573
> 
> 标签：html, html-table

每次我渲染 HTML 时，div 都会被推出表格。

获得与 div 相同行为的正确方法是什么？我正在尝试使用 jQuery 隐藏表的块。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T12:15:50.740

**遵循此格式：**

```
<table width="200" border="1">
<tr id="1">
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
<tr id="2">
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
 </tr>
<DIV>EXPANDING UPON ROW 2 AT BLOCK LEVEL But UN-effecting ROW 1 AND 3</DIV>
<tr id="3">
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</table> 
```

# java - Java 字符编码

> ID：13894112
> 
> 赞同：0
> 
> 时间：2012-12-15T16:43:44.213
> 
> 标签：java

我有一个文本文件，其中包含一些印地语字符和 ISO 8859-1 中的默认字符编码。我正在使用“FileInputStream”从该文件中读取数据，并使用“FileOutputStream”将数据写入另一个文本文件。

我的代码是：

```
 FileInputStream fis = new FileInputStream("D:/input.txt");
    int i = -1;
    FileOutputStream fos = new FileOutputStream("D:/outputNew.txt");
    while((i = fis.read())!= -1){
        fos.write(i);
    }
    fos.flush();
    fos.close();
    fis.close(); 
```

我没有在任何地方指定编码（“UTF-8”），但输出文件仍然具有正确的文本。它是如何发生的，我没有得到？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-15T16:46:47.920

它之所以有效，是因为您没有在程序中使用任何字符。您只是将原始字节从一个文件传输到另一个文件。如果您读取和写入字符，这将是一个问题，因为那时将使用编码将文件中的字节转换为字符，反之亦然。

# c++ - (C++) 模板化 Matrix 类中的矩阵乘法

> ID：13894119
> 
> 赞同：3
> 
> 时间：2012-12-15T16:44:19.647
> 
> 标签：c++, templates, matrix, matrix-multiplication

我的矩阵类遇到了问题，我找不到解决方案。

```
Matrix = ROWSxCOLUMNS

Let A be a 3x4 matrix
Let B be a 4x5 matrix 
```

该操作`AxB`（仅当 A 的列与 B 的行匹配时才定义）导致 a `3x5 matrix`。我想创建一个模板类来做到这一点。

```
Matrix<int,3,4> A;
Matrix<int,4,5> B;
Matrix<int,3,5> matrix = A*B; 
```

我的代码：

```
 template <class T, unsigned int ROWS, unsigned int COLUMNS>
    class Matrix {
      public:

        /* blabla */

        const Matrix<T, ROWS, /* ? */ >&
          operator*(const Matrix<T, COLUMNS, /* ? */ >& matrix) const
        {
          /* multiplication */
        }

        /* blabla */
    }; 
```

我不知道在这些`/* ? */`部分中插入什么。有没有办法让编译器接受任何无符号整数值？我应该以不同的方式重写代码吗？

注意：我创建这个类是为了学术目的，我不在乎是否已经有图书馆这样做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T16:51:15.697

使用带有整数模板参数的模板成员函数：

```
template<class T, unsigned int ROWS, unsigned int COLUMNS>
class Matrix {
public:
    ... 
    template<unsigned int N>
    Matrix<T, ROWS, N>
    operator*(const Matrix<T, COLUMNS, N>& matrix) const
    {
          /* multiplication */
    }
    ...
}; 
```

另外，不要通过引用返回值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T16:59:01.307

您可以查看[此示例](https://bitbucket.org/hpsfo/hpsfo.bitbucket.org/src/563a3c12cba13ef6b5bb2b9aad6f76687b7d4e0c/code/src/sfo_matrix.h?at=master#cl-1845)，但我没有执行三重循环（非常低效），而是委托给英特尔 MKL `dgemm`。

另请注意，使用`operator*()`矩阵类型是一个坏主意，因为您需要按值返回结果，除非您确定您有一个启用了命名返回值优化 (NRVO) 的编译器并对其进行了测试。也就是说，您不想按值返回矩阵并导致非常昂贵的矩阵复制。这就是为什么在我的实现中我选择定义一个方法`multiply`而不是重载`operator*()`

一个有效的替代方法`operator*()`是定义 ，`operator*=()`这样你就可以像这样使用它，并且乘法的结果直接存储到 A 中：

```
A *= B; // or A = A*B 
```

# php - 如何每 30 秒自动加载一个 xml 文件？

> ID：13894124
> 
> 赞同：-1
> 
> 时间：2012-12-15T16:44:57.690
> 
> 标签：php, jquery, mysql, xml-parsing

目前我有一个parser.php，它加载一个xml文件并将xml文件中的新数据插入到mysql数据库中。我将如何每 30 秒刷新一次这个 php 文件，以便我的 mysql 表总是有新数据？我想我可以使用短轮询来做到这一点，但我猜这不是最有效的选择。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T17:09:14.023

这是一个非 PHP 解决方案，需要您具有 shell (SSH) 访问权限才能运行脚本，但是如果您愿意，您也可以使用**[exec()通过 PHP 运行它。](http://php.net/manual/en/function.exec.php)**共享托管环境可能会对这种方法提出挑战，但只要您可以在您的用户凭据下执行脚本，运行它应该没有问题。

首先，您需要创建一个包含以下内容的 bash 脚本并保存它（我将在`parser.sh`本示例中使用该名称）。然后，您可以根据需要调整行中的超时`sleep 30`。

```
#!/bin/sh  
while true
  do
    php parser.php
    sleep 30
  done 
```

为了运行脚本，您需要授予它执行权限。

```
chmod +x parser.sh 
```

现在，您可以使用带有与号 (&) 参数的**[nohup命令来确保脚本将在后台运行，即使在关闭 shell (SSH) 之后发送终止信号也是如此。](http://linux.die.net/man/1/nohup)****& 符号很重要**！

```
nohup ./parser.sh & 
```

现在您可以使用`top`或`ps aux | grep parser`来确保脚本正在运行。正如我之前已经说过的，您也可以使用 PHP`exec()`来启动该过程，但 shell 仍然是执行此操作的首选和最可靠的方法。

如果您想停止执行脚本的后台进程，那么您只需将其杀死。只需使用`ps aux | grep parser`找出解析器进程的 PID（它在左侧的第二列中）并将其与**[kill](http://linux.die.net/man/1/kill)**命令一起使用。

```
kill 4183 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T16:48:16.310

您需要使用 cronjob，但 crons 作业每 1 分钟或更长时间运行一次。

另一种方法是制作“守护进程”。

非常基本的例子：

```
<?php
while(true) {
   // check if 30 seconds has passed.
   // then execute some function...
};
?> 
```

然后您需要在终端中执行此操作：

```
$ php script.php & 
```

这个[链接](http://devlog.info/2010/03/07/creating-daemons-in-php/)应该有帮助。

好样的！

# objective-c - 使用导入的方法使用未声明的标识符错误

> ID：13894127
> 
> 赞同：0
> 
> 时间：2012-12-15T16:45:01.293
> 
> 标签：objective-c, ios, compiler-errors, nsdateformatter, nslocale

我正在尝试使用 Apple[在此处](http://developer.apple.com/library/ios/#qa/qa1480/_index.html)记录的 userVisibleDateTimeStringForRFC3339DateTimeString 方法。

所以首先我创建了一个名为 jhsDateFormatter 的单独类，并首先对其进行了修改

```
- (NSString *)userVisibleDateTimeStringForRFC3339DateTimeString:(NSString *)rfc3339DateTimeString; 
```

到 - (NSMutableString *)userVisibleDateTimeStringForRFC3339DateTimeString:(NSMutableString *)rfc3339DateTimeString :(NSString *)rfc3339DateTimeFormatString;

所以我可以传入第二个参数，这将是所需的日期格式字符串。

然后我将这个新类导入到我的视图 controller.m 中：

```
#import "jhsDateFormatter.h" 
```

并以这种方式调用该方法：

```
predicateMutableString = [userVisibleDateTimeStringForRFC3339DateTimeString:dateHolderMutableString :@"yyyy'-'MM'-'dd'"]; 
```

predicateMutableString 在 vi​​ewController.h 中定义并在 .m 中合成。

我得到一个构建错误：使用未声明的标识符'userVisibleDateTimeSTringForRFC3339DateTimeString

所以我注释掉了我的修改版本，并在我的类文件中使用了原始代码和方法签名：

```
 - (NSString *)userVisibleDateTimeStringForRFC3339DateTimeString:(NSString *)rfc3339DateTimeString; 
```

并这样称呼它： ![在此处输入图像描述](../Images/0cd32f549764d7ecbbe39c80f9081682.png)

我不确定为什么不接受方法调用。我想我已经匹配了数据类型。

请让我知道你对什么是错误的想法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T16:50:30.397

您可能希望像这样声明您的方法：

```
+ (NSMutableString *)userVisibleDateTimeStringForRFC3339DateTimeString:(NSMutableString *)rfc3339DateTimeString formatString:(NSString *)rfc3339DateTimeFormatString; 
```

（注意开头的 + ，以及第二个参数现在被命名的事实 - 它在您的代码中是空白的，这是有效的但很奇怪。）

然后你会这样称呼它：

```
predicateMutableString = [jhsDateFormatter userVisibleDateTimeStringForRFC3339DateTimeString:dateHolderMutableString formatString:@"yyyy'-'MM'-'dd'"]; 
```

jhsDateFormatter 你创建的新类在哪里。

在您的示例代码中，您没有在任何对象上调用该方法，这就是编译器抱怨的原因。

# django - 如何使用 Django、Tastypie、Redis 和任务队列 Gearman 创建像 Facebook 这样的新闻提要？

> ID：13894132
> 
> 赞同：-1
> 
> 时间：2012-12-15T16:45:55.220
> 
> 标签：django, redis, tastypie, feed, python-gearman

任何人都可以推荐或创建一个关于如何制作类似于 Facebook 只使用 Django、Tastypie（Django 的 Web 服务 API 框架）、Redis（键值存储）和 Gearman（任务队列）的新闻提要的教程吗？

目前我有用户模型、帖子模型、收藏模型和评论模型。我用这些模型创建了 Tastypie 资源，以允许收藏、喜欢、评论和发布。

我想知道如何生成直接应用于用户的提要操作。例如：

```
User1 commented on your post. (2 seconds ago)
User2 liked your post. (3 mins ago)
User2 & User1 favorited your post (5 mins ago) 
```

我真的需要有关如何使用上述技术构建活动提要的深入示例和教程。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T19:03:18.530

您可以使用应用程序[django-activity-stream](https://github.com/justquick/django-activity-stream)创建活动流。

# core-animation - CALayer sublayerTransform (CATransform3D) - 我怎样才能移动“相机”？

> ID：13894136
> 
> 赞同：3
> 
> 时间：2012-12-15T16:46:05.707
> 
> 标签：core-animation, transform, calayer, catransform3d, catransform3drotate

# 尝试A

这段代码

```
CATransform3D perspectiveTransform = CATransform3DIdentity;
perspectiveTransform.m34 = -1.0 / 1000.0;
perspectiveTransform = CATransform3DRotate(perspectiveTransform, angle / 2.0, 0.0, 1.0, 0.0);
self.sublayerTransform = perspectiveTransform; 
```

给出这个结果

![一种](../Images/ef1920e40bbdec2133838744e7dd7cd0.png)

红框是图层的背景色

# 尝试 B

这段代码

```
CATransform3D perspectiveTransform = CATransform3DIdentity;
perspectiveTransform.m34 = -1.0 / 1000.0;
// following line is added 
perspectiveTransform = CATransform3DTranslate(perspectiveTransform, -width / 2.0, 0, 0);
perspectiveTransform = CATransform3DRotate(perspectiveTransform, angle / 2.0, 0.0, 1.0, 0.0);
self.sublayerTransform = perspectiveTransform; 
```

给出这个结果

![乙](../Images/905568023e669a4db26432e19f9cdb52.png)

红框是图层的背景色

# 那么有什么问题呢？

在“尝试 A”的渲染示例中，从左侧中心看到折叠，因此从错误的角度看到折叠（左折叠比右折叠稍微薄）

通过在 x 轴上平移它，如在“尝试 B”中，我能够正确渲染它，但随后出现另一个错误：内容现在超出范围（红色矩形是范围）。

我怎样才能让相机从中间？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-16T10:26:48.273

好吧，似乎更改锚点是最简单的。我只需要更改一些其他转换（未在帖子中透露）即可使其正常工作。

# asp.net - 如何使用 ASP.net 和 mysql 为学校设计 Web ERP 软件

> ID：13894141
> 
> 赞同：0
> 
> 时间：2012-12-15T16:46:21.320
> 
> 标签：asp.net, asp.net-mvc-3, erp

我必须为我的客户设计一个学校网络 ERP。到目前为止，需要提供以下模块：
学生
库存
自助餐厅
招生

请帮助我提供所需的链接或书籍，它可以指导我创建设计所需遵循的步骤。可用于的不同设计之间的差异，例如，在我读到的应该使用基于组件的设计的链接之一中。

另外，请注意，模块需要获得许可。即用户必须能够选择一个或多个他感兴趣的模块，并且只安装那些模块。

我是这个领域的新手，这个练习主要是为了学习过程，所以我想从头开始做这个，而不是在这个时间点使用现有的开源。

请帮助我提供所需的链接/书籍/论文等...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T16:56:17.950

这个问题太宽泛了，一篇文章无法完全回答。但是，如果您正在寻找一本书来探索架构方法，我可以强烈推荐以下内容，我认为这是每个开发人员都必须阅读的书：

[](https://rads.stackoverflow.com/amzn/click/com/0321127420)**Martin Fowler[**的企业架构模式**](https://rads.stackoverflow.com/amzn/click/com/0321127420)**

# google-maps - 排除来自 Google Places API 的结果

> ID：13894147
> 
> 赞同：5
> 
> 时间：2012-12-15T16:46:52.677
> 
> 标签：google-maps, google-places-api

我想知道是否有任何方法可以从对 Google Places API 的查询中排除某些结果。

如果可能的话，我想以两种方式做到这一点，但是如果有人可以帮助我完成其中一项工作，那将非常有帮助（或者答案可能是这是不可能的，如果是这样的话，那就这样吧)

*   选择一个地点类型，但排除另一个。IE 我想搜索“美容院”，但我想过滤掉同样类型为“护发”的结果

*   排除某些特定地点，所以如果我搜索杂货店，但我不喜欢 Kroger，我想搜索“未命名为 Kroger 的杂货店”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-10-29T22:09:34.007

目前在 Places API 中没有办法做到这一点。

公共问题跟踪器中有一个功能请求：

[https://issuetracker.google.com/issues/35822993](https://issuetracker.google.com/issues/35822993)

然而，谷歌似乎没有对这项任务设置高优先级。我们唯一的选择是在公共问题上加注星标并让 Google 知道我们对此功能感兴趣。

# php - 有谁知道为什么这个会话没有在下一页设置？

> ID：13894149
> 
> 赞同：0
> 
> 时间：2012-12-15T16:47:26.017
> 
> 标签：php, session

我从来没有真正使用过会话，所以这可能是一些愚蠢的错误。当我使用 if(isset($_SESSION) 它输出 false 时，我认为它与 foreach 有关。我没有任何错误。任何人都可以抽出一些时间来帮助我吗？

```
<?php
    session_start();
    if(isset($_POST['register']))
    {
        require_once('../resources/library/register.class.php');
        //require_once('../resources/library/sessions.class.php');
        $obj_reg = new register();

        $name = $_POST['user'];
        $pass = $_POST['pass'];
        $email = $_POST['email'];

        $checking = $obj_reg->checking($name, $pass);

        //An foreach for converting POST data inside SESSION variables
        //isset checks if the array value contain post variables
        $posts = array($name, $pass, $email); 
        foreach ($posts as $p)
        {
            if(isset($_POST['p'])){
                    $_SESSION['p'] = $_POST['p'];

        }

        }
    }
    ?>

<form method="post" action="index.php?page=register.php">
    <table>
    <tr><td>username:</td><td> <input type="text" name="user"></td></tr>
    <tr><td>password:</td><td> <input type="password" name="pass"/></td></tr>
    <tr><td>email:</td><td> <input type="text" name="email"/></td></tr>
    <?=( !empty( $checking ) ) ? $checking : '' ?>
</table>
    <input type="hidden" name="token" value="<?=$token;?>"/>
    <input type="submit" name="register" value="register"/>
</form> 
```

```
<?php
    session_start();
    if(isset($_SESSION['p']))
    {
        echo "mama";
    }
    else
    {
        echo "why?";
    }

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T16:48:31.960

您需要`session_start`调用*每个*需要`$_SESSION`.

我认为您也意味着使用`$_SESSION[$p] = $_POST[$p]`而不是 string `'p'`。

# json - 如何在 ORM 中对 $_serialize_column 进行 Kohana 验证

> ID：13894150
> 
> 赞同：0
> 
> 时间：2012-12-15T16:47:28.410
> 
> 标签：json, validation, kohana, kohana-3, kohana-orm

Kohana ORM 的验证是使用`rules`

```
function rules()
{
  return array(
    'username' => array(
      array('not_empty'),
      array(array($this, 'availability')),
    )
  );
} 
```

我正在努力使用`$_serialize_columns`.

```
class Model_Admin extends ORM {
  protected $_belongs_to = array();
  protected $_has_many = array(
    'plans' => array(),
    'groups' => array(),
    'transactions' => array(),
    'logins' => array()
  );

  protected $_serialize_columns = array('data');

  /**
   * @param array $data
   * @param Validation $validation
   *
   * @return bool
   */
  public function data($data, $validation)
  {
     return 
       Validation::factory(json_decode($data, TRUE))
       // ... rules ...
       ->check();
  }

  public function rules()
  {
     return array(
       'data' => array(
         array(array($this, 'data'), array(':value',':validation')
       )
     );
  }
} 
```

被编码的数组是：

```
array(
  'name' => '',
  'address' => '',
  'phone' => '',
  'postalcode' => ''
); 
```

该`data`方法接收 json 编码的数据，因为 ORM 在进行验证之前运行过滤器，所以我需要将其转换回关联数组，然后创建一个新的验证对象来专门检查该数组的内容。因为我无法合并`Validation`来自另一个`Validation`实例的规则

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T16:36:40.650

**更新的答案**

必须使用第二个验证对象，因为`save()`会检查内部模型验证对象。这意味着添加到从验证规则检查的验证对象的规则将被忽略（`Validation->check()`在循环之前将规则导入本地范围）。

由于数据本身在技术上是另一个对象（在对象关系的意义上，它有自己的需要验证的数据集），理想的解决方案是找到一种方法来创建一个保存数据的真实模型。

使用正确的数据库列定义保存数据还有许多其他好处，尤其是在您需要执行数据属性查找、进行原位更改等时（否则将需要对所有行中的数据列进行反序列化）。

有一些替代方案，但它们对我来说就像是杂物：

1.  创建一个表示数据对象的模型并向其添加规则，`check()`用于验证数据（问题：需要大量维护，没有真实世界的表意味着必须手动定义列）。

2.  在 Admin 模型中将数据设置为真实列，并使用过滤器将其转换为设置的数据列（问题：再次，必须手动定义列并从保存操作中排除其他列）。

我希望这有一些用处。

**原始答案**

Kohana ORM`save()`方法允许包含一个“额外的”验证对象，该对象被合并到主 ORM 验证对象命名空间中。

[此处](http://kohanaframework.org/3.3/guide/orm/validation#external-validation)简要记录了这一点。

如果我理解正确，我认为您正在寻求做这样的事情：

```
// another script, e.g., a controller

// Create the model
$admin = ORM::factory('Admin');

// $data = the data as an array, before serialization ...

$extra_validation = Validation::factory($data)
                    // add ->rule() calls here, but DO NOT chain ->check()
                    ;

// Set $data in the model if it is going to be saved, e.g., $admin->data = $data;
// Set other data... e.g., $admin->foo = 'bar';

// Save the model
try {
    $admin->save($extra_validation);
}
catch (ORM_Validation_Exception $e)
{
    // Manipulate the exception result
} 
```

虽然在此示例中您仍必须创建另一个验证对象，但您现在能够在单个块中捕获所有异常。如果您使用 i18n 消息来提供人类可读的错误消息，我建议使用`var_dump()`或类似的方法来检查命名空间。`$e->errors()`您应该会发现在响应中创建了一个名为“_external”的命名空间。

# java - 通过 JSON 传递非数字/字母的字符串

> ID：13894157
> 
> 赞同：0
> 
> 时间：2012-12-15T16:48:04.473
> 
> 标签：java, javascript, base64

我正在通过 json 和查询字符串传递加密密码。举例来说，密码类似于：`V0VuDF9ITK+A744HD=`

当我通过 json 传递字符串时，我用来`JSON.stringify`对字符串进行字符串化，以便它可以在服务器上使用。

```
var request = sb.serverRequest('changePassword', JSON.stringify({username: username, password: credentialsInput.value, original: password}));
request.done(function() {
    var response = JSON.parse(request.responseText);
    if(response.success) {
        console.log('password changed');
    } else {
        setInstructions('That didn\'t work. Please try again.');
    }
    credentialsInput.value = ''; //Clear input
}); 
```

但是，当我尝试在服务器上使用密码时，它已将 替换`+`为空格，因此新密码将是`V0VuDF9ITK A744HD=`（注意中间的空格）？如何在java中预先解析字符串，使其包含传递的实际字符串中的非字母和数字？似乎将字符串传递给 javascript 就好了，但如果可能的话，我更喜欢在 java 中进行预处理，因为在某些情况下我会通过查询字符串传递字符串。

我在java中使用base64编码器进行加密，所以我不确定在javascript中转义字符串中的字符时是否需要考虑其他可能性。似乎`=`顺利通过了。这种编码类型使用的其他字符是否可能会成为问题？

PS我实际上并没有在javascript中进行任何加密，这一切都在服务器上处理，但在这个特定的例子中，我需要javascript中的加密密码，因为我需要在服务器端进行比较......我不会进入所有无聊的细节。但是，我还将通过一个查询字符串传递这个加密密码，我认为它会被 a`+`或`=`. 我如何在查询字符串中传递这样的字符串？

更新：我用来加密密码的编码算法如下。我可能误认为它只是base64。这是保护密码的安全方法吗？

```
public static synchronized String encrypt(String plainText) throws RuntimeException {
    MessageDigest md = null;

    try{
        md = MessageDigest.getInstance("SHA");
    }catch(NoSuchAlgorithmException e){
        throw new RuntimeException(e.getMessage());
    }

    try{
        md.update(plainText.getBytes("UTF-8"));
    }catch(UnsupportedEncodingException e){
        throw new RuntimeException(e.getMessage());
    }

    byte raw[] = md.digest();
    String hash = (new BASE64Encoder().encode(raw));
    return hash;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T16:55:26.530

要使字符串可以安全地通过 URL，请使用`encodeURIComponent(your_string_here)`

# html - CSS不识别输入框？

> ID：13894164
> 
> 赞同：4
> 
> 时间：2012-12-15T16:49:49.413
> 
> 标签：html, css

出于某种原因，我无法让 CSS 与我的表单一起使用？我几乎尝试了所有方法，但似乎找不到问题？我究竟做错了什么？

我的 HTML 结构

```
 <div class="login-container">
            <form>
            <fieldset>
                <label for="email">Email:</label>
                <input type="text" name="email" class="input" id="email" />
                <br /><br />
                <label for="pword">Password:</label>
                <input type="text" name="pword" id="pword" />
              </fieldset>
            </form>
        </div> 
```

我的 CSS 结构

```
.login-container fieldset {
    padding: 1em;
}
.login-container label {
    float:left;
    width:25%;
    margin-right:0.5em;
    padding-top:0.2em;
    text-align:right;
    font-weight:bold;
}
.input {
    background-color:#F00;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T16:51:27.163

去除 。在您的`input`选择器前面。

```
input {
    background-color:#F00;
} 
```

另请参阅： [CSS 元素选择器](http://www.w3schools.com/cssref/sel_element.asp)与[CSS .class 选择器](http://www.w3schools.com/cssref/sel_class.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T16:56:55.407

似乎工作得很好，请参阅 jsfiddle.net/4FCgc/

什么不工作？也许这是您的网络浏览器的缓存......但我对此表示怀疑。

# java - 如何使用 Stanford Parser 使用 java 获取 POS 标签？

> ID：13894166
> 
> 赞同：0
> 
> 时间：2012-12-15T16:50:11.113
> 
> 标签：java, parsing, stanford-nlp, speech

我正在研究一个剽窃检测项目。我需要使用 Stanford Parser API 来获取存储在文本文件中的句子中单词的词性 (POS) 标签。

我了解该课程`edu.Stanford.nlp.parser.lexparser.LexicalizedParser`可用于此目的。但我无法让它工作。

谁能告诉我如何在 java 中编写一个可以利用此类或 API 中可用的其他类来获取 POS 标签的代码？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T15:09:54.143

查看启动文件`ParserDemo.java`并`ParserDemo2.java`包含在发行版中。它们显示了在代码中调用解析器的简单示例。特别是，`ParserDemo2.java`请参阅 call `parse.taggedYield()`，它返回 a `List`of `TaggedWord`，您可以从中请求`tag()`每个项目的 the 。

但是，如果您只想要一个词性标注器，您会发现只使用一个词性标注器（例如[斯坦福](http://nlp.stanford.edu/software/tagger.shtml)词性标注器）会更快且内存占用更少。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T17:40:37.173

Javadoc 可以在这里找到：`http://nlp.stanford.edu/nlp/javadoc/javanlp/edu/stanford/nlp/parser/lexparser/package-summary.html`. 请注意，包名 ( `edu.stanford.nlp.parser.lexparser`) 区分大小写，并且您已编写`Stanford`. 这将意味着你得到“ClassNotFoundException”。

您不提供任何其他信息或错误消息，因此很难提供进一步的帮助。您需要帮助编译和运行 Java 包吗？如果是这样，请在处理 NLP 之前解决该问题。

# python - 如何理解文档中的 pydoc 参数

> ID：13894170
> 
> 赞同：2
> 
> 时间：2012-12-15T16:51:05.317
> 
> 标签：python, pydoc

`seek()`我正在查找`pydoc file`并找到有关该函数作用的解释，但我不明白文档如何说明参数。它看起来像这样：

```
seek(offset[, whence]) 
```

起初我以为它是参数中的一个参数，但显然不是。这些括号在参数字段中表示什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T16:53:22.797

介于两者之间的所有内容`[`都是`]`可选的

在这种情况下，您可以致电：

```
seek(offset) 
```

或者

```
seek(offset, whence) 
```

# c++ - C ++中“类”（不是对象）的哈希表

> ID：13894175
> 
> 赞同：1
> 
> 时间：2012-12-15T16:51:43.287
> 
> 标签：c++, class

对于我的大学作业，我需要为基于函数（或命令）的语言制作 C++ 解释器。解释器必须读取输入文件，提取单词（字符串），生成命令并执行它们。所有命令都是继承自一个公共超类（`Command`例如 ）的类，它有一个名为 的虚拟方法`execute`。对于从输入文件中读取的每个单词，都会创建一个命令并将其存储在`vector<Command>`.

所以，我正在考虑使用一个哈希表，它的键是命令的名称（字符串），它的值是某种允许我创建特定类的对象（或者让我访问特定类的构造函数)，轻松地为每个单词创建类，而不是使用 if-else-if 链。

到现在为止，我正计划创建一个`CommandGenerator`类，它调用`generate`一个返回一个新`Command`对象的虚方法。我的命令哈希表的值将是`CommandGenerator`该类的对象。所以我从它派生了所有命令的许多其他子类，它们返回从`Command`.

但是，这样的东西已经存在了吗？或者有没有更优雅的方式来做到这一点？是否可以从类中提取任何类型的对象来表示它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T17:12:55.680

如果每个命令都是 的子类`Command`，为什么不使用 a`std::vector<Command*>`并将指针推送到每个子类的实例？然后你可以遍历向量并调用你的虚`execute`函数。

在向量中放置类最接近的方法是`boost::fusion::vector`. 但不能在运行时填写，对您的具体情况没有用处。

* * *

假设您可以使用 C++11。如果您可以将命令定义为一个`execute`函数，您可以执行以下操作：

```
map<string, function<void()>> cmds = {
    make_pair("print1", [](){
        cout << "1" << end;
    }),
    make_pair("print2", [](){
        cout << "2" << end;
    }),
    make_pair("print3", [](){
        cout << "3" << end;
    })
}; 
```

然后将命令放在一个向量上：

```
vector<function<void()>> list;
list.push_back(cmds["print1"]);
list.push_back(cmds["print1"]);
list.push_back(cmds["print2"]); 
```

然后只需执行一个循环：

```
for (function<void()>& cmd : list)
    cmd(); 
```

这应该打印`112`到屏幕上。但是，如果您非常关心速度，请改用大量 ifs。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T17:23:29.347

您遇到的基本问题是：您将类的名称作为字符串，并希望使用该名称创建一个类。就像您提到的那样，您必须以某种方式手动进行此翻译。这已经在这里讨论过好几次了，比如在[使用工厂模式按名称实例化类中](https://stackoverflow.com/questions/1832003/instantiating-classes-by-name-with-factory-pattern)或在[寻找更好的 C++ 类工厂](https://stackoverflow.com/questions/363453/looking-for-a-better-c-class-factory)中。我要在这里做的唯一补充：使用好的旧宏，因为它们有一个字符串化操作符。例如：

```
#include <stdio.h>
#define CREATEOBJ(clss,command) if (strcmp (#clss, command)==0) return new clss;
class Base {
public:
  virtual const char *name()=0;
};
class A : public Base {
public:
  const char *name() {return "I am an A";}
};
class B : public Base {
public:
  const char *name() {return "I am an B";}
};
Base *makeInstance (const char *nm) {
  CREATEOBJ(A,nm);
  CREATEOBJ(B,nm);
}
int main () {
  printf ("%s\n", makeInstance ("A")->name());
  printf ("%s\n", makeInstance ("B")->name());
} 
```

当然，您可以通过使用包含字符串和一些函数指针或生成器类指针的哈希表使其变得更好，但想法保持不变：添加一个新类，只需再添加一个 CREATEOBJ-thingy。

# php - 如何使用 $_Get 将其值存储在数据库中？

> ID：13894176
> 
> 赞同：-2
> 
> 时间：2012-12-15T16:51:45.930
> 
> 标签：php, mysql, get

我想显示“超级”用户负责的所有用户。然后“超级”用户可以通过点击他们的用户 ID 向任何用户发送评论。

显示所有用户的第一部分工作正常！我的问题是超级用户发送评论。我想将用户 ID（即`suid`）存储在数据库中。所以我想使用该`$_Get`功能。但是当我尝试它时，数据库中没有任何存储。我想我犯了一个错误。那么任何人都可以帮助我吗？

这是将所有用户显示给超级用户的代码：

```
 <?php

session_start();?>
<?php
require("noCache.php");
$uid=$_SESSION['uid'];

?>
<html>
<!DOCTYPE html>
<html lang="en">
<head>
<title>Send a comment</title>
<meta charset="utf-8">
<link rel="stylesheet" href="css/reset.css" type="text/css" media="all">
<link rel="stylesheet" href="css/layout.css" type="text/css" media="all">
<link rel="stylesheet" href="css/style.css" type="text/css" media="all">
<script type="text/javascript" src="js/jquery-1.4.2.js" ></script>
<script type="text/javascript" src="js/cufon-yui.js"></script>
<script type="text/javascript" src="js/cufon-replace.js"></script>
<script type="text/javascript" src="js/Myriad_Pro_400.font.js"></script>
<script type="text/javascript" src="js/Myriad_Pro_700.font.js"></script>
<script type="text/javascript" src="js/Myriad_Pro_600.font.js"></script>
</head>

<body>
<div class="main">

    <header>
        <div class="wrapper">
            <h1><a href="index.php" id="logo"> Biz</a></h1>

        </div>
        <nav>
            <ul id="menu">
                <li class="alpha"><a href="index.php"><span><span>Home</span></span></a></li>
                <li><a href="About.html"><span><span>About</span></span> </a></li>
                <li><a href="Projects.html"><span><span>Projects</span></span></a></li>
                <li><a href="Contacts.php"><span><span>Contacts</span></span></a></li>
                <li class="omega"><a href="Services.html"><span><span>Services</span></span></a></li>
            </ul>
        </nav>
        </br></br>

</header>

<head>
<!-- CSS Stylesheet -->
<style type="text/css">
html{

}
body{
    text-align:center;

}

</style>
</head>
<?php
$dbh=mysql_connect("localhost", "root", "hahaha1") or die (mysql_error());
mysql_select_db ("senior");
$result = mysql_query("SELECT * FROM sensorusers where uid=$uid");
echo "<html><body>";
echo "<table cellspacing=10 cellpadding=5 ><tr> <th>ID</th><th>Name</th><th>Username</th><th>Password</th><th>Date of Registeration</th><th>Phone</th></tr>";
while ($row = mysql_fetch_array($result))
{   echo "<form method='post' action='sendcomment.php'>";
    echo "<tr><td><input type='submit' name='suid' value='".$row['suid']."' /></td>";
    echo "<td>" . $row['name'] . "</td>";
    echo "<td>" . $row['dusername'] . "</td>";
    echo "<td>" . $row['password'] . "</td>";
    echo "<td>" . $row['date'] . "</td>";
    echo "<td>" . $row['phone'] . "</td></tr></form>";
    $_GET['suid'] = $row['suid'];
}

echo "</table></body></html>";
mysql_close($dbh);
?>
<html>
<body>
<!-- CSS Stylesheet -->
<style type="text/css">

body {

    font-family:"Andalus"
    font: 16px ;
    color:black;
    padding: 30px 5px;
    text-align: center;
}

</style></body></html> 
```

这是我想问的部分：

```
echo "<table cellspacing=10 cellpadding=5 ><tr> <th>ID</th><th>Name</th><th>Username</th><th>Password</th><th>Date of Registeration</th><th>Phone</th></tr>";
while ($row = mysql_fetch_array($result))
{   echo "<form method='post' action='sendcomment.php'>";
    echo "<tr><td><input type='submit' name='suid' value='".$row['suid']."' /></td>";
    echo "<td>" . $row['name'] . "</td>";
    echo "<td>" . $row['dusername'] . "</td>";
    echo "<td>" . $row['password'] . "</td>";
    echo "<td>" . $row['date'] . "</td>";
    echo "<td>" . $row['phone'] . "</td></tr></form>";
    $_GET['suid'] = $row['suid'];
} 
```

**解决方案：**

谢谢大家的帮助。我修复了代码。我用方法`post`来保存`suid`第一次的值。然后我将其打印为隐藏输入。最后，我将隐藏输入的值保存在 sql 中，它可以工作！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T17:56:21.613

您的代码中有多个问题。我会尝试列出最大的，但可能仍然会错过一些。

**代码 1 -**
*问题 1-*
您有多个`<html></html>`、`<head></head>`和`<body></body>`块。

```
<html>
...
<head>
...
</head>
<body>
...
<head>
...
</head>
...
echo "<html><body>";
...
echo "...</body></html>";
...
<html>
<body>
...
</body>
</html> 
```

*问题 2-*
您`<form>`在一个`<td>`块附近，这是无效的，所以它不会`POST`正确。它要么需要在桌子周围`<form><table></table></form>`，要么在单元格内`<td><form></form></td>`。

```
echo "<table cellspacing=10 cellpadding=5 ><tr> <th>ID</th><th>Name</th><th>Username</th><th>Password</th><th>Date of Registeration</th><th>Phone</th></tr>";
while ($row = mysql_fetch_array($result))
{   echo "<form method='post' action='sendcomment.php'>";
    echo "<tr><td><input type='submit' name='suid' value='".$row['suid']."' /></td>";
    echo "<td>" . $row['name'] . "</td>";
    echo "<td>" . $row['dusername'] . "</td>";
    echo "<td>" . $row['password'] . "</td>";
    echo "<td>" . $row['date'] . "</td>";
    echo "<td>" . $row['phone'] . "</td></tr></form>";
    $_GET['suid'] = $row['suid'];
}

echo "</table></body></html>"; 
```

*问题 3-*
您在滥用`$_GET`，它在您的`<form></form>`标签之外。`$_GET`用于从`url`.

```
$_GET['suid'] = $row['suid']; 
```

**代码 2-**
*问题 1-*
您正在设置`$id1=$_GET["suid"];`，但在代码 #1 的表单中，您正在使用`method="post"`.

```
$id1=$_GET["suid"]; 
```

*问题 2-*
当您从代码 #1 发布到代码 #2 ( `<form><input type='submit' name='suid' value='".$row['suid']."' /></form>`) 时，您只发送`name='suid'`，因此您的所有`$_GET`& `$_POST`vars 都不会设置为用于`INSERT`-

```
$id1=$_GET["suid"];
...
$name=$_POST['sent_by'];
$id=$_POST['hidden_id'];
$id2=$_POST['hidden_id2'];
$message=$_POST['message'];
$submit= $_POST['submit'];
... 
```

*问题 3-*
您的查询中有错误。应该是`VALUES`，不是`VALUE`，你应该在 `INSERT INTO comments (id,name,message,receiver,sender,date,time) VALUES ('','$name','$message','$id' ,'$id1','$date','$time')

```
$place="INSERT INTO comments VALUE('','$name','$message','$id','$id1','$date','$time')";
$run = mysql_query("$place"); 
```

*问题 4-*
您`value=`在表单中的所有内容都缺少`''`值周围的引号。

```
<form action="sendcomment.php" method="post">
    <input type ='hidden' name='hidden_id' value = <?php print $uid; ?> >
    <input type ='hidden' name='hidden_id2' value = <?php print $id1; ?> >
    Name : <input type ='name' name='sent_by'  value = <?php print $username; ?>></br> 
     Message: <textarea name='message'></textarea></br> 
     <input type='submit' value='submit' name="submit" /></br>
</form> 
```

我知道你已经接受了一个答案，但是你还有很多代码问题需要解决。这些中的每一个都会导致您的表单出现问题并插入数据库。另外，它们会给您带来更多问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T17:04:46.353

如何使用`$_GET`：
将数据放在 URL 中，如下所示：

```
sendcomment.php?suid=blahblahblah 
```

然后你可以使用`$_GET`，像这样：

```
$suid = $_GET['suid'] 
```

目前您的代码用于`POST`发送`suid`
或更改您的表单方法。

* * *

```
echo "<form method='post' action='sendcomment.php?suid=".$row['suid']."'>"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T16:58:19.307

你有`POST`我`GET`在你的代码中没有看到，如果你使用 GET 或 POST 方法，它取决于你的 html 输入（你没有发布它们）。如果您的方法是 GET，那么您使用 GET

但尝试使用这个

```
 if(isset($_POST['submit'])){ 
```

代替

```
 if($submit){ 
```

编辑 。

你正在使用，`method='post'` 那么你必须`POST`不使用`GET`

EDIT2：您的 sql 有错误，您使用过`VALUE`，应该是`VALUES`

而不是这个

```
 $place="INSERT INTO comments VALUE 
```

将其替换为

```
 $place="INSERT INTO comments (columns here ,..., ,..) VALUES 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T17:10:43.360

就这么简单

```
$id1=$_GET["suid"]; 
```

用。。。来代替

```
$id1=$_POST["suid"]; 
```

使用 $_GET 变量时应该在 url 中。使用 $_POST 变量时未在 url 中显示

# c# - 来自网络摄像头的自上而下的图像

> ID：13894177
> 
> 赞同：1
> 
> 时间：2012-12-15T16:51:50.673
> 
> 标签：c#, wpf, image, api, capture

我从相机里得到镜头。像这样：

初始化：

```
uint pcount = (uint)(capGrabber.Width * capGrabber.Height * PixelFormats.Bgr32.BitsPerPixel / 8);
section = CreateFileMapping(new IntPtr(-1), IntPtr.Zero, 0x04, 0, pcount, null);
map = MapViewOfFile(section, 0xF001F, 0, 0, pcount);
BitmapSource = System.Windows.Interop.Imaging.CreateBitmapSourceFromMemorySection(section, capGrabber.Width, capGrabber.Height, PixelFormats.Bgr32, capGrabber.Width * PixelFormats.Bgr32.BitsPerPixel / 8, 0) as InteropBitmap;
capGrabber.Map = map; 
```

在哪里

```
IntPtr map;
IntPtr section;
InteropBitmap BitmapSource; 
```

抓斗（capGrabber）：

```
public int BufferCB(double sampleTime, IntPtr pBuffer, int bufferLen)
{
    if (Map != IntPtr.Zero)
    {
        CopyMemory(Map, pBuffer, bufferLen);
        OnNewFrameArrived();
    }

    return 0;            
} 
```

我把图像倒过来（自上而下）。需要解决这个问题。我找到了一些东西（使用结构 BITMAPINFO），但我没有工作。问任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T12:07:17.093

这个问题似乎与[Top-Down vs. Bottom-Up DIBs](http://msdn.microsoft.com/en-us/library/ms787796%28VS.85%29)有关。

有些人添加 WPF 转换将位图旋转 180 度，但我发现最简单的解决方案是以相反的顺序复制位图，即替换

```
CopyMemory(Map, pBuffer, bufferLen); 
```

经过

```
for(IntPtr pMap = Map, pBuf = pBuffer+bufferLen; pBuf.ToInt64() > pBuffer.ToInt64(); pMap += 4, pBuf -= 4)
    CopyMemory(pMap, pBuf-4, 4); 
```

请注意，数字 4 表示代表一个像素的字节数，即 32 位 (RGB32) 除以 8。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-07T20:01:52.923

Petr Gotthard 想到了正确的问题，但代码并没有解决问题。

根据[MSDN](http://msdn.microsoft.com/en-us/library/ms787796%28VS.85%29)：

> 在自下而上的 DIB 中，图像缓冲区从底行像素开始，然后是下一行，依此类推。图像的顶行是缓冲区中的最后一行。因此，内存中的第一个字节是图像的左下角像素。在 GDI 中，所有的 DIB 都是自下而上的。下图显示了自下而上 DIB 的物理布局。

这意味着您的图像首先绘制底行，而不是顶行。这会产生垂直镜面效果。但是，它不会左右颠倒。

考虑以下数组：

```
[ 0, 1, 2 ]
[ 3, 4, 5 ]
[ 6, 7, 8 ] 
```

自上而下将按照说明进行读取和输出。但是自下而上会以这种方式解析它：

```
[ 6, 7, 8 ]
[ 3, 4, 5 ]
[ 0, 1, 2 ] 
```

如果我们简单地反转它，我们会得到：

```
[ 2, 1, 0 ]
[ 5, 4, 3 ]
[ 8, 7, 6 ] 
```

所以把它放回去，我们需要步幅（宽度），然后我们逐行反转。

因此，采用 Petr 的答案并增加步伐，我们得到：

```
int stride = Width * PixelFormats.Bgr32.BitsPerPixel / 8;
for (IntPtr pMap = Map, pBuf = buffer + bufferLen; pBuf.ToInt64() > buffer.ToInt64(); pMap += stride, pBuf -= stride)
    CopyMemory(pMap, pBuf - stride, stride); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-21T12:29:13.003

```
var target = m_Map;
var bytesPerRow = (m_Width * 4);
var source = aBuffer + aLength - bytesPerRow;

for (int i = m_Height - 1; i > 0; i--)
{
    Interop.CopyMemory(target, source, bytesPerRow);
    target += bytesPerRow;
    source -= bytesPerRow;
} 
```

性能更高。原始代码每次迭代需要 224 467 428 个滴答。每行复制只需要 4 041 288 个滴答声

# flash - 使用 ANE 构建签名的 Air 发布版本会出现“意外失败：空”错误

> ID：13894179
> 
> 赞同：1
> 
> 时间：2012-12-15T16:51:55.993
> 
> 标签：flash, apache-flex, air, flash-builder

尝试在 Mac 上使用本机扩展（ANE 文件）构建我的应用程序的签名版本。当我在终端中使用 Flash Builder 或 adt 构建时，我收到此错误：

```
unexpected failure: null
java.io.EOFException
at java.io.RandomAccessFile.readInt(RandomAccessFile.java:759)
at com.adobe.air.CentralDirectoryReader.readInt(CentralDirectoryReader.java:134)
at com.adobe.air.CentralDirectoryReader.<init>(CentralDirectoryReader.java:55)
at com.adobe.air.ApplicationPackager.addExtensions(ApplicationPackager.java:200)
at com.adobe.air.ApplicationPackager.createPackage(ApplicationPackager.java:68)
at com.adobe.air.nai.NativePackager.createPackage(NativePackager.java:96)
at com.adobe.air.ADT.parseArgsAndGo(ADT.java:571)
at com.adobe.air.ADT.run(ADT.java:419)
at com.adobe.air.ADT.main(ADT.java:469)unexpected failure: null 
```

ANE 是 ArduinoConnector (http://code.google.com/p/as3-arduino-connector/)。

有任何想法吗？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T17:58:02.520

Flash Builder 当前如何与 ANE 一起工作存在一个错误，这可能使其非常具有挑战性[（请参阅 ArduinoConnector 常见问题解答](http://code.google.com/p/as3-arduino-connector/wiki/FAQ)和Adob​​e 论坛[上的此错误）](http://forums.adobe.com/message/4319610#4319610)。我必须解压缩 ANE（它是一个扩展名已更改的 zip 文件）并将其作为文件文件夹使用。从 Flash builder 构建正常调试版本时，将此文件夹的内容备份并添加 .ane 扩展名可以正常工作，但是在尝试从重新压缩的 ANE 构建发布版本时会引发此错误（上述问题中提到的错误） . 使用我用 adt 构建的自定义 ANE 构建发布版本，而不是重新压缩，工作正常。

# c++ - C++ - 将数据从浮点向量复制到 uint8 向量？

> ID：13894186
> 
> 赞同：0
> 
> 时间：2012-12-15T16:52:58.463
> 
> 标签：c++, boost, stl

我有几个浮点向量，我想将它们的字节复制到一个字节向量。实现这一目标的最佳方法是什么？迭代每个浮点向量，将浮点数转换为字节等等`push_back()`似乎`buffer`是一种低效的方式。

```
void CopyToByteVector(Vector<uint8_t>& buffer)
{
    Vector<float> vec1 = //....
    Vector<float> vec2 = //....

    // best way to copy byte values of vec1, vec2 into buffer?
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T17:24:44.240

I don't think this is guaranteed to work, as far as the standard is concerned. I don't think there is a way to do what you are asking that is not undefined behavior. Having said that, I am near certain that , in almost all cases (and probably in absolutely all cases that you care about), it will work.

```
uint8_t * ibegin = reinterpret_cast<uint8_t*>(&vec1[0]);
auto size = vec1.size() * (sizeof(float)/sizeof(uint8_t));
buffer.assign(ibegin, ibegin + size);

// Not sure what you wanted to do with vec2\. Append it?
ibegin = reinterpret_cast<uint8_t*>(&vec2[0]);
size = vec2.size() * (sizeof(float)/sizeof(uint8_t));
buffer.insert(buffer.end(), ibegin, ibegin + size); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T17:01:12.733

`std::vector`有一个[构造函数](http://www.cplusplus.com/reference/vector/vector/vector/)，它接受一对迭代器并将它们复制到向量中，您应该从查看它开始。

也不清楚“将浮点数转换为字节”是什么意思。是不是一塌糊涂？而且您的代码表明您的意图是完全相反的，向上浮动。

# android - 错误：元素类型“字符串”必须由匹配的结束标记“”终止

> ID：13894190
> 
> 赞同：0
> 
> 时间：2012-12-15T16:53:22.310
> 
> 标签：android, android-layout

结束声明并清理项目我仍然得到同样的错误，我在这里放置代码

```
<resources>
    <string name="app_name">LiveWallpaper1</string>
    <string name="hello_world">Hello world!</string>
    <string name="menu_settings">Settings</string>
    <string name="title_activity_main">MainActivity</string>
    <string name="wallpaper_description">wallpaper descriptioning></string>
</resources> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T17:02:17.687

我认为错误在这里

壁纸说明>

最后的“>”是不允许的，因为它是一个特殊字符。尝试用 \u003E 替换它，这是 unicode 定义。有关其他 unicode 定义，请参阅此处

[http://jrgraphix.net/research/unicode_blocks.php?block=0](http://jrgraphix.net/research/unicode_blocks.php?block=0)

希望这有效

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T17:02:45.087

在最后一个字符串行中删除您之前的“>”字符

```
</string> 
```

标签。这导致了你的错误。

# c - Printf ubuntu 分段错误（核心转储）

> ID：13894194
> 
> 赞同：0
> 
> 时间：2012-12-15T16:53:57.493
> 
> 标签：c, ubuntu, segmentation-fault, printf

我有这个代码：

```
int a;
printf("&a = %u\n",(unsigned)&a);
printf("a\n");
printf("b\n");
printf("c\n");
printf("d\n"); 
```

我试图打印`a`变量的指针。
但它在行上失败`printf("a\n");`并显示`Segmentation fault (core dumped)`
输出：

```
&a = 134525024
Segmentation fault (core dumped) 
```

当我从代码中删除该行时`printf("&a = %u\n",(unsigned)&a);`，它就成功了。输出：

```
a
b
c
d 
```

我的代码中有什么磨损？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T17:24:51.580

这可能是架构问题。我在 OS X 上运行它并且运行良好：

```
#import <stdio.h>
int main()
{
    int a;
    printf("&a = %u\n",(unsigned int)&a);
    printf("a\n");
    printf("b\n");
    printf("c\n");
    printf("d\n");
} 
```

但是，我在编译过程中确实收到了警告：

```
warning: cast from pointer to integer of different size 
```

我在 64 位机器上，所以我的 64 位指针无法放入 32 位 int。尝试运行它，看看你得到了什么：

```
#import <stdio.h>
int main()
{
    int a;
    printf("unsigned %ld\n", sizeof(unsigned)); // sizes reported in bytes
    printf("int %ld\n", sizeof(int));           // same as unsigned
    printf("long %ld\n", sizeof(long));         // should fit a pointer
    printf("ptr %ld\n", sizeof(void*));         // size of a pointer
    printf("&a = %lu\n", (unsigned long)&a);    // should print out your pointer
    printf("&a = %p\n", &a);                    // the Right Way of doing things
} 
```

输出：

```
unsigned 4
int 4
long 8
ptr 8
&a = 140734544742408
&a = 0x7fff508c0808 
```

编辑：

以防万一你不知道，`unsigned`实际上意味着`unsigned int`。同样，`long`实际上意味着`long int`.

此外，一个值是否`signed`会`unsigned`改变它的物理大小，只有它是如何被解释的。您可以从前两张照片中看到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T19:38:10.620

我解决了我的问题。我只是重新安装了我的 ubuntu 和 vmware，现在它可以工作了。我不确定确切的问题是什么，但它解决了我的问题...... :-)

# ios - 在 UIView 的 -drawRect: 方法中绘制彩色文本

> ID：13894196
> 
> 赞同：24
> 
> 时间：2012-12-15T16:54:24.103
> 
> 标签：ios, uikit, drawrect, uicolor, nsattributedstring

我正在尝试在我的`UIView`子类中绘制彩色文本。现在我正在使用单视图应用程序模板（用于测试）。除了`drawRect:`方法没有任何修改。

文本已绘制，但无论我将颜色设置为什么，它始终是黑色的。

```
- (void)drawRect:(CGRect)rect
{
    UIFont* font = [UIFont fontWithName:@"Arial" size:72];
    UIColor* textColor = [UIColor redColor];
    NSDictionary* stringAttrs = @{ UITextAttributeFont : font, UITextAttributeTextColor : textColor };

    NSAttributedString* attrStr = [[NSAttributedString alloc] initWithString:@"Hello" attributes:stringAttrs];

    [attrStr drawAtPoint:CGPointMake(10.f, 10.f)];
} 
```

我也试过`[[UIColor redColor] set]`无济于事。

**回答：**

> NSDictionary* stringAttrs = @{ NSFontAttributeName : 字体, NSForegroundColorAttributeName : textColor };

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-15T17:18:03.087

而不是`UITextAttributeTextColor`你应该使用`NSForegroundColorAttributeName`. 希望这可以帮助！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-02-11T08:38:55.043

您可以尝试以下方法。它将帮助您借助以下属性在右下角的 UIView 中绘制文本。

*   NSFontAttributeName - 带大小的字体名称
*   NSStrokeWidthAttributeName - 描边宽度
*   NSStrokeColorAttributeName - 文本颜色

**Objective-C** - 在 UIView 中绘制文本并作为 UIImage 返回。

```
 -(UIImage *) imageWithView:(UIView *)view text:(NSString *)text {

        UIGraphicsBeginImageContextWithOptions(view.bounds.size, view.opaque, 0.0);

        [view.layer renderInContext:UIGraphicsGetCurrentContext()];

        // Setup the font specific variables
        NSDictionary *attributes = @{
                NSFontAttributeName   : [UIFont fontWithName:@"Helvetica" size:12],
                NSStrokeWidthAttributeName    : @(0), 
                NSStrokeColorAttributeName    : [UIColor blackColor]
        };
        // Draw text with CGPoint and attributes
        [text drawAtPoint:CGPointMake(view.frame.origin.x+10 , view.frame.size.height-25) withAttributes:attributes];

        UIImage * img = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();

        return img;
    }` 
```

**Swift** - 在 UIView 中绘制文本并作为 UIImage 返回。

```
 func imageWithView(view : UIView, text : NSString) -> UIImage {

        UIGraphicsBeginImageContextWithOptions(view.bounds.size, view.opaque, 0.0);
        view.layer.renderInContext(UIGraphicsGetCurrentContext()!);
        // Setup the font specific variables
        let attributes :[String:AnyObject] = [
            NSFontAttributeName : UIFont(name: "Helvetica", size: 12)!,
            NSStrokeWidthAttributeName : 0,
            NSForegroundColorAttributeName : UIColor.blackColor()
        ]
        // Draw text with CGPoint and attributes
        text.drawAtPoint(CGPointMake(view.frame.origin.x+10, view.frame.size.height-25), withAttributes: attributes);
        let img:UIImage = UIGraphicsGetImageFromCurrentImageContext();

        UIGraphicsEndImageContext();
        return img;
    }` 
```

# java - 设置两个字符串的交集

> ID：13894199
> 
> 赞同：1
> 
> 时间：2012-12-15T16:54:45.273
> 
> 标签：java, set

```
import java.util.*;

class set {
    public static void main(String args[]) {
        TreeSet<Character> t1 = new TreeSet<Character>();
        TreeSet<Character> t2 = new TreeSet<Character>();
        String s1 = "Ambitab bachan";
        String s2 = "Ranjikanth";
        for (char c1 : s1.toCharArray())
            t1.add(c1);
        for (char c2 : s2.toCharArray())
            t2.add(c2);
        t2.retainAll(t1);
        System.out.println(t2);
    }
} 
```

这个程序在两个不同的字符串中找到共同的字符。在这个程序`TreeSet`中用于存储值和`retainAll()`方法用于查找常见字符。

谁能帮我减少代码行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T16:58:26.090

如果你使用[Guava](http://code.google.com/p/guava-libraries/)库，你可以简单地使用[`Sets.intersection()`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Sets.html#intersection%28java.util.Set,%20java.util.Set%29)和避免样板。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T18:06:53.560

在处理字符串时，您可以放弃所有这些对象并使用正则表达式。

```
private static final Pattern REGEX_DEDUPLICATE = Pattern.compile("(.)(?=.*\\1)");

public void intersect(String string1, String string2) {
    String commonChars = string1.replaceAll("[^" + string2 + "]", "");
    String uniqueCommonChars = REGEX_DEDUPLICATE.matcher(commonChars).replaceAll("");
    return uniqueCommonChars;
} 
```

第一个`replaceAll`删除所有`string1`不在*的*字符`string2`。`commonChars`因此是：

```
itaahan 
```

更多在[这个讨论](https://stackoverflow.com/questions/4203911/how-do-i-find-the-characters-common-to-two-strings-in-java-using-single-replacea)中。

第二个`replaceAll`删除字符的冗余实例，在这种情况下是最后两个 'a'。`uniqueCommonChars`变成：

```
ithan 
```

这个正则表达式如何工作的一个很好的分解是在[这个讨论](https://stackoverflow.com/questions/2582940/how-do-i-remove-duplicate-characters-and-keep-the-unique-one-only-in-perl)中。

编译正则表达式的计算成本*相对*较高，因此我们可以将其预编译为`static final Pattern`. 由于其他正则表达式是基于输入的，因此无法进行预编译。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T17:11:58.737

简单一点：

```
 TreeSet<Character> t1 = new TreeSet<Character>();
    String s1 = "Ambitab bachan";
    String s2 = "Ranjikanth";
    for(char c1:s1.toCharArray()) {
      if (s2.contains(new Character(c1).toString())) {
        t1.add(c1);
      }
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-15T17:02:45.743

我想你可以浓缩这个：

```
TreeSet<Character> t1 = new TreeSet<Character>();
for(char c1:s1.toCharArray())
t1.add(c1); 
```

进入：（已编辑）

```
TreeSet<String> t1 = new TreeSet<String>(Arrays.asList(s1.split("(?<=.)"))); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-15T17:20:03.897

您可以轻松删除重复代码以构建字符集

```
public static void main(String args[]) {
    TreeSet<Character> t1 = asCharacterSet("Ambitab bachan");
    TreeSet<Character> t2 = asCharacterSet("Ranjikanth");
    t2.retainAll(t1);
    System.out.println(t2);
}

private static Set<Character> asCharacterSet(String value) {
    TreeSet<Character> t1 = new TreeSet<Character>();
    for (char c1 : value.toCharArray())
        t1.add(c1);
    return t1;
} 
```

# symfony - 在 Symfony 2 中制作胖模型 - 组合或继承以及如何配置我的模型层

> ID：13894200
> 
> 赞同：5
> 
> 时间：2012-12-15T16:54:57.527
> 
> 标签：symfony, configuration, model, doctrine-orm, domain-driven-design

我已经到了 Symfony 2 / Doctrine 2 的重点，我开始意识到我们已经在我们的应用程序中将太多的业务逻辑构建到服务和控制器中 - 而模型中构建的还不够。

我们希望为我们的模型引入配置（以修改行为），从而可能使模型直接访问服务以执行其行为。

我注意到以下问题的完全错误答案被标记为正确，有 8 个赞成票 - 所以我知道我们到目前为止所采用的方法（贫血模型）被很多 Symfony 认为是“正确”的做事方式2个用户。在阅读更多领域驱动设计之后，我知道情况并非如此。

[Symfony2 MVC：我的代码属于哪里？](https://stackoverflow.com/questions/9440519/symfony2-mvc-where-does-my-code-belong)

我看到很多捆绑包定义了模型中的行为并在实体/文档中扩展了它。这种模式在一定程度上有效——但我认为我们需要引入一个额外的阶段。我们模型的某些行为是可选的，并且具有该行为将取决于在我们的应用程序中注册了哪些额外的捆绑包（因此包括 X 捆绑包将允许应用程序做更多的事情）。一个例子。

我们有一个订单对象，目前它与快递包中的实体具有双向关系，这意味着存在硬依赖。我想将其解耦并让快递包有选择地为订单添加行为。考虑这个方法调用。

```
// no courier bundle is registered
$order->getShippingMethods();
// throws NoAvailableShippingMethodsException;

// one bundle registered
$order-getShippingMethods();
// returns an array with one shipping method

etc.... 
```

现在我们有一个 OrderProvider 服务，它位于实体管理器的顶部——所以如果你打电话

```
$orderProvider->GetOrder($id); 
```

您只需从数据库中获取“直接”返回的实体。我的问题是其他人在这里使用什么模式？我正在考虑将所有“业务逻辑”移动到实体扩展的模型类中，让服务层将实体拉出（实体是具有数据库和吸气剂属性的愚蠢记录），然后使用配置配置模型（注入 OrderProvider 服务的配置），这将修改模型的行为。对于给出的示例，我可能会执行类似（在 OrderProvider 中）..

```
// trimmed down for example purposes by removing exceptions etc.
public function getOrder($id) 
{
    $order = $this->orderRepository->findOneById($id);
    if ($this->couriers){
       $order->addCouriers($couriers);
    }
    return $order;
}

// this function would be called by the courier bundle automatically using semantic configuration / tags / setter injection
public function addCourier(CourierInterface $courier)
{
    $this->couriers[] = $courier;
} 
```

我拥有的另一个选项是创建一种新类型的对象 - 它装饰基本订单并且已经配置（因为它的 ITSELF 将被定义为 DIC 中的服务）并将订单注入其中。区别是微妙的，两种方法都行，但我想知道哪条路是最好的。

最后，我对所有这一切都有一个问题，我无法理解。如果我的基本订单实体与其他实体有关系并且需要配置 THOSE 实体 - 这应该在哪里发生？例如，如果我这样访问我的客户。

```
$order->getCustomer(); 
```

我得到了客户（实体）。但可能是我也需要向客户对象添加一些配置 - 比如

```
$customer->getContactMethods(); 
```

现在，此方法的行为可能会有所不同，具体取决于我的应用程序是否注册了 twitter 包或 facebook 包或其他东西。鉴于上面的例子，我不会得到一个配置充分的客户——而是'香草'基础实体。我能看到的唯一方法是切断需要配置的实体之间的关系，并从 CustomerProvider 服务中提取实体：

```
$customerProvider->getCustomerByOrder($order); 
```

在我看来，这似乎是从模型层中删除信息，并转而依赖使用多种服务来完成简单的任务（我正试图摆脱这种情况）。想法和资源链接表示赞赏。

编辑：相关-我每天都会看到第一个答案中列出的缺点，这就是我问这个问题的原因->[贫血域模型：优点/缺点](https://stackoverflow.com/questions/258534/anemic-domain-model-pros-cons?lq=1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T19:48:15.917

您的项目的复杂性似乎是模块化要求 - 应用程序行为必须可以通过捆绑包进行扩展。我不熟悉 Symfony 2 / Doctrine 2，但典型的 DDD 策略是尝试确保诸如 Order 和 Customer 之类的域实体不知道捆绑配置。换句话说，周围的服务不应该向实体添加特定于包的行为。将捆绑感知的责任委托给实体会使它们过于复杂。制造实体类层次结构以支持广泛的行为也太复杂了。相反，这种可扩展性应该由应用程序服务来管理。应用程序服务将确定加载哪些捆绑包并协调相应的实体。

另一个需要考虑的战略模式是[有界上下文](http://devlicio.us/blogs/casey/archive/2009/02/11/ddd-bounded-contexts.aspx)。是否可以将您的应用程序划分为与模块对齐的有界上下文？例如，要解决`$order-getShippingMethods()`方法，您可以创建两个 BC，一个有一个具有`getShippingMethods()`方法的订单模型，另一个没有它。拥有两个模型似乎违反了[DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)，但如果模型代表不同的事物（即有运输数据的订单与没有运输数据的订单），那么实际上不会重复任何事情。

# windows-phone-7 - Windows Phone 7 中的弹出窗口

> ID：13894202
> 
> 赞同：0
> 
> 时间：2012-12-15T16:55:05.920
> 
> 标签：windows-phone-7, popup

我想在 windows phone (C#) 中使用 popUp 元素在屏幕上查看消息

我做了以下事情：

```
popUpBanner = new Popup();
popUpBanner.HorizontalAlignment = HorizontalAlignment.Center;
popUpBanner.VerticalAlignment = VerticalAlignment.Center; 
```

但是弹出元素出现在屏幕的左上角..而不是在中心

我该如何解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T03:40:18.863

在 Windows Phone 中，弹出窗口不是 UserControl 类。您不想将弹出窗口居中，而是将 ui 元素居中在弹出窗口的子元素中......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-23T12:54:47.533

更具体地说，我更新了我的代码，希望它对你有所帮助。首先让我们获取屏幕尺寸（即宽度和高度）

```
var width = System.Windows.Application.Current.Host.Content.ActualWidth;
var height = System.Windows.Application.Current.Host.Content.ActualHeight; 
```

让我们创建一个 StackPanel，为其添加背景颜色并根据设备屏幕分辨率重新调整 StackPanel 的大小。

```
StackPanel stackPanel = new StackPanel();
stackPanel.Background = new SolidColorBrush(Colors.Gray);
stackPanel.Height = height / 4;
stackPanel.Width = width / 2; 
```

最后创建一个弹出窗口并将其作为子项添加到 StackPanel。

```
Popup Popup1 = new Popup();
stackPanel.Children.Add(Popup1);
ContentPanel.Children.Add(stackPanel);
Popup1.IsOpen = true; 
```

你完成了。根据您的需要修改您的 StackPanel 大小，因为您在这里获得了屏幕分辨率。

# macos - QTMovie 无法播放任何视频

> ID：13894206
> 
> 赞同：0
> 
> 时间：2012-12-15T16:55:59.167
> 
> 标签：macos

我在播放 QTMovie 和 Quicktime 电影视图中的视频时遇到问题。这是我的代码：“AppController.h”

```
#import <Foundation/Foundation.h>
#import <Cocoa/Cocoa.h>
#import <QTKit/QTKit.h>
@interface AppController : NSObject
{

    IBOutlet NSTextField *label;
}
@property (strong,nonatomic) IBOutlet QTMovieView *movie;
-(IBAction)play:(id)sender;
@end 
```

“应用控制器.m”

```
#import "AppController.h"
#import <QTKit/QTKit.h>
@implementation AppController
@synthesize movie;
- (void)play:(id)sender

{

    [label setStringValue:@"play"];

    NSURL *url3=[NSURL URLWithString:@"rtsp://218.204.223.237:554/live/1/66251FC11353191F/e7ooqwcfbqjoo80j.sdp"];    

    NSError* error = nil;

    NSString *path=@"/Users/shenashley/Movies/cookie.mpg";   

    QTMovie* qtm = [QTMovie movieWithURL: url2 error:&error];   

    if(qtm != nil)

    {

        [movie setMovie:qtm];

        [movie play:self];

    }

    else

    {

        NSLog(@"Error loading movie: %@", [error localizedDescription]);

    }   

}
@end 
```

我已经尝试过播放本地文件和网址。两者都失败了。使用我播放的本地mpg文件，我可以听到声音但屏幕是黑色的。并使用 url（我尝试了许多不同的 url）。从不工作。它总是黑屏，什么都没有出现。

当我点击播放。它显示警告：“** WARNING: -[NSImage compositeToPoint:fromRect:operation:] 在 MacOSX 10.8 及更高版本中已弃用。请改用 -[NSImage drawAtPoint:fromRect:operation:fraction:]。”

它是 sdk10.8 中的错误吗？

是否有其他可以播放 rtsp 或 m3u8 流的框架可以替换 QTKit？

我在这里上传我的项目：[https ://www.dropbox.com/s/1904isjkkhxecj2/NewOSX.zip](https://www.dropbox.com/s/1904isjkkhxecj2/NewOSX.zip)

希望有人能帮助我！！！我已经在这里停留了一段时间。真的需要帮助！！！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:20:52.533

检查电影状态：

```
long state = [[movie attributeForKey:QTMovieLoadStateAttribute] longValue];
if(state != QTMovieLoadStateComplete)
  return; 
```

不要在意警告。

# jquery - 函数中的ajax异步数组

> ID：13894207
> 
> 赞同：0
> 
> 时间：2012-12-15T16:56:10.087
> 
> 标签：jquery, ajax

我明白为什么它不起作用。但不知道如何得到结果：

有一个全局数组：

```
var members=[[1,x,y,z],[2,x1,y1,z1],[3,x2,y2,z3]];

function drop() {
  for (var i = 0; i < members.length-1; i++) { 
    setTimeout(function() {
      addMarker();
    }, i * 30);
  }
}

function addMarker() { 
  var marker = new google.maps.Marker({
    position: members[iterator][1],
    icon: pinImage[members[iterator][2]],
    shadow: shadow,
    map: map,
    draggable: false,
    title: members[iterator][3],
    animation: google.maps.Animation.DROP    }); 
  google.maps.event.addListener(marker, 'click', function() {
    $.ajax({
      url : 'ajax/get_infowindow_content.php?id='+members[iterator][0],
      success: function(data) {
        infowindow.close();
        infowindow.setContent(data);
        infowindow.open(map, marker);
      }
    });
  }); 
  markers.push(marker);  
  iterator++;
} 
```

问题在这里：

```
url : 'ajax/get_infowindow_content.php?id='+members[iterator][0], 
```

当我单击标记时，它会触发函数并检查 members[iterator][0] 但迭代器是迭代器的最后一个值（在整个循环之后）。

最好的解决方案是某种 .value() ，例如：

```
url : 'ajax/get_infowindow_content.php?id='+members[iterator][0].value(), 
```

但当然它不起作用。

我堆了。。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T17:10:37.713

您只需要一个闭包并将参数传递给 addMarker 函数：

```
var members = [[1, x, y, z], [2, x1, y1, z1], [3, x2, y2, z3]];

function drop() {
    for (var i = 0; i < members.length; i++) {
        (function(j) {
            setTimeout(function() {
                addMarker(members[j]); //pass the value
            }, i * 30);
        })(i); //closure to keep the value
    }
}

function addMarker(member) {
    var marker = new google.maps.Marker({
        position: member[1],
        icon: pinImage[member[2]],
        shadow: shadow,
        map: map,
        draggable: false,
        title: member[3],
        animation: google.maps.Animation.DROP
    });
    google.maps.event.addListener(marker, 'click', function() {
        $.ajax({
            url: 'ajax/get_infowindow_content.php?id=' + member[0],
            success: function(data) {
                infowindow.close();
                infowindow.setContent(data);
                infowindow.open(map, marker);
            }
        });
    });
    markers.push(marker);
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T17:11:34.260

尝试`i`作为参数传递`addMarker()`

```
function addMarker(i){/* code*/} 
```

然后在循环中：

```
setTimeout(function() {
      addMarker(i);
    }, i * 30); 
```

# c - 将 2 个字符转换为 1 个整数

> ID：13894209
> 
> 赞同：6
> 
> 时间：2012-12-15T16:56:19.947
> 
> 标签：c, casting, char, int

我有 2 个字符：HIGH 和 LOW，我想将它们转换为对应于 HIGH + LOW 的 2 个左位的 int。

我尝试了类似的东西：

```
unsigned char high;
unsigned char low;
high = 128; // 10000000
low= 128; // 10000000
int result; (should be high 10000000 + 2 left bites of low 10 = 1000000010)
// To do
return result; 
```

为更清晰而编辑。

我选择的解决方案是：

```
return high*4 + (low >> (CHAR_BIT - 2)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T17:01:53.833

您声明`HIGH`and `LOW`as `char*`，但不将它们用作指针。以下代码工作正常（顺便说一句，当您不使用常量时避免使用大写标识符）：

```
char high = 125;
char low = 12; 
```

这就是我理解你的问题的方式（它可能更容易理解）：

```
#include <limits.h>

int result = high + (low >> (CHAR_BIT - 2)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T17:14:03.963

> 我有 2 个字符，HIGH 和 LOW，我想将它们转换为`int`对应于 HIGH + LOW 的 2 个左位。

你的规格不清楚。鉴于：

```
unsigned char HIGH = 152;
unsigned char LOW  =  12; 
```

这可能意味着：

```
int result = HIGH + (LOW >> 6);   // Assuming CHAR_BIT == 8 
```

或者它可能意味着：

```
int result = HIGH + (LOW & 0xC0); 
```

或者它可能意味着：

```
int result = (HIGH << 2) | (LOW >> 6); 
```

或者它可能有其他含义。对于问题中显示的值，前两个表达式产生相同的答案。

To get a more meaningful answer, you'll have to spell out the requirements much more carefully. Your actual code bears almost no discernible relationship to the requirement you specify. You have two `char *` variables; you initialize them to what are almost certainly invalid addresses; you don't initialize `result`. Your computations are, at best, odd.

# c++ - 如何在不删除任何字符的情况下将字符从字符串中的某个位置移动到它的最前面？

> ID：13894217
> 
> 赞同：0
> 
> 时间：2012-12-15T16:57:47.277
> 
> 标签：c++, string

我的字符串大约有 14 个字符长，我必须将一个字符从字符串中的某个位置移到最前面，并且我无法删除已经位于其中的字符`myString[0]`。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T17:03:07.147

```
std::string x = "foobar";
x.insert(0, 1, x[3]); // insert the 4th character at the beginning
x.erase(4, 1);  // erase the 5th character 
                // (5th because the preceding operation added a character 
```

[请参阅basic_string](http://en.cppreference.com/w/cpp/string/basic_string)的相应成员函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T17:16:24.680

作为使用`std::string`函数的替代方法，您可以尝试使用`<algorithm>`.

```
std::string x = "foobar";
std::rotate(x.begin(), x.begin() + 3, x.begin() + 4); // foobar -> bfooar 
```

或者：

```
std::reverse(x.begin(), x.begin() + 3); // foobar -> oofbar
std::reverse(x.begin(), x.begin() + 4); // oofbar -> bfooar 
```

这些都不会改变字符串`size()`，也不应该触发内存重新分配。

# javascript - 使用 JQuery 将内容加载到外部 html 页面的 div 中

> ID：13894218
> 
> 赞同：1
> 
> 时间：2012-12-15T16:57:50.360
> 
> 标签：javascript, jquery, html

有谁知道如何使用 jQuery 将内容加载到外部 HTML 页面的 div 中？

使用`$('#divname').html("content")`only 似乎能够访问`div`脚本所在的 HTML 页面的元素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T17:00:40.240

如果我理解正确，您想更改外部页面的 DIV 的内容，例如 iframe？

如果是这样，由于安全原因，这不能用简单的 jQuery 来完成

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T08:31:28.597

找到了！这就是我需要的：

[在 iframe 父级中访问 div](https://stackoverflow.com/questions/11717856/access-div-in-iframe-parent)

我以为只要他们在同一个域中，这就是孩子与父母的关系并不重要，但显然确实如此。

感谢您的回复！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T17:03:14.517

您可以使用`load()`加载所有内容，或将远程页面中的特定内容定位到本地页面中的元素中。`load()`是一种 AJAX 方法。对AJAX做一点研究

```
$('#myDiv').load('remotePageUrl') 
```

或者只获取远程页面的一部分

```
$('#myDiv').load('remotePageUrl #remotePageID') 
```

API 参考：[http ://api.jquery.com/load/](http://api.jquery.com/load/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T16:59:57.610

```
$.get("test.php", function(data){
$("div").html(data);
}); 
```

# html - Firefox 的 Inspector 疯了吗？

> ID：13894219
> 
> 赞同：2
> 
> 时间：2012-12-15T16:57:56.000
> 
> 标签：html, css, firefox, cross-browser

Firefox 如何为 TD 样式计算 1px 边框，`border: 0`Firefox Web 检查器如何向我展示确实，边框的样式设置为`0px`但同时它最终是`1px`？

这是 Firefox 网络检查器的屏幕截图：

![截屏](../Images/30dba23ce8a11932dbfc8f3a5bc43c60.png)

它引用的第 21 行的无辜 css 是：

```
.smart-table-tr-active td {
    border: 0;
} 
```

并且检查员没有显示其他覆盖规则。它在 Chrome 和 IE8+ 中运行得非常好...... 1px 边框的“疯狂”只发生在 Firefox 中（干净的配置文件，没有扩展，最新版本 - Windows 7 64 位上的 17.0.1）。

[链接到示例](http://inprogress.neuronq.ro/tedon1/)（单击一行以“展开”它并检查展开行的 TD。（是的，幕后有一些 Javascript“DOM 手术”，但我仍然希望像 Firefox 这样的成熟浏览器能够“保持冷静”并做好自己的工作，即使是督察......）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T17:44:40.750

*它是 1px，因为表格使用折叠边框，并且下一*行单元格的顶部边框是 1px。但是在折叠边框模型中，下一个单元格（和行，因为它们折叠）的顶部边框与该单元格（和行）的底部边框相同，因此它们显示为相同的值......更准确地说，每个以一种奇怪的方式获得一半的边界，但在检查器中可能没有真正的好方法来表示它。

在这里阅读：http: [//www.w3.org/TR/CSS2/tables.html#collapsing-borders](http://www.w3.org/TR/CSS2/tables.html#collapsing-borders)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-15T17:53:43.000

问题的原因在于您的 CSS 文件：

```
table.smart-table td {
    border-collapse: separate;
    /*position: relative;*/
} 
```

您正在`border-collapse`TD 元素上设置属性。但是，该属性**不适**用于 TD 元素，因此它**被丢弃了**。相反，[它仅适用于 TABLE 元素](http://www.w3.org/TR/CSS2/tables.html#borders)。

将您的 CSS 规则更改为：

```
table.smart-table {
    border-collapse: separate;
} 
```

您的问题将得到解决。设置单独的边界将确保边界不共享（正如鲍里斯在他的回答中解释的那样）。

# java - 使用 Stage 和 Actor 的 libGDX 在桌面和 Android 手机上产生不同的摄像机角度

> ID：13894223
> 
> 赞同：3
> 
> 时间：2012-12-15T16:58:18.683
> 
> 标签：java, android, camera, libgdx

libGDX 使用 Stage 和 Actor 在桌面和 Android 手机上产生不同的摄像机角度。

以下是展示问题的图片：http: [//brandonyuh.minus.com/mFpdTSgN17VUq](http://brandonyuh.minus.com/mFpdTSgN17VUq)

在桌面版上，图像几乎占据了整个屏幕。在 Android 手机上，它只占用一点屏幕。

这是代码（不是我的实际项目，但我隔离了问题）：

```
package com.me.mygdxgame2;
import com.badlogic.gdx.*;
import com.badlogic.gdx.graphics.*;
import com.badlogic.gdx.graphics.Texture.TextureFilter;
import com.badlogic.gdx.graphics.g2d.*;
import com.badlogic.gdx.scenes.scene2d.*;
public class MyGdxGame2 implements ApplicationListener {
    private Stage stage;
    public void create() {
        stage = new Stage();
        stage.addActor(new ActorHi());
    }
    public void render() {
        Gdx.gl.glClearColor(0, 1, 0, 1);
        Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT);
        stage.draw();
    }
    public void dispose() {}
    public void resize(int width, int height) {}
    public void pause() {}
    public void resume() {}
    public class ActorHi extends Actor {
        private Sprite sprite;
        public ActorHi() {
            Texture texture = new Texture(Gdx.files.internal("data/hi.png"));
            texture.setFilter(TextureFilter.Linear, TextureFilter.Linear);
            sprite = new Sprite(new TextureRegion(texture, 0, 0, 128, 128));
            sprite.setBounds(0, 0, 300.0f, 300.0f);
        }
        public void draw(SpriteBatch batch, float parentAlpha) {
            sprite.draw(batch);
        }
    }
} 
```

hi.png 包含在上面的链接中

非常感谢您回答我的问题。我花了3天时间试图弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:38:45.230

```
 stage = new Stage(); 
```

使用将视口映射到真实屏幕分辨率的相机初始化舞台。如果桌面和设备没有相同的分辨率，它们看起来就不一样了。尝试为舞台设置固定值。使用这个:(你可以[在这里查看javadoc](https://github.com/libgdx/libgdx/blob/master/gdx/src/com/badlogic/gdx/scenes/scene2d/Stage.java)

```
public void setViewport (float width, float height, boolean keepAspectRatio); 
```

例如。使用一些固定值，例如 setViewport (800, 600, true);

这也将填满屏幕，但始终显示 800x600 的世界，无论分辨率如何。（实际上它会“至少”800x600，因为 keepAspectRation = true 可以防止失真）

# c# - 返回一个文化格式化日期的数组 C# MVC3

> ID：13894224
> 
> 赞同：0
> 
> 时间：2012-12-15T16:58:23.847
> 
> 标签：c#, asp.net-mvc-3, date, culture

我是编程新手，并试图做一个练习，以各种格式将日期格式化为泰国文化，这就是我到目前为止的代码：

```
 public String[] FormatAsSpecified(DateTime theDate, String theCulture, String[] formats)
    {
        String[] dateResults = new String[formats.Length];

        CultureInfo culture = CultureInfo.GetCultureInfo(theCulture);

        for (int i = 0; i < formats.Length; i++)
        {
            String culture_formatted_date = theDate.ToString(formats[i], culture);
            dateResults[i] = culture_formatted_date;
        }

        return dateResults;
    } 
```

这是随之而来的测试方法：

```
 [TestMethod]
    public void FormatAsSpecifiedReturnsDateLiteralsInSpecifiedFormatForAllStandardFormatStrings()
    {
        //Arrange
        var controller = new DateController();

        var theDate = new DateTime(2014, 2, 14, 9, 15, 32, 376);
        String theCulture = "th-TH";
        // Array of all supported standard date and time format specifiers.
        String[] formats
            = { "d", "D", "f", "F", "g", "G", "m", "o", "r", "s", "t", "T", "u", "U", "Y" };
        //Corresponding date literals for the standard Thai regional settings
        String[] expectedResults
            = {"14/2/2557"
                , "14 กุมภาพันธ์ 2557"
                , "14 กุมภาพันธ์ 2557 9:15"
                , "14 กุมภาพันธ์ 2557 9:15:32"
                , "14/2/2557 9:15"
                , "14/2/2557 9:15:32"
                , "14 กุมภาพันธ์"
                , "2014-02-14T09:15:32.3760000"
                , "Fri, 14 Feb 2014 09:15:32 GMT" 
                , "2014-02-14T09:15:32"
                , "9:15"
                , "9:15:32"
                , "2014-02-14 09:15:32Z"
                , "วันศุกร์ที่ 14 กุมภาพันธ์ 2014 9:15:32"
                , "กุมภาพันธ์ 2557"};

        //Act
        String[] actualResults = new String[15];
        for (int i = 0; i < formats.Length; i++)
        {
            actualResults[i]
                = controller.FormatAsSpecified(theDate, theCulture, formats[i]);
        }

        //Assert
        CollectionAssert.AreEqual(expectedResults, actualResults);
    } 
```

我在'controller.FormatAsSpecified(theDate, theCulture,formats[i]);'的测试方法中遇到错误 上面写着“参数 3，无法从 'string' 转换为 'string[]'” 我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T17:01:57.927

改变

```
controller.FormatAsSpecified(theDate, theCulture, formats[i]); 
```

至

```
controller.FormatAsSpecified(theDate, theCulture, formats); 
```

* * *

我认为您应该将代码从

```
//Act
String[] actualResults = new String[15];
for (int i = 0; i < formats.Length; i++)
{
    actualResults[i]
        = controller.FormatAsSpecified(theDate, theCulture, formats[i]);
} 
```

至

```
 String[] actualResults = 
           controller.FormatAsSpecified(theDate, theCulture, formats); 
```

# javascript - Javascript - 删除部分字符串。

> ID：13894227
> 
> 赞同：0
> 
> 时间：2012-12-15T16:58:46.770
> 
> 标签：javascript

我有一个脚本，它从表单上的文件输入中获取文件名，并在删除一些不需要的细节后将其放入文本字​​段中。

我上传的所有文件都将标有关键字

请注意，这是针对 Chrome 扩展的，因此不需要 X 浏览器支持。

```
var filename = $("uploaded_data").val().toLowerCase();

filename = filename.replace(/_/g, " ").replace(/-/g, " ").replace("c:\\fakepath\\", "");

    type_index[1] = filename.indexOf("red"); 
    type_index[2] = filename.indexOf("blue");
    type_index[3] = filename.indexOf("green");
    type_index[4] = filename.indexOf("purple");
    type_index[5] = filename.indexOf("magenta");

    for (i=0 ; i > -1 ; i++ ) {
        if (type_index[i] > -1)
        {

        filename_final = filename.substring(type_index[i]);
        break;
        }
    }

$("#material_title").val(filename_final); 
```

现在这段代码工作正常，但是，我不希望颜色成为文件名的一部分。例如，如果输入文件名为“test_red_name_low.jpg”，则文本字段应为“name low.jpg”。目前，上面的代码输出'red name low.jpg'。其他时候，文件名可能是“this_is_a_test-blue_happy.jpg”，它应该输出“happy.jpg”。

type_index 数组最终将保存大量值，因此替换将是一种非常冗长的方法。

关于解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T17:14:18.873

这个正则表达式会做到这一点。

```
// add as many colors you like here. 
var colors = ['red','green', 'blue', 'magenta', 'purple'];
filename = filename.replace(/-|_|c:\\fakepath\\/g,' ')
    .replace(new RegExp("("+colors.join("|")+")", "g"), " ")
    .replace(/.*  /,'').trim() 
```

# c++ - 在 C 和 C++ 指针表示法中将星号放在哪里

> ID：13894228
> 
> 赞同：32
> 
> 时间：2012-12-15T16:59:00.120
> 
> 标签：c++, c

> **可能重复：**
> [在 C/C++ 中声明指针变量的正确方法](https://stackoverflow.com/questions/6990726/correct-way-of-declaring-pointer-variables-in-c-c)

一段时间以来，以下内容一直困扰着我，我应该将星号放在我的指针符号中的哪个位置。

```
int *var; // 1 
```

和

```
int* var; // 2 
```

显然做同样的事情，两种表示法都是正确的，但我发现我看到的大多数文献和代码都使用第一种表示法。

使用第二种表示法，用空格分隔类型和变量名，而不是混合类型和变量标记，会不会更“正确”？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-15T17:00:57.577

没有永不。`<g>`

但请考虑：

```
int* var1, var2; 
```

在这里， 的位置具有`*`误导性，因为它**不适**用于`var2`，它是 an`int`而不是`int*`。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-12-15T17:03:45.477

[Linux 内核编码风格](http://www.kernel.org/doc/Documentation/CodingStyle)约定是：

```
int *ptr1 , *ptr2; 
```

所以我认为你应该把它作为你的惯例。

> 在声明指针数据或返回指针类型的函数时，首选使用`*`与数据名或函数名相邻而不与类型名相邻。例子：

```
char *linux_banner;
unsigned long long memparse(char *ptr, char **retptr);
char *match_strdup(substring_t *s); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-12-15T17:01:49.550

我相信这种表示法的部分原因是变量的用法和声明看起来很相似。

```
int *var;
int x;
x = *var; 
```

你也可以认为它是说取消引用`var`会给你一个 int。

# localization - Xcode 本地化后，我无法从我的情节提要中添加内容

> ID：13894232
> 
> 赞同：0
> 
> 时间：2012-12-15T16:59:33.587
> 
> 标签：localization, ios-simulator, xcode4.5, uistoryboard

由于带有瑞典字符的奇怪搜索结果，我正在玩 Localization.strings，所以我在某处读到 Localization 是要做的事情。我错了，所以我删除了我刚刚制作的文件。

现在的问题是，如果我在情节提要中添加一个新对象，它不会出现在模拟器中。怎么了？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-09T21:19:55.470

我们刚刚遇到了同样的问题，看起来当故事板文件发生更改时，您可能需要从设备中删除应用程序以强制使用正确的版本。

希望这可以帮助！

最好的

# wpf - WPF 绑定 MVVM 中验证装饰器的可见性

> ID：13894233
> 
> 赞同：2
> 
> 时间：2012-12-15T16:59:42.413
> 
> 标签：wpf, validation, templates, mvvm

我目前正在使用 WPF 验证开发 MVVM 解决方案。

我想做的是能够在我的上下文中使用“ShowErrors”可见性属性来控制何时显示验证装饰器。

我的 Application.xaml 文件中包含 WPF 组合框验证装饰器的以下模板；

```
<Style TargetType="{x:Type ComboBox}">
            <Setter Property="VerticalAlignment" Value="Center" />
            <Setter Property="Margin" Value="0,2,40,2" />
            <Setter Property="Validation.ErrorTemplate">
                <Setter.Value>
                    <ControlTemplate>
                        <DockPanel LastChildFill="true">
                            <Border Background="Red" DockPanel.Dock="right" Margin="5,0,0,0" Width="20" Height="20" CornerRadius="10"
                            ToolTip="{Binding ElementName=customAdorner1, Path=AdornedElement.(Validation.Errors)[0].ErrorContent}">
                                <TextBlock Text="!" VerticalAlignment="center" HorizontalAlignment="center" FontWeight="Bold" Foreground="white">
                                </TextBlock>
                            </Border>
                            <AdornedElementPlaceholder Name="customAdorner1" VerticalAlignment="Center" >
                                <Border BorderBrush="red" BorderThickness="1" />
                            </AdornedElementPlaceholder>
                        </DockPanel>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style> 
```

（我有一个单独的文本框模板）

在 StackOverflow 和 Google 上进行了一些搜索后，我尝试将以下内容添加到 DockPanel；

```
Visibility="{Binding DataContext.ShowErrors, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Mode=TwoWay}" 
```

但这似乎对我不起作用，即使相同的方法在 Main XAML 中也能正常工作......有什么想法吗？

**编辑**：我将 DataContext 绑定到的 UserControl 的 x:Name 为“MainContext”

我发现了一些建议；

```
Visibility="{Binding DataContext.ShowErrors, Source={x:Reference Name=MainContext}, Mode=TwoWay}"> 
```

这给出了一个错误

> 未解决的参考'MainContext'

也;

```
Visibility="{Binding DataContext.ShowErrors, ElementName=MainContext, Mode=TwoWay}"> 
```

这只是行不通。

**Edit2**：如果我将整个装饰器移出 Appliation.xaml 并移入 UserControl 资源，则使用；

```
Visibility="{Binding DataContext.ShowErrors, ElementName=MainContext, Mode=TwoWay}"> 
```

它有效......虽然不理想，因为我不想在所有屏幕上重复模板

**编辑3：**好的，所以我现在找到了解决方法。我将以下内容用于可见性绑定...

```
Visibility="{Binding ElementName=customAdorner1, Path=AdornedElement.Parent.DataContext.ShowErrors, Converter={StaticResource MyBolVisibilityConverter}, Mode=TwoWay}" 
```

然后，我在上下文中添加了一个 Boolean ShowErrors 属性，并添加了一个 Converter 以将 Boolean 值转换为 Visibility 值，主要是因为 ShowErrors 属性实际结束的位置。

这有点令人困惑，因为我的表单是一个主详细信息安排，其中装饰器显示在详细信息部分中，它有自己的数据上下文。当然，这不能直接访问 UserControl 的 DataContext。

这对我来说真的有点像黑客，所以我希望有更好的解决方案！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T22:10:02.243

我通过向我的 DataContext 添加一个`ShowErrors`布尔属性来解决这个问题，然后将 Adorner Visibility 绑定到 AdornedElement 的父母 DataContext，当然如果我知道 DataContext。

我在 Application.xaml 文件中使用了以下 XAML；

```
<Converters:BolVisibilityConverter x:Key="MyBolVisibilityConverter"/>
<Style TargetType="{x:Type TextBox}">
      <Setter Property="VerticalAlignment" Value="Center" />
      <Setter Property="Margin" Value="0,2,40,2" />
      <Setter Property="Validation.ErrorTemplate">
          <Setter.Value>
              <ControlTemplate>
                        <DockPanel LastChildFill="true" Visibility="{Binding ElementName=customAdorner, Path=AdornedElement.Parent.DataContext.ShowErrors, Converter={StaticResource MyBolVisibilityConverter}, Mode=TwoWay}">
                            <Border Background="Red" DockPanel.Dock="right" Margin="5,0,0,0" Width="20" Height="20" CornerRadius="10"
                            ToolTip="{Binding ElementName=customAdorner, Path=AdornedElement.(Validation.Errors)[0].ErrorContent}">
                                <TextBlock Text="!" VerticalAlignment="center" HorizontalAlignment="center" FontWeight="Bold" Foreground="white">
                                </TextBlock>
                          </Border>
                          <AdornedElementPlaceholder Name="customAdorner" VerticalAlignment="Center" >
                         <Border BorderBrush="red" BorderThickness="1" />
                       </AdornedElementPlaceholder>
                   </DockPanel>
               </ControlTemplate>
           </Setter.Value>
      </Setter>
</Style> 
```

我使用了以下转换器代码；

```
Namespace Converters

    Public Class BolVisibilityConverter
        Implements IValueConverter

        Public Function Convert(value As Object, targetType As Type, parameter As Object, culture As Globalization.CultureInfo) As Object Implements IValueConverter.Convert

            If value Is Nothing OrElse value = False Then

                Return Visibility.Hidden

            Else

                Return Visibility.Visible

            End If

        End Function

        Public Function ConvertBack(value As Object, targetType As Type, parameter As Object, culture As Globalization.CultureInfo) As Object Implements IValueConverter.ConvertBack
            Return DirectCast(value, Boolean)

        End Function
    End Class

End Namespace 
```

然后，我只需将 DataContext 中的 ShowErrors 属性设置为 True 或 False 以显示或隐藏装饰器。

这非常有用，因为装饰器总是出现在最顶层，因此显示在自定义对话框等的顶部。

# c++ - 矢量没有正确擦除内容（复制分配运算符的无限量运行直到崩溃 [BEX]）？

> ID：13894238
> 
> 赞同：1
> 
> 时间：2012-12-15T17:00:39.053
> 
> 标签：c++, vector, structure, destruction, rule-of-three

好吧，我的问题是，在我想“卸载”加载的 DLL 之后，复制分配运算符被无限次调用，直到崩溃。

我从中删除矢量数据的代码如下所示：

```
void UnloadPlugins()
{
    dbg(("[DBG]UnloadPlugins()"));
    for(std::vector<DLLInfo>::iterator it = plugins.begin(); it != plugins.end(); ++it) 
    {
        plugins.erase(it);
    }
    dbg(("[DBG]UnloadPlugins()::Done"));
} 
```

但是“[DBG]UnloadPlugins()::Done”永远不会被打印出来。

这是我的复制分配运算符：

```
// 2\. copy assignment operator
DLLInfo& operator=(const DLLInfo& that)
{
    dbg(("[DBG]Start-DLLInfo& operator=(const DLLInfo& that)"));
    Instance = that.Instance;//hinstance
    dbg(("[DBG]DLLInfo 1"));
    //Identifier.assign(that.Identifier);//string
    dbg(("[DBG]DLLInfo 2"));
    IsAMX = that.IsAMX;//integer
    dbg(("[DBG]DLLInfo 3"));
    dwSupportFlags = that.dwSupportFlags;//integer
    dbg(("[DBG]DLLInfo 4"));
    Load = that.Load;//integer
    dbg(("[DBG]DLLInfo 5"));
    Unload = that.Unload;//integer
    dbg(("[DBG]DLLInfo 6"));
    Supports = that.Supports;//integer
    dbg(("[DBG]DLLInfo 7"));
    ProcessTick = that.ProcessTick;//integer
    dbg(("[DBG]DLLInfo 8"));
    AmxLoad = that.AmxLoad;//integer
    dbg(("[DBG]DLLInfo 9"));
    AmxUnload = that.AmxUnload;//integer
    dbg(("[DBG]DLLInfo 10"));
    UseDestructor = that.UseDestructor;//bool
    dbg(("[DBG]DLLInfo 11"));
    KeyboardHit = that.KeyboardHit;//integer
    dbg(("[DBG]End-DLLInfo& operator=(const DLLInfo& that)"));
    return *this;
} 
```

所以日志看起来像：

```
[17:50:50] [DBG]UnloadPlugins()
[17:50:50] [DBG]~DLLInfo    
[17:50:50] [DBG]~DLLInfo::if(this->UseDestructor) passed    
[17:50:50] [DBG]~DLLInfo::if(this->UseDestructor)::if(this->Unload != NULL && this->IsAMX) passed    
[17:50:50] [DBG]~DLLInfo::end    
[17:50:50] [DBG]Start-DLLInfo& operator=(const DLLInfo& that)    
[17:50:50] [DBG]DLLInfo 1   
[17:50:50] [DBG]DLLInfo 2    
[17:50:50] [DBG]DLLInfo 3    
[17:50:50] [DBG]DLLInfo 4    
[17:50:50] [DBG]DLLInfo 5    
[17:50:50] [DBG]DLLInfo 6    
[17:50:50] [DBG]DLLInfo 7    
[17:50:50] [DBG]DLLInfo 8    
[17:50:50] [DBG]DLLInfo 9    
[17:50:50] [DBG]DLLInfo 10    
[17:50:50] [DBG]DLLInfo 11    
[17:50:50] [DBG]End-DLLInfo& operator=(const DLLInfo& that)    
[17:50:50] [DBG]Start-DLLInfo& operator=(const DLLInfo& that)    
...  
[17:50:50] [DBG]End-DLLInfo& operator=(const DLLInfo& that)
...repeat until crash 
```

问题可能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T17:06:54.147

`erase`返回一个迭代器（[此处](http://www.cplusplus.com/reference/vector/vector/erase/)的文档），而不是`++it`在您的 for 中，您应该尝试`it = plugins.erase(it);`

但是看到你的代码，如果你只做`erase`所有事情，你最好打电话`clear`（[这里](http://www.cplusplus.com/reference/vector/vector/clear/)的文档）

# android - 在 Tasker 中使用变量

> ID：13894240
> 
> 赞同：0
> 
> 时间：2012-12-15T17:00:53.360
> 
> 标签：android

我正在尝试创建一个 Tasker 插件。

一切都很好，并且工作得很好。

我可以按照示例使用 EditActivity 和此代码配置要在我的应用程序中发送的字符串：

```
resultIntent.putExtra(com.twofortyfouram.locale.Intent.EXTRA_BUNDLE,PluginBundleManager.generateBundle(getApplicationContext(),message));

resultIntent.putExtra(com.twofortyfouram.locale.Intent.EXTRA_STRING_BLURB,generateBlurb(getApplicationContext(), message));

setResult(RESULT_OK, resultIntent); 
```

例如，当我想使用此代码获取电池电量时，问题就来了，所以我添加了：

```
resultIntent.putExtra("net.dinglisch.android.tasker.extras.VARIABLE_REPLACE_KEYS",com.twofortyfouram.locale.Intent.EXTRA_STRING_BLURB); 
```

但应用程序无法运行，结果我得到一个字符串 %BATT，变量没有被替换......

由于我没有找到任何示例，因此我很乐意获得一些帮助以使其正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T17:06:36.150

哎呀，我傻了：

```
public static Bundle generateBundle(final Context context,final String message, boolean variable) {
    final Bundle result = new Bundle();
    result.putInt(BUNDLE_EXTRA_INT_VERSION_CODE,
                Constants.getVersionCode(context));
    result.putString(BUNDLE_EXTRA_STRING_MESSAGE, message);

    result.putString("net.dinglisch.android.tasker.extras.VARIABLE_REPLACE_KEYS",BUNDLE_EXTRA_STRING_MESSAGE);
    return result;
} 
```

# jquery - jQuery Tablesorter 清除表信息

> ID：13894244
> 
> 赞同：9
> 
> 时间：2012-12-15T17:01:07.087
> 
> 标签：jquery, tablesorter

我创建了一个不时需要清除并重新填充的 jquery 表，我的清除方法是这样的：

```
//Clear table content before repopulating values
$('#table tr:gt(0)').remove(); 
```

现在我正在尝试使用 tablesorter 对特定列进行排序，但我的问题是当我启用 tablesorter 时：

```
//Initialize tablesorter
$("table").tablesorter(); 
```

清表方法已经不行了，它只是不断地在旧数据中添加新数据，造成大量重复信息。

请帮忙

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-16T15:30:00.890

要更新 tablesorter，需要在更新其缓存之前触发“更新”

```
$('table').trigger('update'); 
```

您还可以使用内置函数清除表格

```
$.tablesorter.clearTableBody( table ); 
```

这是[此演示中组合的代码](http://jsfiddle.net/Mottie/eY8uH/333/)

```
var $table = $('table');

// use built in clear function
$.tablesorter.clearTableBody( $table[0] );
$table
    .append('<tr><td>george</td><td>papard</td><td>68</td><td>19.99</td><td>55%</td><td>+3</td></tr>')
    .trigger('update'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T17:32:39.673

我看不出它不应该工作的原因。它在没有 tablesorter 插件的情况下工作吗？

`tablesorter()`为什么正在调用`table`但尝试从中删除行`#table`？错字？

尝试记录 jQuery 对象`$('#table')`，看看那里的一切是否正确`$('#table tr')`。`$('#table tr:gt(0)')`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-15T14:36:24.633

我可以使它工作的唯一方法是重新生成整个表（删除它然后再次创建）。

```
$(".resultTablePlaceholder").html('').html('<table id="resultTable">...</table>');
$("#resultTable").tablesorter(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-01T09:33:22.307

原因：

这是因为当我们在表中添加任何数据时，它会触发 buildCache() 方法并将表数据保存在缓存变量中，但是当您从表中删除数据时，它不会对缓存变量进行任何更改。

当您对数据进行排序时，它将清除表并将缓存的数据附加到表中，因此也存在已删除的数据。

解决方案：

您可以在 tablesorter.js 中修改 onselectstart() 函数或 mousedown 事件

```
//here tb_35 = id of table 
cache = buildCache($('#tb_35')[0]); 
```

# oop - 是否有适当的方法来处理多个错误/异常？

> ID：13894246
> 
> 赞同：0
> 
> 时间：2012-12-15T17:01:13.553
> 
> 标签：oop, exception, exception-handling

在 OO 编程中，是否有一些关于处理多个错误的概念模式、想法？

例如，我有一个执行一些检查的方法，并且应该为发现的每个错误返回一条错误消息

['名称太短', '名称包含无效的 unicode 序列', '名称太长']

现在，我应该使用一组异常（不是抛出的异常）吗？

或者像这样更好：

```
class MyExceptionList extends Exception{
  public Void addException(Exception e){}
  public Array getExceptions(){}
} 
```

这个论点背后的任何理论将不胜感激！

（这不是对特定编程语言的要求，而是纯粹的理论要求）

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T17:35:04.407

根据我多年的经验，最好通过在所有级别记录错误来处理错误，并从函数中返回真/假，指示成功/失败。

日志记录依赖于实现。它可以是文件、内存，您可以记录消息、唯一编号等，只要日志能够让您查明错误的确切位置。

我有时会使用异常，在我执行许多操作的情况下，每个操作都取决于其前身的成功。这使代码更干净，没有`if`用于错误检查的 s。然而，这不是主要关心的事情。主要是记录错误，并返回成功/失败。需要成功/失败，以便您可以决定是否继续正常方式（例如不执行缩进操作，因为读取大小可能会超出内存）。

还有两个重要的注意事项：

1) 你必须构建一个超级简单的 API 来报告（记录）你的消息，否则你会发现自己推迟了这个关键的事情，最终没有去做。

2) 日志或报告必须易于查看，并在出现问题时告知您问题。否则，您可能会发现自己根本没有使用错误报告机制。

这对我来说是一个非常重要的主题，我相信它是软件工程中最重要的问题之一。[你可以在我的网站](http://www.codechords.com/index.php?option=com_content&view=article&id=56%3areturned-error-codes-what-to-do-with-them&catid=37%3asoftware&Itemid=55)上阅读更多关于它的信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T02:23:08.453

不幸的是，许多语言和框架（包括 C++、Java 和 .net）使用异常处理机制，该机制需要异常对象的*类型来同时回答许多问题，包括：*

1.  发生了什么
2.  除了堆栈展开之外还需要采取什么行动
3.  在什么时候系统应该被认为处于“已知”状态，至少对于异常所指示的问题。

不幸的是，虽然这些问题的答案有些相关，但它们实际上远非 100% 相关。不幸的是，假设异常的类型足以回答所有这些问题，因此很难明智地处理许多情况。

如果您可以控制所有可以抛出的异常，那么使用异常处理范例可能会有所帮助，其中异常处理对象包括一个虚拟`IsResolved`属性或方法以及一个`ShouldCatchAs<T>`属性或方法，该属性或方法`T`在异常需要时返回作为`T`. 这样的范例将能够顺利处理从早期异常展开堆栈时发生异常的情况（现有异常和新异常将被包装到复合异常对象中，其`ShouldCatchAs`属性将结合原始异常的属性，并且只有当两个原始异常的属性都相同时，`IsResolved`属性才应该返回）。`true``IsResolved`

I don't know any way to integrate such behavior into the existing frameworks unless one catches and wraps all exceptions that don't fit the paradigm, but perhaps future frameworks can facilitate such things.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T17:06:17.757

那你不应该扔`Exception`s 。

An`Exception`用于**特殊情况**。在验证方法上发现的错误不被视为“异常”，很明显会发生验证错误。

例如，当您尝试连接到数据库失败时，就会出现**异常**情况。

您应该将所有验证错误记录到一个数组中，然后将其格式化并根据需要显示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T17:07:08.787

异常并非用于验证，它们旨在在执行期间发生与预期不同的事情时创建。这就是为什么你不能一次创建许多异常，但是异常可能是因为发生了其他一些异常而导致的，这就是为什么它们可以有一个名为 case 的父异常。

# ruby-on-rails - 删除连接的对象

> ID：13894247
> 
> 赞同：0
> 
> 时间：2012-12-15T17:01:32.280
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个用户类，其中`has_many`地址 - 和地址`belongs_to`用户。
我如何定义它，以便当一个地址被删除时它`user.adresses`也会被删除，反之亦然，如果我这样做`user.addresses.delete(address)`，那么它不再出现在`Addresses.all`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T17:24:29.517

To destroy addresses when a user is deleted, you can declare it on the association.

```
class User < ActiveRecord::Base
  has_many :addresses, :dependent => :destroy #destroy addresses when user destroyed
end 
```

You don't need to do anything for the other way around, since the foreign key is on the `Address` model.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T17:31:57.620

您需要在 User 模型的 has_many 关系中传递 :dependent => :destroy

```
has_many :addresses, :dependent => :destroy 
```

如果您这样做，则如果删除了用户，则与该用户关联的所有地址对象也将被删除。

# git - 如何永久删除 project.xcworkspace 下的 xcuserdata 并解决未提交的更改

> ID：13894248
> 
> 赞同：1
> 
> 时间：2012-12-15T17:01:37.790
> 
> 标签：git, version-control, merge, xcode4.5

我正在努力解决合并冲突的问题（请参阅[由于与 UserInterfaceState.xcuserstate 冲突而无法合并](https://stackoverflow.com/questions/13870652/cannot-merge-due-to-conflict-with-userinterfacestate-xcuserstate)）。根据反馈，我需要使用 git rm 删除 UserInterfaceState.xcuserstate。

经过大量实验，我能够使用“git rm -rf project.xcworkspace/xcuserdata”删除该文件。因此，当我在我正在处理的分支上时，它几乎立即作为需要提交的文件返回。所以我再次对文件执行了 git rm 并切换回主控。然后我再次对文件执行了 git rm 。该操作再次删除了该文件。

但我仍然卡住了。如果我尝试将分支合并到主分支，它再次表示我有未提交的更改。所以我去提交改变。但这一次，它显示 UserInterfaceState.xcuserstate 为要提交的文件，但该框未选中，无法选中。所以我无法前进。我什至无法切换回我的分支。文件 UserInterfaceState.xcuserstate 显示它处于“D”状态，这显然意味着它已被删除。有没有办法使用'git rm'永久删除project.xcworkspace下的xcuserdata？我应该尝试将其放回存储库吗？如果是这样，如何。

帮助！！有任何想法吗？

更新：

我粘贴 git status 的结果

```
Changes to be committed:
   modified: project.pbxproj
   modified: [a list of all the files to be merged]

Unmerged paths:
   (use "git add/rm <file>..." as appropriate to mark resolution)
   deleted by us: project.xcworkspace/xcuserdata/[username].xcuserdatad/UserInterfaceState.xcusers‌​tate 
   both modified: ../[projectname]/en.lproj/Localizable.strings 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2021-06-29T08:40:11.607

这是我从提交中删除 xcuserdata/xcuserstate 的步骤

1- 从这里生成 .gitignore： [https ://www.toptal.com/developers/gitignore](https://www.toptal.com/developers/gitignore)

2- 使用终端将 .gitignore 添加到项目中：

*   在终端导航到项目根文件并键入：`touch .gitignore`

3- 转到项目文件夹中的文件，打开它，然后粘贴在第一步中生成的代码。

4-仍在项目类型中的终端中`git add .gitignore`

5- 同样在终端中，通过键入以下命令从 git 中删除 xcuserstate：`git rm <whole path to xcuserstate>`

如果您不知道路径，`git status`请从那里键入并复制整个 xcuserstate 路径。

6- 在 Xcode 中提交，您不应该看到 xcuserstate 文件，因为您`.gitignore`分别在步骤 2 和 5 中从 git 中添加和删除了它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T20:04:06.943

如果您删除了分支中的文件，为什么不将您的分支合并到 master 中？这应该已经足够了。

我认为您可能会发生冲突，因为您删除了两个分支中的文件，这就是为什么您无法从一个分支切换到另一个：在冲突解决之前您将无法执行此操作。要解决此文件的冲突，只需提交一次，因为它被标记为已删除 (D)。如果您有其他文件，请检查在解决冲突时是否跳过任何​​新添加的文件。

还要确保你的 .gitignore 中有一条规则来忽略 xcuserdata 文件，以防止 git 尝试再次将其添加到索引中，看看这个问题：[gitignore file for xcode projects](https://stackoverflow.com/questions/49478/git-ignore-file-for-xcode-projects)

# javascript - 函数参数的最大长度

> ID：13894250
> 
> 赞同：0
> 
> 时间：2012-12-15T17:01:41.173
> 
> 标签：javascript, function-parameter

JavaScript function() 参数是否有最大长度？

我创建了一个具有长参数的函数，但它不起作用。当我缩短相同函数的参数时，它起作用了。这是否意味着函数参数有最大长度？如果是这样，请推荐我当前方法的替代方法。

**JavaScript**

```
function example(idnum) {
   alert(idnum);
} 
```

**HTML**

```
<div onclick='example(*php variable,no special character included*)'></div> 
```

当 PHP 变量较长时，如“17b6f557969619544eb1e6cd58c3f341”，则不起作用。但是，如果我将变量更改为“203”之类的东西，该函数就会成功运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T19:38:43.793

听起来您实际上想将 PHP 变量的值按字面意思传递给函数，而不是作为变量名。

```
example(17b6f557969619544eb1e6cd58c3f341) 
```

尝试使用该变量调用函数（可能导致异常，甚至是语法错误），而

```
example(203) 
```

使用整数的数字文字调用函数`203`。如果要将值作为字符串传递，请使用`json_encode`!

另请注意，您需要转义所有内容以在 HTML 属性中使用（即转义引号、< 和 >），因为您有

```
<div onclick=" [some code here] "> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T18:28:56.317

> “Douglas Crockford”在消息新闻中写道：9a027$3fa7c56d$44a4aebc$9152@msgid.meganewsse rvers.com... [color=blue]
> 
> > ... . 最大长度将是特定于实现的。...[/颜色]
> 
> 在 microsoft.public.scripting.jscript 中，Michael Harris (Microsoft.MVP.Scripting)，可能应该知道，引用：-
> 
> 在 JScript 中，变体字符串变量具有与 VBScript 中相同的限制，最多 2^31 个字符。
> 
> 字符串*文字*（如“这是一个文字”）具有（IIRC）限制〜2 ^ 10（1024）个字符。
> 
> *   用于 JScript 实现。
> 
> > 块引用

# asp.net - 更改 AjaxFileUpload 文本按钮

> ID：13894251
> 
> 赞同：1
> 
> 时间：2012-12-15T17:01:42.127
> 
> 标签：asp.net, file-upload

有没有办法从 ajaxFileupload 示例中更改文本按钮：“选择文件”“删除”“待处理”“上传”“上传”

将这些文本更改为自定义文本？我正在使用 asp.net c# 和最后一个 ajaxtoolkit 库，任何想法都会有所帮助。先感谢您。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-15T17:14:53.060

尝试以下，`AjaxFileUpload_change_text()`页面加载后运行功能（即 on `Document.ready`）。这里已经使用了jQuery。

```
 <script type="text/javascript">

     $(document).ready(function () {
         AjaxFileUpload_change_text();

     });

     function AjaxFileUpload_change_text() {
         Sys.Extended.UI.Resources.AjaxFileUpload_SelectFile = "Select File";
         Sys.Extended.UI.Resources.AjaxFileUpload_DropFiles = "Drop files here";
         Sys.Extended.UI.Resources.AjaxFileUpload_Pending = "pending";
         Sys.Extended.UI.Resources.AjaxFileUpload_Remove = "Remove";
         Sys.Extended.UI.Resources.AjaxFileUpload_Upload = "Upload";
         Sys.Extended.UI.Resources.AjaxFileUpload_Uploaded = "Uploaded";
         Sys.Extended.UI.Resources.AjaxFileUpload_UploadedPercentage = "uploaded {0} %";
         Sys.Extended.UI.Resources.AjaxFileUpload_Uploading = "Uploading";
         Sys.Extended.UI.Resources.AjaxFileUpload_FileInQueue = "{0} file(s) in queue.";
         Sys.Extended.UI.Resources.AjaxFileUpload_AllFilesUploaded = "All Files Uploaded.";
         Sys.Extended.UI.Resources.AjaxFileUpload_FileList = "List of Uploaded files:";
         Sys.Extended.UI.Resources.AjaxFileUpload_SelectFileToUpload = "Please select file(s) to upload.";
         Sys.Extended.UI.Resources.AjaxFileUpload_Cancelling = "Cancelling...";
         Sys.Extended.UI.Resources.AjaxFileUpload_UploadError = "An Error occured during file upload.";
         Sys.Extended.UI.Resources.AjaxFileUpload_CancellingUpload = "Cancelling upload...";
         Sys.Extended.UI.Resources.AjaxFileUpload_UploadingInputFile = "Uploading file: {0}.";
         Sys.Extended.UI.Resources.AjaxFileUpload_Cancel = "Cancel";
         Sys.Extended.UI.Resources.AjaxFileUpload_Canceled = "cancelled";
         Sys.Extended.UI.Resources.AjaxFileUpload_UploadCanceled = "File upload cancelled";
         Sys.Extended.UI.Resources.AjaxFileUpload_DefaultError = "File upload error";
         Sys.Extended.UI.Resources.AjaxFileUpload_UploadingHtml5File = "Uploading file: {0} of size {1} bytes.";
         Sys.Extended.UI.Resources.AjaxFileUpload_error = "error";
     }

</script> 
```

# objective-c - Objective-C 简单继承与 OO 原理

> ID：13894256
> 
> 赞同：0
> 
> 时间：2012-12-15T17:02:03.827
> 
> 标签：objective-c, design-patterns, inheritance

我有一个继承自基类 BaseClass 的子类 SubClass。

BaseClass 有一个初始化器，如下所示：

```
-(id)init {
    self = [super init];
    if(self) {
       [self commonInit];
    }
  return self;
 }

 -(void)commonInit {
     self.goodStuff = [[NSMutableArray alloc]init];
 } 
```

SubClass 执行其初始化程序，如下所示：

```
-(id)init {
    self = [super init];
    if(self) {
       [self commonInit];
    }
  return self;
 }

 -(void)commonInit {
     self.extraGoodStuff = [[NSMutableArray alloc]init];
 } 
```

现在，我*从未参加过合适的 Objective-C 课程，但我是一名电气工程方面的程序员，所以我凑合了。不过，我主要使用 Java 开发了服务器端应用程序，因此我可能通过 Java 原理看到了 OO 世界。

当 SubClass 被初始化时，它会调用 BaseClass init，而我的期望是——因为继承对我来说意味着 BaseClass 的特征会传递给 SubClass——BaseClass 中的 commonInit 方法将在 BaseClass init 期间被调用。

它不是。我可以*有点理解为什么它不会。但是，那么——为什么不基于 OOP 的原则呢？如果不是运行代码的类的实例，“self”代表什么？

好的，所以——我不会争辩说，一个成熟的 Objective-C 版本所做的事情是错误的。那么，在这种情况下我应该使用什么模式？我希望 SubClass 有两个主要部分——BaseClass 拥有的 goodStuff 以及它应得的 extraGoodStuff。

显然，在这种情况下，我一直在使用错误的模式。我是否打算公开 commonInit（这让我对封装原则感到疑惑——为什么要公开至少在 Java 世界中会被认为是“受保护”并且每个实例只应调用一次的东西）？

最近我遇到了类似的问题并试图解决它，但现在——我真的想知道我是否已经把我的原则和概念都放在脑海里了。

一点帮助，请。

* * *

让我澄清一下——当我在 super 上调用 init 时，我得到 self 最终成为子类。我在调试时可以看到，等等。

在这种情况下覆盖方法的模式是什么？我在哪里有一些常见的初始化可以从超类中的几个 init 方法调用？我是否必须将代码放入 init 的每个变体中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T17:10:46.730

`self`并且`super`只是指向内存位置的指针，它们指向分配对象的相同地址，但它们被 Objective-C 编译器特殊对待：

`super`在第一个超类型开始重载决议，即。父类型（`BaseClass`在这种情况下）。

`self`在指针指向的当前运行时类型开始重载决议。这就是为什么你不能调用`BaseClass commonInit`from `BaseClass`，因为`self`指向 a `SubClass`。如果你想这样做，你应该有`commonInit`in `SubClass`call `[super commonInit]`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T17:09:32.947

`self`在您的示例中的 BaseClass 构造函数中的类型为`SubClass`，因此`[self commonInit]`调用`SubClass`'commonInit override ，而不是`BaseClass`'commonInit 方法。

# java - Primefaces dataTable中的InputText未刷新

> ID：13894257
> 
> 赞同：0
> 
> 时间：2012-12-15T17:02:07.167
> 
> 标签：java, jsf, primefaces

当表单处于可编辑模式时，我需要在 primefaces 数据表中包含 inputTexts。

除了使用 immediate="true" 进行表单清理（没有表单验证）外，一切都正常工作。然后 primefaces 数据表的行为不可预测。用新数据填充数据表后 - 它仍然存储旧值。

简短示例 - 显示 h:dataTable 和 p:dataTable 之间的差异 -**但当示例中只有三个表之一时，它的工作方式相同**：test.xhtml

```
<h:body>
    <h:form id="form">

        <p:dataTable var="v" value="#{test.list}" id="testTable">
            <p:column headerText="Test value">
                <p:inputText value="#{v}"/>
            </p:column>
        </p:dataTable>

        <h:dataTable var="v" value="#{test.list}" id="testTable1">
            <h:column>
            <f:facet name="header">
                <h:outputText value="Test value" />
            </f:facet>
                <p:inputText value="#{v}" />
            </h:column>
        </h:dataTable>

        <p:dataTable var="v" value="#{test.list}" id="testTable2">
            <p:column headerText="Test value">
                <h:outputText value="#{v}" />
            </p:column>
        </p:dataTable>

        <p:commandButton value="Clear" actionListener="#{test.clear()}" immediate="true" update=":form:testTable :form:testTable1 :form:testTable2"/>
        <p:commandButton value="Update" actionListener="#{test.update()}" update=":form:testTable :form:testTable1 :form:testTable2"/>
    </h:form>
</h:body> 
```

和java：

```
import java.io.Serializable;
import java.util.ArrayList;
import java.util.List;

import javax.annotation.PostConstruct;
import javax.faces.bean.ViewScoped;
import javax.inject.Inject;
import javax.inject.Named;

@Named
@ViewScoped
public class Test implements Serializable {

    private static final long serialVersionUID = 1L;

    private List<String>            list;

    @PostConstruct
    private void init(){
        update();
    }

    public List<String> getList() {
        return list;
    }

    public void setList(List<String> list) {
        this.list = list;
    }

    public void clear() {
        list = new ArrayList<String>();
    }

    public void update() {
        list = new ArrayList<String>();
        list.add("Item 1");
        list.add("Item 2");     
    }
} 
```

在上面的示例中，我有 3 个配置： 1\. p:dataTable 和 p:inputText 2\. h:dataTable 和 p:inputText 3\. p:dataTable 和 h:outputText

和 2 个按钮：第一个清除数据，第二个应用数据

工作流程：

1.  尝试更改 p:dataTable 和 h:dataTable 中 inputTexts 中的数据

2.  清除列表数据（字符串数组列表） - 单击“清除”按钮（假设您在表单上单击取消，因为您不想将数据存储到数据库）

3.  加载新数据 - 单击“更新”按钮（假设您正在使用新数据打开新表单）

**问题：** 为什么 p:dataTable 和 p:inputText 仍然存储手动更改的数据，而不是加载的数据？在这种情况下，有没有办法强制 p:dataTable 表现得像 h:dataTable ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T16:04:44.700

解决办法是：**primefaces resetInput**

在我的示例中，它将是：

```
 <p:commandButton value="Clear" actionListener="#{test.clear()}" immediate="true"
          update=":form:testTable :form:testTable1 :form:testTable2"> 
    <p:resetInput target=":form:testTable" />
 </p:commandButton> 
```

**编辑：** 在某些情况下 - 如果上述方法不起作用 - 尝试 primefaces 扩展中的一个：

```
<pe:resetInput for=":form:testTable" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T17:35:56.877

您遇到的问题是在提交表单时，正在为绑定到表单中此列表的`#{test.list}`每个数据表（`<p>`或）提交值。`<h>`换句话说：

*   JSF 会将数据表的值绑定`testTable`到您的`#{test.list}`.

*   JSF 会将数据表的值绑定`testTable1`到您的`#{test.list}`. 这些值将替换从数据表绑定的值`testTable`，并且那里的数据将丢失。`#{test.list}`将包含 中的数据`testTable1`。

*   JSF 会将数据表的值绑定`testTable2`到您的`#{test.list}`. 由于此处的值是*旧值*，因此这些值将是提交的值`#{test.list}`。

解决此问题的最佳方法是在托管 bean 中使用单个`<p:dataTable>`（或`<h>`，取决于您的需要）和一个属性来控制您的表是处于查看模式还是编辑模式。

JSF 代码

```
<h:form id="form">
    <p:dataTable var="v" value="#{test.list}" id="testTable">
        <p:column headerText="Test value">
            <h:outputText value="#{v}" rendered="#{not test.editMode}" />
            <p:inputText value="#{v}" rendered="#{test.editMode}" />
        </p:column>
    </p:dataTable>

    <p:commandButton value="Clear" actionListener="#{test.clear()}" immediate="true"
        update="testTable" />
    <p:commandButton value="Update" actionListener="#{test.update()}"
        update="testTable" />
    <!-- adding a new button just for testing purposes -->
    <p:commandButton value="Submit list" action="#{test.submit}" />
</h:form> 
```

托管 Bean 代码

```
//no need of CDI
@ManagedBean
@ViewScoped
public class Test implements Serializable {

    private List<String> list;
    private boolean editMode = false;

    public Test() {

    }

    @PostConstruct
    private void init(){
        update();
    }

    public List<String> getList() {
        return list;
    }

    public void setList(List<String> list) {
        this.list = list;
    }

    public void clear() {
        list = new ArrayList<String>();
    }

    public void update() {
        list = new ArrayList<String>();
        list.add("Item 1");
        list.add("Item 2");     
    }

    //method for testing purposes
    public void submit() {
        //in real life web apps, you should log the messages, don't use System.out
        System.out.println("Showing actual values of list attribute.");
        for(String s : list) {
            System.out.println(s);
        }
    }
} 
```

# ios - 如何从 UIAlertViewStylePlainTextInput 检索文本

> ID：13894266
> 
> 赞同：9
> 
> 时间：2012-12-15T17:03:01.860
> 
> 标签：ios, objective-c, uialertview

我正在`UIAlertView`使用`PlainTextView`样式调用 a，并且我正在尝试弄清楚如何在用户单击确定之前访问用户在文本视图中输入的任何内容。

我正在使用`willDismissWithButtonIndex`，`alertView`它似乎没有任何属性，如文本或任何东西。

我怎样才能得到它？提前致谢！

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-12-15T17:05:45.880

获取文本字段

```
UITextField *textfield =  [alertView textFieldAtIndex: 0]; 
```

在您的委托方法中。有关详细信息，请参阅文档。

编辑 2015 年 3 月，由于许多观点迅速等效：

```
let textfield = alertView.textFieldAtIndex(0) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-06T12:57:19.163

> UITextField *textfield = [alertView textFieldAtIndex: 0];

在 uialertview 委托中使用它

```
- (void)alertView:(UIAlertView *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex
{
   UITextField *textfield =  [alert_name textFieldAtIndex: 0];
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T17:06:08.583

使用它的方法：

```
- (UITextField *)textFieldAtIndex:(NSInteger)textFieldIndex 
```

对于索引 0。

# android - 如何向以编程方式创建的 MapView/View 添加滑动抽屉

> ID：13894267
> 
> 赞同：0
> 
> 时间：2012-12-15T17:03:02.737
> 
> 标签：android, android-activity, android-mapview

我试图从不同的角度来解决这个问题，但没有运气。也许问一个一般性问题会有所帮助。

从技术上讲，我使用的是 osmdroid 的 MapView 实现，而不是 Google 的 Maps API，但我认为这个问题是更通用的编程视图与 onCreate 中定义的 main_activity.xml 视图。

基本上在我的 MainActivity 中，如果我创建一个视图，如 MapView，然后以编程方式将其设置为 ContentView，我还必须以编程方式添加我想在我的应用程序中显示的任何其他视图：

```
public void onCreate(final Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.mapView = new MapView(this, 256);
    ...
    this.setContentView(this.mapView);
} 
```

如果我尝试将 ContentView 设置为 activity_main，则无法在创建时调整 MapView。也许我错过了一些东西：（请注意，我有处理加载自定义离线图块集的方法，并在地图上放置标记等......）

```
public void onCreate(final Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    this.mapView = (MapView)findViewById(R.id.mapview);
    ...
    this.intializeMapTiles();
    this.mapView.setBuiltInZoomControls(true);
    this.mapView.setMultiTouchControls(true);
    this.mapController.setCenter(new GeoPoint((int)(50.349622 * 1E6), (int)(-71.823700 *1E6)));
    ...
    this.mapView.invalidate();
} 
```

在这种情况下，这是我的 activity_main.xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <org.osmdroid.views.MapView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mapview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:clickable="false"/>

</RelativeLayout> 
```

当尝试从 ContentView (acitivty_main) 获取 MapView 时，我对它的任何方法更改都不会产生任何影响。就好像我无法访问正在呈现的确切 MapView。我试过让我的 MapView 无效，但这没关系。我得到一个默认外观和行为的 MapView。

我试图解决这个问题的原因自然是我在寻找我的应用程序来包含多个 MapView。我想包括一个SlidingDrawer，或者一些显示带有按钮的视图的方法，只有在你长按地图标记时才会显示。（请注意，我在地图标记长按时会显示 Toast 弹出窗口，所以我在这方面做得很好）

我必须以编程方式而不是从 main_activity.xml 添加这些其他视图（SlideingDrawer 等）。即使这样也有一个 catch-22，其中 SlidingDrawer 构造函数需要一个来自 xml 的 AttributeSet，这对自己构建来说很痛苦。（我试过了）那么你也必须担心布局。

有人有什么建议吗？通用还是其他？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T05:23:55.963

出于多种原因，这实际上可能对其他人有用。

如果您不得不使用只能通过其编程构造函数配置所需方式的视图（例如，您可以只包含 activity_main.xml 中的视图，但视图不是您需要的，除非您自己构建它，就像使用 OSMDroid 的 MapView 使用离线平铺地图一样）然后您就无法扩展该视图并实现包含 AttributeSet 的该视图的构造函数。AttributeSet 基本上是从该视图的 activity_main.xml xml 解析的结构。当您从 onCreate() 中调用 this.setContentView(R.layout.activity_main) 时，该构造函数将在 Activity 中自动调用。因此，任何自定义构造函数的内容都需要进入扩展视图的构造函数。

例如，我必须扩展 OSMDroid MapView，然后完全从超级实现我的离线地图瓦片源。注意你必须 super() 扩展构造函数的第一行，因为对象方法在继承的构造函数完成之前不可用，所以任何 super() 方法调用都必须是静态方法。

```
public class FieldMapView extends MapView {
    public FieldMapView(Context context, AttributeSet attrs) throws Exception {
        super(
            context, 
            256, 
            new DefaultResourceProxyImpl(context), 
            FieldMapView.getOfflineMapProvider(context, MainActivity.mapTileArchiveFilename),
            null,
            attrs); 
        this.setUseDataConnection(false);
        this.setBuiltInZoomControls(false);
        this.setMultiTouchControls(true);
    } 
```

然后在我的activity_main.xml中我指向视图的扩展版本：（例如FieldMapView）

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/rootview"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <com.test.FieldMapView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/mapview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:clickable="false"/> 
```

所以现在我有我的扩展视图来处理任何程序化样式要求，我是如何让 SlidingDrawer 使用它的？我创建了一个以 0dip 高度视图作为句柄的 SlidingDrawer。然后我包含了一个 LinearLayout ，其中包含按钮，任何你想要的等等......

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/rootview"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <com.test.FieldMapView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/mapview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:clickable="false"/>

    <SlidingDrawer
        android:layout_width="wrap_content"
        android:id="@+id/slidingDrawerActions"
    android:content="@+id/action_content"
    android:padding="10dip"
    android:layout_height="75dip"
        android:handle="@+id/handle2"
        android:layout_alignBottom="@id/mapview"
    android:orientation="vertical"
    android:clickable="false">

        <LinearLayout
            android:layout_width="wrap_content"
            android:id="@+id/action_content"
            android:orientation="horizontal"
            android:gravity="center"
            android:padding="10dip"
            android:background="#FF999999"
            android:layout_height="wrap_content"
            android:clickable="false">

            <View
                android:id="@id/handle2"
                android:layout_width="0dip"
                android:layout_height="0dip" />
            <ImageButton
                android:id="@+id/chatActionButton"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_margin="2dip"
                android:src="@drawable/ic_action_edit"
                android:text="Chat">
            </ImageButton>
    </LinearLayout>
    </SlidingDrawer>
</RelativeLayout> 
```

在我的 MainActivity onCreate() 中，我只是找到 SlidingDrawer 视图并相应地分配任何侦听器。为了在 MapView 中长按 Marker 时打开抽屉（这现在变得更加特定于 OSMDroid），我自然有一个 OnItemGestureListener 来打开抽屉：

```
class NodeGestureListener implements OnItemGestureListener<NodeOverlayItem> {
    @Override
    public boolean onItemLongPress(int index, NodeOverlayItem node) {
        if(slidingDrawerActions.isOpened() || slidingDrawerActions.isMoving()) {
            return false;
        }
        slidingDrawerActions.animateOpen();
        return false;
    } 
```

棘手的部分是我想通过单击 MapView 来关闭它（而不是通过触摸占用空间的关闭按钮），所以我必须分配 SlidingDrawer.OnDrawerOpenListener 和 OnDrawerCloseListener 类。他们只是简单地翻转一个布尔值，指示抽屉是打开还是关闭。然后，我为 MapView 设置了一个简单的 onClickListener，如果它基于 SlidingDrawer 侦听器设置的 isActionDrawerOpen 打开，则关闭抽屉。

```
public void onCreate(final Bundle savedInstanceState) {
    ...
    this.mapView.setOnClickListener(new MapViewClickListener());
    ...
    this.slidingDrawerActions = (SlidingDrawer)findViewById(R.id.slidingDrawerActions);
    this.slidingDrawerActions.setOnDrawerOpenListener(new SlidingDrawerOpenListener());
    this.slidingDrawerActions.setOnDrawerCloseListener(new SlidingDrawerCloseListener());
    ...
}

...

private boolean isActionDrawerOpen = false;
class SlidingDrawerOpenListener implements SlidingDrawer.OnDrawerOpenListener {
    @Override
    public void onDrawerOpened() {
        isActionDrawerOpen = true;
    }
}
class SlidingDrawerCloseListener implements SlidingDrawer.OnDrawerCloseListener {
    @Override
    public void onDrawerClosed() {
        isActionDrawerOpen = false;
    }
}

private boolean skippedMapViewClickListener = false;
class MapViewClickListener implements OnClickListener {
    public void onClick(View view) {
        if(isActionDrawerOpen) {
            if(skippedMapViewClickListener) {
                slidingDrawerActions.animateClose();
                skippedMapViewClickListener = false;
            } else {
                skippedMapViewClickListener = true;
            }
        }
    }
} 
```

Note the skippedMapViewClickListener boolean. The problem I had was that the MapView OnClickListener would be called immediately after the SlidingDrawer listener when long pressing the Marker. Meaning the long press would be considered a MapView click, plus the long press itself would open the drawer before OnClickListener was called, so OnClickListener would always see the drawer as open, and would close it. What I did was effectively skip the 1st onClick this way, so the drawer would stay open until you clicked on the MapView. Seems to work great.

I hope this helps someone. There are like 4 problems I solved with this approach.

# jquery-ui - jQuery UI 为放置目标选择外部容器而不是内部容器

> ID：13894269
> 
> 赞同：0
> 
> 时间：2012-12-15T17:03:09.907
> 
> 标签：jquery-ui, jquery-selectors

我正在尝试使用 jQuery UI 仅选择放置目标的外部容器。

我正在尝试放入媒体内容，但不在媒体列表项中。

原因是 media-list-items 不是其父项的全宽，我只想下降到右侧，这是全高的不同背景色。

HTML：

```
<div class="media-content clearfix ui-droppable on" style="">
    <form method="post" class="form-horizontal" action="./">
        <fieldset>
            <div class="media-list-items clearfix"> 
                <ul data-gallery_id="18" class="media-list ui-sortable" style="">
                    <li id="media_17"></li>
                    <li id="media_15"></li>
                </ul>
            </div>
        </fieldset>
    </form>
</div> 
```

JS：

```
var $trash = $('.media-content:not(.media-list-items), .media-content');
    $trash.droppable({ 
    accept: '.media-list > li',  
    drop: function(event, ui) {
        console.log('trashed');
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T15:20:46.540

我不确定您是否可以在不添加其他元素作为“垃圾”droppable 的情况下实现您想要的。使用一些整洁的 css，你可以让它看起来几乎一样 :)

**html**

```
<div class="media-content">
    <form method="post" class="form-horizontal" action="./">
        <fieldset>
            <div class="trash"></div> <!-- added a trash element -->
            <div class="media-list-items">    
                <ul class="media-list">
                    <li id="media_25"></li>
                    <li id="media_26"></li>
                    <li id="media_27"></li>
                </ul>
            </div>
        </fieldset>
    </form>
</div> 
```

**css**

```
.media-content {
    position: relative; /* makes it contain absolutely positioned descendants */
}
.media-content .trash {
    position: absolute;
    top: 0; bottom: 0; /* stretches to full height of .media-content */
    right: 0;
    width: 100px;
    background:#f5f5f5;
} 
```

**js**

```
$('.media-content .trash').droppable({
    drop: function(event, ui) {
        console.log('trashed');
    }
}); 
```

演示地址：http: [//jsfiddle.net/KazeG/6/](http://jsfiddle.net/KazeG/6/)

# grails - 为父级保存域集

> ID：13894272
> 
> 赞同：0
> 
> 时间：2012-12-15T17:03:33.650
> 
> 标签：grails, grails-orm

我有以下域：

```
class Attribute {
  static hasMany = [attributeParameters: AttributeParameter]
}

class AttributeParameter {

   String value
   Integer sequenceNo
   static belongsTo = [attribute: Attribute]
} 
```

我有一个表单，我想在其中显示属性的所有现有 AttributeParameters，并允许用户填充其值并单击保存。保存时，需要更新每个 AttributeParameter（已经有一个 ID）。

我目前对如何创建 HTML 以使其正常工作尚无定论。我试过这个：

代码简化为清晰：

```
<form>
  <input type="hidden" name="attributeParameters[0].id" value="1" />
  <input type="text" name="attributeParameters[0].value" value="1234567" />
  <input type="hidden" name="attributeParameters[1].id" value="2" />
  <input type="text" name="attributeParameters[1].value" value="name" />
</form>

def save() {
  def attribute = Attribute.get(params.id)
  attribute.properties = params
} 
```

并且它正确地填充了集合，但它不起作用，因为在保存之前没有获取 AttributeParameter，所以它失败并出现错误：

> 拥有实体实例不再引用具有 cascade="all-delete-orphan" 的集合：com.foo.Attribute.attributeParameters

更新：

我将 HTML 修改为以下内容：

```
<form>
  <input type="hidden" name="attributeParameters.id" value="1" />
  <input type="text" name="attributeParameters.value" value="1234567" />
  <input type="hidden" name="attributeParameters.id" value="2" />
  <input type="text" name="attributeParameters.value" value="name" />
</form> 
```

和控制器：

```
params.list('attributeParameters').each {
   def ap = AttributeParameter.get(it.id)
   ap.value = it.value
   ap.save()
} 
```

这行得通。我唯一关心的是参数进入的顺序。如果它们总是以它们出现在表单上的相同顺序进入 params 对象，那么我应该没问题。但如果它们以不同的方式出现，我可能会修改错误的 AttributeParameter 的值。

因此，仍在寻找更好的方法或某种验证，以确保它们的参数始终是先进先出的。

更新 2：

我遇到了[这篇文章](http://www.2paths.com/2009/10/01/one-to-many-relationships-in-grails-forms/)，这是我想要的，但我无法将 Attribute.attributeParameters 更改为列表。他们需要保持作为一个集合。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T20:27:59.353

你能做这样的事情吗：

```
<form>
  <input type="text" name="attributeParameter.1" value="1234567" />
  <input type="text" name="attributeParameter.2" value="name" />
</form> 
```

从每个 AttributeParameter 动态创建名称和值的位置：

```
<g:textField name="attributeParameter.${attributeParameterInstance.id}" value="${attributeParameterInstance.value}" /> 
```

然后在你的控制器中

```
params.attributeParameter.each {id, val->
    def ap = AttributeParameter.get(id)
    ap.value = val
    ap.save()
} 
```

这样，您就可以直接获得每个参数的实际 id，并且处理它们的顺序无关紧要。

# java - hashmap中有三个对象，如何在一条语句中访问这些对象？

> ID：13894273
> 
> 赞同：-5
> 
> 时间：2012-12-15T17:03:35.843
> 
> 标签：java, collections

Hash Map 中有三个对象，我们如何在一条语句中访问这些对象？

例如：

```
Map map=new HashMap();
map.put(1,"one");
map.put(2,"two");
map.put(3,"three");` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T17:07:25.013

调用 map.values() ，您将获得 3 个对象的集合

# rdf - 使用 SPARQL 找到活着的人（选择没有优势的项目）

> ID：13894274
> 
> 赞同：3
> 
> 时间：2012-12-15T17:03:43.323
> 
> 标签：rdf, sparql, freebase, dbpedia, virtuoso

以下 sparql 查询将给出死者。

```
select distinct ?item{
?item <http://freebase.com/ns/common/topic/notable_types> <http://freebase.com/ns/people/person> .
?item <http://freebase.com/ns/people/deceased_person/date_of_death> ?y .
} 
```

我想得到所有活着的人。如何用 SPARQL 语法表达这一点？它更像是问，给我所有没有特定边缘的节点。在 SPARQL 中有可能吗？

提前致谢。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T14:02:25.340

在 SPARQL 1.1 中

```
SELECT DISTINCT ?item {
    ?item <http://freebase.com/ns/common/topic/notable_types> <http://freebase.com/ns/people/person> .
    FILTER NOT EXISTS { ?item <http://freebase.com/ns/people/deceased_person/date_of_death> ?y}
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T19:53:33.387

当然。您可以使用这种结构：

```
SELECT DISTINCT ?item {
    ?item <http://freebase.com/ns/common/topic/notable_types> <http://freebase.com/ns/people/person> .
    OPTIONAL {?item <http://freebase.com/ns/people/deceased_person/date_of_death> ?y}
    FILTER (!BOUND(?y))
} 
```

# java - 需要收集 Java 应用程序使用的 SQL DML 语句

> ID：13894277
> 
> 赞同：1
> 
> 时间：2012-12-15T17:03:59.660
> 
> 标签：java, sql, eclipse, dml

我经常为软件的下一个版本创建新的数据库表或向现有数据库表添加新列。该软件是用Java编写的。开发人员还使用 Hebernate 和 Exclipse。

在实施之前，出于性能原因，我需要查看应用程序将针对新数据库表或列使用的 SQL DML。又名运行时 SQL。

我已经扫描了 Java 代码，没有在代码中找到 SQL。

仅收集此版本添加的新 SQL 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:05:35.487

我建议使用 Mybatis Migrations 或类似的工具来跟踪数据库模式的变化。这样您就可以完全控制数据库模式的演变

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T22:54:52.007

根据您的 Java 应用程序的编写方式，您可以：
1) 将以下内容添加到 hibernate.cfg.xml

```
<property name="show_sql">true</property>
<property name="format_sql">true</property> 
```

2）在persistence.xml的hibernate部分下添加以下内容

```
<property name="hibernate.show_sql" value="true"/>   
<property name="hibernate.format_sql" value="true"/> 
```

# localization - MonoTouch - 多个 .strings 文件

> ID：13894279
> 
> 赞同：0
> 
> 时间：2012-12-15T17:04:15.007
> 
> 标签：localization, xamarin.ios

我正在尝试在 Monotouch 项目中实现多个 .strings 文件，每个 .strings 文件都有每个 UI 的本地化字符串。文件 Localizable.strings 中的本地化字符串似乎在 Monotouch 中工作（这是默认设置），但是当我尝试从另一个 .strings 获取值时，它返回 key 。我正在使用 MonoTouch.Foundation.NSBundle.LocalizedString("Key","","Table") 方法，其中 table 是 .strings 文件名。有人有幸从 Monotouch 中的不同 .strings 文件中获取值吗？请指示。

谢谢，山

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T19:24:37.377

这不是它的工作方式。您提供的表名不适用于其他语言，而是用于当前语言的特定本地化文件。一个例子会更清楚：

en/Localizable.strings 包含： "Hello" = "Hi!"; “世界”=“世界！”；

要获得“Hello”，请使用`LocalizedString("Hello").` 要获得“World”，请使用`LocalizedString("World").`

如果现在您找到了拆分本地化文件的理由，您可以这样做：

en/Localizable.strings 包含： "Hello" = "Hi!";

en/OtherStrings.strings: "World" = "World!";

在这种情况下：

要获得“你好”，请使用`LocalizedString("Hello")`. 要获得“世界”，请使用`LocalizedString("World", "", "OtherStrings")`.

# javascript - JavaScript 包括

> ID：13894282
> 
> 赞同：1
> 
> 时间：2012-12-15T17:04:27.443
> 
> 标签：javascript, include

我有 4 个 javascript 文件（每个文件用于一个 HTML 文件），并且 3 个函数在所有 4 个文件中都是相同的。我想找到一个平稳的解决方案，我可以以某种方式分别包含这 3 个函数......是否可以在 .js 中包含 .js？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T17:09:09.440

1.  您可以有多个`<script>`标签：

    ```
    <script src="lib.js"></script>
    <script>
    // do stuff
    </script> 
    ```

2.  您可以使用[jQuery](http://jquery.com/)：

    ```
    $.getScript("lib.js", function() {
      // do stuff
    }); 
    ```

3.  [您可以使用诸如browserify](https://github.com/substack/node-browserify)或[YUICompressor](http://developer.yahoo.com/yui/compressor/)或[Google 的 Closure Compiler 之](https://developers.google.com/closure/compiler/)类的预处理器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T17:10:55.560

你可以看看这个关于异步加载 javascript 文件的[很好的解释。](http://css-tricks.com/thinking-async/)这可以解决你的问题。或者查看有关如何在其他 javascript 文件中加载 javascript 文件的[堆栈溢出问题。](https://stackoverflow.com/questions/950087/include-javascript-file-inside-javascript-file)

但是，将您使用的所有内容包含在一个 javascript 文件中并在每个站点上加载相同的文件可能值得一试。这提高了性能，因为只需发出一个 http 请求即可加载所有 javascript，并且可以非常有效地缓存它（因此以后无需加载任何 javascript）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T17:07:33.907

你可以自己写这个，例如它在谷歌分析中工作：

```
(function(){
    var lastIncludedScript = document.getElementsByTagName('script')[0];
    var yourScript = document.createElement('script');
    yourScript.type = 'text/javascript';
    yourScript.src = 'path/to/script.js';
    lastIncludedScript.parentNode.insertBefore(yourScript, lastIncludedScript);
})(); 
```

或在功能中：

```
function includeScript( path ){
    var lastIncludedScript = document.getElementsByTagName('script')[0];
    var yourScript = document.createElement('script');
    yourScript.type = 'text/javascript';
    yourScript.src = path;
    lastIncludedScript.parentNode.insertBefore(yourScript, lastIncludedScript);
} 
```

用法：

```
includeScript( 'path/to/script.js' ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T17:09:02.387

在浏览器中包含来自其他 JavaScript 的文件有点慢。我会编写一个服务器端脚本，将所有相关的 JavaScript 组合并缩小到一个“文件”中，然后发送给客户端。

您的页面可以将参数传递给此脚本以选择需要包含的内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-15T17:07:53.627

使用每个 html 文件中所需的正确 js 文件。这将解决您的问题。也可以为两个 html 文件添加包含一般功能的一个。这应该可以解决您的问题。

# eclipse - eclipse中`JUnit Plug-in Test`和`JUnit Test`的区别

> ID：13894287
> 
> 赞同：7
> 
> 时间：2012-12-15T17:04:47.927
> 
> 标签：eclipse, configuration, junit, workspace

在 eclipse 运行命令中，有两种选择：`JUnit Plug-in Test`和`JUnit Test`.

![在此处输入图像描述](../Images/5a57bc30cb9f35e10962599a0121305a.png)

之前，我尝试启动 eclipse 插件测试（`org.eclipse.jdt.ui.tests.refactoring`），但遇到了一些问题（[调试 eclipse 单元测试代码“测试类应该有一个”和“工作区已关闭”错误](https://stackoverflow.com/questions/13889273/debugging-eclipse-unit-test-code-test-class-should-have-exactly-one-and-works)）。

问题是，当我尝试使用 启动调试器时 `JUnit Test`，出现`Workspace is closed`错误。

![在此处输入图像描述](../Images/d88831185cc39fd26897a3e46c0d2ca9.png)

在 Eclipse 配置中，它们具有相同的工作区。

![在此处输入图像描述](../Images/5613ec6935b24f916a702fe7d4c375ac.png) ![在此处输入图像描述](../Images/cf12264a120572a0612f2176b5a3dfe5.png)

*   两者有什么区别？特别是，工作空间如何为他们工作？
*   为什么我在`Workspace is closed`运行 JUnit 测试时出错？是否可以使用 Eclipse 插件测试`JUnit Test`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-15T17:20:02.587

JUnit Plug-in test 用于测试 Eclipse 插件。它运行一个新的 Eclipse 实例。然后，它运行测试。

JUnit 测试用于测试常规 Java 应用程序。它在不启动新的 Eclipse 实例的情况下运行测试。

# javascript - 在函数原型的属性中使用 new

> ID：13894289
> 
> 赞同：2
> 
> 时间：2012-12-15T17:05:14.383
> 
> 标签：javascript

我见过一个 Javascript 项目，其中原型属性的定义如下：

```
myFunc.prototype.a = new myObject() 
```

我想知道当我调用`new myFunc()`a 属性时会发生什么：

它是否返回结果`new myObject()`或每次我调用`myFunc.a`它时调用 new `myObject()`？

在不同`myFunc`的实例上，`a`属性与普通原型属性的属性相同，还是每个实例`a`都是不同的`myObject()`实例？

请参阅此[http://backbonejs.org/docs/todos.html](http://backbonejs.org/docs/todos.html)：每个 TodoList 实例将共享相同的 localStorage，所以相同的 Backbone.LocalStorage() 实例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T17:08:23.360

不，您的所有实例都`myObject`将具有相同的`__proto__`.

如果您`a`从一个对象访问，您将访问原型之一，但如果您`a`在一个对象上设置，那么这个对象将拥有`a`您给他的任何东西，而其他对象将保留旧的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T17:20:07.590

希望这会对您有所帮助：

```
var Person = function (name, age) {
    this.getName = function () { return name; };
    this.getAge  = function () { return age; };
};

var Employee = function (employee_id) {
    this.printBadge = function () {
        console.log("#" + employee_id + " | " + this.record.getName());
    };
};

Employee.prototype.record = new Person("Bob", 32);

var jim  = new Employee(1),
    doug = new Employee(2);

jim.printBadge(); //  #1 | Bob
doug.printBadge(); // #2 | Bob 
```

“优先组合胜于继承”的口号对于 JavaScript 来说是四倍。
你可以很高兴地覆盖一个人的特定*对象*：

```
jim.record = { getName : function () { return "Jim"; } };
jim.printBadge();  // #1 | Jim
doug.printBadge(); // #2 | Bob 
```

修改原型对象（实例引用的对象）的属性时要小心。

```
var jeff = new Employee(3);
jeff.record.getName = function () { return "OMG! Yuse guys is scr00d!" };

jim.printBadge();  // #1 | Jim
doug.printBadge(); // #2 | OMG! Yuse guys is scr00d!
jeff.printBadge(); // #3 | OMG! Yuse guys is scr00d! 
```

原因是您更改了共享原型对象（静态，在其他语言中）的属性，而不是像 Jim 的情况那样替换整个原型对象（引用一个新对象，而不是静态对象）。

但是`X.prototype.y = new Z();`可以这样看，简单地说：

```
var bob = new Person("Bob", 32);
Employee.prototype.record = bob;

var jim  = new Employee(1),
    doug = new Employee(2),
    jeff = new Employee(3); 
```

# java - IRCLib Java 创建了 IRC Bot 问题

> ID：13894290
> 
> 赞同：0
> 
> 时间：2012-12-15T17:05:36.353
> 
> 标签：java, buffer, chat, bots, irc

我正在使用 IRCLib for Java 创建 IRC 机器人。它使用图书馆提供的 Moepii 作为客户端。Moepii 的问题是它没有内置防洪功能，所以我需要自己实现它。目前，我的机器人在响应大量命令时触发了 Quakesnet 过量洪水并启动。

有人对我如何实施防洪有任何建议吗？我得到的一个想法是假设一个 1024 字节的缓冲区，一旦到达就向服务器发送一个 Ping 并等待响应，然后再继续。我以前从未与 IRC 合作过，所以我希望得到一些指示。

当前实施

```
private class FloodMonitor implements Runnable {

    private final int MAXBYTES = 512;
    private int messageBuffer = 0;
    private boolean suspend = false;
    private boolean stop = false;

    @Override
    public void run() {

        while (!stop) {
            while (!suspend) {
                MessageStructure message = out.peek();
                if (message != null) {
                    messageBuffer += message.msg.getBytes().length;
                    if (messageBuffer < MAXBYTES) {
                        out.poll().sendMessage();
                    } else {
                        suspend();
                        message.bot.send("ping irc.quakenet.org");
                    }
                }
            }
        }
    }

    public void resetBuffer() {
        messageBuffer = 0;
        suspend = false;
    }

    public void stop() {
        stop = true;
    }

    public void suspend() {
        suspend = true;
    }
}

private class MessageStructure {

    public String target;
    public String msg;
    public BotConnection bot;

    MessageStructure(String target, String msg, BotConnection bot) {
        this.target = target;
        this.msg = msg;
        this.bot = bot;
    }

    private void sendMessage() {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                bot.doPrivmsgApproved(target, msg);
            }
        });

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T16:04:21.973

```
private class FloodMonitor implements Runnable {

    private final int MAXBYTES = 768;
    private int messageBuffer = 0;
    private boolean suspend = false;
    private boolean stop = false;

    @Override
    public void run() {

        while (!stop) {
            while (!suspend) {
                final MessageStructure message = out.peek();
                if (message != null) {
                    messageBuffer += message.msg.getBytes().length;
                    if (messageBuffer < MAXBYTES) {
                        out.poll().sendMessage();
                    } else {
                        suspend();

                        SwingUtilities.invokeLater(new Runnable() {

                            @Override
                            public void run() {
                                message.bot.send("ping irc.quakenet.org");
                            }
                        });

                    }
                }
            }
        }
    }

    public void resetBuffer() {
        messageBuffer = 0;
        suspend = false;
    }

    public void stop() {
        stop = true;
    }

    public void suspend() {
        suspend = true;
    }
} 
```

# objective-c - NSMutableArray：获取特定对象

> ID：13894292
> 
> 赞同：-1
> 
> 时间：2012-12-15T17:05:58.153
> 
> 标签：objective-c, ios, xcode, nsmutablearray

我有一个`NSMutableArray`. 当我使用`NSLog`时，这是输出：

```
2012-12-15 17:58:28.849 Splash-it[504:907] (
"Open House New York",
"Boston Athletic Association",
"Autofest Tanzania"
), 
```

我怎样才能得到我得到的`NSString`这些标题之一（考虑到标题会改变，我认为我需要使用，`objectAtIndex`但我认为它在这种情况下不起作用）？

例如

```
NSString = @"Boston Athletic Association" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T17:07:38.597

与[`objectAtIndex`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/doc/uid/20000137-BABDJBFC)可变数组完美配合。因此，使用从零开始的索引来获取数组中的第二个对象，您可以：

```
NSString *string = [array objectAtIndex:1]; 
```

对于较新版本的 Xcode，您还可以使用以下语法：

```
NSString *string = array[1]; 
```

# c# - systemevents.sessionended 没有被捕获或解雇

> ID：13894294
> 
> 赞同：-1
> 
> 时间：2012-12-15T17:06:11.743
> 
> 标签：c#

请在我的代码中尝试捕获 win32.systemevents.sessionended 事件，以便在会话结束时继续保存我的应用程序数据，以防应用程序未手动关闭.. 前一段时间这一直在工作，现在我有了我的项目长大了，它不再是..？几天来我一直试图找到一些有意义的东西，但实际上什么也没找到。当我尝试捕捉另一个像 MonitorResolutionChanged 这样的系统事件时，它运行良好，但这个不是。我也尝试在 mainWindow 中注册（应用程序表单..），什么都没有看到更多.. 非常感谢 Tomas 我的代码：

```
using System;
using System.Collections.Generic;
using System.Windows.Forms;
using System.Threading;
using MovablePython; // my own class within this project
using Avn; //my own referenced assembly 

namespace DirDist
{
     class Program
    {
        private static string appGuid = "Cddbserviceman";
        private static System.Windows.Forms.ContextMenu nIMenu;
        internal static System.Windows.Forms.NotifyIcon notifyIcon1;
        private static MenuItem showItem;
        public static MenuItem justCDsItem;
        private static MenuItem searchItem;
        private static MenuItem settingsItem;
        private static MenuItem quitItem;

        internal static Form1 mainWindow;
        private static Hotkey hk;
        internal static Registration.LicenceState mode; // app mode - registered/trial/blocked/demaged ..
        /// <summary>
        /// The main entry point for the application.
        /// </summary>
        [STAThread]
        static void Main()
        { 
            using (Mutex mutex = new Mutex(false, appGuid))
            {
                if (!mutex.WaitOne(0, false))
                {
                    MessageBox.Show("CDDB is already running on your machine \n  (Check status bar for access ..)");
                    return;
                }
                GC.Collect();

                Application.EnableVisualStyles();
                Application.SetCompatibleTextRenderingDefault(false);

                mode = Registration.Startup();

                Program.mainWindow = new Form1();
                mainWindow.Activate();
                //mainWindow.Validate();
                //mainWindow.Update();
                mainWindow.Visible = false;
                PutIcon();

                //Microsoft.Win32.SystemEvents.SessionEnded += SystemEvents_SessionEnded;
                Microsoft.Win32.SystemEvents.SessionEnded += new Microsoft.Win32.SessionEndedEventHandler(SystemEvents_SessionEnded);//**zkousime zda funguje pro hibernaci ..
                RegisterHotKey(true);   
                Application.Run();
            }   
        }

        static void SystemEvents_SessionEnded(object sender, Microsoft.Win32.SessionEndedEventArgs e)
        {
            //MessageBox.Show("SessionEnded fired");

            RegisterHotKey(false);

            notifyIcon1.Visible = false;
            notifyIcon1.Dispose();
            notifyIcon1 = null;

            if (!mainWindow.dBSaved) mainWindow.SaveDb(Form1.settings.dBPath);
            if (mainWindow.index != null) mainWindow.SaveIndex(Form1.settings.indexPath);
            Microsoft.Win32.SystemEvents.SessionEnded -= new Microsoft.Win32.SessionEndedEventHandler(SystemEvents_SessionEnded);
            mainWindow.Close();
        }

        // zaregistruje globalni hotkey ctrl+shift+F Pro hledani
        private static void RegisterHotKey(bool active)
        {
            if (!active)
            {
                if (hk != null) hk.Unregister();
            }
            else
            {
                if(hk ==null) hk = new Hotkey();

                hk.KeyCode = Keys.F;
                //hk.Windows = true;
                hk.Shift = true;
                hk.Control = true;
                //hk.Pressed += delegate { Console.WriteLine("Windows+1 pressed!"); };
                hk.Pressed += delegate { searchItemClick(new object(), new EventArgs()); };

                if (hk.GetCanRegister(mainWindow)) hk.Register(mainWindow);
                else ; // just do nothing
            }
        }

        private static void PutIcon()
        {
            if (notifyIcon1 == null)
            {   
                showItem = new MenuItem ("&Show interface", new System.EventHandler (showInfaceClick));
                justCDsItem = new MenuItem ("&Jus'CDs",new System.EventHandler ( justCDsClick));
                justCDsItem.Checked = Form1.settings.justCDs;
                searchItem = new MenuItem("Search CDDB",new System.EventHandler (searchItemClick));
                searchItem.Shortcut = Shortcut.CtrlShiftF;
                searchItem.ShowShortcut = true;
                settingsItem = new MenuItem("Settings", new System.EventHandler(settingsItemClick));
                quitItem = new MenuItem("&Quit", new System.EventHandler(quitItemClick));

                nIMenu = new System.Windows.Forms.ContextMenu(new MenuItem[5] { showItem, justCDsItem, searchItem,settingsItem, quitItem });

                notifyIcon1 = new System.Windows.Forms.NotifyIcon();
                notifyIcon1.ContextMenu = nIMenu;
                notifyIcon1.Icon = new System.Drawing.Icon(System.IO.Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().Location) + "\\Icon1.ico");
                //notifyIcon1.Icon = new System.Drawing.Icon(System.IO.Path.GetDirectoryName( 
                //System.Reflection.Assembly.GetExecutingAssembly().GetName().CodeBase ) + "Icon1.ico");
                //notifyIcon1.Icon = new System.Drawing.Icon("Icon1.ico");
                notifyIcon1.DoubleClick += new EventHandler(notifyIcon1_DoubleClick);
                notifyIcon1.Visible = true;
            }
        }

        /* private static void notifyIcon1_MouseMove(object sender, MouseEventArgs mea)
         * aby to fungovalo je treba upravit contextmenu na contextmenustrip a taky ty items .. az nakonec
         * je tu kolem uz rozdelana priprava ..
        {
            notifyIcon1.ShowBalloonTip(2000,AppName,"Active",ToolTipIcon.None);
        } */

        // clicks on NotificationIcon context menu ..
        private static void showInfaceClick(object sender, EventArgs e)
        {
            mainWindow.tabControl1.SelectedIndex = 0;
            mainWindow.Show();
        }

        private static void justCDsClick(object sender, EventArgs e)
        {
            Form1.settings.justCDs = mainWindow.checkBox1.Checked = justCDsItem.Checked = !Form1.settings.justCDs;
            if (mainWindow.Visible) mainWindow.Update();
        }

        private static void searchItemClick(object sender, EventArgs e)
        {
            mainWindow.tabControl1.SelectedIndex = 1 ;
            //this.Size = new Size(this.Width, SystemInformation.PrimaryMonitorSize.Height);
            mainWindow.Location = new System.Drawing.Point(SystemInformation.PrimaryMonitorSize.Width - mainWindow.Width, SystemInformation.PrimaryMonitorSize.Height - mainWindow.Height);
            //mainWindow.Location = new System.Drawing.Point(880, 500);
            mainWindow.Show();
        }

        private static void settingsItemClick(object sender, EventArgs e)
        {
            mainWindow.tabPage3_GotFocus(new Object(), new EventArgs());
            mainWindow.tabControl1.SelectedIndex = 2;
            mainWindow.Show();
        }

        public static void quitItemClick(object sender, EventArgs e)
        {
            if (DialogResult.Cancel == MessageBox.Show("Really exit application and stop scanning?",Form1.AppName,MessageBoxButtons.OKCancel,MessageBoxIcon.Question)) return;
            if (!mainWindow.dBSaved) mainWindow.SaveDb(Form1.settings.dBPath);
            //if (mainWindow.index != null) mainWindow.SaveIndex(Form1.settings.indexPath);
            if (Form1.settings.fileIndex) mainWindow.SaveIndex(Form1.settings.indexPath);
            mainWindow.Close();
            mainWindow = null;
            notifyIcon1.Visible = false;
            Application.Exit();
        }

        static void notifyIcon1_DoubleClick(object sender, EventArgs e)
        {
            //throw new NotImplementedException();
            //if (!mainWindow.Visible) mainWindow.WindowState = FormWindowState.Normal; else mainWindow.WindowState = FormWindowState.Minimized;
            //if (!mainWindow.Visible) mainWindow.Show(); else mainWindow.Hide();
            if (!mainWindow.Visible) mainWindow.Visible = true; else mainWindow.Visible = false;      
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T14:38:36.343

好的。所以这是捕获和解决方案。在 Windows 中，不确定是 win32.systemevents.sessionended 应该被提升还是 form.close() 会被操作系统首先调用。此外，如果首先调用 form.close() ，则即使由于取消关闭过程而没有关闭和处置表单，也会省略 sessionended。在我的系统中，当我运行一些注册表清理软件后，这种行为发生了变化。无论如何理解这一点，我们必须照顾这两种可能的情况。1\. 捕捉 win32.systemevents.sessionended（或 sessionending）事件，无论什么更适合我们的需求，并且是

```
 .
    .
   [STAThread]
    static void Main()
    { 
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);

            Microsoft.Win32.SystemEvents.SessionEnded += new Microsoft.Win32.SessionEndedEventHandler(SystemEvents_SessionEnded);

            Program.mainWindow = new Form1();
            mainWindow.Activate();
            mainWindow.Visible = false;
            PutIcon();           
            RegisterHotKey(true);   
            Application.Run();
        }   
    }

    public static void SystemEvents_SessionEnded(object sender, Microsoft.Win32.SessionEndedEventArgs e)
    {
        // do whatever needed and exit application ..
        RegisterHotKey(false);
        notifyIcon1.Visible = false;
        notifyIcon1.Dispose();
        notifyIcon1 = null;

        if (!mainWindow.dBSaved) mainWindow.SaveDb(Form1.settings.dBPath);
        if (mainWindow.index != null) mainWindow.SaveIndex(Form1.settings.indexPath);
        Microsoft.Win32.SystemEvents.SessionEnded -= new Microsoft.Win32.SessionEndedEventHandler(SystemEvents_SessionEnded);

        if (mainWindow != null)
        {
            mainWindow.Dispose();
            mainWindow = null;
        }
        Application.Exit();
    } 
```

2\. 正确覆盖 form.OnClosing()，因为当用户或系统在关闭、注销等时手动关闭表单或为主表单创建 hanler 时，会调用此函数。关闭：

```
 public Form1()
    {
        this.Closing += new CancelEventHandler(this.Form1_Closing);
        InitializeComponent();
    }

    private void Form1_Closing(Object sender, CancelEventArgs e)
            {
                if (systemShutdown) Program.SystemEvents_SessionEnded(this, new Microsoft.Win32.SessionEndedEventArgs(Microsoft.Win32.SessionEndReasons.SystemShutdown));
                else
                {
                    e.Cancel = true;
                    this.Hide();
                }
            } 
```

只想提一下，必须运行消息泵才能启动会话。Application.run() 实现了这一点。

在我的情况下，正如您所看到的，我必须更深入地挖掘，因为我关闭重定向只是为了隐藏应用程序而不是关闭它（我只是将应用程序隐藏到通知 irea 图标并在需要时手动关闭它......）所以我必须使用某种方式来指定调用 this 时的情况，因为 sender 不幸且意外地总是 this ..？这是通过覆盖 WndProc 并捕获 propper 消息来完成的。在这里，您几乎可以收听窗口内的所有内容（例如插入/删除的光盘），但它仅与表单挂钩，并且实现通常不那么简单，因为您必须手动定义各种值和结构并与这些值进行比较..除此之外它非常简单：

```
private static int WM_QUERYENDSESSION = 0x11;
private static bool systemShutdown = false;
protected override void WndProc(ref System.Windows.Forms.Message m)
{
    if (m.Msg==WM_QUERYENDSESSION)
    {
        systemShutdown = true;
    }
    base.WndProc(ref m);

} 
```

这是在这里找到的：http: [//msdn.microsoft.com/en-us/library/microsoft.win32.systemevents.sessionending.aspx](http://msdn.microsoft.com/en-us/library/microsoft.win32.systemevents.sessionending.aspx)

再想一想，我们可能会省略第 1 点，因为系统可能总是会尝试调用 mainForm.close() 但我保留它，因为一旦它再次以不同的顺序运行这些东西，我就无法确定 Windows 的行为......而且它是对系统关闭做出反应的主要建议解决方案..

希望这对某人有帮助。来自布拉格托马斯的问候

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T17:14:36.753

这是你可以尝试的东西

对于关机，覆盖 OnShutdown 方法：

```
protected override void OnShutdown()
{
    //your code here
    base.OnShutdown();
} 
```

对于注销：

首先，在 Service Constructor 中向 Microsoft.Win32.SystemEvents.SessionEnded 添加一个事件处理程序：

```
public MyService()
{
    InitializeComponent;
    Microsoft.Win32.SystemEvents.SessionEnded += new Microsoft.Win32.SessionEndedEventHandler(SystemEvents_SessionEnded);
} 
```

然后添加处理程序：

```
void SystemEvents_SessionEnded(object sender, Microsoft.Win32.SessionEndedEventArgs e)
{
    //your code here
} 
```

这应该捕获任何结束的会话，包括控制台本身（运行服务的那个）。

# java - 用于测试基于 Java 统计的模块的标准框架

> ID：13894298
> 
> 赞同：0
> 
> 时间：2012-12-15T17:06:28.890
> 
> 标签：java, testing, statistics, integration-testing

我在 java 中创建了一个模块，它随着时间的推移获取一些样本并推断出一些推论。只是一个标准的统计模型。

现在为了测试它，我需要随着时间的推移生成一些样本，并更改​​它们，并验证结果..随着时间的推移，并且能够断言结果随着时间的推移与变化的样本匹配，并更改一些基本参数运行相同模拟。

现在，我没有自己构建如此复杂的测试用例，而是试图搜索是否已经有这样的 java 测试库可以减少此类测试用例的工作量，但我真的找不到......任何知道这样的人图书馆？（如果不是为了最佳实践？）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T17:31:59.440

看看[Apache 数学](http://commons.apache.org/math/userguide/random.html)。有许多统计类，它们有包含数据的单元测试。还有一个生成随机数据的类：

> Commons Math 随机包包括实用程序
> 
> ```
> generating random numbers
> generating random vectors
> generating random strings
> generating cryptographically secure sequences of random numbers or strings
> generating random samples and permutations
> analyzing distributions of values in an input file and generating values "like" the values in the file
> generating data for grouped frequency distributions or histograms 
> ```
> 
> 数据生成实用程序使用的随机数据源是可插拔的。默认情况下，使用 JDK 提供的 PseudoRandom Number Generator (PRNG)，但可以使用适配器框架“插入”替代生成器，该框架提供了一个通用工具，用于将 java.util.Random 替换为替代 PRNG。图书馆提供的其他适用于蒙特卡罗分析（但不适用于密码学）的非常好的 PRNG 是 Makoto Matsumoto 和 Takuji Nishimura 的 Mersenne twister 以及来自 François Panneton、Pierre L 的更新的 WELL 生成器（Well Equidistributed Long-period Linear） 'Ecuyer 和 Makoto Matsumoto。
> 
> 下面的 2.2-2.6 节展示了如何使用公共数学 API 来生成不同种类的随机数据。这些示例都使用默认的 JDK 提供的 PRNG。PRNG 可插拔性在 2.7 中介绍。使用替代 PRNG 的示例所需的唯一修改是将无参数的构造函数调用替换为包含 RandomGenerator 实例作为参数的调用。

# c++ - CryENGINE 3 中的分支屏蔽如何工作？

> ID：13894302
> 
> 赞同：11
> 
> 时间：2012-12-15T17:06:53.350
> 
> 标签：c++, optimization, loops, cryengine

这部分 CryENGINE SDK 标头引起了我的注意：

***分支掩码.h***

```
#ifndef __BRANCHLESS_MASK__
#define __BRANCHLESS_MASK__

///////////////////////////////////////////
// helper functions for branch elimination
//
// msb/lsb - most/less significant byte
//
// mask - 0xFFFFFFFF
// nz   - not zero
// zr   - is zero

ILINE const uint32 nz2msb(const uint32 x)
{
    return -(int32)x | x;
}

ILINE const uint32 msb2mask(const uint32 x)
{
    return (int32)(x) >> 31;
}

ILINE const uint32 nz2one(const uint32 x)
{
    return nz2msb(x) >> 31; // int((bool)x);
}

ILINE const uint32 nz2mask(const uint32 x)
{
    return (int32)msb2mask(nz2msb(x)); // -(int32)(bool)x;
}

ILINE const uint32 iselmask(const uint32 mask, uint32 x, const uint32 y)// select integer with mask (0xFFFFFFFF or 0x0 only!!!)
{
    return (x & mask) | (y & ~mask);
}

ILINE const uint32 mask_nz_nz(const uint32 x, const uint32 y)// mask if( x != 0 && y != 0)
{
    return msb2mask(nz2msb(x) & nz2msb(y));
}

ILINE const uint32 mask_nz_zr(const uint32 x, const uint32 y)// mask if( x != 0 && y == 0)
{
    return msb2mask(nz2msb(x) & ~nz2msb(y));
}

ILINE const uint32 mask_zr_zr(const uint32 x, const uint32 y)// mask if( x == 0 && y == 0)
{
    return ~nz2mask(x | y);
}

#endif//__BRANCHLESS_MASK__ 
```

有人可以简单解释一下这些函数究竟是如何用于减少分支的吗？ILINE 我想是预定义的强制内联或类似的东西。我搜索了谷歌，但我发现的只是上传到不同站点的 CryENGINE 标头的副本，但没有关于这个特定的讨论。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-15T17:37:34.347

这些函数返回的位掩码可以在其他计算中与结果一起出现，以便在没有条件的情况下执行操作，因此不引入分支。

例如：

*   `nz2mask``0`如果参数是 则返回`0`，`0xffffffff`否则返回。
*   `msb2mask``0`如果参数的最高位是，则返回`0`，`0xffffffff`如果是`1`。

因此，如果您有类似的代码（带有 x86 指令供参考）：

```
if(a != 0) x += y;
    //  test        ebx,ebx  
    //  je          skip  
    //  add         dword ptr [x],eax  
    // skip: 
```

您可以将其替换为：

```
x += y & (nz2mask(a));
    //  mov     ecx,ebx  
    //  neg     ecx  
    //  or      ecx,ebx  
    //  sar     ecx,1Fh  
    //  and     ecx,eax  
    //  add     ecx,dword ptr [x] 
```

它产生更多指令（至少在 x86 上），但它避免了分支。

然后还有其他功能，例如`iselmask()`允许根据提供的掩码选择任一输入，因此您可以替换：

```
x = (a != 0) ? r1 : r2; 
```

和

```
x = iselmask(nz2mask(a), r1, r2); 
```

同样，这些函数应该内联并编译成相对高效的汇编程序，用一些额外的数学来换取没有分支。

# django - Django rest 框架从 0.x 迁移到 2.1.9

> ID：13894303
> 
> 赞同：0
> 
> 时间：2012-12-15T17:06:57.257
> 
> 标签：django, django-rest-framework

在从 django-rest-framwork 0.3.2 转换到最新的 2.1.9 时解决了我的一些麻烦后，我看不到修复这个问题（我同意 Reinout 的博客...... ..)

我有这个代码：

```
class ApiSomeInputView(View):
    form = ApiSomeForm
    permissions = (IsAuthenticated, )
    resource=SomeResource

    def get(self, request):
        """
        Handle GET requests.
        """
        return "Error: No GET request Possible, use post"

    def post(self, request, format=None):
        some_thing =   self.CONTENT['some_thing']
        # check if something exist:
        something = get_object_or_none(Something,some_field=int(some_thing))
        if not something:
            raise _404_SOMETHING_NOT_FOUND
        #Note exludes are set in SomeResource
        data = Serializer(depth=4).serialize(something)
        return Response(status.HTTP_200_OK, data) 
```

现在，我已经按照教程进行操作，并了解了如何做到这一点（甚至更漂亮）。通过在 url 中使用 slug。

但是......我想让客户端软件向后兼容......所以我想拥有这个而不将查询的值放在url中。客户端在帖子的标题中使用 json 数据和 ContentType json。

在 django rest 框架的第一个版本中，我什至得到了一个不错的可浏览表单，用于填写此查询的值

我的问题：如何在最新版本中完成这项工作？

我似乎无法在视图中获得表格......我可以在其中填写值并在过程中使用

也许很好地发布我到目前为止所尝试的内容......

首先，我在序列化器中更改了 ModelResource：

```
class SomethingSerializer(HyperlinkedModelSerializer):
    class Meta:
        model = Something
        #exclude = ('id',)
        depth = 4 
```

然后视图更改为：

```
class ApiSomeInputView(APIView):
    permissions = (IsAuthenticated, )

    def post(self, request, format=None):
        some_thing = request.DATA['some_thing']
        # check if something exist: .... well actually this above already does not work
        something = get_object_or_none(Something,some_field=int(some_thing))
        if not something:
            raise _404_SOMETHING_NOT_FOUND
        serializer = SomethingSerializer(something)
        return Response(status.HTTP_200_OK, serializer.data) 
```

注意：基于接受的答案（汤姆克里斯蒂），我也提出了一个答案，我展示了我是如何工作的（更详细）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T14:48:07.763

当您从 继承时`APIView`，可浏览的 API 渲染器无法知道您要使用什么序列化器在 HTML 中呈现，因此它回退到允许您发布纯 JSON（或其他）表示。

如果您改为从 继承`GenericAPIView`，使用属性设置序列化程序，并使用该方法`serializer_class`获取序列化程序的实例-[请参见此处](http://django-rest-framework.org/api-guide/generic-views.html)，那么可浏览 API 将使用表单来显示用户输入。`get_serializer(...)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T22:50:00.193

基于汤姆克里斯蒂的回答（我会接受作为答案）。我让它工作：

我制作了一个额外的序列化程序，它定义了要显示的字段以填写帖子并使用 GenericAPIView 显示......（如果我错了汤姆，请纠正我，只是在这里为其他人记录......所以最好说它正确）

```
class SomethingSerializerForm(Serializer):
    some_thing = serializers.IntegerField() 
```

有了这个序列化程序和我已经拥有的另一个序列化程序。

还有一个观点：

```
class ApiSomeInputView(GenericAPIView):
    permissions = (IsAuthenticated, )
    model = Something
    serializer_class = SomethingSerializerForm

    def post(self, request, *args, **kwargs):
         serializer = self.get_serializer(data=request.DATA)
         if not serializer.is_valid():
             raise ParseError(detail="No valid values")
         some_thing = request.DATA['some_thing']
         something = get_object_or_none(Something,some_field=int(some_thing))
         if not something:
             raise Http404
         serializer = SomethingSerializer(something)
         return Response(serializer.data) 
```

以上工作正常，与以前完全相同....

我仍然觉得我在滥用 Serializer 类作为表单。

# c++ - 从函数返回时，构造函数和析构函数多久被调用一次？

> ID：13894311
> 
> 赞同：1
> 
> 时间：2012-12-15T17:07:49.247
> 
> 标签：c++, copy-constructor

如果我有如下功能：

```
stack fillStack(){
  stack a;
  return a;
}

void main(){
  stack s=fillStack();
} 
```

考虑我们有一个名为`stack`. 将调用多少个构造函数和析构函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T17:17:09.747

这是**应该**发生的事情：

```
stack fillStack() {
  stack a;  // constructor
  return a; // copy constructor and destructor a
}

int main(){
  stack s=fillStack(); // copy constructor and destructor of the temporary
} // destructor s 
```

在实践中，该标准明确允许优化复制构造函数（这称为*复制省略*）并在适当位置构造值。*最终可能*看起来像这样：

```
void fillStack(stack&);

int main() {
  stack s;
  fillStack(s); // with reference
} 
```

尽管如此，即使编译器应用了这种转换，复制构造仍然必须是格式良好的。如果复制构造会产生副作用，那么这种优化可能会导致一些奇怪的行为（尝试从复制构造函数打印一些东西并观察不同优化级别的行为）。

由于移动语义，C++11 基本上不需要这种优化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T17:17:46.960

假设没有编译器优化，它应该是 2 次复制构造函数调用 - 一次从函数本地到临时返回值，一次从临时返回值到`s`

# sqlite - Navicat 中的 SQLite 临时表

> ID：13894316
> 
> 赞同：3
> 
> 时间：2012-12-15T17:08:11.900
> 
> 标签：sqlite

我使用 Navicat 和这个命令在 sqlite 中创建临时表：

```
create temp table search as select * from documents 
```

然后当我尝试查询时：

```
select * from search 
```

我有：

```
no such table: temp.sqlite_master 
```

或者：

```
no such table 
```

该表也没有出现在表列表中，但是当我尝试再次创建它时，我得到：

```
table search already exists 
```

问题是什么？是navicat的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T17:16:54.910

您创建的声明对我来说看起来是正确的。创建临时表时，当您关闭用于创建表的连接字符串时，它会被删除。您是否在创建表后关闭连接，然后在发送查询时再次打开它？

如果没有，您也可以包含您的查询语句吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T16:49:21.263

这就像 Navicat 附带的 SQLite DLL 中的错误。在其他地方测试它工作正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-13T11:51:13.230

SQLite 的文档说明了有关 CREATE TABLE 的信息：

> 如果指定了 a，则它必须是“main”、“temp”或附加数据库的名称。在这种情况下，新表是在命名数据库中创建的。如果“CREATE”和“TABLE”之间出现“TEMP”或“TEMPORARY”关键字，则在临时数据库中创建新表。同时指定 a 和 TEMP 或 TEMPORARY 关键字是错误的，除非是“temp”。如果未指定数据库名称且 TEMP 关键字不存在，则在主数据库中创建表。

可能您应该像这样通过临时前缀访问表：`temp.search`.

# python - 如何使用 Python 将数据写入二进制文件

> ID：13894320
> 
> 赞同：-1
> 
> 时间：2012-12-15T17:08:38.477
> 
> 标签：python, file, hex, binaryfiles

我正在为类似 Java 的字节码构建一个汇编程序。本质上，它是一个 Python 函数，它接收从包含操作码的文本文件中读取的字符串，并将编译后的二进制数据写入文件。以下是输入字符串字符串的示例（来自`Example.txt`）：

```
class Example

Method add

meta
lva 4

code
0: ipush 1 0
1: ipush 2 2
2: iload 1
3: iload 2
4: iadd
5: istore 3
6: iload 3
7: ireturn 
```

我的任务是将`Example.txt`文本文件转换成它的二进制表示（我的虚拟机的机器代码）。每个操作码（例如`iadd`）正好是一个字节长（即 0 到 255 范围内的数字）。一些操作码也接受一个字节长的操作数。

仅将方法的操作码保存在二进制文件中非常容易。我会将每个操作码解析为 0 到 255 范围内的数字，然后使用`array.append(op)`, 然后`array.tofile(handle)`.

但是，我不仅需要保存操作码，还需要保存数据，例如类名、方法名等。

**如何将单字节值和更复杂的数据保存到二进制文件中？**

我曾设想过这样的事情......

该文件分为多个部分。例如，第一部分将是`class Example`. 下一节是由`Method add`.

本质上，只有两种类型的部分，名称部分，其中仅包含`class name`，以及方法部分，然后将其细分为元和代码部分。

名称部分以`00`（十六进制）开头，然后需要显示类的名称（**这是我的问题**）。这`00`本质上是 的十六进制表示`class`。方法部分以 开头`FF`，然后它们也需要在接下来的几个字节中显示它们的名称。然后，我可能不得不在主要方法部分`0F`中表示“元部分的`F0`开始”和“代码部分的开始”。

然而，问题仍然存在。如何命名这些部分？我有一个想法，将例如“示例”中的每个字符转换为其十六进制表示形式，一个字节，然后将它们保存在文件中`00`or之后`FF`。这可能意味着我需要一些“部分结束”符号。

有没有更好/更简单/已经实施的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T17:22:54.330

你问了一个关于设计和基本 Python 使用的非常广泛的问题。在您稍微限制问题之前，我不确定您会得到一个好的答案。

但是让我们关注如何将字符串（例如“Example”）转换为整数数组，以便您可以将其附加到您的`array`. 确保你有一个字节串；如果您有一串 Unicode 字符，请务必先将其编码为字节数组。（如果您使用的是 Python 2.x，那么您`string`已经是一个字节数组。）

```
out = [0]  # your output array

s = "Example" # a byte string, not a Unicode string
l = list(s)   # convert to array of ints

out = out + l
print out 
```

给出：

```
[0, 'E', 'x', 'a', 'm', 'p', 'l', 'e'] 
```

# sockets - TCP 是否真的定义了“TCP 服务器”和“TCP 客户端”？

> ID：13894328
> 
> 赞同：0
> 
> 时间：2012-12-15T17:09:32.963
> 
> 标签：sockets, tcp, p2p, definition

在 Wikipedia[文章中](http://en.wikipedia.org/wiki/Transmission_Control_Protocol#Protocol_operation)，使用术语“客户端”和“服务器”来解释 TCP 通信。它还使用了“同行”这个词。

但据我所知，TCP 标准并没有定义“TCP 客户端”和“TCP 服务器”。

在[RFC 675](https://www.rfc-editor.org/rfc/rfc675)文档（“Internet 传输协议程序规范”）中，从未出现过“客户端”一词。RFC 解释说 TCP 用于通过端口（套接字）连接进程，并且“一对套接字形成一个 CONNECTION，可用于在任一方向 [即全双工] 传输数据。

然而，将发起方称为“客户”似乎是常见的做法。但是恕我直言，这种客户端/服务器通信模型并不总是适用于 TCP 通信。以点对点网络为例。调用所有打开套接字并等待来自对等“TCP 服务器”的传入连接的进程对我来说听起来是错误的。（如果我拨打他的电话号码并且他接听，我不会将他的电话设备称为“电话服务器”。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T17:11:59.407

TCP 只是关于通过双向有序字节流将一个进程连接到另一个进程。谈论“客户端”和“服务器”描述了一种常见的使用模式，但在 TCP 本身的定义之外。

# c++ - 在 Visual C++ 6.0 MFC 中，CString 是否可以像简单类型而不是类一样被安全地对待？

> ID：13894329
> 
> 赞同：1
> 
> 时间：2012-12-15T17:09:55.313
> 
> 标签：c++, visual-c++, mfc, visual-c++-6

不幸的是，我拥有的文档要么是 (a) 没有任何勘误表的原始产品文档（MS VC++ 6.0 帮助文件），要么是 (b) 适用于更高 MFC 版本的更高版本的 MSDN 帮助。

尤其是：

[Q1] `+=`VC++6 MFC 中的操作符是否存在漏洞`CString`？VC++6 中的这段代码必须先修复，然后才能在现代 MFC 应用程序中编译：

```
 CString szTemp;
    unsigned char m_chReceive[MY_BUF_SIZE];

    // compiles and seems to run but may be buggy in VC++6, won't compile in modern MFC
szTemp += m_chReceive; 
    // the above won't compile in modern MFC versions, but this "&+cast" does:
szTemp.Append( (const char *)&m_chReceive[0]); 
```

[Q2] 以这种方式将 CString 作为函数的结果返回是否安全且健壮，还是会导致内存损坏？

```
 CString MyClass:MyMethod(void)
 {   CString Stuff;
     // set a value to Stuff here.
     return Stuff; // return a stack-allocated-CString 
 } 
```

我的代码到处都使用上述两件事，而且似乎也表现出随机运行时内存损坏。这两件事对我来说是危险信号，我是否正确地怀疑 CString 是由 Visual C++ 6.0 中的 MFC 的作者`int`打算`char`的并且以某种方式复制构造函数和内存管理都正常工作了吗？

显而易见的东西： **是的，当然**我会尽可能地从 VC++ 6.0 中删除我的所有代码，但我首先需要修补一个崩溃的生产系统，然后我可以开始推进这个遗留代码库的艰巨任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T17:37:11.663

根据[VC6.0 的文档](http://msdn.microsoft.com/en-us/library/aa300688%28v=vs.60%29.aspx)

> CString 对象可以作为连接操作的结果而增长。CString 对象遵循“值语义”。</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T17:23:51.507

[Microsoft Documentation](http://msdn.microsoft.com/en-us/library/acttytz3.aspx) seems to indicate that `CString` in purpose is similar to `std::string` in that it grows automatically when needed, and can be safely be passed around as arguements or return values of functions.

# php - 一种上传多个文件并使用 JCrop 裁剪它们的方法？

> ID：13894332
> 
> 赞同：0
> 
> 时间：2012-12-15T17:10:12.830
> 
> 标签：php, html, image, jcrop

我有一个应用程序，我可以在其中上传 1 张图像并对其进行裁剪，然后保存。

我想上传多个文件（输入类型为多个），然后裁剪选定的图像。

所以我现在的工作很完美，但我想上传超过 1 个。

索引.php：

```
<!DOCTYPE>
<html>

<head>
    <title>Het Vergeet-mij-nietje</title>
    <link href="style/default.css" REL="stylesheet" TYPE="text/css">
    <script type="text/javascript" src="js/showfunctie.js"></script>
    <script src="js/jquery.min.js"></script>
    <script src="js/jquery.Jcrop.min.js"></script>
    <link rel="stylesheet" href="css/jquery.Jcrop.css" type="text/css" />
</head>

<body>
<center>
    <div id="title">
    <h1><a href="index.php" id="link1">Het "Vergeet-mij-nietje"</a></h1>
    <h3>Upload Systeem</h3>
    </div>

<div id="content1">
    <p><b>Upload hier een afbeelding en druk op upload om hem vervolgens te kunnen bijsnijden.</b></p>
<form action="uploaded.php" method="post" enctype="multipart/form-data" onsubmit="return checkCoords();">
    <input type="file" name="filename" />
    <input type="submit" value="Upload" />
</form>:
<br /> <br />

<p align="left"><b>Bekijk hier de gecropte en geuploadde foto's</b></p>

    <p class="album">
        <?php include 'album.php';?>
    </p>

</div>

<div id="copyright">
Copyright &copy; Kees Sonnema & Jan Beetsma
</div>

</body>
</html> 
```

上传的.php：

```
<!DOCTYPE>
<html>

<head>
    <title>Het Vergeet-mij-nietje</title>
    <link rel="stylesheet" href="style/default.css" type="text/css" />
    <script src="js/jquery.min.js"></script>
    <script src="js/jquery.Jcrop.min.js"></script>
    <link rel="stylesheet" href="style/css/jquery.jcrop.css" type="text/css" />

<script language="Javascript">
  // dit is de functie voor het croppen
            $(function(){

                $('#cropbox').Jcrop({
                    aspectRatio: 0,
                    onSelect: updateCoords,
                    bgColor: 'lightblue',
                    boxWidth: 600,
                    bgOpacity: .3,
                });

            });

            function updateCoords(c)
            {
                $('#x').val(c.x);
                $('#y').val(c.y);
                $('#w').val(c.w);
                $('#h').val(c.h);
            };

            function checkCoords()
            {
                if (parseInt($('#w').val())) return true;
                alert('Select where you want to Crop.');
                return false;
            };

        </script>
</head>
<body>
    <center>
        <div id="title">
        <h1><a href="index.php" id="link1">Het "Vergeet-mij-nietje"</a></h1>
        <h3>Upload Systeem</h3>
        </div>

     <div id="content1">
         <?php 
             session_start();
             $target = "data/uploads/"; 
             $target = $target . basename( $_FILES['filename']['name']) ; 
             $_SESSION['target_path'] = $target;

             $ok=1; 
             if(move_uploaded_file($_FILES['filename']['tmp_name'], $target)) 
             {
             echo "De afbeelding *". basename( $_FILES['filename']['name']). "* is geupload naar de map 'uploads'";
             } 
             else {
             echo "Sorry, er is een probleem met het uploaden van de afbeelding.";
             }
        ?> 
     <br /> <br />
    <center>
     <img id="cropbox" src="<?php echo $target ?>" />
    </center>
        <form action="crop.php" method="post" enctype="multipart/form-data">
            <input type="hidden" id="x" name="x" />
            <input type="hidden" id="y" name="y" />
            <input type="hidden" id="w" name="w" />
            <input type="hidden" id="h" name="h" />
            <input type="submit" value="Crop" />
        </form>

     <br /> <br />

     <a href="index.php">Ga terug naar de uploadpagina.</a>
    </div>

     <div id="copyright">
    Copyright &copy; Kees Sonnema
    </div>
</body>
</html> 
```

作物.php

```
<!DOCTYPE>
<html>
<head>
    <title>Cropped Image</title>
</head>
<body>

<?php
SESSION_start();
if ($_SERVER['REQUEST_METHOD'] == 'POST')
{
$jpeg_quality = 100;

$src = $_SESSION['target_path'];
$img_r = imagecreatefromjpeg($src);
$dst_r = imagecreatetruecolor($_POST['w'], $_POST['h']);

imagecopy(
    $dst_r, $img_r,
    0, 0, $_POST['x'], $_POST['y'],
    $_POST['w'], $_POST['h']
);

header('Content-type: image/jpeg');
imagejpeg($dst_r, 'data/uploads/' . basename($src));
header('Location:'.$src);
exit;
}
?>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-30T10:01:38.460

如何使用这个库： [http ://trentrichardson.com/2012/12/11/uberuploadcropper-update-upload-and-crop-multiple-files/](http://trentrichardson.com/2012/12/11/uberuploadcropper-update-upload-and-crop-multiple-files/)

# java - 在项目之间共享用户库

> ID：13894341
> 
> 赞同：3
> 
> 时间：2012-12-15T17:11:11.630
> 
> 标签：java, eclipse

我正在花一些时间学习 Eclipse，然后再学习 NetBeans。我实际上喜欢这两个 IDE。我不知道我更喜欢哪一个，但它们似乎很直观。

至于 Eclipse IDE，我正在学习在所有项目中共享用户库的最佳实践。更不用说当我在网上找到别人的 Java 代码时，我当然想导入该代码并在我需要的任何地方使用它。

我注意到 Stack Overflow 上有很多关于如何在所有项目之间共享资产的问题。

需要明确的是，当我说“资产”时，我指的不是我的项目的主要方法所在的位置。（即：图像、xml/txt 文件、自定义类等......）

我来自 web 开发世界 (PHP)，所以我的思维习惯于 PHP`include()`和`require()`函数，用于将服务器上的任何内容导入我的应用程序。像我认识的大多数 Web 开发人员一样，我将我的 Web 资源保存在相同的位置以便于导入。

现在进入一个新世界，Java + Eclipse。

我创建了一个项目，现在我正在该单个项目中创建其他类。这些类在我创建的几乎每个项目中都很有用。

在阅读了其他问题和帖子后，我仍然不太确定项目之间资产共享的最佳实践。（我也只关心一个工作区）

我想听听其他人关于他们个人最佳实践的信息。

您是否创建了一个仅包含类、图像、文件的项目？

您是否在文件系统的某个位置保留了一个文件夹/目录来保存所有这些，然后您将其导入？

您在创建项目时使用 Eclipse 的默认设置，还是更改任何内容？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-15T17:13:46.223

您可以将共享库放在一个 Eclipse 项目中`P`，并使其他项目依赖`P`. 要使项目`Q`依赖，`P`请执行以下操作：

1.  在包资源管理器中选择项目`Q`，然后右键单击它。
2.  `Properties`从上下文菜单中选择。
3.  转到`Java Build Path`属性页面。
4.  转到`Projects`选项卡。
5.  检查项目`P`以将其添加到项目的构建路径中`Q`。

有关详细信息，请参阅[http://www.informit.com/articles/printerfriendly.aspx?p=367962上的文章。](http://www.informit.com/articles/printerfriendly.aspx?p=367962)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-15T14:36:10.390

还有另一种更好的方法。

**使用项目作为其他项目的依赖项似乎[更容易](http://www.informit.com/articles/article.aspx?p=367962&seqNum=2)......
但只有当我们想将该项目用作库项目时才应该这样做。

否则，如果我们只想在项目之间共享用户库，那么下面的方法会更好。**

> 创建包含库的[链接文件夹](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.platform.doc.user%2Ftasks%2Ftasks-45.htm)，如下所示：
> 
> 1.  右键单击项目。
>     
> 2.  单击新建，然后选择新文件夹。
>     
> 3.  前进。
>     
> 4.  选择你的 lib 目录。
>     
> 5.  点击确定。
> 6.  右键单击项目。
>     
> 7.  转到属性。
>     
> 8.  转到 Java 构建路径。
>     
> 9.  转到库选项卡。
>     
> 10.  单击 Add Jars... 并从 /libs 目录导入所需的 jars。
>     
> 11.  点击确定。

# database - 用于时间序列和聚合的数据库系统

> ID：13894343
> 
> 赞同：1
> 
> 时间：2012-12-15T17:11:17.650
> 
> 标签：database, sqlite, time-series

我目前正在创建一个基于覆盆子 pi 的记录设备，用于记录由太阳能电池阵列馈入电网的电力。

“主表”将以大约 20 个条目增长，代表阵列的几个部分产生的“当前”功率。

基本上这不是那么多，可以使用树莓派以可接受的性能处理，但是随着越来越多的数据查询，如“选择过去 10 年，按月分组”，可能不会很有效......（数据应通过交互式网络界面显示）

我想过做一些“背景聚合”并维护几个表来包含各种时间范围的聚合数据，但这似乎是一个可能已经被很多人处理过的问题。

你建议我怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T21:57:12.173

您不知道需要多少数据增长才能影响性能。
您不知道届时会有多少性能受到影响。*您根本*
不知道性能是否会受到影响。

 *只要您甚至没有估计需要多少性能改进，尝试进行优化是没有意义的。

或者，正如 Donald Knuth 所说：

> 过早优化是万恶之源

* * *

如果您确实*想要*创建聚合值的缓存，我建议在对原始数据进行任何更改后使用[触发器来保持缓存的一致性。](http://www.sqlite.org/lang_createtrigger.html)*

# python - 如何定位和对齐 matplotlib 图形图例？

> ID：13894345
> 
> 赞同：26
> 
> 时间：2012-12-15T17:11:37.887
> 
> 标签：python, matplotlib, legend

我有一个带有两个子图的图形，分别为 2 行和 1 列。我可以添加一个漂亮的人物图例

```
fig.legend((l1, l2), ['2011', '2012'], loc="lower center", 
           ncol=2, fancybox=True, shadow=True, prop={'size':'small'}) 
```

但是，这个图例位于**图形**的中心，而不是我想要的**轴**中心下方。现在，我可以获得我的坐标轴坐标

```
axbox = ax[1].get_position() 
```

理论上我应该能够通过使用元组指定*loc*关键字来定位图例：

```
fig.legend(..., loc=(axbox.x0+0.5*axbox.width, axbox.y0-0.08), ...) 
```

这有效，**除了**图例左对齐，以便*loc*指定图例框的左边缘/角而不是中心。我搜索了诸如*align*、*Horizo* ​​ntalalignment等关键字，但没有找到。我也尝试获取“图例位置”，但图例没有 *get_position()* 方法。我读到了 *bbox_to_anchor* 但在应用于图形图例时无法理解。这似乎是为轴传奇制作的。

或者：我应该改用移位轴图例吗？但是，为什么首先会有人物传说呢？并且以某种方式必须可以“居中对齐”图形图例，因为*loc="lower center"*也可以。

谢谢你的帮助，

马丁

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-12-19T23:06:46.893

在这种情况下，您可以将轴用于图形`legend`方法。无论哪种情况，`bbox_to_anchor`都是关键。正如您已经注意到的那样`bbox_to_anchor`，指定了一个坐标元组（或一个框）来放置图例。当您使用`bbox_to_anchor`时，将`location`kwarg 视为控制水平和垂直对齐。

区别只是坐标元组是被解释为轴还是图形坐标。

作为使用图形图例的示例：

```
import numpy as np
import matplotlib.pyplot as plt

fig, (ax1, ax2) = plt.subplots(nrows=2, sharex=True)

x = np.linspace(0, np.pi, 100)

line1, = ax1.plot(x, np.cos(3*x), color='red')
line2, = ax2.plot(x, np.sin(4*x), color='green')

# The key to the position is bbox_to_anchor: Place it at x=0.5, y=0.5
# in figure coordinates.
# "center" is basically saying center horizontal alignment and 
# center vertical alignment in this case
fig.legend([line1, line2], ['yep', 'nope'], bbox_to_anchor=[0.5, 0.5], 
           loc='center', ncol=2)

plt.show() 
```

![在此处输入图像描述](../Images/f87a9f3aeb21f19023f9471cc30c4659.png)

作为使用轴方法的示例，请尝试以下操作：

```
import numpy as np
import matplotlib.pyplot as plt

fig, (ax1, ax2) = plt.subplots(nrows=2, sharex=True)

x = np.linspace(0, np.pi, 100)

line1, = ax1.plot(x, np.cos(3*x), color='red')
line2, = ax2.plot(x, np.sin(4*x), color='green')

# The key to the position is bbox_to_anchor: Place it at x=0.5, y=0
# in axes coordinates.
# "upper center" is basically saying center horizontal alignment and 
# top vertical alignment in this case
ax1.legend([line1, line2], ['yep', 'nope'], bbox_to_anchor=[0.5, 0], 
           loc='upper center', ncol=2, borderaxespad=0.25)

plt.show() 
```

![在此处输入图像描述](../Images/2b0b5b35134a45c61ade36f0192913a6.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-04-04T10:07:15.537

这是一个很好的问题，接受的答案表明了关键（即`loc`表示对齐和`bbox_to_anchor`表示位置）。我也尝试了一些代码，并想强调有时需要明确指定才能达到预期效果的**属性****的重要性。`bbox_transform`**下面我将向您展示我的发现`fig.legend`。`ax.legend`应该非常相似，`loc`并且`bbox_to_anchor`工作方式相同。

使用默认设置时，我们将有以下内容。

```
%matplotlib inline
import numpy as np
import matplotlib.pyplot as plt

fig, (ax1, ax2) = plt.subplots(nrows=2, figsize=(6,4), sharex=True)

x = np.linspace(0, np.pi, 100)
line1, = ax1.plot(x, np.cos(3*x), color='red')
line2, = ax2.plot(x, np.sin(4*x), color='green')

fig.legend([line1, line2], ['yep', 'nope'], loc='lower center', ncol=2) 
```

[![在此处输入图像描述](../Images/88f7141ca07f169c079d458d108b8f23.png)](https://i.stack.imgur.com/KacDl.png)

这基本上是令人满意的。但很容易发现，图例与 .x 轴刻度标签重叠`ax2`。`figsize`当和/或`dpi`图形发生变化时，这个问题将变得更加严重，请参见下文。

```
fig, (ax1, ax2) = plt.subplots(nrows=2, figsize=(6,12), sharex=True, facecolor='w', gridspec_kw={'hspace':0.01})

x = np.linspace(0, np.pi, 100)
line1, = ax1.plot(x, np.cos(3*x), color='red')
line2, = ax2.plot(x, np.sin(4*x), color='green')

fig.legend([line1, line2], ['yep', 'nope'], loc='lower center', ncol=2) 
```

[![在此处输入图像描述](../Images/b0faea54497332871833fb3aced695bf.png)](https://i.stack.imgur.com/OIhw5.png)

`ax2`所以你看到和传说之间有很大的差距。这不是我们想要的。像提问者一样，我们想手动控制图例的位置。首先，我将使用 2-number 样式，`bbox_to_anchor`就像答案一样。

```
fig, (ax1, ax2) = plt.subplots(nrows=2, figsize=(6,12), sharex=True, facecolor='w', gridspec_kw={'hspace':0.01})

x = np.linspace(0, np.pi, 100)
line1, = ax1.plot(x, np.cos(3*x), color='red')
line2, = ax2.plot(x, np.sin(4*x), color='green')

axbox = ax2.get_position()

# to place center point of the legend specified by loc at the position specified by bbox_to_anchor.
fig.legend([line1, line2], ['yep', 'nope'], loc='center', ncol=2,
           bbox_to_anchor=[axbox.x0+0.5*axbox.width, axbox.y0-0.05]) 
```

[![在此处输入图像描述](../Images/663ad6dcf140010b4a2de429de381821.png)](https://i.stack.imgur.com/GZhPo.png)

差不多好了！但这是完全错误的，因为传说的中心并不是我们真正意思的中心！解决这个问题的关键是我们需要明确告知`bbox_transform`as `fig.transFigure`。[默认情况下无，将使用轴的 transAxes 变换](https://matplotlib.org/3.1.1/api/_as_gen/matplotlib.pyplot.legend.html)。这是可以理解的，因为我们大部分时间都会使用`ax.legend()`.

```
fig, (ax1, ax2) = plt.subplots(nrows=2, figsize=(6,12), sharex=True, facecolor='w', gridspec_kw={'hspace':0.01})

x = np.linspace(0, np.pi, 100)
line1, = ax1.plot(x, np.cos(3*x), color='red')
line2, = ax2.plot(x, np.sin(4*x), color='green')

axbox = ax2.get_position()

# to place center point of the legend specified by loc at the position specified by bbox_to_anchor!
fig.legend([line1, line2], ['yep', 'nope'], loc='center', ncol=2,
           bbox_to_anchor=[axbox.x0+0.5*axbox.width, axbox.y0-0.05], bbox_transform=fig.transFigure) 
```

[![在此处输入图像描述](../Images/0f2c4d98ccbf8c87bc8429bc8a83b083.png)](https://i.stack.imgur.com/9nF1a.png)

作为替代方案，我们也可以`bbox_to_anchor`为`loc`. 这本质上是为图例指定一个真实的框，并且`loc`真正表示对齐！默认`bbox_to_anchor`应该只是`[0,0,1,1]`，意思是整个图形框！四个数字`x0,y0,width,height`分别代表 。[这与为共享颜色条指定 cax](https://stackoverflow.com/questions/18195758/set-matplotlib-colorbar-size-to-match-graph/56900830#56900830)非常相似！因此，您可以轻松地更改`y0`稍微低于`axbox.y0`并`loc`进行相应调整。

```
fig, (ax1, ax2) = plt.subplots(nrows=2, figsize=(6,12), sharex=True, facecolor='w', gridspec_kw={'hspace':0.01})

x = np.linspace(0, np.pi, 100)
line1, = ax1.plot(x, np.cos(3*x), color='red')
line2, = ax2.plot(x, np.sin(4*x), color='green')

axbox = ax2.get_position()

# to place center point specified by loc at the position specified by bbox_to_anchor!
fig.legend([line1, line2], ['yep', 'nope'], loc='lower center', ncol=2,
           bbox_to_anchor=[0, axbox.y0-0.05,1,1], bbox_transform=fig.transFigure) 
```

[![在此处输入图像描述](../Images/cc745017c557f4225d5103ae5d4dfb36.png)](https://i.stack.imgur.com/NKvO2.png)

# python - python解包中的逗号是什么意思？

> ID：13894350
> 
> 赞同：5
> 
> 时间：2012-12-15T17:12:43.613
> 
> 标签：python, comma, unpack

我们可以简单地使用：

```
crc = struct.unpack('>i', data) 
```

为什么人们喜欢这样：

```
(crc,) = struct.unpack('>i', data) 
```

逗号是什么意思？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-15T17:14:20.447

第一个变体返回一个单元素元组：

```
In [13]: crc = struct.unpack('>i', '0000')

In [14]: crc
Out[14]: (808464432,) 
```

要获得该值，您必须编写`crc[0]`.

第二个变体*解包*元组，使您能够编写`crc`而不是`crc[0]`：

```
In [15]: (crc,) = struct.unpack('>i', '0000')

In [16]: crc
Out[16]: 808464432 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T17:15:51.057

该`unpack`方法返回一个值元组。使用您描述的语法，可以直接将元组的第一个值加载到变量`crc`中，而第一个示例引用整个元组，您必须`crc[1]`稍后在脚本中编写来访问第一个值。

因此，基本上如果您只想使用其中一个返回值，您可以使用此方法将其直接加载到一个变量中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T17:14:08.050

逗号表示`crc`是元组的一部分。（有趣的是，在 Python 中指示元组的是逗号，而不是括号。）`(crc,)`是具有一个元素的元组。

```
crc = struct.unpack('>i', data) 
```

做`crc`一个元组。

```
(crc,) = struct.unpack('>i', data) 
```

分配`crc`给元组中第一个（也是唯一一个）元素的值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-15T17:14:51.510

`(crc,)`被认为是单元组。

# android-asynctask - 带有适配器的异步任务上的 NullPointerException

> ID：13894353
> 
> 赞同：0
> 
> 时间：2012-12-15T17:13:05.050
> 
> 标签：android-asynctask, adapter

我正在使用带有适配器的 asy 任务并收到此错误

```
 java.lang.NullPointerException 
```

问题线是

```
 listAdapter = new listAdpterRss(this.context, R.layout.listitems,RssArrays,RssArrays.rtl); 
```

我的 asy 任务看起来像这样

```
protected void onPostExecute(String result) {
        Dialog.dismiss();
        ListView lv = getListView();
    //  lv.setTextFilterEnabled(true);
        listAdapter = new listAdpterRss(this.context, R.layout.listitems,RssArrays,RssArrays.rtl);
        lv.setAdapter(listAdapter); // on test
        listAdapter.notifyDataSetChanged();
        lv.setOnItemClickListener(new OnItemClickListener() 
        {
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                Intent intent = new Intent(RssItem.this,openRssItem.WebActivity.class);
                intent.putExtra("url", RssArrays.PodcastURL[position].toString());

                startActivity(intent);
                //new splash(ListRss.this,mHandler,listValue.get(position).toString()).execute();
            } 

        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-11T09:05:10.883

您稍后会设置适配器，并且可能会在您的 doInBackground 方法中使用。这就是它显示 nullPointer 的原因。请把所有这些放在onPreExecute()上：

列表视图 lv = getListView(); // lv.setTextFilterEnabled(true); listAdapter = new listAdpterRss(this.context, R.layout.listitems,RssArrays,RssArrays.rtl); lv.setAdapter(listAdapter);

然后尝试您的代码。

# ocaml - 在 OCaml 中将 aa 字符串列表列表转换为字符串数组数组

> ID：13894357
> 
> 赞同：1
> 
> 时间：2012-12-15T17:13:55.977
> 
> 标签：ocaml

我正在尝试获得一个漂亮的打印功能来在 OCaml 中打印我的数据库的查询结果。我一直在遵循这种方法[http://mancoosi.org/~abate/ocaml-format-module](http://mancoosi.org/~abate/ocaml-format-module)

到目前为止我有这个代码：

```
let pp_cell fmt cell = Format.fprintf fmt "%s" cell;;

let pp_header widths fmt header =
  let first_row = Array.map (fun x -> String.make (x + 1) ' ') widths in
  Array.iteri (fun j cell ->
    Format.pp_set_tab fmt ();
    for z=0 to (String.length header.(j)) - 1 do cell.[z] <- header.(j).[z] done;
    Format.fprintf fmt "%s" cell
  ) first_row

let pp_row pp_cell fmt row =
  Array.iteri (fun j cell ->
    Format.pp_print_tab fmt ();
    Format.fprintf fmt "%a" pp_cell cell
  ) row

let pp_tables pp_row fmt (header,table) =
  (* we build with the largest length of each column of the 
   * table and header *)
  let widths = Array.create (Array.length table.(0)) 0 in
  Array.iter (fun row ->
    Array.iteri (fun j cell ->
      widths.(j) <- max (String.length cell) widths.(j)
    ) row
  ) table;
  Array.iteri (fun j cell ->
    widths.(j) <- max (String.length cell) widths.(j)
  ) header;

  (* open the table box *)
  Format.pp_open_tbox fmt ();

  (* print the header *)
  Format.fprintf fmt "%a@\n" (pp_header widths) header;
  (* print the table *)
  Array.iter (pp_row fmt) table;

  (* close the box *)
  Format.pp_close_tbox fmt ();
;;

(** Pretty print answer set of a query in format of
 *    col_name 1 | col_name 2 | col_name 3 |
 *    result1.1  | result2.1  | result3.1  |
 *    result1.2  | result2.2  | result3.2  |
 *   @param col_names provides the names of columns in result outp ut *)
let pretty_print fmt pp_cell (col_names, tuples) =
    match col_names with
  | [] -> printf "Empty query\n"
  | _ ->
        printf "Tuples ok\n";
        printf "%i tuples with %i fields\n" (List.length tuples) (List.length col_names);
        print_endline(String.concat "\t|" col_names);
        for i = 1 to List.length col_names do printf "--------" done; print_newline() ;
        let print_row = List.iter (printf "%s\t|") in
        List.iter (fun r -> print_row r ; print_newline ()) tuples;
        for i = 1 to List.length col_names do printf "--------" done; print_newline() ;

    let fmt = Format.std_formatter in
    Format.fprintf fmt "%a" (pp_tables (pp_row pp_cell)) (Array.of_list col_names,tuples);

      flush stdout
;;

let print_res (col_names, tuples) =
    let fmt = Format.std_formatter in
    pretty_print fmt pp_cell (col_names, tuples)
;; 
```

问题出在一线

```
Format.fprintf fmt "%a" (pp_tables (pp_row pp_cell)) (Array.of_list col_names,tuples); 
```

基本上是因为我需要元组和字符串数组数组（矩阵），而它的类型是字符串列表。所以我试图通过按照这种方法将列表列表转换为矩阵来解决它[http://www.siteduzero.com/forum-83-589601-p1-ocaml-convertir-un-list-list-en-array-array .html](http://www.siteduzero.com/forum-83-589601-p1-ocaml-convertir-un-list-list-en-array-array.html)与此代码：

```
let listToMatrix lli =
  let result = Array.init 6 (fun _ -> Array.create 7 2)
  let rec outer = function
    | h :: tl, col ->
      let rec inner = function
        | h :: tl, row ->
          result.[row].[col] <- h
          inner (tl, row + 1)
        | _ -> ()

      inner (h, 6 - List.length h)
      outer (tl, col + 1)
    | _ -> ()
  outer (lli, 0)
  result
;; 
```

但我只是在编译时出现语法错误：

```
File "src/conn_ops.ml", line 137, characters 2-5:
Error: Syntax error
make: *** [bin/conn_ops.cmo] Error 2 
```

我真的不知道该怎么做，也不知道如何完成列表列表到矩阵的对话。我的做法正确吗？这是我第一次与 OCaml 合作，这对***来说非常痛苦，所以请试着对我好一点：D

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T17:23:42.863

This is a lot of code to read in detail, but it looks like you're missing a semicolon after `result.[row].[col] <- h`. However, this code looks suspicious to me. The notation `.[xxx]` is for accessing individual characters of a string. You want to use array index notation `.(xxx)`, seems to me.

Here is a function that changes a `string list list` to a `string array array`. Maybe it will be useful:

```
let sll_to_saa sll = Array.of_list (List.map Array.of_list sll) 
```

Actually, this function changes any list of lists to an array of arrays; it doesn't have to be strings.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-15T17:28:44.267

我不确定我是否理解您的整个帖子，但如果您想将 a 转换`string list list`为 a `string array array`，您可以使用以下函数轻松完成此操作`Array.of_list`：

```
# let strings = [["hello"; "world"]; ["foo"; "bar"]];;
val strings : string list list = [["hello"; "world"]; ["foo"; "bar"]]
# Array.of_list (List.map Array.of_list strings);;
- : string array array = [|[|"hello"; "world"|]; [|"foo"; "bar"|]|] 
```

我希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T19:10:08.427

您的函数在语法上不正确。以下是固定版本：

```
let listToMatrix lli =
  let result = Array.init 6 (fun _ -> Array.create 7 2) in
  let rec outer = function
    | h :: tl, col ->
      let rec inner = function
    | h :: tl, row ->
      result.(row).(col) <- h;
      inner (tl, row + 1)
    | _ -> ()
      in
      inner (h, 6 - List.length h);
      outer (tl, col + 1)
    | _ -> ()
  in 
  outer (lli, 0);
  result
;; 
```

如其他答案所述：

*   数组的下标运算符是括号，
*   缺少一些分号，
*   有时您忘记使用关键字`in`来标记将使用您的定义的表达式。

请注意，我没有检查该函数是否完成了它应该做的事情。

# python - 安装 python-nmap 模块

> ID：13894364
> 
> 赞同：0
> 
> 时间：2012-12-15T17:14:21.403
> 
> 标签：python, module, installation

一直在尝试安装一个名为[python-nmap-0.2.4](http://xael.org/norman/python/python-nmap/)的模块。我输入

```
python /root/Downloads/python-nmap-0.2.4.setup.py install 
```

但它显示了这个错误

```
Traceback (most recent call last):
  File "/root/Downloads/python-nmap-0.2.4/setup.py", line 43, in <module>
    long_description=open('README.txt').read() + "\n" + open('CHANGELOG').read(),
IOError: [Errno 2] No such file or directory: 'README.txt' 
```

有没有人有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T17:23:33.567

Some "suggestions":

*   Don't use the root account for this. Too risky - how much can you trust the download? Did you check a cryptographic signature, and whether it is a trusted source? If not, don't run it as root (and better yet, don't even use it at all!).
*   Does maybe your Linux come with a precompiled version? That is much more secure (because it should involve cryptographic signatures). Try `aptitude install python-nmap`.
*   Try installing from the source directory.
*   It may be much easier to just use the `subprocess` module, which is included by default.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T17:23:09.097

1) May be PIP has this package? 2) May be package package has been damaged during download ?

# wpf - WPF 全局打开/关闭对话框事件？

> ID：13894369
> 
> 赞同：1
> 
> 时间：2012-12-15T17:14:41.873
> 
> 标签：wpf, events, dialog, event-handling

在我的 WPF 应用程序中，我想订阅一些事件/callbeck/whatever 来告诉我每当我的应用程序中的对话框窗口打开（和关闭）时。

我找到了窗口集合，但这是一个简单的容器，它似乎没有提供任何订阅方式。

我也尝试使用事件处理程序，但似乎没有一个事件告诉我我需要什么。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T22:22:56.687

如果没有为所有窗口创建一个基类，您可以在其中挂钩打开的事件（或手动将打开的事件添加到每个窗口），我不确定您如何知道何时创建新窗口。

可能有一种更优雅的方式，但您可以轮询`Application.Current.Windows`以查看是否创建了任何新窗口，同时跟踪您找到的窗口。

这是一个粗略的示例，它将演示如何使用 a`DispatchTimer`来轮询新窗口、跟踪找到的窗口并挂钩到关闭的事件。

**代码背后**

```
public partial class MainWindow : Window
{
    private DispatcherTimer Timer { get; set; }

    public ObservableCollection<Window> Windows { get; private set; }

    public MainWindow()
    {
        InitializeComponent();

        // add current Window so we don't add a hook into it
        Windows = new ObservableCollection<Window> { this };

        Timer = new DispatcherTimer( DispatcherPriority.Background );
        Timer.Interval = TimeSpan.FromMilliseconds( 500 );
        Timer.Tick += ( _, __ ) => FindNewWindows();
        Timer.Start();

        this.WindowListBox.ItemsSource = Windows;
        this.WindowListBox.DisplayMemberPath = "Title";
    }

    private void FindNewWindows()
    {
        foreach( Window window in Application.Current.Windows )
        {
            if( !Windows.Contains( window ) )
            {
                window.Closed += OnWatchedWindowClosed;
                // inserting at 0 so you can see it in the ListBox
                Windows.Insert( 0, window );
                Feedback.Text = string.Format( "New Window Found: {0}\r\n{1}",
                                                window.Title, Feedback.Text );
            }
        }
    }

    private void OnWatchedWindowClosed( object sender, EventArgs e )
    {
        var window = (Window)sender;
        Windows.Remove( window );
        Feedback.Text = string.Format( "Window Closed: {0}\r\n{1}",
                                        window.Title, Feedback.Text );
    }

    private void CreateWindowButtonClick( object sender, RoutedEventArgs e )
    {
        string title = string.Format( "New Window {0}", DateTime.Now );
        var win = new Window
                    {
                            Title = title,
                            Width = 250,
                            Height = 250,
                            Content = title,
                    };

        win.Show();
        e.Handled = true;
    }
} 
```

**XAML**

```
<Grid>
    <ListBox Name="WindowListBox"
                Width="251"
                Height="130"
                Margin="12,12,0,0"
                HorizontalAlignment="Left"
                VerticalAlignment="Top" />
    <TextBox Name="Feedback"
                Width="479"
                Height="134"
                Margin="12,148,0,0"
                HorizontalAlignment="Left"
                VerticalAlignment="Top"
                VerticalScrollBarVisibility="Auto" />
    <Button Name="CreateWindowButton"
            Width="222"
            Height="130"
            Margin="269,12,0,0"
            HorizontalAlignment="Left"
            VerticalAlignment="Top"
            Click="CreateWindowButtonClick"
            Content="Create New Window"
            FontSize="20" />
</Grid> 
```

单击并创建任意数量的新窗口；然后关闭它们。你会看到反馈，因为它发生。当然，每当创建新窗口时都会有 500 毫秒的延迟，因为`DispatchTimer`' 的间隔设置为 500 毫秒。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-21T13:32:23.983

在没有基类的情况下执行此操作的一种方法是将处理程序添加到 MainWindow deactivated

如果打开一个新窗口，主窗口将失去焦点 = 你的“新窗口事件”

```
private readonly List<Window> openWindows = new List<Window>();

public void ApplicationMainWindow_Deactivated(object sender, EventArgs e)
{
    foreach (Window window in Application.Current.Windows)
    {
        if (!openWindows.Contains(window) && window != sender)
        {
            // Your window code here
            window.Closing += PopupWindow_Closing;
            openWindows.Add(window);
        }
    }
}

private void PopupWindow_Closing(object sender, CancelEventArgs e)
{
    var window = (Window)sender;
    window.Closing -= PopupWindow_Closing;
    openWindows.Remove(window);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-14T15:45:18.907

您可以在 App.cs 中注册一个类处理程序，如此处所示

[https://gist.github.com/mwisnicki/3104963](https://gist.github.com/mwisnicki/3104963)

```
 ...
    EventManager.RegisterClassHandler(typeof(UIElement), FrameworkElement.LoadedEvent, new RoutedEventHandler(OnLoaded), true);
    EventManager.RegisterClassHandler(typeof(UIElement), FrameworkElement.UnloadedEvent, new RoutedEventHandler(OnUnloaded), true);
    ...        

    private static void OnLoaded(object sender, RoutedEventArgs e)
    {
        if (sender is Window)
            Console.WriteLine("Loaded Window: {0}", sender);
    }

    private static void OnUnloaded(object sender, RoutedEventArgs e)
    {
        if (sender is Window)
            Console.WriteLine("Unloaded Window: {0}", sender);
    } 
```

上面的链接似乎在实例上注册了一个空处理程序以使事情正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T17:51:23.047

我从未听说过任何全球性的开/关事件。

应该以某种方式可以做到，但这提供了您可以控制所有窗口的打开和关闭。就像您构建一个所有对话框窗口都继承自的“基本窗口”（自然继承“窗口”）一样。

然后你会在“基本窗口”上有一个静态事件，你从基本窗口的打开和关闭/关闭（或卸载）事件中触发，将“this”作为“sender”发送。您可以在 App.xaml.cs 类中附加到该静态事件。

这是一个黑客，但它是可能的。

# symfony - 在 symfony 2 控制器中注册的编译器通行证

> ID：13894372
> 
> 赞同：0
> 
> 时间：2012-12-15T17:14:52.867
> 
> 标签：symfony

我写了一个编译器通道（一个实现的类`CompilerPassInterface`），我想将它注册到我的一个控制器的 DI 容器中。我想做的是让某个服务 X 收集以某种方式标记的其他服务（Y、Z、...）。在控制器之外，我会简单地做：

```
$container = new ContainerBuilder();
$container->addCompilerPass(new TransportCompilerPass); 
```

但在我的情况下，我想使用控制器可用的容器，以便我可以利用添加到我的应用程序的 services.xml 中的定义。我觉得很奇怪控制器的 $this->container 有`get`方法但没有`addCompilerPass`. 显然它一定是因为`$this->container`不是`ContainerBuilder`.

无论如何......谁能告诉我一个解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T17:22:16.310

ooooops

when u wanna register a compiler pass this must be done in the bundle class and not in any of the controllers of the budle. This link explains everything:

[http://symfony.com/doc/current/cookbook/service_container/compiler_passes.html](http://symfony.com/doc/current/cookbook/service_container/compiler_passes.html)

# ios - 在开发基于简单动画的 iOS 游戏时我应该采取什么方法

> ID：13894375
> 
> 赞同：1
> 
> 时间：2012-12-15T17:15:16.410
> 
> 标签：ios, user-interface, user-experience, uianimation

我在这里的问题不是关于如何实现某些目标，而是要包含哪些内容将对我呈现的内容产生最佳效果。

我正在设计一个基于故事的应用程序（可能是单屏）。可以说，不是故事，而是场景。一个典型的场景是开车穿过街道，去办公室或两者兼而有之。等等。

在每次点击（或任何用户活动）时，场景的下一步都会显示出来。比如遇到一个人，撞车等等。但由于这些场景几乎是无限的，因此无法为我的应用程序设计图形。换句话说，它不会是办公室、阁楼、城堡或房子。它可以是其中任何一个，也可以是它们的组合。

由于这个限制，部分原因是我懒于处理大量图形（我没有下属，也没有大笔钱！），我决定在每次点击时做一些简单的动画。单个物体（如球）可以滚动或无处出现等。

我的问题：

1）可选：我如何实现这个动画？我知道目标 c，但我不知道它是否足够。Box2d 是我知道的另一个选项。没关系还是矫枉过正？如果目标 c 就足够了，任何人都可以帮助我使用简单的代码来为远处（iphone 中心）的滚动球设置动画吗？

2) 必填：以上是我自己能想到的，但更重要的是：我如何设计我的其他 UI 来描述场景和情况？哪些 iOS 功能最适合这种情况？我可以想到单个 UILabel 来描述情况，但我不知道如何将它与上面的 1 一起定位/动画。然而，这似乎过于简单了。还有其他可以帮助我的 iOS 视图吗？

抱歉要求有点模棱两可，但我在这里缺乏想象力，我知道如果我在这一步被误导，很多事情都会出错。

谢谢您的帮助。

# c# - 只有一个成员的副本集中的 MongoDB 和 C# 驱动程序套接字超时

> ID：13894376
> 
> 赞同：1
> 
> 时间：2012-12-15T17:15:17.317
> 
> 标签：c#, mongodb

我有一个正在运行的 C# Web 应用程序，它使用 c# 驱动程序 1.7.0.4714 连接到 MongoDB。我想将这个 MongoDB 放入具有两个辅助节点的副本集中。当我在副本集模式下重新启动我的原始 MongoDB 时，它会获得主要但来自我的 Web 应用程序的大多数连接都失败了

> *System.Net.Sockets.SocketException*

当我以非副本集模式重新启动 MongoDB 时，一切都再次运行良好。

这是我的连接字符串：“mongodb://myserver:27017”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T04:37:43.073

当您连接到副本集时，通常驱动程序可以确定它正在连接到副本集或独立服务器。

您没有说您使用的是哪个版本的 C# 驱动程序，也没有提供您正在使用的连接字符串/语法的确切格式，但本教程在此处详细介绍了这一点：[http ://www.mongodb.org /display/DOCS/CSharp+Driver+Tutorial#CSharpDriverTutorial-MongoClientclass](http://www.mongodb.org/display/DOCS/CSharp+Driver+Tutorial#CSharpDriverTutorial-MongoClientclass)。

表示如果只指定一台服务器，不指定副本集名称，则使用直接模式，这不是你想要的。

您应该明确使用副本集模式而不是默认自动模式，或者您应该指定副本集名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:28:24.460

我找到了很简单的答案，很抱歉在这里问一个转储问题：

我使用域名设置了我的副本，即

```
rs.add("myserver01")
rs.add("myserver02")
rs.add("myserver03") 
```

`myserver01, ...,`无法在我的应用程序服务器上解析域名，我使用 IP 地址连接：`mongodb://10.0.0.1:27017,10.0.0.2:27017,10.0.0.3:27017`

所以每第二个或第三个请求都失败了。修复连接字符串以使用域名并修复域名可以解析修复了所有问题。

# javascript - Javascript混淆输入框值

> ID：13894381
> 
> 赞同：0
> 
> 时间：2012-12-15T17:16:36.553
> 
> 标签：javascript, events, input, bookmarklet

好的，我正在编写一些代码，有人可以将其用作书签来实时混淆输入框的值...

```
var elements = document.getElementsByTagName("input");
for (var ii = 0; ii < elements.length; ii++) {

    elements[ii].addEventListener("keyup", function() {

        var input = elements[ii].value;
        var a = [""];
        var gen;
        for (x in input) {
            a[x] = input[input.length - x - 1];
        };
        for (x in a) {
            var gen = gen + a[x];
        };
        output = gen.replace('undefined', '');
        elements[ii].value = output;
    }, false);
}; 
```

此代码（前面带有 JavaScript：）对任何输入框都没有影响。谁能明白为什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T17:20:31.500

Use `this` instead of `elements[ii]` inside the addEventListener code. Cos elements[ii] will have no meaning inside that code.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T17:29:02.080

我在你的代码中做了一些修复。这是修改后的版本：

```
var elements = document.getElementsByTagName("input");
for (var ii = 0; ii < elements.length; ii++) {

    elements[ii].addEventListener("keyup", function() {

        var input = this.value;
        var a = [];
        var gen;
        for (var x in input) {
            a[x] = input[input.length - x - 1];
        };
        for (x in a) {
            var gen = gen + a[x];
        };
        output = gen.replace('undefined', '');
        this.value = output;
    }, false);
}; 
```

请查看[演示](http://jsbin.com/utedek/2/watch)

# javascript - MVC3 jquery后序列化数组

> ID：13894383
> 
> 赞同：2
> 
> 时间：2012-12-15T17:16:51.780
> 
> 标签：javascript, jquery, asp.net-mvc-3, jquery-selectors

在我的网站中，有一个`table`, 在 every`td`中，有一个`div`with`<input>`里面。我在表格上运行并序列化每个 div 并将其发布到服务器。

```
 for (var r = 0; r < tbodyRow.length; r++) {
            var tbodyCols = tbodyRow[r].cells;
            for (var c = 0; c < tbodyCols.length; c++) {
                row = r + 1;
                cell = c + 1;
                div = $("#tbody tr:nth-child(" + row + ") td:nth-child(" + cell + ") :input").serialize();
                if (div != "") {
                    $.post("../Contoller/Action?Mode=" + Mode, div, function () { });
                }
                tbodyCounter++;
            };
        }; 
```

并且在服务器中 - 操作有一个对象作为获取它的参数。

我想只发布一次对象的所有列表（我在 div 中）并像`List<T>`在服务器端一样获取它。可能吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T17:28:18.780

是的，模型绑定允许这样做。参考下面的文章

[http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)

也可以参考下面的介绍

[http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T17:29:09.413

在表单标签内输入输入并序列化表单并发送它。

```
$.post("@Url.Action("YourAction","YourController")",
                            $("#yourFormID").serailize(),function(data){

}); 
```

在控制器中，您可以使用您的视图被强类型化到的模型 /viewmodel 作为参数，以便 MVC 模型绑定将发布的数据绑定到它。

```
[HttpPost]
public ActionResult YourAction(YourViewModel model)
{

 //do something
} 
```

# codeigniter - Upstream too big - nginx + codeigniter

> ID：13894386
> 
> 赞同：60
> 
> 时间：2012-12-15T17:17:01.000
> 
> 标签：codeigniter, session, nginx, header

I am getting this error from Nginx, but can't seem to figure it out! I am using codeigniter and am using the database for sessions. So I'm wondering how the header can ever be too big. Is there anyway to check what the header is? or potentially see what I can do to fix this error?

Let me know if you need me to put up any conf files or whatever and I'll update as you request them

```
2012/12/15 11:51:39 [error] 2007#0: *5778 upstream sent too big header while reading response header from upstream, client: 24.63.77.149, server: jdobres.xxxx.com, request: "POST /main/login HTTP/1.1", upstream: "fastcgi://127.0.0.1:9000", host: "jdobres.xxxxx.com", referrer: "http://jdobres.xxxx.com/" 
```

**UPDATE**

I added the following into conf:

```
proxy_buffer_size   512k;
proxy_buffers   4 512k;
proxy_busy_buffers_size   512k; 
```

And now I still get the following:

```
2012/12/16 12:40:27 [error] 31235#0: *929 upstream sent too big header while reading response header from upstream, client: 24.63.77.149, server: jdobres.xxxx.com, request: "POST /main/login HTTP/1.1", upstream: "fastcgi://127.0.0.1:9000", host: "jdobres.xxxx.com", referrer: "http://jdobres.xxxx.com/" 
```

* * *

## 回答 #1

> 赞同：137
> 
> 时间：2012-12-15T20:59:13.253

Add this to your `http {}` of the **nginx.conf** file normally located at **/etc/nginx/nginx.conf**:

```
proxy_buffer_size   128k;
proxy_buffers   4 256k;
proxy_busy_buffers_size   256k; 
```

Then add this to your php location block, this will be located in your vhost file look for the block that begins with **location ~ .php$ {**

```
fastcgi_buffer_size 128k;
fastcgi_buffers 4 256k;
fastcgi_busy_buffers_size 256k; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-15T17:18:32.293

Modify your nginx configuration and change/set the following directives:

```
 proxy_buffer_size   128k;
    proxy_buffers   4 256k;
    proxy_busy_buffers_size   256k; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-09-18T14:31:38.737

I have proven that this is also sent when an invalid header is transmitted. Invalid characters or formatting of the HTTP headers, cookie expiration set back by more than a month, etc will all cause: upstream sent too big header while reading response header from upstream

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-03-18T18:12:13.090

## using nginx + fcgiwrap + request too long

I had the same problem because I use a nginx + fcgiwrap configuration:

```
location ~ ^.*\.cgi$ {
    fastcgi_pass  unix:/var/run/fcgiwrap.sock;
    fastcgi_index index.cgi;
    fastcgi_param SCRIPT_FILENAME /opt/nginx/bugzilla/$fastcgi_script_name;
    include /etc/nginx/fastcgi_params;
    # attachments can be huge
    client_max_body_size 0;
    client_body_in_file_only clean;
    # this is where requests body are saved
    client_body_temp_path /opt/nginx/bugzilla/data/request_body 1 2;
} 
```

and the client was doing a request with a URL that was about 6000 characters (a bugzilla request).

## debugging...

```
location ~ ^.*\.cgi$ {
    error_log /var/log/nginx/bugzilla.log debug;
    # ...
} 
```

This is what I got in the logs:

```
2015/03/18 10:24:40 [debug] 4625#0: *2 upstream split a header line in FastCGI records
2015/03/18 10:24:40 [error] 4625#0: *2 upstream sent too big header while reading response header from upstream, client: 10.... 
```

## can I have "414 request-uri too large" instead of "502 bad gateway"?

Yes you can! I was reading [How to set the allowed url length for a nginx request (error code: 414, uri too large)](https://stackoverflow.com/questions/1067334/how-to-set-the-allowed-url-length-for-a-nginx-request-error-code-414-uri-too) before because I thought "hey the URL's too long" but I was getting `502`'s rather than `414`'s.

[`large_client_header_buffers`](http://nginx.org/en/docs/http/ngx_http_core_module.html#large_client_header_buffers)

Try #1:

```
# this goes in http or server block... so outside the location block
large_client_header_buffers 4 8k; 
```

This fails, my URL is 6000 characters < 8k. Try #2:

```
large_client_header_buffers 4 4k; 
```

Now I don't see a `502 Bad Gateway` anymore and instead I see a `414 Request-URI Too Large`

## "upstream split a header line in FastCGI records"

Did some research and found somewhere on the internet:

*   [http://forum.nginx.org/read.php?2,4704,4704](http://forum.nginx.org/read.php?2,4704,4704)
*   [https://www.ruby-forum.com/topic/4422529](https://www.ruby-forum.com/topic/4422529)
*   [http://mailman.nginx.org/pipermail/nginx/2009-August/014709.html](http://mailman.nginx.org/pipermail/nginx/2009-August/014709.html)
*   [http://mailman.nginx.org/pipermail/nginx/2009-August/014716.html](http://mailman.nginx.org/pipermail/nginx/2009-August/014716.html)

This was sufficient for me:

```
location ~ ^.*\.cgi$ {
    # holds request bigger than 4k but < 8k
    fastcgi_buffer_size 8k;
    # getconf PAGESIZE is 4k for me...
    fastcgi_buffers 16 4k;
    # ...
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-03-21T11:31:21.067

I encountered this problem in the past (not using codeigniter but it happens whenever the responses contain a lot of header data) and got used to tweaking the buffers as suggested here, but recently I got bitten by this issue again and the buffers were apparently okay.

Turned out it was spdy's fault which I was using on this particular project and solved by enabling spdy headers compression like this:

```
spdy_headers_comp 6; 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2020-09-21T08:24:12.883

```
Problem: upstream sent too big header while reading 
response header from upstream Nginx with Magento 2
```

```
Solution: Replace given below setting into /nginx.conf.sample File
```

*   fastcgi_buffer_size 4k;

with

*   fastcgi_buffer_size 128k;
*   fastcgi_buffers 4 256k;
*   fastcgi_busy_buffers_size 256k;

# windows - Windows上的Github“无法发布此分支”错误

> ID：13894387
> 
> 赞同：46
> 
> 时间：2012-12-15T17:17:05.783
> 
> 标签：windows, git, github, repository

我是git新手，昨天刚下载。作为对我的第一个在线（非本地）存储库的测试，我提交了一个无用的文本文件，然后点击发布。过了一会儿，我得到了这个非常非描述性的错误：

![在此处输入图像描述](../Images/2f411fc42c94cbfa75fc66b19d7c06fe.png)

所以我知道我不能发布到这个分支。只有一个，它是主分支。是否有人对可能导致此错误的原因有任何进一步的信息？

作为旁注，我的合作伙伴已成功将文件上传到同一个 repo，但我没有得到任何迹象表明这已经发生。这是否意味着我没有以某种方式正确连接到回购？我是那个设置它的人！

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-02-27T07:12:21.300

在 Windows 中，右键单击您的`repository`--> 单击`open a shell here`

您将看到一个命令提示符。

输入`git push`它。（在看到 SimonBoudrias 的评论后才知道）

命令提示符将建议您键入其他命令或显示错误。

如果命令提示符建议您输入其他内容，请输入该内容。它会起作用的。
如果命令提示符显示错误，请在此处发布详细错误。

**信息**：你可能想检查这个[应用程序](https://github.com/nvbn/thefuck)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-03-21T16:19:40.073

Open a `shell` in your repository. Then type

```
git push --set-upstream origin master --force 
```

This will upload your local repo to the server no matter what, `overwriting` if necessary. This **should only be done if you're sure nobody else is publishing to your repo** at the moment.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-04-01T05:47:52.203

我遇到了与此处提到的相同的问题，但上面提到的解决方案都没有帮助。然后我找到了这个关于的[答案](https://stackoverflow.com/questions/18356502/github-failed-to-connect-to-github-443-windows-failed-to-connect-to-github#18356572)`Proxy settings`，这正是 GitHub 未能在我的机器上提交的原因。希望这对其他人有帮助

要设置代理设置，您只需要使用以下命令：

> git config --global http.proxy http[s]://userName:password@proxyaddress:port

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-11T12:04:50.027

要修复它，请在 repo 中打开命令提示符。例如，按下 repo 视图右上角的 cog 并选择“在此处打开 shell”。

*   在命令提示符下，键入`git push --set-upstream origin master`

*   要么这行得通，要么它会说`! [rejected] master -> master (fetch first)`

*   如果发生这种情况，请输入`git pull origin master`（如果您愿意，请添加 --rebase）

在 GitHub 中，发布按钮可能仍然可见，而不是同步按钮。如果是这种情况，只需重新启动 GitHub。

这样做是将本地分支的默认远程分支重置为 master。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-02-15T15:39:02.863

也许您只是在提交文件时忘记在描述区域输入一些内容。像我这样的人只会输入summery。所以请确保在提交时填写Summary 和**Description**。

提交时只需在描述文本区域中输入一些内容。然后我发布成功。

我所做的？1 在 Windows 资源管理器中转到存储库的文件夹 2 删除要发布的文件。并重新创建它。3 打开 GitHub For Windows 并单击您的存储库。然后您将在左侧找到未提交的更改。
4 输入您的摘要 5 输入您的描述。（最重要的一步！！！） 6 提交给大师 7 点击发布，您应该会成功。

这是我的第一个答案。所以我没有 10 声望来张贴图片......希望对你有所帮助。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-11-10T18:58:48.310

另一种可能性是**GitHub 服务器暂时不可用**。

我只是遇到了同样的问题，并确认这是服务器问题：[https ://status.github.com/](https://status.github.com/)

示例截图：

![GitHub暂时宕机](../Images/949b0967a3bc063f08e3b2b17653e5d0.png)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-02-12T12:14:18.003

因为我忘记在 GitHub 桌面中添加远程存储库链接，所以我遇到了这个错误。添加正确的回购链接后，一切正常。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-09-18T09:40:13.503

在发布我的 GitHub 页面时，我也遇到了同样的问题。我通过以下方式解决了它。

```
$git push 
```

我在这里收到错误消息。然后我提出了一个拉取请求

```
$git pull 
```

在此之后，我再次推动

```
$git push 
```

在这里我得到了解决方案

注：我用的是GitHub for windows，最后用它发布了页面

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-09-24T12:25:37.437

我收到该错误是因为我没有正确配置我的姓名和电子邮件。在您执行此操作的页面上（至少在本机应用程序中），您会看到该页面打开时已经填写了您的姓名和电子邮件，但这并不意味着它们已保存为设置。为了保存它们，您必须按该屏幕左下角的复选标记。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-02-10T17:27:07.267

尝试在发布之前提交您的更改。它帮助我解决同样的问题。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-01-19T00:55:52.510

我得到这个错误是因为我已经在 github 上创建了一个同名的存储库，然后在本地创建它并尝试提交它。解决方案是从 github 中删除它，然后从本地客户端提交。现在他们同步了。

# netlogo - NetLogo AgentSet 减法

> ID：13894392
> 
> 赞同：1
> 
> 时间：2012-12-15T17:17:42.853
> 
> 标签：netlogo

我收到错误消息：

```
MEMBER? expected input to be a string or list or agentset but got the number 0 instead. 
```

在运行以下 NetLogo 代码期间：

```
to find-flockmates  ;; turtle reporter
  ;; latch on to the nearby birds
  set flockmates-infront other birds in-cone vision cone-infront-degree
  set flockmates-sidewise other birds in-cone vision cone-sidewise-degree

  ;; agentset substraction
  if (count flockmates-infront > 0)[
    set flockmates-sidewise (flockmates-sidewise with [not member? self flockmates-infront])  
    ] 
end 
```

有人可以告诉我我做错了什么或另一个可能的减法两个代理集的解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T23:33:51.363

我现在明白了！很难从您发布的初始代码示例中猜到它，起初我没有意识到这`flockmates-sidewise`是`flockmates-infront`品种变量。

因此，在这一行中：

```
set flockmates-sidewise (flockmates-sidewise with [not member? self flockmates-infront]) 
```

...`flockmates-infront`是指执行`with`块的代理的品种变量，**而不是**运行`find-flockmates`报告器的代理的变量。`0`（如果它还没有被初始化，那很可能是。）你想要的是：

```
set flockmates-sidewise (flockmates-sidewise with [
    not member? self [flockmates-infront] of myself
]) 
```

[`myself`](http://ccl.northwestern.edu/netlogo/docs/dictionary.html#myself)意思是“要求我做我现在正在做的事情的乌龟或补丁”。

我猜您在创建少于 10 只鸟时没有收到错误，因为`if`在这种情况下您根本无法执行该行。

# javascript - Javascript DOM - 将单元格属性设置为图像？

> ID：13894395
> 
> 赞同：0
> 
> 时间：2012-12-15T17:17:57.350
> 
> 标签：javascript, image, attributes, setattribute

我有一个小困境。我正在动态尝试根据 SQL 响应将表格单元格 html 设置为图像。我下面的方法不起作用..

> var data = document.createElement("td");

```
if  (response.getElementsByTagName('status')[i].childNodes[0].nodeValue=='unread') {

    data.setAttribute('id', 'emailunread');
    data.innerHTML="<img src ='/img/unread.png' width='64' height='64'>";
    else {

    data.setAttribute('id', 'emailread'); }
    data = '<img src="img/read.png>'; } 
```

有什么想法我可能做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T20:54:48.553

您需要用右`if`花括号关闭语句块。

```
if (response.getElementsByTagName('status')[i].childNodes[0].nodeValue=='unread') {

    data.setAttribute('id', 'emailunread');
    data.innerHTML="<img src ='/img/unread.png' width='64' height='64'>";
} else {

    data.setAttribute('id', 'emailread');
    data = '<img src="img/read.png>'; 
} 
```

此外，正如 Bergi 所指出的，您正在用`else`子句中的一些 HTML 覆盖包含您的 DOM 元素的变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T20:55:07.977

您忘记使用最后一行中的[`innerHTML`属性](https://developer.mozilla.org/en-US/docs/DOM/element.innerHTML)。而不是用字符串覆盖变量：

```
data = '<img src="img/read.png>'; 
```

你要

```
data.innerHTML = '<img src="img/read.png>'; 
```

此外，您的块似乎没有正确关闭，`}`倒数第二行还有一个额外的。不确定这些是否只是 c&p 错误或您的实际问题。

顺便说一句，您应该将 的值分配`response.getElementsByTagName('status')`给一个变量并对其进行循环（我假设这`i`是一个迭代变量），而不是每次都查询 DOM。

# mysql - 使用 LINQ 构建动态查询

> ID：13894400
> 
> 赞同：0
> 
> 时间：2012-12-15T17:18:46.943
> 
> 标签：mysql, asp.net-mvc, linq, asp.net-mvc-4

我正在将此网站php/mysql[重建为 asp.net。](http://www.lotrlcg.com)我正在页面标题中构建主卡搜索表单。有一个文本输入、多个下拉菜单（都指向不同的列）和一些条件搜索选项。

对于 mysql 版本，我能够使用条件来构建包含查询的字符串，然后执行它。

```
 //MySql/PHP example
 $query = "SELECT * FROM cards WHERE ";

    //Encounter_set 
if (isset($_GET['Encounter_Set']){
    $query.= "Encounter_Set=:Encounter_Set AND ";
    $queryArray['Encounter_Set'] = $_GET['Encounter_Set'];
}

 //radio statements
switch ($_GET['radio']) {
    case "All":     $query.= "(Title LIKE :terms OR Traits LIKE :terms OR Shadow_Text LIKE :terms OR Text LIKE :terms)";break;
    case "Title":   $query.= "(Title LIKE :terms)";break;
    case "Traits":  $query.= "(Traits LIKE :terms)";break;
    case "Text":    $query.= "(Shadow_Text LIKE :terms OR Text LIKE :terms)"; break;
    default:        $query.= "(Title LIKE :terms OR Traits LIKE :terms OR Shadow_Text LIKE :terms OR Text LIKE :terms)";
}

 //Finally
 $result = $db_con->prepare($query); 
```

我将如何在 LINQ 中执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T17:27:13.080

```
using (var context = new MyDbContext())
{
    IQueryable<Card> query = context.Cards;
    if (!string.IsNullOrEmpty(Encounter_Set))
    {
        query = query.Where(c => c.Encounter_Set == Encounter_Set);
    }
    switch (radio)
    {
        default:
        case "All":
            query = query.Where(c => c.Title.Contains(terms)
                || c.Traits.Contains(terms)
                || c.Shadow_Text.Contains(terms)
                || c.Text.Contains(terms));
            break;
        case "Title":
            query = query.Where(c => c.Title.Contains(terms));
            break;
        case "Traits":
            query = query.Where(c => c.Traits.Contains(terms));
            break;
        case "Text":
            query = query.Where(c => c.Shadow_Text.Contains(terms)
                || c.Text.Contains(terms));
            break;
    }
    // ...
    return query.ToList(); // Execute the query
} 
```

# php - 图片点击时将值从“0”更新为“1”？

> ID：13894403
> 
> 赞同：0
> 
> 时间：2012-12-15T17:19:40.750
> 
> 标签：php, mysql

我是 php 和 mysql 的新手，如果我做错了，我很抱歉。我的网站上有一个页面，列出了成员对其他用户的评论。

基本上我已经在我的数据库中批准并删除了，这意味着在用户发送评论后，它必须由用户进行审核，然后才能显示。

一旦用户单击批准的图像，这是一个勾号，它会转到approved_review.php，并且在他们的我有我的sql代码来将我的数据库中的值从0更新为1。

它应该与删除完全相同，但显然它不会更新已批准的列，而是更新已删除。

我尝试过的代码不起作用我已经为此工作了很长时间，但无法弄清楚。

有人可以告诉我哪里出错了吗？

继承人的代码：

```
<?php
    $reviews_set = get_pending_reviews();
    while ($reviews = mysql_fetch_array($reviews_set)) {    
?>
<p>&nbsp;</p>
<div class="pending-review-content">
<?php 
    $date = $reviews['date_added'];
?>
    <div class="prof-content-pend-reviews" id="reviews">
        <div class="message_pic"><?php echo "<a href=\"profile.php?id={$reviews['from_user_id']}\">
        <img width=\"50px\" height=\"50px\" src=\"data/photos/{$reviews['from_user_id']}/_default.jpg\" /></a>";?>
    </div>

    <div class="reviews-date"><? echo "$date"; ?></div>
    <div class="reviews-from">
        <?php echo "<a href=\"profile.php?id={$reviews['from_user_id']}\">{$reviews['display_name']}"; ?>
        </a> Wrote:
    </div>
    <div class="reviews-content">
        <?php echo "{$reviews['content']}"; ?>
    </div>
</div>
<div class="reviews-approve">    
    <a href="includes/approved_review.php"><img src="assets/img/icons/tick.png" width="30" height="25" /></a></div>
    <div class="reviews-delete">
    <a href="includes/delete_review.php"><img src="assets/img/icons/cross.png" width="30" height="25" /></a>
</div>

<? } ?> 
```

approved_review.php 函数：

```
<?
    $sql = "UPDATE  `playtime`.`ptb_reviews` SET  `approved` =  '1' WHERE `ptb_reviews`.`id` =".$_SESSION['user_id']."";

    echo "<div class=\"infobox1\">review approved.</div>";

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T17:58:45.550

一点编辑 rrrfusco 的帖子

```
// or die for details if mysql_query won't work correct
$r = mysql_query($sql) or die (mysql_error()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T17:48:28.297

你的方法似乎合乎逻辑。循环浏览评论后，单击勾选或删除 png 以更新或删除。

所以，在`approved_review.php`

```
<?php 

//you are missing the connection to your mysql database...
$link = mysql_connect("localhost", "mysql_user", "mysql_password");
mysql_select_db("database", $link);

$sql = "UPDATE  `playtime`.`ptb_reviews` SET  `approved` =  '1' WHERE `ptb_reviews`.`id` =".$_SESSION['user_id']."";

//execute the mysql query
$r = mysql_query($sql);

if (!mysql_error())
{
    echo "<div class=\"infobox1\">Review Approved.</div>";
}

?> 
```

# cocos2d-iphone - 在 CCRenderTexture 上打一个洞

> ID：13894407
> 
> 赞同：0
> 
> 时间：2012-12-15T17:20:01.820
> 
> 标签：cocos2d-iphone, ccsprite

我正在尝试使用 Cocos2D 2.0 在 CCRenderTexture 上打一个洞。

更具体地说，我有：

1.  一个 CCSprite “星星”，显示一些重复 png 图像的星星；
2.  最重要的是，我有一个完全覆盖“星星”精灵的 CCRenderTexture “dark”。

我希望能够在“黑暗”上切一个洞，以便显示下面的星星。

我正在使用 CCRenderTexture（如某些教程中所建议的那样），但我设法制作的洞**永远不会完全透明**，因此通过洞可见的星星被部分遮挡。

我真的希望有人能给我带来光明，我花了一个多星期的时间...

这是代码：

```
@interface MyBackgroundLayer : CCLayerGradient {
}
@end

@implementation MyBackgroundLayer
CCRenderTexture * dark;
CCSprite * stars;

-(id) init
{
if (self=[super init]) {
    CGSize size = [[CCDirector sharedDirector] winSize];

    // background
    stars = [CCSprite spriteWithFile:@"stars.png" rect:CGRectMake(0, 0, size.width, size.height)];
    stars.anchorPoint = ccp(0,0);
    ccTexParams params = {GL_LINEAR,GL_LINEAR,GL_REPEAT,GL_REPEAT};
    [stars.texture setTexParameters:&params];
    [self addChild:stars];

    // dark layer to cover the background
    dark = [CCRenderTexture renderTextureWithWidth:size.width height:size.height];
    [dark clear:0 g:0 b:0 a:1.0f];
    [self addChild: dark];
    dark.position = ccp(size.width/2,size.height/2);
    [[dark sprite] setBlendFunc: (ccBlendFunc) { GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA }];
    }

    return self;
}

-(void)draw
{
    [super draw];
    [dark beginWithClear:0 g:0 b:0 a:1];
    glColorMask(0, 0, 0, 1);

    // Here I am using 0.5 as alpha value, this could seems the reason why the hole is not fully transparent.
    // However if I change the alpha value to 1.0f or 0.0f the hole becomes completely opaque
    ccColor4F color = ccc4f(1.f, 1.f, 1.f, 0.5f); 
    ccDrawSolidRect(ccp(0,0), ccp(600, 600), color);

    glColorMask(1,1,1,1);
    [dark end];
}
@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T17:57:06.377

我认为您正在寻找的是这样的东西[（](http://www.supersuraccoon-cocos2d.com/2011/09/09/spot-light-demo/)可能需要一些编辑）。

至于您的代码..我的问题在于混合功能。看看[这个](http://www.andersriggelsen.dk/glblendfunc.php)看看他们是如何工作的。

# validation - Google UI 脚本 validateMatches 不起作用，validateNotMatches 起作用

> ID：13894413
> 
> 赞同：0
> 
> 时间：2012-12-15T17:20:49.910
> 
> 标签：validation, google-apps-script

我正在使用 Google Scripting 设计一个表单。我有两个需要保存时间值的文本框，我想确保输入有效。

```
function setupTimeValidators(widget) {
  var timeRe = /(0[1-9])|(1[0-2]):[0-5][0-9] ?[ap]m/i;

  var onValid = (UiApp.getActiveApplication().createClientHandler()
                 .validateMatches(widget, timeRe)
                 .forTargets(widget)
                 .setStyleAttribute("background", "#FFFFFF"));

  var onInvalid = (UiApp.getActiveApplication().createClientHandler()
                   .validateNotMatches(widget, timeRe)
                   .forTargets(widget)
                   .setStyleAttribute("background", "#FFCCCC"));

  widget.addKeyUpHandler(onValid);
  widget.addKeyUpHandler(onInvalid);
} 
```

`onInvalid`一旦我开始在文本框中输入，这些部件就会更改文本框的背景颜色，但是当我进入`01:11 pm`. （我已经用其他值对此进行了测试。）

我确信我的正则表达式有效，因为我这样测试它：

```
function test() {
  Browser.msgBox(/(0[1-9])|(1[0-2]):[0-5][0-9] ?[ap]m/i.test("01:11 pm")); // true
  Browser.msgBox(/(0[1-9])|(1[0-2]):[0-5][0-9] ?[ap]m/i.test("00:11 pm")); // false
  Browser.msgBox(/(0[1-9])|(1[0-2]):[0-5][0-9] ?[ap]m/i.test("10:11 pm")); // true
  Browser.msgBox(/(0[1-9])|(1[0-2]):[0-5][0-9] ?[ap]m/i.test("10:90 pm")); // false
} 
```

任何想法可能会发生什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T22:56:56.897

您不能将正则表达式对象与 validateMatches 或 validateNotMatches.. 一起使用。您应该使用正则表达式的字符串表示形式，如下所示：

```
var timeRe = "(0[1-9])|(1[0-2]):[0-5][0-9] ?[ap]m";
var flags = "i"; 
```

...

```
.validateMatches(widget, timeRe, flags) 
```

# c++ - C++ 创建对象、初始化列表与赋值？

> ID：13894415
> 
> 赞同：5
> 
> 时间：2012-12-15T17:20:57.307
> 
> 标签：c++, performance

我最近和一个朋友讨论过，他们说在 C++ 中创建对象时使用初始化列表（而不是简单地分配数据成员）可以提高性能。

为什么会这样（如果是真的）？

我找到了这个页面：

[http://www.parashift.com/c++-faq/init-lists.html](http://www.parashift.com/c++-faq/init-lists.html)

他们提到了临时对象，但我认为最近的编译器可以避免这种情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T17:42:23.640

使用赋值时，对象是默认构造的，然后再进行赋值。如果构造和复制一个对象是昂贵的操作，你至少应该摆脱其中一个。初始化列表摆脱了额外的复制操作。复制构造允许同时做这两个。

# haskell - double stream feed to prevent unneeded memoization?

> ID：13894417
> 
> 赞同：11
> 
> 时间：2012-12-15T17:21:11.157
> 
> 标签：haskell, primes, sieve-of-eratosthenes, lazy-sequences, space-leak

I'm new to Haskell and I'm trying to implement Euler's Sieve in stream processing style.

When I checked the [Haskell Wiki page about prime numbers](https://wiki.haskell.org/index.php?title=Prime_numbers&oldid=54949#Linear_merging), I found some mysterious optimization technique for streams. In **3.8 Linear merging** of that wiki:

```
primesLME = 2 : ([3,5..] `minus` joinL [[p*p, p*p+2*p..] | p <- primes']) 
  where
    primes' = 3 : ([5,7..] `minus` joinL [[p*p, p*p+2*p..] | p <- primes'])

joinL ((x:xs):t) = x : union xs (joinL t) 
```

And it says

> “<strong>The double primes feed is introduced here to prevent unneeded memoization and thus prevent memory leak, as per Melissa O'Neill's code.”</p>

How could this be? I can't figure out how it works.

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-15T19:18:23.083

# apache - SVN publish to Apache after commit and merge

> ID：13894419
> 
> 赞同：0
> 
> 时间：2012-12-15T17:21:24.873
> 
> 标签：apache, svn

I'm pretty new to SVN so this might be a simple one, but I guarantee it took me the whole day already. This is the setup:

Apache installed under /www/ and the website is under /www/htdocs/example.com/www/

I have a working SVN server (same machine) and I'd like to publish, either manually or automatically after commit (using hooks), the contents to the destination: /www/htdocs/example.com/www/. The repo is under /svn/www.example.com. I have encountered two problems so far:

1.  If I run "**svn export --force file:///svn/www.example.com /www/htdocs/example.com/www**" than it creates a new dir: /www/htdocs/example.com/www/www.example.com. Can I do an export without the root directory, but only its contents?
2.  The website root dir (/www/htdocs/example.com/www) is already having files uploaded by the users, so exporting from svn should overwrite only the files found in the repo and leave the rest intact (basically a merge).

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T17:44:47.203

您可以创建一个到 www 目录的签出而不是导出。您可以[拒绝访问](https://stackoverflow.com/q/398008/33499)apache 中的 .svn 文件夹。

然后当 SVN 服务器上有提交时，更新您的工作副本并将其设置为丢弃本地冲突更改：

```
svn update --accept theirs-full /www/htdocs/example.com/www 
```

您也可以`svn revert`先执行以放弃所有本地更改。`svn checkout --force`[也应该工作](https://stackoverflow.com/a/312519/33499)。

# javascript - Dynamically Create Droppable Element

> ID：13894420
> 
> 赞同：3
> 
> 时间：2012-12-15T17:21:38.147
> 
> 标签：javascript, jquery, jquery-ui-draggable, jquery-ui-droppable

I'm implementing drag and drop using the jQuery UI [Draggable](http://api.jqueryui.com/draggable/) and [Droppable](http://api.jqueryui.com/droppable/) widgets. (Sortable didn't provide quite enough flexibility for me.)

As I drag, I'm dynamically creating a drop placeholder element to show precisely where a drop would be placed.

But how can I make this drop placeholder droppable itself? If I create it and then immediately call the `droppable()` method on it, this has no effect. And so if they user drops directly over a drop placeholder, how could I detect this?

You can see what I have so far at [http://jsbin.com/uciviy/14](http://jsbin.com/uciviy/14).

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T21:07:44.440

可以动态创建 div 并使其可放置。

您可以通过 JQuery 创建 div，然后使其可放置，或者当拖动事件在可拖动元素上开始时创建可放置 div，并且该元素可以放置在创建的新 div 上。这可能是这样的：

```
$( "<div>Dynamic Droppable Div</div>" ).droppable( dropOptions ).appendTo( "#anotherDiv" ); 
```

[在这里拉小提琴](http://jsfiddle.net/mccannf/28RVN/3/)。

# java - How to serialize and deserialize a RSA KeyPair in Java

> ID：13894425
> 
> 赞同：3
> 
> 时间：2012-12-15T17:22:46.150
> 
> 标签：java, security, serialization, rsa, deserialization

I wanted to implement some VERY basic security in my Java application, but I'm getting stuck at the very beginning.

What I want to do is this: 1-Generate a RSA keypair 2-Store those keys in my DB in serialized form, so I can re-create them on the next run of the application 3-De-serialize them so I can get them back into object form and can use them to encrypt/decrypt stuff.

The problem is, I can't find a straightforward explanation on how to do this anywhere. I tried the standard Java serialization/deserialization methods, but they don't work. My code is as follows:

```
 public static KeyPair Bin2KeyPair(byte[] data){
    try{
        ByteArrayInputStream b = new ByteArrayInputStream(data);
        ObjectInputStream o = new ObjectInputStream(b);
        Object obj =o.readObject();
        return((KeyPair)obj);
    }catch (Exception e) {
        e.printStackTrace();
    }
    return null;
}

public static byte[] KeyPair2Bin(KeyPair kp){

    ByteArrayOutputStream b = new ByteArrayOutputStream();
    ObjectOutputStream o;
    try {
        o = new ObjectOutputStream(b);
        o.writeObject(kp);
        return b.toByteArray();
    } catch (IOException e) {
        e.printStackTrace();
    }   
    return  null;
} 
```

The problem I'm having is that the second method works fine (serializes the key to a byte array) but the first one fails, throwing a ClassCastException, telling me I can't cast the object to "KeyPair".

Any tips on how to do this properly?

EDIT: here's the exception (it gets thrown at "return((KeyPair)obj);" in the first method):

```
java.lang.ClassCastException: [B cannot be cast to java.security.KeyPair
at DARCOServer.security.SecurityManager.String2KeyPair(SecurityManager.java:34)
at DARCOServer.security.SecurityManager.GenerateServerKeys(SecurityManager.java:122)
at DARCOServer.MainClass.main(MainClass.java:13) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T15:36:32.067

这对我有用：

```
@Test
public void serializeTest() throws Exception {

    KeyPairGenerator kpg = KeyPairGenerator.getInstance("RSA");
    KeyPair keyPair = kpg.generateKeyPair();
    ByteArrayOutputStream b = new ByteArrayOutputStream();
    ObjectOutputStream o =  new ObjectOutputStream(b);
    o.writeObject(keyPair);
    byte[] res = b.toByteArray();

    o.close();
    b.close(); 

    ByteArrayInputStream bi = new ByteArrayInputStream(res);
    ObjectInputStream oi = new ObjectInputStream(bi);
    Object obj = oi.readObject();
    assertTrue(obj instanceof KeyPair);

    oi.close();
    bi.close(); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T15:28:55.787

回答自己，以防万一有人遇到同样的问题：

不知道它是什么，但使用 BouncyCastle SPI 而不是默认的 JDK 似乎可以解决我的问题，它现在可以正常工作。

# python - convert django settings.SECRET_KEY to different size

> ID：13894435
> 
> 赞同：0
> 
> 时间：2012-12-15T17:24:19.350
> 
> 标签：python, django

In my django settings.py file there is:

```
SECRET_KEY = '1qpps_5yf@e_++wwicusr*8#lm)^m=rjhgk#&amp;qq1w*p*2d3c4z' 
```

I need some function to convert this string (well it can be any string, lets assume it's not empty) to shorter/longer string. I mean I need key but for example with length=16\. Well If SECRET_KEY is longer than 16 it's easy to just substring it, but if its shorter then I don't want to "pad" missing values with some constatnt char.

So I need function which takes string with length > 0 and generates key with length = 16\. Even more simply: I need key generator which will generate 16 characters string based on some seed (seed = SECRET_KEY)

edit --------------------

found good solution here: [Efficiently generate a 16-character, alphanumeric string](https://stackoverflow.com/questions/2511222/efficiently-generate-a-16-character-alphanumeric-string)

```
import random
random.seed(settings.SECRET_KEY)
key = ''.join(random.choice('1234567890qwertyuiopasdfghjklzxcvbnm,./;@[]!#$%^&*()_+=-') for i in range(16)) 
```

I hope `random.seed(settings.SECRET_KEY)` is not big security whole in django app :P

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T17:27:15.677

您可以散列任何值，并从中获取 16 个字节：

```
>>> import hashlib
>>> hashlib.md5("123").digest()
' ,\xb9b\xacY\x07[\x96K\x07\x15-#Kp' 
```

您还没有说字符串中可以接受哪些字符，这将为您提供任意字节值。

# java - java-如何指定我与源代码一起存储的文件的路径

> ID：13894438
> 
> 赞同：0
> 
> 时间：2012-12-15T17:24:35.553
> 
> 标签：java, file, filepath

我正在尝试获取存储在 /com/package/ 中的名为“policy.local”的文件的路径

我想从名为“com.package.class”的类中指定上述文件的路径。（所以这个类和文件在同一个文件夹中）......如何在类com.package.class的java代码中指定policy.local文件的路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T17:31:13.563

一个简单的方法：如果这个包不包含任何类，则在包“/com/package/”中创建一个空类（没有方法和字段），或者使用它们中的任何一个，如果它们存在的话。然后执行以下操作：

```
ClassName.class.getResource("policy.local").toString() 
```

这将为您提供文件的绝对路径形式，如下所示：

```
file:/C:/sandbox/xxx/com/package/policy.local 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T18:27:20.130

由于您的课程和文件（资源）在同一个包中，您可以通过以下方式获得它：

```
getClass().getResource("policy.local") 
```

如果类和资源不在同一个包中，您将需要使用：

```
getClass().getClassLoader().getResource("com/package/policy.local"); 
```

# android - Android：通过重复报警帮助激活短信

> ID：13894439
> 
> 赞同：-1
> 
> 时间：2012-12-15T17:24:37.377
> 
> 标签：android, sms, android-alarms

![报警项目](../Images/a1cf769b3c7869f24587bc50b51eec01.png)

在这个应用程序中，我在`EditText`

一）3

b) 5554

c) iOS

当您单击“发送警报”时，它将每 1 分钟发送一次短信。现在我取消了警报，我再次启动这个应用程序，插入新值如下：

一）3

b) 12345

c) 安卓

再次启动警报，这次它没有采用新值。相反，它向包含文本“iOS”的“5554”发送短信。我想知道如何更新新值。我有两节课。1) MainActivity 2) 接收者

代码：

```
public class MyyActivity extends Activity {
EditText et, et1, et2;
Button b, b1;
AlarmManager alarmManager;

String no,text,ala; 
PendingIntent pi;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    et = (EditText) findViewById(R.id.editTextEnter);
    et1 = (EditText) findViewById(R.id.editTextNUMBER);
    et2 = (EditText) findViewById(R.id.editTextTEXT);
    b = (Button) findViewById(R.id.buttonSendAlarm);
    b1 = (Button) findViewById(R.id.Cancel);
    b.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

             no = et1.getText().toString();
             text = et2.getText().toString();
             ala = et.getText().toString();

            int foo = Integer.parseInt(ala);
            Intent myIntent = new Intent(MyyActivity.this, MyRecvr.class);
            Bundle bundle = new Bundle();
            bundle.putCharSequence("no", no);
            bundle.putCharSequence("text", text);
            myIntent.putExtras(bundle);
            pi = PendingIntent.getBroadcast(getApplicationContext(), 0,
                    myIntent, 0);

            alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);
            Calendar calendar = Calendar.getInstance();
            calendar.setTimeInMillis(System.currentTimeMillis());
            calendar.add(Calendar.SECOND, foo);

            alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), 1000*60*1,pi);

            Toast.makeText(
                    getApplicationContext(),
                    "Start Alarm with \n" + "smsNumber = " + no + "\n"
                            + "smsText = " + text, Toast.LENGTH_SHORT)
                    .show();
            et.setText("");
            et1.setText("");
            et2.setText("");
        }
    });
    b1.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent intent = new Intent(getApplicationContext(), MyRecvr.class);
            PendingIntent sender = PendingIntent.getBroadcast(getApplicationContext(),
                           0, intent, 0);
            alarmManager = (AlarmManager)getSystemService(ALARM_SERVICE);
            alarmManager.cancel(sender);
            Toast.makeText(MyyActivity.this, "Cancel!", Toast.LENGTH_LONG)
                    .show();
            finish();

        }
    });
} 
```

和接收类：

```
public class MyRecvr extends BroadcastReceiver {
@SuppressWarnings("deprecation")
SmsManager sms;

@SuppressWarnings("deprecation")
@Override
public void onReceive(Context context, Intent intent) {
    // TODO Auto-generated method stub
    Bundle bundle = intent.getExtras();
    String smsNumbr= (String) bundle.getCharSequence("no");
    String smsText = (String) bundle.getCharSequence("text");

    Toast.makeText(context, "MyAlarmService.onStart()", Toast.LENGTH_LONG)
            .show();
    Toast.makeText(
            context,
            "MyAlarmService.onStart() with \n" + "smsNumberToSend = "
                    + smsNumbr + "\n" + "smsTextToSend = "
                    + smsText, Toast.LENGTH_LONG).show();
    sms = SmsManager.getDefault();
    sms.sendTextMessage(smsNumbr, null, smsText, null, null);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T19:03:23.623

[使用`FLAG_UPDATE_CURRENT`](http://developer.android.com/reference/android/app/PendingIntent.html#FLAG_UPDATE_CURRENT)而不是调用`0`的最后一个参数`getBroadcast()`来创建`PendingIntent`.

# c# - Uploading file to Dropbox using Spring.Social Dropbox library

> ID：13894443
> 
> 赞同：0
> 
> 时间：2012-12-15T17:25:28.167
> 
> 标签：c#, dropbox

I am currently working on a c# project and I am trying to implement dropbox within my program. I have successfully managed to authenticate dropbox and create a directory but I can't work out how to upload a file.

The Dropbox access type is AppFolder and I can create a folder within the app folder. To upload the file, just for a test, I am writing something to a text field and submitting the form, I then write the string to a text file, within the working directory of the executable and I am then trying to upload the file into the root of the app folder, but it is throwing an exception `one more errors have occurred` probably the least useful error.

In case it matters below is how I am authenticating Dropbox.

```
private void authenticateDropbox(Boolean isFromCallBack = false)
        {
            try
            {
                if (!isFromCallBack)
                {
                    dropboxServiceProvider = new DropboxServiceProvider(dropboxAppKey, dropboxAppSecret, AccessLevel.AppFolder);
                    //lblStatus.Content = "Getting request Token";

                    oauthToken = dropboxServiceProvider.OAuthOperations.FetchRequestTokenAsync(callbackUrl, null).Result;
                    //lblStatus.Content = "Request token retrieved";

                    parameters = new OAuth1Parameters();
                    parameters.CallbackUrl = callbackUrl;
                    string authenticateUrl = dropboxServiceProvider.OAuthOperations.BuildAuthorizeUrl(oauthToken.Value, parameters);
                    webDropbox.Navigate(new Uri(authenticateUrl));
                }
                else
                {
                    AuthorizedRequestToken requestToken = new AuthorizedRequestToken(oauthToken, null);
                    OAuthToken oauthAccessToken = dropboxServiceProvider.OAuthOperations.ExchangeForAccessTokenAsync(requestToken, null).Result;

                    Properties.Settings.Default.dropbox_accessSecret = oauthAccessToken.Secret;
                    Properties.Settings.Default.dropbox_accessToken = oauthAccessToken.Value;
                    Properties.Settings.Default.Save();

                    IDropbox dropbox = dropboxServiceProvider.GetApi(oauthAccessToken.Value, oauthAccessToken.Secret);

                    DropboxProfile profile = dropbox.GetUserProfileAsync().Result;
                    Close();
                    MessageBox.Show("Welcome " + profile.DisplayName, "DropBox Success", MessageBoxButton.OK, MessageBoxImage.Information);
                }
            }
            catch (AggregateException ex)
            {
                MessageBox.Show("AggregateException: Failed to authenticate\n\n" + ex.Message, "Authentication Error", MessageBoxButton.OK, MessageBoxImage.Error);
            }
            catch (Exception ex)
            {
                MessageBox.Show("General Exception: Failed to authenticate\n\n" + ex.Message, "Authentication Error", MessageBoxButton.OK, MessageBoxImage.Error);
            }
        }

        private void webDropbox_Navigating(object sender, System.Windows.Navigation.NavigatingCancelEventArgs e)
        {
            string url = e.Uri.ToString();
            if (url.StartsWith(callbackUrl, StringComparison.OrdinalIgnoreCase))
            {
                authenticateDropbox(true);
            }
        } 
```

Below is the code on how I am creating the directory, which is working, then upload a file

```
private void uploadContentToDropbox()
        {
            try
            {
                DropboxServiceProvider dropboxServiceProvider = new DropboxServiceProvider(dropboxAppKey, dropboxAppSecret, AccessLevel.AppFolder);
                IDropbox dropbox = dropboxServiceProvider.GetApi(Properties.Settings.Default.dropbox_accessToken, Properties.Settings.Default.dropbox_accessSecret);

                //DeltaPage deltaPage = dropbox.DeltaAsync(null).Result;
                writeContentToFile();

                Entry createFolderEntry = dropbox.CreateFolderAsync("Test Folder").Result;

                Entry uploadFileEntry = dropbox.UploadFileAsync(
                    new AssemblyResource("assembly://DropBoxTest/DropBoxTest/upload.txt"), "upload.txt", true, null, CancellationToken.None).Result;
            }
            catch (AggregateException ex)
            {
                MessageBox.Show("Failed to upload:\n\n" + ex.Message, "Dropbox Error", MessageBoxButton.OK, MessageBoxImage.Error);
            }
            catch (Exception ex)
            {
                MessageBox.Show("General failed to upload:\n\n" + ex.Message, "Dropbox Error", MessageBoxButton.OK, MessageBoxImage.Error);
            }
        } 
```

I'm not sure if the `uploadFileEntry` is the one that I want as I don't see why I need to say new AssemblyResource as its not a resource of the program it is just a text file that is created.

Thanks for any help you can provide.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T03:29:15.937

经过数小时的谷歌搜索后，我设法找到了该怎么做，设法找到了一些运气。

它不需要是程序集资源，因此我像以前一样创建文件，但在上传之前，我执行以下操作：

```
var res = new FileResource("upload.txt"); 
```

然后将上传更改为以下内容：

```
Entry uploadFileEntry = dropbox.UploadFileAsync(
                    res, "upload.txt", true, null, CancellationToken.None).Result; 
```

请注意，我不再使用新的 AssemblyResource。

# c# - Calling events after a specified interval of time

> ID：13894444
> 
> 赞同：2
> 
> 时间：2012-12-15T17:25:44.217
> 
> 标签：c#, multithreading, timer

So here is the breakdown of my program. It is a tool that measures latency to a server on a specified port.

So currently I have a manual check to find the server on a specific port. Then I ping this server every 500 ms and update some GUI elements based on this ping.

I have the pinging done in a background thread and I call thread.sleep(500) after every ping.

Would it be better to use timers for these events?

I want to check for the server every 5 seconds, and ping every 500 ms.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T18:07:51.590

使用 2 个计时器。休眠线程是可怕的性能。当 5 秒定时器执行时，禁用 500 毫秒定时器。执行完成后，启用它。这是最简单和最有效的方法，IMO。

或者，如果这无关紧要，请不要禁用计时器。只要继续前进，你就会没事的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T17:39:29.587

当您使用睡眠时，您的任务需要多长时间并不重要。睡眠 500 毫秒，执行 5 小时的任务，然后再次睡眠。

如果您使用计时器，则必须处理您的任务可能与下一个计时器事件的触发重叠的可能性。这使事情变得更加复杂。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T17:28:34.690

您可以使用任务计划程序 api 并设置一个时间任务，该任务将在接下来的 5 秒后启动应用程序。很好的托管包装器：taskscheduler.codeplex.com

# node.js - nodemailer node-email-templates，没有这样的文件或目录错误

> ID：13894446
> 
> 赞同：2
> 
> 时间：2012-12-15T17:25:56.470
> 
> 标签：node.js, email, npm, email-templates

我想将[email-templates 包](https://github.com/niftylettuce/node-email-templates)与 nodemailer 结合使用，但我收到有关模板文件不存在的错误。我已经尝试过绝对路径和相对路径，但都无济于事。最后我决定尝试让这个例子工作，但仍然没有运气。这是我所做的：

下载并解压[node-email-templates-master 的](https://github.com/niftylettuce/node-email-templates/archive/master.zip)zip 文件，然后：

```
cd node-email-templates-master

npm install

npm install nodemailer@0.3.27

cd examples/nodemailer

node index 
```

我收到与以前相同的错误：

```
fs.js:338
  return binding.open(pathModule._makeLong(path), stringToFlags(flags), mode);
                 ^
Error: ENOENT, no such file or directory '../header/html.ejs'
    at Object.fs.openSync (fs.js:338:18)
    at fs.readFileSync (fs.js:182:15)
    at Object.exports.parse (/mypath/node-email-templates-master/node_modules/ejs/lib/ejs.js:159:19)
    at exports.compile (/mypath/node-email-templates-master/node_modules/ejs/lib/ejs.js:222:15)
    at Object.exports.render (/mypath/node-email-templates-master/node_modules/ejs/lib/ejs.js:273:10)
    at EmailTemplate.render (/mypath/node-email-templates-master/lib/main.js:63:16)
    at Render.batch (/mypath/node-email-templates-master/examples/nodemailer/index.js:118:9)
    at /mypath/node-email-templates-master/examples/nodemailer/index.js:126:16
    at fs.stat.batchCheck (/mypath/node-email-templates-master/lib/main.js:130:18) 
```

我正在运行节点版本 0.8.12

通过以下方式安装软件包：

```
npm install email-templates 
```

并执行示例文件：

```
node node_modules/email-templates/examples/nodemailer/index 
```

给出同样的错误。有没有人可以帮助我启动并运行电子邮件模板？天呐！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T15:36:23.590

Windows 不支持更长的路径，有时这会导致`no such file or directory`错误。将您的项目放在根目录中的某个位置，例如“C:\Project”，然后尝试执行您的程序。

由于长路径层次结构，我过去曾遇到过类似的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T10:17:14.880

这是一个很常见的错误，已经在[ejs#68](https://github.com/visionmedia/ejs/issues/68#issuecomment-9731345)中提到过。[有关更多信息，请参阅ejs#69](https://github.com/visionmedia/ejs/issues/69)中的相关讨论。

一个快速而肮脏的修复方法是将所有必需的代码放在一个文件中。因此，在[模板/时事通讯](https://github.com/niftylettuce/node-email-templates/tree/master/examples/templates/newsletter)中，从主 html.ejs/text.ejs 文件中的页眉/页脚文件中复制内容并删除包含的行`<% include ... %>`

# ios - 适用于 iOS 的 Dropbox SDK - 检测登录取消

> ID：13894448
> 
> 赞同：1
> 
> 时间：2012-12-15T17:26:31.433
> 
> 标签：ios, dropbox

我开始使用适用于 iOS 的 DropBox SDK，我看到检测登录是否成功的代码是这样的：

在 AppDelegate 中：

```
- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url
{
    if ([[DBSession sharedSession] isLinked])
    {
       // Success
    }
    else
    {
        // Failed
    }
    return YES;
} 
```

在失败的情况下，我如何确定原因？我想至少区分错误和取消。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T08:58:50.887

**识别取消**

```
- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url {

    NSArray *components = [[url path] pathComponents];
    NSString *methodName = [components count] > 1 ? [components objectAtIndex:1] : nil;
    if ([methodName isEqual:@"cancel"]) {
        NSLog(@"Dropbox link Cancelled");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-19T00:55:39.277

如果有人遇到此问题并停留在 Bala 的答案上，那是因为该方法`handleOpenURL`已过时。Dropbox`openURL`现在使用。openURL 进入应用程序委托。

```
- (BOOL)application:(UIApplication *)app openURL:(NSURL *)url sourceApplication:(NSString *)source annotation:(id)annotation {
if ([[DBSession sharedSession] handleOpenURL:url]) {
    if ([[DBSession sharedSession] isLinked]) {
        NSLog(@"App linked successfully!");
        // At this point you can start making API calls
        // Send notification to load an initial root dropbox path
        [[NSNotificationCenter defaultCenter] postNotificationName:@"getDropboxRoot" object:self];
    }else{// Add whatever other url handling code your app requires here in this else
        //if the user clicks cancel that will appear here in the methodName variable,
        //we post a notification to wherever we want.
        NSArray* components =  [[url path] pathComponents];
        NSString *methodName = [components count] > 1 ? [components objectAtIndex:1] : nil;
        if ([methodName isEqual:@"cancel"]) {
            NSLog(@"Dropbox link Cancelled");
            [[NSNotificationCenter defaultCenter] postNotificationName:@"dropboxRegistrationCancel" object:self];
        }
    }
    return YES;
}
return NO;} 
```

基本上要检测取消，您只需检查 url 组件中的“取消”一词，如果发现，您只需在任何适用于您的应用程序的地方发送通知，告诉它用户取消了该过程。

通知发布的观察者代码，将其放在您想要检测上面发布的通知的任何位置。

```
 [[NSNotificationCenter defaultCenter] addObserver:self
                                      selector:@selector(dropboxRegistrationCancel)
                                      name:@"dropboxRegistrationCancel"
                                      object:nil];
-(void) dropboxRegistrationCancel{
/*do stuff here that you want to do when the @"dropboxRegistrationCancelled" is triggered*/} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-17T07:38:37.073

我使用了下面对我有用的代码，如果用户取消了保管箱登录或用户登录成功，这两种情况都有帮助

```
- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation{
NSString *stringUrl = [url absoluteString];
if ([stringUrl containsString:@"cancel"]) {

    // Handle if user cancelled the login
    [[NSNotificationCenter defaultCenter] postNotificationName:@"dropboxRegistrationCancel" object:self];

    return NO;

}
if ([[DBSession sharedSession] handleOpenURL:url]) {
    if ([[DBSession sharedSession] isLinked]) {
        // From below notification u can fetch your data from Dropbox
        [[NSNotificationCenter defaultCenter]
         postNotificationName:@"isDropboxLinked"
         object:[NSNumber numberWithBool:[[DBSession sharedSession] isLinked]]];
// Add whatever other url handling code your app requires here

    }
    return YES;
} return NO; 
} 
```

为了在登录后第一次获取文件，将此代码放置在您在**viewDidLoad中显示文件列表的类中**

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(isDropboxLinkedHandle:) name:@"isDropboxLinked" object:nil]; 
```

和 **isDropboxLinkedHandle 的实现：**

```
- (void)isDropboxLinkedHandle:(id)sender {
if ([[sender object] intValue]) {
    // fetch all files 
    [[self restClient] loadMetadata:@"/"];
 }
} 
```

我希望它会有所帮助谢谢。

# java - Java完整的线程池？

> ID：13894453
> 
> 赞同：1
> 
> 时间：2012-12-15T17:27:17.063
> 
> 标签：java

如果我有一个线程池：

```
ExecutorService e = Executors.newFixedThreadPool(noOfThreads); 
```

我开始精确地“noOfThreads”运行。现在如果我想添加另一个线程，我怎么知道我超过了线程池的线程数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T17:55:38.427

即使`Executors.newFixedThreadPool()`返回一个 type 的实例`ExecutorService`，底层实现实际上是`ThreadPoolExecutor`该类的一个实例。您可以按如下方式转换为该类型：

```
ThreadPoolExecutor e = (ThreadPoolExecutor) Executors.newFixedThreadPool(noOfThreads); 
```

然后，您可以检查是否`e.getActiveCount() == e.getMaximumPoolSize()`. 如果该条件为真，那么您就知道您没有任何线程可用。

不过，一般来说，您的应用程序不需要执行这些类型的检查。这些低级线程池操作被抽象出来，因为应用程序中使用的组件`ExecutorService`应该与线程池内部分离。

相反，您应该在设计/开发应用程序时为您的线程池确定适当的设置，这样您的线程就不会在提交队列中停留不合理的时间。

**编辑：**

根据您在评论中提供的其他详细信息，以下是[`ThreadPoolExecutor`文档](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html)中有关如何在构造后修改线程池大小的一些其他信息：

> 最典型的是，核心和最大池大小仅在构造时设置，但它们也可以使用 setCorePoolSize(int) 和 setMaximumPoolSize(int) 动态更改。

如果您需要线程池中的其他自定义行为，您最好手动实例化一个实例`ThreadPoolExecutor`并自己配置它。（`Executors`工厂方法只提供有用的预设配置。）有关`ThreadPoolExecutor`详细信息，请参阅 javadocs。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T18:38:07.533

作为练习，你可以这样做，但我不建议这样做。多线程已经够难了，不用尝试使用线程大小。

检测您是否需要另一个线程的一种简单方法是检查队列大小。

```
 if(!tpe.getQueue().isEmpty()) {
     itn size = tpe.getCorePoolSize()+1;
     tpe.setCorePoolSize(size);
     tpe.setMaximumPoolSize(size);
 } 
```

# java - Java MySQL 数据库备份/恢复

> ID：13894457
> 
> 赞同：1
> 
> 时间：2012-12-15T17:27:58.087
> 
> 标签：java, mysql, database

我知道这个问题已经在网站和网络上多次解决，但我仍然遇到问题。

我在 Windows 7 机器上使用 MySql Server 5.0（尽管我在 xp 上有相关程序的工作副本）和 Netbeans 7.0（和/或需要时的 eclipse）和 1.6 java。

我有一个使用这个字符串的备份例程->

```
String xCommand = 
    "mysqldump -u username -ppassword dbName -r mySqlBackupFile.sql"; 
```

在这段代码中->

```
int pComplete = 1;

try{
   Process rtProcess = Runtime.getRuntime().exec(xCommand);
   pComplete = runtimeProcess.waitFor();
}
catch(Exception e) {
 // (I have my own error reporting here)
} 
```

等等......一切都很好。已成功创建备份。伟大的。我已验证该文件是有效的 sql 导入脚本。

所以现在我需要有一个使用java恢复的例程。我已经尝试*了多种*（+20）解决方案来解决本网站和其他网站上的“恢复 mysql db”问题。我最新的化身是->

```
String xCommand = 
        "mysql -u username -ppassword dbName < mySqlBackupFile.sql"; 
```

他们都没有工作。都有类似的字符串，有些人说使用'source'而不是'<'，有些人在字符串中有各种标志（'-r'），等等。

（我在让导出工作也遇到了类似的问题，最后几乎是偶然地找到了一个确实有效的解决方案。尤里卡。）

所以，这是（最后）我的问题（除了一个有效的恢复字符串）；

为什么这个问题有这么多*可行*的解决方案？在每种情况下，都会有人说“太好了！为我工作！但后来其他人（比如我）对它不起作用。这与实际解决方案无关。也就是说，实际工作的备份/恢复解决方案似乎非常依赖于平台/操作系统/java版本/sql版本等，并且差异很大。

这些信息所在的某个地方是否有一些明确的指南？

由于首先使用 java 的全部目的是，在许多情况下，它独立于平台的性质，因此真正了解在哪些系统和配置上哪些有效，哪些无效是有意义的。

在此先感谢，杰夫

我实际上已经用这个解决方案暂时解决了我自己的问题-> [https://stackoverflow.com/questions/872494/restore-mysql-from-cmd-line-using-java-environment]](https://stackoverflow.com/questions/872494/restore-mysql-from-cmd-line-using-java-environment%5C) ] [1](https://stackoverflow.com/questions/872494/restore-mysql-from-cmd-line-using-java-environment%5C) 但现在我我遇到了一个问题，即 db 备份过程仅在从 netbeans 运行时才有效。不能从独立的 jar 中工作。但是，还原确实可以正常工作。（程序的其余部分也可以正常工作）。

唔...

# html - 关于以对称方式格式化html页面

> ID：13894463
> 
> 赞同：0
> 
> 时间：2012-12-15T17:28:31.303
> 
> 标签：html

我正在开发一个html页面，html代码是......

```
<html>
<head>
<title> aaa</title>
</head>
<body>
<form method="get" action="helloServlet">
<br>Pinpad security Code Genrator.</br>
<br></br>
Store No. <input type="text" name="txtName"><br></br>
Register No.
<input type="Generate" >
<br><input type="submit" value="Generate">
</form>
</body>
</html> 
```

输出是...

[http://imageshack.us/photo/my-images/832/av1xc.jpg/](http://imageshack.us/photo/my-images/832/av1xc.jpg/)

我想要一个对齐应该是和对称应该是前景，请告知如何实现..！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T17:35:59.007

在 CSS 中做**form { margin: 0 auto; }**

```
<html>
<head>
<title> aaa</title>
<style>
   form { margin: 0 auto; } 
</style>
</head>
<body>
<form method="get" action="helloServlet">
<br>Pinpad security Code Genrator.</br>
<br></br>
Store No. <input type="text" name="txtName"><br></br>
Register No.
<input type="Generate" >
<br><input type="submit" value="Generate">
</form>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T17:38:18.450

我不完全确定你的意思，但我猜你想要的是输入字段相互排列。有几种方法可以做到这一点，但最简单的（但不是首选的）是将表单元素放在表格中，如下所示：

```
<form method="get" action="helloServlet">
<table>

<tr>
<td>Pinpad security Code Genrator.</td>
</tr>

<tr>
<td>Store No.</td>
<td><input type="text" name="txtName"></td>
</tr>

<tr>
<td>Register No.</td>
<td><input type="Generate" ></td>
</tr>

<tr>
<td><input type="submit" value="Generate"></td>
</tr>

</form> 
```

更可取的方法是使用 CSS。然后您可以使用位置、左、上、下和右来手动定位元素，或者您可以通过控制周围元素的大小和浮动行为来安排元素浮动到正确的位置。就像是：

```
<!-- In head -->
<style type="text/css">
label
{
    display: inline-block;
    width: 100px;
}
</style>

<!-- In body -->
<form method="get" action="helloServlet">
<div>Pinpad security Code Genrator.</div>

<div>
<label>Store No.</label>
<input type="text" name="txtName">
</div>

<div>
<label>Register No.</label>
<input type="Generate" >
</div>

<div>
<input type="submit" value="Generate">
</div>

</form> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-15T17:32:31.740

这将`form`对齐`center`

```
<html>
<head>
<title> aaa</title>
</head>
<body>
<form method="get" action="helloServlet">
    <br>
    <center>Pinpad security Code Genrator.</center>
<br>
<center>Store No. <input type="text" name="txtName"></center><br>
<center>Register No.<input type="Generate" ></center>
<br>
    <center><input type="submit" value="Generate"></center>
</form>
</body>
</html>​ 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-15T17:34:53.330

您可以使用 HTML 表格标签。

```
<html>
<head>
<title> aaa</title>
</head>
<body>
<form method="get" action="helloServlet">
<br>Pinpad security Code Genrator.</br>
<br></br>

<table>
<tr>
    <td>Store No.</td>
    <td><input type="text" name="txtName"></td>
</tr>
<tr>
    <td>Register No.</td>
    <td><input type="Generate"></td>
</tr>
<tr>
    <td><input type="submit" value="Generate"></td>
</tr>
</table>

</form>
</body>
</html> 
```

# mysql - 生成月行和左连接数据

> ID：13894467
> 
> 赞同：0
> 
> 时间：2012-12-15T17:28:59.697
> 
> 标签：mysql, sql

我的数据库中有这些数据

```
+--------------+------------+
| TRX_DATE     |  AMOUNT    |
+--------------+------------+
| 2012-12-01   |  100.00    |
| 2012-12-07   |  125.00    |
+--------------+------------+ 
```

我需要这些数据左加入**“生成完整的月份行”**这样

```
+--------------+------------+-------------+
|   DATE       |  TRX_DATE  |   AMOUNT    |
+--------------+------------+-------------+
| 2012-12-01   | 2012-12-01 |   100.00    |
| 2012-12-02   |    NULL    |    NULL     |
....
| 2012-12-07   | 2012-12-07 |   125.00    |
....
+--------------+------------+-------------+ 
```

怎么做谢谢。

编辑：更多澄清问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T17:59:10.350

我认为您所需要的只是一个月中两个日期之间的日期，然后您可以使用它进行左连接。

```
DECLARE @startDate DATETIME   
DECLARE @endDate DATETIME

SET @startDate = '2012-12-01'
SET @endDate = '2011-12-31';

WITH dates(Date) AS 
(
    SELECT @startdate as Date
    UNION ALL
    SELECT DATEADD(d,1,[Date])
    FROM dates 
    WHERE DATE < @enddate
)

SELECT Date
FROM dates
LEFT JOIN yourtablename ON yourtablename.trx_date=dates.date 
```

[查看源代码](https://stackoverflow.com/questions/510012/get-a-list-of-dates-between-two-dates)：- 该链接将向您展示一些实现此目的的好技术。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T17:36:19.493

SELECT column_name(s) FROM table_name1 LEFT JOIN table_name2 ON table_name1.trx_date = table_name2.trx_date

您需要加入两个表中的唯一数据。

# php - 具有关联数组意外“=>”的 Smarty 对象函数，预期为以下之一：“”，“”，“）”'

> ID：13894472
> 
> 赞同：1
> 
> 时间：2012-12-15T17:29:32.753
> 
> 标签：php, pdo, smarty

我在 Smarty 将 PDO 对象传递给 Smarty 时遇到问题，它只是不喜欢`=>`. 有没有办法解决这个问题？

这是他的错误：

```
{assign var='brgdatas' value="{$brgObj->fetchOneBrg(array('id'=>{$ststres[ststval].to_id}'))}"}" - Unexpected "=>", expected one of: "","" , ") 
```

这是我正在使用的代码：

```
{section name=ststval loop=$ststres}

{if $ststres[ststval].type == 2}

{assign var='brgdatas' value="{$brgObj->fetchOneBrg(array('id'=>{$ststres[ststval].to_id}'))}"} 
```

正确答案更新：

就是在关联数组之间添加 [] 并像这样删除引号。

```
{assign var='brgdatas' value=$brgObj->fetchOneBrg(['id'=>$ststres[ststval].to_id])} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T17:48:34.630

删除最后一个撇号和属性`{}`内的键`value`

```
value="{$brgObj->fetchOneBrg(array('id'=>{$ststres[ststval].to_id}'))}"
       ^                                 ^                        ^  ^ 
```

# java - Java 用户输入？

> ID：13894474
> 
> 赞同：2
> 
> 时间：2012-12-15T17:30:28.330
> 
> 标签：java

```
 myf = new Finch();
    do
    {
              //menu 4
    if (s.equals("Tap Test")) RunTapTest(s);

            } 

  private static void RunTapTest(String s)
    {
        @SuppressWarnings("resource")
        Scanner reader = new Scanner(System.in);
        System.out.println("Enter the time interval in which you want the Finch to move backwards: ");

        //get user input for tapBack
        int tapBack = reader.nextInt();

        System.out.println("\n"+"Running: "+s+"\n");
        long before = System.currentTimeMillis();
        while(System.currentTimeMillis() - before < testtime)
        {
            System.out.println(myf.isTapped());
            //myf.setWheelVelocities(-255,0,testtime);

        }
                    //I can't set myf.isTapped = true
        if (myf.isTapped()) {
            myf.setWheelVelocities(-255,0,tapBack);
        }

    } 
```

这是作业问题：

> 菜单选项 4 将确定 Finch 的尾巴是否被轻拍。如果是这样，Finch 应该用口语“谢谢”作为回应，并在用户指定的时间间隔内向后移动。

我只是试图修复用户指定的时间间隔（目前），但我在实现它时遇到了麻烦。

如果我尝试这段代码

```
if (myf.isTapped() = true) {
            myf.setWheelVelocities(-255,0,tapBack);
        } 
```

我收到一个错误：

```
if (myf.isTapped() = true) 
```

说

> 赋值的左边必须是变量

如果 myf.isTapped = true，我正在努力让机器人向后移动

也许 myf.isTapped 不能采用布尔值？

我正在使用[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html)进行用户输入（在这种情况下为整数）

另外，我认为 my.isTapped 来自外部 Jar 文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T17:31:59.537

将其更改为

```
if (myf.isTapped() == true) 
```

甚至更好

```
if (myf.isTapped()) 
```

`=`意味着[分配](http://en.wikipedia.org/wiki/Assignment_%28computer_science%29)，`==`意味着[比较](http://en.wikipedia.org/wiki/Comparison_%28computer_programming%29)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T17:34:09.967

尝试改变

```
 if (myf.isTapped() = true) 
```

到

```
 if (myf.isTapped()) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-02-03T13:27:58.857

在所有语言中（至少在 jS、Python、Java 和 C# 中）都`=`意味着赋值。`==`是“等于”运算符。

我来自 Python 背景，所以：

```
test = True
if test == True:
    print("Hello")
else:
    print("Goodbye") 
```

运行此代码的结果将是

`Hello`

# java - 单击按钮链接到另一个页面 (XML)

> ID：13894483
> 
> 赞同：-1
> 
> 时间：2012-12-15T17:31:47.027
> 
> 标签：java, android

我花了几天时间试图弄清楚如何做到这一点，并查看了几个资源，但找不到解决方案！

基本上，我试图获取一个存储在 java 文件的 DummySectionFragment 中的按钮（Button02），以便在单击后打开另一个名为 fragment_sale_eggs 的 xml 页面。

带有包含按钮的片段的主要活动代码：http: [//pastebin.com/SS9b1pG8](http://pastebin.com/SS9b1pG8)

包含按钮的 xml 代码：http: [//pastebin.com/97WZJhPR](http://pastebin.com/97WZJhPR)

任何帮助将不胜感激，我是java和android的新手，所以请在回复中明确。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T18:03:51.793

当按下给定按钮时，让您的 UI 执行片段事务。例如，当Activity加载时，加载第一个fragment，但是当按下按钮时，将fragment变为第二个UI。这使您可以在 UI 中维护结构化的工作流程，而无需任何黑客攻击。

[http://developer.android.com/guide/components/fragments.html#Transactions](http://developer.android.com/guide/components/fragments.html#Transactions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T17:36:38.870

也许最简单的方法（但不推荐）是在单击`setContentView(R.layout. fragment_sale_eggs)`时调用`Button02`。

此外，这里有一个类似 StackOverflow 问题的[链接](https://stackoverflow.com/questions/6811989/android-switching-screens-with-new-activity-or-just-changing-content-view)，答案遵循更推荐的程序。

# javascript - 我有一个很长的字符串，我想将它分成 3 部分并在文本框中显示它们？

> ID：13894487
> 
> 赞同：-1
> 
> 时间：2012-12-15T17:31:59.430
> 
> 标签：javascript

> **可能重复：**
> [如何使用 JavaScript 拆分此字符串？](https://stackoverflow.com/questions/96428/how-do-i-split-this-string-with-javascript)

我的观点是这样的，我有一个字符串，我已经将它存储到一个变量中，就像这样

```
var text1 = "show, text, into input"; 
```

我可以将此变量显示为三个不同的 HTML 输入吗？我的意思是“，”之后的每个单词都应该显示到输入中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T17:36:08.417

```
var split = 'show, text, into input'.split(',');

var first= split[0];
var second = split[1]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T17:36:40.553

```
var parts = text1.split(','),
    nodes = document.querySelectorAll('input[class="txt"]');

for (var i = nodes.length; i--, nodes[i].value = parts[i];);​ 
```

和 HTML：

```
<input type="text" class="txt" />
<input type="text" class="txt" />
<input type="text" class="txt" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T17:36:52.740

尝试这样的事情： -

1）使用 .slice() 获取前两个字符，然后是字符。

2) 使用 document.getElementById() 来获取您的盒子。（确保他们有身份证）

3) 将字符串分配给框的 .value 属性。

# c++ - “未定义的参考”（适用于 linux，但不适用于 windows 上的 cygwin）

> ID：13894489
> 
> 赞同：4
> 
> 时间：2012-12-15T17:32:25.623
> 
> 标签：c++, boost, reference, cygwin, undefined

> **可能重复：**
> [fedora 上的 gcc 链接器错误：未定义的引用](https://stackoverflow.com/questions/12376897/gcc-linker-errors-on-fedora-undefined-reference)

由于我在使用 VC++ 时遇到了问题（gcc 不会发生函数重载，因为我的项目合作伙伴正在 Linux 上编程），所以我在 cygwin 上切换到 gcc，但我也无法让程序在这里运行（他能够毫无问题地编译相同的代码）

我正在尝试编译

```
$ gcc -I D:/Programme/Boost_Library/boost_1_51 ABI_new.cpp -o ABI 
```

之后我得到了大量这样的错误：

```
/tmp/ccO4eSA2.o:ABI_new.cpp:(.text+0xd): undefined reference to ´std::basic_string<char, std::char_traits<char>, std::allocator<char> >::size() const'
    /tmp/ccO4eSA2.o:ABI_new.cpp:(.text+0x60): undefined reference to `std::basic_string<char, std::char_traits<char>, std::allocator<char> >::operator[](unsigned int) const'
    /tmp/ccO4eSA2.o:ABI_new.cpp:(.text+0x9f): undefined reference to `std::basic_string<char, std::char_traits<char>, std::allocator<char> >::operator[](unsigned int) const'
    /tmp/ccO4eSA2.o:ABI_new.cpp:(.text+0xce): undefined reference to `std::basic_string<char, std::char_traits<char>, std::allocator<char> >::operator[](unsigned int) const' 
```

我不确定这是否可能与程序无法读取输入文件明显（由退出状态指示）做任何事情，但我不知道，为什么这也不起作用，因为 - 再次 -我的同事对完全相同的代码没有任何问题。

我真的很感激任何提示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T17:49:18.517

尝试使用`g++`而不是编译`gcc`。后者可能不知道 C++ 标准库，并且未能指示链接器将其链接进去。

# excel - 如何从weka打开excel文件

> ID：13894498
> 
> 赞同：4
> 
> 时间：2012-12-15T17:33:14.217
> 
> 标签：excel, csv, weka

如何从 excel 转换为 csv 以使用 weka“arff 文件”打开？我知道我应该将文件保存在 csv"coma delimited" 中并用 weka 打开 iy >>> 但是当我这样做时我的问题是我看到所有属性都转换为一个具有标称值的属性 >>> 请给我提示

输入数据 ：

```
@relation weather

@attribute outlook {sunny, overcast, rainy}
@attribute temperature real
@attribute humidity real
@attribute windy {TRUE, FALSE}
@attribute play {yes, no}

@data
sunny,85,85,FALSE,no
sunny,80,90,TRUE,no
overcast,83,86,FALSE,yes
rainy,70,96,FALSE,yes
rainy,68,80,FALSE,yes
rainy,65,70,TRUE,no
overcast,64,65,TRUE,yes
sunny,72,95,FALSE,no
sunny,69,70,FALSE,yes
rainy,75,80,FALSE,yes
sunny,75,70,TRUE,yes
overcast,72,90,TRUE,yes
overcast,81,75,FALSE,yes
rainy,71,91,TRUE,no 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T07:03:23.050

将数据从 Excel 导出到 CSV 后，在纯文本编辑器（例如 Notepade++）中打开它，并确保数字数据**没有**任何*引号*。然后将最终的 CSV 导入 Weka，它应该可以工作。

# c# - 用于更新的 IEnumerable 或 DataTable

> ID：13894500
> 
> 赞同：0
> 
> 时间：2012-12-15T17:33:32.343
> 
> 标签：c#, datatable, ienumerable

我知道这可能有些补救措施，但我正在尝试确定是否在浪费资源将 an 转换`IEnumerable`为 DataTable。我有数据，`IEnumerable<T>`但我需要应用业务逻辑。我将在另一个数据中保存`IEnumerable<T>`我将与之进行比较的数据以及其他此类业务操作。在我看来，我应该能够对与 DataTable 相同的强类型可枚举对象做任何事情.....但我对 DataTables 更熟悉，所以对自己不确定。

最后，数据将最终以 a`List<T>`形式出现并由 Web 服务序列化，所以我真的觉得进出数据集是一种浪费？

我认为我可以对`IEnumerable`与 a 相同的对象做任何事情是否正确`DataTable`？如果我要使用 IEnumerables，我应该简单地使用辅助方法来完成“工作”，还是应该加倍努力并创建扩展？

* * *

我的绿色新手正在展示。让我为您提供更多有关数据及其使用方式的信息。这些数据将是发送给订阅者的个人信息。他们可能会进行更改，然后将更新发回。

数据被汇总并发送给他们，但它以标准化（我认为是第 3 级）状态存储。我使用 SP 和 UDF 等汇总数据。该过程有很多连接和游标来评估用户提交的关于他们自己的历史记录，然后确定推荐的操作。用户可以采取或不采取推荐的行动，但无论他们做什么都会被发回并分解回下一次的标准化状态。

我正在进行的辩论（测试环境，所以没有伤害）是用 ORM 替换数据库操作，并通过中间层的工作流执行业务逻辑。这将使我在业务变化中更加活跃和流畅。我的 ORM 获取我的数据，但它采用 IEnumerable 形式，因此我正在为我的工作流寻找最佳数据结构来执行。最后，我没有绑定任何东西，而是创建了一个自定义对象，该对象被序列化并通过 Web 服务发送到客户端。

如果我能提供更多信息，请不要犹豫。我不想变得迟钝。谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T17:44:15.980

`IEnumerable`主要是一个只读的 API。您可以访问所有成员，您可以进一步与他们合作，但您不能添加新成员或删除一些成员。`ReadOnly`是“第二个”名字。

`DataTable`另一方面与 ADO.NET 更相关，对于 DTO 和业务对象来说，它绝对不是一个好的解决方案。它支持添加、删除和删除，但只能在数据层使用。

我建议在您的业务层上使用 Facade 模式，在内部使用 Dao 或 Repository 时包装验证调用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T17:38:27.460

[扩展方法](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.aspx)可用于在 this 上执行任何请求/转换`IEnumerable<T>`。您可能根本不需要 DataTables。可用的 LINQ 扩展方法可以链接/组合在您可以编写的其他自定义扩展方法中。

就更新而言，如果您想通过索引更轻松地访问单个项目，则可以将此 IEnumerable 放入可索引的集合中。但这将取决于您愿意执行的确切操作。

# html - CSS/HTML 表单：IE 和 Opera 中的按钮对齐错误

> ID：13894501
> 
> 赞同：0
> 
> 时间：2012-12-15T17:33:41.817
> 
> 标签：html, css, forms, cross-browser

我目前在我的 HTML 表单中遇到了一个奇怪的对齐问题。在 Firefox/Chrome/Konqueror 中，布局很好 - 见下文

![Firefox 中的布局](../Images/7fd1cb64134869cbcefa82325b366852.png)

但在 IE8 和 Opera 中，布局看起来像这样：

![IE中的布局](../Images/69968f244f7bd6789130bc021cd26340.png)

我的 HTML 看起来像这样

```
<body bgcolor="#FFFFFF" text="#3d4144" id="jobs">
<div align="center">
    <table border="0" cellpadding="0" cellspacing="0">
      <tr>          
    <td style="text-align: center;">Please login to post a job.</td>
      </tr>
      <tr>
    <td>
   <div id="stylized" class="myform">
     <form id="form" name="form" method="post" action="loginproc.php">
      <label>Username:
      <span class="small">Enter your e-mail</span>
      </label>
      <input type="text" name="name" id="name">
      <label>Password:
      <span class="small">Enter your password</span>
      </label>
      <input type="password" name="password" id="password">
      <button type="submit">Login</button>       
     </form>                 
  </div>​
</td>
  </tr>
  <tr>
<td style="text-align: center;">
  <a class="body" href="register.php" style="text-decoration: none">If you are not registred yet, you can signup here (free of charge)!</a>
</td>
  </tr>
  </table> 
```

我的 CSS 看起来像这样

```
#stylized input{
float:left;
font-size:10px;
font: normal Verdana,sans-serif;
padding:5px 2px;
border:solid 1px #2B578A;
width:200px;
margin:2px 0 10px 10px;
-webkit-box-shadow: 0px 0px 8px rgba(0, 0, 0, 0.3);
-moz-box-shadow: 0px 0px 8px rgba(0, 0, 0, 0.3);
box-shadow: 0px 0px 8px rgba(0, 0, 0, 0.3);
}

#stylized input[type="password"]{
float:left;
font-size:10px;
font: normal Verdana,sans-serif;
padding:5px 2px;
border:solid 1px #2B578A;
width:200px;
margin:2px 0 10px 10px;
-webkit-box-shadow: 0px 0px 8px rgba(0, 0, 0, 0.3);
-moz-box-shadow: 0px 0px 8px rgba(0, 0, 0, 0.3);
box-shadow: 0px 0px 8px rgba(0, 0, 0, 0.3);
}

#stylized label {
display:block;
font-weight:bold;
float: left;
width: 10em;
margin-right: 1em;
text-align: right;
width:140px;
}

#stylized .small{
color:#666666;
display:block;
font-size:11px;
font-weight:normal;
text-align:right;
width:140px;
}

.myform{
margin:0 auto;
width:400px;
padding:14px;
}

#stylized button{
clear:both;
margin-left:160px;
width:120px;
height:25px;
text-align:center;
line-height:20px;
color:#FFFFFF;
font-size:11px;
font-weight:bold;
background:#414549;
font-family: Verdana, sans-serif;
border: 0px solid #2B578A;
}

#stylized button:hover{
background:#2B578A;
color:#FFFFFF;
border: 0px solid #2B578A;
} 
```

一旦我将表格放入表格（出于某些设计目的我这样做），问题就开始了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T20:27:24.327

```
<div align="center"> 
```

这就是罪魁祸首。删除它或在提交按钮周围的元素上设置“text-align:left”。

# php - Cronjob 没有运行

> ID：13894503
> 
> 赞同：-1
> 
> 时间：2012-12-15T17:33:59.407
> 
> 标签：php, mysql, database, cron

我有一个 PHP 文件，如果用户的能量小于`max_energy`这样的能量，则可以为用户提供 1 能量：

```
<?php
if ($energy < $max_energy) {
    $sql = "UPDATE users SET energy=(energy + 1) WHERE id='".$id."'";
    $res = mysql_query($sql);
}
?> 
```

这是我服务器上运行 cronjob 的命令行：

```
/home/sites/psychowars.com/public_html/psychowars/cronjobs/energy.php 
```

好吧，当我手动转到链接*psychowars.com/psychowars/cronjobs/energy.php*时，它会给我 1 能量，因为我的能量小于`$max_energy`，但实际的 cronjob 应该每 2 分钟给用户 1 能量，但它是什么都不做。他们有什么理由吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T17:39:46.470

cronjob 只能执行可执行文件。因此，您必须使用`php`可执行文件运行脚本。像这样的东西可能在你的 crontab 中起作用：

```
/usr/bin/php -q /home/sites/psychowars.com/public_html/psychowars/cronjobs/energy.php 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T17:59:24.600

在我的 Cronjobs 随机停止运行之前，我遇到过这个问题；

只需运行以下命令：

`/etc/init.d/cron restart`

当我运行此命令时，我的 cronjobs 再次开始运行

你应该运行你的 cron `/etc/crontab`

和我的 cronjobs 的示例行（每天每分钟运行）

`* * * * * root /usr/bin/php /var/www/cron.php` 代表`*`时间

`root`- 代表用户

`/usr/bin/php`是我从中运行我的 PHP 的目录

`/var/www/cron.php`- 是在 PHP-CLI 中执行的 php 文件吗

另一件事，确保您已`php5-cli`安装以确保 PHP 可以从 PHP 命令行运行。

# java - java telnet 套接字：BufferedReader / BufferedWriter

> ID：13894509
> 
> 赞同：5
> 
> 时间：2012-12-15T17:34:35.810
> 
> 标签：java, jakarta-ee, bufferedreader

我的服务器在 23999 上打开了一个 telnet 端口，当我给出时`telnet localhost 23999`，它显示如下：

```
< BP-SAS ==> bplin19 !>telnet 0 23999
Trying 0.0.0.0...
Connected to 0.
Escape character is '^]'.
Please enter password to authenticate:
(here i give password for example abc123)   
Enter 'help' at any point to get a listing of all registered commands...
BAS> log set-info 1 ( commad i have entered and it does somthing ) 
```

现在，我必须编写执行此操作的 java 代码，而不是像这样打开。

1.  连接主机 23999 端口
2.  输入密码
3.  输入逗号

```
Socket soc=new Socket("192.168.9.7",23999);
  while(true){
  //create buffered writer
  BufferedReader bwin = new BufferedReader(new InputStreamReader(soc.getInputStream()));
  BufferedWriter bw = new BufferedWriter(new OutputStreamWriter(soc.getOutputStream()));
  BufferedWriter bw1 = new BufferedWriter(new OutputStreamWriter(soc.getOutputStream()));
  String readFir = bwin.readLine();
  System.out.println(readFir);
        if(readFir.startsWith("Please")){
            System.out.println("Password Entered");
            bw.write("abc123");
            bw.flush();
            bw.close();  //close buffered Reader 
        }

        readFir = bwin.readLine();
        if(readFir.startsWith("Enter")){
            System.out.println("Enter command");
            bw1.write("log set-info 1");
            bw1.flush();
            bw1.close();  //close buffered Reader 
        }
        //readFir = bwin.readLine();
    } 
```

这不起作用。实际上，我有点困惑我应该遵循什么方法。读者/作者之间非常困惑。

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T18:07:55.713

只需要获取一次套接字输入流和输出流（在 while 循环之外执行此操作）。尝试这样的事情：

```
Socket soc = new Socket("192.168.9.7",23999);
//create buffered writer
BufferedReader bwin = new BufferedReader(new InputStreamReader(soc.getInputStream()));
BufferedWriter bw = new BufferedWriter(new OutputStreamWriter(soc.getOutputStream()));
while (true) {
        String readFir = bwin.readLine();
        if (readFir == nul) break;
        System.out.println(readFir);
        if(readFir.startsWith("Please")){
            System.out.println("Password Entered");
            bw.write("abc123");
            bw.newLine();
            // instead might have to explicitly write "\r\n"
            // depending platform you're connecting from.
            bw.flush();
        }
        else if(readFir.startsWith("Enter")){
            System.out.println("Enter command");
            bw.write("log set-info 1");
            bw.newLine();
            bw.flush();
            bw.close();  //close buffered Writer
            break;
        } else System.out.println("Skip: " + readFir);
  } 
```

要访问 Telnet 协议，最好使用[Apache Commons Net](http://commons.apache.org/net/)之类的库，而不是自己动手。

# class - Mootools 添加带变量的类

> ID：13894512
> 
> 赞同：0
> 
> 时间：2012-12-15T17:35:03.390
> 
> 标签：class, variables, mootools, add

这个可以用吗。

```
$('myElement').addClass('newClass'); 
```

并为每个元素添加如何获得一个新类的数字。像这样

```
myElement 1 = newClass_1
myElement 2 = newClass_2
myElement 3 = newClass_3 
```

所有 myElement 都具有相同的类。（对不起，写了 ID，但意思是类；））

最好的问候马蒂亚斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T11:45:48.113

所以我找到了一个更短的解决方案：

```
window.addEvent("domready", function(){
    $$(".submenu").each(function(item, i){
        var number = i;
        item.addClass("item" + number);
        console.log(item);
    });
}); 
```

作品完美:)

最好的问候马蒂亚斯

# javascript - Google-diff-match 避免显示新行？

> ID：13894514
> 
> 赞同：8
> 
> 时间：2012-12-15T17:35:16.483
> 
> 标签：javascript, diff

我正在使用差异匹配[http://neil.fraser.name/software/diff_match_patch/svn/trunk/demos/demo_diff.html](http://neil.fraser.name/software/diff_match_patch/svn/trunk/demos/demo_diff.html)

显示 2 段 html 之间的差异。问题是脚本将新行显示为`¶`

有没有办法设置不显示？

现在我只是删除了所有的`\n`and `\r`，但这听起来不太好

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-15T17:59:06.330

正如您在文档中看到的，漂亮的 html 函数只是开发一些很酷的 ui 的示例。但是，如果您在函数中将 ¶ (& para;) 替换为 null，该符号将消失。

```
 diff_match_patch.prototype.diff_prettyHtml = function(diffs) {
    var html = [];
    var pattern_amp = /&/g;
    var pattern_lt = /</g;
    var pattern_gt = />/g;
    var pattern_para = /\n/g;
    for (var x = 0; x < diffs.length; x++) {
      var op = diffs[x][0];    // Operation (insert, delete, equal)
      var data = diffs[x][1];  // Text of change.
      //var text = data.replace(pattern_amp, '&amp;').replace(pattern_lt, '&lt;')
      //    .replace(pattern_gt, '&gt;').replace(pattern_para, '&para;<br>');
      var text = data.replace(pattern_amp, '&amp;').replace(pattern_lt, '&lt;')
          .replace(pattern_gt, '&gt;').replace(pattern_para, '<br>');
      switch (op) {
        case DIFF_INSERT:
          html[x] = '<ins style="background:#e6ffe6;">' + text + '</ins>';
          break;
        case DIFF_DELETE:
          html[x] = '<del style="background:#ffe6e6;">' + text + '</del>';
          break;
        case DIFF_EQUAL:
          html[x] = '<span>' + text + '</span>';
          break;
      }
    }
    return html.join('');
  }; 
```

要对此进行测试，只需转到您在 Chrome 中提供的链接，然后在控制台复制粘贴上述功能，然后点击计算差异按钮。

# ios - 平滑地为 UISlider 设置动画

> ID：13894516
> 
> 赞同：8
> 
> 时间：2012-12-15T17:35:23.207
> 
> 标签：ios, animation, user-interface, uislider

我想为例如 0.25 到 0.75 并返回的 UISlider 设置动画。这应该向用户展示要做什么。

我试过这个：

```
[self incrementCounter:[NSNumber numberWithInt:0]];

-(void) incrementCounter:(NSNumber *)i {
    [Slider setValue:[i floatValue]/1000];
    [self performSelector:@selector(incrementCounter:) withObject:[NSNumber numberWithInt:i.intValue+1] afterDelay:0.001];
} 
```

但这不是那么顺利...我可以为此使用过渡吗？

```
[Slider setValue:1 animated:YES]; 
```

是快...

```
[UIView animateWithDuration:2.0
                 animations:^{
                     [Slider setValue:0.2];
                 }];
[UIView animateWithDuration:2.0
                 animations:^{
                     [Slider setValue:0.5];
                 }]; 
```

只是动画第二个...

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-15T17:51:23.733

您需要通过将第二个动画放在第一个动画的完成块中来链接动画：

```
-(IBAction)animateSlider:(id)sender {

    [UIView animateWithDuration:2 animations:^{
        [self.slider setValue:.75];
    } completion:^(BOOL finished) {
        [UIView animateWithDuration:2 animations:^{
            [self.slider setValue:0.25];//or `[self.slider setValue:(.75)-(.5*finished)];` if you want to be safe
        }];
    }];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-26T13:35:00.230

**用于 rdelmar 的**Swift 2.2 版本****

 **```
@IBOutlet weak var slider: UISlider!

func animateSlider(sender: AnyObject){
    UIView.animateWithDuration(2, animations:  {() in
        self.slider.setValue(0.75, animated: true)
        }, completion:{(Bool)  in
            UIView.animateWithDuration(2, animations: {() in
                self.slider.setValue(0.25, animated: true)
            })
    })
} 
```

并调用函数在参数中传递 UISlider

```
animateSlider(self.slider) 
```**

# wampserver - 所有 vhost 都指向第一个 vhost 语句的 WAMP vhost 问题

> ID：13894527
> 
> 赞同：0
> 
> 时间：2012-12-15T17:36:20.760
> 
> 标签：wampserver

我正在尝试在 WAMPSERVER 中设置虚拟主机，但遇到了一个问题，即所有站点都指向第一个虚拟主机并且没有正确委派。有人遇到过这个问题吗？

这是我的设置。

在 windows 主机文件中：

```
127.0.0.1 siteabc.local
127.0.0.1 sitexyz.local 
```

在 httpd-vhosts.conf 中：

```
<VirtualHost 127.0.0.1>
    DocumentRoot "C:\Users\Rick\Documents\Projects\siteabc"
    ServerName siteabc.local
    ErrorLog "logs/siteabc-error.log"
    CustomLog "logs/siteabc-access.log" common
    <Directory "C:\Users\Rick\Documents\Projects\siteabc">
        Options Indexes FollowSymLinks
        AllowOverride all
        Order Deny,Allow
        Allow from all
    </Directory>
</VirtualHost>

<VirtualHost 127.0.0.1>
    DocumentRoot "C:\Users\Rick\Documents\Projects\sitexyz"
    ServerName sitexyz.local
    ErrorLog "logs/sitexyz-error.log"
    CustomLog "logs/sitexyz-access.log" common
    <Directory "C:\Users\Rick\Documents\Projects\sitexyz">
        Options Indexes FollowSymLinks
        AllowOverride all
        Order Deny,Allow
        Allow from all
    </Directory>
</VirtualHost>

<VirtualHost 127.0.0.1>
    DocumentRoot "C:\Users\Rick\Documents\Projects"
    ServerName localhost
    ErrorLog "logs/localhost-error.log"
    CustomLog "logs/localhost-access.log" common
    <Directory "C:\Users\Rick\Documents\Projects">
        Options Indexes FollowSymLinks
        AllowOverride all
        Order Deny,Allow
        Allow from all
    </Directory>
</VirtualHost> 
```

好的，所以从这个设置到 siteabc 工作......但是去 sitexyz，它仍然去 siteabc。不知道我在这里做错了什么。

感谢您的关注。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T21:31:45.330

好的，事实证明我需要为 www 添加另一组。因此，一组没有 WWW 的 ov 虚拟主机和一组带有...

# sql - 在查询中使用 VARCHAR 列的大小是否重要

> ID：13894528
> 
> 赞同：7
> 
> 时间：2012-12-15T17:36:27.443
> 
> 标签：sql, sql-server, performance, sql-server-2000, query-optimization

> **可能重复：**
> [varchar(500) 是否比 varchar(8000) 有优势？](https://stackoverflow.com/questions/2009694/is-there-an-advantage-to-varchar500-over-varchar8000)

我了解包含 10 个字符的列与包含相同数据`VARCHAR(200)`的列占用相同的空间。`VARCHAR(20)`

我想知道将`VARCHAR(200)`特定表的十几个列更改为`VARCHAR(20)`是否会使查询运行得更快，尤其是在以下情况下：

*   这些列永远不会包含超过 20 个字符
*   这些列经常在`ORDER BY`子句中使用
*   这些列经常在`WHERE`子句 中使用
    *   其中一些列已编入索引，以便它们可以在`WHERE`子句中使用

PS：我使用的是 SQL Server 2000，但很快就会升级到更高版本的 SQL。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-15T20:44:48.767

是的，varchar 的长度会影响查询的估计、将为内部操作（例如排序）分配的内存以及 CPU 资源。您可以使用以下简单示例重现它。

1.创建两个表：

```
create table varLenTest1
(
    a varchar(100)
)

create table varLenTest2
(
    a varchar(8000)
) 
```

2\. 用一些数据填充它们：

```
declare @i int
set @i = 20000

while (@i > 0)
begin 
    insert into varLenTest1 (a) values (cast(NEWID() as varchar(36)))
    set @i = @i - 1
end 
```

3\. 使用“包括实际执行计划”执行以下查询：

```
select a from varLenTest1 order by a OPTION (MAXDOP 1) ;
select a from varLenTest2 order by a OPTION (MAXDOP 1) ; 
```

如果您检查这些查询的执行计划，您会发现估计的 IO 成本和估计的 CPU 成本有很大不同： ![在此处输入图像描述](../Images/b508ad9b79af1f72b2f03feb3194962b.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T17:45:39.570

这是一篇博客文章，解释了在什么情况下以及为什么在使用不同的列大小时会出现性能差异（带有测试和技术细节）：

[高级 TSQL 调优：为什么内部知识很重要](http://sqlblog.com/blogs/paul_white/archive/2011/02/23/Advanced-TSQL-Tuning-Why-Internals-Knowledge-Matters.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-15T18:11:25.673

当查询优化器评估最佳查询路径以执行查询时，它确实很重要。当有多个路径可用时，它会根据您的查询计算 I/O 成本和其他各种参数，并从中选择在他看来成本最低的一个。

这不是一个绝对的计算，它只是一个近似过程。因此，如果从内存中的一个表中操作记录所需的表观平均大小比真正需要的要大得多，并且优化器可能会根据它认为必要的情况选择性能较差的路径，那么它很容易被抛弃对于其他路径。

拥有一个实际的最大尺寸对于任何其他将要查看您的代码的程序员也很有用。如果我有一个想要在 GUI 中显示的变量，我可能会分配比需要更多的空间，如果我看到它由 nvarchar(200) 或 nvarchar(2000) 之类的东西支持，而不是 nvarchar(20) 如果它的大小是从来没有比这更大。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-15T17:46:44.410

> **大小事项**
> 
> 始终使用可容纳最大可能值的最小数据大小。如果一列要存储 1 到 5 之间的值，请使用 tinyint 而不是 int。
> 
> 此规则也适用于字符列。数据大小越小，读取的内容就越少，因此总体而言，性能会受益。此外，较小的尺寸减少了网络流量。使用更新的技术，这个技巧似乎不太相关，但不要忽视它。您不会后悔从一开始就保持高效。

欲了解更多信息，请访问[http://www.techrepublic.com/blog/10-things/10-plus-tips-for-getting-the-best-performance-out-of-your-sql-server-data-types/](http://www.techrepublic.com/blog/10-things/10-plus-tips-for-getting-the-best-performance-out-of-your-sql-server-data-types/)

# ruby-on-rails - 谁能告诉我为什么我的测试无法运行？

> ID：13894534
> 
> 赞同：1
> 
> 时间：2012-12-15T17:36:43.643
> 
> 标签：ruby-on-rails, ruby-on-rails-3, railstutorial.org

我在 Rails 教程第 9 章的最后，这一章让我大吃一惊。我只是为了让这些测试运行（并通过），然后我可以继续第 10 章。任何帮助将不胜感激。

```
rails_projects/sample_app/spec/requests/authentication_pages_spec.rb:155: syntax error, unexpected $end, expecting keyword_end (SyntaxError) 
```

是我在尝试运行测试时得到的，我知道这意味着我在某处错过了一个结尾，但是当我在结尾添加一个结尾时，它要求另一个，然后是另一个，然后它说我错过了一个结尾user_pages.spec 然后我在那里添加修复并得到大约 19 个错误。无论如何，这是我的代码。

authentication_pages_spec.rb：

```
require 'spec_helper'

describe "Authentication" do

  subject { page }

  describe "signin page" do
    before { visit signin_path }

    it { should have_selector('h1',    text: 'Sign in') }
    it { should have_selector('title', text: 'Sign in') }
  end

 describe "signin" do
  before { visit signin_path }

  describe "with invalid information" do
    before { click_button "Sign in" }

  it { should have_selector('title', text: 'Sign in') }
  it { should have_selector('div.alert.alert-error', text: 'Invalid') }

  describe "after visiting another page" do
    before { click_link "Home" }
    it { should_not have_selector('div.alert.alert-error') }
  end
end

describe "with valid information" do
  let(:user) { FactoryGirl.create(:user) }
  before do
    fill_in "Email", with: user.email
    fill_in "Password", with: user.password
    click_button "Sign in"
  end

  describe "with valid information" do
  let(:user) { FactoryGirl.create(:user) }
  before { sign_in user }

  it { should have_selector('title', text: user.name) }

  it { should have_link('Users',    href: users_path) }
  it { should have_link('Profile',  href: user_path(user)) }
  it { should have_link('Settings', href: edit_user_path(user)) }
  it { should have_link('Sign out', href: signout_path) }

  it { should_not have_link('Sign in', href: signin_path) }

  describe "followed by signout" do
    before { click_link "Sign out" }
    it { should have_link('Sign in') }
    end
   end
  end

describe "authorization" do

 describe "for non-signed-in users" do
  let(:user) { FactoryGirl.create(:user) }

  describe "when attempting to visit a protected page" do
    before do
      visit edit_user_path(user)
      fill_in "Email", with: user.email
      fill_in "Password", with: user.password
      click_button "Sign in"
    end

    describe "after signing in" do

      it "should render the desired protected page" do
        page.should have_selector('title', text: 'Edit user')
      end

      describe "when signing in again" do
        before do
          delete signout_path
          visit signin_path
          fill_in "Email", with: user.email
          fill_in "Password", with: user.password
          click_button "Sign in"
        end

        it "should render the default (profile) page" do
          page.should have_selector('title', text: user.name)
        end
      end
     end
   end

 describe "in the Users controller" do

 describe "visiting the edit page" do
  before { visit edit_user_path(user) }
  it { should have_selector('title', text: 'Sign in') }
end

describe "submitting to the update action" do
  before { put user_path(user) }
  specify { response.should redirect_to(signin_path) }
end

describe "visiting the user index" do
  before { visit users_path }
  it { should have_selector('title', text: 'Sign in') }
  end

 end

describe "as wrong user" do
  let(:user) { FactoryGirl.create(:user) }
  let(:wrong_user) { FactoryGirl.create(:user, email: "wrong@example.com") }
  before { sign_in user }

  describe "visiting Users#edit page" do
    before { visit edit_user_path(wrong_user) }
    it { should_not have_selector('title', text: full_title('Edit user')) }
  end

  describe "submitting a PUT request to the Users#update action" do
    before { put user_path(wrong_user) }
    specify { response.should redirect_to(root_path) }
  end
 end

describe "as non-admin user" do
  let(:user) { FactoryGirl.create(:user) }
  let(:non_admin) { FactoryGirl.create(:user) }

  before { sign_in non_admin }

  describe "submitting a DELETE request to the Users#destroy action" do
    before { delete user_path(user) }
    specify { response.should redirect_to(root_path) }        
    end
    end
  end

  end 
```

这是我的 user_pages_spec.rb：

```
 require 'spec_helper'

describe "User pages" do

subject { page }

describe "index" do

 let(:user) { FactoryGirl.create(:user) }

 before(:each) do
  sign_in user
  visit users_path
 end

it { should have_selector('title', text: 'All users') }
it { should have_selector('h1',    text: 'All users') }

describe "pagination" do

  before(:all) { 30.times { FactoryGirl.create(:user) } }
  after(:all)  { User.delete_all }

  it { should have_selector('div.pagination') }

  it "should list each user" do
    User.paginate(page: 1).each do |user|
      page.should have_selector('li', text: user.name)
    end
   end
  end
 end

describe "delete links" do

  it { should_not have_link('delete') }

  describe "as an admin user" do
    let(:admin) { FactoryGirl.create(:admin) }
    before do
      sign_in admin
      visit users_path
    end

    it { should have_link('delete', href: user_path(User.first)) }
    it "should be able to delete another user" do
      expect { click_link('delete') }.to change(User, :count).by(-1)
    end
    it { should_not have_link('delete', href: user_path(admin)) }
    end
  end
end

describe "profile page" do
let(:user) { FactoryGirl.create(:user) }
before { visit user_path(user) }

it { should have_selector('h1', text: user.name) }
it { should have_selector('title', text: user.name) }
end

describe "signup page" do
before { visit signup_path }

it { should have_selector('h1', text: 'Sign up') }
it { should have_selector('title', text: full_title('Sign up')) }
end

describe "signup" do

before { visit signup_path }

describe "with invalid information" do
  it "should not create a user" do
     expect { click_button "Create my account" }.not_to change(User, :count)
  end

describe "error messages" do
before { click_button "Create my account" }

 it { should have_selector('title', text: 'Sign up') }
 it { should have_content('error') }
 end
end

describe "with valid information" do
before do
  fill_in "Name", with: "Example User"
  fill_in "Email", with: "user@example.com"
  fill_in "Password", with: "foobar"
  fill_in "Confirmation", with: "foobar"
 end

it "should create a user" do
expect do
  click_button "Create my account"
 end.to change(User, :count).by(1)
end

describe "after saving the user" do
 before { click_button "Create my account" }
 let(:user) { User.find_by_email('user@example.com') }

 it { should have_selector('title', text: user.name) }
 it { should have_selector('div.alert.alert-success', text: 'Welcome') }
 it { should have_link('Sign out') }
  end
 end
end

describe "signup page" do
before { visit signup_path }

 it { should have_selector('h1', text: 'Sign up') }
 it { should have_selector('title', text: full_title('Sign up')) }
end

describe "signup" do

before { visit signup_path }

let(:submit) { "Create my account" }

describe "with invalid information" do
  it "should not create a user" do
    expect { click_button submit }.not_to change(User, :count)
  end
 end

 describe "with valid information" do
  before do
   fill_in "Name", with: "Example User"
   fill_in "Email", with: "user@example.com"
   fill_in "Password", with: "foobar"
   fill_in "Confirmation", with: "foobar"
 end

it "should create a user" do
 expect { click_button submit }.to change(User, :count).by(1)
end
describe "edit" do
 let(:user) { FactoryGirl.create(:user) }
 before do
  sign_in user
  visit edit_user_path(user)
 end

 describe "page" do
  it { should have_selector('h1', text: "Update your profile") }
  it { should have_selector('title', text: "Edit user") }
  it { should have_link('change', href: 'http://gravatar.com/emails') }
 end

describe "with invalid information" do
  before { click_button "Save changes" }

  it { should have_content('error') }
  end

 describe "with valid information" do
  let(:new_name)  { "New Name" }
  let(:new_email) { "new@example.com" }
  before do
    fill_in "Name",             with: new_name
    fill_in "Email",            with: new_email
    fill_in "Password",         with: user.password
    fill_in "Confirm Password", with: user.password
    click_button "Save changes"
  end

  it { should have_selector('title', text: new_name) }
  it { should have_selector('div.alert.alert-success') }
  it { should have_link('Sign out', href: signout_path) }
  specify { user.reload.name.should  == new_name }
  specify { user.reload.email.should == new_email }
  end
 end
 end
 end
 end 
```

这是我的错误：

```
 Failures:

 1) User pages delete links as an admin user should be able to delete another user
    Failure/Error: expect { click_link('delete') }.to change(User, :count).by(-1)
    Capybara::ElementNotFound:
      no link with title, id or text 'delete' found
    # (eval):2:in `click_link'
    # ./spec/requests/user_pages_spec.rb:47:in `block (5 levels) in <top (required)>'
    # ./spec/requests/user_pages_spec.rb:47:in `block (4 levels) in <top (required)>'

  2) User pages delete links as an admin user 
     Failure/Error: it { should have_link('delete', href: user_path(User.first)) }
      expected link "delete" to return something
   # ./spec/requests/user_pages_spec.rb:45:in `block (4 levels) in <top (required)>'

 3) signup page 
   Failure/Error: it { should have_selector('h1', text: 'Sign up') }
   expected css "h1" with text "Sign up" to return something
   # ./spec/requests/user_pages_spec.rb:65:in `block (2 levels) in <top (required)>'

 4) signup page 
   Failure/Error: it { should have_selector('title', text: full_title('Sign up')) }
    expected css "title" with text "Ruby on Rails Tutorial Sample App | Sign up" to return  something
  # ./spec/requests/user_pages_spec.rb:66:in `block (2 levels) in <top (required)>'

5) profile page 
   Failure/Error: it { should have_selector('h1', text: user.name) }
     expected css "h1" with text "Person 38" to return something
  # ./spec/requests/user_pages_spec.rb:58:in `block (2 levels) in <top (required)>'

6) profile page 
 Failure/Error: it { should have_selector('title', text: user.name) }
   expected css "title" with text "Person 39" to return something
 # ./spec/requests/user_pages_spec.rb:59:in `block (2 levels) in <top (required)>'

7) signup page 
 Failure/Error: it { should have_selector('h1', text: 'Sign up') }
   expected css "h1" with text "Sign up" to return something
 # ./spec/requests/user_pages_spec.rb:114:in `block (2 levels) in <top (required)>'

8) signup page 
 Failure/Error: it { should have_selector('title', text: full_title('Sign up')) }
   expected css "title" with text "Ruby on Rails Tutorial Sample App | Sign up" to return something
 # ./spec/requests/user_pages_spec.rb:115:in `block (2 levels) in <top (required)>'

9) signup with valid information edit with valid information 
 Failure/Error: it { should have_selector('title', text: new_name) }
   expected css "title" with text "New Name" to return something
 # ./spec/requests/user_pages_spec.rb:171:in `block (5 levels) in <top (required)>'

10) signup with valid information edit with valid information 
 Failure/Error: it { should have_link('Sign out', href: signout_path) }
   expected link "Sign out" to return something
 # ./spec/requests/user_pages_spec.rb:173:in `block (5 levels) in <top (required)>'

11) signup with valid information edit with valid information 
 Failure/Error: it { should have_selector('div.alert.alert-success') }
   expected css "div.alert.alert-success" to return something
 # ./spec/requests/user_pages_spec.rb:172:in `block (5 levels) in <top (required)>'

12) signup with valid information edit with invalid information 
 Failure/Error: it { should have_content('error') }
   expected there to be content "error" in "with invalid information"
 # ./spec/requests/user_pages_spec.rb:157:in `block (5 levels) in <top (required)>'

13) signup with valid information edit page 
 Failure/Error: it { should have_link('change', href: 'http://gravatar.com/emails') }
   expected link "change" to return something
 # ./spec/requests/user_pages_spec.rb:151:in `block (5 levels) in <top (required)>'

14) signup with valid information edit page 
  Failure/Error: it { should have_selector('title', text: "Edit user") }
   expected css "title" with text "Edit user" to return something
 # ./spec/requests/user_pages_spec.rb:150:in `block (5 levels) in <top (required)>'

15) signup with valid information edit page 
 Failure/Error: it { should have_selector('h1', text: "Update your profile") }
   expected css "h1" with text "Update your profile" to return something
 # ./spec/requests/user_pages_spec.rb:149:in `block (5 levels) in <top (required)>'

16) signup with invalid information error messages 
 Failure/Error: it { should have_selector('title', text: 'Sign up') }
   expected css "title" with text "Sign up" to return something
 # ./spec/requests/user_pages_spec.rb:81:in `block (4 levels) in <top (required)>'

17) signup with valid information after saving the user 
 Failure/Error: it { should have_link('Sign out') }
   expected link "Sign out" to return something
 # ./spec/requests/user_pages_spec.rb:106:in `block (4 levels) in <top (required)>'

18) signup with valid information after saving the user 
 Failure/Error: it { should have_selector('div.alert.alert-success', text: 'Welcome') }
   expected css "div.alert.alert-success" with text "Welcome" to return something
 # ./spec/requests/user_pages_spec.rb:105:in `block (4 levels) in <top (required)>'

19) signup with valid information after saving the user 
 Failure/Error: it { should have_selector('title', text: user.name) }
   expected css "title" with text "Example User" to return something
 # ./spec/requests/user_pages_spec.rb:104:in `block (4 levels) in <top (required)>' 
```

2.39秒完成87个例子，19个失败

失败的例子：

```
rspec ./spec/requests/user_pages_spec.rb:46 # User pages delete links as an admin user should be able to delete another user
rspec ./spec/requests/user_pages_spec.rb:45 # User pages delete links as an admin user 
rspec ./spec/requests/user_pages_spec.rb:65 # signup page 
rspec ./spec/requests/user_pages_spec.rb:66 # signup page 
rspec ./spec/requests/user_pages_spec.rb:58 # profile page 
rspec ./spec/requests/user_pages_spec.rb:59 # profile page 
rspec ./spec/requests/user_pages_spec.rb:114 # signup page 
rspec ./spec/requests/user_pages_spec.rb:115 # signup page 
rspec ./spec/requests/user_pages_spec.rb:171 # signup with valid information edit with valid information 
rspec ./spec/requests/user_pages_spec.rb:173 # signup with valid information edit with valid information 
rspec ./spec/requests/user_pages_spec.rb:172 # signup with valid information edit with valid information 
rspec ./spec/requests/user_pages_spec.rb:157 # signup with valid information edit with invalid information 
rspec ./spec/requests/user_pages_spec.rb:151 # signup with valid information edit page 
rspec ./spec/requests/user_pages_spec.rb:150 # signup with valid information edit page 
rspec ./spec/requests/user_pages_spec.rb:149 # signup with valid information edit page 
rspec ./spec/requests/user_pages_spec.rb:81 # signup with invalid information error messages 
rspec ./spec/requests/user_pages_spec.rb:106 # signup with valid information after saving the user 
rspec ./spec/requests/user_pages_spec.rb:105 # signup with valid information after saving the user 
```

rspec ./spec/requests/user_pages_spec.rb:104 # 保存用户后使用有效信息注册

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T17:47:03.663

对。`end`U在 authentication_pages_spec 中错过了 2 个。`end`user_pages_spec 中还有一个额外的内容。将（或删除）这些末端放在文件的末尾，应该这样做。我建议使用一些好的编辑器进行编码。请参阅[https://stackoverflow.com/questions/91445/best-ide-for-ruby-on-rails](https://stackoverflow.com/questions/91445/best-ide-for-ruby-on-rails)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T19:15:57.560

我想到了。在分页块之后我有一个额外的结尾，所以我将它删除并添加到结尾所有测试现在都通过了。那些绿点从来没有这么好看过。

# android - 如何访问安卓的“解锁”屏幕

> ID：13894539
> 
> 赞同：-2
> 
> 时间：2012-12-15T17:37:21.833
> 
> 标签：android, android-layout, android-intent

对于我的应用程序，我正在尝试访问解锁屏幕以检查用户在尝试解锁手机时是否搞砸了。我目前被困在如何访问该屏幕上。预先感谢您的所有帮助！

** 解锁画面是用户唤醒手机后需要输入密码/绘制图案/人脸识别的画面

** 主要问题：如何知道用户是否搞砸/插入了无效的模式或代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T17:53:25.263

欢迎您[实施`DeviceAdminReceiver`](http://developer.android.com/reference/android/app/admin/DeviceAdminReceiver.html). 如果用户选择激活它，您可以通过回调了解成功和失败的 PIN/密码尝试`onPasswordFailed()`。`onPasswordSucceeded()`

# android - 相机无法在纵向 android 2.2 及更高版本中工作

> ID：13894543
> 
> 赞同：2
> 
> 时间：2012-12-15T17:37:57.523
> 
> 标签：android, android-layout, android-intent, android-camera, surfaceview

我使用了surfaceview（Android 2.2及更高版本），如果我在AndroidManifest.xml中制作以下代码，结果会很好

```
 <activity
        android:name="com.custom.camera.CustomCamera"
        android:screenOrientation="landscape" >
    </activity> 
```

但是如果我使用下面的代码，相机视图不会显示

```
 <activity
        android:name="com.custom.camera.CustomCamera"
        android:screenOrientation="portrait" >
    </activity> 
```

具有横向模式的图片可以正常工作

![在此处输入图像描述](../Images/e8e63352d33278e7042b5880152ac638.png)

如果我在纵向模式下使用相同的图片将变为

![在此处输入图像描述](../Images/b6c917a33363746351ca348471930ac9.png)

谁能告诉我为什么会这样

xml文件是

```
 <?xml version="1.0" encoding="utf-8"?> 
```

```
<FrameLayout
    android:id="@+id/mPreview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" />

<FrameLayout
    android:id="@+id/overlay_container"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:visibility="visible" >

    <Button
        android:id="@+id/mTakePicture"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Take Picture" />

    <ImageView
        android:id="@+id/mFrontView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:padding="5dp" />
</FrameLayout> 
```

```
 LOGCAT ISSUE 
```

如果它处于纵向模式，我会收到如下错误

```
 12-16 15:43:09.297: E/Camera(7104): Error 1
       12-16 15:43:15.297: E/Camera(7104): Error 1
       12-16 15:43:21.307: E/Camera(7104): Error 1
       12-16 15:43:27.337: E/Camera(7104): Error 1 
```

在风景中它工作正常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T04:07:42.327

```
 1)You have to make your own custom view with all your logics and design in a separate class which extends View

  2) The SurfaceView must be placed inside a Frame or RelativeLayout 

  3) Finally your custom view must be specified in your layout xml as a child 
```

这将需要一些时间，但您有很多示例和教程

# java - 三参数运算符：局部变量可能尚未初始化

> ID：13894544
> 
> 赞同：3
> 
> 时间：2012-12-15T17:37:59.440
> 
> 标签：java, eclipse, javac

我有以下代码...

```
import java.util.Random;

public class ThreeArgumentOperator {

    private static final Random RANDOM = new Random();

    public static void main(String[] args) {
        String test;
        System.out.println(test = getValue() == null ? "" : test);
    }

    public static String getValue() {
        if (RANDOM.nextBoolean()) {
            return "";
        } else {
            return null;
        }
    }

} 
```

Eclipse 编译器（我正在使用 Juno）报告以下错误：

> 局部变量 test 可能尚未初始化

我的问题是：在这种情况下，编译器不应该报告它不能转换`boolean`为`String`吗？我知道运算符`==`优先`=`，因此编译器应该抱怨强制转换，而不是抱怨可能没有初始化的值。

当我更改以下行时

`System.out.println(test = getValue() == null ? "" : test);`

至

`System.out.println((test = getValue()) == null ? "" : test);`

一切正常。

编辑：我也尝试`javac`直接使用编译它。它给出了同样的错误。

```
error: variable test might not have been initialized
System.out.println(test = getValue() == null ? "" : test); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T18:03:04.743

编译器为您提供的错误是正确的。根据运算符优先级，`==`将首先评估，然后是您的三元运算符`? :`。也就是说，逻辑流程如下：

```
getValue() == null 
```

为了继续，我们假设结果是`false`. 下一个表达式：

```
false ? "" : test 
```

那么这个结果就是`test`。而我们最后的表达...

```
test = test 
```

但`test`从未初始化，因此出现错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T18:01:50.833

我真的不明白问题出在哪里。第一个表达式是

```
test = getValue() == null ? "" : test 
```

这意味着：`test`初始化为

*   `getValue()`如果返回 null则为空字符串
*   `test`否则的价值

由于 test 尚未初始化，因此您无法自行初始化`test`，因此会出现错误消息。

第二个表达式是

```
(test = getValue()) == null ? "" : test 
```

意思是：

*   `test`用结果初始化`getValue()`
*   比较`test`_`null`
*   如果`test`为 null，则表达式计算为空字符串
*   否则它评估为`test`

为什么不应该编译？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T18:03:50.673

这对我来说很有意义。

第二个编译版本实际上是两个单独的语句。它等效于以下代码：

```
test = getValue();
System.out.println(test == null ? "" : test); 
```

第一个为 赋值`test`：

```
test = getValue(); 
```

现在`test`有了价值。第二条语句能够在`test`不为空的情况下确定表达式结果值。

第一个非编译版本是一条语句，因为`test`还没有值，所以要分配的值`test`（即`test`）是未知的。

# mysql - MySQL插入ID升序

> ID：13894545
> 
> 赞同：-3
> 
> 时间：2012-12-15T17:38:14.537
> 
> 标签：mysql, insert, auto-increment

我想按升序将用户 ID 插入表中。所以我想做这样的事情：

`insert last insert+1`

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T17:50:32.007

在 phpmyadmin 中，有一个选项“检查”字段为`auto_incremented`. 您不必插入 ID，因为它会在插入其他数据时自动插入。

请注意，ID 列需要是主键！！！

# python - 带有数字和字符串的元组列表

> ID：13894546
> 
> 赞同：0
> 
> 时间：2012-12-15T17:38:16.743
> 
> 标签：python, list, tuples

我有一个元组列表，可能如下所示：

```
[(23, 'somestr'), (30, 'someotherstr'), (15, 'someotherstr2')] 
```

我需要提取具有最小数量的元组，并获取该元组的字符串。为了找到最小值，我刚刚做了：`min([i[0] for i in list])`.

怎么会得到字符串呢？嵌套列表理解？我尝试了几种方法，但我不确定如何保留元组的索引，或者在列表理解语句中获取它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T17:40:07.690

```
min(your_list)[1] #would be sufficient 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-15T17:40:42.700

在这里，您可以直接比较元组。但是，更一般的方法是使用`key`参数来[`min()`](http://docs.python.org/2/library/functions.html#min)：

```
In [21]: min(l, key=operator.itemgetter(0))[1]
Out[21]: 'someotherstr2' 
```

在这里，`key=operator.itemgetter(0)`提取元组的第零个元素，并使用结果作为键来决定哪个元组是最小的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-15T17:43:26.027

可以比较元组：

```
>>> (1, 'hello') < (2, 'bye')
True 
```

元组的比较有点像字符串：成对考虑元素，直到找到不相等的对，然后元素较小的元组被认为较小。

所以你可以简单地获取列表的最小值，返回第一个值最小的元组。然后可以查看第二个元素中的字符串：

```
least = min(the_list)
print least[1] 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-15T17:55:20.057

```
 python 3.2

    1\. min(your_list)

    2\. sorted(your_list)[0]

    3\. min([(i,v) for i,v in your_list]) 
```

# java - DynamoDB 是否在 GAE 中工作？

> ID：13894551
> 
> 赞同：2
> 
> 时间：2012-12-15T17:38:37.903
> 
> 标签：java, google-app-engine, amazon-dynamodb

GAE 需要一些 S3 的特定库（例如 jclouds 或 simple-s3），那么 DynamoDB 呢？

# sorting - elasticsearch使用查询字符串设置排序顺序

> ID：13894553
> 
> 赞同：33
> 
> 时间：2012-12-15T17:38:44.580
> 
> 标签：sorting, elasticsearch

我有以下简单的 elastisearch 查询：

```
http://localhost:9200/apn/presupuesto/_search?q=subcuenta:penal&sort=anio 
```

它工作正常

现在我正在尝试按 anio desc 订购。我尝试了所有这些选项：

```
...l&sort=anio desc

...l&sort=-anio

...l&sort=anio&order=desc 
```

但它们似乎都不起作用

我怎样才能实现它？（理想情况下，来自查询字符串，而不必使用更复杂的查询）

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-12-15T19:13:53.703

尝试排序 = anio:desc。

请参阅 [搜索 API - uri 请求](http://www.elasticsearch.org/guide/reference/api/search/uri-request.html)以获取参数列表。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-12-30T08:02:24.757

回答opensas问题

[elasticsearch使用查询字符串设置排序顺序](https://stackoverflow.com/questions/13894553/elasticsearch-set-sort-order-using-querystring#comment19144440_13894553)

此功能称为多级排序。

示例查询是

```
GET /_search
{
    "query" : {
        "filtered" : {
            "query":   { "match": { "tweet": "manage text search" }},
            "filter" : { "term" : { "user_id" : 2 }}
        }
    },
    "sort": [
        { "date":   { "order": "desc" }},
        { "_score": { "order": "desc" }}
    ]
} 
```

> 秩序很重要。结果首先按第一个标准排序。只有第一个排序值相同的结果才会按第二个标准排序，依此类推。 [http://www.elasticsearch.org/guide/en/elasticsearch/guide/current/_sorting.html#_multilevel_sorting](http://www.elasticsearch.org/guide/en/elasticsearch/guide/current/_sorting.html#_multilevel_sorting)

# jquery - 如何查找、计算文本字符串的出现次数并将其打印到页面上

> ID：13894557
> 
> 赞同：-3
> 
> 时间：2012-12-15T17:39:29.197
> 
> 标签：jquery

jquery 如何查找、计算和打印到页面，在`'<lineNo'`调用的 div 中存在的出现次数，`'dialogue'`并且在不替换页面上所有文本的情况下这样做？

```
<div id="dialogue">
<div id="1">
 <lineNo1>1</lineNo1>) 
 <lineNo2>2</lineNo2>) 
 <lineNo3>3</lineNo3>) 
</div>

<div id="2">
 <lineNo1>1</lineNo1>) 
 <lineNo2>2</lineNo2>) 
 <lineNo3>3</lineNo3>) 
</div>
</div> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T17:54:53.127

***HTML***

```
<div id="dialogue">
    <div id="1">
     <lineNo1>1</lineNo1>) 
     <lineNo2>2</lineNo2>) 
     <lineNo3>3</lineNo3>) 
    </div>

    <div id="2">
     <lineNo1>1</lineNo1>) 
     <lineNo2>2</lineNo2>) 
     <lineNo3>3</lineNo3>) 
    </div>

    <!-- display line no -->
    <div class="msg">You have <span class="count"></span> lines.</div>

</div>​ <!-- Missing this closing in question --> 
```

***jQuery***

```
var count = 0;;
$('div[id^="dialogue"] div').each(function() {
    var pattern = new RegExp('<lineNo', 'ig'),
        match = $(this).html().match(pattern),
        len = match ? match.length : 0;
        count += len; 
});
$('.msg span.count').html(count); 
```

***[​演示](http://jsfiddle.net/gwhmz/3/)*** ​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T17:47:27.097

要获取 div 中的文本，请使用 jQuery 选择器：`$('.dialogue').text()`

然后，您可以使用正则表达式获取所有出现的字符串：`someString.match(/lineNo/g)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T17:46:08.473

听起来您正在尝试使用`document.write`.

```
$("body").append("<div>" + $("#dialogue *").filter(function () {
   return this.nodeName.toUpperCase().indexOf('LINENO') > -1; 
}).length + "</div>");​ 
```

这只是创建一个新的 div 并将其附加到正文。它的内容是你想要的计数。请注意，这可能不适用于 IE8-，它以不寻常的方式处理未知节点。

# android - 从 SD 卡导入数据库文件时出现 NonWritableChannelException

> ID：13894559
> 
> 赞同：0
> 
> 时间：2012-12-15T17:40:01.280
> 
> 标签：android, database

我正在尝试导入一个存储在我的 SD 卡上的数据库，如果我想恢复到某些东西，我将其用作备份来替换当前数据库，但是当我尝试导入时，我得到一个`NonWritableChannelException`

错误

```
12-15 12:27:48.190: W/System.err(13599): java.nio.channels.NonWritableChannelException
12-15 12:27:48.190: W/System.err(13599):    at java.nio.FileChannelImpl.checkWritable(FileChannelImpl.java:85)
12-15 12:27:48.190: W/System.err(13599):    at java.nio.FileChannelImpl.transferTo(FileChannelImpl.java:399)
12-15 12:27:48.190: W/System.err(13599):    at com.tyczj.bowling.Bowlers$ImportData.importGames(Bowlers.java:944)
12-15 12:27:48.200: W/System.err(13599):    at com.tyczj.bowling.Bowlers$ImportData.doInBackground(Bowlers.java:914)
12-15 12:27:48.200: W/System.err(13599):    at com.tyczj.bowling.Bowlers$ImportData.doInBackground(Bowlers.java:1)
12-15 12:27:48.200: W/System.err(13599):    at android.os.AsyncTask$2.call(AsyncTask.java:287)
12-15 12:27:48.200: W/System.err(13599):    at java.util.concurrent.FutureTask.run(FutureTask.java:234)
12-15 12:27:48.210: W/System.err(13599):    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
12-15 12:27:48.210: W/System.err(13599):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
12-15 12:27:48.210: W/System.err(13599):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
12-15 12:27:48.210: W/System.err(13599):    at java.lang.Thread.run(Thread.java:856) 
```

这是我用来导入的方法

```
public boolean importGames(){
        File newDB = new File(Environment.getExternalStorageDirectory() + "/BCAData/Games");
        File oldDB = new File(Environment.getDataDirectory()+"/data/my.app.package/databases/Games");
        if(newDB.exists()){
            try {
                FileChannel fromChannel = new FileInputStream(newDB).getChannel();
                FileChannel toChannel = new FileInputStream(oldDB).getChannel();
                fromChannel.transferTo(0,fromChannel.size(),toChannel); //fails here
                try{
                    if(fromChannel != null){
                        fromChannel.close();
                    }
                }finally{
                    if(toChannel != null){
                        toChannel.close();
                    }
                }
                return true;
            } catch (Exception e) {
                e.printStackTrace();
            }

        }
        return false;
    } 
```

这个错误是什么意思，我以前从未遇到过这个错误，如何正确导入数据库文件

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-15T17:42:02.233

你的“to”通道应该是一个文件*输出*流，因为你想写入（而不是读取）这个文件：

```
FileChannel toChannel = new FileOutputStream(oldDB).getChannel(); 
```

# css - 在 Mozilla Firefox 中自定义网页的 CSS

> ID：13894564
> 
> 赞同：0
> 
> 时间：2012-12-15T17:40:30.080
> 
> 标签：css, firefox, web, customization

我想自定义网站的 css 并保存以供 Mozilla 加载。这样当 Mozilla 从该 url 加载 html 时，它会使用我的 css 文件而不是外部文件。我不知道如何让 Mozilla 做到这一点，当我向 url 发出新请求时，会加载站点的 css 而不是我的。我该如何设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T17:43:39.563

为了那个原因

您可以扫描用户代理并找出哪个浏览器及其版本。包括操作系统特定样式的操作系统您可以使用针对特定浏览器的各种 CSS Hacks 或脚本或插件来识别浏览器并将各种类应用于元素

## 使用 jQuery

您所追求的是浏览器检测：

```
if ($.browser.mozilla) { ... 
```

但是，不鼓励浏览器嗅探，因为它很容易欺骗用户代理，即伪装成另一个浏览器！

你最好使用特征检测，要么以你自己的方式，要么通过 jQuery.support 接口：[http ://api.jquery.com/jQuery.support/](http://api.jquery.com/jQuery.support/)

这是一篇关于扩展它以供您自己使用的文章：[http ://www.waytoocrowded.com/2009/03/14/jquery-supportminheight/](http://www.waytoocrowded.com/2009/03/14/jquery-supportminheight/)

## 使用 PHP

看

```
http://php.net/manual/en/function.get-browser.php
http://techpatterns.com/downloads/php-browser-detection-basic.php
http://techpatterns.com/downloads/php_browser_detection.php (contains JS also) 
```

然后根据检测到的浏览器创建动态 CSS 文件 这是一个 CSS Hacks 列表

## 选择器技巧

```
/* IE6 and below */
* html #uno  { color: red }

/* IE7 */
*:first-child+html #dos { color: red } 

/* IE7, FF, Saf, Opera  */
html>body #tres { color: red }

/* IE8, FF, Saf, Opera (Everything but IE 6,7) */
html>/**/body #cuatro { color: red }

/* Opera 9.27 and below, safari 2 */
html:first-child #cinco { color: red }

/* Safari 2-3 */
html[xmlns*=""] body:last-child #seis { color: red }

/* safari 3+, chrome 1+, opera9+, ff 3.5+ */
body:nth-of-type(1) #siete { color: red }

/* safari 3+, chrome 1+, opera9+, ff 3.5+ */
body:first-of-type #ocho {  color: red }

/* saf3+, chrome1+ */
@media screen and (-webkit-min-device-pixel-ratio:0) {
 #diez  { color: red  }
}

/* iPhone / mobile webkit */
@media screen and (max-device-width: 480px) {
 #veintiseis { color: red  }
}

/* Safari 2 - 3.1 */
html[xmlns*=""]:root #trece  { color: red  }

/* Safari 2 - 3.1, Opera 9.25 */
*|html[xmlns*=""] #catorce { color: red  }

/* Everything but IE6-8 */
:root *> #quince { color: red  }

/* IE7 */
*+html #dieciocho {  color: red }

/* Firefox only. 1+ */
#veinticuatro,  x:-moz-any-link  { color: red }

/* Firefox 3.0+ */
#veinticinco,  x:-moz-any-link, x:default  { color: red  }

/***** Attribute Hacks ******/

/* IE6 */
#once { _color: blue }

/* IE6, IE7 */
#doce { *color: blue; /* or #color: blue */ }

/* Everything but IE6 */
#diecisiete { color/**/: blue }

/* IE6, IE7, IE8 */
#diecinueve { color: blue\9; }

/* IE7, IE8 */
#veinte { color/*\**/: blue\9; }

/* IE6, IE7 -- acts as an !important */
#veintesiete { color: blue !ie; } /* string after ! can be anything */ 
```

来源： http: [//paulirish.com/2009/browser-specific-css-hacks/](http://paulirish.com/2009/browser-specific-css-hacks/)

## 如果你想使用插件，那么这里是一个

[http://rafael.adm.br/css_browser_selector/](http://rafael.adm.br/css_browser_selector/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T17:48:59.297

The most straightforward way for most of us would be using the Mozilla Firefox addon called [Stylish](https://addons.mozilla.org/en-US/firefox/addon/stylish/). It lets you write, save and use own stylesheets for a particular page or domain, overriding (if necessary) parts of authors own rule(s).

Under the hood it's not much more than built-in Firefox facilities though - you have the `userContent.css` file which, using CSS' own supported `@document` syntax and `!important` after a rule, accomplishes exactly what you're after.

This is all at the heart of CSS actually. It is more or less designed to allow users to override authors stylesheets, and Firefox makes it somewhat easy to do that.

You can obtain a much more extensive explanation [here](http://webdesign.about.com/od/userstylesheets/a/aa010906.htm).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T17:43:16.090

看看greasemonkey插件：[https ://addons.mozilla.org/de/firefox/addon/greasemonkey/](https://addons.mozilla.org/de/firefox/addon/greasemonkey/)

# mono - 无法杀死单声道进程（Mono + NLog）

> ID：13894568
> 
> 赞同：1
> 
> 时间：2012-12-15T17:40:57.267
> 
> 标签：mono, nlog

我有一个在 Ubuntu 12 服务器上以单声道运行的进程。偶尔尝试停止进程时，它不会完全退出。kill pid 不会终止进程，但是 kill -9 pid 会成功终止进程。

如果我发出 kill -QUIT pid，我会得到以下信息：

> “未命名线程” tid=0x0xb753b700 this=0x0x56f18 线程句柄 0x403 状态：等待 0x400：事件拥有 ()

我假设我的一个线程没有正确退出，关于从哪里开始寻找问题的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T14:05:08.677

这是一个 Mono 已知问题，用户在合并的拉取请求中修复了该问题，包含该修复的第一个版本是 Mono 3.0.8：

[https://github.com/mono/mono/pull/505](https://github.com/mono/mono/pull/505)

# ruby - 有没有办法在 Ruby 中控制标签大小？

> ID：13894570
> 
> 赞同：1
> 
> 时间：2012-12-15T17:41:25.667
> 
> 标签：ruby, string, tabs, irb

在控制台上，当我输出这样的字符串时：

```
puts "\tFOOBAR" 
```

它似乎在`FOOBAR`.

有没有办法控制这个标签大小？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-15T17:43:50.547

该代码没有插入 8 个空格，而是插入了一个制表符文字`\t`。无论您使用什么来*查看*它，都将制表符文字解释和显示为 8 个空格。

例如，如果您的终端显示 8 个空格，您可以更改首选项以减小显示宽度，但这绝对不是 Ruby 所做的。如何更改它取决于应用程序或终端。

# c - 如何将 char 缓冲区（带有 pcm 音频数据）转换为短缓冲区

> ID：13894582
> 
> 赞同：0
> 
> 时间：2012-12-15T17:43:03.387
> 
> 标签：c, android-ndk, ffmpeg, short

`pAudioBuffer`我有从函数 ffmpeg 获得的char缓冲区：

```
int len = avcodec_decode_audio3(av_codec_context,
            (int16_t *) pAudioBuffer, &out_size, &packet); 
```

我知道音频格式是每个样本两个字节，我需要将每两个字节转换为短值，我尝试使用下面的代码片段，但我经常得到零而不是短值：

```
int shortBufIndex = 0;
for (int i = 0; i < (out_size); i += 2) {
    char b1 = pAudioBuffer[i];
    char b2 = pAudioBuffer[i + 1];
    short sample = atoi(&b1) + atoi(&b2);
    shortBuffer[shortBufIndex] = sample;
    shortBufIndex++;
    LOGI("BUFFER_ITEM='%d'", sample);
} 
```

我做错了什么，如何将 char 缓冲区中的每两个字节转换为 short 和 back。

**更新：**

系统的字节顺序是 LITTLE_ENDIAN 我有这样的测试：[Android NDK的字节序](https://stackoverflow.com/questions/6212951/endianness-of-android-ndk)

如何将缓冲区中的每两个字节转换为短类型样本并返回。请您提供任何代码示例。

**更新**

我试图以成对的方式访问short，这是我的固定代码，但它不起作用，我听不到任何声音：

```
 int shortBufIndex = 0;
    for (int i = 0; i < (out_size); i += 2) {
        char * byte = (char *) pAudioBuffer[i];
        short * sample = byte;
        shortBuffer[shortBufIndex] = sample;
} 
```

我做错了什么？我需要这样的转换：字节数组到短数组并在java中但在c中[再次返回。](https://stackoverflow.com/questions/5625573/byte-array-to-short-array-and-back-again-in-java)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T17:48:25.987

将 atoi() 与变量地址一起使用是完全错误和不正确的。那是为了将值的 ASCII 表示形式转换为数字。在您的情况下，您实际上并没有一个“字符”缓冲区，而是一个字节值缓冲区，在 C 的历史中，它通常是用**char**类型实现的，而不是像**int8_t**这样更新和确定的东西。

要在字符缓冲区和短缓冲区之间进行转换，首先需要回答关键问题，字符缓冲区的编码是按照系统的本机字节序还是相反。

如果它是本地字节序，那么在诸如 C 之类的语言中，您所要做的就是将指针类型转换为 short 类型，并将数据作为字节对访问。

但是，如果它的顺序相反，您将不得不访问这两个字节并以与通常相反的顺序将它们组合（移位+添加）。可能有可以使用的宏来执行此操作，尽管手动操作具有使功能完全明显的优势。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T09:54:20.233

```
short *pshBuf = (short*)pCharBuf; 
```

有用。我也在我的现场项目中使用相同的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T17:48:18.407

呐。你必须写

```
short sample = b1<<8|b2; 
```

或者，根据您的字节序情况，您必须交换 b1 和 b2

# c# - WCF、WinRT、异步和数据绑定

> ID：13894585
> 
> 赞同：0
> 
> 时间：2012-12-15T17:43:36.943
> 
> 标签：c#, wcf, data-binding, windows-runtime

也许是因为这是周末，但我马上就会在这里发疯。但也许只是因为我是 Windows 运行时编程的新手。

我有一个 WCF 服务 (net.tcp) 和一个 WinRT-Consumer。所有设置和工作。

在我的 WinRT 应用程序中，我有一个 ListView，绑定到 CollectionViewSource（设置为 ObservableCollection）。

Listview 更新我的源手册，所以没关系.. buuuut，

现在我正在从我的服务中检索数据，它工作正常（ObservableCollection = await Proxy.GetUserInfoAsync() ...）

我可以说 Observablecollection 已完美更新，并且包含了我想要的所有项目，但我的 Listview 从未得到更新。

找了很久，没成功:(

我认为我从所有阅读中得到了什么：使用 await 我不需要在我的 ui 线程上运行任何东西，因为它会自动“返回”到调用线程（？）..所以也许有人可以给我一个提示我是什么我在这里失踪..

无论如何，非常感谢您抽出宝贵的时间，祝您周末愉快！穆先生

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T18:00:19.997

您需要手动更新 CollectionViewSource.Source 属性，因为这不知道您的 ObservableCollection 属性何时被服务替换。在 ObservableCollection 的设置器中，只需将此属性的值设置为新值，它应该可以工作。

# eclipse - 运行 JUnit 插件测试时阻止启动 eclipse GUI

> ID：13894589
> 
> 赞同：4
> 
> 时间：2012-12-15T17:44:13.510
> 
> 标签：eclipse, junit, eclipse-plugin

当我开始时`JUnit Plug-in Test`，我总是启动 eclipse GUI。我可以更改设置以防止这种情况发生吗？

我正在测试 eclipse 插件 - eclipse[中`JUnit Plug-in Test` 和 `JUnit Test` 之间的区别](https://stackoverflow.com/questions/13894287/difference-between-junit-plug-in-test-and-junit-test-in-eclipse)

![在此处输入图像描述](../Images/6ad10876dae5430374fd4f114e21d24a.png)

![在此处输入图像描述](../Images/d54925dd360690809fb212221ecba74a.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T06:48:02.620

您是否正在开发 Eclipse 插件（或 RCP 应用程序）？

**否**：您不想运行“JUnit 插件测试”。始终将您的测试作为“Junit 测试”运行。

**是**：在您的 Junit 插件测试启动配置的“主”选项卡上，选择单选按钮“运行应用程序”并选择应用程序“无应用程序 - 无头模式”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-09T15:30:09.117

在我看来，这是 Eclipse IDE 的插件开发环境 (PDE) 工具的问题。当您选择“Run as > JUnit Plug-in Test”时，Eclipse 将启动工作区中的所有插件来运行测试。

![运行方式 > JUnit 插件测试](../Images/960e2bf0146598eed557e2b6053220ec.png)

您可以通过打开相应的“运行配置”来检查这一点</p>

![运行配置](../Images/6d7f29ec1f4d1d7a955b084ae5ff77b3.png)

我不知道您的确切设置，但我猜您在运行单元测试时不需要所有插件。这是我的做法：

1.  切换到“仅在下面选择的插件”</li>
2.  点击“全部删除”</li>
3.  选择您的测试所在的捆绑包（`org.eclipsescout.demo.minifigcreator.client.test`在我的情况下）
4.  点击“添加所需插件”</li>
5.  [可选] 单击“验证插件”（预期消息：“未检测到问题”）
6.  点击“运行”</li>

![运行配置 - 正确的插件集](../Images/06c27c71612112465d712905341e6395.png)

您的测试现在应该运行，并且不应打开第二个 eclipse 工作台（Eclipse GUI）（除非您直接依赖它）。

根据您的设置（工作区、团队、源代码管理...），将其保存为启动器文件并与您的团队共享可能会很有用（请参阅“Commons”选项卡中的选项）。

# c# - SQL Server + 删除多个 ID

> ID：13894591
> 
> 赞同：0
> 
> 时间：2012-12-15T17:44:37.787
> 
> 标签：c#, sql

我想找出删除 id 复选框的好方法，如下所示，对于插入，我正在使用 SqlBulkCopy 但我认为没有类似的删除类。如果复选框被选中但我不确定这是否是最好的方法，我现在只能考虑删除 1 个按 1 删除？谢谢。

```
 protected void DeleteMsg_Click(object sender, EventArgs e)
        {
            UserBLL userBll = new UserBLL();

            foreach (GridViewRow row in uigvUserInbox.Rows)
            {
                CheckBox chkSelected = (CheckBox)row.FindControl("chkSelect");

                if (chkSelected.Checked)
                {
                    try
                    {
                      //  DataKey currentDataKey = uigvUserInbox.DataKeys[row.DataItemIndex];
                      //  userBll.DeleteMessage(currentDataKey.Value.ToString()); // SQL delete 
                    }
                    catch (Exception ex)
                    {
                        // clsLogging logError = new clsLogging();
                        // logError.WriteLog(ex);
                    }
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T17:58:16.733

将适当的方法添加到`UserBLL`在 SQL 端执行删除的类中`where yourMappedIDColumn in (here is the comma separated list of dataKeys)`

```
class UserBLL
{
    internal void DeleteMessages(List<DataKey> dataKeysToDelete)
    {
        //delete from tableName where Id in dataKeysToDelete
    }
} 
```

检索变量中的所有数据键并将其传递给上面的方法。

```
protected void DeleteMsg_Click(object sender, EventArgs e)
{
    UserBLL userBll = new UserBLL();

    List<DataKey> dataKeysToDelete = new List<DataKey>();

    foreach (GridViewRow row in uigvUserInbox.Rows)
    {
        CheckBox chkSelected = (CheckBox)row.FindControl("chkSelect");

        if (chkSelected.Checked)
        {

            dataKeysToDelete.Add(uigvUserInbox.DataKeys[row.DataItemIndex]);
        }
    }
    try
    {
        userBll.DeleteMessages(dataKeysToDelete);
    }
    catch (Exception ex)
    {
        // clsLogging logError = new clsLogging();
        // logError.WriteLog(ex);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T17:54:29.787

您可以使用 In 子句

从 id in (id1, id2, id3) 的表中删除

这只需要一个查询。

# xaml - 如何处理 winrt 上 ListView 中的焦点更改

> ID：13894595
> 
> 赞同：1
> 
> 时间：2012-12-15T17:45:04.217
> 
> 标签：xaml, windows-8, windows-runtime

我在 XAML 中有一个 ListView 控件，其中包含由模板设置样式的项目。

该模板包含一个文本框

当我在键盘上的控件之间切换时，我会在整个模板周围看到一个选择框，而在下一个选项卡上，焦点会转到第一个 TextBox。

当 ListView 上的焦点发生变化时如何通知我？

[更新 1] 这是一个开始： [如何在样式设置器中添加混合行为](https://stackoverflow.com/questions/1647815/how-to-add-a-blend-behavior-in-a-style-setter)

首先，我需要挂钩 GotFocus/LostFocus 事件。最好的方法是使用行为，因此按照上面的详细信息，我创建了一个布尔附加属性 IsScrollIntoViewEnabled。

然后，我将该值设置为 ListViewItemContainerStyle 的样式。

所以第一阶段是我知道一个项目何时获得和失去焦点。我仍然不知道如何从 ListViewItem 回到 ListView 本身。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T09:24:07.247

我解决了最后一块难题，通过遍历 VisualTreeHelper.GetParent(x) 从 ListViewItem 获取 ListView，直到找到正确类型的对象。

# windows-8 - 是否可以将 Visual Studio 2012 中的 MS Javascript Windows 商店应用程序作为在 Internet 上运行的 Web 应用程序？

> ID：13894603
> 
> 赞同：1
> 
> 时间：2012-12-15T17:45:52.607
> 
> 标签：windows-8, cross-browser, visual-studio-2012, cross-platform, windows-store-apps

是否可以在 ASP.Net 或 ASP MVC 之类的 Javascript Windows 商店应用程序（托管在 Windows 8 上）中制作一个应用程序，其工作方式与它们在互联网上针对不同操作系统和浏览器所做的工作方式相同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T17:25:19.070

WinJS 只能在客户端的 Windows 商店应用程序中使用。在某些情况下，我可以使用通过服务器传递给客户端的代码。

然而，今天不可能在服务器上作为服务器端脚本技术运行。

也就是说，没有什么能阻止您尝试在 node.js 风格的环境中运行代码，只需获取 js 文件并查看您获得的位置。

# performance - AS3/Spritesheets/Starling 的 Flash 性能

> ID：13894604
> 
> 赞同：1
> 
> 时间：2012-12-15T17:45:57.480
> 
> 标签：performance, actionscript-3, flash, sprite-sheet, starling-framework

我目前正在尝试优化 AS3/Flash 网络（浏览器）应用程序（FP11+）。这是一个完整的浏览器窗口 Flash 应用程序，可通过（Greensock 的）SWFLoader 远程加载环境/背景图形并将它们添加为位图（下载时间不会导致问题）。其他次要图形，如按钮、处理/加载动画、窗口和 UI 元素是使用 AS3 图形 API 绘制的。

在加载额外的 swf 以在 Flash 应用程序中显示时，我遇到了 FPS 问题（目标是 40）（当加载的 SWF 动画并降为零时，FPS 变化很大）。平均 MB 使用量在 50-100MB 之间（由 FlashProfiler 报告）。

我的问题是：为远程加载的图形和/或绘制的图形实现本地精灵表的使用会显着提高性能吗？

其次，由于 Starling 使用 GPU 进行处理和动画，将应用程序转换为使用 Starling 会显着提升性能吗？

或者，我是否一直专注于最大化循环、列表/向量和数据使用的性能？关于这一点，我读过关于使用数组/列表与向量以及 foreach 与特定于集合的函数（过滤器、映射等）的混合意见。任何直接比较这些技术的经验也会有所帮助。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T18:16:52.743

当您有大量位图资产要显示在带有 GPU 以提供加速的计算机或设备上时，Starling 将有很大帮助。如果您使用 Starling，您将通过将各种图像放在一个 sprite 表中来减少 GPU 必须执行的绘制调用次数，从而获得更好的性能。

因此，大量图像加上大量旋转或缩放将充分利用 GPU 的优势。如果您不断地重绘矢量图形或其他画布类型的操作，Starling 可能帮不上什么忙。对于具有不受支持的 GPU 的计算机，它也无济于事。

在您做出位图与渲染决定后，任何实际 AS3 代码的优化都应使用分析器完成。

# haskell - 使用 Haskell 查找列表中的第 n 个元素

> ID：13894610
> 
> 赞同：0
> 
> 时间：2012-12-15T17:46:57.157
> 
> 标签：haskell

我正在尝试编写一个检索列表中第 n 个元素的函数。

这是我到目前为止所拥有的：

```
main :: IO ()
main = do print (nth 3 [1,2,10])

nth _ [] = [] 
nth a (x:xs) 
 | (a == 1) = x 
 | otherwise = nth (a-1) xs 
```

这是我得到的错误：

```
Error occurred
ERROR line 2 - Cannot justify constraints in explicitly typed binding
*** Expression    : main
*** Type          : IO ()
*** Given context : ()
*** Constraints   : (Show a, Num [a]) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T18:19:56.060

为什么要`Num [a]`约束？因为在`[]`子句中你的函数返回一个列表，`[]`而在另一个子句中你让它返回一个列表的元素，`x`。这意味着它仅针对其元素是列表本身的列表定义。但是你用一个列表来调用它`[1,2,10]`。所以 Haskell 看到一个数字字面`1`量，想把它解释为一个同样是数字的列表。它还需要它是`Show`for的一个实例`print`才能显示它：

```
Prelude> :i print
print :: (Show a) => a -> IO ()         -- Defined in System.IO 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T18:40:52.430

您正在返回子句中的列表

```
nth _ [] = [] 
```

和子句中的列表元素

```
nth a (x:xs) 
  | (a == 1) = x 
  | otherwise = nth (a-1) xs 
```

所以你的函数类型是

```
*Main> :t nth
nth :: (Eq a1, Num a1) => a1 -> [[a]] -> [a] 
```

你可以看看这个。您的函数无法返回任何列表的任何索引的元素，因此您必须使用 Maybe 返回“未找到元素”

```
nth _ [] = Nothing
nth a (x:xs) 
 | (a == 1) = Just x 
 | otherwise = nth (a-1) xs

*Main> :t nth
nth :: (Eq a1, Num a1) => a1 -> [a] -> Maybe a 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T18:26:18.890

开始了：

```
nth a (x:xs) 
| (a == 1) = x 
| otherwise = nth (a-1) xs 
```

# java - 客户端无法从服务器接收信息

> ID：13894613
> 
> 赞同：4
> 
> 时间：2012-12-15T17:47:10.043
> 
> 标签：java, sockets, stream, serversocket

我正在尝试将文件信息从服务器发送到客户端，但无法在客户端接收信息。我认为这是流的错误，但找不到。

我调试了代码，我看到信息读得很好，但是当涉及到该行时发生了一些不好的事情：

```
while ((readLine = read.readLine()) != null) { 
```

一切`null`都结束了。

```
public class Server {
    private String urlFile = "http://riemann.fmi.uni-ofia.bg/vladov/students/boil.txt";
    private ServerSocket serverSocket = null;
    private BufferedReader read = null;
    private BufferedWriter write = null;
    private FileReader fileReader = null;
    URLConnection urlConnection = null;

    void acceptConnection() {
        try {
            serverSocket = new ServerSocket(3000);
            Socket client = null;
            while (true) {
                client = serverSocket.accept();
                handleConnection(client);
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    private void handleConnection(Socket clientSocket) {
        try {
            URL url = new URL(urlFile);
            urlConnection = url.openConnection();
            read = new BufferedReader(new InputStreamReader(
                    urlConnection.getInputStream()));

            write = new BufferedWriter(new OutputStreamWriter(
                    clientSocket.getOutputStream()));
            String readLine = null;
            while ((readLine = read.readLine()) != null) {
                write.write(readLine);
                write.flush();
            }

        } catch (MalformedURLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    private void tearDownConnection() {
        try {
            write.close();
            read.close();
            serverSocket.close();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

} 
```

**客户**：

```
 public class Client {
    Socket client = null;
    BufferedReader reader = null;
    BufferedWriter writer = null;

    void connectToServer(String hostAddress, int port) {
        try {
            System.out.println("Client is waitting.");
            client = new Socket(hostAddress, port);
            reader = new BufferedReader(new InputStreamReader(
                    client.getInputStream()));
            writer = new BufferedWriter(new OutputStreamWriter(
                    client.getOutputStream()));
            String readedLine = null;
            readedLine = reader.toString();
            while ((readedLine = reader.readLine()) != null) {
                System.out.println(readedLine);
            }

        } catch (UnknownHostException e) {
            System.out.println("Host name is unkown.");
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    void tearDownConnection() {
        try {
            if (client != null) {
                client.close();
            }
            if (writer != null) {
                writer.close();
            }
            if (reader != null) {
                reader.close();
            }

        } catch (IOException e) {
            e.printStackTrace();
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T18:50:19.377

客户端正在等待一行（即由返回/换行符终止），而服务器没有发送此行。您可以在服务器中自己添加换行符：

```
while ((readLine = read.readLine()) != null) {
  write.write(readLine+"\n");
  write.flush();
} 
```

# c# - c# 中的 System.Diagnostics.process 类是否有任何替代品（因为它不适用于 Windows 8 商店应用程序）？

> ID：13894616
> 
> 赞同：0
> 
> 时间：2012-12-15T17:47:18.563
> 
> 标签：c#, windows-8, microsoft-metro, command-prompt, windows-store-apps

我想通过在我的 Windows 8 商店应用程序（地铁应用程序）中使用命令提示符命令来打开一些任务。如果它是桌面应用程序，那么我将在系统命名空间中使用进程类。现在它似乎不适用于 Windows 8 商店应用程序。所以我需要一个类或函数来在 Windows 8 商店应用程序中运行命令提示符命令。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T17:49:19.000

这是不可能的。当您制作 Windows 8 应用程序时，您会被沙盒化。您不能从您的应用程序中启动另一个应用程序。

# android - Android HTTP POST 在没有 JSON 的情况下获得响应，并放入 Toast

> ID：13894619
> 
> 赞同：3
> 
> 时间：2012-12-15T17:47:23.260
> 
> 标签：android, url, http-post

我想测试我的 Android 应用程序是否可以在没有 JSON 的情况下成功地从 php 页面获取响应。php 只包含`echo "hello";`，但我没有 Toast 它。我能找到的最接近的解决方案是，我试图将其中的一些部分放入我的代码中：[如何查看从 httppost 发送的字符串？](https://stackoverflow.com/questions/11150044/how-can-i-view-the-string-sent-from-httppost)

我的代码如下（更新）：

```
public void onClick(View v) {
    Thread t = new Thread() {
        @Override
        public void run() {
            Log.i("Threaded", "Inside thread!!!");
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost("http://192.168.1.10/fyp/test.php");

            try {
                HttpResponse response = httpclient.execute(httppost);
                InputStream content = response.getEntity().getContent();
                Log.i("Connect", content.toString());

                BufferedReader buffer = new BufferedReader(new InputStreamReader(content));
                StringBuilder sb = new StringBuilder();
                String line = null;

                while ((line = buffer.readLine()) != null) {
                    sb.append(line + "\n");
                }
                Log.i("Connect", sb.toString());

                handler.post(new Runnable() {
                    public void run() {       
                        showToastMessage("hello");       
                      }
                    });
            } catch (Exception e) {
                Log.e("Connect", "Fail");
                e.printStackTrace();
            }
        }

    };
} 
```

线程似乎没有运行，`Log.i("Threaded", "Inside thread!!!");`LogCat 中没有显示该行，我做错了哪一部分？注意：处理程序已在类中声明。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T18:04:17.137

确保在 UI 线程上执行 toast，否则它将失败。使用 Handler 或将网络操作包装在 AsyncTask 中，在其中将结果传递给由 UI 线程处理的 onPostExecute 方法。

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

如果这不是您的问题，请添加日志记录以查看您是否从服务器获得响应并检查您的 LogCat 是否有“hello”

# iphone - “隐藏键盘”按钮的正确标签

> ID：13894625
> 
> 赞同：0
> 
> 时间：2012-12-15T17:47:54.507
> 
> 标签：iphone, ios, uitextfield, user-experience, human-interface

我希望我`UITextField`的键盘上的返回按钮隐藏键盘。我不确定是否为此使用“返回”或“完成”标签。

我已经看到'Return' 用于隐藏键盘、插入新行和移动到下一个字段。我已经看到“完成”用于隐藏键盘、移动到下一个字段并提交表单。

是否有任何 HIG 或其他 Apple 对此进行讨论？甚至他们自己的应用程序的实现似乎也有所不同。

我使用这两个标签都没有问题，只是希望满足用户对平台的期望。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T17:59:19.390

你是对的'返回'主要用于新行。“完成”用于隐藏键盘并提交表单。

我的建议是选择“完成”来隐藏键盘。您可以从情节提要/笔尖或以编程方式设置它：

```
textField.returnKeyType = UIReturnKeyDone; 
```

和

```
[textField addTarget:self action:@selector(textFieldFinished:) forControlEvents:UIControlEventEditingDidEndOnExit]; 
```

和

```
- (IBAction)textFieldFinished:(id)sender
{
    // [sender resignFirstResponder];
    // submit your form
} 
```

# c++ - WinAPI - 如何打印文本以编辑控件？

> ID：13894628
> 
> 赞同：0
> 
> 时间：2012-12-15T17:47:55.223
> 
> 标签：c++, winapi, mingw, codeblocks

修订版 1：

我无法很好地掌握 WinAPI 的`AllocConsole();`功能。我要么需要选项一，要么需要选项 2。不过最好两者都有:)。提前致谢。这是选项1：

单击 BUTTON_1 时，从 WinAPI 程序创建一个控制台窗口。控制台需要能够输出文本（如`cout`），以及休眠/延迟打印文本。（有点像`Sleep()`）

选项 2：

程序不像选项 1 那样将文本打印到控制台窗口，而是将文本打印到用户无法访问的编辑框。这还需要能够使用诸如`Sleep()`延迟文本打印之类的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T10:37:11.603

我的建议是使用

```
SendMessage(hEditBox,EM_SETSEL,-2,-2); 
```

将插入符号移动到编辑控件中的文本末尾。它为您节省了一个函数调用并且它可以工作。

关于与睡眠相关的部分，我认为最好使用计时器，它应该可以正常工作。

前任。

```
// somewhere in the code where you decide to make changes to the edit control
...
SetTimer(hWnd,TIMER_ID,1000,0);  // TIMER_ID is arbitrary, the delay is set to 1000 ms
...

// main procedure message 
switch (uMsg) {
   ...
   case WM_TIMER:
      SendMessage(hEditBox,EM_SETSEL,-2,-2);
      SendMessage(hEditBox,EM_REPLACESEL,0,buffer);
      KillTimer(hWnds,TIMER_ID);
   ...
} 
```

您可能需要为此做更多的工作，例如重用 SetTimer 调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T18:24:59.183

假设您将字符串附加到编辑控件，也许是为了记录一些冗长过程的 TTY 样式输出：

使用`EM_SETSEL`消息选择最后一个字符之后的范围，然后使用`EM_REPLACESEL`将其替换为要附加的字符串。发生这种情况时，编辑控件会滚动。例如，如果`hEdit`是编辑控件的句柄，以及`str`要附加的以 0 结尾的字符串：

```
int idx=GetWindowTextLength(hEdit);
SendMessage(hEdit,EM_SETSEL,idx,idx);

SendMessage(hEdit,EM_REPLACESEL,0,(LPARAM)str); 
```

这是此知识库文章推荐的过程：http: [//support.microsoft.com/kb/109550](http://support.microsoft.com/kb/109550)

# azure - Azure 云服务项目 - 在调试时禁用自动启动

> ID：13894630
> 
> 赞同：0
> 
> 时间：2012-12-15T17:48:04.143
> 
> 标签：azure, visual-studio-2012, projects-and-solutions

我不知道这是否是一种常见行为，或者我的配置中缺少某些东西，但我在 Visual Studio 2012 中的 Azure 解决方案每次按 F5 时都会启动两个浏览器实例。我认为这与我在“CloudConfiguration”设置中定义的端点数量有关。

PS：在普通的 Web 应用程序项目中，此行为在 Project->Propertes->Web->Start Acton->Dont open a page.... 中定义。这似乎不适用于调试 Azure 项目。

如何禁用自动启动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T19:16:06.667

是 - 打开两个选项卡，因为您定义了两个端点。右键单击 Web 角色并选择属性，然后在配置 >> 启动操作下 - 选择/取消选择要启动的端点：

![端点](../Images/b48f83304199742937b414628dc2d290.png)

# python - python中的图像偏度和峰度

> ID：13894631
> 
> 赞同：7
> 
> 时间：2012-12-15T17:48:04.210
> 
> 标签：python, image

是否有一个 python 包可以为我提供一种方法来确定图像的偏度和峰度？任何例子都会很棒。

非常感谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-11-17T18:06:45.660

我假设您有一张显示某种峰值的图像，并且您对获取该峰值在 x 和 y 方向上的偏度和峰度（可能还有标准偏差和质心）很感兴趣。

我也想知道这个。奇怪的是，我没有发现任何 python 图像分析包都实现了这一点。OpenCV 有一个[矩函数](http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=moments#moments)，我们应该能够从中得到偏度，但是矩只有 3 阶，而我们需要 4 阶才能得到峰度。

为了使事情变得更容易和更快，我认为在 x 和 y 方向上进行图像投影并从这些投影中找到统计数据在数学上等同于使用完整图像找到统计数据。在下面的代码中，我使用了这两种方法，并表明它们对于这个平滑示例是相同的。使用真实的、嘈杂的图像，我发现这两种方法也提供了相同的结果，但前提是您手动将图像数据转换为 float64（它导入为 float 32，并且“数字内容”导致结果略有不同。

下面是一个例子。您应该能够将“image_statistics()”函数剪切并粘贴到您自己的代码中。希望它适用于某人！:)

```
import numpy as np
import matplotlib.pyplot as plt
import time

plt.figure(figsize=(10,10))

ax1 = plt.subplot(221)
ax2 = plt.subplot(222)
ax4 = plt.subplot(224)

#Make some sample data as a sum of two elliptical gaussians:
x = range(200)
y = range(200)

X,Y = np.meshgrid(x,y)

def twoD_gaussian(X,Y,A=1,xo=100,yo=100,sx=20,sy=10):
    return A*np.exp(-(X-xo)**2/(2.*sx**2)-(Y-yo)**2/(2.*sy**2))

Z = twoD_gaussian(X,Y) + twoD_gaussian(X,Y,A=0.4,yo=75)

ax2.imshow(Z) #plot it

#calculate projections along the x and y axes for the plots
yp = np.sum(Z,axis=1)
xp = np.sum(Z,axis=0)

ax1.plot(yp,np.linspace(0,len(yp),len(yp)))
ax4.plot(np.linspace(0,len(xp),len(xp)),xp)

#Here is the business:
def image_statistics(Z):
    #Input: Z, a 2D array, hopefully containing some sort of peak
    #Output: cx,cy,sx,sy,skx,sky,kx,ky
    #cx and cy are the coordinates of the centroid
    #sx and sy are the stardard deviation in the x and y directions
    #skx and sky are the skewness in the x and y directions
    #kx and ky are the Kurtosis in the x and y directions
    #Note: this is not the excess kurtosis. For a normal distribution
    #you expect the kurtosis will be 3.0\. Just subtract 3 to get the
    #excess kurtosis.
    import numpy as np

    h,w = np.shape(Z)

    x = range(w)
    y = range(h)

    #calculate projections along the x and y axes
    yp = np.sum(Z,axis=1)
    xp = np.sum(Z,axis=0)

    #centroid
    cx = np.sum(x*xp)/np.sum(xp)
    cy = np.sum(y*yp)/np.sum(yp)

    #standard deviation
    x2 = (x-cx)**2
    y2 = (y-cy)**2

    sx = np.sqrt( np.sum(x2*xp)/np.sum(xp) )
    sy = np.sqrt( np.sum(y2*yp)/np.sum(yp) )

    #skewness
    x3 = (x-cx)**3
    y3 = (y-cy)**3

    skx = np.sum(xp*x3)/(np.sum(xp) * sx**3)
    sky = np.sum(yp*y3)/(np.sum(yp) * sy**3)

    #Kurtosis
    x4 = (x-cx)**4
    y4 = (y-cy)**4
    kx = np.sum(xp*x4)/(np.sum(xp) * sx**4)
    ky = np.sum(yp*y4)/(np.sum(yp) * sy**4)

    return cx,cy,sx,sy,skx,sky,kx,ky

#We can check that the result is the same if we use the full 2D data array
def image_statistics_2D(Z):
    h,w = np.shape(Z)

    x = range(w)
    y = range(h)

    X,Y = np.meshgrid(x,y)

    #Centroid (mean)
    cx = np.sum(Z*X)/np.sum(Z)
    cy = np.sum(Z*Y)/np.sum(Z)

    ###Standard deviation
    x2 = (range(w) - cx)**2
    y2 = (range(h) - cy)**2

    X2,Y2 = np.meshgrid(x2,y2)

    #Find the variance
    vx = np.sum(Z*X2)/np.sum(Z)
    vy = np.sum(Z*Y2)/np.sum(Z)

    #SD is the sqrt of the variance
    sx,sy = np.sqrt(vx),np.sqrt(vy)

    ###Skewness
    x3 = (range(w) - cx)**3
    y3 = (range(h) - cy)**3

    X3,Y3 = np.meshgrid(x3,y3)

    #Find the thid central moment
    m3x = np.sum(Z*X3)/np.sum(Z)
    m3y = np.sum(Z*Y3)/np.sum(Z)

    #Skewness is the third central moment divided by SD cubed
    skx = m3x/sx**3
    sky = m3y/sy**3

    ###Kurtosis
    x4 = (range(w) - cx)**4
    y4 = (range(h) - cy)**4

    X4,Y4 = np.meshgrid(x4,y4)

    #Find the fourth central moment
    m4x = np.sum(Z*X4)/np.sum(Z)
    m4y = np.sum(Z*Y4)/np.sum(Z)

    #Kurtosis is the fourth central moment divided by SD to the fourth power
    kx = m4x/sx**4
    ky = m4y/sy**4

    return cx,cy,sx,sy,skx,sky,kx,ky

#Calculate the image statistics using the projection method
stats_pr = image_statistics(Z)

#Confirm that they are the same by using a 2D calculation
stats_2d = image_statistics_2D(Z)

names = ('Centroid x','Centroid y','StdDev x','StdDev y','Skewness x','Skewness y','Kurtosis x','Kurtosis y')

print 'Statistis\t1D\t2D'
for name,i1,i2 in zip(names, stats_2d,stats_pr):
    print '%s \t%.2f \t%.2f'%(name, i1,i2)

plt.show() 
```

输出的屏幕截图，只是为了好玩：

![输出截图](../Images/16dbbfcd5cf4fe2c76c05ac356819dd2.png)

还有一件事：根据您对图像所做的确切操作，您可能会考虑使用[ImageJ](http://rsb.info.nih.gov/ij/)进行图像分析——但要小心！[矩插件](http://rsb.info.nih.gov/ij/plugins/moments.html)将让您计算偏度、峰度等。ImageJ 在分析>>设置测量菜单中确实有“偏度”和“峰度”，但我认为这实际上找到了强度直方图的偏度和峰度（我被愚弄了一分钟）。

# javascript - 以秒为单位获取两个日期之间的时间差

> ID：13894632
> 
> 赞同：208
> 
> 时间：2012-12-15T17:48:07.187
> 
> 标签：javascript, date

我试图在几秒钟内得到两个日期之间的差异。逻辑是这样的：

*   设置一个初始日期，即现在；
*   设置一个最终日期，该日期将是初始日期加上未来的一些秒数（例如 15 秒）
*   得到这两者之间的差异（秒数）

我之所以用日期来做这件事，是因为最终日期/时间取决于其他一些变量，而且永远不会相同（这取决于用户做某事的速度），而且我还存储了其他事情的初始日期。

我一直在尝试这样的事情：

```
var _initial = new Date(),
    _initial = _initial.setDate(_initial.getDate()),
    _final = new Date(_initial);
    _final = _final.setDate(_final.getDate() + 15 / 1000 * 60);

var dif = Math.round((_final - _initial) / (1000 * 60)); 
```

问题是我从来没有得到正确的区别。我试过除以`24 * 60`它会让我剩下几秒钟，但我从来没有做对。那么我的逻辑有什么问题？我可能会犯一些愚蠢的错误，因为已经很晚了，但是我无法让它工作让我很困扰:)

* * *

## 回答 #1

> 赞同：411
> 
> 时间：2012-12-15T17:51:56.357

### 编码

```
var startDate = new Date();
// Do your operations
var endDate   = new Date();
var seconds = (endDate.getTime() - startDate.getTime()) / 1000; 
```

或者甚至更简单`(endDate - startDate) / 1000`，如评论中指出的，除非您使用打字稿。

* * *

### 说明

您需要调用对象的`getTime()`方法`Date`，然后简单地将它们减去并除以 1000（因为它最初以毫秒为单位）。另外，当您调用该`getDate()`方法时，实际上您将月份中的日期作为 1 到 31 之间的整数（不是从零开始），而不是从调用该`getTime()`方法获得的纪元时间，表示自*1970 年 1 月 1 日 00:00以来的毫秒数*

* * *

### 咆哮

根据与日期相关的操作，您可能希望投资集成诸如[date.js](http://www.datejs.com/)或[moment.js 之](https://momentjs.com/)类的库，这使开发人员*的工作变得更加容易*，但这只是个人喜好问题。

例如在[moment.js](https://momentjs.com/)中，我们会做`moment1.diff(moment2, "seconds")`的很漂亮。

* * *

### 此答案的有用文档

*   [为什么是 1970 年？](http://en.wikipedia.org/wiki/Unix_time)
*   [日期对象](http://msdn.microsoft.com/en-us/library/ie/cd9w2te4%28v=vs.94%29.aspx)
*   [日期的 getTime 方法](http://msdn.microsoft.com/en-us/library/ie/7hcawkw2%28v=vs.94%29.aspx)
*   [日期的 getDate 方法](http://msdn.microsoft.com/en-us/library/ie/217fw5tk%28v=vs.94%29.aspx)
*   [需要更多的准确性而不仅仅是几秒钟？](https://developer.mozilla.org/en-US/docs/Web/API/Performance/now)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-09-19T15:28:19.983

您可以`new Date().getTime()`用于获取时间戳。然后您可以计算 end 和 start 之间的差异，最后将时间戳转换`ms`为`s`.

```
const start = new Date().getTime();
const end = new Date().getTime();

const diff = end - start;
const seconds = Math.floor(diff / 1000 % 60); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-07-22T11:46:48.753

```
<script type="text/javascript">
var _initial = '2015-05-21T10:17:28.593Z';
var fromTime = new Date(_initial);
var toTime = new Date();

var differenceTravel = toTime.getTime() - fromTime.getTime();
var seconds = Math.floor((differenceTravel) / (1000));
document.write('+ seconds +');
</script> 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2021-01-28T07:05:42.680

准确和快速将在几秒钟内给出输出：

```
 let startDate = new Date()
 let endDate = new Date("yyyy-MM-dd'T'HH:mm:ssZ");
 let seconds = Math.round((endDate.getTime() - startDate.getTime()) / 1000); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-06-27T07:43:03.947

下面的代码将以秒为单位给出时间差。

```
var date1 = new Date(); // current date
var date2 = new Date("06/26/2018"); // mm/dd/yyyy format
var timeDiff = Math.abs(date2.getTime() - date1.getTime()); // in miliseconds
var timeDiffInSecond = Math.ceil(timeDiff / 1000); // in second

alert(timeDiffInSecond ); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-11-02T05:00:44.110

尝试使用高级编程语言的专用函数。JavaScript`.getSeconds();`适合这里：

```
var specifiedTime = new Date("November 02, 2017 06:00:00");
var specifiedTimeSeconds = specifiedTime.getSeconds(); 

var currentTime = new Date();
var currentTimeSeconds = currentTime.getSeconds(); 

alert(specifiedTimeSeconds-currentTimeSeconds); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-05-16T16:48:58.700

使用momentjs从现在到10分钟后的时差

```
let start_time = moment().format('YYYY-MM-DD HH:mm:ss');
let next_time = moment().add(10, 'm').format('YYYY-MM-DD HH:mm:ss');

let diff_milliseconds = Date.parse(next_time) - Date.parse(star_time);
let diff_seconds = diff_milliseconds * 1000; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-01-12T04:03:24.140

使用 new Date() 定义两个日期。使用 date2 计算两个日期的时间差。getTime() - 日期 1。获取时间（）；计算编号。两个日期之间的天数，将两个日期的时间差除以 no。一天中的毫秒数 (1000 *60* 60*24)

# php - 如何通过 ssh shell 使用 phpseclib 发送 F1、F2、F3... 按键

> ID：13894638
> 
> 赞同：2
> 
> 时间：2012-12-15T17:48:37.780
> 
> 标签：php, ssh, phpseclib

```
$ssh = new Net_SSH2($address, $port);
if (!$ssh->login($user, $pass)) {
    exit('Login Failed');
}

echo "<pre>";

$ssh->setTimeout(5);
echo $ssh->read();
$ssh->write($app_name);
$ssh->write("\n \n \n b");
$ssh->write($f_one); // This is where I need to hit F1
echo $ssh->read(); 
```

我搜索并发现 chr() 可能是我的解决方案，但功能键的十进制字符代码包含一个逗号（是一对：00,59），它 chr() 拆分为单独的参数并失败。

这是我找到十进制对的地方，如果它是正确的。 [http://www.jimprice.com/jim-asc.shtml#keycodes](http://www.jimprice.com/jim-asc.shtml#keycodes)

在此线程中的帖子之后。 [http://www.velocityreviews.com/forums/t277457-re-ascii-code-for-functions-keys-f1-f12-and-tab-key.html](http://www.velocityreviews.com/forums/t277457-re-ascii-code-for-functions-keys-f1-f12-and-tab-key.html)

任何帮助或正确方向的观点将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T17:59:08.903

您正在查看的关键代码列表正在谈论键盘扫描代码，这是完全不同且不相关的东西。

功能键的 VT100 序列很复杂。F1 到 F4 通常发送为：

```
F1: \x1bOP
F2: \x1bOQ
F3: \x1bOR
F4: \x1bOS 
```

但是，此模式不适**用于**后续功能键。如需更完整的列表，请参阅[http://rtfm.etla.org/xterm/ctlseq.html](http://rtfm.etla.org/xterm/ctlseq.html)（搜索“12 个功能键”，注意`CSI`表示序列`\x1b[`。）

# python - 数值求解积分极限？

> ID：13894643
> 
> 赞同：4
> 
> 时间：2012-12-15T17:49:03.477
> 
> 标签：python, matlab, integration, area, curve

我试图在两个函数的曲线下定位一个区域，使该区域的面积等于给定的数字`m`。例如，通过整合这两个功能：

```
f(x) = 3x - 3x^2
g(x) = x 
```

象征性地从 a 到 b，并将每个等同于 m（例如 m=1/3）。可以求解系统以找到 a 和 b 的值：

```
1.5 b^2 - b^3 - 1.5 a^2 + a^3 = 1/3
0.5 b^2 - 0.5 a^2 = 1/3 
```

我得到的积极解决方案大约是：`a = 0.364823, b = 0.894294`

现在，我的问题是：如果将 f 和 g 作为向量（或 python 中的数组）而不是符号函数提供给我，我如何找到 a 和 b？我知道如何使用`trapz()`来查找向量的区域，但我不知道是否有办法使用它来以数字方式查找`a`和`b`解决上述问题。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T18:22:18.170

你可以试试[同情](http://docs.sympy.org/0.7.1/index.html)

```
>>> from sympy import *
>>> x,a,b = symbols('x a b')
>>> fx = "3*x - 3*x**3"
>>> gx = "x"
>>> m = 1/3
>>> int_fx = integrate(fx, (x,a,b))
3*a**4/4 - 3*a**2/2 - 3*b**4/4 + 3*b**2/2
>>> int_gx = integrate(gx, (x,a,b))
-a**2/2 + b**2/2
>>> solve([Eq(int_fx, m), Eq(int_gx, m)],(a, b))
[(-0.577350269189626, -1.00000000000000), (-0.577350269189626, 1.00000000000000), (0.577350269189626, -1.00000000000000), (0.577350269189626, 1.00000000000000)] 
```

顺便说一句，我很难理解你是如何设法得到一个明确的积分解决方案的

```
1.5 b^2 - b^3 - 1.5 a^2 + a^3 = 1/3 
```

为了

```
f(x) = 3x - 3x^3 
```

内

```
[a,b] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T18:05:36.117

我认为您需要查看积分方程：例如[Numerical Recipes](http://www.mpi-hd.mpg.de/astrophysik/HEA/internal/Numerical_Recipes/f18-0.pdf)和[SO](https://mathematica.stackexchange.com/questions/4677/solving-a-volterra-integral-equation-numerically)。

# javascript - DOM 节点和 instanceof 遇到问题

> ID：13894644
> 
> 赞同：2
> 
> 时间：2012-12-15T17:49:03.897
> 
> 标签：javascript, dom

好的，我有一个像这样走树的小功能：

```
function walkTree(node, func, args) {
    func(node, args);
    node = node.firstChild;
    while (node) {
        walkTree(node, func, args);
        node = node.nextSibling;
    }
} 
```

另一个函数只会拾取文本节点，如下所示：

```
function selectTextNodes(node, nodes) {
    if (node instanceof Text) {
        nodes.push(node);
    }
} 
```

最后，同时使用：

```
texts = [];
walkTree(body, selectTextNodes, texts); 
```

但是，它根本没有填满列表！

如果我要修改测试以使用`Node.nodeType`它会起作用：

```
function selectTextNodes(node, nodes) {
    if (node.nodeType == Node.TEXT_NODE) {
        nodes.push(node);
    }
} 
```

另一方面，在控制台中它可以双向工作：

```
t = window.document.createTextNode("test");
r = (t.nodeType == Node.TEXT_NODE) && (t instanceof Text); 
```

也就是说，r 为真。

请注意，所有函数都嵌套在另一个接收`body`变量的函数中。就我而言，这是`contentDocument.body`一个`iframe`. 没有应用 x 域限制。

知道发生了什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-15T19:20:02.180

不同的窗口有不同`Text`的界面。因此，如果您的 iframe 文档中有一个 DOM 节点，那么它不是. `instanceof window.Text`，而是`instanceof iframe.contentWindow.Text`. Afaik，`Text`接口作为 Javascript 对象的可用性也是非标准的。

这就是为什么你应该检查`nodeType`元素的原因。但请注意（旧版？）IE 不支持`TEXT_NODE`常量 on `Node`，因此您需要与 比较`3`或将该值作为 polyfill 分配给`Node.TEXT_NODE`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T18:25:44.583

# 主要文件

```
<body>
  <iframe name="ifr" id="ifr" src='test1.html'></iframe>
  <button onclick="clkfn()">test</button>

  <script>

    function wrapper(body, iframeWindow) {
      function walkTree(node, func, args) {
        func(node, args);
        node = node.firstChild;
        while (node) {
            walkTree(node, func, args);
            node = node.nextSibling;
        }
      }

      function selectTextNodes(node, nodes) {
          if (node instanceof iframeWindow.Text) {
              nodes.push(node);
          }
      }    

      texts = [];
      walkTree(body, selectTextNodes, texts);

      for (var i = 0; i < texts.length; i++) {    
        console.log("text #" + i + texts[i].nodeValue);
      }
    }

    function clkfn() {
      var ifr = frames["ifr"];
      wrapper(ifr.document.body, ifr);
    }

  </script>

</body> 
```

# iFrame

```
<!doctype html>
<html>
    <head>
    </head>
    <body>
      how are you?
      I am fine. Thank you!
    </body>
</html> 
```

# 安慰

当您单击按钮时，控制台会打印：

> ```
>  text #0  
>         how are you?  
>         I am fine. Thank you! 
> ```

只有对代码所做的更改才会传递给 iframe 主体和窗口。然后从 iFrame 窗口引用 Text 对象。

# android - 选择项目后如何关闭/取消/关闭微调器？

> ID：13894648
> 
> 赞同：0
> 
> 时间：2012-12-15T17:49:28.047
> 
> 标签：android

当我选择一个选项时，它会打开一个活动，但是当我完成该活动并返回微调器活动时，微调器仍处于打开状态。

选择项目后如何立即关闭它？

```
sp.setOnItemSelectedListener(new OnItemSelectedListener() {
            boolean firstPop =true;
            @Override
            public void onItemSelected(AdapterView<?> arg0, View arg1,
                    int pos, long arg3) {
                if (!firstPop) {

                    doMyLogic();
                    sp.????
                }
                firstPop = false;

            } 
```

**编辑**完整代码

```
public void showDropDownDialogue() {

        String[] s = getResources().getStringArray(R.array.cities);
        final ArrayAdapter<String> adp = new ArrayAdapter<String>(
                MainActivity.this, android.R.layout.simple_spinner_item, s);

        final Spinner sp = new Spinner(MainActivity.this);
        sp.setPadding(5, 5, 5, 5);
        sp.setLayoutParams(new LinearLayout.LayoutParams(
                LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
        sp.setAdapter(adp);

        sp.setOnItemSelectedListener(new OnItemSelectedListener() {
            boolean firstPop =true;

            @Override
            public void onItemSelected(AdapterView<?> arg0, View arg1,
                    int pos, long arg3) {
                if (!firstPop) {
                    editor.putInt("city_id", pos);
                    editor.commit();
                    Intent stationsIntent = new Intent(MainActivity.this,
                    StationsActivity.class);
                    startActivity(stationsIntent);

                }
                firstPop = false;

            }

            @Override
            public void onNothingSelected(AdapterView<?> arg0) {
                // TODO Auto-generated method stub

            }
        });
        AlertDialog.Builder builder = new AlertDialog.Builder(MainActivity.this);
        builder.setView(sp);
        builder.create().show();

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T18:10:56.143

它是需要关闭的对话框而不是微调器。所以将 AlertDialog 声明为一个字段

并更改对话框显示如下。

```
builder.setView(sp);
dialog = builder.create();
dialog.show(); 
```

并在 onItemSelected 添加

```
dialog.dismiss(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T17:53:37.037

您想实现 OnItemSelectedListener 并覆盖 onItemSelected 方法获取微调器的选定事件，它将关闭，您不需要以编程方式关闭

你不用担心，它会自动关闭。

# java - 车牌厂

> ID：13894650
> 
> 赞同：1
> 
> 时间：2012-12-15T17:49:30.373
> 
> 标签：java

我在我的 Java 类中使用程序的概念有问题，它应该相对简单，但我觉得很难。

“编写一个生成车牌的类LicensePlateFactory。提供一个方法getNextPlate，它返回一个唯一的车牌号（一个int）。对LicencePlateFactory创建的所有车牌使用序号，从100001开始。

编写一个程序，创建一个 LicensePlateFactory，然后从中获取并显示十几个连续的车牌。”

我的代码（看起来很糟糕，盯着问题看了半天不知道该怎么办）：工厂：

```
public class LicensePlateFactory 
{
    private int k = 100001;
    private int count;

    public LicensePlateFactory(int x)
    {
          this.count++;
    }

    public static void main(String[] args)
    {
    getnextPlate();
    }

    public int getnextPlate()
    {   
    return k + count;

    }
} 
```

创建工厂的程序：

```
public class LicensePlateFactoryRunner 
{

    private LicensePlateFactory fac;
    public LicensePlateFactoryRunner()
    {
        for (int x = 1; x < 13; x++)
        {
        LicensePlateFactory fac = new LicensePlateFactory();
                    System.out.println(LicensePlateFactory.getnextPlate());
        }
    }
} 
```

也许我忘记了一些基本的java概念？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T18:29:32.040

您的代码将显示相同的车牌 12 次。原因是因为您正在`LicensePlateFactory`为循环的每次迭代创建一个新的。您应该做的是将工厂的创建移到循环之外。

此外，这是一个小问题，但通常循环从 0 开始，除非你有很好的理由不这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T18:29:44.470

这里有一些提示：

1.  创建`PlateFactory`具有一个字段的类：最后使用的车牌号和一个方法：`getNextPlate()`返回一个`Plate`
2.  引入一个`Plate`带有一个字段的对象：车牌号，因为这个对象不能在不使用工厂的情况下被实例化（假设），它应该没有公共构造函数。我们还可以假设车牌号不能更改（最终字段，无二传手）。
3.  为您的方法创建一个`App`类，`main()`并在此方法中创建`PlateFactory`实例，然后使用此实例 12 次以创建 12 个`Plate`（编号为 100001、100002 ......但工厂处理）。

一些阅读：

*   [http://en.wikipedia.org/wiki/Factory_method_pattern#Java_3](http://en.wikipedia.org/wiki/Factory_method_pattern#Java_3)

# objective-c - EXC_BAD_ACCESS (code=2, address=0x20) 即使当 NSZombieEnabled

> ID：13894653
> 
> 赞同：2
> 
> 时间：2012-12-15T17:49:53.430
> 
> 标签：objective-c, ios, xcode4.5, lldb

我的应用程序出现 EXC_BAD_ACCESS 崩溃，我在可执行方案上启用了 NSZombie 以进行调试。即使启用了 NSZombie，我仍然会遇到此崩溃。主要嫌疑人是导致此错误的线程（不是主线程）。我在我的代码中做一些 kvo 的东西。它似乎来自它。我找不到导致问题的地方。这是线程的回溯。谁能告诉我如何确定问题？任何线索或调试技巧将不胜感激。

**更新**：我尝试运行分析器，但程序在分析器上运行时刚刚停止并自行关闭。没有消息什么都没有……只是默默地关闭，录音停止了。我不太擅长看分析仪，但谁能告诉我在哪里看？

```
* thread #9: tid = 0x2803, 0x00cfdb3e Foundation`__block_global_4 + 420, stop reason = EXC_BAD_ACCESS (code=2, address=0x20)
    frame #0: 0x00cfdb3e Foundation`__block_global_4 + 420
    frame #1: 0x00c5b9d7 Foundation`-[NSObject(NSKeyValueObservingPrivate) _changeValueForKey:key:key:usingBlock:] + 675
    frame #2: 0x00c5b72e Foundation`-[NSObject(NSKeyValueObservingPrivate) _changeValueForKey:usingBlock:] + 63
    frame #3: 0x00cfd994 Foundation`____NSOQDelayedAttachPendingOperations_block_invoke_0 + 98
    frame #4: 0x00c5b9d7 Foundation`-[NSObject(NSKeyValueObservingPrivate) _changeValueForKey:key:key:usingBlock:] + 675
    frame #5: 0x00c5b72e Foundation`-[NSObject(NSKeyValueObservingPrivate) _changeValueForKey:usingBlock:] + 63
    frame #6: 0x00c84e7b Foundation`__NSOQDelayedAttachPendingOperations + 156
    frame #7: 0x01615014 libdispatch.dylib`_dispatch_client_callout + 14
    frame #8: 0x01604fd6 libdispatch.dylib`_dispatch_after_timer_callback + 28
    frame #9: 0x01615014 libdispatch.dylib`_dispatch_client_callout + 14
    frame #10: 0x0160c8b7 libdispatch.dylib`_dispatch_source_latch_and_call + 219
    frame #11: 0x01608405 libdispatch.dylib`_dispatch_source_invoke + 322
    frame #12: 0x01606280 libdispatch.dylib`_dispatch_root_queue_drain + 231
    frame #13: 0x01606450 libdispatch.dylib`_dispatch_worker_thread2 + 39
    frame #14: 0x995eee12 libsystem_c.dylib`_pthread_wqthread + 441 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-06T01:12:30.407

跨线程使用 KVO 真的非常危险。在这种情况下，看起来您正在修改线程 #9 中的值，这会触发那里的 KVO 消息。然而，如果你的观察者依赖于在主线程中（例如，它对用户界面做任何事情，或者它没有保护它访问的任何数据），你的应用程序将会崩溃。

您是否一次一行地浏览应用程序以查看哪一行导致崩溃？

# python - 是否可以在 Windows 8 上安装 Pywin32？

> ID：13894654
> 
> 赞同：1
> 
> 时间：2012-12-15T17:49:57.440
> 
> 标签：python, windows, windows-8, python-2.7, pywin32

我已经尝试过很多次，但我认为无法在 Windows 8 上安装 pywin32。我总是遇到同样的错误。

```
Traceback (most recent call last):
File "<string>", line 612, in <module>
File "<string>", line 322, in install
File "<string>", line 160, in LoadSystemModule
ImportError: DLL load failed: The specified module could not be found. 
```

我在任何其他 Windows 版本上安装它都没有问题。

可能吗 ？有没有人让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T18:43:15.893

它给了我一个错误，但可以使用 pywin32-214.win32-py2.6 版本。谢谢。

# c - Valgrind 的缓存研磨是否受多线程代码的影响？

> ID：13894656
> 
> 赞同：5
> 
> 时间：2012-12-15T17:50:05.207
> 
> 标签：c, profiling, valgrind

如果我运行 Valgrind cachegrind，一个或多个线程的结果会不同吗？还是 Valgrind 只是对程序进行顺序化，只报告一个线程的工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T17:51:51.160

Valgrind以不确定的方式序列化*所有线程并分析顺序代码流。*您将收到有关所有代码的结果，但结果可能不代表相同代码的实际生产运行。（例如，许多与并发相关的错误不会在 Valgrind 下运行的程序中出现。）

# django-models - 数据库设计 ManyToMany、OneToMany、ManyToOne、Django 模型

> ID：13894663
> 
> 赞同：7
> 
> 时间：2012-12-15T17:51:16.390
> 
> 标签：django-models, database-schema

对于具有特定关系的 Django 应用程序的数据库设计，我感到很困惑。我一直在查看以下数据库架构：[http ://www.databaseanswers.org/data%5Fmodels/customers_and_orders/index.htm](http://www.databaseanswers.org/data%5Fmodels/customers_and_orders/index.htm)

我对 Customer_addresses 和客户以及地址之间的关系感到困惑。

我知道：

*   一个客户可以有多个地址。
*   许多客户可以拥有相同的（一个）地址

这是否等同于多对多关系？

*   很多客户可以有很多地址？

当我在 django 中构建模型时，我有（简化）：

```
class Customer_Address(models.Model):
    customer = models.ManyToManyField('inventory.Customer')
    address = models.ManyToManyField('inventory.Address') 
```

这是正确的吗？或者这更有意义：

```
class Customer_Address(models.Model):
    customer = models.ForeignKeyField('inventory.Customer')
    address = models.ManyToManyField('inventory.Address') 
```

更新的问题：

基于它是多对多关系的想法。一个多对多关系是否需要两个多对多字段？

基于以下内容： [http ://en.wikipedia.org/wiki/Many-to-many_%28data_model%29](http://en.wikipedia.org/wiki/Many-to-many_%28data_model%29)

由于 Django 支持 ManyToManyFields，我什至不需要联结表吗？如果我确实使用联结表（Customer_addresses），这篇文章似乎暗示使用两个 OneToMany 关系，这不就是像这样的两个外键吗？

```
class Customer_Address(models.Model):
    customer = models.ForeignKeyField('inventory.Customer')
    address = models.ForgeinKeyField('inventory.Address') 
```

更新的问题：

现在我们知道 Django 构建了中间表，并且不需要 Customer_Addresses 表。哪个表应该有 ManyToManyfield？客户表？或地址表？

示例：[https ://docs.djangoproject.com/en/dev/topics/db/models/#intermediary-manytomany](https://docs.djangoproject.com/en/dev/topics/db/models/#intermediary-manytomany)

在 Person/Groups 示例中.. Groups 具有 ManyToManyField。是否有任何原因无法在 Person 表中定义 ManyToManyfield？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-15T18:55:58.313

## 总结一下

**对于第一个问题。**

当关系表明

*   一个客户可以有多个地址。

*   许多客户可以拥有相同的（一个）地址

比它显然是多对多关系并且总是使用**ManyToManyField**

**现在来说第二个问题。**

如果你想要一个中间表，它在两个多对多实体（表/模型）之间有额外的字段怎么办？

比创建一个具有其他两个模型的 ForiegnKey 的新模型。如在

```
class Person(models.Model):
    name = models.CharField(max_length=128)

    def __unicode__(self):
        return self.name

class Group(models.Model):
    name = models.CharField(max_length=128)
    members = models.ManyToManyField(Person, through='Membership')

    def __unicode__(self):
        return self.name

class Membership(models.Model):
    person = models.ForeignKey(Person)
    group = models.ForeignKey(Group)
    date_joined = models.DateField()
    invite_reason = models.CharField(max_length=64) 
```

更多[阅读](https://docs.djangoproject.com/en/dev/topics/db/models/#intermediary-manytomany)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-04T20:36:39.980

看来我没有足够的积分来回复评论。所以，回答你[上面](https://stackoverflow.com/questions/13894663/database-design-manytomany-onetomany-manytoone-django-model#comment19145276_13895159)的问题：实际上没有区别。如[Django 文档中的示例所示](https://docs.djangoproject.com/en/1.5/topics/db/models/#extra-fields-on-many-to-many-relationships)，您可以查询 Person 所属的 Groups 集以及属于 Group 的 Persons 集：

```
>>> ringo = Person.objects.create(name="Ringo Starr")
>>> paul = Person.objects.create(name="Paul McCartney")
>>> beatles = Group.objects.create(name="The Beatles")
>>> m1 = Membership(person=ringo, group=beatles,
...     date_joined=date(1962, 8, 16),
...     invite_reason= "Needed a new drummer.")
>>> m1.save()
>>> beatles.members.all() # Get all Persons of a Group here
[<Person: Ringo Starr>]
>>> ringo.group_set.all() # Get all Groups for a Person here
[<Group: The Beatles>]
>>> m2 = Membership.objects.create(person=paul, group=beatles,
...     date_joined=date(1960, 8, 1),
...     invite_reason= "Wanted to form a band.")
>>> beatles.members.all()
[<Person: Ringo Starr>, <Person: Paul McCartney>] 
```

# sdk - Corona SDK：如何使物体移动

> ID：13894669
> 
> 赞同：0
> 
> 时间：2012-12-15T17:51:53.493
> 
> 标签：sdk, lua, coronasdk

我正在开发一个游戏，其中我有一个角色，我想在触摸屏幕时在 x 轴上移动。我已经做到了，但是我希望对象在触摸屏幕时继续移动，而不仅仅是移动一次。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T18:50:09.730

Corona SDK 中的触摸事件仅在发生变化时发生，例如触摸开始、结束或检测到手指移动时。如果您想在按住按钮的同时进行某些操作，则需要一个“enterFrame”事件。

```
local buttonPressed = false

local function moveCharacter(event)
    if buttonPressed then
        character.x = characterx + 1
    end
end

local function buttonPressed(event)
     if event.phase == "began" then
          buttonPressed = true
     elseif event.phase == "ended" then
          buttonPressed = false
     end
     return true
 end

 local myButton = display.newRect(0,0,64,48)
 myButton:addEventListenr("touch", buttonPressed)

 Runtime:addEventListener("enterFrame", moveCharacter) 
```

在这种情况下，enterFrame 侦听器将在看到按钮的状态为被按下时移动角色。现在您可能不想将角色每秒移动一个像素 30 次，因此您需要计算出移动它的分数像素数。然后，您的 buttonPressed 将成为打开标志以使移动功能起作用的一种方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T19:36:20.523

您可以在 Runtime 对象上使用触摸侦听器：

```
Runtime:addEventListener("touch", buttonPressed) 
```

或者创建一个覆盖整个屏幕的隐形按钮。

# twitter-bootstrap - 我可以更改引导工具提示的标题而不隐藏它吗？

> ID：13894674
> 
> 赞同：4
> 
> 时间：2012-12-15T17:52:48.580
> 
> 标签：twitter-bootstrap, tooltip

我希望工具提示显示时间。为此，我每隔几秒钟更新一次，但每次都更改标题。

```
$(".track a").tooltip('hide');
$(".track a").data('tooltip').options.title = time;
$(".track a").tooltip('show'); 
```

这有效，但工具提示闪烁但没有隐藏和显示工具提示不会更新。有没有办法在不隐藏和显示的情况下更新工具提示？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T19:09:42.037

好的，问题出在其他地方。

无论如何，现在我使用这个，因为这会改变所有需要工具提示的组件，而上面的那个只改变一个组件。

```
$(".track a").tooltip('hide')
  .attr('data-original-title', time)
      .tooltip('fixTitle')
      .tooltip('show'); 
```

初始化工具提示时，您必须将动画设置为 false：

```
$(".track a").tooltip({
      'animation' : false
}); 
```

# php - 在我的网站上显示来自外部网站的某些 div

> ID：13894679
> 
> 赞同：0
> 
> 时间：2012-12-15T17:53:46.243
> 
> 标签：php, javascript, jquery, html, dom

我正在制作一个网站，我想自己无缝地显示外部网站的一部分。例如某个 div 元素。我知道由于相同的原产地政策，这并不简单。有没有办法绕过这个？例如将网站转储到本地文件然后加载它？还是截取网站部分并链接到图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T17:55:34.347

你可以这样做

```
<?php
   $url = "http://www.bla.com";
   $page_all = file_get_contents($url); 

   preg_match('#<div class="hola">(.*)</div>#ms', $page_all, $div_array);

   echo "<pre>";
   print_r($div_array[0]);
   echo "</pre>";
?> 
```

**注意**php 解决方案需要**启用**`allow_url_fopen`选项谢谢@shiplu.mokadd.im

 **或者通过ajax

```
$.ajax({
  url: 'http://bla.com',
  type: 'GET',
  success: function(res) {
  var divcontent= $(res.responseText).find('#div_name').html();
    $('#blabla').html(divcontent);
  }
}); 
```**

# asp.net-web-api - Asp.Net Web API，Unity容器，会话之间的对象会发生什么？

> ID：13894680
> 
> 赞同：0
> 
> 时间：2012-12-15T17:53:56.640
> 
> 标签：asp.net-web-api, unity-container

抱歉标题，如果你有更好的，请随时更新。

基本上，我正在使用 ASP.Net Web API 编写一个 Web api。我已经像这样配置了一个 Unity 容器：

```
string xmlFilePath = "some/path"

var unity = new UnityContainer();
unity.RegisterType<PlayerController>();
unity.RegisterType<IRepository, XmlRepository>(
    new ContainerControlledLifetimeManager(),
    new InjectionConstructor(xmlFilePath));
config.DependencyResolver = new IoCContainer(unity); 
```

XmlRepository 中有一些对象代表 xml 文件的状态，还有一个计时器，每 60 秒将状态写入 xml 文件。这是为了避免每次状态更改时都必须重写 xml 文件，同时将可能丢失的状态更改的最大时间限制为 60 秒。

我的问题是这个.. 统一容器创建了一个 XmlRepository 的单例，我的 Web api 在每次调用时都可以使用它。但是，调用之间的对象会发生什么？它是在某个地方以某种序列化的形式出现，还是保持原来的形式，所以我的计时器将继续工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T17:55:19.200

单例对象留在内存中。在您的情况下，它将由 Unity 容器管理。它不会被序列化，如果您在其上启动了一些计时器，它们将继续工作......直到 IIS 决定回收您的 AppDomain。现在去阅读[*在 ASP.NET 中实现重复后台任务的危险*](http://haacked.com/archive/2011/10/16/the-dangers-of-implementing-recurring-background-tasks-in-asp-net.aspx)

# c# - 正则表达式：在仍捕获数据的同时进行后视的性能？

> ID：13894684
> 
> 赞同：2
> 
> 时间：2012-12-15T17:54:48.683
> 
> 标签：c#, regex, regex-lookarounds

在我的 C# 项目中，我正在解析日期的文本。日期可以有多种格式，目的是找出并纠正一些日期格式错误。各种日期格式意味着一组定义的日期格式是不可行的。最初，我将一组大约 10 个正则表达式一个一个地应用于输入字符串。这在功能上很好，但是当字符串达到 200 KB 的文本时，性能就成了问题，因为该函数需要大约 150 毫秒。

我发现我可以通过将日期正则表达式仅应用于日期子字符串来显着提高性能。因此，如果所有日期都必须具有英文月份名称，则使用正则表达式

```
\b(January|February|March|April|May|June|July|August|September|October|November|December)\b 
```

会找到他们。如果我然后做一些子字符串来匹配一个月左右的文本，整体功能性能大约是 25 毫秒，好多了。但是，子字符串/循环、长度检查代码不整洁，感觉不是一个很好的解决方案。我真正想要的是一个正则表达式来匹配月份和它周围的文本，比如

```
.{0,25}\b(January|February|March|April|May|June|July|August|September|October|November|December)\b.{0,25} 
```

在功能上很好。然而，这个正则表达式的性能大约需要 3500 毫秒才能在相同的长输入字符串上找到匹配项。

现在类似的正则表达式

```
(?<=.{0,25})\b(January|February|March|April|May|June|July|August|September|October|November|December)\b.{0,25} 
```

积极的后视在大约 15 毫秒内找到匹配项（由于非常减少的回溯，我接受并有所了解的原因）。但是，这对我的使用不起作用，因为我需要将月份名称前后的文本包含在匹配结果中。

所以，我的问题是，我可以有一个正则表达式，它具有使用后视的性能，但具有在匹配结果中提供所有文本的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T10:20:17.937

性能增益是一种错觉。通常，类似的事情`.{0,25}`会导致很多回溯，这解释了您所看到的性能不佳。然而，当放置在一个look-behind中时，它会停止贪婪和回溯，look-behind将寻找最小的可能匹配，这意味着将尝试**0个字符，没有回溯。**这意味着后视完全没有用，因为它总是匹配月份名称之前的零个字符。

如果使用匹配的位置在月份名称上找到匹配后提取上下文怎么办？对于每个[`match`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.match%28v=vs.80%29.aspx)in ，在这些位置之前和之后`regex.Matches(str)`获取[`match.Index`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.capture.index.aspx)和和子字符串。[`match.Length`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.capture.length.aspx)

# r - 在 R 中逐行处理纵向数据的困难

> ID：13894686
> 
> 赞同：3
> 
> 时间：2012-12-15T17:54:54.547
> 
> 标签：r

我在处理纵向数据时遇到了一些麻烦：我的数据集每行包含一个唯一 ID，然后是一系列访问日期。每次访问都有 3 个二分变量的值。

```
data1 <- structure(list(V1date = structure(c(2L, 1L, 2L, 3L, 4L), .Label = c("1/22/12", "4/5/12", "8/18/12", "9/6/12"), class = "factor"), 
V1a = structure(c(1L, 1L, 2L, 1L, 2L), .Label = c("No", "Yes"), class = "factor"), 
V1b = structure(c(2L, 1L, 1L, 1L, 1L), .Label = c("No", "Yes"), class = "factor"), 
V1c = structure(c(1L, 2L, 1L, 1L, 1L), .Label = c("No", "Yes"), class = "factor"), 
V2date = structure(c(1L, 2L, 4L, 3L, NA), .Label = c("6/18/12", "7/5/12", "9/22/12", "9/4/12"), class = "factor"), 
V2a = structure(c(1L, 1L, 1L, 1L, NA), .Label = "Yes", class = "factor"), 
V2b = structure(c(1L, 1L, 1L, 1L, NA), .Label = "No", class = "factor"), 
V2c = structure(c(1L, 1L, 1L, 1L, NA), .Label = "Yes", class = "factor"), 
V3date = structure(c(NA, NA, 1L, NA, 2L), .Label = c("11/1/12", "12/4/12"), class = "factor"), 
V3a = structure(c(NA, NA, 1L, NA, 1L), .Label = "Yes", class = "factor"), 
V3b = structure(c(NA, NA, 1L, NA, 1L), .Label = "No", class = "factor"), 
V3c = structure(c(NA, NA, 2L, NA, 1L), .Label = c("No", "Yes"), class = "factor")),
 .Names = c("V1date", "V1a", "V1b", "V1c", "V2date", "V2a", "V2b", "V2c", "V3date", "V3a", "V3b", "V3c"), 
class = "data.frame", row.names = c("001",  "002", "003", "004", "005"))

data1    
     V1date V1a V1b V1c  V2date  V2a  V2b  V2c  V3date  V3a  V3b  V3c
001  4/5/12  No Yes  No 6/18/12  Yes   No  Yes    <NA> <NA> <NA> <NA>
002 1/22/12  No  No Yes  7/5/12  Yes   No  Yes    <NA> <NA> <NA> <NA>
003  4/5/12 Yes  No  No  9/4/12  Yes   No  Yes 11/1/12  Yes   No  Yes
004 8/18/12  No  No  No 9/22/12  Yes   No  Yes    <NA> <NA> <NA> <NA>
005  9/6/12 Yes  No  No    <NA> <NA> <NA> <NA> 12/4/12  Yes   No   No 
```

在三个变量的 8 种不同可能组合中，4 个是“异常”，其余 4 个是“正常”。每个人都从异常开始，然后在随后的访问中继续异常，或者在以后的访问中解决为正常模式（我忽略恢复异常-一旦它们正常，它们就是正常的）

我最终必须在数据框的右侧添加 4 个新列，指示 1）上次完成访问的日期（无论干预“NAs”，2）ID 最终解决还是保持异常，3）如果解决，决议模式是什么，4）决议日期是什么。NA 总是以 4 个为一组（即没有访问日期，并且 3 个变量没有值）并且被忽略。

例如，如果模式“yes-yes-no”、“yes-no-yes”、“no-yes-yes”和“yes-yes-yes”都是正常的，而其余模式都是正常的，则结果将是以下四个附加列；

```
data2 <- structure(list(
LastVisDate = structure(c(3L, 2L, 3L, 3L, 2L), .Label = c("6/18/12", "12/4/12", "11/1/12", "9/22/12"), class = "factor"), 
Resolved = structure(c(2L, 2L, 2L, 2L, 1L), .Label = c("No", "Yes"), class = "factor"), 
Pattern = structure(c(1L, 1L, 1L, 1L, NA), .Label = "yny", class = "factor"), 
Resdate = structure(c(1L, 2L, 3L, 4L, NA), .Label = c("6/18/12", "7/5/12", "9/4/12", "9/22/12"), class = "factor")),
.Names = c("LastVisDate", "Resolved", "Pattern", "Resdate"),   
class = "data.frame", row.names = c("001",  "002", "003", "004", "005"))

data2
    LastVisDate Resolved Pattern Resdate
001     11/1/12      Yes     yny 6/18/12
002     12/4/12      Yes     yny  7/5/12
003     11/1/12      Yes     yny  9/4/12
004     11/1/12      Yes     yny 9/22/12
005     12/4/12       No    <NA>    <NA> 
```

我在这个项目上花了很多时间，但是在满足我的停止规则之前，我无法弄清楚如何让 R 向右行进穿过数据集。建议非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T01:42:58.960

这取决于数据的结构。特别是，从第 2、6 和 10 列开始的三个值被传递给确定某人是否“正常”的函数。

这是一个确定某人是否“正常”的函数。还有其他方法可以写这个。

```
is.normal <- function(x) {
  any(c(
    all(x == c("Yes", "Yes", "No")),
    all(x == c("Yes", "No", "Yes")),
    all(x == c("No", "Yes", "Yes")),
    all(x == c("Yes", "Yes", "Yes"))
  ))
} 
```

我们使用它，应用于适当的列集。这取决于您在问题中指定的确切布局。注意传递给 vapply 的列号。这里的结果是一个逻辑矩阵，在每一步都告诉某人是否“正常”。

```
ok <- vapply(c(2,6,10),
         function(x) apply(data1[x:(x+2)], 1, is.normal ),
         logical(length(data1[,1])))

> ok
     [,1] [,2]  [,3]
001 FALSE TRUE    NA
002 FALSE TRUE    NA
003 FALSE TRUE  TRUE
004 FALSE TRUE    NA
005 FALSE   NA FALSE 
```

现在找出每个人第一次变成“正常”的时间，如果有的话。通过检查，除了最后一个仍然异常的人之外，每个人都是 2。`if`用于防止在未达到正常状态时`Inf`返回值。`min`

```
date.ind <- apply(ok, 1,
              function(x) {
                y <- which(x)
                if (length(y)) min(y) else NA
              }
)

> date.ind
001 002 003 004 005 
  2   2   2   2  NA 
```

然后我们可以提取日期，从上面知道“组”，以及如何到达实现正常的实际日期列：

```
dates <- vapply(seq_along(date.ind), 
                function(x) if (is.na(date.ind[x])) as.character(NA) else as.character(data1[x,date.ind[x]*4-3]),
                character(1)
                )
> dates
[1] "6/18/12" "7/5/12"  "9/4/12"  "9/22/12" NA 
```

提取其他信息是类似的，因为列索引可以如上计算。

# google-apps-script - 使用 Google Apps 脚本从 FTP 服务器获取图像

> ID：13894694
> 
> 赞同：2
> 
> 时间：2012-12-15T17:55:54.550
> 
> 标签：google-apps-script

我需要使用 Google Apps 脚本获取一些存储在 FTP 服务器中的图像

图像只能通过 FTP 访问，因为

```
ftp://user:password@ftpsite.com/path2photos/photo123.jpg 
```

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T06:22:48.110

无法从 Google Apps 脚本发出出站 FTP 请求（App Engine 也有类似的限制）。

您可以选择找到服务器的 HTTP 接口（某些站点同时提供 HTTP 和 FTP），或者通过 FTP 客户端下载文件，然后上传到 Google Drive，然后从那里访问这些文件。

随时在[问题跟踪器](http://code.google.com/p/google-apps-script-issues/issues/list)中查找/记录项目。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2016-08-07T03:27:11.553

通过使用 UrlFetchApp 类，我已经成功地将远程服务器的图像放入谷歌应用程序脚本中。

[https://developers.google.com/apps-script/reference/url-fetch/url-fetch-app](https://developers.google.com/apps-script/reference/url-fetch/url-fetch-app)

# java - java - 如何将密钥存储在密钥库中

> ID：13894699
> 
> 赞同：19
> 
> 时间：2012-12-15T17:56:38.697
> 
> 标签：java, keystore

我需要将 2 个密钥存储到 KeyStore 以下是相关代码：

```
KeyStore ks = KeyStore.getInstance("JKS");
String password = "password";
char[] ksPass = password.toCharArray();
ks.load(null, ksPass);
ks.setKeyEntry("keyForSeckeyDecrypt", privateKey, null, null);
ks.setKeyEntry("keyForDigitalSignature", priv, null, null);
FileOutputStream writeStream = new FileOutputStream("key.store");
ks.store(writeStream, ksPass);
writeStream.close(); 
```

虽然我得到一个执行“私钥必须伴随证书链”

那是什么，究竟是什么？我将如何生成它？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-15T18:09:38.543

您还需要为私钥条目提供证书（公钥）。对于由 CA 签署的证书，链是 CA 的证书和最终证书。对于自签名证书，您只有自签名证书
示例：

```
KeyPair keyPair = ...;//You already have this  
X509Certificate certificate = generateCertificate(keyPair);  
KeyStore keyStore = KeyStore.getInstance("JKS");  
keyStore.load(null,null);  
Certificate[] certChain = new Certificate[1];  
certChain[0] = certificate;  
keyStore.setKeyEntry("key1", (Key)keyPair.getPrivate(), pwd, certChain); 
```

要生成证书，请点击此[链接](http://www.bouncycastle.org/wiki/display/JA1/X.509+Public+Key+Certificate+and+Certification+Request+Generation)：
示例：

```
public X509Certificate generateCertificate(KeyPair keyPair){  
   X509V3CertificateGenerator cert = new X509V3CertificateGenerator();   
   cert.setSerialNumber(BigInteger.valueOf(1));   //or generate a random number  
   cert.setSubjectDN(new X509Principal("CN=localhost"));  //see examples to add O,OU etc  
   cert.setIssuerDN(new X509Principal("CN=localhost")); //same since it is self-signed  
   cert.setPublicKey(keyPair.getPublic());  
   cert.setNotBefore(<date>);  
   cert.setNotAfter(<date>);  
   cert.setSignatureAlgorithm("SHA1WithRSAEncryption");   
    PrivateKey signingKey = keyPair.getPrivate();    
   return cert.generate(signingKey, "BC");  
} 
```

# eclipse - 来自父 POM 的 Maven 3 依赖项对 Eclipse 中的子项不可用

> ID：13894701
> 
> 赞同：8
> 
> 时间：2012-12-15T17:56:46.000
> 
> 标签：eclipse, dependencies, maven-3

我在eclipse中有一个maven 3项目，其结构如下。该应用程序项目用作所有其他应用程序的父项目。我已经包含了来自 app 项目（第一个 pom）的 pom.xml，以及来自 app-web 项目的 pom.xml。（第二个pom）

app
app-ear
app-ejg
app-web

我遇到的问题是我可以在 app-web/pom.xml 的有效 pom 中看到来自父级的依赖项，但我在 app-web 项目中的 java 类无法从这些依赖项中导入。我得到“无法解析导入 com.fasterxml”。我的 app-ejb 项目也有这个问题。我也不认为这只是一个“日食错误”。如果我尝试从应用程序项目 mvn clean install 我得到编译错误抱怨同样的事情。

顺便说一句，我所做的唯一更改是将依赖项从子项的 pom.xml 中移到父项中。我想尽可能地集中事物并保持我的项目配置尽可能 DRY。在将依赖项向上移动之前，一切正常。我正在为安装了 m2e、m2e-wtp 和 WTP 补丁的 Java EE 开发人员使用 Eclipse Juno。

应用程序/pom.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>com.boardgamebuilder</groupId>
<artifactId>app</artifactId>
<version>0.0.1-SNAPSHOT</version>
<packaging>pom</packaging>
<name>app application</name>

<modules>
    <module>app-ejb</module>
    <module>app-web</module>
    <module>app-ear</module>
</modules>

<properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <java-version>1.6</java-version>
    <org.slf4j-version>1.7.2</org.slf4j-version>
    <com.fasterxml.jackson-version>2.1.1</com.fasterxml.jackson-version>
</properties>

<dependencyManagement>
    <dependencies>

        <!-- JSON handler -->
        <dependency>
            <groupId>com.fasterxml.jackson.core</groupId>
            <artifactId>jackson-annotations</artifactId>
            <version>${com.fasterxml.jackson-version}</version>
        </dependency>
        <dependency>
            <groupId>com.fasterxml.jackson.core</groupId>
            <artifactId>jackson-core</artifactId>
            <version>${com.fasterxml.jackson-version}</version>
        </dependency>
        <dependency>
            <groupId>com.fasterxml.jackson.core</groupId>
            <artifactId>jackson-databind</artifactId>
            <version>${com.fasterxml.jackson-version}</version>
        </dependency>

        <!-- RESTful servlet -->
        <dependency>
            <groupId>com.sun.jersey</groupId>
            <artifactId>jersey-server</artifactId>
            <version>1.16</version>
        </dependency>

        <!-- Logging -->
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>${org.slf4j-version}</version>
        </dependency>
        <dependency>
            <groupId>ch.qos.logback</groupId>
            <artifactId>logback-classic</artifactId>
            <version>1.0.7</version>
        </dependency>

        <!-- Test -->
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.10</version>
            <scope>test</scope>
        </dependency>

        <!-- Misc -->
        <dependency>
            <groupId>javax</groupId>
            <artifactId>javaee-web-api</artifactId>
            <version>6.0</version>
            <scope>provided</scope>
        </dependency>

        <!-- Define the version of the EJB jar so that we don't need to repeat 
            ourselves in every module -->
        <dependency>
            <groupId>com.boardgamebuilder</groupId>
            <artifactId>app-ejb</artifactId>
            <version>0.0.1-SNAPSHOT</version>
            <type>ejb</type>
        </dependency>

        <!-- Define the version of the WAR so that we don't need to repeat ourselves 
            in every module -->
        <dependency>
            <groupId>com.boardgamebuilder</groupId>
            <artifactId>app-web</artifactId>
            <version>0.0.1-SNAPSHOT</version>
            <type>war</type>
            <scope>compile</scope>
        </dependency>

    </dependencies>
</dependencyManagement>

<build>
    <pluginManagement>
        <plugins>
            <!-- Compiler plugin enforces Java 1.6 compatibility and activates annotation 
                processors -->
            <plugin>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
        </plugins>
    </pluginManagement>
</build> 
```

应用程序-web/pom.xml

http://maven.apache.org/maven-v4_0_0.xsd">4.0.0

```
<parent>
    <artifactId>app</artifactId>
    <groupId>com.boardgamebuilder</groupId>
    <version>0.0.1-SNAPSHOT</version>
</parent>

<artifactId>app-web</artifactId>
<packaging>war</packaging>

<name>app Web module</name>
<build>
    <plugins>
        <plugin>
            <artifactId>maven-war-plugin</artifactId>
            <version>2.1.1</version>
        </plugin>
    </plugins>
</build> 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-16T01:22:03.383

将`jackson-annotations`and`jackson-core`依赖项移动到父 POM 后，您仍然需要`app-web`通过（最少）指定`groupId`and来在模块中引用它`artifactId`。 [Maven 文档](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Dependency_Management)解释了这种用法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-13T12:23:52.497

如果您的战争应用程序 pom 已将`<packagingExcludes>WEB-INF/lib/*.jar</packagingExcludes>`其排除并检查

# python - Django预取嵌套表

> ID：13894702
> 
> 赞同：2
> 
> 时间：2012-12-15T17:56:57.030
> 
> 标签：python, mysql, django

我有以下表结构：

```
menu --{ page --{ title 
```

从菜单中我想获取相关页面。页面也有相关的标题。以下代码完全按照我的意愿工作，但是 for 循环每次迭代都会生成一个单独的查询。

初始查询中的 prefetch_related 似乎没有获取标题。有没有更好的方法来减少查询数量？

```
 menu_data = MenuOrder.objects \
            .filter(menu__name=kwargs['menu']) \
            .filter(page__title_set__language=language) \
            .prefetch_related('page') \
            .order_by('priority')

    for menu_obj in menu_data:
        title_obj = menu_obj.page.title_set.get() 
```

提前致谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T00:02:20.790

您可以尝试：

```
.prefetch_related('page__title') 
```

[引用与预取相关的文档](https://docs.djangoproject.com/en/dev/ref/models/querysets/#prefetch-related)：

以下都是合法的：

```
Restaurant.objects.prefetch_related('pizzas__toppings') 
```

另外，请记住，您应该使用 reduce 查询`select_related`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T13:13:28.303

好吧，我发现反转关系已经大大减少了查询的数量：

```
title_data = Title.objects \
    .filter(language=language) \
    .filter(page__menuorder__menu__name=kwargs['menu']) \
    .order_by('page__menuorder__priority') 
```

我不知道是否有更好的方法，所以现在我会接受这个。感谢所有看过的人。。

# jquery - Klout 风格的饼图

> ID：13894707
> 
> 赞同：0
> 
> 时间：2012-12-15T17:57:36.453
> 
> 标签：jquery, charts, pie-chart, klout, donut-chart

我正在寻找基于 Klout 样式的饼图/甜甜圈 jquery 的图表，新的图表在中间显示领先分数。谁能指出我可以在我正在开发的网站上使用的这样一个图表。www.klout.com

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T22:52:09.173

查看[http://rendro.github.com/easy-pie-chart/](http://rendro.github.com/easy-pie-chart/)。这是最接近 Klout 样式饼图的饼图...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T18:02:25.710

[Flot](http://www.flotcharts.org/)可以创建圆环图，编写一些自定义代码来覆盖包含最高分的 div 应该相当容易。

# javascript - ExtJS 通过关联自动填充模型属性

> ID：13894708
> 
> 赞同：1
> 
> 时间：2012-12-15T17:57:36.250
> 
> 标签：javascript, extjs, extjs4, model-associations

**我正在使用 ExtJS 4.1.0**

假设我有几个简单的模型通过`hasMany`关联连接。模型代表订单和订单内容...

```
Ext.define('App.model.Order', 
{
    extend: 'Ext.data.Model',
    fields: ['id', 'order_date', 'order_total', 'contents' ],
    associations: [{
            type           : 'hasMany',
            model          : 'App.model.OrderContents',
            name           : 'getContents', /** magic method */
            primaryKey     : 'id',
            foreignKey     : 'order_id',
            autoLoad       : false
    }],

    /** Proxy Definition here.. */

});

Ext.define('App.model.OrderContents', 
{
    extend: 'Ext.data.Model',
    fields: ['id', 'order_id', 'item_id' ],

    /** Proxy Definition here.. */

}); 
```

现在，如果我希望在实例化模型时自动设置`contents`my 的属性怎么办？作为临时解决方案，我在模型中添加了以下方法：`App.model.Order``Order``Order`

```
Ext.define('App.model.Order', 
{

/** Model definition ... */

    loadContents: function()
    {
       this.getContents().load({
            callback: function()
            {
                this.set('contents', arguments[0]);
            },
            scope: this
        });

    }
}); 
```

为了使`Order`对象的内容随时可用，我必须执行以下操作：

```
var myOrder = new App.model.Order({id:1, order_date:'12-15-2012', order_total:100});
myOrder.getData(true); // contents will be null
myOrder.loadContents();
myOrder.getData(); // contents will be an array of OrderContents 
```

我已经尝试重载构造函数，`App.model.Order`但无论如何，即使我对关联数据的异步请求执行回调，我也无法访问关联加载的数据。

最终，我希望能够从我的订单中检索一个订单，`App.store.Orders`并让检索到的记录已经`contents`设置了它的属性，但我就是想不通！如果我从商店中检索记录如下：

```
myStore = Ext.getStore('OrderStore');
myOrder = myStore.findRecord('id',1);
myOrder.getData(); // contents will be null
myOrder.loadContents();
myOrder.getData(); // contents will be an array of OrderContents 
```

我真的只是想减少在整个应用程序`.loadContents()`中的每个实例都必须这样做；`App.model.Order`这似乎应该很容易完成。我错过了什么？！

谢谢你的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T19:07:41.903

这没有经过测试，但它应该可以工作。

```
Ext.define('App.model.Order', 
{
    extend: 'Ext.data.Model',
    fields: ['id', 'order_date', 'order_total', 'contents' ],
    associations: [{
            type           : 'hasMany',
            model          : 'App.model.OrderContents',
            name           : 'getContents', /** magic method */
            primaryKey     : 'id',
            foreignKey     : 'order_id',
            autoLoad       : false
    }],
    load: function(id, config) {
            config = Ext.apply({
                  success: function(record, operation) {
                        store.getContents().load();
                  },
            }, config);
            this.callParent([id, config]);
    },
    /** Proxy Definition here.. */

}); 
```

**更新：** 您可以编写自己的加载方法（在示例中称为 loadAll），如下所示：

```
 Ext.define('App.model.OrderContents', 
    {
         extend: 'Ext.data.Model',
         fields: ['id', 'order_id', 'item_id' ],

         proxy: {
                type: 'memory',
                data: [
                    {id: 1, order_id: 1, item_id: 2}, 
                    {id: 2, order_id: 1, item_id: 3},
                    {id: 3, order_id: 21, item_id: 3}
                ],
              reader: 'json'            
         }

    });

    Ext.define('App.model.Order', 
         {
              extend: 'Ext.data.Model',
              fields: ['id', 'order_date', 'order_total', 'contents' ],
              associations: [{
                         type           : 'hasMany',
                         model          : 'App.model.OrderContents',
                         name           : 'getContents', /** magic method */
                         primaryKey     : 'id',
                         foreignKey     : 'order_id',
                         autoLoad       : false
              }],
              statics: {
                      loadAll: function(id, config) {
                         config = Ext.apply({
                                 callback: function(record, operation) {
                                     if(operation.wasSuccessful()){
                                        record.getContents().load();
                                        record.set('contents', record.getContents().getRange());
                                         }
                               },
                                scope: this
                         }, config);
                         App.model.Order.load(id, config);
                    }
              },
              proxy: {
                    type: 'memory',
                    data: {'id':1, 'order_date':null, 'order_total': 100, 'contents':[]},
                    reader: {
                        type: 'json'
                    }

              }
         });

var order;
App.model.Order.loadAll(1,{
    success: function(record){
        order = record;
    }
    });

console.log(order); 
```

你可以看到它在 jsfiddle 上运行：

[http://jsfiddle.net/lontivero/X4gfR/](http://jsfiddle.net/lontivero/X4gfR/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T19:32:37.337

您提到您使用**构造函数**进行了尝试，但我认为您做错了什么。如果您的构造函数如下所示：

```
constructor: function(){
    var me = this;
    me.callParent([arguments]);
    me.loadContents();
} 
```

我想你会得到想要的结果......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T20:11:23.847

我通过重载*store*的构造函数来管理解决方法：

```
Ext.define('App.store.Orders', {
    extend: 'Ext.data.Store',
    storeId: 'OrdersStore',
    model: 'App.model.Order',

    constructor: function()
    {
        this.superclass.constructor.call(this);
        this.on('load', function(store, records, success, eOpts){
            Ext.each(records, function(order){
               order.loadContents();
            });
        }, this);
    }
}); 
```

希望这会对某人有所帮助:)

# javascript - 在jquery mobile中动态生成optgroup

> ID：13894709
> 
> 赞同：1
> 
> 时间：2012-12-15T17:57:42.380
> 
> 标签：javascript, jquery-mobile

```
<div style="text-align: center">
<select  id="list" name="select-restaurants" data-native-menu="false" multiple="multiple">
      <option value="choose" data-placeholder="true">Members</option>
         <optgroup label=" " id = "aac">
         <option value="a">abc</option>
         <option value="b">def</option>
         <option value="c">ghi</option>
         <option value="d">jkl</option>
         <option value="e">mno</option>
         <option value="f">pqr</option>

         </optgroup>
</select>
</div> 
```

我想动态生成它，我正在尝试下面的代码，但这对我不起作用。

```
$("#list").empty();//Clear options if there are any already existing ones.

for( i=1; i<= positions; i++ )
{

    $("#list").append($("<option value="+i+">"+ i+"</option>") );

} 
```

如果有人知道这一点，请提供帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T18:14:22.840

是的，您可以动态生成它。

这是我前段时间创建的一个示例：http: [//jsfiddle.net/Gajotres/rh7Nq/](http://jsfiddle.net/Gajotres/rh7Nq/)

主要是使用：

```
$("#selectID").selectmenu('refresh', true); 
```

选择后动态填充。

# algorithm - 在螺旋上画等距点

> ID：13894715
> 
> 赞同：26
> 
> 时间：2012-12-15T17:58:24.767
> 
> 标签：algorithm, draw, algebra, spiral

我需要一种算法来计算螺旋路径上的点分布。

该算法的输入参数应为：

*   环的宽度（距最内环的距离）
*   点之间的固定距离
*   要绘制的点数

要绘制的螺旋线是**阿基米德螺旋线**，获得的点必须彼此**等距**。

该算法应打印出单点笛卡尔坐标的序列，例如：

第 1 点：(0.0) 第 2 点：(..., ...) ........ 第 N 点 (..., ...)

编程语言并不重要，非常感谢所有帮助！

编辑：

我已经从这个站点获取并修改了这个例子：

```
 //
//
// centerX-- X origin of the spiral.
// centerY-- Y origin of the spiral.
// radius--- Distance from origin to outer arm.
// sides---- Number of points or sides along the spiral's arm.
// coils---- Number of coils or full rotations. (Positive numbers spin clockwise, negative numbers spin counter-clockwise)
// rotation- Overall rotation of the spiral. ('0'=no rotation, '1'=360 degrees, '180/360'=180 degrees)
//
void SetBlockDisposition(float centerX, float centerY, float radius, float sides, float coils, float rotation)
{
    //
    // How far to step away from center for each side.
    var awayStep = radius/sides;
    //
    // How far to rotate around center for each side.
    var aroundStep = coils/sides;// 0 to 1 based.
    //
    // Convert aroundStep to radians.
    var aroundRadians = aroundStep * 2 * Mathf.PI;
    //
    // Convert rotation to radians.
    rotation *= 2 * Mathf.PI;
    //
    // For every side, step around and away from center.
    for(var i=1; i<=sides; i++){

        //
        // How far away from center
        var away = i * awayStep;
        //
        // How far around the center.
        var around = i * aroundRadians + rotation;
        //
        // Convert 'around' and 'away' to X and Y.
        var x = centerX + Mathf.Cos(around) * away;
        var y = centerY + Mathf.Sin(around) * away;
        //
        // Now that you know it, do it.

        DoSome(x,y);
    }
} 
```

但是点的配置是错误的，点之间的距离不是等距的。

![非等距分布的螺旋](../Images/4592ed2dfca4cf1b47e1e619042687d5.png)

正确的分布示例是左边的图像：

![西拉尔](../Images/f48846d1a327c9b226a699b87944b9e3.png)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-16T12:12:50.823

对于第一个近似值——这对于绘制足够接近的块来说可能已经足够好了——螺旋线是一个圆，并按比例增加角度`chord / radius`。

```
// value of theta corresponding to end of last coil
final double thetaMax = coils * 2 * Math.PI;

// How far to step away from center for each side.
final double awayStep = radius / thetaMax;

// distance between points to plot
final double chord = 10;

DoSome ( centerX, centerY );

// For every side, step around and away from center.
// start at the angle corresponding to a distance of chord
// away from centre.
for ( double theta = chord / awayStep; theta <= thetaMax; ) {
    //
    // How far away from center
    double away = awayStep * theta;
    //
    // How far around the center.
    double around = theta + rotation;
    //
    // Convert 'around' and 'away' to X and Y.
    double x = centerX + Math.cos ( around ) * away;
    double y = centerY + Math.sin ( around ) * away;
    //
    // Now that you know it, do it.
    DoSome ( x, y );

    // to a first approximation, the points are on a circle
    // so the angle between them is chord/radius
    theta += chord / away;
} 
```

![10线圈螺旋](../Images/dd4f218a50e902dd43d43a61c924cf09.png)

但是，对于较松散的螺旋，您必须更准确地求解路径距离，因为空间太宽，其中`away`连续点之间的差异与 相比显着`chord`： ![1 线圈螺旋 1 次逼近](../Images/4f31d894b95d946ca3836c76bdf22c39.png) ![1线圈螺旋第二近似](../Images/a0a23ca5c20a0fdae8598b55c12aa019.png)

上面的第二个版本使用基于使用 theta 和 theta+delta 的平均半径求解 delta 的步骤：

```
// take theta2 = theta + delta and use average value of away
// away2 = away + awayStep * delta 
// delta = 2 * chord / ( away + away2 )
// delta = 2 * chord / ( 2*away + awayStep * delta )
// ( 2*away + awayStep * delta ) * delta = 2 * chord 
// awayStep * delta ** 2 + 2*away * delta - 2 * chord = 0
// plug into quadratic formula
// a= awayStep; b = 2*away; c = -2*chord

double delta = ( -2 * away + Math.sqrt ( 4 * away * away + 8 * awayStep * chord ) ) / ( 2 * awayStep );

theta += delta; 
```

要在松散螺旋上获得更好的结果，请使用数值迭代解决方案来找到计算距离在合适容差范围内的 delta 值。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-12-17T15:08:01.143

贡献一个 Python 生成器（OP 没有要求任何特定的语言）。它使用与 Pete Kirkham 的答案类似的圆近似。

`arc`是沿路径所需的点距离，`separation`是所需的旋臂间距。

```
def spiral_points(arc=1, separation=1):
    """generate points on an Archimedes' spiral
    with `arc` giving the length of arc between two points
    and `separation` giving the distance between consecutive 
    turnings
    - approximate arc length with circle arc at given distance
    - use a spiral equation r = b * phi
    """
    def p2c(r, phi):
        """polar to cartesian
        """
        return (r * math.cos(phi), r * math.sin(phi))

    # yield a point at origin
    yield (0, 0)

    # initialize the next point in the required distance
    r = arc
    b = separation / (2 * math.pi)
    # find the first phi to satisfy distance of `arc` to the second point
    phi = float(r) / b
    while True:
        yield p2c(r, phi)
        # advance the variables
        # calculate phi that will give desired arc length at current radius
        # (approximating with circle)
        phi += float(arc) / r
        r = b * phi 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-02-17T16:00:50.857

在 Swift 中（基于 liborm 的回答），按照 OP 的要求获取三个输入：

```
func drawSpiral(arc: Double, separation: Double, numPoints: Int) -> [(Double,Double)] {

  func p2c(r:Double, phi: Double) -> (Double,Double) {
      return (r * cos(phi), r * sin(phi))
  }

  var result = [(Double(0), Double(0))]

  var r = arc
  let b = separation / (2 * Double.pi)
  var phi = r / b

  var remaining = numPoints
  while remaining > 0 {
      result.append(p2c(r: r, phi: phi))
      phi += arc / r
      r = b * phi
      remaining -= 1
  }
  return result
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-10-25T13:11:03.873

我发现这篇文章很有用，所以我添加了上述代码的 Matlab 版本。

```
function [sx, sy] = spiralpoints(arc, separation, numpoints)

    %polar to cartesian
    function [ rx,ry ] = p2c(rr, phi)
        rx = rr * cos(phi);
        ry = rr * sin(phi);
    end

    sx = zeros(numpoints);
    sy = zeros(numpoints);

    r = arc;
    b = separation / (2 * pi());
    phi = r / b;

    while numpoints > 0
        [ sx(numpoints), sy(numpoints) ] = p2c(r, phi);
        phi = phi + (arc / r);
        r = b * phi;
        numpoints = numpoints - 1;
    end

end 
```

# javascript - 多个 div 怎么能有 85% 的高度和 100% 的宽度？

> ID：13894718
> 
> 赞同：1
> 
> 时间：2012-12-15T17:58:59.230
> 
> 标签：javascript, html, css

我的问题是关于 2 个 div 的高度和宽度分别为 85% 和 100%，但一次只显示一个。因为现在第二个 div 显示得很奇怪。

看看here并选择（menuslider->在visa下选择“graf”。）在那里你会看到第二个div没有100％的宽度和85％的高度，我可以用简单的方法解决这个问题吗？

**[这是网站](http://dl.dropbox.com/u/4171179/website/index.html)**

这是HTML：

```
<div id="mainContent">
<div id="googleMap"></div>
<div id="GraphWindow">dw
<iframe src="prototype.html" frameborder="" name="" width="" height="" scrolling="no"> Sorry your browser does not support frames or is currently not set to accept them.</iframe>
</div>
</div> 
```

这是CSS：

```
html {height:100%}
body {height:100%;margin:0;padding:0}

#mainContent{
height:85%;
width:100%;
  margin-left: auto ;
  margin-right: auto ;
}

#graphWindow{
height:85%;
width:100%;
  margin-left: auto ;
  margin-right: auto ;
}
#googleMap {
height:85%;
width:100%;
  margin-left: auto ;
  margin-right: auto ;

} 
```

这是显示或隐藏图形的 javascript：

```
function selectMainView(){
    if(document.details.title.value == "map"){  
        document.getElementById("googleMap").style.display = "block";
        document.getElementById("GraphWindow").style.display = "none";
    }
    else{
        document.getElementById("googleMap").style.display = "none";
        document.getElementById("GraphWindow").style.display = "block";
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T18:08:48.140

为 iframe 设置高度和宽度属性

```
<iframe src="prototype.html" frameborder="" name="" width="100%" height="85%" scrolling="no"> Sorry your browser does not support frames or is currently not set to accept them.</iframe> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T18:10:36.267

你`div`有 id `GraphWindow`（大写 G），你的 CSS 选择器是`#graphWindow`（小写 g）。

更改其中一个以使它们匹配外壳。

此外，您应该更改100%的`iframe`拥有`width`和`height`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T18:15:46.007

设置`#GraphWindow`为`#graphWindow`...也许，拼写错误？！仔细检查你的 CSS，它区分大小写！

（提示：尝试使用“firebug”，下次检查和调试它！）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-16T06:06:02.990

像这样修改你的CSS：

```
html {height:100%}
body {height:100%;margin:0;padding:0}

#mainContent{
height:85%;
width:100%;
  margin-left: auto ;
  margin-right: auto ;
}

#GraphWindow{
height:85%;
width:100%;
  margin-left: auto ;
  margin-right: auto ;
}

#GraphWindow iframe{
height:100%;
width:100%;
}

#googleMap {
height:85%;
width:100%;
  margin-left: auto ;
  margin-right: auto ;
} 
```

# jquery - Find an element using jquery with a kind of regex comparison in the data-title?

> ID：13894719
> 
> 赞同：1
> 
> 时间：2012-12-15T17:59:01.460
> 
> 标签：jquery, jquery-selectors

I want to select a div with class `textbox` and also has a data-title that starts with the string in the variable `dt`. Something like this:

```
var $theboxes = $(".textbox[data-title^="+dt+"]"); 
```

I've tried this but it causes an error in jquery. What's the right way to do this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T18:04:45.900

I think you actually need to quote the attribute value.
Try something like this:

```
var $theboxes = $(".textbox[data-title^='"+dt+"']"); 
```

# .net - WebBrowser 上的网页中断，但在 Internet Explorer 上工作正常

> ID：13894721
> 
> 赞同：4
> 
> 时间：2012-12-15T17:59:07.983
> 
> 标签：.net, winforms, webbrowser-control

知道为什么当我在 .NET winforms 应用程序中只使用. 并单击右箭头“>”转到该页面中显示的表中的下一页时，它会永远保持加载状态[。](http://www.ebay.com/itm/Super-Auto-Window-Regulator-741-713X-/251143955325?)`WebBrowser`但如果我在 Internet Explorer 9 和 10 或 Chrome 中做同样的事情，它就可以正常工作。

我什至尝试在 Win 7 机器中将[浏览器仿真](http://msdn.microsoft.com/en-us/library/ee330730%28v=vs.85%29.aspx)更改为 9，在 Win 8 机器中更改为 10，但它一直在做同样的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T08:09:18.817

在我的应用程序的注册表中启用[FEATURE_SCRIPTURL_MITIGATION](http://msdn.microsoft.com/en-us/library/ee330735%28v=vs.85%29.aspx#url_mitigate)解决了​​这个问题。

# java - 使用多个分隔符拆分字符串，包括分隔符

> ID：13894724
> 
> 赞同：4
> 
> 时间：2012-12-15T17:59:11.963
> 
> 标签：java, regex, stringtokenizer

我想使用多个字符分隔符拆分字符串，但我也想存储分隔符。我的分隔符是`()+-*/`

例如，如果我有一个字符串

`26+78(12*23)-16`

我想得到

```
26

+

78

(

12

*

23

)

-

16 
```

每行作为一个单独的数组元素。

我认为你不能使用拆分功能来实现这一点。但是，我对 string-tokenizer 的试用也失败了。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-15T18:04:01.403

如果不是星期六晚上，我不会回答：

```
 String s1 = "26+78(12*23)-16";
    for(String s: s1.split("(?<=[()+*/-])|(?=[()+*/-])")){
        System.out.println(">> " + s);
    } 
```

给出：

```
>> 26
>> +
>> 78
>> (
>> 12
>> *
>> 23
>> )
>> -
>> 16 
```

# java - 在 android 可访问的应用程序上使用不同的输入法

> ID：13894729
> 
> 赞同：1
> 
> 时间：2012-12-15T17:59:51.680
> 
> 标签：java, android, input, accessibility

我正在为盲人用户开发一个可访问的应用程序，并且我希望我的应用程序在我关注任何 EditText 时使用我在应用程序首选项中配置的输入法。

输入方法有：

*   标准安卓键盘
*   语音识别
*   手势

最好的方法是什么？

我想一种方法是在所有 EditTexts 上添加一个侦听器并使用选定的输入法调用一个 Activity 并使用 startActivityForResult 获取结果，但我不知道这是否是最好的方法。

# c - 编译器错误 - 可能的 IDE 错误“未定义对 gettimeofday 错误的引用”

> ID：13894732
> 
> 赞同：3
> 
> 时间：2012-12-15T18:00:09.127
> 
> 标签：c, windows, time, ide, compiler-errors

我正在尝试使用 rand、srand 和 time 在 CI 中使用 DEVC++ 生成随机（足够）数字。我收到以下错误：[Linked Error] undefined reference to 'gettimeofday' 错误

这是我的代码：

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <time.h>
#include <sys/time.h>

static unsigned long next = 1;

    int myrand(void) {
next = next * 1103515245 + 12345;
return((unsigned)(next/65536) % 32768);
}

void mysrand(unsigned seed) {
next = seed;
}

struct  {
   long tv_sec;
   long tv_usec;
       }timeval ;

int main(){

int num=0;               //random number

struct timeval t1;  

gettimeofday(&t1, NULL);
srand(t1.tv_usec * t1.tv_sec);

arg_num=rand();

printf("Number of arguments is:%d\n",arg_num);

} 
```

进行在线研究时，我发现 DEVC++（不知何故）包括 GNU 编译器，但它并没有真正使用它，导致无法识别所有“通用”函数。除了解决链接错误之外，我想知道在 Windows 中是否有一个使用 GNU 的 C 编程 IDE，或者不会产生此类问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T11:22:07.327

Windows 没有提供 gettimeofday() 。

# iphone - 根据标题中存在的按钮删除 UITableView 中的一行

> ID：13894737
> 
> 赞同：0
> 
> 时间：2012-12-15T18:00:35.783
> 
> 标签：iphone, objective-c, ios, ipad

我有一个`UITableView`我正在使用 custom 创建的`UITableViewCell`。表格视图显示了从数组填充的一些数据。现在我使用 2 个图像根据选择突出/取消突出显示。[默认情况下，当应用程序打开时，我显示第一行突出显示的图像而没有任何选择]。

`UITableView`如果我第一次成功按下删除按钮，标题现在包含一个删除按钮。

```
-(IBAction)delete{
    [myArray removeObjectAtIndex:0];
    [tableview reloadData];
} 
```

现在随着 tableview 的刷新，所有行都包含未突出显示的图像。现在，当我选择第 3 行并按标题删除按钮时，我应该如何删除要删除的索引号。

我知道`didSelectRowAtIndexPath`但有什么方法可以在 IBAction 方法中获取选定的单元格索引号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T18:09:19.753

只需创建一个保存最新选择值的 ivar 或属性。在 didSelectRowAtIndexPath 方法中，有这一行：

```
self.rowSelected = indexPath.row; 
```

其中 rowSelected 是一个属性。然后在按钮的 IBAction 中，您可以访问该属性：

```
-(IBAction)delete{
    if (self.rowSelected != -1){
        [myArray removeObjectAtIndex:self.rowSelected];
        [tableview reloadData];
        self.rowSelected = -1;
} 
```

在 viewDidLoad 方法中，您应该将该属性的值设置为 0，因为您希望在启动时选择第一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T18:14:46.387

在您的 .h 文件中获取一个实例变量`NSInteger selectedRow`。

在 you `init`or`viewDidLoad`中，设置默认选择...

```
selectedRow=0; 
```

然后在`didSelectRowAtIndexPath`执行以下操作...

```
-(void)tableView:(UITableView)tableView didSelectRowAtIndexPath:(NSIndexPath)indexPath
{
    selectedRow=indexPath.row;
} 
```

对删除方法进行细微更改

```
-(IBAction)delete{
    if(selectedRow!=-1)
    {
       [myArray removeObjectAtIndex:selcetedRow];
       [tableview reloadData];
       selectedRow=-1;     //-1 to mark that no row has been selected now
    }
} 
```

你完成了！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T19:24:38.203

您可以使用`indexPathForSelectedRow`来确定当前选择了哪一行。将删除方法更改为：

```
-(IBAction)delete {
    NSIndexPath *selectedRow = [tableview indexPathForSelectedRow];
    if (selectedRow) {
        [myArray removeObjectAtIndex:selectedRow.row];
        [tableview reloadData];
    }
} 
```

请注意，您必须默认选择第一行：

```
[tableview selectRowAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:0] animated:NO scrollPosition:UITableViewScrollPositionTop]; 
```

# c# - 等到下载完成

> ID：13894739
> 
> 赞同：0
> 
> 时间：2012-12-15T18:01:00.750
> 
> 标签：c#, .net

这是我的代码：

```
 Action<int, ProgressBar, Label, Label, int, Button> downloadFileAsync = (i, pb, label2, label1, ServID, button1) =>
    {
        var bd = AppDomain.CurrentDomain.BaseDirectory;
        var fn = bd + "/" + i + ".7z";
        var down = new WebClient();
        DownloadProgressChangedEventHandler dpc = (s, e) =>
        {
            label1.Text = "Download Update: " + i + " / " + ServID;
            int rec =Convert.ToInt16(e.BytesReceived / 1024);
            int total =Convert.ToInt16(e.TotalBytesToReceive / 1024)  ;
            label2.Text = "Downloaded: " + rec.ToString() + "KB / " + total.ToString() + " KB";
            pb.Value = e.ProgressPercentage;
        };
        AsyncCompletedEventHandler dfc = null;  dfc = (s, e) =>
        {
            label1.Text = "Extracting Files...";
            Rar Ra = new Rar();
            Ra.Open(i + ".7z");
            Ra.Unrar(AppDomain.CurrentDomain.BaseDirectory);
            File.Delete(fn);
            down.DownloadProgressChanged -= dpc;
            down.DownloadFileCompleted -= dfc;
            down.Dispose();
            if (ServID == i)
            {
                button1.Enabled = true;
                label1.Text = "Have Fun In-Game...";
                label2.Text = "Done...";
            }
        };
        down.DownloadProgressChanged += dpc;
        down.DownloadFileCompleted += dfc;
        down.DownloadFileAsync(new Uri("http://unknowndekaron.net/updatee/" + i + "/" + i + ".7z"), fn);
    }; 
```

这是我的电话：

```
 while (i <= ServID)
                {
                    downloadFileAsync(i, progressBar1, label2, label1, ServID, button1);
                    i++;
                } 
```

解压：

```
 public void Decompress(int i)
    {

        Rar Ra = new Rar();
        Ra.Open(i + ".7z");
        Ra.Unrar(AppDomain.CurrentDomain.BaseDirectory);

    } 
```

在此代码程序中，一次下载所有更新......它开始解压缩第一个下载完成的更新。我需要该应用程序一次只下载一个更新，然后对其进行解压缩。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T18:35:17.227

您可以使用布尔值来使用不优雅的解决方案：

您应该将顶级 lambda 移动到新`async`方法中。您可以在正常情况下调用它。`downloadCompleted`之后在顶级 lambda 的开头声明布尔值并将其设置为 false。然后转到`AsyncCompletedEventHandler`并在最后将值设置`downloadCompleted`为 true - 这将表示我们已经完成的最后一个 while 循环。顶级lamba结束应该等到下载和压缩完成。这不会将应用程序的状态更改为“未响应”。

**例子**

称呼：

```
 downloadFileAsync = (i, pb, label2, label1, ServID, button1) =>
    {
        Download(i, pb, label2, label1, ServID, button1);
    }; 
```

新方法：

```
 public async Task<int> Download(...)
    {
        bool downloadCompleted = false;
        var bd = AppDomain.CurrentDomain.BaseDirectory;
        var fn = bd + "/" + i + ".7z";
        var down = new WebClient();
        DownloadProgressChangedEventHandler dpc = (s, e) =>
        {
            label1.Text = "Download Update: " + i + " / " + ServID;
            int rec = Convert.ToInt16(e.BytesReceived / 1024);
            int total = Convert.ToInt16(e.TotalBytesToReceive / 1024);
            label2.Text = "Downloaded: " + rec.ToString() + "KB / " + total.ToString() + " KB";
            pb.Value = e.ProgressPercentage;
        };
        AsyncCompletedEventHandler dfc = null; dfc = (s, e) =>
        {
            label1.Text = "Extracting Files...";
            Rar Ra = new Rar();
            Ra.Open(i + ".7z");
            Ra.Unrar(AppDomain.CurrentDomain.BaseDirectory);
            File.Delete(fn);
            down.DownloadProgressChanged -= dpc;
            down.DownloadFileCompleted -= dfc;
            down.Dispose();
            if (ServID == i)
            {
                button1.Enabled = true;
                label1.Text = "Have Fun In-Game...";
                label2.Text = "Done...";
            }
            downloadCompleted = true;
        };
        down.DownloadProgressChanged += dpc;
        down.DownloadFileCompleted += dfc;
        down.DownloadFileAsync(new Uri("http://unknowndekaron.net/updatee/" + i + "/" + i + ".7z"), fn);
        while (!downloadCompleted)
            ;
    } 
```

调用 while 循环可以保持原样。

# javascript - 在 IE 上使用 Fancy zoom 时遇到问题

> ID：13894746
> 
> 赞同：0
> 
> 时间：2012-12-15T18:02:12.550
> 
> 标签：javascript, jquery, html, css

我试图从[这里](http://www.dfc-e.com/metiers/multimedia/opensource/jquery-fancyzoom/)使用插件 FancyZoom（用于在单击缩略图时显示完整图像） 。

我对其进行了一些修改以更好地满足我的需要，但不知何故它在 IE 中不起作用。

它在 IE 上给出的例外是：

```
SCRIPT5007: Unable to get value of the property 'css': object is null or undefined
jquery.fancyzoom.js, line 91 character 5 
```

为了快速参考，javascript的代码是：

```
function closeZoomBox(o){
 var oImgZoomBox = o.oImgZoomBox;
 o.oImgClose.remove();
 $('div',oImgZoomBox).remove();
 var endClose = function(){
   oImgZoomBox.empty().remove();
   o.imgSrc.css('opacity',1); // THROWING ERROR HERE
};
} 
```

[我有我的网站托管在这里](http://test.mmxhealthcare.com/screens/accredability/)。

如果您能调查一下我做错了什么，那将非常有帮助。（或者建议我任何其他可以满足我需求的插件）。

问题只出在 IE9 上。它甚至适用于 IE8、IE7。

我要等到 22 小时才能开始赏金，但我保证如果有人能帮助我，我将奖励 100 分的赏金。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T19:59:55.183

它在插件的主页上说，“阴影插件仅适用于非ie浏览器，将其添加到您的html页面的标题中，精美的​​缩放将在缩放的图像上显示阴影。”

以下是适用于 IE 的替代方案： Shadowbox.js 似乎可以满足您的需求，并且适用于“所有主要浏览器” [http://www.shadowbox-js.com/](http://www.shadowbox-js.com/)。或者，查看[http://lokeshdhakar.com/projects/lightbox2/](http://lokeshdhakar.com/projects/lightbox2/)上的灯箱 2 “适用于所有现代浏览器”和“灯箱 2 是开源的”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T20:18:02.320

您可以使用 CSS3 的转换 - MSIE 10 和更好的支持它们 - 不需要 javascript！

```
<style>
 img {
  width: 32px;
  height: 32px;
  transition: all 1s ease-in-out;
  -webkit-transition: all 1s ease-in-out;
  -o-transition: all 1s ease-in-out;
 }
 img:target {
  width: 64px;
  height: 64px;
 }
</style>
<a href="#img1"><img id="img1" src="./img.png" /></a>
<a href="#img2"><img id="img2" src="./img.png" /></a> 
```

这么简单：D

编辑：[这](http://jsfiddle.net/qp3J8/1/)是 jsFiddle 的链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T16:53:33.683

所以我检查了所有的 Javascript 代码并找出了问题，这在图像的文件名中。我正在使用`"registration pages.png"`（带空格），它以某种方式将此文件名转换`"registration%20pages.png"`为代码并将其与原始文件名进行比较。这是一个蹩脚的错误，但我认为这更多的是我实施的方式。

感谢那些投入时间的人。

# php - 编写一个系统访问受限的 PHP 插件系统

> ID：13894748
> 
> 赞同：1
> 
> 时间：2012-12-15T18:02:27.230
> 
> 标签：php, security, plugins, architecture, filesystem-access

所以我正在考虑构建一个CMS，我希望它被设计成插件可以轻松扩展它的功能（我也在研究钩子系统和语言设置）。

这是棘手的部分：我试图为许多站点（例如 mycms.com/your-site）制作一种主机，而不是单独打包的 CMS。

我正在设计具有如下结构的 MySQL 数据库：

```
pages
 - id
 - slug
 - title
 - content
 - site // The site id
sites
 - id
 - path // e.g. your-site
 - password // hash 
```

然后我将这样的插件存储在文件结构中：

```
plugins/
  42/   // Site id
    hello-world/   // plugin name
      hello-world.php
      functions.php
      css/   // ... 
```

当然，这里有一个严重的安全问题。说一个插件作者的代码 hello-world.php 像这样：

```
<?php
 include '../../../core/config.inc.php';
 echo $config['mysql']['password']; // Now they have my server's database password!
?> 
```

我该如何规避这样的事情？我怎样才能控制它，以便 hello-world.php 只能访问目录 hello-world/ 中的文件，而不能访问它上面的文件？本质上，我想禁止插件访问它们自己目录之外的文件。

这一定很简单吧？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-15T16:00:29.240

请注意，此插件最终将在 cms 进程中运行，因此恶意插件自动程序甚至可以从进程全局范围内抓取数据。您的 cms 很可能会在某些时候包含 config.php，这样做意味着设置现在处于全局范围内，并且可以被任何代码读取。您可以通过将设置存储在函数中来避免这种情况，例如。您可以通过询问函数的返回值来访问此设置，并在函数调用上发明一些锁定机制。

# java - 如何使我的 GridView 项目可重新排列（拖放）？

> ID：13894751
> 
> 赞同：0
> 
> 时间：2012-12-15T18:02:48.670
> 
> 标签：java, android, android-layout, android-gridview

我有一个带有自定义适配器和项目布局的 GridView。我希望用户能够拿着其中一个项目将其移动到另一个项目的位置，就像在主屏幕上移动图标一样。

有没有一种简单的方法可以做到这一点？

或者我应该采取不同的方式来解决这个问题？

# java - JPanel 没有显示在我的 JFrame 中，而是显示在新窗口中

> ID：13894752
> 
> 赞同：1
> 
> 时间：2012-12-15T18:02:52.567
> 
> 标签：java, swing, jframe, jpanel, japplet

我相信我做错了一些简单的事情；我的研究让我无处可去。

我创建了一个独立的 Java 应用程序，我试图将其转换为作为小程序运行。（作为一个小程序是一个要求）。

我创建了一个 JPanel 类 MazePanel，并试图将其显示为一个小程序。当我在 Netbeans 中运行我的 Applet 时，会加载 2 个窗口。一个是空白的 Applet 窗口，另一个是我的 Maze。我希望迷宫（在 MazePanel 中实现）显示在我的小程序中。任何人都可以看看这个，并告诉我我做错了什么。

```
public class MazeApplet extends JApplet {

protected JFrame frame;
protected JPanel jPanel;
protected MazeBuilder builder;
protected MazeFactory factory;

public MazeApplet() {
    //Set up frame
    frame = new JFrame("Maze -- Builder");
    frame.setLayout(new BorderLayout());

    frame.setVisible(true);
    frame.setResizable((true));

}

public void init() {

    factory = new ShoutMazeFactory();
    builder = new FactoryMazeBuilder(factory);
    Maze maze = MazeGameBuilder.createMaze(builder);
    maze.setCurrentRoom(1);
    jPanel = (new Maze.MazePanel(maze));
//Add jPanel to Frame
    frame.getContentPane().add(jPanel);
    frame.pack();
    }
} 
```

下面是我要显示的 JPanel 类

```
public class MazePanel extends JPanel{

protected Maze maze = new Maze();
  public void paint(Graphics g) {
Dimension dim = getSize(); 
g.setColor(Color.white);
g.fillRect(0, 0, dim.width, dim.height);    
g.setColor(Color.black);
  maze.draw(g);
  }    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T18:08:54.170

在小程序中工作时，您无法创建新框架，这是创建框架的原因。

在 init() 块中启动初始面板，然后根据需要使面板可见或不可见。

# jquery - Kendo 组合框 - jQuery val() 不触发 viewmodel 值更改

> ID：13894756
> 
> 赞同：2
> 
> 时间：2012-12-15T18:03:42.623
> 
> 标签：jquery, kendo-ui

我的页面中有很多剑道组合框。我在清除值（“”）时遇到了一些问题；我正在使用这样的代码：

```
$('#clearAll').click(function () {       
        $("#params input").val("");        
    }); 
```

有了这个，我试图清除我页面上所有输入的值。但是，这只会清除可见值，当我检查视图模型中的值时，它们仍然没有改变。

所以我想，需要触发更改事件，所以我使用了：

```
$("#params input").trigger("change"); 
```

但还是一样。我不太了解剑道的 MVVM 中的值绑定规则。这是正常行为还是错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T00:17:41.463

如果您坚持 MVVM 模式，那么您应该做的是更改 ViewModel 上的值，而不是 View（组合框）。

> 清除按钮（在视图上）-> 调用“清除”函数（在 ViewModel 上）-> 调用 viewmodel.set("field", "") -> 触发组合框的更新（在视图上）

* * *

如果你想按照你现在的方式做，那么不要调用 jQuery 的`.val()`函数，而是尝试使用 Kendo ComboBox 的`.value()`函数：[http ://docs.kendoui.c​​om/api/web/combobox#value](http://docs.kendoui.com/api/web/combobox#value)

所以可能尝试将您的代码更改为：

```
$("#params input").data().kendoComboBox.value(""); 
```

# extjs - EXT JS 如何拖拽窗口 - 可拖拽

> ID：13894760
> 
> 赞同：2
> 
> 时间：2012-12-15T18:04:11.280
> 
> 标签：extjs, extjs4, extjs4.1

我有一个`EXT JS`窗户。我已将其设置为`draggable =true`. 但我只希望它不是在屏幕上全部拖动，而是在屏幕的有限部分内拖动。像向左或向右 2 厘米（厘米）。上下2厘米。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T23:15:11.137

您可以使用 window 上的约束配置将其约束到其父元素。 [http://docs.sencha.com/ext-js/4-1/#!/api/Ext.window.Window-cfg-constrain](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.window.Window-cfg-constrain)。默认情况下，Windows 渲染到文档正文，因此为了限制特定元素，您可以创建一个包含窗口的父级。

```
var win = new Ext.window.Window({
    height: 200,
    width: 200,
    constrain: true
});
Ext.create('Ext.container.Container', {
    style: 'border: 1px solid black;',
    height: 400,
    width: 400,
    renderTo: Ext.getBody(),
    items: [win]
});
//Don't forget to call show, windows are hidden by default 
// and even when hidden:false it didn't render in 4.1.1
win.show(); 
```

# coffeescript - 在 CasperJS 中调用 sendKeys 时出现 TypeError

> ID：13894762
> 
> 赞同：0
> 
> 时间：2012-12-15T18:04:28.630
> 
> 标签：coffeescript, casperjs

我正在尝试使用 coffeescript 和 casperjs (1.0.0-RC4) 来完成繁琐的登录，并希望填写一个使用 name 属性作为其字段的表单（例如`<input type='text' name='accountname'></input>`）。我最初打算使用@fill 来完成表单，但是遇到了问题（我猜），因为 id 属性不在输入标签中。所以，我决定使用@sendKeys 方法，但它抛出了一个非常令人困惑的错误：

`TypeError: 'undefined' is not a function (evaluating 'this.sendKeys('#accountname', developerAccountName)')`

在此代码段中是否有明显的我做错的事情：

```
#!/usr/bin/env casperjs

developerAccountName = "user@user.com"
developerPassword = "password"

casper = require("casper").create(
    verbose: true
    logLevel: "debug"
    );

casper.start "http://www.example.com"

casper.thenClick "#content .maincontent .image.first a"

casper.thenClick ".button.blue"

casper.then ->
    if (@exists "#accountname") and (@exists "#accountpassword")
        @sendKeys '#accountname', developerAccountName
        @sendKeys '#accountpassword', developerPassword
        @click "form .signin-button"
    else
        @echo "Couldn't find the fields"

casper.run ->
    @echo "Complete." 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T18:42:54.520

The sendKeys method wasn't available until 1.0.0.RC5

# c++ - 全局 C++ 对象的对象特定代码？

> ID：13894766
> 
> 赞同：1
> 
> 时间：2012-12-15T18:05:14.900
> 
> 标签：c++, optimization, gcc, inline

考虑以下 C++ 伪代码：

```
class C { 
   int a,b,c;
   inline void simple_method() { /* whatever */ }
   void complex_method();
}
C foo,bar;

int main() {
   foo.complex_method();
   bar.simple_method();
} 
```

好的。现在生成的汇编代码`bar.simple_method()`显然包含对变量 bar.a、bar.b 等的直接引用，即它**不会**通过对象指针。

然而，非内联方法将通过对象指针访问所有内容。但是由于我正在编写一个嵌入式控制器，它要么具有有限的寻址能力，要么 GCC 不太了解，因此生成的汇编代码真的很慢而且很臃肿。

使用`always_inline`生成快速且相当整洁的代码。但由于 complex_method() 有多个调用者，因此这不是一个可行的解决方案。

我想出的解决这个问题的最好方法是拍打`always_inline`，`X::complex_method()`沿着以下线创建一堆包装器

```
 void _foo_complex_method() { foo.complex_method(); } 
```

然后记住始终使用这些包装器。

如果您有一个类、一个复杂方法和两个全局变量，就像本例中一样，这很容易。问题是我们当前的设计有更多的这些——并且保持所有这些包装器的参数列表和返回值是一个非常令人头疼的问题；此外，我每周都会发现对这些方法的新直接调用。：-/

因此，我想知道是否有一个更简单的习语（可能在有趣复杂的模板和所有 C++ 臭名昭著的东西中实现 ;-) 来完成同样的事情。

# javascript - 以时间间隔连续重复运行 JavaScript 函数

> ID：13894768
> 
> 赞同：5
> 
> 时间：2012-12-15T18:05:25.040
> 
> 标签：javascript, jquery, ajax

这是我的第一个问题，希望您能尽快回答。

我想要代码连续重复一个功能......我已经尝试了一些代码，但它没有奏效。

我试过这段代码：

```
<script type="text/javascript">
$(function() 
{
$('#more').load('exp1.php'); // SERIOUSLY!
});
</script> 
```

我想在一段时间后重复这个功能。我已经尝试 `setInterval()`过`setTimeout()`

但是，我还没有收到结果。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-15T18:10:18.107

这将重复任务，直到您清除间隔（使用 clearTimeout(repater)）

```
var repeater;

function doWork() {
 $('#more').load('exp1.php');
 repeater = setTimeout(doWork, 1000);
}

doWork(); 
```

根据 OP 的原始条件：

> 我想要连续重复功能的代码......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-15T18:07:28.957

你可以这样做

```
var myFunction = function() {
    $('#more').load('bla.php'); 
};

var timer =  setInterval(myFunction, 1000); // call every 1000 milliseconds 
```

或者

```
var timer = setTimeout(myFunction, 1000); // call every 1000 milliseconds

clearTimeout(timer); //To stop the function from being called forever 
```

作为@Christofer Eliasson **对于 Ajax 请求，您可能希望使用 timeout 而不是 interval**，在回调中再次开始超时，以确保如果服务器占用的时间超过 1，您不会堆栈调用第二个回应

**好读**

1.  [MDN:window.setTimeout](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)
2.  [MDN:window.setInterval](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-15T18:13:41.113

对于 Ajax 请求，我将使用[超时](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)而不是间隔，并在 ajax 请求的回调中再次启动超时。

如果您使用 1 秒的间隔并且您的服务器需要超过 1 秒的时间来响应，您将开始以间隔堆叠调用，因为无论如何间隔都会每秒调用一次函数。使用超时回调方法，您不会在上一个请求完成之前开始倒计时。

我正在使用[IIFE](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)来触发对该函数的第一次调用。然后当加载完成后，我使用超时在一秒钟后再次调用该函数：

```
(function loadContent(){
    $('#more').load('exp1.php', function () {
       setTimeout(loadContent, 1000);
    });   
})(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T18:28:53.403

只是把它扔在那里：

```
function doRequest() {
$.ajax({
  url: 'exp1.php',
  timeout: 1000,
  success: function(data) {
    $('#more').html(data);
    doRequest();
  }
});
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-15T18:37:59.643

一些好的 ol' 时尚递归怎么样？

```
function getStuff() {
    $('#more').load('exp1.php', function() {
        getStuff();
    });
}

getStuff();​ 
```

演示：http:
[//jsfiddle.net/Zn2rh/1/](http://jsfiddle.net/Zn2rh/1/)

# mongodb - pymongo 语法更新子文档

> ID：13894769
> 
> 赞同：1
> 
> 时间：2012-12-15T18:05:26.340
> 
> 标签：mongodb, pymongo

我的文件如下所示：

```
{
  a: "..."
  subdocs [
    {
      l: "..."
      m: "..."
      n: 0
    },
    {
      l: "..."
      m: "..."
      n: 0
    }

  }
} 
```

我必须使用 pymongo 更新特定子文档中的“n”字段。我有子文档的文档和索引，所以我可以像这样获得子文档

```
subdoc = mydoc['subdocs'][index] 
```

我尝试通过 pymongo 进行更新

```
coll.update( { mydoc['subdocs'][index] : subdoc }, { "$inc": { n: 1 }} ) 
```

我得到了这个例外

```
<type 'exceptions.TypeError'> 
```

我已经尝试了几种变体，但无法正确使用 pymongo 语法。我认为我的查询文档不正确。pymongo 对这种语法有什么期望？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T19:17:08.350

您需要在第二个参数中标识要更新的数组元素，以`update`使用点符号，如下所示：

```
coll.update({'_id': mydoc['_id']}, {'$inc': {'subdocs.' + str(index) + '.n': 1}}) 
```

# wpf - WPF桌面应用程序读/写文件权限？

> ID：13894772
> 
> 赞同：4
> 
> 时间：2012-12-15T18:05:40.217
> 
> 标签：wpf, vb.net, desktop-application

我目前正在编写我的第一个 WPF 应用程序，当我试图将我的序列化文件保存到 PC 上的任何路径时，我得到一个 UnauthorizedAccessException （意味着对路径的访问被拒绝）。

这是功能：

```
 Public Shared Sub Serialize(Of T)(ByVal compression As Boolean, _
  ByVal path As String, ByVal instance As T)

    Try
        Dim fs As Stream = New FileStream(path, FileMode.OpenOrCreate)
        Dim bf As New BinaryFormatter
        If compression Then fs = New GZipStream(fs, CompressionMode.Compress)

        bf.Serialize(fs, instance)
        fs.Close()
    Catch ex As Exception
        MessageBox.Show(ex.Message)
    End Try
End Sub 
```

我知道某些系统文件夹是不受限制的，但无论我选择哪个驱动器，它都不会让我保存在任何地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T16:33:49.287

如果您尝试写入系统文件或您没有权限的任何其他区域，您需要修改项目中的 appmanifest.xml。

```
 <trustInfo xmlns="urn:schemas-microsoft-com:asm.v2"> 
   <security> 
    <requestedPrivileges> 
      <requestedExecutionLevel 
        level="requireAdministrator" 
        /> 
       </requestedPrivileges> 
       </security> 
     </trustInfo> 
```

还有 2 个执行级别，它们是

a) 最高可用
b) asInvoker

# php - PHP正则表达式检测分页

> ID：13894779
> 
> 赞同：3
> 
> 时间：2012-12-15T18:07:29.897
> 
> 标签：php, regex, preg-match

我正在用 PHP 为基于 MVC 的站点重新编写路由处理类，并且需要一个正则表达式来检测 URL 中的分页字符串。分页字符串由三个不同的部分组成；

*   **页码检测：** `/page/[NUMERIC]/`
*   **每页项目检测：** `/per_page/[NUMERIC]/`
*   **订货检测：** `/sort/[ALMOST_ANY_CHARACTER]/[asc or desc]/`

由于之前的开发方式，这三个部分可以按任何顺序排列。我需要继续使用许多现有链接以及用于处理分页的代码（还没有重新编写的计划）-因此不可能更改分页代码以始终生成一致的 url。

因此，我需要构建一个正则表达式模式来检测分页结构的每一种可能组合。我有三种模式来检测每个部分，如下所示：

*   **页码检测：** `(page/\d+)`
*   **每页项目检测：** `(per_page/\d+)`
*   **订货检测：** `(sort/([a-zA-Z0-9\.\-_%=]+)/(asc|desc))`

作为编写复杂的新手（无论如何这对我来说很复杂！）正则表达式模式，我唯一能想到的就是两个结合我对每个 url 结构的三种模式（例如 /pagenum/ordering/perpage/， /pagenum/perpage/ordering/) 并使用 | 运算符作为“或”语句。

有没有更好/更有效的方法来做到这一点？

我正在使用`preg_match`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T18:51:45.097

您可以使用[前瞻](http://www.regular-expressions.info/lookaround.html)。在前瞻完全匹配后，正则表达式引擎的位置跳回到它开始的位置（这就是为什么它被称为 * *look* *ahead；它实际上并不推进主题字符串中的位置或在匹配中包含任何内容）。由于您不知道所需的部分何时出现，因此从字符串的开头开始所有三个前瞻，并在捕获组之前添加`.*`以允许任意位置：

```
^(?=.*(page/\d+))(?=.*(per_page/\d+))(?=.*(sort/([a-zA-Z0-9\.\-_%=]+)/(asc|desc))) 
```

您甚至可以稍微切换捕获组：

```
preg_match(
  '~^(?=.*page/(\d+))(?=.*per_page/(\d+))(?=.*sort/([a-zA-Z0-9\.\-_%=]+)/(asc|desc))~', 
  $input,
  $match
); 
```

现在捕获将是：

```
$match[1] => page number
$match[2] => items per page
$match[3] => sort key
$match[4] => sort order 
```

如果其中任何一个可以是可选的，您可以简单地使用`?`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T19:04:29.643

您*可以*使用前瞻，但除非我遗漏了什么，否则我认为这里没有必要——您可能只使用 OR 运算符：

```
(/(page/\d+)|/(per_page/\d+)|/(sort/([a-zA-Z0-9\.\-_%=]+)/(asc|desc)))+ 
```

此处的外部组搜索任何组 1 OR 组 2 或组 3 的 1 个或多个实例。

**更多 URL 路由提示：**

这种通用方法实际上也可以让您简化一些事情。与其在 Regex 中为您的路线定义所有规则，不如先检查某些类型的操作，然后在代码中处理它们。最简单的版本：

(/(page|per_page)/([\d+]))+

现在（对于每个外部组匹配）您将获得一个包含“动作”和“值”的匹配列表。打开动作，相应地处理值。

要按照您指定的方式处理排序（两个值参数而不是一个），我们将添加另一层.. 并使其更有趣，假设您决定添加第四个操作`search`，它搜索特定的一些内容的字段：

```
(/(page|per_page)/([\d+])|/(sort|search)/([^/]+)/([^/]+))+ 
```

同样，在评估您的匹配列表时，首先检查操作 - 根据它是哪个操作，您将知道要处理多少个连续匹配值。

希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T19:26:28.690

不要使用正则表达式。仅仅因为您在字符串上进行操作并不意味着正则表达式就是要走的路。

将您的路径拆分`/`为一个数组，然后将路径的每个部分作为数组的单个元素处理。

```
$parts = explode( '/', $path );

if ( ( $parts[0] == 'page' ) && is_integer( $parts[1] ) ) {
.... 
```

# selenium - Selenium 套件不在 Chrome 上运行而在 FF 上运行？

> ID：13894785
> 
> 赞同：1
> 
> 时间：2012-12-15T18:08:34.057
> 
> 标签：selenium

***情况1：***

使用时：

```
C:\Program Files (x86)\Java\jdk1.7.0\bin>java -jar C:\selenium\selenium-2.25.0\selenium-server-standalone-2.25.0.jar -htmlSuite "*googlechrome" https://accounts.google.com/ "C:\selenium\Ide\test_suite.htm" "C:\selenium\Ide\results.htm" 
```

获得例外：

> 看到 HTML 套件异常：java.lang.RuntimeException：java.lang.RuntimeException：在路径中找不到 Google Chrome！请将包含“chrome.exe”或“google-chrome”或“Google Chrome”的目录添加到您的 PATH 环境变量中，或明确指定 Google Chrome 的路径，如下所示：*googlechrome c:\blah\chrome.exe

***案例2***

**如此改变**

C:\Program Files (x86)\Java\jdk1.7.0\bin>java -jar C:\selenium\selenium-2.25.0\selenium-server-standalone-2.25.0.jar -htmlSuite "C:\Program Files (x86)\Google\Chrome\Application\chrome.exe" [https://accounts.google.com/](https://accounts.google.com/) "C:\selenium\Ide\test_suite.htm" "C:\selenium\Ide\results.htm"

得到：

看到 HTML 套件异常：java.lang.RuntimeException：不支持浏览器：C:\Program Files (x86)\Google\Chrome\Application\chrome.exe（您是否忘记添加 *？）

支持的浏览器包括： *firefox *mock *firefoxproxy *pifirefox *chrome *iexploreproxy *iexplore *firefox3 *safariproxy *googlechrome *konqueror *firefox2 *safari *piiexplore *firefoxchrome *opera *webdriver *iehta *custom

```
 at org.openqa.selenium.server.browserlaunchers.BrowserLauncherFactory.browserNotSupported(BrowserLauncherFactory.java:151)
    at org.openqa.selenium.server.browserlaunchers.BrowserLauncherFactory.getBrowserLauncher(BrowserLauncherFactory.java:127)
    at org.openqa.selenium.server.htmlrunner.HTMLLauncher.getBrowserLauncher(HTMLLauncher.java:78)
    at org.openqa.selenium.server.htmlrunner.HTMLLauncher.runHTMLSuite(HTMLLauncher.java:138)
    at org.openqa.selenium.server.htmlrunner.HTMLLauncher.runHTMLSuite(HTMLLauncher.java:196)
    at org.openqa.selenium.server.SeleniumServer.runHtmlSuite(SeleniumServer.java:612)
    at org.openqa.selenium.server.SeleniumServer.boot(SeleniumServer.java:286)
    at org.openqa.selenium.server.SeleniumServer.main(SeleniumServer.java:244)
    at org.openqa.grid.selenium.GridLauncher.main(GridLauncher.java:54) 
```

23:23:19.194 信息 - 正在关闭...

***案例3***

**所以用浏览器再次更改为 *chrome**

它应该在 chrome 上运行，但它在 Firefox 上运行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T13:30:40.300

使用 *googlechrome 在 Chrome 浏览器上运行。并将包含“chrome.exe”或“google-chrome”的目录添加到您的 PATH 环境中。注意 - 如果你只是说 *chrome 它将调用 Firefox Chrome。

它也应该通过将“*googlechrome”参数更新为 - “*googlechrome C:\Program Files (x86)\Google\Chrome\Application\chrome.exe”来工作

# java - java-通过 System.setProperty 命令设置 RMI 端口的属性名称是什么

> ID：13894787
> 
> 赞同：0
> 
> 时间：2012-12-15T18:08:43.610
> 
> 标签：java, rmi

通过 System.setProperty 命令设置 RMI 端口的属性名称是什么

我了解设置 RMI 策略文件的属性是“java.security.policy”

我想知道设置RMI端口的属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T20:12:03.197

您可以在对象导出期间设置导出端口： UnicastRemoteObject.exportObject((Remote obj, int port)
我认为没有办法将其全局设置为一个特定端口（默认为 0 -> 动态分配） .

但如果你指的是激活器端口，那么它是： "java.rmi.activation.port" System.setProperty("java.rmi.activation.port", port)

参考： [http ://docs.oracle.com/javase/6/docs/technotes/guides/rmi/javarmiproperties.html](http://docs.oracle.com/javase/6/docs/technotes/guides/rmi/javarmiproperties.html)

希望有帮助...

# php - 用于重定向的按钮，带有 php 函数

> ID：13894788
> 
> 赞同：0
> 
> 时间：2012-12-15T18:08:46.913
> 
> 标签：php, javascript, jquery

我希望能够通过按钮重定向到页面。我不想使用标题功能。我希望能够在 php 文件中调用一些函数。我的重定向功能看起来像这样。基本上第一部分在静态变量中设置要加载的页面，然后执行重新加载页面，然后在其他一些初始化函数中执行加载函数。

这可以修改，这正是我教的方式。

```
public function WSP_Redirect($site)
{
    self::$_mainsite = $site;

            //This is one option 
    //$this->LoadPage();

            // This is another option
    echo '<script>window.location.reload()</script>';

} 
```

在另一个文件中，我会说按下一个按钮，然后该按钮将调用此函数（通过帖子或其他方式）以重定向到某个页面...

对我来说，它是如何完成的并不重要，但它使用重定向功能很重要。

任何建议都会很好，我确实检查了 ajax 和 jquery，但到目前为止我没有尝试过:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T18:12:09.337

如何使用

```
 header('Location: ' . $site); 
```

直接来自 PHP 吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T18:17:15.623

我不确定，为什么你不使用标题，但在 JavaScript 中你可以这样做：

```
<script>window.location = "http://www.stackoverflow.com"</script> 
```

所以在你的 PHP 文件中，它会是这样的：

```
public function WSP_Redirect($site) {
    ...
    echo '<script>window.location = "' . $site . '"</script>';
} 
```

# html - 设置我的基地会有不利之处吗 包含“溢出：自动”的样式？

> ID：13894798
> 
> 赞同：1
> 
> 时间：2012-12-15T18:10:03.670
> 
> 标签：html, css

我一直遇到子 div 的内容会扩展到其父容器之外的问题。通过将父容器的溢出设置为“自动”解决了这个问题（使用我在这里找到的答案）。

我的问题基本上是上面的主题行：将我的基本/全局样式设置为默认包含“溢出：自动”是否有不利之处？由于这个简单的添加似乎使父容器正确地*包含*它们的浮动子容器，所以将所有内容默认为默认值并在需要时更改它是没有意义的？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T18:34:45.857

使用自动，如果溢出由于框约束而被剪裁，您将获得一个滚动条。您最终可能会在这里和那里出现随机滚动条。继承是默认值，坚持下去。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T21:36:14.877

您最终可能会在网站底部滚动滚动或设置溢出的“特定 div”：自动。

阅读您所说的有关嵌套浮动 div 未正确显示的内容；这是因为当您将 div 设置为“浮动”时，会将其从网站的自然流中移除。您是否尝试通过将容器 div 设置为来解决浮动问题`clear:both/left/right`？这会清除浮动的 div 并设置自然流量吗？这可能是你的问题。

# c# - LINQ where 子句结合 Func<> 和 Foreach

> ID：13894800
> 
> 赞同：2
> 
> 时间：2012-12-15T18:10:14.033
> 
> 标签：c#

我想做什么：

我有一个扩展名列表（.mpg、.avi、.jpg）……和一个文件名列表（stuff.jpg、dogs.txt、movie.avi）。

我想将文件名列表与扩展名列表进行比较，并且只保留扩展名匹配的文件。在上面的例子中，stuff.jpg 和movie.avi，dogs.txt 应该被忽略。

我是怎么做的：

我有一个字符串列表（文件扩展名，如 .mp3、mp4、.avi...）：

```
 List<String>  extensions = new List<string>();
        extensions.Add(".mp4");
        extensions.Add(".mp3");
        extensions.Add(".avi");
        extensions.Add(".mkv");
        extensions.Add(".mpeg");
        extensions.Add(".mpg"); 
```

我还有一个包含多个文件的 IEnumerable。

我想要做的是检查 IEnumerable 中的每个文件，看看它的扩展名是否与我上面列表中的扩展名之一匹配（所以 .mpg，.mp3 ...）。

现在我正在这样做：

```
 var files = dir.EnumerateFiles();
    var newlist = files.Where(doesItMatch).Select(x => x).ToList();

    private Func<FileInfo, bool> doesItMatch = x =>
            {
                return x.Extension == ".mp3";
            }; 
```

这可行，但显然它只会检查它是否匹配“.mp3”。问题是我不想开始做类似的事情

```
where x == ".mp4" || x == ".avi" || x == ".mpg" .... 
```

我基本上想遍历我的扩展列表中的每个元素，并将其与 IEnumerable 中文件的当前扩展名相匹配。

我试过做这样的foreach：

```
 var newlist = files.Where(file => extensions.ForEach(ext => file.Extension == ext) ).Select(x => x).ToList(); 
```

但这给了我一个错误 `file.Extension == ext`，指出只有“赋值，调用......可以用作语句”。

所以我的问题是，我可以在`Func<>`扩展列表中使用上述内容并结合某种 foreach 吗？或者我应该寻找另一种方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T18:13:58.960

```
var files = Directory.EnumerateFiles(path)
                     .Where(f => extensions.Contains(new FileInfo(f).Extension))
                     .ToList(); 
```

* * *

并使用您的`doesItMatch`

```
var extensions = new HashSet<string>(new[] { ".mp4", ".mp3", ".avi",".mkv",".mpeg",".mpg" });

Func<string, bool> doesItMatch = x => extensions.Contains(new FileInfo(x).Extension);

var files = Directory.EnumerateFiles(path)
                     .Where(f => doesItMatch(f))
                     .ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T18:39:35.823

避免创建 func<> 进行搜索的另一种方法是仅使用 ANY linq 方法：

```
List<string> extenstions = new List<string>
{
   ".txt",
   ".pdf"
};

DirectoryInfo dir = new DirectoryInfo(@"C:\Users\Administrator\Desktop");

IEnumerable<FileInfo> foundFiles = dir.EnumerateFiles().Where(f => ext.Any(e => f.Extension == e)); 
```

# python - python中列表的长度？

> ID：13894809
> 
> 赞同：-3
> 
> 时间：2012-12-15T18:11:16.537
> 
> 标签：python, string-length

我让用户输入一个要打开的文件，其中包含数字。我希望输出是文件中元素的数量。我放..

```
file=open(input("Please enter the name of the file you wish to open:" ))#, "r")
A= file.readline()

print (A)

n=len(A)
print (n) 
```

我对此很陌生。我正在测试它的文件有 9 个数字（其中 2 个是负数）。长度为 21。如何更改它以获得元素的数量？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T18:12:52.520

如果数字都在该行上，请使用`split`将字符串分隔为单独的数字：

```
# List of strings: ['1', '-3', '10', ...]
numbers = A.split()

print len(numbers) 
```

您可能还想将这些数字从字符串形式转换为 int 形式：

```
# List of numbers: [1, -3, 10, ...]
numbers = [int(n) for n in A.split()] 
```

# java - 在java中写入gnome终端

> ID：13894811
> 
> 赞同：0
> 
> 时间：2012-12-15T18:11:26.253
> 
> 标签：java, linux, terminal, gnome

我正在尝试通过 java 程序在 gnome 终端中编写命令。我试过这段代码：

```
 String cmd = "ls"; 
    Runtime rt = Runtime.getRuntime();
    Process p = rt.exec(cmd); 
```

我正在尝试将“ls”写入终端但没有任何反应，但如果我使用

```
 String cmd = "gnome-terminal"; 
```

我可以打开一个新的终端窗口。我真正想做的是从终端运行一个C程序，用java调用它。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T18:17:09.773

`gnome-terminal`接受`-e`参数，它允许你告诉它执行一个程序。

```
gnome-terminal -e /path/executable 
```

只需将它们放入 a`String[]`并调用相同的方法即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T18:24:31.087

使用以下命令执行外部程序对我有用：

```
try
 {
 Runtime rt = Runtime.getRuntime();
 Process proc = rt.exec("ls -l");
 InputStream in = proc.getInputStream();
 OutputStream out = proc.getOutputStream();
 InputStream err = proc.getErrorStream();
 proc.destroy() ;
} 
```

或者，这里解决了类似的问题：[在 java 代码中执行一个也接受参数的外部程序](https://stackoverflow.com/questions/2921621/executing-in-java-code-an-external-program-that-takes-arguments)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T18:17:32.550

如果您从终端中启动您的 java 程序，那么在您调用`exec()`运行时并获得[一个`Process`](http://docs.oracle.com/javase/6/docs/api/java/lang/Process.html)您需要调用`getInputStream()`来读取命令的输出之后，您可以将其打印到 System.out。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T18:22:34.977

我如何在这个论坛上阅读： [http ://www.linuxquestions.org/questions/linux-general-1/run-command-in-new-gnome-terminal-185216/](http://www.linuxquestions.org/questions/linux-general-1/run-command-in-new-gnome-terminal-185216/)

您可以使用

```
gnome-terminal -x sh -c "ls" 
```

打开终端并执行“ls”（如果我记得，“-c”选项可以在新终端中执行程序。）

在这一刻我在工作，我还没有 linux X 系统可以在这里尝试。对不起 ：）

我希望这可以帮助你！

# ajax - Controller中的Ajax分页$_GET参数

> ID：13894812
> 
> 赞同：1
> 
> 时间：2012-12-15T18:11:46.197
> 
> 标签：ajax, yii, pagination

我试图了解 Yii 的帖子分页在博客演示应用程序中是如何工作的，我在 firebug 控制台中看到了这个请求：

```
http://localhost/blog/index.php/post/index?ajax=yw0&Post_page=2 
```

PostController 中的函数“ **actionIndex** ”似乎没有使用`$_GET`参数。魔法发生在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T21:20:12.053

对于此类事情，您应该检查来源。

索引函数将具有执行此工作`CActiveDataProvider`的`fetchData`函数。

基本上 a`CListView`或 a`CGridView`调用[`getData`数据提供者的函数，](http://www.yiiframework.com/doc/api/1.1/CDataProvider#getData-detail "http://www.yiiframework.com/doc/api/1.1/CDataProvider#getData-detail")该函数调用[`fetchData`（例如 CActiveDataProvider）](http://www.yiiframework.com/doc/api/1.1/CActiveDataProvider#fetchData-detail "http://www.yiiframework.com/doc/api/1.1/CActiveDataProvider#fetchData-detail")，后者又调用[`CPagination`'s`applyLimit`](http://www.yiiframework.com/doc/api/1.1/CPagination#applyLimit-detail "http://www.yiiframework.com/doc/api/1.1/CPagination#applyLimit-detail")，它调用[`getOffset`](http://www.yiiframework.com/doc/api/1.1/CPagination#getOffset-detail "http://www.yiiframework.com/doc/api/1.1/CPagination#getOffset-detail")，并且此函数调用[`getCurrentPage`](http://www.yiiframework.com/doc/api/1.1/CPagination#getCurrentPage-detail "http://www.yiiframework.com/doc/api/1.1/CPagination#getCurrentPage-detail")：

```
if(isset($_GET[$this->pageVar])) // this is where the $_GET is used 
```

# javascript - 使用 jQuery 更改图像 src onClick

> ID：13894815
> 
> 赞同：2
> 
> 时间：2012-12-15T18:11:59.727
> 
> 标签：javascript, jquery

我在我的网站上使用这个 HTML： `<a href="#1" id="slick-toggle"><img src="img1.jpg"/></a>`

当我单击此链接时，我想将图像 src 更改为`img2.jpg`. 并恢复到`img1.jpg`再次单击时等等。**有人可以解释我是如何使用 jQuery 做到这一点的吗？**

如果这有帮助，这是我现有的**jQuery ：**

```
$(document).ready(function() {     
  $('#slick-toggle').click(function() {
    $('#slickbox').toggle(400);
    return false;
  });
}); 
```

非常感谢您对此的任何指示:-)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-15T18:15:33.377

```
$(document).ready(function() {     
  $('#slick-toggle').click(function() {
    $('img', this).attr('src', function(i, oldSrc) {
        return oldSrc == 'img1.jpg' ? 'img2.jpg' : 'img1.jpg';
    });
    $('#slickbox').toggle(400);
    return false;
  });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T18:20:32.553

您需要在里面找到图像，因为您的点击处理程序位于包装它的位置，如下所示：

```
$('a#slick-toggle').click(function() {
  var img = $('#share')[0], isSwap = "True";
  img.src = isSwap ? img.src.replace("_img1","_img2") : img.src.replace("_img2","_img1");
  $('.img-swap').toggleClass("on");
  $('#atBox').toggle(100);
  return false;
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T18:29:57.347

为此使用此功能：

```
$('#mylink').toggle(
     function(){
          $(this).attr('src','img2.jpg');
     },
     function(){
          $(this).attr('src','img3.jpg');
     }
// and so on..
); 
```

您可以在其中添加更多功能...

# javascript - 如何从 html 字符串中删除所有 javascript（使用 javascript 或 jquery）？

> ID：13894818
> 
> 赞同：2
> 
> 时间：2012-12-15T18:12:14.163
> 
> 标签：javascript, jquery, xss

我想在页面中显示用户提供的 html。我的页面几乎是完全动态的（JS 代码），我想知道是否有一种简单的方法来清理它？

就像，也许我可以删除所有`<script>`和`<iframe>`标签并取消绑定字符串中包含的所有事件（或[删除](https://stackoverflow.com/questions/11549717/how-to-remove-all-clientevents-from-anchors-in-an-html-string-with-jquery)任何以'on'开头的html属性），以便不执行任何可能执行的字符串中的javascript代码？

用户可以在样式属性中插入带有 css 'content' 属性的 javascript 吗？

jquery`$(...).text(...)`函数对我没有帮助，因为我想保留任何 html 标记或 css 样式。

如果没有简单的解决方案，我已经准备好接受 html 标签的白名单（`table` `span` `div` `img` `a` `b` `u` `i` `strong`...），但我也不想将属性列入白名单。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T18:20:40.680

安全地显示用户内容的更简单的方法是将其嵌入到 iframe 中，该 iframe 的来源与您的主机网页不同。这就是 jsFiddle 所做的。主页由 jsfiddle.net 提供，但用户脚本由 fiddle.jshell.net 提供。这让用户内容可以做它通常会做的事情，但是浏览器的跨域保护可以防止用户内容与主机页面或域或 cookie 等混淆......

试图去除脚本可能在内容中的所有可能位置是一个冒险的提议，您可能会永远追逐新的攻击向量。我个人更愿意让浏览器从事该业务并将用户内容放在不同的域中。另外，允许用户内容拥有它的正常 JS 也会让它按需要工作。

# iphone - iOS 6 的方向变化让我完全困惑

> ID：13894819
> 
> 赞同：0
> 
> 时间：2012-12-15T18:12:20.593
> 
> 标签：iphone, ios6, orientation

这是一个通用应用程序，我将 iPhone 和 iPad 目标支持的界面方向设置为横向左右。我的根视图控制器不使用 NavigationController 并且 xib 是面向横向的视图。该应用程序旨在仅使用横向。

在应用程序中：didFinishLaunchingWithOptions 我有...

```
if (([JLHelper isIPhone]) | ([JLHelper iPadPortraitRestricted])) {
         application.statusBarOrientation = UIInterfaceOrientationLandscapeRight;
} 
```

在 iOS 5 中一切正常，但在 iOS 6 中，视图在启动时不会以横向显示。

我知道 shouldAutorotateToInterfaceOrientation 在 iOS 6 中已被弃用，但我不明白为什么这会影响初始演示。在我看来，根视图正在旋转。

我已经阅读了很多关于如何在 iOS 6 中强制横向方向的讨论，现在我完全糊涂了。必须有一种简单的方法来实现只使用横向的应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T18:30:03.760

您可以在 iOS 6 的 info.plist 中指定支持的方向。此外，您可以实现 shouldAutorotate 方法和 supportedInterfaceOrientations 方法（iOS 6 的新功能）以有条件地限制 iOS 6 的方向。

请注意，如果您想继续支持 iOS 5，您还必须使用 shouldAutorotateToInterfaceOrientation... 方法。iOS 5 使用旧方法，iOS 6 新方法，它们可以共存。

# android - android设置壁纸为应用背景

> ID：13894820
> 
> 赞同：-3
> 
> 时间：2012-12-15T18:12:22.977
> 
> 标签：android

我希望当用户单击应用程序中的按钮时，他们会得到一个对话框，允许他们从相册、一组动态壁纸、系统壁纸甚至图像中选择壁纸。我希望该功能与主页壁纸完全一样，只是我需要这个选定的图像作为我的`Main Activity`. 因此，当他们选择它并单击设置为墙纸时，此图像应用作应用程序的背景可绘制对象。

我有一个开始：

```
 Intent intent = new Intent(
               WallpaperManager.ACTION_LIVE_WALLPAPER_CHOOSER);
       intent.putExtra(WallpaperManager.COMMAND_TAP,
               new ComponentName(MainActivity.class),
                       Wallpaper.class));
startActivity(intent); 
```

我的第二个想法是使用设置背景位图使用`WallpaperManager.getInstance(this).setBitmap(bitmap);` 我不知道要移动的方向..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T20:13:05.180

这是为了获取当前系统壁纸：

只需从 WindowManager 获取可绘制对象：

```
WallpaperManager wallpaperManager = WallpaperManager.getInstance(this);
Drawable wallpaperDrawable = wallpaperManager.getDrawable(); 
```

将其设置为 ImageView：

```
yourImageView.setImageDrawable(wallpaperDrawable); 
```

# sql - 如何在 SQL Server 查询中找到哪些产品畅销与他人

> ID：13894825
> 
> 赞同：1
> 
> 时间：2012-12-15T18:13:15.260
> 
> 标签：sql, sql-server

我有一张销售表

```
SALE_ID   |   Product_Code    |  Qty   |  Sales_Value  | Taxes ....
==========+===================+========+===============+=========
001       |   AAAA            |   1    |  1000         | 50     ....
001       |   BBBB            |   1    |  10           | 0.5
002       |   CCCC            |   1    |  30           | 1.5
002       |   AAAA            |   1    |  1000         | 1.5 
```

我正在尝试获取一个表格，该表格显示一种产品与具有相同销售 ID 的另一种产品（在同一张发票上出售）一起销售的次数

```
Product ID  |  Product ID 2   |  Sales Together
============+=================+==================
AAAA        |  BBBB           |      1
AAAA        |  CCCC           |      1
BBBB        |  AAAA           |      1
BBBB        |  CCCC           |      0
CCCC        |  AAAA           |      1
CCCC        |  BBBB           |      0 
```

我正在使用 MS SQL，我想我必须进行分组查询，按销售额分组，然后是产品 ID，但这就是我对如何交叉计算销售额感到困惑的地方。

如果方便的话，我还有一张产品大师表

```
Product_ID   |  Description    |
=============+=================|
AAAA         | Battery         |
BBBB         | Flashlight      |
CCCC         | Radio           | 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T18:35:33.823

我认为这应该这样做

```
SELECT P1.Product_Code,
       P2.Product_Code,
       Count(DISTINCT S1.SALE_ID)
FROM   Product P1
       JOIN Product P2
         ON P1.Product_Code > P2.Product_Code
       LEFT JOIN Sales S1
                 INNER JOIN Sales S2
                   ON S1.SALE_ID = S2.SALE_ID
         ON S1.Product_Code = P1.Product_Code
            AND S2.Product_Code = P2.Product_Code
GROUP  BY P1.Product_Code,
          P2.Product_Code 
```

# algorithm - 算法：在有 m 个赢牌和 n 个输牌的纸牌游戏中最大化利润

> ID：13894828
> 
> 赞同：3
> 
> 时间：2012-12-15T18:13:48.190
> 
> 标签：algorithm, strategy-pattern, evolutionary-algorithm

假设赌场 (C) 的游戏只涉及一名玩家和一名庄家。该游戏使用 m+n 牌进行，m 标记为获胜牌，“n”标记为输牌。

游戏规则/信息：

1.  玩家知道每个阶段的赢牌数量“m”和输牌数量“n”。
2.  玩家开始玩“X”数量并玩到所有牌都被抽出。
3.  庄家非常聪明，有能力根据玩家在桌上的赌注来抽一张赢牌或输牌。
4.  每次抽奖都会减少任一类别的牌张数，即如果抽出中奖牌，则中奖牌数变为“m-1”，反之亦然。
5.  玩家也可以投注“0”金额。
6.  如果玩家下注“W”金额并抽出一张获胜牌。玩家获得 2W 作为回报，否则他失去下注金额

    问题：推导出玩家应该遵循的算法或策略以最大化他的利润。

一些例子 ：

测试用例 - 1：

```
Lets say m=0, n=1 
```

玩家知道庄家没有机会，只能让他输掉任何他下注的赌注，所以他下注“0”金额。因此，他能做的最大值是 X。

测试用例 - 2：

```
m=1, n=0 
```

玩家知道庄家别无选择，只能抽出唯一的牌，即获胜的牌，因此他下注所有的赌注，即“X”并取回“2X”。因此，他以 2 倍的金额退出赌场。

测试用例 - 3：

```
m=1, n=1 : 
```

假设玩家下注“W”金额 - 假设庄家抽奖牌：所以净金额 = X+W 和 m->0 和 n->1 ：因此在这种情况下最大金额 X+W -如果庄家抽出失败牌：所以剩下的净额 = XW 和 m->1 和 n->0 ：因此，在这种情况下，最大数量为 2(XW)

玩家将选择'W'来最大化他的利润，这只能在 2(XW)=X+W => W=X/3 的情况下完成

因此，在这种情况下玩家可以走出的最大数量 = 4X/3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T13:28:02.867

这是来自 F# 的解决方案

建议：除非必须，否则不要进行符号编程。在这种情况下，我们假设 X = 1

```
let stake = Array2D.zeroCreate 100 100
let bankroll =  Array2D.zeroCreate 100 100

for i in 1 .. 99 do
    stake.[0, i] <- 0.0
    bankroll.[0, i] <- 1.0

for i in 1 .. 99 do
    stake.[i, 0] <- 1.0
    bankroll.[i, 0] <- 2.0

stake.[0, 0] <- 0.0
bankroll.[0, 0] <- 1.0

let rec solve i j =
    if bankroll.[i, j] <> 0.0 then (stake.[i, j], bankroll.[i, j])
    else
       let a = snd (solve (i - 1) j)
       let b = snd (solve i (j - 1))
       let x = (b - a) / (a + b)  // solve (1 + x)a = (1 - x)b
       let y = (x + 1.0) * a
       stake.[i, j] <- x
       bankroll.[i, j] <- y
       (x, y)

solve 10 10 // = (0.06182352702, 1.333333333) 
```

似乎只要赢牌的数量等于输牌的数量，玩家可以获得的最大利润总是4X/3

# c# - 是否有任何算法可以在某些模式中对数组进行分类？

> ID：13894834
> 
> 赞同：9
> 
> 时间：2012-12-15T18:14:55.790
> 
> 标签：c#, algorithm, search, pattern-matching, decision-tree

对于数组长度为 5 的简单问题（实际上数组长度可能为 20..）

我有一组**预定义**的模式，例如**AAAAB、AAABA、BAABC、BCAAA、** ...。**每个模式与输入数组的长度相同**。我需要一个函数，它将任何整数数组作为输入，并返回它匹配的**所有模式。**（**一个数组可能匹配一些模式**）尽可能快。

“ **A** ”表示模式中A位置上的所有数字都相等。例如**AAAAA**仅表示所有数字都相等，**{1, 1, 1, 1, 1}**匹配**AAAAA**。

“ **B** ”表示B 位置的数字不等于A 位置的数字。（即非A**数字的通配符） B 表示的数字不必相等**。例如**ABBAA**表示第 1、4、5 个数字等于 x，而第 2、3 个数字不等于 x。 **{2, 3, 4, 2, 2}**匹配**ABBAA**。

“ **C** ”表示该位置可以是任何数字（即数字的通配符）。**{1, 2, 3, 5, 1}**匹配**ACBBA**， **{1, 1, 3, 5, 1}**也匹配**ACBBA**

我正在寻找一种有效的（就比较数而言）算法。它不必是最优的，但不应该是最优的。我觉得它有点像决策树...

### 一个非常简单但效率低的方法如下所示：

*   尝试将每个模式与输入进行匹配。对**{a, b, c, d, e}**说**AABCA**。它检查是否.**`(a=b=e && a!=c)`**

***   如果模式的数量是**n**，模式/数组的长度是**m**，那么复杂度大约是**O(n*m)**** 

 **### 更新：

**请随时为问题提出更好的措辞**，因为我不知道如何使问题简单易懂而不会造成混淆。

理想的算法需要某种准备，例如将模式集转换为决策树。因此对于某些特殊模式集，预处理**后**的复杂性可以达到 O(log n * log m) 之类的东西。（只是猜测）

一些可能有用的数字：预定义模式集的大小约为 30。要匹配的输入数组的数量约为 1000 万。

比如说，如果**AAAAA**和**AAAAC**都在预定义的模式集中。那么如果**AAAAA**匹配，**则 AAAAC 也**匹配。我正在寻找一种可以识别的算法。

### 更新 2

@Gareth Rees 的答案给出了一个 O(n) 解决方案，但假设没有很多“ **C** ”。（否则存储量很大，很多不必要的比较）

我也欢迎任何关于如何处理有许多“ **C** ”的情况的想法，例如，对于长度为 20 的输入数组，每个预定义模式至少有 10 个“ **C** ”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-15T21:08:43.770

这是一个将 O(2 ^(*n*) ) 准备和存储换成 O( *n* )-ish 运行时的想法。如果您的数组不超过您机器的字长（您暗示 20 是典型的大小），或者如果模式中没有太多**C**出现，那么这个想法可能对您有用。（如果这两个条件都不满足，请避免！）

1.  （准备步骤，完成一次。）创建字典*d*将数字映射到模式集。对于每个模式*p*以及该模式中出现的**C**的每个子集*S*，令*n*是具有对应于模式中每个**A的设置位的数字，并且对于***S*中的每个**C**出现。将*p*添加到模式集*d* [ *n* ] 中。

***********   （每次需要将新数组与模式匹配时，都会执行剩余步骤。）创建一个字典，将*数字*映射到数字。

    *   让*j*遍历数组的索引，并且对于每个*j*：

    1.  设*i*为数组中的第*j*个整数。

    2.  如果*i*不在字典*e*中，则设置*e* [ *i* ] = 0。

    3.  设置*e* [ *i* ] = *e* [ *i* ] + 2 ^(ℓ - *j* - 1)其中 ℓ 是数组的长度。

        *   现在*e*的键是数组中不同的数字*i*，值*e* [ *i* ] 有一个设置位，对应于数组中*i的每次出现。*对于字典*d*中找到的每个值*e* [ *i* ]，集合*d* [ *e* [ *i* ]] 中的所有模式都与数组匹配。********** 

 ************（注意：在实践中，您会以相反的方式构建位集，并在步骤 3.3 中使用 2 ^(*j*)而不是 2 ^(ℓ − *j* − 1)，但为了清楚起见，我已经以这种方式描述了算法。）

Here's an example. Suppose we have the patterns **AABBA** and **ACBBA**. In the preprocessing step **AABBA** turns into the number 25 (11001 in binary), and **ACBBA** turns into the numbers 25 (11001 in binary) and 17 (10001 in binary), for the two possible subsets of the occurrences of **C** in the pattern. So the dictionary *d* looks like this:

*   17 → {**ACBBA**}
*   25 → {**AABBA**, **ACBBA**}

After processing the array {1, 2, 3, 5, 1} we have *e* = {1 → 17, 2 → 8, 3 → 4, 5 → 2}. The value *e*[1] = 17 is found in *d*, so this input matches the pattern **ACBBA**.

After processing the array {1, 1, 2, 3, 1} we have *e* = {1 → 25, 2 → 4, 3 → 2}. The value *e*[1] = 25 is found in *d*, so this input matches the patterns **AABBA** and **ACBBA**.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T18:43:54.480

获取模式中第一个的索引`A`，获取该位置的值，然后遍历这些位置。

要检查数组是否`array`与字符串中的模式匹配`pattern`，结果在布尔值中`match`：

```
int index = pattern.IndexOf('A');
int value = array[index];
bool match = true;
for (int i = 0; i < array.Length; i++) {
  if (pattern[i] != 'C' && i != index) {
    if ((pattern[i] == 'A') != (array[i] == value)) {
      match = false;
      break;
    }
  }
} 
```**************

# ios - 细节 UIView 的问题

> ID：13894836
> 
> 赞同：2
> 
> 时间：2012-12-15T18:15:44.263
> 
> 标签：ios, xcode, view, interface

我正在尝试构建我的 iOS 应用程序的界面。一遍又一遍地开始新项目我仍然遇到细节视图控件的问题（见图）。

在这里我得到了截图：

*详细视图显示当用户触摸 UITableView 行时。您可以在模拟器屏幕上看到我的设计和最终结果之间的差异——这就是问题所在*

![在此处输入图像描述](../Images/301db8a2385d613b7613476fcecf6234.png)

*主要xib设计*

![在此处输入图像描述](../Images/a26e743b895fc22d2c96677453dc7275.png)

*这就是我打开详细视图的方式：*

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Navigation logic may go here. Create and push another view controller.

     DetailViewController *detailViewController = [[DetailViewController alloc] initWithNibName:@"DetailViewController" bundle:nil];

     // ...
     // Pass the selected object to the new view controller.
     [self.navigationController pushViewController:detailViewController animated:YES];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:39:33.150

[自动布局](/questions/tagged/autolayout "显示标记为“自动布局”的问题")- 这是我设计中错误的来源。我刚刚在详细 xib 上将其关闭，现在所有控件都在正确的位置

谢谢罗伯

# .net - 将使用 Webmatrix 开发的网站部署到生产环境的许可证

> ID：13894839
> 
> 赞同：0
> 
> 时间：2012-12-15T18:16:11.360
> 
> 标签：.net, web-applications, licensing, webmatrix

我在为大客户开发 .net Web 应用程序方面拥有丰富的经验。

我想为自己创建一个网站。

我不确定是否必须从微软购买许可证才能使用任何与 .net 相关的语言。

我知道 WebMatrix 是微软的开源工具。

我想使用 Asp.net 来建立网站。

我们可以在不购买任何许可证的情况下将在 webmatrix 中开发的网站直接转移到生产环境中吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T18:41:04.863

发布由 ASP.NET 构建的网站不需要许可证，并且可以使用任何免费工具来构建它。WebMatrix 和 Visual C# Express 都是允许您执行此操作的免费工具。

所涉及的唯一许可成本是您托管的操作系统的成本，如果您在托管公司购买托管，这将得到处理。

# mysql - 改进 MySQL 查询以提高性能

> ID：13894843
> 
> 赞同：2
> 
> 时间：2012-12-15T18:16:39.490
> 
> 标签：mysql, performance, select, group-by

我有这个查询，它在两个表`company`和`question`. 这两个表的结构如下：

```
company   |  question
id        |  id
name      |  company_id
          |  sentiment

SELECT company.id as company_id, company.name,  question.sentiment,
(SELECT count(*) FROM question 
WHERE question.sentiment=0 AND question.company_id=company.id) AS count
FROM question
JOIN company ON company.id=question.company_id
 WHERE question.sentiment = 0 GROUP BY company_id ORDER BY count DESC LIMIT 5 
```

我一直在试图弄清楚如何重写它以避免子查询似乎会减慢查询执行速度。问题表有超过 1000 条记录。此外，使用索引已将执行时间从 545.037 秒减少到 180.228 秒，我仍然需要改进这一点。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T18:50:33.220

```
ALTER TABLE question ADD INDEX (sentiment, company_id);

SELECT c.id as company_id, c.name, q.sentiment, q.count
FROM company c
JOIN (
    SELECT company_id, MAX(sentiment) AS sentiment, COUNT(*) AS count
    FROM question
    WHERE sentiment = 0
    GROUP BY company_id
    ORDER BY NULL
) AS q ON c.id = q.company_id
ORDER BY count DESC LIMIT 5 
```

# c++ - 从其类外部访问小部件？

> ID：13894844
> 
> 赞同：0
> 
> 时间：2012-12-15T18:16:43.327
> 
> 标签：c++, qt

在 Qt Creator 中，我有几个这样声明的小部件：

头文件：

```
 class MapViewer : public QGraphicsView
{
    Q_OBJECT

public:
    explicit MapViewer(QGraphicsScene *scene, QWidget *parent = 0);
    ~MapViewer();

public slots:
    void mousePressEvent(QMouseEvent *event);

};

// Declaration for the map editor window.
class MapEditor : public QMainWindow
{
    Q_OBJECT

public:
    explicit MapEditor(QWidget *parent = 0);
    ~MapEditor();

public:
    QLayout *editorLayout;
    QPushButton *btn;
    QGraphicsScene *mapScene;
    MapViewer *mapView;

private:
    Ui::MapEditor *ui;
}; 
```

CPP 文件：

```
 MapEditor::MapEditor(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MapEditor)
{

    ui->setupUi(this);
    this->setWindowTitle("2DXY :: Map Editor");
    this->setGeometry(10,10,1170,750);
    editorLayout = new QVBoxLayout; // Create a new layout
    this->setLayout(editorLayout); // Set the widget's layout to our newly created layout.

    mapScene = new QGraphicsScene(); // Create a new graphics scene to draw upon.

    mapView = new MapViewer(mapScene,this); // Create a new graphics view to display our scene - set its parent to 'this' so that it doesn't open in a new window.
    mapView->setHorizontalScrollBarPolicy(Qt::ScrollBarAlwaysOff);
    mapView->setVerticalScrollBarPolicy(Qt::ScrollBarAlwaysOff);
    mapView->setGeometry(20,20,1178,546); // Width first, then height. 
```

和：

```
void MapViewer::mousePressEvent(QMouseEvent *event)
{
    // Show an empty message box, just to check that the event handler works!
    QMessageBox *notification = new QMessageBox();
    notification->show();
    notification->exec();
    // Some how access the same QGraphicsScene and View (mapScene, mapView) as above, so
    // I can update their contents on the open form / window.

} 
```

如您所见，我希望再次访问图形场景以更新它，然后重绘它（或其他）。但我根本无法访问图形场景，尽管以不同方式声明小部件进行了几个小时的反复试验。

我知道监听器本身可以工作，因为如果它设置为打开一个新的消息框，或者输出到调试窗口，那么它就可以工作，只是我无法访问我已经定义的小部件。

我觉得这个问题有一个（相对）简单的解决方案，我只是错过了一些明显的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T18:22:55.017

您将 传递`QGraphicsScene`给`MapRender`对象的构造函数。您如何处理其构造函数中的场景？理想情况下，您应该将其存储为`MapRender`. 例如：

```
class MapRender {
public:
    MapRender(QGraphicsScene* scene)
      : scene_(scene)
    {
    }

public slots:
    void mousePressEvent(QMouseEvent *event);

private:
    QGraphicsScene* scene_;
} 
```

现在在您的实现中`mousePressEvent`，您可以访问场景成员：

```
void MapRender::mousePressEvent(QMouseEvent *event) {
    int CursorX = event->globalX();
    int CursorY = event->globalY();

    QGraphicsRectItem *clickedBox = new QGraphicsRectItem(40,40,32,32);
    clickedBox->setBrush(QBrush(Qt::blue));

    scene_->addItem(clickedBox);
} 
```

请记住，理想情况下，您应该将构造函数的实现放在您的 cpp 文件中，但为了简洁起见，我的示例在声明中这样做了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T11:28:18.293

```
void MapViewer::mousePressEvent(QMouseEvent *event)
{
    // Show an empty message box, just to check that the event handler works!
    QMessageBox *notification = new QMessageBox();
    notification->show();
    notification->exec();

    //  To add something whenever the user clicks, you don't need the view,
    //  just the scene.
    scene()->addItem( new MyItem() );
} 
```

记住`MapViewer`派生自`QGraphicsView`并且视图必须知道它所属的场景 - 所以它有一个`scene()`方法来返回它，你继承了它。

# c++ - 为什么数组比向量快得多？

> ID：13894846
> 
> 赞同：4
> 
> 时间：2012-12-15T18:16:53.470
> 
> 标签：c++, arrays, performance, vector

这是比较向量与数组的公平测试吗？速度上的差异似乎太大了。我的测试表明阵列快 10 到 100 倍！

```
#include "stdafx.h"
#include <iostream>
#include <vector>
#include <windows.h>
#include <stdint.h>

using namespace std;

double PCFreq = 0.0;
__int64 CounterStart = 0;

using namespace std;

void StartCounter()
{
    LARGE_INTEGER li;
    if(!QueryPerformanceFrequency(&li))
    std:cout << "QueryPerformanceFrequency failed!\n";

    PCFreq = double(li.QuadPart)/1000000000;

    QueryPerformanceCounter(&li);
    CounterStart = li.QuadPart;
}
double GetCounter()
{
    LARGE_INTEGER li;
    QueryPerformanceCounter(&li);
    return double(li.QuadPart-CounterStart)/PCFreq;
}

int _tmain(int argc, _TCHAR* argv[])
{
    //Can do 100,000 but not 1,000,000
    const int vectorsize = 100000;
    cout.precision(10);

    StartCounter();
    vector<int> test1(vectorsize);
    for(int i=0; i<vectorsize; i++){
        test1[i] = 5;
    }
    cout << GetCounter() << endl << endl;

    StartCounter();
    int test2[vectorsize];
    for(int i=0; i<vectorsize; i++){
        test2[i] = 5;
    }
    cout << GetCounter() << endl << endl;

    cout << test2[0];

    int t = 0;
    cin >> t;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-15T18:43:16.500

It depends on what you are comparing.

Your benchmark measures both *setup* time and *access* times together. It's doubtless that `std::vector` has a more expensive setup time. This is because it needs to allocate memory, and then (by necessity of the standard) call default constructors on all the elements. Which for a POD type, means zeroing.

So if you're trying to measure access times, then no your benchmark isn't accurate.

Here's some numbers to digest:

**Original Code:**

```
StartCounter();
vector<int> test1(vectorsize);

for(int i=0; i<vectorsize; i++){
    test1[i] = 5;
}
cout << GetCounter() << endl << endl; 
```

**Time: 444353.5206**

* * *

Start timing *after* declaring and initializing the `vector`:

```
vector<int> test1(vectorsize);

StartCounter();
for(int i=0; i<vectorsize; i++){
    test1[i] = 5;
}
cout << GetCounter() << endl << endl; 
```

**Time: 15031.76101**

* * *

And for the array:

```
StartCounter();
int test2[vectorsize];
for(int i=0; i<vectorsize; i++){
    test2[i] = 5;
}
cout << GetCounter() << endl << endl; 
```

**Time: 38129.345**

The times are about the same regardless of whether the declaration is timed. This is likely because stack allocation is done all at once upon entry to the function.

* * *

Basically, the vector memory allocation and initialization is taking a disproportionate amount of time. But the actual loop is fast.

I'll also note that your current benchmark framework is still sightly flawed. You only make one pass over each array. So cache-effects and lazy-allocation will be significant.

The reason why the array is now slower is likely due to lazy-allocation. The array is allocated, but it hasn't been committed yet. Lazy allocation means that it is committed upon first access - which involves a page-fault and a context-switch to the kernel.

* * *

Here's a fairer test with an outer loop to increase the benchmark time:

```
vector<int> test1(vectorsize);

StartCounter();
for (int c = 0; c < 10000; c++){
    for(int i=0; i<vectorsize; i++){
        test1[i] = 5;
    }
}
cout << GetCounter() << endl << endl; 
```

**Time: 227330454.6**

```
int test2[vectorsize];
memset(test2,0,sizeof(test2));

StartCounter();
for (int c = 0; c < 10000; c++){
    for(int i=0; i<vectorsize; i++){
        test2[i] = 5;
    }
}
cout << GetCounter() << endl << endl;
cout << test2[0]; 
```

**Time: 212286228.2**

So no an array is ***NOT*** faster than a vector for steady-state access. It's just tricky to benchmark properly.

# c++ - 对于 C++ 专家来说应该很容易的编译错误

> ID：13894848
> 
> 赞同：0
> 
> 时间：2012-12-15T18:17:03.590
> 
> 标签：c++, visual-studio

在发现编译器不知道如何查找的错误时，C++ 技能并不那么敏锐。显然没有缺少';' 之前 '*'。也许是它不喜欢包含语句的情况之一。有人可以帮助找到错误并解释为什么会抛出它吗？谢谢！

主文件

```
#include <iostream>
#include "Grid.h"
using namespace std;
int main()
{
    Grid myGrid(15, 15, 15, 3);
    myGrid.PrintGrid();
    cout << endl << "The node closest to <0,0> is " << myGrid.GetNodeClosestToOrigin()->letter << "." << endl;
    system("pause");
    return 0;
} 
```

边缘.h

```
#pragma once

#include "Node.h"
using namespace std;
class Edge
{
public:
    Node* destination;
    double weight;
    Edge(Node* destination, double weight);
    ~Edge(void);
}; 
```

边缘.cpp

```
#include "Edge.h"
#include "Node.h"
using namespace std;
Edge::Edge(Node* destination, double weight)
{
    this->destination = destination;
    this->weight = weight;
}
Edge::~Edge(void)
{
} 
```

节点.h

```
#pragma once
#include <vector>
#include "Node.h"
#include "Edge.h"
using namespace std;
class Node
{
public:
    int x;
    int y;
    char letter;
    vector<Edge> edges;
    Node(void);
    ~Node(void);
    void AddEdge(Node* destination);
    bool ContainsEdgeWithDestination(Node* destination);
    double GetDistanceTo(int x, int y);
    double GetDistanceTo(Node* node);
}; 
```

节点.cpp

```
#include "Node.h"
using namespace std;
Node::Node(void)
{
}
Node::~Node(void)
{
}
void Node::AddEdge(Node* destination)
{
    double weight = GetDistanceTo(destination);

    Edge myEdge(destination, weight);
    this->edges.push_back(myEdge);
}
bool Node::ContainsEdgeWithDestination(Node* destination)
{
    for (int i = 0; i < edges.size(); i++)
    {
        if (edges[i].destination == destination)
            return true;
    }
    return false;
}
double Node::GetDistanceTo(int x, int y)
{
    double a = ((double)x - (double)this->x)*((double)x - (double)this->x);
    double b = ((double)y - (double)this->y)*((double)y - (double)this->y);
    return sqrt(a + b);
}
double Node::GetDistanceTo(Node* node)
{
    return GetDistanceTo(node->x, node->y);
} 
```

更新：

边缘.h

```
#pragma once

#include "Node.h"

using namespace std;

class Grid
{
private:
    Node *nodes;
    int gridWidth;
    int gridHeight;
    int numNodes;
    int neighborsPerNode;
    double GetDistance(int x1, int y1, int x2, int y2);
public:
    Grid(int gridWidth, int gridHeight, int numNodes, int neighborsPerNode);
    ~Grid();
    void Initialize();
    bool IsNodeAtLocation(int x, int y);
    Node* GetNodeAtLocation(int x, int y);
    Node* GetNodeClosestToOrigin();
    void PrintGrid();
}; 
```

网格.cpp

```
#include <iostream>
#include <random>
#include <math.h>
#include <stdlib.h>
#include <time.h>

#include "Grid.h"
#include "Node.h"

using namespace std;

Grid::Grid(int gridWidth, int gridHeight, int numNodes, int neighborsPerNode)
{
    this->gridWidth = gridWidth;
    this->gridHeight = gridHeight;
    this->numNodes = numNodes;
    this->neighborsPerNode = neighborsPerNode;

    nodes = new Node[numNodes];

    Initialize();
}

Grid::~Grid(void)
{
}

void Grid::Initialize()
{
    srand(time(NULL));

    // Create nodes.
    for (int i = 0; i < numNodes; i++)
    {
        int x;
        int y;

        do
        {
            // Randomize a position for a new node.
            x = rand() % gridWidth;
            y = rand() % gridHeight;
        } while (IsNodeAtLocation(x, y));

        // Position is available to place new node.
        nodes[i].x = x;
        nodes[i].y = y;
        nodes[i].letter = 65 + i;
    }

    // Create edges.
    int edgeCount[15];

    for (int i = 0; i < numNodes; i++) edgeCount[i] = 0;

    for (int i = 0; i < numNodes; i++)
    {
        if (edgeCount[i] < neighborsPerNode)
        {
            for (int j = edgeCount[i]; j < neighborsPerNode; j++)
            {
                // Randomize a node to create an edge to.
                int destination;

                while(true)
                {
                    destination = rand() % numNodes;
                    // Check if destination is current node.
                    if (destination == i) continue;

                    // Check if destination already has maximum amount of edges.
                    if (edgeCount[destination] >= neighborsPerNode) continue;

                    // Check if node already has an edge with this destination.
                    if (nodes[i].ContainsEdgeWithDestination(&nodes[destination])) continue;

                    // Should be ok. Create new edge.
                    nodes[i].AddEdge(&nodes[destination]);
                    nodes[destination].AddEdge(&nodes[i]);
                    edgeCount[destination]++;
                    break;
                }
            }
        }
    }

    cout << "We're in business" << endl;
}

bool Grid::IsNodeAtLocation(int x, int y)
{
    for (int i = 0; i < numNodes; i++)
    {
        if (nodes[i].x == x && nodes[i].y == y)
            return true;
    }

    return false;
}

Node* Grid::GetNodeAtLocation(int x, int y)
{
    for (int i = 0; i < numNodes; i++)
    {
        if (nodes[i].x == x && nodes[i].y == y)
            return &nodes[i];
    }

    return NULL;
}

Node* Grid::GetNodeClosestToOrigin()
{
    double smallestDistance = 999999.0;
    int indexOfNode;

    for (int i = 0; i < numNodes; i++)
    {
        double distance = GetDistance(0, 0, nodes[i].x, nodes[i].y);

        if (distance < smallestDistance)
        {
            smallestDistance = distance;
            indexOfNode = i;
        }
    }

    return &nodes[indexOfNode];
}

double Grid::GetDistance(int x1, int y1, int x2, int y2)
{
    double a = ((double)x2 - (double)x1)*((double)x2 - (double)x1);
    double b = ((double)y2 - (double)y1)*((double)y2 - (double)y1);
    return sqrt(a + b);
}

void Grid::PrintGrid()
{
    for (int i = 0; i < gridWidth * 2 + 2; i++)
        cout << "-";
    cout << endl;

    for (int y = 0; y < gridHeight; y++)
    {
        cout << "|";

        for (int x = 0; x < gridWidth; x++)
        {
            Node* myNode = GetNodeAtLocation(x, y);

            if (myNode != NULL)
                cout << myNode->letter << " ";
            else
                cout << "  ";
        }
        cout << "|" << endl;
    }

    for (int i = 0; i < gridWidth * 2 + 2; i++)
        cout << "-";
    cout << endl;
} 
```

错误列表： ![在此处输入图像描述](../Images/0daa00826aaafd37fa095e34894cd94f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T18:26:44.663

您有一个循环包含问题 - 节点包含边缘，反之亦然。在头文件中，替换

```
#include <Node.h> 
```

和

```
class Node; 
```

（类似于 Edge），它应该可以工作。

# php - 在 PHP heredoc 中间插入一个函数结果

> ID：13894849
> 
> 赞同：1
> 
> 时间：2012-12-15T18:17:07.073
> 
> 标签：php

> **可能重复：**
> [在 HEREDOC 字符串中调用 PHP 函数](https://stackoverflow.com/questions/104516/calling-php-functions-within-heredoc-strings)

我需要将函数的结果插入到heredoc的中间..

```
$r = func1();
$s = func2();

echo <<<EOT

line1
$r
$s
line3
EOT; 
```

我不确定是否有更好的方法来编写它，因为我需要事先评估所有使代码变得愚蠢的函数。

如果有类似的东西更好..

```
echo <<<EOT

line1
{func1()}
{func2()}
line3
EOT; 
```

当然上面的代码是行不通的，只是想表达一下我的想法……

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T18:38:30.233

不，没有更好的方法可以做到这一点。

Heredoc 字符串语法的行为很像双引号字符串语法。您不能将函数名称作为表达式放在双引号字符串中，就像您可以使用 heredoc 一样。所以你正在做的很好，这就是你应该做的。只有当值是变量时，才能在 PHP 中的字符串语法中获得插值。

例如...

```
$foo = function() { return 'value'; };
echo <<<SOMEHEREDOC
{$foo()}
SOMEHEREDOC;
// Is the same as
echo "{$foo()}";
// Is the ssame as
$foo = 'strtoupper';
echo "{$foo('hello world')}"; 
```

上面的代码将输出

> 价值
> 
> 价值
> 
> 你好世界

# ruby-on-rails - 在传递到rails生成器中的钩子之前更改参数

> ID：13894852
> 
> 赞同：0
> 
> 时间：2012-12-15T18:17:21.927
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, thor

我正在尝试制作简单的视图生成器并使用 DRY 原则，我不想拥有自己的 html (erb/haml/slim) 模板。我希望我的生成器连接到现有的模板引擎并传递一些参数。

我的`view_generator.rb`文件如下所示：

```
class ViewGenerator < Rails::Generators::NamedBase
  source_root File.expand_path('../templates', __FILE__)
  argument :attributes, :type => :array, :default => [], :banner => "field:type field:type"

def some_custom_method
  (...)
end

hook_for :template_engine, :as => :scaffold

end 
```

一切都像这样正常工作。我想做的`some_custom_method`是添加几个属性：

```
def some_custom_method
  new_attribute = Rails::Generators::GeneratedAttribute.new("description")
  new_attribute.type = :integer
  attributes << new_attribute
end 
```

发生的事情是我`new_attribute`在`attributes`数组中插入，但是当`hook_for`执行时，`attribute`变量恢复为从命令行传递的原始变量。

我怎样才能绕过这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T20:16:58.750

在`some_custom_method`调用点时，属性已经设置（通过`ARGV`）并且通过检查代码我看不到从那里改变它们的清晰方法。您可以通过覆盖`start`生成器中的类方法并直接操作 args 来使用另一种方法，如下所示：

```
class ViewGenerator < Rails::Generators::NamedBase
  # your code ...
  def self.start(args, config)
    args.insert(1, 'description:integer') # 0 being the view name
    super
  end
end 
```

# python - emacs 的正确 flymake 配置是什么？（使用 Python.el）

> ID：13894858
> 
> 赞同：7
> 
> 时间：2012-12-15T18:18:13.830
> 
> 标签：python, emacs, elisp, flymake

我使用 emacs 作为 python IDE。我安装了 flymake，但是，每当我使用 .py 文件时，它都会显示以下错误

> 错误（flymake）：Flymake：无法使用 args 启动语法检查进程“pycheckers”（string-operations_flymake.py）：正在搜索程序：没有这样的文件或目录，pycheckers。Flymake 将关闭

我对 flymake 的 .emacs 配置如下：

```
;; flymake
(add-to-list 'load-path "~/.emacs.d/vendor")
(add-hook 'find-file-hook 'flymake-find-file-hook)
(when (load "flymake" t)
  (defun flymake-pyflakes-init ()
    (let* ((temp-file (flymake-init-create-temp-buffer-copy
               'flymake-create-temp-inplace))
       (local-file (file-relative-name
            temp-file
            (file-name-directory buffer-file-name))))
      (list "pycheckers"  (list local-file))))
   (add-to-list 'flymake-allowed-file-name-masks
             '("\\.py\\'" flymake-pyflakes-init)))
(load "~/.emacs.d/vendor/flymake-cursor.el")
(global-set-key [f10] 'flymake-goto-prev-error)
(global-set-key [f11] 'flymake-goto-next-error) 
```

有关如何解决此问题的任何建议

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-15T19:14:24.113

安装[flycheck](https://github.com/lunaryorn/flycheck)。应该开箱即用。

# c++ - 是否可以重载 wcout << 运算符以用 WriteConsoleW 替换它？

> ID：13894860
> 
> 赞同：0
> 
> 时间：2012-12-15T18:18:21.583
> 
> 标签：c++, winapi, console, operator-overloading, widechar

问题是 MinGW 编译的程序在通过 wcout 在控制台上打印非 ascii 字符时存在问题，输出可能显示来自不同代码页的字符或完全空白。但是winapi`WriteConsoleW`完美运行。所以我问是否有可能改变 << 运算符的行为，这样它就可以调用 winapi 方法。

（我没有找到任何示例，而且我是 c++ 新手，有很多示例如何重载对象，但没有找到如何使用字符串或宽字符数组来实现。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T18:29:10.593

您可以在需要发送字符的任何地方创建合适的流缓冲区发送字符。您可以使用`rdbuf()`设置使用的流缓冲区`std::wcout`。我认为我过去没有提供使用`wchar_t`as 字符类型的示例，但它可以作为`char`.

# python - pyside 连接错误“RuntimeError: 无法连接信号 clicked()”

> ID：13894866
> 
> 赞同：3
> 
> 时间：2012-12-15T18:19:05.560
> 
> 标签：python, pyside, qt-designer

```
from PySide.QtCore import *
from PySide.QtGui import *

import sys
import stackwid

class Dialog(QDialog,stackwid.Ui_Dialog):

    def __init__(self,parent = None):
        super(Dialog,self).__init__(parent)
        self.setupUi(self)

        self.camButton.clicked.connect(self.set())

    def set(self):

        self.stackedWidget.setCurrentIndex(1)

app = QApplication(sys.argv)
form = Dialog()
form.show()
app.exec_() 
```

我想将 camButton(PushButton) 发出的 clicked() 信号连接到作为函数 set() 的插槽。这只是不运行。

```
RuntimeError: Failed to connect signal clicked() 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-15T18:35:25.257

您没有将信号连接到您的`set()`-function，而是连接到它的返回值。您只需要删除括号，然后它应该可以工作：

```
self.camButton.clicked.connect(self.set) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-14T07:05:47.813

将额外的参数传递给插槽，这可能会对您有所帮助，祝您好运！

```
self.camButton.clicked.connect(lambda: self.set(index))

def set(self, index):

    self.stackedWidget.setCurrentIndex(index) 
```

# ruby - 如何使用 Rubymotion 命令行启动不同的模拟器

> ID：13894867
> 
> 赞同：7
> 
> 时间：2012-12-15T18:19:23.317
> 
> 标签：ruby, rubymotion

在[Rubymotion 中](http://www.rubymotion.com)，我们从终端开始`rake`

```
Ankits-MacBook-Pro:Magic ankitgupta$ rake 
     Build ./build/iPhoneSimulator-6.0-Development
  Simulate ./build/iPhoneSimulator-6.0-Development/Magic.app
(main)> 
```

默认情况下它正在启动`iPhoneSimulator-6.0-Development`。我该如何开始`iPhone 5.1`？`5.0 Simulator`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-15T21:24:40.520

您应该能够通过 rake 命令设置目标，例如：

```
$ rake target=5.1 # => iOS 5.1 
```

在此拉取请求中注明：[https ://github.com/HipByte/RubyMotion/pull/10](https://github.com/HipByte/RubyMotion/pull/10)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-27T07:25:43.950

要更改目标设备和操作系统，请尝试以下操作：

```
bundle exec rake target=8.4 device_name="iPad 2" 
```

# c++ - 二叉搜索树 - 复制每个项目

> ID：13894870
> 
> 赞同：2
> 
> 时间：2012-12-15T18:19:52.930
> 
> 标签：c++, tree, binary-tree, binary-search-tree, heap-corruption

我正在尝试复制给定的 BST

假设我得到了这个：

```
 2
  / \
 1   3 
```

我想做的是：

> ```
>  2
>      / \
>     2   3
>    /   /
>   1   3
>  /
> 1 
> ```

```
void bTree::mulTree(tNode *tree)
{
    if (!tree)
        return;
    if (tree->left)
        tree->left->left = insert(tree->left->value);
    else
        tree->left = insert(tree->value);

    mulTree(tree->left->left);

    if (tree->value != tree->left->value)
    {
        tree->left->value = tree->value;
        mulTree(tree->right);
    }
} 
```

使用此代码，我得到了应有的左侧，
但是如果我尝试在右侧进行更改，则会出现堆错误

```
"//mulTree(tree->right);" 
```

如果我运行它，我会得到：
`"HEAP: Free Heap block ... after it was freed"`
但我不明白它已经在哪里被释放了...... =\

我在此期间收到错误：

```
tree->left = insert(tree->value); 
```

插入代码：

```
tNode* bTree::insert(int value)
{
    tNode *temp = new tNode();
    temp->value = value;
    return temp;
} 
```

# c# - 在 64 位系统上使用 odbc32 进行 DLLImport

> ID：13894873
> 
> 赞同：4
> 
> 时间：2012-12-15T18:20:04.780
> 
> 标签：c#, odbc, 64-bit, sqldatatypes

我正在尝试使用 SQLDatasources 在 VS Express 2012 (C#) 的 64 位 Windows 8 系统上获取 ODBC 数据源列表，如本文所述，我指的是 Stephan Keller 的回复[。](https://stackoverflow.com/questions/562016/listing-odbc-data-sources-in-c-sharp)

如果选择了目标平台的“首选 32 位”选项，他的代码编译良好并且运行没有任何错误，但如果我使用没有“首选 32 位”或“x64”作为目标平台的“anycpu”，则会遇到内存访问冲突. 我猜（但不确定）这是因为在这种情况下调用 SQLDataSources 的参数没有正确对齐，对吗？（我可以在 Process Explorer 中看到该程序使用 c:\windows\system32\odbc32.dll，在 64 位 Windows 系统上，它是 64 位的，所以据我所知，使用的 dll 是正确的）。

假设我的猜测是正确的，我搜索但找不到从 ODBC32.dll 中使用的 SQL 数据类型（如 SQLSmallInt，MS 文档中使用的那些，Stepan 已链接到他的答案）到 .Net 64 的映射参考位数据类型。任何指针？

提前致谢，

托马斯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T03:51:40.587

我遇到了同样的问题，我所做的是将参数中的所有整数替换为长整数。

旧电话：

```
[DllImport("odbc32.dll")]
internal static extern int SQLDataSources(int EnvHandle, int Direction, StringBuilder ServerName, int ServerNameBufferLenIn, ref int ServerNameBufferLenOut, StringBuilder Driver, int DriverBufferLenIn, ref int DriverBufferLenOut);

[DllImport("odbc32.dll")]
internal static extern int SQLAllocEnv(ref int EnvHandle); 
```

新来电：

```
[DllImport("odbc32.dll")]
internal static extern int SQLDataSources(long EnvHandle, long Direction, StringBuilder ServerName, long ServerNameBufferLenIn, ref long ServerNameBufferLenOut, StringBuilder Driver, long DriverBufferLenIn, ref long DriverBufferLenOut);

[DllImport("odbc32.dll")]
internal static extern int SQLAllocEnv(ref long EnvHandle); 
```

32 位 DSN 不会出现在 64 位呼叫中。

这是我正在使用的方法（运行 Windows 8 x64）：

```
[DllImport("odbc32.dll")]
        internal static extern int SQLDataSources(long EnvHandle, long Direction, StringBuilder ServerName, long ServerNameBufferLenIn,
            ref long ServerNameBufferLenOut, StringBuilder Driver, long DriverBufferLenIn, ref long DriverBufferLenOut);

        [DllImport("odbc32.dll")]
        internal static extern int SQLAllocEnv(ref long EnvHandle);

        //[DllImport("odbc32.dll")]
        //internal static extern int SQLDataSources(int EnvHandle, int Direction, StringBuilder ServerName, int ServerNameBufferLenIn,
        //    ref int ServerNameBufferLenOut, StringBuilder Driver, int DriverBufferLenIn, ref int DriverBufferLenOut);

        //[DllImport("odbc32.dll")]
        //internal static extern int SQLAllocEnv(ref int EnvHandle);

        public static List<ODBC_System_DSN_Entry> ListODBCsources()
        {
            List<ODBC_System_DSN_Entry> entries = new List<ODBC_System_DSN_Entry>();

            long envHandle = 0;
            const long SQL_FETCH_NEXT = 1;
            const long SQL_FETCH_FIRST_SYSTEM = 32;

            if (SQLAllocEnv(ref envHandle) != -1)
            {
                long ret;
                StringBuilder serverName = new StringBuilder(1024);
                StringBuilder driverName = new StringBuilder(1024);
                long snLen = 0;
                long driverLen = 0;
                ret = SQLDataSources(envHandle, SQL_FETCH_FIRST_SYSTEM, serverName, serverName.Capacity, ref snLen,
                            driverName, driverName.Capacity, ref driverLen);
                while (ret == 0)
                {
                    //System.Windows.Forms.MessageBox.Show(serverName + System.Environment.NewLine + driverName);
                    entries.Add(new ODBC_System_DSN_Entry(serverName.ToString(), driverName.ToString()));
                    ret = SQLDataSources(envHandle, SQL_FETCH_NEXT, serverName, serverName.Capacity, ref snLen,
                            driverName, driverName.Capacity, ref driverLen);
                }
                return entries;
            }
            return null;
        }

        public struct ODBC_System_DSN_Entry
        {
            internal String _server;
            internal String _driver;

            internal ODBC_System_DSN_Entry(String server, String driver)
            {
                _server = server;
                _driver = driver;
            }

            public String Server { get { return _server; } }
            public String Driver { get { return _driver; } }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T08:50:26.913

我要做的第一件事就是正确设置参数类型。那些名称长度 ptr 参数是 SQLSMALLINT，而不是整数。此外，ODBC API 返回 SQLRETURN 类型而不是 int。请参阅[SQLDatSources](http://msdn.microsoft.com/en-us/library/windows/desktop/ms711004%28v=vs.85%29.aspx)。

# php - 将mysql列值从'0'切换到'1'？

> ID：13894878
> 
> 赞同：-2
> 
> 时间：2012-12-15T18:20:33.920
> 
> 标签：php, mysql

我有一个用户可以选择批准或删除的用户评论列表。我有一个列出待处理评论的reviews.php 文件、一个approve_review.php 文件和一个delete_review.php 文件。

一旦用户批准评论，我需要将 mysql 列“批准”从“0”更改为“1”。同样适用于删除，但不是更新“批准”，而是更新“删除”。

我尝试过的一切都不起作用。请有人能告诉我哪里出错了。谢谢。

评论.php：

```
<?php
    $pending_set = get_pending_reviews();
    while ($reviews = mysql_fetch_array($pending_set)) {
?>
        <div class="prof-content-pend-reviews" id="reviews">
            <div class="pend-review-content">
                <?php echo "{$reviews['content']}"; ?>
            </div>
            <a href="includes/approve_review.php"><div class="approve"></div></a>
            <a href="includes/delete_review.php"><div class="delete"></div></a>    
        </div>
<? }  ?> 
```

批准审查.php：

```
<?php
    require_once("session.php"); 
    require_once("functions.php");
    require('_config/connection.php');
    approve_review ($_GET['review'], $_SESSION['user']);
    header('Location: http://localhost/ptb1/reviews.php');
?> 
```

功能：

```
function approve_review($review_id, $user) {
    global $connection;
    global $_SESSION;
    $query = "UPDATE ptb_reviews
            SET approved='1'
            WHERE id=$review_id 
            AND to_user_id=$user";
    mysql_query($query, $connection);           
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T18:24:23.137

approve_review.php 缺少一个参数......它必须是这样的：

```
<a href="includes/approve_review.php?review=TheID"><div class="approve"></div></a> 
```

您必须用您的 php 变量替换 TheID。

好样的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T18:25:11.030

这里有一些问题：

*   您实际上并没有向脚本发送任何参数；
*   您的脚本对 sql 注入开放，您应该切换到 PDO / mysqli 中的准备好的语句。

# c# - 如何在 WinRT 中创建 Word 文档

> ID：13894881
> 
> 赞同：6
> 
> 时间：2012-12-15T18:21:12.363
> 
> 标签：c#, wpf, ms-word, microsoft-metro, windows-runtime

我目前正在使用 WinRT/C# 开发应用程序。它是第二个版本，首先是在 WPF 上开发的。在应用程序中，我需要生成一些报告并将它们导出到 MS Word 文档中。在应用程序的第一个版本中，我使用 MS Office Interop 在 MS Word 中导出报告，但在 WinRT 中不支持 MS Office Interop。有没有什么简单的方法可以在 WinRT 中创建 MS Word 文档？（我知道有第三方库，例如[WinRT 的 Syncfusion，](http://www.syncfusion.com/products/winrt)但我不想使用它们）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T09:34:25.080

有一个免费的解决方案可以将您的文档格式化为 rtf。

为此，我创建了一个新库来帮助开发人员创建与 word 兼容的文档。

你可以在那里找到这个：[https ://github.com/crogun/WinRTF-For-WinRT](https://github.com/crogun/WinRTF-For-WinRT)

该代码是开源的，您可以根据需要对其进行扩展。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-16T07:57:36.850

您将无法从 Windows 应用商店应用程序中使用 MS Office 互操作。不过，您可以使用[Open XML SDK](https://www.microsoft.com/en-us/download/details.aspx?id=5124)。它也[可以在 NuGet 上使用，](http://nuget.org/packages/DocumentFormat.OpenXml)并且似乎与 WinRT 兼容。

使用它不会像使用互操作类那么容易，而且您只能创建基于 XML 的`docx`文件，而不是二进制`doc`文件。另一方面，您的用户不需要安装 Word，他们将能够在 OpenOffice 或 LibreOffice 等其他 Office 套件中打开文件。MSDN 上有一[组教程](http://msdn.microsoft.com/en-us/library/cc850833%28v=office.14%29)可以帮助您入门。

# python - 从非网页客户端上传图片到 Google App Engine

> ID：13894883
> 
> 赞同：1
> 
> 时间：2012-12-15T18:21:26.310
> 
> 标签：python, google-app-engine, file-upload, blobstore, form-data

我有一个 Google App Engine 应用程序 (Python)，它需要允许用户将图像上传到 blobstore。客户端，而不是 Web 应用程序，将是本地移动应用程序。我有以下代码进行上传：

```
class ImageGetUploadURLHandler(webapp2.RequestHandler):
    def get(self):
        self.response.headers['Content-Type'] = 'text/plain'
        self.response.out.write(blobstore.create_upload_url('/imgupload'))

class ImageUploadHandler(blobstore_handlers.BlobstoreUploadHandler):
  def post(self):
    imgInfo = self.get_uploads('img')[0]
    logging.info('Uploading image %s of size %i'.format(imgInfo.filename, imgInfo.size))
    self.redirect('/echo?val=%s' % str(imgInfo.key())) 
```

`ImageUploadHandler`安装在, 的`/imgupload`位置`/echo`是一个简单的处理程序，可以回显`val`作为文本/纯文本传入的任何内容。截至目前，我只是在使用 REST 测试工具，因为我还没有启动移动应用程序。我对 ImageGetUploadHandler 进行了 GET，并将生成的链接复制到测试应用程序中，在该应用程序中，我使用了一个带有 multipart/form-data 的 POST，其中一个图像文件位于上传 URL 的正确键下。当我这样做时，我收到以下错误：

```
ValueError: Invalid boundary in multipart form: '' 
```

我不知道出了什么问题。非常感谢任何帮助。

# sql - Tune SQL Query-out put 每个性能计数器的每周平均值

> ID：13894885
> 
> 赞同：1
> 
> 时间：2012-12-15T18:21:58.243
> 
> 标签：sql, sql-server-2000

我有一些我正在尝试报告的性能数据。

我需要输出给我每个计数器每月每周的平均值。

这是使用日期/时间字段的查询（即'2012-01-01 00:00:00.750'）

```
SELECT MachineName ,
        CounterName ,
        InstanceName, 
        CounterValue,
        ObjectName,
        CounterDateTime 
FROM    dbo.CounterDetails cdt

        INNER JOIN dbo.CounterData cd ON cdt.CounterID = cd.CounterID
        INNER JOIN DisplayToID d ON d.GUID = cd.GUID

WHERE   MachineName = '\\SERVER1'

AND CounterDateTime BETWEEN '2012-01-01 00:00:00.750' AND '2012-01-31 23:59:00.750'
GROUP BY ObjectName, CounterName, InstanceName, CounterValue, CounterDateTime, MachineName
ORDER BY CounterDateTime 
```

感谢回复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T07:48:57.060

I rearranged your fields as it don't make sense to me, but you can try something this:

```
SELECT  MachineName
        , ObjectName
        , InstanceName
        , CounterName
        , DATEPART( YEAR, CounterDateTime ) As YearNo
        , DATEPART( MONTH, CounterDateTime ) As MonthNo
        , DATEPART( WEEK, CounterDateTime ) AS WeekNo
        , AVG(CounterValue) AS avgCounterValue
FROM    dbo.CounterDetails cdt
        INNER JOIN dbo.CounterData cd
            ON cdt.CounterID = cd.CounterID
        INNER JOIN DisplayToID d
            ON d.GUID = cd.GUID
WHERE       MachineName = '\\SERVER1'
            AND CounterDateTime BETWEEN '2012-01-01 00:00:00.750' AND '2012-01-31 23:59:00.750'
GROUP BY    MachineName, ObjectName, InstanceName, CounterName
            , DATEPART( YEAR, CounterDateTime )
            , DATEPART( MONTH, CounterDateTime )
            , DATEPART( WEEK, CounterDateTime )
ORDER BY    MachineName, ObjectName, InstanceName, CounterName
            , DATEPART( YEAR, CounterDateTime )
            , DATEPART( MONTH, CounterDateTime )
            , DATEPART( WEEK, CounterDateTime ) 
```

If your table is large, you might want to create an index on [MachineName] and [CounterDateTime]

# java - 原始布尔到字符串连接/转换

> ID：13894892
> 
> 赞同：9
> 
> 时间：2012-12-15T18:22:39.133
> 
> 标签：java, string, casting, boolean, string-concatenation

这是如何运作的？我似乎找不到答案。

```
boolean bool=true;
System.out.println("the value of bool is : " + true);
//or
System.out.println("the value of bool is : " + bool); 
```

*   幕后发生了什么？
*   布尔值如何转换为字符串，因为布尔值不能被隐式类型转换？
*   是否涉及 *自动装箱/拆箱？*
*   方法是否类似`toString()`或`String.valueOf()`以某种方式涉及？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-15T18:28:23.180

Java 语言规范[第 5.1.11 节中详细说明了确切的规则。字符串转换](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.11)

根据这些规则，`"str" + bool`相当于：

```
"str" + new Boolean(bool).toString() 
```

也就是说，编译器在如何准确评估整个表达式方面有相当大的余地。来自 JLS [§15.18.1。字符串连接运算符 +](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.18.1)：

> 实现可以选择在一个步骤中执行转换和连接，以避免创建然后丢弃中间 String 对象。为了提高重复字符串连接的性能，Java 编译器可以使用`StringBuffer`类或类似技术来减少`String`通过计算表达式创建的中间对象的数量。
> 
> 对于原始类型，实现还可以通过直接从原始类型转换为字符串来优化包装对象的创建。

例如，使用我的编译器如下：

```
boolean bool = true;
System.out.println("the value of bool is : " + bool); 
```

完全等同于：

```
boolean bool = true;
System.out.println(new StringBuilder("the value of bool is : ").append(bool).toString()); 
```

它们产生相同的字节码：

```
Code:
   0: iconst_1      
   1: istore_1      
   2: getstatic     #59                 // Field java/lang/System.out:Ljava/io/PrintStream;
   5: new           #166                // class java/lang/StringBuilder
   8: dup           
   9: ldc           #168                // String the value of bool is : 
  11: invokespecial #170                // Method java/lang/StringBuilder."<init>":(Ljava/lang/String;)V
  14: iload_1       
  15: invokevirtual #172                // Method java/lang/StringBuilder.append:(Z)Ljava/lang/StringBuilder;
  18: invokevirtual #176                // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
  21: invokevirtual #69                 // Method java/io/PrintStream.println:(Ljava/lang/String;)V
  24: return 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T18:26:14.617

It's a compiler thing. If the right operand for concatenation is an object, the object is sent the `toString()` method whereas if the operand is a primitive then the compiler knows which type-specific behavior to use to convert the primitive to an String.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-15T18:28:30.890

编译器将其翻译为

```
StringBuilder sb = new StringBuilder("the value of bool is : ");
sb.append(true);
System.out.println(sb.toString()); 
```

[JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.18.1)中解释了连接和转换的规则。

# objective-c - [self view] 和 self.view 之间的区别？

> ID：13894893
> 
> 赞同：0
> 
> 时间：2012-12-15T18:22:46.783
> 
> 标签：objective-c, ios, xcode

我一直在测试它们两者，它们似乎可以互换工作，但我只是好奇，两者之间有什么真正的区别，还是只是语法上的区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T18:24:19.383

点表示法是该属性的 getter 方法的快捷方式。`self.view`将编译为`[self view]`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T18:24:09.307

区别在于这`[self view]`是一个方法调用，而是`self.view`一个属性访问。在大多数属性上，没有区别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T18:25:35.760

在 Objective-C 中，您可以使用点表示法或括号表示法，它们几乎相同。我说的差不多。。

有关细微差异的更多详细信息，请参阅此线程：[Performance Difference between dot notation vs method call in Objective-C](https://stackoverflow.com/questions/34674/performance-difference-between-dot-notation-versus-method-call-in-objective-c)

# unicode - 记事本中的 Unicode 文件

> ID：13894898
> 
> 赞同：24
> 
> 时间：2012-12-15T18:23:49.870
> 
> 标签：unicode, unicode-string

在记事本中将文本文件另存为“Unicode”是什么意思？是 Utf-8、Utf-16 还是 Utf-32？提前致谢。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-12-15T18:40:54.427

在记事本中，就像在一般的 Windows 软件中一样，“Unicode”作为编码名称意味着 UTF-16 Little Endian (UTF-16LE)。（我一开始以为它不是真正的UTF-16，因为Notepad++将其识别为UCS-2并将内容显示为垃圾，但是用BabelPad重新检查，我得出结论，Notepad甚至可以正确编码非BMP字符。）

同样，“Unicode big endian”表示 UTF-16 Big Endian。而“ANSI”是指系统的本机遗留编码，例如西方版本的Windows 中的8 位windows-1252 编码。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-12-15T18:27:43.790

所有这些格式都是“Unicode”。但通常 Mac 和 Windows 上的编辑器表示 UTF-8，因为它与代码 128 IIRC 以下的 ASCII 兼容。通过使用特殊字符，UTF-8 可以表示比 256（适合 8 位的单个字节）更多的代码，这意味着后面的字节也属于同一个字符。

如果您查看终端中的输出，例如使用 vi，并且如果您看到每两个字符之间有一个空格，那么您正在查看 UTF-16，因为每两个字节组成一个字符。您应该看到的是字符之间没有空格，这是 UTF-8 的指示。

# objective-c - 当我尝试在 UIScrollview 上向下滚动时，它会弹回原来的位置

> ID：13894902
> 
> 赞同：6
> 
> 时间：2012-12-15T18:24:07.950
> 
> 标签：objective-c, uiscrollview, scroll, scrollview, bounce

好的，所以我在我的应用程序中使用了 UIScrollView。我已将滚动视图放置在故事板的视图控制器中。我有几个按钮和一些标签。但是当我尝试向下滚动到底部的按钮时，滚动视图会弹回顶部。这是我使用的代码：

**在 viewcontroller.h 中：**

```
@interface ViewController : UIViewController{

    IBOutlet UIScrollView *hovscroll;
}
@end 
```

**在 viewcontroller.m 中：**

```
@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    [hovscroll setScrollEnabled:YES];
    [hovscroll setContentSize:CGSizeMake(320, 1500) ];

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];

}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-04T20:46:24.633

您需要**禁用分页**。有（至少）两种方法可以做到这一点：

*   在 storyboard 中，选择 UIScrollView 组件，并在“Attributes Inspector”中取消勾选“Paging Enabled”。

*   在代码中，通过使用：

    ```
    scrollView.pagingEnabled = FALSE; 
    ```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-15T19:11:05.560

您需要通过像这样设置滚动视图的 contentSize 属性来指定可滚动区域的大小。

```
[scrollview setContentSize:CGSizeMake(320, 1000)]; 
```

# properties - JavaFx 2.x：右下角的矩形自定义属性

> ID：13894908
> 
> 赞同：1
> 
> 时间：2012-12-15T18:24:54.000
> 
> 标签：properties, javafx, shape

是否可以在 Rectangle 类中创建类似于 DoubleProperty xProperty() 左上角但定义右下角的 X 坐标的双属性？

Y坐标也有同样的问题。

这些新属性应该能够作为参数传递给方法 bindDirectional。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T09:37:00.350

您可以执行以下操作，这应该可以解决此问题。

```
DoubleBinding maxX = rectangle.xProperty().add(rectangle.widthProperty());
DoubleBinding maxY = rectangle.yProperty().add(rectangle.heightProperty());

otherProperty.bind(maxX);
anotherProperty.bind(maxY); 
```

但是，由于这些属性是计算出来的，因此您不能在 bindBidirectional 中使用它们。原因是 if`otherProperty`设置了不同的值，`maxX` `JavaFX`无法计算出哪个`xProperty`和`widthProperty`要更改。您需要创建自己的属性来执行此操作，具体取决于您希望如何更改从`otherProperty`影响`xProperty`和`widthProperty`。

# tabs - 在单击 li 时淡入，使用单个 div 中的“rel”属性以延迟/暂停效果淡出

ID：13894917

赞同：1

时间：2012-12-15T18:25:45.603

标签：tabs, delay, fadein, fadeout, rel

# c# - 将 MVC4 网站部署到 Windows Azure

> ID：13894918
> 
> 赞同：1
> 
> 时间：2012-12-15T18:25:54.707
> 
> 标签：c#, asp.net-mvc, azure, asp.net-mvc-4

只是一个快速的问题。我在 Azure 上部署了一个网站，它运行良好。我只是想知道我是否必须更改帐户模型才能从 azure sql 数据库中使用帐户？我可以在部署的网站上注册和登录，但详细信息不会进入它使用为 MVC4 网站应用程序生成的默认方法的表中。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T19:04:07.547

是 - 您需要使用外部数据库（Azure SQL 或其他 SQL 实例）。您不能为此使用存储在 App_Data 下的 SQL Express 用户实例。当您在开发结构中启动项目时，应用程序实际上是从云项目的 bin\Debug[YourProjectName].csx 文件夹中的副本运行的，并且应用程序修改的数据库也将是该文件夹中的副本。每次在开发结构中重新启动应用程序时，对数据库的更改都会被项目文件夹中的副本覆盖。

如果要使用 SQL Express 在本地测试云项目，最好使用不在用户实例模式下运行的数据库。

# c# - 使通用类 IEnumerable

> ID：13894928
> 
> 赞同：4
> 
> 时间：2012-12-15T18:27:15.943
> 
> 标签：c#, silverlight, windows-phone-7, generics, ienumerable

我有一个使用类型参数的泛型类

```
public class CustomClass<T> 
```

我将它与`ObservableCollection<someClass>`类型一起使用。我只想让这个类实现 IEnumerable 接口，所以我做了以下事情：

```
public class CustomClass<T> : IEnumerable

#region Variable Declarations
 ...
#endregion

#region Constructor and CustomClass<T> properties and methods
 ...
#endregion

#region Here I add the code for IEnumerable to work

private T theObservableCollection
    {
        get
        {
            if (typeof(T) == typeof(ObservableCollection<someClass>))
                return theObservableCollection;
            else
                return default(T);
        }
    }

    //Create a public GetEnumerator method, the basic ingredient of an IEnumerable interface.
    public IEnumerator GetEnumerator()
    {
        IEnumerator r = (IEnumerator)new SettingEnumerator(this);
        return r;
    }

    //Create a nested-class
    class SettingEnumerator
    {
        int index;
        CustomClass<T> sp;

        public SettingEnumerator(CustomClass<T> str_obj)
        {
            index = -1;
            sp = str_obj;
        }

        public object Current
        {
            get
            {
                return sp.theObservableCollection[index];
            }
        }

        public bool MoveNext()
        {
            if (index < sp.theObservableCollection.Length - 1)
            {
                index++;
                return true;
            }
            return false;
        }

        public void Reset()
        {
            index = -1;
        }
    }  

#endregion 
```

编译器抱怨：

> 无法将带有 [] 的索引应用于“T”类型的表达式

我明白那里有问题，但我不知道如何完成我想要的，最终是成功地制作

```
public class CustomClass<T> 
```

一种

```
public class CustomClass<T> : IEnumerable 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T15:34:27.873

尝试实施`IEnumerable<T>`而不是`IEnumerable`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T15:38:12.990

您必须指定 T 可以被索引：

```
public class CustomClass<T> : IEnumerable where T : IList 
```

# processing - 处理或Java：获取窗口位置？

> ID：13894932
> 
> 赞同：0
> 
> 时间：2012-12-15T18:27:32.817
> 
> 标签：processing

我正在处理中写一个草图，我很好奇如何获得草图所在的操作系统窗口的位置。如果我使用`getPosition()`（部分`java.awt`），我只能得到视口在窗口中的位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T12:25:48.177

您可以使用`getLocationOnScreen()`继承自`java.awt.Component`，但您需要先确保小程序`isShowing()`：

```
void draw(){
  if(frame.isShowing()) println(frame.getLocationOnScreen());
} 
```

或更图形化：

```
void draw(){
  if(frame.isShowing()) {
    java.awt.Point pt = frame.getLocationOnScreen();
    background(255);
    rectMode(CENTER);
    rect(map(pt.x,0,displayWidth,0,width),//use screenWidth instead of displayWidth in Processing 1.5.1 or older
         map(pt.y,0,displayHeight,0,height),//use screenHeight instead of displayHeight in Processing 1.5.1 or older
         10,10);
  }
} 
```

在哪里

```
Frame frame = ( (PSurfaceAWT.SmoothCanvas) ((PSurfaceAWT)surface).getNative()).getFrame(); 
```

（对于其他渲染器，例如`P2D`或`FX2D`查看[此答案](https://stackoverflow.com/questions/39107750/java-and-processing-3-0-frame-class-deprecated-is-there-an-alternative/55957053#55957053)）

# linq - Linq 用另一个值替换空/空值

> ID：13894934
> 
> 赞同：7
> 
> 时间：2012-12-15T18:27:54.693
> 
> 标签：linq, asp.net-mvc-4

在 sql server 中，我创建了可以检查空值并在需要时将其替换为默认值的视图（即 ISNULL（PrimaryPhone，'No Primary #'）AS PrimaryPhone。我在我的 asp.net Web 表单中使用了很多视图应用程序，但我现在正在学习 MVC 4 并想从头开始。

我为我的客户表设置了模型、控制器和视图。我希望能够用（“未输入”）或类似的东西替换空值/空值。我相信这需要进入控制器，如果我错了，请纠正我。

我看到了一个使用 hasvalue 的示例，但无法通过智能感知获得。

在我的模型中不使用 DefaultValue 的情况下如何替换空/空值？

谢谢

```
var result = db.Clients.Select(x => new
        {
            CustomerID = x.CustomerID,
            UserID = x.UserID,
            FullName = x.FullName,
            EmailAdd = x.emailadd.DefaultIfEmpty("No Email"),.... 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-15T19:08:18.710

你可以使用[?? 运算符](http://msdn.microsoft.com/en-us/library/ms173224.aspx)在某些内容为空时设置默认值：

```
var result = db.Clients.Select(x => new
        {
            CustomerID = x.CustomerID,
            UserID = x.UserID,
            FullName = x.FullName,
            EmailAdd = x.emailadd ?? "No Email", ... 
```

如果您需要更多控制，例如检查 null 和 empty，您还可以使用[?: 运算符](http://msdn.microsoft.com/en-us/library/ty67wk28%28v=vs.80%29.aspx)（也称为“条件运算符”或“三元运算符”）：

```
var result = db.Clients.Select(x => new
        {
            CustomerID = x.CustomerID,
            UserID = x.UserID,
            FullName = x.FullName,
            EmailAdd = string.IsNullOrEmpty(x.emailadd) ? "No Email" : x.emailadd, ... 
```

# c# - 在字典中使用对象作为键

> ID：13894935
> 
> 赞同：1
> 
> 时间：2012-12-15T18:28:17.067
> 
> 标签：c#, dictionary

将域对象用作 Dictionary 中的键是一种好习惯吗？

我有一个场景，我使用`NHibernate`.

为了执行业务逻辑，我需要查找 Dictionary。我可以使用 Either

```
IDictionary<int, ValueFortheObject> 
```

或者

```
Dictionary<DomainObject, ValueFortheObject> 
```

第二种选择对我来说似乎更好

1.  我可以编写更简单的测试用例，也可以在测试用例中使用真实的域对象，而不是使用`Mock<DomainObject>`（如果我选择第一个选项），因为 setter on the `Id`is `private`on all domain objects。

2.  与建议 int 的注释`Dictionary<Hobbit,List<Adventures>>`相比，代码更具可读性，尤其是在作为参数传递时`Dictionary<int,List<Adventures>>``hobbitId`

~~我的问题是：~~

~~*   使用第一个选项比第二个选项有什么优势（我可能会盲目地错过）？~~ 
2.  ~~~~使用第二种方法会有任何性能问题吗？~~~~ 

 ~~更新01：

我的域模型实现了这些，并且它们在执行操作时不会发生变异。

使用它们作为键会有性能问题吗？还是我完全错过了这里的重点，性能/内存与使用的键无关？

更新02：

我的问题是

1.  **如果我使用 Objects 作为键而不是原始类型和WHY / HOW**，性能或内存是否会出现任何问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T18:36:28.757

您将遇到的最大问题是您不能在您的键对象作为键执行滚动时对其进行变异。

当我说“变异”时，我的意思是您的键对象必须实现`Equals`并`GetHashCode`用作字典的键。当对象用作键时，您对对象所做的任何事情都不得更改集合中任何其他键的值，`GetHashCode`也不得导致评估为真。`Equals`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T18:48:41.420

@ScottChamberlain 为您提供了整体问题，但您的用例可能会以任何一种方式争论。您应该问自己的一些问题是：两个业务对象相等意味着什么？如果它们被用作字典中的键或者我在其他地方比较它们，这是相同还是不同？如果我更改一个对象，它的值应该作为键更改还是保持不变？如果对`GetHashCode()`and使用覆盖`Equals()`，计算这些函数的成本是多少？

一般来说，我赞成对键使用简单类型，因为在对象相等方面存在很大的误解空间。`Dictionary<Key,Value>`如果可读性是您最关心的问题，您始终可以使用适当的方法创建自定义字典（包装器）。然后，您可以根据对象编写方法，然后在内部使用您想要的任何（适当的）属性作为键。~~

# python - 将 celeryd_multi 作为守护进程运行

> ID：13894937
> 
> 赞同：0
> 
> 时间：2012-12-15T18:28:20.960
> 
> 标签：python, django, celery, django-celery, celeryd

我将 celery 3.0.11 和 djcelery 3.0.11 与 python 2.7 和 django 1.3.4 一起使用。我正在尝试将 celeryd 作为守护进程运行，并且我已按照[http://docs.celeryproject.org/en/latest/tutorials/daemonizing.html的说明进行操作](http://docs.celeryproject.org/en/latest/tutorials/daemonizing.html)

当我使用带有 python（非 django）配置的链接中描述的 celeryd 运行工作人员时，守护程序出现了。

当我运行`python manage.py celery worker --loglevel=info`用于测试工作人员的工作人员时，它们运行良好并开始使用消息。

但是当我使用 django 配置运行 celeryd 时`manage.py celeryd_multi`，我只收到一条消息，上面写着

```
> Starting nodes...
    > <node_name>.<user_name>: OK 
```

但是我没有看到任何守护进程在运行，而且我的消息显然没有被消耗。有一个空的日志文件（在 celeryd 配置文件中配置的那个）。我也用一个非常基本的 django 项目尝试过这个，我得到了相同的结果。

我想知道我是否缺少任何基本配置。由于我没有收到任何错误并且我没有任何日志，所以我被卡住了。用 sh-x 运行它也没有任何特别之处。以前有没有人经历过这种情况，或者有人对我可以尝试什么有任何建议？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T05:40:36.080

现在我已经切换到使用 supervisord 而不是 celeryd 并且运行多个工人没有问题。

# java - 在 Java 中动态执行多个 BPEL 文件

> ID：13894938
> 
> 赞同：0
> 
> 时间：2012-12-15T18:28:22.427
> 
> 标签：java, deployment, bpel

我有大约 50 种 BPEL 流程变体，内部算法稍有变化，但都具有相同的请求接口和相同的响应类型，这意味着它们都由一个 WSDL 文件描述。

我的问题是如何使用 Java 以有效的方式动态部署和执行所有这些 BPEL 流程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T16:58:09.780

为此，您可以使用 SoapUI 和 Groovy 脚本。创建一系列请求并让 Groovy 脚本按顺序执行它们。或者只是一个带有多个请求的 SoapUI 测试套件。

# haskell - MonadRandom：为什么会发生堆栈溢出？

> ID：13894940
> 
> 赞同：0
> 
> 时间：2012-12-15T18:28:29.820
> 
> 标签：haskell, random, stack-overflow, monads

这个问题肯定是针对stackoverflow.com的

这是示例

```
module Main where

import Control.Monad.Random
import Control.Exception

data Tdata = Tdata Int Int Integer String

randomTdata :: (Monad m, RandomGen g) => RandT g m Tdata
randomTdata = do
  a <- getRandom
  b <- getRandom
  c <- getRandom
  return $ Tdata a b c "random"

manyTdata :: IO [Tdata]
manyTdata = do
  g <- newStdGen
  evalRandT (sequence $ repeat randomTdata) g

main = do
  a <- manyTdata
  b <- evaluate $ take 1 a
  return () 
```

编译后返回

```
Stack space overflow: current size 8388608 bytes.
Use `+RTS -Ksize -RTS' to increase it 
```

怎么会发生？MonadRandom 不是懒惰还是什么？在这种情况下如何定义堆栈溢出的原因？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T18:46:18.397

The issue arises because you are building `IO` into your `manyTdata` function. The monad transformer ends up being of type `RandT g IO Tdata`. Because each element of your infinite list can consist of `IO` actions, the entirety of the infinite list returned by `manyTdata` must be evaluated *completely* before the function can return any results.

The simplest solution would be to use `Rand` instead of `RandT`, as using the tranformer isn't really useful here, anyway; you could also change the base monad to something like the `Identity` monad by changing `manyTdata` to

```
manyTdata :: IO [Tdata]
manyTdata = do
  g <- newStdGen
  return $ runIdentity $ evalRandT (sequence $ repeat randomTdata) g 
```

Which will terminate in a finite amount of time. The error concerning your stack size is simply a result of recursively expanding your list of `IO` actions. Your code says to sequence all of these actions, so they all have to be performed, it has nothing to do with laziness.

Something else to think about, rather than using `randomTdata`, consider making `Tdata` an instance of the `Random` class.

# facebook - 使用 Facebook API 分页？

> ID：13894947
> 
> 赞同：0
> 
> 时间：2012-12-15T18:29:08.787
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

我是 Facebook API 的新手，我想获取登录用户拥有的朋友的信息。起初我配置了默认权限，所以我得到的只是名字。
一旦我请求了额外的特权，它就给了我一个“分页”对象......但我不知道我应该用它做什么。
由于某种原因，我无法在 Google 上找到任何有用的东西，所以我在这里。

这是我到目前为止所拥有的：

**索引.html**

```
<script src="http://connect.facebook.net/en_US/all.js"></script>
<script src="script.js"></script>
<script language="javascript" type="text/javascript">
        FB.init({
            appId: '118236041675713',
            status: true,
            cookie: true,
            xfbml: true
        });  
</script>
<fb:login-button perms="email,user_birthday" autologoutlink="true"> 
```

**脚本.js**

```
$(document).ready(function() {
        FB.login(function(response) {
           if (response.authResponse) {
              FB.api("/me/friends", {fields: 'name,id,birthday'}, function(res) {
                 console.log(res);
              });
           }
        });
}); 
```

**解决方案：** 可以从下一个/上一个属性接收附加信息。重要提示：出于某种原因，jQuery`$.get`确实可以工作。所以我不得不使用`$.ajax`：

```
$(document).ready(function() {
            FB.login(function(response) {
               if (response.authResponse) {
                  FB.api("/me/friends", {fields: 'name,id,birthday'}, function(res) {
                     var next = res.pages.next;
                     $.ajax({
                url: next,
                success: function(data) { alert(data) },
                dataType: 'html'
              });
               }
            });
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T18:54:15.787

分页对象将有 2 个属性。

paging.next - 这包含将返回下一页结果的图形调用的 url

paging.previous - 相同，但结果中的上一页

# javascript - 如何使用 JavaScript 编写测验？

> ID：13894954
> 
> 赞同：-3
> 
> 时间：2012-12-15T18:29:51.820
> 
> 标签：javascript

我还是 JavaScript 的新手，我正在尝试编写一个测验，根据他们选择的答案将一个人发送到 3 个页面之一（所以每次他们选择“x”答案时，`x`都会增加一个） .

到目前为止，我编写的代码有两个问题。

*   变量值没有增加一，所以也许我写错了。

*   我不确定如何选择具有最多检查答案的变量以将它们发送到相关页面。

我试着写一个`if`声明来表明我的意思。任何关于如何改进这一点的想法将不胜感激，或者如果其他方法会更好，我对此持开放态度。

```
var x = 0;
var y = 0;
var z = 0;

function question1(){
    if (document.getElementById('a1').checked) {
        x++;        
    }
    else if (document.getElementById('a2').checked) {
        y++; 

    } else if(document.getElementById('a3').checked){
        z++;
    }
}
function question2(){
    if (document.getElementById('b1').checked) {
        x++;        
    }
    else if (document.getElementById('b2').checked) {
        y++; 

    } else if(document.getElementById('b3').checked){
        z++;
    }
}
function result(){
    Math.max(x,y,z);
    if (x){
       alert("You chose x");
    } else if (y){
        alert("You chose y");
      } else if (z){
          alert("You chose z");
        }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T18:41:33.677

您是否正在寻找这样的东西：

```
var totals = [0, 0, 0];
var letters = ["a", "b", "c"];

//Go through all answer letters
for (var i = 0, lt = letters.length; i < lt; i++)
{
    //Each question has 3 possible answers
    for (var j = 0; j < 3; j++)
    {
        if (document.getElementById(letters[i] + (j + 1)).checked)
        {
           //Increase the total that corresponds to the answer number
           totals[j]++;
           break;
        }
    }
}

totals.sort(function(a,b){return a-b});

var highest = totals.pop(); 
```

# image - .htaccess 假图片

> ID：13894959
> 
> 赞同：0
> 
> 时间：2012-12-15T18:30:19.260
> 
> 标签：image, .htaccess

我目前有一个可以去的系统

```
<img src = "http://www.mydomain.com/assets/thumbnail.php?url=website_url_here/"/> 
```

但问题是，浏览器是否不会缓存它，因为我将在一个页面上有多个这些图像，但只是更改 thr`url`变量。

所以我想做的是使用 .htaccess 将 url 变成

```
<img src = "http://www.mydomain.com/assets/thumbnail/website_url_here.png"/> 
```

怎么可能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T18:37:29.960

您可以在文档根目录或`assets`目录中的 htaccess 文件中添加一些 mod_rewrite 规则。在您的文档根目录中，它们看起来像这样：

```
RewriteEngine On
RewriteRule ^/?assets/thumbnail/([^.]+)\.(png|jpe?g|gif)$ /assets/thumbnail.php?url=$1.$2 [L,NC] 
```

或者如果 htaccess 文件位于 assets 目录中：

```
RewriteEngine On
RewriteBase /assets/
RewriteRule ^thumbnail/([^.]+)\.(png|jpe?g|gif)$ thumbnail.php?url=$1.$2 [L,NC] 
```

# html - AJAX 在 Grails 中不起作用

> ID：13894962
> 
> 赞同：0
> 
> 时间：2012-12-15T18:30:39.720
> 
> 标签：html, ajax, grails

我有一个带有以下代码的 GSP：

```
<head>
  <g:javascript library="jQuery"/>
</head>

<ul id="menu">
  <li>
    <g:remoteLink action="ajaxRandom" update="quote">Next Quote</g:remoteLink>
  </li>
  <li>
    <g:link action="list">Admin</g:link>
  </li>
</ul>

<body>
<div id="quote">
  <q>${quote.content}</q>
  <p>${quote.author}</p>
</div>

</body> 
```

和一个控制器

```
package grails_qotd

class QuoteController {

def scaffold = true

def quoteService

def random = {
    def randomQuote = quoteService.getRandomQuote()
    [quote : randomQuote]
}

def ajaxRandom = {
    def randomQuote = quoteService.getRandomQuote()
    render "<q>${randomQuote.content}</q><p>${randomQuote.author}</p>"
}
} 
```

根据 Grails 信息（版本 2.1.2），我将 jQuery 1.8.0 作为插件安装。

问题是当我点击'Next Quote' 时，会出现一个带有返回文本的全新页面，即它没有插入到'quote' DIV 中。

如果有人能告诉我我做错了什么，我将不胜感激。非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T18:49:30.853

似乎需要将以下内容添加到布局 GSP 中：

```
<g:javascript library="jquery" plugin="jquery"/>
<r:layoutResources /> 
```

# c++ - 如何在 C++ 中的字符串中找到元音？

> ID：13894963
> 
> 赞同：1
> 
> 时间：2012-12-15T18:30:53.553
> 
> 标签：c++, string

如何在 C++ 中的字符串中找到元音？我使用“a”或“a”还是只使用 ascii 值来查找或元音？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T19:05:06.123

使用`std::find_first_of`算法：

```
string h="hello world"; 
string v="aeiou"; 
cout << *find_first_of(h.begin(), h.end(), v.begin(), v.end()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T18:39:57.813

```
int is_vowel(char c) {
    switch(c)
    {
        // check for capitalized forms as well.
        case 'a':
        case 'e':
        case 'i':
        case 'o':
        case 'u':
            return 1;
        default:
            return 0;
    }
}

int main() {
    const char *str = "abcdefghijklmnopqrstuvwxyz";
    while(char c = *str++) {
        if(is_vowel(c))
            // it's a vowel
    }
} 
```

编辑：哎呀，C++。这是一个`std::string`版本。

```
#include <iostream>
#include <string>

bool is_vowel(char c) {
    switch(c)
    {
        // check for capitalized forms as well.
        case 'a':
        case 'e':
        case 'i':
        case 'o':
        case 'u':
            return true;
        default:
            return false;
    }
}

int main() {
    std::string str = "abcdefghijklmnopqrstuvwxyz";
    for(int i = 0; i < str.size(); ++i) {
        if(is_vowel(str[i]))
            std::cout << str[i];
    }

    char n;
    std::cin >> n;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T22:59:42.937

```
std::string vowels = "aeiou";
std::string target = "How now, brown cow?"
std::string::size_type pos = target.find_first_of(vowels); 
```

注意这里不使用`std::find_first_of`，而是`string`使用同名的成员函数。该实现可能为字符串搜索提供了优化版本。

# haskell - haskell中的审查词功能

> ID：13894965
> 
> 赞同：0
> 
> 时间：2012-12-15T18:31:12.293
> 
> 标签：haskell

我正在研究这个基本上需要两个参数的函数。第一个是数字，第二个是列表。每次在列表中看到第一个参数时，我都想用 3 替换它。我的功能工作正常。这里是：

```
censorword _ [] = [] 
censorword b (x:xs) 
        |  b == x = 3:censorword b xs 
        | otherwise = x:censorword b xs 
```

我的问题是，我如何使它适用于字符串。换句话说，我想做这样的事情：censorword "ab" ["cdZ",ab"] = ["cdZ","hello"] 在这里，我用你好替换了 "ab"。

欣赏任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T18:36:03.663

您只需要更改被替换的值（`3`在您的原始代码中）。

```
censorword :: String -> [String] -> [String]
censorword _ [] = []  
censorword b (x:xs)
        |  b == x = "hello" : censorword b xs
        | otherwise = x : censorword b xs 
```

这个函数可以用 来概括和简化`map`：

```
censorword' :: (Eq a) => a -> a -> [a] -> [a]
censorword' a b = map (\x -> if x == a then b else x)

censorword' "ab" "he" ["ab", "he", "ab"] -- => ["he", "he", "he"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T18:41:15.707

概括。

```
censor :: Eq a => a -> a -> [a] -> [a]
censor _           _      []       = []
censor replacement needle (x : xs)
    | needle == x                  = replacement : censor replacement needle xs
    | otherwise                    = x           : censor replacement needle xs 
```

然后

```
censorword = censor 3
censorwordForStrings = censor "hello" 
```

`censor`可以简化：

```
censor :: Eq a => a -> a -> [a] -> [a]
censor replacement needle = map censor' where
    censor' x | needle == x = replacement
              | otherwise   = x 
```

# ruby-on-rails - 使用 bundle exec 运行脚本很慢

> ID：13894966
> 
> 赞同：1
> 
> 时间：2012-12-15T18:31:21.243
> 
> 标签：ruby-on-rails, ruby-on-rails-3, bundler

使用 bundle exec 运行时

```
$ time bundle exec rails generate model student name:string age:number
      invoke  active_record
      create    db/migrate/20121215170617_create_students.rb
      create    app/models/student.rb

real    0m13.397s
user    0m11.676s
sys     0m0.597s 
```

直接运行

```
$ time rails generate model student name:string age:number
      invoke  active_record
      create    db/migrate/20121215171018_create_students.rb
      create    app/models/student.rb

real    0m6.408s
user    0m5.783s
sys     0m0.510s

$ ruby -v
ruby 1.9.3p286 (2012-10-12 revision 37165) [x86_64-linux] 
```

所以，正常的命令需要 6 秒，但`bundle exec`它的速度很慢，需要两倍的时间。

所以，只是我还是`bundle exec`只是慢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T18:47:20.877

使用`bundle exec`with`rails`命令是多余的。

> 所以不要在 rails 命令之前运行 bundle exec，这个命令已经知道 Bundler 并根据您在 Gemfile 上的内容设置所有内容。如果您在 rails 命令之前添加 bundle exec ，您将添加的只是从 Bundler 打开另一个进程并执行无用代码的开销，因为 rails 已经做了正确的事情。

从[这里](http://blog.wyeworks.com/2011/12/27/bundle-exec-rails-executes-bundler-setup-3-times/)得到。

# jquery-mobile - jQuery Mobile 页面范围元素识别

> ID：13894973
> 
> 赞同：0
> 
> 时间：2012-12-15T18:33:00.183
> 
> 标签：jquery-mobile

我的 jQuery Mobile 应用程序中有两个页面。这两个元素都是列表，显示从服务器返回的地点列表。在一个普通的网络应用程序中，我会对它们都执行“id='places'”，但在多页 jQuery Mobile 应用程序中，id 应该是唯一的。使用 id 来解决这个 id 唯一性限制的好的替代方法是什么？

**`id='searchPage-places'`**例如，我可以在 id 中包含页面名称：`id='favPage-places'`但这会增加不必要的噪音，因为我总是从特定于页面的 javascript 内容中访问位置元素。

我认为使用`data-role`是正确和适当的，但我不想干扰 jQM 自己的数据角色语义。

**`data-id`**感觉就像一个黑客

使用**类**也感觉像是一种黑客行为。

我正在为 jQuery Mobile 应用程序中的页面范围元素识别寻找一种优雅的技术。

还有其他建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T18:39:44.697

为什么不创建自己的属性 data-custom （或任何其他合适的名称）？可以使用 jQuery 轻松访问它。

或者您仍然可以对它们使用相同的 id 并通过 pageID + 'places' 访问它，例如：

```
$('#page1[data-role="page"] #places') 
```

对于第一页和

```
$('#page2[data-role="page"] #places') 
```

对于另一个。

# sql - SQL Server 唯一组合检查约束

> ID：13894975
> 
> 赞同：2
> 
> 时间：2012-12-15T18:33:15.487
> 
> 标签：sql, sql-server, unique-constraint, check-constraints

> **可能重复：**
> [唯一约束，不包括 NULL 值](https://stackoverflow.com/questions/6150540/unique-constraint-excluding-null-values)

假设我有一张带有地址的表，并且我希望所有者只有一个主要地址。我先定义索引/键还是检查约束？这是什么表达方式？

```
TABLE_Address
--OwnerId
--IsMain    (not null able)
--City etc.... 
```

所以我需要一个独特的（`IsMain ==true AND ownerId`）组合

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T19:14:28.243

`ownerId`使用条件创建过滤的唯一索引`IsMain = 1`。该索引将 a) 强制执行此条件并 b) 帮助您的应用程序进行预插入验证查询。

# android - 在Android的画布中绘制球体？

> ID：13894977
> 
> 赞同：1
> 
> 时间：2012-12-15T18:33:32.570
> 
> 标签：android, geometry, android-canvas

我们如何在 Android 的画布上绘制一个球体？[`Canvas`](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDUQFjAA&url=http://developer.android.com/reference/android/graphics/Canvas.html&ei=ysHMUKv1KMfPrQf22YDoCQ&usg=AFQjCNFWnXH-XblXXqlYJphAN38VISEv_A&sig2=f_PNkb1xjaLcwJbk9IDwyg&bvm=bv.1355325884,d.bmk)没有任何方法可以做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T18:36:22.487

画布是二维的，它有画圈。canvas.drawCircle(centerX, centerY, 半径, new Paint())

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T18:48:18.853

画一个圆并给它一个渐变纹理以具有球形外观。如果您想要实际的 3D 表示，请使用 OpenGL。

由于画布并非真正用于 3D 空间项目，因此它仅支持圆、线和弧等基元。

然而，OpenGL 是一个成熟的图形 API，可用于绘制球体并维护照明和纹理等。

# yii - yii xupload mysql for CActiveForm

> ID：13894979
> 
> 赞同：0
> 
> 时间：2012-12-15T18:33:34.840
> 
> 标签：yii, upload, blueimp, yii-xupload

我试图在 CActiveForm 中包含 yii 的 xupload 扩展我尝试遵循这个[http://www.yiiframework.com/wiki/395/additional-form-data-with-xupload/](http://www.yiiframework.com/wiki/395/additional-form-data-with-xupload/) 但是我做不到。我有一个包含用户名和文件名字段的表单（允许用户上传并从视图中查看。）这是我的视图

```
<?php
$form = $this->beginWidget('CActiveForm', array(
      'id' => 'form-form',
      'enableAjaxValidation' => false,
        //This is very important when uploading files
      'htmlOptions' => array('enctype' => 'multipart/form-data'),
    ));
  ?>    
    <div class="row">
        <?php echo $form->labelEx($model,'username'); ?>
        <?php echo $form->textField($model,'username'); ?>
        <?php echo $form->error($model,'username'); ?>
    </div>
    <!-- Other Fields... -->
    <div class="row">
        <?php echo $form->labelEx($model,'attachment_photo'); ?>
        <?php
    $this->widget('xupload.XUpload', array(
        'url' => Yii::app()->createUrl("form/uploadAdditional", array("parent_id" => 1)),
        'model' => $model,//An instance of our model
        'attribute' => 'file',
        'multiple' => true,
        //Our custom upload template
        'uploadView' => 'application.views.site.upload',
        //our custom download template
        'downloadView' => 'application.views.site.download',
        'options' => array(//Additional javascript options
            //This is the submit callback that will gather
            //the additional data  corresponding to the current file
            'submit' => "js:function (e, data) {
                var inputs = data.context.find(':input');
                data.formData = inputs.serializeArray();
                return true;
            }"
        ),
    ));
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T08:00:57.800

重要的是你的 $_POST 数组是什么样子的。（使用 Firebug 或 Fiddler 进行检查）。

您的 $_POST 应该如下所示：

```
array (
  'form-form' => array ( /* stuff for additional form data */)),
  'XupLoad' => array ( /* stuff pertaining to XuLoad */)),
) 
```

这样，附加的表单数据与 XupLoad 数据是分开的。Xupload 扩展中包含的操作处理`$_POST['XupLoad']`数组的一部分。您将不得不编写代码来处理`$_POST['form-form']`数组的一部分。

顺便说一句，Blueimp 的 jQuery File Upload 有一个新版本，其中包含重要的改进和错误修复。XupLoad 扩展似乎不包含这个最新版本。

我建议使用 Blueimp 的最新版本。它有一个 UploadHandler 类，负责处理服务器端的所有事情。最新版写的真好。您仍然需要添加代码来处理额外的表单数据......

**事后思考**：看起来你正在嵌套你的小部件。我不确定这是否可行。检查浏览器中的页面源。确保生成的 HTML 是正确的。可能是您正在生成嵌套表单，我对这些表单如何工作表示怀疑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T08:25:32.233

这是我的现场测试站点。[http://vincentlkl.allalla.com/](http://vincentlkl.allalla.com/)我已经将表格编码为 mulitpart

```
<?php $form=$this->beginWidget('CActiveForm', array(
'id'=>'form-form',
'enableAjaxValidation'=>false,
'stateful'=>true, 
'htmlOptions'=>array('enctype' => 'multipart/form-data') 
```

)); ?>

/**文件上传小部件**/

```
<?php $this->widget('bootstrap.widgets.TbFileUpload', array(
'url' => Yii::app()->createUrl("form/upload"),
        'model' => $model,
        'attribute' => 'file',
        'multiple' => true,
        'options' => array(
            'maxFileSize' => 3000000,
            'acceptFileTypes' => "js:/(\.|\/)(jpe?g|png)$/i",
        )

));
 ?> 
```

当它在表单中时，我无法上传文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T09:23:44.803

暂时忘记您正在调用的小部件。下面是应该生成的 HTML 示例，以便将 jQuery FileUpload 与其他表单字段结合起来：

```
<!-- The file upload form used as target for the file upload widget -->
<form id="fileupload" action="" method="POST" enctype="multipart/form-data">
        <input name="Input_upload[titleInArchive]" id="Input_upload_titleInArchive" type="text" />   

    <div class="row fileupload-buttonbar">
        <div class="span7">
            <!-- The fileinput-button span is used to style the file input field as button -->
            <span class="btn btn-success fileinput-button">
                <i class="icon-plus icon-white"></i>
                <span>Add files...</span>
                <input type="file" name="files[]" multiple>
            </span>
            <button type="submit" class="btn btn-primary start">
                <i class="icon-upload icon-white"></i>
                <span>Start upload</span>
            </button>
    <!-- the rest of the demo jQuery File upload page ... -->
</form> 
```

此表单有一个输入字段**titleInArchive**，它与 jQuery File Upload 表单共存。位于`<input>`jQuery File Upload 标签内。所以在你的情况下，你会把 extra 放在`<input>`里面`$this->widget('xupload.XUpload', ...)`

完成此操作后，点击开始上传按钮。在 Firebug 中，检查 XHR 请求。$_POST 数组是什么样的？在您的情况下，它应该类似于

```
$_POST['Form']['username'] ...
$_POST['Form']['identity_card'] ... 
```

我希望我是有道理的......

# node.js - 使用 node.js ForeverAgent

> ID：13894980
> 
> 赞同：2
> 
> 时间：2012-12-15T18:33:35.737
> 
> 标签：node.js, connection

为了在制作 http.requests 时重用连接，我想使用 ForeverAgent 而不必使用整个请求模块。

我正在使用节点 v0.8.15

那可能吗？有人能告诉我怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T14:19:01.673

`ForeverAgent`最近被拆分成[自己的模块](https://github.com/mikeal/forever-agent)，所以你应该使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T00:14:51.883

使用当前版本的 Mikeal 请求模块的布局/结构，您应该能够执行以下操作：

```
var ForeverAgent = require('request/forever');

var myAgent = new ForeverAgent();
var myRequest = http.request({/* … */, agent:myAgent});
/* … */ 
```

有关代理选项的更多详细信息，请参阅[node.js http 文档，尽管它很稀疏；](http://nodejs.org/api/http.html#http_http_request_options_callback)对于这个模块的“永远”代理本身，我没有看到任何文档（除了源代码）。

# c - 为什么 time.h 中定义的函数“时间”会返回 NULL？

> ID：13894981
> 
> 赞同：0
> 
> 时间：2012-12-15T18:33:39.807
> 
> 标签：c, ansi, time.h

我的代码使用了函数 'time' 和来自 'time.h' 的其他函数，并且 'time' 每次'time' 都返回 NULL （哈哈，虽然不好笑，但这对于我可以集中精力的 'time' 来说是很昂贵的对此类的关注）此类被重新执行。奇怪的是，这只是昨天才开始的。以前在类似但缺少（我一直在添加）代码中使用相同的功能证明是可以的。以下是C89代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

#define EXIT_SUCCESS 0
#define EXIT_FAILURE 1

typedef struct tm tm;

int logf(char input_string[])
{
    time_t* current_time_since_epoch;
    time(current_time_since_epoch);
    if (current_time_since_epoch == NULL)
    {
        printf("'time' returned NULL.\n");
        return EXIT_FAILURE;
    }
    tm* current_time_calandar_time = localtime(current_time_since_epoch);
    if (current_time_calandar_time == NULL)
    {
        printf("'localtime' returned NULL.\n");
        return EXIT_FAILURE;
    }
    char current_time_textual_representation[20];
    strftime(current_time_textual_representation, 20, "%d-%m-%Y %H:%M:%S", current_time_calandar_time);
    printf("%s\n", current_time_textual_representation);
    printf("%s\n", input_string);
    return EXIT_SUCCESS;
}

int main(void)
{
    int check_logf = logf("Hello.");
    if (check_logf == 0) exit(EXIT_SUCCESS);
    else
    {
        printf("'logf' returned EXIT_FAILURE.\n");
        exit(EXIT_FAILURE);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T18:37:17.027

当您将 a 的地址传递`time_t`给**[`time()`](http://linux.die.net/man/2/time)**它时，它将结果存储在该地址。由于您没有分配任何内存来存储结果（您所做的只是声明一个未初始化的指针），因此您将获得未定义的行为。只需传递`NULL`给`time`它，它就会返回该值。

```
time_t current_time_since_epoch = time(NULL); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T18:35:51.860

`time()`如果要将结果作为参数提供，则需要为函数分配内存以存储结果。在堆栈上声明变量或调用`malloc()`. 如果您`NULL`作为参数给出，您也可以检索返回的值。

```
time_t current_time_since_epoch;
time(&current_time_since_epoch);
// or
current_time_since_epoch = time(NULL);
// or
time_t* timePtr = (time_t*) malloc(sizeof(time_t));
time(timePtr);
// ...
free(timePtr); 
```

更多关于函数`time()`原型的信息在[这里](http://linux.die.net/man/2/time)

# caching - 替换 clear_all_cache 方法 - Smarty

> ID：13894985
> 
> 赞同：0
> 
> 时间：2012-12-15T18:34:06.737
> 
> 标签：caching, smarty

我使用 clear_all_cache() 方法，我有一个警告：

'clear_all_cache' 未知或已弃用。在 smarty/sysplugins/smarty_internal_wrapper.php，第 57 行

这种方法是否被另一种方法取代？我试图用谷歌搜索，但没有成功。有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T20:54:43.543

如果您使用 smarty3，则可能必须改用 clearAllCache()

# css - 当 div 以负边距定位时，CSS 溢出-x 不会隐藏

> ID：13894987
> 
> 赞同：3
> 
> 时间：2012-12-15T18:34:38.097
> 
> 标签：css, html, scroll, margin

我有一个以负边距定位的 div，这样它将被隐藏，我将能够将它飞入屏幕。但是，我可以向右滚动并看到它。我试图将`overflow-x`我的 body 和 html 标签中的属性更改为隐藏，但这没有用。我究竟做错了什么？

我的 div 被定位，`margin-right:-800px`但似乎没有任何效果！

* * *

**编辑代码**

CSS 代码：

隐藏`div`：

```
.card{
    z-index:21;
    position:absolute;
    right:-800px;
    background:white;
    border:1px solid black;
    margin:auto;
    text-align:left;
    padding:20px;
    visibility:hidden;
    -webkit-box-shadow: 5px 5px 5px rgba(110,110,110,.7);
    -webkit-transform:rotate(-100deg);
    -webkit-transition:right .5s, -webkit-transform .5s;
} 
```

我的溢出尝试：

```
html {
    overflow-x:hidden;
    overflow-y:visible;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T19:31:41.250

正如@Pranav 所说，我们真的不知道您是如何创建动画的。但是，这是一些类似于您所描述的动画的工作示例：http: [//jsfiddle.net/Ktt4Z/2/](http://jsfiddle.net/Ktt4Z/2/)。

**JavaScript**

```
$('#box').animate({  textIndent: 0 }, {
    step: function(now,fx) {
      $(this).css('-webkit-transform','rotate('+now+'deg)'); 
    },
    duration:'slow'
},'linear');​ 
```

**HTML**

```
<div class="card">
    This is a test. This is a test.
</div>​ 
```

此外，这里有一个很棒的 CSS 资源`overflow`： [http ://www.brunildo.org/test/Overflowxy2.html](http://www.brunildo.org/test/Overflowxy2.html)

最后，在发布问题时，最好发布您的代码、一个使用 JSFiddle 的简单示例（如果可能）以及您尝试过的任何内容。这将有助于社区研究和发现您的问题的答案。

* * *

**编辑 0**

尝试：

```
display: none; 
```

代替：

```
visibility:hidden; 
```

`visibility`此外，互联网上有一些关于和之间区别的有用文章`display`。[例如，这篇文章指出以下内容](http://www.vanseodesign.com/css/visibility-vs-display/)：

> 在表面显示：没有一个似乎是相同的可见性：隐藏，但它不是。最大的区别在于我在上面提到的那一点。
> 
> `visibility: hidden`– 元素停留在正常的文档流中
> 
> `display: none`– 元素从正常文档流中移除，因此周围的 html 元素折叠以关闭空间

# php - 从变量中提取减号

> ID：13894988
> 
> 赞同：0
> 
> 时间：2012-12-15T18:34:43.673
> 
> 标签：php

我有一个特殊的情况，我需要将变量分成两部分 [sign] 和 [number]

所以我可以有以下整数（这不是一个序列，我一次只能有 1 个整数）：

```
-15,...,-1,0,1,...,15 
```

当有减号时，我需要将其拆分为 [-] 部分和 [integer] 部分，当没有符号时，我需要 [+] 和 [integer]

我该怎么做？

我正在考虑将explode与explode（“-”一起使用，但如果没有减号它会给出错误......任何简单的方法来实现我想要的而不是编写多个if函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T18:39:13.480

```
$ints = '-1,2,-3,4,-5,6';
$signed_ints = explode(',', $ints);
foreach ($signed_ints as &$int) {
  if (intval($int) >= 0) {
    $int = '+' . $int;
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T18:42:55.470

对于单个`integer`，您可以执行以下操作：

```
$singlevalue = -15;

$singlesplit = array('value' => abs($singlevalue));
if($singlevalue < 0)
    $singlesplit['sign'] = '-';
else
    $singlesplit['sign'] = '+';

print_r($singlesplit); 
```

这给出了输出：

```
Array
(
    [value] => 15
    [sign] => -
) 
```

**如果要删除值的符号，此处的**abs很重要。****

 **此外，如果您将值作为字符串接收，只需使用[intval](http://php.net/manual/en/function.intval.php)

```
$singlevalue = intval($stringValue); 
```**

# javascript - 在显示/隐藏条件下显示不同的 div

> ID：13894995
> 
> 赞同：1
> 
> 时间：2012-12-15T18:35:43.820
> 
> 标签：javascript, show-hide

我在SO中搜索了很多。单击时显示/隐藏文本，仅用于显示 div，单击隐藏时，它不显示另一个 div。

我想要这样的东西。

默认**SHOW**显示一个文本并显示名为**formula1**的 div，单击显示时，它隐藏测试**SHOW**并隐藏之前的 div**公式 1** 和文本**HIDE**与另一个 div**公式 2一起出现**

下面只显示了一个 div，但我希望在单击时显示两个 div。

```
<script language="javascript"> 
function toggle() {
var ele = document.getElementById("toggleText");
var text = document.getElementById("displayText");
if(ele.style.display == "block") {
        ele.style.display = "none";
    text.innerHTML = "show";
}
else {
    ele.style.display = "block";
    text.innerHTML = "hide";
}
} 
</script>
</head>
<body>
<a id="displayText" href="javascript:toggle();">show</a> <== click Here
<div id="toggleText" style="display: none">peek-a-boo</></div>
</body> 
```

有人请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T19:02:47.517

为我工作

```
 <html>
<head>
<script language=javascript type='text/javascript'> 
function hideDiv() { 
if (document.getElementById) { 
document.getElementById('back').style.display = 'none'; 
document.getElementById('sale').style.display = 'block'; 
} 
} 
function showDiv() { 
if (document.getElementById) { 
document.getElementById('back').style.display = 'block'; 
document.getElementById('sale').style.display = 'none'; 
} 
} 
</script> 
</head>
<body onLoad="javascript:showDiv()">
<div id="sale"> <button onClick="javascript:showDiv()">Hide</button><br>Hide Button will be replaced with Show button</div>
<div id="back"><button onClick="javascript:hideDiv()">Show<br> </button><br>Show Button will be replaced with hide button</div>
</body>
</html> 
```

在这个脚本上.. 两个 div 都被隐藏并显示.. ex

单击**显示**按钮时，**显示**按钮和文本***显示按钮都将被替换为隐藏按钮***被替换为**隐藏**按钮，其文本***隐藏按钮将被替换为显示按钮***，反之亦然

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T18:41:30.497

你为什么不使用 JQUERY 它会减少你正在编写的代码。通过使用简单的 show() 和 hide() 函数....
这里是链接[.show() jquery 选择器](http://www.w3schools.com/jquery/eff_show.asp)和.hide() jquery 选择[器](http://www.w3schools.com/jquery/eff_hide.asp)

如果你对 javascript 感兴趣，那么转到这个 URL [simple javascript show hide div](http://www.roseindia.net/javascript/javascriptexamples/javascript-hide-div.shtml)

# matlab - 不平衡数据的 LibSVM 成本权重不起作用

> ID：13894998
> 
> 赞同：2
> 
> 时间：2012-12-15T18:36:04.507
> 
> 标签：matlab, machine-learning, svm, libsvm

我有一个数据集，负标记值的数量是正标记值数量的 163 倍，所以我有一个不平衡的数据集。我试过了：

```
model = svmtrain(trainLabels, trainFeatures, '-h 0 -b 1 -s 0 -c 10 -w1 163 -w-1 1');
[predicted_label, accuracy, prob_estimates] = svmpredict(testLabels, testFeatures, model, '-b 1'); 
```

准确率接近 99%，我搜索并发现：[http](http://agbs.kyb.tuebingen.mpg.de/km/bb/showthread.php?tid=376&page=1) ://agbs.kyb.tuebingen.mpg.de/km/bb/showthread.php?tid=376&page= 1 在帖子 #7 它说

> 您是否尝试过以较小的比例加权（即：<1）

我将其更改为：

```
model = svmtrain(trainLabels, trainFeatures, '-h 0 -b 1 -s 0 -c 10 -w1 0.5 -w-1 0.003');
[predicted_label, accuracy, prob_estimates] = svmpredict(testLabels, testFeatures, model, '-b 1'); 
```

由于数据不平衡，我每次仍然有很高的准确性。有任何想法吗？

**PS：**我正在尝试实施2008年KDD杯的第一个挑战-乳腺癌。**我想按降序对候选人进行排名。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T10:34:39.293

这可能是由于你的负面和正面例子很难区分的原因。我将通过对多数类进行下采样并使用所有少数类示例来准备不同的数据集，然后在所有数据集上学习 svm。然后使用投票。这对我有用

# mysql - 如何通过 SQL 中的特殊字符 İ、Ş、Ğ 正确地按字母顺序对字符串进行排序

> ID：13894999
> 
> 赞同：0
> 
> 时间：2012-12-15T18:36:05.167
> 
> 标签：mysql, sql

我编写了一个选择查询，按我的数据排序。此列类型是 varchar，包含字符串 Ş - İ - Á - Í 等。它可能吗？它必须在 I 之后为 İ，S 之后为 Ş，A 之后为 Á..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T18:44:30.283

不同的排序规则有不同的排序顺序，以及它们解释变音符号的不同方式。

例如：utf8_general_ci 将 Ö 与 O 排序。如果尝试使用 utf8_swedish_ci 代替。这将具有正确的排序顺序，其中（IIRC）是 ÄAÖ 进入字母表的末尾。

有关背景信息，请参阅[http://dev.mysql.com/doc/refman/5.0/en/charset-collat](http://dev.mysql.com/doc/refman/5.0/en/charset-collation-effect.html) ​​ion-effect.html和[Mysql unicode](http://dev.mysql.com/doc/refman/5.5/en/charset-unicode-sets.html)