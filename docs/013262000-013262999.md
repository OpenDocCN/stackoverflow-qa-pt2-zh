# StackOverflow 问答 13262000-13262999

# r - R中的随机森林 - 许多类

> ID：13262003
> 
> 赞同：2
> 
> 时间：2012-11-07T01:28:22.087
> 
> 标签：r, classification, random-forest

我想用 R randomForest 进行多标签分类。我有十个班A..J，

我找到了如何预测单个类的示例，例如：

```
r = randomForest(J ~., data=train, importance=TRUE, do.trace=100) 
```

但我想预测更多类，例如 H、I、J。（即说只有 A..G 被赋予属性）。我该怎么做？

我有一个保留 A..G 和仅一个预测类（H/I/J）并运行 randomForest 3 次的想法，但也许有更好的方法？一口气做完？

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T21:23:26.173

假设所有属性 H、I 和 J 都是二元的。然后你可以预测一个具有 2^3 个可能值的新属性 K，然后将结果解码回 3 个属性：

*   1 -> 0,0,0
*   2 -> 0,0,1
*   3 -> 0,1,0
*   4 -> 0,1,1
*   5 -> 1,0,0
*   6 -> 1,0,1
*   7 -> 1,1,0
*   8 -> 1,1,1

# image - 如何将图片中的汉字翻译成英文？

> ID：13262004
> 
> 赞同：2
> 
> 时间：2012-11-07T01:28:24.433
> 
> 标签：image, ocr, barcode-scanner

我最近在网上买了一个条形码扫描仪，当我拿到它时，我注意到整个用户指南都是中文（简体）......我想知道那里是否有某种 OCR 软件可以扫描副本（. jpg) 并将其转换为英文翻译副本 (.txt 或 .doc) ? 我已经尝试过 JOCR.exe，它适用于除中文、日语和其他外语之外的所有语言。要使用这些语言，我需要获取 MS Office 的 OCR 插件的语言包。如果在这种情况下 OCR 不是最好的方法，那会是什么？任何和所有的建议将不胜感激！

# jsf-2 - 为什么 JSF 在 Tomcat 7 中抛出 OutOfMemoryError？

> ID：13262005
> 
> 赞同：0
> 
> 时间：2012-11-07T01:28:27.467
> 
> 标签：jsf-2, tomcat7

当我从 WEB-INF/lib 中删除 JSF jars（jsf-api-2.0.1.jar 和 jsp-impl-2.0.1.jar）时，我在我的 Windows 机器上准备了一个新鲜干净的 Tomcat7，我点击了这个错误：

```
Caused by: java.lang.ClassNotFoundException: javax.faces.FacesException
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1676)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1521)
    ... 10 more 
```

当我将 2 个罐子放在 WEB-INF/lib 中时，我遇到了错误：

```
java.lang.OutOfMemoryError: PermGen space
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
    at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2818)
    at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1148)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1643)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1521)
    at org.apache.catalina.startup.ContextConfig.checkHandlesTypes(ContextConfig.java:1956)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsStream(ContextConfig.java:1919)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsJar(ContextConfig.java:1806)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsUrl(ContextConfig.java:1765)
    at org.apache.catalina.startup.ContextConfig.processAnnotations(ContextConfig.java:1751)
    at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1255)
    at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:882)
    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:317)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:89)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5081)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1033)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:774)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1033)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:291)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:727)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:620)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 
```

关于在 Tomcat 7 中运行 JSF 的任何线索？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T05:53:03.380

您没有指出错误是在部署时立即发生还是在一段时间后发生。如果它在一段时间后发生，即在您的应用程序运行期间，您的代码将受到指责。查看这篇[出色的文章](http://frankkieviet.blogspot.ca/2006/10/how-to-fix-dreaded-permgen-space.html)，它将帮助您使用 JDK 6 追踪错误的根源。

错误表明与您的应用程序容器有关的类加载问题。`PermGen`永久代（简称 PermGen）是 JVM 存储对象（例如类和字符串文字）的区域。通常，垃圾收集器不应该在这里频繁操作。一旦不再使用 Web 应用程序的类加载器（每个部署的 Web 应用程序有一个），应用服务器加载的类*应自动清理。*Tomcat 过去曾在这方面给我带来过问题（尤其是在 Netbeans 中使用时）。在反复重新部署后，它似乎无法有效地自行清理。除了增加 permgen 空间的大小之外，您还可以做一些事情

1) 您可以将在该 tomcat 实例中运行的 Web 应用程序的通用 jar 移动到`TOMCAT_HOME/lib`. 这样，您可以期望您的类库不会像 tomcat 的默认行为那样在每个需要的 Web 应用程序中多次加载（请参阅[this](http://tomcat.apache.org/tomcat-6.0-doc/class-loader-howto.html)）。但是请谨慎使用此选项；如果您最终部署了一个包含较新版本 jar 的 Web 应用程序，您可能会遇到`NoClassDefFound`错误。

2）你可以试试这个`-XX:MaxPermGen`，而不是（或除了）`-XX:MaxPermSize`mkyong 在他的文章中建议的那个。

还要看看[这个问题，它是](https://stackoverflow.com/q/88235/1530938)进一步步骤的答案

# python - Python使用迭代将条目从csv文件添加到字典

> ID：13262006
> 
> 赞同：2
> 
> 时间：2012-11-07T01:28:27.533
> 
> 标签：python, csv, iteration, dictionary

我需要一个字典来遍历 csv 文件，进行一些小的更改并将条目从 csv 文件添加到字典中。

到目前为止我有这个，但字典只适用于文件的最后一行。

```
def citypop():
    import csv                                  
    F = open("Top5000Population.txt")           
    csvF = csv.reader(F)
    D = {}
    with csvF for row in csvF:
        city,state,population = row[0],row[1],row[2] 
        population = population.replace(',','') 
        population = int(population)
        city = city.upper()[:12]
        D[(city, state)] = population
        return D 
```

我可以更改什么以允许将文件中的所有行添加到空字典中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T01:34:07.280

从 for 循环中取出 return 语句：

```
def citypop():
  import csv                                  
  F = open("Top5000Population.txt")           
  csvF = csv.reader(F)
  D = {}
    with csvF for row in csvF:
      city,state,population = row[0],row[1],row[2] 
      population = population.replace(',','') 
      population = int(population)
      city = city.upper()[:12]
      D[(city, state)] = population
  return D 
```

# data-binding - 如何从 knockoutjs 模板中访问数据上下文的 observable

> ID：13262010
> 
> 赞同：2
> 
> 时间：2012-11-07T01:28:52.133
> 
> 标签：data-binding, knockout.js

我需要从敲除模板访问整个可观察数据上下文，而不仅仅是它的值。

在我正在开发的应用程序中，我经常使用大量元数据来帮助渲染视图。过去，我使视图模型属性变得复杂 - 将元数据和数据都存储为子属性（值属性中的值）：

```
ViewModel.AwesomeProperty = {
    value: ko.observable('Awesome Value'),
    label: 'My Awesome Label',
    template: 'awesomeTemplate',
    otherMetaData: 'etc'
} 
```

我正在更改此元数据以成为可观察对象的属性（正如我相信 Ryan Niemeyer 在他的一篇博客文章或会话中所描述的那样）。我发现它更干净、更优雅，并且通常更易于维护且开销更少（尤其是在序列化方面）。与上述示例等价的内容如下：

```
ViewModel.AwesomeProperty = ko.observable('Awesome Value');
ViewModel.AwesomeProperty.label = 'My Awesome Label';
ViewModel.AwesomeProperty.template = 'awesomeTemplate';
ViewModel.AwesomeProperty.otherMetaData = 'etc'; 
```

这样做的副作用是将 ViewModel.AwesomeProperty 传递给模板将数据上下文设置为 observable 的值（在本例中为“Awesome Value”），从而使元数据无法从 $data 访问：

```
<script id="example" type="text/html">
    <!-- This won't work anymore -->
    <span data-bind="text: $data.label></span>
</script>
<div data-bind="template: {name: 'example', data: AwesomeProperty}"></div> 
```

我现在的解决方法是将数据值包装在一个匿名对象中，如下所示：

```
<script id="example" type="text/html">
    <!-- Now it works again -->
    <span data-bind="text: data.label></span>
</script>
<div data-bind="template: {name: 'example', data: {data:AwesomeProperty}}"></div> 
```

但这是不优雅且不理想的。在有很多自动生成的情况下，这不仅不方便，而且实际上是一个主要障碍。我考虑过制作自定义绑定来包装模板绑定，但我希望有更好的解决方案。

这是我一直在为级联下拉菜单工作的一个真实示例。[这个 JSFiddle](http://jsfiddle.net/daedalus28/UFVYg/7/)有效，但[那个 JSFiddle](http://jsfiddle.net/daedalus28/UFVYg/8/)没有。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T04:27:09.177

问题是淘汰赛在解包后将始终使用该值。如果它恰好是可观察的，您将失去这些子属性。您必须将您的 observable 重新包装到另一个对象中，这样您就不会像已经找到的那样丢失它。

您可以将其包装起来的一个好方法是为 subscribables（或任何更派生的类型）创建一个函数，该函数将执行此重新包装。您可以将所有单独的元数据附加到这个重新包装的对象上，也可以将它们打包到自己单独的对象中。您的代码可以再次优雅。

```
var buildSelection = function (choices, Parent) {
    return _(ko.observable()).extend({
        // add the metadata to a 'meta' object
        meta: {
            choices: choices,
            availableChoices: ko.computed(function () {
                if (!Parent) return choices;
                if (!Parent()) return [];
                return _(choices).where({ ParentID: Parent().ID });
            })
        }
    });
}

ko.subscribable.fn.templateData = function (metaName) {
    return {
        // access the value through 'value'
        value: this,
        // access the metadata through 'meta'
        meta: this[metaName || 'meta'] // meta property may be overridden
    };
} 
```

然后在您的绑定中，调用此函数来创建重新包装的对象。请记住在模板中调整绑定。

```
<script id="Selection" type="text/html">
    <select data-bind="
            options: meta.availableChoices,
            optionsText: 'Value',
            value: value,
            optionsCaption: 'Select One',
            enable: meta.availableChoices().length
    "></select>
</script>

<!-- ko template: { 'name': 'Selection', 'data': Level1.templateData() } --><!-- /ko -->
<!-- ko template: { 'name': 'Selection', 'data': Level2.templateData() } --><!-- /ko -->
<!-- ko template: { 'name': 'Selection', 'data': Level3.templateData() } --><!-- /ko --> 
```

[更新的小提琴](http://jsfiddle.net/jeff1203/UFVYg/9/)

# javascript - jQuery 循环插件“之前”和“之后”回调在初始加载时触发

> ID：13262015
> 
> 赞同：0
> 
> 时间：2012-11-07T01:29:34.563
> 
> 标签：javascript, jquery, jquery-plugins, jquery-cycle

我正在使用循环插件在显示幻灯片之前和之后绑定一些函数，这使用`before`和`after`回调可以正常工作，但是当插件最初加载时也会触发这些函数，这是代码的简化版本：

```
$(function() {

    $('.slider').cycle({
        before : function() {
            alert('this shouldn\'t appear on cycle load');             
        },
        after: function() {
            alert('this shouldn\'t appear on cycle load');             
        }           
    });

});​ 
```

例如，参见[JS Fiddle](http://jsfiddle.net/vengiss/gshtZ/4/)。警报会在页面加载后以及每次幻灯片转换之前和之后立即显示，有没有办法防止这种情况？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T01:52:59.077

您应该能够`skipInitializationCallbacks: true`在选项中指定（未记录）以避免在启动时获得回调。

[**小提琴**](http://jsfiddle.net/gshtZ/6/)

# c# - LongToByte 和 LongFromByte

> ID：13262021
> 
> 赞同：1
> 
> 时间：2012-11-07T01:30:30.320
> 
> 标签：c#, cross-platform, bytearray, long-integer, endianness

我有下面显示的两个函数，它们是为 long 和 byte[] 值的序列化而构建的。

```
 public static byte[] LongToByte(long Value)
    {
        byte[] Output = new byte[8];
        Output[0] = (byte)Value;
        Output[1] = (byte)(Value >> 8);
        Output[2] = (byte)(Value >> 16);
        Output[3] = (byte)(Value >> 24);
        Output[4] = (byte)(Value >> 32);
        Output[5] = (byte)(Value >> 40);
        Output[6] = (byte)(Value >> 48);
        Output[7] = (byte)(Value >> 56);
        return Output;
    }

    public static long LongFromByte(byte[] Value)
    {
        long Output = Value[0];
        Output += ((long)Value[1] << 8);
        Output += ((long)Value[2] << 16);
        Output += ((long)Value[3] << 24);
        Output += ((long)Value[4] << 32);
        Output += ((long)Value[5] << 40);
        Output += ((long)Value[6] << 48);
        Output += ((long)Value[7] << 56);
        return Output;
    } 
```

将使用上述方法确保字节序在任何使用它们的平台上保持不变。

还是会根据处理代码的系统的字节顺序改变两者的结果？

谢谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T02:05:53.047

我会避免进行自定义二进制转换，因为默认转换非常好并且有一些优化。

我建议您使用以下方法检查系统字节序：

```
var isLittleEndian = BitConverter.IsLittleEndian; 
```

并且仅当当前字节序不正确时才使用自定义转换（或者您可以使用 Array.Reverse(bytes) 反转字节）

如果性能是必须的（真的很偏执），您可以实现自定义反向字节算法（使用[查找表](http://jasonf-blog.blogspot.com/2006/08/hanselmans-endianess-converter.html)或[交换位](http://www.hanselman.com/blog/FlipTheEndiannessOfALongInC.aspx)，实现一个不安全的代码，以相反的顺序将字节转换为长字节（查看[BitConverter 源](http://reflector.webtropy.com/default.aspx/DotNET/DotNET/8@0/untmp/whidbey/REDBITS/ndp/clr/src/BCL/System/BitConverter@cs/1/BitConverter@cs)）或只是使用按位运算符改进您当前的代码。

编辑：我检查了您的自定义序列化程序的 IL 代码（使用 [Telerik Just Decompile]（http://www.telerik.com/products/decompiler.aspx 以更方便），发现从 long 到 byte 的转换是使用conv.u1 指令。

根据[MSDN](http://msdn.microsoft.com/en-us/library/system.reflection.emit.opcodes.conv_u1.aspx)：

> 如果将一种整数类型转换为另一种整数类型时发生溢出，则高位将被截断。

考虑到这一点，您的代码确实会在大端系统中产生相同的输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T01:53:05.527

是的，因为您要单独提取每个字节并将其存储在数组中。因此，例如，'Output[0]' 始终是您要转换的数字的最低 8 位。如果您随后将数组写入（到磁盘文件或通过某些传输），则字节将始终按照您指定的顺序。

[或者，您可以考虑使用BitConverter](http://msdn.microsoft.com/en-us/library/System.BitConverter.aspx)类文档的备注部分中描述的技术。

# python - python中的正则表达式问题：尝试检测`column`数据类型（数字）

> ID：13262022
> 
> 赞同：2
> 
> 时间：2012-11-07T01:30:31.800
> 
> 标签：python, regex

我想区分字符串

```
`citizen_group` int(10) NOT NULL,
`container_group` int(10) NOT NULL, 
```

从像这样的字符串

```
PRIMARY KEY (`citizen_group`,`container_group`),
KEY `fk_containergroup_readeraccess` (`container_group`) 
```

因此我创建了这个正则表达式

```
`?\w+`?\s\w+\(d+(,\s?\d+)?\)
   ^

*\w+`*   : string, wrapped in ` is possible.                `column`
\s       : followed by a space                       
\w+      : followed by one or more characters                real
\(d+     : followd by ( with one or more digits              (10
(,\s?\d)?: followed by 0 or 1 , with digits                  ,3
\)       : end with a )                                      ) 
```

但是这个正则表达式不仅选择前 2 个字符串，还选择最后一个

```
KEY `fk_containergroup_readeraccess` (`container_group`) 
```

有人能告诉我这是为什么吗？以及我需要如何修改正则表达式以使其仅选择前两个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T02:15:56.107

我用这个程序测试过：

```
import re, sys
for line in sys.stdin:
    match = re.search(r'`?\w+`?\s\w+\(\d+(,\s?\d+)?\)', line)
    if match:
        print match.group(0) 
```

（请注意，您在左括号之后的 '\d' 中缺少 '\'；我在此测试中修复了该问题。）

它与您的前两个示例匹配，但与您的后两个示例不匹配，因此我相信它可以按您的预期工作。

# html - 使用 perl 的 TokeParser 更改目录

> ID：13262023
> 
> 赞同：0
> 
> 时间：2012-11-07T01:30:40.023
> 
> 标签：html, perl, parsing, web-crawler

如何更改 TokeParser 在打开文件进行解析时显示的目录（例如，在 $htmlFileName 之前添加目录）？

```
my $p = HTML::TokeParser->new($htmlFileName); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T01:31:27.777

要在 Perl 中更改目录：

```
chdir($dir); 
```

`perldoc`说 ：

```
chdir EXPR
chdir FILEHANDLE
chdir DIRHANDLE
chdir   Changes the working directory to EXPR, if possible.  If EXPR is omitted, changes to the directory specified by $ENV{HOME}, if set; if not, changes to the directory specified by
        $ENV{LOGDIR}.  (Under VMS, the variable $ENV{SYS$LOGIN} is also checked, and used if it is set.)  If neither is set, "chdir" does nothing.  It returns true on success, false
        otherwise.  See the example under "die".

            On systems that support fchdir(2), you may pass a filehandle or directory handle as the argument.  On systems that don't support fchdir(2), passing handles raises an exception. 
```

**笔记**

另一种解决方案是将完整路径放入`$htmlFileName`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T01:55:11.993

```
my $p = HTML::TokeParser->new("/foo/bar/$htmlFileName")
    or die $!; 
```

# c# - 试图理解类型转换和装箱/拆箱

> ID：13262024
> 
> 赞同：2
> 
> 时间：2012-11-07T01:30:43.527
> 
> 标签：c#, casting, boxing

我目前正试图让我的头脑围绕铸造和拳击。据我目前了解：

*   装箱 - 值类型到引用类型（即 int 到对象）
*   拆箱 - 引用类型到值类型（即对象到 int）
*   类型转换 - 目前在我看来类似于拳击，但允许您分配您希望引用类型的对象类型。（即int to customObjectType）

我目前正在使用的示例试图让我绕过它。假设我有 2 个类，一个类中的一个方法调用另一个类的构造函数。

```
//1st class
public class FirstClass
{
  //code for fields,constructor & other methods

  public void CallOtherClass(int firstClassID)
  {
   int x = firstClassID;
   SecondClass test = new SecondClass(x);
  }

}

//2nd class
public class SecondClass
{
   public SecondClass(FirstClass firstClass)
   {
    //set some fields
   }
} 
```

好的，所以在上面的场景中，我们会遇到一个问题，因为方法 CallOtherClass 试图设置 SecondClass 的构造函数，但是 SecondClass 的构造函数需要一个 FirstClass 类型的参数，而我们只能提供一个 int。

所以据我了解，这将是使用类型转换的好时机？像下面的东西。

```
//1st class
public class FirstClass
{
  //code for fields,constructor & other methods

  public void CallOtherClass(int firstClassID)
  {
   int x = firstClassID;

   FirstClass a;
   a = (FirstClass)x;

   SecondClass test = new SecondClass(a);
  }

}

//2nd class
public class SecondClass
{
   public SecondClass(FirstClass firstClass)
   {
    //set some fields
   }
} 
```

在我看来，这似乎是将 x 的类型更改为 FirstClass 的引用类型。显然，我的理解与某些地方相去甚远，因为它会产生错误

```
"Cannot convert type 'int' to 'Namespace.FirstClass" 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T01:36:13.220

类型转换不是装箱或拆箱，但它可能会导致任何一种情况。由于 an `int`is not a `FirstClass`，即*int*不继承或扩展`FirstClass`，因此您不能将其强制转换为 type `FirstClass`。

只有在可能的情况下，类型转换才会导致转换。因此，您可以从 int 变为 double ，反之亦然，但可能会产生副作用。但是你不能从一个`int`到`FirstClass`。

装箱，将值或引用类型包装在包装器对象中。至少我是这么认为的。不确定内部是如何工作的，但我的猜测是赋值运算符“=”或强制转换在拆箱时隐式返回包装值，在装箱时返回包装器对象。

# sql-server - 在 SQL Server Management Studio 2012 中创建触发器

> ID：13262025
> 
> 赞同：0
> 
> 时间：2012-11-07T01:30:50.343
> 
> 标签：sql-server, database, triggers

根据以下数据库给出以下问题。a) 创建一个触发器，该触发器将在每次销售产品时自动更新手头数量，并在 LINE 表中列为一行。换言之，行行作为发票的一部分插入。每条线都链接到一个产品。将现有数量 (P_QOH) 减少订购的数量。

[http://i.stack.imgur.com/wWX17.png](http://i.stack.imgur.com/wWX17.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T14:23:59.777

您必须在表 Line 上创建插入触发器

```
CREATE TRIGGER [dbo].[TriggerUpdateQty] ON [dbo].[Line]
    AFTER INSERT
AS
... 
```

那么您需要运行一个更新 Product 表并加入插入的表。插入表表示触发触发器的插入数据。

```
Update Product set Product.P_QOH = (Product.P_QOH - inserted.Line_units)
from Prduct inner join inserted on Product.P_Code = inserted.P_Code 
```

# objective-c - 使用 for 循环为多个对象分配、初始化和设置属性？

> ID：13262028
> 
> 赞同：2
> 
> 时间：2012-11-07T01:31:08.463
> 
> 标签：objective-c, for-loop, iteration

有没有办法使用 for 循环来执行下面的代码，而不是重复输入？

```
 bar1 = [[UIView alloc] init];
    bar1.backgroundColor = [UIColor blueColor];
    [self addSubview:bar1];

    bar2 = [[UIView alloc] init];
    bar2.backgroundColor = [UIColor blueColor];
    [self addSubview:bar2];

    bar3 = [[UIView alloc] init];
    bar3.backgroundColor = [UIColor blueColor];
    [self addSubview:bar3];

    bar4 = [[UIView alloc] init];
    bar4.backgroundColor = [UIColor blueColor];
    [self addSubview:bar4];

    bar5 = [[UIView alloc] init];
    bar5.backgroundColor = [UIColor blueColor];
    [self addSubview:bar5]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T01:47:10.147

您可以使用 C 数组：

```
enum { NBars = 5 };

@implementation MONClass
{
  UIView * bar[NBars]; // << your ivar. could also use an NSMutableArray.
}

- (void)buildBars
{
  for (int i = 0; i < NBars; ++i) {
    bar[i] = [[UIView alloc] init];
    bar[i].backgroundColor = [UIColor blueColor];
    [self addSubview:bar[i]];
  }
} 
```

* * *

或者您可以使用`NSArray`：

```
@interface MONClass ()
@property (nonatomic, copy) NSArray * bar;
@end

@implementation MONClass

- (void)buildBars
{
  NSMutableArray * tmp = [NSMutableArray new];
  enum { NBars = 5 };
  for (int i = 0; i < NBars; ++i) {
    UIView * view = [[UIView alloc] init];
    view.backgroundColor = [UIColor blueColor];
    [tmp addObject:view];
    [self addSubview:view];
  }
  self.bar = tmp;
} 
```

* * *

或者，如果您想保留这些单独的属性，您可以使用“字符串类型”并使用 KVC：

```
- (void)buildBars
{
  enum { NBars = 5 };
  // if property names can be composed
  for (int i = 0; i < NBars; ++i) {
    UIView * theNewView = ...;
    [self setValue:theNewView forKey:[NSString stringWithFormat:@"bar%i", i]];
  }
} 
```

或者

```
- (void)buildBars
  // else property names
  for (NSString * at in @[
    // although it could use fewer characters,
    // using selectors to try to prevent some errors
    NSStringFromSelector(@selector(bar0)),
    NSStringFromSelector(@selector(bar1)),
    NSStringFromSelector(@selector(bar2)),
    NSStringFromSelector(@selector(bar3)),
    NSStringFromSelector(@selector(bar4))
  ]) {
      UIView * theNewView = ...;
      [self setValue:theNewView forKey:at];
  }
} 
```

* * *

但还有其他一些选择。希望这足以让你开始！

# sql-server - SQL Server 2008 跟踪查询和查询执行的输出（记录行）

> ID：13262034
> 
> 赞同：2
> 
> 时间：2012-11-07T01:31:36.213
> 
> 标签：sql-server, sql-server-2008-r2, ssms

我想以编程方式跟踪和保存 SQL Server 2008 R2 中查询执行的所有查询和输出（记录行）。

我`TraceServer`在 Visual C# 中轻松实现了基于 SMO（服务器管理对象）类的查询宽限程序。

但是，我无法跟踪查询执行的输出（记录行），这些输出类似于 SSMS（SQL Server Management Studio）的结果窗口中的输出。

我如何追踪和保存它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T05:08:07.977

您无法使用 Profiler 或 SMO 跟踪获取查询执行结果。根据您要实现的目标，您可以在使用 Profiler 捕获的 SSMS 查询中运行，也可以创建表并将代码添加到查询中以将结果保存在表中。

# wpf - 是否可以为 StaticResource 动态创建 ResourceKey？（例如使用绑定）

> ID：13262037
> 
> 赞同：2
> 
> 时间：2012-11-07T01:31:50.087
> 
> 标签：wpf

假设我要绑定的对象有一个属性，其中包含一个表示 ResourceKey 的字符串 - 我如何让 StaticResource 根据与底层对象的绑定动态获取它的 ResourceKey？

我想要与此等效的东西

```
MyProperty="{StaticResource ResourceKey={Binding Path=MyProperty}}" 
```

虽然编译，但它会失败并抱怨找不到 System.Windows.Data.Binding 类型的键

如果基础值发生变化（例如 DynamicResource），我不需要动态重新评估

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T06:02:25.850

我在这里找到了我想要的东西：

[http://blog.functionalfun.net/2009/12/specifying-resource-keys-using-data_31.html](http://blog.functionalfun.net/2009/12/specifying-resource-keys-using-data_31.html)

这是一个自定义标记扩展，其行为类似于常规绑定，但 Path 将指向一个将目标转换为 ResourceKey 的属性，然后绑定将返回资源！

我发现这非常有用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-11T08:03:53.377

也可以在 XAML 代码中执行此操作

```
<MyControl.Resources>
    <Image x:Key="Image_1" Source="{StaticResource ResourceKey={x:Static img:ImageResourcesKeys.Image_1}}" x:Shared="false"/>
    <Image x:Key="Image_2" Source="{StaticResource ResourceKey={x:Static img:ImageResourcesKeys.Image_2}}" x:Shared="false"/>
    <Style TargetType="MyProperty">
        <Style.Triggers>
            <DataTrigger Binding="{Binding ImageType}" Value="Image_1">
                <Setter Property="MyProperty" Value="{StaticResource Image_1}" />
            </DataTrigger>
            <DataTrigger Binding="{Binding ImageType}" Value="Image_2">
                <Setter Property="MyProperty" Value="{StaticResource Image_2}" />
            </DataTrigger>
         </Style.Triggers>
     </Style>
 </MyControl.Resources> 
```

您只需要一个字符串属性 ImageType 来选择您要使用的图像

# android - Linux 暂停/恢复代码流（在安卓手机上）

> ID：13262039
> 
> 赞同：5
> 
> 时间：2012-11-07T01:32:59.250
> 
> 标签：android, linux, linux-device-driver, resume, suspend

有没有人知道关于android/linux挂起/恢复的整个过程和代码流如何的好读物（按下手机上的结束键后）？我正在尝试理解和阅读相关的代码和文件。

或者，也许有人可以指出我要查看的代码......

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-07T04:31:46.177

我希望我能帮上忙。

> > Android是基于Linux的，所以和Linux Suspend Resume的基础差不多。几乎没有额外的功能，最重要的是**唤醒锁**和**早期暂停**，它们被添加以使手机、PDA 更省电，因为它们的电池有限。

现在让我们从您要问的问题开始：一旦您按下电源按钮，显然会触发中断，从而启动序列。

**区别：**您应该已经注意到，一旦按下电源按钮，LCD 和触摸就会进入睡眠状态。他们是**early_suspend**。设备可能已启动，只是最耗电的 LCD，触摸已进入睡眠状态。然后在后台检查**唤醒锁**，是否有人在获取，就好像有人在获取一样，然后执行那些待处理的任务。

**常见：**然后文件系统被同步（RAM--> NAND）并且进程被冻结。然后设备被挂起，然后 CPU 状态被保存，然后它进入睡眠状态。序列在 Linux 和 Android 中都很常见。

在 Android 收到 event.POWER 并确认不存在唤醒锁后，Android 通过以下方式触发内核中的挂起流程`echo mem > /sys/power/state`：

**state_store >> pm_suspend >> enter_state >> suspend_prepare >> suspend_devices_and_enter >> dpm_suspend_start >> dpm_suspend >> device_suspend >> __device_suspend ---> suspend_enter（在__device_suspend完成后由suspend_device_and_enter调用）**

上述序列在 Linux 和 Android 中都存在。

文件：suspend.c、（kernel/power/）wakelock.c、main.c（drivers/base/power）。

**注意：**所有 SoC 特定的挂起回调，如 enter、valid、begin 都存在于 pm.c 中，存在于 arch/arm/< 文件夹中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-04T08:09:38.113

这是一个关于暂停/恢复代码流的大话题（在安卓手机上）。**内核中的代码流**由 shingaridavesh 说明。

更重要的是，内核私有接口（机制）将系统挂起到 Android。但大部分控制逻辑（策略）都在Android系统的PowerManagerService中。我希望这能帮助您了解按下电源键后系统的真正作用。

### 1.报告PowerKey

1.  通过内核中的输入系统报告电源键事件，可能是这样的：（取决于你是什么SoC平台）

    input_report_key(powerkeydev,KEY_POWER， 1）； input_sync(powerkeydev); msleep(1); input_report_key(powerkeydev,KEY_POWER， 1）； input_sync(powerkeydev);

    KEY_POWER = 116 在 include/uapi/linux/input.h 中定义

2.  android/frameworks/base/data/keyboards/Generic.kl 中的键码映射 android/frameworks/native/include/input/KeycodeLables.h

3.  拦截关键事件 android/frameworks/base/services/core/java/com/anroid/server/policy/PhoneWindowManager.java interceptKeyBeforeQueueing() >> interceptPowerKeyUp() >> powerPress() >> powerPress >> case SHORT_PRESS_POWER_GO_TO_SLEEP >> mPowerManager 。去睡觉

4.  管理 PowerManagerService 中的唤醒锁： PowerManager.java: goToSleep() -> mService.goToSleep() PowerManagerService.java: goToSleep() -> goToSleepInternal -> goToSleepNoUpdateLocked() -> updatePowerStateLocked() -> updateSuspendBlockerLocked() （**清除唤醒锁**）

### 2\. libsuspend 触发挂起

1.  suspend_thread_func 检查应该每 100 毫秒暂停一次。清除所有唤醒锁后：

    **android/system/core/libsuspend/autosuspend.c：** suspend_thread_func() -> write(state_fd, sleep_state, strlen(sleep_state))

这个menes: **echo "mem" > /sys/power/state**触发内核中的挂起流程。

### 3\. 如何设置自动挂起线程？

线程 suspend_thread_func() 由以下人员创建：

1.  初始化自动挂起

    **android/system/core/libsuspend/autosuspend.c:** int autosuspend_enable(void)

2.  在 jni 中调用 autosuspend

    **android/frameworks/base/services/core/jni/com_android_server_power_PowerManagerService.cpp:** autosuspend_enable() -> nativeSetAutoSuspend()

3.  由 PowerManagerService 初始化

    **android/services/core/java/com/android/server/power/PowerManagerService.java:** nativeSetAutoSuspend(boolean enable);

# android - Camera Preview 以 C++ 开始，但呈现到 Java 表面

> ID：13262043
> 
> 赞同：3
> 
> 时间：2012-11-07T01:33:12.433
> 
> 标签：android, android-layout, java-native-interface, android-camera

在 Android 中，是否可能（如果是，如何）：

我想在我的 java 中设置一个布局并向其中添加一个视图，其中该视图包含一个用于渲染相机预览的表面视图。但是，我不想用 Java 实例化和启动相机。我只想设置视图，以便保持布局结构。

然后，我有一个通过 JNI 访问的本机 C++ 组件，我想实际启动相机并在上面提到的 SurfaceView 中呈现它的预览。

这种设置的原因是我想保留我在 Java 中定义的布局，但在 C++ 中访问相机及其预览帧。我不想在 Java 中处理预览帧，然后将它们传递给 C++，因为那样效率不高。

另一种选择是在 C++ 中设置我的 java 布局，但不确定这是否可能？

# java - 如何在java中做一个数字键盘

> ID：13262045
> 
> 赞同：1
> 
> 时间：2012-11-07T01:33:32.710
> 
> 标签：java, swing, jbutton, numeric-keypad

我试图弄清楚如何在java中做一个数字键盘。我最近开始使用java，还有很多东西要学。以下是我到目前为止想出的，但它一次只返回一个字符。仍在研究这个，但非常感谢任何帮助..谢谢

```
currentButton = (JButton)event.getSource();
itemQuantity = currentButton.getText().charAt(0) - '0'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T01:45:25.247

你的问题对我来说有点模糊。

我希望 Integer.parseInt("string") 和/或 Double.parseDouble("string") 对你有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T02:20:06.217

看起来您正在使用按钮的文本作为代表`itemQuantity`. 每次按下按钮时，您应该将该按钮的数字附加到字符串中：

```
String currentString = "";
currentString += currentButton.getText(); 
```

然后你可以得到@user1804740建议的数值：

```
itemQuantity = Integer.parseInt(currentString); 
```

请注意，您必须处理`NumberFormatException`转换引发的任何问题。

# user-interface - 是否可以在 Github 中查看长提交？

> ID：13262046
> 
> 赞同：0
> 
> 时间：2012-11-07T01:33:45.543
> 
> 标签：user-interface, github, commit

我刚刚在 Github for Windows 中提交了一条非常长的消息。即使窗口最大化，我也无法阅读整个内容，更重要的是它不会让我向下滚动查看文件更改。只需做一个长提交作为测试，你就会明白我在说什么。我不喜欢在控制台中打字来做应该用 GUI 来做的事情，所以我很想知道解决这个问题的方法。谷歌什么都不提供。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T04:34:39.030

我也向 Github 提交了报告，并得到了回复：

> 感谢您的报告！我刚刚对此进行了测试，并且也遇到了同样的问题。我将提交一张票，让我们的 Windows 开发人员查看。

所以现在看起来不可能，而且显然我是世界上唯一写超过 60 行提交消息的人。

# java - AES 加密（Python 和 Java）

> ID：13262047
> 
> 赞同：1
> 
> 时间：2012-11-07T01:34:00.673
> 
> 标签：java, python, security, encryption, aes

我正在用 Java 和 Python 制作一个项目，其中包括将加密字符串从一个发送到另一个。我可以让语言相互理解并完全解密/加密字符串。然而，我正在与某人交谈，并被告知我并不完全安全。我正在为项目使用 AES 加密。部分问题是我正在分发软件，需要想出一种有效的方法和安全的方法来确保服务器端都知道**IV**和**'Secret Key'**。现在，相同的字符串将始终加密为相同的结果。如果我可以更改这两个因素，它们会有所不同，因此具有相同密码的 2 个用户将不会拥有相同的加密密码。请记住，服务器只需要管理一个帐户。

感谢您的回复，并提前非常感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T01:40:03.573

通常，您会随机生成 IV，并将其与加密消息一起发送。IV 不需要是秘密的——它只需要对于您发送的每条消息都是不同的。

实施加密货币时需要担心各种各样的问题。例如，您的分组密码模式很重要——如果您使用的是 IV，您可能没有使用 ECB，但这留下了很多其他选项。填充攻击和其他微妙的事情也是一个问题。

一般来说，如果可以避免的话，你不想自己实现加密。出错太容易了，而正确通常非常重要。您可能想在 Security StackExchange 上寻求更多帮助。

# javascript - 配置 text.js 的位置

> ID：13262050
> 
> 赞同：3
> 
> 时间：2012-11-07T01:34:11.187
> 
> 标签：javascript, requirejs, requirejs-text

我将 requirejs 与文本插件一起使用。默认情况下，requirejs 假定`text.js`存在于你的`baseUrl`. 但是，我想将它保存在其他地方。我需要在哪里/如何/何时配置requirejs？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-05-27T22:15:39.730

要添加到 shioyama 的答案，`.js`in the`"/absolute/path/to/text.js"`是不必要的。它在 require.js 检查路径时附加：

```
requirejs.config({
  paths: {
    "text": "/absolute/path/to/text"
  }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T01:51:35.860

您可以为此使用 requirejs 的[路径配置](http://requirejs.org/docs/api.html#config-paths)。从文档中：

> 路径：未直接在 baseUrl 下找到的模块名称的路径映射。假定路径设置是相对于 baseUrl 的，除非路径设置以“/”开头或其中包含 URL 协议（“如 http:”）。

所以你可以做这样的事情：

```
requirejs.config({
  paths: {
    "text": "/absolute/path/to/text.js"
  }
}); 
```

然后，您可以`text`在模块中用作依赖项，并且 require.js 会知道在`/absolute/path/to/text.js`.

# android - ksoap2中复杂对象数组的反序列化错误

> ID：13262051
> 
> 赞同：1
> 
> 时间：2012-11-07T01:34:23.673
> 
> 标签：android, ksoap2

我在本地 tomcat 服务器和客户端 android 上有一个 web 服务。我必须通过 ksoap2 将一组自定义对象从客户端发送到 web 服务。这是客户端中定义的对象代码：

```
 import java.io.Serializable;
import java.util.Hashtable;

import org.ksoap2.serialization.KvmSerializable;
import org.ksoap2.serialization.PropertyInfo;

public class Istante implements KvmSerializable, Serializable
{

private static final long serialVersionUID = 1L;

public float XCoord;
public float YCoord;
public float Pressure;
public float gap;
int action;
int idCampione;
int idAnagrafica;

public Istante() {

}

public Istante(float xCoord, float yCoord, float pressure, float Gap, int Action, int IdCampione, int IdAnagrafica) {

    this.XCoord = xCoord;
    this.YCoord = yCoord;
    this.Pressure = pressure;
    this.gap = Gap;
    this.action = Action;
    this.idCampione = IdCampione;
    this.idAnagrafica = IdAnagrafica;
}
@Override
public Object getProperty(int arg0) {

    switch (arg0) {
    case 0:
        return XCoord;
    case 1: 
        return YCoord;
    case 2:
        return Pressure;
    case 3:
        return gap;
    case 4: 
        return action;
    case 5:
        return idCampione;
    case 6:
        return idAnagrafica;
    default:
        return null;
    }
}

@Override
public int getPropertyCount() {

    return 7;
}

@Override
public void getPropertyInfo(int arg0, Hashtable arg1, PropertyInfo arg2) {
    switch (arg0) {
    case 0:
        arg2.name = "XCoord";
        arg2.type = Float.class;
        break;
    case 1: 
        arg2.name = "YCoord";
        arg2.type = Float.class;
        break;
    case 2:
        arg2.name = "Pressure";
        arg2.type = Float.class;
        break;
    case 3:
        arg2.name = "gap";
        arg2.type = Float.class;
        break;
    case 4: 
        arg2.name = "action";
        arg2.type = PropertyInfo.INTEGER_CLASS;
        break;
    case 5:
        arg2.name = "idCampione";
        arg2.type = PropertyInfo.INTEGER_CLASS;
        break;
    case 6:
        arg2.name = "idanagrafica";
        arg2.type = PropertyInfo.INTEGER_CLASS;
        break;
    default:
        break;
    }

}

@Override
public void setProperty(int arg0, Object arg1) {
    switch (arg0) {
    case 0:
        XCoord = Float.parseFloat(arg1.toString());
        break;
    case 1: 
        YCoord = Float.parseFloat(arg1.toString());
        break;
    case 2:
        Pressure = Float.parseFloat(arg1.toString());
        break;
    case 3:
        gap = Float.parseFloat(arg1.toString());
        break;
    case 4: 
        action = Integer.parseInt(arg1.toString());
        break;
    case 5:
        idCampione = Integer.parseInt(arg1.toString());
        break;
    case 6:
        idAnagrafica = Integer.parseInt(arg1.toString());
        break;
    default:
        break;
    }

}
}

    import java.util.Hashtable;
import java.util.Vector;

import org.ksoap2.serialization.KvmSerializable;
import org.ksoap2.serialization.PropertyInfo;

public class ListaIstanti extends Vector<Istante> implements KvmSerializable {

        private static final long serialVersionUID = 1L;  // you can let the IDE generate this

    @Override
    public Object getProperty(int index) {
    return this.get(index);
    }

    @Override
    public int getPropertyCount() {
    return this.size();
    }

    @Override
    public void setProperty(int index, Object value) {
    this.add((Istante) value);
    }

    @Override
    public void getPropertyInfo(int index, Hashtable properties, PropertyInfo info) {
    info.name = "Istante";
    info.type = Istante.class;
    }

}

public class Campione implements KvmSerializable {

private static final long serialVersionUID = 1L;

public ListaIstanti istanti;
//public int size;

public Campione() {
}

public Campione(ListaIstanti listaIstanti) {
    //size = listaIstanti.length;
    //istanti = new Istante[size];
    istanti = new ListaIstanti();
    istanti = listaIstanti;
}

@Override
public Object getProperty(int arg0) {
    switch (arg0) {
    case 0:
        return istanti;
    default:
        return null;
    }
}

@Override
public int getPropertyCount() {
    return 1;
}

@Override
public void getPropertyInfo(int arg0, Hashtable arg1, PropertyInfo arg2) {
    switch (arg0) {
    case 0:
        arg2.name = "campione";
        arg2.type = ListaIstanti.class;
        break;
    default:
        break;
    }

}

@Override
public void setProperty(int arg0, Object arg1) {
    switch (arg0) {
    case 0:
        istanti = (ListaIstanti) arg1;
        break;
    default:
        break;
    }

}

} 
```

这是客户端代码的一部分：

```
 ...
METHOD_NAME = "setCampioni";
ListaIstanti lista = new ListaIstanti();
        for (int q=0; q<istanti.size(); q++){
            //camp[q] = istanti.get(q);     
            lista.add(istanti.get(q));
        } 
SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
try {
 PropertyInfo pi = new PropertyInfo();
            pi.setName("Campione");
            pi.setValue(campione);
            pi.setType(Campione.class);
            request.addProperty(pi);
                    SoapEnvelope.VER11);

            envelope.dotNet = true;
        envelope.setOutputSoapObject(request);

        envelope.addMapping(NAMESPACE2, "Istante", new Istante().getClass());
        envelope.addMapping(NAMESPACE2, "Campione", new Campione().getClass());
        envelope.addMapping(NAMESPACE2, "ListaIstanti", new ListaIstanti().getClass());
        Marshal floatMarshal = new MarshalFloat();
        floatMarshal.register(envelope);
        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
        androidHttpTransport.debug = true;
        } catch (Exception E) {
        E.printStackTrace();
        }
        ... 
```

所以这些是服务器端相同对象的类：

```
import java.io.Serializable;

public class Istante implements Serializable {

private static final long serialVersionUID = 1L;

public float XCoord;
public float YCoord;
public float Pressure;
public float gap;
int action;
int idCampione;
int idAnagrafica;

public Istante() {
}

public Istante(float xCoord, float yCoord, float pressure, float Gap, int Action, int IdCampione, int IdAnagrafica) {

    this.XCoord = xCoord;
    this.YCoord = yCoord;
    this.Pressure = pressure;
    this.gap = Gap;
    this.action = Action;
    this.idCampione = IdCampione;
    this.idAnagrafica = IdAnagrafica;
}

public void setXCoord(float XCoord) {
    this.XCoord = XCoord;
}

public void setYCoord(float YCoord) {
    this.YCoord = YCoord;
}

public void setPressure(float Pressure) {
    this.Pressure = Pressure;
}

public void setGap(float gap) {
    this.gap = gap;
}

public void setAction(int action) {
    this.action = action;
}

public void setIdCampione(int idCampione) {
    this.idCampione = idCampione;
}

public void setIdAnagrafica(int idAnagrafica) {
    this.idAnagrafica = idAnagrafica;
}

public float getXCoord() {
    return XCoord;
}

public float getYCoord() {
    return YCoord;
}

public float getPressure() {
    return Pressure;
}

public float getGap() {
    return gap;
}

public int getAction() {
    return action;
}

public int getIdCampione() {
    return idCampione;
}

public int getIdAnagrafica() {
    return idAnagrafica;
} 
```

}

```
import java.io.Serializable;

import java.util.Vector;

public class ListaIstanti extends Vector<Istante> implements Serializable {

private static final long serialVersionUID = 1L;  // you can let the IDE generate this

}

import java.io.Serializable;

import com.biosign.vo.ListaIstanti;

public class Campione implements Serializable {

    private static final long serialVersionUID = 1L;

    public ListaIstanti istanti = new ListaIstanti();

    public Campione() {
    }

public Istante getIstante(int index) {
return this.get(index);
}

public int getSize() {
return this.size();
}

public void setIstante(Istante value) {
this.add((Istante) value);
}
}

public void setCampione(ListaIstanti listaIstanti) {

    istanti = listaIstanti;
}

public ListaIstanti getCampione() {
    return istanti;
}

public int size() {
    return istanti.size();
}

public Istante get(int i) {
    return istanti.get(i);
}

} 
```

这是Web服务类中的方法：

```
public Boolean setCampioni(Campione campioni){

          try {
            stmt = (Statement) con.createStatement();
        } catch (SQLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
          ListaIstanti lista = new ListaIstanti();
          lista = campioni.getCampione();
          Istante ist = new Istante();
          ist = lista.get(1);
          System.out.println("eccoci" + ist.getXCoord());
          } 
```

因此，当我尝试发出发送数组的请求时，客户端可以很好地序列化对象，但在服务器端我有这个错误：

```
java.lang.ArrayIndexOutOfBoundsException: 1
at org.apache.axis2.databinding.utils.BeanUtil.deserialize(BeanUtil.java:630)
at org.apache.axis2.rpc.receivers.RPCUtil.processRequest(RPCUtil.java:153)
at org.apache.axis2.rpc.receivers.RPCUtil.invokeServiceClass(RPCUtil.java:206)
at org.apache.axis2.rpc.receivers.RPCMessageReceiver.invokeBusinessLogic(RPCMessageReceiver.java:117)
at org.apache.axis2.receivers.AbstractInOutMessageReceiver.invokeBusinessLogic(AbstractInOutMessageReceiver.java:40)
at org.apache.axis2.receivers.AbstractMessageReceiver.receive(AbstractMessageReceiver.java:114)
at org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:181)
at org.apache.axis2.transport.http.HTTPTransportUtils.processHTTPPostRequest(HTTPTransportUtils.java:172)
at org.apache.axis2.transport.http.AxisServlet.doPost(AxisServlet.java:146)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source) 
```

在 LogCat 中：

```
W/System.err(1306): SoapFault - faultcode: 'soapenv:Server' faultstring: '1' faultactor: 'null' detail: org.kxml2.kdom.Node@41021438 
```

请帮帮我：为什么我的网络服务不能反序列化对象？

# list - Ocaml 整数列表到整数列表列表（展平相反）

> ID：13262057
> 
> 赞同：2
> 
> 时间：2012-11-07T01:35:16.107
> 
> 标签：list, functional-programming, split, ocaml

使用整数列表，例如：

```
[1;2;3;4;5;6;7;8;9] 
```

如何从上面创建一个整数列表列表，所有新列表都具有相同的指定长度？

例如，我需要从：

```
[1;2;3;4;5;6;7;8;9] to [[1;2;3];[4;5;6];[7;8;9]] 
```

要拆分的数字是 3？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T21:27:19.313

所以你真正想要的是一个类型的函数

```
val split : int list -> int -> int list list 
```

它需要一个整数列表和一个子列表大小。一个更通用的呢？

```
val split : 'a list -> int -> 'a list list 
```

下面是实现：

```
let split xs size =
  let (_, r, rs) =
    (* fold over the list, keeping track of how many elements are still
       missing in the current list (csize), the current list (ys) and
       the result list (zss) *) 
    List.fold_left (fun (csize, ys, zss) elt ->
      (* if target size is 0, add the current list to the target list and
         start a new empty current list of target-size size *)
      if csize = 0 then (size - 1, [elt], zss @ [ys])
      (* otherwise decrement the target size and append the current element
         elt to the current list ys *)
      else (csize - 1, ys @ [elt], zss))
      (* start the accumulator with target-size=size, an empty current list and
         an empty target-list *)
        (size, [], []) xs
  in
  (* add the "left-overs" to the back of the target-list *)
  rs @ [r] 
```

如果您为此获得额外积分，请告诉我！;)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T02:37:24.463

您提供的代码是一种从列表前面删除给定数量元素的方法。继续的一种方法可能是保留此函数（可能稍微清理一下）并使用外部函数来处理整个列表。为了让这个工作更容易，你的函数可能还想返回列表的其余部分（这样外部函数可以很容易地判断出仍然需要分段的内容）。

不过，您似乎想用一个函数来解决问题。如果是这样，我看到的主要缺失是您已经剪掉的碎片的累加器。而且你也不能在达到计数时退出，你必须记住你刚刚剪下的部分，然后以同样的方式处理列表的其余部分。

如果我自己解决这个问题，我会尝试概括问题，以便递归调用在所有情况下都可以提供帮助。可能有效的方法是让第一部分比其他部分短。这样你就可以把它写成一个函数，没有累加器（只是递归调用）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-07T03:20:27.013

我可能会这样做：

```
 let split lst n =
      let rec parti n acc xs = 
        match xs with 
        | []              -> (List.rev acc, [])
        | _::_ when n = 0 -> (List.rev acc, xs)
        | x::xs -> parti (pred n) (x::acc) xs
      in let rec concat acc = function
        | [] -> List.rev acc
        | xs -> let (part, rest) = parti n [] xs in concat (part::acc) rest
      in concat [] lst 
```

请注意，如果`n`不均分，我们将宽容`List.length lst`。示例： `split [1;2;3;4;5] 2`给出`[[1;2];[3;4];[5]]`

最后说明：代码非常冗长，因为 OCaml 标准库非常简单：/ 使用不同的库，我相信这可以更简洁。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-08T07:36:30.247

```
let rec split n xs =
  let rec take k xs ys = match k, xs with
    | 0, _ -> List.rev ys :: split n xs
    | _, [] -> if ys = [] then [] else [ys]
    | _, x::xs' -> take (k - 1) xs' (x::ys)
  in take n xs [] 
```

# cocoa - 基于视图的 NSTableView

> ID：13262061
> 
> 赞同：2
> 
> 时间：2012-11-07T01:35:48.483
> 
> 标签：cocoa, nstableview

我一直在拼命试图想出对 tableView:heightOfRow: 的理解，我想我需要帮助。我想为行内的 textView 做动态行高，但似乎无法掌握这种方法。我已经阅读了我能找到的所有内容，实际上并不多。我可以使用这种方法来调整行的大小，但前提是要调整表的大小。不在视图中的行在可见并且调整表格大小之前不会正确调整大小。

我添加了 tableView:didAddRowView:forRow 方法，并使用相同的基本思想，最终将行大小压缩为一行。与 tableView:heightOfRow: 完全不同，即使它是相同的代码。我猜想设置 textView 边界的 tableView:didAddRowView:forRow 方法会以某种方式被缩放。

这是我的（希望是相关的）代码：

```
- (CGFloat)tableView:(NSTableView *)tv heightOfRow:(NSInteger)row {
    if (tv == dataTableView) {
        NSInteger valueCol = [tv columnWithIdentifier:@"value"];
        NSTableCellView *valueView = [tv viewAtColumn:valueCol row:row makeIfNecessary:NO];

        if (valueView) {
            // Working on the interesting column and this row is visible
            NSRect bounds = [[valueView textField] bounds];
            id value = [[valueView textField] stringValue];

            NSFont *fieldFont = [[valueView textField] font];
            CGFloat adjustedHeight = [value heightForWidth:bounds.size.width font:fieldFont];
            CGFloat rowHeight = [tv rowHeight];
            if (adjustedHeight <= rowHeight) adjustedHeight = rowHeight;

            return adjustedHeight;
        }
    }
    return [tv rowHeight];
}

- (void)tableView:(NSTableView *)tv didAddRowView:(NSTableRowView *)rowView forRow:(NSInteger)row {
    if (tv == dataTableView) {
        NSInteger valueCol = [tv columnWithIdentifier:@"value"];
        NSTableCellView *colView = [rowView viewAtColumn:valueCol];
        NSRect textFieldViewBounds = [[colView textField] bounds];
        NSTextField *colTextField = [colView textField];
        NSFont *colFont = [colTextField font];
        id value = [colTextField stringValue];
        CGFloat newHeight = [value heightForWidth:textFieldViewBounds.size.width font:colFont];
        NSSize colViewSize = colView.bounds.size;
        colViewSize.height = newHeight;
        textFieldViewBounds.size.height = newHeight;
        [colTextField setBounds:textFieldViewBounds];
    }
} 
```

更新：新代码运行得更好，但在初始加载时仍然存在故障，有时在滚动时：

```
- (CGFloat)tableView:(NSTableView *)tv heightOfRow:(NSInteger)row {
    if (tv == dataTableView) {
        NSInteger valueCol = [tv columnWithIdentifier:@"value"];
        NSTableCellView *valueView = [tv viewAtColumn:valueCol row:row makeIfNecessary:NO];

        if (valueView) {
            // Working on the interesting column
            NSRect bounds = [[valueView textField] bounds];
            id value = [[valueView textField] stringValue];

            NSFont *fieldFont = [[valueView textField] font];
            CGFloat adjustedHeight = [value heightForWidth:bounds.size.width font:fieldFont];
            CGFloat rowHeight = [tv rowHeight];
            if (adjustedHeight <= rowHeight) adjustedHeight = rowHeight;

            return adjustedHeight;
        }
    }
    return [tv rowHeight];
}

- (void) tableView:(NSTableView *)tv didAddRowView:(NSTableRowView *)rowView forRow:(NSInteger)row {
    if (tv == dataTableView) {
        [dataTableView noteHeightOfRowsWithIndexesChanged:[NSIndexSet indexSetWithIndexesInRange:NSMakeRange(row, 1)]];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T09:27:31.897

从您的代码中，我猜您希望根据文本字段单元格中的行数来更改行高，对吗？因此，如果您调整列或表格的大小，或者如果您输入新文本，高度应该会改变......？

IMO 你不需要在 -tableView:didAddRowViewForRow 中做任何事情：为时已晚，行视图应该已经有它的最终高度。尝试在那里修改视图框架可能会导致错误异常。由于您的文本字段位于 NSTableCellView 中（假设有适当的布局约束，默认设置应该没问题），它应该按预期显示给定您在 IB 中的设计以及 -tableView:heigthOfRow 返回的行高：

-tableView:heigthOfRow: 确实是您需要确定行高的方法。但是您需要为调用 to 方法的所有行返回一个适当的值，否则当它们在滚动期间进入可见矩形时，行将不会显示在正确的高度。所以我会为 viewAtColumn 方法的 makeIfNecessary: 参数选择 YES。

然后你需要让表格在必要时更新行高（调整列的大小、视图，也许输入新的文本......）。例如，这可以在 -tableViewColumnDidResize 中完成（使用 userinfo 字典来获取调整大小的列）或在编辑文本字段时完成。在那里，您需要在表格视图上调用 -noteHeightOfRowsWithIndexesChanged:。如果调整了列的大小，则为所有行调用它，并且 -tableView:heigthOfRow: 将返回所有高度。如果编辑了文本字段，您可能只想为其行调用它（但即使为所有行调用该方法也应该这样做）。

我希望它有所帮助。

# python - 在 Python 中找到每个数组中的最小值

> ID：13262066
> 
> 赞同：0
> 
> 时间：2012-11-07T01:36:20.910
> 
> 标签：python

假设我在 Python 3.3 中有以下数据：

```
my_array = 
   [{'man_id': 1, '_id': ObjectId('1234566'), 'type': 'worker', 'value': 11}, 
   {'man_id': 1, '_id': ObjectId('1234577'), 'type': 'worker', 'value': 12}],

   [{'man_id': 2, '_id': ObjectId('1234588'), 'type': 'worker', 'value': 11}, 
    {'man_id': 2, '_id': ObjectId('3243'), 'type': 'worker', 'value': 7},
    {'man_id': 2, '_id': ObjectId('54'), 'type': 'worker', 'value': 99},
    {'man_id': 2, '_id': ObjectId('9879878'), 'type': 'worker', 'value': 135}],
   #.............................
   [{'man_id': 13, '_id': ObjectId('111'), 'type': 'worker', 'value': 1}, 
    {'man_id': 13, '_id': ObjectId('222'), 'type': 'worker', 'value': 2},
    {'man_id': 13, '_id': ObjectId('3333'), 'type': 'worker', 'value': 9}] 
```

有3个数组。如何在每个数组中找到具有最小值的元素？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T01:39:04.043

```
[min(arr, key=lambda s:s['value']) for arr in my_array] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T01:41:09.977

也许这样的东西适合你：

```
for arr in my_array:
   minVal = min([row['value'] for row in arr])
   print [row for row in arr if row['value'] == minVal] 
```

# mysql - 从给定的 SQL 表中提供随机元素的服务是否可行？

> ID：13262068
> 
> 赞同：3
> 
> 时间：2012-11-07T01:36:40.333
> 
> 标签：mysql, sql, service, random

**抽象的**

在与一些同事交谈时，我们遇到了“从大型数据库表中提取随机行”问题。这是一个经典的方法，我们知道天真的方法（[也在 SO 上](https://stackoverflow.com/questions/580639/how-to-randomly-select-rows-in-sql)）通常是这样的：

> SELECT * FROM mytable ORDER BY RAND() LIMIT 1

**问题**

我们也知道这样的查询是完全低效的，并且实际上只能用于很少的行。可以采取一些方法来获得更高[的效率，例如这些](https://stackoverflow.com/questions/211329/quick-selection-of-a-random-row-from-a-large-table-in-mysql)仍然在 SO 上的方法，但它们不适用于任意主键，并且一旦数字主键中有孔，*随机性*就会出现偏差。最后一个引用问题的答案链接到[这篇文章](http://jan.kneschke.de/projects/mysql/order-by-rand/)，该文章有一个很好的解释和一些聪明的解决方案，涉及一个额外的“平均分布”表，每当“主数据”表发生变化时必须维护该表。但话又说回来，如果你在一张大桌子上经常删除，你可能会被不断更新添加的桌子搞砸了。另请注意，许多解决方案依赖于`COUNT(*)`这在 MyISAM 上速度快得离谱，但在 InnoDB 上却“很快”（我不知道它在其他平台上的表现如何，但我怀疑 InnoDB 案例可能代表其他事务性数据库系统）。

除此之外，即使是我能找到的最好的解决方案也很快，但不是*Ludicrous Speed*快。

**理念**

一个单独的服务可能负责生成、缓冲和分发随机行 ID 甚至整个随机行：

*   它可以根据原始 PK 的结构选择最佳方法来提取随机行 ID。服务可以在 ram 中维护有序的键列表（除了 PK 的实际大小之外，每行不应占用太多字节，标准 PC 可能最多 100~1000M 行，最多 1~ 100 亿行和强大的服务器）
*   一旦密钥在内存中，每个密钥都有一个隐含的“行号”，并且其中没有漏洞，因此只需选择一个随机数并直接获取相应的密钥
*   可以维护准备好使用的随机密钥缓冲区，以快速响应传入请求中的峰值
*   服务的消费者将连接并从缓冲区请求 N 个随机行
*   行作为简单键返回，*或者*服务可以维护一个（池）数据库连接以获取整行
*   如果缓冲区为空，则请求可能会阻塞或返回类似 EOF
*   如果将数据添加到主表中，则必须向服务发送信号以将相同的数据也添加到其副本中，刷新随机选择的缓冲区并从那里继续
*   如果从主表中删除数据，则必须向服务发出信号以从“所有键”列表和“随机选择”缓冲区中删除该数据
*   如果数据在主表中更新，则必须向服务发出信号以更新键列表和随机选择中的相应行

**为什么我们认为它很酷**

*   不接触磁盘，除了在启动时或发出信号时初始加载键
*   适用于任何类型的主键，无论是否为数字
*   如果您知道要更新大量数据，您可以在完成时发出信号（即不是在原始数据的每一次插入/更新/删除时），这基本上就像拥有一个细粒度的锁仅阻止对随机行的请求
*   对原始数据中任何类型的更新都非常快
*   将一些工作从关系数据库卸载到另一个仅内存的进程：有助于可伸缩性
*   从缓冲区快速响应，无需等待任何查询、扫描、排序
*   可以很容易地扩展到 SQL 之外的类似用例

**为什么我们认为这可能是一个愚蠢的想法**

*   因为*我们*在没有任何第三方帮助的情况下有了这个想法
*   因为没有人（我们听说过）曾经费心做类似的事情
*   因为它增加了混合的复杂性，以便在原始数据更改时保持更新

**问题是……**

是否已经存在类似的东西？如果没有，是否可行？如果不是，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T02:16:14.263

您的“合格主键缓存”概念的最大风险是在原始数据不断变化时使缓存保持最新。保持缓存同步的成本可能与对原始数据运行随机查询的成本一样高。

您希望如何向缓存发出已添加/删除/更新值的信号？如果您使用触发器执行此操作，请记住，即使生成它的事务被回滚，触发器也可以触发。这是从触发器通知外部系统的一般问题。

如果您在数据库中提交更改*后*从应用程序通知缓存，那么您必须担心其他应用程序在没有安装信号代码的情况下进行更改。或临时查询。或者来自您无法更改代码的应用或工具的查询。

一般来说，增加的复杂性可能不值得。大多数应用程序可以容忍一些妥协，并且它们不需要一直绝对随机选择。

例如，对于某些需求，不等式查找可能是可以接受的，即使已知的弱点是更频繁地选择间隙后面的数字。

或者您可以预先选择少量随机值（例如 30）并缓存它们。让应用程序请求从中选择。每隔 60 秒左右，用另一组随机选择的值刷新缓存。

或者选择一个在 MIN(id) 和 MAX(id) 之间均匀分布的随机值。尝试通过平等而不是不平等进行查找。如果该值对应于主键中的间隙，则只需循环并使用不同的随机值重试。如果在几次尝试后不成功，您可以终止循环。然后尝试另一种方法。平均而言，相等查找的改进的简单性和速度可以弥补偶尔的重试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T03:34:52.023

看来您基本上是在这里解决性能问题。大多数数据库性能专家建议您拥有与数据库大小一样多的 RAM，这样磁盘就不再是瓶颈——您的数据库位于 RAM 中并根据需要刷新到磁盘。

您基本上是在提议一个定制开发的内存中 CDC 散列系统。

如果您的数据库支持，您可以将其构建为仅限标准数据库的应用程序并将映射表锁定在 RAM 中。

我想我是说你可以在不开发自定义应用程序的情况下解决性能问题，只需使用现有的性能调整方法。

# mod-rewrite - mod_rewrite 外部链接问题（wordpress）

> ID：13262071
> 
> 赞同：0
> 
> 时间：2012-11-07T01:37:11.610
> 
> 标签：mod-rewrite, redirect, url-rewriting, external

我有一个redirect.php 和一个链接，它在WORDPRESS 中不起作用。

我希望当我单击我网站上的“hello”链接时，它会转到 redirect.php，用户会看到微调器 5 秒，然后用户将我的网站退出到 hello.com

看起来 mod_rewrite 有问题我无法解决

我真的很感激一个非常详细的答案。我很初级

这就是我所拥有的。

1.- 我的主页上有一个外部链接：

```
<a href="http://redirect.php?link=hello.com">Hello</a> 
```

2.- 在redirect.php 中，我有：

```
<html>
<head>
    ...
    <meta http-equiv="refresh" content="5;url=<?php echo $_GET['link'];?>" />
    ...
</head>
<body>
    <h1>You are leaving my site!</h1>
    <img src="/images/spinner.gif" alt="spinner" />
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T16:22:30.593

链接`<a href="http://redirect.php?...`不正确。这很可能是`<a href="/redirect.php?...`您服务器上的任何子目录。

您还应该在链接参数中包含协议或将其添加到元标记中。还要确保对元标记中的链接进行 HTML 编码，并在链接参数中正确地对域名进行 URL 编码。

因此，将链接更改为：

```
<a href="/redirect.php?link=http%3A%2F%2Ftest.com">Hello</a> 
```

如果您的网站根目录中有redirect.php 文件。并将元标记更改为：

```
<meta http-equiv="refresh" content="5;url=<?php echo htmlentities($_GET['link'], ENT_QUOTES,);?>" /> 
```

`$_SERVER('HTTP_REFERER')`您可能想对链接参数的有效性进行一些验证，并且您可能还想检查引荐来源网址[（](https://www.owasp.org/index.php/Open_redirect)）。

# java - Java-桥上的人

> ID：13262072
> 
> 赞同：2
> 
> 时间：2012-11-07T01:37:13.140
> 
> 标签：java

我在使用一个人从 7 英尺桥中间开始的程序时遇到问题。这是描述：

> > 有人站在一座 7 英尺长的桥的中心。他们的步幅正好是一英尺。他们无法控制自己前进的方向，但桥很窄，每一步只能前进或后退。
> > 
> > 编写一个程序，计算人在离开桥之前要走多少步。让程序执行此模拟 1000 次，并在输出中显示所采取的平均步数和最大步数。（提示：生成一个 0 或 1 的随机数，让一个向前相等，另一个向后相等）。这样做 20 次，以便您可以进行比较观察。

这是我到目前为止所拥有的：

```
import java.util.Random;
import java.util.Scanner;
import java.text.DecimalFormat;

public class prog214a
{
    public static void main(String[] args)
    {
        Random generator = new Random();
        System.out.println("1000 iterations");
        int runs = 0;
        int iter = 1000;
        double count = 7.0 / 2.0;
        int random;
        System.out.println("Run\tAvarage\tGreatest Number of Steps");
        // for(runs=1;runs<20; runs+=1)
        // {
        for (iter = 1000; iter > 1; iter -= 1)
        {
            double tries = 1;
            double avg = count / tries;
            random = generator.nextInt(2);
            if (random == 0)
            {
                count -= 1;
            }
            if (random == 1)
            {
                count += 1;
            }
            if (count <= 0 || count >= 7)
            {
                System.out.println("#" + runs + ":\t" + avg + "\t" + count);
                count = 0;
                runs += 1;
            }
            tries += 1;
        }
        // }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T01:57:50.300

Part of your problem is the way you're approaching it. Your code should show a neat path from the abstract set of things you're doing to an actual mechanical execution.

Your first problem is establishing an algorithm, or sequence of events you want to happen:

```
Print out position
Decide direction
Move
Repeat n times 
```

Now lets translate those gross steps into code. We do this by making methods for each:

```
public void printPosition();
public int findDirectionVector();
public void updatePosition(int move);//move is a vector
public void runSimulation(int iterations); 
```

Lets now fill out the control method:

```
public void runSimulation(int iterations) {
   for (n = 0; n < iterations ; n++) {
       executeIteration();//simple! 
   }
}

private void executeIteration() {
  printPosition();
  updatePosition(findDirectionVector());
} 
```

As you can see, we're making sure **each method does exactly one thing**. We are also leaving certain things (such as Position) as a member variable of the class rather than trying to handle it as a variable you're passing around. However, this is a change, so lets look at your initialization and class structure:

```
public Simulation {
  private int position = 0;
  private int iterations = 0;//number of times the person moves before you stop!

  public Simulation(int iterations) {
    this.iterations = iterations;
  }

  public static void main(String[] args) {
    Simulation sim = new Simulation(1000);//Run with 1000 iterations
    sim.runSimulation();
  }

  //your other methods go here
} 
```

Now, when you want to run this 1000 times you just have to wrap `sim.runSimulation()` in a for loop.

I've left out one very important check (has the man exited the bridge?) and the implementations of the other methods for you to do.

# java - 使用 RuntimeMXBean 实例和 System.getProperties 读取系统属性的区别

> ID：13262075
> 
> 赞同：5
> 
> 时间：2012-11-07T01:37:24.987
> 
> 标签：java

以这种不同的方式读取系统属性有什么区别

```
RuntimeMXBean RuntimemxBean = ManagementFactory.getRuntimeMXBean();
Object value =  RuntimemxBean.getSystemProperties();
System.out.println(value); 
```

*和*

```
Properties systemProperties = System.getProperties();
systemProperties.list(System.out); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T16:45:22.500

至少在 Sun JVM 中，结果应该与内部`RuntimeMXBean.getSystemProperties()`调用相同`System.getProperties()`。

```
public Map<String, String> getSystemProperties() {
    Properties localProperties = System.getProperties();
    HashMap localHashMap = new HashMap();

    Set localSet = localProperties.stringPropertyNames();
    for (String str1 : localSet) {
      String str2 = localProperties.getProperty(str1);
      localHashMap.put(str1, str2);
    }

    return localHashMap;
} 
```

不同之处在于您可以使用`RuntimeMXBean`远程 JVM（[参见 2](http://docs.oracle.com/javase/7/docs/api/java/lang/management/package-summary.html#examples)）来获取其系统属性。

# node.js - 部署 Node.js Web 应用程序时最重要的统计数据是什么？

> ID：13262077
> 
> 赞同：20
> 
> 时间：2012-11-07T01:37:51.233
> 
> 标签：node.js, monitoring, analytics, v8, joyent

**首先 - 关于我的背景：**我已经编程了一段时间（此时已经 10 年）并且在编写想法时相当有能力。一年多前我开始从事 Web 应用程序编程，幸运的是发现了 nodeJS，它让 Web 应用程序的创建感觉更像传统编程。现在，我有一个我已经开发了一段时间的 node.js 应用程序，它现在在网络上的生产环境中运行。**我的主要困惑源于我对 Web 开发世界非常陌生，并且在监视我的应用程序时并不真正知道什么是重要的，什么不是。**

我使用的是 Joyent SmartMachine，看着他们提供的分析选项有点不知所措。有很多不同的选项和配置，我不知道每个分析的真正目的是什么。对于以下问题，我将不胜感激任何答案，无论是针对 Joyent 的云分析还是完全通用的。

## 问题一

现在，我主要关心的是弄清楚我的应用程序是如何利用我运行它的服务器的。我想知道我的应用程序是否分配了适量的资源。它收到的请求数量是否会使服务器过度使用，或者它是否需要额外的资源？为此目的，对于 NodeJS 应用程序来说，哪些分析是重要的？（如果有区别的话，在不同的服务器上同时使用 MongoDB 和 Redis）

## 问题二

在管理生产中的服务器时，还有哪些其他统计数据通常非常重要？我习惯于运行一次以执行特定操作的程序（例如，一旦计算出图像就完成运行的光线追踪器），而不是持续运行并与许多客户端交互的网络应用程序。我敢肯定，对于像我这样的新手来说，对于长期的服务器管理员来说，有很多事情是显而易见的。

## 问题三

在专门处理 NodeJS 时要注意什么？在处理 NodeJS 的单线程事件循环与更标准的服务器系统时，哪些统计/分析变得特别重要？

我还有其他关于数据库如何参与等式的问题，但我认为现在这已经足够了......

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-10T02:28:12.047

从 0.4 到目前的 0.8 系列，我们已经在生产环境中运行了将近一年的 node.js。Web 应用是基于 mongo、redis 和 memcached 的 express 2 和 3。

几个事实。

*   节点无法处理大型 v8 堆，当它增长超过 200mb 时，您将开始看到 CPU 使用率增加
*   节点似乎总是泄漏内存，或者至少在没有实际使用它的情况下增加了大堆大小。我怀疑内存碎片，因为 v8 分析或 valgrind 显示 js 空间或驻留堆中没有泄漏。早期的 0.8 在这方面很糟糕，rss 可能是 1GB 和 50MB 堆。
*   挂起请求很难跟踪。我们编写了中间件来监控这些，特别是因为我们的应用程序是基于长轮询的

我的建议。

*   每台机器使用多个实例，每个 cpu 至少 1 个。与 haproxy、nginx 等具有会话亲和力的平衡
*   编写中间件以报告挂起的连接，即代码从未响应或延迟超过阈值的连接
*   经常重启实例，至少每周一次
*   编写轮询器，每分钟打印一个进程模块的内存统计信息
*   使用supervisord和fabric轻松进行流程管理

监控 CPU，报告内存统计信息并在阈值时重新启动

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-16T09:25:43.380

无论是哪种类型的 Web 应用程序、NodeJS 或其他类型，负载测试都会回答您的应用程序是否拥有适量的服务器资源。我最近为此找到的一个很好的网站是[Load Impact](http://loadimpact.com/)。

真正要回答的问题是，随着并发用户数量的增加，加载时间何时开始增加？当您达到一定数量的并发用户时，就会达到一个临界点，之后服务器性能将开始下降。因此，根据您希望在不久的将来访问您的网站的用户数量进行负载测试。

*你如何估计你期望的用户数量？*

**必须**在您的页面上安装 Google Analytics 或其他分析包！通过这种方式，您将能够看到每天有多少用户访问您的网站，以及每月访问量的增长情况，这有助于预测未来的预期访问量，从而预测服务器上的预期负载。

*即使我知道用户数量，我如何估计实际负载？*

答案在所有浏览器都可用的 F12 开发工具中。在任何浏览器中打开您的网站并按 F12（或 Opera Ctrl+Shift+I），这应该会打开浏览器的开发工具。在 Firefox 上确保您安装了 Firebug，在 Chrome 和 Internet Explorer 上它应该可以开箱即用。转到**网络**或**网络**选项卡，然后刷新您的页面。这将向您显示 HTTP 请求的数量、每个页面加载的带宽使用情况！

所以计算每日服务器负载的公式很简单：

每个页面加载的 HTTP 请求数 X 每个用户每天平均加载的页面数 X 预期并发用户数 = 每天对服务器的 HTTP 请求总数

和...

每页加载传输的 MB 数 X 每个用户每天平均加载的页数 X 预期并发用户数 = 每天所需的总带宽

我总是发现每天计算这些数字然后将其外推到几周和几个月更容易。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-22T08:22:52.240

Node.js 是单线程的，所以你绝对应该为你机器上的每个 CPU 启动一个进程。[到目前为止，集群](http://nodejs.org/docs/latest/api/cluster.html)是做到这一点的最佳方式，并且具有能够重新启动死亡的工作人员并检测无响应的工作人员的额外好处。

您还希望进行负载测试，直到您的请求开始超时或超过您认为的合理响应时间。这将使您对服务器可以处理的上限有一个很好的了解。[Blitz](http://www.blitz.io/)是众多值得一看的选项之一。

我从未使用过 Joyent 的统计信息，但[NodeFly](http://apm.nodefly.com/)和他们的[node-nodefly-gcinfo](https://github.com/NodeFly/node-nodefly-gcinfo#readme)是监控节点进程的好工具。

# c# - 绘制一个覆盖矩形（示例）

> ID：13262078
> 
> 赞同：0
> 
> 时间：2012-11-07T01:38:16.223
> 
> 标签：c#, drawing

我将如何绘制像这张图片一样的矩形？（注意中间的矩形略带灰色） [截图](http://puu.sh/1niK2)

我已经在 Forms/PictureBox 等上绘制了矩形，但对于我来说，无法弄清楚如何在所有打开的应用程序上进行绘制。

任何反馈将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T01:58:29.727

If you want just a border you can use [ControlPaint.DrawReversibleFrame](http://msdn.microsoft.com/en-us/library/system.windows.forms.controlpaint.drawreversibleframe.aspx).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T01:50:27.797

您需要创建一个设置为显示大小的窗口。没有边框，没有背景。基本上，一个*看不见*的窗口。然后你可以绘制矩形或任何你想要的东西，它们看起来会覆盖在其他东西之上。

请记住，您不能一直打开此窗口，因为它会掩盖其他所有内容并阻止事件通过。根据需要打开它，然后将其关闭。

# coffeescript - 如何测试依赖于 ngResource 服务的控制器

> ID：13262094
> 
> 赞同：3
> 
> 时间：2012-11-07T01:40:09.167
> 
> 标签：coffeescript, angularjs, jasmine

我有一个控制器，它依赖于通过 ngResource 构建的服务。我在测试这个时遇到了麻烦（尽管在实际应用程序中两者看起来都像一个魅力）。以下是（经过消毒的）控制器

```
MyApp.Controller.MyCarsController = (scope, http, typeService) ->
  if scope.context==undefined
    scope.ferrari_or_porshe =""
    scope.id = ""
  else if scope.context=="ferrari"
    scope.country_or_pi ="Ferrari"
  else if scope.context=="porshe"
    scope.country_or_pi ="Porshe"

  typeService.index
    ferrari_or_porshe: scope.ferrari_or_porshe
    id: scope.id
  , (response) ->
    scope.type = response
    scope.loading = false

MyApp.Controller.MyCarsController.$inject = ['$scope', '$http', 'Type'] 
```

这是服务：

```
MyApp.MyModule.factory 'Type', ['$resource', ($resource) ->
  TypeResource = $resource("/api/types/:ferrari_or_porshe/:id", {},
    index:
      method: "GET"
      isArray: true
  )
  return TypeResource
] 
```

最后，一些测试代码：

```
describe 'MyApp.Controller.MyCarsController', ->
  beforeEach module('MyModule')
  beforeEach inject ($rootScope, $http, $controller, Type) ->
    @scope = $rootScope.$new()
    @typeService = Type
    @scope.context = undefined
    $controller 'MyApp.Controller.MyCarsController', $scope: @scope

  describe '#home-page', ->

    it 'contains a list of types', ->
      expect(@scope.types.length).toBeGreaterThan 0

    it "sets instance variables correctly", ->
      expect(@scope.ferrari_or_porshe).toBe ""
      expect(@scope.id).toBe "" 
```

失败了：

```
 No more request expected in helpers/angular-mocks.js on line 889
  TypeError: 'undefined' is not an object (evaluating 'this.scope.types.length') in controllers/my_cars_controller_spec.js 
```

通过对 console.logs 的明智应用，我发现问题在于响应的最终回调从未达到。TypeResource 作为 [Function] 返回。

我的问题是：

如何驱动 Jasmine 测试以正确进入服务并获取响应？有没有办法为服务创建直接的单元测试？

任何和所有的帮助表示赞赏

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T09:14:18.960

解决方案如下：对于服务，使用作为 ngMock 的一部分捆绑的 $httpBackend：

[http://code.google.com/p/google-drive-sdk-samples/source/browse/ruby/app/lib/angular-1.0.0/angular-mocks-1.0.0.js?r=c43c943e32be395b7abca8150deb301d3cbc0dbe](http://code.google.com/p/google-drive-sdk-samples/source/browse/ruby/app/lib/angular-1.0.0/angular-mocks-1.0.0.js?r=c43c943e32be395b7abca8150deb301d3cbc0dbe)

使用它来模拟 Rest 响应。因为就我而言，我只关心验证 GET 请求是否发出：

```
 describe 'Type', ->
   describe '#index', ->
     beforeEach module('MyModule')
     beforeEach inject(($httpBackend) ->
       $httpBackend.whenGET('/api/types/ferrari/1').respond([])
     )

     it 'for a ferrari scope', inject((Type) ->
       ferrari_or_porsche = 'ferrari'
       id = '1'
       expect( Type.index('ferrari_or_porsche': ferrari_or_porsche, 'id': id) ).toEqual([ ])
     ) 
```

然后对于控制器，使用 jasmine 间谍模拟服务并用于`jasmine.any(Function)`警告回调。

```
 describe 'MyApp.Controller.MyCarsController', ->
   beforeEach module('myModule')
   beforeEach inject ($rootScope, $http, $controller, Type) ->
     @scope = $rootScope.$new()
     @typeService = Type
     @scope.context = undefined
     spyOn(@typeService, 'index')

   describe '#home-page', ->
     beforeEach inject ($controller) ->
       $controller 'MyApp.Controller.MyCarsController', $scope: @scope
     it 'contains a list of types', ->
       expect(@typeService.index).toHaveBeenCalledWith({ ferrari_or_porsche : '', id : '' }, jasmine.any(Function))

     it "sets instance variables correctly", ->
       expect(@scope.ferrari_or_porsche).toBe ""
       expect(@scope.id).toBe "" 
```

注意：我没有声明此解决方案的“规范性”。但它有效。注意：API 端点当然在其他地方进行了广泛的测试。

# asp.net-mvc-4 - 我应该如何使用实体框架对数据库进行建模？

> ID：13262096
> 
> 赞同：0
> 
> 时间：2012-11-07T01:40:25.067
> 
> 标签：asp.net-mvc-4, entity-framework-5

我刚开始使用实体框架设计器。我想问我应该如何创建我的实体文件。我想有 10 个表格，并且所有表格都将通过某一行链接到至少一个其他表格。我应该只创建一个文件并将所有模型放在那里还是为每个模型创建一个单独的文件。

我不知道这是否是一个问题，但我可以在谷歌上找到我的答案。我实际上不知道如何定义它......：D

因此，如果您对我应该如何为我的数据库建模有任何提示，那就太棒了。此外，如果您有更多关于我何时应该使用不同的实体文件的信息，这也会很有用。

我过去曾使用过 MySQL 设计器，但据我所知，您只需将模型移入设计器即可建立关系。所以我有点热衷于这样做（一个实体文件中的所有模型）但想先和你们核实一下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T01:45:04.130

只需为 VS [http://visualstudiogallery.msdn.microsoft.com/72a60b14-1581-4b9b-89f2-846072eff19d](http://visualstudiogallery.msdn.microsoft.com/72a60b14-1581-4b9b-89f2-846072eff19d)尝试此插件即可从现有数据库生成您的类

# c# - 在自定义 datagridviewCell 上验证单元格的值

> ID：13262097
> 
> 赞同：2
> 
> 时间：2012-11-07T01:40:30.810
> 
> 标签：c#, .net, winforms, validation, datagridview

我有`DataGridView`一个自定义的`DataGridViewColumn`. 该列托管第三方组件。我在单元格中进入编辑模式并修改其值，然后按 Enter 键验证该值。问题是我必须按两次 Enter 键才能验证该值。似乎第一个输入键是验证单元格中托管的第三方编辑器中的值，第二个是`DataGridView`验证单元格的值......那么如何只按一次输入键验证单元格的值？

我还看到了奇怪的行为，例如，最后`DataGridView`一行的行为与`DataGridView`'s 单元格的其余部分不同。对于最后一行，如果我编辑一个单元格的值，然后按 Enter 键进行验证，在验证值之后，它始终保持在同一个单元格中并处于编辑模式，并且单元格的值被选中，因此用户可以认为单元格值无效时事实上不是。其余行不会发生这种情况。他们需要按两次回车键进行验证，并且单元格在验证后不会保持在编辑模式。

**编辑**：关于需要按两次回车键：在自定义单元格中，当第一次按下回车键时，它会引发表示单元格值已更改的事件，在这种情况下，OnSourceValueChanged（这是当值发生变化时为第三方引发的事件）所以我这样做：

```
 this.valueChanged = true;
        this.EditingControlDataGridView.NotifyCurrentCellDirty(true);
        base.OnSourceValueChanged(e); 
```

执行 NotifyCurrentCellDirty 时，它会在 datagridview 上引发 CurrentCellDirtyStateChanged，代码为：

```
 if (this.gridView.IsCurrentCellDirty)
        {
            this.gridView.CurrentCell.DataGridView.EndEdit(DataGridViewDataErrorContexts.Commit);
            this.gridView.EndEdit(DataGridViewDataErrorContexts.Commit);
        } 
```

之后，为 datagridview 引发 DataError 事件，但单元格继续处于编辑模式，所以我想提交值并退出编辑模式。这个怎么做？我也试过：

```
this.dataGridView.CurrentCell.DataGridView.EndEdit(DataGridViewDataErrorContexts.Commit); 
```

this.dataGridView.EndEdit(DataGridViewDataErrorContexts.Commit);

在 DataError 处理程序中，但它不起作用。

最后， cellvaluechanged 可能没有被提升，因为它是单元格中的托管控件......我不明白为什么我必须按两次 Enter 键才能提交和验证单元格上的更改并退出单元格的编辑模式。我只想按回车键一次。

可能原因是在 CurrentCellDirtyStateChanged 中提交后发生错误。引发 DataError 事件，报告提交错误。另外，如何避免提交错误？怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T11:24:34.563

您可以在 CellValueChanged 事件中实现您的单元格验证逻辑。一旦单元格的值被编辑，该事件将被触发。

# macos - i686-apple-darwin11-llvm-gcc-4.2 和 llvm-gcc-4.2 的区别

> ID：13262098
> 
> 赞同：2
> 
> 时间：2012-11-07T01:40:59.407
> 
> 标签：macos, compiler-construction, llvm-gcc

调查`/usr/llvm-gcc-4.2/bin`我有

```
544416 Oct 31 17:10 i686-apple-darwin11-llvm-g++-4.2*
544416 Oct 31 17:10 i686-apple-darwin11-llvm-gcc-4.2*
117168 Oct 31 17:10 llvm-c++-4.2*
257552 Oct 31 17:10 llvm-cpp-4.2*
117168 Oct 31 17:10 llvm-g++-4.2*
117168 Oct 31 17:10 llvm-gcc-4.2* 
```

有人可以解释这些编译器之间的区别吗？

`i686-apple-darwin11-llvm-gcc-4.2`我用两者和 编译相同的应用程序（ac hello-world）`llvm-gcc-4.2`：它们都可以工作，但差异报告差异。

有人可以解释这些可执行文件之间有什么区别吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T09:05:51.690

llvm-gcc-4.2 是默认前端，具有平台相关选项。如果 llvm 已在目标支持下构建并找到，它可以指定体系结构和机器以调用特定目标的编译器。对于`/usr`目录，它用于系统范围（Intel x86）平台，因此它`i686-apple-darwin11`仅包含（i386 和 x86_64）平台。所以如果你显式调用`i686-apple-darwin11-llvm-gcc`，它就可以支持 x86, x86_64 目标。

如果您安装了 Xcode 和 iOS 开发环境，您应该可以找到更多文件，如下所示。

```
$ ls -l
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/llvm-gcc-4.2/bin
total 2336
-rwxr-xr-x  1 root  wheel  555056 Sep  8 16:49 arm-apple-darwin10-llvm-g++-4.2
-rwxr-xr-x  1 root  wheel  546832 Sep  8 16:49 arm-apple-darwin10-llvm-gcc-4.2
-rwxr-xr-x  1 root  wheel  130784 Sep  8 16:49 gcov-4.2
-rwxr-xr-x  1 root  wheel  550960 Sep  8 16:49 i686-apple-darwin10-llvm-g++-4.2
-rwxr-xr-x  1 root  wheel  542752 Sep  8 16:49 i686-apple-darwin10-llvm-gcc-4.2
-rwxr-xr-x  1 root  wheel  106064 Sep  8 16:49 llvm-c++-4.2
-rwxr-xr-x  1 root  wheel  255696 Sep  8 16:49 llvm-cpp-4.2
-rwxr-xr-x  1 root  wheel  106064 Sep  8 16:49 llvm-g++-4.2
-rwxr-xr-x  1 root  wheel  106064 Sep  8 16:49 llvm-gcc-4.2 
```

`llvm-gcc`和有两个`arm-apple-darwin10`目标`i686-apple-darwin10`。主机仍然是 i686 Mac OS X，因此`llvm-gcc-4.2`主机编译器也使用默认 i686。`arm-apple-darwin10-llvm-gcc-4.2`是一个交叉编译器，可以在 Intel Mac OS X 平台上运行，生成 ARM 指令代码。

# nhibernate - nhibernate 连接到遗留数据库

> ID：13262104
> 
> 赞同：0
> 
> 时间：2012-11-07T01:41:59.360
> 
> 标签：nhibernate, fluent-nhibernate

我正在连接到旧版 sqlserver 数据库。其中一张表的列名为“Primary”。脚本因此而失败。

nhibernate 生成的脚本：SELECT locations0_.CustomerID as CustomerID1_,locations0_.LocationID as LocationID1_,locations0_.LocationID as LocationID2_0_,locations0_.Primary as Primary2_0_,locations0_.CustomerID as CustomerID2_0_ FROM dbo.tblLocation locations0_ WHERE locations0_.CustomerID=?

班级：

```
public class Location 
{
    public virtual int LocationID { get; set; }
    public virtual Customer Customer { get; set; }
    public virtual int? CustomerID { get; set; }
    public virtual string LocationName { get; set; }
    public virtual string Address1 { get; set; }
    public virtual string Address2 { get; set; }
    public virtual string Address3 { get; set; }
    public virtual string City { get; set; }
    public virtual string StateOrProvince { get; set; }
    public virtual string PostalCode { get; set; }
       public virtual datetime? LTimeStamp{ get;set; }
    public virtual bool Primary { get; set; }
} 
```

地图：公共类 TblLocationMap ：ClassMap {

```
 public TblLocationMap() 
    {
        Table("tblLocation");
        //LazyLoad();
        Id(x => x.LocationID).GeneratedBy.Identity().Column("LocationID");
                    References(x => x.Customer).Column("CustomerID");
        Map(x => x.LocationName).Column("LocationName").Length(50);
        Map(x => x.Address1).Column("Address1").Length(200);
        Map(x => x.Address2).Column("Address2").Length(200);
        Map(x => x.Address3).Column("Address3").Length(200);
        Map(x => x.City).Column("City").Length(100);
        Map(x => x.StateOrProvince).Column("StateOrProvince").Length(100);
        Map(x => x.PostalCode).Column("PostalCode").Length(20);
        //Map(x => x.Primary).Column("Primary").Not.Nullable();
        //Map(x => x.LTimestamp).Column("LTimestamp");
        HasMany(x => x.Contacts).KeyColumn("LocationID");
    } 
```

sql：

CREATE TABLE [dbo].[tblLocation] ( [LocationID] [int] IDENTITY(1,1) NOT NULL, [CustomerID] [int] NULL, [LocationName] nvarchar NULL, [Address1] nvarchar NULL, [Address2] nvarchar NULL , [Address3] nvarchar NULL, [City] nvarchar NULL, [StateOrProvince] nvarchar NULL, [PostalCode] nvarchar NULL, [Primary] [bit] NOT NULL, [RecTimestamp] [timestamp] NULL, ( [LocationID] ASC )WITH ( PAD_INDEX = OFF，STATISTICS_NORECOMPUTE = OFF，IGNORE_DUP_KEY = OFF，ALLOW_ROW_LOCKS = ON，ALLOW_PAGE_LOCKS = ON) ON [PRIMARY] ) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]

去

GenericADOException：无法初始化集合：[Domain.Locations#466][SQL：SELECT locations0_.CustomerID as CustomerID1_，locations0_.LocationID 作为 LocationID1_，locations0_.LocationID 作为 LocationID2_0_，locations0_.LocationName 作为 Location2_2_0_，locations0_.Address1 作为 Address3_2_0_，locations0_ .Address2 作为 Address4_2_0_，locations0_.Address3 作为 Address5_2_0_，locations0_.City 作为 City2_0_，locations0_.StateOrProvince 作为 StateOrP7_2_0_，locations0_.PostalCode 作为 PostalCode2_0_，locations0_.Primary 作为 Primary2_0_，locations0_.CustomerID 作为 CustomerID2_0_ FROM dbo.tblLocationlocations0_ WHERE locations0_。 ?]

内部异常：{“关键字'Primary'附近的语法不正确。”}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T11:20:30.933

我怀疑`Primary`是一个保留字并且没有正确转义，因此尝试使用反引号隐式转义列名......

例如

```
Map(x => x.Primary).Column("`Primary`").Not.Nullable(); 
```

如果您使用的是 MsSql 服务器，NHibernate 将自动用方括号交换您的反引号`[Primary]`

奇怪的是模式正在生成方括号，但选择 SQL 不是。

# html - 为禁用 JavaScript 的浏览器显示脚本的最佳实践

> ID：13262105
> 
> 赞同：0
> 
> 时间：2012-11-07T01:42:15.627
> 
> 标签：html, css

我正在开发一个仅适用于启用 JavaScript 的浏览器的网站。向非 JavaScript 浏览器提供警告的最佳方式是什么？显然需要使用`<noscript>`，但我希望能提供更多细节。我正在考虑类似以下的内容，但它不起作用，甚至无法验证。有什么想法吗？谢谢

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <body class="wrap">
        <noscript>
            <h1>JavaScript is turned off in your web browser.<br />Turn it on to use this site, then refresh the page.</h1>
            <style type="text/css">
                body { display:none; }
                noscript { display:block !important; }
            </style>
        </noscript>
        HTML for JavaScript browsers goes here...
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T01:48:03.420

尝试禁用 javascript，然后重新加载 Stackoverflow。这是要求用户启用 javascript 的一种很好的干净方式。

然后尽可能地渲染网站。不要担心为禁用 javascript 的浏览器隐藏您的页面内容。

# c# - Dictionary.ContainsKey() - 它是如何工作的？

> ID：13262106
> 
> 赞同：24
> 
> 时间：2012-11-07T01:42:22.117
> 
> 标签：c#, .net, reference-type, idictionary

我已经阅读了有关如何`Dictionary.ContainsKey()`工作的 MSDN 文档，但我想知道它实际上是如何进行相等比较的？基本上，我有一个以引用类型为键的字典*，我希望该`ContainsKey()`方法检查该引用类型的某个属性作为确定该键是否存在的基础。例如，如果我有 a`Dictionary(MyObject, int)`并且有一个名为“TypeID”`MyObject`的公共属性 (of )，我是否可以检查其中一个键的 a是否等于？我可以重载操作员吗？`int``ContainsKey(MyObject myObject)``TypeID``myObject``==`

*   引用类型是一个名为“Duration”的对象，它包含一个值 ( `double Length`)；“持续时间”是我的音乐程序中用于表示特定声音持续多长时间的基本类型。我从中派生出包含更复杂时间概念的类，例如西方音乐时间签名，但希望它们在长度方面都具有可比性。

编辑：正如建议的那样，我在我的对象上实现了 IEquitable，如下所示：

```
 public class Duration : IEquatable<Duration>
 {
    protected double _length;

    /// <summary>
    /// Gets or Sets the duration in Miliseconds.
    /// </summary>
    public virtual double Length
{
        get
        {
            return _length;
        }
        set
        {
            _length = value;
        }
    }

// removed all the other code that as it was irrelevant

    public override bool Equals(object obj)
    {
        Duration otherDuration = (Duration)obj;
        if (otherDuration._length == _length)
        {
            return true;
        }
        else
        {
            return false
        }
    }

} 
```

这就是我需要做的吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-07T02:13:25.883

编辑：这是您更新示例的代码。注意：我觉得将字段公开为受保护的字段，并且还有一个公开成员的虚拟属性有点奇怪。在这种方案下，某些东西可能会覆盖`Length`导致看起来`_lenght`不像预期的平等。

```
public class Duration : IEquatable<Duration>
{
    protected double _length;

    /// <summary>
    /// Gets or Sets the duration in Miliseconds.
    /// </summary>
    public virtual double Length
    {
        get { return _length; }
        set { _length = value; }
    }

    // removed all the other code that as it was irrelevant

    public bool Equals(Duration other)
    {
        // First two lines are just optimizations
        if (ReferenceEquals(null, other)) return false;
        if (ReferenceEquals(this, other)) return true;

        return _length.Equals(other._length);
    }

    public override bool Equals(object obj)
    {
        // Again just optimization
        if (ReferenceEquals(null, obj)) return false;
        if (ReferenceEquals(this, obj)) return true;

        // Actually check the type, should not throw exception from Equals override
        if (obj.GetType() != this.GetType()) return false;

        // Call the implementation from IEquatable
        return Equals((Duration) obj);
    }

    public override int GetHashCode()
    {
        // Constant because equals tests mutable member.
        // This will give poor hash performance, but will prevent bugs.
        return 0;
    }
} 
```

* * *

有关Dictionary 类使用的默认值的信息，请参见[EqualityComparer.Default 。](http://msdn.microsoft.com/en-us/library/ms224763.aspx)[`IEqualityComparer`](http://msdn.microsoft.com/en-us/library/ms132151.aspx)

如果你不想在类上普遍覆盖`GetHashCode`和`Equals`，或者如果你不能。Dictionary 构造函数有一个[重载](http://msdn.microsoft.com/en-us/library/ms132072.aspx)，您可以在其中提供[`IEqualityComparer`](http://msdn.microsoft.com/en-us/library/ms132151.aspx)要使用的特定内容。

这是一个简单的实现接口，但您确实需要小心遵守合同，`GetHashCode`否则您可能会出现意外行为。

```
public class MyObjectEqualityComparer : IEqualityComparer<MyObject>
{
    public bool Equals(MyObject x, MyObject y)
    {
        return x.TypeID == y.TypeID;
    }

    public int GetHashCode(MyObject obj)
    {
        return obj.TypeID; //Already an int
    }
} 
```

去使用它

```
new Dictionary<MyObject, int>(new MyObjectEqualityComparer()); 
```

如果要使用默认的 IEqualityComparer，则需要在 MyObjectEqualityComparer 上提供大致相同的方法。如果您实现[IEquatable ，](http://msdn.microsoft.com/en-us/library/ms131187.aspx)***则***可以避免覆盖。但是我强烈反对它，因为这样做会产生一些令人惊讶的行为。您最好覆盖，以便对 Equals 的所有调用具有一致的行为，并具有正确匹配 Equals 的散列。我不得不修复由过去的开发人员仅实现的继承代码中的错误`object.Equals()``Equals``IEquatable.`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-07T01:53:21.150

内部`Dictionary`使用`EqualityComparer`. 首先它会检查 key 是否实现[`IEquatable`](http://msdn.microsoft.com/en-us/library/ms131187.aspx)。如果 key 没有实现这个接口，它会调用`Equals`方法。

# algorithm - 计算相差一个字母的单词对

> ID：13262108
> 
> 赞同：4
> 
> 时间：2012-11-07T01:42:35.620
> 
> 标签：algorithm, sorting

> 让我们考虑 n 个单词，每个单词的长度为 k。这些单词由具有定义顺序的字母表（其基数为 n）组成。任务是推导出一个 O(nk) 算法来计算相差一个位置的单词对的数量（不管是哪一个，只要它只是一个位置）。
> 
> 例如，在以下一组单词中（n = 5，k = 4）：
> 
> abcd、abdd、adcb、adcd、aecd
> 
> 有 5 个这样的对：（abcd，abdd），（abcd，adcd），（abcd，aecd），（adcb，adcd），（adcd，aecd）。

到目前为止，我已经设法找到一种算法来解决一个稍微简单的问题：计算相差一个 GIVEN 位置（第 i 个）的单词对的数量。为了做到这一点，我将第 i 个位置的字母与每个单词中的最后一个字母交换，执行基数排序（忽略每个单词中的最后一个位置 - 以前是第 i 个位置），线性检测字母在第一个 1 到k-1 个位置相同，最终计算每个字母在每组重复项中最后（最初是第 i 个）位置的出现次数，并计算所需的对（最后一部分很简单）。

然而，上面的算法似乎不适用于主要问题（在 O(nk) 约束下）——至少在没有一些修改的情况下不能。知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T20:15:04.393

假设 n 和 k 不是太大，这样这将适合内存：

有一个删除第一个字母的集合，一个删除第二个字母的集合，一个删除第三个字母的集合，等等。从技术上讲，这必须是从字符串到计数的映射。

遍历列表，只需将当前元素添加到每个映射（显然首先删除适用的字母）（如果它已经存在，将计数添加到 totalPairs 并将其加一）。

然后 totalPairs 是所需的值。

**编辑：**

**复杂：**

这应该是`O(n.k.logn)`。

您可以使用使用散列的映射（例如`HashMap`在 Java 中），而不是排序映射，以实现理论上的复杂性`O(nk)`（尽管我通常发现哈希映射比基于树的排序映射要慢）。

**改进：**

对此的一个小改动是将前 2 个字母的映射删除为 2 个映射，一个删除第一个字母，一个删除第二个字母，第三个和第四个字母相同，依此类推。

然后将它们放入删除了 4 个字母的地图中，将这些放入删除了 8 个字母的地图中，依此类推，最多删除一半的字母。

其复杂性在于：

*   您对包含最大 k 个元素（每半个）的 2 个排序集进行 2 次查找。

*   对于其中的每一个，您再次对 2 个排序集进行 2 次查找（对于每个季度）。

*   所以查找次数是 2 + 4 + 8 + ... + k/2 + k，我相信是`O(k)`.

*   我在这里可能是错的，但是，最坏的情况是，任何给定地图中的元素数量是`n`，但这将导致所有其他地图只有 1 个元素，所以仍然是`O(logn)`，但是对于每个`n`（不是每个`n.k`）。

所以我认为是`O(n.(logn + k))`。

.

**编辑2：**

**我的地图示例（没有改进）：**

`(x-1)`表示`x`映射到`1`。

假设我们有`abcd, abdd, adcb, adcd, aecd`.

第一张地图是`(bcd-1), (bdd-1), (dcb-1), (dcd-1), (ecd-1)`.

第二张地图将是`(acd-3), (add-1), (acb-1)`（对于第 4 和第 5，值已经存在，因此增加）。

第三张地图：（`(abd-2), (adb-1), (add-1), (aed-1)`第二张已经存在）。

第四张地图：（`(abc-1), (abd-1), (adc-2), (aec-1)`第四张已经存在）。

`totalPairs = 0`

对于第二张地图 - `acd`，对于第四张，我们加 1，对于第五张我们加 2。

`totalPairs = 3`

对于第三张地图 - `abd`，对于第二张，我们加 1。

`totalPairs = 4`

对于第四张地图 - `adc`，对于第四张，我们加 1。

`totalPairs = 5`.

**改进地图的部分示例：**

与上述相同的输入。

删除前 2 个字母的映射到删除第 1 个和第 2 个字母的映射：

```
(cd-{  {(bcd-1)}, {(acd-1)}  }),
(dd-{  {(bdd-1)}, {(add-1)}  }),
(cb-{  {(dcb-1)}, {(acb-1)}  }),
(cd-{  {(dcd-1)}, {(acd-1)}  }),
(cd-{  {(ecd-1)}, {(acd-1)}  }) 
```

上面是一个由`cd`映射到 2 个映射的元素组成的映射，一个包含一个元素`(bcd-1)`，另一个包含`(acd-1)`.

但是因为第 4 和第 5`cd`已经存在，所以，不是生成上面的，而是将其添加到该地图中，如下所示：

```
(cd-{  {(bcd-1, dcd-1, ecd-1)}, {(acd-3)}  }),
(dd-{  {(bdd-1)}, {(add-1)}  }),
(cb-{  {(dcb-1)}, {(acb-1)}  }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T04:57:17.207

您可以将每个单词放入一个数组中。从该数组中逐个弹出元素。然后比较结果数组。最后将弹出的元素添加回原始数组。两个数组中弹出的元素不能相同。计算发生这种情况的情况，最后除以 2 得到准确的解决方案

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T19:59:24.253

我在这里提交问题已经两个月了。在此期间，我已与同行讨论过，并希望分享结果。

主要思想类似于杜克林提出的思想。对于每个单词 A 和该单词中的每个第 i 个位置，我们将考虑一个元组：（前缀、后缀、第 i 个位置的字母），即 (A[1..i-1], A[i+1\. .n]，A[i])。如果 i 是 1 或 n，则适用的子字符串被认为是空的（这些是简单的边界情况）。

有了这些元组，我们应该能够应用我在第一篇文章中提供的推理来计算不同单词对的数量。我们所要做的就是按前缀和后缀值对元组进行排序（对每个 i 分别） - 然后，字母完全相等但第 i 个位置的单词将彼此相邻。

这是我缺乏的技术部分。为了使排序过程（RadixSort 似乎是要走的路）满足 O(nk) 约束，我们可能想要为我们的前缀和后缀分配标签（每个 i 只需要 n 个标签）。我不太清楚如何处理标签的事情。（当然，我们可能会做一些散列，但我非常有信心前一种解决方案是可行的）。

虽然这不是一个完全完整的解决方案，但我相信它为解决这个问题的可能方法提供了一些启示，这就是我在这里发布它的原因。如果有人想出如何做标签部分的想法，我将在这篇文章中实现它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-05T19:40:50.917

想想你将如何枚举语言——你可能会使用递归算法。递归算法映射到树结构。如果你构建这样一棵树，每个分歧代表一个字母的差异，每个叶子代表语言中的一个单词。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-22T04:20:47.250

以下 Python 解决方案如何？

```
import string

def one_apart(words, word):
    res = set()
    for i, _ in enumerate(word):
        for c in string.ascii_lowercase:
            w = word[:i] + c + word[i+1:]
            if w != word and w in words:
                res.add(w)
    return res

pairs = set()
for w in words:
  for other in one_apart(words, w):
    pairs.add(frozenset((w, other)))

for pair in pairs:
  print(pair) 
```

输出：

```
frozenset({'abcd', 'adcd'})
frozenset({'aecd', 'adcd'})
frozenset({'adcb', 'adcd'})
frozenset({'abcd', 'aecd'})
frozenset({'abcd', 'abdd'}) 
```

# python - Python：语法错误？

> ID：13262110
> 
> 赞同：0
> 
> 时间：2012-11-07T01:42:58.620
> 
> 标签：python, syntax, if-statement

```
A=int(input('Enter the first of three numbers: '))
B=int(input('Enter the second of three numbers: '))
C=int(input('Enter the third of three numbers: '))
list=[A,B,C]
SL=sorted(list)
if SL[0]<0:
    if SL[1]-1==SL[0]:
        print (list('they are good'))
    else: print (list('not good'))
elif SL[2]-1==SL[1]:
    print (list('they are good')
else: print (list('not good')) 
```

我一直在 else 和 : 之间的最后一行收到语法错误，当我在上面的第 3 行完全相同时，我不知道为什么它是错误的。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T01:46:11.987

您在倒数第二行缺少一个结束括号，它应该是：

```
 print (list('they are good')) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T01:47:10.643

您在倒数第二行缺少尾随 ')'。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T01:47:27.133

```
elif SL[2]-1==SL[1]:
    print (list('they are good') 
```

`)`打印语句末尾缺少结束语。

# php - 我的网站没有网站标题

> ID：13262119
> 
> 赞同：-3
> 
> 时间：2012-11-07T01:43:57.003
> 
> 标签：php

我使用 seo 验证器检查我的网站，但它说我的网站没有网站标题。我在下面有这些标题代码：

```
<head profile="http://gmpg.org/xfn/11">
<meta name="google-site-verification" content="RR4KnVDyxKEeBxQg8Qwphb0E2RuBTxVE3y-NrLS_tsw" />
<meta http-equiv="Content-Type" content="<?php bloginfo('html_type'); ?>; charset=<?php bloginfo('charset'); ?>" />

    <title><?php bloginfo('name'); ?> <?php if ( is_single() ) { ?> &raquo; <?php } ?> <?php wp_title(); ?></title>
    <meta name="Description" content="Davao Property For Sale is the desired partner of Filipino families in finding and owning a HOME in Davao City, Philippines every step of the way." />
    <meta name="Keywords" content="Davao City, real estate, House for sale, rush house, brand new, ready for occupancy, Davao Property" /> 
```

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T01:49:15.990

尝试这个：

```
<title>
<?php 

    $title = bloginfo('name');

    if ( is_single() ) { 
       $title .= '&raquo;'; 
    } 

    $title .= wp_title(); 

    echo $title;
  ?>
 </title> 
```

这个想法是使用变量 $title 来连接你的标题，最后用函数 echo 编写它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T01:57:42.227

```
<title><?php echo bloginfo('name').(is_single()?' &raquo;':'').' '.wp_title() ?></title> 
```

或者

```
<title><?= bloginfo('name').(is_single()?' &raquo;':'').' '.wp_title() ?></title> 
```

或者

```
<?php $pageT = bloginfo('name');
if (is_single()) $pageT .= ' &raquo;';
$pageT .= ' ' . wp_title(); ?>
<title><?php echo $pageT ?></title> 
```

不过，还有一些其他的可能性可以写这个。

# html - rails form_tag _path 参数

> ID：13262123
> 
> 赞同：3
> 
> 时间：2012-11-07T01:44:50.023
> 
> 标签：html, ruby-on-rails, ruby, model-view-controller, haml

尽管“[在 form_tag 中传递多个参数](https://stackoverflow.com/questions/11762542/passing-multiple-parameters-in-a-form-tag)”中的问题提供了一些关于如何在 form_tag 中传递参数的信息，但发布者最终决定采用不同的方法来实现上述目的（特别是使用隐藏的表单字段）。

当尝试在如下视图中使用一行代码时：

```
form_tag(movies_path({:foo = "bar"}), {:id => "ratings_form", :method => :get}) do 
```

似乎 RoR 不会让控制器可以使用 'foo' 的值；在这种情况下，是否应该使用另一种语法将参数作为路径的一部分传递？

如果希望将参数作为 URL 的一部分传递，则可能会认为这种方法是正确的（事实上，生成的 HTML 表明结果`<form>`标签包含`action="/movies?foo=bar"`语句）......但控制器评估`params[:foo]`为`''`和不是`bar`吗？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T04:38:35.593

我认为这里有两个基本问题在起作用......

第一个是传递自身的实际参数。[规范](http://www.w3.org/TR/html4/interact/forms.html#submit-format)指定使用`GET`方法将表单数据集附加到 URI，使用`POST`方法将表单数据集包含在表单的主体中。提交表单会从表单字段生成参数，即使它是`GET`请求（如您指定的那样）并且已指定 URL 参数（指定的 URL 参数不是 URI 的一部分）。除非您想要“可链接”状态，例如搜索表单，否则最好坚持使用`POST`表单提交。

在我看来，第二个问题相当普遍。对于很多人来说， [Rails 路由系统](http://guides.rubyonrails.org/routing.html)起初很难理解。我将假设，接下来，这`movies_path`是来自您的 routes.rb 文件中的相应`resources :movies`行。如果是这样，则路由未设置为在 URL 中传递信息，这将是`/movies`. 还将有一个`movie_path`设置为通过 URL 将信息传递给控制器​​。一个常见的用法是使用资源正在建模的对象类型的实例作为参数，例如`movie_path(@movie)`. 这种类型的用法将`to_params`在传入的对象上运行，默认情况下返回对象的 id（但可以很容易地覆盖）。这导致`params[:id]`在控制器中可用。如果您只想发送不受资源支持的任意信息作为 URL 的一部分，以便在控制器中可用，您可能只想定义一个自定义路由来执行此操作，如下所示：

```
match '/movies/:foo' => 'movies#index', :as => :movies 
```

当像这样使用时，它将`params[:foo] == 'bar'`在控制器中生成：

```
movies_path('bar') 
```

无论如何，希望这会有所帮助，祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T01:46:55.373

你不能只添加一个隐藏字段吗？

```
hidden_field_tag 'foo', 'bar' 
```

# python-3.x - 如何从 Base64 转换为字符串 Python 3.2

> ID：13262125
> 
> 赞同：22
> 
> 时间：2012-11-07T01:44:55.000
> 
> 标签：python-3.x, base64

> **可能的重复：**
> [将字符串转换为 Base 64 和从 Base 64 转换](https://stackoverflow.com/questions/13261802/converting-a-string-to-and-from-base-64)

```
def convertFromBase64 (stringToBeDecoded):
    import base64
    decodedstring=str.decode('base64',"stringToBeDecoded")
    print(decodedstring)
    return

convertFromBase64(dGhpcyBpcyBzdHJpbmcgZXhhbXBsZS4uLi53b3chISE=) 
```

我想获取一个 base64 编码的字符串并将其转换回原始字符串，但我不知道出了什么问题

我收到此错误

```
 Traceback (most recent call last):
 File "C:/Python32/junk", line 6, in <module>
convertFromBase64(("dGhpcyBpcyBzdHJpbmcgZXhhbXBsZS4uLi53b3chISE="))
 File "C:/Python32/junk", line 3, in convertFromBase64
decodedstring=str.decode('base64',"stringToBeDecoded")
AttributeError: type object 'str' has no attribute 'decode' 
```

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-11-07T10:16:27.120

字符串已经“解码”，因此 str 类没有“解码”功能。因此：

```
AttributeError: type object 'str' has no attribute 'decode' 
```

如果要解码字节数组并将其转换为字符串调用：

```
the_thing.decode(encoding) 
```

如果要对字符串进行编码（将其转换为字节数组），请调用：

```
the_string.encode(encoding) 
```

就 base 64 的内容而言：使用 'base64' 作为上述编码的值会产生错误：

```
LookupError: unknown encoding: base64 
```

打开控制台并输入以下内容：

```
import base64
help(base64) 
```

你会看到base64有两个非常方便的函数，分别是b64decode和b64encode。b64 decode 返回一个字节数组，而 b64encode 需要一个字节数组。

要将字符串转换为其 base64 表示，您首先需要将其转换为字节。我喜欢 utf-8，但使用你需要的任何编码......

```
import base64
def stringToBase64(s):
    return base64.b64encode(s.encode('utf-8'))

def base64ToString(b):
    return base64.b64decode(b).decode('utf-8') 
```

# android - android离开应用程序

> ID：13262127
> 
> 赞同：1
> 
> 时间：2012-11-07T01:45:12.267
> 
> 标签：android, android-mediaplayer, exit-code

我正在创建一个有音频的应用程序。我设法做音频。然后我意识到当我使用返回和主页按钮退出应用程序时，音频不会停止。因此我试图插入 2 种不同类型的代码。首先

```
 @Override
public boolean onKeyDown(int keyCode, KeyEvent event)  {
    if (keyCode == KeyEvent.KEYCODE_HOME && event.getRepeatCount() == 0) {
        // do something on back.
        mp.stop();
       this.finish();
        return true;
    }
    return super.onKeyDown(keyCode, event);
} 
```

第二：

```
 @Override       
    protected void onStop() 
    {
        super.onStop();
        // This above line closes the app correctly
       android.os.Process.killProcess(android.os.Process.myPid());
    } 
```

但不幸的是，当我单击按钮时，所有这些代码都会使我的应用程序崩溃。我检查了我的应用程序只有在没有上面这些代码的情况下才能正常工作。或者有没有其他方法可以设置我的媒体播放器在android检测到用户退出应用程序时停止。请帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T01:57:13.203

您可以在 onStop() 方法中执行此操作，然后在 mediaPlayer 上调用 stop() 使用 isPlaying() 方法检查它当前是否正在播放或检查 mp 是否为空。

```
 @Override       
    protected void onStop() 
    {
         super.onStop();

         if (mp.isPLaying()) {
              mp.reset();
          mp.release();
          mp = null;
     }   
    } 
```

这将停止您的 mediaPlayer。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T07:39:20.263

如果您想要停止音频，则只需调用[`MediaPlayer#stop()`](http://developer.android.com/reference/android/media/MediaPlayer.html#stop%28%29)或[`MediaPlayer#release()`](http://developer.android.com/reference/android/media/MediaPlayer.html#release%28%29)在活动的 onStop 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T06:31:17.203

只需使用 . 终止活动`finish()`。它将停止与活动相关的所有进程。

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event)  {
    if (keyCode == KeyEvent.KEYCODE_HOME && event.getRepeatCount() == 0) {
        // do something on back.
       this.finish();
        return true;
    }
    return super.onKeyDown(keyCode, event);
} 
```

如果问题仍然存在，那么您可能需要发布您的 logcat。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-07T01:49:54.507

我这样做的方式是在 on Pause 方法上启动一个计时器。我将计时器设置为 0.5 秒或类似的时间。如果在计时器到期之前调用 on resume 方法，那么我将取消它（这意味着我们正在从一个活动转到另一个活动）如果计时器到期，那么我将停止音乐。这意味着活动在家里希望这会有所帮助。不是最干净的解决方案，但我发现它是最少的工作，不需要新的权限

# mysql - 根据相邻行的值删除 MySQL 中的行

> ID：13262133
> 
> 赞同：0
> 
> 时间：2012-11-07T01:45:31.533
> 
> 标签：mysql, sql-delete

我有一个如下所示的表：

```
eventId    activity    timestamp
1          0           2012-10-22 20:10:00
2          0           2012-10-22 20:10:20
3          1           2012-10-22 20:11:25
4          1           2012-10-22 20:12:20
5          1           2012-10-22 20:12:22
6          0           2012-10-22 20:12:30  <--
7          1           2012-10-22 20:12:25  <--
8          0           2012-10-22 20:14:46
9          0           2012-10-22 20:14:48
10         1           2012-10-22 20:15:45
11         0           2012-10-22 20:16:00
12         0           2012-10-22 20:17:00
13         0           2012-10-22 20:17:13 
```

我想删除活动为 0 且不按时间顺序与活动为 1 的行相邻的每一行。因此，在此示例中，我将删除 eventID 为 1、8、12 和 13 的行。事件可能异步插入到表中，如第 6 行和第 7 行所示。

我知道我可以通过检查每一行并发出查询以将其删除（如果它符合我的条件）来循环执行此操作，但这非常低效。我想知道是否可以在一个查询中完成所有这些操作。

好像我可以做类似的事情

```
delete from mytable
where activity = 0
and (rownumber()+1).activity = 0
and (rownumber()-1).activity = 0
order by timestamp 
```

这很简单，但我认为这样的功能是不可能的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T02:07:37.240

以下是如何选择要保留的所有记录的方法：

```
select m.eventId
from (
  select t1.eventId, 
      max(t2.timestamp) as previousTime,
      min(t3.timestamp) as nextTime
  from mytable t1
  left outer join mytable t2 on t1.eventId <> t2.eventId and t2.timestamp < t1.timestamp
  left outer join mytable t3 on t1.eventId <> t3.eventId and t3.timestamp > t1.timestamp
  group by t1.eventId
) m
left outer join mytable tb on m.previousTime = tb.timestamp
left outer join mytable ta on m.nextTime = ta.timestamp
where tb.activity = 1
    or ta.activity = 1 
```

[SQL 小提琴示例](http://sqlfiddle.com/#!2/5bddd/2)

然后，您可以执行以下操作：

```
delete from mytable
where mytable.eventId not in ( ... ) <--above query 
```

# javascript - 在其他函数中使用 var 在 CKeditor 中进行选择

> ID：13262134
> 
> 赞同：0
> 
> 时间：2012-11-07T01:45:32.687
> 
> 标签：javascript, jquery, function, select, ckeditor

我正在使用 CKeditor，此代码用于按钮。我将 xml 存储在 Dom 中。我正在尝试将其他函数中的 xml 用于选择框。选择框的代码与此按钮代码类似。当我在选择框中点击一个列表时，我想看到 and 之间的`<chr>`单词`</chr>`。我不想`<chr>`选择一个选项。

```
type: 'button',
id: 'btnFind',
align: 'left',
style: 'width:100%',
label: 'add',
onClick: function () {
    var y = this.getDialog();
    var value1 = y.getValueOf('replace', 'chgWord');
    var value2 = y.getValueOf('replace', 'title');
    var xml = "<channel><title>" + value1 + "</title><chr>" + value2 + "</chr></channel>",
    xmlDoc = $.parseXML(xml),
    $xml = $(xmlDoc),
    $title = $xml.find("title");
    $("#cke_119_select").append("<option value='" + $title.text() + "'>" + $title.text() + "</option>");
    $title = $xml.find("chr"); 
```

这是选择框的代码：

```
type: 'hbox',
widths: ['200px', '90px'],
children: [{
    type: 'select',
    label: '약어 LIST :',
    size: 5,
    style: 'width:100%',
    labelLayout: 'horizontal',
    id: 'list',
    items: [],
    onClick: function () {

        selValue = $("#cke_119_select option:selected").val();
        selText = $("#cke_119_select option:selected").text();
        selIndex = $("#cke_119_select option").index($("#cke_119_select option:selected"));
        selBox = $("#cke_119_select");
        selOption = selBox.attr("options");

        var y = this.getDialog();
        var value1 = y.setValueOf('replace', 'chgWord');
        value1.setValue(selValue); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T07:06:36.380

这`var`是一个 JavaScript 关键字，独立于它的使用位置，您可以随意使用它。

> 如果你在一个函数中，那么“var”将创建一个局部变量，“no var”将查找作用域链，直到找到变量或到达全局作用域（此时它将创建它）。 [https://stackoverflow.com/a/1470494/694325](https://stackoverflow.com/a/1470494/694325)

您甚至已经拥有`var`这两个 onClick 功能，因此您确实可以并且确实已经使用它。

```
var xml = "<channel><title>" + value1 + "</title><chr>" + value2 + "</chr></channel>",
    xmlDoc = $.parseXML(xml),
    $xml = $(xmlDoc),
    $title = $xml.find("title"); 
```

例如，同时创建四个变量，例如`var a=1,b=2,c=3;`

```
var y = this.getDialog(); 
```

这与声明变量的方式完全相同。你的问题不在`var`这里。

看起来您想为richCombo 设置值/值。也许您可以尝试onClick 之类`var theValue = this.getValue();`的功能。`this.setValue("New Value");`另外，`onClick: function ( value ) { ... alert(value); ...}`可能有用。如果要更改项目，请尝试`this._.items`在 onClick 中访问。如果不知道您正在尝试什么，我无法为您提供更多帮助，对不起！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T11:27:49.027

如果您`var`在第一个函数之外声明，则可以在第二个函数中使用该变量

```
var xml;

function one(){
  xml= "<channel><title>" + value1 + "</title><chr>" + value2 + "</chr></channel>";

}

function two(){
  /* can access xml here that was set in function one*/
} 
```

# javascript - 使用带有jquery的javascript原型函数中的构造函数中传递的变量

> ID：13262137
> 
> 赞同：0
> 
> 时间：2012-11-07T01:46:27.013
> 
> 标签：javascript, jquery, oop, constructor, prototype

我有几个具有相同“专辑”类的 div，所以我想使用构造函数和原型创建一个类。这就是我所做的

```
function Album(album){
    this.album = album;

    console.log(this.album === album)
    console.log($(this.album) === $(album))
}

Album.prototype = {
    init: function(){

    },

    loadImages: function(){

    }
};

$('.album').each(function(){    
    var album = new Album(this);
}); 
```

我需要访问我在init函数中传递给类Album的专辑变量，所以我必须将它存储在this.album中。但是我不明白为什么 console.log(this.album === album) 是真的但是 console.log($(this.album) === $(album)) 是假的

我需要在原型中使用 jquery，还有其他方法吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T01:54:02.680

```
$('body') === $('body') // false 
```

基本上，你做对了。jQuery 正在惹你生气。

对于对象，`===`运算符仅当它是同一个对象时才为真。在这种情况下，jQuery 每次包装 DOM 元素时都会创建一个全新的对象，即使它包装的是与前一秒相同的元素，也会创建一个新对象。

这是一个示例，说明为什么这是在没有 jQuery 的普通 JS 中：

```
var domEl = document.getElementById('whatev');
var a = { el: domEl };
var b = { el: domEl };

domEl === domEl // true
a === b         // false 
```

这里有 2 个对象，它们都具有相同的数据并包装相同的对象。但它们是不同的对象，因此`===`彼此不同。

# bash - 如何将“gvim 文件名”别名为“gvim 文件名 &”

> ID：13262139
> 
> 赞同：2
> 
> 时间：2012-11-07T01:46:35.540
> 
> 标签：bash, vim, cygwin, alias

我希望 gvim 始终在单独的窗口中打开并立即返回命令提示符。换句话说我想要

```
gvim filename 
```

与

```
gvim filename & 
```

似乎我应该能够使用别名来做到这一点。别名是否有特殊的通配符？就像是：

```
alias gvim="gvim <wildcard> &" 
```

其中“通配符”将被命令行上 gvim 之后的任何文本替换。

我也试过：

```
function gvim() 
{ 
    "/cygdrive/c/program files (x86)/vim/vim72/gvim.exe" "$@" "&" ;
} 
```

但它只会打开 gvim 而不会像我想要的那样返回提示。

如果有人能指出我正确的方向，那将大大提高我对 .bashrc 工作原理的理解。

谢谢！

-德里克

更新：我通过去掉 & 和末尾的分号周围的引号来让它工作：

```
function gvim() 
{ 
    "/cygdrive/c/program files (x86)/vim/vim72/gvim.exe" "$@" &
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T04:23:28.093

最后一个几乎是对的。问题是 plain`&`告诉*shell*在后台运行进程并向*gvim*`"&"`命令行添加参数（即指示 gvim 打开名为 的文件）。通过在这里使用引号，您只是指示 shell 不要特殊对待，而 gvim 没有理由做 shell 的工作。*`&``&`*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T01:53:30.370

不要使用别名，而是使用 shell 函数。一般情况下它的工作原理相同，并且您可以使用更多选项：

```
function gvim() {
 gvim.bat `cygpath -w $*` &
} 
```

**更新** 此外，默认 .bashrc 中有一些钩子（无论如何在我的盒子上）可以自动从“.bash_functions”文件加载函数，您只需取消注释它（对我来说大约是第 117 行）：

```
# Functions
#
# Some people use a different file for functions
if [ -f "${HOME}/.bash_functions" ]; then
  source "${HOME}/.bash_functions"
fi 
```

然后将函数定义添加到 .bash_functions 以在您启动 bash shell 时自动加载它。

**更新 2**添加了对 cygpath 的调用以处理 unix 形式的完整路径

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T03:06:01.373

关于 .bashrc 的第一件事可能是它只在 shell 启动时被读取——在 cygwin 的情况下，当你打开命令窗口时。从您的帖子中不清楚您是重新启动命令窗口还是什么。

您可以在不将它们放入 .bashrc 的情况下尝试使用别名/函数，只是为了找出有效的方法。只需直接在命令行输入别名或函数定义，然后尝试运行它们。

我认为您提供的功能的问题是您将`&`双引号放在里面。去掉引号，它应该可以工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T05:20:19.213

我所做的是有一个小 bash 脚本，我用它调用 gvim 并为其命名。

```
==> alias vi
alias vi='~/include/bin/dvim'

==> cat ~/include/bin/dvim
#!/bin/bash.exe

/cygdrive/c/Program\ Files/Vim/vim73/gvim.exe $1 & 
```*

# python-2.7 - goagent 服务器错误，运行 python uploader.zip uploader 时

> ID：13262145
> 
> 赞同：2
> 
> 时间：2012-11-07T01:47:10.167
> 
> 标签：python-2.7

```
Traceback (most recent call last):
  File "/usr/lib/python2.7/runpy.py", line 162, in _run_module_as_main
    "__main__", fname, loader, pkg_name)
  File "/usr/lib/python2.7/runpy.py", line 72, in _run_code
    exec code in run_globals
  File "uploader.zip/__main__.py", line 10, in <module>
  File "uploader.zip/__main__.py", line 5, in main
  File "uploader.zip/appcfg.py", line 27, in <module>
  File "../local/proxy.py", `enter code here`line 1686, in <module>
    class DNSServer(gevent.server.DatagramServer):
AttributeError: 'module' object has no attribute 'DatagramServer'
Exception KeyError: KeyError(140338870835888 ,) in <module 'threading' from '/usr/lib/python2.7/threading.pyc'> ignored 
```

我该怎么办？我不知道python.thanks。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T04:52:10.370

尝试改变你的

```
class DNSServer(gevent.server.DatagramServer): 
```

至

```
class DNSServer(gevent.server.StreamServer): 
```

在 file 的第 1686 行（在您的情况下）`local/proxy.py`。

[在此链接](http://www.wapblog.info/ubuntu-12-10-use-goagent-2-1.html)中查找更多信息。

# jquery - jquery .click(function) 无法正常工作

> ID：13262147
> 
> 赞同：1
> 
> 时间：2012-11-07T01:47:28.913
> 
> 标签：jquery, onclick

我目前有一个带有一些动画的点击事件。我得到了我想要动画做的基础知识。这就是我所做的。代码中断后，我将解释我的问题。

```
$(document).ready(function(){
$('.hidden').hide().removeClass('hidden');

$('.about-prj-tog').click(function(event){      
    $('#logo-wrapper').animate({height:'toggle'}, 1000);
    $('#logo').delay(100).animate({height:'toggle'}, 1000);
    $('#about-prj').animate({height:'toggle'}, 1000);
    return false;
});
$('.weekly-tog').click(function(event){     
    $('#logo-wrapper').animate({height:'toggle'}, 1000);
    $('#logo').delay(100).animate({height:'toggle'}, 1000);
    $('#weekly-updates').animate({height:'toggle'}, 1000);
    return false;
});
$('.submit-story-tog').click(function(event){       
    $('#logo-wrapper').animate({height:'toggle'}, 1000);
    $('#logo').delay(100).animate({height:'toggle'}, 1000);
    $('#submit-drop-down').animate({height:'toggle'}, 1000);
    return false;
});

$('.x-icon').click(function(event){
    $('#logo-wrapper').animate({height:'toggle'} );
    $('#logo').show();
    $('#about-prj').animate({height:'toggle'} );
    $('#weekly-updates').animate({height:'toggle'} );
    $('#submit-drop-down').animate({height:'toggle'} );
}); 
```

});

正如您可能已经看到的那样，我遇到的问题是当我单击第一个链接时。动画发生了，看起来很棒。但是，如果我单击下一个链接，则另一个动画会发生在第一个链接下方。- 没有第一个关闭第一个和第二个动画发生等等。

说得通？

还有关于整合代码并使其更高效的任何提示。我确实意识到我写了 3 次相同的东西，只是更改了类和 ID。如果有更好的方法来编写*更少的*代码，这将有助于我更多地理解 jquery。

此外，当我单击 .x-icon div 时。各种疯狂的事情发生。

# javascript - 为什么 JavaScript 没有获取整个输入框？

> ID：13262154
> 
> 赞同：3
> 
> 时间：2012-11-07T01:48:14.367
> 
> 标签：javascript, input, for-loop

我有一些输入框*（它们是动态生成的）*，它们应该输入数字并添加这些数字，然后在页面上打印。

它可以工作，但是当你输入一个数字时，它不会得到最后一个数字*（这意味着如果数字是 1-9，它不会显示任何内容。如果它是**183**，JS函数由于某种原因只能得到**18**）* .

这是js函数。我 90% 确定以下代码包含错误：

```
var lengthNum = document.createElement("strong");
function getLength() {
    var allNums = document.getElementsByName("numField");
    var length = 0;
    for (i=allNums.length-1;i>=0;i--) {
        length += parseInt(allNums[i].value);
    }
    if (length >= 0) {
        lengthNum.innerHTML = length;
        document.getElementById("length").appendChild(lengthNum);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T02:21:06.683

如果在按键事件期间调用 getLength 函数，则该函数可能在文本字段实际被赋予新字符之前执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T02:09:25.327

据我所知，您的代码是正确的并且工作正常。有关使用您提供的代码的示例，请参阅[此 jsFiddle 。](http://jsfiddle.net/FcF24/)

确保您拥有：

*   正确定义了`name`您希望包含在总数中的文本框的属性
*   不限制输出元素的样式（带有 的 div `id="length"`）来截断文本

# plot - 在时间轴中绘制序列

> ID：13262155
> 
> 赞同：1
> 
> 时间：2012-11-07T01:48:23.043
> 
> 标签：plot, gnuplot

我用谷歌搜索了一下，但找不到一个好的解决方案。我有一系列事件：A、B 和 C 随着时间的推移反复发生，我想在时间线上将其绘制如下：

啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊

但以更美观和多彩的方式。我使用 gnuplot，所以，如果有人知道 gnuplot 的诀窍，那就太好了。

原始数据格式如下：

```
A   4
B   6
C  10
A  14
B  17
C  22
A  27
B  27
C  35
A  35 
```

我制定的gnuplot脚本如下：

```
set terminal png enhanced
set style data histograms

set style histogram columnstacked
set output "timeline.png"
set xlabel "events"
set ylabel "min"
set auto x
set xtics 1
set key top left
set boxwidth 0.5 relative
set style fill solid 0.6 border -1
plot 'timeline.txt' using 2 t "execution" 
```

在上述数据上运行此脚本后，我得到以下图： ![列堆叠直方图](../Images/9645e99ce4992ce5ff5f612be7494964.png)

我想要：1）根据第一列上的字母重复的颜色和 2）直方图是水平的一维图。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T04:53:43.223

像这样的东西怎么样：

```
sum=0
cum_sum(x)=(sum=sum+x,sum-x/2)
set yrange [-1:2]
set xrange [0:*]
unset ytics
set style fill solid
plot 'test.dat' using (cum_sum($2)):(1.0):($2):($0) w boxes t "execution" lc variable 
```

这是一个根据标签为框着色的版本（我不得不承认，我为这个 hack 感到非常自豪）：

```
sum=0
cum_sum(x)=(sum=sum+x,sum-x/2)
set yrange [-1:2]
set xrange [0:*]
unset ytics
set style fill solid
LABELS="ABCD"
plot 'test.dat' using (cum_sum($2)):(1.0):($2):(strstrt(LABELS,strcol(1))) w boxes t "execution" lc variable 
```

如果您想控制特定标签的颜色，您需要使用从字符串`set style line X lc rgb 'cyan'`索引开始的标签`X`的颜色。`LABELS``cyan`

# java - 在 Java 中单击时尝试删除屏幕上的对象不起作用

> ID：13262157
> 
> 赞同：0
> 
> 时间：2012-11-07T01:48:40.640
> 
> 标签：java, vector, mouseevent

Java 小程序的目的是这样的：一个球在屏幕上弹跳。这个球的大小和速度可以通过滚动条来改变。用户可以在屏幕上按下并拖动鼠标来绘制矩形。球也会从这些矩形中反弹。这些矩形的边界存储在一个向量中。单击一个矩形时，它（以及该点处的所有其他矩形）将从矢量（和屏幕）中删除。

我目前遇到的问题是单击删除对象不起作用。我正在做的是获取我单击的位置，并遍历向量的每个元素并查看它是否包含该点，如果包含，则将其从向量中删除。这是方法。

```
public void mouseClicked(MouseEvent m)
{
    if (!ball.flag)
    {
      Vector<Rectangle> v;
      v = (Vector<Rectangle>)ball.r;
      Point p;
      p = new Point(m.getPoint());

      boolean done = false;
      int i = 0;

      for (Rectangle rect : v)
      {
        if(rect.contains(p))
        {
          v.removeElement(i);
          System.err.print("Element removed");
          continue;
        }
        i++;
        if(i>=v.size())
          done=true;
      } 
      ball.r = v;
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T02:06:48.190

您需要的是使用迭代器。像这样：

```
ListIterator<Rectangle> i = v.listIterator();

while(i.hasNext())
{
    Rectangle r = i.next();

    if(r.contains(p))
        i.remove();
} 
```

这将以安全的方式从列表中删除元素。

# ruby-on-rails - 如何通过表单中的模型添加has_many之间的关联？

> ID：13262162
> 
> 赞同：0
> 
> 时间：2012-11-07T01:49:23.137
> 
> 标签：ruby-on-rails, form-for

我有组和电话号码模型通过称为 group_phone_numbers 的关系与 has_many 连接。

基本上，在组编辑视图中，我想要一个带有添加或删除链接的电话号码列表。当有人单击添加时，它会在模型​​之间创建关联，当有人单击删除时，它会删除它。使用表格来做到这一点的正确方法是什么？或者我应该只做一个 link_to 自定义控制器操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T03:32:19.437

[http://railscasts.com/episodes/196-nested-model-form-part-1?view=asciicast](http://railscasts.com/episodes/196-nested-model-form-part-1?view=asciicast)是你所需要的。`fields_for`具体来说...

# ruby-on-rails - 安装乘客 nginx

> ID：13262163
> 
> 赞同：1
> 
> 时间：2012-11-07T01:49:51.563
> 
> 标签：ruby-on-rails, nginx, rvm, rack, passenger

我安装了乘客 gem，但它不适用于我的旧 nginx。所以我正在尝试从乘客脚本安装 nginx。

我愿意`$ sudo ./bin/passenger-install-nginx-module`，这给了

```
 * rack... not found
 * To install rack:
   Please install RubyGems first, then run /home/dbadmin/.rvm/wrappers/ruby-1.9.3-p286@rails-3.1.1/gem install rack 
```

尽管实际上已安装了机架 gem。无论如何，我愿意

```
$ /home/dbadmin/.rvm/wrappers/ruby-1.9.3-p286@rails-3.1.1/gem install rack
Successfully installed rack-1.4.1
1 gem installed
Installing ri documentation for rack-1.4.1...
Installing RDoc documentation for rack-1.4.1... 
```

在这之后，`$ sudo ./bin/passenger-install-nginx-module`再说一遍`* rack... not found`。

可能会发生什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T03:53:13.390

如果您打算将 sudo 与 rvm 一起使用，则需要使用 rvmsudo - 因为 sudo 在更改为 root 用户时不会运行 root 的配置文件（即不加载 RVM）。

```
rvmsudo ./bin/passenger-install-nginx-module 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T01:57:02.273

我最近遇到了同样的问题，我相信这是与`rvm`gemsets 相关的混淆。为了继续前进，我需要以`rack`root 身份将 gem 安装到系统的 gemset 中，然后乘客的安装程序才能找到它并继续。

# java - 未将 JAX-RS 自定义标头添加到重定向响应

> ID：13262164
> 
> 赞同：3
> 
> 时间：2012-11-07T01:49:52.910
> 
> 标签：java, web-services, redirect, http-headers, jax-rs

我正在尝试将一些自定义标头参数添加到 HTTP 303（重定向）响应中。但是，新标头似乎已从响应中剥离。

此代码用于接收请求并返回 HTTP 303 响应：

```
@POST
@Path("/authorize")
@Produces("application/x-www-form-urlencoded")
public Response getOAuthGrant(@HeaderParam(OAuth2.AUTHORIZATION)    @DefaultValue("") String authorization,
                              @HeaderParam(OAuth2.CLIENT_ID)        @DefaultValue("") String clientId,
                              @HeaderParam(OAuth2.CLIENT_SECRET)    @DefaultValue("") String clientSecret,
                              @HeaderParam(OAuth2.GRANT_TYPE)       @DefaultValue("") String grantType) throws InternalServerException, UnauthorizedException {

        OAuth2.validateGrantRequest(clientId, clientSecret, authorization, grantType);

        ApiTokenV2 apiTokenV2 = new ApiTokenV2();

        try {
            apiTokenV2 = TokenManager.getApiToken(clientId);

            if (apiTokenV2 != null) {
                apiTokenV2.generateAccessGrant(clientId);
            } else {
                logger.error("Error in TokenEndpoint. Retrieved token is null.");
                throw new InternalServerException("A server error occurred while trying to authorize the requester. Could not find 'generateAccessGrant' method");
            } 
        } catch (NamingException e) {
            throw new InternalServerException("A server error occurred while trying to authorize grant request. Could not find 'generateAccessGrant' method.", e);
        }

        return Response.status(Response.Status.SEE_OTHER)
                       .type(MediaType.APPLICATION_FORM_URLENCODED_TYPE)
                       .header("Location", "/api/token")
                       .header("Authorization", "OAuth")
                       .header("Access-Grant", apiTokenV2.getAccessGrant())
                       .build();
} 
```

我在这里做错了什么？我应该`@Context`改用吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-07T08:22:44.617

您正在尝试做的事情应该有效。

```
@POST
@Path("/authorize")
public Response authorize() {
    return Response.status(Response.Status.SEE_OTHER)
            .header(HttpHeaders.LOCATION, "/api/token")
            .header("X-Foo", "bar")
            .build();
} 
```

执行它`curl`：

```
% curl -v -X POST http://localhost:8080/WebApplication1/rest/console/authorize
* About to connect() to localhost port 8080 (#0)
*   Trying ::1... connected
> POST /WebApplication1/rest/console/authorize HTTP/1.1
> User-Agent: curl/7.22.0 (x86_64-pc-linux-gnu) libcurl/7.22.0 OpenSSL/1.0.1 zlib/1.2.3.4 libidn/1.23 librtmp/2.3
> Host: localhost:8080
> Accept: */*
> 
< HTTP/1.1 303 See Other
< X-Powered-By: Servlet/3.0 JSP/2.2 (GlassFish Server Open Source Edition 3.1.2.2 Java/Oracle Corporation/1.7)
< Server: GlassFish Server Open Source Edition 3.1.2.2
< Location: /api/token
< X-Foo: bar
< Content-Length: 0
< Date: Wed, 07 Nov 2012 08:20:24 GMT
< 
* Connection #0 to host localhost left intact
* Closing connection #0 
```

如您所见，响应代码是

```
303 See Other 
```

并设置了有趣的标题：

```
Location: /api/token
X-Foo: bar 
```

# ruby-on-rails - 在 Rails 上获取访问令牌

> ID：13262167
> 
> 赞同：0
> 
> 时间：2012-11-07T01:50:23.883
> 
> 标签：ruby-on-rails, curl, devise, httprequest, access-token

我使用设计在 Rails 上进行身份验证。目前我正在测试 API 的一些 POST 函数，我想用 cRUL 来做，所以我需要访问令牌才能获得设计的批准。然后我可以像使用 cURL

```
curl -v -H "Accept: application/json" -H "Content-type: application/json" -H 
'Authorization: Token token=""' -X POST -d '{"name": "paul 
allen","first_name":"paul","last_name":"allen","middle_name":"","gender":"m",
"dob":"1/2/1980","dod":""}' http://localhost:3000/?auth_token=OyZSe8ozy_os5acibqNC 
```

但我怎样才能得到 auth_token？（OyZSe8ozy_os5acibqNC）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T03:27:47.803

设计令牌可以在控制器中返回：

```
 render :status=>200, :json=>{:token=>@user.authentication_token} 
```

# python - 阻止 New Relic / Celery 污染 Heroku 上的日志

> ID：13262170
> 
> 赞同：0
> 
> 时间：2012-11-07T01:50:37.970
> 
> 标签：python, django, celery, newrelic

# 问题

如何阻止 New Relic / Celery 不断将以下内容打印到 Heroku 的日志中。

```
app[scheduler.1]: [INFO/MainProcess] Starting new HTTP connection (1): collector-6.newrelic.com
app[scheduler.1]: [INFO/MainProcess] Starting new HTTP connection (1): collector-6.newrelic.com
app[scheduler.1]: [INFO/MainProcess] Starting new HTTP connection (1): collector-6.newrelic.com
app[scheduler.1]: [INFO/MainProcess] Starting new HTTP connection (1): collector-6.newrelic.com 
```

## 设置

上述日志条目每分钟出现一次。报告这是一个芹菜工人的应用程序通过`Procfile`读取（部分）开始：

```
scheduler: newrelic-admin run-program python manage.py celery worker --loglevel=ERROR -B -E --maxtasksperchild=1000 
```

尽管设置它`loglevel`似乎`ERROR`芹菜忽略了这个论点。有趣的是，在我的本地机器上，这个设置是受尊重的。

### 版本

```
celery==3.0.12
django-celery==3.0.11
newrelic==1.6.0.13 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T14:41:19.847

根据 New Relic 支持，临时解决方案是将以下内容添加到您的 settings.py 或 celeryconfig.py（取决于您用于 celery 设置的内容）。

```
import logging
class RequestsConnectionFilter(logging.Filter):
    def filter(self, record):
        return False
logging.getLogger('newrelic.lib.requests.packages.urllib3.connectionpool').addFilter(RequestsConnectionFilter()) 
```

NR 支持人员告诉我，他们计划将这种抑制构建到 Python 代理的未来版本中。

# ember.js - emberjs 1.0 路由，无法显示命名出口

> ID：13262172
> 
> 赞同：1
> 
> 时间：2012-11-07T01:50:51.507
> 
> 标签：ember.js, ember-router

> **可能重复：**
> [Emberjs 1.0-pre 路由器找不到路径状态并说路由器未定义](https://stackoverflow.com/questions/13281815/emberjs-1-0-pre-router-cant-find-state-for-path-and-says-router-is-undefined)

对此的任何建议都会有所帮助。我希望名为**data-template-name="logging 的模板**显示名为**{{outlet mine }}**的插座。现在使用这个**[jsfiddle](http://jsfiddle.net/CNydA/4/)**，只有名为 **data-template-name="application 的模板**可以显示这个命名的插座，并且我必须从控制台手动调用**App.router.transitionTo('root.logon.index')**才能发生这种情况。我希望自动显示命名的插座，而无需手动调用**transitionTo**

```
<script type="text/x-handlebars" data-template-name="application">
  <h1>Hi Friend</h1>
  {{outlet}}
  {{outlet mine }} 
```

```
 <br/>
 <p><b>help</b></p> 
```

```
 {{view  Ember.TextField placeholder="what" class="userInput"  }}
   <p> lets see</p>
    {{outlet mine }} 
```

​​​

```
App.Router = Ember.Router.extend({
  enableLogging:  true,
  location: 'hash',
  root: Ember.Route.extend({

    showLogin: Ember.Route.transitionTo('root.logon'),

    index:  Ember.Route.extend({
      route:  '/',

      connectOutlets:  function(router){
      router.get('applicationController').connectOutlet('login');
    }

    }),

    logon:  Ember.Route.extend({
      route: '/login',
      enter: function ( router ){
        console.log("The login sub-state was entered.");
    },
     connectOutlets:  function(router, context){
       router.get('applicationController').connectOutlet( 'login');
     },

     index: Ember.Route.extend({
       route: '/',
       connectOutlets: function(router) {
      router.get('loginController').connectOutlet('mine', 'login');
     }
   })          

  })

 }) 
```

});

# python - 请帮助理解此示例中如何使用“return”语句

> ID：13262173
> 
> 赞同：2
> 
> 时间：2012-11-07T01:50:54.133
> 
> 标签：python, python-2.7

我目前正在使用 Learn Python the Hard Way 学习 python，并且非常喜欢它。在其中一个课程示例中，我无法掌握“return”的用法。

我坚持的课程是[练习 43：来自 Planet Percal #25](http://learnpythonthehardway.org/book/ex43.html)的 Gothons 。我了解当游戏首次运行时`next_room_name`设置为`central_corridor`，因此`central_corridor()`在`play()`. 我不明白的是如何`self.start`重新分配 get 。

例如，`death`在`central_corridor()`. 在第 49 行返回后，我们又回到了`play(self): while True`循环中。第一行是`next_room_name = self.start`As far as I know, `self.start`still equals `central_corridor`，但显然现在是 equaling `death`。

这是否意味着 after`death`被返回，并且仍在`while`循环`play()`中，对象`Game()`已被重新初始化，`__init__`正在返回返回的结果？当我们在技术上仍处于循环中并且尚未退出时，我很困惑如何重新分配`next_room_name = self.start`under 。我想我对返回的位置感到困惑。`__init__``death``play(self): while True``death`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T01:56:37.887

`self.start`永远不会重新分配。第 49 行的 return 没有返回到`play()`方法的开头，它返回到

```
next_room_name = room() 
```

该行`next_room_name = self.start`根本不在`while`循环中，因此在第一次之后永远不会发生。`next_room_name`只是设置为，`death`因为这就是`central_corridor`方法返回的内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T02:03:12.823

因此，让我们逐步完成它，直到`while`循环：

```
a_game = Game("central_corridor")
a_game.play() 
```

`a_game`在这里，我们使用`start_value`=来实例化`central_corridor`。到目前为止，一切都很好:) 现在我们运行`a_game.play()`：

```
def play(self):
    next_room_name = self.start

    while True:
        print "\n--------"
        room = getattr(self, next_room_name)
        next_room_name = room() 
```

正如您正确陈述`next_room_name`的那样，被分配 value `central_corridor`，然后`while`循环开始。

这可能是重要的部分 -`while`循环只执行该`while`部分，并且在它下面缩进的所有内容 -**不会**每次都`next_room_name`重新分配。相反，我们定义为属性（即），然后运行同名的方法。然后在下一个循环中使用该方法的返回值（比如说），这意味着的结果，它会打印一个随机的俏皮话然后退出。如果名称是另一个房间，它将继续循环。**`self.start``room``next_room_name``central_corridor``death``room = death``next_room_name=``death()`**

# iphone - IOS开发者账号验证

> ID：13262174
> 
> 赞同：0
> 
> 时间：2012-11-07T01:50:59.860
> 
> 标签：iphone, ios, email, account

我要验证电子邮件地址，但在我使用 Apple ID 和密码登录后，它显示“**您的请求无法完成此电子邮件地址的帐户无效”。**登录开发者中心时ID和密码是正确的，如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T01:53:26.363

尝试注销并重新登录。如果这不起作用，请联系 Apple 开发人员支持。

# javascript - 使用追加后如何将可拖动事件绑定到多个实例

> ID：13262181
> 
> 赞同：0
> 
> 时间：2012-11-07T01:51:40.637
> 
> 标签：javascript, jquery, draggable, inventory

我正在尝试制作一个有很多插槽的库存系统，但我认为我做错了什么。像这样对每个元素调用“.draggable()”是否相同，或者将所有元素分组然后将其应用于所有元素是否更快？如果是这样，我该怎么做？这是我的代码：

```
 for (x=0; x<100; x++){

    var $slots = $('<div class="slot">'+(x+1)+'</div>').appendTo('#inventory').draggable();

 } 
```

提前致谢，

泰国蝎子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T02:13:22.587

只需运行一个测试：

```
var start = new Date().getTime();

for (x=0; x<1000; x++){

    $('<div class="slot">'+(x+1)+'</div>').appendTo('#inventory').draggable();

}
var time_spent = new Date().getTime() - start;
$('#results').append("Time spend if draggable applied on each slot: " + ( time_spend / 1000 ) + "s");

start = new Date().getTime();
for (x=0; x<1000; x++){

   $('<div class="slot">'+(x+1)+'</div>').appendTo('#inventory');

}
$('.slot').draggable();
time_spent = new Date().getTime() - start;
$('#results').append("<br/>Time spend if draggable applied on all slots: " + ( time_spend / 1000 ) + "s"); 
```

[http://jsfiddle.net/gael/4KSmd/1/](http://jsfiddle.net/gael/4KSmd/1/)

x = 0 到 10000 的结果：

如果在每个插槽上应用可拖动，则花费的时间：12.957 秒

如果可拖动应用于所有插槽，则花费的时间：140.269 秒

# format - 条码数据转换？

> ID：13262183
> 
> 赞同：0
> 
> 时间：2012-11-07T01:52:11.017
> 
> 标签：format, barcode-scanner, data-conversion

我在 ebay 上买了一个条形码扫描仪，当然，手册完全是用中文写的。我有这个条形码：

![条码](../Images/b2c787040585d88bd181a582e9d2c876.png)

我使用条形码生成器来创建它，当它询问我正在创建的条形码的内容时，我输入了**“a127-137”**和符号系统的格式，我选择了**“code39 extended”**但是当我打印出来并扫描时我得到了这个：

```
435905591573 
```

我想要的是能够扫描条形码并取回其下方的数字/字母字符串。我正在尝试将其设置为工作，我需要它与名为“Simply Accounting”的程序兼容，以便我可以扫描零件包装上的条形码，扫描仪会将零件号粘贴到简单地估计。

这是我拥有的条形码扫描仪：（型号：ES-6080W）

![在此处输入图像描述](../Images/3a14275dbda5d9f4cee69b17750cf7b5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T07:48:46.853

条码内容为“+A127-137”

看zxing的解码：http: [//zxing.org/w/decode ?u=http%3A%2F%2Fi.stack.imgur.com%2FGy4jN.png&full=true](http://zxing.org/w/decode?u=http%3A%2F%2Fi.stack.imgur.com%2FGy4jN.png&full=true)

我不确定您是否完全编码了您想要的内容，但更重要的是，您的扫描仪似乎没有读取 Code 39。

# php - MD5 URL 中的 id 并使用 PHP 将 id 获取到其他页面

> ID：13262185
> 
> 赞同：1
> 
> 时间：2012-11-07T01:52:31.677
> 
> 标签：php, security

假设我有如下代码：

```
<td><a href="view_edit_form.php?id=<?php echo md5($row[0]);?>">Edit</a></td> 
```

在页面中，`view_edit_form.php`我使用此代码获取 id`$ID = $_GET['id'];`

**问题**

`id`如果我`md5`喜欢这样，我无法获得。请帮助我，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T06:26:24.487

如果您只是想掩盖 id，我建议您使用两个代码，它们可以放在您的 url 之前和之后。

```
$before_code = "8292273"; 
```

```
$after_code = "9388347"; 
```

如果你在你的 id 中使用字符，那么混合一些

我假设 $row[0] 是你的 id

```
<a href="view_edit_form.php?id=<?php echo $before_code.$row[0].$after_code; ?>">
  Edit
</a> 
```

如果您将之前和之后的代码设置为设定的长度，您可以随机更改它们并使用`substr`从开头和结尾删除设定的字符数以获取您的 id。

如果您使用设置代码，那么您可以使用`str_replace`或`preg_replace`删除留下您 ID 的代码。

只要您将代码留给自己，大多数人将无法找到该 ID，除非它是那个人的 ID，并且他们已经知道它是什么......这会浪费时间......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T02:03:31.400

You can't get the `md5` hash unless it is stored elsewhere against an `$ID` and retrieved. (`md5` is a one-way hashing algorithm: See [here](http://en.wikipedia.org/wiki/MD5)).

Your source.php probably needs to look like:

```
<td><a href="view_edit_form.php?id=<?php echo $row['id_hash'];?>">Edit</a></td> 
```

Your rendered HTML may look like:

```
<td><a href="view_edit_form.php?id=79054025255fb1a26e4bc422aef54eb4">Edit</a></td> 
```

In your *`source.php`* file AND *`view_edit_form.php`*, you need to make a call to your database (This is more often than not stored in a database) to retrieve the hash (or `$ID`) based on the the `md5` hash in question.

You may be better off using a different hashing algorithm, but md5 is usually acceptable for basic security/obfuscation - but **NOT** for encrypted passwords these days. It's pretty much dependent on what you mean by [security](/questions/tagged/security "show questions tagged 'security'").

Hope this helps.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T01:55:52.783

使用`mcrypt_encrypt()` 和`mcrypt_decrypt()` 加密和解密数据。

# php - Jquery/PHP $.post 不适用于 SheepIT 字段

> ID：13262187
> 
> 赞同：1
> 
> 时间：2012-11-07T01:53:01.777
> 
> 标签：php, jquery, ajax

我正在尝试使用[Jquery SheepIT 插件](http://www.mdelrosso.com/sheepit/index.php?sec=demo3&lng=en_GB)制作计算器。

SheepIT 克隆输入字段，我工作得很好。生成这些字段后，我想使用 JQUERY 发布所有字段，如下所示：

```
 [SheepIT generated fields with names and values]                

    <script>
    function calc() {
        $.post('process/calculate-charges.php', $("form").serialize(), function(data) { $('#result').html(data); });
    }
    </script>

    <input type="button" value="Calculate Total" onclick="calc()" />
    <div id="result"></div> 
```

我的问题是 jquery 不会 $.post 已经用 SheepIt 克隆/动态生成的字段！它只发布页面首次加载时页面上的字段。

当我手动在字段周围放置一个表单并将它们直接提交到一个 php 文件时，$_POST 数组包含所有字段（来自 SheepIT！），就像我需要的那样。我只希望 Jquery 给我与此相同的结果。

任何人都可以提供任何建议或示例。谢谢你。如果您需要任何其他信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T04:21:05.617

无论如何，我得到了这个问题的答案。原来我在脚本中有冲突。我下载了旧版本的 Sheep IT，所有内容都按照现在应该发布的方式发布。

# heroku - 我应该如何在 Heroku 上运行 Alembic 迁移？

> ID：13262195
> 
> 赞同：10
> 
> 时间：2012-11-07T01:53:41.250
> 
> 标签：heroku, sqlalchemy, flask, flask-sqlalchemy, alembic

我正在尝试在 Heroku 上运行一个相当简单的 Flask + SQLAlchemy 站点，但我不确定应该如何运行迁移来设置我的数据库。当我运行时`heroku run alembic upgrade head`，我收到以下错误：

```
Running `alembic upgrade head` attached to terminal... up, run.1
Traceback (most recent call last):
  File "/app/.heroku/venv/bin/alembic", line 12, in <module>
    load_entry_point('alembic==0.4.0', 'console_scripts', 'alembic')()
  File "/app/.heroku/venv/lib/python2.7/site-packages/alembic/config.py", line 255, in main
    CommandLine(prog=prog).main(argv=argv)
  File "/app/.heroku/venv/lib/python2.7/site-packages/alembic/config.py", line 250, in main
    self.run_cmd(cfg, options)
  File "/app/.heroku/venv/lib/python2.7/site-packages/alembic/config.py", line 241, in run_cmd
    **dict((k, getattr(options, k)) for k in kwarg)
  File "/app/.heroku/venv/lib/python2.7/site-packages/alembic/command.py", line 124, in upgrade
    script.run_env()
  File "/app/.heroku/venv/lib/python2.7/site-packages/alembic/script.py", line 191, in run_env
    util.load_python_file(self.dir, 'env.py')
  File "/app/.heroku/venv/lib/python2.7/site-packages/alembic/util.py", line 185, in load_python_file
    module = imp.load_source(module_id, path, open(path, 'rb'))
  File "alembic/env.py", line 80, in <module>
    run_migrations_online()
  File "alembic/env.py", line 63, in run_migrations_online
    poolclass=pool.NullPool)
  File "/app/.heroku/venv/lib/python2.7/site-packages/sqlalchemy/engine/__init__.py", line 349, in engine_from_config
    return create_engine(url, **opts)
  File "/app/.heroku/venv/lib/python2.7/site-packages/sqlalchemy/engine/__init__.py", line 330, in create_engine
    return strategy.create(*args, **kwargs)
  File "/app/.heroku/venv/lib/python2.7/site-packages/sqlalchemy/engine/strategies.py", line 64, in create
    dbapi = dialect_cls.dbapi(**dbapi_args)
  File "/app/.heroku/venv/lib/python2.7/site-packages/sqlalchemy/dialects/sqlite/pysqlite.py", line 289, in dbapi 
```

对我来说，这似乎表明它正在尝试加载 sqlite 的东西（这是我在 中的默认值`alembic.ini`），但我有以下内容`env.py`以使其使用 Heroku PostgreSQL 连接：

```
cur_db_uri = config.get_section_option('alembic', 'sqlalchemy.url')
my_db_uri = app.config.get('SQLALCHEMY_DATABASE_URI', cur_db_uri)
config.set_section_option('alembic', 'sqlalchemy.url', my_db_uri) 
```

`app`Flask 实例在哪里。我正在使用 Flask-SQLAlchemy 来干燥我在应用程序中的数据库使用情况，并使用 Flask-Heroku 来确保我的所有 Flask 配置变量都从 Heroku 环境变量中正确提取。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-07T02:43:25.233

事实证明，Flask-Heroku 正在提取 的值`DATABASE_URL`，而我在 Heroku 上的应用程序不存在该值。相反，如果我手动映射`HEROKU_POSTGRESQL_CRIMSON_URL`into的值`app.config['SQLALCHEMY_DATABASE_URI']`，它会按预期工作。

更新：事实证明我忘记了`pg:promote`我的数据库以便为该应用程序设置默认值，这就是`DATABASE_URL`不存在的原因。所以真正的解决方案是：不要忘记推广你的数据库。

更新2：让我总结一下：使用[flask-heroku](https://github.com/kennethreitz/flask-heroku)将正确的注入`SQLALCHEMY_DATABASE_URI`到您的应用程序的配置中，调整`env.py`以使用您的应用程序的配置`SQLALCHEMY_DATABASE_URI`而不是URL in `alembic.ini`，然后通过`heroku run alembic upgrade head`（或您想要运行的任何迁移）在Heroku的服务器上运行alembic . 这将防止您不得不调整 ini 文件以适应不同的环境（因为托管环境将为您管理它）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-12-30T03:35:21.973

[您](https://devcenter.heroku.com/articles/release-phase#specifying-release-phase-tasks)可以在`Procfile`. 我的最终看起来像：

```
web: gunicorn ...
release: alembic upgrade head 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-02T21:13:09.670

我也认为我必须`alembic upgrade head`在 heroku 上手动运行才能进行数据库更改，但事实并非如此。如果您`DATABASE_URL`的应用程序中有正确的值，则 alembic migrate 在部署时运行，无需再次运行。

要确认，您可以连接到您的数据库`heroku pg:psql <database name> --app <application name>`并检查。

# css - jQuery Mobile：CSS 不会在第一页加载时呈现，而是从第二次开始

> ID：13262196
> 
> 赞同：4
> 
> 时间：2012-11-07T01:53:41.657
> 
> 标签：css, jquery-mobile

我正在创建一个简单的词汇页面（目前用于韩语-英语）。所有的卡片都保存在 localStorage 中。我正在使用带有多页模板的 jQueryMobile，如下面的代码所示：

```
<html>
 <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Card Reader</title>

    <link rel="stylesheet"  href="jquery.mobile/jquery.mobile-1.1.0.css" />
    <link rel="stylesheet" href="docs/assets/css/jqm-docs.css" />
    <link rel="stylesheet" href="docsdemos-style-override.css" />
    <script type="text/javascript" src="custom_codes.js"></script>
    <script type="text/javascript" src="jquery.mobile/jquery-1.7.2.min"></script>
    <script type="text/javascript" src="jquery.mobile/jquery.mobile-1.1.0.js"></script>
    <script>
    $('document').ready(function(){
    var list = JSON.parse(localStorage.getItem('cardList'));
    if(list==null){
        populateCards();
        list = JSON.parse(localStorage.getItem('cardList'));                
    }
    $cardList=$('#cardList');
    $cardList.empty();      
    $.each(list,function(i, value){
        $newItem = $('<li />');                                                                     
        $link = $('<a data-transition="slidefade" href="#wordListPage">'+value+'</a>');
        $link.attr('onClick',"loadWordList('"+value+"','wordList"+i+"')");
        $newItem.append($link);
        $cardList.append($newItem);             
    });     
});     

function loadWordList(cardName,cardId){
    var wordList = JSON.parse(localStorage.getItem(cardId));
    if(wordList==null){
        alert('no words in the list');              
        return;
    }
    $wList=$('#wordList');          
    $wList.empty();
    $list = $('<ul/>');
    $list.attr('data-role','listview');
    $.each(wordList,function(i, value){
        $newItem = $('<li />');
        $newItem.append('<h3>'+value['word']+'</h3>');              
        $newItem.append('<p>'+value['definition']+'</p>');          
        $list.append($newItem).trigger("create");
    });     
    $wList.append($list).trigger('create');     
    $('#cardTitle').html(cardName);     
}
</script>   

</head> 
<body> 

<div data-role="page" id="welcomePage">
    <h2>
        Welcome to Korean Learner
    </h2>
    <a data-transition="slidefade" href="#cardsListPage">           
        Load Cards          
    </a>
</div>

<div data-role="page" id="cardsListPage">
    <div data-role="content">
        <ul id="cardList" data-role="listview">
        </ul>
    </div>
</div>

<div data-role="page" id="wordListPage">
    <div data-role="header" class="ui-header ui-bar-b" data-position="fixed">
        <a data-rel="back">Back</a>
        <h1 id="cardTitle" >Card List</h1>
    </div>
    <div data-role="content" id="wordList">         

    </div>
</div>
</body>
</html> 
```

当我在浏览器中检查时，输出流程如下图所示：

[链接到图片，因为我不能在此处发布为新用户](http://postimage.org/image/pzrnvkxzr/)

我使用 javascript 加载 cardList 和 wordlist。populateCards() 函数是 custom_codes.js 中的一个函数，它仅将一组卡片加载到本地存储中。我现在得到的唯一错误是 wordList 页面在第一次加载时没有 CSS 加载（第三次流动），并且在我回来后完全没问题（最后一次）。谁能帮我解决这个错误。此外，我很高兴获得一些性能提示，因为我的目标是在手机中使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T07:28:49.320

欢迎来到 jQM，不像 jQuery，你不再使用`$(document).ready`初学者（[http://jquerymobile.com/test/docs/api/events.html](http://jquerymobile.com/test/docs/api/events.html)）你现在监听`pageinit`and`pageshow`事件，可能你的问题是你的 JS 正在运行在 jQM 触发之后`pageshow`立即触发`pageinit`

**`pageshow`当您导航回页面时重新触发，这就是为什么当您返回时它正在工作**

当 jQM 触发`pageshow`时，它会通过并应用您从其 API 使用的任何 CSS。但是当它被触发时，你还没有添加元素，所以它们没有被 jQM 设置样式。

`.listview('refresh')`如果元素是在通过异步调用之后添加的，那么我认为您也需要手动调用。

我还有一个较旧的答案，我在其中概述了我如何组织我的 JS，以便在多页环境中易于理解/调试[如何组织你的 jQM JS](https://stackoverflow.com/a/10542821/737023)

如果*welcomePage*和*cardsListPage*在同一个文件中，您也使用**单页模板。**

 ****多页模板**是当您将这些页面中的每一个都放在一个单独的文件中时，我认为这更好，因为如果您担心性能，那么您在开始时加载的数据更少。但是您需要遵循我在链接中的 JS 设置或您自己的解决方案，但无论您从哪个页面开始，您基本上都*在尝试加载所有 JS。*并处理每个`pageinit/pageshow`事件，并通过某种方式确定您在多页模板中的哪一页。

您正在使用**ids**但效果不佳，因为在多页面模板中，jQM 可能会多次加载任何页面（进入单个 DOM，检查调试器以查看 - 假设 domCaching 已打开），我猜你仍然通过检查知道它是什么页面，`.attr('id')`但它具有误导性，因为如果你这样做，`$('#cardsListPage')`你可能会得到许多元素之一。

希望这能让你开始。**

# excel - 使用 Excel 数据透视表进行趋势分析和条件格式化

> ID：13262200
> 
> 赞同：2
> 
> 时间：2012-11-07T01:54:15.760
> 
> 标签：excel, formula, pivot-table, conditional-formatting

我正在尝试将条件格式应用于我的数据透视表，但尽管进行了大量研究，但似乎无法正确处理。

假设有以下原始数据范围/表格描述了不同销售代理每年销售的产品类别

**销售代理**-**年份**-**产品**-**销售额**

相应的数据透视表将**销售代理**作为行，**年份**和**产品**作为列，**销售额**作为值字段。

现在我想根据同比比较对值字段应用条件格式。例如，如果**销售代理 A**在**2012 年**比**2011 年**销售了更多的**汽车保险**，那么相应的单元格（销售代理 A，2012，汽车保险）应该用绿色着色。

 ****此外，这也应该在小计的基础上起作用，即如果**销售代理 A**在**2012 年**的总销售额高于**2011 年**，那么相应的单元格（**销售代理 A**，**2012 年**）也应该是绿色的。

我尝试在条件格式对话框中使用相对引用，但这是非常静态的（即总是使用前一列），并且不适用于所有列或小计。

另一个选项显然是 VBA，基本上遍历整个数据透视表来识别列和行标题，然后使用 GetPivotData 来确定格式。但我想避免这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T12:35:56.407

您可以将条件格式应用于 Excel 工作表中的完整列，该列将以不同的方式与其他单元格相关：

所以从数据透视表的第二列开始：

![条件格式示例](../Images/2d7a10684db73d6a301dd72533361529.png)

排除第 4 行有文本的列，因为新产品集将开始（不想将其与去年销售的上一个产品进行比较！）。还要检查您要检查的内容：这是否比上一个大（此比较为空为 0）。最后确保单元格本身的行号大于 5，否则这也将应用于例如年份值！

![条件格式示例](../Images/25bebf6e813f665e6f130743422843e5.png)****

# assembly - 如何计算 rdtsc 指令执行需要多少个时钟周期？

> ID：13262203
> 
> 赞同：0
> 
> 时间：2012-11-07T01:54:40.510
> 
> 标签：assembly, intel, cpu-registers, rdtsc

我知道 unsigned long long 存储在 eax/edx 中，但我想知道如何找出执行单个 rdtsc 指令需要多少个时钟周期？

编辑：这样的东西有用吗？

.globl rdtsc

rdtsc：

rdtsc

movl %eax, %ecx

movl %edx, %ebx

rdtsc

subl %ecx, %eax

subl %ebx, %edx

ret

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T01:57:49.413

You could execute `rdtsc` repeatedly, and look at the difference between consecutive return values. Of course you need to bear in mind things like context switches etc, which will cause massive spikes.

See [rdtsc, too many cycles](https://stackoverflow.com/questions/8322782/rdtsc-too-many-cycles) for a discussion.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T19:11:21.817

尽管您应该多次运行它并使用出现的最短值，但您的代码看起来是正确的。

我认为应该重申这个问题：在代码序列期间使用 rdtsc 计算经过的时钟周期的开销是多少。所以计数代码本质上是（32位示例）：

```
rdtsc
mov dword ptr [mem64],eax
mov dword ptr [mem64+4],edx

; the code sequence to clock would go here when you're clocking it

rdtsc
sub eax,dword ptr [mem64]
sbb edx,dword ptr [mem64+4]    ; I always mix up sbb and sub so this may be incorrect 
```

结果是对代码序列进行计时时“rdtsc 开销”的实际经过时间。

减去 rdtsc 开销后，您需要考虑流水线以及重叠处理是否已完成。对我来说，我假设如果定时序列在少于 30 个周期内运行，则可能需要考虑未完成的流水线问题。如果序列需要超过 100 个循环，则可能会出现问题，但可能会被忽略。

那么30到100之间呢？肯定是灰色的。

# shopify - Shopify API CakePHP 收到令牌后出现未经授权的 401

> ID：13262208
> 
> 赞同：3
> 
> 时间：2012-11-07T01:55:34.363
> 
> 标签：shopify

我正在根据实现 OAuth2 的同一作者的另一个具有类似行为的[项目的代码](https://github.com/cmcdonaldca/ohShopify.php)[来](https://github.com/cmcdonaldca/CakePHP-Shopify-Plugin)修补可用于 CakePHP的 shopify 接口。

我设法解决了大部分问题，但最终遇到了一个我不确定如何解决与 Shopify API 相关的问题。

在进行身份验证时，我收到了 shopify 提供的身份验证文档 (http://api.shopify.com/authentication.html) 中所述的所有信息，我已经更正了验证方法，最终得到了正确的验证 md5 值根据提供的计算方法。

我可以安装应用程序并加载我的基本控制器，但是，在尝试传递 API 调用时，我最终在页面上出现 401 错误：

```
[errors] => [API] Invalid API key or access token (unrecognized login or wrong password). 
```

我一遍又一遍地检查了大部分代码，但我似乎找不到哪里出了问题。

附带说明：我尝试使用 curl 手动执行命令，如下所示，看看是否得到正输出：

```
curl -X GET -H "Accept: application/json" -H "X-Shopify-Access-Token:<<token>>" https://<<shopify-domain>>/admin/shop.json 
```

这是输出：

```
{"errors":"[API] Invalid API key or access token (unrecognized login or wrong password)"} 
```

出于某种原因，我从 shopify API 收到的访问令牌似乎不起作用。

另外，我正在测试店尝试这个。

任何帮助将不胜感激。

谢谢你。

# ios - 如何从字典的 NSArray 创建 indexPath

> ID：13262213
> 
> 赞同：0
> 
> 时间：2012-11-07T01:56:34.393
> 
> 标签：ios, nsarray, nsdictionary

好的，我正在尝试从一个值中创建一个 indexPath 值，`NSArray`这样`NSDictionary`当我进入我的 tableview 时，我可以在旁边放置一个辅助刻度。

我有一个`NSArray`像`NSDictionaries`这样的

```
{
        HAS = 1;
        ISL = 1;
        ISV = 0;
        MAN = BANKING;
        MON = 324;
} 
```

因此，该数组将有大约 80 个这些条目，每个条目都有不同的值..

要创建 IndexPath，我需要计算 MAN 的唯一首字母的数量，**直到**MAN **== selected String**这会给我部分编号。

然后我需要计算行的选定部分类型中有多少条目。

我已经从这里得到了一些帮助，但是我没有发现我的逻辑中的缺陷.. 对于我正在计算所有整体的行，而不是从所选部分的开头开始计算我的行数完全被填满。下面是我想要实现的一个例子。

```
a, aa, b, c, d, dd, ddd, dddd, e, f, g, gg 
```

用户选择 ddd 所以 indexpath 将是

部分

```
a, b, c, (d), e, f, g = 3 
```

排

```
d, dd, (ddd), dddd = 2 
```

我可以像这样得到这个部分

```
NSArray *MANArray = [sortedArray valueForKey:@"MAN"];

NSMutableArray *letters = [NSMutableArray array];
NSString *currentLetter = nil;
for (NSString *string in MANArray) {
    if (string.length > 0) {
        NSString *letter = [string substringToIndex:1];
        if (![letter isEqualToString:currentLetter]) {
            [letters addObject:letter];
            currentLetter = letter;
        }
    }
}
NSArray *firstLetterArray = [NSArray arrayWithArray:letters];
int sectionCount = 0;
for(int i=0; i<[firstLetterArray count]; i++){
    if( [[firstLetterArray objectAtIndex:i] isEqualToString:completedStringLetter]){
        sectionCount = i;
        NSLog(@"%d", sectionCount);
    }
} 
```

但是当我试图从所选部分获取行数时，我只是卡住了。

任何帮助将不胜感激。

**更新：**

这是我在选择值之前所做的计数，但就像我说的那样它不正确，因为它需要根据第一个字母从部分开始。

```
NSNumber * myNumber = [NSNumber numberWithInteger:[modIdString integerValue]];

//                
NSArray *subarray = [sortedArray valueForKey:@"MOD"];
for(int i=0; i<[subarray count]; i++){
   if( [[subarray objectAtIndex:i] isEqualToNumber:myNumber]){
      //you have found it, do whatever you need, and break from the loop
      modelResultIndexPath = nil;
      modelResultIndexPath = [NSIndexPath indexPathForRow:sectionCount inSection:i];
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T04:22:19.140

如何将具有值的数组转换为数组`"a, aa, b, c, d, dd, ddd, dddd, e, f, g, gg"`中的一个`NSDictionary`，

```
dict = {
        a = [a, aa];
        b = [b];
        c = [c];
        d = [d, dd, ddd, dddd];
        e = [e];
        f = [f];
        g = [g, gg];
} 
```

然后`[[dict allKeys] count]`应该给你节数，并`[[dict valueForKey:@"d"] count]`应该给出相应的行数。

为了将数组转换为字典数组，请使用此[代码](https://stackoverflow.com/questions/7466569/error-spliting-nsarray-into-sections?rq=1)，

```
NSArray *sortedArray = [arrayData sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)];
NSMutableDictionary *arraysByLetterDict = [NSMutableDictionary dictionary];

for (NSString *value in sortedArray) {
    NSString *firstLetter = [value substringWithRange:NSMakeRange(0, 1)];
    NSMutableArray *arrayForLetter = [arraysByLetterDict objectForKey:firstLetter];
    if (!arrayForLetter) {
        arrayForLetter = [NSMutableArray array];
        [arraysByLetterDict setObject:arrayForLetter forKey:firstLetter];
    }
    [arrayForLetter addObject:value];
}
NSLog(@"Dictionary: %@", arraysByLetterDict); 
```

索引路径可以计算为，

```
NSArray *allKeys = [[dict allKeys] sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)];
int totalSectionCount = [allKeys count];
int totalRowCount = [[dict valueForKey:@"d"] count];

int sectionCount = [allKeys indexOfObject:@"d"];
int rowCount = [[dict valueForKey:@"d"] indexOfObject:@"ddd"];

modelResultIndexPath = [NSIndexPath indexPathForRow:rowCount inSection:sectionCount]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T02:53:40.377

您可以对原始字典数组使用谓词来过滤掉所有以特定字母开头的字典，然后使用 idexOfObjectPassingTest 找到您要查找的匹配字典的索引：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"SELF.MAN beginswith[c] '%@'", SELECTED_FIRST_LETTER_OF_MAN];
NSArray *filteredDictionaries = [sortedArray filteredArrayUsingPredicate:predicate];
int rowCount = [filteredDictionaries indexOfObjectPassingTest:^BOOL(id obj, NSUInteger idx, BOOL *stop) {
    NSDictionary *dictionary = (NSDictionary *)obj;

    if ([dictionary[@"MAN"] isEqualToString:SELECTED_MAN]
        && [dictionary[@"MON"] isEqualToString:SELECTED_MON]) {
        return YES;
    } else {
        return NO;
    }
}]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-11T03:28:02.240

我正在使用两个具有并行结构的数组。这是我在一个中生成 indexPath 以在另一个中使用的代码：

```
 var sectionCounter = 0
    var itemsCounter = 0
    stopIdsArray.map({
        $0.map( {
            let indexPath = IndexPath(item:itemsCounter,section:sectionCounter)
            NetworkManager.sharedInstance.getData(stop:$0,indexPath:indexPath)
            itemsCounter += 1
        })
        itemsCounter = 0
        sectionCounter += 1
    }) 
```

# version-control - 我应该如何引用我的每个项目的依赖项？

> ID：13262219
> 
> 赞同：1
> 
> 时间：2012-11-07T01:57:26.297
> 
> 标签：version-control, project-management, dependency-management

我想我想将 RoadRunner 作为源存储在我的项目存储库中。通过向 RoadRunner 源代码添加构建文件，我创建了一个通用的构建过程。这算作修改项目吗？其他项目可以使用构建文件来编译 RoadRunner，但我还不知道那些可能是什么。

我想我想将 Apache Ant 作为二进制文件存储在我的项目存储库之外。我不认为我会修改 Ant，我认为我需要的版本不会超过一个，而且我可能会用它来驱动其他项目的构建过程。

下面的编译脚本是指使用相对路径的ant工具`apache-ant-1.8.4\bin\ant`。我可以将它安装在 Program Files 中并将其`bin`目录添加到路径中，然后直接引用`ant`。

我将 Ant 视为外部依赖项，就像我看到 Java 一样。我从来没有一个令人信服的理由将确切的 Java 发行版存储在我的项目存储库中。

为了将所有依赖项保存在一个位置，我可以在存储库中保留一份 Apache Ant 二进制文件的副本。这就是 RoadRunner 工具如何分发其对 NekoHTML、Xerces 和它自己的 RoadRunner 库的依赖项的方式。极端情况下，我可能包括 Java、Windows 和我所有的设备驱动程序。合适的分界线在哪里？

### 阿帕奇蚂蚁

为了编译 RoadRunner 源代码，我选择了 Apache Ant 作为自动构建工具。[使用javac 进行递归编译](https://stackoverflow.com/questions/6623161/javac-option-to-compile-recursively)比使用命令行技巧更容易，并且在我需要时提供更大的灵活性。

我不想修改 Ant 或检查它的实现，但我需要它来执行构建脚本。在这种情况下，二进制分发比源分发更方便。我将 1.8.4 版本的[二进制存档](http://archive.apache.org/dist/ant/binaries/)下载到我自己项目的工作目录中，并将存档解压缩到名为 apache-ant-1.8.4 的子目录中。

### 跑路者

[RoadRunner](http://www.dia.uniroma3.it/db/roadRunner/index.html)是一个用 Java 编写的实验性开源工具，用于为 HTML 生成数据提取包装器。我想在我自己的商业智能项目中使用它。

我想研究 RoadRunner 的实现，并可能对其进行修改以满足我的需要。在这种情况下，源分布很方便。无论如何，没有二进制分布。我下载了我自己项目工作目录的 0.02.11 版[源存档](http://www.dia.uniroma3.it/db/roadRunner/software.html)，并将存档解压缩到名为 RoadRunner 的子目录中。

我修改了 Apache Ant[示例构建文件](http://ant.apache.org/manual/using.html#example)并将其添加到 RoadRunner 目录。它看起来像这样：

```
<project name="RoadRunner" default="build" basedir=".">
    <description>
        simple example build file
    </description>
  <!-- set global properties for this build -->
  <property name="src" location="src/roadrunner"/>
  <property name="build" location="build"/>
  <property name="dist"  location="dist"/>

  <path id="lib">
    <!-- https://stackoverflow.com/questions/722774/getting-ant-javac-to-recognise-a-classpath -->
    <fileset dir="lib">
      <include name="*.jar"/>
    </fileset>
  </path>

  <target name="init">
    <!-- Create the time stamp -->
    <tstamp/>
    <!-- Create the build directory structure used by build -->
    <mkdir dir="${build}"/>
  </target>

  <target name="build" depends="init"
        description="build the source " >
    <!-- Compile the java code from ${src} into ${build} -->
    <javac srcdir="${src}" destdir="${build}" classpathref="lib"/>
  </target>

  <target name="dist" depends="build"
        description="generate the distribution" >
    <!-- Create the distribution directory -->
    <mkdir dir="${dist}/lib"/>

    <!-- Put everything in ${build} into the MyProject-${DSTAMP}.jar file -->
    <jar jarfile="${dist}/lib/MyProject-${DSTAMP}.jar" basedir="${build}"/>
  </target>

  <target name="clean"
        description="clean up" >
    <!-- Delete the ${build} and ${dist} directory trees -->
    <delete dir="${build}"/>
    <delete dir="${dist}"/>
  </target>
</project> 
```

### 编译 RoadRunner

现在我可以使用如下命令从项目目录的根目录编译 RoadRunner：

```
apache-ant-1.8.4\bin\ant -buildfile RoadRunner\build.xml 
```

输出是新`RoadRunner\build`目录中的一组类文件。

我已将此命令保存到名为`Compile RoadRunner.bat`.

我认为我应该至少将 Ant 项目和批处理脚本提交到我的项目中，但我不确定其余的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T07:09:30.997

> 通过向 RoadRunner 源代码添加构建文件，我创建了一个通用的构建过程。这算作修改项目吗？

## 是的，它确实

任何有助于**重现构建**的东西都是项目历史的一部分。
任何已生成或已构建的内容（如第三方库）都应存储在源代码控制引用之外（理想情况下，在[Nexus](http://www.sonatype.org/nexus/)等工件存储库中），并且仅在构建文件中*声明。*

在您的情况下，提交您需要的任何内容，以便其他开发人员能够：

*   克隆
*   启动构建（它将找到所有必要的依赖项）
*   测试由所述构建产生的结果交付。

# ruby-on-rails - 查找每个有用户 XXX 评论的主题

> ID：13262220
> 
> 赞同：1
> 
> 时间：2012-11-07T01:57:33.847
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1

正如标题所述，我想知道，在编写联接之前，是否有办法在 Rails 中编写此查询。

我需要找到每个有来自用户 XXX 的帖子的主题。对于 Rails 中的此类查询，哪些方法被认为是“正确的”？

**编辑1：**

我的模型实际上是这些：

*   话题 has_many 评论
*   评论belongs_to用户
*   评论belongs_to 主题
*   用户 has_many 评论
*   用户 has_many 主题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T02:32:59.207

试试这个：

```
Topic.joins(:comments).where('comments.user_id = ?', user.id).uniq 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T02:35:05.230

如果您想匹配用户名，请从我的头顶开始：

```
Topic.joins(:comments => :user).where("users.name" => "xxx") 
```

# c++ - 将 Botan SHA256 输出转换为 base64 以匹配 .NET SHA256Managed().ComputeHash()

> ID：13262225
> 
> 赞同：0
> 
> 时间：2012-11-07T01:58:04.560
> 
> 标签：c++, qt, cryptography, botan

我正在将 .NET 应用程序的一部分移植到 Linux 上的 Qt。我正在尝试复制 .NET 函数的结果以创建密码 + 盐的 SHA-256 哈希。.NET 代码是

```
return new SHA256Managed().ComputeHash(buffer); 
```

我有创建哈希的代码，但它不是一种允许我将它嵌入到 json 对象中的形式。

```
// create the hash of the salt+password
Botan::SecureVector<Botan::byte> passwordHash = HashData(salt,StringToArray(m_password));
// convert to a QByteArray
QByteArray qPasswordHash;
for(uint i=0; i<passwordHash.size();++i){
    qPasswordHash[i]= passwordHash[i];
} 
```

作为参考，StringToArray 方法如下所示

```
QByteArray StringToArray(QString szInput){
    QByteArray buffer = szInput.toUtf8().data();
    return buffer;
} 
```

qPasswordHash 是否需要通过 Base64 过滤器（例如[文档](http://botan.randombit.net/doxygen/classBotan_1_1Base64__Encoder.html#a123d6ba8ff59c02636e00f87a5dc9a8c)中显示的过滤器）才能匹配 .NET 类的输出？如果是这样，您能否指出示例代码或提供使用此 Botan 方法的正确语法示例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T10:01:55.543

最常见的方法是使用十六进制编码，即每个字节在字符串中表示为 2 位十六进制数字。这比 Base64 更容易实现。

# c# - Mouse activity slowing down WPF graphics demo

> ID：13262226
> 
> 赞同：0
> 
> 时间：2012-11-07T01:58:11.663
> 
> 标签：c#, wpf

Below is a small graphics demo in WPF. It looks something like this:

![enter image description here](../Images/1268608ef321b6c57f9e4bebccbbd60b.png)

When it's running, if I move the mouse around the main area of the window, the animation slows down (at least on my system). If I move the mouse pointer out of the window entirely, the animation come back up to speed.

Any suggestions for how to prevent the mouse movement interfering with the animation speed?

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using System.Threading;
using System.Windows.Threading;

namespace WPF_Golden_Section
{
    class DrawingVisualElement : FrameworkElement
    {
        public DrawingVisual visual;

        public DrawingVisualElement() { visual = new DrawingVisual(); }

        protected override int VisualChildrenCount { get { return 1; } }

        protected override Visual GetVisualChild(int index) { return visual; }
    }

    public static class CanvasUtils
    {
        public static Canvas SetCoordinateSystem(this Canvas canvas, Double xMin, Double xMax, Double yMin, Double yMax)
        {
            var width = xMax - xMin;
            var height = yMax - yMin;

            var translateX = -xMin;
            var translateY = height + yMin;

            var group = new TransformGroup();

            group.Children.Add(new TranslateTransform(translateX, -translateY));
            group.Children.Add(new ScaleTransform(canvas.ActualWidth / width, canvas.ActualHeight / -height));

            canvas.RenderTransform = group;

            return canvas;
        }
    }

    public static class ColorUtils
    {
        public static Color Write(this Color color)
        {
            Console.Write("Color[{0} {1} {2} {3}]", color.A, color.R, color.G, color.B);

            return color;
        }

        static byte ColorComponentToByte(double n)
        {
            return 
                (byte)
                    Math.Round(Math.Min(Math.Max(n, 0), 1) * 255);
        }

        public static Color Rgb(double r, double g, double b)
        {
            return
                Color.FromRgb(
                    ColorComponentToByte(r),
                    ColorComponentToByte(g),
                    ColorComponentToByte(b));
        }

        public static Color SetArgb(this Color color, double a, double r, double g, double b)
        {
            color.A = ColorComponentToByte(a);
            color.R = ColorComponentToByte(r);
            color.G = ColorComponentToByte(g);
            color.B = ColorComponentToByte(b);

            return color;
        }
    }

    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

            Width = 600;
            Height = 600;

            var dockPanel = new DockPanel();

            Content = dockPanel;

            var slider =
                new Slider()
                {
                    Minimum = 0.1,
                    Maximum = 10,
                    LargeChange = 0.001,
                    Value = 1
                };

            dockPanel.Children.Add(slider);

            DockPanel.SetDock(slider, Dock.Top);

            var incrementSlider =
                new Slider()
                {
                    Maximum = 0.001,
                    Minimum = 0.00001,
                    Value = 0.0001
                };

            dockPanel.Children.Add(incrementSlider);

            DockPanel.SetDock(incrementSlider, Dock.Top);

            var pauseButton = new Button() { Content = "Pause" };

            dockPanel.Children.Add(pauseButton);

            DockPanel.SetDock(pauseButton, Dock.Top);

            var canvas = new Canvas();

            dockPanel.Children.Add(canvas);

            DockPanel.SetDock(canvas, Dock.Top);

            SizeChanged += (s, e) => canvas.SetCoordinateSystem(-400, 400, -400, 400);

            var element = new DrawingVisualElement();

            Action draw = () =>
                {
                    canvas.Children.Clear();

                    // var element = new DrawingVisualElement();

                    using (var dc = element.visual.RenderOpen())
                    {
                        for (var i = 0.0; i < 720.0; i += slider.Value)
                        {
                            var radius = Math.Sin(i / 720.0 * Math.PI) * 30;

                            var phi = (1 + Math.Sqrt(5)) / 2;

                            var omega = 2 * Math.PI * (phi - 1) * i;

                            var x = Math.Cos(omega) * 0.5 * i;
                            var y = Math.Sin(omega) * 0.5 * i;

                            dc.DrawEllipse(
                                new SolidColorBrush(ColorUtils.Rgb(i / 360.0, i / 360.0, 0.25)),
                                new Pen(Brushes.Black, Math.Max(radius / 6, 1)),
                                new Point(x, y),
                                radius / 2,
                                radius / 2);
                        }
                    }

                    canvas.Children.Add(element);
                };

            slider.ValueChanged += (s, e) =>
            {
                Title = slider.Value.ToString() + "     " + incrementSlider.Value;
                draw();
            };

            var timer = new DispatcherTimer();

            timer.Tick += (s, e) =>
                {
                    if (slider.Value < 10.0)
                        slider.Value += incrementSlider.Value;
                };

            timer.Start();

            pauseButton.Click += (s, e) =>
                {
                    if (timer.IsEnabled)
                        timer.Stop();
                    else
                        timer.Start();
                };

            slider.Value = 3.5;
            incrementSlider.Value = 0.00001;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T07:30:39.060

如果您在 WPF 中使用第三个 Animation 选项，CompositionTarget.Rendering 事件，那么我发现没有减速。我已经从带有slider.ValueChanged的行中调整了示例中的代码：

```
 slider.Value = 3.5;
        incrementSlider.Value = 0.00001;

        EventHandler renderer = (s, e) =>
        {
            if (slider.Value < 10.0)
                slider.Value += incrementSlider.Value;

            //Title = slider.Value.ToString() + "     " + incrementSlider.Value;
            draw();
            _frameCounter++;
        };

        CompositionTarget.Rendering += renderer;
        pauseButton.Click += (sender, args) => CompositionTarget.Rendering -= renderer;

        var timer = new DispatcherTimer();
        timer.Interval = TimeSpan.FromMilliseconds(1000);
        timer.Tick += (s, e) =>
                          {
                              Title = string.Format("fps: {0}", _frameCounter);
                              _frameCounter = 0;
                          };

        timer.Start(); 
```

除非机器负载很重，否则 CompositionTarget.Rendering 会以固定的 60 fps 速率触发。您可以在 Internet 上找到代码来调整丢帧并避免明显的减速。

由于您的示例中的鼠标活动导致减速，我没有很好的解释。我的第一个想法是它是路由事件的瓶颈，但是通过从 ValueChanged 事件中提取 draw 方法来调整计时器间隔或重构似乎并没有解决问题。

顺便说一句，我喜欢你的样品。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T02:13:59.723

可能是命中测试。您可以尝试在 Canvas 上将[IsHitTestVisible](http://msdn.microsoft.com/en-us/library/system.windows.uielement.ishittestvisible.aspx)设置为 false。

# ruby-on-rails - 在 Rails 中定义自定义方法

> ID：13262230
> 
> 赞同：1
> 
> 时间：2012-11-07T01:59:07.367
> 
> 标签：ruby-on-rails, methods, routes

我刚刚开始使用 Rails，我正在尝试构建一个银行应用程序。我在设置帐户之间的交易时遇到问题。

我目前已经搭建了交易和账户。在我的交易页面中，我可以为每笔交易创建一个交易列表，其中包含有关源账户、转账金额和目标账户的信息。但是，在页面末尾，我想要一个链接或按钮来处理页面上的所有事务并清除页面。因此，修改所有指定的帐户余额。

以下是我采取的步骤。

**1）**在事务模型（transaction.rb模型）中定义流程方法

```
class Transaction < ActiveRecord::Base
    def proc (transaction) 
        # Code processes transactions
        @account = Account.find(transaction.from_account)
        @account.balance = @account.balance - transaction.amount
        @account.update_attributes(params[:account]) #update the new balance
end
end 
```

**2）**然后在事务控制器调用execute中创建一个方法

```
def execute
      @transaction = Transaction.find(params[:id])
    proc (@transaction)
    @transaction.destroy

      respond_to do |format|
      format.html { redirect_to transactions_url }
      format.json { head :no_content }
  end 
```

**3）**然后定义要在交易页面上显示的链接（如下所示）：

```
<% @transactions.each do |transaction| %>
  <tr>
    <td><%= transaction.from_account %></td>
    <td><%= transaction.amount %></td>
    <td><%= transaction.to_account %></td>
    <td><%= link_to 'Execute', transaction, confirm: 'Are you sure?', method: :execute %></td>
    <td><%= link_to 'Show', transaction %></td>
    <td><%= link_to 'Edit', edit_transaction_path(transaction) %></td>
    <td><%= link_to 'Destroy', transaction, confirm: 'Are you sure?', method: :delete %></td>
    <td><%= transaction.id%></td>
 </tr>
<% end %> 
```

4) 但是当我单击执行链接时，我收到路由错误：[POST] "/transactions/6"

目前我的路线（routes.rb）设置如下：

```
resources :transactions do
       member do
       post :execute
       end
   end

  resources :accounts 
```

如何设置路线以便它可以处理我的方法？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T02:51:41.453

您在这里尝试做的不是添加新方法，而是添加新的“HTTP 动词”。不要这样做。您可能会收到这样的讨厌消息：

```
 !! Unexpected error while processing request: EXECUTE, accepted HTTP methods are OPTIONS,
 GET, HEAD, POST, PUT, DELETE, TRACE, CONNECT, PROPFIND, PROPPATCH, MKCOL, COPY, MOVE, LOCK, 
UNLOCK, VERSION-CONTROL, REPORT, CHECKOUT, CHECKIN, UNCHECKOUT, MKWORKSPACE, UPDATE, LABEL,
 MERGE, BASELINE-CONTROL, MKACTIVITY, ORDERPATCH, ACL, SEARCH, and PATCH 
```

在控制台中运行“ `rake routes`”并确保您已注册执行路线。就像是：

```
execute_transaction 
```

然后更新您的执行链接并用正确的路径查找器替换“事务”，并将方法设置为 :post 。

```
link_to "Execute", execute_transaction_path(transaction), method: :post 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T02:06:12.490

小区别：将方法名称从符号更改为字符串。

```
resources :transactions do
  member do
    post "execute"
  end
end 
```

查看[Rails 路由指南](http://guides.rubyonrails.org/routing.html#adding-more-restful-actions)

# jquery - JQuery radio buttons

> ID：13262234
> 
> 赞同：0
> 
> 时间：2012-11-07T01:59:25.717
> 
> 标签：jquery, radio-button, alert

I have two radio buttons:

```
<table border="0" width="500"> 
    <tr><td><?php echo form_label('Register with a Club', 'club'); ?>&nbsp;<?php echo form_radio('individual', 'club', '', 'id=club'); ?></td><td><?php echo form_label('Register as an Independent', 'independent'); ?>&nbsp;<?php echo form_radio('individual', 'independent', '', 'id=independent'); ?></td></tr>
    </table> 
```

this spits out:

```
<table border="0" width="500"> 

    <tr><td><label for="club">Register with a Club</label>&nbsp;<input type="radio" name="individual" value="club" id=club /></td><td><label for="independent">Register as an Independent</label>&nbsp;<input type="radio" name="individual" value="independent" id=independent /></td></tr>
    </table> 
```

I am trying to alert out the value of the of the radio button group....I have tried...

```
<script type="text/javascript">
$(function(){
 alert($("input[name='individual']").val());
    });
</script> 
```

but it returns only 'club' once, why is not alerting 'independent'?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T02:03:47.840

You'll need to alert the value of the radio button that is actually checked, otherwise it will just return the value of the first element in the selection, which is "club", always :

```
$(function(){ 
    $("input[name='individual']").on('change', function() {
        alert($("input[name='individual']:checked").val());
    });
});
    ​ 
```

[**FIDDLE**](http://jsfiddle.net/KMY4E/)

If you need both values (or more if there are more radio buttons in the group), you have to iterate over them:

```
$(function(){ 
    var values=[];
    $.each($('input[name="individual"]'), function(i,elm) {
        values.push(elm.value);
    });
    alert(values.join(', '));
}); 
```

[**FIDDLE**](http://jsfiddle.net/KMY4E/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T02:03:01.340

Your code will only get the value of the first element. If you get the length you'll in fact see that it grabs all inputs:

```
$("input[name='individual']").length 
```

If you want to alert all values you need to loop:

```
$("input[name='individual']").each(function() { alert( this.value ); }); 
```

If what you want is to get the value of current checked input:

```
$("input[name='individual']:checked").val() 
```

# lotus-notes - 使用 LotusScript 在 Domino 目录中重命名和更改用户的 OU/部门？

> ID：13262235
> 
> 赞同：0
> 
> 时间：2012-11-07T01:59:49.613
> 
> 标签：lotus-notes, lotus-domino, lotusscript

我怎么做？我正在尝试 NotesAdministrationProcess 但帮助文件中缺少一些示例。搜索网络很困难，因为这些方法很少记录在案。目前我正在使用 RenameNotesUser 重命名用户，但只有当我在服务器上运行“tell adminp process new”时才会发生更改。发送重命名请求后如何自动重命名？

我也没有改变用户的 OU/Department 的运气。我应该使用哪种方法？当前使用 RecertifyUser 但它会弹出一个关于验证者 ID 不是某物的祖先的错误。例如，我想将用户从技术部门移动到销售部门（John/Technical/ACME 到 John/Sales/ACME）。在 Domino Administrator 中使用销售 ID 手动重新认证 John 可以正常工作。我还希望用户的 OU 更改立即生效，而无需告诉 Domino 控制台对其进行处理。

上述 2 个进程不必同时运行，因为用户不能同时更改名称和 OU。下面是我使用的测试代码/代理（如果我想运行重新认证代码，我会注释重命名代码，反之亦然）：

```
Dim s As New NotesSession
Dim db As NotesDatabase
Dim vw As NotesView, doc As NotesDocument
Dim adminp As NotesAdministrationProcess
Dim svr$, path$, cert$, pwd$, staffid$, newlastname$

svr="" 'server1/ACME
path="" 'names.nsf
cert="" 'for rename(C:\tech.id), for recertify(C:\sales.id)
pwd="" 'for rename(tech), for recertify(sales)
staffid="" 'A0001(John's ID)
newlastname="" 'James

Set db=s.Getdatabase(svr, path, False)
Set adminp=s.Createadministrationprocess(svr)
adminp.Certifierfile=cert
adminp.Certifierpassword=pwd

Set vw=db.Getview("People\by Staff Number")
Set doc=vw.Getdocumentbykey(staffid, True)

'for rename. our company only use the last name as name
Call adminp.Renamenotesuser(doc.FullName(0), newlastname)

'for change ou
Call adminp.Recertifyuser(doc.FullName(0)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T16:52:07.710

我找到了 2 个可能有帮助的链接。

[http://xprentice.gbs.com/A55BAC/keithstric.nsf/default.xsp?documentId=23303E4527F3A89B8525793B0061CB37](http://xprentice.gbs.com/A55BAC/keithstric.nsf/default.xsp?documentId=23303E4527F3A89B8525793B0061CB37)

和

[http://www-10.lotus.com/ldd/nd85forum.nsf/dba3ca7e515d55ff85256a0700727b35/07fc34e0ad09cea0852578b0003dad49?OpenDocument](http://www-10.lotus.com/ldd/nd85forum.nsf/dba3ca7e515d55ff85256a0700727b35/07fc34e0ad09cea0852578b0003dad49?OpenDocument)

第二个链接中的人做了层次结构的移动和重命名。他们显然遇到了与您一开始相同的错误。

MoveUserInHierarchyRequest MoveUserInHierarchyComplete RenameNotesUser

希望这可以帮助。

# jquery - 'next' 和 'prev' 的 jQuery Cycle 插件倍数值

> ID：13262241
> 
> 赞同：0
> 
> 时间：2012-11-07T02:02:10.557
> 
> 标签：jquery, css, jquery-cycle

我想让它与类`.image`和链接一起使用[jQuery Cycle Plugin](http://jquery.malsup.com/cycle/)`#next`推进幻灯片放映。我尝试了下面的代码，但只有工作，而不是两个值。有没有办法使用这个插件为 the和值设置两个值？谢谢！`#next``next``prev`

```
$(document).ready(function() {
        $('#slideshow').cycle({
            fx: 'fade',
            timeout: 0,
            next: '.image' && '#next',
            prev: '#prev',
            speed: 500
        });
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T02:08:55.440

只是我们自己想通了！这是其他好奇的语法：

```
$(document).ready(function() {
        $('#slideshow').cycle({
            fx: 'fade',
            timeout: 0,
            next: '.image, #next',
            prev: '#prev',
            speed: 500
        });
    }); 
```

# javascript - 重命名 Typescript 文件

> ID：13262244
> 
> 赞同：7
> 
> 时间：2012-11-07T02:02:50.913
> 
> 标签：javascript, visual-studio-2012, typescript

可能是我错过了这个（或者可能是我太累了：P）。在 Typescript 项目的 Visual Studio 2012 中，当我重命名一个 ts 文件时，不是重命名与该 ts 文件链接的 js 文件，而是创建一个新文件。

例如：
旧情况：(file1.ts --> file1.js) 重命名后：(file1337.ts --> file.js) + file1337.js //file1337 不包含在项目中，我需要手动执行...

那么有没有一种方法可以同时重命名 ts 文件和直接与该文件链接的 js，而无需创建新文件并且必须在项目中手动添加新的 js 文件？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T09:28:36.593

我发现如果删除关联的 .js 文件和任何源映射（即在解决方案资源管理器中删除嵌套在 .ts 内的文件），然后重命名 .ts 文件，然后重新编译，会重新生成 .js 文件使用新名称，并自动添加到项目中（只要 .ts 文件已经存在）。

我应该补充一点，我已经安装了[WebEssentials](http://visualstudiogallery.msdn.microsoft.com/07d54d12-7133-4e15-becb-6f451ea3bea6) - 我不知道这种行为有多少是由于这个，以及有多少是 VS 原生的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T08:57:43.463

Visual Studio 扩展中存在细微的差距，这意味着重命名没有得到完美处理。

最简单的选择是创建一个具有正确名称的新文件，移动内容并删除旧文件。

稍微困难的选项是在重命名后手动编辑项目文件以更新关联。

使用 Web Essentials，您会遇到类似的问题，即重命名的文件与错误命名的 JavaScript 和 Map 文件相关联，您必须对其进行调整才能使其正常工作。仍然感觉最干净的选择是添加一个新文件并传输内容而不是重命名。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-01T11:30:24.383

这是一个老问题，但在 Visual Studio 2015 中也存在这个问题。在项目 BuildEvents Pre-build 事件命令行中，您可以插入以下代码：

```
del /S /Q "$(ProjectDir)\path\to\ts\code\*.js" && del /S /Q "$(ProjectDir)\path\to\ts\code\*.js.map" 
```

此命令将在项目构建之前删除所有生成的 .js 和 .js.map 文件。

# android - 如何延长 facebook 长寿命（仍然有效即将到期）令牌？

> ID：13262247
> 
> 赞同：0
> 
> 时间：2012-11-07T02:03:07.270
> 
> 标签：android, facebook, facebook-access-token

如何在 Android 平台上延长 facebook 长寿命（仍然有效即将到期）令牌？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T05:17:39.383

要扩展令牌，请调用`extendAccessTokenIfNeeded`以扩展当前访问令牌。但是，这仅在用户安装了原生 Facebook for Android 应用程序时才有效。如果用户没有安装原生 Facebook 应用，我们的 SDK 目前不支持扩展访问令牌。

要手动执行此操作，您必须编写自己的网络代码来发出请求

```
https://graph.facebook.com/oauth/access_token?
client_id=APP_ID& client_secret=APP_SECRET& grant_type=fb_exchange_token& fb_exchange_token=EXISTING_ACCESS_TOKEN 
```

并解析新访问令牌的响应。

我们针对此问题的文档可在此处找到：[https ://developers.facebook.com/docs/mobile/android/build/#extend_token](https://developers.facebook.com/docs/mobile/android/build/#extend_token)

# android - ADFS can be implemented in Mono for Android

> ID：13262252
> 
> 赞同：1
> 
> 时间：2012-11-07T02:04:53.790
> 
> 标签：android, active-directory, xamarin.android, adfs, ws-trust

I'm making an application that must be connected to an ADFS. I wonder if it is possible in MonoDroid. Investigating I found a code for Windows Phone but MonoDroid no such classes. The code is

```
 var client = new WSTrustClient(new WSTrustBindingUsernameMixed(),new EndpointAddress("https://adfsserver.domain.com/adfs/services/trust/13/usernamemixed"),
                       new UsernameCredentials("DOMAIN\\user", "user password"));

        client.IssueCompleted += new EventHandler<IssueCompletedEventArgs>(client_IssueCompleted);
        var rst = new RequestSecurityToken(WSTrust13Constants.KeyTypes.Symmetric)
        {   
            AppliesTo = new EndpointAddress("https://yourRelayParty.domain.com/")
        };

        client.IssueAsync(rst); 
```

# c# - 如何通过FTP上传文件夹？

> ID：13262253
> 
> 赞同：-3
> 
> 时间：2012-11-07T02:04:56.313
> 
> 标签：c#, windows, forms, upload, ftp

我正在尝试通过 FTP 上传文件夹（及其内容），但是当我尝试这样做时，我不断收到错误消息，提示未选择任何文件。

**你知道有什么方法可以让它上传文件夹及其内容吗？**

这是我正在使用的代码。（我想上传插件文件夹中的所有文件）：

```
UploadFile(@"C:\\MainPlugins\\Plugins", "ftp://testsiteurl.com/public_html/wp-content/plugins/test plugin", "username", "password"); 
```

这是我正在使用的子：

```
public void UploadFile(string _FileName, string _UploadPath, string _FTPUser, string _FTPPass)
{
    System.IO.FileInfo _FileInfo = new System.IO.FileInfo(_FileName);

    // Create FtpWebRequest object from the Uri provided
    System.Net.FtpWebRequest _FtpWebRequest = (System.Net.FtpWebRequest)System.Net.FtpWebRequest.Create(new Uri(_UploadPath));

    // Provide the WebPermission Credintials
    _FtpWebRequest.Credentials = new System.Net.NetworkCredential(_FTPUser, _FTPPass);

    // By default KeepAlive is true, where the control connection is not closed
    // after a command is executed.
    _FtpWebRequest.KeepAlive = false;

    // set timeout for 20 seconds
    _FtpWebRequest.Timeout = 20000;

    // Specify the command to be executed.
    _FtpWebRequest.Method = System.Net.WebRequestMethods.Ftp.UploadFile;

    // Specify the data transfer type.
    _FtpWebRequest.UseBinary = true;

    // Notify the server about the size of the uploaded file
    _FtpWebRequest.ContentLength = _FileInfo.Length;

    // The buffer size is set to 2kb
    int buffLength = 2048;
    byte[] buff = new byte[buffLength];

    // Opens a file stream (System.IO.FileStream) to read the file to be uploaded
    System.IO.FileStream _FileStream = _FileInfo.OpenRead();

    try
    {
        // Stream to which the file to be upload is written
        System.IO.Stream _Stream = _FtpWebRequest.GetRequestStream();

        // Read from the file stream 2kb at a time
        int contentLen = _FileStream.Read(buff, 0, buffLength);

        // Till Stream content ends
        while (contentLen != 0)
        {
            // Write Content from the file stream to the FTP Upload Stream
            _Stream.Write(buff, 0, contentLen);
            contentLen = _FileStream.Read(buff, 0, buffLength);
        }

        // Close the file stream and the Request Stream
        _Stream.Close();
        _Stream.Dispose();
        _FileStream.Close();
        _FileStream.Dispose();
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.Message, "Upload Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T02:55:41.480

您的 URI 不正确，您需要在 URI 中指定文件名。

```
// Create FtpWebRequest object from the Uri provided
    System.Net.FtpWebRequest _FtpWebRequest = (System.Net.FtpWebRequest)System.Net.FtpWebRequest.Create(new Uri(_UploadPath + "/" + _FileInfo.Name)); 
```

此外，请考虑为您的流使用“使用”关键字，以便在出现异常时正确处理它们。

```
using (System.IO.FileStream _FileStream = _FileInfo.OpenRead())
                {

                    // Stream to which the file to be upload is written

                    using (System.IO.Stream _Stream = _FtpWebRequest.GetRequestStream())
                    {
                        // Read from the file stream 2kb at a time
                        int contentLen = _FileStream.Read(buff, 0, buffLength);

                        // Till Stream content ends
                        while (contentLen != 0)
                        {
                            // Write Content from the file stream to the FTP Upload Stream
                            _Stream.Write(buff, 0, contentLen);
                            contentLen = _FileStream.Read(buff, 0, buffLength);
                        }

                        //No need to Close the file stream and the Request Stream

                    }
                } 
```

# java - 在 Nutch 1.5 中使用 HtmlParseFilter 和 Tika 解析器

> ID：13262254
> 
> 赞同：1
> 
> 时间：2012-11-07T02:05:09.043
> 
> 标签：java, nutch

我想做的是：编写一个 Nutch 插件，从每个抓取的页面接收解析的数据。我知道这`HtmlParseFilter`可以满足我对 HTML 页面的需求，但我也想处理其他类型的内容。当 Tika 解析 PDF 或 Word 文档时，它会将结果传递给我的注册文件`HtmlParseFilter`吗？如果没有，还有其他方法可以拦截 Tika 的输出吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T06:56:24.400

HtmlParseFilter 确实处理所有内容类型（Tika 可以）。它已在 2.x 分支中重命名为 ParseFilter 以更准确地反映它的作用。

# vb.net - Split an array in Visual Basic

> ID：13262256
> 
> 赞同：0
> 
> 时间：2012-11-07T02:05:14.117
> 
> 标签：vb.net

I have a list of names with scores in lstInput (a listbox) that looks something like this:

```
Name1,100,200,300
Name2,100,200,300
Name3,100,200,300 
```

...etc...

I need to split the array into a string and print the results of the person's name and the scores that are separated by a comma.

What I have so far is the following:

```
For s As Integer = 0 To lstInput.Items.Count - 1
    lstOutput.Items.Add(lstInput.Items(s))
Next 
```

Now, that displays the entire list, but I need to split the list into strings so that they display on their own: e.g. Name1 100 200 300

...etc..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T02:20:52.800

我可能要疯了，但我认为 OP 想要这样的东西：

```
For s As Integer = 0 To lstInput.Items.Count - 1
  lstOutput.Items.Add(String.Join(" ", CType(lstInput.Items(s), String).Split(",")))
Next 
```

这段代码的目的是未知的，但它最终删除了逗号，所以这`Name1,100,200,300`变成了这个`Name1 100 200 300`（就在问题之后）。我想我可以这样做`String.Replace`，但它并不那么酷。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T02:15:38.437

```
For s As Integer = 0 To lstInput.Items.Count - 1
    dim items As String() = lstInput.Items(s).Split(",".ToCharArray()) 'splits into array of 4 elements

    dim name As String = items(0) 'first element is name
    dim score1 As String = items(1) 'second element is first score

    -- now do the rest yourself

    -- listOutput.Items.Add( concatenate name and the scores here)
Next 
```

# java - Illegal argument on start process

> ID：13262259
> 
> 赞同：0
> 
> 时间：2012-11-07T02:05:30.307
> 
> 标签：java, android, linux, process, runtime

I have some console utility. I start process to execute this utility with some parameters. One parameter is filename.

If filename is not contains spaces, all worked. But with spaces I get error from utility: "no such file or directory". If I set filename parameter, still do not work. But interested: if I call utility from command line (not from android/java), all worked. If I replace space on %20, anyway do not work:

1) filename (original): util dir\some test.txt - not worked (java, cmd). It's normal.

2) filename (quates): util "dir\some test.txt" - work in cmd and do not work in java.

3) filename (encode): util "dir\some%20test.txt" - not worked (java, cmd).

PS: utility is ffmpeg

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T02:06:46.780

Use `dir\\some test.txt` or `dir/some test.txt` in Java.

**Please Note:** `\` is an special character(escape) in Java. If you need to use `\` as literal as in your example, it should be escaped an addition `\` character.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T02:39:57.317

我假设您正在尝试`util "dir\some test.txt"`在 Java 中运行，如下所示：

```
System.exec("util \"dir\\some test.txt\""); 
```

或类似的东西。如果是这样，那么问题在于该`exec`方法将命令字符串拆分为参数的简单方式。它只是将任何空白字符序列视为参数分隔符**，而与引用无关**。所以，上面实际上是传递`util`命令参数`"dir\some`和`test.txt"`......这将导致它找不到文件。

处理这个问题的最好方法是使用`exec`传递字符串数组的重载；例如

```
System.exec(new String[]{"util", "dir\\some test.txt"}); 
```

* * *

作为记录：

*   `util "dir\some test.txt"`在 CMD 中工作，因为 CMD 语言支持使用双引号进行引用。你可以用 POSIX shell 做类似的事情。

*   `util "dir\some%20test.txt"`失败是因为 CMD 语言不理解百分比转义。URL 中使用了百分比转义 ... 除非相关命令需要 URL 参数，否则它将将该`%`字符视为普通文件名字符。

最后，“随机”尝试不同类型的引用和转义并不是解决问题的好方法。在尝试解决问题之前，您应该真正尝试了解问题...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T02:24:44.577

当您启动程序时，每个空格都注册为一个新的“arg”，因此将其拆分为空格意味着程序认为有更多的 args，而不是按照您希望的方式读取文件名。引号仅在 CMD 中有效，因为语法旨在让它如此。你需要一个转义键尝试双反斜杠“\\”并在这里查看[llegal-escape-character-followed-by-a-space](https://stackoverflow.com/questions/9532596/llegal-escape-character-followed-by-a-space)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T03:01:23.740

我知道特殊字符。我没有手动设置文件名。我有一些文件，使用`getAbsoluteFile()`和所有反斜杠都可以。

我执行过程为：

```
 ProcessBuilder pbuilder = new ProcessBuilder(cmd);
    Process proc = pbuilder.start(); 
```

其中 cmd 是我的命令：*util filename*。

**升级版：**

现在使用带有参数 String[] 的 ProcessBuilder。工作。

# android - Creating AVD screen based on physical device

> ID：13262263
> 
> 赞同：1
> 
> 时间：2012-11-07T02:06:40.187
> 
> 标签：android

I have a Android tablet and I want to create an Android Virtual Device (AVD) whose screen is as close to the physic device as possible (in terms of size and resolution).

I tried copying the resolution from the device settings, but the size of things in the emulator screen still look different. The device reports it's density is xlarge, but (as far as I understand) these density aliases are approximations anyway.

Is there a way (even an app that I would install on the device) to know what settings I have to create the AVD with to get a equivalent screen?

The device is not from a major manufacturer, it's unlikely that I will find a 'ready-made' AVD.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-02T16:04:17.443

当我尝试在 AVD 管理器中手动设置屏幕的宽度和高度时。我发现即使我正确地放入了这些，我的虚拟设备仍然看起来不正确。

只有当我输入“尺寸”时，它才能正常工作。“尺寸”是设备屏幕对角的对角线测量值。例如：从左上角到右下角。

我意识到这可能是一个旧帖子，但有人可能会偶然发现它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T03:35:32.427

当您转到 AVD 管理器并创建新...设备时，您可以通过手动调整皮肤分辨率来设置屏幕尺寸。启动该设备后，它会询问您是否要使用该分辨率或调整到实际屏幕尺寸。

# actionscript-3 - {AS3} addChild() in a Class does not work

> ID：13262264
> 
> 赞同：2
> 
> 时间：2012-11-07T02:06:40.607
> 
> 标签：actionscript-3, flash, class, private, addchild

so I have a class:

```
package
{
    public final class Main extends Sprite
    {
        private var TextHolder:Sprite = new Sprite();

        public function Main():void
        {
            spawnHolder();
        }
        private function spawnHolder():void
        {
            TextHolder.graphics.beginFill(0xFFFFFF);
            TextHolder.graphics.drawRect(0, 0, 100, 80);
            TextHolder.graphics.endFill();
            stage.addChild(TextHolder);
        }
    }
} 
```

but the problem is.. I do not see anything on the stage.. This Main Class is the document class btw.

I'd appreciate it very much if anyone could help me out! Thanks in advance.

~Gg

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T14:02:29.627

在将显示对象添加到舞台之前，舞台不可用。在这种情况发生之前它将为空。

```
package
{
    public final class Main extends Sprite
    {
        private var TextHolder:Sprite = new Sprite();

        public function Main():void
        {
            this.addEventListener(Event.ADDED_TO_STAGE,spawnHolder);
        }
        private function spawnHolder():void
        {
            TextHolder.graphics.beginFill(0xFFFFFF);
            TextHolder.graphics.drawRect(0, 0, 100, 80);
            TextHolder.graphics.endFill();
            stage.addChild(TextHolder);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T02:43:05.437

尝试更改颜色，可能您的文档背景也是白色的。不要用大写的命名变量 like `TextHolder`，`textHolder`而是使用。尝试在阶段初始化后完成所有工作。

# javascript - JQuery: image gallery slide image down as well as fade in src

> ID：13262266
> 
> 赞同：2
> 
> 时间：2012-11-07T02:06:47.047
> 
> 标签：javascript, jquery, html, image, animation

I have the following code that swaps a primary image when a thumbnail is clicked:

```
$('#thumbs img').click(function(){
    var imgsrc = $(this).attr('src');

    $('#mainphoto img').fadeOut(function(){
       $(this).attr('src', imgsrc).fadeIn();
    });
}); 
```

There is a working example here: [http://clarkeconstructions.com.au/newsite/index.php?id=8](http://clarkeconstructions.com.au/newsite/index.php?id=8)

Some of the images are portrait shots and some are landscape (if you click the 2nd thumbnail in the example).

I want to be able to slide the image down to made the transition of landscape to portrait smoother but I am not sure how to go about it with my current code.

Would anyone be able to give me any hints as to what syntax I would use to accomplish this?

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T03:03:10.850

您可以使用的一个技巧是：

*   将所有原始图像大小存储在每个图像`data`属性中
*   将内部图像设置为 H: 100% 和 W: 100% 时为容器设置 W/H 动画

## *[jsBin 演示](http://jsbin.com/ujorit/10/edit)*

HTML：

```
<div id="projphotos">

  <div id="mainphoto"><img src="" /></div><!--MAINPHOTO-->

  <div id="projthumbs">
    <img src="images/image_1.jpg" /> 
    <img src="images/image_2.jpg" /> 
    <img src="images/image_3.jpg" /> 
  </div><!--PROJTHUMBS-->

</div> 
```

**CSS：**

```
#mainphoto{ /* roXon */
   border-radius: 5px 5px 5px 5px;
   box-shadow: 0 0 5px #888888;
   padding: 10px;
   display:inline-block;
   *dispaly:inline;
   zoom:1;
   width:0;
   height:0;
}
#mainphoto img{
   position:relative;
   margin:0 auto;
   vertical-align:middle;
   width:100%;
   height:100%;
}
#projphotos img {
    /* removed properties */
    background-image: url("tmpimages/billie_holiday.png");
} 
```

**jQuery（存储/使用原始图像大小来动画主图像父：）**

```
$(window).load(function(){

  var imgs = $('#projthumbs img');

  $.each(imgs, function(i, el){
    $('<img>', {"src": this.src}).load(function(){
      $(el).data({'h': this.height, 'w': this.width});
      if(i===0){
        $(el).click(); 
      }
    });
  });

  $('#projthumbs img').click(function(){ 
      var imgsrc = this.src;
      var orgSize = { h: $(this).data('h'), w: $(this).data('w') };

      $('#mainphoto img').stop().fadeTo(400,0,function(){
         $(this).attr('src', imgsrc).fadeTo(400,1);
         $('#mainphoto').animate({height: orgSize.h, width: orgSize.w },400);
      });
  });

  $('#projthumbs img').eq(0).click();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T02:57:49.493

试试这个，这里是工作示例：http: [//jsfiddle.net/mjaA3/216/](http://jsfiddle.net/mjaA3/216/)

**jQuery：**

```
var thumbs = $('ul.thumbHolder li');
var bigImg = $('.mask img');
//You need to mask your image for creating sliding it down effect.

thumbs.first().addClass('selected');
thumbs.click(function() {

    var imgsrc = $(this).children('img').attr('src');

    bigImg.animate({'top':'266px'},300,function() {
       bigImg.attr('src', imgsrc ).animate({'top':'0px'},300);
    });

    thumbs.removeClass('selected');
    $(this).addClass('selected');
}); 
```

**html:**

```
<div class="mask">
      <img width="270" src="http://sample1.jpg" />
</div>
<ul class="thumbHolder">
   <li>
      <img width="20" src="http://sample1.jpg" />
   </li>
   <li>
      <img width="20" src="http://sample2.jpg" />
   </li>
   <li>
      <img width="20" src="http://sample3.jpg" />
   </li>
</ul> 
```

**CSS：**

```
.mask {
        overflow:hidden; position:relative; left:0; top:0;
        float:left; margin:40px; width:400px; height:266px;
}
       .mask img { position:absolute; top:0px;left:0px; } 
```

不使用 src 的替代方式：http: [//jsfiddle.net/mjaA3/197/](http://jsfiddle.net/mjaA3/197/)

# python - python telnetlib 模块：读取并等待响应

> ID：13262276
> 
> 赞同：2
> 
> 时间：2012-11-07T02:08:12.317
> 
> 标签：python, response, wait, telnetlib

我遇到了与此海报类似的问题：

[Python telnetlib：令人惊讶的问题](https://stackoverflow.com/questions/4000957/python-telnetlib-surprising-problem/13262236#13262236)

请注意下面的回复和我的回复。

本质上 telnetlib 在调用任何读取函数时不会让我读取整个响应。

在 while 循环中使用 select.select([telnetobject],[],[]) 以确保读取可用之后调用 telnet.read_very_eager() 时，我唯一会得到的是几个字符。到目前为止，我能想出的唯一解决方案是使用 time.sleep() ，但它的解决方案太粗糙了，我正在寻找更适合的解决方案。任何帮助表示赞赏...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T23:09:32.777

我想我有同样的问题，我希望这些信息会有所帮助。就我而言，我正在连接到 Maya 中的 mel 和 python 端口，所以我不知道这种体验是否对您和您的情况有用。

*   [这个答案](https://stackoverflow.com/a/630258/164511)告诉我，我根本不需要 Telnet/telnetlib 来尝试 I/OI，并推荐[asynchat](http://docs.python.org/2/library/asynchat.html)。

*   事实证明，并非所有出现在服务器端的输出都可供客户端读取。在我使用 asynchat 作为第二个意见之前，我不知道这是可能发生的事情，并且无论我如何发送它，我仍然没有收到来自“print 'Complete Command'”的输出。（我试图写“打印'完成命令'”并阅读结果以了解我之前的命令何时完成。）

我最终调用了 mel 的警告命令，它确实产生了客户端可读的输出。发送无辜数据作为警告非常令人反感，但幸运的是，这是针对内部工具的。

*   telnetlib 似乎没有对写入进行排队。因此，我计划背靠背发送两个命令（真正的命令，然后是“命令完成”公告）并不总是有效。因此，似乎只有在您确切知道要 read_until() 的输出时才能读取 telnetlib 输出，或者您愿意睡觉直到怀疑输出完成为止。但是 asynchat.push() 肯定会按预期排队写入。

一个样本，在我还在弄清楚这一点时，要加一大粒盐：

```
class mayaClient(asynchat.async_chat) :

... 

def __init__(self, sock, clientType):

    asynchat.async_chat.__init__(self, sock=sock)

    self.clientType = clientType
    self.ibuffer = []
    self.obuffer = ""
    self.set_terminator("\r\n")
    self.cumulativeResponse = ""

@classmethod
def withSocket(cls, host, clientType, log) :

    melSocket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    portNumber = cls.MEL_PORT_NUMBER if clientType == cls.MEL else cls.PYTHON_PORT_NUMBER
    melSocket.connect((host, portNumber))   
    return cls(melSocket, clientType, log)

#############################################################
# pushAndWait
#############################################################
def pushAndWait(self, command, timeout=60) :
    """
    ACTION:     Push a command and a "command complete" indicator
                If command completed, return number of milliseconds it took
                If command timed out without completing, return -1

    INPUT:      command as string
                description (optional) as string for more informative logging
                timeout in seconds as int after which to give up

    OUTPUT:     X milliseconds if command completed
                -1 if not

    """

    self.found_terminator()

    incrementToSleep = .001

    self.push("%s\r\n"%command)

    responseToSeek = "Command Complete"
    self.push('Whatever command is going to create readable output for %s`); \r\n'%responseToSeek)

    timeSlept = 0
    while responseToSeek not in self.currentBufferString() and timeSlept < timeout :
        self.read()
        timeSlept += incrementToSleep
        time.sleep(incrementToSleep)

    if responseToSeek in self.currentBufferString() :
        return timeSlept

    return -1

#############################################################
# read
#############################################################
def read(self) :
    """
    ACTION:     Reads the current available output
                and stores it in buffer

    """

    try :

        self.collect_incoming_data(self.recv(1024))

    except Exception, e :

        # Don't worry about it -- just means there's nothing to read
        #
        pass

#############################################################
# currentBuffer
#############################################################
def currentBuffer(self) :

    return self.ibuffer

#############################################################
# currentBufferString
#############################################################
def currentBufferString(self) :

    return "".join(self.ibuffer)

#############################################################
# collect_incoming_data
#############################################################
def collect_incoming_data(self, data):
    """Buffer the data"""

    self.ibuffer.append(data)   

#############################################################
# found_terminator
#############################################################
def found_terminator(self):

    print "Clearing --%s...-- from buffer"%self.currentBufferString()[0:20]
    self.ibuffer = [] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-07T09:07:22.110

聚会迟到了，但这对 telnetlib 是可行的。下面将读取所有行，直到没有任何内容。`timeout=0.1`为响应的到达增加了一些时间。

```
try:
    while True:             # read until we stop
        message = session.read_until(b'\n', timeout=0.1)
        if message == b'':  # check if there was no data to read
            break           # now we stop
        print(message)      # print message if not stopped
except EOFError:            # If connection was closed
    print('connection closed') 
```

或者，如果您总是想等待响应：

```
try:
    message = session.read_until(b'\n') # Will not timeout until you have response
    print(message)
    while True:             # read until we stop
        message = session.read_until(b'\n', timeout=0.1)
        if message == b'':  # check if there was no data to read
            break           # now we stop
        print(message)      # print message if not stopped
except EOFError:            # If connection was closed
    print('connection closed') 
```

# json - 导入具有空值的 json 数据

> ID：13262282
> 
> 赞同：3
> 
> 时间：2012-11-07T02:09:58.387
> 
> 标签：json, null, google-bigquery, data-import

从BigQuery的[导入文档中，](https://developers.google.com/bigquery/docs/import#jsonformat)

> 注意：不允许空值

所以我假设`null`在 json 格式的数据中不允许 BigQuery 导入。但是，`null`值实际上在常规 ETL 任务中很常见（由于缺少数据）。导入此类 json 源文件应该是什么好的解决方案？请注意，我的数据包含嵌套结构，因此我不喜欢转换为`CSV`和使用`,,`来表示一个`null`值。

我认为我可以做的一种方法是`null`分别用不同数据类型的默认值替换所有值，例如，

*   字符串：`null`-> 空字符串
*   整数：`null`-> -1
*   浮动：`null`-> -1.0
*   ...

但我不喜欢它。我正在寻找更好的选择。

顺便说一句，我尝试`bq load`使用包含`null`值的 json 文件。我收到以下错误：

```
Failure details:
- Expected '"' found 'n'
- Expected '"' found 'n'
- Expected '"' found 'n'
- Expected '"' found 'n'
- Expected '"' found 'n
... 
```

我认为这是`null`使用的指示，对吗？

**编辑**：如果我删除所有`null`字段，它似乎工作。我想这是处理`null`数据的方式。你不能拥有`null`一个数据字段，但你不能包括它。所以我需要一个过滤代码来删除`null`我的原始 json 中的所有字段。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T20:16:45.563

您可以使用 JSON 格式的源文件导入 NULL 值 - 忽略 NULL 值的键：值对。

示例 - 假设您有这样的架构：

```
{
"name": "kind",
"type": "string"
},
{
"name": "fullName",
"type": "string",
},
{
"name": "age",
"type": "integer",
"mode": "nullable"
} 
```

没有 NULL 值的记录可能如下所示：

```
{"kind": "person",
 "fullName": "Some Person",
 "age": 22
} 
```

但是，当 "age" 为 NULL 时，试试这个（注意，没有 "age" 键）：

```
{"kind": "person",
 "fullName": "Some Person",
} 
```

如果您对此有任何疑问，请告诉我们。我将做笔记以改进有关使用带有 JSON 导入格式的 NULL 值的文档。

# sql - 如果表结果不为空，则进行 Sql 查询连接

> ID：13262283
> 
> 赞同：0
> 
> 时间：2012-11-07T02:10:36.497
> 
> 标签：sql

我正在尝试从表中获取一些数据，并可能根据另一个查询的结果对其进行过滤。

代码是这样的：

```
DECLARE @TestTable  TABLE(TestID INT)

INSERT INTO @TestTable
SELECT TestID from v_Lookuptable Where SomeID = @input

SELECT DISTINCT
C.[Level],
C.Name
FROM
dbo.CPackage CP 
Right outer join @TestTable TT on TT.TestID = CP.TestID
WHERE
AND (TT.TestID is null OR Exists( Select TT.TestID from @TestTable 
                                    inner join dbo.CProduct CP on CP.TestID = MT.TestID
                                    where TT.TestID = CP.TestID
                                    )) 
```

我的问题是，如果我在当前场景中传递`@input`as 1，那么顶部会返回一些数字：1、2、3

但是如果我作为 2 传递`@input`，那么顶部不会返回任何内容，因为没有匹配项。

这个想法是，如果没有匹配项，则返回底部查询中的所有内容，因此 from `dbo.CPackage`，否则只返回`TestID`匹配的内容。

我尝试了各种方法，例如更改联接、case 语句、使用`ISNULL`和`collasce`. 此外，我尝试删除该部分`TT.TestID is null`，然后如果顶部表返回某些内容，它就会起作用，但是当我再次添加它时，它会返回所有内容并且从不过滤。所以我知道逻辑是错误的……我只是想不出正确的逻辑……：S

可能吗？我猜是...

干杯罗宾

** 解决方案 **

删除连接并将其放入 where 过滤器中...

```
SELECT DISTINCT
C.[Level],
C.Name
FROM
dbo.CPackage CP 

WHERE
CP.TestID = coalesce( (select distinct TestID from v_Lookuptable LT
        where LT.SomeID =  @input), CP.TestID ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T03:23:37.680

这是否为您提供了您正在寻找的东西：

```
SELECT DISTINCT
       CP.[Level]
      ,CP.Name
  FROM dbo.CPackage CP
  LEFT OUTER JOIN @TestTable TT
          ON TT.TestID = CP.TestID
 WHERE CP.TestID = ISNULL(TT.TestID, CP.TestID); 
```

或者，您甚至可以像这样重写整个查询：

```
DECLARE @input1 int;
SET @input1 = ...;

-- If there are no records returned for v_Lookuptable, then return all records from CPackage.
-- Otherwise, only return records from CPackage that have a match in the v_Lookuptable where v_Lookuptable.SomeID = @input1.
SELECT DISTINCT
       CP.[Level]
      ,CP.Name
  FROM dbo.CPackage CP
  LEFT OUTER JOIN v_Lookuptable TT
          ON TT.TestID = CP.TestID
         AND SomeID = @input1 --<== Only include records from TT that match @input1...
 WHERE CP.TestID = ISNULL(TT.TestID, CP.TestID); --<== Return all records from CP if TT is NULL. 
```

# php - 如何执行计算函数来计算差异？

> ID：13262284
> 
> 赞同：-1
> 
> 时间：2012-11-07T02:10:56.147
> 
> 标签：php, javascript, jquery

在我的应用程序中，我有一个如下所示的表格，例如：

```
Question No.    Question                 Answer     Marks per Answer    Total Marks
1               Here are 2 answers       B          (text input)            5
                                         D          (text input)
2               Here is a single answer  True       (text input)            5 
```

在上表中，我有一个属于每个答案的文本输入。现在每个问题都有自己的总分。我想要做的是，如果用户在文本输入中输入一个数字，它应该对文本输入中输入的数字与“总分”列下的数字之间的差异进行计算。所以如果你看下面的例子：

```
 Question No.   Question                 Answer     Marks per Answer    Total Marks
 1              Here are 2 answers       B          (text input) = 2        2
                                         D          (text input) = 1
 2              Here is a single answer  True       (text input) = 5        0 
```

正如您在上表中看到的，问题 1 中答案的文本输入总共等于 3。所以 5（来自问题 1 的总分）减去 3 = 2（现在总分等于 2）

对于问题 2，问题 2 中答案的文本输入等于 5，因此 5（来自问题 2 的总分）减去 5 = 0（总分现在等于 0）。

**我的问题：**

1.  执行这些计算的最佳方法是如何以及最好的方法是什么？

2.我还想要的是，如果一个问题只包含一个答案（如上例中的问题 2 只有一个答案），那么我希望文本输入变为只读，并且文本输入应显示与总分因为无论如何它必须等于相同的分数，所以它看起来像下面这样：

```
Question No.   Question                  Answer     Marks per Answer             Total Marks
 2              Here is a single answer  True       (text input(readonly)) = 5        0 
```

这是一个 jsfiddle[演示](http://jsfiddle.net/AeT6E/4/)，因此您知道 HTML 代码的样子。在 jsffidle 中，我所做的是在文本框中插入了值，但是我将问题的“总分”留给了“5”，而实际上，如果计算总分之间的差异，它们都应该为“0”标记和在文本输入中输入的数字。问题 2 的文本输入也是只读的，这是因为它只是这个问题的一个答案

以下是 jsfiddle 中的 html 代码：

```
<table border='1' id='markstbl'>
<tr>
<th class='questionth'>Question No.</th>
<th class='questionth'>Question</th>
<th class='answerth'>Answer</th>
<th class='answermarksth'>Marks per Answer</th>
<th class='noofmarksth'>Total Marks</th>
</tr>
<tr class="questiontd">
<td class="questionnumtd" rowspan="2">1</td>
<td class="questioncontenttd" rowspan="2">Here are 2 Answers Question</td>
<td class="answertd">B</td>
<td class="answermarkstd"><input class="individualMarks" name="answerMarks[]" id="individualtext" type="text" value="3" /></td>
<td class="noofmarkstd" rowspan="2">5</td>
</tr>
<tr class="questiontd">
<td class="answertd">D</td>
<td class="answermarkstd"><input class="individualMarks" name="answerMarks[]" id="individualtext" type="text" value="2" /></td>
</tr>
<tr class="questiontd">
<td class="questionnumtd" rowspan="2">2</td>
<td class="questioncontenttd" rowspan="2">Here is single Answer Question</td>
<td class="answertd">True</td>
<td class="answermarkstd"><input class="individualMarks" name="answerMarks[]" id="individualtext" type="text" value="5" readonly="readonly"/></td>
<td class="noofmarkstd" rowspan="2">5</td>
</tr>
</table> 
```

我只想说，可能有很多问题和很多答案，请不要只提供一个只适合这个例子的答案。如果一个问题有很多答案，它就需要工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T11:06:57.630

这是一个解决方案，它是进行计算的基本框架。如果您需要任何验证规则，则需要进行调整

```
$('tr').each(function() {
    var $input = $(this).find('input');
    var $row = $(this);
    var is_multiple = !$input.prop('readonly');
    var rowClass = is_multiple ? 'multiple' : 'single';
    if (is_multiple) {
        var is_first = $row.find('td').length == 5;
        rowClass += is_first ? ' first' : ' second';
    } else {
        /* readonly just needs marks changed once on page load */
        $row.find('.noofmarkstd').text(5 - $input.val());
    }
    $input.addClass(rowClass);
});

$('input.multiple').keyup(function() {
    var $input = $(this);
    var is_first = $input.is('.first');
    var $row = $input.closest('tr');
    var $otherRow = $row[is_first ? 'next' : 'prev']();
    var $marks = is_first ? $row.find('.noofmarkstd') : $otherRow.find('.noofmarkstd');

    var calcs = 5 - ($input.val() || 0) - ( $otherRow.find('input.multiple').val() || 0);
    $marks.text(calcs);    
});

/* if need calcs for multiples generated on pageload trigger a change on the first in set*/
 $('input.first').change(); 
```

演示：http: [//jsfiddle.net/jTXy5/1/](http://jsfiddle.net/jTXy5/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T02:38:34.023

如果您正在处理的值是由字符串表示的数字，并且您正在执行简单的数学运算，例如加法、除法等，那么您只需要小心加法即可。

带有“+”运算符且一个值为字符串的表达式将导致它被视为连接字符串而不是添加数字。因此，您可以将所有内容都转换为数字（例如使用 parseInt、parseFloat 或 Number 作为函数调用），或者您可以只在有加法的地方处理它。

例如给定字符串值：

```
var a = '5';
var b = '6; 
```

在以下所有内容中，`a`并且`b`由于使用了数学运算符而被转换为数字：

```
 a * b // 30 

 a - b // -1 

 a / b // 0.833333... 
```

但

```
 a + b // 56 
```

因为如果其中一个操作数是字符串，则所有其他操作数都将转换为字符串，并且“+”用于连接。

因此，对于添加，您可以执行以下操作：

```
 +a + +b // 11 
```

在不能发生加法或连接的地方作为“+”会导致它被视为一元运算符，因此它将 a 和 b 转换为数字。因此，中间的“+”被视为加法，因为它处理的是数字。

在应用“+”之前导致 a 和 b 的值成为数字的任何方案都意味着它被视为加法，例如：

```
parseInt(a) + parseInt(b);

Number(a) + Number(b);

a*1 + b*1  // since multiplication is done before addition 
```

等等。只需使用任何看起来最好的东西，并且对于那些试图维护你的代码的人（可能是你）来说是最清楚的。

# java - hibernate如何保存一对多/多对一的注解？（儿童不储蓄）

> ID：13262287
> 
> 赞同：19
> 
> 时间：2012-11-07T02:11:09.597
> 
> 标签：java, hibernate, annotations, one-to-many, many-to-one

我继承了一个休眠应用程序，但遇到了问题。似乎代码并没有将孩子保存在一对多的关系中。它是双向的，但是在保存父对象时，它似乎并没有保存子对象。

在这种情况下，问题类是父类。

```
// Question.java
@Entity
@SequenceGenerator(name = "question_sequence", sequenceName = "seq_question", allocationSize = 1000)
@Table(name = "question")
public class Question {
   protected Long questionId;
   protected Set<AnswerValue> answerValues;

   public TurkQuestion(){}

   public TurkQuestion(Long questionId){
      this.questionId = questionId;
   }

   @Id @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "question_sequence")
   @Column(name = "question_id")
   public Long getQuestionId(){
      return questionId;
   }

   @OneToMany(fetch = FetchType.EAGER)
   @JoinColumn(name = "question_id",referencedColumnName="question_id")
   public Set<AnswerValue> getAnswerValues(){
      return answerValues;
   }

   public void setQuestionId(Long questionId){
      this.questionId = questionId;
   }

   public void setAnswerValues(Set<AnswerValue> answerValues){
      this.answerValues = answerValues;
   }
} 
```

AnswerValue 是子类。

```
// AnswerValue.java
@Entity
@SequenceGenerator(name = "answer_value_sequence", sequenceName = "seq_answer_value", allocationSize = 1)
@Table(name = "answer_value")
public class AnswerValue {
    protected Long answerValueId;
    protected Question question;
    protected String answerValue;

    public AnswerValue(){}

    public AnswerValue(Long answerValueId, Long questionId, String answerValue){
       this.answerValueId = answerValueId;
       this.question = new Question(questionId);
       this.answerValue = answerValue;
    }

    @Id @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "answer_value_sequence")
    @Column(name = "answer_value_id")
    public Long getAnswerValueId(){
       return answerValueId;
    }

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "question_id", nullable = false )
    public Question getQuestion(){
       return question;
    }

    @Column(name = "answer_value")
    public String getAnswerValue(){
       return answerValue;
    }

    public void setAnswerValueId(Long answerValueId){
       this.answerValueId = answerValueId;
    }

    public void setQuestion(Question question){
       this.question = question;
    }

    public void setAnswerValue(){
       this.answerValue = answerValue;
    }
} 
```

和 DAO：

```
// QuestionDao.java
public class QuestionDao {
   public void saveOrUpdateAll(List<Question> list){
      getHibernateTemplate().saveOrUpdateAll(list);
   }
} 
```

似乎当我调用 saveOrUpdateAll 时，问题已保存，但作为 Question 对象的子项的 AnswerValue 未保存。

有什么建议么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-07T02:13:59.690

您需要手动执行或将级联属性添加到您的注释中，即[Hibernate: Cascade Type](https://stackoverflow.com/questions/10551485/hibernate-cascade-type)

或[Hibernate：如何在注释中使用级联？](https://stackoverflow.com/questions/5157853/hibernate-how-use-cascade-in-annotation)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-07T02:13:42.433

对于`oneToMany`关系，请将`cascade`映射注释定义为：

```
 Cascade={CascadeType.ALL} 
```

或者

```
 Cascade={ CascadeType.ALL, CascadeType.DELETE_ORPHAN } 
```

在您的映射中：

```
 @ManyToOne(fetch = FetchType.EAGER, 
               cascade = { CascadeType.ALL, CascadeType.DELETE_ORPHAN })
    @JoinColumn(name = "question_id",referencedColumnName="question_id")
    public Set<AnswerValue> getAnswerValues(){
        return answerValues;
    } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-07T02:31:15.333

如果问题和答案实体之间存在一对多关系，那么为什么要使用：

```
@ManyToOne(fetch = FetchType.EAGER)
@JoinColumn(name = "question_id",referencedColumnName="question_id")
public Set<AnswerValue> getAnswerValues(){
    return answerValues;
} 
```

我认为你应该改用这个：

```
@OneToMany(fetch = FetchType.EAGER)
@JoinColumn(name = "question_id",referencedColumnName="question_id")
public Set<AnswerValue> getAnswerValues(){
    return answerValues;
} 
```

# windows - 来宾帐户注册表配置单元在注销时存储在哪里？

> ID：13262288
> 
> 赞同：0
> 
> 时间：2012-11-07T02:11:54.040
> 
> 标签：windows, registry

当用户注销时，我需要更改 Windows 内置的来宾帐户注册表配置单元。有谁知道它存储在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:40:30.737

The registry hive for the guest account will normally be in `c:\users\guest\ntuser.dat`, the same as any other account. (Note that in some cases the profile might have a different name, e.g., if there is a domain guest user and that profile was created first. Also, for Windows XP and earlier, the path is `c:\documents and settings\guest\ntuser.dat`.)

You can load this hive into the registry using [RegLoadKey](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724889%28v=vs.85%29.aspx) and then manipulate it using the normal registry functions.

When you're finished with it, use [RegUnLoadKey](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724924%28v=vs.85%29.aspx). This will make sure all your changes are saved, although this will also happen automatically when the machine shuts down. It will also release the lock on the file so that the account can log in again.

(I'm not sure what will happen if someone tries to log in while you've manually loaded the user hive. I recommend you disable the account before loading the hive and re-enable it after unloading.)

# ios - MonoTouch：PresentModalViewController 和 PresentViewController

> ID：13262289
> 
> 赞同：1
> 
> 时间：2012-11-07T02:12:40.530
> 
> 标签：ios, xamarin.ios

使用 MonoTouch 6

如果我们使用**PresentViewController**而不是**PresentModalViewController**，这会在 iOS 5 中工作吗？

**PresentModalViewController**在 iOS 6 中已弃用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T07:04:26.917

是的，它适用于 iOS 5，因为`PresentViewController`它适用于 iOS 5。

我有一个使用两者的应用程序，因为它还不完整并且在两个 iOS 版本上都能完美运行。由于`PresentModalViewController`在 iOS 6 中已弃用，因此最好开始替换它。

# jquery - requirejs 和其他库

> ID：13262290
> 
> 赞同：0
> 
> 时间：2012-11-07T02:12:46.987
> 
> 标签：jquery, requirejs

好的，这是我第一次尝试 requireJS，虽然我不知道具体是什么设置。我只是基于我在他们的网站和 youtube 教程中看到的内容。

基本上，我有多个我想在我的网站上使用的插件，并试图避免来自 pagespeed 的延迟 javascript 通知。所以我尝试了requirejs，是的，我看到它可以工作，但是在我包含我想要的插件之一之后，我部分地迷失在编码的场景中。

好的，让我们在这里简短地说。我想使用 SlidesJS，我的主页上有代码和 css。然后创建 main 并包含 jquery。问题是，我如何在 main.js 中对 SlidesJS 库进行编码，并使其与这些代码完全兼容。

```
 $('#slides-text').slides({
    preload: true,
    preloadImage: 'plugins/slidesjs/img/loading.gif',
    play: 5000,
    pause: 2500,
    hoverPause: true
}); 
```

我会感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T02:18:58.200

在 main.js 中：

```
define(["slides.js"], function(){
    // within here, the slides.js is already loaded
    // so you can safely put the code in your question here
}); 
```

# javascript - Angular js中使用的“期望”函数是什么

> ID：13262293
> 
> 赞同：30
> 
> 时间：2012-11-07T02:13:22.133
> 
> 标签：javascript, angularjs

在 Angular 文档中，他们这样写：

`expect(scope.counter).toEqual(0);`

这写在很多地方，比如[这里](http://docs.angularjs.org/api/ng.%24rootScope.Scope#%24digest)。

我只想知道它的作用

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-10T10:12:47.920

这是用于[单元测试的](http://en.wikipedia.org/wiki/Unit_testing)[Jasmine](https://github.com/jasmine)单元测试框架语法。Angular 使用、促进和鼓励[单元测试实践](http://docs.angularjs.org/guide/dev_guide.unit-testing)。

AngularJS 非常重视可测试性，框架的作者确保使用 AngularJS 编写的代码易于测试：

*   内置的依赖注入 (DI) 系统可以轻松地从更小、经过良好测试的元素组合应用程序
*   随附的工具 - [Testacular](https://github.com/vojtajina/testacular) - 使在实践中编写和执行测试变得容易

AngularJS 还有一个用于更高级别[的端到端测试](http://docs.angularjs.org/guide/dev_guide.e2e-testing)的解决方案。E2e 测试使用非常相似的语法（因此您也会注意到`expect`关键字），但这些不是 Jasmine 测试。更多信息可以在这里找到：[https ://stackoverflow.com/a/13213262/1418796](https://stackoverflow.com/a/13213262/1418796)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-06-10T15:34:11.130

[这是`expect`](http://jasmine.github.io/2.0/introduction.html#section-Expectations).

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-07T02:57:31.290

这是测试的一部分。它在[https://docs.angularjs.org/guide/e2e-testing中有描述](https://docs.angularjs.org/guide/e2e-testing)

并非所有详细信息都存在，因此您可能需要查看源代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-05T17:20:20.480

[https://github.com/lathonez/clicker/issues/159](https://github.com/lathonez/clicker/issues/159)也有助于解释。我必须在我的 tsconfig.json 中添加：“types”：[“jasmine”]，因为它无法找到“expect”

# sql - 将 csv 转换为 .sql

> ID：13262295
> 
> 赞同：2
> 
> 时间：2012-11-07T02:13:33.967
> 
> 标签：sql, csv

有什么工具可以将包含中文字符和大约 500 条记录的 CSV 文件转换为 .sql 格式？

我尝试过 Advanced CSV 转换器，但它只允许我转换 50 条记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T02:15:57.400

这是我一直在使用的免费在线转换工具。

*   [**将 CSV 转换为 MySQL**](http://www.convertcsvtomysql.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-17T13:59:11.970

我使用这个在线 CVS 到 SQL 转换器，效果很好： [http](http://www.convertcsv.com/csv-to-sql.htm) ://www.convertcsv.com/csv-to-sql.htm 对 csv 文件中的行数没有限制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T11:57:05.227

我将 csv 保存为 xls，然后使用此工具： http: [//www.interfrog.de/tools/xls2mysql/](http://www.interfrog.de/tools/xls2mysql/)

# ruby-on-rails - Capybara、Devise、CanCan 和 RSpec 集成测试：有效登录 302 重定向到 example.com

> ID：13262299
> 
> 赞同：3
> 
> 时间：2012-11-07T02:14:29.847
> 
> 标签：ruby-on-rails, rspec, devise, capybara, cancan

更新：由于我的规范在规范/请求而不是规范/控制器中，请参阅帖子末尾的规范现在如何工作。仍然想知道如何让有效的登录用户与我的控制器进行集成测试。

我是第一次与 Devise 和 CanCan 合作，并且在进行最基本的集成测试时遇到了困难，我正在验证登录用户是否......嗯......登录。我已经阅读了无数的帖子和处理设计和 RSpec 集成测试的答案（即通过直接通过[https://github.com/plataformatec/devise/wiki/How-To%3a-Test-with-Capybara](https://github.com/plataformatec/devise/wiki/How-To%3a-Test-with-Capybara)访问会话来加速它们，[http://schneems .com/post/15948562424/speed-up-capybara-tests-with-devise 和 Capybara](http://schneems.com/post/15948562424/speed-up-capybara-tests-with-devise)、[RSpec 和 Devise：有什么方法可以通过直接绕过慢速登录和设置会话来加快集成测试的速度？](https://stackoverflow.com/questions/13174592/capybara-rspec-and-devise-any-way-to-make-integration-tests-faster-by-circumve)，但我什至无法做到得到一个按预期工作的标准帖子，我很困惑：

1.  开发环境工作正常（可以登录并重定向到正确的页面，导航登录链接更改为注销等）。
2.  test.log 表示没有问题，直到它执行 302 重定向到[http://www.example.com](http://www.example.com)而不是我的 root_path。

由于有大量使用不同解决方案的类似问题的用户，我显然不是唯一一个遇到此问题的人，因为会话的各个方面等在不同的情况下都不可用。

剥离测试：

```
subject { page }

describe 'should be able to log in' do
  before do
    visit '/users/sign_in'
    user = FactoryGirl.create(:admin)
    #user.add_role :admin
    fill_in 'Username', with: user.username
    fill_in 'Password', with: user.password
    click_on 'Sign in'
  end
  it { should have_link 'Logout' }
end
... 
```

相关 log.test 输出：

```
 Started POST "/users/sign_in" for 127.0.0.1 at 2012-11-06 17:31:10 -0800
 Processing by Devise::SessionsController#create as HTML
 Parameters: {"utf8"=>"✓", "user"=>{"username"=>"username1", "password"=>"[FILTERED]",        "remember_me"=>"0"}, "commit"=>"Sign in"}
 [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" =   'username1' LIMIT 1[0m
 [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
    [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
 [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
 [1m[36m (0.1ms)[0m  [1mUPDATE "users" SET "last_sign_in_at" = '2012-11-07   01:31:10.722712', "current_sign_in_at" = '2012-11-07 01:31:10.722712', "last_sign_in_ip" =   '127.0.0.1', "current_sign_in_ip" = '127.0.0.1', "sign_in_count" = 1, "updated_at" = '2012-11-  07 01:31:10.723051' WHERE "users"."id" = 1[0m
 [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
 Redirected to http://www.example.com/
 Completed 302 Found in 12ms (ActiveRecord: 0.0ms) 
```

剥离路线.rb：

```
authenticated :user do
  root :to => 'home#index'
end
root :to => "home#index"
devise_for :users
resources :users 
```

剥离能力：

类能力包括 CanCan::Ability

```
 def initialize(user)
  user ||= User.new # guest user (not logged in)
  if user.has_role? :admin
    can :manage, :all
  end
  ... 
```

并且要彻底，当前的 Gemfile：

```
source 'https://rubygems.org'

gem 'rails', '3.2.8'
gem "bootstrap-sass", "~> 2.1.0.1"
gem 'faker', '1.1.2'
gem 'will_paginate', '~> 3.0.3'
gem 'bootstrap-will_paginate', '~> 0.0.9'
gem 'jquery-rails'
gem 'client_side_validations'
gem 'thin'
gem "devise", "~> 2.1.2"
gem "cancan", "~> 1.6.8"
gem "rolify", "~> 3.2.0"
gem "simple_form", "~> 2.0.4"

group :assets do
   gem 'sass-rails',   '~> 3.2.3'
   gem 'coffee-rails', '~> 3.2.1'
   gem 'uglifier', '>= 1.0.3'
end

group :development, :test do
 gem 'sqlite3', '1.3.5'
 gem "rspec-rails", "~> 2.11.4"
 gem 'guard-rspec', '1.2.1'
 #gem 'listen', github: 'guard/listen', branch: 'polling/double'
 gem 'guard-spork'
 gem 'guard-cucumber'
 gem 'spork', '0.9.2'
 gem "factory_girl_rails", ">= 4.1.0"
end

group :development do
  gem 'annotate', '2.5.0'
  gem "quiet_assets", ">= 1.0.1"
end

 group :test do
  gem 'capybara', ">= 1.1.2"
 gem "email_spec", ">= 1.2.1"
 gem "cucumber-rails", ">= 1.3.0", :require => false
 gem "database_cleaner", ">= 0.9.1"
 gem "launchy", ">= 2.1.2"
 gem 'rb-fsevent', '0.9.1', :require => false
 gem 'growl', '1.0.3'
 gem 'terminal-notifier-guard'
end

group :production do
    gem 'pg', '0.12.2'
 end 
```

还有另一个用户对此基本任务有疑问，但结果证明这只是一个语法错误（请参阅[使用 rspec/devise 进行登录集成测试](https://stackoverflow.com/questions/11320483/login-integration-test-with-rspec-devise)），所以我确定我只是遗漏了一些非常明显的东西。

更新：

你一定是在跟我开玩笑。离开它几个小时后，事实证明我出于某种原因在规范/控制器中有这个规范，当简单地将它切换到规范/请求时，一切都是绿色的。

我引用：

> 如果您使用的是 Rails，请将您的 Capybara 规范放在规范/请求或规范/集成中。

在[https://github.com/jnicklas/capybara#readme找到](https://github.com/jnicklas/capybara#readme)

但是，我仍然想知道如何满足未来的要求，我可以在需要登录用户的控制器上进行集成测试......对于过去的其他非设计应用程序，这就像类似以下：

```
describe SomeController do

  let(:user) { FactoryGirl.create(:user) }

  before { valid_sign_in user }

... 
```

我的助手在哪里

```
 def valid_sign_in(user)
    visit signin_path
    fill_in "Email", with: user.email
    fill_in "Password", with: user.password
    uncheck(:remember_me)
    click_button "Sign In"

    # Sign in when not using Capybara as well.
    cookies[:remember_token] = user.remember_token
  end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T17:54:16.483

有两个问题在起作用：

**1\. rspec/controller vs rspec/requests**

我试图在规范/控制器下进行集成测试。根据[https://github.com/jnicklas/capybara#readme](https://github.com/jnicklas/capybara#readme)，您需要将 Capybara 规范放在规范/请求或规范/集成中。根据[https://stackoverflow.com/a/5803121/9344](https://stackoverflow.com/a/5803121/9344)：

> 请求规范是对 ActionDispatch::IntegrationTest 的薄包装，它不像控制器规范（包装 ActionController::TestCase）那样工作。尽管有可用的会话方法，但我认为它不受支持（即它可能存在，因为其他实用程序包含的模块也包含该方法）。

最初，这可以通过 Devise 通过一个辅助方法来解决，例如：

```
# file: spec/requests_helper.rb
def login(user)
  post_via_redirect user_session_path, 'user[email]' => user.email, 'user[password]' => user.password
end 
```

但是我已经实施的官方/最新解决方案（但请参阅下面的第二点，了解为什么它没有解决我的问题），可以在[https://github.com/plataformatec/devise/wiki/How-To找到:-用水豚测试](https://github.com/plataformatec/devise/wiki/How-To:-Test-with-Capybara)

**2\. Devise::HelperTests 用于控制器/视图测试，而不是集成测试。**

*如果*我想在控制器上做一些测试，我可以使用 Devise::TestHelpers（通过 spec_helper.rb 引用），但即便如此，我也无法获得 Capybara 集成测试的功能，因为 Devise::TestHelpers 是专门为控制器编写的/view 测试，而不是集成测试。请参阅[rspec 和设计测试助手](https://stackoverflow.com/questions/6403650/rspec-devise-test-helpers)。

总之，我想在控制器测试中做的事情无法完成，因为它实际上是一个集成测试，并且会话等不可用于规范/控制器。但是，有一些 Devise 测试助手可用于帮助进行控制器/视图测试。

**更新**

很久以后我重新审视了这一点，现在让 Warden 助手在我的集成测试中发挥作用。欢呼！在我的 448 次测试中，这已经花费了 8-10 秒。诀窍是[https://github.com/plataformatec/devise/wiki/How-To:-Test-with-Capybara](https://github.com/plataformatec/devise/wiki/How-To:-Test-with-Capybara)上的一个新条目。具体来说：

> Capybara-Webkit
> 
> 如果在 capybara-webkit 驱动程序中使用 Warden 的 login_as 方法时遇到问题，请尝试在 login_as 选项结构中将 run_callbacks 设置为 false

```
user = Factory.create(:user) 
login_as(user, :scope => :user,
:run_callbacks => false) 
```

总而言之，每次我需要一个经过身份验证的用户进行集成测试时，我都不需要进行实际的表单填写和发布，现在我只需要`login_as(user, :scope => :user, :run_callbacks => false)`（当然重构为一个辅助方法）。

# sql - Sql - 在不存在时添加行

> ID：13262301
> 
> 赞同：0
> 
> 时间：2012-11-07T02:15:48.787
> 
> 标签：sql, db2

假设我有一个返回结果如下的查询：

```
Project Year Type Amt
PJ00001 2012 1    1000
PJ00001 2012 2    1000
PJ00001 2011 1    1000
PJ00002 2012 1    1000 
```

我想要什么：每个项目每年都会有 2 行类型。如果该行不存在，则将其添加到 Amt = 0 的结果中
。例如：
- PJ00001 在 2012 年有 2 行类型为 1,2 --> OK。但在 2011 年，它只有 1 行类型 1 --> 我们添加一行：`PJ00001 2011 2 0`
- PJ00002 只有 1 行类型 1 --> 添加：`PJ00002 2012 2 0`

有没有办法轻松做到。我现在知道的唯一方法是创建一个类似的视图：PJ_VIEW。接着：

```
SELECT *
FROM PJ_VIEW
UNION ALL
SELECT t.PROJECT, t.YEAR_NO, 1 AS TYPE_NO, 0 AS AMT
FROM PJ_VIEW t
WHERE NOT EXISTS (SELECT 1 FROM PJ_VIEW t2 WHERE t2.PROJECT = t.PROJECT AND t2.YEAR_NO = t.YEAR_NO AND t2.TYPE_NO = 1)
UNION ALL
SELECT t.PROJECT, t.YEAR_NO, 2 AS TYPE_NO, 0 AS AMT
FROM PJ_VIEW t
WHERE NOT EXISTS (SELECT 1 FROM PJ_VIEW t2 WHERE t2.PROJECT = t.PROJECT AND t2.YEAR_NO = t.YEAR_NO AND t2.TYPE_NO = 2) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T04:53:45.293

对于基于数据库的解决方案，您需要一个 CROSS JOIN。以下解决方案适用于***n 个***项目类型。此解决方案需要一个包含所有具有默认金额的项目类型的表。

首先创建你的表：

```
 CREATE TABLE `_projects` (
      `Project`     VARCHAR(20) NOT NULL,
      `_Year`       INT(4) NOT NULL,
      `ProjectType` INT(1) NOT NULL,
      `ProjectAmt`  INT(11) NOT NULL
    );

    CREATE TABLE `_projecttypes` (
      `DefaultType` INT(1) NOT NULL,
      `DefaultAmt`  INT(11) DEFAULT 0
    ); 
```

插入您的项目名称、年份、项目类型和金额：

```
 INSERT INTO `_projects`
    VALUES ('PJ00001', 2012, 1,    1000),
           ('PJ00001', 2012, 2,    1000),
           ('PJ00001', 2011, 1,    1000),
           ('PJ00002', 2012, 1,    1000); 
```

现在使用默认值 0（零）或您需要的任何值添加您的项目类型：

```
 INSERT INTO `_projecttypes`
    VALUES (1,0),(2,0); 
```

这是将默认值 0 添加到任何还没有默认值的项目的结果中的查询。

```
 SELECT 
        IFNULL(`_actualprojects`.`Project`,`der2`.`Project`)          AS `_Project`,
        IFNULL(`_actualprojects`.`_Year`,`der2`.`_Year`)              AS `_Year`,
        IFNULL(`_actualprojects`.`ProjectType`,`der2`.`DefaultType`)  AS `_Type`,
        IFNULL(`_actualprojects`.`ProjectAmt`,`der2`.`DefaultAmt`)    AS `_Amt` 
    FROM 

        (   SELECT DISTINCT `der1`.`DefaultType`,
                            `der1`.`Project`,
                            `der1`.`_Year`,
                            `der1`.`DefaultAmt` 
            FROM 
                (   SELECT *
                    FROM `_projecttypes` CROSS JOIN  `_projects` 
                ) AS `der1`
        ) AS `der2` 

        LEFT JOIN `_projects` AS `_actualprojects` 
            ON `der2`.`Project`       = `_actualprojects`.`Project`
            AND `der2`.`_Year`        = `_actualprojects`.`_Year`
            AND `der2`.`DefaultType`  = `_actualprojects`.`ProjectType`
    ; 
```

如果您想要更多项目类型，您可以简单地将它们添加到具有默认数量的 _projecttype 表中，然后重新执行上述查询。

试试看，添加这些值，然后重新运行上述查询。

```
 INSERT INTO `_projecttypes`
    VALUES (3,0),(4,0); 
```

* * *

我希望这可以帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T04:58:11.100

使用 DB2 临时表尝试类似的操作。只需将名为 query 的表的内容替换为您的查询即可。

```
WITH TypeList AS ( 
    SELECT 1 TypeCode
    UNION ALL
    SELECT 2
),
query AS (
    SELECT Project, [Year], [Type], Amt FROM yourQuerySource
),
DistinctProjectYears AS (
    SELECT Project, [YEAR]
    FROM query
    GROUP BY Project, [YEAR]
),
Projects AS (
    SELECT Project, [YEAR], [Type] as TypeCode, MAX(Amt) as Amt
    FROM query
    GROUP BY Project, [Year], [Type]
)
SELECT l.TypeCode, py.Project, py.[Year], COALESCE(t.Amt, 0) as Amt
FROM TypeList l CROSS JOIN DistinctProjectYears py
    LEFT JOIN Projects t ON l.TypeCode = t.TypeCode
        AND py.Project = t.Project
        AND py.[Year] = t.[Year] 
```

# c# - 通过带有角色的 C# 中的 Rest API 存储 Amazon S3 文件

> ID：13262302
> 
> 赞同：2
> 
> 时间：2012-11-07T02:15:51.440
> 
> 标签：c#, api, rest, permissions, amazon-s3

我正在构建一个将使用 Amazon S3 存储文档的项目。特别是有两个应用程序：

*   面向公众的应用程序将允许用户创建和上传文档
*   一个管理应用程序，您可以在其中查看可用文档并下载它们

...所以公共应用程序应该只有“写入”权限，而管理工具应该只有“读取”和“列表”权限。

该项目的编码将使用 ASP.NET 和 C# 完成，并且首选使用 S3 的 REST API。这个用例（上传、列出和下载文档）看起来很基本，但我没有找到简单的例子。你能推荐一些链接吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T06:35:02.547

如果您从[http://aws.amazon.com/sdkfornet](http://aws.amazon.com/sdkfornet)安装适用于 .NET 的 AWS 开发工具包，它还会在 C:\Program Files (x86)\AWS SDK for .NET\Samples\AmazonS3Sample\ 中放置一个示例 S3 应用程序AmazonS3Sample 将显示 S3 的基本 CRUD 操作。

就权限而言，您应该查看使用 AWS 进行身份和访问管理，[http://aws.amazon.com/iam/](http://aws.amazon.com/iam/)。使用此服务，您可以使用限制访问的配置文件创建不同的用户。因此，您可以为只有写入权限的公共应用程序创建一个用户，甚至限制写入特定的 S3 存储桶。然后为具有更多管理员权限的管理员应用程序创建另一个用户。

# html - 背景图片不显示

> ID：13262307
> 
> 赞同：1
> 
> 时间：2012-11-07T02:16:14.930
> 
> 标签：html, css

出于某种原因，当我尝试显示云图像（我制作的方式与山图像完全相同）时，它没有显示出来！怎么来的？两个图像都是 .png 文件。但是，树图像具有纯色背景（不透明），云具有透明背景。这是导致问题的原因吗？如果是这样，我该如何解决？

```
html
{

    /* Webkit (Safari/Chrome 10) */ 
    background-image: -webkit-gradient(linear, left bottom, left top, color-stop(0, #FFFFFF), color-stop(1, #00A3EF));

    /* Webkit (Chrome 11+) */ 
    background-image: -webkit-linear-gradient(bottom, #FFFFFF 0%, #00A3EF 100%);

}

.sky {
    background: url(clouds2.png) repeat-x; 
    display:     block;
    width:       500px;
    height:      500px;
     border: 1px solid red; 
}

<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3c.org/TR/xhtml11/DTD/xhtml11-strict.dtd">

<!-- START HTML -->
<html>

    <!-- START HEAD -->
    <head>

        <!-- Adding title, meta, link to css and scripts to javascript files -->
        <title>27 Days</title>
        <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
        <link rel="stylesheet" type="text/css" href="css/27.css" />

    <!-- END HEAD -->
    </head>

    <!-- START BODY -->
    <body>

        <!-- Creating div to encompass our entire piano -->
        <div class="sky" id="sky">
            <div class="clouds1" id="clouds1"></div>
            <div class="clouds2" id="clouds2"></div>
        </div>

    <!-- END BODY -->
    </body>

<!-- END HTML -->
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T02:23:12.443

据我所知，您必须将颜色指定为 的第一个参数`background`，并将图像放在单引号中：

```
background: transparent url('clouds2.png') repeat-x; 
```

# jquery - 选择下拉菜单 - 目标默认标题

> ID：13262309
> 
> 赞同：0
> 
> 时间：2012-11-07T02:16:43.310
> 
> 标签：jquery, html, css

我有一个选择下拉菜单，默认标题`Country`为灰色。
但是，仅当您单击该字段时才会显示灰色。
我怎样才能让默认为灰色的可见字段与其他字段匹配？ ![在此处输入图像描述](../Images/b3332cb1af67b30963f7921d53a4616a.png)

```
.form_0{color:#777;}

<select value='country' id='country' name='Country'>
    <option class='country' disabled='disabled' selected='selected' class='form_0'>Country</option>
    <option class='country'>Brazil</option>
    <option class='country'>China</option>
    <option class='country'>India</option>
    <option class='country'>Spain</option>
    <option class='country'>USA</option>
    <option class='country'>Japan</option>
    <option class='country'>Russia</option>
</select> 
```

![在此处输入图像描述](../Images/2234f1c5314ffaf64093d82ec1486257.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T02:41:16.623

检查这个[jsFiddle](http://jsfiddle.net/NWcrv/)

**HTML**

```
<select value='country' id='country' name='Country' style='color:#777'>
 <option  disabled='disabled' selected='selected' class='form_0'>Country</option>
   <option class='country'>Brazil</option>
   <option class='country'>China</option>
   <option class='country'>India</option>
   <option class='country'>Spain</option>
   <option class='country'>USA</option>
   <option class='country'>Japan</option>
   <option class='country'>Russia</option>
</select>​ 
```

**css**

```
.form_0{color:#777;}
.country{color:black} 
```

​</p>

**jQuery**

```
$('#country').change(function(){
    $(this).css('color','black') ;
 }); 
```

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T02:36:04.123

可能是这样的：

```
$("#country").on('change', function() {
    $(this).toggleClass("empty", this.value == "0");
}).change();​ 
```

您需要为您的选择添加值，并稍作更改：

```
<select id='country' name='Country'>
    <option value="0" class='country' selected='selected'>Country</option>
    <option value="1" class='country'>Brazil</option>
    <option value="2" class='country'>China</option>
    <option value="3" class='country'>India</option>
    <option value="4" class='country'>Spain</option>
    <option value="5" class='country'>USA</option>
    <option value="6" class='country'>Japan</option>
    <option value="7" class='country'>Russia</option>
</select>​ 
```

作为旁注，你不能定义类两次，你定义了两个类，但这样做：

```
<option class='country form_0'></option> 
```

在由空格分隔的同一个 decleration 中，两个 class decleration 将不起作用。

[**示范**](http://jsfiddle.net/UqCng/2/)

# xamarin.ios - MonoTouch：Facebook 与 iOS API 的集成

> ID：13262310
> 
> 赞同：1
> 
> 时间：2012-11-07T02:17:38.443
> 
> 标签：xamarin.ios

我正在编写一个简单的“FaceBook-This”函数来根据我的应用程序的内容为用户打开一个帖子。我缺少什么来启动 FaceBook UI？

```
 public static void FacebookThis (string text)
  {
     if (SLComposeViewController.IsAvailable (SLServiceKind.Facebook)) {
        var service = SLComposeViewController.FromService(SLServiceKind.Facebook);
        service.SetInitialText(text);
     }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T06:04:28.430

您只是错过了`PresentViewController()`呼叫，然后在完成处理程序中将其关闭：

```
public static void FacebookThis (string text)
{
    if (SLComposeViewController.IsAvailable (SLServiceKind.Facebook)) {
        var service = SLComposeViewController.FromService(SLServiceKind.Facebook);
        service.SetInitialText(text);
        service.CompletionHandler += (result) => {
            DismissViewController(true, null);
        }
        PresentViewController(service, true, null);
    }
} 
```

# javascript - Shadow DOM 服务器端模板

> ID：13262312
> 
> 赞同：3
> 
> 时间：2012-11-07T02:17:43.373
> 
> 标签：javascript, html, css, server-side, shadow-dom

我对即将推出的名为[“Shadow DOM”](http://www.w3.org/TR/2012/WD-shadow-dom-20121016/)的标准感兴趣，该标准目前没有默认浏览器支持。但是服务器端仿真呢？我的意思是类似于模板引擎中的自定义标签，但具有与 W3C 工作草案兼容的内部 CSS 和 JavaScript 命名空间，因此当浏览器开始支持它时 - 模板引擎将使用 shadow-dom 而不是预处理的纯 html 大便。~~如果浏览器对 shadow-dom标准~~有不同的理解，这也会很有用。是否有任何实现，是否合理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T01:08:20.183

您可以使用客户端 JavaScript 库（[例如这个](https://github.com/toolkitchen/polyfills)库）在没有本机 Shadow DOM 实现的浏览器中模拟 Shadow DOM。

由于在操作 DOM 时会看到 Shadow DOM 的效果，因此除非您的服务器通过操作 DOM 生成页面，否则在服务器端模拟 Shadow DOM 并没有多大意义——大多数服务器端框架都使用模板。

# ruby - 如何将 Ruby 转换为 Lua？

> ID：13262319
> 
> 赞同：8
> 
> 时间：2012-11-07T02:18:17.393
> 
> 标签：ruby, lua, code-translation

有没有办法**自动**将 Ruby 代码转换为 Lua？我的问题是：

1.  为此目的存在哪些类型的工具？
2.  它们的局限性是什么？

这样做的一个主要目标是在我执行（转换为）Lua 程序时能够绕过 Ruby 解释器。我不介意在转换到 Lua 的过程中是否需要调用 Ruby 解释器，但我不想在运行新生成的 Lua 代码时依赖 Ruby 解释器。

* * *

更新：

我对这个主题做了很多研究，但我*个人*没有找到解决方案（这就是为什么我在 StackOverflow 上问这个问题）。

如果有人好奇，我已经深入研究过：

*   **[Ruby-Lua](https://github.com/glejeune/ruby-lua)**，尽管这一切都允许你从 Ruby 调用 Lua
*   **[RLua](https://github.com/whitequark/rlua)**，这允许您从 Lua 运行 Ruby 代码，反之亦然，但它不会将 Ruby 转换为 Lua，它仍然会在程序运行时调用 Ruby 解释器。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T03:23:53.253

如果这不是您想听到的答案，我很抱歉，但是*没有实用的方法可以做到这一点*，朋友。我不会说 Ruby 比 Lua 更丰富，因为我对后者的研究还不够多，不能这么说，但根据我所知道的和所见，

1.  没有人会费心为 Lua 和类似语言编写 Ruby 编译器。
2.  编写这样的编译器不会比手动重写程序花费更短的时间。
3.  Ruby 社区唯一关心将 Ruby 编译成的语言是 Ruby 字节码。

人们可以继续讨论将高级语言编译成彼此的可能性和不可能性，但对你来说，底线是：尽早放弃。停止搜索并开始手动重写您的 progs。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T04:25:30.670

^(*注意：我同意这里的其他人的观点，你真的应该从头开始重新编写你的程序。这个答案只是一个想法，我希望有人会真正研究一下。*)

已经有一些可以引导的*Ruby-to-X转换器。*好的已经有一个词法分析器和解析器，所以你只需要使用后端。如果您选择类似于 Lua 的语言，那么您可以进一步简化事情。

例如，有[一些 Ruby-to-Javascript](https://github.com/jashkenas/coffee-script/wiki/List-of-languages-that-compile-to-JS)实现，例如[RubyJS](http://www.ntecs.de/blog/articles/2007/01/08/rubyjs-javascript-no-thank-you/)。撇开元方法、`self`语法糖、库差异和一些语义差异不谈，Lua 可以被视为 Javascript 的一个子集，具有更冗长的语法。

`{` `}`考虑到这一点，您可以通过在这里和那里更改一些 s 来修改大部分后端生成器：

```
// some random js
while(x < 56 && y == 40) {
  print('Hello World!');
} 
```

```
-- What you could make it generate:
while x < 56 and y == 40 do
  print 'Hello World!'
end 
```

也许有几次它依赖于 Javascript 的特定功能，但即便如此，它们中的大多数都可以被模拟。

```
// Javascript has a === operator that enforces type equality
'5' === 5 // FALSE! 
```

```
-- Lua lacks this, but it's easy to imitate
(type('5') == type(5)) and ('5' == 5) 
```

不，老实说，这不是一个简单的项目，但我认为这绝对值得投入时间。我希望这会有所帮助！:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-17T01:53:46.337

[Universal-transpiler](https://github.com/jarble/transpiler)是一个用于 SWI-Prolog 的库，它可以将一小部分 Ruby 转换为 Lua 和其他几种语言。

这是它在 Prolog 中的使用示例，输入为 Ruby 源代码：

```
:- use_module(library(transpiler)).
:- set_prolog_flag(double_quotes,chars).
:- initialization(main).

main :- 
    translate("def add(a,b) return a + b end def squared(a) return a*a end def add_exclamation_point(parameter) return parameter + \"!\" end",'ruby','lua',X),
    atom_chars(Y,X),
    writeln(Y). 
```

...这是它生成的 Lua 源代码：

```
function add(a,b) 
        return a..b
end 
function squared(a) 
        return a*a
end 
function add_exclamation_point(parameter) 
        return parameter.."!"
end 
```

# python - 在 python 中使用装饰器添加函数文档字符串

> ID：13262320
> 
> 赞同：2
> 
> 时间：2012-11-07T02:18:20.727
> 
> 标签：python, decorator, docstring

你怎么能在函数文档字符串前面加上一个装饰器？

```
def g(func):
    someOtherDocString = "That is great"
    def wrap(*args, **kwargs):
        func(*args, **kwargs)
return wrap

@g
def f():
""" This is awesome """ 
```

结果：

```
>>>help(f)

Help on function f in module __main__:

f()
    That is great
    That is awesome 
```

所有的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T02:21:23.390

你试过魔法吗`__doc__`：

```
from functools import wraps

def g(func):
    func.__doc__ = "That is great" + func.__doc__

    @wraps(func)
    def wrap(*args, **kwargs):
        return func(*args, **kwargs)

    return wrap 
```

# android - android:ConnectivityManager.CONNECTIVITY_ACTION，当网络连接状态没有改变时发送广播

> ID：13262321
> 
> 赞同：1
> 
> 时间：2012-11-07T02:18:33.100
> 
> 标签：android

我注册了一个广播来获取ConnectivityManager.CONNECTIVITY_ACTION，代码是：

```
registerReceiver(mNetwrokBroadcastReceiver, new IntentFilter(
            ConnectivityManager.CONNECTIVITY_ACTION)); 
```

接收者是：

```
private BroadcastReceiver mNetwrokBroadcastReceiver = new BroadcastReceiver() {

    @Override
    public void onReceive(Context context, Intent intent) {

        boolean isConnected = false;
        NetworkInfo mNetworkInfo = intent
                .getParcelableExtra(ConnectivityManager.EXTRA_NETWORK_INFO);
        NetworkInfo.State state = (mNetworkInfo == null ? NetworkInfo.State.UNKNOWN
                : mNetworkInfo.getState());

        switch (state) {
        case CONNECTED:
            isConnected = true;
            break;

        case DISCONNECTING:
            if (intent.getBooleanExtra(
                    ConnectivityManager.EXTRA_NO_CONNECTIVITY, false))
                isConnected = false;
            else {
                isConnected = true;
            }
            break;

        default:
            break;
        }

        if (isConnected) {
            mPopwin.onDismiss();
            init();

        }
    }
}; 
```

但是我发现当网络总是连接时，它也发送广播，为什么？？？有同样的[问题](https://stackoverflow.com/questions/6670514/connectivitymanager-connectivity-action-always-broadcast-when-registering-a-rec)，我不明白。

编辑：我的意思是，我在活动的初始化中注册了一个过滤器为“ConnectivityManager.CONNECTIVITY_ACTION”的广播，当网络始终连接时，我启动活动，执行函数“onReceive”；在[谷歌文档](http://developer.android.com/reference/android/net/ConnectivityManager.html#CONNECTIVITY_ACTION)中说“网络连接发生了变化”，但网络没有变化，为什么要执行 onReceive ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-27T06:06:05.363

由于 CONNECTIVITY_ACTION 是棒广播，因此它会继续调用 onRecevie 将其删除，您可以使用 removeStickyBroadcast（Intent Intent）[DOC](http://developer.android.com/reference/android/content/Context.html#removeStickyBroadcast(android.content.Intent))

# html - 我应该如何为未启用 JavaScript 的浏览器隐藏 HTML？

> ID：13262323
> 
> 赞同：2
> 
> 时间：2012-11-07T02:18:46.660
> 
> 标签：html, css

我应该如何为未启用 JavaScript 的浏览器隐藏 HTML？我正在考虑类似以下的内容，但它不适用于我的 FF 浏览器，甚至无法验证。有什么想法吗？谢谢

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <body class="wrap">
        <noscript>
            <h1>JavaScript is turned off in your web browser.<br />Turn it on to use this site, then refresh the page.</h1>
            <style type="text/css">
                body { display:none; }
                noscript { display:block !important; }
            </style>
        </noscript>
        HTML for JavaScript only browsers goes here...
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T02:32:09.050

应该是这样的

```
<body class="wrap">

    <noscript>

        <h1>JavaScript is turned off O_o</h1>

        <style type="text/css">

            .onlyscript { display:none; }

        </style>

    </noscript>

    <div class="onlyscript">HTML for JavaScript only browsers goes here...</div>

</body> 
```

因为这个

```
 <style type="text/css">
            body { display:none; }
            noscript { display:block !important; }
        </style> 
```

真是令人困惑的构造和不合理的“！重要；” 采用。这可能会导致将来出现问题。最好是简单而不是制作聪明的错误农场:)

# php - 如何从特定的 Controller + Action 获取原始 URL

> ID：13262327
> 
> 赞同：1
> 
> 时间：2012-11-07T02:20:35.240
> 
> 标签：php, zend-framework

我一直在做一个项目，一切都很好，直到我的合作伙伴想要请求原始 URL 而无需重写。

例如：他想打电话给

> [http://mydomain.com/index.php?module=default&controller=check&action=index](http://mydomain.com/index.php?module=default&controller=check&action=index)

代替

> [http://mydomain.com/default/controller/index](http://mydomain.com/default/controller/index)。

有什么方法可以使上述 URL 正常工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T03:38:01.573

是的，事实上，Rob Allen ^(（Zend Framework in Action 的作者）)写了一篇很棒的文章来解释如何做到这一点。

[Zend 框架 URL 没有 mod_rewrite](http://akrabat.com/zend-framework/zend-framework-urls-without-mod_rewrite/)

# c - 访问指向字符串的指针数组

> ID：13262331
> 
> 赞同：2
> 
> 时间：2012-11-07T02:21:07.873
> 
> 标签：c, arrays, pointers

寻找与解决字符串数组相关的特定主题的一些说明。似乎有几个相关的问题，但我找不到一个讨论我的问题的问题。如果之前有人问过这个问题，请指出我相关的线程。

在下面的代码片段中（检查 printf 语句），我使用相同的变量来访问内存位置的值和内存位置的地址。我不太确定这是否是我应该编写这段代码的方式。有没有更好的方法可以清楚地表明我是在访问地址还是值？

```
char *board[NUM_MAX_ROWS] = {"0101001",
                             "1101011"};

int main()
{
    int i, num_rows=0, num_cols=0;

    num_cols = strlen(board[0]);
    num_rows = ARR_SIZE(board);

    for (i=0; i<num_rows; i++)
        printf("%s stored at %p\n", board[i], board[i]);

} 
```

我的第一次尝试看起来像这样

```
while(*board != '\0')
{
    printf("%s stored ar %p\n", *board, board);
    board++;
} 
```

显然这不起作用:)但我仍然不太确定编译器如何解释它。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T02:24:08.697

您可以通过取消引用指针一次以获取字符串本身的地址来首次尝试工作。

`printf("%s stored ar %p\n", *board, *board);`

顺便说一句，当您使用数组语法编写时，它实际上与

`printf("%s stored ar %p\n", *(board+i), *(board+i));`

编辑：我似乎错过了阅读问题..修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T02:49:04.667

你可以这样做：

```
#include <stdio.h>

char *board[] = {"0101001",
                 "1101011",
                 0}; /* note this final 0 as a terminator for stopping the loop */

int main()
{
    int i, num_rows=0, num_cols=0;
    char **c;

    c = &board[0];
    while(*c)
    {
        printf("%s stored ar %p\n", *c, *c);
        c++;
    }

    return 0;
} 
```

但是，如果你这样做，你必须有一个循环停止器。此外，有些人主张使用`NULL`而不是`0`为了清楚起见。

# java - 将节点插入链表中间，并意外插入空节点

> ID：13262333
> 
> 赞同：9
> 
> 时间：2012-11-07T02:21:08.340
> 
> 标签：java, singly-linked-list

我正在开发一个不使用 Java 内置 Linked List 类的程序；我正在从头开始构建它。除了编写将节点插入到链表的特定位置的方法之外，我在所有方面都取得了成功。

我有一个将特定节点设置为“当前”节点的方法。因此，例如，我有一个看起来像这样的链表：**cats** --> **dogs** --> **make** --> **good** --> **pets**，并且“current”等于 2；这意味着“当前”节点是“狗”。

从这里开始，假设我想在“当前”的位置插入一个新节点，其信息字段为**and**。如果操作正确，最终的链表将是：**cats** --> **and** --> **dogs** --> **make** --> **good** --> **pets**；“and”将替换位置 2 的“dogs”。

所以这是我的问题：我的方法可以在位置二插入一个新节点，但是将新创建的节点链接到预先存在的节点时出现了问题。我不仅将我的新节点插入到列表中，而且还在“dogs”之前插入了一个没有信息的节点。当我的代码当前运行时，输出如下所示：**cats** --> **and** --> (blank) --> **dogs** --> **make** --> **good** --> **pets**。

我 99.9% 确定问题出在代码的（如果当前！= null）部分，我只是不知道如何解决它。

除了我实际要添加的节点之外，我为什么还要插入一个空白节点？

```
public void insert () {

    System.out.println("Please enter the text you wish to insert, or type \"end\" if you are done inserting.");
    String theString;
    theString = console.nextLine();

    while (!theString.equals("end")){
        newNode = new Node ();
        newNode.info = theString;
        newNode.next = null;

        if (first == null){
            first = newNode;
            last = newNode;
        } else if (current != null){
            Node p = new Node (current.info, current.next);
            current.info = newNode.info;
            current.next = p;
        }
        else {
            last.next = newNode;
            last = newNode;
        }

        System.out.println("Please enter the text you wish to insert, or type \"end\" if you are done inserting.");
        theString = console.nextLine();
    }   
} 
```

**编辑**

整个程序很长，但这里有一个“setLine”方法，它将当前设置为用户希望插入节点的任何位置。它采用通过用户提示获得的参数“int line”。

```
public Node setLine(int line) {

    int index = 0;
    current = first;
    while (index < line) {
        previous = current;
        current = current.next;
        index++;
    }
    return current;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T04:15:56.500

这是正确插入节点的代码。这应该是一个很好的起点，祝你好运（您可以在这里阅读更多内容：[http](http://www.algolist.net/Data_structures/Singly-linked_list/Insertion) ://www.algolist.net/Data_structures/Singly-linked_list/Insertion ）。

```
public class SinglyLinkedList {

      public void addLast(SinglyLinkedListNode newNode) {    
            if (newNode == null)    
                  return;    
            else {    
                  newNode.next = null;    
                  if (head == null) {    
                        head = newNode;    
                        tail = newNode;    
                  } else {    
                        tail.next = newNode;    
                        tail = newNode;    
                  }    
            }    
      }

      public void addFirst(SinglyLinkedListNode newNode) {    
            if (newNode == null)    
                  return;    
            else {    
                  if (head == null) {    
                        newNode.next = null;    
                        head = newNode;    
                        tail = newNode;    
                  } else {    
                        newNode.next = head;    
                        head = newNode;    
                  }    
            }    
      }

      public void insertAfter(SinglyLinkedListNode previous,    
                  SinglyLinkedListNode newNode) {    
            if (newNode == null)    
                  return;    
            else {    
                  if (previous == null)    
                        addFirst(newNode);    
                  else if (previous == tail)   
                        addLast(newNode);    
                  else {    
                        SinglyLinkedListNode next = previous.next;    
                        previous.next = newNode;    
                        newNode.next = next;    
                  }    
            }    
      }    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-27T12:37:23.643

您可以参考以下基于索引在中间插入节点的方法。

```
public boolean insertInMiddle(int index, int data){

    boolean isInserted = false;

    Node node = new Node(data);
    Node temp = head;
    int i=0;
    if(index >= 0 && index <= size()){
        isInserted = true;
        if(index == 0){
            if(head !=null){
                node.nextNode = head;
                head.prevNode = node;
                head = node;
            }else{
                head = node;
                tail=node;
            }
        }else{
            while(i<index){
                temp = temp.nextNode;
                i++;
            }               
            if(temp == null){
                node.nextNode = temp;
                node.prevNode = tail;
                node.prevNode.nextNode = node;
                tail=node;
            }else{
                node.nextNode = temp;
                node.prevNode = temp.prevNode;
                temp.prevNode = node;
                node.prevNode.nextNode = node;
            }
        }
    }       
    return isInserted;
}

//Method to get the size
public int size(){
    int size = 0;

    Node node = head;
    if(node !=null){
        while (node !=null){
            size++;
            node = node.nextNode;
        }
    }

    return size;
} 
```

# c - 程序以较小的整数挂起

> ID：13262336
> 
> 赞同：0
> 
> 时间：2012-11-07T02:21:46.603
> 
> 标签：c

我在粘贴下面的代码时遇到问题，它只是在运行时挂起。VS2010 没有给我任何警告或错误。

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

void clear_buffer(void)
{
    while(getchar() != '\n');
}

int validate(int low, int high) {
    int num;

    scanf("%d", &num);
    while(num < low || num > high) 
    {
        clear_buffer();
        printf("INVALID! Must enter value between %d and %d: ", low, high);
        scanf("%d", &num);
    }
    return num;
}

int getRand(int max) {
    int number;
    number = rand() % max + 1;
    return number;
}

int validatePick(int pick, int one, int two, int three, int four, int five) {
    int valid = 0;

    if (pick != one && pick != two && pick != three && pick != four && pick != five) {
        valid = 1;
    } else {
        valid = 0;
    }
    return valid;
}
void prnt(int qty, int one, int two, int three, int four, int five, int six) {
    int i = 0, flag = 0;
    while (flag != 2) {
        flag = 0;
        if (sort2(&one, &two) == 0 && sort2(&three, &four) == 0 && sort2(&five, &six) == 0)
            flag = 1;
        if (sort2(&two, &three) == 0 && sort2(&four, &five) == 0)
            flag = 1;
        flag += flag;
    }

    printf("Picks: %d, ", one);
    while (i <= qty){
        if (i== 2 && qty == 2)
            printf("%d\n", two);
        else if (i == 2 && qty != 2) 
            printf("%d, ", two);

        if (i == 3 && qty == 3) 
            printf("%d\n", three);
        else if (i == 3 && qty != 3) 
            printf("%d, ", three);

        if (i == 4 && qty == 4)
            printf("%d\n", four);
        else if (i == 4  && qty != 4)
            printf("%d, ", four);

        if (i == 5 && qty == 5)
            printf("%d\n", five);
        else if (i == 5  && qty != 5) 
            printf("%d, ", five);

        if (i == 6 && qty == 6) 
            printf("%d\n", six);
        i++;
    }
}

int sort2(int *n1, int *n2) {
    int tmp, valid = 0;

    if (*n1 > *n2)
    {
        tmp = *n2;
        *n2 = *n1;
        *n1 = tmp;
        valid = 1;
    }
    return valid;
}

int main () {
    int num1, num2;
    int pick, one = 0, two = 0, three = 0, four = 0, five = 0, six = 0;

    srand(time(NULL));

    printf("LOTTERY GENERATOR\n");
    printf("Enter the maximum value between 1 and 100: ");
    num1 = validate(2,100);
    printf("Enter quantity of numbers to pick, between 1 and 6: ");
    num2 = validate(1, 6);

    one = getRand(num1);
    while (two == 0 || three == 0 || four == 0 || five == 0 || six == 0) {
        pick = getRand(num1);
        if (validatePick(pick, one, two, three, four, five) == 1 && two == 0)
            two = pick;
        else if (validatePick(pick, one, two, three, four, five) == 1 && three == 0)
            three = pick;
        else if (validatePick(pick, one, two, three, four, five) == 1 && four == 0)
            four = pick;
        else if (validatePick(pick, one, two, three, four, five) == 1 && five == 0)
            five = pick;
        else  if (validatePick(pick, one, two, three, four, five) == 1)
            six = pick;
    }
    prnt(num2, one, two, three, four, five, six);
} 
```

如果我输入 3 for`Enter the maximum value between 1 and 100`然后 2 程序就会挂起。我不明白为什么会这样。我没有在代码中看到错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T02:34:01.210

我认为问题在于你的逻辑。如果我正确理解该程序，您将尝试选择 6 个不同的数字，它们在从`1`到的范围内随机生成`num1`。

现在问题来了：只有当所有六个变量 ( , .. ) 都不是时，您的`while`循环才会终止。可以将这些变量之一设置为非零值的唯一方法是 if返回，并且*只有*在生成的随机数尚未分配给, ...之一时才会发生这种情况。`one``two``six``0``validatePick``1`*`one``two``six`*

 *这归结为类似反向鸽子洞问题。你试图用少于六只鸽子来填满六个鸽子洞，这是一项不可能完成的任务。

如果`num1`小于`6`，那么你不可能满足你的 while 循环的终止条件，你的程序似乎会挂起。

您可以通过在您的 while 循环中放置一个`else`案例并打印您生成的随机数以及在每次迭代中打印每个变量的值来验证这一点。

请注意，您的第二个输入 ,`num2`直到您的`while`循环之后才会以任何方式被引用，因此您在此处输入的值将无法限制您的程序尝试生成的唯一随机值的数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T02:28:46.877

这可能是由于缓冲。请注意，如果`3`输入，则检查通过并且`clear_buffer`不会被调用。尝试更改函数，以便在输入之后调用它。

这就是我不太喜欢的原因`scanf`——很容易忘记缓冲区的状态，并发现你的程序卡在一个循环中。我更喜欢阅读整行，例如，使用`fgets`，然后标记它并自己解析它。对于像这样的简单程序，它非常容易使用`strtol`，甚至只是`atoi`. 至少通过这种方式，我可以更直接地了解所有输入的许多边缘情况。*

# android - 谁能确认这个问题（某些 Android 设备上的文件描述符数量有限）？

> ID：13262339
> 
> 赞同：8
> 
> 时间：2012-11-07T02:22:20.447
> 
> 标签：android, galaxy

我目前正在开发一款很酷的 Android 游戏，该游戏即将发布。我们的一些 Beta 测试人员开始抱怨游戏崩溃并显示“打开的文件太多”错误消息。我尝试在 AVD 模拟器上模拟此问题，但无法重现该错误。

后来，我意识到只有我们的 Galaxy S3 和 Asus Nexus 7 测试人员在抱怨。我在 Android 的 bug tracker 上发现[了这个 bug 问题](http://code.google.com/p/android/issues/detail?id=39002)，这听起来与我发生的事情非常相似。

这听起来像是一个严重的架构问题，会影响所有内部 SD 卡设备。这些设备仅限于 1024 个文件描述符！有人可以确认这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T13:13:44.533

实际上，这个应用程序是否打开了很多文件并不重要。令人不安的是，**整个设备**仅限于 1024 个打开文件。以运行 100 个应用程序的 Galaxy S3 设备为例，每个应用程序同时打开 10 个文件（属性、数据库等）。这已经非常接近极限了。

如果您检查大多数设备上的最大打开文件限制 (/proc/sys/fs/file-max)，它远远超过 50K。

# c++ - () 的运算符重载以及它可以使用的不同方式和条件

> ID：13262351
> 
> 赞同：0
> 
> 时间：2012-11-07T02:25:10.697
> 
> 标签：c++, operator-overloading

我想知道如何重载 () 运算符

例如

```
class A{
    int a,b;
public:
    void operator()(int x, int y);
};

void A::operator()(int x, int y){
    x = a;
    y = b;
}

int main(){
    A a = new A();
    a(5,4); // this will call the overloaded operator
    return 0;
} 
```

我想知道以下是否还有其他用例以及可以调用它的任何其他场景。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T02:29:12.387

`operator()`就像任何其他功能一样。唯一的区别是`a.foo()`你写而不是调用它`a()`。

你可以像使用任何其他函数一样使用它，你可以尽可能多地重载它，它可以有你想要的任意数量的参数（包括零），它可以被模板化以及你能想到的任何其他函数可以做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T02:37:59.210

通常 operator() 用于给对象函数调用语义。如果您的对象可以被视为“做某事”，那么使用此运算符可能是有意义的。这些对象被称为函子。它们通常用于封装一些将重复执行的操作，尤其是在许多对象上。

请参阅 STL 标头`algorithm`以及`functional`有趣的示例和用法。

顺便说一句，您正在分配 A 但将其分配给对象而不是指针。当你分配 A 时，你正在打电话给你`A::operator()`，你的编译器应该抱怨。更改`A a = new A()`为类似`A* a = new A;`或更简单的内容`A a;`，因为`a`不需要存在于 main 的执行之外。如果您使用指针版本，您必须`operator()`像这样调用`(*a)(5,4);`

你的`A::operator()`意志也没有影响。和`x`参数`y`按值传递。而是通过引用传递它们。

# django - 在 Django 模板中重用对模板标签的调用

> ID：13262352
> 
> 赞同：0
> 
> 时间：2012-11-07T02:25:15.277
> 
> 标签：django

在 Django 模板中，我有一个 pinterest 样式的提要，每个块的底部都有一个头像图片。

我正在使用以下模板标签来显示头像图片：

`{% avatar user 40 %}`

```
def avatar(user, size=80):
    if not isinstance(user, User):
        try:
            user = User.objects.get(username=user)
            alt = unicode(user)
            url = avatar_url(user, size)
        except User.DoesNotExist:
            url = AVATAR_DEFAULT_URL
            alt = _("Default Avatar")
    else:
        alt = unicode(user)
        url = avatar_url(user, size)
    picpath= """<img src="%s" alt="%s" width="%s" height="%s" />""" % (url, alt,
            size, size)
    return picpath 
```

问题是这个模板标签每次都会调用数据库来提取头像图片的路径。

基本上我想要做的只是使这个调用所需的最少次数（即提取当前视图中的唯一用户并且只获取这些图片一次）

有没有办法在模板中做到这一点？或者我是否必须基本上改变我的观点才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T02:37:58.580

您可能想要使用[缓存](https://docs.djangoproject.com/en/1.3/topics/cache/)。您可以使用[模板片段缓存](https://docs.djangoproject.com/en/1.3/topics/cache/#template-fragment-caching)来缓存对`avatar`标记的调用：

```
{% load cache %}
{# Cache for 60 seconds; you can use any value you want here #}
{% cache 60 avatars %}
  {% avatar user 40 %}
{% endcache %} 
```

您还可以在视图中进行缓存：可以是[整个视图](https://docs.djangoproject.com/en/1.3/topics/cache/#the-per-view-cache)，也可以只[缓存您的结果](https://docs.djangoproject.com/en/1.3/topics/cache/#the-low-level-cache-api)。但是模板缓存可能是最简单的。

# facebook - 同一网址上有多个 Facebook app_id

> ID：13262354
> 
> 赞同：4
> 
> 时间：2012-11-07T02:25:36.803
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph, app-id

是否可以在同一页面上拥有两个 Facebook 应用程序 ID？我们希望这样做，因为我们正在向站点网络添加一个新的 Facebook 应用程序，但希望避免必须更新每个单独站点的应用程序。如果我们可以拥有多个应用程序，我们将能够在所有站点上维护一个应用程序，同时保留站点上旧应用程序的功能。

例如，为 app_id 添加两个打开的图形标签（Facebook linter 似乎同时接受了这两个标签，但我不确定这是否会产生其他问题/并发症）：

```
<meta property="fb:app_id" content="{APP ID 1}" /> 
<meta property="fb:app_id" content="{APP ID 2}" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T09:42:51.497

抱歉，没有。我们每页只允许一个应用程序。我认为第一个在我们的系统中获胜。您可以通过访问该 URL 的图形 API 轻松查询它（链接在 linter 中）。

# session - 如何在tomcat7的websocket中获取会话

> ID：13262359
> 
> 赞同：1
> 
> 时间：2012-11-07T02:26:39.380
> 
> 标签：session, websocket

这里我使用Tomcat7作为服务器。我将会话设置为：

```
http:/localhost:8080//Chat/login.action 
```

那么我怎样才能获得该会话：

```
ws://127.0.0.1:8080/Chat/chat.ws 
```

因为我希望每个人在进入聊天页面之前都登录。我需要的是他们提交时我决定在聊天页面中使用的用户名`login.action`

# mediawiki - Mediawiki 搜索代码块内的文本

> ID：13262368
> 
> 赞同：0
> 
> 时间：2012-11-07T02:28:40.680
> 
> 标签：mediawiki

我正在使用语法高亮扩展以及`<source>`mediawiki 中的代码块标签。那工作正常。但是，我无法在这些代码块中搜索文本？是否有任何扩展来修复它？

问题：我无法搜索“ifconfig”，因为它位于代码块内

```
<source>
ifconfig
</source> 
```

有什么帮助吗？

我正在使用以下设置：

```
* Windows 7
MediaWiki - 1.19.2
PHP - 5.4.4 (apache2handler)
MySQL - 5.5.25a
Installed Extensions - SyntaxHighlight (Version 1.0.8.10) 
```

# android - 将文件与应用关联

> ID：13262374
> 
> 赞同：0
> 
> 时间：2012-11-07T02:29:39.060
> 
> 标签：android

我想将图像文件（jpg、png、gif）关联到我的应用程序。因此，当一个人在他们的设备上点击一个 jpeg 文件时，它会询问他们想要用什么应用程序打开它，或者如果这是他们的默认设置，则用我的应用程序打开它。如何才能做到这一点？除了用户信息，我在 Google 上找不到任何信息，而不是开发者信息。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T04:27:10.103

您必须将此意图过滤器放在 Android Manifest 中的 Activity 中：

```
<intent-filter>
    <action android:name="android.intent.action.VIEW" />
    <category android:name="android.intent.category.DEFAULT" />
    <data android:scheme="file" />
    <data android:host="*" />
    <data android:pathPattern=".*\\.jpg" />
</intent-filter> 
```

对于您想使用您的应用程序打开的每种文件类型。

# javascript - 试图在表 td 上绑定点击操作

> ID：13262376
> 
> 赞同：2
> 
> 时间：2012-11-07T02:30:08.323
> 
> 标签：javascript, jquery, html, html-table, onclick

我正在尝试向 html 表格的单元格添加单击操作。

这是我的 Javascript ：

```
$(document)
    .ready(

function () {
    function setColor(cell) {
        var cssRed = {
            "color": '#ff0000'
        }
        var cssBlue = {
            "color": '#0000ff'
        }
        if (cell.css('color') == '#ff0000') cell.css(cssBlue);
        else cell.css(cssRed);
    }
    $('td').click(function () {
        setColor($(this));
    });
}); 
```

这是我的 HTML

```
 <table style="text-align: center" border='1'>
    <tbody>
        <tr>
            <td>Data</td>
            <td>Data</td>
            <td>Data</td>
        </tr>
        <tr>
            <td>Data</td>
            <td>Data</td>
            <td>Data</td>
        </tr>
        <tr>
            <td>Data</td>
            <td>Data</td>
            <td>Data</td>
        </tr>
    </tbody>
</table> 
```

这应该改变单击单元格中文本的颜色。我正在尝试制作类似于[http://whenisgood.com中的网格的东西](http://whenisgood.com)

虽然，由于某种原因，它不断进入`else`if 的语句（在`setColor`方法中）。所以显然这种比较`cell.css('color') == '#ff0000'`每次都失败。我在这里做错了什么？

编辑：我发出警报，`cells.css('color')`这是输出：起初`rgb(11,4,0)`

然后在第二次点击后：`rgb(255,0,0)`

edit2：起初我尝试将颜色分配为`blue`和`red`字面意思。但是它不起作用（即使我正在与`blue`and进行比较`red`）。我猜 Javascript 不会编组`red`为 Hex 或 RGB，对吧？

编辑3：如果您投反对票，请告诉我原因，我会尝试更新问题以使其变得更好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T02:33:12.850

正如人们所建议的那样，不同的浏览器可能会返回不同的颜色值。

jQuery 的[`css()`文档](http://api.jquery.com/css)证实了这一点。

> 不同的浏览器可能会返回逻辑上但文本上不相等的 CSS 颜色值，例如 #FFF、#ffffff 和 rgb(255,255,255)。

**所以我建议改用 CSS 类：**

***CSS***

```
.red {
    color: #ff0000;
}
.blue {
    color: #0000ff;
} 
```

***jQuery***

```
$(document)
.ready(
        function() {
            function setColor(cell){
                var shouldSwitch = cell.hasClass("red");
                cell.toggleClass("red", !shouldSwitch);
                cell.toggleClass("blue", shouldSwitch);

            }
                $('td').click(function(){
                    setColor($(this));
                  });
            }); 
```

**[这是一个工作演示。](http://jsfiddle.net/FjKCG/1/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T04:19:53.653

我假设 td 的默认颜色是红色。

所以只需将你的 CSS 设置为

```
td{color:#ff0000;}
td.highlight{color:#0000ff;} 
```

和脚本

```
$(document).ready(function () {
    function setColor(cell) {
        $(this).toggleClass('highlight');
    }
    $('td').click(setColor);
}); 
```

演示在[http://jsfiddle.net/zqytM/](http://jsfiddle.net/zqytM/)

# ios - 将多个对象添加到核心数据实体的最佳方法是什么？

> ID：13262379
> 
> 赞同：1
> 
> 时间：2012-11-07T02:30:28.513
> 
> 标签：ios, core-data

我正在为学校项目开发单位转换器，并希望使用核心数据。对于所有不同类型的转换（单位、长度、温度、压力、时间等），我有很多转换因子。添加转换因子的最佳方法是什么？我知道如何一次添加一个对象：

```
[NSEntityDescription insertNewObjectForEntityName:entity inManagedObjectContext:context]; 
```

但是有没有更简单的方法可以让我不必输入 4 行代码来输入一个对象？

谢谢

# javascript - 如何检查是否选择了 4 个列表框中的 1 个中的至少一项

> ID：13262380
> 
> 赞同：0
> 
> 时间：2012-11-07T02:30:31.127
> 
> 标签：javascript, validation

我正在尝试为多选列表框编写一个 JS 验证函数。

我有 4 个多选列表框，我需要检查用户是否从至少一个列表框值中进行了选择。也就是说，在 4 个列表框中，用户应该从至少 1 个列表框（任意数量的值）中进行选择。

这是我正在编写的函数，

```
function validate(form)
{
    if ((document.getElementById("A").value=='') || (document.getElementById("B").value=='') || (document.getElementById("C").value=='') || (document.getElementById("D").value=='')) 
    {                                           
        if (0 < message.length) { message += "\n"; }
        message += "You must select atleast one of the listbox items ";

    }
} 
```

我知道问题出在 OR 条件上。**除非选择了每个**列表框中的1 个值，否则不允许保存表单。

但是我需要检查是否应该选择**至少 1 个列表框**（任意数量的项目）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T02:38:27.677

您需要更改为使用 AND 条件，这将是适当的悲伤路径方法：

```
if (document.getElementById("A").value == '' && 
    document.getElementById("B").value == '' && 
    document.getElementById("C").value == '' && 
    document.getElementById("D").value == '') {

    //then they didn't select AT LEAST ONE item
 }
 else {       
    //they did pick at least one
 } 
```

编辑：

您可以通过执行以下操作来采用快乐路径方法：

```
 if (document.getElementById("A").value !='' || 
     document.getElementById("B").value !='' || 
     document.getElementById("C").value !='' || 
     document.getElementById("D").value !='') {

     //then they did select AT LEAST ONE item
  }
  else {       
     //they didn't pick at least one
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-25T07:49:05.750

有一个更简单的方法来做到这一点：

```
element = document.getElementById("myid");
selected_index = element.selectedIndex; 
```

如果我的列表框中没有选定的元素，则**selected_index**将返回**-1** ，这是因为我们知道列表框中的项目索引**从 0 到 (n) ，所以如果没有选择，则将其设置为****-1**是有意义的 剩下的取决于你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T02:32:07.277

您需要使用`&&`运算符，这意味着，如果未选择所有四个一起，那么您要显示消息。

使用条件，它的工作方式不同，即**如果未选择任何框**`||`，它将设置显示的消息。

 **记住，对于`||`和`false|| true|| false|| false ->> true` 对于`&&`，`false && true && false && false ->> false`

在您的情况下，例如，选择了一个选择框，然后因为`false|| true|| false|| false ->> true`，它仍然会进入`if`您不想要的内部。相反，如果没有选择所有选择框，您想在里面输入，即`true && true && true && true --> true`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T03:15:11.033

继续验证...我有一个在数据库中设置为唯一的文本字段。我编写了一个 Java 函数，通过与数据库值进行比较来检查字段是否唯一。

现在我的验证在 servlet 中工作正常，并且用户被提示使用新屏幕。

有没有一种方法可以使用 java 函数弹出警报，就像我们在使用 java 脚本时如何进行 UI 验证一样？

我相信 JS 仅用于 UI 验证，但想检查是否有一种方法可以通过与数据库值进行比较来进行验证？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-07T03:25:46.983

请注意，如果所选选项没有 value 属性，则选择元素的值在 IE 中可能为 ""。最好检查选择元素的*selectedIndex*属性。

此外，如果没有选项具有 selected 属性，则某些浏览器可能会默认选择第一个选项，而其他浏览器可能不会，因此*selectedIndex*可能是 0 或 -1 而没有用户输入。一个稳健的策略是始终将一个选项（通常是第一个）设置为默认选择的选项。

如果默认值始终是第一个选项，并且您的所有选择元素都具有 ID 属性，您可以执行以下操作：

```
function checkSelects(ids) {
  var i = ids.length;
  while (i--) {
    if (document.getElementById(ids[i]).selectedIndex) {
      return true;
    }
  }
  return false;
} 
```

请注意，如果选择元素具有名称（它们必须在表单中成功），您还可以执行以下操作：

```
function checkSelects(form, names) {
  var i = names.length;
  while (i--) {
    if (form[names[i].selectedIndex) {
      return true;
    }
  }
  return false;
} 
```**

# python - 在字典列表中查找最大值

> ID：13262382
> 
> 赞同：2
> 
> 时间：2012-11-07T02:30:53.360
> 
> 标签：python, data-structures

给定一个数据结构：

```
 [
    {'id':0, 'items': 
      [
       {'id': 0,  name: "Tom1", age: 10}, 
       {'id': 0, name: "Mark1", age: 15}, 
       {'id': 0, name: "Pam1", age: 17}
      ]
    },
    {'id':1, 'items': 
      [
       {'id': 1,  name: "Tom12", age: 8}, 
       {'id': 1, name: "Mark12", age: 3}, 
       {'id': 1, name: "Pam12", age: 2}
      ]
    },

    {'id':2, 'items': 
      [
       {'id': 2,  name: "Tom13", age: 55}, 
       {'id': 2, name: "Mark13", age: 66}, 
       {'id': 2, name: "Pam13", age: 77}
      ]
    },
  ] 
```

我想在每个字典中找到年龄具有最大值的项目并选择它。我该如何做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T02:35:59.597

试试这个：

```
for dVals in yourData:
    print max(dVals['items'], key=lambda x:x['age']) 
```

或单线：

```
print [max(dVals['items'], key=lambda x: x['age']) for dVals in yourData]

{'id': 0, 'age': 17, 'name': 'Pam1'}
{'id': 1, 'age': 8, 'name': 'Tom12'}
{'id': 2, 'age': 77, 'name': 'Pam13'} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T02:35:47.150

```
def find_largest_age(entry):
  return max(entry['items'], key=lambda d: d['age'])

map(find_largest_age, data_structure) 
```

`map`将函数应用于您的顶级列表中的每个条目。

`max`将调用列表中`key`每个成员提供的函数，`'items'`并返回该函数为其提供最大值的函数。

请注意，您可以将其设为单线：

```
map(lambda e: max(e['items'], key=lambda d: d['age']), data_structure) 
```

但这更难读。

# ios - MonoTouch：CLLocationManagerDelegate 更新位置

> ID：13262385
> 
> 赞同：3
> 
> 时间：2012-11-07T02:31:56.600
> 
> 标签：ios, xamarin.ios

CLLocationManagerDelegate 中的 UpdatedLocation 现已过时。

我将如何获得此功能以及在什么新功能调用下？

老的：

```
 public override void UpdatedLocation (CLLocationManager manager, CLLocation newLocation, CLLocation oldLocation)
        {
            manager.StopUpdatingLocation ();
            locationManager = null;
            callback (newLocation);
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T06:55:41.523

从 iOS 6 开始，您必须覆盖`LocationsUpdated`委托中的方法：

```
public override void LocationsUpdated (CLLocationManager manager, CLLocation[] locations)
{
    // Code
} 
```

该`locations`参数将始终包含至少一个`CLLocation`对象，并且最近的位置将是数组中的最后一项：

```
CLLocation recentLocation = locations[locations.Length - 1]; 
```

如果您的应用支持 iOS 5，则可以保留该`UpdatedLocation`方法。无需进行其他更改，调用`StartUpdatingLocation`和时同样适用`StopUpdatingLocation`。

这在 Apple 关于`CLLocationManager`'s `startUpdatingLocation`method [here](https://developer.apple.com/library/ios/documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html#//apple_ref/occ/instm/CLLocationManager/startUpdatingLocation)的文档中进行了解释。

# javascript - JavaScript 事件状态机

> ID：13262392
> 
> 赞同：33
> 
> 时间：2012-11-07T02:33:14.087
> 
> 标签：javascript, state-machine

有人知道状态机的任何 javascript 实现吗？我的目标是设置一个状态机实现，将事件绑定到状态转换。因此，如果用户单击按钮，则状态将被更改，并且此状态可能会在要更改的对象中定义某些值。

我希望这是一个状态机，因为会有一个规则 json 文件，允许在调用某些事件时指示各种对象的哪些值发生变化。因为这将在文件中进行结构化，所以我认为将这些信息解析为状态机对象会很容易。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-26T15:58:50.247

js 中有两个用于有限状态机的主要库：

1/ [Machina](https://github.com/ifandelse/machina.js)：非常有据可查的示例，支持两个开箱即用的 JavaScript 消息总线提供程序：[postal.js](https://github.com/postaljs/postal.js)和[amplify.js](https://github.com/aws-amplify/amplify-js)。

2/ [Javascript 状态机](https://github.com/jakesgordon/javascript-state-machine)：更简单易用，非常适合“基本”用途。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-12-23T20:07:40.580

我最近在 JS 中构建了一个状态机实现，这当然是最容易配置的，这要归功于它的转换 DSL：

```
transitions: [
  'next    : intro > form > finish',
  'back    : intro < form           < error',
  'error   :         form >           error',
  'restart : intro        < finish'
] 
```

它在配置和事件处理程序分配方面非常灵活，您可以在运行时添加和删除状态，暂停和恢复转换，挂钩到大量事件，以及 jQuery 和响应式框架（如 Vue）的帮助程序：

![状态机演示](../Images/285165a9cc7d28760df96e7106db16b6.png)

文档和大量演示在这里：

*   [http://statemachine.davestewart.io](http://statemachine.davestewart.io)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-01-26T18:58:32.907

我的状态机的一点点提升：stateflow 我刚刚创建了我自己的状态机，因为我没有找到对我来说足够简单的状态机。

流是用一个 js 对象定义的，其中属性是状态名称，值是另一个具有以下属性的 js 对象。

*   类型：开始、结束或状态（默认）。
*   动作：将状态实例对象设置为此的函数，也可以命名为先前注册的动作或另一个流定义，在这种情况下它是一个子流。
*   on：属性是要匹配的事件，值是要转到的下一个状态

简单的例子

```
var stateflow = require('stateflow');
var flow = new stateflow.StateFlow({
   a: {
       type:'begin',
       action: function(complete) {
           // do something
           complete('done');    
       },
       on: {
           done:'b',
           again:'a'
       }
   }, 
   b: {
       type:'end',
       action: function(complete) {
           complete('finished');
       }
   }
});
flow.start(function(event) {
   console.log('flow result:', event);
}); 
```

[在 git https://github.com/philipdev/stateflow](https://github.com/philipdev/stateflow)或通过 npm查看

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-06-06T08:45:53.273

尝试查看[https://github.com/steelbreeze/state.js](https://github.com/steelbreeze/state.js) - 它支持 UML 2 规范中描述的大部分状态机语义，同时仍然具有高性能。文档的方式并不多，但是示例和测试应该提供很好的参考。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-09-03T23:33:55.940

您会发现使用 jQuery 设计的库似乎可以满足您的需求并自动为您绑定事件：

*   [https://github.com/lucaong/jquery-machine](https://github.com/lucaong/jquery-machine)（参见示例[https://github.com/lucaong/jquery-machine/blob/master/examples/onoff.html](https://github.com/lucaong/jquery-machine/blob/master/examples/onoff.html)）
*   [https://github.com/intersel/iFSM](https://github.com/intersel/iFSM)（参见示例[https://github.com/intersel/iFSM/blob/master/Examples/Example_1.html](https://github.com/intersel/iFSM/blob/master/Examples/Example_1.html)）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-03-28T17:31:14.497

我选择 js-fsm 微型库。

**特征**

*   基于状态的 FSM 描述。由一个和一个状态转换数组组成的状态。
*   从事件过渡。多个事件定义 ORed 事件。
*   从条件过渡。条件是一个键：应该在条件对象上匹配的值对。多个键、值对定义了 AND 条件。多个条件定义 ORed 条件
*   每个转换都可以选择调用动作或多个动作。动作可以选择有参数或成为 this 的成员。
*   状态机可以混合（作为混合）到现有对象或构造函数的原型。为此提供了一种方法。
*   如果在此存在或提供了日志方法，则状态机可以选择记录。
*   支持 AMD 和 Node 模块。
*   使用 QUnit 进行单元测试。

[js-fsm github 页面。](https://github.com/basos9/js-fsm)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-01-16T14:24:43.173

我想我也会谈谈我自己的状态机库。两年前我遇到了这个 SO 问题，找不到任何符合我要求的东西，所以我写了[state-transducer](https://github.com/brucou/state-transducer)。

API 的主要目标是：

*   功能性 API，完全没有效果，具有封装的内部状态
*   通用性和可重用性（没有提供适应特定用例或框架的规定）
*   必须可以在当前设计之上添加并发和/或通信机制
*   必须能够顺利集成到 React、Angular 和您的流行框架中

它用于[建模用户界面](https://github.com/brucou/movie-search-app/blob/specs-all/article/article.md)，转变用户流程。

![用户流](../Images/e63f665b44555ecd5bcb48910d3bf061.png)

进入状态机

![fsm](../Images/571ce3543862e5d326c7469b550e8401.png)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-07-17T10:19:23.183

您可能会发现这个使用库：

[https://www.npmjs.com/package/mistic](https://www.npmjs.com/package/mistic)

免责声明：我维护它。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-09-25T03:15:50.670

**[AsyncMachine](https://github.com/TobiaszCudnik/asyncmachine)**是另一种不太正统的 JS 状态机方法（我是作者）。它是相关的并且支持同时处于活动状态的多个状态。这里有一些代码可以回答您最初的问题 - 单击按钮后，在新状态和上下文对象上的属性方面会产生副作用：

```
const {
  machine
} = asyncmachine
// define states & relations
const state = {
  Clicked: {
    add: ['ShowFooter']
  },
  ShowFooter: {}
}
const example = machine(state)
// define handlers
example.Clicked_state = function() {
  this.timeout = setTimeout(
    this.dropByListener('Clicked'), 3000)
}

function render() {
  console.log('render')
  // get all the active state as class names
  const classes = example.is().join(' ')
  console.log(classes)
  document.getElementById('content').innerHTML = `
    <div class="${classes}">
      <button>CLICK</button>
      <footer>FOOTER</footer>
    </div>
  `
}
document.getElementById('content').addEventListener(
  'click', example.addByListener('Clicked'))
// bind render to any state change
example.on('tick', render)
render()
```

```
.Clicked button {
  background: red;
}

footer {
  display: none;
}

.ShowFooter footer {
  display: block
}
```

```
<script src="https://unpkg.com/asyncmachine@3.4.1/dist/asyncmachine.umd.js"></script>
<div id='content' />
```

还有一个检查员可以可视化您的机器的工作方式（通过时间旅行），例如：

[![在此处输入图像描述](../Images/46f542b5df535021aaf5a44fe061dbd4.png)](https://i.stack.imgur.com/KsaIa.gif)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-01-07T05:30:41.040

我使用过[xtstate](https://xstate.js.org/docs/)，它几乎解决了问题中发布的所有问题。它有一个很棒的[可视化工具](https://xstate.js.org/viz/)试试看。

# opengl - 如何定义形状 PyOpenGL 的轮廓

> ID：13262393
> 
> 赞同：0
> 
> 时间：2012-11-07T02:33:29.720
> 
> 标签：opengl, python-3.x, pyopengl

我有一个问题，我在 PyOpenGL 的场景中有很多球体，但我无法区分一个球体和另一个球体。

如何在形状上创建轮廓？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T13:39:04.167

下面给出了使用固定管道 (< OpenGL-3.x) 在网格周围创建轮廓或轮廓的简单方法：

1.  禁用照明：glDisable(GL_LIGHTING)
2.  为轮廓选择一种颜色：glColor(R, G, B)
3.  开启正面剔除：glCullFace(GL_FRONT)
4.  将网格（球体）缩放一小部分：glScale(sx, sy, sz)
5.  像往常一样渲染球体： glutSolidSphere(radius, slices, stacks)

使用核心配置文件 OpenGL 3.x 或更高版本，您将执行完全相同的操作，但改为使用顶点着色器。

使用固定管道实现这一点所需的代码很简单：

```
 # Render silhouette around object
    glPushMatrix()
    glCullFace(GL_FRONT) # Front face culling makes us render only the inside of the sphere, which gives the illusion of a silhouette
    glScale(1.04, 1.04, 1.04) # This makes the silhouette show up around the object
    glDisable(GL_LIGHTING) # We only want a plain single colour silhouette
    glColor(0., 1., 0.) # Silhouette colour
    glutSolidSphere(2,20,20) # This can be any object, not limited to spheres (even non-convex objects)
    glPopMatrix() 
```

[下面是一个简单的 PyOpenGL 程序示例，它基于http://code.activestate.com/recipes/325391-open-a-glut-window-and-draw-a-sphere](http://code.activestate.com/recipes/325391-open-a-glut-window-and-draw-a-sphere-using-pythono/)中的 GLUT 示例渲染一个带有轮廓的球体[-使用-pythono/](http://code.activestate.com/recipes/325391-open-a-glut-window-and-draw-a-sphere-using-pythono/)：

```
from OpenGL.GLUT import *
from OpenGL.GLU import *
from OpenGL.GL import *
import sys

name = 'ball_glut'

def main():
    glutInit(sys.argv)
    glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGB | GLUT_DEPTH)
    glutInitWindowSize(400,400)
    glutCreateWindow(name)

    glClearColor(0.,0.,1.,1.)
    glShadeModel(GL_SMOOTH)
    glEnable(GL_CULL_FACE)
    glEnable(GL_DEPTH_TEST)
    glEnable(GL_LIGHTING)
    lightZeroPosition = [10.,4.,10.,1.]
    lightZeroColor = [1.0,1.0,1.0,1.0]
    glLightfv(GL_LIGHT0, GL_POSITION, lightZeroPosition)
    glLightfv(GL_LIGHT0, GL_DIFFUSE, lightZeroColor)
    glLightf(GL_LIGHT0, GL_CONSTANT_ATTENUATION, 0.1)
    glLightf(GL_LIGHT0, GL_LINEAR_ATTENUATION, 0.05)
    glEnable(GL_LIGHT0)
    glutDisplayFunc(display)
    glMatrixMode(GL_PROJECTION)
    gluPerspective(40.,1.,1.,40.)
    glMatrixMode(GL_MODELVIEW)
    gluLookAt(0,0,10,
              0,0,0,
              0,1,0)
    glPushMatrix()
    glutMainLoop()
    return

def display():
    glClear(GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT)
    glMatrixMode(GL_MODELVIEW)

    # Render sphere normally
    glPushMatrix()
    color = [1.0,0.,0.,1.]
    glMaterialfv(GL_FRONT,GL_DIFFUSE,color)
    glCullFace(GL_BACK)
    glEnable(GL_LIGHTING)
    glutSolidSphere(2,20,20)

    # Render silhouette around object
    glPushMatrix()
    glCullFace(GL_FRONT) # Front face culling makes us render only the inside of the sphere, which gives the illusion of a silhouette
    glScale(1.04, 1.04, 1.04) # This makes the silhouette show up around the object
    glDisable(GL_LIGHTING) # We only want a plain fixed colour silhouette
    glColor(0., 1., 0.) # Silhouette colour
    glutSolidSphere(2,20,20) # This can be any object, not limited to spheres (even non-convex objects)
    glPopMatrix()

    glPopMatrix()
    glutSwapBuffers() # Display results.
    return

if __name__ == '__main__': main() 
```

# shell - shell 脚本中的“find”命令出错

> ID：13262395
> 
> 赞同：0
> 
> 时间：2012-11-07T02:34:10.380
> 
> 标签：shell, unix

我正在编写一个脚本来查找具有相同权限的文件，然后将命令行中的一些可选命令应用于它们。几个小时后，我想出了这段代码

命令行将是这样的：

```
codename 644 ls -l 
```

脚本是以下代码：

```
#!/bin/sh
permission=$1
shift
find . -maxdepth 1 -perm $permission exec $* {} \; 
```

我相信 exec 任务在移动第一个命令（此处为 644）后将结果重定向到命令行。如果我错了，请纠正我。我的问题是，当我在命令行中使用 find 行时，它工作得很好，但是在脚本中使用它之后，它给了我一个错误

./codename 664 ls -l find：路径必须在表达式之前：exec 用法：find [-H] [-L] [-P] [-Olevel] [-D help|tree|search|stat|rates|opt|exec ] [路径...] [表达式]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T02:35:18.120

你忘记了`$`for 权限和`-`for `exec`，所以

```
find . -maxdepth 1 -perm $permission -exec $* {} \; 
```

# templates - Modx Revo：getResources 不显示数据

> ID：13262396
> 
> 赞同：0
> 
> 时间：2012-11-07T02:35:01.053
> 
> 标签：templates, content-management-system, modx, modx-revolution, getresource

我有一个名为“我的项目”的资源，其 getResources 语法如下：

```
[[!getResources? &parents=`5`  &tpl=`protmp` ]] 
```

我用作模板的块“protmp”很简单：

```
<div class="indivproj">
[[*pagetitle]]
</div> 
```

资源 ID 5 下只有两个子资源。使用上面的代码，我希望它能够显示他们的名字。

然而，当我查看“我的项目”资源时，我只会将父资源的标题重复 4 次，例如：

```
My Projects
My Projects
My Projects
My Projects 
```

有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T03:39:33.303

在你的块中 [[*pagetitle]] 应该是 [[+pagetitle]] 如果你仍然没有得到结果，从 getResources 调用中省略 &tpl 属性，如果它返回任何东西，它会将结果直接转储到页。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T09:38:00.203

明白了：这似乎是 Seans 的回答和我在打开文本编辑器的情况下写下这行的事实的混合体。我将其关闭并更改`[[*pagetitle]]`为`[[+pagetitle]]`，它工作正常。这很奇怪，因为我认为这无关紧要......

# android - 根据先前活动的整数更改视图

> ID：13262400
> 
> 赞同：0
> 
> 时间：2012-11-07T02:35:45.450
> 
> 标签：android, android-layout, android-intent

我正在尝试根据用户在上一个活动中拖动的视图来更改活动的视图，但是我的代码中有问题并且它拒绝工作。

整数存储为公共静态 int _id，并且为每个视图设置整数，如下所示：

```
RelativeLayout.LayoutParams layoutParams = new RelativeLayout.LayoutParams(150, 50);
layoutParams.leftMargin = 250;
layoutParams.topMargin = 250;
layoutParams.bottomMargin = -250;
layoutParams.rightMargin = -250;
_view.setLayoutParams(layoutParams);
_view.setOnTouchListener(this);
_view.setId(1); 
```

然后通过这段代码将整数发送到下一个活动。

```
 case MotionEvent.ACTION_UP:  
        _id = view.getId();
        Intent intent = new Intent(MainActivity.this, Exit_Activity.class);
        intent.putExtra("smiley", _id);
        startActivity(intent); 
```

然后理论上应该在下一个活动中接收它并定义在屏幕顶部可见的视图。

```
public class Exit_Activity extends Activity {
ImageView _view;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_exit_);
    getActionBar().setDisplayHomeAsUpEnabled(true);
    Intent Intent = getIntent();
    int intValue = Intent.getIntExtra("smiley", 0);

    ImageView img = new ImageView(this);
    img.setImageResource(R.drawable.smile);    
if (intValue == 1) {img.setImageResource(R.drawable.smile);}
else if (intValue == 2) {img.setImageResource(R.drawable.frown);}
 }
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_exit_, menu);
    return true;
} 
```

现在，无论拖动什么视图，它似乎都没有做任何事情。任何输入将不胜感激。

编辑：

对于额外的布朗尼积分，我正在尝试对文本做同样的事情，它看起来有点像这样：

```
 TextView textView = (TextView) findViewById(R.id.DynRes);
setContentView(R.id.DynRes);
if (intValue == 1) {DynRes.setText("Good to hear! have a nice day!");}
else
    if (intValue == 2) {DynRes.appendText("We're very sorry, we'll try harder next time!");} 
```

}

我在 Eclipse 中收到一个错误，上面写着“DynRes 无法解决”，我并不完全清楚为什么。再次感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T03:09:36.460

传递额外的数据看起来是正确的。打印你收到的价值，看看你得到了什么。并将您的图像添加到任何父母使用

```
parent.addView(img); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T03:21:20.763

它什么都不做的原因是因为您没有抓取现有的 ImageView 并对其进行操作（例如，通过 findViewById()）。相反，您只是在创建一个新的 ImageView。您需要获取现有的图像视图或将新创建的图像添加到您的内容视图的视图组中。

编辑：

您对如何设置 Activity 的内容视图以及通过 id 查找视图的含义有一个基本的误解。

1.  您的每个活动都有一个主要内容视图。您可以通过调用 setContentView 并传入其中一个布局 (R.layout.somelayout) 的 id 在 onCreate 中进行设置。您传入的整数 id 只是位于名为 R.java 的自动生成类内部的公共静态 int。该类内部是多个嵌套的静态类，例如`public static final class layout`和`public static final class id`。Android 资产打包工具 (aapt) 获取您的应用程序资源文件（在 XML 中定义的东西）并编译它们，以便您可以在代码中引用它们。因此，例如，没有名称为 Dynres 的类型或变量等。只有一个公共 int，您可以将其引用为 R.id.Dynres。但是，同样，您可以将该 int 视为您的 xml 资源的编译表示。这让我想到了下一点。
2.  findViewById is a method that can search inside of some ViewGroup (viewgroup being some view that can hold other children, like a linearlayout or a relativelayout (as opposed to TextView and other widgets that do not contain children)) to find a child view with the id of the one you passed in. So, for example if you have reference to some View, you can call someView.findViewById(R.id.someId) which will try to find a view with that id anywhere in that view's hierarchy. If there is no such view with that id inside of that view, then it returns null. Now, you can also call findViewById inside of an Activity, which simply searches inside of the layout that you set as the contentView of your Activity for that child view. So, for example, if you set the contentview of your Activity like setContentView(R.layout.mylayout) and mylayout.xml was some linearlayout that had a textview inside of it with the id of 'my_textview' then you can do findViewById(R.id.my_textview). Ok, great this finds the view, but now, to actually have a TextView *对象*就像在 Java 对象中一样，您可以将其作为 TextView 使用并调用方法，您需要将该视图转换为 TextView。因此，`TextView tv = (TextView)findViewById(R.id.my_textview)`只需使用 id 来查找该视图，然后将其转换为分配给变量“tv”的 TextView 类型的对象，因此现在 tv 是您需要用来调用方法等的对象。因此，您的代码需要`beDynRes.setText("Good to hear! have a nice day!")`
3.  您不想将 contentview 设置为 textview。contentview 应该是在包含 textview 的 xml 布局中定义的某个 ViewGroup。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T03:26:21.220

如果您在 Exit_Activity 中有一个布局，那么您可以使用`(layout).addView(img);`或像 Sean John 所说的另一个父级。否则，您可以使用将其添加到活动中`this.AddContentView(img,new LayoutParams(...));`

# php - PHP 中的 JavaScript 不起作用（document.getElementById）

> ID：13262402
> 
> 赞同：5
> 
> 时间：2012-11-07T02:35:53.327
> 
> 标签：php, javascript, iframe, document, getelementbyid

发生了一些奇怪的事情，但我似乎无法让 JavaScript 代码`document.getElementById`在 PHP 中工作......

例如，将以下 PHP 代码（如下）加载到 PHP 文件中并运行它，有没有 JavaScript 警报？但是，如果您复制 PHP 回显（或打印）的源代码并将其作为 HTML 文件运行，是否会出现 JavaScript 警报？因此，在 PHP 标记内创建的任何元素都不会在 JavaScript 中运行，即使 JavaScript 保留在 PHP 标记之外？

下面是 PHP 演示代码：

```
<?php 
print "
<iframe id='my_id' name='my_id' src='http://www.php.com/'></iframe>

<SCRIPT LANGUAGE='javascript'> 
document.getElementById('my_id').contentWindow.onload = function(){
    alert('content loaded');
}
</SCRIPT>
";
?> 
```

如果这只是您的代码，它甚至不起作用：

```
<iframe id='my_id' name='my_id' src='<?php echo"http://www.php.com/"; ?>'></iframe>

<SCRIPT LANGUAGE='javascript'> 
document.getElementById('my_id').contentWindow.onload = function(){
    alert('content loaded');
}
</SCRIPT> 
```

这是出现的源代码（根据要求）（`contentWindow.onLoad`对于与我在 Safari 中的域不同的内容也可以正常工作）：

```
<iframe id='my_id' name='my_id' src='http://www.php.com/'></iframe>

<SCRIPT LANGUAGE='javascript'> 
document.getElementById('my_id').contentWindow.onload = function(){
    alert('content loaded');
}
</SCRIPT> 
```

我的问题是，在 HTML 中，此代码工作正常，并且调用了警报....在 PHP 中，代码不起作用，并且从未调用过警报... PHP 处理方式`document.getElementById`有问题，没有任何问题`.contentWindow.onload`.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-09T06:11:29.580

```
<iframe id='my_id' onload="alert('Content Loaded');" name='my_id' src='http://www.php.com/'></iframe> 
```

或更好

```
<iframe id='my_id' onload='ShowAlert();' name='my_id' src='http://www.php.com/'></iframe>   

<script type='text/javascript'>
function ShowAlert(){
    alert('Content Loaded');
}
</script> 
```

或者如果你想回应它

```
<?php
echo "<iframe id='my_id' onload='ShowAlert();' name='my_id' src='http://www.php.com/'></iframe>   

<script type='text/javascript'>
function ShowAlert(){
    alert('Content Loaded');
}
</script>"; ?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T07:07:51.040

```
<iframe id='id' onload='display();' name='my_id' src='www.test.com'></iframe>   

<script type='text/javascript'>
function display(){
    alert('Loading');
}
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T12:36:35.287

它失败是因为您`document.getElementById`在加载文档之前调用，如果您想像这样附加框架`onload`处理程序，您需要将调用`document.getElementById`放在 body`onload`中。

就像是：

```
<script>
    function loaded() {
        document.getElementById('my_id').contentWindow.onload = function(){
            alert('content loaded');
        }
    }
</script>
<body onload="loaded()">
<iframe id='my_id' name='my_id' src='http://www.php.com/'></iframe>
</body> 
```

更好地抓住像[jQuery](http://jquery.com)这样的框架并使用`domready`事件。将所有 javascript 代码包装在`domready`处理程序中是非常标准的。

其他人提到的另一种方法是通过将框架放在 html 中直接附加框架 onload 处理程序。

PHP 在这里没有任何作用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T20:56:14.337

将该函数附加到 DOM 本身的 onLoad 上，而不是附加到 DOM 元素的 contentWindow 上。

```
<iframe id='my_id' name='my_id' src='http://www.php.com/'></iframe>

<script> 
    document.getElementById('my_id').onload = function(){
     alert('content loaded');
    }
</script>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

因此在 PHP

```
<?php
echo <<< xyz
<iframe id='my_id' name='my_id' src='http://www.php.com/'></iframe>

    <script> 
        document.getElementById('my_id').onload = function(){
         alert('content loaded');
        }
    </script>
xyz;

?> 
```

这对我有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T19:04:00.213

Ruben-J 是对的，在 html iframe 中使用 onload，它更容易，据我所知不能用 php 完成，是否嵌入了 javascript

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-07T02:47:14.353

尝试这个

```
<?php

echo "<iframe id='my_id' name='my_id' src='http://www.php.com/'></iframe>

<script type='text/javascript'>
document.getElementById('my_id').onload = function(){     
  alert('content loaded'); 
}
</script>";

?> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-07T04:33:08.240

您的问题与代码的 php 部分无关。当我尝试从同一域加载文件时，您的代码工作正常，如下所示：

```
 <?php
       print "<iframe id='my_id' name='my_id' src='test.php'></iframe>

       <SCRIPT LANGUAGE='javascript'> 

         document.getElementById('my_id').contentWindow.onload = function(){
             alert('content loaded');
         }
       </SCRIPT>
      ";
  ?> 
```

这里的问题是执行跨域请求时 iframe.contentWindow 的所有权。这是您搜索 iframe 跨域时在 Google 中显示[的首批链接之一。](http://www.nczonline.net/blog/2009/09/15/iframes-onload-and-documentdomain/)请参阅此部分：

> 表示 iframe 内容的窗口对象是加载到 iframe 中的页面的属性。为了让包含页面以任何有意义的方式访问 iframe 的窗口对象，包含页面和 iframe 页面的域需要相同（详情）。

这意味着，只有从同一个域加载内容时，才能访问 contentWindow。

也检查这个[SO question](https://stackoverflow.com/questions/2235994/how-to-determine-if-the-location-of-the-iframe-has-changed)的答案。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-11-07T02:50:51.140

您确定它可以在 HTML 文件中使用吗？你测试过吗？

document.getElementById('my_id').onload = function(){ alert('content loaded'); }

试试看

# c++ - 我可以在不使用标准 api 函数的情况下创建进程吗？

> ID：13262403
> 
> 赞同：-5
> 
> 时间：2012-11-07T02:35:54.657
> 
> 标签：c++, c, process, mfc

有什么方法可以在不使用 CreateProcess 或 ShellExecute 、 WinExec Api 函数的情况下创建进程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T02:44:02.000

虽然您可以使用`system()`，但这样做被认为是非常糟糕的做法（不安全、低效等）。

[http://www.cplusplus.com/reference/clibrary/cstdlib/system/](http://www.cplusplus.com/reference/clibrary/cstdlib/system/)

# c# - 为什么不从存储过程中获得所需的输出

> ID：13262409
> 
> 赞同：-2
> 
> 时间：2012-11-07T02:36:42.577
> 
> 标签：c#, sql-server, linq, linq-to-sql, stored-procedures

为了满足我的要求之一，我需要将 SQL 查询作为参数传递给存储过程。

我的存储过程语法是：

```
create PROCEDURE spSelect 
    @Query VARCHAR(500)
AS 
    EXEC( @Query)  
    return 
```

要执行该存储过程，我使用以下 C# 代码：

```
DataContex db=new DataContex();
    String sSQL = " SELECT OrderID,ShipName FROM dbo.Orders";
    var result = db.spSelect(sSQL); 
```

执行后，`result`就是`0`.

需要帮助来了解发生了什么，为什么我没有得到想要的输出

如果有任何疑问请询问，提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T02:52:23.350

您需要使用[sp_executesql (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms188001.aspx)来执行它：

```
create PROCEDURE spSelect 
@Query VARCHAR(500)
AS 
    EXECUTE sp_executesql @Query
 return 
```

# regex - 如何使用正则表达式获取第三个数字短语 ip 地址（v4）

> ID：13262421
> 
> 赞同：2
> 
> 时间：2012-11-07T02:38:40.210
> 
> 标签：regex, parsing, ip-address

我想仅使用正则表达式从 IP 地址（v4）获取第三个数字。

这里有很多ip

172.23。**34** .159
172.23。**34** .51
211.234。**202** .246
147.6。**41** .120
172.23。**34** .171
10.225。**149** .118
172.23。**34** .64

那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T02:42:17.247

这应该至少适用于[pcre](/questions/tagged/pcre "显示标记为“pcre”的问题")和[perl](/questions/tagged/perl "显示标记为“perl”的问题")：

```
\b\d{1,3}\.\d{1,3}\.\K\d{1,3}(?=\.\d{1,3}\b) 
```

或者，如果您想要更强大的东西：

```
\b(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.\K(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)(?=\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\b) 
```

你可以试试

```
$ re='\b(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.\K(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)(?=\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\b)'
$
$ perl -lne 'print $& if /'"$re"'/' file.txt
34
34
202
41
34
149
34
$ 
$ grep -oP "$re" file.txt
34
34
202
41
34
149
34 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T08:46:13.510

当涉及到正则表达式时，您对数据了解得越多，您就越有能力解析/修改它。例如，如果您有一个数组或一个您已经知道仅包含 IP 地址的受信任文件，那么简单（在 Perl 中）：

 `````
 my @ips = qw(172.23.34.159
                 172.23.34.51
                 211.234.202.246
                 147.6.41.120
                 172.23.34.171
                 10.225.149.118
                 172.23.34.64);
    for (@ips) {
        print "$1\n" if $_ =~ /(?:\d+\.){2}(\d+)\.\d+/;
    } 
```` 

`或者`

 `````
 while (<>) {
        print $1\n" if $_ =~ /^\s*(?:\d+\.){2}(\d+)\.\d+\s*$/;
    } 
```

就足够了。而如果您从外部来源或具有许多不同数据类型的文件收集数据，则需要更加严格（在这种情况下，[sputnick](https://stackoverflow.com/users/465183/sputnick)已经提供了适当严格的示例）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T03:12:12.047

在 BRE 中：

```
/^[0-9]\{1,3\}\.[0-9]\{1,3\}\.\([0-9]\{1,3\}\)\.[0-9]\{1,3\}$/ 
```

或在 ERE 中：

```
/^[0-9]+\.[0-9]+\.([0-9]+)\.[0-9]+$/ 
```

如果您`sed`在旧操作系统上使用类似的东西，您可能会被限制为 BRE。请注意，并非所有正则表达式实现都包含反向引用，因此您可能会更早地使用正则表达式以外的其他方法来获取此信息。例如，在`awk`：

```
[ghoti@pc ~]$ echo "10.11.12.13" | awk -F. '{print $3}'
12 
```

或者只是纯粹的 bash：

```
[ghoti@pc ~]$ addr="10.11.12.13"
[ghoti@pc ~]$ addr=${addr#*.*.}
[ghoti@pc ~]$ addr=${addr%.*}
[ghoti@pc ~]$ echo $addr
12 
``````

# function - Odd 'while' loop behavior with a subfunction call (MATLAB)

> ID：13262422
> 
> 赞同：2
> 
> 时间：2012-11-07T02:38:55.100
> 
> 标签：function, matlab, error-handling, while-loop

So I have this bizarre problem that I cannot figure out. I have a while loop that is passing values into a vector according to an index. These values are provided by a subfunction that is called. My problem is that after the first iteration, the vector ceases to accept values from the subfunction, though the code keeps running and doesn't break down. This is happening at 'S(i)=Trials;'.

```
function Simulation()
N=input('How many trials would you like to run? ');
Tup=input('What is the positive boundary? ');
Tdown=input('What is the negative boundary? ');
StepLength=input('What is the step length? ');
d=0;
i=1;
S=zeros(1,N);
StepLimit=1000000;
if Tup==Tdown
     display('Please use boundaries that are not equal to eachother.');
 elseif Tup<=d||Tdown>=d
         display('Please choose logical boundaries.');
else
    while i<=N
    S(i)=Trials;
    i=i+1;
    end
end
x=0:10:max(S);
hist(S,x);
axis tight;
xlabel('Number of Steps');
ylabel('Number of Trials');

function s=Trials()
s=0;
    while ~(d<=Tdown)&&~(d>=Tup)
        m=StepLength.*RandDir(1);
        d=d+m;
        s=s+1;
        if s>=StepLimit
            display('The step limit was reached.');
            return
        end
    end

    function out = RandDir(N)
    % Generate a random vector from the set {+/- e_1, +/- e_2,..., +/- e_N}
    % where e_i is the ith basis vector. N should be an integer.
    I = round(ceil(2*N*rand));
        if rem(I,2) == 1
            sgn = -1;
        else
            sgn = 1;
        end
    out = zeros(N,1);
    out(ceil(I/2)) = sgn*1;
    end
end
end 
```

Thank you for any help

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T03:48:46.580

without getting into the semantics, here's what you're doing:

Step 1: You call a function Trials... Change d until you get a desired values.

Step 2: Call Trials again, but keep the same d as previously used. Does it meet the previous end condition? yes. Stop Trials

Step 3: Call Trials again, but keep the same d as previously used. Does it meet the previous end condition? yes. Stop Trials

Step 4: Call Trials again, but keep the same d as previously used. Does it meet the previous end condition? yes. Stop Trials

solution:

in your `Trials` function reinitialize `d`:

```
function s=Trials()
    d=0;
    s=0;
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T08:13:31.577

I agree on the re-initialization of your s and d variables. The reason you are finding it difficult to debug is that you are using global variables. Please don't do that unless you absolutely have to!

Here is a version without global variables:

```
function foo()
N           = 10;
Tup         = 10;
Tdown       = -10;
StepLength  = 1;
d           = 0;
S           = zeros(1,N);
StepLimit   = 1000000;

if Tup==Tdown
    display('Please use boundaries that are not equal to eachother.');
elseif Tup<=d||Tdown>=d
    display('Please choose logical boundaries.');
else
    for i_trial= 1:N
        S(i_trial) = Trials(Tdown, Tup, StepLength, StepLimit);
    end
end

x           = 0:10:max(S);
hist(S,x);
axis tight;
xlabel('Number of Steps');
ylabel('Number of Trials');

function s=Trials(Tdown, Tup, StepLength, StepLimit)
s = 0;
d = 0;
while ~(d<=Tdown)&&~(d>=Tup)
    m=StepLength.*RandDir(1);
    d=d+m;
    s=s+1;
    if s>=StepLimit
        display('The step limit was reached.');
        return
    end
end

function out = RandDir(N)
% Generate a random vector from the set {+/- e_1, +/- e_2,..., +/- e_N}
% where e_i is the ith basis vector. N should be an integer.
I = round(ceil(2*N*rand));
if rem(I,2) == 1
    sgn = -1;
else
    sgn = 1;
end
out = zeros(N,1);
out(ceil(I/2)) = sgn*1; 
```

Why did you use a while loop in the main function (have i broken your code with the for loop)?

# r - R将列表转换为数组

> ID：13262431
> 
> 赞同：2
> 
> 时间：2012-11-07T02:40:10.510
> 
> 标签：r, arraylist, dataframe

嗨，我有一个关于将 data.frames 列表转换为数组的快速问题（我更喜欢后一种格式进行绘图和操作）。

我有以下代码几乎可以工作，但我没有正确循环，想知道是否有人可以指出我做错了什么。

我想要做的是用我的data.frames列表中每个不同data.frames中的一列的值填充一个数组。

```
# list all the files in a directory
data.dir = "/data/output"

# list all the files to plot
files <- list.files(data.dir, full=TRUE, pattern="Fields_grid*")

# cat them together into one data frame
data <- lapply( files,  read.csv, header=FALSE, skip=26)

# calc no. of files
nfiles <- length(files)

# set up an empty array to fill with data
z <- array( NA, dim=c(length(x), length(y), nfiles ))

# loop through all the data.frames/files 
for (i in 1:length(nfiles)) {

# calc index's of lists
x <- sort(unique( data[[i]]$V3))
y <- sort(unique( data[[i]]$V4))
indx <- match( data[[i]]$V3, x)
indy <- match( data[[i]]$V4, y)

# fill array
z[ cbind( indx, indy, i)] <- data[[i]]$V5 } 
```

我知道这是一个可怕的问题，因为我无法重现我得到的结果，但我希望你能理解我的问题。当我查看 z[,,1] 这包含数据但 z[,,2] 到 z[,,nfiles] 包含 NA （即我的循环没有工作）。我想这与索引有关，但我真的看不出我做错了什么。

再次为不透明的问题道歉，感谢您的关注！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T03:09:27.550

问题出在你的循环上：

```
for (i in 1:length(nfiles)) { [...] 
```

在这里，您`length(nfiles)`的`1`循环仅针对`i`equals运行`1`。

相反，你打算做

```
for (i in 1:nfiles) { [...] 
```

或者

```
for (i in seq_len(nfiles)) { [...] 
```

或者

```
for (i in seq_along(files)) { [...] 
```

# jquery - 使用 jquery 文本框进行内联编辑似乎是只读的？

> ID：13262432
> 
> 赞同：0
> 
> 时间：2012-11-07T02:40:45.090
> 
> 标签：jquery

我正在尝试使用 jquery 进行一些内联​​编辑。我遇到的问题是当我创建输入文本时，我无法更改文本。我什至无法集中注意力。它似乎是只读的或禁用的。$( ".sr-label" ).live("click" 当我尝试单击文本字段时仍然被调用。我需要做某种解除绑定或什么吗？

谢谢你的帮助

```
<ul>
  <li><span class='sr-label'>label 1</span></li>
  <li><span class='sr-label'>label 2</span></li>
</ul> 
```

我的 js 看起来像

```
$( ".sr-label" ).live("click", function(event){    
     console.log("sr-label");
     var $item = $( this ),
     $target = $( event.target );
     var $pitem = $item.parent();
     newHTML  = '<input id="label_'+$pitem.attr('id')+'" type="text" size="30" '+
                 ' value="'+$item.text()+'"><input class="saveedit" '+
                 ' id="save_'+$pitem.attr('id')+'" type="button" value="save">'+
                 ' <input id="canedit" type="button" value="cancel">';
     $item.html(newHTML);
     return false;
 }); 
```

[jsFiddle 示例](http://jsfiddle.net/NWcrv/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T04:21:05.073

[我的小提琴](http://jsfiddle.net/xykSH/)这应该可以完成工作。

```
$handler = function(e) {
    $.tempNamespace = { oldText : $(this).text() }
    $item = $(this);
    $parent = $item.parent();
    $('.sr-label').unbind('click');
    $newHTML = "<input id='textEdit' type='text' value='" + $item.text() + "'><button id='saveEdit'>Save</button><button id='cancelEdit'>Cancel</button>";  
    $item.html($newHTML);
};

$('.sr-label').click($handler);

$('li').on('click','#saveEdit',function(){
    $newText = $(this).prev().val();
    $(this).parent().html($newText);    
    $('.sr-label').click($handler);
});

$('li').on('click','#cancelEdit',function(){
    console.log();
    $(this).parent().html("<span class='sr-label'>" + $.tempNamespace.oldText + "</span>");    
    $('.sr-label').click($handler);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T03:46:41.727

跨度内元素上的单击事件传播到跨度并导致您的处理程序再次运行。并且您的处理程序在每次运行时都会替换跨度的全部内容。因此**，输入不是只读或禁用的，而是单击它会删除并重新创建它。**

您会注意到，如果您使用键盘进入输入，*那么*您可以输入它，因为按键不会触发您的点击处理程序。

> *“我需要做一些解绑什么的吗？”*

好吧，您无法真正解除绑定`.live()`，从而阻止它应用于该类的某些元素而不是其他元素。如果您使用或 的非委托形式绑定单个处理程序`.click()`，则可以一一解除绑定。`.bind()``.on()`

您可以做的是更改您的选择器，使其仅适用于没有任何子输入元素的元素：

```
$(".sr-label:not(:has(input))").live("click", function(event){ 
```

演示：http: [//jsfiddle.net/H2ncm/2/](http://jsfiddle.net/H2ncm/2/)

但是，你应该注意到它`.live()`已被弃用，所以（除非你因为某种原因被一个非常旧的 jQuery 版本卡住）你应该切换到该[`.on()`方法](http://api.jquery.com/on)的委托版本：

```
$(document).on("click", ".sr-label:not(:has(input))", function(event){ 
```

当点击`document`发生时，jQuery 测试它是否在与第二个参数中的选择器匹配的元素上，如果是，则调用您的函数（否则什么都不做）。请注意，理想情况下您不会使用`document`，您将使用更接近相关元素的元素，例如，您的包含`ul`元素。

演示：http: [//jsfiddle.net/H2ncm/1/](http://jsfiddle.net/H2ncm/1/)

这相当于在处理程序中添加一个简单的测试，如果单击的 span 已经包含输入，则不执行任何操作：

```
if ($item.find("input").length)
   return; 
```

演示：http: [//jsfiddle.net/H2ncm/](http://jsfiddle.net/H2ncm/)

# sql-server - 带有 LIKE 的二进制列 SELECT

> ID：13262433
> 
> 赞同：0
> 
> 时间：2012-11-07T02:41:05.237
> 
> 标签：sql-server, tsql, binary, hex, sql-like

我正在尝试从`BINARY`列中查找特定的数据行。

列中的示例数据`BINARY(2000)`：

```
0x0600700701000C006B6173616E74696E676B6F000000000003000A0078009C0000000000E612101E000000000000000000006B031813361E00000000000000000000D4014B13141C0000000000000000000053017C13261E00000000000000000000A102E113361E000000000000000000009E02FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF2201073200000000000000000000D604D11C101C000000000000000000008C01FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF0170000000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF0000220047003700280016000F0001000B0003003F000000480200001D0000003101000000000000562B00003710000000000000134B000000000000FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFB517010000000000000000000000000012060200000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF191404000000000000000000000000009A13051D00000000000000000000A0029A13051D00000000000000000000A002BC3B0700000000000000000000000000FE050817000000000000000000000000FE05091E00000000000000000000000012060200000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF191404000000000000000000000000009A13051D00000000000000000000A0029A13051D00000000000000000000A002FB050F0D000000000000000000000100FB05101E000000000000000000000100FB05111E000000000000000000000100FE13121D00000000000000000000B402FE13121D00000000000000000000B402E213141E00000000000000000000BC02E213141E00000000000000000000BC023613161D00000000000000000000FE003613161D00000000000000000000FE00FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFB05191E000000000000000000000100FE13121D00000000000000000000B402FE13121D00000000000000000000B402E213141E00000000000000000000BC02E213141E00000000000000000000BC023613161D00000000000000000000FE003613161D00000000000000000000FE000413201E00000000000000000000CC000413201E00000000000000000000CC002E01222C000000000000000000008F052E01222C000000000000000000008F05FB05241E000000000000000000000100FB05251E000000000000000000000100FB05261E000000000000000000000100FB05271E0000000000000000000001000413201E00000000000000000000CC000413201E00000000000000000000CC002E01222C000000000000000000008F052E01222C000000000000000000008F05FB052C1E000000000000000000000100FC052D1E000000000000000000000000A9262E2E000000000000000000000000A9262E2E000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF2E01222C000000000000000000008F052E01222C000000000000000000008F05FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA9262E2E000000000000000000000000A9262E2E000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000070000005E000000000000000000000000000000000000000500000000000000FFFF000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000 
```

该数据中有 1 个结果`2201`。（尝试搜索 2201 的数据，您将得到 1。）

现在我正在尝试使用这个查询：（它应该给我 512 行结果）

```
SELECT * 
FROM table
WHERE binaryfield LIKE '%2201%'
ORDER BY key 
```

但没有运气得到结果。

注意：2201 实际上是 290。我试图在字节序的数据中查找十进制值 290，即十六进制的 2201。

**更新：**

试过这个查询（搜索：​​15584）

```
SELECT *
FROM CHAR_DATA1
WHERE CHAR_DATA LIKE '%'+CAST(0xE03C AS nvarchar(MAX))+'%'
ORDER BY CHAR_KEY; 
```

现在它返回几乎所有行。甚至手动检查了 E03C 的行，但没有找到，但是在运行查询时它被返回。很奇怪。想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T02:53:08.483

[LIKE](http://msdn.microsoft.com/en-us/library/ms179859.aspx)运算符仅适用于字符数据类型。尝试对字符串进行[CAST ，如下所示：](http://msdn.microsoft.com/en-us/library/ms187928.aspx)

```
SELECT * 
  FROM table
 WHERE CAST(binaryfield AS nvarchar(MAX)) LIKE '%290%'
 ORDER BY key; 
```

- 或者 -

```
SELECT * 
  FROM table
 WHERE CAST(binaryfield AS nvarchar(MAX)) LIKE '%'+CAST(0x2201 AS nvarchar(MAX))+'%'
 ORDER BY key; 
```

此外，如果您想查看数据的子集（例如文件头），您可以执行以下操作：

```
SELECT * 
  FROM table
 WHERE CAST(LEFT(binaryfield, 8) AS nvarchar(MAX)) -- Only compares the first 8 bytes
         LIKE '%'+CAST(0x2201 AS nvarchar(MAX))+'%'
    OR CAST(SUBSTRING(binaryfield, 34, 4) AS nvarchar(MAX)) -- Compares bytes 34-38
         LIKE '%'+CAST(0x2201 AS nvarchar(MAX))+'%'
 ORDER BY key; 
```

* * *

**编辑**

关于您更新的问题，这是否会给您带来您期望的结果：

```
 SELECT *
   FROM CHAR_DATA1
  WHERE CHAR_DATA COLLATE SQL_Latin1_General_CP1_CI_AS
          LIKE '%'+CAST(0xE03C AS nvarchar(MAX))+'%'
 ORDER BY CHAR_KEY; 
```

您不必将字符数据转换/转换为二进制。

# php - 防盗链

> ID：13262436
> 
> 赞同：2
> 
> 时间：2012-11-07T02:41:18.713
> 
> 标签：php, hotlinking

我制作了这个简单的代码来防止从我的 php 下载文件中对我的文件进行热链接：

```
if ((strpos($_SERVER['HTTP_REFERER'],'www.domain.com')!==0)) {
    $redirect='index.php';
    header("Location: $redirect");
    exit;
} 
```

它不起作用，即使我单击了我的 wbesite 中的链接，它总是将我重定向到 index.php。我试图将域更改为多种类型，例如：

> [http://www.domain.com](http://www.domain.com)
> www.domain.com
> domain.com
> 域

但仍然是同样的问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T03:00:47.663

`HTTP_REFERER`我找到了解决方案，我只是在和`HTTP_HOST`using之间进行了比较`strpos`，如果它们匹配，则意味着没有盗链。编码 ：

```
if($_SERVER['HTTP_REFERER'])
   {
      if(!strpos($_SERVER['HTTP_REFERER'],$_SERVER['HTTP_HOST']))
         {
            $redirect='index.php'; 
            header("Location: $redirect");
         }
   }

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T02:44:19.723

您实际上想`!== FALSE`改用。字符串可能在 position `0`。还包括 zerkms 的建议：

```
if (!empty($_SERVER['HTTP_REFERER']) && 
    (strpos($_SERVER['HTTP_REFERER'],'www.domain.com') !== FALSE)) { 
```

文档： http: [//php.net/manual/en/function.strpos.php](http://php.net/manual/en/function.strpos.php)

# html - 带有隐藏空单元格的桌子上的阴影效果不佳

> ID：13262437
> 
> 赞同：0
> 
> 时间：2012-11-07T02:41:29.777
> 
> 标签：html, css, css-tables

我有一个看起来像这样的表：

```
+-------------------------+
|        SECTION 1        |
+-------+--------+--------+
|       | TYPE 1 | TYPE 2 |
+-------+--------+--------+
| KEY 1 | Val 1  | Val 2  |
+-------+--------+--------+
| KEY 2 | Val 3  | Val 4  |
+-------+--------+--------+
        |    SECTION 2    |
        +--------+--------+
        | TYPE 1 | TYPE 2 |
        +--------+--------+
        | Data 1 | Data 2 |
        +--------+--------+
        | Data 3 | Data 4 |
        +--------+--------+
        | Data 5 | Data 6 |
        +--------+--------+ 
```

在桌子上使用`border-collapse: separate; empty-cells: hide;`正是我想要的，但是当我使用 应用 box-shadow 时`box-shadow: 3px 3px 3px #CCC`，阴影围绕着空白的左下角部分，而不是跟踪我上面显示的不规则表格边缘。

有没有人对我如何在这样的桌子上完成适当的投影有任何想法？这是一个jsfiddle：http: [//jsfiddle.net/aCuSk/6/](http://jsfiddle.net/aCuSk/6/)

# c++ - 使用 find_if 和 isalnum 在字符串中查找字母数字字符

> ID：13262444
> 
> 赞同：0
> 
> 时间：2012-11-07T02:42:32.510
> 
> 标签：c++, string, stl, g++

我正在使用**g++ 4.7**。

我想做的是这个，

```
find_if(s.begin(), s.end(), isalnum); 
```

where`isalnum`定义在`cctype`并且`s`是一个字符串。

```
logman.cpp:68:47: error: no matching function for call to ‘find_if(std::basic_string<char>::const_iterator, std::basic_string<char>::const_iterator, <unresolved overloaded function type>)’ 
```

然而，这行得通，

```
bool my_isalnum(int c) {
    return isalnum(c);
}

find_if(s.begin(), s.end(), my_isalnum); 
```

如何在不创建自己的函数的情况下使其工作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-07T03:02:00.447

[编译器在消除此函数](http://en.cppreference.com/w/cpp/string/byte/isalnum)和[此函数](http://en.cppreference.com/w/cpp/locale/isalnum)之间的歧义时遇到了问题。您想要第一个，并且必须通过使用强制转换指定签名来帮助编译器：

```
find_if(s.begin(), s.end(), (int(*)(int))isalnum); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-08T15:52:18.597

这应该有效。

```
#include <algorithm>
#include <cctype>
auto result = std::find_if (begin(s), end(s), std::isalnum); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-01T19:51:44.257

这应该工作

```
#include <algorithm >
#include <cctype>

auto result = std::find_if(std::begin(s), std::end(s),  isalnum) ; 
```

# html - div 延伸到整个布局顶部的流畅布局

> ID：13262446
> 
> 赞同：0
> 
> 时间：2012-11-07T02:42:49.820
> 
> 标签：html, css

我有一个流畅的布局，左右有两个 div，它们在调整页面大小时是有弹性的，而中心 div 有一个最大宽度和一个最小宽度。

有谁知道如何使 div 跨越整个页面，即在当前布局之上（在顶部）？请使其与[jsFiddle 示例](http://jsfiddle.net/SHnc9/13/)一起使用——我希望拉伸的 div 是具有背景的固定标题。

```
<style>
    html, body {
        height: 100%;
        font-family: 'Arial', 'Helvetica', Sans-Serif;
    }
    .container {
        display: table;
        width: 100%;
        height: 100%;
    }
    .container > div {
        display: table-cell;
        text-align: center;
    }
    .fixed {
        min-width: 200px; 
        max-width:300px;
        background: rgb(34, 177, 77);
        color: white;
    }
    .fluid {
        background: rgb(0, 162, 232);
    }
</style>

<div class="container">
    <div class="fluid">
        I'm 150px wide! Glee is awesome!
    </div>
    <div class="fixed">
        I'm fluid! Glee is awesome!
    </div>
    <div class="fluid">        
        I'm 150px wide! Glee is awesome!
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T06:18:49.057

您所要做的就是在上面添加一个 div `<div class="container">`。如果您不对其应用任何样式，它就会拉伸到整个宽度。所以：

```
<style>
    html, body {
        height: 100%;
        font-family: 'Arial', 'Helvetica', Sans-Serif;
    }
    .header {
        background: red;
    }
    .container {
        display: table;
        width: 100%;
        height: 100%;
    }
    .container > div {
        display: table-cell;
        text-align: center;
    }
    .fixed {
        min-width: 200px; 
        max-width:300px;
        background: rgb(34, 177, 77);
        color: white;
    }
    .fluid {
        background: rgb(0, 162, 232);
    }
</style>

<div class="header">
    I'm a header! Hooray!
</div>
<div class="container">
    <div class="fluid">
        I'm 150px wide! Glee is awesome!
    </div>
    <div class="fixed">
        I'm fluid! Glee is awesome!
    </div>
    <div class="fluid">        
        I'm 150px wide! Glee is awesome!
    </div>
</div> 
```

# java - 对 ArrayList 的通用 ArrayList 进行排序

> ID：13262448
> 
> 赞同：3
> 
> 时间：2012-11-07T02:43:03.737
> 
> 标签：java, generics, arraylist

我有一个点列表。我将其表示为 ArrayLists 的 ArrayList。我正在尝试使用泛型，以便列表可以存储整数、浮点数等，并以同样的方式对待它们。所以我有：

```
ArrayList<ArrayList<? extends Number>>. 
```

我需要根据每个内部列表中的一个元素来比较这些列表。

为此，我编写了一个在 Collections.sort 中使用的自定义比较器

比较器看起来像：

```
int compare(ArrayList<? extends Number> a, ArrayList<? extends Number> b )
{
    return a.get(index).compareTo(b.get(index))
} 
```

这当然不会编译。编译器抱怨通配符类没有 compareTo 方法。

我想要做的甚至可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T02:50:33.380

如何将您的`Comparator`课程定义为：

```
class MyComparator<T extends Number & Comparable<T>> 
                                          implements Comparator<ArrayList<T>> {
    @Override
    public int compare(ArrayList<T> a, ArrayList<T> b) {
        return a.get(index).compareTo(b.get(index));
    }
} 
```

# windows - 看不到 Firefox 用户界面

> ID：13262453
> 
> 赞同：0
> 
> 时间：2012-11-07T02:43:53.917
> 
> 标签：windows, firefox

一个奇妙的问题：我试图打开我的 Firefox，但看不到它的 UI（浏览器）。同时，我在任务管理器中找到了火狐的运行进程。

这怎么可能发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T02:49:44.183

为了看起来更灵敏，有时 Firefox 会关闭应用程序窗口，但在您关闭最后一个窗口后仍会在后台工作（例如保存会话、释放资源等）。

如果 Firefox 似乎没有响应，您可以手动终止任务并重新启动应用程序。

# html - ruby 中的 html 渲染

> ID：13262456
> 
> 赞同：0
> 
> 时间：2012-11-07T02:44:06.143
> 
> 标签：html, ruby, markdown

我试图在我的 HTML 中包含一个降价文件。

目前我有

```
Redcarpet::Markdown.new(Redcarpet::Render::HTML).render(
  File.read(File.join(Dir.pwd, 'README.md'))
) 
```

除了正确呈现 html 之外，它还可以很好地引入内容。

我的消息来源显示：

`&lt;h1&gt;Header&lt;&#47;h1&gt;`

whcih 在浏览器中显示 html 标记：

`<h1>Header</h1>`

我一直在玩这个。寻找答案总是让我使用 rails html_safe helper，但我没有使用 rails。我试过 CGI.unescapeHTML 和 HTMLEntities。我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T04:09:04.403

您正在使用超薄模板引擎吗？

在模板中你应该能够做到

```
p== my_var 
```

或者

```
p
  | some text with unescaped html: #{{my_var}} 
```

请参阅[文档](https://github.com/stonean/slim#text-interpolation)。

# node.js - 什么是 process.env

> ID：13262461
> 
> 赞同：0
> 
> 时间：2012-11-07T02:45:09.540
> 
> 标签：node.js

我在哪里可以获得相关文档`process.env`？

Wat 我可以在该环境中访问的所有变量

例如， `process.env.port || 1137`做什么？

我了解 process.env 是环境，我们正在其中寻找端口。是什么`||`意思？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T03:00:02.800

这是 JavaScript 中的一种常见表示法，它允许默认值，通常用于用户提供的选项（如果没有给出）。

如果`process.env.port`有值，则使用它。如果它没有值，则将使用 1137。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T07:09:05.497

如果`process.env.port`存在，它将使用它，否则它将使用 1137。`||`它是或运算符。

# haskell - 统一与替代

> ID：13262463
> 
> 赞同：1
> 
> 时间：2012-11-07T02:45:24.417
> 
> 标签：haskell, substitution, unification

在 Haskell 中，我`Subst a`用一个构造函数定义了一个多态数据类型，`S :: [(String, a)] -> Subst a`如下所示：

```
data Subst a where
    S :: [(String, a)] -> Subst a
    deriving (Show) 
```

我想定义一个函数`get::String -> Subst a -> Maybe a`，它接受一个变量名和一个替换，并返回该变量必须被替换的值。如果未在变量上定义替换，则函数应返回 Nothing。

我尝试了以下方法：

```
get :: String -> Subst a -> Maybe a
get str (S[]) = Nothing
get str (S((a,b):xs)) = if str == a then Just b
    else get str xs 
```

但是我遇到了错误。任何想法为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T03:01:15.537

```
get str (S((a,b):xs)) = if str == a then Just b
    else get str xs 
```

`xs`是 type 的列表`[(String, a)]`，但 的第二个参数`get`必须是 a `Subst a`。如果您使用构造函数来构造正确类型的值，它将起作用，

```
get str (S((a,b):xs)) = if str == a then Just b
    else get str (S xs) 
```

但是直接使用列表查找变量更简单，

```
Prelude> :t lookup
lookup :: Eq a => a -> [(a, b)] -> Maybe b 
```

所以

```
get str (S xs) = lookup str xs 
```

做你想要的。

# git - 如何在 git 中以不过去的提交日期压缩提交？

> ID：13262465
> 
> 赞同：43
> 
> 时间：2012-11-07T02:46:27.980
> 
> 标签：git, git-rebase

所以，我有一个非常简单的用例；我想压缩所有需要从我的“今天工作”分支返回到 master 的提交。

到目前为止，我一直在使用`git rebase -i`它，但它的工作原理并不完全正确；最终提交的时间戳不正确。

这是一个这样做的例子：

```
[work1] git checkout master
Switched to branch 'master'

[work1] git rebase today
First, rewinding head to replay your work on top of it...
Fast-forwarded master to today.

[work1] git log --pretty=format:"%h%x09%an%x09%ad%x09%s"
5ad95ff Doug    Wed Nov 7 10:12:42 2012 +0800   Updated TODO again
abb891c Doug    Wed Nov 7 10:12:24 2012 +0800   Added more work
c5fd35c Doug    Wed Nov 7 10:11:50 2012 +0800   Added more work
a98facd Doug    Wed Nov 7 10:11:22 2012 +0800   Add work
b4465be Doug    Tue Nov 6 21:38:53 2012 -0800   Updated TODO
403cea9 Doug    Fri Jan 2 21:38:53 2009 -0800   Added todo 
```

对，现在我想将最后四个提交压缩为一个提交。

```
[work2] date
Wed  7 Nov 2012 10:39:39 WST

[work2] git rebase -i b4465be

pick a98facd Add work
squash c5fd35c Added more work
squash abb891c Added more work
squash 5ad95ff Updated TODO to reflect todays work 
```

结果：

```
[work2] git log
commit 3f7f1d2eb4ef23c73dce95f718152c7d5683a926
Author: Doug <doug@null.com>
Date:   Wed Nov 7 10:11:22 2012 +0800

    Add work
    Added more work
    Added more work
    Updated TODO to reflect todays work

commit b4465bee5b278214704edcfef3f6e222b5b52964
Author: Doug <doug@null.com>
Date:   Tue Nov 6 21:38:53 2012 -0800

    Updated TODO 
```

不！那*不是*我想要的。结果提交的时间戳是我们压缩到的提交的时间戳；我想要的是新的提交日期是当前时间。

只是为了准确显示我在说什么：

```
[work2] date
Wed  7 Nov 2012 10:39:39 WST

Author: Doug <doug@null.com>
Date:   Wed Nov 7 10:11:22 2012 +0800 
```

我希望结果提交是合并时间的日期，即。现在，不是提交的时间。

据我所知，您只能压缩到以前的提交中，而不是向上提交到新的提交中，但是有没有办法做到这一点？

正确的解决方案似乎是

1.  使用合并消息和正确的提交日期时间创建一个新提交，
2.  ？？？<--- 以某种方式将以前的提交压缩到这个中。

我怎么做？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-11-07T12:25:39.413

哈克：你可以使用

```
git commit --amend --reset-author 
```

git commit 手册页说这“也更新了作者时间戳”。您不必对提交进行任何更改（我在本地尝试过），它会将时间戳更新为当前时间。绝对是一种滥用，但它似乎有效。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2020-04-15T19:36:56.657

```
git commit --amend --date="now" 
```

或者，如果您不想编辑提交消息：

```
git commit --amend --date="now" --no-edit 
```

默认情况下，`amend`会将提交者日期更新*为*当前时间，但保持*作者*提交日期不变。
`--date="now"`还将作者提交日期设置为当前时间。

**如果作者和提交者日期不同，为什么重要？**
执行 a`git log`时，默认显示作者日期（`git log --format=fuller`显示提交者日期）。
但是，可能出乎意料的是，如果您使用`since`/`until`它使用的是*提交*者日期，而不是作者日期。
这种差异可能有点令人困惑，或导致意外结果。
例如：`git log --since="yesterday"`

**--date**
您可以提交或修改，将作者日期设置为任何日期：

```
git commit --date="Wed Apr 15 13:00 2037 -0700"
git commit --amend --date="Wed Apr 15 13:00 2037 -0700" 
```

但是，您必须使用固定日期，例如[ISO 8601](https://en.wikipedia.org/wiki/ISO_8601)或 Internet Message [RFC 2822 格式](https://stackoverflow.com/questions/14914739/which-date-formats-are-ietf-compliant-rfc-2822-timestamps)。YYYY.MM.DD、MM/DD/YYYY、DD.MM.YYYY 都可以，但我相信时间也必须包括在内。

source 有其他选项：[https ://alexpeattie.com/blog/working-with-dates-in-git](https://alexpeattie.com/blog/working-with-dates-in-git)

这篇[SO 帖子](https://stackoverflow.com/a/41997774/5411817)显示了一种将提交和作者日期独立设置为特定日期和多个提交的方法。尽管建议不要更改其他人使用的任何内容的提交日期。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-06-06T20:16:55.030

而不是`git rebase -i b4465be`，将最近的日志复制到剪贴板并执行以下操作：

```
git reset --soft b4465be
git commit 
```

粘贴并编辑更改日志，保存并退出提交消息编辑器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T03:41:08.417

不依赖 squash 而只是区分整个功能分支怎么样：http: [//dymitruk.com/blog/2012/02/05/branch-per-feature/](http://dymitruk.com/blog/2012/02/05/branch-per-feature/)

# portability - Orbeon Forms 中表单定义的可移植性问题

> ID：13262469
> 
> 赞同：0
> 
> 时间：2012-11-07T02:47:27.947
> 
> 标签：portability, orbeon

我将表单定义存储在基于文件系统的存储库中。存储库中的每个表单定义都有一个`file-id`. 在 Orbeon Forms 中，表单定义由`<app name, form name>`对标识。所以我使用`file-id`as `form name`。我根据[持久性 API](http://wiki.orbeon.com/forms/doc/developer-guide/form-runner/persistence-api)编写了一个定制的持久层来桥接 Orbeon 表单和存储库。

我想将表单定义从一个存储库复制/导出/导入到另一个存储库，以便共享/重用/迁移表单定义。当一个表单定义从一个存储库复制到另一个时，它`file-id`会改变，但是，`form name`表单定义仍然是旧的。就像将普通文件复制到另一个目录或重命名一样，但文件内容没有改变。

在这种情况下，我将使用`<app name, new file-id>`持久性 URL(API) 来访问包含`<app name, old file-id>`其内容的表单定义。我的第一个问题是，在表单构建器或表单运行器中，哪个标识优先？

如果`<app name, new file-id>`持久性 URL(API) 在表单构建器或表单运行器中都优先，那么可移植性将是完美的。我在表单生成器中进行了测试，保存或发布时，表单生成器将`<app name, old file-id>`在其内容（XML）中使用。我的第二个问题是，我们可以更改或自定义优先级吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T18:10:40.647

[作为参考，此处](https://sites.google.com/a/orbeon.com/forms/doc/developer-guide/configuration-properties/configuration-properties-form-runner?pli=1#TOC-Persistence-layer-configuration)记录了 API，[此处](http://wiki.orbeon.com/forms/doc/developer-guide/form-runner/persistence-api)记录了属性和术语。

为了确定使用什么持久层，Form Builder 和 Form Runner 只处理 3 个参数（我们只是让术语更加一致）：

*   应用名称
*   表格名称
*   资源类型（无论是表单定义还是表单数据）

配置属性（您可以在其中使用通配符）为每个应用程序/名称/资源类型组合确定要使用哪个持久层。

因此，唯一发生某种优先级的地方是持久层的配置属性级别。没有其他相关的。例如，默认属性说：

```
<property
  as="xs:string"
  name="oxf.fr.persistence.provider.*.*.*"
  value="exist"/> 
```

这意味着，默认情况下，一切都通过 eXist。

但也有：

```
<property as="xs:string"
  name="oxf.fr.persistence.provider.orbeon.builder.form"
  value="resource"/>

<property
  as="xs:string"
  name="oxf.fr.persistence.provider.orbeon.contact.form"
  value="exist"/> 
```

这分别意味着 Form Builder 本身的表单定义存储在 Orbeon Forms 资源中（通常在 JAR 文件中）。但是，Contact 表单的表单定义存储在 eXist 中。等等与其他属性。

当 Form Builder 使用 Save 存储表单定义时，它将它们作为*表单数据*存储在`orbeon/builder`应用程序/表单名称下。当它发布表单时，它将它们作为*表单定义*存储在其实际的应用程序/表单名称下。

我希望这有助于回答你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T07:15:51.017

@avernet，在我的解决方案中，我不使用`form name`XML 内部。我使用以下 URL 调用表单构建器：
`/orbeon/fr/orbeon/builder/edit/${fileId}`
发布时，表单构建器将调用：
`/orbeon/fr/service/my-perisit/crud/${app-name-in-xml}/${form-name-in-xml}/form/form.xhtml?document=${fileId}`
并且我自定义的持久层`my-persist`忽略了该`${form-name-in-xml}`参数。

我`/orbeon/fr/${app name}/${fileId}/new`用来调用表单运行器。

# r - ggplot2：theme_set、pdf 导出和 Illustrator 遇到困难

> ID：13262470
> 
> 赞同：8
> 
> 时间：2012-11-07T02:47:38.683
> 
> 标签：r, pdf, ggplot2, data-visualization, adobe-illustrator

我有一个存储为主题的所有主题元素的列表，该主题在绘图之前被唤起。但是，我最近发现当我导出为 pdf 并尝试在 Adob​​e Illustrator 中打开时，我收到错误“Acrobat PDF 文件格式有困难”。我还看到 Illustrator 报告说它“操作数太少”。但是，当我使用标准主题（比如`theme_set(theme_gray())`）时，在 Illustrator 中没有问题。此外，无论主题如何，我在绘制或保存修改后的数字方面都没有问题。

也许有人可以建议a）存储和唤起大量主题设置的最佳方法，以及b）我的ggplot2 - > pdf - > Illustrator woes的来源可能是什么。

这是我当前的主题，我如何唤起它，以及一个示例情节。请注意，某些参数已被注释掉，如果我以后需要它们，可以用作占位符。

```
textc <- "grey20"
gridc <- "grey20"
backc <- "white"
fontsize <- 12

new_theme <- theme_set(theme_update(  
  #axis.title = element_text()
  axis.title.x = element_text(colour=textc,size=fontsize,angle=0,hjust=.5,vjust=.5,face="plain"),
  axis.title.y = element_text(colour=textc,size=fontsize,angle=90,hjust=.5,vjust=.5,face="plain"),

  #axis.text = element_text()
  axis.text.x = element_text(colour=textc,size=fontsize,angle=0,hjust=.5,vjust=1.5,face="plain"),
  axis.text.y = element_text(colour=textc,size=fontsize,angle=0,hjust=1,vjust=0,face="plain"),

  axis.ticks = element_line(colour=gridc, size=0.5, linetype="solid"),
  axis.ticks.length = unit(.25,'cm'),
  axis.ticks.margin = unit(.25,'cm'), 

  axis.line = element_line(colour=gridc, size=NA, linetype="solid"),
  #axis.line.x = element_line()
  #axis.line.y = element_line()

  legend.background = element_rect(colour=NA,fill=NA,size=NA,linetype="solid"), # removes title and legend
  legend.margin = unit(0,"cm"),
  legend.key = element_rect(colour=NA,fill=NA,size=NA,linetype="solid"),
  legend.key.size = unit(1, 'cm'), # spacing between entries
  #legend.key.height = unit(),
  legend.key.width = unit(1,'cm'),
  legend.text = element_text(colour=textc,size=fontsize,angle=0,hjust=0,vjust=0,face="plain"),
  #legend.title.align =  0,#between 0 and 1
  legend.title = element_text(colour=textc,size=fontsize,angle=0,hjust=0,vjust=0,face="plain"),
  #legend.title.align = 0,# between 0 and 1

  #legend.position = "right"
  #legend.direction = "horizonal"
  #legend.justification = "center"
  #legend.box = "horizontal  

  panel.background = element_rect(colour=NA,fill=NA,size=NA,linetype="solid"),
  panel.border = element_rect(colour=NA,fill=NA,size=NA,linetype="solid"),
  panel.margin = unit(c(0, 0, 0, 0),'cm'),
  #panel.grid = element_line()
  panel.grid.major = element_line(colour=gridc, size=.4, linetype="dashed"),
  panel.grid.minor = element_line(colour=gridc, size=.4, linetype="dashed"),
  panel.grid.minor.x = element_blank(),
  panel.grid.major.x = element_blank(),
  #  panel.grid.minor.y = element_blank(),
  #  panel.grid.major.y = element_blank(),

  plot.background = element_rect(colour=NA,fill=backc,size=NA,linetype="solid"),
  plot.title = element_text(colour=textc,size=16,angle=0,hjust=0,vjust=1,face="plain"),
  plot.margin = unit(c(.25, .25, .25, .25),'in') # top, right, bottom, left

  #strip.background = element_rect(colour=NA,fill=NA,size=NA,linetype=NA),
  #strip.text
  #strip.text.x = element_text(colour=textc,size=fontsize,angle=0,hjust=0,vjust=0,face="plain"),
  #strip.text.y = element_text(colour=textc,size=fontsize,angle=-90,hjust=0,vjust=0,face="plain")
))

theme_set(theme_gray())
theme_set(new_theme)
options(scipen=9999) # suppress scientific notation

d <- ggplot(mtcars,aes(x=wt,y=mpg))+
  stat_binhex()+
  scale_fill_gradientn(colours=c("darkorange2","red","black"),name = "Frequency",na.value=NA)
try(ggsave(plot=d,filename=<some file.pdf>,height=4,width=6)) 
```

`SessionInfo()`：

```
R version 2.15.2 (2012-10-26)
Platform: x86_64-w64-mingw32/x64 (64-bit)

locale:
[1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United States.1252   
[3] LC_MONETARY=English_United States.1252 LC_NUMERIC=C                          
[5] LC_TIME=English_United States.1252    

attached base packages:
[1] grid      splines   stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] hexbin_1.26.0      lattice_0.20-10    reshape2_1.2.1     Hmisc_3.10-1       survival_2.36-14  
[6] plyr_1.7.1         RColorBrewer_1.0-5 ggplot2_0.9.2.1   

loaded via a namespace (and not attached):
 [1] cluster_1.14.3   colorspace_1.2-0 dichromat_1.2-4  digest_0.5.2     gtable_0.1.1    
 [6] labeling_0.1     MASS_7.3-22      memoise_0.1      munsell_0.4      proto_0.3-9.2   
[11] scales_0.2.2     stringr_0.6.1    tools_2.15.2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T14:26:15.370

`size=NA`在`axis.line = element_line(colour=gridc, size=NA, linetype="solid")`导致问题。`element_blank`如果您不想显示线条，请使用。

这可能不是bug，但我建议你在github上提出这个问题：[https](https://github.com/hadley/ggplot2/issues) ://github.com/hadley/ggplot2/issues 将来，ggplot2可能有能力检查参数的有效性。

# loops - Stata for循环中的宏

> ID：13262473
> 
> 赞同：4
> 
> 时间：2012-11-07T02:48:02.050
> 
> 标签：loops, local, stata

我有`x1 , x2, and x3`如下局部变量

```
local x1 2 3 5
local x2 5 9 7
local x3 1 3 4 
```

现在我定义`local x`为

```
local x `x1' `x2' `x3' 
```

接下来，我将 for 循环定义为

```
 foreach var of varlist `x'{
    reg y `var'} 
```

问题是stata给了我错误（注意`y`是因变量）

```
invalid name 
```

在这方面的任何建议都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T04:27:41.447

我认为宏是“延迟输入”。这是我使用的方法。

```
sysuse auto, clear
local x1 weight
local x2 headroom trunk
local x3 length turn

forvalue i = 1/3 {
    regress price `x`i''
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T17:40:18.377

假设这些是变量，理查的解决方案显然会奏效。但是，即使没有必要，它也要求您重命名所有宏。

您可以只扩展宏两次：

```
local x x1 x2 x3
foreach var of local x {
   reg y ``var''
} 
```

你也可以这样做，但如果你的变量列表太长，你会遇到问题：

```
local x "`x1'" "`x2'" "`x3'" 
foreach var of local x {
  reg y `var'
} 
```

# ruby - 红宝石文件需要

> ID：13262474
> 
> 赞同：0
> 
> 时间：2012-11-07T02:48:04.890
> 
> 标签：ruby

是否可以及时要求 ruby​​ 文件？例如，您有一个以下类的文件：

```
require "bar"
class Foo
end

require "bar2"
class Bar
end

require "bar3"
class Bar2
end

require "foo"
class Bar3
end 
```

现在我想只需要文件“bar”，如果我在“foo”中调用某些东西，它需要“bar”之外的东西。但是，如果我需要“bar”，则还需要所有其他文件。有没有办法在没有运行时错误的情况下及时要求文件？或者这已经是红宝石的方式了吗？:) 就我而言，我有很多文件，这些文件都需要很多其他的东西，有时还需要彼此。我想减少工作量。有没有像“仅当”这样的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T03:36:33.983

您可以通过 ruby​​ 实现延迟加载`autoload`：[http ://www.rubyinside.com/ruby-techniques-revealed-autoload-1652.html](http://www.rubyinside.com/ruby-techniques-revealed-autoload-1652.html)

您可能要考虑，关于线程安全性存在/已经存在争议。但是，rails 大量使用它。

# sql - 用严格的关系代数编写查询（AS IN NOT SQL/MYSQL）

> ID：13262481
> 
> 赞同：1
> 
> 时间：2012-11-07T02:49:55.187
> 
> 标签：sql, relational-database, relation, relational-algebra, relational-division

所以这里有三个关系：

**表成员**

> 成员（member_id、姓名、城市、州）

其中 member_id 是主键

**借来的表**

> 借（borrow_id，lib_id，member_id）

其中borrow_id 是主键

**表库**

> 库（lib_id、lib_address、lib_city、lib_state）

其中 lib_id 是主键

lib_id 和 member_id 都是外键

因此，我正在尝试编写一个查询，以查找在他们所在城市的每个图书馆借过书的成员的所有 member_id。这意味着

```
members.city = libraries.lib_city AND members.state = libraries.lib_state 
```

我正在考虑使用关系除法。例如，您有一个由 member_id 和他们借书的所有 lib_id 组成的关系。然后您将其除以包含该成员所在城市中所有 lib_id 的关系。

但是，我对如何用关系代数术语来写这个感到困惑。

在 mysql/sql 中这很容易，但转换为关系代数是我卡住的地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T04:59:48.427

一种策略是将`COUNT(DISTINCT lib_id)`每个城市`member_id`的总数与`COUNT(DISTINCT lib_id)`每个城市的总数相匹配。如果两者相等，则个人已从他所在城市的每个图书馆借阅。

我*认为*以下将完成这项工作：

```
SELECT 
  member_id, 
  /* Total libraries borrowed from by member */
  COUNT(DISTINCT Borrowed.lib_id) AS num_libs_borrowed,
  /* Total libs in the member's city */
  COUNT(DISTINCT Libraries.lib_id) AS total_city_libs
FROM 
  Members
  /* JOIN the city between Members & Libraries */
  JOIN Libraries ON Members.city = Libraries.lib_city
  /* JOIN member to borrowed */
  JOIN Borrowed ON Members.member_id = Borrowed.member_id
GROUP BY member_id 
/* If the number of libs borrowed from = the total libs in the city... */
HAVING num_libs_borrowed = total_city_libs 
```

# groovy - Grails 插件依赖错误的 Intellij IDEA 设置

> ID：13262483
> 
> 赞同：0
> 
> 时间：2012-11-07T02:50:27.460
> 
> 标签：groovy, intellij-idea, grails-plugin

我目前正在使用 Intellij IDEA 11.1.4，虽然我看过一些关于 Grails 插件依赖项问题的帖子，但我无法在本地解决问题。似乎 Intellij 没有将插件识别为相对于项目模块。

例如，插件下的所有 dependencies.groovy 文件都显示未解决的引用访问错误。但是，主项目似乎没有这个问题。

> **Intellij 识别 Grails-app 插件是否需要任何特定的构建要求？**

我尝试过运行 grails clean，从头开始重新构建项目，但错误仍然存​​在......

![Grails-Plug-in App 依赖错误](../Images/dc6e78645ff57af7bea7c181e41d4f79.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T22:20:37.923

好的......经过数小时的搜索，我完全意外地发现了这个“问题”。无效引用与 grails 依赖错误本身无关，但实际上是对未为 Grails 插件设置的[Groovy 动态属性的引用，Intellij IDEA 需要关联 Groovy DSL 表达式。](http://confluence.jetbrains.net/display/GRVY/Dynamic+Methods+and+Properties)基本上我的问题是对 Intellij 对 DSL 语言的支持缺乏了解。

解决方案是通过在方法或属性处选择`ALT`+来简单地添加动态属性，`ENTER`并调用“添加动态属性”对话框。

![在此处输入图像描述](../Images/a83a5f4d6dd78486e0fe8b4c657212c8.png)

添加后，参考错误消失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T20:48:47.317

我看到你解决了你的具体问题，但这可能会帮助其他人遇到与我类似的问题。

我直到 IntelliJ 12 才遇到这个问题！我的项目使用 maven 来获取我的插件依赖项。我一辈子都无法让 IntelliJ 识别我的 pom 声明的插件类。

IntelliJ 运行后终于认出了我的插件类：

```
mvn grails:exec -Dcommand="clean" 
```

然后我在 Grails 视图中右键单击我的项目根目录并选择 Grails > Syncronize Grails Settings

像魅力一样工作。如果您不使用 maven，则可以执行普通的 grails clean 而不是上面的 maven 命令。

# concurrency - 相同的 Golang 代码不同的输出，为什么？

> ID：13262487
> 
> 赞同：3
> 
> 时间：2012-11-07T02:50:40.593
> 
> 标签：concurrency, go

我正在尝试从 golang.org 执行一个示例：http: [//tour.golang.org/#63](http://tour.golang.org/#63)

*   我已更改代码以测试 Gosched 的功能。*

你可以看到那里的输出： ![在此处输入图像描述](../Images/94b77aaebf16b45c74f28c8c4df7a74e.png)

```
hello
hello
hello
hello
hello 
```

但是当我将这些代码复制到我的 Mac OS X 10.8（Go 版本 1.0.3）时，输出发生了变化： ![在此处输入图像描述](../Images/eb3bd36e397c11495846fb37a5101dd3.png) xxxxxx$ go version go version go1.0.3 xxxxxx$ go run goroutine.go hello world hello world hello world hello world hello世界

根据这个[答案](https://stackoverflow.com/a/13108469/802585)，我应该使用runtime.GoSched，但实际上我不需要。所以我相信出了点问题。

请帮我解决这个问题，非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T03:24:30.077

这里的问题是你有两种不同的实现。

在本地，每次调用 fmt.Println 时，您的代码都会让给调度程序。Println 写入执行系统调用的标准输出。所有系统调用都以相同的方式生成 runtime.Gosched。

play.golang.org 是一个黑盒子。我们实际上并不知道它是如何工作的。但是，从您给出的示例中，似乎 play 在调用 fmt.Println 时不会执行系统调用。这是有道理的。他们可能用缓冲区替换了 os.Stdout 来保存打印的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T20:44:51.180

Go Tour 代码只是一个介绍性示例。代码简单且不正确。[GoTour63](http://tour.golang.org/#63)给出以下输出（添加了行号）：

```
1 hello
2 world
3 hello
4 world
5 hello
6 world
7 hello
8 world
9 hello 
```

该程序应打印 10 行。请注意，`10 world`缺少该行。也许这是故意的，用户应该注意到这一点并调查问题的原因。[语言规范中的程序执行](http://golang.org/ref/spec#Program_execution)部分说明如下：

> 当 main 函数返回时，程序退出。它不会等待其他（非主）goroutine 完成。

该语句解释了为什么程序打印的行数少于 10 行。

正确的 Go 程序通常使用：

*   去频道
*   [http://golang.org/pkg/sync/#WaitGroup](http://golang.org/pkg/sync/#WaitGroup)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-19T08:36:04.533

这是因为您正在调用一个在您的编程环境之外运行的 goroutine。从字面上看，两个线程同时执行，并且输出将是随机的，这是显而易见的。

# arrays - 根据动态值显示数组内容

> ID：13262490
> 
> 赞同：1
> 
> 时间：2012-11-07T02:51:34.837
> 
> 标签：arrays, bash, shell, dynamic-variables

我正在尝试稍微优化我的 shell 脚本，并希望能够根据存储在变量中的用户输入显示数组的内容：

这是我的脚本的摘录

```
logArr( firstLogs  secondLogs  thirdLogs  fourthLogs)
firstLogs=( a  b  c  d  e )
secondLogs=( f  g  h  i  j )
thirdLogs=( k  l  m  n  o )
fourthLogs=( p  q  r  s  t )

echo "Please enter a top-level directory for the logger..."
count=1
for i in "${logArr[@]}"
do
    echo "$count: $i"
    count=`expr $count + 1`
done
read logDir
logDir=`expr $logDir - 1`
logDir=${logArr[$logDir]} 
```

所以此时我在变量中设置了用户输入`$logDir`。有没有办法使用它来显示相应数组的值，即如果他们选择了`secondLogs`我想显示`secondLogs`数组的内容而不必使用如果可能的话，如果 elif elif elif 场景。我已经尝试了一些 eval 的东西，但我似乎无法让它工作。

任何帮助表示赞赏。

**编辑：如果我的要求太模糊，请告诉我，我很乐意澄清任何事情。谢谢！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T04:27:45.427

```
logArr=(firstLogs secondLogs thirdLogs fourthLogs)
firstLogs=(a b c d e)
secondLogs=(f g h i j)
thirdLogs=(k l m n o)
fourthLogs=(p q r s t)
echo 'Please enter a top-level directory for the logger...'

select logDir in ${logArr[*]}
do
  break
done

set $logDir[*]
echo ${!1} 
```

输出

```
Please enter a top-level directory for the logger...
1) firstLogs
2) secondLogs
3) thirdLogs
4) fourthLogs
#? 2
f g h i j 
```

# python - python类中的元数据

> ID：13262491
> 
> 赞同：4
> 
> 时间：2012-11-07T02:51:38.030
> 
> 标签：python, metadata

我在一些 python 库中看到了一种在对象内部使用名为 Meta 的类定义的常见模式，例如 django Models 或tastepie Resources。还有一些其他人不使用它，例如 Celery Tasks。

*这有什么明显的原因吗？*从美味的代码中，我可以看到一些元类正在使用内部元类定义。*元数据和模型的简单属性有什么区别吗？*在 django 模型中很容易说：属性只是像 age = IntegerField 这样的字段，但我可以认为在属性中称为字段，或者只使用 _attrs 或 __attrs 作为元数据。

*这是一个好的做法吗？*

再见。

编辑：

我想为此添加一些内容：

是否有更多的图书馆以类似的方式处理这个问题？还是有不同的方法可以做到这一点？这里有什么常见的模式可以检查吗？谢谢。

我想创建一个库，我喜欢这两种方式，并且与这两个库没有太大关系，所以选择一个或另一个没有一致性问题

再见。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T02:58:09.673

不，除了约定之外没有其他区别：TastyPie 只是使用相同的约定 Django 模型用于将“数据”与“元数据”（关于数据的数据）分开。

## 元类和`Meta`类

此外，元类可以访问类属性和内部类，因此这没有任何重要作用。

## 为什么不呢`_attrs`？`__attrs`

您可以命名它`_attrs`（可能不是`__attrs`由于名称修改机制），但约定不同（前导下划线表示 API 不公开）。

## 为什么`Meta`在 TastyPie 中？

至于 TastyPie 和`Meta`用于存储选项的内部类的原因，我建议观看 Daniel Lindsley（TastyPie 的创建者）名为“ *API Design Tips* ”的演讲，该演讲发生在最新的 DjangoCon US 2012 期间：[http:// www.youtube.com/watch?v=IKQzXu43hzY](http://www.youtube.com/watch?v=IKQzXu43hzY) - 它清楚地显示了使用这种特定方法构建 TastyPie API 的原因。

## 关于一致性的一点点

当谈到“*这被认为是一种好的做法吗？* ”部分时，我会引用 PEP8 的一部分（“风格指南”，尤其[是关于一致性](http://www.python.org/dev/peps/pep-0008/#a-foolish-consistency-is-the-hobgoblin-of-little-minds)的部分）：

> 风格指南是关于一致性的。与本风格指南保持一致很重要。项目内部的一致性更为重要。一个模块或功能内的一致性是最重要的。

因此，我会将这种方法（TastyPie 中的方法）视为与开发它的框架（即：Django）一致的标志。

## 关于良好实践的一句话

是的，这**是一个很好的做法**（保持一致）。使用 Python 样式指南 (PEP8) 中的命名约定也是一种很好的做法，因为它已被广泛采用。然而，使用`Meta`内部类只是一种约定——如果你正在为 Celery Tasks 编写一些扩展，最好遵守它们的命名约定，以免混淆用户。

# ruby - 在 Ruby 中，如何在不创建额外嵌套层的情况下将嵌套数组添加到数组中？

> ID：13262494
> 
> 赞同：1
> 
> 时间：2012-11-07T02:51:52.870
> 
> 标签：ruby, arrays

我正在尝试做一些与此大致类似的事情

```
collection = []
pair_one = [[:ae1,:be1],[:ae2,:be2]]
collection << pair_one
pair_two = [[:ae3,:be3],[:ae4,:be4]]
collection << pair_two 
```

问题是`collection`这样的：

```
[[[:ae1, :be1], [:ae2, :be2]], [[:ae3, :be3], [:ae4, :be4]]] 
```

我希望它是这样的：

```
[[:ae1, :be1], [:ae2, :be2], [:ae3, :be3], [:ae4, :be4]] 
```

我应该使用什么方法来代替`<<`？

基本上我想添加 和 的内容，*而*不是数组本身。什么数组方法正在逃避我的记忆？`pair_one``pair_two``collection`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T02:54:24.793

您可以使用[`concat`](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-concat),[`+=`](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-2B)或[`|=`](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-7C)

・`concat`避免不必要的对象创建。
・`|=`消除重复。

```
collection = []
#=> []
pair_one = [[:ae1,:be1],[:ae2,:be2]]
collection += pair_one
#=> [[:ae1, :be1], [:ae2, :be2]]
pair_two = [[:ae3,:be3],[:ae4,:be4]]
collection += pair_two
#=> [[:ae1, :be1], [:ae2, :be2], [:ae3, :be3], [:ae4, :be4]] 
```

# c++ - 结合 rand() 和 srand() 以获得更好的性能

> ID：13262498
> 
> 赞同：0
> 
> 时间：2012-11-07T02:52:49.233
> 
> 标签：c++, performance, visual-c++, dll, random

所以，我正在制作一个 DLL，我想要一个函数来生成随机数。我想知道这些选项中哪个更有效（性能方面）。

这只是在 DLL 中创建一个函数，允许我获取一个随机数。

```
int getRand(unsigned int seed) {
    int rNum;  // Random Number.

    srand(seed);
    rNum = (rand() % // Whatever I need here.
} 
```

或者，只是在应用程序中使用`srand(time(nullptr))`and`rand()`会在性能上更好吗？

谢谢，

约翰尼·P。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T03:02:46.773

实际上没有任何必要创建一个将调用`srand()`与一个 to结合起来的函数`rand()`。

`srand()`用于播种（即初始化）随机数序列。随后的和重复的调用`rand()`然后用于实际生成随机数。（`rand()`更新随机数生成器的内部状态，因此（通常）下次调用时不会再次生成相同的数字。）

如果您在调用`srand()`之前每次调用`rand()`，则每次都会重新初始化序列。*如果每次传递的种子都相同，则您的函数每次*都将返回相同的随机数。

**因此，无论如何，这两个电话都必须分开。**

您可能还对`<random>`C++11 中标头提供的随机数生成框架感兴趣。这是示例代码（主要从 cppreference 复制）：

```
#include <random>
#include <iostream>

int main()
{
  /* Initialise and seed. Do this only once. */
  std::random_device rd;
  std::mt19937 gen(rd());

  /* Define how to use the raw random numbers, i.e.
     a probability distribution. In this case a
     uniform distribution with six possible integer
     events. */
  std::uniform_int_distribution<> dis(1, 6);

  /* Generate a series of random events. No reseeding. */
  for(int n=0; n<10; ++n)
      std::cout << dis(gen) << ' ';

  std::cout << std::endl;
} 
```

`<random>`cppreference 对标头及其提供的许多选项有很好的描述：http: [//en.cppreference.com/w/cpp/numeric/random](http://en.cppreference.com/w/cpp/numeric/random)。

其中大部分灵感来自 Boost 随机库，它提供了更多选项： http: [//www.boost.org/doc/libs/1_52_0/doc/html/boost_random.html](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_random.html)（链接到 1.52.0 版本）。因此，如果您不能使用 C++11，或者您需要标准未提供的功能，那么使用 Boost 库可能是一个好主意。

# image - CodeIgniter / Image Moo - 动态输出根本不渲染任何东西

> ID：13262499
> 
> 赞同：0
> 
> 时间：2012-11-07T02:52:49.507
> 
> 标签：image, codeigniter

我想知道是否有人对 Codeigniter 的 Image_Moo 库有任何经验。

除了一个功能外，我已经很好地将它与我的 CodeIgniter 项目集成在一起。

该函数是 save_dynamic() 函数。

当我运行以下代码时，它根本不显示任何内容，甚至不显示错误.. 以下代码是我的视图中的内容。

```
<?php $this->image_moo->load("/photo-1.gif")->resize(100,100)->save_dynamic(); ?> 
```

如果有人使用过这个库，我希望能得到一些帮助。

干杯，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:01:07.110

从控制器调用它

```
public function show_image($width,$height,$text,$bordersize,$watermark='on',$directory,$location)
{

    $this->image_moo
    ->load($directory . '/' . $location)
    ->make_watermark_text($text, "assets/machine.ttf", 65, "#fff")

    ->resize($width,$height);
    if ($watermark == 'on') {

    $this->image_moo->watermark(6)
    ->watermark(7);
    }

    $this->image_moo->border($bordersize,"#FFFFFF")
    ->border(2,"#000000")       
    ->save_dynamic();
}
//usage: http://localhost/xampp/index.php/upload/show_image/1200/600/Jason/5/on/uploads/72198_1671772401137_5046618_n.jpg 
```

# asp.net - ASP.NET 多数据绑定下拉列表问题

> ID：13262500
> 
> 赞同：1
> 
> 时间：2012-11-07T02:52:51.747
> 
> 标签：asp.net, exception, gridview, drop-down-menu

我有一个跟踪计算机资产的 ASP.NET 网站，特别是一页让用户更新数据。这个页面有一个 GridView 的 Sqldatasource 对象，以及 GridView 的编辑模式下的每个下拉列表。此页面运行良好，直到我将一个字段从打开的文本更改为下拉列表，其中下拉列表中的项目取决于另一列的选定项目。根据记录，“站点”和“房间”有一列，房间的下拉列表将根据所选站点而变化。我还需要在下拉列表顶部添加一个空白项以支持新/空记录。为了支持空记录，我将房间列的下拉列表更改为 AppendDataBoundItems = true 以便我可以添加一个空白项目，然后从 sqldatasource 检索到的项目在它之后加载。这个实现的问题是，随着站点下拉列表的每次更改（并且它是回发），一个新的房间号列表将被附加到房间下拉列表中，这是不需要的，列表应该被清除并在每次更改时重新加载网站专栏。为了解决这个问题，我添加了以下代码：

```
protected void DropDownListSite_SelectedIndexChanged(object sender, EventArgs e)
    {
        DropDownList drop = (DropDownList)GridView1.Rows[GridView1.EditIndex].FindControl("DropDownListSite");
        Session["atSite"] = drop.SelectedItem.Text;
        DropDownList roomdrop = (DropDownList)GridView1.Rows[GridView1.EditIndex].FindControl("DropDownListRoom");
        roomdrop.Items.Clear();
        roomdrop.Items.Add(string.Empty);
    } 
```

此外，当房间下拉列表的值是数据绑定时，更改站点列将导致异常：

```
Databinding methods such as Eval(), XPath(), and Bind() can only be used in the context of a databound control.
Stack Trace:
[InvalidOperationException: Databinding methods such as Eval(), XPath(), and Bind() can only be used in the context of a databound control.]
System.Web.UI.Page.GetDataItem() +2642054
ASP.viewassets_aspx.__DataBinding__control28(Object sender, EventArgs e) in <redacted path>\Temporary ASP.NET Files\root\81f582e0\4392b2e5\App_Web_kyt9rnda.0.cs:0
System.Web.UI.Control.OnDataBinding(EventArgs e) +99
System.Web.UI.WebControls.ListControl.OnDataBinding(EventArgs e) +14
System.Web.UI.WebControls.ListControl.PerformSelect() +34
System.Web.UI.WebControls.BaseDataBoundControl.DataBind() +73
System.Web.UI.WebControls.BaseDataBoundControl.EnsureDataBound() +82
System.Web.UI.WebControls.BaseDataBoundControl.OnPreRender(EventArgs e) +22
System.Web.UI.WebControls.ListControl.OnPreRender(EventArgs e) +18
System.Web.UI.Control.PreRenderRecursiveInternal() +80
System.Web.UI.Control.PreRenderRecursiveInternal() +171
System.Web.UI.Control.PreRenderRecursiveInternal() +171
System.Web.UI.Control.PreRenderRecursiveInternal() +171
System.Web.UI.Control.PreRenderRecursiveInternal() +171
System.Web.UI.Control.PreRenderRecursiveInternal() +171
System.Web.UI.Control.PreRenderRecursiveInternal() +171
System.Web.UI.Control.PreRenderRecursiveInternal() +171
System.Web.UI.Control.PreRenderRecursiveInternal() +171
System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +842 
```

我认为这意味着主页线程崩溃了，因为房间下拉列表的选定值不再是列表中的项目。

这是gridview的代码：

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
        CellPadding="3" DataSourceID="SqlDataSource1" ForeColor="#333333" 
        HorizontalAlign="Center" onrowcreated="GridView1_RowCreated" 
        AllowSorting="True" 
        onselectedindexchanged="GridView1_SelectedIndexChanged" 
        style="text-align: center" onprerender="GridView1_PreRender" 
            onrowdatabound="GridView1_RowDataBound" DataKeyNames="name" 
            EnableModelValidation="True" onrowupdated="GridView1_RowUpdated" 
            onrowediting="GridView1_RowEditing" AllowPaging="True">
        <RowStyle BackColor="#EFF3FB" />
        <Columns>
            <asp:CommandField SelectText="Pop-&gt;" ShowEditButton="True" Visible="False" >
            <ItemStyle ForeColor="Blue" />
            </asp:CommandField>
            <asp:BoundField DataField="name" HeaderText="name" SortExpression="name" 
                ReadOnly="True" />
            <asp:BoundField DataField="model" HeaderText="model" SortExpression="model" 
                ReadOnly="True" Visible="False" />
            <asp:BoundField DataField="Age" HeaderText="Age" ReadOnly="True" 
                SortExpression="Age" Visible="False" />
            <asp:BoundField DataField="Last Check-in" HeaderText="Last Check-in" 
                SortExpression="Last Check-in" ReadOnly="True" Visible="False" />
            <asp:BoundField DataField="ip" HeaderText="ip" SortExpression="ip" 
                ReadOnly="True" Visible="False" />
            <asp:TemplateField HeaderText="site" SortExpression="site">
                <EditItemTemplate>
                    <asp:Panel ID="Panel1" runat="server">
                        <asp:DropDownList ID="DropDownListSite" runat="server" AppendDataBoundItems="True" 
                            DataSourceID="SqlDataSourceSiteEdit" DataTextField="school" 
                            DataValueField="school" SelectedValue='<%# Bind("Site") %>' 
                            AutoPostBack="True" 
                            onselectedindexchanged="DropDownListSite_SelectedIndexChanged">
                            <asp:ListItem></asp:ListItem>
                        </asp:DropDownList>
                        <br />
                        <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" CssClass="EditValidator" 
                            ErrorMessage="Required field" ControlToValidate="DropDownListSite"></asp:RequiredFieldValidator>
                    </asp:Panel>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label1" runat="server" Text='<%# Bind("site") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="room" SortExpression="room">
                <EditItemTemplate>
                    <asp:DropDownList ID="DropDownListRoom" runat="server" 
                        DataSourceID="SqlDataSourceRooms" DataTextField="roomName" 
                        DataValueField="roomName" SelectedValue='<%# Bind("room") %>'
                        onselectedindexchanged="DropDownListRoom_SelectedIndexChanged" 
                        AppendDataBoundItems="True" ondatabound="DropDownListRoom_DataBound" 
                        onprerender="DropDownListRoom_PreRender">
                        <asp:ListItem></asp:ListItem>
                    </asp:DropDownList>
                    <br />
                    <asp:RequiredFieldValidator ID="RequiredFieldValidator6" runat="server" 
                        ControlToValidate="DropDownListRoom" CssClass="EditValidator" 
                        ErrorMessage="Required field"></asp:RequiredFieldValidator>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label6" runat="server" Text='<%# Bind("room") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Function" SortExpression="Function">
                <EditItemTemplate>
                    <asp:DropDownList ID="DropDownList3" runat="server" 
                        SelectedValue='<%# Bind("Function") %>'>
                        <asp:ListItem></asp:ListItem>
                        <asp:ListItem>Desktop</asp:ListItem>
                        <asp:ListItem>Laptop</asp:ListItem>
                    </asp:DropDownList>
                    <br />
                    <asp:RequiredFieldValidator ID="RequiredFieldValidator2" runat="server" 
                        ControlToValidate="DropDownList3" CssClass="EditValidator" 
                        ErrorMessage="Required"></asp:RequiredFieldValidator>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label2" runat="server" Text='<%# Bind("Function") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Local Printer" 
                SortExpression="Local Printer Type">
                <EditItemTemplate>
                    <asp:DropDownList ID="DropDownList4" runat="server" 
                        SelectedValue='<%# Bind("[Local Printer Type]") %>'>
                        <asp:ListItem></asp:ListItem>
                        <asp:ListItem>None</asp:ListItem>
                        <asp:ListItem>InkJet</asp:ListItem>
                        <asp:ListItem>Laser</asp:ListItem>
                        <asp:ListItem>Impact</asp:ListItem>
                    </asp:DropDownList>
                    <br />
                    <asp:RequiredFieldValidator ID="RequiredFieldValidator3" runat="server" 
                        ControlToValidate="DropDownList4" CssClass="EditValidator" 
                        ErrorMessage="Required"></asp:RequiredFieldValidator>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label3" runat="server" 
                        Text='<%# Bind("[Local Printer Type]") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Location Type" SortExpression="Location Type">
                <EditItemTemplate>
                    <asp:DropDownList ID="DropDownList5" runat="server" 
                        SelectedValue='<%# Bind("[Location Type]") %>'>
                        <asp:ListItem></asp:ListItem>
                        <asp:ListItem>Classroom</asp:ListItem>
                        <asp:ListItem>Office</asp:ListItem>
                        <asp:ListItem>Media Center</asp:ListItem>
                        <asp:ListItem>Mobile Lab</asp:ListItem>
                        <asp:ListItem>Fixed Lab</asp:ListItem>
                    </asp:DropDownList>
                    <br />
                    <asp:RequiredFieldValidator ID="RequiredFieldValidator4" runat="server" 
                        ControlToValidate="DropDownList5" CssClass="EditValidator" 
                        ErrorMessage="Required"></asp:RequiredFieldValidator>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label4" runat="server" Text='<%# Bind("[Location Type]") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Primary Use" SortExpression="Primary Use">
                <EditItemTemplate>
                    <asp:DropDownList ID="DropDownList6" runat="server" 
                        SelectedValue='<%# Bind("[Primary Use]") %>'>
                        <asp:ListItem></asp:ListItem>
                        <asp:ListItem>Admin</asp:ListItem>
                        <asp:ListItem>Student</asp:ListItem>
                        <asp:ListItem>Teacher</asp:ListItem>
                    </asp:DropDownList>
                    <br />
                    <asp:RequiredFieldValidator ID="RequiredFieldValidator5" runat="server" 
                        ControlToValidate="DropDownList6" CssClass="EditValidator" 
                        ErrorMessage="Required"></asp:RequiredFieldValidator>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label5" runat="server" Text='<%# Bind("[Primary Use]") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Comments" SortExpression="Comments">
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox2" runat="server" Text='<%# Bind("Comments") %>'></asp:TextBox>
                    <br />
                    &nbsp;
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label7" runat="server" Text='<%# Bind("Comments") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:BoundField DataField="Last Updated" HeaderText="Last Updated" 
                SortExpression="Last Updated" ReadOnly="True" />
            <asp:BoundField DataField="FA_Number" HeaderText="FA_Number" 
                SortExpression="FA_Number" ReadOnly="True" />
            <asp:BoundField DataField="Funding_Source" HeaderText="Funding_Source" 
                SortExpression="Funding_Source" ReadOnly="True" />
        </Columns>
    </asp:GridView> 
```

所以我的问题是：如何根据所选站点对房间列动态的数据源进行数据绑定，并且当站点列发生更改并且选定值不再是时，它将默认为列表中的空白（索引 0）项列表中的项目？

如果这是冗长的，或者我遗漏了一些重要的东西，我提前道歉，请随时提出问题以进行澄清。

提前致谢 ：）

# powershell - Powershell 脚本帮助：要查询和导出到 excel 的 Windows 事件

> ID：13262505
> 
> 赞同：0
> 
> 时间：2012-11-07T02:54:01.260
> 
> 标签：powershell, scripting, vbscript

我有以下用于查询 Windows 事件的 powershell 脚本，尝试编写此脚本以获取计算机名称、事件 ID、源和描述信息到 excel。

```
$servers = get-content “c:\list.txt”
foreach ($server in $servers)
{
$server
Get-EventLog -LogName APPLICATION |Source "ACECLIENT" AND Where-Object { $_.EventID -eq 1001 } # I am not sure how to include here description "looking for 'File not found: C:\Program Files\Microsoft ISA Server\SDCONFIG.'" 
} 
```

寻求帮助以完成此脚本。该脚本也可以在计算机列表上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T03:15:59.830

```
 $servers = get-content “c:\list.txt”
 $OututPath="C:\tst.csv"

 $start=[datetime]::Now.AddDays(-5)
 Get-EventLog -LogName Application -ComputerName $servers -Source "ACECLIENT" -Message "*File not found*" -After $start  | select MachineName, EventID, Message | Export-Csv $OututPath -NoTypeInformation 
```

希望我了解您要过滤的内容

# java - 执行原生 JPA/Hibernate 查询后按结果列排序

> ID：13262508
> 
> 赞同：0
> 
> 时间：2012-11-07T02:54:38.707
> 
> 标签：java, hibernate, jpa

假设我有以下原生 SQL：

```
SELECT a, b, c + d AS cd
FROM stuff 
```

我知道使用`order by`.

我只是想知道 JPA/Hibernate 是否有办法在查询执行并返回结果后指定排序，例如按`cd`列排序。基本上类似于比较器（除了它内置在 ORM 中）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T03:04:02.070

从来没听说过。但我会说你的数据库在排序数据方面通常比你编写的任何代码更有效率。我会坚持让分贝做我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T03:24:32.120

JPA 提供“ORDER BY”支持，我正在使用它。您可以使用以下语法。

> **SELECT a, b, c + d AS cd FROM stuff ORDER BY cd [DESC/ASC];**

# iphone - 直接调用操作表 AirPlay 的代码是什么？

> ID：13262514
> 
> 赞同：3
> 
> 时间：2012-11-07T02:55:47.620
> 
> 标签：iphone, objective-c, xcode, airplay

我想知道直接调用操作表 AirPlay 的代码。我想在代码中实现“按下 AirPlay 按钮”。换句话说，我想从任何地方调用“动作表 AirPlay”。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T03:36:33.717

```
- (void)showAirPlay
{
    MPVolumeView *volumeView = [[MPVolumeView alloc] initWithFrame:CGRectZero];
    [self.view addSubview:volumeView];

    for (UIButton *button in volumeView.subviews)
    {
        if ([button isKindOfClass:[UIButton class]])
        {
            [button sendActionsForControlEvents:UIControlEventTouchUpInside];
        }
    }
} 
```

将 MPVolumeView 添加到您的视图中，然后将控制事件发送到按钮。请记住，这是非常不稳定的，因为如果 Apple 将另一个 UIButton 添加到 MPVolumeView，这将中断。

# ssis - 如何在数据流任务中强制数据库连接失败

> ID：13262517
> 
> 赞同：0
> 
> 时间：2012-11-07T02:56:33.203
> 
> 标签：ssis

A 在一个序列容器中具有四个数据流任务，同时连接到同一个 Oracle 数据库。那就是没有绿色的小线连接四个数据流任务来强制它们按顺序执行。

在执行四个数据流任务时，与 Oracle 的 obdc 连接很少发生。

一个或多个数据流无法完成。请注意，通常的 OnError 处理程序从未被击中。

我可以处理这种情况并优雅地失败。

但是我该如何测试呢？

该软件包在服务器上安装和执行。我希望能够在程序包运行并从 Oracle 数据库中提取数据时强制终止 odbc 连接。

我无法像在 Sql Server Management Studio 中那样以类似的方式访问 Oracle 来终止适当的进程。

我能想到的最接近的做法是调整在 Sql Server 数据库中设置为包配置的连接字符串，使其无法连接到随机的虚拟服务器名称。不完全一样，但至少数据流会失败。它不会因为我正在寻找的确切原因而失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T07:55:20.650

我不会尝试强行杀死事物，而是使用 SSiS 事务，因此如果失败，一切都会回滚。为此，请执行以下操作：

1.  确保 MSDTC 正在运行
2.  设置 TransactionOption = 在包级别支持
3.  在序列容器级别设置 TransactionOption = 必需
4.  设置 TransactionOption = 支持数据流任务

现在，它们应该全部成功或全部回滚。

# c++ - glPolygonMode(GL_FRONT_AND_BACK, GL_LINES) 不工作

> ID：13262525
> 
> 赞同：6
> 
> 时间：2012-11-07T02:57:28.653
> 
> 标签：c++, opengl, rasterizing

我正在尝试以正常填充模式渲染图元，然后作为线框。

渲染代码：

```
glClear(GL_COLOR_BUFFER_BIT);
glClearColor(0.9f, 0.9f, 0.9f, 1);
// reset matrix
glLoadIdentity();
// fill display list
glColor3c(150, 255, 255);
glCallList(lDList);
// wireframe display list
glColor3f(0, 0, 0);
glLineWidth(10);
glPolygonMode(GL_FRONT_AND_BACK, GL_LINES);
glCallList(lDList);
glPolygonMode(GL_FRONT_AND_BACK, GL_FILL); 
```

显示列表创建代码：

```
lDList = glGenLists(1);
glNewList(lDList, GL_COMPILE);
    glBegin(GL_QUADS);
        glVertex3i(-1, -1, 0);
        glVertex3i(1, -1, 0);
        glVertex3i(1, -1, -25);
        glVertex3i(-1, -1, -25);
    glEnd();
glEndList(); 
```

glColor3c 宏：

```
#define glColor3c(r, g, b) glColor3f(r / 255, g / 255, b / 255) 
```

我期望得到一个周围有黑色框架的青色平面，但所发生的只是我第二次渲染显示列表时，它只是填充和绘制整个东西，覆盖另一个基元的像素。我最终得到了我想要绘制的平面，但它只是黑色（我为“版本”行指定的颜色）。

任何其他可能有用的信息是我在带有 MSVC++ 2010 的 Windows 7 上使用 SDL。我没有对 glEnable 进行*任何*调用，所以我没有启用会搞砸的奇怪设置，或者，也许可以解决问题. 我唯一的 OpenGL 设置代码设置投影和模型视图矩阵，然后创建显示列表。

显然我的问题是为什么我第二次绘制显示列表是填充图元而不是创建线条？我该如何解决？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-07T03:35:59.337

根据[`glPolygonMode`](http://www.opengl.org/sdk/docs/man4/xhtml/glPolygonMode.xml)OpenGL 4.0 中的文档，第二个参数 ,`mode`可能只是`GL_FILL`,`GL_POINT`或中的一个`GL_LINE`。在您的示例中，您正在传递`GL_LINES`，这是一个完全不同的枚举值。

我怀疑传递是由 OpenGL 处理的，如果接收到的模式不是它所期望的`GL_LINES`，它会默认返回。`GL_FILL`

另请注意：规范`glPolygonMode`与 OpenGL 2.1 相同。

# dynamic - 具有不同行高和drawRect的自定义UITableViewCell

> ID：13262527
> 
> 赞同：3
> 
> 时间：2012-11-07T02:57:38.007
> 
> 标签：dynamic, uitableview, height, row, drawrect

我有一个子类 UITableViewCell 并且在那个类中我有一个 drawRect 方法，它为每个单元格绘制一个框架。每个单元格都有不同的大小（如在 Twitter 应用程序中），由于某种原因，这导致我的滚动速度很慢。有没有解决的办法？

这是我在 UITableViewCell 子类中的 drawRect 代码：

```
- (void)drawRect:(CGRect)rect {

// Drawing code
CGContextRef c = UIGraphicsGetCurrentContext();
CGContextSetFillColorWithColor(c, [[UIColor whiteColor] CGColor]);
CGContextSetStrokeColorWithColor(c, [[UIColor lightGrayColor] CGColor]);
CGContextSetLineWidth(c, 0.5);

CGFloat minx = CGRectGetMinX(rect) , midx = CGRectGetMidX(rect), maxx = CGRectGetMaxX(rect) ;
CGFloat miny = CGRectGetMinY(rect) , midy = CGRectGetMidY(rect) , maxy = CGRectGetMaxY(rect) ;
minx = minx + 10;
miny = miny + 10;

maxx = maxx - 10;
maxy = maxy - 10;

CGContextSaveGState(c);

CGContextMoveToPoint(c, minx, midy);
CGContextAddArcToPoint(c, minx, miny, midx, miny, 4.0f);
CGContextAddArcToPoint(c, maxx, miny, maxx, midy, 4.0f);
CGContextAddArcToPoint(c, maxx, maxy, midx, maxy, 4.0f);
CGContextAddArcToPoint(c, minx, maxy, minx, midy, 4.0f);

// Close the path
CGContextClosePath(c);
// Fill & stroke the path
CGContextSetShadowWithColor(c, CGSizeMake(.5, 1), 2.5, [UIColor lightGrayColor].CGColor);
CGContextDrawPath(c, kCGPathFillStroke);

CGContextRestoreGState(c);
CGContextSetFillColorWithColor(c, [[UIColor whiteColor] CGColor]);
CGContextSetStrokeColorWithColor(c, [[UIColor lightGrayColor] CGColor]);
CGContextSetLineWidth(c, 0.5);
CGContextMoveToPoint(c, minx, midy);
CGContextAddArcToPoint(c, minx, miny, midx, miny, 4.0f);
CGContextAddArcToPoint(c, maxx, miny, maxx, midy, 4.0f);
CGContextAddArcToPoint(c, maxx, maxy, midx, maxy, 4.0f);
CGContextAddArcToPoint(c, minx, maxy, minx, midy, 4.0f);

CGContextClosePath(c);
CGContextDrawPath(c, kCGPathFillStroke);
} 
```

这是单元格初始化和高度的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";
TimeLineTableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil) {
    cell = [[TimeLineTableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}
return cell;
}

-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
int cellHeight = 500 + indexPath.row;
return cellHeight;
} 
```

# c - 用 C 语言为 IRC 机器人创建一个基本的 shell，另一个线程在后台运行

> ID：13262528
> 
> 赞同：-3
> 
> 时间：2012-11-07T02:57:48.760
> 
> 标签：c, multithreading, sqlite, bots, irc

目前我有一个用 C 语言编写的非常简单的 IRC 机器人。当我运行它时，它会建立连接并加入指定的频道。所有连接细节都是硬编码的，但这不是问题。

我想要做的是同时运行一个基本的 shell，这意味着我当前必须从 IRC 通道接收文本并解析它的循环在后台的线程中运行。在这个 shell 中，我希望能够运行可以向 IRC 通道发送消息的命令，或者可以优雅地终止程序（这意味着两个线程都需要关闭）。这个 shell 并不意味着是任何类型的作业控制 shell。

该机器人的主要目的是监视发布的任何 URL 的频道并将它们存储在 SQLite 数据库中。然后，IRC 频道中的人将能够在数据库中搜索特定的 URL。我还希望能够从 shell 执行各种数据库命令，例如搜索，以及手动插入和删除。我提到这一点是因为我假设我需要确保所有数据库访问都是线程安全的。此外，理想情况下，我更希望插入数据库优先于搜索，但这实际上是我的要求列表中的最后一个。

最后，从 IRC 通道接收到的一些命令有可能被派生到它们自己的线程中。这可能是因为他们正在访问数据库，这肯定有可能不是即时的，也可能是因为他们正在调用一个方法来阻塞线程一段时间，以错开将消息传输到通道。

这就是我要问的：

*   我该如何设置这种程序？我需要什么样的结构同时运行两个主线程并可能在两者之间传递消息？
*   访问用于与 IRC 通道通信的套接字是否需要是线程安全的？
*   我应该如何使程序线程安全？互斥量就足够了吗？

如果重要的话，该程序几乎肯定会在 Ubuntu Server 发行版上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T03:00:43.420

1.  使用队列在线程之间来回传递消息（url、命令等）。
2.  只让一个线程访问套接字。
3.  如果您使用队列，那么只有队列。

我建议首先查找并编写一个消费者/生产者程序以掌握其中的窍门，然后将其合并到您的 irc 机器人中。

# jquery - 如何将 jquery.validate 插件与 jquery.serialize() 结合使用

> ID：13262531
> 
> 赞同：1
> 
> 时间：2012-11-07T02:58:17.580
> 
> 标签：jquery, html, validation, serialization

在由 ajax 执行之前，我曾尝试使用[jquery.validate插件验证表单，但它失败了，因为在使用 validate 函数时 ajax 提交正在工作。](http://jzaefferer.github.com/jquery-validation/jquery.validate.js)

这是我的表格：

```
<form>
 <p><label for="cname">Name</label><em>*</em><input id="cname" name="name" size="25" class="required" minlength="2" /></p>
   <p><label for="cemail">E-Mail</label><em>*</em><input id="cemail" name="email" size="25"  class="required email" /></p>
   <p><label for="curl">URL</label><em></em><input id="curl" name="url" size="25"  class="url" value="" /></p>
   <p><label for="ccomment">Your comment</label><em>*</em><textarea id="ccomment" name="comment" cols="22"  class="required"></textarea></p>
   <p><input class="submit" type="submit" value="Submit"/></p>
 </form> 
```

我的jQuery代码：

```
$('form').validate();
$('form').submit(function() {
  alert($(this).serialize());
  return false;
}); 
```

这是我的小提琴：http: [//jsfiddle.net/ongisnade/tzFzR/](http://jsfiddle.net/ongisnade/tzFzR/)

如何在提交ajax之前使表单验证？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T03:04:28.737

### 使用`.valid()`前检查`.serialize()`。

```
// Initialize
$('form').validate();

// Bind
$('form').submit(function() {
    if($('form').valid())
        alert($(this).serialize());
    else
        alert("Invalid");
    return false;
});​ 
```

### 小提琴：http: [//jsfiddle.net/eHD4g/](http://jsfiddle.net/eHD4g/)

### 或者正如[Sparky672](https://stackoverflow.com/users/594235/sparky672)所说，使用`submitHandler`属性：

```
$('form').validate({
    submitHandler: function(form) {
        alert($('form').serialize());
        return false;
    }
}); 
```

### 小提琴：http: [//jsfiddle.net/eHD4g/2/](http://jsfiddle.net/eHD4g/2/)

# java - 在java中检测移动物体撞击静止物体

> ID：13262532
> 
> 赞同：0
> 
> 时间：2012-11-07T02:59:14.530
> 
> 标签：java, applet, collision-detection

我有一个由用户在屏幕上绘制的充满矩形的结构，旨在作为球在运行时反弹的“障碍”。我考虑过使用，但意识到（除非我不够了解）当返回 true`Rectangle.intersects()`时，没有办法判断球的走向。`intersects`目前，我正在使用大量逻辑来尝试检测球何时接触给定矩形的边缘，并且它根本无法正常工作。如果有更好的方法来做到这一点，或者如果有办法修复下面的逻辑，我愿意听取任何建议。谢谢！

```
for (Rectangle rect : r)
    {
      int rx = rect.x;
      int ry = rect.y;
      int rh = rect.height;
      int rw = rect.width;
      //If the ball hits either side of the rectangle, change the x direction
      if((loc.x > rx && loc.x > ry && loc.x < (ry + rh))||(loc.x < (rx + rw) && loc.x > rx && loc.x <(ry + rh)))
        {dx *= -1;}
      //If the ball hits either the top or bottom, change the y direction
      if((loc.y > ry && loc.y > rx && loc.y < (rx + rw))||(loc.y < (ry + rh) && loc.y > ry && loc.y <(rx + rw)))
        {dy *= -1;}
    } 
```

作为参考，并使其更具可读性，r 是包含所有绘制矩形的向量，loc 是球当前所在的点，dx 和 dy 是球移动的方向（1 或 -1）。

# javascript - 有人可以帮我干掉这些 jQuery 每个循环吗？

> ID：13262533
> 
> 赞同：1
> 
> 时间：2012-11-07T02:59:16.067
> 
> 标签：javascript, jquery, dry

```
function redundantSee() {

  var optionSet1 = $('.wrapper:eq(0)'),
      optionSet2 = $('.wrapper:eq(1)');

  optionSet1.find('.options').each(function(){
      var self = $(this),
          input = self.find('input'),
          title = self.find('.title').text(),
          value = input.val(),
          source = self.find('img').attr('src'),
          id = input.attr('id'),
          listItem = $('<li/>', {'value': value, 'id': id }),
          imageElement = $('<img/>', {'src': source, 'title': title});

      $('div.corresponding1').append(nameListItem);
      listItem.append(imageElement);
  });

  optionSet2.find('.options').each(function(){
      var self = $(this),
          input = self.find('input'),
          title = self.find('.title').text(),
          value = input.val(),
          source = self.find('img').attr('src'),
          id = input.attr('id'),
          listItem = $('<li/>', {'value': value, 'id': id }),
          imageElement = $('<img/>', {'src': source, 'title': title});

      $('div.corresponding2').append(listItem);
      listItem.append(imageElement);
  });
} 
```

我已经简化了这个发布，因为这个函数将有超过 4 个选项集循环通过。

我在弄清楚如何将所有重复的代码变成更易于管理的东西时遇到了问题。

但是由于每个选项集都有自己的每个循环，因此 $(this) 变量（以及所有相应的变量）特定于在 ('.options') 元素上运行的循环。

如果我每个循环都做一个并使用一个计数器，如下所示：

```
$('wrapper').each(function(i){ // ... }); 
```

我仍然遇到需要重新声明特定于该 optionSet 循环中的所有新变量的问题。

有人可以帮我弄清楚如何压缩它，这样我就不会在每次向函数添加新选项集时不断重复相同的代码？

编辑：每个 $('div.corresponding') 元素完全不同，因此它们不能用计数器递增。（例如，一个可能是 $('div.foo') 或 $('div.foo ul.bar')

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T03:07:58.697

例如，您可以扩展 jQuery，使其更具可重用性：

```
// extend jquery
(function($){

    $.fn.redundantSee = function (subSelector) {

        return this.find('.options').each(function () {
            var self = $(this),
            input = self.find('input'),
            title = self.find('.title').text(),
            value = input.val(),
            source = self.find('img').attr('src'),
            id = input.attr('id'),
            listItem = $('<li/>', { 'value': value, 'id': id }),
            imageElement = $('<img/>', { 'src': source, 'title': title });

            $(subSelector).append(listItem);
            listItem.append(imageElement);
        });

    };

}(jQuery));

// and use it like this
$('.wrapper:eq(0)').redundantSee('div.corresponding1');
$('.wrapper:eq(1)').redundantSee('div.corresponding2'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T03:13:01.723

我将为包装器执行一个循环，并为每个包装器中的选项执行一个循环，并且我将为相应的 DIV 使用增量变量。

```
function redundantSee() {
    var i = 0;
    $('.wrapper').each(function(){
        i++;
        $(this).find('.options').each(function(){
            var self = $(this),
                input = self.find('input'),
                title = self.find('.title').text(),
                value = input.val(),
                source = self.find('img').attr('src'),
                id = input.attr('id'),
                listItem = $('<li/>', {'value': value, 'id': id }),
                imageElement = $('<img/>', {'src': source, 'title': title});

            $('div.corresponding' + i).append(nameListItem);
            listItem.append(imageElement);
        });
    });
} 
```

# java - 多个java servlet的web.xml中的通用初始化参数？

> ID：13262534
> 
> 赞同：7
> 
> 时间：2012-11-07T02:59:21.153
> 
> 标签：java, servlets, init-parameters

我目前的理解是 web.xml 中的 init-params 必须放在 servlet 变量的主体中，如下所示：

```
<servlet>
    <servlet-name>MyServlet</servlet-name>
    <servlet-class>MyServlet</servlet-class>

    <init-param>
        <description>debug</description> 
        <param-name>debug</param-name> 
        <param-value>true</param-value> 
    </init-param>   
</servlet> 
```

哪个工作正常，但是如果我将 init-param 带到 servlet 主体之外，那么当我调用 getInitParam() 时它不再识别它

只是想知道这是否可能，因为我有 3 个 servlet，我想共享通用的 init 参数

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-07T05:34:02.423

不，您无法使用 servlet init-param 实现这一点。如果你想跨 servlet 使用通用的 init-param，你应该使用上下文参数。

**您可以这样做：**

```
<context-param>
    <description>debug</description> 
    <param-name>debug</param-name> 
    <param-value>true</param-value>
</context-param> 
```

并且，在 servlet 中使用[ServletContext.getInitParameter() 。](http://docs.oracle.com/javaee/5/api/javax/servlet/ServletContext.html#getInitParameter%28java.lang.String%29)

# java - java中的set和get方法

> ID：13262535
> 
> 赞同：0
> 
> 时间：2012-11-07T02:59:29.343
> 
> 标签：java, methods, get, set, jgrasp

```
public class Examples
{
    private int numbers[]; //instance variable
    public Examples()
    {
        numbers = new int[10];
        for (int i = 0; i < numbers.length; i++) 
        {                           //constructor number 1
           numbers[i] = 42;
        }
     } 

     public Examples(int[] array)
     {
        numbers = new int[array.length];
        for (int i = 0; i < array.length; i++) 
        {
           numbers[i] = array[i];         //constructor number 2
        }
      }
} 
```

所以我必须编写一个 set 方法，该方法将为实例变量创建一个新数组，该数组与传递给 setNumbers 的数组长度相同，然后复制其参数的值。

到目前为止，我有

```
public void setNumbers (int numbers)
    {
        int[] setNumbers = int numbers;
    } 
```

我从中得到错误，不知道为什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T03:05:14.040

我不知道您的 setter 方法签名应该是什么，但正确的方法可能是其中之一：

```
public void setNumbers (int []numbers) {
    this.numbers = numbers;
    // or perhaps you need to copy the argument:
    // this.numbers = Arrays.copyOf(numbers, numbers.length);
} 
```

要不然：

```
public void setNumbers (int numbers) {
    this.numbers = new int[numbers];
} 
```

另外，我会这样写你的构造函数：

```
public Examples()
{
    numbers = new int[10];
    Arrays.fill(numbers, 42);
 } 

 public Examples(int[] array)
 {
    numbers = Arrays.copyOf(array, array.length);
  } 
```

# uipasteboard - 微信SDK 1.1 iOS6 崩溃

> ID：13262536
> 
> 赞同：1
> 
> 时间：2012-11-07T02:59:33.593
> 
> 标签：uipasteboard

嗨，我在我的应用程序上使用微信 sdk 1.1，当我发送打开微信的请求时，它崩溃并显示此错误消息

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UIPasteboard setValue:forPasteboardType:]: value is not a valid property list type' 
```

不过，这只发生在 ios6 上。它在 ios5 上运行良好。我的代码是这样的：

```
SendMessageToWXReq* req = [[SendMessageToWXReq alloc] init];
req.bText = YES;
req.text = @"testing";

[WXApi sendReq:req]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T06:19:42.543

微信开发人员还没有解决这个问题，所以可以说微信不支持iOS6。或者您可以发送邮件至weixinapp@qq.com 获取iOS6 补丁。

注意：到目前为止，它支持 armv7 & arm7s 的新 SDK 似乎已经解决了这个问题。将新 SDK 添加到您的项目中，删除对旧 SDK 的引用，然后添加对这个新 SDK 的引用。

# android - 使用 XML 的 Android 片段列表视图

> ID：13262537
> 
> 赞同：1
> 
> 时间：2012-11-07T02:59:34.240
> 
> 标签：android, listview

在我尝试在我的片段中实现 listview 后出现错误。请检查我的代码，除了使用 ListView lv = getListView(); 之外，我还试图为我的列表视图增加​​一个 xml 布局 . 我知道这种方法有效，但我不希望那样。请帮我纠正我的代码。

日志猫：

```
11-07 10:54:36.828: E/AndroidRuntime(2947): FATAL EXCEPTION: main
11-07 10:54:36.828: E/AndroidRuntime(2947): java.lang.NullPointerException
11-07 10:54:36.828: E/AndroidRuntime(2947):     at testing.app.FreeFragment$loadListView.onPostExecute(FreeFragment.java:132)
11-07 10:54:36.828: E/AndroidRuntime(2947):     at testing.app.FreeFragment$loadListView.onPostExecute(FreeFragment.java:1)
11-07 10:54:36.828: E/AndroidRuntime(2947):     at android.os.AsyncTask.finish(AsyncTask.java:417)
11-07 10:54:36.828: E/AndroidRuntime(2947):     at android.os.AsyncTask.access$300(AsyncTask.java:127)
11-07 10:54:36.828: E/AndroidRuntime(2947):     at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429)
11-07 10:54:36.828: E/AndroidRuntime(2947):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-07 10:54:36.828: E/AndroidRuntime(2947):     at android.os.Looper.loop(Looper.java:130)
11-07 10:54:36.828: E/AndroidRuntime(2947):     at android.app.ActivityThread.main(ActivityThread.java:3691)
11-07 10:54:36.828: E/AndroidRuntime(2947):     at java.lang.reflect.Method.invokeNative(Native Method)
11-07 10:54:36.828: E/AndroidRuntime(2947):     at java.lang.reflect.Method.invoke(Method.java:507)
11-07 10:54:36.828: E/AndroidRuntime(2947):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
11-07 10:54:36.828: E/AndroidRuntime(2947):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
11-07 10:54:36.828: E/AndroidRuntime(2947):     at dalvik.system.NativeStart.main(Native Method) 
```

主要活动.java

```
public class MainActivity extends SherlockFragmentActivity {
    Tab tab;

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        AppRater.app_launched(this);
        if (!isNetworkAvailable()) {
            AlertDialog.Builder builder = new AlertDialog.Builder(this);
            builder.setMessage("Internet Connection Required")
                    .setCancelable(false)
                    .setPositiveButton("Exit",
                            new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog,
                                        int id) {
                                    finish();
                                }

                            });
            AlertDialog alert = builder.create();
            alert.show();

        } else {

            ActionBar actionBar = getSupportActionBar();
            actionBar.setDisplayShowHomeEnabled(false);
            actionBar.setDisplayShowTitleEnabled(false);
            actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

            tab = actionBar.newTab().setTabListener(new FreeFragment())
                    .setIcon(R.drawable.free);
            actionBar.addTab(tab);

            tab = actionBar.newTab().setTabListener(new BuyFragment())
                    .setIcon(R.drawable.buy);
            actionBar.addTab(tab);

            tab = actionBar.newTab().setTabListener(new ReaderFragment())
                    .setIcon(R.drawable.reader);
            actionBar.addTab(tab);
        }
    }

    private boolean isNetworkAvailable() {
        ConnectivityManager connectivityManager = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo activeNetworkInfo = connectivityManager
                .getActiveNetworkInfo();
        return activeNetworkInfo != null;
    }

} 
```

自由片段.java

```
 public class FreeFragment extends Fragment implements
        ActionBar.TabListener {

    static final String URL = "https://myxml.xml";
    static final String KEY_SONG = "song";
    static final String KEY_ID = "id";
    static final String KEY_TITLE = "title";
    static final String KEY_CAT_ARTIST = "artistcat";
    static final String KEY_DURATION = "duration";
    static final String KEY_THUMB_URL = "thumb_url";
    static final String KEY_BIG_URL = "big_url";
    static final String KEY_CAT_URL = "cat_url";
    static final String KEY_DESC = "cat_desc";
    ArrayList<HashMap<String, String>> menuItems;
    ListAdapter adapter;
    private Fragment mFragment;

    ListView lv;

     @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

            View v = inflater.inflate(R.id.listview); //<--- what do i inflate here? 
            lv = (ListView) v.findViewById(R.id.list);

            if (!isNetworkAvailable()) {
                AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
                builder.setMessage("Internet Connection Required")
                        .setCancelable(false)
                        .setPositiveButton("Exit",
                                new DialogInterface.OnClickListener() {
                                    public void onClick(DialogInterface dialog,
                                            int id) {
                                        FileCache loader = new FileCache(null);
                                        loader.clear();  
                                        getActivity().finish();
                                    }

                                });
                AlertDialog alert = builder.create();
                alert.show();

            } else {

                new loadListView().execute();

            }

            return v;
    }

    private boolean isNetworkAvailable() {
        ConnectivityManager connectivityManager = (ConnectivityManager) getActivity()
                .getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo activeNetworkInfo = connectivityManager
                .getActiveNetworkInfo();
        return activeNetworkInfo != null;
    }

    public class loadListView extends AsyncTask<Integer, String, String> {

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
        }

        @Override
        protected String doInBackground(Integer... args) {
            // updating UI from Background Thread
            menuItems = new ArrayList<HashMap<String, String>>();

            XMLParser parser = new XMLParser();
            String xml = parser.getXmlFromUrl(URL); // getting XML
            Document doc = parser.getDomElement(xml); // getting DOM element

            NodeList nl = doc.getElementsByTagName(KEY_SONG);
            // looping through all item nodes <item>
            for (int i = 0; i < nl.getLength(); i++) {
                // creating new HashMap
                HashMap<String, String> map = new HashMap<String, String>();
                Element e = (Element) nl.item(i);
                // adding each child node to HashMap key => value
                map.put(KEY_ID, parser.getValue(e, KEY_ID));
                map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));
                map.put(KEY_CAT_ARTIST, parser.getValue(e, KEY_CAT_ARTIST));
                map.put(KEY_DURATION, parser.getValue(e, KEY_DURATION));
                map.put(KEY_THUMB_URL, parser.getValue(e, KEY_THUMB_URL));
                map.put(KEY_BIG_URL, parser.getValue(e, KEY_BIG_URL));
                map.put(KEY_CAT_URL, parser.getValue(e, KEY_CAT_URL));
                map.put(KEY_DESC, parser.getValue(e, KEY_DESC));
                // adding HashList to ArrayList
                menuItems.add(map);
            }
            return null;
        }

        @Override
        protected void onPostExecute(String args) {

            if (getActivity() != null) {
                adapter = new MainPageLazyAdapter(getActivity(), menuItems);
                lv = (ListView)getActivity().findViewById(R.id.list);                                 
                //setListAdapter(adapter);
                lv.setAdapter(adapter);

            }

        }
    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        mFragment = new FreeFragment();
        ft.add(android.R.id.content, mFragment);
        ft.attach(mFragment);
    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        ft.remove(mFragment);
    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {

    }
} 
```

列表视图.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

     <com.google.ads.AdView android:id="@+id/adView"
                         android:layout_width="wrap_content"
                         android:layout_height="wrap_content"
                         android:layout_centerHorizontal="true"
                         ads:adUnitId="mycode"
                         ads:adSize="BANNER"
                         ads:loadAdOnCreate="true"
                         />

<ListView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_below="@+id/adView"
    android:cacheColorHint="#00000000" >

</ListView>
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T03:13:39.827

当然 ListView 是空的。

这个：

```
 @Override
            protected void onPostExecute(String args) {

                if (getActivity() != null) {
                    adapter = new MainPageLazyAdapter(getActivity(), menuItems);
                    lv.setAdapter(adapter);

                    lv = (ListView)getActivity().findViewById(R.id.list);

                }

            } 
```

需要是这样的：

```
 @Override
            protected void onPostExecute(String args) {

                if (getActivity() != null) {
                    adapter = new MainPageLazyAdapter(getActivity(), menuItems);
                    lv = (ListView)getActivity().findViewById(R.id.list);                                 

                    lv.setAdapter(adapter);

                }

            } 
```

在`ListView`初始化`ListView`.

更重要的是，你做错了：你使用的 a `SherlockListFragment`which 本身可以扩展`ListFragment`，你可以认为它与 a 类似`ListActivity`——它只是为你提供了一些方便来设置 a `listview`。您只需调用`setListAdapter`您的`postExecute`. 您不需要自己膨胀任何列表视图；这就是 a 的全部意义所在`ListFragment`。

编辑：

因为，正如您所指出的，您希望在 Fragment 中不仅仅是一个 ListView，所以不要使用 SherlockListFragment。相反，扩展一个普通的旧片段。然后在 onCreateView 内部，执行以下操作：

```
 @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

        View v = inflater.inflate(R.layout.listview);
        lv = v.findViewById(R.id.list);
        return v;
} 
```

现在，您可以将该 ListView 作为字段引用。现在，在你的 onPostExecute 中，你可以做`lv.setAdapter(adapter);`

# c# - 如何在java（Android）中实现c#事件行为

> ID：13262539
> 
> 赞同：0
> 
> 时间：2012-11-07T02:59:48.397
> 
> 标签：c#, java, android

当我在 C# 中编程时，我经常使用事件。现在我想在 Java 中实现类似的东西。我知道这两种语言是不同的，并且在实现这种机制方面存在一些差异。好吧，为了提供更好的图片，也许我会描述一下我想要得到的东西，因为我可能会混淆一些术语：

**MyClass**包含处理启动**MyEvent**的代码和在某些情况下启动该事件的一些代码。

**MyEventArgs**是从**MyClass**传输数据并与事件启动一起发送的类，因此处理**MyEvent的函数具有有关****MyClass**实例状态的一些附加信息。

并且有一个**MyApp**类，在 main 方法中包含**MyClass**的实例和处理**MyEvent的代码，当在****MyClass**内引发事件时，某些操作在侦听**MyEvent**的代码中执行。

如果仍然不清楚，我的意思是实现就像按钮单击背后的 c# 机制一样，只是没有按钮，而是有我的类，有我的事件参数而不是鼠标事件参数，并且有我设计的行为而不是单击.

我试图用谷歌搜索我的问题的一些答案，例如我发现了以下网站：

[http://javarevisited.blogspot.com/2011/12/observer-design-pattern-java-example.html](http://javarevisited.blogspot.com/2011/12/observer-design-pattern-java-example.html) [http://www.javaworld.com/javaworld/javaqa/2002-03/01-qa-0315-happyevent .html](http://www.javaworld.com/javaworld/javaqa/2002-03/01-qa-0315-happyevent.html)

或者我只是迷路了，我正在寻找不好的地方/使用错误的关键字，或者更有可能我无法理解这些示例中的任何内容/我无法将它们转换为我需要的工作方式。

我要求的是一些示例，或者至少是一些使用**MyClass、** **MyEvent、** **MyEventArgs、**名称、指向代码来处理这种机制的代码草案，我应该在我的类中使用来引发事件以及类的一些示例使用和事件处理在 Main 方法中，所以它可以帮助我解决这个问题。

**==========编辑========**

也许有一些类似的东西可供android开发人员使用？因为我的目标是在我尘封 java 之后进入移动应用程序开发。

**==========编辑========**

如果有人仍然感兴趣，这里是一些示例代码，它不使用我提到的名称，只是一般显示我在寻找什么：

并且没有确切的解决方案，也许有人会提出类似于我正在寻找的东西的建议？

**frmTest.cs**

```
namespace SampleApp
{
    public partial class frmTest : Form
    {
        CountdownTimer ctmrTest;

        public frmTest()
        {
            InitializeComponent();
            ctmrTest = new CountdownTimer(100);
            ctmrTest.CountdownTimerTick += new CountdownTimer.CountdownTimerTickEventHandler(ctmrTest_CountdownTimerTick); 
        }

        void ctmrTest_CountdownTimerTick(object sender, CountdownTimerEventArgs ea)
        {
            lblTimer.Text = ea.timeString;
            if (ea.countdownFinished) countdownEnd();
        }

        private void btnStart_Click(object sender, EventArgs e)
        {
            ctmrTest.Reset();
            ctmrTest.Start();
        }

        void countdownEnd()
        {
            MessageBox.Show("Finish");
        }
    }
} 
```

**倒计时计时器.cs**

```
namespace SampleApp
{
    public class CountdownTimer
    {
        Timer tmrTicks = new Timer();
        int secondsLeft = 0;
        int numberOfSecondsToCountdown = 0;

        public bool IsWorking
        {
            get { return tmrTicks.Enabled; }
        }

        public CountdownTimer(int seconds)
        {
            ...
        }

        void tmrTicks_Tick(object sender, EventArgs e)
        {
            ...
            WhenCountdownTimerTick(new CountdownTimerEventArgs(secondsLeft, numberOfSecondsToCountdown, true));
        }

        public void Reset()
        {
            ...
            WhenCountdownTimerTick(new CountdownTimerEventArgs(secondsLeft, numberOfSecondsToCountdown, false));
        }

        public void Stop()
        {
            tmrTicks.Enabled = false;
        }

        public void Start()
        {
            ,,,
        }

        public delegate void CountdownTimerTickEventHandler(object sender, CountdownTimerEventArgs ea);

        public event CountdownTimerTickEventHandler CountdownTimerTick;

        protected virtual void WhenCountdownTimerTick(CountdownTimerEventArgs ea)
        {
            if (CountdownTimerTick != null)
            {
                CountdownTimerTick(this, ea);
            }
        }
    }
} 
```

**CountdownTimerEventArgs.cs**

```
namespace SampleApp
{
    public class CountdownTimerEventArgs : EventArgs
    {
        public string timeString = "";
        public bool countdownFinished = false;

        public CountdownTimerEventArgs(int secondsLeft, int SecondsToCountdown, bool isfinished)
        {
            countdownFinished = isfinished;
            timeString = string.Format("{0:00}:{1:00}", secondsLeft / 60, secondsLeft % 60);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T04:04:52.007

如果我理解正确（我刚刚开始学习 C#），那么在 Java 中执行此操作的正常方法是使用观察者模式（侦听器模式）：

您创建一个侦听器接口，其中包含在事件发生时要调用的方法。如果您愿意，该方法可以将一些事件参数和发送者作为参数。例如：

```
public interface MyListener { // This is probably your MyEvent
    void myEventFired(Object sender, MyEventArgs eventArgs);
}

public class MyEventArgs {
    ...something...
} 
```

一个响应你的事件的类，需要实现上述接口。（见下面的一个例子（MyListeningClass））

好的，那么您需要一个触发您的事件的类（或更多类）：**MyClass**。通常**MyClass**有一些方法让其他想要响应**MyClass事件的类向****MyClass**注册自己。**（或者更准确地说，使用MyClass**的特定对象注册自己）。这允许**MyClass** -object 知道它应该在事件发生时通知哪些其他对象。

这通常通过在触发事件的类中创建一个名为“add[ListenerName]”的方法来完成 - 在本例中为**MyClass中的“** **addMyListener** ” 。为了使这个例子更简单，我们假设*只能有一个*监听器，所以我们将它命名为“ **setMyListener** ”：

 *****```
public class MyClass {

    private MyListener listener = null;

    // This is a method which sometimes fires an event, by calling the fireEvent() method below
    public void doSomething() {
        ...
        if (something) {
            // Let's say the event happens if "something" is true. 
            // So now we "fire the event". What "firing the event" means, 
            // is just to call the "myEventFired" method in the listener.
            fireEvent();
        }
        ...

    }

    // this is called from the method above to fire the event - i.e. to tell the listener that the event has happened
    protected void fireEvent() {
        if (listener != null) {
            Object sender = this; 
            MyEventArgs eventArgs = new MyEventArgs(...something...);
            listener.myEventFired(sender, eventArgs);
        }
    }

    // This method is called by the listener, to register itself as listener on this object.
    // MyClass remembers the listener in the "listener" instance variable, so that 
    // when the event happens at some later point in time, it knows which object it  
    // has to tell it to.
    public void setMyListener(MyListener listener) {
        this.listener = listener;
    }
} 
```

*（要支持多个监听器，只需有一个监听器列表`List<MyListener> listeners`而不是`MyListener listener`实例变量，并创建一个 addListener 和 removeListener 方法而不是 setListener 方法。在 Android API 中，它们通常只允许一个监听器，所以我想我会显示那个版本）*

所以现在我们只需要想要监听事件的类。即实现**MyListener**接口的类。（因此这个类是一个监听器）。一个简单的例子：

```
public class MyListeningClass implements MyListener {

    public MyListeningClass() {
        MyClass myClass = ...get the MyClass object from somewhere...;
        myClass.setMyListener(this);
    }

    // this is called by MyClass when the event occurs
    public void myEventFired(Object sender, MyEventArgs eventArgs) {
        System.out.println("EVENT HAPPENED!");
        System.out.println("Sender is: "+sender);
        System.out.println("MyEventArgs are: "+eventArgs);
    }    
} 
```

*（当然，如果您不想创建接口，则实际上不必创建接口。您当然可以在 MyClass 中硬编码 MyListeningClass，但使用接口更好的样式，将 MyClass 和 MyListeningClass 彼此分离。以后它也将更加可扩展，以允许除 MyListeningClass 之外的其他类也可以监听事件。）*

Java API 中有很多这样的例子。例如 SWING 大量使用侦听器 - 例如您提到的按钮点击。当然还有 Android API。

我会看看我以后能不能找到一些这样的例子，但是已经很晚了，我很累，所以也许明天：D（并修复任何拼写错误：D）。希望它有所帮助。

**回顾一下：**

*   **MyClass**（产生事件的类）需要某种方式来告诉其他类该事件已经发生，事件何时发生。它通过在事件发生时调用这些类中的方法来做到这一点。

*   为了让**MyClass**能够调用这些其他类中的方法，它们必须实现一些接口。

*   想要在事件发生时被告知的类，需要一种方法来告诉**MyClass**他们想要被告知它。这就是我们需要**MyClass.setMyListener**方法的原因。 *（或者如果我们允许多个侦听器：**MyClass.addMyListener**方法）*

（所以这并没有什么神奇之处。它只是简单的方法调用。）

* * *

*（请注意，侦听器接口通常命名为“[事件名称]Listener”。因此，根据命名约定，如果我们说事件被称为“ MyEvent”。但是对于这篇文章，我认为它看起来太长而且不太简单。*更新：*现在我想起来了，实际上你通常会从名称中省略“Event”，所以“MyListener”是正确的。例如，如果你有一个事件你调用“OnClickEvent”，你调用接口“OnClickListener”。）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T03:33:11.687

您最好的选择可能是使用`Google Web Toolkit (GWT)`. `GWT Widgets`您可以使用与使用 Visual Studio/C# 相同的方式定义事件处理程序。

Eclipse 甚至有一个内置的窗口构建器插件。*****

# winapi - 禁用 GPU 加速

> ID：13262541
> 
> 赞同：3
> 
> 时间：2012-11-07T03:00:15.493
> 
> 标签：winapi, graphics, 3d, directx

我正在编写游戏，我希望能够从源代码（即使用 c++ 或汇编）禁用我的 GTX 680 卡中的 GPU 加速。我知道这个问题可能有点奇怪，但我想不出任何其他方式来表达它。

我正在阅读一本关于 dx11 编程的书（Frank De Lunas），在一个高级示例中我的帧速率非常低。我监控了我的 gpu 速度，它以怠速 (324 Mhz) 运行。问题可能是演示是如何编码的，但我可能认为无论如何我都希望能够关闭 GPU 增强功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T05:45:01.807

您最好的希望是将[NVAPI](https://developer.nvidia.com/nvapi)用于此类事情，但是， nVidia 论坛上的[这个](https://forums.nvidia.com/default/topic/519233/how-can-i-disable-gpu-boost-gtx-670/)帖子非常清楚地表明它几乎不可能禁用（至少是一种安全的、nVidia 认可的方式）。

# ruby-on-rails - 与关联创建的问题

> ID：13262543
> 
> 赞同：3
> 
> 时间：2012-11-07T03:00:41.040
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, associations

以下是我的联想...

```
Account has_many :credits
Credit belongs_to :account 
```

我正在尝试运行：`account.credits.current`

所以，在那种情况下，我已经有了一个`Account`对象，然后我想访问模型中的一个`current`方法`Credit`。

这是那个方法...

```
def self.current
   # Find current credit line
   current = self.where(:for_date => Time.now.strftime("%Y-%m-01")).first

   # If we couldn't find a credit line for this month, create one
   current = Credit.create(:account_id => self.account.id, :for_date => Time.now.strftime("%Y-%m-01")) if current.blank?

   # Return the object
   current
end 
```

问题出在第二行……如果找不到，应该创建一个新的信用分录。具体来说，我无法设置它应该关联的帐户。我只是得到一个`undefined method 'account'`错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T03:12:47.573

而是通过关联创建，并省略 ，`account_id`因为它将自动链接：

```
current = self.create(:for_date => Time.now.strftime("%Y-%m-01")) if current.blank? 
```

注意：`self.create`而不是`Credit.create`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T03:53:14.607

您正在尝试访问类方法中的实例属性，这是不可能的。

如果你有这个：

```
class Credit
   def self.current
      self.account
   end
end 
```

它与: 相同`Credit.account`，我相信你明白，它不起作用。

现在，`current`如果您希望它加载到复数关联上，您的方法必须是类方法：即：

有`def self.current`你可以打电话`account.credits.current`

`def current`您可以致电`account.credits[0].current`或`account.credits.where(...).current`

我希望这是有道理的。现在，至于该怎么办...

我的建议是制定`current`一个范围，如下所示：

```
class Credit
  scope :current, lambda { where(:for_date => Time.now.strftime("%Y-%m-01")).first }
  ...
end 
```

然后你可以在任何地方使用这个范围，并在它的末尾有一个实例（或 nil）。

```
account.credits.create(...) unless accounts.credit.current 
```

如果你想做一个方便的方法，我会这样做：

class Credit def self.current_or_new self.current || self.create( :for_date => Time.now.strftime("%Y-%m-01") ) end end

这应该按照您的预期方式工作。如果它是通过关联调用的，即：

```
account.credits.current_or_new 
```

然后 account_id 将通过关联由 rails 为您输入。

# java - 如何确定项目在二叉树中的级别？

> ID：13262544
> 
> 赞同：0
> 
> 时间：2012-11-07T03:00:40.487
> 
> 标签：java, recursion, binary-tree

在这段代码中，我展示了存储在链表中的所有 File 对象。我以递归方式运行它，这让我可以探索整个二叉树。

我的工作是计算每个 File 对象位于树的哪个级别。

如何使用递归来做到这一点？我想只计算里面的变量，但是如果水平下降，我不知道在哪里减去这个值。

有任何想法吗？

```
public void display(T node)
{
    Node temp = node;

    if (temp != null)
    {
        display(temp.left);
        display(temp.right);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T03:38:46.363

这看起来像是一个家庭作业/学习问题，所以这里有一些提示。

*   你不需要这样的计数器。
*   简洁的解决方案包括制作`displayFiles`一个简单的非递归函数，该函数使用递归辅助函数来完成所有工作。当前级别是辅助函数的参数。

* * *

好的，所以这是一个解决方案的草图：

```
public void display(T node) {
    doDisplay(node, 0);
}

private void doDisplay(T node, int level) {
    if (node != null) {
        // output this node ... including the level
        display(node.left, level + 1);
        display(node.right, level + 1);
    }
} 
```

请注意，变量没有递增和递减，因此这些方法是完全可重入的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T03:09:56.403

在函数开始时增加级别并在结束时减少它，就在最后一行之前

```
private static int level = 0;    
public void displayFiles(T node)
{
    Node temp = node;

    if (temp != null && temp.leftChild != null && temp.rightChild != null)
    {
     ++level;
        displayFiles(temp.leftChild);
        displayFiles(temp.rightChild);
    }
    --level;
} 
```

我们将在它进入一个新节点时增加级别，并在它离开当前节点并转到其前任节点时减少它。

# c# - 删除另一个进程正在使用的文件

> ID：13262548
> 
> 赞同：37
> 
> 时间：2012-11-07T03:01:09.833
> 
> 标签：c#, wpf, file, process, delete-file

我正在尝试以编程方式删除一个文件，但该文件显然正在被另一个进程（恰好是我的程序）使用。基本上，程序通过使用 FromUri 从文件夹加载图像以创建位图，然后将其加载到图像数组中，该数组又成为堆栈面板的子项。效率不是很高，但它确实有效。

我已经尝试清除堆栈面板的子项，并使数组中的图像为空，但我仍然收到 IOException 告诉我该文件正在被另一个进程使用。

有没有其他方法可以从我的应用程序进程中删除文件？

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2014-01-15T12:16:48.840

可能是垃圾收集问题。

```
System.GC.Collect(); 
System.GC.WaitForPendingFinalizers(); 
File.Delete(picturePath); 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-11-07T07:40:44.750

为了在加载后释放图像文件，您必须通过设置`BitmapCacheOption.OnLoad`标志来创建图像。一种方法是：

```
string filename = ...
BitmapImage image = new BitmapImage();
image.BeginInit();
image.CacheOption = BitmapCacheOption.OnLoad;
image.UriSource = new Uri(filename);
image.EndInit(); 
```

尽管设置`BitmapCacheOption.OnLoad`适用于从本地文件 Uri 加载的 BitmapImage，但这是 afaik 无处记录。因此，一种可能更好或更安全的方法是通过设置`StreamSource`属性而不是从 FileStream 加载图像`UriSource`：

```
string filename = ...
BitmapImage image = new BitmapImage();

using (var stream = File.OpenRead(filename))
{
    image.BeginInit();
    image.CacheOption = BitmapCacheOption.OnLoad;
    image.StreamSource = stream;
    image.EndInit();
} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-06-15T08:02:35.767

另一种方法是删除文件。使用 FileStream 类加载文件并通过 stream.Dispose() 释放文件；它永远不会给你例外“该进程无法访问文件''，因为它正在被另一个进程使用。”

```
using (FileStream stream = new FileStream("test.jpg", FileMode.Open, FileAccess.Read))
{
    pictureBox1.Image = Image.FromStream(stream);
     stream.Dispose();
}

 // delete your file.

 File.Delete(delpath); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-04-06T15:39:32.050

```
var uploadedFile = Request.Files[0]; //Get file
var fileName = Path.GetFileName(uploadedFile.FileName);  //get file name
string fileSavePath = Server.MapPath(fileName); //get path
uploadedFile.SaveAs(fileSavePath); //saving file
FileInfo info = new FileInfo(fileSavePath);//get info file
//the problem ocurred because this, 
FileStream s = new FileStream(fileSavePath, FileMode.Open); //openning stream, them file in use by a process
System.IO.File.Delete(fileSavePath); //Generete a error
//problem solved here...
s.Close();
s.Dispose();
System.IO.File.Delete(fileSavePath); //File deletad sucessfully! 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-11-29T18:14:48.887

我有类似的问题。唯一的区别是我使用的是绑定（MVVM 模式）。没有什么工作，然后我删除了所有东西，并在调用之前尝试了绑定`Mode=OneWay`，`GC.Collect()`它`File.Delete(path)`终于起作用了。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-01-26T18:27:34.733

我遇到过同样的问题。我遇到的问题是 openFileDialog 和 saveFileDialog 具有以下设置：

MyDialog.AutoUpgradeEnabled = false;

我注释掉了那行，它得到了解决。

# c# - 具有两个类似名称的泛型参数的泛型类型序列化

> ID：13262551
> 
> 赞同：1
> 
> 时间：2012-11-07T03:01:24.680
> 
> 标签：c#, .net, xml, xml-serialization

我希望能够使用 C# XmlSerializer 针对几个不同的实体序列化泛型类型。例如我想序列化：

```
GenericThing<MyApp.A> and GenericThing<MyApp.B> 
```

这一切都很好，直到我有以下内容：

```
GenericThing<MyApp.A.Entity> and GenericThing<MyApp.B.Entity> 
```

因为这两个类具有相同的名称，所以序列化程序无法区分这两个实体并尝试将两者序列化为`GenericThingOfEnitity`.

有没有一种装饰方法，`GenericThing`以便在序列化期间更具体地说明其通用参数（即序列化为`GenericThingOfMyApp.B.Enitity`或类似）？不幸的是，我无法控制任何一个`MyApp.A`或`MyApp.B`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T03:15:36.703

您可以指定不同的 XML 命名空间，例如：

```
var entityA = new GenericThing<MyApp.Entity>();
var entityB = new GenericThing<MyAppB.Entity>();
var serializer1 = new XmlSerializer(entityA.GetType(), "aaa");
var serializer2 = new XmlSerializer(entityB.GetType(), "bbb"); 
```

# c++ - 在 Cascades 和 CoreNative 这两个主要的 Blackberry Playbook C++ 框架之间，哪个更容易使用？

> ID：13262553
> 
> 赞同：10
> 
> 时间：2012-11-07T03:01:45.480
> 
> 标签：c++, blackberry, blackberry-10

我对Blackberry Playbook 开发中的 SDK/API 选择的数量感到[非常困惑](https://developer.blackberry.com/develop/platform_choice/ndk.html)。是否推荐其中一种来完成移动应用程序开发的初学者？

撇开 Flash/Air、HTML 和 JAVA 选项不谈，这两个原生 C/C++ 选项中的哪一个更容易开始？我认为 Cascades 是未来，所以除非有理由不向初学者推荐它，否则我猜对于想要更快完成更多工作的人来说，这可能是“更容易”的选择。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-07T09:25:42.450

好像你有它的要点。Cascades 是任何初学者从头开始构建原生 BlackBerry 10 应用程序的重点。它为 UI 开发和与平台的其他元素（BBM、传感器、通知等）集成提供高级工具和 API。它将让您使用 Cascades 和 QML 轻松创建具有 BlackBerry 感觉的应用程序。

对于不想或不能使用 Cascades 的开发人员来说，Core Native 选项是一个较低级别的选项。它对游戏开发人员很有用，例如，从另一个平台移植 OpenGL ES 游戏。使用 Core Native 选项，您将不得不担心诸如设置屏幕之类的事情，Cascades 会为您处理这些问题。然而，许多[开源库](http://developer.blackberry.com/native/beta/documentation/oss.html)已经被移植到 BB10，这扩展了 Cascades 提供的可能性领域。

请注意，这仅适用于 BlackBerry 10 开发，而 Cascades 不是当前 Playbook OS 的一部分。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-07T17:10:07.660

基本上，Native 适用于您正在编写游戏或移植现有应用程序。你必须自己构建所有的 UI 东西。Cascades 适用于普通的应用程序开发人员。您可以免费获得许多非常好的带有隐式动画的 UI 组件，并且您可以使用更高级别的语言（Qt 用于应用程序逻辑，QML 和 JavaScript 用于您的 UI）。

也没有什么能阻止你混合和匹配，它是同一个工具。如果您从 Cascades 项目开始，但后来发现您确实需要使用一些开源库或 C 代码块来做某事，那就继续吧。您甚至可以在 OpenGL 中渲染内容，然后通过 Foreign Window Control 将其直接放入 Cascades 应用程序的其余部分。

Native 和 Cascades SDK 是同一个东西，你只是创建一个不同的项目。

PlayBook 将在发布后的某个时间获得 BlackBerry 10。

# javascript - Firefox Javascript 返回

> ID：13262554
> 
> 赞同：0
> 
> 时间：2012-11-07T03:01:53.043
> 
> 标签：javascript, firefox, back, browser-history

我只在 Firefox 12.0（不确定其他版本中是否存在）中遇到了似乎是 window.history 的 javascript 功能的问题

我正在使用以下链接

```
<a href="javascript:" onclick="window.history.back();">Back</a>
<a href="javascript:" onclick="window.history.forward();">Forward</a> 
```

它们位于每个报告的标题上，现在后退按钮有效，但即使您使用后退按钮来到当前页面，也只会返回您所在的上一页。在 IE7 和 IE9 上，它按预期工作（被告知 Chrome 处理得很好，但我自己没有这样做）。发生的事情的流程图：

**从第 1 页开始。单击转到第 2 页的链接。单击转到第 3 页的链接。单击第 3 页上的返回链接，然后返回第 2 页。单击第 2 页上的返回链接并转到第 3 页（不是第 1 页，因为历史顺序会指示）**

无论您如何进入该页面，Firefox 似乎都在更新其显示为当前页面的页面。这种行为导致前锋也根本不起作用（因为我猜你现在是否不能前进，对吧？）

我已经搜索了一段时间，但找不到与此特定行为相关的任何内容。我应该为 Firefox 使用一组不同的 JS 吗？不幸的是，我需要我正在做的报告才能普遍工作（早在 IE7 -_- 的东西上），所以任何可以全面工作的通用代码都是理想的。

抱歉，无法将示例链接作为托管文件发布在安全的 Intranet 上。

如果在某个地方我无法找到一个非常简单的答案，我深表歉意，我只能找到完全无法工作的问题，而对我来说并非如此。

更新：

如果有人偶然发现这一点，并且在使用 Firefox 中的 javascript 历史导航时遇到问题，经过一些重要的测试，我和我的同事无法始终如一地复制该错误，但这似乎与刷新和更改历史路径有关. Firefox 本机浏览器浏览历史的工作始终如一，但通过 javascript 运行相同的功能仍然继续为我们在多个示例和平台上打破。

如果您的动作保持线性，这似乎可以正常工作，但是如果您破坏历史路径（返回历史中的 4 个位置，沿着新的一组链接开始新路径），javascript 导航会变得混乱并且似乎会中断。

我很想继续测试这个，一旦我解决了正在发生的事情，我会更新这个问题的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T03:54:53.637

你有没有尝试过

`window.history.go(-1)`

应该接近相同的东西，在 FF 中测试并且似乎可以工作

# mysql - 如何合并 MySQL 数据

> ID：13262558
> 
> 赞同：1
> 
> 时间：2012-11-07T03:02:29.963
> 
> 标签：mysql

MySQL 中有两种模式。例如`db1`和`db2`。

它们具有相同的表结构和不同的数据。

现在我想将数据`db1`与数据合并`db2`。

我在下面试过：

1.  `mysqldump`从`db1`没有下拉表选项。

2.  将转储文件导入`db2`以使用 RESOURCE 命令。

但它没有工作，什么都没有添加？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T06:48:15.410

`mysqldump`使用以下选项运行命令`--no-create-info`。这将防止在转储文件中`mysqldump`写入。`CREATE TABLE`您还可以使用`--insert-ignore`选项来防止加载重复值（如果有）。

**更新 1**

如果您的两个模式都驻留在同一台服务器上，则您始终可以使用该`INSERT ... SELECT`命令。例如：

```
INSERT INTO db2.table2 (table2_col1, table2_col2, table2_col3)
SELECT table1_col1, table1_col2, table1_col3
FROM db1.table1
WHERE ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T06:52:43.710

尝试使用主机名：

`mysqldump -h hostname –u root -–add-drop-table=false –p db1>db1.sql ...`

# php - 比较二维数组的值并在php中返回一维数组

> ID：13262560
> 
> 赞同：0
> 
> 时间：2012-11-07T03:02:50.990
> 
> 标签：php

如何在 php 中创建一个接受二维数组作为参数的函数，如下所示：

```
function check_the_length (array[$a_string][$length]){

return $result
} 
```

并返回一个数组作为结果，如下所示：

```
$result=(true,false,true,false); 
```

顺便说一句，如果您有更好的解决方案来制作这样的功能，请告诉我

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T03:10:19.433

这会成功的。

```
function check_the_length($array,$given_length){
    $oneDarray = array();
    foreach($array as $value){
        if(strlen($value) == $given_length)){
            $oneDarray[] = true;
        }else{
            $oneDarray[] = false;
        }
    }

    return $oneDarray;
} 
```

# android - SharedPreference 值在手机旋转时发生变化

> ID：13262561
> 
> 赞同：0
> 
> 时间：2012-11-07T03:02:57.020
> 
> 标签：android, sharedpreferences

在我的应用程序中，当手机处于纵向模式时，可以检索文件名。

当我旋转手机时，正在使用相同的文件来获取首选项，但这个特定的首选项返回空白。

我检查了我写入此首选项的一个功能，但在手机旋转时不会调用它。

`sharedpreferences`那么，旋转手机可能导致变化的原因是什么？

这是我使用的代码：

```
static String retrieveStoredFilename(Context context) {
    SharedPreferences myPrefs = context.getSharedPreferences(PREF_NAME,
            Context.MODE_PRIVATE);
    String s = myPrefs.getString(FILENAME, "");

    return TextUtils.isEmpty(s) ? (String) null : s;
} 
```

如果有帮助，这里还有一些代码。这是来自实际上被旋转弄乱的片段。在 onResume`filename`旋转后设置为null，但从那时起它为null，即使我旋转回来。

```
@Override
public void onPause() {
    super.onPause();
    mIV.getBitmap().recycle();
    mIV.setImageResource(R.drawable.ic_action_search);
    if (myBitMap != null)
        myBitMap.recycle();
}

@Override
public void onResume() {
    super.onResume();
    filename = ControllerFragment.retrieveStoredFilename(getActivity());
    getBitmap(filename);
    mIV.invalidate();
    } 
```

这两个常数是：

```
public static String FILENAME = "filename";
public static String PREF_NAME = "photobrowser"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T03:45:45.553

检查应用程序的生命周期。你在 onCreate()、onPause() 等上做了什么？也许您正在清除该首选项条目。正如[这所说](http://developer.android.com/reference/android/app/Activity.html#ConfigurationChanges)：

> 除非您另有说明，否则配置更改（例如屏幕方向、语言、输入设备等的更改）将导致您当前的活动被破坏，并通过 onPause()、onStop() 和onDestroy() 视情况而定。如果活动在前台或对用户可见，则在该实例中调用 onDestroy() 后，将创建该活动的新实例，使用前一个实例从 onSaveInstanceState(Bundle) 生成的 saveInstanceState。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T03:37:40.253

我看到的唯一可能性是 FILENAME 的值没有被持久化。[在 Android 上研究 Activity](http://developer.android.com/reference/android/app/Activity.html)和[Saving Activity 状态](https://stackoverflow.com/questions/151777/saving-activity-state-in-android/151940#151940)的生命周期可能是值得的。

这是 android 文档中关于[Configuration Changes](http://developer.android.com/reference/android/app/Activity.html#ConfigurationChanges)的一个尝试。

> `onPause()`除非您另外指定，否则配置更改（例如屏幕方向、语言、输入设备等的更改）将导致您当前的活动被破坏，`onStop()`并`onDestroy()`在适当的情况下经历正常的活动生命周期过程。如果活动在前台或对用户可见，`onDestroy()`则在该实例中调用一次，然后将创建活动的新实例，其中包含前一个实例从 生成的 savedInstanceState `onSaveInstanceState(Bundle)`。

因此，您`onResume()`永远不会在方向改变后被调用。Activity 贯穿整个生命周期，直到`onDestroy()`. 在调用方向更改后，`onCreate()`因为它是您的活动的新实例。

# iphone - 如何使用 NSDate 构建一个 NSPredicate 过滤一个月中的所有日子？

> ID：13262567
> 
> 赞同：3
> 
> 时间：2012-11-07T03:03:57.820
> 
> 标签：iphone, objective-c, ios, nsdate, nspredicate

有没有办法在一个月内获得所有的日子？

像这样的东西：

`[NSPredicate predicatewithFormat@"(date.firstDayOfMonth >= @)AND(date.lastDayOfMonth <= @)"];`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-07T03:34:11.283

是的。您需要弄清楚当月的第一*刻*是什么，以及下个月的第一刻。这是我的做法：

```
NSDate *now = [NSDate date];
NSCalendar *calendar = [NSCalendar currentCalendar];
NSDateComponents *nowComponents = [calendar components:NSEraCalendarUnit | NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit fromDate:now];
[nowComponents setDay:1];

NSDate *beginningOfCurrentMonth = [calendar dateFromComponents:nowComponents];

NSDateComponents *oneMonth = [[NSDateComponents alloc] init];
[oneMonth setMonth:1];

NSDate *beginningOfNextMonth = [calendar dateByAddingComponents:oneMonth toDate:beginningOfCurrentMonth options:0]; 
```

一旦你有了这两个`NSDate`s，那么你可以这样做：

```
[NSPredicate predicateWithFormat:@"date >= %@ AND date < %@", beginningOfCurrentMonth, beginningOfNextMonth]; 
```

# c++ - 从文本文件 C++ 加载值

> ID：13262568
> 
> 赞同：0
> 
> 时间：2012-11-07T03:03:58.227
> 
> 标签：c++

我有一个名为`settings.txt`. 在里面我说：

```
Name = Dave 
```

然后我打开文件并循环脚本中的行和字符：

* * *

```
 std::ifstream file("Settings.txt");
    std::string line;

    while(std::getline(file, line))
{
    for(int i = 0; i < line.length(); i++){
        char ch = line[i];

        if(!isspace(ch)){ //skip white space

        }

    }
} 
```

* * *

我正在努力解决的是将每个值分配给某种变量，该变量将算作我的游戏“全局设置”。

所以最终结果会是这样的：

```
Username = Dave; 
```

但是通过这种方式，我可以在以后添加额外的设置。我不知道你会怎么做=/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T03:39:34.257

要添加额外的设置，您必须重新加载设置文件。通过将设置保留在 std::map 中，可以添加新设置或覆盖现有设置。这是一个例子：

```
#include <string>
#include <fstream>
#include <iostream>

#include <algorithm>
#include <functional>
#include <cctype>
#include <locale>

#include <map>

using namespace std;

/* -- from Evan Teran on SO: http://stackoverflow.com/questions/216823/whats-the-best-way-to-trim-stdstring -- */
// trim from start
static inline std::string &ltrim(std::string &s) {
        s.erase(s.begin(), std::find_if(s.begin(), s.end(), std::not1(std::ptr_fun<int, int>(std::isspace))));
        return s;
}

// trim from end
static inline std::string &rtrim(std::string &s) {
        s.erase(std::find_if(s.rbegin(), s.rend(), std::not1(std::ptr_fun<int, int>(std::isspace))).base(), s.end());
        return s;
}

// trim from both ends
static inline std::string &trim(std::string &s) {
        return ltrim(rtrim(s));
}

int main()
{
    ifstream file("settings.txt");
    string line;

    std::map<string, string> config;
    while(std::getline(file, line))
    {
        int pos = line.find('=');
        if(pos != string::npos)
        {
            string key = line.substr(0, pos);
            string value = line.substr(pos + 1);
            config[trim(key)] = trim(value);
        }
    }

   for(map<string, string>::iterator it = config.begin(); it != config.end(); it++)
   {
        cout << it->first << " : " << it->second << endl;
   }
} 
```

# windows-phone-7 - 我的 Windows Phone 模拟器上奇怪的模糊屏幕

> ID：13262569
> 
> 赞同：0
> 
> 时间：2012-11-07T03:04:00.427
> 
> 标签：windows-phone-7

我担心我的长期问题，那就是我的 windows phone 7 模拟器总是显示模糊的屏幕，但对于设备，一切正常，请先看下面的截图：

: [http://t2.qpic.cn/mblogpic/8aec5160f01ab966dc68/460.jpg](http://t2.qpic.cn/mblogpic/8aec5160f01ab966dc68/460.jpg)

这个项目是由VS安装的模板创建的，我没有更改任何代码。经过调查，我后来意识到如果我在.xaml文件中使用其他背景颜色而不是透明，问题就会消失，这很奇怪。

```
<Grid x:Name="LayoutRoot" Background="Transparent"> 
```

对于这个问题，我重新安装了两次windows phone 7 sdk，但问题仍然存在。你有什么想法吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T02:37:56.530

Q1。如果您没有更改任何代码，为什么 SplashScreenImage 在主页后面可见？你确定你使用的是微软的模板而不是第三方模板吗？

Q2。如果您将在模拟器上启动例如 Internet Explorer，它会像您的应用程序一样模糊吗？

在使用视觉状态管理器为 opacity 属性设置动画时，我看到了类似的模糊。您是否使用 3-rd 方库进行页面转换，例如带有 TransitionService 的 silverlight 工具包？

此外，该问题可能是由您的视频驱动程序引起的。你在物理机上运行，​​没有虚拟化？（不支持在虚拟机上运行模拟器）。确保您的 PC 符合[要求](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff626524%28v=vs.92%29.aspx)。请确保您拥有最新的 GPU 驱动程序。

# netbeans - 如何更改 NetBeans 字体大小

> ID：13262574
> 
> 赞同：22
> 
> 时间：2012-11-07T03:04:38.593
> 
> 标签：netbeans, font-size

我遇到了麻烦，因为项目窗口、文件窗口和服务窗口的字体很小。

如何更改为更大尺寸的字体？

我不希望其他部分的字体大小会改变。例如工具菜单字体大小。

我在用：

*   Windows 7的
*   NetBeans 7.2.1

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-11-07T03:16:01.070

编辑[netbeans.conf](http://wiki.netbeans.org/FaqNetbeansConf)文件（位于 NetBeans 安装的 /etc 文件夹中），查找以“netbeans_default_options=”开头的行。编辑 fontsize 参数（如果存在）。如果没有，请在行尾添加类似“--fontsize 11”（不带引号）的内容。

[资源](http://wiki.netbeans.org/FaqFontSize)

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-10-09T15:26:07.460

`Alt`+`scroll wheel`将增加/减少主代码窗口的字体大小

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-06T14:39:14.837

对于 Linux：[http ://cristian-radulescu.ro/article/fix-netbeans-big-fonts-on-ubuntu.html](http://cristian-radulescu.ro/article/fix-netbeans-big-fonts-on-ubuntu.html)

该帖子建议添加

```
--laf Nimbus -J-Dswing.aatext=true -J-Dawt.useSystemAAFontSettings=lcd 
```

它当然适用于 Ubuntu 12.04。我不知道相同的设置是否适用于 Windows7（但它们可以，因为它们是 Java 设置，而不是操作系统设置）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-10-16T18:08:06.973

尝试这个：

![在此处输入图像描述](../Images/7c43f2b0c5e7271f89e74b914b350730.png)

字体大小可以通过设置来设置

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-08-22T18:26:24.440

我有一个名为“UI-Editor”的 NetBeans 插件，您可以使用它来自定义几乎所有的 Swing 设置（包括字体类型、大小和颜色）。转到 Tools->Plugins 并搜索 UI-Editor。或者去这里：[http ://plugins.netbeans.org/plugin/55618/?show=true](http://plugins.netbeans.org/plugin/55618/?show=true)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-03-06T15:53:20.767

去，

*工具 -> 选项 -> 外观*

***选中显示'Override default fonts by'***的框。选择字体大小。这应该改变项目窗口的字体。不会显着影响整体字体。

注意：我使用的是 Netbeans 8.2

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-25T17:10:33.490

所以你只是想改变netbeans的字体大小？您可以单击顶部的工具>选项，然后单击“字体和颜色”选项卡。在那里您还可以更改字体的颜色。此外，您可以使用比 netbeans 更简单的 Eclipse。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-10-11T09:23:23.213

转到安装 Netbeans 的 bin 目录。通常默认值为 : `C:\Program Files\NetBeans <version>\bin`。现在通过命令提示符通过以下方式启动 netbeans `netbeans --fontsize <fontsize> --console suppress`：。通过使用`--console suppress`，您可以关闭 cmd 窗口，而不会影响 Netbeans 窗口。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-01-12T22:34:29.713

几个家伙（Muzaffar 和 GucciDiet）在这个问题上击败了我——但希望这对某人有所帮助:)

[以下是我在这里](https://stackoverflow.com/a/65692939/4739826)和[这里](https://stackoverflow.com/a/65693001/4739826)的其他 2 个类似问题的解决方案

> 从字面上看，这些都不适合我。
> 
> 我在**Linux上使用****NetBeans 11.1**。我通过搜索选项菜单找到了解决方案。问题是**IDE 主题**- 它具有“覆盖”字体大小。
> 
>  ****1.  工具 > 选项 > 外观 > *Darcula 外观*
> 2.  取消选中*“通过[对话框10]覆盖默认字体”*
> 3.  （或将覆盖字体增加到更大的尺寸）
> 4.  点击确定
> 5.  退出并重新启动 NetBeans！
> 
> 应保存您的环境首选项以供将来的 NetBeans 会话使用！
> 
> [![选项窗口](../Images/4ac9928efabc03953711e7d918a0a16a.png)](https://i.stack.imgur.com/EEG6z.png)****

 ***** * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-09-26T15:55:29.390

我的整个 NetBeans (8.0) 窗口和字体小得烦人且令人不快，因此我发现选项/外观/外观 - Windows Classic 是唯一可以在 Windows 10 上使用的选项。

* * *

## 回答 #11

> 赞同：-3
> 
> 时间：2015-11-22T01:18:34.287

使用屏幕放大镜怎么样？

在 Windows 7 上，[Sysinternals ZoomIt](https://technet.microsoft.com/en-us/sysinternals/zoomit.aspx)工作正常。

几乎每个 Linux 桌面也都有一个。****

# process - 需要帮助将 time.sleep 与 python 3 中的多处理相结合

> ID：13262575
> 
> 赞同：4
> 
> 时间：2012-11-07T03:05:07.507
> 
> 标签：process, python-3.x, sleep

使用 python 3 制作回合制游戏。我想要 2 个角色（敌人和敌人）攻击，根据随机 + 速度暂停，如果他们还活着，则再次攻击。

我遇到的问题是 time.sleep 冻​​结了两个模块，而不是 1 或其他。有什么建议可以有效地完成这项工作吗？

```
from multiprocessing import Process
import time
import random

def timing1():  
    speed=60#SPEED IS NORMALLY A KEY FROM LIST, USING 60 FOR EXAMPLE  
    sleeptime=36/((random.randint(1,20)+speed)/5)  
    print (sleeptime)  
    time.sleep(sleeptime)  
    input('HERO ACTION')  

def timing2():  
    speed=45  
    sleeptime=36/((random.randint(1,20)+speed)/5)  
    print (sleeptime)  
    time.sleep(sleeptime)  
    input('FOE ACTION')  

if __name__ == '__main__':  
    p1=Process(target=timing1)  
    p1.start()  
    p2=Process(target=timing2)  
    p2.start()  
    p1.join()  
    p2.join() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T09:32:06.347

转一圈后，进程退出您的代码。您的主进程通过调用它们等待两个进程退出，`.join()`即`time.sleep()`不会冻结其他进程。

`while True:`在函数顶部添加`timing*()`以进行多次移动。

您在这里不需要多个进程。您可以使用线程甚至单个线程来实现转弯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T14:25:01.163

详细说明 JF

我对线程的一般建议是仅在绝对必要时才引入它。

*   您实际上是在低级 I/O 上阻塞，除了使用本机线程之外别无选择。
*   您正在达到计算限制并且需要使用更多内核，在这种情况下，由于它的[GIL](http://wiki.python.org/moin/GlobalInterpreterLock)的 python可能对您不利。

作为替代方案，使用一个库，该库提供一个调度程序，如[twisted](http://twistedmatrix.com/trac/)或[gevent](http://www.gevent.org/)，它不依赖本机线程来调度事件。

**事件**

您可以在编写游戏时考虑到线程模型，而不必担心线程之间的资源争用。您必须记住在您的示例中使用[各种功能](http://www.gevent.org/gevent.html#useful-general-functions)的 gevent 版本，例如*sleep*。

```
import random
import gevent

def hero():
    speed = 60
    sleeptime = 36 / ((random.randint(1, 20) + speed) / 5)
    print (sleeptime)
    gevent.sleep(sleeptime)
    input('HERO ACTION')

def foe():
    speed = 45
    sleeptime = 36 / ((random.randint(1, 20) + speed) / 5)
    print (sleeptime)
    gevent.sleep(sleeptime)
    input('FOE ACTION')

if __name__ == "__main__":
    heroThread = gevent.Greenlet(hero)
    foeThread = gevent.Greenlet(foe)

    heroThread.start()
    foeThread.start()

    gevent.joinall([heroThread, foeThread]) 
```

**扭曲的**

提供一个事件反应器，它是用纯 python 编写的，并且不假装比单线程事件反应器（又名[事件循环](http://en.wikipedia.org/wiki/Event_loop)）更多或更少。这将需要对您的示例进行更大的重写。

```
import random
from twisted.internet import reactor

def heroAction():
    input('HERO ACTION')

def heroStart():
    speed = 60
    sleeptime = 36 / ((random.randint(1, 20) + speed) / 5)
    print (sleeptime)
    reactor.callLater(sleeptime, heroAction)

def foeAction():
    input('FOE ACTION')

def foeStart():
    speed = 45
    sleeptime = 36 / ((random.randint(1, 20) + speed) / 5)
    print (sleeptime)
    reactor.callLater(sleeptime, foeAction)

if __name__ == "__main__":
    # Call when the reactor has started.
    reactor.callWhenRunning(heroStart)
    reactor.callWhenRunning(foeStart)
    reactor.run() 
```

请注意，扭曲反应堆在无事可做时不会关闭，这是明确留给程序员的。

**滚动你自己的**

出于学习目的编写自己的调度程序可能会很有趣，或者您可能在游戏中有要求，例如需要它的公平性。一个很好的起点是从[另一个简约的调度程序](http://hg.python.org/cpython/file/2.7/Lib/sched.py)中寻找灵感。

# ruby-on-rails - 验证属性组合

> ID：13262579
> 
> 赞同：0
> 
> 时间：2012-11-07T03:05:58.500
> 
> 标签：ruby-on-rails, validation, activerecord

我的模型（拍卖）中有两个属性（小时和天）。我对小时和天的组合有业务逻辑。例如

```
auction duration = days*24 + hours 
```

我也有几个小时和天的一些基本验证：

```
class Auction < ActiveRecord::Base
  validates :days,:presence => true, :numericality => { :greater_than_or_equal_to => 0, :only_integer => true }
  validates :hours,:presence => true, :numericality => { :greater_than_or_equal_to => 0, :only_integer => true } 
```

我想将我的业务逻辑合并到验证中，这样小时和天不能都为零。有没有办法通过 ActiveRecord 验证来做到这一点？我知道在没有 AR 验证的情况下还有其他方法可以做到这一点。现在我正在创建我的模型的一个新实例。验证上述日期和时间。然后我有一个模型方法，它“手动”进行验证，如果实例没有通过，则删除它。我知道这不是最好的方法

```
 def compute_end_time
    # assumes that days and hours are already valid
    time = self.days*24 + self.hours

    if time > 1
      self.end_time =  time.hours.from_now.utc
      self.save

    else
      # Auction duration too short (i.e. zero)
      self.delete
    end
  end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T03:15:01.830

您需要编写一个类似这样的私有验证函数。

```
class Auction < ActiveRecord::Base
   validates :days,:presence => true, :numericality => { :greater_than_or_equal_to => 0, :only_integer => true }
   validates :hours,:presence => true, :numericality => { :greater_than_or_equal_to => 0, :only_integer => true }

   validate :days_and_hours

   private

   def days_and_hours
     if !(days && hours)
     errors.add_to_base("Days and hours can not be zero. Thank you.")
   end
 end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T03:24:53.893

您可以使用数值验证器检查大于 0 的值：

```
validates :auction_duration, :numericality => { :greater_than => 0 } 
```

更多信息位于： http: [//guides.rubyonrails.org/active_record_validations_callbacks.html#numericality](http://guides.rubyonrails.org/active_record_validations_callbacks.html#numericality)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T22:13:35.883

所以我的最终解决方案是扩展@rharrison33：

```
 validates :days,:presence => true, :numericality => { :greater_than_or_equal_to => 0, :only_integer => true }
  validates :hours,:presence => true, :numericality => { :greater_than_or_equal_to => 0, :only_integer => true }
  validate :days_and_hours

def days_and_hours
    # It may not validate days and hours separately before validating days_and_hours,
    # so I need to make sure that days and hours are both not NIL before trying to compute 'time'
    # I also only want to compute end_time if it has not been computed yet
    if (!self.days.nil? && !self.hours.nil?)

      if (self.end_time.nil?) # if end_time has not yet been computed

        if (self.days == 0 && self.hours == 0)
          self.errors[:base] << "Days and hours can not be zero."
        else
          time =  self.hours  + self.days*24
          self.end_time = time.minutes.from_now.utc
          self.setStatus # validate status after end time is set
        end
      end
    end
  end 
```

# node.js - 使用 NGinx 作为图像服务器，将 mongodb 作为数据库，将节点作为应用服务器......？

> ID：13262581
> 
> 赞同：0
> 
> 时间：2012-11-07T03:06:41.010
> 
> 标签：node.js, mongodb, nginx

我想托管一个社交类型的网站。它将在节点（或顶点）上。我的问题是........如果我的局域网上有一个单独的图像服务器..当用户上传文件时，文件应该保存到图像 -nginx 服务器，然后数据库告诉它和给个图片链接？

例如它会是这样的：

db.users.find('profilepicture' : 1)

profilepicture: localaddressoftheneginxserver/imagefolder/imagename.jpg

我是否正确地思考问题？让图像在单独的 nginx 服务器上提供......让数据库不包含实际图片，但包含图片的链接......所以当客户端连接到应用服务器并请求特定图片时，它会查询数据库，数据库将链接发送到应用服务器...然后应用服务器通知用户计算机图片位置？

那行得通吗？我只是有点困惑，外面的人如何连接到应用服务器，然后即使他们有地址也能够连接到同一局域网上的图像服务器。图像服务器是否需要一些单独的 IP？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T06:00:41.317

我们有一个类似的用例，我们处理它的方式如下：

*   图像首先上传到应用程序服务器，并作为临时文件存储在那里。
*   （可选）对图像格式运行一些验证，如果需要调整它的大小。
*   将镜像从应用服务器传输/部署到镜像服务器（可以是 nginx、CDN、Amazon S3 等）。
*   使用客户端要加载的图像的位置更新数据库记录。
*   从应用程序服务器中删除临时文件。

这样，HTTP 客户端只与保留所有业务逻辑/安全/访问控制等的应用程序服务器通信。它只从图像服务器读取。

实际上，让用户直接写入图像服务器可能会带来安全风险，因为这种类型的服务器通常对上传的内容没有太多控制（与应用程序服务器不同）。

# java - 我的插入排序算法有什么问题？

> ID：13262583
> 
> 赞同：0
> 
> 时间：2012-11-07T03:06:49.390
> 
> 标签：java, sorting, insertion-sort

我不知道为什么这不起作用。

```
public class InsertionSort {

    public static void main(String[] args) {

        int x[] = { 9, 5, 8, 4, 3, 0, 6, 7, 2, 1 };
        int[] result = InsertionSortMethod(x);

        for (int z = 0; z < x.length; z++) {
            System.out.print(x[z] + " ");
        }
    }

    public static int[] InsertionSortMethod(int x[]){
        for (int a = 0; a < x.length; a++) {
            int divider = a;
            if(divider > 0 & divider < x.length){
                if(x[divider] < x[0]){
                    int temp = x[divider];
                    for(int c = divider; c > 0; c--){
                        x[c] = x[c-1];
                    }
                    x[0] = temp;
                }
                if(x[divider] > x[divider-1]){
                    x[divider] = x[divider];
                }
                else{
                    for(int b = divider-1; b > 0; b--){
                        if(x[divider] < x[b]){
                            int temp = x[divider];
                            x[divider] = x[b];
                            x[b] = temp;
                        }
                    }
                }
            }
        }
        return x;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T03:18:20.933

这是一个简单的插入排序函数：

```
void insertionSort(int[] arr) {

      int i, j, newValue;

      for (i = 1; i < arr.length; i++) {

            newValue = arr[i];

            j = i;

            while (j > 0 && arr[j - 1] > newValue) {

                  arr[j] = arr[j - 1];

                  j--;

            }

            arr[j] = newValue;

      }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T03:21:50.950

你说你想自己做，所以就这样：

```
for(int b = divider-1; b > 0; b--){
    if(x[divider] < x[b]){
        int temp = x[divider];
        x[divider] = x[b];
        x[b] = temp;
    }
} 
```

如果数组中索引小于的部分`divider`已经排序，并且`x[divider]`在`x[0]`and之间`x[1]`（例如，`divider`大于 3），那么`x[divider] < x[divider-1]`在该循环中的 and 将立即交换到 position `divider-1`。但是随后 index 的值`divider`刚刚变得大于`x[b]`for`0 <= b <= divider-2`并且没有进行进一步的交换。一种可能的处理方法是`divider`在每次交换后更新，`divider = b;`在`if`.

# webserver - 您如何保护服务器端变量和机密？

> ID：13262584
> 
> 赞同：0
> 
> 时间：2012-11-07T03:06:48.987
> 
> 标签：webserver, admin, administration

保护可能因每次部署而异的服务器端变量（例如 api 密钥和盐等）的良好做法是什么？不仅要考虑良好的隔离，还要保护它们，但它们可以被存储。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T03:08:34.343

只是不要告诉其他人....并通过保护您的 ftp 用户名和密码，否则没有人可以访问变量和机密

因为它的服务器将在服务器上运行，而不是生成 html，所以用户将无法看到这些

# c - C GUI 程序在运行时崩溃

> ID：13262586
> 
> 赞同：1
> 
> 时间：2012-11-07T03:07:19.513
> 
> 标签：c, user-interface, sqlite, runtime-error

我正在使用 graphApp GUI 库编写一个 C GUI 程序，这个代码段导致我的程序崩溃：

```
...
char *str,*sql;

// Read input from text field
str = get_control_text(event_name);

// Insert into database
sprintf(sql,"INSERT INTO event VALUES('%s');",str);
db_status = sqlite3_exec(db,sql,0,0,&mssg); 
```

`get_control_text()`用于从文本字段中读取数据，其返回类型为`char *`。当我输入一个字符串时，程序正常终止，但是如果字符串中包含空格，则在将数据插入数据库后程序会崩溃。有人可以帮我找出问题所在吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T03:08:48.313

您忘记为`sql`.

# ios - actionscript3 中的 sharedobject 问题

> ID：13262591
> 
> 赞同：0
> 
> 时间：2012-11-07T03:08:21.963
> 
> 标签：ios, actionscript-3, flash, adobe

所以我正在尝试存储和加载数据，但由于某种原因，我得到了错误代码`1046 - type was not found or was not a comile-time constant`和`1120 - access of undefined property SharedObject`.

我已经导入了所需的正确文件。

此代码位于时间轴上的一个框架中，一旦用户单击与该代码对应的页面，就应该运行该代码。

代码：

```
import flash.desktop.NativeApplication;
    import flash.display.Sprite;
    import flash.events.Event;
    import flash.utils.setInterval;
           // Listen for exiting event.
           NativeApplication.nativeApplication.addEventListener(Event.EXITING, onExit);

           // Also save every 30 seconds.
           setInterval(save, 30*1000);

          // Load data.
           load();

         function onExit(e:Event):void
        {
           save();

        }

        function save():void
        {
                    // Get the shared object.
      var so:SharedObject = SharedObject.getLocal("myApp");

      // Update the age variable.
      so.data['age'] = int(so.data['age']) + 1;

      // And flush our changes.
      so.flush();

      // Also, indicate the value for debugging.
      trace("Saved generation " + so.data['age']);
        }

         function load():void
        {
            // Get the shared object.
      var so:SharedObject = SharedObject.getLocal("myApp");

      // And indicate the value for debugging.
      trace("Loaded generation " + so.data['age']);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T05:42:37.560

像往常一样，这个错误意味着你没有导入类定义。将此添加到您的 AS 文件的导入部分：

```
import flash.net.SharedObject; 
```

# selenium-rc - Selenium RC 参考资料

> ID：13262596
> 
> 赞同：1
> 
> 时间：2012-11-07T03:08:55.877
> 
> 标签：selenium-rc, qa

过去几年我一直在使用 QTP 和 Selenium IDE。我刚从 Selenium RC、WebDriver 开始，希望你能为我提供一些很好的参考资料或指导如何计划涵盖所有内容。主要议题是什么？等。

我一直在网上搜索，但发现自己有点迷失......

PS：我知道谷歌，如果可以的话，寻找更多的见解。:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T02:39:37.940

有两本关于 Selenium RC 的好书：David Burns 的[Selenium 1.0 测试工具：初学者指南](https://rads.stackoverflow.com/amzn/click/com/1849510261)和 Alan Richardson 的[Selenium Simplified](https://rads.stackoverflow.com/amzn/click/com/0956733212)。而且由于您在波士顿，因此有一个[本地 Selenium 用户组](http://www.meetup.com/Greater-Boston-Selenium-Users-Group/)。我相信明年的[Selenium 会议](http://www.seleniumconf.org/)也将在那里举行。

# python - 安装 MySQL-Python 时出错

> ID：13262598
> 
> 赞同：1
> 
> 时间：2012-11-07T03:09:25.463
> 
> 标签：python, mysql

安装 MySQL 时发生错误 - python 到“需要 python 版本 v2.7，在 regstry 中找不到”。我应该怎么办？注意我用的是python v2.7.3，win7 64bit

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T03:17:07.080

尝试从下面的链接为 Windows 7 安装可执行文件，从源安装时我遇到了同样的问题，然后我尝试了可执行文件并且它工作正常。链接：[http](http://www.lfd.uci.edu/~gohlke/pythonlibs/) ://www.lfd.uci.edu/~gohlke/pythonlibs/搜索mysql-python，有可执行文件列表。

# python - Python lxml 离线验证产生“连接被拒绝”到 http://www.opengis.net/kml/2.2

> ID：13262605
> 
> 赞同：0
> 
> 时间：2012-11-07T03:10:20.140
> 
> 标签：python, xsd, gis, lxml, offlineapps

我正在尝试通过 lxml 和 xsd (ogckml22.xsd) 验证一些 XML。这是离线发生的。我通过直接打开/读取读取文件

作为记录，http://www.opengis.net/kml/2.2 无效。

来自另一篇文章：（由于评论请求而澄清..）

```
from lxml import etree
import os
import sys
import StringIO
file=open('ogckml22.xsd')
data=file.read()
str=StringIO.StringIO(data)
try:
     xmlschema_doc=etree.parse(data)
except IOError as ex:
    print "oops {0}".format(ex.strerror)
except:
    print "Unexpected error:", sys.exc_info()[0]

xmlschema=etree.XMLSchema(xmlschema_doc) 
```

我得到的只是“连接被拒绝”。使用 try/except，我得到未定义 xmlschema_doc。

```
File "<stdin>", line 1, in <module>  
File "<xmlschema.pxi",line 105, in lxml.etree.XMLSchema.__init__ (src/lxml/lxml.etree.c:132748  
   self.error_log)  
lxml.etree.XMLSchemaParseError: connection refused 
```

我知道它可以读取上面的 xsd 文件和包含的另一个 xsd 文件。

好吧，也许 xsd 被读取了？我下载了 lxml 和 src/lxml/xmlschema.pxi 的源代码，

```
if self._c_schema is NULL:
    raise XMLSchemaParseError(
        self.error_log._buildExceptionMessage(
            u"Document is not valid XML Schema"),
        self._error_log) 
```

我从来没有看到“文档不是有效的 XML 架构”消息。我只能假设使用“拒绝连接”代替“文档消息”（默认值？），但更彻底地阅读 _error_log （在重新编译之外）逃避了我....

真挚地，

箭树

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T18:27:58.810

[ogckml22.xsd](http://schemas.opengis.net/kml/2.2.0/ogckml22.xsd)导入另外两个模式文档（atom-author-link.xsd 和 xAL.xsd）：

```
<!-- import atom:author and atom:link -->
<import namespace="http://www.w3.org/2005/Atom" 
        schemaLocation="atom-author-link.xsd"/>

<!-- import xAL:Address -->
<import namespace="urn:oasis:names:tc:ciq:xsdschema:xAL:2.0" 
        schemaLocation="http://docs.oasis-open.org/election/external/xAL.xsd"/> 
```

如果要离线解析模式，则需要使这两个文档在本地可用，并且给出的路径`schemaLocation`必须正确。

可以简化模式的解析和加载（不需要`StringIO`）：

```
from lxml import etree

xmlschema_doc = etree.parse("ogckml22.xsd") 
xmlschema = etree.XMLSchema(xmlschema_doc)

print xmlschema 
```

输出：

```
<lxml.etree.XMLSchema object at 0x00D25120> 
```

* * *

我不明白您所说的“为了记录，[http://www.opengis.net/kml/2.2](http://www.opengis.net/kml/2.2)无效”是什么意思。

如果您可以访问 Internet，则可以使用 URL 作为参数`etree.parse()`：

```
xmlschema_doc = etree.parse("http://www.opengis.net/kml/2.2") 
```

至少这对我有用。

# java - 制作 localhost/projectName 主页 url

> ID：13262607
> 
> 赞同：0
> 
> 时间：2012-11-07T03:10:35.490
> 
> 标签：java, jsp

我不知道如何开始，但我目前有一个简单的应用程序，它的主页 url 为

```
localhost:8080/projectName/homePage.jsp 
```

但是，我希望这样

```
localhost:8080/projectName/ 
```

或者

```
localhost:8080/projectName 
```

将我发送到 homePage.jsp。

我已经阅读过由 eclipse 在其他项目中创建的 index.jsp，但似乎这对我来说还没有完成 - 我需要创建这个吗？我没有使用 web.xml，而是依靠 @WebServlet 进行接线。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T05:52:45.830

根据以下帖子，注释不可能这样：

[Servlet 3.0 注释 <welcome-file>](https://stackoverflow.com/questions/2540549/servlet-3-0-annotations-welcome-file)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T03:15:28.427

2种方法来做到这一点。1.在web.xml中添加如下条目

```
 <welcome-file-list>
    <welcome-file>homepage.jsp</welcome-file>
</welcome-file-list> 
```

2\. 在你的 WebContent 文件夹中创建一个 index.jsp 文件并将请求转发到 homePage.jsp

# ruby - 在 rake 任务中运行时捆绑包失败

> ID：13262608
> 
> 赞同：8
> 
> 时间：2012-11-07T03:10:39.777
> 
> 标签：ruby, bundle, rake-task

**我的环境**

Vanilla Ubuntu 12.10，没有 rvm 或 renv。

```
> gem --version
1.8.23

> ruby --version
ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-linux]

> bundle --version
Bundler version 1.2.1 
```

**我的问题**

我有一个 rake 任务来打包我的 gem 并将它们上传到我的开发和生产服务器。问题是当 Gemfile 包含 git 或路径 gem 时 rake 任务失败。Bundler 已经支持打包这些类型的 gem，它在我的终端上运行良好，但是在运行 rake 任务时它失败了，我不知道为什么。

**我的耙子任务**

```
> cat lib/tasks/upload.rake

namespace :deploy do
  desc "Package all gems and upload to remote server"
  task :upload => [:environment] do |t, args|
    if ! system("bundle package --all")
      raise "TOTAL FAIL"
    end

    # Magic method to upload vendor/cache to remote server
  end
end 
```

**我的尝试**

在终端中运行*bundle 包可以：*

```
> bundle package --all
....
Using bson (1.7.0) 
Using bson_ext (1.7.0) 
Using cancan (1.6.8) from git://github.com/ryanb/cancan.git (at /home/ryujin/Projects/rails/Encluster4/vendor/cache/cancan-4dcd54459482) 
Using carrierwave (0.7.0) 
Using coffee-script-source (1.4.0) 
....
Updating files in vendor/cache
Your bundle is complete! Use `bundle show [gemname]` to see where a bundled gem is installed.
Updating files in vendor/cache 
```

使用 irb运行*bundle 包也可以：*

```
> irb
irb> system("bundle package --all")
...
Using ansi (1.4.3) 
Using bson (1.7.0) 
Using bson_ext (1.7.0) 
Using cancan (1.6.8) from git://github.com/ryanb/cancan.git (at /home/ryujin/Projects/rails/Encluster4/vendor/cache/cancan-4dcd54459482) 
Using carrierwave (0.7.0) 
Using coffee-script-source (1.4.0) 
...
Updating files in vendor/cache
Your bundle is complete! Use `bundle show [gemname]` to see where a bundled gem is installed.
Updating files in vendor/cache
=> true 
```

但是 bundle 包在我的简单 rake 任务中执行时不起作用：

```
> bundle exec rake deploy:upload
Updating files in vendor/cache
Could not find cancan-1.6.8.gem for installation
rake aborted!
TOTAL FAIL

Tasks: TOP => deploy:upload
(See full trace by running task with --trace) 
```

我找不到这可能失败的原因。我一直在同一个环境中运行。我已经检查了这三种情况下的 bundle exec 文件是否相同（/usr/local/bin/bundle）。我没有痕迹或 rvm 或 renv 或类似的东西。还尝试在没有 bundle exec 的情况下运行任务和同样的问题。

提前感谢有关为什么会发生这种情况的任何提示。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T13:30:32.417

我有同样的麻烦。我检查了环境变量，发现捆绑器修改了 RUBYOPT：

```
$ bundle exec env > benv.txt
$ env > env.txt
$ diff -u env.txt benv.txt
--- env.txt 2012-12-05 17:13:10.000000000 +0400
+++ benv.txt  2012-12-05 17:13:07.000000000 +0400
@@ -72,4 +72,8 @@
 CDPATH=.
 install_flag=1
 rvm_hook=
-_=/usr/bin/env
+_=/Users/denis/.rvm/gems/ruby-1.9.3-p327@global/bin/bundle
+_ORIGINAL_GEM_PATH=/Users/denis/.rvm/gems/ruby-1.9.3-p327:/Users/denis/.rvm/gems/ruby-1.9.3-p327@global
+BUNDLE_BIN_PATH=/Users/denis/.rvm/gems/ruby-1.9.3-p327@global/gems/bundler-1.2.3/bin/bundle
+BUNDLE_GEMFILE=/Users/denis/src/my-project/Gemfile
+RUBYOPT=-I/Users/denis/.rvm/gems/ruby-1.9.3-p327@global/gems/bundler-1.2.3/lib -rbundler/setup 
```

因此，要解决此问题，我会这样做：

```
system %Q(/usr/bin/env RUBYOPT= bundle package) 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-04-01T21:23:00.103

也可以更喜欢使用

```
Bundler.with_clean_env do
   sh "bundle update --source .."
end 
```

确实这是 Denis 提到的一个 RUBYOPT 问题

# visual-studio-2010 - 在仅 DLL 的 Windows 上使用 ffMPEG？

> ID：13262610
> 
> 赞同：0
> 
> 时间：2012-11-07T03:11:12.817
> 
> 标签：visual-studio-2010, visual-c++, ffmpeg

我真正想要的是使用 ffMPEG[将视频帧存储到 char 数组中。](https://stackoverflow.com/questions/9912873/ffmpeg-avframe-get-full-decoded-data-to-char)
约束是仅使用 MSVC。由于可维护性问题， 不允许使用[Windows 构建调整。](http://libav.org/platform.html#Windows)

因此考虑使用[共享构建](http://ffmpeg.zeranoe.com/builds/)来完成任务。它仅由 DLL 组成。没有`lib`文件，所以我尝试加载其中一个使用的 DLL `HINSTANCE hInstLibrary = LoadLibrary("avcodec-54.dll");`，它可以工作。但是我在任何地方都找不到这个 DLL 的接口。有人可以帮忙吗？我如何知道我可以调用 DLL 的哪些函数以及我可以传递哪些参数以便获取视频帧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T07:38:17.433

使用 ffmpeg 的公共接口

```
ffmpegdir/include/libavcodec/
ffmpegdir/include/libavformat/
etc. 
```

例如，要打开文件进行读取，请使用 ffmpegdir/include/libavformat/avformat.h 中的 avformat_open_input

```
AVFormatContext * ctx= NULL;
int err = avformat_open_input(&ctx, file_name, NULL, NULL); 
```

您可以从[http://ffmpeg.zeranoe.com/builds/获取最新版本的 ffmpeg](http://ffmpeg.zeranoe.com/builds/)

公共头文件可以在开发版本 (http://ffmpeg.zeranoe.com/builds/win32/dev/) 中找到。

**UPD：** 这是一个工作示例（没有额外的静态链接）

```
#include "stdafx.h"
#include <windows.h>
#include <libavformat/avformat.h>

typedef int (__cdecl *__avformat_open_input)(AVFormatContext **, const char *, AVInputFormat *, AVDictionary **);
typedef void (__cdecl *__av_register_all)(void);

int _tmain(int argc, _TCHAR* argv[])
{
    const char * ffp = "f:\\Projects\\Temp\\testFFMPEG\\Debug\\avformat-54.dll";
    HINSTANCE hinstLib = LoadLibraryA(ffp);
    __avformat_open_input __avformat_open_input_proc  = (__avformat_open_input)GetProcAddress(hinstLib, "avformat_open_input");

    __av_register_all __av_register_all_proc = (__av_register_all)GetProcAddress(hinstLib, "av_register_all");
    __av_register_all_proc();

    ::AVFormatContext * ctx = NULL;
    int err = __avformat_open_input_proc(&ctx, "g:\\Media\\The Sneezing Baby Panda.flv", NULL, NULL);
    return 0;
  } 
```

# ms-word - 德语拼写检查

> ID：13262614
> 
> 赞同：1
> 
> 时间：2012-11-07T03:12:16.743
> 
> 标签：ms-word

我正在使用 Microsoft Word 2010，我想知道是否可以为德语打开拼写检查。拼写检查适用于英语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T03:21:28.097

如果您购买并安装了适用于 Office 的德语单一语言包，则可以添加检查德语拼写的功能。 有关更多信息和购买链接，请参阅[http://office.microsoft.com/en-us/suites 。](http://office.microsoft.com/en-us/suites)您不能从任何地方合法下载 Office 语言包。

# mysql - 构造查询以创建表

> ID：13262615
> 
> 赞同：2
> 
> 时间：2012-11-07T03:12:22.787
> 
> 标签：mysql

我目前正在使用 MySQL 数据库表结构。我在网上找到了一个表结构，但我不确定如何复制确切的表结构。这些表彼此共享外键和索引。我附上了一个链接，显示表格是在我想复制的模型中设置的。我请求帮助创建一个查询，该查询将创建所有表及其相关数据。 [链接表结构](http://webprolearner2346.zxq.net/class_des/)

**外键**

```
semester_id
faculty_id
schedule_id
section_id
class_id
major_minor_id 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T05:08:45.027

```
CREATE TABLE event
(
    ID INT,
    event_description VARCHAR(30),
    event_heading  VARCHAR(30),
    event_photo BLOB,
    event_datetime  VARCHAR(30),
    CONSTRAINT event_pk PRIMARY KEY (ID)
);

CREATE TABLE semester
(
    ID INT,
    Semester_Name VARCHAR(25),
    CONSTRAINT sem_pk PRIMARY KEY (ID),
    CONSTRAINT sem_uq UNIQUE (semester_Name)
);

CREATE TABLE Major_Minor
(
    ID INT,
    Major_Minor_Name VARCHAR(30),
    Major_Minor_Description VARCHAR(50),
    CONSTRAINT mm_pk PRIMARY KEY (ID),
    CONSTRAINT mm_uq UNIQUE (Major_Minor_Name)
);

CREATE TABLE class
(
    ID INT,
    class_caption VARCHAR(30),
    class_name VARCHAR(30),
    class_description VARCHAR(30),
    class_credit_hours INT,
    CONSTRAINT cc_pk PRIMARY KEY (ID),
    CONSTRAINT cc_uq UNIQUE (class_caption)
);

CREATE TABLE Major_Class_br
(
    ID INT, 
    Class_ID INT,
    Major_Minor_ID INT,
    CONSTRAINT mbr_pk PRIMARY KEY (ID), 
    CONSTRAINT cc_fk1 FOREIGN KEY (Class_ID) REFERENCES class(ID),
    CONSTRAINT cc_fk2 FOREIGN KEY (Major_Minor_ID) REFERENCES Major_Minor(ID)
);

CREATE TABLE Faculty
(
    ID INT,
    faculty_fName VARCHAR(30),
    faculty_lname VARCHAR(30),
    faculty_bio VARCHAR(100),
    faculty_pic_path  VARCHAR(30),
    CONSTRAINT f_pk PRIMARY KEY (ID),
    CONSTRAINT cc_uq UNIQUE (faculty_fName, faculty_lname)
);

CREATE TABLE Faculty_Titles
(
    ID INT,
    faculty_ID INT,
    faculty_title VARCHAR(30),
    CONSTRAINT ft_pk PRIMARY KEY (ID),
    CONSTRAINT ft_fk1 FOREIGN KEY (faculty_ID) REFERENCES Faculty(ID)
);

CREATE TABLE Faculty_Education
(
    ID INT,
    faculty_ID INT,
    faculty_ed VARCHAR(30),
    CONSTRAINT fe_pk PRIMARY KEY (ID),
    CONSTRAINT fe_fk1 FOREIGN KEY (faculty_ID) REFERENCES faculty(ID)
);

CREATE TABLE Section
(
    ID INT, 
    Class_ID INT,
    faculty_ID INT,
    section_number INT,
    section_callnumber INT,
    CONSTRAINT ss_pk PRIMARY KEY (ID),  
    CONSTRAINT ss_fk1 FOREIGN KEY (Class_ID) REFERENCES class(ID),
    CONSTRAINT ss_fk2 FOREIGN KEY (faculty_ID) REFERENCES faculty(ID)
);

CREATE TABLE Schedule
(
    ID INT,
    Semester_ID INT,
    schedule_start_time DATETIME,
    schedule_end_time DATETIME,
    schedule_monday TINYINT(1),
    schedule_tuesday TINYINT(1),
    schedule_wednesday TINYINT(1),
    schedule_thursday TINYINT(1),
    schedule_friday TINYINT(1),
    CONSTRAINT sc_pk PRIMARY KEY (ID),
    CONSTRAINT sc_fk1 FOREIGN KEY (Semester_ID) REFERENCES semester(ID)
);

CREATE TABLE Office_Hours
(
    ID INT, 
    faculty_ID INT,
    schedule_ID INT,
    CONSTRAINT oh_pk PRIMARY KEY (ID),  
    CONSTRAINT oh_fk1 FOREIGN KEY (schedule_ID) REFERENCES Schedule(ID),
    CONSTRAINT oh_fk2 FOREIGN KEY (faculty_ID) REFERENCES faculty(ID)
);

CREATE TABLE sched_sect_br
(
    ID INT, 
    schedule_ID INT,
    section_ID INT,
    room_number INT,
    CONSTRAINT ssb_pk PRIMARY KEY (ID), 
    CONSTRAINT ssb_fk1 FOREIGN KEY (schedule_ID) REFERENCES Schedule(ID),
    CONSTRAINT ssb_fk2 FOREIGN KEY (section_ID) REFERENCES Section(ID)
); 
```

*   [**SQLFiddle 演示**](http://sqlfiddle.com/#!2/f92a0)

# java - 如何获取 Web 智能报告选项卡元数据，即列？

> ID：13262620
> 
> 赞同：0
> 
> 时间：2012-11-07T03:13:05.243
> 
> 标签：java, sap, business-objects, business-objects-sdk

我想获取 SAP BO4 Web 智能报告选项卡列信息。

我尝试使用 - 在 Java 中获取此信息 -

```
DataProviders dps = reportInstance.getDataProviders();
    for (int ii = 0; ii < dps.getCount(); ii++) {
        com.businessobjects.rebean.wi.DataProvider dp = dps.getItem(ii);
        int recCount = dp.getFlowCount();
        try {
            for (int iii = 0; iii < recCount; iii++) {

                try {
                    Recordset recordSet = dp.getResult(iii);
                    recordSet.first();
                    boolean hasNext = recordSet.isFirst();
            while (hasNext) {
                        for (int j = 0; j < recordSet.getColumnCount(); j++) {
                            columns.add(recordSet.getColumnName(j)); 
```

但是 reportInstance.getDataProviders() 会返回报告文档中所有报告选项卡的数据提供者，但我有兴趣在单个报告选项卡中找出数据提供者。

我可以使用 CI_InfoObjects 等使用 SQL 查询来获取它吗？

任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-30T07:42:12.437

数据提供者不绑定到单个报告（选项卡），而是绑定到整个文档。因此，您无法以这种方式确定数据提供者的使用情况。

相反，您需要查看`ReportMap`文档以了解文档的构建方式：

> ReportMap 接口公开了文档结构。根级别包含报告表的名称，叶子与部分和子部分相关联。该模型显示为一棵树。

数据提供者的用法可以是直接使用的 Universe 对象，也可以是包含由数据提供者检索到的 Universe 对象的变量或公式（或引用变量的变量……）。

另请记住，Java 报表引擎 SDK 已弃用，取而代之的是 REST SDK。查看[对象模型图](http://help.sap.com/businessobject/product_guides/boexir4/en/xi4_rebean_omd.pdf)，了解从 BI 4.0 开始不推荐使用 SDK 的哪一部分。

[您可以在Web Intelligence SDK](http://scn.sap.com/docs/DOC-37512)页面上找到有关 REST SDK 的更多信息。

# javascript - 如何在 moment.js 持续时间内使用 format()？

> ID：13262621
> 
> 赞同：245
> 
> 时间：2012-11-07T03:13:12.373
> 
> 标签：javascript, momentjs, duration

有什么方法可以在持续时间对象上使用[moment.js方法吗？](http://momentjs.com/) `format`我在文档中的任何地方都找不到它，而且它也不是持续时间对象的属性。

我希望能够做类似的事情：

```
var diff = moment(end).unix() - moment(start).unix();
moment.duration(diff).format('hh:mm:ss') 
```

此外，如果有任何其他库可以轻松适应这种功能，我会对推荐感兴趣。

谢谢！

* * *

## 回答 #1

> 赞同：190
> 
> 时间：2014-01-07T20:44:19.540

```
// set up
let start = moment("2018-05-16 12:00:00"); // some random moment in time (in ms)
let end = moment("2018-05-16 12:22:00"); // some random moment after start (in ms)
let diff = end.diff(start);

// execution
let f = moment.utc(diff).format("HH:mm:ss.SSS");
alert(f); 
```

[看看 JSFiddle](http://jsfiddle.net/fhdd8/920/)

* * *

## 回答 #2

> 赞同：87
> 
> 时间：2017-01-03T23:25:58.700

将持续时间转换为毫秒，然后转换为时刻：

```
moment.utc(duration.as('milliseconds')).format('HH:mm:ss') 
```

* * *

## 回答 #3

> 赞同：60
> 
> 时间：2012-11-07T17:03:00.683

我们正在考虑在 moment.js 中为持续时间添加某种格式。见[https://github.com/timrwood/moment/issues/463](https://github.com/timrwood/moment/issues/463)

其他一些可能会有所帮助的库是[http://countdownjs.org/](http://countdownjs.org/)和[https://github.com/icambron/twix.js](https://github.com/icambron/twix.js)

* * *

## 回答 #4

> 赞同：46
> 
> 时间：2014-08-19T14:32:52.977

使用这个插件[Moment Duration Format](https://github.com/jsmreese/moment-duration-format)。

例子：

```
moment.duration(123, "minutes").format("h:mm"); 
```

* * *

## 回答 #5

> 赞同：25
> 
> 时间：2019-05-22T14:42:16.893

使用这行代码：

```
moment.utc(moment.duration(4500, "seconds").asMilliseconds()).format("HH:mm:ss") 
```

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2015-05-20T00:46:27.743

```
var diff = moment(end).unix() - moment(start).unix();
moment.utc(moment.duration(diff).asMilliseconds()).format("HH:mm:ss.SSS"); 
```

* * *

## 回答 #7

> 赞同：14
> 
> 时间：2018-02-09T09:19:29.917

我的特定用例的最佳方案是：

```
var duration = moment.duration("09:30"),
    formatted = moment.utc(duration.asMilliseconds()).format("HH:mm"); 
```

这改进了@Wilson 的回答，因为它不访问私有内部属性_data。

* * *

## 回答 #8

> 赞同：12
> 
> 时间：2017-05-19T13:53:09.920

你不需要.format。使用这样的持续时间：

```
const duration = moment.duration(83, 'seconds');
console.log(duration.minutes() + ':' +duration.seconds());
// output: 1:23 
```

我在这里找到了这个解决方案：[https ://github.com/moment/moment/issues/463](https://github.com/moment/moment/issues/463)

**编辑：**

并填充秒、分钟和小时：

```
const withPadding = (duration) => {
    if (duration.asDays() > 0) {
        return 'at least one day';
    } else {
        return [
            ('0' + duration.hours()).slice(-2),
            ('0' + duration.minutes()).slice(-2),
            ('0' + duration.seconds()).slice(-2),
        ].join(':')
    }
}

withPadding(moment.duration(83, 'seconds'))
// 00:01:23

withPadding(moment.duration(6048000, 'seconds'))
// at least one day 
```

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2015-10-30T15:33:46.037

我用：

```
var duration = moment.duration("09:30");
var str = moment(duration._data).format("HH:mm"); 
```

我在 var str 中得到“09:30”。

* * *

## 回答 #10

> 赞同：8
> 
> 时间：2020-05-14T16:48:48.113

我需要这样做以作为以这种格式显示小时数的要求。起初我试过这个。

```
moment.utc(totalMilliseconds).format("HH:mm:ss") 
```

然而，超过 24 小时的任何时间都将重置为 0。但分钟和秒是准确的。所以我只用那部分来表示分钟和秒。

```
var minutesSeconds = moment.utc(totalMilliseconds).format("mm:ss") 
```

现在我需要的只是总小时数。

```
var hours = moment.duration(totalMilliseconds).asHours().toFixed() 
```

为了获得我们都想要的格式，我们只需将其粘合在一起即可。

```
var formatted = hours + ":" + minutesSeconds 
```

如果`totalMilliseconds`是`894600000`这将返回`249:30:00`。

希望有帮助。在评论中留下任何问题。;)

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2014-08-22T00:21:09.683

如果您愿意使用不同的 javascript 库，[numeric.js](http://numeraljs.com/)可以按如下方式格式化秒（示例为 1000 秒）：

```
var string = numeral(1000).format('00:00');
// '00:16:40' 
```

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2012-11-07T04:07:47.367

如果差异是片刻

```
var diff = moment(20111031) - moment(20111010);
var formated1 = moment(diff).format("hh:mm:ss");
console.log("format 1: "+formated1); 
```

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2017-11-17T15:21:52.143

如果必须显示所有小时数（超过 24 小时）并且如果小时数之前不需要“0”，则可以使用一小行代码进行格式化：

```
Math.floor(duration.as('h')) + moment.utc(duration.as('ms')).format(':mm:ss') 
```

* * *

## 回答 #14

> 赞同：5
> 
> 时间：2018-12-11T16:08:14.790

基于[ni-ko-o-kin 的回答](https://stackoverflow.com/a/44071876)：

```
meassurements = ["years", "months", "weeks", "days", "hours", "minutes", "seconds"];
withPadding = (duration) => {
    var step = null;
    return meassurements.map((m) => duration[m]()).filter((n,i,a) => {
        var nonEmpty = Boolean(n);
        if (nonEmpty || step || i >= a.length - 2) {
            step = true;
        }
        return step;
    }).map((n) => ('0' + n).slice(-2)).join(':')
}

duration1 = moment.duration(1, 'seconds');
duration2 = moment.duration(7200, 'seconds');
duration3 = moment.duration(604800, 'seconds');

withPadding(duration1); // 00:01
withPadding(duration2); // 02:00:00
withPadding(duration3); // 01:07:00:00:00 
```

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2014-11-18T09:44:35.547

在这些情况下，我使用经典的格式功能：

```
var diff = moment(end).unix() - moment(start).unix();

//use unix function instead of difference
moment.unix(diff).format('hh:mm:ss') 
```

这是一个 hack，因为时间差异被视为标准时刻日期，早期纪元日期时间，但这与我们的目标无关，您不需要任何插件

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2016-05-30T16:48:40.717

将持续时间格式化为字符串

```
var duration = moment.duration(86400000); //value in milliseconds
var hours = duration.hours();
var minutes = duration.minutes();
var seconds = duration.seconds();
var milliseconds = duration.milliseconds();

var date = moment().hours(hours).minutes(minutes).seconds(seconds).millisecond(milliseconds);
if (is12hr){
    return date.format("hh:mm:ss a");
}else{
    return date.format("HH:mm:ss");
} 
```

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2016-12-18T15:33:47.813

如果您使用 Angular 将其添加到您的过滤器中：

```
.filter('durationFormat', function () {
    return function (value) {
        var days = Math.floor(value/86400000);
        value = value%86400000;
        var hours = Math.floor(value/3600000);
        value = value%3600000;
        var minutes = Math.floor(value/60000);
        value = value%60000;
        var seconds = Math.floor(value/1000);
        return (days? days + ' days ': '') + (hours? hours + ' hours ': '') + (minutes? minutes + ' minutes ': '') + (seconds? seconds + ' seconds ': '')
    }
}) 
```

使用示例

```
<div> {{diff | durationFormat}} </div> 
```

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2019-08-22T16:08:12.033

我的解决方案不涉及任何其他库，并且适用于 diff > 24h

```
var momentInSeconds = moment.duration(n,'seconds')
console.log(("0" + Math.floor(momentInSeconds.asHours())).slice(-2) + ':' + ("0" + momentInSeconds.minutes()).slice(-2) + ':' + ("0" + momentInSeconds.seconds()).slice(-2)) 
```

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2021-08-11T11:16:12.503

短版（**单线**）：

```
moment.duration(durationInMs).asHours()|0||"00" + ":" + moment.utc(durationInMs).format("mm:ss") 
```

*扩大的视野：*

```
export const formatDuration = (durationInMs) => {
    const hours = Math.floor(moment.duration(durationInMs).asHours()) || "00"
    return hours + ":" + moment.utc(durationInMs).format("mm:ss")
} 
```

*示例案例：*

[![示例案例](../Images/d1314327c165d13a0862201ea3981595.png)](https://i.stack.imgur.com/3LokW.jpg)

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2017-05-02T19:32:51.453

原生javascript怎么样？

```
var formatTime = function(integer) {
    if(integer < 10) {
        return "0" + integer; 
    } else {
        return integer;
    }
}

function getDuration(ms) {
    var s1 = Math.floor(ms/1000);
    var s2 = s1%60;
    var m1 = Math.floor(s1/60);
    var m2 = m1%60;
    var h1 = Math.floor(m1/60);
    var string = formatTime(h1) +":" + formatTime(m2) + ":" + formatTime(s2);
    return string;
} 
```

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2020-02-19T10:51:17.917

`moment.duration(x).format()`已被弃用。您可以使用`moment.utc(4366589).format("HH:mm:ss")`来获得所需的响应。

```
console.log(moment.utc(4366589).format("HH:mm:ss"))
```

```
<script src="https://momentjs.com/downloads/moment.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
```

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2020-05-08T08:55:19.757

**如何正确使用 moment.js 持续时间？** | **在代码中使用 moment.duration()**

首先，您需要导入`moment`和`moment-duration-format`.

```
import moment from 'moment';
import 'moment-duration-format'; 
```

然后，使用持续时间函数。让我们应用上面的例子：28800 = 8 am。

```
moment.duration(28800, "seconds").format("h:mm a"); 
```

好吧，您没有上述类型错误。您在上午 8:00 得到正确的值吗？不……，您得到的值是 8:00 a。Moment.js 格式无法正常工作。

解决方案是将秒转换为毫秒并使用 UTC 时间。

```
moment.utc(moment.duration(value, 'seconds').asMilliseconds()).format('h:mm a') 
```

好吧，我们现在早上 8:00。如果你想要 8 am 而不是 8:00 am 积分时间，我们需要做 RegExp

```
const time = moment.utc(moment.duration(value, 'seconds').asMilliseconds()).format('h:mm a');
time.replace(/:00/g, '') 
```

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2020-01-27T03:43:26.330

使用[moment-duration-format](https://github.com/jsmreese/moment-duration-format)。

# 客户端框架（例如：React）

```
import moment from 'moment';
import momentDurationFormatSetup from 'moment-duration-format';
momentDurationFormatSetup(moment);

const breakLengthInMinutes = moment.duration(breakLengthInSeconds, 's').format('m'); 
```

# 服务器（node.js）

```
const moment = require("moment-timezone");
const momentDurationFormatSetup = require("moment-duration-format");

momentDurationFormatSetup(moment);

const breakLengthInMinutes = moment.duration(breakLengthInSeconds, 's').format('m'); 
```

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2021-03-14T23:40:15.970

不再需要（如果有的话）将持续时间转换为 UTC 来解决这个问题。这就像将base10“1”转换为二进制，然后说由于输出“1”看起来像base10，我们假设这是一个base10值，可以进行任何进一步的操作。

使用[moment-duration-format](https://github.com/jsmreese/moment-duration-format)并注意`{ trim: false }`你可以防止修剪：

```
moment.duration(1000000, "seconds").format("hh:mm:ss", { trim: false })
> "277:46:40"
moment.duration(0, "seconds").format("hh:mm:ss", { trim: false })
> "00:00:00" 
```

让我们将此与不推荐的 ~~使用~~utc 的方法进行比较：

```
moment.utc(moment.duration(1000000, "seconds").asMilliseconds()).format('HH:mm:ss')
> "13:46:40" 
```

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2019-05-02T04:38:29.810

```
import * as moment from 'moment'
var sleep = require('sleep-promise');

(async function () {
    var t1 = new Date().getTime();
    await sleep(1000); 
    var t2 = new Date().getTime();
    var dur = moment.duration(t2-t1); 
    console.log(`${dur.hours()}h:${dur.minutes()}m:${dur.seconds()}s`);
})(); 
```

```
0h:0m:1s 
```

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2019-11-26T13:57:49.987

您可以使用[numeric.js](http://numeraljs.com/)来格式化您的持续时间：

```
numeral(your_duration.asSeconds()).format('00:00:00') // result: hh:mm:ss 
```

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2021-10-15T09:46:41.603

Just moment.js without any other plugins

```
moment().startOf('day').seconds(duration).format('HH:mm:ss') 
```

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2020-02-05T19:32:31.933

这可用于将前两个字符作为小时，将后两个字符作为分钟。相同的逻辑可以应用于秒。

```
/**
     * PT1H30M -> 0130
     * @param {ISO String} isoString
     * @return {string} absolute 4 digit number HH:mm
     */

    const parseIsoToAbsolute = (isoString) => {

      const durations = moment.duration(isoString).as('seconds');
      const momentInSeconds = moment.duration(durations, 'seconds');

      let hours = momentInSeconds.asHours().toString().length < 2
        ? momentInSeconds.asHours().toString().padStart(2, '0') : momentInSeconds.asHours().toString();

      if (!Number.isInteger(Number(hours))) hours = '0'+ Math.floor(hours);

      const minutes = momentInSeconds.minutes().toString().length < 2
        ? momentInSeconds.minutes().toString().padEnd(2, '0') : momentInSeconds.minutes().toString();

      const absolute = hours + minutes;
      return absolute;
    };

    console.log(parseIsoToAbsolute('PT1H30M'));
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment-with-locales.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/16.6.3/umd/react.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/16.6.3/umd/react-dom.production.min.js"></script>
```

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2019-03-15T23:12:29.363

```
const duration = moment.duration(62, 'hours');
const n = 24 * 60 * 60 * 1000;
const days = Math.floor(duration / n);
const str = moment.utc(duration % n).format('H [h] mm [min] ss [s]');
console.log(`${days > 0 ? `${days} ${days == 1 ? 'day' : 'days'} ` : ''}${str}`); 
```

印刷：

> 2 天 14 小时 00 分 00 秒

* * *

## 回答 #30

> 赞同：-1
> 
> 时间：2018-11-30T15:56:52.093

如果您使用 Angular >2，我制作了一个受 @hai-alaluf 答案启发的管道。

```
import {Pipe, PipeTransform} from "@angular/core";

@Pipe({
  name: "duration",
})

export class DurationPipe implements PipeTransform {

  public transform(value: any, args?: any): any {

    // secs to ms
    value = value * 1000;
    const days = Math.floor(value / 86400000);
    value = value % 86400000;
    const hours = Math.floor(value / 3600000);
    value = value % 3600000;
    const minutes = Math.floor(value / 60000);
    value = value % 60000;
    const seconds = Math.floor(value / 1000);
    return (days ? days + " days " : "") +
      (hours ? hours + " hours " : "") +
      (minutes ? minutes + " minutes " : "") +
      (seconds ? seconds + " seconds " : "") +
      (!days && !hours && !minutes && !seconds ? 0 : "");
  }
} 
```

* * *

## 回答 #31

> 赞同：-3
> 
> 时间：2019-05-22T21:58:01.710

这对我有用：

```
moment({minutes: 150}).format('HH:mm') // 01:30 
```

# python-3.x - ValueError: int() 以 10 为底的无效文字：'x'

> ID：13262622
> 
> 赞同：2
> 
> 时间：2012-11-07T03:13:15.843
> 
> 标签：python-3.x

当字符串上的最后一个索引有“x”或“X”（它表示为 10）时，如果我有类似“1x”的东西，这意味着 11 (1 + 10)

```
def main():
    s1 = "013162959x"
    partial_sums(s1)

def partial_sums(s1):
    lst =[]
    sum = 0    
    for i in range(len(s1)):
       if (i == len(s1) -1) and (s1[i] == "x" or "X"):
            sum = sum + int(s1[i]) + 10
        else:
            sum = sum + int(s1[i])
        lst.append(sum)
    print(lst)

main() 
```

**我得到一个 ValueError: invalid literal for int() with base 10: 'x'**

输出应该是 [0, 1, 4, 5, 11, 13, 22, 27, 36, 46]

当字符串不包含“X”值时，它可以正常工作。

```
def main():
    s1 = "0131629592"  
    partial_sums(s1)

def partial_sums(s1):
    lst1 =[]
    sum = 0
    for i in range(len(s1)):
        sum = sum + int(s1[i])
        lst1.append(sum)
    print(lst1)

main() 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T03:29:07.493

这个说法：

```
 if (i == len(s1) -1) and (s1[i] == "x" or "X"):
        sum = sum + int(s1[i]) + 10 
```

即使is仍然会调用`int`。你只是想要.`s1[i]``s1[i]``"x"``sum += 10`

但是，请注意，这`or`与您使用它的方式不同。引用文档，“表达式`x or y`首先评估*x*；如果*x*为真，则返回其值；否则，评估*y*并返回结果值。” IOW，`"a" == "b" or "c"`返回`"c"`，而不是 False，并`"c"`评估为 True。

此外，由于`sum`它是一个非常有用的内置函数，因此使用您自己的同名变量来隐藏它可能是个坏主意。 `total`经常被使用。

# ruby-on-rails-3 - ActiveMerchant 贝宝网关/快递

> ID：13262627
> 
> 赞同：2
> 
> 时间：2012-11-07T03:13:54.793
> 
> 标签：ruby-on-rails-3, paypal, activemerchant

我正在尝试将 ActiveMerchange 和 PaypalExpress 集成到我的网站中，但在此过程中我感到很困惑。我到处搜索并观看了几个 RailsCasts，但仍然有点困惑。

在我的应用程序中，我想出售积分。要购买的“产品”只是信用。它们不是实际的对象，也不在数据库中，而只是在散列中，例如：

```
# 1 credit is $5, 5 credits are $25
{
  '1' => 5,
  '5' => 25
} 
```

我不想使用许多在线教程中显示的购物车系统，我只是希望用户能够从下拉列表中选择积分数量，单击“使用 Paypal 结帐”，购买积分并拥有它更新他们的帐户。

谁能指导我完成这个？我希望这不是要求太多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T00:09:10.463

我建议使用[Express Checkout](https://www.x.com/developers/paypal/development-and-integration-guides#ec)。无论您如何计算总数，这使得处理您需要的任何金额变得非常简单。

# c# - 删除字符串末尾的空格和空行 vb.net

> ID：13262629
> 
> 赞同：1
> 
> 时间：2012-11-07T03:14:26.840
> 
> 标签：c#, vb.net, string

在 vb.net 我有一个看起来像这样的字符串

```
"text text text                           
                             " 
```

所以最后有空格和一个新的空行

怎么能让这看起来像

```
"text text text" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T03:17:47.290

`string.TrimEnd`：

```
var s = @"text text text                           
                         ";
Console.Write(s.TrimEnd() + "<-- End"); // Output: text text text<-- End 
```

`TrimEnd`从字符串的末尾修剪，从字符串`Trim`的开头和结尾删除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T03:43:40.493

我不确定 Trim() 是否也会剪切新行...如果不是，您可以将其与参数一起使用 - Trim('\n') 或 Trim('\t') 用于制表符，甚至指定一个列表您想要截断的字符。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-07T12:02:00.603

```
Dim value As String = "text text text                           
                         "
Dim trimmed As String = value.Trim() 
```

> 修剪删除前导和尾随空格。字符串数据通常具有前导或尾随空白字符，例如换行符、空格或制表符。通常不需要这些字符。使用 Trim，我们以声明的方式去除这些字符。

**参考： http:** [//www.dotnetperls.com/trim-vbnet](http://www.dotnetperls.com/trim-vbnet)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-07T03:16:17.320

你正在寻找`Trim()`方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-04-14T19:50:53.537

使用`string.TrimEnd(params char[] trimChars)`方法：

```
yourString.TrimEnd(); 
```

# wpf - 具有 MVVM 实现的 WPF 应用程序的不可变数据模型

> ID：13262631
> 
> 赞同：3
> 
> 时间：2012-11-07T03:14:50.173
> 
> 标签：wpf, mvvm, immutability

我有一个应用程序，它有一个数据树作为数据后端。为了实现 MVVM 模式，我有一个封装数据树的类的逻辑层。因此逻辑也被安排在树中。如果输入处于有效状态，则应将数据复制到第二个线程，该线程用作最后一个有效状态的双缓冲区。因此，一种方法是克隆。

另一种方法是将完整的数据后端实现为不可变的。如果输入新内容，这将意味着重建整个数据树。我的问题是，有没有实用的方法来做到这一点？我被困在必须将数据树有效地重新分配给逻辑层的地步。

**更新 - 一些代码

我们正在做的是抽象出我们用来运行实验的硬件设备。因此，我们定义了诸如“机箱、序列、卡片、通道、步骤”之类的类。那些构建一个像这样的树结构：

```
 Chassis
                          /      \
                   Sequence1      Sequence2
                   /    |    \
              Card1   Card2  Card3
             /     \
     Channel1      Channel2
    /        \
Step1        Step2 
```

在代码中它看起来像这样：

```
public class Chassis{

readonly var List<Sequence> Sequences = new List<Sequence>();

}

public class Sequence{

readonly var List<Card> Cards = new List<Card>();

} 
```

等等。当然，每个类都有更多属性，但这些属性很容易处理。我现在的问题是 List 是一个可变对象。我可以调用 List.Add() 并且它改变了。好的，有一个 ReadOnlyList 但我不确定它是否以正确的方式实现了不变性。就像按值复制而不是引用，而不仅仅是通过阻止 set 方法来阻止写入它。下一个问题是序列和步骤的数量可能会有所不同。出于这个原因，我需要列表元素的原子交换。目前我没有更多的代码，因为我仍在考虑这种方式是否对我有帮助，以及是否有可能在合理的时间内实现它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T17:23:28.480

请注意，有一些新[的 .NET 不可变集合](http://blogs.msdn.com/b/bclteam/archive/2012/12/18/preview-of-immutable-collections-released-on-nuget.aspx)可以帮助您实现目标。

对 Dave Turvey 的声明要非常谨慎（如果可以的话，我会投反对票/评论）：

> 如果您希望实现一个不可变列表，您可以尝试将列表存储为私有成员但公开`IEnumerable<>`

这是不正确的。私有成员仍然可以通过其容器类进行更改。公共成员可以强制转换为`List<T>`, `IList<T>`, 或`ICollection<T>`不抛出异常。因此，任何依赖于公众不变性的东西都`IEnumerable<T>`可能破裂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T12:38:35.203

我不确定我是否 100% 理解您的要求。听起来您有一棵处于特定状态的对象树，并且您希望在不修改原始对象状态的情况下对其副本执行一些处理。您应该考虑通过“深度复制”进行克隆。[这个问题](https://stackoverflow.com/questions/78536/cloning-objects-in-c-sharp)应该让你开始。

如果您希望实现一个不可变列表，您可以尝试将列表存储为私有成员但公开`IEnumerable<>`

```
public class Chassis
{

   List<Sequence> _sequences = new List<Sequence>();
   public IEnumerable<Sequence> Sequences { get { return _sequences; } }

} 
```

* * *

2013 年 4 月 18 日更新以回应布兰登邦兹的评论

Brandon Bonds 答案中链接的库当然很有趣，并且比`IEnumerable<>`. 在许多情况下，它可能是一个更好的解决方案。但是，如果您使用此库，则应该注意一些警告。

1.  截至 2013 年 4 月 18 日，这是一个 beta 库。它显然仍在开发中，可能还没有准备好用于生产。例如，链接文章中的列表创建代码示例在当前的 nuget 包中不起作用。

2.  这是一个 .net 4.5 库。因此它不适用于针对旧框架的程序。

3.  它不保证仅集合本身的集合中包含的对象的不变性。可以修改不可变列表中的对象 您仍然需要考虑使用深层副本来复制集合。

这在文章末尾的常见问题解答中得到解决

> 问：我可以只在这些不可变集合中存储不可变数据吗？
> 
> 答：您可以在这些集合中存储所有类型的数据。唯一不变的方面是集合本身，而不是它们包含的项目。

此外，以下代码示例说明了这一点（使用版本 1.0.8-beta）

```
class Data
{
    public int Value { get; set; }
}

class Program
{
    static void Main(string[] args)
    {
        var test = ImmutableList.Create<Data>();           
        test = test.Add(new Data  { Value = 1 });
        Console.WriteLine(test[0].Value);
        test[0].Value = 2;
        Console.WriteLine(test[0].Value);
        Console.ReadKey();
    }
} 
```

此代码将允许修改 Data 对象和输出

```
1
2 
```

这里有几篇文章可以进一步阅读这个主题

*   [只读、冻结和不可变集合](http://blogs.msdn.com/b/andrewarnottms/archive/2011/08/22/read-only-frozen-and-immutable-types-and-collections.aspx)
*   [C# 中的不变性第 1 部分：不变性的种类](http://blogs.msdn.com/b/ericlippert/archive/2007/11/13/immutability-in-c-part-one-kinds-of-immutability.aspx)

# java - 在 2 点之间查找字符串并在另外 2 点之间移动

> ID：13262632
> 
> 赞同：1
> 
> 时间：2012-11-07T03:14:57.227
> 
> 标签：java, php, html, mysql, centos

我有很多静态的 url，要更改它们，我需要使用某种类型的应用程序或脚本。我有大约 400 个文件，每个文件的 url 范围为 15-150。

这是我正在尝试做的一个例子：

```
Change:
<td class="SELECTX"><strong>Text example 1 <a href=""></a>Text Example 2 </strong></td>

To:
<td class="SELECTX"><strong> <a href=""></a>Text example 1 Text Example 2 </strong></td> 
```

我希望有一种方法可以一次更改所有文件，但如果我不能，那么至少有一种方法可以更改一个文件上的所有 url，而无需手动剪切和粘贴。

我搜索了3个多小时，一无所获……希望有人能提供帮助。

编辑：基本上我试图找到之间的文本/字符串，`<strong`然后`<a href=`将`"Text example 1"`其移动到`""></a>`. 现在会在之前`"Text Example 2"`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T03:29:29.697

要查找两个（或）标记之间的字符串，我可能只使用正则表达式来查找文件中字符串的位置，然后处理脚本中的每个字符串/行。

然后也许对于每一行，找到开始标签和结束标签，这会给我需要交换的字符串部分的索引，并沿着开始标签的索引交换两部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T03:37:37.337

请检查它是否完全适合您的需要

```
 String s = "<td class=\"SELECTX\"><strong>Text example 1 <a href=\"\"></a>Text Example 2 </strong></td>";
    s = s.replace("<a href=\"\"></a>", " ").replace("<strong>", "<strong><a href=\"\"></a>"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T03:41:09.810

```
#!/bin/bash 
while read line
do
     x=`echo $line |grep -o "strong>.*<a" | sed 's/strong>//' |sed 's/<a//'`
     y=`echo $line |grep -o "a>.*</strong" | sed 's/a>//' |sed 's/<\/strong//'`
     z=`echo $line| sed 's/'"$x"'//' |sed 's/'"$y"'/'"$x $y"'/'`
    echo $z
done < a.txt 
```

将此脚本的输出附加到另一个文件，这将是您的预期输出。您可以放置​​一个 for 循环来迭代该目录中的所有文件。

如果你想在java中复制它，这里是逻辑。

字符串 X = "文本示例 1"

字符串 Y = "文本示例 2"

字符串 Z = X+（连接）+ Y

将“文本示例 1”替换为“”

用字符串 Z 替换“文本示例 2”。

# c# - 在 MySQL 中搜索日期时间

> ID：13262638
> 
> 赞同：1
> 
> 时间：2012-11-07T03:15:29.473
> 
> 标签：c#, mysql, datetime

我有一个 MySQL 数据库，有一个表，其中 Time 的类型为**Nvachar(50)**，**其值**类似于**“05/09/2012 20:53:40:843”** * *（月-日-年小时：分钟:秒:毫秒)* *

现在我想查询“10/05/2012 01:00:30 PM”之后的时间记录。在进行查询之前，我在 C# 中有代码将其转换为“05/10/2012 13:00:30”。我的查询：

```
SELECT * FROM ABCDFEGH WHERE capTime > '05/10/2012 13:00:30' LIMIT 0, 1 
```

但是我没有记录。所以请告诉我如何才能让它返回记录在上述时间之后有时间？？？

更多信息我的 C# 代码：

```
string tableName = "ABCDFEGH";
string date = "05/10/2012 13:00:30";

var query = "SELECT * FROM " + tableName + " WHERE capTime > '" + date + "' LIMIT 0, 1";

var cmd = new MySqlCommand(query, connection);
MySqlDataReader dataReader = null;
try
{
dataReader = cmd.ExecuteReader();
} 
```

我实在是太抱歉了。我犯了一个错误，查询必须是

```
SELECT * FROM ABCDFEGH WHERE capTime > '05/10/2012 13:00:30' LIMIT 0, 1 
```

此查询成功返回我需要的记录:)

但是我怎么把它打错了

```
SELECT * FROM ABCDFEGH WHERE capTime > '05-10-2012 13:00:30' LIMIT 0, 1 
```

再次抱歉，话题关闭。但是 tks for evveryone 尝试过 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T03:16:39.970

### 采用`TIMESTAMPDIFF()`

### 架构

```
CREATE TABLE ABCDFEGH (`right` varchar(3), `time` datetime);

INSERT INTO ABCDFEGH (`right`, `time`)
VALUES
    ('Yes', '2012-10-02 13:00:30'),
    ('No', '2012-10-15 13:00:30'); 
```

### SQL 代码

```
SELECT * FROM ABCDFEGH
  WHERE TIMESTAMPDIFF(MINUTE, time, '2012-10-05 13:00:30') > 0
  LIMIT 0, 1 
```

### 解释

> [`TIMESTAMPDIFF()`](http://dev.mysql.com/doc/refman/5.0/en/date-and-time-functions.html#function_timestampdiff)返回 datetime_expr2 – datetime_expr1，其中 datetime_expr1 和 datetime_expr2 是日期或日期时间表达式。一个表达式可以是日期，而另一个表达式可以是日期时间；日期值在必要时被视为具有时间部分“00:00:00”的日期时间。结果的单位（整数）由 unit 参数给出。

### 小提琴：[http ://www.sqlfiddle.com/#!2/244cc/1](http://www.sqlfiddle.com/#!2/244cc/1) `datetime`

### 小提琴：[http ://www.sqlfiddle.com/#!2/063b3/1](http://www.sqlfiddle.com/#!2/063b3/1) `varchar(50)`

***PS1：** `Time`可能是保留字。请避免使用它。否则将其与反引号 (`) 一起使用。*

***PS2：**时间的格式`YYYY-MM-DD`不是倒过来的。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T03:26:09.893

首先，您为什么将日期保存为`NVARCHAR`？如果您仍然能够将其更改为`DATETIME`数据类型及其上的所有记录，那就更好了。

但如果没有，您可以使用`STR_TO_DATE`.

```
SELECT  *
FROM    tableName
WHERE   STR_TO_DATE(`capTime`, '%m/%d/%Y %H:%i:%s:%x') > 
        STR_TO_DATE('05/10/2012 13:00:30', '%c/%d/%Y %H:%i:%s') 
```

*   [**请参阅 SQLFiddle 演示**](http://sqlfiddle.com/#!2/6441a/1)

来源

*   [STR_TO_DATE](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)
*   [日期格式](http://davidwalsh.name/format-date-mysql-date_format)

**更新 1**

并且您的查询容易受到`SQL Injection`. 为了避免它

*   参数化您的查询

代码片段，

```
string tableName = "ABCDFEGH";
string date = "05/10/2012 13:00:30";
String query =  "SELECT  * FROM  " + tableName + " WHERE   STR_TO_DATE(`capTime`, '%m/%d/%Y %H:%i:%s:%x') >  STR_TO_DATE(@dateHere, '%c/%d/%Y %H:%i:%s')";
using (MySqlConnection connection = new MySqlConnection("connectionStringHere"))
{
    using (MySqlCommand command = new MySqlCommand())
    {
        command.Connection = connection;
        command.CommandType = CommandType.Text;
        command.CommandText = query;
        command.Parameters.AddwithValue("@dateHere",date)
        MySqlDataReader dataReader = null;
        try
        {
            dataReader = cmd.ExecuteReader();
        }
        catch(MySqlException e)
        {
            // do something here
            // don't suppress the error
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T03:35:51.473

我建议使用`DATETIME`数据类型而不是 NVARCHAR。以格式存储日期`YYYY-MM-DD HH:MM:SS`，这是[MySQL 识别的本机 DATETIME 格式](http://dev.mysql.com/doc/refman/5.5/en/datetime.html)。

还可以使用相同格式的日期文字。

此建议的两个原因：首先，[DATETIME 仅占用 8 个字节](http://dev.mysql.com/doc/refman/5.5/en/storage-requirements.html)，而不是多达 150 个字节，这是多字节 50 个字符 varchar 的潜在大小。

其次，DATETIME 的排序顺序将与时间顺序相同。`Time`因此，如果您在列上创建索引，您的`>`比较可以从索引中受益。因此，您的查询会快得多。

# c - OpenCL转置内核如何使用get_local_id

> ID：13262646
> 
> 赞同：1
> 
> 时间：2012-11-07T03:16:12.997
> 
> 标签：c, matrix, opencl

取自样本的代码。我用它创建了一个项目，它可以工作，但我不明白某些部分。

举例来说，假设我有一个 32x32 矩阵，有 36 个工作项，因此我假设 get_global_id(0) 从 0 -> 35 变为 size = MATRIX_DIM/4 = 8。

```
__kernel void transpose(__global float4 *g_mat,
   __local float4 *l_mat, uint size) {

   __global float4 *src, *dst;

   /* Determine row and column location */
   int col = get_global_id(0);
   int row = 0;
   while(col >= size) {
      col -= size--;
      row++;
   }
   col += row;
   size += row;

   /* Read source block into local memory */
   src = g_mat + row * size * 4 + col;
   l_mat += get_local_id(0)*8; 
```

在`clEnqueueNDRangeKernel`调用中，根据手册将 arg`local_work_size`设置为`NULL`让编译器或其他东西弄清楚：

`local_work_size can also be a NULL value in which case the OpenCL implementation will determine how to be break the global work-items into appropriate work-group instances.`

但我不明白乘以 8，它为我想的工作组提供了本地内存的地址偏移量。有人可以解释一下吗？

```
 l_mat[0] = src[0];
   l_mat[1] = src[size];
   l_mat[2] = src[2*size];
   l_mat[3] = src[3*size];

   /* Process block on diagonal */
   if(row == col) {
      src[0] =
         (float4)(l_mat[0].x, l_mat[1].x, l_mat[2].x, l_mat[3].x);
      src[size] =
         (float4)(l_mat[0].y, l_mat[1].y, l_mat[2].y, l_mat[3].y);
      src[2*size] =
         (float4)(l_mat[0].z, l_mat[1].z, l_mat[2].z, l_mat[3].z);
      src[3*size] =
         (float4)(l_mat[0].w, l_mat[1].w, l_mat[2].w, l_mat[3].w);
   }
   /* Process block off diagonal */
   else {
      /* Read destination block into local memory */
      dst = g_mat + col * size * 4 + row;
      l_mat[4] = dst[0];
      l_mat[5] = dst[size];
      l_mat[6] = dst[2*size];
      l_mat[7] = dst[3*size];

      /* Set elements of destination block */
      dst[0] =
         (float4)(l_mat[0].x, l_mat[1].x, l_mat[2].x, l_mat[3].x);
      dst[size] =
         (float4)(l_mat[0].y, l_mat[1].y, l_mat[2].y, l_mat[3].y);
      dst[2*size] =
         (float4)(l_mat[0].z, l_mat[1].z, l_mat[2].z, l_mat[3].z);
      dst[3*size] =
         (float4)(l_mat[0].w, l_mat[1].w, l_mat[2].w, l_mat[3].w);

      /* Set elements of source block */
      src[0] =
         (float4)(l_mat[4].x, l_mat[5].x, l_mat[6].x, l_mat[7].x);
      src[size] =
         (float4)(l_mat[4].y, l_mat[5].y, l_mat[6].y, l_mat[7].y);
      src[2*size] =
         (float4)(l_mat[4].z, l_mat[5].z, l_mat[6].z, l_mat[7].z);
      src[3*size] =
         (float4)(l_mat[4].w, l_mat[5].w, l_mat[6].w, l_mat[7].w);
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T18:20:32.940

**l_mat**用作临时缓冲区，用于存储要为所有工作项反转的两个矩阵分量。

因此，对于每个工作项，它需要存储**2 * 4 个**float4s，因此：**offset = get_local_id(0)*2*4 = get_local_id(0)*8**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T18:25:32.310

`l_mat`被用作工作组中线程的本地存储。具体来说，它之所以被使用，是因为访问本地内存比访问全局内存要快几个数量级。

每个线程需要 8`float4`秒。进行以下指针运算

```
l_mat += get_local_id(0)*8; 
```

移动`l_mat`每个线程的指针，使其不与其他线程的数据重叠。

这*可能*会导致错误，因为未指定 local_size 并且我们无法确保 的大小`l_mat`足以存储每个线程的值。

# emacs - emacs取消最后一个动作，ctrl+g不是很有效

> ID：13262652
> 
> 赞同：2
> 
> 时间：2012-11-07T03:17:13.730
> 
> 标签：emacs, ctrl, gud

Emacs 通常使用`Ctrl+G`取消操作，但是当我使用 GUD 模式调试程序时，`Ctrl+G`通常不会像我预期的那样工作。例如，如果我想在源 test.cpp 的第 223 行设置一个断点，如果我输入 "b test.c:" ，那么我使用 TAB 自动完成它然后将尝试列出所有可能的结果，则 emacs 无法响应任何输入。如果我使用`Ctrl+G`取消此操作，结果会继续将所有结果输出到屏幕，这可能需要很长时间。有没有办法更有效地取消这个动作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T04:52:05.837

`Ctrl+G`用于取消 Emacs 命令，但该输出来自在 comint 缓冲区中运行的调试器。Emacs 命令已经完成，它只是将 TAB 发送到调试器进程。

Try `Ctrl+C` `Ctrl+C`，它向子进程发送中断。但是，子进程可能已经完成了结果列表的发送，并且都在 pty 缓冲区中。

# javascript - 悬停在一个 在选择列表中

> ID：13262653
> 
> 赞同：12
> 
> 时间：2012-11-07T03:17:17.533
> 
> 标签：javascript, jquery, forms, option

当悬停在选择列表中的选项上时，我试图显示描述，但是，在悬停时我无法识别代码。

相关代码：

选择表格块：

```
<select name="optionList" id="optionList" onclick="rankFeatures(false)" size="5"></select>
<select name="ranks" id="ranks" size="5"></select> 
```

操作选择（前面定义的数组）：

```
function rankFeatures(create) {

    var $optionList = $("#optionList");
    var $ranks = $("#ranks");

if(create == true) {
    for(i=0; i<5; i++){
        $optionList.append(features[i]);
    };
}
else {
    var index = $optionList.val();
    $('#optionList option:selected').remove();
    $ranks.append(features[index]);
}; 
```

}

这一切都有效。当我尝试处理将鼠标悬停在选项上时，一切都崩溃了：

```
$(document).ready( 

function (event) {
$('select').hover(function(e) {
    var $target = $(e.target);
    if($target.is('option')) {
        alert('yeah!');
    };
})
}) 
```

我在通过 Stack Exchange 搜索时发现了该代码，但我没有运气让它工作。当我单击一个选项时会出现警报。如果我不移动鼠标并按回车键关闭警报，它就会消失。如果我用鼠标关闭，则会弹出第二个警报窗口。只是在选择周围移动鼠标偶尔会弹出一个警告框。我曾尝试直接针对这些选项，但收效甚微。如果我将鼠标悬停在某个选项上，如何弹出警报？

谢谢阅读！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-07T03:45:06.573

您可以使用该[`mouseenter`](http://api.jquery.com/mouseenter)事件。

而且您不必使用所有这些代码来检查元素是否为`option`.

只需使用[`.on()`](http://api.jquery.com/on)语法委托给`select`元素。

```
$(document).ready(function(event) {
    $('select').on('mouseenter','option',function(e) {
        alert('yeah');
        // this refers to the option so you can do this.value if you need..
    });
}); 
```

演示在[http://jsfiddle.net/AjfE8/](http://jsfiddle.net/AjfE8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T03:28:58.907

尝试鼠标悬停。它为我工作。仅当焦点来自选项列表（如鼠标悬停）时，悬停也有效。

```
function (event) {
$('select').mouseover(function(e) {
    var $target = $(e.target);
    if($target.is('option')) {
        alert('yeah!');
    };
})
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T03:34:20.310

你不需要在函数中说唱，我永远无法让它以这种方式工作。取出时效果很好。也使用[鼠标悬停](http://api.jquery.com/mouseover/)，因为在离开目标时会运行[悬停。](http://api.jquery.com/hover/)

```
$('option').mouseover(function(e) {
    var $target = $(e.target);
    if($target.is('option')) {
        console.log('yeah!');
    };
})​ 
```

小提琴看看它的工作。将其更改为控制台，这样您就不会收到垃圾邮件。[http://jsfiddle.net/HMDqb/](http://jsfiddle.net/HMDqb/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T03:33:57.140

您想要的是检测选项元素上的悬停事件，而不是选择：

```
$(document).ready( 

    function (event) {
    $('#optionList option').hover(function(e) {
        console.log(e.target);
    });
})​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-22T15:50:34.003

如果您想放松，我建议您选择定制的变体

*   捕获悬停事件
*   更改悬停颜色
*   “下拉”和“所有项目”视图的相同行为

另外你可以拥有

*   可调整大小的列表
*   在单选和多选模式之间单独切换
*   更个性化的 css-ing
*   选项项目的多行

只需查看随附的示例。

```
$(document).ready(function() {
  $('.custopt').addClass('liunsel');

  $(".custopt, .custcont").on("mouseover", function(e) {
    if ($(this).attr("id") == "crnk") {
      $("#ranks").css("display", "block")
    } else {
      $(this).addClass("lihover");
    }
  })

  $(".custopt, .custcont").on("mouseout", function(e) {
    if ($(this).attr("id") == "crnk") {
      $("#ranks").css("display", "none")
    } else {
      $(this).removeClass("lihover");
    }
  })

  $(".custopt").on("click", function(e) {
    $(".custopt").removeClass("lihover");
    if ($("#btsm").val() == "ssm") {
      //single select mode
      $(".custopt").removeClass("lisel");
      $(".custopt").addClass("liunsel");
      $(this).removeClass("liunsel");
      $(this).addClass("lisel");
    } else if ($("#btsm").val() == "msm") {
      //multiple select mode
      if ($(this).is(".lisel")) {
        $(this).addClass("liunsel");
        $(this).removeClass("lisel");
      } else {
        $(this).addClass("lisel");
        $(this).removeClass("liunsel");
      }
    }
    updCustHead();
  });

  $(".custbtn").on("click", function() {
    if ($(this).val() == "ssm") {
      $(this).val("msm");
      $(this).text("switch to single-select mode")
    } else {
      $(this).val("ssm");
      $(this).text("switch to multi-select mode")
      $(".custopt").removeClass("lisel");
      $(".custopt").addClass("liunsel");
    }
    updCustHead();
  });

  function updCustHead() {
    if ($("#btsm").val() == "ssm") {
      if ($(".lisel").length <= 0) {
        $("#hrnk").text("current selected option");
      } else {
        $("#hrnk").text($(".lisel").text());
      }
    } else {
      var numopt = +$(".lisel").length,
        allopt =  $(".custopt").length;
      $("#hrnk").text(numopt + " of " + allopt + " selected option" + (allopt > 1 || numopt === 0 ? 's' : ''));
    }
  }
});
```

```
body {
  text-align: center;
}

.lisel {
  background-color: yellow;
}

.liunsel {
  background-color: lightgray;
}

.lihover {
  background-color: coral;
}

.custopt {
  margin: .2em 0 .2em 0;
  padding: .1em .3em .1em .3em;
  text-align: left;
  font-size: .7em;
  border-radius: .4em;
}

.custlist,
.custhead {
  width: 100%;
  text-align: left;
  padding: .1em;
  border: LightSeaGreen solid .2em;
  border-radius: .4em;
  height: 4em;
  overflow-y: auto;
  resize: vertical;
  user-select: none;
}

.custlist {
  display: none;
  cursor: pointer;
}

.custhead {
  resize: none;
  height: 2.2em;
  font-size: .7em;
  padding: .1em .4em .1em .4em;
  margin-bottom: -.2em;
  width: 95%;
}

.custcont {
  width: 7em;
  padding: .5em 1em .6em .5em;
  /* border: blue solid .2em; */
  margin: 1em auto 1em auto;
}

.custbtn {
  font-size: .7em;
  width: 105%;
}

h3 {
  margin: 1em 0 .5em .3em;
  font-weight: bold;
  font-size: 1em;
}

ul {
  margin: 0;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

<h3>
  customized selectable, hoverable resizeable dropdown with multi-line, single-selection and multiple-selection support
</h3>
<div id="crnk" class="custcont">
  <div>
    <button id="btsm" class="custbtn" value="ssm">switch to multi-select mode</button>
  </div>
  <div id="hrnk" class="custhead">
    current selected option
  </div>
  <ul id="ranks" class="custlist">
    <li class="custopt">option one</li>
    <li class="custopt">option two</li>
    <li class="custopt">another third long option</li>
    <li class="custopt">another fourth long option</li>
  </ul>
</div>
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-18T15:03:05.900

我有同样的问题，但没有一个解决方案有效。

```
$("select").on('mouseenter','option',function(e) {
  $("#show-me").show();
});
$("select").on('mouseleave','option',function(e) {
  $("#show-me").hide();
});

$("option").mouseover(function(e) {
  var $target = $(e.target);
  if($target.is('option')) {
    alert('yeah!');
  };
}); 
```

这是我的jsfiddle [https://jsfiddle.net/ajg99wsm/](https://jsfiddle.net/ajg99wsm/)

# python - 计算列表中每个项目之间的相关性

> ID：13262654
> 
> 赞同：3
> 
> 时间：2012-11-07T03:17:18.690
> 
> 标签：python, correlation

我正在尝试计算列表中每个项目之间的 Pearson 相关性。我正在尝试获取数据 [0] 和数据 [1]、数据 [0] 和数据 [2] 以及数据 [1] 和数据 [2] 之间的相关性。

```
import scipy
from scipy import stats

data = [[1, 2, 4], [9, 5, 1], [8, 3, 3]]

def pearson(x, y):
    series1 = data[x]
    series2 = data[y]
    if x != y:
        return scipy.stats.pearsonr(series1, series2)

h = [pearson(x,y) for x,y in range(0, len(data))] 
```

这将返回错误`TypeError: 'int' object is not iterable`。`h`有人可以在这里解释错误吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T03:20:01.837

[range](http://docs.python.org/2/library/functions.html#range)将在您尝试使用它时返回一个 int 值列表，就像它返回一个元组一样。尝试[itertools.combinations](http://docs.python.org/2/library/itertools.html#itertools.combinations)代替：

```
import scipy
from scipy import stats
from itertools import combinations

data = [[1, 2, 4], [9, 5, 1], [8, 3, 3]]

def pearson(x, y):
    series1 = data[x]
    series2 = data[y]
    if x != y:
        return scipy.stats.pearsonr(series1, series2)

h = [pearson(x,y) for x,y in combinations(len(data), 2)] 
```

或者正如@Marius 建议的那样：

```
h = [stats.pearsonr(data[x], data[y]) for x,y in combinations(len(data), 2)] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T03:32:28.503

为什么不使用`numpy.corrcoef`

```
import numpy as np
data = [[1, 2, 4], [9, 5, 1], [8, 3, 3]] 
```

结果：

```
>>> np.corrcoef(data)
array([[ 1\.        , -0.98198051, -0.75592895],
       [-0.98198051,  1\.        ,  0.8660254 ],
       [-0.75592895,  0.8660254 ,  1\.        ]]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T03:36:20.130

range() 函数只会为每次迭代提供一个 int，并且不能将一个 int 分配给一对值。

如果您想遍历该范围内所有可能的整数对，您可以尝试

```
import itertools

h = [pearson(x,y) for x,y in itertools.product(range(len(data)), repeat=2)] 
```

这将把给定范围内的所有可能性组合在一个 2 个元素的元组中

请记住，使用您定义的函数，当 x==y 时，您将拥有 None 值。要解决这个问题，您可以使用：

```
import itertools

h = [pearson(x,y) for x,y in itertools.permutations(range(len(data)), 2)] 
```

# ruby-on-rails - Rails 3.1 在测试环境中设置主机

> ID：13262656
> 
> 赞同：4
> 
> 时间：2012-11-07T03:17:35.600
> 
> 标签：ruby-on-rails, rspec, config

`http://www.example.com`每当我`root_url`在测试中使用时，我都会得到。

它在开发中运行良好，我在 config/environments/development.rb 中有这个：

```
Rails.application.routes.default_url_options[:host]= 'localhost:3000' 
```

但是，添加它在 config/environments/test.rb 中不起作用。我应该添加什么以`localhost:3000`用作测试环境中的主机？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T03:39:39.817

测试依赖的代码`default_url_options`会导致各种问题，请参阅[此线程](http://rubyforge.org/pipermail/rspec-users/2012-January/021016.html)和此[问题](https://github.com/rspec/rspec-rails/issues/255)以获取示例。

我已经解决了这个问题，通过修补`ActionDispatch::Routing::RouteSet`测试来强制 rails 包含我想要的任何选项的默认值（在我的情况下`locale`）。有关详细信息，请参阅我在上面链接的[github 问题中的回答。](https://github.com/rspec/rspec-rails/issues/255#issuecomment-7858480)

要使用相同的方法覆盖该`host`选项：

```
class ActionDispatch::Routing::RouteSet
  def url_for_with_host_fix(options)
    url_for_without_host_fix(options.merge(:host => 'localhost:3000'))
  end

  alias_method_chain :url_for, :host_fix
end 
```

把它放在一个文件中`support`，应该可以解决问题。

# sql - 变量中的日期计算

> ID：13262657
> 
> 赞同：1
> 
> 时间：2012-11-07T03:17:45.473
> 
> 标签：sql, sql-server-2005

我正在尽我所能设置一个日期变量，以便稍后进行比较。我想要一些基本上说的东西：

如果当前日期小于 11，则日期为上个月的 10 号
如果当前月份的日期大于或等于 11，则日期为本月的 ​​10 号

日期为 11/6/2012 预期输出：

```
@PODate = 10/10/2012 
```

日期为 11/16/2012 预期输出：

```
@PODate = 11/10/2012 
```

目前我只有这个：

```
DECLARE @PODate as DATETIME
Set @PODate = Convert(varchar(8),GetDate(),1) 
```

任何提示或帮助将不胜感激。谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T08:35:36.493

尽量保持简单：

```
declare @PODate datetime
select @PODate = DATEADD(month,
   DATEDIFF(month,'20010110',CURRENT_TIMESTAMP) +
      CASE WHEN DATEPART(day,CURRENT_TIMESTAMP) <= 10 THEN -1 ELSE 0 END,
   '20010110') 
```

周围的`DATEADD`/`DATEDIFF`对用于将日期标准化为当月的 10 日。`CASE`然后，如果日期小于或等于 10 日，我们使用一个小表达式减去一个月。

* * *

无论您选择哪种解决方案，请尽量避免将其作为字符串操作的解决方案。SQL中相关错误的常见原因`datetime`是人们将日期视为字符串。适当地保留数据类型通常是防止这些问题的最佳方法。

诚然，我的解决方案中有 2 个字符串，但它们是固定不变的字符串（重要的是它们都是同一年和同一月，第二个是每月 10 号）并且在明确的格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T08:12:35.620

```
DECLARE @PODate date = '20121116'
SELECT CASE WHEN DATEPART(day, @PODate) < 11 THEN DATEADD(mm, DATEPART(mm, GETDATE()) - DATEPART(mm, @PODate) - 1, DATEADD(day, 10 - DATEPART(day, @PODate), @PODate))
                                             ELSE DATEADD(mm, DATEPART(mm, GETDATE()) - DATEPART(mm, @PODate), DATEADD(day, 10 - DATEPART(day, @PODate), @PODate)) END 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/d41d8/5914)上的演示[](http://sqlfiddle.com/#!3/d41d8/5914)

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T03:34:19.823

试试这个：[**SQL 小提琴**](http://sqlfiddle.com/#!3/d41d8/5896)

```
DECLARE 
    @PODate as DATETIME,
    @LastMonth as DateTime,
    @strDate as Varchar(50)

set @PODate = '11/16/2012'
set @LastMonth = DATEADD(MONTH, -1, @PODate)

if(DAY(@PODate) < 11)
   SET @strDate = CAST(MONTH(@LastMonth) AS VARCHAR)+'/10/'+CAST(YEAR(@LastMonth) AS VARCHAR)
else
   SET @strDate = CAST(MONTH(@PODate) AS VARCHAR)+'/10/'+CAST(YEAR(@PODate) AS VARCHAR)

Select CAST(@strDate AS DateTime) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T03:32:24.287

```
DECLARE @currDate DATE = dbo.GetDate()
DECLARE @day INT =  day(@currDate)
DECLARE @month INT 
DECLARE @year INT

DECLARE @PODate DATE

IF( @day >= 11)
BEGIN
    SET @month = month(@currDate)
    SET @year = year(@currDate)
END 
ELSE BEGIN
    SET @month =  month(dateadd(m,-1,@currDate))
    SET @year = year(dateadd(m,-1,@currDate))       
END

SET @PODate = convert(DATE,'10-' + convert(VARCHAR,@month) + '-' + convert(VARCHAR,@year))

PRINT    @PODate 
```

如果`@currDate = '11-jan-2013'`,`@PODate` 将是`'10-jan-2013'`, 如果`@currDate = '07-jan-2013'`,`@PODate`将是`'10-Dec-2012'`**

# c++ - Opencv轮廓一维离散傅里叶变换

> ID：13262661
> 
> 赞同：1
> 
> 时间：2012-11-07T03:18:05.403
> 
> 标签：c++, opencv

傅里叶描述符发生了一个问题：如果一个轮廓有 K 个点，那么让

s（k）= x（k）＋i y（k），k = 0,1，...,K-1。

s(k) 离散傅里叶变换是

a(u)=∑s（k）*e^(-i2πuk/K), k = 0,1，...,K-1。

我想用 a(p) ,p=0,1...,P 反转轮廓，P 小于 K。但是在 Opencv 中使用 dft 函数时：

dft（输入数组，输出数组，DFT_INVERSE，0）；

输出数组与输入数组大小相同，如何获得具有 P 参数 a(p) 的 K 点轮廓？谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-12T02:47:14.170

实际上输出数组大小应该等于输入数组大小，修改DFT的数学模型[https://ccrma.stanford.edu/~jos/mdft/Mathematics_DFT.html](https://ccrma.stanford.edu/~jos/mdft/Mathematics_DFT.html)

# java - 使用jackson将java对象转换为json字符串时重复json属性

> ID：13262662
> 
> 赞同：14
> 
> 时间：2012-11-07T03:18:18.033
> 
> 标签：java, json, properties, duplicates, jackson

我有 Pojo 对象，使用 getAsJson 函数返回该对象的 Json 字符串。我使用 JsonProperty 在这个对象中定义 json 属性。使用 ObjectMapper 的 writeValueAsString 为该对象写入 json 字符串。

```
import org.codehaus.jackson.JsonGenerationException;
import org.codehaus.jackson.annotate.JsonIgnore;
import org.codehaus.jackson.annotate.JsonIgnoreProperties;
import org.codehaus.jackson.annotate.JsonProperty;
import org.codehaus.jackson.map.JsonMappingException;
import org.codehaus.jackson.map.ObjectMapper;

@JsonIgnoreProperties(ignoreUnknown=true)
public class LogLikeArticleDetail extends BaseObject {
    private static final long serialVersionUID = -2018373118257019033L;
    @JsonProperty("LikeArticleGUId")
    private String likeArticleGUId;
    @JsonProperty("UserId")
    private String userID;
    @JsonProperty("UserName")
    private String userName;
    @JsonProperty("IP") 
    private String ip;
    @JsonProperty("OS") 
    private String os;
    @JsonProperty("UserAgent") 
    private String userAgent;
    @JsonProperty("WebsiteCode") 
    private String websiteCode;
    @JsonProperty("ArticleId") 
    private String articleID;
    @JsonProperty("ATitle") 
    private String aTitle;
    @JsonProperty("CateAlias") 
    private String cateAlias;
    @JsonProperty("LikeStatus") 
    private String likeStatus;
    @JsonProperty("TimeStamp") 
    private Date timeStamp;
        //get, set....
        //....
        @JsonIgnore
    public String getAsJSON() throws JsonGenerationException, JsonMappingException,    IOException{
        ObjectMapper mapper = new ObjectMapper();
        return mapper.writeValueAsString(this) ; 
    }
} 
```

现在，我得到了结果

```
public static void main(String[] args) throws JsonGenerationException, JsonMappingException, IOException {
        Calendar calendar =  Calendar.getInstance();
        LogLikeArticleDetail logLikeArticle = new LogLikeArticleDetail("1","2","3","4","5","6","7","8","what thing \"nothing\" show","10","11",calendar.getTime());
        System.out.println(logLikeArticle.getAsJSON());
    } 
```

但结果的重复属性：

```
{"LikeArticleGUId":"1","UserId":"2","UserName":"3","IP":"4","OS":"5","UserAgent":"6","WebsiteCode":"7","ArticleId":"8","ATitle":"what thing \"nothing\" show","CateAlias":"10","LikeStatus":"11","TimeStamp":1352256727062,"_likeArticleGUId":"1","websiteCode":"7","likeStatus":"11","userID":"2","userName":"3","ip":"4","os":"5","userAgent":"6","articleID":"8","aTitle":"what thing \"nothing\" show","cateAlias":"10","timeStamp":1352256727062} 
```

告诉我这个问题发生了什么？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-09T07:54:31.317

所以我确实遵循： [如何指定杰克逊只使用字段 - 最好是全局](https://stackoverflow.com/questions/7105745/how-to-specify-jackson-to-only-use-fields-preferably-globally)

我加

```
@JsonAutoDetect(fieldVisibility = Visibility.ANY, getterVisibility = Visibility.NONE, setterVisibility = Visibility.NONE) 
```

前

```
public class LogLikeArticleDetail extends BaseObject 
```

和我想要的结果。

那么可以在 getAsJson() 函数中解决这个问题，例如：

```
ObjectMapper mapper  = new ObjectMapper();
mapper.setVisibilityChecker(mapper.getSerializationConfig().getDefaultVisibilityChecker()
                .withFieldVisibility(JsonAutoDetect.Visibility.ANY)
                .withGetterVisibility(JsonAutoDetect.Visibility.NONE)
                .withSetterVisibility(JsonAutoDetect.Visibility.NONE)
                .withCreatorVisibility(JsonAutoDetect.Visibility.NONE));
return mapper.writeValueAsString(this) ; 
```

感谢@Sean Carpenter 的问题和上面链接中的@kmb385 回答。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-11-28T11:11:39.497

您也可以使用注释为每个 POJO 执行此操作。将此字符串添加到您不希望自动检测的类的顶部：

> @JsonAutoDetect(fieldVisibility=JsonAutoDetect.Visibility.ANY, getterVisibility=JsonAutoDetect.Visibility.NONE, setterVisibility=JsonAutoDetect.Visibility.NONE, creatorVisibility=JsonAutoDetect.Visibility.NONE)

例如：

```
@JsonAutoDetect(fieldVisibility=JsonAutoDetect.Visibility.ANY, getterVisibility=JsonAutoDetect.Visibility.NONE,
        setterVisibility=JsonAutoDetect.Visibility.NONE, creatorVisibility=JsonAutoDetect.Visibility.NONE)
class Play {
    @JsonProperty("Name")
    private String name; 

    @JsonProperty("NickName")
    private String nickName; 

    public Play(){

    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getNickName() {
        return nickName;
    }

    public void setNickName(String nickName) {
        this.nickName = nickName;
    }
} 
```

这将返回我定义的属性，而不是自动检测字段名称并将它们添加到我返回的 JSON 结果中。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-08-29T11:35:50.283

我们也可以直接在 getter 上使用 @JsonProperty("Name") 注释来避免重复。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-05-07T07:13:59.073

这实际上不是问题。所以，这里发生的事情是杰克逊库无法自动匹配这些字段（没有大小写统一的假设），所以你最终得到的属性是你期望的两倍。

解决此问题的简单方法是向 getter/setter 中添加注释（两者都可以。）

```
@JsonProperty("UserName")
public String getUserName() {
        return this.userName;
} 
```

Jackson Github repo 中也提出了这个问题。您可以在以下链接中找到答案。

[https://github.com/FasterXML/jackson-databind/issues/1609](https://github.com/FasterXML/jackson-databind/issues/1609)

# forms - 仅当值为空时才聚焦文本框

> ID：13262665
> 
> 赞同：0
> 
> 时间：2012-11-07T03:18:42.223
> 
> 标签：forms, html, textbox, focus, autofocus

我目前正在将 html5 自动对焦用于登录表单。我正在寻找一个函数，它只会在用户名文本框为空时自动聚焦，如果不为空则自动聚焦在下一个文本框上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T03:49:46.363

使用下面的 HTML

```
<input name="username" value="a" autofocus="autofocus">
<input name="password" type="password">​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

你可以用 jQuery 做这样的事情

```
var $username = $('[name="username"]');
var $password = $('[name="password"]');
if($username.val()​​​​​​​​​​​​​​​​​​​​​.trim().length > 0){
    $password.focus();
}​ 
```

应该就是这么简单。确保 Javascript 位于页面底部，或者您可以使用 $(document).ready() 函数确保在呈现 HTML 后运行 Javascript。

* * *

基于附加信息的更多详细信息

```
<asp:TextBox ID="UserName" runat="server" autofocus="true" required="true"></asp:TextBox> 
```

它不适用于您的情况的原因是因为您没有名为“名称”的属性。我认为您可能应该阅读一些有关[jQuery 选择器](http://api.jquery.com/category/selectors/)的信息以了解原因。如果您使用 ID，那么您就是这样做的。

```
var $username = $('#UserName');
var $password = $('#password');
if($username.val()​​​​​​​​​​​​​​​​​​​​​.trim().length > 0){
    $password.focus();
}​ 
```

当然，您现在必须匹配密码选择器，以便它实际上会选择密码输入来设置焦点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T03:57:55.577

在页面中搜索输入字段，并强制将焦点放在第一个空字段上。我们可能希望将字段限制为给定的表单，并且可能还添加 textareas - 不过我会把它留给你 - 没什么太难的。

```
var inputs = document.getElementsByTagName('input'),
    i = -1, I = inputs.length,
    curr;

for (; ++i < I;) {
    curr = inputs[i];
    if ( !curr.value.length ) {
        curr.focus();
        break;
    }
}​ 
```

# javascript - Ctrl+单击带有单击处理程序的链接

> ID：13262669
> 
> 赞同：7
> 
> 时间：2012-11-07T03:19:30.187
> 
> 标签：javascript, html, browser, hyperlink

我有一个链接（锚点），它附加了一个 href 以导航到特定的 URL，例如“www.bla.com”。

```
<a href='http://www.bla.com' /> 
```

我还有一个`click`附加到链接的处理程序，它执行一些操作，然后在同一窗口中打开一个 html 视图。一切都运行良好。

但是，当用户使用“ctrl+click”在新选项卡/窗口中打开链接时，单击处理程序似乎优先并在同一窗口中打开 html 视图。但我想保留“ctrl+click”行为并允许用户在新选项卡/窗口中打开链接（就像普通链接一样）。我怎么能那样做？

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-07T03:55:01.927

```
function process(e){
   var evt = e ? e:window.event;
   if(evt.ctrlKey)
      alert("ctrlClicked");
}​ 
```

如果按下控制键，evt.ctrlKey 将返回 true，您可以在“if”块中编写您的条件，我仅针对 chrome 和 ff 进行了测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T04:45:15.127

也许是这样的？

```
function onclick(e){
   var event = e ? e:window.event;
   this.target = event.ctrlKey?"_blank":"_self";
}​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T03:42:45.050

如果在单击发生时按下了控制键（或等效键） ，则关联的[单击事件对象](http://www.w3.org/TR/DOM-Level-3-Events/#event-type-click)将其`ctrlKey`属性设置为。`true`检查事件对象，如果控制键被按下，不要做“HTML 视图”的事情。

```
<a href="#" onclick="alert(event.ctrlKey);">Click me!</a> 
```

但是，如果用户以其他方式激活链接，您可能会或可能不会收到点击事件。

例如

1.  右键 -> “在新标签页/窗口中打开” - 无点击事件（Firefox、IE）
2.  选项卡聚焦链接，按回车 - 调度点击事件（Firefox，IE）

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-11-07T03:25:42.227

```
<a target="_blank" href='http://www.bla.com' /> 
```

将 target="_blank" 添加到锚标记中。

# xcode - Xcode Subversion Control 无法提交任何新添加的物理文件/文件夹

> ID：13262670
> 
> 赞同：1
> 
> 时间：2012-11-07T03:19:35.720
> 
> 标签：xcode, svn

我在项目的物理文件夹中物理地创建了一个新文件夹。随后，我将新文件夹拖放到我的 xcode 项目中。

在我将新文件夹添加到我的 xcode 项目后，只有项目文件反映了更改，但新文件夹旁边没有任何“A”图标。因此我也不能将物理文件夹提交到我的 SVN 中。

这有什么线索吗？

# css - 宽度不适用于 iE 中的旋转

> ID：13262671
> 
> 赞同：0
> 
> 时间：2012-11-07T03:19:58.147
> 
> 标签：css, internet-explorer, rotation, width

我有一些表格，看起来像这样（在 Chrome、Opera、FF 中）：
![在此处输入图像描述](../Images/f37239c05fb0771ad6c3094f11e6c17b.png)

但是 IE (7,8,9) 浏览器显示这个表格是这样的：
![IE浏览器](../Images/58541ae8fdccee3ba2038df23d1ccfde.png)

**问题：如何调整列宽？**

我有两个 css 类：对于 td 标签：

```
.td__vertical{
         text-align:center;
         vertical-align:bottom;
         border:  1px double  #8EB340 ;
         font-size:11px; 
         color:#666; 
         background-color: #F0F4E7; 
         padding: 0px 0px 20px 0px;
         margin: 0px 0px 0px 0px;
         width:30px;
} 
```

对于 div，位于 td 标签内：

```
.rotated{
        transform: rotate(-90deg); 
        -webkit-transform: rotate(-90deg); 
        -moz-transform: rotate(-90deg);
        -o-transform-origin:      0 0;
        -o-transform: rotate(-90deg);
        filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=3);
        -ms-transform: rotate(-90deg);
        white-space: nowrap; 
        width: 30px;
} 
```

所以专栏是这样描述的：

```
<td class="td__vertical"><div class="rotated" >Column2 Column2 Col..</div></td> 
```

Chrome、Opera、FF 对“宽度：30px;”做出反应 在“旋转”类和“td__vertical”中的“宽度”无关紧要。但是 IE 没有使用其中的任何一个。旋转通过“矩阵”具有相同的效果。

**UPD：**我探索了一下，列宽就是文字的宽度，也就是文字在未旋转状态下的宽度。那么，如何关闭自动调整列宽？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T04:24:50.493

如果您不关心 IE 中的文本从上到下读取，那么您可以使用书写模式：

`-ms-writing-mode: tb-lr;`

这相当于旋转`90degs`，无法模拟`-90degs`

当然，您需要删除`filter: progid`and `ms-transform`。

[http://msdn.microsoft.com/en-us/library/ie/ms531187(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ie/ms531187(v=vs.85).aspx)

# perl-module - 如何在 Raku 中包含文件

> ID：13262675
> 
> 赞同：15
> 
> 时间：2012-11-07T03:20:25.973
> 
> 标签：perl-module, raku

我有两个 Raku 文件：

你好.p6：

```
sub hello
{
    say 'hello';
} 
```

和 main.p6：

```
require 'hello.p6';

hello(); 
```

但不要工作。如何在主脚本中包含第一个文件？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-17T11:26:37.530

仅作记录，正确的解决方案是使用模块：

文件 Hello.pm6

```
 module Hello;
 sub hello() is export {
     say 'hello';
 } 
```

文件你好.p6：

```
 use v6;
 use lib '.'; # to search for Hello.pm6 in the current dir
 use Hello;
 hello; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-07T07:34:57.757

在 Rakudo 中使用显式文件语法和显式导出列表似乎对我有用：

主.p6：

```
require Hello:file('Hello.p6') <hello>;

hello(); 
```

你好.p6：

```
sub hello {
    say 'hello';
} 
```

来源： http: [//perlcabal.org/syn/S11.html#Runtime_Importation](http://perlcabal.org/syn/S11.html#Runtime_Importation)

# javascript - 使用弹出倒计时重定向到 MVC 中的操作

> ID：13262677
> 
> 赞同：0
> 
> 时间：2012-11-07T03:20:49.793
> 
> 标签：javascript, jquery, asp.net-mvc-3

我有一个现有的 mvc3 应用程序，我正在添加更多内容。我想在一个视图中发布信息并让应用程序进入一个摘要页面，有一个倒计时到 0 的对话框，如果用户在 25 秒后没有“提交”表单，自动-重定向到我的控制器中的一个动作..

我可以使用摘要视图顶部的这一行来刷新要发生的操作。

```
<meta http-equiv="refresh" content="25;URL=@(Url.Action("CancelandLogoff", "Account"))" /> 
```

但我也想要弹出窗口..

有人可以告诉我如何做到这一点吗？

谢谢！大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T03:44:40.850

你为什么不在你的视野中使用 javascript 和 jQuery。这是您可以执行的某种操作：

将以下元素放在您想要的位置：

```
<div id="dCountDown"></div> 
```

下面是javascript：

```
var countDownVal = 25;
$('#dCountDown').html(countDownVal);
var timer1 = setInterval(function(){myTimer()},1000);
function myTimer()
{
   countDownVal--;
   $('#dCountDown').html(countDownVal);
   if (countDownVal == 0)
   {
      clearInterval(timer1); // this thing can be here, or not, it's OK
      window.location.replace("/CancelandLogoff/Account"); // or whatever address you want
   }
} 
```

希望这会帮助你。-韩-

# windows - 如何调用已经运行的 Windows 服务？

> ID：13262686
> 
> 赞同：1
> 
> 时间：2012-11-07T03:21:59.090
> 
> 标签：windows, c#-4.0, service

无论如何调用已经运行的 Windows 服务或获取信息的进程？我的目标是找出我的 Windows 服务是无限循环还是死锁，并查看它是否响应。所以我希望能够将另一个程序的参数传递给 Windows 服务，并希望它返回一个字符串或数字。这可能吗？我可以更改 Windows 服务以适应这种情况。我在想一个事件或什么。

注意：我不应该让服务写入文件或数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T03:28:17.287

您可以在 Windows 服务中托管 WCF 服务，您可以调用该服务来获取状态信息。

这里有几个关于这样做的链接：

[我可以在 Windows 服务中托管 WCF 服务吗？](https://stackoverflow.com/questions/5267307/can-i-host-a-wcf-service-in-a-windows-service)

[如何：在托管 Windows 服务中托管 WCF 服务](http://msdn.microsoft.com/en-us/library/ms733069.aspx)

# c - 从 C 中的布尔值设置位掩码的快速方法

> ID：13262688
> 
> 赞同：4
> 
> 时间：2012-11-07T03:23:08.793
> 
> 标签：c, bitwise-operators, bitmask

执行检查并设置/清除标志是很常见的，例如：

```
if (some_test) {
   flag |= SOME_FLAG;
}
else {
   flag &= ~SOME_FLAG;
} 
```

到目前为止我发现的一个方便的方法是......

```
flag = (some_test) ? (flag | SOME_FLAG) : (flag & ~SOME_FLAG); 
```

这可以做成一个宏并且没问题，但是是否有一些*小技巧*可以避免两次引用标志？

*`flag`（以防导致开销的多个实例化*） 。

我正在寻找的示例（如果 C 可以对运算符进行三元运算）是......

```
flag ((some_test) ? (|=) : (&= ~) SOME_FLAG; 
```

*上面的例子只是为了描述我正在寻找的东西，当然它不会以目前的形式工作。*

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-07T03:26:58.877

```
flag |= SOME_FLAG 
```

是一个表达式，所以你可以使用宏

```
#define SET_FLAG(flag, some_test) \
    ((some_test) ? ((flag) |= SOME_FLAG) : ((flag) &= ~SOME_FLAG)) 
```

它只计算`flag`一次，当你使用它时，你只需要输入`flag`一次。

```
SET_FLAG(a->b->c->d, test); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T03:31:35.833

我知道您不想两次访问标志。但你应该确定这就是成本所在。通常，条件跳转更昂贵。在我使用的最后一个嵌入式处理器上，最快的代码应该是这样的：

```
 flag &= ~(SOME_FLAG);
 flag |= (some_test!=0) * SOME_FLAG; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T03:39:09.843

如果你想定义一个宏并让它避免两次评估掩码，那么你可以这样做：

```
#define SETT(FLAG, MASK_T, MASK, TEST) \
do {\
  MASK_T mask = (MASK);\
  FLAG &= ~mask;\
  FLAG |= ((TEST) != 0) * mask;\
}\
while(false)

#define SET(FLAG, MASK, TEST) SETT(FLAG, unsigned, MASK, TEST) 
```

# c++ - 链接后剥离共享库是否安全？

> ID：13262694
> 
> 赞同：8
> 
> 时间：2012-11-07T03:23:42.130
> 
> 标签：c++, shared-libraries, static-libraries, strip

假设我得到了`lib.so`，我编译了二进制文件`mySoft`并将其链接到`lib.so`.

在这一点上，考虑到一切都按预期工作，拿走`lib.so`和剥离它是否安全`strip -s lib.so`？

需要明确的是，我对将其他二进制文件链接到我的`lib.so`after`mySoft`正确生成不感兴趣，我只对继续`mySoft`工作并获得一些磁盘空间感兴趣，并且可能在性能方面有一点优势。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-07T03:26:09.783

是的，它是安全的。`strip`只删除不需要的符号（因为它们已经被链接）。这些符号对于调试很有用，但它们永远不会仅仅用于执行代码。

# mod-rewrite - 使用 mod_rewrite 将不存在的子域重定向到主页

> ID：13262703
> 
> 赞同：1
> 
> 时间：2012-11-07T03:24:46.013
> 
> 标签：mod-rewrite, subdomain

我已经在整个网站和网络上进行了搜索，但我仍然无法做到这一点。我有很多这样的 URL：[http://archives.cancunandrivieramaya.com/archives/cancun.cgi/md/read/id/XXXX](http://archives.cancunandrivieramaya.com/archives/cancun.cgi/md/read/id/XXXX)我想重定向到主页[http://www.cancunandrivieramaya.com/](http://www.cancunandrivieramaya.com/)。子域不再存在。如何编写 mod-rewrite 以将末尾带有通配符的子域重定向到主页？这是100个不起作用的之一:(

```
RewriteCond %{HTTP_HOST} !^www\.cancunandrivieramaya\.com [NC]
RewriteCond %{HTTP_HOST} ^archives\.cancunandrivieramaya\.com([a-z0-9]+)\
RewriteRule (.*) http://www.cancunandrivieramaya.com/[L,QSA] 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T02:18:33.387

我知道了！感谢 Altaf Khatri 的这篇文章[http://www.altafkhatri.com/Technical/Configure/How-to-publish-or-host-subdomain-on-winhostcom/Solution-resolution](http://www.altafkhatri.com/Technical/Configure/How-to-publish-or-host-subdomain-on-winhostcom/Solution-resolution)我能够一步一步地跟随他在 WinHost 上设置子域的步骤说明，然后我将此规则添加到 web.config 文件中：

```
<rule name="archive redirect" enabled="true" stopProcessing="true">
          <match url="(.*)" />
          <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
            <add input="{HTTP_HOST}" pattern="^www\.archives\.cancunandrivieramaya\.com$" />
          </conditions>
          <action type="Redirect" url="http://www.cancunandrivieramaya.com/" />
        </rule>

        <rule name="archives 2" enabled="true" stopProcessing="true">
          <match url="(.*)" />
          <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
            <add input="{HTTP_HOST}" pattern="^(www\.)?archives\.cancunandrivieramaya\.com$" />
            <add input="{PATH_INFO}" pattern="^/archives/($|/)" negate="true" />
          </conditions>
           <action type="Redirect" url="http://www.cancunandrivieramaya.com/" />
        </rule> 
```

完美运行！

# google-apps-script - Google Apps 脚本 jquery 自动完成不显示 输入字符时的列表

> ID：13262711
> 
> 赞同：0
> 
> 时间：2012-11-07T03:26:14.967
> 
> 标签：google-apps-script

我正在使用 Google Apps Script HtmlService 和 jquery 处理一个相当复杂的表单。我正在尝试使用 jquery 的自动完成功能，它的工作原理有所不同。如果我开始输入“ja”，然后使用向下箭头键，它将滚动浏览结果。然而，它应该做的是像在本地一样动态地在列表中显示它们。控制台中有错误，但不知道该怎么做：

错误 4089105213-maestro_htmlapp_bin_maestro_htmlapp.js:55 pl 4089105213-maestro_htmlapp_bin_maestro_htmlapp.js:55

```
<!DOCTYPE html>
<html>
<head>
<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
<script src="http://code.jquery.com/jquery-1.8.2.js"></script>
<script src="http://code.jquery.com/ui/1.8.23/jquery-ui.js"></script>
<script>
$(function() {
    var availableTags = [
      "ActionScript",
      "AppleScript",
      "Asp",
      "BASIC",
      "C",
      "C++",
      "Clojure",
      "COBOL",
      "ColdFusion",
      "Erlang",
      "Fortran",
      "Groovy",
      "Haskell",
      "Java",
      "JavaScript",
      "Lisp",
      "Perl",
      "PHP",
      "Python",
      "Ruby",
      "Scala",
      "Scheme"
    ];
    $( "#tags" ).autocomplete({
      source: availableTags
    });
  });
  </script>
</head>
<body>

<div class="demo">
<div class="ui-widget">
  <label for="tags">Tags: </label>
  <input id="tags" />
</div>
</div><!-- End demo -->

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-15T19:06:29.087

如果您使用 HTTPS 而不是 HTTP 加载 Jquery 资源（Javascript 和 CSS 文件），则它可以在 google 应用程序脚本中运行。

```
<link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
<script src="https://code.jquery.com/jquery-1.8.2.js"></script>
<script src="https://code.jquery.com/ui/1.8.23/jquery-ui.js"></script> 
```

# jquery - 将宽度和高度设置为 jQuery JQGrid 的最佳解决方案是什么？

> ID：13262714
> 
> 赞同：2
> 
> 时间：2012-11-07T03:26:24.443
> 
> 标签：jquery, jqgrid

我在使用 jQuery 的 JQGrid 时遇到了一个奇怪的问题，以下片段代码用于创建它：

```
grid= jQuery("#grid_id").jqGrid({
    data : response.list,
    datatype : "local",
    colNames : columnNames,
    colModel : [ {....}],                       
    rowNum : 30,
    width : $("#grid_id").width(),
    height: $("#grid_page").height(),
    rowList : [ 30, 100, 150 ],
    pager : "#grid_page",
    sortname : 'name',
    viewrecords : true,
    sortorder : "desc",
    shrinkToFit: false,
    rownumbers: true,
    altRows:true,
    caption: "Sample Grid"
}); 
```

此问题有 3 个症状：

1、这个网格有超过35列，每列的宽度大于100PX，这个网格的宽度固定在1000PX，所以网格显示一个滚动条供用户查看所有列。（如您所见，我将网格宽度和高度设置为固定值）

2、这个格子第一次很好用，但是第二次或以后更新时，它的标题和内容都不见了。

3，我试图评论宽度设置，换句话说，我没有给这个网格设置宽度，无论是第一次还是第二次都可以，但是网格的宽度是所有的总和列（3500PX），它扩展了整个页面丑陋。

```
grid= jQuery("#grid_id").jqGrid({
    data : response.list,
    datatype : "local",
    colNames : columnNames,
    colModel : [ {....}],                       
    rowNum : 30,
    // width : $("#grid_id").width(), COMMENT it.
    height: $("#grid_page").height(),
    rowList : [ 30, 100, 150 ],
    pager : "#grid_page",
    sortname : 'name',
    viewrecords : true,
    sortorder : "desc",
    shrinkToFit: false,
    rownumbers: true,
    altRows:true,
    caption: "Sample Grid"
}); 
```

所以我想问的问题是：将宽度和高度设置为 jQuery JQGrid 的最佳解决方案是什么？应该如何将它们设置到我的网格中？

简单地说，如何让一个有许多列的网格与 X 滚动条一起使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T08:55:28.900

经过多次尝试，我解决了这个问题。就我而言，如果网格需要有固定的宽度和高度，并且当它的列太多时显示水平滚动条，就像下面设置jqGrid的方法一样：

```
grid= jQuery("#grid_id").jqGrid({
    width : 1000,
    height: 800,
    shrinkToFit: false,
}); 
```

确保网格正常工作的最重要的事情是您应该将 THML 配置 'align="center"' 添加到网格附加的表中。

```
<table id="grid_id" align="center"></table> 
```

我不知道为什么这可以解决它，但无论如何，它有效。

# objective-c - 为什么这个 OCMock 验证失败？

> ID：13262715
> 
> 赞同：0
> 
> 时间：2012-11-07T03:26:33.247
> 
> 标签：objective-c, ios, ocmock

不确定我是否正确使用了 OCMocks，或者是因为我使用的是 cocoapods 版本而不是 .lib 文件。

这是测试

```
#import "MWViewControllerTests.h"
#import "MWViewController.h"
#import "OCMockObject.h"
#import "MWGoogleTrends.h"
#import "OCMockRecorder.h"

@implementation MWViewControllerTests {

    MWViewController *vcSUT;
    id googleTrends;
    NSArray *trends;
}

- (void)setUp
{
    [super setUp];
    vcSUT = [[MWViewController alloc] init];
    googleTrends = [OCMockObject mockForClass:[MWGoogleTrends class]];
    vcSUT.googleTrends = googleTrends;
    trends = [[NSArray alloc] initWithObjects:@"trend1", @"trend2", @"trend3", nil];
    [[[googleTrends stub] andReturn:trends] getLatestTrends];
}

- (void)tearDown
{
    // Tear-down code here.
    [super tearDown];
}

- (void)test_ViewDidLoadShouldCallGoogleTrends_getLatestTrends
{
    [[googleTrends expect] getLatestTrends];
    [vcSUT view];  // calls loadView
    [googleTrends verify];
} 
```

@结尾

这是VC：

```
@implementation MWViewController {

    NSArray *_trends;
}

@synthesize googleTrends;

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    _trends = [self.googleTrends getLatestTrends];
} 
```

googleTrends 当然是标题中的一个属性：

```
 @property (nonatomic, strong) MWGoogleTrends *googleTrends; 
```

我会想象它正在被调用，因为它下面的以下测试正在通过：

```
- (void)test_numRowsInTableViewShouldBeNumOfTrendsReturnedFromGetLatestTrends {

    [vcSUT view];
    int numSections = [vcSUT tableView:nil numberOfRowsInSection:0];
    STAssertEquals(numSections, 3, @"should be 3 sections");
}

- (void)test_cellForRowAtIndexPath_should_return_cell_with_trendName_as_text {

    [vcSUT view];
    UITableViewCell *cell1 = [vcSUT tableView:nil cellForRowAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:0]];
    UITableViewCell *cell2 = [vcSUT tableView:nil cellForRowAtIndexPath:[NSIndexPath indexPathForRow:1 inSection:1]];
    UITableViewCell *cell3 = [vcSUT tableView:nil cellForRowAtIndexPath:[NSIndexPath indexPathForRow:2 inSection:2]];

    STAssertEquals(cell1.textLabel.text, @"trend1", @"cell text should be correct trend name");
    STAssertEquals(cell2.textLabel.text, @"trend2", @"cell text should be correct trend name");
    STAssertEquals(cell3.textLabel.text, @"trend3", @"cell text should be correct trend name");
}

@end 
```

也从编译器得到这个警告，不确定它是否以任何方式相关：

```
ld: warning: directory not found for option '-L/Users/markw/Projects/XCode/OReillyCasts/MWGoogleTrends/Pods/build/Release-iphoneos' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T20:45:02.557

是的，问题在于存根方法。

我必须只为需要存根的测试方法在模拟上存根该方法，当我从设置中取出存根时，期望通过了。

# javascript - Magento 缓存错误

> ID：13262716
> 
> 赞同：1
> 
> 时间：2012-11-07T03:26:52.720
> 
> 标签：javascript, magento, merge, http-status-code-404

我正在寻找解决我今天下午偶然发现的一个奇怪问题的方法。

我的类别页面开始为 media/js 文件（我相信是 Magento 生成的合并 js 文件之一）抛出 404 not found 错误。这自然会导致类别页面在一些地方出现故障，包括在页面顶部放置一个无法解释的数字并破坏导航。这是在行动：[http](http://www.vapetropolis.ca/herb-grinders) ://www.vapetropolis.ca/herb-grinders 。

我尝试在后端禁用 js 和 css 合并。我还尝试过刷新 magento 缓存、刷新缓存存储、刷新 javascript/css 缓存以及手动删除 var/cache 中的所有条目。在所有这些刷新之后，media/js 目录是空的。但是，类别页面仍在寻找相同的文件（所有其他页面仍然可以正常工作）。

值得注意的是，我本地机器上的相同站点运行良好，并且包含生产站点找不到的文件。

**编辑**：将 js 文件从本地投放到生产站点并没有帮助 - 类别页面上仍然存在多个 js 错误。

我猜这个问题与 Magento 混乱的合并功能有关。

**编辑（2）**：问题与缓存有关（谢谢[runamok](/users/699493/runamok)）。将查询字符串添加到 URL 时，页面可以正常工作。所以一定是magento的缓存以某种方式提供了一个错误的页面。

我已经尝试禁用所有缓存，以及在后端禁用预编译，但行为保持不变

**编辑（3）**：仍然需要帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T04:56:10.500

看起来您可能已根据现有的此 url 解决了问题。 [http://www.vapetropolis.ca/media/js/a87bf7cc5dcd7a07e58a41c1063e1f4a.js](http://www.vapetropolis.ca/media/js/a87bf7cc5dcd7a07e58a41c1063e1f4a.js)

一般来说，这是因为 media/js 文件的权限不正确。显然 chmod 777 是设置它的最简单方法，但理想情况下，您应该确保该目录归运行 apache 的用户所有。

此外，如果您使用某种整页缓存，您可能也需要刷新它。页面期望该文件已经存在，因此它不会尝试重新生成它。

最后，您是否使用任何类型的服务，例如 cloudflare 或 varnish 或 cdn 或其他任何可能在短时间内缓存 404 的服务？

# android - 检测区域中存在的所有蓝牙设备，包括已配对的设备

> ID：13262718
> 
> 赞同：0
> 
> 时间：2012-11-07T03:27:29.493
> 
> 标签：android, android-emulator, bluetooth, android-sdk-2.1

我愿意生成一个列表，其中包含手机附近所有启用蓝牙的设备的列表。我的代码发现了未配对的设备。有没有办法检索也配对的设备（如果它们落在附近）

发现附近所有设备的代码如下

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_bluetooth_connection);

    final TextView tv=(TextView)findViewById(R.id.textView1);
    BluetoothAdapter mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();

    final BroadcastReceiver mReceiver = new BroadcastReceiver() 
    { 
        @Override
        public void onReceive(Context context, Intent intent) 
        {
            String action = intent.getAction(); 
            // When discovery finds a device 
            if (BluetoothDevice.ACTION_FOUND.equals(action)) 
            {
            // Get the BluetoothDevice object from the Intent 
            BluetoothDevice device = intent.getParcelableExtra(
            BluetoothDevice.EXTRA_DEVICE);
            tv.append(device.getName() + "-"+ device.getAddress()+"\n"); 
            }
        }

    };
    String aDiscoverable = BluetoothAdapter.ACTION_REQUEST_DISCOVERABLE;
    startActivityForResult(new Intent(aDiscoverable),DISCOVERY_REQUEST);
    IntentFilter filter = new IntentFilter(BluetoothDevice.ACTION_FOUND); 
    registerReceiver(mReceiver, filter); 
    mBluetoothAdapter.startDiscovery();
} 
```

任何人都可以帮助我添加甚至发现配对设备的代码。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T04:40:03.483

```
Set<BluetoothDevice> devices = adapter.getBondedDevices();
    for (BluetoothDevice device : devices) {
      tv.append(device);
    } 
```

我没有测试过这个。它来自[本教程](http://marakana.com/forums/android/examples/50.html)。

# asp.net-mvc - 当 HTTP 请求无效时，MVC4 WebAPI 的正确返回值是什么

> ID：13262719
> 
> 赞同：0
> 
> 时间：2012-11-07T03:27:32.287
> 
> 标签：asp.net-mvc, json, http, asp.net-web-api

我正在使用 ASP.NET MVC4 WebAPI 来公开 json 服务。如果收到 HTTP GET 请求但 URL 无效（例如无效 id），我应该返回什么作为最佳实践？我试图返回 null 并且响应是一个空字符串，这是处理这个问题的好方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T10:59:54.657

[从 ASP.NET Web Api 开始，这](http://www.asp.net/web-api/overview/creating-web-apis/creating-a-web-api-that-supports-crud-operations)是一本非常好的读物。

据我了解你的问题，你应该使用这个

```
public void GetProduct(int id)
{
    if (_service.GetProduct(id) == null)
    {
        throw new HttpResponseException(HttpStatusCode.NotFound);
    }
} 
```

[HttpStatusCode 的完整列表](http://msdn.microsoft.com/en-us/library/system.net.httpstatuscode.aspx)

# java - JScrollPane 没有将值更改为 ListEvents

> ID：13262724
> 
> 赞同：1
> 
> 时间：2012-11-07T03:28:45.490
> 
> 标签：java, swing, jpanel, jscrollpane

我编写了一个程序，假设设置应用程序属性。我正在使用 JScrollPane 的 JSplit 窗格。程序加载正常，但它没有更改右侧面板的值以响应左侧的列表元素。如果我做错了什么，请告诉我。我参考了[以下程序](http://docs.oracle.com/javase/tutorial/displayCode.html?code=http://docs.oracle.com/javase/tutorial/uiswing/examples/components/SplitPaneDemoProject/src/components/SplitPaneDemo.java)

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JDialog;
import javax.swing.JList;
import javax.swing.JScrollPane;
import javax.swing.JSplitPane;
import javax.swing.JTabbedPane;
import javax.swing.ListSelectionModel;
import javax.swing.event.ListSelectionEvent;
import javax.swing.event.ListSelectionListener;

public class ApplicationPropertyDlg extends JDialog implements ActionListener,ListSelectionListener {

   private DButton     pb_OK           = null ;
   private DButton     pb_CANCEL       = null ;
   private DButton     pb_APPLY        = null ;
   private String[]         appProp     = null;
   private JList            appList     = null;
   private JSplitPane       appPanel    = null;
   private JScrollPane      listScrollPanel,appScrollPanel  = null; 

   public ApplicationPropertyDlg ( AppDefaultWin parent ) {
      super ( parent, "Properties Application", true ) ;
      initializeAppProp();
      intializeAppList();
      initializeGUI();
      ButtonPanel buttonPanel = new ButtonPanel () ;
      setSize ( 800,700 ) ;
      WinUtil.centerChildInParent ( this, parent ) ;          
      pb_OK     = new JButton ( ) ;
      pb_APPLY  = new JButton ( ) ;
      pb_CANCEL = new JButton ( ) ;

      pb_OK.addActionListener ( this ) ;
      pb_APPLY.addActionListener ( this ) ;
      pb_CANCEL.addActionListener ( this ) ;
      GUISystem.setPreferredButton ( pb_OK ) ;
      GUISystem.setPreferredButton ( pb_CANCEL ) ;
      GUISystem.setPreferredButton ( pb_APPLY ) ;
      getContentPane().setLayout ( new BorderLayout (5,5) ) ;
      getContentPane().add(appPanel);
      getContentPane().add ( buttonPanel, BorderLayout.SOUTH ) ;
      buttonPanel.add ( pb_OK ) ;
      buttonPanel.add ( pb_APPLY ) ;
      buttonPanel.add ( pb_CANCEL ) ;                                 
      setVisible ( true ) ;   
   }

   private void initializeGUI() {
    // TODO Auto-generated method stub
       listScrollPanel = new JScrollPane(appList);
       appScrollPanel = new JScrollPane(new GeneralPage());
       appPanel = new JSplitPane(JSplitPane.HORIZONTAL_SPLIT,listScrollPanel,appScrollPanel);
       appPanel.setOneTouchExpandable(true);
       appPanel.setDividerLocation(200);
       //minimum size for individual Panel
       Dimension minimumSize = new Dimension(100, 50);
       listScrollPanel.setMinimumSize(minimumSize);
       appScrollPanel.setMinimumSize(minimumSize);
       //Provide a preferred size for the split pane.
       appPanel.setPreferredSize(appPanel.getPreferredSize());     

}

private void intializeAppList() {
    // TODO Auto-generated method stub
       appList = new JList(appProp);
       appList.setSelectionMode(ListSelectionModel.SINGLE_INTERVAL_SELECTION);
       appList.setSelectedIndex(0);
       appList.addListSelectionListener(this);

}

private void initializeAppProp() {
    // TODO Auto-generated method stub
    appProp = new String []{"General","Task Bar", "Look and Feel","Country"};
}

   public void propertyChanged ( int property, Object value ) {
      if ( property == PropertySystem.PROPERTY_LANGUAGE )
         setText() ;
      else if ( property == PropertySystem.PROPERTY_LAF )
         GUISystem.setLookAndFeel ( this ) ;
      else
         GUISystem.setPropertiesOnPanel ( getContentPane() ) ;
   }

   public void actionPerformed ( ActionEvent e ) {
         dispose() ;
   }

@Override
public void valueChanged(ListSelectionEvent e) {
    // TODO Auto-generated method stub
    JList list = (JList)e.getSource();
    updateAppPanel(appProp[list.getSelectedIndex()]);

}

private void updateAppPanel(String panelName) {
    // TODO Auto-generated method stub
    if(panelName.equalsIgnoreCase("General"){
        appScrollPanel.removeAll();
        appScrollPanel.add(new GeneralPage());
    }
    else if (panelName.equalsIgnoreCase("Task Bar"){
        appScrollPanel.removeAll();
        appScrollPanel.setViewportView(new TaskBarPage());
    }
    else if (panelName.equalsIgnoreCase("Language"){
        appScrollPanel.removeAll();
        appScrollPanel.setViewportView(new LanguagePage());
    }
    else if (panelName.equalsIgnoreCase("Look and Feel"){
        appScrollPanel.removeAll();
        appScrollPanel.setViewportView(new LookFeelPage());
    }
    else if (panelName.equalsIgnoreCase("Country"){
        appScrollPanel.removeAll();
        appScrollPanel.setViewportView(new SelectCountryPage());
    }
    appScrollPanel.revalidate();
    appScrollPanel.repaint();   
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T04:18:06.120

首先，在类中添加一个新的控件容器（最好是 a `JPanel`）：

```
 ...
    private JSplitPane       appPanel    = null;
    private JScrollPane      listScrollPanel,appScrollPanel  = null;
    // End of your controls...

    private JPanel tabContainer; 
```

然后，在代码初始化`appScrollPanel`变量的代码部分，而不是传递 a 的新实例`GeneralPane`，传递`tabContainer`如下：

```
 tabContainer = new JPanel();
     tabContainer.setLayout(new CardLayout());
     tabContainer.add(new GeneralPage());
     // Instead of adding GeneralPane directly, add the GeneralPane container
     appScrollPanel = new JScrollPane(tabContainer); 
```

然后，在`updateAppPanel`方法中，像这样替换`appScrollPanel.setViewportView`调用：

```
private void updateAppPanel(String panelName) {
    // TODO Auto-generated method stub
    if(panelName.equalsIgnoreCase("General")){
        tabContainer.removeAll();
        tabContainer.add(new GeneralPage());
    } 
    else if (panelName.equalsIgnoreCase("Task Bar")){
        tabContainer.removeAll();
        tabContainer.add(new TaskBarPage());
    }
    else if (panelName.equalsIgnoreCase("Language")){
        tabContainer.removeAll();
        tabContainer.add(new LanguagePage());
    }
    else if (panelName.equalsIgnoreCase("Look and Feel")){
        tabContainer.removeAll();
        tabContainer.add(new LookFeelPage());
    } 
    else if (panelName.equalsIgnoreCase("Country")){
        tabContainer.removeAll();
        tabContainer.add(new CountryPage());
    }
    appScrollPanel.revalidate();
    appScrollPanel.repaint();   
} 
```

它应该工作：

![在此处输入图像描述](../Images/e28333db7528a287d42f1f9c08e33bb5.png)

![在此处输入图像描述](../Images/bed5cfd4cfcefbcea480b18b1856bb98.png)

我可以建议您将`updateAppPanel`代码放在循环中吗？`else if`如果您需要对每个块的内部进行修改，它可以节省一些麻烦

# c# - 如何检查对象引用？

> ID：13262727
> 
> 赞同：0
> 
> 时间：2012-11-07T03:29:13.343
> 
> 标签：c#

我喜欢这个实体，

```
public class Receiving{
  [Key]
  public int ID {get; set;}
  public string shipperID {get; set;}

  [Foregign("shipperID")]
  public virtual Shipper shipper {get; set;}
} 
```

托运人关系可以是**1:0 或 1:1**

当托运人为 0 时出现错误。

```
var result = from p in productRepository
             join o in receivingRepository
             on p.fk equals o.ID
             select new {
               test = o.shipper.name // if the shipper is nothing related then it occur an error.
             } 
```

错误消息说， **“对象引用未设置为对象的实例。”**

如何在选择 {} 中检查？

我试过，

```
select new {
  test = o.shipper.name ?? ""
} 
```

但它不工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T03:32:16.623

尝试`(o == null || o.shipper == null) ? "" : o.shipper.name`

# android - 安卓相机问题

> ID：13262728
> 
> 赞同：0
> 
> 时间：2012-11-07T03:29:21.793
> 
> 标签：android, camera

使用谷歌开发者教程并完全按照它们进行操作，我的应用程序将重新启动或完全关闭，而不会从相机中获取图片。大约 30 分钟前我有完全相同的代码工作，但现在它不会工作。我所做的只是尝试实现一个按钮。任何帮助是极大的赞赏。

这是我的代码。它简短而简单，因此希望有人可以就从这里去哪里提供一些建议。

```
package com.example.camera;

import android.app.Activity;
 import android.content.Intent;
import android.graphics.Bitmap;
import android.net.Uri;
 import android.os.Bundle;
 import android.provider.MediaStore;
 import android.widget.ImageView;

public class MainActivity extends Activity {
ImageView iv;
Bitmap bitmap;
private static final int actionCode = 100;
public static final int MEDIA_TYPE_IMAGE = 1;

@Override
 public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);
iv=(ImageView)findViewById(R.id.imageView1);
dispatchTakePictureIntent(actionCode);
}

protected void onActivityResult(int requestCode, int resultCode, Intent data) {
 handleSmallCameraPhoto(data);
 }

private void dispatchTakePictureIntent(int actionCode) {
Intent takePictureIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
startActivityForResult(takePictureIntent, actionCode);
    }

private void handleSmallCameraPhoto(Intent intent) {
    Bundle extras = intent.getExtras();
    bitmap = (Bitmap) extras.get("data");
   iv.setImageBitmap(bitmap);
}
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T04:27:58.913

有时，要求 android 系统为您拍照确实会变得很麻烦。我有一个[相机库项目](https://github.com/girishnair12345/Girish-Camera-Library-Project)，您可以使用该库来拍摄照片，还提供了示例。或者你可以通过代码来理解它

# php - 如何检查mysql数据库中是否存在“title”

> ID：13262733
> 
> 赞同：2
> 
> 时间：2012-11-07T03:30:40.127
> 
> 标签：php, mysql

有史以来第一个stackoverflow问题！

**功能：**在允许插入之前检查并查看数据是否存在 - 尝试使其不区分大小写并尽可能开放，因为我试图避免重复的标题仅适用于特定的艺术家 ID（如下所述）

表行结构如下

*   id (auto_increment)
*   艺术家（仅分配给该艺术家的特定 ID 号）
*   标题（我们正在努力确保我们不会只为这位艺术家获得重复

**ISSUE ：**没有从数据库中获取所需的数据或后定义错误，如果语句 = 不知道到底是什么问题，可能是错误的

$_POST['title']; 从用户输入传递

```
 if (isset($submit)) {
                $date = date("Ymd");
                $cleanTitle =  $_POST['title'];
                $querytitle = mysql_real_escape_string($_POST['title']);
                $queryalbum = mysql_real_escape_string($_POST['album']);

                // Check to see if Title exist for specfic Artist
                $checkTitle = mysql_query("SELECT * from lyrics WHERE artist = '$artist'");
                if (!$checkTitle) {
                    die('Query Failed');
                } 
                if ($checkTitle == $cleanTitle)  {
// do whatever
}
                print_r($checkTitle); // the data returned from the query 
```

**更新：** INSERT IGNORE 不起作用，因为我通过 $artist 插入数据，需要先检查该艺术家是否存在标题。或者我可能是错的。我不确定如何去做 $artist 是在代码中定义得更高的特定 ID 号

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T03:42:45.513

您的代码不正确，但这应该可以：

```
if (isset($submit)) {
    $date = date("Ymd");
    $cleanTitle =  $_POST['title'];
    $querytitle = mysql_real_escape_string($_POST['title']);
    $queryalbum = mysql_real_escape_string($_POST['album']);
    // !!! $artist is not actually set anywhere here..
    $checkTitle = mysql_query("SELECT * from lyrics WHERE artist = '$artist'");
    if (!$checkTitle) {
        die('Query Failed');
    } 
    /* now that you have run the query, you need to get the result: */
    // (This is assuming your query only returns one result)//
    $result = mysql_fetch_array($checkTitle);
    // now check the value for 'title'
    if ($result['title'] == $cleanTitle)  {
        // do whatever
    }
    print_r($result); // the data returned from the query
} 
```

您正在运行查询，但没有得到查询结果。你`mysql_fetch_array()`用来得到结果。要获取多个条目的结果，可以使用以下命令：

```
// will print the 'title' for each results
while ($row = mysql_fetch_array($checkTitle)) {
    echo $row['title'];
} 
```

现在说了这么多，你应该知道 mysql_* 正在经历一个弃用过程，应该用 mysqli 或 PDO 替换。请阅读以下内容：

> [**请不要`mysql_*`在新代码中使用函数**](https://stackoverflow.com/q/12859942/)。它们不再被维护，并且 已经开始[弃用过程。](http://news.php.net/php.internals/53799)看到 [**红框**](https://www.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[*准备好的语句*](https://en.wikipedia.org/wiki/Prepared_statement)，并使用 [PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](https://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。如果您选择 PDO，[这里有一个很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:33:47.830

这是检查该标题是否有任何帖子的非常简单的代码（您可能已经知道，首先，该文件需要 wp-blog-header.php）。

```
$title = 'mytitlee';

global $wpdb;
$id_ofpost_name = $wpdb->get_var("SELECT ID FROM $wpdb->posts WHERE post_name = $title");
$id_ofpost_title = $wpdb->get_var("SELECT ID FROM $wpdb->posts WHERE post_title = $title");
if ($id_ofpost_name || $id_ofpost_title) {echo 'Exists, here is the id:'.$id_ofpost_title.$id_ofpost_name;} 
else {echo 'post wasnt found';} 
```

# ruby - ACK 后重新投递

> ID：13262738
> 
> 赞同：0
> 
> 时间：2012-11-07T03:31:23.317
> 
> 标签：ruby, rabbitmq, amqp

为什么我的 RabbitMQ 消息在 ACKd 后被重新传递给我的消费者？我是 RabbitMQ 的新手；我一定是在滥用它，或者 Ruby amqp gem 可能有问题。

我有一个订阅队列并确认每条消息的 ruby​​ 脚本。如果我让它一直通过消息，消息确实会从队列中消失；他们没有重新交付。但是，如果我在脚本全部确认之前中断我的脚本，然后再次启动脚本，则从第一条消息重新开始传递。

我在代码中看到的行为由 RabbitMQ Web 管理界面准确反映；队列有消息，尽管有 ACK，但它们并没有消失。

线索：我在队列中放入了大约 5000 条消息。如果我让消费者​​大量确认，则实际上确实似乎从队列中删除了一些消息（与我上面所说的相反）。我一直无法确定这种现象。

我正在使用 ruby​​ 1.9.3、RabbitMQ 2.8.7 和 amqp ruby​​ gem 0.9.8。它发生在 Ubuntu 12.0.4 或 Mac OS 10.7.4 上的生产者和消费者身上。

有没有搞错？？

（请参阅此消息末尾的更新）

这是消费者的代码：

```
# encoding: utf-8
require "rubygems"
require 'amqp'
require 'aws-sdk'

queue_name = "some.queue"
begin
  AMQP.start("amqp://localhost:5672") do | connection |
    channel  = AMQP::Channel.new(connection)
    queue = channel.queue(queue_name, :durable => true)
    queue.subscribe(:ack => true) do | metadata, payload |
      metadata.ack
    end
  end
end 
```

这是制作人：

```
# encoding: utf-8
require "rubygems"
require 'amqp'
require 'aws-sdk'

msg = ARGV[0]
queue_name = "some.queue"
begin
  AMQP.start("amqp://localhost:5672") do | connection |
    channel  = AMQP::Channel.new(connection)
    queue    = channel.queue(queue_name, :durable => true)
    (1..5000).each do | x |
      channel.default_exchange.publish x, :routing_key => queue_name, :persistent => true
    end
  end
end 
```

使用 Wireshark，我确定我发送的确认没有发送给代理。我调用了 metadata.ack，但没有发送任何数据包。

根据@Robthewolf 的建议，我尝试了 channel.prefetch(1)。当我使用那个调用时，每个确认都会发送给经纪人。一般来说，如果我调用了 channel.prefetch(n)，那么一旦我发送了 n（或者有时是 n+1）个确认，它就会将它们发送给代理。

所以我有一个新问题：为什么 prefetch() 参数决定了在最终发送到代理之前必须发送多少个 ack？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T05:52:24.083

如果您的消费者停止，所有未确认的消息都将返回到队列中。如果只有少数人被确认，他们将不会被返回到队列中，但其他人会被返回。您可以使用`channel.basicQos(1);`它来确保您一次只能从队列中读取 1 个项目。在第一个项目被确认之前，不会读取任何新项目。

# objective-c - 在遍历 NSDictionary 时处理不同的对象类型

> ID：13262740
> 
> 赞同：0
> 
> 时间：2012-11-07T03:31:43.560
> 
> 标签：objective-c, ios, xcode, nsarray, nsdictionary

```
for (NSArray *values in [serializedJSON allValues]) 
```

有时 serializedJSON 中的值是数组，有时它们是 NSDictionaries。我想歧视其中一个，所以我不会像现在这样得到任何错误。所以我只希望在这种情况下返回值是 NSArrays，而在第二种情况下我只希望它们是 NSDictionaries。

提前致谢！

如果您需要更多信息，请告诉我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T03:41:34.063

处理 JSON 的标准通用方法大致如下：

```
NSObject* jsonResult = [serializedJSON allValues];
if ([jsonResult isKindOfClass:[NSArray class]]) {
   <handle NSArray>
}
else if ([jsonResult isKindOfClass:[NSDictionary class]]) {
   <handle NSDictionary>
}
else if ([jsonResult isKindOfClass:[NSNumber class]]) {
   <handle NSNumber>
}
else if ([jsonResult isKindOfClass:[NSString class]]) {
   <handle NSString>
}
else if (jsonResult == [NSNull null]) {
   <handle null>
} 
```

# asp.net - Asp.net 应用程序未在浏览器中加载

> ID：13262741
> 
> 赞同：0
> 
> 时间：2012-11-07T03:31:51.560
> 
> 标签：asp.net

我非常需要帮助。我搜索了网络试图找到答案。我不能。现在，我向你寻求帮助。

我使用 Visual Studio 2010 Professional 创建了数十个 Web 应用程序。我有很多问题，但没有什么是我无法克服的。

现在，在大约一年没有创建任何 Web 应用程序（专注于其他东西）之后，我创建了一个默认项目来测试一些东西。它不会在浏览器中加载，大约等待一分钟后，我得到一个“连接已计时出”错误。我加载了一个旧项目，同样的事情。我已经看过我能想到的一切。我看过 IIS，它正在运行。我已经检查以确保端口 80 正在侦听。据我所知，确实如此。我已经重新安装了视觉工作室。我不知道发生了什么事。

从那时起，我已经安装了很多软件。但是，我不知道，我很难过，需要一些帮助，谢谢

-J

# function - 关于来自另一个函数的函数输入参数的信息

> ID：13262744
> 
> 赞同：0
> 
> 时间：2012-11-07T03:32:05.470
> 
> 标签：function, matlab, input, typechecking

我正在尝试在 MATLAB 中编写一个通用函数，该函数将函数句柄作为一个参数，将路径作为第二个参数，并使用可选过滤器定义应使用指定文件夹中的哪些文件。这个想法是将输入的函数应用于所有匹配的文件。但是，我想确保这个函数没有不受控制的崩溃，所以我希望能够检查输入的函数是否甚至将文件作为输入参数。

总而言之，我想知道是否有办法找出某个输入是否与某个函数兼容，只有函数句柄才能继续。我知道 MATLAB 在这些方面非常松散，但如果有办法，请与我分享。

编辑：我知道 MATLAB 可能已经内置了类似的功能，我只是想增加我在 MATLAB 编码方面的知识和技能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T07:53:18.210

我认为您无法检查函数是否将输入视为文件句柄。我同意 try/catch 方法：

```
function foo(input_func, path)
% for testing
if nargin==0
    input_func = @(s) fprintf('Filename: %s\n', s.name);
    path = pwd;
end
% check function handle
assert(isa(input_func, 'function_handle'), 'input_func is not a valid function handle!')

% get folder contents
listing = dir(path);

for i_item = 1:length(listing)
    item = listing(i_item);
    if ~item.isdir
        try
            input_func(item)
        catch E
            warning('Function threw error for %s', item.name)
        end
    end
end 
```

如果您尝试用例如替换“fprintf”。sin()，你应该得到一堆警告并且没有严重的崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T05:03:18.937

您可能想要研究的是`try/catch`：

[http://www.mathworks.com/help/matlab/ref/try.html](http://www.mathworks.com/help/matlab/ref/try.html)

这样，您可以尝试使用您的文件评估您的函数，如果它不喜欢它，catch 应该捕获错误并可能执行相应的错误消息

# java - 从方法传递参数到main

> ID：13262753
> 
> 赞同：2
> 
> 时间：2012-11-07T03:32:51.803
> 
> 标签：java, arrays, methods, parameters

我似乎无法弄清楚我的方法“public static int[][] sellSeatByPrice”的参数应该是什么。我需要提示用户输入（座位的）价格，然后确定是否采用了该价格（如果它 = 0），如果没有，则将其赋值为 0。

以下是我的代码，请帮助！

```
import java.util.Scanner;
/**
 * Write a description of class A10_TheaterSeating here.
 *
 * @author (your name)
 * @version (a version number or a date)
 */
public class A10_TheaterSeating
{
public static void main(String args[])
{
    System.out.println("***Welcome to the Ticket Choice App!***");
    System.out.println();

    int[][] theaterSeats = //set values in seating chart array
    {
        {10, 10, 10, 10, 10, 10, 10, 10, 10, 10},
        {10, 10, 10, 10, 10, 10, 10, 10, 10, 10},
        {10, 10, 10, 10, 10, 10, 10, 10, 10, 10},
        {10, 10, 20, 20, 20, 20, 20, 20, 10, 10},
        {10, 10, 20, 20, 20, 20, 20, 20, 10, 10},
        {10, 10, 20, 20, 20, 20, 20, 20, 10, 10},
        {20, 20, 30, 30, 40, 40, 30, 30, 20, 20},
        {20, 30, 30, 40, 50, 50, 40, 30, 30, 20},
        {30, 40, 50, 50, 50, 50, 50, 50, 40, 30}
    };
    int[][] seats = theaterSeats;

    printArray(seats); //print the seating chart
    System.out.println();

    //Defining variables
    String str = "";
    String input = "";

    while (!input.equalsIgnoreCase("Q"))
    {
        System.out.print("Select 'S' to pick a seat, 'P' choose a price or 'Q' to quit:     ");
        Scanner in = new Scanner(System.in);
        input = in.next();

        if (input.equalsIgnoreCase("S"))
        {
            System.out.print("Enter row and seat number desired: ");
            int row = in.nextInt();
            int seat = in.nextInt();
            System.out.println();
            sellSeatByNumber(seats, row, seat);

            printArray(seats);
            System.out.println();
        }
        else if (input.equalsIgnoreCase("P"))
        {
           System.out.print("Enter price of seat desired: ");
           int price = in.nextInt();
           System.out.println();
           sellSeatByPrice(seats, row, seat, price);

           printArray(seats);
           System.out.println();
        }
    }
    System.out.println();
    System.out.println("Thank you for choosing the ticket choice app.");
    System.out.println();
}

public static void printArray(int[][] currSeat)
{
    final int ROWS = 9;
    final int COLUMNS = 10;

    for(int i = 0; i < ROWS; i++)
    {
        for (int j = 0; j < COLUMNS; j++)
        {
            System.out.print(currSeat[i][j] + "\t");
        }
        System.out.println();
    }
}

public static int[][] sellSeatByNumber(int[][] seats, int row, int seat)
{
    if (row <= 0 || row > 9)
    {
        if (seat <= 0 || seat > 10)
        {
            System.out.print("Please enter a valid row and seat: ");
        }
    }
    if (seats[row][seat] == 0)
    {
        System.out.print("That seat is taken. Please select another seat: ");
    }
    else
    {
        seats[seats.length - row][seat - 1] = 0;
    }
    return seats;
}

public static int[][] sellSeatByPrice(int[][] seats, int row, int seat, int price)
{
    if (seats[row][seat] = price)
    {
        seats[seats.length - row][seat - 1] = 0;
    }
    return seats;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T03:43:48.850

您的参数看起来不错 - 内部逻辑和语法不正确。

由于您正在使用`static`方法并传递座位矩阵，这没关系 - 但您必须检查传入的值是否在矩阵的范围内 - 否则您会遇到异常。

例如，您不检查`sellSeatByPrice()`. 您真的应该这样做，否则虚假的行/座位组合可能会破坏您的程序。

给出的比较也不正确的情况也是如此：

```
if (seats[row][seat] = price) 
```

真的应该

```
if (seats[row][seat] == price) 
```

as`=`是*赋值*，`==`是*原始比较*。

此外，在 中`sellSeatByNumber()`，您仍然会遇到问题，因为越界行/座位组合仍然会爆炸。您*确实*检查了界限-荣誉-但如果它们超出了界限，您将不会返回任何东西。实际上，`IllegalArgumentException`如果它们超出范围，则应该引发 an ，或者您可以返回未修改的矩阵（这可能更直接）。

# c - 为什么要打印地址差异（根据指针类型）

> ID：13262754
> 
> 赞同：1
> 
> 时间：2012-11-07T03:32:53.080
> 
> 标签：c, pointers, increment

```
#include<stdio.h>
int main()
{
    int *p=0;
    char *ch=0;
    p++;
    ch++;
    printf ("%d and %d\n",p,ch);
    return 0;
} 
```

输出：

```
4 and 1 
```

1.  我知道 char 指针在它指向的地址中也会增加 +1。

2.  我知道指向 int 的指针在它所指向的 gcc 中的地址中也增加了 +4。

3.  我知道取消引用指针应该通过使用 * 和指针来完成。

查询：

1.  为什么这没有为 p 和 ch 提供任何垃圾值，因为它们都是指针并且没有分配任何地址；

2.  为什么这给了我各个指针在递增时获得的地址差异，或者**这是一个未定义的行为**。

3 **、为什么输出4和1？**

PL。解释。

我在 gcc-4.3.4 上编译了这段代码。它是一个C代码。如果这是某个问题的副本，我很抱歉，因为我无法在 stackoverflow 上找到任何此类问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T03:56:15.460

> 1.为什么这没有给p和ch任何垃圾值，因为它们都是指针并且没有分配任何地址；

错误，您在此处分配了地址 >`int *p = 0`和`char *ch = 0`. `p`包含地址`0x00000000`并`ch`包含地址`0x00000000`

> 2.为什么这给了我各个指针在递增时获得的地址差异，或者这是一个未定义的行为。

`char *ch = 0;`表示`ch`包含地址`0`。增加地址使用`++`将增加值`sizeof(char) viz 1`。同样对于整数。`p`包含地址 0。使用`++`运算符会增加您机器上`sizeof(int)`似乎存在的值`4`（注意，这并不总是正确的，尤其是对于 64 位机器）。

> 3.为什么这个输出是 4 1 ？这里

因为一开始，`p`包含 0，然后在您的机器上增加 = = 并`sizeof(type_of(p))`增加`sizeof(int)`= = 1 。`4``ch``sizeof(type_of(ch))``sizeof(char)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T03:57:38.907

首先，您的代码将指针打印为整数。虽然这可能是您想要做的，但它不是定义的行为，因为它在指针大小（以字节为单位）与`int`. 如果要打印指针值，请`%p`改用。

回答你的问题。您*正在为**两个*指针赋值： **0 ，这是****NULL**的同义词。

第二。您获得 4 1 的原因是由于平台上`int`的大小与 a 的大小`char`。char 将是 1。在您的平台上，an`int`是 4 个字节宽。当增加一个指针时，编译器会自动将它引用的地址移动它所代表的底层类型的字节数。

```
#include<stdio.h>
int main()
{
    int *p=0;    // int is 4 bytes on your platform
    char *ch=0;  // char is 1 byte
    p++;         // increments the address in p by 4
    ch++;        // increments the address in ch by 1
    printf ("%d  and %d\n",p,ch);
    return 0;
} 
```

编辑：您将获得类似的结果，但使用受支持的打印语句，请改为执行以下操作：

```
#include<stdio.h>
int main()
{
    int *p=0;
    char *ch=0;
    p++;
    ch++;
    printf ("%p and %p\n",p,ch);
    return 0;
} 
```

输出（在我的 Mac 上）是：

```
0x4 and 0x1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T03:41:28.807

据我所知，我已在线添加了您问题的答案：

```
#include<stdio.h>
int main()
{
    int x=0,*p=0;
    char c = 'A', *ch=0;
    x++; 

    // You have initialized this to 0, so incrementing adds 4 (int pointer)
    // Remember, the address '4' means nothing here
    p++; 

    // You have initialized this to 0, so incrementing adds 1 (char pointer)
    // Remember, the address '1' means nothing here
    ch++;

    // You are now printing the values of the pointers itself
    // This does not make any sense. If you are using pointers, you would want to know what is being referenced
    printf ("%d , %d  and %d\n",x,p,ch); 

    // This will FAIL
    // Because, you are now trying to print the data pointed by the pointers
    // Note the use of '*'. This is called de-referencing
    printf ("%d , %d  and %d\n", x, *p, *ch); 

    // Let p point to x, de-referencing will now work
    p = &x;
    printf ("%d , %d\n", x, *p); // 1, 1

    // Let ch point to c, de-referencing will now work
    ch = &c;
    printf ("%c , %c\n", c, *ch); // 'A', 'A'

    return 0;
} 
```

希望这可以帮助。

# c# - DirectoryInfo().GetFileSystemInfos() - 如何避免隐藏文件夹？

> ID：13262755
> 
> 赞同：2
> 
> 时间：2012-11-07T03:33:08.643
> 
> 标签：c#, filesysteminfo

如果我这样做：

```
var entries = new DirectoryInfo(@"C:\Folder1")
                   .GetFileSystemInfos("test*", SearchOption.AllDirectories); 
```

当我有这样的文件夹结构时，其中“HiddenFolder”被隐藏但“test.txt”文件未被隐藏：

```
C:\Folder1\
C:\Folder1\HiddenFolder\
C:\Folder1\HiddenFolder\test.txt 
```

那么我怎样才能编码不获取“test.txt”文件？

（您可能认为 GetFileSystemInfos 会跳过隐藏文件夹，但事实并非如此。）

### 这是部分解决方案

此代码去除隐藏文件和文件夹，但不处理隐藏文件夹中的非隐藏文件！

```
 var includeLocalFolderNames = true; // to include folder names in the list

  var hiddenFolders = new List<FileSystemInfo>();
  return entries
    .Where(entry =>
      {
        // skip if this entry is hidden, or it is in a hidden folder

        var isHidden = (entry.Attributes & FileAttributes.Hidden) != 0;
        if (isHidden)
        {
          hiddenFolders.Add(entry);
          return false;
        }
        return !hiddenFolders.Any(fsi => entry.FullName.StartsWith(fsi.FullName));
      })
    .Where(entry =>
      {
        // include folder names if requested...

        if (includeLocalFolderNames) return true;
        return (entry.Attributes & FileAttributes.Directory) == 0;
      })
    .Select(entry => {
        // do something...
        return entry.Name;
      }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T03:54:33.917

当然不是最优化和/或优雅的解决方案。

```
var root = new DirectoryInfo(path);
var nonHiddenDirectories =
    root.GetDirectories("*", SearchOption.AllDirectories).Where(
        d => (d.Attributes & FileAttributes.Hidden) == 0).ToArray();
var nonHiddenFiles =
    nonHiddenDirectories.SelectMany(d => d.GetFiles()).Where(
        f => (f.Attributes & FileAttributes.Hidden) == 0); 
```

# audio - Commodore 64 程序员，如何在 C++ 游戏中使用 ReSid？

> ID：13262763
> 
> 赞同：3
> 
> 时间：2012-11-07T03:33:50.350
> 
> 标签：audio, emulation, c64

是否可以在我正在制作的游戏中使用 ReSID 仿真源代码？我想要一个像过去那样的视频游戏声音引擎。不是 wav/mp3。有什么想法吗？[http://en.wikipedia.org/wiki/ReSID](http://en.wikipedia.org/wiki/ReSID)

# ios - 创建一个启用 Storyboard、Cocos2D 和 ARC 的项目

> ID：13262766
> 
> 赞同：4
> 
> 时间：2012-11-07T03:34:01.493
> 
> 标签：ios, cocos2d-iphone, automatic-ref-counting, xcode4.5

我正在使用 XCode 4.5.2 创建一个 iOS 通用应用程序。

我想在我的应用程序中使用它的故事板。通常，我通过选择新建 > 项目 > 单视图项目 > 选中使用故事板来创建新项目。

有时在我的应用程序中，我需要使用 Cocos2D 来制作复杂的动画（无需与之交互，仅用于演示）。

我的动画是使用 CocosBuilder 创建的，它与 Cocos2D 2.0 和 CCBReader 库一起使用。

我尝试通过以下方式将 Cocos2D 添加到我现有的项目中：

1.  添加 Cocos2D 文件夹（包括 Support、Platforms、kazmath 文件夹）。
2.  尝试在 Build Phases/Compile Sources 中对那些 *.m 文件进行编辑 -fno-obj-arc 之类的操作。

但是当我构建项目时，ARC 错误仍然存​​在。

**＃问题：**

1.  如何将 Cocos2D 实现到现有的 XCode 4.3/4.5 项目中？
2.  如果我创建一个 Cocos2D 模板项目，我可以为我的项目的其余部分（那些非 Cocos2D 类）激活 ARC 吗？

我成功地从 Cocos2D 模板的 UIView 中创建了一个带有 Cocos2D 的项目，作为[Ray 的帖子](http://www.raywenderlich.com/4817/how-to-integrate-cocos2d-and-uikit)，但现在我希望事情（可能）更复杂一些。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T08:19:42.803

在@Setrio、@LearnCocos2D 和大量谷歌搜索的帮助下，我终于修复了它。

我的项目结合了 Cocos2D、Storyboard、ARC enabled 和 CocosBuilder。

首先，使用 SingleView 选择创建一个项目（当然启用了 ARC）。

然后下载此处启用的 Cocos2D ARC [https://github.com/LearnCocos2D/cocos2d-iphone-arc-templates](https://github.com/LearnCocos2D/cocos2d-iphone-arc-templates)感谢 Steffen！

将其库添加到您的项目中，如此处指出的[http://www.learn-cocos2d.com/2012/04/enable-arc-cocos2d-project-video-tutorial/](http://www.learn-cocos2d.com/2012/04/enable-arc-cocos2d-project-video-tutorial/)（很棒，就像魅力一样）

使用 Cocos2D 创建故事板作为本教程（包括示例）[http://www.tinytimgames.com/2012/02/07/cocos2d-and-storyboards/](http://www.tinytimgames.com/2012/02/07/cocos2d-and-storyboards/)

现在所有的东西都在协同工作。美丽的。我喜欢 Cocos2D :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T11:31:32.937

1.  我不知道在我的头顶。
2.  是的，我在我最新的 Cocos2D-iOS 项目中已经做到了这一点。我使用自动重构工具将我的项目转换为 ARC，并且我只是从该过程中排除了所有 Cocos2D 库文件。在大多数情况下，重构进行得很顺利，我的项目很快就重新启动并运行了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T11:33:51.680

我发现此链接/教程对于与此类似的项目很有用。

[http://www.tinytimgames.com/2012/02/07/cocos2d-and-storyboards/](http://www.tinytimgames.com/2012/02/07/cocos2d-and-storyboards/)

基本上你在视图控制器中添加了对 cocos2d 的支持。你必须使用 cocos2d 作为一个库来解决大部分问题。

# php - 如何在 Web 中使用带有回调的 wcf 服务？

> ID：13262768
> 
> 赞同：1
> 
> 时间：2012-11-07T03:34:07.393
> 
> 标签：php, wcf, wsdualhttpbinding

我有一个项目需要 PHP 连接到 WCF 自托管。结构是，我有一个带有 tcp 和 WSDualHttpBinding 协议的 selfhost wcf。我使用了 PHP SOAP 版本 1，而 wcf 有 EnvelopVersion Soap12。我尝试在下面测试 PHP 代码，但不幸的是无法使其工作。我尝试在我的浏览器“http://...:8009/Service/Service/?wsdl”中键入 URL 以测试我的 WCF 是否已启动并且 xml 是否出现，因此这意味着 wcf 已启动并正在运行。如果我的自托管服务中有回调，是否可以通知 Web 客户端？提前致谢。

```
 <?php

try
{
    $client = new SoapClient('http://...:8009/Service/Service/?wsdl',
    array(
                'location' => 'http://...:8009/Service/Service/',
                'trace' => true,
                'soap_version' => SOAP_1_1,
                'cache_wsdl' => WSDL_CACHE_MEMORY
        )); 
        .
        .
        .

} catch ( Exception $e )
{
    echo "Error:".$e->getMessage();
}

?> 
```

# python - 如何在 Python 3.2 中的输入之间进行选择

> ID：13262769
> 
> 赞同：2
> 
> 时间：2012-11-07T03:34:08.530
> 
> 标签：python, string, input

```
input("Would you like to read: comedy, political, philisophical, or tragedy?")

a = "comedy"
b = "political"
c = "philisophical"
d = "tragedy"

if a:
    input("Would you like the author's nationality to be: English or French?")
    e = "French"
    d = "English"
    if e:
        print("Tartuffe")
    elif d:
        print("Taming of the Shrew") 
```

当我运行程序时，它只是默认为喜剧，然后是 Tartuffe。
如何让它识别字符串中的不同流派？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T03:39:06.617

您需要存储输入，然后将其与您想要的进行比较，例如：

```
a = "comedy"
b = "political"
c = "philisophical"
d = "tragedy"

user_input = input("Would you like to read: comedy, political, philisophical, or tragedy?")

if user_input == a:
    user_input = input("Would you like the author's nationality to be: English or French?")

    if user_input == e:
        #do more stuff 
```

* * *

一个更好的方法（在我看来）是做这样的事情：

```
def comedy():
    print("comedy")

def political():
    print("political")

def philisophical():
    print("philisophical")

def tragedy():
    print("tragedy")

types = {"comedy":comedy,
         "political":political,
         "philisophical":philisophical,
         "tragedy":tragedy
        }

user_input = input()

types[user_input]() 
```

因为它更容易管理和读取不同的输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T03:41:56.720

您只是在测试 e 的值是否为真（字符串不为空，因此为真）。

您也没有存储输入。

```
selection = input("Would you like the author's nationality to be: English or French? ")

if selection == e:
    print("Tartuffe")
elif selection == d:
    print("Taming of the Shrew") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T03:44:15.853

高度可扩展的代码。

```
choices = {'e': ('French', 'Tartuffe'), 'd': ('English', 'Taming of the Shrew')}

cstr = ', '.join('%r = %s' % (k, choices[k][0]) for k in sorted(choices))
prompt = 'What would you like the author\'s nationality to be (%s): ' % cstr

i = input(prompt).lower()

print('%s: %s' % choices.get(i, ('Unknown', 'Untitled'))) 
```

# java - 有效字符串的 NumberFormatException

> ID：13262773
> 
> 赞同：1
> 
> 时间：2012-11-07T03:34:23.500
> 
> 标签：java, numberformatexception

这是我下面的代码，它将字符串转换为长数据类型。

```
/**
     * Parses a String into primitive long
     * @param str
     * @return
     */
public static long parseLong(String str){
        try {
            long result = Long.parseLong(str);
            return result;
        } catch(NumberFormatException ex){
            //do nothing or log it
            return 0L;
    }
} 
```

但是对于这个字符串`2006-09-11 22:01:13`，每当它传递给上述`parseLong`方法时，我总是会得到这个异常 -

```
java.lang.NumberFormatException: For input string: "2006-09-11 22:01:13" 
```

我需要转换`String to Long`。在此方法中，可以传递任何类型的 String。因此，当我调试代码时，我发现它正在为这个字符串抛出异常 - `"2006-09-11 22:01:13"`。据我了解，它不应该抛出异常，对吧？因为我们可以通过使用方法将任何字符串转换为长字符串`Long.parseLong`吗？

谁能解释为什么我得到这个例外？因为我现在很困惑.. :-/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T03:37:08.553

因为您的日期`String`不是以`Long`数字或数字开头。您想使用[SimpleDateFormat](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)将日期字符串解析为有效的 Date 对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T03:45:49.300

带有特殊字符的字符串不能直接解析为 long 或`int`. 如果要将其解析为 long 或任何类型，请先将特殊字符替换为 ("")。

否则，如果您想将上述字符串解析为日期，则使用 simpleDate 格式，如下所示

```
SimpleDateFormat parser= new SimpleDateFormat("yyyy-MM-dd hh:mm:ss");
java.util.Date d = null;

try {
    d = parser.parse(str);
            System.out.println("Parsed date is "+d);
} catch (java.text.ParseException e) {
    e.printStackTrace();
} 
```

然后输出将是 `Parsed date is Mon Sep 11 22:01:13 IST 2006`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T03:38:22.183

它必须是一个字符串中的精确整数。例如“12345676”只是一个数字。“2006-09-11 22:01:13” 包含很多东西，而不是像“-”（连字符）、“:”（冒号）、“”（空格）这样的数字，它们不是数字。

# ruby-on-rails - NoMethodError（Class:Module 的未定义方法“作用域”）：

> ID：13262774
> 
> 赞同：1
> 
> 时间：2012-11-07T03:34:44.840
> 
> 标签：ruby-on-rails, has-many-through

我有一个 has_many 和 has_many :through 看起来像这样的关系......

```
class Guestlist < ActiveRecord::Base
    belongs_to :venues

    has_many :patrons
    has_many :users, :through => :patrons

    attr_accessible :capacity, :end_time, :name, :start_time, :venue_id
end

class Patron < ActiveRecord::Base
    belongs_to :guestlists
    belongs_to :users
    attr_accessible :guestlist_id, :user_id, :checked_in
end

class User < ActiveRecord::Base
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  attr_accessible :name, :email, :password, :password_confirmation, :remember_me

  has_many :patrons
  has_many :guestlists, :through => :patrons
end 
```

我正在尝试“通过”访客列表对象访问用户...

```
@guestlist = Guestlist.find(params[:id])
@guests = @guestlist.users.order('name ASC') 
```

并引发以下错误...

```
NoMethodError (undefined method `scoped' for Users:Module) 
```

我一直在寻找解决方案，但没有任何效果。请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T03:44:40.313

您在 Model 中的关联看起来有问题`Patron`。奇异化`users`和`guestlists`。[在这里](http://guides.rubyonrails.org/association_basics.html#the-has_many-through-association)参考更多

```
class Patron < ActiveRecord::Base
    belongs_to :guestlist 
    belongs_to :user
    attr_accessible :guestlist_id, :user_id, :checked_in
end 
```

# android - Android 使用矩阵围绕交替轴旋转

> ID：13262776
> 
> 赞同：0
> 
> 时间：2012-11-07T03:35:06.127
> 
> 标签：android, matrix, bitmap, rotation

我正在使用该`matrix.rotate(deg, fx,fy)`方法来旋转图像。

图像有一个`alpha`通道，并且只有在右上角有视觉效果。我想旋转画布，用它创建新图像，`matrix`并让视觉部分成为唯一旋转的部分。

目前图像旋转但不围绕所需的`axis`. 它始终围绕对象的原始宽度旋转。

这是我使用的代码：

```
Matrix matrix = new Matrix();

matrix.setRotate(rotation, xPivot, yPivot);
Bitmap pic1a = Bitmap.createBitmap(pic1, 0, 0, pic1.getWidth(), pic1.getHeight(), matrix, true); 
```

这会正确旋转图像，但似乎只在原始画布的同一位置内旋转。我想要的是图像围绕（xPivot，yPivot）旋转成为显示器中心位置的点。

# c#-4.0 - 如何获取 cpu 的 currentClockSpeed、minClockSpeed、maxClockSped

> ID：13262779
> 
> 赞同：0
> 
> 时间：2012-11-07T03:35:34.283
> 
> 标签：c#-4.0, wmi

我可以得到 cpu 的 currentClockSpeed、minClockSpeed、maxClockSped。我已经使用 wmi 来做到这一点，但我认为结果并不好。没有 minClockSpeed，currentClockSpeed 和 maxClockSped 的值相同，currentClockSpeed 从未改变。我的电脑的 cpu 是 I5-2300。它支持涡轮增压。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T05:52:10.357

向上，我无法获得 minClockSpped 值。currentClockSpeed 和 maxclockSpeed 在 destop pc 中具有相同的值。

# php - 在 slim 框架中使用 PDO 的方法是什么？

> ID：13262780
> 
> 赞同：5
> 
> 时间：2012-11-07T03:35:50.647
> 
> 标签：php, pdo, slim

我开始一个新的支持twig的slim项目，我想使用PDO作为数据库层，集成的方式是什么？还是只使用 GLOBAL $db？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T03:44:59.597

我反对可变的全局变量。您可以使用简单的工厂方法返回您的连接：

```
function db() {
  static $db = null;
  if (null === $db)
    $db = new PDO(...);
  return $db;
} 
```

如果您要处理更多此类问题，请考虑注册一个注册表（请参阅[这个](https://stackoverflow.com/questions/8147207/php-registry-pattern)）。

**关于可变全局变量：**

我反对这样的事情，因为，嗯，它们很容易被变异。
如果在程序运行过程中情况发生意外变化，会发生什么情况？
事情破裂。

如果您是该项目的唯一工作人员，则全局变量可能没问题。
但是根据我的经验，即使在这种情况下，跟踪全局变量也会变得很麻烦，并且会影响代码的逻辑组织。
如果您要与将覆盖此类全局的其他人共享您的代码怎么办？

此外，全局变量与[关注点分离](http://en.wikipedia.org/wiki/Separation_of_concerns)背景下的[数据封装](http://en.wikipedia.org/wiki/Information_hiding)方法相矛盾。

所有这些都涉及到软件架构这一大而广泛的科学。

此外，在这种特定情况下使用工厂可确保您只保留一个对数据库连接的引用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-05-29T17:16:52.147

看这个项目：[Slim-PDO](https://github.com/FaaPz/Slim-PDO) *(github)*

文档[在这里](https://github.com/FaaPz/Slim-PDO/blob/master/docs/README.md)

> 通过作曲家安装：`$ composer require slim/pdo`

简单用法：

```
$app->container->singleton('database', function () use ($app) {
  return new \Slim\PDO\Database($app->config('db.dsn'), $app->config('db.usr'), $app->config('db.pwd'));
});

// SELECT * FROM users WHERE id = ?
$selectStatement = $app->database->select()
                       ->from('users')
                       ->where('id', '=', 1234);

$stmt = $selectStatement->execute();
$data = $stmt->fetch();

// INSERT INTO users ( id , usr , pwd ) VALUES ( ? , ? , ? )
$insertStatement = $app->database->insert(array('id', 'usr', 'pwd'))
                       ->into('users')
                       ->values(array(1234, 'your_username', 'your_password'));

$insertId = $insertStatement->execute(false); 
```

# c# - 使用来自另一个样式 xaml 的 StandardStyle xaml 中的样式

> ID：13262782
> 
> 赞同：1
> 
> 时间：2012-11-07T03:35:50.600
> 
> 标签：c#, xaml, windows-8, microsoft-metro

我有一个自定义 Color.xaml 作为

```
<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <SolidColorBrush x:Key="MyColor1" Color="#7d897d"/>
    <SolidColorBrush x:Key="MyColor2" Color="#078ab4"/>
</ResourceDictionary> 
```

和 App.xaml 作为

```
<Application.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <!-- Defines the colors used in the app-->
                <ResourceDictionary Source="Color.xaml"/>
                <!-- Styles that define common aspects of the platform look and
                     feel Required by Visual Studio project and item templates-->
                <ResourceDictionary Source="StandardStyles.xaml"/>
                <ResourceDictionary>
                ............ 
```

在我的 StandardStyle.xaml 中，我无法使用 xaml 中定义的颜色。

```
<Style x:Key="HeadingTextStyle" TargetType="TextBlock">
    <Setter Property="FontWeight" Value="SemiLight"/>
    <Setter Property="FontSize" Value="20"/>
    <Setter Property="Foreground" Value="{StaticResource MyColor1}"/>
</Style> 
```

当我运行代码时它给了我一个例外

```
"Cannot find a Resource with the Name/Key MyColor1 [Line: 20 Position: 44]" 
```

但是我可以在 UI xaml 文件中使用这种颜色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T06:20:01.117

在这里，包括`Color.xaml`在内`StandardStyle.xaml`

```
<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="Color.xaml"/>    
    </ResourceDictionary.MergedDictionaries>

    <!-- your styles here -->

</ResourceDictionary> 
```

# php - 强制下载 msword 文件失败

> ID：13262789
> 
> 赞同：0
> 
> 时间：2012-11-07T03:36:45.293
> 
> 标签：php, http-headers, ms-word, download

我目前有以下内容：

```
if (headers_sent()) {

    echo 'HTTP header already sent';
} else {
    if (!is_file($path)) {
        header($_SERVER['SERVER_PROTOCOL'].' 404 Not Found');
        echo 'File not found';
    } else if (!is_readable($path)) {
        header($_SERVER['SERVER_PROTOCOL'].' 403 Forbidden');
        echo 'File not readable';
    } else {
        ob_start();
        header($_SERVER['SERVER_PROTOCOL'].' 200 OK');
        header('Content-Description: File Transfer');
        header("Content-Type: octet-stream");
        header("Content-Transfer-Encoding: binary");
        header('Expires: 0');
        header('Cache-Control: must-revalidate');
        header('Pragma: public');
        header("Content-Length: ".filesize($path));
        header("Content-Disposition: attachment; filename=\"".basename($path)."\"");
        ob_clean();
        ob_flush();
        readfile($path);

        exit; 
```

上面的代码会生成正确文件名的文件下载，但有一点不同。

下载的文件有一些来自下载页面的 html（标题发送不正确？）然后在下载的文档中有乱码文本（例如 OJQJ^J.??. WW8Num2z0）占据了几页。最后，在 .doc 的末尾，我可以阅读一些似乎是 .doc 正确文本的英文，但没有格式。

这些问题在 Chrome 和 Mozilla 中仍然存在。

任何帮助将不胜感激。提前致谢。

编辑：

我开始使用只有一行文本的 .doc 进行测试：“test”

该文件可以从它上传到的目录中手动打开，并验证它没有损坏。但是，使用迄今为止推荐的任何方法下载此文件都会产生几页乱码（实际文件只有 1 行）。文件的实际文本，即“test”，在 66 页乱码中的最后一页中找到，在这个大海捞针中找到：?test ?"ﾰ? ﾰ?!ﾰn"ﾰn#ﾐn$ﾐn3P(20???՜.ﾓﾗ+,??՜.ﾓﾗ+,???根条目???????? ?F@CompObj????jOle ??????? ?1Table????????????ﾥSummaryInformation(???????WordDocument????????????"$DocumentSummaryInformation8???????????? [t????????????????

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T03:59:58.020

`else`最后一个没有任何冲洗功能的摘录试试

```
header("HTTP/1.1 200 OK");
header("Pragma: public"); 
header("Expires: 0"); 
header("Cache-Control: must-revalidate, post-check=0, pre-check=0"); 
header("Content-Type: application/force-download"); 
header("Content-Disposition: attachment; filename=".basename($path));
header("Content-Description: File Transfer"); 
@readfile($path); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T09:10:44.643

这些是什么？

```
 header("Content-Type: octet-stream");
    header("Content-Transfer-Encoding: binary"); 
```

将您的代码精简为一个工作示例并从那里扩展它。您不需要设置状态码，PHP 会为您完成。您也不需要设置 Content-length。只发送这个应该可以工作：

```
$path = 'foo.dat';

if (headers_sent()) {
    echo 'HTTP header already sent';
} else {
    if (!is_file($path)) {
        header($_SERVER['SERVER_PROTOCOL'].' 404 Not Found');
        echo 'File not found';
    } else if (!is_readable($path)) {
        header($_SERVER['SERVER_PROTOCOL'].' 403 Forbidden');
        echo 'File not readable';
    } else {
        header("Content-Disposition: attachment; filename=\"".basename($path)."\"");
        readfile($path);
    }
} 
```

# javascript - 如何检查 Facebook 应用程序是否加载到画布之外

> ID：13262790
> 
> 赞同：0
> 
> 时间：2012-11-07T03:36:46.590
> 
> 标签：javascript, facebook

是否可以检查应用程序是否加载到画布内？我只希望人们在 Facebook 画布内使用我的应用程序，而不是在外面。

我正在使用 Facebook Javascript SDK，在阅读有关 signed_request (http://developers.facebook.com/docs/howtos/login/signed-request/) 的信息时，我看到在加载应用程序时发布了一个 signed_request画布。

但是我找不到任何方法在 Javascript 中检查这一点，当使用 FB.getLoginStatus 时，总是有一个 signed_request，无论它是否在画布内。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T01:45:00.417

看起来您已经找到了解决方案：您必须使用 PHP（或您使用的任何服务器端语言）来确定是否正在通过 Facebook 查看页面。

对于那些还没有弄清楚的人，您可以使用 PHP 来确定变量 signed_request 是否已发布到页面。如果不是，那么您可以重定向到相应的 Facebook 页面，或根据需要采取其他措施。

```
<?php
//if signed_request was not posted...
    if ( !isset ($_POST['signed_request'] ) ) 
        {
        $redirect = 'http://apps.facebook.com/exampleapp'; //the URL of your Facebook canvas app
        header('Location:'.$redirect); //redirect the browser there
        }
?> 
```

# java - 创建和检索 JIRA 远程问题链接

> ID：13262793
> 
> 赞同：1
> 
> 时间：2012-11-07T03:37:10.850
> 
> 标签：java, groovy, jira

我正在尝试为 JIRA v5.x 编写转换后功能。它应该检查是否已经有一个与问题链接的 Confluence 页面，如果没有，则创建并链接该页面。我正在使用一个 groovy 脚本和可以访问 JAVA API 的 scriptrunner 插件来开发它。

虽然创建汇合页面相当容易，但我正在为远程问题链接而苦苦挣扎。

*   如何创建新的远程问题链接？
*   如何确定某个问题的链接是否已存在？

这就是我尝试创建链接的方式：

```
import com.atlassian.jira.ComponentManager
import com.atlassian.jira.bc.issue.link.RemoteIssueLinkService
import com.atlassian.jira.issue.link.RemoteIssueLinkBuilder

//I use a wrapper class for the moment so I can run via scriptrunner and debug it in IDEA
class myWrapper {

    def doStuff() {

        //get the issue, this would already be available in an post action
        def issueService = ComponentManager.getInstance().getIssueService();
        def authContext = ComponentManager.getInstance().getJiraAuthenticationContext()

        def issueResult = issueService.getIssue(authContext.getUser(), "DEV-1");
        def issue = issueResult.getIssue()

        //build link
        def linkBuilder = new RemoteIssueLinkBuilder()
        linkBuilder.issueId(issue.id)
        linkBuilder.applicationName("myconluence")
        linkBuilder.applicationType("com.atlassian.confluence")
        linkBuilder.relationship("Wiki Page")
        linkBuilder.title("testpage")
        linkBuilder.url("http://localhost:8090/display/LIN/testpage")
        linkBuilder.build()

        def validationResult = RemoteIssueLinkService.validateCreate(authContext.getUser(), linkBuilder)

    }
}

(new myWrapper()).doStuff() 
```

当我运行代码时，出现以下异常：

```
javax.script.ScriptException: groovy.lang.MissingMethodException: No signature of method: static com.atlassian.jira.bc.issue.link.RemoteIssueLinkService.validateCreate() is applicable for argument types: (com.atlassian.crowd.embedded.ofbiz.OfBizUser, com.atlassian.jira.issue.link.RemoteIssueLinkBuilder) values: [admin:1, com.atlassian.jira.issue.link.RemoteIssueLinkBuilder@180ca9] 
```

对我来说，看起来我没有正确获得*RemoteIssueLinkService*，但我不知道我必须做些什么来解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T21:55:39.647

[我在atlassian 论坛上](https://answers.atlassian.com/questions/104043/creating-and-retrieving-jira-remote-issue-links)问过同样的问题。这是我从 Jamie Echlin 那里收到的工作答案，以供将来参考

* * *

它不是静态方法，因此您需要先获取该类的实例：

```
def remoteIssueLinkService = ComponentManager.getComponentInstanceOfType(RemoteIssueLinkService.class)

remoteIssueLinkService.validateCreate(...) 
```

* * *

# php - PHP 范围函数

> ID：13262794
> 
> 赞同：-2
> 
> 时间：2012-11-07T03:37:19.617
> 
> 标签：php

我需要一些带范围功能的帮助：

代码：`range(1,4)`

输出：

```
Array
(
    [0] => 1
    [1] => 2
    [2] => 3
    [3] => 4
) 
```

* * *

我怎样才能得到这样的输出：

```
Array
(
    [01] => 01
    [02] => 02
    [03] => 03
    [04] => 04
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T03:44:50.107

对于这些值，您*可以*改用字符串。有[一个示例](http://php.net/manual/en/function.range.php#109642)可以[`array_map`](http://php.net/manual/en/function.array-map.php)帮助您，也[`sprintf`](http://php.net/manual/en/function.sprintf.php)可以填充零：

```
<?php
$a = array_map(function($n) { return sprintf('%02d', $n); }, range(1, 4));
print_r($a);
?> 
```

在较旧的 PHP 版本中，您可能需要：

```
<?php
function f($n) { return sprintf('%02d', $n); }
$a = array_map(f, range(1, 4));
print_r($a);
?> 
```

输出：数组

```
(
    [0] => 01
    [1] => 02
    [2] => 03
    [3] => 04
) 
```

演示：[http ://codepad.org/Ovx1VQDM](http://codepad.org/Ovx1VQDM)

但是数组键仅用于您的代码，即使您可以使用字符串作为键，最好还是使用整数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T04:19:23.053

```
$array = array()
foreach (range(1, 4) as $value) {
  $array[str_pad($value, 1, 0, STR_PAD_LEFT)] = str_pad($value, 2, 0, STR_PAD_LEFT);
} 
```

# javascript - 提交后复选框值不变

> ID：13262795
> 
> 赞同：0
> 
> 时间：2012-11-07T03:37:20.830
> 
> 标签：javascript, html, spring, spring-mvc

我想要做的是基于 JSON 对象填充我的输入字段。以下是具有默认值的字段：

```
<input type="hidden" name="id"/>
<input id="enabled1" name="enabled" type="checkbox" value="true"> // not sure why value="true" here, by default it should be false 
```

JSON 对象具有以下格式：

```
[{enabled:false, id:184}] 
```

基于 JSON 对象，我将迭代其属性并相应地将值分配给字段。迭代函数如下：

```
 for ( var propertyName in aData) {
                if (aData.hasOwnProperty(propertyName)){
                    // check if field exist
                    var elem = $("input[name="+propertyName+"]");
                    var exist = elem.size() == 1;
                    // if exist, update field with selected info
                    if (exist){
                        elem.val(aData[propertyName]);
                    }
                }
            } 
```

迭代函数运行后，字段如下所示：

```
<input type="hidden" name="id" value="184">
<input id="enabled1" name="enabled" type="checkbox" value="false"> 
```

现在，如果我勾选复选框并将信息提交给服务器，我希望该值为 true，但不知何故该值仍然为 false。我在这里错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T05:39:56.980

但这是非常值得期待的。因为，选择一个复选框对 html 元素的值没有任何影响，它会将选中状态从未选中更改为选中。当您尝试在服务器端获取值时，它会返回您覆盖的值。

[在这里查看](http://www.w3schools.com/tags/att_input_checked.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T03:53:41.063

我不确定，但我认为`input`标签本身应该有关闭标签（斜杠`/`）：

```
<input type="hidden" name="id" value="184"/>
<input id="enabled1" name="enabled" type="checkbox" value="false"/> 
```

请检查。-韩-

# android - 构建 android lite 版本 - 完整版本和 lite 版本在模拟器上混合

> ID：13262797
> 
> 赞同：0
> 
> 时间：2012-11-07T03:37:34.030
> 
> 标签：android, eclipse, version-control, build, setup-deployment

我正在尝试构建一个 android 项目的 lite 版本。到目前为止，我已经读过重命名应用程序包（我使用 eclipse 选项来重命名应用程序包）应该足够了。我检查了 manifest.xml，包被重命名，但是当我在手机（或模拟器）上安装我的应用程序时，它会以某种方式混合版本，特别是在按下主页按钮然后重新进入应用程序之后（它切换到以前安装的完整版）。

我错过了什么？为了获得不同版本的应用程序，还有什么需要改变的吗？我应该更改应用程序名称还是源包？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T21:59:26.263

更改包名称时，您还需要更改文件的名称。因此，如果您的应用程序最初是，`my.app.full`那么下面的文件`src`将是`my/app/full`. 如果您将包裹名称更改为 ，`my.app.lite`则需要将电影名称更改`src`为`my/app/lite`。

同样在所有类的顶部，您应该有一个包声明，即。`package my.app.full`，这也需要更改为您的新包名称 -`package my.app.lite`

如果您仍然遇到问题，请尝试刷新构建，然后如果这不起作用，请删除`gen`文件（不要担心它会在您构建项目时重新出现）

# servicestack - ServiceStack - 生成 ASP.NET webservice - 参考问题

> ID：13262800
> 
> 赞同：6
> 
> 时间：2012-11-07T03:37:44.483
> 
> 标签：servicestack

我正在使用非常出色的 servicestack 库，并尝试在我的 servicestack WSDL - Soap11 的 VS2010 中生成 ASP.NET Web 服务引用（旧样式不是 WCF）。很好地包装服务 WSDL。

DTO 位于 AppHost/services 的单独程序集/命名空间 (My.WS.DTO) 中，并且遵循请求/响应命名约定。当我尝试通过 Visual Studio 生成引用时，我在 VS 中收到以下错误。

自定义工具错误：无法导入 WebService/Schema。无法从命名空间“http://schemas.servicestack.net/types”导入绑定“BasicHttpBinding_ISyncReply”。无法导入操作“GetMyDetails”。缺少元素“http://schemas.servicestack.net/types:GetMyDetails”。

注意：GetMyDetails 只是出现在列表中的第一个服务 - 所以我不认为这是问题所在。

我尝试使用 EndpointHostConfig.Instance.WsdlServiceNamespace = "My.WS.DTO"; 在 AppHost 文件中添加程序集命名空间 这只会导致相同的生成错误（如上），但使用“My.WS.DTO”而不是“http://schemas.servicestack.net/types”。

我认为这可能是某种引用问题，但任何关于我可能做错的指导都会很棒。干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T08:57:23.480

我不知道这对您来说是否仍然是一个问题，但我遇到了类似的问题，发现我没有使用`[DataContract]`和`[DataMember]`属性装饰我的一个 DTO，如[SOAP 支持 wiki 页面](https://github.com/ServiceStack/ServiceStack/wiki/SOAP-support)中所述。将这些添加到 DTO 后，它将在 WSDL 的类型部分中声明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-13T00:36:40.097

看看在`[DataContract (Namespace = "YOUR NAMESPACE")]`您的 DTO 之上使用。这就是我的对象被引用的方式。

```
[DataContract(Namespace = "My.WS.DTO")]
public class Account{
} 
```

我也在我的服务模型中使用它。[System.ServiceModel.ServiceContract()] 和 [System.ServiceModel.OperationContract()]

```
[System.ServiceModel.ServiceContract()]
public class SendGetAccountResponseService : IService<SendGetAccountNotification>
{
#region IService implementation
[System.ServiceModel.OperationContract()]
public object Execute (SendGetAccountNotification request)
{
    Console.WriteLine ("Reached");
    return null;
}
#endregion
} 
```

希望这有助于/解决您的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-14T17:28:36.647

我知道这是一个老问题，但我必须为最近拒绝支持 REST 的第 3 方添加 SOAP 支持到我的 ServiceStack 实现中，这样它仍然可能与其他仍然有这个问题的人相关。

我遇到了同样的问题：

> 无法导入绑定“BasicHttpBinding_ISyncReply”...

就像 mickfold 之前回答的那样，我需要将**[DataContract]**和**[DataMember]**添加到我的类定义及其属性中。

但我还必须在错误消失之前将以下内容添加到我的 AssemblyInfo.cs 文件中：

```
[assembly: ContractNamespace("http://schemas.servicestack.net/types", ClrNamespace = "My Type Namespace")] 
```

我假设对于声明了类型的每个命名空间，您都需要这些行之一，根据上面的原始问题将是**My.WS.DTO**。

# jquery - jQuery Sticky Float 在调整大小故障时保持元素稳定

> ID：13262801
> 
> 赞同：1
> 
> 时间：2012-11-07T03:37:52.063
> 
> 标签：jquery, menu, resize, sticky

我有一个具有默认相对定位的元素，最初使用 jQuery 垂直居中；当滚动出视图时，它变为固定位置并继续保持在页面顶部的视图中。

当我重新调整窗口大小并滚动到固定的元素时，.offset 声明不会更新，因此会导致抖动和进出视图。

如何修复脚本以支持窗口大小调整而不会出现故障？.offset 是否需要用另一种方法替换，或者 .offset 是否可以在重新调整大小时重新声明？

```
// Repeat menuJQfloat on resize
 $(window).resize(function () {
    menuJQfloat();
    navHomeY = nav.offset().top;
}); 
```

这是[jsFiddle 演示](http://jsfiddle.net/khJyz/70/)；要查看故障重新调整页面大小并重新滚动，您会注意到“固定菜单”会跳过或跳动。

**编辑：请记住，这个脚本在没有 JS 垂直居中的情况下工作得很好，但是当添加它时，当窗口的大小与第一次初始化时不同时，它一定会导致 nav.offset 计算错误。**

# c# - 从服务器数据库上传并在客户端计算机上打开文件

> ID：13262804
> 
> 赞同：0
> 
> 时间：2012-11-07T03:38:02.917
> 
> 标签：c#, asp.net, web-applications

如何组织从服务器数据库下载的文件并在客户端计算机上打开它？

我的代码仅在服务器上打开页面时才有效：

```
 OracleCommand oracleCom = new OracleCommand();
        oracleCom.Connection = oraConnect;
        oracleCom.CommandText = "Select m_content, f_extension From " + Session["tableNameIns"] +
                                            " where i_id = " + rowData;
        OracleDataAdapter adapter = new OracleDataAdapter();
        DataTable tableD = new DataTable();
        tableD.Locale = System.Globalization.CultureInfo.InvariantCulture;
        adapter.SelectCommand = oracleCom;
        adapter.Fill(tableD);

        string FileName = Path.GetTempPath();
        FileName += "tempfile" + tableD.Rows[0][1];

        byte[] file = new byte[0];
        file = (byte[])tableD.Rows[0][0];
        FileStream fs = new FileStream(FileName, FileMode.OpenOrCreate, FileAccess.Write);
        fs.Write(file, 0, file.GetUpperBound(0) + 1);
        fs.Close();
        System.Diagnostics.Process.Start(FileName); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T04:18:14.693

这在 Web 应用程序中是不可能的。
如果您想这样做，请编写一个 Windows 应用程序。

浏览器的安全限制不允许您从浏览器下载和直接运行 exe。
您可以在响应中发送 exe，用户在其中手动保存并运行它。

在您当前的设置中，exe 仍在服务器上编写和运行，无论请求是否来自。

`WriteAllBytes`顺便说一句，将字节数组写入文件更容易使用。您不必担心以这种方式锁定和处置对象。

```
File.WriteAllBytes(FileName, file); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T09:42:00.373

感谢您的回答！我是这样做的：

```
Response.ContentType = "APPLICATION/OCTET-STREAM";
Response.AddHeader("Content-Disposition", @"attachment;filename=\" + initFileName);
Response.BinaryWrite(file); 
```

其中：file - 它是二进制类型的参数。initFileName - 字符串类型文件名。只有 3 行）。

# java - 正则表达式电话号码模式

> ID：13262816
> 
> 赞同：4
> 
> 时间：2012-11-07T03:39:37.557
> 
> 标签：java, regex, phone-number

我有 3 类电话号码，即 Golden、Special 和 Normal。我正在尝试做的是当用户输入电话号码时，它会自动确定电话号码属于哪个类别。让我举一个黄金类别编号的示例：AA001234（AA 代表 2 位数字，具有相同的数字，如 11、22、33 等）。这是我得到的

```
public static void main(String[] args) {

    Scanner userinput = new Scanner(System.in);

    System.out.println("Enter Telephone Number");
    String nophone = userinput.next();

    String Golden = "(\\d{2})002345"; // <-- how to write the code if the user
    //enter the same digit for the first 2 number, it will belong to Golden category?
    String Special1 = "12345678|23456789|98765432|87654321|76543210";

    if (nophone.matches(Golden)) {
        System.out.println("Golden");
    }

    else if (nophone.matches(Special1)) {
        System.out.println("Special 1");
    }
    else {
        System.out.println("Normal");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T03:45:45.810

我不确定 Java 是否支持完整的正则表达式实现，但如果支持，您可以使用：

```
(\d)(\1)002345 
```

`\1`表示对第一个匹配项的反向引用（括号），因此`(\d)(\1)`将连续匹配两个相同的数字。

如果 Java 不支持这一点，我建议您对其进行硬编码，因为您只有 3 个类别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T03:45:26.150

您可以使用反向引用，例如`(\\d)\\1`. （例如`(\\d)\\1\\d*`）。

在哪里

1.  第一个`\\d`表示数字
2.  `\\1`表示相同的数字和
3.  `\\d*`表示 0 个或多个数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T03:53:17.930

如果数字的长度不是问题，您可以使用它。由于您使用的是 java，因此您需要两个斜杠。
`String Golden = "(\\d)\\1\\d*";`

如果数字的长度应该正好是八

> `String Golden = "(\\d)\\1\\d{6}";`

如果要匹配**五个**重复的数字，
`String Golden = "(\\d)\\1{4}\\d*";`

# python - Ajax python如何发布数据

> ID：13262824
> 
> 赞同：2
> 
> 时间：2012-11-07T03:41:09.323
> 
> 标签：python, ajax, google-app-engine

对不起，伙计们，也许以前有人问过这个问题。但是我google了几天，仍然无法解决问题。我正在使用带有 Python 的 Google App Engine 开发一个聊天系统。我希望用户输入她/他的消息并单击“提交”按钮。该操作将触发 Ajax 发布函数“addMsg()”将消息发布到 Chat 类（URL：“/chat”），这会将消息添加到数据存储区。还有另一个 Ajax 函数“updateMsg()”会定期更新消息列表。

该代码适用于消息更新，但是，我无法正确发布消息。有谁能够帮助我？谢谢。这是我的代码：

## 聊天.html：

```
 <p>
    <form method="" action="">
    <input type="text" name="message" size="60" /><br />
    <input type="button" value="Submit" onclick="addMsg('message')" />
    </form>
    </p>
    <div id="chatcontent"> </div>
    <script>
    function addMsg(message) {
        $.ajax({
            type: "POST",
            url: "/chat",
            data: {'message': message},
            cache: false
        });
    }
    </script>

    <script>
    $(document).ready(function() {
        function updateMsg() {
            $.ajax({
               url: "/message",
               cache: false,
               success: function(returndata){
                    $("#chatcontent").html(returndata);
               }
            });
            setTimeout(updateMsg, 4000);
        }
        updateMsg();
    });
    </script> 
```

## 消息.html：

```
 {% for chat in chatlist %}
    <p>
      {{ chat.text }} ({{ chat.user.account }}) {{chat.created|date:"D d M Y" }}
    </p>
    {% endfor %} 
```

## 聊天.py：

```
 # Called by URL "/chat"
    class Chat(webapp2.RequestHandler):
        def post(self):
            message = self.request.get('message')
            newchat = ChatMessage(user=self.session['userkey'], text=message, created=datetime.datetime.now())
    newchat.put()

    # Called by URL "/message"
    class Message(webapp2.RequestHandler):
        def get(self):
            que = db.Query(ChatMessage).order('-created')
            chatlist = que.fetch(limit=100)
            render(self, 'message.html', {'chatlist': chatlist})
            # Note: render() is a function to be imported, which is just a normal template rendering function. It works fine and is omitted here. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T03:58:54.103

聊天.html

```
<p>
<input type="text" name="message" size="60" /><br />
<input type="button" value="Submit" onclick="addMsg()" />
</p>
<div id="chatcontent"> </div>
<script>
function addMsg() {
    var message = $('input[name=message]').val();
    $.ajax({
        type: "POST",
        url: "/chat",
        data: {'message': message},
        cache: false
    });
}
</script> 
```

# php - 你如何处理'，php，javascript中人名中的单引号

> ID：13262826
> 
> 赞同：1
> 
> 时间：2012-11-07T03:41:23.770
> 
> 标签：php, javascript, mysql

我注意到某些名称条目，如 O'Rourke 或 O'reilly 在某些情况下会破坏 javascript。我想知道你是怎么处理的。我从 PHP/MYSQL 中提取这些名称并将它们放入 javascript 中。

您是在进入数据库之前还是在退出数据库之后替换它们？

提前致谢

```
google.load('visualization', '1', {packages:['table']});
      google.setOnLoadCallback(drawTable);
      function drawTable() {
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'First Name');
        data.addColumn('string', 'Last Name');
        data.addColumn('string', 'email');
        data.addColumn('string', 'Parent email 1');
        data.addColumn('string', 'Parent email 2');
        data.addColumn('string', 'Advisor');
        data.addColumn('string', 'Active');
        data.addColumn('string', 'Edit');
        //data.addColumn('number', '');
        data.addRows([
     <?php
   if(count($items))
   {
        foreach($items as $item)
        {
            foreach($advisors as $key=>$advisor)
            {
                if($item['advisor']==$advisor['id'])
                {
                    $ad=$advisor['last_name'];
                }
            }
            $active_icon = ($item['active']=='1'?'tick':'cross');
            $editlink = anchor('auth/admin/members/form/'.$item['id'],$this->bep_assets->icon('pencil'));
            echo "['".$item['first_name']."', '".$item['last_name']."', '".$item['email']
            ."', '".$item['parent_email1']."', '".$item['parent_email2']."', '".$ad."', '".$this->bep_assets->icon($active_icon)."','".$editlink."'],";
        }
   }

    ?>

        ]);

        var table = new google.visualization.Table(document.getElementById('table_div'));
        table.draw(data, {showRowNumber: true, allowHtml:true});
      } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T06:17:01.193

你经历了很多混乱和容易出错的字符串附加工作，只是为了输出一个 javascript 变量。相反，您应该做的是在 PHP 中构建您想要的数据结构（数组数组），然后`json_encode()`用来发出与 javascript 兼容的文字。编码器会自动转义所有引号等。

```
$itemOutput = array();
if(count($items)) {
    foreach($items as $item) {
        foreach($advisors as $key=>$advisor) {
            if($item['advisor']==$advisor['id']) {
                $ad=$advisor['last_name'];
            }
        }
        $active_icon = ($item['active']=='1'?'tick':'cross');
        $editlink = anchor('auth/admin/members/form/'.$item['id'],$this->bep_assets->icon('pencil'));
        $itemOutput[] = array(
            $item['first_name'],
            $item['last_name'],
            $item['email'],
            $item['parent_email'],
            $item['parent_email2'],
            $ad,
            $this->beep_assets->icon($active_icon),
            $editLink
        );
    }
}
echo "data.addRows(" . json_encode($itemOutput) . ");" ; 
```

如果您有一个对象或关联数组，它将作为 javascript 对象发出：

```
echo json_encode( 
    array( 'a'=>'aa', 'b'=>'bb'),
    array( 'c'=>'cc', 'd'=>'dd')
);
==> [{"a":"aa","b":"bb"},{"c":"cc","d":"dd"}] 
```

# styles - ISymbologyControl LoadDesktopStyleFile 和安装 ArcGIS Desktop 10 的问题

> ID：13262828
> 
> 赞同：1
> 
> 时间：2012-11-07T03:41:33.347
> 
> 标签：styles, desktop, arcgis, graphical-programming

我很抱歉我的英语不好。我使用 C++ 和 Qt 框架进行程序开发。我调用方法 ISymbologyControl LoadDesktopStyleFile 并收到错误代码：“1075 800a0433：此计算机上未安装 ArcGIS Desktop，因此无法读取样式文件”，但我已安装 ArcGIS Desktop 10.0。我使用 esriLicenseProductCodeArcEditor 许可证产品代码来初始化许可证：

```
IAoInitializePtr ipInit(CLSID_AoInitialize);
::AoInitialize(NULL);
esriLicenseStatus lic;
pIAoInit->Initialize(esriLicenseProductCodeArcEditor,&lic); 
```

程序启动并正常运行，但所有依赖于 ArcGIS Desktop 的 ArcObjects 都不起作用。当我使用 ArcGIS 9.3 时，一切正常。我使用#import 指令来使用桌面库，例如：

```
 #import c:\\Program Files (x86)\\ArcGIS\\Desktop10.0\\com\\esriDisplayUI.olb raw_interfaces_only raw_native_types no_namespace, named_guids 
```

对于所有必需的库。它在 9.3 中有效，但现在在 10.0 中无效。我的行为有什么不正确的地方？

# windows - 同时从多个应用程序访问网络摄像头

> ID：13262836
> 
> 赞同：4
> 
> 时间：2012-11-07T03:42:39.940
> 
> 标签：windows, driver, webcam, wrapper

问题背景 - 有两个不同的 Windows 应用程序试图同时访问计算机上的网络摄像头。目前，只有一个应用程序能够访问它。我希望能够允许两个应用程序同时访问网络摄像头。我的问题的一个常见示例是，Skype 和 yahoo messenger 试图同时访问计算机上的网络摄像头。

我发现了一些允许在 Windows 上执行此操作的软件（manycam.com、[http://www.splitcamera.com/ ）。](http://www.splitcamera.com/)但我不确定他们是如何实施的。我想自己编写代码来实现这一点，因为我的代码需要与其他 API 集成。

如果有人能阐明如何编写设备包装器来实现这一点，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T10:31:45.777

内核相机驱动程序注册了几个操作系统定义的回调。回调之一用于输出流。专用的 Windows 应用程序有一个到这个流的接口——你需要对这个主题做一些阅读，这不是 SO 范围内可以涵盖的东西。您需要在客户端应用程序和相机驱动程序之间分层的组件。该组件应拦截您的相机驱动程序输出并将其复制给注册的客户端。这可以在内核（过滤器驱动程序）或用户模式（首选）中实现。[http://msdn.microsoft.com/en-us/library/windows/hardware/ff557573%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/ff557573%28v=vs.85%29.aspx)是一个很好的起点。

注意：您的相机软件可能已经支持此功能（尽管我认为可能性很小），在这种情况下，您应该深入研究相应的文档。

# c# - datacacheexception 引用的缓存不存在

> ID：13262839
> 
> 赞同：0
> 
> 时间：2012-11-07T03:42:48.817
> 
> 标签：c#, asp.net, appfabric, windows-server

调用 factory.GetDefaultCache() 时出现以下错误...

**ErrorCode:SubStatus:Cache 引用不存在。联系管理员或使用缓存管理工具创建缓存。**

请帮忙。。谢谢。。

这是我的简单应用程序：

```
var config = new Microsoft.ApplicationServer.Caching.DataCacheFactoryConfiguration();
var servers = new List<Microsoft.ApplicationServer.Caching.DataCacheServerEndpoint>();
servers.Add(new Microsoft.ApplicationServer.Caching.DataCacheServerEndpoint("mymachine123", 22233));
config.Servers = servers;
var factory = new Microsoft.ApplicationServer.Caching.DataCacheFactory(config);

////var factory = _cacheFactory;

var cache = factory.GetDefaultCache();  <---- *** Error happens here..***
var key = "mykey";
var obj = cache[key];
if (obj == null)
{
    cache[key] = "I am data for caching";
}
obj = cache[key];
Console.WriteLine(obj); 
```

当我运行命令：start-cachecluster 时，我得到以下信息：

HostName : CachePort 服务名称 服务状态 版本信息 -------- ------------ --------- ----- ------------ mymachine123:22233 AppFabricCachingService UP 1 [1,1][1,1]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T04:27:30.470

刚刚自己设置了这个..这可能是一个权限问题。添加运行缓存服务的用户 via`Grant-CacheAllowedClientAccount <youraccountname>`

# python - 读取多个文本文件并在一列中写入一个文件

> ID：13262840
> 
> 赞同：-4
> 
> 时间：2012-11-07T03:43:05.200
> 
> 标签：python, file-io

我想做以下事情：

1.  将多个 ascii 文件 (*.txt) 读入内存。我需要*跳过*每个文件的前 4 行。这些文件中的整数值是非结构化的，一行一行地连续写入。每行的值的数量可以变化，并不重要。
2.  读取内存中的所有数据后，我需要将其写入一个文件，每行一个值，即一列。在写值之前，我需要写 3 行标题。

我需要将此作为脚本，我可以从终端（Bash）调用它。我感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T04:08:05.790

你的问题很模糊，但我想出了这个：

这些是我的假设：

1.  文本文件每一行中的“值”由空格分隔
2.  输出文件将按照传入文件的顺序包含值。因此，如果函数的参数是`f1`、和`f2`，则 中的值首先出现在 中，中的值出现在 中，依此类推`f3``outfilepath``f1``outfilepath``f2``outfilepath`

这是一个在这些假设下执行您想要的功能的函数：

```
def readwrite(infilepaths, outfilepath):
    with open(outfilepath, 'w') as outfile:
        outfile.write(threeLinesOfHeader + '\n')
        for infilepath in infilepaths:
            with open(infilepath) as infile:
                skipLines = 4
                for _ in range(skipLines):
                    infile.readline()
                values = itertools.chain.from_iterable(line.strip().split() for line in infile)
                outfile.write('\n'.join(values) + '\n')
    print 'done' 
```

希望这可以帮助

# windows - closesocket() 偶尔冻结一次

> ID：13262841
> 
> 赞同：1
> 
> 时间：2012-11-07T03:43:20.257
> 
> 标签：windows, sockets, freeze

这就是我关闭套接字的方式：

```
LINGER lingerStruct;
lingerStruct.l_onoff = 1;
lingerStruct.l_linger = 0;
setsockopt(Clients[iClientID].ClientSocket, SOL_SOCKET, SO_LINGER, (char*)&lingerStruct, sizeof(lingerStruct));
CancelIo((HANDLE)Clients[iClientID].ClientSocket);
shutdown(Clients[iClientID].ClientSocket, SD_BOTH);
closesocket(Clients[iClientID].ClientSocket); // << Hangs here 
```

经过大约 2~10 小时的运行时间并关闭超过 500 个套接字后，碰巧该随机套接字不想关闭并且 closesocket() 永远挂在关键部分（使用调试器发现这一点）。

我究竟做错了什么？

编译器：Visual Studio 2010 SP1 (C++) 操作系统：Windows Server 2008 R2 x64

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T09:16:13.000

CancelIo 函数不是同步的，或者至少，它没有记录为保证是同步的。如果该套接字上的 I/O 处于挂起状态，您应该等到收到确认 I/O 已取消的完成通知（或者，可能在取消请求排队之前已成功完成）。

一旦收到完成通知，关闭套接字应该是安全的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T06:05:28.753

```
LINGER lingerStruct;
lingerStruct.l_onoff = 1;
lingerStruct.l_linger = 0;
setsockopt(Clients[iClientID].ClientSocket, SOL_SOCKET, SO_LINGER, (char*)&lingerStruct, sizeof(lingerStruct)); 
```

摆脱这一切。这对你没有任何好处，对同伴也没有好处。只需调用`closesocket()`并让 TCP 在其默认模式下工作。或者您是否故意试图导致数据丢失并在对等方处重置？如果是这样，为什么？

```
CancelIo((HANDLE)Clients[iClientID].ClientSocket); 
```

我也很想摆脱它。关闭套接字应该可以解决我的所有想法，但我不是异步 I/O 方面的专家。你可以试试。

```
shutdown(Clients[iClientID].ClientSocket, SD_BOTH); 
```

摆脱它。之前是多余的`closesocket()`。

# android - 如何将 EditText 中的图像保存到 SharedPreferences 并读出？

> ID：13262843
> 
> 赞同：1
> 
> 时间：2012-11-07T03:43:31.633
> 
> 标签：android, android-edittext

我写了一个富文本编辑，我想在 EidtText 中插入一些图像，使用这些代码：

```
 public void insertImage(int i,Context context){

    Bitmap bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.notes_icon);
    if(i==1){
        bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.smileyface);
    }
    ImageSpan imageSpan = new ImageSpan(bitmap);
    SpannableString spannableString = new SpannableString("face");
    spannableString.setSpan(imageSpan, 0, 4, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);

    EditText contentText = (EditText) findViewById(R.id.content);
    contentText.append(spannableString);
} 
```

它可以工作，图像显示在 EditText 中。但我想将内容保存到 SharedPreferences。我使用 Html.toHtml ，我发​​现 img 选项卡是并保存到 SharedPreferences。因此，当我将其读出并显示给 EditText 时，图像变成了白框。

当 Html.toHtml 时如何在 imge scr 后面给出一些值？因为有很多图像，我想从不同的价值中识别。

# string - 如何在 WP7 中从字符串中删除重音符号

> ID：13262845
> 
> 赞同：5
> 
> 时间：2012-11-07T03:43:40.020
> 
> 标签：string, windows-phone-7, diacritics, normalize, non-ascii-characters

我想从 Windows Phone 7 中的字符串中删除重音符号（变音符号）。[这里](https://stackoverflow.com/questions/249087/how-do-i-remove-diacritics-accents-from-a-string-in-net)的解决方案适用于 .NET（桌面版）。但是，WP7 字符串没有`Normalize`方法。

[有人建议从 string 更改为 byte](http://social.msdn.microsoft.com/Forums/en-US/wpdevelop/thread/e274873c-622d-423b-ba74-74b1fd491a78/)，但我不知道他的意思。如何去除口音？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T09:06:32.130

我用这个：

```
public static string RemoveAccents(this string accentedStr)
{
    byte[] tempBytes = Encoding.GetEncoding("ISO-8859-8").GetBytes(accentedStr);
    return Encoding.UTF8.GetString(tempBytes, 0, tempBytes.Length);
} 
```

编辑：此解决方案适用于 Windows 8 应用程序，但不适用于 Windows Phone。到目前为止，我发现的最佳解决方案是本手册：http:
[//invokeit.wordpress.com/2011/10/06/how-to-remove-diatrics-accent-marks-in-windows-phone-7-x /](http://invokeit.wordpress.com/2011/10/06/how-to-remove-diatrics-accent-marks-in-windows-phone-7-x/)

# c++ - ACM 图像压缩算法 C++

> ID：13262849
> 
> 赞同：2
> 
> 时间：2012-11-07T03:44:28.070
> 
> 标签：c++, algorithm, compression

我一直在努力提高 C++ 水平，所以我一直在解决为编程竞赛设计的问题。我几天前就开始了这个问题，并且无法解决我的一生。我需要一些关于我的算法以及如何修复它的帮助。这是问题所在：[ACM Image Compression problem](https://icpcarchive.ecs.baylor.edu/index.php?option=com_onlinejudge&Itemid=8&category=404&page=show_problem&problem=2927)

**我的代码：**我在下面解释。

```
#include "Compress.h"
using namespace std;

Compress::Compress(){
    size = 0, threshold = 0, nRows=0, nCols=0;
    // Enter in a file name
    cout << "Welcome. Please type in the name of the file to read the numbers.\n";
    cin >> readFileName;

    inFile.open(readFileName.c_str());
    if(!inFile.is_open()) {
        cout << "Failed to open the file! Press Enter to exit..." << endl;
        exit(1);
    }

    //Finding the array size and threshold
    inFile >> size >> threshold;

    nRows = size;
    nCols = size;
    topright = size;
    bottomleft = size;

    //Let's make the array
    // creating the columns
    compressArray = new int* [nCols];

    // creating the rows
    for (int r = 0; r < nRows; r++){
        compressArray[r] = new int[nRows];
    }

    // FIll the array
    for (int i = 0; i < nRows; i++){
        for (int j = 0; j < nCols; j++){
            inFile >> compressArray[i][j];
        }
    }

    inFile.close();

    // Show before editing.
    print();
    work(0, nRows, 0, nCols);

}
Compress::~Compress(){
    for (int i = 0; i < nRows; i ++){
        delete compressArray[i];
    }
    delete [] compressArray;
}

void Compress::work(int start_x, int end_x, int start_y, int end_y){
    int nb_blacks = 0;
    int nb_whites = 0;
    int total_blocks = 0;
    int majority = 0;
    int percent = 0;

     cout << start_x << end_x << start_y << end_y << "\n------\n";

    for(int i = start_x; i < end_x; i++){
        for(int j = start_y; j < end_y; j++){
            if(compressArray[i][j] == 1){
                nb_blacks++;
            }
        }
    }

    total_blocks = ((end_x - start_x) * (end_y - start_y));
    nb_whites = total_blocks - nb_blacks;

    // give the max back
    majority = max(nb_blacks, nb_whites);
    // find the percent of the highest amount of colored blocks.
    percent = ((majority*100)/total_blocks);

    cout << "\n----\nPercent: " << percent << " Threshold: " << threshold  << endl;

    // majority/total_blocks is determining the percent of the greater
    // color in the box. We are comparing it to the threshold percent.
    if (percent >= threshold){
        for(int i = start_x; i < end_x; i++){
            for(int j = start_y; j < end_y; j++){
                if(nb_blacks > nb_whites) compressArray[i][j] = 1;
                else compressArray[i][j] = 0;
            }
        }
    }
    else {
            topright = topright/2;
            bottomleft = bottomleft/2;

            work(start_x, (end_x/2), (topright), end_y);
            work(start_x, (end_x/2), start_y, (end_y/2));
            work((bottomleft), end_x, start_y, (end_y/2));
            work((bottomleft), end_x, (topright), end_y);

    }

}

void Compress::print(){
    for (int r = 0; r < nRows; r++){
        for (int c = 0; c < nCols; c++){
            cout << compressArray[r][c];
        }
        cout << endl;
    }
} 
```

所以，我的程序所做的是计算图像中黑色方块的数量（1）。然后将其与白色方块（0）的数量进行比较。无论哪个更大，都会根据图像中的正方形数量转换为百分比。它将它与阈值进行比较。如果阈值小于百分比......整个图像变成了大多数颜色。

如果阈值更高......它会分成四个递归部分并放大。它将从右上角开始，然后是左上角，左下角和右下角。

我的程序适用于 4 x 4 的正方形，因为它正确地分成了四个部分。但是，对于 8 x 8 的正方形……如果需要将其分解为小于四个部分，那么一切都会一团糟。

我知道它为什么这样做。我放大递归函数的算法是错误的。如果正方形是 8 x 8 ... 参数将类似于

> 0, 8, 0, 8 = 看整个正方形
> 
> 0、4、4、8 = 右上角
> 
> 使用 4 x 4 0、2、6、8 的角 = 看着最小的右上角
> 
> 2乘2的正方形。

我只是不知道可以得到我需要的数学函数。我不知道如何解决 8 x 8 方格的问题。我的代码甚至可以修复吗？还是我需要想出另一种解决方法？如果是这样，怎么做？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T18:51:59.327

修复！数学函数只是一种痛苦。

**头功能**

```
#include<cstdlib>
#include<iostream>
#include<string>
#include<fstream>

using namespace std;

class Compress{
    public:
        Compress();
        ~Compress();
        void input();
        void work(int start_x, int end_x, int start_y, int end_y);
        void print();

    private:
        int size;
        int threshold;
        int** compressArray;
        int nRows, nCols;

        string readFileName;
        ifstream inFile;
}; 
```

**文件**

```
#include "Compress.h"
using namespace std;

Compress::Compress(){
    size = 0, threshold = 0, nRows=0, nCols=0;
    // Enter in a file name
    cout << "Welcome. Please type in the name of the file to read the numbers.\n";
    cin >> readFileName;

    // Open the file.
    inFile.open(readFileName.c_str());
    if(!inFile.is_open()) {
        cout << "Failed to open the file! Press Enter to exit..." << endl;
        exit(1);
    }

    //Finding the array size and threshold
    inFile >> size;

    nRows = size;
    nCols = size;

    // Enter a threshold.
    cout << "Enter the desired threshold between 50-100: ";
    cin >> threshold;

    // Keep asking for the desired threshold until it is given.
    while (threshold < 50 || threshold > 100){
        cout << "\nIncorrect Threshold.\n";
        cout << "Enter the desired threshold between 50-100: ";
        cin >> threshold;
    }

    //Let's make the array
    // creating the columns
    compressArray = new int* [nCols];

    // creating the rows
    for (int r = 0; r < nRows; r++){
        compressArray[r] = new int[nCols];
    }

    // FIll the array
    for (int i = 0; i < nRows; i++){
        for (int j = 0; j < nCols; j++){
            inFile >> compressArray[i][j];
        }
    }

    inFile.close();

    // Show before editing.
    print();
    work(0, nRows, 0, nCols);

}
Compress::~Compress(){
    for (int i = 0; i < nRows; i ++){
        delete compressArray[i];
    }
    delete [] compressArray;
}

void Compress::work(int start_x, int end_x, int start_y, int end_y){
    int Size = end_y - start_y; // Finding the midpoints.
    int nb_blacks = 0;
    int nb_whites = 0;
    int total_blocks = 0;
    int majority = 0;
    int percent = 0;

//    Testing everything.

//    cout << "\nx1, y1: " << start_x << "," << start_y << " x2,y2: " << end_x << "," << end_y << endl;
//    for (int r = start_x; r < end_x; r++){
//        for (int c = start_y; c < end_y; c++){
//            cout << compressArray[r][c];
//        }
//        cout << endl;
//    }

    // Initial case. If 1, break and start returning results
    if (end_x <= start_x || end_y <= start_y){
        return;
    }

   //  Keep breaking it down until it reaches 1.
    else {
        // Count the Number of Black pieces
        for(int i = start_x; i < end_x; i++){
            for(int j = start_y; j < end_y; j++){
                if(compressArray[i][j] == 1){
                    nb_blacks++;
                }
            }
        }

        // Find the total and number of white pieces.
        total_blocks = ((end_x - start_x) * (end_y - start_y));
        nb_whites = total_blocks - nb_blacks;

        // give the max back
        majority = max(nb_blacks, nb_whites);
        // find the percent of the highest amount of colored blocks.
        percent = ((majority*100)/total_blocks);

//        cout << "Percent: " << percent << " Threshold: " << threshold  << "\n-----\n";

        // majority/total_blocks is determining the percent of the greater
        // color in the box. We are comparing it to the threshold percent.
        if (percent >= threshold){
            for(int i = start_x; i < end_x; i++){
                for(int j = start_y; j < end_y; j++){
                    if(nb_blacks > nb_whites) compressArray[i][j] = 1;
                    else compressArray[i][j] = 0;
                }
            }
        }

        // Keep breaking down until we reach the initial case.
        else {
            work((end_x - (Size/2)), (end_x), (start_y), (start_y + (Size/2)));
            work(start_x, (start_x + (Size/2)), (start_y), (start_y + (Size/2)));
            work((start_x), (start_x + (Size/2)), (end_y - (Size/2)), end_y);
            work((end_x - (Size/2)), end_x, (end_y - (Size/2)), end_y);
//
//            work((start_x), (mid_x), (mid_y), end_y);
//            work(start_x, (mid_x ), (start_y), (mid_y));
//            work((mid_x), end_x, start_y, (mid_y));
//            work((mid_x), end_x, (mid_y), end_y);
        }
    }
}

void Compress::print(){

    // Print the function
    cout << "\nImage: " << threshold << "%\n";
    for (int r = 0; r < nRows; r++){
        for (int c = 0; c < nCols; c++){
            cout << compressArray[r][c];
        }
        cout << endl;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T05:43:07.137

首先，你的阅读习惯有一些问题：

第二个数组创建循环是错误的，应该`nCols`用作循环的限制而不是`nRows`：

```
// creating the rows
for (int r = 0; r < nCols; r++){
    // Remember you're creating the "row"s for every column
    compressArray[r] = new int[nRows];
} 
```

根据问题阐述，输入格式在位图像素之间不包含空格，因此您必须读取一行数据，然后遍历该行以提取单个字符：

```
// FIll the array
for (int i = 0; i < nRows; i++){
    // You should #include <string> for this to work
    string line;
    inFile >> line;
    for (int j = 0; j < nCols; j++) 
        compressArray[i][j] = line[j] - '0';
} 
```

阅读完成后，您可以对`work`例程进行一些改进：

您要查找的公式不是火箭科学，请看下图：

![在此处输入图像描述](../Images/adc9afced9600fc02322060563e0bb76.png)

只需像这样对位图进行分区，并对每个扇区进行相应的调用`work`（这里没有看到`top/bottom`-`right/left`变量的用途）

您的算法是递归算法，但没有初始情况，因此您的算法无限期执行，您应该在任何递归调用之前检查`start`和之间的差异是否为 0。`end`

还有其他警告，但您应该先解决这些问题，然后再继续

IMO，你解决这个问题的想法很好，只是需要一点点打磨

希望这可以帮助！

**PS：** *将OOP基础知识（例如课程）应用于一般软件开发是一个非常好的（如果不是最好的）实践，但是对于编程竞赛考虑时间因素和开发解决方案的软件复杂性，还不错，但请考虑到，在许多情况下，它可能会导致您浪费时间并增加一些不必要的复杂性*

# coding-style - Pep8 Python3.3 矛盾

> ID：13262859
> 
> 赞同：1
> 
> 时间：2012-11-07T03:45:28.470
> 
> 标签：coding-style, python-3.x, whitespace, pep8

Pep 8 有以下规则

> 空行
> 
> 用两个空行分隔顶级函数和类定义。
> 
> 类中的方法定义由一个空行分隔。
> 
> 可以（谨慎地）使用额外的空白行来分隔相关功能组。在一堆相关的单行代码（例如一组虚拟实现）之间可以省略空行。
> 
> 谨慎地在函数中使用空行来指示逻辑部分。
> 
> Python 接受 control-L（即 ^L）换页符作为空格；许多工具将这些字符视为页面分隔符，因此您可以使用它们来分隔文件相关部分的页面。请注意，一些编辑器和基于 Web 的代码查看器可能无法将 control-L 识别为换页符，并且会在其位置显示另一个字形。

但是，类定义中不能有一个*完全空白的行*

我头脑中的例子：

```
class bunny:
    def spam(self):
        pass

    def eggs(self):
        pass

#a second example
class bunny2:
    def __init__(self):
        self._eggs = None

    def eggs(self):
        doc = "Spam and Eggs"

        def fget(self, value):
            return self._eggs

        def fset(self, value):
            self._eggs = value

        def fdel(self):
            del self._eggs

        return locals()
    eggs = property(**eggs()) 
```

spam 和 egg 之间的行必须是空行，但是，这将导致意外缩进的解析错误。是否有另一个角色应该进入那个空间？我的假设只是将空格/制表符留在“空白”行，因为它更具可读性。

在第二个示例中，嵌套的 defs 需要维护其先前行的缩进，以使解析正常工作。处理此问题的正确 PEP 8 方法是什么？空行，带空格的空行，没有行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T04:00:51.747

如果您在 REPL 中工作，则不能有完全空白的行。但是无论如何，在 REPL 中输入的代码没有理由严格遵守 PEP 8。但在文件中，遵循 PEP 8 是个好主意。

# java - 写出到控制台和文件

> ID：13262860
> 
> 赞同：0
> 
> 时间：2012-11-07T03:45:40.100
> 
> 标签：java, file, file-io

我正在尝试将我的 java 程序的输出写入文件。

用户输入了一些不应包含在文件中的数据。当程序响应时，它应该向用户输出信息，并将输出单独写入**文件**。

从我在驱动程序类的顶部开始的示例中：

```
static BufferedReader in = new BufferedReader(new InputStreamReader(System.in));
static String lineFromOutput; 
```

这段代码在我可能收到程序输出的每个地方：

```
try {
    lineFromInput = in.readLine();
    FileWrite.write(lineFromInput);
} catch (IOException e) {
   // TODO Auto-generated catch block
   e.printStackTrace();
} 
```

它的类是：

```
public class FileWrite {
    public static void write(String message) { 
        PrintWriter out = null;
        try {
            out = new PrintWriter(new FileWriter("output.txt"), true);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        out.write(message);
        out.close();
    }
} 
```

它创建输出文件，但仅此而已。没有写入程序的任何输出。我查看了许多示例，这似乎是最简单的方法，尽管我对任何其他建议持开放态度。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T04:23:26.740

每次调用 write 都会打开和关闭文本文件。每次打开它都会被覆盖，所以我希望只有最后要写入的内容出现在文件中。

我建议从构造函数打开输出文件，然后从 close 方法关闭它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T03:55:29.333

我认为它应该在`InputStremReader`下面`t`的声明中使用：

```
static BufferedReader in= new BufferedReader(new OutputtStreamReader(System.in));
static String lineFromOutput; 
```

作为

```
static BufferedReader in = new BufferedReader(new InputStreamReader(System.in));
static String lineFromOutput; 
```

**编辑：**这很好用。**请确保您通过输入控制台提供输入。另请注意，它仅读取和写入（覆盖）单行。**

```
 public class FileWrite {
       public static void write(String message) { 
                PrintWriter out = null;
              try {
                  out = new PrintWriter(new FileWriter("output.txt"), true);
              } catch (IOException e) {
                  // TODO Auto-generated catch block
                  e.printStackTrace();
              }
                out.write(message);
                out.close();
        }

       public static void main(String[] args){
           String lineFromInput;
           try {
                BufferedReader in = new BufferedReader(
                                            new InputStreamReader(System.in));
                lineFromInput = in.readLine();
                FileWrite.write(lineFromInput);
                in.close();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
           }
       }
     } 
```

**编辑 2：** 更新了多线输入的程序。**它不是每次写入文件时打开和关闭文件的最佳方式，但我只是想让您的程序通过细微的更改即可工作。**如果您需要建议以避免重复打开/关闭输出文件，请告诉我。

变化亮点：

1.  读取行直到在输入中接收到“exit”（根据需要更改单词）
2.  `append`以模式打开文件。

    ```
    public class FileWrite {
       public static void write(String message) { 
                PrintWriter out = null;
              try {
                  out = new PrintWriter(new FileWriter("output.txt", true), true);
              } catch (IOException e) {
                  // TODO Auto-generated catch block
                  e.printStackTrace();
              }
                out.write(message);
                out.close();
        }

       public static void main(String[] args){
           String lineFromInput = "";
           try {
                System.out.println("Provide the inputs in any number of lines");
                System.out.println("Type \"exit\" in new line when done");
                BufferedReader in = new BufferedReader(
                                    new InputStreamReader(System.in));
                while(!"exit".equals(lineFromInput)){
                   lineFromInput = in.readLine();
                   FileWrite.write(lineFromInput+System.lineSeparator());
                }
                in.close();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
           }
       }
     } 
    ```

**EDIT3：**您更新的程序`Scanner`用于读取输入：

```
 private static HashMap<Integer, Object> shapes = 
                                              new HashMap<Integer, Object>();
        static int i = 0;

        public static void main(String[] args) {
            PrintWriter output = null;
            Scanner scanner = new Scanner(System.in);
            try {
                output = new PrintWriter(new FileWriter("output.txt"), true);
            } catch (IOException e1) {
                System.err.println("You don't have accress to this file");
                System.exit(1);
            }
            String command = "";
            while(!"quit".equalsIgnoreCase(command)){
                System.out.println("Enter your Command: ");
                command = scanner.next();
                if (command.equalsIgnoreCase("create")) {
                    String type = scanner.next();
                    if (type.equalsIgnoreCase("line")) {
                        double length = scanner.nextDouble();
                        Line l = new Line(length);
                        scanner.nextLine();//flush the previous line
                        String line = scanner.nextLine();
                        output.format("%s", line);
                        shapes.put(i, l);
                        i++;
                    }else if (type.equalsIgnoreCase("circle")) {
                        double radius = scanner.nextDouble();
                        String color = scanner.next();
                        Circle c = new Circle(radius, Colors.valueOf(color));
                        scanner.nextLine();//flush the previous line
                        String line = scanner.nextLine();
                        output.format("%s", line);
                        shapes.put(i, c);
                        i++;
                    }else if (type.equals("rectangle")) {
                        double length = scanner.nextDouble();
                        double width = scanner.nextDouble();
                        String color = scanner.next();
                        Rectangle r = new Rectangle(length, width,
                        Colors.valueOf(color));
                        scanner.nextLine();//flush the previous line
                        String line = scanner.nextLine();
                        output.format("%s", line);
                        shapes.put(i, r);
                        i++;
                    }else if (type.equals("square")) {
                        double length = scanner.nextDouble();
                        String color = scanner.next();
                        Square s = new Square(length, Colors.valueOf(color));
                        scanner.nextLine();//flush the previous line
                        String line = scanner.nextLine();
                        output.format("%s", line);
                        shapes.put(i, s);
                        i++;
                    }
                }else if (command.equals("printbyperimeter")) {
                    Shape[] shapeArray = shapes.values().toArray(new Shape[0]);
                    Arrays.sort(shapeArray);
                            System.out.println("Print in ascending order...");
                    for (int j = 0; j < shapeArray.length; j++) {
                        Shape temp = shapeArray[j];
                        if (temp.getClass().getName().equals("Line")) {
                            System.out.println("Shape: " 
                                    + temp.getClass().getName() + ", Perimeter: "
                                    + temp.getPerimeter());
                                } else {
                            System.out.println("Shape: " 
                                    + temp.getClass().getName() + ", Color: "
                                    + ((Colorable) temp).getColor()
                                    + ", Perimeter: " + temp.getPerimeter());
                                }
                            }
                }else if (command.equals("printbyarea")) {
                    Shape[] shapeArray = shapes.values().toArray(new Shape[0]);
                    System.out.println("Print in random order...");
                    for (int j = 0; j < shapeArray.length; j++) {
                        Shape temp = shapeArray[j];
                        if (!temp.getClass().getName().equals("Line")) {
                            System.out.println("Shape: "
                                    + temp.getClass().getName() + ", Color: "
                                    + ((Colorable) temp).getColor() + ", Area: "
                                    + ((Areable) temp).getArea());
                                }
                        }
                }else if (command.equals("quit")) {
                    scanner.close();
                    System.exit(0);
                }
           }
           output.close();
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T04:18:11.407

尝试使用代码。这个对我有用。您只需要更改文件路径以匹配您想要输出的位置。我在这里使用我认为是首选的 BufferedWriter。

```
public static void main(String[] args) {
BufferedReader in = new BufferedReader(new InputStreamReader(System.in));
String lineFromOutput;

try {
    lineFromOutput = in.readLine();
    FileWrite.write(lineFromOutput);
} catch (IOException e) {
// TODO Auto-generated catch block
 e.printStackTrace();
}

}

public static class FileWrite {
    private static void write(String message) throws IOException { 
      BufferedWriter out = null;
    try {
        out = new BufferedWriter(new FileWriter(new File("C:\\Users\\Teresa\\Dropbox\\output.txt")));
        //Replace the above line with your path.
        out.write(message);
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
      out.close();
    }
} 
```

# python - 在 Python 中过滤列表

> ID：13262864
> 
> 赞同：1
> 
> 时间：2012-11-07T03:46:35.503
> 
> 标签：python, python-3.x

词典来源列表

```
[
    {'main_id': 0, '_id': ObjectId('111111111111111'), 'key1': 'val1'}, 
    {'main_id': 1, '_id': ObjectId('222222222222222'), 'key1': 'val2'}, 
    {'main_id': 1, '_id': ObjectId('333333333333333'), 'key1': 'val3'}, 
    {'main_id': 4, '_id': ObjectId('444444444444444'), 'key1': 'val4'},
    {'main_id': 2, '_id': ObjectId('555555555555555'), 'key1': 'val5'},
] 
```

过滤的字典列表

```
[
    {'main_id': 0, '_id': ObjectId('111111111111111'), 'key1': 'val1'}, 
    {'main_id': 1, '_id': ObjectId('222222222222222'), 'key1': 'val2'}, 
    {'main_id': 2, '_id': ObjectId('555555555555555'), 'key1': 'val3'},
] 
```

我想获得一个新的字典列表：

```
[
    {'main_id': 1, '_id': ObjectId('333333333333333'), 'key1': 'val3'}, 
    {'main_id': 4, '_id': ObjectId('444444444444444'), 'key1': 'val4'},
] 
```

换句话说，我希望一个新列表包含过滤列表中不存在的值。你的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T03:52:18.977

一个班轮：

```
result = [s for s in original if s not in filtered] 
```

* * *

或使用[`filter`](http://docs.python.org/2/library/functions.html#filter)：

```
filter(lambda x: x not in filtered, original) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T03:51:59.027

```
full = [
    {'main_id': 0, '_id': ObjectId('111111111111111'), 'key1': 'val1'}, 
    {'main_id': 1, '_id': ObjectId('222222222222222'), 'key1': 'val2'}, 
    {'main_id': 1, '_id': ObjectId('333333333333333'), 'key1': 'val3'}, 
    {'main_id': 4, '_id': ObjectId('444444444444444'), 'key1': 'val4'},
    {'main_id': 2, '_id': ObjectId('555555555555555'), 'key1': 'val5'},
]
filtered = [
    {'main_id': 0, '_id': ObjectId('111111111111111'), 'key1': 'val6'}, 
    {'main_id': 1, '_id': ObjectId('222222222222222'), 'key1': 'val7'}, 
    {'main_id': 2, '_id': ObjectId('555555555555555'), 'key1': 'val8'},
]

diff = [x for x in full if x not in filtered] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T03:54:23.240

使用原始数据：

```
# dummy!
ObjectId = str

original = [
    {'main_id': 0, '_id': ObjectId('111111111111111'), 'key1': 'val1'}, 
    {'main_id': 1, '_id': ObjectId('222222222222222'), 'key1': 'val2'}, 
    {'main_id': 1, '_id': ObjectId('333333333333333'), 'key1': 'val3'}, 
    {'main_id': 4, '_id': ObjectId('444444444444444'), 'key1': 'val4'},
    {'main_id': 2, '_id': ObjectId('555555555555555'), 'key1': 'val5'},
]

filtered = [
    {'main_id': 0, '_id': ObjectId('111111111111111'), 'key1': 'val1'}, 
    {'main_id': 1, '_id': ObjectId('222222222222222'), 'key1': 'val2'}, 
    {'main_id': 2, '_id': ObjectId('555555555555555'), 'key1': 'val3'},
]

new_list = [d for d in original if d not in filtered]

print(new_list) 
```

# symfony - 验证不存在于表单中但存在于实体中的字段

> ID：13262868
> 
> 赞同：7
> 
> 时间：2012-11-07T03:46:44.757
> 
> 标签：symfony, symfony-forms

我有一个用户注册表格，表格中只有用户名字段。在我的表单中，我希望只允许用户输入用户名。Nicename 将与注册时的用户名相同。

此表单绑定到用户实体，即在我的表单类型类中：

```
public function setDefaultOptions(OptionsResolverInterface $resolver)
{
    $resolver->setDefaults(array(
        'data_class' => 'Some\Bundle\Entity\User',
    ));
} 
```

实体 User，它为 username 和 nicename 设置了 NotBlank 约束。

```
namespace Some\Bundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Validator\Constraints as Constraints;

//...

class User
{
    //...

    /**
     * @var string $username
     *
     * @ORM\Column(name="user_login", type="string", length=60, unique=true)
     * @Constraints\NotBlank()
     */
    private $username;

    /**
     * @var string $nicename
     *
     * @ORM\Column(name="user_nicename", type="string", length=64)
     * @Constraints\NotBlank()
     */
    private $nicename;

    //... 
```

但是，如果我构建一个只有用户名但没有 nicename 的表单，则在验证时，即`$form->isValid()`它无法验证。

为了绕过这个，我想出了以下内容：

```
namespace Some\Bundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Some\Bundle\Form\Type\RegisterType;
//...

class UserController extends Controller
{
   //...
public function registerAction()
{
    //...
    $request = $this->getRequest();
    $form = $this->createForm(new RegisterType());

    if ($request->getMethod() == 'POST') {
        // force set nicename to username.
        $registerFields = $request->request->get('register');
        $registerFields['nicename'] = $registerFields['username'];
        $request->request->set('register', $registerFields);

        $form->bind($request);

        if ($form->isValid()) {
            $user = $form->getData();
            //persist $user, etc... 
```

在表单类型中，我将其添加到我的`buildForm`方法中：

```
$builder->add('nicename', 'hidden'); 
```

但是我觉得这很不优雅，给控制器留下了一些负担（从请求对象中提取，放入数据，然后将其放回请求对象，哎哟！），如果用户要检查隐藏字段，则可以看到生成的 HTML 的源代码。

无论如何，至少任何使用表单类型的控制器都不需要执行上述操作，同时保留实体约束？

我无法更改备份用户实体的表架构，并且我想保留 NotBlank 约束。

* * *

**编辑：**经过长时间的麻烦，我决定使用验证组并且它起作用了。

```
class User
{
//...

/**
 * @var string $username
 *
 * @ORM\Column(name="user_login", type="string", length=60, unique=true)
 * @Constraints\NotBlank(groups={"register", "edit"})
 */
private $username;

/**
 * @var string $nicename
 *
 * @ORM\Column(name="user_nicename", type="string", length=64)
 * @Constraints\NotBlank(groups={"edit"})
 */
private $nicename; 
```

表格类型：

```
public function setDefaultOptions(OptionsResolverInterface $resolver)
{
    $resolver->setDefaults(array(
        'data_class' => 'Some\Bundle\Entity\User',
        'validation_groups' => array('register', 'Default')
    ));
} 
```

这`'Default'`是必需的，否则它会忽略我在表单类型方法中添加的所有其他约束`buildForm`......请注意，它区分大小写：`'default'`不起作用。

虽然，我发现这还不够（很抱歉我没有把它放在我原来的问题中），因为当我坚持时，我需要在我的控制器中这样做：

```
$user->setNicename($user->getUsername()); 
```

作为奖励，我通过添加[表单事件订阅者将其从控制器移动到表单类型级别](http://symfony.com/doc/current/cookbook/form/dynamic_form_generation.html#adding-an-event-subscriber-to-a-form-class)

在表单类型`buildForm`方法中：

```
$builder->addEventSubscriber(new RegisterPostBindListener($builder->getFormFactory())); 
```

和 RegisterPostBindListener 类

```
<?php
namespace Some\Bundle\Form\EventListener;

use Symfony\Component\Form\Event\DataEvent;
use Symfony\Component\Form\FormFactoryInterface;
use Symfony\Component\EventDispatcher\EventSubscriberInterface;
use Symfony\Component\Form\FormEvents;

class RegisterPostBindListener implements EventSubscriberInterface
{

public function __construct(FormFactoryInterface $factory)
{

}

public static function getSubscribedEvents()
{
    return array(FormEvents::POST_BIND => 'setNames');
}

public function setNames(DataEvent $event)
{
    $data = $event->getData();

    $data->setNicename($data->getUsername());
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T07:10:06.217

我认为您应该使用[验证组](http://symfony.com/doc/3.2/validation/groups.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T11:38:55.210

在这种情况下，您应该使用[回调](http://symfony.com/doc/current/reference/constraints/Callback.html)断言来创建自定义验证规则。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T04:45:56.200

在您的用户实体中，您可以判断哪个字段可以为空：

```
/**
 *@ORM\Column(type="string", length=100, nullable=TRUE)
 */
 protected $someVar; 
```

这样你的视图控制器就不需要做任何事情了。

忘了提。您还可以定义一个 PrePersist 条件来初始化您的 nicename 变量：

```
// you need to first tell your User entity class it has LifeCycleCallBacks:

/**
 * @ORM\Entity()
 * @ORM\HasLifecycleCallbacks()
 */
class User
{

     ...

    /**
     *@ORM\PrePersist
     */
     public function cloneName()
     {
         $this->nicename = $this->username;
     }
} 
```

# javascript - 如何创建一个也是输入文本框的选择列表？

> ID：13262872
> 
> 赞同：1
> 
> 时间：2012-11-07T03:47:23.443
> 
> 标签：javascript, jquery, html

我想创建一个选择列表，就像在谷歌邮件搜索中显示的那样。该选择列表的特殊之处在于，当我们单击选择列表时，它会变成一个输入文本框，当我们单击该选择列表的右侧向下箭头时，它会显示一个下拉表单，其中包含用于搜索特定邮件的搜索选项.

我只想知道如何创建一个选择列表，如果我们单击框区域，它的行为也类似于输入文本框？

谁能给我一个实现这一目标的想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T04:23:46.850

我希望你看起来像这样

[http://ivaynberg.github.com/select2/select-2.1.html](http://ivaynberg.github.com/select2/select-2.1.html)

一探究竟

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T04:01:47.980

您可以使用 jquery-ui 自动完成插件。

[自动完成 - 组合框](http://jqueryui.com/autocomplete/#combobox)

你可以在这里获得详细的文档..

[一个 jQuery UI 组合框：幕后](http://www.learningjquery.com/2010/06/a-jquery-ui-combobox-under-the-hood)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T09:41:07.790

看看这个[http://jqueryui.com/autocomplete/#maxheight](http://jqueryui.com/autocomplete/#maxheight)。这是使用 JQuery

# javascript - jquery iframe resize 仅适用于 firefox

> ID：13262873
> 
> 赞同：2
> 
> 时间：2012-11-07T03:47:37.350
> 
> 标签：javascript, jquery, iframe

我一直在拼命寻找一种方法来根据其内容调整 iframe 的大小。我在[这里](http://sonspring.com/journal/jquery-iframe-sizing)找到了一个工作脚本，但 chrome 仍然无法工作。框架确实变大了，但不会变小。我尝试了很多代码，但无济于事。（顺便说一句，iframe 不是我的选择）我不是 js 和 jquery 方面的专家，所以如果可以的话，请指导我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T05:48:46.460

在 Chrome 中，body 的高度是由它的容器的高度来定义的，如果你通过 iframe 的 body 的大小来定义容器的大小，就会有一个循环的定义。我找到的解决方案是将 iframe 主体的位置设置为绝对位置。

你可以在这里看到一个演示：[http ://webapps.so/labs/iframe/page.html](http://webapps.so/labs/iframe/page.html)

# android - android如何创建实时通知的服务（如facebook或whatapps）

> ID：13262875
> 
> 赞同：0
> 
> 时间：2012-11-07T03:47:41.350
> 
> 标签：android, android-service, android-notifications, android-notification-bar

我正在尝试创建一个后台服务，每隔“X”分钟咨询一个网络服务，如果响应“ok”在通知栏上生成一个通知

我不确定是否是 android 服务 o 广播接收器是我需要的东西

无论如何谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T03:50:43.223

[NotificationManager](http://developer.android.com/reference/android/app/NotificationManager.html)似乎是您正在寻找的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T04:18:40.863

请不要每隔 X 分钟从网络服务中拉出一个页面——这会消耗很多电量，请使用[Google Cloud Messaging](http://developer.android.com/guide/google/gcm/index.html)（前 C2DM——Cloud To Device Messaging）来获取您的信息更新——它非常轻量级且非常高效并为所有应用程序共享一个现有数据连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-19T14:50:29.787

首先，您需要一个广播接收器（在它自己的类中，加上清单中的一些代码），它对 USER_PRESENT 操作（当用户解锁屏幕时）或 BOOT_COMPLETED （当手机完成加载操作系统和所有其他东西时）做出反应. Boot激活Broadcast，广播启动服务。在服务的 onStartCommand() 方法中，每 X 分钟运行一次与 Web 服务的连接。您的服务应该实现 AsyncTask 以连接到 Web 服务。在该任务的 onCompleted() 方法中，您调用通知。

显现：

```
<uses-permission android:name="android.permission.READ_PHONE_STATE"/>
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"/>
<receiver android:name="classes.myReceiver" >        
             <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </receiver>

        <service  android:name="classes.myService">        
        </service> 
```

班级：

```
public class myReceiver extends BroadcastReceiver {
    @Override 
    public void onReceive(Context ctx, Intent intent) {     
        Intent service = new Intent(ctx, myService.class);
        if (intent.getAction().equals(Intent.ACTION_SCREEN_ON)||intent.getAction().equals(Intent.ACTION_USER_PRESENT)||intent.getAction().equals(Intent.ACTION_BOOT_COMPLETED)) {
            ctx.startService(service);
            }
        if (intent.getAction().equals(Intent.ACTION_SCREEN_OFF)) {
            ctx.stopService(service);  
            }
        }
} 
```

样本通知

```
 private void showNotification() {               
        NotificationManager mNotificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
        notificationBuilder = new NotificationCompat.Builder(this);
        notificationBuilder.setContent(getNotificationContent());
        notificationBuilder.setOngoing(true);

            notificationBuilder.setTicker("Hello");
            notificationBuilder.setSmallIcon(R.drawable.notif_icon);

        mNotificationManager.notify(R.id.notification_layout, notificationBuilder.build()); 
        }

 private RemoteViews getNotificationContent() {  

            RemoteViews notificationContent = new RemoteViews(getPackageName(), R.layout.keyphrase_recogniser_notification);
        notificationContent.setTextViewText(R.id.notification_title, "title");
            notificationContent.setTextViewText(R.id.notification_subtitle, "subtitle");
return notificationContent;
            } 
```

这是一个广泛的指南，如果您需要更具体的代码，请告诉我们。

# php - simplexlsx 内存不足

> ID：13262877
> 
> 赞同：1
> 
> 时间：2012-11-07T03:48:13.837
> 
> 标签：php, memory, xlsx

我正在使用 simplexlsx 类读取 38879 行数据（在 1 张纸上），但我遇到了内存问题（内存不足）。我的服务器内存大小为 48 GIGS，我将 memory_limit (php.ini) 设置为 9000MB，但问题仍然存在！你能告诉我我应该做什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-27T19:18:33.750

SimpleXLSX 和 PHPExcel 在很多方面都非常擅长，但在阅读大型电子表格方面都很糟糕（你不可能什么都擅长！）。

我遇到了同样的问题，即使使用 PHPExcel 的优化（缓存、读取数据块……），它也没有成功。内存不足错误已修复，但读取一个甚至不是大的文件需要很长时间。

所以我最终创建了一个库来解决这个规模问题。试一试，如果有帮助，请告诉我：[https ://github.com/box/spout](https://github.com/box/spout)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T04:31:15.477

突破限制几乎不是处理数千行数据的方法——除非有特定的原因。这是由于代码中内存的严重浪费，您的情况可能是脚本正在创建一个巨大的行数组（或对象）。我建议更改代码以提高内存效率，而不是提高内存限制。

我从未听说过 SimpleXLSX，但我使用过 PHPExcel，我从未遇到过问题。如果使用 PHPExcel 进行改造对您来说不是太多工作，我建议您使用它。

[https://github.com/PHPOffice/PHPExcel](https://github.com/PHPOffice/PHPExcel)

# objective-c - 加速目标 C 中的字符串连接

> ID：13262878
> 
> 赞同：1
> 
> 时间：2012-11-07T03:48:27.140
> 
> 标签：objective-c, string-formatting, stringbuilder

我已经确定操作 an`NSMutableAttributedString`是我的应用程序的瓶颈。我可以做些什么来加快构建我`NSMutableAttributedString`的 s？例如，是否有与 Java 等价的东西`StringBuilder`？

`appendFormat`是最大的罪魁祸首。

编辑：示例，根据要求。在某些情况下，我绝对可以使用直接连接。我不知道那更快。

```
NSMutableAttributedString *result = [NSMutableAttributedString new];
for (NSString *key in [dict allKeys]) {
    [[result mutableString] appendFormat:@"%@=", dataKey];
    NSRange tempRange = NSMakeRange([result length] - [key length], [key length]);
    [result addAttributes:defaultKeyAttributes range:tempRange];

    [[result mutableString] appendFormat:@"%@;", [dict objectForKey:key]];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-11T07:40:46.363

我还没有进行任何性能测试，但我认为在这里你可以得到最好的。请注意，您可以通过使用更简单的字符串连接（**参见 end**）而不是 stringWithFormat 来加快速度。我保留了这些以使其更接近您的原始示例。

它代表了您的代码的相当重的工作

1.  通过使用块避免对每个键进行字典查找，因此字典可以做最佳的事情来一次返回键和值
2.  使用预先分配的缓冲区（估计）构建字符串，然后一次性添加所有属性
3.  使用`setAttributes`而不是`addAttributes`作为给定范围的初始设置，而不是附加（可能更有效）。

与您的代码段一样进行转换的函数：

```
NSMutableAttributedString* buildAttributedStringFromDict(NSDictionary* dict, NSDictionary* defaultKeyAttributes)
{
  NSUInteger numPairs = [dict count];
  NSUInteger guessInitialCapacity = numPairs * 20;  // use a multiplier based on your domain to avoid string expansions
  NSMutableString* builder = [NSMutableString stringWithCapacity:guessInitialCapacity];
  NSRange ranges[numPairs];
  NSRange* rp = ranges;  // use pointer to refer to C array because compiler won't let us put __block on it
  __block NSUInteger rangeIndex = 0;
  // loop building one big string and noting ranges, using optimal iteration letting dictionary feed us matching key and value
  [dict enumerateKeysAndObjectsUsingBlock:^(id key, id obj, BOOL* stop){
    NSString* formattedKey = [NSString stringWithFormat:@"%@=", key];
    [builder appendString:formattedKey];
    NSUInteger keylen = [formattedKey length];  // allows for anything that happens in the format
    rp[rangeIndex].length = keylen;
    rp[rangeIndex].location = [builder length] - keylen;
    ++rangeIndex;
    [builder appendFormat:@"%@;", obj];
  }];

  // convert built string into one we can add attributes to
  NSMutableAttributedString *result = [[NSMutableAttributedString alloc] initWithString:builder];
  // loop adding attributes for the key areas;
  for(rangeIndex = 0; rangeIndex < numPairs; ++rangeIndex)
  {
    [result setAttributes:defaultKeyAttributes range:ranges[rangeIndex]];
  }
  return result;
} 
```

以字典文字调用代码为例：

```
id test = buildAttributedStringFromDict(
  @{  @"Name":@"Andy",
      @"Role":@"Boss"},
  @{  NSForegroundColorAttributeName:[UIColor redColor],
      NSFontAttributeName:[UIFont fontWithName:@"Papyrus" size:14.0]}
); 
```

调试控制台输出：

```
Printing description of test:
Name={
    NSColor = "UIDeviceRGBColorSpace 1 0 0 1";
    NSFont = "<UICFFont: 0x767ed50> font-family: \"Papyrus\"; font-weight: normal; font-style: normal; font-size: 14px";
}Andy;{
}Role={
    NSColor = "UIDeviceRGBColorSpace 1 0 0 1";
    NSFont = "<UICFFont: 0x767ed50> font-family: \"Papyrus\"; font-weight: normal; font-style: normal; font-size: 14px";
}Boss;{
} 
```

**更新 - 这是一个使用简单连接的重写函数**

```
NSMutableAttributedString* buildAttributedStringFromDict(NSDictionary* dict, NSDictionary* defaultKeyAttributes)
{
  NSUInteger numPairs = [dict count];
  NSUInteger guessInitialCapacity = numPairs * 20;  // use a multiplier based on your domain to avoid string expansions
  NSMutableString* builder = [NSMutableString stringWithCapacity:guessInitialCapacity];
  NSRange ranges[numPairs];
  NSRange* rp = ranges;  // use pointer to refer to C array because compiler won't let us put __block on it
  __block NSUInteger rangeIndex = 0;
  // loop building one big string and noting ranges, using optimal iteration letting dictionary feed us matching key and value
  [dict enumerateKeysAndObjectsUsingBlock:^(id key, id obj, BOOL* stop){
    [builder appendString:key];
    [builder appendString:@"="];
    NSUInteger keylen = [key length] + 1; // add 1 for = sign
    rp[rangeIndex].length = keylen;
    rp[rangeIndex].location = [builder length] - keylen;
    ++rangeIndex;
    [builder appendString:obj];
    [builder appendString:@";"];
  }];

  // convert built string into one we can add attributes to
  NSMutableAttributedString *result = [[NSMutableAttributedString alloc] initWithString:builder];
  // loop adding attributes for the key areas;
  for(rangeIndex = 0; rangeIndex < numPairs; ++rangeIndex)
  {
    [result setAttributes:defaultKeyAttributes range:ranges[rangeIndex]];
  }
  return result;
} 
```

# javascript - 如何使用 javascript 作为客户端调用 MVC Api 控制器 HttpResponseMessage Post 操作？

> ID：13262879
> 
> 赞同：1
> 
> 时间：2012-11-07T03:48:31.297
> 
> 标签：javascript, ajax

我从客户端调用这个 api 动作。客户端代码也见下文。

**API 动作：**

```
public class StudentTestController : ApiController
    {
        [HttpPost]
        public HttpResponseMessage GetLessonInfo(int request)
        {
            HttpResponseMessage result = null;

            result = Request.CreateResponse(HttpStatusCode.OK,StudentTest.GetLessonInfo(request));

            return result;
        }
    } 
```

**JavaScript 客户端脚本：**

```
function SendRequest() {

        var url = "http://localhost:1938/api/StudentTest/GetLessonInfo";

        var data1 = "request=293";

        $.ajax({
            type: 'POST',
            url: url,
            data: data1,
            contentType: 'application/json; charset=utf-8',
            dataType: 'jsonp',
            success: function (data) {
                $('#txtResponce').val(JSON.stringify(data.Data));
            },
            error: function (xhr, status, error) {
                var errorText = xhr.status + "\r\n" + status + "\r\n" + error;
                $('#txtResponce').val(errorText);
            }
        });
    } 
```

当我尝试使用上述代码段调用 Action 时，它不会调用控制器操作。如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T22:19:01.837

帕万。你有没有试过这个：

```
var url = "/api/StudentTest/GetLessonInfo";
var data1 = "293"; 
```

也许“request=293”可以被认为是一个字符串，而不是预期的“int”作为参数。而且由于 int 参数不可为空，因此它可能会给您一个错误的请求响应。

与 Fiddler 检查发送到服务器的内容。

# php - 如何在下面的示例中显示不正确的答案

> ID：13262882
> 
> 赞同：-3
> 
> 时间：2012-11-07T03:48:50.367
> 
> 标签：php, mysql, sql, mysqli

下面我有 4 个数据库表，Session、Question、Answer 和 Option_Type。

**会话表：**

```
SessionId  SessionName
1          AAA 
```

**问题表：**

```
SessionId   QuestionId  QuestionContent       OptionId
1           1           What is 1+1 and 4+4   2
1           2           Does 2+2 = 4          26
1           3           What is 3+3 and 5+5   3 
```

**答案表：**

```
AnswerId  SessionId QuestionId  Answer
1         1         1           B
2         1         1           C
3         1         2           Yes
4         1         3           A
5         1         3           C 
```

**Option_Type**

```
OptionId OptionType
1        A-C
2        A-D
3        A-E
4        A-F

.... goes up to 24 where it goes up to A-Z

25       True or False
26       Yes or No 
```

现在在这里的 jsfiddle 中，我创建了一个演示 html 表，您可以[在这里看到](http://jsfiddle.net/WHUkh/6/)

现在，如果您仔细查看 html 表格，您会意识到我要做的是在“不正确答案”列下显示不正确的答案。

所以我想做的是，例如对于问题 1，如果您查看数据库表，问题 1 的“OptionId”为 2，这意味着如果您在“Option_Type”表下查找“OptionId”，则“OptionType "，因为这个 OptionId 是 "AD"。所以选项是“A”、“B”、“C”和“D”。问题 1 的答案是“B”和“C”。所以我不想在表格中显示这些答案，因为它们是正确的，但我想显示其他选项“A”和“D”，因为它们不正确。

这有意义吗？我的问题实际上是如何不在“不正确答案”列下显示正确答案，而是在下面的代码中每个问题在此列下显示其他选项：

```
 $query = "SELECT q.SessionId, s.SessionName, q.QuestionId, q.QuestionContent, an.Answer, q.QuestionMarks 
   FROM Session s 
   INNER JOIN Question q ON s.SessionId = q.SessionId
   JOIN Answer an ON q.QuestionId = an.QuestionId AND an.SessionId = q.SessionId
   WHERE s.SessionName = ?
   ORDER BY q.QuestionId, an.Answer
   ";

   // prepare query
   $stmt=$mysqli->prepare($query);
   // You only need to call bind_param once
   $stmt->bind_param("s", $assessment);
   // execute query
   $stmt->execute(); 

       // This will hold the search results
    $searchQuestionId = array();
    $searchQuestionContent = array();
    $searchAnswer = array();
    $searchMarks = array();

    // Fetch the results into an array

   // get result and assign variables (prefix with db)
   $stmt->bind_result($dbSessionId, $dbSessionName, $dbQuestionId, $dbQuestionContent, $dbAnswer, $dbQuestionMarks);
      while ($stmt->fetch()) {
        $searchQuestionId[] = $dbQuestionId;
        $searchQuestionContent[] = $dbQuestionContent;
        $searchAnswer[] = $dbAnswer;
        $searchMarks[] = $dbQuestionMarks;
      } 

?>      

</head>

<body>

<form id="QandA" action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post">

<?php 

echo "<table border='1' id='markstbl'>
      <tr>
      <th class='questionth'>Question No.</th>
      <th class='questionth'>Question</th>
      <th class='answerth'>Incorrect Answer</th>
      <th class='answermarksth'>Penalty per Incorrect Answer</th>
      </tr>\n";
$previous_question_id = null;
$rowspans = array_count_values($searchQuestionId);
foreach ($searchQuestionContent as $key=>$question) {

    // removed logic, not necessary to set empty strings if you're skipping them

    echo '<tr class="questiontd">'.PHP_EOL;

    if ($previous_question_id != $searchQuestionId[$key]) {
        echo '<td class="questionnumtd" name="numQuestion" rowspan="'.$rowspans[$searchQuestionId[$key]].'">'.htmlspecialchars($searchQuestionId[$key]).'</td>' . PHP_EOL;
        echo '<td class="questioncontenttd" rowspan="'.$rowspans[$searchQuestionId[$key]].'">'.htmlspecialchars($question).'</td>' . PHP_EOL;
    }

    echo '<td class="answertd" name="answers[]">';
    echo $searchAnswer[$key];
    echo '</td>' ;
    echo '<td class="answermarkstd"><input class="individualMarks" name="answerMarks[]" id="individualtext" type="text" /></td>' . PHP_EOL;

    // moved this to the end
    if ($previous_question_id != $searchQuestionId[$key]) {
        $previous_question_id = $searchQuestionId[$key];
    }
}
        echo '</tr>';
        echo "</table>" . PHP_EOL;

        ?>

</form> 
```

目前，上面的代码在“不正确答案”列下显示正确答案，而不是错误答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T08:24:38.923

1.  创建一个潜在选项表：

    ```
    CREATE TABLE Answer_Options (Answer VARCHAR(5) NOT NULL PRIMARY KEY);

    INSERT INTO  Answer_Options VALUES
      ('A'), ('B'), ('C'), ('D'), ('E'), ('F'), ('G'), ('H'), ('I'), ('J'),
      ('K'), ('L'), ('M'), ('N'), ('O'), ('P'), ('Q'), ('R'), ('S'), ('T'),
      ('U'), ('V'), ('W'), ('X'), ('Y'), ('Z'),

      ('True'), ('False'),
      ('Yes'),  ('No')
    ; 
    ```

2.  `Option_Type`创建一个将记录与这些选项相关联的表：

    ```
    CREATE TABLE OptionType_Options (
      OptionId TINYINT UNSIGNED NOT NULL,
      Answer   VARCHAR(5) NOT NULL,
      FOREIGN KEY (OptionId) REFERENCES Option_Type    (OptionId),
      FOREIGN KEY (Answer  ) REFERENCES Answer_Options (Answer  )
    );

    INSERT INTO OptionType_Options (OptionId, Answer)
      SELECT o.OptionId, a.Answer
      FROM Answer_Options a JOIN Option_Type o ON (
             o.OptionType LIKE '_-_' AND
             CHAR_LENGTH(a.Answer) = 1 AND
             a.Answer BETWEEN  LEFT(o.OptionType, 1)
                          AND RIGHT(o.OptionType, 1)
           ) OR (
             o.OptionType LIKE '% or %' AND
             a.Answer IN (
               SUBSTRING_INDEX(o.OptionType, ' or ',  1),
               SUBSTRING_INDEX(o.OptionType, ' or ', -1)
             )
           )
    ; 
    ```

3.  将该列定义`Answer.Answer`为这个新表的外键。

    ```
    ALTER TABLE Answer ADD FOREIGN KEY (Answer) REFERENCES Answer_Options (Answer); 
    ```

4.  `Option_Type`可选择从现在多余的列中删除`OptionType`（但保留为人类可读的“名称/评论”类型元数据可能很有用）：

    ```
    ALTER TABLE Option_Type DROP COLUMN OptionType; 
    ```

    如果需要，仍然可以通过以下方式获得上一张表：

    ```
    SELECT   t.*,
             CONCAT_WS(
               IF(COUNT(*) > 2, '-', ' or '),
               MIN(o.Answer),
               MAX(o.Answer)
             ) AS OptionType
    FROM     Option_Type t JOIN OptionType_Options o USING (OptionId)
    GROUP BY OptionId 
    ```

5.  现在可以在可能的答案和正确的答案之间执行外连接，从交叉点之外的答案中确定不正确的答案：

    ```
    SELECT      Question.*,
                GROUP_CONCAT(o.Answer)                   AS  Possible_Answers,
                GROUP_CONCAT(a.Answer)                   AS   Correct_Answers,
                GROUP_CONCAT(NULLIF(o.Answer, a.Answer)) AS Incorrect_Answers
    FROM        OptionType_Options o JOIN Question USING (OptionId)
      LEFT JOIN Answer a USING (SessionId, QuestionId, Answer)
    GROUP BY    QuestionId 
    ```

    在[sqlfiddle](http://sqlfiddle.com/#!2/40784/1/0)上查看。

6.  要创建所需的输出：

    ```
    $stmt = $mysqli->prepare('
      SELECT      s.SessionId,  s.SessionName,
                  q.QuestionId, q.QuestionContent, q.QuestionMarks,
                  GROUP_CONCAT(o.Answer ORDER BY o.Answer SEPARATOR 0x1e),
                  COUNT(*)
      FROM        OptionType_Options o
             JOIN Question q USING ( OptionId)
             JOIN Session  s USING (SessionId)
        LEFT JOIN Answer   a USING (SessionId, QuestionId, Answer)
      WHERE       s.SessionName = ? -- SessionId would be better
              AND a.Answer IS NULL
      GROUP BY    s.SessionId, q.QuestionId
      ORDER BY    q.QuestionId
    ') or die($mysqli->error);
    $stmt->bind_param('s', $assessment) or die($stmt->error);
    $stmt->execute() or die ($stmt->error); 

    if (!$stmt->num_rows) die ('No results.');

    echo '
    <form id="QandA" method="post">
      <table border="1" id="markstbl">
        <tr>
          <th class="questionth">Question No.</th>
          <th class="questionth">Question</th>
          <th class="answerth">Incorrect Answer</th>
          <th class="answermarksth">Penalty per Incorrect Answer</th>
        </tr>
    ';

    $stmt->bind_result(
      $dbSessionId,  $dbSessionName,
      $dbQuestionId, $dbQuestionContent, $dbQuestionMarks
      $dbAnswers,    $rowspan
    );

    while ($stmt->fetch()) {
      echo 
        '<tr class="questiontd">', PHP_EOL,
          '<td class="questionnumtd" name="numQuestion" rowspan="',$rowspan,'">',
            htmlspecialchars($dbQuestionId),
          '</td>', PHP_EOL,
          '<td class="questioncontenttd" rowspan="'.$rowspan.'">',
            htmlspecialchars($dbQuestionContent),
          '</td>', PHP_EOL
        ;

        $first = true;
        foreach (explode(chr(0x1e), $dbAnswers) as $dbAnswer) {
          if (!$first) echo
        '<tr class="questiontd">', PHP_EOL;

          echo
          '<td class="answertd">',htmlspecialchars($dbAnswer),'</td>',
          '<td class="answermarkstd"><input',
            ' class="individualMarks"',
            ' name="answerMarks[',$dbAnswer,']"',
            ' id="individualtext"',
            ' type="text"',
          '/></td>', PHP_EOL,
        '</tr>';

          $first = false;
        }
    }

    echo '
        </table>
      </form>
    '; 
    ```

# html - 图片在 IE8 中不显示

> ID：13262888
> 
> 赞同：0
> 
> 时间：2012-11-07T03:50:36.603
> 
> 标签：html, css

我对这个在 IE6-8 中无法显示图像徽标的小问题感到非常困惑。在 Firefox、Chrome、Opera 和 IE9 和 IE10 中，它会正常显示。我在下面附上了我的代码。我在 W3C 中搜索了我使用过的 CSS，只要我指定了一个 !DOCTYPE，它们就应该可以工作。任何想法，将不胜感激！

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta charset="utf-8">
<title></title>
<link href="css/hmc_main.css" rel="stylesheet" type="text/css">
</head>
<body>
<div class="container">
<img src="images/logo.jpg" width="850" height="166" class="logo" />
<div class="headerImageOverlay"> <span class="spanner"> <img src="images/ross.jpg" class="overlay" /> </span> </div> 
```

CSS类如下：

```
.container { width: 960px; background-color: #FFF; margin: 0 auto; position: relative; }
img.logo { z-index: 1; display: block; }
img.overlay { position: absolute; right: 0px; top: 0px; z-index: 10; height: 166px; } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T04:01:28.037

从您告诉我们的情况来看，最可能的问题是图像是 CMYK 格式，仅在 IE9+ 上支持（*对于 IE 浏览器*）。

把它转成RGB应该没问题..

# vb.net - 如何在 VB.NET 中强制进行惰性或评估？

> ID：13262891
> 
> 赞同：2
> 
> 时间：2012-11-07T03:50:41.727
> 
> 标签：vb.net, lazy-evaluation, boolean-logic

我正在从数据库中读取数据并将其放入`DataRow`.

我想测试一个可为空的布尔字段是否是`Null`或`True`。

如何在 VB.NET 中执行以下操作而不引发关于`Or`运算符如何不能`DBNull`作为其操作数之一的异常？我可以强制进行惰性或评估，以便仅评估`IsNull`并且不再继续吗？

`If row.IsNull("MyNullableBooleanField") Or row("MyNullableBooleanField")`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-07T03:54:57.817

使用“OrElse”运算符：

```
If row.IsNull("MyNullableBooleanField") OrElse row("MyNullableBooleanField") Then 
```

# c - 你怎么知道变量的确切地址？

> ID：13262893
> 
> 赞同：6
> 
> 时间：2012-11-07T03:51:12.367
> 
> 标签：c, pointers, memory-address

所以我正在浏览我的 C 编程教科书，我看到了这段代码。

```
#include <stdio.h>

int j, k;
int *ptr;

int main(void)
{
    j = 1;
    k = 2;
    ptr = &k;
    printf("\n");
    printf("j has the value %d and is stored at %p\n", j, (void *)&j);
    printf("k has the value %d and is stored at %p\n", k, (void *)&k);
    printf("ptr has the value %p and is stored at %p\n", (void *)ptr, (void *)&ptr);
    printf("The value of the integer pointed to by ptr is %d\n", *ptr);

    return 0;
} 
```

我运行它，输出是：

> j 的值为 1 并存储在 0x4030e0
> 
> k 的值为 2 并存储在 0x403100
> 
> ptr 的值为 0x403100 并存储在 0x4030f0
> 
> ptr指向的整数的值为2

我的问题是，如果我没有通过编译器运行它，你怎么能通过查看这段代码来知道这些变量的地址？我只是不确定如何获取变量的实际地址。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T03:55:18.083

以下是我对它的理解：

C中内存中事物的绝对地址是未指定的。它没有标准化为语言。正因为如此，你不能只看代码就知道内存中事物的位置。（但是，如果您使用相同的编译器、代码、编译器选项、运行时和操作系统，地址可能是一致的。）

当您开发应用程序时，这不是您应该依赖的行为。但是，在某些情况下，您可能会依赖于两个事物的位置之间的差异。例如，您可以确定指向两个数组元素的指针地址之间的差异，以确定它们相隔多少个元素。

顺便说一句，如果您正在考虑使用变量的内存位置来解决特定问题，您可能会发现发布一个单独的问题来询问如何在不依赖此行为的情况下这样做会很有帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-07T04:03:00.307

除了用“%p”打印它之外，没有其他方法可以“知道标准 C 中变量的确切地址”。实际地址由许多不受程序员编写代码控制的因素决定。这是操作系统、链接器、编译器、使用的选项以及可能其他的问题。

也就是说，在嵌入式系统世界中，有一些方法可以表达**这个变量必须驻留在这个地址**，例如，如果外部设备的寄存器映射到正在运行的程序的*地址空间*。这通常发生在所谓的*链接器文件*或*映射文件中*，或者通过将整数值分配给指针（使用强制转换）。所有这些方法都是非标准的。

不过，出于日常普通程序的目的，编写**C**程序的目的是您**需要并且不应该关心**变量的存储位置。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-07T03:56:24.400

你不能。

不同的编译器可以将变量放在不同的位置。在某些机器上，地址不是一个简单的整数。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-07T05:02:29.547

编译器只知道“第三个整数全局变量”和“从堆栈指针向下分配 36 个字节的四个字节”。它仅在相对术语中指全局变量、指向子程序（函数）的指针、子程序参数和局部变量。（不要介意 C++ 中多态对象的额外内容，哎呀！）这些相对引用作为特殊代码和偏移值保存在对象文件（.o 或 .obj）中。

Linker 可以填写一些细节。在连接多个目标文件时，它可能会修改其中一些粗略的位置参考。当来自多个编译单元的全局变量合并时，全局变量位置将共享一个空间（数据部分）；链接器决定它们的顺序，但仍将它们描述为相对于整个全局变量集的开始。结果是一个带有最终操作码的可执行文件，但地址仍然是粗略的并且基于相对偏移量。

直到加载可执行文件，加载程序才会将所有相对地址替换为实际地址。现在这是可能的，因为加载器（或它所依赖的操作系统的某些部分）决定在进程的整个虚拟地址空间中存储程序操作码（文本部分）、全局变量（BSS、数据部分）和调用堆栈和其他东西。加载器可以进行数学运算，并将实际地址写入可执行文件中的每个位置，通常作为“加载立即”操作码和所有涉及内存访问的操作码的一部分。

谷歌“重定位表”了解更多。有关特定平台的更详细说明，请参阅[http://www.iecc.com/linker/linker07.html](http://www.iecc.com/linker/linker07.html)（有些旧）。

在现实生活中，由于虚拟地址通过虚拟内存系统映射到物理地址，使用段或其他机制将每个进程保持在单独的地址空间中，这一切都变得复杂起来。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-07T04:37:16.813

我想进一步建立在已经提供的答案的基础上，指出一些编译器，例如 Visual Studio，有一个称为地址空间布局随机化 (ASLR) 的功能，它使程序从随机内存地址开始作为防病毒功能. 鉴于您在输出中拥有的地址，我会说您在没有它的情况下编译（我认为没有它的程序从地址 0x400000 开始）。我获取此信息的来源是[对此问题](https://stackoverflow.com/questions/13080069/visual-studio-only-breaks-on-second-line-of-assembly)的回答。

也就是说，编译器决定了存储局部变量的内存地址。地址很可能会随着编译器的不同而改变，也可能随着源代码的每个版本而改变。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-01-11T04:01:15.887

每个进程都有自己的逻辑地址空间，从零开始。您的程序可以访问的收件人都相对于零。任何内存位置的绝对地址只有在将进程加载到主内存后才能确定。这是通过现代操作系统使用动态重定位来完成的。因此，每次将进程加载到内存中时，都可能根据内存的可用性将其加载到不同的位置。因此，允许用户进程知道存储在内存中的数据的确切地址没有任何意义。您的代码打印的是逻辑地址，而不是确切或物理地址。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-07T04:26:56.047

继续上面描述的答案，请不要忘记进程将在自己的虚拟地址空间中运行（进程隔离）。这可确保当您的程序损坏某些内存时，其他正在运行的进程不会受到影响。

进程隔离： [http ://en.wikipedia.org/wiki/Process_isolation](http://en.wikipedia.org/wiki/Process_isolation)

进程间通信 [http://en.wikipedia.org/wiki/Inter-process_communication](http://en.wikipedia.org/wiki/Inter-process_communication)

# javascript - 如何在每次提交后保持 10 秒的延迟

> ID：13262899
> 
> 赞同：0
> 
> 时间：2012-11-07T03:52:29.920
> 
> 标签：javascript, jquery

我在下面有这个 Javascript

并想在 FireFox 中工作我想在每次提交后保持 5 秒延迟

```
<html>
 <head>
 <script type="text/javascript">
function sleep(ms)
    {
        var dt = new Date();
        dt.setTime(dt.getTime() + ms);
        while (new Date().getTime() < dt.getTime());
    }

function test() {
var windowCounter = 1; 
var myStringArray = [ "user1", "user2" , "user3" , "user4" ]
var len = myStringArray.length;
for (var i=0; i<3; ++i) {
document.inform.cid = myStringArray[i];
document.inform.pwd = "xxxxxxxx";
   document.inform.target = windowCounter++; // a different target each time
    document.inform.submit();
}
}
</script>
 </head>
 <body >
  <form name="inform"   target="newWin" action="https://www.google.co.in/">
<input type="text" name="cid"  />
<input type="hidden" name="pwd"  />
 <input type="hidden" name="throttle" value="999" />
    <input type="submit" value="go" onclick="test()">
  </form>
 </body>
</html> 
```

我尝试在每次提交后手动保持睡眠并尝试使用 setTimeOut，但没有任何效果。

有人可以帮我吗

**编辑部分**

```
<html>
<head>
<script type="text/javascript">
  var interval = window.setInterval(iterate, 5000);
var myStringArray = ["user1", "user2", "user3", "user4"];

  function iterate() {
 iterate.arr = iterate.arr || myStringArray.slice(0);

    //if it still has elements left
    if(iterate.arr.length > 0) {
        document.inform.cid = iterate.arr.pop(); //remove the top one
alert(document.inform.cid);
        document.inform.pw = "xxxx";
        document.inform.target = iterate.arr.length; // a different target each time - length of the arr
        document.inform.submit();
    } else {
        window.clearInterval(interval); //no more left cancel it
    }
};

</script>
</head>
<body>
 <form name="inform" method="get"  target="newWin" action="https://www.google.co.in/">
  <input type="text" name="cid" />
<input type="password" name="pw" />
<input type="hidden" name="throttle" value="999" />
    <input type="submit" value="go" onclick="iterate()"/>
  </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T04:04:45.067

你可以使用类似的东西（虽然没有测试）：

```
 var interval = window.setInterval(iterate, 5000);
    var myStringArray = ["user1", "user2", "user3", "user4"];

function iterate() {
    iterate.arr = iterate.arr || myStringArray.slice(0); //set a private array to cache

    //if it still has elements left
    if(iterate.arr.length > 0) {
    //thought there was more than one formon the page - but if only one then we can reference by its name - cid

        ///:document.inform.cid = iterate.arr.pop(); //remove the top one
    iterate.arr.pop();
        document.inform.pwd = "xxxxxxxx";
        document.inform.target = iterate.arr.length; // a different target each time - length of the arr
        document.inform.submit();
    } else {
        window.clearInterval(interval); //no more left cancel it
    }

}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T04:13:30.013

试试这个：

```
<html>
     <head>
     <script type="text/javascript">
    function submit()
        {
             document.inform.submit();
        }

    function test() {
     setTimeout('submit()',5000);
     }
    </script>
     </head>
     <body >
      <form name="inform"  target="newWin"  action="https://www.google.co.in/">
    <input type="text" name="cid"  />
    <input type="hidden" name="pwd"  />
     <input type="hidden" name="throttle" value="999" />
        <input type="button" value="go" onclick="test()">
      </form>
     </body>
    </html> 
```

# android - 如何更改 PagerTabStrip 中 TabIndicer 的颜色

> ID：13262901
> 
> 赞同：6
> 
> 时间：2012-11-07T03:52:49.950
> 
> 标签：android, android-actionbar, actionbarsherlock, android-support-library

我`android.support.v4.view.PagerTabStrip`在 xml 中定义如下：

```
<android.support.v4.view.ViewPager xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/pager"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity">

    <!--
    This title strip will display the currently visible page title, as well as the page
    titles for adjacent pages.
    -->
    <android.support.v4.view.PagerTabStrip android:id="@+id/pager_title_strip"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="top"
        android:background="#33b5e5"
        android:textColor="#fff"
        android:paddingTop="4dp"
        android:paddingBottom="4dp" />

</android.support.v4.view.ViewPager> 
```

我怎样才能改变`TabIndicater`颜色？它可以通过[setTabIndicatorColor(int color)](http://developer.android.com/reference/android/support/v4/view/PagerTabStrip.html#setTabIndicatorColor%28int%29)以编程方式更改，但我需要找到一种在 xml 中执行此操作的方法。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-25T07:49:11.787

主要方法是使一个类扩展`PagerTabStrip`，例如，名为`MyPagerTabStrip`：

```
package com.example.View; /// change this package to yourselves.

public class MyPagerTabStrip extends PagerTabStrip
{
    public MyPagerTabStrip(Context context, AttributeSet attrs)
    {
    super(context, attrs);
    final TypedArray a = context.obtainStyledAttributes(attrs,
                                  R.styleable.MyPagerTabStrip);
    setTabIndicatorColor(a.getColor(
            R.styleable.MyPagerTabStrip_indicatorColor, Color.BLUE));
    a.recycle();
    }

} 
```

在 res/values 文件夹中新建一个名为**attrs.xml**的文件，该文件的内容是：

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<declare-styleable name="MyPagerTabStrip">
    <attr name="indicatorColor" format="reference|color" />
</declare-styleable> 
```

同一个文件夹，如果不存在则新建一个名为**styles.xml**的文件，将以下代码放入文件中：

```
<style name="Pager">
    <item name="android:textColor">#ffffff</item>
    <item name="indicatorColor">#6f8dc5</item>
</style> 
```

最后，您的布局 xml 文件是：

```
<android.support.v4.view.ViewPager xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/pager"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity">

<!--
This title strip will display the currently visible page title, as well as the page
titles for adjacent pages.
-->
<com.example.view.MyPagerTabStrip android:id="@+id/pager_title_strip"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="top"
    android:background="#33b5e5"
    android:textColor="#fff"
    android:paddingTop="4dp"
    android:paddingBottom="4dp" /> 
```

# php - 从 CSV 文件中读取行并导出为 JSON

> ID：13262904
> 
> 赞同：1
> 
> 时间：2012-11-07T03:53:04.710
> 
> 标签：php, json, csv

我想将 CSV 文件导出到 JSON 文件，需要在推荐字段读取值并写入 JSON 文件。示例：IN row 1,recomnend =2 将读取 id=2 的行并打印到 JSON 文件的值：id,product_id,title。

```
$json = array();

        $json['id'] = $row['id'];
        $json['product_id'] = $row['product_id'];
        $json['title'] = $row['title'];
        $json['outline'] = $row['outline'];
        $recom[] = $json;  
print json_encode($recom); 
```

[http://ns0.upanh.com/b6.s33.d3/3a3ebb93a87c5703f673b399d5613ec2_50639320.untitled.png](http://ns0.upanh.com/b6.s33.d3/3a3ebb93a87c5703f673b399d5613ec2_50639320.untitled.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T04:18:11.817

我不知道有什么不同的方法，但以下方法会起作用。使用这种方法意味着您必须使用列索引，而不是它的名称。如果您知道所需值的列索引，这应该不是问题，但我只是想我会提到：

```
$fp = fopen('test.csv','r') or die("**! can't open file\n\n");
while($csv_line = fgetcsv($fp,1024)) {
    $id = $csv_line[0];
    $product_id = $csv_line[1];
    $title = $csv_line[2];
    $outline = $csv_line[3];        
}
fclose($fp) or die("**! can't close file\n\n"); 
```

现在，因为您将拥有多行，所以我建议您使用以下方法将它们保存到一个 JSON 对象中：

```
$fp = fopen('test.csv','r') or die("**! can't open file\n\n");
$i = 0;
while($csv_line = fgetcsv($fp,1024)) {
    $i++;
    $json['json_'.$i]['id'] = $csv_line[0];
    $json['json_'.$i]['product_id'] = $csv_line[1];
    $json['json_'.$i]['title'] = $csv_line[2];
    $json['json_'.$i]['outline'] = $csv_line[3];        
}
$json['total_lines'] = $i;
print json_encode($json);
fclose($fp) or die("**! can't close file\n\n"); 
```

使用此方法，您可以将每一行保存为子 JSON 对象，从而可以提取总数并通过对象解析以提取行。

# jquery - 这是一个什么样的jQuery函数？

> ID：13262913
> 
> 赞同：-2
> 
> 时间：2012-11-07T03:53:33.740
> 
> 标签：jquery

我是 jQuery 的新手，仍然试图理解细微差别，我认为这个函数会调用自己？函数开始是这样的：

```
$("#feedpage").live("pageshow", function(e) { 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T03:57:14.913

[`.live()`](http://api.jquery.com/live/)是 jQuery 中不推荐使用的函数，它将事件处理程序绑定到`document`所选元素的对象（在您的情况下，`#feedpage`）。当触发命名事件时触发事件处理程序`pageshow`。据我所知，没有`pageshow`事件，所以它必须是一个自定义事件，使用[`.trigger()`](http://api.jquery.com/trigger/).

由于事件委托，处理程序对页面上的当前和未来元素有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T03:56:20.393

该`live`方法将事件处理程序附加到所有选定的元素。在您的示例`function(e) {..}`中，事件处理程序将附加到`pageShow`与#feedpage 匹配的所有元素的事件。

检查[http://api.jquery.com/live/](http://api.jquery.com/live/)

# java - 交互式图形和显示选项

> ID：13262916
> 
> 赞同：1
> 
> 时间：2012-11-07T03:53:54.957
> 
> 标签：java, python, api, graph, desktop

我正在使用 python 2.7 开发一个桌面应用程序。我需要在交互式图表（树视图）上显示一些结果。首先，图表仅显示根和下一级子级，（下一级的子级被隐藏）一旦用户单击其中一个节点，树必须显示特定节点的子级，刷新整个树同一个窗口。当用户到达最后一级时，应用程序必须提供一个菜单。我正在使用 Zest (java) 和 os.system(java...) 将 java 代码与 python 连接，但我对它不是 100% 满意是否有一个 api 可以用来以这种方式创建交互性，像 actionListeners 什么的？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T04:03:13.893

您可以查看[http://d3js.org/](http://d3js.org/)的图表库。它是一个提供交​​互式图表的 javascript 库。使用 python 有什么具体原因吗？

如果您足够灵活地使用 javascript 库，您可以使用 JavaFX 并使用 javascript 库来创建交互式图表？

否则，您可以检查这些 d3 图表的来源并尝试在 Python 中实现您的图表

还有一种方法可以在 phython 和 java 之间进行通信。使用以下链接 [http://www.slideshare.net/onyame/mixing-python-and-java](http://www.slideshare.net/onyame/mixing-python-and-java)

有很多可用于 java 的开源图表库，然后您可以使用这些库。请点击以下链接： [https ://stackoverflow.com/questions/2081676/looking-for-open-source-tool-for-drawing-charts-in-java](https://stackoverflow.com/questions/2081676/looking-for-open-source-tool-for-drawing-charts-in-java)

# iphone - 为什么我的视图坐标系统会随机混乱？

> ID：13262922
> 
> 赞同：0
> 
> 时间：2012-11-07T03:54:51.500
> 
> 标签：iphone, xcode, uiview, coordinates

我有一个带有 uiview 的游戏，它占据整个屏幕并每 5 秒向上移动一次，直到游戏结束。

这很好用，uiview 可以正常移动，但是当我重置游戏并尝试将 uiview 移回其原始位置时，它似乎偏离了大约 40 像素。这就是我在游戏结束时所做的：

```
self.myView.frame=CGRectMake(0,0,320,586); // the iphone 5 screen is 586 points long. 
```

但是，视图 y 确实有些像 360，而不是 320；为什么会这样？

顺便说一句，我关闭了那些奇怪的约束，因为我无法在它们打开的情况下移动 uiview。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T17:01:18.313

这是因为我未选中所有支柱和弹簧，并且未选中文件检查器中的“使用自动布局”

# java - JOGL NeHe 教程

> ID：13262931
> 
> 赞同：0
> 
> 时间：2012-11-07T03:56:08.283
> 
> 标签：java, jogl, texture-mapping

我一直在使用纹理映射完成 NeHe 教程 (Lesson06) 之一，并试图修改代码以允许在已创建的 3D 立方体上使用不同的图像。查看代码后，这是代码实际使用图像文件的唯一地方：

```
TextureReader.Texture image = null;
try {
    image = TextureReader.readTexture("nehe/dice1.png");
} catch (IOException e) {
    e.printStackTrace();
    throw new RuntimeException(e);
} 
```

我要问的是如何加载 6 个不同的图像而不是仅 1 个来覆盖整个立方体？我正在尝试制作一个“死”我有 1 到 6 的图像。如果您需要查看完整的代码，您可以在以下位置找到它：[http ://www.java-tips.org/other-api-tips /jogl/texture-mapping-nehe-tutorial-jogl-port.html](http://www.java-tips.org/other-api-tips/jogl/texture-mapping-nehe-tutorial-jogl-port.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T04:06:29.820

在绘制每个面之前，您必须创建 6 个单独的纹理 ID 并绑定到特定的纹理 ID。实际创建纹理 ID 的调用在这里：

```
texture = genTexture(gl); 
```

然后，该调用之后的所有内容实际上都设置了纹理。

您可以更轻松地加载包含展开的骰子的单个纹理，或者仅在一行中包含 1 到 6 的面。然后只需指定正确的纹理坐标即可为每个面选择正确的纹理部分。

而不是一张脸的纹理坐标从`(0,0)`到`(1,1)`，它们可以从`((num-1.0)/6.0, 0)`到1 到 6`(num/6.0, 1)`之间`num`的双精度数。在这种情况下，您可以将图像水平排列。

# c# - 使用 ORM 时保持类和表模式同步

> ID：13262935
> 
> 赞同：4
> 
> 时间：2012-11-07T03:56:34.537
> 
> 标签：c#, sqlite, orm, ormlite-servicestack

我对 ORM 没有太多经验。我试图找出处理从映射类中添加/删除属性的最佳方法，最好是自动和通用的方式。

我正在使用 ServiceStack.OrmLite 和 SQLite。

数据库的目的是文档存储。没有外键/参照完整性问题。

例如

```
public class Foo
{
   public Bar {get; set;}
   public Baz {get; set;}
} 
```

使用列 Bar、Baz 创建表 Foo。

在理想的世界中，Foo 类永远不会改变，所以我不必担心这一点，但实际上它可以。

假设 Foo 还需要一个 Quz 属性。

```
public class Foo
{
   public Bar {get; set;}
   public Baz {get; set;}
   public Quz {get; set;}
} 
```

读取很好，Quz 只是返回为空，但插入失败，因为没有 Quz 列。这是有道理的。

可以说不再需要 Baz。

```
public class Foo
{
   public Bar {get; set;}
   public Quz {get; set;}
} 
```

读取/插入工作正常，但是基础表仍然会有 Baz 列，这有点乱。

鉴于它是一个服务器应用程序，并且不会经常重新启动，我考虑并忽略了几件事：

*   开始时，如果 Foo 表存在，将其读入临时存储，删除并重新创建 Foo（意味着将使用正确的模式创建表），然后重新插入数据。这似乎工作正常，并且可以使模式与类保持同步，但是它太慢了。

*   开始时，查询基础表以获取其列定义并使用反射来确定 Foo 类的列实际上应该是什么。根据需要添加/删除列。我很确定我可以让这种方法发挥作用，但它比理想更复杂，而且我不相信这是一个好主意。

# c# - 执行相机预览镜像模式的正确方法

> ID：13262936
> 
> 赞同：1
> 
> 时间：2012-11-07T03:56:35.047
> 
> 标签：c#, windows-8, microsoft-metro

目前，当[使用捕获设备示例使用媒体捕获进行](http://code.msdn.microsoft.com/windowsapps/Media-Capture-Sample-adf87622)测试时，我意识到相机不是我想要的东西。**我希望它处于镜像模式。目前，它不是。**

1.  对于处于镜像模式的相机预览，我可以知道它是依赖于硬件还是独立于硬件。如果我使用不同的硬件运行相同的代码，相机预览可能会处于镜像模式吗？如果它取决于硬件，我如何检查我的相机预览是否处于镜像/非镜像模式？

2.  为了使其处于镜像模式，我尝试关注[这个线程](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/51d3d2c2-0407-4c6d-9691-942939344aac)。我试试`MediaCapture.SetPreviewMirroring(true)`。完全没有效果。相机预览仍处于非镜像模式。

3.  我试试`captureElement.RenderTransform = new ScaleTransform() { ScaleX = -1 };`。整个相机预览变成纯灰色。

4.  我想尝试的最后一种方法是尝试通过`MediaCapture.AddEffectAsync()`. 但是，这需要回到我的**第一个问题**。我可以简单地执行翻转，还是我首先需要检查传入缓冲区是否处于镜像/非镜像模式？如果是，我该如何检查？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-09-29T16:45:25.883

对于那些在提出这个问题后寻找更新答案的人，UWP 和 WinUI 上的正确方法是`FlowDirection="RightToLeft"`在`CaptureElement`.

```
<CaptureElement x:Name="previewElement" FlowDirection="RightToLeft"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T04:09:51.793

采用

```
 <CaptureElement x:Name="previewElement" Margin="0" Stretch="UniformToFill" RenderTransformOrigin="0.5,0.5">
        <CaptureElement.RenderTransform>
            <CompositeTransform ScaleX="-1"/>
        </CaptureElement.RenderTransform>
    </CaptureElement> 
```

关键在于`RenderTransformOrigin="0.5,0.5"`。我们需要从预览中心翻转。

# javascript - 如何在 phonegap 应用程序上存储文件或任何形式的数据？

> ID：13262937
> 
> 赞同：3
> 
> 时间：2012-11-07T03:56:39.660
> 
> 标签：javascript, cordova

我想构建一个 Phonegap 应用程序，它允许用户首先从网络服务器访问程序（已经实现），并提供下载这些程序供以后离线使用的选项。这些程序由图像、html、js 和 css 文件组成。是否可以在 Phonegap 应用程序上永久存储任何文件或数据？如果有，请展开。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T04:33:56.773

> 是否可以在 Phonegap 应用程序上永久存储任何文件或数据？

是的。您可以[在此处找到 phonegap 存储 API 详细信息](http://docs.phonegap.com/en/1.4.1/phonegap_storage_storage.md.html#Storage)

而不是这个我用来写入文本/xml文件来存储数据。[本文档可帮助您](http://docs.phonegap.com/en/1.4.1/phonegap_file_file.md.html#File)

但在您的情况下，您需要下载程序和数据。这取决于你的逻辑。你需要为此推导出一些逻辑。

# c - 如何在 Gtk+ 中调用这些“小部件”？

> ID：13262938
> 
> 赞同：1
> 
> 时间：2012-11-07T03:56:42.247
> 
> 标签：c, gtk, kde, gtk3

如何在 Gtk+ 中调用这些“小部件”：带有蓝色边框的小部件及其内部的小部件？Gtk+ 中是否有等价物？

注意：我按照 Gtk 术语来称呼“widget”，因为我不知道它在 KDE 环境中的真正命名法是什么。

![在此处输入图像描述](../Images/a9054d5800af3ef9b8fc1285053b21ae.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T04:08:52.230

那叫做 a `TreeView`，在里面你会发现`TreeViewColumn`and `CellRenderer`。

文档在[这里](http://developer.gnome.org/gtk/2.24/GtkTreeView.html)。

# applescript-objc - 如何使用 cocoa-applescript (AppleScriptObjc) 应用程序创建 PDF 服务？

> ID：13262940
> 
> 赞同：1
> 
> 时间：2012-11-07T03:57:24.637
> 
> 标签：applescript-objc

我决定鲁莽，用GMail PDF服务编写自己的Email PDF，同时学习AppleScriptObjC。我一切正常，除了实际上能够从打印对话框接受文件。

到目前为止，代码如下所示： script gmailpdfAppDelegate property parent : class "NSObject"

```
 property recipientField : missing value
    property subjectField : missing value
    property fromField : missing value
    property passwordField : missing value
    property messageField : missing value
    property pdfFile : missing value

    on ButtonHandlerCancel_(sender)
        quit
    end ButtonHandlerCancel_

    on ButtonHandlerSend_(sender)
        set recipient to recipientField's stringValue()
        set subject to subjectField's stringValue()
        set fromUser to fromField's stringValue()
        set pw to passwordField's stringValue()
        set message to messageField's stringValue()

        set sendEmailScript to (current application's NSBundle's mainBundle()'s pathForResource_ofType_("sendEmail", "")) as string
        set emailserverInfo to " -s smtp.gmail.com:587 -xu '" & fromUser & "' -xp '" & pw & "' -m '" & message & "' "
        do shell script quoted form of sendEmailScript & " -t " & recipient & " -u " & subject & " -f '" & fromUser & "' " & emailserverInfo
        quit
    end ButtonHandlerSend_

    on applicationWillFinishLaunching_(aNotification)
        -- Insert code here to initialize your application before any files are opened
        set fromField's stringValue to do shell script "defaults read org.ryancollins.GMail-PDF 'fromDefault'"
        set passwordField's stringValue to do shell script "security 2>&1 >/dev/null find-generic-password -ga gmailpdf |ruby -e 'print $1 if STDIN.gets =~ /^password: \"(.*)\"$/'"
    end applicationWillFinishLaunching_

    on applicationShouldTerminate_(sender)
        -- Insert code here to do any housekeeping before your application quits
        set fromDefault to fromField's stringValue()
        do shell script "defaults write org.ryancollins.GMail-PDF 'fromDefault' '" & fromDefault & "'"

        set passwordDefault to passwordField's stringValue()
        do shell script "security add-generic-password -a gmailpdf -s email -p '" & passwordDefault & "' -U"

        return current application's NSTerminateNow
    end applicationShouldTerminate_

end script 
```

编译并添加到 PDF Services 文件夹时，我收到此错误（该应用程序名为 GMail PDF： `The document “Google News.pdf” could not be opened. GMail PDF cannot open files in the “Portable Document Format (PDF)” format.`

如何让 AppleScriptObjC 应用程序接受该文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T19:54:26.880

看起来您的应用程序中还没有任何文件处理功能，因此您必须实现`application:openFile:`from `NSApplicationDelegate`：

从[NSApplicationDelegate 文档](http://developer.apple.com/library/mac/#documentation/cocoa/reference/NSApplicationDelegate_Protocol/Reference/Reference.html)：

```
- (BOOL)application:(NSApplication *)theApplication openFile:(NSString *)filename 
```

在 AppleScriptObjC 中，这将是：

```
on application_openFile_(theApplication, filename)
    -- your PDF handling code goes here
end application_openFile_ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-27T15:14:01.477

PDF Services 文件夹中应用程序的简单别名应该足以将 PDF 传递给应用程序。

作为 PDF 服务的任何脚本都将发送 3 个参数：文件标题、作业选项和 PDF 路径。

# java - 如何在activemq中杀死消费者

> ID：13262942
> 
> 赞同：3
> 
> 时间：2012-11-07T03:57:51.273
> 
> 标签：java, activemq

我试图摆脱某个队列中的所有“消费者数量”。每当我清除/删除队列时，如果我再次创建具有相同名称的队列，消费者的数量仍然存在。即使有 0 条待处理消息，仍然有 6 个消费者。

我的问题可能源于我的 java 代码，而没有关闭会话或连接。

我已经尝试重新启动和重新安装服务器。

这是我的生产者代码：

```
 private static String url = ActiveMQConnection.DEFAULT_BROKER_URL;

    public static String addElementToQueue(String queueName,String param1, String param2) throws JMSException, NamingException {
  // Getting JMS connection from the server and starting it
        ConnectionFactory connectionFactory =
                new ActiveMQConnectionFactory(url);
        Connection connection = connectionFactory.createConnection();

// JMS messages are sent and received using a Session. We will
        // create here a non-transactional session object. If you want
        // to use transactions you should set the first parameter to 'true'
        Session session = connection.createSession(false,
                Session.AUTO_ACKNOWLEDGE);

        // Destination represents here our queue on the
        // JMS server. You don't have to do anything special on the
        // server to create it, it will be created automatically.
        Destination destination = session.createQueue(queueName);

        // MessageProducer is used for sending messages (as opposed
        // to MessageConsumer which is used for receiving them)
        MessageProducer producer = session.createProducer(destination);   

        String queueMessage = param1+ "-" + param2;

        TextMessage message = session.createTextMessage(queueMessage);

        // Here we are sending the message!
        producer.send(message);

        connection.close();
        session.close();      // added after problem came up
        producer.close();     // added after problem came up

        return commandID;
} 
```

这是我的消费者代码：

```
 // URL of the JMS server
    private static String url = ActiveMQConnection.DEFAULT_BROKER_URL;

    public static Pair consumeNextElement(String queueName) throws JMSException {
        // Getting JMS connection from the server
        ConnectionFactory connectionFactory
                = new ActiveMQConnectionFactory(url);
        Connection connection = connectionFactory.createConnection();
        connection.start();   

        // Creating session for seding messages
        Session session = connection.createSession(false,
                Session.AUTO_ACKNOWLEDGE);

        // Getting the queue
        Destination destination = session.createQueue(queueName);

        // MessageConsumer is used for receiving (consuming) messages
        MessageConsumer consumer = session.createConsumer(destination);

        // Here we receive the message.
        // By default this call is blocking, which means it will wait
        // for a message to arrive on the queue.
        Message message = consumer.receive();

        // There are many types of Message and TextMessage
        // is just one of them. Producer sent us a TextMessage
        // so we must cast to it to get access to its .getText()
        // method.

        String[] parts = ((TextMessage)message).getText().split("-");
        Pair retVal = new Pair(parts[0], parts[1]);

        connection.close();
        session.close();        // added after problem came up
        consumer.close();      // added after problem came up  

        return retVal;
    } 
```

有什么想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T05:10:10.593

消费者的数量是队列上的侦听器数量。清除队列应该只删除排队的消息 - 那些监听的消费者将不受影响。

消费者维持/重新建立连接的能力可能取决于用于连接的传输，并且[传输的设置](http://activemq.apache.org/configuring-transports.html)可能允许对连接属性进行一些调整。

坦率地说，我在这些方面没有太多经验，但您可能会调查[咨询消息](http://activemq.apache.org/advisory-message.html)，以帮助调试您的连接。除了报告消费者数量之外，JMX 界面或 Web 控制台似乎没有帮助。

# c# - 打开组合框下拉菜单时更改光标

> ID：13262949
> 
> 赞同：3
> 
> 时间：2012-11-07T03:59:41.910
> 
> 标签：c#, wpf

当组合框的下拉菜单打开时，我想将光标更改为“手”。所以我在事件中做了以下`comboBox1_DropDownOpened`事情。但问题是光标更改。但是当我在菜单项中移动时，光标仍保留为箭头。

请给我建议。

```
private void comboBox1_DropDownOpened(object sender, EventArgs e)
{    
    this.Cursor = Cursors.Hand;    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T04:22:47.970

伟大的。我可以通过将菜单项的光标放在手边来解决我的问题。:)

```
ComboBoxItem ci=new ComboBoxItem();
ci.Cursor=Cursors.Hand; 
```

这工作正常。谢谢大家。

# c# - 中继器控制复选框事件未触发

> ID：13262955
> 
> 赞同：3
> 
> 时间：2012-11-07T04:01:23.280
> 
> 标签：c#, asp.net, checkbox, repeater

我在中继器控制中有三个复选框。我需要像单选按钮列表这样的概念。当我单击第一行第一个复选框时，其他两个被选中的属性设置为 false。假设我检查第二个意味着第一个和第三个未选中。

**我的设计代码在这里：**

```
 <asp:Repeater ID="repeaterItems" runat="server" 
                                                                    onitemdatabound="repeaterItems_ItemDataBound" >
    <ItemTemplate>
       <table id="mytable" cellspacing="0" width="100%" align="center">
          <tr>
               <td style="width: 18px;">
               <asp:Label ID="id" runat="server" Text='<%#Bind("fld_id")%>'></asp:Label>
               </td>
               <td style="width: 301px;">
              <asp:Label ID="Label1" runat="server" Text='<%#Bind("fld_Question")%>'></asp:Label>
               </td>
               <td style="width: 10px;">   
                    <asp:CheckBox ID="CheckBox1" runat="server" AutoPostBack="true" OnCheckedChanged="CheckBox1_CheckedChanged" />
               </td>
               <td style="width: 30px;">
                     <asp:CheckBox ID="CheckBox2" runat="server" AutoPostBack="true" OnCheckedChanged="CheckBox2_CheckedChanged"/>
               </td>
               <td style="width: 33px;">
                     <asp:CheckBox ID="CheckBox3" runat="server" AutoPostBack="true" OnCheckedChanged="CheckBox3_CheckedChanged"/>
               </td>
             </tr>
           </table>
        </ItemTemplate>
     </asp:Repeater> 
```

**代码是：**

```
protected void CheckBox1_CheckedChanged(object sender, EventArgs e)
    {
        CheckBox chk1 = sender as CheckBox;
        RepeaterItem item = chk1.Parent as RepeaterItem;
        CheckBox chk2 = item.FindControl("CheckBox2") as CheckBox;
        chk2.Checked = false;
    }

    protected void CheckBox2_CheckedChanged(object sender, EventArgs e)
    {

    }

    protected void CheckBox3_CheckedChanged(object sender, EventArgs e)
    {

    }

    protected void repeaterItems_ItemCreated1(object sender, RepeaterItemEventArgs e)
    {
        RepeaterItem ri = (RepeaterItem)e.Item;

        if (ri.ItemType == ListItemType.Item || ri.ItemType == ListItemType.AlternatingItem)
        {
            CheckBox chk = (CheckBox)e.Item.FindControl("CheckBox1");
            chk.CheckedChanged += new EventHandler(CheckBox1_CheckedChanged);
        }
    } 
```

CheckBox1_CheckedChanged 事件未触发。请帮我解决这个错误。我花了更多时间来解决这个问题，但我不能..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T11:28:15.400

只需确保您没有在回发时绑定转发器，并且在转发器上启用了视图状态。

```
if(!Page.IsPostBack)
{
   Repeater.Datasource = dataset(what ever source);
   Repeater.Databind;
} 
```

没有理由绑定到转发器上的 itemcreated 事件，只是为了附加到 oncheckedchanged 事件，因为这是没有意义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T07:24:45.783

你也可以通过 JQuery 来实现

```
<head runat="server">
    <title></title>
    <script language="javascript" type="text/javascript" src="Scripts/jquery-1.8.2.min.js"></script>
    <script language="javascript" type="text/javascript">
        $(document).ready(function () {
            $('.chkGroup').change(function () {
                var parentTr = $(this).parent().parent();
                var currentCheckID = $(this).find('input').attr("id");
                $(parentTr).find('.chkGroup input').each(function () {
                    if (currentCheckID != $(this).attr("id")) {

                        $(this).removeAttr("checked");
                    }
                });
            });
        });
    </script>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:Repeater ID="repeaterItems" runat="server" onitemdatabound="repeaterItems_ItemDataBound">
            <ItemTemplate>
                <table id="mytable" cellspacing="0" width="100%" align="center">
                    <tr>
                        <td style="width: 18px;">
                            <asp:Label ID="id" runat="server" Text='<%#Bind("ID")%>'></asp:Label>
                        </td>
                        <td style="width: 301px;">
                            <asp:Label ID="Label1" runat="server" Text='<%#Bind("Name")%>'></asp:Label>
                        </td>
                        <td style="width: 10px;">
                            <asp:CheckBox ID="CheckBox4" runat="server" CssClass="chkGroup" />
                        </td>
                        <td style="width: 30px;">
                            <asp:CheckBox ID="CheckBox5" runat="server" CssClass="chkGroup" />
                        </td>
                        <td style="width: 33px;">
                            <asp:CheckBox ID="CheckBox6" runat="server" CssClass="chkGroup" />
                        </td>
                    </tr>
                </table>
            </ItemTemplate>
        </asp:Repeater>
    </div>
    </form>
</body> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-07T04:14:56.420

`CheckBox1_CheckedChanged`您可以对所有三个复选框使用相同的事件处理程序`OnCheckedChanged`。通过使用 sender 对象，您可以知道哪个复选框引发了事件，然后将其他两个复选框`checked`属性设置为`false.`

# ios - 找不到 CCTargetTouchDelegate/CCStandardTouchDelegate 的协议声明

> ID：13262959
> 
> 赞同：15
> 
> 时间：2012-11-07T04:02:26.563
> 
> 标签：ios, cocos2d-iphone

我已将我的项目升级到 cocos2d 2.1 的最新测试版，现在收到错误消息，

> 找不到 CCTargetTouchDelegate 的协议声明

和

> 找不到 CCStandardTouchDelegate 的协议声明

我该如何解决？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-07T04:02:26.563

从 cocos2d 2.1 beta 3 开始，对触摸代表进行了以下更改。

> CCTargetedTouchDelegate -> CCTouchOneByOneDelegate
> 
> CCStandardTouchDelegate -> CCTouchAllAtOnceDelegate

只需在类声明中更改协议的名称，错误就会得到修复。

**参考**：[变更日志](https://github.com/cocos2d/cocos2d-iphone/blob/develop-v2/CHANGELOG)

# facebook - 无法使用新 API 发送 FB 通知

> ID：13262965
> 
> 赞同：10
> 
> 时间：2012-11-07T04:02:55.923
> 
> 标签：facebook, notifications

真的需要一些帮助！

我正在尝试使用新的通知 API 从画布应用程序发送通知，但我不断收到以下异常：

OAuthException: (#200) 只有网络画布应用可以发送应用通知

但是，该应用程序已加载到 Facebook 画布中——当用户采取触发通知 POST 请求的特定操作时，我正在对我的服务器进行 ajax 调用。用户还授权了该应用程序。

这是我正在使用的代码：

```
$graphUrl = $user_id . "/notifications";
$params = array( "access_token" => $admintoken,
             "href" => $link, 
         "template" => "string of text < 180 chars"
        );

try {
  $result = $facebook->_graph($graphUrl, 'POST', $params);
 } catch (Exception $e){
     echo $e;
 } 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-07T04:58:24.317

我也遇到了这个问题，这就是我解决它的方法，但这可能与您无关，因为您似乎确定您的应用程序是 Canvas 应用程序。Mine 是一个主要在 Facebook 上运行的应用程序，但具有 Facebook 集成挂钩，这意味着用户可以授权我的 Facebook 应用程序，然后通过 Facebook 框架接收有关有趣事件的更新。

我去 Facebook Developers 应用程序中编辑我的应用程序设置，查看底部附近的设置->基本页面。我只检查了“使用 Facebook 登录的网站”。我检查了“Facebook 上的应用程序”，这给了我一个“画布页面”和其他各种设置。填写并保存这些内容后，对 uid/通知的 POST 立即生效。

顺便说一句，转到apps.facebook.com/myappnamehere 失败，因为它重定向到https 并且对我的站点的请求失败，因为我的SSL 设置不正确，但这并没有阻止在该应用程序凭据下发送通知。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-10-06T07:26:16.503

最近，我遇到了同样的问题，我发现 **Facebook Web Games**的正式名称为 Facebook Canvas。

因此，只需在 Settings->Basic 页面下创建一个 Facebook 游戏配置（您将在此页面底部看到添加按钮），您的 API 将开始发送通知。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-27T16:04:17.980

1:\ 访问[developer.facebook.com](https://developer.facebook.com)

2：\转到您的应用**设置**\**基本**

3:\ 从页面底部按钮的加号添加新平台

4:\ 选择**Facebook 画布**

现在您可能需要用您的网址填写表格

而已

# javascript - jQuery插件将列表变成类似选框的轮播

> ID：13262967
> 
> 赞同：1
> 
> 时间：2012-11-07T04:03:05.110
> 
> 标签：javascript, jquery, jquery-plugins, carousel, marquee

有谁知道一个很好的 jQuery 插件，可以将图像列表变成一个自动滚动字幕的轮播？看起来很简单，但我一直没能找到一个像样的。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T04:16:01.063

Marquee 是现在要搜索的“旧”词 :) 我们曾经在 FrontPage 时代使用它，当时 IE 是统治者。

无论如何，您可能会搜索像这样的新闻代码[http://164a.com/jnewsticker/](http://164a.com/jnewsticker/)

# android - 在后台向自己的电话号码发送短信，但不显示在消息列表中

> ID：13262977
> 
> 赞同：1
> 
> 时间：2012-11-07T04:04:47.610
> 
> 标签：android, iphone, objective-c, ios, windows-phone-7

> **可能重复：**
> [如何在 iPhone 上以编程方式发送短信？](https://stackoverflow.com/questions/10848/how-to-programmatically-send-sms-on-the-iphone)

我不确定这是否可能，但我想要实现的是，在征得用户许可后，我的应用程序想通过我的应用程序在他们的手机上发送格式化的短信。我希望它发生在后台而不让他们看到短信输入屏幕，我希望发送的短信不出现在消息列表中，只有格式化的接收消息。

甚至可能吗？最初我想在 iPhone 上实现它，但后来我想将它扩展到 Android 和 wp7。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T04:13:40.183

在 iOS 上，不，你不能。

不过，您可以使用第三方服务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T04:14:27.703

我不知道其他平台，但在 iOS 上，如果您的应用想要发送短信，它会请求用户许可，用户将被带到短信界面。Apple 对这些非常严格，但在 android 中这可能是可能的。

[在 iOS 文档上发送 SMS](http://developer.apple.com/library/ios/#documentation/MessageUI/Reference/MFMessageComposeViewController_class/Reference/Reference.html/ "发送短信 iOS 文档")

编辑：我不知道你想做什么，但为什么不使用网络呢？如果您尝试发送用户不知道内容或目的地的消息，则不需要通过 SMS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T05:28:19.483

我能想到的唯一选择是将 NSHTTPURLRequest 发送到提供 SMS 网关的 Web 服务。您当然可以在后台执行此操作，尽管您（开发人员，而不是用户）可能会承担发送消息的费用，并且发件人似乎不是用户。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T05:50:30.810

您可以像这样在后台发送短信：

在这里，我使用了单击按钮，您可以在后台发送短信，用户面前不会出现任何屏幕。（**注意：**如果适用，则返回，否则返回空值。）

**获取所有者的电话号码：**

```
 TelephonyManager tMgr =(TelephonyManager)mAppContext.getSystemService(Context.TELEPHONY_SERVICE);
 String number = tMgr.getLine1Number(); 
```

**`Pending Intent`**在点击事件中写入此代码。

```
String message = "HI THIS IS TEST SMS IN ANDROID.";             

/** Creating a pending intent which will be broadcasted when an sms message is successfully sent */
PendingIntent piSent = PendingIntent.getBroadcast(getBaseContext(), 0, new Intent("sent_msg") , 0);

/** Creating a pending intent which will be broadcasted when an sms message is successfully delivered */
PendingIntent piDelivered = PendingIntent.getBroadcast(getBaseContext(), 0, new Intent("delivered_msg"), 0);

/** Getting an instance of SmsManager to sent sms message from the application*/
SmsManager smsManager = SmsManager.getDefault();                

/** Sending the Sms message to the intended party */
smsManager.sendTextMessage(number, null, message, piSent, piDelivered); 
```

`SmsNotifications`创建类名`extends BroadcastReceiver`

```
/**
 * This class handles the SMS sent and sms delivery broadcast intents
 */
public class SmsNotifications extends BroadcastReceiver{

    /**
     * This method will be invoked when the sms sent or sms delivery broadcast intent is received 
     */ 
    @Override
    public void onReceive(Context context, Intent intent) {

        /**
         * Getting the intent action name to identify the broadcast intent ( whether sms sent or sms delivery ) 
         */
        String actionName = intent.getAction();

        if(actionName.equals("sent_msg")){
            switch(getResultCode()){
                case Activity.RESULT_OK:
                    Toast.makeText(context, "Message is sent successfully" , Toast.LENGTH_SHORT).show();
                    break;
                default:
                    Toast.makeText(context, "Error in sending Message", Toast.LENGTH_SHORT).show();
                    break;              
            }           
        }

        if(actionName.equals("delivered_msg")){
            switch(getResultCode()){
                case Activity.RESULT_OK:
                    Toast.makeText(context, "Message is delivered" , Toast.LENGTH_SHORT).show();
                    break;
                default:
                    Toast.makeText(context, "Error in the delivery of message", Toast.LENGTH_SHORT).show();
                    break;

            }

        }       
    }
} 
```

**管理您的清单文件：**

允许 ：

```
 <uses-permission android:name="android.permission.SEND_SMS" /> 
```

和

```
 <receiver android:name=".SmsNotifications" >
            <intent-filter >
                <action android:name="sent_msg" />
                <action android:name="delivered_msg" />                                
            </intent-filter>
        </receiver> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-07T07:27:35.333

您不能在 Windows Phone 7 中执行此操作。您必须启动一个`SmsComposeTask`类似于`MFMessageComposeViewController`. 这意味着所有的文本发送逻辑都在那里处理，您只能调整一些参数。

# wcf - ThreadStatic - WCF 方法调用是否仅在单个线程上执行？

> ID：13262979
> 
> 赞同：3
> 
> 时间：2012-11-07T04:05:29.083
> 
> 标签：wcf, threadstatic

我们的 WCF 服务引用的库之一使用 ThreadStatic 变量。服务方法在每次调用开始时设置它的值。我想知道这是否安全——换句话说，我们能否保证只有一个线程专门用于整个调用？或者是否有可能调用可以在一个工作线程上开始并在另一个工作线程上结束？还是可以将工作线程交换到不同的方法调用然后再返回？

我们使用 ConcurrencyMode.Single 和 InstanceContextMode.PerSession 的默认值。

**编辑**

到目前为止，我能找到的唯一信息是这篇博文，其中指出一个调用可以由多个线程处理：

[http://blogs.microsoft.co.il/blogs/applisec/archive/2009/11/23/wcf-thread-affinity-and-synchronization.aspx](http://blogs.microsoft.co.il/blogs/applisec/archive/2009/11/23/wcf-thread-affinity-and-synchronization.aspx)

这人说的对吗？是否有来自 Microsoft 的任何明确信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T22:49:29.437

如果您不确定是否始终可以使用 CallContext 类： [CallContext.LogicalSetData](http://msdn.microsoft.com/en-us/library/system.runtime.remoting.messaging.callcontext.logicalsetdata.aspx "逻辑集数据") [CallContext.LogicalGetData](http://msdn.microsoft.com/en-us/library/system.runtime.remoting.messaging.callcontext.logicalgetdata.aspx "逻辑获取数据")

虽然如果线程发生更改，ThreadStatic 将不起作用，但逻辑​​ CallContext 在 .NET 中传递，即使您将创建自己的新线程/任务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T09:20:32.067

您所说的可以在多个请求之间传递单个请求的现象称为“线程敏捷性”。

简短的回答是不，您不能*保证*给定的请求将由单个线程处理。

在此处查看已接受的答案：[WCF 请求处理线程敏捷吗？](https://stackoverflow.com/questions/2356127/are-wcf-request-handling-thread-agile)

*这是由 IIS 托管的 WCF 的情况

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T06:10:28.700

我有保存问题。为了调查我开始负载测试并开始测试 GetRolesForUser：

```
public override bool IsUserInRole(string username, string roleName)
    {
        object stub = new object();
        bool res;
        lock(stub)
        {
            RoleProviderCount++;
            ThreadId = Thread.CurrentThread.ManagedThreadId;
            res = GetRolesForUser(username).Contains(roleName);
        }
        return res;
    } 
```

这是我的日志：

```
Timestamp: 06.11.2012 13:55:03 Message:  ServiceCalls count 1; RoleProvider count 1 Thread Id 9 
Timestamp: 06.11.2012 14:00:22 Message:  ServiceCalls count 1; RoleProvider count 1 Thread Id 9 
Timestamp: 07.11.2012 5:30:38 Message:  ServiceCalls count 1; RoleProvider count 1 Thread Id 11 
Timestamp: 07.11.2012 5:31:58 Message:  ServiceCalls count 1; RoleProvider count 4 Thread Id 27 
Timestamp: 07.11.2012 5:31:58 Message:  ServiceCalls count 1; RoleProvider count 4 Thread Id 27 
Timestamp: 07.11.2012 5:31:58 Message:  ServiceCalls count 1; RoleProvider count 4 Thread Id 27 
Timestamp: 07.11.2012 5:31:58 Message:  ServiceCalls count 1; RoleProvider count 4 Thread Id 27 
Timestamp: 07.11.2012 5:31:58 Message:  ServiceCalls count 1; RoleProvider count 4 Thread Id 27 
Timestamp: 07.11.2012 5:31:58 Message:  ServiceCalls count 1; RoleProvider count 4 Thread Id 27 
Timestamp: 07.11.2012 5:31:59 Message:  ServiceCalls count 1; RoleProvider count 5 Thread Id 22 
Timestamp: 07.11.2012 5:31:59 Message:  ServiceCalls count 1; RoleProvider count 8 Thread Id 26 
Timestamp: 07.11.2012 5:31:59 Message:  ServiceCalls count 1; RoleProvider count 8 Thread Id 26 
Timestamp: 07.11.2012 5:32:00 Message:  ServiceCalls count 1; RoleProvider count 10 Thread Id 23 
Timestamp: 07.11.2012 5:32:00 Message:  ServiceCalls count 1; RoleProvider count 11 Thread Id 29 
Timestamp: 07.11.2012 5:32:00 Message:  ServiceCalls count 1; RoleProvider count 12 Thread Id 22 
Timestamp: 07.11.2012 5:32:00 Message:  ServiceCalls count 1; RoleProvider count 13 Thread Id 27 
Timestamp: 07.11.2012 5:32:00 Message:  ServiceCalls count 1; RoleProvider count 14 Thread Id 24 
Timestamp: 07.11.2012 5:32:00 Message:  ServiceCalls count 1; RoleProvider count 15 Thread Id 30 
Timestamp: 07.11.2012 5:32:00 Message:  ServiceCalls count 1; RoleProvider count 16 Thread Id 26 
Timestamp: 07.11.2012 5:32:01 Message:  ServiceCalls count 1; RoleProvider count 17 Thread Id 11
Timestamp: 07.11.2012 5:32:01 Message:  ServiceCalls count 1; RoleProvider count 18 Thread Id 23
Timestamp: 07.11.2012 5:32:01 Message:  ServiceCalls count 1; RoleProvider count 20 Thread Id 26
Timestamp: 07.11.2012 5:32:01 Message:  ServiceCalls count 1; RoleProvider count 20 Thread Id 26
Timestamp: 07.11.2012 5:32:01 Message:  ServiceCalls count 1; RoleProvider count 21 Thread Id 24 
```

因此，RoleProvider 方法是从同一个线程调用的。（WCF服务配置实例方式PerCall，并发Multiple）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T05:59:35.343

以下是我一位同事的回复：

* * *

> 你提到的“这个人”一定是错的。在实际服务方法的执行过程中，无法更改线程。这适用于任何方法，并且与 WCF 无关。
> 
> 可以创建一个异步调用，然后在另一个方法/线程上完成；但这没什么特别的： http: [//tao.qshine.com/note/ThreadIssue.html](http://tao.qshine.com/note/ThreadIssue.html)
> 
> 我当然很想知道这个线程敏捷性是否真的与方法调用切换线程有关……我们在这里谈论的是托管线程，微软没有理由更改线程 ID。CallContext 是 Microsoft 提供的一项功能，以便您在执行异步调用时可以存储状态。
> 
> 实例上下文可能使用不同的线程来实例化服务而不是执行方法——尽管如果您使用 PerCall，这不会发生。你真的在使用会话吗？如果不是，您应该切换到 PerCall。同一会话中的不同调用可能会使用不同的线程。

* * *

似乎有道理。任何意见？

# vba - Excel函数的触发

> ID：13262980
> 
> 赞同：0
> 
> 时间：2012-11-07T04:05:30.680
> 
> 标签：vba, excel

```
Worksheets("InputSheet").Outline.ShowLevels RowLevels:=1 
```

在执行这条线之后，触发了一个 UDF，并且这个 UDF 突然结束，原因我不知道。

UDF 不会在 "InputSheet" 的任何地方直接调用。在“InputSheet”中仅使用另一个使用此函数的工作表中的 NamedCell。

我不希望触发该功能。
任何可能的原因或解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T08:26:42.977

显示和隐藏行通常会触发重新计算，并且重新计算涉及所有打开的工作簿中的所有工作表。
尝试将计算设置为手动。

# database - 如何列出表中的所有行并显示 wordpress 数据库中的特定列数据

> ID：13262982
> 
> 赞同：5
> 
> 时间：2012-11-07T04:06:00.597
> 
> 标签：database, plugins, wordpress

我有一个名为 wp_email_subscription 的表，在表内我有来自订阅用户的电子邮件行。每行包含 id、email 和 name 列。

我还为插件创建了管理页面，我想在其中列出订阅表中的所有电子邮件。

基本上我不知道如何使用 wpdb 功能，我从 wp 网站阅读了 wpdb 说明，但我不明白。

我需要的是从 wp_email_subscription 和 foreach 行中选择所有以在列表中显示电子邮件和名称列。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-07T07:03:15.127

您必须像这样在代码页中使用`global wpdp`变量和`get_result`函数...

```
global $wpdb;

$row = $wpdb->get_results( "SELECT * FROM wp_email_subscription");

foreach ( $row as $row ) 
{ echo "email:".$row->email.";} //$row->your_column_name in table 
```

像这样，您可以通过以下方式访问所有列`$variable->col_name`

# c++ - 客户端服务器应用程序的通道

> ID：13262986
> 
> 赞同：0
> 
> 时间：2012-11-07T04:06:37.430
> 
> 标签：c++, sockets, network-programming, channel, socketchannel

我有使用 windsock 传输数据的客户端服务器程序，但我需要类似客户端 - 通道 - 服务器的东西，其中通道将从 clinet 检索请求或服务器将处理它，并且 id 在那个时候通道很忙它将存储该请求在队列中。我希望频道作为一个单独的应用程序。我对此有一点想法：

```
class ch {

void getdata{
//to recieve data
}

void putdata{
//to send data
}

void queue{
//to store if channel is busy now
} 

private:
void dataaddress;
double datasize;

} 
```

我想把它做成一个不同的应用程序或一个 dll 文件，但我不知道如何使用 dll 文件和其他如果我使用套接字它会像客户端或服务器一样。那么有没有更好的方法或从哪里开始呢？我知道 boost:asio 和其他库，但我需要 c++ 标准库中的一些东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T06:19:11.230

如果我理解你，你需要三个程序，连接如下：

```
+--------+ +------------+ +--------+
| 客户 | <---> | 《频道》 | <---> | 服务器 |
+--------+ +------------+ +--------+

```

“通道”程序充当服务器和客户端之间的*代理。*

为此，您必须创建“通道”程序来充当服务器*和*客户端。它以客户端程序连接到它的方式而不是实际服务器的方式充当服务器。当“通道”程序接收到新的客户端连接时，它自己充当客户端连接到真实服务器。

然后，您必须跟踪套接字是否对（客户端和服务器连接），以便当您从一个套接字接收输入时，您对其进行处理并将处理后的数据发送到另一个套接字。因此，如果客户端发送数据，您会在“通道”程序中接收它并执行所需的任何处理，然后将其发送到真实服务器。反过来也一样。

# c# - rss xml 的项目部分 - 任何唯一字段

> ID：13262991
> 
> 赞同：0
> 
> 时间：2012-11-07T04:07:47.847
> 
> 标签：c#, php, jquery, xml, rss

我有一个规范，不要在返回到移动设备的 rss 项目中包含描述元素。这是因为客户声称描述文本太大，移动设备无法处理。客户现在要求应该有一个唯一的字段来标识每个项目，当发送到我的应用程序时会检索该项目部分的描述。

我的问题是这些元素值中的哪一个可以用来识别项目？我读到该`<guid>`元素不可靠并且是可选元素。

```
 <item>
    <title>RSS Tutorial</title>
    <link>http://www.w3schools.com/rss</link>
    <description>New RSS tutorial on W3Schools</description>
    <guid>http://www.w3schools.com/rss/item0768</guid>
    ...
    ...
  </item> 
```

我现在想到的是假设这些项目总是有一个固定的位置 [1,2,3,4,5]。items[1] 将始终是 items[1]。所以我想添加另一个元素`<index>i</index>`。有什么建议吗？谢谢。

**更新**

我认为我需要专注于手头的实施。根据 rss 规范，item 元素中的子元素是可选的，guid 也是如此。现在它出现在正在使用的 rss 中，我想我会使用它

# c# - 使用 WCF 进行实时 Web 更新

> ID：13262992
> 
> 赞同：1
> 
> 时间：2012-11-07T04:07:59.940
> 
> 标签：c#, php, wcf, flash, real-time

我一直在阅读很多关于在 Web 中使用 WCF 的论坛，尤其是这个主题：[WCF 与 Flash 教程](https://stackoverflow.com/questions/3306744/wcf-with-flash-tutorial)，但我真的很困惑。

我有一个使用 WCF 服务的现有源服务器。它可以毫无问题地向其 Windows 应用程序客户端提供实时信息。我想做的是有一个 Web 应用程序来订阅我提供给 Windows 应用程序客户端的提要。对于我读过的论坛（我已经指出的那个），它似乎是一种请求回复方法。而且我认为，使用它，我将无法实现它的实时传输。

我想知道 web 开发中是否有回调函数的等价物。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T04:14:54.000

我认为 Duplex 服务符合您的要求。请使用双工类型的 WCF 服务。

双工服务契约是一种消息交换模式，其中两个端点都可以独立地向对方发送消息。因此，双工服务可以将消息发送回客户端端点，提供类似事件的行为。双工通信发生在客户端连接到服务并为服务提供通道时，服务可以通过该通道将消息发送回客户端。请注意，双工服务的类事件行为仅在会话中起作用。

链接： http: [//msdn.microsoft.com/en-us/library/ms731064.aspx](http://msdn.microsoft.com/en-us/library/ms731064.aspx) http://www.c-sharpcorner.com/uploadfile/dhananjaycoder/a-simple-duplex-service-in-wcf/ [http ://msdn.microsoft.com/en-us/library/ms731935.aspx](http://msdn.microsoft.com/en-us/library/ms731935.aspx)

您还可以使用 WCF 4.5 中新增的 Web 套接字。以下是 Web 套接字 WCF 链接：

[http://msdn.microsoft.com/en-us/library/hh674271.aspx](http://msdn.microsoft.com/en-us/library/hh674271.aspx)

# asp.net-mvc-3 - 在 MVC3 中调用 javascript 时，控制器操作方法调用的参数为 NULL

> ID：13262994
> 
> 赞同：0
> 
> 时间：2012-11-07T04:08:07.010
> 
> 标签：asp.net-mvc-3

我使用 MVC3。我有`

```
function userLocation_change()
 {
    var text = $("#userLocation").val();
    alert(text);
    var url = '@Url.Action("GetAllLocations", "Home")';
    var data = text;
    $.post(url, data, function (result) {

        });
} 
```

`

这是我的控制器操作：

```
public JsonResult GetAllLocations(string userlocation)
    {
        ///...some code...
        return Json(..Something.., JsonRequestBehavior.AllowGet);
    } 
```

问题是每当调用控制器函数时，`"userlocation"`参数确实具有 NULL 值。我希望将`data`值传递给控制器​​操作。有人可以告诉我为什么会这样吗？任何更新将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T04:27:17.710

将您的 jQuery post 函数调用修改为：

```
$.post(  
    url,  
    { userlocation: text },  
    function(result){
       ....
}); 
```

这是因为，您必须使用 JavaScript 文字将数据发送到控制器的操作方法。您可以在此处查看使用 JavaScript 调用 Controller 操作的不同方法的完整列表：[http ://www.asp.net/ajaxlibrary/jquery_posting_to.ashx](http://www.asp.net/ajaxlibrary/jquery_posting_to.ashx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T05:21:11.007

您的操作有一个名为 的字符串输入参数`userlocation`，因此在将数据发送到操作时，您应该指定它，就像在下面的代码中所做的那样。

我在这里使用`data: { userlocation: text},`

```
function userLocation_change()
 {
    var text = $("#userLocation").val();
    var url = '@Url.Action("GetAllLocations", "Home")';

    $.ajax({
    url: url,
    type: 'POST',
    data: { userlocation: text},     
    success: function (result) {

    }
    });
} 
```

希望这可以解决您的空问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T04:13:24.273

您需要通过[Url.Action](http://msdn.microsoft.com/en-us/library/dd470197%28v=vs.108%29.aspx)`@Url.Action`的此重载方法将参数专门传递给。您可以使用[RouteValueDictionary](http://msdn.microsoft.com/en-us/library/cc680272.aspx)内联构造函数来实例化。

* * *

编辑：现在意识到您需要在运行时填充该链接，但该`Url.Action`方法在渲染时生成链接。我建议将其添加到查询字符串中，然后从控制器方法中的查询字符串中读取它。我怀疑有一种更优雅的方式..但我知道这行得通。

就像是：`var url = '@Url.Action("GetAllLocations", "Home")?userlocation=' + $("#userLocation").val();`

# c++ - 在 C++ 中创建一个只有可变属性的类是不好的做法吗？

> ID：13262995
> 
> 赞同：0
> 
> 时间：2012-11-07T04:08:46.900
> 
> 标签：c++, oop, class, visual-c++, namespaces

我拥有的这一类只有`protected`可变属性，如`int health`and `int level`，但没有方法。这是不好的做法吗？我将它用于保存游戏功能，它只需要使用变量，但不需要任何方法。文件如下所示：

人类.h：

```
// Human.h - Johnny P

#pragma once

namespace SharpEngine {
    class Human {
    protected:
        std::string name;
        int level;
        int health;
        int defense;
        int strength;
        int experience;
        int money;
        int inventory[10];
    };
} 
```

人类.cpp

```
// Human.cpp - Johnny P

#include <string>
#include "Human.h" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T04:18:14.967

好吧，“不良做法”是一个有点累赘的术语。

让我们更确切地说，一个常见的模式是“哑数据”，其中类/结构只是用来包含数据。这与“普通旧数据”(POD) 不太一样，后者是一个与 C 兼容的结构。

话虽如此，使用“受保护”并不是典型的哑数据模式。在使用“受保护”时，您暗示您将从它派生，这意味着至少是一个虚拟析构函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T04:16:29.003

仅标头类型很好，放弃没有实现的“实现文件”。

无用的文件是不好的做法。